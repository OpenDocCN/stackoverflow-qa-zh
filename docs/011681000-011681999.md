# StackOverflow 问答 11681000-11681999

# .net - C#.NET 正则表达式在标点符号后查找空格

> ID：11681001
> 
> 赞同：-3
> 
> 时间：2012-07-27T03:20:12.847
> 
> 标签：.net, regex, regex-negation

这是我当前的正则表达式：`[^\s][\.,\?!:][\w]`. 我需要检查每个标点符号后是否有空格，例如`[.,!:?]`. 但是我有一个问题，我要签入的文件类型是`*.sgm`，所以有一些标签是这样的：

```
<at.cit><at.cit>> </at.cit> <case.cit><lit> </lit></case.cit> 
```

例如：

```
<ptext>Text.Text<at.cit>Text</at.cit></ptext> 
```

所以我只需要匹配`"t.T"`，因为我们在句号之后需要一个空格。但我的正则表达式会找到`"t.T"`and`"t.c"`和`"t.c"`。我怎样才能消除这些标签？

感谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T14:53:19.103

我相信您正在寻找 regex `(?<![<\/])\b\w*(\w[.,?!:]\w)\w*\b(?!\>)`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T04:49:56.720

同意其他评论员的意见，您应该使用为解析 C# 格式而制作的库。如果出于某种原因您绝对必须使用正则表达式破解它，您可以使用以下内容：

```
>(?<Text>([\w]*(?<Hit>\.\S))+[\w]*)< 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T20:22:25.207

```
\S[.,?!:]\w(?!(?<=<[^<>]*)(?=[^<>]*>)) 
```

如果当前将它定位在标签内，则后向`(?<=<[^<>]*)`- 和前瞻 -`(?=[^<>]*>)`都将为真。将它们包装在负前瞻中可以防止标签内的匹配。

# jquery - 在 jQuery UI 手风琴元素的更改事件中获取 SPAN 内的值

> ID：11681006
> 
> 赞同：1
> 
> 时间：2012-07-27T03:21:12.370
> 
> 标签：jquery, jquery-ui

当用户更改活动标题元素并触发 $.ajax 调用时，我试图获取 SPAN 的值。我有这个代码：[http](http://pastebin.com/rxQRSADQ) ://pastebin.com/rxQRSADQ我在更改事件中得到的值是包含在 SPAN 中的值，类：selected-center-open-ticket-label 但我只需要数字“1”而不是整个值，意思是“票：1”。有什么可以帮助我的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T03:25:21.980

`regexp`匹配的数字怎么样？

```
var string = "Ticket11: 1".match(/\d+$/)[0];
alert(string); 
```

这样你就可以传递任何字符串，就像我的例子一样，它会返回最后一个数字。

`\d`匹配数字。
`+`匹配一个或多个。
`$`匹配字符串的结尾。

**[匹配演示](http://jsfiddle.net/Y4Kee/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T03:24:16.097

如果它始终是“票：”，那么您可以使用`substr(8)`.

**编辑：**

演示：http: [//jsfiddle.net/SO_AMK/6dkh6/](http://jsfiddle.net/SO_AMK/6dkh6/)

jQuery：

```
$('.selected-center-open-ticket').click(function() {
    alert($(this).find(".selected-center-open-ticket-label").text().substr(8));
});​ 
```

HTML：

```
<div id="tickets-accordion">
    <div class="selected-center-open-ticket">
        <a href="#"><img src="/assets/img/admin/icon/icon2.png" alt="Close" title="Close" class="max-icon" width="21" height="17" /></a>
        <img src="/assets/img/admin/foto-2.jpg" alt="Username" title="Username"
        class="avatar" />
        <span class="selected-center-open-ticket-label">Ticket: 1</span>
        <span class="selected-center-open-ticket-store">La Trinidad</span>
        <span class="selected-center-open-ticket-user">Reynier Perez Mira</span>
    </div>
    <div class="selected-center-open-ticket">
        <a href="#"><img src="/assets/img/admin/icon/icon2.png" alt="Close" title="Close" class="max-icon" width="21" height="17" /></a>
        <img src="/assets/img/admin/foto-2.jpg" alt="Username" title="Username"
        class="avatar" />
        <span class="selected-center-open-ticket-label">Ticket: 2</span>
        <span class="selected-center-open-ticket-store">Boleíta</span>
        <span class="selected-center-open-ticket-user">Reynier Perez Mira</span>
    </div>
</div>​ 
```

# android - 如何使用 Spinner 显示玩家姓名并通过 Intent 发送？

> ID：11681007
> 
> 赞同：1
> 
> 时间：2012-07-27T03:21:13.837
> 
> 标签：android, android-layout, android-intent, android-emulator, android-widget

我需要你的帮助。你能帮我解决这个项目而不会遇到“**致命错误：主要**”或其他什么吗？我想制作一个具有以下步骤的程序：

1.  *在微调器中注册或注册玩家一号和二号的名称。之后 EditText 变为空。*

2.  *名称出现在各自的微调器上。（玩家一和玩家二的名字重复对我来说是可以的）*

3.  *无论在微调器上选择玩家的名字，如果我点击“设置你的名字并开始游戏！” 按钮，意图为结果调用另一个 .class。*

我唯一没想到的是烦人的**FORCE CLOSE**错误，即使我没有出错。这是我的示例：

这是我的主类代码（**AndroidSpinnerFromSQLiteActivity**）：

```
//Variables
    private Spinner spinner, spinner_2;
    private Button add_button, add_button_2;
    private EditText label_input, label_input_2;

    //Response
    public final static String EXTRA_MESSAGE_ONE = "com.example.databasetest.MESSAGEONE";
    public final static String EXTRA_MESSAGE_TWO = "com.example.databasetest.MESSAGETWO";

    @Override
    public void onCreate(Bundle savedInstanceState) 
    {

        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        //Identifying view by looking for the player 1 view's ID.
        spinner = (Spinner) findViewById(R.id.Player_1_Spinner);
        add_button = (Button) findViewById(R.id.Player_1_Sign_up_Button);
        label_input = (EditText) findViewById(R.id.Player_1_Text_Field);

        //Identifying view by looking for the player 2 view's ID.
        spinner_2 = (Spinner) findViewById(R.id.Player_2_Spinner);
        add_button_2 = (Button) findViewById(R.id.Player_2_Sign_up_Button);
        label_input_2 = (EditText) findViewById(R.id.Player_2_Text_Field);

        //Adding the spinner listener...
        spinner.setOnItemSelectedListener(this);
        spinner_2.setOnItemSelectedListener(this);

        //Loading spinner's data from the database.
        loadSpinnerData();

        //Function for Buttons (Player 1)
        add_button.setOnClickListener(new OnClickListener() 
        {

            public void onClick(View v) 
            {

                String label = label_input.getText().toString();

                //Here's the process on how to register in the database.
                if(label.trim().length() > 0)
                {
                    //Database Handler from Class (Database_Handler.java)
                    Database_Handler db = new Database_Handler(getApplicationContext());

                    //Inserting new label into the database.
                    db.insertLabel(label);

                    //After typing, the text field is set to blank.
                    label_input.setText("");

                    //Normally, most smartphones and tablets only have a virtual keyboard.
                    InputMethodManager imm = (InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE);
                    imm.hideSoftInputFromWindow(label_input.getWindowToken(), 0);

                    loadSpinnerData();
                }

                else //If the input is null...
                {
                    Toast.makeText(getApplicationContext(), "Please enter your name, player 1!", Toast.LENGTH_SHORT).show();
                }

            }

        });

      //Function for Buttons (Player 2)
        add_button_2.setOnClickListener(new OnClickListener() 
        {

            public void onClick(View v) 
            {

                String label = label_input_2.getText().toString();

                //Here's the process on how to register in the database.
                if(label.trim().length() > 0)
                {
                    //Database Handler from Class (Database_Handler.java)
                    Database_Handler db = new Database_Handler(getApplicationContext());

                    //Inserting new label into the database.
                    db.insertLabel(label);

                    //After typing, the text field is set to blank.
                    label_input_2.setText("");

                    //Normally, most smartphones and tablets only have a virtual keyboard.
                    InputMethodManager imm = (InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE);
                    imm.hideSoftInputFromWindow(label_input_2.getWindowToken(), 0);

                    loadSpinnerData();
                }

                else //If the input is null...
                {
                    Toast.makeText(getApplicationContext(), "Please enter your name, player 2!", Toast.LENGTH_SHORT).show();
                }

            }

        });

    }

    public void sendMessage(View v)
    {
        Intent intent = new Intent(this, Respond_Test.class);

        EditText P1 = (EditText) findViewById(R.id.Player_1_Text_Field);
        String message1 = P1.getText().toString();

        EditText P2 = (EditText) findViewById(R.id.Player_2_Text_Field);
        String message2 = P2.getText().toString();

        intent.putExtra(EXTRA_MESSAGE_ONE, message1);
        intent.putExtra(EXTRA_MESSAGE_TWO, message2);
        startActivity(intent);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) 
    {
        getMenuInflater().inflate(R.menu.main, menu);
        return true;
    }

    //Now, call a method called loadSpinnerData() from the onCreate() method.
    private void loadSpinnerData()
    {

        Database_Handler db = new Database_Handler(getApplicationContext());

        List<String> lables = db.getAllLabels();

        //Creating an adapter for the spinner...
        ArrayAdapter<String> data_adapter = new ArrayAdapter<String>(this, android.R.layout.simple_spinner_item, lables);

        data_adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);

        spinner.setAdapter(data_adapter);
        spinner_2.setAdapter(data_adapter);

    }

    //Action applied if a user chose this item.
    public void onItemSelected(AdapterView<?> parent, View view, int position, long id) 
    {

        String label = parent.getItemAtPosition(position).toString();

        Toast.makeText(parent.getContext(), "You selected: " + label,
                Toast.LENGTH_LONG).show();

    }

    public void onNothingSelected(AdapterView<?> arg0) 
    {

        //Do nothing. I guess...

    } 
```

这是在另一个类（**Respond_Test**）上显示名称的响应的另一个代码：

```
@Override
    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);

        Intent intent = getIntent();
        String messageone = intent.getStringExtra(AndroidSpinnerFromSQLiteActivity.EXTRA_MESSAGE_ONE);
        String messagetwo = intent.getStringExtra(AndroidSpinnerFromSQLiteActivity.EXTRA_MESSAGE_TWO);

        TextView P1 = (TextView) findViewById(R.id.Player_1_ID);
        TextView P2 = (TextView) findViewById(R.id.Player_2_ID);

        P1.setText(messageone);
        P2.setText(messagetwo);
        setContentView(R.layout.respond);
    } 
```

主要的 XML ( **main.xml** )：

```
 <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <LinearLayout
        android:id="@+id/linearLayout1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:layout_marginTop="41dp" >

        <TextView
            android:id="@+id/textView1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Enter Player 1 Name:" />
    </LinearLayout>

    <LinearLayout
        android:id="@+id/linearLayout2"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/linearLayout1" >

        <EditText
            android:id="@+id/Player_1_Text_Field"
            android:layout_width="0dp"
            android:layout_height="35dp"
            android:layout_weight="1"
            android:inputType="textNoSuggestions"
            android:textSize="@dimen/padding_large" >

            <requestFocus />
        </EditText>

        <Button
            android:id="@+id/Player_1_Sign_up_Button"
            android:layout_width="70dp"
            android:layout_height="35dp"
            android:text="@string/Sign_Up"
            android:textSize="@dimen/padding_medium" />
    </LinearLayout>

    <LinearLayout
        android:id="@+id/linearLayout3"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/linearLayout2" >

        <Spinner
            android:id="@+id/Player_1_Spinner"
            android:layout_width="wrap_content"
            android:layout_height="37dp"
            android:layout_weight="1"
            android:prompt="@string/PLAYER_1_PROMPT"
            tools:listitem="@android:layout/simple_spinner_dropdown_item" />

    </LinearLayout>

    <LinearLayout
        android:id="@+id/linearLayout4"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/linearLayout3" >

        <TextView
            android:id="@+id/TextView01"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginTop="41dp"
            android:text="Enter Player 2 Name:" />
    </LinearLayout>

    <LinearLayout
        android:id="@+id/linearLayout5"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/linearLayout4" >

        <EditText
            android:id="@+id/Player_2_Text_Field"
            android:layout_width="0dp"
            android:layout_height="35dp"
            android:layout_weight="5.47"
            android:inputType="textPersonName" />

        <Button
            android:id="@+id/Player_2_Sign_up_Button"
            android:layout_width="70dp"
            android:layout_height="35dp"
            android:text="@string/Sign_Up"
            android:textSize="@dimen/padding_medium" />
    </LinearLayout>

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/linearLayout5" >

        <Spinner
            android:id="@+id/Player_2_Spinner"
            android:layout_width="wrap_content"
            android:layout_height="37dp"
            android:layout_weight="1"
            android:prompt="@string/PLAYER_2_PROMPT" />

    </LinearLayout>

    <Button
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="34dp"
        android:layout_alignParentBottom="true"
        android:layout_centerHorizontal="true"
        android:layout_marginBottom="62dp"
        android:text="@string/GAME"
        android:onClick="sendMessage" />

</RelativeLayout>

XML for the response (**respond.xml**):
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <TextView
        android:id="@+id/Player_1_ID"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:layout_marginLeft="16dp"
        android:layout_marginTop="64dp"
        android:text="TextView"
        android:textSize="20sp" />

    <TextView
        android:id="@+id/Player_2_ID"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignLeft="@+id/Player_1_ID"
        android:layout_below="@+id/Player_1_ID"
        android:layout_marginTop="24dp"
        android:text="TextView"
        android:textSize="20sp" />

</RelativeLayout> 
```

和清单：

```
 <manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.databasetest"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="4"
        android:targetSdkVersion="15" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >

        <activity
            android:name=".AndroidSpinnerFromSQLiteActivity"
            android:label="@string/title_activity_android_spinner_from_sqlite"
            android:theme="@style/AppTheme">"

            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>

        </activity>

         <activity
            android:name=".Respond_Test"
            android:label="@string/title_activity_android_spinner_from_sqlite"
            android:theme="@style/AppTheme"/>"

    </application>

</manifest> 
```

希望你能帮助我，并提前感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T03:56:47.190

试试这个活动一

```
 Intent intent = new Intent(yourActivity.this, Respond_Test.class);                         
        intent.putExtra("EXTRA_MESSAGE_ONE", message1);
        intent.putExtra("EXTRA_MESSAGE_TWO", message2);     
        startActivity(intent); 
```

第二个活动

```
 messageone = getIntent().getExtras().getString("EXTRA_MESSAGE_ONE");
 messagetwo = getIntent().getExtras().getString("EXTRA_MESSAGE_TWO");                          

   P1.setText(messageone );
   P2.setText(messagetwo ); 
```

# cordova - phonegap gcm 插件和 pushwoosh 出错

> ID：11681009
> 
> 赞同：1
> 
> 时间：2012-07-27T03:21:17.643
> 
> 标签：cordova, push-notification, google-cloud-messaging

我按照[http://www.pushwoosh.com/programming-push-notification/android-gcm-push-notifications-guide/](http://www.pushwoosh.com/programming-push-notification/android-gcm-push-notifications-guide/)上的教程进行操作，但我遇到了第 2 步。

我得到了这个编译错误：方法 getActivity() 未定义 CordovaInterface 类型

PushNotifications.java 中的 ctx.getAcitvity()

很抱歉不允许新用户发布图片。

有什么我想念的吗？这个问题出现在 Cordova 1.5 和 1.7 上。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-27T16:46:56.907

要修复它，您可以执行以下操作之一：

1.  将 Cordova 版本更改为 1.9

2.  用 getContext 替换 getActivity 方法。

但要小心，不要在 Cordova 1.9 中使用 getContext 方法 - 你会遇到运行时异常。

我希望它会有所帮助。

# python - Python 检测警报

> ID：11681014
> 
> 赞同：0
> 
> 时间：2012-07-27T03:21:58.183
> 
> 标签：python, urllib2

我正在尝试让我的 python 脚本检测页面上的警报框

```
import urllib2
url = raw_input("Please enter your url: ")
if urllib2.urlopen(url).read().find("<script>alert('alert');</script>") == 0:
    print "Alert Detected!" 
```

我怎样才能让它检测到警报？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T03:37:39.703

`urllib2.urlopen(url).read().find("<script>alert('alert');</script>") == 0`至 `urllib2.urlopen(url).read().find("<script>alert('alert');</script>") >= 0`

# cakephp - CakePHP 2.0 模型::read()

> ID：11681015
> 
> 赞同：0
> 
> 时间：2012-07-27T03:22:01.637
> 
> 标签：cakephp

我有一个包含 2 个字段的表 TableName：groups 字段：group_id，group_desc

我有一个非常简单的模型...

```
class Group extends AppModel {
  public $name = 'Group';
} 
```

我的控制器...

```
class GroupsController extends AppController {
  public $helper = array('Html', 'Form');

  public function index() {
    $this->set('records', $this->Group->find('all'));
  }

  public function view($id = null) {
    $this->Group->group_id = $id;  
    $this->set('record', $this->Group->read());
  }
} 
```

我的观点（view.ctp）...

```
<h1>Group</h1>

<h2>Group Description: <?php echo h($record['Group']['group_desc']); ?></h2>
<h2>ID: <?php echo $record['Group']['group_id']; ?></h2> 
```

我可以调用 /cakephp/index.php/groups 它列出了数据库中的所有组，当我单击其中任何一个时，url 变成 /cakephp/index.php/groups/view/1 （1 是 group_id）我看不到视图上的任何数据（完全没有错误）。

我不认为我错过了拼写任何数据库字段的名称（如果我这样做了，我会得到错误）。

请帮助修复我的编码或给我一些如何调试它的提示。

谢谢。孔塔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T03:42:12.547

```
try this:-

Group Model:--

<?php
App::uses('AppModel', 'Model');
/**
 * Group Model
 *
 * @property Group $ParentGroup
 * @property Group $ChildGroup
 * @property User $User
 */
class Group extends AppModel {

    public $actsAs = array('Acl' => array('type' => 'requester'));

    public function parentNode() {
        return null;
    }

/**
 * Display field
 *
 * @var string
 */
    public $displayField = 'name';

/**
 * Validation rules
 *
 * @var array
 */
    public $validate = array(
        'name' => array(
            'notempty' => array(
                'rule' => array('notempty'),
                //'message' => 'Your custom message here',
                //'allowEmpty' => false,
                //'required' => false,
                //'last' => false, // Stop validation after this rule
                //'on' => 'create', // Limit validation to 'create' or 'update' operations
            ),
        ),
    );

    //The Associations below have been created with all possible keys, those that are not needed can be removed

/**
 * belongsTo associations
 *
 * @var array
 */
    public $belongsTo = array(
        'ParentGroup' => array(
            'className' => 'Group',
            'foreignKey' => 'parent_id',
            'conditions' => '',
            'fields' => '',
            'order' => ''
        )
    );

/**
 * hasMany associations
 *
 * @var array
 */
    public $hasMany = array(
        'ChildGroup' => array(
            'className' => 'Group',
            'foreignKey' => 'parent_id',
            'dependent' => false,
            'conditions' => '',
            'fields' => '',
            'order' => '',
            'limit' => '',
            'offset' => '',
            'exclusive' => '',
            'finderQuery' => '',
            'counterQuery' => ''
        ),
        'User' => array(
            'className' => 'User',
            'foreignKey' => 'group_id',
            'dependent' => false,
            'conditions' => '',
            'fields' => '',
            'order' => '',
            'limit' => '',
            'offset' => '',
            'exclusive' => '',
            'finderQuery' => '',
            'counterQuery' => ''
        )
    );

}

Group Controller:--

<?php
App::uses('AppController', 'Controller');
/**
 * Groups Controller
 *
 * @property Group $Group
 */
class GroupsController extends AppController {
    public function beforeFilter() {
        parent::beforeFilter();

    }

/**
 * admin_index method
 *
 * @return void
 */
    public function admin_index() {
        $this->Group->recursive = 0;
        $this->set('groups', $this->paginate());
    }

/**
 * admin_view method
 *
 * @throws NotFoundException
 * @param string $id
 * @return void
 */
    public function admin_view($id = null) {
        $this->Group->id = $id;
        if (!$this->Group->exists()) {
            throw new NotFoundException(__('Invalid group'));
        }
        $this->set('group', $this->Group->read(null, $id));
    }

/**
 * admin_add method
 *
 * @return void
 */
    public function admin_add() {
        if ($this->request->is('post')) {
            $this->Group->create();
            if ($this->Group->save($this->request->data)) {
                $this->Session->setFlash(__('The group has been saved'));
                $this->redirect(array('action' => 'index'));
            } else {
                $this->Session->setFlash(__('The group could not be saved. Please, try again.'));
            }
        }
        $parentGroups = $this->Group->ParentGroup->find('list');
        $this->set(compact('parentGroups'));
    }

/**
 * admin_edit method
 *
 * @throws NotFoundException
 * @param string $id
 * @return void
 */
    public function admin_edit($id = null) {
        $this->Group->id = $id;
        if (!$this->Group->exists()) {
            throw new NotFoundException(__('Invalid group'));
        }
        if ($this->request->is('post') || $this->request->is('put')) {
            if ($this->Group->save($this->request->data)) {
                $this->Session->setFlash(__('The group has been saved'));
                $this->redirect(array('action' => 'index'));
            } else {
                $this->Session->setFlash(__('The group could not be saved. Please, try again.'));
            }
        } else {
            $this->request->data = $this->Group->read(null, $id);
        }
        $parentGroups = $this->Group->ParentGroup->find('list');
        $this->set(compact('parentGroups'));
    }

/**
 * admin_delete method
 *
 * @throws MethodNotAllowedException
 * @throws NotFoundException
 * @param string $id
 * @return void
 */
    public function admin_delete($id = null) {
        if (!$this->request->is('post')) {
            throw new MethodNotAllowedException();
        }
        $this->Group->id = $id;
        if (!$this->Group->exists()) {
            throw new NotFoundException(__('Invalid group'));
        }
        if ($this->Group->delete()) {
            $this->Session->setFlash(__('Group deleted'));
            $this->redirect(array('action' => 'index'));
        }
        $this->Session->setFlash(__('Group was not deleted'));
        $this->redirect(array('action' => 'index'));
    }
}

Group view:--

admin_index.ctp file

<table cellpadding="0" cellspacing="0">
    <tr>
            <th><?php echo $this->Paginator->sort('id'); ?></th>
            <th><?php echo $this->Paginator->sort('parent_id'); ?></th>
            <th><?php echo $this->Paginator->sort('name'); ?></th>
            <th><?php echo $this->Paginator->sort('created'); ?></th>
            <th><?php echo $this->Paginator->sort('modified'); ?></th>
            <th class="actions"><?php echo __('Actions'); ?></th>
    </tr>
    <?php
    foreach ($groups as $group): ?>
    <tr>
        <td><?php echo h($group['Group']['id']); ?>&nbsp;</td>
        <td>
            <?php echo $this->Html->link($group['ParentGroup']['name'], array('controller' => 'groups', 'action' => 'view', $group['ParentGroup']['id'])); ?>
        </td>
        <td><?php echo h($group['Group']['name']); ?>&nbsp;</td>
        <td><?php echo h($group['Group']['created']); ?>&nbsp;</td>
        <td><?php echo h($group['Group']['modified']); ?>&nbsp;</td>
        <td class="actions">
            <?php echo $this->Html->link(__('View'), array('action' => 'view', $group['Group']['id'])); ?>
            <?php echo $this->Html->link(__('Edit'), array('action' => 'edit', $group['Group']['id'])); ?>
            <?php echo $this->Form->postLink(__('Delete'), array('action' => 'delete', $group['Group']['id']), null, __('Are you sure you want to delete # %s?', $group['Group']['id'])); ?>
        </td>
    </tr>
<?php endforeach; ?>
    </table> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T05:11:14.443

试试这个：控制器代码：

```
 public function view($id = null) {
    $this->set('record', $this->Group->read(null, $id));
} 
```

型号代码：

```
class Group extends AppModel {
    public $name = 'Group';
    public $primaryKey = 'group_id'; 
```

}

# sql - 如何在 Sql Server 和过滤记录中进行集合分组

> ID：11681021
> 
> 赞同：3
> 
> 时间：2012-07-27T03:22:48.197
> 
> 标签：sql, sql-server-2008, tsql

我有一张看起来像下面的桌子

```
SALES_ORDER_ID 日期差异标志
1 -40 1
1 -20 1
2 40 0
2 -10 1
3 12 0
4 -70 1
5 60 0
5 23 0

```

**//ddl**

```
Declare @t table (sales_order_id int,DateDifference int, Flag int)
Insert Into @t 
                Select 1,-40,1 Union All Select 1,-20,1 Union All
                Select 2,40,0 Union All Select 2,-10,1 Union All
                Select 3,12,0 Union All Select 4,-70,1 Union All
                Select 5,60,0 Union All Select 5,23,0
Select *
From @t 
```

输出应该是

```
sales_order_id  DateDifference  Flag
3                      12          0
5                      60          0
5                      23          0 
```

即*所有项目*的标志都为 0 的组 (Sales_Order_Id)。

我的意思是 Sales_Order_Id = 2 不会出现，因为至少有一项不为零 (2,-10,1)

如果信息不充分，请务必问我。

这个查询怎么做？

编辑

我找到了答案.. 虽然仍在寻找更优雅的答案

```
 ;with cte as(
    Select 
        sales_order_id = Case when x.sales_order_id is null then y.sales_order_id else x.sales_order_id end 
        ,x.CountFor0
        ,y.CountFor1
    From 
            (Select sales_order_id,CountFor0 = count(*)
            from @t 
            where Flag = 0
            group by sales_order_id )x
    Full Join 

            (Select sales_order_id,CountFor1 =count(*)
            from @t 
            where Flag = 1
            group by sales_order_id )y
    On x.sales_order_id = y.sales_order_id)

    Select *
    From cte
    where CountFor1 is null 
```

谢谢大家

由于我没有太多声誉，因此无法在答案部分发布我的答案

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T07:24:22.483

尝试这个..

```
SELECT sales_order_id,DateDifference,Flag FROM @t WHERE sales_order_id NOT IN 
 (SELECT sales_order_id FROM @t WHERE Flag=1) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T15:47:18.867

我只是想补充一点，这是使用 Windows 功能的好地方：

```
select sales_order_id, DateDifference, flag
from (select t.*, SUM(flag) over (partition by sales_order_id) as sumflag
      from @t t
     ) t
where sumflag = 0 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-27T03:29:34.343

再会！

我认为这会有所帮助：

```
Select * from @t WHERE FLAG=0; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-27T03:33:34.370

好的，现在我明白你想要做什么了。`NOT EXISTS`正如其他人建议的那样（[sqlfiddle](http://sqlfiddle.com/#!3/8804d/4) ），您可以使用：

```
SELECT *
FROM @t T1
WHERE Flag = 0
AND NOT EXISTS (
    SELECT * 
    FROM @t T2 
    WHERE T1.sales_order_id = T2.sales_order_id
    AND T2.Flag <> 0) 
```

您也可以使用`NOT IN`，正如其他人也建议的那样（[sqlfiddle](http://sqlfiddle.com/#!3/8804d/5)）：

```
SELECT *
FROM @t T1
WHERE Flag = 0
AND sales_order_id NOT IN (
    SELECT sales_order_id 
    FROM @t T2 
    WHERE T2.Flag <> 0) 
```

您甚至可以使用 a`JOIN`并检查连接的表是否没有行（id 为 NULL）（[sqlfiddle](http://sqlfiddle.com/#!3/8804d/6)）：

```
SELECT *
FROM @t T1
LEFT OUTER JOIN @t T2 ON T1.sales_order_id = T2.sales_order_id AND T2.Flag <> 0
WHERE T1.Flag = 0
AND T2.sales_order_id IS NULL 
```

* * *

原答案：

您需要一个[`WHERE`子句](http://www.w3schools.com/sql/sql_where.asp)来过滤结果：

```
SELECT * 
FROM @t
WHERE Flag = 0 
```

[在这里](http://sqlfiddle.com/#!3/8804d/2)查看 sqlfiddle

不过，我假设您也想要`(2,40,0)`结果中的行。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-27T05:22:37.023

```
select *
from @T as T1
where not exists(select *
                 from @T as T2
                 where T1.sales_order_id = T2.sales_order_id and
                       T2.Flag = 1) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-27T06:50:28.730

尝试这个：

```
Select * From @t 
where Flag=0 and sales_order_id not in 
(select sales_order_id from @t  where Flag !=0) 
```

# sockets - websockets和社会关系

> ID：11681024
> 
> 赞同：1
> 
> 时间：2012-07-27T03:23:16.623
> 
> 标签：sockets, node.js, express, socket.io

我正在尝试使用 node.js、express 和 socket.io 构建一个小型应用程序，其中涉及处理基本的社会关系。有多个用户，您可以请求与他们成为朋友，接受这些请求，拒绝他们，以及与用户解除好友关系——基本上，很像 Facebook。如果用户 A 已登录，并且用户 B 请求与他建立友谊，我希望用户 A 立即被告知好友请求。这就是 websockets（和混乱）进来的地方。

1.  每个用户会有三个不同的套接字连接，对应于三个数据集合吗？(1) 好友，(2) 收到的请求，(3) 发送的请求

2.  在用户接受接收到的请求时，需要通知其他用户他发送的请求已被接受。这是否需要在其他用户的套接字上触发事件？如果由于用户不在线而导致该套接字不存在怎么办？

抱歉，如果有混淆，但我很难理解如何概念化套接字之间的关系。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T08:01:08.720

如果您阅读“发布/订阅模式”（“pubsub”），所有这些（包括前面的答案）对您来说会变得更加清晰。这种模式的基本方面是：

1）你有“人”（“谈话者”），他们每个人都有“有话要说”，可能会引起其他人的兴趣。

2）你有“人”（“听众”）每个人都“想听”其他一些“人”（尽管很少有人听；他们中的大多数人都很挑剔他们听谁，如果只是为了不被不堪重负）。

发布/订阅模式描述了如何将谈话者与听众“联系起来”，这样谈话者就不必担心跟踪他们的听众是谁，听众也不必担心跟踪哪些谈话者他们决定倾听（即他们不必“听到”每个人的谈话并试图将骚动过滤到他们感兴趣的地方）。

正如 MagicDev 所指出的，这通常涉及一个对象，其数据部分跟踪谁在听哪个说话者，其方法允许说话者说“我正在谈论这个主题”（“发布”）和听者说“我希望在（谈话者列表或“任何人”）谈论某个主题（可能是“任何主题”）时得到通知。

“朋友关系”通常意味着“人”A 成为“说话者”，而“人”B 成为“倾听者”，反之亦然。然而，pubsub 模式中没有任何东西要求这种对称性。一个好的实现将让您使用相同的方法来建立“广播”和“对话”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T04:18:28.433

您可以将每个套接字设置为一个**对象**，该套接字对应于特定的用户数据。如果您不熟悉对象和其他结构化数据，这是非常重要的，没有它您不会走得太远。

您将有一个名为 users 的对象，它将在一个数组中包含每个用户**id**，然后按 id 保存每个用户的信息，包括朋友、请求等的数组。

**因为数据被保存在服务器端，即使用户在客户端关闭了套接字，数据也已经被传递给一个变量并保存在服务器端。**

* * *

如果您不熟悉，完全在节点中执行此操作将需要相当多的努力，我将首先使用 mysql 数据库构建应用程序，然后在应用程序中保存数据。

# c# - 如何使用 SMTP 发送安全电子邮件

> ID：11681026
> 
> 赞同：3
> 
> 时间：2012-07-27T03:23:30.323
> 
> 标签：c#, asp.net, encryption, smtp, security

我目前正在使用 Google Apps 发送 SMTP 电子邮件。如果我的项目部署了一些我将要发送的信息将是机密的，我想确保传输是安全的。谁能让我知道我需要做些什么来确保我通过谷歌应用程序 smtp 服务器使用 smtp 发送安全的电子邮件？smtp.google.com。

非常感谢任何帮助。

据我所知，我需要强制使用 Https 并拥有 SSL 证书才能做到这一点。我不知道这是不是真的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T03:32:18.100

您可以使用 'smtp.EnableSsl = true' 启用 SSL 以确保安全。

```
MailMessage mail = new MailMessage();
            mail.To.Add("" + to + "");
            mail.From = new MailAddress("" + from + "");
            mail.Subject = "Email using Gmail";
            string Body = "Hi, this mail is to test sending mail" +
                          "";
            mail.Body = Body;
            mail.IsBodyHtml = true;
            Attachment at = new Attachment(Server.MapPath("~/ExcelFile/TestCSV.csv"));
            mail.Attachments.Add(at);
            mail.Priority = MailPriority.High;
            SmtpClient smtp = new SmtpClient();
            smtp.Host = "smtp.gmail.com"; //Or Your SMTP Server Address
            smtp.Credentials = new System.Net.NetworkCredential(""+ username +"", ""+ password +"");
            smtp.EnableSsl = true;
            smtp.Port = 587;
            smtp.Send(mail); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T04:34:11.493

要强制实施网络安全，您必须使用 SSL。为了加强从您的网络服务器到邮件服务器的数据的安全性，您需要通过 SSL 发送邮件。为了保护触发邮件操作的 HTTP 请求，您需要通过 HTTP 实施 SSL。

但问题是在什么情况下安全？如果您需要网络安全以确保第 3 方无法窃听或操纵，那么 SSL 是您的最佳选择。

# ruby-on-rails - Rails 3：会计季度

> ID：11681028
> 
> 赞同：0
> 
> 时间：2012-07-27T03:23:47.657
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord

我有一个正在处理的会计程序，它包含一个嵌套在员工对象中的工资单表。

我想实现一个系统，该系统可以识别我的工资单的@stub.date 月份，并将所有@stub.net_pay 的总和计算到给定年份该月所在的任何季度（第一、第二、第三或第四）。

我希望以这种方式完成这个！有人可以指出我正确的方向吗？我难住了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T04:19:12.857

这假设有几个不同的东西（比如employee_id 存在），但应该能得到你需要的东西。我没有在数据库中进行求和，因为您可能想要检查所有存根以进行验证。

```
require "active_support"

class Stub < ActiveRecord::Base

  def self.net_pay_for_quarter
    stubs = where(:employee_id => employee_id).
            where("date >= ?", Quarter.begin_of_quarter(date)).
            where("date < ?", Quarter.end_of_quarter(date))
    stubs.map(&:net_pay).sum
  end

end

class Quarter
  def self.begin_of_quarter(date)
    "2012-#{date.month}-01".to_date.beginning_of_month
  end

  def self.end_of_quarter(date)
    "2012-#{date.month}-01".to_date.end_of_month
  end

  def self.quarter_integer(date)
    (date.month / 4) + 1
  end
end 
```

# actionscript-3 - 带有矩形的 AS3 精灵为空，宽度和其他属性返回 0

> ID：11681029
> 
> 赞同：0
> 
> 时间：2012-07-27T03:23:53.377
> 
> 标签：actionscript-3, flash

我有一个精灵数组：

```
for (i = 0; i < 3; i++) {
    var newLine:Sprite = new Sprite();
    newLine.graphics.beginFill(0xFFFFFF); 
    newLine.graphics.drawRect((uiSizeX * (.25 + .25 * i)) + (doorSizeX - lineLengths[0][i]) / 2, uiSizeY * .5, lineLengths[0][i], lineHeight); 
    newLine.name = "lines" + i;
    lines.push(newLine);
} 
```

我稍后将每个添加到背景 Sprite 中：

```
for (i = 0; i < 3; i++) {
    uiContainer.addChild(doors[i]);
    uiContainer.addChild(lines[i]);
} 
```

后来希望更改每个包含的矩形的宽度。当我使用数组引用设置宽度属性时：

```
lines[i].width = lineLengths[trialNumber][i]; 
```

矩形移向舞台和 uiContainer 的中心。尝试设置 x 值会导致更奇怪的行为。我从其他问题的答案中收集到这是因为精灵是空的，这令人困惑，因为它似乎应该有一个矩形。如何访问或更改矩形的属性或使其精灵不为空？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T03:32:43.767

切勿尝试直接更改精灵的宽度或高度，除非您真的必须这样做，因为这会导致各种意外行为。

如果要调整精灵的大小，请重绘矩形：

```
var sprite = lines[i];

sprite.graphics.beginFill(0xFFFFFF); 
sprite.graphics.drawRect(newWidth, newHeight); 
```

也不要忘记致电`endFill`：

```
sprite.graphics.endFill(); 
```

您可能应该将所有这些逻辑包装到一个单独的类中，以便您可以更轻松地重绘精灵。更好的是，创建一个扩展类`Sprite`并包含所有重绘/调整大小的逻辑。

# linux - 用户空间程序如何与 Linux 上的 USB 802.11 Wi-Fi 驱动程序交互？

> ID：11681031
> 
> 赞同：2
> 
> 时间：2012-07-27T03:24:15.233
> 
> 标签：linux, usb, wifi, driver

请允许我通过说明我是驱动程序开发的新手来限定这个问题。我正在尝试了解使用 RealTek 8187L 芯片的 USB Wi-Fi 卡的驱动程序源代码。基于对我[之前](https://stackoverflow.com/questions/11661679/where-in-the-linux-source-does-recognition-of-specific-usb-devices-happen)的问题的一个很好的回答，我确定我需要检查的相关驱动程序源代码位于`drivers/net/wireless/rtl818x/rtl8187/dev.c`（在 Linux 内核源代码中）。

做一些阅读，似乎 USB 驱动程序实例化了一个`usb_driver`它向内核注册的结构，它描述（除其他外）驱动程序支持的设备（`.id_table`），连接支持的设备时执行的功能（`.probe`）和*可选*，一组文件操作（`.fops`），用于与用户空间交互。`usb_driver`与 8187L 驱动程序关联的结构*不*包括`.fops`：

```
static struct usb_driver rtl8187_driver = {
    .name       = KBUILD_MODNAME,
    .id_table   = rtl8187_table,
    .probe      = rtl8187_probe,
    .disconnect = __devexit_p(rtl8187_disconnect),
    .disable_hub_initiated_lpm = 1,
};

module_usb_driver(rtl8187_driver); 
```

因此，我很好奇用户空间程序如何与该驱动程序交互以发送和接收数据。

在一篇[旧的 Linux Journal 帖子](http://www.linuxjournal.com/article/4786)（2001 年）中，有以下摘录：

> fops 和次要变量是可选的。大多数 USB 驱动程序连接到另一个内核
> 子系统，例如 SCSI、网络或 TTY 子系统。这些类型的驱动程序将自己注册到其他内核子系统，并且通过该接口提供任何用户空间交互。但是对于没有匹配内核子系统的驱动程序，例如 MP3 播放器或扫描仪，需要一种与用户空间交互的方法。USB 子系统提供了一种注册次要设备号和一组启用此用户空间交互的 file_operations **[fops]函数指针的方法。**

因此，听起来 8187L 驱动程序可能是“挂钩到另一个内核子系统”的驱动程序。所以我想我的问题是，对于这样一个*不*提供`.fops`函数指针的驱动程序，*如何与其他内核子系统进行交互*？最终，我希望能够在驱动程序代码中找到程序实际与之交互以发送和接收数据的点，以便我可以继续分析代码的工作原理。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T03:47:51.083

单个无线芯片组的驱动程序处于非常低的级别。它和用户空间之间有很多层。rtl8187 之上的下一层是 mac80211。在`drivers/net/wireless/rtl818x/rtl8187/dev.c`观察对`ieee80211_register_hw`. 该注册调用提供了 mac80211 层和 rtl8187 设备之间的链接。

接下来看看 的实现`ieee80211_register_hw`，发现在`net/mac80211/main.c`. 那个调用`ieee80211_if_add`，发现在`net/mac80211/iface.c`，哪个调用`register_netdevice`。这会将设备置于内核的主要网络接口列表中，使其可用于诸如`ifconfig`和`route`.

大多数用户空间程序不直接与网络接口交互，它们只是将数据包发送到 IP 地址，内核使用路由表选择传出接口。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T03:44:34.717

[RTL8187 驱动程序通过调用`ieee80211_alloc_hw()`](http://lxr.linux.no/linux+%2a/drivers/net/wireless/rtl818x/rtl8187/dev.c#L1426) [和`ieee80211_register_hw()`](http://lxr.linux.no/linux+%2a/drivers/net/wireless/rtl818x/rtl8187/dev.c#L1610)在其探测函数中向 IEEE 802.11 无线网络子系统注册自身。

# iphone - Cocos2D拖动精灵让游戏暂停

> ID：11681040
> 
> 赞同：0
> 
> 时间：2012-07-27T03:25:48.843
> 
> 标签：iphone, cocos2d-iphone, ccsprite

我正在使用 Cocos2D 将 ccsprites 放置在屏幕上。然后我编写了代码来允许用户在屏幕上拖动精灵。这在模拟器中运行良好，但在我真正的 iPhone 3GS 上，当我拖动精灵时，游戏似乎暂停，直到我停止拖动精灵并且精灵跳到我松开手指的位置。左下角不断变化的每秒帧数甚至冻结。有人知道发生了什么吗？我使用 - (void)ccTouchesMoved:(NSSet *)touches withEvent:(UIEvent *)event 方法检测到触摸。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T04:19:27.287

我有很多 NSLog 语句，它们在我的 Mac 上运行得非常快，但是却让我的 iphone 慢了下来！评论他们解决了这个问题。希望这可以帮助有同样问题的人。

# python - 如何在 kivy 中设置网格布局的位置（x，y 坐标）？

> ID：11681044
> 
> 赞同：1
> 
> 时间：2012-07-27T03:26:21.770
> 
> 标签：python, layout, button, grid, kivy

我注意到，当您在 Kivy 中使用网格布局制作按钮时，它们会在 (0,0) 处创建，并根据先前按钮的长度和宽度移动多个空格。但是，我想在屏幕底部的中间有一个 3x4 网格。

到目前为止我有这个：

```
import kivy
from kivy.uix.gridlayout import GridLayout
from kivy.app import App
from kivy.uix.button import Button

class CalcApp(App):
    def build(self):
        layout = GridLayout(cols=3, row_force_default=True, row_default_height=50)
        layout.add_widget(Button(text='1', size_hint_x=None, width=100))
        layout.add_widget(Button(text='2', size_hint_x=None, width=100))
        layout.add_widget(Button(text='3', size_hint_x=None, width=100))
        layout.add_widget(Button(text='4', size_hint_x=None, width=100))
        layout.add_widget(Button(text='5', size_hint_x=None, width=100))
        layout.add_widget(Button(text='2', size_hint_x=None, width=100))
        layout.add_widget(Button(text='6', size_hint_x=None, width=100))
        layout.add_widget(Button(text='7', size_hint_x=None, width=100))
        layout.add_widget(Button(text='8', size_hint_x=None, width=100))
        layout.add_widget(Button(text='9', size_hint_x=None, width=100))
        layout.add_widget(Button(text='0', size_hint_x=None, width=100))
        layout.add_widget(Button(text='Enter', size_hint_x=None, width=100))
        return layout

CalcApp().run() 
```

那么，如何转移位置呢？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-05T10:22:57.853

```
import kivy
from kivy.uix.gridlayout import GridLayout
from kivy.app import App
from kivy.uix.button import Button

class CalcApp(App):
    def build(self):
        layout = GridLayout(cols=3, row_force_default=True, row_default_height=50,
            pos_hint={'center_x':.5} , size_hint=(None, None))
            # ^ position grid in mid horizontally, ^ make grid use custom
            # size.
        # Bind the size of the gridlayout of to it's minimum_size(calculated
        # by children size)
        layout.bind(minimum_size = layout.setter('size'))
        # bind the top of the grid to it's height'
        layout.bind(height = layout.setter('top'))
        for x in (1, 2, 3, 4, 5, 2, 6, 7, 8, 9, 0):
            layout.add_widget(Button(text=str(x), size_hint_x=None, width=100))
        layout.add_widget(Button(text='Enter', size_hint_x=None, width=100))
        return layout

CalcApp().run() 
```

相同的代码使用 kv lang::

```
import kivy

from kivy.uix.gridlayout import GridLayout
from kivy.app import App
from kivy.lang import Builder

Builder.load_string('''
# a template Butt of type Button
[Butt@Button]
    # ctx.'attribute_name' is used to access the 
    # attributes defined in the instance of Butt.
    text: ctx.text
    # below vars are constant for every instance of Butt
    size_hint_x: None
    width: 100

<CalcApp>:
    cols: 3
    row_force_default: True
    row_default_height: 50
    pos_hint: {'center_x':.5}
    size_hint: (None, None)
    # size is updated whenever minimum_size is.
    size: self.minimum_size
    # top is updated whenever height is.
    top: self.height
    Butt:
        text: '1'
    Butt:
        text: '2'
    Butt:
        text: '3'
    Butt:
        text: '4'
    Butt:
        text: '5'
    Butt:
        text: '2'
    Butt:
        text: '6'
    Butt:
        text: '7'
    Butt:
        text: '8'
    Butt:
        text: '9'
    Butt:
        text: '0'
    Butt:
        text: 'Enter'
''')

class CalcApp(App, GridLayout):

    def build(self):
        return self

CalcApp().run() 
```

# r - 根据数据框中的字符串在矩阵中查找值

> ID：11681048
> 
> 赞同：0
> 
> 时间：2012-07-27T03:26:58.477
> 
> 标签：r

我有一个像

```
 X     Y    VALUE    
"AAA" "BBB"
"CCC" "AAA" 
```

我也有一个矩阵：

```
 AAA BBB CCC
 AAA  1   13  2
 BBB  27  11  4
 CCC  6   12  3 
```

以 AAA、BBB 和 CCC 作为列名和行名。如何用矩阵中的值填充数据框中的 VALUE 列？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T03:42:54.343

你可以做

```
df$VALUE <- mat[cbind(df$X, df$Y)] 
```

使用您的示例：

```
df <- data.frame(X = c("AAA", "CCC"),
                 Y = c("BBB", "AAA"), stringsAsFactors = FALSE)
df
#     X   Y
# 1 AAA BBB
# 2 CCC AAA

mat <- matrix(c(1, 27, 6, 13, 11, 12, 2, 4, 3),
              nrow = 3, ncol = 3,
              dim = list(c("AAA", "BBB", "CCC"),
                         c("AAA", "BBB", "CCC")))
mat
#     AAA BBB CCC
# AAA   1  13   2
# BBB  27  11   4
# CCC   6  12   3

df$VALUE <- mat[cbind(df$X, df$Y)]
df
#     X   Y VALUE
# 1 AAA BBB    13
# 2 CCC AAA     6 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T06:35:37.780

你也可以直接从矩阵中获取数据框：

```
library(reshape2)
melt(mat) 
```

# .net - .net 为什么不能从 int[] 转换为 object[]

> ID：11681051
> 
> 赞同：3
> 
> 时间：2012-07-27T03:27:40.730
> 
> 标签：.net, object, boxing

我有以下方法

```
private void AM(object[] x)
{
} 
```

当我们这样称呼它时：

```
int[] x = new int[1];
AM(x); 
```

我们得到一个编译错误，例如“无效参数”、“无法从 int[] 转换为 object[]”。

但是，如果我们有一个参数（对象 y），我们可以将输入 int 作为输入参数。

我的问题是：为什么微软以不同的方式设计它们？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-27T03:34:48.787

当您将`int`（值类型）传递给带有`object`（引用类型）参数的方法时，会在堆上创建一个新对象，并将其值`int`复制到其中。然后将对象的引用（被装箱的`int`）传递给方法参数。

`int[]`并且`object[]`都是数组，但它们的元素类型非常不同。作为数组，它们都是引用类型，因此采用`object[]`参数的方法期望引用对象数组。对整数数组的引用是非常不同的。

因为`int`它是一种值类型，所以没有简单的方法可以将引用`int[]`转换为引用`object[]`而不迭代整个`int[]`元素并对每个元素进行装箱。就时间和内存而言，这可能是一项昂贵的操作，编译器不会自动为您完成。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-27T03:36:11.240

只有引用类型的数组可以分配给其他引用类型（如对象）的数组。由于 int 是一种值类型，因此您不能这样做。

这称为[数组协方差](http://msdn.microsoft.com/en-us/library/aa664572%28v=VS.71%29.aspx)

> 数组协方差特别不扩展到值类型的数组。例如，不存在允许将 int[] 视为 object[] 的转换。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-27T03:33:54.040

与 int 数组相比，对象数组是一种完全不同的动物（正如您所得到的转换错误所见）。但是，object[] 和 int[] 都是对象，因此您可以将它们都转换为它们的*原始*类型（如原始类型），即对象。

# android-networking - 通过网络将二进制数据发送到 my sql 数据库

> ID：11681054
> 
> 赞同：0
> 
> 时间：2012-07-27T03:28:03.400
> 
> 标签：android-networking, android-internet

我正在开发将录制声音的应用程序。我希望将这些录音存储在外部 mysql 数据库中。我知道 JSON 可以很好地与我可以用来连接到数据库的 android 和 PHP 配合使用，但它只适用于文本数据。我怎样才能完成这项任务？您建议使用什么来发送数据？我将感谢带有示例的好教程的链接。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T16:04:58.033

互联网上有一些不同的示例解释了如何在 Android 上使用 HTTP 请求和网络与 Web 服务器进行通信。也许您可以先查看其中一些[http://www.vogella.com/articles/AndroidNetworking/article.html](http://www.vogella.com/articles/AndroidNetworking/article.html) http://www.ibm.com/developerworks/opensource/library/os-android-networking/

另外，看看这里的一些文章，讨论如何编写一个好的网络应用程序[http://developer.att.com/developer/forward.jsp?passedItemId=7200042](http://developer.att.com/developer/forward.jsp?passedItemId=7200042)

# ruby-on-rails - 产品验证

> ID：11681058
> 
> 赞同：0
> 
> 时间：2012-07-27T03:29:20.387
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.1

大家好，我是 ruby​​ on rails 的新手......我已经添加了产品页面，如果在 1 个类别下有重复的产品名称，我想要“产品名称：测试”，“类别：其他”它验证“产品名称已经存在，请选择另一个”。但是如果您更改类别，例如“产品名称：测试”，“类别：Shop and Drop”，它将保存新产品。

这是我表单中的代码：添加新产品

```
<% content_for :post_content do %>
    <div class="post">
        <% form_for :product, @product do | fld | %>
        <span class="notice"><% if @product.errors.any? %><p class="error"><%= @product.errors.first[1] %></p><% end %></span>
        <table class="tbl-form" cellpadding="0" cellspacing="0">
            <tbody>
                <tr>
                    <td class="name" width="100">Code:</td>
                    <td colspan="99"><%= fld.text_field :product_code, :class => "large" %></td>
                </tr>
                <tr height="5"/>
                <tr>
                    <td class="name" width="100">Name:</td>
                    <td colspan="99"><%= fld.text_field :name, :class => "large" %></td>
                </tr>
                <tr height="5"/>
                <tr>
                    <td class="name" width="100">Start Week:</td>
                    <td colspan="99"><%= fld.select :start_week, options_for_select(StockMovement.order("year DESC, week DESC").map { | val | [ "#{ val.year }/#{ val.week }", val.id] }, :selected => @product.start_week), :class => "ddl_SW" %></td>
                </tr>
                <tr height="5"/>
                <tr>
                    <td class="name" width="100">Category:</td>
                    <td colspan="99"><%= fld.select :product_category, options_for_select(ProductCategory.where("jos_product_category.published = 1").all.map { | val | [ val.name, val.id] }, :selected => @product.product_category)%></td>
                </tr>
                <tr height="5"/>
                <tr>
                    <td class="name">Thumbnail:</td>
                    <td colspan="99"><%= fld.text_field :thumbnail, :class => "large" %></td>
                </tr>
                <tr height="5"/>
                <tr>
                    <td class="name">Original Image:</td>
                    <td colspan="99"><%= fld.text_field :original_image, :class => "large" %></td>
                </tr>
                <tr height="5"/>
                <tr><td class="name">Publish:</td><td><span id="yesno"><%= fld.check_box :published, :class => "hide-chk" %><a id="true" alt="1" rel="product_published" class="yes">Yes</a><a id="false" alt="0" rel="product_published" class="no on">No</a></span></td></tr>
                <tr height="25"/>
                <tr class="btn-holder">
                    <td colspan="99">
                        <input type="image" src="/images/btn-save.png" class="img-btn"><a href="<%= admin_products_path %>" class="lnk-btn back">Back</a>
                    </td>
                </tr>
                <tr height="5"/>
            </tbody>
        </table>
        <% end %>
    </div>
<% end %> 
```

这是我的模型：

```
 validates_uniqueness_of :product_code, :message => 'Product code is already taken'
  validates_presence_of :product_code, :message => "Product code is required"
  validates_presence_of :name, :message => "Product name is required"
  validates_uniqueness_of :name, :message => 'Product name is already taken' 
```

这是在我的控制器中：

```
def new
    @product = Product.new

    if request.post? and params[:product]
      @product = Product.new(params[:product])
      @product.creator = logged_user['clientID']

      if @product.save
        #render :json => params[:product]
        redirect_to admin_product_show_url(:productID => @product.id), :notice => '<p class="success">You have successfully added a new product '"#{ @product.name }"'</p>'
      end
    end
  end 
```

注意：产品和类别是数据库中的不同表......

提前致谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T03:36:43.947

我假设您必须在产品表中为类别表提供类似 category_id 的参考键

所以改变这个

```
 validates_uniqueness_of :name, :message => 'Product code is already taken' 
```

到

```
 validates_uniqueness_of :name, :scope => category_id, :message => 'Product code is already taken' 
```

这将验证特定类别的产品名称的唯一性

# javascript - 捕获 VLC Webplugin 的 MediaPlayerPlaying 事件

> ID：11681060
> 
> 赞同：0
> 
> 时间：2012-07-27T03:29:40.130
> 
> 标签：javascript, events, vlc, libvlc

我在 Chrome 上使用 VLC Webplugin

```
<div id="div-vlc" style="display: none;">
    <embed id="vlc" name="vlc" width="640" height="480" pluginspage="http://www.videolan.org" type="application/x-vlc-plugin" />
    <object style="width:0px;height:0px;" classid="clsid:9BE31822-FDAD-461B-AD51-BE1D1C159921" codebase="http://download.videolan.org/pub/videolan/vlc/last/win32/axvlc.cab">    </object>
</div> 
```

并尝试捕捉事件以控制游戏：

```
document.vlc.addEventListener('MediaPlayerPlaying', function() {alert();} ) 
```

或者

```
document.vlc.attachEvent('MediaPlayerPlaying', function() {alert();} ) //crash 
```

就像这个文档说：[http ://wiki.videolan.org/Documentation:WebPlugin](http://wiki.videolan.org/Documentation:WebPlugin)

但是该事件永远不会被触发。

怎么了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-10T12:50:46.440

顺便说一句，[https](https://wiki.videolan.org/Documentation:WebPlugin/) ://wiki.videolan.org/Documentation:WebPlugin/ 中的信息在更高版本中已过时。

代码库 URL ' [http://download.videolan.org/pub/videolan/vlc/last/win32/axvlc.cab](http://download.videolan.org/pub/videolan/vlc/last/win32/axvlc.cab) ' 不再存在...

以下对我来说效果很好：

```
<object type='application/x-vlc-plugin' pluginspage='http://www.videolan.org' version='VideoLAN.VLCPlugin.2' id='vlc1' width='100px' height='150px' events='True' classid='clsid:9BE31822-FDAD-461B-AD51-BE1D1C159921'>
    <param name='MRL' value='' />
    <param name='toolbar' value='false' />
    <param name='autoplay' value='false' />
    <param name='loop' value='false' />
    <param name='allowfullscreen' value='true' />
ActiveX not loaded. Check IE settings</object> 
```

Javascript：

```
var plugin = document.getElementById('vlc1');
$(plugin).width(playerWidth);
$(plugin).height(playerHeight);
$(plugin).attr('style', '');
// Add items to plugin.playlist 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-10T12:23:42.837

只是想就动态加载时 ASP.NET 对 VLC 所做的一件奇怪的事情提出建议。

当在 aspx.cs 或 ascx.cs 中以像素为单位设置特定的宽度和高度时，ASP.NET 会在 ActiveX 中向浏览器返回错误的宽度和高度属性。样本：

aspx.cs 或 ascx.cs 文件：

```
myLiteral.Text = @"<object type='application/x-vlc-plugin'  
width='150px' height='100px'  
pluginspage='http://www.videolan.org' version='VideoLAN.VLCPlugin.2' events='True' classid='clsid:9BE31822-FDAD-461B-AD51-BE1D1C159921'>Check activex settings</object>"; 
```

客户端为 IE8 或更高版本时返回的 html：

```
<object type='application/x-vlc-plugin'  
width=0px height=0px style='HEIGHT:0px;WIDTH:0px;TOP:0px;LEFT:0px'  pluginspage='http://www.videolan.org' version='VideoLAN.VLCPlugin.2' events='True' classid='clsid:9BE31822-FDAD-461B-AD51-BE1D1C159921'>Check activex settings</object> 
```

在 IE8 和 IE9 中，它只发生在第一个 VLC ActiveX 中。在 IE10 中，它发生在所有 VLC ActiveX 中。

我的解决方法是在我的 VLC 加载 javascript 中使用一点 JQuery：

```
$(plugin).width(playerWidth);
$(plugin).height(playerHeight);
$(plugin).attr('style', ''); 
```

希望能帮助到你 ：-）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T14:13:16.827

一些注意事项：

*   首先，如果您将其设为“显示：无”，它将无法正常工作。
*   其次，嵌入中必须有一个 src/target。
*   最后但并非最不重要的一点是，对象的大小必须至少为 1x1px。

这将提醒回调：

```
var vlc=document.getElementById('vlc');
vlc.addEventListener("MediaPlayerPlaying", function(event) {alert(event);}, false);
vlc.playlist.play(); 
```

请注意，这适用于 Firefox 和 Chrome。由于 IE 使用 ActiveX，因此使用了另一种表示法。如需完整文档，请访问[https://wiki.videolan.org/Documentation:WebPlugin/](https://wiki.videolan.org/Documentation:WebPlugin/)

# python - 使用 API 调整从 Google Drive 检索到的图像的大小

> ID：11681064
> 
> 赞同：0
> 
> 时间：2012-07-27T03:30:29.497
> 
> 标签：python, google-app-engine, google-drive-api

我正在使用以下 Python 代码从 Google Drive 获取文件：

```
theGoogleDriveFile = service.files().get(fileId=<googleDriveFileId>).execute() 
```

如果它是图像，我将如何调整此文件的大小？我尝试了以下方法：

```
resizedImage = images.resize(theGoogleDriveFile['downloadUrl'], 32, 32) 
```

但我收到以下错误：

```
raise NotImageError()
NotImageError 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T04:06:33.330

这有效：

```
theGoogleDriveFile = service.files().get(fileId=<googleDriveFileId>).execute()
result = urlfetch.fetch(theGoogleDriveFile['webContentLink'])                
resizedImage = images.resize(result.content, 32, 32) 
```

# java - 从 MYSQL 获取的正则表达式未验证

> ID：11681065
> 
> 赞同：1
> 
> 时间：2012-07-27T03:30:37.330
> 
> 标签：java, mysql, regex

```
 for(String paramName:paramNames){
    String regexString = regexPair.get(paramName);
    try{             
        System.out.println(regexString);
        Pattern p = Pattern.compile(regexString);
        Matcher m = p.matcher(paramMap.get(paramName)[0]);
        status = m.matches();
    }catch(Exception e)
    {
        e.printStackTrace();
    }
    if(!status)
           break;
} 
```

哪里`regexSring`有价值

```
 "^(?!.*[^A-Za-z0-9@])((?=.*\\d)(?=.*[a-z]).{6,20})$" 
```

的值`regexString`是从 mysql db 中提取的，并在 map 中填充并`paramMap.get(paramName)[0]`具有值`"dssf55454"`，但它正在重新调整 false，而它应该返回 true。

如果我编写以下示例程序

```
 Pattern p = Pattern.compile("^(?!.*[^A-Za-z0-9@])((?=.*\\d)(?=.*[a-z]).{6,20})$");
 Matcher m = p.matcher("mal4554SD");
 status = m.matches();
 System.out.println(status); 
```

它返回真。为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T03:51:24.800

问题可能出`\\d`在`regexString`.

控制台打印的结果是什么？

```
System.out.println(regexString); 
```

此外，如果您可以分享更多关于`regexPair`及其`get()`.

# jquery - 让一个简单的 cufon 脚本工作

> ID：11681067
> 
> 赞同：0
> 
> 时间：2012-07-27T03:30:57.743
> 
> 标签：jquery, cufon

我是 cufon 的新手，我在让它工作时遇到了一些问题。我正在尝试让 cufon 与我的 html 一起使用。我正在尝试一个基本脚本（比如将 h1 标签更改为不同的字体）。

例子：

```
 <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
   <script type="text/javascript" src="{{STATIC_URL}}js/cufon-yui.js"></script>
   <script type="text/javascript">
        Cufon.replace('h1',{font-family: "Tahoma"});
   </script> 
```

h1 标签似乎没有改变。不确定错误在哪里。我已经包含了 jquery lib、cufon js，但它不起作用。需要一些指导..谢谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T09:44:43.740

[您需要使用http://cufon.shoqolate.com/generate/](http://cufon.shoqolate.com/generate/)上的工具将要使用的字体转换为 js 文件。

之后，您只需要链接到它（假设您想使用 tahoma 并`{{STATIC_URL}}`变成正确的路径）：

```
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script type="text/javascript" src="{{STATIC_URL}}js/cufon-yui.js"></script>
<script type="text/javascript" src="{{STATIC_URL}}js/tahoma.js"></script>
<script type="text/javascript">
    Cufon.replace('h1');
</script> 
```

不要忘记`<script type="text/javascript"> Cufon.now();</script>`在结束标记之前`</body>`添加以使 IE 正常运行。更多信息可以在[https://github.com/sorccu/cufon/wiki/Usage](https://github.com/sorccu/cufon/wiki/Usage)上找到。

# google-closure-compiler - 使用闭包编译器在对象上公开动态创建的函数

> ID：11681070
> 
> 赞同：1
> 
> 时间：2012-07-27T03:31:40.533
> 
> 标签：google-closure-compiler, google-closure-library

我正在尝试注释我的 javascript，以便闭包不会重命名所有符号，因为我也在使用 vanilla javascript。

```
/**
* @constructor
* @expose
* @type{foo}
*/

foo = function (el, args) {
"use strict";
var s = "Hello World";
/*
* @expose
* @this {foo}
* @type {function}
*/
this.introduce = function () {
    return s;
 };
}; 
```

但是，当我通过具有高级优化的闭包编译器运行它时生成的输出是

```
foo = function() {
 this.a = function() {
 return"Hello World" 
```

} };

我如何要求闭包保留名称引入，因为这将从外部 javascript 调用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-27T05:45:23.960

以下选项可用于防止闭包编译器重命名符号：

*   [`@export`](https://developers.google.com/closure/compiler/docs/js-for-compiler)（另见：[`goog.exportSymbol`](https://code.google.com/p/closure-library/source/browse/closure/goog/base.js?spec=svn60ec04c13f5c3f9b471fb1c3eb6b5588670aeb99&r=60ec04c13f5c3f9b471fb1c3eb6b5588670aeb99#1447)或[`goog.exportProperty`](https://code.google.com/p/closure-library/source/browse/closure/goog/base.js?spec=svn60ec04c13f5c3f9b471fb1c3eb6b5588670aeb99&r=60ec04c13f5c3f9b471fb1c3eb6b5588670aeb99#1476)）
*   通过将符号存储在字符串引用的全局对象上来导出符号。请参阅[导出要保留的符号](https://developers.google.com/closure/compiler/docs/api-tutorial3#export)
*   在 externs 文件中定义一个接口并实现该接口（参见下面的链接答案）
*   报价属性
*   **注：** `@expose`已弃用

如果您不想如示例中所示在函数原型上定义方法，则可以导出构造函数`foo`并`goog.exportSymbol` 使用`@expose`导出方法。

```
/**
 * @param {Element} el
 * @param {...*} args
 * @constructor
 */
var foo = function (el, args) {
  "use strict";

  /** @private */
  this.msg_ = "Hello World";

  /**
   * @this {foo}
   * @return {string}
   * @expose
   */
  this.introduce = function () {
    return this.msg_;
  };
};
goog.exportSymbol('foo', foo); 
```

通过在函数原型上定义方法，`goog.exportSymbol`可用于导出构造函数和方法名称。

```
/**
 * @param {Element} el
 * @param {...*} args
 * @constructor
 */
var foo = function (el, args) {
  "use strict";

  /** @private */
  this.msg_ = 'Hello World!';
};
goog.exportSymbol('foo', foo);

/**
 * @return {string}
 */
foo.prototype.introduce = function () {
  return this.msg_;
};
goog.exportSymbol('foo.prototype.introduce', foo.prototype.introduce); 
```

请参阅这些相关的 stackoverflow 问题：

*   **[为什么 Closure 编译器重命名外部类型的属性？](https://stackoverflow.com/q/8196243/1164465)**
*   **[我可以告诉 Closure 编译器仅针对特定类型停止重命名属性吗？](https://stackoverflow.com/q/8201954/1164465)**
*   [约翰对问题的回答](https://stackoverflow.com/a/9662283/1164465)：**如何告诉闭包编译器保留对象的属性**

# php - 执行从 AJAX 响应 (PHP) 返回的 javascript 函数

> ID：11681072
> 
> 赞同：8
> 
> 时间：2012-07-27T03:31:51.913
> 
> 标签：php, jquery, ajax

一旦 Ajax 通过 PHP 返回 HTML 代码，我正在尝试加载一个 javascript 函数。这需要我在 ajax 响应中回显 javascript。

换句话说，我正在尝试在 PHP Ajax 响应中添加此代码（放置在脚本标签之间）。希望它执行

```
$('#green').smartpaginator({ 一些代码... });
```

从我目前阅读的内容来看，浏览器已经完成了 Javascript 的读取，并且不会执行此操作。有没有办法做到这一点.... ？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-07-27T03:37:09.267

您必须像这样评估该代码

```
eval("("+response+")"); 
```

**或者**

如果您的响应包含 html 和 javascript 代码，您必须这样做

```
 $.ajax({
            url: "/snippets/js-in-ajax-response.html",
            context: document.body,
            success: function(responseText) {
                $("#response-div").html(responseText);
                $("#response-div").find("script").each(function(i) {
                    eval($(this).text());
                });
            }
        }); 
```

# backup - 通过 SSH 执行 dd 时，我是否必须卸载 /dev/mmcblk0？

> ID：11681079
> 
> 赞同：1
> 
> 时间：2012-07-27T03:33:40.283
> 
> 标签：backup, embedded-linux, beagleboard

我正在使用此命令在运行[Ångström Linux的](https://en.wikipedia.org/wiki/%C3%85ngstr%C3%B6m_distribution)[BeagleBone Black](https://en.wikipedia.org/wiki/BeagleBoard#BeagleBone_Black)上备份我的 4 GB [MMC 卡](http://en.wikipedia.org/wiki/MultiMediaCard)：

```
beaglebone:/# dd if=/dev/mmcblk0 | ssh admin@192.168.1.123 "dd of=/volume1/homes/admin/test.img" 
```

它似乎工作得很好。但我想知道，我需要卸载 SD 卡吗？如果在备份过程中改变了 SD 卡怎么办？如何避免这种情况或避免获得损坏的图像？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T07:36:24.257

如果以只读方式挂载 SD 卡，则无需卸载。

但是如果它是 RW 挂载的，如果您进行一次操作，您很可能会得到一个不一致的文件系统。

因此，要么卸载它，要么在 RO 中重新安装它。

# git - git推送到远程master分支

> ID：11681080
> 
> 赞同：3
> 
> 时间：2012-07-27T03:33:46.677
> 
> 标签：git

我有一个远程和一个本地 git 存储库。
本地存储库是从远程克隆的。
当我修改本地存储库并提交到主分支时。
然后我运行“ **git push** ”到远程存储库。
但它失败并输出以下消息。

```
remote: error: refusing to update checked out branch: refs/heads/master
remote: error: By default, updating the current branch in a non-bare repository
remote: error: is denied, because it will make the index and work tree inconsistent
remote: error: with what you pushed, and will require 'git reset --hard' to match
remote: error: the work tree to HEAD.
remote: error: 
remote: error: You can set 'receive.denyCurrentBranch' configuration variable t
remote: error: 'ignore' or 'warn' in the remote repository to allow pushing int
remote: error: its current branch; however, this is not recommended unless you
remote: error: arranged to update its work tree to match what you pushed in som
remote: error: other way.
remote: error: 
remote: error: To squelch this message and still keep the default behaviour, se
remote: error: 'receive.denyCurrentBranch' configuration variable to 'refuse'. 
```

我在远程存储库中“git checkout -b current”另一个分支。
在我的本地存储库中，我运行“git push”然后它成功。
但是本地修改只推送到远程master分支。
然后我应该在远程存储库中运行“git merge master”来进行更改。

我是 git 的新手。
我做错了吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-27T03:38:10.037

远程存储库不是裸存储库，并且已签出主存储库。而且，默认情况下，git 不允许您推送到非裸仓库的已签出分支。

`git init --bare`理想情况下，您推送到的远程仓库应设置为裸仓库 ( )。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-27T05:53:42.597

manojlds 的回答是正确的，但它可能有助于了解远程回购的目的是什么。

*   如果远程存储库仅用于备份/协作目的->您的想法是正确的，只需将远程存储库替换为“裸”存储库，然后从那里开始。
*   如果远程仓库是生产服务器，那么你做错了 -> 你应该有不同的配置。

一个很好的确认，以便您可以“推向生产”是让您的“裸”存储库用于备份/协作目的，然后您有一个单独的存储库，它在部署服务器上设置并从裸存储库克隆。然后在裸仓库上，您可以放置​​一个“接收后挂钩”，这会使部署仓库进行拉取。

我敢肯定有关于如何做到这一点的指南......我自己也跟着过一次:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-27T04:24:33.673

当我刚接触 github 时，我的导师给了我这个经验法则：

在本地修改您的代码。当需要提交时，请执行以下操作：

1.  做`git pull`（将远程仓库的内部引用头同步到本地仓库非常重要）
2.  如果不同文件中存在任何冲突，请通过在 Kdiff 中打开这两个文件来选择您的副本或远程副本或两者的混合，从而仔细合并它们。一旦你解决了所有的冲突，就会推动合并。
3.  在第 2 步之后，请`git push`保存您对首先要提交的代码所做的本地更改。

颠覆可能会很痛苦，但保持同步非常重要。这些规则对我使用 github 维护子版本有很大帮助。希望这有帮助。

# sql - SQL 检查列中的所有值

> ID：11681083
> 
> 赞同：2
> 
> 时间：2012-07-27T03:34:03.667
> 
> 标签：sql, oracle

我在 Oracle DB 中有下表。

```
ID  VALUE
-----------
1   1  
1   2  
1   3   
2   1   
2   2  
3   1  
3   2  
3   3  
4   1 
```

如何选择具有所有 3 个值 (1,2,3) 的 ID

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-27T04:49:02.620

最简单的选择通常是这样的

```
SQL> ed
Wrote file afiedt.buf

  1  with x as (
  2    select 1 id, 1 val from dual union all
  3    select 1 id, 2 val from dual union all
  4    select 1 id, 3 val from dual union all
  5    select 2 id, 1 val from dual union all
  6    select 2 id, 2 val from dual union all
  7    select 3 id, 1 val from dual union all
  8    select 3 id, 2 val from dual union all
  9    select 3 id, 3 val from dual union all
 10    select 4 id, 1 val from dual
 11  )
 12  select id
 13    from x
 14   where val in (1,2,3)
 15   group by id
 16* having count(distinct val) = 3
SQL> /

        ID
----------
         1
         3 
```

该`WHERE`子句标识您感兴趣的值。该`HAVING`子句告诉您需要存在多少这些值。例如，如果您希望所有行至少具有 3 个值中的 2 个，您可以更改`HAVING`子句以查找`COUNT`2 的 a。

如果一个特定`val`的保证每个 最多出现一次`id`，您可以消除子句`distinct`中的。`HAVING`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-27T03:47:29.087

尝试这个：

```
SELECT ID
  FROM TABLENAME T
 WHERE EXISTS (SELECT *
                 FROM TABLENAME T1
                WHERE T1.ID = T.ID AND T1.VALUE = '1')
   AND EXISTS (SELECT *
                 FROM TABLENAME T2
                WHERE T1.ID = T.ID AND T2.VALUE = '2')
   AND EXISTS (SELECT *
                 FROM TABLENAME T3
                WHERE T1.ID = T.ID AND T2.VALUE = '3') 
```

或者

```
SELECT ID
  FROM TABLENAME T
 WHERE (SELECT COUNT( * )
          FROM (SELECT VALUE
                  FROM TABLENAME T1
                 WHERE T1.ID = T.ID
                GROUP BY VALUE)) = 3; 
```

其中 3 是可以通过 a 计算的值的数量

```
 SELECT COUNT( * )
          FROM TABLENAME T1
        GROUP BY VALUE 
```

所以这将是通用的：

```
SELECT ID
  FROM TABLENAME T
 WHERE (SELECT COUNT( * )
          FROM (SELECT VALUE
                  FROM TABLENAME T1
                 WHERE T1.ID = T.ID
                GROUP BY VALUE)) = (SELECT COUNT( * )
                                      FROM TABLENAME T2
                                    GROUP BY VALUE) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-27T04:33:27.880

select id from (select id,sum(case when value=1 then 1 else 0 end) as 'v1',
sum(case when value=2 then 1 else 0 end) as 'v2',
sum(case when value=3然后 1 else 0 end) as 'v3'
from orac group by id) as final
where v1>0 and v2>0 and v3>0

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-27T03:52:44.370

这是一个选项... HAVING 子句中的每个表达式都在计算找到等于 1、2 或 3 的值的数量。如果这些计数中的任何一个小于 1，则不会返回 ID。

[http://sqlfiddle.com/#!4/00fdc/8](http://sqlfiddle.com/#!4/00fdc/8)

```
SELECT ID
FROM myTable
GROUP BY ID
HAVING
  SUM(DECODE(VALUE, 1, 1, 0)) > 0 AND
  SUM(DECODE(VALUE, 2, 1, 0)) > 0 AND
  SUM(DECODE(VALUE, 3, 1, 0)) > 0 
```

**编辑**- 要求值为 1，以及 2 或 3：

```
SELECT ID
FROM myTable
GROUP BY ID
HAVING
  SUM(DECODE(VALUE, 1, 1, 0)) > 0 AND
  (
      SUM(DECODE(VALUE, 2, 1, 0)) > 0 OR
      SUM(DECODE(VALUE, 3, 1, 0)) > 0
  ) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-27T04:37:28.543

使用此选项，您将获得更多的 ID，直到您的应用程序选择您想要的列：

```
SELECT ID,
  sum(CASE WHEN VALUE = 1 THEN 1 ELSE 0 END) AS ONE,
  sum(CASE WHEN VALUE = 2 THEN 1 ELSE 0 END) AS TWO,
  sum(CASE WHEN VALUE = 3 THEN 1 ELSE 0 END) AS THREE
FROM MYTABLE
  GROUP BY ID
  HAVING ONE >= 1 AND TWO >= 1 AND THREE >= 1; 
```

或者，如果您的情况是特定的（只有值 1、2、3 是可能的，并且不允许重复值），那么您可以尝试以下一种：

```
SELECT ID,
  count(VALUE) AS VALUECOUNT
FROM MYTABLE
  GROUP BY ID
  HAVING VALUECOUNT = 3; 
```

在这样做之前我会小心，因为如果以后你想添加额外的值，你可能会得到副作用。但是，如果您当前的案例符合上述限制，仍然值得提出。

当然，如果您不喜欢获取这些中间计数的想法，请将我给出的查询包含在另一个选择中

```
SELECT ID FROM (
  ...
) 
```

# javascript - 如何在 jquery 中使用 post 进行 for 循环

> ID：11681090
> 
> 赞同：0
> 
> 时间：2012-07-27T03:34:57.957
> 
> 标签：javascript, jquery, ajax, post

阅读以下代码：

```
for (i = 0; i < 20; i++) {
  $.post( 'url', 'data='+ i, function (data) 
   {
      alert( 'Element ' + i + ' was added' );
   };
} 
```

如果您这样做，将同时执行 20 个 POST！

我需要的是一个一个地做这个（顺序）......我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T03:39:55.180

在回调中，只需再次调用该函数。

```
function sendRequest(i) {
    $.post('url', 'data=' + i, function(data) {
        alert('Element ' + i + ' was added');

        if(i < 19) {
            sendRequest(i + 1);
        }
    });
}

sendRequest(0); 
```

# jquery - jQuery：将 div 从固定位置 UP 动画到另一个 DIV

> ID：11681094
> 
> 赞同：1
> 
> 时间：2012-07-27T03:35:40.797
> 
> 标签：jquery, animation, jquery-animate

出于某种原因，我想要动画的 DIV 是自上而下的动画......我想将它从向上动画到最终目的地。

DIV 从`position: fixed`页面底部开始。

这就是我现在正在做的事情：

```
var div2Pos = $("#feature-header-wrapper").position();
$("#123456").css('position', 'absolute');
$("#123456").animate({top: div2Pos.top}, 1000); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T03:57:17.683

我认为这就是你想要的：

演示：http: [//jsfiddle.net/SO_AMK/Q6KNk/](http://jsfiddle.net/SO_AMK/Q6KNk/)

jQuery：

```
var div2Pos = $("#div2").position();
$("#square").css({
    position: 'absolute',
    top: $("#square").position().top,
    left: $("#square").position().left
});
$("#square").animate({
    top: div2Pos.top
}, 1000);​ 
```

HTML：

```
<div id="square">Lorem Ipsum...</div>
<div id="div2">Lorem Ipsum...</div>​ 
```

CSS：

```
#square {
    width: 100px;
    height: 100px;
    background-color: lightBlue;
    position: fixed;
    bottom: 0;
}
#div2 {
    width: 100px;
    height: 100px;
    background-color: lightGreen;
    position: relative;
    top: 30px;
} 
```

基本上它获取`div2`' 位置然后设置`#square`为它的当前位置，但使用绝对而不是固定定位，以便动画发生而不是跳到顶部。

**注意：**`square`如果在相对定位的元素内，这将不起作用！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T01:26:57.747

我也有同样的问题。但我的是在一个猎鸭游戏中，所以动画会触发几次，我想它可能会帮助你知道它只发生在第一次。之后，我正在制作动画的 div 保留我给它的位置并从下往上制作动画。所以如果我必须...我猜我可以添加一个额外的小动画，什么都不做。希望我能找到不那么平庸的东西，但我希望这会有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T03:43:10.013

你可以搞砸这样的事情

```
 $("#123456").animate({top: '-=300px'}, 1000); 
```

这将动画到 300px 少，向上移动（我认为这就是你想要的）

# android - 在另一个pendingintent中取消一个AlarmManager的pendingIntent

> ID：11681095
> 
> 赞同：25
> 
> 时间：2012-07-27T03:36:06.513
> 
> 标签：android, alarmmanager

我想取消定义服务的AlarmManager，在此服务中可能会启动一个新的AlarmManger或取消之前定义的警报。我知道alarmManager.cancel（PendingIntent）中的参数pendingintent，必须相同。与filterEquals（其他意图）比较但它仍然不起作用。取消失败。这是我的代码

```
public class GetRoundStroe {
    private Store[] stores;
    private Context mContext;

    public GetRoundStroe(Context mContext) {
        this.mContext = mContext;
    }

    public Store[] getStores() {
        if (ComCommand.haveInternet(mContext)) {
            start_am_normal();
        } else {
            start_am_silence();
        }
        return stores;
    }

    public Store[] start_am_silence() {

        long firstTime = SystemClock.elapsedRealtime();

        AlarmManager am = (AlarmManager) mContext.getSystemService(Context.ALARM_SERVICE);

        if (AlarmHolder.mAlarmNormal != null) {
            am.cancel(AlarmHolder.mAlarmNormal);

        }

        am.setRepeating(AlarmManager.ELAPSED_REALTIME_WAKEUP,
                firstTime, TestSwitch.getInstance().getSilence_time(), AlarmHolder.mAlarmSilence);

        return null;

    }

    public Store[] start_am_normal() {

        long firstTime = SystemClock.elapsedRealtime();

        AlarmManager am = (AlarmManager) mContext.getSystemService(Context.ALARM_SERVICE);

        if (AlarmHolder.mAlarmSilence != null) {
            MyLog.e(GetRoundStroe.class,"AlarmHolder.mAlarmSilence"+AlarmHolder.mAlarmSilence+"");
            am.cancel(AlarmHolder.mAlarmSilence);
        }
        am.setRepeating(AlarmManager.ELAPSED_REALTIME_WAKEUP,
                firstTime, TestSwitch.getInstance().getNormal_time(), AlarmHolder.mAlarmNormal);

        return null;
    }

    private static final class AlarmHolder {
        static final PendingIntent mAlarmSilence = PendingIntent.getService(ApplicationContext.getInstance(),
                0,
                new Intent(ApplicationContext.getInstance(), GetRoundSilenceService.class),
                0);

        static final PendingIntent mAlarmNormal = PendingIntent.getService(ApplicationContext.getInstance(),
                0, new
                Intent(ApplicationContext.getInstance(), GetRoundNormalService.class),
                0);

    }
} 
```

GetRoundSilenceService 和 GerRoundNormalService 调用 start_am_normal() 或 start_am_silence；任何人都可以帮助我吗？谢谢

* * *

## 回答 #1

> 赞同：70
> 
> 时间：2012-07-27T05:32:46.240

```
 myIntent = new Intent(SetActivity.this, AlarmActivity.class);
   pendingIntent = PendingIntent.getActivity(CellManageAddShowActivity.this,
       id, myIntent, PendingIntent.FLAG_UPDATE_CURRENT);
   pendingIntent.cancel();
   alarmManager.cancel(pendingIntent); 
```

这些代码行肯定可以帮助您删除/取消待处理的意图和警报。

您需要的主要内容是：

1.  创建具有相同 id 和适当意图 FLAG 的待处理意图。
2.  取消该未决意图。
3.  使用警报管理器取消警报。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-06-01T09:10:34.643

@MKJParekh 的答案是正确的，但是我想添加更多信息，以便我们都知道什么可行，什么不可行。

假设在 activityA 上，您创建并设置 AlarmManager 以在 30 秒内打开 activityC，然后在可以是任何其他活动上，我们要取消该 AlarmManager。因此，我们将执行以下操作；

在activityA中我们创建并设置了AlarmManager；

```
//activityA
Intent myIntentA = new Intent(actvityA.this, activityB.class)
myIntent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
PendingIntent myPendingIntent = PendingIntent.getActivity(activityA.this, 0, myIntentA, PendingIntent.FLAG_ONE_SHOT);

//Calendar with the time we want to fire the Alarm
Calendar calendar = Calendar.getInstance();   // Get Current Time
calendar.add(Calendar.SECOND,30);      //Fire Alarm in 30 seconds from Now.                  

((AlarmManager)getSystemService(ALARM_SERVICE)).setExact(AlarmManager.RTC_WAKEUP, calendar.getTimeInMillis(), myPendingIntent); 
```

一段时间后，在另一个 Activity 中，我们想取消在我们无权访问的 activityA 中创建的此类 AlarmManager。让我们将此当前活动称为activityZ；

```
//activityZ
Intent myIntentZ = new Intent(activityZ.this, activityB.class);
PendingIntent pendingIntentZ = PendingIntent.getActivity(activityZ.this, 0, myIntentZ, PendingIntent.FLAG_ONE_SHOT);

((AlarmManager)getSystemService(ALARM_SERVICE)).cancel(pendingIntentZ); 
```

一些重要的点，

我们在 activityA 中提供的上下文`new Intent(context)`和`getActivity(context)`是相同的，但是它们不必与我们取消 的活动相匹配`AlarmManager`，在这种情况下，activityZ 有另一个上下文。

我们要打开的类`AlarmManager`在两个活动`new Intent (context, activityB.class)`中必须相同，作为 int 的 requestCode 必须相同，我用于`0`此示例。最后，两个活动中的标志必须相同`PendingIntent.FLAG_ONE_SHOT`。

`myIntent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);`之所以使用[PendingIntent.getActivity](https://developer.android.com/reference/android/app/PendingIntent.html#getActivity(android.content.Context,%20int,%20android.content.Intent,%20int))是因为如果我们在现有活动的上下文之外启动活动，则需要它。

# java - 如何使用 Java、Java EE 实现 SAML sso

> ID：11681100
> 
> 赞同：6
> 
> 时间：2012-07-27T03:37:00.437
> 
> 标签：java, web-services, jakarta-ee, single-sign-on, saml-2.0

我是 SAML 2.0 的新手。我找不到一本关于`SAML`亚马逊的书，它可以指导你如何开始`SAML`，尤其是`SAML2.0`。

我正在寻找使用身份提供程序（开源）的端到端`SSO`演示应用程序开发，以便我可以模拟端到端的. 所以我的意思是，从身份提供者生成一个令牌，处理 SAML 消息/发送回响应等，然后创建 2 个或更多域/登录以模拟成功或错误消息。`SAML``SSO``SSO`

`SSO`任何您知道的新手到中级或高级的教程/书籍/资源都`SAML`将不胜感激。

最后如何`SAML`使用`WS-Security`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T03:57:07.500

作为起点，您可能想查看 CAS wiki 中的此页面：[https ://wiki.jasig.org/pages/viewpage.action?pageId=6063484](https://wiki.jasig.org/pages/viewpage.action?pageId=6063484)

或谷歌的这个页面：[https ://developers.google.com/google-apps/sso/saml_reference_implementation](https://developers.google.com/google-apps/sso/saml_reference_implementation)

# sass - 在 Sass 中，如何引用父选择器并排除任何祖父母？

> ID：11681101
> 
> 赞同：6
> 
> 时间：2012-07-27T03:37:02.043
> 
> 标签：sass

我有以下 sass 代码：

```
.class{
    label{
        color:#fff;
        .disabled &{color:#333; }
    }
} 
```

哪个输出

```
.disabled .class label 
```

有没有办法在不包含任何祖父母选择器的情况下输出父选择器？像这样：

```
.disabled label 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-27T14:14:14.293

在使用父引用时，我不知道在 SASS 中从祖先选择器中进行选择。但是，使用您的代码，稍作重组可以得到相同的结果：

```
label {
    .class & {
        color: #fff;
    }

    .disabled & {
        color:#333;
    }
} 
```

编译为：

```
.class label {
  color: #fff; }
.disabled label {
  color: #333; } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-06-26T17:18:32.407

即使 hopper 没有完全错误，您实际上可以选择带有变量的祖父母。

您可以通过以下方式实现您想要的：

```
.class{
    label{
        color:#fff;

        $selector: nth(&,1);
        $direct-parent: nth($selector, length($selector));

        @at-root #{$direct-parent} {
          .disabled &{color:#333; }
        };
    }
} 
```

这将生成这个css：

```
.class label {
  color: #fff;
}
.disabled label {
  color: #333;
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2016-02-14T18:06:29.673

父选择器始终是对上一级嵌套中整个已解析选择器的引用。没有“父”或“祖父”的概念，尤其是在连接选择器或在最后使用父选择器时会弄得一团糟。

***免责声明：除非您真的需要，*****否则我不建议您这样做**。

从 Sass 3.4 开始，您可以通过`&`用作变量来提取选择器的一部分。以这种方式使用时，您将获得一个字符串列表（可以循环等）。

# 提取选择器的一部分或*切片*

这里的函数使用与字符串切片函数相同的参数样式：

```
@function selector-slice($sel, $start: 1, $end: -1) {
    $collector: ();
    @each $s in $sel {
        // calculate our true start and end indices when given negative numbers
        $_s: if($start > 0, $start, length($s) + $start + 1);
        $_e: if($end > 0, $end, length($s) + $end + 1);
        $c: ();
        @for $i from $_s through $_e {
            $c: append($c, nth($s, $i));
        }
        // prevent duplicates from creeping in
        @if not index($collector, $c) {
            $collector: append($collector, $c);
        }
    }
    @return $collector;
}

/* complex example */
.one-a, .one-b {
    two {
        three {
            color: red;

            &:before {
                @at-root #{selector-slice(&, 2, 3)} {
                    color: green;
                }
            }
        }
    }
}

/* your example */
.class {
    label {
        color:#fff;
        @at-root #{selector-slice(&, -1, -1)} {
            .disabled & {
                color:#333;
            }
        }
    }
} 
```

输出：

```
/* complex example */
.one-a two three, .one-b two three {
  color: red;
}
two three:before {
  color: green;
}

/* your example */
.class label {
  color: #fff;
}
.disabled label {
  color: #333;
} 
```

作为额外的好处，您可以使用此函数通过在较小的索引之前传递较大的索引来反转选择器的顺序。

```
.one-a, .one-b {
    two {
        three {
            color: red;

            &:before {
                @at-root #{selector-slice(&, 3, 2)} {
                    color: green;
                }
            }
        }
    }
} 
```

输出：

```
.one-a two three, .one-b two three {
  color: red;
}
three:before two {
  color: green;
} 
```

相关：[修改 Sass 中选择器的中间部分（添加/删除类等）](https://stackoverflow.com/questions/28593476/modifying-the-middle-of-a-selector-in-sass-adding-removing-classes-etc)

# 用另一个类替换一个类

`selector-replace`或者，如果您想要用另一个类替换一个类，您可以只使用标准库中的函数。

```
.class {
    label {
        color:#fff;
        @at-root #{selector-replace(&, '.class', '.disabled')} {
            color:#333;
        }
    }
} 
```

输出：

```
.class label {
  color: #fff;
}
.disabled label {
  color: #333;
} 
```

# c# - 在 ASP.NET 中插入 SqlCommand 时出错

> ID：11681109
> 
> 赞同：2
> 
> 时间：2012-07-27T03:37:56.030
> 
> 标签：c#, asp.net, .net

我在这里发疯了，有人可以告诉我这段代码有什么问题吗

```
con.Open();
cmd = new SqlCommand("INSERT INTO COUNTERS(COUNTER_START, COUNTER_CURRENT, COUNTER_NEXT, COUNTER_TYPE, COUNTER_DATE_CREATED, COUNTER_TIME_CREATED, COUNTER_CREATED_BY) " +
                    "VALUES(@counter_start, @counter_current, @counter_next, @counter_type, @date, @time, @user)", con);

cmd.Parameters.Add("@counter_start", SqlDbType.Int).Value = counter_start.Text;
cmd.Parameters.Add("@counter_current", SqlDbType.Int).Value = counter_current.Text;
cmd.Parameters.Add("@counter_next", SqlDbType.Int).Value = counter_next.Text;
cmd.Parameters.Add("@counter_type", SqlDbType.VarChar, 10).Value = counter_type.Text;
cmd.Parameters.Add("@date", SqlDbType.VarChar, 20).Value = date;
cmd.Parameters.Add("@time", SqlDbType.VarChar, 20).Value = time;
cmd.Parameters.Add("@user", SqlDbType.VarChar, 50).Value = user;

cmd.ExecuteNonQuery();
cmd.Dispose();
con.Close(); 
```

我收到此错误

> 参数化查询 '(@counter_start int,@counter_current int,@counter_next int,@coun' 需要未提供的参数 '@user'

任何输入都会非常感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T03:40:47.277

您可以尝试调试应用程序并查看 variable 保存的值`user`。我认为`user`你提供的是空的。如果您使用的是 C# 4.0，请尝试

```
 cmd.Parameters.Add("@user", SqlDbType.VarChar, 50).Value = user ?? DBNull.Value; 
```

或者对于早期版本的 C#

```
 cmd.Parameters.Add("@user", SqlDbType.VarChar, 50).Value = user != null ? user : DBNull.Value; 
```

如果您想要一个空字符串而`string.Empty`不是`DBNull.Value``DBNull`

# python - 在python中将两个值写入csv行

> ID：11681110
> 
> 赞同：0
> 
> 时间：2012-07-27T03:38:00.193
> 
> 标签：python, excel, csv

所以我有一个已解决的问题，但我不喜欢这个解决方案:)

```
with open(outfile, 'a') as file:
    writer = csv.writer(file) #opens a csv writer
    #inserts ID to front of wordList
    wordList.insert(0,ID)
    writer.writerow(wordList)
    #removes ID
    wordList.remove(ID) 
```

现在它成功地将一个 ID 和一个单词列表写入 csv 格式（据我所知——我的计算机上实际上没有 excel）。我不喜欢的部分是我必须插入和删除 ID，因为我不希望以后包含它。这似乎很蹩脚。我可以以某种方式轻松地对同一行进行双重插入吗？

我试过：

```
 writer.writerow([ID,wordList]) 
```

但它给出了不受欢迎的方括号

这是2.7，如果重要的话！谢谢 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T03:41:12.573

```
writer.writerow([ID] + wordList) 
```

或者

```
from itertools import chain

writer.writerow(chain([ID], wordList)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T03:41:01.730

你可以做`writer.writerow([ID] + wordList)`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-27T03:43:21.947

您可以尝试如下：

```
writer.writerow([ID] + wordlist) 
```

# algorithm - 对数组进行排序的最少移动次数？

> ID：11681114
> 
> 赞同：3
> 
> 时间：2012-07-27T03:38:45.057
> 
> 标签：algorithm, sorting, amazon

给定一个不同整数的数组。您可以从数组中删除一个元素并将其附加到它的末尾。这是一次 MOVE，计为一次 MOVE 操作。找到对数组进行排序所需的最小移动次数。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-27T16:12:04.210

据我了解，将一个元素移动到末尾会移动该位置之后的所有元素，因此移动的第三个元素

```
[a_1, a_2, a_3, a_4, a_5, a_6] 
```

最终产生

```
[a_1, a_2, a_4, a_5, a_6, a_3] 
```

如果这种理解是正确的，那么最少步数的策略是

1.  如果数组已排序，则停止。
2.  找到出现在数组中较小元素之前的最小元素
3.  将该元素移动到末尾
4.  转到 1。

    ```
     Ex: 
      I/p: 8 6 1 7 5 2 3 9

     Process:
           8 6 1 7 2 3 9 5
           8 1 7 2 3 9 5 6
           8 1 2 3 9 5 6 7
           1 2 3 9 5 6 7 8
           1 2 3 5 6 7 8 9 -> sorted

       So totally 5 moves to be done to sort an array. 
    ```

**证明：**随着每一步，按升序排列的最终排序数组的初始元素序列至少增加一个，因此算法终止。该算法仅在数组排序后终止。

每个数组元素最多移动一次。如果元素`v`在迭代中移动`i`，则所有元素`<= v`都按升序排列在数组中。移动任何元素`> v`都不会改变该相对位置，因此`v`不会被选为要在以后的任何迭代中移动的元素。

一个数组元素被移动当且仅当它至少和第一个被移动的元素一样大，比如`v_1`。

通过构造，移动的元素形成严格递增的序列，因此没有元素`< v_1`被移动。

移动后`v_1`，所有大于 的元素`v_1`都被放置在`v_1`数组中较小的元素（即，可能还有其他元素）之前。改变元素相对位置的唯一方法`w > v_1`是`v_1`移动`w`到末尾，因此`w`必须在某个步骤移动。

在任何排序序列中，所有元素`>= v_1`必须至少移动一次：

`v_1`必须在某个步骤中移动，因为在原始数组中有一个`v_0 < v_1`放置在之后的位置，并且改变and`v_1`顺序的唯一方法是移动。`v_0``v_1``v_1`

如上所述，所有`w > v_1`必须在移动后至少移动一次`v_1`。

可以在 O(n) 中找到所需的移动次数，但当然排序本身是二次的。

在找到第一个要移动的元素 之后`v_1`，只需计算`k`小于 的元素的数量`v_1`，则所需的移动次数为`n - k`。

**`v_1`在O(n)中找到**：（我本来以为是向前，结果是向后，如果向后，就很简单了。）

首先，从数组的末尾开始扫描，直到找到局部最小值或到达数组的开头。如果到达起点，则数组已经排序，无需移动。否则，将（局部）最小值的值和之前元素的值存储为暂定值 f `v_1`。然后继续前进，直到到达数组的开头，如果当前元素较小，则在每个步骤中更新最小值，如果`v_1`当前元素大于最小值但小于 tentative ，则更新 tentative `v_1`。

```
int move_count(int *a, int n) {
    int j = n-1;
    while(j > 0 && a[j-1] < a[j]) --j;
    if (j == 0) return 0;   // the array is already sorted
    // min_val holds the smallest element in the array after
    // the currently investigated position, v_1 holds the smallest
    // element after the current position that is larger than any later
    int min_val = a[j], v_1 = a[j-1];
    j -= 2;
    while(j >= 0) {
        if (a[j] < min_val) {
            min_val = a[j];
        } else if (a[j] < v_1) {
            v_1 = a[j];
        }
        --j;
    }
    int count_smaller = 0;
    for(j = 0; j < n; ++j) {
        if (a[j] < v_1) ++count_smaller;
    }
    return n - count_smaller;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T05:09:32.000

解决方案将基于选择排序。看看[http://www.sorting-algorithms.com/selection-sort](http://www.sorting-algorithms.com/selection-sort)中的这个动画，了解一下。这个想法很简单，就是在第 k 次迭代中找到第 k 个最大的元素，然后在那个元素上调用 MOVE。动画中也演示了找到这个元素。复杂度为 O(n)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T13:20:57.587

如果 MOVE 是唯一允许移动数组中元素的方法，那么选择排序就是将第 k 个元素 MOVE 移动到末尾并用第 k 次迭代中的第 k 个最小元素替换的方法。

最小移动操作 = 0（当数组已经排序时）。
最大移动操作 = n（当数组以所需的相反顺序排序时）。
因此，总移动操作 = O(n)。

排序算法的复杂度不变。

# android - JellyBean服务中引入Isolatedprocess标签的好处[Android]

> ID：11681115
> 
> 赞同：14
> 
> 时间：2012-07-27T03:38:47.003
> 
> 标签：android

任何人都可以说明在 JellyBean [Android] 的服务中引入独立进程标签的真正/主要优势是什么。这在框架级别或内核级别是否有利，正如我们所见，在服务中设置隔离进程标记值“true”会为该服务进程分配一个新的用户 ID。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-08-25T15:52:52.340

你在 Google Groups 上看过[Dianne Hackborn 的回答吗？](https://groups.google.com/forum/?fromgroups=#!topic/android-developers/pk45eUFmKcM)问题是相同的，正如她指出的那样，此时该标志确实有一个已知用途：为执行远程、不受信任的代码（即 JavaScript）添加一层安全性。无法保证运行远程代码不会引入安全漏洞，因此通过在无权限进程中隔离解析该代码的进程，该代码很难造成任何真正的伤害。

# mysql - mysql获取小时/分钟/秒的总和

> ID：11681120
> 
> 赞同：0
> 
> 时间：2012-07-27T03:39:39.070
> 
> 标签：mysql, date, timestamp

我有一个表：每次用户打开页面时都会插入一个新字段时的用户**ID**和**时间戳。**

我正在尝试获取多个用户在 1 个月间隔内出现的**小时**/**分钟**/**天**/**周的总数。**

我尝试了一堆不同的查询，但每个查询都非常低效。

理想情况下，我希望得到类似的结果：

```
 userid | minutes | hours | days | weeks
      1      10080     168      7      1
      2       1440      24      1      0 
```

希望有人可以阐明如何做到这一点。

以下是我尝试过的查询：

```
 SELECT 
    w.time AS `week`, 
    d.time AS `day`, 
    h.time AS `hour`, 
    m.time AS `minutes`
    FROM (
             SELECT 
            SUM( t.time ) AS `time`
             FROM (
                    SELECT 
                    COUNT( DISTINCT WEEK( `timestamp` ) ) AS `time`
                FROM table
                    WHERE 
                    userid =  "1"
                    AND 
                    `timestamp` > DATE_SUB( NOW( ) , INTERVAL 1 MONTH ) 
                    GROUP BY MONTH( `timestamp` )
                    ) t
         ) w, 
        (
             SELECT 
            SUM( t.time ) AS `time`
             FROM (
                    SELECT 
                    COUNT( DISTINCT DAY( `timestamp` ) ) AS `time`
                    FROM table
                    WHERE 
                    userid =  "52"
                    AND 
                    `timestamp` > DATE_SUB( NOW( ) , INTERVAL 1 MONTH ) 
                    GROUP BY MONTH( `timestamp` )
             ) t
            ) d,
         (
        SELECT 
            SUM( t.timestamp ) AS `time`
            FROM (
                SELECT 
                    COUNT( DISTINCT HOUR( `timestamp` ) ) AS `time`
                    FROM table
                    WHERE 
                    userid =  "1"
                    AND 
                    `timestamp` > DATE_SUB( NOW( ) , INTERVAL 1 MONTH ) 
                GROUP BY DAY( `timestamp` )
                 ) t
            ) h, 
        (
            SELECT 
            SUM( t.timestamp ) AS `time`
            FROM (
                SELECT 
                    COUNT( DISTINCT MINUTE( `timestamp` ) ) AS `time`
                 FROM table
                WHERE 
                    userid =  "1"
                AND 
                    `timestamp` > DATE_SUB( NOW( ) , INTERVAL 1 MONTH ) 
                    GROUP BY HOUR( `timestamp` )
             ) t
         ) m 
```

这项任务似乎太过分了，也许有人有更好的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T03:47:06.107

```
SELECT userid, SUM(MINUTE(timestamp)) AS minutes, SUM(MINUTE(timestamp))/60 AS hours, SUM(MINUTE(timestamp))/(60*24) AS days, SUM(MINUTE(timestamp))/(60*24*7) AS weeks
FROM Table
GROUP BY userid 
```

如果需要，`ROUND(SUM(MINUTE(timestamp)), 0)`请在需要整数时使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T05:40:06.143

我不清楚你想要“总计”什么。

如果您想确定用户在一个月内的任何给定分钟是否有“命中”（或您存储在表中的任何事务），然后您想计算一个“分钟周期”的数量用户点击的月份：

```
 SELECT t.userid
      , COUNT(DISTINCT DATE_FORMAT(t.timestamp,'%Y-%m-%d %H:%i')) AS minutes
      , COUNT(DISTINCT DATE_FORMAT(t.timestamp,'%Y-%m-%d %H'   )) AS hours
      , COUNT(DISTINCT DATE_FORMAT(t.timestamp,'%Y-%m-%d'      )) AS days
      , COUNT(DISTINCT DATE_FORMAT(t.timestamp,'%X-%V'         )) AS weeks
 FROM mytable t
WHERE t.timestamp >= '2012-06-01'
  AND t.timestamp <  '2012=07-01'
GROUP BY t.userid 
```

这样做的目的是获取每个时间戳，并将其放入“桶”中，方法是切断秒、切断分钟、切断时间等。

基本上，我们正在获取时间戳（例如`'2012-07-25 23:15:30'`）并将其分配给

```
minute '2012-07-25 23:15'
hour   '2012-07-25 23'
day    '2012-07-25' 
```

的时间戳 `'2012-07-25 23:25:00'`将被分配给

```
minute '2012-07-25 23:25'
hour   '2012-07-25 23'
day    '2012-07-25' 
```

然后我们遍历并计算我们分配时间戳的不同存储桶的数量。如果这是该用户在该月的所有点击量，则查询将返回 2 表示分钟数，返回 1 表示所有其他周期计数。

对于一个月内有单次点击的用户，该用户的所有计数都将为 1。

对于在同一分钟内获得所有“命中”的用户，查询将再次为所有计数返回 1。

（对于一个月内没有“点击”的用户，不会返回任何行。（如果您想返回零计数，则需要加入另一个行源以获取用户列表。）

对于在一天内每秒都有“命中”的用户，此查询将返回与示例中用户 ID 2 显示的计数类似的计数。

这个结果集为您提供了一个月内用户活动的一种指示……用户在一个月内有多少“分钟时段”处于活动状态。

可以为“天”返回的最大值是该月的天数。“小时”返回的最大可能值将是该月时间中天数的 24 倍。“分钟”返回的最大可能值将是该月天数的 1440 倍。

但同样，我并不完全清楚您想要返回什么结果集。但这似乎比以前“选择”答案中的结果集更合理。

# php - 如何从 PHP OpenSSL 库中的现有 RSA 公钥获取模数和指数

> ID：11681133
> 
> 赞同：2
> 
> 时间：2012-07-27T03:41:32.217
> 
> 标签：php, openssl, rsa

有私钥、公钥、x509 Pem 文件。我想从这些文件中获取有关 RSA 公钥的信息。

我可以通过shell脚本来确认它，如下所示。$ openssl x509 -in cert.pem -text

...

```
 Subject Public Key Info:
        Public Key Algorithm: rsaEncryption
        RSA Public Key: (2048 bit)
            Modulus (2048 bit):
                00:e1:92:dc:05:84:c7:e1:2d:db:f3:48:84:90:32:
                ...
                da:7d:2f:95:d2:ab:28:6e:6c:be:0a:af:e0:cb:24:
                18:db
            Exponent: 65537 (0x10001) 
```

...

我可以以同样的方式在 PHP OpenSSL 库中获取 Modulus 和 Exponent 的值吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-01-04T07:04:13.997

您可以尝试以下方法：

```
$key = file_get_contents("root/to/private_key.pem");
$data = openssl_pkey_get_private($key);
$data = openssl_pkey_get_details($data);

$key = $data['key'];
$modulus = $data['rsa']['n'];
$exponent = $data['rsa']['e'];

echo "Modulus: $modulus <br>Exponent: $exponent"; 
```

如果*回显* `$exponent`在屏幕上没有显示任何内容，您可以尝试`var_dump($exponent)`，否则`var_dump($data)`您会看到一些奇怪的字符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T13:58:33.453

使用[phpseclib，一个纯 PHP X.509 实现](http://phpseclib.sourceforge.net/)：

```
$x509 = new File_X509();
$cert = $x509->loadX509('-----BEGIN CERTIFICATE-----
MIIDITCCAoqgAwIBAgIQT52W2WawmStUwpV8tBV9TTANBgkqhkiG9w0BAQUFADBM
MQswCQYDVQQGEwJaQTElMCMGA1UEChMcVGhhd3RlIENvbnN1bHRpbmcgKFB0eSkg
THRkLjEWMBQGA1UEAxMNVGhhd3RlIFNHQyBDQTAeFw0xMTEwMjYwMDAwMDBaFw0x
MzA5MzAyMzU5NTlaMGgxCzAJBgNVBAYTAlVTMRMwEQYDVQQIEwpDYWxpZm9ybmlh
MRYwFAYDVQQHFA1Nb3VudGFpbiBWaWV3MRMwEQYDVQQKFApHb29nbGUgSW5jMRcw
FQYDVQQDFA53d3cuZ29vZ2xlLmNvbTCBnzANBgkqhkiG9w0BAQEFAAOBjQAwgYkC
gYEA3rcmQ6aZhc04pxUJuc8PycNVjIjujI0oJyRLKl6g2Bb6YRhLz21ggNM1QDJy
wI8S2OVOj7my9tkVXlqGMaO6hqpryNlxjMzNJxMenUJdOPanrO/6YvMYgdQkRn8B
d3zGKokUmbuYOR2oGfs5AER9G5RqeC1prcB6LPrQ2iASmNMCAwEAAaOB5zCB5DAM
BgNVHRMBAf8EAjAAMDYGA1UdHwQvMC0wK6ApoCeGJWh0dHA6Ly9jcmwudGhhd3Rl
LmNvbS9UaGF3dGVTR0NDQS5jcmwwKAYDVR0lBCEwHwYIKwYBBQUHAwEGCCsGAQUF
BwMCBglghkgBhvhCBAEwcgYIKwYBBQUHAQEEZjBkMCIGCCsGAQUFBzABhhZodHRw
Oi8vb2NzcC50aGF3dGUuY29tMD4GCCsGAQUFBzAChjJodHRwOi8vd3d3LnRoYXd0
ZS5jb20vcmVwb3NpdG9yeS9UaGF3dGVfU0dDX0NBLmNydDANBgkqhkiG9w0BAQUF
AAOBgQAhrNWuyjSJWsKrUtKyNGadeqvu5nzVfsJcKLt0AMkQH0IT/GmKHiSgAgDp
ulvKGQSy068Bsn5fFNum21K5mvMSf3yinDtvmX3qUA12IxL/92ZzKbeVCq3Yi7Le
IOkKcGQRCMha8X2e7GmlpdWC1ycenlbN0nbVeSv3JUMcafC4+Q==
-----END CERTIFICATE-----');

$pubkey = $x509->getPublicKey();
$parts = $pubkey->getPublicKey(CRYPT_RSA_PUBLIC_FORMAT_RAW);
echo $parts['e'] . "\r\n\r\n" . $parts['n']; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T04:00:37.873

你可能想要`openssl_pkey_get_details($key)`.

`openssl_pkey_get_private()`这需要从or (?)生成的密钥资源`openssl_pkey_get_public()`，并将返回一个数组，其中包含键`bits`、`key`、`type`和第四个键，该键是`rsa`、`dsa`或`dh`取决于键之一。第四个键映射到另一个具有更多细节的数组；对于 RSA 密钥，此子数组包含您的模数`n`和指数`e`。

看到[这个页面](http://us.php.net/manual/en/function.openssl-pkey-get-details.php)和相关页面。

（这些都没有经过测试；让我知道这是否适合你！）

# java - 如何从java类中获取值并将其映射到jsp中的select语句？

> ID：11681136
> 
> 赞同：0
> 
> 时间：2012-07-27T03:42:03.373
> 
> 标签：java, jsp, struts

我在我的 java 类 DetailsForm 中设置 planValue 的值。我需要在 jsp 中获取该属性值。我将如何得到它？我在 jsp 中使用与 java 中的 planValue 相同的名称。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T06:21:22.093

使用类似这样的 Servlet 代码：

```
protected void doGet(HttpServletRequest request,
                HttpServletResponse response) throws ServletException, IOException         {
        performTask(request, response);
    }

protected void doPost(HttpServletRequest request,
        HttpServletResponse response) throws ServletException, IOException {
    performTask(request, response);
}

public void performTask(HttpServletRequest request,
        HttpServletResponse response) throws ServletException, IOException {               //create your object
            DetailsForm detailsForm = new DetailsForm();
            //set planValue
            detailsForm.setPlanValue("some plan value");
            //set your object as attribute and use forward
    request.setAttribute("detailsForm", detailsForm);
            //relative path to your JSP
    request.getRequestDispatcher("/pages/some.jsp").forward(request,
            response);

} 
```

还有你的 some.jsp

```
<%@ page language="java" contentType="text/html; charset=UTF-8"
pageEncoding="UTF-8"%>
<html>
<head>
<title>
Some JSP
</title>
<head>
<body>
${detailsForm.plainValue}
</body>
</html> 
```

并且您需要在 DetailsForm 类中为 plainValue 提供 getter 方法。

# pytest - py.test 和拆解

> ID：11681137
> 
> 赞同：0
> 
> 时间：2012-07-27T03:42:09.680
> 
> 标签：pytest

我正在 py.test 中开发一个测试套件，它连接到网络硬件设备并更改设置等。每种测试方法都会更改某些设置组合，然后断言结果。如何进行特定于测试的拆解，而无需在每次测试后重置所有设备设置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T22:28:06.307

您是否可以记住“以前的”设置设置，然后只在下一个设置中进行必要的设置（通过比较“内存”与“想要的”设置）？

# batch-processing - 批量搜索txt，提取内容，将内容合并到一个txt中

> ID：11681140
> 
> 赞同：0
> 
> 时间：2012-07-27T03:42:27.820
> 
> 标签：batch-processing, batch-file

*   “主”文件夹

    *   文件夹-“其他”

        *   文件夹-"A"
            文件夹-"B"
            (...)
            文件夹-"N"

嗨，我有一个主文件夹、一个辅助文件夹及其几个名为“文件夹-A、文件夹-B ...文件夹-N”的子文件夹。每个孩子都有包含大量信息的 txt 文件。

我想阅读每个文件夹（仅文件夹 A 到 N），收集每个 txt 中的信息并将这些信息合并为一个 Big.txt。用户还将知道分析和合并了多少个 txt 文件。

目前还没有什么好结果。有什么帮助吗？

```
@echo off
set DRV1=c:\Main\Other
set DRV2=c:\Big
cd %DRV1%
        setlocal enabledelayedexpansion
        set /a count=0 
          for %%f in (*.txt) do (
            for /f "delims= " %%a in (%%f) do ( 
            set /a count+=1 
            echo %%a >> %DRV2%\Big.txt
          )
     )
endlocal
echo There were processed %count% txt files ... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T22:58:15.600

这里有几个问题：

*   首先，您缺少对要扫描 .txt 文件的目录的迭代。
*   然后，您尝试在内部循环中逐行读取文件`FOR`，但这并不能正常工作 - 而且也没有必要，因为您可以使用`TYPE`将每个 .txt 文件的内容写入/附加到另一个文件。
*   最后，您不需要`SetLocal EnableDelayedExpansion`执行此任务 -如果任何 .txt 文件的文件名中有感叹号，*它甚至会导致问题*`!`- 感叹号将被延迟扩展吃掉，因为`CMD.EXE`认为它是变量名的一部分，从而破坏文件名，从而导致文件的内容不包含在`Big.txt`. 顺便说一句，在我摆弄解决方案时我不会知道这一点 - 因为我实际上有 .txt 文件，文件名中有一个感叹号用于测试:)

长话短说，这就是我最终得到的结果：

```
@ECHO OFF
SET DRV1=c:\Main\Other
SET DRV2=c:\Big
SET /a count=0 
:: iterate over all directories in %DRV1%
FOR /f "tokens=*" %%F IN ( 'dir /b /a:d %DRV1%' ) DO ( 
    :: for each directory, iterate over all .txt files
    FOR %%G IN ( %DRV1%\%%F\*.txt ) DO (
        SET /a count+=1 
        TYPE %%G >> %DRV2%\Big.txt
    )
)
ECHO There were processed %count% txt files ... 
```

# brunch - 早午餐你如何共享/混合代码，这些代码会根据完成的应用程序的运行位置而变化（应用程序是 3rd 方网站的小部件）？

> ID：11681151
> 
> 赞同：0
> 
> 时间：2012-07-27T03:44:27.623
> 
> 标签：brunch

我正在尝试构建一个将托管在 3rd 方网站上的小部件。它所依赖的一些外部文件需要从不同环境中的不同来源中提取，即在开发中，它应该从 localhost 中提取一些文件，在登台时应该从 staging-domain.com 中提取它们，在生产中，它应该从 www.xyz.com 拉他们

我的黑客解决方案如下 -

在`application.coffee`：

```
prodApiHost = 'http://productionhost.com/api'

@APIHost = do ->
  if ( window.location.port.match(/^3/) || window.location.host.match(/^(localhost)/i) || window.location.host.match(/xyz.staging/i ))
    if window.location.host.match(/^(localhost)/i) || window.location.port.match(/^3/)
      window.location.protocol + '//' + window.location.hostname + ':' + window.location.port + '/api'
    else
      window.location.protocol + '//' + window.location.host + '/api'
  else
    prodApiHost 
```

然后，在我需要使用该 URL 的模型中，我执行以下操作

在`my_model.coffee`：

```
some_attribute: namespacedApp.APIHost 
```

我*相信*有更好的方法......任何指针/帮助都非常感谢！

**编辑**

我找到了另一种方法。我可以像这样在文件中放置相同的`APIHost`函数：`initialize.coffee`

```
application = require 'application'
application.prodApiHost = 'http://productionhost.com/api'

$ ->
  application.APIHost = do ->
    if ( window.location.port.match(/^3/) || window.location.host.match(/^(localhost)/i) || window.location.host.match(/xyz.staging/i ))
      if window.location.host.match(/^(localhost)/i) || window.location.port.match(/^3/)
        window.location.protocol + '//' + window.location.hostname + ':' + window.location.port + '/api'
      else
        window.location.protocol + '//' + window.location.host + '/api'
    else
      application.prodApiHost

application.initialize()
Backbone.history.start() 
```

现在 fn 在应用程序中随处可用。仍然不确定这是最好的解决方案。还有其他建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T04:10:27.220

我会创建一个小型早午餐插件，它将检查是否启用了缩小（以确定生产环境）（`config.minify`）并使其添加

```
if (window.brunch == null) window.brunch = {};
window.brunch.environment = ... (development / production) 
```

然后签入您的应用

```
if (window.brunch.environment === 'production') {...} else {...} 
```

我认为分离 dev / prod 环境是一件非常普遍的事情，并且在早午餐中将为此目的接收“环境”抽象。

# neural-network - 算法生成

> ID：11681158
> 
> 赞同：1
> 
> 时间：2012-07-27T03:45:46.120
> 
> 标签：neural-network, genetic-algorithm

我有一组相当大（不是太大，但可能超过 50 个）必须放在一组数据上的条件（或者更确切地说，应该对数据进行操作以适应条件）。

例如，假设我有一个长度为 n 的二进制数序列，

如果 n = 5，则数据中的元素可能是 {0,1,1,0,0} 或 {0,0,0,1,1} 等...

但是可能有一组条件，例如

1.  x_3 + x_4 = 2
2.  总和（x_even）<= 2
3.  x_2*x_3 = x_4 模 2

ETC...

因为条件非常复杂，因为它们来自实验（尽管它们可以以逻辑形式写下来）并且难以诊断，所以我想改用大量有效数据的样本集。即，我知道的数据满足条件并且是一个相当大的集合。也就是说，收集数据比推断数据必须遵守的条件更容易。

话虽如此，基本上我所做的与神经网络非常相似。不同之处在于，我想要一个实际的算法，在某种意义上是最优的，在某种形式的代码中，我可以运行而不是网络。

可能不清楚我实际上想要做什么。我所拥有的是一组独特且明确但不适合我的需求的原始格式的数据（从某种意义上说数据量太大）。

我需要将数据映射到另一个在某种程度上实际上是模棱两可的集合，但也具有所有数据都遵循的某些特定约束集（某些事情不可能发生，而其他事情是首选）。

独特的约束和偏好很难弄清楚。也就是说，从非歧义集到歧义集的映射很难描述（这就是它是歧义的原因）。实际上，我们的目标是尽可能提供正确的约束来获得一个明确的地图。

所以，在我最初的例子中，我被给定（或提供）了一组元素，并且需要一些方法来导出类似于我列出的约束列表。

从某种意义上说，我只是拥有一组有效数据，并对其进行非常类似于神经网络的训练。

然后，在这个“训练”之后，我得到了映射函数，然后我可以在我的数据集中的任何元素上使用它，它将产生一个满足约束的新元素，或者如果它不能，将尽可能接近一个明确的结果。

神经网络和我想要实现的主要区别是我希望能够使用一种算法来编写代码，而不是必须运行神经网络。这里的不同之处在于算法可能会简单得多，不需要潜在的再训练，而且速度要快得多。

这是一个简单的例子。

假设我的“训练集”是二进制序列和映射

01000 => 10000 00001 => 00010 01010 => 10100 00111 => 01110

然后从“Magical Algorithm Finder”（tm）我会得到一个映射

f(x) = x rol 1 (rol = 向左旋转)

或者任何一种人们想要表达的方式。

然后我可以简单地将 f(x) 应用于任何其他元素，例如 x = 011100 并且可以应用 f 来生成希望明确的输出。

当然有很多这样的函数可以在这个例子中使用，但目标是提供足够的数据集来缩小范围，希望能找到一些最有意义的函数（至少总是能正确映射训练集） .

在我的特定情况下，我可以轻松地将我的问题转换为将长度为 m 的二进制数字集映射到长度为 n 的基 B 数字集。约束防止某些数字出现倒数。例如，映射是单射的，但不是满射的。

如果需要的话，我的算法可以是一个简单的集合，如果语句作用于数字。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T17:42:38.260

我认为您在这里寻找的是学习分类器系统[LCS-wiki](http://en.wikipedia.org/wiki/Learning_classifier_system)的应用程序。实际上有相当多的 LCS 开源应用程序可用，但您可能需要对参数进行试验才能获得良好的结果。

LCS/XCS/ZCS 具有您正在寻找的功能，包括可以进行大量优化的单个规则、减少规则集的压力，当然还有人类可读/可理解的规则集。（不像神经网络）

# php - iPhone 应用程序与服务器通信

> ID：11681159
> 
> 赞同：0
> 
> 时间：2012-07-27T03:45:51.687
> 
> 标签：php, objective-c, ios, authentication, networking

好的。我是一个新开发人员，并没有在网络方面做太多工作（一般来说，不是特别是 obj-c）。基本上，我需要记录一个文件（我有这样做的代码），然后将其上传到服务器。我查看了上传到服务器的代码，似乎我需要从服务器端获得的只是一个带有 php 脚本的 html 上传页面，我有。另一种选择是 ftp/sftp，尽管这将更难实现。问题是我需要对上传进行身份验证，并且最好使用安全（https）上传，并使用用户名和密码。我无法弄清楚如何做到这一点。我还需要服务器向应用程序发回响应。

此外，他们是否有任何框架可以更轻松地上传文件？我知道有 asihttprequest，但是已经停止了......

我需要做什么才能让服务器进行身份验证和经过身份验证的上传，并能够将数据返回给应用程序？很抱歉提出这样一个 n00by 问题，但如果你能提供帮助，那就太好了。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T04:51:02.730

查看[AFNetworking](https://github.com/AFNetworking/AFNetworking)。我真的很喜欢使用 AFNetworking 进行文件下载和上传。[常见问题解答](https://github.com/AFNetworking/AFNetworking/wiki/AFNetworking-FAQ)甚至提供了有关如何上传文件和下载文件的示例。服务器端只需要一个 PHP 脚本来处理 POST 文件上传。

# javascript - Ticker 在选定的页面上不起作用？

> ID：11681162
> 
> 赞同：0
> 
> 时间：2012-07-27T03:45:57.063
> 
> 标签：javascript, jquery, html, css, ticker

我的网站是[www.codtelevision.com](http://www.codtelevision.com)。

如果你看主页，它是完美的，但当你转到另一个页面时，它很大，看起来很奇怪。我该如何解决它，有什么问题？谢谢！如果您需要一些代码，我很乐意发布一些代码，或者您可以在我的网站上查看。

我刚刚查看了chrome开发者工具，发现了这个错误：

```
Uncaught ReferenceError: jQuery is not defined 
```

我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T03:48:38.490

您在其他页面上的 jQuery 代码之后包含了 jQuery（它需要在之前包含）。因此，您最终得到的只是一段代码，它不能用作股票代码。把电话放在它前面，你会很好的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T03:50:15.750

这是因为随着添加更多内容并且所有内容都定位为绝对位置，自动收报机会扩展高度，因此您需要定位绝对以外的其他东西，可能是相对的，或者排列元素以便它们有扩展空间

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T03:52:13.110

我认为您忘记了`ticker-active`向其他页面添加课程。并确保您调用了初​​始化 javascript 函数。

# mysql - 将 MySQL 跨操作系统与 Dropbox 同步

> ID：11681163
> 
> 赞同：2
> 
> 时间：2012-07-27T03:46:03.860
> 
> 标签：mysql, synchronization, cross-platform, dropbox

我正在尝试找出一种方法，让 Mac OS X 和 Windows 使用 Dropbox 同步和使用 MySQL 数据库。问题是“是否有可能做到这一点？，为这两个操作系统创建一个 MySQL 目录”。我在此找到了一些关于“MySQL 服务器实例”的内容：[SQL Server and MySQL Syncing](https://stackoverflow.com/questions/8753582/sql-server-and-mysql-syncing)但我还没有接近理解它。这是我正在寻找的解决方案吗？据我目前的理解，它允许单个 MySQL 服务器实例化其服务器 1 中的 2 个用于 Mac，另一个用于 Windows。这些服务器会分别接收 Windows 和 Mac 命令并允许它们读/写/更新吗？如果是这样，我将继续阅读并尝试理解它。或者，如果有人有更好更简单的解决方案，请告诉我。

谢谢大家。

# oracle - Oracle PL/SQL 数组的索引是从 0 开始还是从 1 开始？

> ID：11681166
> 
> 赞同：11
> 
> 时间：2012-07-27T03:46:10.300
> 
> 标签：oracle, plsql, oracle-apex

我面前有一段这样的代码：

```
FOR row IN 1..l_RowSet(1).count 
LOOP
   l_a_variable := l_RowSet(1)(row);
END LOOP; 
```

`l_RowSet`是 ApEx 类型 -- `apex_plugin_util.t_column_value_list`-- 定义如下：

```
type t_column_value_list  is table of wwv_flow_global.vc_arr2 index by pls_integer; 
```

其中`wwv_flow_global.vc_arr2`定义为

```
type vc_arr2 is table of varchar2(32767) index by binary_integer; 
```

从函数`vc_arr2`传回我的代码`apex_plugin_util.get_data`。vc_arr2 是按*列*号而不是按行来索引的。

尽我所能，这意味着数据有效地存储在二维数组中，按列索引，然后按行索引。

使用 LOOP 语句时，它是从零开始索引还是从一开始？因为在我看来，我应该能够使该 LOOP 变得多余，即：

```
l_a_variable := l_RowSet(1)(1); 
```

但我需要提前知道是否将 0 或 1 作为初始行。

我在 Oracle 文档中找不到明确的答案（不出所料，“索引”是一个相当广泛使用的术语），并且通过 SO 也没有向其他任何人展示同样的问题。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-27T03:59:08.910

关联数组不一定是密集的。索引 0 处可能有一个元素，索引 -1 处可能有一个元素，索引 1 处可能有一个元素。或者您可能在索引 17、42 和 127 处有元素。您发布的代码暗示关联数组是密集的，并且索引从 1 开始。

在特定情况下，`apex_plugin_util.get_data`集合应该是密集的，并且应该从 1 开始。如果循环实际上除了您发布的内容之外没有做任何事情，您可以通过获取 的最后一个元素来替换它`l_RowSet(1)`，即

```
l_a_variable := l_RowSet(1)(l_RowSet(1).count); 
```

# javascript - 覆盖自动完成的菜单渲染以限制结果

> ID：11681180
> 
> 赞同：0
> 
> 时间：2012-07-27T03:48:12.110
> 
> 标签：javascript, jquery, jquery-ui, jquery-ui-autocomplete

我对javascript的理解太有限了，无法做到这一点。`_renderMenu`我已经看到通过在这里用另一个 jQuery 插件覆盖解决了这个问题： [Limit the result in jQuery Autocomplete](https://stackoverflow.com/questions/4071887/limit-the-result-in-jquery-autocomplete) but not with the jQuery UI plugin。如何在 jQuery UI 自动完成上使用限制？

在**jquery-ui.js 中**，我修改了此代码以限制结果，但是我想单独保留库代码并在客户端代码中覆盖它。

```
_renderMenu: function( ul, items ) {
    var self = this;
    $.each( items, function( index, item ) {
        self._renderItem( ul, item );
    });
} 
```

建议-search.js：

```
 $("#global-search").autocomplete({
                source: response,
                minLength: 1,
                delay: 100,
                select: function (event, ui) {
                    //bzzz
                }

            }).data( "autocomplete" )._renderItem = function( ul, item ) {

                var imgFilename = item.filename;
                imgFilename = imgFilename.replace(/ /g,"_");

                return $( "<li></li>" )
                    .data( "item.autocomplete", item )
                    .append('<a class="clearfix"><img src="http://localhost/img/' + imgFilename + '" width="40" height="63" />'+
                            '<div class="ac-menu-item"><div><span class="ac-publish-title">' + item.title + '</span></div><div class="faded">'+item.year+'</div></div></a>' )
                    .appendTo(ul);

            }

        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T07:37:02.090

最简单的方法是让您的源回调函数限制它放入返回数组的项目数。

# javascript - 扩展和插件之间的通信

> ID：11681181
> 
> 赞同：0
> 
> 时间：2012-07-27T03:48:17.607
> 
> 标签：javascript, firefox, firefox-addon, npapi, browser-plugin

我写了一个 Firefox 扩展来查询一些浏览器信息。我需要将此信息从我的扩展程序发送到 NPAPI 插件。

我怎样才能做到这一点？有没有办法在 NPAPI 插件和扩展的 JavaScript 代码之间进行通信？我很感激任何有用的链接或代码片段。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T09:28:21.260

如果插件提供了[脚本接口](http://colonelpanic.net/2009/08/building-a-firefox-plugin-part-three/)，扩展程序可以在需要发送信息时调用它的函数。

您需要有权访问插件元素，例如：

*   `var plug = someDocument.getElementById('yourPluginId');`
*   或者通过查找您想要的没有特定 ID的`embed`/元素`object`

要查找没有特定的元素`id`，您可以[使用 XPath](https://developer.mozilla.org/en/Introduction_to_using_XPath_in_JavaScript)或使用[`getElementsByTagName()`](https://developer.mozilla.org/en/DOM/document.getElementsByTagName).
请记住，如果您不使用特定于插件的类型，则 mime 类型可能不一定能识别您的插件。除了`type`属性之外，您可能还需要检查自定义插件名称/版本信息。

一旦你有了插件元素，你就可以简单地从 JavaScript 中调用函数（例如`plug.someFunction(someData);`）。

# asp.net - 跨域身份验证和 CORS

> ID：11681182
> 
> 赞同：0
> 
> 时间：2012-07-27T03:48:30.507
> 
> 标签：asp.net, security, authorization, forms-authentication, cors

我有一个要求，我的移动 html 网站（site1）需要重新使用另一个网站（site2）的登录模块。我可以在 site2 中创建一个 asp.net Web 方法并跨域发布用户名和密码并使用 CORS 获取响应吗？

如果用户未通过身份验证，我想限制对 site1 中其余页面的访问。一旦通过身份验证，如何确保对 site1 的同一会话中的后续请求也经过身份验证？我们不能跨域设置 cookie 我们可以使用 cors 请求吗？我们可以吗？

**编辑：** 我计划在 site1 中创建一个 HTML 登录页面，并使用 ajax 将用户名/密码提交到 site2 中的登录页面，该页面根据会员数据库（site1 也需要使用）验证用户名和密码。我想尽可能地重用site2中的现有功能。

# excel - 加快数据提取到 Excel

> ID：11681184
> 
> 赞同：0
> 
> 时间：2012-07-27T03:48:40.333
> 
> 标签：excel, vba

我目前正在使用 VBA 来运行存储过程和已提取到表中的存储数据。然后，VBA会相应地查询数据中的所有数据，并将其放入excel中。

这里的问题是，VBA 需要很长时间才能将所有数据（大约 100k 行数据）提取到 excel 中。有没有其他方法可以加快这个过程？以下是我的代码的一部分。粗体字是插入到 excel 代码中。

```
'Row number where data inserting starts
        Do
            current_sheet = owb.ActiveSheet

            With current_sheet
                'Insert header to worksheet in first row, ie. A1, B1, C1
                For i = 0 To data_cols.GetLength(0) - 1
                    cell = data_cols(i, 0) & header_row_num 'Change to header_row_num
                    .Range(cell).Value = data_cols(i, 1)
                Next i
            End With

            row_count = header_row_num + 1 'Change the first row count to a row after header_row_num
            'Insert data to worksheet
            While rs.EOF = False

                With current_sheet
                    'Set format of specic columns before inserting data

                    .Columns("A").NumberFormat = "@"

                    .Columns("B").NumberFormat = "@"

                    .Columns("C").NumberFormat = "@"

                    .Columns("D").NumberFormat = "@"

                    .Columns("E").NumberFormat = "@"

                    .Columns("F").NumberFormat = "@"

                    .Columns("G").NumberFormat = "@"

                    .Columns("H").NumberFormat = "@"

                    .Columns("I").NumberFormat = "@"

                    .Columns("J").NumberFormat = "@"

                    .Columns("K").NumberFormat = "@"

                    .Columns("L").NumberFormat = "@"

                    .Columns("M").NumberFormat = "@"

                    .Columns("N").NumberFormat = "@"

                    .Columns("O").NumberFormat = "@"

                    .Columns("P").NumberFormat = "@"

                    .Columns("Q").NumberFormat = "@"

                    .Columns("R").NumberFormat = "@"

                    .Columns("S").NumberFormat = "@"

                    **'Start inserting data
                    For i = 0 To data_cols.GetLength(0) - 1
                        'Get the cell name
                        cell = data_cols(i, 0) & row_count
                        'Populate data to the cell
                        If IsDBNull(rs.Fields(data_cols(i, 2)).Value()) Then
                            .Range(cell).Value = " "
                        Else
                            .Range(cell).Value = rs.Fields(data_cols(i, 2)).Value()
                        End If
                    Next i
                End With
                rs.MoveNext()
                'Indicates next row
                row_count += 1**

                If row_count > 60000 Then
                    owb.Worksheets.Add(, current_sheet)
                    need_new_sheet = True
                    Console.WriteLine("Added new sheet to workbook...")
                    Exit While
                Else
                    need_new_sheet = False
                End If

            End While
        Loop While (need_new_sheet And rs.EOF = False) 
```

如果您需要知道某些变量。

```
row_count = header_row_num + 1 'Change the first row count to a row after header_row_num

oxl = CreateObject("Excel.Application")
    oxl.Visible = False
    owb = oxl.Workbooks.Add

Dim data_cols(,) As String = {{"A", "Name", "NAME"}, _
                           {"B", "Age", "AGE"}}  (Not real columns, example) 
```

任何建议或想法将不胜感激。提前致谢 ：）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-27T04:24:57.980

在 Excel 中填写 100k 行肯定需要时间。

这是您可以做的以尽量减少时间

1.  `oxl.ScreenUpdating = False`在宏的开头使用，`True`最后设置为。
2.  您可能希望将数据存储在数组中，然后最后将数组一次性写入 Excel。这肯定会减少执行时间
3.  Excel 2007 及更高版本 Excel 的行数限制为 1048576 行，因此如果您超过该限制，您可能需要考虑这一点。
4.  `Console.WriteLine("Added new sheet to workbook...")`是VB.net。`Debug.print`如果您使用 VBA，请使用。
5.  顺便说一句，这不会对速度产生显着影响，但您可以编写以下代码

哪个是

```
.Columns("A").NumberFormat = "@"
.Columns("B").NumberFormat = "@"
'
'
'
.Columns("R").NumberFormat = "@"
.Columns("S").NumberFormat = "@" 
```

作为

```
.Columns("A:S").NumberFormat = "@" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T19:16:48.757

最快的方法是`CopyFromRecordset`。

来自 MSDN：

* * *

> ```
> expression.CopyFromRecordset(Data, MaxRows, MaxColumns) 
> ```
> 
> `expression`： 必需的。`Range`返回对象的表达式。
> 
> `Data`：必需的变体。`Recordset`要复制到范围中的对象的名称。
> 
> `MaxRows`：可选变体。要复制到工作表上的最大记录数。如果省略此参数，则会复制 Recordset 对象中的所有记录。
> 
> `MaxColumns`：可选变体。要复制到工作表上的最大字段数。如果省略此参数， `Recordset`则复制对象中的所有字段。

* * *

例如，在您的情况下，只需键入：

```
Range("A2").CopyFromRecordset rs 
```

# c++ - 在 C++ 中重载运算符 + 和 -

> ID：11681186
> 
> 赞同：2
> 
> 时间：2012-07-27T03:49:30.347
> 
> 标签：c++, operator-overloading, overloading

我有两个关于超载的问题。

1-为什么有时会使重载运算符成为非成员函数？

```
friend Class operator-(const Class &rhs); 
```

2-有什么区别

```
Class operator+(const Class &c1, const Class &c2); 
```

和

```
Class operator+(const Class &rhs); 
```

如果我想添加两个对象`C3 = C1 + C2`？

任何帮助表示赞赏...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-27T04:07:55.513

如果将二元运算符作为成员函数重载，它最终会不对称：左操作数必须是运算符重载的确切类型，但右操作数可以是任何可以转换为正确类型的东西。

如果使用非成员函数重载运算符，则可以转换*两个操作数以获得正确的类型。*

你的第二点看起来像是同一点的一个具体例子，根本没有任何分开的东西。这是我正在谈论的一个具体示例：

```
class Integer {
    int val;
public:
    Integer(int i) : val(i) {}
    operator int() { return val; }

    // Integer operator+(Integer const &other) const { return Integer(val + other.val); }

    friend Integer operator+(Integer const &a, Integer const &b) { 
        return Integer(a.val + b.val);
    }
};

int main() { 
    Integer x(1);

    Integer y = x + 2; // works with either operator overload because x is already an Integer

    Integer z = 2 + x; // works with global overload, but not member overload because 2 isn't an Integer, but can be converted to an Integer.
    return 0;
} 
```

另请注意，即使`friend`函数的定义在 的类定义中`Integer`，它被声明为友元这一事实意味着它*不是*成员函数——将其声明为`friend`使其成为全局函数，而不是成员。

底线：这种重载*通常*应该作为自由函数而不是成员函数来完成。为用户提供正确（极大地）工作的运算符比“更面向对象”之类的理论考虑更重要。必要时，比如当操作符的实现需要是虚拟的时，你可以做一个两步的版本，你提供一个（可能是虚拟的）成员函数来做真正的工作，但重载本身是一个自由函数，在其左操作数上调用该成员函数。一个相当常见的例子是`operator<<`层次结构的重载：

```
class base { 
    int x;
public:
    std::ostream &write(std::ostream &os) const { 
        return os << x;
    }
};

class derived : public base { 
    int y;
public:
    std::ostream &write(std::ostream &os) const { 
        return (base::write(os) << y);
    }
};

std::ostream &operator<<(std::ostream &os, base const &b) {
    return b.write(os);
} 
```

这支持多态实现（以及访问基类的受保护成员，如有必要），而不会放弃操作符的正常特性来获取它。

将二元运算符重载为自由函数的主要例外是赋值运算符（`operator=`、`operator+=`、`operator-=`等`operator*=`）。转换会产生一个临时对象，无论如何您都不能分配给它，因此对于这种特殊情况，重载应该（实际上必须是）一个成员函数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-27T03:55:15.817

> 1-为什么有时会使重载运算符成为非成员函数？

这是选择的问题。您可以将其`operator +/-`设为类成员或使其成为免费`friend`函数。
~~如果它是一个自由函数，您提供的语法`operator -`是错误的`friend`，它应该采用 2 个参数（类似于`operator +`您的示例）。~~

> 2-有什么区别

如前所述，它只是语法不同。第一个应该是自由`friend`函数，第二个是`class`成员。

最重要的是，我相信将运算符保留为`class`成员方法比自由函数要好，因为：

1.  如果适用，成员方法可以访问`protected`基类的成员，但`friend`函数不能
2.  成员方法是更面向对象的方法，因为您关联了与类相关的方法

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T04:08:22.317

让重载的运算符成为朋友是一个更好的选择，因为以这个例子为例

```
class Comples
{
   public:
      Complex(float real, float imaginary);
      friend operator+ (const Complex &rhs);
   ...
}; 
```

通过让操作员成为朋友，您可以执行以下操作

```
Complex result1 = 5.0 + Comples(3.0, 2.0); 
```

和

```
Complex result1 = Comples(3.0, 2.0) + 5.0; 
```

遵守加法社区属性的规则。如果重载的运算符是成员函数，则无法实现这一点。这是由于编译器能够`Complex`在这种情况下根据需要隐式创建对象。因此，加法运算符作为朋友时的行为符合数学中的正常加法概念。

# spring - Spring 3.1 基于 Java 的配置——IllegalStateException

> ID：11681188
> 
> 赞同：0
> 
> 时间：2012-07-27T03:49:35.557
> 
> 标签：spring, configuration, illegalstateexception

我正在学习 Spring 教程，我有以下代码，使用基于 Java 的配置，但它不起作用。在我的类路径中，我有 Spring 3.1 jar，以及 asm-4.0.jar 和 cglib-2.2.2.jar。

MainApp.java：

```
package com.tutorialspoint;

import org.springframework.context.ApplicationContext;
import org.springframework.context.annotation.*;

public class MainApp {
    public static void main(String[] args) {
        ApplicationContext ctx = new AnnotationConfigApplicationContext(
                HelloWorldConfig.class);
        HelloWorld helloWorld = ctx.getBean(HelloWorld.class);
        helloWorld.setMessage("Hello World!");
        helloWorld.getMessage();
    }
} 
```

HelloWorldConfig.java：

```
package com.tutorialspoint;

import org.springframework.context.annotation.*;

@Configuration
public class HelloWorldConfig {
    @Bean
    public HelloWorld helloWorld() {
        return new HelloWorld();
    }
} 
```

HelloWorld.java：

```
package com.tutorialspoint;

public class HelloWorld {
    private String message;

    public void setMessage(String message) {
        this.message = message;
    }

    public void getMessage() {
        System.out.println("Your Message : " + message);
    }
} 
```

错误代码：

```
Exception in thread "main" java.lang.IllegalStateException: Cannot load configuration class: com.tutorialspoint.HelloWorldConfig
    at org.springframework.context.annotation.ConfigurationClassPostProcessor.enhanceConfigurationClasses(ConfigurationClassPostProcessor.java:456)
    at org.springframework.context.annotation.ConfigurationClassPostProcessor.processConfigurationClasses(ConfigurationClassPostProcessor.java:202)
    at org.springframework.context.annotation.ConfigurationClassPostProcessor.postProcessBeanDefinitionRegistry(ConfigurationClassPostProcessor.java:176)
    at org.springframework.context.support.AbstractApplicationContext.invokeBeanFactoryPostProcessors(AbstractApplicationContext.java:604)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:437)
    at org.springframework.context.annotation.AnnotationConfigApplicationContext.<init>(AnnotationConfigApplicationContext.java:68)
    at com.tutorialspoint.MainApp.main(MainApp.java:8)
Caused by: java.lang.VerifyError: class net.sf.cglib.core.DebuggingClassWriter overrides final method visit.(IILjava/lang/String;Ljava/lang/String;Ljava/lang/String;[Ljava/lang/String;)V
    at java.lang.ClassLoader.defineClass1(Native Method)
    at java.lang.ClassLoader.defineClassCond(Unknown Source)
    at java.lang.ClassLoader.defineClass(Unknown Source)
    at java.security.SecureClassLoader.defineClass(Unknown Source)
    at java.net.URLClassLoader.defineClass(Unknown Source)
    at java.net.URLClassLoader.access$000(Unknown Source)
    at java.net.URLClassLoader$1.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at net.sf.cglib.core.AbstractClassGenerator.<init>(AbstractClassGenerator.java:38)
    at net.sf.cglib.core.KeyFactory$Generator.<init>(KeyFactory.java:127)
    at net.sf.cglib.core.KeyFactory.create(KeyFactory.java:112)
    at net.sf.cglib.core.KeyFactory.create(KeyFactory.java:108)
    at net.sf.cglib.core.KeyFactory.create(KeyFactory.java:104)
    at net.sf.cglib.proxy.Enhancer.<clinit>(Enhancer.java:69)
    at org.springframework.context.annotation.ConfigurationClassEnhancer.newEnhancer(ConfigurationClassEnhancer.java:101)
    at org.springframework.context.annotation.ConfigurationClassEnhancer.enhance(ConfigurationClassEnhancer.java:89)
    at org.springframework.context.annotation.ConfigurationClassPostProcessor.enhanceConfigurationClasses(ConfigurationClassPostProcessor.java:448)
    ... 6 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-03-10T09:14:45.803

当我第一次遇到这个问题时，我正在使用 cglib-2.1_3.jar 和 asm 3.1.jar。在我删除 asm 3.1.jar 并添加 asm-1.5.3.jar 后，它开始工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T18:08:08.433

我将 asm jar 文件从 asm-4.0.jar 更改为 asm-3.3.jar，它起作用了。第一个 asm jar 和我使用的 cglib jar 之间一定有冲突。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-11T06:12:04.953

**我使用的是 cglib-2.1_3.jar 和 asm-1.5.3，在使用这个 jar 之后我的程序运行成功。**

1.  [ASM 核心 » 1.5.3](http://mvnrepository.com/artifact/asm/asm/1.5.3)

2.  [cglib-2.1_3.jar](http://www.java2s.com/Code/Jar/c/Downloadcglib213jar.htm)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-06-29T20:40:13.827

只需添加此答案，以防有人遇到我遇到的奇怪的极端案例问题。

当 Jar 文件未正确签名时，也会发生这种情况。

# javascript - 为什么 MooTools JSON.encode() 返回“$caller”：null？

> ID：11681190
> 
> 赞同：0
> 
> 时间：2012-07-27T03:49:59.253
> 
> 标签：javascript, mootools

我使用 MooTools 创建了一个新类。我的课看起来像这样

**更新：**

```
var c=new Class({
    a:'',
    b:'',
    c:'',
    d:'',
initialize:function(ee){
this.e=ee;
},
buildJSON:function()
{
var cInstance=new c(this.e);
cInstance.a=this.a;
cInstance.b=this.b;
cInstance.c=this.c;
cInstance.d=this.d;

return (JSON.encode(cInstance));
}
});

var x=new c("action");
x.a="Hello a";
x.b="Hello b";
x.c="Hello c";
x.d="Hello d";

alert (x.buildJSON());​ 
```

这是一个非常简单的类。现在，如果您尝试一下，JSON 上有一个额外的键：

```
"$caller":null,
"caller":null 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-27T23:45:15.403

`$caller`并且`caller`都是由 MooTools 类添加的属性。

它们的存在是为了帮助使用该`parent`方法。`JSON.encode`在类实例上使用之前，您应该克隆对象并清除不必要的属性。

您可以克隆`this`和删除`$caller`并`caller`从克隆中删除。

```
var c=new Class({
    a:'',
    b:'',
    c:'',
    d:'',

    initialize: function(ee) {
        this.e=ee;
    },

    buildJSON: function() {
        var data = Object.clone(this);
        delete data.$caller;
        delete data.caller;

        return (JSON.encode(data));
    }
});

var x=new c("action");
x.a="Hello a";
x.b="Hello b";
x.c="Hello c";
x.d="Hello d";

alert (x.buildJSON());​ 
```

# html - 不使用 PHP 导入 HTML？

> ID：11681193
> 
> 赞同：1
> 
> 时间：2012-07-27T03:50:27.273
> 
> 标签：html

有没有办法在不使用 PHP 或 Javascript 的情况下将 HTML 块导入文件？对于我的个人网站，每当我对导航栏的内容进行小的更改时，我都必须转到所有其他页面并进行相同的更改。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T03:51:43.197

在互联网上搜索“HTML 服务器端包含”

这是一个好的开始： [http ://en.wikipedia.org/wiki/Server_Side_Includes](http://en.wikipedia.org/wiki/Server_Side_Includes)

例子：

```
<!--#include virtual="header.html" --> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T03:57:59.543

HTML 规范中没有您描述的功能，但如果您无法访问服务器配置等，您可以[使用 HAML 之类的语言编写代码并编译它](https://stackoverflow.com/questions/9930620/import-html-snippets-in-haml)，这将完成您描述的内容而无需任何服务器端工作。

# javascript - 使用 For each 循环创建变量 - jquery

> ID：11681197
> 
> 赞同：0
> 
> 时间：2012-07-27T03:50:41.267
> 
> 标签：javascript, jquery

我有以下

```
var invest401_2 = $("input[type=hidden][name=invest401_2]").val();  
var invest401_3 = $("input[type=hidden][name=invest401_3]").val();  
var invest401_4 = $("input[type=hidden][name=invest401_4]").val();  
var invest401_5 = $("input[type=hidden][name=invest401_5]").val();  

var invest401_0label = Math.round(((invest401_0/balance401)* percent401kb));    
var invest401_1label = Math.round(((invest401_1/balance401)* percent401kb));    
var invest401_2label = Math.round(((invest401_2/balance401)* percent401kb));    
var invest401_3label = Math.round(((invest401_3/balance401)* percent401kb));    
var invest401_4label = Math.round(((invest401_4/balance401)* percent401kb));
var invest401_5label = Math.round(((invest401_5/balance401)* percent401kb));

$("#invest401_0").text(invest401_0label+'%');
$("#invest401_1").text(invest401_1label+'%');
$("#invest401_2").text(invest401_2label+'%');
$("#invest401_3").text(invest401_3label+'%');
$("#invest401_4").text(invest401_4label+'%');
$("#invest401_5").text(invest401_5label+'%'); 
```

有总数 - 例如。5

如何将其放入 for each 循环中。

我试过但没有用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T03:54:49.287

看看`$.each`。 [http://api.jquery.com/jQuery.each/](http://api.jquery.com/jQuery.each/)

如果向这些元素添加一个类，`$("input[type=hidden][name=invest401_2]").val();`则可以将它们作为数组获取并使用`each`.

如果添加一个名为`elements`. 使用以下示例。

```
$('.elements').each(function(i, element) {
    var invest = $(element).val();
    $(element).val(Math.round((invest/balance401)* percent401kb));
}); 
```

或者

```
var $elements = $('.elements');
for(var i in $elements) {
    var element = $elements[i];
    element.val(Math.round((element.val()/balance401)* percent401kb));
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T03:57:02.277

尝试这个

```
var invest401_label = [];
var invest401 = [];
for(i=0;i<6;i++)
{
    invest401[i] = var invest401_2 = $("input[type=hidden][name=invest401_"+i+"]").val();
    invest401_label[i] = Math.round(((invest401[i]/balance401)* percent401kb));
    $("#invest401_"+i).text(invest401_label[i]+'%');
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T04:02:45.563

假设只有`#invest401_0 - 5`

```
$("[id=^invest401_]").each(function(){
    $(this).text(Math.round((($("input[type=hidden][name="+this.id+"]").val()/balance401)* percent401kb))+'%');
}); 
```

参考

[http://api.jquery.com/jQuery.each/](http://api.jquery.com/jQuery.each/)

[http://api.jquery.com/category/selectors/](http://api.jquery.com/category/selectors/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-27T04:06:19.910

虽然这可能行不通（我目前正在从 ie8 机器上写这个）这个 /should/ 做你想要的正确并替换你那里的所有代码

```
for (i = 0; i < $('.hiddenelems').size(); i++) {
    $('.hiddenelems:eq('+i+')').text(Math.round((($('.hiddenelems:eq('+i+')').val()/balance401)* percent401kb))+'%');
} 
```

# java - SimpleDateFormat 似乎因“yyyy-MM-dd HH:mm:ss.SSS0”而失败

> ID：11681202
> 
> 赞同：4
> 
> 时间：2012-07-27T03:51:16.350
> 
> 标签：java, parsing, date, formatting

为什么以下不起作用？似乎最后的字面零是原因......

```
final DateFormat format = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss.SSS0");
format.setLenient(false);

String d = format.format(new Date());
System.out.println(format.parse(d)); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-27T03:56:28.017

我不知道为什么需要在模式末尾添加零 (0)，但你应该将非模式字母包裹在 '' 中以使其工作：

```
final DateFormat format = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss.SSS'0'"); 
```

更多信息：

*   [Java`SimpleDateFormat`](http://docs.oracle.com/javase/6/docs/api/java/text/SimpleDateFormat.html)，文档开头的示例部分。

* * *

您的代码的问题出在这一行

```
System.out.println(format.parse(d)); 
```

尝试将超过 3 位数的毫秒解析为 java.util.Date 将导致异常。解析字符串的模式应该是

```
"yyyy-MM-dd HH:mm:ss.SSS" //without the zero at the end, now your whole code will work... 
```

如果您正在使用纳秒或您的数据有它们，您可以忽略这些值，Java Date/Time API 也不支持纳秒（在文档中他们甚至没有提到它）。

如果您真的非常需要将纳秒用于各种目的，那么您应该坚持使用 String 而不是 Date 对象。

# linq - Linq 到实体左连接

> ID：11681203
> 
> 赞同：0
> 
> 时间：2012-07-27T03:51:18.370
> 
> 标签：linq, entity-framework, c#-4.0

我无法得到正确的结果，也许它在第一次查询时就坏了，有人能找到问题所在。

```
var query = from case in dbEntity.Cases
    join Comm in dbEntity.Comms on case.log_id equals comm.CaseId into collection
    from subCase in collection.DefaultIfEmpty()
    select new { case, subCase.status }; 
```

我想获取所有案例和状态值`Comms`。`log_id`并且`CaseId`是连接键。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T06:42:53.753

```
var query = from case in dbEntity.Cases
join Comm in dbEntity.Comms on case.log_id equals comm.CaseId into collection
from subCase in collection.DefaultIfEmpty()
select new { Case=case,Status= (subCase==null?null:subcase.Status }; 
```

# backbone.js - 如何在模型中没有定义名称的情况下迭代车把模板中的数组

> ID：11681205
> 
> 赞同：17
> 
> 时间：2012-07-27T03:51:41.560
> 
> 标签：backbone.js, handlebars.js, marionette

我有模型：

```
[
  {
    "ID": 5,
    "email": "xx@vflbg.com"
  },
  {
    "ID": 6495,
    "email": "email@monkey.com"
  }
] 
```

在车把中迭代的代码：

```
 {{#each xxx}}
    <p>{{email}}</p>
   {{/each}} 
```

我如何定义 xxx ？

如果 JSON 在模型中有名称，例如：

```
 users: [
      {
        "ID": 5,
        "email": "xx@vflbg.com"
      },
      {
        "ID": 6495,
        "email": "email@monkey.com"
      }
    ] 
```

我会简单地迭代车把，例如：

```
 {{#each users}}
    <p>{{email}}</p>
   {{/each}} 
```

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-06-26T20:20:19.487

这也有效：

```
{{#each this}}
<p>{{email}}</p>
{{/each}} 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-07-27T04:23:56.977

如果你有这个：

```
var a = [
  {
    "ID": 5,
    "email": "xx@vflbg.com"
  },
  {
    "ID": 6495,
    "email": "email@monkey.com"
  }
]; 
```

然后在调用编译模板时提供所需的名称：

```
var t = Handlebars.compile($('#t').html());
var h = t({ users: a }); 
```

这将为您留下您想要的 HTML 格式`h`。

演示：http: [//jsfiddle.net/ambiguous/ZgVjz/](http://jsfiddle.net/ambiguous/ZgVjz/)

如果您有一个从数据构建的集合：

```
var c = new C(a); 
```

然后你会这样调用模板：

```
var h = t({ users: c.toJSON() }); 
```

演示：http: [//jsfiddle.net/ambiguous/uF3tj/](http://jsfiddle.net/ambiguous/uF3tj/)

# python - 如何在 Windows 中创建带有尾随句点的文件名？

> ID：11681207
> 
> 赞同：10
> 
> 时间：2012-07-27T03:51:50.717
> 
> 标签：python, c, windows, filenames

在 Python 中如何处理以句点结尾的文件名？根据 MSDN 的网站，这样的文件名在 Windows 中是有效的，但是每当我尝试在 Python 中创建一个时，它都会删除最后一个句点。我什至尝试使用 os.open 创建一个原始文件描述符，但它仍然删除了句点。

例如，这将创建一个简单命名为 ' `test`'的文件

```
os.open('test.', os.O_CREAT | os.O_WRONLY, 0777) 
```

编辑：[这是确切的报价](http://msdn.microsoft.com/en-us/library/aa365247.aspx)

> 关于文件名和目录中的空格和点。限制在 windows shell 中——不在 Windows 或 NT 中。使用“bash”，您可以在文件名的开头和结尾创建带有空格（或点）的文件。然后，您可以在资源管理器中列出并打开这些文件，并且可以在 shell (cmd.exe) 中“列出”它们，但不一定能够从 shell 中打开它们（尤其是尾随空格和点）。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-24T22:54:18.717

我想出了如何做到这一点。显然，即使直接从 C 调用 Win API，传递一个普通文件名也会去掉句点。为了创建奇怪的文件名，您必须使用`\\?\`前缀（这也会禁用相对路径和斜线转换）。

```
open('\\\\?\\C:\\whatever\\test.','w') 
```

它丑陋且不可移植，但它可以工作。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-06-13T22:15:10.327

该`\\?\`语法也适用于`cmd.exe`：

```
dir>"\\?\C:\whatever\test." 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-27T04:23:14.527

Windows 将去掉最后的尾随句点，假设它是文件名和空白扩展名之间的分隔符。尝试使用两个句点。

# android - 安卓左上角按钮

> ID：11681213
> 
> 赞同：0
> 
> 时间：2012-07-27T03:53:04.750
> 
> 标签：android, button, android-linearlayout, layout-gravity

我想在左上角制作一个关于按钮。我试过：

```
android:layout_gravity:"top|left" 
```

但它不起作用，我搜索了所有我发现的东西都在使用`RelativeLayout`，如果我使用它，我将不得不从头开始制作我的所有布局，它不像线性布局那么好。

无法在此处发布代码。所以这是我在 pastebin 上的代码

[http://pastebin.com/5EjgyB0K](http://pastebin.com/5EjgyB0K)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T04:23:21.740

在这里，您已经给`android:layout_gravity="center"`了线性布局，因此它将设置布局的重力，`center`并且您`About Button`是布局的子级，它要设置`center`并且您也给了`Margin_top`。尝试删除重力和 Margin_top，您可以看到结果，按钮将位于屏幕的左上角。

# asp.net - 将带有特定查询字符串的 aspx 重写/重定向到特定的 wordpress 页面

> ID：11681215
> 
> 赞同：0
> 
> 时间：2012-07-27T03:53:17.830
> 
> 标签：asp.net, wordpress, .htaccess, rewrite

我已经搜索并找不到有效的解决方案...

我已经将一个站点从 asp.net 移植到 php。按照指示，我将内部链接保留为 .aspx 用于 seo。对于 wordpress 之外的静态页面，没有查询字符串，我可以正常工作：

```
RewriteEngine on
RewriteRule ^testimonials.aspx$ /testimonials.php [NC,R=301] 
```

但是，我有一些包含查询字符串的链接......这些链接现在必须指向当前在 wordpress 安装中的页面。我怎样才能得到

```
myawesomesite.com/catalog.aspx?n=My%incredible%20product 
```

重定向到

```
myawesomesite.com/catalog/my-new-incredible-product/ 
```

和

```
myawesomesite.com/catalog.aspx?n=My%other%20product 
```

重定向到

```
myawesomesite.com/catalog/my-new-other-product/ 
```

等等...（在目标中，“目录”是安装 wordpress 的目录）

我试过各种各样的东西，但不是专家。我知道我需要做一些事情来让 apache 捕获查询字符串......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T10:31:16.137

我会试一试，下面应该这样做：

```
RewriteCond %{QUERY_STRING}  ^n=My(?:[\ +]|%20)incredible(?:[\ +]|%20)product$ [NC]
RewriteRule ^catalog\.aspx$ http://www.myawesomesite.com/catalog/my-new-incredible-product/? [R=301,NE,NC,L] 
```

只需修改部分以匹配您的其他 URL

我一直发现这个工具对重定向很有用

[http://seo-website-designer.com/HtAccess-301-Redirect-Generator](http://seo-website-designer.com/HtAccess-301-Redirect-Generator)

# python - “str”对象没有属性“session”

> ID：11681216
> 
> 赞同：1
> 
> 时间：2012-07-27T03:53:27.503
> 
> 标签：python, django, attributes, e-commerce

我正在浏览“beginning Django ecommerce”一书，我一直试图在所有页面上显示“go to cart”链接。

我明白了这个`error: 'str' object has no attribute 'session'`和这条线

`"{% cart_box request%}"`在 HTML 中突出显示此错误。

这是 HTML

```
{% load catalog_tags %}

<div class="cart_box">

    {% cart_box request %}

</div>

{% if hour == 7 or hour == 9 or hour == 12 %}   

Order time = {{hour}} 
```

这是视图。

```
def menu_hour(request,hour):

    #set the test cookie
    request.session.set_test_cookie()

    hour = int(hour)
    food = Food.objects.all()
    output = ', '.join([f.name for f in food])

    steak = Food.objects.get(name="Steak and Egg Burrito")
    steak.price = 15
    steak.save()

    queso = Food.objects.get(name="Queso Burrito")
    queso.time = hour

    food_dict = {"steak": steak, "queso": queso, "hour":hour}
    return render_to_response('menu_hour.html', food_dict, context_instance=RequestContext(request)) 
```

这是目录标签

```
from django import template 
from cart import cart

register = template.Library()

@register.inclusion_tag("tags/cart_box.html") 
def cart_box(request):
    cart_item_count = cart.cart_distinct_item_count(request) 
    return {'cart_item_count': cart_item_count } 
```

这是目录标签 HTML

```
{% with cart_item_count as cart_count %} 
    <a href="{% url show_cart %}">
        Shopping Cart
        <br />
        {{ cart_count }} Item{{ cart_count|pluralize }}
    </a>
{% endwith %} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T13:18:19.913

这是因为我没有将字典中的“请求”传递给模板。

# javascript - JavaScript 没有在使用 ModalPopup ( Jquery) 的弹出窗口中执行

> ID：11681217
> 
> 赞同：1
> 
> 时间：2012-07-27T03:53:29.600
> 
> 标签：javascript, jquery, html, modalpopup

我通过 JQuery 库中的对象 ModalPopup 创建了一个简单的弹出窗口。这是一个简单的按钮单击事件的事件。我的问题是弹出窗口中的“Javascript”没有运行！当我将弹出窗口作为一个简单的 html 页面打开时，它甚至可以完美运行。

我使用以下代码创建弹出窗口：

```
$(document).ready(function () {
  //Change these values to style your modal popup

  var align = 'center'; //Valid values; left, right, center
  var top = 100; //Use an integer (in pixels)
  var width = 520; //Use an integer (in pixels)
  var padding = 10; //Use an integer (in pixels)
  var backgroundColor = '#FFFFFF'; //Use any hex code                                                           
  var borderColor = '#333333'; //Use any hex code
  var borderWeight = 4; //Use an integer (in pixels)
  var borderRadius = 5; //Use an integer (in pixels)
  var fadeOutTime = 300; //Use any integer, 0 = no fade
  var disableColor = '#666666'; //Use any hex code
  var disableOpacity = 40; //Valid range 0-100
  var loadingImage = 'images/loading.gif'; //Use relative path from this page
  var source = 'details_company.html';

  //This method initialises the modal popup

  $(".details_company").click(function () {
    modalPopup(align, top, width, padding, disableColor, disableOpacity, backgroundColor, borderColor, borderWeight, borderRadius, fadeOutTime, source, loadingImage);
  });
}); 
```

我为我糟糕的英语道歉。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T04:16:04.417

看看这个 jquery-ui[模态表单](http://jqueryui.com/demos/dialog/#modal-form)示例。它简单易懂。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T04:01:50.253

```
$(".details_company").click(function () {
  $("#dialog-modal").dialog({
    height: 140,
    modal: true
  });
});

<div id="dialog-modal" title="Basic modal dialog">
  <p>Adding the modal overlay screen makes the dialog look more prominent because it dims out the page content.</p>
</div> 
```

这使用 jquery-ui

# version-control - 如何删除hg中的分支？

> ID：11681218
> 
> 赞同：4
> 
> 时间：2012-07-27T03:53:35.310
> 
> 标签：version-control, mercurial

我最近在学习git，发现有人可以删除短分支，但是在Hg中，将分支合并为默认后，我怎么能删除呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T03:55:32.980

你不能。您可以关闭分支以将其从活动分支列表中隐藏，但不能完全删除它。

发生这种情况是因为在 mercurial 和 git 中，“分支”一词的含义不同。

在 mercurial 中 - 它是一组变更集。

在 git - 它是一个指向特定变更集的指针。

# shell - 如何在 Shell 脚本中使用环境变量名称中的变量？

> ID：11681219
> 
> 赞同：5
> 
> 时间：2012-07-27T03:53:50.680
> 
> 标签：shell

我有一个环境配置文件，我在其中定义了环境变量。我使用 source 在我的 shell 脚本（bash）中获取这些变量。

我在我的 shell 脚本中使用了一个 checkout 命令，该命令从环境变量中定义的位置检出文件。现在我需要使用多个位置来检查文件，这些文件可以是任意数量的不同运行的 shell 脚本。

例如。用户在配置文件中提供了两个路径，PATH1 和 PATH2，NUM_OF_PATHS 为 2。

在我的 shell 脚本中，我想做如下的事情来使用路径。

```
i=0
echo ${NUM_OF_PATHS}
while [ $i -lt ${NUM_OF_PATHS} ]
do
    checkout $PATH{$i}
    i=`expr $i + 1`
done 
```

如何使用变量 i 形成环境变量 PATH1 或 PATH2 等？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-27T04:09:42.123

```
i=1
while [ $i -le ${NUM_OF_PATHS} ]
do
  CPATH=$(eval echo \$\{PATH$i\})
  echo "PATH$i: $CPATH"
  let i++ 
done 
```

`eval`组合并评估其参数并执行组合表达式。在这里， eval 执行：`echo ${PATH1}`. 为了做到这一点，我们首先对 eval 进行转义，`${...}`以便 echo 可以在 eval 之后接收它们。唯一未转义的特殊字符是`$`before `i`。eval 扩展它并去除转义字符并使用结果执行 echo。

因此，`CPATH=$(eval echo \$\{PATH$i\})`变为`CPATH=$(echo ${PATH1})`CPATH 得到回显输出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T07:38:58.440

为什么不使用数组变量？使用一个数组 MYPATH[] 代替多个 PATH1 PATH2 变量

```
MYPATH=(
path0
path1
path2
)
MYPATH[3]=path3

NUM_OF_PATHS="${#MYPATH[@]}"
echo ${NUM_OF_PATHS}

for ((i=0; i < NUM_OF_PATHS; i++))
do
    checkout ${MYPATH[$i]}
done 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T04:05:28.193

这是一个完整的例子，我认为它会做你想做的事。以下是由于我不完全理解的原因而被否决的原始消息：

```
$ cat test.sh
function checkout() {
    echo "Registering $1"
}

PATH1="Path1;/usr/bin"
PATH2="Path2;/bin"
NUM_OF_PATHS=2

i=1
echo $NUM_OF_PATHS
while [ $i -le $NUM_OF_PATHS ]
do
    eval "checkout \$PATH$i"
    i=`expr $i + 1`
done
$ bash test.sh
2
Registering Path1;/usr/bin
Registering Path2;/bin
$ 
```

原始消息 您可以使用“eval”命令。这是一个示例（适用于 GNU bash，版本 4.2.37(2)-release）：

```
$ A1="Variable 1"
$ A2="Variable 2"
$ for i in {1..2}; do eval "echo \$A$i"; done
Variable 1
Variable 2
$ 
```

该字符串将评估为“echo $A1”和“echo $A2”，然后 eval 将执行您想要的操作。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-07-27T04:07:07.523

在名称周围使用花括号：`${PATH$i}`

# javascript - 当查询可排序删除操作结束时，我如何得到通知？

> ID：11681221
> 
> 赞同：-3
> 
> 时间：2012-07-27T03:54:09.373
> 
> 标签：javascript, jquery-ui, jquery

当 jquery 可排序放置操作中的项目结束时，我如何得到通知？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T08:49:10.553

在这里，我为上述查询完成了完整的垃圾箱。

**演示：** [http ://codebins.com/bin/4ldqp9e](http://codebins.com/bin/4ldqp9e)

**HTML：**

```
<ul id="sortable">
  <li class="ui-state-default">
    <span class="ui-icon ui-icon-arrowthick-2-n-s">
    </span>
    Item 1
  </li>
  <li class="ui-state-default">
    <span class="ui-icon ui-icon-arrowthick-2-n-s">
    </span>
    Item 2
  </li>
  <li class="ui-state-default">
    <span class="ui-icon ui-icon-arrowthick-2-n-s">
    </span>
    Item 3
  </li>
  <li class="ui-state-default">
    <span class="ui-icon ui-icon-arrowthick-2-n-s">
    </span>
    Item 4
  </li>
  <li class="ui-state-default">
    <span class="ui-icon ui-icon-arrowthick-2-n-s">
    </span>
    Item 5
  </li>
  <li class="ui-state-default">
    <span class="ui-icon ui-icon-arrowthick-2-n-s">
    </span>
    Item 6
  </li>
  <li class="ui-state-default">
    <span class="ui-icon ui-icon-arrowthick-2-n-s">
    </span>
    Item 7
  </li>
</ul> 
```

**CSS：**

```
#sortable{
  width:50%;
}
#sortable li{
  list-style:none;
}
#sortable li span{
  display:inline-block
} 
```

**查询：**

```
$(function() {
    $("#sortable").sortable({
        stop: function(event, ui) {
            alert("Sorting Stopped..!");
            return false;
        }
    });
}); 
```

**演示：** [http ://codebins.com/bin/4ldqp9e](http://codebins.com/bin/4ldqp9e)

# real-time - 本地服务器中的Cloud9实时协作工具？

> ID：11681222
> 
> 赞同：0
> 
> 时间：2012-07-27T03:54:25.420
> 
> 标签：real-time, cloud9-ide

使用此处的说明克隆 git 存储库：[https](https://github.com/ajaxorg/cloud9#readme) ://github.com/ajaxorg/cloud9#readme 我没有看到当前在 c9.io 托管站点上实现的任何实时工具。

有谁知道新工具在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T09:01:46.493

Cloud9 的开源版本中目前不提供协作工具。

# c# - 通过 Outlook 2010 C# 加载项访问 Excel 2010

> ID：11681225
> 
> 赞同：1
> 
> 时间：2012-07-27T03:55:06.993
> 
> 标签：c#, excel, outlook, add-in

我编写了一个 Outlook 2010 加载项，用于解析电子邮件正文中的数据。目前，我将数据写入 .CSV 文件，然后打开 Excel 工作簿，它会自动导入数据。我想跳过 .CSV 并在加载项中直接打开工作簿并写入数据。我正在使用.NET 4.0。VS2010 Outlook 加载项使用 Outlook 14.0 库。当我尝试包含 Excel 14.0 库的引用时，编译器给我一个重复 Office.dll 的错误。重新表述问题 3 天后，互联网搜索无法提供任何答案。这个让我难住了！'莉儿在这里帮忙？：-/

这是我的加载项代码：（希望我的格式正确。这是我的第一篇文章）

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Diagnostics;
using System.Reflection;
using System.Windows.Forms;
using System.Xml.Linq;
using Outlook = Microsoft.Office.Interop.Outlook;
using Office = Microsoft.Office.Core;

public partial class ThisAddIn
{
    Outlook.Explorer currentExplorer = null;
    private void ThisAddIn_Startup(object sender, System.EventArgs e)
    {
        currentExplorer = Application.ActiveExplorer();
        currentExplorer.SelectionChange += new      Outlook.ExplorerEvents_10_SelectionChangeEventHandler(CurrentExplorer_Event);
    }

    private void ThisAddIn_Shutdown(object sender, System.EventArgs e)
    {
    }
    private void CurrentExplorer_Event()
    {
        Outlook.Selection selection = this.Application.ActiveExplorer().Selection;
        Outlook._Application olApp = new Outlook.Application();
        if (Application.ActiveExplorer().Selection.Count > 0)
        {
            Object selObject = Application.ActiveExplorer().Selection[1];
            if (selObject is Outlook.MailItem)
            {
                Outlook.MailItem message = (Outlook.MailItem)selObject;
                //MessageBox.Show(message.Subject);
                if (message.Subject == "Powerball Drawing Info")
                {
                    string fileString = string.Empty;
                    string body = string.Empty;
                    string[] numbers = new string[7];
                    int start = 0;
                    int y = 0;
                    // char ch;

                    for (int x = 0; x < 7; x++)
                    {
                        numbers[x] = string.Empty;
                    }
                    //Outlook.MailItem message = (Outlook.MailItem)e.OutlookItem;
                    body = message.Body;
                    start = body.IndexOf(":");

                    for (int x = start; x < start + 40; x++)
                    {
                        if (Char.IsDigit(body[x]))  // copy entire number to array element
                        {
                            numbers[y] += body[x];
                        }

                        if (Char.IsWhiteSpace(body[x]) && numbers[y].Length > 0) // increment number array index
                        {
                            y++;
                            if (y == 5) // skip the word " Powerball " and jump the array index to match spreadsheet
                            {
                                y = 6;
                                x += 10;
                                continue;
                            }
                        }
                        if (y == 6 && Char.IsDigit(body[x + 1]) == false) // test for finish of Powerball number
                        {
                            x = start + 40;
                        }
                    }
                    for (int x = 0; x < 7; x++) // build a string to write to file and display
                    {
                        fileString += numbers[x];
                        if (x != 6)
                        {
                            fileString += ", ";
                        }
                    }

                    System.IO.File.WriteAllText(@"C:\Users\rrichard39\Documents\Powerball.csv", fileString);
                    Process.Start(@"C:\Users\rrichard39\Documents\Powerball_Test.xlsm");

                }
            }
        }
    }

    #region VSTO generated code

    /// <summary>
    /// Required method for Designer support - do not modify
    /// the contents of this method with the code editor.
    /// </summary>
    private void InternalStartup()
    {
        this.Startup += new System.EventHandler(ThisAddIn_Startup);
        this.Shutdown += new System.EventHandler(ThisAddIn_Shutdown);
    }

    #endregion
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T04:16:09.497

蒂姆 - 正如原始帖子中所述，错误是“编译器给了我一个“重复的 Office.dll”的错误”无论如何，谢谢蒂姆，但我大约在 2 小时前就知道了。我不确定使用哪个 Outlook 互操作库 VS2010 Outlook 加载项项目构建器/模板（我猜是 COM，但不确定），但我启动了一个新的 Outlook 2010 加载项并使用了 NET 版本的 Excel 互操作图书馆 14.0 参考和一切都像一个魅力。我仍然想弄清楚如何判断项目构建器/模板使用哪些库（COM 或 NET）以供将来参考，所以我知道我正在使用什么。我浏览了 Outlook 互操作库参考的属性以获取信息，但我能找到的只是版本号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T04:21:51.667

**对于TIM**，确切的错误消息是：

> `Error 1 An assembly with the same identity 'office, Version=14.0.0.0, Culture=neutral, PublicKeyToken=71e9bce111e9429c' has already been imported. Try removing one of the duplicate references. c:\Program Files (x86)\Microsoft Visual Studio 10.0\Visual Studio Tools for Office\PIA\Office14\Office.dll`

# ios - iOS - 根据客人在运行时显示动画/效果

> ID：11681231
> 
> 赞同：1
> 
> 时间：2012-07-27T03:55:54.943
> 
> 标签：ios, ios5

当我们执行手势（平移、旋转、滑动...等）时，通常我们会导航页面、滚动等。后端识别手势，仅此而已。我正在寻找更多关于 UI 的内容。如何使屏幕提供我刚刚执行的手势的视觉反馈？换句话说，当用户的手指在屏幕上时，例如当

滑动-屏幕上显示一条线，标签-屏幕上显示一个点，旋转-屏幕上显示两条曲线

如果我的问题还不够清楚，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T05:10:36.347

这个问题是一个很大的问题。它有很多不同的元素。

首先你需要检测手势：[How to detect Swipe Gesture in iPhone SDK?](https://stackoverflow.com/questions/4279699/how-to-detect-swipe-gesture-in-iphone-sdk)

你可以[在这里](http://developer.apple.com/library/ios/#samplecode/SimpleGestureRecognizers/Introduction/Intro.html#//apple_ref/doc/uid/DTS40009460)找到一些关于识别简单手势的代码。

一旦您可以识别手势，您就可以像这样以编程方式更改`UIImage`包含的手势：`UIImageView`

```
UIImage *myImage = [UIImage imageNamed:@"swipe_pic.png"];
[myImageView setImage:myImage]; 
```

`UIImageView` [您可以在此处](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIImageView_Class/Reference/Reference.html)阅读更多信息。

希望这对您有所帮助。

# php - 通过 php 发送邮件，而 php 未在浏览器中执行

> ID：11681237
> 
> 赞同：1
> 
> 时间：2012-07-27T03:56:57.493
> 
> 标签：php

我有以下PHP代码，用于服务移动应用程序的请求，因此它不会在浏览器中执行，然后我发现邮件功能不起作用，但是如果我在单独的php中执行邮件功能代码浏览器中的文件，可以发送邮件。所以我想问一下，即使它没有在浏览器中运行，我怎样才能让我的 PHP 文件可以发送邮件？

这是我的PHP代码：

```
$_Type = $_POST['Type'];
$_ClientID = $_POST['ClientID'];
$_TechID = $_POST['TechID'];
$_SiteID = $_POST['SiteID'];

function checkin($DB, $TechID, $ClientID, $SiteID){
    $dbConnection = mysql_connect($DB['server'], $DB['loginName'], $DB['password']);
    if(!$dbConnection){
        die('Error! ' . mysql_error());
        }
    mysql_select_db($DB['database'], $dbConnection);

    $result1 = mysql_query("SELECT COUNT(*) FROM Log") or die('Error! ' . mysql_error());
    $query = "SELECT `Type` FROM `Log` WHERE `TechID` = '".$TechID."' ORDER BY LogTime DESC LIMIT 1";
    $result2 = mysql_query($query) or die('Error! ' . mysql_error());
    while($row1 = mysql_fetch_array($result1)){
        $count = $row1['COUNT(*)'];
        if(mysql_num_rows($result2) > 0){
            while($row2 = mysql_fetch_array($result2)){
                if(trim($row2['Type'])!="Checkin"){
                    $count = $count+1;
                    $timezone = "Asia/Hong_Kong";
                    if(function_exists('date_default_timezone_set')) 
                        date_default_timezone_set($timezone);
                    $Time = date('Y/m/d H:i');

                    mysql_query("INSERT INTO Log (LogID, TechID, ClientID, SiteID, LogTime, Type)
                                VALUES (".$count.", '".$TechID."', ".$ClientID.", ".$SiteID.", '".$Time."', 'Checkin')");
                }else{
                    mail('me@gmail.com', 'Test mail', 'If you can read this, everything was fine!');
                }
            }
        }else{
            $count = $count+1;
            $timezone = "Asia/Hong_Kong";
            if(function_exists('date_default_timezone_set')) 
                date_default_timezone_set($timezone);
            $Time = date('Y/m/d H:i');
            mysql_query("INSERT INTO `Log` (`LogID`, `TechID`, `ClientID`, `SiteID`, `LogTime`, `Type`)
                        VALUES (".$count.", '".$TechID."', ".$ClientID.", ".$SiteID.", '".$Time."', 'Checkin')");
        }
    }
}

checkin($DB, $_TechID, $_ClientID, $_SiteID); 
```

这里的情况是我的程序将检查用户之前是否已签入，如果他已签入，则会向我发送一封邮件，这就是我想要做的。

# iphone - 使用泄漏进行分析时，NSURLConnection 会吸收内存

> ID：11681241
> 
> 赞同：0
> 
> 时间：2012-07-27T03:57:07.347
> 
> 标签：iphone, objective-c, ios, ipad, instruments

我很难优化我的应用程序性能，因为它占用了太多内存。这是分配工具调用树：

![在此处输入图像描述](../Images/78ba70a84c183046b3089da424e33bb3.png)

我不确定我自己为什么它自己会吸收 5 MB 的应用程序.. 泄漏工具没有显示我正在泄漏任何内存。知道为什么会发生这种情况吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T04:33:03.493

也许尝试将共享的 NSURLCache 设置为对您的应用程序合理的值。

有关示例，请参见[http://twobitlabs.com/2012/01/ios-ipad-iphone-nsurlcache-uiwebview-memory-utilization/ ：](http://twobitlabs.com/2012/01/ios-ipad-iphone-nsurlcache-uiwebview-memory-utilization/)

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{   
    int cacheSizeMemory = 4*1024*1024; // 4MB
    int cacheSizeDisk = 32*1024*1024; // 32MB
    NSURLCache *sharedCache = [[[NSURLCache alloc] initWithMemoryCapacity:cacheSizeMemory diskCapacity:cacheSizeDisk diskPath:@"nsurlcache"] autorelease];
    [NSURLCache setSharedURLCache:sharedCache];

    // ... more launching code
} 
```

# javascript - 使用 jsonp 解决方法的同步 ajax 调用？

> ID：11681243
> 
> 赞同：0
> 
> 时间：2012-07-27T03:57:36.277
> 
> 标签：javascript, ajax

我知道我无法使用 jsonp 数据类型进行同步 ajax 调用，并且想知道是否有任何解决方法。我正在尝试学习 javascript 并尝试编写一个函数

```
chrome.omnibox.onInputChanged.addListener(function(text, suggest){
       var baseUrl = "http://sample.com";
       var finalResult = [];
              $.ajax({
                     url : baseUrl,
                     dataType : "jsonp",
                     success: function(result) {
                                     for (var i=0; i<result[1].legnth; i++){
                                          finalResult.push(
                                                 {content : result[1][i], description : result[1][i]}
                                          );
                                     }
                              },
                     async: false
              });           
       suggest(finalResult);
}); 
```

我需要将我的 ajax 调用的结果提供给Suggest() 函数。所以我需要ajax调用是同步的吗？我不能这样做，因为那时我遇到了相同的原产地政策问题。任何帮助，将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T04:00:24.077

从您的匿名成功函数调用建议函数，这样 ajax 调用可以是异步的。

```
 chrome.omnibox.onInputChanged.addListener(function(text, suggest){
      var baseUrl = "http://sample.com";
      var finalResult = [];
      $.ajax({
           url : baseUrl,
           dataType : "jsonp",
           success: function(result) {
                for (var i=0; i<result[1].legnth; i++){
                     finalResult.push(
                          {content : result[1][i], description : result[1][i]}
                     );
                }
                suggest(finalResult);
           },
           async: true
      });             
 }); 
```

# php - php, proc_open 如何传递多个参数

> ID：11681245
> 
> 赞同：3
> 
> 时间：2012-07-27T03:57:42.337
> 
> 标签：php, python

我正在编写可在 *nix 系统下工作的 php 代码。我需要在 php 代码中调用一个带有 5 个参数的 python 脚本。一些参数是用户输入的，因此可能有任何字符。我无法弄清楚如何将参数传递给脚本。我将如何分开论点？例如，在[这个问题](https://stackoverflow.com/questions/10880589/multiple-input-with-proc-open)中，您以行尾字符分隔，但在我的论点中，可以是用户编写的任何内容。如何传递这样的论点？有任何想法吗？

编辑：我有想法在传递参数之前将转义字符放在每个引号符号 ' 或 " 中，另一方面我将摆脱转义字符。json 编码可以吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T06:38:19.660

你想要的功能是`escapeshellcmd()`：

```
$arg1 = escapeshellarg($input1);
$arg2 = "foo";
$arg3 = escapeshellarg($input3);
$arg4 = "bar";
$arg5 = escapeshellarg("a string containing spaces and other *special* characters");
$proc = proc_open("python_prog $arg1 $arg2 $arg3 $arg4 $arg5", ...); 
```

在另一个线程中，程序没有接受任何参数，换行符被用来分隔标准输入上的项目。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T05:19:46.953

您基本上是在命令提示符下执行命令；您可能想先熟悉命令提示符。

参数用空格分隔。因此，如果您的输入中有空格，则必须在这些输入周围加上引号（我建议使用单引号；使用双引号会导致环境变量被扩展等等）。

因此，基本上，您必须转义输入中的所有单引号、换行符和回车，用单引号将它们括起来并将它们附加到命令中。

**警告：**安全方面，这整个事情是非常有问题的。如果您的逃生机制不是防弹的，那么任何人都可以在您的服务器上执行命令。

另一个答案是将输入写入临时文件，并在 python 脚本中从该文件中读取。如果您可以控制此脚本，我强烈建议您这样做。

# c# - Ninject - 在 .Net MVC 3 中有条件地创建类

> ID：11681254
> 
> 赞同：2
> 
> 时间：2012-07-27T03:59:27.453
> 
> 标签：c#, asp.net-mvc-3, ninject

我觉得我在这里缺少一些明显的东西。我正在尝试使用 ninject 创建一个类。该类接受存储在 HttpContext 的 Session 中的单个字符串参数。如何将该参数传递给此类？

该类看起来像：

```
public class Manager : IManager
{
    public Manager(string a) { ... }
} 
```

我有一个自定义的依赖解析器，如下所示：

```
public class NinjectDependencyResolver : IDependencyResolver
{
    IKernel kernel;
    public NinjectDependencyResolver()
    {
        kernel = new StandardKernel();
        Bind<IManager>().To<Manager>()
    }

    ...
} 
```

典型的控制器如下所示：

```
public class ManagerController : Controller
{
    public ManagerController(IManager manager) { ... }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-27T07:48:44.657

参数存储在 Session 中是相关的实现细节，不属于 Ninject 配置。

您应该创建一个`IManagerConfiguration`接口，该接口具有管理器的每个配置值的属性以及该接口的会话存储实现。现在您可以为它们添加一个简单的绑定并将接口传递给管理器构造函数而不是字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T04:10:28.073

**更新：**

最初无法访问会话，请查看下面的@James 答案。

您是否尝试使用`WithConstructorArgument`.

```
public class NinjectDependencyResolver : IDependencyResolver
{
    IKernel kernel;
    public NinjectDependencyResolver()
    {
        kernel = new StandardKernel();
        Bind<IManager>()
           .To<Manager>()
           .WithConstructorArgument("a", ..)
    }

    ...
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T04:01:44.083

试试这个

```
 var copyToNew = new ConstructorArgument("isCopyToNew", IsCopyToNew);
            IParameter[] pars = new Parameter[] {  copyToNew };
            var anyViewModel = IoC.Kernel.Get<IAnyViewModel>(pars); 
```

或者

```
var anyViewModel=IoC.Kernel.Get<IAnyViewModel>(new ConstructorArgument("isCopyToNew",IsCopyToNew)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-27T06:34:07.547

如果您可以将 Manager 参数从字符串更改为`Func<string>`，那么您可以使用 WithConstructorArgument 和 () => HttpContext.Current.Session["foo"].ToString() 的 Func

如果你不能，那么我可能会用一个带有该字符串参数的 Create 方法注入一个 IManagerFactory，虽然你可以通过创建自己的工厂来手动完成，但我会使用 ToFactory 的 ninject 扩展。

[https://github.com/ninject/ninject.extensions.factory/wiki/Factory-interface](https://github.com/ninject/ninject.extensions.factory/wiki/Factory-interface)

# java - 未知错误 - 捆绑字符串数组

> ID：11681259
> 
> 赞同：1
> 
> 时间：2012-07-27T04:00:10.160
> 
> 标签：java, android, arrays, listview, bundle

每次按下菜单按钮 --> History 启动 History.java 类时，我都会收到此应用程序的错误。我相当肯定它与将两个数组从 TipBookActivity.java 类发送到 History.java 类的 Bundle 方法有关。

下面是 TipBookActivity 代码：

```
public class TipBookActivity extends Activity {
/** Called when the activity is first created. */

TextView textTip,textHour,textWage;
EditText editHour,editTip;
float wage;
int precision = 100;
String sTip,sHour;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    textTip = (TextView) findViewById(R.id.tvTip);
    textHour = (TextView) findViewById(R.id.tvHour);
    textWage = (TextView) findViewById(R.id.tvWage);
    editTip = (EditText) findViewById(R.id.etTip);
    editHour = (EditText) findViewById(R.id.etHour);
    Button bSubmit = (Button) findViewById(R.id.bSubmit);
    final Bundle bTip = new Bundle();
    final Bundle bHour = new Bundle();
    final ArrayList<String> tipList = new ArrayList<String>();    
    final ArrayList<String> hourList = new ArrayList<String>();
    bSubmit.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            textHour.setText(editHour.getText().toString());
            textTip.setText(editTip.getText().toString());
            wage = Float.parseFloat(textTip.getText().toString()) / Float.parseFloat(textHour.getText().toString());
            String tip = String.format("$%.2f",wage);
            textWage.setText(String.valueOf(tip) + " an hour");     
            textHour.setText(editHour.getText() + " Hour(s)");
            textTip.setText("$" + editTip.getText());
            bTip.putStringArray(sTip,new String[] {editTip.getText().toString()});
            bHour.putStringArray(sHour,new String[] {editHour.getText().toString()});
            tipList.addAll(Arrays.asList(sTip));
            hourList.addAll(Arrays.asList(sHour));
            Intent i = new Intent(TipBookActivity.this,History.class);
            i.putExtras(bTip);
            i.putExtras(bHour);
        }       
    });
}

public boolean onCreateOptionsMenu(Menu menu){
    super.onCreateOptionsMenu(menu);
    MenuInflater mMain = getMenuInflater();
    mMain.inflate(R.menu.main_menu,menu);
    return true;
}

public boolean onOptionsItemSelected(MenuItem item){
    switch (item.getItemId()){
    case R.id.menuHistory:
         startActivity(new Intent("com.smarticle.tipbook.HISTORY"));            
         return true;
    case R.id.menuClear:
        //set up next tutorials
        Toast display = Toast.makeText(this, "Clear History feature coming soon.", Toast.LENGTH_SHORT);
        display.show();
        return true;
    }
    return false;
}
} 
```

历史类代码：

```
public class History extends Activity{

private ListView mainListViewTip;
private ListView mainListViewHour;
private ArrayAdapter<String>listAdapterTip;
private ArrayAdapter<String>listAdapterHour;
String sTip,sHour;

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.history_main);
    Bundle bTip = this.getIntent().getExtras();
    Bundle bHour = this.getIntent().getExtras();
    String[] array1 = bTip.getStringArray(sTip);
    String[] array2 = bHour.getStringArray(sHour);
    ListView mainListViewTip = (ListView) findViewById(R.id.mainListViewTip);
    ListView mainListViewHour = (ListView) findViewById(R.id.mainListViewHour);
    ArrayList<String> tipList = new ArrayList<String>();
    ArrayList<String> hourList = new ArrayList<String>();
    tipList.addAll(Arrays.asList(sTip));
    hourList.addAll(Arrays.asList(sHour));
    listAdapterTip = new ArrayAdapter<String>(this,R.layout.simplerow,tipList);
    listAdapterHour = new ArrayAdapter<String>(this,R.layout.simplerow,hourList);
    mainListViewTip.setAdapter(listAdapterTip);
    mainListViewHour.setAdapter(listAdapterHour);
}

} 
```

任何有关确定错误原因的帮助将不胜感激。该代码有效（理论上，我认为），它在实践中不起作用。大体思路是在EditText字段中输入两个数字，保存为字符串，显示为TextView，设置为ArrayList，然后捆绑发送到其他类中显示在ListView中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T04:21:01.013

您没有在两个活动中初始化**sTip**和**sHour字符串。**所以用任何常量值初始化 **sTip**和**Shour字符串，就像在这两个活动中一样：**

```
String sTip="sTip",sHour="sHour"; 
```

并且从 TipBookActivity 你没有将意图传递给 startActivity 所以首先声明 Intent i 全局然后启动你的 Activity 为：

```
 TextView textTip,textHour,textWage;
    EditText editHour,editTip;
    float wage;
    int precision = 100;
    String sTip,sHour;
    Intent i; // declare here

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
textTip = (TextView) findViewById(R.id.tvTip);
    textHour = (TextView) findViewById(R.id.tvHour);
    textWage = (TextView) findViewById(R.id.tvWage);
    editTip = (EditText) findViewById(R.id.etTip);
    editHour = (EditText) findViewById(R.id.etHour);
    Button bSubmit = (Button) findViewById(R.id.bSubmit);
    final Bundle bTip = new Bundle();
    final Bundle bHour = new Bundle();
    final ArrayList<String> tipList = new ArrayList<String>();    
    final ArrayList<String> hourList = new ArrayList<String>();
    bSubmit.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            textHour.setText(editHour.getText().toString());
            textTip.setText(editTip.getText().toString());
            wage = Float.parseFloat(textTip.getText().toString()) / Float.parseFloat(textHour.getText().toString());
            String tip = String.format("$%.2f",wage);
            textWage.setText(String.valueOf(tip) + " an hour");     
            textHour.setText(editHour.getText() + " Hour(s)");
            textTip.setText("$" + editTip.getText());
            bTip.putStringArray(sTip,new String[] {editTip.getText().toString()});
            bHour.putStringArray(sHour,new String[] {editHour.getText().toString()});
            tipList.addAll(Arrays.asList(sTip));
            hourList.addAll(Arrays.asList(sHour));
            i = new Intent(TipBookActivity.this,History.class);
            i.putExtras(bTip);
            i.putExtras(bHour);
        }       
    });
}
    public boolean onOptionsItemSelected(MenuItem item){
        switch (item.getItemId()){
        case R.id.menuHistory:
             startActivity(i));        // start Activity here by passing intent    
             return true; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T04:39:37.710

您遵循的方法是完全错误的，您可以一次将一个 Bundle 放置到意图中，并且您正在放置两个 Bundle，sTip 和 sHours。

第二个捆绑 sHours 将覆盖第一个，我认为它是空指针异常的主要原因，而不是您应该将所有值（在您的情况下为两个字符串数组）放到一个捆绑中。并将该捆绑包放入 Intent。

执行以下操作：

```
public class TipBookActivity extends Activity {
/** Called when the activity is first created. */

TextView textTip,textHour,textWage;
EditText editHour,editTip;
float wage;
int precision = 100;
String sTip="sTip";
String sHour="sHour";

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    textTip = (TextView) findViewById(R.id.tvTip);
    textHour = (TextView) findViewById(R.id.tvHour);
    textWage = (TextView) findViewById(R.id.tvWage);
    editTip = (EditText) findViewById(R.id.etTip);
    editHour = (EditText) findViewById(R.id.etHour);
    Button bSubmit = (Button) findViewById(R.id.bSubmit);
    final Bundle bundle= new Bundle();
     final ArrayList<String> tipList = new ArrayList<String>();    
    final ArrayList<String> hourList = new ArrayList<String>();
    bSubmit.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            textHour.setText(editHour.getText().toString());
            textTip.setText(editTip.getText().toString());
            wage = Float.parseFloat(textTip.getText().toString()) / Float.parseFloat(textHour.getText().toString());
            String tip = String.format("$%.2f",wage);
            textWage.setText(String.valueOf(tip) + " an hour");     
            textHour.setText(editHour.getText() + " Hour(s)");
            textTip.setText("$" + editTip.getText());
            bundle.putStringArray(sTip,new String[] {editTip.getText().toString()});
            bundle.putStringArray(sHour,new String[] {editHour.getText().toString()});
            tipList.addAll(Arrays.asList(sTip));
            hourList.addAll(Arrays.asList(sHour));
            Intent i = new Intent(TipBookActivity.this,History.class);
            i.putExtras(bundle);

        }       
    });
}

public boolean onCreateOptionsMenu(Menu menu){
    super.onCreateOptionsMenu(menu);
    MenuInflater mMain = getMenuInflater();
    mMain.inflate(R.menu.main_menu,menu);
    return true;
}

public boolean onOptionsItemSelected(MenuItem item){
    switch (item.getItemId()){
    case R.id.menuHistory:
         startActivity(new Intent("com.smarticle.tipbook.HISTORY"));            
         return true;
    case R.id.menuClear:
        //set up next tutorials
        Toast display = Toast.makeText(this, "Clear History feature coming soon.", Toast.LENGTH_SHORT);
        display.show();
        return true;
    }
    return false;
}
} 
```

在历史活动中：

```
public class History extends Activity{

private ListView mainListViewTip;
private ListView mainListViewHour;
private ArrayAdapter<String>listAdapterTip;
private ArrayAdapter<String>listAdapterHour;
String sTip="sTip";
String sHour="sHour";

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.history_main);
        Bundle bundle= this.getIntent().getExtras();
        String[] array1 = bundle.getStringArray(sTip);
        String[] array2 = bundle.getStringArray(sHour);
        ListView mainListViewTip = (ListView) findViewById(R.id.mainListViewTip);
        ListView mainListViewHour = (ListView) findViewById(R.id.mainListViewHour);
        ArrayList<String> tipList = new ArrayList<String>();
        ArrayList<String> hourList = new ArrayList<String>();
        tipList.addAll(Arrays.asList(sTip));
        hourList.addAll(Arrays.asList(sHour));
        listAdapterTip = new ArrayAdapter<String>(this,R.layout.simplerow,tipList);
        listAdapterHour = new ArrayAdapter<String>(this,R.layout.simplerow,hourList);
        mainListViewTip.setAdapter(listAdapterTip);
        mainListViewHour.setAdapter(listAdapterHour);
    }

    } 
```

# android - 安卓相机对焦模式

> ID：11681262
> 
> 赞同：15
> 
> 时间：2012-07-27T04:00:40.867
> 
> 标签：android, android-intent, focus, byte, android-camera

我正在尝试制作一个自定义相机应用程序，我想让用户可以在此应用程序中选择对焦模式。

对焦模式是自动和触摸对焦

如果我们想在相机中使用触控对焦，如何入手？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-27T06:19:45.963

该功能取决于软件/硬件/制造商，我的建议是你首先找到一个像 Galaxy Nexus 这样的手机刷有 Android 4.x，然后尝试 android.hardware.Camera.Parameters.getMaxNumFocusAreas() ，如果返回值大于零那么你很幸运，然后可以使用 setFocusAreas() 来实现你的“触摸聚焦”功能。

为什么：

在旧的 Android 版本中，没有用于设置焦点区域的公共 API。尽管许多制造商设法创建了自己的 API 和实现，但他们不会分享。

Android 在 API 级别 14 中引入了重点领域 API，但是手机制造商可能会选择不实施（即选择坚持自己的解决方案）。要检查 API 是否受支持，您可以先调用 getMaxNumFocusAreasa()，如果它返回一个正整数，则表示手机确实实现了 API，您可以继续在相机应用中启用“触摸焦点”功能。（API 也是“人脸检测”功能的推动者之一，当人脸被识别时，相机应用程序使用 API 让相机自动对焦于人脸。）

关于如何正确使用 API，您可以参考 vanilla Android Camera 应用程序源代码。

参考：

1.  安卓相机 API

[getMaxNumFocusAreas()](http://developer.android.com/reference/android/hardware/Camera.Parameters.html#getMaxNumFocusAreas%28%29)

[设置焦点区域（）](http://developer.android.com/reference/android/hardware/Camera.Parameters.html#setFocusAreas%28java.util.List%3Candroid.hardware.Camera.Area%3E%29)

1.  Android 4.0 相机应用源码

[mInitialParams.getMaxNumFocusAreas()](https://android.googlesource.com/platform/packages/apps/Camera/+/30f26f912211751b4b28ac2f0e30af0430765214/src/com/android/camera/Camera.java#2224)

[mParameters.setFocusAreas()](https://android.googlesource.com/platform/packages/apps/Camera/+/30f26f912211751b4b28ac2f0e30af0430765214/src/com/android/camera/Camera.java#1832)

问候

陈子腾

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-08-27T16:10:32.747

尝试这个：

```
public void takePhoto(File photoFile, String workerName, int width, int height, int    quality) {
if (getAutoFocusStatus()){
    camera.autoFocus(new AutoFocusCallback() {
        @Override
        public void onAutoFocus(boolean success, Camera camera) {
            camera.takePicture(shutterCallback, rawCallback, jpegCallback);
        }
    }); 
}else{
    camera.takePicture(shutterCallback, rawCallback, jpegCallback);
} 
```

但是，我也看到了这个工作，可能更准确：

```
if (getAutoFocusStatus()){
    camera.autoFocus(new AutoFocusCallback() {
        @Override
        public void onAutoFocus(boolean success, Camera camera) {
           if(success) camera.takePicture(shutterCallback, rawCallback, jpegCallback);
        }
    }); 
}else{
    camera.takePicture(shutterCallback, rawCallback, jpegCallback);
} 
```

最后一张是在对焦成功完成的那一刻拍照。它非常适合与 QR 扫描码一起使用。我相信这同样适用于这样的情况。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-07-28T02:44:14.517

它已经实现了，但是如果我想添加触摸到焦点，如何修改它？

```
public void takePhoto(File photoFile, String workerName, int width, int height, int    quality) {
    if (getAutoFocusStatus()){
        camera.autoFocus(new AutoFocusCallback() {
            @Override
            public void onAutoFocus(boolean success, Camera camera) {
                camera.takePicture(shutterCallback, rawCallback, jpegCallback);
            }
        }); 
    }else{
        camera.takePicture(shutterCallback, rawCallback, jpegCallback);
    }

    this.photoFile = photoFile;
    this.workerName = workerName;
    this.imageOutputWidth = width;
    this.imageOutputHeight = height;
}

public void takePhoto(File photoFile, int width, int height, int quality) {
    takePhoto(photoFile, null, width, height, quality);
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-02-24T13:32:59.917

我试图在我的应用程序中实现焦点功能，并以我想要的方式实现了这个功能。要实现`Touch to Focus`，请参考下面的代码。

*CameraPreview.java*

```
public class CameraPreview extends SurfaceView implements
    SurfaceHolder.Callback {
private SurfaceHolder mSurfaceHolder;
private Camera mCamera;
private OnFocusListener onFocusListener;

private boolean needToTakePic = false;

private Camera.AutoFocusCallback myAutoFocusCallback = new Camera.AutoFocusCallback() {

    @Override
    public void onAutoFocus(boolean arg0, Camera arg1) {
        if (arg0) {
            mCamera.cancelAutoFocus();
        }
    }
};

// Constructor that obtains context and camera
@SuppressWarnings("deprecation")
public CameraPreview(Context context, Camera camera) {
    super(context);
    this.mCamera = camera;
    this.mSurfaceHolder = this.getHolder();
    this.mSurfaceHolder.addCallback(this);
    this.mSurfaceHolder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);
    this.onFocusListener = (OnFocusListener) context;
}

@Override
public void surfaceCreated(SurfaceHolder surfaceHolder) {
    try {
        mCamera.setPreviewDisplay(surfaceHolder);
        mCamera.getParameters().setFocusMode(Camera.Parameters.FOCUS_MODE_AUTO);
        mCamera.setDisplayOrientation(90);
        mCamera.startPreview();
    } catch (IOException e) {
        // left blank for now
        e.printStackTrace();
    }
}

@Override
public void surfaceDestroyed(SurfaceHolder surfaceHolder) {
    mCamera.stopPreview();
    this.mSurfaceHolder.removeCallback(this);
    mCamera.release();
}

@Override
public void surfaceChanged(SurfaceHolder surfaceHolder, int format,
                           int width, int height) {
    // start preview with new settings
    try {
        mCamera.setPreviewDisplay(surfaceHolder);
        mCamera.startPreview();
    } catch (Exception e) {
        // intentionally left blank for a test
        e.printStackTrace();
    }
}

/**
 * Called from PreviewSurfaceView to set touch focus.
 *
 * @param - Rect - new area for auto focus
 */
public void doTouchFocus(final Rect tfocusRect) {
    try {
        List<Camera.Area> focusList = new ArrayList<Camera.Area>();
        Camera.Area focusArea = new Camera.Area(tfocusRect, 1000);
        focusList.add(focusArea);

        Camera.Parameters param = mCamera.getParameters();
        param.setFocusAreas(focusList);
        param.setMeteringAreas(focusList);
        mCamera.setParameters(param);

        mCamera.autoFocus(myAutoFocusCallback);
    } catch (Exception e) {
        e.printStackTrace();
    }

    if (isNeedToTakePic()) {
        onFocusListener.onFocused();
    }
}

@Override
public boolean onTouchEvent(MotionEvent event) {

    if (event.getAction() == MotionEvent.ACTION_DOWN) {
        float x = event.getX();
        float y = event.getY();

        Rect touchRect = new Rect(
                (int) (x - 100),
                (int) (y - 100),
                (int) (x + 100),
                (int) (y + 100));

        final Rect targetFocusRect = new Rect(
                touchRect.left * 2000 / this.getWidth() - 1000,
                touchRect.top * 2000 / this.getHeight() - 1000,
                touchRect.right * 2000 / this.getWidth() - 1000,
                touchRect.bottom * 2000 / this.getHeight() - 1000);

        doTouchFocus(targetFocusRect);
    }

    return false;
}

public boolean isNeedToTakePic() {
    return needToTakePic;
}

public void setNeedToTakePic(boolean needToTakePic) {
    this.needToTakePic = needToTakePic;
}
} 
```

*MainActivity.java*

```
public class MainActivity extends Activity
    implements OnFocusListener {
private Button captureButton, switchCameraButton;
private Camera mCamera;
private CameraPreview mCameraPreview;
private int currentCameraId;

/**
 * Called when the activity is first created.
 */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    if (getIntent().hasExtra("camera_id")) {
        currentCameraId = getIntent().getIntExtra("camera_id", Camera.CameraInfo.CAMERA_FACING_BACK);
    } else {
        currentCameraId = Camera.CameraInfo.CAMERA_FACING_BACK;
    }

    captureButton = (Button) findViewById(R.id.button_capture);
    captureButton.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(final View v) {
            // Obtain MotionEvent object
            v.setEnabled(false);
            mCameraPreview.setNeedToTakePic(true);
            long downTime = SystemClock.uptimeMillis();
            long eventTime = SystemClock.uptimeMillis() + 100;
            float x = mCameraPreview.getWidth() / 2;
            float y = mCameraPreview.getHeight() / 2;
            // List of meta states found here:     developer.android.com/reference/android/view/KeyEvent.html#getMetaState()
            int metaState = 0;
            MotionEvent motionEvent = MotionEvent.obtain(
                    downTime,
                    eventTime,
                    MotionEvent.ACTION_DOWN,
                    x,
                    y,
                    metaState
            );

            // Dispatch touch event to view
            mCameraPreview.dispatchTouchEvent(motionEvent);
        }
    });

    switchCameraButton = (Button) findViewById(R.id.button_switch_camera);
    switchCameraButton.setVisibility(
            Camera.getNumberOfCameras() > 1 ? View.VISIBLE : View.GONE);
    switchCameraButton.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View v) {
            mCamera.stopPreview();
            //NB: if you don't release the current camera before switching, you app will crash
            mCameraPreview.getHolder().removeCallback(mCameraPreview);
            mCamera.release();

            //swap the id of the camera to be used
            if (currentCameraId == Camera.CameraInfo.CAMERA_FACING_BACK) {
                currentCameraId = Camera.CameraInfo.CAMERA_FACING_FRONT;
            } else {
                currentCameraId = Camera.CameraInfo.CAMERA_FACING_BACK;
            }

            mCamera = getCameraInstance(currentCameraId);
            mCameraPreview = new CameraPreview(MainActivity.this, mCamera);
            FrameLayout preview = (FrameLayout) findViewById(R.id.camera_preview);
            preview.removeAllViews();
            preview.addView(mCameraPreview);
        }
    });
}

@Override
protected void onResume() {
    super.onResume();
    mCamera = getCameraInstance(currentCameraId);
    mCameraPreview = new CameraPreview(this, mCamera);
    FrameLayout preview = (FrameLayout) findViewById(R.id.camera_preview);
    preview.addView(mCameraPreview);
}

/**
 * Helper method to access the camera returns null if it cannot get the
 * camera or does not exist
 *
 * @return
 */
private Camera getCameraInstance(int currentCameraId) {
    Camera camera = null;
    try {
        camera = Camera.open(currentCameraId);
    } catch (Exception e) {
        // cannot get camera or does not exist
    }
    return camera;
}

Camera.PictureCallback mPicture = new Camera.PictureCallback() {
    @Override
    public void onPictureTaken(byte[] data, Camera camera) {
        File pictureFile = getOutputMediaFile();
        if (pictureFile == null) {
            return;
        }
        try {
            FileOutputStream fos = new FileOutputStream(pictureFile);
            fos.write(data);
            fos.close();
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
};

private static File getOutputMediaFile() {
    File mediaStorageDir = new File(
            Environment
                    .getExternalStoragePublicDirectory(Environment.DIRECTORY_PICTURES),
            "MyCameraApp");
    if (!mediaStorageDir.exists()) {
        if (!mediaStorageDir.mkdirs()) {
            Log.d("MyCameraApp", "failed to create directory");
            return null;
        }
    }
    // Create a media file name
    //        String timeStamp = new SimpleDateFormat("yyyyMMdd_HHmmss")
    //                .format(new Date());
    File mediaFile;
    mediaFile = new File(mediaStorageDir.getPath() + File.separator
            + "IMG_" + "DEMO_" + ".jpg");
    if (mediaFile.exists()) mediaFile.delete();

    return mediaFile;
}

@Override
public void onFocused() {
    new Handler().postDelayed(new Runnable() {
        @Override
        public void run() {
            mCamera.takePicture(null, null, mPicture);
            mCameraPreview.setNeedToTakePic(false);
            captureButton.setEnabled(true);
        }
    }, 1500);
}
} 
```

*activity_main.xml*

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical">

<FrameLayout
    android:id="@+id/camera_preview"
    android:layout_width="fill_parent"
    android:layout_height="0dp"
    android:layout_weight="1" />

<Button
    android:id="@+id/button_switch_camera"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_gravity="center"
    android:text="Switch Camera" />

<Button
    android:id="@+id/button_capture"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_gravity="center"
    android:text="Capture" />

</LinearLayout> 
```

您可以在 Github 上找到示例应用程序[- 自定义相机应用程序](https://github.com/JaydipZala/Custom-Camera)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-12-23T02:20:42.380

调用它来启用触控对焦模式：

```
private void setTouchToFocusMode(Camera.Parameters parameters){
    String focusMode;
    if (parameters.getSupportedFocusModes().contains(Camera.Parameters.FOCUS_MODE_AUTO)) {
        focusMode = Camera.Parameters.FOCUS_MODE_AUTO;
    }
    if (focusMode != null && focusMode.length() > 0){
        parameters.setFocusMode(focusMode);
    }
} 
```

当用户点击屏幕时，在下面调用这个来设置焦点区域：

```
private static final int FOCUS_WIDTH = 80;
private static final int FOCUS_HEIGHT = 80;

public static String setFocalPoint(Camera.Parameters params, int x, int y){
    String focusMode = "";
    if (params != null && params.getMaxNumFocusAreas() > 0) {
        List<Camera.Area> focusArea = new ArrayList<Camera.Area>();
        focusArea.add(new Camera.Area(new Rect(x, y, x + FOCUS_WIDTH, y + FOCUS_HEIGHT), 1000));

        params.setFocusAreas(focusArea);

        if(params.getMaxNumMeteringAreas() > 0) {
            params.setMeteringAreas(focusArea);
        }
        if(params.getSupportedFocusModes().contains(Camera.Parameters.FOCUS_MODE_AUTO)) {
            params.setFocusMode(Camera.Parameters.FOCUS_MODE_AUTO);
            focusMode = Camera.Parameters.FOCUS_MODE_AUTO;
        }
    }
    return focusMode;
} 
```

调用 autoFocus/cancelAutoFocus 进行操作：

```
mCamera.cancelAutoFocus();    
mCamera.autoFocus(mAutoFocusCallback); 
```

# c# - 如何在asp.net中设计搜索多个字段

> ID：11681263
> 
> 赞同：2
> 
> 时间：2012-07-27T04:00:48.743
> 
> 标签：c#, asp.net, sql, sql-server

[形式]: ![要考虑的形式][形式]

[形式]：![访问表格](../Images/c553af1397a187515c97b0b8f877e4df.png)

我有这些来自 Access 的表格。在这里，我正在 asp.net 上开发搜索应用程序。我有 2 个具有相同数据结构的重型数据库，其中一个数据库包含大约 12000 个字段，另一个包含大约 12000 个字段。9000 条记录。我想用任何标准搜索记录说，

经销商编号 = 3123 和 DLicenceNo = 3242314

在这里，我假设如果用户提供了一个字段文本，那么它只被认为是搜索，而其他的则被忽略。

无论如何要为此构建查询而不是使用长 if 子句？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T05:53:18.623

可能需要一些调整，但是，首先命名所有文本框控件在数据库中的列名

```
var conditionals = new Dictionary<string, string>();

foreach(Control c in Page.Controls)
{
    if (c is TextBox)
    {
        if (!String.IsNullOrEmpty(c.Text))
            conditionals.Add(c.Id, c.Text);
    }
} 
```

从那里您可以非常小心地构建一个查询，该查询仅具有基于您的条件字典的正确 where 子句。理想情况下，您可以确保它已参数化一些如何避免 SQL 注入的所有担忧。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T04:17:46.753

我使用存储过程，传递参数默认值，像这样：

```
select field1,field2,... from table1 where 
(dealer_number= @dealer_number or @dealer_number='0')
and (d_licence_no=@d_licence_no or @d_licence_no='0') 
```

如果您没有为此搜索使用某些参数，只需发送其默认值，该条件将被忽略。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T04:16:32.070

你可以使用`Sql Case`语句，它们易于管理，查询可以像

```
declare @SearchItem varchar(50);
declare @SearchValue int;

SELECT column1, column2
FROM table
WHERE
@SearchValue = 
  CASE @SearchItem 
      WHEN 'Dealer Number' THEN ''
      WHEN 'DLicenceNo ' THEN ''

  END 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-27T20:02:53.077

使用具有所有搜索条件的存储过程作为您的 sp 参数，并在您不想应用任何条件时将其传递给 null。sp 将作为

```
Create procedure usp_search
(
   @dealerNumber int=null,
    @licenseNumber int=null
)
as 
select * from table where
dealerNumber= isnull(@dealerNumber,dealerNumber)
and licenseNumber = isnull(@licenseNumber ,licenseNumber ) 
```

# php - 从php中的mysql时间字段添加多次

> ID：11681264
> 
> 赞同：1
> 
> 时间：2012-07-27T04:00:52.440
> 
> 标签：php, mysql, time

我有一个具有以下结构的表，我想获得某个`album_id`&的所有时间的总和`disc`。我找到了这个[http://board.phpbuilder.com/showthread.php?10326769-RESOLVED-time-help](http://board.phpbuilder.com/showthread.php?10326769-RESOLVED-time-help)它看起来有点好（第一个答案中的第一段代码），但我不知道如何工作我的 mysql...

表结构：

```
CREATE TABLE IF NOT EXISTS `tracks` (
  `id` int(255) NOT NULL AUTO_INCREMENT,
  `artist_id` int(255) NOT NULL,
  `album_id` int(255) NOT NULL,
  `disc` int(3) NOT NULL,
  `track_no` int(3) NOT NULL,
  `title` varchar(255) NOT NULL,
  `length` time NOT NULL,
  `size` decimal(20,1) NOT NULL,
  `plays` int(255) NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `artist_id` (`artist_id`,`album_id`,`disc`,`track_no`,`title`)
) ; 
```

任何帮助是极大的赞赏。我是菜鸟！！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T04:17:20.620

也许这会做。

```
SELECT album_id, disc, SEC_TO_TIME(SUM(TIME_TO_SEC(length))) AS formatTime
FROM tracks
GROUP BY album_id, disc
HAVING album_id=id AND disc=disc 
```

仅适用于特定专辑和光盘：

```
SELECT album_id, disc, SEC_TO_TIME(SUM(TIME_TO_SEC(length))) AS formatTime
FROM tracks
WHERE album_id=id AND disc=disc 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T04:35:32.090

```
//this is the album we want
$album = 24;

//grab all the track lengths and plays from our album
$query = '
SELECT length, plays
FROM tracks
WHERE album_id = "'.$album.'";

//do our mysql query
$result = mysql_query($query) or die(mysql_error());

//now for every result do somthing like add the length of the songs or play count
$length = null;
$plays = null;
while ($row = mysql_fetch_assoc($result)) {
  $length = $length + $row["length"];
  $pays = $plays + $row["plays"];
}

//echo data to user
echo 'The total lenth of this albums is:'.$length.'mins';
echo 'this ablum as been played:'.$plays.'times'; 
```

# atlassian-crucible - Crucible 2.7 - 更新评论中的所有过时文件

> ID：11681265
> 
> 赞同：4
> 
> 时间：2012-07-27T04:01:04.177
> 
> 标签：atlassian-crucible

现在，要更新我的坩埚评论中的过时文件，我导航到各个文件，查看文件是否过时（通过查找“文件过时”链接），然后如果我是作者，则将最新修订添加到评论中/主持人。假设我知道自己在做什么，我想知道是否可以一键更新评论中的所有过时文件。

我确实读过他们的文档，但没有提到这样的事情。你们都单独更新文件吗？有什么插件可以帮助我更新坩埚评论中的所有过时文件吗？

# c# - 使用未分配的变量错误

> ID：11681266
> 
> 赞同：0
> 
> 时间：2012-07-27T04:01:05.797
> 
> 标签：c#, unassigned-variable

我正在制作一个程序来在文本框中添加用逗号（，）分隔的列表数字。示例：我的总数为 1,12,5,23 += num; 我一直在使用未分配的局部变量。

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;

namespace WindowsFormsApplication1
{
public partial class Form1 : Form
{
    public Form1()
    {
        InitializeComponent();
    }

    private void button1_Click(object sender, EventArgs e)
    {
        string str = textBox1.Text;
        char[] delim = { ',' };
        int total;
        int num;
        string[] tokens = str.Split(delim);

        foreach (string s in tokens)
        {

           num = Convert.ToInt32(s);
           total += num;

        }
        totallabel.Text = total.ToString();

    }
   }
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T04:04:20.180

你需要改变

```
int total; 
```

至

```
int total = 0; 
```

原因是，如果你仔细观察

```
total += num; 
```

它也可以写成

```
total = total + num; 
```

在第一次使用中，将取消分配总数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T06:58:54.103

其他答案是正确的，但我将提供一个不需要初始化变量的替代 FWIW，因为它只分配给一次。:)

```
var total = textBox1.Text
    .Split(',')
    .Select(n => Convert.ToInt32(n))
    .Sum(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T04:04:35.573

您没有为总计分配初始值，也许您需要：

```
int total = 0; 
```

# android - 如何在 android listview 或 gridview 中动态添加图像/图像按钮

> ID：11681267
> 
> 赞同：1
> 
> 时间：2012-07-27T04:01:12.833
> 
> 标签：android

我有一个情感图标列表（超过 100 个图标）。
我想在一个视图中显示人们可以点击它并为他点击的内容敬酒。
![情感图标](../Images/0c82f3721d579881d76e6e534c3fda5f.png) 现在，我有一些令人困惑的地方：
1）我应该使用哪些视图来包含所有这些图标（GridView 或 ListView）？
2）如何动态添加它们或以编程方式添加它们？如果我一一声明，我认为是不行的。但还有其他想法吗？
所有图像图标都在可绘制文件夹中。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T04:07:50.580

`GridView`在这种情况下使用 a 会更好`PopupWindow`。获取一个 HashMap 并将笑脸的名称存储为字符串，并将其图像存储为资源 ID。

例如：-

```
HashMap<String, Integer> map = new  HashMap<String, Integer>();
map.put("smile", R.drawable.smile);
.... 
```

现在，遍历 HashMap 的所有值（图像）并从 HashMap 值（图像）填充您的 GridView。

而且，在 Adapter 类中，您可以使用`map.get(key);`ImageView 显示图像并设置资源。

**更新：**

我刚刚创建了一个小演示，您可以从中查看[`here`](http://www.4shared.com/zip/eSXqzjp-/SmileyDemo.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T04:09:50.470

您告诉您需要的视图，网格视图将是更好的选择，您可以在其中添加动态值

```
private ArrayList<Photo> mPhotos;
private BaseAdapter mAdapter;
private GridView mGridView;

onCreate:

/* other things here */

mAdapter = new MyAdapter(mPhotos);
mGridView.setAdapter(mAdapter); 
```

// 将新图像添加到列表中

```
mPhotos.add(photo);
mAdapter.notifyDataSetChanged(); 
```

看到这个答案会帮助你

[使用 ImageAdapter 以动态/编程方式使用 ImageView 填充 GridView](https://stackoverflow.com/questions/4705145/populating-a-gridview-with-imageviews-dynamically-programmatically-using-a-image)

# asp.net - 从 asp.net mvc 输入数据

> ID：11681269
> 
> 赞同：0
> 
> 时间：2012-07-27T04:01:34.580
> 
> 标签：asp.net, asp.net-mvc

我想在 asp.net mvc 中从（服务器端）模型自动插入用户名、用户 ID、日期这样的东西我如何插入这样的模型？

```
public class Enquiry
{
    public int ID { get; set; }
    public DateTime Date { get; set; }
    [Required]
    public string Name { get; set; }
    public string Contactno { get; set; }
    public string Remarks { get; set; }
    public string UserId { get; set; }
    public string UserName { get; set; }
    public string Editdate { get; set; }
    public string status { get; set; }

}

public class EnquiryDBContext : DbContext
{
    public DbSet<Enquiry> Enquiries { get; set; }

} 
```

如何从控制器或模型中插入日期而不从视图中插入？

我的控制器是这样的

```
 [HttpPost]
    public ActionResult Create(Enquiry enquiry)
    {
        if (ModelState.IsValid)
        {

            db.Enquiries.Add(enquiry);
            db.SaveChanges();
            return RedirectToAction("Index");
        }

        return View(enquiry);
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T09:12:37.843

公里，

只需在操作中填充日期，`HttpGet`然后将其传递给视图。这是一个片段：

控制器：

```
[HttpGet]
public ActionResult Create()
{
    Enquiry enquiry = new Enquiry();
    enquiry.Date = DateTime.UtcNow;
    // set any other required properties
    return View(enquiry);
} 
```

在您的创建视图中：

```
// ref to base model
@model yournamespace.Models.Enquiry

// add the date from the controller as a hidden field
@Html.HiddenFor(m => m.Date)
<!-- other properties --> 
```

然后，只需`HttpPost`像以前一样使用您的操作方法-瞧！

# ios - UItableViewCell imageview 在选择时改变

> ID：11681273
> 
> 赞同：14
> 
> 时间：2012-07-27T04:02:08.090
> 
> 标签：ios, uitableview, uiimageview

我正在使用 webcache 加载 facebook 用户列表，它的效果非常好。在您选择其中一个单元格之前，它似乎改变了内容模式，或者更有可能改变了 uiimageview 框架的大小，但基于图片的实际大小。为了清楚起见，这里有一些屏幕

在这里加载 [http://img.photobucket.com/albums/v246/homojedi/Screenshot20120727114807.png](http://img.photobucket.com/albums/v246/homojedi/Screenshot20120727114807.png)

在选择一些图像时，你可以看到它们似乎跳到了它们原来的样子。 [http://img.photobucket.com/albums/v246/homojedi/Screenshot20120727114827.png](http://img.photobucket.com/albums/v246/homojedi/Screenshot20120727114827.png)

正如预期的那样，如果我将它们从屏幕上滚动并返回到它们，它们会恢复到开始时的状态。

真是莫名其妙。我唯一没有尝试过的是将 uitableView 子类化并在那里设置其布局子视图。除此之外，我还能做些什么吗？

编辑：请求的代码

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    // typically you need know which item the user has selected.
    // this method allows you to keep track of the selection
    _indexPath = indexPath;

    [_indexPath retain];
} 
```

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2013-06-15T11:54:43.773

我遇到了和你一样的问题，我解决了

问题是由您将 imageView 命名为“imageView”引起的

我不知道为什么

如果您更改 imageView 名称，例如“m_imageView”

问题已解决

一切都是为了命名！

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2015-07-16T03:40:25.783

我遇到了这个问题，但我`imageView`的自定义 UITableViewCell 中没有属性。

事实上，我确实犯了一个愚蠢的错误，将我的 imageView 对象中的**一个额外的 IBOutlet 连接**到 UITableViewCell 的默认`imageView`属性。这是因为我最初命名了我的 image view `imageView`，但后来我改变了它并忘记了出口。

![额外的出口](../Images/1b95a60f10dfbc2f84c6511a3632bd41.png)

取下插座后，一切正常。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2014-07-04T16:00:31.190

以防万一像我这样的其他人遇到上述方法都不起作用的问题。

我也命名了我的`UIImageView`: `imageView`。**但是**，由于某种原因，**即使在重命名后**，问题仍然存在。我尝试了我能想到的一切，重置模拟器，清理项目，添加删除约束......

**事实证明**，只需从情节提要中**删除并****拖动一个新的**即可修复它。`UIImageView`

 **不可能是预编译问题，因为我清理了项目。去搞清楚。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-31T04:16:49.760

我遇到了这个问题，我解决了！！！

检查以确保您在自定义 TableViewCell 中合成了 imageView 属性。

我忘了合成一个属性（导致 IBOutlet 没有 getter/setter）。

这个话题很老，但希望对其他人有所帮助！

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-05-20T06:51:32.067

```
// reason for this problem is UITableView cell's imageview initially has a default size later on it resize it self on select so following cab be a solution for this: (Using AFNetworking to set image/ You can adjust accordingly)

            __weak UItableViewCell *cellTemp = cell;

            [cell.imageView setImageWithURLRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:strURL]]
                                  placeholderImage:[UIImage imageNamed:@"placeholder"]
        success:^(NSURLRequest *request, NSHTTPURLResponse *response, UIImage *image)
            {
                cellTemp.imageView.image = image;

                CGRect frameRect = cellTemp.imageView.frame;
                frameRect.origin.y = (cellTemp.frame.size.height - image.size.height)/2;
                frameRect.size.width = image.size.width;
                frameRect.size.height = image.size.height;
                cellTemp.imageView.frame = frameRect;

                [cellTemp layoutSubviews]; 
    // this will fit your cell's label

            }
        failure:^(NSURLRequest *request, NSHTTPURLResponse *response, NSError *error)
            {

            }]; 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-11-04T08:28:03.590

添加有关命名问题的答案：

如前所述，图像视图的问题即使在重命名后仍然存在。但不需要`UIImageView`从您的 xib 或情节提要中删除。您可以简单地按住 ctrl 并单击图像视图并删除与`imageView`仍然存在的属性的连接。

链接`imageView`仍然存在的原因似乎是该`imageView`属性在您在代码中删除后仍然可用。它仍然存在，因为它继承自`UITableViewCell`.

最后一个提示听起来很愚蠢，但我花了几分钟才意识到：显然所有使用属性名称的代码`imageView`仍然可以工作，但会导致奇怪的行为！因此，请仔细检查是否没有使用旧属性名称的代码。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-07-27T12:17:58.777

我相信你的问题是由于 UIImageView。您应该设置一次图像 - cell.imageView.image = myImage。不要设置 highlightImage。设置 contentMode 以保持图像的纵横比：cell.imageView.contentMode = UIViewContentModeScaleAspectFit;，并验证 contentStretch rect 是否为 0,0,1,1（默认值）。

当它被选中时，tableView 可能正在更改 UIImageView 或其框架的 contentMode（谁知道原因）。我会将 NSLogs 添加到 willSelectRowAtIndexPath 和 didSelectRowAtIndexPath 中，显示相同的信息：imageView 框架、contentMode 值（作为整数）等。这些值中的一个或多个在选择时会发生变化。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2015-10-09T12:43:06.037

我有同样的问题，即使在尝试了所有以前的答案之后，他们都没有成功。后来我发现 UITableViewController 有多个未使用的 Outlets，因此删除未使用的 Outlets 解决了问题。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-04-18T21:45:35.003

// 如果你继承 UITableViewCell 你可以摆脱这个问题

```
- (void)layoutSubviews {

    [super layoutSubviews];
    self.imageView.bounds = CGRectMake(10,5,65,65);
    self.imageView.frame = CGRectMake(10,5,65,65);
    self.imageView.contentMode = UIViewContentModeScaleAspectFit;

} 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-08-09T04:32:32.467

按照 sebastian-Luczak 的要求，我确实提出了调整大小的解决方案，但现在图像质量不一致，只有当你触摸它时它才会获得更高的分辨率，奇怪但没有那么糟糕或引人注目，无论如何这里是代码。

注意我正在使用[SDWebImage](https://github.com/rs/SDWebImage/ "SDWebImage")异步加载图片

```
[cell.imageView setImageWithURL:[NSURL URLWithString:path] placeholderImage:[UIImage imageNamed:@"Icon.png"]success:^(UIImage *image) 
 {
     cell.imageView.image = [image resizeImage:image newSize:CGSizeMake(38, 38)];

 } failure:^(NSError *error) 
 {

 }]; 
```**

# android - 在不加载到内存的情况下获取位图宽度和高度

> ID：11681274
> 
> 赞同：16
> 
> 时间：2012-07-27T04:02:23.937
> 
> 标签：android, bitmap

我是android的新手，所以我想知道有没有办法在不将位图加载到内存的情况下获取位图的尺寸。？？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-07-27T04:13:33.600

您可以使用 inJustDecodeBounds 设置 BitmapFactory.Options 以获取图像宽度和高度，而无需将位图像素加载到内存中

```
BitmapFactory.Options bitmapOptions = new BitmapFactory.Options();
bitmapOptions.inJustDecodeBounds = true;
BitmapFactory.decodeStream(inputStream, null, bitmapOptions);
int imageWidth = bitmapOptions.outWidth;
int imageHeight = bitmapOptions.outHeight;
inputStream.close(); 
```

更多细节：

> 公共布尔 inJustDecodeBounds
> 
> 自：API 级别 1 如果设置为 true，解码器将返回 null（无位图），但 out... 字段仍将设置，允许调用者查询位图而无需为其像素分配内存。

[http://developer.android.com/reference/android/graphics/BitmapFactory.Options.html#inJustDecodeBounds](http://developer.android.com/reference/android/graphics/BitmapFactory.Options.html#inJustDecodeBounds)

# c++ - 将指针放入 std::vector & 内存泄漏

> ID：11681279
> 
> 赞同：1
> 
> 时间：2012-07-27T04:02:56.640
> 
> 标签：c++, memory-leaks

```
class A {
public:
    void foo()
    {
        char *buf = new char[10];
        vec.push_back(buf);
    }

private:
    vector<char *> vec;
};

int main()
{
    A a;
    a.foo();
    a.foo();
} 
```

在`class A`,`foo()`分配一些内存并将指针保存到`vec`. 完成`main()`时`a`会解构，也会解构，`a.vec`但是分配的内存会被释放吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-27T04:04:44.550

内存不会被释放。要发布它，您需要将它放在 unique_ptr 或 shared_ptr 中。

```
class A {
   public:
     void foo()
     {
        unique_ptr<char[]> buf(new char[10]);
        vec.push_back(buf);
     }
   private:
     vector<unique_ptr<char[]>> vec;
}; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-27T05:41:14.943

或者你可以做一个析构函数

```
 ~A()
{
    for(unsigned int i =0; i < vec.size(); ++i)
         delete [] vec[i];
} 
```

编辑

正如所指出的，您还需要进行复制和分配（如果您打算使用它们）

```
class A
{
public:

    A& operator=(const A& other)
    {
        if(&other == this)
             return *this;

        DeepCopyFrom(other);

        return *this;
    }

    A(const A& other)
    {
        DeepCopyFrom(other);
    }

private:
    void DeepCopyFrom(const A& other) 
    {
        for(unsigned int i = 0; i < other.vec.size(); ++i) 
        {
            char* buff = new char[strlen(other.vec[i])];
            memcpy(buff, other.vec[i], strlen(other.vec[i]));
        }
    }

    std::vector<char*> vec;
}; 
```

更多关于深度复制的主题以及为什么在这里需要它

[http://www.learncpp.com/cpp-tutorial/912-shallow-vs-deep-copying/](http://www.learncpp.com/cpp-tutorial/912-shallow-vs-deep-copying/)

# node.js - 如何在 nodejs 中“要求”数据库模式

> ID：11681280
> 
> 赞同：1
> 
> 时间：2012-07-27T04:03:00.773
> 
> 标签：node.js, model, mongoose, require

nodejs中`require`猫鼬的最佳方法是什么？`Schema`

最初我在 app.js 文件中有这些，但随着模型的增多，它变得有点大而且笨拙。

现在我想将它们移动到一个`models`文件夹中并用于`Model = require('./models/model')`将它们导入 app.js

我如何获得它以`Model`填充实际模型？

（`exports = mongoose.model(...)`失败并给了我一个空白对象；`exports.model = mongoose.model(...)`需要我执行 Model.model 才能访问它——这些都不是所需的行为）

===

编辑1

所以基本上我已经采取了

```
var mongoose = require('mongoose');
var Schema = mongoose.Schema, ObjectId = Schema.ObjectId;

var UserSchema = new Schema({
  username: String,
  password: String,
  first_name: String,
  last_name: String,
  email: String
});
User = mongoose.model('User', UserSchema); 
```

并将其放入`./models/user.js`

我如何得到它，使其相当于在 app.js 中拥有它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T04:09:21.403

在您的 app.js 服务器文件中，包含 model.js 文件，如下所示：

```
var Model = require('./models/model');  //whatever you want to call it 
```

然后，您可以像这样在服务器文件中实例化它：

```
//Initiate the  Business API endpoints
var model = new Model(mq, siteConf);
model.getUser(id, function() {
    // handle result
}); 
```

## ----

然后在你的文件中你放置在`models`名为 model.js 的文件夹中（或任何你想要的）你可以像这样设置它：

```
var mongoose = require('mongoose'); 

//MongoDB schemas
var Schema = mongoose.Schema;

var User = new Schema({
  username: String,
  password: String,
  first_name: String,
  last_name: String,
  email: String
});
var UserModel = mongoose.model('User', User);

// your other objects defined ...

module.exports = function(mq, siteConf) {
//MongoDB
mongoose.connect(siteConf.mongoDbUrl);

// ------------------------
// READ API
// ------------------------

// Returns a user by ID
function getUser(id, found) {
    console.log("find user by id: " + id);
    UserModel.findById(id, found);
}

// Returns one user matching the given criteria
// mainly used to match against email/login during login
function getUserByCriteria(criteria, found) {
    console.log("find user by criteria: " + JSON.stringify(criteria));
    UserModel.findOne(criteria, found);
}

    // more functions for your app ...

return {
    'getUser': getUser, 
            'getUserByCriteria': getUserByCriteria
   };
}; 
```

# php - php读取mysql id显示01 02 03

> ID：11681281
> 
> 赞同：1
> 
> 时间：2012-07-27T04:03:13.920
> 
> 标签：php

我想 php 将我的 mysql 1 输出为 01，将 2 输出为 02 .... 等等，所以我先获取数据库 ID，然后我编写此代码用于输出

```
if ($id <10) {
    echo '0'.$id;
} else {
    echo $id;
} 
```

然后我想在我的班级中插入 $id 然后循环

```
 while ($sth <100) {
     $id = mysql_result($result,$mtt,"ID");
     echo "<div class='active_$id'>$info</div>";

  $sth++
} 
```

我应该如何更换

```
if ($id <10) {
    echo '0'.$id;
} else {
    echo $id;
} 
```

到`$id`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-27T04:06:24.967

你应该写：

```
$id = str_pad($id, 2, "0", STR_PAD_LEFT); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-27T04:05:33.870

您可以使用[str_pad](http://php.net/manual/en/function.str-pad.php)或[printf](http://php.net/manual/en/function.printf.php)。

```
str_pad($i, 2, '0', STR_PAD_LEFT); // works
printf("%02d", $i); // works too 
```

# objective-c - 引用C数组返回是什么意思？

> ID：11681282
> 
> 赞同：0
> 
> 时间：2012-07-27T04:03:50.303
> 
> 标签：objective-c, memory-management, convention

我第一次使用方法，我发现我没有记忆或不记忆`-[NSDictionary getObjects:andKeys:]`的描述政策。`free`我认为 * Returns by reference C arrays* 意味着它只是对内部内存块的引用，所以我不应该这样做`free`，但不确定。我应该`free`他们吗？

我认为对此有一些约定。什么是约定，或者我在哪里可以找到关于 Objective-C/Cocoa 上的 C 内存管理的约定或规则？（当然，我知道 Objective-C 级别的约定，但我的意思是使用 C 级别对象的情况）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T04:25:54.307

您不释放对象或键。他们将在字典发布时发布。虽然此调用在某些情况下可能很有用，但一般来说，如果您想迭代字典中的所有项目，我会尝试坚持使用其他方法，例如 -enumerateKeysAndObjectsUsingBlock 或 -allKeys。

# jquery - JQuery 自动完成：如何强制从列表中选择（键盘）

> ID：11681292
> 
> 赞同：28
> 
> 时间：2012-07-27T04:05:30.867
> 
> 标签：jquery, jquery-ui, jquery-ui-autocomplete

我正在使用 JQuery UI 自动完成。一切都按预期工作，但是当我使用键盘上的向上/向下键循环时，我注意到文本框按预期填充了列表中的项目，但是当我到达列表末尾并再次按下向下箭头时时间，我输入的原始术语出现了，这基本上允许用户提交该条目。

我的问题：是否有一种简单的方法可以将选择限制为列表中的项目，并从键盘选择中删除输入中的文本？

例如：如果我有一个包含的列表`{'Apples (AA)', 'Oranges (AAA)', 'Carrots (A)'}`，如果用户键入“app”，我将自动选择列表中的第一项（此处为“Apples (AA)”），但如果用户按下向下箭头，“app”再次出现在文本框中。我怎样才能防止这种情况？

谢谢。

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-12-17T15:36:20.150

for force selection, you can use ["change" event](http://api.jqueryui.com/autocomplete/#event-change) of Autocomplete

```
 var availableTags = [
            "ActionScript",
            "AppleScript"
        ];
        $("#tags").autocomplete({
            source: availableTags,
            change: function (event, ui) {
                if(!ui.item){
                    //http://api.jqueryui.com/autocomplete/#event-change -
                    // The item selected from the menu, if any. Otherwise the property is null
                    //so clear the item for force selection
                    $("#tags").val("");
                }

            }

        }); 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-07-11T19:10:57.923

这两个其他答案结合起来效果很好。

此外，您可以使用 event.target 清除文本。当您向多个控件添加自动完成功能或不想在选择器中输入两次（存在可维护性问题）时，这会有所帮助。

```
$(".category").autocomplete({
    source: availableTags,
    change: function (event, ui) {
        if(!ui.item){
            $(event.target).val("");
        }
    }, 
    focus: function (event, ui) {
        return false;
    }
}); 
```

然而，应该注意的是，即使“焦点”返回 false，向上/向下键仍将选择该值。取消此事件只会取消文本的替换。因此，“j”、“down”、“tab”仍将选择与“j”匹配的第一个项目。它只是不会在控件中显示它。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-27T04:31:10.453

`"Before focus is moved to an item (not selecting), ui.item refers to the focused item. The default action of focus is to replace the text field's value with the value of the focused item, though only if the focus event was triggered by a keyboard interaction. Canceling this event prevents the value from being updated, but does not prevent the menu item from being focused."`

[参考](http://jqueryui.com/demos/autocomplete/#event-focus)

焦点事件：

```
focus: function(e, ui) {
    return false;
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-06-24T13:12:57.813

定义一个变量

```
var inFocus = false; 
```

将以下事件添加到您的输入中

```
.on('focus', function() {
    inFocus = true;
})
.on('blur', function() {
    inFocus = false;
}) 
```

并将 keydown 事件附加到窗口

```
$(window)
    .keydown(function(e){
        if(e.keyCode == 13 && inFocus) {
            e.preventDefault();
        }
    }); 
```

# php - 如何使用 htacces 限制对文件夹及其子文件夹中所有文件的访问并重定向到主文件夹？

> ID：11681297
> 
> 赞同：2
> 
> 时间：2012-07-27T04:06:19.883
> 
> 标签：php, linux, .htaccess, elgg

所以我正在对我的（已经付费的）虚拟主机进行 15 天的试用，它们看起来非常好，至少在我获得 FTP 之前它们是这样的。

我有一个需要根目录之外的文件夹的 php 脚本

* * *

**例子：**

网站根：

`/users/websites/public_html/`<- 用户/浏览器可以访问的文件夹

该脚本需要一个文件夹：

`/users/websites/`<- 在根之上

例如`/users/websites/sensetive_data/`<- 浏览器不能访问这个

* * *

但这在我的网络主机上是不可能的`"because it's a shared hosting"`<-他们的回答。他们不能改变根路径。

所以我无法在上面创建任何目录或文件`/users/websites/public_html/`

所以，好吧，不要立即取消我的试用，也许我会尝试以另一种方式来做，我想使用 htacces 来限制对目录的访问，以及其中的所有文件及其子目录，

所以我可以将 'sensetive_data' 文件夹移动到`/users/websites/public_html/sensetive_data`

我希望它重定向到主页（所以当访问 /users/websites/public_html/sensetive_data/* [http://example.com/sensetive_data/*] 时，它将转到 /users/websites/public_html/ [http: //example.com/],

因此，即使用户知道确切的 url，他/她也会被重定向。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T04:20:34.600

在`/users/websites/sensetive_data/.htaccess`写：

```
Deny From All 
```

对于您需要自己更改的任何 PHP 脚本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T04:22:06.070

如果您想对文件夹进行重定向，请说`/users/websites/sensitive_data/`

在该文件夹中创建一个名为的文件`.htaccess`并添加以下内容（并指定要重定向到的 url）

```
Options -Indexes
ErrorDocument 403 http://mysite.net/ 
```

# c# - 将鼠标指针设置为另一种形式的位置

> ID：11681304
> 
> 赞同：1
> 
> 时间：2012-07-27T04:07:21.047
> 
> 标签：c#, winforms

在我的第一种形式（form1）中。我使用 mouseToStart() 函数使鼠标指针从特定位置开始。

```
private void mouseToStart()
{
    Point startingPoint = panel1.Location;
    startingPoint.Offset(155, 376);
    Cursor.Position = PointToScreen(startingPoint);
} 
```

然后我启动第二个表单（form2）。当在 form2 中单击一个按钮时，我希望它关闭并且鼠标返回到 form1 中 mouseToStart() 函数指定的位置。然而，这并没有发生。鼠标停留在我单击 form2 的位置，然后 form2 关闭。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T04:17:56.643

```
Form1 myForm1; // Set it to your instance of Form1
Point startingPoint = myForm1.panel1.Location; // You have to make panel1 public
startingPoint.Offset(155, 376);
Cursor.Position = myForm1.PointToScreen(startingPoint); 
```

# ocr - 如何在 tesseract 中合并 traindata 文件？

> ID：11681309
> 
> 赞同：3
> 
> 时间：2012-07-27T04:08:18.923
> 
> 标签：ocr, tesseract

大家好，有什么方法可以合并或组合不同字体的 traindata 文件并在 Tesseract-OCR 中使用它们？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-27T04:37:31.200

从 Tesseract 3.02 开始，您不需要合并或组合训练过的数据文件。命令如下：

```
tesseract image.tif out -l eng+spa 
```

# java - SVN（Subversion）降低系统/应用程序性能？

> ID：11681313
> 
> 赞同：-2
> 
> 时间：2012-07-27T04:08:55.523
> 
> 标签：java, svn, tortoisesvn

在应用程序使用SVN之前，应用程序运行流畅。为了集中系统我们开始使用SVN作为应用程序，此后应用程序变得缓慢。所以我推断这是由于SVN。或者我错了。所以我的问题是 SVN 会降低系统/应用程序的性能吗？

```
Application server is Tomcat 6

Subversion -TortoiseSVN 1.6.9 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T04:22:50.690

“SVN降低系统/应用程序性能”是正确的根据网络连接，与多台机器同步结帐，同步使用等。但是您可以控制您的subvserion性能。[这](http://www.ibm.com/developerworks/java/library/j-svnbins/index.html)是来自 IBM 的 SVN 性能调优文章。了解一下。

# c# - Windows 窗体应用程序的中间层缓存

> ID：11681324
> 
> 赞同：0
> 
> 时间：2012-07-27T04:10:03.357
> 
> 标签：c#, .net, windows, winforms

我有一个用 C# 4.0 编写的简单 Windows 窗体应用程序。该应用程序显示了数据库中的一些记录。该应用程序具有由用户发起的查询选项。

我们可以将数据库中的记录称为作业考虑两列 JobID 和 Status

这些由两个后台服务更新，实际上就像生产者消费者服务一样工作。作业的状态将由后面运行的这些服务更新。

现在对于可以选择从数据库中查询记录的用户来说，例如根据状态（提交、处理、完成）查询数据。这可能会导致数以千计的记录，并且 GUI 在显示这些大量数据时可能会遇到一些性能故障。

因此，将查询结果的块显示为页面很重要。在用户手动刷新或进行新查询之前，不会刷新 GUI。

举例来说，由于服务不断更新作业，因此作业状态在任何时间点都可能不同。页面在从数据库中获取数据时应该具有数据的基本要求。

我正在使用 LINQ to SQL 从数据库中获取数据。它很容易使用，但不需要中级缓存来满足这种需求。如果记录的数量非常多，使用进程内存来缓存结果会导致页面内存暴涨到极致。不幸的是，LINQ 没有为 DataContext 对象提供任何中间层缓存设施。

用 C# 4.0 + SQL Server + Windows 环境实现分页机制的最佳方法是什么？

我觉得一些替代方案有一个重复的表/数据库，可以将结果临时存储为缓存。或者使用 Enterprise Application Library 的 Application Cache Block。相信这是大部分开发者面临的典型问题。这是解决此问题的最有效方法。（注意：我的应用程序和数据库在同一个盒子上运行）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T04:46:59.033

虽然缓存是提高性能的可靠方法，但正确实施缓存策略可能比看起来更困难。问题是管理缓存过期或基本上确保缓存同步到所需的程度。因此，在考虑缓存之前，请首先考虑是否需要它。根据我从问题中收集到的信息，数据模型似乎相对简单，不需要任何连接。如果是这样，为什么不优化分页的表和索引呢？SQL 服务器和 Linq To SQL 将透明且轻而易举地处理数千条记录的分页。

您说得对，一次显示太多记录对 GUI 来说是禁止的，对用户来说也是禁止的。在任何给定时间，没有用户希望看到比填充屏幕更多的记录。考虑到数据在用户请求之前不需要刷新的约束，可以安全地假设查询的数量会相对较低。数据库与应用程序在同一个盒子上的附加约束进一步巩固了您不需要缓存的观点。SQL Server 已经在内部进行缓存。

所有关于性能调整的建议都表明您应该在尝试进行优化之前分析和测量性能。正如[Donald Knuth](http://en.wikipedia.org/wiki/Donald_Knuth)所说，过早优化是万恶之源。

# java - 用于性能的 volatile 同步组合

> ID：11681326
> 
> 赞同：12
> 
> 时间：2012-07-27T04:10:12.800
> 
> 标签：java, concurrency, volatile, synchronized

使用同步时会对性能产生影响。volatile 可以与 synchronized 结合使用以减少性能开销吗？例如，Counter 的实例将在多个线程之间共享，并且每个线程都可以访问 Counter 的公共方法。在下面的代码中，volatile 用于 getter，synchronized 用于 setter

```
public class Counter
{
    private volatile int count;

    public Counter()
    {
        count = 0;
    }

    public int getCount()
    {
        return count;
    }

    public synchronized void increment()
    {
        ++count;
    }   
} 
```

请让我知道这可能会在哪种情况下中断？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-27T05:03:39.017

是的，你绝对可以。事实上，如果你查看 的源代码`AtomicInteger`，它本质上就是他们所做的。`AtomicInteger.get`简单地返回`value`，这是一个`volatile int`（[链接](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/util/concurrent/atomic/AtomicInteger.java#AtomicInteger.get%28%29)）。与您所做的和他们所做的唯一真正的区别是他们使用 CAS 进行增量而不是同步。在现代硬件上，CAS 可以消除任何互斥；在较旧的硬件上，JVM 会在增量周围放置某种互斥锁。

易失性读取与非易失性读取一样快，因此读取速度会非常快。

不仅如此，`volatile`还保证字段不会撕裂：参见[JLS 17.7](http://docs.oracle.com/javase/specs/jls/se7/html/jls-17.html#jls-17.7)，它指定`volatile` `long`s 和`double`s 不受单词撕裂的影响。因此，您的代码可以与 a`long`和`int`.

正如 Diego Frehner 指出的那样，如果您在增量发生时获得“正确”的值，您可能看不到增量的结果——您将看到之前或之后。当然，如果`get`是同步的，您将在读取线程中获得完全相同的行为——您将看到增量前或增量后的值。所以无论哪种方式都是一样的。换句话说，说你不会看到正在发生的价值是没有意义的——除非你的意思是词撕裂，（a）你不会得到，（b）你永远不会想要。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-27T04:46:41.530

**1.**我个人使用过这种`volatile` **结合的** `synchronized`机制。

**2.**你**可以单独使用** `synchronized`，**你总是会得到一致的结果，但单独使用** `volatile` **不会**总是产生相同的结果。

**3.**这是因为 volatile 关键字不是同步原语。**它只是防止在线程上缓存值**，但**不会防止两个线程同时修改相同的值并将其写回。**

**4.** `volatile`在没有锁的情况下给**线程并发访问**，但随后使用`synchronized`将**只允许一个线程访问 this 以及类中的所有同步方法。**

**5.****两者都使用** 会做到这`volatile and synchronized`一点....

`volatile` **-**将更改的值反映到线程，并防止缓存，

`synchronized` **-**但是使用 synchronized 关键字，将确保只有一个线程可以访问类的同步方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T04:15:25.533

调用 getCount() 时，您不会总是得到最实际的计数。AtomicInteger 可能适合您。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-27T04:18:34.707

使用两者不会有性能提升。 [Volatile](http://www.javamex.com/tutorials/synchronization_volatile.shtml)通过防止缓存来保证在跨并行执行的线程读取/写入变量时变量的值将是一致的。 [Synchronized](http://docs.oracle.com/javase/tutorial/essential/concurrency/syncmeth.html)应用于方法时（如您在示例中所做的那样），一次只允许单个线程进入该方法并阻止其他线程直到执行完成。

# css - CSS 中 '★' 的内容显示为 'â～...'

> ID：11681328
> 
> 赞同：3
> 
> 时间：2012-07-27T04:10:19.343
> 
> 标签：css

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-27T04:13:40.810

Probably the text encodings (character sets) for your CSS and HTML files do not agree.

To set a stylesheet's encoding, use `@charset`; for example:

```
@charset "UTF-8"; 
```

To set an HTML page's encoding, use a `<meta>` tag (in the `<head>` section at the top); for example:

```
<meta http-equiv="Content-type" content="text/html;charset=utf-8"> 
```

or in HTML 5:

```
<meta charset="UTF-8"> 
```

The `@charset` of a stylesheet *must* agree with the encoding chosen for its HTML page.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-27T09:41:22.843

The reason is that the BLACK STAR “★” (U+2605) appears as UTF-8 encoded in the source that contains the CSS code, but that source is being interpreted as ISO-8859-1 encoded. The fix depends on where the CSS code is, on the server software, etc.

See [Declaring character encodings in CSS](http://www.w3.org/International/questions/qa-css-charset).

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-08-06T12:30:32.727

You can also specify it in its hexadecimal value, without adding the character encoding declaration.

Instead of:

```
content: '★'; 
```

it should be:

```
content: '\2605'; 
```

You can look it up here:

[https://graphemica.com/%E2%98%85](https://graphemica.com/%E2%98%85)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-10-05T11:04:11.743

In the slick-theme.css file i had : `@charset 'UTF-8'` , the single quote marks where the problem , i changed them to double quotes like so : `@charset "UTF-8"`. And it worked

# gerrit - 推送长提交消息 gerrit

> ID：11681330
> 
> 赞同：0
> 
> 时间：2012-07-27T04:10:39.190
> 
> 标签：gerrit

我有 gerrit 的问题。我想将一个分支推送到具有悠久历史提交的 gerrit。

提交消息过长导致推送分支时数据库崩溃的问题。

我不确定问题是否是提交消息太长或者它们包含作为数据库语法一部分的特殊字符。

我尝试“git reset --soft noCommit”并重置为第 5 次第一次提交。它解决了这个问题，但是当我更新分支时，历史提交消息返回，我不能再推送到 gerrit。

我正在寻找解决这个问题的方法。我无法更改提交消息。我如何更改数据库设置以接受长提交消息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T16:09:48.880

如果您无法更改提交消息，您是否要推送提交以供审核？您可能更愿意将他们推到 gerrit 绕过审查。

除此之外 - 我们需要更多关于出了什么问题的详细信息（服务器日志）

# google-app-engine - 在 Google App Engine 上定义 url 规则

> ID：11681332
> 
> 赞同：1
> 
> 时间：2012-07-27T04:11:10.470
> 
> 标签：google-app-engine, url, static, rule-engine

我将所有静态文件放在根目录中名为 html 的文件夹中。尝试访问 html 文件夹中的 index.html 时出现以下错误：

```
-
INFO     2012-07-27 04:07:44,847 dev_appserver.py:2952] "GET /images/logo_footer.jpg HTTP/1.1" 404 - 
```

这是文件夹结构：

![根应用程序目录](../Images/d154ac6b8483ce463096d55f6bed5568.png)

![html目录](../Images/6a714c9f732357467dfb0f1a3872148a.png)

**处理程序文件夹中的处理程序代码：**

```
class MainHandler(webapp.RequestHandler):
  def get (self, q):
    if q is None:
      q = '../html/index.html'

    path = os.path.join (os.path.dirname (__file__), q)
    self.response.headers ['Content-Type'] = ContentType.HTML_TEXT
    self.response.out.write (template.render (path, {})) 
```

以下是 app.yaml 上图片的 url 规则：

```
- url: /.*
  script: notify.app

# image files
- url: /(.*\.(bmp|gif|ico|jpeg|jpg|png))
  static_files: html/images/\1
  upload: html/images/(.*\.(bmp|gif|ico|jpeg|jpg|png)) 
```

我在这里做错什么了吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T08:06:50.887

您需要将该部分移动`url : /.*`到 app.yaml 中的图像文件部分之后。这些按顺序处理，并`/.*`匹配所有内容，因此从不使用第二`- url:`行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T05:27:40.137

很可能您有另一个首先匹配“/images/logo_footer.jpg”的网址，并且出现错误。

另外，不知道 static_files 路径中的 \1 是什么。

# ios - MonoTouch CopyCurrentNetworkInfo 不正确

> ID：11681335
> 
> 赞同：1
> 
> 时间：2012-07-27T04:12:07.727
> 
> 标签：ios, xamarin.ios, ssid, captivenetwork

我正在使用以下代码来获取当前的 SSID：

```
var dict = CaptiveNetwork.CopyCurrentNetworkInfo(curInterface);
string localSsid = dict [CaptiveNetwork.NetworkInfoKeySSID].ToString();
Console.Writeline("Current Local SSID: " + localSsid); 
```

但是，结果通常是过时的（大约几分钟或更长时间）。我注意到，如果我进入 iPad 上的设置并手动切换到另一个网络 5 秒钟然后切换回来，那么代码将捕获正确的 SSID。

我正在运行 iOS 5.0 和 MonoTouch 3.2.12。我的代码不正确还是 MonoTouch 或 iOS 中的错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T13:11:41.320

`MonoTouch.SystemConfiguration.CaptiveNetwork.CopyCurrentNetworkInfo`是对 Apple 的直接 p/invoke [`CNCopyCurrentNetworkInfo`](http://developer.apple.com/library/ios/documentation/SystemConfiguration/Reference/CaptiveNetworkRef/Reference/reference.html#//apple_ref/c/func/CNCopyCurrentNetworkInfo)。

IOW 没有缓存 MonoTouch 正在完成的数据，但是根据您的描述，我认为 iOS 正在自己做一些事情。不确定它是否会被视为错误，但我鼓励您向 Apple 填写[错误报告](https://bugreport.apple.com/)。

> 单点触控 3.2.12

那可能是 5.2.12 :-)

# android - mysql 肥皂调用不适用于 android 设备

> ID：11681336
> 
> 赞同：1
> 
> 时间：2012-07-27T04:12:08.887
> 
> 标签：android, mysql, web-services, android-emulator, ksoap2

我在调用 mysql 数据库调用soap webservices 的android 应用程序中开发了一个登录表单。它在android 模拟器上成功运行。但在android 真实设备上不起作用。请问我能做什么。请解释这里发生了什么。

我的安卓代码是：

```
package com.androidlogin.ws;
import java.net.SocketException;
import android.util.Log;
import org.ksoap2.SoapEnvelope;
import org.ksoap2.serialization.PropertyInfo;
import org.ksoap2.serialization.SoapObject;
import org.ksoap2.serialization.SoapPrimitive;
import org.ksoap2.serialization.SoapSerializationEnvelope;
import org.ksoap2.transport.HttpTransportSE;
import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;

public class AndroidLoginExampleActivity extends Activity {
private final String NAMESPACE = "http://ws.userlogin.com";
private final String URL = "http://111.223.128.10:8085/AndroidLogin/services/Login?wsdl";
private final String SOAP_ACTION = "http://ws.userlogin.com/authentication";
private final String METHOD_NAME = "authentication";
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    Button login = (Button) findViewById(R.id.btn_login);
    login.setOnClickListener(new View.OnClickListener() {

 public void onClick(View arg0) {
  loginAction();

  }
  });
  }

    private void loginAction(){
    SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);

    EditText userName = (EditText) findViewById(R.id.tf_userName);
    String user_Name = userName.getText().toString();
    EditText userPassword = (EditText) findViewById(R.id.tf_password);
    String user_Password = userPassword.getText().toString();

  //Pass value for userName variable of the web service
    PropertyInfo unameProp =new PropertyInfo();
    unameProp.setName("userName");//Define the variable name in the web service method
    unameProp.setValue(user_Name);//set value for userName variable
    unameProp.setType(String.class);//Define the type of the variable
    request.addProperty(unameProp);//Pass properties to the variable

  //Pass value for Password variable of the web service
    PropertyInfo passwordProp =new PropertyInfo();
    passwordProp.setName("password");
    passwordProp.setValue(user_Password);
    passwordProp.setType(String.class);
    request.addProperty(passwordProp);

    SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
    envelope.setOutputSoapObject(request);
    HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);
     ServiceConnection connection = getServiceConnection();
        connection.connect();
    try{
      connection.setConnectTimeout(60000);
        androidHttpTransport.call(SOAP_ACTION, envelope);
           SoapPrimitive response = (SoapPrimitive)envelope.getResponse();

           TextView result = (TextView) findViewById(R.id.tv_status);
           result.setText(response.toString());

    }

   catch(SocketException ex)
     {
   Log.e("Error : " , "Error on soapPrimitiveData() " + ex.getMessage());
     ex.printStackTrace();
     }

    }
    protected ServiceConnection getServiceConnection() throws IOException {
     return new AndroidServiceConnection(URL);
      }

      } 
```

在我的注销窗口上显示 dis 消息：07-20 04:26:22.728: D/SntpClient(71): request time failed: java.net.SocketException: Address family not supported by protocol

但我的 ip address.port 号码都是正确的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T06:10:37.940

尝试将其添加到您`AndroidManifest.xml`的：

```
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" /> 
```

您还需要捕获此异常：

```
 catch(SocketException ex)
       {
         Log.e("Error : " , "Error on soapPrimitiveData() " + ex.getMessage());
           ex.printStackTrace();
       } 
```

**更新**

尝试在清单文件中添加以下权限：

```
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.WAKE_LOCK"/> 
<uses-permission android:name="android.permission.CHANGE_WIFI_STATE" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
<uses-permission android:name="android.permission.ACCESS_WIFI_STATE" /> 
```

**编辑**

在 try 块之前添加几行代码：

```
 ServiceConnection connection = getServiceConnection();
    connection.connect(); 
```

在 try 块中，这样写：

```
 connection.setConnectTimeout(60000); //put a large value for timeout 
```

创建以下方法：

```
 protected ServiceConnection getServiceConnection() throws IOException {
        return new AndroidServiceConnection(url);
    } 
```

再次运行代码并立即尝试。

# c# - 如何将按钮中的文本设置为粗体，具体取决于它是否在 datagridview 中有信息

> ID：11681344
> 
> 赞同：-1
> 
> 时间：2012-07-27T04:13:53.070
> 
> 标签：c#, datagridview

如何将按钮中的文本设置为粗体，具体取决于它是否在 datagridview 中有信息。

下面是一个示例项目 - 创建一个 Windows 应用程序并将此代码放入。

我想要做的是，如果一个字段中有信息，我只想将那个单元格按钮字体加粗。

例如基于下面代码中的数据表

```
Row 1                    David                     Notes this row bold text in button

Row 2                    Sam                       Notes this row not

Row 3                    Christoff                 Notes this row not

Row 4                    Janet                     Notes this row bold text in button

Row 5                    Melanie                   Notes this row not 
```

代码：

```
private void Form1_Load(object sender, EventArgs e) {
    DataTable table = GetTable();

    DataGridViewColumn col = new DataGridViewTextBoxColumn();
    col.HeaderText = "Dosage";
    col.Width = 80;
    int colIndex = dataGridView1.Columns.Add(col);

    DataGridViewColumn col2 = new DataGridViewTextBoxColumn();
    col2.HeaderText = "Drug";
    col2.Width = 75;
    colIndex = dataGridView1.Columns.Add(col2);

    DataGridViewColumn col3 = new DataGridViewTextBoxColumn();
    col3.HeaderText = "Patient";
    col3.Width = 75;
    colIndex = dataGridView1.Columns.Add(col3);

    DataGridViewColumn col4 = new DataGridViewTextBoxColumn();
    col4.HeaderText = "Date";
    col4.Width = 40;
    colIndex = dataGridView1.Columns.Add(col4);

    DataGridViewButtonColumn buttonCol = new DataGridViewButtonColumn();
    buttonCol.Name = "btnNotes";
    buttonCol.HeaderText = "Notes";
    buttonCol.Text = "Notes";
    buttonCol.Width = 80;
    buttonCol.UseColumnTextForButtonValue = true;
    buttonCol.DefaultCellStyle.Font = new Font("Arial", 12, FontStyle.Bold);
    dataGridView1.Columns.Add(buttonCol);

    // Add items to the grid
    int i = 0;

    foreach(DataRow rows in table.Rows) {
        dataGridView1.Rows.Add();
        dataGridView1[1, i].Value = rows[0].ToString();
        dataGridView1[1, i].Value = rows[1].ToString();
        dataGridView1[2, i].Value = rows[2].ToString();
        dataGridView1[3, i].Value = rows[3].ToString();

        if (rows[3].ToString().Trim().Length != 0) {

            //Because there are notes in this field, I would like to set this button text only to bold
        }

        i++;
    }

}

static DataTable GetTable() {
    DataTable table = new DataTable();
    table.Columns.Add("Dosage", typeof(int));
    table.Columns.Add("Drug", typeof(string));
    table.Columns.Add("Patient", typeof(string));
    table.Columns.Add("BlaBlaBla", typeof(string));

    table.Rows.Add(25, "Indocin", "David", "Notes in here");
    table.Rows.Add(50, "Enebrel", "Sam", "");
    table.Rows.Add(10, "Hydralazine", "Christoff", "");
    table.Rows.Add(21, "Combivent", "Janet", "Notes in here");
    table.Rows.Add(100, "Dilantin", "Melanie", "");

    return table;    
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T04:52:51.093

希望这会对您有所帮助。我创建了一个更新按钮样式的计时器。

```
 DataGridViewButtonColumn buttonCol = new DataGridViewButtonColumn();
        public Form1()
        {
            InitializeComponent();

            DataGridViewColumn col = new DataGridViewTextBoxColumn();
            col.HeaderText = "Dosage";
            col.Width = 80;
            int colIndex = dataGridView1.Columns.Add(col);

            DataGridViewColumn col2 = new DataGridViewTextBoxColumn();
            col2.HeaderText = "Drug";
            col2.Width = 75;
            colIndex = dataGridView1.Columns.Add(col2);

            DataGridViewColumn col3 = new DataGridViewTextBoxColumn();
            col3.HeaderText = "Patient";
            col3.Width = 75;
            colIndex = dataGridView1.Columns.Add(col3);

            DataGridViewColumn col4 = new DataGridViewTextBoxColumn();
            col4.HeaderText = "Date";
            col4.Width = 40;
            colIndex = dataGridView1.Columns.Add(col4);

            buttonCol.Name = "btnNotes";
            buttonCol.HeaderText = "Notes";
            buttonCol.Text = "Notes";
            buttonCol.Width = 80;
            buttonCol.UseColumnTextForButtonValue = true;
            buttonCol.DefaultCellStyle.Font = new Font("Arial", 12);
            dataGridView1.Columns.Add(buttonCol);

            timer1.Start();
            timer1.Tick += new EventHandler(timer1_Tick);

        }

        void timer1_Tick(object sender, EventArgs e)
        {
            int i = 0;
            foreach (DataGridViewRow row in dataGridView1.Rows)
            {
                if (row.Cells[0].Value == null || row.Cells[1].Value == null || row.Cells[2].Value == null || row.Cells[3].Value == null)
                {
                    dataGridView1.Rows[i].Cells[4].Style.Font = new Font(dataGridView1.Font, FontStyle.Regular);
                }
                else
                {
                    dataGridView1.Rows[i].Cells[4].Style.Font = new Font(dataGridView1.Font, FontStyle.Bold);
                }
                i++;
            }
        }

        static DataTable GetTable()
        {
        DataTable table = new DataTable();
        table.Columns.Add("Dosage", typeof(int));
        table.Columns.Add("Drug", typeof(string));
        table.Columns.Add("Patient", typeof(string));
        table.Columns.Add("BlaBlaBla", typeof(string));

        table.Rows.Add(25, "Indocin", "David", "Notes in here");
        table.Rows.Add(50, "Enebrel", "Sam", "");
        table.Rows.Add(10, "Hydralazine", "Christoff", "");
        table.Rows.Add(21, "Combivent", "Janet", "Notes in here");
        table.Rows.Add(100, "Dilantin", "Melanie", "");

        return table;
        } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-27T05:31:04.773

检查您绑定到gridview的数据表中的数据

如果它包含任何数据，即。

```
gridview.datasource = datatable;
gridview.databind();
if(datatable.rows.count != 0)
{
 button.Font.Bold = true;
}
else
{
 button.Font.Bold = false;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T05:42:10.377

```
Button btn = (Button)datagridview1.FindControl("Button1");

if(datatable.rows.count != 0)
{ 
  button.Font.Bold = true; 
} 
else 
{ 
  button.Font.Bold = false;
} 
```

# ruby-on-rails - 将表示逻辑放在控制器中是 Ruby 的一个好习惯吗？

> ID：11681347
> 
> 赞同：11
> 
> 时间：2012-07-27T04:14:05.980
> 
> 标签：ruby-on-rails, ruby, templates, presentation-layer

一些建议 [1] 建议您使用

```
<%= current_user.welcome_message %> 
```

代替

```
<% if current_user.admin? %>
  <%= current_user.admin_welcome_message %>
<% else %>
  <%= current_user.user_welcome_message %>
<% end %> 
```

但问题是你必须在代码中的某处有决策逻辑。

我的理解是做出决定`template`比`controller`让你的控制器更干净更好。这是正确的吗？

有没有更好的方法来处理这个？

[http://robots.thoughtbot.com/post/27572137956/tell-dont-ask](http://robots.thoughtbot.com/post/27572137956/tell-dont-ask)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-02T05:50:30.990

你不是第一个对此感到疑惑的人。如果视图和控制器应该几乎没有逻辑，并且模型应该与表示无关，那么表示逻辑属于哪里？

事实证明，我们可以使用一种称为*装饰器模式*的旧技术。这个想法是用另一个包含你的表示逻辑的类来包装你的模型对象。这个包装类称为*装饰器*。装饰器从您的视图中抽象出逻辑，同时使您的模型与其表示隔离。

[Draper](https://github.com/jcasimir/draper)是一个优秀的 gem，可以帮助定义装饰器。

您提供的示例代码可以这样抽象：

`@user = UserDecorator.new current_user`在控制器中将装饰器传递给视图。

您的装饰器可能如下所示。

```
class UserDecorator
  decorates :user

  def welcome_message
    if user.admin?
      "Welcome back, boss"
    else
      "Welcome, #{user.first_name}"
    end
  end
end 
```

你的观点只会包含`@user.welcome_message`

请注意，模型本身不包含创建消息的逻辑。相反，装饰器包装模型并将模型数据转换为可呈现的形式。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-02T13:52:40.563

我会为此使用助手。假设您必须根据某些语言环境翻译欢迎消息。

在`app/helper/user_helper.rb`写

```
module UserHelper

  def welcome_message(user)
    if user.admin?
      I18n.t("admin_welcome_message", :name => user.name)
    else
      I18n.t("user_welcome_message", :name => user.name)
    end
  end 

end 
```

在你看来，你可以写

```
<%= welcome_message(user) %> 
```

请注意，装饰器/演示器提供了一种非常干净的面向对象的方法，但是恕我直言，使用助手要简单得多且足够。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-29T12:57:36.417

不，您根本不需要用户类和控制器中的*任何*条件。博客文章中那个例子的重点是参考多态性，只是很好的老式 OO 设计。

```
# in application_controller for example
def current_user
  if signed_in?
    User.find(session[:user_id])
  else
    Guest.new
  end  
end

#app/models/user.rb
class User
   def welcome_message
     "hello #{name}"
   end
end

#app/models/guest.rb
class Guest
  def welcome_message
    "welcome newcomer"
  end
end 
```

...你明白了。

只是，不要用纯演示方法乱扔模型，而是创建一个充当演示者的装饰器：

```
require 'delegate'
class UserPresenter < SimpleDelegator
  def welcome_message
    "hello #{name}"
  end
end 
```

现在`current_user`看起来像这样：

```
# application_controller
def current_user
  if signed_in?
    UserPresenter.new(User.find(session[:user_id]))
  else
    Guest.new
  end
end 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-07-29T12:19:04.597

装饰用户模型并将welcome_message直接添加到其中。是的，这可能在某些时候涉及某种条件语句。

[http://robots.thoughtbot.com/post/14825364877/evaluation-alternative-decorator-implementations-in](http://robots.thoughtbot.com/post/14825364877/evaluating-alternative-decorator-implementations-in)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-27T04:20:18.547

在我看来，如果文本是唯一改变的东西，它就不属于视图。如果您需要重组页面，那就是表示逻辑。这，这只是数据不同。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-30T09:15:27.950

我认为您应该观看 Presenters 上的 railscasts 剧集来寻找答案。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-08-02T10:21:34.407

视图中的逻辑很难维护，我们应该将业务逻辑放在模型中，将所有视图逻辑放在助手中。

如果您希望您的代码采用面向对象的方式，请使用装饰器（帮助程序的面向对象方式）

最佳示例：[https ://github.com/jcasimir/draper](https://github.com/jcasimir/draper)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-07-29T12:08:07.667

将定义的代码`current_user.welcome_message`放在 _app/helpers/application_helper.rb_ 中，然后使用*应用程序*布局呈现的任何视图都可以访问它。

另一种选择是定义一个*自定义*帮助模块，它不一定与给定的视图或控制器相关联（请参阅下面链接的视频），并且`include`它位于您希望具有该功能的视图/控制器的模块中。

这不是非黑即白的。但是，根据您的描述，这听起来像是在您的 application_controller.rb 中插入的代码，并且它不是具有证明其自己控制器合理性的功能的代码，最有效和最有效的选择可能是创建自定义帮助模块并将其包含在您希望拥有该功能的助手中。也就是说，这最终是应用程序的设计者（即*您*）需要决定的判断调用。

[这](http://techspry.com/ruby_and_rails/designing-helpers-in-ruby-on-rails/)是一篇很好的文章，概述了*2011 年 5 月的帮助模块*

[这](http://railscasts.com/episodes/64-custom-helper-modules/)是一个 RailsCast 概述*自定义*帮助模块（即自定义模块不一定与给定的控制器或视图相关联）。简短，甜蜜，切中要害。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-08-01T19:13:32.763

您可以为这些东西定义辅助方法。我认为在模型中制作欢迎句子不是一个好主意，但在控制器中也是如此。但是您应该尝试使您的视图从代码中干净，如果您可以为此使用帮助程序，那么您应该这样做。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-08-03T23:47:37.700

一个好的做法是拥有真实的`View`实例。不幸的是，Rails 对 MVP 的模仿（有区别，请查阅）似乎假装视图是模板。那是错的。

视图应该包含 MVC 和 MVC 启发模式中的表示逻辑。他们还应该操作多个模板并决定使用哪些模板来表示来自模型层的状态和信息（是的，模型是一个层而不是 ORM 实例）。

所以，回答这个问题：**表示逻辑在控制器中没有位置。**

# iphone - Gamer Center排行榜不显示分数，每个用户只能访问自己的分数

> ID：11681350
> 
> 赞同：1
> 
> 时间：2012-07-27T04:14:40.263
> 
> 标签：iphone, ios, game-center, leaderboard

我正在尝试使用 Game Center 在我的游戏中制作排行榜。我像这样发布高分：

```
GKScore *myScoreValue = [[[GKScore alloc] initWithCategory:@"grp.high_scores"] autorelease];
    myScoreValue.value = self.game.scoreMeter.score;

    NSLog(@"Attemping to submit score: %@", myScoreValue);

    [myScoreValue reportScoreWithCompletionHandler:^(NSError *error){
        if(error != nil){
            NSLog(@"Score Submission Failed");
        } else {
            NSLog(@"Score Submitted");
            id appDelegate = [[UIApplication sharedApplication] delegate];
            [appDelegate displayLeaderBoard:nil];
        }

    }]; 
```

我看到“提交分数”符合预期，它打开了 Game Center 排行榜视图，但它只是显示“没有分数”

我知道其他人说[您至少需要两个帐户](https://stackoverflow.com/questions/8720316/ios-game-center-scores-not-showing-on-leaderboard-in-sandbox)，但我已经尝试了三个。

对于每个帐户，游戏都会在 Game Center 应用程序中为他们显示，当我查询前十名时：

```
- (void) retrieveTopTenScores
{
    GKLeaderboard *leaderboardRequest = [[GKLeaderboard alloc] init];
    if (leaderboardRequest != nil)
    {
        leaderboardRequest.playerScope = GKLeaderboardPlayerScopeGlobal;
        leaderboardRequest.timeScope = GKLeaderboardTimeScopeAllTime;
        leaderboardRequest.range = NSMakeRange(1,10);
        [leaderboardRequest loadScoresWithCompletionHandler: ^(NSArray *scores, NSError *error) {
            if (error != nil)
            {
                NSLog(@"Error grabbing top ten: %@", error);
            }
            if (scores != nil)
            {
                NSLog(@"Top ten scores: %@", scores);
            }
        }];
    }
} 
```

每个用户只能看到自己的分数。

那么为什么排行榜是空的，为什么每个用户只能看到自己的分数呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T21:28:39.577

沙盒有时会很乱，但让我问你这个。你`self.game.scoreMeter.score`是int吗？

如果是这样，请尝试这样做：

```
myScoreValue.value = [[NSNumber numberWithInt:self.game.scoreMeter.score] longLongValue]; 
```

用于设置 GKScore 对象的值。让我知道它是否改变了什么。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-02T04:09:46.283

好吧，事实证明您需要使用开发人员沙盒帐户登录游戏中心才能正常工作

# sql-server - SQL Server 2008 报错建议

> ID：11681352
> 
> 赞同：1
> 
> 时间：2012-07-27T04:14:49.420
> 
> 标签：sql-server, asp.net-mvc

我有一张桌子叫`candidate`. 我输入了候选人的详细信息，它也将添加表格。如果我单击`Save`按钮，则会显示错误

> 对象引用未设置为对象

但在表格中添加了详细信息。

请帮我解决这个问题。

# python - AppEngine 数据存储区预留 ID 范围

> ID：11681354
> 
> 赞同：0
> 
> 时间：2012-07-27T04:15:05.643
> 
> 标签：python, google-app-engine, google-cloud-datastore

是否可以告诉 AppEngine Datastore 保留一系列 ID，这些 ID 永远不应分配给模型？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T04:28:50.997

我找到了答案：`db.allocate_id_range(...)`

# scala - scala + mongoDB 怎么用？

> ID：11681365
> 
> 赞同：0
> 
> 时间：2012-07-27T04:17:08.800
> 
> 标签：scala, mongodb, sbt

1.  我正在关注[http://api.mongodb.org/scala/casbah/current/setting_up.html](http://api.mongodb.org/scala/casbah/current/setting_up.html)以便将 MongoDB 与 scala 一起使用。

2.  我也是 sbt 的新手。上面的启动指南说：

> 1.1.5。设置 SBT
> 
> 最后，您可以通过将以下内容添加到项目文件中来将 Casbah 添加到 SBT：
> 
> val casbah = "com.mongodb.casbah" %% "casbah" % "2.1.5.0" 双百分比 (%%) 不是错字——它告诉 SBT 库是交叉构建的，并为您的项目找到合适的版本斯卡拉版本。如果您更喜欢明确，可以使用它来代替：
> 
> // Scala 2.8.0 val casbah = "com.mongodb.casbah" % "casbah_2.8.0" % "2.1.5.0" // Scala 2.8.1 val casbah = "com.mongodb.casbah" % "casbah_2.8.1" % "2.1.5.0" // Scala 2.9.0.1（不要使用 Scala 2.9.0.final；2.9.0.1 包含关键修复） val casbah = "com.mongodb.casbah" % "casbah_2.9.0-1" % “2.1.5.0” 不要忘记重新加载项目并在之后运行 sbt update 以下载依赖项（SBT 不会像 Maven 那样检查每个构建）。

我的问题是第一行是什么意思，“在您的项目文件中添加以下行”。

我对添加依赖的理解是：

1.  将以下行添加到 build.sbt 文件

    ```
    dependancies += "com.mongodb.casbah" % "casbah_2.9.0-1" % "2.1.5.0" 
    ```

2.  然后做 sbt update

但是，当我执行 sbt update 时，出现以下错误：

```
[error] {file:/Users/hrishikeshparanjape/git-public/ws/}default-1efcb1/*:update: sbt.ResolveException: unresolved dependency: com.mongodb.casbah#casbah_2.9.0-1;2.1.5.0: not found
[error] Total time: 1 s, completed Jul 26, 2012 9:32:59 PM 
```

总之，我没看懂入门页面。

**编辑**

我的 build.sbt 文件：

```
name := "ws"

version := "0.1"

libraryDependencies += "com.mongodb.casbah" % "casbah_2.9.0-1" % "2.1.5.0" 
```

我的目录结构（基本没有添加）

```
ws
-build.sbt 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-27T06:04:56.263

我认为您需要在 build.sbt 文件中添加一个解析器。

```
resolvers += "snapshots" at "https://oss.sonatype.org/content/repositories/snapshots"

resolvers += "releases"  at "https://oss.sonatype.org/content/groups/scala-tools" 
```

更多关于 sbt 的信息可以在[这里](https://github.com/harrah/xsbt/wiki/Getting-Started-Welcome)找到。通读它对理解 sbt 的基础知识非常有帮助：

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-06-29T11:09:48.737

很多时间过去了，但我想为那些可能搜索 Scala MongoDB 客户端库的人分享一个更新。

我们已经发布了以 Scala 方式包装原始 mongodb-core 的 Scala 库。该 API 比 MongoDB for Scala 的 mongo-scala-driver 更加方便，并且完全异步。我们公开了 Futures 而不是回调，对于那些有更复杂需求的人来说，RXScala observables。

如果您使用的是 Play Framwork 2.4，那么有一个模块可以为 Json 准备好使用的格式化程序：[https](https://github.com/evojam/play-mongodb-driver) ://github.com/evojam/play-mongodb-driver 使用 Play Framework 模块，启动起来非常简单，只需几分钟即可获取工作代码。

这种方式 MongoDB 在 Scala 中很好用且易于使用。我们在关于现场驱动程序的[博客文章中提供了示例查询执行的比较。](http://evojam.com/blog/2015/6/15/async-mongodb-driver-for-scala-open-source-by-evojam)

# javascript - .hide 功能后表单自动重置

> ID：11681367
> 
> 赞同：0
> 
> 时间：2012-07-27T04:17:41.340
> 
> 标签：javascript, jquery-ui, jquery, jquery-plugins

我使用这个[jquery 选项卡](http://www.jacklmoore.com/demo/tabs.html)作为我的选项卡的主干。在这些选项卡内是没有提交操作的表单，但是当我更改选项卡时，每个表单值都会被删除。如何禁用这些表单上的重置？

`.append()`另外，我在显示之前加载表格。

问题解决了，`.exist()`如果已经显示，我使用功能来防止它重新附加

# mysql - 如何在mysql中显示另一个表的标题？

> ID：11681371
> 
> 赞同：0
> 
> 时间：2012-07-27T04:18:08.897
> 
> 标签：mysql

我有两张桌子

表A

```
add1 |add2 | add3 

1    |2    |3 
```

另一个表 B 包含 add1,add2,add3 的含义

表 B

```
add1           | add2       | add3       |
Caption1       | Caption2   | Caption3 
```

我想显示

```
Caption  | Value
Caption1 | 1
Caption2 | 2
Caption3 | 3 
```

或者

```
Caption1 | Caption2 | Caption3

1        | 2        | 3 
```

如何在 mysql 中做到这一点？如果不可能，请为这种需要提出一个更好的结构。每个月都可能更改标题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T06:25:24.047

我建议以下表结构：

```
CREATE TABLE B (
  add varchar(10) PRIMARY KEY,
  caption varchar(50)
);
CREATE TABLE A (
  add varchar(10) PRIMARY KEY,
  value int
); 
```

然后使用这个查询：

```
SELECT caption, value
FROM A INNER JOIN B
ON A.add = B.add 
```

但是如果你想保持你的表结构，你可以这样做：

```
SELECT B.add1 Caption, A.add1 Value
FROM A, B
UNION ALL
SELECT B.add2, A.add2
FROM A, B
UNION ALL
SELECT B.add3, A.add3
FROM A, B 
```

# string - 字符串中的重复项

> ID：11681372
> 
> 赞同：1
> 
> 时间：2012-07-27T04:18:11.337
> 
> 标签：string, hash, lua, duplicates, character

我需要编写一个函数，该函数接受一个字符串并返回它，并在 Lua 中删除了重复字符。我需要帮助的是...

*   用字母和计数做一个哈希
*   使每个字母仅等于一个，删除多个出现
*   将哈希转换为删除重复项的新字符串

一个简单的函数/算法将不胜感激！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-27T04:53:23.643

如果您只需要每个字符的一个实例，那么您可能不需要跟踪计数；您可以将输入字符串与用于生成输出的同一表进行比较。

```
local function contains(tbl, val)
  for k,v in pairs(tbl) do 
    if v == val then return true end
  end
  return false
end

local function uniq(str)
  local out = {}
  for s in str:gmatch(".") do
    if not contains(out, s) then out[#out+1] = s end
  end
  return table.concat(out)
end

print( uniq("the quick brown fox jumps over the lazy dog") )
-- the quickbrownfxjmpsvlazydg 
```

对于短字符串，这可能会比下面的函数慢，但通常最好避免在 Lua 中进行过多的字符串连接，原因如下[所述](http://www.lua.org/pil/11.6.html)。如果您确定输出字符串会相当短，您可以摆脱`contains()`并使用它：

```
local function uniq(str)
  local out = ""
  for s in str:gmatch(".") do
    if not out:find(s) then out = out .. s end
  end
  return out
end 
```

# java - 印刷安排

> ID：11681375
> 
> 赞同：0
> 
> 时间：2012-07-27T04:18:20.980
> 
> 标签：java

我该如何安排。数字......这样每个由排列形成的新数字与前一个最大值的差异最大为 1。

例如，如果输入为 k=1，则输出将为 1

如果 k =2 输出是：11, 12 2,1 是错误的，因为最左边的必须始终为 1。

如果 k = 3 输出为：111,112, 121, 122, 123

如果 k = 4：1111,1112,1121,1122,1123,1212,1211,1213,1223,1221,1222,1233,1234

1423 是错误的 diff b/w 1 和 4 是 3。 1243 是错误的 diff b/w 2 和 4 是 2....

如果可能的话，我如何使用 DP 来做到这一点？

这是上述问题的解决方案之一......任何人都可以帮助我理解这段代码......提前致谢......

```
public class MaxOneDiff {

    public static void main(String[] args) {
        int k = 4;
        getList(k);
    }

    public static void getList(int k) {
        int arr[] = new int[k];
        int index = 0;
        printRecList(k, arr, index, k);
    }

    public static void printRecList(int k, int arr[], int index, int range) {
        if (k == 0) {
            for (int i = 0; i < arr.length; i++) {
                System.out.print(arr[i]);
            }
            System.out.println();
        } else {
            for (int i = 1; i <= range; i++) {
                if (index == 0) {
                    arr[index] = i;
                    printRecList(k - 1, arr, index + 1, range);
                } else {
                    int t = arr[index-1]-i;
                    t = t > 0 ? t : -t;
                    if (t < 2) {
                        arr[index] = i;
                        printRecList(k - 1, arr, index + 1, range);
                    }
                }
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T04:59:53.167

让我们从简单的部分开始：

```
public static void getList(int k) {
    int arr[] = new int[k];
    int index = 0;
    printRecList(k, arr, index, k);
} 
```

这是 Print Recursive List 函数的助手，只是设置初始的东西。

```
public static void printRecList(int k, int arr[], int index, int range) { 
```

这是一个递归函数，它应该（并且确实）包含两个主要部分：

1.  基本情况（这里，当 k==0 时）
2.  一种非基本情况，它做某事，将问题简化为更小的问题，并递归。

## 基本情况：

```
 if (k == 0) {
        for (int i = 0; i < arr.length; i++) {
            System.out.print(arr[i]);
        }
        System.out.println(); 
```

如果 k==0，则从左到右打印出数组中的数字，然后在末尾换行。

## 非基本案例：（更复杂的部分）

```
 else {
        for (int i = 1; i <= range; i++) {
            if (index == 0) {
                arr[index] = i;
                printRecList(k - 1, arr, index + 1, range);
            } else {
                int t = arr[index-1]-i;
                t = t > 0 ? t : -t;
                if (t < 2) {
                    arr[index] = i;
                    printRecList(k - 1, arr, index + 1, range);
                }
            }
        }
    } 
```

'i' 从 1 到范围，

辅助函数使用 index=0 调用 this，因此第一级/顶层递归由将数组的第一个元素（元素 0）设置为 i，并调用递归方法组成。

在递归调用中再也不会索引 == 0，因此我们将注意力转向 else 子句。

这里我们想知道是否可以将值 i 赋给下一个元素，所以我们检查 elementToLeft 减去 i 的绝对值是否大于等于 2。

如果“i”在该位置分配是有效的（即它与左边的值只有 1 或 0 不同，并且“i”只能从 for 循环中获得与 range 一样高的值。）

然后我们分配它，并检查下一个位置。

当我们到达数组中的最后一个元素时，这将结束。

# javascript - 窗口已经打开时，window.onload 不会触发

> ID：11681376
> 
> 赞同：1
> 
> 时间：2012-07-27T04:18:27.093
> 
> 标签：javascript, jquery, events, onload

我正在打开一个新窗口并为其分配一个 onload 事件，如下所示：

```
var wconsole = window.open("console?cachebust=" + (new Date()).getTime(), "consolewin");
$(wconsole).load(function(){
  // event code here
}); 
```

但是，如果我再次进行相同的调用（即`window.open`使用相同的参数再次调用），即使窗口被刷新，加载函数也不会被调用。

任何想法为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T04:45:44.853

尝试这个。不确定，但值得一试。

```
var wconsole =NULL;
wconsole =  window.open("console?cachebust=" + (new Date()).getTime(), "consolewin");

$(wconsole).load(function(){
  // event code here
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T01:42:14.237

正如我在评论中所说，如果窗口已经打开，您希望它的加载功能做什么？它已经加载了。关闭窗口，它会再次加载窗口。

您可以使用该[`window.close`](https://developer.mozilla.org/en/DOM/window.close)功能关闭窗口，然后再次打开它。

```
wconsole.close() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T07:00:22.603

你错过了一个右括号，也许这就是问题所在。

```
var wconsole = window.open("console?cachebust=" + (new Date()).getTime(), "consolewin");
$(wconsole).load(function(){
    alert('test');
}); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-07T10:21:13.503

你确定你不是这个意思`$(wconsole).***on***load(function(){...}`

在任何情况下都会保证失败，因为重新加载会破坏所有内容，包括任何脚本（但也许如果`Grease Monkey`有持久性脚本），因此任何已定义的函数都会重新定义。除非重新加载重新定义所需的功能，否则游戏将失败。

例子：

```
javascript:
void(window.open("data:text/html,
<html>
<a href=\"javascript:alert('Here today ...');location=location.href;alert('gone ...');\">
reload </a> shows only 1 alert <br/>
(2nd may appear but disappears automatically once window has refreshed)<br/><br/>
as goes `alert` so do other `window` functions like `onload`<br/><br/><br/><br/>
<a href=\"javascript:alert('Now you see ...');self.close();alert('NOT!?');\">
choked or croaked?</a> only 1 alert is seen<br/>
</html>")) 
```

测试：

```
 window.navigator.userAgent =  
 Mozilla/5.0 (X11; Ubuntu; Linux i686; rv:11.0) Gecko/20100101 Firefox/11.0 
```

ref：
[如果用户确认关闭当前窗口，则在关闭当前窗口时打开一个新的浏览器窗口](https://stackoverflow.com/questions/11702467/open-a-new-browser-window-on-close-of-current-window-if-user-confirms-to-close-c/12714964#12714964)

书签：
[window.onload 在窗口已经打开时不会触发](https://stackoverflow.com/questions/11681376/window-onload-not-firing-when-window-is-already-open/12767936#12767936)

# api - soundcloud api - 请求太多

> ID：11681380
> 
> 赞同：4
> 
> 时间：2012-07-27T04:19:01.223
> 
> 标签：api, soundcloud, throttling

我的 soundcloud 应用程序（发出了很多请求）最近开始收到错误：

429 - 请求过多

对于所有 DELETE 命令（当我尝试删除跟随关系时）。这在上周工作得很好。soundcloud api 请求是否存在限制？我浏览了开发人员指南，但还没有找到任何东西。支持页面说在这里发布一个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T10:13:48.790

429 状态表示您的应用程序向 /me/followings 端点发出的请求过多。这并不是说限制，而是试图规避后续垃圾邮件应用程序。

您提出了多少请求，频率如何？如果你退后一段时间，你能得到一个成功的回应吗？

# multithreading - 信号量和条件变量之间的区别

> ID：11681381
> 
> 赞同：12
> 
> 时间：2012-07-27T04:19:01.407
> 
> 标签：multithreading, pthreads

我正在实现条件等待，信号量或条件变量都可以用来实现它。两者有什么区别吗？更具体地说，从性能的角度来看？

我听说当一个线程等待一个条件变量时，它不会被调度，直到它发出信号。这确保它不会消耗 CPU 周期。但这对于信号量来说不是这样，即使它正在等待，信号量也会消耗 CPU 周期？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-07-27T04:26:30.273

**如果您的所有线程都在等待某个事件，例如提交任务，那么您可以通过在事件上使用条件变量**将它们全部唤醒。

如果您的资源有限，例如为您的线程保留的 10 页内存，那么您将需要它们等待，直到一个页面可用。发生这种情况时，您只需要让一个线程开始执行。在这种情况下，您可以使用**信号量**解锁与可用页面一样多的线程。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-27T09:31:16.743

信号量有额外的状态——持有的单位计数——以及等待它的线程的队列，因此允许信号量记录它被发出信号的次数，即使当前没有线程在等待它。如果线程围绕信号量 wait() 循环并且信号量被发出 N 次信号，则线程最终将循环 N 次，即使在发出信号时线程有时很忙——这对于生产者-消费者队列非常有用。

condvar 没有这种额外的计数状态，但它可以释放它所绑定的锁，直到线程发出信号为止——这对于生产者-消费者队列非常有用。

有时，我希望将两者结合起来 - 一个带有计数的 condvar，但这似乎不会从操作系统开发人员那里得到:(

信号量和 condvar 的相同之处在于它们都是同步原语。除此之外..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-24T10:48:43.237

条件变量和二进制信号量都阻塞线程，直到指定的信号条件为 true ，并且两者都是相同的，您可以使用任何一个，但条件变量始终与 mutex 一起使用。在这两种情况下，您只能通过信号进行安排，没有它您无法安排。但是如果要在这种情况下保持资源数量，请使用计数信号量。使用互斥锁时，两者都不会消耗 cpu。

# java - 如何在 web.xml 中为 Spring 应用程序正确映射内容？

> ID：11681383
> 
> 赞同：0
> 
> 时间：2012-07-27T04:19:03.817
> 
> 标签：java, spring, web.xml

我的 web.xml 包含

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" version="2.5">
  <context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>/WEB-INF/spring/root-context.xml</param-value>
  </context-param>
  <listener>
    <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
  </listener>
  <servlet>
    <servlet-name>appServlet</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <init-param>
      <param-name>contextConfigLocation</param-name>
      <param-value>/WEB-INF/spring/appServlet/servlet-context.xml</param-value>
    </init-param>
    <load-on-startup>1</load-on-startup>
  </servlet>
  <servlet-mapping>
    <servlet-name>appServlet</servlet-name>
    <url-pattern>/</url-pattern>
  </servlet-mapping>

  <welcome-file-list>
    <welcome-file>
      resources/index.html
    </welcome-file>
  </welcome-file-list>
</web-app> 
```

resources/index.html 引用了其他静态资源，如图像、js、css 等，通过相对路径存储在***resoruces目录中。***

当我放入`http://localhost/MyProject/`浏览器时，它显示了 index.html 但没有得到 css 和 javascripts。

但是，如果我放入`http://localhost/MyProject/resources/index.html`浏览器，一切都会正确显示。

所以，问题是如何让欢迎页面作为 url 中给出的路径提供`<welcome-file>`，例如 /resources/index.html。

如果不能在 中完成`<welcome-file list>`，我应该使用什么其他可配置的方法。

我倾向于不通过添加另一个 html 或在 Servlet 控制器中以编程方式来重定向到 /resources/index.html。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T04:43:36.363

您似乎正在使用 Spring 并且遇到静态内容问题。

尝试查看此[链接](https://stackoverflow.com/questions/1483063/spring-mvc-3-and-handling-static-content-am-i-missing-something)

它解释了在这种情况下如何进行......

注意线路：

```
<mvc:resources mapping="/resources/**" location="/resources/" /> 
```

它将您的资源文件夹（包含 css、javascript 和图像文件）映射到 Spring 的特殊处理程序。

更新：

在您的 servlet-context.xml 文件中，您可以添加这一行

```
<!-- Forwards requests to the "/" resource to the "welcome" view -->
    <mvc:view-controller path="/" view-name="index"/>

<!-- Resolves view names to protected .html resources within the /WEB-INF/resources/ directory -->
    <bean class="org.springframework.web.servlet.view.InternalResourceViewResolver">
        <property name="prefix" value="/WEB-INF/resources/"/>
        <property name="suffix" value=".html"/>
    </bean> 
```

这表示您不必正确使用“index.jsp”。这样，您会将视图映射到“/”访问。总而言之，这样用户输入' [http://localhost/MyProject/](http://localhost/MyProject/) '并看到你的index.html并看到css和javascripts的效果。

PS.: - 此配置仅适用于 Spring 3+
- 更喜欢将文件命名为“.jsp”而不是“.html”...映射更简单。

# android - 如何在 Android 应用上切换到 google plus 页面？

> ID：11681391
> 
> 赞同：-6
> 
> 时间：2012-07-27T04:20:26.223
> 
> 标签：android, android-intent, google-plus

使用 android Intent 中的代码，我可以通过[http://plus.google.com使用互联网从 APP 切换到 google plus 页面](http://plus.google.com)

但是，我无法从 Google Plus 浏览器重新打开 Android 应用程序。

请告知如何从 Google Plus 浏览器重新打开 Android 应用程序？

更新：

我现在已将问题移至 webapps。

[https://webapps.stackexchange.com/questions/29438/how-to-switch-google-plus-managing-as-page-in-the-g-android-app](https://webapps.stackexchange.com/questions/29438/how-to-switch-google-plus-managing-as-page-in-the-g-android-app)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T05:00:47.527

**将以下方法覆盖到您的活动中**

```
@Override
public void onBackPressed() {
    Intent ip = new Intent(this, youactivity.class);
    startActivity(ip);
    finish();
    super.onBackPressed();
} 
```

# authentication - 禁止在转发电子邮件中打开链接

> ID：11681392
> 
> 赞同：0
> 
> 时间：2012-07-27T04:20:31.523
> 
> 标签：authentication, email-forwarding

我们有一个用例，其中发送通知电子邮件以响应论坛上的一些帖子。此通知电子邮件带有一个 AHREF 链接，该链接基本上允许从电子邮件本身启动帖子页面。此外，这些链接带有身份验证令牌，因此用户在打开页面时不必登录。这在正常用例中工作正常，但在原始收件人将电子邮件转发到其他帐户的情况下，我们不确定如何识别链接是从转发的电子邮件地址打开的。有人可以提供一些见解吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T04:32:22.963

基本上，您无法检测到在转发的电子邮件中单击了链接，还是直接发送给某人的电子邮件中单击了链接。

如果保护您的内容的需要超过对用户友好的需要，请不要在链接中绕过身份验证。

您可以权衡允许用户在登录后在他们登录的浏览器中设置持久身份验证 cookie。这样，如果他们点击电子邮件中的链接并设置了 cookie，他们就可以直接进入网站。StackOverflow.com 就是这样工作的，很方便，下行风险也不算太大。幸运的是，我的银行不是这样运作的。家庭银行业务的潜在损失要大得多。

# php - 如何在 symfony2 安全配置中将“login_check”放在防火墙后面

> ID：11681397
> 
> 赞同：0
> 
> 时间：2012-07-27T04:21:17.230
> 
> 标签：php, security, symfony

我的配置中有这个

```
firewalls:
        login_firewall:
            pattern:    ^/login$
            anonymous:  ~

        secured_area:
            pattern:    ^/admin
            form_login:
                login_path:  /login
                check_path:  /login_check

            logout:
                path:  /logout 
```

我的问题是，如果我使用它，那么我会得到

```
Unable to find the controller for path "/login_check" error 
```

如果使用一切正常

```
 pattern:    ^/ 
```

Symfony decumentation 说要把 login_check 放在防火墙后面，我不知道我该怎么做

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T07:01:40.703

正如您正确提到`Symfony decumentation says to put login_check behind firewall and i don't know how can i do that`的 - 这意味着您必须以这种方式定义您的 login_check ：

```
 check_path:  /admin/login_check 
```

来源 -[常见陷阱](http://symfony.com/doc/current/book/security.html#using-a-traditional-login-form)部分

# iphone - 在 iphone 中创建阴影

> ID：11681399
> 
> 赞同：0
> 
> 时间：2012-07-27T04:21:44.227
> 
> 标签：iphone, objective-c, ios, ipad

我有一个图层，我需要上半部分的红色阴影

我的代码是

```
Shadow.colors = [NSArray arrayWithObjects:
                               (id)[[[UIColor redColor] colorWithAlphaComponent:0.6] CGColor],
                               (id)[[UIColor clearColor] CGColor],
                               nil];
    Shadow.startPoint = CGPointMake(0,0.5);
    Shadow.endPoint = CGPointMake(1,0.5); 
```

这给了我一个左半边阴影。我必须做什么才能有一个上半部分的红色阴影

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T04:33:50.860

```
Shadow.startPoint = CGPointMake(0.5,0);
    Shadow.endPoint = CGPointMake(0.5,1); 
```

这解决了我的问题。谢谢 borrrden

# sql - 如何在 xquery 中使用 Sql:Variable 从 XML 属性中获取值

> ID：11681400
> 
> 赞同：6
> 
> 时间：2012-07-27T04:21:52.860
> 
> 标签：sql, sql-server, tsql, xquery-sql

我想使用 Xquery 从 XML 中获取属性值。

我的 XML 是

```
<Answers>
  <AnswerSet>
    <Answer questionId="NodeID">155</Answer>
    <Answer questionId="ParentNode" selectedValue="12">Product</Answer>
  </AnswerSet>
</Answers> 
```

以下是我的查询。

```
DECLARE @Field Varchar(100)
DECLARE @Attribute VARCHAR(100)
SET @Field='ParentNode'
SET @Attribute = 'selectedValue' 
```

```
SELECT ISNULL(PropertyXML.value('(/Answers/AnswerSet/Answer[@questionId=sql:variable("@Field")])[1]','varchar(max)'),'') ,
ISNULL(PropertyXML.value('(/Answers/AnswerSet/Answer[@questionId=sql:variable("@Field")]/sql:variable(@Attribute) )[1]','varchar(max)'),'') 
      FROM node 
     WHERE id=155 
```

下面的行与 sql:variable 一起工作正常

```
ISNULL(PropertyXML.value('(/Answers/AnswerSet/Answer[@questionId=sql:variable("@Field")])[1]','varchar(max)'),'') 
```

但我在下面的行中遇到错误..

```
ISNULL(PropertyXML.value('(/Answers/AnswerSet/Answer[@questionId=sql:variable("@Field")]/sql:variable(@Attribute) )[1]','varchar(max)'),'') 
```

关于如何`attribute(@Attribute)`在结果中获得所提供价值的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T04:56:30.577

尝试类似的东西

```
ISNULL(@Xml.value('(/Answers/AnswerSet/Answer[@questionId=sql:variable("@Field")]/@*[local-name() = sql:variable("@Attribute")])[1]','varchar(max)'),'') 
```

# font-size - 位图字体的比例方程

> ID：11681401
> 
> 赞同：0
> 
> 时间：2012-07-27T04:21:58.297
> 
> 标签：font-size, equation

我有一个位图字体，其中每个字符都是 32px。我用这种字体创建单个字符并将它们分配给显示对象，其中每个对象为 32px，对象比例值为 1.0（全比例）

现在我要做的是使我的字体创建例程标准化以在其函数调用中接受字体大小。

所以我可以说：

loadFont（字体，大小）

所以我们知道 32px 是基本字体大小，它的比例为 1.0。可以根据传递的大小计算比例的公式如何工作。

例如，16px 将是 0.5 比例（正好是基本字体大小的一半），这很容易。

但是说我想要 24px、18px、12px 等等？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T04:25:39.417

```
function loadFont (font, size)
{
    scale = size / original_size;
    ...
} 
```

这是你要找的吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T04:26:24.213

这几乎不需要数学大师，它只是一个简单的比率。例如，24px 字体将是 24/32 或 0.75。

# c++ - libc++ 中 C++11 标准支持的状态？

> ID：11681403
> 
> 赞同：5
> 
> 时间：2012-07-27T04:22:35.167
> 
> 标签：c++, c++11, libc++

是否有关于 libc++ 中 C++11 标准支持的良好信息来源？它的网站说支持 98% 的标准，但我想知道其他 2% 的功能是什么。

类似于 libstdc++ 的这个列表的东西会很好： http: [//gcc.gnu.org/onlinedocs/libstdc++/manual/status.html#status.iso.2011](http://gcc.gnu.org/onlinedocs/libstdc++/manual/status.html#status.iso.2011)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-27T11:21:24.820

**编辑：**来自[Howard Hinnant](https://stackoverflow.com/questions/11681403/state-of-c11-standard-support-in-libc/11686748#comment15497309_11686748)的评论如下：

> 图表已经过时了。我应该更新它或删除它。目前在 libc++ 中唯一未实现的是 20.7.2.5`shared_ptr`原子访问 [util.smartptr.shared.atomic]。我希望这个周末能完成。[原子] 现在就在那里。哦，`quick_exit`不见了。我打算让 C 库实现它。

* * *

最新和详细的信息已经从[首页](http://libcxx.llvm.org/)链接（并不意味着它足够新☺）。

> C++'0x 支持中唯一缺少的主要部分是`<atomic>`.
> 
> [以下](http://libcxx.llvm.org/libcxx_by_chapter.pdf)是通过测试和未通过测试的逐章细分。
> 
> ![在此处输入图像描述](../Images/6b3b538230590a949b77df539cd8302b.png)

我们可以看到 76% `<atomic>`、3% 的“[language.support]”和 2% 的“[utilities]”丢失了。

我认为不会有像 libstdc++ 那样的更新/详细分解。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2020-03-02T20:33:22.843

`std::quick_exit()`关于和`std::at_quick_exit()`功能的令人沮丧的旁注。即使在几年后，它们仍然没有在 macOS 的**libc中实现。**C++ 标准中也存在一个可能的漏洞，它声明您可以安全地`std::quick_exit()`从信号处理程序调用，但它没有声明注册的函数也`std::at_quick_exit()`必须满足常规信号处理程序的相同要求。我相信这可能是这些功能尚未实现的原因。

# javascript - 如何使用javascript通过客户端的串行端口进行通信？

> ID：11681407
> 
> 赞同：6
> 
> 时间：2012-07-27T04:23:17.280
> 
> 标签：javascript, node.js, serial-port

最近收到一个请求，通过我的网页向通过客户端机器上的串行端口连接的设备添加通信。

我做了一些谷歌搜索，发现带有 node-serialport 的 node.js 似乎是 javascript 的方式。但是，在我的情况下，设备实际上连接到客户端的机器，而不是服务器。

我的问题是我如何在这个意义上实现 node.js？由于代码在客户端浏览器上运行，我是否可以在我的网页上“嵌入”node.js？

或者还有其他选择吗？不过，Applet 和 ActiveX 已经不在了。

谢谢

**更新：** 已经设法说服客户端从网络加载小程序，所以我们将通过小程序路线。感谢大家提供的重要信息！=)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-27T04:30:11.440

*浏览器中的*JavaScript只能访问浏览器提供的 API：它存在于浏览器沙箱中，它（正确地）无法访问客户端文件系统或其他硬件。

这与 node.js 不同，node.js 是一个服务器实现，可以访问各种其他文件系统 API。

要“突破”浏览器，您*必须*使用某种浏览器扩展。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-27T04:30:15.553

在将数据发送到服务器之前，您必须创建一个插件、一个小程序或一个客户端应用程序来将数据输入客户端的 Web 浏览器。

您可以制作一个小应用程序来读取创建 .js 文件的客户端计算机的串行端口，然后您的网页包含客户端计算机上“动态”创建的 js 文件的 src，然后您的网页就可以访问串行端口以迂回的方式。

这就是 GPSGate 的工作原理：[http ://gpsgate.com/developer/gps_in_browser/](http://gpsgate.com/developer/gps_in_browser/)

另请参阅：[如何从网页中的串行端口读取](https://stackoverflow.com/questions/3310643/how-to-read-from-serial-port-in-a-webpage)

还有一个基于 Java 小程序的解决方案： [http ://code.google.com/p/java-simple-serial-connector/](http://code.google.com/p/java-simple-serial-connector/)

[http://code.google.com/p/java-simple-serial-connector/wiki/jSSC_Terminal](http://code.google.com/p/java-simple-serial-connector/wiki/jSSC_Terminal)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-27T06:55:56.897

如果您想从浏览器访问 node.js 功能，请尝试[app.js。](http://appjs.org/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-27T04:37:00.410

这只能通过 Active X 或 Java 或 Flash 等插件来完成。JavaScript 中的代码仅与浏览器提供给它的 API 一样强大。

想要向服务器发送 HTTP 请求？JavaScript 可以做到这一点（受同源策略约束），因为浏览器具有`XMLHttpRequest`API。想查询当前操作系统上正在运行哪些进程？JavaScript 无法做到这一点，因为没有浏览器提供 API 来查询操作系统正在运行的进程。

据我所知，没有浏览器实现任何类型的 JavaScript API 来执行串行端口操作，因此如果不使用插件，就无法做到这一点。

但是，这并不排除有朝一日这样的 API 存在的可能性：该[`getUserMedia`](http://www.html5rocks.com/en/tutorials/getusermedia/intro/)功能可以从摄像头或麦克风中获取数据，并且理论上可以扩展以从其他设备获取数据。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-27T05:08:14.247

另一种选择（除了具有安全权限的 ActiveX 或 Java 小程序）可能是 Google Native Client 和 Pepper API，尽管这是否足以访问串行端口，我不知道。

Firefox 扩展可以包含可以访问串行端口的本机 XPCOM 组件，并且您可能会发现已经有一种方法可以从浏览器 chrome（扩展是）访问串行端口，因为安全令牌和智能卡系统支持串行读取器。Firefox 扩展也可用于提供下一个解决方案，这需要在系统上放置一个本地组件或应用程序。

您能告诉我们这里针对哪些浏览器和操作系统，以及为什么 ActiveX 和 Java 被排除在外吗？

其他人建议使用本机运行代理通过某种协议公开串行端口。您可以为此使用 node、python 或任何其他可以同时创建串行连接和套接字的语言。要从浏览器应用程序访问代理，您需要向页面授予特殊的安全权限，然后您可以使您的代理成为 HTTP 或 WebSocket 服务器。您还可以从代理提供 javascript，这将授予脚本 HTTP 和 WebSocket 访问其作为代理的原始服务器的权限。Google Chrome 扩展程序可以使用其套接字客户端访问任何目标和端口。另外，我相信可以在 Google Chrome 中设置一个配置，以允许对某些或每个页面进行此操作，与允许网页使用本机客户端相同。

在不了解您的目标的情况下，我无法确定最佳解决方案是什么。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-07-31T09:16:29.743

读取串口数据的另一种选择是在服务器端使用 sockjs 和 sockjs-client-node，在客户端使用 sockjs-0.3.js。

# .net - 如何将带有实体框架的 WCF 服务部署到 IIS？

> ID：11681409
> 
> 赞同：0
> 
> 时间：2012-07-27T04:23:21.703
> 
> 标签：.net, wcf, entity-framework, iis-7.5

我目前复制 web.config、SVC 文件和包含所有编译代码的 bin 文件夹。这足以使非数据库操作正常工作。但是，每当我调用任何具有 EF 实体的操作时都会出错。

web.config 文件包含一个有效的连接字符串。我应该如何部署 edmx 文件？

此外，除了这种手动部署之外，是否有另一种方法来构建一个部署包，如果需要也可以处理数据库升级？

我尝试了“发布”选项，但这不是很直观。

我正在使用 .Net 4.0、VS2010、IIS7.5、SQLServerExpress 2008R2。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T06:14:51.197

不知道你是否了解MSBuild，如果你对MSBuild有深入了解，你可以编写MSBUILD脚本来完成所有的任务。

1 - 对于实体​​框架。在部署服务器上，您需要安装实体框架 4 或您正在使用的版本。

2 - 数据库升级是一种策略。所以你需要考虑这一点。最好在 Visual Studio 中创建一个 DB 项目，它会简化一些东西。

# iphone - 数据未显示在 iphone tableView 中

> ID：11681410
> 
> 赞同：0
> 
> 时间：2012-07-27T04:23:22.190
> 
> 标签：iphone, xcode, uitableview

我正在从 json 获取数据。它工作正常，但问题是数据未显示在 tableView 中。

我已经检查了我使用 NSLog 分配给单元格的值，但单元格没有显示任何数据。

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    return 1; 
}

// Customize the number of rows in the table view.
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section 
{
    int count = [surveyList count];
    NSLog(@"These are rows %d",count);
    return [surveyList count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath 
{
    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil)
    {
        cell = [[[UITableViewCell alloc] initWithFrame:CGRectZero reuseIdentifier:CellIdentifier] autorelease];
    }
    ObjectData *data = [surveyList objectAtIndex:indexPath.row]; 
    NSString *testingClient = data.survey_title;
    NSLog(testingClient);
    NSString *cellText = testingClient;
    return cell;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T04:39:05.077

您应该将该文本分配给单元格的标签。

```
cell.textLabel.text = testingClient; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T04:39:13.657

你不缺这个吗？

```
[[cell textLabel] setText:testingClient]; 
```

没有它，您不会将任何文本分配给单元格。

# html - 是否可以在上标中插入图像？

> ID：11681414
> 
> 赞同：0
> 
> 时间：2012-07-27T04:23:52.297
> 
> 标签：html, mathml

我想知道是否可以使用`<super>`&`<sub>`脚本标签并在其中嵌入图像？！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T04:47:13.563

AFAIK，你不能在[MathML](http://www.w3.org/Math/DTD/mathml3/mathml3.dtd)中有图像。您可以在[HTML4](http://www.w3.org/Math/DTD/mathml3/mathml3.dtd)中使用图像：IMG 是特殊的，特殊是内联的，并且 sup/sub 允许内联。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T18:27:39.297

你必须更精确。这些是 html 标签，不是脚本标签，也不是 MathML。有 MathML `<msup>`、`<msub>`和`<msubsup>`标签。您可以将`<img>`元素放在 html 元素中，或者可能放在 mathml`<mtext>`元素中（MathML 规范会说它超出了它的范围来指定这是否合法，但我认为是的），您可以将元素`<mtext>`放在`<msup>`、`<msub>`或`<msubsup>`元素中。

# c# - 必填字段验证器在更新面板中不起作用

> ID：11681416
> 
> 赞同：1
> 
> 时间：2012-07-27T04:23:58.847
> 
> 标签：c#, .net, ajax, updatepanel, requiredfieldvalidator

我在更新面板中的面板中有一个文本框和一个按钮控件。我想验证文本框是否在按钮单击时为空。实际上，此面板用于 Modal Popup Extender 功能。对于弹出窗口，我使用 AJAX 模式弹出扩展器控件。

我正在使用Requiredfieldvalidator 控件来验证文本框，但它没有在按钮单击时触发。

**代码：**

```
<asp:UpdatePanel ID="UpdatePanel1" runat="server">
       <ContentTemplate>
            <asp:Panel ID="Panel1" runat="server" CssClass="modalPopup" Style="display: none">
                <asp:TextBox ID="TextBox1" runat="server" Visible="false" CausesValidation="true"></asp:TextBox>

                <asp:RequiredFieldValidator runat="server" ID="RequiredFieldValidator2" ControlToValidate="TextBox1"
                                                                    ErrorMessage="Data is Required">
                    </asp:RequiredFieldValidator>
                <asp:Button ID="Button1" runat="server" Text="Submit" OnClick="btnSubmit_Click" CausesValidation="true" />
             </asp:Panel>
     </ContentTemplate>
    <Triggers>

       <asp:AsyncPostBackTrigger ControlID="Button1" />
    </Triggers>
</asp:UpdatePanel> 
```

有什么解决办法吗？

**编辑**

```
<cc1:ModalPopupExtender ID="mpePopUp" runat="server" DropShadow="false" PopupControlID="Panel1"
                                        TargetControlID="lnkFake" BackgroundCssClass="modalBackground">
                                    </cc1:ModalPopupExtender> 
```

**背后的代码：** 我在gridview中有链接按钮..单击该链接应该显示弹出窗口。在 gridview 行命令事件中，我正在使用 popup show 方法

mpePopUp.show();

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T05:02:05.747

添加验证组并从文本框中删除原因验证尝试一下

```
<asp:Panel ID="Panel1" runat="server" CssClass="modalPopup" Style="display: none">
                <asp:TextBox ID="TextBox1" runat="server" ></asp:TextBox>

                <asp:RequiredFieldValidator runat="server" ID="RequiredFieldValidator2" ControlToValidate="TextBox1" validationgroup="Group1" ErrorMessage="Data is Required">
                    </asp:RequiredFieldValidator>
                <asp:Button ID="Button1" runat="server" Text="Submit" OnClick="btnSubmit_Click" validationgroup="UserInfoGroup"  CausesValidation="true" />
             </asp:Panel> 
```

# php - PHP如何四舍五入

> ID：11681417
> 
> 赞同：1
> 
> 时间：2012-07-27T04:24:27.463
> 
> 标签：php, rounding

我对在 PHP 中使用 round 函数感到困惑，我在我的系统中使用 PHP 做了一些计算函数，但答案仍然没有四舍五入。

我希望所有的总数都在已经四舍五入的**percent_complete中。**

**有人可以帮我修复此代码吗？这是原始代码..**

```
<?php echo $row_sr1['percent_complete'] = ($row_sr1['partial_complete'] + $row_sr1['full_complete']) / $row_sr1['appt_today'] * 100;?> 
```

**这是我尝试四舍五入但不成功的代码。**

```
<?php echo round($row_sr1['percent_complete']),2 = ($row_sr1['partial_complete'] + $row_sr1['full_complete']) / $row_sr1['appt_today'] * 100;?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T04:28:14.663

您的 round 函数在错误的位置。

```
<?php
  echo $row_sr1['percent_complete'] =
         round(
           ($row_sr1['partial_complete'] + $row_sr1['full_complete']) /
             $row_sr1['appt_today'] * 100,
           2);
?> 
```

# delphi - 确保始终选择 TPopup 菜单中的至少一项

> ID：11681420
> 
> 赞同：2
> 
> 时间：2012-07-27T04:24:57.210
> 
> 标签：delphi, popup, radio-group

我有带有以下属性的 3 个项目设置的 TPopup 菜单。

```
AutoCheck = True
RadioItem = True 
```

对于第一个菜单项，我也将`Checked`属性设置`True`为，以便菜单至少选择了一个项目，并且最初显示它。这一切都很好，但是如果我单击当前选择的项目，检查（点）就会消失，我想这样做，以便始终选择弹出窗口中的至少 1 个项目。我该怎么做呢？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-27T05:59:05.187

组中的项目也应该具有相同的非零[`GroupIndex`](http://docwiki.embarcadero.com/Libraries/en/Vcl.Menus.TMenuItem.GroupIndex)。这与[`RadioItem`](http://docwiki.embarcadero.com/Libraries/en/Vcl.Menus.TMenuItem.RadioItem)应该使项目表现得像一个无线电组。

但是，它似乎[`AutoCheck`](http://docwiki.embarcadero.com/Libraries/en/Vcl.Menus.TMenuItem.AutoCheck)不尊重`GroupIndex`和`RadioItem`属性，因为当您单击当前选中的项目时它会清除检查。（可以说，这可能被认为是 VCL 中的一个错误。）

这是一个解决方法：

设置`AutoCheck`为`False`，为所有项目分配相同的非零值`GroupIndex`和一个公共`OnClick`处理程序来检查单击的项目，如下所示：

```
procedure TForm1.ItemClick(Sender: TObject);
begin
  (Sender as TMenuItem).Checked := True;
end; 
```

或使用[Actions](http://docwiki.embarcadero.com/RADStudio/en/Using_Action_Lists)，与他们一起这似乎按预期工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T06:24:28.787

您可以将以下 OnClick 处理程序设置为所有单选组菜单项：

```
procedure TForm1.MenuItemClickHandler(Sender: TObject);
    begin
        if Sender is TMenuItem then
        begin
            if not (Sender as TMenuItem).Checked then (Sender as TMenuItem).Checked:=True;
        end;
    end; 
```

# java - 如何在 Eclipse 中搜索方法名

> ID：11681424
> 
> 赞同：22
> 
> 时间：2012-07-27T04:25:29.907
> 
> 标签：java, eclipse

唯一允许您在`Cmd + O`当前打开的文件中搜索方法，有没有简单的方法可以在您的项目中搜索方法？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-07-27T04:28:18.400

`CTRL`+ `H`，您可以看到`Search For`框，选择方法。在`Scope`中，选择封闭项目。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-27T04:30:21.920

在搜索菜单中使用“Java 搜索”或在源代码中移动函数名称上的插入符号，然后按 Ctrl+Shift+G（-> 在 Workspace 中搜索参考）。

[编辑] 如果您不知道该函数属于哪个类，请使用文本搜索（称为“文件搜索”）。在搜索字段中输入名称，然后将搜索限制为“*.java”文件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-27T04:46:53.540

使用`Ctrl`+`G`搜索光标当前所在方法的声明，而不是user1071979 提到的`Shift`+ `Ctrl`+显示所有对方法的引用。`G`kshen 提到`Ctrl`+`H`这将为您提供最大的灵活性 - 尽管给您一个对话框供您填写以走得更远。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-27T04:33:40.667

**1.**我总是喜欢用`Ctrl`+`F`来查找方法、变量等…………

**2.**这还提供了将一个或所有名称替换为您想要的名称的功能...

**3.** `Ctrl` +对**查找方法、变量、包**等`H`也很有帮助......

 *** * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-07-27T05:31:52.610

*   `F3`- 公开声明
*   `Ctrl`+ `H`- 打开额外的搜索对话框
*   `Ctrl`+ `Shift`+ `G`- 在工作区中搜索引用**

# php - PHP在Window的命令提示符中传递值

> ID：11681425
> 
> 赞同：1
> 
> 时间：2012-07-27T04:25:34.617
> 
> 标签：php, cmd

我想使用 cmd 来执行我的 php 文件，我需要通过命令提示符向 php 传递一个值，就像我们在浏览器中向它传递一个 get 值一样，以下是我的代码

```
<?php
$mail = getopt('mail:');
print $mail['mail'];
mail($mail['mail'], 'Mercury test mail', 'If you can read this, everything was fine!');
?> 
```

这是我在cmd中输入的命令：

```
php.exe -e C:\xampp\htdocs\Me\mail.php -mail=me@gmail.com 
```

但是命令提示符返回未定义的索引：邮件，这是错误日志中显示的消息：

```
[27-Jul-2012 04:17:07 UTC] PHP Notice:  Undefined index: mail in C:\xampp\htdocs\Me\mail.php on line 3
[27-Jul-2012 04:17:07 UTC] PHP Notice:  Undefined index: mail in C:\xampp\htdocs\Me\mail.php on line 4
[27-Jul-2012 04:17:07 UTC] PHP Warning:  mail(): SMTP server response: 503 No valid recipients specified. in C:\xampp\htdocs\Me\mail.php on line 4 
```

我只是按照这里提到的方式：[PHP在linux命令提示符中传递$_GET](https://stackoverflow.com/questions/4186392/php-passing-get-in-linux-command-prompt)，但它不起作用，那么我应该如何更改我的代码以完成任务？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T04:30:24.620

尝试 argv ：

```
<?php 
$email = argv[0];
mail($email, 'Mercury test mail', 'If you can read this, everything was fine!');
?> 
```

用法 ：

```
php script.php email@email.com 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T04:33:17.603

澄清一下，您是否检查过 $argv 和 $argc 是否包含值？创建一个简单的测试 PHP 脚本，它“回显”$argc 的值并使用 print_r() 函数显示 $argv 的值。

```
<?
echo "Argc = $argc";
print_r($argv);
?> 
```

然后运行这个脚本

```
php.exe [script file name].php -test -etc... 
```

此外，尝试使用斜杠而不是破折号传递值。例如：

```
php.exe [script name].php /option1 /option2 ... 
```

如果 $argc 和 $argv 包含适当的值，您所要做的就是将它们解析为所需的变量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T04:29:20.453

此代码将返回在命令行中传递的参数数组。

```
<?php
var_dump($argv);
?> 
```

# c# - 如何根据下拉列表选择对gridview进行排序

> ID：11681429
> 
> 赞同：0
> 
> 时间：2012-07-27T04:26:26.810
> 
> 标签：c#, asp.net, visual-studio-2010

我需要根据下拉列表显示gridview：LatestTransactionFirst，EarlyTransactionFirst。所以基本上它是基于gridview中的日期的desc或asc。我可以知道我该怎么做吗？

这是我的 gridview 选择代码。但我有一个下拉列表，需要根据下拉列表选择显示网格视图。

```
 myConnection.ConnectionString = strConnectionString;
    SqlCommand cmd = new SqlCommand("SELECT thDate, thType, thAmountIn, thAmountOut from [Transaction] ORDER BY thDate, thType, thAmountIn, thAmountOut DESC", myConnection);
    myConnection.Open();
    SqlDataReader reader1 = cmd.ExecuteReader();
    GridView1.DataSource = reader1;
    GridView1.DataBind(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T06:06:46.263

1）您可以在查询中使用[动态排序依据](http://www.sqlteam.com/article/dynamic-order-by)，最好使用存储过程

2）快速而肮脏的方式将在您的下拉列表中传递 selectedValue 选择索引更改事件并重新绑定您的gridview，同时在下拉列表中启用自动回发为true。就像是

```
protected void yourDropDown_SelectedIndexChanged(object sender, EventArgs e)
{
   BindYourGridView(yourDropDown.SelectedValue);  
}

BindYourGridView(string sortParam)
{
   string orderBy=null;
   switch sortParam
   {
         case 0:
             orderBy= "ORDER BY thDate, thType, thAmountIn, thAmountOut DESC"
             break;
         case 1:
             orderBy= "ORDER BY thDate, thType, thAmountIn, thAmountOut"
             break;   
   }
  string yourQuery= "Select columns from table "+ orderBy;
  // Your data access code
  // Bind your gridview
}

//ASPX
   <asp:DropDownList ID="yourDropDownList" runat="server" AutoPostBack="True">
   <asp:ListItem Text="Recent First" Value="0" />
   <asp:ListItem Text="Earlier First" Value="1" />
   </asp:DropDownList> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T06:22:14.277

这是一个在gridview中排序的例子

```
DataView dvItems = new DataView((DataTable)ds.Tables["datatable1"]);

 if (ddl_itemsorderby.SelectedValue == "MenuGroup")
     dvItems.Sort = "Menu_Group, Item_Name ASC";
 else if (ddl_itemsorderby.SelectedValue == "Item")
     dvItems.Sort = "Item_Name, Menu_Group ASC";
 else if (ddl_itemsorderby.SelectedValue == "Rate")
     dvItems.Sort = "Item_rate, Item_Name ASC";
 else if (ddl_itemsorderby.SelectedValue == "Quantity")
     dvItems.Sort = "Item_Quantity, Item_Name ASC";

 gridview1.DataSource = dvItems;
 gridview1.DataBind(); 
```

这里 Menu_Group,Item_name ... 是您绑定到网格视图的数据表中的列名。

“Menu_Group, Item_Name ASC” 这意味着将给 Menu_Group 优先顺序优先级，将给 Item_Name 赋予第二顺序优先级。ASC 是订单类型将升序

ddl_itemsorderby 是从中选择列顺序的下拉列表。
dvitems 是数据视图。

ASC 是升序。

您必须创建一个包含数据表中数据的数据视图，然后对数据视图中的值进行排序，然后将数据视图绑定到网格视图

# iphone - 为什么我们在 Xcode 上使用反向 url 标识符？

> ID：11681430
> 
> 赞同：4
> 
> 时间：2012-07-27T04:26:29.400
> 
> 标签：iphone, xcode, url, identifier, uti

为什么我们`com.yourcompany.noname`在 Xcode 中使用反向 URL 标识符？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-27T04:34:02.637

与 Java 相同 - 唯一标识我们自己。假设是，如果您有一个 URL，其他人不会使用相同的字符串。

现在为什么它被颠倒了，这是猜测，但我想说这个问题是错误的：最初是主机名从最具体的事情开始“错误”，并且它延续了历史。表单的 URL`http:com.yourcompany.noname/bigdir/littledir/file#fragment`会更有意义（*），您从最全局的事物开始，并以最微小的细节结束，就像阅读时间或阿拉伯数字时一样。

（大多数日期格式也犯了这个错误——唯一逻辑上一致的格式是`YYYY/MM/DD`，如果我们像我们一样使用数字，右边的最小单位）。

*) 另外，如果我没记错的话，URL 的创建者在记录中说他最大的遗憾是两个斜线。编辑：[找到了](http://www.zdnet.com/blog/igeneration/double-slash-in-web-addresses-a-bit-of-a-mistake/3090)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-27T04:37:25.923

让我们从哲学上思考一下。

考虑普通 URL 的情况，例如`noname.yourcompany.com`. 此 URL 的最高级别域是`com`，因为除了您提供的 URL 之外，它还包含在一组巨大的其他 URL 中。例如`apple.com`，`microsoft.com`两者都属于`com`顶级域。然后，`yourcompany`是下一个最高级别的域，因为它属于您的公司而不是 Apple 或 Microsoft，但它本身可能包含自己的子域。

在这方面，我们可以看到，当我们从上到下遵循所谓的“正常 URL”时，实际上是从右到左阅读。在编程语言中，当我们进行范围解析时，我们希望从左到右阅读，因为这是我们大多数人编写代码的方向，我们通常从广泛的类别开始，当我们试图找到它时缩小范围我们可能正在寻找*一种难以捉摸的功能。*

这就是为什么在设计为类似于 Internet 域的命名空间方案中，我们最终会得到向后看的名称。从某种意义上说，是“错误”的网址。

# facebook - Facebook 分享 url 的数据

> ID：11681433
> 
> 赞同：0
> 
> 时间：2012-07-27T04:26:43.150
> 
> 标签：facebook, facebook-sharer

我正在开展一个项目，以获取客户不同文章的份额。我搜索了整个互联网，但没有找到任何信息，所以作为最后的手段，在这里提出问题：有没有办法通过只提供文章的网址来检查文章在 Facebook 上的分享量？我在 facebook 上看到了代码，您可以在其中获得您自己粘贴的文章的点赞数，但是有没有办法告诉我们，如果某些 techcruch 文章有多少 facebook 分享？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T06:32:56.680

这是参考： [https ://developers.facebook.com/docs/reference/fql/link_stat/](https://developers.facebook.com/docs/reference/fql/link_stat/)

获取 Techcrunch 文章的共享数量的示例查询：

> 选择 url、normalized_url、share_count、like_count、comment_count、total_count、commentsbox_count、comments_fbid、click_count FROM link_stat WHERE url="http://techcrunch.com/2012/07/25/zipongo-seed-round/"

您可以在这里玩不同的查询： [https](https://developers.facebook.com/tools/explorer) ://developers.facebook.com/tools/explorer （从菜单中选择 FQL）

# ssl - .dat 证书是什么？它与 JKS 等其他证书格式有何不同？

> ID：11681434
> 
> 赞同：2
> 
> 时间：2012-07-27T04:26:45.130
> 
> 标签：ssl, https, ssl-certificate

什么是 .dat 证书？JKS 证书和 .dat 证书有什么区别吗？如何使用 .dat 证书来信任服务器端？其他证书也一样吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-27T05:30:25.690

`.dat`只是一个文件扩展名，它不会告诉您有关文件本身格式的任何有用信息。

常用的证书文件有两种类型：PEM 和 DER。PEM 以 Base-64 编码文本的形式对其数据进行编码，该文本包含在人类可读的标头中。DER 以原始二进制形式对其数据进行编码。两种格式都能够对相同类型的数据进行编码，但是 PEM 文件可以存储多个对象（例如证书*和*密钥，或整个证书信任链），而 DER 文件仅限于每个文件一个对象。此外，一些应用程序是专门为其中一个或另一个设计的。

在文本编辑器中打开您的文件。它是模糊的人类可读的吗？然后它是一个 PEM 文件。是垃圾吗？那么它可能是DER。

JKS 本身不是证书格式；它是证书和密钥的*存储*格式。一个`.jks`文件可能存储许多证书和密钥。Java 将希望您首先[将证书导入密钥库](https://stackoverflow.com/questions/4325263/how-to-import-a-cer-certificate-into-a-java-keystore)；然后您可以根据需要将其加载到`TrustStore`或中。`KeyStore`

# php - 如何加粗一个变量？

> ID：11681435
> 
> 赞同：2
> 
> 时间：2012-07-27T04:26:46.787
> 
> 标签：php

如何让 php 变量中的文本变为粗体？

```
function show_balance_header ($balance, $currency)
{
    (string)$display_output = null;
    $display_output = fees_main::display_amount(abs($balance), $currency, true);
    return $display_output;
} 
```

我要大胆`$balance`。有没有简单的方法或者我需要编辑`display_amount`？

我试过这样做：

`"<b>".$balance"</b>"`但这没有得到正确的变量，

提前致谢！！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-27T04:29:01.403

需要`"<b>" . $balance . "</b>"`。连接`<b>`到`$balance`并再次连接到`</b>`

* * *

**编辑**：假设这样做打印/格式化：`fees_main::display_amount(abs($balance)`

你想要`fees_main::display_amount('<b>' . abs($balance) . '</b>', $currency, true)`。abs($balance) 以数字形式获取绝对值，并且连接（如上所述）自动将它们转换为字符串。其余参数以相同的方式传递（未修改，非粗体）。

`(string)$display_output = null;`是不必要的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T04:39:46.577

答案是使用 Raeki 的建议编辑内部函数 display_amount，对于以后的问题，我认为您必须编辑最里面的函数，因为只有编辑函数 show_balance_header 没有得到正确的变量

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T04:38:46.727

在您的元素 html 上，例如：

```
<p> text <?php echo "<b>{$balance}</b>"; ?> text</p> 
```

# image - 在 Wordpress 中上传媒体

> ID：11681439
> 
> 赞同：0
> 
> 时间：2012-07-27T04:27:15.740
> 
> 标签：image, wordpress, upload, media

我正在尝试将图像或任何其他媒体类型上传到我的 wordpress 应用程序，但出现此错误：

```
Unable to create directory /home/admin/video/wp-content/uploads/2012/07\. Is its parent directory writable by the server? 
```

即使我确定父目录是可写的。它实际上有 777 个权限。可能是什么问题？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T04:59:40.450

问题是......可由谁或什么写？您可能需要使整个“上传”目录可由 PHP（又名 Web 服务器）写入。通常，apache 和其他服务器默认使用 user-group `www-data`，但它可能会有所不同。检查您的 apache 或 lighttpd（或其他）配置文件以查看它运行的用户和用户组。通常这些都在`/etc/apache`或`/etc/lighttpd` *等等*。然后，使上传目录递归地写入该组。

使用 777 权限是一个非常糟糕的主意。您总是希望让最少的人访问任何给定目录。所以，这里有一个关于文件权限的简短讨论......

```
drwxrwxrwx   20  connermcd     staff    680 Jul 25 20:38  img
-rw-r--r--    1      admin  www-data  18530 Jul 26 21:46  example 
```

权限字符串的第一个字符表示类型。在这种情况下，`img`是一个目录并且`example`是一个文件。这也可能是`l`符号链接（除其他外）。字符串 ( ) 的其余字符`rwxrwxrwx`定义权限。如您所见，它是“读、写、执行”的重复三重奏。第一个三元组代表文件或目录所有者的权限。所有者显示在第三列中（例如，用于 img 和 admin 的 connermcd）。第二个三元组表示文件或目录组的权限（例如 img 和 www-data 的人员）。最后一个三元组表示*任何人*的权限（即使是您授予临时访问服务器或黑客的权限的人，提示提示）。

每个“读、写、执行”三元组都可以用一个数字表示。我很容易想到`rwxrwxrwx`as `421421421`。如果对您有帮助，这是两个的倍数加起来为 7 的唯一方法。所以，4代表读，2代表写，1代表执行。如果将这些加在一起，则可以用三个数字表示一个三元组。所以`chmod 777 img`真正做的是给*每个人*“读、写和执行”的权限。它也只是为该目录设置这些权限，而不是它下面的目录。要递归地执行此操作，您可以使用`-R`标志 -- `chmod -R`。

在您的情况下，您只想使上传文件夹及其所有子目录可供您的服务器运行的用户组使用。在大多数情况下，这是`www-data`，所以我将使用它作为示例。您可能希望将项目文件设置为用户所有，以使它们更易于移动、编辑等。因此假设您是文件的所有者（用于`chown`设置）并且它们属于`www-data`组（用于`chgrp`设置）。在这种情况下，我们希望授予所有者完全权限和组读取和写入权限，并且我们希望递归地执行此操作。因此，转到上传文件夹的父目录并执行`chmod -R 760 uploads`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T12:45:55.247

您还可以查看“设置->媒体”是否正确，然后查看“上传文件”部分。

“在此文件夹中存储上传”中指示的文件夹（和所有子文件夹）必须具有 755 权限。

# sql - 如果一个月有5周，如何计算周？

> ID：11681442
> 
> 赞同：0
> 
> 时间：2012-07-27T04:27:37.380
> 
> 标签：sql, sql-server, sql-server-2005

我无法计算数据仅显示四个星期的星期。如果有五周怎么计算？我不知道该怎么做。有人知道这个吗？：（

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T05:06:38.580

选择 count(datepart(dw,datecoln)) as col1 from YourTable group by datepart(dw,datecoln) 有月份(datecoln)=@inputMonth

如果您在 col1 中获得任何值为 5 的记录..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T07:46:34.050

理想情况下，我们一个月不会有 5 周。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-27T06:27:16.523

这里的逻辑。

计算给定日期的周数

找到该月的第一天并找到它的周数（**比如 start**）

找到一个月的最后一天并找到它的周数（**比如结束**）

**当前日期的休息周数 = 结束开始**

```
DECLARE @GivenDate datetime
DECLARE @start BIGINT
DECLARE @end BIGINT
SET @givendate=getdate()--You can supply your date

SET @start =  (SELECT DATEPART(wk,(SELECT DATEADD(mm,DATEDIFF(mm,0,@GivenDate),0))))
SET @end =  (SELECT DATEPART(wk,(SELECT DATEADD(ms,- 3,DATEADD(mm,0,DATEADD(mm,DATEDIFF(mm,0,@GivenDate)+1,0))))))

SELECT (@end-@start)+1 AS NoOfWeeks 
```

[请参阅此以查找周数](http://msdn.microsoft.com/en-us/library/ms174420.aspx)

[或者参考这篇文章](https://stackoverflow.com/questions/4928038/tsql-calculate-week-number-of-the-month)

# android - Android GCM 消息需要很长时间才能收到

> ID：11681455
> 
> 赞同：10
> 
> 时间：2012-07-27T04:29:40.843
> 
> 标签：android, android-intent, google-cloud-messaging

我在我的应用程序中使用 GCM，但我遇到了问题。

大多数情况下，我会立即收到消息，但有时消息会在 5 分钟后收到，一个接一个，就像卡在路上一样。这是正常的吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-08-25T10:57:49.297

客户端电话上的 GCM 框架部分在端口 5228 上使用**TCP 连接**。此连接用于推送通知，但作为每个 tcp 连接，它可以与一些应用严格策略来终止非活动 tcp 连接的路由器/运营商超时（**tcp 空闲超时**）。

例如，大多数 wifi 路由器会在 5 分钟后终止非活动连接，例如我的。

GCM 框架使用**保活**机制，在 wifi 上每 15 分钟发送一个心跳网络数据包，在 3G 上每 28 分钟发送一个心跳网络数据包。这种保持活动对所有用户来说并不总是可靠的。

我在这里向谷歌打开了这个问题： [https](https://productforums.google.com/forum/#!category-topic/nexus/connecting-to-networks-and-devices/fslYqYrULto) ://productforums.google.com/forum/#!category-topic/nexus/connecting-to-networks-and-devices/fslYqYrULto 他们同意目前存在问题。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-27T04:45:43.470

到目前为止，我还没有注意到在我极其有限的测试中，但根据我对[文档](http://developer.android.com/guide/google/gcm/adv.html)的理解，这听起来并不令人惊讶：

> GCM 通常会在消息发送后立即传递消息。但是，这可能并不总是可能的。例如，设备可能已关闭、离线或不可用。在其他情况下，发送方本身可能会通过使用 delay_while_idle 标志请求在设备变为活动状态之前不传递消息。最后，GCM 可能会故意延迟消息，以防止应用程序消耗过多资源并对电池寿命产生负面影响。

在此和文档其余部分的语言之间，您所描述的内容听起来完全符合我的预期。不能保证立即交货；您通常会立即收到消息，但有时您不会。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T12:21:57.000

我发现与原始海报相同的东西。“唤醒”似乎最多需要 5 分钟，然后它会非常快速地处理这些消息。

我的应用程序正在处理与聋人对话中的文本项。呼叫者发起对话，聋人通过电话响应。延迟仅发生在第一步，即“出乎意料”的新消息中。一旦完成了第一个（应用程序、设备、系统 ID？），其他的就会很快通过，几乎是瞬间完成。

# c# - 在 C# 中设置秒表程序的开始时间

> ID：11681457
> 
> 赞同：4
> 
> 时间：2012-07-27T04:29:43.683
> 
> 标签：c#, stopwatch

我想写一个简单的秒表程序，我可以用下面的代码让它工作

```
 public Form1()
    {
        InitializeComponent();
    }
    System.Diagnostics.Stopwatch ss = new System.Diagnostics.Stopwatch { };
    private void button1_Click(object sender, EventArgs e)
    {
        if (button1.Text == "Start")
        {
            button1.Text = "Stop";

            ss.Start();
            timer1.Enabled = true;

        }
        else
        {
            button1.Text = "Start";

            ss.Stop();
            timer1.Enabled = false;

        }
    }

    private void timer1_Tick(object sender, EventArgs e)
    {

            int hrs = ss.Elapsed.Hours, mins = ss.Elapsed.Minutes, secs = ss.Elapsed.Seconds;
            label1.Text = hrs + ":";
            if (mins < 10)
                label1.Text += "0" + mins + ":";
            else
                label1.Text += mins + ":";
            if (secs < 10)
                label1.Text += "0" + secs;
            else
                label1.Text += secs;

    }

    private void button2_Click(object sender, EventArgs e)
    {
        ss.Reset();
       button1.Text= "Start";
       timer1.Enabled = true;

    } 
```

现在我想为这个秒表设置一个自定义的开始时间，例如我希望它不是从 0:00:00 开始计数，而是从 0:45:00 开始我该怎么做，谢谢。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-07-27T04:38:21.103

秒表没有任何允许您设置自定义开始时间的方法或属性。

您可以继承 Stopwatch 并覆盖 ElapsedMilliseconds 和 ElapsedTicks 以调整您的开始时间偏移量。

```
 public class MyStopwatch : Stopwatch
    {
        public TimeSpan StartOffset { get; private set; }

        public MyStopwatch(TimeSpan startOffset)
        {
            StartOffset = startOffset;
        }

        public new long ElapsedMilliseconds
        {
            get
            {
                return base.ElapsedMilliseconds + (long)StartOffset.TotalMilliseconds;
            }
        }

        public new long ElapsedTicks
        {
            get
            {
                return base.ElapsedTicks + StartOffset.Ticks;
            }
        }
    } 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-27T04:49:04.257

根据您的示例，创建一个初始值为 45 分钟的[System.TimeSpan的新实例。](http://msdn.microsoft.com/en-us/library/system.timespan)比将秒表的值添加到[TimeSpan.Add 方法](http://msdn.microsoft.com/en-us/library/system.timespan.add)。方便的是， [Stopwatch.Elapsed](http://msdn.microsoft.com/en-us/library/system.diagnostics.stopwatch.elapsed.aspx)已经是 System.TimeSpan 类型。

比使用字符串格式化程序将格式化的时间打印到标签中。我认为其他答案之一已经显示了如何做到这一点。否则，这里有一些关于如何格式化 TimeSpan 实例[TimeSpan.ToString 方法（字符串）](http://msdn.microsoft.com/en-us/library/system.diagnostics.stopwatch.elapsed.aspx)或使用[自定义格式化程序](http://msdn.microsoft.com/en-us/library/ee372287)的很好的参考资料。

```
var offsetTimeSpan = new System.TimeSpan(0,45,0).Add(ss.Elapsed) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-02-26T09:17:05.903

*   额外的 SetOffset() 方法
*   带有偏移量的额外初始化；
*   覆盖所有需要的方法
*   **具有相同的类名，因此无需更改您的项目代码**

.

```
using System;

public class Stopwatch : System.Diagnostics.Stopwatch
{
    TimeSpan _offset = new TimeSpan();

    public Stopwatch()
    {
    }

    public Stopwatch(TimeSpan offset)
    {
        _offset = offset;
    }

    public void SetOffset(TimeSpan offsetElapsedTimeSpan)
    {
        _offset = offsetElapsedTimeSpan;
    }

    public TimeSpan Elapsed
    {
        get{ return base.Elapsed + _offset; }
        set{ _offset = value; }
    }

    public long ElapsedMilliseconds
    {
        get { return base.ElapsedMilliseconds + _offset.Milliseconds; }
    }

    public long ElapsedTicks
    {
        get { return base.ElapsedTicks + _offset.Ticks; }
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-27T04:42:43.183

您无法更改开始时间，但您可以在 Stop() 之后修改它，没有人更聪明。

快速谷歌搜索： http: [//msdn.microsoft.com/en-us/library/system.diagnostics.stopwatch.start (v=vs.90).aspx](http://msdn.microsoft.com/en-us/library/system.diagnostics.stopwatch.start(v=vs.90).aspx)

一个小的修改：

```
class Program
{
    static void Main(string[] args)
    {            
        System.Diagnostics.Stopwatch stopWatch = new System.Diagnostics.Stopwatch();

        stopWatch.Start();
        Thread.Sleep(10000);
        stopWatch.Stop();
        // Get the elapsed time as a TimeSpan value.
        TimeSpan ts = stopWatch.Elapsed;

        // Format and display the TimeSpan value.
        string elapsedTime = String.Format("{0:00}:{1:00}:{2:00}.{3:00}",
            ts.Hours, ts.Minutes + 45 , ts.Seconds,
            ts.Milliseconds / 10);
        Console.WriteLine("RunTime " + elapsedTime);
    }
} 
```

结果：

> 运行时间 00:45:10.00
> 
> 按任意键继续 。. .

作为开发人员，对您进行更多研究将对您有不可估量的帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-27T05:16:42.190

偏移量是固定的还是可变的？

在任何一种情况下，都将它作为类的一些成员变量或 const 并添加它。

```
private TimeSpan offset = TimeSpan.FromSeconds(45); 
```

然后只需更改您的刻度以包含它：

```
var combined = ss.Elapsed + offset;
int hrs = combined.Hours, mins = combined.Minutes, secs = combined.Seconds; 
```

# tridion - 如何获取有关组件/页面选择的项目本地化/非本地化信息

> ID：11681458
> 
> 赞同：0
> 
> 时间：2012-07-27T04:30:04.383
> 
> 标签：tridion, tridion-2011

我在 tridion 的功能区中创建了一个自定义按钮。

如果已选择组件/页面中的某个项目，我需要获取该项目是否已本地化的信息。基于该自定义按钮将被启用/禁用。

为了获取所选组件/页面的 tcmid，我目前正在编写为

选择.getItem(0); 在我的 JavaScript 中。

同样，如何获取所选项目的本地化信息（组件/页面）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T08:42:48.497

UI JavaScript 对象的属性和方法可在[SDL Tridion 2011 SP1 GUI 扩展 API](https://www.sdltridionworld.com/images/GUI%20Extension%20API_tcm89-20010.zip)文档中找到，您可以在[http://docportal.sdl.com/sdltridion上找到该文档](http://docportal.sdl.com/sdltridion)

只需检查`Tridion.ContentManager`命名空间，您就会发现可以`Component.getInfo()`从中`Component.getBlueprintHierarchy()`提取此类信息的内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T11:33:56.773

只需检查项目的 isLocalized 方法：

```
var itemUri = selection.getItem(0);
var item = $models.getItem(itemUri);
if (item.isLocalized())
{
   // Do your magic here
} 
```

为简单起见，我省略了项目的错误处理和潜在加载。

# vb.net - 如何在 vb.net 的初始屏幕上添加图像

> ID：11681468
> 
> 赞同：0
> 
> 时间：2012-07-27T04:31:13.323
> 
> 标签：vb.net, splash-screen

我刚刚使用 vb.net(2010) 创建了一个软件，它工作正常。我需要为此添加一个启动画面。我可以使用“添加新项目”添加启动画面，但我需要修改（内置启动画面）**我想添加图片并更改名称版本等**..你能帮我解决这个问题吗？谢谢Pasindu Mallikaarachchi

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T05:02:06.447

通过添加新项目添加启动画面后，转到启动画面上布局面板的属性（为此，您可以右键单击设计器上的启动画面，而不是解决方案资源管理器中的启动画面文件） .

在属性中找到 BackgroundImage 并单击按钮以更改背景图像的属性，

![选择新的启动图像](../Images/c90ebbd0f759ab83233e7c8519dd2114.png)

您现在将获得一个向导，该向导将要求您从解决方案资源管理器中包含的文件之一或从本地存储中选择资源文件。选择任何图像将替换默认的启动图像。您还可以更改 BackgroundImageLayout 属性以适合您的选择。

# c++ - 从 char 数组中获取 int32_t 或 int64_t 值

> ID：11681471
> 
> 赞同：6
> 
> 时间：2012-07-27T04:31:27.977
> 
> 标签：c++, arrays

我需要执行的操作需要我从 char 数组中获取一个 int32_t 值和 2 个 int64_t 值

char 数组的前 4 个字节包含 int32 值，接下来的 8 个字节包含第一个 int64_t 值，接下来的 8 个字节包含第二个值。我不知道如何获得这些值。我试过了;

```
int32_t firstValue = (int32_t)charArray[0];
int64_t firstValue = (int64_t)charArray[1];
int64_t firstValue = (int64_t)charArray[3];

int32_t *firstArray = reinterpet_cast<int32_t*>(charArray);
int32_t num = firstArray[0]; 
int64_t *secondArray = reinterpet_cast<int64_t*>(charArray);
int64_t secondNum = secondArray[0]; 
```

我只是在抓稻草。任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-27T04:37:28.717

快速而肮脏的解决方案：

```
int32_t value1 = *(int32_t*)(charArray +  0);
int64_t value2 = *(int64_t*)(charArray +  4);
int64_t value3 = *(int64_t*)(charArray + 12); 
```

请注意，这可能会导致未对齐的内存访问。所以它可能并不总是有效。

* * *

一个更强大的解决方案，不违反严格混叠并且不会出现对齐问题：

```
int32_t value1;
int64_t value2;
int64_t value3;

memcpy(&value1,charArray +  0,sizeof(int32_t));
memcpy(&value2,charArray +  4,sizeof(int64_t));
memcpy(&value3,charArray + 12,sizeof(int64_t)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T04:37:46.123

试试这个

```
typedef struct {
   int32_t firstValue;
   int64_t secondValue;
   int64_t thirdValue;
} hd;

hd* p = reinterpret_cast<hd*>(charArray); 
```

现在您可以访问值，例如 p->firstValue

编辑：确保结构被打包在字节边界上，例如使用你`#pragma pack(1)`在结构之前编写的 Visual Studio

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-27T04:39:50.740

为避免任何对齐问题，理想的解决方案是将缓冲区中的字节复制到目标对象中。为此，您可以使用一些有用的实用程序：

```
typedef unsigned char const* byte_iterator;

template <typename T>
byte_iterator begin_bytes(T& x)
{
    return reinterpret_cast<byte_iterator>(&x);
}

template <typename T>
byte_iterator end_bytes(T& x)
{
    return reinterpret_cast<byte_iterator>(&x + 1);
}

template <typename T>
T safe_reinterpret_as(byte_iterator const it)
{
    T o;
    std::copy(it, it + sizeof(T), ::begin_bytes(o));
    return o;
} 
```

那么你的问题就很简单了：

```
int32_t firstValue  = safe_reinterpret_as<int32_t>(charArray);
int64_t secondValue = safe_reinterpret_as<int64_t>(charArray + 4);
int64_t thirdValue  = safe_reinterpret_as<int64_t>(charArray + 12); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-27T04:37:39.803

如果`charArray`是 1 字节`char`类型，那么您需要使用`4`and`12`作为您的第二个和第三个值

# linux - 如何从目录中获取分页文件？

> ID：11681472
> 
> 赞同：1
> 
> 时间：2012-07-27T04:31:30.763
> 
> 标签：linux, command-line

是否可以根据分页范围列出目录中的文件。

例如。

```
ls 0,50
ls 50,100
ls 100,150 
```

实际上，我们在目录中有大量文件，如果我一次显示所有文件，则在视图中显示这些文件需要很多时间。相反，我想对目录内文件的结果进行分页。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T04:34:58.407

```
ls /usr/bin | less
ls /usr/bin | pager 
```

和`less`命令`pager`让您滚动浏览输出。这仅对查看有意义，不适用于打包输出以供其他用途

如果我只对特定范围感兴趣，我通常会恢复到 perl：

```
ls /usr/bin | perl -ne 'print if $. ~~ [10..40]'
ls /usr/bin | perl -ne 'print if 10 .. 40' 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-27T04:56:05.400

你可以使用

```
ls | tail -n <line number of the first line> | head -n <number of lines that you want> 
```

例如

```
ls | tail -n 10 | head -n 20 
```

将显示 20 个文件名，从第 10 个开始。

# java - 如何信任特定的自签名证书？（不相信所有人）

> ID：11681474
> 
> 赞同：4
> 
> 时间：2012-07-27T04:32:03.723
> 
> 标签：java, ssl, https, ssl-certificate

如何将我的设置`HttpsURLConnection`为仅信任特定证书？目前我的代码设置为信任所有证书。但要求是只信任一个特定的证书而不信任其他证书。我怎样才能在Java中做到这一点？我正在使用 JDK 1.5。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T05:36:44.373

您可以通过创建自定义 SSLSocketFactory 并提供您自己的 TrustManager 来信任特定证书。看...

[通过 HTTPS 使用 HttpClient 信任所有证书](https://stackoverflow.com/questions/2642777/trusting-all-certificates-using-httpclient-over-https)

和

[如何在特定连接上使用不同的证书？](https://stackoverflow.com/questions/859111/how-do-i-accept-a-self-signed-certificate-with-a-java-httpsurlconnection)

在您的 TrustManager 中，您将收到来自客户端/服务器的证书链，以根据您的特定证书进行验证。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T22:41:51.270

将其导入您的客户端信任库。

# wcf - WCF 消息和数据协定、DTO、域模型和共享程序集

> ID：11681475
> 
> 赞同：5
> 
> 时间：2012-07-27T04:32:07.287
> 
> 标签：wcf, domain-driven-design, soa, dto, datacontract

我有一个 Web 客户端，它调用我的 WCF 业务服务层，而后者又调用外部 WCF 服务来获取实际数据。最初，我认为我会使用 DTO 并在不同的层中有单独的业务实体......但我发现提倡 DTO 的琐碎示例，嗯，琐碎。我看到太多重复的代码，没有太多好处。

考虑我的域：

示例域 我有一个 UI 屏幕（Asp.net MVC 视图），它显示了患者的药物列表、不良反应（药物之间）以及患者可能患有的任何临床状况（如抑郁症或高血压）。我的域模型从顶层开始：

```
 MedicationRecord
      List<MedicationProfile> MedicationProfiles
      List<AdverseReactions> Reactions
      List<ClinicalConditions> ClinicalConditions

   MedicationProfile is itself a complex object
      string Name
      decimal Dosage
      Practitioner prescriber 

   Practioner is itself a complex object
      string FirstName
      string LastName
      PractionerType PractionerType
      PractionerId Id
      Address Address    

      etc. 
```

此外，在发出 WCF 请求时，我们有一个请求/响应对象，例如

```
 MedicationRecordResponse
      MedicationRecord MedicationRecord
      List<ClientMessage> Messages
      QueryStatus Status

   and again, these other objects are complex objects
   (and further, complicates matter is that they exist in a different, common shared namespace) 
```

在这一点上，我的倾向是 MedicationRecordResponse*是*我的 DTO。但是在纯 DataContracts 和 DTO 以及设计分离中，我应该这样做吗？

```
 MedicationRecordResponseDto
      MedicationRecordDto
      List<ClientMessageDto> 
      QueryStatusDto

   and that would mean I then need to do
      MedicationProfileDto
      PractitionerDto
      PractitionerTypeDto
      AddressDto
   etc. 
```

因为我已经在屏幕上显示了几乎所有信息，所以我有效地为我拥有的每个域对象创建了 1 个 DTO。

我的问题是——你会怎么做？你会继续创建所有这些 DTO 吗？或者您只是在单独的程序集中共享您的域模型？

以下是其他似乎相关的问题的一些读物：

1.  [WCF 合约知道域](https://stackoverflow.com/questions/7176745/wcf-contract-know-the-domain)
2.  [SOA 中转换层的替代方案：WCF](https://stackoverflow.com/questions/9480869/alternatives-for-dto-domain-translation-layer-in-soa-wcf)
3.  [SOA 问题：暴露实体](https://stackoverflow.com/questions/3883158/soa-question-exposing-entities)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-27T05:39:49.987

看看优秀的文章

*   [为什么你不应该通过你的服务暴露你的实体](http://davybrion.com/blog/2010/05/why-you-shouldnt-expose-your-entities-through-your-services/)
*   [DTO 应该传输数据，而不是实体](http://davybrion.com/blog/2012/02/dtos-should-transfer-data-not-entities/)

上面的链接不起作用，看起来像一个域问题（我希望它会得到修复），这里是来源：

*   [DTO 应该传输数据，而不是实体](https://github.com/davybrion/companysite-dotnet/blob/d1c43c2ba5ce7c0b212f4eb3434a865976018eb7/content/blog/2010-05-why-you-shouldnt-expose-your-entities-through-your-services.md)
*   [为什么你不应该通过你的服务暴露你的实体](https://github.com/davybrion/companysite-dotnet/blob/master/content/blog/2012-02-dtos-should-transfer-data-not-entities.md)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-27T05:09:51.620

我一直厌恶由 DTO 导致的重复的类层次结构。这似乎是对[DRY](http://en.wikipedia.org/wiki/Don%27t_repeat_yourself)原则的公然违反。但是，经过仔细研究，DTO 和相应的一个或多个实体扮演着不同的角色。如果您确实在应用领域驱动设计，那么您的领域实体不仅包含数据，还包含行为。相比之下，DTO 仅携带数据并充当域和 WCF 之间的[适配器。](http://en.wikipedia.org/wiki/Adapter_pattern)[所有这些在六边形架构（](http://alistair.cockburn.us/Hexagonal+architecture)也称为端口和适配器以及[洋葱架构](http://jeffreypalermo.com/blog/the-onion-architecture-part-1/)）的上下文中更有意义. 您的域是核心，WCF 是一个将您的域暴露在外部的端口。DTO 是 WCF 功能的一部分，如果您同意它是必要的邪恶，那么您的问题就会从试图消除它们转变为拥抱它们，而是关注如何促进 DTO 和域对象之间的映射。一个流行的解决方案是[AutoMapper](http://automapper.codeplex.com/)这减少了您需要编写的样板映射代码的数量。除了缺点之外，DTO 还带来了很多好处。一是它们在您的域实体和外部世界之间提供了一个缓冲区。这对重构有很大帮助，因为您可以很好地封装核心域。另一个好处是您可以设计您的 DTO，以便它们满足服务使用者的要求，这些要求可能并不总是与您的域对象的形状完全一致。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-05T08:04:19.153

就个人而言，我不喜欢使用 MessageContract 作为实体。不幸的是，我有一个使用 MessageContract 作为实体的现有 WCF 服务——即数据直接在数据访问层中填充到 MessageContract。不涉及翻译层。

我有一个使用此服务的现有 C# 控制台应用程序客户端。现在，我有一个新要求。我需要在实体中添加一个新字段。这不是客户需要的。新字段仅用于服务中的内部计算。我必须在 MessageContract 中添加一个名为“LDAPUserID”的新属性，它也充当实体。

这可能会也可能不会破坏客户端，具体取决于客户端是否支持`Lax Versioning`。请参阅[服务版本控制](http://msdn.microsoft.com/en-us/library/ms731060.aspx)。

> 很容易错误地认为添加新成员不会破坏现有客户。如果您不确定所有客户端都可以处理松散的版本控制，建议使用严格的版本控制指南并将数据合约视为不可变的。

有了这个经验，我相信使用 MessageContract 作为实体是不好的。

另外，请参阅[MSDN - 服务层指南](http://msdn.microsoft.com/en-us/library/ee658090.aspx)

> 设计在业务实体和数据合同之间转换的转换对象。

参考：

1.  [如何序列化 NHibernate 映射对象的所有属性？](https://stackoverflow.com/questions/1190718/how-do-i-serialize-all-properties-of-an-nhibernate-mapped-object)
2.  [使用 WCF 从类库中公开对象](https://stackoverflow.com/questions/794739/expose-object-from-class-library-using-wcf?rq=1)
3.  [仅序列化属性子集](http://social.msdn.microsoft.com/Forums/en-US/wcf/thread/c0b33511-3da5-4fc8-8b0b-05f42989bcec)

# c# - 从 Web 服务读取 XML 根据其属性的值删除子元素并将其写回

> ID：11681480
> 
> 赞同：0
> 
> 时间：2012-07-27T04:32:38.910
> 
> 标签：c#, xml, web-services

可以说以下是我使用此代码从我的网络服务收到的 xml 输入：

```
string url = txtURL.Text;
HttpWebRequest req = (HttpWebRequest)WebRequest.Create(url);
req.Method = "GET";
HttpWebResponse rep = (HttpWebResponse)req.GetResponse();
XmlDocument doc = new XmlDocument();
doc.Load(rep.GetResponseStream());
rep.Close(); 
```

现在我在“doc”中有以下xml文档

```
<note>
<parent_element>
<child_element attribute_1="1">
<inner_element> first Text </inner_element>
</child_element>
<child_element attribute_1="2">
<inner_element> second Text </inner_element>
</child_element>
</parent_element>
</note> 
```

现在我想根据其属性值删除第一个子元素。因此，如果子元素的属性值为“1”，那么我想删除“child_element”及其所​​有子元素。所以我的最终结果应该是这样的：

```
<note>
<parent_element>
<child_element attribute_1="2">
<inner_element> second Text </inner_element>
</child_element>
</parent_element>
</note> 
```

删除元素后，我会将其写回 Web 服务。我知道我要求很多，但到目前为止还没有弄清楚。我会包含我的代码，但由于我是 xml 操作的新手，我认为这没有用（悲伤的脸）。任何帮助或方向将不胜感激。

感谢你们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T05:01:56.073

首先：`doc.load(txtURL.Text)`足以从远程位置加载 XML。

您可以像这样删除节点：

```
XmlDocument doc = new XmlDocument();
doc.Load(filename);

//Select node that needs to be deleted
XmlNode node = doc.SelectSingleNode("/note/parent_element/child_element[@attribute_1 = '1']");
node.ParentNode.RemoveChild(node); 
```

您如何将所有内容写回您的 Web 应用程序取决于它所期望的内容。我将附上一个针对 RESTful Web 服务发布 XML 文件的示例

```
WebRequest req = WebRequest.Create(updateURL);

req.ContentType = "text/xml";
req.Method = "POST";
byte[] bytes = System.Text.Encoding.Default.GetBytes(xmldoc);
req.ContentLength = bytes.Length;

Stream data = req.GetRequestStream();

data.Write(bytes, 0, bytes.Length);
data.Close(); 
```

# iphone - 抑制警告：来自 xx 的类别中的元方法 xx 与来自另一个类别的相同方法冲突

> ID：11681485
> 
> 赞同：5
> 
> 时间：2012-07-27T04:33:14.780
> 
> 标签：iphone, ios, xcode

如何抑制此编译器警告： `Meta method 'prefix' in category from '...soap+prefix.o' conflicts with same method from another category`？这是soap+Prefix.h的类别：

```
 @interface Soap (Prefix)

   +(NSString*)prefix;

   @end 
```

和肥皂+前缀.m：

```
#import "Soap.h"
#import "Soap+Prefix.h"

 @implementation Soap (Prefix)

  +(NSString*)prefix { return @"EInspector"; }

  @end 
```

`SudZc`顺便说一下，这两个文件是使用Web 服务的包装器自动生成的。

ps 此警告仅在 XCode 4.4 中发出

非常感谢你。

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2012-08-25T12:44:05.440

当我不小心导入了类别 (.m) 的实现文件而不是头文件 (.h) 时，这发生在我身上。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-31T04:00:47.367

在您的项目中的其他地方，`+[Soap prefix]`正在一个类别中声明。尝试在您的项目中搜索其他`+prefix`.

另一种可能性是，在您的`project.pbxproj`文件进行大型重构或复杂合并期间，项目以同一文件的两个引用或副本结束，并且都正在编译。我已经看到它发生了，这些警告或错误通常会发生。尝试在 Finder 中搜索具有相同名称的其他文件，以查看您是否在某处有重复文件。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-05-08T08:54:36.243

在我的情况下，问题是由于 project.pbxproj 的错误合并（与 Nick Forge 的情况非常相似），这导致对同一文件的引用过多（但是该文件在磁盘上仅存在一次）。当我删除多余的引用时，警告停止出现。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-31T03:55:14.930

您应该参考也发布类似内容的人的一个很好的答案：

[有没有办法抑制 Xcode 中的警告？](https://stackoverflow.com/questions/194666/is-there-a-way-to-suppress-warnings-in-xcode)

在我看来，第二个（最高投票）选项是最好的！

# windows - 将 Azure 网站迁移到 Azure 云服务

> ID：11681488
> 
> 赞同：13
> 
> 时间：2012-07-27T04:33:30.860
> 
> 标签：windows, azure, cloud, cloud-hosting, azure-web-app-service

我有一个项目，我计划将 Web 应用程序作为 Azure 网站启动，然后如果需要将其作为扩展策略将其迁移到 Azure 云服务（也称为托管服务）。

这个决定是因为我读到 Azure 网站开发起来更加简单和快速，几乎没有 Azure 特定的配置或代码。因此，快速而简单地开始是该项目的一个很好的起点。

但是，这对您来说是一个好的起点吗？将 Azure 网站迁移到 Azure 云服务与将普通 ASP.NET 网站迁移到 Azure 云服务一样吗？您会从一开始就使用 Azure 云服务吗？如果是，为什么？

谢谢你的时间。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-07-27T17:19:07.650

这两种部署模型都有好处，最终会归结为您要实现的目标以及应用程序的最终成功。

下面我概述了每个模型的优点和缺点，以确保您为您的应用程序目标做出正确的选择。

# Windows Azure 网站

您已经正确地确定 Windows Azure 网站是应用程序的一个很好的起点，但是您也可以认为网站确实为许多解决方案提供了足够的可伸缩性。

## 优点

*   ~~预览期间~~的10 个免费网站[~~[免费 12 个月](http://aka.ms/TryAzureToday)~~~~]~~
*   轻松部署（使用 Git、[TFS](http://tfspreview.com)、Web 部署或 FTP）
*   [快速可扩展性](http://go.microsoft.com/fwlink/?LinkId=254426&clcid=0x409)（您可以移动到自己的专用集群 [aka~~保留~~标准]）
*   简单开发（支持经典 ASP、[ASP.NET](https://www.windowsazure.com/en-us/develop/net/)、[Node.js](https://www.windowsazure.com/en-us/develop/nodejs/)、Python 和[PHP](https://www.windowsazure.com/en-us/develop/php/)）
*   持久化环境（大多数人都习惯了）

## 缺点

*   ~~自定义域不支持 SSL~~
*   ~~在预览中（目前没有 SLA）~~

# Windows Azure 云服务

云服务（以前称为托管服务）绝对是 Web 应用程序未来的愿景。它在构建时考虑了弹性，通过扩展以满足需求来保持应用程序的成本负担得起，并在流量变慢时回拨容量。

## 优点

*   增加对应用程序成本的控制（如果架构正确）
*   灵活性（您可以完全控制环境）
    *   SSL 支持
    *   语言不可知论者
    *   Web 服务器不可知（尽管 IIS 默认可用）
*   服务器自动管理

## 缺点

*   应该仔细考虑架构
*   部署时间较慢（减慢开发周期）

# 便携性需要考虑的事项

上述项目可能已经为您提供了足够的计划应用程序的近期未来，并且您很可能希望在未来考虑云服务（从长远来看，它更适合许多应用程序场景）。

以下是有助于在网站之间移植到云服务的事项列表：

1.  **开始思考无状态**

    Windows Azure 网站很好，因为它是一个持久环境，这意味着您可以将会话状态和资产等内容存储到磁盘。

    虽然这是一个很好的功能，但如果您的最终目标是云服务，那么最好开始规划无状态应用程序。以下是您可以做的一些事情来开始思考无状态：

    *   **不要依赖会话状态**
        *   如果你需要它，想出一个策略来扩展它（缓存服务、SQL 或存储）
    *   使用存储服务
        *   静态 HTML、css、javascript 和图像等资产最好放在 Storage 中
            *   避免在您的网站上增加额外的带宽（可能以更低的成本保持共享更长时间）
            *   可以启用 CDN，为国际市场提供更好的体验
            *   将应用程序迁移到云服务时更容易更新 Web 资产
        *   存储用户内容
            *   如果您的应用程序已经存储到存储服务中，那么在将来迁移到云服务时，您的代码修改会少一点。
2.  **轻松发现数据中的模式**

    云服务的好处是它使您能够通过仅扩展需要扩展的内容来降低成本。开始识别规模单位的过程，即如何对数据库或存储中的表进行分区。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-21T17:36:38.180

我阅读了所有帖子，所有帖子都非常有帮助。除了所有帖子之外，我还在 msdn 上找到了一条信息：[Windows Azure 网站、云服务和 VM：何时使用哪个？](https://azure.microsoft.com/en-us/documentation/articles/choose-web-site-cloud-service-vm/)

使用 Windows Azure 网站，您可以：

*   在 Windows Azure 上构建高度可扩展的网站。
*   快速轻松地将站点部署到高度可扩展的云环境，使您可以从小规模开始并根据需要进行扩展。
*   使用您选择的语言和开源应用程序，然后使用 FTP、Git 或 TFS 进行部署，并轻松集成 SQL 数据库、缓存、CDN 和存储等 Windows Azure 服务。

借助云服务，您可以：

*   在 Windows Azure 上构建或扩展您的企业应用程序。
*   使用丰富的 PaaS 环境创建高度可用、可扩展的应用程序和服务。支持高级多层场景、自动化部署和弹性扩展。为世界各地的客户提供出色的 SaaS 解决方案。

并且还总结了 msdn 上的选项：

![总结有关网站、云服务和虚拟机的选项](../Images/fb6bf677b1bfaa919db9567f7e3e411c.png)

并比较 msdn 上的一些功能网站和云服务：

![比较网站和云服务的功能](../Images/97b25d02129fea327325a3282db182bb.png)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-27T04:50:08.103

Azure 是拥有您的应用程序的好地方，但在开始迁移之前您需要了解一些注意事项。

*   Azure 网站和托管服务的部署非常简单。使用 Visual Studio，您可以生成包并简单地上传它。然后你有一个开发环境来检查它。如果你没问题，换个ip。如果不适合您，请再次升级。

*   您的实例有一些可能令人讨厌的属性。例如，您无法确定自己的 IP。然后，如果您的应用程序使用 IP 限制与某些提供商合作，您将需要弄清楚如何继续。

*   更多考虑。您的“服务器”可以随时重新映像。如果您将某些内容存储在本地磁盘上，则该文件可能随时消失。

*   如果每个网站至少有 2 个或更多实例，Azure 会非常好用。也许您的应用程序还没有为此做好准备。第一步是[使用 appFabri](http://msdn.microsoft.com/en-us/wazplatformtrainingcourse_buildingappswithcacheservice_topic3.aspx) c 管理会话。真的很简单，只需更改您的网络配置。请小心，因为此会话状态与“旧状态”不完全相同。您不能存储不可序列化的对象（应该很容易适应）或非常大的对象（超过 8MB）。

如果你打算从零开始开发一些东西，我建议你从一开始就进入 azure。原因很简单：开始真的很便宜，而且在应用程序获得大量访问之前，你不会花大笔钱。设置 SQLAzure 和存储帐户也非常便宜。一切就绪，添加更多实例或扩大规模很容易。

**例子：**

想象一下，您有一个想法，并且希望向一些可能的投资者展示。

您开始设置一个小型 SQLAzure 数据库 (1GB)，每月 9,99 美元。

然后您建立一个站点并放置 2 个额外的小型实例，每月 18,72 美元。

假设您需要 100 GB 的空间（图像、备份等），每月 12,50 美元。

在他看来，您已经准备好开始您的业务，每月支付的费用不到 50 美元。

如果您的站点有出口并且开始访问，则将您的实例更改为小实例（生产环境中有额外的小实例真的很危险，因为没有 cpu 预留）。然后，您将额外的小成本（18,71 美元）更改为 57,60 美元。也许您需要更多空间来存储 SQL Azure？ETC...

从这里计算的价格：http: [//www.windowsazure.com/en-us/pricing/calculator/](http://www.windowsazure.com/en-us/pricing/calculator/?scenario=web) ?scenario=web 。

这些只是一些提示，还有更多。我的建议是开始一个试用帐户并使用它。

**最后的建议：**只需购买更多资源即可轻松解决所有问题。有时你需要重构和优化你的代码。如果每次遇到问题时都简单地添加更多资源，那么最终可能会产生巨额账单和非常混乱的代码。

希望能帮助到你！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-01T10:48:46.790

Windows Azure 云服务相对于网站的另一个优势是可以将云服务添加到 Azure 虚拟网络。这可以使其访问数据库等本地资源。因此，如果您的要求是需要 Azure 提供的可扩展性，但由于安全限制需要将数据保存在本地，那么云服务是更好的选择。

Azure 网站不能成为 Azure 虚拟网络的一部分。若要访问本地资源，必须配置 Azure 服务总线中继等机制。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-02T18:04:40.603

我们已经让我们的网站在一些主机上运行在 PHP 上，并且在某个时候决定将其移动到 Azure（这是我们服务的主要部分）。我们从 Azure 网站开始，这从开发的角度来看非常棒（主要是与 git 集成）。但是经过大约一周的测试（当我们决定实际移动生产网站时）我们发现目前

1.  自定义域没有 SSL
2.  自定义域仅适用于保留实例（无共享基础架构）
3.  服务水平协议

所以我们搬到了托管服务。我们的主要问题是缺乏简单部署的能力（需要构建包并上传网站的整个包），并找到解决方案是使用dropbox - 作为角色的启动任务，我们正在安装dropbox服务机器，它从保管箱中获取所有网站，而保管箱又具有 SVN 签出文件夹，因此站点更新变得非常容易。

# java - JSTL 代码转换为 Java 类或如何在单独的类中实现相同

> ID：11681499
> 
> 赞同：0
> 
> 时间：2012-07-27T04:35:39.700
> 
> 标签：java, jdbc, jstl, resultset

我有以下 JSTL 代码，

```
<sql:setDataSource  dataSource="jdbc/xxx"/>
   <sql:query var="ab" scope="application"  maxRows="100">
   select Distinct DATE(timestamp) as DATE from tableA ORDER BY DATE DESC LIMIT 100;
   </sql:query>  
   <c:forEach var="row" items="${ab.rows}">
   <h1><c:out value="${row.DATE}"/></h1>
   <sql:query var="abc" scope="application"  maxRows="100">
   Select title from tableA Where DATE(timestamp) = "<c:out value="${row.DATE}"/>";
   </sql:query>                          
   <c:forEach var="row" items="${abc.rows}">
   <c:out value="${row.title}"/><br><br>
   </c:forEach>
   </c:forEach> 
```

如何实现与 java 类相同的要求。这是我的要求，此 JSTL 代码满足[基于日期显示数据](https://stackoverflow.com/questions/11484680/display-data-based-on-date)

这是我正在尝试的类代码，

```
HashMap<ArrayList<Date>, ArrayList<String>> TitleList = new HashMap<ArrayList<Date>,ArrayList<String>>();
        ArrayList<Date> DateList = new ArrayList<Date>();
        ArrayList<String> Title = new ArrayList<String>();
        ArrayList<Date> DateListinner = new ArrayList<Date>();
        List<Map<String, Object>> rows = new ArrayList<Map<String, Object>>();
        String sqld = "Select Distinct DATE(timestamp) as DATE from TABLE A ORDER BY DATE DESC LIMIT 100";
        ResultSet rsd = null;
        try {
            rsd = stmt1.executeQuery(sqld);
        } catch (SQLException ex) {
            Logger.getLogger(sortxx.class.getName()).log(Level.SEVERE, null, ex);
        }
        try {
            while (rsd.next()) {
                System.out.println("Testing");
                Date Date = rsd.getDate("Date");
                System.out.println(Date);
                DateList.add(Date);
                String sql = "Select title,DATE(timestamp) as DATE from TABLEA Where DATE(timestamp) = '" + Date + "'";
                //     System.out.println(sql);
                ResultSet rs = stmt.executeQuery(sql);
                ResultSetMetaData metaData = rs.getMetaData();
                int columnCount = metaData.getColumnCount();
                System.out.println(columnCount);
                while (rs.next()) {
                    String title = rs.getString("title");
                    Title.add(title);
                    //     System.out.println("Testing inside");
                    System.out.println(rs.getString("title"));           
                    DateListinner.add(rs.getDate("DATE"));
                    Map<String, Object> columns = new LinkedHashMap<String, Object>();
                    for (int i = 1; i <= columnCount; i++) {
                        columns.put(metaData.getColumnLabel(i), rs.getObject(i));
                    }
                    rows.add(columns);
                    TitleList.put(DateList,Title); 
                }
            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T06:05:01.620

创建简单的[JDBC](http://docs.oracle.com/javase/tutorial/jdbc/overview/index.html)类，获取 DATE 和 TITLE 列表，然后将其作为属性发送到 JSP，使用您的 JSTL 代码将其写出。

# python - Python - 如何将列表条目动态映射和附加到字典

> ID：11681502
> 
> 赞同：1
> 
> 时间：2012-07-27T04:36:19.130
> 
> 标签：python, dictionary

我今天花了很大一部分时间来解决这个问题——我正在从串行端口服务器设备（通过套接字模块）读取数据。数据输入正常，我正在尝试对其进行简单的字符串处理（确认正确的数据块大小），然后再添加时间戳并将完整的块放入字典中，以时间戳为键。这是代码：

```
for i in range(0, (len(rawData)+1)):
    if len(rawData[i]) == 57:
        ss2000_data[str(time.time())] = (rawData[i].split(', '))
        print ss2000_data
    else: continue 
```

字典处理正常，因为我得到了一个有效的键：值对——一次！循环部分不起作用，所以无论我收到多少串行数据，我只会得到一个键：值对。

我已经扫描了这里的问题，也在 Python.org 论坛上，还浏览了文档“Learning Python”、“Python Pocket Ref”和 python.org 上的 Python 教程，但我没有得到任何结果。我也是 Python 的相对菜鸟。我将不胜感激任何有关潜在信息来源的建议或指示。提前感谢，非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T04:42:39.523

（我假设 rawData 包含来自串行连接的一些行/数据报。）

`time.time()`不保证提供几分之一秒。您可能处理得太快而`time.time()`无法提供其初始值以外的任何内容。尝试`str(i)`在您用于存储拆分数据的密钥之前添加，或使用另一个`i`保证随每个循环更改的密钥（可能从 派生）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T13:12:26.467

如果只打印 1 个条目，这意味着 rawData 中只有 1 个条目的长度为 57，对吗？

稍微清理一下代码，并添加一些调试。保持简单和接近你所拥有的：

```
for block in rawData:
  print 'Block,len=%d' % (len(block),)
  if len(block) == 57:
     ss2000_data[str(time.time())] = (block.split(', '))
     print ss2000_data 
```

如果您期望 rawData 中有超过 1 个长度为 57 的条目，那么您确定“数据输入正常”吗？

# tomcat - mvn package tomcat6:deploy 和 mvn tomcat6:deploy 的区别

> ID：11681507
> 
> 赞同：1
> 
> 时间：2012-07-27T04:36:59.860
> 
> 标签：tomcat, maven, maven-tomcat-plugin

是`mvn package tomcat6:deploy`和`mvn tomcat6:deploy`做同样的事情吗？我在我的系统上都试过了，但找不到任何显着的区别。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T21:18:03.043

不，没有区别。请参阅文档[http://tomcat.apache.org/maven-plugin-2/tomcat6-maven-plugin/deploy-mojo.html](http://tomcat.apache.org/maven-plugin-2/tomcat6-maven-plugin/deploy-mojo.html)

“在执行自身之前调用生命周期阶段包的执行。”

# ios - UIButton 和 IBAction

> ID：11681521
> 
> 赞同：-1
> 
> 时间：2012-07-27T04:37:47.050
> 
> 标签：ios, uibutton, ibaction

我在情节提要上有一个自定义 UIButton 并且我已经连接了 IBAction

```
 - (IBAction)homeButtonPressed {
NSLog(@"home"); 
```

}

检查它是否有效。当我按下按钮时，它会突出显示所有内容，所以我知道按钮正在被按下..但是 NSLog 没有打印.....

顺便说一句，用户交互已启用......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T04:44:46.083

您确定将该方法与情节提要中的按钮事件 UIControlEventTouchUpInside 连接起来吗？如果是，请尝试删除按钮，再次创建并连接到该方法...（无法看到您的项目，这是我认为最快的解决方法）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T04:47:55.163

这

```
 (id)sender 
```

不是只需要获取事件发送者的问题，而是该方法必须在没有它的情况下工作......

# database - cassandra 数据库中的通配符搜索

> ID：11681522
> 
> 赞同：8
> 
> 时间：2012-07-27T04:37:54.627
> 
> 标签：database, search, cassandra, wildcard

我想知道是否有任何方法可以在 cassandra 数据库中执行通配符搜索。例如

```
select KEY,username,password from User where username='\*hello*'; 
```

或者

```
select KEY,username,password from User where username='%hello%'; 
```

像这样的东西。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-27T08:52:32.120

在 Cassandra 中没有执行此类查询的本地方法。实现相同目标的典型选项是

a) 自己维护可能的搜索词的索引。例如，每当您插入用户名中包含 hello 的条目时，请在索引列族中插入一个条目，其中 hello 作为键，列值作为数据条目的键。查询时，查询索引 CF，然后从数据 CF 中获取数据。当然，这在本质上是相当严格的，但对于一些基本需求可能很有用。

b) 更好的选择是使用全文搜索引擎。看看 Solandra，[https://github.com/tjake/Solandra](https://github.com/tjake/Solandra)或 Datastax 企业[http://www.datastax.com/products/enterprise](http://www.datastax.com/products/enterprise)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-07T17:22:34.767

这个项目看起来也很有希望 [http://tuplejump.github.io/stargate/](http://tuplejump.github.io/stargate/)

我最近没有深入研究它，但是当我上次评估它时，它看起来很有希望。

# vb.net - VB.NET中access数据库的日期比较

> ID：11681524
> 
> 赞同：0
> 
> 时间：2012-07-27T04:38:13.810
> 
> 标签：vb.net, ms-access

我被困在一个查询中，以将当前日期与以给定格式 7/25/2012 存储在访问数据库表中的日期进行比较

我正在使用这个查询：

```
Sql = "SELECT max(token_today)
FROM token
WHERE issue_date = #" & FormatDateTime(Now,    DateFormat.ShortDate) & "#" 
```

我收到以下错误：

> 从字符串 ** 到类型“整数”的转换无效。

请告诉我如何比较日期。谢谢你！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T08:13:40.580

如果您想比较今天的日期，则无需外部参考：

```
Sql = "SELECT max(token_today) FROM token WHERE issue_date = Date()" 
```

这也节省了语言环境的各种问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T04:57:03.867

我认为这应该有效：

```
"SELECT max(token_today) FROM token WHERE issue_date = #" & FormatDateTime(Now,"YYYY/MM/DD") & "#" 
```

# php - php插入mysql不工作

> ID：11681525
> 
> 赞同：1
> 
> 时间：2012-07-27T04:38:14.387
> 
> 标签：php, mysql

.我不知道是语法还是什么。我尝试了多种方法，这是我认为最简单的方法。

我使用以下方法将信息发送到 userData.php：

```
http://mydomain.com/adverts/userStats.php?name=001EC946C2F4&adNum=1&playClick=1 
```

在 userData.php 我有：

```
<?php 
    $db = mysql_connect('localhost', 'username', 'password') or die('Could not connect: ' . mysql_error()); 
   $db_selected =  mysql_select_db('databaseName', $db) or die('Could not select database');
if (!$db_selected)
  {
  die ("Can\'t use test_db : " . mysql_error());
  }

    $name = mysql_real_escape_string($_GET['name']); 
    $date = date("d/m/Y");
    $adClick = mysql_real_escape_string($_GET['adNum]);
    $playN = mysql_real_escape_string($_GET['playClick']);

$query = mysql_query("INSERT INTO playerData VALUES ('$name', '$date','$adClick','$playN')");
$result = mysql_query($query) or die('Query failed: ' . mysql_error())); 

mysql_close($db);
?> 
```

我从 phpMyAdmin 手动将 2 条记录添加到表中，我可以很好地显示或更新它们，但添加新记录不起作用。我只想在每次从另一个程序调用链接时开始一条新记录，并存储mac地址、日期、adNum和playClick。

EDIT2:: 回声 $query; 为了

```
http://simplehotkey.com/adverts/userStats.php?name=001EC946C2F4&adNum=1&playClick=1 
```

输出：
INSERT INTO playerData(mac,date,AdClick,PlayNum) VALUES ('001EC946C2F4', '26/07/2012','1','1')

这就是我想要的，只是不将其添加到数据库中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T04:39:42.520

很容易看出这里出了什么问题，尤其是语法高亮。

```
$adClick = mysql_real_escape_string($_GET['adNum]); 
```

此行缺少单引号；它应该是：

```
$adClick = mysql_real_escape_string($_GET['adNum']); 
```

这是一个语法错误，会破坏其他一切。

更不用说您的数据库选择缺少您的数据库处理程序，即：

```
mysql_select_db('databasename',$db); 
```

正如@swapnesh 所指出的， [并且如此处所述。](http://php.net/manual/en/function.mysql-select-db.php)

**编辑**

我无法重现您没有错误，但是我得到的是错误。首先，您在第 12 行有一个额外的 ) ：

```
$result = mysql_query($query) or die('Query failed: ' . mysql_error())); 
```

应该：

```
$result = mysql_query($query) or die('Query failed: ' . mysql_error()); 
```

最后，您实际上两次错误地执行了查询，因此第二次查询为空。你有什么：

```
$query = mysql_query("INSERT INTO playerData VALUES ('$name', '$date','$adClick','$playN')");
$result = mysql_query($query) or die('Query failed: ' . mysql_error())); 
```

应该是：

```
$query = "INSERT INTO playerData VALUES ('$name', '$date','$adClick','$playN')";
$result = mysql_query($query) or die('Query failed: ' . mysql_error()); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-27T04:39:50.587

正确的语法是——

```
mysql_select_db("databaseName", $db); 
```

如果你使用这样的东西来解决连接错误，那就更好了——

```
$db_selected= mysql_select_db("databaseName", $db);
if (!$db_selected)
  {
  die ("Can\'t use test_db : " . mysql_error());
  } 
```

**编辑**

你写错了:(

```
$query = mysql_query("INSERT INTO playerData VALUES ('$name', '$date','$adClick','$playN')");
$result = mysql_query($query)  <--------------WRONG 
```

试试这样的东西----

```
$query = "INSERT INTO playerData(CORRECT_COL_NAMES) VALUES ('$name', '$date','$adClick','$playN')";
$results = mysql_query($query, $connection); 
```

**新编辑**

错误区域----错误`DATATYPE`

','1','1' <--- 这是作为字符串传递的，而你在你的数据库结构中有这个作为 int ..现在运行相同的查询来找出错误..你也可以找出使用 $result =`mysql_query($query) or die(mysql_error());`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T04:47:36.277

而不是使用插入语句的方式添加将显式接收条目的字段。数据库表可能有更多字段，并且插入语句没有明确说明哪些字段将接收数据。

```
$query = mysql_query("INSERT INTO playerData (Name,Date,AdClick,PlayN) VALUES ('$name', '$date','$adClick','$playN')"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-27T05:01:05.513

您在此行有语法错误

**错误的 ：**

```
$adClick = mysql_real_escape_string($_GET['adNum]); 
```

**正确的 ：**

```
$adClick = mysql_real_escape_string($_GET['adNum']); 
```

# ruby-on-rails - 类方法与数据库字段的Rails优先级

> ID：11681526
> 
> 赞同：0
> 
> 时间：2012-07-27T04:38:20.703
> 
> 标签：ruby-on-rails

我有一个图片类，我想根据某些逻辑覆盖返回“描述”数据库列值。

这在 Rails 中有效吗？在返回数据库列值之前，我可以一直依赖类调用类方法吗？

```
# database columns for Picture class
# description => String
# parent_id => Integer

class Picture < ActiveRecord::Base

  def description
    if parent_id.nil?
      self.description      
    else
      description = Picture.find(parent_id).description
    end
  end

end 
```

无法弄清楚在 Rails 源代码中的哪里可以找到答案，因此我们将不胜感激。

谢谢！

编辑

我正在尝试返回图片的描述，具体取决于它是子图片还是父图片（它们可以嵌套）。这个例子有点做作......我可以通过使用与数据库列没有相同名称的方法来轻松避免这种情况......例如

```
def my_description
   if parent_id.nil? # return db data since no parent
      self.description
   else # return parent's description if one exists
      description = Picture.find(parent_id).description
   end
end 
```

我想我在这里试图变得不必要的复杂

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T04:53:02.463

目前尚不清楚您要做什么，但您可以使用 super 从方法中获取描述值：

```
def description
  if parent_id.nil?
    super
  else
    self.description = Picture.find(parent_id).description
  end
end 
```

请注意，我将最后一行更改为使用`self.description =`，因为我假设您要设置描述值。如果不是这种情况，那么您不需要将其分配给任何变量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T05:49:04.533

您应该在您的描述方法中使用 read_attribute(:description) （可以覆盖）。

此外，您可以在 else 部分执行 parent.description 而不是 Picture.find rigmarole。使用我相信你有的家长协会。

```
def description
  # if parent_id is there and the parent object can be found and that parent has a description
  if (parent_id? && parent && parent.description?)
    # show parental description
    parent.description
  else
    # read my own database attribute
    read_attribute(:description)
  end
end 
```

不确定分配给上面的描述是否会做任何事情，因为它最终会成为一个局部变量。在读者中做 self.description= 只是有点讨厌恕我直言。

# c++ - C ++我如何为ifstream使用变量

> ID：11681528
> 
> 赞同：2
> 
> 时间：2012-07-27T04:38:24.877
> 
> 标签：c++

```
void searchString(const string selection,const string filename)
{
    ifstream myfile;
    string sline;
    string sdata;
    myfile.open(filename);
    while(!myfile.eof())
    {
        getline(myfile,sline);
        sdata = sdata + sline;
    } 
```

我如何使用字符串文件名作为 myfile.open(filename)

最初我使用的是file.txt，但如果我使用函数传入的变量，如字符串文件名，它会给我一个错误

```
myfile.open("file.txt"); 
```

错误信息如下：

```
main.cpp:203:25: error: no matching function for call to ‘std::basic_ifstream<char>::open(const string&)’
main.cpp:203:25: note: candidate is:
/usr/include/c++/4.6/fstream:531:7: note: void std::basic_ifstream<_CharT, _Traits>::open(const char*, std::ios_base::openmode) [with _CharT = char, _Traits = std::char_traits<char>, std::ios_base::openmode = std::_Ios_Openmode]
/usr/include/c++/4.6/fstream:531:7: note:   no known conversion for argument 1 from ‘const string {aka const std::basic_string<char>}’ to ‘const char*’
make: *** [main.o] Error 1 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-27T04:46:08.943

（对于您正在使用的特定 C++ 标准）的构造函数`std::ifstream::open`不允许`std::string`参数，因此您必须使用：

```
 myfile.open(filename.c_str()); 
```

构造函数需要`const char *`您可以`std::string`使用其`c_str()`成员函数从对象中获取的类型。

# function - Lua 最大数查找器

> ID：11681533
> 
> 赞同：1
> 
> 时间：2012-07-27T04:39:00.983
> 
> 标签：function, lua, numbers, negative-number

这是我的一个简单程序的代码，它在表中找到最大的数字，并返回数字和它的索引。我的问题是该程序不适用于底片。

```
 numbers = {1, 2, 3}

 function largest(t)
   local maxcount = 0
   local maxindex
   for index, value in pairs(t) do
    if value > maxcount then
       maxcount = value
       maxindex = index
     end
   end
   return maxcount, maxindex
 end

 print(largest(numbers)) 
```

这段代码打印出“3 3”。最大的数字是 3，它在第 3 位。当我将数字设置为 {-1, -2, -3} 时，它返回“0 nil”而不是“-1 1”。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-27T04:42:56.757

`maxcount`必须在开始时设置为一个很大的负数，而不是零。尝试`-math.huge`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-27T04:42:45.500

您的默认值是错误的。他们应该是

```
local maxcount = t[1]
local maxindex = 1 
```

您收到“0 nil”是因为

*   `maxindex`在 if 条件`value > maxcount`为真之前是未定义的。

*   默认`maxcount`值为 0，大于所有负数。

# php - 在 CakePHP 中使用更安全的散列算法

> ID：11681535
> 
> 赞同：6
> 
> 时间：2012-07-27T04:39:08.823
> 
> 标签：php, cakephp, passwords, hash

默认情况下，CakePHP 似乎使用 SHA1 算法对密码进行哈希处理，并且似乎只提供 SHA256 作为替代方案：

[http://api.cakephp.org/view_source/security#line-86](http://api.cakephp.org/view_source/security#line-86)

在公开我的应用程序之前，我想切换到更安全的密码哈希解决方案，以免将来切换到更安全的哈希算法时遇到麻烦。我四处寻找一些关于使用 bcrypt 或类似东西的指南，但它们似乎都适用于旧版本的 Cake，或者散列的实现很差。

是否有指南可以向我展示如何在不更改模型或控制器中的任何代码的情况下集成更好的密码散列？

还有一个小问题，为什么 Cake 开发者在他们的版本中只包含 SHA 密码散列？众所周知，SHA 是一种损坏的密码散列算法，在我看来，这样一个有声望的框架不会忽视这一点。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-27T05:27:13.630

在[这张票](http://cakephp.lighthouseapp.com/projects/42648/tickets/3032)中，CakePHP 贡献者 Mark Story 提到，bcrypt 将在 CakePHP 2.3（尚未发布）中得到支持，并将成为 3.0 中的标准/默认值。

此外，在[这篇博](http://mark-story.com/posts/view/using-bcrypt-for-passwords-in-cakephp/)文中， Mark 谈到了在 CakePHP 2.0 中使用 bcrypt 需要进行哪些更改。似乎相对较小，尽管需要更改您的用户模型。

借用那篇文章的代码，Mark 所做的是创建了 FormAuthenticate 的子类：

```
<?php
App::uses('FormAuthenticate', 'Controller/Component/Auth');

class BcryptFormAuthenticate extends FormAuthenticate {

/**
 * The cost factor for the hashing.
 *
 * @var integer
 */
    public static $cost = 10;

/**
 * Password method used for logging in.
 *
 * @param string $password Password.
 * @return string Hashed password.
 */
    protected function _password($password) {
        return self::hash($password);
    }

/**
 * Create a blowfish / bcrypt hash.
 * Individual salts could/should used to be even more secure.
 *
 * @param string $password Password.
 * @return string Hashed password.
 */
    public static function hash($password) {
        $salt = substr(Configure::read('Security.salt'), 0, 22);
        return crypt($password, '$2a$' . self::$cost . '$' . $salt);
    }
} 
```

然后对控制器组件数组进行了更新：

```
<?php
public $components = array(
    'Auth' => array(
        'authenticate' => 'BcryptForm',
        // other keys.
    )
); 
```

最后更新 User 模型的`beforeSave`回调：

```
<?php
App::uses('BcryptFormAuthenticate', 'Controller/Component/Auth');

class User extends AppModel {
    function beforeSave() {
        if (isset($this->data['User']['password'])) {
            $this->data['User']['password'] = BcryptFormAuthenticate::hash($this->data['User']['password']);
        }
        return true;
    }

} 
```

# xcode - 验证应用程序错误：发生 SSL 错误，无法与服务器建立安全连接

> ID：11681537
> 
> 赞同：0
> 
> 时间：2012-07-27T04:39:32.147
> 
> 标签：xcode, ssl, submission

在 XCode 中，我尝试上传应用程序 A 的新版本，但每次都会出现此错误。然后我要上传另一个应用程序 B，一切正常（验证正常，上传正常）。然后我返回应用程序 A，它仍然给出相同的错误。

我试过： 1\. 重启 XCode。2\. 重启 Mac。3\. 全部清除并重新存档。

还是同样的错误。是什么赋予了？ ![在此处输入图像描述](../Images/66c3f53a93794fc1f812594e035d5733.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-13T06:09:49.573

重新启动 xcode 或重新启动机器，如果您在 24 小时后再次上传相同的错误，我成功解决了这个错误

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T06:49:12.900

我也不知道为什么，但我认为你可以尝试直接上传你的应用程序，应该是 OKey。

# iphone - 动画 calayers 不断跟随手指位置

> ID：11681543
> 
> 赞同：1
> 
> 时间：2012-07-27T04:39:52.270
> 
> 标签：iphone, ios, core-animation

我有一个 UIView 包含许多 UILabel。现在我长按其中一个标签，然后其他标签会以动画方式飞向按下的标签，其他标签将不断跟随我的手指位置。

**我的问题是**

1.  如何使用核心动画执行此任务？
2.  在我的解决方案中，当标签数大于 20 时，动画非常缓慢。为什么？

```
-(void)viewDidLoad{
        [super viewDidLoad];
        _longGesture = [[UILongPressGestureRecognizer alloc] initWithTarget:self action:@selector(longPressGestureUpdated:)];
        _longGesture.numberOfTouchesRequired = 1;
        [[self dragView] addGestureRecognizer:_longGesture];
}
- (void)longPressGestureUpdated:(UILongPressGestureRecognizer *)longPressGesture
{
    switch (longPressGesture.state) 
    {
        case UIGestureRecognizerStateBegan:
        {
            location = [longPressGesture locationInView:self.view];
            [self startAllLayersAnimation];
            break;
        }
        case UIGestureRecognizerStateChanged:  
        case UIGestureRecognizerStateEnded:
        {
           location = [longPressGesture locationInView:self.view];
            [self startAllLayersAnimation];
            break;
        }
        default:
            break;
    }
}
- (void)startAllLayersAnimation
{
    [CATransaction begin];
    for (CALayer *layer in [self labelLayers]) 
    {
        [self startAnimation:layer];
    }
    [CATransaction commit];
}
- (void)startAnimation:(CALayer*)layer
{
    CGPoint now =((CALayer*)layer.presentationLayer).position;
    CABasicAnimation * cab = [CABasicAnimation animationWithKeyPath:@"position"];
    cab.delegate = self;
    cab.removedOnCompletion = NO;
    cab.fillMode = kCAFillModeForwards;
    cab.fromValue = [NSValue valueWithCGPoint:now];
    cab.toValue = [NSValue valueWithCGPoint:location];
    cab.duration = 1;
    //cab.timingFunction = [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseOut];
    [layer addAnimation:cab forKey:@"revItUpAnimation"];
} 
```

我的解决方案对吗？能告诉我如何更合适地执行此方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T05:29:51.767

而不是使用手势尝试使用`UITouch`. 它将作为 2 个事件有所帮助，`touchesBegan`并将`touchesMoved`包括您的`CABasicAnimation`方法。

# c - 适用于 Linux 的 dos.h？

> ID：11681545
> 
> 赞同：5
> 
> 时间：2012-07-27T04:40:12.380
> 
> 标签：c, linux, header-files

我有一个包含`#include <dos.h>`标题的 C 程序。它显示编译时错误。我知道`dos.h`头文件在 Linux 中无效。

`dos.h`Linux 中还有其他等效的标头吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-27T05:15:32.117

Linux 是一个类似 Posix/Unix 的系统，因此您应该学习可以使用的系统调用和工具。阅读[高级 unix 编程](http://basepath.com/aup/)书（或同等的；*AUP*被认为是一本非常好的书）。您还可以阅读[高级 linux 编程（甚至在线，](http://www.advancedlinuxprogramming.com/)[这里](http://richard.esplins.org/static/downloads/linux_book.pdf)有一份副本）。所以Linux没有`dos.h`标题。

你也可以在[syscalls(2)](http://www.kernel.org/doc/man-pages/online/pages/man2/syscalls.2.html)手册页中输入系统调用`man 2 intro`的[介绍，以及它们的列表。](http://www.kernel.org/doc/man-pages/online/pages/man2/intro.2.html)从应用程序的角度来看，[系统调用](http://en.wikipedia.org/wiki/System_call)是[Linux 内核](http://en.wikipedia.org/wiki/Linux_kernel)提供的[基本操作](https://stackoverflow.com/a/11609768/841108)。

[GNU libc](http://www.gnu.org/software/libc/)在系统调用之上提供了很多功能（例如，标准*C*函数，如`malloc`and `fprintf`，以及系统函数，如`fgetpwent`查询用户数据库等）。几乎每个 Linux 程序都使用它。

如果您关心应该在其他类似系统（例如 MacOSX 或 FreeBSD）上可移植运行（重新编译后）的编码内容，请考虑遵循[Posix](http://en.wikipedia.org/wiki/POSIX)标准。

如果要编写终端屏幕应用程序，请考虑使用[ncurses](http://www.gnu.org/software/ncurses/)。

如果您关心图形界面，请使用[Qt](http://qt.nokia.com/products/)或[Gtk 之](http://www.gtk.org/)类的[图形工具包](http://en.wikipedia.org/wiki/Graphical_software_toolkit)；它们通常与[X11](http://en.wikipedia.org/wiki/X_Window_System)服务器交互（通过提供通用的图形抽象层，Qt 和 Gtk 都能够在其他一些非 Posix 系统上运行，例如 Windows。）。Gtk 和 Qt 都在系统函数和设施之上（特别是在[pthreads](http://en.wikipedia.org/wiki/Pthreads)标准线程库之上）添加了一个抽象层（分别为 Glib 和 QCore）。

最后，Linux 是[免费软件](http://www.fsf.org/)；因此，您可能会发现查看正在使用的（库或实用程序的）源代码很有趣。你甚至可以改进它并为它做出贡献。

在所有这些方面，Linux 编程都与 Windows 或 DOS 有很大不同。

不要试图在 Linux 中模仿每个 Windows 或 Dos 功能（例如，不要询问每个`dos.h`功能的等价物）；学习 Posix/Unix 的思维和编码方式。

[time(7)](http://www.kernel.org/doc/man-pages/online/pages/man7/time.7.html)手册页告诉你很多关于 Linux 上时间的信息（关于它的各种含义和功能）。

不要忘记使用`gcc -Wall -Wextra`;向编译器询问警告。作为一般规则，请改进您的源代码，直到您没有收到任何警告。

`dos.h`因为 Linux（即 Unix 或 Posix 规范）和 Windows 是具有不同特性和概念的系统，所以不可能有一个完全等效的Linux。然而，一些免费库（我提到了 Glib 和 QCore）提供了通用的抽象来适应 Linux 和 Windows，所以如果你想开发可移植到 Windows 和 Linux 的软件，我建议改用这些库（在 Windows 和 Windows 上都使用它们） Linux）。

^(（我还怀疑微软会使用基于专利或版权的法律威胁来避免对其专有的免费克隆`dos.h`，因为他们的垄断声誉以及他们对标准和自由软件的厌恶；我承认我对微软有强烈的意见......）)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-07-27T04:51:51.503

dos.h 头文件是 DOS 操作系统的接口。它们不能移植到 DOS 以外的操作系统（意味着不能在 Linux 中运行）。您将使用 dos.h 中的哪个功能？

# css - div标签中的文本溢出

> ID：11681550
> 
> 赞同：2
> 
> 时间：2012-07-27T04:41:12.980
> 
> 标签：css, html

`div`每当我最大化窗口（任何浏览器）时，我都会在或标签中输入长字符串`span`，它与 div 标签完美匹配，但是当我最小化它或压缩浏览器宽度时，文本会从 div 区域出来。我只想知道如何在 div 区域中设置长文本拉伸或压缩。我试过了`ellipsis`，`white-space:nowrap`..我没有找到任何结果。还有其他解决方案吗？

屏幕前：当我压缩浏览器宽度时。 ![在此处输入图像描述](../Images/93fb5e738b8f6794c2d247336dc4b15b.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T04:55:44.500

我希望你想要这样的东西：

[**看演示**](http://jsfiddle.net/akhurshid/nrVJf/)

**CSS：**

```
div {
    // Div Styles Without Fixed Width and Height
    background: #ccc;
    padding: 20px;
    border: 1px solid #666;
}​ 
```

如果您使用固定高度，`<div>`那么您必须定义一个 css 属性`overflow:auto`（以便在内容变化时出现滚动条），或者`overflow:hidden;`（隐藏文本变化）

[**查看示例（溢出：自动）**](http://jsfiddle.net/akhurshid/nrVJf/7/)

[**查看示例（溢出：隐藏）**](http://jsfiddle.net/akhurshid/nrVJf/8/)

# objective-c - 从 UITableViewCell 的附件视图中删除视图不起作用

> ID：11681555
> 
> 赞同：1
> 
> 时间：2012-07-27T04:42:04.110
> 
> 标签：objective-c, uiview, uitableview, accessoryview

我在单元格的附件视图中设置了一个带有图像的 uiview，稍后我想删除此视图，以便附件类型可以再次显示为无。以下不起作用 -

```
 //create cell
        UITableViewCell *newCell = [tableView cellForRowAtIndexPath:indexPath];

        //initialize double tick image
        UIImageView *dtick = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"dtick.png"]];
        [dtick setFrame:CGRectMake(0,0,20,20)];
        UIView * cellView = [[UIView alloc] initWithFrame:CGRectMake(0,0,20,20)];
        [cellView addSubview:dtick];

 //set accessory type/view of cell
        if (newCell.accessoryType == UITableViewCellAccessoryNone) {
            newCell.accessoryType = UITableViewCellAccessoryCheckmark;
            }
        else if(newCell.accessoryType == UITableViewCellAccessoryCheckmark){
                newCell.accessoryType = UITableViewCellAccessoryNone;
                newCell.accessoryView = cellView;
            }
        else if (newCell.accessoryView == cellView) {
            newCell.accessoryView = nil;
            newCell.accessoryType = UITableViewCellAccessoryNone;
          } 
```

我也试过 [newCell.accessoryView reloadInputViews] 但这也不起作用。

基本上，我想在单击单元格 => 无刻度 -> 一个刻度 -> 双刻度（图像） -> 无刻度时循环这些状态

非常感谢任何帮助，谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-27T05:14:28.237

您的代码有两个问题：

*   在`newCell.accessoryView == cellView`您将单元格的附件视图与新创建的图像视图进行比较时：这种比较永远不会产生 TRUE。

*   当您将附件视图设置为图像时，您还将类型设置为`UITableViewCellAccessoryNone`，以便下次`UITableViewCellAccessoryCheckmark`再次设置为。换句话说，第二个`else if`块永远不会被执行。

以下代码可以工作（但我自己没有尝试过）：

```
if (newCell.accessoryView != nil) {
     // image --> none
     newCell.accessoryView = nil;
     newCell.accessoryType = UITableViewCellAccessoryNone;
} else if (newCell.accessoryType == UITableViewCellAccessoryNone) {
     // none --> checkmark
     newCell.accessoryType = UITableViewCellAccessoryCheckmark;
} else if (newCell.accessoryType == UITableViewCellAccessoryCheckmark) {
     // checkmark --> image (the type is ignore as soon as a accessory view is set)
     newCell.accessoryView = cellView;
} 
```

# mysql - MySQL 一张表内连接与 3 个不同的实体表

> ID：11681556
> 
> 赞同：2
> 
> 时间：2012-07-27T04:42:26.790
> 
> 标签：mysql, inner-join

我有 4 个表，**Email_Company_Contact_Ref**表是与电子邮件、公司和联系人链接的表。

```
**Email_Company_Contact_Ref**

id = primary key
email_id = reference to Email.`id`
ref_id = it can be Company.id / Contact.id
table = reference from which table name 
```

![表结构](../Images/cff51cb398dab97abca516a57a9c4a93.png)

我尝试使用左连接来获取我的输出，但我得到了重复的结果。如果我尝试内连接，我根本不会得到任何结果，这是因为 Company 和 Contact 这两个表没有任何共同点。

这是我想要完成的输出。

![输出结果](../Images/9d563266ea41fde8627a2ff036648950.png)

我可以使用 UNION 来获取输出，但它并不是很有效。我认为这应该是一种获得输出结果的方法。请帮忙。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T14:21:32.607

这是我的mysql答案，希望这可以帮助

```
SELECT e.email, r.table, c1.name AS company_name, c2.name AS contact_name
FROM email_company_contact_ref r
JOIN email e ON e.id = r.email_id
LEFT JOIN company c1 ON (c1.id = r.ref_id AND r.table = 'company')
LEFT JOIN contact c2 ON (c2.id = r.ref_id AND r.table = 'contact')
GROUP BY r.table, e.email 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T07:19:57.537

我认为没有 UNION 就无法完成。这是我的建议。

```
SELECT email_address, eccr.table table, company_name, contact_name
FROM Email e, Email_Company_Contact_Ref eccr,
     (SELECT "Company" table, id, company_name, NULL contact_name
      FROM Company
      UNION ALL
      SELECT "Contact" table, id, NULL company_name, contact_name
      FROM Contact) cc
WHERE e.id = eccr.email_id
AND eccr.table = cc.table
AND eccr.email_id = cc.id 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T07:38:37.360

我没有得到`ref_id`零件...它是外键吗？或者那是`Email_Company_Contact_Ref`表的主键？

我认为您希望将表格的参考放在`Email`和`Company`表格`Contact`中。如果您需要为他们发送多个电子邮件，那么您应该创建*两个*连接表：`Company_Email`和`Contact_Email`. 您当前的设计（将表名作为列值的引用）是糟糕的 SQL 设计——仅仅因为像 RoR 这样的东西促进了它，它不会变得更好。

通过适当的设计，该复杂查询的等价物将如下所示：

```
CREATE TABLE Company_Email (company_id integer, email_address varchar(100),
  FOREIGN KEY company_id REFERENCES Company (id));

CREATE TABLE Contact_Email (contact_id integer, email_address varchar(100),
  FOREIGN KEY contact_id REFERENCES Contact (id));

SELECT email_address, 'Company' AS kind, company_name AS name
  FROM Company_Email ce JOIN Company c ON company_id = c.id
 UNION
SELECT email_address, 'Contact', contact_name
  FROM Contact_Email ce JOIN Contact c ON contact_id = c.id; 
```

如果您无法更改它，则必须按照 Barmar 解释的方式执行 UNION。

或者，您可以`SELECT DISTINCT`从左连接查询中删除重复项。

# python - 使用 GAE 部署的 Twitter Bootstrap 网站

> ID：11681557
> 
> 赞同：7
> 
> 时间：2012-07-27T04:42:27.567
> 
> 标签：python, google-app-engine, twitter-bootstrap, blogs

所以我是一个编程菜鸟。我一直在学习 Udacity 的许多课程，并且正在慢慢学习编码。

好吧，这是我的问题。我使用 Twitter Bootstrap 构建了我博客的基本 HTML 文件，因为它使用起来非常简单。现在我想做的是将 Bootstrap 提供的出色模板与 Google App Engine 的简单托管服务结合起来。这就是我的菜鸟进来的地方，我完全迷路了。

任何帮助将不胜感激，不要害怕伤害我的感情，我是菜鸟，如果这完全不可能，我会理解的。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-07-27T04:50:13.307

这是完全可能的。将引导程序下载到一个单独的文件夹并在您的 app.yaml 文件中，让您的处理程序是`static_dir`/bootstrap

```
application: application-name
version: 1
runtime: python
api_version: 1

handlers:
- url: /stylesheets
  static_dir: stylesheets

- url: /bootstrap
  static_dir: bootstrap

- url: /.*
  script: todoapp.py 
```

在您的所有 html 文件中，请像这样引用引导程序。

```
<link href="bootstrap/css/bootstrap.css" rel="stylesheet">
<link href="bootstrap/css/bootstrap-responsive.css" rel="stylesheet">
<script src="bootstrap/js/jquery.js"></script> 
```

你应该很高兴去！

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-07-27T04:52:10.007

看看 gae-boilerplate。它基于 webapp2 和 twitter 引导程序。

*   文档[https://github.com/coto/gae-boilerplate](https://github.com/coto/gae-boilerplate)
*   演示[http://appengine.beecoss.com/](http://appengine.beecoss.com/)

它几乎可以完成您想要的开箱即用功能以及您可能想要的许多其他功能。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-12-05T15:27:52.347

除了上面的答案，还要注意声明的顺序很重要。- url: /.* 部分应该是最后一个，在这种情况下

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-07-19T18:29:35.540

除了上面的添加之外，对于所有子域，您应该编写另一个静态目录。因此，（例如）如果您在 /blog/newpost 有新的博客帖子表单，您应该添加

```
-url: /blog/bootstrap
 static_dir: bootstrap 
```

错过了这一点，我花了很多时间，弄清楚为什么 bootstrap 在子域中不起作用。在 -url:/.* 声明之前继续写这段代码。

# css - div在html中为wordpress居中

> ID：11681563
> 
> 赞同：0
> 
> 时间：2012-07-27T04:42:50.827
> 
> 标签：css, html

```
<div id="logo" style="center"><img src="logo1.png"></img></div><br><br><br><br><br><br><br></div> 
```

这行不通。div的样式有什么问题？我确定语法是错误的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T04:47:55.363

1.  “中心”不是一种风格。您可能正在寻找`text-align: center`.

2.  图像像换行符一样自动关闭。你不使用`</img>`.

3.  `</div>`您在行尾有一个备用关闭。其中一个需要删除，我不确定你想要它在哪个位置。

```
<div id="logo" style="text-align: center"><img src="logo1.png"></div><br><br><br><br><br><br><br> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-27T04:46:41.690

您不能像那样在 div 中定义样式，而是可以在 css 中定义 div 属性并调用 css 的类或 id。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-27T04:48:01.963

尝试这个。您必须如下所示设置 div 的宽度才能使其正常工作。要指定div*内*的文本居中，只需应用 style="text-align: center"

```
<div id="logo" style="margin-left: auto; margin-right: auto; width: 500px; border: 1px solid #ff0000">Your content here....</div> 
```

注意：将 500px 宽度设置为您想要的宽度。此外，删除边框：指令。我刚刚添加了这一点，以便您可以看到 DIV 居中。

[小提琴](http://jsfiddle.net/P26m3/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-27T04:59:13.930

使元素居中的最佳方法可能是指定其宽度并将侧边距设置为自动：

例如，如果你的 logo1.png 是 570px 宽，你会在 css 中做这样的事情

```
#logo{
    margin:0px;
    margin-left:auto;
    margin-right:auto;
    width:570px;
} 
```

# php - 使用 javascript Ajax 而不是 jQuery 将复选框值发送到 PHP 页面

> ID：11681570
> 
> 赞同：0
> 
> 时间：2012-07-27T04:43:55.403
> 
> 标签：php, mysql, html, ajax

我有一种情况，我需要对通过发送到 php 脚本的 ajax 请求选择的每个复选框进行插入查询，该脚本将在 mysql 中进行插入。

我知道如何在没有 ajax 调用的情况下通过简单的表单提交来做到这一点，其中包含像 groups[] 这样的变量作为数组并在 php 中为数组中的每个值运行 foreach 循环。

如何通过 post ajax 请求发送数组？

示例代码：

```
<input type='checkbox' name='groups[]' value='1'>Group A
<input type='checkbox' name='groups[]' value='2'>Group B
<input type='checkbox' name='groups[]' value='3'>Group C 
```

请帮忙，我知道这可能很容易，但我就是不明白。伙计们，请不要给出任何 jquery 或之类的示例，因为我想要纯 html、javascript 和 php 解决方案。

感谢社区...

这是Javascript函数：

```
<script type='text/javascript'>
function addResp(tid){

a = encodeURIComponent(document.getElementById('course_add_resp').value);
b = encodeURIComponent(document.getElementById('term_add_resp').value);
c = encodeURIComponent(document.getElementById('paper_add_resp').value);

var elements = document.getElementsByName('groups[]');  
var data = [];
for (var i = 0; i < elements.length; i++){
if (elements[i].checked){
    data.push('groups[]='+elements[i].value);
   }
}
params = "tid="+tid+"&course="+a+"&sem="+b+"&paper="+c+"&grp="+data;
if (window.XMLHttpRequest)
 {
xmlhttp=new XMLHttpRequest();
 }
else
   {
 xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
   }
 xmlhttp.onreadystatechange=function()
{
if (xmlhttp.readyState==4 && xmlhttp.status==200)
{
document.body.removeChild(document.getElementById('respBackground'));
document.body.removeChild(document.getElementById('respBox'));      
contents = xmlhttp.responseText;    
if(contents == "done"){
window.location = "teachers.php";
} else{
document.getElementById("studentBox").innerHTML = "There was a problem serving the     request.";
 }

    }
  }
 xmlhttp.open("POST","assignresp.php",true);
 xmlhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
 xmlhttp.send(params);

 }

</script> 
```

和 php 脚本：

```
 <?php

  $tid = mysql_real_escape_string($_POST['tid']);
  $cid = mysql_real_escape_string($_POST['course']);
  $sem = mysql_real_escape_string($_POST['sem']);
  $paper = mysql_real_escape_string($_POST['paper']);
  $session = 12;
  $type = 1;

  $groups = $_POST['grp'];

  foreach ($groups as $value ) {
      $q1 = "insert into iars(sessionid,teacherid,courseid,semester,paperid,groupid,type)    values('$session','$tid','$cid','$sem','$paper','$value','$type')";
      $r1 = mysql_query($q1) or die(mysql_error());
      if(mysql_affected_rows() > 0){
          echo "done";
      }
      else{
          echo "fail"; 
      } 
  }

 ?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T06:35:35.313

```
var elements = document.getElementsByName('groups[]');  
var data = [];
for (var i = 0; i < elements.length; i++){
    if (elements[i].checked){
        data.push('groups[]='+elements[i].value);
    }
}
xmlhttp.open("POST",url,true);
xmlhttp.setRequestHeader("Content-type","application/x-www-form-urlencoded");
xmlhttp.send(data.join('&'));
//for get
//xmlhttp.open("GET",url+"?"+data.join('&'),true);
//xmlhttp.send(); 
```

编辑

更改这两行。

```
params = "tid="+tid+"&course="+a+"&sem="+b+"&paper="+c+"&"+data.join('&');

$groups = $_POST['groups']; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T04:53:28.510

你可以用两种方式做到这一点，

1.  您可以使用 post 类型的 ajax 调用

2.  您可以使用 JavaScript 获取所有选中的复选框值，使逗号分隔的字符串并将其传递给一个变量

这就是你所能做的...... :)

# java - 无法在 Android 项目中使用 Eclipse 的剪贴簿

> ID：11681571
> 
> 赞同：8
> 
> 时间：2012-07-27T04:44:02.503
> 
> 标签：java, android, eclipse, adt

当我在一个普通的 Eclipse Java 项目中创建一个 Scrapbook 是可以的，但是当我在一个 Android 项目中创建一个 Scrapbook 并输入一个简单的代码时

```
System.out.println("foo"); 
```

它说“**无法启动剪贴簿虚拟机**”

由于此方法不涉及任何 Android 库，为什么这不起作用？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-20T15:10:30.777

我今天遇到了这个问题，恐怕没有办法将剪贴簿运行到 Android 项目中，因为我在任何地方都找不到解决方案（我已经找了几个小时了）。

我什至尝试更改剪贴簿的运行时 JRE（右键单击剪贴簿文件 -> 属性 -> 剪贴簿运行时 ->“运行时 JRE”），因为默认 JRE 报告“项目 JRE（未定义）”。没有改变。

我写这篇文章是因为我希望为其他人节省时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T10:00:53.833

您不需要在 android 项目中创建新的剪贴簿页面。改为“以剪贴簿类型的方式”使用显示视图。来源：[http ://www.ibm.com/developerworks/library/os-ecbug/](http://www.ibm.com/developerworks/library/os-ecbug/)

# html - Udacity 的程序员是如何产生这些问题的，在图像上带有复选框？

> ID：11681572
> 
> 赞同：0
> 
> 时间：2012-07-27T04:44:26.227
> 
> 标签：html

在[这里](http://www.udacity.com/view#Course/st101/CourseRev/1/Unit/6001/Nugget/119001)和[这里](http://www.udacity.com/view#Course/cs253/CourseRev/apr2012/Unit/20006/Nugget/73002)，有一些 Udacity 中使用的测验问题的例子。

我怎样才能达到这样的效果？（即：如何构建一个有图像的页面，然后在该图像上添加一些表单元素？）

也许我可以使用一张以图像为背景的表格。那行得通吗？跨浏览器是否可靠？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T05:05:25.503

有不同的可能性。

您可以将元素放置在“绝对”或“相对”位置，以便将元素完全覆盖在图像上。

您还可以使用 CSS3/HTML5 画布进行绘制。

我认为用图像做一个简单表格的最好方法应该是遵循本[教程](http://www.jankoatwarpspeed.com/post/2008/09/15/Turn-postcard-photo-into-a-stunning-comment-form-using-CSS.aspx)

如果您设法创建它，那么您可以调整 CSS 代码以便能够将卡片放置在您想要的位置

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T05:05:58.953

他们只是有一个图像，然后将表单元素绝对定位在它上面。

```
input {
  position: absolute;
  top: 100px;
  left: 100px;
  z-index: 1;
} 
```

只需要更改顶部和左侧，直到输入元素位于您想要的位置。输入元素可以位于图像的正上方。

# javascript - javascript中的Object.create方法

> ID：11681579
> 
> 赞同：6
> 
> 时间：2012-07-27T04:45:02.127
> 
> 标签：javascript, mozilla, object-create

作为 javascript 的初学者，我试图从这里理解 Object.create() 方法

[https://developer-new.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/create](https://developer-new.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/create)

在示例代码中，第 18 行。创建了一个访问器属性，并将 writable 设置为 true。我还读到可写仅适用于数据描述符。

试过跑步，

```
var o = Object.create(Object.prototype, {
  // foo is a regular "value property"
  foo: { 
    writable:true, configurable:true, value: "hello" 
  },
  // bar is a getter-and-setter (accessor) property
  bar: {
    writable: true,
    configurable: false,
    get: function() { return 10 },
    set: function(value) { console.log("Setting `o.bar` to", value) }
  }
  });
console.log(o); 
```

我明白了`invalid property error`。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-27T04:50:16.487

问题是`writable`和`set`/`get`是互斥的。该代码在 Chrome 中生成了这个有用的错误：

```
Invalid property. A property cannot both have accessors and be writable... 
```

这具有一定的逻辑意义：如果您在某个属性上有`set`/`get`访问器，则该属性将永远不会被写入和/或读取，因为任何读取/写入它的尝试都将被访问器函数拦截。如果您将属性定义为`writable` *并*为其提供访问器函数，那么您同时在说：

1.  “可以直接更改此属性的值”，并且
2.  “阻止所有读取和/或写入此属性的尝试；相反，请使用这些函数。”

该错误只是阻止您指定矛盾。我假设您编写了一个 getter 和 setter，您并不真正希望该属性为`writable`. 只需删除该行，您的代码就会完美运行。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-07-27T05:40:34.253

迟到的答案，不是在寻找选票，但希望这会有所帮助。

有两种性质。每个属性都是：

1.  具有以下四个属性的**数据属性：**

    *   价值
    *   可写
    *   可枚举的
    *   可配置
2.  或具有以下四个属性的**访问器属性：**

    *   得到
    *   放
    *   可枚举的
    *   可配置

因此，没有属性可以同时具有`get`和`writable`。这就是 JavaScript 的方式！有关详细信息，请参阅[ECMAScript 标准](http://www.ecma-international.org/ecma-262/5.1/Ecma-262.pdf)的第 8.6 节。

# sql-server - 不能仅在连接到服务器的查询窗口中使用模数

> ID：11681582
> 
> 赞同：1
> 
> 时间：2012-07-27T04:45:21.690
> 
> 标签：sql-server, modulus

目前我在使用 SQL Server 时遇到问题。

我只是做这样的查询：

```
declare @var2 int
set @var2 = ((7500.50 * 100) % 100)

select @var2 
```

如果我在本地机器上执行（查询窗口连接到本地），它返回 50。

但是，如果我在连接到我的办公室服务器的查询窗口中运行该查询，则会导致：

> 消息 8117，级别 16，状态 1，行 2
> 操作数数据类型数字对于模运算符无效。
> 消息 206，级别 16，状态 2，第 2 行
> 操作数类型冲突：int 与 void 类型不兼容

我在 SQL Server 2005 和 2008 中都试过了。

有人遇到过同样的问题或知道解决方案吗？

非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T05:05:06.977

检查服务器的[兼容性级别](http://blog.sqlauthority.com/2007/05/29/sql-server-2005-change-database-compatible-level-backward-compatibility/)。它可能为 80，这是为了与 SQL Server 2000 兼容。在 SQL Server 2000 中，模仅支持 INT 数据类型。在[SQL 2005 及更高](http://msdn.microsoft.com/en-us/library/ms187745.aspx)版本中，允许使用其他数字数据类型，并且会发生隐式转换，因为在您的公式中，您同时具有数字和整数数据类型。

我找到了一个[脚本](http://blogs.msdn.com/b/ai/archive/2012/06/12/sql-server-set-comparability-level-for-all-server-databases.aspx)来修改服务器的所有数据库的兼容性级别，并过滤您不想更改的数据库。

# php - 如何用数据库中的内容替换值？

> ID：11681587
> 
> 赞同：0
> 
> 时间：2012-07-27T04:45:49.550
> 
> 标签：php, codeigniter

我的数据库表上有这个

id_a | 名 | 电子邮件 |

1 | 菲利普| philipe@mail.com |

2 | 朵拉 | dora@mail.com |

3 | 约翰 | john@mail.com |

我认为这段代码

```
<tr>
<td><label for="cities">Select attendances</label></td>
<td> : </td>
<td>    <select class="multiselect" multiple="multiple" name="id_c[]" title="click to select Attendances">
    <?php foreach ($test as $data): ?>
    <option value="<?php echo $data->id_a ?>" ><?php echo $data->nama ?></option>
    <?php endforeach; ?>
    </select></td></tr> 
```

在我的代码中，我的数据库中有选项值 = 1 2 3

我想做的是发送电子邮件，其中包含我数据库中的电子邮件地址

```
$id_c = $this->input->post('id_c');
        foreach($id_c as $id_a)
        {
        $query="SELECT email From mstr_attend WHERE id_a = ".$id_a.""; } 
```

这是我从这段代码中得到的问题
是philipe@mail.comdora@mail.comjohn@mail.com

我需要的是philipe@mail.com、dora@mail.com、john@mail.com

一封电子邮件后的逗号有人可以给我一些解决方案，这样我就可以得到

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T04:59:58.267

假设你想要一个字符串，你可以循环进入一个数组然后内爆。

```
$emails = array();
foreach( $ids as $i )
{
  //do query here, then store in the emails array
  $emails[] = $query_output_email;
}

$comma_separated = implode( ', ', $emails ); //should output as email@dot.com, email@dot.com 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T05:12:54.473

您可以使用以下代码获得所述结果：

```
$id_c = $this->input->post('id_c');
$all_id_c = implode(',', $id_c);
$this->db->select('group_concat(email) as emails');
$this->db->where('id_a IN ('.$all_id_c.')');
$query = $this->db->get('mstr_attend');    
$result = $query->row_array();
echo $result['emails']; // here is your result. 
```

[此链接](http://codeigniter.com/user_guide/database/results.html)肯定会帮助您生成查询结果。

# c# - 我如何将 Moq 用于 FindWhere 方法？

> ID：11681588
> 
> 赞同：0
> 
> 时间：2012-07-27T04:46:06.743
> 
> 标签：c#, moq

我将 Moq 与 MVC3 项目和 EF（代码优先）一起使用。我目前有一个像这样的模拟设置

```
 (In Repository)
    IQueryable<T> FindAll();
    IQueryable<T> FindWhere(Expression<Func<T, bool>> predicate);

    (In Mock tests)

    _providerRepository.Setup(mr => mr.FindById(
    It.IsAny<int>())).Returns((int i) => _providerData.Where(
    x => x.Id == i).Single()); 
```

效果很好，我的问题是 FindWhere(.. 的示例 Mock 是什么样的？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T07:09:02.460

您的代码示例不完整，但我假设它`_providerRepository`的类型为`IRepository<Provider>`. 我认为这应该有效（基本上与您的其他示例相同）：

```
_providerRepository
   .Setup(mr => mr.FindWhere(It.IsAny<Expression<Func<Provider,bool>>>()))
   .Returns(expression => _providerData.AsQueryable().Where(expression)) 
```

您可能需要也可能不需要`AsQueryable`.

# machine-learning - 为什么我们要对 SVM 特征向量进行余弦归一化？

> ID：11681591
> 
> 赞同：3
> 
> 时间：2012-07-27T04:46:15.823
> 
> 标签：machine-learning, nlp, classification, svm

我最近在玩二进制情感分析中使用的著名电影评论数据集。它由 1,000 条正面评论和 1,000 条负面评论组成。在探索具有 unigram 特征的各种特征编码时，我注意到所有以前的研究出版物都通过它们的欧几里德范数对向量进行归一化，以便将它们缩放到单位长度。

然而，在我使用 Liblinear 的实验中，我发现这种长度归一化会显着降低分类精度。我研究了向量，我认为这就是原因：向量空间的维度是，比如说，10,000。因此，与单个投影相比，向量的欧几里得范数非常高。因此，在归一化之后，所有的向量在每个轴上都得到非常小的数字（即在一个轴上的投影）。

这让我感到惊讶，因为该领域的所有出版物都声称它们执行余弦归一化，而我发现不归一化会产生更好的分类。

因此我的问题是：如果我们不对 SVM 特征向量执行余弦归一化，是否有任何特定的缺点？（基本上，我正在为这种标准化需求寻求数学解释）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T10:18:43.190

在阅读了 LibSVM 的手册之后，我意识到为什么与*不*进行归一化相比，归一化产生的准确度要低得多。他们建议将数据缩放到 [0,1] 或 [-1,1] 区间。这是我没有做过的事情。扩大规模将解决太多数据点非常接近于零的问题，同时保留长度标准化的优势。

# asp.net - 使用 ASP.NET 的可插拔网站功能

> ID：11681593
> 
> 赞同：1
> 
> 时间：2012-07-27T04:46:32.033
> 
> 标签：asp.net, pluggable

我可以看到已经问过类似的问题，并且这里给出了答案：

[如何创建可插入的 ASP.Net 网站？](https://stackoverflow.com/questions/740768/how-to-create-pluggable-asp-net-website)

但是，我想知道是否有人可以更详细一点。

我有一个网站，我想让开发人员为其创建插件。我想要的功能的一个典型示例是像 Umbraco 或 Orchard 这样的开发人员可以创建控件，然后将其导入系统以供使用。

理想情况下，有人可以创建某种类型的用户控件，并且网站可以使用该用户控件。

有没有例子说明这已经完成了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T04:58:34.767

我认为您应该首先确定要在应用程序中支持可扩展性的位置（安全性、UI、业务逻辑等），然后在核心逻辑和插件（这是您的一个或多个接口）之间定义一个适配器，然后构建实现你的接口的类型。请参阅MSDN 上的[提供者模型](http://msdn.microsoft.com/en-us/library/ms972319.aspx)。

# php - 在 Joomla 中调用字体时图像不显示

> ID：11681596
> 
> 赞同：0
> 
> 时间：2012-07-27T04:46:45.013
> 
> 标签：php, joomla, joomla2.5, joomla1.6, imagettftext

我是 Joomla 开发和 php 的新手，所以如果我在做一些愚蠢的事情，请告诉我！

我正在创建要在用户完成带有姓名、日期等的测验后打印的证书。我已经显示了要显示的图像和文本，但是当我添加字体时，什么都没有显示。

这是我正在使用和工作的基本脚本（背景图像和字体工作）：

```
$image_file = 'images/certificate_page.png';
$my_img = imagecreatefrompng ($image_file);
$font_size_big = 24;
$text_colour = imagecolorallocate( $my_img, 0, 0, 0 );
$font_file = 'FelipaRegular.ttf';  

imagefttext( $my_img, $font_size_big, 0, 5, 75, $text_colour, $font_file, "test with font"); 
imagestring( $my_img, 4, 30, 25, "test without font", $text_color );

header( "Content-type: image/png" );
imagepng( $my_img );

imagecolordeallocate( $text_color );
imagedestroy( $my_img ); 
```

当我试图在 Joomla 中应用它时，问题就开始了。我在这样的模板中调用它：

```
<img src="<?php echo JURI::root().'index.php?tmpl=certgenerator&quizmod='.$quizmod.'' ?>" /> 
```

和文件生成器（certgenerator.php）：

```
defined('_JEXEC') or die;
require_once("includes/variables_certificate.php");

$image_file = JURI::root().'templates/'.$this->template.'/images/certificate_page.png'; 
$my_img = imagecreatefrompng ($image_file);
$font_size_big = 24;
$text_color = imagecolorallocate( $my_img, 0, 255, 0 );
$font_file = 'FelipaRegular.ttf';  

imagefttext( $my_img, $font_size_big, 0, 55, 75, $text_color, $font_file, "why u no work"); //if commented out image displays but not font obviously, as it's written now it returns a blank page
imagestring( $my_img, 4, 30, 25, "works", $text_color ); //works but doesn't include font

header( "Content-type: image/png" );
imagepng( $my_img );

imagecolordeallocate( $text_color );
imagedestroy( $my_img ); 
```

参考：

```
http://php.net/manual/en/function.imagettftext.php 
```

我已经尝试过 imagettftext 与 imagefttext，没有扩展名，有扩展名，上面链接中的一堆东西，结果都是一样的。有任何想法吗？我在猜测（并希望！）一些愚蠢的事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T13:56:41.483

在您的 PHP 中处理文件时，您应该使用 JPATH_ 而不是 JURI。JURI 用于生成 http URI。

```
$image_file = JURI::root().'templates/'.$this->template.'/images/certificate_page.png'; 
```

应该

```
$image_file = JPATH_SITE.'/templates/'.$this->template.'/images/certificate_page.png'; 
```

不确定这是否是问题所在，并且您的代码可能会正常工作，因为我偷偷怀疑 imagecreatefrompng() 接受 http。但实际上这是错误的方法，因为它是一个本地文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T13:07:21.087

路径是我存在的祸根！

```
$font_file = JPATH_SITE.'/templates/'.$this->template.'/images/font/FelipaRegular.ttf'; 
```

# url - 如果我在 url 中公开实体键，有什么优点/缺点？

> ID：11681604
> 
> 赞同：0
> 
> 时间：2012-07-27T04:47:35.567
> 
> 标签：url, symfony, routing, seo

我知道使用 symfony2 通过路由系统获取漂亮的 url 非常简单，我喜欢它。但是当路由参数仅基于 slug 时，我必须通过 slug 找到。

```
$em->getRepository('Bundle:Entity')->findOneBySlug($slug); 
```

我正在考虑结合两个参数，例如**stackoverflow** [http://mysite.com/articles/234/the-title](http://mysite.com/articles/234/the-title)。只为 SEO 保留 slug 参数建议并直接使用实体 id (234) 查找。

```
$em->getRepository('Bundle:Entity')->find($id); 
```

使用此策略的优点/缺点是什么。我是对的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T07:47:32.830

我会按照您的建议使用唯一标识符和 slug，因为您不必担心这种方式的唯一 slug。

但是你应该做的一件事是检查蛞蝓是否有效。所以不要使用这样的 URL：**/articles/{id}/{unchecked-slug}**，因为如果你这样做，你可以使用无限数量的不同/邪恶 URL 访问同一篇文章，即 /articles/123/the-正确的标题和 /artcle/123/some-dirty-words。

所以我建议使用这样的东西：

```
$em->getRepository('Bundle:Entity')->findOneBy(array('slug' => $slug, 'id' => $id); 
```

我不是 SEO 专家，但我不认为较短的 URL 有那么重要，只要它包含有用的词，这可能是搜索的一部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T05:52:25.860

从纯粹的 SEO 角度来看，您希望 URL 更短，因为它们往往会吸引更多点击并且更容易分享。但是，恕我直言，只迎合 SEO 将是一个错误。

向字符串添加唯一标识符将是一件聪明的事情，并且会使事情更容易查找和维护。我建议将唯一标识符放在 URL 字符串的末尾以最大化“SEO 效果”。

URL 中的关键字可能是排名信号，但如果 URL 中找到的关键字与用户的查询匹配，它们确实会提高 CTR。发生这种情况时，URL 中的关键字在搜索结果页面 (SERP) 中变为粗体。通过将 ID 放在 URL 的末尾，您可以帮助确保 slug 中的关键字有更好的机会出现在用户面前，这意味着更有可能被加粗，这有望带来更多的点击率。

这是我的建议：

[http://example.com/articles/the-title-234](http://example.com/articles/the-title-234)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T13:45:29.393

到目前为止还没有人建议它，所以我将提供 WordPress 的功能。如果数据库中已经有一个与提供的相同的永久链接，您只需在最后连接一个计数器。

```
http://example.com/blog/my-article

becomes

http://example.com/blog/my-article-2

becomes

http://example.com/blog/my-article-3 
```

eywu 建议的方法是第二好的，但这只是因为您在永久链接中仍然有完整的 ID。没有人想记住这一点，它对搜索引擎没有任何意义。

# matlab - 从命令行在 MATLAB 中设置图形视图

> ID：11681610
> 
> 赞同：1
> 
> 时间：2012-07-27T04:48:21.020
> 
> 标签：matlab, visualization

如何从命令行在 MATLAB 中将图形旋转到 XY、XZ 或 YZ？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-27T06:14:30.610

您可以使用该功能[`view`](http://www.mathworks.de/help/techdoc/ref/view.html)

```
view([0 90]) % X-Y
view([0 0]); % X-Z
view([90 0]) % Y-Z 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T08:08:05.677

观察者（视点）的位置决定了轴的方向。您可以根据方位角和仰角或通过三维空间中的一个点来指定视点。

```
view(2) sets the default two-dimensional view, az = 0, el = 90.
view(3) sets the default three-dimensional view, az = –37.5, el = 30. 
```

例如，如果您想查看 xz 平面

沿y轴设置视图，图中x轴水平延伸，z轴垂直延伸。

```
view([0 0]); 
```

同样对于 xy: view([0 90) 和 yz: view([90 0])

详细信息： http: [//www.mathworks.in/help/techdoc/ref/view.html](http://www.mathworks.in/help/techdoc/ref/view.html)

# jquery - 使用 if/else 语句在文本框中写入时禁用 jquery 功能

> ID：11681612
> 
> 赞同：0
> 
> 时间：2012-07-27T04:48:29.537
> 
> 标签：jquery, if-statement, conditional

哟！

我在我的网站上实现了以下功能，它允许用户向上/向下按以流畅地滚动页面的不同部分：

```
// CONTROL TOP NAVBAR WITH UP/DOWN ON KEYBOARD
        $(document).keydown(function(e) {
          var p = $("li.active");
          if (e.keyCode === 38) {
          e.preventDefault();
          p.prev().find("a").click();
          } else if (e.keyCode === 40) {
          e.preventDefault();
          p.next().find('a').click();
          }
        }); 
```

这工作正常。但是，我在页面上也有一个联系表。当用户在联系表单中输入时，我希望他们能够在文本框中使用键盘向上/向下移动以正确导航。但是，它目前仍控制导航栏。

我的联系表格的 ID 为#contactform。代码在这里：

```
<form name="contactform" id="contactform" method="post" action="/contact/" _lpchecked="1">
    <ul class="form-block">

      <!-- HONEYPOT -->
      <li class="on-no-robots" style="height:0px; text-indent:-9999px; font-size:0px; overflow:hidden;">
        <label>Humans Don't Submit This!! If you can see this, you don't have CSS, and you scare me. This is just here to filter out automated comments!</label>
        <input name="robotest" id="robotest" type="text" />
      </li>
      <!-- HONEYPOT -->

      <li class="third">
        <label for="name">Name</label>
        <input type="text" name="name" id="name" value="" class="required" />
      </li>
      <li class="third">
        <label for="email">Email Address</label>
        <input type="email" name="email" id="email" value="" class="required email" />
      </li>
      <li class="third">
        <label for="phone">Phone Number</label>
        <input type="text" name="phone" id="phone" value="" />
      </li>
    </ul>
    <h3>How can we help you?</h3>
    <ul class="form-block">
      <li class="full">
        <textarea name="comments" id="comments" class="required"></textarea>
      </li>
      <li>
        <input id="submitButton" type="submit" value="Talk to us" />
      </li>
    </ul>
</form> 
```

是否可以做一个条件语句说“如果#contactform#name, #contactform#email, #contactform#comments 是焦点，禁用这个功能”？

我在 jquery 方面相当糟糕，但这是我的尝试：

```
 $(document).keydown(function(e) {
            if ($("#contactform input", "#contactform textarea").is(":focus")){
                return;
            }

            else{
              var p = $("li.active");
              if (e.keyCode === 38) {
              e.preventDefault();
              p.prev().find("a").click();
              } else if (e.keyCode === 40) {
              e.preventDefault();
              p.next().find('a').click();
              }
            }       
        }); 
```

目前，向上/向下箭头功能可以正常工作，尽管条件语句是错误的。我在这里错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T05:06:21.760

这是一个 JavaScript 例程（在[此站点](http://www.mynextmove.org/explore/ip "O*NET 兴趣分析器")上使用），用于检测用户是否在文本字段中：

```
function inTextField(event)
{
  var elem = event.target || event.srcElement;
  if (elem.nodeType == 3)
    elem = elem.parentNode;

  return (elem.tagName == "TEXTAREA" ||
          (elem.tagName == "INPUT" && (elem.getAttribute("type") == "text")));
} 
```

它可以通过使用 jQuery 语法来改进，但即使是原样也应该足以让你的条件工作：

```
if (inTextField(e)){
    return;
}
... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T07:33:57.097

在这里，我已经完成了上述问题的完整解决方案，您可以在此处查看演示链接。

**演示：** [http ://codebins.com/bin/4ldqp9f](http://codebins.com/bin/4ldqp9f)

注意：如果您检查代码箱上的输出，一旦加载页面，然后首先单击输出区域上的任意位置，以便脚本将检测文档键按下事件。

**HTML**：

```
<ul class="menu">
  <li class="active">
    <a href="#">
      Menu1
    </a>
  </li>
  <li>
    <a href="#">
      Menu1
    </a>
  </li>
  <li>
    <a href="#">
      Menu2
    </a>
  </li>
  <li>
    <a href="#">
      Menu3
    </a>
  </li>
  <li>
    <a href="#">
      Menu4
    </a>
  </li>
</ul>
<form name="contactform" id="contactform" method="post" action="#" _lpchecked="1">
  <ul class="form-block">
    <!-- HONEYPOT -->
    <li class="on-no-robots" style="height:0px; text-indent:-9999px; font-size:0px; overflow:hidden;">
      <label>
        Humans Don't Submit This!! If you can see this, you don't have CSS, and you scare me. This is just here to filter out automated comments!
      </label>
      <input name="robotest" id="robotest" type="text"/>
    </li>
    <!-- HONEYPOT -->
    <li class="third">
      <label for="name">
        Name
      </label>
      <input type="text" name="name" id="name" value="" class="required" />
    </li>
    <li class="third">
      <label for="email">
        Email Address
      </label>
      <input type="text" name="email" id="email" value="" class="required email" />
    </li>
    <li class="third">
      <label for="phone">
        Phone Number
      </label>
      <input type="text" name="phone" id="phone" value="" />
    </li>
  </ul>
  <h3>
    How can we help you?
  </h3>
  <ul class="form-block">
    <li class="full">
      <textarea name="comments" id="comments" class="required">
      </textarea>
    </li>
    <li>
      <input id="submitButton" type="submit" value="Talk to us" />
    </li>
  </ul>
</form> 
```

**CSS：**

```
.menu{
  list-style:none;
  padding:1px;
  display:inline-block;
  vertical-align:top;
}
.menu li{
  background:#112288;
  padding:5px;
}
.menu li:hover,.menu li.active{
  background:#1144cd;
}
.menu li a{
  color:#eee;
  text-decoration:none;
}
.menu li a:hover{
  text-decoration:underline;
}
#contactform{
  border:1px solid #223388;
  width:50%;
  background:#5888a9;
  margin-left:5px;
  display:inline-block;
}
#contactform ul{
  padding:5px;
}
#contactform h3{
  margin-left:10px;
}
#contactform li{
  list-style:none;
  margin-left:10px;
}

#contactform input[type=text],#contactform textarea{
  border:1px solid #223388;
}
#contactform input[type=text]:focus,#contactform textarea:focus{
  background:#d4c8fb;
} 
```

**查询：**

```
$(function() {
    $(".menu li.active").click();
    $(document).keydown(function(e) {
        if (typeof(e.target.name) != "undefined" && e.target.name != "" &&   $(e.target).parents("#contactform").length > 0) {
            return false;
        } else {
            var p = $(".menu li.active");
            if (e.keyCode === 38) {
                e.preventDefault();
                p.prev().find("a").click();
            } else if (e.keyCode === 40) {
                e.preventDefault();
                p.next().find('a').click();
            }
        }
    });

    $(".menu li").click(function() {
        $(".menu li").removeClass("active");
        $(this).addClass("active");
    });
}); 
```

**演示：** [http ://codebins.com/bin/4ldqp9f](http://codebins.com/bin/4ldqp9f)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T04:53:10.367

下面的呢？

```
if($("#contactform input").is(':focus') || $("#contactform textarea").is(':focus')) {
    e.preventDefault();
    return false;
} 
```

[**演示**](http://jsfiddle.net/F9AY3/)

# java - 持久化数据的 DBUnit 问题

> ID：11681618
> 
> 赞同：2
> 
> 时间：2012-07-27T04:49:26.860
> 
> 标签：java, spring, unit-testing, junit4, dbunit

我有一个`baseDAO`包含基本`CRUD`操作的方法。并且对于每一个操作我们都在做`getJpaTemplate.xxx()`操作。该代码在*生产*中运行良好，但现在我们必须`UTs`为`DAO`layer 编写并且我们正在使用`DBUnit`.

我看到了示例并编写了`DBUnit`类，我观察到*读取*操作工作正常，但*删除、更新*和*创建*操作根本不起作用。
当我们尝试调用`DAO.save(object)`它时不会抛出任何异常，它会进入下一行，但是当我尝试打开表并查看值时，**新行没有插入**，*事务失败也没有抛出任何异常*。

*我怀疑连接*可能有问题。作为参考，我附上了`getConnection()`方法。

```
protected IDatabaseConnection getConnection() throws Exception { 

 Connection con = dataSource.getConnection(); 
 DatabaseConnection connection = new DatabaseConnection(con); 
 DatabaseConfig config = connection.getConfig(); 
 config.setProperty(DatabaseConfig.PROPERTY_DATATYPE_FACTORY,new oracleDataTypeFactory()); 
 return connection; 
} 
```

我们有另一个方法被调用`setup ()`来从文件中填充数据`XML`，它工作正常。仅供参考，我在这里添加代码。

```
protected void insertData (String xmlDataFilePath) { 
    IDatabaseConnection dbConnection= getConnection(); 
    TransactionOperation.CLEAN_INSERT.execute(dbConnection,getDataSet(xmlDataFilePath));
    connection = jPATransactionManager.getDataSource().getConnection(); 
    connection.setAutoCommit(false); 
    savepoint = connection.setSavepoint("Data inserted in db"); 
    dbConnection.close();
} 
```

*如果没有看到插入 db 中*的新行，我不确定如何进一步进行。
因为我试着做

```
 getJpaTemplate().save(object);
 getJpaTemplate().load(ClassName.class, object's id); 
```

它返回我`null`并且在 db 表中也没有*条目*。

请问有什么建议吗？
提前致谢。
乙脑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T05:23:06.113

> savepoint = connection.setSavepoint("数据插入数据库");

确保保存点何时提交？你能把所有相关的API代码放在这里吗？

# javascript - 如何在使用 Flash 音乐播放器在母版页中开始自动播放音乐之前添加延迟

> ID：11681620
> 
> 赞同：0
> 
> 时间：2012-07-27T04:49:45.803
> 
> 标签：javascript, actionscript-3, flash

当我访问我正在使用自动播放的网站中的每个页面时，我想添加几秒钟的延迟。是否有任何参数可以与 flashvars 一起使用，以便我可以在音乐开始之前添加几秒钟的延迟，因为`enter code here`每次访问新页面时默认音乐都会开始 1 或 2 秒。

<<>>`

```
<object type="application/x-shockwave-flash" wmode="transparent" data="player_mp3_maxi.swf" width="65" height="20">
<param name="movie" value="player_mp3_maxi.swf" />
<param name="bgcolor" value="#ffffff" />
<param name="wmode" value="transparent" />
<param name="FlashVars" value="mp3=dummy.mp3&amp;width=65&amp;loop=0&amp;autoplay=1&  amp;volume=60&amp;showvolume=1&amp;showslider=0&amp;showloading=always&amp;buttonwidth=30&amp;volumeheight=8&amp;" />
</object> 
```

<<>>

```
<script type="text/javascript">
$(document).ready(function () {
var mp3snd = "/JSRDS/Content/mp3s/PPK_Resurection.mp3";
if ((window.top.location.toString().toLowerCase().lastIndexOf("root/") + 6) ==         window.top.location.toString().toLowerCase().length) {mp3snd = "PPK_Resurection.mp3";
}
else if (window.top.location.toString().toLowerCase().indexOf('page1.aspx') != -1) {
 mp3snd = "PPK_Resurection.mp3";
}
else if (window.top.location.toString().toLowerCase().indexOf('page2.aspx') != -1) {
mp3snd = "GottaWearShades_Intellect.mp3";
}
else if (window.top.location.toString().toLowerCase().indexOf('page3.aspx') != -1) {
mp3snd = "MissionImpossible_Rhodium.mp3";
}
        else if (window.top.location.toString().toLowerCase().indexOf('page4.aspx') != -1) {
            mp3snd = "Opportunities_Projects.mp3";
        }
        else if (window.top.location.toString().toLowerCase().indexOf('page5.aspx') != -1) {
            mp3snd = "";
        }
        else if (window.top.location.toString().toLowerCase().indexOf('page6.aspx') != -1) {
            mp3snd = "HawaiiFiveO_Media.mp3";
        }
        else if (window.top.location.toString().toLowerCase().indexOf('page7.aspx') != -1) {
            mp3snd = "SayYouSayMe_Photos.mp3";
        }
        else if (window.top.location.toString().toLowerCase().indexOf('page8.aspx') != -1) {
            mp3snd = "TheLionSleepsTonight_Shihara.mp3";
        }
        else if (window.top.location.toString().toLowerCase().indexOf('page9.aspx') != -1) {
            mp3snd = "ItsMyLife192vbr_History.mp3";
        }
        else if (window.top.location.toString().toLowerCase().indexOf('page10.aspx') != -1) {
            mp3snd = "";
        }
        else if (window.top.location.toString().toLowerCase().indexOf('page11.aspx') != -1) {
            mp3snd = "";
        }
        else if (window.top.location.toString().toLowerCase().indexOf('page12.aspx') != -1) {
            mp3snd = "";
        }

        $(".volumeControl").html($(".volumeControl").html().replace("dummy.mp3", mp3snd));
    });
</script> 
```

`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T05:07:36.743

如果您可以控制 swf（即有 fla），那么只需使用[setTimeout](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/utils/package.html#setTimeout%28%29)。

然后可以通过在 flashvars 中传递参数来控制逻辑。

```
stop();

setTimeout( playMovie, 1000 )

function playMovie() {

     play();
} 
```

在 JS 中，您可以使用[swfobject](http://code.google.com/p/swfobject/)和[setTimeout](http://www.w3schools.com/js/js_timing.asp)延迟将文件注入页面。

```
setTimeout (injectSWF , 1000);

function injectSWF() { 

     swfobject.embedSWF("myMovie.swf", "ofc", "100%", "100%", "9.0.0"); 
} 
```

# nsmutabledictionary - NSMutableDictionary setObject:forKey: 添加键失败

> ID：11681621
> 
> 赞同：2
> 
> 时间：2012-07-27T04:49:47.043
> 
> 标签：nsmutabledictionary

我确定我在尝试编写的一个小型 iPhone 程序中遗漏了一些东西，但是代码很简单，它编译时没有任何错误，所以我看不到错误在哪里。

我设置了一个 NSMutableDictionary 来存储学生的属性，每个属性都有一个唯一的键。在头文件中，我声明了 NSMutableDictonary studentStore：

```
@interface School : NSObject
{
    @private
    NSMutableDictionary* studentStore;
}   

@property (nonatomic, retain) NSMutableDictionary *studentStore; 
```

当然在实现文件中：

```
@implementation School
@synthesize studentStore; 
```

我想在字典中添加一个对象：

```
- (BOOL)addStudent:(Student *)newStudent
{
    NSLog(@"adding new student");
    [studentStore setObject:newStudent forKey:newStudent.adminNo];
    return YES;
} 
```

学生类具有以下属性：@interface Student : NSObject { @private NSString* name; //属性 NSString* 性别；年龄; NSString* 管理员否；}

其中 newStudent 具有以下值： Student *newStudent = [[Student alloc] initWithName:@"jane" gender:@"female" age:16 adminNo:@"123"];

但是当我查字典时：

```
- (void)printStudents
{
    Student *student;
    for (NSString* key in studentStore)
    {
        student = [studentStore objectForKey:key];
        NSLog(@"     Admin No: %@", student.adminNo);
        NSLog(@"    Name: %@", student.name);
        NSLog(@"Gender: %@", student.gender);
    }
NSLog(@"printStudents failed");
} 
```

它无法打印表中的值。相反，它会打印“printStudents failed”行。

我想这是非常基本的，但由于我是 iOS 编程的新手，所以我有点难过。任何帮助将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-27T04:52:10.480

您的实例`studentStore`变量是*指向*`NSMutableDictionary`. 默认情况下，它指向 nil，这意味着它不指向任何对象。您需要将其设置为指向`NSMutableDictionary`.

```
- (BOOL)addStudent:(Student *)newStudent
{
    NSLog(@"adding new student");
    if (studentStore == nil) {
        studentStore = [[NSMutableDictionary alloc] init];
    }
    [studentStore setObject:newStudent forKey:newStudent.adminNo];
    return YES;
} 
```

# android - 如何获取用户安装的所有应用程序？

> ID：11681625
> 
> 赞同：0
> 
> 时间：2012-07-27T04:50:14.213
> 
> 标签：android

如何获取用户安装的所有应用程序？

我想开发一个可以显示用户安装的所有应用程序的应用程序，但是

我不明白如何得到它们。

使用`getExternalStorageDirectory()`？

还是有其他方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T06:02:14.737

您可以参考这篇[文章](https://stackoverflow.com/questions/2695746/how-to-get-a-list-of-installed-android-applications-and-pick-one-to-run)，它做了类似的事情...您可能需要对其进行一些修改，因为它会过滤掉系统应用程序的...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T05:44:54.397

您可以获得有关已安装 pkg 的所有信息：

```
ArrayList<PackageInfo> res = new ArrayList<PackageInfo>();
PackageManager pm = ctx.getPackageManager();
List<PackageInfo> packs = pm.getInstalledPackages(0);

for(int i=0;i<packs.size();i++) {
    PackageInfo p = packs.get(i);
    String description = (String) p.applicationInfo.loadDescription(pm);
    String  label= p.applicationInfo.loadLabel(pm).toString();
    String packageName = p.packageName;
    String versionName = p.versionName;
    String versionCode = p.versionCode;
    String icon = p.applicationInfo.loadIcon(pm);
//Continue to extract other info about the app...
} 
```

**注意：**将此权限添加到清单文件：

```
<uses-permission android:name="android.permission.GET_TASKS" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T05:13:28.113

**尝试这个：**

```
 final Intent intent= new Intent(Intent.ACTION_MAIN, null);
 intent.addCategory(Intent.CATEGORY_LAUNCHER);
 final List mylist= context.getPackageManager().queryIntentActivities(intent, 0); 
```

# jquery - IE9 无法识别自动完成功能

> ID：11681626
> 
> 赞同：1
> 
> 时间：2012-07-27T04:50:16.150
> 
> 标签：jquery, python, jquery-ui, internet-explorer-9, jquery-ui-autocomplete

我的问题是以下代码在 Firefox 和 chrome 中运行良好，但在 IE9 中不起作用。它说位置未定义或为空。

我的自动完成代码如下：

```
$( "#id_location" ).autocomplete({
source: function( request, response ) {

$.ajax({
                url: "{% url 'food.views.search_location' %}",
                dataType: "json",
                data:{  
                    maxRows: 5,
                    starts_with: request.term,
                },
                success: function( data ) {
                    response( $.map( data.location, function( item ) {
                        return {
                            label: item.label,
                            value: item.value
                        }
                    }));
                }
            });
        },
        minLength: 1,       

        focus: function(event,ui){
    //prevent value insert on focus
    $("#id_location").val(ui.item.label);
      return false; //Prevent widget from inserting value
      },

    select: function(event, ui) {
        $('#id_location').val(ui.item.label);
        $('#id_locationID').val(ui.item.value);
        return false; // Prevent the widget from inserting the value.
        },

    }); 
```

我支持的代码如下：

```
def search_location(request):
"""
Jason data for location
search autocomplete
"""
    q = request.GET['starts_with']
    r = request.GET['maxRows']
    ret = []
    listlocation = USCities.objects.filter(name__istartswith=q)[:r]
    for i in listlocation:
        ret.append({'label':i.name+','+i.state.name+' '+i.state.abbr,'value':i.id})

    ret = {'location':ret}
    data = simplejson.dumps(ret)
    return HttpResponse(data,
        content_type='application/json; charset=utf8'
     ) 
```

帮助将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T18:38:20.747

您的问题出在这一行：

```
starts_with: request.term, 
```

这是对象结构中的最后一个元素，末尾有一个逗号。

这在 Javascript 中在技术上是非法的，但 IE 是唯一强制执行它的浏览器。这就是为什么您在 IE 中会出现错误，但在其他浏览器中不会出现错误。

`},`同样的错误也发生在第 33 行（即几乎在代码的末尾），在对象结构的末尾有一个右大括号，后跟一个非法逗号。

[如果您在JSHint](http://www.jshint.com/)等工具中验证您的代码，则此错误很容易出现。

希望有帮助。

# asp.net - ASP.NET AJAX 控件工具包 HTMLEditor 未正确显示

> ID：11681628
> 
> 赞同：0
> 
> 时间：2012-07-27T04:50:16.747
> 
> 标签：asp.net, html, css, asp.net-ajax

我使用过 ASP.NET AJAX 控件工具包 HTMLEditor。工具栏的布局未正确显示。应该在 3 行中的工具栏在 9 行中出现

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T04:55:21.147

你应该尝试从[Codeplex下载最新的 AJAX 工具包](http://ajaxcontroltoolkit.codeplex.com/releases/view/33804)

# android - android图像不保持纵横比

> ID：11681630
> 
> 赞同：1
> 
> 时间：2012-07-27T04:50:55.143
> 
> 标签：android, bitmap, scaling

你好，我是安卓新手。任何人都可以帮助我保持图像的纵横比。在我的应用程序中，我从 SDCARD 中选择图像并通过将意图传递给下一个活动在 imageview 中显示它。但大多数时候，当图像大或小时，图像在我的图像视图中无法正确显示。

```
 BitmapFactory.Options options = new BitmapFactory.Options();  
                options.inTempStorage = new byte[16 * 1024];  
                options.inJustDecodeBounds = true;  
                bitmap = BitmapFactory.decodeStream(getContentResolver()  
                        .openInputStream(mImageCaptureUri));

                ByteArrayOutputStream bs = new ByteArrayOutputStream();
                bitmap.compress(Bitmap.CompressFormat.PNG, 50, bs);

                Bitmap newbitmap = Bitmap.createScaledBitmap(bitmap, 120,
                        120, true);

                newbitmap.compress(Bitmap.CompressFormat.PNG, 50, bs);
                Intent photointent = new Intent(MethinkzActivity.this,
                        DisplayImage.class);
                photointent.putExtra("photo", bs.toByteArray());

                startActivity(photointent); 
```

在其他活动中，我通过以下方式抓住了这一点。

```
 bitmap = BitmapFactory.decodeByteArray(getIntent()
                .getByteArrayExtra("photo"), 0, getIntent()
                .getByteArrayExtra("photo").length);

        final double viewWidthToBitmapWidthRatio = (double) my_image
                .getWidth() / (double) bitmap.getWidth();
        my_image.getLayoutParams().height = (int) (bitmap.getHeight() * viewWidthToBitmapWidthRatio);
        my_image.setImageBitmap(bitmap); 
```

请帮我找到这个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T05:34:44.373

您应该必须为 ImageView 使用 ImageView 的 Scalling 属性 在您的 xml 文件中使用此属性 为 imageview 使用一种缩放类型

```
 android:adjustViewBounds="true"
 android:scaleType="fitXY" or  android:scaleType="centerCrop" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T05:04:25.590

在 xml 或活动中将 ImageView 的 ScaleType 属性设置为“CenterInside”。

```
my_image.setScaleType(ScaleType.CENTER_INSIDE); 
```

查看更多关于[ScaleType](http://developer.android.com/reference/android/widget/ImageView.ScaleType.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T05:08:29.260

有时显示位图可能非常棘手。

应该非常密切地关注本教程：http: [//developer.android.com/training/displaying-bitmaps/index.html](http://developer.android.com/training/displaying-bitmaps/index.html)

# scala - 宏返回类型和高阶函数

> ID：11681631
> 
> 赞同：2
> 
> 时间：2012-07-27T04:50:56.950
> 
> 标签：scala, macros, scala-2.10

我正在使用 2.10.0-M5 使用 Scala 宏，但我无法弄清楚为什么编译器认为返回类型是`Any`而不是`List[Int]`. 如果我删除对 map 的调用并只返回列表（将宏的最后一行更改为`c.Expr(list)`），它会按预期工作。此外，宏确实返回 a `List[Int]`，编译器只是不知道它。

宏定义：

```
def test(s:String) = macro testImpl

def testImpl(c:Context)(s:c.Expr[String]):c.Expr[Any] = {
  import c.universe._
  val list = reify(List(1)).tree

  val function = reify((x:Int) => x).tree

  val res = 
    Apply(
      Select(
        list,
        newTermName("map")),
      List(function)
    )

  c.Expr(res)
} 
```

宏调用：

```
val list:List[Int] = test("") 
```

错误信息：

```
[error]  found   : Any
[error]  required: List[Int]
[error]     val list:List[Int] = test("")
[error]                              ^ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T06:23:53.930

[https://issues.scala-lang.org/browse/SI-6155](https://issues.scala-lang.org/browse/SI-6155)

# asp.net-mvc-3 - 基于 ASP.Net 角色的表单身份验证

> ID：11681636
> 
> 赞同：0
> 
> 时间：2012-07-27T04:51:13.983
> 
> 标签：asp.net-mvc-3, authentication, authorization

如果我想创建一个自定义的基于 ASP.Net MVC3 表单的身份验证，我应该实现哪些接口？我想做基于角色的表单身份验证。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T04:56:36.630

您可以实现自定义[Membership](http://msdn.microsoft.com/en-us/library/system.web.security.membership.aspx)提供程序和[RoleProvider](http://msdn.microsoft.com/en-us/library/system.web.security.roleprovider.aspx)。这些是 2 个具有很多方法的抽象类，但您不一定需要实现所有方法。只有那些你打算使用的。这[是一篇](http://www.danharman.net/2011/06/23/asp-net-mvc-3-custom-membership-provider-with-repository-injection/)说明一些基本步骤的文章。

# java - 不同的 HTTP 响应 - 当直接从浏览器发送和由 Java 代理中继时

> ID：11681637
> 
> 赞同：2
> 
> 时间：2012-07-27T04:51:27.887
> 
> 标签：java, http, response

我正在编写一个 JAVA 中继代理服务，它充当浏览器和互联网之间的中间件。它的目的是只查看从浏览器传递的 Web 请求和对浏览器的响应，然后离线解析这些响应。

我的 JAVA 代理在特定套接字上侦听来自浏览器的连接。当新连接出现时，它会读取浏览器请求标头，识别要连接的主机，创建与主机的连接并传递浏览器请求。解析浏览器请求和中继服务器响应的代码是下面给出的 streamHTTPData() 方法。在代码中，debugOut 是标准的 System.out。

该代码适用于大部分网站，但一些网站出现了一个奇怪的问题，我无法查看主页。当我在 Google 搜索上随机跟踪链接并遇到一个论坛时，我注意到了这种情况。我为 Firefox 浏览器使用了 HTTPFOX 扩展，并注意到浏览器向 JAVA 程序发送的请求以及从那里发送到 Web 服务器的请求完全相同。但是，我在不使用 JAVA 中间盒时收到 HTTP 200 响应，否则收到 HTTP 404。我不确定问题是什么。谁能指出我正确的方向。HTTPFOX 捕获的 HTTP 请求和响应如下所示。

```
private int streamHTTPData(InputStream in, OutputStream out,StringBuffer host, StringBuffer url, boolean waitForDisconnect) {
    // get the HTTP data from an InputStream, and send it to
    // the designated OutputStream
    StringBuffer header = new StringBuffer("");
    String data = "";
    int responseCode = 200;
    int contentLength = 0;
    int pos = -1;
    int byteCount = 0;

    try {
        // get the first line of the header, so we know the response code
        data = readLine(in);
        if (data != null) {
            header.append(data + "\r\n");
            pos = data.indexOf(" ");
            if ((data.toLowerCase().startsWith("http")) && (pos >= 0)
                    && (data.indexOf(" ", pos + 1) >= 0)) {
                String rcString = data.substring(pos + 1,
                        data.indexOf(" ", pos + 1));
                try {
                    responseCode = Integer.parseInt(rcString);
                } catch (Exception e) {
                    if (debugLevel > 0)
                        debugOut.println("Error parsing response code "
                                + rcString);
                }
            } else {
                if ((pos >= 0) && (data.indexOf(" ", pos + 1) >= 0)) {
                    String suffix = data.substring(pos + 1,
                            data.indexOf(" ", pos + 1));
                    url.setLength(0);
                    url.append(suffix.trim());
                }
            }
        }

        // get the rest of the header info
        while ((data = readLine(in)) != null) {
            // the header ends at the first blank line
            if (data.length() == 0)
                break;
            header.append(data + "\r\n");

            // check for the Host header
            pos = data.toLowerCase().indexOf("host:");
            if (pos >= 0) {
                host.setLength(0);
                host.append(data.substring(pos + 5).trim());
            }

            // check for the Content-Length header
            pos = data.toLowerCase().indexOf("content-length:");
            if (pos >= 0)
                contentLength = Integer.parseInt(data.substring(pos + 15)
                        .trim());
        }

        // add a blank line to terminate the header info
        header.append("\r\n");

        // convert the header to a byte array, and write it to our stream
        out.write(header.toString().getBytes(), 0, header.length());
        System.out.println(header.toString());
        // if the header indicated that this was not a 200 response,
        // just return what we've got if there is no Content-Length,
        // because we may not be getting anything else
        if ((responseCode != 200) && (contentLength == 0)) {
            out.flush();
            return header.length();
        }

        // get the body, if any; we try to use the Content-Length header to
        // determine how much data we're supposed to be getting, because
        // sometimes the client/server won't disconnect after sending us
        // information...
        if (contentLength > 0)
            waitForDisconnect = false;

        if ((contentLength > 0) || (waitForDisconnect)) {
            try {
                byte[] buf = new byte[4096];
                int bytesIn = 0;
                while (((byteCount < contentLength) || (waitForDisconnect))
                        && ((bytesIn = in.read(buf)) >= 0)) {
                    out.write(buf, 0, bytesIn);
                    out.flush();
                    byteCount += bytesIn;
                }
            } catch (Exception e) {
                String errMsg = "Error getting HTTP body: " + e;
                if (debugLevel > 0)
                    debugOut.println(errMsg);
            }
        }
    } catch (Exception e) {
        if (debugLevel > 0)
            debugOut.println("Error getting HTTP data: " + e);
    }

    // flush the OutputStream and return
    try {
        out.flush();
    } catch (Exception e) {
    }
    return (header.length() + byteCount);
} 
```

HTTP 请求（带和不带中间盒）：

```
(Request-Line)  GET / HTTP/1.1
Host    andhrawatch.com
User-Agent  Mozilla/5.0 (Windows NT 6.1; WOW64; rv:13.0) Gecko/20100101 Firefox/13.0.1
Accept  text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
Accept-Language en-us,en;q=0.5
Accept-Encoding gzip, deflate
Proxy-Connection    keep-alive 
```

没有 JAVA 中间盒的 HTTP 响应：

```
(Status-Line)   HTTP/1.1 200 OK
Date    Fri, 27 Jul 2012 03:51:38 GMT
Server  Apache/2.2.14 (Unix) mod_ssl/2.2.14 OpenSSL/0.9.8e-fips-rhel5   mod_auth_passthrough/2.1 mod_bwlimited/1.4 FrontPage/5.0.2.2635
X-Powered-By    PHP/5.3.1
P3P CP="NOI ADM DEV PSAi COM NAV OUR OTRo STP IND DEM"
Expires Mon, 1 Jan 2001 00:00:00 GMT
Cache-Control   post-check=0, pre-check=0
Pragma  no-cache
Set-Cookie  0f486952816b6d6bf53a4c34b724b278=c68edaebc6dedb2b291832dfbfb784fc; path=/
Last-Modified   Fri, 27 Jul 2012 03:51:38 GMT
Keep-Alive  timeout=5, max=100
Connection  Keep-Alive
Transfer-Encoding   chunked
Content-Type    text/html; charset=utf-8 
```

带有 JAVA 中间盒的 HTTP 响应

```
(Status-Line)   HTTP/1.1 404 Component not found
Date    Fri, 27 Jul 2012 03:54:39 GMT
Server  Apache/2.2.14 (Unix) mod_ssl/2.2.14 OpenSSL/0.9.8e-fips-rhel5            mod_auth_passthrough/2.1 mod_bwlimited/1.4 FrontPage/5.0.2.2635
X-Powered-By    PHP/5.3.1
P3P CP="NOI ADM DEV PSAi COM NAV OUR OTRo STP IND DEM"
Expires Mon, 1 Jan 2001 00:00:00 GMT
Cache-Control   post-check=0, pre-check=0
Pragma  no-cache
Set-Cookie  0f486952816b6d6bf53a4c34b724b278=33806d89181aa6d488ccba1b9163e511; path=/
Last-Modified   Fri, 27 Jul 2012 03:54:39 GMT
Transfer-Encoding   chunked
Content-Type    text/html; charset=utf-8 
```

# crystal-reports - 水印，穿过水晶报告中的详细信息和标题部分

> ID：11681638
> 
> 赞同：-3
> 
> 时间：2012-07-27T04:51:49.520
> 
> 标签：crystal-reports, watermark

我需要打印水印，它在水晶报告中穿过详细信息部分和标题。

这个怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T15:50:59.033

*   插入新的页眉部分 (PHb)
*   将它移到旧的上方（现在将是 PHa）
*   插入图片
*   格式化新的页眉部分（PHa），启用“Underlay following section”属性

您可能需要调整图像在 PHa 部分中的位置以及该部分的大小。

* * *

## 回答 #2

> 赞同：-4
> 
> 时间：2012-07-27T04:57:12.957

如果您有兴趣，可以在 Pentaho Report Designer 中执行此操作，请参阅 Pentaho Report Designer 提供的示例报告。

# vb.net - Powerpoint Interop API 访问幻灯片母版视图中的多个幻灯片母版

> ID：11681645
> 
> 赞同：0
> 
> 时间：2012-07-27T04:52:51.037
> 
> 标签：vb.net, interop, powerpoint-2007

我有多个母版幻灯片的 powerpoint 演示文稿。我想使用 InterOp API 和 VB.net 在母版视图中访问当前活动的 powerpoint 演示文稿幻灯片母版。当我尝试访问活动幻灯片母版时，它总是选择第一张幻灯片母版而不是活动母版幻灯片。我尝试使用幻灯片，我可以访问当前幻灯片。但在 slideMaster 视图中我找不到访问指定幻灯片母版的方法。

```
If(ActiveWindow.ActivePane.ViewType = PowerPoint.PpViewType.ppViewSlideMaster) Then 'condition 

ActivePresentation.Slides(2) 'this way I can access specified slide.
ActivePresentation.SlideMaster 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T07:26:55.320

如果“活动幻灯片母版”是指当前所选幻灯片使用的幻灯片母版，您可以通过以下方式访问它

```
ActiveWindow.Selection.SlideRange(1).Design.SlideMaster 
```

或者同样适用于演示文稿中第一张幻灯片的母版

```
ActivePresentation.Slides(1).Design.SlideMaster 
```

或在幻灯片母版视图中

```
If ActiveWindow.ActivePane.ViewType = ppViewMasterThumbnails Or _
    ActiveWindow.ActivePane.ViewType = ppViewSlideMaster Then

    ActiveWindow.View.Slide...
End If 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T14:36:49.673

```
Debug.Print ActiveWindow.View.Slide.Name
Debug.Print ActiveWindow.View.Slide.Design.Name 
```

在幻灯片母版视图中，PPT 2010（也可能是 2007 版），第一行给出当前选择的布局或母版的名称，第二行给出母版基础的设计名称。

在多母版演示中，您查看设计系列以了解母版。

其他版本的 PPT 工作方式不同。这解释了更多关于设计、布局、大师、狮子、老虎和熊的信息，我的：

[幻灯片、大师、设计、布局......它们如何组合在一起？](http://www.pptfaq.com/FAQ00989_Slides-_Masters-_Designs-_Layouts_---_how_do_they_all_fit_together-.htm)

# javascript - 如何在 JavaScript 中定义和操作 Date 变量？

> ID：11681646
> 
> 赞同：2
> 
> 时间：2012-07-27T04:52:58.010
> 
> 标签：javascript

我需要将`Date`对象用于三种不同的目的，我可以按如下方式执行吗？

我对 JavaScript 很陌生，所以我不确定以下定义是否适用于所有浏览器。

```
Date.prototype.yyyymmdd = function() 
{
  var yyyy = this.getFullYear().toString();    
  var mm = (this.getMonth()+1).toString(); 
  var dd  = this.getDate().toString();    
  return yyyy+"-" + (mm[1]?mm:"0"+mm[0])+"-" + (dd[1]?dd:"0"+dd[0]); 

}; 

Date.prototype.mmddyyyy = function() 
{
  var yyyy = this.getFullYear().toString();    
  var mm = (this.getMonth()+1).toString(); 
  var dd  = this.getDate().toString();    

  return (mm[1]?mm:"0"+mm[0])+"-" + (dd[1]?dd:"0"+dd[0])+"-" + yyyy; 
}; 

Date.prototype.mmdd = function() 
{
   var yyyy = this.getFullYear().toString();    
   var mm = (this.getMonth()+1).toString(); 
   var dd  = this.getDate().toString();    
   return (mm[1]?mm:mm[0])+"/" + (dd[1]?dd:dd[0]);
};

var d0 = new Date();
console.log(d0.mmddyyyy);

var d1 = new Date();
console.log(d1.yyyymmdd);

var d2 = new Date();
console.log(d2.mmdd); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T04:54:47.683

您只是错过了括号 - 它应该在任何浏览器中运行（但如果不支持控制台或在 IE8 中打开，则当前会失败）

[演示](http://jsfiddle.net/mplungjan/dfMjt/)

```
var d0 = new Date();
console.log(d0.mmddyyyy());

var d1 = new Date();
console.log(d1.yyyymmdd());

var d2 = new Date();
console.log(d2.mmdd()); 
```

我个人更喜欢一个原型

[演示](http://jsfiddle.net/mplungjan/6fxJ3/)：

```
Date.prototype.formatDate=function(fmt) {
  fmt = fmt || "yyyymmdd";
  var yyyy = this.getFullYear();    
  var mm = this.getMonth()+1;
  if (mm<10) mm="0"+mm;
  var dd  = this.getDate();    
  if (dd<10) dd="0"+dd;  
  if (fmt==="yyyymmdd") return yyyy+"-" + mm+"-" + dd;
  if (fmt==="mmddyyyy") return ""+mm+"-" + dd +"-" + yyyy;
  if (fmt==="mmdd")  return ""+mm+"/"+dd;
};

var d0 = new Date();
console.log(d0.formatDate("mmddyyyy"));
console.log(d0.formatDate("yyyymmdd"));
console.log(d0.formatDate("mmdd")); 
```

# android - 关于在an droid中设计布局所需的建议

> ID：11681653
> 
> 赞同：0
> 
> 时间：2012-07-27T04:54:02.490
> 
> 标签：android, android-layout, android-intent, android-emulator

我必须在我的应用程序中每行加载 3 个图像视图。我需要通过适配器类动态地做到这一点。这样做的最佳方法是什么？我应该使用哪种布局？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T05:11:03.443

为此使用延迟加载列表视图，在这两个链接下方并更改为 XML 文件并设置三（3）个 Imageview 而不是一（1）个 Textview 和一（1）个 Imageview。

[延迟加载列表视图](https://github.com/thest1/LazyList)

[通用图像加载器](https://github.com/nostra13/Android-Universal-Image-Loader)

# mysql - 日期和日期时间字段的Mysql默认值

> ID：11681659
> 
> 赞同：2
> 
> 时间：2012-07-27T04:55:15.767
> 
> 标签：mysql, sql, database, datetime, phpmyadmin

任何人都可以指定，如何从 phpmyadmin 界面为 Mysql 中的 Date 和 Datetime 字段设置默认值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T05:05:10.363

使用`CURRENT_TIMESTAMP`常量

还要检查这个[链接](https://stackoverflow.com/questions/168736/how-do-you-set-a-default-value-for-a-mysql-datetime-column)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T06:50:37.490

您可以为 DATE 和 DATETIME 字段指定确切的默认值，例如 -

```
CREATE TABLE table1(
  id INT(11) NOT NULL,
  date_column DATE DEFAULT '2012-01-01',
  datetime_column DATETIME DEFAULT '2010-05-05 10:30:00',
  PRIMARY KEY (id)
);

INSERT INTO table1 (id) VALUES (1);

SELECT * FROM table1;

+----+-------------+---------------------+
| id | date_column | datetime_column     |
+----+-------------+---------------------+
|  1 | 2012-01-01  | 2010-05-05 10:30:00 |
+----+-------------+---------------------+ 
```

如果要使用函数定义 DEFAULT 值，则可以创建触发器。

# rdf - OWL-LIST 和 RDF-LIST 的区别

> ID：11681662
> 
> 赞同：1
> 
> 时间：2012-07-27T04:55:26.110
> 
> 标签：rdf, semantic-web, owl, protege

我无法理解 OWL-LIST 和 RDF-LIST 之间的区别。其次，为什么OWL-DL由于OWL序列化而不支持RDF-LIST，为什么？以及如何在 OWL-DL 中创建 OWL-LIST

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-27T21:55:53.873

正如评论中提到的，我认为没有任何标准的东西叫做 OWL-LIST。如果您需要在 OWL 中表示列表，您可能会感兴趣的[CO-ODE 列表本体：](http://www.co-ode.org/ontologies/lists/2008/09/11/)

> **描述**
> 
> 一组用于描述 OWL 列表模式的实体。（见[http://owl-workshop.man.ac.uk/acceptedLong/submission_12.pdf](http://owl-workshop.man.ac.uk/acceptedLong/submission_12.pdf)）

也看看这些谈论本体论，[OWL中的序列](http://protege.stanford.edu/conference/2006/submissions/slides/7.1_Drummond.pdf)。他们谈到了 RDF 列表词汇表（ 、 和 ）不能在 OWL 中使用的原因`rdf:List`：`rdf:first`由于`rdf:rest`RDF 列表用于 OWL 的序列化，因此会出现不清楚三元组是否作为数据，或作为 OWL 编码的一部分。

[Michael Schneider 在 answers.semanticweb.com 上的](http://answers.semanticweb.com/questions/11286/owlxml-vs-rdfxml-serialization/11325)这个答案也解释了这个问题：

> 如果在 OWL 2 DL 之外，有很多危险不能安全地从 RDF 转换到本地 OWL 2 语法。一个例子是当 RDF 列表被用作普通实体而不是 OWL 构造的参数列表时，例如，如果用于类似“:me :traveledCountries (Argentina 白俄罗斯中国)”的东西。在反向 RDF 映射中，根本没有像这样的结构的转换规则。

# c++ - 使用 libpcap，有没有办法从离线 pcap 文件中确定捕获的数据包的文件偏移量？

> ID：11681665
> 
> 赞同：1
> 
> 时间：2012-07-27T04:55:46.717
> 
> 标签：c++, libpcap

我正在编写一个程序来重建 Snort 捕获的 TCP 流。我读过的大多数关于会话重建的例子：

*   将整个 pcap 文件加载到内存中开始（由于硬件限制和某些捕获文件大小为 10 GB 的事实，这不是解决方案），或者
*   在读取捕获时将每个数据包缓存在内存中，并丢弃不相关的数据包；这与将整个文件读入内存基本相同

我目前的解决方案是编写我自己的 pcap 文件解析器，因为格式很简单。我将每个数据包的偏移量保存在一个向量中，并在通过它后重新加载每个数据包。这与 libpcap 一样，一次只能将一个数据包流式传输到内存中；我只使用序列号和标志进行排序，而不是数据包数据。与 libpcap 不同，它的速度明显较慢。使用 libpcap 处理 570 MB 的捕获大约需要 0.9 秒，而我的代码需要 3.2 秒。但是，我的优势在于无需重新加载整个捕获即可向后搜索。

如果我坚持使用 libpcap 来解决速度问题，我想我可以创建`currentOffset`一个初始值为 24 的变量（pcap 文件全局标头的大小），每次加载新数据包时将其推送到向量，并在我每次调用`pcap_next_ex`时将其增加数据包的大小 + 16（对于 pcap 记录头的大小）。然后，每当我想读取单个数据包时，我都可以使用常规方式加载它并查找`packetOffsets[packetNumber]`.

有没有更好的方法使用 libpcap 来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T05:37:38.377

自己解决了这个问题。

在我打电话之前`pcap_next_ex`，我推入`ftell(pcap_file(myPcap))`了一个`vector<unsigned long>`. 之后我根据需要手动解析数据包。

EZPZ。只花了24个多小时的脑残......

# c# - 在 C# 中启动 STAThread

> ID：11681666
> 
> 赞同：26
> 
> 时间：2012-07-27T04:55:58.480
> 
> 标签：c#, .net, wcf, sta

我还是 C# 的新手，尤其是 C# 中的线程。我正在尝试启动一个需要单线程单元（[STAThread](http://msdn.microsoft.com/en-us/library/system.stathreadattribute.aspx)）的函数

但我无法编译以下代码：

该函数在名为 的单独类中如下所示`MyClass`：

```
internal static string DoX(string n, string p)
        {
            // does some work here that requires STAThread
        } 
```

我已经在函数顶部尝试了属性 [STAThread]，但这不起作用。

所以我正在尝试创建一个新线程，如下所示：

```
 Thread t = new Thread(new ThreadStart(MyClass.DoX)); 
```

但这不会编译（最好的重载方法有无效参数错误）。但是在线示例非常相似[（示例here）](http://msdn.microsoft.com/en-us/library/system.threading.thread.aspx) 我做错了什么，如何简单地使函数在新的 STA 线程中运行？

谢谢

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-07-27T05:10:46.550

```
Thread thread = new Thread(() => MyClass.DoX("abc", "def"));
thread.SetApartmentState(ApartmentState.STA);
thread.Start(); 
```

如果您需要该值，您可以将其“捕获”回一个变量中，但请注意该变量在另一个线程结束之前不会有该值：

```
int retVal = 0;
Thread thread = new Thread(() => {
    retVal = MyClass.DoX("abc", "def");
});
thread.SetApartmentState(ApartmentState.STA);
thread.Start(); 
```

或者更简单：

```
Thread thread = new Thread(() => {
    int retVal = MyClass.DoX("abc", "def");
    // do something with retVal
});
thread.SetApartmentState(ApartmentState.STA);
thread.Start(); 
```

# message-queue - 如何在 VxWorks 中清除/刷新消息队列缓冲区？

> ID：11681667
> 
> 赞同：0
> 
> 时间：2012-07-27T04:56:00.543
> 
> 标签：message-queue, vxworks, rtos

我想知道，有没有什么方法可以刷新所有在 1 msgQId 上流水线的消息？？？？？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T13:49:33.070

没有内置 API 可以刷新消息队列中的所有消息。
如果您只想丢弃队列中的所有消息，这里有一个快速的方法：

```
void discardQMessages(MSG_Q_ID id) {
  while(
        msgQReceive(id, NULL, 0, NO_WAIT) != ERROR
       )    ;

  if {errno != S_objLib_OBJ_UNAVAILABLE)
     /* Uh oh... got some problem */
} 
```

当您从任何 OS API 调用中收到错误时，您应该**始终检查 errno。**

# javascript - UTC 问题，Flot X 轴时间错误

> ID：11681669
> 
> 赞同：1
> 
> 时间：2012-07-27T04:56:14.797
> 
> 标签：javascript, jquery, flot, utc

所以我已经阅读了大多数搜索结果，以及讨论组中关于 flot 的档案......我不确定我能在这里做什么，因为我认为我不完全理解这个问题......

我目前有我在每日和每周快照图上显示的 unix 时间戳数据。显示的每日图表选项...

```
 $.ajax({
                url: "/whats/encode_daily_graph.php?itemid=<?php echo $_GET['item']?>",
                method: 'GET',
                dataType: 'json',
                success: onOutboundReceived
            });
            function onOutboundReceived(series) {
                var length = series.length;
                var finalData = series;
                var options = {
                    lines: { show: true },
                    legend: { show : false },
                    points: { show: true, hoverable:true },
                    grid: { hoverable: true, clickable: true },
                    xaxis: { mode : "time", timeformat : "%H:%M" },
                    yaxis: { minTickSize: "1", tickDecimals : "0" }
                };
                $.plot($(".graph_daily"), finalData, options);
            } 
```

所以很多线程（以及文档）提到我应该“假装数据是UTC”。好吧，就我而言，由于我的数据都记录在 PST (UTC-8) 中，我应该将 8*3600*1000 添加到我传递到图表中的数据中，对吧？出于某种原因，减去或添加这个偏移量都没有达到我的预期 - 比例变为完全不合理的东西。所以我可能误解了手头的整个问题。

任何人都可以提供有关此问题的任何见解吗？谢谢你的时间！

编辑：这是 AJAX url 为一张图取回的内容。

[{"label":"24 小时概览","data":[[1343283113000,"111"],[1343286597000,"111"], [1343290220000,"111"],[1343293802000,"111"],[ 1343297377000,"111"],[1343300843000,"111"], [1343304504000,"111"],[1343308105000,"111"],[1343311724000,"111"],[1343315331432,"111820"][ "111"],[1343326080000,"111"],[1343329669000,"111"],[1343333296000,"111"],[1343336882000,"111"],[1343340493000,"111"],[1311344094000," "],[1343347683000,"111"],[1343351299000,"111"],[1343355015000,"111"],[1343358535000,"112"],[1343362132000,"112"],[13433366704000,"112" ],"颜色":"#FFAA42"}]

这是它在图表上的样子。注意我有一个工具提示，它使用 Javascript 的 Date 来构造一个 Date 对象，这样我就可以轻松地获取 json 数据的小时和分钟，这与轴不匹配。[http://i.imgur.com/Jwsyd.png](http://i.imgur.com/Jwsyd.png)

工具提示的呈现方式：

```
 var previousPoint = null;
            $(".graph_daily").bind("plothover", function (event,pos,item){
                if (item) {
                    if (previousPoint != item.dataIndex) {
                        previousPoint = item.dataIndex;

                        $("#graph_info").remove();
                        var x = item.datapoint[0].toFixed(2), y = item.datapoint[1].toFixed(2);
                        var date = new Date(item.datapoint[0]);
                        var hour = date.getHours();
                        var min = date.getMinutes();
                        var msg = hour + ":" + min + ", " + y;
                        if (min < 10) msg = hour + ":" + "0" +  min + ", " + y;
                        showToolTip(item.pageX, item.pageY, msg);
                    }
                }
                else{
                    $("#graph_info").remove();
                    previousPoint = null;
                }
            }); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-27T16:01:12.980

All you need to do is change your tooltip code to correctly add the timezone offset:

```
 var x = item.datapoint[0],
           y = item.datapoint[1].toFixed(2);
       var date = new Date(x + (7 * 60 * 60 * 1000)); 
```

After that your graph axes and tooltips line up correctly for me. You may find that making your graph work for people in other timezones is slightly more complicated - you would want to move your raw JSON data to UTC (i.e. if it's recorded in PDT, add that before sending to the browser). Then when you go to create the tooltip, instead of offsetting by 7*60*60*1000, you would offset by this:

```
 var userTZ = new Date();//user = the viewers browser
        userTZ = userTZ.getTimezoneOffset()*60*1000;
        var dt = new Date(x+userTZ); 
```

Here it is working as in the simpler example: [http://jsfiddle.net/ryleyb/4uuPZ/](http://jsfiddle.net/ryleyb/4uuPZ/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-10-08T14:06:39.157

Flot 有一个`timezone: "browser"`用于 x 轴的选项。设置此项将导致日期以本地浏览器时间格式化。要打印出绘图悬停的日期，请使用[Date.toLocalTimeString](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date/toLocaleTimeString)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T06:35:49.087

我建议你在你的 php.ini 中使用以下内容。输出在 JS 中也会给出相同的结果

```
 $hour=mktime($h+1,$i,$s,$m,$d,$y)*1000; 
```

# python - 为什么我不能导入“models.User”？

> ID：11681670
> 
> 赞同：0
> 
> 时间：2012-07-27T04:56:20.523
> 
> 标签：python, python-import

这行得通。

```
from django.contrib.auth import load_backend, login
from django.contrib.auth.models import User 
```

然而，这并没有。

```
from django.contrib.auth import load_backend, login, models.User 
```

为什么后者不起作用？包中不是`models`模块`django.contrib.auth`吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T05:02:53.813

从语义上讲，这是有道理的，但由于 python 的语法，以下是语法错误。（我同意python在这里的选择。）

```
from django.contrib.auth import models.User 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-27T05:03:02.333

您正在尝试在导入自身`User`之前导入`models`。就像你在做

```
from  import django.contrib.auth.models.User 
```

上面的代码在任何情况下都不起作用。希望 Guido 不会看到这个尴尬的答案。

# php - $this_array=array ("this", "and", "this", "and", "th")

> ID：11681671
> 
> 赞同：0
> 
> 时间：2012-07-27T04:56:22.473
> 
> 标签：php, arrays

我如何找到数组中元素的长度，以确保每个元素的长度超过 2 个字符。使用 php 是...

前任。$this_array=array ("this", "and", "this", "and", "th")

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T05:01:21.427

循环可能有点矫枉过正，除非您需要做的更多 - 过滤更有效。

```
<?
$this_array =  array("a", "this", "and", "this", "and", "th");

$this_array = array_filter($this_array, function($val){return strlen($val)>=2;});

print_r($this_array); // Array ( [1] => this [2] => and [3] => this [4] => and [5] => th ) 
```

注意：这只适用于 PHP 5.3+

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T05:00:50.117

```
foreach($this_array as $value) {
   $strlen = strlen($value);
   if($strlen <= 2)
   {
     echo '$value is '.$strlen.' characters long<br />';   
     // do something with it
   }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-27T05:00:17.027

```
foreach ($this_array as $key => $value)
{
    if (strlen($value) < 3)
    {
        echo "{$value} is too short<br />";
    }
} 
```

见[foreach](http://php.net/foreach)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-27T04:59:24.517

```
foreach($this_array as $val) {
   $valLength = strlen($val); //gives length 
   if($valLength < 3) {
       //something here, less than 2 char
   } 
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-27T05:05:30.060

```
$this_array=array ("aa", "bb", "cc", "asd", "aa");    

function lengthCheck($v, $w)
    {
     global $lengthOK;
       $len=  strlen($w);
       if($len<3)
       {
        $lengthOK=false;
       }
        return $lengthOK;
    }

    $lengthOK=true;// set everytime when you call "lengthCheck"
    $b = array_reduce($this_array, "lengthCheck");

    var_dump($b); 
```

$b 将具有 true/flase。即，如果所有元素的长度都为 3 或更长，则为 TRUE，否则为 false。

# struts-1 - Tiles 2.2 与 Struts 1.x (1.2) 兼容性的使用 - Reg

> ID：11681675
> 
> 赞同：0
> 
> 时间：2012-07-27T04:56:35.017
> 
> 标签：struts-1, tiles2

我们已经开始将在 Struts 1.x (1.2) 上运行的项目（Web 应用程序）从 Framesets 迁移到 Tiles 2.2。

如 Apache tile 教程中所述，我们对 web.xml 进行了一些修改，并将tile-defs.xml 添加到项目中。但是无法将 struts-config.xml 与tiles-defs.xml 的关系。

Tiles 2.2 与 struts 1.x 兼容吗？有人可以指导我正确的方向或提供示例以将 Tiles 2.2 集成到我们的 Struts 1.x 项目中吗？

任何形式的帮助将不胜感激，因为我们需要在几天内准备一个演示。

谢谢并恭祝安康，

Purushotham 雷迪 P

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T21:13:45.323

struts-config和tiles之间的关系如下，如果你的action类返回“success”struts-config文件会将它转发到“tile.AddUpdateTransportation.view”tiles

struts-config.xml 文件：

```
<action path="/transportationAddUpdate1"
        type="com.struts.action.TransportationAction"
        name="Form1" 
        scope="session" validate="false">
        <forward name="success"
            path="tile.AddUpdateTransportation.view">
        </forward>
</action> 
```

瓷砖-defs.xml：

```
<definition name="tile.AddUpdateTransportation.view"
    extends=".tops.core.layout">
    <put name="content" value="/transportation.jsp" />
    <put name="title.section" value="Transportation - Add/Copy/Delete"/>
</definition> 
```

# java - Spring + Hibernate 应用程序不释放内存

> ID：11681682
> 
> 赞同：1
> 
> 时间：2012-07-27T04:57:08.667
> 
> 标签：java, spring, hibernate, tomcat, memory

我们创建了一个 Spring Web 应用程序。使用：

*   春天 3.1.0
*   休眠 3.5.4 最终版
*   Tomcat 6.24

该应用程序相当繁重，每个用户请求我们发送大约 1000 个联系人。我们用 9 个并发用户重复请求测试了我们的应用程序，并使用视觉 vm 进行了分析，结果如下：

![在此处输入图像描述](../Images/f560b02316a2bcea89cbb19d203ed5dd.png)

查看结果，高峰是重复请求，低点是所有请求都停止时。最初的~200MB 内存似乎根本没有释放。春天真的这么重还是我有潜在的记忆问题？这个网络应用程序的发布版本可能会处理更多的用户。

我在 tomcat 7 上也有类似的结果测试。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T05:34:19.780

它不是任何内存问题，GC 足够聪明，可以在您的应用程序中没有引用后释放对象，确保没有全局引用可以用作任何方法的本地，并且根据您的图表它正在释放对象, permgen 可能需要 200 mb，因此您不必担心。

# linux - 当我在脚本中使用时，无法使用 echo "^]" 关闭 scpi(telnet) 会话

> ID：11681683
> 
> 赞同：37
> 
> 时间：2012-07-27T04:57:08.767
> 
> 标签：linux, telnet

的使用`echo-e "\ 029"`也不起作用。但是如果直接在终端会话中使用`strg`++ - `alt gr`>它可以工作。`]`

我必须更具体地问我的问题：
我通过 Telnet/SCPI 连接了一个射频发生器 (AGILENT)。
如果我在终端上执行本手册并在会话结束时按`CTRL`++ `ALT GR`for `]`'^]' 然后正确关闭 scpi 会话，我可以键入`quit`以正确关闭 telnet 会话。
射频发生器的显示屏上没有错误消息。所以它应该是。

如果我通过脚本执行此操作，SCPI 会话似乎无法识别中断信号条件“^]”，并且将在脚本结束后强制关闭（telnet 和 scpi）。-> 消息：“被外部主机断开”。不幸的是，我在 RF 发生器的显示屏上收到错误消息 -> “无效标头”等。

连接成功后出现：Connected to 192,168.10.66 Escape Character is '^]' -> 这就是问题所在。终端中的手动输入正常工作，脚本不起作用。

我的脚本看起来像这样：

```
function  getIDNMessage()  
{
    (      
        echo open $1 $2  
        sleep 1  
        echo "*IDN?"  
        sleep 1  
        echo –e "\029"         # or echo “^]” does not work well  
        sleep 1  
        echo "quit\r"  
        sleep 1  
    ) | telnet > scpi_telnet.log 2>&1
}

getIDNMessage 192.168.10.66 7777 
```

* * *

## 回答 #1

> 赞同：141
> 
> 时间：2014-11-20T17:15:26.103

在 Linux 上，它实际上是：

`CTRL`+`]`然后`ENTER`

最后输入`quit`命令。

```
^]

telnet> quit
Connection closed.
[fred@localhost ~]$ 
```

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2017-05-19T15:30:50.450

要在 redhat 上退出 telnet：
输入`"CTRL+5"` 然后输入`"quit"`

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2017-11-07T10:11:09.607

关闭会话使用下面的命令

1.  Ctrl + ]
2.  远程登录>退出

它在 REHL 和 CentOS 中完美运行。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2017-09-13T09:35:25.377

`^]`手段`ctrl + right`括号。尽管很奇怪，但它确实有效。您将被带到 telnet 提示符，您可以在其中键入 quit。

在国际键盘上，`]`字符通常不是一个键，需要用其他键替换。正确的键通常是 P 右侧的键或之后的下一个键。

以下是基于以下评论的列表：

```
Finnish, Swedish, Norwegian, Danish: ctrl + å
French: ctrl + 6
German: ctrl + ü
Swiss: ctrl + ¨
Hungarian: ctrl + 5
Portuguese: ctrl + ´
Dutch, Belgian: ctrl + $
Canadian French: ctrl + ç 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-27T05:27:42.990

一定是这样。因为`^]`打印在服务器上的终端对客户端来说没有任何意义。客户端必须先捕获此符号，然后才能将其传输到服务器，当然您不能仅将其写入服务器上运行的程序中的终端。

所以你需要以其他方式中断会话。有很多方法。

1.  如果您在正在运行的程序中，您可以简单地终止它（`exit`在 shell 或`sys.exit()`python 或`exit()`许多其他语言中）。
2.  如果您无法控制程序流程，您可以通过终止终端所有者的进程来关闭终端。您需要找到该进程，然后使用`kill ...`（进程的 PID 而不是`...`）。
3.  如果要从客户端关闭客户端，则需要在客户端执行相同的操作 ( `kill ...`)。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-07-25T13:46:31.230

在带有土耳其语键盘的 MacOS 上尝试：
`Ctrl`+ `Option`+`ü`

然后，
`> quit`

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-10-06T08:16:58.453

在我的丹麦键盘上，它不是`Ctrl`+ `å`- 而是右侧的键`å`（有一个帽子，一个波浪号和一个变音符号）

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-05-25T08:29:22.977

`Ctrl + ]`这将显示为 ^] 然后

`telnet> q`q 代表退出

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-08-24T02:22:42.897

打开连接时，您可以指定转义字符。例如

```
[root@localhost ~]# telnet -e % localhost
Telnet escape character is '%'.
Trying 127.0.0.1...
Connected to localhost.
Escape character is '%'.

>%

telnet> quit
Connection closed.
[root@localhost ~]# 
```

在这里，我只是使用 % 符号来关闭会话，因为我必须告诉 telnet 将其用作转义字符。我发现这很有用，因为字符 ^] 在不同的键盘布局上可能会有所不同。

# android - 在画廊视图中显示 sd 卡文件夹中的图像（android）

> ID：11681686
> 
> 赞同：1
> 
> 时间：2012-07-27T04:57:15.873
> 
> 标签：android, android-sdcard, android-gallery, baseadapter, galleryview

我正在开发 android 应用程序。在我的应用程序中，我想在图库视图中显示 sd 卡文件夹中的图像。我正在使用 BaseAdapter。我试图在我的项目的资源文件夹中显示可绘制文件夹中的图像，它工作正常。我尝试了以下代码：

```
public class ImageAdapter extends BaseAdapter {

private Context context;  
public static Integer[] imageIDs={  
        R.drawable.sp1,R.drawable.sp2,
        R.drawable.sp3,R.drawable.sp4,
        R.drawable.sp5,R.drawable.sp6,
        R.drawable.sp7,R.drawable.sp8,
        R.drawable.sp9
};

public ImageAdapter(Context context){  
    this.context=context;  
}  
@Override
public int getCount() {
    // TODO Auto-generated method stub
    return imageIDs.length;
}

@Override
public Object getItem(int position) {
    // TODO Auto-generated method stub
    return position;
}

@Override
public long getItemId(int position) {
    // TODO Auto-generated method stub
    return position;
}

@Override
public View getView(int position, View 
        convertView, ViewGroup parent) {
    // TODO Auto-generated method stub
    ImageView image=new ImageView(context);  
    image.setImageResource(imageIDs[position]);  
    image.setAdjustViewBounds(true);  
    image.setLayoutParams(new Gallery.LayoutParams(120,120));  
    image.setScaleType(ImageView.ScaleType.FIT_CENTER);
    return image;  
} 
```

现在我想显示 sd 卡文件夹中的图像并以画廊格式显示它们。为此，我试图以数组形式获取所有图像，但我不知道如何以数组格式获取它们。我可以通过以下方式访问 sd 文件夹中的图像。

```
File path = new File(Environment.getExternalStorageDirectory()+"/download/sp1.jpg"); 
```

如何以数组格式获取它们并在图库视图中显示它们。或者有没有其他替代方法来显示它们而不是数组？

需要帮助....谢谢....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T04:59:59.810

您需要将图像加载为位图：

```
getView(...){
File f = new File(directory, filename);
Bitmap bitmap = BitmapFactory.decodeFile(f.getPath());
...
ImageView image=new ImageView(context);
image.setImageBitmap(bitmap);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T05:06:40.317

见下面的代码

```
if (android.os.Environment.getExternalStorageState().equals(
            android.os.Environment.MEDIA_MOUNTED)) {

        // It have to be matched with the directory in SDCard
        boolean exist = new File(Environment.getExternalStorageDirectory()
                + File.separator + "download").exists();
        if (exist) {
            File f = new File(Environment.getExternalStorageDirectory()
                    + File.separator + "download");

            File[] files = f.listFiles();
            File file;
            for (int i = 0; i < files.length; i++) {
                file = files[i];
                Bitmap bitmap = decodeFile(file);
                return bitmap;      
            }
        }
    } 
```

你能这样做吗

```
@Override
public int getCount() {
    // TODO Auto-generated method stub
    return files.length;
}

@Override
public View getView(int position, View 
        convertView, ViewGroup parent) {
    // TODO Auto-generated method stub
    ImageView image=new ImageView(context);  

    //image.setImageResource(imageIDs[position]);  
    File file = files[position]
    Bitmap bitmap = decodeFile(file);
    image.setImageBitmap(bitmap);

    image.setAdjustViewBounds(true);  
    image.setLayoutParams(new Gallery.LayoutParams(120,120));  
    image.setScaleType(ImageView.ScaleType.FIT_CENTER);
    return image;  
} 
```

# php - 跨域中央管理系统

> ID：11681703
> 
> 赞同：0
> 
> 时间：2012-07-27T05:00:18.047
> 
> 标签：php, content-management-system, yii, dns, cross-domain

我的目标是为 Application + DB 提供 1 个集中位置，所有域都将从该位置提供页面（不复制所有文件）

我的目标是消除将我的应用程序复制到 5 个不同域的需要，并且每次有一个新功能时，5 个不同的地方都需要更新 5。

我检查了这个：[访问托管在同一服务器上的域中的文件](https://stackoverflow.com/questions/6447184/accessing-files-across-domains-that-are-hosted-on-the-same-server)，但它没有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T13:00:17.157

只要域在同一物理服务器上，就可以完成。

您的代码将驻留在 Web 根目录之外：

*   域1
*   域2
*   域3
*   域4
*   域5
*   common_yii
*   *   框架（yii 框架文件）
*   *   appDir（您的网络应用程序文件放在这里）
*   *   *   受保护
*   *   *   *   配置（你的应用配置文件'main.php'应该在这里）

您在每个域中的 index.php 应如下所示：

```
// change the following paths if necessary
$yii = '../common_yii/framework/yii.php';
$config = '../common_yii/appDir/protected/config/main.php';

// remove the following lines when in production mode
defined('YII_DEBUG') or define('YII_DEBUG',true);
// specify how many levels of call stack should be shown in each log message
defined('YII_TRACE_LEVEL') or define('YII_TRACE_LEVEL',3);

require_once($yii);
if ( !isset( Yii::app()->params ) ) {
    Yii::createWebApplication($config)->run();
} 
```

您将能够在 index.php 中为每个域设置实例特定变量。

高温高压

# javascript - 使 jquery 切换与动态内容一起工作

> ID：11681704
> 
> 赞同：1
> 
> 时间：2012-07-27T05:00:19.643
> 
> 标签：javascript, jquery

我的网站上有以下代码：http: [//jsfiddle.net/dJLK3/1/](http://jsfiddle.net/dJLK3/1/) 如您所见，它工作得很好。

问题是：那些 div 和链接触发器来自数据库。今天我有1个，明天可能是10个......

我不知道如何转换它并使其工作，而无需正确的大量代码，如链接 1、链接 2、链接 3、链接 4、链接 5 等等......

任何人？:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T05:19:03.183

Use `data` attr and `jQuery.data`. [reference](http://api.jquery.com/jQuery.data/)

**Update**:
according to [this](https://stackoverflow.com/questions/11681704/make-jquery-toggle-work-with-dynamic-content/11681869#comment15487519_11681869) comment.

**html**

```
<div class="menu">
    <a href="#" class="link" data-slide-content="div1">Link1</a>
    <a href="#" class="link" data-slide-content="div2">Link2</a>
</div>
<div id="div1" class="slide"></div>
<div id="div2" class="slide"></div>​ 
```

**js**

```
$('.menu').on('click', '.link', function(){
    var id = $(this).data('slideContent');
    $('.slide').not('#' + id).slideUp(function() {
        $('#' + id).slideToggle();
    });
}); 
```

**​css**

```
.slide {
    display: none;
    height: 100px;
    width: 100px;
    position: fixed;
    top: 30px;
} 
```

[**demo**](http://jsfiddle.net/dJLK3/15/)

References:

*   **slideUp** - [http://api.jquery.com/slideUp/](http://api.jquery.com/slideUp/)

*   **slideToggle** - [http://api.jquery.com/slideToggle/](http://api.jquery.com/slideToggle/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T05:15:44.617

**更新**

这是一个可能的答案 - [FIDDLE - 更新 - 有新要求](http://jsfiddle.net/dJLK3/14/)

此处发布的代码以进行澄清

```
<div id='link_collection'>
    <a href="#" class="link">Link1</a>
    <a href="#" class="link">Link2</a>
</div>
<div id='div_collection'>
    <div class='div current'></div>
    <div class='div'></div>
</div> 
```

```
$(document).ready(function() {
    $('#link_collection').on('click', '.link', function() {
        var divCollection = $('#div_collection .div'),
            index = $(this).index(), hasClickedMeAgain,
            current = divCollection.filter('.current');

        hasClickedMeAgain = current.index() === index;
        if (hasClickedMeAgain){
            current.slideToggle();
            return false;
        }
        current.slideUp(function() {
            $(this).removeClass('current');
            divCollection.eq(index).addClass('current').slideToggle();
        });
    })
}); 
```

这样，您就不需要保留任何东西的标签。只需按照它们到达的顺序继续插入 div 和链接，然后代码就会自行处理。一切顺利。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T05:11:42.057

这对你有用吗？对所有这些都使用相同的类属性。并在 document.ready() 上有以下代码来分配点击事件：

HTML：

```
<a class="ui-link-option">Link 1</a>
<a class="ui-link-option">Link 2</a>

<div class="ui-link-option-text">Text Here 1</div>
<div class="ui-link-option-text">Text Here 2</div> 
```

Javascript：

```
$("a.ui-link-option").each(
  function (index) {
    var $this = $(this);
    $this.data("index", index);
    $this.bind("click", function(e) {
      var $this = $(this);
      var linkIndex = $this.data("index");
      $("div.ui-link-option-text").each(
        function (index) {
          if (index == linkIndex) {
            $(this).slideToggle();
          } else {
            $(this).hide();
          }
        }
      );
    });
  }
); 
```

# vbscript - >> 登录屏幕：从 Batch 到 VBscript 再到 Batch <<

> ID：11681706
> 
> 赞同：0
> 
> 时间：2012-07-27T05:00:39.890
> 
> 标签：vbscript, login-script, batch-file

我正在运行一个批处理脚本，并且用户必须在某个地方访问数据库。

这时，一个用vbscript制作的窗口会提示要求用户输入登录名和密码。（确定，取消按钮）

如果 OK 后凭据正确，则批处理将根据计划 A 继续，否则批处理将执行其他操作以执行计划 B。如果（取消），它将返回批处理和上面的菜单。

```
@echo off
:Ini
echo   [1] Access database
echo   [2] Main menu
echo:
set /p Quest= What do you prefer (1 / 2)?       
if not '%Quest%'=='' set Quest=%Quest:~0,1% 
if '%Quest%'=='1' goto VBS
if '%Quest%'=='2' goto BATCH
echo Invalid option, please try again
cls
goto Ini

:BATCH
echo Heading for main menu ...
goto Main

:VBS
cscript login.vbs
(...) 
```

-- 如何继续制作vbs？
-- 如何捕获用户信息，对其进行验证并返回到 planA 或 planB 的批次...
-- 如何用 ** ** 屏蔽该密码？

帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T12:50:51.587

最好完全切换到 vbscript（或者因为您似乎对 vbscript 很陌生，另一种更新更强大的语言同时保持它像 Ruby 一样简单）。您从批处理开始的所有内容也可以在 Vbscript 中完成，您可以使用菜单提示和密码输入框，如果必须屏蔽它，请使用浏览器作为 UI，如 Rob Vanderwoude 的脚本[http://www .robvanderwoude.com/vbstech_ui_password.php](http://www.robvanderwoude.com/vbstech_ui_password.php) 使用这种技术，您可以在 Internet Explorer 中完成所有 UI/GUI 和在 Vbscript 中的逻辑。

如果您决定保留批处理方法，您可以使用 Wscript.Quit X 退出 vbs 脚本，其中 x 是您在脚本完成时传递给 windows 的错误级别，然后您可以在批处理中捕获该错误级别。另一种方法是设置或更改环境变量以进行数据传输，最后您可以轻松地以脚本和批处理方式将数据写入文本文件，但批量解析更加困难。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T20:22:16.687

另一种选择是......

我在现有的 VBSscript 中为“Internet Explorer 版本”添加了代码：

**VBS SCRIPT - 命名为 Password.vbs（参见以上 Peter 链接中的完整脚本）**

```
strPw = GetPassword( "Please, type your password:" )
WScript.Echo "Your password is: " & strPw

Sub Submit_OnClick 
dim filesys, filetxt, FormContent
Set FormContent =  document.getElementById("strPw")
Set filesys = CreateObject("Scripting.FileSystemObject")
Set filetxt = filesys.OpenTextFile("C:\\temp.txt", 8, True)
filetxt.WriteLine(FormContent.value)
filetxt.Close
End Sub 
```

**批处理脚本**

```
@echo off

cscript Password.vbs

findstr /B /E /M %strPw% temp.txt 
If %ERRORLEVEL% EQU 0 echo Password matched! & goto EOF
If not %ERRORLEVEL% EQU 0 echo Invalid Password !! & goto EOF

:eof
pause 
```

文件 temp.TXT 应与用户在输入框中键入的信息一起发送到 c:\。该批次将读取此输入并与设置的密码进行比较并继续编码...

我怎样才能使这项工作？temp.TXT 没有生成等等...

BATCH 和 VBS 大师在那里，非常欢迎任何帮助解决这些问题！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T20:01:13.433

我找到了一个有趣的替代方案，如下所述 [http://www.computerhope.com/forum/index.php?topic=103686.0](http://www.computerhope.com/forum/index.php?topic=103686.0)

**嵌入在 BATCH 中的 VBSscript**

```
@echo off
:wscript.echo InputBox("Enter your password","VBScript-Batch")
findstr "^:" "%~sf0" | findstr /i /v ":Label" >temp.vbs
for /f "delims=" %%N in ('cscript //nologo temp.vbs') do set pass=%%N 
del temp.vbs

echo You entered %pass% 

:Label1

echo continue from here

If %pass%=="ok" echo Valid Password ! & goto EOF
If %pass%=="ok" echo Invalid Password !! & goto EOF

:EOF
pause 
```

如您所见，如果我们消除 " `& goto EOF`"，脚本运行良好。它将 VBS 输入“通过”发送到批处理，批处理回显“从这里继续”，其余代码从这里开始。

但是，它没有按应有的方式工作。有什么帮助可以使它**真正**起作用吗？

# canvas - J2ME 中的画布和 LWUIT

> ID：11681707
> 
> 赞同：1
> 
> 时间：2012-07-27T05:00:43.163
> 
> 标签：canvas, java-me, lwuit

在我的应用程序中，我必须在 Canvas类的选项卡视图中添加`TextField`, 。`Label``Button`

如何将 LWUIT 组件添加到 Canvas 类中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T07:08:25.073

我认为你可以`Form`用这种方式解决这座建筑。

似乎您希望在 . 的顶部有一个 TabView `Form`。为此，您可以使用 a`Form`和 a`BorderLayout`并放置`Label`，`TextField`并在`Button`内部 a`Container`并将其设置`Container`为. 这将是一个接近`NORTH``BorderLayout``TabView`

# iphone - 选择文本字段时集成表单不移动

> ID：11681709
> 
> 赞同：0
> 
> 时间：2012-07-27T05:00:48.933
> 
> 标签：iphone, ios, uiscrollview

我在 UIViewController 中嵌入了一个 ScrollView，其中包含多个文本字段，这些文本字段将作为一个简单的表单来收集用户数据（姓名、电子邮件等）。The problem is that when a text field is selected and the keyboard slides up, the text field is obscured by the keyboard. 如何将文本字段滑回视图，以便用户可以清楚地看到他们用作输入的内容？
任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T05:04:38.710

查看[本教程](http://cocoawithlove.com/2008/10/sliding-uitextfields-around-to-avoid.html)“滑动 UITextFields 以避开键盘” - 它应该为您提供所需的一切 :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T05:08:21.980

嗨，您必须检查 uikeyboard 可见性（请参阅这篇文章[如何以编程方式检查 iphone 应用程序中是否存在键盘？](https://stackoverflow.com/questions/1490573/how-to-programatically-check-whether-a-keyboard-is-present-in-iphone-app)），然后为选定的文本字段调用 scrollRectToVisible。如果你在谷歌上搜索 uikeyboard 和 scrollRectToVisible 你会发现很多关于这个问题的教程......

# java - 在 JTable 中移动列后设置列索引

> ID：11681711
> 
> 赞同：1
> 
> 时间：2012-07-27T05:00:51.333
> 
> 标签：java, swing, jtable

我正在使用`JTable`，我需要允许移动它的列。但是问题来了。一旦他们重新排列，就好像他们只改变了内容和标题。但我也需要更改他们的索引。

为了更清楚地说明这一点，我将举一个例子。假设我的第一列称为“名称”。调用“setName()”方法时，名称必须始终位于该列，无论该列在哪里。但不是第一列..希望你明白我的意思！

我已经写完了所需的方法。希望有一种方法可以在不触及完成的方法的情况下实现这一目标。

任何帮助深表感谢！！！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-27T06:28:25.467

> 为了更清楚地说明这一点，我将举一个例子。假设我的第一列称为“名称”。调用“setName()”方法时，名称必须始终位于该列，无论该列在哪里。但不是第一列..希望你明白我的意思！

如果您想更改数据，只需`TableModel`直接更改底层证券。中的列的顺序永远不会改变，`TableModel`只有在视图（`JTable`）中这些列才被重新排序。

如果您确实想浏览表格，则必须使用@MadProgrammer 提到的可用`JTable#convertColumnIndexToModel`(view -> model) 和(model->view) 方法将“view-coordinates”转换为“model-coordinates” `JTable#convertColumnIndexToView`.

您当然不应该更新您在其中一条评论中提到的`setValueAt`方法。`TableModel`如前所述，`TableModel`不会改变列的顺序，所以`setValueAt`应该总是用“模型坐标”调用，因此不需要转换那些

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-27T05:08:22.320

哦，是的，我喜欢这个，它总是让我感动；）

查看[JTable.convertColumnIndexToModel(int viewColumnIndex)](http://docs.oracle.com/javase/7/docs/api/javax/swing/JTable.html#convertColumnIndexToModel%28int%29)和[JTable.convertColumnIndexToView(int modelColumnIndex)](http://docs.oracle.com/javase/7/docs/api/javax/swing/JTable.html#convertRowIndexToModel%28int%29)

本质上，您需要将列索引与视图索引相互转换。

你不应该担心这个，`TableModel`因为它会照顾你我的`JTable`。

您将遇到类似的问题`RowSorter`

# java - 如何让 spring JdbcTemplate 读取_未提交？

> ID：11681713
> 
> 赞同：8
> 
> 时间：2012-07-27T05:01:08.767
> 
> 标签：java, spring, jdbc, jdbctemplate, spring-jdbc

首先，我不能使用声明性`@Transactional`方法，因为应用程序有多个 JDBC 数据源，我不想对细节感到厌烦，但只要说 DAO 方法传递了正确的数据源以执行逻辑就足够了. 所有 JDBC 数据源都具有相同的模式，它们是分开的，因为我正在为 ERP 系统公开其余服务。

由于这个遗留系统有很多我无法控制的长期锁定记录，所以我想要脏读。

使用 JDBC 我将执行以下操作：

```
private Customer getCustomer(DataSource ds, String id) {
    Customer c = null;
    PreparedStatement stmt = null;
    Connection con = null;
    try {
        con = ds.getConnection();
        con.setTransactionIsolation(Connection.TRANSACTION_READ_UNCOMMITTED);
        stmt = con.prepareStatement(SELECT_CUSTOMER);
        stmt.setString(1, id);
        ResultSet res = stmt.executeQuery();
        c = buildCustomer(res);
    } catch (SQLException ex) {
        // log errors
    } finally {
        // Close resources
    }
    return c;
} 
```

好吧，我知道有很多样板。`JdbcTemplate`因此，自从我使用弹簧以来，我就已经尝试过了。

使用 JdbcTemplate

```
private Customer getCustomer(JdbcTemplate t, String id) {
    return t.queryForObject(SELECT_CUSTOMER, new CustomerRowMapper(), id);
} 
```

好多了，但它仍然使用默认的事务隔离。我需要以某种方式改变这一点。所以我考虑使用`TransactionTemplate`.

```
private Customer getCustomer(final TransactionTemplate tt,
                             final JdbcTemplate t,
                             final String id) {
    return tt.execute(new TransactionCallback<Customer>() {
        @Override
        public Customer doInTransaction(TransactionStatus ts) {
            return t.queryForObject(SELECT_CUSTOMER, new CustomerRowMapper(), id);
        }
    });
} 
```

但是如何在这里设置事务隔离呢？我在回调或执行此操作的任何地方都找不到它`TransactionTemplate`。

我正在阅读 Spring in Action，第三版，其中解释了我所做的，尽管关于事务的章节继续使用带有注释的声明性事务，但如前所述，我不能使用它，因为我的 DAO 需要确定运行时根据提供的参数使用哪个数据源，在我的例子中是国家代码。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-27T05:41:37.827

我目前已经通过`DataSourceTransactionManager`直接使用解决了这个问题，尽管看起来我并没有像我最初希望的那样节省那么多的样板。别误会，它更干净，虽然我还是忍不住觉得一定有更简单的方法。我不需要读取事务，我只想设置隔离。

```
private Customer getCustomer(final DataSourceTransactionManager txMan,
                             final JdbcTemplate t,
                             final String id) {
    DefaultTransactionDefinition def = new DefaultTransactionDefinition();
    def.setIsolationLevel(TransactionDefinition.ISOLATION_READ_UNCOMMITTED);

    TransactionStatus status = txMan.getTransaction(def);
    Customer c = null;
    try {
        c = t.queryForObject(SELECT_CUSTOMER, new CustomerRowMapper(), id);
    } catch (Exception ex) {
        txMan.rollback(status);
        throw ex;
    }
    txMan.commit(status);
    return c;
} 
```

我仍然会暂时不回答这个问题，因为我真的相信一定有更好的方法。

参考[Spring 3.1.x 文档 - 第 11 章 - 事务管理](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/transaction.html#transaction-programmatic-ptm)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-08-21T07:48:09.637

使用`TransactionTemplate`这里的帮助，您需要适当地配置它。交易模板还包含交易配置。实际上`TransactionTemplate`延伸`DefaultTransactionDefinition`。

所以在你的配置中的某个地方你应该有这样的东西。

```
<bean id="txTemplate" class=" org.springframework.transaction.support.TransactionTemplate">
  <property name="isolationLevelName" value="ISOLATION_READ_UNCOMMITTED"/>
  <property name="readOnly" value="true" />
  <property name="transactionManager" ref="transactionManager" />
</bean> 
```

如果您随后将此 bean 注入您的类中，您应该能够使用`TransactionTemplate`您之前发布/尝试过的基于代码。

但是，可能有更好的解决方案可以清理您的代码。对于我从事的一个项目，我们的设置与您的类似（单个应用程序多个数据库）。为此，我们编写了一些 spring 代码，它们基本上在需要时切换数据源。更多信息可以在[这里](http://mdeinum.wordpress.com/2007/01/05/one-application-per-client-database/)找到。

如果这对您的应用程序来说过于牵强或过度杀伤力，您也可以尝试使用 Spring's [`AbstractRoutingDataSource`](http://static.springsource.org/spring/docs/current/javadoc-api/org/springframework/jdbc/datasource/lookup/AbstractRoutingDataSource.html)，它基于查找键（在您的情况下为国家代码）选择要使用的正确数据源。

通过使用这两种解决方案中的任何一种，您都可以开始使用 springs[声明式事务](https://docs.spring.io/spring/docs/current/spring-framework-reference/htmlsingle/#transaction-declarative)管理方法（这应该会大大清理您的代码）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-03-10T13:32:51.173

定义一个代理数据源，类为 org.springframework.jdbc.datasource.LazyConnectionDataSourceProxy 并设置事务隔离级别。通过 setter 或构造函数注入实际数据源。

```
<bean id="yourDataSource" class="org.springframework.jdbc.datasource.LazyConnectionDataSourceProxy">
    <constructor-arg index="0" ref="targetDataSource"/>
    <property name="defaultTransactionIsolationName" value="TRANSACTION_READ_UNCOMMITTED"/>
</豆>

```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-12-07T17:59:01.860

如果不使用 Spring 提供的“事务”抽象级别，我不确定您是否可以做到这一点。

构建您的 transactionTemplate 的更“无 xml”可能是这样的。

```
private TransactionTemplate getTransactionTemplate(String executionTenantCode, boolean readOnlyTransaction) {
    TransactionTemplate tt = new TransactionTemplate(transactionManager);
    tt.setReadOnly(readOnlyTransaction);
    tt.setIsolationLevel(TransactionDefinition.ISOLATION_READ_UNCOMMITTED);
    tt.setPropagationBehavior(TransactionDefinition.PROPAGATION_REQUIRES_NEW);
    return tt;
} 
```

在任何情况下，我都会“利用”`@Transactional`指定适当事务管理器的注释，并与单独的数据源绑定。我已经为多租户应用程序做到了这一点。

用法：

```
@Transactional(transactionManager = CATALOG_TRANSACTION_MANAGER, 
    isolation = Isolation.READ_UNCOMMITTED, 
    readOnly = true)
public void myMethod() {
  //....
} 
```

bean(s) 声明：

```
public class CatalogDataSourceConfiguration {

    @Bean(name = "catalogDataSource")
    @ConfigurationProperties("catalog.datasource")
    public DataSource catalogDataSource() {
        return DataSourceBuilder.create().build();
    }

    @Bean(name = ENTITY_MANAGER_FACTORY)
    public EntityManagerFactory entityManagerFactory(
            @Qualifier("catalogEntityManagerFactoryBean") LocalContainerEntityManagerFactoryBean emFactoryBean) {
        return emFactoryBean.getObject();
    }

    @Bean(name= CATALOG_TRANSACTION_MANAGER)
    public PlatformTransactionManager catalogTM(@Qualifier(ENTITY_MANAGER_FACTORY) EntityManagerFactory emf) {
        JpaTransactionManager transactionManager = new JpaTransactionManager();
        transactionManager.setEntityManagerFactory(emf);
        return transactionManager;
    }

    @Bean
    public NamedParameterJdbcTemplate catalogJdbcTemplate() {
        return new NamedParameterJdbcTemplate(catalogDataSource());
    }

} 
```

# java - 使用线性规划 (LP) 的广义负载平衡 (GLB)

> ID：11681715
> 
> 赞同：5
> 
> 时间：2012-07-27T05:01:40.793
> 
> 标签：java, algorithm, implementation, load-balancing

在我的一个项目中 - 我有一个场景，我需要实现一种能够进行负载平衡的算法。现在，与 CS 理论中存在的一般负载平衡问题不同（这是 NP 难题）——任务是在 N 个服务器中分配 M 个负载（M >> N），以使任何一台服务器中的最大负载最小化，我正在处理的案例更通用一些。在我的情况下，负载平衡问题在某种意义上更通用 - 它具有更多形式的约束 - 这样和这样的作业只能分配给这样的服务器（例如，作业 M_{i} 有一些特殊的安全要求，因此只能在安全服务器 N_{j} 上分配/执行。

现在我查看了 Kleinberg/Tardos 的书，发现了一节 (11.7) 关于更通用的负载平衡问题（带约束的负载平衡），我发现这个问题与我所处的情况完全匹配。通用负载平衡问题已从 IP 转换为 LP，这是利用 LP 可能导致将作业部分分配给机器的事实，这些机器后来被四舍五入，为该过程增加了额外的 O(MN) 时间。然后，该近似解已显示在可能的最小值的 2 倍以内。

有人可以指出一些 C/Java/Python/MATLAB 代码已经实现了这个算法吗？由于 KL 书几乎没有给出任何示例或示例伪/实际代码，因此有时很难将算法完全内化。同样对于问题的线性规划部分 - 什么样的实现适合它 - 单纯形/内点？当这个 LP 部分的复杂性被添加到问题中（部分重新分配部分）时，它会有多大的不同？不幸的是，KL 书在这些方面不是很透彻。

一些示例 C/Java/Python/MATLAB 代码（或代码指针）显示了这个完整算法的一些实际实现，这将非常有帮助。

编辑：原始论文是“David B. Shmoys, Éva Tardos: An approximation algorithm for the generalized assignment problem. Math. Program. 62: 461-474 (1993)”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T19:57:21.357

我这样做的一种方法是根据每台机器上的当前负载进行负载平衡。因此，如果有三台机器 A、B、C ...... A 的负载为 10，B 的负载为 5，C 的负载为 2，那么下一个任务（假设负载为 3）应该去 C(3+2 = 5 < 所有其他组合)。在相等的情况下，首先开始的任务通常首先完成（至少在大多数情况下）从每台机器中删除最旧的任务并重复上述过程......递归执行此操作

# objective-c - NSTextView 的自定义对焦环

> ID：11681718
> 
> 赞同：0
> 
> 时间：2012-07-27T05:01:52.733
> 
> 标签：objective-c, cocoa, osx-lion

我可以通过子类化滚动视图来绘制自定义焦点环。我的问题是，如何测试 textVeiw（即在 scrollView 内）是否具有焦点，以更改焦点环。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T05:52:38.797

您可以子类化文本视图并覆盖 becomeFirstResponder。当文本视图成为第一个响应者时，将调用该方法，方法是单击它或从另一个响应者中选择。

# cakephp - CakePHP如何为pdf文件创建路由

> ID：11681724
> 
> 赞同：0
> 
> 时间：2012-07-27T05:02:16.963
> 
> 标签：cakephp, routes, cakephp-1.3

我的 CAKEPHP webroot 中有一个 pdf 文档。我想创建一个到该 pdf 文件的路径，名称为`/mydoc`. 我正在使用`CAKEPHP 1.3`

当我们输入`example.com/mydoc`它应该打开那个pdf。

任何直接写直接的方式，`route`不用 and 就可以`controller`实现`action`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T08:21:36.687

如果您使用的是路由，则必须调用一个控制器，您可以在其中使用 Cake Media View 输出 PDF。不过，这似乎有点矫枉过正。相反，只需将 URL 重写规则添加到`app/webroot/.htaccess`：

```
RewriteRule ^/mydoc$ files/the_file.pdf 
```

（未经测试，可能需要一些摆弄。）这种方式文件下载由网络服务器直接处理，无需通过 Cake。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-05-10T14:11:49.947

从 CakePHP 2.9 开始，您可以将以下内容放入您的 routes.php 文件中。

```
Router::redirect('/mydoc', 'files/mydoc.pdf'); 
```

# php - 我想在php中将ppt文件转换为pdf？

> ID：11681727
> 
> 赞同：-1
> 
> 时间：2012-07-27T05:03:13.513
> 
> 标签：php, powerpoint

实际上我必须在浏览器中显示 ppt 文件，但它提供了下载选项而不是显示。所以我使用它来转换为 pdf 格式，以便浏览器显示它并限制用户下载

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T05:09:25.080

你为什么不使用谷歌文档或 HTML5 演示系统在这里阅读更多 [http://www.sitepoint.com/5-free-html5-presentation-systems/](http://www.sitepoint.com/5-free-html5-presentation-systems/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T06:33:17.167

如果您将 Flash 播放器与外部数据源（如不可缓存的流视频）一起使用，则可以限制用户下载。PDF和图片即使放在“iframe”中，也可以自由下载，屏蔽“mouseclick”和“drag-and-drop”事件。顺便说一句，如果您可以在浏览器中看到它，那么您已经在系统缓存中拥有它的副本。对不起。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T06:23:04.093

you may alternatively try saving the ppt as image by `File - Save as - Save as type` and show the image in your browser.

**NB**: You can't restrict the user from downloading. Alternatively, you can show images to registered users.

# ios - iOS - 动画 - 图像出圈

> ID：11681731
> 
> 赞同：1
> 
> 时间：2012-07-27T05:03:56.033
> 
> 标签：ios, uiview, uiimageview, uiimage, uiviewanimation

我有一种情况，我想要一个看起来像图像从对象中出来/弹出的动画或另一个有圆圈的图像。我知道如何制作从矩形出来的图像，但在这里我有一个圆圈。情况就像，有人从窗外跳出来，或者说小鸡/小鸟从蛋里出来。

任何帮助或建议或方向都将是非常可观的。

谢谢。

编辑：在这里我附上图像，鸡蛋是背景，当我点击/触摸一个鸡蛋时，男孩从鸡蛋中出来并带有动画。

![在此处输入图像描述](../Images/957df250921f18d72c6b225e6a4999dd.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T07:41:34.860

对于上面的示例，您应该有三个不同的图像：

*   一个用于鸡蛋的背面（内部）
*   一个给从蛋里出来的家伙
*   一个用于鸡蛋的前面（外面）

然后您将所有三个图像按该顺序（从下到上）放置，以便隐藏第三个图像后面的那个人的部分。然后你简单地为这个人图像的位置设置动画，让它看起来像是从鸡蛋里跳出来的。

# c# - 在 app.config 中存储关联数组的最佳方式

> ID：11681733
> 
> 赞同：0
> 
> 时间：2012-07-27T05:04:02.040
> 
> 标签：c#, configuration, app-config, system.configuration

我最近一直在研究我的软件，我一直想知道存储关联数组的最佳方法是什么。

我唯一能想到的就是做这样的事情：

```
<add key="disks" value="C|1|10,D|2|20,E|1|5,Z|1|3"/> 
```

但这并没有在我的配置文件中提供很多可读性，我希望我的配置文件是可读的，因为它是一个控制台应用程序。

这是因为我编写了一个程序来检查 app.config 文件中指定的磁盘的磁盘空间，但我想要不同磁盘的不同阈值。

你会怎么解决？这是我当前配置文件的一部分。

```
<!-- DISK FEATURE SETTINGS -->
  <!-- Type 1 is threshold by percentage and type 2 is threshold by a certain limit -->
  <add key="threshold_type" value="1" />
  <add key="threshold_limit" value="0,1" />
  <!-- Space_type defines if you want to limit using kilobytes (1), megabytes (2) or gigabytes (3) if using threshold_type 2 -->
  <add key="space_type" value="3" />
  <!-- Put the disks here delimited by a comma like this: C,D,E -->
  <add key="disks" value="C,D,E,Z"/>
<!-- SERVICE FEATURE SETTINGS -->
  <!-- Put the services here delimited by a comma like this: C,D,E -->
  <add key="services" value="spooler,ekrn,RadeonPro Support Service,TeamViewer6"/>
  <!-- Put this on 1 if you want to log your output to a text file -->
  <add key="logging" value="1"/> 
```

我想对我的 performancecounter 程序使用相同的原理，该程序使用 perfmon 计数器获取一些数据并将其存储在文本文件中。

我希望人们可以在这里帮助我一点:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-27T05:33:48.197

我建议您创建自己的配置部分。自定义配置提供了更高的可读性和类型安全性。以下是创建自定义配置的链接 [http://msdn.microsoft.com/en-us/library/2tw134k3.aspx](http://msdn.microsoft.com/en-us/library/2tw134k3.aspx)和 [http://haacked.com/archive/2007/03/11/custom-configuration-sections-in -3-easy-steps.aspx](http://haacked.com/archive/2007/03/11/custom-configuration-sections-in-3-easy-steps.aspx)（旧的但易于理解）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T05:26:15.883

就标准配置机制与 XML 序列化一起使用而言，在 App.config 中存储字典的最佳（以及，恕我直言，明智的）方式是`List<KeyValuePair<K,V>>`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-12T10:56:07.947

您可能想使用 system.collection 或 List<> 中的 Hashtable

以下是哈希表的一些指针， [http://www.dotnetperls.com/hashtable](http://www.dotnetperls.com/hashtable) [http://www.tutorialspoint.com/csharp/csharp_hashtable.htm](http://www.tutorialspoint.com/csharp/csharp_hashtable.htm)

我希望这有帮助！！谢谢 ：）

# java - 在 xml 版本 1.1 的 CDATA 部分中跳过 ]]>

> ID：11681734
> 
> 赞同：0
> 
> 时间：2012-07-27T05:04:24.287
> 
> 标签：java, xml, parsing, xml-parsing, cdata

我正在使用 CDATA 部分，但文本包含一些字符，因此它正在关闭并且我正在解析异常。

```
<xyz><![CDATA[\..\..\\..\..\\..\..\\..\..\\..\..\\\boot.ini]]>&#0;</xyz> 
```

我从某个站点找到了以下代码：

```
// Add a CDATA section to the root element
Element element = doc.getDocumentElement();
CDATASection cdata = doc.createCDATASection("data");
element.appendChild(cdata);

// If "]]>" appears in the text, two CDATA sections will be written out
cdata = doc.createCDATASection("more]]>data");
element.appendChild(cdata); 
```

使用上述逻辑的问题是我不知道我从 DB 读取的哪个元素将包含“]]>”，以便我可以编写两个 CDATA 部分。

在这方面需要你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T10:33:24.327

一个非常常见的错误是，您可以简单地通过`<![CDATA[`在开头和`]]>`结尾添加任意文本来将任意文本放入 CDATA 部分。您需要先检查数据是否包含`]]>`. 如果是这样，通常的补救措施是在第一个 ']' 之后将其拆分，因此如果内容是`A]]>B`，则将其写为`<![CDATA[A]]]><![CDATA[]>B]]>`.

避免此问题的一个好方法是避免“手动”序列化 XML，而是使用序列化库来完成这项工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T05:31:03.210

使用 CDATA 部分转义任意文本很容易出错，因为它们不能嵌套。

改为使用[实体引用](http://en.wikipedia.org/wiki/List_of_XML_and_HTML_character_entity_references)来转义文本。

但是，如果您真的想使用 CDATA 部分，维基百科页面的[这个部分可能会有所帮助。](http://en.wikipedia.org/wiki/CDATA#Uses_of_CDATA_sections)

# jquery - 将动态和固定 div 居中

> ID：11681737
> 
> 赞同：0
> 
> 时间：2012-07-27T05:04:38.990
> 
> 标签：jquery, css

我不擅长css，我已经花了很多时间来做这件事，我想将一个固定/动态大小的div居中。就像是

```
<div>
    // Imagine to have a multiple images here, size is 100x100\. 
    // When I click on the image (I am using jquery for this), #fade will appear and a window 
    // that contain the original size of the image.
    <img class="picture" src="picture.jpg" width="100" height=100"/>
</div>
<div id="fade"></div>
<div class="imgWindow">
    <img src="picture.jpg"/> // original size
</div> 
```

css

```
#fade {
    display: none;
    background: black;
    opacity:0.4;
    filter:alpha(opacity=50);
    z-index: 10;
    position: fixed;
    left: 0; top: 0;
    width: 100%; height: 100%;
}

.imgWindow {
    width: 640px;
    height: 422px;
    background: white;
    position: fixed;
    margin-left: 10%;
    margin-top: 5%;
    z-index: 11;
    left: 0; top: 0;
} 
```

即使我重新调整浏览器窗口的大小，图像窗口也应该居中。请帮忙，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T05:14:52.440

当您使用 CSS 属性 " `position`" 时，您无法将元素居中，除非调整您使用的其他属性。您应该成对使用它们：

尝试

```
img{
width: XXpx;
height: YYpx;
position: fixed;
top: YY%;
left: XX%;
border: 0;
z-index: 1; /* optional */
} 
```

[http://www.wpdfd.com/editorial/thebox/de](http://www.wpdfd.com/editorial/thebox/de) ...</p>

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T05:13:10.717

我宁愿去 jquery ..这个 jquery 函数将始终居中图像

```
jQuery.fn.center = function () {
        this.css("position","absolute");
        this.css("top", (($(window).height() - this.outerHeight()) / 2) + $(window).scrollTop() + "px");
        this.css("left", (($(window).width() - this.outerWidth()) / 2) + $(window).scrollLeft() + "px");
        return this;
    } 
```

# asp.net - 如何在 ASP.NET mvc4 中添加新页面？

> ID：11681739
> 
> 赞同：9
> 
> 时间：2012-07-27T05:04:50.370
> 
> 标签：asp.net, asp.net-mvc-4

我想创建一个新项目，我想添加一个新页面，使用 Microsoft 示例网站作为起点。Microsoft 示例网站已经有一个 About 和一个 Contact 页面。

如何使用 ASP.NET mvc4 向示例网站添加新页面？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-27T05:09:34.990

在 ASP.NET MVC 中，您使用模型、控制器和视图。控制器是包含称为操作的方法的类。每个操作都用作给定用户请求的入口点。此操作将对模型执行任何必要的处理并返回一个视图。所以基本上你将从定义一个控制器开始（如果还没有完成）并向它添加动作：

```
public class HomeController: Controller
{
    public ActionResult Index()
    {
        return View();
    }

    public ActionResult SomeAction()
    {
        return View();
    }
} 
```

然后右键单击动作名称并选择添加->查看选项，这将为相应`~/Views`文件夹中的给定动作创建一个新视图。

我建议您从这里的基本教程开始：http: [//asp.net/mvc](http://asp.net/mvc)

# forms - 我必须如何验证客户帐户注册表单中的复选框？

> ID：11681743
> 
> 赞同：3
> 
> 时间：2012-07-27T05:05:26.767
> 
> 标签：forms, validation, magento

我是 magento 的新手。我必须如何验证客户帐户注册表单中的复选框？

哪个类用于验证magento中的复选框？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-27T11:07:35.037

在前端，您可以通过将它们添加到类来验证复选框`"required-entry"`

```
<input type="checkbox" id="something" name="something" value="1" title="something" class="checkbox required-entry"> 
```

您可以从[http://blog.speedupmate.com/post/4062082985/javascript-validation-methods-in-magento了解更多信息](http://blog.speedupmate.com/post/4062082985/javascript-validation-methods-in-magento)

# python - 使用 Python 将复杂的参数解析为 shell 脚本

> ID：11681746
> 
> 赞同：8
> 
> 时间：2012-07-27T05:05:38.857
> 
> 标签：python, bash, command-line-arguments

在编写 shell 脚本时，我经常发现自己大部分时间（尤其是在调试时）都在处理参数处理。我编写或维护的许多脚本很容易超过 80% 的输入解析和清理。我将其与我的 Python 脚本进行比较，其中[argparse](http://docs.python.org/library/argparse.html)为我处理大部分繁重的工作，并让我轻松构建复杂的选项结构和清理/字符串解析行为。

因此，我希望能够让 Python 完成这项繁重的工作，然后在我的 shell 脚本中获取这些经过简化和清理的值，而无需再担心用户指定的参数。

举一个具体的例子，我工作的许多 shell 脚本都被定义为以特定顺序接受它们的参数。您可以调用`start_server.sh --server myserver --port 80`但`start_server.sh --port 80 --server myserver`失败`You must specify a server to start.`- 它使解析代码更简单，但它几乎不直观。

因此，第一次通过的解决方案可能很简单，比如让 Python 接受参数，对它们进行排序（将它们的参数放在旁边）并返回排序后的参数。因此，shell 脚本仍然会进行一些解析和清理，但用户可以输入比 shell 脚本本机接受的更多的任意内容，例如：

`# script.sh -o -aR --dir /tmp/test --verbose`

```
#!/bin/bash

args=$(order.py "$@")
# args is set to "-a --dir /tmp/test -o -R --verbose"

# simpler processing now that we can guarantee the order of parameters 
```

这里有一些明显的限制，特别是`parse.py`无法区分带有参数的最终选项和索引参数的开始，但这似乎并不那么糟糕。

所以这是我的问题：**1）**是否有任何现有的（最好是 Python）实用程序可以通过比 bash 更强大的东西来启用 CLI 解析，然后可以在清理后由我的 bash 脚本的其余部分访问，或者**2）**以前有没有人这样做过? 是否有我不知道的问题、陷阱或更好的解决方案？愿意分享你的实现吗？

* * *

一个（非常不成熟的）想法：

```
#!/bin/bash

# Some sort of simple syntax to describe to Python what arguments to accept
opts='
"a", "append", boolean, help="Append to existing file"
"dir", str, help="Directory to run from"
"o", "overwrite", boolean, help="Overwrite duplicates"
"R", "recurse", boolean, help="Recurse into subdirectories"
"v", "verbose", boolean, help="Print additional information"
'

# Takes in CLI arguments and outputs a sanitized structure (JSON?) or fails
p=$(parse.py "Runs complex_function with nice argument parsing" "$opts" "$@")
if [ $? -ne 0 ]; exit 1; fi # while parse outputs usage to stderr

# Takes the sanitized structure and an argument to get
append=$(arg.py "$p" append)
overwrite=$(arg.py "$p" overwrite)
recurse=$(arg.py "$p" recurse)
verbose=$(arg.py "$p" verbose)

cd $(python arg.py "$p" dir)

complex_function $append $overwrite $recurse $verbose 
```

两行代码，以及对预期参数的简明描述，我们将进入实际的脚本行为。也许我疯了，但这似乎比我现在必须做的要好得多*。*

* * *

我已经看到[Parsing shell script arguments](https://stackoverflow.com/questions/4882349/parsing-shell-script-arguments)和类似这个 wiki page on [easy CLI argument parsing](http://mywiki.wooledge.org/BashFAQ/035)的东西，但是其中许多模式感觉笨重且容易出错，我不喜欢每次编写 shell 脚本时都必须重新实现它们，尤其是当Python、Java 等都有很好的参数处理库。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T22:19:06.703

**Edit:** *I haven't used it (yet), but if I were posting this answer today I would probably recommend [https://github.com/docopt/docopts](https://github.com/docopt/docopts) instead of a custom approach like the one described below.*

* * *

I've put together a short Python script that does most of what I want. I'm not convinced it's production quality yet (notably error handling is lacking), but it's better than nothing. I'd welcome any feedback.

It takes advantage of the [`set` builtin](http://www.gnu.org/software/bash/manual/html_node/The-Set-Builtin.html) to re-assign the positional arguments, allowing the remainder of the script to still handle them as desired.

**bashparse.py**

```
#!/usr/bin/env python

import optparse, sys
from pipes import quote

'''
Uses Python's optparse library to simplify command argument parsing.

Takes in a set of optparse arguments, separated by newlines, followed by command line arguments, as argv[2] and argv[3:]
and outputs a series of bash commands to populate associated variables.
'''

class _ThrowParser(optparse.OptionParser):
    def error(self, msg):
        """Overrides optparse's default error handling
        and instead raises an exception which will be caught upstream
        """
        raise optparse.OptParseError(msg)

def gen_parser(usage, opts_ls):
    '''Takes a list of strings which can be used as the parameters to optparse's add_option function.
    Returns a parser object able to parse those options
    '''
    parser = _ThrowParser(usage=usage)
    for opts in opts_ls:
        if opts:
            # yes, I know it's evil, but it's easy
            eval('parser.add_option(%s)' % opts)
    return parser

def print_bash(opts, args):
    '''Takes the result of optparse and outputs commands to update a shell'''
    for opt, val in opts.items():
        if val:
            print('%s=%s' % (opt, quote(val)))
    print("set -- %s" % " ".join(quote(a) for a in args))

if __name__ == "__main__":
    if len(sys.argv) < 2:
        sys.stderr.write("Needs at least a usage string and a set of options to parse")
        sys.exit(2)
    parser = gen_parser(sys.argv[1], sys.argv[2].split('\n'))

    (opts, args) = parser.parse_args(sys.argv[3:])
    print_bash(opts.__dict__, args) 
```

**Example usage:**

```
#!/bin/bash

usage="[-f FILENAME] [-t|--truncate] [ARGS...]"
opts='
"-f"
"-t", "--truncate",action="store_true"
'

echo "$(./bashparse.py "$usage" "$opts" "$@")"
eval "$(./bashparse.py "$usage" "$opts" "$@")"

echo
echo OUTPUT

echo $f
echo $@
echo $0 $2 
```

Which, if run as: `./run.sh one -f 'a_filename.txt' "two' still two" three` outputs the following (notice that the internal positional variables are still correct):

```
f=a_filename.txt
set -- one 'two'"'"' still two' three

OUTPUT
a_filename.txt
one two' still two three
./run.sh two' still two 
```

Disregarding the debugging output, you're looking at approximately four lines to construct a powerful argument parser. Thoughts?

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-19T12:15:55.417

有同样的需求，我最终为 bash 编写了一个受 optparse 启发的解析器（实际上在内部使用了 python）；你可以在这里找到它：

[https://github.com/carlobaldassi/bash_optparse](https://github.com/carlobaldassi/bash_optparse)

请参阅底部的 README 以获得快速解释。您可能想在以下位置查看一个简单的示例：

[https://github.com/carlobaldassi/bash_optparse/blob/master/doc/example_script_simple](https://github.com/carlobaldassi/bash_optparse/blob/master/doc/example_script_simple)

根据我的经验，它非常健壮（我是超级偏执狂）、功能丰富等，而且我在我的脚本中大量使用它。我希望它对其他人有用。欢迎反馈/贡献。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-27T06:01:17.110

您可能会利用 bash 中的关联数组来帮助实现您的目标。

```
declare -A opts=($(getopts.py $@))
cd ${opts[dir]}
complex_function ${opts[append]}  ${opts[overwrite]} ${opts[recurse]} \
                 ${opts[verbose]} ${opts[args]} 
```

为了使它工作，`getopts.py`应该是一个解析和清理你的参数的python脚本。它应该打印如下字符串：

```
[dir]=/tmp
[append]=foo
[overwrite]=bar
[recurse]=baz
[verbose]=fizzbuzz
[args]="a b c d" 
```

您可以留出值来检查选项是否能够被正确解析和清理。

从返回`getopts.py`：

```
[__error__]=true 
```

添加到 bash 脚本：

```
if ${opts[__error__]}; then
    exit 1
fi 
```

如果您更愿意使用 的退出代码`getopts.py`，您可以使用`eval`：

```
getopts=$(getopts.py $@) || exit 1
eval declare -A opts=($getopts) 
```

或者：

```
getopts=$(getopts.py $@)
if [[ $? -ne 0 ]]; then
    exit 1;
fi
eval declare -A opts=($getopts) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-04-13T09:43:59.703

我的问题的原始前提假设委托给 Python 是简化参数解析的正确方法。如果我们放弃语言要求，我们实际上可以在 Bash 中做得不错*，使用`getopts`和一点`eval`魔法：

```
main() {
  local _usage='foo [-a] [-b] [-f val] [-v val] [args ...]'
  eval "$(parse_opts 'f:v:ab')"
  echo "f=$f v=$v a=$a b=$b -- $#: $*"
}

main "$@" 
```

的实现`parse_opts`在[这个 gist](https://gist.github.com/dimo414/93776b78a38791ed1bd1bad082d08009)中，但基本方法是将选项转换为`local`变量，然后可以像平常一样处理。所有标准`getopts`样板都被隐藏起来，并且错误处理按预期工作。

因为它`local`在函数中使用变量，`parse_opts`不仅对命令行参数有用，它还可以与脚本中的任何函数一起使用。

* * *

[* 我说“体面的工作”是因为 Bash`getopts`是一个相当有限的解析器，并且只支持单字母选项。优雅、富有表现力的 CLI 仍然可以更好地用 Python 等其他语言实现。但是对于相当小的函数或脚本，这提供了一个很好的中间立场，而不会增加太多的复杂性或臃肿。]

# c++ - 比较两个人脸opencv

> ID：11681747
> 
> 赞同：3
> 
> 时间：2012-07-27T05:05:46.627
> 
> 标签：c++, c, image-processing, opencv, window

我是opencv的新手。我正在尝试制作一个程序，该程序从网络摄像头捕获视频并显示视频上的人脸是否存在于目录中。我已经完成了网络摄像头的面部检测。现在我只需要比较检测到的人脸与目录图像人脸的相似度。请帮帮我...我正在使用 C++ MSVC 2010 OpenCV 2.1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T05:08:18.077

您可以使用 OpenCV 的人脸检测方法。他们的网站上有一个非常好的教程。

[http://opencv.willowgarage.com/wiki/FaceDetection/](http://opencv.willowgarage.com/wiki/FaceDetection/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T11:39:39.973

你可以看到[libface](http://libface.sourceforge.net/file/Home.html)。它可以检测和识别人脸。

# jdbc - Cassandra JDBC 接口

> ID：11681750
> 
> 赞同：0
> 
> 时间：2012-07-27T05:06:10.620
> 
> 标签：jdbc, interface, cassandra

我正在尝试在 cassandra 数据库上执行 crud 数据库操作，但最终我遇到了一个问题，即 cassandra jdbc 驱动程序需要在数据库中使用 create columnfamily cql 命令创建预定义的列族定义。

如果我尝试插入一个新的 column-value ，那么插入语句也会失败，而不是在前面的 create columnfamily 语句中指定的。

我想知道这是正常行为还是出了什么问题。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T19:37:06.157

当您使用 cql 时，您必须先创建列定义。在后半部分这似乎有问题，因为无论是否定义，都可以随时插入任何键值。你能在这里显示代码以便我可以追踪问题吗

# jquery - Jquery .ajax 在 ie 中不起作用

> ID：11681754
> 
> 赞同：0
> 
> 时间：2012-07-27T05:06:21.837
> 
> 标签：jquery, ajax, internet-explorer

以下登录脚本在 Internet Explorer 中不起作用。它关心我到 login.php 并在那里返回错误/成功消息，而不是在原始页面上。对此问题的任何解释或解决方案将不胜感激。

```
//ajax login

$(document).ready(function() {
    $('#result').hide();
    $('#submitOne').click(function(e) {
        e.preventDefault();

    var errors = '';
    var required = ' is required';
    var username = $('form #username').val();
    var password = $('form #password').val();

    if (username == '') {
        errors += '<p> A username' + required + '</p>';
    }

    if (password == '') {
        errors += '<p> A password' + required + '</p>';
    }

    if (errors !== '') {
        $('form #result').removeClass().addClass('error').html('<strong>Please correct the errors below.</strong>' + errors).fadeIn('slow');
    }
    else {
        $('form #result').removeClass().addClass('loading').html('<strong>Working...</strong>').fadeIn('slow');
        var formData = $('form').serialize();
        submitForm(formData);
    }
});
});

function submitForm(formData)
{

    $.ajax
({

    type: 'POST',
    url: 'login.php',
    data: formData,
    dataType: 'json',
    cache: false,
    timeout: 10000,
    success: function(data) 
                {
                    $('form #result').removeClass().addClass((data.error === true) ? 'error' : 'success').html(data.msg).fadeIn('slow');

                    if($('form #result').hasClass('success'))
                    {
                        setTimeout("window.location.replace('admin.php')", 2000);

                    }
                },
    error: function(XMLhttpRequest, textStatus, errorThrown)
                {
                    $('form #result').removeClass().addClass('error')
                    .html('<p>There was a <strong> ' + errorThrown + ' </strong> error due to a <strong>' + textStatus + '</strong> condition </p>').fadeIn('slow');
                },
    complete: function(XMLhttpRequest, status)
    {
        $('form')[0].reset();
    }
});

}; 
```

万分感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T05:44:43.203

似乎您的表单是正常提交​​的，而不是使用 ajax，如果是这样，请尝试：

```
.....
$('#submitOne').click(function(e) {
    if (e.preventDefault) { 
       e.preventDefault(); 
    } 
    else { e.returnValue = false; } 
    //rest of your code 
```

# iphone - 适用于山狮的 iOS SDK

> ID：11681759
> 
> 赞同：1
> 
> 时间：2012-07-27T05:06:39.327
> 
> 标签：iphone, ios, macos, ios4, xcode4.3

我在我的 macbook 上从 Snow Leopard 升级到 Mountain Lion。在我的 macbook 中，我有 iOS SDK 4.3 和 Xcode 4.2。现在我正在为 Mountain Lion 下载 Xcode 4.4。

在我的 iMac 中，我有 OSX Lion，它有 iOS 5.1 SDK 和 Xcode 4.3。

我想知道的是我应该为我的 macbook 再次下载 iOS SDK 5.1 吗？或者我可以将开发者文件夹从我的 iMac 复制到 macbook 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T05:10:17.267

您可以复制下载的用于安装 SDK 的 App 文件。然后，该应用程序文件可以在不同的 Mac 系统上运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T05:10:20.950

您无法将它们分开，因此无论如何您最终都会下载它。无需从您的其他计算机复​​制它。

# flash - 在 ActionScript 中声明全局变量？

> ID：11681763
> 
> 赞同：-2
> 
> 时间：2012-07-27T05:07:04.853
> 
> 标签：flash, actionscript, actionscript-2

我在 ActionScript 中有一组类。我需要创建一个变量（可能的全局变量），以便我可以在项目中的所有类中使用相同的变量。如何创建这样的变量并以这种方式使用它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T09:03:23.080

首先，您可能不想要全局变量。对象是 AS3 中程序状态的封装，而对象是公认的做你想做的事情的方式。

即，您将拥有对象层次结构，而不是具有全局变量，其中与状态有关的数据位于层次结构的一个级别上。

AS3 没有任何处理全局变量的好工具，但有处理对象的中等高级工具，这就是不鼓励使用全局变量的原因。无论如何，你可以做的是这样的：

1.  有一个文件，其名称为您想要的变量名（例如 foo.as）。
2.  将它放在你的包的目录中（为此目的`tld.my.package`）。
3.  将以下代码放入文件中：

    `package tld.my.package { public var foo:Object; }`

在这里，您有一个全局变量。每个文件只能有一个，不能将其变成 set/get 对。

# python - 在 django 中返回多个 id

> ID：11681765
> 
> 赞同：0
> 
> 时间：2012-07-27T05:07:32.883
> 
> 标签：python, django

所以我把 django-polls 教程带进了一个简单的博客。有些帖子通过外键链接到他们的民意调查。我遇到的问题是当我“投票”或单击“再次投票”时，它会重新加载帖子，但会使用投票的 ID 重新加载。

例子：

```
post1 - linked to - poll1
post2 - no poll
post3 - linked to - poll2 
```

因此，当我在 post3 的投票中再次投票或单击投票时，它会加载 post2。

我需要获取帖子的 ID 和投票。

这是我的代码：models.py：

```
class Post(models.Model):
    title = models.CharField(max_length=60)
    description = models.CharField(max_length=200)
    body = models.TextField()
    created = models.DateTimeField(auto_now_add=True)

    def display_mySafeField(self):
        return mark_safe(self.body)

    def __unicode__(self):
        return self.title

class Poll(models.Model):
    question = models.CharField(max_length=200)
    total_votes = models.DecimalField(default=0.0, max_digits=5, decimal_places=2)
    post = models.ForeignKey(Post)
    voted = models.BooleanField(default=False)

    def __unicode__(self):
        return self.question

# Choice for the poll
class Choice(models.Model):
    poll = models.ForeignKey(Poll)
    choice = models.CharField(max_length=200)
    votes = models.DecimalField(default=0.0, max_digits=5, decimal_places=2)
    percentage = models.DecimalField(default=0.0, max_digits=5, decimal_places=2)

    def __unicode__(self):
        return self.choice 
```

视图.py：

```
def vote(request, poll_id):
    global choice
    p = get_object_or_404(Poll, pk=poll_id)
    try:
        selected_choice = p.choice_set.get(pk=request.POST['choice'])
    except (KeyError, Choice.DoesNotExist):
        # Redisplay the poll voting form.
        return render_to_response('post.html', {
            'poll': p,
            'error_message': "You didn't select a choice.",
            }, context_instance=RequestContext(request))
    else:
        selected_choice.votes += 1
        p.total_votes += 1
        selected_choice.save()
        p.voted = True
        p.save()

        choices = list(p.choice_set.all())
        for choice in choices:
            percent = choice.votes*100/p.total_votes
            choice.percentage = percent
            choice.save()

        return HttpResponseRedirect(reverse("blog.views.post", args=[poll_id]))

def vote_again(request, post_pk):
    try:
        p = get_object_or_404(Poll, pk=post_pk)
    except (KeyError, Poll.DoesNotExist):
    # Redisplay the poll voting form.
        return render_to_response('post.html', {
        'poll': p,
        'error_message': "You didn't select a choice.",
        }, context_instance=RequestContext(request))
    else:
        p.voted = False
        p.save()
    return HttpResponseRedirect(reverse("blog.views.post", args=[post_pk])) 
```

网址.py：

```
url(r'^revote/(\d+)/$', 'blog.views.vote_again'),
url(r'^polls/(?P<poll_id>\d+)/vote/$', 'blog.views.vote'), 
```

这一切都适用于第一个帖子和民意调查，但是当我想将民意调查添加到没有相同 pk 的帖子时它会崩溃。

任何帮助或方向将不胜感激。我已经搞砸了大约 2 个小时，这是 django 第一次让我感到沮丧。提前道歉，因为我 99% 确定这是一个愚蠢的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T05:49:27.467

`pk`表示主键。因此，您正在尝试获取其 id 与 post_pk 相同的轮询对象。

尝试，

```
p = get_object_or_404(Poll, post_id=post_pk) 
```

# ios - 与 XMPP 服务器断开连接

> ID：11681767
> 
> 赞同：1
> 
> 时间：2012-07-27T05:07:42.993
> 
> 标签：ios, objective-c, xmppframework

我正在使用 XMPPFramework 并使用自签名证书。我修改了设置使用

```
[settings setObject:[NSNumber numberWithBool:YES] forKey:(NSString *)kCFStreamSSLAllowsAnyRoot]; 
```

和

```
[settings setObject:[NSNumber numberWithBool:NO]
                         forKey:(NSString *)kCFStreamSSLValidatesCertificateChain]; 
```

我已经验证我可以使用 Psi 进行连接。有没有人看到这个错误？

```
XMPPAccountSession: xmppStream:socketDidConnect:
SEND: <?xml version='1.0'?>
SEND: <stream:stream xmlns='jabber:client' xmlns:stream='http://etherx.jabber.org/streams' version='1.0' to='senior'>
RECV: <stream:stream xmlns="jabber:client" xmlns:stream="http://etherx.jabber.org/streams" from="senior" id="3f557041-1a9f-4838-8e53-1c7d1b9720a9" version="1.0" stream1:lang="en"/>
RECV: <stream:features xmlns:stream="http://etherx.jabber.org/streams">
<ver xmlns="urn:xmpp:features:rosterver"/>
<starttls xmlns="urn:ietf:params:xml:ns:xmpp-tls"/>
<mechanisms xmlns="urn:ietf:params:xml:ns:xmpp-sasl"
><mechanism>PLAIN</mechanism>
<mechanism>ANONYMOUS</mechanism></mechanisms>
<register xmlns="http://jabber.org/features/iq-register"/>
<auth xmlns="http://jabber.org/features/iq-auth"/>
</stream:features>
SEND: <starttls xmlns='urn:ietf:params:xml:ns:xmpp-tls'/>
RECV: <proceed xmlns="urn:ietf:params:xml:ns:xmpp-tls"/>
SEND: <stream:stream xmlns='jabber:client' xmlns:stream='http://etherx.jabber.org/streams' version='1.0' to='senior'>
XMPPAccountSession: xmppStreamDidSecure:
XMPPAccountSession: xmppStreamDidDisconnect:withError:
Error Domain=NSPOSIXErrorDomain Code=54 "The operation couldn’t be completed. Connection reset by peer" 
```

# json - 如何解析 Json 数组

> ID：11681768
> 
> 赞同：-1
> 
> 时间：2012-07-27T05:07:45.317
> 
> 标签：json

```
${
   "1":{
      "vertical_id":"1",
      "vertical_name":"Men",
      "url_key":"men",
      "meta_title":"Online Shopping For Men - Buy Mens Clothes, Footwear & Accessories At Fetise ",
      "meta_description":null,
      "meta_keywords":"mens apparel, mens clothing, mens accessories online, online mens footwear store, gadgets online for men\r\n",
      "intro_banner_path":"",
      "intro_heading":"",
      "intro_subheading":"",
      "show_products":"1",
      "featured_event_count":"8",
      "is_active":"1",
      "sort_order":"1",
      "twitter_handle":"fetise",
      "facebook_page":"fetise",
      "verticalUrl":"http:\/\/www.fetise.com\/men",
      "verticalUrlComponent":"men\/"
   },
   "2":{
      "vertical_id":"2",
      "vertical_name":"Women",
      "url_key":"women",
      "meta_title":"Online Shopping for Women - Buy Womens Clothes, Footwear & Accessories At Fetise",
      "meta_description":null,
      "meta_keywords":"online womens clothing store, womens apparels online, ladies footwear and accessories store, ladies personal care products online, womens fashion clothes\r\n",
      "intro_banner_path":"",
      "intro_heading":"",
      "intro_subheading":"",
      "show_products":"1",
      "featured_event_count":"0",
      "is_active":"1",
      "sort_order":"2",
      "twitter_handle":"FetiseWomen",
      "facebook_page":"FetiseWomen",
      "verticalUrl":"http:\/\/www.fetise.com\/women",
      "verticalUrlComponent":"women\/"
   }} 
```

如何在 java 中解析这个 JSON？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T06:29:14.100

我使用过[GSON](http://code.google.com/p/google-gson/)和[Jackson](http://jackson.codehaus.org/)，最终选择了 Jackson。它更适合需要 JSON 解析的特定 java 项目，现在看起来更灵活和/或熟悉。

使用 Jackson [Tree Model](http://wiki.fasterxml.com/JacksonTreeModel)，在丢弃前导`$`（无效 JSON）后：

```
// input is your JSON object
ObjectMapper mapper = new ObjectMapper();

// could also use Jackson ObjectNodes:
JsonNode rootNode = mapper.readValue(input.getBytes(), JsonNode.class); 
JsonNode sub1 = rootNode.get("1");
JsonNode sub2 = rootNode.get("2");

if (sub1 != null)
{
    System.out.println("1.vertical_name: " + sub1.get("vertical_name"));
    System.out.println("1.meta_title: " + sub1.get("meta_title"));
}

if (sub2 != null)
{
    System.out.println("2.vertical_name: " + sub2.get("vertical_name"));
    System.out.println("2.meta_title: " + sub2.get("meta_title"));
} 
```

输出：

```
1.vertical_name: "Men"
1.meta_title: "Online Shopping For Men - Buy Mens Clothes, Footwear & Accessories At Fetise "
2.vertical_name: "Women"
2.meta_title: "Online Shopping for Women - Buy Womens Clothes, Footwear & Accessories At Fetise" 
```

您的输入 JSON 是特殊的，因为它似乎使用 JSON 对象作为 JSON 数组，外部对象具有 fields `1, 2, ...`。因此，上述方法将 JSON 解析为通用[`JsonNode`](http://jackson.codehaus.org/1.3.4/javadoc/org/codehaus/jackson/JsonNode.html)对象，尽管您也可以使用 Jackson 将其解析为 java `Maps`- 请参阅[Data Binding with Generics](http://wiki.fasterxml.com/JacksonInFiveMinutes#Data_Binding_with_Generics)。

导航生成的数据结构假设知道输入，即使用`JsonNode.get("1");`，但无论您如何表示 JSON，您都需要做出相同的假设。

您还可以使用[`JsonNode.iterator`](http://jackson.codehaus.org/1.3.4/javadoc/org/codehaus/jackson/JsonNode.html#iterator%28%29)来迭代未知数量的此类“索引”。如果您不知道, 等的数量`1`，这很有用。`2`

此外，您可以创建一个匹配每个子对象的 java 类，并使用 Jackson 在给定每个子对象的情况下创建该类的实例。请参阅[完整数据绑定 (POJO) 示例](http://wiki.fasterxml.com/JacksonInFiveMinutes#Full_Data_Binding_.28POJO.29_Example)。

# android - 我无法创建android项目？

> ID：11681769
> 
> 赞同：0
> 
> 时间：2012-07-27T05:07:46.487
> 
> 标签：android, eclipse

当我单击创建 android 新项目时，此窗口打开。即使无法执行此操作，我也已重新启动。错误图像是。![在此处输入图像描述](../Images/7261de60d3949e0b6a2f5cb10b6b1c2e.png)

当从帮助菜单中单击检查更新时，会出现此错误并弹出没有更新发现什么问题？![在此处输入图像描述](../Images/501045bc60ef3e92a5268d0831b2be8a.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T05:18:15.573

Your answer is in these three steps

**1.** goto window->Android SDK manager

![first](../Images/2b858d83e553e99a25c766bb42f14736.png)

**2.** Select Tools as in picture

![second](../Images/503cca78d9a4a8ae72899c2a2d4664ac.png)

**3.** then hit Install 2 packages at right bottom corner and let it be updated.

![third](../Images/bd0c876681cdfffa29623dc4d8a0e56c.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T05:15:16.670

按照官方指南更新或重新安装ADT插件怎么样？

[http://developer.android.com/sdk/installing/installing-adt.html](http://developer.android.com/sdk/installing/installing-adt.html)

问候

陈子腾

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T05:18:54.640

So you have to update Android SDK itself with new platform versions (the dialog you're not seeing) came out after the R20 SDK.

The easiest thing to do is go to the [SDK page](http://developer.android.com/sdk/index.html) and download the newest version of the SDK. From there you'll be able to follow the guide you mentioned without problem.

# php - 为文件添加下载选项

> ID：11681773
> 
> 赞同：1
> 
> 时间：2012-07-27T05:07:55.230
> 
> 标签：php, javascript, ajax

我正在尝试将一些详细信息附加到文件中并将其添加到下载选项中，为此我正在起诉 javascript 和 php。我将粘贴测试代码以显示我在做什么。

单击下载按钮时，它将触发 ajax 请求。

```
$.ajax({
    url:"php/test.php",
    type: 'POST',
    data: { totalQuery : test1, },

    success: function(finalEntityList)
    {
        document.location = 'data:Application/octet-stream,' +
        encodeURIComponent(finalEntityList);

    },

}); 
```

让我们假设 test.php 有一个单行代码

```
echo "Test". 
```

现在我想将其添加到文件中并使其可供下载。我使用了代码

```
 document.location = 'data:Application/octet-stream,' +
        encodeURIComponent(finalEntityList); 
```

bt 在文件下载到我的硬盘时使用它，它显示扩展名 .part 和 IVe 以使用 open with 选项并使用文本文件打开它.. 还有其他选项可以添加下载功能吗？在哪里可以指定文件扩展名和文件名？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T05:15:56.230

Don't use ajax, just use a normal link or `window.location.href =` and set the http headers in your php script to force the browser to save the file.

# android - ListView 行高太小

> ID：11681777
> 
> 赞同：2
> 
> 时间：2012-07-27T05:08:17.797
> 
> 标签：android, android-layout

下面是一个`ListView`太短的行的图像。我尝试了太多的组合，让我对 StackOverflow 感到沮丧。

![在此处输入图像描述](../Images/c4fad4c7be799869384d8c03cb71c41a.png)

我该如何解决这个问题并显示整行？这是该项目的 XML。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="fill_parent"
    android:weightSum="1">
    <LinearLayout android:id="@+id/item_left"
        android:layout_width="wrap_content"
        android:layout_height="fill_parent"
        android:paddingRight="2dp"
        android:paddingLeft="2dp"
        android:background="@drawable/item_left"
        android:layout_gravity="fill_vertical">
        <TextView
            android:id="@+id/status_day"
            android:layout_gravity="center_vertical"
            android:layout_width="40dp"
            android:layout_height="wrap_content"
            android:textColor="@color/item_left_text"
            android:textSize="25sp"/>
    </LinearLayout>

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:orientation="vertical"
        android:paddingLeft="2dp"
        android:background="@drawable/item_right"
        android:layout_weight="1">
            <TextView
                android:id="@+id/date"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:textColor="@color/item_right_text"
                android:text="" />

        <TextView
            android:id="@+id/message"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:textColor="@color/item_right_text"
            android:text="" />
    </LinearLayout>

    <ImageButton 
        android:id="@+id/options"
        android:background="@drawable/item_right"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:src="@drawable/ic_menu_moreoverflow_normal_holo_light"
        />

</LinearLayout> 
```

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-27T05:25:12.887

你能用这个吗，设置行布局高度

```
android:layout_height="?android:attr/listPreferredItemHeight" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-27T05:37:14.153

我将高度设置`ImageButton`为`match_parent`。

这奇怪地解决了这个问题。叹。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-27T05:50:40.257

您的布局应该符合您的要求，我粘贴的布局与您的布局不同，但与之相关，请检查

```
 <?xml version="1.0" encoding="utf-8"?>
  <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
     android:layout_width="fill_parent"
     android:layout_height="fill_parent"
     android:orientation="vertical" >
     <RelativeLayout
            android:id="@+id/relativeLayout1"
            android:layout_width="fill_parent"
            android:layout_height="60dp" >

       <ImageView
           android:id="@+id/ivArrow"
           android:layout_width="wrap_content"
           android:layout_height="wrap_content"
           android:layout_alignParentRight="true"
           android:layout_centerVertical="true"
           android:layout_marginRight="10dp"
           android:focusable="false"
           android:clickable="false"
           android:src="@drawable/arrow" />
       <RelativeLayout
           android:id="@+id/ivIcon"
           android:layout_width="wrap_content"
           android:layout_height="60dp"
           android:layout_alignParentLeft="true"
           android:layout_centerVertical="true"
           android:focusable="false"
           android:clickable="false"
           android:background="@drawable/oddnumbg" >

           <TextView
               android:id="@+id/tvNo"
               android:layout_width="wrap_content"
               android:layout_height="wrap_content"
               android:layout_centerHorizontal="true"
               android:layout_marginTop="15dp"
               android:textColor="@color/ReceiptNoLable"
               android:text="No." />

           <TextView
               android:id="@+id/tvReceiptNo"
               android:layout_width="wrap_content"
               android:layout_height="wrap_content"
               android:layout_centerInParent="true"
               android:singleLine="true"
               android:layout_below="@+id/tvNo"
               android:gravity="center"
               android:textColor="@color/ReceiptSavedColor"
               android:textSize="18dp"
               android:text="1234" />
           </RelativeLayout>

       <TextView
           android:id="@+id/tvSubName"
           android:layout_width="wrap_content"
           android:layout_height="wrap_content"
           android:layout_alignParentTop="true"
           android:layout_marginLeft="15dp"
           android:layout_marginTop="10dp"
           android:layout_toRightOf="@+id/ivIcon"
           android:text="RECEIVED FROM"
           android:gravity="center"
           android:focusable="false"
           android:clickable="false"
           android:textColor="@color/ReceiptNoLable"
            />

       <TextView
           android:id="@+id/tvName"
           android:layout_width="wrap_content"
           android:layout_height="wrap_content"
           android:layout_alignParentBottom="true"
           android:layout_toRightOf="@+id/ivIcon"
           android:layout_below="@+id/tvSubName"
           android:text="RECEIPT"
           android:layout_marginLeft="15dp"
           android:textColor="@color/ReceiptSavedColor"
           android:textSize="30dp"
           android:focusable="false"
           android:layout_toLeftOf="@+id/tvReceiptPrize"
           android:clickable="false"
           android:singleLine="true"
           android:textAppearance="?android:attr/textAppearanceLarge" />

       <TextView
           android:id="@+id/tvReceiptPrize"
           android:layout_width="wrap_content"
           android:layout_height="wrap_content"
           android:layout_centerVertical="true"
           android:layout_toLeftOf="@+id/ivArrow"
           android:background="@drawable/myreceiptprizebg"
           android:gravity="center"
           android:singleLine="true"
           android:layout_marginRight="5dp"
           android:textSize="20dp"
           android:textColor="#fff"
           android:text="$84.20" />

        </RelativeLayout>

  </LinearLayout> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-27T05:12:04.407

只需设置外部布局的高度，而不是使用`fill_parent`

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:awesome="http://schemas.android.com/apk/res-auto"
    android:layout_width="match_parent"
    android:layout_height=50dp <!-- or anything which fits --> 
```

# bash - Bash 循环遍历目录中的文件

> ID：11681781
> 
> 赞同：0
> 
> 时间：2012-07-27T05:08:28.160
> 
> 标签：bash, loops

我有一个由其他人创建的 bash 脚本，我需要对其进行一些修改。由于我是 Bash 新手，我可能需要一些常用命令的帮助。

该脚本只是循环遍历一个目录（递归地）以获得特定的文件扩展名。这是当前脚本：（runme.sh）

```
#! /bin/bash
SRC=/docs/companies/

function report()
{
    echo "-----------------------"
    find $SRC -iname "*.aws" -type f -print
    echo -e "\033[1mSOURCE FILES=\033[0m" `find $SRC -iname "*.aws" -type f -print |wc -l`
    echo "-----------------------"
exit 0
}

report 
```

我只需键入**#./runme.sh**即可看到所有扩展名为 .aws 的文件的列表

我的主要目标是限制搜索。（某些目录的文件太多）我想运行脚本，将其限制为 20 个文件。

我是否需要将整个脚本放入循环方法中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T05:27:07.017

这很简单——只要你想要前 20 个文件，只需将第一个`find`命令通过`head -n 20`. 但是当我在处理它时，我无法抗拒一点清理：正如所写，它运行`find`两次，一次打印文件名，一次计算文件名；如果要搜索的文件很多，这是浪费时间。其次，将脚本的实际内容包装在一个函数 ( `report`) 中没有多大意义，而拥有该函数`exit`（而不是`return`ing）则更没有意义。最后，我喜欢用双引号保护文件名，讨厌反引号（`$()`改用）。所以我冒昧地进行了一些清理：

```
#! /bin/bash
SRC=/docs/companies/

files="$(find "$SRC" -iname "*.aws" -type f -print)"
if [ -n "$files" ]; then
    count="$(echo "$files" | wc -l)"
else # echo would print one line even if there are no files, so special-case the empty list
    count=0
fi

echo "-----------------------"
echo "$files" | head -n 20
echo -e "\033[1mSOURCE FILES=\033[0m $count"
echo "-----------------------" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T05:31:29.253

使用`head -n 20`（按照彼得的建议）。附加说明：该脚本效率非常低，因为它运行`find`了两次。您应该考虑`tee`在命令第一次运行时使用 生成一个临时文件，然后计算该文件的行数并删除该文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T10:11:29.843

我个人更喜欢这样做：

```
files=0
while read file ; do
    files=$(($files + 1))
    echo $file
done < <(find "$SRC" -iname "*.aws" -type f -print0 | head -20)

echo "-----------------------"
find $SRC -iname "*.aws" -type f -print
echo -e "\033[1mSOURCE FILES=\033[0m" $files
echo "-----------------------" 
```

如果你只想有计数，你只能使用`find "$SRC" -iname "*.aws" -type f -print0 | head -20`

# json - 无法使用 mongoimport 插入 JSON

> ID：11681783
> 
> 赞同：1
> 
> 时间：2012-07-27T05:08:44.587
> 
> 标签：json, mongodb, upsert, mongoimport

我想使用 JSON 批量更新到 mongo 集合。

```
 $ mongoexport -d myDB -c myCollection
    connected to: 127.0.0.1
    { "_id" : "john", "age" : 27 } 
```

但是使用我在 mongo shell 中的语法会产生：

```
 0$ echo '{_id:"john", {$set:{gender:"male"}}' | mongoimport --upsert --upsertFields _id -d myDB -c myCollection
    connected to: 127.0.0.1
    Fri Jul 27 15:01:32 Assertion: 10340:Failure parsing JSON string near: , {$set:{g
    0x581a52 0x528554 0xa9f2e3 0xaa1593 0xa980cd 0xa9c062 0x3e7ca1ec5d 0x4fe239
    ...
    /lib64/libc.so.6(__libc_start_main+0xfd) [0x3e7ca1ec5d]  mongoimport(__gxx_personality_v0+0x3c9) [0x4fe239]
    exception:Failure parsing JSON string near: , {$set:{g

    imported 0 objects
    encountered 1 error 
```

当我在没有大括号的情况下尝试它时，它不会产生错误但不会更改表格：

```
 0$ echo '{_id:"john", $set:{gender:"male"}}' | mongoimport --upsert --upsertFields _id -d myDB -c myCollection
    connected to: 127.0.0.1
    imported 1 objects
    0$ mongoexport -d myDB -c myCollection
    connected to: 127.0.0.1
    { "_id" : "john", "age" : 27 }
    exported 1 records 
```

我到处搜索，但找不到使用 JSON 的示例。请帮忙！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T06:29:20.170

据我所知，MongoImport 不评估命令。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-27T09:37:46.057

只是为了补充安德烈的答案。

Mongoimport 采用每行包含 1 个 JSON/CSV/TSV 字符串的单个文件并将其插入。您可以从标准输出导入，但不能像上面那样作为命令导入。您可以按照[此处](http://www.mongodb.org/display/DOCS/Import+Export+Tools#ImportExportTools-Example%3aImportingwith%7B%7Bupsert%7D%7D)使用 mongoimport 执行 upsert 。

您可以使用[stoponError 选项](http://docs.mongodb.org/manual/reference/mongoimport/#cmdoption-mongoimport--stopOnError)运行 mongoimport ，这将强制 mongoimport 在遇到错误时停止。

这是 mongoimport 的完整[手册](http://docs.mongodb.org/manual/reference/mongoimport/)，作为仅供参考，mongoimport 不能可靠地保留所有丰富的 BSON 数据类型。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-20T12:43:23.240

Mongoimport 不接受诸如 $set 之类的修饰符。您将需要使用 mongo --eval 命令进行更新。

```
mongo myDB --eval 'db.myCollection.update({_id: "john"}, {$set:{gender:"male"}}, upsert=true)' 
```

希望这可以帮助。

# facebook-c#-sdk - FQL.Multiquery - 作为参数传递时的查询语法

> ID：11681786
> 
> 赞同：0
> 
> 时间：2012-07-27T05:09:11.267
> 
> 标签：facebook-c#-sdk, fql.multiquery

为一个简单的任务寻找一点帮助...... facebook 多查询的语法，您可以在其中将查询作为参数传递。

这是我的方法：

```
public dynamic FBFQL(string strQuery)
    {
        try
        {
            var fb = new FacebookClient(this.FacebookAccessToken);
            //dynamic objFQL = fb.Get("fql", new { q = strQuery });
            dynamic objFQL = fb.Get("fql", new { q = new { strQuery } });

            if (objFQL == null)
            {
                return null;
            }
            else
            {
                return objFQL;
            }
        }
        catch (FacebookApiException ex)
        {
            FacebookErrorHandler(ex);
            return null;
        }
    } //FB FQL 
```

还有我的查询语法”

```
string strQuery = "friendsMovies = \"SELECT page_id, uid FROM page_fan WHERE type='MOVIE' AND uid IN (SELECT uid2 FROM friend WHERE uid1=me()) ORDER BY page_id\"," +
" movieDetails = \"SELECT page_id, name, pic, page_url, fan_count, genre, starring, release_date FROM page WHERE page_id IN (SELECT page_id FROM #friendsMovies) ORDER BY page_id\""; 
```

但不幸的是，它给出了以下错误。我试了好几种方法都无济于事。我确定这很简单......我现在看不到它。

```
(OAuthException - #601) (#601) Parser error: unexpected 'friendsMovies' at position 0. 
```

在此先感谢乍得

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T16:50:07.653

想通了，也有命名查询：

调用方法并处理结果：

```
public List<FacebookMovie> GetMoviesLikedByFriends()
    {
        string strQuery0 = "SELECT page_id, uid FROM page_fan WHERE type='MOVIE' AND uid IN (SELECT uid2 FROM friend WHERE uid1=me()) ORDER BY page_id";
        string strQuery1 = "SELECT page_id, name, pic, page_url, fan_count, genre, starring, release_date FROM page WHERE page_id IN (SELECT page_id FROM #friendsMovies) ORDER BY page_id";

        Dictionary<string, object> dicQuery = new Dictionary<string, object>();
        dicQuery.Add("friendsMovies", strQuery0);
        dicQuery.Add("movies", strQuery1);

        FacebookSDKInterface objFQL = new FacebookSDKInterface();
        dynamic objMoviesFriendsLike = objFQL.FBMFQL(dicQuery);

        //To access a direct value: resultsMQFQL.data[0].fql_result_set[0].page_id

        if (objMoviesFriendsLike != null) // shouldn't you check objFNU for being null here instead?
        {
            IEnumerable<dynamic> friendsMovies = (IEnumerable<dynamic>)objMoviesFriendsLike.data[0].fql_result_set; // explicit cast might not be necessary
            IEnumerable<dynamic> movieDetails = (IEnumerable<dynamic>)objMoviesFriendsLike.data[1].fql_result_set; // explicit cast might not be necessary

            IEnumerable<FacebookMovie> objMyFriendsMovies = 
                from Movie in movieDetails
                join FriendsMovies in friendsMovies on (string)Movie.page_id equals (string)FriendsMovies.page_id
                group FriendsMovies by new
                {
                    ID = Movie.movie_id,
                    Link = Movie.page_url,
                    MovieName = Movie.name,
                    TotalLikes = Movie.fan_count,
                    Genre = Movie.genre,
                    Starring = Movie.starring,
                    ReleaseDate = Movie.release_date,
                    PicURL = Movie.pic
                } into grp
                where grp.Count() >= 2 //at least 2 friends must have liked it to show up
                select new FacebookMovie()
                {
                    Source = "Facebook",
                    ID = (string)grp.Key.ID,
                    SourceURL = (string)grp.Key.Link,
                    Name = (string)grp.Key.MovieName,
                    Picture = (string)grp.Key.PicURL,
                    TotalLikes = (long)grp.Key.TotalLikes,
                    Genre = (string)grp.Key.Genre,
                    Starring = (string)grp.Key.Starring,
                    ReleaseDate = (string)grp.Key.ReleaseDate,
                    FriendLikes = (int)grp.Count()
                };

            objMyFriendsMovies = objMyFriendsMovies.OrderByDescending(p => p.FriendLikes);

            return objMyFriendsMovies.ToList();
        }
        else
        {
            return new List<FacebookMovie>();
        }
    } 
```

执行查询的方法：

```
public dynamic FBMFQL(Dictionary<string, object> dicQuery)
    {
        try
        {
            var fb = new FacebookClient(this.FacebookAccessToken);
            dynamic objFQL = fb.Get("fql", new { q = dicQuery });

            if (objFQL == null)
            {
                return null;
            }
            else
            {
                return objFQL;
            }
        }
        catch (FacebookApiException ex)
        {
            FacebookErrorHandler(ex);
            return null;
        }
    } //FB FQL 
```

# ruby-on-rails - 如何为回形针附件创建一个作用域 URL？

> ID：11681787
> 
> 赞同：0
> 
> 时间：2012-07-27T05:09:12.307
> 
> 标签：ruby-on-rails, ruby, paperclip

我有这个（这些）模型

```
Portfolio
-- PortfolioItem item
  -- Image image
     has_attachment :attachment 
```

都有很好的蛞蝓，我希望 :attachment 的 url 反映这个组织，比如一个实例

```
photos/holiday_in_venice/ponte_vecchio (all slugs of the respective hierarchy) 
```

会生成这个网址

```
photos(??)/holiday_in_venice(??)/:slug/:style.:extension 
```

在创建回形针路径/url 期间如何访问这些前身对象？

目前我只能做

```
ponte_vecchio/small.png 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T06:48:52.953

您需要创建[自定义插值](https://github.com/thoughtbot/paperclip/wiki/Interpolations)。之后，您可以定义 a`:url`和 a `:path`。

将一个名为的文件放入`paperclip.rb`您的`config/initializers/`文件夹并执行以下操作：

```
Paperclip.interpolates :portfolio_slug do |attachment, style|
  attachment.instance.portfolio_item.portfolio.title.parameterize
end

Paperclip.interpolates :portfolio_slug do |attachment, style|
  attachment.instance.portfolio_item.title.parameterize
end 
```

之后，您可以像这样使用这些插值：

```
has_attached_file :attachment, 
  :path=>":rails_root/public/photos/:portfolio_slug/:item_slug/:style.:extension",
  :url=>"/photos/:portfolio_slug/:item_slug/:style.:extension" 
```

# c# - 在 3 个网站之间实施 SSO

> ID：11681789
> 
> 赞同：0
> 
> 时间：2012-07-27T05:09:19.873
> 
> 标签：c#

很抱歉，如果这个问题已经被问过，我找不到它。

我的组织有两个网站：

1.  www.abc.com
2.  www.abc.online-rewards.com

用户首先登录 www.abc.com，而要访问另一个网站 (www.abc.online-rewards.com)，用户必须再次登录。我想通过创建仪表板来消除这个问题（仪表板将显示员工信息和他的奖励，以便可以通过第二个网站兑换）。

任何人都可以帮我解决这个问题。任何帮助都感激不尽。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T05:11:52.400

跨域 SSO 难以实现。您可以看看 SO 通过 StackExchange 网络执行此操作的方式：[https ://meta.stackexchange.com/questions/64260/how-does-sos-new-auto-login-feature-work/64274#64274](https://meta.stackexchange.com/questions/64260/how-does-sos-new-auto-login-feature-work/64274#64274)

# c++ - 父类有一个虚函数。父类中是否需要有虚拟析构函数？

> ID：11681790
> 
> 赞同：1
> 
> 时间：2012-07-27T05:09:24.863
> 
> 标签：c++, oop

父类有一个虚函数。父类中是否有必要有一个虚拟析构函数？

所以问题是 1\. 现在考虑三个规则，我们应该声明另外两个吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-27T05:32:36.817

每当在指向该类的指针上调用虚拟析构函数*时，被删除的对象实际上是一个更派生的类型。*`delete`如果您的基类可能在这种情况下使用，那么您必须提供一个虚拟析构函数。

通常建议向任何具有虚函数的类添加虚拟析构函数，因为这为该类的未来用户提供了安全性和灵活性，并且向已经多态的类添加虚拟析构函数的额外成本通常很低。

不过，最后一条规则只是一个经验法则。即使一个类没有任何其他虚函数，也可能需要在一个类中拥有一个虚析构函数，相反，如果多态类从未在需要这个的上下文中使用它，则它可能不需要虚析构函数（通常会制作`protected`或什`private`至强制执行析构函数）。

如果编译器提供的默认实现不能做正确的事情，您只需要提供用户定义的复制构造函数和复制赋值运算符。如果您添加了一个具有空实现的析构函数纯粹是为了使其成为虚拟对象，那么这不太可能对您提供复制构造函数和复制赋值运算符有任何影响。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-27T05:37:43.460

在你的类中有一个虚拟析构函数的唯一真正原因是你是否计划*多态*地删除该类的对象，即如果你计划`delete`通过指向基类的指针来删除派生类的对象。如果从不这样做，则不需要虚拟析构函数。

但是，如果您的类中已经有一个虚函数，那么使析构函数为虚拟不会产生明显的开销（因为 VMT 指针已经被引入到您的对象中）。在这种情况下，将析构函数设为虚拟可能是个好主意。以防万一。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-27T05:14:24.520

具有虚函数的类具有虚析构函数是有意义的，因为它是一个被设计为继承自并可能以多态方式使用的类（请参阅[相关的 SO 问题](https://stackoverflow.com/questions/461203/when-to-use-virtual-destructors)）。如果它是多态使用的，从某种意义上说，指向父类的指针指向派生类型的实例，那么父类*必须*有一个虚拟析构函数。

另一方面，如果父类的析构函数确实做了编译器合成的类析构函数不会做的事情（例如，明确地处理某些资源的释放），则只需要在父类中遵循三规则。如果父类的析构函数是微不足道的，并且只声明允许从父类指针正确销毁多态对象，则无需提供其复制构造函数和复制赋值运算符。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-27T05:41:37.463

从技术上讲，只有当您要多态删除实例时，您才**必须有一个虚拟析构函数。**换句话说，您可以在没有虚拟析构函数的情况下拥有虚拟方法。

然而，从实际的角度来看，您几乎没有理由不声明析构函数 virtual 并且应该为您认为可以用作基础的任何类执行它。

三法则是关于程序逻辑：如果您在析构函数、复制构造函数或赋值中的任何一个中都有逻辑，那么您**可能**需要所有这三个中的逻辑。但是请注意，从正式的角度来看，这不是一个严格的规则，并且在极少数情况下它根本不成立（例如，我可能有兴趣在日志中为每个创建的对象查看一行，但不是在分配时或破坏）。

另请注意，根据我的经验，当您具有继承和多态性时，C++ 的复制语义甚至静态类型有时会感觉不对。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-27T05:16:35.833

Any class that could be a base class a some point should have it's destructor declared virtual. Independent of wheter another member function is virtual or not.

The rule of three says that you should declare a

*   destructor
*   copy constructor
*   copy assignment operator

if you declare one of them. Independantly of whether the destruction is virtual.

# php - PHP按标题排序

> ID：11681795
> 
> 赞同：0
> 
> 时间：2012-07-27T05:09:59.240
> 
> 标签：php, sorting, html-table

如何按列对该表进行排序 - 当我单击选择的标题（标题的名称将是链接）时，表格将按该标题 - 列排序，在我的 PHP 中：

```
<?php 
```

打开的文本文件（第一行是由;划分的标题）

```
$fp = fopen('C:\...\usedlicences.txt','r') or die("can't open file"); 
```

创建带边框的表格

```
echo "<table id='MyTable' border='1'>\n"; 
```

为带有标题的表创建标题行

```
echo "<td><b>id</b><td><b>name</b></td><td><b>surname</b></td><td><b>address</b></td><td><b>state</b></td><td><b>phone</b></td><td><b>city</b></td><td><b>date</b></td><td><b>color</b></td>";                          
$length = 1000;
$delimiter = ";";      
$k=1; 
```

从文件创建行并用数据填充它们（跳过第一个（标题）行）并添加第一列，其中写入行的 id

```
$csv_line = fgetcsv( $fp, $length, $delimiter); 
while($csv_line = fgetcsv( $fp, $length, $delimiter ) ) {
echo "<tr>";            
echo "<td>$k</td>";
$k++;   
for ($i = 0, $j = count($csv_line); $i < $j; $i++) {
echo '<td>'.$csv_line[$i].'</td>';  
}
}
echo "<tr>";   
echo '</table>';
fclose($fp) or die("can't close file");
?> 
```

用于显示使用了多少许可证的警报（所有行减去标题行）

```
<script language="JavaScript">
var oRows = document.getElementById('MyTable').getElementsByTagName('tr');
var iRowCount = oRows.length-1;
alert('Licences used: ' + ((iRowCount)-1)+'!');
</script> 
```

test.txt 看起来像：

```
id;name;surname;address;state;phone;city;date;color
1;John;Simts;Yellow 12;Greenik;1234567;Mannds;12/3/1234;blue 
```

# html - 如何获取图像文件？

> ID：11681799
> 
> 赞同：0
> 
> 时间：2012-07-27T05:10:32.400
> 
> 标签：html, ruby, heroku

我已将我的 ruby​​ 代码放在 heroku 中。问题是，我有一个表单，它有浏览按钮来从用户那里获取图像。单击浏览时，它会显示要选择的窗口，选择后它会在服务器中而不是在用户系统中查找图像。如何让它查看用户系统以获取图像并存储在 heroku 的 tmp 文件夹中？

```
<form action="upload.php" method="post" enctype="multipart/form-data"> 
<label for="file">Filename:</label>
<input type="file" name="file" id="file" > 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T05:57:31.560

[使用非常好的回形针宝石](https://github.com/thoughtbot/paperclip/)比在这个宝石上重新发明轮子要容易得多。

# mongodb - 当 Map 发出一个结果时，MongoDB 是否会忽略调用 Reduce 函数？

> ID：11681804
> 
> 赞同：1
> 
> 时间：2012-07-27T05:11:13.147
> 
> 标签：mongodb, mapreduce, nosql

我注意到当 Map 函数返回一个条目时，Reduce 不会被调用。

1.  这是默认行为吗？
2.  可以强制 MongoDB 总是调用 Reduce 函数吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T05:41:57.330

显然 MongoDB 开发人员决定通过忽略唯一键的 Reduce 函数来优化 MapReduce 查询，如此处[所述](https://jira.mongodb.org/browse/SERVER-2333)。

# mongodb - 将文本文件从 Hdfs 加载到 MongoDB

> ID：11681806
> 
> 赞同：1
> 
> 时间：2012-07-27T05:11:20.807
> 
> 标签：mongodb, hdfs, mongodb-java

尝试通过 map-reduce java 程序将文本文件从 HDFS 加载到 MongoDB 时，出现以下错误：

```
12/07/26 19:19:02 INFO jvm.JvmMetrics: Initializing JVM Metrics with processName=JobTracker, sessionId=
12/07/26 19:19:02 WARN util.NativeCodeLoader: Unable to load native-hadoop library for your platform... using builtin-java classes where applicable
12/07/26 19:19:02 WARN mapred.JobClient: Use GenericOptionsParser for parsing the arguments. Applications should implement Tool for the same.
12/07/26 19:19:02 WARN mapred.JobClient: No job jar file set.  User classes may not be found. See JobConf(Class) or JobConf#setJar(String).
12/07/26 19:19:02 INFO input.FileInputFormat: Total input paths to process : 1
12/07/26 19:19:02 WARN snappy.LoadSnappy: Snappy native library not loaded
12/07/26 19:19:02 INFO mapred.JobClient: Running job: job_local_0001
should setup context
12/07/26 19:19:02 INFO mapred.MapTask: io.sort.mb = 100
12/07/26 19:19:02 INFO mapred.MapTask: data buffer = 79691776/99614720
12/07/26 19:19:02 INFO mapred.MapTask: record buffer = 262144/327680
12/07/26 19:19:02 INFO mapred.MapTask: Starting flush of map output
12/07/26 19:19:02 INFO mapred.MapTask: Finished spill 0
12/07/26 19:19:02 INFO mapred.Task: Task:attempt_local_0001_m_000000_0 is done. And is in the process of commiting
12/07/26 19:19:02 INFO mapred.LocalJobRunner:
12/07/26 19:19:02 INFO mapred.Task: Task attempt_local_0001_m_000000_0 is allowed to commit now
should commit task
12/07/26 19:19:02 INFO mapred.LocalJobRunner:
12/07/26 19:19:02 INFO mapred.Task: Task 'attempt_local_0001_m_000000_0' done.
should setup context
12/07/26 19:19:02 INFO mapred.LocalJobRunner:
12/07/26 19:19:02 INFO mapred.Merger: Merging 1 sorted segments
12/07/26 19:19:02 INFO mapred.Merger: Down to the last merge-pass, with 1 segments left of total size: 20 bytes
12/07/26 19:19:02 INFO mapred.LocalJobRunner:
12/07/26 19:19:02 WARN mapred.FileOutputCommitter: Output path is null in cleanup
12/07/26 19:19:02 WARN mapred.LocalJobRunner: job_local_0001
java.lang.IllegalArgumentException: Unable to connect to MongoDB Output Collection.
    at com.mongodb.hadoop.util.MongoConfigUtil.getOutputCollection(MongoConfigUtil.java:272)
    at com.mongodb.hadoop.MongoOutputFormat.getRecordWriter(MongoOutputFormat.java:41)
    at org.apache.hadoop.mapred.ReduceTask.runNewReducer(ReduceTask.java:559)
    at org.apache.hadoop.mapred.ReduceTask.run(ReduceTask.java:414)
    at org.apache.hadoop.mapred.LocalJobRunner$Job.run(LocalJobRunner.java:256)
Caused by: java.lang.IllegalArgumentException: Unable to connect to collection: null
    at com.mongodb.hadoop.util.MongoConfigUtil.getCollection(MongoConfigUtil.java:262)
    at com.mongodb.hadoop.util.MongoConfigUtil.getOutputCollection(MongoConfigUtil.java:269)
    ... 4 more
Caused by: java.lang.NullPointerException
    at com.mongodb.Mongo$Holder._toKey(Mongo.java:679)
    at com.mongodb.Mongo$Holder.connect(Mongo.java:657)
    at com.mongodb.hadoop.util.MongoConfigUtil.getCollection(MongoConfigUtil.java:259)
    ... 5 more
12/07/26 19:19:03 INFO mapred.JobClient:  map 100% reduce 0%
12/07/26 19:19:03 INFO mapred.JobClient: Job complete: job_local_0001
12/07/26 19:19:03 INFO mapred.JobClient: Counters: 14
12/07/26 19:19:03 INFO mapred.JobClient:   FileSystemCounters
12/07/26 19:19:03 INFO mapred.JobClient:     FILE_BYTES_READ=219
12/07/26 19:19:03 INFO mapred.JobClient:     HDFS_BYTES_READ=11
12/07/26 19:19:03 INFO mapred.JobClient:     FILE_BYTES_WRITTEN=57858
12/07/26 19:19:03 INFO mapred.JobClient:   Map-Reduce Framework
12/07/26 19:19:03 INFO mapred.JobClient:     Reduce input groups=0
12/07/26 19:19:03 INFO mapred.JobClient:     Combine output records=1
12/07/26 19:19:03 INFO mapred.JobClient:     Map input records=1
12/07/26 19:19:03 INFO mapred.JobClient:     Reduce shuffle bytes=0
12/07/26 19:19:03 INFO mapred.JobClient:     Reduce output records=0
12/07/26 19:19:03 INFO mapred.JobClient:     Spilled Records=1
12/07/26 19:19:03 INFO mapred.JobClient:     Map output bytes=16
12/07/26 19:19:03 INFO mapred.JobClient:     Combine input records=1
12/07/26 19:19:03 INFO mapred.JobClient:     Map output records=1
12/07/26 19:19:03 INFO mapred.JobClient:     SPLIT_RAW_BYTES=133
12/07/26 19:19:03 INFO mapred.JobClient:     Reduce input records=0 
```

当我执行另一个将数据从 mongoDB 加载到 mongoDB 的代码时，我正在执行以下代码：

```
public class WordCountH2M {
    private static final Log log = LogFactory.getLog( WordCountM2H.class );
    public static class TokenizerMapper extends Mapper<LongWritable, Text ,Text, IntWritable> {
        static IntWritable one = new IntWritable(1);
        public void map(LongWritable key, Text value, Context context ) throws IOException, InterruptedException {
            context.write( new Text(value.toString()),one);
        }
    }

    public static class IntSumReducer extends Reducer<Text, IntWritable, Text,IntWritable> {
        public void reduce( Text key, IntWritable values, Context context ) throws IOException, InterruptedException {
            context.write(key,values);
        }
    }

    public static void main( String[] args ) {
        try {
            final Configuration conf = new Configuration();
            final Job job = new Job( conf, "word count" );
            job.setJarByClass( WordCountH2M.class );
            FileInputFormat.addInputPath(job, new Path("hdfs:****user/user1/input-data/samplefile/file.txt"));
            MongoConfigUtil.setOutputURI(conf, "mongodb://127.0.0.1:12333/test.ss1" );
            job.setMapperClass( TokenizerMapper.class );
            job.setReducerClass( IntSumReducer.class );
            job.setOutputKeyClass(Text.class );
            job.setOutputValueClass(IntWritable.class );
            job.setInputFormatClass(TextInputFormat.class);
            job.setOutputFormatClass(MongoOutputFormat.class );
            System.exit( job.waitForCompletion( true ) ? 0 : 1 );
        } catch (Exception e) {
            System.out.println(e.getMessage());
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-02-02T13:32:47.223

我有类似的问题，通过使用用户 spark 运行 spark-job 而不是 root 解决了这些问题。

希望这可以帮助。

谢谢，

约翰

# mysql - 如何从一个表中获取具有特定值或不存在于与第一个表具有 1-1 关系的另一个表中的行？

> ID：11681809
> 
> 赞同：2
> 
> 时间：2012-07-27T05:11:37.560
> 
> 标签：mysql, sql, database-design

我有两张桌子：

```
CREATE TABLE tblEatables (
    `EatId` int UNSIGNED PRIMARY AUTO_INCREMENT,
    `Fruits` varchar(9) NOT NULL
) Engine=InnoDB;

CREATE TABLE tblConfirm_Eatables (
    Eatables_Id INT UNSIGNED,
    Edible_Status INT,
    FOREIGN KEY Eatables_Id REFERENCES tblEatables (EatId)
) Engine=InnoDB; 
```

我想选择 tblConfirm_Eatables 中 Edible_Status 为 0 的所有 tblEatables.Fruits，以及不在 tblConfirm_Eatables 中的所有 tblEatables.Fruits。

样本数据：

```
INSERT INTO tblEatables
(`EatId`, `Fruits`)
    VALUES
(1, 'Apples'),
(2, 'Oranges'),
(3, 'Papaya'),
(4, 'Jackfruit'),
(5, 'Pineapple'),
(6, 'Mango');

INSERT INTO tblConfirm_Eatables
    VALUES
(1,0),
(2,1),
(3,0),
(4,0); 
```

结果应该是：

> ```
>   水果
>   苹果
>   番木瓜
>   菠萝蜜
>   菠萝
>   芒果
> 
> ```

注意“橙色”不存在，因为它的可食用状态为“1”。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T05:20:01.167

You can use a `LEFT JOIN` to first determine whether or not the fruit exists in the other table and has an `Edible_Status` that's not 0.

```
SELECT    a.Fruits
FROM      tblEatables a
LEFT JOIN tblConfirm_Eatables b ON 
          a.EatId = b.Eatables_Id AND
          b.Edible_Status > 0
WHERE     b.Eatables_Id IS NULL 
```

Then the `WHERE` clause gets all rows in `tblEatables` which don't satisfy the join condition.

This can be really fast if you build a composite index on fields (`Eatables_Id`, `Edible_Status`) in the `tblConfirm_Eatables` table.

* * *

[*SQLFiddle Demo*](http://www.sqlfiddle.com/#!2/fad05/1/0)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-27T05:23:28.920

尝试这个

```
SELECT fruits FROM tblEatables WHERE EatID 
 NOT IN
 (SELECT Eatbles_Id WHERE  Edible_Status = 1) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-27T05:29:14.893

我没有安装 MySQL，但在 SQL Server 中安装了。尝试这个

```
SELECT e.EatId,e.Fruits
FROM @tblEatables e 
LEFT JOIN @tblConfirm_Eatables ce ON e.EatId = ce.Eatbles_Id
WHERE ce.Edible_Status  = 0 OR ce.Edible_Status IS Null 
```

**结果**

```
EatId   Fruits
1   Apples
3   Papaya
4   Jackfruit
5   Pineapple
6   Mango 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-27T05:20:58.470

要包含那些不在 tblConfirm_Eatables 中的水果，您可以使用[左连接](http://en.wikipedia.org/wiki/Join_%28SQL%29#Left_outer_join)。右表中的缺失值将采用 NULL 值。你的陈述

> 有 Edible_Status 为 0 和那些不在 tblConfirm_Eatables

因此转化为

```
tblConfirm_Eatables.Edible_Status = 0 OR tblConfirm_Eatables.Edible_Status IS NULL 
```

整体声明将如下所示：

```
SELECT Fruits
  FROM tblEatables AS E
    LEFT JOIN tblConfirm_Eatables AS CE ON E.EatID = CE.Eatables_ID
  WHERE CE.Edible_Status = 0 OR CE.Edible_Status IS NULL 
```

## 无关

添加到表名的“tbl”前缀是多余的。你不妨把它关掉。

# symfony - Doctrine 和 Symfony2 的效率

> ID：11681810
> 
> 赞同：0
> 
> 时间：2012-07-27T05:11:38.637
> 
> 标签：symfony, doctrine-orm

通常，当我在原始 PHP 中使用 MySQL 时，我只选择要用于检索到的数据集的字段；在大容量环境中，尽可能减少数据传输是有意义的。

很酷，Doctrine 允许您定义相关对象，这样，通过在实体定义中添加一两行，您就可以突然访问`Employee->Company->Fax`. 似乎（尽管我没有检查过）它在幕后工作`SELECT *`。如果这是真的，有没有办法只提取我认为我需要的字段？或者你认为这甚至是一个可靠的缓存方案的问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T07:13:30.823

symfony2 中的 Doctrine and Entity Manager 的行为与您描述的非常相似。
当你从数据库中获取一个对象时，学说会`SELECT *`为你做一个。
此外，如果您想通过 访问某些相关属性`foreign key`，则学说将使用[延迟加载](http://www.doctrine-project.org/blog/doctrine-lazy-loading.html)，这意味着您无需在查询中指定**如何**检索某些字段，因为学说已经知道如何检索。最好的事情是查询没有完成，因为你调用了那个字段（在条件语句中很好等等）

回到您的问题，您只能检索您感兴趣的那些字段。第一步是`repository`为您的类对象定义一个。第二种是编写一个*DQL*查询（Doctrine Query Language）来只提取“你的”字段。

这是一个示例，其中我有一个名为的类`User`和一个名为的相关存储库`UserRepository`

```
<?php
namespace CompanyName\UserBundle\Entity;

use Doctrine\ORM\Mapping as ORM;
use Symfony\Component\Security\Core\User\AdvancedUserInterface;
use Symfony\Component\Security\Core\User\UserInterface;
use Doctrine\Common\Collections\ArrayCollection;

/**
 * CompanyName\UserBundle\Entity\User
 *
 * @ORM\Table(name="users")
 * @ORM\Entity(repositoryClass="CompanyName\UserBundle\Repository\UserRepository")
 */
class User implements AdvancedUserInterface
{
[...] 
```

“有趣”的部分在哪里

`@ORM\Entity(repositoryClass="CompanyName\UserBundle\Repository\UserRepository")`

现在存储库的代码：

```
<?php

namespace CompanyName\UserBundle\Entity;

use Symfony\Component\Security\Core\User\UserInterface;
use Symfony\Component\Security\Core\User\UserProviderInterface;
use Symfony\Component\Security\Core\Exception\UsernameNotFoundException;
use Symfony\Component\Security\Core\Exception\UnsupportedUserException;
use Doctrine\ORM\EntityRepository;
use Doctrine\ORM\NoResultException;

/**
 * UserRepository
 *
 * This class was generated by the Doctrine ORM. Add your own custom
 * repository methods below.
 */
class UserRepository extends EntityRepository implements UserProviderInterface
{
    private $qb = Null;

    public function getOrCreateQB()
    {
        if(!$this->qb) {
            $this->qb = $this->createQueryBuilder('u');
        }
        return $this->qb;
    }
    public function loadUserByUsername($username)
    {
       /* some logic */
       /* define $q as the DQL query for column
       that I interested in */

       $user = $q->getSingleResult();

       return $user;
    }
[...] 
```

你得到了你想要的。要使用该“自定义”查询，只需按以下方式使用该存储库

```
$userRepo = $this->em->getRepository('SestanteUserBundle:User');
$this->userRepo->loadUserByUsername('userNameExample'); 
```

其中，当然，`em`是`entity manager`

# javascript - document.getelementbytagname 是否适用于 mvc listboxfor

> ID：11681811
> 
> 赞同：0
> 
> 时间：2012-07-27T05:11:39.487
> 
> 标签：javascript, asp.net-mvc-3

您好，我有一个循环，可以在局部视图中呈现元素。这些元素是列表框，用于渲染的列表框的数量取决于局部视图本身无法访问的条件。我想要做的是找到使用 javascript 函数和可能的第一个列表框呈现的列表框的数量，然后我可以遍历它们。另一种方法是分配一个类名然后计数，但我不能这样做。请帮忙。

```
function dosomething() {
            var x = document.getElementsByTagName("listbox");//This line always returns O 
            alert(x.length);
}

 @Html.ListBoxFor(model => model.ServiceTypes, new MultiSelectList(RunLog.Domain.Lists.GlobalList.PartsServiceTypes(), "ID", "Name"), new { style = "width: 200px; height: 80px;", id = "lstbox", name="listbox", onclick = "dosomething()" }) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T05:13:40.607

HTML中没有这样的东西`listbox`。它根本不存在。在 HTML 术语中（这是您使用 hjavascript 操作的内容），该元素是使用允许多项选择[`select`](http://www.w3.org/TR/html401/interact/forms.html#h-17.6)的属性调用的。`multiple="multiple"`

所以：

```
var x = document.getElementsByTagName("select");
// now when looping over this x variable make sure
// you check for the presence of the multiple="multiple"
// attribute which is the only thing which distinguishes
// what you call a ListBox from a DropDown.
for (var i = 0; i < x.length; i++)​ {
    var element = x[i];
    // I am not even sure if this is a good test for the presence
    // of the multiple attribute. Maybe it should work but can't guarantee
    // cross browser correctness
    if (element.multiple) {
        // we've got a list box here
    }
} 
```

如果你决定使用 jQuery：

```
var listBoxes = $('select[multiple]'); 
```

# ios - 当前周开始和结束日期

> ID：11681815
> 
> 赞同：40
> 
> 时间：2012-07-27T05:12:00.527
> 
> 标签：ios, objective-c, cocoa-touch, nsdate

我想获取当前周的开始和结束日期，我还想使用上一周的开始和结束日期以及下周的开始和结束日期在当前月份。

提前致谢。

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2013-06-07T21:22:44.950

[`rangeOfUnit:startDate:interval:forDate:`](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSCalendar_Class/Reference/NSCalendar.html#//apple_ref/doc/uid/TP40001451-SW3). 它为您提供某个时间单位的开始和间隔。有了它，很容易在使用的日历中找到一周的开始，并添加 range-1 以获得该周最新的第二个。

```
NSCalendar *cal = [NSCalendar currentCalendar];
NSDate *now = [NSDate date];
NSDate *startOfTheWeek;
NSDate *endOfWeek;
NSTimeInterval interval;
[cal rangeOfUnit:NSWeekCalendarUnit 
       startDate:&startOfTheWeek 
        interval:&interval 
         forDate:now];
//startOfWeek holds now the first day of the week, according to locale (monday vs. sunday)

endOfWeek = [startOfTheWeek dateByAddingTimeInterval:interval-1];
// holds 23:59:59 of last day in week. 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-07-30T06:50:22.137

已解决问题感谢支持

代码：- 它给出了当前周的开始和结束日期。

```
 NSDate *today = [NSDate date];
 NSLog(@"Today date is %@",today);
 dateFormat = [[NSDateFormatter alloc] init];
 [dateFormat setDateFormat:@"yyyy-MM-dd"];// you can use your format.

 //Week Start Date 

 NSCalendar *gregorian = [[NSCalendar alloc]        initWithCalendarIdentifier:NSGregorianCalendar];

NSDateComponents *components = [gregorian components:NSWeekdayCalendarUnit | NSYearCalendarUnit | NSMonthCalendarUnit | NSDayCalendarUnit fromDate:today];

int dayofweek = [[[NSCalendar currentCalendar] components:NSWeekdayCalendarUnit fromDate:today] weekday];// this will give you current day of week

[components setDay:([components day] - ((dayofweek) - 2))];// for beginning of the week.

NSDate *beginningOfWeek = [gregorian dateFromComponents:components];
NSDateFormatter *dateFormat_first = [[NSDateFormatter alloc] init];
[dateFormat_first setDateFormat:@"yyyy-MM-dd"];
dateString2Prev = [dateFormat stringFromDate:beginningOfWeek];

weekstartPrev = [[dateFormat_first dateFromString:dateString2Prev] retain];

NSLog(@"%@",weekstartPrev);

//Week End Date

 NSCalendar *gregorianEnd = [[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar];

 NSDateComponents *componentsEnd = [gregorianEnd components:NSWeekdayCalendarUnit | NSYearCalendarUnit | NSMonthCalendarUnit | NSDayCalendarUnit fromDate:today];

 int Enddayofweek = [[[NSCalendar currentCalendar] components:NSWeekdayCalendarUnit fromDate:today] weekday];// this will give you current day of week

 [componentsEnd setDay:([componentsEnd day]+(7-Enddayofweek)+1)];// for end day of the week

 NSDate *EndOfWeek = [gregorianEnd dateFromComponents:componentsEnd];
 NSDateFormatter *dateFormat_End = [[NSDateFormatter alloc] init];
 [dateFormat_End setDateFormat:@"yyyy-MM-dd"];
 dateEndPrev = [dateFormat stringFromDate:EndOfWeek];

 weekEndPrev = [[dateFormat_End dateFromString:dateEndPrev] retain];
  NSLog(@"%@",weekEndPrev); 
```

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2017-06-30T13:16:48.737

这是 Swift 3 版本：-

```
extension Date {
    var startOfWeek: Date? {
        let gregorian = Calendar(identifier: .gregorian)
        guard let sunday = gregorian.date(from: gregorian.dateComponents([.yearForWeekOfYear, .weekOfYear], from: self)) else { return nil }
        return gregorian.date(byAdding: .day, value: 1, to: sunday)
    }

    var endOfWeek: Date? {
        let gregorian = Calendar(identifier: .gregorian)
        guard let sunday = gregorian.date(from: gregorian.dateComponents([.yearForWeekOfYear, .weekOfYear], from: self)) else { return nil }
        return gregorian.date(byAdding: .day, value: 7, to: sunday)
    }
} 
```

您可以像这样获得一周的开始日期和结束日期：

```
let startWeek = Date().startOfWeek
let endWeek = Date().endOfWeek

print(startWeek ?? "not found start date")
print(endWeek ?? "not found end date") 
```

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2015-12-03T21:35:02.163

### 一个斯威夫特版本

的[答案](https://stackoverflow.com/a/16993178/649379)：`vikingosegundo`_

```
let calendar = NSCalendar.currentCalendar()
var startOfTheWeek: NSDate?
var endOfWeek: NSDate!
var interval = NSTimeInterval(0)

calendar.rangeOfUnit(.WeekOfMonth, startDate: &startOfTheWeek, interval: &interval, forDate: NSDate())
endOfWeek = startOfTheWeek!.dateByAddingTimeInterval(interval - 1) 
```

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2016-11-08T01:33:15.273

Here's an elegant way for Swift 3 (Xcode 8+):

```
extension Date {
    var startOfWeek: Date {
        let date = Calendar.current.date(from: Calendar.current.dateComponents([.yearForWeekOfYear, .weekOfYear], from: self))!
        let dslTimeOffset = NSTimeZone.local.daylightSavingTimeOffset(for: date)
        return date.addingTimeInterval(dslTimeOffset)
    }

    var endOfWeek: Date {
        return Calendar.current.date(byAdding: .second, value: 604799, to: self.startOfWeek)!
    }
} 
```

And we can use this extension like this:

```
print(Date().startOfWeek)
print(Date().endOfWeek) 
```

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2018-09-26T07:17:20.357

**斯威夫特 4 解决方案**

我已经根据我的要求弄清楚了，在那里我找到了以下日期。

```
1\. Today

2\. Tomorrow 

3\. This Week 

4\. This Weekend 

5\. Next Week 

6\. Next Weekend 
```

所以，我创建`Date Extension`了 Dates of *Current Week*和*Next Week*。

**代码**

```
extension Date {

    func getWeekDates() -> (thisWeek:[Date],nextWeek:[Date]) {
        var tuple: (thisWeek:[Date],nextWeek:[Date])
        var arrThisWeek: [Date] = []
        for i in 0..<7 {
            arrThisWeek.append(Calendar.current.date(byAdding: .day, value: i, to: startOfWeek)!)
        }
        var arrNextWeek: [Date] = []
        for i in 1...7 {
            arrNextWeek.append(Calendar.current.date(byAdding: .day, value: i, to: arrThisWeek.last!)!)
        }
        tuple = (thisWeek: arrThisWeek,nextWeek: arrNextWeek)
        return tuple
    }

    var tomorrow: Date {
        return Calendar.current.date(byAdding: .day, value: 1, to: noon)!
    }
    var noon: Date {
        return Calendar.current.date(bySettingHour: 12, minute: 0, second: 0, of: self)!
    }

    var startOfWeek: Date {
        let gregorian = Calendar(identifier: .gregorian)
        let sunday = gregorian.date(from: gregorian.dateComponents([.yearForWeekOfYear, .weekOfYear], from: self))
        return gregorian.date(byAdding: .day, value: 1, to: sunday!)!
    }

    func toDate(format: String) -> String {
        let formatter = DateFormatter()
        formatter.dateFormat = format
        return formatter.string(from: self)
    }
} 
```

**用法：**

```
let arrWeekDates = Date().getWeekDates() // Get dates of Current and Next week.
let dateFormat = "MMM dd" // Date format
let thisMon = arrWeekDates.thisWeek.first!.toDate(format: dateFormat)
let thisSat = arrWeekDates.thisWeek[arrWeekDates.thisWeek.count - 2].toDate(format: dateFormat)
let thisSun = arrWeekDates.thisWeek[arrWeekDates.thisWeek.count - 1].toDate(format: dateFormat)

let nextMon = arrWeekDates.nextWeek.first!.toDate(format: dateFormat)
let nextSat = arrWeekDates.nextWeek[arrWeekDates.nextWeek.count - 2].toDate(format: dateFormat)
let nextSun = arrWeekDates.nextWeek[arrWeekDates.nextWeek.count - 1].toDate(format: dateFormat)

print("Today: \(Date().toDate(format: dateFormat))") // Sep 26
print("Tomorrow: \(Date().tomorrow.toDate(format: dateFormat))") // Sep 27
print("This Week: \(thisMon) - \(thisSun)") // Sep 24 - Sep 30
print("This Weekend: \(thisSat) - \(thisSun)") // Sep 29 - Sep 30
print("Next Week: \(nextMon) - \(nextSun)") // Oct 01 - Oct 07
print("Next Weekend: \(nextSat) - \(nextSun)") // Oct 06 - Oct 07 
```

您可以`Extension`根据需要进行修改。

**谢谢！**

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2012-07-27T05:55:43.313

首先找到当前日期...

```
NSDate *today = [NSDate date];
NSCalendar *gregorian = [[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar];
NSDateComponents *weekdayComponents     = [gregorian components:NSWeekdayCalendarUnit | NSHourCalendarUnit | NSMinuteCalendarUnit | NSSecondCalendarUnit fromDate:today]; 
```

计算从今天减去的天数，以获得一周的第一天。在这种情况下，一周的第一天是星期一。这表示为首先用工作日整数减去 0，然后在 setDay 上加上 2。

星期日 = 1，星期一 = 2，星期二 = 3，星期三 = 4，星期四 = 5，星期五 = 6 和星期六 = 7。通过向这个整数添加更多，您将进入下一周。

```
NSDateComponents *componentsToSubtract  = [[NSDateComponents alloc] init];
[componentsToSubtract setDay: (0 - [weekdayComponents weekday]) + 2];   
[componentsToSubtract setHour: 0 - [weekdayComponents hour]];
[componentsToSubtract setMinute: 0 - [weekdayComponents minute]];
[componentsToSubtract setSecond: 0 - [weekdayComponents second]]; 
```

为一周中的第一天创建日期

```
NSDate *beginningOfWeek = [gregorian dateByAddingComponents:componentsToSubtract toDate:today options:0]; 
```

通过将第一天的日期加上 6，我们可以得到最后一天，在我们的示例中是星期日。

```
NSDateComponents *componentsToAdd = [gregorian components:NSDayCalendarUnit fromDate:beginningOfWeek];
[componentsToAdd setDay:6];
NSDate *endOfWeek = [gregorian dateByAddingComponents:componentsToAdd toDate:beginningOfWeek options:0]; 
```

对于下一个和上一个 ....

```
-(IBAction)Week_CalendarActionEvents:(id)sender{

    NSCalendar *gregorian = [[[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar] autorelease];
    NSDateComponents *offsetComponents = [[[NSDateComponents alloc] init] autorelease];
    NSDate *nextDate;

    if(sender==Week_prevBarBtn)  // Previous button events 
        [offsetComponents setDay:-7];
    else if(sender==Week_nextBarBtn) // next button events 
        [offsetComponents setDay:7];

    nextDate = [gregorian dateByAddingComponents:offsetComponents toDate:selectedDate options:0];

    selectedDate = nextDate;
    [selectedDate retain];

    NSDateComponents *components = [gregorian components:NSWeekCalendarUnit fromDate:selectedDate];
    NSInteger week = [components week];
    NSDateFormatter *formatter = [[NSDateFormatter alloc] init];
    [formatter setDateFormat:@"MMMM YYYY"];
    NSString *stringFromDate = [formatter stringFromDate:selectedDate];
    [formatter release];
    [Week_weekBarBtn setTitle:[NSString stringWithFormat:@"%@,Week %d",stringFromDate,week]];
} 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2018-01-23T10:03:03.403

这是 swift4 的解决方案，我们可以获取当前一周的所有天数。

```
var calendar = Calendar(identifier: Calendar.Identifier.gregorian)
let today = calendar.startOfDay(for: Date())    
let dayOfWeek = calendar.component(.weekday, from: today) - calendar.firstWeekday
let weekdays = calendar.range(of: .weekday, in: .weekOfYear, for: today)!
let days = (weekdays.lowerBound ..< weekdays.upperBound)
                    .flatMap { calendar.date(byAdding: .day, value: $0 - dayOfWeek, to: today) } 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2013-02-04T14:29:52.630

这是一些代码，它还检查一个边缘情况，即上个月开始的一周。您可以通过设置`setWeekday`来获得周末，您可以通过减去来`7`获得前一周`1``[components week]`

```
// Finds the date for the first day of the week
- (NSDate *)getFirstDayOfTheWeekFromDate:(NSDate *)givenDate
{
    NSCalendar *calendar = [NSCalendar currentCalendar];

    // Edge case where beginning of week starts in the prior month
    NSDateComponents *edgeCase = [[NSDateComponents alloc] init];
    [edgeCase setMonth:2];
    [edgeCase setDay:1];
    [edgeCase setYear:2013];
    NSDate *edgeCaseDate = [calendar dateFromComponents:edgeCase];

    NSDateComponents *components = [calendar components:NSYearCalendarUnit|NSMonthCalendarUnit|NSWeekCalendarUnit|NSWeekdayCalendarUnit fromDate:edgeCaseDate];
    [components setWeekday:1]; // 1 == Sunday, 7 == Saturday
    [components setWeek:[components week]];

    NSLog(@"Edge case date is %@ and beginning of that week is %@", edgeCaseDate , [calendar dateFromComponents:components]);

    // Find Sunday for the given date
    components = [calendar components:NSYearCalendarUnit|NSMonthCalendarUnit|NSWeekCalendarUnit|NSWeekdayCalendarUnit fromDate:givenDate];
    [components setWeekday:1]; // 1 == Sunday, 7 == Saturday
    [components setWeek:[components week]];

    NSLog(@"Original date is %@ and beginning of week is %@", givenDate , [calendar dateFromComponents:components]);

    return [calendar dateFromComponents:components];
} 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2021-04-08T18:43:20.450

**Swift 5.x 的解决方案**

创建*日期*扩展：

```
func weekPeriod() -> (startDate: Date, endDate: Date) {
    let calendar = Calendar(identifier: .gregorian)
    guard let sundayDate = calendar.date(from: calendar.dateComponents([.yearForWeekOfYear, .weekOfYear], from: self)) else { return (startDate: Date(), endDate: Date()) }

    if calendar.isDateInToday(sundayDate) {
        let startDate = calendar.date(byAdding: .day, value: -6, to: sundayDate) ?? Date()
        let endDate = sundayDate
        return (startDate: startDate, endDate: endDate)
    }

    let startDate = calendar.date(byAdding: .day, value: 1, to: sundayDate) ?? Date()
    let endDate = calendar.date(byAdding: .day, value: 6, to: startDate) ?? Date()

    return (startDate: startDate, endDate: endDate)
} 
```

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2016-08-23T12:54:39.943

```
//Begining of Week Date

- (NSDate*) beginingOfWeekOfDate{

    NSCalendar *tmpCalendar = [NSCalendar currentCalendar];
    NSDateComponents *components = [tmpCalendar components:NSCalendarUnitYear|NSCalendarUnitMonth|NSCalendarUnitWeekOfYear|NSCalendarUnitWeekday fromDate:self];//get the required calendar units

    NSInteger weekday = tmpCalendar.firstWeekday;  
    components.weekday = weekday; //weekday
    components.hour = 0;
    components.minute = 0;
    components.second = 0;

    NSDate *fireDate = [tmpCalendar dateFromComponents:components];

    return fireDate;
}

//End of Week Date

-(NSDate *)endOfWeekFromDate{

    NSCalendar *tmpCalendar = [NSCalendar currentCalendar];
    NSDateComponents *components = [tmpCalendar components:NSCalendarUnitYear|NSCalendarUnitMonth|NSCalendarUnitWeekOfYear|NSCalendarUnitWeekday fromDate:self];//get the required calendar units

    int weekday = 7; //Saturday
    if (tmpCalendar.firstWeekday != 1) {
        weekday = 1;
    }
    components.weekday = weekday;//weekday
    components.hour = 23;
    components.minute = 59;
    components.second = 59;

    NSDate *fireDate = [tmpCalendar dateFromComponents:components];

    return fireDate;
} 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2012-07-27T05:32:29.233

您可以通过以下代码获取当前日期和日期：

```
NSDate *today = [NSDate date];
    NSDateFormatter *dateFormat = [[[NSDateFormatter alloc] init] autorelease];
    [dateFormat setDateFormat:@"EEEE"];
    NSString *weekDay = [dateFormat stringFromDate:today];
    [dateFormat setDateFormat:@"dd"];
    NSString *thedate=[dateFormat stringFromDate:today];
    //[dateFormat release];
    NSLog(@"%@ %@", weekDay,thedate); 
```

现在，您需要在其中添加一些逻辑来计算一周的开始日期和结束日期。逻辑会这样，

如果工作日是星期一

然后

开始日期 = 当前日期 - 0

结束日期 = 当前日期 + 6

等等

我想你可以理解它。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2013-05-05T07:22:25.157

通过利用 的方法`rangeOfUnit:startDate:interval:forDate:`，`NSDate`有一种更简单的方法可以实现这一点：

```
- (void)startDate:(NSDate **)start andEndDate:(NSDate **)end ofWeekOn:(NSDate *)date{
    NSDate *startDate = nil;
    NSTimeInterval duration = 0;
    BOOL b = [[NSCalendar currentCalendar] rangeOfUnit:NSWeekCalendarUnit startDate:&startDate interval:&duration forDate:date];
    if(! b){
        *start = nil;
        *end = nil;
        return;
    }
    NSDate *endDate = [startDate dateByAddingTimeInterval:duration-1];
    *start = startDate;
    *end = endDate;
}

NSDate *this_start = nil, *this_end = nil;
[self startDate:&this_start andEndDate:&this_end ofWeekOn:[NSDate date]]; 
```

所以现在你有了本周的开始日期和结束日期。然后上周：

```
NSDate *lastWeekDate = [this_start dateByAddingTimeInterval:-10];
NSDate *last_start = nil, *last_end = nil;
[self startDate:&last_start andEndDate:&last_end ofWeekOn:lastWeekDate]; 
```

下周：

```
NSDate *nextWeekDate = [this_end dateByAddingTimeInterval:10];
NSDate *next_start = nil, *next_end = nil;
[self startDate:&next_start andEndDate:&next_end ofWeekOn:nextWeekDate]; 
```

现在你拥有了它们。

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2018-10-22T09:59:34.010

**Swift 3+：带扩展的简单解决方案**

```
extension Date {
    var startOfWeek: Date? {
        let gregorian = Calendar(identifier: .gregorian)
        guard let sunday = gregorian.date(from: gregorian.dateComponents([.yearForWeekOfYear, .weekOfYear], from: self)) else { return nil }
        return gregorian.date(byAdding: .day, value: 1, to: sunday)
    }

    var endOfWeek: Date? {
        let gregorian = Calendar(identifier: .gregorian)
        guard let sunday = gregorian.date(from: gregorian.dateComponents([.yearForWeekOfYear, .weekOfYear], from: self)) else { return nil }
        return gregorian.date(byAdding: .day, value: 7, to: sunday)
    }

    var yesterdayDate: Date? {
        return NSCalendar.current.date(byAdding: .day, value: -1, to: noon)!
    }

    var tommorowDate: Date? {
        return NSCalendar.current.date(byAdding: .day, value: 1, to: noon)!
    }

    var previousDate: Date? {
        let oneDay:Double = 60 * 60 * 24
        return self.addingTimeInterval(-(Double(oneDay)))
    }

    var nextDate: Date? {
        let oneDay:Double = 60 * 60 * 24
        return self.addingTimeInterval(oneDay)
    }

    var noon: Date {
        return NSCalendar.current.date(bySettingHour: 12, minute: 0, second: 0, of: self)!
    }

    var month: Int {
        return Calendar.current.component(.month,  from: self)
    }
} 
```

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2019-06-25T09:27:34.727

**斯威夫特 4.2**

如果你想显示当前的星期日期，这里是代码。

```
 override func viewDidLoad() {
        super.viewDidLoad()

        for dateIndex in 0..<7 {
            guard let startWeek = Date().startOfWeek else { return }
            let date = Calendar.current.date(byAdding: .day, value: dateIndex + 1, to: startWeek)
            print(date)
        }

}

extension Date {
    var startOfWeek: Date? {
        let gregorian = Calendar(identifier: .gregorian)
        guard let sunday = gregorian.date(from: gregorian.dateComponents([.yearForWeekOfYear, .weekOfYear], from: self)) else { return nil }
        return gregorian.date(byAdding: .day, value: 1, to: sunday)
    }
} 
```

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2017-05-03T07:53:21.360

**斯威夫特 3**

首先找到当前日期...

```
 let today = Date()
    let gregorian = Calendar(identifier: .gregorian)
    var weekdayComponents: DateComponents? = gregorian.dateComponents([.weekday], from: today) 
```

星期日 = 1，星期一 = 2，星期二 = 3，星期三 = 4，星期四 = 5，星期五 = 6，星期六 = 7。

```
 var componentsToSubtract = DateComponents()
    componentsToSubtract.day = (0 - (weekdayComponents?.weekday!)!) + 2

    beginningOfWeek = gregorian.date(byAdding: componentsToSubtract, to: today)

    var componentsToAdd: DateComponents? = gregorian.dateComponents([.day], from: beginningOfWeek!)
    componentsToAdd?.day = 6
    endOfWeek = gregorian.date(byAdding: componentsToAdd!, to: beginningOfWeek!)

    let components: DateComponents? = gregorian.dateComponents([.month], from: beginningOfWeek!)
    let month: Int? = components?.month

    let components1: DateComponents? = gregorian.dateComponents([.month], from: endOfWeek!)
    let month1: Int? = components1?.month

    print("\(month) - \(month1)")

    showDate(start:beginningOfWeek!, end:endOfWeek!, strtMn:month!, endMn:month1!)

func showDate(start:Date, end:Date, strtMn:Int, endMn:Int) {
    if strtMn == endMn{
        let formatter = DateFormatter()
        formatter.dateFormat = "MMM dd"
        let stringFromDate: String = formatter.string(from: start)

        let formatter1 = DateFormatter()
        formatter1.dateFormat = "dd"
        let stringFromDate1: String = formatter1.string(from: end)
        print("\(stringFromDate) - \(stringFromDate1)")
        lblDate.text = "\(stringFromDate) - \(stringFromDate1)"
    }
    else{
        let formatter = DateFormatter()
        formatter.dateFormat = "MMM dd"
        let stringFromDate: String = formatter.string(from: start)

        let formatter1 = DateFormatter()
        formatter1.dateFormat = "MMM dd"
        let stringFromDate1: String = formatter1.string(from: end)
        print("\(stringFromDate) - \(stringFromDate1)")
        lblDate.text = "\(stringFromDate) - \(stringFromDate1)"
    }
} 
```

对于下一个和上一个 ....

```
@IBAction func week_CalendarActionEvents(_ sender: UIButton) {

    let gregorian = Calendar(identifier: .gregorian)
    var offsetComponents = DateComponents()
    var nextStrtDate: Date?
    var nextEndDate: Date?
    var startDate: Date?
    var endDate: Date?

    startDate = beginningOfWeek
    endDate = endOfWeek

    if sender.tag == 1 {
        offsetComponents.day = -7
    }
    else if sender.tag == 2 {
        offsetComponents.day = 7
    }

    nextStrtDate = gregorian.date(byAdding: offsetComponents, to:startDate!)
    startDate = nextStrtDate
    beginningOfWeek = startDate

    nextEndDate = gregorian.date(byAdding: offsetComponents, to: endDate!)
    endDate = nextEndDate
    endOfWeek = endDate

    let components: DateComponents? = gregorian.dateComponents([.month], from: startDate!)
    let month: Int? = components?.month

    let components1: DateComponents? = gregorian.dateComponents([.month], from: endDate!)
    let month1: Int? = components1?.month

    print("\(month)- \(month1)")

    showDate(start:startDate!, end:endDate!, strtMn:month!, endMn:month1!)
} 
```

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2021-12-18T13:56:45.373

*   `Start date`从任何地区每周都需要 3 个步骤`End date`。

1.  查找当天的星期几。

```
func getTodayWeekDay() -> String {
       let dateFormatter = DateFormatter()
       dateFormatter.dateFormat = "EEEE"
       let weekDay = dateFormatter.string(from: Date())
       return weekDay
} 
```

2.  让 emun 上课`subtraction`几天`addition`。

> 即，如果当前工作日是`Wednesday`获取`Monday`当前星期，我们必须`-2`从当前日期中减去。为了获得`Sunday`本周，我们必须添加`4`到当天。

```
enum WeekDays: String {
    case monday = "Monday"
    case tuesday = "Tuesday"
    case wednesday = "Wednesday"
    case thursday = "Thursday"
    case friday = "Friday"
    case saturday = "Saturday"
    case sunday = "Sunday"

    var daysToSubstract: Int {
        switch self {
        case .monday: return 0
        case .tuesday: return -1
        case .wednesday: return -2
        case .thursday: return -3
        case .friday: return -4
        case .saturday: return -5
        case .sunday: return -6
        }
    }

    var daysToAdd: Int {
        switch self {
        case .monday: return 6
        case .tuesday: return 5
        case .wednesday: return 4
        case .thursday: return 3
        case .friday: return 2
        case .saturday: return 1
        case .sunday: return 0
        }
    }
} 
```

1.  从当天`Start-week`开始。`End-week`_`subtraction``addition`

```
extension Date {
    var startOfWeek: String? {
        let gregorian = Calendar(identifier: .gregorian)
        let startWeek = dateFormatter.string(from:gregorian.date(byAdding: .day, value: WeekDays(rawValue: getTodayWeekDay())?.daysToSubstract ?? 0, to: self)!)
        print("start-week--- \(startWeek)")
        return startWeek
    }

    var endOfWeek: String? {
        let gregorian = Calendar(identifier: .gregorian)
        let endWeek = dateFormatter.string(from:gregorian.date(byAdding: .day, value: WeekDays(rawValue: getTodayWeekDay())?.daysToAdd ?? 6, to: self)!)
        print("end-week--- \(endWeek)")
        return endWeek
    }
} 
```

*   您可以使用如下功能：

```
Date().startOfWeek
Date().endOfWeek 
```

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2017-05-09T12:46:09.310

在 Swift 3.0 中

```
let cal = NSCalendar.current

//weekday
let weekday = cal.component(.weekday, from: Date())

var dateComp = cal.dateComponents([.hour, .minute, .second, .day, .month, .year], from: Date())
print(dateComp.day!)

//Start Date of the week - Sunday
dateComp.day = dateComp.day! - (weekday - 1)// start date of week

print(cal.date(from: dateComp)!)

//End Date of the Week - Saturday
dateComp = cal.dateComponents([.hour, .minute, .second, .day, .month, .year], from: Date())

dateComp.day = dateComp.day! + (7 - weekday)

print(cal.date(from: dateComp)!) 
```

# php - 生产中的 MongoDB 分片错误

> ID：11681817
> 
> 赞同：3
> 
> 时间：2012-07-27T05:12:08.637
> 
> 标签：php, node.js, mongodb, mongoose, sharding

我们使用 node + mongodb 为我们的聊天模块实现了 mongodb 分片概念。

```
MongoDB Sharding Configuration
===============================
Shard1 = PRIMARY + SECONDARY + ARBITER
Shard2  = PRIMARY + SECONDARY + ARBITER
Config
Mongos 
```

以下详细信息，我们今天早上得到了它。但我们不知道如何解决这个问题。

请让我知道我们如何解决此问题。

**"errmsg" : "回滚 2 错误 findcommonpoint 在重试之前等待一段时间"**

**"errmsg" : "错误 RS102 太陈旧无法赶上"**

```
data2:PRIMARY> rs.status()
{
    "set" : "data2",
    "date" : ISODate("2012-07-27T04:30:29Z"),
    "myState" : 1,
    "members" : [
        {
            "_id" : 0,
            "name" : "50.52.108.16:20001",
            "health" : 1,
            "state" : 9,
            "stateStr" : "ROLLBACK",
            "uptime" : 322,
            "optime" : {
                "t" : 1343361602000,
                "i" : 155
            },
            "optimeDate" : ISODate("2012-07-27T04:00:02Z"),
            "lastHeartbeat" : ISODate("2012-07-27T04:30:29Z"),
            **"errmsg" : "rollback 2 error findcommonpoint waiting a while before trying again"**
        },
        {
            "_id" : 1,
            "name" : "50.52.108.17:20002",
            "health" : 1,
            "state" : 1,
            "stateStr" : "PRIMARY",
            "optime" : {
                "t" : 1343363429000,
                "i" : 7
            },
            "optimeDate" : ISODate("2012-07-27T04:30:29Z"),
            "self" : true
        },
        {
            "_id" : 2,
            "name" : "50.52.108.17:20003",
            "health" : 1,
            "state" : 7,
            "stateStr" : "ARBITER",
            "uptime" : 10880311,
            "optime" : {
                "t" : 0,
                "i" : 0
            },
            "optimeDate" : ISODate("1970-01-01T00:00:00Z"),
            "lastHeartbeat" : ISODate("2012-07-27T04:30:28Z")
        }
    ],
    "ok" : 1
}

data1:PRIMARY> rs.status()
{
    "set" : "data1",
    "date" : ISODate("2012-07-27T04:30:17Z"),
    "myState" : 1,
    "members" : [
        {
            "_id" : 0,
            "name" : "50.52.108.17:10001",
            "health" : 1,
            "state" : 3,
            "stateStr" : "RECOVERING",
            "uptime" : 35,
            "optime" : {
                "t" : 1343320338000,
                "i" : 3
            },
            "optimeDate" : ISODate("2012-07-26T16:32:18Z"),
            "lastHeartbeat" : ISODate("2012-07-27T04:30:16Z"),
            "errmsg" : "error RS102 too stale to catch up"
        },
        {
            "_id" : 1,
            "name" : "50.52.108.16:10002",
            "health" : 1,
            "state" : 1,
            "stateStr" : "PRIMARY",
            "optime" : {
                "t" : 1343363417000,
                "i" : 30
            },
            "optimeDate" : ISODate("2012-07-27T04:30:17Z"),
            "self" : true
        },
        {
            "_id" : 2,
            "name" : "50.52.108.16:10003",
            "health" : 1,
            "state" : 7,
            "stateStr" : "ARBITER",
            "uptime" : 10880162,
            "optime" : {
                "t" : 0,
                "i" : 0
            },
            "optimeDate" : ISODate("1970-01-01T00:00:00Z"),
            "lastHeartbeat" : ISODate("2012-07-27T04:30:16Z")
        }
    ],
    "ok" : 1
} 
```

库马兰

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-27T06:44:37.870

看起来辅助服务器关闭了很长时间，现在它无法与主服务器同步。此同步要求 oplog 包含在辅助节点停机期间发送到主节点的所有写入。如果辅助节点已关闭太久，则记录可能已从 oplog 中推出，因为它是“上限”集合。您需要进行完整的 resyc：

[http ://www.mongodb.org/display/DOCS /Resyncing+a+Very+Stale+Replica+Set+Member](http://www.mongodb.org/display/DOCS/Resyncing+a+Very+Stale+Replica+Set+Member)

此后，考虑增加oplog大小以避免以后出现类似情况。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-27T09:52:35.557

Aafreen 的回答是正确的，他的建议很好。

只是在调整 oplog 大小时要注意一些事项，以免 RS102 再次出现。

oplog 的大小将取决于您更改的数据量和频率。它非常依赖于应用程序（考虑一下您的正常写入模式是什么）。您基本上想要一个 oplog，它是您在故障或维护窗口中恢复的最大时间的许多倍。

**操作日志**

oplog 是一个有上限的集合，它存储所有修改存储在 MongoDB 中的数据的操作。副本集的所有成员都有允许他们维护数据库当前状态的操作日志。除非您使用 oplogSize 选项修改 oplog 的大小，否则 oplog 的默认大小将如下所示：

*   对于 64 位 Linux、Solaris 和 FreeBSD 系统，MongoDB 会将 5% 的可用磁盘空间分配给 oplog。

    如果此数量小于 1 GB，则 MongoDB 将分配 1 GB 的空间。

*   对于 64 位 OS X 系统，MongoDB 为 oplog 分配 183 MB 的空间。

    对于 32 位系统，MongoDB 为 oplog 分配大约 48 MB 的空间。

正如我上面提到的，没有公式，但是，如果您执行大量写入（插入/删除/更新），那么您可能需要更大的 oplog（超过 5%），而如果主要是读取，您可能会不到 5% 就逃脱了，这真的取决于你的应用程序。

这是另一个关于调整 oplog 大小的[介绍性链接](http://docs.mongodb.org/manual/core/replication/#replica-set-oplog-sizing)，它可能有助于解释更多内容，我还建议阅读[Replication Fundamentals 文档](http://docs.mongodb.org/manual/core/replication/)。

主节点上的 oplog 是最重要的，建议所有 oplog（在副本集中）大小相同。

# java - 如何解决 glassfish 服务器上的部署错误？

> ID：11681820
> 
> 赞同：3
> 
> 时间：2012-07-27T05:12:32.260
> 
> 标签：java, netbeans, glassfish-3

嘿，我在尝试使用 netbeans 在远程 glassfish 服务器上部署我的项目时遇到以下错误：

```
SEVERE: Exception while invoking class org.glassfish.persistence.jpa.JPADeployer prepare method
SEVERE: Exception while preparing the app
SEVERE: Invalid resource : proximity__pm 
```

但是如果我在我的本地机器 glassfish 服务器上部署这个项目，它工作正常。我不知道为什么它在远程机器上给我错误。请任何人帮助我，让我知道其中有什么问题。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T06:50:09.783

如果您的资源（连接池、jdbc 资源）未与您的应用程序一起部署，则可能会发生此错误。

如果您在本地使用 Netbeans 进行部署，IDE 会为您管理资源的部署。在远程服务器上，如果您只部署 WAR 文件，则不会自动部署资源（除非您使用应用程序范围的资源）。

您可以：

*   在部署应用程序*之前*，尝试在远程服务器上手动设置资源

*   或更改您的应用程序设置以使用应用程序范围的资源（这些资源仅适用于部署它们的应用程序，而不适用于同一服务器上的其他 Web 应用程序）。

目前关于应用程序范围的 GF 资源的文档不是很好。我为自己的项目找到的最好的教程是这个[视频教程](http://www.google.de/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0CE0QtwIwAA&url=http://www.youtube.com/watch?v=jlFRbN2Yb3g&ei=ijkSUKO3B82LswaUj4GIAg&usg=AFQjCNHv_uqmRm146HhsRBe122WT2xv2tw&sig2=U9DOx0vY9iXCGvY37_LNJw)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T06:35:31.363

尝试查看远程 glassfish 服务器日志并找出确切的错误消息。

# javascript - Javascript：替换 a 但不是 a 在 ab

> ID：11681822
> 
> 赞同：2
> 
> 时间：2012-07-27T05:12:53.550
> 
> 标签：javascript, regex

我想知道是否可以替换某些字符串，但不能替换其他在 javascript 中包含相同值的字符串。例如，假设我有文本`A AB`并且只想替换独立`A`而不是 AB 中的 A。（注意：我知道在这种情况下我可以手动执行此操作，但我计划在大文本块中使用这样的场景）是否有算法或内置的 js 命令来执行此操作？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-27T05:24:47.240

使用带有[单词边界](http://www.regular-expressions.info/wordboundaries.html)的正则表达式。

```
var str = 'A AB';
str = str.replace(/\bA\b/g, ''); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T13:42:03.457

除了其他答案，您还可以写： string=string.replace(/a(?=\s)/,""); (?= 表示只有**在下一个**字符是空格/制表符等时才会替换 'a'。如果您需要其他条件，也可以编写不同的正则表达式而不是 \s (只有 'a' 会匹配，而不是条件(?=...) 中的正则表达式

对于评论中的其他问题（在 Asaph 答案中），您可以写：

str = str.replace(RegExp("\\b"+x+"\\b",'g'),'');

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T05:45:53.817

如果您只想替换独立的字母“A”，那么您可能需要以下内容：

```
var re = /(^|\s)a(\s|$)/ig; 
```

然后你可以这样做：

```
var s = 'A ab a ba a-b b-a a:v b a';
alert(s.replace(re, 'Z')); // ZabZba a-b b-a a:v bZ 
```

请注意，这也会删除字母周围的空白。

### 编辑

保留空格：

```
alert( s.replace(re, '$1Z$2') ); // Z ab Z ba a-b b-a a:v b Z 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-27T05:23:20.517

您可以使用 javascript 中的正则表达式来实现这一点，

```
string = string.replace(/A/, "AB") 
```

将替换第一次出现的字符。

```
string = string.replace(/A/g, "AB") 
```

将所有出现的“A”替换为“AB”

# mysql - centos中如何增加MYSQL表空间

> ID：11681828
> 
> 赞同：0
> 
> 时间：2012-07-27T05:13:33.627
> 
> 标签：mysql, centos

我已经在 Centos 服务器下安装了 MYSQL，我想增加表的空间，但我不能这样做。请任何人帮助我做到这一点..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T05:26:36.710

表空间你的意思是存储数据的表的大小？没有限制它会随着数据插入到您的硬盘大小限制而增长

# oop - 创建多个类或使用 Switch 语句进行类版本控制的最佳实践是什么

> ID：11681830
> 
> 赞同：1
> 
> 时间：2012-07-27T05:13:40.430
> 
> 标签：oop, design-patterns

在我的项目中，我必须维护类的版本。所以我可以采用两种方法

```
 1) Edit Same Class with Version and Use Switch Case for maintain older version

    Pro : 
    1) We only have to create one single class  
    2) If you want to used old version class attribute which are now not supported in
       current version of class so you just provide them Default Values.

    Cons:
    1) There may be possibility that some attribute are not used now but they still
       present in Class for supporting older version
    2) It also break Open Closed Principle 
```

下一个方法：

```
 2) Create new classes for each version and maintain them by using any design pattern 
   so for example I have Base Class = BaseClass and It have multiple Derived classes 
   like DerivedClass1,DerevivedClass2\. Each class have different version.

   Pro:
   1) If now we want to use old version class so we not have to worry about its 
   attribute behavior  because we will fetch DerivedClass1 for Version 1 ,    
   DerivedClass2 for Version 2
   2) We will put all common property in Base class so Derived class will only have 
    extended property.
   3) We also follow Open Closed Principle

   Cons: 
   1) We need to create new classes for all new versions. 
```

因此，我想知道您对此的看法，如果您需要更多说明，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T15:22:23.870

对您的问题的回答通常取决于如何使用版本控制类：

*   如果它们是[poco](/questions/tagged/poco "显示标记为“poco”的问题")或[pojo](/questions/tagged/pojo "显示标记为“pojo”的问题")等数据的容器，请查看**适配器**和**间接层**模式以及[soa](/questions/tagged/soa "显示标记为“soa”的问题")示例。尤其是[servicebus](/questions/tagged/servicebus "显示标记为“服务总线”的问题")如何同时处理不同版本的 Web 服务或数据库。

*   如果它们是不同版本算法的容器，那么[继承](/questions/tagged/inheritance "显示标记为“继承”的问题")或[组合](/questions/tagged/composition "显示标记为“作文”的问题")、**抽象工厂**模式可能[会](/questions/tagged/oop "显示标记为“oop”的问题")与您同在！

对我来说，你的第一个建议是将所有鸡蛋放在一个类中，并为其配置属性，这听起来像是一场噩梦，不值得花时间。

# java - 收集 Object[] 数组中的所有方法参数

> ID：11681831
> 
> 赞同：2
> 
> 时间：2012-07-27T05:13:40.947
> 
> 标签：java

我正在考虑在 Object[] 数组中收集泛型方法的所有方法参数以用于日志记录。我知道使用方面可以更好地实现这一点，但是不允许使用它，并且如果可能的话，我正在寻找一种基于纯反射的方法

为了澄清，假设一个方法调用

```
class A {
    foo(int a, Object b){

    }
} 
```

给定 A 的对象实例，是否可以在“foo”方法中动态确定传递的参数？我似乎无法在 java.lang.reflect 或注释中找到任何 API 来确定这一点。

**编辑**：我目前使用下面的实现进行日志记录。然而，在调用它之前将所有方法参数收集在一个数组中是很乏味的，并且想知道这是否可以以某种方式推断出来。我正在寻找除方面以外的任何建议/库

```
private static final ConcurrentMap<Class, Method[]> METHODS = new ConcurrentHashMap<Class, Method[]>();
protected void log(Class clazz, String methodName, Object[] args) {
    Method[] methods = METHODS.get(clazz);
    if (methods==null){
        methods = clazz.getDeclaredMethods();
        METHODS.put(clazz, methods);
    }

    for(Method method:methods){
        if (method.getName().equals(methodName)){
            StringBuilder builder = new StringBuilder(methodName + '(');
            int i=0;
            for (Class type:method.getParameterTypes()){
                builder.append(type.getSimpleName())
                        .append(" [")
                        .append(args[i++])
                        .append("] ,");
            }
            String str = StringUtils.removeEnd(builder.toString(), ",") + ")";
            LoggerFactory.getLogger(clazz).info(str);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T05:24:05.557

您可以通过此获取参数类

```
Class  aClass = ...//obtain class object
Method method = aClass.getMethod("doSomething", null)
Class[] parameterTypes = method.getParameterTypes(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T05:16:57.907

`Object<Object>[],` you rewrite/override the `toString()` methods on every object which you need to be logging.

# php - 无需查询的资产自动缓存破坏？

> ID：11681835
> 
> 赞同：4
> 
> 时间：2012-07-27T05:14:27.610
> 
> 标签：php, symfony, assetic

我找不到太多这方面的信息。

我想将所有css（和js确实）文件编译成这样的：

```
css/all-c498dsfbc.css 
```

现在我只能得到这些：

```
css/all.css
css/c498dsfbc.css
css/all.css?v=123 
```

第一个很糟糕，因为它根本没有缓存破坏。

第二个生成一个可用于缓存破坏的哈希，但由于某种原因，当我更改 .css 文件中的某些内容然后再次运行时它不会改变：

```
$ php app/console assetic:dump --env=prod --no-debug 
```

第三个也很糟糕，因为我需要手动更改版本，如下所述：http: [//symfony.com/doc/current/reference/configuration/framework.html#ref-framework-assets-version](http://symfony.com/doc/current/reference/configuration/framework.html#ref-framework-assets-version)。另外，我不认为为此使用查询是一个好主意（我认为某些浏览器或 CDN 可能不喜欢这样）。如果更改文件名会更好：'all-c498dsfbc.css'。如果我没记错的话，这就是它在 Rails 中的完成方式。

有什么想法吗？

**编辑**

好像缺少这个功能，我不敢相信：[https ://github.com/kriswallsmith/assetic/pull/190](https://github.com/kriswallsmith/assetic/pull/190)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-27T06:14:31.887

在我们的项目中，为了确保 Varnish 不会为每个部署缓存新内容，我们手动更改版本 - 资产选择那个。我认为，这是一种常见的做法。但在我们的例子中 - 它保存在文件夹中，例如`web/version-1.2.3/css/all.css`.

我们的`framework`部分配置：

```
 templating:
        engines: ['twig']
        assets_version: %release_version%
        assets_version_format: "version-%%2$s/%%1$s" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-16T09:45:15.257

我知道这是一个旧线程，但它位于谷歌的顶部，所以我认为值得更新：

您现在可以使用[cache buster worker](https://github.com/kriswallsmith/assetic/blob/master/src/Assetic/Factory/Worker/CacheBustingWorker.php)对资产执行此操作。但是 2.3.0 资产包没有它的配置，因此您现在需要手动启用它。这可以通过以下服务定义来完成：

```
#config.yml or a service.yml
#...
services:
    assetic.worker.cache_buster:
        class: Assetic\Factory\Worker\CacheBustingWorker
        public: false
        arguments:
            lazy_manager: @assetic.asset_manager
        tags:
            worker_factory: { name: assetic.factory_worker } 
```

此解决方法来自缓存破坏者工作器配置的拉取请求：[https ://github.com/symfony/AsseticBundle/pull/119/files](https://github.com/symfony/AsseticBundle/pull/119/files)

# python - 如何在scrapy python中使用蜘蛛的名称动态创建csv文件

> ID：11681842
> 
> 赞同：2
> 
> 时间：2012-07-27T05:15:16.950
> 
> 标签：python, csv, scrapy, web-crawler

嗨，我正在研究 scrapy 以获取一些 html 页面，

我已经编写了我的蜘蛛，并且我已经从文件中的页面中获取了所需的数据`spider.py`，并且在我的`pipeline.py`文件中，我想将所有数据写入一个`csv file`以蜘蛛的名称动态创建的文件，下面是我的`pipeline.py`代码

**管道.py：**

```
from scrapy import log
from datetime import datetime

class examplepipeline(object):

    def __init__(self):
        dispatcher.connect(self.spider_opened, signal=signals.spider_opened)
        dispatcher.connect(self.spider_closed, signal=signals.spider_closed)

    def spider_opened(self, spider):
        log.msg("opened spider  %s at time %s" % (spider.name,datetime.now().strftime('%H-%M-%S')))
        self.exampleCsv = csv.writer(open("%s(%s).csv"% (spider.name,datetime.now().strftime("%d/%m/%Y,%H-%M-%S")), "wb"),
                   delimiter=',', quoting=csv.QUOTE_MINIMAL)
        self.exampleCsv.writerow(['Listing Name', 'Address','Pincode','Phone','Website'])           

    def process_item(self, item, spider):
        log.msg("Processsing item " + item['title'], level=log.DEBUG)
        self.exampleCsv.writerow([item['listing_name'].encode('utf-8'),
                                    item['address_1'].encode('utf-8'),
                                    [i.encode('utf-8') for i in item['pincode']],
                                    item['phone'].encode('utf-8'),
                                    [i.encode('utf-8') for i in item['web_site']]
                                    ])
        return item 

    def spider_closed(self, spider):
        log.msg("closed spider %s at %s" % (spider.name,datetime.now().strftime('%H-%M-%S'))) 
```

**结果：**

```
--- <exception caught here> ---
  File "/usr/lib64/python2.7/site-packages/twisted/internet/defer.py", line 133, in maybeDeferred
    result = f(*args, **kw)
  File "/usr/lib/python2.7/site-packages/Scrapy-0.14.3-py2.7.egg/scrapy/xlib/pydispatch/robustapply.py", line 47, in robustApply
    return receiver(*arguments, **named)
  File "/home/local/user/example/example/pipelines.py", line 19, in spider_opened
    self.examplecsv = csv.writer(open("%s(%s).csv"% (spider.name,datetime.now().strftime("%d/%m/%Y,%H-%M-%S")), "wb"),
exceptions.IOError: [Errno 2] No such file or directory: 'example(27/07/2012,10-30-40).csv' 
```

这里实际上蜘蛛的名字是`example`

我不明白上面的代码有什么问题，它应该使用蜘蛛名称动态创建 csv 文件，但是显示上面提到的错误，谁能告诉我那里发生了什么............

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T05:34:18.693

问题在于文件名中的正斜杠（目录分隔符）。不允许。尝试在日期中使用其他字符。

更多信息在这里 [http://www.linuxquestions.org/questions/linux-software-2/forward-slash-in-filenames-665010/](http://www.linuxquestions.org/questions/linux-software-2/forward-slash-in-filenames-665010/)

此链接有助于获取您想要的格式 [如何在 Python 中以常规格式打印日期？](https://stackoverflow.com/questions/311627/how-to-print-date-in-a-regular-format-in-python)

```
>>> import datetime
>>> datetime.date.today()
datetime.date(2012, 7, 27)
>>> str(datetime.date.today())
'2012-07-27' 
```

在您的代码中使用它

```
open("%s(%s).csv"% (spider.name,datetime.now().strftime("%d-%m-%Y:%H-%M-%S")) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-01T12:24:57.807

正如[Kamal](https://stackoverflow.com/a/11682022/1906307)指出的那样，当前的问题是您创建的文件名中存在正斜杠。Kamal 的解决方案有效，但我不会使用 Kamal 建议的方法来解决这个问题，但是：

```
open("%s(%s).csv"% (spider.name, datetime.now().replace(microsecond=0).isoformat()) 
```

这里主要是使用`.isoformat()`将其放入 ISO 8601 格式：

```
YYYY-MM-DDTHH:MM:SS.mmmmmm 
```

它的优点是可以按时间顺序递增排序。`.replace(microsecond=0)`调用是删除微秒信息，在这种情况下，输出`.mmmmm`中将不存在尾随`.isoformat()`。`.replace()`如果您想保留微秒信息，您可以挂断电话。当我放弃微秒时，我编写其余的应用程序以防止两个调用创建同一个文件。

此外，您可以删除自定义`__init__`并重命名`spider_opened`为`open_spider`,`spider_closed`和`close_spider`. `open_spider`当蜘蛛打开和蜘蛛关闭时， Scrapy 会自动调用`close_spider`。你不必挂在信号上。文档早在 Scrapy 0.7 就提到了这些方法。

# c++ - 在重载运算符中访问另一个类的数据成员

> ID：11681846
> 
> 赞同：1
> 
> 时间：2012-07-27T05:15:37.447
> 
> 标签：c++, operator-overloading, private-members

我有这个运营​​商

```
Mtx Mtx::operator*(const Vtr &rhs) const
{
Mtx Q(nrows, ncols, 0);

for (int i = 0; i < nrows; ++i) {
    for (int j = 0; j < ncols; ++j) {
        Q.ets[i][j] = 0.0;

        for (int k = 0; k < rhs.length; ++k) {
            Q.ets[i][j] += ets[i][k] * rhs.ets[k];
        }
    }
  }
return Q;
} 
```

我调用这个运算符`M3 = M1 * V1`，我收到编译器错误，因为`length`在`ets[k]`第三个循环中是类的私有成员`Vtr`。我怎样才能访问它们？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-27T05:17:52.027

Let `Mtx` be a friend of `Vtr`.

```
 class Vtr {
     friend class Mtx;
     //...
 }; 
```

Or let the `Mtx::operator*` method be a friend.

```
 class Vtr {
     friend Mtx Mtx::operator*(const Vtr &) const;
     //...
 }; 
```

Either of these changes will let your current implementation work without any further changes.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-27T05:22:17.873

例如，成为数据`Mtx`的朋友`Vtr`或提供对数据的公开评估

```
class Vtx {
 public:
  const SomeType& operator[](unsigned int i) const { return ets[i]; }

}; 
```

这实际上将数据访问与底层实现分离，因为操作符可以以不同的方式实现。

另一方面，它提供了对底层表示的直接访问，因此它添加了一个约束，即您不能以更改给定索引和给定元素之间的映射的方式更改实现。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-27T05:18:57.820

Friend is your answer!!

Either you can make the class a friend or the function.

But I'm not sure if that is the correct logic for you case.

Mostly if you cant access a variable that means you shouldn't access it.

Check if you are doing correctly with access specifiers. And the only way to go about is friend then use 'friend' function or class.

# django - 如何从模板中的扩展用户配置文件访问数据？

> ID：11681848
> 
> 赞同：0
> 
> 时间：2012-07-27T05:15:48.510
> 
> 标签：django, templates, view, model

我正在尝试确定我应该在下面的模板中包含什么，以便提取插入到下面模型的“报价”字段中的数据。目前，模板中没有显示任何内容。有什么建议吗？

# 模型

```
class UserProfile(models.Model):
    user = models.ForeignKey(User, primary_key=True)
    quote = models.CharField('About', max_length =  200, null=True, blank=True)
    website = models.URLField('Personal website/blog', null=True, blank=True)
    #facebook = models.CharField('Facebook profile page', max_length = 200, null=True, blank=True)

class UserProfileForm(ModelForm):
    class Meta:
        model = UserProfile
        fields = ('quote', 'website')
        widgets = {
            'quote': Textarea(attrs={'cols': 18, 'rows': 7, 'style': "width: 300px;"}),
        } 
```

# 看法

```
@login_required 
def user_profile(request):
    user = User.objects.get(pk=request.user.id)
    if request.method == 'POST':
        upform = UserProfileForm(request.POST)
        if upform.is_valid():
            up = upform.save(commit=False)
            up.user = request.user
            up.save()
            return HttpResponseRedirect('/accounts/profile')
    else:
        upform = UserProfileForm()
    return render_to_response('reserve/templates/edit_profile.html', locals(), context_instance=RequestContext(request)) 
```

# 模板

```
{{user.quote}} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T05:23:28.327

尝试这个

```
{% for profile in user.userprofile_set.all %}
   {{profile.quote}}
{% endfor %} 
```

`quote`不是`User`模型的字段，所以首先访问`UserProfile`实例然后访问`quote`。

# postgresql - GeoServer won't write to my PostgreSQL updateable view

> ID：11681852
> 
> 赞同：2
> 
> 时间：2012-07-27T05:16:10.047
> 
> 标签：postgresql, postgis, geoserver, postgresql-8.4

Following on from [this earlier question](https://stackoverflow.com/questions/11664302/how-to-update-table-when-view-is-updated) I'm on PostgreSQL 8.4 and am having trouble with updatable views.

I have a view:

```
CREATE VIEW filedata_view
AS SELECT num, id, ST_TRANSFORM(the_geom,900913) AS the_geom
FROM filedata 
```

And want to update it from my application throw Geoserver. But get a error:

```
<ServiceExceptionReport version="1.2.0" xmlns="http://www.opengis.net/ogc" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.opengis.net/ogc http://schemas.opengis.net/wfs/1.0.0/OGC-exception.xsd">
 <ServiceException> {http://www.opengeospatial.net/cite}filedata_view is read-only    </ServiceException>
</ServiceExceptionReport> 
```

So views in PostgresSql are not updatable. I need create a rule or trigger to update the view.

I tried this:

```
CREATE OR REPLACE RULE ins_view_2 AS
ON UPDATE TO filedata_view DO INSTEAD  UPDATE filedata SET the_geom=ST_TRANSFORM(NEW.the_geom,70066)
WHERE num=NEW.num 
```

but it didn't help, I'm still getting the same error.

Where is my mistake?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T05:25:14.760

不要为此使用规则，而是使用[触发器](http://www.postgresql.org/docs/current/interactive/trigger-definition.html)。您至少需要 9.1 版本，旧版本不支持视图触发器。

> 触发器是一种规范，即每当执行某种类型的操作时，数据库应自动执行特定功能。触发器可以附加到表和视图。
> 
> 在表上，触发器可以定义为在任何 INSERT、UPDATE 或 DELETE 操作之前或之后执行，每个修改的行执行一次，或者每个 SQL 语句执行一次。此外，只有在 UPDATE 语句的 SET 子句中提到某些列时，才能将 UPDATE 触发器设置为触发。触发器也可以触发 TRUNCATE 语句。如果发生触发事件，则在适当的时间调用触发器的函数来处理该事件。

有传言说，规则将在一段时间后 EOL。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-27T06:10:09.677

首先，我完全同意弗兰克的观点。使用 9.1，和一个表触发器。但是，这和视图都可能无法解决您的问题。

尝试`UPDATE`从 psql 对您的视图进行手册。如果这可行，并且如果您使用与 opengeospatial 相同的用户 ID 进行连接，那么我会说问题可能是 opengeospatial 太聪明了，并且“知道”视图无法更新。要么，要么它正在尝试`INSERT`并且您没有`INSERT`在您的视图上添加匹配规则。

消息“filedata_view is read-only”不是 PostgreSQL 可能产生的消息。我想知道 opengeospatial 是否使用 JDBC 元数据（假设它是 Java）或 INFORMATION_SCHEMA 或类似来查询模式，确定这`filedata_view`是一个视图，并得出结论它因此无法更新它。

如果它是来自 PostgreSQL 的消息，它会改为：

```
# UPDATE customer_v SET customer_number = 1234; 
ERROR:  cannot update view "the_view" 
HINT:  You need an unconditional ON UPDATE DO INSTEAD rule or an INSTEAD OF UPDATE trigger. 
```

`log_statement = 'all'`启用并`postgresql.conf`重新加载 postgresql可能会提供有用的信息。重新测试，然后查看日志，看看 opengeospatial 到底在做什么。

`ON SELECT`如果事实证明它正在检测视图，您也许可以通过添加到空表的规则来解决该问题。该表将像视图一样工作，但 GeoServer 无法判断它是一个视图，并且可能同意写入它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-20T17:21:48.847

如果您的 Postgres >= 9.3，您可以使用 GeoServer 更新来自视图的功能，至少如果该视图是另一个表的子集（我认为这不适用于连接或复合字段..）。

方法如下：http: [//osgeo-org.1560.x6.nabble.com/postgresql-postgis-views-and-primary-keys-td3796362.html](http://osgeo-org.1560.x6.nabble.com/postgresql-postgis-views-and-primary-keys-td3796362.html)

这真的对我有用！

# javascript - Select dropdown by ajax

> ID：11681854
> 
> 赞同：0
> 
> 时间：2012-07-27T05:16:34.483
> 
> 标签：javascript, ajax

I need some ajax code to do some functions with drop down. I have three table of values: one for country, then state and city. And I have three dropdown to show these values.

First it should show:

*   select country
*   select state
*   select city

in that drop down(select) respectively.

When I select united kingdom from the first dropdown, in the second drop down it must show the states of the united kingdom. And again when I select a state from the state dropdown it must show the cities of that state in the third dropdown(city).

I want to do this with ajax. Does any one have a code to do this?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T05:35:41.947

片段[http://coffeestain-it.blogspot.fr/2011/08/mvc3-cascading-lists-using-ajax-and.html?m=1](http://coffeestain-it.blogspot.fr/2011/08/mvc3-cascading-lists-using-ajax-and.html?m=1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T05:37:06.540

我已经做了你需要的 [去这里](http://www.teknords.com/aizaz/propertyadvisor/)

选择类型、位置。如果您需要相同的内容，我会这样做，我将发布我的代码，您可以修改它

**更新** 我要从上面的网站复制代码，我让你修改它。我将粘贴“类型”下拉列表的代码，你可以这样做，而不是为其他人做。一件事是它非常古老的项目，所以我是通过 Javascript 而不是 jQuery 来完成的，希望它会激怒你。:(

```
<td>Type</td>
<td>
      <select  id="type" onChange="propertyType(this.value)" name="type">
                            <option value="">All</option>
                            <option value="homes">Homes</option>
                            <option value="plots">Plots</option>
                            <option value="commercial">Commercial</option>
      </select>
</td> 
```

这是propertyType的js

```
function propertyType(str){
  if(str=='' || str=='plots'){
    document.getElementById("type_h").innerHTML=""; 
    document.getElementById("bed").innerHTML="";    
    }   
    else if(str=='commercial'){
    document.getElementById("bed").innerHTML="";    
          }
 else{
  document.getElementById("type_h").innerHTML="<img src='<?php echo $serverimageurl?>ajax-loader-small.gif' />";
    if(window.XMLHttpRequest){
    xmlhttp=new XMLHttpRequest();
 }
 else
{
    xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
}
    xmlhttp.onreadystatechange=function()
   {
    if(xmlhttp.readyState==4 && xmlhttp.status==200)
    {
        document.getElementById("type_h").innerHTML=xmlhttp.responseText;
    }
   }
   xmlhttp.open("GET","ajax/propertytype.php?s="+str,true);
   xmlhttp.send();
   }
 } 
```

这是propertytype.php

```
<?php
  $s=$_GET["s"];
  if($s=="homes"){
   ?>

 <select onchange="ajax_bed(this.value)" name="subtype" id="subtype" >
  <option value="">Type Of Houses</option>
  <option value="houses">Houses</option>
  <option value="flats">Flats</option>
  <option value="farmhouses">Farm Houses</option>
</select>

<?php
}
 if($s=="plots")
{
?>

 <?php
  }
  if($s=="commercial")
  {
  ?>
  <select name="subtype" id="subtype" >
   <option value="offices">Offices</option>
   <option value="shops">Shops</option>
   <option value="warehouses">Warehouses</option>
   <option value="factories">Factories</option>
   <option value="building">Buildings</option>
   <option value="other">Other</option>
  </select>
   <?php
  }
?> 
```

这是用于选择卧室数量的ajax函数

```
function ajax_bed(str){
  document.getElementById("bed").innerHTML="<img src='<?php echo $serverimageurl?>ajax-loader-small.gif' />";
  if(window.XMLHttpRequest){
    xmlhttp=new XMLHttpRequest();
   }
  else
    {
    xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }
    xmlhttp.onreadystatechange=function()
   {
    if(xmlhttp.readyState==4 && xmlhttp.status==200)
    {
        document.getElementById("bed").innerHTML=xmlhttp.responseText;
    }
   }
   xmlhttp.open("GET","ajax/bedroomsselection.php?t="+str,true);
   xmlhttp.send();
 } 
```

这是卧室选择.php

```
<?php
$t=$_GET["t"];
if($t=="houses"||$t=="flats"||$t=="farmhouses")
{
?>
 <select id="bed" name="bed">
   <option>None</option>
   <option>Single Bed</option>
   <option>Double Bed</option>
   <option>three Bed</option>
   <option>Four Bed</option>
   <option>Five Bed</option>
   <option>Six Bed</option>
   <option>Seven Bed</option>
   <option>Eight Bed</option>
   <option>Ten Bed</option>
   <option>More Than Ten Bed</option>
</select>

 <?php
 }
?> 
```

我希望你现在已经有了这个想法，是时候自己编写代码了 干杯

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T05:24:47.750

如果您已经熟悉 jQuery，您可能想查看如何通过 $.ajax() ( [http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/) ) 发送 ajax 请求 您可以添加更新列表的代码成功选项中的州和城市，并通过将 onchange 事件绑定到州和国家下拉列表来触发发送 ajax 调用。您可以使用 .bind() ( [http://api.jquery.com/bind/](http://api.jquery.com/bind/) ) 来执行此操作。

# flash - html5音频标签闪退

> ID：11681856
> 
> 赞同：8
> 
> 时间：2012-07-27T05:16:40.163
> 
> 标签：flash, html, audio

如何为 html5 音频标签实现 Flash 回退？例如我有这个音频标签

```
<div class = "div.jp-audio"><audio  class ="audio-player" name= "audio-player" src="song.mp3" ></audio></div> 
```

由于并非所有浏览器都支持 .mp3 文件，如何启用或创建 Flash 回退

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-29T07:35:53.920

这是一个很好的代码片段，它有一个很好地实现的 Flash 回调：

```
<audio id="audioplayer" preload controls loop style="width:424px;">
    <source src="audio.mp3">
    <source src="audio.caf">
</audio>
<script type="text/javascript">
    var audioTag = document.createElement('audio');
    if (!(!!(audioTag.canPlayType) && ("no" != audioTag.canPlayType("audio/mpeg")) && ("" != audioTag.canPlayType("audio/mpeg")))) {
        AudioPlayer.embed("audioplayer", {soundFile: "audio.mp3"});
    }
</script> 
```

这是我找到它的参考文献： [Getting HTML5 Audio Tag and Flash Fallback to work nicely with All Browsers](http://code.coneybeare.net/getting-html5-audio-tag-and-flash-fallback-to)

希望能帮助到你！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T05:22:01.150

这是一个使用[swfobject](http://code.google.com/p/swfobject/)和 JS的[实时示例。](http://jsfiddle.net/czEF9/17/)

**在 HTML 中：**

```
<div id="ytplayer"></div>​ 
```

**在 JS 中：**

```
var audioSupport = document.createElement('audio').canPlayType;

var swfPath = "http://www.youtube.com/v/XSGBVzeBUbk?enablejsapi=1&playerapiid=ytplayer&version=3";

var divID = "ytplayer";

if(audioSupport) { $("#ytplayer").append("Your Browser Supports audio"); }

else { swfobject.embedSWF(swfPath, divID, "425", "356", "8"); } 
```

# wpf - 在 WPF 应用程序中将文本发送到上层

> ID：11681860
> 
> 赞同：0
> 
> 时间：2012-07-27T05:17:24.577
> 
> 标签：wpf, exception, 3-tier

我正在做一个 WPF（不是 Web）应用程序。

3层

EF 代码优先

UI 层对逻辑层的引用和逻辑层对数据层的引用。

现在，我在数据层中有一个异常，我需要根据异常生成的文本显示一个 MessageBox。

但我不想在数据层中添加对 WindowsBase、PresentationCore 和 PresentationFramework 的引用。

如何从数据层向 UI 层发送文本并显示 MessageBox？

TIA

相关代码：

在 UI 层

```
 public void guardar(UserControlCliente UCCliente)
    {
        admin.guardarEntidadCliente(UCCliente.textBoxNombre.Text,
                                    UCCliente.textBoxPrimerApellido.Text,
                                    UCCliente.textBoxSegundoApellido.Text,
                                    "Normal",
                                    DateTime.Parse("01/01/2012"),
                                    DateTime.Parse("02/02/2012"),
                                    "obs 1");
    }

    private void buttonAgregar_Click(object sender, RoutedEventArgs e)
    {
        guardar(this);
    } 
```

在逻辑层

```
 public void guardarEntidadCliente(String nombre, String app1, String app2, String tipo,
                                      DateTime fechaReg, DateTime fechaUltCita, String obs)
    {
        Cliente cliente = new Cliente();
        cliente.Nombre = nombre;
        cliente.Apellido1 = app1;
        cliente.Apellido2 = app2;
        cliente.Tipo = tipo;
        cliente.FechaRegistro = fechaReg;
        cliente.FechaUltimaCita = fechaUltCita;
        cliente.Observaciones = obs;

        ControlDatos cd = new ControlDatos();
        cd.agregarCliente(cliente);
    } 
```

在数据层

```
 public void agregarCliente(Cliente cliente)
    {
        db.Clientes.Add(cliente);

        try
        {
            db.SaveChanges();
        }
        catch (DbEntityValidationException exc)
        {
            String mensaje = "";

            foreach (var validationErrors in exc.EntityValidationErrors)
                foreach (var validationError in validationErrors.ValidationErrors)
                    mensaje += validationError.ErrorMessage + "\n";

            db.Entry(cliente).State = EntityState.Detached;
            // MessageBox.Show(mensaje, "Se han encontrado errores", MessageBoxButton.OK, MessageBoxImage.Error);
        }
    } 
```

我需要在 UI 层运行注释行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T05:34:30.643

您可以在 UI 层处理数据层异常。你不是吗？

您可以为此目的使用[System.Windows.Application.Current.DispatcherUnhandledException](http://msdn.microsoft.com/en-us/library/system.windows.application.dispatcherunhandledexception)事件。

**编辑**

根据您的代码，您可以抛出`MessageBox`特殊类型的异常（例如，MyDataTierException）并使用您的消息对其进行初始化。

在您的 UI 层中，您应该订阅 DispatcherUnhandledException，并根据需要处理它 - 显示 MessageBox，您可以从异常中获取哪些文本。

# javascript - Samsung TV Video Caching using HTML5 and JS

> ID：11681862
> 
> 赞同：7
> 
> 时间：2012-07-27T05:18:01.107
> 
> 标签：javascript, html, html5-video, fileapi, samsung-smart-tv

I have to develop a Samsung TV application to play videos that are served from a remote server, which I don't have access to.

Actually I've made an application to play videos of my own server. But my current requirements are as follows:

1.  I want to play videos that are served from a remote host (say //remote.com/video_id) to which I have no access, but my TV application is connected to my server (say //myserver.com/samsungapp)
2.  I have to cache file on my Samsung TV before playing. ie., buffer 100% and then play

I've checked `FileApi` and `FileReader` using HTML5 and JS, and come up with following barriers:

Its difficult to send cross domain request from Javascript. Since I don't have access to remote host, I can't set `access-control-origin` on the remote server's response.

Any suggestions are appreciated...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T06:20:15.327

有修改缓冲区大小的方法：[SetTotalBufferSize](http://www.samsungdforum.com/Guide/View/Developer_Documentation/Samsung_SmartTV_Developer_Documentation_2.5/API_Reference/JavaScript_APIs/Device_API/Player/SetTotalBufferSize)

但是您不能缓冲 100% 的视频，因为它只会耗尽电视的 RAM 内存。

因此，您有事件来检查缓冲是否完成：[OnBufferingComplete](http://www.samsungdforum.com/Guide/View/Developer_Documentation/Samsung_SmartTV_Developer_Documentation_2.5/API_Reference/JavaScript_APIs/Device_API/Player/OnBufferingStartComplete_)

我不知道您的任务的目的是什么，但您可以将整个文件下载到设备而不是缓冲它。

这是方法： http: [//www.samsungdforum.com/Guide/View/Developer_Documentation/Samsung_SmartTV_Developer_Documentation_2.5/API_Reference/JavaScript_APIs/SEF_Plugin_API/Download](http://www.samsungdforum.com/Guide/View/Developer_Documentation/Samsung_SmartTV_Developer_Documentation_2.5/API_Reference/JavaScript_APIs/SEF_Plugin_API/Download)

因此，您可以下载电影并将其保存到设备中。然后从本地播放您的电影。

# iphone - 如何使用 iPhone SDK 合并两个音频文件？

> ID：11681865
> 
> 赞同：0
> 
> 时间：2012-07-27T05:18:42.420
> 
> 标签：iphone, objective-c, ios, cocoa-touch, caf

我想在我的 iPhone 应用程序中合并两个 .caf 音频文件？

你能告诉我怎么做吗？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-27T05:25:30.547

**选项1：**

参考这个链接：

[将多个音频文件合并为一个](https://stackoverflow.com/questions/5851123/join-multiple-audio-files-into-one)

*该帖子中无效名称*的答案说：

> MP3 是一种流格式，这意味着它在文件的开头或结尾没有一堆元数据。虽然这有很多缺点，但优点之一是您可以将 MP3 文件连接到一个文件中并播放。
> 
> 这几乎就是您通过连接到 NSMutableData 所做的事情，其缺点是您可能会耗尽内存。另一种选择是使用 NSFileHandle 在磁盘上构建文件。
> 
> **这不适用于大多数文件格式（aac/m4a、aif、caf 等）**。MP3 实际上只是一个转储到磁盘的流，元数据在帧头中（或者，在 ID3 中，夹在帧之间），所以这就是它起作用的原因。

**选项 2：**

[在 iphone 中将两个 .caf 音频文件合并为一个音频文件](https://stackoverflow.com/questions/6092867/combine-two-caf-audio-files-into-a-single-audio-file-in-iphone)

*Midhere*在这篇文章中的回答：

> 您可以使用 ExtAudioFileService 来完成。在 ios 开发人员库中，他们提供了两个示例来将一个音频文件转换为另一种格式。在这些文件中，他们打开一个音频文件用于读取，另一个文件用于写入（转换后的音频）。您可以更改或更新代码以读取两个文件并将它们以相同格式（caf）或压缩格式写入一个输出文件。首先，您打开第一个音频文件并从中读取每个数据包并将其写入新的音频文件。完成第一个音频文件后，关闭文件并打开第二个音频文件进行阅读。现在从第二个音频文件中读取每个数据包并写入新创建的音频文件并关闭第二个音频文件和新的音频文件。
> 
> 请找到这些示例代码的链接（[1](http://developer.apple.com/library/ios/#samplecode/iPhoneACFileConvertTest/Listings/AudioConverterFileConvert_cpp.html#//apple_ref/doc/uid/DTS40010581-AudioConverterFileConvert_cpp-DontLinkElementID_3)、[2](http://developer.apple.com/library/ios/#samplecode/iPhoneExtAudioFileConvertTest/Introduction/Intro.html#//apple_ref/doc/uid/DTS40009222)）……希望这对您有所帮助……祝您好运。:)

所以尝试将其转换为另一种格式，然后尝试组合它。

**选项 3：**

参考：

[将两个 CAF 文件连接在一起](https://stackoverflow.com/questions/4506129/joining-two-caf-files-together)

*dineth*在这篇文章中回答：

> 如果有人想知道答案，有办法做到这一点。您必须使用 AudioFiles API 调用。基本上，你会：
> 
> 使用具有正确参数（比特率等）的 AudioFileCreate 创建一个新的音频文件。打开你的第一个文件，读取数据包并将它们写入新创建的文件。打开你的第二个文件并做同样的事情。确保您的计数器在写入第一个文件后未清零。AudioFileClose——你就完成了！注意事项：对于本地文件，您必须运行一个方法来转义空格
> 
> 就是这样！

**选项 4：**

略有不同的注释。

我认为您正在 CAF 中录制文件并尝试合并它们。因此，在这种情况下，您最终可以尝试以 caf 以外的其他格式录制文件。

试试这个链接：

[iOS：以caf以外的其他格式录制音频](https://stackoverflow.com/questions/11118836/record-audio-in-other-format-than-caf-in-ios)

希望这可以帮助。

# operating-system - Qemu hanging in main system call

> ID：11681868
> 
> 赞同：1
> 
> 时间：2012-07-27T05:18:59.750
> 
> 标签：operating-system, qemu, osdev, pintos

I was working on the [Pintos](http://en.wikipedia.org/wiki/Pintos) project . And while I was implementing a priority donation mechanism for the proper priority scheduling , QEMU emulator just hung up (I have attached an image and the dump of the pintos is as below ) . I tried debugging and inserting printf statements , but during debugging qemu via a remote host , it again hung up as soon as it entered main . Can anybody tell me how do I troubleshoot all this . Otherwise I will have to reinstall the entire code and qemu and everything in between .

The dump from pintos:

```
sankalps@ubuntu:~/projects/os_projects/pintos/src$ pintos --gdb -- run alarm-zero
qemu -hda /tmp/IbpgyXzQhW.dsk -m 4 -net none -serial stdio -s -S
open /dev/kvm: No such file or directory
Could not initialize KVM, will disable KVM support
PiLo hda1
Loading.........
Kernel command line: run alarm-zero
made it till here 
```

![Pintos emulated on QEMU](../Images/dcacaead355f3ae880f5ee8466386947.png)Pintos emulated on QEMU

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-27T09:05:49.627

我认为要么您没有正确的内核版本，要么您的硬件不支持虚拟化，可能两者兼而有之

`lsmod | grep kvm`
看看模块 kvm 和 kvm_intel 是否已加载，
如果没有则用于`modprobe kvm kvm_intel`加载模块。如果无法加载这些模块，那么您的机器可能不支持 KVM，`grep --color vmx /proc/cpuinfo`如果您的输出包含 vmx 或 svx，则可以通过硬件虚拟化来发现这一点，并且您需要正确的内核版本。Linux 从 2.6 版开始提供 KVM 支持。 36.4 .通过编译新内核我想你不会遇到这个问题。如果问题是你的机器能够虚拟化但内核不支持。这里有一个关于如何设置机器的[链接](http://www.cse.iitd.ernet.in/~sbansal/csl862-virt/lec/hw3.html)。查看实验室和工具链接。检查在提供的课程列表中搜索实验室和工具，您会发现很多关于如何设置 QEMU、BOCHS、启动 VM 等的内容。
你也可以尝试使用 bochs，我假设你正在做 pintos 作为你的操作系统课程的一部分。所以可以通过设置`--EMULATOR=bochs`（类似的东西）更改要在命令行中使用的模拟器
虽然你的虚拟机会慢一点，但你不会面临 KVM 支持不可用的问题。

干杯:)

# google-apps-script - Converting .xls to google spreadsheet in google apps script

> ID：11681873
> 
> 赞同：8
> 
> 时间：2012-07-27T05:19:36.447
> 
> 标签：google-apps-script, google-sheets, google-drive-api

I have an .xls file stored in Google Drive. I want to convert it to the Google Sheets spreadsheet file format from Google Apps Script. Is there any way to do this without external solutions?

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2016-02-24T09:06:04.693

现在可以使用 Advanced Drive 服务：

[https://developers.google.com/apps-script/advanced/drive](https://developers.google.com/apps-script/advanced/drive)

使用 Drive.Files.insert 时，只需将可选参数“convert”设置为“true”。

```
var file = {
    title: 'Converted Spreadsheet'
  };
  file = Drive.Files.insert(file, xlsxBlob, {
    convert: true
  }); 
```

这也是从上面给出的[问题中获得的](http://code.google.com/p/google-apps-script-issues/issues/detail?id=1019)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-27T13:41:42.463

除了使用提供的“上传”和转换功能外，它目前不可用。在此处请求增强请求：[http ://code.google.com/p/google-apps-script-issues/issues/detail?id=1019](http://code.google.com/p/google-apps-script-issues/issues/detail?id=1019)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-05-17T14:40:09.627

**这是在特定文件夹中创建文件的完整代码**：（ *是一个提示，但从@ben-visness 评论中对我来说并不完全明显）*

```
var file = { 
    "title": filename, 
    "parents": [{"id": folderId}]
};
file = Drive.Files.insert(file, blobObj, {
    "convert": true
}); 
```

**注意**：这需要从 Google Apps 脚本 -*菜单 > 资源 > 高级 Google 服务*和*菜单 > 资源 > 高级 Google 服务 > Google API 控制台*中启用高级驱动器服务。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-06-25T18:42:03.920

这是我用来将 Excel 文件转换为 Google 表格文件的代码，该文件具有相同的名称和相同的文件夹。

```
var excel = DriveApp.getFileById(...);

var resource = {
   title : excel.getName(),
   mimeType : MimeType.GOOGLE_SHEETS,
   parents: [{id : folder.getId()}],
}

Drive.Files.insert(resource, excel.getBlob()); 
```

在我的情况下，我已经有一个`folder`可用的对象，它代表我想将工作表保存到的文件夹，但是您可以使用`excel.getParents()`.

您还必须启用名为“Drive API”的高级 Google 服务才能使用 `Drive.Files`. [在这里](https://developers.google.com/apps-script/guides/services/advanced#enabling_advanced_services)阅读更多。

解决方案最初来源于[这篇](https://www.labnol.org/code/20500-convert-microsoft-excel-xlsx-to-google-spreadsheet)文章。

# jquery - IE9中的Jquery UI Layout插件错误

> ID：11681874
> 
> 赞同：1
> 
> 时间：2012-07-27T05:19:42.353
> 
> 标签：jquery, jquery-ui, internet-explorer-9

我只是在尝试 jQuery UI 布局插件文档中显示的示例。我已经下载了所需的库，并在文档的“示例”页面下复制并粘贴了代码。

我的代码：

```
<!DOCTYPE html >
<html>
<head>
    <script src="../scripts/jquery-1.6.3.min.js" type="text/javascript"></script>               
    <script src="../scripts/jquery-ui-1.8.22.custom.min.js" type="text/javascript"></script>
    <script src="../scripts/jquery.layout-latest.min.js"></script>          
    <script>
      $(document).ready(function () {
      $('body').layout({ applyDefaultStyles: true });
    });
</script>
</head>
<body>
<div class="ui-layout-center">Center</div>
<div class="ui-layout-north">North</div>
<div class="ui-layout-south">South</div>
<div class="ui-layout-east">East</div>
<div class="ui-layout-west">West</div>
</body>
</html> 
```

这显示了一个很好的布局和调整大小的作品，但是当我调整任何面板的大小时，我会收到一个 JavaScript 警报，上面写着：“/调整 [北窗格] 后大小不准确。有关详细信息，请参阅错误控制台”。

此错误仅出现在 IE9 中，在 Google Chrome 中调整大小工作正常而没有警报。

知道我做错了什么吗？或者如何不显示警报？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T08:41:44.543

我不知道您在示例代码中使用了哪个版本的 jquery UI Layout。但是在使用以下版本的库时，我遇到了与您相同的错误：jquery-1.7.2.js jquery-ui-1.8.22.custom.min.js jquery.layout-latest.js (ver. 1.3\. 0 – rc30.6)

从版本 1.3.0 rc 30.6 更改为 jquery.layout-1.2.0.js 会使您的示例在 IE9 中运行。但是，当我运行示例时，拆分条的重绘似乎存在错误；第一次拖放后，North 和 West/Center 分隔条变细。

[jquery UI 布局下载](http://layout.jquery-dev.net/downloads.cfm)

...我也刚刚发现演示站点包含在 IE9 中运行时产生相同错误的示例！- 似乎他们有一两件事要解决，以便 lib 在 IE 中工作......

[IE9 中的 Buggy 演示](http://layout.jquery-dev.net/demos.cfm)

# c# - How to get a image source from a webpage's source in C#

> ID：11681875
> 
> 赞同：0
> 
> 时间：2012-07-27T05:19:44.273
> 
> 标签：c#, httpwebrequest, webpage

I am trying to make a program easy enough my co-workers can use it. The program takes the inputted image ID number, adds it to the static link, and downloads the image. The problem is to get the image ID you have to view the pages source code. Is there a way I can have it so I input the document number / link and it automatically gets the image source from the webpage's source?

If you need to look at an example, here is a random example document: [http://ori2.polk-county.net/wb_or1/details.asp?doc_id=7029941&file_num=2008093164](http://ori2.polk-county.net/wb_or1/details.asp?doc_id=7029941&file_num=2008093164)

Also, I am using C#

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T06:50:41.297

假设你的文档都是通过同一个 URL 访问的。http://ori2.polk-county.net/wb_or1/details.asp

您可以使用 WebRequest 类来发布您的 doc_id 和 file_num。然后，您应该在响应中收到图像。

[这是一个很好的起点](http://msdn.microsoft.com/en-us/library/debx8sh9.aspx)

# android - How can I insert a period?

> ID：11681878
> 
> 赞同：0
> 
> 时间：2012-07-27T05:19:58.983
> 
> 标签：android, android-softkeyboard

I have an `EditText` in application. When I press `space` key twice through soft keyboard, a period should be inserted in that `EditText`.

How can I do that?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T05:43:33.933

试试`InputFilter`。这些使您能够检查哪些文本输入到您的`EditText`. 因此，如果您两次检测空间（为此您可以制作计数器），您可以修剪您的文本 append 。并再次展示。

您可以根据需要更改以下代码。

```
InputFilter filter=new InputFilter() {

        @Override
        public CharSequence filter(CharSequence source, int start, int end,
                Spanned dest, int dstart, int dend) {
            // TODO Auto-generated method stub
            for (int i = start; i < end; i++) 
              { 
                  if(Character.isSpace(source.charAt(i)))
                      {
                      return " ";
                      }
                  else if (!Character.isLetter(source.charAt(i))) 

                  { 
                          return ""; 
                  } 
              }   
            return null;
        }
    };

edittext.setFilters(new InputFilter[]{filter}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T06:58:41.627

您如何创建几个布尔值，在视图上添加一个侦听器并将它们设置为 true 用于输入， false 用于无输入。-> 如果用户按下不允许的键，则将它们全部设置为 false。否则，当它们都是真的时，做你需要做的事情。如果您愿意，您可以添加检查订单的逻辑。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T05:56:22.560

[将TextChangedListener 添加](http://developer.android.com/reference/android/widget/TextView.html#addTextChangedListener%28android.text.TextWatcher%29)到您的`EditText`. 并覆盖`afterTextChanged()`它的方法。现在检查`" "`Edittext 的文本中的（双空格），如果它包含，只需将其替换为`"."`

就像是，

```
final EditText edit = (EditText) findViewById(R.id.editText);
edit.addTextChangedListener(new TextWatcher()
{
 @Override
 public void afterTextChanged(Editable editable)
 {
    if (editable.toString().contains("  "))
    {
     edit.setText(ed.getText().toString().trim());
     edit.append(".");
    }
 }
}); 
```

# css - compass vertical rhythm not working

> ID：11681880
> 
> 赞同：0
> 
> 时间：2012-07-27T05:20:08.100
> 
> 标签：css, sass, vertical-alignment, compass-sass

I'm having a problem with the newest version of compass (0.12.2) and sass (3.1.20) where the vertical alignment mixins are not taking effect. When trying to validate the generated css with `compass validate`, it fails on the `compass/reset` include, as well as the border-radius mixin among others.

The code for the scss file in question can be found here in [this gist](https://gist.github.com/3186271). The errors I receive on validation are [here](https://gist.github.com/3186286). To see what the website looks like, go to [bitlimn.com](http://www.bitlimn.com). The vertical spacing should be 1.5x, but it looks to be 1x.

Basically, I don't see some of the code. It worked before I upgraded my compass and sass gems. Can anyone help me get back to fully functional compass/sass stylesheets?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T15:07:55.147

啊，我找到了答案。`html`当 mixin 源使用`html`块本身时，我在块内使用了 mixin“建立基线” 。本质上，我正在这样做：

```
html {
    html {...} // Mixin
    ...
} 
```

经验教训：在使用它们之前，请务必阅读您使用的函数/mixin 的源代码。

# javascript - 如何在 JSON 中存储层次结构？

> ID：11681884
> 
> 赞同：1
> 
> 时间：2012-07-27T05:20:30.220
> 
> 标签：javascript, database, json, structure

如何在 JSON 中存储层次结构？

我有以下层次结构：

层次结构：

```
 1:Publish, "Long description of Publish service", is_default
     7: 7 days,  150
    14:14 days,  600, +200%
    30:1 month, 1350, +300%
 2:Premium, "Long description..."
    14:14 days,  150
    30:1 month,  600
    60:2 month,  1500
 3:SuperPremium, "Long description...", disabled
    30:1 month,  150
    60:2 month,  600
    90:3 month,  1500, disabled 
```

在哪里：

*   “Publish, Premium, SuperPremium” - 是服务。1,2,3 - 服务 ID。

*   “7天、14天、28天”——是服务参数。7,14,28 - 参数 ID。

*   参数取决于服务。

下图说明了这一点：

![在此处输入图像描述](../Images/092ea55a042ad30fb2739def01c83703.png)

需要 JSON 格式的精简和可用结构。

在 JSON 中表示此层次结构的最佳方式是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T05:27:44.660

我会做类似的事情：

```
[
   {
      "Service":"Publish",
      "Desc":"Long description of Publish serive",
      "Params":[
         {
            "Days":"7",
            "Desc":"7 Days",
            "Cost":150
         },
         {
            "Days":"14",
            "Desc":"14 Days",
            "Cost":600,
            "Extra":"+200%"
         },{...}
      ]
   }, {...}, {...}
] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-27T05:33:05.140

可以像编写任何其他 JavaScript 对象一样编写 JSON。以您的示例案例为例

```
[
    {
        "publish":{
             "id":1,
             "description": "Some description",
             "text": "Publish",
             "enabled": true,
             "params": [
                 {
                    "days": 7,
                    "description": "7 days",
                    "cost": 300
                 },.....//and so on
             ]
         }
    }
] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-27T05:33:34.270

```
{
    "publish": {
        "id": 1,
        "desc": "Long description of Publish service",
        "state": 1,
        "params": [
            {
                "key": 7,
                "val": 100,
                "desc": "7 days",
                "pct": 0,
                "enabled": true
            },
            {
                "key": 14,
                "val": 600,
                "desc": "14 days",
                "pct": 200,
                "enabled": true
            },
            {
                "key": 30,
                "val": 1350,
                "desc": "30 days",
                "pct": 300,
                "enabled": true
            }
        ]
    },
    "premimum": {
        ...
    },
    "superPremimum": {
        ...
    }
} 
```

其中：`state`is 1：选中，0：未选中，-1：禁用

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-27T05:36:22.173

我的做法：

```
{
        'data' : [
        {
            'ServiceId' : 1
            'Name': 'Publish',
            'LongName': 'Long description of Publish service',
            'OptionalFlag': 'default',
            'Parameters': [
                { 'Id': 7, 'Amount': 7, 'Unit': 'days', 'Cost': 150, 'Surcharge': 0.0 },
                { 'Id': 14, 'Amount': 14, 'Unit': 'days', 'Cost': 600, 'Surcharge': 2.0 },
                { 'Id': 30, 'Amount': 1, 'Unit': 'month', 'Cost': 1350, 'Surcharge': 3.0 },
            ]
        },
        {
            'ServiceId' : 2
            'Name': 'Premium',
            'LongName': 'Long description of Publish service',
            'OptionalFlag': 'disabled',
            'Parameters': [
                { 'Id': 14, 'Amount': 14, 'Unit': 'days', 'Cost': 150, 'Surcharge': 0.0 },
                { 'Id': 30, 'Amount': 1, 'Unit': 'month', 'Cost': 600, 'Surcharge': 0.0 },
                { 'Id': 60, 'Amount': 2, 'Unit': 'month', 'Cost': 1500, 'Surcharge': 0.0 },
            ]
        },
        {
            'ServiceId' : 3
            'Name': 'SuperPremium',
            'LongName': 'Long description of Publish service',
            'OptionalFlag': 'disabled',
            'Parameters': [
                { 'Id': 30, 'Amount': 1, 'Unit': 'month', 'Cost': 150, 'Surcharge': 0.0 },
                { 'Id': 60, 'Amount': 2, 'Unit': 'month', 'Cost': 600, 'Surcharge': 0.0 },
                { 'Id': 90, 'Amount': 3, 'Unit': 'month', 'Cost': 1500, 'Surcharge': 0.0 },
            ]
        }
        ]
} 
```

**编辑：（格式细节）**

您将不得不在代码中处理一些格式化细节，并且没有任何结构能够规避这些细节。例如，您如何存储百分比附加费值，然后应用数学计算总计。我个人喜欢用 1.0 = 100% 来代表他们。您还必须处理时间单位（例如天和月）的多元化问题。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-27T05:24:48.933

```
[{
 prop1 : value
 prop2 : {
     level2Prop : value1
     . 
     .         
  }
},
{
 ...
}] 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-01T11:59:16.200

其中一个想法是：

```
 // default values
       {
        service:'publish', 
        period:7
       }

       // data
       {
        service:{  
                 'publish':{title:'Publish'}, 
                 'premium': {title:'Premium',    description: '...'}, 
                 'superpremium':{title:'SuperPremium', description: '...', disabled}
               },
        period:{ 
                'publish': {
                          7:{title: '7 days'}, 
                         14:{title:'14 days'}, 
                         28:{title:'28 days'}},
                'premium': {
                         14:{title:'14 days'}, 
                         28:{title:'28 days'}, 
                         36:{title:'36 days'}},
                'superpremium': {
                         28:{title:'28 days'}, 
                         60:{title:'60 days'}, 
                         90:{title:'90 days'}}
               }
       } 
```

# vb.net - Visual Basic .net 自定义数字文本框将默认值设置为 TextAlign 属性

> ID：11681887
> 
> 赞同：0
> 
> 时间：2012-07-27T05:20:45.667
> 
> 标签：vb.net

我正在编写一个数字文本框用户控件来过滤非数字数字。我想将 TextAlign 属性的默认值设置为 Right 当我将它放到表单时，但我无法做到。我浏览了网页，我得到的只是某种形式的覆盖属性 TextAlign，但没有任何效果。任何帮助将不胜感激。谢谢。

```
Public Class NumericTextBox
    Inherits TextBox

<DefaultValueAttribute(HorizontalAlignment.Right)> _
Public Overloads Property TextAlign() As HorizontalAlignment
    Get
        Return MyBase.TextAlign
    End Get
    Set(ByVal value As HorizontalAlignment)
        MyBase.TextAlign = value
    End Set
End Property 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T05:44:36.373

从[文档](http://msdn.microsoft.com/en-us/library/system.componentmodel.defaultvalueattribute.aspx)（在一个大黄色框中）：

> DefaultValueAttribute 不会导致成员使用属性值自动初始化。您必须在代码中设置初始值。

因此，您必须在继承类的构造函数中设置默认值。此外，您必须在属性中使用 Overrides 而不是 Overloads。

Stackoverflow上有很多相关的问题：

*   [更改继承的 .net 控件上的属性的 DefaultValue](https://stackoverflow.com/questions/163611/changing-the-defaultvalue-of-a-property-on-an-inherited-net-control)
*   [Visual Studio - 继承控件的新“默认”属性值](https://stackoverflow.com/questions/7367/visual-studio-new-default-property-values-for-inherited-controls)
*   [.Net DefaultValueAttribute 属性](https://stackoverflow.com/questions/705553/net-defaultvalueattribute-on-properties)

# servlets - 处理以下场景的 Servlet、Filter 和 Listener 有什么区别？

> ID：11681890
> 
> 赞同：0
> 
> 时间：2012-07-27T05:20:55.460
> 
> 标签：servlets, listener, servlet-filters

我有 3 个场景要处理

1) 验证用户

2) 对于登录后的任何请求，用户应具有有效的 HttpSession 唯一 ID。

3) 由于 HttpSession 中的某些值已针对该特定用户进行了修改，因此将审核日志条目写入数据库。

我认为对于

场景 1 - Servlet 很有帮助

场景 2 - 过滤器很有帮助

场景 3 - HttpSessionListner 很有帮助。

如果我们在 web.xml 中定义这 3 个并且请求由 web 容器处理，那么调用的顺序是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T05:32:33.673

1) **Servlet**取决于您赋予它的优先级，如果您将 'load-on-startup'
设为 1，那么它会在您的应用程序启动时立即调用，或者如果您没有，则在您发出请求时正常调用它.

2)在每次服务器请求时都会调用**过滤器。**

3) **HttpSessionListner**在你的会话被创建或销毁时被调用。

# android - 更改按钮颜色而不更改android中的形状

> ID：11681895
> 
> 赞同：11
> 
> 时间：2012-07-27T05:21:05.630
> 
> 标签：android, android-layout

当我说

```
 button.setBackgroundColor(Color.BLUE); 
```

按钮形状从默认形状变为矩形。我想在不影响其原始形状的情况下更改按钮颜色。请帮我。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2014-12-01T04:03:42.363

这是一个对我有用的解决方案，与公认的解决方案相反，它允许您动态更改颜色：

```
myButton = (ImageButton)myView.findViewById(R.id.my_button);
Drawable roundDrawable = getResources().getDrawable(R.drawable.round_button);
roundDrawable.setColorFilter(Color.BLUE, Mode.SRC_ATOP);

if(android.os.Build.VERSION.SDK_INT < android.os.Build.VERSION_CODES.JELLY_BEAN) {
    myButton.setBackgroundDrawable(roundDrawable);
} else {
    myButton.setBackground(roundDrawable);
} 
```

我使用的“round_button”drawable的XML，例如：

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android"
    android:shape="oval">
    <solid android:color="#4db6ac"/>
</shape> 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-07-27T06:22:03.563

每当您更改按钮的默认背景时，形状都会发生变化，因为默认形状是矩形，默认背景是可绘制圆角的形状。如果您使用任何其他背景，则此圆角效果将丢失。

如果使用可绘制的形状作为背景，则可以使用任何颜色或形状实现相同的效果。
以下是如何实现这一目标：

1.  创建一个可绘制的形状。
2.  将此可绘制对象用作按钮的背景。

形状可绘制的示例代码：

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android" >
    <solid
        android:color="#f8f8f8"/>
    <corners
        android:radius="4dp"/>
    <padding 
        android:left="10dp"
        android:right="10dp"
        android:top="5dp"
        android:bottom="5dp"/>
    <stroke 
        android:width="1dp"
        android:color="#aeaeae"/>
</shape> 
```

如果你想要一个带有选择器的按钮，那么使用这个 xml 作为背景

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android" >
    <item android:state_pressed="true">
        <shape >
            <solid
                android:color="#ff0000" />
            <stroke 
                android:width="1dp"
                android:color="#ff0000" />
            <corners
                android:radius="4dp" />
            <padding
                android:left="10dp"
                android:right="10dp"
                android:top="10dp"
                android:bottom="10dp" />
        </shape>
    </item>
    <item >
        <shape >
            <gradient
                android:startColor="#ff2727"
                android:endColor="#890000"
                android:angle="270" />
            <stroke
                android:width="1dp"
                android:color="#620000" />
            <corners
                android:radius="4dp" />
            <padding
                android:left="10dp"
                android:right="10dp"
                android:top="10dp"
                android:bottom="10dp" />
        </shape>        
    </item>
</selector> 
```

这是一个选择器 xml，其中项目作为不同的形状可绘制对象。如果按下按钮，即按钮的状态为**state_pressed**，则使用顶部可绘制形状，否则使用底部可绘制形状。
我希望这将有所帮助。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-11-23T20:44:41.080

就在几分钟前，我遇到了同样的问题。在布局文件的 XML 中使用`android:backgroundTint`属性将解决该问题。按钮将保留其原始形状，并且波纹效果不会丢失。

XML 应该类似于：

```
 <Button
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Click Me!"
        android:textColor="#FFF"
        android:backgroundTint="#2196f3" /> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-27T05:38:28.460

当您默认使用颜色对象时，android系统使用paint对象填充按钮，并且paint对象只能填充矩形，圆形而不是曲线如果您真的想用颜色和曲线形状表示按钮，请使用自定义视图（帆布）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-27T05:49:31.643

您可以创建自己的自定义按钮。

检查以下链接以获取帮助：

[http://www.dibbus.com/2011/02/gradient-buttons-for-android/](http://www.dibbus.com/2011/02/gradient-buttons-for-android/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-12-01T04:24:09.437

在你的 layout.xml 中检查这个

机器人：背景=“*****”

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-02-01T13:45:30.630

这对我有用 - 在运行时/动态更改。例如，单击按钮时，颜色会发生变化，但形状需要保持不变。

首先，您需要在 xml 中定义按钮：

```
 <Button
            android:id="@+id/myButton"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:background="@drawable/buttonshape"
            android:text="Change Colour but keep shape, please" /> 
```

你会在上面看到它调用`buttonshape`，所以在你的`drawable`文件夹中：

（它是一个矩形，灰色，带有深灰色边框`1dp`）

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android"
    android:shape="rectangle">
    <solid android:color="#D3D3D3" />
    <corners android:radius="3dp" />

    <stroke
        android:width="1dp"
        android:color="#aeaeae" />
</shape> 
```

现在文件夹中的一个新`xml`文件， ，用于按钮按下状态。颜色将是绿色，其他一切都相同。`drawable``buttonpressed.xml`

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android">
    android:shape="rectangle">
    <solid android:color="#2AB40E" />
    <corners android:radius="3dp" />

    <stroke
        android:width="1dp"
        android:color="#aeaeae" />
</shape> 
```

现在，在我们的活动中单击按钮：

```
 private void myButton() {

        myButton.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {

//              keep the slightly rounded shape, when the button is pressed
                myButton.setBackgroundResource(R.drawable.buttonpressed);

etc..etc... 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-04-01T15:14:15.933

这是一个老问题，但对于未来的寻求者来说，这对我有用......

在可绘制的按钮形状中：

```
<shape xmlns:android="http://schemas.android.com/apk/res/android"
    android:shape="rectangle">
    <corners
        android:bottomRightRadius="10dp"
        android:bottomLeftRadius="10dp"
        android:topRightRadius="10dp"
        android:topLeftRadius="10dp" />
</shape> 
```

在按钮的 layout.xml 中：

```
<Button
    android:id="@+id/button"
    android:layout_width="150dp"
    android:layout_height="38dp"
    android:layout_marginEnd="20dp"
    android:layout_marginBottom="20dp"
    android:background="@drawable/buttonshape"
    android:backgroundTint="@color/colorButtonOrange"
    android:text="@string/button_text"
    android:textColor="@color/colorWhite"/> 
```

使用`android:backgroundTint`，按钮在活动开始时变为橙色。

在我的活动中，我只用一行更改按钮颜色：

```
button.getBackground().setColorFilter(Color.GREY, PorterDuff.Mode.SRC_ATOP); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-07-27T09:06:26.167

当使用“setBackgroundColor”改变视图的形状时，我遇到了同样的问题。我用“setTint”解决了它

# c++ - 管理员权限 2 个应用程序

> ID：11681896
> 
> 赞同：0
> 
> 时间：2012-07-27T05:21:14.917
> 
> 标签：c++, windows

我们在清单中有一个带有 requireAdministrator 的 app1，这个应用正在启动 app2。App2 清单文件包含 asInvoker。app2 会继承管理员权限吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T06:13:18.880

通常我认为答案是“是”。

但是请注意，有两个不同的概念，一个是用户权限，一个是正在运行的进程的完整性级别。

标准用户可以启动“低”和“中”完整性级别的进程，而管理员也可以启动“高”级别的进程。所有用户的默认值通常是“中”。

ProcessExplorer 对于查看进程的完整性级别非常有帮助（只需添加列）。

# python-2.7 - 得到错误： DLL 加载失败：操作系统无法运行 %1

> ID：11681899
> 
> 赞同：1
> 
> 时间：2012-07-27T05:21:41.183
> 
> 标签：python-2.7, m2crypto, pyopenssl

我已经在我的 Windows XP SP3 机器以及我使用 import 语句的任何地方安装了 python 2.7.2 和 M2Crypto-0.21.1-py2.7.egg-info：

`from M2Crypto import X509,ASN1,Rand,EVP,RSA`它的投掷错误

**DLL 加载失败：操作系统无法运行 %1。**

Python2.7 和 windows XP SP3 似乎不支持 M2Crypto 版本。除此之外，我将 pyOpenSSL-0.13.winxp32-py2.7.msi 用于 openSSL。

有人可以帮我解决这个问题吗？

# refresh - 每秒在外部刷新特定的 html 文件

> ID：11681901
> 
> 赞同：0
> 
> 时间：2012-07-27T05:22:01.960
> 
> 标签：refresh

我必须查看一个提供信息的网站。但是网站是静态的，不会自动刷新。

所以，我必须在外部刷新 html。有没有浏览器可以做到这一点？或者有什么办法可以做到。可能吗？作为网站的第三个查看者，对特定网站的刷新做一些事情……

我看到了：[在计时器上自动刷新浏览器中的 HTML 页面 - 每 15 分钟](https://stackoverflow.com/questions/7206694/refresh-html-page-in-browser-automatically-on-timer-every-15-min) （我做了功课）但这适用于可以访问服务器的人。不是这种情况。我无法访问该网站。他们不会为了自己而插入这一行。让我们假设这种方式。

我可能会带来网站并使用他们的网址显示我的服务器？欢迎任何帮助。先谢谢了~

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T05:57:39.217

谷歌浏览器有声称这样做的扩展（例如[https://chrome.google.com/webstore/detail/easy-auto-refresh/aabcgdmkeabbnleenpncegpcngjpnjkc](https://chrome.google.com/webstore/detail/easy-auto-refresh/aabcgdmkeabbnleenpncegpcngjpnjkc)）。不过，我实际上并没有尝试过其中任何一个。

# .net - 如何循环实体并修改它们

> ID：11681902
> 
> 赞同：0
> 
> 时间：2012-07-27T05:22:12.400
> 
> 标签：.net, entity-framework, generics, repository, crud

我不知道这是否可能：有没有办法遍历我的 edmx 上下文的所有实体，通过其名称查找实体并更新它来获取对实体的引用？

我的想法是，对于许多具有相同字段（如 ID 和名称）的实体，也许我可以只使用一个视图作为 CRUD。因此，例如，每当我想对“category1”进行操作时，我可以将其名称作为字符串发送给控制器，按名称搜索该实体并在其中更新或创建单个记录。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T08:33:56.863

这是可能的 - 看看`System.Data.Metadata.Edm.EdmItemCollection`.

请参阅[http://msdn.microsoft.com/en-us/library/bb387138(v=vs.90).aspx](http://msdn.microsoft.com/en-us/library/bb387138(v=vs.90).aspx)

是否明智是另一个问题。

# ruby-on-rails-3 - 处于调试模式的 Rails 服务器

> ID：11681905
> 
> 赞同：0
> 
> 时间：2012-07-27T05:22:30.687
> 
> 标签：ruby-on-rails-3

当我尝试使用“rails server --debugger”在调试器模式下运行 rails server 时。我在控制台上收到以下错误。

```
/home/navyug/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/ext/module.rb:36:in `const_missing': uninitialized constant Debugger::LocalInterface::Readline (NameError)
    from /home/navyug/.rvm/gems/ruby-1.9.3-p194/gems/ruby-debug19-0.11.6/cli/ruby-debug/interface.rb:55:in `block (2 levels) in initialize'
    from /home/navyug/.rvm/gems/ruby-1.9.3-p194/gems/ruby-debug19-0.11.6/cli/ruby-debug/interface.rb:53:in `each'
    from /home/navyug/.rvm/gems/ruby-1.9.3-p194/gems/ruby-debug19-0.11.6/cli/ruby-debug/interface.rb:53:in `block in initialize'
    from /home/navyug/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/open-uri.rb:35:in `open'
    from /home/navyug/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/open-uri.rb:35:in `open'
    from /home/navyug/.rvm/gems/ruby-1.9.3-p194/gems/ruby-debug19-0.11.6/cli/ruby-debug/interface.rb:52:in `initialize'
    from /home/navyug/.rvm/gems/ruby-1.9.3-p194/gems/ruby-debug19-0.11.6/cli/ruby-debug/processor.rb:61:in `new'
    from /home/navyug/.rvm/gems/ruby-1.9.3-p194/gems/ruby-debug19-0.11.6/cli/ruby-debug/processor.rb:61:in `initialize'
    from /home/navyug/.rvm/gems/ruby-1.9.3-p194/gems/ruby-debug19-0.11.6/cli/ruby-debug.rb:9:in `new'
    from /home/navyug/.rvm/gems/ruby-1.9.3-p194/gems/ruby-debug19-0.11.6/cli/ruby-debug.rb:9:in `<module:Debugger>'
    from /home/navyug/.rvm/gems/ruby-1.9.3-p194/gems/ruby-debug19-0.11.6/cli/ruby-debug.rb:8:in `<top (required)>'
    from /home/navyug/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.7/lib/rails/rack/debugger.rb:9:in `initialize'
    from /home/navyug/.rvm/gems/ruby-1.9.3-p194/gems/rack-1.4.1/lib/rack/server.rb:295:in `new'
    from /home/navyug/.rvm/gems/ruby-1.9.3-p194/gems/rack-1.4.1/lib/rack/server.rb:295:in `block in build_app'
    from /home/navyug/.rvm/gems/ruby-1.9.3-p194/gems/rack-1.4.1/lib/rack/server.rb:291:in `reverse_each'
    from /home/navyug/.rvm/gems/ruby-1.9.3-p194/gems/rack-1.4.1/lib/rack/server.rb:291:in `build_app'
    from /home/navyug/.rvm/gems/ruby-1.9.3-p194/gems/rack-1.4.1/lib/rack/server.rb:301:in `wrapped_app'
    from /home/navyug/.rvm/gems/ruby-1.9.3-p194/gems/rack-1.4.1/lib/rack/server.rb:252:in `start'
    from /home/navyug/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.7/lib/rails/commands/server.rb:70:in `start'
    from /home/navyug/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.7/lib/rails/commands.rb:55:in `block in <top (required)>'
    from /home/navyug/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.7/lib/rails/commands.rb:50:in `tap'
    from /home/navyug/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.7/lib/rails/commands.rb:50:in `<top (required)>'
    from script/rails:6:in `require'
    from script/rails:6:in `<main>' 
```

RubyGems 环境

*   红宝石版本：1.8.24
*   红宝石版本：1.9.3（2012-04-20 补丁级别 194）[i686-linux]
*   安装目录：/home/navyug/.rvm/gems/ruby-1.9.3-p194
*   红宝石可执行文件：/home/navyug/.rvm/rubies/ruby-1.9.3-p194/bin/ruby
*   可执行目录：/home/navyug/.rvm/gems/ruby-1.9.3-p194/bin
*   红宝石平台：
    *   红宝石
    *   x86-linux
*   宝石路径：
    *   /home/navyug/.rvm/gems/ruby-1.9.3-p194
    *   /home/navyug/.rvm/gems/ruby-1.9.3-p194@global
*   宝石配置：
    *   :update_sources => 真
    *   :详细 => 真
    *   :基准 => 假
    *   ：回溯 => 假
    *   :bulk_threshold => 1000
*   远程资源：
    *   [http://rubygems.org/](http://rubygems.org/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T06:47:48.430

我认为您的设置中缺少 Readline 包。由于您使用的是 RVM，请尝试通过 rvm 安装 readline 包。这些链接可能会有所帮助：

*   [以前与 readline 问题相关的类似 SO 问题](https://stackoverflow.com/questions/4498919/problems-with-the-rails-console-rvm-and-readline)
*   [修复 Ruby on Rails 控制台的 Readline](http://vvv.tobiassjosten.net/ruby-on-rails/fixing-readline-for-the-ruby-on-rails-console)
*   [RVM 包：Readline](https://rvm.io/packages/readline/)

# android - 列表视图滚动不顺畅

> ID：11681914
> 
> 赞同：1
> 
> 时间：2012-07-27T05:23:09.203
> 
> 标签：android

我有两个列表视图。当滚动另一个列表视图时，我需要自动滚动一个列表视图。两个列表视图都应该有这个能力

我在两个列表视图中实现了 onScrollListner

对于列表视图 1

```
@Override
public void onScroll(AbsListView view, int firstVisibleItem,
                int visibleItemCount, int totalItemCount) {
if (l1.getChildAt(0) != null) {
    Rect r = new Rect();
    l1.getChildVisibleRect(l1.getChildAt(0), r, null);
    l2.setSelectionFromTop(l1.getFirstVisiblePosition(), r.top);
    }

} 
```

对于列表视图 2

```
@Override
public void onScroll(AbsListView view, int firstVisibleItem,
                int visibleItemCount, int totalItemCount) {
if (l2.getChildAt(0) != null) {
    Rect r = new Rect();
    l2.getChildVisibleRect(l2.getChildAt(0), r, null);
    l1.setSelectionFromTop(l2.getFirstVisiblePosition(), r.top);
    }

} 
```

我对此有两个问题

1 - 列表滚动不顺畅。（不像普通的列表视图）

2 - 我只能使用一个列表视图滚动两个列表视图。（当我使用 l2 滚动时，两者都会滚动。但当我使用 l1 滚动时它不起作用。两者都保持固定）

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T06:04:15.623

这是您的应用程序，因此您可以做任何您想做的事情，但我对您想要实现的目标感到困惑。拥有两个列表视图的唯一想法是分别表示两种不同类别的数据，以便可以分别访问（滚动或选择）它们。
如果您需要表示需要并排显示为列表的两类数据，那么您可以有一个包含两列的列表行。
像这样的东西会起作用：
![在此处输入图像描述](../Images/abd39c7b76e036d0cb0c3417688aab06.png)

您可以使用不同类型的数据填充这两行，并且可以一起滚动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T08:46:50.777

我发现了一种不同的方法来获得相同的结果。我删除了我的两个列表视图并将其替换为具有两列的网格视图。这样我可以在不实现 onScrollListner 的情况下滚动两者，我什至可以使用我用于两个列表视图的自定义适配器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T05:49:54.750

发生这种情况是因为您将 listview 放入 listview :)

您可以使用它来解决您的问题。

假设 L1 在 L2 内，那么

```
L1.setOnTouchListener(new OnTouchListener() {

            @Override
            public boolean onTouch(View arg0, MotionEvent arg1) {

                if(arg1.getAction() == MotionEvent.ACTION_DOWN || arg1.getAction() == MotionEvent.ACTION_MOVE)
                {
                L2.requestDisallowInterceptTouchEvent(true);

                }
                return false;
            }
        }); 
```

# ruby-on-rails - Kaminari 在哪里计算它的页面 url 链接？

> ID：11681915
> 
> 赞同：3
> 
> 时间：2012-07-27T05:23:17.953
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord, kaminari

我正在使用我制作的自定义模型，它伪装成基于表格的 ActiveRecord 对象。相反，它由 SQL 视图支持。幕后有一些诡计。

问题是与 Kaminari 的分页链接无法正常工作。他们正在显示正确的页码和页面链接数，只是指向错误的路线。

我需要知道它在 Kaminari 源中的哪个位置找出到它被设置为分页的对象的路径。或者，如果有人熟悉用于计算的活动记录方法名称。

我一直在搜索源代码，但我无法弄清楚。

**更新**
我的实际问题是由我的路线文件引起的。我有这个条目 -

```
match 'dashboard' => 'users#start', :as => 'user_root' 
```

而不是我的链接引用 /users/start?page=x 他们引用到 /users/dashboard?page=x。我仍然处于相同的控制器操作中，但我查看了需要来自 /users/start 的分页链接的页面，所以我认为它会使用它而不是这个匹配规则。删除了匹配规则，我准备好了！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-27T13:18:16.400

上面的评论`Kaminari::ActionViewExtension#paginate`说它接受`:params`选项哈希中的键，因此您可以使用它来覆盖 URL 参数：

```
paginate @bloops, params: {controller: "foos", action: "index"} 
```

默认情况下，它假定我们正在对“当前”页面进行分页，这是通常的情况。

来自`Kaminari::Helpers::Tag#initialize`：

```
@params = @options[:params] ? template.params.merge(@options.delete :params) : template.params 
```

# twitter - 嵌入式推文完成事件？

> ID：11681919
> 
> 赞同：5
> 
> 时间：2012-07-27T05:23:32.407
> 
> 标签：twitter, jquery-masonry

对单个推文使用 Twitter 的嵌入代码会导致加载一个名为 widget.js 的脚本。该脚本负责动态生成推文的 HTML。

嵌入推文的渲染完成时是否有由 widget.js 触发的事件？我的代码如何发现渲染已完成？

我需要这个，因为我正在尝试使用 jQuery Masonry 来布局一组推文。Masonry在推文完全渲染*之前固定每条推文的容器高度，从而导致重叠。*我想收到通知，所有推文都已完全呈现，以刷新 Masonry 布局。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T09:03:45.447

我最终使用了一个 jQuery“监视”插件（例如[https://github.com/darcyclarke/jQuery-Watch-Plugin](https://github.com/darcyclarke/jQuery-Watch-Plugin)）来监视容器 div 上的 DOM 变化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T13:36:00.483

如果您在[此处查看未压缩的代码，](http://twitter.com/javascripts/widgets/widget.js)搜索“render”会产生这个有趣的条件

```
 if (this._rendered) {
        var anchor = this.byClass('twtr-join-conv', 'a');
        anchor.href = 'http://twitter.com/' + this._getWidgetPath();
    } 
```

代码中略低的是

```
 this._rendered = true;
    // call the ready handler
    this._ready();
    return this; 
```

你也许可以探索...

# android - 将图像从画布保存到 SD 卡时出现 FileNotFound 异常

> ID：11681920
> 
> 赞同：0
> 
> 时间：2012-07-27T05:23:34.550
> 
> 标签：android

我收到的错误是在这个特定的文件中

```
 FileInputStream fstream = new FileInputStream("data/data/com.demo.filesave/AllData"); 
```

==>>07-27 10:41:30.710: java.io.FileNotFoundException: /data/data/com.demo.filesave/AllData (权限被拒绝)

==>>07-27 10:41:33.914: V/Log_tag(9274): java.io.FileNotFoundException: /data/data/com.demo.filesave/AllData/signature.png (权限被拒绝)

```
//File SignSave = Environment.getExternalStorageDirectory();

FileWrite(SignSave,"confirmation"); 
    public  void FileWrite(File aPath,String aBody)
        {
            try 
            {
                //System.out.println("@@@@ Inside Try FileWrite @@@@");
                Log.e("BEFORE FILE","BEFORE FILE");
                aPath.createNewFile();
                Log.e("AFTER FILE","BEFORE AFTER");
                PrintWriter out1 = new PrintWriter(aPath);
                Log.e("AFTER FILE","AFTER PRINT WRITER");
                out1.write(aBody);  
                Log.e("AFTER FILE","AFTER WRITING");
                //System.out.println (aBody.trim());
                out1.flush();
                out1.close();
            }
            catch (IOException ioe)
            {
                //System.out.println("@@@@ Inside Catch FileWrite @@@@"); 
                ioe.printStackTrace();
            }

        } 
```

==>>07-27 10:41:33.921: W/System.err(9274): at java.io.FileNotFoundException /mnt/sdcard (Is a directory) on line PrintWriter out1 = new PrintWriter(aPath);

清单文件中的权限

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" >
    </uses-permission> 
```

请帮助我解决问题。

问候，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T05:30:46.737

你可以使用这个（rl是启用drawingCache的相对布局）

```
newimg=rl.getDrawingCache();
String myPath=Environment.getExternalStorageDirectory()+"/saved_images";
File myDir=new File(myPath);
        try
        {
        myDir.mkdirs();
        }
        catch(Exception e)
        {
            Toast.makeText(getBaseContext(), "error: "+e.getMessage(), Toast.LENGTH_LONG).show();
        }
String fname = imagename+".jpg";
        File file = new File (myDir, fname);
        if (file.exists ()) file.delete ();
        String filename = file.getAbsolutePath ();
        FileOutputStream fos = null;
try {
        fos = new FileOutputStream (file);
        newimg.compress (CompressFormat.JPEG, 95, fos);
        Toast.makeText(getBaseContext(), filename+"  saved", Toast.LENGTH_LONG).show();
        } catch (Throwable ex) {
            Toast.makeText(getBaseContext(), "error: "+ex.getMessage(), Toast.LENGTH_LONG).show();
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T05:32:28.820

`data/data/`是内部存储中的目录。

您正在尝试明确写入内部存储，我认为这是不允许的。

许可：

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" >
    </uses-permission> 
```

让您的应用程序以编程方式写入 sd 卡（或其他“外部存储”）。因此，如果您希望将文件存储在缓存目录中，则应遵循官方文档中的说明：

> 如果您使用 API 级别 7 或更低版本，请使用 getExternalStorageDirectory() 打开代表外部存储根目录的文件。然后，您应该将数据写入以下目录：
> 
> `/Android/data/<package_name>/files/`
> 
> 如果您使用 API 级别 8 或更高版本，请使用 getExternalCacheDir() 打开一个文件，该文件代表您应该保存缓存文件的外部存储目录。

# java - 将处理器应用于多个项目而不是 Spring 批处理中的一个

> ID：11681930
> 
> 赞同：1
> 
> 时间：2012-07-27T05:25:09.577
> 
> 标签：java, spring-batch

在我的一个批次中，我需要调用一个 Web 服务来丰富从数据库中读取的项目中的一些数据，检查一些值，然后将这个丰富的项目写入另一个表。我的 Web 服务可以在同一个调用中支持多个请求，以尽量减少对 Web 服务的调用次数。实际上我的网络服务调用被定义为一个处理器：

```
<batch:tasklet task-executor="taskExecutor">
  <batch:chunk reader="bookingReader" processor="bookingEnrichWSProcessor"
    writer="bookingCompositeWriter" commit-interval="10" />
</batch:tasklet> 
```

似乎只有项目编写器可以支持在步骤定义中使用属性 commit-interval 在一次调用中编写多个项目。

我需要的是与阅读器一起阅读 10 个项目，然后用 10 个项目调用 ws，然后再将它们写入另一个表。

是否可以在处理器类中做到这一点？或者我应该在作家中移植这个逻辑。

感谢我们的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T07:45:57.020

你应该改变你的阅读器、处理器和编写器：阅读器必须输出一个对象。这个对象可以是一个列表<something>。

然后处理器获取此列表作为参数，并可以使用列表中的项目调用您的 WS。

最后，作者还将获得一个对象列表。你写它们。不要忘记删除 commit-interval ：当您只处理一个对象（10 个元素的列表）时，您将 commit-interval 设置为 1（如果您想编写 10 个元素）。

# apache-flex - 是否有任何适用于 flex 应用程序的 3rd-party 皮肤？

> ID：11681937
> 
> 赞同：0
> 
> 时间：2012-07-27T05:25:34.587
> 
> 标签：apache-flex, flex-spark, skin

我是 flex 新手，在 flex 4 中发现了新的 spark 库，具有更换皮肤的功能。

所以我想知道是否有任何第三方皮肤库可以轻松更改我的 flex 应用程序的皮肤。我用谷歌搜索了一段时间，但没有找到。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T05:35:25.177

[scalenine.com](http://www.scalenine.com)有一些你可以查看的皮肤。其中一些似乎不再可用（坏链接）。

# python-2.7 - NoneType 对象在等于 None 时返回 False

> ID：11681940
> 
> 赞同：0
> 
> 时间：2012-07-27T05:25:44.230
> 
> 标签：python-2.7, nonetype

我有一个不返回任何东西的函数，当我写的时候`type(function())`我得到 type `NoneType`。但什么时候`type(function()) == None`，反馈是`False`。为什么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T12:07:22.717

`None`是 type 的单例对象`NoneType`，但与任何其他对象（嗯，任何没有奇数`__eq__`方法的对象）一样，它不等于它的类型。

等效的检查是`type(function()) == type(None)`, 或者，因为在这种情况下类型检查有点傻，所以`function() is None`.

# android - 在 android mobile 中创建自定义 JellyBean ROM

> ID：11681941
> 
> 赞同：-1
> 
> 时间：2012-07-27T05:25:48.363
> 
> 标签：android, sony

我有索尼 xperia Sola。问题是索尼还没有发布冰淇淋三明治升级，现在谷歌已经开发了果冻豆ROM。所以我想为我的手机创建我的自定义果冻豆 ROM。我想知道怎么办？因为索尼可能在其手机中使用不同的芯片，所以该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T05:54:09.523

您最好的选择是流行的自定义 rom [cyanogenmod](http://www.cyanogenmod.com/)

# c++ - Qt 全局样式表加载？

> ID：11681943
> 
> 赞同：8
> 
> 时间：2012-07-27T05:26:03.340
> 
> 标签：c++, qt, qtstylesheets

如何使用 Qt 全局加载样式表（.qss 样式资源）？

我试图让事情比以下更有效率：

```
middleIntText -> setStyleSheet("QLineEdit {  border: 1px solid gray;
                                border-radius: 5px;padding: 0 8px;
                                selection-background-color:darkgray;
                                height:40px;font-size:15px;}"); 
```

我认为以下内容可以一次性为所有 QLineEdit 小部件加载 QLineEdit：

*qss 文件：*

```
QLineEdit {     border: 1px solid gray;
                border-radius: 5px;
                padding: 0 8px;
                selection-background-color:darkgray;
                height:40px;
                font-size:15px;} 
```

*cpp文件：*

```
QApplication a(argc, argv);
QFile stylesheet("formStyle.qss");
stylesheet.open(QFile::ReadOnly);
QString setSheet = QLatin1String(stylesheet.readAll());
a.setStyleSheet(setSheet); 
```

也许这是对的，而我做错了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-27T07:27:20.570

您调用了[QStyle * QApplication::setStyle ( const QString & style )](https://qt-project.org/doc/qt-5.1/qtwidgets/qapplication.html#setStyle-2) ，它从 QStyleFactory请求 QStyle 对象的*样式。*

相反，您应该调用设置应用程序样式表的[void QApplication::setStyleSheet ( const QString & sheet ) 。](https://qt-project.org/doc/qt-5.1/qtwidgets/qapplication.html#styleSheet-prop)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-27T14:29:31.627

上述尝试是正确的语法，但有一些原因可能无法正常工作。

**可能出现的问题：**

1.  未检索源文件 (.qss)

2.  选择了不正确的顶部小部件来应用级联。

3.  .qss (CSS) 代码的语法。

我不得不问我上面的问题的原因是我有这三个问题中的两个。我首先必须指出文件的正确位置，其次我必须直接向 QWidget 申请。

```
QFile stylesheet("G:/Applications/Projects/ProspectTracker/formStyle.qss");
stylesheet.open(QFile::ReadOnly);
QString setSheet = QLatin1String(stylesheet.readAll());
QWidget::setStyleSheet(setSheet); 
```

@Bill 感谢您的帮助。他指出我发过贴`.setStyle`而不发`.setStyleSheet`。上面的示例代码不再反映这一点，但如果我不改变我所做的任何事情都不会奏效。

# silverlight - 在 LongListSelector ItemTemplate 中引用数据绑定的 ContextMenu - Windows Phone

> ID：11681944
> 
> 赞同：0
> 
> 时间：2012-07-27T05:26:08.847
> 
> 标签：silverlight, windows-phone-7, contextmenu, silverlight-toolkit, longlistselector

我正在为 Windows Phone 7.5 应用程序编写 Silverlight。

我想在 LongListSelector 中引用 ContextMenu，因为我想在调用ContextMenu事件后立即设置`.IsOpen`为。我的想法是这应该自动发生，但事实并非如此。`false``Click`

我的 MenuItem 之一设置了模仿 PopUp的`<Grid>`from `collapsed`to的可见性。`visible`虽然代码执行良好并且可见性确实发生了变化。除非 ContextMenu 关闭，否则应用程序的 UI 不会显示网格。

我的 XAML`LongListSelector`包含一个我希望在 ContextMenuItem Click 事件中引用的`ContextMenu`调用。`Menu`

```
 <toolkit:LongListSelector x:Name="moviesLongList" Background="Transparent" IsFlatList="False" GroupHeaderTemplate="{StaticResource GroupHeaderTemplate}" GroupItemTemplate="{StaticResource GroupItemTemplate}" SelectionChanged="moviesLongList_SelectionChanged" GroupViewClosing="moviesLongList_GroupViewClosing" GroupViewOpened="moviesLongList_GroupViewOpened">

                    <toolkit:LongListSelector.GroupItemsPanel>
                        <ItemsPanelTemplate>
                            <toolkit:WrapPanel/>
                        </ItemsPanelTemplate>
                    </toolkit:LongListSelector.GroupItemsPanel>

                    <toolkit:LongListSelector.ItemTemplate>
                        <DataTemplate>
                            <StackPanel Height="91" Margin="20,0,0,20" Orientation="Horizontal">
                                <toolkit:ContextMenuService.ContextMenu >
                                    <toolkit:ContextMenu x:Name="Menu" Opened="ContextMenu_Opened" Loaded="Menu_Loaded" Unloaded="Menu_Unloaded">
                                        <toolkit:ContextMenu.ItemTemplate>
                                            <DataTemplate>
                                                 <toolkit:MenuItem Header="{Binding}" Click="ContextMenuButton_Click" LostFocus="MenuItem_LostFocus" />
                                            </DataTemplate>
                                        </toolkit:ContextMenu.ItemTemplate>
                                    </toolkit:ContextMenu>
                                </toolkit:ContextMenuService.ContextMenu>

                                <Border HorizontalAlignment="Left" Width="61" Height="91" Background="{Binding ID, Converter={StaticResource ThumbImageConvert}}" />
                                <StackPanel Orientation="Vertical" HorizontalAlignment="Left" Width="395">
                                    <TextBlock x:Name="titleTextBox" Text="{Binding Title, Converter={StaticResource TitleConvert}}" Margin="6,0,6,0" d:LayoutOverrides="Width" FontSize="{StaticResource PhoneFontSizeLarge}" VerticalAlignment="Top" HorizontalAlignment="Left"/>
                                    <TextBlock x:Name="yearTextBox" Text="{Binding Year}" Margin="12,0,0,0" HorizontalAlignment="Left" FontSize="{StaticResource PhoneFontSizeMedium}" Foreground="{StaticResource PhoneSubtleBrush}" />
                                </StackPanel>
                            </StackPanel>
                        </DataTemplate>
                    </toolkit:LongListSelector.ItemTemplate>

                </toolkit:LongListSelector> 
```

我的 ContextMenuItem Click 事件背后的代码

```
 private void ContextMenuButton_Click(object sender, RoutedEventArgs e)
  {
        //
        // This is where I want to set Menu.IsOpen = false to close the ContextMenu.
        //

        if ((sender as MenuItem).Header.ToString() == "lend movie")
        {
                DisableAppBarIcons();
                LendPopUpOverlay.Visibility = System.Windows.Visibility.Visible;

        }

        if ((sender as MenuItem).Header.ToString() == "return to collection")
        {
            ... Do stuff
        }

        if ((sender as MenuItem).Header.ToString() == "add to boxset")
        {
             ... Do stuff

        }

        if ((sender as MenuItem).Header.ToString() == "delete")
        {
            ... Do stuff
        }

   } 
```

我在事件中设置了 ContextMenu 的 ItemSource `ContextMenu_Opened`。这些字段都是 type `List<String>`。

```
private void ContextMenu_Opened(object sender, RoutedEventArgs e)
    {
        LentMovieObj = (sender as ContextMenu).DataContext as Movies;

        if (LentMovieObj.IsLent)
        {
            (sender as ContextMenu).ItemsSource = menuItemsReturn;
        }
        else
        {
            (sender as ContextMenu).ItemsSource = menuItemsLendOut;
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T14:04:34.430

不知道为什么 ContextMenu 没有关闭，但这里有两个解决方案。首先是获取MenuItem 的父级。

```
private T GetParentOfType<T>(DependencyObject obj) where T : class
{
    if (obj == null) return null;

    var parent = VisualTreeHelper.GetParent(obj);
    while (parent != null)
    {
        if (parent is T) return parent as T;

        parent = VisualTreeHelper.GetParent(parent);
    }

    return null;
} 
```

然后从您的点击处理程序中获取菜单

```
var menu = GetParentOfType<ContextMenu>(sender as MenuItem);
menu.IsOpen = false; 
```

第二种解决方案是将 IsOpen 绑定到支持视图模型

```
<toolkit:ContextMenuService.ContextMenu >
    <toolkit:ContextMenu x:Name="Menu" Opened="ContextMenu_Opened" Loaded="Menu_Loaded" Unloaded="Menu_Unloaded" IsOpen="{Binding IsOpen}" ItemsSource="{Binding Items}">
        <toolkit:ContextMenu.ItemTemplate>
            <DataTemplate>
                <toolkit:MenuItem Header="{Binding}" Click="ContextMenuButton_Click" LostFocus="MenuItem_LostFocus" />
             </DataTemplate>
        </toolkit:ContextMenu.ItemTemplate>
     </toolkit:ContextMenu>
</toolkit:ContextMenuService.ContextMenu> 
```

更改您的公开活动：

```
private void ContextMenu_Opened(object sender, RoutedEventArgs e)
{
    LentMovieObj = (sender as ContextMenu).DataContext as Movies;

    if (LentMovieObj.IsLent)
    {
        (sender as ContextMenu).DataContext = new ContextMenuViewModel(menuItemsReturn);
    }
    else
    {
        (sender as ContextMenu).DataContext = ContextMenuViewModel(menuItemsLendOut);
    }
} 
```

然后是一个视图模型

```
public class ContextMenuViewModel : INotifyPropertyChanged
{
    private bool _isOpen = true;

    public ContextMenuViewModel(IEnumerable<string> items)
    {
        Items = items;
    }

    public event PropertyChangedEventHandler PropertyChanged;

    public bool IsOpen
    {
        get { return _isOpen; }
        set { _isOpen = value; OnPropertyChanged("IsOpen"); }
    }

    public IEnumerable<String> Items { get; set; }

    protected virtual void OnPropertyChanged(string propertyName)
    {
        var handler = PropertyChanged;
        if (handler != null)
        {
            handler(this, new PropertyChangedEventArgs(propertyName));
        }
    }
} 
```

然后将 ViewModel 的 IsOpen 属性设置为 false；

# asp.net - 在 ASP.NET 中工作时的 CSS 帮助

> ID：11681945
> 
> 赞同：0
> 
> 时间：2012-07-27T05:26:11.483
> 
> 标签：asp.net, css, master-pages

我有一个带有内容占位符的母版页。CSS 通过引用母版页中的样式表应用于此占位符。当我使用此母版页并将我的表格嵌入内容占位符时，我在新页面中应用的 CSS正在使用母版页未按要求反映。

有没有办法尽可能纠正这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T05:32:54.340

您应该将您的 contentplaceholder 保存到一个 div 中，并检查该 div 是否在 css 文件中给出了一些样式。通过这种方式，您可以检查/测试是否在您的 CPH 上应用了 CSS。即您应该将背景颜色设置为黑色或一些不同的颜色以验证...

# jquery - jQuery 克隆下拉菜单

> ID：11681952
> 
> 赞同：0
> 
> 时间：2012-07-27T05:26:55.220
> 
> 标签：jquery, datepicker, clone

我正在一个新领域工作并测试克隆。我相信它会在一些帮助下完全满足我的需要。主要思想是在选择第二个日期（结束日期）之后，然后创建适当数量的开始和结束时间。例如，如果我有一个为期 3 天的研讨会，那么每天都有可能在不同的时间开始和结束。

我可以获得警报以产生一些结果……例如，我可以获得日期差异。

很难克隆开始时间和结束时间。

```
//HTML
<form action="#" method="post"><center>
<table width="75%" border="0" cellpadding="10">
<tr>
<td align="center">Workshop Title:  <input name="workshoptitle" type="text" size="50" maxlength="100" /></td>
</tr>
<tr>
<td align="center">Workshop Description: <br /> <textarea name="workshopdescription" rows="5" cols="40" /></textarea></td>
</tr>
<tr>
<td align="center">Workshop Location:<br /> <textarea name="workshoplocation" cols="40" rows="4" /></textarea></td>
</tr>
<tr>
<td align="center">Start Date:<input type="text" class="field_name" size="10" id="startDate"  name="startDate" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
End Date:<input type="text" size="10" id="endDate" name="endDate" class="field_name" />
&nbsp;&nbsp;&nbsp;&nbsp;
Early Registration Deadline:<input type="text" class="field_name" size="10" id="earlyregexpdate"  name="earlyregexpdate" /></td>
</tr>
<tr>
<td align="center">Start Time:<select name="startHour1" id="startHour1" class="clonedInput">
<option>1</option>
<option>2</option>
<option>3</option>
<option>4</option>
<option>5</option>
<option>6</option>
<option>7</option>
<option>8</option>
<option selected="selected">9</option>
<option>10</option>
<option>11</option>
<option>12</option>
</select>
<font size="+2">:</font>
<select name="startMinute1" id="startMinute1" class="clonedInput">
<option>00</option>
<option>15</option>
<option>30</option>
<option>45</option>
</select>
&nbsp;&nbsp;
<select name="startampm1" id="startampm1" class="clonedInput">
<option>AM</option>
<option>PM</option>
</select>
&nbsp;&nbsp;
End Time:<select name="endHour1" id="endHour1" class="clonedInput">
<option>1</option>
<option>2</option>
<option>3</option>
<option>4</option>
<option selected="selected">5</option>
<option>6</option>
<option>7</option>
<option>8</option>
<option>9</option>
<option>10</option>
<option>11</option>
<option>12</option>
</select>
<font size="+2">:</font>
<select name="endMinute1" id="endMinute1" class="clonedInput">
<option>00</option>
<option>15</option>
<option>30</option>
<option>45</option>
</select>
&nbsp;&nbsp;
<select name="endampm1" id="endampm1" class="clonedInput">
<option>AM</option>
<option selected="selected">PM</option>
</select></td>
</tr>
<tr>
<td align="center">Open Registration Date:<input type="text" class="field_name" size="10" id="displayDate"  name="displayDate" />
&nbsp;&nbsp;
Would you like to make this workshop available? - Yes&nbsp;
<input name="makeAvailable" type="checkbox" value="Y" /></td>
</tr>
<tr>
<td align="center">Number of Presenters: <select name="nbrOfSpeakers">
<option>1</option>
<option>2</option>
<option>3</option>
<option>4</option>
<option>5</option>
<option>6</option>
<option>7</option>
<option>8</option>
<option>9</option>
<option>10</option>
</select>

</td>
</tr>
</table>
</center>

<br /><br /><center><input name="submit" type="submit" value="Submit" />
<input name="reset" type="reset" value="Reset Form" />
<input name="cancel" type="submit" value="Cancel" />

</center>
</form> 
```

jQuery

```
$(document).ready(function() {
    $('#display').hide();

    //http://charlie.griefer.com/blog/2009/09/17/jquery-dynamically-adding-form-elements/
    $('#startDate').datepicker({
        dateFormat: 'M dd, yy',
        minDate: '-6m',
        maxDate: '6m',
        showButtonPanel: true
    });

    $('#endDate').datepicker({
        dateFormat: 'M dd, yy',
        minDate: '-6m',
        maxDate: '6m',
        showButtonPanel: true
    });

    $('#earlyregexpdate').datepicker({
        dateFormat: 'M dd, yy',
        minDate: '-6m',
        maxDate: '6m',
        showButtonPanel: true,
        beforeShow: function() {

            $(function() {
                $("#startDate").datepicker({
                    dateFormat: 'mm/dd/yyyy'
                });
                $("#endDate").datepicker({
                    dateFormat: 'mm/dd/yyyy'
                });
            });

            //Total number of dates selected
            var start_date = $('#startDate').datepicker('getDate');
            var end_date = $('#endDate').datepicker('getDate');
            var total_days = (end_date - start_date) / 1000 / 60 / 60 / 24;

for (i = 0; i < total_days; i++) {

            var num = $('.clonedInput').length;

            var newNum = Number(num + 1);

            var startHour = $('#startHour' + num).clone().attr('id', 'name' + newNum);
            var startMinute = $('#startMinute' + num).clone().attr('id', 'name' + newNum);
            var startampm = $('#startampm' + num).clone().attr('id', 'name' + newNum);
            var endHour = $('#endHour' + num).clone().attr('id', 'name' + newNum);
            var endMinute = $('#endMinute' + num).clone().attr('id', 'name' + newNum);
            var endampm = $('#endMinute' + num).clone().attr('id', 'name' + newNum);

                startHour.children(':first').attr('id', 'name' + newNum).attr('name', 'name' + newNum);
                startMinute.children(':first').attr('id', 'name' + newNum).attr('name', 'name' + newNum);
                startampm.children(':first').attr('id', 'name' + newNum).attr('name', 'name' + newNum);
                endHour.children(':first').attr('id', 'name' + newNum).attr('name', 'name' + newNum);
                endMinute.children(':first').attr('id', 'name' + newNum).attr('name', 'name' + newNum);
                endampm.children(':first').attr('id', 'name' + newNum).attr('name', 'name' + newNum);

                $('#startHour' + num + ':').after(endampm);
                $('#startMinute' + num + ' ').after(endampm);
                $('#startampm' + num + ' ').after(endampm);
                $('#endHour' + num + ':').after(endampm);
                $('#endMinute' + num + ' ').after(endampm);
                $('#endampm' + num).after(endampm);
            }
        }

    });

    $('#displayDate').datepicker({
        dateFormat: 'M dd, yy',
        minDate: '-6m',
        maxDate: '6m',
        showButtonPanel: true
    });

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T05:34:31.363

你的最后几行，

```
$('#startHour' + num + ':').after(endampm);
... 
```

似乎是错的。你可能想要的是

```
$('#startHour' + num + ':').**insert**After(endampm);
...
```

# web-services - 触发从网站访问计算机 I/O 的脚本

> ID：11681965
> 
> 赞同：0
> 
> 时间：2012-07-27T05:28:25.267
> 
> 标签：web-services, sockets, webserver

我正在尝试设计一个系统，用户可以将编译后的 .hex 文件上传到网站，然后该 Web 服务器将其发送到另一台服务器，该服务器通过 USB 连接有微处理器。然后，Web 服务器将触发在该服务器上运行的脚本，该脚本会将 .hex 文件加载到 micro。

所以我的问题是：Web 服务器是否可以在另一台（受信任的）机器上触发 shell 脚本或 C/Java 程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T15:05:34.247

是的，这是可能的。Web 服务器通常支持调用脚本，通常使用 CGI 接口。此脚本可以与其他服务器执行所需的交互。如何实现这取决于网络服务器及其配置。

如果涉及微控制器，以及如何将其连接到第二台服务器，则与此问题无关。因此，我建议删除`microcontroller`标签。如果它在某种程度上与之相关，那也是令人怀疑的`shell`。

# joomla-extensions - 从模块参数链接文章（字段 modal_article）

> ID：11681966
> 
> 赞同：1
> 
> 时间：2012-07-27T05:28:44.503
> 
> 标签：joomla-extensions, joomla2.5

我想开发一个joomla！2.5 管理员可以选择文章的模块，以便将所选文章显示为前端的链接。模块的参数在 modulename.xml 文件中声明，所以我想知道是否有一种字段类型，如在创建菜单项以显示单个文章时允许您选择文章的字段类型。

这是xml文件

```
<fieldset name="basic" addfieldpath="/modules/mod_ctfapartados/elements/">
<field  name="" type="article"  default="0" label="MOD_APARTADOS_LINK_ONE_LABEL"
description="MOD_APARTADOS_LINK_ONE_DESC" 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-27T18:18:46.493

由于某些原因，我无法在之前的答案中编辑代码，所以这是修改后的代码部分

```
<fieldset 
     name="request" 
     addfieldpath="/administrator/components/com_content/models/fields">
     <field 
           name="article_id"
           type="modal_article"
           label="label"
           required="true"
           description="desc"/>
</fieldset> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T06:14:44.840

*   在您的模块中创建一个名为“elements”的文件夹

*   从 joomlaroot\administrator\components\com_content\elements 复制文件 article.php 并将其放在您的模块元素文件夹中

*   然后在你的xml中添加这些行

# javascript - 调整需要在 Javascript 数组或对象中存储多个数据

> ID：11681967
> 
> 赞同：-1
> 
> 时间：2012-07-27T05:28:46.190
> 
> 标签：javascript, arrays, object

我有一个字符串

```
var str = 'Supplier Name^supplier^left^string*Spend (USD MM)^spend^right^number^5'; 
```

我在 javascript 中编写了一个函数来从上面的字符串中检索数据字段名称并将其存储在一个数组中：

```
 function getColNamesfromConfig(str) {
        var cols = new Array();
        for (i = 0; i <= str.split('*').length - 1; i++) {
            cols[i] = str.split('*')[i].split('^')[1];
            //Will write logic to retrieve the Supplier Name, Spend (USD MM) fields etc
        }
        return cols;
    } 
```

我得到的结果是： cols[0] = supplier; cols[1] = 花费；等等..（这是数据字段）

然后我制作一个动态表并使用上述检索到的信息：

```
"onResultHttpService": function (result, properties) {

            var json_str = Sys.Serialization.JavaScriptSerializer.deserialize(result);

            var colNames = getColNamesfromConfig(properties.PodAttributes.DGConfig);
            var htmlMarkup = '';

            htmlMarkup = "";                
            htmlMarkup = htmlMarkup + "<table width='100%' border='1' cellspacing='0' cellpadding='0' class='gridView gridMouseOverEffect'>";
            htmlMarkup = htmlMarkup + "<tr>";

            for (var c = 0, colLen = colNames.length; c < colLen; c++) {
             //COLUMN LOOP (here i want to bind 'Supplier Name' and not 'supplier' which is what i get from getColNamesfromConfig(str);
                htmlMarkup = htmlMarkup + "<th align='left' class='secondaryLink tableContentRow'> <h5>" + colNames[c] + "</h5>";
                htmlMarkup = htmlMarkup + "</th>";
            }
            htmlMarkup = htmlMarkup + "</tr>";

            for (var i = 0, rowlen = json_str.length; i < rowlen; i++) {
                htmlMarkup = htmlMarkup + " <tr>"

                for (var c = 0, colLen = colNames.length; c < colLen; c++) {
                    htmlMarkup = htmlMarkup + " <td align='left' class='secondaryLink tableContentRow'>   " + json_str[i][colNames[c]];
                    htmlMarkup = htmlMarkup + "</td>"
                }
                htmlMarkup = htmlMarkup + "</tr>"
            }
            htmlMarkup = htmlMarkup + "</table>"
            divPortletId = '#' + properties.id;
            $(htmlMarkup).appendTo($(divPortletId));

        } 
```

如果我还必须从示例字符串中检索显示名称，我将如何将它存储在同一个数组中并访问它？例如：我想要一些我可以循环并获取我的显示名称（供应商名称）以及数据字段名称（供应商）的东西。我只想在当前绑定列数据字段的 COLUMN LOOP 中绑定显示名称。因此，请帮助我调整我的 getColNamesfromConfig(str) 函数以返回数组中的数据字段和显示名称或对象文字（如果可能）。我需要类似的东西

```
cols[0].DisplayName = "Supplier Name";
cols[0].DatafieldName = "supplier";
cols[1].DisplayName = "Spend (USD MM)";
cols[1].DatafieldName = "spend"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T07:06:50.883

```
function getColNamesfromConfig(str) {
    var cols = new Array();
    for (i = 0; i <= str.split('*').length - 1; i++) { 
        cols[i] = {}
        cols[i].DatafieldName = str.split('*')[i].split('^')[1]; 
        cols[i].DisplayField = str.split('*')[i].split('^')[0];
    }
    return cols;
} 
```

这应该够了吧

# file-io - PepperMount 写入操作失败

> ID：11681968
> 
> 赞同：0
> 
> 时间：2012-07-27T05:28:58.457
> 
> 标签：file-io, google-nativeclient

我正在尝试使用 PepperMount 库将文件存储在 NACL 中。但是我在将文件写入持久存储时遇到了一些问题。

```
struct stat st;
char data1[1000];
for (int i = 0; i < 1000; i++)
    data1[i] = 'a';

if(0 == ppMount->Creat("ccda.txt", 0, &st)) {
    fprintf(stderr, "File opened");
    ppMount->Ref(st.st_ino);

    ssize_t n = ppMount->Write(st.st_ino, 0, data1, 1000);
    fprintf(stderr, "Wrote %d bytes", n);

    ppMount->Unref(st.st_ino);
} else {
    fprintf(stderr, "File open failed");
} 
```

我在 Pepper_20 和 Pepper_21 中尝试过，在 20 中它在打开文件中失败，在 21 中它在写入操作中失败。让我知道这是一个已知的错误还是我的代码有问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T04:25:53.980

问题实际上不在于代码。似乎我也必须从 html 请求存储配额。

```
window.webkitStorageInfo.requestQuota(PERSISTENT, 20*1024*1024); 
```

# c++ - 如何使用 boost::thread 创建线程池

> ID：11681970
> 
> 赞同：0
> 
> 时间：2012-07-27T05:29:08.840
> 
> 标签：c++, multithreading, boost, boost-thread

`boost::thread`is *not-a-thread*， a`new thread`在`ftor`传递给它的被调用时创建，线程在`ftor`返回时退出。

我们使用线程池来最小化线程创建和销毁的成本。但是当提供的ftor返回时，线程池中的每个线程也会被销毁。

那么构建线程池的基本概念是什么？是否有任何永久线程可以将ftors分配给该线程？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T07:24:53.687

线程池只是一堆已经在运行的线程，它们都在运行相同的功能。这个函数基本上只是等待一个队列，当队列中有一个“函数”时，它会提取并执行它。

伪代码：

```
void thread_pool_function()
{
    while (true)
    {
        wait_for_signal_that_queue_is_not_empty();

        function_to_call = queue.remove_top();

        unklock_queue_semaphore();

        function_to_call();
    }
}

create_thread(thread_pool_function);
create_thread(thread_pool_function);
create_thread(thread_pool_function);
create_thread(thread_pool_function); 
```

在上面的“代码”中，现在有四个线程，最初都在等待将某些东西放入“队列”中。当队列中有东西时，它会提取它，并将其作为函数调用。

这可能是实现线程池的最简单方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T10:26:18.073

除了@Joachim 发布的内容：

对这样一个系统（也是我经常使用的一种）进行流控制的一种方法是使用任务的“池队列”（阻塞生产者-消费者队列），在启动时创建并填充固定数量的任务对象. 任何想要发出任务的线程都必须首先从池中获取一个，并且在完成处理后将任务返回到池中。这限制了系统中的任务数量，如果池为空，请求线程只需要等待，阻塞在空池上，直到一些“使用过的”任务返回。

这很好用，提供流量控制，防止内存失控并消除持续的任务创建/销毁。在计时器上定期显示/写入池队列深度也很容易，因此您可以看到您的应用程序有多“忙”（并检测任何泄漏:)。

编辑：此外，它消除了系统中任何有界队列的需要。无界队列更简单，并且往往需要更少的系统调用。

# sql - 如何在同一张表的同一列上使用不同的where子句连接SQL语句

> ID：11681971
> 
> 赞同：6
> 
> 时间：2012-07-27T05:29:10.470
> 
> 标签：sql, sqlite

我在 sqlite 中有 2 条语句

第一条声明：

```
Select SUM(GrossQty) As GQTY, SUM(NetQty) As NQTY
  From NSales 
  Where IMonth=5 And IYear=2012 And IDay>15 
```

结果：

> ```
> GQty NQty
>  30 25
> 
> ```

第二条语句

```
Select SUM(GrossQty) As GQTY, SUM(NetQty) As NQTY
  From NSales 
  Where IMonth=6 And IYear=2012 And IDay<10 
```

第二个结果：

> ```
> GQty NQty
>  20 15
> 
> ```

如何组合这些语句，以便像这样将这两个结果加在一起？

期望的结果：

> ```
> GQty NQty
>  50 40
> 
> ```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-27T05:45:12.850

你可以做：

```
SELECT 
    SUM(a.GQTY) AS GrossQty, 
    SUM(a.NQTY) AS NQTY
FROM
(
    SELECT SUM(GrossQty) AS GQTY, SUM(NetQty) AS NQTY 
    FROM   NSales 
    WHERE  IMonth = 5 AND IYear = 2012 AND IDay > 15

    UNION ALL

    SELECT SUM(GrossQty), SUM(NetQty)
    FROM   NSales
    WHERE  IMonth = 6 AND IYear = 2012 AND IDay < 10
) a 
```

或者：

```
SELECT 
    a.GQTY + b.GQTY AS GQTY,
    a.NQTY + b.NQTY AS NQTY
FROM
(
    SELECT SUM(GrossQty) AS GQTY, SUM(NetQty) AS NQTY 
    FROM   NSales 
    WHERE  IMonth = 5 AND IYear = 2012 AND IDay > 15
) a
CROSS JOIN
(
    SELECT SUM(GrossQty) AS GQTY, SUM(NetQty) NQTY
    FROM   NSales
    WHERE  IMonth = 6 AND IYear = 2012 AND IDay < 10
) b 
```

或者您可以使用`CASE`表达式并避免发出两个单独的子选择（更难阅读）：

```
SELECT 
    SUM(
        CASE WHEN (IMonth = 5 AND IYear = 2012 AND IDay > 15) OR
                  (IMonth = 6 AND IYear = 2012 AND IDay < 10) THEN
                  GrossQty
             ELSE 0
        END) AS GQTY, 
    SUM(
        CASE WHEN (IMonth = 5 AND IYear = 2012 AND IDay > 15) OR
                  (IMonth = 6 AND IYear = 2012 AND IDay < 10) THEN
                  NetQty
             ELSE 0
        END) AS NQTY
FROM NSales 
```

# sql - SQL - 嵌套选择查询

> ID：11681972
> 
> 赞同：1
> 
> 时间：2012-07-27T05:29:12.140
> 
> 标签：sql, sql-server

![数据集](../Images/af9cab458135e27f924f8ecd20ec1ebe.png)

我想选择所有`dealercode`（不同的）并`introducercode`使用iapn。但是 iapn 只能是最高值。

例如

```
dealercode = 7 and iapin = 3 and introducercode = 3 
```

像那样（这必须是 DEALERCODE 的唯一值）

这是我的查询：

```
 SELECT DISTINCT 
      dealercode, iapin as iapin,
      (SELECT introducercode) as introducecode
  FROM 
      dealerplacement d
  where 
      exists (SELECT MIN(iapin) FROM dealerplacement )
  ORDER BY 
      dealercode, iapin ASC 
```

我已将此帖子数据集附加到此代码中。

![在此处输入图像描述](../Images/763260cbe480ce1ef559e1ecb74c43db.png)

这是结构。我想得到如下结果。仅限经销商代码 1200 iapn 003 和介绍人代码 203。

当前数据库如下。

```
 1200  001  201
  1200  002  202
  1200  003  203 
```

请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-27T05:33:17.597

为什么不直接使用`MAX`and`GROUP BY`或者还有其他我想念的东西

```
SELECT  dealercode,
        introducercode,
        MAX(iapin) iapin
FROM    dealerplacement d
GROUP BY    dealercode,
            introducercode 
```

[聚合函数 (Transact-SQL)](http://msdn.microsoft.com/en-us/library/ms173454.aspx)

**编辑**

重新更改您的请求，您可能想尝试类似

```
SELECT  d.*
FROM    dealerplacement d INNER JOIN
        (
            SELECT  dealercode, 
                    MAX(iapin) iapin 
            FROM    dealerplacement d 
            GROUP BY    dealercode
        ) dM    ON  d.dealercode = dM.dealercode
                AND d.iapin = dM.iapin 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T06:08:13.860

根据您的示例结果，您似乎想要 MINIMUM iapin。要获得正确的对应`introducecode`，您需要使用子选择：

```
SELECT a.dealercode, a.iapin, a.introducecode
FROM dealerplacement a
INNER JOIN
(
    SELECT dealercode, MIN(iapin) AS miniapin
    FROM dealerplacement
    GROUP BY dealercode
) b ON a.dealercode = b.dealercode AND a.iapin = b.miniapin 
```

# javascript - 需要一些建议来购买 javascript 和 jquery 书籍

> ID：11681973
> 
> 赞同：-6
> 
> 时间：2012-07-27T05:29:12.687
> 
> 标签：javascript, jquery

这个问题可能是重复的或多余的，但我想详细说明我的问题：

**我曾尝试寻找谷歌和flipkar，亚马逊……但仅仅看这本书你无法真正判断它会如何……问有经验的人总是好的……因为我可以'不要继续购买以找到好书**

我想买关于 jquery 和 javascript 的书，请考虑我不是 javascript 和 jquery 方面的经验，也不是初学者......所以我想买一本水平很高的书......所以一切都在上面我的头...

如果一些有**经验**的人可以回答这个问题，那将是有帮助的......并且所有其他人（经验较少）也受到欢迎......

希望我能得到好的答案:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T05:37:23.330

成为 JS 开发者的第一本书是

[JavaScript：好的部分](https://rads.stackoverflow.com/amzn/click/com/0596517742)

我也喜欢这本书

[Eloquent Javascript](http://eloquentjavascript.net/)：有非常基础的 JS 并且最适合它

如果您想测试自己的完美程度，有一种方法...

[测试驱动的 JS 评估](https://github.com/rmurphey/js-assessment)：一组涵盖各种 JavaScript 主题的失败测试；你能写代码让测试通过吗？

[我从 jQuery Source 中学到的 10 件事](http://paulirish.com/2010/10-things-i-learned-from-the-jquery-source/)将帮助你了解如何完美拆解其他 JS 脚本

# jquery - 使用 jQuery 添加表格行 - MVC 4

> ID：11681979
> 
> 赞同：3
> 
> 时间：2012-07-27T05:30:11.483
> 
> 标签：jquery, asp.net-mvc, dom-manipulation

我目前正在尝试在我的页面上实现添加功能。目前，添加已经在运行，但我必须刷新页面才能使新添加的行出现在表格上。

请在下面查看我的代码：

这就是我生成表的方式：

```
<table class="webGrid" id="ProductsTable">
<tr>
    <td><strong><span>ProductID</span></strong></td>
    <td><strong><span>ProductName</span></strong></td>
    <td><strong><span>Price</span></strong></td>
    <td colspan="2"><strong><span>Action</span></strong></td>
</tr>

@foreach (var item in repository.GetAllProducts(ViewData["BranchCode"].ToString()))
{ 
<tr>
    <td><span class="ProductID">@item.ProductID</span></td>
    <td><span class="ProductName">@item.ProductName</span></td>
    <td><span class="Price">@item.Price</span></td>
    <td>@Html.ActionLink("Edit", "Edit", new { RecordID = item.RecordID }, new { @class = "editLink" })</td>
    <td>@Html.ActionLink("Delete", "Delete", new { RecordID = item.RecordID }, new { @class = "editLink" })</td>
</tr>
} 
```

目前，编辑和删除已经运行良好。以下是我如何进行编辑：

```
function update(data) {
if (data.Success == true) {
    var parent = linkObj.closest("tr");

    parent.find(".ProductID").html(data.Object.ProductID);
    parent.find(".ProductName").html(data.Object.ProductName);
    parent.find(".Price").html(data.Object.Price);
}
else {
    $("#update-message").html(data.ErrorMessage);
    $("#update-message").show();
} 
```

}

现在我正在尝试实现与我正在使用的编辑 jquery 几乎相同的添加功能。我尝试使用该`.append`方法不成功。

* * *

**编辑：**

我尝试使用下面的代码进行添加。但它似乎没有做任何事情。或者也许我做错了什么：

```
 function add(data) {
    if (data.Success == true) {

        var rowTemplate = $("#rowTemplate").html();
        var tbl = document.getElementById("ProductsTable");
        var counter = $("#ProductsTable tr").length;
        data.Counter = counter;
        $("#ProductsTable").append(applyTemplate(rowTemplate, data));

    }
    else {
        $("#update-message").html(data.ErrorMessage);
        $("#update-message").show();
    }
}

function applyTemplate(template, data) {
    var str = template;
    if ($.isPlainObject(data)) {
        $.each(data, function (index, value) {
            var find = new RegExp("\\$1" + index, "ig");
            str = str.replace(/\$/g, "\$1");
            str = str.replace(find, value);
        });
    }
    return str;
} 
```

它使用如下的行模板：

```
<script type="text/x-template" id="rowTemplate">
        <tr><td><input type="text" id="txtName_$Counter" value="" /></td></tr>
    </script> 
```

我刚刚在网上找到了这个解决方案，但我无法让它工作。我还尝试了下面的代码（我只是根据我拥有的编辑 jquery 编写的）：

```
 function add(data) {
    if (data.Success == true) {
        var parent = linkObj.closest("tr");
        parent.find(".ProductID").append(data.Object.ProductID);
        parent.find(".ProductName").append(data.Object.ProductName);
        parent.find(".Price").append(data.Object.Price);
    }
    else {
        $("#update-message").html(data.ErrorMessage);
        $("#update-message").show();
    }
} 
```

* * *

**编辑：**

现在，这就是我的 jQuery 的样子：

```
function add(data) {
    if (data.Success == true) {
        data = { Counter: 3 };
        $("#rowTemplate").tmpl(data).appendTo("#ProductsTable");
        $('#updateDialog').dialog('close');
    }
    else {
        $("#update-message").html(data.ErrorMessage);
        $("#update-message").show();
    }
} 
```

这是我的模板：

```
<script type="text/x-template" id="rowTemplate">
    <tr>
        <td><span class="ProductID"></span></td>
        <td><span class="ProductName"></span></td>
        <td><span class="Price"></span></td>
        <td>@Html.ActionLink("Edit", "_EditProduct", new { @class = "editLink" })</td>
        <td>@Html.ActionLink("Delete", "_DeleteProduct", new { @class = "editLink" })</td>
    </tr>
</script> 
```

感谢@Muhammad Adeel Zahid 爵士帮助我让 jQuery 工作以添加行。但是，它只会在我的表中添加一个新行。我现在需要的是让它添加我从jQuery中的`data`对象中获得的值。`add function`

我已尝试按照[此链接](http://net.tutsplus.com/tutorials/javascript-ajax/quick-tip-working-with-the-official-jquery-templating-plugin/)中的教程进行操作，但似乎无法使其正常工作。我的代码如下：

```
function add(data) {
    if (data.Success == true) {
        var prod = $.map(data.results, function (obj, index) {
            return {
                ProductID:  obj.text,
                ProductName: obj.text,
                Price: obj.text
            };
        });

        prod = { Counter: 3 };
        $("#rowTemplate").tmpl(prod).appendTo("#ProductsTable");
        $('#updateDialog').dialog('close');
    }
    else {
        $("#update-message").html(data.ErrorMessage);
        $("#update-message").show();
    }
} 
```

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T06:05:54.823

我认为您的模板代码有问题。请尝试将其更改为

```
<script type="text/x-jquery-tmpl" id="rowTemplate">
        <tr><td><input type="text" id="txtName_${Counter}" value="" /></td></tr>
    </script> 
```

然后从中生成html就像

```
var obj = {Counter:3};
$("#rowTemplate").tmpl(obj).appendTo("#ProductsTable"); 
```

**编辑**
首先，我以为您使用的是 jquery 模板引擎，而我的回答是基于该假设。[你可以在这里](http://net.tutsplus.com/tutorials/javascript-ajax/quick-tip-working-with-the-official-jquery-templating-plugin/)找到如何使用模板引擎。请注意，我还编辑了`<script type="text/x-jquery-tmpl" ...`. 在您的代码中导入 jquery 模板 js 文件，其余部分保持原样。它应该工作。
**编辑 2**
好的，这是一个不同的模板。请记住，每个模板都必须有唯一的 ID。该模板看起来像

```
<script type="text/x-jquery-tmpl" id="rowTemplate2">
    <tr>
        <td><span class="ProductID">${ProductId}</span></td>
        <td><span class="ProductName">${ProductName}</span></td>
        <td><span class="Price">${Price}</span></td>
        <td>@Html.ActionLink("Edit", "_EditProduct", new { @class = "editLink" })</td>
        <td>@Html.ActionLink("Delete", "_DeleteProduct", new { @class = "editLink" })</td>
    </tr>
</script> 
```

请注意如何`${Variable}`在模板中添加占位符。现在，当您需要使用模板时，您将需要一个 json 对象，该对象的属性与模板中使用的变量相匹配。例如要使用上面的模板，我会做类似的事情

```
var obj2 = {ProductId:2,ProductName:'First Product', Price: 323};//note the properties of json and template vars match.
$("#rowTemplate2").tmpl(obj2).appendTo("#somecontainer"); 
```

# c++ - 如何为 IWICBitmap 创建 ID2D1DeviceContext？（用于 C++ 中的 Metro 应用程序）

> ID：11681981
> 
> 赞同：3
> 
> 时间：2012-07-27T05:30:25.383
> 
> 标签：c++, windows-8, microsoft-metro, direct2d

我可以使用以下代码为 IWICBitmap 创建 ID2D1RenderTarget ...

```
 D2D1_FACTORY_OPTIONS options;
    ZeroMemory(&options, sizeof(D2D1_FACTORY_OPTIONS));

#if defined(_DEBUG)
     // If the project is in a debug build, enable Direct2D debugging via SDK Layers
    options.debugLevel = D2D1_DEBUG_LEVEL_INFORMATION;
#endif

    ThrowIfFailed(D2D1CreateFactory(
            D2D1_FACTORY_TYPE_SINGLE_THREADED,
            __uuidof(ID2D1Factory1),
            &options,
            &m_d2dFactory
            ));

    D2D1_RENDER_TARGET_PROPERTIES props;
    props = D2D1::RenderTargetProperties();
    m_d2dFactory->CreateWicBitmapRenderTarget(m_pTheBitmap.Get(), &props, &m_target); 
```

但是如果我想将 ID2D1Effect 应用到这个位图，我只能在有 ID2D1DeviceContext 的情况下这样做。如何获取 IWICBitmap 的 ID2D1DeviceContext？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-10T10:23:22.513

创建渲染目标后，您需要 QI 到 ID2D1DeviceContext。例如

```
pWicRenderTarget->QueryInterface(
                      __uuidof(ID2D1DeviceContext), 
                      reinterpret_cast<void**>(&pDC)
                      ); 
```

请记住，QI 也在增加参考计数。

# iphone - 如何使用openGL（视图预览层）和UIkit元素在iPhone上录制屏幕到视频？

> ID：11681983
> 
> 赞同：0
> 
> 时间：2012-07-27T05:30:30.243
> 
> 标签：iphone, opengl-es, gpu, movie, gpuimage

我到处搜索并尝试混合和匹配不同的代码位，但我没有找到任何有用的东西或任何有相同问题的人。

基本上，我希望能够创建包含标准 UIKit 元素以及来自相机的图像（视频预览层）的 iPhone 应用程序的视频演示。我不想使用 airPlay 或 iOS 模拟器投影到桌面然后捕获，因为我希望能够在公共场合制作视频。我已经成功地能够使用此[代码对屏幕进行视频捕获](http://codethink.no-ip.org/wordpress/archives/673) 但视频预览层为空白。我读到它是因为它使用openGL，而我正在捕获的是来自CPU，而不是GPU。我已成功使用 Brad Larson 的 GPUImage 来捕获视频预览层，但它没有捕获 UIView 的其余部分。我已经看到将两者结合并转换为图像的代码，但我不确定这对于实时视频捕获是否太慢。有人可以指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T23:18:56.947

它可能不是最干净的解决方案，但它仍然可以工作：您是否考虑过越狱？我希望 Apple 确实为此起诉我，但如果你真的想录制你的屏幕，那么只需安装一个屏幕录像机。可以找到足够的选项：[http ://www.google.be/search?q=iphone+jailbreak+record+screen](http://www.google.be/search?q=iphone+jailbreak+record+screen)

如果您不喜欢它：恢复您的手机以进行以前的备份。

（记录在案：从生产力的角度来看，我反对越狱并发布此内容）

# python - 如何从 Pyside 中的 lineEdit 获取文本？

> ID：11681984
> 
> 赞同：1
> 
> 时间：2012-07-27T05:30:31.337
> 
> 标签：python, pyqt4, pyside

我正在学习 Pyside，我似乎无法将 QLineEdit 中的文本输入到我自己的方法中，以便我可以将其输入到查询等中。我知道它与 lineEdit.text() 有关，但它不是似乎工作。在文本进入我的变量之前，我是否需要将其与信号相关联？

这是我一直在尝试的类型。我需要一个 textChanged 信号来让它更新还是什么？我试过添加 self.line ，但这也没有用，在面向对象编程上有点生疏。

```
line=QtGui.QLineEdit(self)
myVar = line.text() 
```

一个简短的代码示例会很棒。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T05:36:48.413

您似乎正在创建对象并在之后立即使用它。当然，你会从`text()`;得到一个空字符串。它不是那样工作的。

您应该将 添加`QLineEdit`到 GUI，让用户对其进行操作，然后使用`QLineEdit.text()`. 要知道用户何时更改了文本，是的，您应该连接到插槽。`QLineEdit.[textEdited](http://doc.qt-project.org/qlineedit#textEdited)`

这是一个完整的示例，它使用这种机制在修改后立即将所有文本从 a 复制`QLineEdit`到 a `QLabel`。

```
import sys

from PySide.QtCore import *
from PySide.QtGui import *

class MainWindow(QWidget):
    def __init__(self):
        QWidget.__init__(self)

        layout = QVBoxLayout()
        self.setLayout(layout)

        self.line_edit = QLineEdit()
        layout.addWidget(self.line_edit)

        self.label = QLabel()
        layout.addWidget(self.label)

        self.line_edit.textChanged.connect(self.line_edit_text_changed)

        self.show()

    def line_edit_text_changed(self, text):
        self.label.setText(text)

app = QApplication(sys.argv)
mw = MainWindow()
app.exec_() 
```

这个示例展示了如何将自己的函数连接到插槽。但是由于 a`QLabel`有一个[`setText`](http://doc.qt-project.org/qlabel#text-prop)槽，我们可以只做`self.line_edit.textChanged.connect(self.line_edit.setText)`而不定义一个函数。

PS你真的应该阅读一些教程；我发现[**这个**](http://zetcode.com/gui/pysidetutorial/)非常有用。

# jenkins - Jenkins 测试结果历史

> ID：11681986
> 
> 赞同：1
> 
> 时间：2012-07-27T05:30:39.607
> 
> 标签：jenkins, mstest

目前，我们配置了 Jenkins 作业，以便将测试结果写入特定文件然后发布。问题在于下次构建运行时它会替换之前的测试结果。这意味着电子邮件通知的链接指向相同的测试结果文件，我们无法调试测试失败的原因。

有没有办法创建具有唯一名称（如时间戳）的测试结果并发布这些结果？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T08:44:41.603

您可以使用 Jenkins 的归档功能。将构建后操作“存档工件”添加到您的工作中，并提供测试文件的文件名模式。现在该文件已为每个作业存档。邮件通知中的链接可能仍指向最新文件，但您可以在 Jenkins 的 Web 界面中下载存档文件（如果您转到特定构建，您会看到该构建的所有存档工件）。

# structure - Memcpy 和 Memset 关于 C 中 Short 类型的结构

> ID：11681991
> 
> 赞同：0
> 
> 时间：2012-07-27T05:31:02.200
> 
> 标签：structure, memcpy, memset

我有一个关于在结构及其可靠性上使用 memset 和 memcopy 的问题。例如：

我有一个看起来像这样的代码

```
typedef struct
    {
    short a[10];
    short b[10];
}tDataStruct;

 tDataStruct m,n;

memset(&m, 2, sizeof(m));
memcpy(&n,&m,sizeof(m)); 
```

我的问题是，

1）：在 memset 中，如果我设置为 0 就可以了。但是当设置 2 时，我将 ma 和 mb 设为 514 而不是 2。当我将它们设为 char 而不是 short 时，这很好。这是否意味着我们不能将 memset 用于除 0 之外的任何初始化？它是对例如缩写的限制吗

2）：在上述两个short类型的结构之间做memcopy是否可靠。我有一大串 a,b,c,d,e... 我需要确保副本是一对一的完美。

3）：我最好在单个数组上使用 memset 和 memcopy，而不是像上面那样在结构中收集？

再一问，

在上面的结构中，我有变量数组。但是，如果我传递了指向这些数组的指针，并且我想将这些指针收集到一个结构中

```
typedef struct
    {
    short *pa[10];
    short *pb[10];
}tDataStruct;

 tDataStruct m,n;

memset(&m, 2, sizeof(m));
memcpy(&n,&m,sizeof(m)); 
```

在这种情况下，如果 i 或 memset 的 memcopy 它只会更改地址而不是值。我该如何更改这些值？原型错了吗？

请建议。你的投入非常小

谢谢dsp大佬

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T05:39:40.900

1.  memset 设置的字节，而不是短裤。总是。514 = (256*2) + (1*2)... 2s 出现在字节边界上。1.a. 诚然，这确实降低了它对诸如您尝试做的目的（数组填充）的有用性。
2.  只要两个结构的类型相同，就可靠。为了清楚起见，这些结构不是您建议的“短类型”。
3.  如果我理解您的问题，只要它们属于同一类型，我认为这并不重要。

请记住，这些是字节级别的操作，仅此而已。另请参阅[此](https://stackoverflow.com/questions/7202411/memset-integer-array)。

对于您问题的第二部分，请尝试

> memset(m.pa, 0, sizeof(*(m.pa));
> memset(m.pb, 0, sizeof(*(m.pb));

请注意从两个不同地址复制的两个操作（m.pa、m.pb 是您认识的有效地址）。还要注意 sizeof：不是引用的 sizeof，而是被引用的 sizeof。对于内存复制也是如此。

# php - 为什么在我的 GD 饼图中看到这条奇怪的线？

> ID：11681998
> 
> 赞同：3
> 
> 时间：2012-07-27T05:31:49.620
> 
> 标签：php, gd

为什么在我的 GD 饼图中看到这条奇怪的线？

![饼图](../Images/c5894bcef41386ced7a9284efa4dc0d8.png)

这是PHP：

```
<?php
$ratio = $_GET['ratio'];
$height = intval(isset($_GET['size']) ? $_GET['size'] : 200);
$width = intval(isset($_GET['size']) ? $_GET['size'] : 200);
$startDegree = 270;
$ratiodeg = $ratio * 360;
$image = imagecreatetruecolor($width,$height);
imagealphablending($image,false);
imagesavealpha($image,true);
$color = imagecolorallocate($image,127,26,40);
$grey = imagecolorallocate($image,200,200,200);
$transparent = imagecolorallocatealpha($image,255,255,255,127);
imagefilledrectangle($image,0,0,$width,$height,$transparent);
if($ratio > 0){
    if($ratio < 1){
        imagefilledarc($image,$width / 2,$height / 2,$width,$height,$ratiodeg + $startDegree,$startDegree,$grey,IMG_ARC_PIE);
    }
    imagefilledarc($image,$width / 2,$height / 2,$width,$height,$startDegree,$ratiodeg + $startDegree,$color,IMG_ARC_PIE);
}
else{
    imagefilledarc($image,$width / 2,$height / 2,$width,$height,$startDegree,360 + $startDegree,$grey,IMG_ARC_PIE);
}
imagefilledellipse($image,$width / 2,$height / 2,$width * 0.95,$height * 0.95,$transparent);
header("Content-type: image/png");
imagepng($image);
imagedestroy($image);
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T05:41:33.420

![我的输出](../Images/0268dc76a5c2c72a79deeb332a13da60.png)

我运行了你的代码并得到了这张图片..

这是我的 PHP 详细信息

版本：5.4.3

GD：捆绑（2.0.34 兼容）

你通过什么比例？我使用了 1, 4, 4.65（它做了一个有一点缺失的圆圈），但我从来没有得到那条线！