# StackOverflow 问答 11467000-11467999

# asp.net - 从 ASP.NET 运行 PowerShell 脚本

> ID：11467000
> 
> 赞同：0
> 
> 时间：2012-07-13T08:41:43.947
> 
> 标签：asp.net, powershell, iis-7, impersonation

我已经尝试从 asp.net 运行 PowerShell 脚本几天了，但没有成功。

C# 是：

```
using (var process = new Process())
{
  ProcessStartInfo startInfo = new ProcessStartInfo();

  startInfo.FileName = @"powershell.exe";
  startInfo.Arguments = "arguments that call the script here";
  startInfo.RedirectStandardOutput = false;
  startInfo.RedirectStandardError = false;
  startInfo.UseShellExecute = true;
  startInfo.CreateNoWindow = true;

  process.StartInfo = startInfo;
  process.Start();
} 
```

它调用的 PowerShell 脚本包含 ff：

```
robocopy "\\network-server\location" "C:\localfolder" "testmovefile.txt" 
```

显然，这里的问题是正确的凭据。但我尝试过各种模拟的东西，无论是从 C# 还是在脚本级别。我尝试对 PowerShell 脚本执行此操作：

```
 $username = "domain\user"
  $password = ConvertTo-SecureString –String "password" –AsPlainText -Force
  $pp = new-object -typename System.Management.Automation.PSCredential -argumentlist $username,$password
  start-process powershell -argument "C:\localfolder\CopyFile.ps1" -Credential $pp 
```

当我在本地运行 PowerShell 控制台中的脚本时，它可以工作，即使使用对网络没有权限的帐户，但是当从 Web 应用程序调用时.. 没有任何反应。

应用程序池标识只是设置为默认的应用程序池标识。我发现如果我将标识更改为具有适当权限的自定义帐户......它可以工作。

我仍在尝试寻找不同的解决方案。我想要一个场景，您可以更改脚本中的任何内容，它仍然会运行。只要不更改应用程序池标识，任何都可以。

我也试过这些：

*   [http://huddledmasses.org/using-alternate-credentials-with-the-filesystem-in-powershell/](http://huddledmasses.org/using-alternate-credentials-with-the-filesystem-in-powershell/)
*   在 c# 中使用运行空间而不是进程并使用模拟程序[如何在 Powershell 中模拟 Active Directory 用户？](https://stackoverflow.com/questions/11806/how-do-you-impersonate-an-active-directory-user-in-powershell)

但它仍然不起作用。我继续被拒绝访问。问题是，是否可以通过在 PowerShell 中模拟某人来使其工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T08:04:04.593

应用程序池身份对本地文件系统的访问非常有限（在本地计算机之外没有）。您将需要修改文件系统上的 ACL，以便为身份提供所需的访问权限。

在 Server 2008（或 Vista）中，这必须使用命令行（例如`icacls.exe`）来完成，因为权限 GUI 不支持应用程序池标识；对于更高版本，这可以通过 GUI 完成。

[Process Monitor](http://technet.microsoft.com/en-us/sysinternals/bb896645)是一个很好的工具，用于确定访问被阻止的位置。

***但是***，如果您需要访问网络资源，这将不起作用。应用程序池身份纯粹是本地的，它们在网络上没有任何意义。您需要使用具有相应访问权限的域帐户（或具有相同名称和密码的多个本地帐户）。

# java - vaadin 项目中的当前/默认目录

> ID：11467002
> 
> 赞同：0
> 
> 时间：2012-07-13T08:41:57.577
> 
> 标签：java, vaadin

我正在处理报告。现在我有一个 jrxml 文件，我必须加载它以便解析它。但是，问题是，我想直接加载文件名

```
String path = "myreport.jrxml"; 
```

但我无法找到我应该将该文件放在我的项目中的哪个位置，以便上述路径有效。在简单的java项目中，我们只是将我们想要的文件放在放置src文件夹的项目文件夹中，但它在vaadin项目中不起作用。所以我应该把我的文件放在哪里。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T08:52:22.530

您是否正在将项目部署到 Web 服务器？然后您需要找出该 Web 服务器的默认工作目录是什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T11:46:50.963

你可以使用：

```
JRXmlLoader.load("/myreport.jrxml"); 
```

或者，如果您想测试是否找到了资源并进行另一次尝试，您可以将其作为资源加载并传递它的加载方法，`JRXmlLoader`如下所示：

```
JRXmlLoader.load(getClass().getResourceAsStream("/myreport.jrxml")); 
```

# xml - XSLT 1.0 文本列表到单个元素和重复删除

> ID：11467010
> 
> 赞同：-1
> 
> 时间：2012-07-13T08:42:14.880
> 
> 标签：xml, xslt, xslt-1.0

我有以下 XML 文档：

```
<?xml version="1.0" encoding="UTF-8"?>
<cars>
    <car body="Wagon">
        <text>Red</text>
    </car>
    <car body="Sedan">
        <text>Yellow</text>
    </car>
    <car body="Sedan">
        <text></text>
    </car>
    <car body="Wagon">
        <textlist>
            <text>Red</text>
            <text>Green</text>
            <text>Black</text>
            <text>Blue</text>
        </textlist>
    </car>
    <car body="Sedan">
        <textlist>
            <text>Yellow</text>
            <text>Orange</text>
        </textlist>
    </car>
    <car body="Fastback">
        <textlist>
            <text>Yellow</text>
            <text>Red</text>
            <text>Green</text>
            <text>Black</text>
            <text>Blue</text>
        </textlist>
    </car>
    <car body="Fastback">
        <textlist>
            <text>Pink</text>
            <text>Red</text>
            <text>Orange</text>
        </textlist>
    </car>
</cars> 
```

使用 XSLT 1.0 我需要将 XML 文档转换为这种格式：

```
<?xml version="1.0" encoding="UTF-8"?>
<cars>
    <car type="Wagon">Red</car>
    <car type="Sedan">Yellow</car>
    <car type="Wagon">Green</car>
    <car type="Wagon">Black</car>
    <car type="Wagon">Blue</car>
    <car type="Sedan">Orange</car>
</cars> 
```

请注意：

1.  body="Fastback" 被排除在外
2.  排除重复项（Red Wagon 出现两次）
3.  Textlist 多个项目作为单独的元素放在输出 XML 中
4.  忽略空值

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T09:39:13.920

这是一个示例：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

<xsl:output indent="yes"/>

<xsl:key name="k1" 
  match="car[not(@body = 'Fastback')]//text"
  use="concat(ancestor::car/@body, '|', .)"/>

<xsl:template match="cars">
  <xsl:copy>
    <xsl:apply-templates select="car[not(@body =  'Fastback')]//text
      [generate-id() = generate-id(key('k1', concat(ancestor::car/@body, '|', .))[1])]"/>
  </xsl:copy>
</xsl:template>

<xsl:template match="text">
  <car type="{ancestor::car/@body}">
    <xsl:value-of select="."/>
  </car>
</xsl:template>

</xsl:stylesheet> 
```

它使用 Muechian 分组，如果您不熟悉 XSLT 1.0 方法，请参阅[http://www.jenitennison.com/xslt/grouping/muenchian.xml 。](http://www.jenitennison.com/xslt/grouping/muenchian.xml)

# android - 当目标机器无法访问时，如何捕获 org.apache.http.client.HttpClient 的异常？

> ID：11467011
> 
> 赞同：0
> 
> 时间：2012-07-13T08:42:20.163
> 
> 标签：android

我在 asyntask.doInBackgroud 中运行 http 连接（使用 HttpClient.execute）。当 http 服务器未启动时，我希望我的 android 应用程序会向用户提示正确的信息，例如“请稍后再试”。但是无论我尝试捕获异常，我的应用程序都会直接崩溃。没有机会提示用户有关情况。

我附上了下面的日志，

```
07-13 03:50:51.605: E/Util.java, function sendPost(1137): IOException encountered.
07-13 03:50:51.605: W/System.err(1137): org.apache.http.NoHttpResponseException: The target server failed to respond
07-13 03:50:51.605: W/System.err(1137):     at org.apache.http.impl.conn.DefaultResponseParser.parseHead(DefaultResponseParser.java:85)
07-13 03:50:51.605: W/System.err(1137):     at org.apache.http.impl.io.AbstractMessageParser.parse(AbstractMessageParser.java:174)
07-13 03:50:51.605: W/System.err(1137):     at org.apache.http.impl.AbstractHttpClientConnection.receiveResponseHeader(AbstractHttpClientConnection.java:179)
07-13 03:50:51.605: W/System.err(1137):     at org.apache.http.impl.conn.DefaultClientConnection.receiveResponseHeader(DefaultClientConnection.java:235)
07-13 03:50:51.605: W/System.err(1137):     at org.apache.http.impl.conn.AbstractClientConnAdapter.receiveResponseHeader(AbstractClientConnAdapter.java:259)
07-13 03:50:51.605: W/System.err(1137):     at org.apache.http.protocol.HttpRequestExecutor.doReceiveResponse(HttpRequestExecutor.java:279)
07-13 03:50:51.615: W/System.err(1137):     at org.apache.http.protocol.HttpRequestExecutor.execute(HttpRequestExecutor.java:121)
07-13 03:50:51.615: W/System.err(1137):     at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:410)
07-13 03:50:51.624: W/System.err(1137):     at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:555)
07-13 03:50:51.624: W/System.err(1137):     at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:487)
07-13 03:50:51.624: W/System.err(1137):     at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:465)
07-13 03:50:51.624: W/System.err(1137):     at game.location.Util.sendPost(Util.java:27)
07-13 03:50:51.624: W/System.err(1137):     at game.location.LoginForm$LoginTask.doInBackground(LoginForm.java:73)
07-13 03:50:51.624: W/System.err(1137):     at game.location.LoginForm$LoginTask.doInBackground(LoginForm.java:1)
07-13 03:50:51.634: W/System.err(1137):     at android.os.AsyncTask$2.call(AsyncTask.java:185)
07-13 03:50:51.634: W/System.err(1137):     at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
07-13 03:50:51.634: W/System.err(1137):     at java.util.concurrent.FutureTask.run(FutureTask.java:137)
07-13 03:50:51.664: W/System.err(1137):     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1068)
07-13 03:50:51.664: W/System.err(1137):     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:561)
07-13 03:50:51.664: W/System.err(1137):     at java.lang.Thread.run(Thread.java:1096)
07-13 03:50:51.664: W/dalvikvm(1137): threadid=7: thread exiting with uncaught exception (group=0x4001d800)
07-13 03:50:51.694: E/AndroidRuntime(1137): FATAL EXCEPTION: AsyncTask #1
07-13 03:50:51.694: E/AndroidRuntime(1137): java.lang.RuntimeException: An error occured while executing doInBackground()
07-13 03:50:51.694: E/AndroidRuntime(1137):     at android.os.AsyncTask$3.done(AsyncTask.java:200)
07-13 03:50:51.694: E/AndroidRuntime(1137):     at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:273)
07-13 03:50:51.694: E/AndroidRuntime(1137):     at java.util.concurrent.FutureTask.setException(FutureTask.java:124)
07-13 03:50:51.694: E/AndroidRuntime(1137):     at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:307)
07-13 03:50:51.694: E/AndroidRuntime(1137):     at java.util.concurrent.FutureTask.run(FutureTask.java:137)
07-13 03:50:51.694: E/AndroidRuntime(1137):     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1068)
07-13 03:50:51.694: E/AndroidRuntime(1137):     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:561)
07-13 03:50:51.694: E/AndroidRuntime(1137):     at java.lang.Thread.run(Thread.java:1096)
07-13 03:50:51.694: E/AndroidRuntime(1137): Caused by: java.lang.NullPointerException
07-13 03:50:51.694: E/AndroidRuntime(1137):     at game.location.Util.sendPost(Util.java:37)
07-13 03:50:51.694: E/AndroidRuntime(1137):     at game.location.LoginForm$LoginTask.doInBackground(LoginForm.java:73)
07-13 03:50:51.694: E/AndroidRuntime(1137):     at game.location.LoginForm$LoginTask.doInBackground(LoginForm.java:1)
07-13 03:50:51.694: E/AndroidRuntime(1137):     at android.os.AsyncTask$2.call(AsyncTask.java:185)
07-13 03:50:51.694: E/AndroidRuntime(1137):     at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
07-13 03:50:51.694: E/AndroidRuntime(1137):     ... 4 more
07-13 03:50:51.943: W/IInputConnectionWrapper(1137): showStatusIcon on inactive InputConnection
07-13 03:50:53.114: E/WindowManager(1137): Activity game.location.LoginForm has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@44f5cbf0 that was originally added here
07-13 03:50:53.114: E/WindowManager(1137): android.view.WindowLeaked: Activity game.location.LoginForm has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@44f5cbf0 that was originally added here
07-13 03:50:53.114: E/WindowManager(1137):  at android.view.ViewRoot.<init>(ViewRoot.java:247)
07-13 03:50:53.114: E/WindowManager(1137):  at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:148)
07-13 03:50:53.114: E/WindowManager(1137):  at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:91)
07-13 03:50:53.114: E/WindowManager(1137):  at android.view.Window$LocalWindowManager.addView(Window.java:424)
07-13 03:50:53.114: E/WindowManager(1137):  at android.app.Dialog.show(Dialog.java:241)
07-13 03:50:53.114: E/WindowManager(1137):  at game.location.AbstractActivity.showProgressDialog(AbstractActivity.java:39)
07-13 03:50:53.114: E/WindowManager(1137):  at game.location.LoginForm$1.onClick(LoginForm.java:43)
07-13 03:50:53.114: E/WindowManager(1137):  at android.view.View.performClick(View.java:2408)
07-13 03:50:53.114: E/WindowManager(1137):  at android.view.View$PerformClick.run(View.java:8816)
07-13 03:50:53.114: E/WindowManager(1137):  at android.os.Handler.handleCallback(Handler.java:587)
07-13 03:50:53.114: E/WindowManager(1137):  at android.os.Handler.dispatchMessage(Handler.java:92)
07-13 03:50:53.114: E/WindowManager(1137):  at android.os.Looper.loop(Looper.java:123)
07-13 03:50:53.114: E/WindowManager(1137):  at android.app.ActivityThread.main(ActivityThread.java:4627)
07-13 03:50:53.114: E/WindowManager(1137):  at java.lang.reflect.Method.invokeNative(Native Method)
07-13 03:50:53.114: E/WindowManager(1137):  at java.lang.reflect.Method.invoke(Method.java:521)
07-13 03:50:53.114: E/WindowManager(1137):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
07-13 03:50:53.114: E/WindowManager(1137):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
07-13 03:50:53.114: E/WindowManager(1137):  at dalvik.system.NativeStart.main(Native Method) 
```

doInBackGround 中的代码：

```
protected String doInBackground(String... arg0) {

            HttpPost httpPost = new HttpPost(Global.Url.LOGIN.getLink());
            String result = "";

            List<NameValuePair> pair = new ArrayList<NameValuePair>();
            pair.add(new BasicNameValuePair("userName", arg0[0]));
            pair.add(new BasicNameValuePair("password", arg0[1]));
            try {
                httpPost.setEntity(new UrlEncodedFormEntity(pair));

            } catch (UnsupportedEncodingException e) {

                e.printStackTrace();
            }
            result = Util.sendPost(httpPost).toString();

            return result;
        } 
```

我已经放置了所有必要的异常捕获的代码，其中确切的错误来自：

```
public static StringBuilder sendPost(HttpPost httpPost){
        HttpClient httpClient = new DefaultHttpClient();
        HttpResponse response = null;
        StringBuilder result = null;

        try {
            response = httpClient.execute(httpPost);

        } catch (ClientProtocolException e) {
            Log.e("Util.java, function sendPost", "ClientProtocolException encountered.");
            e.printStackTrace();
        } catch (IOException e) {
            Log.e("Util.java, function sendPost", "IOException encountered.");
            e.printStackTrace();
        }
        try {
            result = inputStreamToString(response.getEntity().getContent());
        } catch (IllegalStateException e) {
            Log.e("Util.java, function sendPost", "IllegalStateException encountered.");
            e.printStackTrace();
        } catch (IOException e) {
            Log.e("Util.java, function sendPost", "IOException encountered.");
            e.printStackTrace();
        }

        return result;
    } 
```

感谢您的帮助。

* * *

```
public static StringBuilder sendPost(HttpPost httpPost){
        StringEntity se = null;
        try {
            se = new StringEntity("envelope",HTTP.UTF_8);
        } catch (UnsupportedEncodingException e1) {
            // TODO Auto-generated catch block
            e1.printStackTrace();
        } 
        httpPost.setEntity(se); 

        HttpClient httpClient = new DefaultHttpClient();
        HttpResponse response = null;
        StringBuilder result = null;

        final HttpParams httpParameters = httpClient.getParams();  
        HttpConnectionParams.setConnectionTimeout(httpParameters, 3 * 1000); 
        HttpConnectionParams.setSoTimeout(httpParameters, 3 * 1000); 

        try {
            response = httpClient.execute(httpPost);

        } catch (ClientProtocolException e) {
            Log.e("Util.java, function sendPost", "ClientProtocolException encountered.");
            e.printStackTrace();
        } catch (IOException e) {
            Log.e("Util.java, function sendPost", "IOException encountered.");
            e.printStackTrace();
        } catch (Exception e){

        }

        try {
            result = inputStreamToString(response.getEntity().getContent());
        } catch (IllegalStateException e) {
            Log.e("Util.java, function sendPost", "IllegalStateException encountered.");
            e.printStackTrace();
        } catch (IOException e) {
            Log.e("Util.java, function sendPost", "IOException encountered.");
            e.printStackTrace();
        }

        return result;
    } 
```

嗨@user370305 我已将我的功能更改为这样，但它仍然无法正常工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T08:44:34.883

在您的 Http Post 请求中设置`SocketTimeOut`和参数。`ConnectionTimeout`

喜欢，

```
HttpPost httpPost = new HttpPost(url);
StringEntity se = new StringEntity(envelope,HTTP.UTF_8);
httpPost.setEntity(se);

HttpParams httpParameters = new BasicHttpParams();
// Set the timeout in milliseconds until a connection is established.
int timeoutConnection = 3000;
HttpConnectionParams.setConnectionTimeout(httpParameters, timeoutConnection);
// Set the default socket timeout (SO_TIMEOUT) 
// in milliseconds which is the timeout for waiting for data.
int timeoutSocket = 3000;
HttpConnectionParams.setSoTimeout(httpParameters, timeoutSocket);

DefaultHttpClient httpClient = new DefaultHttpClient(httpParameters);
BasicHttpResponse httpResponse = (BasicHttpResponse)  httpClient.execute(httpPost);

HttpEntity entity = httpResponse.getEntity(); 
```

或者

只需使用`HttpConnectionParams`您的`DefaultHttpClient`

```
final HttpParams httpParameters = yourHttpClient.getParams();

HttpConnectionParams.setConnectionTimeout(httpParameters, connectionTimeOutSec * 1000);
HttpConnectionParams.setSoTimeout(httpParameters, socketTimeoutSec * 1000); 
```

# html - 960px 宽度：小型网站呢？

> ID：11467017
> 
> 赞同：0
> 
> 时间：2012-07-13T08:42:33.580
> 
> 标签：html, css, grid, width, graphic-design

所以我正在制作这个内容非常少的个人网站，如果我使用标准的 960 像素宽度，会有非常宽的空白区域。有一个较短的宽度会很好，但随后会出现其他问题，例如其他分辨率的视图不佳。你有什么建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T08:57:48.667

为了适应任何屏幕分辨率并使您的网站在任何尺寸下看起来都不错，我建议使用媒体查询进行响应式设计。[您可以在此处](http://www.alistapart.com/articles/responsive-web-design/)阅读该主题。

这样，您可以为浏览器窗口大于该窗口的访问者使用 960px 宽度，然后为使用移动设备等的访问者优雅地调整网站大小。

但是，不要太拘泥于 960px 宽度，这不是标准，而只是一种*通常*效果很好的格式，因为 960 是一个很容易划分（制作列）的数字，并且宽度低于静止很常见的1024px分辨率。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T09:00:21.570

您可以尝试**媒体查询**，像这样

```
 <link rel="stylesheet" type="text/css" media="screen and (max-device-width: 480px)  href="shetland.css" /> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-13T10:14:20.180

您应该开始考虑使用 CSS3 媒体查询构建响应式网站。

我推荐 Skeleton CSS 框架（[链接](http://www.getskeleton.com/)），非常简单和轻量级。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-13T08:57:13.973

这取决于您的网页。并且有一些尺寸标准。

检查这个： http: [//www.hobo-web.co.uk/best-screen-size/](http://www.hobo-web.co.uk/best-screen-size/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-13T09:02:55.880

对每一层使用“位置=相对”！！！这将消除您的宽度修改问题

# iphone - 每次选择选项卡时如何加载我的rootview？

> ID：11467020
> 
> 赞同：0
> 
> 时间：2012-07-13T08:42:51.563
> 
> 标签：iphone, ios, ipad

I have an Iphone application in which i have 3 tabitems with a tabbarcontroller.Inside the tabbarcontroller each viewcontroller is a navigation controller.when selecting the second tab i have a view controller.when selecting a button on that i am pushing another view controller to the self.navigation 控制器。在那个视图控制器中，我正在推动并像那样前进。但问题是当我再次选择 tabitem 时，pushviewcotroller 显示在那里。但是当我选择选项卡时，我再次需要那个 rootview，我试过了在我的代码中像这样但没有用，`

```
-(void)tabBarController:(UITabBarController *)tabbBarController didSelectViewController:(UIViewController *)viewController
{
    if(tabBarController.selectedIndex==0)
    {
        //[viewController.tabBarItem setImage:[UIImage imageNamed:@"pinboard_hvr.png"]];
    }
    else if (tabBarController.selectedIndex==1)
    {
        NSLog(@"%@",viewController);
       //[viewController.tabBarItem setImage:[UIImage imageNamed:@"pinboard_hvr.png"]];
       // NSArray *array = [viewController.navigationController viewControllers];
        NSLog(@"%@",array);

       // [self.navigationController popToViewController:[array objectAtIndex:0] animated:YES];

        [viewController.navigationController popToRootViewControllerAnimated:YES];
        //[appdelegate.navigationController popToRootViewControllerAnimated:YES];

    }
    else if (tabBarController.selectedIndex==2)
    {

        //[viewController.tabBarItem setImage:[UIImage imageNamed:@"pinboard_hvr.png"]];  

    }
} 
```

`我已经尝试过弹出到根目录以及获取视图控制器数组，但没有成功。有人可以帮我实现这一目标吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T08:50:24.330

您在委托中收到的参数本身就是一个导航控制器。因此，更改如下声明，

```
else if (tabBarController.selectedIndex==1)
    {
        [((UINavigationController *)viewController) popToRootViewControllerAnimated:YES];
        //[appdelegate.navigationController popToRootViewControllerAnimated:YES];

    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T08:57:13.580

我也有类似的问题，我通过以下代码解决了。

```
-(void)tabBarController:(UITabBarController *)tabbBarController didSelectViewController:(UIViewController *)viewController
{
    else if (tabBarController.selectedIndex==1)
    {
         NSArray *mycontrollers = self.tabBarController.viewControllers;
         [[mycontrollers objectAtIndex:1] popToRootViewControllerAnimated:NO];
         mycontrollers = nil;
    }

} 
```

希望这对您有所帮助。

# php - 以下 driver_options 参数是什么意思？

> ID：11467021
> 
> 赞同：1
> 
> 时间：2012-07-13T08:42:52.353
> 
> 标签：php, mysql, zend-framework, pdo

我正在公司的某个项目上工作，客户要求我更改数据库中的一些内容。项目不是我们做的。经过几个小时的工作，我看到了这些配置行：

```
resources.db.adapter                     = "PDO_MYSQL"
resources.db.params.host                 = "localhost"
resources.db.params.dbname               = "db"
resources.db.params.username             = "db-user"
resources.db.params.password             = "db-password"
resources.db.params.charset              = "utf8"
resources.db.params.driver_options.1006  = true
resources.db.params.driver_options.1000  = true 
```

谁能告诉我这些驱动选项到底是什么意思？我在谷歌上搜索了一段时间，但找不到任何其他答案：这些是驱动程序特定的选项......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-13T08:48:41.383

```
MYSQL_ATTR_DIRECT_QUERY = 1006
MYSQL_ATTR_USE_BUFFERED_QUERY = 1000 
```

[http://www.wolfcms.org/phpdoc/latest/Framework/Record.html](http://www.wolfcms.org/phpdoc/latest/Framework/Record.html)

有关这些选项的信息：[​​http://php.net/manual/en/ref.pdo-mysql.php](http://php.net/manual/en/ref.pdo-mysql.php)

# ruby-on-rails - Mysql2::Error: 你的 SQL 语法有错误

> ID：11467022
> 
> 赞同：0
> 
> 时间：2012-07-13T08:43:04.437
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1

我是 ruby​​ on rails 的新手，我有搜索文本框，然后每次我输入一个撇号 (') eg testing' 单词.....我总是收到错误：

```
Mysql2::Error: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 's  word%' OR english_name LIKE '%testing's  word%' OR chinese_name LIKE '%testin' at line 1: SELECT COUNT(DISTINCT `jos_store`.`id`) FROM `jos_store` LEFT OUTER JOIN (SELECT id as store_replenishment, store, MAX(stock_movement) AS stock_movement FROM jos_store_replenishment GROUP BY store) AS replenishment ON replenishment.store = jos_store.id LEFT OUTER JOIN jos_stock_movement ON jos_stock_movement.id = replenishment.stock_movement WHERE (store_id LIKE '%testing's  word%' OR english_name LIKE '%testing's  word%' OR chinese_name LIKE '%testing's  word%') 
```

你能帮我解决我的问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T08:48:37.047

尝试转义撇号，例如 english_name LIKE '%testing\'s word%'

如果您正在使用 '%PHRASE%' 并且 %PHRASE% 内还有另一个 '，它认为您已经结束了 like 子句并给您一个错误 - 如果您使用转义字符转义，例如 \'，它应该可以工作：因此，使用您的错误短语，例如：

```
<snip /> WHERE (store_id LIKE '%testing\'s  word%' OR english_name LIKE '%testing\'s  word%' OR chinese_name LIKE '%testing\'s  word%') 
```

请注意，我使用了 '%testing\'s word%' 来确保它不会认为第二个撇号结束 LIKE 子句

# grails - 如何在 groovy 域中创建引用关系？

> ID：11467024
> 
> 赞同：1
> 
> 时间：2012-07-13T08:43:19.930
> 
> 标签：grails, groovy, grails-orm

我只是想让一个下拉框出现在我的主域的视图页面上。

我试着做

```
static hasOne = [sex: Sex, accountType: accountType] 
```

我在主域上执行了此操作，但它会给我一个错误，即我想要引用的域不是双向的。所以我只是尝试在我的主域的引用域上放置一个引用，这使得像 accountType 这样的引用域具有一个特定的字段。

我想知道我怎样才能让它像一个单向参考？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T13:02:22.067

要使其成为单向参考，请不要使用`hasOne`连接。

因此，您的课程将如下所示：

```
class MyClass {
    Sex sex
    AccountType accountType
} 
```

`hasOne`并且它的兄弟表明谁“拥有”双向关系，所以如果你只走一条路，你不需要使用它们。

# windows - 硬盘内存缺口的原因是什么？

> ID：11467031
> 
> 赞同：0
> 
> 时间：2012-07-13T08:44:03.063
> 
> 标签：windows, linux, administration

我想知道我们的硬盘驱动器或笔式驱动器内存差异背后的确切原因是什么。

正如我们所说，我们有一个 4GB 的笔式驱动器，但实际可用空间为 3.7GB。剩下的内存会怎样？制造公司是否从我们那里窃取了这些内存空间，或者这背后有什么技术原因？

谢谢，

尼特什·库马尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T08:45:56.590

他们使用十进制前缀，你使用二进制前缀。这给出了每个前缀幅度大约 2.4% 的差异。

# java - 如何在没有内存泄漏的情况下将 CEditor 作为页面添加到 MultiPageEditorPart？

> ID：11467038
> 
> 赞同：2
> 
> 时间：2012-07-13T08:44:15.020
> 
> 标签：java, memory-leaks, editor, eclipse-cdt

我正在尝试将 CEditor 作为页面添加到自定义 MultiPageEditorPart。就像是：

```
@Override
protected void createPages(){
  myEditor = new CEditor();
  addPage(myEditor , getEditorInput());
... 
```

问题是*myEditor*被泄露，这可能导致大量内存泄露。内存泄漏是由不同的未移除的监听器引起的（CInformationProvider.EditorWatcher 是一个partListener，selectionChangeListeners 的AdaptedSourceViewer 等）

与打开一个独立的 CEditor 相比，我发现我的编辑器没有关闭（参见 WorkbenchPage->closeEditor 方法），因为它的站点是一个 PartSite（MultiPageEditorPart 默认为其页面创建一个 MultiPageEditorSite）。

我将 CEditor 页面的编辑器站点更改为 EditorSite。之后编辑器不再泄漏，但由于另一个对象仍在泄漏，它仍然没有正确关闭。此外，keyBinding 不再起作用。仍在尝试使此解决方案发挥作用，但正确的方法似乎很复杂。

我错过了什么吗？将编辑器添加为页面应该不会引起这么多问题。

# iphone - UITextView 背景图片 iphone

> ID：11467041
> 
> 赞同：0
> 
> 时间：2012-07-13T08:44:17.120
> 
> 标签：iphone, objective-c, xcode, textview, background-image

我正在开发笔记应用程序。我在其中创建了像 iPhone 笔记这样的视图。首先我采取了滚动视图，然后是一个图像视图。之后，我正在动态创建...我使用此代码`UITextView`设置..的背景图像`UITextView`

```
textView = [[UITextView alloc]initWithFrame:CGRectMake(0,30,320,400)];
 textView.backgroundColor = [UIColor colorWithPatternImage:[UIImage imageNamed: @"lines.png"]]; 
```

它在模拟器中完美运行。但是当我在设备上运行我的应用程序时，`UITextView`背景不显示...意味着它不显示线条...我的图像尺寸是 365x45...有人可以帮我解决为什么会这样吗？？？？问题出在哪里？？？谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T08:50:00.553

我曾经遇到过类似的问题，并且头发变白了。:)

仔细检查您的背景图像文件（.png 或其他文件）是否仍与您的应用绑定。当您有多个目标时，请使用项目或 tartet 设置进行检查。

就我而言，该文件包含在项目中，但未包含在边界中。由于我从不理解的原因，它是安装在模拟器上的 bounle 的一部分。当我从模拟器的文件系统中手动删除应用程序时，它甚至在那里。在模拟器中重新启动该应用程序，它又在那里了。

但是当我检查发送到调试设备或商店的边界内容时，图像文件丢失了。

您可能会遇到同样的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T08:57:41.297

我从来没有用过那种方法。我要做的是在 UIImageView 上放置一个不可见的 UITextView

# php - 如何命名异常（PHP）？

> ID：11467045
> 
> 赞同：5
> 
> 时间：2012-07-13T08:44:29.000
> 
> 标签：php, performance, exception

我正在做一个相当大的项目，并且在 stackoverflow 和其他网站上阅读了很多关于异常的内容。结果是，有 100% 的正确或错误。有些会为无效的用户输入抛出异常，有些则不会。有些仅针对运行时错误抛出异常，有些则不会...

我个人喜欢即使对于无效的用户输入也抛出异常的方式。

现在我的问题是，例如，我有一个用户可以评论另一个用户的声明（例如他/她最喜欢的音乐等）。每个用户只能评论一次。现在，为评论创建数据库条目的函数检查用户是否已经对该语句发表了评论。如果是，则抛出异常。通常我会说我将这个异常命名为：ExceptionStatementAlreadyCommented，但我在这个项目中还有许多其他功能，如果我总是创建这样的特定异常，我最终会得到大约 100 到 200 个异常。

这会影响性能吗？我通过 __autoload 函数自动加载所需的类，因此只有在需要时才加载实际的异常。

这是命名这样的异常的好方法吗？过去，我在为不同的错误使用一个异常时遇到了麻烦，因为当我捕获异常时，有时会捕获我不想捕获的异常。

非常感谢您的帮助！

最好的祝福，

弗雷迪

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-13T08:52:16.810

我的感觉是你已经过度使用异常了。正如名称所引用的，期望只应在**Exceptional Circumstances 下**引发。

不应使用异常来控制应用程序的流程。输入错误数据或未​​输入正确用户名和密码的用户将被视为应用程序正常流程的一部分，而不是异常情况。

您应该只在可能导致整个或部分应用程序不可用的异常情况下抛出异常，例如，无法连接到数据库。

这样，您就不会在系统中遇到太多需要捕获甚至重新抛出的异常。

有不同的异常是个好主意，例如，我使用[RedBean ORM](http://www.redbeanphp.com/)与我的数据库通信，它使用这些异常：

*   RedBean_Exception_Security（发生安全异常时）。
*   RedBean_Exception_SQL（当出现错误的 sql 语法或其他问题时）。

对异常过于具体会导致很多混乱。例如，如果我对`missing sql column`、`bad syntax`、`missing value`等有一个例外，它会变得非常难以管理。但是，如果我有一个`SQL_Exception`, 并将该异常用于上述所有内容，那么管理起来会更加整洁和简单。

至于性能，必须加载大量类（我假设它们在外部文件中）可能会对应用程序造成负担。这可以通过使用[APC](http://php.net/manual/en/book.apc.php)在内存中缓存解释的 PHP 代码来部分缓解。但是，如果没有任何分析，这很难说。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-13T08:51:02.880

最好有一个异常树，从最一般的延伸到最具体的，例如，你的`StatementAlreadyCommentedException`（这就是它应该被命名的方式，最后是 Exception 部分）应该继承自`InvalidUserInputException`，或者可能`AlreadyExistsException`是异常，那些应该从更一般的东西继承，比如`Exception`.

这样，您可以捕获比您正在搜索的异常更具体的所有异常（如果您需要它）。（你可以 catch `Exception`，它会捕捉所有可能的异常，你可以 catch `AlreadyExistsException`，它会捕捉任何扩展它的异常。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-13T08:50:15.363

为每种可能的错误类型创建一个单独的异常类是没有意义的。这个想法是异常类名称应该*粗略*地描述错误，并且每个类都应该设置适当的变量，以便与异常消息一起描述确切的错误。

虽然当前的方法不会影响您的性能（至少异常类的数量不会），但它可能会影响您的可维护性，因为听起来有相当多的精神开销实际上不会产生任何有形的东西益处。

如果您创建一个经过深思熟虑的异常*层次结构*`\Exception`，而不是生成 200 个直接扩展.

例如，`RecordAlreadyExistsException`对所有类似情况使用异常之类的东西，而不是`ThisTypeOfRecordAlreadyExistsException`对每种情况使用 a 。

# file - 多个小文件作为 map reduce 的输入

> ID：11467049
> 
> 赞同：2
> 
> 时间：2012-07-13T08:44:39.087
> 
> 标签：file, input, hadoop, mapreduce, mapper

我有很多小文件，比如说超过 20000 个。

我想节省映射器初始化所花费的时间，所以是否可以只使用 500 个映射器，每个处理 40 个小文件作为其输入？

如果可能的话，我需要有关如何实现这种输入格式的指导，谢谢！

BTW，我知道我应该合并这些小文件，这一步也是需要的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T09:02:42.963

可以使用 CombineFileInputFormat。它存在于[旧](http://hadoop.apache.org/mapreduce/docs/r0.21.0/api/org/apache/hadoop/mapred/lib/CombineFileInputFormat.html)的和[新](http://hadoop.apache.org/mapreduce/docs/r0.21.0/api/org/apache/hadoop/mapreduce/lib/input/CombineFileInputFormat.html)的MR API 中。这是一篇关于如何使用它的不错的[博客文章。](http://blog.yetitrails.com/2011/04/dealing-with-lots-of-small-files-in.html)

# android - 与普通 SQLite 存储相比，使用 ContentProvider 有什么优势？

> ID：11467051
> 
> 赞同：4
> 
> 时间：2012-07-13T08:44:41.253
> 
> 标签：android, android-contentprovider, android-contentresolver

我想在多个应用程序之间共享数据，而不是使用 ContentResolver->ContentProvider 机制，我可以定义一个客户端库来与执行 SQLite DB 操作的进程对话吗？

ContentProvider 在这里带来了哪些我们无法通过 Process 公开数据来实现的功能？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-13T08:56:18.710

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T08:52:34.510

您可以查看以下线程： [“Content-Provider”和“SQLite Database”之间的确切区别](https://stackoverflow.com/questions/3350408/exact-difference-between-content-provider-and-sqlite-database)

# c++ - 有没有可以枚举端口的跨平台c++串口库？

> ID：11467054
> 
> 赞同：12
> 
> 时间：2012-07-13T08:44:58.377
> 
> 标签：c++, serial-port, cross-platform

我正在寻找一个可以连接到串行端口设备并与之通信的 c++ 库。我需要一个可以在windows和linux上使用的。我已经找到了“serialib”，但这没有枚举可用端口的功能。

所以我要么需要一个跨平台的“端口枚举器”库，要么需要一个全新的跨平台串行端口库。

有谁知道好的吗？

谢谢，丹。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-08-28T23:06:41.217

[http://wjwwood.io/serial/](http://wjwwood.io/serial/)

[https://github.com/wjwwood/serial](https://github.com/wjwwood/serial)

这是一个跨平台的串口库，它是 MIT 许可的，运行时没有外部依赖项。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-01T03:04:17.970

QextSerialPort项目是一个包含端口枚举的跨平台串行端口库[。](http://code.google.com/p/qextserialport/)[这](http://docs.qextserialport.googlecode.com/git/1.2/examples-enumerator-main-cpp.html)是他们对所有串行端口进行简单枚举的示例。

# c - #ifndef _WIN32 是什么意思？

> ID：11467055
> 
> 赞同：3
> 
> 时间：2012-07-13T08:45:02.290
> 
> 标签：c, linux

> **可能重复：**
> [#ifdef 和 #ifndef 的作用](https://stackoverflow.com/questions/3744608/the-role-of-ifdef-and-ifndef)

做

```
#ifndef _WIN32 
```

指示 cpp 省略 32 位 windows 平台的代码？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-13T08:51:04.947

`#ifndef _WIN32``#endif`如果 _WIN32 未定义，则告诉预处理器将代码包含在它下面，直到对应的 _WIN32 。

```
#ifndef _WIN32
#define STR1 "Some String"
#endif 
```

如果 _WIN32 未定义，宏 STR1 将被包括在内，如果 _WIN32 被定义，则不会包括在内。请注意，_WIN32 是系统定义的宏。通常，不适用于 Windows 平台或通用且无法在 Windows 中编译的代码放在此类 #ifndef _WIN32 宏下。

[MSDN 页面](http://msdn.microsoft.com/en-us/library/b0084kay%28v=vs.80%29.aspx)说默认情况下将为所有 32 位和 64 位版本定义 _WIN32。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T08:51:46.530

该指令的意思是“在定义 _WIN32 宏时不包含此代码”。如果仅在为 Win32 编译时定义宏 _WIN32，则此代码“指示 cpp 省略 32 位 windows 平台的代码”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T10:27:00.197

好吧，它是一个预处理器指令。它被称为编译常量。

如果编译常量（如_WIN32）没有定义，编译器会考虑那些#ifndef 下的那段代码。

我相信上述解释将帮助您解决您的查询。

更加具体，

```
#ifndef _WIN32

...
...
...
some code
...
...
...

#endif 
```

这里如果你没有定义_WIN32（比如#define _WIN32），那么#if...#endif中的代码将被编译。

希望能帮助到你。

# javascript - 如何获取 gridPanel 单元格值？ExtJs

> ID：11467060
> 
> 赞同：1
> 
> 时间：2012-07-13T08:45:28.553
> 
> 标签：javascript, extjs

我有一个带有`ColumnModel`. 其中一列是`ActionColumn`带有按钮的。我想通过单击按钮从同一行的单元格中获取单元格值？这该怎么做？

我的行动专栏

```
{
        xtype: 'actioncolumn',
        width: 50,
        items: [{
               icon   : url_servlet+'externals/gxp/src/theme/img/pencil.png', 
            tooltip: 'Редактировать участок',
            handler: function(grid, rowIndex, colIndex) {
            alert("DAMACIA!!!!");
           } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-13T10:12:41.810

您在处理程序参数中拥有所需的一切

```
handler: function(grid, rowIndex, colIndex) {
            var row = grid.getStore().getAt(rowIndex);
            console.log(row);
           } 
```

上面的代码将为您提供行，因此您只需要选择所需的单元格。

如果您在单击 actioncolumn 之前强制选择，您也可以使用下面的代码。但请注意，默认情况下单击 actioncolumn 不会触发选择，因此在单击 actioncolumn 时可以选择完全不同的行，甚至根本无法选择任何列。

```
grid.getSelectionModel().getSelection() 
```

# haskell - 如何从 Haskell 中的 IO 操作中获取正常值

> ID：11467066
> 
> 赞同：21
> 
> 时间：2012-07-13T08:46:02.120
> 
> 标签：haskell, io-monad

我有以下功能：

```
get :: Chars -> IO Chars
get cs = do
    char <- getChar
    let (dats, idx) = (curData cs, curIndex cs)
    let (x,y:xs) = splitAt idx dats
    let replacement = x ++ (ord char) : xs
    return $ Chars replacement idx 
```

我想从中获得价值`Chars`，*而不是*`IO`行动。我*不*知道如何做到这一点，或者是否有可能。

该`Chars`类型基本上只是一个容器：

```
data Chars = Chars {
               curData  :: [Int],
               curIndex :: Int
               -- etc.
             } 
```

细节并不那么重要，我只想知道这个函数是否有办法返回 a`Chars`而不是 a `IO Chars`。

如果没有，我如何将它作为参数传递给接受 a 的函数`Chars`？我对 Haskell I/O 有点陌生，但我不认为我希望所有作为参数的函数`Chars`都必须`IO Chars`作为参数，然后提取并重新打包它们。似乎没有必要。

谢谢！

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-07-13T08:50:35.687

你不能，因为那会违反[引用透明性](http://en.wikipedia.org/wiki/Referential_transparency_%28computer_science%29)。

Haskell 中的 IO 以这种方式精确区分其结果和效果可能会因与环境/用户的交互而变化的操作和当您使用相同的输入参数调用它们时其结果不会改变的纯函数。

为了将结果传递给一个接受`Chars`输入的纯函数，您必须将您的 IO 操作调用到另一个 IO 操作中，将结果与`<-`运算符绑定到一个变量并将其传递给您的纯函数。伪代码示例：

```
myPureFunction :: Chars -> ...

otherAction :: Chars -> IO ()
otherAction cs = do
  myChars <- get cs
  let pureResult = myPureFunction myChars
  ... 
```

如果您不熟悉 Haskell 中的 IO，您可能希望查看[学习 Haskell 中的输入和输出章节！](http://learnyouahaskell.com/input-and-output)和[真实世界的 Haskell](http://book.realworldhaskell.org/read/io.html)。

实际上有一种方法可以简单地从 IO 操作中获取纯值，但在您的情况下，您不应该这样做，因为您正在与环境交互：只有当您可以保证自己是时，不安全的方法才可以不违反参考透明度。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-07-13T08:54:03.520

这是不可能的（我撒谎，有一种非常不安全的方法可以欺骗你摆脱它）。

关键是，如果执行任何 I/O，程序的行为和结果可能不仅仅取决于所使用函数的显式参数，因此必须在类型中声明它`IO something`。

您可以通过将结果`IO a`绑定到`main`（或从 调用的东西`main`）中来使用纯函数中的操作结果，然后应用纯函数，将结果绑定到 a 中`let`，

```
cs ::Chars
cs = undefined

main = do
  chars <- get cs
  let result = pureFunction chars
  print result 
```

或者，如果您要应用的函数`chars`具有类型`Chars -> IO b`

```
main = do
    chars <- get cs
    doSomething chars 
```

# javascript - 如何使用 Google Maps API 在标记上设置弹出窗口？

> ID：11467070
> 
> 赞同：23
> 
> 时间：2012-07-13T08:46:28.700
> 
> 标签：javascript, google-maps, google-api

我有这段代码，可以在其中显示和设置所有标记。如何使用此代码添加包含有关标记的一些信息的弹出窗口？我在文本上添加了“i”变量，但它在所有标记弹出窗口上设置了“test - 723”，其中 723 是“i”变量的最后一个值。怎么了？

```
for (var i = 0; i < arraylng.length-1; i++) {
  var marker = new google.maps.Marker({
    position: new google.maps.LatLng(arraylng[i], arraylat[i])
  });
  var infowindow = new google.maps.InfoWindow({
    content: " "
  });
  google.maps.event.addListener(marker, 'click', function() {
    infowindow.setContent('test: ' + i + '');
    infowindow.open(map, this);
  });
  markers.push(marker);
} 
```

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-07-13T14:58:53.263

首先，将循环条件更改为`i < arraylng.length`。现在它没有捕获数组的最后一个元素。

JavaScript 变量适用于函数范围，因此您需要为每个标记侦听器调用一个函数来创建正确的变量引用。您可以使用匿名函数，[**如此处所示**](https://stackoverflow.com/a/3059129/1238040)，或定义一个函数来创建点击侦听器：

多个信息窗口：

```
function makeInfoWindowEvent(map, infowindow, marker) {
  google.maps.event.addListener(marker, 'click', function() {
    infowindow.open(map, marker);
  });
} 
```

很可能您不希望同时打开多个 InfoWindow，因为必须单击关闭很烦人`x`。然后您只需要一个 InfoWindow 对象，并在单击标记时设置内容：

单个信息窗口：

```
...
  var infowindow = new google.maps.InfoWindow();

  for (var i = 0; i < arraylng.length-1; i++) {
    var marker = new google.maps.Marker({
      position: new google.maps.LatLng(arraylng[i], arraylat[i]),
      map: map
    });

    makeInfoWindowEvent(map, infowindow, "test" + i, marker);

    markers.push(marker);
  }
}

function makeInfoWindowEvent(map, infowindow, contentString, marker) {
  google.maps.event.addListener(marker, 'click', function() {
    infowindow.setContent(contentString);
    infowindow.open(map, marker);
  });
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-12-09T08:46:36.680

```
var infowindow = new google.maps.InfoWindow();
var marker = new google.maps.Marker({
              position: myLatLng,
              ....
              content: point[4]
          });
google.maps.event.addListener(marker, 'click', function() {
            infowindow.setContent(this.content);
            infowindow.open(map, this);
          }); 
```

循环内的代码。这对我来说非常有效。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-08-24T10:53:46.403

这是您可以添加弹出内容的区域

```
var infowindow = new google.maps.InfoWindow({
                content: "Add your popup content here"
              }); 
```

这是为了显示您的弹出窗口

```
marker.addListener('click', function() {
          infowindow.open(map, marker);
        }); 
```

下面的代码显示了它是如何工作和使用的。

```
features.forEach(function(feature) {
          var infowindow = new google.maps.InfoWindow({
                    content: "Add your popup content here"
                  });
            var marker = new google.maps.Marker({
            position: new google.maps.LatLng(lat,long),
            icon: "image.png",
            /*icon: icons[feature.type].icon,*/
            title: "Title for marker",
            map: map
          });
          marker.addListener('click', function() {
          infowindow.open(map, marker);
        });
        });
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-13T08:52:25.310

那是因为该变量`i`没有在循环中使用，但是当单击标记时 - 然后 i 等于最后一个索引 + 1 ... 这`addListener`是异步的，而不是同步的。

删除`infowindow.setContent('test: ' + i + '');`并替换`content: " "`为`content: 'test: ' + i`。这应该可以解决您的问题。

# iphone - 在不同的 UIViewControllers 中调用单个视图

> ID：11467079
> 
> 赞同：1
> 
> 时间：2012-07-13T08:47:24.630
> 
> 标签：iphone, objective-c, ios

我已经`UIView`在一个`UIViewController`类中声明了一个。我可以`UIView`在另一个`UIViewController`班级打电话吗？

如果可能的话，我该怎么称呼它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T08:56:08.490

是的，您可以在多个视图/视图控制器中使用视图的单个实例。通常我对带有广告的视图做同样的事情。

您可以像处理任何其他对象一样传递它们。如果您不在 Interface Bulder 中创建它（我建议以编程方式创建它），那么您可能希望在应用程序委托中定义它而不是视图控制器，并将其传递给使用它的各个视图控制器。

在视图控制器中，只需将其添加为相应的子视图，就像您对任何其他视图一样。

不过有一件事。当您第二次或更多次将此视图添加到另一个超级视图时，它将从之前的超级视图中删除。这意味着当它之前的超级视图再次可见时，您将不得不再次将其添加为超级视图。一个视图一次只能是一个视图层次结构的一部分。

* * *

示例代码，感谢 Gordon：

```
/* Untested and simplified */
AppDelegate.h:
@property ( strong, nonatomic) ReuseableView reuseableView 
```

;

AppDelegate.m

```
@synthesize reuseableView; 

/* in didFinishLaunchingWithOptions ...*/ 
reuseableView = [[alloc] init]; // or init from nib, initwithframe, etc. 
```

视图控制器.m

```
/* In each view controller that uses the view */
 - (void) viewWillAppear:(BOOL)animated 
{ 
  [self.view addSubview:((AppDelegate*)[UIApplication sharedApplication].delegate).reuseableView]; 
}

 - (void) viewWillDisappear:(BOOL)animated 
{ 
  [((AppDelegate*)[UIApplication sharedApplication].delegate).ReuseableView removeFromSuperview]; 
```

}

* * *

我不太确定这`removeFromSuperview`是否真的需要。`addSubview`无论如何，下一个都会将其从现有的超级视图中删除，如果`addSubview`连续两次在同一个超级视图上调用，那么它不会造成任何伤害。但是，此时可以保存使用`removeFromSuperview`。

嗯，总结一下，基本就这些了。您在一个公共位置定义、创建和存储您的共享视图（Gordon 示例中的可重用视图）。应用程序委托是一个很好的地方。在每个使用共享视图的视图控制器中，您从委托中获取它并将其作为子视图添加到当前视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T08:59:54.523

我会将 UIView 子类化并将其导入我想使用它的 ViewControllers

```
 NSArray *nibArray = [[NSBundle mainBundle] loadNibNamed:@"YourView" owner:self options:nil];
    yourView = (YourView *)[nibArray objectAtIndex:0]; 
```

然后你设置它的框架和`[self.view addSubview:yourView]`

# c# - LinqToSql 查询中的“指定转换无效”

> ID：11467080
> 
> 赞同：1
> 
> 时间：2012-07-13T08:47:31.213
> 
> 标签：c#, linq-to-sql, casting, enums, .net

**指定的强制转换无效**。

OrderItemState 是*枚举*。

```
IEnumerable<OrderItemState> states = ...;
IEnumerable<byte> stateIds = Enumerable.Cast<byte>(states);

List<OrderEntry> entries =
  (from m in dc.OrderItemMotions
   where stateIds.Contains(m.OrderItemStateId)
   select ...).ToList(); 
```

为什么？

StackTrace 的一部分：

> 在 System.Linq.Enumerable.d__b1 `1.MoveNext() at System.Linq.Enumerable.<OfTypeIterator>d__aa`1.MoveNext() 在 System.Linq.Enumerable.WhereSelectEnumerableIterator `2.MoveNext() at System.Collections.Generic.List`1..ctor(IEnumerable`1 collection) at System.Linq.Enumerable.ToList[TSource](IEnumerable`1 来源）在 System.Data.Linq.SqlClient.QueryConverter.VisitSequenceOperatorCall(MethodCallExpression mc) 在 System.Data.Linq.SqlClient.QueryConverter.VisitInner 的 System.Data.Linq.SqlClient.QueryConverter.VisitContains(Expression sequence, Expression value) （表达式节点）在 System.Data.Linq.SqlClient.QueryConverter.Visit（表达式节点）在 System.Data.Linq.SqlClient.QueryConverter.VisitWhere（表达式序列，LambdaExpression 谓词）在 System.Data.Linq.SqlClient.QueryConverter。 VisitSequenceOperatorCall(MethodCallExpression mc) at System.Data.Linq.SqlClient.QueryConverter.VisitInner(Expression node) at System.Data.Linq.SqlClient.QueryConverter.VisitWhere(Expression sequence, LambdaExpression predicate) at System.Data.Linq.SqlClient.QueryConverter .VisitSequenceOperatorCall(MethodCallExpression mc) at System.Data.Linq.SqlClient.QueryConverter.VisitInner(Expression node) at System.Data.Linq.SqlClient.QueryConverter.VisitGroupBy(Expression sequence, LambdaExpression keyLambda, LambdaExpression elemLambda, LambdaExpression resultSelector) at System.Data .Linq.SqlClient.QueryConverter.VisitSequenceOperatorCall(MethodCallExpression mc) at System.Data.Linq.SqlClient.QueryConverter.VisitInner(Expression node) at System.Data.Linq.SqlClient.QueryConverter.VisitJoin(Expression outerSequence, Expression innerSequence, LambdaExpression outerKeySelector, System.Data.Linq.SqlClient.QueryConverter.VisitSequenceOperatorCall(MethodCallExpression mc) 在 System.Data.Linq.SqlClient.QueryConverter 的 LambdaExpression innerKeySelector、LambdaExpression resultSelector)。在 System.Data.Linq.SqlClient.SqlProvider.BuildQuery（表达式查询，SqlNodeAnnotations 注释）在 System.Data.Linq.SqlClient.SqlProvider 的 System.Data.Linq.SqlClient.QueryConverter.ConvertOuter（表达式节点）的 VisitInner（表达式节点） System.Data.Linq.DataQuery 处的 .System.Data.Linq.Provider.IProvider.Execute（表达式查询）`1.System.Collections.Generic.IEnumerable<T>.GetEnumerator() at System.Collections.Generic.List`1..ctor（IEnumerable `1 collection) at System.Linq.Enumerable.ToList[TSource](IEnumerable`1 源）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T08:56:16.367

您不能在没有数据丢失的情况下将 an`enum`转换为 a `byte`，因此转换将失败（在引擎盖下`enum`是 a ）。`int`

但是，如果您只想使用 0-255 范围内的值，则可以定义一个`enum`使用引擎盖下的值：`byte`

```
public enum Values : byte { val1, val2}; 
```

见这里：http: [//msdn.microsoft.com/en-us/library/sbbt4032.aspx](http://msdn.microsoft.com/en-us/library/sbbt4032.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T08:55:59.453

如果枚举的基本类型是 int（这是默认值），您可以将枚举强制转换为 int。

如果枚举的基本类型是字节，则可以将枚举强制转换为字节。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T08:56:45.437

您的枚举值中的一个很可能包含一个无法放入`byte`.

假设这段代码：

```
IEnumerable<MyEnum> arr = new MyEnum[] { MyEnum.first, MyEnum.second };
var bytes = Enumerable.Cast<byte>(arr);
foreach (var b in bytes)
{
    Console.WriteLine(b);
} 
```

如果出现以下情况，它将起作用：

```
enum MyEnum:byte { first = 120, second }; 
```

如果出现以下情况，它将不起作用：

```
enum MyEnum:long { first = 1204, second }; 
```

# java - 随机像素的图像

> ID：11467082
> 
> 赞同：1
> 
> 时间：2012-07-13T08:47:35.020
> 
> 标签：java, image, user-interface, random

我正在尝试制作随机像素的图像。我写了这段代码，但没有 **用 LadderSnack.java**

```
import java.awt.*;
import java.awt.image.BufferStrategy;
import java.awt.image.BufferedImage;
import java.awt.image.DataBufferInt;
import javax.swing.*;

public class LadderSnack extends Canvas implements Runnable {
    public static JFrame frame = new JFrame("EmiloLadderSnack v. 1.0");
    public static int width = Toolkit.getDefaultToolkit().getScreenSize().width, height = Toolkit.getDefaultToolkit().getScreenSize().height;
    public boolean run = false;
    public Thread thread;
    public BufferedImage img;
    public int[] pixels;
    public Screen screen;

    public LadderSnack() {
        screen = new Screen(width, height);
        img = new BufferedImage(width, height, BufferedImage.TYPE_INT_BGR);
        pixels = ((DataBufferInt) img.getRaster().getDataBuffer()).getData();
    }

    public void start() {
        if (run)
            return;
        run = true;
        thread = new Thread(this);
        thread.start();
    }

    public void stop() {
        if (!run)
            return;
        try {
            thread.join();
        } catch (Exception e) {
            e.printStackTrace();
            System.exit(0);
        }
    }

    public void run() {
        while (run) {
            trick();
            render();
        }
    }

    private void trick() {
    }

    private void render() {
        screen = new Screen(width, height);
        BufferStrategy bs = this.getBufferStrategy();
        if (bs == null) {
            createBufferStrategy(3);
            return;
        }
        for (int i = 0; i < width * height; i++)
            pixels[i] = screen.pixels[i];
        Graphics g = bs.getDrawGraphics();
        g.drawImage(img, 0, 0, width, height, null);
        g.dispose();
        bs.show();
    }

    public static void main(String[] args) {
        LadderSnack ladderSnack = new LadderSnack();

        frame.setSize(width, height);
        frame.setDefaultCloseOperation(frame.EXIT_ON_CLOSE);
        frame.add(ladderSnack);
        frame.setLocationRelativeTo(null);
        frame.setVisible(true);

        ladderSnack.start();
    }
} 
```

**渲染.java**

```
public class Render {

public int width, height;
    public int[] pixels;

    public Render(int width, int height) {
        this.width = width;
        this.height = height;
        pixels = new int[width * height];
    }

    public void draw(Render render, int xOffset, int yOffset) {
        int xPixel, yPixel, y, x;
        for (x = 0; x < width; x++) {
            xPixel = x + xOffset;
            for (y = 0; y < height; y++) {
                yPixel = y + yOffset;
                pixels[xPixel + yPixel * width] = render.pixels[xPixel + yPixel * width];
            }
        }
    }
} 
```

**屏幕.java**

```
import java.awt.Toolkit;
import java.util.Random;

public class Screen extends Render {

    private Render test;

    public Screen(int width, int height) {
        super(width, height);
        int i;
        Random rand = new Random();
        test = new Render(Toolkit.getDefaultToolkit().getScreenSize().width, Toolkit.getDefaultToolkit().getScreenSize().height);
        for (i = 0; i < width * height; i++)
            pixels[i] = rand.nextInt();
    }

    public void render() {
        draw(test, 0, 0);
    }
} 
```

在运行时

```
public void render() {
    draw(test, 50, 50);
} 
```

在 Screen.java 中永远不会执行移动图像我希望图像在框架中移动，作为制作动画和动画随机像素图像的步骤。请帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-02T16:32:43.410

您可能想使用我的 api：[http](http://www.threadox.com/projects/random-image-api/) ://www.threadox.com/projects/random-image-api/ 您收到一个缓冲图像，然后您只需将其绘制到画布上。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T09:07:39.497

你的代码一团糟。以下是您可能需要注意的内容：[在 Java 中绘制像素图像](https://stackoverflow.com/questions/7047749/painting-pixels-images-in-java)

以下是问题：

*   `private void LadderSnack()`我认为这应该是构造函数所以应该写`private LadderSnack()`

*   `Runnable`应该重新考虑您的实施。避免使用`while(true){}`而是使用`while(true) {Thread.sleep(xxx)}`以避免您的应用程序冻结。

*   您创建一个`pixels`随机值数组，然后使用`pixels = ((DataBufferInt) img.getRaster().getDataBuffer()).getData();`数据缓冲区中的任何内容覆盖您的值。

*   你永远不会使用你的`pixels`数组。

*   我认为你应该回顾整个概念。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-14T08:05:23.650

**LadderSnack.java**

```
import java.awt.*;
import java.awt.image.BufferStrategy;
import java.awt.image.BufferedImage;
import java.awt.image.DataBufferInt;
import javax.swing.*;

public class LadderSnack extends Canvas implements Runnable {
    public static JFrame frame = new JFrame("EmiloLadderSnack v. 1.0");
    public static int width = Toolkit.getDefaultToolkit().getScreenSize().width, height = Toolkit.getDefaultToolkit().getScreenSize().height;
    public boolean run = false;
    public Thread thread;
    public BufferedImage img;
    public int[] pixels;
    public Screen screen;

    public LadderSnack() {
        screen = new Screen(width, height);
        img = new BufferedImage(width, height, BufferedImage.TYPE_INT_BGR);
        pixels = ((DataBufferInt) img.getRaster().getDataBuffer()).getData();
    }

    public void start() {
        if (run)
            return;
        run = true;
        thread = new Thread(this);
        thread.start();
    }

    public void stop() {
        if (!run)
            return;
        try {
            thread.join();
        } catch (Exception e) {
            e.printStackTrace();
            System.exit(0);
        }
    }

    public void run() {
        while (run) {
            trick();
            render();
        }
    }

    private void trick() {
    }

    private void render() {
        BufferStrategy bs = this.getBufferStrategy();
        if (bs == null) {
            createBufferStrategy(3);
            return;
        }
        for (int i = 0; i < width * height; i++)
            pixels[i] = screen.pixels[i];
        Graphics g = bs.getDrawGraphics();
        g.drawImage(img, 0, 0, width, height, null);
        g.dispose();
        bs.show();
    }

    public static void main(String[] args) {
        LadderSnack ladderSnack = new LadderSnack();

        frame.setSize(width, height);
        frame.setDefaultCloseOperation(frame.EXIT_ON_CLOSE);
        frame.add(ladderSnack);
        frame.setLocationRelativeTo(null);
        frame.setVisible(true);

        ladderSnack.start();
    }
} 
```

**渲染.java**

```
public class Render {

public int width, height;
    public int[] pixels;

    public Render(int width, int height) {
        this.width = width;
        this.height = height;
        pixels = new int[width * height];
    }

    public void draw(Render render, int xOffset, int yOffset) {
        int xPixel, yPixel, y, x;
        for (x = 0; x < render.width; x++) {
            xPixel = x + xOffset;
            for (y = 0; y < render.height; y++) {
                yPixel = y + yOffset;
                pixels[xPixel + yPixel * width] = render.pixels[xPixel-xOffset + (yPixel-yOffset) * render.width];
            }
        }
    }
} 
```

**屏幕.java**

```
import java.awt.Toolkit;
import java.util.Random;

public class Screen extends Render {
    private Render test;

    public Screen(int width, int height) {
        super(width, height);
        int i;
        Random rand = new Random();
        test = new Render(333,333);//Toolkit.getDefaultToolkit().getScreenSize().width, Toolkit.getDefaultToolkit().getScreenSize().height);
        for (i = 0; i < 333 * 333; i++)
            test.pixels[i] = rand.nextInt();
        render();
    }

    public void render() {
        draw(test, 50, 50);
    }
} 
```

# javascript - 看不到 dom 元素中的附加文本

> ID：11467084
> 
> 赞同：1
> 
> 时间：2012-07-13T08:47:43.983
> 
> 标签：javascript, jquery, append

我尝试使用两者将一些数据附加到 dom 元素

```
$("#slider-hide").append("some text"); 
```

乃至

```
document.getElementById("slider-hide").innerHTML += "some text"; 
```

但是在我对它执行浏览器搜索之前，该文本是不可见的，一旦我执行搜索，它就永久可见......这不是css问题

我已经在 chrome 和 safari 中进行了测试，它给了我同样的问题。

这是完整的功能

```
$("#expand").click(
                function()
                {
                    $("#right_arrow").hide();
                    $("#left_arrow").hide();

                    var ht = document.getElementById('graph-div').offsetHeight;

                    $("#graph-div").animate({height:ht*numberOfSlides},"slow");
                    currentPosition = 0;
                    $("#energy_tag").html(orders_arr[currentPosition]);
                    $(".highcharts-legend").hide();

                    var item1 = $("#business-chart").html();

                    $("#slider-hide").append("fasfdsafdsafdsafdsfdsafdsafdsafdsafds");
                    document.getElementById("slider-hide").innerHTML += "some text";
                }
            ); 
```

**编辑：** **这是相关的 html div**

```
<div class="content_boundary" style="background-color:#e3e3e3" >
  <h2 style="text-align:center;font-size:20px;" id="energy_tag" class="tab_first_col">Energy</h2>
  <div style="position:relative;" id="graph-div">
    <a href="#" class="control" id="left_arrow">
      <img  src="stylesheets/images/arrow_side_normal_left.png" style="position:absolute;top:100px;left:10px;"></img>
    </a>
    <div class="slider-hide" id="slider-hide">
      <div id="business-chart" class="orders-by-busines"> </div>
      <div id="business-chart1" class="orders-by-busines"> </div>
      <div id="business-chart2" class="orders-by-busines"> </div>
      <div id="business-chart3" class="orders-by-busines"> </div>
      <div id="business-chart4" class="orders-by-busines"> </div>
      <div id="business-chart5" class="orders-by-busines"> </div>
    </div>
    <div class="clear"></div>
    <a href="#" class="control" id="right_arrow">
      <img  src="stylesheets/images/arrow_side_normal_right.png" style="position:absolute;right:10px;top:100px;" ></img>
    </a>
  </div> 
```

**截屏**

![在此处输入图像描述](../Images/67c33ef5e109fda0ff05d5c004271a6c.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T09:18:05.867

工作代码：http: [//jsfiddle.net/wPdWF](http://jsfiddle.net/wPdWF)

当我第一次运行您的代码时，我在`numberOfSlides`和上遇到未声明的变量错误`orders_arr`。它错误的确切行是：

`$("#energy_tag").html(orders_arr[currentPosition]);`

```
$("#graph-div").animate({
        height: ht * numberOfSlides
}, "slow"); 
```

当我为这两个变量声明测试值时，附加代码工作正常。您在代码中的何处声明上述变量？

# zend-framework - 从应用程序和 REST 中检索相同的数据

> ID：11467086
> 
> 赞同：0
> 
> 时间：2012-07-13T08:47:53.577
> 
> 标签：zend-framework, rest

使用 Zend 框架，如果我想从我的应用程序和通过 REST 接收相同的数据，这将由相同的操作控制器处理，即

```
articlesController extends Zend_Controller_Action
{
    listAction()
    {
        // Service layer get data

        // REST request return results in JSON

        // Normal request return view
    }
} 
```

还是应该在单独的控制器中？

```
articlesController extends Zend_Controller_Action
{
    listAction()
    {
        // Service layer get data
        // Returns view
    }
}

articlesController extends Zend_Rest_Controller
{
    getAction()
    {
        // Service layer get data
        // Returns view
    }
} 
```

希望这是有道理的

多谢你们

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T14:29:04.510

In a default MVC Zend Framework setup the Controller and Action names are linked to the path. The router examines the path and then dispatches to the appropriate controller and action.

With that in mind it doesn't really matter how you set this up. **It only depends how you like to structure your paths**.

If you have certain information in your path with the additional parameters you could combine everything within one action. Your first param could be "api" for REST request or if your additional params are in the URI path you have a regular request but if the params are in a GET array you have a API REST request. That would all work for your first example and I guess you already thinking that way.

For me it would be more appropriate to have an API path, though. With that you will have a API controller and the corresponding actions. In your second example this would mean your API controller looks more like this

```
apiController extends Zend_Rest_Controller {
    articlesAction() {
         // your REST data here
    }
}

// URI path: /api/articles 
```

Note that you cannot have two controllers with the same name.

# delphi - Delphi 合并选项卡

> ID：11467087
> 
> 赞同：0
> 
> 时间：2012-07-13T08:47:55.487
> 
> 标签：delphi, tabs

我正在使用 XE2 并试图将选项卡合并到我的表单 GUI 应用程序中，但不知道这么简单的东西我会遇到这么多麻烦..lol。

无论如何...

我有一个名为 TTabSet1 的 TTabSet ..

当我尝试将列表视图添加到第一个选项卡时，它只出现在所有选项卡上。示例：

表 1：

![在此处输入图像描述](../Images/65ba652761036ae3ada0b26a0cf44412.png)

表 2：

![在此处输入图像描述](../Images/25fa832f0a5a01eea66e8fc5659ec8d5.png)

在 IDE 中：

![在此处输入图像描述](../Images/c0702f4a9cb9ef13e3d354c8a775a0ab.png)

我应该使用另一个组件而不是 TTabSet 吗？此外，在使用 TTabSet 时，在 IDE 中，我无法更改选项卡以将组件添加到其他选项卡...

很抱歉，如果你们除了回答我的 n00b 问题之外还有更好的事情要做，哈哈，但非常感谢任何帮助。

多谢你们。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T10:26:07.163

的用法`TTabControl`通常涉及编写[OnChange](http://docwiki.embarcadero.com/Libraries/en/Vcl.ComCtrls.TTabControl.OnChange)事件处理程序以动态隐藏/显示（或销毁/创建）子控件。为了让您的生活更轻松，您可以为每个选项卡创建一个单独的框架，并在用户单击选项卡时创建并显示相关框架，并释放前一个。

`TPageControl`可能更容易使用，因为您可以在设计时简单地创建和填充所有选项卡（右键单击页面控件并选择“新建页面”以创建新的选项卡）。在运行时，它们都是在创建表单时创建的。页面控件自动为您管理隐藏和显示。不利的一面可能是在父元素的整个生命周期中，所有元素都使用了内存，包括隐藏的元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T08:50:15.840

> 当我尝试将列表视图添加到第一个选项卡时，它只出现在所有选项卡上。

在这种情况下，听起来您需要的组件是`TPageControl`. 页面控件的每个页面都有不同的内容。

要将新页面添加到 中`TPageControl`，请右键单击`TPageControl`对象并选择**新页面**。

* * *

状态的[文档](http://docwiki.embarcadero.com/Libraries/en/Vcl.Tabs.TTabSet)`TTabSet`：

> 选项卡集控件通常用于在对话框中显示选项卡式页面。`TTabSet`提供向后兼容性。`TTabControl`在 32 位 Windows 应用程序中使用组件。

因此，即使`TTabSet`是适合您的控件类型，您也应该使用`TTabControl`。`TTabControl`和之间的选择`TPageControl`解决如下：

1.  您是否希望每个页面都显示相同的控件，尽管这些控件中的数据可能不同？如果是这样，那么使用`TTabControl`.
2.  您希望每个页面显示不同的控件吗？如果是这样，那么使用`TPageControl`.

# vb.net - 通用函数中的 LINQ 语句

> ID：11467088
> 
> 赞同：0
> 
> 时间：2012-07-13T08:47:57.057
> 
> 标签：vb.net, linq, generics

我正在开发一个 ASP.NET MVC 项目。通过具有简单缓存功能的存储库访问数据。它包含几个功能，如以下两个：

```
Public Function SelectAllCurrencies() As List(Of store_Currency) 
    Dim AllCurrencies As List(Of store_Currency)
    If UseCaching Then
        AllCurrencies = HttpContext.Current.Cache("AllCurrencies")
        If AllCurrencies Is Nothing Then
            AllCurrencies = (From Currencies In db.Currencies Order By Currencies.Title Ascending).ToList
            Cache.AddToCache("AllCurrencies", AllCurrencies)
        End If
    Else
        AllCurrencies = (From Currencies In db.Currencies Order By Currencies.Title Ascending).ToList
    End If
    Return AllCurrencies
End Function

Public Function SelectAllCountries() As List(Of store_Country) 
    Dim AllCountries As List(Of store_Country)
    If UseCaching Then
        AllCountries = HttpContext.Current.Cache("AllCountries")
        If AllCountries Is Nothing Then
            AllCountries = (From Countries In db.Countries Order By Countries.Title Ascending).ToList
            Cache.AddToCache("AllCountries", AllCountries)
        End If
    Else
        AllCountries = (From Countries In db.Countries Order By Countries.Title Ascending).ToList
    End If
    Return AllCountries
End Function 
```

如您所见，他们一遍又一遍地使用相同的工作流程。我想删除这种冗余。我认为泛型应该提供一个解决方案，但我一生都无法弄清楚如何处理泛型`SelectAllEntities(Of T)`函数中的 LINQ 语句。有没有办法“概括”查询，也许是动态 LINQ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T09:28:45.797

```
 public List<T> GenericMethod<T>(string str)
    {
        List<T> list;
        list=HttpContext.Current.Cache(str);
        if(list==null)
        {
            using(var db=new ObjectContext())
            {
                 list=db.CreateObjectSet<T>().ToList();
            }
         }
        return list;
    }
    public void GetCountries()
    {
        var countries = GenericMethod<AllCountries>("AllCountries").OrderBy(o => o.Title).ToList();
    }

    public void GetCurrencies()
    {
        var currencies = GenericMethod<AllCurrencies>("AllCurrencies").OrderBy(o => o.Title).ToList();
    } 
```

我希望 db 是 ObjectContext 的对象。我希望这将有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T10:02:11.350

我的 VB 有点生疏，但我想你想这样写你的函数。

```
Public SelectAll(Of T, TOrder)(
        IEnumerable(Of T) source,
        Func(Of T, TOrder) keySelector,
        cacheKey As String = Nothing) As IList(Of T)

    Dim all As List(Of T)
    If me.UseCaching Then
        all = HttpContext.Current.Cache(cacheKey)
        If all Is Nothing Then
            all = source.OrderBy(keySelector).ToList()
            Cache.AddToCache(cacheKey, all)
        End If
    Else
        all = source.OrderBy(keySelector).ToList()
    End If
    Return all
End Function 
```

你可以这样使用

```
Dim allCountries = SelectAll(db.Countries, Function(c) c.Title, "AllCountries") 
```

# struts2 - 在 struts.xml 文件（strust 2.3.4 框架）中使用“**constant**”时出现错误

> ID：11467093
> 
> 赞同：0
> 
> 时间：2012-07-13T08:48:13.357
> 
> 标签：struts2

我正在尝试使用框架 strust2.3.4 运行项目，但是当我在 struts.xml 文件中使用“**常量”时出现错误**

```
<constant name="struts.convention.action.packages" value="com.pfs.pnn.action"/> 
```

和配置动作

```
<action name="system_list" class="SystemListAction">
     <result name="success">/pages/system_list.jsp</result>
</action> 
```

错误 ：

```
Caused by: Action class [SystemListAction] not found - action - file:/D:/workspace/.metadata/.plugins/org.eclipse.wst.server.core/tmp0/wtpwebapps/pnn/WEB-INF/classes/struts.xml:8:58
    at com.opensymphony.xwork2.config.providers.XmlConfigurationProvider.verifyAction(XmlConfigurationProvider.java:434)
    at com.opensymphony.xwork2.config.providers.XmlConfigurationProvider.addAction(XmlConfigurationProvider.java:378)
    at com.opensymphony.xwork2.config.providers.XmlConfigurationProvider.addPackage(XmlConfigurationProvider.java:495)
    at com.opensymphony.xwork2.config.providers.XmlConfigurationProvider.loadPackages(XmlConfigurationProvider.java:286)
    at org.apache.struts2.config.StrutsXmlConfigurationProvider.loadPackages(StrutsXmlConfigurationProvider.java:112)
    at com.opensymphony.xwork2.config.impl.DefaultConfiguration.reloadContainer(DefaultConfiguration.java:234)
    at com.opensymphony.xwork2.config.ConfigurationManager.getConfiguration(ConfigurationManager.java:66)
    ... 16 more 
```

我不知道哪里出错了。请帮帮我！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T06:12:30.943

添加 struts2convention 插件，不提及完整包 `<constant name="struts.convention.action.packages" value="action"/>` 以获得更多链接[https://cwiki.apache.org/confluence/display/WW/Convention%20Plugin](https://cwiki.apache.org/confluence/display/WW/Convention%20Plugin)

# c# - 如何告诉我的 .NET 程序集 COM 对象的详细信息存储在注册表中的什么位置？

> ID：11467094
> 
> 赞同：4
> 
> 时间：2012-07-13T08:48:14.933
> 
> 标签：c#, .net, com

我遇到了这个问题中描述的问题： [Unable to cast COM object of type exception](https://stackoverflow.com/questions/1233468/unable-to-cast-com-object-of-type-exception) 这表现为错误：

> 无法将“System.__ComObject”类型的 COM 对象转换为接口类型“IMyInterface”。此操作失败，因为 IID 为“{GUID}”的接口的 COM 组件上的 QueryInterface 调用因以下错误而失败：不支持此类接口

我的 WPF 应用程序正在调用最终调用 COM 对象的 .NET 库。这工作正常，但它在主线程上运行并阻塞 UI。当我生成一个新线程并从中调用库时，我收到了该错误。其他问题的这些解决方案都不适合我。我试图了解运行时如何加载类型信息，但不能在线程之间共享它。

我知道 WPF 应用程序是 STA，我知道这意味着在线程之间移动的任何对象都将被 COM 编组。我不明白如何说“这是一个 COM 对象，它的 GUID 是这个”的类型信息可以在 AppDomain 中，但第二个线程无法访问。

加载的类型信息在哪里？它是在 AppDomain 中，还是在每个线程中？无论如何，我怎样才能让线程共享类型信息？我怎样才能解决这个问题？

我读过这个： http:
[//www.codeproject.com/Articles/9190/Understanding-The-COM-Single-Threaded-Apartment-Pa](http://www.codeproject.com/Articles/9190/Understanding-The-COM-Single-Threaded-Apartment-Pa)
和这个：http:
[//msdn.microsoft.com/en-us/ library/ms973913.aspx#rfacomwalk_topic10](http://msdn.microsoft.com/en-us/library/ms973913.aspx#rfacomwalk_topic10)
和一堆其他关于 COM 互操作的东西，但没有帮助我修复它。

根据 Hans Passant 的回答，我正在第二个 STA 线程中创建我的库对象：

```
 var thread = new Thread(delegate()
        {
            var aeroServer = new AeroServerWrapper(Config.ConnectionString);
            var ct = new CancellationToken();
            aeroServer._server.MessageReceived += ServerMessageReceived;
            aeroServer.Go(@"M:\IT\Public\TestData\file.dat", ct);
        });
        thread.SetApartmentState(ApartmentState.STA);
        thread.Start(); 
```

我知道，如果事件未能触发，我可能需要调用 Application.Run() 来启动消息队列，但我并没有走那么远：它在尝试创建 COM 对象时立即崩溃。AeroServerWrapper 位于一个单独的 DLL 中，它调用第二个 DLL，最终尝试实例化 COM 对象。

任何提示或文章将不胜感激。我想按原样解决这个问题：我的 B 计划是将库包装在控制台应用程序中，从 UI 生成控制台应用程序，并通过命名管道从中获取状态消息。这会起作用，但它看起来很难看。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-13T14:15:12.210

这是错误的，因为您正在从另一个线程调用 COM 接口方法。COM 确保以线程安全的方式调用声明自己不是线程安全的 COM 类。注册表中的 ThreadModel 键指定了这一点，一个很常见的值是“Apartment”（或缺失），表示该类不是线程安全的。

因此，如果您从另一个线程调用接口方法，那么 COM 会介入并将调用编组到创建对象的线程，从而确保线程安全。一个非常不错的功能，完全从 .NET 类中丢失。但是，COM 在编组接口方法参数时需要帮助。必需，因为调用是在另一个线程上进行的，并且需要复制方法调用参数值。反射不是 COM 功能。它做的第一件事是查看注册表，`HKCR\Interface\{guid}`ProxyStubClsid 键的键，一个知道如何序列化参数的帮助类的 guid。

很明显，您的机器上缺少该密钥。接下来它会向 COM 对象询问 IMarshal 接口。显然您的 COM 服务器没有实现它。这会产生 E_NOINTERFACE 错误。产生好的错误信息从来不是 COM 的强项。

嗯，写在墙上。您使用的 COM 类*不是*线程安全的，并且缺少使其成为线程安全所需的所有管道。提供代理/存根通常很容易，但组件的作者没有打扰，并非完全不常见。并不是说如果他这样做会有所帮助，该管道确保该方法在 UI 线程上运行，这肯定是您首先要避免的。

您可以做的唯一合理的事情是创建自己的线程，调用其 SetApartmentState() 方法以切换到 STA 并在该线程上创建对象，以便以线程安全的方式使用该类。没有并发，但至少它与您的其余代码是并发的。该线程通常还必须泵送一个消息循环 Application.Run()，您可能会逃脱不泵送。当你看到死锁或事件没有被触发时，你就会知道你需要抽水。[您可以在这篇文章](https://stackoverflow.com/a/21684059/17034)中找到示例代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T13:37:40.480

作为实际 COM 接口类型的包装器的 .NET 接口类型 IMyInterface 加载正常 - 您的问题不在于它在其他线程中以某种方式“不可见”。如您所见，您尝试转换的对象的实际类型是 System.__ComObject，它无论如何都没有实现该接口。在进行类型转换和类型检查（is/as 运算符）时，它不会像任何其他 .NET 对象一样被处理。[发生的情况是 .NET 运行时通过调用QueryInterface](http://msdn.microsoft.com/en-us/library/ms682521%28VS.85%29.aspx)向 COM 对象询问您尝试转换的接口。调用失败是因为 COM 对象没有正确编组（或其他原因：最终结果是失败）。它表现为 InvalidCastException，因为它是 .

# php - 如何限制对 PHP 文件的访问？

> ID：11467098
> 
> 赞同：3
> 
> 时间：2012-07-13T08:48:34.207
> 
> 标签：php, http

我想限制对我服务器上的 PHP 文件的访问。此 PHP 文件从 HTTP GET 请求中获取数据并将其附加到文件中。简单的。但是我不希望执行这个 PHP 文件，除非 HTTP 请求是从我开发的智能手机应用程序中生成的。

我不想单独验证每个用户。我希望我的应用程序，并且只有我的应用程序能够将请求发送到 PHP 文件。我不希望人们在浏览器中输入类似格式的请求 (http://www.mydomain.com/check.php?string=blahblahblah) 并产生相同的影响。

我曾考虑过检查 HTTP_USER_AGENT 或其他一些变量，但我担心它们也可能很容易被欺骗。我可以将一个密钥嵌入到我要查找的应用程序中，但该密钥也可能被泄露。

下一步是让服务器向我发送一个挑战，我会对此做出适当的回应。或者我什至可以研究 PKI。但是，考虑到我并不想保护任何真正有价值的东西，只是为了防止轻微的破坏行为，这是一种相对简单的方法。

我想在这里重新发明轮子吗？是否已经有一种简单、行之有效的方法来做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-13T09:49:54.710

FWIW，这是我能想到的在不严重影响性能的情况下最安全的方法——本质上是 RESTful(ish) 方式，因为进一步提升它需要多个请求和存储在服务器上的连接状态信息：

*   应用程序和服务器具有相同的硬编码盐字符串，对于移动应用程序的每个后续版本都是唯一的。此字符串*必须*保密。
*   当用户在他们的设备上安装应用程序时，应用程序会联系您的服务器并通知它应用程序的版本和设备的[IMEI](http://en.wikipedia.org/wiki/International_Mobile_Equipment_Identity)，您正在使用的任何移动平台的 API 都应该能够让您检索。
*   服务器为该应用程序实例生成一个唯一密钥，该密钥被发送回应用程序并存储在设备上，并将其与 IMEI 和安装的版本一起存储在服务器端数据库中。
*   在日常操作期间（即提出问题中概述的请求时），应用程序遵循以下程序：

    *   检索以下信息：
        1.  设备 IMEI
        2.  应用密钥
        3.  应用版本
        4.  硬编码盐字符串
        5.  随机生成的附加盐字符串（当前时间戳的微秒导数对于合理数量的熵总是有益的）。
    *   将所有这些信息连接在一起，最好在它们之间使用硬编码填充并生成结果字符串的哈希。
    *   将以下信息与实际请求数据一起发送到服务器（可能在 cookie 中以*增加*一点安全性）：
        1.  生成的哈希
        2.  应用密钥
        3.  随机生成的字符串用作附加盐
*   服务器现在使用 App 密钥从数据库中检索该实例的设备 IMEI 和应用程序版本，并使用该信息以及版本 ID 的硬编码盐字符串和设备发送的附加盐字符串来构造哈希。如果服务器上生成的散列与移动设备生成的散列相匹配，则请求是好的，如果不是拒绝它。
*   *此过程中的所有*通信都是通过 HTTPS 进行的。

为了突破这个系统并成功欺骗请求，攻击者需要知道以下内容：

1.  设备 IMEI
2.  应用密钥
3.  应用版本
4.  硬编码盐
5.  用于生成散列的机制（输入字符串的精确格式和散列算法）。

显然，如果您使用的是移动设备，那么 1-3 很容易提取，但如果不对应用程序进行逆向工程，则无法找到 4 和 5（对于有知识和耐心的人来说，实际上没有什么可以阻止的）做）。

中间人攻击基本上是不可能的 - 即使在突破 SSL（至少可以说这很重要）并将应用程序逆向工程以获得 4 和 5 之后，如果没有 1-3 就无法检索对哈希的蛮力攻击，这非常复杂，平均需要数亿年（请参阅[此页面](http://unwrongest.com/projects/password-strength/)以了解我如何得出该数字），特别是如果三者之一的长度可变 - 这应用程序版本字符串很容易。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-13T08:53:42.490

在您的应用程序和 php 文件中定义一个盐，然后将该盐与当前时间相结合。这不太可能被欺骗。

```
$hash = sha1(time() . 'bladieblasalt');

if($_GET['hash'] == sha1(time() . 'samehash'))
{
    echo 'valid';
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-13T09:17:52.607

首先，您需要在您的应用程序中实现 ssl，否则一些知识很少的人可以简单地在 wifi 上连接手机，并使用 wireshark 或 cain 和 abel 等嗅探应用程序和您的网站之间的流量。并获取 url 和传递的任何参数，无需反汇编任何东西。

应用程序连接到您的站点并且用户登录，无论它是访客还是成员，您的服务器都会为应用程序分配一个请求 ID，并且此密钥/令牌与每个请求一起传递并在您的服务器上的会话中进行验证。

令牌看起来像： `UNIQUE_REQUEST_ID_ASSIGNED_BY_SERVER:APPsIP:APPsTIME`加密此字符串并将其作为`$_GET['token']`

然后在您的服务器上将字符串和字符串解密`explode()`为它的部分，并检查请求 id、ip 和时间匹配的数据库或会话等，如果一切都好的话。

就像一个安全的登录系统为每个用户分配一个唯一的盐，并将其存储在用户请求 ID 旁边。

底线是，让施虐者难以滥用系统。99% 的人甚至不会想去摆弄，而另外 1% 的人到达那里 ips 被阻止。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-13T22:52:50.000

如果您不想要每个用户的任何东西，而只想要每个应用程序，那么您将不得不依赖应用程序中内置的秘密。任何反汇编应用程序的人最终都会发现这一点，所以一些混淆可能会有所帮助，但它不会让坚定的人离开你的页面。

也就是说，使用任何公钥加密都没有什么意义。由于应用程序端是欺骗者可能感兴趣的，他们已经可以访问密钥对中更有价值的一半。因此，您不妨使用一些使用共享密钥的方法。

您真正要检查的是传输数据的真实性。因此，只需获取该数据的核心（即所有真正重要的字段），将它们与共享秘密连接，散列结果并将其作为消息摘要传输。服务器执行相同的计算并检查计算的摘要是否与传输的摘要匹配。如果是这样，则该消息的发送者必须知道共享秘密。

重放攻击仍然存在一些机会，即有人记录了有效消息并稍后重复。您可以在服务器端检测完全重复的内容，并通过在消息的签名部分中包含时间戳来防止延迟重播。如果您的服务器允许客户端和服务器时间戳之间存在巨大差异，那么它将必须在相同的时间内保留重复的信息。如果它只接受小的差异，它可以使用较小的重复缓存，但设备配置错误的用户可能会感到恼火，因为服务器更有可能拒绝他们的请求太旧。

还有一点需要注意的是：您写了一个`GET`导致写入某个文件的请求。我总是将一些改变状态的操作与 a 联系起来`POST`。如果该应用程序是您自己的，则无关紧要，但是众所周知，浏览器会在`GET`不询问用户的情况下重新传输请求，从而导致对某些操作的重复请求。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-13T09:03:02.210

没有保证方法。您可以使用 oauth 身份验证...根据您使用的平台以及将应用程序部署到手机的方式，也许您可​​以将密钥编译到应用程序本身中？任何东西都可以并且总是会被破解，没有 100% 的安全性......但尝试并不羞耻。:)

就我个人而言，我用于我的移动应用程序的是 RESTful 身份验证和常规登录/传递对基于令牌的通信，直到它过期。:)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-13T08:51:38.557

HTTP 请求可以按照发送者想要的任何方式逐个字符地构建。欺骗总是可能的。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-13T09:02:15.703

只需将授权（登录名、密码、会话等和/或“API 密钥”）添加到您的 PHP 应用程序，然后让您的手机应用程序先授权，然后再发送所需的请求。您可能没有考虑到这一点，因为如果您的脚本很简单，可能会给它添加一些混乱，但是几乎每个 Web 系统都需要它，并且您最终也会面临这个问题。

让您的手机应用程序通过 HTTPS 登录您的 PHP 应用程序以排除拦截。

# joomla - 不需要在 Joomla 2.5 上保存的自定义字段表单类型

> ID：11467100
> 
> 赞同：0
> 
> 时间：2012-07-13T08:48:39.387
> 
> 标签：joomla, joomla2.5

我正在为 Joomla 2.5 上的菜单项创建自定义字段表单。问题是在保存时返回错误“必填字段：模板”，即使其中有值。

这是该字段的代码：

```
jimport('joomla.html.html');
jimport('joomla.form.formfield');

class JFormFieldTemplate extends JFormField {

protected $type = 'template';

protected function getInput() {
    $html = '<select>  <option value="1">Template 1</option> </select>';
    return $html;
} 
```

这就是我所说的：

```
<?xml version="1.0" encoding="utf-8"?>
<metadata>
    <layout title="Display Template">
        <message>
            <![CDATA[Select Template to Display]]>
        </message>
    </layout>

    <fieldset addfieldpath="/administrator/components/com_mycomponent/models/fields">
         <fields name="request">
        <fieldset name="request">
                     <field name="id" type="template" label="Template"
                           description="Select template to display"
                           required="true" />
        </fieldset>
     </fields>
    </fieldset>

</metadata> 
```

为了澄清是的，“com_mycomponent”是组件名称。

不幸的是，Joomla 文档并不是最好的……我在这里错过了什么？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T09:34:36.040

您忘记了该字段的名称 `<select name="'.$this->name.'">`

# javascript - 如何使用下划线创建自己的可继承类

> ID：11467108
> 
> 赞同：1
> 
> 时间：2012-07-13T08:49:23.910
> 
> 标签：javascript, backbone.js, underscore.js

我想构建一个像对象/类这样的 Backbone.Model。

我查看了 Backbone 文档，发现他们创建了一个具有可继承属性的可继承对象/类，方法分两步：

一、创建一个带有一些属性的函数

```
var Model = Backbone.Model = function(attributes, options) {
    var defaults;
    attributes || (attributes = {}); //?
    if (options && options.parse) attributes = this.parse(attributes); //?
    if (defaults = getValue(this, 'defaults')) {
      attributes = _.extend({}, defaults, attributes); // ?
    }
    if (options && options.collection) this.collection = options.collection;
    this.attributes = {};
    this._escapedAttributes = {};
    this.cid = _.uniqueId('c');
    this.changed = {};
    this._silent = {};
    this._pending = {};
    this.set(attributes, {silent: true});

    this.changed = {};
    this._silent = {};
    this._pending = {};
    this._previousAttributes = _.clone(this.attributes);
    this.initialize.apply(this, arguments);
}; 
```

二、使用下划线的扩展来赋予它一些功能

```
_.extend(Model.prototype, Events, { // Events?
   changed: null,

   _silent: null,

   _pending: null,

   idAttribute: 'id',

   initialize: function(){},

   toJSON: function(options) {
       return _.clone(this.attributes);
   }

   // other Model methods...
}; 
```

我对这种行为有一些疑问：

1.  第一部分的第 3-4 行是做什么的
2.  第 6 行会发生什么？
3.  为什么我们要放弃“_.extend”Events 对象，我还能提供什么作为参数？

还有什么我需要注意的吗？

问候

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T09:01:24.307

第 3 行`attributes || (attributes = {});`是[短路评估](https://developer.mozilla.org/en/JavaScript/Reference/Operators/Logical_Operators#Short-Circuit_Evaluation)的示例。如果属性的值是假的，那么 javascript 将评估 OR 表达式的第二部分。该部分分配一个空对象`attributes`的值。`{}`最终结果是，如果属性为空或未定义（典型情况），则为属性分配一个空对象。

那行相当于说：

```
if (attributes == false) { // attributes can be any value that evaluates to false
                           // attributes could be null, undefined, false, 0 etc
   attributes = {};
} 
```

与第 4 行相同的情况，`if (options && options.parse) attributes = this.parse(attributes);`

如果一个`options`对象存在，即它不为空或未定义，并且该`options`对象有一个名为 的有效属性`parse`，则为属性分配`this.parse(attributes)`;

**编辑1：**

[Underscore.js 文档](http://underscorejs.org/#extend)`_.extend`可以解释这些行。

它是创建一个新对象的标准模式，该对象将包含所有传入对象的属性。在第一个示例`attributes = _.extend({}, defaults, attributes); // ?`中，该模式用于用可能已传递的内容覆盖默认值。您会在大多数允许您传入选项对象的插件中看到这种模式。如果您不传递任何内容，则将使用默认值。如果您只传入几个属性，其余的将从默认值中获取它们的值。

[http://api.jquery.com/jQuery.extend/](http://api.jquery.com/jQuery.extend/)不是完全相同的东西。但它非常相似。他们的文档要好得多。你会更好地理解这个概念。

**编辑2：**

[Backbone Events](http://backbonejs.org/#Events)类有一些与事件处理相关的方法。Backbone Model 类还需要能够使用事件处理。它需要引发事件来告诉视图重新渲染自己，当视图更改底层数据时，它需要监听来自 dom 的事件。此事件处理功能可以在定义 Model 类时从头开始重写，或者可以扩展 Model 类以从 Events 类中获取这些方法。后者就是正在发生的事情。

如果您阅读 $.extend 或 _.extend 的文档，您会意识到 Model 类不仅使用 Events 下的属性进行扩展，而且还使用其他属性（如 toJSON 和 initialize 等）进行扩展...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T09:09:27.490

至于第 6 行发生了什么 - 创建的对象包含对象的所有属性以及`defaults`对象的所有属性`attributes`。`defaults`已在对象中定义的对象的任何属性都`attributes`将被后者的值覆盖。

# oop - 在没有语言支持类型层次结构的情况下对相关事物的层次结构进行建模

> ID：11467112
> 
> 赞同：5
> 
> 时间：2012-07-13T08:49:41.377
> 
> 标签：oop, inheritance, go, go-interface

我是 Go 新手，我想做的第一件事就是将我的小标记页面生成库移植到 Go。主要的实现是在 Ruby 中，它的设计非常“经典的面向对象”（至少我从业余程序员的角度理解 OO）。它模拟了我如何看待标记文档类型之间的关系：

```
 Page
                                   /        \
                          HTML Page          Wiki Page
                         /         \
              HTML 5 Page           XHTML Page 
```

对于一个小项目，我可能会做这样的事情（翻译成我现在想要的 Go）：

```
p := dsts.NewHtml5Page()
p.Title = "A Great Title"
p.AddStyle("default.css")
p.AddScript("site_wide.js")
p.Add("<p>A paragraph</p>")
fmt.Println(p) // Output a valid HTML 5 page corresponding to the above 
```

对于较大的项目，例如一个名为“Egg Sample”的网站，我将现有页面类型之一子类化，创建更深层次的层次结构：

```
 HTML 5 Page
                                      |
                               Egg Sample Page
                             /        |        \
               ES Store Page    ES Blog Page     ES Forum Page 
```

这非常适合经典的面向对象设计：子类可以免费获得很多，它们只关注与父类不同的少数部分。例如，EggSamplePage 可以添加一些在所有 Egg Sample 页面中通用的菜单和页脚。

然而，Go 没有[类型层次结构的](http://golang.org/doc/go_faq.html#Is_Go_an_object-oriented_language)概念：没有类，也[没有类型继承](http://golang.org/doc/go_faq.html#inheritance)。也[没有动态的方法调度](http://golang.org/doc/go_faq.html#How_do_I_get_dynamic_dispatch_of_methods)（在我看来，从上面可以看出；Go 类型`HtmlPage`不是“一种”Go 类型`Page`）。

Go 确实提供：

*   嵌入
*   接口

似乎这两个工具应该足以得到我想要的东西，但是在几次错误的开始之后，我感到很难过和沮丧。我的猜测是我想错了，我希望有人可以为我指出正确的方向，以了解如何做到这一点。

这是我遇到的一个具体的、真实的问题，因此，欢迎任何关于在不解决更广泛问题的情况下解决我的特定问题的建议。但我希望答案的形式是“通过以某种方式组合结构、嵌入和接口，您可以轻松获得所需的行为”，而不是回避它。我认为许多从经典 OO 语言过渡到 Go 的新手可能会经历类似的困惑时期。

通常我会在这里展示我损坏的代码，但我有几个版本，每个版本都有自己的问题，我不认为包括它们实际上会增加我的问题的清晰度，这个问题已经很长了。如果结果看起来有用，我当然会添加代码。

我做过的事情：

*   阅读大部分[Go 常见问题解答](http://golang.org/doc/go_faq.html)（尤其是看起来相关的部分）
*   阅读大量[有效围棋](http://golang.org/doc/effective_go.html)（尤其是似乎相关的部分）
*   使用多种搜索词组合在 Google 上搜索
*   阅读有关[golang-nuts 的各种帖子](https://groups.google.com/group/golang-nuts)
*   编写了很多不足的 Go 代码
*   查看[Go 标准库源代码](http://golang.org/src/pkg/)中的任何看起来相似的示例

要更明确地说明我在寻找什么：

*   我想学习惯用的 Go 方式来处理这样的层次结构。我更有效的尝试之一似乎最不像 Go：

    ```
    type page struct {
        Title     string
        content   bytes.Buffer
        openPage  func() string
        closePage func() string
        openBody  func() string
        closeBody func() string
    } 
    ```

    这让我很接近，但不是一直。我现在的观点是，学习 Go 程序员在这种情况下使用的习语似乎是一个失败的机会。

*   我想尽可能地干（“不要重复自己”）；`text/template`当每个模板的大部分内容与其他模板相同时，我不希望每种类型的页面都有单独的页面。我废弃的一个实现就是这样工作的，但是一旦我得到一个更复杂的页面类型层次结构，它似乎就会变得难以管理，如上所述。

*   我希望能够拥有一个核心库包，它可以按原样用于它支持的类型（例如`html5Page`和`xhtmlPage`），并且可以如上所述进行扩展，而无需直接复制和编辑库。（例如，在经典的 OO 中，我扩展/子类化 Html5Page 并进行一些调整。）我目前的尝试似乎不太适合这一点。

我希望正确的答案不需要太多代码来解释 Go 的思考方式。

**更新：**根据到目前为止的评论和答案，看来我离得不远了。我的问题一定比我想象的少一些面向设计的问题，而且更多的是关于我是如何做事的。所以这就是我正在使用的：

```
type page struct {
    Title    string

    content  bytes.Buffer
}

type HtmlPage struct {
    page

    Encoding   string
    HeaderMisc string

    styles   []string
    scripts  []string
}

type Html5Page struct {
    HtmlPage
}

type XhtmlPage struct {
    HtmlPage

    Doctype string
}

type pageStringer interface {
    openPage()   string
    openBody()   string
    contentStr() string
    closeBody()  string
    closePage()  string
}

type htmlStringer interface {
    pageStringer

    openHead()   string
    titleStr()   string
    stylesStr()  string
    scriptsStr() string
    contentTypeStr() string
}

func PageString(p pageStringer) string {
    return headerString(p) + p.contentStr() + footerString(p)
}

func headerString(p pageStringer) string {
    return p.openPage() + p.openBody()
}

func HtmlPageString(p htmlStringer) string {
    return htmlHeaderString(p) + p.contentStr() + footerString(p)
}

func htmlHeaderString(p htmlStringer) string {
    return p.openPage() +
        p.openHead() + p.titleStr() + p.stylesStr() + p.scriptsStr() + p.con    tentTypeStr() +
        p.openBody()
} 
```

这可行，但它有几个问题：

1.  感觉真的很尴尬
2.  我在重复自己
3.  这可能是不可能的，但理想情况下，我希望所有 Page 类型都有一个`String()`做正确事情的方法，而不是必须使用一个函数。

我强烈怀疑我做错了什么，并且有一些 Go 习语可以让这变得更好。

我想要*一种*做正确事情的`String()`方法，但是

```
func (p *page) String( string {
    return p.headerString() + p.contentStr() + p.footerString()
} 
```

`page`即使通过使用，也将始终使用这些方法`HtmlPage`，因为除了接口之外在任何地方都缺乏动态调度。

使用我当前的基于界面的页面生成，我不仅不能只做`fmt.Println(p)`（`p`某种页面在哪里），而且我必须专门在 和 之间进行`fmt.Println(dsts.PageString(p))`选择`fmt.Println(dsts.HtmlPageString(p))`。这感觉很不对劲。

而且我在`PageString()`/`HtmlPageString()`之间和`headerString()`/之间笨拙地复制代码`htmlHeaderString()`。

所以我觉得我仍然在遭受设计问题，因为在某种程度上仍然在思考 Ruby 或 Java 而不是 Go。我希望有一种直接且惯用的 Go 方法来构建一个库，该库具有我所描述的客户端界面。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-13T14:21:23.097

继承结合了两个概念。多态性和代码共享。Go 将这些概念分开。

*   Go 中的多态（'is a'）是通过使用接口来实现的。
*   Go 中的代码共享是通过嵌入和作用于接口的函数来实现的

许多来自 OOP 语言的人忘记了函数，只使用方法就迷失了方向。

因为 Go 将这些概念分开，所以您必须单独考虑它们。“页面”和“鸡蛋样本页面”之间有什么关系。是“是”关系还是代码共享关系？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-13T09:47:41.567

首先，警告：深度层次结构很难适应所有语言。深层层次结构建模通常是一个陷阱：起初它在智力上令人满意，但最终却是一场噩梦。

然后，Go 有嵌入，它实际上是一种组合，但提供了（可能是多重）继承通常需要的大部分内容。

例如，让我们看一下：

```
type ConnexionMysql struct {
    *sql.DB
}

type BaseMysql struct {
    user     string
    password string
    database string
}

func (store *BaseMysql) DB() (ConnexionMysql, error) {
    db, err := sql.Open("mymysql", store.database+"/"+store.user+"/"+store.password)
    return ConnexionMysql{db}, err
}

func (con ConnexionMysql) EtatBraldun(idBraldun uint) (*EtatBraldun, error) {
    row := con.QueryRow("select pv, pvmax, pa, tour, dla, faim from compte where id=?", idBraldun)
    // stuff
    return nil, err
}

// somewhere else:
con, err := ms.bd.DB()
defer con.Close()
// ...
somethings, err = con.EtatBraldun(id) 
```

如您所见，只需嵌入我就可以：

*   轻松生成“子类”的实例`ConnexionMysql`
*   定义和使用我自己的函数，比如`EtatBraldun`
*   仍然使用定义的函数，`*sql.DB`比如`Close``QueryRow`
*   如果需要（此处不存在）将字段添加到我的子类并使用它们

而且我可以嵌入不止一种类型。或“子类型”我的`ConnexionMysql`类型。

在我看来，这是一个很好的折衷方案，它有助于避免深度继承层次结构的陷阱和僵化。

我说这是一种妥协，因为很明显 Go 不是 OOP 语言。如您所见，缺少函数覆盖阻止了通常的解决方案，即在“超类”中使用方法来组成“子类”方法的调用。

我知道这可能会令人不安，但我不确定我是否真的错过了通常基于层次结构的解决方案的重要性和冗长性。正如我所说，起初很好，但当它变得复杂时会很痛苦。这就是为什么我建议你尝试 Go 方式：

Go 接口可用于减少对继承的需求。实际上，您的页面可能是一个接口（或者更惯用的几个接口）和一个 struct ：

```
type pageOpenerCloser interface {
    openPage  func() string
    closePage func() string
    openPage  func() string
    closePage func() string
}

type page struct {
    Title     string
    content   bytes.Buffer
} 
```

由于您不能依赖在`String()`实现上定义的方法`pageOpenerCloser`来简单地调用`closeBody`在同一实现上定义的方法，因此您必须使用函数而不是方法来完成部分工作，我认为这是组合：您必须传递您的实例的`pageOpenerCloser`组合函数将调用正确的实现。

这表示

*   鼓励您拥有原子和正交接口定义
*   接口由它们的（简单）动作定义
*   接口函数不应该在同一个实例上调用其他函数
*   不鼓励您拥有由实现/算法定义的中间级别的深层层次结构
*   大的“组合”算法不应该被覆盖或通常写不止一次

我觉得这减少了混乱并有助于使 Go 程序小而易于理解。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-13T12:09:32.283

我认为不可能令人满意地回答您的问题。但是，让我们从一个不同背景的简短类比开始，以避免任何普遍接受的关于编程的想法（例如，许多程序员认为 OOP 是编程的“正确方法”，因为这是他们多年来一直在做的事情）。

假设您正在玩一款名为 Bridge Builder 的经典游戏。这个游戏的目标是在柱子上建造一座桥，这样火车就可以从一侧通行到另一侧。有一天，在掌握了这款游戏多年后，您决定尝试一些新的东西。假设传送门 2 :)

您可以轻松管理第一级，但您无法弄清楚如何在第二级到达另一侧的平台。所以你问朋友：“嘿，如何在传送门 2 中放置柱子”？您的朋友可能看起来很困惑，但他可能会告诉您，您可以拿起这些盒子并将它们叠放在一起。因此，您立即开始收集所有可以找到的盒子，以建立通往房间另一侧的桥梁。做得好！

无论如何，几个小时后，你会发现 Portal 2 真的很令人沮丧（收集积木需要很长时间，而且关卡真的很困难）。所以你别玩了。

那么，这里出了什么问题？首先，您假设一种游戏中的一种技术可能在另一种游戏中效果很好。其次，你没有问对问题。而不是告诉你的朋友你的问题（“我怎样才能到达那里的那个平台？”）你问他如何存档你在其他游戏中习惯的那些东西。如果您问了其他问题，您的朋友可能会告诉您，您可以使用传送枪创建一个红色和蓝色的传送门并穿过。

尝试将编写良好的 Ruby/Java/etc. 程序移植到 Go 中确实令人沮丧。一件事在一种语言中效果很好，在另一种语言中可能效果不佳。你甚至没有问我们，你要解决什么问题。您刚刚发布了一些显示一些类层次结构的无用样板代码。在 Go 中你不需要它，因为 Go 的接口更灵活。（可以在 Javascript 的原型设计和尝试用 Javascript 以 OOP 方式编程的人之间进行类似的类比）。

一开始，很难在 Go 中想出好的设计，尤其是如果你习惯了 OOP。但 Go 中的解决方案通常更小、更灵活且更易于理解。仔细查看 Go 标准库和其他外部包中的所有这些包。例如，我认为 leveldb-go 比 leveldb 更容易理解，更直接，即使你对这两种语言都很熟悉。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-13T15:28:51.997

也许尝试像这样解决您的问题：

*   创建一个接受最小接口来描述页面并输出 html 的函数。
*   通过考虑“具有”关系对所有页面进行建模。例如，您可能有一个 Title 结构，它嵌入在某个页面中，上面有一个 GetTitle() 方法，您可以键入 assert 并检查它（并非所有内容都有标题，因此您不希望它成为“需要”函数接受的接口中的功能。）与其考虑页面的层次结构，不如考虑页面是如何组合在一起的。

我通常觉得有帮助的一件事是将接口视为捕获功能，将结构视为捕获数据。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-14T11:38:01.470

我似乎想出了一个可行的解决方案，至少对于我目前的任务是这样。在阅读了这里的所有建议并与朋友交谈后（他不了解 Go，但有其他经验试图在没有语言支持类型继承的情况下对明显的层次关系建模），他说“我问自己'还有什么？是的，这是一个层次结构，但它还有什么，我该如何建模？'”，我坐下来重写了我的要求：

我想要一个带有客户端界面的库，其流程如下：

1.  实例化一个页面创建对象，可能指定它将生成的格式。例如：

    ```
    p := NewHtml5Page() 
    ```

2.  可以选择设置属性并添加内容。例如：

    ```
    p.Title = "FAQ"
    p.AddScript("default.css")
    p.Add("<h1>FAQ</h1>\n") 
    ```

3.  生成页面。例如：

    ```
    p.String() 
    ```

4.  棘手的部分是：使其可扩展，这样一个名为 Egg Sample 的网站就可以轻松地利用该库在现有格式的基础上制作新格式，这些格式本身可以构成进一步子格式的基础。例如：

    ```
    p  := NewEggSamplePage()
    p2 := NewEggSampleForumPage() 
    ```

考虑到如何在 Go 中对其进行建模，我决定客户端真的不需要类型层次结构：他们永远不需要将 an`EggSampleForumPage`视为 an`EggSamplePage`或 an `EggSamplePage`as an `Html5Page`。相反，它似乎归结为希望我的“子类”每个在页面中都有某些点，他们在其中添加内容或偶尔具有与其“超类”不同的内容。所以这不是行为问题，而是数据问题。

那是我点击的时候：Go没有动态调度方法，但是如果“子类型”（嵌入“超类型”的类型）更改了*数据字段*，“超类型”上的方法确实会看到这种变化。（这是我在问题中显示的非常不像 Go 的尝试中所使用的，使用函数指针而不是方法。）这是我最终得到的摘录，展示了新设计：

```
type Page struct {
    preContent  string
    content     bytes.Buffer
    postContent string
}

type HtmlPage struct {
    Page

    Title      string
    Encoding   string
    HeadExtras string

    // Exported, but meant as "protected" fields, to be optionally modified by
    //  "subclasses" outside of this package
    DocTop     string
    HeadTop    string
    HeadBottom string
    BodyTop    string
    BodyAttrs  string
    BodyBottom string
    DocBottom  string

    styles  []string
    scripts []string
}

type Html5Page struct {
    *HtmlPage
}

type XhtmlPage struct {
    *HtmlPage

    Doctype string
}

func (p *Page) String() string {
    return p.preContent + p.content.String() + p.postContent
}

func (p *HtmlPage) String() string {
    p.preContent = p.DocTop + p.HeadTop +
        p.titleStr() + p.stylesStr() + p.scriptsStr() + p.contentTypeStr() +
        p.HeadExtras + p.HeadBottom + p.BodyTop
    p.postContent = p.BodyBottom + p.DocBottom

    return p.Page.String()
}

func NewHtmlPage() *HtmlPage {
    p := new(HtmlPage)

    p.DocTop     = "<html>\n"
    p.HeadTop    = "  <head>\n"
    p.HeadBottom = "  </head>\n"
    p.BodyTop    = "<body>\n"
    p.BodyBottom = "</body>\n"
    p.DocBottom  = "</html>\n"

    p.Encoding = "utf-8"

    return p
}

func NewHtml5Page() *Html5Page {
    p := new(Html5Page)

    p.HtmlPage = NewHtmlPage()

    p.DocTop = "<!DOCTYPE html>\n<html>\n"

    return p
} 
```

虽然它可能需要一些清理，但一旦我有了这个想法，它就非常容易编写，它运行良好（据我所知），它不会让我畏缩或觉得我在与语言结构作斗争，我什至可以按照`fmt.Stringer`我的意愿实施。我已经成功地生成了具有所需界面的 HTML5 和 XHTML 页面，以及`Html5Page`从客户端代码“子类化”并使用了新类型。

我认为这是一个成功，即使它没有为 Go 中的层次结构建模问题提供明确和普遍的答案。

# xml - XSD 中的 IDREF 和 IDREFS 有什么区别？

> ID：11467114
> 
> 赞同：9
> 
> 时间：2012-07-13T08:49:47.857
> 
> 标签：xml, xsd

XSD 中的 IDREF 和 IDREFS 有什么区别？
我知道它们都引用了 ID 属性，但有什么区别？什么时候使用它们？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-13T08:52:35.873

IDREF 类型的属性是对具有 ID 类型属性的某个其他元素的引用。

IDREFS 类型的属性是对具有 ID 属性的元素的引用列表，以空格分隔。

一个例子：

你正在创建一个家谱。每个人有两个父母，一个母亲和一个父亲。这将由 IDREFS 表示，如下所示：

```
<person person_id="e10001" parent_id="e10002 e10003"> 
```

和

```
 <!ATTLIST person
person_id ID #REQUIRED
parent_id IDREFS #IMPLIED> 
```

# javascript - “Function.createDelegate”导致“错误：对象不支持属性或方法‘createDelegate’”

> ID：11467119
> 
> 赞同：0
> 
> 时间：2012-07-13T08:50:07.093
> 
> 标签：javascript, asp.net

我正在尝试按照[本](http://jakkaj.wordpress.com/2008/09/08/control-silverlight-by-using-browser-back-and-foward-buttons/)教程在 Silverlight 中获得浏览器后退按钮支持。我正在使用 Silverlight 4、Asp 和 .net4.0。

我不太习惯 javascript，与 C# 相比，我从来没有真正喜欢过使用它。

我收到的错误消息是：“错误：对象不支持属性或方法‘createDelegate’”

在这条线上

```
//Create a delegate to preserve scope when the navigation event handler fires.
var handler = Function.createDelegate(historyInstance, historyInstance.navigationEventHandler); 
```

我的第一个猜测是缺少一些参考，但是在搜索时我什么也没找到！

此错误消息的原因是什么？请查看教程以获取完整的源代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T05:45:48.847

标准`Function`类没有方法`createDelegate`。它要么由浏览器支持，要么由外部库定义。

考虑 Ext 的[bind](http://docs.sencha.com/extjs/4.0.7/#!/api/Ext.Function-method-bind)或 jQuery 的[proxy](http://api.jquery.com/jQuery.proxy/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T05:53:49.567

在本机你可以做到这一点`func.apply`：

```
var handler = historyInstance.navigationEventHandler.apply(historyInstance); 
```

查看[MDN](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/apply)了解更多详细信息。

# facebook - FB.Event.subscribe -> 'comment.create' 并非每次都触发

> ID：11467120
> 
> 赞同：3
> 
> 时间：2012-07-13T08:50:12.617
> 
> 标签：facebook, comments, oncreate

我有代码：

```
window.fbAsyncInit = function(){
FB.init({appId: myapid, status: true, cookie: true, xfbml: true});
FB.Event.subscribe('comment.create', function(response) {
  alert('Thanks for Your comment!');
});
FB.Event.subscribe('comment.remove', function(response) {
  alert('You deleted comment!');
 });
}; 
```

为什么每次用户（我测试过）添加或删除评论时它都不会触发？

我测试过：

```
window.fbAsyncInit = function(){
 alert('123');
} 
```

它工作完美。

那么 FB.event 处理程序中的问题是什么？如何让它每次都正常工作？

打开 my_site.com 或 www.my_site.com 有区别吗？或不？我的 my_site.com 只有一个 Appid。

如何处理页面上的每个 FB.event，以便我可以看到所有这些并选择“comment.create”？

谢谢你！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T04:17:55.750

我确定这段代码有问题

FB.Event.subscribe

这样您就无法将评论事件订阅到 FB。为什么不仔细检查以确保代码有效，例如：

```
if (FB && FB.Event && FB.Event.subscribe) { 
/* subscribe code */ 
} 
```

或者

```
console.log(FB); 
```

# ruby-on-rails - Rails 3 ActiveRecord 嵌套事务与多个数据库

> ID：11467121
> 
> 赞同：1
> 
> 时间：2012-07-13T08:50:14.207
> 
> 标签：ruby-on-rails, ruby-on-rails-3, transactions

根据 Rails 文档，涉及多个数据库的嵌套事务应该可以工作：

```
User.transaction do
  User.create(:username => 'Kotori')
  User.transaction(:requires_new => true) do
    User.create(:username => 'Nemu')
    raise ActiveRecord::Rollback
  end
end 
```

您将如何在嵌套事务中传播回滚，以便父事务也回滚？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T18:16:45.187

首先，您的代码不使用多个数据库。两者都使用来自客户端模型的连接。

其次，您没有指定 DBMS。不同的 DB 驱动程序具有不同的属性，并且并非所有驱动程序都实现嵌套事务。您使用的是哪个数据库？

我只是做了你想做的事，我正在使用两个 postgres 数据库。只是抛出 ActiveRecord::Rollback 将退出封闭事务，但不会抛出进一步的异常。我想确保嵌套事务是否失败，然后回滚外部事务。所以，我在内部事务中捕获任何异常，然后从那里引发一个回滚。

注意：Account 和 User 模型使用不同的数据库，尽管它们都运行在同一个 Postgres 实例中。此外，如果您省略了 begin rescue 子句，那么是的，您的代码将回滚两个数据库，但是在外部事务结束后，您将得到一个异常展开您的堆栈。最后，我认为如果提交外部事务有问题，那么内部事务不会回滚。就我而言，这不是问题。您可能希望将 DB1 代码包装在一个嵌套事务中，并在启动 DB2 事务之前提交它。

```
Account.transaction do
  begin
    acc = Account.do_something_to_accounts
    User.transaction do
      User.do_something_to_users
    end
  rescue => e
    raise ActiveRecord::Rollback
  end
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-02-04T20:31:32.590

乔纳森说的是正确的，但他的代码示例并不完全正确。

为了取消跨两个数据库的事务，您需要检测嵌套事务何时将在没有外部事务的情况下回滚。标准异常将未被捕获并导致两个事务回滚。然而，该`ActiveRecord#transaction`块将默默地从 a 中拯救和回滚`ActiveRecord::Rollback`，因此解决方案需要在嵌套事务的每个级别（本例中只有 1 级）中检测这种情况并传播它。

一种解决方案可能如下所示：

```
Account.transaction do
  acc = Account.do_something_to_accounts
  should_rollback = false
  User.transaction do
    begin
      User.do_something_to_users
    rescue ActiveRecord::Rollback
      should_rollback = true
      raise ActiveRecord::Rollback
    end
  end
  raise ActiveRecord::Rollback if should_rollback

end 
```

另一种实现：

```
class NestedTransactionRollback < RuntimeError; end

begin
  Account.transaction do
    acc = Account.do_something_to_accounts
    User.transaction do
      begin
        User.do_something_to_users
      rescue ActiveRecord::Rollback
        raise NestedTransactionRollback
      end
    end
  end
rescue NestedTransactionRollback
  # Rescue silently...
end 
```

编辑：您还可以花点心思构建一个通用解决方案，如下所示：

```
 class DistributedDbRollback < RuntimeError; end

def cross_db_transaction(*ar_classes, nested: false, &block)
  return distributed_yield(&block) if ar_classes.empty?

  ar_classes[0].transaction do
    cross_db_transaction(ar_classes[1..-1], nested: true, &block)
  end
rescue DistributedDbRollback
  raise DistributedDbRollback if nested
  # Return nil if we're in the outermost call
end

def distributed_yield(&block)
  yield
rescue ActiveRecord::Rollback
  raise DistributedDbRollback
end

# Usage:
# cross_db_transaction(User, Account, Invoice) do
#   ...
# end 
```

# jsp - 如何在jsp页面上以表格形式显示列表

> ID：11467122
> 
> 赞同：0
> 
> 时间：2012-07-13T08:50:14.783
> 
> 标签：jsp, struts2

我在 struts2 类中有一个列表，其中包含元素 {a,b,c,d,e,g,h,y,t}。我想以表格格式显示此列表，如下所示：

美国广播公司

度

海特

这意味着每行三个元素。我正在使用“s:iterator”和“s:property”标签。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T16:48:12.677

我的方法是在 JB 的“在 Java 端做”和 Jaiwo 的“在视图中做”的中间。

我更喜欢使用列数的自定义标签，拆分列表，如果它不是列数的偶数倍，则添加空元素，并将所有逻辑包装在一个漂亮的小包中。

对于仅视图层的方法，我将使用 Jaiwo 代码的变体。对于子集的想法，我会将它们分解成一个有凝聚力的块，但仍然进行双重迭代——IMO 这更清楚：

```
<s:set var="items" value="{1,2,3,4,5,6,7,8,9}" />

<s:subset var="list1" source="#items" start="0" count="3" />
<s:subset var="list2" source="#items" start="3" count="3" />
<s:subset var="list3" source="#items" start="6" count="3" />

<s:set var="nested" value="{#attr.list1, #attr.list2, #attr.list3}" />

<table>
  <s:iterator value="#nested">
    <tr>
       <s:iterator>
         <td><s:property /></td>
       </s:iterator>
    </tr>
  </s:iterator>
</table> 
```

当列表不是列数的偶数倍时，这就会崩溃。您不能（轻松）将项目附加到子集（它不是列表，它是迭代器），并且在 JSP 中将项目添加到原始列表很笨拙。

仅 Java 层方法的问题在于，如果您希望能够从视图层设置列数（合理的愿望），则需要将列数设置为 Java。OGNL 允许我们调用任意方法，所以最终我可能会实现一个创建嵌套列表的小实用程序：

```
<s:iterator value="@utils@slice(items, 3)">
  ... 
```

但我会将*它*包装在一个自定义标记中，因为 (a) 它很丑，并且 (b) 它会使主线 JSP 混乱。与 Rails 中的 partials 类似，对象列表的显示应该被重构出来，留下：

```
<app:showItems items="..." columns="..." /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T10:16:54.350

似乎很容易。

```
<table>
    <tr>
        <s:subset source="{1,2,3,4,5,6,7,8,9}" count="3" start="0">
            <s:iterator>
                <td><s:property /></td>
            </s:iterator>
        </s:subset>
    </tr>
    <tr>
        <s:subset source="{1,2,3,4,5,6,7,8,9}" count="3" start="3">
            <s:iterator>
                <td><s:property /></td>
            </s:iterator>
        </s:subset>
    </tr>
    <tr>
        <s:subset source="{1,2,3,4,5,6,7,8,9}" count="3" start="6">
            <s:iterator>
                <td><s:property /></td>
            </s:iterator>
        </s:subset>
    </tr>
</table> 
```

**更新**

如果你不想使用`subset`，这里是替代方案。

```
<table>
    <s:iterator value="{1,2,3,4,5,6,7,8,9}" status="status">
        <s:if test="%{#status.index == 0}"><tr><td><s:property /></td></s:if>
            <s:elseif test="%{#status.index%3 == 0}">
            </tr><tr><td><s:property /></td>
            </s:elseif>
            <s:else>
                <td><s:property /></td>
            </s:else>
        </s:iterator>
    </tr>
</table> 
```

# php - 使用 PHP 和 JSP 在另一个网页中获取 cookie 值

> ID：11467142
> 
> 赞同：0
> 
> 时间：2012-07-13T08:51:13.987
> 
> 标签：php, javascript, mysql

我有一个基于 Web 的门户，其中我们有 2 种类型的登录页面，具体取决于最终用户、管理员和关联。任何想要登录基于 Web 的门户网站的人首先必须输入他的类型（即最终用户、管理员、助理），然后他必须在下一页中提供他的 ID 和密码。

现在有几个用户和同事。我希望任何用户或同事都不能更改其他用户或同事的数据库值。因此，我尝试使用该`setcookie`功能将用户 ID 存储在登录页面中。我想在其他页面中访问该值，用户可以在其中看到分配给他们名称的文件是什么。

我正在尝试使用另一个网页中的 MySQL 查询从数据库中显示这些文件。

```
$result = mysql_query("select file_name from File where
  user_name = '$user_name';"); 
```

但我没有在 '$user_id' 获得 cookie 值

我使用了这段代码：

```
<?php
//$mycookie = $_COOKIE["cookie_user_name"];
if (isset( $mycookie))
  print "<p>The value in cookie - $mycookie</p>";
else
  print "<p>There is no value in cookie.</p>";
?> 
```

请帮我解决一下这个。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T08:57:42.940

你正在做`isset($mycookie)`- 但`$mycookie`总是会被设置，因为你之前只设置了一行。

您需要检查是否`$_COOKIE["cookie_user_name"]`已设置。（我建议使用这个`empty()`函数而不是`isset()`.）

要获得更完整的答案，请包含带有`setcookie`.

只是一个温和的建议：你没有资格写安全代码，你还是个新手。等到您有更多经验后再尝试编写安全代码。

# asp.net-mvc - DotNetOpenAuth 如何从 OpenId 中检索电子邮件和名称

> ID：11467147
> 
> 赞同：2
> 
> 时间：2012-07-13T08:51:29.357
> 
> 标签：asp.net-mvc, openid, dotnetopenauth

我将 DotNetOpenAuth 与 MVC 3 一起使用。我能够使用 OpenId 进行身份验证。

所以我指向控制器的 URL 附加了一个变量 OpenId=

这是一个例子：

[https://www.google.com/accounts/o8/id?id=DFtOawDkCUoLb3YxPzmrEI59-JiSZiAeR-NWw-0](https://www.google.com/accounts/o8/id?id=DFtOawDkCUoLb3YxPzmrEI59-JiSZiAeR-NWw-0)

[http://mysite.com/Account/Register?OpenID=](http://mysite.com/Account/Register?OpenID=) .......

如何获取 OpenId 帐户的电子邮件和名称并显示给视图？

```
switch (response.Status)
            {
                case AuthenticationStatus.Authenticated:
                    LogOnModel lm = new LogOnModel();
                    lm.OpenID = response.ClaimedIdentifier;
                    // Check if user exist
                    MembershipUser user = MembershipService.GetUser(lm.OpenID);
                    if (user != null)
                    {
                        lm.UserName = user.UserName;
                        FormsService.SignIn(user.UserName, false);
                    }

                    return View("LogOn", lm);

                case AuthenticationStatus.Canceled:
                    ViewBag.Message = "Canceled at provider";
                    return View("LogOn");
                case AuthenticationStatus.Failed:
                    ViewBag.Message = response.Exception.Message;
                    return View("LogOn");
            } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T09:00:46.623

```
var fetchResponse = response.GetExtension<FetchResponse>();
string email = String.Empty; 
if (fetchResponse != null)
{
    email =  fetchResponse.GetAttributeValue(WellKnownAttributes.Contact.Email);
} 
```

但是不要忘记在发送请求时询问它，以便用户可以授权您在身份验证阶段使用他的 OpenId 提供者获得此信息：

```
IAuthenticationRequest request = openid.CreateRequest(openidurl);
var fetchRequest = new FetchRequest();
fetchRequest.Attributes.AddRequired(WellKnownAttributes.Contact.Email);
request.AddExtension(fetch);
request.RedirectToProvider(); 
```

# javascript - 用正则表达式替换字符

> ID：11467151
> 
> 赞同：0
> 
> 时间：2012-07-13T08:51:51.973
> 
> 标签：javascript, regex

早晨，

由于图像在网站上的显示方式，我需要用不同的字符替换 jQuery 中的一些字符。我需要用 _ 替换 & 和 /

我目前有，我该怎么做 / ？

```
$('#lnkProdImage').attr("href", "http://img.website.com/500/" + res.sku.replace(/&/g, '_').replace(/[\s]/g, '_') + ".jpg"); 
```

提前谢谢了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T09:09:35.453

严重地？

```
$('#lnkProdImage').attr("href", "http://img.website.com/500/" + res.sku.replace(/[&\s\/]/g, '_') + ".jpg"); 
```

为什么要换3？一个人就能搞定！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T08:56:48.787

```
$('#lnkProdImage').attr("href", "http://img.website.com/500/" + res.sku.replace(/&/g, '_').replace(/[\s]/g, '_').replace(/\//g, '_') + ".jpg"); 
```

# javascript - javascript正则表达式验证强制使用字母字符或字母数字字符但没有独立数字

> ID：11467152
> 
> 赞同：1
> 
> 时间：2012-07-13T08:52:06.977
> 
> 标签：javascript, regex

寻找验证这两种情况的 Javascript 验证正则表达式

*   字符或字符+数字
*   没有独立号码

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T08:55:46.620

尝试使用这个正则表达式`^[\da-zA-Z]*?[a-zA-Z]+[\da-zA-Z]*?$`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T08:56:36.807

这个怎么样？

```
var tests = [
  'fsdfdsfASAS34csdfsd', 
  'dadsd', 
  '332'
]; // add here whatever you like to test

var re = /^(?=.*[a-z])[0-9a-z]+$/i; 
// with [0-9a-z]+ we test that string contains only alphanumericals,
// and with (?=.*[a-z]) we test that it has at least one [a-zA-Z] character present

for (var i = 0, l = tests.length; i < l; ++i) {
  if (re.test(tests[i])) {
    console.log(tests[i] + ' passed');
  }
  else {
    console.log(tests[i] + ' failed');
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T08:58:13.793

**试试这个**

```
(?i)\b([a-z0-9]*[a-z][a-z0-9]*)\b 
```

**解释**

```
(?i)           # Match the remainder of the regex with the options: case insensitive (i)
\b             # Assert position at a word boundary
(              # Match the regular expression below and capture its match into backreference number 1
   [a-z0-9]       # Match a single character present in the list below
                     # A character in the range between “a” and “z”
                     # A character in the range between “0” and “9”
      *              # Between zero and unlimited times, as many times as possible, giving back as needed (greedy)
   [a-z]          # Match a single character in the range between “a” and “z”
   [a-z0-9]       # Match a single character present in the list below
                     # A character in the range between “a” and “z”
                     # A character in the range between “0” and “9”
      *              # Between zero and unlimited times, as many times as possible, giving back as needed (greedy)
)
\b             # Assert position at a word boundary 
```

或者

```
(?is)^([a-z0-9]*[a-z][a-z0-9]*)$ 
```

**解释**

```
(?is)          # Match the remainder of the regex with the options: case insensitive (i); dot matches newline (s)
^              # Assert position at the beginning of the string
(              # Match the regular expression below and capture its match into backreference number 1
   [a-z0-9]       # Match a single character present in the list below
                     # A character in the range between “a” and “z”
                     # A character in the range between “0” and “9”
      *              # Between zero and unlimited times, as many times as possible, giving back as needed (greedy)
   [a-z]          # Match a single character in the range between “a” and “z”
   [a-z0-9]       # Match a single character present in the list below
                     # A character in the range between “a” and “z”
                     # A character in the range between “0” and “9”
      *              # Between zero and unlimited times, as many times as possible, giving back as needed (greedy)
)
$              # Assert position at the end of the string (or before the line break at the end of the string, if any) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-13T09:03:26.657

```
/(?=[^0-9][a-zA-Z0-9])/ 
```

是你的神奇正则表达式。

```
[ 'ads', '3ds', '3' ].map( function( c ) {
    return /(?=[^0-9][a-zA-Z0-9])/.test( c );
});

[true, true, false] 
```

`(?=`是方括号[的一种说法`AND`](https://stackoverflow.com/a/469951/851498)。`[^0-9]`仅排除数字、仅`[a-zA-Z0-9]`允许字母和字母 + 数字。

# mobile - 检测黑莓 pre OS 7

> ID：11467154
> 
> 赞同：0
> 
> 时间：2012-07-13T08:52:13.793
> 
> 标签：mobile, blackberry, mobile-website, browser-detection, sniffing

我需要能够检测我的网页是否在 OS 7 之前的黑莓上运行。

我需要能够告诉用户某些元素将无法正常工作。

这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T09:43:50.053

从用户代理中，您可以检测到用户正在使用什么设备。

您可以使用这个很棒的链接[http://supportforums.blackberry.com/t5/Web-and-WebWorks-Development/How-to-detect-the-BlackBerry-Browser/ta-p/559862](http://supportforums.blackberry.com/t5/Web-and-WebWorks-Development/How-to-detect-the-BlackBerry-Browser/ta-p/559862)

BlackBerry Bold 9900 智能手机的示例用户代理：

```
Mozilla/5.0 (BlackBerry; U; BlackBerry 9900; en-US) AppleWebKit/534.11+ (KHTML, like Gecko) Version/7.0.0 Mobile Safari/534.11+ 
```

# html - 这个 HTML 有效吗？ 新闻卷 新闻 1 新闻 2

> ID：11467159
> 
> 赞同：2
> 
> 时间：2012-07-13T08:52:31.597
> 
> 标签：html, html-lists

我试图在 UL 内有一个标题，因为你不能在 UL 内有 H2 如果按照我显示的方式使用它可以吗？

```
<ul>
   <li class="head">News roll </li>
   <li>News 1</li> 
   <li>News 2</li> 
</ul> 
```

我的一位朋友告诉我，这不是正确的方法，他显然不知道原因。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-13T08:57:52.430

是的，没关系。

至于您的结构，也许您想`h2`在`ul`? （假设它将成为该列表的标题）。

```
<h2>News Roll</h2>
<ul>
    <li>News 1</li>
    <li>News 2</li>
</ul> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T08:55:04.203

它是一个完全有效的 html。您不能在 a 中放置任何标签`<ul>`，它必须直接跟在`<li>`. 但是，您可以将任何块级元素放在`<li>`. 所以你可以在 li 里面有 H2。

*就你的朋友而言，他是错的。*

# android - Android MultiColumn ListView 显示具有排序功能的记录

> ID：11467166
> 
> 赞同：0
> 
> 时间：2012-07-13T08:52:50.240
> 
> 标签：android

**上下文** ** 我是 Android 新手。当我将文本设置为 holder.column1.other 列时，getView 方法出错。我评论这两行。这是我的代码 - ** **MulticolumnListViewCustomAdapter.java**

```
public class MulticolumnListViewCustomAdapter extends ArrayAdapter<Feedback>{

    public static final String TAG = MulticolumnListViewCustomAdapter.class.getSimpleName();

    private ArrayList<Feedback> data;
    private LayoutInflater mInflater;
    private int layoutResource;

    final public static int SORT_CUST_NAME_ASCENDING = 1;
    final public static int SORT_CUST_NAME_DESCENDING = 2;
    final public static int SORT_CUST_EMAIL_ASCENDING = 3;
    final public static int SORT_CUST_EMAIL_DESCENDING = 4;
    final public static int SORT_CUST_SEX_ASCENDING = 5;
    final public static int SORT_CUST_SEX_DESCENDING = 6;
    final public static int SORT_CUST_FEEDTYPE_ASCENDING = 7;
    final public static int SORT_CUST_FEEDTYPE_DESCENDING = 8;
    final public static int SORT_CUST_FEEDBACK_ASCENDING = 9;
    final public static int SORT_CUST_FEEDBACK_DESCENDING = 10;

    private HashMap<Integer, Boolean> checkedList = new HashMap<Integer, Boolean>();
    private CheckBox checkAllBox;
    private Boolean cancelSetCheckedAll = false;

    public MulticolumnListViewCustomAdapter(Context context, int textViewResourceId, ArrayList<Feedback> data, CheckBox checkAllBox, int sortMode) {
        super(context, textViewResourceId, data);
        constructor(context, textViewResourceId, data, checkAllBox, (sortMode<1||sortMode>10)?SORT_CUST_NAME_ASCENDING:sortMode);
    }
    public MulticolumnListViewCustomAdapter(Context context, int textViewResourceId, ArrayList<Feedback> data, CheckBox checkAllBox) {
        super(context, textViewResourceId, data);
        constructor(context, textViewResourceId, data, checkAllBox, SORT_CUST_NAME_ASCENDING);
    }    
    public void constructor(Context context, int textViewResourceId, ArrayList<Feedback> data, CheckBox checkAllBox, int sortMode) {
        this.checkAllBox = checkAllBox;
        this.data = data;
        switch(sortMode) {
        default:
        case SORT_CUST_NAME_ASCENDING: 
            sortByCustNameAscending(false);
            break;
        case SORT_CUST_NAME_DESCENDING: 
            sortByCustNameDescending(false);
            break;
        case SORT_CUST_EMAIL_ASCENDING: 
            sortByCustEmailAscending(false);
            break;
        case SORT_CUST_EMAIL_DESCENDING: 
            sortByCustEmailDescending(false);
            break;
        case SORT_CUST_SEX_ASCENDING: 
            sortByCustSexAscending(false);
            break;
        case SORT_CUST_SEX_DESCENDING: 
            sortByCustSexDescending(false);
            break;
        case SORT_CUST_FEEDTYPE_ASCENDING: 
            sortByCustFeedTypeAscending(false);
            break;
        case SORT_CUST_FEEDTYPE_DESCENDING: 
            sortByCustFeedTypeDescending(false);
            break;
        case SORT_CUST_FEEDBACK_ASCENDING: 
            sortByCustFeedbackAscending(false);
            break;
        case SORT_CUST_FEEDBACK_DESCENDING: 
            sortByCustFeedbackDescending(false);
            break;
    }
        this.mInflater = LayoutInflater.from(context);
        this.layoutResource = textViewResourceId;
        checkAllBox.setOnCheckedChangeListener(new OnCheckedChangeListener() {

            public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
                if (!cancelSetCheckedAll)setCheckedAll(isChecked); else cancelSetCheckedAll=false;
            }
        });
    }
    public void setCheckedAll(Boolean state) {
        checkedList.clear();
        for (Feedback item : this.data) {
            checkedList.put(Integer.valueOf(item.getListId()), state);
        }
        refreshList(true);
    }

    public void sortByCustNameAscending(Boolean refreshList) {
        this.data = SortFeedbackResults.sortByCustNameAscending(this.data);
        refreshList(refreshList);
    }
    public void sortByCustNameDescending(Boolean refreshList) {
        this.data = SortFeedbackResults.sortByCustNameDescending(this.data);
        refreshList(refreshList);
    }
    public void sortByCustEmailAscending(Boolean refreshList) {
        this.data = SortFeedbackResults.sortByCustEmailAscending(this.data);
        refreshList(refreshList);
    }
    public void sortByCustEmailDescending(Boolean refreshList) {
        this.data = SortFeedbackResults.sortByCustEmailDescending(this.data);
        refreshList(refreshList);
    }

    public void sortByCustSexAscending(Boolean refreshList) {
        this.data = SortFeedbackResults.sortByCustSexAscending(this.data);
        refreshList(refreshList);
    }
    public void sortByCustSexDescending(Boolean refreshList) {
        this.data = SortFeedbackResults.sortByCustSexDescending(this.data);
        refreshList(refreshList);
    }
    public void sortByCustFeedTypeAscending(Boolean refreshList) {
        this.data = SortFeedbackResults.sortByCustFeedTypeAscending(this.data);
        refreshList(refreshList);
    }
    public void sortByCustFeedTypeDescending(Boolean refreshList) {
        this.data = SortFeedbackResults.sortByCustFeedTypeDescending(this.data);
        refreshList(refreshList);
    }

    public void sortByCustFeedbackAscending(Boolean refreshList) {
            this.data = SortFeedbackResults.sortByCustFeedbackAscending(this.data);
            refreshList(refreshList);
        }
    public void sortByCustFeedbackDescending(Boolean refreshList) {
            this.data = SortFeedbackResults.sortByCustFeedbackDescending(this.data);
            refreshList(refreshList);
    }
    public void sortByCustNameAscending() {
        sortByCustNameAscending(true);
    }
    public void sortByCustNameDescending() {
        sortByCustNameDescending(true);
    }
    public void sortByCustEmailAscending() {
        sortByCustEmailAscending(true);
    }
    public void sortByCustEmailDescending() {
        sortByCustEmailDescending(true);
    }
    public void sortByCustSexAscending() {
        sortByCustSexAscending(true);
    }
    public void sortByCustSexDescending() {
        sortByCustSexDescending(true);
    }
    public void sortByCustFeedTypeAscending() {
        sortByCustFeedTypeAscending(true);
    }
    public void sortByCustFeedTypeDescending() {
        sortByCustFeedTypeDescending(true);
    }
    public void sortByCustFeedbackAscending() {
        sortByCustFeedbackAscending(true);
    }
    public void sortByCustFeedbackDescending() {
        sortByCustFeedbackDescending(true);
    }

    public void refreshList(Boolean really) {
        if (really) {
            notifyDataSetChanged();
        }
    }
    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
                final ViewHolder holder;
        View v = convertView;

        if(v == null){

             v = mInflater.inflate(layoutResource, null);

             holder = new ViewHolder();

             holder.id = (TextView)v.findViewById(R.id.custid);
             holder.column1 = (CheckBox)v.findViewById(R.id.column1);
             holder.column2 = (TextView)v.findViewById(R.id.column2);
             holder.column3 = (TextView)v.findViewById(R.id.column3);
             holder.column4 = (TextView)v.findViewById(R.id.column4);
             holder.column5 = (TextView)v.findViewById(R.id.column5);
             holder.column6 = (TextView)v.findViewById(R.id.column6);
             holder.column7 = (TextView)v.findViewById(R.id.column7);

             holder.column1.setOnCheckedChangeListener(new OnCheckedChangeListener() {
                public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {

                    int id = Integer.valueOf((String) holder.id.getText());
                    checkedList.remove(id);
                    checkedList.put(id, isChecked);

                    if(isChecked==false&&checkAllBox.isChecked()){cancelSetCheckedAll=true;checkAllBox.setChecked(false);}
                }
            });

             v.setTag(holder);
        }else{
            holder = (ViewHolder)v.getTag();
        }

        Feedback c = data.get(position);
        if(c != null){

            //holder.id.setText(c.getListId());
            //holder.id.setVisibility(View.VISIBLE);

            int id = Integer.valueOf(c.getListId());
            if(checkedList.containsKey(id)){
                holder.column1.setChecked(checkedList.get(id));
            }else{
                holder.column1.setChecked(false);
            }
            holder.column1.setVisibility(View.VISIBLE);

            holder.column2.setText(c.getName());
            holder.column2.setVisibility(View.VISIBLE);

            holder.column3.setText(c.getEmail());
            holder.column3.setVisibility(View.VISIBLE);

            holder.column4.setText(c.getSex());
            holder.column4.setVisibility(View.VISIBLE);

            holder.column5.setText(c.getFeedbackType());
            holder.column5.setVisibility(View.VISIBLE);

            holder.column6.setText(c.getFeedback());
            holder.column6.setVisibility(View.VISIBLE);

            holder.column7.setText(c.getEmailRes());
            holder.column7.setVisibility(View.VISIBLE);

        }else{

            holder.id.setVisibility(View.GONE);
            holder.column1.setVisibility(View.GONE);
            holder.column2.setVisibility(View.GONE);
            holder.column3.setVisibility(View.GONE);
            holder.column4.setVisibility(View.GONE);
            holder.column5.setVisibility(View.GONE);
            holder.column6.setVisibility(View.GONE);
        }

        return v;
    }

    private static class ViewHolder {
        TextView id;
        CheckBox column1;
        TextView column2;
        TextView column3;
        TextView column4;
        TextView column5;
        TextView column6;
        TextView column7;
    }

    private static class SortFeedbackResults {

        public static ArrayList<Feedback> sortByCustNameAscending(ArrayList<Feedback> list){
            Collections.sort(list, new SortFeedbackResultsByCustNameAscending());
            return list;
        }
        private static class SortFeedbackResultsByCustNameAscending implements Comparator<Feedback>{
            public int compare(Feedback lhs, Feedback rhs) {
                if(lhs.getName().equals(rhs.getName())){
                    return lhs.getEmail().compareTo(rhs.getEmail());
                }
                return lhs.getName().compareTo(rhs.getName());
            }
        }

        public static ArrayList<Feedback> sortByCustNameDescending(ArrayList<Feedback> list){
            Collections.sort(list, new SortFeedbackResultsByCustNameDescending());
            return list;
        }
        private static class SortFeedbackResultsByCustNameDescending implements Comparator<Feedback>{

            public int compare(Feedback lhs, Feedback rhs) {
                if(lhs.getName().equals(rhs.getName())){
                    return lhs.getEmail().compareTo(rhs.getEmail());
                }
                int result = lhs.getName().compareTo(rhs.getName());
                return (result>0)?-result:-0-result;
            }
        }

        public static ArrayList<Feedback> sortByCustEmailAscending(ArrayList<Feedback> list){
            Collections.sort(list, new SortFeedbackResultsByCustEmailAscending());
            return list;
        }
        private static class SortFeedbackResultsByCustEmailAscending implements Comparator<Feedback>{
            public int compare(Feedback lhs, Feedback rhs) {

                    return lhs.getEmail().compareTo(rhs.getEmail());
            }
        }

        public static ArrayList<Feedback> sortByCustEmailDescending(ArrayList<Feedback> list){
            Collections.sort(list, new SortFeedbackResultsByCustEmailDescending());
            return list;
        }
        private static class SortFeedbackResultsByCustEmailDescending implements Comparator<Feedback>{

            public int compare(Feedback lhs, Feedback rhs) {

                    int result = lhs.getEmail().compareTo(rhs.getEmail());

                return (result>0)?-result:-0-result;
            }
        }

        public static ArrayList<Feedback> sortByCustSexAscending(ArrayList<Feedback> list){
            Collections.sort(list, new SortFeedbackResultsByCustSexAscending());
            return list;
        }
        private static class SortFeedbackResultsByCustSexAscending implements Comparator<Feedback>{
            public int compare(Feedback lhs, Feedback rhs) {
                if(lhs.getSex().equals(rhs.getSex())){
                    return lhs.getEmail().compareTo(rhs.getEmail());
                }
                return lhs.getSex().compareTo(rhs.getSex());
            }
        }

        public static ArrayList<Feedback> sortByCustSexDescending(ArrayList<Feedback> list){
            Collections.sort(list, new SortFeedbackResultsByCustSexDescending());
            return list;
        }
        private static class SortFeedbackResultsByCustSexDescending implements Comparator<Feedback>{

            public int compare(Feedback lhs, Feedback rhs) {
                if(lhs.getSex().equals(rhs.getSex())){
                    return lhs.getEmail().compareTo(rhs.getEmail());
                }
                int result = lhs.getSex().compareTo(rhs.getSex());
                return (result>0)?-result:-0-result;
            }
        }

        public static ArrayList<Feedback> sortByCustFeedTypeAscending(ArrayList<Feedback> list){
            Collections.sort(list, new SortFeedbackResultsByCustFeedTypeAscending());
            return list;
        }
        private static class SortFeedbackResultsByCustFeedTypeAscending implements Comparator<Feedback>{
            public int compare(Feedback lhs, Feedback rhs) {
                if(lhs.getFeedbackType().equals(rhs.getFeedbackType())){
                    return lhs.getEmail().compareTo(rhs.getEmail());
                }
                return lhs.getFeedbackType().compareTo(rhs.getFeedbackType());
            }
        }

        public static ArrayList<Feedback> sortByCustFeedTypeDescending(ArrayList<Feedback> list){
            Collections.sort(list, new SortFeedbackResultsByCustFeedTypeDescending());
            return list;
        }
        private static class SortFeedbackResultsByCustFeedTypeDescending implements Comparator<Feedback>{

            public int compare(Feedback lhs, Feedback rhs) {
                if(lhs.getFeedbackType().equals(rhs.getFeedbackType())){
                    return lhs.getEmail().compareTo(rhs.getEmail());
                }
                int result = lhs.getFeedbackType().compareTo(rhs.getFeedbackType());
                return (result>0)?-result:-0-result;
            }
        }

        public static ArrayList<Feedback> sortByCustFeedbackAscending(ArrayList<Feedback> list){
            Collections.sort(list, new SortFeedbackResultsByCustFeedbackAscending());
            return list;
        }
        private static class SortFeedbackResultsByCustFeedbackAscending implements Comparator<Feedback>{
            public int compare(Feedback lhs, Feedback rhs) {
                if(lhs.getFeedback().equals(rhs.getFeedback())){
                    return lhs.getEmail().compareTo(rhs.getEmail());
                }
                return lhs.getFeedback().compareTo(rhs.getFeedback());
            }
        }

        public static ArrayList<Feedback> sortByCustFeedbackDescending(ArrayList<Feedback> list){
            Collections.sort(list, new SortFeedbackResultsByCustFeedbackDescending());
            return list;
        }
        private static class SortFeedbackResultsByCustFeedbackDescending implements Comparator<Feedback>{

            public int compare(Feedback lhs, Feedback rhs) {
                if(lhs.getFeedback().equals(rhs.getFeedback())){
                    return lhs.getEmail().compareTo(rhs.getEmail());
                }
                int result = lhs.getFeedback().compareTo(rhs.getFeedback());
                return (result>0)?-result:-0-result;
            }
        }

    }

}

**MainActivity----**

public class MulticolumnListViewTest extends Activity {

    private Boolean column2State = true;
    private Boolean column3State = true;
    private Boolean column4State = true;
    private Boolean column5State = true;
    private Boolean column6State = true;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_multicolumn_list_view_test);

        this.getApplicationContext();
        final ListView list = (ListView) findViewById(R.id.mylist);
        ArrayList<Feedback> myListData = new ArrayList<Feedback>();

        for(int i=1; i<=100; i++){
            Feedback feedback = new Feedback();
            String iString = Integer.toString(i);
            feedback.setName("Name"+i);
            feedback.setEmail("Email"+i);
            feedback.setSex("Sex"+i);
            feedback.setFeedbackType("FeedType"+i);
            feedback.setFeedback("Feedback"+i);
            feedback.setEmailRes("Res"+i);
            feedback.setListId(iString);

            myListData.add(feedback);
        }

        final MulticolumnListViewCustomAdapter multicolumnListViewCustomAdapter = new MulticolumnListViewCustomAdapter(this, R.layout.activity_multicolumn_list_view_test, myListData, (CheckBox)findViewById(R.id.column1));
        list.setAdapter(multicolumnListViewCustomAdapter);

        final LinearLayout column2 = (LinearLayout) findViewById(R.id.column2_container);
        final LinearLayout column3 = (LinearLayout) findViewById(R.id.column3_container);
        final LinearLayout column4 = (LinearLayout) findViewById(R.id.column4_container);
        final LinearLayout column5 = (LinearLayout) findViewById(R.id.column5_container);
        final LinearLayout column6 = (LinearLayout) findViewById(R.id.column6_container);
        final TextView column2Arrow = (TextView)column2.getChildAt(1);
        final TextView column3Arrow = (TextView)column3.getChildAt(1);
        final TextView column4Arrow = (TextView)column4.getChildAt(1);
        final TextView column5Arrow = (TextView)column5.getChildAt(1);
        final TextView column6Arrow = (TextView)column6.getChildAt(1);
        column2.setOnTouchListener(columnContainerOnTouchListener(column2));
        column3.setOnTouchListener(columnContainerOnTouchListener(column3));
        column4.setOnTouchListener(columnContainerOnTouchListener(column4));
        column5.setOnTouchListener(columnContainerOnTouchListener(column5));
        column6.setOnTouchListener(columnContainerOnTouchListener(column6));

        column2.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {
                System.out.println("COLUMN 2 CLICK");
                if(column2State){
                    column2State = false;
                    column2Arrow.setText(R.string.solid_down);
                    column3Arrow.setText("");
                    column4Arrow.setText("");
                    column5Arrow.setText("");
                    column6Arrow.setText("");
                    multicolumnListViewCustomAdapter.sortByCustNameDescending();
                }else{
                    column2State = true;
                    column3Arrow.setText("");
                    column4Arrow.setText("");
                    column5Arrow.setText("");
                    column6Arrow.setText("");
                    multicolumnListViewCustomAdapter.sortByCustNameAscending();
                }
            }
        });

        column3.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {
                System.out.println("COLUMN 3 CLICK");
                if(column3State){
                    column3State = false;
                    column3Arrow.setText(R.string.solid_down);
                    column2Arrow.setText("");
                    column4Arrow.setText("");
                    column5Arrow.setText("");
                    column6Arrow.setText("");
                    multicolumnListViewCustomAdapter.sortByCustEmailDescending();
                }else{
                    column3State = true;
                    column2Arrow.setText("");
                    column4Arrow.setText("");
                    column5Arrow.setText("");
                    column6Arrow.setText("");
                    multicolumnListViewCustomAdapter.sortByCustEmailAscending();
                }

            }
        });

        column4.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {
                System.out.println("COLUMN 4 CLICK");
                if(column4State){
                    column4State = false;
                    column4Arrow.setText(R.string.solid_down);
                    column3Arrow.setText("");
                    column2Arrow.setText("");
                    column5Arrow.setText("");
                    column6Arrow.setText("");
                    multicolumnListViewCustomAdapter.sortByCustSexDescending();
                }else{
                    column4State = true;
                    column3Arrow.setText("");
                    column2Arrow.setText("");
                    column5Arrow.setText("");
                    column6Arrow.setText("");
                    multicolumnListViewCustomAdapter.sortByCustSexAscending();
                }

            }
        });

        column5.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {
                System.out.println("COLUMN 5 CLICK");
                if(column5State){
                    column5State = false;
                    column5Arrow.setText(R.string.solid_down);
                    column3Arrow.setText("");
                    column4Arrow.setText("");
                    column2Arrow.setText("");
                    column6Arrow.setText("");
                    multicolumnListViewCustomAdapter.sortByCustFeedTypeDescending();
                }else{
                    column5State = true;
                    column3Arrow.setText("");
                    column4Arrow.setText("");
                    column2Arrow.setText("");
                    column6Arrow.setText("");
                    multicolumnListViewCustomAdapter.sortByCustFeedTypeAscending();
                }

            }
        });

        column6.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {
                System.out.println("COLUMN 2 CLICK");
                if(column6State){
                    column6State = false;
                    column6Arrow.setText(R.string.solid_down);
                    column3Arrow.setText("");
                    column4Arrow.setText("");
                    column5Arrow.setText("");
                    column2Arrow.setText("");
                    multicolumnListViewCustomAdapter.sortByCustFeedbackDescending();
                }else{
                    column6State = true;
                    column3Arrow.setText("");
                    column4Arrow.setText("");
                    column5Arrow.setText("");
                    column2Arrow.setText("");
                    multicolumnListViewCustomAdapter.sortByCustFeedbackAscending();
                }
            }
        });

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_multicolumn_list_view_test, menu);
        return true;
    }

    public OnTouchListener columnContainerOnTouchListener(final LinearLayout column){
        return new OnTouchListener() {

            public boolean onTouch(View v, MotionEvent event) {
                if(MotionEvent.ACTION_DOWN == event.getAction()){
                    column.setBackgroundColor(Color.argb(10, 0, 0, 0));
                }else if(MotionEvent.ACTION_UP == event.getAction()){
                    column.setBackgroundColor(Color.TRANSPARENT);
                }
                return false;
            }
        };
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T09:07:16.343

**编辑**：

不要在构造函数中实例化**mInflater**和**layoutResource**，只需在 if 条件下的 getView() 中尝试此代码，如下所示：

```
mInflater = ((Activity)context).getLayoutInflater();
layoutResource = mInflater.inflate(resId, parent, false); 
```

只需从中删除**final**

```
final ViewHolder holder; 
```

并将其放入

```
public View getView(final int position, final View convertView, final ViewGroup parent) { 
```

* * *

放置跟随监听器

```
holder.column1.setOnCheckedChangeListener(new OnCheckedChangeListener() {
                public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {

                    int id = Integer.valueOf((String) holder.id.getText());
                    checkedList.remove(id);
                    checkedList.put(id, isChecked);

                    if(isChecked==false&&checkAllBox.isChecked()){cancelSetCheckedAll=true;checkAllBox.setChecked(false);}
                }
            }); 
```

在 if 条件之外。

# iis - ColdFusion10 开发者和 Windows7 (IIS7.5)

> ID：11467168
> 
> 赞同：3
> 
> 时间：2012-07-13T08:52:54.640
> 
> 标签：iis, coldfusion, iis-7.5

我正在尝试学习 ColdFusion 并在我的 Win7 计算机上安装了开发人员版 (CF10)，这会正确显示 localhost 管理员页面，但是我在 inetpub/wwwroot 中有一个测试 helloworld.cfm 文件，当我尝试使用 localhost 访问它时/helloworld.cfm windows 会打开一个对话框，说明什么程序应该打开这个 .cfm 文件？（在 IIS Mime 类型中没有 .cfm 并且当我尝试添加一个时它不起作用......）。互联网上的几篇文章说确保 IIS 启用了 CGI 以及我拥有的 ISAPI Extensions IIS Metabase 和 IIS 6 配置兼容性。我不确定这里出了什么问题 - 如果我可以在 IIS 中查看和使用 .cfm 以及如何查看和使用，任何人都可以清楚而简单地告诉我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T09:14:49.063

我们知道 IIS 是问题所在，因为您的管理员在工作，因此 CF 运行正常。

我做的是以下

1.  在 IIS 中创建一个站点，只是基本的。没有设置更改
2.  安装冷融合10
3.  在安装期间，coldfusion 会问我是否必须配置所有当前的 IIS 站点，如果你让它这样做，它应该都能像魅力一样工作。

你是这样做的吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T09:06:41.563

我会卸载并重新安装，因为将 IIS 连接到 COldFusion 肯定有问题

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T19:19:11.943

CF10 不需要 IIS 6 兼容性。如果您不需要任何其他 Web 技术连接，请删除它。您确实需要 CGI、.Net 扩展性、ASP.NET、ISAPI 扩展和 ISAPI 过滤器。我相信 ColdFusion 的连接器配置器特别使用 .Net Extensibilty 来“连接”。

# android - 边距 dp 单位无法在不同屏幕中正确缩放布局

> ID：11467171
> 
> 赞同：1
> 
> 时间：2012-07-13T08:53:10.203
> 
> 标签：android, scale

我有简单的 tableLayout，它显示了独立单元 dp 的问题。

我想在我的**layout_margin**属性中使用 dp 单元 - 布局将在任何设备上毫无问题地调整大小。

```
<TableLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_gravity="center"
    android:gravity="center"
    android:layout_margin="40dp"
    >

<TableRow android:layout_width="fill_parent" android:layout_height="wrap_content"> 
<TextView 
android:text="@string/start_login_username"
android:id="@+id/start_login_username" 
android:layout_width="wrap_content" 
android:layout_height="wrap_content"
/>

<EditText 
android:id="@+id/start_login_EditTxt1" 
android:layout_width="wrap_content" 
android:layout_height="wrap_content"
android:inputType="textEmailAddress"
/>

</TableRow>

<TableRow android:layout_width="fill_parent" android:layout_height="wrap_content">
<TextView 
android:text="@string/start_login_password"
android:id="@+id/start_login_password" 
android:layout_width="wrap_content" 
android:layout_height="wrap_content">
</TextView>

<EditText 
android:id="@+id/start_login_EditTxt2" 
android:layout_width="wrap_content" 
android:layout_height="wrap_content"
android:inputType="textPassword"
/>

</TableRow>

<TableRow android:layout_width="fill_parent" android:layout_height="wrap_content">
<Button android:text="@string/start_login_cancel"
android:id="@+id/start_login_cancel" 
android:layout_width="wrap_content" 
android:layout_height="wrap_content"
>

</Button>

<Button
android:text="@string/start_login_login"
android:id="@+id/start_login_ButtonLogin" 
android:layout_width="wrap_content" 
android:layout_height="wrap_content"
>

</Button>

</TableRow>

</TableLayout> 
```

但是，测试这个布局，我们可以看到 dp 在布局边距中并不是那么独立。

**这是三星 Nexus 中的屏幕截图（良好的比例）：**

![三星Galaxy](../Images/38e4e15b401970ed2e28f9eadff088bc.png)

**这里是 LG Optimus GT 540 的截图（坏比例）：**

![在此处输入图像描述](../Images/b32be6c9b0e5fec6d46c69e55f484e95.png)

我在 StackOverflow 中寻找类似的线程，以及可能的解决方案，在任何屏幕上都有正确的比例是：

*   根本不使用边距和填充，而是始终使用 tableLayout 并添加一些权重的 moc 视图，以在视图之间添加空间（由于 xml 布局的污染而不好。无论如何，它看起来很有希望）。

*   自己计算独立单位，并以编程方式重新调整所有单位（对我不利，因为我都在 xml 中）

*   为不同的屏幕使用不同的布局（不好，因为我懒得为每个视图重新创建布局并支持它们）

**问题：**

如何解决使用相同布局为所有屏幕缩放布局的问题？

如何使边距在我的屏幕上正常工作？

您对我的两个解决方案有何看法。这是好习惯吗？（特别是第一个）？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T09:02:33.613

简单的使用带有权重属性的linearlayout，如果是要自动调整的宽度，记得设置width="0dp"。

你的 xml 应该是这样的：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content" 
    android:layout_height="wrap_content"
    android:layout_gravity="center" 
    android:orientation="horizontal"  >

    <TextView
        android:text="Your name"
        android:layout_weight="1"
        android:layout_width="0dp"
        android:layout_height="wrap_content" />

    <EditText
        android:layout_weight="1"
        android:layout_width="0dp"
        android:minWidth="80dp"
        android:layout_height="wrap_content" />
</LinearLayout> 
```

# iphone - iTunes Connect/苹果应用商店收入

> ID：11467172
> 
> 赞同：0
> 
> 时间：2012-07-13T08:53:15.483
> 
> 标签：iphone, ios, app-store, app-store-connect

我打算向苹果应用商店（iOS）出售应用。是否可以告诉 iTunes Connect 以不同的比例将收入分配给其他 3 个人？（我是个人注册的）

或者我应该把它存入我的银行账户然后分发（但这会导致税收问题，对吗？ - 有人克服这个吗？）

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T09:06:32.077

您必须将付款发送到您的银行帐户并从那里分发。

税收问题将取决于您居住的地方。如果您所在的国家/地区征收所得税，那么您必须按照您所在国家/地区的规定申报收入并缴纳税款。与常规工作不同，Apple 不会为您分类此类税收。他们排序的只是销售税。

# maven - 如何在 pom 中保留修改/加载的属性？

> ID：11467176
> 
> 赞同：0
> 
> 时间：2012-07-13T08:53:32.630
> 
> 标签：maven, pom.xml

我使用不同的 maven 插件来解析文件中的属性 (properties-maven-plugin) 并在生命周期中操作它们 (gmaven-plugin)。

最后（在部署时）我希望在输出 pom 中显示所有这些属性，但到目前为止我还没有找到如何做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T09:07:53.053

maven-help-plugin 会帮助你吗？

```
mvn help:effective-pom 
```

[http://maven.apache.org/plugins/maven-help-plugin/usage.html](http://maven.apache.org/plugins/maven-help-plugin/usage.html)

您会看到有效的 pom 但没有任何评论，因此您将无法持久保存它。

据我所知，你所需要的并不存在。

# java - MapKey 可以对一个关系唯一吗？

> ID：11467180
> 
> 赞同：1
> 
> 时间：2012-07-13T08:53:49.190
> 
> 标签：java, hibernate, jpa

我的实体：

```
@Entity
public class User implements Serializable {

    @OneToMany(orphanRemoval=true,cascade=CascadeType.ALL)
    @JoinColumn(name="_user_id")
    @MapKey(name="quest")
    private Map<String, ActiveQuest> activeQuests = Maps.createHash();

    ...

@Entity
@Table(uniqueConstraints=@UniqueConstraint(columnNames={"_user_id","quest"}))
public class ActiveQuest implements Serializable {

    @ManyToOne(optional=false)
    @JoinColumn(name="_user_id")
    private User user;

    @Column(nullable=false,updatable=false,length=50)
    private String quest;

    ... 
```

的文档`@MapKey`说：

> 如果将主键以外的持久字段或属性用作映射键，则预计它具有与之关联的唯一性约束。

但是，如您所见， 的列没有唯一约束`quest`，`ActiveQuest`但组合 有一个`_user_id, quest`。

这种用法正确吗？它似乎运作良好，但这是设计使然还是巧合？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T09:20:32.277

我认为这看起来不错 - 你确实有一个与之相关的“唯一性约束”，因为你加入了 user_id 并使用 quest 作为键，并且 user_id+quest 是唯一的......

# sql - SQL 更新触发器未按预期工作

> ID：11467184
> 
> 赞同：1
> 
> 时间：2012-07-13T08:54:03.113
> 
> 标签：sql, sql-server, triggers

我对更新触发器的编程有疑问。我想创建一个触发器，将我编辑的行复制到具有新数据和新 ID 的新行中。旧行应该是相同的，只是将标志从 0 更改为 1。

该表如下所示：

```
ID      Artikelname  PREIS        UPDATE_DATE          FLAG
1       Tomatoe      3            14.06.2012 16:00     0
2       Apple        1,5          12.05.2012 14:45     0 
```

当我更改第一行的价格时，表格应如下所示：

```
ID      Artikelname  PREIS        UPDATE_DATE          FLAG
1       Tomatoe      3            14.06.2012 16:00     1
2       Apple        1,5          12.05.2012 14:45     0
1       Tomatoe      2            13.07.2012 10:45     0 
```

到目前为止，这是我的触发器：

```
USE [TestDB]
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO

ALTER TRIGGER [dbo].[Produkt_Update]
ON [dbo].[Produkt]
AFTER UPDATE
AS
BEGIN
    SET NOCOUNT ON
    DECLARE @ID int
    DECLARE @Artikelname nvarchar(50)
    DECLARE @Preis numeric
    DECLARE @Flag numeric
    DECLARE @max_id int

    SET @ID = (SELECT ID FROM inserted)
    SET @Artikelname = (SELECT Artikelname FROM inserted)
    SET @Preis = (SELECT Preis FROM inserted)
    SET @Flag = (SELECT Flag FROM inserted)
    SET @max_id = (SELECT MAX(ID) from dbo.Produkt)

    SET IDENTITY_INSERT dbo.Produkt ON
    INSERT INTO dbo.Produkt
    (ID,Artikelname,Preis)
    values (@max_id+1,@Artikelname,@Preis)
    SET IDENTITY_INSERT dbo.Produkt OFF

    UPDATE dbo.Produkt
    SET Flag = 1
    WHERE ID=@ID
END 
```

使用触发器，我可以创建新行，但第一行窗台上的价格会发生变化。我不知道如何处理这个。请问你能帮帮我吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-13T09:08:26.780

请试试这个，让我知道

```
CREATE TRIGGER [dbo].[Produkt_Update]
   ON [dbo].[Produkt]
   AFTER  UPDATE
AS
BEGIN
 SET  NOCOUNT ON;

    DECLARE @MAX_ID INT;
    SELECT @MAX_ID=MAX(ID) FROM [Produkt];

    declare @tmp Table(ID  int,     Artikelname  varchar(200),
    PREIS varchar(200),UPDATE_DATE datetime,      FLAG bit)

    insert into @tmp
    select ID,Artikelname,PREIS,UPDATE_DATE,1 [flag] from deleted;

    delete T from [Produkt] T JOIN @tmp I
    ON T.ID=I.ID

SET IDENTITY_INSERT   [Produkt] ON
INSERT INTO [Produkt] (ID,Artikelname,PREIS,UPDATE_DATE,FLAG)
SELECT @MAX_ID+ROW_NUMBER() OVER(ORDER BY ID) [ID],Artikelname,PREIS,GETDATE(),0 
FROM INSERTED
union all
select * from @tmp

 SET IDENTITY_INSERT dbo.Produkt OFF
 SET  NOCOUNT OFF;
END; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T09:13:05.927

您需要从已删除的表中插入价格（preis），而不是插入的表

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-13T08:58:28.837

代替

```
 SET @ID = (SELECT ID FROM inserted) 
```

和

```
SET @ID = (SELECT ID FROM deleted) 
```

# ios - iOS 动画块是如何工作的？

> ID：11467188
> 
> 赞同：8
> 
> 时间：2012-07-13T08:54:17.027
> 
> 标签：ios, core-animation, objective-c-blocks

在 iOS 中，您可以使用动画块为[视图对象设置动画：](http://developer.apple.com/library/ios/documentation/windowsviews/conceptual/viewpg_iphoneos/animatingviews/animatingviews.html)

```
[UIView animateWithDuration:1.0 animations:^{

        firstView.alpha = 0.0;

        secondView.alpha = 1.0;

}]; 
```

我们这里有一个代码块，它描述了动画完成后视图属性最终会看到什么。

这是如何运作的？

我可以理解（我认为）如果这是使用某种声明性格式完成的，但从它的外观来看，动画块只是一段可能必须执行的常规代码，检查结果，然后有人将其转码为实际执行动画的低级图形代码。

该块是否实际执行（或以某种方式进行了逆向工程），如果是，何时执行？

如果这段代码是在动画开始之前执行的，那么为什么对引用的视图属性的更改没有立即反映呢？

如果我将代码放入不更改视图属性但执行其他操作的块中会发生什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-13T08:57:12.533

是的，该块实际上被调用了——然后它立即改变了视图的属性。UIView 的属性设置器负责查看该设置是否在动画上下文中使用——如果是，它们使用 CoreAnimation 和 CoreGraphics 计算动画帧等。

如果您将非动画代码放入这些块中，则不会发生任何特殊情况——该块将立即执行。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-14T20:46:36.083

在块之前查看等效代码是有启发性的：

```
[UIView beginAnimations:@"foo" context:NULL];
[UIView setAnimationDuration:1.0];
firstView.alpha = 0.0;
secondView.alpha = 1.0;
[UIView commitAnimations]; 
```

所以你看，即使在块之前，要更改的属性也是直接设置的；但是，它们不会立即生效（它们是动画的）。

它是如何工作的？据推测，当您在视图上设置属性时，它会检查您是否已运行`beginAnimations`但未运行，如果是`commitAnimations`，则不会立即生效（而是将其添加到要为该动画制作动画的事物列表中）。

因此，块版本在 pre-blocks 版本的上下文中非常简单：您可以将其视为在内部`beginAnimations`和`commitAnimations`行中运行动画块。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-13T15:36:11.747

苹果并没有真正谈论它是如何工作的细节，但我认为会发生这样的事情：

当视图添加到视图层次结构时，系统会在视图的所有可动画属性上添加 KVO 观察者。

当您的动画块执行时，系统会设置一个状态来监视这些属性上的 KVO 通知。然后，被调用的代码会创建适当的 CAAnimation 对象并将其添加到每个受影响的视图层。

# c++ - 将滚动条添加到自定义 QWidget

> ID：11467190
> 
> 赞同：1
> 
> 时间：2012-07-13T08:54:33.437
> 
> 标签：c++, qt, qwidget

我有一个自定义`QWidget`A，其中包含另一个自定义`QWidget`B。我想向 B 添加一个滚动条`Qwidget`。我尝试添加一个`QScrollArea`，但它覆盖了 A 的整个窗口`QWidget`。如何确保滚动条仅适用于`QWidget`B？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T09:10:25.860

首先将 QWidget B 替换为 QScrollArea 并将其设置为您想要的位置。然后简单地将 QWidget B 添加到 QScrollArea。

# grails - Grails Webflow2.0.0 错误

> ID：11467191
> 
> 赞同：0
> 
> 时间：2012-07-13T08:54:36.340
> 
> 标签：grails, spring-webflow

我正在使用 Grails 2.0.0，我尝试下载 webflow 2.0.0，但我只得到 webflow 2.0.0-RELEASE 作为 zip 文件夹或 jar 文件。webflow 2.0.0 和 webflow 2.0.0-RELEASE相同？

我什至还有 grails-webflow-2.0.3 jar 文件。我还尝试了从 grails 官方网站获得的 webflow 1.3.8。我每次都尝试在 Build.Config 的编译语句中更改插件的名称，然后每次运行并最终都会出现这种错误：

错误警告：指定的依赖定义编译（：org.springframework.webflow-2.0.0.RELEASE）无效！跳过..

我该怎么办？

下面给出的是我的 BuildConfig.groovy 文件：

```
grails.servlet.version = "2.5" // Change depending on target container 
compliance (2.5 or 3.0)
grails.project.class.dir = "target/classes"
grails.project.test.class.dir = "target/test-classes"
grails.project.test.reports.dir = "target/test-reports"
grails.project.target.level = 1.6
grails.project.source.level = 1.6
//grails.project.war.file = "target/${appName}-${appVersion}.war"
grails.project.dependency.resolution = {
// inherit Grails' default dependencies
inherits("global") {
    // uncomment to disable ehcache
    // excludes 'ehcache'
}
log "warn" // log level of Ivy resolver, either 'error', 'warn', 'info', 
'debug' or 'verbose'
checksums true // Whether to verify checksums on resolve
repositories {
inherits true // Whether to inherit repository definitions from 
plugins
    grailsPlugins()
    grailsHome()
    grailsCentral()
    mavenCentral()
    // uncomment these to enable remote dependency resolution 
from public Maven repositories
    mavenCentral()
    mavenRepo 
"http://repository.springsource.com/maven/bundles/release"
    mavenRepo 
"http://repository.springsource.com/maven/bundles/external"
    mavenRepo 
"http://repository.springsource.com/maven/libraries/release"
    mavenRepo 
"http://repository.springsource.com/maven/libraries/external"
    mavenLocal()
    mavenRepo "http://snapshots.repository.codehaus.org"
    mavenRepo "http://repository.codehaus.org"
    mavenRepo "http://download.java.net/maven/2/"
    mavenRepo "http://repository.jboss.com/maven2/"
}
dependencies {
    // specify dependencies here under either 'build', 'compile', 
'runtime', 'test' or 'provided' scopes eg.
    // runtime 'mysql:mysql-connector-java:5.1.16'
}
plugins {
    runtime ":hibernate:$grailsVersion"
    runtime ":jquery:1.7.1"
    runtime ":resources:1.1.5"
   compile ":webflow:2.0.0"
 // compile ":spring-security-core:1.2.7.3"
    build ":tomcat:$grailsVersion"
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T09:45:40.740

添加webflow的正确方法是将依赖项放在BuildConfig.groovy中

```
 ...
 plugins { 
     ...
     compile ":webflow:2.0.0"
     ...
 }
 ... 
```

不要手动下载或添加

或者尝试用这个替换你的存储库

```
repositories {
        inherits true
        grailsPlugins()
        grailsHome()
        grailsCentral()
        mavenLocal()
        mavenCentral()
        mavenRepo name: "Grails Snapshots", root:"http://snapshots.repository.codehaus.org/"
        mavenRepo name: "Spring Milestone", root:"http://maven.springframework.org/milestone/"
        mavenRepo name: "Spring Milestone", root:"http://maven.springframework.org/milestone/"
        ebr()       
        mavenRepo "http://repository.codehaus.org"
        mavenRepo "http://download.java.net/maven/2/"
        mavenRepo "http://repository.jboss.com/maven2/"
        mavenRepo "http://repository.springsource.com/maven/bundles/release"
        mavenRepo "http://repository.springsource.com/maven/bundles/external"
        mavenRepo "http://repository.springsource.com/maven/libraries/release"
        mavenRepo "http://repository.springsource.com/maven/libraries/external"
    } 
```

# git - 如何使旧的提交对象成为最新的？

> ID：11467193
> 
> 赞同：0
> 
> 时间：2012-07-13T08:54:49.833
> 
> 标签：git, github

这是我的 Git 状态。

![在此处输入图像描述](../Images/bfc3a5a9315d953300a2d81a42674eda.png)

因为一些奇怪的原因，`master`树枝`task-e`被折断了。他们现在无法建造。
只有`6f374ed94ad7f04b1f7a2ca2019374bb7785d9e6`提交是有效的。 ![在此处输入图像描述](../Images/a5ee96cec089b25702c2b33fcfad9af1.png)

我想将此提交提交到`master`分支的最新提交。我该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T09:11:48.667

It's not completely clear from your question, but I assume that what you want is to add a new commit whose source code is exactly the same as at the older commit, `6f374ed9`. (In other words, you want to avoid rewriting history, since obviously `master` and `task-e` have been pushed to GitHub.) This takes a few steps in git, which are described in [this question](https://stackoverflow.com/a/1895095/223092). To summarize that, firstly make sure that you have no uncommitted changes (i.e. `git status` is clean). You would then need to do:

```
# Switch to the branch you want to add the commit to:
git checkout master
# (... you can merge the result to the other branch later)

# Move the master branch back to the earlier, good commit, forcing the
# working tree and the index to match:
git reset --hard 6f374ed

# Use git reset --soft to point the master branch back to where it was
# originally, but leave the working tree and index as they were at 6f374ed
git reset --soft HEAD@{1}

# Commit the result:
git commit -m "Reverting state back to 6f374ed9" 
```

Then, to update `task-e` as well, you can do:

```
git checkout task-e
git merge master 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T08:57:34.827

您可以使用`git reset`，但它会重写已公开推送的历史记录，因此不建议这样做。我会使用`git revert`: 它允许您恢复提交，即。它创建一个与提交相反的提交。这样，您可以取消提交并返回到您想要的状态，而无需重写历史记录。

# c# - 将 WCF 服务托管为 Windows 服务？

> ID：11467195
> 
> 赞同：1
> 
> 时间：2012-07-13T08:54:52.637
> 
> 标签：c#, .net, wcf, windows-services, self-hosting

我已经设法将我复杂的 WCF 服务移动到 Windows 服务中。绑定看起来像这样：

```
<service behaviorConfiguration="MyAppClientService.CustomValidator_Behavior" name="MyApp.ServiceImplementation.MyAppClientService">
        <endpoint binding="netTcpBinding" bindingConfiguration="netTcpRegular" address="Regular" bindingNamespace="http://MyApp.ServiceContracts/2007/11" contract="MyApp.ServiceContracts.IMyAppClientService"/>
        <endpoint binding="netTcpBinding" bindingConfiguration="netTcpWindowMessageSecurity" address="Windows" bindingNamespace="http://MyApp.ServiceContracts/2007/11" contract="MyApp.ServiceContracts.IMyAppClientService"/>
        <host>
          <baseAddresses>
            <add baseAddress="net.tcp://localhost:8001/MyAppService/Client"/>
            <add baseAddress="http://localhost:8002/MyAppService/Client"/>
          </baseAddresses>
        </host>
      </service> 
```

当服务启动时，我浏览：`http://localhost:8002/MyAppService/Client`这工作正常，我还可以看到 WSDL。

但是当我尝试使用我的 Winform 客户端连接到服务时它找不到服务，这就是地址在客户端中的样子：

```
<client>
<endpoint address="net.tcp://localhost:8001/MyAppService/Client/MyAppClientService.svc/Regular" behaviorConfiguration="BasicBehavior" binding="netTcpBinding" bindingConfiguration="NetTcpBinding_IMyAppClientServiceRegular" contract="MyApp.ServiceContracts.IMyAppClientService" name="MyTest_RegularLogin"/>
</client> 
```

浏览时`http://localhost:8001/MyAppService/Client`我会得到一个丢失的页面，我想这是正确的，因为它托管在 tcp 而不是 http？

当服务托管在 IIS7(WAS) 中时，它工作得很好，但后来我在客户端使用了一个看起来像这样的端点：

```
<endpoint address="net.tcp://localhost/MyAppDev/MyAppClientService.svc/Regular" behaviorConfiguration="BasicBehavior" binding="netTcpBinding" bindingConfiguration="NetTcpBinding_IMyAppClientServiceRegular" contract="MyApp.ServiceContracts.IMyAppClientService" name="MyApp_RegularLogin"/> 
```

注意：定期统计这是客户端提供用户名和密码的常规登录（无 Windows 登录）

**编辑 ：**

我关注了这篇文章：http: [//msdn.microsoft.com/en-us/library/ms733069.aspx](http://msdn.microsoft.com/en-us/library/ms733069.aspx)

这就是 Windows 服务类的样子

```
public class MyAppWindowsService : ServiceBase
    {
        public ServiceHost _serviceHost = null;
        public MyAppWindowsService()
        {
            // Name the Windows Service
            ServiceName = "MyAppWindowsService";
        }

        public static void Main()
        {
            ServiceBase.Run(new MyAppWindowsService());
        }

        // Start the Windows service.
        protected override void OnStart(string[] args)
        {
            if (_serviceHost != null)
            {
                _serviceHost.Close();
            }

            // Create a ServiceHost for the CalculatorService type and 
            // provide the base address.
            _serviceHost = new ServiceHost(typeof(MyApp.ServiceImplementation.MyAppClientService));

            // Open the ServiceHostBase to create listeners and start 
            // listening for messages.
            _serviceHost.Open();
        }

        protected override void OnStop()
        {
            if (_serviceHost != null)
            {
                _serviceHost.Close();
                _serviceHost = null;
            }
        }

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T10:04:03.853

问题是我试图连接`localhost/MyAppDev/MyAppClientService.svc/Regular`但它应该是`localhost/MyAppDev/Regular`

# javascript - 使用堆叠布局时将自定义值字段映射到 x 值

> ID：11467196
> 
> 赞同：4
> 
> 时间：2012-07-13T08:54:57.650
> 
> 标签：javascript, layout, svg, stack, d3.js

[我成功映射了 y 值，但是在使用stack layout](https://github.com/mbostock/d3/wiki/Stack-Layout)创建堆叠条形图时，我无法将 x 值映射到我的值上的任意字段。我对 Javascript 和 d3 不是很熟悉；所以我可能在这里遗漏了一些基本的东西。

我的数据数组中的一个值看起来像`{ "xInit": 0, "yInit": 91 }`. 我想在图中映射`xInit`到.`x``yInit``y`

这有效（[由 Bryan Clark 建议](https://stackoverflow.com/a/11512613/322283)）：

```
var st = d3.layout
           .stack()
           .values(function (d) { return d.values; })
           .y(function (v, i) { return v.yInit; })
           .out(function (d, y0, y) { d.x = d.xInit; d.y0 = y0; d.y = y; }); 
```

![这有效，x 坐标取自 value.xInit](../Images/d4847aa411fd66cc8421962aeae7439d.png)

这不会：

```
var st = d3.layout.stack()
           .values(function (d) { return d.values; })
           .y(function (v, i) { return v.yInit; })
           .x(function (v, i) { return v.xInit; }); 
```

![失败！ value.x 返回 NaN](../Images/b4c39b50623aae2282dbe8e3bc52307f.png)

它给出以下警告：

```
Unexpected value translate(NaN,0) parsing transform attribute.
Unexpected value NaN parsing x attribute. 
```

我在这里使用`stack.x([accessor])`不正确吗？那我该怎么用呢？

*细节*

显示我的问题的完整示例可作为基于此[gist的](https://gist.github.com/3103475/)[块](http://bl.ocks.org/3103475)提供。我想根据以下数据创建一个堆积条形图：

```
initialData = [ {
          "name": "apples",
          "values": [{ "xInit": 0, "yInit": 91 }, { "xInit": 1, "yInit": 290 }, { "xInit": 2, "yInit": 120 }]
      },{
          "name": "oranges",
          "values": [{ "xInit": 0, "yInit": 9 }, { "xInit": 1, "yInit": 49 }, { "xInit": 2, "yInit": 37 }]
      }]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T21:09:46.653

我不完全清楚你在这里要做什么，所以这不是一个完整的解决方案，但我会帮助你开始。

`out()`您可以使用该函数操作传出数据以获取`x`您正在寻找的坐标，从而使您的图表发生。

```
var st = d3.layout.stack()
        .values(function(d) { return d.values; })
        .out(function(d, y0, y) {d.x = d.xInit; d.y0 = y0; d.y = y; })
        .y(function (v, i) { return v.yInit; }); 
```

# jquery - JQuery statusCode 404 - 如何获取 jqXhr url？

> ID：11467201
> 
> 赞同：8
> 
> 时间：2012-07-13T08:55:21.657
> 
> 标签：jquery, ajax

我有一个 jquery ajax statuscode 函数来处理 404 ...另一个 Stack Overflow 答案指出，在成功方法中，this.url 给出了请求的 url ...但是，我的情况似乎并非如此状态码处理程序。有任何想法吗？关于如何获取请求的 url，我在文档中看不到任何内容。

我的 ajax 选项对象看起来大致像这样（修剪与此问题无关的代码时可能错过了大括号）

```
;(function($) {
    var defaultSettings = {
     // ... other plugin specific settings
    ajaxOptions:
    {
                    cache:false,
                    context:$(this),
                    statusCode: {
                        404:function(xhr) {

                      // this line...  this.url is always undefined  (so is xhr.url)
                            $('#body').append('<div class="errordisplay">Content not found' + (this.url?': ' + this.url:'') + '</div>');

                    // ... do other stuff

                            return false;

                        }
                    }
            }
} 
```

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-08-16T03:37:39.083

您可以在使用以下代码发送之前修改请求和设置对象：

```
$.ajaxSetup({
    beforeSend: function(jqXHR, settings) {
        jqXHR.url = settings.url;
    }
}); 
```

然后`xhr.url`在`statusCode`回调中访问。它应该工作。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-07-13T09:19:30.193

AJAX 事件处理程序的默认上下文（即处理程序中绑定的对象`this`）确实公开了一个`url`属性，因为它是`$.ajaxSettings`传递给[$.ajax()](http://api.jquery.com/jQuery.ajax/)的参数和参数之间的混合。

但是，在您的情况下，您通过传入选项`$(this)`来覆盖该默认上下文。`context`此外，这样做`ajaxOptions`意味着使用当前 URL 扩展该对象并不容易。

我建议在 AJAX 调用之前使用[data()](http://api.jquery.com/data/)或类似方法将 URL 与您的插件正在增强的元素相关联。

# php - 下一张/上一张图片（按用户 ID 和 photo_id）

> ID：11467204
> 
> 赞同：0
> 
> 时间：2012-07-13T08:55:33.900
> 
> 标签：php, mysql, arrays, image, image-gallery

我创建了一个很好的下一个和上一个图像链接。但我希望他们在用户点击他们给定相册中最后上传的图片时都循环回到开头或结尾。

因此，我点击了我创建的专辑，其专辑 ID 为“22”，并且在点击 image243 后，我将上传的图片 - image101、image 202 和 image243 上传到里面。我希望它返回相册的第一张图片 image101。

我想对以前做同样的事情，当我点击 Image101 时，我希望链接返回到 image243。（自我解释）。

每个用户都有自己的相册，他们使用上传的图片创建相册，里面有各种 photo_id，具体取决于给定用户上传的图片数量。所以它不是1,2,3,4的顺序。如果我刚刚向网站上传了一张新图片，它将创建一个 244 的 photo_id，因为这是下一个可用的 photo_id，如果另一个帐户中的另一个用户在他们的帐户下直接在我之后上传了一张图片，他们的照片将有一个 photo_id 245。下面的代码是我到目前为止的代码，下一个和上一个跳转到下一个用户上传的图像，错过了其他用户帐户上传的任何图像。我只需要下一张和上一张不要在最后一张图片之后点击空白页。

我希望我已经清楚地解释了这一点，而不会让任何人头疼。如果我能得到帮助/建议或指导，很乐意回答任何问题。

谢谢

***用于在用户设置相册中选择下一个/上一个用户图像的代码***

```
 <?php if(isset($_GET['pid'])){ ?>
<?php
//Now we'll get the list of the specified users photos

$sql = "SELECT * FROM userphotos WHERE photo_id=".$_GET['pid'];
$query = mysql_query($sql)or die(mysql_error());
while($photo = mysql_fetch_array($query)){
$user=rawfeeds_user_core::getuser($photo['photo_ownerid']);
?>
<p class="frontpage_description"><a href="profile.php?username=<?php echo $user['username']; ?>">
<?php 
$id=$_SESSION['id'];
if($id==$_SESSION['id']){
echo "<img border=\"0\" src=\"imgs/cropped".$id.".jpg\" onerror='this.src=\"img/no_profile_img.jpeg\"' width=\"40\" >";
}
            ?>

<?php echo $user['fullusersname'];?></a></p>
<?php
//Now we'll get the list of the specified users photos

    $sql = "SELECT id FROM albums WHERE user_id=".$user['id']." ORDER BY name ASC LIMIT 1 ";
    $query = mysql_query($sql)or die(mysql_error());

while($album = mysql_fetch_array($query)){ ?>

<?
$photo_sql = "SELECT photo_id FROM userphotos WHERE photo_ownerid = ".$user['id']." AND album_id=".$album['id']." ORDER BY photo_id ASC";
$photo_result = mysql_query($photo_sql) or die(mysql_error());
while($row=mysql_fetch_array($photo_result)) {
   $photos[]=$row[0];
}
$total = mysql_num_rows($photo_result);
print_r($photos);
// Testing example:
// $photos = array(200, 202, 206, 211);
// $total = count($photos);

$current = $_GET['pid']; // whatever your position is in the photo array

if($current > ($total-1) || $current < 0) {
    echo "Error: nonexistent photo ID.";
    exit;
}
echo "<div class='photo_captionholder'><b>Name</b> : ".$photo['photo_name']." | <b>Caption</b> : ".$photo['photo_caption']."</div>";
    echo "<img class='viewer_image' alt='".$photo['photo_name']."' width='60%'  src='";
    echo "include/media.userimage.php?pid=".$photos[$current];
    echo "'\">"; // display current photo

$next = ($current+1) % $total; // modulo
$prev = (($current-1) < 0) ? $total-1 : $current -1;

echo "<a href='photo.php?pid=".$next."'>Next</a>";
echo " | <a href='photo.php?pid=".$prev."'>Prev</a>";
?>
<?php   
}}}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T09:11:55.453

It is not recommended to ask the same question twice, if nothing has changed in your situation. You have documented your question better here, however, so here is a clearer answer for you, with an example, and showing how you have to handle it:

```
$photo_sql = "SELECT photo_id FROM userphotos WHERE photo_ownerid = ".$user['id']." AND album_id=".$album['id']." ORDER BY photo_id ASC"
$photo_result = mysql_query($photo_sql) or die(mysql_error());
while($row=mysql_fetch_array($photo_result)) {
   $photos[]=$row[0];
}
$total = mysql_num_rows($photo_result);

// Testing example:
// $photos = array(200, 202, 206, 211);
// $total = count($photos);

$current = $_GET['pid']; // whatever your position is in the photo array

if($current > ($total-1) || $current < 0) {
    echo "Error: nonexistent photo ID.";
    exit;
}

echo '<img src="images/'.$photos[$current].'.png" alt="my image!" />'; // display current photo

$next = ($current+1) % $total; // modulo
$prev = (($current-1) < 0) ? $total-1 : $current -1;

echo "<a href='photo.php?pid=".$next."'>Next</a>";
echo " | <a href='photo.php?pid=".$prev."'>Prev</a>"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T09:18:28.047

解释：

您的“下一个”查询获取当前图像之后的记录。（即记录 3 将得到 4,5,6）

您的代码从该结果中获得第一条记录。（即4）

将 UNION 查询添加到 PREVIOUS 记录然后将该记录放在查询结果的末尾。（即 4,5,6,1,2） 注意：暂时忽略 LIMIT

如果第一个 SELECT 没有返回记录，那么第一条记录实际上将位于结果的顶部（即，对于记录 6，next 为空，然后是 1,2，因此下一条记录为 1）

下一个

```
$photo_sql = "(SELECT photo_id FROM userphotos WHERE photo_id > ".$_GET['pid']." AND photo_ownerid = ".$user['id']." AND album_id=".$album['id']." ORDER BY photo_id ASC LIMIT 1)";
$photo_sql.= " UNION (SELECT photo_id FROM userphotos WHERE photo_id < ".$_GET['pid']." AND photo_ownerid = ".$user['id']." AND album_id=".$album['id']." ORDER BY photo_id ASC LIMIT 1)"; 
```

以前的

```
$photo_sql = "(SELECT photo_id FROM userphotos WHERE photo_id < ".$_GET['pid']." AND photo_ownerid = ".$user['id']." AND album_id=".$album['id']." ORDER BY photo_id DESC LIMIT 1)";
$photo_sql.= " UNION (SELECT photo_id FROM userphotos WHERE photo_id > ".$_GET['pid']." AND photo_ownerid = ".$user['id']." AND album_id=".$album['id']." ORDER BY photo_id DESC LIMIT 1)"; 
```

我已将第二个查询添加到第一个 .= 并反转 photo_id 检查 > 变为 <

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T09:15:08.697

为此，我写了一个查询。看看能不能根据自己的要求改

```
select
  users_id as ID,
  (select  users_id from users where users_id > ID limit 1) as NextID,
  (select  users_id from users where users_id < ID ORDER BY users_id DESC limit 1) AS PreviousID
from users
where users_id = 1 
```

# css - Dojo GFX 小部件显示类似于浮动的行为而不是正确的定位

> ID：11467207
> 
> 赞同：0
> 
> 时间：2012-07-13T08:55:58.133
> 
> 标签：css, internet-explorer, dojox.gfx

我正在使用 Dojo GFX 进行一些简单的绘图，但是 IE 7/8 出现问题（不能切换浏览器）。

如果我创建一个 div，设置一个表面并绘制一些矩形，它们相对于 div 正确绘制，到目前为止一切都很好。

但是，我想做的是创建一个小部件，它具有基于某些小部件特定数据绘制的嵌入式“表面”。因此，我有一个包含 div 的小部件，并且我绘制到这个 div 中。当我这样做时，我创建的矩形表现得好像它们在响应 float:right，按照它们的创建顺序出现并忽略“x”参数。

我认为这种行为与 CSS 有关，但我还没有深入了解它。任何想法或解决方案将不胜感激！

* * *

更新：

*   我已经禁用了所有样式表并且我没有使用样式属性。行为没有区别。
*   我检查了使用 IE8 开发工具生成的标记。除了包含 div 的不同位置之外，我能看到的唯一区别是 v:roundrect 元素在针对小部件 div 创建时没有子元素，但在针对 ID 引用的 div 创建时它们确实有空元素，如中风.
*   回顾文档，我可以看到一个可能是负责任的区别是我正在绘制的 postCreate 方法正在操作一个尚未添加到 dom 的 div，而在硬编码的 div 上绘制是在它完成时确实存在。也许渲染的差异与此有关？是否有适合绘制小部件的特定生命周期函数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T10:16:20.720

看来，如果您打算使用 Dojo GFX 并在 IE7/8 中作为小部件的一部分创建的 DOM 元素上绘图，您实际上必须在`startup()`方法的覆盖中进行绘图。

在该方法中绘图`postCreate()`会导致不正确的渲染，类似于`float: left`.

# google-tasks-api - 使用用户名和密码从 Google 帐户获取任务列表

> ID：11467210
> 
> 赞同：0
> 
> 时间：2012-07-13T08:56:06.743
> 
> 标签：google-tasks-api, google-tasks

我正在开发一个桌面应用程序，在分析中我必须从谷歌帐户（根据要求）获取任务列表我没有找到任何方法来完成它，因为我对谷歌任务 Api 和谷歌提供的文档没有太多了解@ [https://developers.google.com/google-apps/tasks/](https://developers.google.com/google-apps/tasks/)
我没有找到任何身份验证机制（客户输入他的 gmail 帐户的用户名和密码并获取任务），因为我看到它只使用客户端密钥和用户不希望填写的密钥，
所以请建议有没有办法使用客户端的用户名和密码来获取谷歌任务？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T16:52:52.080

首先按照[此处](https://developers.google.com/google-apps/tasks/firstapp)概述的步骤操作，然后查看[授权请求](https://developers.google.com/google-apps/tasks/auth)页面。推荐的方法是 OAuth2，因此用户永远不会向您提供他的用户名和密码，而是会与您共享访问令牌。

# forms - 在 cakephp 表单助手中使用数组作为输入名称

> ID：11467212
> 
> 赞同：0
> 
> 时间：2012-07-13T08:56:09.413
> 
> 标签：forms, cakephp, input, helper

我正在尝试使用 category|productname 值对复选框进行分类。我需要使用 cakephp 表单助手，所以我对如何做到这一点有些无能为力。我尝试使用数组作为输入名称，但出现很多错误：

```
 // Current code:
 $this->Form->input(array("catname","prodname"),array(....)

 // Expected for html:
 <input name="data[formname][catname][prodname]" ... "> 
```

关于如何做到这一点的任何想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-13T09:32:00.153

您可以使用：

```
$this->Form->input('formname.catname.prodname', ...); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-12T16:13:12.713

我也在尝试相同的方法，我只是发现您可以通过这种方式打印带有助手的数组

```
// Current code:
 $this->Form->input('Model.0.object'); 
```

例如，如果您有 10 个与此模型相关的对象，则将打印第一个对象，1、2 等相同。

# iphone - 从密钥链中的密钥对中提取公钥

> ID：11467215
> 
> 赞同：8
> 
> 时间：2012-07-13T08:56:22.800
> 
> 标签：iphone, objective-c, ios, rsa, ios5

### 问题：检索公钥

对于 iPhone 应用程序，我需要创建一个 rsa 密钥对，将其存储在密钥链中并检索公钥。

幸运的是，Apple 发布了一个[加密练习](http://developer.apple.com/library/ios/#samplecode/CryptoExercise/Introduction/Intro.html)示例，可以找到我需要的所有内容（类*SecKeyWrapper*、函数*generateKeyPair*和*getPublicKeyBits*）。

但是在尝试使用这些功能之后，对于不同的密钥对，我的公钥总是得到相同的输出（而不是不同密钥对的不同公钥位）。

### 我的 generateKeyPair 和 getPublicKeyBits 函数的实现：

*我首先通过调用generateKeyPairWithKeySizeInBits*创建一个密钥对（这似乎工作正常），然后我用*getPublicKeyBits*和 NSLog提取公钥位......

```
- (void) generateKeyPairWithKeySizeInBits:(int)bits withPublicIdentifier:(NSString     *)publicIdentifier andPrivateIdentifier:(NSString *)privateIdentifier
{

    NSLog(@"begin generating key...");
    OSStatus status = noErr;

    NSMutableDictionary* privateKeyAttr = [[NSMutableDictionary alloc] init];
    NSMutableDictionary* publicKeyAttr = [[NSMutableDictionary alloc] init];
    NSMutableDictionary* keyPairAttr = [[NSMutableDictionary alloc] init];

    NSData* publicTag = [publicIdentifier dataUsingEncoding:NSUTF8StringEncoding];
    NSData* privateTag = [privateIdentifier dataUsingEncoding:NSUTF8StringEncoding];

    SecKeyRef publicKey = NULL;
    SecKeyRef privateKey = NULL;

    [keyPairAttr setObject:(__bridge id) kSecAttrKeyTypeRSA forKey:(__bridge id) kSecAttrKeyType];
    [keyPairAttr setObject:[NSNumber numberWithInt:bits] forKey:(__bridge id) kSecAttrKeySizeInBits];

    [privateKeyAttr setObject:[NSNumber numberWithBool:YES] forKey:(__bridge id) kSecAttrIsPermanent];
    [privateKeyAttr setObject:privateTag forKey:(__bridge id) kSecAttrApplicationTag];

    [publicKeyAttr setObject:[NSNumber numberWithBool:YES] forKey:(__bridge id)kSecAttrIsPermanent];
    [publicKeyAttr setObject:publicTag forKey:(__bridge id)kSecAttrApplicationTag];

    [keyPairAttr setObject:privateKeyAttr forKey:(__bridge id)kSecPrivateKeyAttrs];
    [keyPairAttr setObject:publicKeyAttr forKey:(__bridge id)kSecPublicKeyAttrs];

    SecItemDelete((__bridge CFDictionaryRef)keyPairAttr);

    status = SecKeyGeneratePair((__bridge CFDictionaryRef) keyPairAttr, &publicKey, &privateKey);

    if(status != noErr){
        NSLog(@"status = %@",status);
    }
    if(publicKey){
        NSLog(@"public key %@",publicKey);
    }

    if(privateKey){
        NSLog(@"private key %@",privateKey);
    }

    [self getPublicKeyBits:publicIdentifier];
}

- (NSData *)getPublicKeyBits: (NSString*) publicKeyIdentifier {

    OSStatus sanityCheck = noErr;
    NSData * publicKeyBits = nil;
    CFTypeRef pk;
    NSMutableDictionary * queryPublicKey = [[NSMutableDictionary alloc] init];

    NSData* publicTag = [publicKeyIdentifier dataUsingEncoding:NSUTF8StringEncoding];

    // Set the public key query dictionary.
    [queryPublicKey setObject:(__bridge_transfer id)kSecClassKey forKey:(__bridge_transfer id)kSecClass];

    [queryPublicKey setObject:publicTag forKey:(__bridge_transfer id)kSecAttrApplicationTag];
    [queryPublicKey setObject:(__bridge_transfer id)kSecAttrKeyTypeRSA forKey:(__bridge_transfer id)kSecAttrKeyType];
    [queryPublicKey setObject:[NSNumber numberWithBool:YES] forKey:(__bridge_transfer id)kSecReturnData];

    // Get the key bits.
    sanityCheck = SecItemCopyMatching((__bridge_retained CFDictionaryRef)queryPublicKey, &pk);
    if (sanityCheck != noErr)
    {
        publicKeyBits = nil;
    }
    publicKeyBits = (__bridge_transfer NSData*)pk;
    NSLog(@"public bits %@",publicKeyBits);

    return publicKeyBits;
} 
```

### 输出（“公共位”部分（最后一行）始终相同）：

```
2012-07-13 10:39:28.391 [12279:707] begin generating key...
2012-07-13 10:39:39.376 [12279:707] public key <SecKeyRef: 0xeb56e00>
2012-07-13 10:39:39.381 [12279:707] private key <SecKeyRef: 0xeb57800>
2012-07-13 10:39:39.397 [12279:707] public bits <3082010a 02820101 00ea41ec 12780dff 20a55d67 62ec9890 028ed031 eccd1163 5b4bd039 01adffb5 766f37b8 31be8d03 4a41240b 4e127b75 bc4dd8fb 5b404d4d ad18d711 5cf64a04 61c49970 1fef5434 215f80e4 efee8894 1f282f77 8ea5f7e3 35673260 80ee5f80 818d19d3 b7b15e5c f013ad7d 5ff5dd33 b3e57544 de50dc02 f28aa2ae d4b9590a 1e71bd05 79e81fb7 2a9cd592 cf412fe1 db7a89d4 05bd1731 f95f7aae 56ec4171 e9f352ec c26c3c15 05a0e84b 16c5e89d cec8b1a3 24365d4e dcea88a2 92d8c2e6 8f0e9aee e83703bc e66418af aa9dceea 1129f669 cf069b87 edde4cf7 5e313212 80f44e04 d5b5e2db 9e7f26ae 9b8ef8ee 2e177702 18673b1a f125d3c8 d9ddf978 fb020301 0001> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-14T07:03:18.317

因此，您的 SecItemDelete 代码无法按预期工作。如果您想删除钥匙串中的所有项目（显然是出于测试目的），您应该查看`-[Credentials resetCredentials]`AdvancedURLConnections 示例代码中的方法中的代码。

[https://developer.apple.com/library/ios/#samplecode/AdvancedURLConnections/](https://developer.apple.com/library/ios/#samplecode/AdvancedURLConnections/)

您可能还会`-dumpCredentials`在调试期间发现该方法很方便。

所以 SecItemDelete 的问题意味着每次运行应用程序时 SecKeyGeneratePair 都会生成一组新的密钥。这些键中的每一个都具有相同的应用程序标记，因此无法确定您在 - 中的 SecItemCopyMatching 调用返回哪个键`getPublicKeyBits:`。事实证明，在当前的系统软件上，您总是会取回第一个密钥，因此您总是会获得相同的公钥位。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-17T09:23:45.960

公钥将有两个分量指数和模数。你可以试试这个

获取 PublickeyBits 方法后

```
- (NSData *)getPublicKeyExp
{
NSData* pk = [self getPublicKeyBits];
if (pk == NULL) return NULL;

int iterator = 0;

iterator++; // TYPE - bit stream - mod + exp
[self derEncodingGetSizeFrom:pk at:&iterator]; // Total size

iterator++; // TYPE - bit stream mod
int mod_size = [self derEncodingGetSizeFrom:pk at:&iterator];
iterator += mod_size;

iterator++; // TYPE - bit stream exp
int exp_size = [self derEncodingGetSizeFrom:pk at:&iterator];

return [pk subdataWithRange:NSMakeRange(iterator, exp_size)];
return pk;
}
- (NSData *)getPublicKeyMod
{
NSData* pk = [self getPublicKeyBits];
if (pk == NULL) return NULL;

int iterator = 0;

iterator++; // TYPE - bit stream - mod + exp
[self derEncodingGetSizeFrom:pk at:&iterator]; // Total size

iterator++; // TYPE - bit stream mod
int mod_size = [self derEncodingGetSizeFrom:pk at:&iterator];

return [pk subdataWithRange:NSMakeRange(iterator, mod_size)];
return pk;
NSLog(@"public size: %d",pk.length);
}

- (int)derEncodingGetSizeFrom:(NSData*)buf at:(int*)iterator
{
const uint8_t* data = [buf bytes];
int itr = *iterator;
int num_bytes = 1;
int ret = 0;

if (data[itr] > 0x80) {
    num_bytes = data[itr] - 0x80;
    itr++;
}

for (int i = 0 ; i < num_bytes; i++) 
    ret = (ret * 0x100) + data[itr + i];

*iterator = itr + num_bytes;
return ret;
} 
```

# objective-c - iOS 在每个 ViewController 或任何 View 中使用一个通用 UIView 作为 newsScroller

> ID：11467227
> 
> 赞同：0
> 
> 时间：2012-07-13T08:57:03.807
> 
> 标签：objective-c, ios, ios5

我试图找到这个问题的答案，但找不到。

我正在开发一个使用 tabBarController 作为主导航的应用程序，并且每个选项卡中也有 navigationControllers。

我想在每个屏幕上的导航栏下制作一个 30 像素高的新闻滚动视图，但是这个滚动条应该是应用程序级别的，因为它应该在每个视图上显示相同的文本，并且应该同时更改文本。我不认为制作 9 个 scrollerView 并以某种方式连接它们不是最好的方法。

在iOS中有什么解决方法吗？

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T09:02:54.270

可能是您将您的股票代码添加到主视图中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T09:12:51.287

为了将滚动视图保留为子视图，是否可以对 tabBarController 进行子类化？简单地说，就架构而言，它可以解决问题。但它不可能像我想的那样容易执行。（我不是界面朋友）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T09:20:56.790

可能最好的方法是继承 UIViewController 并在视图顶部添加滚动视图（导航栏下方）。之后，将 scrollView 实例与单个（应用程序范围的）scrollView 数据模型实例连接起来，例如使用 KVO 或 Notifications 技术。这种方法应该适合 MVC 模式。

# configuration - Jenkins：在电子邮件中构建矩阵作业的错误？

> ID：11467234
> 
> 赞同：2
> 
> 时间：2012-07-13T08:57:26.303
> 
> 标签：configuration, jenkins, error-logging

我们已经设置了一个矩阵作业，它为多个配置构建我们的项目，即发布和调试。如果这些子作业之一失败，“扩展电子邮件通知”插件会发送以下邮件 (${BUILD_LOG_REGEX})：

```
Build log lines matching "error," "failed," etc:
[...truncated 5 lines...]
Release completed with result FAILURE
[...truncated 1 lines...]
Debug completed with result FAILURE
Email was triggered for: Failure
Sending email for trigger: Failure 
```

我们如何将子作业中的实际错误消息发送到电子邮件中？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-14T00:25:24.217

要获取邮件中的部分日志（如果不是全部），请将“扩展电子邮件通知”设置为为每个失败的作业发送单独的电子邮件，并在邮件正文中使用**$BUILD_LOG**：

1.  在多配置作业中，“*可编辑电子邮件通知*”的最后一个参数是“*矩阵项目的触发器*” - 将其设置为“**每个配置的触发器**”。
2.  在消息正文中（在 '$DEFAULT_CONTENT' 下方）添加参数**$BUILD_LOG** 以显示构建日志的结尾
3.  假设日志是纯文本的，将“*内容类型*”更改为**纯文本**

有关内置 Jenkins 参数的列表，请转到此页面：

http://[your-jenkins-server] **/env-vars.html**

干杯

# android - 在 Eclipse (android sdk) 中创建一个新的 AVD

> ID：11467236
> 
> 赞同：0
> 
> 时间：2012-07-13T08:57:39.750
> 
> 标签：android, eclipse, avd

有什么区别，当我们在 Eclipse 中创建新的 avd 时，在下拉**CPU/ABI**中选择：`ARM(armeabi-v7a) or choose Intel Atom(x86)` 因为我正在创建一些具有不同分辨率的 AVD 以模拟不同移动设备的屏幕，而我总是选择 ARM（ armeabi-v7a) 但我不知道为什么哈哈我想知道不同。最好的问候，丹尼尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T09:02:54.253

据我所知，对于某些版本，例如 4.0.3，您可以在使用 Intel Atom 时启用硬件加速。见[这里](http://keyable.blogspot.hk/2012/06/intel-atom-android-ice-cream-sandwich.html)。

# c# - 如何正确使用 StreamWriter 类？

> ID：11467240
> 
> 赞同：10
> 
> 时间：2012-07-13T08:57:44.943
> 
> 标签：c#, streamwriter

我正在使用`StreamWriter`类进行文件操作，这段代码中是否有我没有看到的问题？

比如我需要把它放到一个`try catch finally`块中吗？

```
StreamWriter sr = new StreamWriter(streamFolder);
sr.Write(details);

File.SetAttributes(streamFolder, FileAttributes.Hidden);
sr.Close(); 
```

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-07-13T09:12:48.717

你的代码有什么问题？如果在关闭流之前发生异常，则流将保持打开状态，并且不会释放系统资源：

```
StreamWriter sr = new StreamWriter(streamFolder);
sr.Write(details);
// some exception occurs here 
File.SetAttributes(streamFolder, FileAttributes.Hidden);
sr.Close(); 
```

因此，您需要确定该流将被关闭。这可以通过`try...finally`块来实现：

```
StreamWriter sr = new StreamWriter(streamFolder);

try 
{
   sr.Write(details);
   // some exception occurs here 
   File.SetAttributes(streamFolder, FileAttributes.Hidden);
}
finally
{
   sr.Close();
} 
```

但是 StreamWriter 实现了[IDisposable](http://msdn.microsoft.com/en-us/library/aax125c9)接口，因此您可以让 C# 编译器通过将编写器用法包装到`using`块中来自动为您完成：

```
using(StreamWriter sr = new StreamWriter(streamFolder)) 
{
   sr.Write(details);
   // some exception occurs here 
   File.SetAttributes(streamFolder, FileAttributes.Hidden);
} 
```

此代码将编译为：

```
StreamWriter sr = new StreamWriter(streamFolder);

try 
{
   sr.Write(details);
   // some exception occurs here 
   File.SetAttributes(streamFolder, FileAttributes.Hidden);
}
finally
{
   if (sr != null)
      sr.Dispose();
} 
```

手动实现之间的唯一区别是 null-check 和方法`Dispose`被调用而不是`Close`. 但实际上当您调用`Close()`或`Dispose()`执行相同的代码时：

```
this.Dispose(true);
GC.SuppressFinalize(this); 
```

您可以阅读有关[Dispose 方法实现](http://msdn.microsoft.com/en-us/library/fs2xkftw)的更多信息。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-13T09:00:38.170

您可能应该使用 using 语句：

```
using (StreamWriter sr = new StreamWriter(streamFolder))
{
    sr.Write(details);
    File.SetAttributes(streamFolder, FileAttributes.Hidden);
} 
```

在 using 块结束时，将调用 StreamWriter.Dispose，无论是出现异常还是代码运行成功。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-07-13T09:00:02.217

你想使用：

```
 using (StreamWriter sr = new StreamWriter(streamFolder))
  {
      sr.Write(details); 

      File.SetAttributes(streamFolder, FileAttributes.Hidden); 
  } 
```

你不需要`Close`.

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-07-13T09:01:23.153

将其包裹在一个`using`块中

```
using(StreamWriter sr = new StreamWriter(streamFolder))
{
      sr.Write(details);
      File.SetAttributes(streamFolder, FileAttributes.Hidden);
} 
```

确保你的命名是好的，所以`streamFolder`应该是一个`fName`. 如果您觉得可以处理一些 IO（或其他）异常，您也可以将此代码放入 try-catch-finally：

```
StreamWriter sr;
try
{
    sr = new StreamWriter(streamFolder);
    sr.Write(details);
    File.SetAttributes(streamFolder, FileAttributes.Hidden);
}
catch(IOException ex)
{
    //handling IO
}
finally
{
    if (sr != null)
        sr.Dispose();
} 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-07-13T09:01:08.423

System.IO.StreamWriter 是一个 System.IDisposable

你必须处理它。你为什么要关闭你不打开的东西？

# iphone - UIAlertView 中的 UITextView 大文本

> ID：11467244
> 
> 赞同：2
> 
> 时间：2012-07-13T08:57:50.397
> 
> 标签：iphone, objective-c, ios, ios4

我有一个`UIAlertView`with `UITextView`。在`ViewDidAppear`我`[textView setText:]`使用大文本时，但警报显示一个空的 textView，并且只有在我触摸 textView 进行滚动后，才会出现文本。

我应该怎么做才能使文本出现在警报的 textView 中，而不滚动它以“刷新”它？

谢谢！

```
- (void)viewDidAppear:(BOOL)animated
{
[super viewDidAppear:animated];

    av = [[UIAlertView alloc]initWithTitle:@"Terms of Service" message:@"\n\n\n\n\n\n\n" delegate:self cancelButtonTitle:@"Disagree" otherButtonTitles:@"Agree",nil];

    UITextView *myTextView = [[UITextView alloc] initWithFrame:CGRectMake(12, 50, 260, 142)];

    [myTextView setTextAlignment:UITextAlignmentCenter];
    [myTextView setEditable:NO];

    myTextView.layer.borderWidth = 2.0f;
    myTextView.layer.borderColor = [[UIColor darkGrayColor] CGColor];
    myTextView.layer.cornerRadius = 13;
    myTextView.clipsToBounds = YES ;

    [myTextView setText:@"LONG LONG TEXT"];

    [av addSubview:myTextView];

    [myTextView release];

    [av setTag:1];

    [av show]; 
```

}

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-13T09:26:56.710

这是因为您最初将 message 设置为**@"\n\n\n\n\n\n\n"** for `UIAlertView`。设置您的`UITextView`第一个，然后将`UIAlertView`' 消息设置为 textView 的文本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T14:03:03.140

在警报视图中添加 \n 字符代替消息。然后创建一个 UILabel 添加到警报视图。像这样

`UIAlertView * alert = [[UIAlertView alloc] initWithTitle:[NSString stringWithFormat:@"%@\n\n\n", @"Title"] message:@"\n" delegate:self cancelButtonTitle:NEVER_DISPLAY_BUTTON_TEXT otherButtonTitles:nil];`

```
[alert addButtonWithTitle:@"Text"];
[alert addButtonWithTitle:@"Text"];
[alert addButtonWithTitle:@"Text"];
[alert addButtonWithTitle:@"Text"];
[alert show];
newTitle = [[UILabel alloc] initWithFrame:CGRectMake(10,-55,252,230)];
newTitle.numberOfLines = 0;
newTitle.font = [UIFont  systemFontOfSize:15];
newTitle.textAlignment = UITextAlignmentCenter;
newTitle.backgroundColor = [UIColor clearColor];
newTitle.textColor = [UIColor whiteColor];
newTitle.text = [NSString stringWithFormat:@"%@",self.message];
[alert addSubview:newTitle]; 
```

您可能需要调整 Uilable 的大小以匹配警报视图。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-31T08:01:20.940

试试这个：

```
UIAlertView *av = [[UIAlertView alloc]initWithTitle:@"Terms of Service" 
                    message:[NSString stringWithFormat:@"%@ \n\n\n",myTextView.text] 
                    delegate:self 
                    cancelButtonTitle:@"Disagree" 
                    otherButtonTitles:@"Agree",nil
                  ]; 
```

# ruby - 如何在 Ruby 中对 Base64 字符串进行百分比转义？

> ID：11467247
> 
> 赞同：0
> 
> 时间：2012-07-13T08:57:53.053
> 
> 标签：ruby, escaping, uri

在 Ruby 程序中，我的密码是 Base64 字符串，因此可以包含正斜杠。我使用该密码和用户名来执行 HTTP 请求

```
username = "User"
password = "/Base/64/With/Slashes"
requestUrl = "http://#{username}:#{password}@company.com"
response = RestClient.get(requestUrl) 
```

因此，如果`password`碰巧包含正斜杠，它们将被解释为 URI 的端口，并且我将收到一条错误消息，指出我的 URI 无效。显然，里面的每个正斜杠都`password`必须替换为`%2F`.

我尝试使用`URI.escape()`，但它不影响正斜杠。

如何百分比转义 Base64 字符串以便结果可用于 HTTP 请求身份验证？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T09:05:35.080

@injekt 在评论中有正确的答案，但这里有一个稍微详细的版本作为答案：

[CGI.escape()](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/cgi/rdoc/CGI.html#method-c-escape)是完成该任务的合适工具。它的文档：

> URL 编码一个字符串。

# c++ - 如何在 Visual Studio C++ 调试器中找出被调试进程的基地址？

> ID：11467251
> 
> 赞同：2
> 
> 时间：2012-07-13T08:58:08.433
> 
> 标签：c++, visual-studio, debugging, executable, base-address

比如说，我刚刚在 Visual Studio C++ 调试器中加载了我的可执行文件并触发了一个断点。我在应用程序崩溃的地方有一个“故障偏移量”，我假设我需要添加到应用程序加载的基地址以获取崩溃的位置。

那么如何从 VS IDE 调试器中获取该基地址呢？

PS。该应用程序未以任何方式编译或更改。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-14T10:08:44.153

`Modules`从`Debug | Windows | Modules`菜单中打开窗口。这显示了所有模块（EXE 和 DLL）的列表并包括它们的加载地址。

# mysql - 您如何使用 Chive 添加外键？

> ID：11467254
> 
> 赞同：2
> 
> 时间：2012-07-13T08:58:17.083
> 
> 标签：mysql, phpmyadmin

我是一名前 PHPMyAdmin 用户，试图了解[Chive](http://www.chive-project.com/ "韭菜")的工作原理。一切都很简单，但我不知道如何添加外键，而且似乎没有太多文档。[PHPMyAdmin 有一个关系视图来添加外键，但我如何对Chive](http://www.chive-project.com/ "韭菜")做同样的事情？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T09:03:49.007

选择您的表，浏览到“结构”选项卡。您应该能够在字段下方看到“关系视图”链接。

注意：如果您有兼容的表引擎（即 InnoDB），您只会看到“关系视图”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-05T12:52:17.273

我将通过我的示例引导您，您可以在此之后找到自己的方法：我有一个 InnoDB 表，其中 product_sku 列是整数并被索引。然后，在表格的“结构”选项卡处于活动状态时，如果我将操作图标悬停在右侧，我将看到：

*   移动 - 主动
*   编辑 - 活跃
*   下降 - 主动
*   主键 - 非活动
*   索引 - 非活动
*   唯一键 - 激活
*   全文索引 - 非活动
*   关系 - 活跃或不活跃

您对最后一个感兴趣，单击它，AJAX 将加载“编辑关系”表单。

# c - 如何在 Linux 中检测通过 GUI 登录的用户

> ID：11467258
> 
> 赞同：2
> 
> 时间：2012-07-13T08:58:45.100
> 
> 标签：c, linux, gnome, xlib

我想在我的程序中捕获通过 GUI 登录的用户名。我的程序从 root 登录作为守护进程运行。如果非 root 用户通过 GUI 登录，我的程序应该会收到通知。我正在粘贴我当前的程序，该程序调用一个 perl 脚本，利用系统调用来检查谁是当前登录的用户。我也在粘贴我的 perl 脚本以供参考。

```
#include <X11/Xlib.h>
#include <X11/Xos.h>
#include <X11/Xfuncs.h>
#include <X11/Xutil.h>
#include <X11/Xatom.h>
int main()
{
    char *user;
    char buf[1024];
    int fd, ret;
    fd = open("/tmp/log", O_TRUNC|O_RDWR|O_CREAT);
    if (!fd) {
        printf("Error opening file\n");
        exit(1);
    }
    chmod("/tmp/log", S_IRUSR | S_IWUSR | S_IXUSR | S_IRGRP | S_IWGRP | S_IXGRP
            | S_IROTH | S_IWOTH | S_IXOTH);
    daemon(0, 0);
    while (1) {
        system("perl /home/curr-usr.pl");
        sleep(5);
    } 
    return 0;
} 
```

用于获取当前用户登录的 perl 脚本。

```
#!/usr/bin/perl
my $result;
$result = `whoami`;
open FH, "+>>", "/tmp/log" or die $!;
print FH "$result ";
close (FH); 
```

在上面的 c 程序中，我每 5 秒在一个 while 循环中调用 perl 脚本。perl 脚本使用命令“whoami”来让当前用户登录并将其转储到 /tmp/log 文件中。

我想要实现的是，如果 user1 登录 perl 脚本应该给我当前用户是 user1。相反，perl 脚本给了我作为当前用户的 root，而不管我通过 GUI 登录的用户是什么，因为我正在使用 root 用户运行 C 程序和 perl 脚本。

谁能告诉我C程序可以通过GUI了解当前用户登录的机制吗？任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2016-10-27T15:28:13.630

您可以像这样使用主显示屏检测用户：

```
#!/bin/bash

#Detect the name of the display in use
display=":$(ls /tmp/.X11-unix/* | sed 's#/tmp/.X11-unix/X##' | head -n 1)"

#Detect the user using such display
user=$(who | grep '('$display')' | awk '{print $1}')

#Detect the id of the user
uid=$(id -u $user) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-16T14:07:53.220

我正在使用 XFCE4 和 LXDM。“谁”和“用户”只报告登录终端的用户。没有像 Nominal Animal 指出的那样报告 GUI 登录（谢谢！）。我使用“pgrep xfce”来检查 XFCE4 是否正在运行。下面打印出当前的 xfce 用户：

```
#!/usr/bin/perl

# Get all processes
my @xfce_processes = `pgrep xfce`;

# If processes exist, get user of first process in list.
if(scalar  @xfce_processes) {
    print `ps -o user h $xfce_processes[0]`;
}
else
{
# No xfce processes. 
     ;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-13T09:04:11.227

正如您提到的，您的程序作为守护程序运行。因此，它产生的任何进程都将以与启动该守护程序的用户相同的用户身份运行。通过 UI（或任何其他方法）登录的用户*永远不会*是您可以通过`whoami`从您的守护进程调用获得的用户。

相反，您应该做的是明确通知您的守护进程登录事件，或者，如果这不是一个选项，请保留当前在盒子上运行的所有登录会话的列表，并查看是否出现新会话 - 这将是一个会话一个新登录的用户。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-02T18:33:43.053

程序`who`并`users`从文件中获取它们的信息`/var/run/utmp`。

该文件包含 N 个大小为“struct utmp”的条目，定义在`<utmp.h>` 您对`USER_PROCESS`类型条目感兴趣。主机字段包含显示。

请注意，如果用户打开一些终端仿真（xterm、konsole...），则同一显示会有多个条目。

您可以监视此文件或`/var/log/wtmp`历史记录

```
struct utmp ut_entry;
FILE    *fp = fopen(UTMP_FILE, "r");

if( !fp )
{
  printf("Could not open utmp file!");
  return;
}

while(fread(&ut_entry, sizeof(struct utmp), 1, fp) == 1)
{
    if(ut_entry.ut_type != USER_PROCESS)
        continue;

    // string entries are not 0 terminated if too long...
    // copy user name to make sure it is 0 terminated

    char tmpUser[UT_NAMESIZE+1] = {0};
    strncpy(tmpUser, ut_entry.ut_user, UT_NAMESIZE);

    // do more stuff... read the display from ut_entry.host
} 
```

有关更多信息，请参阅[utmp 手册页](http://www.kernel.org/doc/man-pages/online/pages/man5/utmp.5.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-18T14:53:03.090

您可能想调查[ConsoleKit](http://www.freedesktop.org/wiki/Software/ConsoleKit)或其更新的化身[loginctl](http://0pointer.de/public/systemd-man/systemd-loginctl.html)。

这些工具专为管理席位和会话而设计，同时保持本地文本控制台、GUI 和远程会话之间的区别。它们*不能*保证出现在每台 X11 机器上，但如果你的机器是相对较新的，它很可能使用其中一种工具或另一种工具。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-06-25T01:43:32.103

对于其他来这里参加 xfce4 的人，我要做的就是运行，`ps -aux | grep xfce4`然后有一行：

`root 2497 0.0 0.3 323052 13408 ? Sl 01:24 0:00 xfce4-session`

我跑`kill -9 2497`了，这摆脱了它。对我来说，这是一个我想从 SSH 中删除的挂起实例。

# javascript - javascript中的parseInt方法返回一个垃圾值

> ID：11467259
> 
> 赞同：2
> 
> 时间：2012-07-13T08:58:48.380
> 
> 标签：javascript, parseint

> **可能重复：**
> [为什么 parseInt(1/0, 19) 返回 18？](https://stackoverflow.com/questions/11340673/why-does-parseint1-0-19-return-18)

我正在从 javascript 中的表达式的结果中解析一个整数。表达式是`(a/b,24)`，并且它在一个方法中，所以我没有检查除以零。我将整数解析为`parseInt(a/b,24)`

但我在里面发现了一个不寻常的东西`when a=1, b=0 the result was 151176378.`

请解释造成这种差异的原因。

感谢任何建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T09:06:58.310

当您运行时，`parseInt(a/b, 24)`您正在尝试解析以`a/b`24 为基数的结果（不知道这个数字系统会是什么样子）。

`a/b`返回将`Infinity`其转换为字符串值`"Infinity"`，然后使用 base 24 进行解析，因此您将获得与`parseInt("Infinity", 24)`. 您将得到`NaN`18 或更小的基数（即`parseInt(1/0, 18)`）的结果。

# jquery - 仅在 Jquery-mobile 中将页面方向修复为横向

> ID：11467260
> 
> 赞同：2
> 
> 时间：2012-07-13T08:58:49.220
> 
> 标签：jquery, jquery-mobile, orientation, landscape

当我将 jquery mobile 用于我的 web 应用程序时，页面的方向如何才能是横向的？

该页面包含一些表格数据，在移动版中无法以纵向模式显示...

看看我的布局.. [http://jsfiddle.net/nY5ZF/1/](http://jsfiddle.net/nY5ZF/1/)

这能修好吗？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-16T05:32:52.410

我们现在在 jquerymobile 1.3.1 中有响应式表，你可以使用它...

[http://jquerymobile.com/demos/1.3.0-beta.1/docs/tables/](http://jquerymobile.com/demos/1.3.0-beta.1/docs/tables/)

与混合应用程序（phonegap）不同，它不可能在 webapps 中锁定方向。有些浏览器在这方面对我们没有帮助。

接下来，您可以以列表格式显示这些数据，或者只检查模式，如果是纵向，则给出一个简单的消息“要查看表格，请使用横向”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-16T04:11:05.243

尝试使用[`orientation`](http://api.jquerymobile.com/orientationchange/)jQuery Mobile 的属性并将其设置为 false。

`jQuery.mobile.orientationChangeEnabled = false;`

这必然会退回到调整窗口大小事件。调整大小可以由`min-width`CSS3处理

[http://jsfiddle.net/nY5ZF/7/](http://jsfiddle.net/nY5ZF/7/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T16:54:18.893

您不能锁定浏览器的旋转，但您可以做的是为一个方向使用不同的样式表，而另一个样式表将在纵向模式下隐藏所有内容。

```
<link rel="stylesheet" type="text/css" href="css/style_l.css" media="screen and (orientation: landscape)">
<link rel="stylesheet" type="text/css" href="css/style_p.css" media="screen and (orientation: portrait)"> 
```

# c# - 新运算符语法失败

> ID：11467261
> 
> 赞同：0
> 
> 时间：2012-07-13T08:58:52.637
> 
> 标签：c#, nhibernate

```
 [Test]
    public void can_generate_schema()
    {
        var cfg = new Configuration();
        cfg.Configure();
        cfg.AddAssembly(typeof(Product).Assembly);
        new SchemaExport(cfg).Execute(false, true, false, false);
    } 
```

我正在阅读 Nhibernate 的教程，上面的代码是我在测试应用程序中运行的。

安装的 VS10 似乎无法识别函数最后一行的 new 运算符，并且总是报错误使用 Execute 方法的错误，该方法不仅需要 4 个参数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T09:03:59.590

好像是版本问题。在 2.1 中只有三个参数。没有格式。去掉最后一个参数

```
new SchemaExport(cfg).Execute(false, true, false); 
```

# javascript - 这些是javascript闭包吗？

> ID：11467262
> 
> 赞同：0
> 
> 时间：2012-07-13T08:58:57.340
> 
> 标签：javascript, jquery

请参阅[JavaScript 闭包如何工作？](https://stackoverflow.com/questions/111102/how-do-javascript-closures-work).

**闭包是：**

*   闭包是函数的局部变量——在函数返回后保持活动状态，或者

*   闭包是一个堆栈帧，它在函数返回时不会被释放（就好像一个'堆栈帧'被malloc'ed而不是在堆栈上！）。

**只是想确认以下是否考虑关闭？**

1）在函数内绑定javascript函数。

```
var Books = {
    init:function(){
        $('#box').bind('click',function(){
           console.log('click'); 
        });
    }
};

Books.init();​ 
```

2) 在函数内声明函数

```
function sayHello(name) {
  var text = 'Hello ' + name;
  var sayAlert = function() { alert(text); }
}   

var hello = sayHello(); 
```

有时我仍然无法区分哪个是闭包，是函数中的所有函数都考虑闭包还是仅将返回的内部函数保留为变量/引用的函数。例子：

```
function sayHello(name) {
  var text = 'Hello ' + name;
  var sayAlert = function() { alert(text); }
  **return sayAlert;**
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T09:00:57.350

1 不是因为没有实际引用变量，2 和 3 是。

在 2 和 3 中，名为 text 的变量被*关闭*- 在其词法范围之外引用。在 1 中什么都没有。

[克罗克福德关闭](http://www.crockford.com/javascript/private.html)：

> 这意味着内部函数始终可以访问其外部函数的变量和参数，即使在外部函数返回之后也是如此。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T09:01:46.843

所有这些都是闭包。

我不确定你的困惑是什么。

# matlab - 我需要消除数组的交替行

> ID：11467265
> 
> 赞同：0
> 
> 时间：2012-07-13T08:59:15.497
> 
> 标签：matlab

我需要消除数组的交替行，就像我有一个 23847X1 的数组，我需要奇数行并最终将其变成 11924X1。它在 .mat 文件中，我也希望在 .mat 文件中得到结果。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T09:02:40.353

试试`yourMatrix(1:2:size(yourMatrix, 2))`。

使用step选择从到的`1:2:N`所有元素。`1``N``2`

一个更完整的例子：

```
> M=[1, 2, 3, 4, 5, 6, 7]
M =

   1   2   3   4   5   6   7

> OddM = M(1:2:size(M, 2))
OddM =

   1   3   5   7 
```

* * *

要在 中加载/存储数据`data.mat`，请遵循以下[H.Muster](https://stackoverflow.com/users/1351522/h-muster)的建议：

```
load('data.mat'); x = x(1:2:end,:); save('data.mat', 'x') 
```

# firefox - 是否不再可能将 Firefox 窗口的大小调整到某个阈值宽度以下？

> ID：11467269
> 
> 赞同：1
> 
> 时间：2012-07-13T08:59:42.067
> 
> 标签：firefox, width

我正在使用最新的 Firefox 测试流畅的布局。

不知何故，在上次更新 FireFox 之后，我似乎不再能够将页面宽度缩小到某个阈值水平以下（在我的情况下为 348 像素）。即使我删除页面上的所有元素，我仍然是 348px。

我试图隐藏所有工具栏和 Firefox 按钮，但仍然没有改变。

如果在 Chrome 中检查页面，则 HTML 宽度会正确报告 = 无论我的浏览器窗口大小调整为什么。

**问题*：这是一个新的“功能”/设置吗？如果是这样，我可以把它关掉吗……这肯定很烦人。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T09:02:40.493

Firefox 14（如果我没记错的话）应该有一个响应式布局工具——你可能想检查一下。

# python - 从数据库中获取这些信息的最有效方法是什么？

> ID：11467270
> 
> 赞同：3
> 
> 时间：2012-07-13T08:59:42.587
> 
> 标签：python, mysql, database

与此问题相关：

[MySQL 的列名中的通配符](https://stackoverflow.com/questions/11466764/wildcards-in-column-name-for-mysql)

基本上，将有可变数量的列名称为“word”。

我想知道的是，对每一行进行单独的数据库调用（通过从信息模式中获取列信息），每行生成一个 Python 查询会更快，还是简单地选择 * 会更快，并且只使用我需要的列？可以说`SELECT * NOT XYZ`吗？据我所知，不，没有办法专门排除列。

一开始不会有很多不同的行——只有三个。但是这有可能无限行。这基本上取决于我们想在我们的网站上放置多少不同类型的搜索查询。我们的整体可扩展性基于扩展行数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T09:06:23.677

如果您所做的只是限制返回的列数，则无需进行动态查询。数据库的艰苦工作是选择与您的`WHERE`子句匹配的行；将 10 列中的 5 列或全部 10 列发送给您几乎没有什么区别。

只需使用“SELECT * FROM ...”并使用 Python 从结果集中挑选列。您将只对数据库使用*一个*查询，因此 MySQL 只需工作一次，然后过滤掉您的列：

```
cursor.execute('SELECT * FROM ...')
cols = [i for i, col in enumerate(cursor.description) if col[0].startswith('word')]
for row in cursor:
    columns = [row[c] for c in cols] 
```

`for row in cursor.fetchall()`根据您的 MySQL python 模块，您可能必须改用。

# c++ - 模板化单例类 - 如何处理私有构造函数

> ID：11467271
> 
> 赞同：3
> 
> 时间：2012-07-13T08:59:46.733
> 
> 标签：c++, templates, constructor, singleton, private

我意识到这已经被谈论了多少次，但我还没有找到适合我的问题的解决方案。我刚刚在我的项目中实现了一个 Meyer 的单例类，但我想用它制作一个模板，以便我可以将它用作例如

`class Game : public Singleton<Game> { /* stuff */ }`

我的班级是这样定义的

```
template <typename T>
class Singleton
{
public:
    static T& Instance();

private:
    Singleton();
    //declare them to prevent copies
    Singleton(Singleton const&);
    void operator=(Singleton const&);

};// END OF CLASS DEFINITION

// METHODS' DEFINITIONS

template<typename T>
T& Singleton<T>::Instance()
{
    static T _instance;
    return _instance;
} 
```

允许 ctor 存在`public`将破坏 Singleton 的整个愿景。

**编辑** 好的，所以我更新了我的`Game`班级以成为朋友`Singleton<Game>`

```
class Game : public Singleton<Game>
{
friend class Singleton<Game>;
//...
} 
```

但现在我有类似的东西：

> 未定义对“Singleton<游戏>::Singleton()”的引用

`Game::Game()`在为空的函数中

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T09:08:44.923

ctor Singleton() -> 受保护？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-13T09:24:05.623

> 允许 ctor 公开将破坏单身人士的整个愿景。

不，不是。`Game`应该有一个私有构造函数。的构造函数`Singleton`无关紧要。的实例`Singleton<Game>`不会帮助任何人获得`Game`您感兴趣的另一个实例。

无论如何，您可以声明构造函数`protected`。或者，您可以保留构造函数`private`并与模板参数成为朋友。除非这在 C++03 中不起作用。不过应该在 C++11 中工作。但是有个小技巧：

```
template <typename T>
struct wrapper
{
    typedef T type;
};

template <typename T>
class Singleton
{
    friend class wrapper<T>::type; 
```

更新：`Game`应该成为朋友`Singleton<Game>`，或者至少`Singleton<Game>::Instance`，允许调用它的构造函数。

# google-analytics - 谷歌分析没有跟踪所有页面浏览量

> ID：11467273
> 
> 赞同：3
> 
> 时间：2012-07-13T08:59:51.967
> 
> 标签：google-analytics

Google Analytics 实际上有多精确？多年来，我一直在一个访问量很大的网站上使用谷歌分析（每月访问量超过 80 万次）。

现在我决定在数据库表中记录每个页面请求，并且我正在跟踪请求的用户代理。我还消除了机器人请求（googlebot、bingbot 等等……）

我发现，我对页面的请求几乎是 Google Analytics（分析）页面浏览量愿意承认的两倍多。

例如，GA 显示特定 URL 的 137 次网页浏览，但我什至跟踪了 255 次！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-13T10:43:21.237

谷歌分析非常精确。虽然不是很准确。这就是您所看到的差异，因为您不是在研究趋势，而是在研究绝对数字。

首先阅读 Avinash 的这篇文章：

[思考：准确性、精确度和预测分析](http://www.kaushik.net/avinash/emetrics-dc-07-reflections-accuracy-precision-predictive-analytics/)

如今，机器人无处不在，而且很多时候伪装成真正的用户代理。您应该进行测试以确保客户端同时启用了 javascript 和 cookie。在这种情况下，他将被 Google Analytics 跟踪。

除此之外，一些用户可能拥有阻止 Google Analytics 的 adBlocks 扩展。这相当罕见，但取决于公众可能更常见。精通技术的用户有更高的机会使用阻止 GA 的插件，因此 IT 博客可能比一般网站更难受此打击。

测试 Google Analytics 的真实准确性（忽略没有 javascript、cookie 和阻止 GA 跟踪的用户代理）的真正准确性的最佳方法是使用 GA 跟踪您网站上的用户。您可以使用 LocalRemoteServerMode 在 Google Analytics 中执行此操作。

在 GATC（GA 跟踪代码）末尾添加以下行：

```
_gaq.push(['_setLocalGifPath', 'http://mysite.com/__utm.gif']);
_gaq.push(['_setLocalRemoteServerMode']); 
```

确保替换`http://mysite.com/__utm.gif`为与您的网站在同一域上的路径并响应 gif。使用轻量级 gif，就像 GA 使用的那样。

然后您可以获取访问此 gif 的日志，并在其参数中查看访问的 url。您需要做一些额外的处理，但您将使用 GA 用于收集数据的相同框架，因此将更有效地测量 GA 精度。

**更多信息：**

[https://developers.google.com/analytics/devguides/collection/gajs/methods/gaJSApiUrchin#_gat.GA_Tracker_._setLocalGifPath](https://developers.google.com/analytics/devguides/collection/gajs/methods/gaJSApiUrchin#_gat.GA_Tracker_._setLocalGifPath)

# sql - SQL 命令未以 DELETE 事务正确结束

> ID：11467278
> 
> 赞同：0
> 
> 时间：2012-07-13T09:00:07.233
> 
> 标签：sql, oracle, stored-procedures, sql-delete

我有 3 张桌子

> FLUX_ISU_FORMULE

```
ID  NUMBER(38,0)
CPT_CODE    VARCHAR2(10 BYTE)
TYPE_ENERGIE    VARCHAR2(12 BYTE)
DATE_MODIFICATION   DATE 
```

> FLUX_ISU_FORMULE_CL

```
ID  NUMBER(38,0)
FRM_ID  NUMBER(38,0) -- FLUX_ISU_FORMULE ID
DATE_DEBUT  DATE
DATE_FIN    DATE 
```

FLUX_ISU_FORMULE_TAB_EQU

```
ID  NUMBER(38,0)
FRM_ID  NUMBER(38,0) -- FLUX_ISU_FORMULE ID
FCL_ID  NUMBER(38,0) -- FLUX_ISU_FORMULE_CL ID
CADRAN  NUMBER(38,0)
EQU_CODE    NUMBER(38,0)
COEFFICIENT NUMBER(38,0) 
```

我必须根据其管理规则从我的表中删除数据：

CADRAN ═ 1 或 4（其他表已删除，无错误消息）。TYPE_ENERGIE 以“EA”开头（EA应该接受大小写），其他类型的能量不集成（其他都是删除表，没有错误信息）。

我这样做

```
DELETE
FROM FLUX_ISU_FORMULE
INNER JOIN FLUX_ISU_FORMULE_CL
ON FLUX_ISU_FORMULE.ID = FLUX_ISU_FORMULE_CL.FRM_ID
INNER JOIN FLUX_ISU_FORMULE_TAB_EQU
ON FLUX_ISU_FORMULE_CL.FRM_ID = FLUX_ISU_FORMULE_TAB_EQU.FRM_ID
AND FLUX_ISU_FORMULE_CL.ID    = FLUX_ISU_FORMULE_TAB_EQU.FCL_ID
WHERE lower(FLUX_ISU_FORMULE.type_energie) NOT LIKE 'ea%'
AND (FLUX_ISU_FORMULE_TAB_EQU.CADRAN <> 1 AND FLUX_ISU_FORMULE_TAB_EQU.CADRAN  <> 4); 
```

我有这个错误：

> Erreur à la ligne de commande : 2, Colonne : 21 Rapport d'erreur : Erreur SQL : ORA-00933: la commande SQL ne se termine pas Correctement 00933\. 00000 - “SQL 命令未正确结束” *原因：
> *操作：

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T09:22:29.040

Oracle 不支持手册中明确记录的 DELETE 语句的 JOIN。

您需要使用共同相关的子选择来重写它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T09:48:50.800

```
DELETE FROM FLUX_ISU_FORMULE  WHERE
(FLUX_ISU_FORMULE.ID) IN
(SELECT FLUX_ISU_FORMULE.ID
FROM FLUX_ISU_FORMULE
INNER JOIN FLUX_ISU_FORMULE_CL
ON FLUX_ISU_FORMULE.ID = FLUX_ISU_FORMULE_CL.FRM_ID
INNER JOIN FLUX_ISU_FORMULE_TAB_EQU
ON FLUX_ISU_FORMULE_CL.FRM_ID = FLUX_ISU_FORMULE_TAB_EQU.FRM_ID
AND FLUX_ISU_FORMULE_CL.ID    = FLUX_ISU_FORMULE_TAB_EQU.FCL_ID
WHERE lower(FLUX_ISU_FORMULE.type_energie) NOT LIKE 'ea%'
AND (FLUX_ISU_FORMULE_TAB_EQU.CADRAN <> 1 AND FLUX_ISU_FORMULE_TAB_EQU.CADRAN  <> 4));
COMMIT; 
```

# javascript - 在 gmail Ui 中添加小部件/控件，例如回旋镖/条纹

> ID：11467280
> 
> 赞同：2
> 
> 时间：2012-07-13T09:00:16.977
> 
> 标签：javascript, gmail, widget, google-gadget, gmail-contextual-gadgets

我正在考虑在 Gmail 中开发一个小部件并按需执行操作的想法。

就像选择一行文本单击我的按钮应该在列表上创建一个任务（比如 asana.com）

我目前正在调查[https://developers.google.com/google-apps/gmail/contextual_gadgets](https://developers.google.com/google-apps/gmail/contextual_gadgets)

但想知道我正朝着正确的方向前进吗？

检查这个 - [http://www.streak.com/](http://www.streak.com/)他们甚至有自定义 UI（在 gmail 的主视图中）。

如果您共享良好的资源并指出方向，那将非常有帮助。

例如：

![回旋镖](../Images/272a0b05608d092f5f3e4569b7eb33e0.png)

![条纹](../Images/2cede63391f2f97c0ad47d0f9306082e.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-13T18:49:23.260

Gmail 上下文小工具（仅适用于 Google Apps Gmail，而不适用于“常规”@gmail.com Gmail）可能不会修改 Gmail 用户界面 - 它们仅限于显示在收到的邮件下方的矩形区域中。

有关示例，请参见 www.wishery.com。

要进行您说明的 UI 修改，您必须生成一个浏览器扩展 - 没有本地 Google API 可以帮助您（可悲！）Gmail。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T09:10:01.097

还有侧边栏小工具（用于复杂的应用程序），例如屏幕截图的“管道”。

在这里您可以找到更多信息。

[https://developers.google.com/google-apps/gmail/gadgets_overview](https://developers.google.com/google-apps/gmail/gadgets_overview)

# hibernate - 如何修复 JBoss Hibernate 3.6.8.Final 启动异常 (org.hibernate.validator.ClassValidator. )

> ID：11467282
> 
> 赞同：0
> 
> 时间：2012-07-13T09:00:21.013
> 
> 标签：hibernate, jboss

我正在使用 Hibernate 3.6.8.Final 作为部署在 JBoss 4.3 中的项目的一部分，并在启动期间发现以下堆栈跟踪：

```
Caused by: org.hibernate.AnnotationException: java.lang.NoSuchMethodException: org.hibernate.validator.ClassValidator.<init>(java.lang.Class, java.util.ResourceBundle, org.hibernate.validator.MessageInterpolator, java.util.Map, org.hibernate.annotations.common.reflection.ReflectionManager)
        at org.hibernate.cfg.Configuration.applyHibernateValidatorLegacyConstraintsOnDDL(Configuration.java:1681) ~[hibernate-core-3.6.8.Final.jar:3.6.8.Final]
        at org.hibernate.cfg.Configuration.applyConstraintsToDDL(Configuration.java:1653) ~[hibernate-core-3.6.8.Final.jar:3.6.8.Final]
        at org.hibernate.cfg.Configuration.secondPassCompile(Configuration.java:1445) ~[hibernate-core-3.6.8.Final.jar:3.6.8.Final]
        at org.hibernate.cfg.Configuration.buildMappings(Configuration.java:1375) ~[hibernate-core-3.6.8.Final.jar:3.6.8.Final]
        at org.hibernate.ejb.Ejb3Configuration.buildMappings(Ejb3Configuration.java:1519) ~[hibernate-entitymanager-3.6.8.Final.jar:3.6.8.Final]
        at org.hibernate.ejb.EventListenerConfigurator.configure(EventListenerConfigurator.java:193) ~[hibernate-entitymanager-3.6.8.Final.jar:3.6.8.Final]
        at org.hibernate.ejb.Ejb3Configuration.configure(Ejb3Configuration.java:1100) ~[hibernate-entitymanager-3.6.8.Final.jar:3.6.8.Final]
        at org.hibernate.ejb.Ejb3Configuration.configure(Ejb3Configuration.java:689) ~[hibernate-entitymanager-3.6.8.Final.jar:3.6.8.Final]
        at org.hibernate.ejb.HibernatePersistence.createContainerEntityManagerFactory(HibernatePersistence.java:73) ~[hibernate-entitymanager-3.6.8.Final.jar:3.6.8.Final] 
```

我的项目是一个独立的 WAR，不依赖于 JBoss 的持久性。

我能做些什么来修复它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T09:00:22.307

事实证明，它所需要的只是一点 Hibernate 魔法尘埃。persistence.xml 需要具备以下 Hibernate 属性：

```
<property name="hibernate.validator.autoregister_listeners" value="false" />
<property name="hibernate.validator.apply_to_ddl" value="false" /> 
```

希望这可以帮助某人。

如果有人能解释为什么我会很感激。

# javascript - 动态改变 Textarea 背景图片

> ID：11467283
> 
> 赞同：-2
> 
> 时间：2012-07-13T09:00:21.057
> 
> 标签：javascript, html, textarea

我正在尝试动态更改文本区域的背景图像，我的 javascript 代码是

```
function load(){
selectedsecond=localStorage.getItem("selectedimg")
alert("after loading"+selectedsecond);

document.getElementById('notecontent').style.backgroundImage = 'url(' +selectedsecond + ')';
document.getElementById('myimg').src=selectedsecond;
} 
```

这个方法是在body的onload方法上调用的。图像背景（myimg）点发生了变化，但文本区域背景没有改变。请给出一个想法提前谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T09:09:56.530

对我来说效果很好。

[http://jsfiddle.net/8FrLN/](http://jsfiddle.net/8FrLN/)

# django - 在带有中间模型的 mtm 上使用基于类的 UpdateView

> ID：11467287
> 
> 赞同：1
> 
> 时间：2012-07-13T09:00:30.287
> 
> 标签：django, django-models, django-class-based-views

如何说服基于 Django 1.3 类的通用视图：

```
UpdateView.as_view(model=Category,
template_name='generic_form.html',
success_url='/category/') 
```

不要轻易放弃错误：

```
"Cannot set values on a ManyToManyField which specifies an intermediary model." 
```

即使中间模型中的所有字段都有默认值，我也无法保存基于类的通用视图。基于功能的版本看起来也很混乱。姜戈 1.3。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T15:11:49.633

正如贝里斯拉夫·洛帕克所说：

```
class CategoryView(UpdateView):
    model=Category
    def form_valid(self, form):
        self.object = form.save(commit=False)
        IntermediateModel.objects.filter(category = self.object).delete()
        for other_side_model_object in form.cleaned_data['other_side_model_field']:
            intermediate_model = IntermediateModel()
            intermediate_model.category = self.object
            intermediate_model.other_side_model_related_field= other_side_model_object
            intermediate_model.save()
        return super(ModelFormMixin, self).form_valid(form) 
```

[我在这里](https://stackoverflow.com/a/15745652/2165413)回答一些类似的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T15:34:42.950

您应该扩展`UpdateView`并覆盖该`form_valid()`方法以手动保存中间模型。

就个人而言，我从不直接从 URL 模式中使用通用视图，我总是在`views.py`.

# c++ - 如何访问计算机的 RAM 和 ROM 的所有字节？

> ID：11467292
> 
> 赞同：2
> 
> 时间：2012-07-13T09:00:54.893
> 
> 标签：c++, c, memory

我尝试了指针和引用（&）但是当我尝试获取信息时（我只是从内存中读取）计算机“哔”并且程序终止。将指针分配给字节（char *）时没有问题。但是当我读到那台电脑时发出哔哔声。(x=*p;)

Windows XP，1GB + 128 MB 内存。我不知道我的 eproom + eeproms。

我可以使用 System() 函数来使用操作系统命令来访问内存吗？你认识任何人吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-07-13T09:04:49.067

你不能。现代操作系统使用不允许这样做的虚拟模式和内存保护。要访问所有物理 RAM，您很可能需要为现有操作系统编写自己的操作系统或内核驱动程序。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-13T09:07:33.863

你不能这样做，因为你没有权限这样做，当你运行你的代码时，它会创建一个进程来运行你的程序，并且每个进程只能访问它的地址空间，访问其他进程的地址空间会造成陷阱os，你的内核暂停工作并检查你的堆栈和进程，然后它发现你做了一个非特权任务，然后它杀死你的进程

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T09:50:16.213

这应该对我有帮助：

```
typedef struct _MEMORY_BASIC_INFORMATION {
PVOID BaseAddress;
PVOID AllocationBase;
DWORD AllocationProtect;
DWORD RegionSize;
DWORD State;
DWORD Protect;
DWORD Type;
} MEMORY_BASIC_INFORMATION, *PMEMORY_BASIC_INFORMATION; 
```

和这个：

```
VirtualQueryEx(
HANDLE hProcess,
LPCVOID lpAddress,
PMEMORY_BASIC_INFORMATION lpBuffer,
DWORD dwLength
); 
```

至少在我的操作系统中感谢 Bo Persson 和 Jerry Coffin 或 Mysticial

# php - 创建类似于adwords的广告系统

> ID：11467295
> 
> 赞同：0
> 
> 时间：2012-07-13T09:01:08.183
> 
> 标签：php, mysql

我正在尝试编写广告系统。但正如您所知，虚假点击是此类项目的主要问题。

虚假点击是指点击垃圾邮件、代理点击等。

如何使用 php 处理虚假点击？简单地说，寻找库或逻辑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T09:07:03.800

这可能是一项相当复杂的工作，但首先，让我们考虑一些可以跟踪用户的方法：

*   IP 地址，通常是可靠的，但请记住，在一个有 12 个用户的办公室中，他们都可以使用相同的 IP 地址，因为他们共享一个互联网连接。

*   饼干。用户可以将其浏览器设置为不接受 cookie。

*   用户代理。非常不可靠，用户可以轻松更改。

我的建议是使用以上所有内容并将其纳入您的算法。此外，请检查点击之间的持续时间，例如，如果您在 2 分钟窗口内有 4 次点击向用户投放的广告，那么他们可能实施了点击欺诈。

收集已知代理的列表（有些网站提供代理列表）并且不计算来自这些来源的任何点击。

随着时间的推移分析您的数据，以确定哪些情况会导致欺诈性点击并禁止这些点击。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T09:06:37.483

不确定..但也许您可以检查来自同一 IP @一个域的重复点击，甚至是不断刷新页面的某人的 IP？我发现那些人通常是假点击的。

# java - Java - 广泛的信号量使用

> ID：11467297
> 
> 赞同：2
> 
> 时间：2012-07-13T09:01:08.840
> 
> 标签：java, multithreading, concurrency, semaphore

在我编写的服务器中，每个客户端处理程序对象都包含一个用于某些用途的信号量，因为可以有许多客户端处理程序 - 我想知道程序可以容纳的信号量数量是否有限制？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T09:42:10.993

A`java.util.concurrent.Semaphore`是一个标准的 Java 对象，因此与堆中的所有其他对象具有相同的限制。因此，只要您有足够的内存，实例化 more 应该没有问题`Semaphores`。

我觉得奇怪的是，您需要如此大的数字，以至于您甚至会考虑这是否会导致问题。通常，并发程序只有少数几个关键部分必须由不同的信号量保护，并且 Java 中的大多数数据结构都有 Threadsafe 替代方案，这使您的生活比手动同步它们更容易。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T07:53:10.153

操作系统确实限制了应用层可以创建的信号量实例的数量。一个达到这个限制，没有更多的线程可以处于等待状态。此数字特定于操作系统。这是[Windows 的链接](http://msdn.microsoft.com/en-us/library/windows/desktop/ms685129%28v=vs.85%29.aspx)。

# javascript - 如何将文件上传到服务器？

> ID：11467303
> 
> 赞同：3
> 
> 时间：2012-07-13T09:01:19.933
> 
> 标签：javascript, jquery, asp.net-mvc-3

我在项目中使用`Upload File`控制，`MVC-3`

```
<input type="file" name="file" /> 
```

有什么办法或者是否可以手动（以编程方式）将文件分配给这个输入控件？就像是，

`$('input[type=file]').val("filename or address or somethingelse" )`?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-13T09:04:26.643

AFAIK 出于安全原因，您不能通过 JS 选择/分配文件。否则，您可以进入网站，该网站会自动从您的 PC 中选择一些敏感数据文件并自动将其上传到服务器上。

但是，您可以手动选择文件并在选择后通过 JS 自动上传。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T09:04:46.237

由于安全原因你不能这样做

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-13T09:05:40.043

不，由于安全问题，这是不可能的。

您可以做的是使用某种上传器，即[http://valums.com/ajax-upload/](http://valums.com/ajax-upload/)

# android - 记忆配对游戏

> ID：11467306
> 
> 赞同：0
> 
> 时间：2012-07-13T09:01:27.580
> 
> 标签：android, tablelayout

我正在android中开发一个记忆游戏，用户必须匹配正确的卡。我有图像。我应该使用网格视图来显示图像吗？一旦用户点击两个正确的图像，正确的图像必须消失。我应该怎么做做这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T09:53:38.607

使用`GridView`是一个很好的方法。让网格适配器最初返回所有卡片的卡片背面，并跟踪是否需要显示卡片。用于`OnItemClickListener`确定何时选择卡片。在那里，告诉您的适配器需要旋转卡片并告诉网格视图数据已更改 - 重新绘制卡片。然后在适配器中为每个项目保留一个标志，以指示它是否需要显示卡片的背面或实际卡片 - 并在您的`getView`方法中绘制相应的图像。

写一些代码，尝试调试它。当您遇到困难时，请返回并发布一些带有您特定问题的特定代码。

# html - 捕获页面范围内的关键事件

> ID：11467307
> 
> 赞同：1
> 
> 时间：2012-07-13T09:01:29.923
> 
> 标签：html

如何使用 HTML5 捕获网页上的所有键盘事件？如何检查是否按下了 ALT 或 CTRL 键？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T09:03:44.847

绑定`keypress`到`document`. （广泛的问题，广泛的答案）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T09:28:35.320

您可以使用[jQuery keypress 函数](http://api.jquery.com/keypress/)来捕获按键。

检测 Ctrl-S 的示例：

`$(window).keypress(function(event) { if (!(event.which == 115 && event.ctrlKey) && !(event.which == 19)) return true; alert("Ctrl-S pressed"); event.preventDefault(); return false; });`

不同浏览器的键码可能不同，因此您可能需要检查的不仅仅是 115。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-14T06:44:38.120

有一些库专注于捕获全局关键事件，包括用于识别元键（如 control/command/shift）的快捷方式。您可以选择图书馆或向他们学习：

*   [https://keithamus.github.io/jwerty/](https://keithamus.github.io/jwerty/)
*   [https://github.com/madrobby/keymaster](https://github.com/madrobby/keymaster)

# blackberry - eclipse插件无法打包项目

> ID：11467308
> 
> 赞同：0
> 
> 时间：2012-07-13T09:01:29.983
> 
> 标签：blackberry, eclipse-plugin

过了一段时间，它发生了意外错误

`Error: Cannot run program "jar": CreateProcess error=2, The system cannot find the file specified Packaging project OrientalDailyBB failed (took 10.75 seconds)`

我尝试了以下几种方法，

1.  重新安装插件
2.  重新导入项目
3.  创建新项目并将类复制到其中
4.  将 jar 文件复制到 jre7.0\bin
5.  创建新项目而不复制任何东西，它可以运行

我现在不知道。它突然发生了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T10:10:42.837

检查以下链接：

*   [知识库文章 - I/O 错误：CreateProcess](http://supportforums.blackberry.com/t5/Java-Development/I-O-Error-CreateProcess/ta-p/445949)

*   [错误：无法运行程序“jar”：CreateProcess error=2，系统找不到指定的文件](https://stackoverflow.com/questions/7291442/error-cannot-run-program-jar-createprocess-error-2-the-system-cannot-find-t)

*   [这个问题](https://stackoverflow.com/a/1297067/431639)的答案 A [application not getting deploy on Blackberry 模拟器](https://stackoverflow.com/questions/788442/application-not-getting-deployed-on-blackberry-simulator)

*   [I/O Error: Cannot run program "jar": CreateProcess error=2, The system cannot find the file specified Packaging project](http://supportforums.blackberry.com/t5/Java-Development/I-O-Error-Cannot-run-program-quot-jar-quot-CreateProcess-error-2/td-p/1433897)

*   [I/O 错误: 无法运行程序 "jar": CreateProcess error=2, 系统找不到指定的文件](http://supportforums.blackberry.com/t5/Java-Development/I-O-Error-Cannot-run-program-quot-jar-quot-CreateProcess-error-2/m-p/1164433/highlight/true#M162884)

*   [黑莓 JDE：Eclipse I/O 错误：无法运行程序“jar”：CreateProcess 错误=2](http://rndm-snippets.blogspot.com/2011/10/blackberry-jde-eclipse-io-error-cannot.html)

# ruby-on-rails - 每次运行控制器操作时创建自定义日志文件？

> ID：11467311
> 
> 赞同：2
> 
> 时间：2012-07-13T09:01:49.733
> 
> 标签：ruby-on-rails, ruby-on-rails-3, logging, logfiles

**我想在每次运行 true controller#action 时创建一个日志文件，** 以更好地调试应用程序中的复杂控制器操作。

我的控制器：

```
class GameController < extends ApplicationController

def game
   sm_logger.info("Creating new game with id: #{params[:id}")    
end 
```

模型自定义记录器功能：

```
def sm_logger
  @@sm_logger ||= Logger.new("#{Rails.root}/log/sm.log")
end 
```

每次运行时创建一个新的日志文件的好方法是什么？类似于 ( 其中数字是 params[:id] ：

```
* 01/01/2012_1_sm.log
* 01/01/2012_2_sm.log
* 01/01/2012_3_sm.log 
```

任何人都可以指出我正确的方向吗？谢谢！

# xml - 使用触发器将 DB2 行复制到历史表（包含 XML）

> ID：11467313
> 
> 赞同：0
> 
> 时间：2012-07-13T09:02:10.167
> 
> 标签：xml, triggers, db2

我想将包含 XML 列的行复制到历史记录表。似乎不可能做到这一点？！

我试过的：

```
CREATE TRIGGER MARTIN."Pages_I" BEFORE UPDATE OF "tstamp" ON MARTIN."Pages" REFERENCING OLD AS old_row FOR EACH ROW MODE DB2SQL SECURED
INSERT INTO "MARTIN"."HistoryPages" VALUES (old_row."pageId", (SELECT "pageXML" FROM "MARTIN"."Pages" WHERE "pageId" = old_row."pageId" LIMIT 1), old_row."tstamp"); 
```

=> 由于 BEFORE 触发器中的 INSERT 而不允许

```
CREATE TRIGGER MARTIN."Pages_I" AFTER UPDATE OF "tstamp" ON MARTIN."Pages" REFERENCING OLD AS old_row FOR EACH ROW MODE DB2SQL SECURED
INSERT INTO "MARTIN"."HistoryPages" VALUES (old_row."pageId", old_row."pageXML", old_row."tstamp"); 
```

=> 不能引用 old_row."pageXML" 因为它是一个 xml 列

有没有解决这个困境的办法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T11:13:34.403

这似乎没有解决方案，这只是数据库系统的限制。

# android - AndEngine GLES2 调整大小后精灵质量低

> ID：11467315
> 
> 赞同：1
> 
> 时间：2012-07-13T09:02:21.153
> 
> 标签：android, andengine

我有一个 160x160 像素的精灵（在附件中）。

调整大小后，精灵变得不清楚（右图）。

我怎样才能获得正常的质量（中图）？

感谢帮助。

```
BitmapTextureAtlas Texture1 = new BitmapTextureAtlas(null, 1024, 1024, TextureOptions.BILINEAR_PREMULTIPLYALPHA);
mEngine.getTextureManager().loadTexture(Texture1);

ITextureRegion player = BitmapTextureAtlasTextureRegionFactory.createFromAsset(Texture1, this, "player.png", 0, 0); 
```

![在此处输入图像描述](../Images/fa01838fa8f73594dcacb21767928b3c.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T21:36:11.040

你试过其他的`TextureOptions`吗？他们告诉你在调整大小时 AndEngine 将如何解释像素。您有以下选项：

NEAREST <-- 像素可见
NEAREST_PREMULTIPLYALPHA
REPEATING_NEAREST_PREMULTIPLYALPHA

BILINEAR <-- 有点模糊
BILINEAR_PREMULTIPLYALPHA
REPEATING_BILINEAR_PREMULTIPLYALPHA

您当前使用`BILINEAR_PREMULTIPLYALPHA`，但如果您不关心 alpha 通道（透明度），您可以简单地使用`BILINEAR`or `REPEATING_BILINEAR`。稍微玩一下这些设置，以找到最适合您需求的设置。

如果您想了解更多信息，这里有一个指向 AndEngine 论坛中的线程的[链接](http://www.andengine.org/forums/tutorials/compare-4-type-of-textureoptions-t805.html)，其中更详细地解释了这些选项。

问候
克里斯托夫

# c++ - 偏最小二乘库

> ID：11467321
> 
> 赞同：20
> 
> 时间：2012-07-13T09:02:47.680
> 
> 标签：c++, c, statistics, regression, least-squares

已经有这样的问题，但没有回答，所以我尝试再次发布。有谁知道C++（或 C）中[偏最小二乘算法](http://en.wikipedia.org/wiki/Partial_least_squares_regression)的开源实现？或者也许是一个图书馆？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-25T10:13:39.083

1.  [FastPLS](http://www.umiacs.umd.edu/~balajiv/FastPLS.htm)是一个提供 C/C++ 和 MATLAB 接口以加速偏最小二乘的库。它的作者是巴拉吉·瓦桑·斯里尼瓦桑。作者在美国马里兰大学帕克分校的马里兰大学 Ramani Duraiswami 教授的指导下工作。
2.  [基于 NIPALS 算法的偏最小二乘和广义偏最小二乘模型](http://code.google.com/p/plstools/downloads/list)。
3.  使用[矩阵库](http://www.ibm.com/developerworks/library/l-matrix/index.html)如[犰狳自行实现](http://arma.sourceforge.net/)
4.  [PLSNiplas](http://homepages.dcc.ufmg.br/~william/softwares.html#PLSNipals) , [opencv](http://opencv.org/downloads.html)是必需的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-23T11:00:40.647

找到了[PLS NIPALS C++](http://homepages.dcc.ufmg.br/~william/softwares.html)库，但还没有尝试过。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-25T09:57:27.627

[MTK++](http://mtkpp.martinpeters.ie/)是一个药物设计库。

它建立在各种基于矩阵的库之上，例如：

> 基本线性代数子程序 (BLAS)、线性代数包 (LAPACK)、Boost、eigen、Qt、tinyxml 和 xerces-c 库

它有一个[偏最小二乘分量](http://mtkpp.martinpeters.ie/classMTKpp_1_1pls.html)。

它是开源的，但源代码不是在线托管的。你必须[联系作者](http://mtkpp.martinpeters.ie/installation.html#download)才能得到它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-07-24T10:38:27.947

在这里找到这个： [https ://github.com/tjhladish/PLS](https://github.com/tjhladish/PLS)

它是 c++ 并使用 Eigen lib

# objective-c - 目标 c 中的 SOAP 请求格式

> ID：11467322
> 
> 赞同：0
> 
> 时间：2012-07-13T09:02:49.560
> 
> 标签：objective-c, soap, syntax-error

也许这是一个非常简单的问题，但我没有弄清楚。这个的正确版本是什么？

```
[NSString stringWithFormat:
 @"<?xml version=\"1.0\" encoding=\"utf-8\"?>"
 "<soap:Envelope 
 xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" 
 xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\" 
 xmlns:soap=\"http://schemas.xmlsoap.org/soap/envelope/\">"
 "<soap:Body>"
 "<GetQuote 
 xmlns=\"http://www.webserviceX.NET/\">"
 "<symbol>%@</symbol>"
 "</GetQuote>"
 "</soap:Body>"
 "</soap:Envelope>",
 textBox.text
 ]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T09:06:14.003

试试这个：

```
[NSString stringWithFormat:
 @"<?xml version=\"1.0\" encoding=\"utf-8\"?>
 <soap:Envelope 
 xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" 
 xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\" 
 xmlns:soap=\"http://schemas.xmlsoap.org/soap/envelope/\">
 <soap:Body>
 <GetQuote 
 xmlns=\"http://www.webserviceX.NET/\">
 <symbol>%@</symbol>
 </GetQuote>
 </soap:Body>
 </soap:Envelope>",
 textBox.text
 ]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T11:14:30.710

通过以下方式使用它：

```
[NSString stringWithFormat:
      @"<?xml version=\"1.0\" encoding=\"utf-8\"?>"
      "<soap:Envelope "
      "xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\""
      "xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\" 
      "xmlns:soap=\"http://schemas.xmlsoap.org/soap/envelope/\">"
      "<soap:Body>"
      "<GetQuote "
      "xmlns=\"http://www.webserviceX.NET/\">"
      "<symbol>%@</symbol>"
      "</GetQuote>"
      "</soap:Body>"
      "</soap:Envelope>",
      textBox.text
      ]; 
```

# .net - 在 Silverlight 应用程序中使用 TripleDESCryptoServiceProvider 类

> ID：11467327
> 
> 赞同：1
> 
> 时间：2012-07-13T09:03:02.283
> 
> 标签：.net, silverlight, cryptography, tripledes

我使用 Web 服务进行身份验证。并且这个网络服务使用 TripleDes 算法对用户名和密码进行加密。在我的 Silverlight 应用程序中，我必须加密这些值以调用 Web 服务，但我无法添加 System.Security.Cryptography dll 的引用。

如何将此 dll 文件用于 Silverlight 应用程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T15:22:59.837

没有`System.Security.Cryptography`dll之类的东西。

`System.Security.Cryptography`是 Microsoft 发布的多个程序集中的命名空间。万一`TripleDESCryptoServiceProvider`类型存在于里面`mscorlib.dll`。

可悲的是，Silverlight 配置文件不附带`TripleDESCryptoServiceProvider`在它自己的（最小）`mscorlib.dll`内部（或任何其他组件内部）。

但是，您可以从 Mono 项目（MIT X.11 许可）获得完全兼容（且 100% 托管）的[3DES版本。](https://github.com/mono/mono/blob/master/mcs/class/corlib/System.Security.Cryptography/TripleDESCryptoServiceProvider.cs)您只需将源文件（以及它所依赖的其他文件）添加到您自己的项目中，像*普通*桌面 .NET 框架一样重新构建和使用它。

# css - 如何制作一个独立于其他 div 的 div？

> ID：11467328
> 
> 赞同：6
> 
> 时间：2012-07-13T09:03:14.460
> 
> 标签：css

我做了一个像这样顶部有导航菜单的主题；

```
width="100%" height="100" 
```

左侧区域包含高度为 100 像素的客户徽标。但是，他们希望徽标的侧面更大，例如 200 像素。我不想增加我的 div 的大小，相反，我想在 200px-200px 处创建一个新的 div，将徽标放入其中，并将该徽标 div 放在导航 div 上。

我怎样才能制作这样一个独立的div？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-13T09:05:34.027

你是这个意思吗？当然，样式应该在单独的 css 中完成；不在html中！

```
<div id="topnavigation" style = "height:100px;width:100px;position:relative;z-index:5;">
  <div id="logo" style="width:200px;height:200px; position:absolute;z-index:10; top:15px;left:15px;"> <img src ="logo.jpg" width="200px" height="200px"/> </div>
</div> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-13T09:10:21.180

在导航 div 中创建 div，但将其`position:absolute; width:200px; height:200px; top:0; left:0;`放置在导航的左上角而不影响导航的高度。

另一种方法是将徽标放在导航元素**之前**，确实使用相同的样式将它们都定位在相同的页面位置。

例子：

```
#logo{
 position:absolute;
 top:0;
 left:0;
 width:200px;
 height:200px;
}

#navigation{
 position:absolute;
 top:0;
 left:0;
 width:100%;
 height:100%;
}

<div id='logo'></div>
<div id='navigation'></div> 
```

我建议尝试寻找最佳解决方案，因为我看不到您的整个项目。

希望能帮助到你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T09:25:22.410

这是一个给你的示例 jsfiddle：http: [//jsfiddle.net/ZzaZp/](http://jsfiddle.net/ZzaZp/)

并在此处复制代码：

HTML：

```
<div class="navigation">
    <div class="logo">
        <img src="http://placekitten.com/200/200" />
    </div>
</div> 
```

CSS：

```
.navigation{
    height:100px;
    background-color:#f3f3f3;
    position:relative;
}

.logo img{
    width:200px;
    height:200px;
    border:0px;
    display:block;
}

.logo{
    position:absolute;
    width:200px;
    height:200px;
    border:2px solid #eee;
    left:20px;
    top:20px;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-02-01T12:25:45.570

这是对我有用的CSS示例...

```
.logo {
  position: absolute;
  top: 0; 
  left: 0; /* can adjust div position by changing left and top etc */
  width: 100px;
  height: 100px; /* width and height require to place it on top of certain size its an added advantage */
} 
```

# php - 获取数组的值

> ID：11467331
> 
> 赞同：1
> 
> 时间：2012-07-13T09:03:30.277
> 
> 标签：php

我有一个`Array`，当我打印它时，我得到以下输出；

```
Array[{"city":"London","school":"st patrick"}] 
```

现在我想读取保存在变量中的项目`city`并检查它是否`London`处于以下`IF`条件；

```
if ($cityArray['city'] == 'London') {

  echo 'City present';
} 
```

我上面的 if 条件不正确，我没有得到预期的输出。我猜我访问该`city`项目的方式不正确。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T09:08:37.000

这是一个 JSON 字符串，您需要先对其进行解码：

```
$data = json_decode($json); 
```

然后你可以像这样访问元素：

```
for ($i = 0; $i < count($data); $i++) {
    $element = $data[$i];
    echo $element->city;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T09:09:47.420

有几件事。您的数组看起来是 JSON 格式。您需要使用 json_decode 进行解码（在修复数组格式之后）：

```
$jsonArray = Array('{"city":"London","school":"st patrick"}'); // User the correct PHP array format: Array() while the inside elements should be quoted if they're strings.
$cityArray = json_decode($jsonArray[0]); 
```

使用正确的变量引用格式：

```
if ($cityArray->city == 'London') { // $cityArray is an object, so you'll need to use the -> operator to get its "city" property.
    echo 'City present';
} 
```

您尝试访问关联数组的值的方式（通过输入名称以返回值）是正确的，但只需要修复几个格式问题即可。

编辑：添加了数组的索引号以获取 JSON。

# ruby-on-rails - 如何绕过 default_url_options？

> ID：11467339
> 
> 赞同：4
> 
> 时间：2012-07-13T09:03:57.843
> 
> 标签：ruby-on-rails, ruby-on-rails-3, params

在我上一个 Rails 项目中，我必须重写`default_url_options`以`application_controller.rb`始终通过每个请求传递一个参数，如下所示：

```
def default_url_options 
  { :my_default_param => my_param_value }
end 
```

现在每个 url 助手都在每个生成的 url 的末尾附加一个 my_default_param 。例如`user_url(@current_user)`生成一个 url，如：

```
http://www.example.com/users/1?&my_default_param=my_param_value 
```

**但有时我需要在没有 my_default_param 的情况下生成 url**。是否有一些选项可以传递给 url 帮助程序，以便`user_url(@current_user, some_option: some_option_value`) 仅返回：

```
http://www.example.com/users/1?&my_default_param=my_param_value 
```

?

PN：我已经尝试过，`:overwrite_params=> { }`但它不起作用，可能是因为它是在 default_url_options 之前评估的。

**如果没有，是否有另一种方法可以在不附加 my_default_param 的情况下获取 @current_user url？**

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-13T15:30:35.037

`default_url_options` [有一个](http://apidock.com/rails/ActionDispatch/Routing/Mapper/Base/default_url_options) `options`你可以随意使用的参数：

```
def default_url_options( options = {} )

  use_defaults = options.delete( :use_defaults )

  if use_defaults
    { :my_default_param => 'my_param_value' }
  else
    {}
  end

end 
```

或者你可以颠倒逻辑：

```
def default_url_options( options = {} )

  ignore_defaults = options.delete( :ignore_defaults )

  if ignore_defaults
    {}
  else
    { :my_default_param => 'my_param_value' }
  end

end 
```

# jsp - 今天的日期JSP

> ID：11467341
> 
> 赞同：2
> 
> 时间：2012-07-13T09:04:09.547
> 
> 标签：jsp

我发现自己正在处理一些旧的 JSP，并且想做一些简单的事情，比如以 dd/mm/yyyy 格式显示今天的日期

好像没那么简单

到目前为止，我已经导入了 java.util.*

我尝试过各种各样的事情，比如

```
String df = new SimpleDateFormat("dd/MM/yy"); 
```

然而，无济于事……

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-13T14:17:51.207

一种更简洁的方法*是*使用`JSTL`-`<fmt:formatDate/>`标签。

```
<%@ taglib prefix="fmt" uri="http://java.sun.com/jsp/jstl/fmt" %>

<jsp:useBean id="now" class="java.util.Date"/>    
<fmt:formatDate value="${now}" dateStyle="long"/>
<fmt:formatDate value="${now}" pattern="dd-MM-yyyy HH:mm:ss a z" /> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-13T09:09:26.023

你可以使用这个：

```
Calendar now = Calendar.getInstance(); 
```

然后根据需要使用一些日历字段，例如：

```
int dayOfMonth = now.get(Calendar.DAY_OF_MONTH);
String dayOfMonthStr = ((dayOfMonth < 10) ? "0" : "") + month;
int month = now.get(Calendar.MONTH) + 1;
String monthStr = ((month < 10) ? "0" : "") + month;
System.out.print(dayOfMonthStr+"/"+monthStr+"/"+now.get(Calendar.Year)); 
```

为了遵循您最初的想法，我认为您应该执行以下操作：

```
SimpleDateFormat sdf = new SimpleDateFormat("dd/MM/yy");
sdf.format(new Date()); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-13T09:22:52.207

根据您给定的信息，您已导入 java.util.* 库。这还不够。如果你想使用 SimpleDateFormat 你必须导入它。添加

```
<%@page import="java.text.SimpleDateFormat" %> 
```

到您的 jsp 文件的顶部。之后定义你想要得到的格式

例子：`<%! final static String DATE_FORMAT_NOW = "dd/MM/yy"; %>`

之后尝试

```
<%
  SimpleDateFormat df = new SimpleDateFormat(DATE_FORMAT_NOW);
%> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-13T09:23:16.720

首先，您必须将日期设置为

```
Date dNow = new Date( ); 
```

此编码有助于调用日期。现在，我们必须使用编码设置日期格式

```
new SimpleDateFormat ("dd.MM.yyyy"); 
```

这是日期的简单编码。如果您需要对字体和位置进行任何其他更改，那么您可以这样做。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-05-09T20:19:49.787

d 将仅存储当前日期...它有效 `<% long millis=System.currentTimeMillis();
java.sql.Date d=new java.sql.Date(millis); %>`

# php - 在 Sphinx 搜索中合并多个精确查询结果

> ID：11467346
> 
> 赞同：0
> 
> 时间：2012-07-13T09:04:21.400
> 
> 标签：php, mysql, sphinx

我需要在 Sphinx Search (PHP) 中搜索多个完全匹配的关键字。例如，我有关键字（请注意，这些关键字是一次全部查询的）：

“facebook 用户”“google plus 会员”“myspace 粉丝”

结果应该能够为每个关键字返回完全匹配的结果，所有这些都结合在一个结果中。

我希望它显示的结果示例是：

1.  如何解除facebook用户的好友关系
2.  myspace 的粉丝中枪了
3.  快乐的 myspace 粉丝在 youtube 上发布了一段视频
4.  不开心的 google plus 会员
5.  脸书用户自称是警察
6.  有趣的谷歌加成员

请注意，上面的每个结果都与使用的 3 个关键字中的任何一个完全匹配。不知何故，当我在 Sphinx 中尝试它时，它不起作用。这是我在 PHP 中的代码：

```
$sphinx->setMatchMode( SPH_MATCH_EXTENDED2 );
$sphinx->query( '"facebook user" "google plus member" "myspace fan"' ); 
```

我所做的是为每个关键字添加引号以表示我正在搜索完全匹配，并且只是简单地用空格分隔每个关键字。显然，这不起作用，所以我需要一个好方法来解决这个问题。

请帮帮我，不过我对 Sphinx Search 还不是很熟悉。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T06:11:23.897

结帐[扩展查询语法](http://sphinxsearch.com/docs/current.html#extended-syntax)。在您的情况下，您需要 | (OR) 短语之间的运算符。

# c++ - 如何编译Boost多线程程序？

> ID：11467351
> 
> 赞同：3
> 
> 时间：2012-07-13T09:04:40.027
> 
> 标签：c++, multithreading, boost

我安装了boost库。没有多线程一切都很好。我如何编译这个测试程序？

```
#include <boost/thread/thread.hpp>
#include <iostream>
using namespace std; 

void hello_world() {
  cout << "I'm new thread!" << endl;
}

int main(int argc, char* argv[]) {     
  boost::thread my_thread(&hello_world);
  my_thread.join();

  return 0;
} 
```

我用了：`g++ -I/home/user/boost/include testc.cpp`

但是 g++ 给我看：

```
/tmp/ccQtBeSf.o: In function `main':
testc.cpp:(.text+0x5a): undefined reference to `boost::thread::join()'
/tmp/ccQtBeSf.o: In function `__static_initialization_and_destruction_0(int, int)':
testc.cpp:(.text+0xd5): undefined reference to `boost::system::generic_category()'
testc.cpp:(.text+0xdf): undefined reference to `boost::system::generic_category()'
testc.cpp:(.text+0xe9): undefined reference to `boost::system::system_category()'
/tmp/ccQtBeSf.o: In function `boost::thread_exception::thread_exception(int, char const*)':
testc.cpp:(.text._ZN5boost16thread_exceptionC2EiPKc[_ZN5boost16thread_exceptionC5EiPKc]+0x7): undefined reference to `boost::system::system_category()'
/tmp/ccQtBeSf.o: In function `boost::detail::thread_data_base::thread_data_base()':
testc.cpp:(.text._ZN5boost6detail16thread_data_baseC2Ev[_ZN5boost6detail16thread_data_baseC5Ev]+0x1a): undefined reference to `vtable for boost::detail::thread_data_base'
/tmp/ccQtBeSf.o: In function `boost::thread::~thread()':
testc.cpp:(.text._ZN5boost6threadD2Ev[_ZN5boost6threadD5Ev]+0xe): undefined reference to `boost::thread::detach()'
/tmp/ccQtBeSf.o: In function `boost::thread::thread<void (*)()>(void (*)(), boost::disable_if<boost::is_convertible<void (*&)(), boost::detail::thread_move_t<void (*)()> >, boost::thread::dummy*>::type)':
testc.cpp:(.text._ZN5boost6threadC2IPFvvEEET_NS_10disable_ifINS_14is_convertibleIRS4_NS_6detail13thread_move_tIS4_EEEEPNS0_5dummyEE4typeE[_ZN5boost6threadC5IPFvvEEET_NS_10disable_ifINS_14is_convertibleIRS4_NS_6detail13thread_move_tIS4_EEEEPNS0_5dummyEE4typeE]+0x23): undefined reference to `boost::thread::start_thread()'
/tmp/ccQtBeSf.o: In function `boost::detail::thread_data<void (*)()>::~thread_data()':
testc.cpp:(.text._ZN5boost6detail11thread_dataIPFvvEED2Ev[_ZN5boost6detail11thread_dataIPFvvEED5Ev]+0x16): undefined reference to `boost::detail::thread_data_base::~thread_data_base()'
/tmp/ccQtBeSf.o:(.rodata._ZTIN5boost6detail11thread_dataIPFvvEEE[typeinfo for boost::detail::thread_data<void (*)()>]+0x8): undefined reference to `typeinfo for boost::detail::thread_data_base'
collect2: ld returned 1 exit status 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-13T09:06:59.420

您还需要链接 Boost 线程库：

```
g++ -I/home/user/boost/include testc.cpp -L/home/user/boost/lib -lboost_thread 
```

（假设库在`/home/user/boost/lib`.）

# javascript - 来自其他列表的 Sharepoint SPService getListItem

> ID：11467352
> 
> 赞同：0
> 
> 时间：2012-07-13T09:04:40.947
> 
> 标签：javascript, jquery, sharepoint

我正在使用 Sharepoint 2012 和库 SPService、JQuery .....

我有一个名为项目日的列表

在这个列表中，我有一个动态表单，在这个表单中，我有一个名为 Project 的动态字段。

在显示表单中，我的项目带有 ID。

此 ID 是另一个名为 REF_PROJECTS 的列表中的项目 ID。

当我使用项目日的显示形式时，我想将 ID 与其他项目的 ID 相关联。

REF_PROJECTS 字段：ID 名称标题代码

因此，在列表项目日，我想询问列表 REF_PROJECTS，例如查找 ID 335 的名称是什么。

我试过这样：（此时，我只想查看 REF-PROJECTS 中的所有项目），但它没有用

```
 $(document).ready(function() {
  $().SPServices({
    operation: "GetListItems",
    async: false,
    listName: "Announcements",
    CAMLViewFields: "<ViewFields><FieldRef Name='Title' /></ViewFields>",
    completefunc: function (xData, Status) {
      $(xData.responseXML).SPFilterNode("z:row").each(function() {
        var liHtml = "<li>" + $(this).attr("ows_Title") + "</li>";
        $("#tasksUL").append(liHtml);
      });
    }
  });
});
</script>
<ul id="tasksUL"/> 
```

我的网站是这样的

```
 INTRANET 
```

REF_PROJECTS MYFORM 其他 FORM1 FORM2 项目日

您知道如何在此列表中查看其他列表中的所有信息吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T11:20:34.543

您发布的脚本似乎与您所描述的内容没有太大关系。例如，您需要使用正确的 listName。您还应该添加一个 CAMLQuery 子句来过滤您想要的 ID，可能是通过从 URL 中获取它。

# ruby-on-rails - Warden 认证召回 401 Unauthorized

> ID：11467354
> 
> 赞同：4
> 
> 时间：2012-07-13T09:04:44.223
> 
> 标签：ruby-on-rails, authentication, devise

我尝试使用全新的 Rails 应用程序设置设计，我已经使用 gemfile 和捆绑安装正确安装了设计

在使用 rails 安装的设计之后生成设计：安装

使用 rails generate devise user 创建了一个新模型

rake db:migrate 创建用户表

添加 `devise_for :users do get 'users/sign_out', :to => 'devise/sessions#destroy' end`用于使用我的浏览器注销

运行 Rails 服务器

去 localhost:3000/users/sign_up 创建一个新用户

转到 localhost:3000/users/sign_out 将他注销

转到 localhost:3000/users/sign_in 并尝试再次登录他并失败并显示以下内容并将我发送回登录屏幕而不登录

```
Started POST "/users/sign_in" for 127.0.0.1 at 2012-07-13 16:55:28 +0800
  Processing by Devise::SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"cbFEP0FJ/e2XYHfub3ZeI7nEX0nCheXzCDs2ner3Zw8=", "newuser"=>{"email"=>"henghong.lee@gmail.com", "password"=>"[FILTERED]", "remember_me"=>"0"}, "commit"=>"Sign in"}
Completed 401 Unauthorized in 1ms
  Processing by Devise::SessionsController#new as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"cbFEP0FJ/e2XYHfub3ZeI7nEX0nCheXzCDs2ner3Zw8=", "newuser"=>{"email"=>"henghong.lee@gmail.com", "password"=>"[FILTERED]", "remember_me"=>"0"}, "commit"=>"Sign in"}
Rendered /Users/Kinnovate/.rvm/gems/ruby-1.9.3-p194/gems/devise-2.1.2/app/views/devise/shared/_links.erb (1.0ms)
Rendered /Users/Kinnovate/.rvm/gems/ruby-1.9.3-p194/gems/devise-2.1.2/app/views/devise/sessions/new.html.erb within layouts/application (4.9ms)
Completed 200 OK in 175ms (Views: 16.5ms | ActiveRecord: 1.3ms) 
```

如何修复 Completed 401 Unauthorized ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T02:34:20.747

```
attr_accessor :password 
```

似乎是问题的原因，因为该设计似乎没有为模型创建加密密码

# java - 从代码创建方法

> ID：11467358
> 
> 赞同：0
> 
> 时间：2012-07-13T09:05:01.627
> 
> 标签：java, netbeans

我仍然是java的菜鸟，只知道基础知识，我有一个小问题，希望你能帮助我。

我下一段代码在我正在制作的项目中使用了 5 次，为了保持代码简单，我想让它成为一种方法。

在这段代码中我唯一需要更改的是查询，它是唯一的变量。

提前致谢。（对不起，我的英语不好）。

```
Vector columnNames = new Vector();
Vector data = new Vector();
JPanel panel = new JPanel(); //
try {
  Conectar();
  String query = "Select * from Dados";
   stm = (Statement) con.createStatement();
   rs = stm.executeQuery(query);
   ResultSetMetaData metaData = rs.getMetaData();
   int columns = metaData.getColumnCount();
   for (int i = 1; i <= columns; i++) {
   columnNames.addElement(metaData.getColumnName(i));
}
while (rs.next()) {
   Vector row = new Vector(columns);
   for (int i = 1; i <= columns; i++) {
   row.addElement(rs.getObject(i));
}
 data.addElement(row);
}
 rs.close();
 stm.close();
} catch (Exception e) {
 System.out.println(e);
}
JTable table = new JTable(data, columnNames);
TableColumn column;
for (int i = 0; i < table.getColumnCount(); i++) {
column = table.getColumnModel().getColumn(i);
column.setMaxWidth(250);
}
table.setPreferredScrollableViewportSize(new Dimension(600, 400));
table.setEnabled(false);
JScrollPane scrollPane = new JScrollPane(table); panel.add(scrollPane); 
JFrame frame = new JFrame();
frame.add(panel); //adiciona o panel à frame
frame.setResizable(false);
frame.setSize(640, 480); //define o tamanho da frame
frame.setLocationRelativeTo(null);
frame.setVisible(true); //torna a frame visivel
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T09:09:27.000

只需将您的代码与

```
public void goodDescriptiveName(String query) {
    ...
} 
```

并删除该行

```
String query = "Select * from Dados"; 
```

从你的代码。然后你就这样称呼它：

```
goodDescriptiveName("Select * from Dados");
goodDescriptiveName("Select * from Next");
... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T09:08:50.603

```
public boolean someAction(String query) {
...
rs = stm.executeQuery(query);
...
return true;
} 
```

如果遇到任何错误，请返回`false`. 如果您不想用 true/false 测试它，只需使用`void`而不是`boolean`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T09:12:42.907

```
public void methodName(String query) {
    Vector columnNames = new Vector();
    Vector data = new Vector();
    JPanel panel = new JPanel(); //
    try {
      Conectar();
       stm = (Statement) con.createStatement();
       rs = stm.executeQuery(query);
       ResultSetMetaData metaData = rs.getMetaData();
       int columns = metaData.getColumnCount();
       for (int i = 1; i <= columns; i++) {
       columnNames.addElement(metaData.getColumnName(i));
    }
    while (rs.next()) {
       Vector row = new Vector(columns);
       for (int i = 1; i <= columns; i++) {
       row.addElement(rs.getObject(i));
    }
     data.addElement(row);
    }
     rs.close();
     stm.close();
    } catch (Exception e) {
     System.out.println(e);
    }
    JTable table = new JTable(data, columnNames);
    TableColumn column;
    for (int i = 0; i < table.getColumnCount(); i++) {
    column = table.getColumnModel().getColumn(i);
    column.setMaxWidth(250);
    }
    table.setPreferredScrollableViewportSize(new Dimension(600, 400));
    table.setEnabled(false);
    JScrollPane scrollPane = new JScrollPane(table); panel.add(scrollPane); 
    JFrame frame = new JFrame();
    frame.add(panel); //adiciona o panel à frame
    frame.setResizable(false);
    frame.setSize(640, 480); //define o tamanho da frame
    frame.setLocationRelativeTo(null);
    frame.setVisible(true); //torna a frame visivel
    } 
} 
```

但我认为应该在其他地方提取 GUI 代码。:)

# android - 文件包含路径分隔符。

> ID：11467359
> 
> 赞同：10
> 
> 时间：2012-07-13T09:05:03.803
> 
> 标签：android, file

当我尝试检查特定文件的存在时，我得到`java.lang.illegalArgumentException: File contains a path separator`

使用 getFileStreamPath(..) 的正确方法是什么？

```
File file = getActivity().getFileStreamPath("mnt/sdcard/photo/1342147146535.jpg");
   if(file.exists()){
     Toast.makeText(getActivity(), "File exists in /mnt", Toast.LENGTH_SHORT);
} 
```

我还尝试了以下方法来替换上述代码的第一行。这些都不起作用。

```
File file = getActivity().getFileStreamPath("file:///mnt/sdcard/photo/aviary_1342147146535.jpg");
            File file = getActivity().getFileStreamPath("/mnt/sdcard/photo/1342147146535.jpg");
//          File file = getActivity().getFileStreamPath("mnt/sdcard/photo/1342147146535.jpg");
//          File file = getActivity().getFileStreamPath("file:///mnt/sdcard/photo/1342147146535.jpg");

            if(file.exists()){
            Toast.makeText(getActivity(), "File exists in /mnt", Toast.LENGTH_SHORT);}
            else {
                Toast.makeText(getActivity(), "File NOT exists in /mnt", Toast.LENGTH_SHORT);} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-03-09T12:54:53.197

当我尝试使用方法 getFileStreamPath 时遇到了同样的问题。我认为它将文件作为参数，而不是整个路径；这就是它抛出异常的原因。我用下面的方法解决了。

```
public static Boolean fileExist(Activity activity , String filePath) {
        String finalPath = activity.getFilesDir().toString() + File.separator + filePath;
        File file = new File(finalPath);
        return file.exists();
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T09:08:45.407

为此编写下面的代码。

```
File file = getActivity().getFileStreamPath("/mnt/sdcard/photo/1342147146535.jpg");
if(file.exists()){
    Toast.makeText(getActivity(), "File exists in /mnt", Toast.LENGTH_SHORT);
} 
```

并按照下面的链接了解更多详情。

[文件路径](https://stackoverflow.com/a/1253866/1466188)

# ios - 在 iOS 横向应用中拍照

> ID：11467361
> 
> 赞同：1
> 
> 时间：2012-07-13T09:05:10.793
> 
> 标签：ios, camera, landscape

我有一个仅在横向模式下运行的应用程序。当我展示相机拍照时，它会将屏幕显示为横向，但实时预览会旋转。当我拍照时，静态预览是正确的。

我试图用这个旋转相机图像：

```
self.navigationController.navigationBarHidden=YES;
UIImagePickerController *picker=[[UIImagePickerController alloc] init];
picker.delegate=self;
picker.sourceType=UIImagePickerControllerSourceTypeCamera;
picker.showsCameraControls=YES;
[picker setCameraFlashMode:UIImagePickerControllerCameraFlashModeOff];
CGAffineTransform transform=picker.view.transform;
transform= CGAffineTransformMakeRotation(-90*M_PI/180);
[picker setCameraViewTransform:transform];
[self presentModalViewController:picker animated:YES];
[picker release]; 
```

现在我以正确的方式获得实时预览，但观看区域很小（可能是因为）它的视图是纵向的？）。仍然预览是正确的。

我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T16:49:53.510

我的方法是强制 UIImagePickerController 显示并**保持**横向模式。真正的 + 是，如果您仅在用户尝试以纵向打开时显示警报，则用户仍然可能以横向开始，但在拍照时旋转为纵向。

```
@implementation UIImagePickerController (noRotation)

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation /* iOS 5 */
{
    return UIInterfaceOrientationIsLandscape(toInterfaceOrientation);
}

- (NSUInteger)supportedInterfaceOrientations /* iOS 6 */
{
    return UIInterfaceOrientationMaskLandscape;
}

@end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T10:08:36.010

现在你想在风景和肖像模式下拍照？如果是这样，下面是我的代码，但这里 Iget preview in portrait mode oly ，如果你想在横向模式下你必须使用自定义方法创建 UIImagePickerViewController 因为预览只会在纵向模式下获得。

但是你可以用你想要的任何一种模式拍照，看看下面的这段代码可能会对你有所帮助..

```
-(void)cameraAction
{
    // Create image picker controller
    UIImagePickerController *imagePicker = [[UIImagePickerController alloc] init];

    // Set source to the camera
imagePicker.sourceType =  UIImagePickerControllerSourceTypeCamera;

    // Delegate is self
imagePicker.delegate = self;

    // Allow editing of image ?
    imagePicker.allowsEditing = NO;

    if ([UIImagePickerController isSourceTypeAvailable:UIImagePickerControllerSourceTypeCamera])
    {
        NSLog(@"called");
        // Show image picker
        [self presentModalViewController:imagePicker animated:YES];  
    }
    else
    {
        UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Error accessing the camera" message:@"Camera did not respond" delegate:nil cancelButtonTitle:@"Cancel" otherButtonTitles:nil]; 
        [alert show]; 
        [alert release];
    }
}

- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info
{

    // Access the uncropped image from info dictionary
    UIImage *image = [info objectForKey:@"UIImagePickerControllerOriginalImage"];
    [picker release];

    [self dismissModalViewControllerAnimated:NO];

    editImageView=[[EditImageViewController alloc] initWithNibName:@"EditImageViewController" bundle:[NSBundle mainBundle]];
    editImageView.delegate=self;
    [self presentModalViewController:editImageView animated:YES];
    [editImageView.imgView setImage:image];
} 
```

# android - 如何检查两个 Android binder 代理对象是否相等？

> ID：11467367
> 
> 赞同：7
> 
> 时间：2012-07-13T09:05:36.640
> 
> 标签：android, android-binder

我有一个关于 Android 的活页夹的问题。如果我理解正确，可以在进程之间传递 Binder。在服务端，有一个Binder对象（原始对象）。在客户端（在单独的进程中），有一个 BinderProxy 对象来处理 AIDL 数据编组。

我的问题是 - 你如何检查两个 BinderProxy 对象是否相等？我的意思是，它们在服务进程中引用相同的 Binder 对象。我们可以使用 equals() 方法吗？BinderProxy 对象是否与原始 Binder 对象具有相同的内存地址？

谢谢！

编辑：

回应大卫·瓦瑟的评论：

我为什么要这样做的原因解释起来有点复杂，但让我看看我能不能解释清楚——

远程服务提供了一个 AIDL API（客户端通过接收 onServiceConnected 中的 IBinder 来获取）。AIDL API，除其他外，包含两种方法——

IBinder getInterface ( String interfaceName );

void releaseInterface ( IBinder binder );

这个想法是客户端应用程序可以为不同接口的绑定器请求远程服务。接口实现的 dex 代码及其绑定器是动态加载到服务中的，并且事先不知道。该服务为客户端应用程序提供这 2 个 AIDL 方法，以根据接口名称访问那些动态加载的接口的绑定器。

所以说有App1和App2。每个都做'binder1 = getInterface（“SomeInterface1”）;' 并为该动态加载的接口“SomeInterface1”获取活页夹。使用后，应用程序通过说'releaseInterface（binder1）;'释放接口绑定器 以便服务可以卸载接口的 dex 代码并进行一些清理。

*但是，除非 App1 和 App2都*释放了接口绑定器，否则无法卸载接口 dex 代码。因此，在服务中，我为每个动态加载的活页夹维护一个引用计数。（比如说一个 Map 键{Binder} ==> value{reference count}）。当应用程序执行 getInterface() 时，我会增加引用计数。当它确实 releaseInterface(binder1) 时，我应该减少引用计数。但是，为此，我需要检查 binder1 是否等于 Map 中的 binder 键。

请注意，活页夹已从服务（原始活页夹对象）传递到客户端应用程序（由 getInterface() 返回的活页夹代理）并再次返回到服务（作为 releaseInterface() 的参数 - 它仍然是代理，还是原本的？？）。

App1 和 App2 可以为相同的接口名称获取不同的绑定器对象（接口的不同实现）。这就是为什么，我使用活页夹进行释放。

希望这不会太混乱！谢谢您的帮助。

卡提克

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-06-04T04:44:36.907

binder 代理对象有一个`asBinder()`方法可以返回底层`IBinder`对象，该对象可用于检查 Binder 代理之间的底层相等性。

我不熟悉该机制，但我看到此方法`LocationManagerService.java`在 Android 源代码中的文件内部用于注册/取消注册`ILocationListener`对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T18:11:30.503

据我所知，没有简单的解决方案。BinderProxy 是 android.os.Binder 中的最后一个类。你可以在[这里](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/1.5_r4/android/os/Binder.java)找到源代码。一种解决方案可能是创建自己的扩展 Binder 的类并创建自己的实现以将 Binder 的实例存储在 BinderProxy 中或以其他方式存储。这很难，因为两个类都没有直接引用另一个类。抱歉，如果我误解了您的问题，或者离这里很远。

# linux - ImageMagick 将 pdf 转换为图像，转换后的页数

> ID：11467369
> 
> 赞同：4
> 
> 时间：2012-07-13T09:05:42.337
> 
> 标签：linux, pdf, imagemagick

我想了解使用 ImageMagick 命令将转换多少页。

```
convert -density 150 -quality 100 -resize 800x "new.pdf" "pdtoimg.jpg" 
```

它返回 6 个名称为`pdtoimg-0.jpg`to的页面`pdtoimg-5.jpg`。

有什么方法可以了解 pdf 中有多少页，或者我可以让它将转换后的页面名称写入数组吗？

如果我想获取文件夹大小，我必须等待所有处理结束。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T10:00:18.603

你可以使用`identify`. 这也是 ImageMagick 命令之一。

```
identify file.pdf
identify -format "%f: %n\n" file.pdf 
```

但是对于 PDF，这可能会**很慢**（因为 ImageMagick 需要使用 Ghostscript 作为 PDF 处理的*委托*，并且 Ghostscript 需要在 IM 能够吐出您感兴趣的信息之前对 PDF 进行完整的解释）。

**使用外部工具会快得多**，它不会读取完整的 PDF，而只会评估其元数据对象：

```
pdfinfo file.pdf
pdfinfo file.pdf | grep Pages:
pdfinfo file.pdf | grep Pages: | awk '{print $2}' 
```

`pdfinfo`是作为 XPDF 包的一部分或作为 Poppler 实用程序的一部分提供的工具（均适用于 Linux、Mac OS X 和 Windows）。

# android - Android：使用图库但使用其他图像打开图像

> ID：11467376
> 
> 赞同：2
> 
> 时间：2012-07-13T09:06:20.870
> 
> 标签：android, android-gallery

我正在寻找一种在 Android 中使用 Gallery 打开图像的方法。所以这就是我正在做的事情：用户点击一个图像，所以我用它的“路径”启动一个意图：

```
Intent intent = new Intent(Intent.ACTION_VIEW);
intent.setDataAndType(path, mimeType);
intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP); 
```

画廊在特定图像上打开。

我的问题是我无法使用 Gallery 滑动到另一张图片。我必须返回我的应用程序并选择下一张图片才能查看它。

我已经看过这个：[特定文件夹中的内置画廊](https://stackoverflow.com/questions/6074270/built-in-gallery-in-specific-folder)，但它会启动文件夹而不是特定图片。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-11-06T17:53:38.887

我的情况非常相似，我使用了与您相同的方法，但不是像您一样设置数据，而是这样做了。画廊打开，我可以像你问的那样刷照片

```
Uri uri = GalleryPreviewButton.getImageContentUri(getContext());
Intent galeryIntent = new Intent(Intent.ACTION_VIEW );
galeryIntent.setDataAndType(uri, "image/*");        
this.startActivity(galeryIntent); 
```

这是我用来从文件中获取 Uri 的方法；

```
public static Uri getImageContentUri(Context context) {
        String filePath = CURRENT_PATH;
        Cursor cursor = context.getContentResolver().query(
                MediaStore.Images.Media.EXTERNAL_CONTENT_URI,
                new String[] { MediaStore.Images.Media._ID },
                MediaStore.Images.Media.DATA + "=? ",
                new String[] { filePath }, null);
        if (cursor != null && cursor.moveToFirst()) {
            int id = cursor.getInt(cursor.getColumnIndex(MediaStore.MediaColumns._ID));
            cursor.close();
            return Uri.withAppendedPath(MediaStore.Images.Media.EXTERNAL_CONTENT_URI, "" + id);
        } else {
            try{
                ContentValues values = new ContentValues();
                values.put(MediaStore.Images.Media.DATA, filePath);
                return context.getContentResolver().insert(
                        MediaStore.Images.Media.EXTERNAL_CONTENT_URI, values);
            } catch (Exception e){
                return null;
            }
        }
    } 
```

# sql - 在结果集中获取记录计数并从其他表中检索一些值

> ID：11467379
> 
> 赞同：0
> 
> 时间：2012-07-13T09:06:27.203
> 
> 标签：sql, sql-server, sql-server-2008, tsql

请考虑这种情况：

我有三个这样的表：我的主表包含详细信息数据：

```
 ID     CityCode          Switch1      Switch2      Price          Desc
 --------------------------------------------------------------------------
 1        202               10            1         2342        Some Desc     
 2        202               10            1          12         Some Desc
 3        202               12            1          22         Some Desc
 4        203               10            1          46         Some Desc
 5        203               12            1          23         Some Desc
 6        203               12            1          12         Some Desc
 7        205               14            1         6758        Some Desc 
```

`ID`是`Identity`库伦并且是`Primary Key`。

另一个表是`CityTypes`：

```
CityCode            CityName             CityType
--------------------------------------------------
  202                City 1                 1
  203                City 2                 2
  204                City 3                 1
  205                City 4                 1 
```

第三个表是`TotalCount`：该表显示应为特定城市中的特定商品插入的总计数记录。

```
 Switch1      Switch2       Name           CityType       TotalCount
 -------------------------------------------------------------------
 10            1           Good 1              1             10
 10            1           Good 1              2             5
 10            1           Good 1              3             3
 11            1           Good 2              1             12
 11            1           Good 2              2             8
 11            1           Good 2              3             5
 12            1           Good 3              1             10
 12            1           Good 3              2             5
 12            1           Good 3              3             3
 13            1           Good 4              1             10
 13            1           Good 4              2             5
 13            1           Good 4              3             3
 14            1           Good 5              1             10
 14            1           Good 5              2             5
 14            1           Good 5              3             3 
```

`Switch1`+ `Switch2`+`CityType`是主键

我想编写一个返回此结果的查询：

```
CityName      GoodName      InsertedCount     TotalCount    InsertedCount-TotalCount
------------------------------------------------------------------------------------
  City 1      Good 1              2              10                   -8 
```

我不知道如何为这个查询关联这些表。我写了这个查询：

```
SELECT CityCode,Switch2,Switch1,COUNT(ID)
FROM   tblMain
GROUP BY  CityCode,Switch2,Switch1
ORDER BY CityCode,Switch2,Switch1 
```

但我不知道如何将其与其他表格联系起来

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T09:15:19.607

尝试这个

```
SELECT 
    ct.Cityname,total.name,COUNT(total.*) as insertedcount,sum(total.totalcount) as totalcount, 
    COUNT(total.*)-sum(total.totalcount) as diff
FROM   
    tblMain as main inner join citytypes as ct on main.citycode=ct.citycode
    inner join totalcount as total on ct.citytype=total.citytype
    and main.switch1=total.switch1 and main.switch2=total.switch2 
GROUP BY  ct.Cityname,total.name
ORDER BY ct.Cityname,total.name 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T09:33:41.313

看一下这个

select ct.cityname, tc.GoodName,COUNT( *) as InsertedCount, sum(tc.totalcount) as TotalCount, COUNT(* )-sum(tc.totalcount) as 'InsertedCount-TotalCount' FROM tblmain tm left join CityTypes ct on ct。 citycode = tm.citycode left join totalcount tc on tc.citytype = ct.citytype and tm.switch1=tc.switch1 and tm.switch2=tc.switch2 group by ct.cityname, tc.GoodName

# ruby-on-rails - 在 Rails 应用程序中编码 id

> ID：11467381
> 
> 赞同：0
> 
> 时间：2012-07-13T09:06:36.297
> 
> 标签：ruby-on-rails

我正在使用 Rails 应用程序。该应用程序具有诸如用户可以添加自定义选项卡并在每个选项卡下添加自定义部分的概念。用户也可以从前端删除这些选项卡或部分。

现在我在删除选项中使用实际的 Tab id / Section id `div id="del_1"` ，所以当用户点击这个 div 时，id 被分离并通过 ajax 请求传递以删除部分或选项卡。

对于这种操作，在前端显示选项卡/部分或任何其他实体的实际 ID 是否正确？

如果不是，我如何在 html 中编码这些数据？我尝试使用 baseencode，但它会产生一些我无法在 html 中真正使用的特殊字符。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T11:51:57.273

如果没有某些安全原因，您需要混淆对象 ID，我不建议您尝试。就我而言，在前端显示对象的实际 id 不仅正确，而且使整个系统更易于理解和开发。

话虽如此，您不应该相信来自客户的信息，因此如果您需要授权/权限系统，请查看[Devise](https://github.com/plataformatec/devise/)或[AuthLogic](https://github.com/binarylogic/authlogic/)。

# svn - SVN删除问题

> ID：11467384
> 
> 赞同：1
> 
> 时间：2012-07-13T09:06:48.497
> 
> 标签：svn, tortoisesvn

我直接从 SVN 的 Repo 浏览器中删除了一个文件**test.aspx.cs。**

但是，当我提交这个 test.aspx.cs 的文件夹时，它会显示冲突错误，尽管服务器上的文件不再存在。

所以我必须取消选中它才能提交其他文件。

如何从对话框中删除此 test.aspx.cs？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-13T09:10:53.593

如果文件在服务器上被删除而不是在本地工作副本中，请尝试在提交之前进行更新。

# asp.net-mvc - 带有构造函数注入和 MEF 的 Asp.net MVC 基本控制器

> ID：11467386
> 
> 赞同：4
> 
> 时间：2012-07-13T09:06:50.963
> 
> 标签：asp.net-mvc, dependency-injection, mef, constructor-injection

我有一个基本控制器类，它向它的子类公开一些日志记录功能。此日志记录依赖项是构造函数注入的。为了提供一些简化的代码，这就是它的样子：

```
public abstract class LogControllerBase : Controller
{
    private readonly ILogger logger = null;

    protected LogControllerBase(ILogger logger)
    {
        this.logger = logger;
    }
} 
```

我的子控制器也有自己的依赖项，因此它们看起来像这样：

```
public class SomeController : LogControllerBase
{
    private readonly IService service = null;

    [ImportingConstructor]
    public SomeController(ILogger logger, IService service)
        : base(logger)
    {
        this.service = service;
    }
} 
```

我正在使用这些构造函数来轻松地在我的单元测试中进行依赖注入，但在生产中，所有组合都（应该）由 MEF 完成。我正在使用我的自定义控制器工厂类，它使用 MEF 来实例化控制器。

**把它们加起来：**

1.  我有一个基本的抽象控制器类，它有自己的依赖项
2.  我有后代控制器，它们使用导入来获取 MEF 注入的参数（即它们的依赖项以及基类的依赖项）
3.  单元测试不使用 MEF，因此将模拟注入构造函数参数

## 问题

这一切对我来说都成立，但 MEF 的想法不同。当我编译并运行这段代码时，我得到了这个异常：

> **在先决条件导入 'SomeController..ctor (Parameter="logger", ContractName="ILogger")' 设置之前，无法调用 GetExportedValue。**

所有用作构造函数参数的接口类型都`InheritedExport`设置了属性并具有具体的实现，因此它应该按预期工作。

## 不同的工作替代方案

当我通过直接在这些私有字段上进行导入来尝试另一种方法时，一切似乎都很好。

```
public abstract class LogControllerBase : ControllerBase
{
    [Import]
    private ILogger logger = null;

    protected LogControllerBase() { }
}

public class SomeController : LogControllerBase
{
    [Import]
    private IService service = null;

    public SomeController() { }
} 
```

所以这可行，但不一样......我可以在这里添加构造函数以进行依赖注入，但是我会有两组构造函数，并且在进行单元测试时可能会使用无参数构造函数，这当然是错误的，因为没有依赖关系会得到设置。不是真实的，也不是模拟的。

## 问题

如何通过将依赖注入构造函数设置为在构造函数中注入具体实现来说服 MEF 创建我的控制器`ImportingConstructor`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T10:21:52.480

这可能与线程有关，因为默认情况下 MEF 容器不是线程安全的。在容器的构造函数中，尝试启用线程安全：

```
var container = new CompositionContainer(catalog, true); 
```

# html - 亚马逊 s3 试用文件 .html

> ID：11467387
> 
> 赞同：1
> 
> 时间：2012-07-13T09:06:54.910
> 
> 标签：html, amazon-s3, amazon

是否可以让亚马逊 s3 服务器**尝试 .html**文件？

示例：当我访问它时，如果两者都不存在，`domain.com/fits`则显示`domain.com/fits.html`或 404的内容`fits``fits.html`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T11:01:44.827

不，如果您在 Amazon S3 上托管静态网站，这是不可能的。

AWS S3 不提供任何 url 重写服务。

# c# - 我可以在 XAML/C# WinRT 应用程序中使用 RichEditBox 而不是 Canvas 进行绘图吗

> ID：11467388
> 
> 赞同：0
> 
> 时间：2012-07-13T09:06:56.190
> 
> 标签：c#, xaml, drawing, microsoft-metro, windows-runtime

目前在 WinRT 画布中不支持渲染到图像。此外，它也不支持在其上写入文本。那么我可以使用 RichEditBox 代替 canvas 吗？由于 RichEditBox 可能包含绘图组件，富文本然后我可以保存它。

我已经申请了[油漆](http://www.codeproject.com/Articles/416878/Metro-Paint)。所以我想增强它，所以我问。

我试过了，但它也不起作用

```
<RichEditBox AcceptsReturn="True" x:Name="rbtMyRichTextBox">
    <Paragraph>
        <InlineUIContainer>
            <Rectangle Width="100" Height="100" Fill="Black"/>
        </InlineUIContainer>
    </Paragraph>
</RichEditBox> 
```

我收到此错误

```
Cannot add content to an object of type "RichEditBox". 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T14:06:49.580

如果可以将文本转换为像素，则可以为 Metro 使用[WriteableBitmap](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.media.imaging.writeablebitmap.aspx)。您允许用户输入文本并将文本块呈现给 WriteableBitmap。

不幸[的是，将控件渲染到位图并不容易](http://social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread/65a6870d-1412-4701-ae12-258ed2b45452)

RichEditBox 中的矩形不是 XAML 矩形，而是 RTF 矩形。[在 RTF 规范](http://www.biblioscape.com/rtf15_spec.htm)中搜索矩形。

# android - Android 上的 Cocos2D-X 没有运行

> ID：11467392
> 
> 赞同：3
> 
> 时间：2012-07-13T09:07:07.123
> 
> 标签：android, c++, eclipse, avd, cocos2d-x

我一直在尝试开始使用 Cocos2D-X，因为我想尝试制作一个与 Android 和 iOS 兼容的应用程序的想法。我一直在阅读教程（[http://www.raywenderlich.com/11283/cocos2d-x-for-ios-and-android-getting-started](http://www.raywenderlich.com/11283/cocos2d-x-for-ios-and-android-getting-started)），它解释了如何使用 eclipse 运行程序，但是我已按照详细说明的步骤进行操作，但没有得到相同的结果。

当我在 Eclipse 中运行该程序时，它会启动一个 AVD，它将转到幻灯片以解锁屏幕。当我解锁时，我会看到一个黑屏。

我将包括控制台日志 eclipse 已经产生了一个底部，因为它可能说了一些可能与我为什么不能让这个程序工作有关的东西。

最后，我只想说，我没有更改Android项目中的任何代码，它与Cocos2D-X脚本创建的完全一样，这就是为什么我对它为什么不起作用感到困惑的原因。

感谢您的阅读，希望您能帮到我。

控制台日志：

```
[2012-07-13 09:59:11 - com.test.samplecocos2dxandroid.samplecocos2dxandroid] ------------------------------
[2012-07-13 09:59:11 - com.test.samplecocos2dxandroid.samplecocos2dxandroid] Android Launch!
[2012-07-13 09:59:11 - com.test.samplecocos2dxandroid.samplecocos2dxandroid] adb is running normally.
[2012-07-13 09:59:11 - com.test.samplecocos2dxandroid.samplecocos2dxandroid] Performing com.test.samplecocos2dxandroid.samplecocos2dxandroid activity launch
[2012-07-13 09:59:11 - com.test.samplecocos2dxandroid.samplecocos2dxandroid] Automatic Target Mode: using existing emulator 'emulator-5554' running compatible AVD 'Android2.2'
[2012-07-13 09:59:11 - com.test.samplecocos2dxandroid.samplecocos2dxandroid] Uploading com.test.samplecocos2dxandroid.samplecocos2dxandroid.apk onto device 'emulator-5554'
[2012-07-13 09:59:12 - com.test.samplecocos2dxandroid.samplecocos2dxandroid] Installing com.test.samplecocos2dxandroid.samplecocos2dxandroid.apk...
[2012-07-13 09:59:19 - com.test.samplecocos2dxandroid.samplecocos2dxandroid] Success!
[2012-07-13 09:59:19 - com.test.samplecocos2dxandroid.samplecocos2dxandroid] Starting activity com.test.samplecocos2dxandroid.samplecocos2dxandroid on device emulator-5554
[2012-07-13 09:59:21 - com.test.samplecocos2dxandroid.samplecocos2dxandroid] ActivityManager: Starting: Intent { act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] cmp=com.test.samplecocos2dxandroid/.samplecocos2dxandroid } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T09:44:00.073

如果您使用的是最新版本的 Cocos2d-x，它利用了 OpenGL ES 2.0，它将无法在模拟器下运行。模拟器不支持 OpenGL ES 2.0。此外，在开发游戏时使用模拟器并不是很有用，因为性能会很糟糕。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T11:20:21.997

您可能会尝试将“GPU 仿真”添加到虚拟 android 设备的硬件属性中

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-17T10:34:25.680

您可以使用 genymotion 模拟器，它支持 OpenGL ES 2.0，而且它也像本机设备一样工作。

# ios - 如何解决错误：NSURLConnectionInternalConnection _withConnectionDisconnectFromConnection

> ID：11467395
> 
> 赞同：0
> 
> 时间：2012-07-13T09:07:09.223
> 
> 标签：ios, error-handling, nsurlconnection, nsurl

在我的应用程序中，我正在将一个巨大的（200MB+）文件下载到磁盘。
下载完成后，我收到此错误：

```
[NSURLConnectionInternalConnection _withConnectionDisconnectFromConnection]:  
message sent to deallocated instance 0x8cb0b40 
```

我尝试调用**info malloc-history 0x8cb0b40**但我得到了

```
Undefined info command: "malloc-history 0x8cb0b40".  Try "help info". 
```

我正在使用*（gdb）*，但仍在获取此信息。我在这里找不到错误。

* * *

**我该如何解决这个问题？**

所以这是我的代码（NSURL 方法）：

```
#pragma mark - NSURL methods

- (void)loadingProgress:(NSNumber *)nProgress {
[self.progressView setProgress:[nProgress floatValue]];
}

- (void) connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response {
XLog(@"");

[self.receivedData setLength:0];
XLog(@"response: %@", [response description]);

self.path = [[NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0] stringByAppendingPathComponent:@"vox.zip"];
[[NSFileManager defaultManager] createFileAtPath:self.path contents:nil attributes:nil];
self.file = [[NSFileHandle fileHandleForUpdatingAtPath:self.path] retain];// Here file is object of NSFileHandle and its declare in .h File

[self.file seekToEndOfFile];

if ([response isKindOfClass:[NSHTTPURLResponse self]]) {
    NSDictionary *headers = [(NSHTTPURLResponse *)response allHeaderFields];
    lengthOfXMLContent = [[headers objectForKey:@"Content-Length"] intValue];
    XLog(@"session: %@", [headers objectForKey:@"Set-Cookie"]);

    [self.prefs setValue:[headers objectForKey:@"Set-Cookie"] forKey:@"keySession"];

    XLog(@"headers: %@", headers);
    XLog(@"Incoming length: %i", lengthOfXMLContent);

}
}

- (void) connection:(NSURLConnection *)connection didReceiveData:(NSData *)data {

//XLog(@"didReceiveData entered");

self.dataCount = self.dataCount + [data length];

if (self.receivedData) {

    self.paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    self.documentsDirectory = [self.paths objectAtIndex:0];

    self.responseString = [[[NSString alloc] initWithData:self.receivedData encoding:NSUTF8StringEncoding] autorelease];

}

XLog(@"------------------------------------------: %d", lengthOfXMLContent);

double progress = (double)self.dataCount / (double)lengthOfXMLContent;

XLog(@"--------------: %i", self.dataCount);
XLog(@"--------------: %d", lengthOfXMLContent);
XLog(@"--------------: ");
XLog(@"--------------: %f \n", progress);

[self.file seekToEndOfFile];
[self.file writeData:data];
//XLog(@"data--------------: %i", [data length]);

[self performSelectorInBackground:@selector(loadingProgress:) withObject:[NSNumber numberWithFloat:progress]];
}

- (void) connection:(NSURLConnection *)connection didFailWithError:(NSError *)error {
XLog(@"");
XLog(@"error: %@", error);

self.receivedData = nil;
self.progressView.progress = 0.00;
lengthOfXMLContent = 0;
//recievedData = NO;

UIAlertView *alertCanceled = [[UIAlertView alloc] initWithTitle:@"Verbindungsfehler" message:@"Verbindung wurde unterbrochen. \nPruefen Sie Ihre Verbindung und versuchen Sie es noch einmal." delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil];
[alertCanceled show];
[alertCanceled release];

viewDownload.hidden = YES;

//[self removeActivityViewer];
[connection release];
[self.file closeFile];
}

- (void) connectionDidFinishLoading:(NSURLConnection *)connection {
XLog(@"");

[self.file closeFile];
//NSError *error = nil;
XLog(@"Succeeded! Received %d bytes of data", [self.receivedData length]);

[connection release];

//self.lblInfo.text = @"Datei wurde heruntergeladen.\nDatei wird entpackt, bitte Warten..";
self.progressView.hidden = YES;
self.btnDownloadVOX_DE.hidden = YES;
self.btnDownloadVOX_EN.hidden = YES;

[UIApplication sharedApplication].networkActivityIndicatorVisible = NO;

ZipArchive *za = [[[ZipArchive alloc] init] autorelease];
[za UnzipOpenFile:[NSString stringWithFormat:@"%@/vox.zip", self.documentsDirectory]];
[za UnzipFileTo:self.documentsDirectory overWrite:YES];

viewDownload.hidden = YES;

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-14T15:07:58.180

在您的 connectionDidFinishLoading 中，您释放连接，同时它仍在为您的委托提供服务。

我假设您有一个属性或 ivar 将其保留在您的类中（我们称之为“myConnection”）。您应该在 didFinishLoading 委托中执行以下操作：

```
connection.delegate = nil; // insure no more delegate calls 
```

其次是：

```
// either this
[self performSelectorOnMainThread:@selectior(setMyConnection:) withObject:nil waitUntilDone:NO];

// or using GCD (my preference)
dispatch_asynch(dispatch_get_main_queue(), ^ { myConnection = nil; } ); 
```

我敢打赌这会阻止崩溃。[我在定位服务方面遇到了类似的问题！]

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-13T09:40:16.390

我建议您使用 AFNetworking 框架。这个框架更容易处理，并且具有手动处理连接的许多优点。例如可恢复下载、详细的上/下进度等。

[Github 上的 AFNetworking](https://github.com/AFNetworking/AFNetworking)

# networking - UTRAN 是否也用于语音传输？

> ID：11467396
> 
> 赞同：0
> 
> 时间：2012-07-13T09:07:15.657
> 
> 标签：networking, voice, gprs, telecommunication, umts

在移动通信中有 3 个接入网络。GERAN是最古老的一种，它用于电路交换语音传输，也用于分组交换传输（GPRS，EDGE）

比我们有 UTRAN。它被 UMTS 和 HSDPA 使用。 **我现在的问题。UTRAN 今天是否用于老式语音呼叫（不是谈论 SIP 或其他）？或者它是一个仅用于数据传输的网络。**

（顺便说一下，第三个是用于 LTE 的 E-UTRAN。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T13:33:45.947

UTRAN 专为语音和数据而设计。它有各种附加功能，例如 HSDPA、HSUPA 和 HSPA+，可提供更快的数据。

我认为关于 UTRAN 是否用于语音呼叫的问题完全取决于特定时间特定区域内语音和数据呼叫的相对数量。根据偏好将语音呼叫转移到 GSM 网络并将数据呼叫转移到 UMTS 是有意义的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-02-02T19:02:48.727

我认为为这个问题提供更新的答案会很有用。

如前所述，UTRAN 被设计为同时传输语音和数据。然而，虽然 VOIP（分组交换）语音服务肯定受到支持，但大多数语音呼叫都是电路交换的。

现在 LTE (EUTRAN) 是主要的无线接入技术，分组交换语音呼叫 (VoLTE) 比 CS 语音更受欢迎。这是必要的，因为 LTE 都是基于 IP 的。（CS Fallback 等一些机制可用于支持向 VoLTE 的过渡。）

# facebook - 如何扩展即将失效的 Facebook 应用访问令牌？

> ID：11467398
> 
> 赞同：0
> 
> 时间：2012-07-13T09:07:18.060
> 
> 标签：facebook, api, offline

我们有商业客户使用我们的应用程序推销他们的产品。因此，每次新客户到来时，我们都会要求他们安装我们的应用程序。他们遵循 Facebook 标准程序来安装应用程序。

我们的应用程序基于基于服务器的授权和 cUrl。我们的应用程序基于 Facebook 已弃用且即将过期的 offline_access 功能。

在这个关键场景中，我有一些疑问。

> > 如何扩展即将失效的 Facebook 应用访问令牌？

我已经通过此链接[https://developers.facebook.com/blog/post/2011/05/13/how-to--handle-expired-access-tokens/](https://developers.facebook.com/blog/post/2011/05/13/how-to--handle-expired-access-tokens/)和[https://developers.facebook.com /路线图/离线访问删除/](https://developers.facebook.com/roadmap/offline-access-removal/)

但这些联系似乎比实际更具理论性。我正在寻找一些实际的例子。

到目前为止，我的理解是：

> > 我必须从 Facebook 应用程序仪表板启用离线弃用功能 Facebook 将在访问令牌过期或无效之前向我发送一些通知

我需要遵循以下步骤来扩展访问令牌：

> > 我必须获得一个短期访问令牌，最多可以使用 2 个小时，而且我一天可以获得多个令牌。然后我必须使用那个短令牌来获得 60 天的长期访问令牌。

我的问题是：

1.  我以上所有的理解都是正确的（我很困惑！）？
2.  从 Facebook 收到提醒后，我是否必须每 59 天重新生成一次访问令牌？这不是过时的概念吗？！
3.  是否有任何简单的自动化方法来扩展即将过期的访问令牌或已经过期的访问令牌？

提前感谢大家。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T11:03:04.987

[https://developers.facebook.com/roadmap/offline-access-removal/](https://developers.facebook.com/roadmap/offline-access-removal/)拥有您需要的所有信息，您在该文档中的场景 2 下操作；现有的 offline_access 令牌在完全删除该功能之前仍然是无限的，否则令牌的有效期最长为 60 天。

用户必须至少每 60 天返回您的应用一次，您才能为他们获得有效的令牌 - 广告 API（无限令牌）和页面管理 API（无限令牌）除外

offline_access 令牌的截止日期已延长，但如果您已经了解为支持新令牌模型需要进行的更改，则不应依赖路线图或博客进行更新

# javascript - 在我的 asp.net 应用程序中使用 jsmeter

> ID：11467399
> 
> 赞同：3
> 
> 时间：2012-07-13T09:07:19.230
> 
> 标签：javascript, asp.net, performance

是否可以使用 jsmeter 在我自己的应用程序中分析 javascript 的性能？
我不是在谈论 .js 文件，我想在我的 asp.net 应用程序页面上测量 javascript 的性能。
是否有其他工具可用于相同目的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T09:27:44.690

我不确定是否有任何第三方工具可用，但您可以在此处参考答案：[如何测量函数执行所花费的时间](https://stackoverflow.com/questions/313893/how-to-measure-time-taken-by-a-function-to-execute)

你会注意到`console.time`并且`console.timeEnd`可以用来轻松地衡量你的 js 的性能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T10:16:39.950

您可以使用内置浏览器配置文件。例如[Chrome profiler](http://coding.smashingmagazine.com/2012/06/12/javascript-profiling-chrome-developer-tools/)或[Firebug](http://getfirebug.com/javascript/) for Firefox 来测量执行时间。

# android - android Json 内容只显示一个属性

> ID：11467401
> 
> 赞同：0
> 
> 时间：2012-07-13T09:07:24.817
> 
> 标签：android, json

我已经发展到在列表视图中显示一个属性的级别，但我想在[http://hopscriber.com/log.php](http://hopscriber.com/log.php)中显示所有属性。

```
[
    {
        "uname": "test",
        "pwd": "test"
    },
    {
        "uname": "faith",
        "pwd": "3220"
    },
    {
        "uname": "losh",
        "pwd": "wick"
    },
    {
        "uname": "loshi",
        "pwd": "wick"
    }
] 
```

以下是我的代码，它只显示 pwd 的结果。

```
public class Menu extends Activity {

    TextView result;
    Intent intent;

    // JSON Node names
    private static final String TAG_Name = null;
    private static final String TAG_Pass = null;

    // contacts JSONArray
    JSONArray contacts = null;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_menu);

        // Name of the User
        result = (TextView) findViewById(R.id.result);
        intent = getIntent();
        String Naming = intent.getStringExtra("name1");
        result.setText("Hey " + Naming);

        ListView list = (ListView) findViewById(R.id.list);

        try {
            HttpParams params = new BasicHttpParams();
            HttpConnectionParams.setSoTimeout(params, 0);
            HttpClient httpClient = new DefaultHttpClient(params);

            // prepare the HTTP GET call
            HttpGet httpget = new HttpGet("http://hopscriber.com/log.php");
            // get the response entity
            HttpEntity entity = httpClient.execute(httpget).getEntity();

            if (entity != null) {
                // get the response content as a string
                String response = EntityUtils.toString(entity);
                // consume the entity
                entity.consumeContent();

                // When HttpClient instance is no longer needed, shut down the
                // connection manager to ensure immediate deallocation of all
                // system resources
                httpClient.getConnectionManager().shutdown();

                // return the JSON response
                ArrayList<HashMap<String, String>> contactList = new ArrayList<HashMap<String, String>>();

                JSONArray jsonArray = new JSONArray(response);

                if (jsonArray != null) {
                    for (int i = 0; i < jsonArray.length(); i++) {
                        JSONObject object = (JSONObject) jsonArray.get(i);

                        HashMap<String, String> map = new HashMap<String, String>();

                        map.put(TAG_Name, object.getString("uname"));
                        map.put(TAG_Pass, object.getString("pwd"));

                        contactList.add(map);

                    }
                }

                ListAdapter adapter = new SimpleAdapter(this, contactList,
                        R.layout.menu_list_row, new String[] { TAG_Name,
                                TAG_Pass }, new int[] { R.id.LR_Name,
                                R.id.LR_date });
                list.setAdapter(adapter);
            }
        } catch (Exception e) {
            e.printStackTrace();
        }

        // Launching new screen on Selecting Single ListItem
        list.setOnItemClickListener(new OnItemClickListener() {

            public void onItemClick(AdapterView<?> arg0, View arg1, int arg2,
                    long arg3) {
                Toast.makeText(getBaseContext(), "Booyah", Toast.LENGTH_SHORT)
                        .show();
            }
        });
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T13:19:41.040

您需要初始化 json 节点名称。

例如：

```
// JSON Node names
private static final String TAG_Name = "name";
private static final String TAG_Pass = "pwd"; 
```

这样做将输出所需的结果。

# windows - Windows Batch：重命名文件并将其替换文件名已经存在

> ID：11467402
> 
> 赞同：0
> 
> 时间：2012-07-13T09:07:33.507
> 
> 标签：windows, batch-file, file-rename

我想使用以下命令重命名目录中的文件：

```
for /r %%x in (*.ath) do ren "%%x" *.txt 
```

问题是如果文件名已经存在，则文件不会被替换。有没有一种简单的方法可以删除旧文件然后重命名新文件？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T12:36:07.470

要详细说明@Ben 的评论，请使用

```
for /r %%x in (*.ath) do move "%%x" "%%~nx.txt" /y 
```

# java - 接口与泛型？

> ID：11467411
> 
> 赞同：1
> 
> 时间：2012-07-13T09:08:10.937
> 
> 标签：java, generics, interface

我有一些工作代码，使用泛型已经开始使代码看起来比它应该的更混乱。

我是否有可能取消泛型并使用成员类型、构造函数类型、方法参数类型和方法返回类型的接口？

泛型会提供什么，而上述使用接口不会提供什么？我知道泛型在检索元素时会进行编译时检查（以停止错误的转换——就像过去一样），但是如果我尝试插入不是所需接口的子类型的类型，编译器不会检测到吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-13T09:12:14.287

泛型使**集合更加类型安全**。

如果在您的工作代码中广泛使用集合，我会更喜欢坚持使用泛型。

此外，正如臭名昭著的谚语所说，“接口中的程序，而不是实现中的程序”，**接口是为了灵活性而不是类型安全。**

泛型**也用于**类、方法、接口、变量、构造函数。ETC....

有关详细信息，请参阅这些链接：

[http://en.wikipedia.org/wiki/Generics_in_Java](http://en.wikipedia.org/wiki/Generics_in_Java)

[http://www.oracle.com/technetwork/articles/javase/generics-136597.html](http://www.oracle.com/technetwork/articles/javase/generics-136597.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T20:56:42.827

接口向所有人宣布一个类在任何时候都必须如何表现。另一方面，类型参数（泛型）让客户端决定类在特定实例中的行为方式。

类型参数通过允许类仅使用一组方法和字段来处理一系列对象类型，并提供编译时检查以确保每个特定实例仅使用指定的类型，从而使类成为通用的。

如果您尝试使用接口提供这种灵活性，您将不得不编写相同方法和类的多个版本，其中每个版本基本上做相同的事情，但具有不同的显式类型。这将很无聊（这会导致剪切和粘贴错误）并且体积庞大，根本不需要添加任何东西。

通用语法看起来有点古怪，但您很快就会习惯它，所以不要让尖括号最初的丑陋阻止您利用强大的功能。

# iphone - 修复带有可编辑文本字段的键盘

> ID：11467418
> 
> 赞同：-2
> 
> 时间：2012-07-13T09:08:43.283
> 
> 标签：iphone, keyboard, uitextfield, screen

就像我们在消息传递中看到的那样，如何使用可编辑的文本字段修复键盘视图？

![在此处输入图像描述](../Images/05f86ef6916f4e136adc33d598616bff.png)

我想展示完全相同的布局。我找不到如何实现这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T09:15:57.533

要创建这样的视图，您需要使用 a`UIToolBar`并在其上添加 a`UITextField`和 a `UIBarButtonItem`。
在触摸`UITextField`或按下**返回**键或**发送**按钮时，您需要[**为此**](https://stackoverflow.com/questions/1247113/iphone-keyboard-covers-text-field/1533847#1533847)链接中给出的完整视图设置动画。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T09:14:20.180

您可以使用 UITextField 的 inputAccessoryView 将您的工具栏附加到键盘上方

# objective-c - 触摸绘图问题

> ID：11467423
> 
> 赞同：0
> 
> 时间：2012-07-13T09:08:51.217
> 
> 标签：objective-c, ios, quartz-core

我的代码有什么问题，因为当我在做一个新点时。上一个点会自动成为一条连接到我当前点的新直线。

这是我的代码

```
UIGraphicsBeginImageContext(CGSizeMake(480 , 320));
[drawView.image drawInRect:CGRectMake(0, 0, 480,320)];
CGContextRef context = UIGraphicsGetCurrentContext();
CGContextSetLineCap(context,kCGLineCapRound);
CGContextSetLineWidth(context, 5);
CGContextSetRGBStrokeColor(context,red, green, blue, 1.0);
CGContextMoveToPoint(context, mid1.x, mid1.y);
CGContextAddQuadCurveToPoint(context, previousPoint1.x, previousPoint1.y, mid2.x, mid2.y);
CGContextStrokePath(context);
drawView.image = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsGetCurrentContext(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T09:26:18.567

您的代码执行的是绘制一条从 mid1 到 mid2 通过 previousPoint 的二次贝塞尔曲线。

根据您的变量名称，我猜您要么通过混淆变量来滥用 tAddQuadCurveToPoint，要么您在同一行上有 previousPoint1、mid1 和 mid2，因此除了一行之外什么都看不到。

# c# - someString.IndexOf(someString) 在 .NET 4 下返回 1 而不是 0

> ID：11467424
> 
> 赞同：55
> 
> 时间：2012-07-13T09:08:51.680
> 
> 标签：c#, string, .net-4.0, .net-3.5

我们最近将所有项目从 .NET 3.5 升级到 .NET 4。我遇到了一个关于 .NET 的相当奇怪的问题`string.IndexOf()`。

我的代码显然做了一些稍微不同的事情，但在调查问题的过程中，我发现调用`IndexOf()`本身的字符串返回 1 而不是 0。换句话说：

```
string text = "\xAD\x2D";          // problem happens with "­-dely N.China", too;
int index = text.IndexOf(text);    // see update note below. 
```

给我一个 1 的索引，而不是 0。关于这个问题有几点需要注意：

*   问题似乎与这些连字符有关（第一个字符是 Unicode 软连字符，第二个是常规连字符）。

*   我已经仔细检查过，这在 .NET 3.5 中不会发生，但在 .NET 4 中会发生。

*   将 更改`IndexOf()`为进行序数比较可以解决问题，因此由于某种原因，默认的 . 忽略了第一个字符`IndexOf`。

有谁知道为什么会这样？

**编辑**

对不起，伙计们，在原始帖子上做了一些东西，并在那里两次获得了隐藏的破折号。我已经更新了字符串，只要将它粘贴到正确的编辑器中，它就会返回 1 而不是 2 的索引。

**更新：**

将原始问题字符串更改为每个实际字符都清晰可见的字符串（使用转义）。这稍微简化了问题。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-07-13T09:20:05.240

您的字符串包含两个字符：[软连字符](http://www.fileformat.info/info/unicode/char/ad/index.htm)（Unicode 代码点 173）和[连字符](http://www.fileformat.info/info/unicode/char/2d/index.htm)（Unicode 代码点 45）。

> [Wiki](http://en.wikipedia.org/wiki/Soft_hyphen)：根据 Unicode 标准，如果该行没有断开，则不会显示软连字符。

在 .NET 4 中使用`"\xAD\x2D".IndexOf("\xAD\x2D")`时，似乎忽略了您正在寻找软连字符，返回起始索引 1（的索引`\x2D`）。在 .NET 3.5 中，这将返回 0。

更有趣的是，如果您运行此代码（因此*仅*在寻找软连字符时）：

```
string text = "\xAD\x2D";
string shy = "\xAD";
int i1 = text.IndexOf(shy); 
```

然后`i1`变为 0，无论使用什么 .NET 版本。结果`text.IndexOf(text);`确实有所不同，乍一看对我来说就像一个错误。

据我可以通过框架追溯，较旧的 .NET 版本使用[InternalCall](https://stackoverflow.com/questions/1211462/c-sharp-internal-static-extern-with-internalcall-attribute-internal-or-externa) to `IndexOfString()`（我无法弄清楚该调用哪个 API 调用），而从 .NET 4 开始使用[QCall](https://stackoverflow.com/questions/9491337/what-is-dllimportqcall)来`InternalFindNLSStringEx()`调用[`FindNLSStringEx()`](http://msdn.microsoft.com/en-us/library/windows/desktop/dd318059(v=vs.85).aspx).

这个问题（我真的不知道这是否是预期的行为）在调用时确实发生了`FindNLSStringEx`：

```
LPCWSTR lpStringSource = L"\xAD\x2D";
LPCWSTR lpStringValue = L"\xAD";

int length;

int i = FindNLSStringEx(
    LOCALE_NAME_SYSTEM_DEFAULT,
    FIND_FROMSTART,
    lpStringSource,
    -1,
    lpStringValue,
    -1,
    &length,
    NULL,
    NULL,
    1);

Console::WriteLine(i);

i = FindNLSStringEx(
    LOCALE_NAME_SYSTEM_DEFAULT,
    FIND_FROMSTART,
    lpStringSource,
    -1,
    lpStringSource,
    -1,
    &length,
    NULL,
    NULL,
    1);

Console::WriteLine(i);

Console::ReadLine(); 
```

打印 0，然后打印 1。注意，`length`指示找到的字符串长度的 out 参数在第一次调用后为 0，在第二次调用后为 1；软连字符被视为长度为 0。

`text.IndexOf(text, StringComparison.OrdinalIgnoreCase);`正如您所指出的，解决方法是使用。这会产生一个 QCall `InternalCompareStringOrdinalIgnoreCase()`，然后调用[`FindStringOrdinal()`](http://msdn.microsoft.com/en-us/library/windows/desktop/dd318061(v=vs.85).aspx)，这两种情况都返回 0 。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-07-13T09:21:09.617

这似乎是 .NET4 中的一个错误*，并且**.NET4 Beta1*中的新更改恢复到与*.NET 2.0/3.0/3.5*相同的先前版本。

> *[.NET 4.0 CTP 中 BCL 的新增功能](http://blogs.msdn.com/b/bclteam/archive/2008/11/04/what-s-new-in-the-bcl-in-net-4-0-justin-van-patten.aspx)（MSDN 博客）*：
> 
> **.NET 4 中的字符串安全性更改**
> 
> System.String 上的默认部分匹配重载（StartsWith、EndsWith、IndexOf 和 LastIndexOf）已默认更改为与区域性无关（序数）。

此更改`String.IndexOf`通过更改方法的行为来影响方法的行为，默认情况下将它们更改为执行序数（逐字节）比较 an 将更改为 use`CultureInfo.InvariantCulture`而不是`CultureInfo.CurrentCulture`.

> **.NET 4 Beta 1 的更新**
> 
> 为了保持 .NET 4 与以前版本之间的高度兼容性，我们决定恢复此更改。String 的默认部分匹配重载以及 String 和 Char 的 ToUpper 和 ToLower 方法的行为现在与它们在 .NET 2.0/3.0/3.5 中的行为相同。.NET 4 Beta 1 中存在对原始行为的更改。

* * *

[要解决此问题](http://msdn.microsoft.com/en-us/library/bb385972.aspx)，请将字符串比较方法更改为接受`System.StringComparison`枚举作为参数的重载，并指定`Ordinal`或`OrdinalIgnoreCase`。

```
// string contains 'unicode dash' \x2D
string text = "\xAD\x2D"; 

// woks in .NET 2.0/3.0/3.5 and .NET 4 Beta 1 and later
// but seems be buggy in .NET 4 because of 'culture-sensitive' comparison        
int index = text.IndexOf(text); 

// fixed version
index = text.IndexOf(text, StringComparison.Ordinal); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T09:44:33.750

从[文档](http://msdn.microsoft.com/en-gb/library/k8b1470s.aspx)（我的重点）：

> 此方法使用当前区域性执行单词（***区分大小写和区域性）搜索。***

IE。一些不同的代码点将被视为平等。

如果你使用一个接受一个`StringComparison`值并通过的重载`StringComparison.Ordinal` 来避免文化依赖，会发生什么？

# xml - Google 文档中的 XPath 查询与 HTML 源不匹配

> ID：11467425
> 
> 赞同：1
> 
> 时间：2012-07-13T09:08:53.270
> 
> 标签：xml, xpath, google-docs

使用[XpathBuilder](http://www.xpathbuilder.com/)，我可以构建一个简单的搜索引擎查询并使用 XPath 从搜索结果中提取数据。[我在这里](https://docs.google.com/spreadsheet/ccc?key=0AtT1QPEACWUldE9CZno5WkhzVGZBXzhaMjdNc045Z3c)的 Google Doc 电子表格中有一些简单的示例，它在各种搜索引擎上运行查询“XPath 教程”并尝试提取每个搜索引擎返回的结果数量。

该 Google Doc 中的代码如下：

```
=importxml("http://www.google.com/search?q="xpath+tutorial"&num=30&pws=0", 
           "//div[@id='resultStats']")
=importxml("http://www.bing.com/search?q=xpath+tutorial&count=30", 
           "//span[@class='sb_count']")
=importxml("http://search.yahoo.com/search?p=xpath+tutorial&n=30", 
           "//span[@id='resultCount']") 
```

这有一些我不明白的奇怪之处。首先，Google 搜索没有返回任何结果，但 XPath 查询看起来不错。确实，有许多在线教程可以准确地推荐我在这里所做的事情。

雅虎查询返回正确的结果，它是唯一的。

[Bing Xpath 查询找到的结果数量与Bing 网页上](http://www.bing.com/search?q=xpath+tutorial&count=30)给出的结果不匹配，即使只有一个 XML 节点与 XPath 查询匹配。更多详细信息请参见[此处的电子表格](https://docs.google.com/spreadsheet/ccc?key=0AtT1QPEACWUldE9CZno5WkhzVGZBXzhaMjdNc045Z3c)

哪里出了这么大的问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T23:34:27.733

由于 URL 中未编码的双引号，Google 可能无法正常工作。由于`importxml`字符串分隔符是一个双引号，这可能行不通。将双引号编码为`%22`.

不确定必应。最好的猜测是您的 XPath 正在运行，但 Bing 出于某种原因向您和 Google Docs 返回了不同的结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T16:22:50.287

试试这个....

```
=importxml("http://www.google.com/search?q='xpath+tutorial&num=30&pws=0'", "//div[@id='resultStats']") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T10:05:33.203

魔鬼在细节中——如果您不向我们展示您的代码，我们将无法为您找到您的错误。

但是，XPath 被定义为针对 XML 运行，而您似乎是针对 HTML 运行它。因此，混淆可能在于 HTML 映射到 XML 的方式：例如通过添加隐式节点（如 tbody）、通过大小写折叠或通过命名空间处理。

# python - 带有检查空条件的python生成器

> ID：11467430
> 
> 赞同：12
> 
> 时间：2012-07-13T09:09:26.820
> 
> 标签：python, generator

在大多数情况下，python 生成器是列表的良好替代品，我希望在其中检查空条件，这对于普通生成器是不可能的。我正在尝试编写一个包装器，该包装器将允许检查空条件，但仍然很懒惰并提供生成器的好处。

```
class mygen:
  def __init__(self,iterable):
    self.iterable = (x for x in iterable)
    self.peeked = False
    self.peek = None
  def __iter__(self):
    if self.peeked:
      yield self.peek
      self.peeked = False
    for val in self.iterable:
      if self.peeked:
        yield self.peek
        self.peeked = False
      yield val
    if self.peeked:
      yield self.peek
      self.peeked = False
  def __nonzero__(self):
    if self.peeked:
      return True
    try:
      self.peek = self.iterable.next()
      self.peeked = True
      return True
    except:
      return False 
```

1.  我认为它的行为就像一个普通的生成器一样正确。有没有我遗漏的角落案例？
2.  这看起来并不优雅。有没有更好的pythonic方式来做同样的事情？

示例用法：

```
def get_odd(l):
    return mygen(x for x in l if x%2)

def print_odd(odd_nums):
  if odd_nums:
      print "odd numbers found",list(odd_nums)
  else:
      print "No odd numbers found"

print_odd(get_odd([2,4,6,8]))
print_odd(get_odd([2,4,6,8,7])) 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-13T09:25:41.443

我通常不会实现这种生成器。有一种惯用的方法可以测试迭代器`it` 是否已用尽：

```
try:
    next_item = next(it)
except StopIteration:
    # exhausted, handle this case 
```

用一些特定于项目的 LBYL 成语代替这个 EAFP 成语似乎令人困惑，而且根本没有好处。

也就是说，如果我真的想这样做，这就是我将如何实现它：

```
class MyIterator(object):
    def __init__(self, iterable):
        self._iterable = iter(iterable)
        self._exhausted = False
        self._cache_next_item()
    def _cache_next_item(self):
        try:
            self._next_item = next(self._iterable)
        except StopIteration:
            self._exhausted = True
    def __iter__(self):
        return self
    def next(self):
        if self._exhausted:
            raise StopIteration
        next_item = self._next_item
        self._cache_next_item()
        return next_item
    def __nonzero__(self):
        return not self._exhausted 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-13T09:26:01.490

用于[`itertools.tee`](http://docs.python.org/library/itertools.html#itertools.tee)实现非零测试，并在创建时简单地对其进行缓存：

```
from itertools import tee

class NonZeroIterable(object):
    def __init__(self, iterable):
        self.__iterable, test = tee(iter(iterable))
        try:
            test.next()
            self.__nonzero = True
        except StopIteration:
            self.__nonzero = False                 

    def __nonzero__(self):
        return self.__nonzero

    def __iter__(self):
        return self.__iterable 
```

小演示：

```
>>> nz = NonZeroIterable('foobar')
>>> if nz: print list(nz)
... 
['f', 'o', 'o', 'b', 'a', 'r']
>>> nz2 = NonZeroIterable([])
>>> if not nz2: print 'empty'
... 
empty 
```

这个版本的 NonZeroIterable 缓存了标志；因此，它*只会*告诉您迭代器在开始时是否为非空。如果您需要能够在其生命周期的其他点测试迭代，请改用[Sven 的版本](https://stackoverflow.com/a/11467686)；那里的`__nonzero__`标志会*在每次迭代后*告诉你是否还有更多的项目要来。

### 关于你的例子的旁注

您的示例代码太简单了，不适合您的用例；您首先测试非空性（可能会遍历输入列表以搜索奇数），但无论如何都会耗尽整个迭代器。以下代码同样有效，并且不需要您发明打破 python 习语的方法：

```
def print_odd(odd_nums):
    odd_nums = list(odd_nums)
    if odd_nums:
        print "odd numbers found", odd_nums
    else:
        print "No odd numbers found" 
```

# gwt - 将域类导入 GWT 项目。需要的模块？

> ID：11467434
> 
> 赞同：0
> 
> 时间：2012-07-13T09:09:32.837
> 
> 标签：gwt

目前我正在开发一个简单的 PoC 来使用 JPA 测试 GWT。我的入口点有一个 DataGrid GWT 组件，用于显示我的数据库示例的实体 Jpa bean。

我有一个带有 JPA 实体（带注释的 POJO）的通用项目，并且我有另一个只需要 GWT 类的项目。

现在，我创建了一个 Service 来向 Spring 注入一些 Daos，它运行得很好，但是当我返回一些 JPA Annotated Pojo 的列表时，我得到了这个异常：

[错误] 第 20 行：com.foo.domain.Product 类型没有可用的源代码；你忘了继承一个必需的模块吗？

我在其他项目中添加了一个带有以下代码的 domain.gwt.xml：

```
<module>
  <inherits name='com.google.gwt.user.User'/>
  <source path="domain"></source>
</module> 
```

在我的 gwt 项目 xml 中添加了这个：

```
<inherits name='es.gerardribas.example.common.domain'/> 
```

但不运行。

怎么了？？？

谢谢！

# android - 使用 sdk 和 eclipse 64bit 可以使用 jdk 7 吗？

> ID：11467435
> 
> 赞同：0
> 
> 时间：2012-07-13T09:09:34.470
> 
> 标签：android, sdk, java

我对日食有问题。有两种情况：

1-安装JDK6和SDK，我可以运行sdk manager，但我不能运行eclipse

2-安装JDK7和SDK，我可以运行eclipse但我不能运行SDK管理器

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T09:34:13.907

只需安装两个 JDK 并选择最适合 Eclipse 和 Android SDK 的。

对于 Eclipse，您可以指定要在`Eclipse.ini`. 只需在开头添加以下两行：

```
-vm
C:/Program Files/Java/jre7/bin 
```

在 Eclipse 中，将两个 JDK 注册为 Java 运行时，并为它们指定适当的名称，以便您可以为您的 Android 项目选择正确的一个。

# delphi - 更新基础表时刷新 ADO 数据集

> ID：11467438
> 
> 赞同：0
> 
> 时间：2012-07-13T09:09:37.310
> 
> 标签：delphi, dataset, ado

是否有可能`ADO Dataset`“知道”基础表是否已更新或何时更新？

目前，每次在文件夹中收到该项目的文件时，我都必须检查项目状态。这会导致大量的 sql 查询，因为我们一次最多可以处理 1300 个事件。

我正在考虑向`ADO Dataset`保存状态并用于`Locate`检查状态的应用程序添加一个。

我不想使用计时器进行定期刷新，而是希望`dataset`在基础表记录更改后立即更新。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T11:57:20.607

ADO 数据集基于客户端/服务器概念将数据检索到客户端。就像一个网络浏览器。

这意味着：客户端请求 -> 服务器，服务器应答 -> 客户端。所以客户端真的不知道是否有任何数据被改变。

最简单的方法是重新查询数据（关闭/打开）并根据您的需要获取数据，而不是一次全部 1300 个。这是最常用的解决方案。

无论如何，如果数据量真的很大并且你想玩优化你有两种方法：

A. 使用触发器构建日志表并注册表数据更改。定期向服务器询问更改（您可以在[后台线程](https://stackoverflow.com/questions/11396234/how-to-let-the-tthread-to-keep-working-in-background-and-showing-me-the-result-i/11408865)中执行此操作）：

```
select L.RECORD_ID, L.OPERATION_ID
from FILE_LOG L
where L.FDATESTAMP between :LAST_WATCH and :CURRENT_STAMP and L.FOLDER_ID = :FOLDER_ID 
```

您将获得 RECORD_ID 和 OPERATION_ID（即插入/更新/删除）。

B. 如果你没有链接到 DBMS，[Firebird](http://www.firebirdsql.org/) /Interbase 有[事件](http://www.firebirdsql.org/file/documentation/papers_presentations/Power_Firebird_events.pdf)的概念。使用触发器，您可以通知客户端数据已更改，并且您可以重新查询刚刚修改的数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T11:56:36.763

据我们所知，SQL Server 中只有一种方法可以检测是否对表进行了任何更改，那就是使用动态管理视图 sys.dm_db_index_usage_stats ( [http://msdn.microsoft.com/en -us/library/ms188755.aspx](http://msdn.microsoft.com/en-us/library/ms188755.aspx)）。

出于我的目的，我创建了一个函数来更轻松地访问信息。

```
create function [dbo].[_efnLastTableUpdateTime](@TableName varchar(255))
/*  Function to return the last datetime that a table was modified.
    Note that because this is from a dynamic management view, it is only
    since the server was started, i.e. will return null if no change since
    the server was started.
    SQL2005 or later.
*/
returns datetime
as
begin
    declare @Result datetime
    set @Result = (
            select top 1 [last_user_update]
            from sys.dm_db_index_usage_stats
            where object_id=object_id(@TableName)
            order by [last_user_update] desc
        )
    return @Result
end
GO 
```

然后我在 TADOQuery 的后代中构建了一个访问它的函数和一个打开或关闭功能的属性。然后我可以按需调用它，从而产生非常有效的响应。

```
function TMyADOQuery.HasBeenUpdatedSinceOpen(const ACloseIfHasBeen: boolean = false): boolean;
const
  sSelectTableUpdateTime = 'select [dbo]._efnLastTableUpdateTime(''%s'')';
var
  NewUpdateTime: TDateTime;
begin
  Result := false;
  if(_TrackUpdated) and (Active) and (_TableName > '') then begin
    NewUpdateTime := TrackUpdateQuery.SelectScalarDate(Format(sSelectTableUpdateTime, [_TableName]), 0);
    Result := (FLastUpdateTime <> NewUpdateTime);
    FLastUpdateTime := NewUpdateTime;
  end;
  if(Result) and (ACloseIfHasBeen) then
    Close;
end; 
```

`TrackUpdateQuery`是内部创建的另一个 TADOQuery 实例，`SelectScalarDate`是我的 TADOQuery 类的扩展。

请注意，用户必须具有[VIEW SERVER STATE](http://msdn.microsoft.com/en-us/library/ms188754.aspx)权限才能访问管理视图。

# php - 只允许来自服务器的脚本访问文件

> ID：11467440
> 
> 赞同：1
> 
> 时间：2012-07-13T09:09:39.683
> 
> 标签：php, security, .htaccess

只允许脚本运行或从 Web 服务器上的 PHP 文件获取请求。

*   例如。你的网络服务器上有一个文件`http://example.com/libs/comment.php`
*   只允许其他 PHP 或 JS 文件从该文件获取请求（意味着运行该文件并执行所需的结果）
*   如果任何用户尝试直接访问此文件，他/她将收到错误或 404 任何其他消息

这里`comment.php`只是一个例子。libs 文件夹包含大量文件，以上适用于所有文件。我的偏好是使用 .htacces 方法或像 666,777 等文件夹的模式重写。我知道这不是一个真正的问题，只是为了提高安全性，使网站几乎安全。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-13T09:13:40.647

好吧，最简单的方法是在前端控制器中定义一个常量（*大概是 index.php*）：

```
define('SECURE', true); 
```

然后，在任何包含文件的开头对其进行测试：

```
!defined('SECURE') and exit; 
```

这将阻止*任何*客户端访问（*包括从页面调用资产，通过 JavaScript 或`src`属性；一切真的*）

正如其他答案中所建议的那样，最好为安全做出其他规定。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-13T22:33:42.047

你已经`.htaccess`在你的问题中提到了。只需在您的`libs`目录中创建这样一个文件并输入以下指令：

```
Order allow, deny
Deny from all 
```

[有关Order](http://httpd.apache.org/docs/2.2/mod/mod_authz_host.html#order)和[Deny](http://httpd.apache.org/docs/2.2/mod/mod_authz_host.html#deny)指令的详细信息，请参阅[手册。](http://httpd.apache.org/docs/2.2/mod/directives.html)

请注意，错误将`403 Forbidden`代替`404 Not Found`.

请注意，这将拒绝通过 HTTP 对您目录中的文件的*所有访问。*`libs`您的其他 PHP 文件可以`include`或`require`那些文件，因为这是纯粹的服务器端操作。如果您出于某种原因需要一个 PHP 脚本通过 HTTP 执行另一个，那么您可以将 oder 更改为`deny, allow`并添加一行`Allow from 127.0.0.1`以允许本地请求继续进行。但我怀疑您是否会让您的 PHP 脚本通过 HTTP 相互通信。

如果您需要客户端的 JavaScript 文档不访问这些文件，那么这是无法合理地完成的：客户端 broser 可以做的任何事情，客户端可以在不执行您的代码的情况下执行任何操作，至少无需按照您指定的方式执行所有代码至。有一个关于[如何限制对 PHP 文件的访问](https://stackoverflow.com/q/11467098/1468366)的问题，其中讨论了一些防止轻易破坏的步骤，但这些都不会阻止坚定的黑客使用您的脚本。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-13T09:12:59.150

If the browser can access it via `<script>` or `<style>`, so can the user.

If you only want the server to access it, pull it out of the `public` directory, to make it web-inaccessible.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-13T09:33:38.287

您可以在包含所述文件之前定义一个常量。就像是：

```
<?php
    define('MY_CONSTANT', 1);
    include_once('libs/comment.php');
    ... 
```

然后在comment.php中你可以放这样的东西：

```
<?php
    if(!defined('MY_CONSTANT')) {
       header("Status: 404 Not Found");
    }
    ... 
```

您或多或少会产生与您描述的效果相同的效果。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-06-09T14:10:20.913

我有同样的问题，从 php 调用中得到响应，就像`http://example.com/libs/myphp.php?arg=value`我读到的一样，几乎不可能隐藏。所以我决定实施一种不同的方法。在 php 文件中创建一个函数，将该文件包含在脚本中，调用该函数并将结果分配给 javascript 中的一个变量。这样，一切都对客户隐藏。

你将有`myphp.php`

```
`<?php  
myFunction($param){
  // do your task
  return $result;
}
?>` 
```

然后在你的页面中，`index.php`

```
<?php
require_once( "myphp.php");
$param = //whatever params
$my_var = myFunction($param);    
?>
<html>
<head>
</head>
<body>
<div id="myDiv"></div>
</body>
</html>
<script type="text/javascript">
var myVar = <?php echo $my_var; ?>;  
// or
var myArray = <?php echo json_encode($my_var); ?>;
document.getElementById("myDiv").innerHTML = myVar; 
</script> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-03-09T10:11:22.037

如果您正在寻找只能由服务器执行的锁定文件。最简单的方法是更改​​整个文件夹或文件的权限。

例如，您想使用文件夹图像中的一些图像，您可以将图像文件夹权限设置为 700，这意味着只有服务器用户可以读写或执行文件。其他访问者和公共用户在尝试访问时会收到 404 错误。

# java - Spring MVC 分页使用 Spring Data 和 Hibernate

> ID：11467443
> 
> 赞同：1
> 
> 时间：2012-07-13T09:09:48.920
> 
> 标签：java, hibernate, spring-mvc, spring-data, spring-data-jpa

我需要对显示来自一个数据库表的过滤数据的表进行分页。例如，我有一个 CARS 表，我只需要分页`... WHERE CAR = "BMW"`。到目前为止`repository.findAll(Pageable pageable)`，如果我只从一个表中分页数据，我使用 JPA 方法。

是否有任何标准方法可以使用标准存储库方法来实现这一点，还是我必须编写自己的实现？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T09:52:04.800

看看：

```
Page<T> findAll(Specification<T> spec, Pageable pageable); 
```

我想这就是你要找的。`Specification<T>`, 基本上是一个对象，用于指定将过滤您的查询的 WHERE 子句。

Javadoc[在这里](http://static.springsource.org/spring-data/data-jpa/docs/1.0.0.M1/api/org/springframework/data/jpa/repository/JpaRepository.html#findAll%28org.springframework.data.jpa.domain.Specification,%20org.springframework.data.domain.Pageable%29)。

一个例子（没有`Pageable`）[here](https://stackoverflow.com/q/8637571/787375)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T15:43:50.667

`Repository`您可以在界面中定义自己的方法。在任何方法中，您都可以传递`Pageable`参数。

```
Page<Car> findByCar(String car, Pageable pageable); 
```

这使您不必创建`Specification`基于 - 的查询。

# c++ - 导入 msado15.dll

> ID：11467446
> 
> 赞同：2
> 
> 时间：2012-07-13T09:10:07.607
> 
> 标签：c++, windows

我正在尝试导入一个 dll，即 msado15.dll。我可以用解决方案做到这一点；

```
#import <C:\\Program Files\\Common Files\\System\\ado\\msado15.dll>  \
rename( "EOF", "AdoNSEOF" ) 
```

但我不能用这个来分发任何东西。

我已经尝试通过注册表并为它找到了一个 libid，所以我正在尝试：

```
#import "libid:2DF8D04C-5BFA-101B-BDE5-00AA0044DE52" rename( "EOF", "AdoNSEOF" ) 
```

但我收到这些错误

> 1>Timestream.cpp(5): 警告 C4010: 单行注释包含换行符 1>Timestream.cpp(6): 警告 C4278: 'RGB': 类型库 '2DF8D04C-5BFA-101B-BDE5- 中的标识符00AA0044DE52' 已经是一个宏；使用“重命名”限定符 1>Timestream.cpp(6)：警告 C4278：“RGB”：类型库“2DF8D04C-5BFA-101B-BDE5-00AA0044DE52”中的标识符已经是一个宏；使用“重命名”限定符 1>Timestream.cpp(6)：警告 C4278：“RGB”：类型库“2DF8D04C-5BFA-101B-BDE5-00AA0044DE52”中的标识符已经是一个宏；使用“重命名”限定符 1>Timestream.cpp(6)：警告 C4278：“RGB”：类型库“2DF8D04C-5BFA-101B-BDE5-00AA0044DE52”中的标识符已经是一个宏；使用“重命名”限定符 1>Timestream。cpp(6): 警告 C4278: 'RGB': 类型库 '2DF8D04C-5BFA-101B-BDE5-00AA0044DE52' 中的标识符已经是一个宏；使用“重命名”限定符 1>Timestream.cpp(6)：警告 C4278：“RGB”：类型库“2DF8D04C-5BFA-101B-BDE5-00AA0044DE52”中的标识符已经是一个宏；使用“重命名”限定符

我如何让它发挥作用，这是最好的方法吗？我查看了有关 msado15.dll 的其他问题，但它们似乎涉及不同的问题。

谢谢，詹姆斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T13:25:37.600

```
#import "libid:2DF8D04C-5BFA-101B-BDE5-00AA0044DE52" rename( "EOF", "AdoNSEOF" ) 
```

那是一个类型库，但它是错误的。这解释了你得到的所有错误。启动 regedit.exe 并导航到`HKCR\TypeLib`并滚动到您要求的 libid。请注意 2.0\0\win32 键如何指向 MSO.DLL。那是一个 Office 类型库。

若要找到正确的 guid，请从 Visual Studio 命令提示符运行 OleView.exe。文件 + 查看 Typelib 并导航到 msado15.dll。您将在顶部看到所需的 guid，库部分的 uuid() 属性：

```
uuid(B691E011-1797-432E-907A-4D8C69339129) 
```

因此：

```
#import "libid:B691E011-1797-432E-907A-4D8C69339129" rename( "EOF", "AdoNSEOF" ) 
```

请注意，这是一个非常旧的版本，您应该使用 msado28.tlb

# c++ - 全屏运行 allegro 程序后出现屏幕分辨率问题

> ID：11467447
> 
> 赞同：0
> 
> 时间：2012-07-13T09:10:15.010
> 
> 标签：c++, allegro

我的 allegro 程序在全屏模式下运行良好，但在我退出程序后，我的桌面屏幕分辨率变得一团糟。我的印象是运行 allegro_exit(); 会将屏幕分辨率恢复到原来的样子。

我只是想知道是否有其他人遇到过这样的问题以及他们做了什么来解决它。

我在 Linux Mint 13 上运行它

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T14:09:23.573

首先，希望您至少在运行 Allegro 4.4。但即便如此，我还是强烈建议切换到 5.0 系列。第 4 版基本上已经过时，随着操作系统的变化，它变得不太可能可靠地工作。

也就是说，您可以尝试显式调用`set_gfx_mode(GFX_TEXT, 0, 0, 0, 0)`以尝试干净地退出全屏。

此外，如果您设置与桌面相同的模式，您将遇到的问题最少。例如：

```
int w, h;
get_desktop_resolution(&w, &h);
set_color_depth(desktop_color_depth());
set_gfx_mode(GFX_AUTODETECT_FULLSCREEN, w, h, 0, 0); 
```

也许`GFX_XWINDOWS_FULLSCREEN`会更好。或者也许`GFX_XDGA2`以root权限运行。如果这一切都失败了，您可能会卡在使用窗口模式。

# php - distribute php files remotely from my own site to the client's own website

> ID：11467453
> 
> 赞同：0
> 
> 时间：2012-07-13T09:10:31.320
> 
> 标签：php, api

If I am understanding correctly, it is possible not to give your code to the client by having your client connect to your web server and accesses (Only) the PHP source codes without the ability to see or edit them. I mean is just changing all of your links to the PHP files would resolve the problem or is the process way more complicated? I understand that API [which I do not know much about] would be the best solution, but how do I link these two servers together? and if it is possible to do so, can i do the same for my HTML/Javascript files?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T09:14:58.683

我会将我所有的源文件（包括 HTML/JS）打包成一个 .zip 文件，然后让您的客户端下载该文件，然后将其解压缩到他们自己的服务器上。

理想情况下，您希望使用 FTP，更快、更安全。

# php - 在 PHP 中重命名数组索引

> ID：11467458
> 
> 赞同：1
> 
> 时间：2012-07-13T09:11:04.103
> 
> 标签：php, arrays

我想分解一个日期，但想将默认索引 0、1、2 分别重命名为年、月、日，我试过但我无法弄清楚。这就是现在正在做的事情。

```
$explode_date = explode("-", "2012-09-28");
echo $explode_date[0]; //Output is 2012
echo $explode_date[1]; //Output is 09
echo $explode_date[2]; //Output is 28 
```

我想要的是

```
echo $explode_date['year']; //Output is 2012
echo $explode_date['month']; //Output is 09
echo $explode_date['day']; //Output is 28 
```

谢谢..

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-13T09:14:34.433

```
list($date['year'], $date['month'], $date['day']) = explode('-', '2012-09-28'); 
```

[http://php.net/list](http://php.net/list)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-13T09:15:29.453

使用[array_combine](http://php.net/manual/en/function.array-combine.php)：

```
$keys = array('year', 'month', 'day');
$values = explode("-", "2012-09-28");
$dates = array_combine($keys, $values); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-13T09:14:37.197

```
list($year, $month, $day)  = explode("-", "2012-09-28");
$x = compact('year', 'month', 'day');

var_dump($x); 
```

> ```
> array
>   'year' => string '2012' (length=4)
>   'month' => string '09' (length=2)
>   'day' => string '28' (length=2) 
> ```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-13T09:14:57.367

```
$explode_date = array (
    'year' => $explode_date [0],
    'month' => $explode_date [1],
    'day' => $explode_date [2]
); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-13T09:16:13.180

```
$explode_date = array();
list($explode_date['year'],$explode_date['month'],$explode_date['day']) = explode("-", "2012-09-28");

var_dump($explode_date); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-13T09:18:15.697

您必须绘制出关联：

```
$explode_date = explode("-", "2012-09-28");
$new_array['year'] = $explode_date[0];
$new_array['month'] = $explode_date[1];
$new_array['day'] = $explode_date[2]; 
```

或者，您可以使用 PHP 内置的 DateTime 类（可能更好，因为您想要做的事情已经完成）：

[http://www.php.net/manual/en/book.datetime.php](http://www.php.net/manual/en/book.datetime.php)

```
$date = new DateTime('2012-09-28');
echo $date->format('Y');
echo $date->format('m');
echo $date->format('d'); 
```

# javascript - 列表在控制器中初始化

> ID：11467461
> 
> 赞同：2
> 
> 时间：2012-07-13T09:11:18.127
> 
> 标签：javascript, extjs, sencha-touch-2

我是sencha的新手，我正在尝试根据我所在的视图加载带有参数的商店；

因此，我试图捕捉我的列表的初始化事件并在其中加载商店。

但是初始化方法似乎没有触发

我的控制器

```
Ext.define('FifaKings.controller.MainController', {
    extend: 'Ext.app.Controller',

    config: {
        views: ['Main','InsertMatch','Kings'],
        models: ['Match','User','Team'],
        stores: ['Match','Team','User'],
        refs: [
            {
                ref: 'insertMatchForm',
                selector: '#insertMatchForm'
            }
        ]
    },

    init: function() {
        console.log('Initialized!');
        Ext.Viewport.add(Ext.create('FifaKings.view.Main'));

        this.control({
            'button[action=insertMatchSubmit]' : {
                tap: 'insertMatchForm'
            },
            'list[id=kingsLeagueList]' : {
                initialize: 'loadKingsMatches'
            }

        });

    },

    insertMatchForm : function(){
        var form = this.getInsertMatchForm();

        form.submit({
            url:'contact.php'
        });
    },

    loadKingsMatches : function(){
        console.log('shit is working');
    }
}); 
```

我的观点：

```
Ext.define('FifaKings.view.Kings', {
    extend: 'Ext.navigation.View',

    requires:[
        'Ext.dataview.List'
    ],
    xtype:'kingspanel',
    config: {
        title: 'Kings',
        iconCls: 'star',

        items: {
            xtype: 'list',
            id:'kingsLeagueList',
            itemTpl: new Ext.XTemplate(
                '<table width="100%" border="0">',
                    '<tr>',
                    '<td width=\"35%\">{Player1}</td>',
                    '<td width=\"30%\" align=\"center\">{ScorePlayer1} - {ScorePlayer2}</td>',
                    '<td width=\"35%\" align=\"right\">{Player2}</td>',
                    '</tr>',
                '</table>'
        ),
        store: 'Match'

        }

    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T12:47:36.590

要引用您的列表，您应该执行以下操作：

```
 this.control({
     'button[action=insertMatchSubmit]' : {
         tap: 'insertMatchForm'
     },
     'kingspanel list' : {
         initialize: 'loadKingsMatches'
     }
 }); 
```

我从不使用 ids，以防我必须创建两个相同的组件

希望这可以帮助

# image - Create Slideshow images

> ID：11467462
> 
> 赞同：0
> 
> 时间：2012-07-13T09:11:18.493
> 
> 标签：image, blackberry, slideshow

I am newbie for Blackberry Application Programming. I still learn about VerticalFieldManager and how to add Image. Now, I can set header with logo after a weeks. But today I have a problem about slideshow image. I need to create slideshow image after header ( logo ) , I got the images from array and I want put that image into 1 VerticalFieldManager below Header.

Can someone can help me, how to make it? Thx

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T13:56:30.703

Use a PictureScrollField: [http://docs.blackberry.com/en/developers/deliverables/18125/Picture_scroll_field_1204071_11.jsp](http://docs.blackberry.com/en/developers/deliverables/18125/Picture_scroll_field_1204071_11.jsp)

# json - Store the static json string into an string

> ID：11467466
> 
> 赞同：0
> 
> 时间：2012-07-13T09:11:38.967
> 
> 标签：json, nsstring, apex-code

I tried to store the json string in this below manner

```
NSString * str =@"{"CategoryID":1,"ItemCount":1,"level":1,"Name":"Boots","Description":"Boots descrition","childs":[{"CategoryID":2,"ItemCount":1,"level":2,"Name":"Cold Water","Description":"Cold Water Description","childs":[]}]}]"; 
```

I got an error message.I know it is a very small solution. And i tried so many NSString methods but i did n't get the solution. How will i store this string ?

Thanks in advance...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T09:29:13.870

最后我得到了我的问题的解决方案

我们需要通过以下方式传递字符串。

```
 NSString*str=@{\"CategoryID\":1,\"ItemCount\":1,\"level\":1,\"Name\":\"Boots\",\"Description":\"Boots descrition\",\"childs\"[{\"CategoryID\":2,\"ItemCount\":1,\"level\":2,\"Name\":\"Cold Water\",\"Description\":\"Cold Water Description\",\"childs\":[]}]}]; 
```

# selenium - How to check if an alert exists using WebDriver?

> ID：11467471
> 
> 赞同：85
> 
> 时间：2012-07-13T09:12:00.197
> 
> 标签：selenium, webdriver, alert

I need to check the existence of Alert in WebDriver.

Sometimes it pops up an alert but sometimes it will not pop up. I need to check if the alert exists first, then I can accept or dismiss it or it will say: no alert found.

* * *

## 回答 #1

> 赞同：90
> 
> 时间：2012-07-13T09:22:47.383

```
public boolean isAlertPresent() 
{ 
    try 
    { 
        driver.switchTo().alert(); 
        return true; 
    }   // try 
    catch (NoAlertPresentException Ex) 
    { 
        return false; 
    }   // catch 
}   // isAlertPresent() 
```

检查此处的链接[https://groups.google.com/forum/?fromgroups#!topic/webdriver/1GaSXFK76zY](https://groups.google.com/forum/?fromgroups#!topic/webdriver/1GaSXFK76zY)

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2015-06-16T22:04:02.120

以下（C# 实现，但在 Java 中类似）允许您确定是否存在警报而没有异常并且不创建`WebDriverWait`对象。

```
boolean isDialogPresent(WebDriver driver) {
    IAlert alert = ExpectedConditions.AlertIsPresent().Invoke(driver);
    return (alert != null);
} 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2012-07-16T02:58:32.247

我建议使用[ExpectedConditions](http://selenium.googlecode.com/svn/trunk/docs/api/java/org/openqa/selenium/support/ui/ExpectedConditions.html)和[alertIsPresent()](http://selenium.googlecode.com/svn/trunk/docs/api/java/org/openqa/selenium/support/ui/ExpectedConditions.html#alertIsPresent%28%29)。ExpectedConditions 是一个包装类，它实现了[ExpectedCondition](http://selenium.googlecode.com/svn/trunk/docs/api/java/org/openqa/selenium/support/ui/ExpectedCondition.html)接口中定义的有用条件。

```
WebDriverWait wait = new WebDriverWait(driver, 300 /*timeout in seconds*/);
if(wait.until(ExpectedConditions.alertIsPresent())==null)
    System.out.println("alert was not present");
else
    System.out.println("alert was present"); 
```

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2013-08-12T08:21:59.260

我发现在(FF V20 & selenium-java-2.32.0)中捕获异常`driver.switchTo().alert();`非常慢。``Firefox`

所以我选择了另一种方式：

```
 private static boolean isDialogPresent(WebDriver driver) {
        try {
            driver.getTitle();
            return false;
        } catch (UnhandledAlertException e) {
            // Modal dialog showed
            return true;
        }
    } 
```

当您的大多数测试用例都不存在对话框时，这是一种更好的方法（抛出异常很昂贵）。

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2015-07-16T11:34:35.633

我建议使用[ExpectedConditions](http://selenium.googlecode.com/svn/trunk/docs/api/java/org/openqa/selenium/support/ui/ExpectedConditions.html)和[alertIsPresent()](http://selenium.googlecode.com/svn/trunk/docs/api/java/org/openqa/selenium/support/ui/ExpectedConditions.html#alertIsPresent%28%29)。ExpectedConditions 是一个包装类，它实现了[ExpectedCondition](http://selenium.googlecode.com/svn/trunk/docs/api/java/org/openqa/selenium/support/ui/ExpectedCondition.html)接口中定义的有用条件。

```
public boolean isAlertPresent(){
    boolean foundAlert = false;
    WebDriverWait wait = new WebDriverWait(driver, 0 /*timeout in seconds*/);
    try {
        wait.until(ExpectedConditions.alertIsPresent());
        foundAlert = true;
    } catch (TimeoutException eTO) {
        foundAlert = false;
    }
    return foundAlert;
} 
```

* * *

*注意：这是基于 nilesh 的回答，但适用于捕获由 wait.until() 方法抛出的 TimeoutException。*

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2018-06-19T17:09:50.867

`ExpectedConditions`已过时，因此：

```
 WebDriverWait wait = new WebDriverWait(driver, TimeSpan.FromSeconds(15));
        wait.Until(SeleniumExtras.WaitHelpers.ExpectedConditions.AlertIsPresent()); 
```

[C# Selenium 'ExpectedConditions 已过时'](https://stackoverflow.com/questions/49866334/c-sharp-selenium-expectedconditions-is-obsolete][1])

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2018-04-17T10:40:15.627

此代码将检查警报是否存在。

```
public static void isAlertPresent(){
    try{
    Alert alert = driver.switchTo().alert();
    System.out.println(alert.getText()+" Alert is Displayed"); 
    }
    catch(NoAlertPresentException ex){
    System.out.println("Alert is NOT Displayed");
    }
    } 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2018-03-19T14:33:25.557

```
public static void handleAlert(){
    if(isAlertPresent()){
        Alert alert = driver.switchTo().alert();
        System.out.println(alert.getText());
        alert.accept();
    }
}
public static boolean isAlertPresent(){
      try{
          driver.switchTo().alert();
          return true;
      }catch(NoAlertPresentException ex){
          return false;
      }
} 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2017-12-17T05:21:16.250

公共布尔 isAlertPresent() {

```
try 
{ 
    driver.switchTo().alert(); 
    system.out.println(" Alert Present");
}  
catch (NoAlertPresentException e) 
{ 
    system.out.println("No Alert Present");
} 
```

}

# ruby-on-rails - Rails - 使用 ajax 处理多个动态字段

> ID：11467482
> 
> 赞同：0
> 
> 时间：2012-07-13T09:12:45.287
> 
> 标签：ruby-on-rails, ajax

我的 Rails 应用程序中有一个模型`foo`，在索引页面中，所有模型`foos`都列在表格中。每个`foo`都有 2 个整数属性：quarto 和 jesolo。

![在此处输入图像描述](../Images/935442d02bf28c2811a9af9f894d4df8.png)

我通过以下方式为 html 数字字段提供不同的 id：

**富 #1**

第一个字段：foo1_quarto

第二场：foo1_jesolo

**富 #2**

第一个字段：foo2_quarto

第二场：foo2_jesolo

抄送...

目前，我正在使用以下 ajax 代码（用咖啡脚本编写）使用户输入`foo1_quarto`也反映在`foo1_jesolo`：

```
$("#foo1_quarto").keyup ->
    a = parseInt document.getElementById("foo_quarto").value
    $("#foo1_jesolo").val a 
```

但现在我需要序列化它。事先不知道会有多少食物，**我想要一段覆盖所有食物的ajax代码**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T10:08:40.113

不确定我是否理解您的英语，但您不能像这样收集所有输入并序列化它们吗？

```
$("input").serialize -> 
```

所以在 AJAX 调用中它将是：

```
$.ajax '/',
    type: 'POST'
    data: $("#my_form input").serialize ->
    dataType: 'script' error: (jqXHR, textStatus, errorThrown) ->
        $('body').append "AJAX Error: #{textStatus}"
    success: (data, textStatus, jqXHR) ->
        $('body').append "Successful AJAX call: #{data}" 
```

此外，我个人会偏离使用唯一 ID 的`keyup`方法。这样，您就不必为每个项目编写相同的内容。

相反，我会让每个人共享一个公共类`.foo_input`和/或`.other_foo`，并像这样写：

```
$(".foo_input").keyup ->
    $(this).sibling(".other_foo").val $(this).value 
```

但理想情况下，您将使用一个类并使用 jQuery 选择器来访问它。不确定您的 HTML 是如何设置的。

# java - How to implement Java RMI to get non-connected client ip/hostnames

> ID：11467487
> 
> 赞同：0
> 
> 时间：2012-07-13T09:12:54.113
> 
> 标签：java, rmi

i have a RMI server and RMI client. If the client is running its version of RMI that i made and is ready to receive connections, how can i on the Server side get the IP/Hostname of the client even if the client is not connected to me?

I was thinking of creating a remote method that will call the client to send their IP/Hostname to my server side, but that would require me to know the Client IP/Hostname to be connected to inorder to invoke the method.

The purpose of this program is to create a monitoring program to monitor what are students doing on their labs, as a teacher.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T10:15:34.333

> 即使客户端未连接到我，我如何在服务器端获取客户端的 IP/主机名？

这在术语上是矛盾的。如果没有连接，则没有当前客户端。如果您在远程方法调用期间需要当前客户端，请参阅`RemoteServer.getClientHost()`。如果您想要在远程方法调用期间以外的数据，您可以在远程方法调用期间收集它，但是您将很难决定何时删除客户端，除非客户端有义务调用`logout()`方法或类似的方法。您可以在`Unreferenced.unreferenced()`方法如果有帮助。但是您需要完全摆脱 RMI 中的“连接”概念。基本上没有这样的事情。连接在调用期间存在，并且在实现所需的任何额外范围内都存在，但是无法在服务器或客户端中获取它们，因此您最好设计为好像它们不存在一样，并且尽管客户端不存在，除非在远程调用期间。

*或者*使用我的远程会话模式，试试谷歌。

# jasper-reports - iReport JRXML 无法导入到 JasperServer？

> ID：11467490
> 
> 赞同：0
> 
> 时间：2012-07-13T09:13:07.963
> 
> 标签：jasper-reports, ireport, jasperserver

我已经使用 OLAP 连接和 MDX 查询创建了报告表单 iReport。作为输出，我从 iReport 获得了 .jrxml 文件。现在我想通过 Jasper 服务器安排该报告......所以我试图在 JasperServer 中导入那个 .jrxml 文件。

但我收到了这个错误

```
The selected JRXML could not be parsed. You might have selected the wrong file. 
```

我不知道出了什么问题.. 如何在 JasperServer 中导入这个文件。

我正在使用 iReport 4.6 和 JasperServer 4.5

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T06:58:32.297

我自己找到了解决方案..它只是问题的最后一行。

我在*JasperServer* 4.5中使用*iReports* 4.6 版。*JasperServer* 4.5 与*iReports* 4.6 不兼容。

 ***我切换到*iReports* 4.5，问题就消失了。***

# jpa - 持久性三重关联 JPA/EclipseLink

> ID：11467491
> 
> 赞同：1
> 
> 时间：2012-07-13T09:13:11.543
> 
> 标签：jpa, persistence, associations, eclipselink

我目前正在使用 Java EE/EclipseLink 和 postgreSQL 开发一个 Web 应用程序。关于我的实体，我特别管理“项目”、“用户”和“权限”（读取、写入、删除等访问权限...）。这些实体之间的关系是：一个项目可以有多个对项目具有不同权限的用户。因此，我得到了三重关联：项目+用户+权利。

在这个协会的坚持中，我遇到了一个烦人的问题。当我用它的信息持久化一个项目时，一切都很好（它在数据库中，我可以在我的应用程序中使用它），我也拥有持久的权限和用户。然后，我想在它们之间添加一个关联，所以我创建了一个名为 ProjectUserRight 的关联实体，我从现有实体中设置了项目、用户和权限，但是当我坚持它时，我得到以下异常：

```
org.springframework.web.util.NestedServletException: Request processing failed; nested exception is javax.persistence.RollbackException: Exception [EclipseLink-4002] (Eclipse Persistence Services - 2.3.2.v20111125-r10461): org.eclipse.persistence.exceptions.DatabaseException
Internal Exception: org.postgresql.util.PSQLException: ERREUR: une valeur NULL viole la contrainte NOT NULL de la colonne « id_project »
Error Code: 0
Call: INSERT INTO project_user_right (id_right, id_project, id_user) VALUES (?, ?, ?)
bind => [3 parameters bound]
Query: InsertObjectQuery(ProjectUserRight@192db555) 
```

这是类项目：

```
@Entity
@Table(name="project")
public class Project implements Serializable {
private static final long serialVersionUID = 1L;

@Id
@GeneratedValue(strategy=GenerationType.IDENTITY)
@Column(name="id_project", unique=true, nullable=false)
private Integer idProject;

   //bi-directional many-to-one association to ProjectUserRight
@OneToMany(mappedBy="project", cascade={CascadeType.ALL})
private Set<ProjectUserRight> projetUtilDroits;

  ... 
```

类用户：

```
 @Entity
 @Table(name="user")
 public class User implements Serializable {
private static final long serialVersionUID = 1L;

@Id
@GeneratedValue(strategy=GenerationType.IDENTITY)
@Column(name="id_user", unique=true, nullable=false)
private Integer idUser;

@Column(name="nom_utilisateur", nullable=false, length=50)
private String userName;

   //bi-directional many-to-one association to ProjectUserRight
@OneToMany(mappedBy="user")
private Set<ProjectUserRight> projetUtilDroits;

   ... 
```

右类：

```
 @Entity
   @Table(name="right")
   public class Right implements Serializable {
private static final long serialVersionUID = 1L;

@Id
@GeneratedValue(strategy=GenerationType.IDENTITY)
@Column(name="id_right", unique=true, nullable=false)
private Integer idRight;

@Column(name="type_right", nullable=false, length=10)
private String typeRight;

//bi-directional many-to-one association to ProjectUserRight
@OneToMany(mappedBy="right")
private Set<ProjectUserRight> projetUtilDroits;

    ... 
```

和关联类：

```
 @Entity
 @Table(name="project_user_right")
 public class ProjectUserRight implements Serializable {
private static final long serialVersionUID = 1L;

@EmbeddedId
private ProjectUserRightPK id;

//bi-directional many-to-one association to Right
    @ManyToOne(cascade={CascadeType.MERGE, CascadeType.REFRESH})
@JoinColumn(name="id_right", insertable=false, updatable=false)
private Right right;

//bi-directional many-to-one association to Project
@ManyToOne(cascade={CascadeType.MERGE, CascadeType.REFRESH})
@JoinColumn(name="id_project", insertable=false, updatable=false)
private Project project;

//bi-directional many-to-one association to User
@ManyToOne(cascade={CascadeType.MERGE, CascadeType.REFRESH})
@JoinColumn(name="id_user", insertable=false, updatable=false)
private User user; 
```

和 ProjectUserRightPK （评论后编辑）：

```
@Embeddable
public class ProjectUserRightPK implements Serializable {
//default serial version id, required for serializable classes.
private static final long serialVersionUID = 1L;

@Column(name="id_project", unique=true, nullable=false)
private Integer idProject;

@Column(name="id_right", unique=true, nullable=false)
private Integer idRight;
    ...//getters and setters
@Column(name="id_user", unique=true, nullable=false)
private Integer idUser; 
```

我编写了以下代码来保持关联：

```
 Project project = getService(Projet.class).getFromID(projectId);//retrieve the existing project from database with id

 User user = getService(Utilisateur.class).getFromID(userId);//retrieve the existing user from database with id

 Right right = getService(Right.class).getFromID(rightId);//retrieve the existing right from database with id
 if(project !=null && user!=null && right!=null){
   ProjectUserRight pud = new ProjectUserRight();
   pud.setRight(right);
   pud.setProject(project);
   pud.setUser(user);
   project.getProjectUserRights().add(pud);
   right.getProjectUserRights().add(pud);
   user.getProjectUserRights().add(pud);
   service(ProjetUtilDroit.class).persist(pud);//call the persist function on this entity (works fine with all other entities)
   } 
```

我也尝试合并项目而不是保留关联，但我得到了同样的错误......（我还检查了 id 项目并且它设置正确）我想知道它是否是错误注释的关联但我可以'找不到合适的方法来改变它。

所以，我真的需要你的帮助！:-)

提前感谢您的建议！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T11:22:22.007

你错过了[`@MapsId`](http://docs.oracle.com/javaee/6/api/javax/persistence/MapsId.html)注释：

> 指定为 EmbeddedId 主键、EmbeddedId 主键中的属性或父实体的简单主键提供映射的 ManyToOne 或 OneToOne 关系属性。value 元素指定关系属性对应的复合键中的属性。

```
@MapsId("idRight")
@ManyToOne(cascade={CascadeType.MERGE, CascadeType.REFRESH})
@JoinColumn(name="id_right")
private Right right;

@MapsId("idProject")
@ManyToOne(cascade={CascadeType.MERGE, CascadeType.REFRESH})
@JoinColumn(name="id_project")
private Project project;

@MapsId("idUser")
@ManyToOne(cascade={CascadeType.MERGE, CascadeType.REFRESH})
@JoinColumn(name="id_user")
private User user; 
```

# vhdl - 在 VHDL 中定义 Matrix2D 的初始值

> ID：11467493
> 
> 赞同：3
> 
> 时间：2012-07-13T09:13:25.950
> 
> 标签：vhdl, fpga

我在将初始值零赋予 VHDL 中的 matrix2D 信号类型时遇到问题。我将其定义如下：

```
type matrix2D is array (integer range <> , integer range <> ) of signed(2 downto 0); 
```

在我的初始值的 VHDL 代码中，我写道：

```
process(matrix1, matrix2, s_out_adder)
  variable v_flipflop_adder: matrix2D(0 to 4, 0 to 4) :=((0 to 4),(others =>(others=>'0')));
begin   
.... 
```

但不幸的是，它不起作用。

有谁知道我如何为 matrix2D 定义初始值零？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-13T10:35:34.967

[我的Ashenden](http://www.ashenden.com.au/designers-guide/)状态副本的第 86 页

> > > 我们还可以使用聚合来编写多维数组值。在这种情况下，我们将数组视为一个数组数组，首先为每个最左边的索引值编写一个数组聚合。

这是您的示例所需要的：

```
variable v_flipflop_adder_simple_init: matrix2D(0 to 4, 0 to 4) :=
       (others => (others => (others => '0'))); 
```

这是一个更复杂的：

```
variable v_flipflop_adder: matrix2D(0 to 4, 0 to 5) :=
       (      4 => (1 => "001", others => "101"),
         others => (5 => "110", others => "010")); 
```

# playframework-2.0 - 如何更新 playframework 2.0.2 中的现有对象？又名 1.2.x 中的 CRUD

> ID：11467503
> 
> 赞同：3
> 
> 时间：2012-07-13T09:14:02.433
> 
> 标签：playframework-2.0

尝试在很多文档中查找信息，但似乎找不到正确的答案。

我的场景： 1\. 使用表单（GUI）创建对象 2\. 提交 - 保存。3\. 重新打开对象（从列表中选择） 4\. 编辑对象 5\. 保存对现有对象的更新。

问题似乎是如何将现有对象的 ID 绑定到表单上的字段。

谢谢。

诗人

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-13T12:18:07.900

请参阅示例中的代码以更新对象

```
public static Result update(Long id) {
    Form<Computer> computerForm = form(Computer.class).bindFromRequest();
    if(computerForm.hasErrors()) {
        return badRequest(editForm.render(id, computerForm));
    }
    computerForm.get().update(id);
    flash("success", "Computer " + computerForm.get().name + " has been updated");
    return GO_HOME;
} 
```

整个示例可在您的播放目录或[github 上找到](https://github.com/playframework/Play20/tree/master/samples/java/computer-database)

# android - 使用 sql 查询将数据库加载到 Ormlite

> ID：11467504
> 
> 赞同：0
> 
> 时间：2012-07-13T09:14:03.123
> 
> 标签：android, sqlite, ormlite

我已经写了一堆 sql 创建表查询和注入。如何使用 Ormlite 将这些加载到我的 android 应用程序中？据我了解，示例中的数据库是这样创建的：

```
 @DatabaseField(generatedId = true)
        private Integer id;

        @DatabaseField
        private String description;
...
    TableUtils.createTable(connectionSource, Thing.class); 
```

我想用 ex 自动执行此操作：

```
CREATE TABLE "History" ("_id" INTEGER PRIMARY KEY  NOT NULL , "date" DATETIME, "program_id" INTEGER, "FOREIGN KEY(program_id) REFERENCES Program (_id)" ); 
```

最好的办法是从添加 i 资源的文本文件中读取。

如您所见，我对此有些困惑，可以这样做吗？还应该提到我使用外键，是否支持？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T14:30:38.730

在我看来，您需要将您的对象与您的 create 语句相匹配。例如，如果要执行以下创建语句：

```
CREATE TABLE "History" ("_id" INTEGER PRIMARY KEY  NOT NULL ,
    "date" DATETIME, "program_id" INTEGER,
    "FOREIGN KEY(program_id) REFERENCES Program (_id)" ); 
```

那么你应该构造下面的Java来对应它：

```
 public class History {
      // maybe generatedId = true
      @DatabaseField(columnName = "_id", nullable = false, id = true)
      public int id;
      @DatabaseField(/* not sure if you need to set a date type here */
      public Date date;
      @DatabaseField(foreign = true, columnName = "program_id")
      public Program program;
 }

 public class Program {
      // maybe generatedId = true
      @DatabaseField(columnName = "_id", nullable = false, id = true)
      public int id;
      ...
 } 
```

您可以自己创建，然后调整相应的 Java 类，以便它们能够持久保存到表中——将列与字段匹配。

# windows-8 - 桌面版 windows 8 会与平板电脑和 WP8 共享相同的源代码吗

> ID：11467509
> 
> 赞同：1
> 
> 时间：2012-07-13T09:14:22.020
> 
> 标签：windows-8, windows-phone

我想知道，我们是否可以为桌面、笔记本电脑和手机（wp8）的 Windows8 使用相同的代码库？

问候

Rakesh Shankar.p

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T10:11:56.260

微软自豪地宣布他们将共享相同的内核，并且原生编码将可供开发人员使用（同样，如果您考虑 Windows Mobile）。

有多少分享还有待观察；在这个阶段，对于 MVVM 应用程序，我希望视图模型（和模型）无需更改代码即可共享，并且在手机平台上为较小分辨率提供专用视图是值得的。当然，我的水晶球并不比任何其他非内行者好。

值得注意的是，[桌面上 Metro 应用程序的最低屏幕分辨率为 1024x768](http://msdn.microsoft.com/en-us/library/windows/apps/hh780612.aspx#minimum_screen_resolutions)，而 Windows Phone 8 将支持 800x480

# iphone - 从 au CustomCell 推送 ViewController

> ID：11467510
> 
> 赞同：1
> 
> 时间：2012-07-13T09:14:24.330
> 
> 标签：iphone, pushviewcontroller, custom-cell

我创建了一个名为“CustomPreviCell”的自定义单元格（它的 NIb 名称和此 NIB 中单元格的标识符）。我的 customCell 包含 6 个标签和一个 imageView。与此单元格对应的 .m 文件如下：

```
@interface CustomPreviCell : UITableViewCell

@property (weak, nonatomic) IBOutlet UIImageView *iconImageView;
@property (weak, nonatomic) IBOutlet UILabel *weatherLabel;
@property (weak, nonatomic) IBOutlet UILabel *detailOneLabel;
@property (weak, nonatomic) IBOutlet UILabel *detailTwoLabel;
@property (weak, nonatomic) IBOutlet UILabel *dayNumberLabel;
@property (weak, nonatomic) IBOutlet UILabel *dayTextLabel;
@property (weak, nonatomic) IBOutlet UILabel *monthLabel;

@end 
```

和实施：

```
#import "CustomPreviCell.h"

@implementation CustomPreviCell
@synthesize iconImageView;
@synthesize weatherLabel;
@synthesize detailOneLabel;
@synthesize detailTwoLabel;
@synthesize dayNumberLabel;
@synthesize dayTextLabel;
@synthesize monthLabel;

- (id)initWithStyle:(UITableViewCellStyle)style reuseIdentifier:(NSString *)reuseIdentifier
{
    self = [super initWithStyle:style reuseIdentifier:reuseIdentifier];
    if (self) {
        // Initialization code
    }
    return self;
}

- (void)setSelected:(BOOL)selected animated:(BOOL)animated
{
    [super setSelected:selected animated:animated];

}

@end 
```

现在，我想在 tableView 中显示这个单元格（当然！）。所以在我的故事板中，我创建了一个带有一个 CustomCell 原型的新 UITableView，我将视图引用到我的类“SinglePrevViewController”，它扩展了“UITableViewController”。我为 tableView 实现了经典方法（numberOfRowsInSection：等......）。

在“cellForRowAtIndexPath”方法中，我想创建、初始化和显示我的自定义单元格，所以我写道：

```
NSString *simpleTableIdentifier = @"CustomCellPrevi";
CustomPreviCell *cell = (CustomPreviCell *)[tableView dequeueReusableCellWithIdentifier:simpleTableIdentifier];
NSArray *topLevelObjects = [[NSBundle mainBundle] loadNibNamed:@"CustomCellPrevi" owner:self options:nil];

for (id currentObject in topLevelObjects){
    if ([currentObject isKindOfClass:[CustomPreviCell class]]){
        cell = (CustomPreviCell *)currentObject;

        NSString * iconName = [self loadIcon:indexPath.row];
        [cell.iconImageView setImage:[UIImage imageNamed:iconName]];
        cell.detailOneLabel.text = [[NSString alloc] initWithFormat:@"%@°C - %@mm",[descriptor.temperature objectAtIndex:indexPath.row], [descriptor.precipitations objectAtIndex:indexPath.row]];
        cell.detailTwoLabel.text = [[NSString alloc] initWithFormat:@"%@ (%@) km/h - %@hPa",[descriptor.vent objectAtIndex:indexPath.row],[descriptor.rafales objectAtIndex:indexPath.row], [descriptor.pression objectAtIndex:indexPath.row]];
        cell.weatherLabel.text = [descriptor.temps objectAtIndex:indexPath.row];
        NSDictionary * date = [self getDateComponentsFromXMLDate:[descriptor.date objectAtIndex:indexPath.row]];

        if([[date valueForKey:@"dayNumber"] intValue] %2 == 0)
            [cell.contentView setBackgroundColor:[UIColor colorWithWhite:1 alpha:0.0]];
        else 
            [cell.contentView setBackgroundColor:[UIColor colorWithWhite:1 alpha:0.15]];

        cell.dayTextLabel.text = [date valueForKey:@"dayText"];
        cell.dayNumberLabel.text = [[NSString alloc] initWithFormat:@"%@ %@",[date valueForKey:@"dayNumber"],[date valueForKey:@"month"]];
        cell.monthLabel.text = [date valueForKey:@"hour"];

    }
}
return cell; 
```

让我们启动我的应用程序：它工作正常！我的 tableView 包含我的 CustomPrevCells 并正确显示内容。但是......当我想从这些单元格中推送一个新的 viewController 时，它不起作用。我已将我的 customCell（从情节提要中 TableView 中的单元格）连接到新的 viewcontroller（名为 DetailPrevViewcontroller），但它什么也没做。我的 customCell 刚刚被选中。

请帮忙 ：）

**编辑1：**

```
 -(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    NSLog(@"Hey !");
    if([segue.identifier isEqualToString:@"propertiesSegue"])
    {
        NSLog(@"Hello");
        SingleVillePropertiesViewController * destinationController = [segue destinationViewController];
        [destinationController setVille:ville];
    }
    else if([segue.identifier isEqualToString:@"detailPreviSegue"])
    {
        DetailPreviViewController * destController = [segue destinationViewController];
        [[self navigationController] pushViewController:destController animated:YES];

        //TODO : set previDescriptor to my destController but it's not important 
        //       for this problem.
    }
} 
```

**编辑 2：** 好的，我还没有解决这个问题，但我通过这样做摆脱了它：

1/ 为要推送的视图控制器创建一个新的 nib（不在情节提要中）

2/ 将它设置为您的 ViewController 的类（在我的情况下为 DetailPrevViewController）和 FilesOwner 的视图到 NIB 视图

3/ 使用 navigationController 从方法“didSelectRowAtPath”推送视图。

我不喜欢这种方式进行，但它是目前唯一可行的方式......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T09:26:38.387

确保您已连接情节提要中的**单元格**，而不是整个视图控制器。这很容易发生。一种方法是首先**选择**单元格，然后进行拖动。

没有必要实施`didSelectRowAtIndexPath`。这将使整个故事板变得毫无用处......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T09:24:04.073

*segues的编辑答案：*

尝试实现这个

```
-(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    NSLog(@"prepareForSegue: %@", segue.identifier);

    if ([segue.identifier isEqualToString:@"A"]) {
        [segue.destinationViewController setValue1:@"something"];
        // Maybe you have to alloc init your view controller also

    } else if ([segue.identifier isEqualToString:@"B"]) {
        [segue.destinationViewController setValue1:@"something else"];
    }
} 
```

# java - Jenkins 中的 Cobertura 和跳过 Java 日志记录 (isLoggable)

> ID：11467511
> 
> 赞同：1
> 
> 时间：2012-07-13T09:14:27.423
> 
> 标签：java, maven, logging, cobertura, java.util.logging

我目前正在成为一名 TDD 黑客。作为其中的一部分，我认为像 Cobertura 生成的代码覆盖率报告是必不可少的工具。

但是，我的代码覆盖率有些臃肿，因为以下代码没有被正确覆盖：

```
if(logger.isLoggable(Level.INFO)) {
    logger.info("blah blah blah");
} 
```

我在 Jenkins 和 Maven 中运行报告（不知道这可能是个问题吗？）。`isLoggable(Level.INFO)`（在我的情况下）总是正确的，因此它进入并记录。我希望能够跳过该部分或能够设置`isLoggable(Level.XX)`为真和假。

任何想法，提示等？也许我忽略了一些东西，一切都非常感谢！:)

[编辑] 似乎是 Maven cobertura 插件中的一个错误，应该在 2.6 中修复：http: [//jira.codehaus.org/browse/MCOBERTURA-52](http://jira.codehaus.org/browse/MCOBERTURA-52) 但 2.6 尚未发布，所以我只需要等待... [/编辑]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T09:20:42.140

当您检测类时，您可以忽略某些方法/调用。报告是在那之后的一步。

使用 ant 可以这样完成（[文档](http://cobertura.sourceforge.net/anttaskreference.html)中的示例）。Maven 可能具有相同的选项，但这取决于您使用的 Maven 插件。：

```
<cobertura-instrument todir="${instrumented.dir}">
    <ignore regex="java.util.logging.*" />
    <fileset dir="${classes.dir}">
        ...
    </fileset>
</cobertura-instrument> 
```

您只需为要从检测中排除的包设置一个忽略正则表达式，这样它们就不会显示在报告中。

使用 Maven 这应该可以工作：

```
<instrumentation>
    <ignores>
       <ignore>java.util.logging.*</ignore>
    </ignores>
</instrumentation> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T12:02:28.290

有一篇不错的文章详细解释了如何从 cobertura 仪器中排除日志记录调用。 [http://fahdshariff.blogspot.gr/2010/01/cobertura-ignore-logger-calls.html](http://fahdshariff.blogspot.gr/2010/01/cobertura-ignore-logger-calls.html) 和一个类似的问题在这里发布：[Exclude methods from code coverage with Cobertura](https://stackoverflow.com/questions/951569/exclude-code-from-code-coverage-with-cobertura)

我认为您可能会发现这两个链接都很有用

# jakarta-ee - 不同应用服务器上的 JNDI 查找

> ID：11467514
> 
> 赞同：3
> 
> 时间：2012-07-13T09:14:38.257
> 
> 标签：jakarta-ee, jboss, glassfish, weblogic, jndi

我有一个内部带有 ejb 模块和 SomeService 的 EAR 应用程序：

```
some-ear.ear -> some-ejb.jar -> SomeBean implements ISomeBean 
```

在 Java EE 规范中，我看到这个 bean 的 JNDI 名称应该是

```
java:comp/env/ISomeService 
```

**当我在WebLogic 10.3**上部署我的应用程序时 运行`new InitialContext().lookup("java:comp/env/ISomeService");`良好

现在我在**JBoss 4.2.3**上部署这个应用程序，我在日志中看到以下内容：

```
DEBUG [org.jboss.ejb3.stateless.BaseStatelessProxyFactory] Binding proxy for SomeBean in JNDI at some-ear/SomeBean/local 
```

我的天啊！我的 bean 的 JNDI 名称是`some-ear/SomeBean/local`并且
`new InitialContext().lookup("java:comp/env/ISomeService");`- 不工作
`new InitialContext().lookup("some-ear/SomeBean/local");`- 运行良好

现在我在**GlassFish 3.1**上部署我的应用程序，我在日志中看到以下内容：

```
Portable JNDI names for EJB SomeBean : [java:global/some-ear/some-jar/SomeBean ... 
```

又是新的 JNDI 名称！

`new InitialContext().lookup("java:global/some-ear/some-jar/SomeBean");`- 效果很好

您能否向我解释为什么在不同的 AS 上存在同一个 bean 的不同 JNDI 名称以及为什么这个 JNDI 名称与 Java EE 规范不同？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-13T13:05:29.790

JavaEE 命名混乱是一个由来已久的问题，直到 JavaEE6 规范解决了它。现在我们有了 Java EE AppServer 的各种组件的标准命名空间。公平地说，您应该比较 Java EE 6 AppServer，如 JBossAS7、Websphere 8、Glassfish 3.1。

# php - 当 A 类扩展 B 类并且它们都具有相同的属性时

> ID：11467521
> 
> 赞同：1
> 
> 时间：2012-07-13T09:14:58.677
> 
> 标签：php, class, extends

我有 A 类和 B 类。A 类扩展了 B 类。

它们都有属性 $fields，其中 $fields 是一个数组，例如：

A类字段

```
public $fields = array( 'id'=>'', 'product'=>'', 'productXpath'=>'', 'price'=>'', 'priceXpath'=>'', 'currency'=>'', 'website_url'=>'', 'url_id'=>'', 'day'=>'', 'month'=>'', 'year'=>'', 'time'=>'', 'status'=>'' ); 
```

B类字段

```
public $fields = array( 'id'=>'', 'website'=>'', 'visits'=>'', 'plugin_id'=>'', 'status'=>'' ); 
```

只有数组中的结构和值不同。

我需要访问这两个属性，我该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-13T09:17:02.100

**编辑：**

如果您可以控制 B 类，只需定义一个 getter 并将其设为`$fields`私有：

```
public function getFields() {
    return $this->fields;
} 
```

然后在 A 类中，您可以执行以下操作：

```
public function getFields() {
    $parentFields = parent::getFields();
    // Do something with $parentFields
    return $this->fields;
} 
```

如果没有，则必须为`$fields`A 类中的属性指定不同的名称，以免丢失 B 类的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T09:20:55.993

将属性设为静态

```
public static $fields = array(...); 
```

并通过以下方式访问变量

```
echo ClassName::$fields; 
```

# android - android如何使菜单图标与标题并排

> ID：11467526
> 
> 赞同：1
> 
> 时间：2012-07-13T09:15:25.363
> 
> 标签：android, menu

如何使菜单图标显示在标题旁边，如操作栏图片下方？ ![操作栏](../Images/eed6a45e6b8b0ffa3889d46321b198a2.png)

这是我的程序图片，可以吗？请帮忙~谢谢

![我的程序](../Images/2101ee07e1dd747877486a573de46eb3.png)

这是我的代码

```
public void openOptionsMenu() { 
    // TODO Auto-generated method stub 
    super.openOptionsMenu(); 
}
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    //call the base class to include system menus
    super.onCreateOptionsMenu(menu);

        int group1 = 1;
        MenuItem bakchome = menu.add(group1,1,1,"Add News");
        bakchome.setIcon(R.drawable.ic_menu_add);

    return true;
}

@Override 
public boolean onOptionsItemSelected(MenuItem item) {
        switch(item.getItemId()) {
        case 1:
            ProgressDialog progress1 = new ProgressDialog(News.this);
            progress1.setMessage("Loading...please wait..");
            progress1.setTitle("Planbiz");
            new MyTask(progress1).execute();
            Intent intent1 = new Intent(getApplicationContext(), News_Edit.class);

            startActivity(intent1);
            break;

        }

    return true;
} 
```

对不起，我是新用户，无法上传图片。抱歉，如果我不能很好地解释我的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T09:33:48.037

这可能会帮助你

[在android系统中实现自定义菜单](https://stackoverflow.com/questions/7239126/implementing-custom-menu-in-android-system)

他们还谈到了定制菜单

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T09:23:03.940

您希望您的菜单项出现在我认为的操作栏中吗？

将此添加到您的菜单项：

```
android:showAsAction="true" 
```

# c# - OutofMemory 异常（裁剪图像时）

> ID：11467528
> 
> 赞同：1
> 
> 时间：2012-07-13T09:15:31.507
> 
> 标签：c#, asp.net

我正在尝试裁剪来自字节数组的图像。不幸的是，我在cropImage 函数中得到了OutofMemory 异常。这部分展示了我如何将其写入文件。

```
System.IO.MemoryStream ms = new System.IO.MemoryStream(strArr);

System.Drawing.Rectangle oRectangle = new System.Drawing.Rectangle();
oRectangle.X = 50;
oRectangle.Y = 100;
oRectangle.Height = 180;
oRectangle.Width = 240;

System.Drawing.Image oImage = System.Drawing.Image.FromStream(ms);
cropImage(oImage, oRectangle);
name = DateTime.Now.Ticks.ToString() + ".jpg";
System.IO.File.WriteAllBytes(context.Server.MapPath(name), strArr);
context.Response.Write("http://local.x.com/test/" + name); 
```

这部分是我的裁剪图像功能，很明显它在做什么..

```
private static System.Drawing.Image cropImage(System.Drawing.Image img, System.Drawing.Rectangle cropArea)
{
    System.Drawing.Bitmap bmpImage = new System.Drawing.Bitmap(img);
    System.Drawing.Bitmap bmpCrop = bmpImage.Clone(cropArea,
    bmpImage.PixelFormat);
    return (System.Drawing.Image)(bmpCrop);
} 
```

这就是我构建我的 strArr 的方式

```
System.IO.Stream str = context.Request.InputStream;
int strLen = Convert.ToInt32(str.Length);
byte[] strArr = new byte[strLen];
str.Read(strArr, 0, strLen);
string st = String.Concat(Array.ConvertAll(strArr, x => x.ToString("X2"))); // try 4 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T09:18:44.163

不建议在 ASP.NET 中使用 System.Drawing 命名空间。MSDN：

> 不支持在 Windows 或 ASP.NET 服务中使用 System.Drawing 命名空间中的类。尝试从这些应用程序类型之一中使用这些类可能会产生意想不到的问题，例如服务性能下降和运行时异常。有关受支持的替代方法，请参阅 Windows 映像组件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T09:27:52.543

我直接从字节数组中裁剪它，它只是工作:) 感谢所有尽力帮助我的人。

```
public byte[] CropImage(int x, int y, int w, int h, byte[] imageBytes)
    {
        using (MemoryStream ms = new MemoryStream(imageBytes, 0, imageBytes.Length))
        {
            ms.Write(imageBytes, 0, imageBytes.Length);
            System.Drawing.Image img = System.Drawing.Image.FromStream(ms, true);
            Bitmap bmpCropped = new Bitmap(w, h);
            Graphics g = Graphics.FromImage(bmpCropped);

            Rectangle rectDestination = new Rectangle(0, 0, bmpCropped.Width, bmpCropped.Height);
            Rectangle rectCropArea = new Rectangle(x, y, w, h);

            g.DrawImage(img, rectDestination, rectCropArea, GraphicsUnit.Pixel);
            g.Dispose();

            MemoryStream stream = new MemoryStream();
            bmpCropped.Save(stream, System.Drawing.Imaging.ImageFormat.Jpeg);
            return stream.ToArray();
        }
    } 
```

# java - 你如何获得 MOXy oxml 映射文件来识别静态类

> ID：11467530
> 
> 赞同：4
> 
> 时间：2012-07-13T09:15:36.707
> 
> 标签：java, json, jaxb, moxy

使用 MOXy 我可以在我的 json 输出中展平我的部分对象模型

IE

```
<java-type name="Medium">
  <java-attributes>
    <xml-element java-attribute="trackList" xml-path="."/>
  </java-attributes>
</java-type> 
```

但是当我想折叠一个静态类的子类时，如下所示

```
<java-type name="Medium.TrackList">
  <java-attributes>
    <xml-element java-attribute="artistList" xml-path="."/>
  </java-attributes>
</java-type> 
```

它抱怨

```
Exception Description: Could not load class [Medium.TrackList] declared in the external metadata file.  Please ensure that the class name is correct, and that the correct ClassLoader has been set.
    at org.eclipse.persistence.exceptions.JAXBException.couldNotLoadClassFromMetadata(JAXBException.java:376)
    at org.eclipse.persistence.jaxb.JAXBContext$TypeMappingInfoInput.getXmlBindingsClasses(JAXBContext.java:979)
    at org.eclipse.persistence.jaxb.JAXBContext$TypeMappingInfoInput.createContextState(JAXBContext.java:879)
    at org.eclipse.persistence.jaxb.JAXBContext.<init>(JAXBContext.java:157) 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T19:57:46.103

在 OXM 中指定内部类时，EclipseLink 实际上需要“$”分隔符。我重现了您的问题，并通过在您的 oxm 文件中更改它来修复它。

```
<java-type name="Medium$TrackList">
  <java-attributes>
    <xml-element java-attribute="artistList" xml-path="."/>
  </java-attributes>
</java-type> 
```

希望这可以帮助，

瑞克

# jquery - 如何在不触发 history.js 中的 statechange 的情况下更改状态？

> ID：11467531
> 
> 赞同：8
> 
> 时间：2012-07-13T09:15:41.313
> 
> 标签：jquery, ajax, history.js

我正在使用[history.js](https://github.com/browserstate/history.js)并且我有一个事件处理程序

```
$(window).bind('statechange', function(){
    // Loads the content representing the state via ajax
}); 
```

大多数内容更改是`History.pushState([...])`在用户单击链接或按钮时触发的。

但在某些情况下，内容更改由 javascript 直接管理（即通过更改、添加或删除 DOM 元素），无需通过 ajax 加载表示新状态的内容。

尽管如此，如果用户点击重新加载或稍后想要使用后退按钮等，我需要推送一个状态并更改 url 以反映新状态。

所以我的问题是：如何在某些情况下推送状态但避免加载内容？是否有一种标志可以传递给 statechange 事件处理程序，或者我可以完全绕过它？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-16T15:37:54.817

我也想知道这个问题。我的决定是使用全局变量。例如，您可以将 window.stateChangeIsLocal 初始化为 false：

```
window.stateChangeIsLocal = false; 
```

您的`statechange`处理程序可能看起来像这样：

```
History.Adapter.bind(window,'statechange',function(){
    if (!window.stateChangeIsLocal) {
        someAjaxLoadFunction(History.getState().url);
    }
    else {
        window.stateChangeIsLocal = false;
    }
}); 
```

当您更改状态并且不想加载新状态的内容时，只需设置`window.stateChangeIsLocal`为`true`;

也许有一些更优雅的解决方案，但我找不到它们并使用它。

# java - Javassist 强制转换和连接问题

> ID：11467541
> 
> 赞同：0
> 
> 时间：2012-07-13T09:16:14.307
> 
> 标签：java, casting, javassist

我需要实例化一个作为字符串传递的函数，并且我为“函数”对象编写了一个包装器，让我在定义函数后执行该函数。

包装器使用 JavaAssist 库，使用对象和方法作为包装器对象的字段，以及让我在包装器类之外使用函数的方法。

我的麻烦在于函数体语法，我有很多 `java.lang.VerifyError: (class: MyClass, method: myMethod signature: (*my signature, unimportant *) Expecting to find *a primitive type* on stack`

与即时演员表相关，例如

```
 Double c = (double) intVariable; 
```

我解决了（不是很好的解决方案，但它正在工作）避免那些强制转换并总是实例化定义类型的变量

```
 Double c = new Double( (String) intVariable.toString() ); 
```

现在我有另一个问题，它让我发疯：这是字符串的内容

```
Double t2 =  new Double ( (String) parametri.get("pigreco").toString() );
Double t3 = new Double ( (String) (new Integer(2)).toString() );";
Double mysum = t2;
mysum+= t3;
return my sum; 
```

t2.getClass() 和 t3.getClass() 返回 java.lang.Double 但 mysum 是 t2 和 t3 的**串联**，而不是算术和......这怎么可能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T09:55:34.303

现在我已经通过提供一个

```
public static Double sommaDouble(Double a, Double b) {
    return a+b;
} 
```

在另一个班级。我正在寻找更好的解决方案，我想了解为什么 Javaassist 的方法将“+”作为连接运算符执行

# javascript - Sequelize.js 的关联没有在页面上呈现

> ID：11467542
> 
> 赞同：0
> 
> 时间：2012-07-13T09:16:15.620
> 
> 标签：javascript, node.js, express, sequelize.js

我有两个模型。

```
var self = {
    User: sequelize.define('user', {
        id: {type: Sequelize.INTEGER,primaryKey: true,autoIncrement: true},
        name: {type: Sequelize.STRING,allowNull: false}
    }),

    Role: sequelize.define('role', {
        id: {type: Sequelize.INTEGER,primaryKey: true,autoIncrement: true},      
        name: {type: Sequelize.STRING,allowNull: false} 
   })
} 
```

我还指定了它们之间的关联。

```
self.User.belongsTo(self.Role); 
```

控制器 user.js 的一部分：

```
list: function(req, res){
   models.User.findAll({offset: offset, limit: limit}).success(function (users) {
            if (req.params.format == 'html') {
                res.render('admin/user/list.html', {
                    title: 'Users',
                    layout: layout,
                    users: users
                });
            }   else if (req.params.format == 'json') {
                res.json(users);
            }
   } 
```

在视图 list.html 中：

```
<% users.forEach(function(user){ %>
    <tr>
        <td><%= user.id %></td>
        <td><a href="/admin/user/<%= user.id %>/show.html"><%= user.name %></a></td>
        <td><%= user.getRole().name %></td>
    </tr>
<% } %> 
```

如果我们调用 /list.html，我们会在页面上为每个用户获取未定义的角色。

如果我们调用 /list.json 我们会得到：

```
[{"id":1,"name":"user1", "role_id":1},
[{"id":2,"name":"user2", "role_id":1},
[{"id":3,"name":"user3", "role_id":2},
... 
```

如何在 list.html 和 json 响应中获取每个用户的角色？或者也许有更好的方法？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-11T09:47:55.043

你需要打电话

```
models.User.findAll({offset: offset, limit: limit, include: [models.Role]}) 
```

有关更多详细信息，请参阅[http://sequelizejs.com/documentation#models-eager-loading](http://sequelizejs.com/documentation#models-eager-loading)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T18:12:42.033

没有获取关联角色的原因是，获取该用户的角色是异步处理的。这意味着 1.) 您需要使用`user.getRole().success(function(role){})`和 2.) 您需要读取控制器中的角色，因为 EJS 无法处理异步性。希望有帮助:)

# c# - 视频无法在 asp.net 页面中播放

> ID：11467545
> 
> 赞同：0
> 
> 时间：2012-07-13T09:16:20.173
> 
> 标签：c#, asp.net, html, video

我正在使用此代码在我的 asp.net 页面上播放视频。但它不起作用，请帮助我做到这一点。

我的部分代码在这里..

```
<object width="60%" height="600px">
    <param name="allowFullScreen" value="true" />
    <param name="wmode" value="transparent" />
    <param name="movie" value="../Help/Video/help.flv" />
    <embed src="../Help/Video/help.flv" width="100%" height="600px" 
        allowfullscreen="true"
        type="application/x-shockwave-flash" wmode="transparent" />
</object> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T10:17:17.983

如果是 swf 文件，它可以直接用于支持 flash 的浏览器，但对于 flv 文件，您需要使用 flv 播放器。

[ASP.NET - FLV 播放器](https://stackoverflow.com/questions/4147798/asp-net-flv-player)

[http://venkatb4me.wordpress.com/2011/03/13/how-to-play-flash-video-files-in-asp-net-using-c-net-or-vb-net/](http://venkatb4me.wordpress.com/2011/03/13/how-to-play-flash-video-files-in-asp-net-using-c-net-or-vb-net/)

# regex - 正则表达式数字范围 1-17

> ID：11467548
> 
> 赞同：4
> 
> 时间：2012-07-13T09:16:35.967
> 
> 标签：regex, numbers, range

有人可以告诉我如何将 1-17 之间的数字与正则表达式匹配：

我尝试了 [1-9]|1[0-7] 但它与 18 中的 8 匹配，例如因为第一部分。

有任何想法吗？我不想有前导零。

编辑：

问题是我正在尝试验证英国邮政编码，例如：

KW1-17（可能是KW1、KW2到KW17）……这只是外面的部分。邮政编码可能是 KW15 1BM 或 KW151BM 所以我不能只使用锚来匹配整个字符串......它变得更加复杂。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-13T09:19:33.273

您需要在正则表达式周围放置锚点，否则它将匹配子字符串：

```
^(?:[2-9]|1[0-7]?)$ 
```

我还冒昧地让你的正则表达式更有效率：

![两个正则表达式的比较](../Images/9bdcf3e096d47e8204b006dd8825c6ee.png)

# wpf - 如果 ItemsPresenter 是第一项，则触发

> ID：11467554
> 
> 赞同：0
> 
> 时间：2012-07-13T09:17:17.347
> 
> 标签：wpf, triggers, styles, presenter

我创建了一个新模板。如果 ItemsPresenter 是第一个元素，我希望它不会显示。我会用触发器解决这个问题。但我不知道我指定的条件是什么？

```
<Setter Property="Template">
    <Setter.Value>
        <ControlTemplate TargetType="{x:Type ribbon:Ribbon}">

            <!-- ... --> 

            <ContentControl x:Name="mainItemsPresenterHost" Grid.ColumnSpan="3" Grid.Row="2" Focusable="False">
                <Border x:Name="groupsBorder"
                            Background="{StaticResource &#205;}" 
                            BorderBrush="{TemplateBinding BorderBrush}"
                            BorderThickness="1,0,1,1"
                            Height="{StaticResource &#211;}"
                            SnapsToDevicePixels="True">
                    <Border BorderThickness="0,0,0,1" Margin="0,0,0,1" BorderBrush="{StaticResource &#204;}" SnapsToDevicePixels="True">
                        <ItemsPresenter Name="ItemsPresenter">
                            <ItemsPresenter.Style>
                                <Style TargetType="ItemsPresenter">
                                    <Style.Triggers>
                                        <DataTrigger ...><!-- trigger -->
                                            <Setter Property="Visibility" Value="Collapsed"></Setter>
                                        </DataTrigger>
                                    </Style.Triggers>
                                </Style>
                            </ItemsPresenter.Style>
                        </ItemsPresenter>
                    </Border>
                </Border>
            </ContentControl>

            <!-- ... --> 
```

# php - 在时间 a 和时间 b 之间显示代码不起作用

> ID：11467555
> 
> 赞同：1
> 
> 时间：2012-07-13T09:17:18.053
> 
> 标签：php, html

我正在尝试从 15:00（下午 3 点）到第二天 4:00（凌晨 4 点）显示 #1，其余时间显示 #2

但由于某种原因它不起作用？！

这是我的代码谢谢你的帮助

```
<?php
$least=mktime(15,0,0,date("m"),date("d"),date("y"));
$most=mktime(28,0,0,date("m"),date("d"),date("y"));//12pm
if (time()>=$least && time()<=$most){
    ?>
       <script type="text/javascript">

alert("#1");

</script>
    <?php
}else{?>
        <script type="text/javascript">

alert("#2");

</script>
    <?php
}
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T09:45:49.797

这很简单：

```
$now = date('H',time());
if ($now>=4 && $now<=15){
?>
    <script type="text/javascript">
    alert("#2");
    </script>
<?php
}else{
?>
    <script type="text/javascript">
    alert("#1");
    </script>
<?php
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T09:22:53.570

```
$cur_hour = date("H");
$beg_hour = "11";
$end_hour = "28";
if ($cur_hour <= 4)
        $cur_hour += 24;
if ($cur_hour >= $beg_hour && $cur_hour <= $end_hour)
        echo "#1";
else
        echo "#2";
if ($cur_hour > 24)
        $cur_hour -= 24;
echo "<br /><br />".$cur_hour; 
```

现在它应该正确地做到这一点。

# java - 如何避免java中重复的枚举值？

> ID：11467556
> 
> 赞同：6
> 
> 时间：2012-07-13T09:17:24.717
> 
> 标签：java, enums

我有对应于编码的枚举。我需要检查枚举是否没有重复的编码数值。

```
public enum EncodingsEnum
{

ISO8859_1("ISO-8859-1",0), ISO8859_2("ISO-8859-2",1),
    ISO8859_3("ISO-8859-3",2), ISO8859_4("ISO-8859-4",3),
    ISO8859_5("ISO-8859-5",4), ISO8859_6("ISO-8859-6",5),
    ISO8859_7("ISO-8859-7",6), ISO8859_8("ISO-8859-8",7),
    ISO8859_9("ISO-8859-9",8), ISO8859_11("ISO-8859-11",9),
    ISO8859_13("ISO-8859-13",10),ISO8859_15("ISO-8859-15",11),
    UTF_8("UTF-8",11);

    public static final int ENCODINGS_COUNT = EncodingsEnum.values().length;
    private final String encodingName;
    private final int encodingNumber;

    EncodingsEnum(final String encodingName,int encodingNumber)
    {
        ReferenceChecker.checkReferenceNotNull(encodingName);

        this.encodingName = encodingName;
        this.encodingNumber = encodingNumber;
    }

    public static String getEncodingNameByNumber(int number)
    {
        for(EncodingsEnum encoding : EncodingsEnum.values())
        {
            if(encoding.encodingNumber == number)
            {
                return encoding.getEncodingName();
            }
        }
        throw new RuntimeException("Encoding with this number isn't supported:" + number);

    }

    public static int getEncodingNumberByName(final String name)
    {
        for(EncodingsEnum encoding : EncodingsEnum.values())
        {
            if(encoding.encodingName.equals(name))
            {
                return encoding.getEncodingNumber();
            }
        }
        throw new RuntimeException("Encoding with this name isn't supported:" + name);
    }

    public String getEncodingName()
    {
        return this.encodingName;
    }

    public int getEncodingNumber()
    {
        return this.encodingNumber;
    }
} 
```

有一个问题是我可以使用与现有编码之一相同的编号创建编码，因此我需要检查枚举是否包含具有此编号的元素并抛出异常。但我不知道该怎么做。有什么想法吗？谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-13T09:21:48.487

这不应该在运行时检查：为时已晚。添加一个遍历枚举值的单元测试，并检查它们是否都有不同的数字。并确保在生成应用程序/库的新版本之前始终执行单元测试并检查它们是否通过。

```
@Test
public void encodingNumbersMustBeUnique() {
    Set<Integer> numbers = new HashSet<Integer>();
    for (EncodingsEnum e : EncodingsEnum.values()) {
        assertFalse(numbers.contains(e.getEncodingNumber()));
        numbers.add(e.getEncodingNumber());
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T09:31:37.137

在构造函数中，您可以遍历枚举的 encodingNumbers，如果发现重复则抛出异常。像这样的东西：

```
public boolean isPresent(String type){
            ClassType[] typeArray = ClassType.values();
            for(ClassType cType: typeArray){
                if(cType.absoluteName/*this is some private field of the class*/.equalsIgnoreCase(type)){
                    return true;
                }
            }
            return false;
        } 
```

在构造函数中分配数字和名称之前进行上述检查。如果检查返回 true，则抛出异常，否则不抛出异常。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T11:51:53.270

用这段代码解决了。

```
public enum EncodingsEnum {
     ONE(1),
     TWO(1);

     private int number;

     static {
      if (!test()) {
       throw new RuntimeException();
      }
     }

     private EncodingsEnum(int number) {
      this.number = number;
     }

     public static boolean test() {
      final Set<Integer> numbers = new HashSet<Integer>();

      for (final EncodingsEnum enc : EncodingsEnum.values()) {
       numbers.add(enc.number);
      }

      return numbers.size() == EncodingsEnum.values().length;
     } 
```

# c++ - Win32 C++ 控制台应用程序未安装在 Windows Server 8 beta 64 位中

> ID：11467557
> 
> 赞同：0
> 
> 时间：2012-07-13T09:17:25.133
> 
> 标签：c++, windows, winapi

我们很少有 Visual C++ 应用程序在 Windows Server 2003 中运行良好。现在我们正在迁移到 Windows 8 服务器。我们复制了所有支持 DLL 并尝试在 Windows 8 服务器中安装 EXE。

收到以下错误**“应用程序要求运行时以不寻常的方式终止”**

当我在 Eventviewer 中看到

```
Exception code: 0x40000015
Fault offset: 0x00009754
Faulting process id: 0xf30
Faulting application start time: 0x01cd5ff1604c6270 
```

和

> 故障桶 -1232291099，类型 1 事件名称：APPCRASH 响应：不可用 Cab Id：0
> 
> 问题签名：P1：AutoClose.exe P2：0.0.0.0 P3：4a367b0e P4：AutoClose.exe P5：0.0.0.0 P6：4a367b0e P7：40000015 P8：00009754 P9：P10：
> 
> 分析符号：重新检查解决方案：0 报告 ID：9e00789a-cbe4-11e1-ba02-00155d50a602 报告状态：0 哈希桶：e2a5b7c6aeac3248eac86ce4c4691b6e

有什么建议么

# jquery - 将点改为逗号

> ID：11467559
> 
> 赞同：2
> 
> 时间：2012-07-13T09:17:38.443
> 
> 标签：jquery, latitude-longitude

我有一个存储纬度和经度的应用程序，例如 39.43433,-7.2232

这是为了更容易从谷歌复制和粘贴。问题是有时字符串就像 39,43433,-7,2232。

我怎样才能用 javascript / Jquery 在这个 39.43433,-7.2232 上转换这个字符串 39,43433,-7,2232。

我们必须记住，我们不知道逗号开头和结尾有多少数字。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T09:22:11.627

好吧，你知道有一个或三个逗号。

如果有 3 个，则：

```
string = "39,43433,-7,2232"
parts = string.split(",")
fixedString = parts[0]+"."+parts[1]+","+parts[2]+"."+parts[3] 
```

将完成这项工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T09:28:56.820

简单，使用正则表达式组：

```
var string = "39,43433,-7,2232"
string.replace(/([-\d]+),(\d+)(,)([-\d]+),(\d+)/g, "$1" + '.' + "$2$3$4" + '.'  + "$5") 
```

这是使用组来进行字符串的重新连接，并且比字符串拆分和数组连接更快。但是，如果您更喜欢面向对象的人，您可以使用 ECMA-Script 5 变得更简单、更易读：

```
string.match(/(-?\d+)\,(-?\d+)/g).
  map(function(e) { return e.replace(/,/, '.'); }).
  join(',') 
```

注意，您必须为[不支持 ECMA Script 5](http://kangax.github.com/es5-compat-table/)的浏览器安装[地图](http://www.tutorialspoint.com/javascript/array_map.htm)以保持跨浏览器兼容性。您可以通过将其添加到您的代码来做到这一点

```
if (!('map' in Array.prototype)) {
  Array.prototype.map= function(mapper, that /*opt*/) {
    var other= new Array(this.length);
    for (var i= 0, n= this.length; i<n; i++)
        if (i in this)
            other[i]= mapper.call(that, this[i], i, this);
    return other;
  };
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T09:22:14.313

您可以使用“g”标志将 replace() 与 RegExps 一起使用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-13T09:24:07.833

用点替换每个第一个昏迷。通过留下每隔一个逗号，您将确保单独留下分隔逗号。此外，这可能仅在您有`1,111,2,222`和没有的情况下才有效`1.111,2.222`。还是你懂的。。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-13T09:26:00.167

```
var str = '39,43433,-7,2232';
var patt = new RegExp("([-]?\\d+)\,([-]?\\d+)", "g");
var x = str.match(patt);
console.log(x);
// ["39,43433", "-7,2232"] 
```

# perl - 谁能解释为什么 foreach 有效但不能映射

> ID：11467563
> 
> 赞同：2
> 
> 时间：2012-07-13T09:18:11.570
> 
> 标签：perl, hash, map, exists

如果键存在于 %hash 中，我尝试将键值对放在 %hash1 数组中有一个元素在 %hash 处没有条目 例如：@array = (1,2,3,4,5); #在 %hash 处没有 key 1 的哈希条目

所以我认为 map 可以完成这项工作，我将在我的新哈希中获得 4 个键，即 %hash1 但它提供了 5 个键。同时我尝试了 foreach 并且它起作用了。我曾幻想我们可以使用 map 替换 foreach，但这个案例让我思考。谁能解释一下，我的逻辑哪里出错了？

```
#Method 1\. Comment it while using Method 2
%hash1 = map { $_=>$hash{$_}  if(exists $hash{$_}) } @array;

# Method 2\. Comment whole loop while using method 1
foreach (@array){
    $hash1{$_} = $hash{$_} if(exists $hash{$_});
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-13T09:44:44.180

您的问题是您的`map`表达式~~`undef`~~为`@array`. ~~当它被用作哈希键时，它被字符串化为一个空字符串。~~ *（Borodin 在评论中指出这种解释是不正确的。实际上空字符串来自`exists`键为“1”时返回的假值）*

如果您 a) 打开并且 b) 在创建哈希后使用它来显示哈希，您可能会更好地了解正在`strict`做`warnings`什么`Data::Dumper`。

```
#!/usr/bin/perl

use strict;
use warnings;
use 5.010;

use Data::Dumper;

my @array = (1 .. 5);
my %hash = ( 2 => 'two', 3 => 'three', 4 => 'four', 5 => 'five' );

my %hash1 = map { $_=>$hash{$_}  if(exists $hash{$_}) } @array;

say Dumper \%hash1; 
```

这表明您最终得到了这样的哈希：

```
$ ./hash 

Odd number of elements in hash assignment at ./hash line 12.
$VAR1 = {
          '' => 2,
          'three' => 4,
          'five' => undef,
          'two' => 3,
          'four' => 5
        }; 
```

您正在生成一个包含奇数个元素的列表。这不会产生快乐的哈希。

当你构建一个散列时，你需要确保你有偶数个元素。因此，当您使用时`map`，每次迭代都需要返回零个或两个元素。所以你需要这样的东西：

```
#!/usr/bin/perl

use strict;
use warnings;
use 5.010;

use Data::Dumper;

my @array = (1 .. 5);
my %hash = ( 2 => 'two', 3 => 'three', 4 => 'four', 5 => 'five' );

my %hash1 = map { exists $hash{$_} ? ($_ => $hash{$_}) : () } @array;

say Dumper \%hash1; 
```

请注意，当在第一个哈希中找不到键时，我们会显式返回一个空列表。

```
$ ./hash2
$VAR1 = {
          '4' => 'four',
          '3' => 'three',
          '2' => 'two',
          '5' => 'five'
        }; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-13T09:45:02.173

[map](http://perldoc.perl.org/functions/map.html)将始终返回您放入其代码块中的内容。所以返回值为

```
%hash1 = map { $_=>$hash{$_}  if(exists $hash{$_}) } @array; 
```

将是`$_=>$hash{$_}`何时`$hash{$_}`存在，`""`如果它不存在。

你可能想写的：

```
my %hash1 = map { exists($hash{$_}) ? ($_ => $hash{$_}) : () } 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-13T10:19:34.887

调用的块对`map`提供的列表中的每个值进行评估，块返回的值是最后一个评估的表达式的值。

你的`map`陈述

```
my %hash1 = map { $_ => $hash{$_}  if (exists $hash{$_}) } @array 
```

相当于

```
my %hash1 = map {
  if (exists $hash{$_}) {
    $_ => $hash{$_}
  }
} @array 
```

所以首先`exists $hash{$_}`评估表达式。然后，如果为真，`$_ => $hash{$_}`则进行评估。

因此，最后评估的表达式是`$_ => $hash{$_}`如果测试成功，这是您想要的，但如果测试失败，则块返回 的值`exists $hash{$_}`。

`exists`返回true`1`或`""`false，因此`@array`不作为键出现的元素会在返回`%hash`的列表中产生单个空字符串`map`。

`map`如果将 a 分配给数组，则更容易看到 a 的结果。这样您就可以避免警告和哈希值`Odd number of elements in hash assignment`的自动分配。`undef`

如果你改写

```
my @arr = map { $_ => $hash{$_}  if (exists $hash{X}) } @array; 
```

（即测试总是*失败*）结果与

```
my @arr = map { exists $hash{X} } @array; 
```

要不就

```
("", "", "", "") 
```

写这个的方法`map`是使用条件运算符，以便在条件失败时返回一个空列表

```
my %hash1 = map { exists $hash{$_} ? ( $_ => $hash{$_} ) : () } @array 
```

我相信您不需要解释为什么您的`foreach`循环有效？

我相信有一种情况可以`return`在所有块中有效，就像在子例程中允许的那样。`wantarray`在这里已经有效，并且它是一个特定的限制，通常禁止块退出并返回显式值。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-13T18:07:43.127

```
my %hash1 = map { ( $_ => $hash{$_} ) if exists($hash{$_}) } @array; 
```

是一样的

```
my %hash1 = map { exists($hash{$_}) and ( $_ => $hash{$_} ) } @array; 
```

考虑当`exists($hash{$_})`为假时会发生什么。`dualvar(0,"")`当不应该返回单个值（又名“假值”）。您可以更改表达式以在`exists`为 false时返回空列表

```
my %hash1 = map { exists($hash{$_}) ? ( $_ => $hash{$_} ) : () } @array; 
```

或者您可以将过滤移出`map`

```
my %hash1 = map { $_ => $hash{$_} } grep { exists($hash{$_}) } @array; 
```

# reporting-services - 授予用户“域名\用户名”的权限不足以执行此操作

> ID：11467566
> 
> 赞同：0
> 
> 时间：2012-07-13T09:18:18.580
> 
> 标签：reporting-services, ssrs-2008, reporting

我在 Asp.Net 中使用 SSRS 报告。我正在使用`ServerReport.ReportServerCredentials`，并且在此凭据中是系统管理员用户名、密码和域。但我想要一个简单的用户帐户，可以使用 aspx 页面 -> ReportViewer 查看这些报告。在这个 aspx c# 代码页中，我想将简单的用户凭据传递给`ServerReport.ReportServerCredentials`并且该用户不是管理员。但是当我使用它时，它会给出一个错误，即

```
The permissions granted to user 'DomainName\UserName' are insufficient for performing this operation. (rsAccessDenied) 
```

我们如何解决这个错误？

我们如何在???中使用简单的用户帐户而不是管理员帐户`ServerReport.ReportServerCredentials`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T14:14:33.673

您必须向报告管理器中的 DomainName\UserName 帐户授予对报告的访问权限。

# c++ - 为什么协议缓冲区字节在 C++ 中是字符串？

> ID：11467567
> 
> 赞同：23
> 
> 时间：2012-07-13T09:18:18.667
> 
> 标签：c++, string, byte, protocol-buffers

协议缓冲区说它可以[包含任意字节序列](https://developers.google.com/protocol-buffers/docs/proto#scalar)。但是如果我的数据包含 '\0' ，协议缓冲区如何从字符串变量中编码我的整个数据。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-07-13T09:25:59.447

协议缓冲区的 C++ 实现将字节和字符串类型返回为`std::string`. 这个结构包含一个长度函数，告诉你对应的数据有多长（以及数据本身）。因此嵌入`\0`字符没有特殊意义。

设置函数也接受字符串，或者有接受缓冲区和长度的版本。如果你想设置一个字段，你可以这样做：

```
pb.set_foo( std::string( data, data_length ) ); 
```

或者

```
pb.set_foo( data, data_length ); 
```

# c++ - 如何在没有开发 IDE 的系统上处理我的 C++ 程序崩溃？

> ID：11467574
> 
> 赞同：3
> 
> 时间：2012-07-13T09:18:29.827
> 
> 标签：c++, debugging, crash, crash-reports, crash-dumps

我正在没有安装开发 IDE (Visual Studio C++) 的 Windows 8 系统上测试我的 C++ 应用程序崩溃。我能够从 Windows 事件日志中获得以下信息：

```
Fault bucket , type 0
Event Name: APPCRASH
Response: Not available
Cab Id: 0

Problem signature:
P1: my_app_name.exe
P2: 1.0.2.0
P3: 4fffd4db
P4: my_app_name.exe
P5: 3.0.2.0
P6: 4fffd4db
P7: c0000005
P8: 00074eb0
P9: 
P10: 

Attached files:
C:\Windows\Temp\WER4AEB.tmp.appcompat.txt
C:\Windows\Temp\WER4B0B.tmp.WERInternalMetadata.xml
C:\Windows\Temp\WER4B0C.tmp.hdmp
C:\Windows\Temp\WER4CD2.tmp.dmp

These files may be available here:
C:\ProgramData\Microsoft\Windows\WER\ReportQueue\AppCrash_my_app_name.exe_8ea1c961fdc39248f2954cb7413ed349afffc9_cab_0d004d0d

Analysis symbol: 
Rechecking for solution: 0
Report Id: 4c93c3b5-ccc2-11e1-9b6e-000c297b96e1
Report Status: 4
Hashed bucket: 
```

我试图转到提供的路径以获取 .hdmp 和 .dmp 文件，但该报告中没有任何内容。

知道如何处理这种情况吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T09:29:40.643

我认为您的服务崩溃转储可能会写在这里：

```
%WINDIR%\System32\Config\SystemProfile 
```

根据[this](http://msdn.microsoft.com/en-us/library/bb787181%28VS.85%29.aspx)不确定这是否仍然是Win 8的相同路径。

您可以使用[AdPlus](http://support.microsoft.com/kb/286350)或[ProcDump或使用](http://technet.microsoft.com/en-us/sysinternals/dd996900.aspx)[MiniDumpWriteMiniDump](http://msdn.microsoft.com/en-us/library/windows/desktop/ms680360%28v=vs.85%29.aspx)以编程方式将内存转储写入您选择的位置，[ETW](http://msdn.microsoft.com/en-us/magazine/cc163437.aspx)也可用于事件跟踪。

转储文件可以在 Visual Studio 或 WinDbg 中打开，然后您可以查看应用程序状态。

在 WinDbg 中：

```
!analyze -v 
```

将尝试为您找到崩溃的原因，希望这会有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T09:27:23.247

您可以使用 Visual Studio 远程调试器工具（google it）来允许您通过 Visual Studio 连接到正在运行的进程。当然机器必须在同一个网络上。

1.  转到“调试->附加到进程”。
2.  将传输更改为“远程”
3.  在“Qualifier”中输入目标机器的IP
4.  选择要附加到的进程。
5.  调试！

此外，如果您有故障转储（.hdmp、.dmp... 可用），您可以通过 WinDBG 运行它们，WinDBG（如果您有符号和源代码路径设置）将在您运行命令`C:\ProgramData\Microsoft\Windows\WER\ReportQueue\`后将您指向代码行。`!analyze -v`您不需要在目标机器上安装 WinDBG。

# extjs - ExtJs4 MixedCollection 过滤

> ID：11467575
> 
> 赞同：0
> 
> 时间：2012-07-13T09:18:31.507
> 
> 标签：extjs, filter, extjs4

```
var pmStore = new storeOfUsers(); // storeOfUsers is an Ext.data.DirectStore with autoLoad: true
console.log(pmStore.data); // is an Ext.util.MixedCollection with 6 items including user_id == 1

var pms = pmStore.data.filter('user_id', 1);
console.log(pms); //is an Ext.util.MixedCollection with length == 0 
```

你好。
过滤 MixedCollection 后，返回的集合为空，尽管结果为 user_id == 1。我错过了什么吗？
谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T11:01:11.420

您错误地过滤了您的集合，您需要使用 Ext.util.Filter 对象来过滤您的 MixedCollection。这是一个例子：

```
//your store
var pmStore = new storeOfUsers();

//Create the filter 
var lFilter = new Ext.util.Filter({
    property: 'user_id',
    value   : 1
});

//Filter the data
var pms = pmStore.data.filter(lFilter); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T13:03:26.193

我的猜测是问题是商店的异步加载。

您可能在商店被加载之前对其进行了过滤。过去我有一些实例，console.log() 错误地显示了同步数据（好像一旦调用完成，日志就会更新）。

我会尝试取消自动加载，并使用过滤数据的回调进行手动加载。

# search - lucene查询搜索

> ID：11467579
> 
> 赞同：0
> 
> 时间：2012-07-13T09:18:43.667
> 
> 标签：search, lucene

我的任务是使用 lucene 在我们的产品表中进行搜索。我已经创建了一个索引，并且正在使用具有多个字段的 QueryParser 进行搜索，但结果不是我需要的。我有一个存储为 LM10 的产品，但如果搜索词是 LM 10，我希望能够找到它，但如果搜索词是 Fred LM10 或 Fred LM 10，它也必须能够匹配。任何想法如何我可以在 Lucene 中做到这一点。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T11:11:56.783

使用 Tokenizer 在单词/数字更改时拆分标记，在索引和查询时应用它。您可以使用[solr.WordDelimiterFilterFactory](http://wiki.apache.org/solr/AnalyzersTokenizersTokenFilters/#TokenizerFactories)并避免编写自定义的。

# ios - ios记分牌/游戏成就

> ID：11467585
> 
> 赞同：1
> 
> 时间：2012-07-13T09:19:13.277
> 
> 标签：ios, gamekit, openfeint

我计划为我的游戏（iOS）实现一个全球记分牌和成就系统。最好的平台是什么？

*   GREE（原openfient）
*   游戏套件

有人能告诉我哪个更好吗？（我只需要一个简单的记分板（比如前 10 名）和记录成就的东西）

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T09:22:11.353

我个人会使用 GameKit / Game Center，我相信它为最终用户提供了更好的体验。

# liferay - 负载均衡器查找站点管理器会话 cookie 的问题

> ID：11467587
> 
> 赞同：0
> 
> 时间：2012-07-13T09:19:28.487
> 
> 标签：liferay

当我们在负载均衡器中时，正确的登录不会在 liferay 中发生，但是当我们在单个服务器中时，它可以工作。

我们正在使用站点管理员身​​份验证的任何想法

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T13:39:37.143

我猜 siteminder 和负载均衡器站在网络中的 liferay 服务器之前。我猜你的问题是你希望会话粘在同一个liferay服务器上，所以负载均衡器必须在成功登录到siteminder后才能看到siteminder会话cookie？

如果是这种情况（请更具体），那么这不是 liferay 的问题，而只是 siteminder und loadbalancer 的问题。

（我知道liferay，但不是siteminder，我猜不出你的负载均衡器）

# visual-studio-2010 - 如何在 Web 性能测试中查看 Visual Studio 请求的完整 URL？

> ID：11467588
> 
> 赞同：1
> 
> 时间：2012-07-13T09:19:29.817
> 
> 标签：visual-studio-2010, performance-testing

所以我的问题是我已经记录了测试序列并保存了它。有时会提取 queryString 参数。但是当我运行测试时，它失败并将我重定向到错误 500 页面，但是，如果我在浏览器中手动输入带有提取参数的粘贴 url，那么一切正常。所以我的问题是如何查看提供给服务器以获取页面的 url？

提前致谢， 贾尼斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T10:41:28.790

在结果中，您有一个名为“表格”的选项卡，您可以在其中找到所有请求的 url。

# cocos2d-iphone - 移动精灵体的问题

> ID：11467601
> 
> 赞同：0
> 
> 时间：2012-07-13T09:19:55.590
> 
> 标签：cocos2d-iphone

当我运行此代码应用程序崩溃。

```
#import "HelloWorldLayer.h"
CCSprite *background,*ball;
CGSize size;
#define PTM_RATIO 32
@implementation HelloWorldLayer

-(id) init
{
    if( (self=[super init])) {

        size=[[CCDirector sharedDirector]winSize];
        background=[CCSprite spriteWithFile:@"Terrain.png"];
        background.position=ccp(size.width/2, size.height/2);
        [self addChild:background];

        b2Vec2 gravity=b2Vec2(0.0f,-10.0f);
        world=new b2World(gravity);

        b2BodyDef groundDef;
        groundDef.position.Set(0,0);
        groundBody=world->CreateBody(&groundDef);
        b2EdgeShape groundEdge;
        b2FixtureDef groundBodyFixtureDef;
        groundBodyFixtureDef.shape=&groundEdge;

        groundEdge.Set(b2Vec2(0,0), b2Vec2(size.width/PTM_RATIO,0));
        groundBody->CreateFixture(&groundBodyFixtureDef);

        groundEdge.Set(b2Vec2(0,size.height/PTM_RATIO), b2Vec2(size.width/PTM_RATIO,size.height/PTM_RATIO));
        groundBody->CreateFixture(&groundBodyFixtureDef);

        groundEdge.Set(b2Vec2(size.width/PTM_RATIO,0), b2Vec2(size.width/PTM_RATIO,size.height/PTM_RATIO));
        groundBody->CreateFixture(&groundBodyFixtureDef);

        groundEdge.Set(b2Vec2(0,0), b2Vec2(0,size.height/PTM_RATIO));
        groundBody->CreateFixture(&groundBodyFixtureDef);

        ball=[CCSprite spriteWithFile:@"ball1.png"];
        ball.position=ccp(200, 300);
        [self addChild:ball];

        b2BodyDef ballBodyDef;
        ballBodyDef.type=b2_dynamicBody;
        ballBodyDef.position.Set(200/PTM_RATIO, 300/PTM_RATIO);
        ballBodyDef.userData=&ball;
        ballBodyDef.fixedRotation=true;
        ballbody=world->CreateBody(&ballBodyDef);
        b2CircleShape ballShape;
        ballShape.m_radius=ball.contentSize.width/PTM_RATIO/2;
        b2FixtureDef ballBodyFixture;
        ballBodyFixture.shape=&ballShape;
        ballBodyFixture.density=20.0f;
        ballBodyFixture.friction=0.0f;
        ballBodyFixture.restitution=1.0f;
        ballbody->CreateFixture(&ballBodyFixture);

         [self schedule:@selector(tick:)];

    }
    return self;
}

-(void)tick:(ccTime)dt
{
    world->Step(dt, 10, 10);
    for(b2Body *b=world->GetBodyList();b;b=b->GetNext())
    {
        if(b->GetUserData()!=NULL)
        {
            CCSprite *balldata=(CCSprite *)b->GetUserData();
            NSLog(@"Inside if");

            balldata.position=ccp(b->GetPosition().x*PTM_RATIO, b->GetPosition().y*PTM_RATIO); // When control comes on this line that time application crash
            ball1.rotation = -1 * CC_RADIANS_TO_DEGREES(b->GetAngle());

        }
    }
}

-(void) dealloc
{

    [super dealloc];
}   

@end 
```

我知道这段代码是正确的，我多次使用这段代码，但在我当前的应用程序中，这段代码停止调试并给出这样的错误。

```
-(void) update: (ccTime) dt
{
    if( elapsed == - 1)
        elapsed = 0;
    else
        elapsed += dt;
    if( elapsed >= interval ) {
        impMethod(target, selector, elapsed); // EXC_BAD_ACCESS
        elapsed = 0;
    }
} 
```

此代码在 CCTime 类中。在我的代码中我没有使用更新方法，所以为什么会出现这个错误？？？？请帮助我。这是一个愚蠢的错误，但无法理解他们为什么来......

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T09:52:50.657

当您尝试获取与您的身体相关联的用户数据时：

```
CCSprite *balldata=(CCSprite *)b->GetUserData(); 
```

balldata 很可能在这里为空，这随后会导致下一个语句中的崩溃。

为什么为空？因为，早些时候，当您设置用户数据时，您将 &ball（这将为您提供一个指向指针的指针！）而不是仅仅将 ball（已经是指向您所需的 CCSprite 对象的指针）传递给主体定义。因此，只需将该分配更改为：

```
ballBodyDef.userData=ball; //not &ball 
```

# java - mysql 5.0 无法存储 utf8

> ID：11467603
> 
> 赞同：0
> 
> 时间：2012-07-13T09:19:56.457
> 
> 标签：java, mysql, database, utf-8, character-encoding

我已将 mysql 5.0 配置为存储 utf8 字符。我通过以下查询对其进行了检查：

* * *

```
SELECT character_set_name FROM information_schema.`COLUMNS` C
WHERE table_schema = "oprdb"
  AND table_name = "rtable"
  AND column_name = "rtxt"; 
```

结果是`utf8`

* * *

```
SHOW FULL COLUMNS FROM rtable 
```

这向我展示`collation`了`utf8_general_ci`

* * *

```
show variables like "character_set_database";
show variables like "collation_database"; 
```

这也显示`utf8`在结果中

* * *

似乎mysql配置正确。我从用户在文本字段中键入文本的 html 页面获取文本，然后我使用 jquery post 将该文本提交给 servlet。

我的 html 页面顶部有这个——

```
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> 
```

我也在我的表格中添加了这个——

```
enctype="text/plain;charset=UTF-8" 
```

在我的 servlet 中 doPost 的第一行是

```
request.setCharacterEncoding("UTF-8"); 
```

然后我只是将该文本保存在数据库中。但问题是，我无法存储这种文本

```
 Hiki iaʻu ke ʻai i ke aniani; ʻaʻole nō lā au e ʻeha.
 Я магу есці шкло, яно мне не шкодзіц 
```

他们有什么我想念的吗？

**编辑：**

这是我的数据源配置..

```
<Resource auth                = "Container" 
            driverClassName     = "com.mysql.jdbc.Driver" 
            factory             = "org.apache.tomcat.dbcp.dbcp.BasicDataSourceFactory" 
            initialSize         = "10" 
            logAbandoned        = "true"
            maxActive           = "50" 
            maxIdle             = "2" 
            maxWait             = "10000" 
            name                = "jdbc/oprdb" 
            username            = "root"
            password            = "123456" 
            removeAbandoned     = "true" 
            removeAbandonedTimeout = "60"  
            type                   = "javax.sql.DataSource" 
            url                    = "jdbc:mysql://localhost:3306/oprdb" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T10:20:30.013

更新您的 url 以`jdbc:mysql://localhost:3306/oprdb?useUnicode=true&characterEncoding=UTF-8` 获取 utf-8 支持

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T10:26:23.003

这些是我系统中 MySQL Workbench 中的唯一设置：

![在此处输入图像描述](../Images/72fb13f74ca7f8d76297897070ecd101.png)

结果是添加了这两行：

```
character-set-server = utf8
character-set-filesystem = utf8 
```

在**/etc/mysql/my.cnf**文件中。

确保您的数据库表的排序规则是 utf8。

# java - 正则表达式无法使特殊构造 (?=x) 工作

> ID：11467604
> 
> 赞同：2
> 
> 时间：2012-07-13T09:20:01.480
> 
> 标签：java, regex

我正在尝试获取一个有效的正则表达式以在验证以下格式的 java (java.util.regex) 中使用：

最多 15 位数字，其中 3 位 MAX 位可能是十进制，前面有分隔符 (,)

所以，有效的是：

```
123456789012345  (15 digits, ok)
12345678901234,1 
```

**[编辑]，这些也应该是有效的：**

```
1234567890123,45
123456789012,345 
```

到目前为止，我想出了以下正则表达式模式：

```
Pattern = [0-9]{1,15}(\,[0-9]{1,3})? 
```

这将检查 1 到 15 位数字的范围，后跟可选的分隔符，后跟另外 3 位数字。但是，这不会检查输入的总长度。使用此正则表达式，值 123456789012345,123 将是有效的。

所以，我想我会添加一个额外的表达式来检查总长度，并使用 "(?=" 构造来模拟逻辑与行为。

所以我开始将它添加到我现有的正则表达式中，如下所示：

```
Pattern = (?= [0-9]{1,15}(\,[0-9]{1,3})?) 
```

然而，这基本上导致我扔给它的所有东西都失败了，我无法让它进一步工作。我不明白我在这里做错了什么？在这工作之后，我会添加另一个表达式来检查总长度，我认为类似于 (?=.{16}) 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T09:55:07.920

**[编辑]**意识到 如果有 a ，你想接受总长度 16 `,`，而且你真的不需要在这里使用环视，因为你只有两个案例。这工作得很好：

```
public static boolean isValid(String input) {
    return input.matches("^(\\d{0,15}|\\d{1,12},\\d{1,3})$");
} 
```

如果其中之一为真，则返回有效

*   输入由 0-15 个数字组成*或*
*   输入由 1-12 个数字组成，后跟 a `,`，然后是 1-3 个数字

**[编辑2]**

好的，新的尝试：

```
public static boolean isValid(String input) {
    return input.matches("^(\\d{0,15}|(?=.{3,16})\\d+,\\d{1,3})$");
} 
```

如果其中之一为真，则返回有效

*   输入由 0-15 个数字组成*或*
*   输入由 3-16 个字符组成，至少包含一个数字，后跟 a `,`，后跟 1-3 个数字

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T09:46:29.197

这对我有用。

```
 boolean a = Pattern.matches("\\d{15}|\\d{12},\\d{3}", "123456789012345");
    System.out.println(a);//true
    boolean b = Pattern.matches("\\d{15}|\\d{12},\\d{3}", "123456789012,345");
    System.out.println(b);//true
    boolean c = Pattern.matches("\\d{15}|\\d{12},\\d{3}", "1234567890123,456");
    System.out.println(c);//false 
```

所以你的正则表达式是：

```
\d{15}|\d{12},\d{3} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T09:37:04.660

这个如何？在[RegExr上播放](http://gskinner.com/RegExr/?31g39)

```
\d{12,15},?\d{3} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-13T15:49:20.830

试试这个正则表达式：

```
^\d{1,12}(?:\d{0,3}|\d{0,2},\d|\d{0,1},\d\d|,\d\d\d)$ 
```

# c# - 是否在 InSingletonScope 中使用 Ninject 绑定 ObjectContext

> ID：11467608
> 
> 赞同：0
> 
> 时间：2012-07-13T09:20:19.403
> 
> 标签：c#, asp.net-mvc-3, entity-framework-4, ninject.web.mvc

我有带有构造函数的存储库，看起来像

```
public Repository(ObjectContext context)
{
    _context = context;
    _objectSet = _context.CreateObjectSet<T>();
} 
```

我在我的 MVC 应用程序中使用 Ninject 来绑定 ObjectContext 像这样

```
var connectionString = ConfigurationManager.ConnectionStrings["Entities"].ConnectionString;    
kernel.Bind(typeof(ObjectContext)).ToMethod(context => new Entities(connectionString)).InSingletonScope(); 
```

我不确定`InSingletonScope`在这种情况下。我应该使用它还是不使用它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T09:29:06.280

几乎可以肯定不是，您要确保每个存储库都是独立的，例如对一个存储库的 savechanges 调用不会从另一个存储库提交内容。

我还建议使用 DbContext 而不是 ObjectContext。

# java - 集群中的静态变量访问

> ID：11467611
> 
> 赞同：2
> 
> 时间：2012-07-13T09:20:34.393
> 
> 标签：java, jakarta-ee

在java中，静态变量只有一个实例，并且值在同一环境中的所有线程之间共享。但是我的问题是当应用程序部署在集群中时，如果访问和更改应用程序，值是否保持不变通过集群的不同实例？

或者对于集群的每个实例，它会发生变化并保持不变？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T09:24:25.130

如果您询问多个 JVM 是否共享内存，那么不，它们不共享。

每个 JVM 都有自己的类及其静态字段的副本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T09:23:46.553

在集群中运行的每个 JVM 实例都是相同的。在不同的运行 JVM 中会有不同的实例。而且，更准确地说，由于在同一个 JVM 中可以有多个类加载器，它们每个都有自己的实例。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-13T09:25:45.483

我不确定您对集群的定义。但是，如果您的意思是不同的 JVM 一起工作，那么静态变量是每个 JVM 一个。
例如，
如果您的集群中有 10 个 JVM，则将有 10 个静态变量实例，每个实例相互独立。

# google-app-engine - Web 应用程序中的 Paypal 集成

> ID：11467613
> 
> 赞同：3
> 
> 时间：2012-07-13T09:20:43.233
> 
> 标签：google-app-engine, struts2, paypal-ipn

场景是 Web 应用程序的用户可以购买数字商品。Web 应用程序将使用[Paypal Instant Payment Notification](https://www.paypal.com/ipn)。

IPN 协议由三个步骤组成：

1.  PayPal 向您的 IPN 侦听器发送一条消息，通知您该事件

2.  您的听众将完整的未更改消息发送回 PayPal；消息必须以相同的顺序包含相同的字段，并以与原始消息相同的方式进行编码

3.  PayPal 会返回一个单词，如果消息来自 PayPal，则该单词已验证，如果与最初发送的消息有任何差异，则该单词为无效。

假设是`VERIFIED`，如果用户在他/她的贝宝中使用其他电子邮件地址，我怎么知道谁完成了交易或购买了商品（网络应用程序的用户）？我已经存储了用户的电子邮件地址，`session`但如果他/她有不同的贝宝电子邮件怎么办？Paypal 电子邮件包含在 IPN 消息中。

对于其他可能没有用的细节，该应用程序是用 Google-App-Engine 中的 Struts2 编写的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T21:50:50.080

您需要一种方法来将返回的 IPN 数据与用户关联起来。通过要求他们提供他们的贝宝电子邮件或使用 IPN 服务中的用户名/密码生成工具。这是一种有点不雅但实用的方法：

*   当 IPN 离线时，持久保存 paypal 生成的用户名/密码和 payer_id（可能在数据存储中）。
*   如果您无法通过电子邮件进行关联，那么当用户返回您的站点时，请求他们输入*一次*从 paypal 站点生成的用户名/密码（只是为了关联）。
*   查找用户名/密码，然后将他们的用户 ID 从 UserService 关联回 payerid。

使用 IPN 的原因是订阅服务，因为您可以在订阅终止、取消或付款时收到 IPN 消息（对于停止付款的帐户）。

要考虑的最重要的事情是如何将您网站的用户与用于支付他们正在使用的服务的 payer_id（在某些情况下甚至是 payer_ids）相关联。

另一方面，我不会使用会话来存储 IPN 回调的信息，这些实际上有时会花费很长时间（例如当 x.com 会议开始并且每个人都在敲击贝宝时）。

如果您有一个正在运行的应用程序或更好的外观描述，我可能会提出更优雅的建议。让我知道这是否有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T17:05:58.030

为什么不使用 PayPal 的快速结账？这样您就可以与 server2server 协商一个令牌，然后您可以在用户返回时使用 PayPal 检查该令牌的结果。如果用户直接从您的应用程序中购买，则更容易实现。而且我认为它比您使用的方法更强大（我以前从未听说过：D）

# python - 结合 tornado 和 zmq ioloops：对等异常重置连接

> ID：11467615
> 
> 赞同：2
> 
> 时间：2012-07-13T09:20:52.297
> 
> 标签：python, tornado, pyzmq

当我尝试按照[pyzmq 官方文档](http://zeromq.github.com/pyzmq/eventloop.html)中的描述组合 Tornado 和 pyzmq ioloops 时，我遇到了一个烦人的（虽然不是关键的）问题。

我有一个运行龙卷风（T）服务器的进程，它接受来自客户端（C）的 REST API 请求，并通过 ZMQ 传输到另一个真正工作的进程（Z）代理它们。

```
C <-> T <-> Z 
```

*如果 C 在 Z 回复 T之前*关闭连接，则 Z（龙卷风）会输出一长串异常跟踪（见底部）。想象以下示例：

```
import tornado.ioloop
from tornado.web import Application, RequestHandler, asynchronous
from zmq.eventloop import ioloop
import time

def time_consuming_task():
    time.sleep(5)

class TestHandler(RequestHandler):
    def get(self, arg):
        print "Test arg", arg
        time_consuming_task()
        print "Ok, time to reply"
        self.write("Reply")

if __name__ == "__main__":
    app = tornado.web.Application(
        [
            (r"/test/([0-9]+)", TestHandler) 
        ])

    ioloop.install()
    app.listen(8080)
    tornado.ioloop.IOLoop.instance().start() 
```

这个例子实际上并没有与任何 ZMQ 对等体对话，它只是将 pyzmq ioloop 附加到 tornado 的 ioloop。不过，足以说明问题。

从控制台一台运行服务器：

```
% python example.py 
```

从控制台二运行客户端并在服务器回复之前中断它（即在 5 秒内）：

```
% curl -is http://localhost:8080/test/1
^C 
```

服务器的输出是：

```
测试参数 1
好的，到时候回复
WARNING:root:Read error on 24: [Errno 54] Connection reset by peer
错误：根：未捕获的异常 GET /test/1 (::1)
HTTPRequest(protocol='http', host='localhost:8080', method='GET', uri='/test/1', version='HTTP/1.1', remote_ip='::1', body=' ', headers={'Host': 'localhost:8080', 'Accept': '*/*', 'User-Agent': 'curl/7.21.4 (universal-apple-darwin11.0) libcurl/7.21\. 4 OpenSSL/0.9.8r zlib/1.2.5'})
回溯（最近一次通话最后）：
  _execute 中的文件“/Library/Python/2.7/site-packages/tornado/web.py”，第 1023 行
    self.finish()
  文件“/Library/Python/2.7/site-packages/tornado/web.py”，第 701 行，完成
    self.request.finish()
  文件“/Library/Python/2.7/site-packages/tornado/httpserver.py”，第 433 行，完成
    self.connection.finish()
  文件“/Library/Python/2.7/site-packages/tornado/httpserver.py”，第 187 行，完成
    self._finish_request()
  _finish_request 中的文件“/Library/Python/2.7/site-packages/tornado/httpserver.py”，第 223 行
    self.stream.read_until(b("\r\n\r\n"), self._header_callback)
  文件“/Library/Python/2.7/site-packages/tornado/iostream.py”，第 153 行，在 read_until
    self._try_inline_read()
  _try_inline_read 中的文件“/Library/Python/2.7/site-packages/tornado/iostream.py”，第 386 行
    如果 self._read_to_buffer() == 0：
  _read_to_buffer 中的文件“/Library/Python/2.7/site-packages/tornado/iostream.py”，第 421 行
    块 = self._read_from_socket()
  _read_from_socket 中的文件“/Library/Python/2.7/site-packages/tornado/iostream.py”，第 402 行
    块 = self.socket.recv(self.read_chunk_size)
错误：[Errno 54] 对等方重置连接
错误：root：写入标头后无法发送错误响应
错误：根：未捕获的异常，正在关闭连接。
回溯（最近一次通话最后）：
  包装器中的文件“/Library/Python/2.7/site-packages/tornado/iostream.py”，第 304 行
    回调(*args)
  _on_headers 中的文件“/Library/Python/2.7/site-packages/tornado/httpserver.py”，第 262 行
    self.request_callback(self._request)
  __call__ 中的文件“/Library/Python/2.7/site-packages/tornado/web.py”，第 1412 行
    handler._execute（变换，*args，**kwargs）
  _execute 中的文件“/Library/Python/2.7/site-packages/tornado/web.py”，第 1025 行
    self._handle_request_exception(e)
  _handle_request_exception 中的文件“/Library/Python/2.7/site-packages/tornado/web.py”，第 1065 行
    self.send_error(500, exc_info=sys.exc_info())
  文件“/Library/Python/2.7/site-packages/tornado/web.py”，第 720 行，在 send_error
    self.finish()
  文件“/Library/Python/2.7/site-packages/tornado/web.py”，第 700 行，完成
    self.flush(include_footers=True)
  文件“/Library/Python/2.7/site-packages/tornado/web.py”，第 660 行，齐平
    self.request.write(headers + chunk, callback=callback)
  文件“/Library/Python/2.7/site-packages/tornado/httpserver.py”，第 429 行，写入
    self.connection.write（块，回调=回调）
  文件“/Library/Python/2.7/site-packages/tornado/httpserver.py”，第 177 行，写入
    断言 self._request, "请求关闭"
AssertionError：请求已关闭
错误：root：回调中的异常
回溯（最近一次通话最后）：
  _run_callback 中的文件“/Library/Python/2.7/site-packages/pyzmq-2.2.0-py2.7-macosx-10.7-intel.egg/zmq/eventloop/ioloop.py”，第 434 行
    打回来（）
  包装器中的文件“/Library/Python/2.7/site-packages/tornado/iostream.py”，第 304 行
    回调(*args)
  _on_headers 中的文件“/Library/Python/2.7/site-packages/tornado/httpserver.py”，第 262 行
    self.request_callback(self._request)
  __call__ 中的文件“/Library/Python/2.7/site-packages/tornado/web.py”，第 1412 行
    handler._execute（变换，*args，**kwargs）
  _execute 中的文件“/Library/Python/2.7/site-packages/tornado/web.py”，第 1025 行
    self._handle_request_exception(e)
  _handle_request_exception 中的文件“/Library/Python/2.7/site-packages/tornado/web.py”，第 1065 行
    self.send_error(500, exc_info=sys.exc_info())
  文件“/Library/Python/2.7/site-packages/tornado/web.py”，第 720 行，在 send_error
    self.finish()
  文件“/Library/Python/2.7/site-packages/tornado/web.py”，第 700 行，完成
    self.flush(include_footers=True)
  文件“/Library/Python/2.7/site-packages/tornado/web.py”，第 660 行，齐平
    self.request.write(headers + chunk, callback=callback)
  文件“/Library/Python/2.7/site-packages/tornado/httpserver.py”，第 429 行，写入
    self.connection.write（块，回调=回调）
  文件“/Library/Python/2.7/site-packages/tornado/httpserver.py”，第 177 行，写入
    断言 self._request, "请求关闭"
AssertionError：请求已关闭

```

**注意：**这似乎是与 pyzmq 相关的问题，因为在排除 pyzmq ioloop 后消失了。

服务器不会死，它可以被其他客户端使用，所以问题并不严重。但是，在日志文件中找到这些巨大的令人困惑的痕迹是非常烦人的。

那么，有没有什么众所周知的方法可以解决这个问题呢？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T06:50:17.210

这不是 ZMQ 的问题。请求可以通过超时以外的原因关闭。ZMQ 唯一的问题是它们正在引发`AssertionError`，这是常见的，而不是更具体的异常。

如果您确定，您不想在日志文件中出现这些异常 - 请执行以下操作：

```
try: 
    time_consuming_task()
except AssertionError as e:
    if e.message == 'Request closed': 
        logging.info('Bad, annoying client, came to us again!') 
    else:
        raise e 
```

# jquery - 注册成功后如何显示恭喜模态？

> ID：11467618
> 
> 赞同：0
> 
> 时间：2012-07-13T09:20:56.903
> 
> 标签：jquery, ruby-on-rails

我正在使用 Rails、Devise gem、jQuery 验证插件和 Bootstrap。

我可以打电话给 $('#congrats').show(); 当用户提交时，但它正在关闭，因为用户应该在注册后自动重定向。

另外，如果第一次加载页面，我不能打电话，是吗？

我该怎么做才能在正确的时间调用显示功能？

**我的 HTML 表单**

```
 <form accept-charset="UTF-8" action="/users" class="sign_up" id="new_user" method="post"><div style="margin:0;padding:0;display:inline"><input name="utf8" type="hidden" value="&#x2713;" /><input name="authenticity_token" type="hidden" value="W0u6CgL+sA/n/Zecikl67zLqkIPePQz01Vg0u3bi2nc=" /></div>
<div class="field2">

  <label for="user_first_name">First name</label>
  <input id="user_first_name" name="user[first_name]" size="30" type="text" /></div>

<div class="field2"><label for="user_last_name">Last name</label>
  <input id="user_last_name" name="user[last_name]" size="30" type="text" /></div>

<div class="field2"><label for="user_email">Email</label>
  <input id="user_email" name="user[email]" size="30" type="email" value="" /></div>

<div class="field2"><label for="user_password">Password</label>
  <input id="user_password" name="user[password]" size="30" type="password" /></div>

<div class="field2"><label for="user_password_confirmation">Re-Type Password</label>
  <input id="user_password_confirmation" name="user[password_confirmation]" size="30" type="password" />

</div>

<div class="login_submit">
  <input class="btn login" name="commit" type="submit" value="Sign up" />
  </div>
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T09:43:46.517

[http://guides.rubyonrails.org/action_controller_overview.html#the-flash](http://guides.rubyonrails.org/action_controller_overview.html#the-flash) .. flash 系统就是为了处理这种情况。闪存中设置的值将仅针对一次重定向保留。如果用户要刷新页面，flash 值将自动取消设置，用户将不会再次看到该消息。

*   您的用户提交表单。
*   您在后端的控制器设置了指示成功的闪存消息。它重定向到适当的页面。
*   您在重定向页面上的查看代码会读取 flash 消息并设置一些 js 变量。
*   您在该视图上的 js 代码读取先前设置的变量，并根据值显示您的祝贺模式。

我不记得erb语法，但我可以写一些伪代码：

```
if flash message["signup_success"] == true, then
   print this text "var showCongrats = true;"
else print this text "var showCongrats = false;" 
```

在你的 js 代码中，

```
$(function() {
   if (showCongrats) { // show the modal; 
   }
}) 
```

我们只希望 erb 将变量声明打印到页面上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T09:46:45.420

你可以做的是：

*   在用户提交表单后设置`logged_in_successfully`会话变量`true`
*   在重定向到页面的布局中，检查该变量是否设置为 true
    *   如果是这样，包括理想情况下部分的*恭喜*模态，否则什么也不做。
*   在重定向到操作中，取消设置变量`logged_in_successfully`，或将其设置为`false`。

# java - 使用 webdriver 检测远程机器上的操作系统的包装类？

> ID：11467625
> 
> 赞同：1
> 
> 时间：2012-07-13T09:21:31.793
> 
> 标签：java, javascript, frameworks, webdriver

伙计们，

我想为我的 webdriver 框架编写一个包装类，它将在旅途中检测连接的客户端的操作系统，以便我可以发送机器理解的正确格式。你能帮我解决这个问题吗？

java 或 javascript 会有所帮助！爱，BijoyM

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T09:24:56.787

我们使用这个客户端嗅探器：[http](http://tim.dobbelaere.org/client_sniffer.html) : //tim.dobbelaere.org/client_sniffer.html 要让 js 变量准备好读取，oyu 需要做的就是在您的页面上包含脚本。

在登录页面上检查浏览器/操作系统并将信息保存在全局服务器变量中以供进一步使用可能是一种很好的做法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-01-11T09:14:35.897

`driver.desired_capabilities`或`driver.capabilities`（`desired_capabilities`在较新版本的 Selenium 中已弃用）字典具有键“platformName”（或在旧版本中为“platform”），其值将是“mac”、“windows”或“linux”，具体取决于您的 Selenium 节点运行的机器.

# asp.net-mvc - RAZOR 和在 href 中添加文字

> ID：11467626
> 
> 赞同：0
> 
> 时间：2012-07-13T09:21:36.053
> 
> 标签：asp.net-mvc, asp.net-mvc-3, razor

我正在学习 RAZOR。

我需要通过在#ref 的开头添加一个字母来使 href 标记独一无二：

例如。

```
<a href="#p23"> 
```

在 Razor 中，要从我的模型中填充 href 标签，我有：

```
<a href="#p@item.ID"> 
```

但是，Razor 无法识别 @item.ID，除非它前面没有字符。

```
<a href="#p @item.ID"> 
```

但这会使href无效。

有没有办法让我在其中添加字母“p”，并且仍然允许 RAZOR 添加项目的 ID？

谢谢，

标记

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T09:23:47.137

只需将其包裹在括号中以帮助解析器：

```
<a href="#p@(item.ID)"> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T09:24:03.610

在 VB 中，用括号将变量括起来：`"#p@(item.ID)"` 在 c# 中，它要么相同，要么使用大括号。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T09:25:17.663

修理它

只需在项目周围加上括号，即

```
<a href="#p@(item.ID)"> 
```

您可以在混合/匹配所需的所有剃刀语法中执行此操作

# couchdb - 你能判断一个视图是否正在索引吗？

> ID：11467631
> 
> 赞同：2
> 
> 时间：2012-07-13T09:22:07.210
> 
> 标签：couchdb

我想知道视图是否正在编入索引，这样我就可以给用户一些指示，而不是让他们等待。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T17:16:24.843

当您点击`/_active_tasks`是否正在进行索引时，您将`"type": "indexer"`运行一个任务。

# android - 如何在 textview android 中使用 getlinecount()

> ID：11467632
> 
> 赞同：9
> 
> 时间：2012-07-13T09:22:08.590
> 
> 标签：android, textview

我想知道我的文本视图中有多少行。我已经设置了 mytextview 文本，然后我想在 mytextview 中获取它需要多少行。

我使用 mytextview.getLineCount() 但它没有用。它总是返回 0。

有人能帮我吗。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-10-10T13:34:43.180

您需要发布获取行数的方法。这是示例代码

```
imageCaption.setText("Text Here");
imageCaption.post(new Runnable() {

    @Override
    public void run() {

        int lineCount    = imageCaption.getLineCount();

        Log.v("LINE_NUMBERS", lineCount+"");
    }
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-18T11:56:01.167

您可以检查 onCreateOptionsMenu() 内的 TextView 参数

```
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    TextView tv1 = (TextView)findViewById(R.id.textView);
    Rect rect = new Rect();
    int c = tv1.getLineCount();
    tv1.getLineBounds(0, rect);
    tv1.getLineBounds(1, rect);
    return true;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-13T09:35:05.337

公共 int getLineCount ()

自：API 级别 1

返回文本行数，**如果内部布局尚未构建，则返回 0。**

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-13T09:37:06.073

请检查此链接。

[Android Edittext：在 Activity 的 onCreate() 中获取 LineCount](https://stackoverflow.com/questions/8086321/android-edittext-get-linecount-in-an-activitys-oncreate)

如果尚未创建内部布局，tv.getLineCount() 将始终为 0。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-08-26T20:07:41.923

以下将在您设置 tv.setText() 的同一位置提供 textview 的行数。

```
int maxTextViewWidth="ENTER MAX WIDTH HERE";

tv.setText("hello\nhow are you?");

int widthMeasureSpec = View.MeasureSpec.makeMeasureSpec(maxTextViewWidth, View.MeasureSpec.AT_MOST);

int heightMeasureSpec = View.MeasureSpec.makeMeasureSpec(0, View.MeasureSpec.UNSPECIFIED);

tv.measure(widthMeasureSpec, heightMeasureSpec);

int lineCount=tv.getLineCount(); 
```

* * *

## 回答 #6

> 赞同：-9
> 
> 时间：2012-07-17T09:00:36.593

谢谢大家。我已经解决了。我像这样使用线程来获取行数

```
@Override
public void run() {
    // TODO Auto-generated method stub
    while(textView.getLineCount() == 0){

    }
    countLine = textView.getLineCount(); 

} 
```

如果您有同样的问题，希望这会有所帮助。最良好的问候。

# mongodb - 在 MongoHQ 上基于单个数据库创建本地 MongoDB 副本集

> ID：11467637
> 
> 赞同：1
> 
> 时间：2012-07-13T09:22:29.010
> 
> 标签：mongodb, mongohq

我们在 MongoHQ 上托管了一个 mongo 数据库。

我们现在想要移动到我们自己的服务器上的副本集。我希望我可以将当​​前数据库更改为副本集，然后将我们的服务器添加到其中，然后最终从集合中删除 mongohq 实例。

这对 mongohq 是否可行/合适？做一个mongodump更好吗？

从单个生产 mongohq db 到我们自己服务器上的副本集的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T23:21:13.157

目前，由于这是一个单一实例，因此需要 MongoHQ 团队的一些帮助。根据数据库的大小，我们可以提供帮助。但是，如果数据足够小（2GB 或更少），那么使用副本或 mongodump/mongorestore 移动它最终会快得多。

此外，MongoHQ 也有副本集计划。通过这种方式很容易添加冗余和高可用性。

希望这可以帮助！

杰森·蒙戈总部

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T12:36:05.053

MongoHQ b/c 当前不支持此功能，您最终必须使用标志启动该`mongod`过程。`--replSet <replica set name>`如果您想创建自己的副本集，我会从总部转储您的数据，然后从那里创建您自己的副本集，您可以控制所有节点。

# ironpython - IronPython 在已编译的 IronPython 的 GUI 应用程序中的标准库

> ID：11467645
> 
> 赞同：0
> 
> 时间：2012-07-13T09:22:53.200
> 
> 标签：ironpython

*大家好，第一次在这里问，通常我需要的一切都已经在这里回答了，但是这个真的很困扰我，我还*找不到答案

 *我正在使用 Visual Studio 2010 在 Windows 7 64 位中开发 IronPython（版本 2.7.2.1）GUI 应用程序。我已经成功编译了整个应用程序，但是从编译的应用程序调用时我发现了一个*奇怪*的行为。 这是调用的部分： `sys.version``.exe`

```
clr.AddReference("StdLib")
import sys
from platform import python_version_tuple
print sys.version
print sys.path 
```

这是调用路径主脚本的输出`ipy.exe`：

```
 > D:\VisualStudioSolutions\MarketingAppSolution\MarketingApp>ipy MarketingApp.py
>   2.7.2 (IronPython 2.7.2.1 (2.7.0.40) on .NET 4.0.30319.239 (32-bit))
>   ['D:\VisualStudioSolutions\MarketingAppSolution\MarketingApp'..] 
```

这是调用编译后的`.exe`应用程序的输出：

```
 > D:\VisualStudioSolutions\MarketingAppSolution\MarketingApp>out\MarketingApp.exe
> 2.7.2 ()
> ['.', 'D:\\VisualStudioSolutions\\MarketingAppSolution\\MarketingApp\\out\\Lib', 'D:\\VisualStudioSolutions\\MarketingAppSolution\\Mar
ketingApp\\out\\DLLs']
> failed to parse CPython sys.version: '2.7.2 ()' 
```

`StdLib`in`clr.AddReference("StdLib")`是我编译的 IronPython 标准库的 dll 的 clr 导入。
正如你所看到的，如果我从编译的应用程序中调用 IronPython 模块的`python_version_tuple`函数，它会导致错误。`platform``failed to parse CPython sys.version: '2.7.2 ()'`

那么，我在编译过程中做错了什么？
我应该如何集成 IronPython 的标准库以将它们与我的应用程序一起分发？
谢谢你的帮助！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T15:09:08.530

这与用户创建的引擎[的 IronPython 问题有关。](http://ironpython.codeplex.com/workitem/31736)基本上，IronPython 期望主机在引擎上设置版本变量。创建的可执行文件`pyc.py`是主机，它不设置这些变量。

这将在 2.7.4 中得到适当修复，但几个月后不会出现。同时，您可以在从平台导入之前手动设置`sys.version`以匹配您想要的版本字符串。

```
import sys
if sys.version == '2.7.2 ()':
    sys.version = '2.7.2 (IronPython 2.7.2.1 (2.7.0.40) on .NET 4.0.30319.239 (32-bit))' 
```*

# search - 如何在numpy中找到x给定y或反之亦然？

> ID：11467649
> 
> 赞同：4
> 
> 时间：2012-07-13T09:22:56.540
> 
> 标签：search, numpy, numerical-methods

例如，我有以下数组：

```
x = [0, 1, 2, 3, 4.5, 5]
y = [2, 8, 3, 7,   8, 1] 
```

我希望能够做到以下几点`x`：

```
>>> what_is_y_when_x_is(2)
(2, 3)
>>> what_is_y_when_x_is(3.1) # Perhaps set rules to round to nearest (or up or down)
(3, 7) 
```

另一方面，当给定时`y`：

```
>>> what_is_x_when_y_is(2)
(0, 2)
>>> what_is_x_when_y_is(max(y))
([1, 4.5], 8) 
```

## 这个问题的情况

我可以绘制`y`与`x`使用封闭分析函数的对比，只需调用`foo_function(x)`. 但是，我正在运行其数据图没有封闭解析解的**数值模拟。**

## 尝试的解决方案

我以前解决过类似的问题，并大致以这种方式处理它们：

`what_is_y_when_x_is(some_x)`

1.  在数组`x`中搜索`some_x`。
2.  获取它的索引，`i`.
3.  拿起`y[i]`。

## 问题

有一个更好的方法吗？也许是内置`numpy`函数或更好的算法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T22:23:08.880

您应该查看 numpy.searchsorted 和 numpy.interp。这两个看起来他们都可以做到这一点。这是一个例子：

```
import numpy as np
x = np.array([0, 1, 2, 3, 4.5, 5])
y = np.array([2, 8, 3, 7,   8, 1])

# y should be sorted for both of these methods
order = y.argsort()
y = y[order]
x = x[order]

def what_is_x_when_y_is(input, x, y):
    return x[y.searchsorted(input, 'left')]

def interp_x_from_y(input, x, y):
    return np.interp(input, y, x)

print what_is_x_when_y_is(7, x, y)
# 3
print interp_x_from_y(1.5, x, y)
# 2.5 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T10:58:22.803

您可以为此使用[bisect](http://docs.python.org/library/bisect.html)模块。这是纯 python - 这里没有 numpy：

```
>>> x = [0, 1, 2, 3, 4.5, 5]
>>> y = [2, 8, 3, 7,   8, 1]
>>> x_lookup = sorted(zip(x, y))
>>> y_lookup = sorted(map(tuple, map(reversed, zip(x, y))))
>>> 
>>> import bisect
>>> def pair_from_x(x):
...    return x_lookup[min(bisect.bisect_left(x_lookup, (x,)), len(x_lookup)-1)]
... 
>>> def pair_from_y(y):
...    return tuple(reversed(y_lookup[min(bisect.bisect_left(y_lookup, (y,)), len(y_lookup)-1)]))
... 
```

以及一些使用它的例子：

```
>>> pair_from_x(0)
(0, 2)
>>> pair_from_x(-2)
(0, 2)
>>> pair_from_x(2)
(2, 3)
>>> pair_from_x(3)
(3, 7)
>>> pair_from_x(7)
(5, 1)
>>> 
>>> pair_from_y(0)
(5, 1)
>>> pair_from_y(1)
(5, 1)
>>> pair_from_y(3)
(2, 3)
>>> pair_from_y(4)
(3, 7)
>>> pair_from_y(8)
(1, 8) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T09:38:32.230

就我而言，您描述的方式是一个好方法。我不确定您是否是，但我认为您可以在数组上使用 .index(...) 方法：

```
>>> li
['I', 'hope', 'this', 'answer', 'helps', 'you']
>>> li.index("hope")
1 
```

除此之外，您可能需要考虑一个具有 x 和 ay 的数组操作“Points”，尽管我不确定这当然是否可行。这样您就不必保持两个数组同步（相同数量的元素）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-13T15:53:16.343

我认为您的管道没有任何问题。您可以基于[numpy.where](http://docs.scipy.org/doc/numpy/reference/generated/numpy.where.html)编写一个代码片段来有效地实现它。请注意，您必须首先将列表作为 numpy 数组传递（这可以包含在函数中）。

下面是一个完成这项工作的函数的示例，带有一个对目标进行舍入的选项（我已经包含了一个`which array`参数，所以一切都可以在一个函数中完成，无论你想在 x 或 y 中搜索什么）。请注意，其中一个输出将是一个 numpy 数组，因此请对其进行修改以将其转换为您想要的任何内容（列表、元组等）。

```
import numpy as np

def pick(x_array, y_array, target, which_array='x', round=True):
    # ensure that x and y are numpy arrays
    x_array, y_array = np.array(x_array), np.array(y_array) 

    # optional: round to the nearest. True by default
    if round==True:
        target = np.round(target) 

    if which_array == 'x': # look for the target in x_array
        return target, y_array[np.where(x_array == target)[0]]
    if which_array == 'y': # look for the target in y_array
        return x_array[np.where(y_array == target)[0]], target 
```

您的示例给出的结果：

```
# >>> what_is_y_when_x_is(2)
pick(x, y, 2, 'x')
(2, array([3]))

# >>> what_is_y_when_x_is(3.1)
pick(x, y, 3.1, 'x')
3.0, array([7]))

# >>> what_is_y_when_x_is(2)
pick(x, y, 2, 'y')
(array([ 0.]), 2)

# >>> what_is_x_when_y_is(max(y))
pick(x, y, max(y), 'y')
(array([ 1\. ,  4.5]), 8) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-04-27T20:32:32.300

这对我有用：

```
def what_is_y_when_x_is(value, x, y, tolerance=1e-3):
    return [(xi, yi) for (xi, yi) in zip(x, y) if abs(xi - value) <= tolerance] 
```

请注意，上面的代码不是比较相等性，而是执行“足够接近”的相等性测试。**默认容差**设置为 0.001（您可以使用任何其他值）。以下是一些使用示例：

```
>>> x = [0, 1, 2, 3, 4.5, 5]
>>> y = [2, 8, 3, 7,   8, 1]
>>> what_is_y_when_x_is(0, x, y)
[(0, 2)]
>>> what_is_y_when_x_is(1, x, y, tolerance=.1)
[(1, 8)]
>>> what_is_y_when_x_is(2, x, y, tolerance=1)
[(1, 8), (2, 3), (3, 7)]
>>> what_is_y_when_x_is(4, x, y, tolerance=.5)
[(4.5, 8)] 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-04-27T03:55:26.187

这里是@Bi Rico提供的修改版代码：

```
import numpy as np
x = np.array([0, 1, 2, 3, 4.5, 5])
y = np.array([2, 8, 3, 7,   8, 1])

# y should be sorted for both of these methods
order = np.argsort(y)
y = y[order]
x = x[order]

def what_is_x_when_y_is(input, x, y):
    return x[y.searchsorted(input, 'left')]

print(what_is_x_when_y_is(7, x, y))
# 3 
```

# sql - Access Query Alias 请求参数值

> ID：11467651
> 
> 赞同：1
> 
> 时间：2012-07-13T09:23:09.793
> 
> 标签：sql, ms-access

```
SELECT r1.* FROM QueryName  AS r1 
```

抛出一个框，要求为不存在的表中的列 [Date] 提供值。单击确定运行查询，取消不执行任何操作。

```
SELECT r1.* FROM QueryName  r1 
```

美好的。没问题

知道为什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T09:26:21.750

我怀疑该查询以前已按不再存在的列进行排序或过滤。在查询设计窗口的设计视图中打开查询并检查属性。

![查询属性表](../Images/941b9a1058af4ad57cc5d1df40adb3e9.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-22T18:29:55.437

不久前我遇到了这个参数问题。不过，我的错误是列名拼写错误。再次检查拼写，以确保。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T09:25:28.933

一些 RDBMS 不需要关键字 AS 作为表别名，但对列别名很满意。在 ORACLE 和 ACCESS 中，表别名不需要关键字 AS

# android - ListView 在与交互之前不会呈现所有项目

> ID：11467653
> 
> 赞同：13
> 
> 时间：2012-07-13T09:23:14.663
> 
> 标签：android, android-layout, android-listview

我在使用我的 ListView 时遇到了一个非常奇怪的问题。

我的适配器项目中只有一部分呈现在屏幕上的列表视图中，但是当我与列表视图交互（即尝试滚动它）时，所有项目都被正确呈现。

只有当我的项目比屏幕显示的少时才会出现这种情况。看看下面的这些屏幕截图。

**互动前：** ![在此处输入图像描述](../Images/b2504f0c10dc4c71007bb389ae9cf9d8.png)

**互动后：** ![在此处输入图像描述](../Images/4baf08a12c1d1a86689ccf668a93c35f.png)

添加项目的活动源代码：

```
String[] jRests = getResources().getStringArray(R.array.j_restaurants);
        String[] lRests = getResources().getStringArray(R.array.l_restaurants);

        items = new ArrayList<Object>();
        items.add(getString(R.string.campus_j));
        for(String item : jRests){
            String[] val = item.split(",,,");
            items.add(new FoodSectionListItem(new Restaurant(val[0], val[1], val[2], "")));
        }   
        items.add(getString(R.string.campus_l));
        for(String item : lRests){
            String[] val = item.split(",,,");
            items.add(new FoodSectionListItem(new Restaurant(val[0], val[1], val[2], "")));
        }   

        getSupportActionBar().setDisplayHomeAsUpEnabled(true);
        adapter = new BaseSectionAdapter(this, R.layout.list_item_fragment_header);
        if(!isTabletView()){
            adapter.setSelectedItem(-1);
        }
        adapter.setItems(items); 
```

适配器代码：

```
public class BaseSectionAdapter extends AmazingAdapter {

    private LayoutInflater inflater;
    private int selectedItem = 0;
    private List<Object> items;
    private List<SectionItem> sections = new ArrayList<SectionItem>(10);
    private List<Class> itemTypes = new ArrayList<Class>();
    private List<Integer> sectionPositions = new ArrayList<Integer>();
    private int listHeaderLayoutId;
    private View headerView;

    public static interface ISectionListItem {
        public void setProps(View convertView, int position, int selectedItem);
        public View getLayout(LayoutInflater inflater);
    }

    private class SectionItem implements Serializable {
        private static final long serialVersionUID = -8930010937740160935L;
        String text;
        int position;

        public SectionItem(String text, int position) {
            this.text = text;
            this.position = position;
        }
    }

    public BaseSectionAdapter(Context context, int listHeaderLayoutId) {
        this.listHeaderLayoutId = listHeaderLayoutId;
        init(context);
    }

    public BaseSectionAdapter(Context context, int listHeaderLayoutId, List<Object> listItems) {
        this.listHeaderLayoutId = listHeaderLayoutId;
        init(context);
        initListItems(listItems);
    }

    private void init(Context context) {
        inflater = (LayoutInflater) context
                .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    }

    public void setSelectedItem(int position) {
        selectedItem = position;
    }

//  public List<ListItem> getItems() {
//      return items;
//  }

    private void initListItems(List<Object> itemList) {
        int curSection = -1;
        //int curPosition = 0;
        //curSection = 0;

        this.items = itemList;
        itemTypes.clear();
        sections.clear();
        sectionPositions.clear();

        int listSize = itemList.size();
        for(int i = 0; i < listSize; i++){
            Object currentItem = items.get(i);
            if(currentItem instanceof String){
                sections.add(new SectionItem((String) currentItem,i));
                curSection++;
            }
            if(!itemTypes.contains(currentItem.getClass())){
                itemTypes.add(currentItem.getClass());
            }

            sectionPositions.add(curSection);
        }

        Log.d("test", "No of items = "+items.size());
        Log.d("test", "No of itemtypes = "+itemTypes.size());
        Log.d("test", "View type count = "+getViewTypeCount());
    }

    public void setItems(List<Object> itemList) {
        initListItems(itemList);
    }

    public int getCount() {
        return items==null?0:items.size();
    }

    @Override
    public int getViewTypeCount(){
        return (itemTypes.size() == 0)?1:itemTypes.size();
    }

    @Override
    public int getItemViewType(int position){
        return itemTypes.indexOf(items.get(position).getClass());
    }

    @Override
    public boolean isEnabled(int position){
        return !(items.get(position) instanceof String || items.get(position) instanceof EmptySectionListItem);
    }

    @Override
    public Object getItem(int position) {
        return items.get(position);
    }

    public long getItemId(int position) {
        return position;
    }

    @Override
    protected void onNextPageRequested(int page) {
        // TODO Auto-generated method stub

    }

    @Override
    protected void bindSectionHeader(View view, int position,
            boolean displaySectionHeader) {
//      TextView lSectionTitle = (TextView) view
//              .findViewById(R.id.txt_list_header);
//      if (displaySectionHeader) {
//          lSectionTitle.setVisibility(View.VISIBLE);
//          lSectionTitle
//                  .setText(getSections()[getSectionForPosition(position)]);
//      } else {
//          lSectionTitle.setVisibility(View.GONE);
//      }
    }

    @Override
    public View getAmazingView(int position, View convertView, ViewGroup parent) {
        Object curItemObject = items.get(position);
        boolean isHeader = (curItemObject instanceof String);

        if(convertView == null){
            if(isHeader && headerView != null){
                convertView = headerView;
            }else if(isHeader){
                convertView = inflater.inflate(listHeaderLayoutId, null);
                headerView = convertView;
            }else{
                convertView = ((ISectionListItem) curItemObject).getLayout(inflater);
            }
        }   
        if(isHeader){
            TextView header = ((TextView)convertView.findViewById(R.id.txt_list_header));
            header.setText((String)curItemObject);
        }else{
            ((ISectionListItem)curItemObject).setProps(convertView, position, selectedItem);
        }
        return convertView;
    }

    @Override
    public void configurePinnedHeader(View header, int position, int alpha) {

        TextView textView = ((TextView)header.findViewById(R.id.txt_list_header));
        textView.setText(getSections()[getSectionForPosition(position)]);
    }

    @Override
    public int getPositionForSection(int section) {
        if(section >= sections.size()){
            return 0;
        }

        return sections.get(section).position;
    }

    @Override
    public int getSectionForPosition(int position) {
        return sectionPositions.get(position);
    }

    @Override
    public String[] getSections() {
        String[] res = new String[sections.size()];
        for (int i = 0; i < res.length; i++) {
            res[i] = sections.get(i).text;

        }
        return res;
    }
} 
```

布局代码：

```
LinearLayout layout = new LinearLayout(this);
            layout.setOrientation(LinearLayout.HORIZONTAL);

            FrameLayout listLayout = new FrameLayout(this);
            LinearLayout.LayoutParams listParams = new LinearLayout.LayoutParams(0, FrameLayout.LayoutParams.MATCH_PARENT);
            listParams.weight = 1;
            listLayout.setId(LIST_FRAGMENT_VIEW_ID);

            FrameLayout detailLayout = new FrameLayout(this);
            LinearLayout.LayoutParams detailParams = new LinearLayout.LayoutParams(0, FrameLayout.LayoutParams.MATCH_PARENT);
            detailParams.weight = 2;
            detailLayout.setId(DETAIL_FRAGMENT_VIEW_ID);

            layout.addView(listLayout, listParams);
            layout.addView(detailLayout, detailParams);

            if(savedInstanceState == null){

            FragmentTransaction ft = getSupportFragmentManager().beginTransaction();

            ft.add(listLayout.getId(), (Fragment) listFragment, TWO_PANEL_LIST_FRAGMENT_TAG);
            ft.add(detailLayout.getId(), detailFragment);
            ft.commit();

            }
            setContentView(layout); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-01-02T06:49:27.670

尝试在 runOnUIThread() 方法中调用 notifyDataSetChanged() ，如下所示，它会像魅力一样工作。:)

```
 runOnUiThread(new Runnable() {
                    @Override
                    public void run() {
                        messageAdapter.notifyDataSetChanged();
                    }
                }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T09:01:10.847

我不知道是什么导致了这个问题，但如果你没有找到一个合乎逻辑的解决方案，你可以尝试这样的事情：

*   `onTouchEvent()`每当您启动`ListView`.
*   启动 ListView 后立即以编程方式向下滚动和备份。

ETC..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T22:56:50.207

将 ListView 小部件添加到 layout.xml 并将列表内容添加到其中。不要使用 FrameLayout，因为它可能是问题的原因。它在触摸后更新内容，因此它所在的布局没有像 ListView 小部件那样实现正确的 onCreate() 设置。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-20T09:52:03.453

添加新项目后，您是否在适配器上调用方法 notifyDataSetChanged()？这会导致列表视图在基础数据集更改时刷新其视图。

如果它仍然不起作用，请尝试 notifyDataSetInvalidated() 导致列表视图完全重绘。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-05T08:51:27.327

解决了！！！

问题在于适配器试图重用相同的部分项目。不好！！！

将其更改为每次我们点击一​​个部分时都会膨胀部分项目！

# javascript - Bind('pageinit') 调用方法失败

> ID：11467655
> 
> 赞同：0
> 
> 时间：2012-07-13T09:23:22.670
> 
> 标签：javascript, jquery

我正在尝试将来自 afaik、jquerymobile 的页面初始化事件绑定到一个方法，以便我可以设置我的标题，这已经完成，因为稍后我希望动态设置它。但我的事件甚至没有触发:'-( 任何帮助将不胜感激。

```
$('#mapmode').bind('pageinit', function(event) {
    initPageHeader();
});

function initPageHeader(){
    alert('oldhtml');
    var oldhtml=document.getElementById('header').innerHTML;
    document.getElementById('header').innerHTML="";
    var html = oldthml + '<a href="#" data-rel="back" data-role="button" ><img'+
    ' align="middle"src="../images/back.png" alt="back" vspace="2"/></a><h1>'+
    '<img align="middle"src="../images/main_header.png" alt="logo" vspace="2"/>'+
    '</h1><a href="#first" data-role="button" data-inline="true">'+
    '<img align="middle"src="../images/home.png" '+
    'alt="picture to take you to the first page"/></a>'
    document.getElementById('header').innerHTML=html;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T09:29:22.777

如果要绑定`pageinit`而不是使用事件委托，则必须在文档本身上执行此操作：

```
$(document).on("pageinit", function(event) {
    initPageHeader();
}); 
```

如果此行为特定于`#mapmode`页面，则事件委托是可行的方法：

```
$(document).on("pageinit", "#mapmode", function(event) {
    initPageHeader();
}); 
```

顺便说一句，正确使用 jQuery 可以使您的事件处理程序更短且更具可读性：

```
function initPageHeader()
{
    $("#header").html(function(index, originalMarkup) {
        return originalMarkup
            + '<a href="#" data-rel="back" data-role="button">'
            + '<img align="middle" src="../images/back.png" alt="back" '
            + 'vspace="2"/></a><h1><img align="middle" '
            + 'src="../images/main_header.png" alt="logo" vspace="2"/>'
            + '</h1><a href="#first" data-role="button" data-inline="true">'
            + '<img align="middle"src="../images/home.png" '
            + 'alt="picture to take you to the first page"/></a>';
    });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T09:28:12.253

你需要`alert(oldhtml);`在你设置它之前拥有你的。将它移到您的上方`document.getElementById('header').innerHTML=html;`

正如下面 jeemusu 所建议的那样，您可以了解更多关于[jQuery .on](http://api.jquery.com/on/)的信息，因为 bind 已被弃用。

# jquery - jquery循环在调整大小时自动适应窗口宽度

> ID：11467656
> 
> 赞同：4
> 
> 时间：2012-07-13T09:23:36.860
> 
> 标签：jquery, cycle

如果我调整窗口大小然后刷新滑块并且其中的图像将调整大小以匹配浏览器宽度，但是我需要在窗口调整大小时自动发生这种情况......这怎么办？

**http://subzerostudio.com/Clients/perkinreveller/test.html**

```
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>

<script type="text/javascript" src="js/jquery.min.js"></script>
<script type="text/javascript" src="js/jquery.cycle.all.latest.js"></script>
<script type="text/javascript">

$(document).ready(function() {

$('.slideshow').cycle({
    timeout: 400,
    fx: 'scrollHorz',
    next: '#next',
    prev: '#prev',

});

});

</script>

</head>

<body>

<style>
body {
margin:0; padding:0;
height:100%;
width:100%;
position:absolute;
}

#slideshow-wrapper {
width:100%;
min-width:600px;
}

.slideshow {
width:100%;
}
.slideshow div,
.slideshow div img {
width:100% !important;
min-width:100%;
height:auto;
}

</style>

<div class="slideshow">

 <div>
     <img src="images/img1.jpg" alt="" />
 </div>

 <div>
     <img src="images/img1.jpg" alt="" />
 </div>

 <div>
     <img src="images/img1.jpg" alt="" />
 </div>

</div>    

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T09:58:11.073

这就是我设法做到的方式......

```
$(document).ready(function() {

$('#slideshow').cycle({

slideResize: true,
containerResize: true,
width: '100%',
height: '100%',
fit: 1,

fx: 'fade',
next: '#next',
prev: '#prev',  

});

}); 
```

希望这可以帮助任何想要解决这个问题的人（我还没有完全测试它，当我输入寻呼机按钮时，它似乎在播放，同样，当使用诸如 scrollHorz 之类的 fx 时，它似乎把它搞砸了..）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-12-05T03:35:43.983

实际上（如[docs](http://jquery.malsup.com/cycle/options.html)中所述），您唯一需要做的就是指定`fit`选项：

```
$('.slideshow').cycle({
  fit: 1
}); 
```

请注意，您可能还需要使用`width`和`height`选项 - 对我来说这不是必需的。
它们**仅在`fit: 1`设置**并指定幻灯片应设置的宽度和高度时才起作用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-05-20T05:22:03.383

您可以将此代码添加到您的 javascript

```
$(window).resize(function() {

    var slideDiv = $('.slideshow');

    /* ratio = (width / height) is the aspect ratio of the image. 
       You can change this according to dimensions of the image you are
       using */

    var ratio = (640/426);  // width and height of your image 

    var w = slideDiv.parent().width();
    var h = w / ratio;

    slideDiv.width(w);
    slideDiv.height(h);

    slideDiv.children().each(function() {
        $(this).width(w);  // "this" is the img element inside your slideshow
        $(this).height(h);  // "this" is the img element inside your slideshow
    });

}); 
```

我已经完成了这个 JSFiddle [https://jsfiddle.net/0x24u41f/25/](https://jsfiddle.net/0x24u41f/25/)所以你可以测试上面的解决方案。

无需使用标签“div”包装图像。

您的 html 代码可以是这样的：

```
<div class="slideshow">
    <img src="images/img1.jpg" alt="" />
    <img src="images/img2.jpg" alt="" />
    <img src="images/img3.jpg" alt="" />
</div> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-13T09:28:42.403

类似的帖子可以在这里找到[JavaScript 窗口调整大小事件](https://stackoverflow.com/questions/641857/javascript-window-resize-event)

```
window.onresize = function(event) {
   $('.slideshow').cycle({
     timeout: 400,
     fx: 'scrollHorz',
     next: '#next',
     prev: '#prev',

   });

} 
```

检查是否有帮助

# php - PHP heredoc 语法

> ID：11467660
> 
> 赞同：4
> 
> 时间：2012-07-13T09:23:51.967
> 
> 标签：php, heredoc

我想知道是否：

```
$foo = <<< EOT
Hello, World!
EOT; 
```

和

```
$foo = <<<EOT
Hello, World!
EOT; 
```

特别是在所有版本的 PHP（或只是最新版本）中是否都是如此。

我想知道，因为我想知道第一个标识符`<<<`和第一个`EOT`标识符之间的空格在语法上是否有效。例如，我的 PHP 解释器 5.3.10 可以正确运行它，但我的 vim 文本编辑器不会以相同的方式语法高亮 heredoc，如果和之间有空格`<<<`（`EOT`标识符`EOT`是白色而不是紫色）。

那么这里的交易是什么？在所有版本的 PHP 中都合法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-13T09:29:50.053

允许使用制表符和空格，引号显然也是如此：

```
<ST_IN_SCRIPTING>b?"<<<"{TABS_AND_SPACES}({LABEL}|([']{LABEL}['])|(["]{LABEL}["])){NEWLINE} { 
```

[来源](http://svn.php.net/viewvc/php/php-src/trunk/Zend/zend_language_scanner.l?revision=323763&view=markup)

编辑：

*   至少从[2001 年开始允许使用制表符和空格](http://svn.php.net/viewvc/php/php-src/trunk/Zend/zend_language_scanner.l?annotate=46045#l1376)
*   [2008 年](http://svn.php.net/viewvc/php/php-src/branches/PHP_5_3/Zend/zend_language_scanner.l?r1=263595&r2=256823#l1899)添加了引号

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-13T09:31:01.630

手册说（强调我的）

> 第三种分隔字符串的方法是 heredoc 语法：<<<。**在此运算符之后，提供一个标识符**，然后是一个换行符。

对我来说，这意味着空格是可选的（并且始终是可选的），因为在整个语言中，标识符可以通过任意数量的空格与相邻的标记分开——包括没有空格。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T09:29:34.360

不，您不应该在 <<< 和标识符之间提供空格。如 PHP 文档中所述：

> (...) 标识符必须遵循与 PHP 中任何其他标签相同的命名规则：它必须**只包含字母数字字符和下划线**，并且必须**以非数字字符或下划线开头**。

来源：[http ://www.php.net/manual/en/language.types.string.php#language.types.string.syntax.heredoc](http://www.php.net/manual/en/language.types.string.php#language.types.string.syntax.heredoc)

# qt - 使用 QuaZip 将 QStream 写入 zip 文件

> ID：11467666
> 
> 赞同：2
> 
> 时间：2012-07-13T09:24:06.327
> 
> 标签：qt, quazip

我想用 QuaZip 在 ziparchive 的文本文件中写一个 QString。我在 WinXP 上使用 Qt Creator。使用我的代码，存档中的文本文件已创建但为空。

```
QDomDocument doc;
/* doc is filled with some XML-data */

zipfile = new QuaZip("test.zip");
zipfile->open(QuaZip::mdCreate);
QuaZipFile file(zipfile);
file.open(QIODevice::WriteOnly, QuaZipNewInfo("foo.xml"));

QTextStream ts ( &file );
ts << doc.toString();

file.close();
zipfile.close(); 
```

当我尝试使用 QFile 时，它​​按预期工作：

```
QDomDocument doc;
/* doc is filled with some XML-data */

QFile file("test.xml");
file.open(QIODevice::WriteOnly);

QTextStream ts ( &file );
ts << doc.toString();

file.close(); 
```

我在 test.xml 中找到了正确的内容，所以字符串在那里，但不知何故 QTextStream 不想与 QuaZipFile 一起使用。

当我使用 QDataStream 而不是 QTextStream 进行操作时，会有输出，但不是正确的。QDomDocument 文档；/* doc 填充了一些 XML 数据 */

```
zipfile = new QuaZip("test.zip");
zipfile->open(QuaZip::mdCreate);
QuaZipFile file(zipfile);
file.open(QIODevice::WriteOnly, QuaZipNewInfo("foo.xml"));

QDataStream ts ( &file );
ts << doc.toString();

file.close();
zipfile.close(); 
```

test.zip 中的 foo.xml 填充了一些数据，但格式错误（每个字符之间有一个额外的“nul”字符）。

如何在 zip-archive 的文本文件中写入字符串？

谢谢，保罗

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-13T21:02:32.333

您不需要 QTextStream 或 QDataStream 将 QDomDocument 写入 ZIP 文件。

您可以简单地执行以下操作：

```
QDomDocument doc;
/* doc is filled with some XML-data */

zipfile = new QuaZip("test.zip");
zipfile->open(QuaZip::mdCreate);
QuaZipFile file(zipfile);
file.open(QIODevice::WriteOnly, QuaZipNewInfo("foo.xml"));

// After .toString(), you should specify a text codec to use to encode the
// string data into the (binary) file. Here, I use UTF-8:
file.write(doc.toString().toUtf8());

file.close();
zipfile->close(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-22T13:57:07.697

在最初的第一个示例中，您必须刷新流：

```
QDomDocument doc;
/* doc is filled with some XML-data */

zipfile = new QuaZip("test.zip");
zipfile->open(QuaZip::mdCreate);
QuaZipFile file(zipfile);
file.open(QIODevice::WriteOnly, QuaZipNewInfo("foo.xml"));

QTextStream ts ( &file );
ts << doc.toString();
ts.flush();

file.close();
zipfile.close(); 
```

# c# - 一列是组合框的列表视图

> ID：11467668
> 
> 赞同：0
> 
> 时间：2012-07-13T09:24:13.277
> 
> 标签：c#, .net, listview, combobox

我试图让我的 ListView 包含一个 ComboBox 列。我在启动时将多个条目添加到列表中。其中一列是“版本”。可以有多个版本，我想让用户有机会选择他/她想要更新到哪个版本的项目。

当前列表视图：

```
lv_requirements.CheckBoxes = true;
lv_requirements.View = View.Details;
//add columns to list view
lv_requirements.Columns.Add("Name", 270);
lv_requirements.Columns.Add("Type", 150);
lv_requirements.Columns.Add("Status", 100);
lv_requirements.Columns.Add("Current Version", 80);
lv_requirements.Columns.Add("Latest Version", 80); 
```

我将项目添加到列表中，如下所示：

```
String[] itemContent = new String[5];
itemContent[0] = Name;
itemContent[1] = Type;
itemContent[2] = ID;
itemContent[3] = CurrentVersionNumber;
itemContent[4] = LatestVersionNumber;

ListViewItem add = new ListViewItem(itemContent);
add.Tag = handle;

//Add image to list item
add.ImageIndex = item.DisplayImageIndex;
lv_requirements.SmallImageList = icons;
lv_requirements.Items.Add(add); 
```

我要修改的是：

```
object[] itemContent = new object[5];
itemContent[4] = new ComboBox([AllLaterVersions]); 
```

但据我了解，除了字符串之外，没有其他方法可以启动新的 ListViewItem。有没有办法让我拥有一个包含所有版本的组合框，或者如果不可能，至少在该列中有一个可输入的文本字段，而不是用户可以输入他/她想要的版本。

最好的祝福

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T09:35:30.877

您的理解是正确的，ListView 的设计旨在将 String Literals 作为其项目。可能有一些技巧可以实际执行您想要的类似操作，但我很确定这不会是一个非常优雅的解决方案。

所以我的建议是，转储 ListView 并使用 DataGridView，只需很少的努力，您就可以使 GridView 看起来与 ListView 非常相似，并且您可以添加一个下拉列表等等......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T08:43:46.160

您可以使用您需要的值 + 2 个代表用户选择的 bool 属性创建一个实体 ViewModel。

然后您可以轻松地将 DataTemplate 添加到您的 ListView。
DataTemplate 会将复选框（但我认为在这里使用单选按钮会是更好的选择）绑定到 VM 的属性。

```
<ListView>
 <ListView.View >
    <GridView >
        <!--  other columns you need-->
        <GridViewColumn Header="Versions" >
            <GridViewColumn.CellTemplate>
                <DataTemplate>
                    <CheckBox IsCheck="{Binding LatestVersion}"/>
                    <CheckBox IsCheck="{Binding CurrentVersion}"/>
                </DataTemplate>
            </GridViewColumn.CellTemplate>
        </GridViewColumn>
    </GridView>
 </ListView.View>
</ListView> 
```

# excel - R 中的 RDCOMEvents 包未加载 - 需要运行 Excel/R 通信示例

> ID：11467672
> 
> 赞同：0
> 
> 时间：2012-07-13T09:24:35.883
> 
> 标签：excel, r, package, dcom

是否有适用于最新版本的 R（2.14 或 2.15）的 RDCOMEvents 包版本？

我一直在尝试在[http://www.stat.berkeley.edu/~nolan/stat133/Fall05/lectures/DCOM.pdf](http://www.stat.berkeley.edu/~nolan/stat133/Fall05/lectures/DCOM.pdf)的倒数第二页上获取示例- 以行开头的示例

```
library(RDCOMClient)
library(RDCOMEvents) 
```

我可以顺利安装 RDCOMClient，但不能安装 RDCOMEvents，因为它说该包是在 R 2.10.0 之前构建的。

任何可以让我启动并运行的提示都非常感激地收到......谢谢:)

**编辑（2012 年 7 月 16 日）：**

尝试按照建议从源安装，但效果不佳（见下文）。真是令人失望，如此宝贵的包裹似乎已经腐烂了！

```
C:\mypackage>R CMD INSTALL RDCOMEvents_0.3-1.tar.gz
* installing to library 'C:/Users/timp/Documents/R/win-library/2.13'
* installing *source* package 'RDCOMEvents' ...
** libs
  running src/Makefile.win ...
c:/MinGW/bin/g++ -g -Id:/duncan/Projects/R/R-check/src/include -D_GNU_ -DNO_PYCO
M_IPROVIDECLASSINFO -DUSE_R -Wno-deprecated -I.   -c -o events.o events.cpp
events.cpp:12:18: fatal error: Defn.h: No such file or directory
compilation terminated.
make: *** [events.o] Error 1
ERROR: compilation failed for package 'RDCOMEvents'
* removing 'C:/Users/timp/Documents/R/win-library/2.13/RDCOMEvents' 
```

**编辑 2（2012 年 7 月 16 日）：**

RExcel 已被建议作为一种替代方法 - 任何人都可以指出一个 RExcel 示例，其中工作表中的按钮/处理程序是从 R 内部生成的（如上面引用的示例），而不是电子表格设计人员必须处理其中的 VBA 代码电子表格？鉴于这种以 R 为中心的方法在几年前是可行的，现在肯定仍然可行……*不知何故*……

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T05:45:44.613

好吧，你可以尝试从源代码安装包，[这里](http://www.omegahat.org/RDCOMClient/RDCOMClient_0.93-0.tar.gz)和[这里](http://www.omegahat.org/RDCOMEvents/RDCOMEvents_0.3-1.tar.gz)的包都可用。

解压缩档案后，您可以从命令行使用 R 构建和安装它们，例如

```
R CMD install RDCOMClient 
```

或者

```
R CMD install RDCOMEvents 
```

不幸的是，我的系统（此处为 OS X）上的构建失败，因为必要的 Microsoft C 编译器和库不可用。我想您必须先安装 Visual Studio 和其他软件，然后才能构建和安装这些包。

希望它有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T22:12:24.450

最后一次更新`RDCOMEvents`是 2005 年。它还没有为较新版本的 R 自动编译，因为它需要 Visual Studio 编译器，并且实际上只对 Windows 操作系统有用。（我也尝试使用 ming 编译器对其进行编译，但其中有依赖于 Visual Studio 的指令。）

因此，您可以获取 Visual Studio，并尝试对其进行编译。我不羡慕这项任务。

但是，您可能不知道[RExcel](http://www.statconn.com/products.html)包。他们还开发了一个包，让 R 通过 DCOM 东西与 Excel（和 Word）对话。它可免费用于单一的非商业用途。我不认为中间件是开源的，但它可以工作。不是您问题的答案，但也许足够好？

# c# - 如何在 C# 中正确使用 switch case 块？

> ID：11467674
> 
> 赞同：2
> 
> 时间：2012-07-13T09:24:42.950
> 
> 标签：c#, switch-statement

我在 c# 中有一个 switch case 语句，这里所有的情况都是我作为私有常量制作的，这里有什么不好的编程习惯，还是我需要在这里使用枚举和在 case 块中使用枚举器。我在这里只显示了三个常量，我有十个常数和十个案例块

```
private const String FEASIBLESIZE = "Total FEASIBLESIZE";
private const String AVAILABLESIZE = "Total AVAILABLESIZE";
private const String EXCESSSIZE = "Total EXCESSSIZE";
                          .
                          . 
switch (value.ToString())
{
    case FEASIBLESIZE:
        Level.Add(TEAMSIZE, test.ToString());
        break;

    case AVAILABLESIZE:
        Level.Add(BROADSIZE, test.ToString());                                
        break;

    case EXCESSSIZE:
        Level.Add(NARROWSIZE, test.ToString());
        break;
         .
         .
         . 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-13T09:28:01.547

除了可怕的格式，它看起来大致还可以。当然，如果不真正了解您的代码，这有点难以判断。不过，Darin 是正确的，因为您没有遵守默认的命名约定（在 C# 中的任何地方都不允许使用大写字母）。

但我见过更糟糕的情况，如果这是任何安慰的话。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-13T09:29:26.693

您正在做的事情看起来可以使用`Dictionary<string,string>`从一种尺寸类型到另一种尺寸类型的映射来替换。

```
var sizeMap = new Dictionary<string,string>();

sizeMap.Add(FEASIBLESIZE, TEAMSIZE);
sizeMap.Add(AVAILABLESIZE, BROADSIZE);
sizeMap.Add(EXCESSSIZE, NARROWSIZE); 
```

而不是开关：

```
Level.Add(sizeMap[value.ToString()], test.ToString()); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-13T09:29:18.783

请尝试使用花括号来确定案例的范围，这只是个人风格，但在代码行增长时会有所帮助，并且始终使用默认值：too

```
case FEASIBLESIZE:
{
  Level.Add(TEAMSIZE, test.ToString());
  break;
}
default:
///...
break; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-13T09:40:24.350

糟糕的编程习惯：

```
private const String FEASIBLESIZE = "Total FEASIBLESIZE"; 
```

良好的编程习惯：

```
private const String FEASIBLE_SIZE = "Total FEASIBLESIZE"; 
```

更好的编程实践：

```
private const String FeasibleSize = "Total FEASIBLESIZE"; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-13T09:45:58.940

您的常量似乎是 Enum 的候选者，我会选择 Enum 而不是 const ......

# php - 通过 merk_id 加入 2 个表

> ID：11467678
> 
> 赞同：0
> 
> 时间：2012-07-13T09:25:06.717
> 
> 标签：php, join, distinct

我正在尝试合并到表格中。我有 11 个不同的品牌，我有属于一个品牌的轮子。您可以使用选项选择框按名称选择品牌，当我想要使用该品牌的所有轮子时。

这是我正在使用的课程：

```
 <?php

include_once "connect.class.php";

class merken extends connect
{   
    private $merkenlijst;

    public function getMerken($database, $id = NULL)
    {
        $sql = "SELECT * FROM ".$database."_merken";
        if(!empty($id))
        {
            $sql .= " WHERE merk_code=:id"; 
        }
        else
        {
            $sql .= " ORDER BY merk_naam ASC";
        }
        try
        {
            $stmt = $this->db->prepare($sql);
            if(!empty($id)){ $stmt->bindParam(":id", $id, PDO::PARAM_STR); }
            $stmt->execute();
            $this->merkenlijst = $stmt->fetchAll(PDO::FETCH_OBJ);
            $stmt->closeCursor();

            return $this->merkenlijst;
        }
        catch (Exception $e)
        {
            die ( $e->getMessage() );
        }
    }

    public function __construct($dbo = NULL)
    {

        parent::__construct($dbo);
    }
}

?> 
```

这就是我从数据库中回显信息的方式：

```
 <div class="bandwielkolom">
                        <form action="index.php?lang=nl&amp;p=<?php echo $_GET['p']; ?>#keuze" method="post">
                            <table class="bandentabel">
                                <tr>
                                    <th colspan="2">Zoek op merk<a name="wiel"></a></th>
                                </tr>
                                <tr>
                                    <td>Merk:</td>
                                    <td>
                                        <select name="wiel_merk">
                                            <option value="0">- Merk -</option>
<?php
    $merken = $merkclass->getMerken($website);
    foreach($merken as $merk)
    {
        echo "\t\t\t\t\t\t\t\t\t\t\t<option value=\"".$merk->merk_code."\"";
        if(isset($_GET['search']) && $_GET['search'] == "wiel" && isset($_GET['merk']) && $_GET['merk'] == $merk->merk_code || isset($_POST['wiel_submit']) && $_POST['wiel_merk'] == $merk->merk_code) { echo " selected=\"selected\""; }
        echo ">".$merk->merk_naam."</option>\n";
    }
?>
                                        </select>
                                    </td>
                                </tr>
                                <tr>
                                    <td>&nbsp;</td>
                                    <td><input type="submit" name="wiel_submit" value="Zoek" /></td>
                                </tr>
                                <tr>
                                    <td colspan="2">&nbsp;</td>
                                </tr>
                                <tr>
                                    <td colspan="2">&nbsp;</td>
                                </tr>
                            </table>
                        </form>
                    </div>
                    <div class="clearboth"></div>
                    <br />
<?php
if(isset($_POST['wiel_submit']) && $_POST['wiel_submit'] == "Zoek" || isset($_GET['merk']))
{
    $merk = NULL;
    if(isset($_POST['wiel_submit']) && $_POST['wiel_submit'] == "Zoek")
    {
        $merk = $_POST['wiel_merk'];
    }
    $merken = $merkclass->getMerken($website, $merk);
        foreach($merken as $merk)
    {
?>
                    <img src="http://www.etyre.net/preview/bnet/logos/<?php echo str_replace(".png", "_150.png", $merk->merk_logo); ?>" width="150" class="logo" alt="<?php echo $merk->merk_naam; ?>"/>
                    <div id="merken">
                    <li><span class="title"><?php echo $merk->wiel_info; ?></span>
                            <a href="http://www.inter-tyre.nl/inter-tyre/images/w3/<?php echo $merk->wiel_foto; ?>" class="preview" title="Fotonummer: <?php echo $merk->wiel_foto;  ?>">
                                <img src="http://www.inter-tyre.nl/inter-tyre/images/w2/<?php echo $merk->wiel_foto; ?>" alt="Fotonummer: <?php echo $merk->wiel_foto; ?>" class="wheelImg"/>
                            </a>
                        <div class="clearboth"></div>
                    </div>
<?php
    }
?>
<?php
}
?> 
```

我怎样才能将这两个表连接在一起，而不是当我选择一个品牌时，它会显示所有具有该品牌的车轮？在我的选择中没有双重品牌？

[维伦表](http://imageshack.us/photo/my-images/822/wielen.png/)

[merken table](http://imageshack.us/photo/my-images/717/merken.png/) 有人可以帮帮我吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T09:39:05.050

您的问题有点不清楚，在我看来，您懒得去阅读[JOIN](http://dev.mysql.com/doc/refman/5.0/en/join.html)的文档。

无论如何，以下几行应该有效：

```
SELECT w.*,m.* FROM wielen w
LEFT JOIN merken m ON w.merk_id = m.id
WHERE m.id = $your_current_merk; 
```

这为您提供了所有车轮的列表，以及它们相关的品牌信息。

如果您想反其道而行之，并且不想让您的品牌再次出现，则使用您当前的设置，您会想要执行 GROUP_CONCAT，就像在[这个问题](https://stackoverflow.com/questions/11447631/subqueries-for-each-result-or-inner-join-with-php-loop-or/11447897#11447897)中一样。

# ruby-on-rails - Rails - ActiveRecord - 将元素组合与特定 ID 相关联

> ID：11467682
> 
> 赞同：0
> 
> 时间：2012-07-13T09:25:22.950
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord, has-many-through

我有一个有趣的问题，我以前从未处理过。我正在寻找处理它的最佳方法。

我正在创建一个将学生链接到虚拟机的管理站点。一个学生可以注册多门课程并拥有一个 virtual_machine_id，这取决于他们所修课程的组合。管理员可以创建新课程并（单独）将课程组合映射到特定的 virtual_machine_ids。

1) 将变量元素的组合与特定 id 相关联的最佳方法是什么？如果元素是固定的，我将创建一个表，其中每个元素的列和 virtual_machine_id 的列。但是由于这些元素可以更改（当管理员添加或删除课程时），我如何以一种可以轻松查询组合及其关联 ID 的方式映射它们？

2) 现在，我使用 has_many :through 关联和带有 student_id 和 course_id 的第三个表将学生映射到课程。如果我需要收集课程组合并将整个组合分配给单个 virtual_machine_id，这是正确的方法吗（我无法将 id 分配给学生，因为他们可能拥有多个 virtual_machine，具体取决于他们参加的课程数量）

我将 EAV（实体属性值）模型视为一种解决方案，但普遍的共识似乎是这是一个坏主意，因为您失去了一些 ActiveRecord 功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T09:13:12.357

如果您希望将**EAV**与**ActiveRecord ORM**一起使用，您可以查看[hydra_attribute gem](https://github.com/kostyantyn/hydra_attribute)，它允许在运行时创建新属性并有可能按它们查找/排序/分组。

目前**0.3.2**版本不支持**属性集**，但在下一个版本中，我将添加此功能，您将能够为每个**学生**记录分配唯一的属性集合。

# ruby-on-rails-3 - 无法根据传递给 rake 任务的参数加载文件

> ID：11467684
> 
> 赞同：0
> 
> 时间：2012-07-13T09:25:34.767
> 
> 标签：ruby-on-rails-3, rake, yaml

我无法根据传递给 rake rask 的参数加载文件

我的代码

```
task :update_s =>:environment do
 puts 'enter file name for status'
 file=STDIN.gets
 file="config/status/#{file}"
 license_status=YAML.load_file(file)
end 
```

传递的参数是 abc.yml 但我得到一个错误

```
No such file or directory - config/status/abc.yml 
```

但是如果我硬编码文件名（下面给出的代码）它可以工作

```
task :update_s =>:environment do

 license_status=YAML.load_file("config/status/abc.yml")

end 
```

我尝试了几种组合都没有奏效。有没有办法根据传递给 rake 任务的参数加载 yml 文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T09:39:46.107

这是因为`gets`返回换行符，所以`file`实际上是`"config/status/abc.yml\n"`

您可以使用以下命令删除换行符[`chomp`](http://ruby-doc.org/core-1.9.3/String.html#method-i-chomp)：

```
file = STDIN.gets.chomp 
```

# c# - 如何动态定义超链接点击事件？

> ID：11467688
> 
> 赞同：2
> 
> 时间：2012-07-13T09:25:46.420
> 
> 标签：c#, asp.net, radgrid

我遇到了一些问题：我正在运行时创建一个具有导航 URL 的超链接。我需要定义它的点击事件，以便我可以将一些值保存到数据库中。我做了类似下面的事情但没有成功。

你能建议一个替代方案吗？

```
protected void RadGrid1_ItemDataBound(object sender, GridItemEventArgs e) {
  if (e.Item is GridDataItem) {
    HyperLink link = (HyperLink)gridDataItem["ContentTitle"].Controls[0];
    link.ForeColor = System.Drawing.Color.Navy;
    link.ToolTip = Common.grdTextCell(gridDataItem["ContentSummaryDescr"].Text);
    link.NavigateUrl = "~/SomePath/" + gridDataItem["ContentName"].Text;
    link.Target = "_blank";
    link.Attributes.Add("onclick", "document.getElementById('" +
      dummyBtn.ClientID + "').click();");
  }
}

protected void dummyBtn_Click(object sender, EventArgs e) {
} 
```

但是按钮单击事件没有触发，它只是导航到 URL。请问该怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T09:35:30.000

要触发服务器端事件，您需要 a`LinkButton`而不是 a`HyperLink`

`LinkButton`有一个`Click`可以使用的事件处理程序。

`HyperLink`仅重定向并且没有与服务器端代码关联的相应 Click 事件处理程序

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T09:38:18.600

你想要一个链接按钮，而不是一个超链接。

这是一些示例代码，可帮助您入门（未经测试）

```
protected void RadGrid1_ItemDataBound(object sender, GridItemEventArgs e)
{
    if (e.Item is GridDataItem)
    {
        LinkButton link = (LinkButton)gridDataItem["ContentTitle"].Controls[0];
        link.Click += dummyBtn_Click;
    }
}

protected void dummyBtn_Click(object sender, EventArgs e)
{
    Response.Write("dummyBtn_Click");
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-13T09:44:26.373

您应该使用链接按钮。只需在您的代码中用 LinkBut​​ton 替换您的超链接。它应该可以工作。

```
protected void RadGrid1_ItemDataBound(object sender, GridItemEventArgs e) {
  if (e.Item is GridDataItem) {
    LinkButton link = (LinkButton )gridDataItem["ContentTitle"].Controls[0];
    link.ForeColor = System.Drawing.Color.Navy;
    link.ToolTip = Common.grdTextCell(gridDataItem["ContentSummaryDescr"].Text);
    link.NavigateUrl = "~/SomePath/" + gridDataItem["ContentName"].Text;
    link.Target = "_blank";
    link.Click += dummyBtn_Click;

  }
}

protected void dummyBtn_Click(object sender, EventArgs e) {
} 
```

# sql - 如何在 COALESCE() 中获得不同的值

> ID：11467691
> 
> 赞同：9
> 
> 时间：2012-07-13T09:25:54.470
> 
> 标签：sql, sql-server

我有这种格式的表值

```
sam
jack
sam
john

Declare @name varchar(max)
select @name = COALESCE(@name + ', ','')+ user_email 
from   PostedCommentMaster where article_id = @id 
```

我怎样才能获得独特的价值

```
sam,jack,john 
```

像这样。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-07-13T09:28:12.450

您可以将 select 语句包装到子选择中并在结果上应用合并。

```
Declare @name varchar(max) 

select @name = COALESCE(@name + ', ','') + user_email 
from   (select distinct user_email 
        from   PostedCommentMaster 
        where article_id = @id) pc 
```

请注意，这使用 SQL Server 的一项未记录的功能将结果连接到一个字符串中。虽然我再也找不到指向它的链接，但我记得读过你不应该依赖这种行为。

更好的选择是使用`FOR XML`语法返回一个连接的字符串。[对 SO 的搜索](https://stackoverflow.com/search?q=%5Bsql-server%5D%20stuff%20%22for%20xml%22%20concat&submit=search)会返回多个结果，您可以将其用作示例。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-13T09:27:53.563

干得好

```
Declare @name varchar(max) 
select 
    @name = COALESCE(@name + ', ','')+name from (select distinct user_email 
from 
    PostedCommentMaster) as t
where 
    article_id = @id 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-09-09T07:25:05.950

您可以使用`group by`唯一值。

```
Declare @name varchar(max)
select @name = COALESCE(@name + ', ','')+ user_email 
from   PostedCommentMaster where article_id = @id 
group by user_email 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-10-25T08:54:25.977

最好你可以使用这个。

```
Declare @name varchar(max)
select @name = COALESCE(@name + ', ','')+ user_email  from (select distinct user_email 
from   PostedCommentMaster where article_id = @id ) as tblTemp 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-12-03T18:18:54.740

SELECT distinct @name = COALESCE(@name + ', ','')+ user_email from PostedCommentMaster where article_id = @id

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-01-16T07:19:04.987

我被困在同样的问题上。所以我对此的解决方案是——

1.  创建一个#temp 表。
2.  将不同的值插入您的#temp 表。
3.  添加您的合并查询。

    ```
    create table #emailList (user_email varchar(200))
    insert into #emailList select distinct user_email from   PostedCommentMaster 
    where article_id = @id

    Declare @name varchar(max)
    select @name = COALESCE(@name + ', ','')+ user_email 
    from   #emailList 
    ```

    这也有助于使用连接从多个表中获取数据。

# google-api - 如何解决 Google Sites API 中的“给出的用户凭据无效”？

> ID：11467694
> 
> 赞同：0
> 
> 时间：2012-07-13T09:26:00.367
> 
> 标签：google-api

我们在我的公司使用谷歌网站，我正在尝试使用谷歌网站 API 来修改某些页面。我用于登录的凭据是：*用户名*@companyName.com 和唯一密码。另外需要注意的是，我们网站页面的 url 采用以下格式：[https ://sites.google.com/一个/](https://sites.google.com/a/)公司名称/ *NameOfYourPage*

我刚刚开始使用 Google Sites API，并且正在查看他们在 /samples/sites 目录中提供的示例之一。（下载最新的 zip 文件 [https://code.google.com/p/gdata-python-client/downloads/list](https://code.google.com/p/gdata-python-client/downloads/list)后得到这个）。现在我正在尝试运行sites_examples.py。

所以当我运行sites_examples.py 并输入上面给出的站点信息时，我被要求选择授权机制。我选择了客户端登录。当我输入相同的用户名和密码（如上所述）访问站点页面时，它会抛出我：给定的用户凭据无效。

为什么会这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T20:54:31.627

You can get this error if Google detects suspicious activity on your account. To remedy

*   log in to your Google account with the same credentials
*   look for the warning from Google that notifies you of suspicious activity
*   click on the link on the warning on Google's site
*   follow Google's instructions to enable your client code

# bash - 如何使用 bash 脚本使用 tar 备份文件系统？

> ID：11467698
> 
> 赞同：3
> 
> 时间：2012-07-13T09:26:21.617
> 
> 标签：bash, backup

我想备份我的 ubuntu 文件系统，我写了这个小脚本。这是非常基本的，但作为我的第一次尝试，我害怕犯错误。而且由于要花几个小时才能看到结果，所以我认为最好向有经验的程序员询问我是否做错了什么。

我特别感兴趣的`>`是记录输出`mv`还是输出结果`tar`？tar 命令中的变量也是正确的方法吗？

```
#!/bin/bash

mybackupname="backup-fullsys-$(date +%Y-%m-%d).tar.gz"

{ time tar -cfpzv $mybackupname --exclude=/$mybackupname --exclude=/proc --exclude=/lost+found --exclude=/sys --exclude=/mnt --exclude=/media --exclude=/dev / && ls -gh $mybackupname && mv -v $mybackupname backups/filesystem/ ; } > backup-system.log

exit 
```

在我运行这个之前我应该​​知道什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-13T11:20:34.433

Sandro，您可能需要考虑在脚本中将内容分开并产生单独的错误。使事情更容易阅读。

```
#!/bin/bash

mybackupname="backup-fullsys-$(date +%Y-%m-%d).tar.gz"

# Record start time by epoch second
start=$(date '+%s')

# List of excludes in a bash array, for easier reading.
excludes=(--exclude=/$mybackupname)
excludes+=(--exclude=/proc)
excludes+=(--exclude=/lost+found)
excludes+=(--exclude=/sys)
excludes+=(--exclude=/mnt)
excludes+=(--exclude=/media)
excludes+=(--exclude=/dev)

if ! tar -czf "$mybackupname" "${excludes[@]}" /; then
  status="tar failed"
elif ! mv "$mybackupname" backups/filesystem/ ; then
  status="mv failed"
else
  status="success: size=$(stat -c%s backups/filesystem/$mybackupname) duration=$((`date '+%s'` - $start))"
fi

# Log to system log; handle this using syslog(8).
logger -t backup "$status" 
```

如果您想保留调试信息（例如`tar`or的 stderr `mv`），可以通过重定向到 tmpfile 或调试文件来处理。但是，如果命令是通过 cron 运行并且有输出，那么 cron 应该通过电子邮件将其发送给您。静默 cron 作业是成功的 cron 作业。

`if`只要前一个程序成功，这一系列s 就会导致每个程序运行。这就像用 链接你的命令`&&`，但是让你在失败的情况下运行其他代码。

请注意，我已经更改了选项的顺序`tar`，因为后面`-f`的内容是您要保存内容的文件。此外，该`-p`选项仅在从 tar 中*提取文件时有用。*`-c`创建 ( ) tar时始终会保存权限。

其他人可能希望注意到该`stat`命令的这种用法在 GNU/Linux 中有效，但在 FreeBSD 或 Mac OSX 等其他 unices 中无效。在 BSD 中，您将使用`stat -f%z $mybackupname`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-13T09:43:39.293

您拥有的文件重定向只会记录`mv`.

你可以做

```
{ tar ... && mv ... ; } > logfile 2>&1 
```

捕获两者的输出，以及可能发生的任何错误。

始终养成在扩展变量时引用变量的习惯是个好主意。

没有必要`exit`。

# reporting-services - 使用 SSAS 多维数据集的 SSRS 报告 - 时间计算

> ID：11467704
> 
> 赞同：1
> 
> 时间：2012-07-13T09:26:39.947
> 
> 标签：reporting-services, ssas, cube

我正在寻找以下问题的优化解决方案 -

我有一个包含日期维度的多维数据集，该维度具有一个层次结构月->季度->年。

我创建了一个立方体，一切都很好。现在我的 ssrs 报告需要我的所有维度客户销售属性以及上个月利润、当月利润、最近 6 个月利润（每月列出）、上个月交易、去年利润与当年利润等计算。

因为我已经创建了一个层次结构，所以我每个月、每年和每个季度的所有计算都已经在 CUBE 中预先计算了。现在要检索上面列出的计算，进行这些时间计算的最佳方法是什么？将这些计算放在 CUBE 或 SSRS 数据集中的什么位置？

您能否提出一些好的方法以及如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T19:29:21.123

尽管当然可以（如果您对 MDX 感到满意）编写查询以将所有这些计算放入数据集中，但将这些类型的计算放入多维数据集中通常更好地在许多报表中重用。这样，如果您决定使用 Excel 或第三方应用程序，其他工具也可以使用时间计算。

您可以使用计算选项卡中的商业智能向导来执行此操作 - 这是 SSAS 2005 的一篇文章，仍然适用于更高版本：[http ://www.obs3.com/pdf/A%20Different%20Approach%20to%20Time% 20计算%20in%20SSAS.pdf](http://www.obs3.com/pdf/A%20Different%20Approach%20to%20Time%20Calculations%20in%20SSAS.pdf)

这是做类似事情的另一种方法：http: [//www.bidn.com/articles/mdx-and-dmx/169/mdx-time-calculations-done-the-right-way](http://www.bidn.com/articles/mdx-and-dmx/169/mdx-time-calculations-done-the-right-way)

更新：对于从现在起处理过去 6 个月等日期范围的命名集，请参阅这篇文章： http: [//my.opera.com/duncans/blog/using-custom-sets-in-analysis-services-to-deliver -特殊日期范围到最终用途](http://my.opera.com/duncans/blog/using-custom-sets-in-analysis-services-to-deliver-special-date-ranges-to-end-use)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T13:00:43.237

不确定我是否明白你，但问题是你需要获取动态值并且你所有的东西都是硬编码的？

您可以使用 prevmemebr 函数获取层次结构中的前一个成员：

```
([Date].[Calendar].PrevMember, <your measure here>) 
```

其中日期是维度，日历是层次结构。因此，如果您按月浏览，它将获得最近几个月的数据，例如

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T02:11:15.723

您必须使用 mdx 查询计算上个月利润、当月利润、最近 6 个月利润作为多维数据集“计算”中的度量。我最近为我的“收入比较报告”做了这个，我计算`last month's revenue`并`last2monthsrevenue`使用`priorquarterrevenue`了它们。有效！

# php - 正则表达式匹配多维字符串中的顶级分隔符

> ID：11467705
> 
> 赞同：0
> 
> 时间：2012-07-13T09:26:42.987
> 
> 标签：php, regex, pcre, multidimensional-array

我有一个以大型多维结构构成的文件，类似于 json，但不够接近，无法使用 json 库。

数据看起来像这样：

```
alpha {
    beta {
        charlie;
    }
    delta;
}

echo;
foxtrot {
    golf;
    hotel;
} 
```

我正在尝试构建的正则表达式（对于 preg_match_all）应该匹配每个顶级父级（由 {} 大括号分隔），以便我可以递归匹配，构建一个表示数据的多维 php 数组。

我尝试的第一个正则表达式是`/(?<=\{).*(?=\})/s`贪婪地匹配大括号内的内容，但这并不完全正确，因为当顶层有多个同级时，匹配过于贪婪。下面的例子：

使用正则表达式`/(?<=\{).*(?=\})/s`匹配如下：

第一场比赛：

```
 beta {
        charlie;
    }
    delta;
}

echo;
foxtrot {
    golf;
    hotel; 
```

相反，结果应该是：匹配 1：

```
 beta {
        charlie;
    }
    delta; 
```

比赛2：

```
 golf;
    hotel; 
```

那么正则表达式向导，我在这里缺少什么功能，或者我需要以某种方式用 php 解决这个问题？非常欢迎任何提示:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T09:42:08.527

您不能^(**1**)使用正则表达式执行此操作。

或者，如果要匹配从深到浅的块，可以使用`\{[^\{\}]*?\}`and`preg_replace_callback()`存储该值，然后返回`null`以从字符串中擦除它。回调将需要相应地处理嵌套值。

```
$heirarchalStorage = ...;
do {
    $string = \preg_replace_callback('#\{[^\{\}]*?\}#', function($block)
    use(&$heirarchalStorage) {
        // do your magic with $heirarchalStorage
        // in here
        return null;
    }, $string);
} while (!empty($string)); 
```

[不完整、未经测试且无保修。]

这种方法要求字符串也被包裹起来`{}`，否则最终匹配将不会发生，您将永远循环。

对于可以使用众所周知的交换/存储格式（例如 JSON）轻松解决的问题，这是**非常**多（*低效）的工作。*

^(**1**)我本来打算说“*你可以，但是……* ”，但我还是再说一遍，“*~~你不能~~*” ^(**2**)

^(**2**)不要

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-13T10:12:47.493

当然你可以用正则表达式来做到这一点。

```
preg_match_all(
    '/([^\s]+)\s*{((?:[^{}]*|(?R))*)}/',
    $yourStuff,
    $matches,
    PREG_SET_ORDER
); 
```

这在比赛中给了我以下信息：

```
[1]=>
string(5) "alpha"
[2]=>
string(46) "
beta {
    charlie;
}
delta;
" 
```

和

```
[1]=>
string(7) "foxtrot"
[2]=>
string(22) "
golf;
hotel;
" 
```

稍微分解一下。

```
([^\s]+)                # non-whitespace (block name)
\s*                     # whitespace (between name and block)
{                       # literal brace
    (                   # begin capture
        (?:             # don't create another capture set
            [^{}]*      # everything not a brace
            |(?R)       # OR recurse
        )*              # none or more times
    )                   # end capture
}                       # literal brace 
```

仅供参考，这适用于 n 深级别的大括号​​。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T09:42:59.990

我想你可能会[`preg_split`](http://php.net/manual/fr/function.preg-split.php)通过匹配`[a-zA-Z0-9][:blank]+{`和得到一些东西`}`。您将能够通过查看结果来构建您的数组。使用递归函数，当你匹配一个开始标签时，它会更深，而在结束标签上则更高。

否则，最干净的解决方案是实现[ANTLR](http://en.wikipedia.org/wiki/ANTLR)语法！

# .net - 使用 log4net 发送日志文件的最佳方法

> ID：11467706
> 
> 赞同：3
> 
> 时间：2012-07-13T09:26:48.957
> 
> 标签：.net, file, logging, log4net, send

在日志机制中发送整个文件（日志文件等）的最佳方法是什么？

**理想情况下，我们希望有一种机制，不仅可以发送一些日志信息（异常消息、类和方法等），还可以向我们的电子支持系统传输一些有用的日志文件（或任何一般文件）。我们希望这种机制尽可能多地为每个应用程序参数化（指定要发送的文件或文件夹，指定如何发送或何时发送，发生哪个错误等）。我们还需要找到一种方法来“附加”这些文件到我们在电子支持平台的数据库系统中的日志信息中，而不仅仅是发送它们然后尝试手动归档它们。**

*   我最初的想法是使用 SMTP 附加程序的修改版本并找到一种发送文件的方法（可能先压缩它们）

*   我还想过制作一个 FTP（或 SFTP）附加程序来将文件传输到我们 esupport 系统中的 sftp 文件夹。

*   另一个想法是在生产机器上有一个 Windows 服务，并有一个附加程序，该附加程序会向该服务发出信号以收集和发送某些文件（这样收集文件、压缩文件和发送文件的所有麻烦都驻留在应用程序本身之外）万一应用程序崩溃或其他情况。我们谈论胜利和网络应用程序）

*   我还考虑修改现有的 Web 服务附加程序，向 Web 服务本身添加一些逻辑，因此，当附加程序发送日志信息时，响应会指示附加程序也以任何可以发送的方式发送一些文件。

那么，满足此要求的最佳方法是什么？有任何想法吗？有什么需要我注意的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T07:50:29.350

一些问题：您希望何时发送日志信息？总是或在异常发生后？在应用程序关闭？

根据您的回答，拥有一个处理您的要求并仅发送由当前配置的日志附加程序创建的文件的类可能会更容易。在这种情况下，我建议不要创建自己的附加程序，而是创建一个单独的类，而是[按照这些思路构建一些东西](http://www.gibraltarsoftware.com/Support/Documentation.aspx?Page=Gibraltar.Agent~Gibraltar.Agent.Packager.html)。

# iphone - GADInterstitial 自定义广告不起作用

> ID：11467708
> 
> 赞同：0
> 
> 时间：2012-07-13T09:27:00.127
> 
> 标签：iphone, xcode4.3

我在获取 GADInterstitial 自定义广告时遇到问题我尝试过此代码

```
if(nil != m_pBannerView)
{
    m_pBannerView.delegate = nil;
    [m_pBannerView release];
    m_pBannerView = nil;
}
m_pBannerView = [[GADBannerView alloc] initWithAdSize:kGADAdSizeBanner];
m_pBannerView.delegate = self;
m_pBannerView.rootViewController = self;
m_pBannerView.adUnitID = @"AdMob Publisher ID";
m_pBannerView.rootViewController = self;
[self.view addSubview:m_pBannerView];

GADRequest *request = [GADRequest request];
request.testing = YES;
[m_pBannerView loadRequest:request];

if(nil != m_pInterstitial)
{
    [m_pInterstitial release];
    m_pInterstitial = nil;
}

m_pInterstitial = [[GADInterstitial alloc] init];
m_pInterstitial.delegate = self;
m_pInterstitial.adUnitID = @"INTERSTITIAL_AD_UNIT_ID";

GADRequest *interstialRequest = [GADRequest request];
interstialRequest.testing = YES;
[m_pInterstitial loadRequest: interstialRequest]; 
```

在 GADInterstitial Delegates 中，我正在调用 [ad presentFromRootViewController:self];

但我仍然无法获得自定义广告，请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T09:54:33.630

您必须使用自己独特`id`的`adUnitID`财产

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-06T23:52:12.563

**GADInterstitial**是一种在您的应用程序中展示广告的有趣方式，也是一种棘手的方式。按照这个[例子](https://github.com/googleads/googleads-mobile-ios-examples/tree/master/admob/InterstitialExample)，让我们进行以下步骤：

*   **首先，我们需要为它们设置显示环境。下载[GoogleAdMobAdsSdkiOS](https://developers.google.com/mobile-ads-sdk/download#downloadios)，最好是最新的。将 SDK 添加到您的项目中，但请记住删除 SDK 中 AddOns 文件夹中的示例项目。**

*   **接下来，在您的项目>>构建阶段>>链接二进制与库中添加以下框架：**

    *   AdSupport.framework（如果适合< iOS7，请选择可选）
    *   StoreKit.framework
    *   CoreData.framework
    *   CoreAudio.framework
    *   AVFoundation.framework
    *   MessageUI.framework
    *   AudioTool.framework
    *   libGoogleAdMobAds.a（位于 SDK 文件夹中）
*   **基础已经完成。现在我们需要选择我们希望在其中看到广告的 ViewController。所以这里有一些代码，这里我们导入 GADInterstitialDelegate 的标头并使用 MainViewController.h 扩展它：**

 *> *```
>  #import "GADInterstitialDelegate.h"
>    #define kSampleAdUnitID @"/6253334/dfp_example_ad/interstitial"
> 
>    @class GADInterstitial;
>    @class GADRequest;
> 
>    @interface MainViewController : UIViewController<GADInterstitialDelegate>
>    {   
>          BOOL isLoaded_;   
>          NSTimer *quickie_;
>    }
> 
>    @property(nonatomic, strong) GADInterstitial *interstitial; 
> ```*  *```
>  //Make sure the delegate is handled properly. 
> ```*

 **   **现在我们需要转到 MainViewController.m 中的实现：**

 *> *```
>  - (void)viewDidLoad
>    {
>        [super viewDidLoad];
>        // Do any additional setup after loading the view.
> 
>        // FOLLOW THE CODE BELOW FOR ADMOD INTERESTIAL IMPLEMENTATION
>        [self initializeAds];
>        quickie_ = [[NSTimer alloc] init];
>        quickie_ = [NSTimer scheduledTimerWithTimeInterval:1.0 target:self selector:@selector(showAdd) userInfo:nil repeats:YES];
>    }
> 
>    -(void)showAdd
>    {   
>        if(isLoaded_ && [quickie_ isValid])
>        {
>            [quickie_ invalidate];
>            quickie_ = nil;
>            [self.interstitial presentFromRootViewController:self];
>        }
>    }
> 
>    - (GADRequest *)request
>    {
>        GADRequest *request = [GADRequest request];
>        return request;
>    }
> 
>    -(void)initializeAds
>    {
>        // Create a new GADInterstitial each time.  A GADInterstitial will only show one request in its
>        // lifetime. The property will release the old one and set the new one.
>        self.interstitial = [[GADInterstitial alloc] init];
>        self.interstitial.delegate = self;
> 
>        // Note: kSampleAdUnitId is a staticApId for example purposes. For personal Ads update kSampleAdUnitId with your interstitial ad unit id.
>        self.interstitial.adUnitID = kSampleAdUnitID;
>        [self.interstitial loadRequest:[self request]];
>    }
> 
>    - (void)viewWillLayoutSubviews
>    {
>        [super viewWillLayoutSubviews];
>        self.loadingSpinner.center = CGPointMake(CGRectGetWidth(self.view.bounds) / 2, self.loadingSpinner.center.y);
>    }
> 
>    - (void)interstitialDidReceiveAd:(GADInterstitial *)interstitial
>    {
>        isLoaded_ = YES;
>    }
> 
>    - (void)interstitial:(GADInterstitial *)interstitial didFailToReceiveAdWithError:(GADRequestError *)error
>    {
>        isLoaded_ = NO;
>    }
> 
>    //----ADS IMPLEMENTATION TILL HERE--->// 
> ```*

 *此处的计时器“quickie_”不断检查广告是否已成功加载，当成功加载时，如果用户仍在其上，它会在 ViewController 上拍摄广告。静态 kSampleAdUnitID 是一个始终有效的 sampleId。而已。运行您的代码并在您选择的 ViewController 上找到您的插页式广告。希望我有所帮助。干杯! :)****

# javascript - getJSON 的 Jquery 问题

> ID：11467710
> 
> 赞同：1
> 
> 时间：2012-07-13T09:27:09.487
> 
> 标签：javascript, jquery, json

我的问题是 javascript 问题，我尝试使用 Jquery 的 $.getJson 函数解析 Json 文件，当我将它们分别放入一个变量中时，我注意到它需要更多我认为的对象，这里是代码 JS：

```
$.getJSON(
url,
function(data) {
   var content = '<h1>Applications</h1>';
   content += '<ul>';
       for (var pos in data){
           var app = data[pos];
           content += '<li>'+app.name+'</li>';
       }
   content += '</ul>';
   $('div.apps').html(content);
} 
```

这里是json文件：

```
[
 {
    "name": "apidocs",
    "staging": {
        "model": "rack",
        "stack": "ruby18"
 }
 ,
 {
    "name": "apidocs2",
    "staging": {
        "model": "rack",
        "stack": "php53"
 }
 ,
 {
    "name": "apidocs3",
    "staging": {
        "model": "rack",
        "stack": "java17"
 }
] 
```

那么，在我的 html 页面中，我在全局中有 6 个对象而不是 3 个。最后 3 个对象是“未定义的”，但我只想要那些在 json 文件中的对象，因为 firefox 不接受未定义的标签。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T09:30:23.597

```
 for ( var i = 0; i < data.length; i++ ) {
           var app = data[ i ];
           content += '<li>'+app.name+'</li>';
       } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T09:34:20.847

**避免** `for..in`循环。

```
for (var pos in data){ 
```

用通常的替换它：

```
for (var i=0; i<data.length; i++){ //use as data[i] 
```

如果您使用 for..in 循环，请务必在使用`data.hasOwnProperty(..)`之前使用它。否则，您一定会得到比预期更多的对象。它们实际上是`data`继承的其他属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T10:03:51.433

由于您使用的是 jQuery，请使用其完美的`$.each`功能。

```
$.each( data, function( d ) {
    content += '<li>' + d.name + '</li>';
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-13T09:40:31.270

更正 JSON，你有太多的开始标签。

**[更正 JSON>>](http://jsfiddle.net/apna3/)**

另外，更正for循环。利用`var count = 0; count < data.length; count++`

# c++ - 为什么内存地址以 0x 开头？

> ID：11467715
> 
> 赞同：17
> 
> 时间：2012-07-13T09:27:30.507
> 
> 标签：c++, c, linux, memory, operating-system

> **可能重复：**
> [为什么十六进制前缀为 0x？](https://stackoverflow.com/questions/2670639/why-are-hexadecimal-prefixed-as-0x)

内存地址通常表示为前缀为 的十六进制值`0x`。例如：

```
> new.env()
<environment: 0x21d36e0> 
```

这`0x`部分有什么意义吗？这个符号从何而来？是否有任何其他值可以代替`0x`？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-07-13T09:28:04.797

这`0x`只是一个符号，让您知道该数字是十六进制形式。

与您`042`为八进制数或`42`十进制数编写的相同。

所以 - `42 == 052 == 0x2A`。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-13T09:30:31.127

内存地址通常以十六进制形式表示，`0x`只是十六进制数的一种表示法。

# spring - 我们能否在 filterChainProxy 中为单个过滤器链提供多种模式

> ID：11467723
> 
> 赞同：2
> 
> 时间：2012-07-13T09:28:04.580
> 
> 标签：spring, spring-security

我有两个要应用相同过滤器的模式。

```
<security:filter-chain pattern="/home.do*" filters="a,b,c,d" />
<security:filter-chain pattern="/login.do*" filters="a,b,c,d" /> 
```

除了上述两个之外，还有许多其他独特的模式和通用模式`/**/*.do*/**`。

我可以在模式属性中指定逗号分隔的多个模式，如下所示：

`<security:filter-chain pattern="/home.do*, /login.do*" filters="a,b,c,d" />`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-13T14:43:20.583

是的，您可以，但实现取决于您使用的 Spring Security 版本。

*   在 3.0 中，您可以使用[`path-type`](http://static.springsource.org/spring-security/site/docs/3.0.x/reference/springsecurity-single.html#nsa-path-type)属性：

    ```
    <security:filter-chain-map path-type="regex">
      <security:filter-chain pattern="^/(test|home)\.do$" filters="a,b,c,d" />
      <!-- other patterns -->
    <security:filter-chain-map path-type="regex"> 
    ```

*   在 3.1 中，您可以使用[`request-matcher`](http://static.springsource.org/spring-security/site/docs/3.1.x/reference/springsecurity-single.html#nsa-filter-chain-map-request-matcher)属性（不赞成使用`path-type`，只需在前面的示例中将路径类型更改为请求匹配器），或者您可以将多个`http`元素与[`request-matcher-ref`](http://static.springsource.org/spring-security/site/docs/3.1.x/reference/springsecurity-single.html#nsa-http-request-matcher-ref)bean 一起使用并执行以下操作：

    ```
    <http pattern="test.do,home.do" security="none" <!-- 'none' as example -->
        request-matcher-ref="requestMatcher" />

    <bean id="requestMatcher" class="com.example.CommaSeparatedRequestMatcher" /> 
    ```

    使用您的自定义实现`CommaSeparatedRequestMatcher`（拆分从请求创建的 URL 并尝试匹配任何字符串），例如，基于[`RegexRequestMatcher`](http://static.springsource.org/spring-security/site/docs/3.1.x/apidocs/org/springframework/security/web/util/RegexRequestMatcher.html).

# google-app-engine - 是否可以使用标准库在 Go 中嵌套模板？

> ID：11467731
> 
> 赞同：94
> 
> 时间：2012-07-13T09:28:28.167
> 
> 标签：google-app-engine, go, template-engine, mustache

如何在 python 运行时获得像 Jinja 这样的嵌套模板。TBC 我的意思是我如何让一堆模板继承自基本模板，只需归档基本模板的块，就像 Jinja/django-templates 一样。是否可以仅`html/template`在标准库中使用。

如果这不可能，我的选择是什么。胡子似乎是一种选择，但我会错过那些微妙的功能，`html/template`比如上下文敏感的转义等吗？还有哪些其他选择？

（环境：Google App Engin、Go runtime v1、Dev - Mac OSx lion）

谢谢阅读。

* * *

## 回答 #1

> 赞同：142
> 
> 时间：2012-07-13T09:53:00.510

是的，有可能。A`html.Template`实际上是一组模板文件。如果您执行此集中定义的块，则它可以访问此集中定义的所有其他块。

如果您自己创建此类模板集的地图，您将拥有与 Jinja / Django 提供的基本相同的灵活性。唯一的区别是[html/template](http://golang.org/pkg/html/template/)包不能直接访问文件系统，所以你必须自己解析和组合模板。

考虑以下示例，其中两个不同的页面（“index.html”和“other.html”）都继承自“base.html”：

```
// Content of base.html:
{{define "base"}}<html>
  <head>{{template "head" .}}</head>
  <body>{{template "body" .}}</body>
</html>{{end}}

// Content of index.html:
{{define "head"}}<title>index</title>{{end}}
{{define "body"}}index{{end}}

// Content of other.html:
{{define "head"}}<title>other</title>{{end}}
{{define "body"}}other{{end}} 
```

以及以下模板集地图：

```
tmpl := make(map[string]*template.Template)
tmpl["index.html"] = template.Must(template.ParseFiles("index.html", "base.html"))
tmpl["other.html"] = template.Must(template.ParseFiles("other.html", "base.html")) 
```

您现在可以通过调用呈现您的“index.html”页面

```
tmpl["index.html"].Execute("base", data) 
```

你可以通过调用呈现你的“other.html”页面

```
tmpl["other.html"].Execute("base", data) 
```

通过一些技巧（例如，模板文件的一致命名约定），甚至可以`tmpl`自动生成地图。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2016-06-30T01:57:11.970

请注意，当您执行基本模板时，您必须将值传递给子模板，这里我只是传递“.”，以便将所有内容传递下去。

模板一显示 {{.}}

```
{{define "base"}}
<html>
        <div class="container">
            {{.}}
            {{template "content" .}}
        </div>
    </body>
</html>
{{end}} 
```

模板二显示传递给父级的 {{.domains}}。

```
{{define "content"}}
{{.domains}}
{{end}} 
```

请注意，如果我们使用 {{template "content" .}} 而不是 {{template "content" .}}，则无法从内容模板访问 .domains。

```
DomainsData := make(map[string]interface{})
    DomainsData["domains"] = domains.Domains
    if err := groupsTemplate.ExecuteTemplate(w, "base", DomainsData); err != nil {
        http.Error(w, err.Error(), http.StatusInternalServerError)
    } 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2018-10-25T19:38:43.243

使用过其他模板包，现在我主要使用标准 html/模板包，我想我很天真，没有欣赏它提供的简单性和其他好东西。我使用非常相似的方法来接受以下更改

你不需要用额外`base`的模板包装你的布局，为每个解析的文件创建一个模板块，所以在这种情况下它是多余的，我也喜欢使用新版本的 go 中提供的块操作，它允许你有默认阻止内容，以防您未在子模板中提供

```
// base.html
<head>{{block "head" .}} Default Title {{end}}</head>
<body>{{block "body" .}} default body {{end}}</body> 
```

您的页面模板可以与

```
// Content of index.html:
{{define "head"}}<title>index</title>{{end}}
{{define "body"}}index{{end}}

// Content of other.html:
{{define "head"}}<title>other</title>{{end}}
{{define "body"}}other{{end}} 
```

现在执行你需要这样调用它的模板

```
tmpl["index.html"].ExecuteTemplate(os.Stdout, "base.html", data) 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-04-02T13:28:38.020

使用[Pongo](https://github.com/flosch/pongo)，它是 Go 模板的超集，支持 {{extends}} 和 {{block}} 标签进行模板继承，就像 Django 一样。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2014-02-03T07:13:58.003

几天来我一直在回到这个答案，终于硬着头皮为此写了一个小的抽象层/预处理器。它基本上：

*   将“扩展”关键字添加到模板。
*   允许覆盖“定义”调用（因此可以使用 greggory 的默认值）
*   允许未定义的“模板”调用，它们只给出一个空字符串
*   设置的默认值。在“模板”中调用 . 父母的

[https://github.com/daemonl/go_sweetpl](https://github.com/daemonl/go_sweetpl)

# c++ - 为什么标准库容器没有共同的基础？

> ID：11467733
> 
> 赞同：8
> 
> 时间：2012-07-13T09:28:40.347
> 
> 标签：c++, stl, c++-standard-library

只是出于兴趣...

如果我要设计一个容器库，我肯定会从一个公共基类派生它们，该基类将具有（可能是抽象的）方法声明，如`size()`和`insert()`。

标准库容器是否有充分的理由不这样实现？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-13T09:39:40.260

在 C++ 中，继承用于运行时多态（阅读：运行时接口重用）。它带有在运行时通过 vtable 进行重定向的开销。

为了使多个容器类具有相同的接口（以便 API 是可预测的并且算法可以做出假设），不需要继承。只要给他们相同的方法，你就完成了。C++ 中的容器（和算法）是作为模板实现的，这意味着您可以获得编译时多态性。

这避免了任何运行时开销，并且符合 C++ 口号“只为您需要的东西付费”。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-13T11:16:24.803

Java 集合（您可能已经想到）在 中实现了一堆常用方法，它们位于具体类中实现的和方法`AbstractCollection`之上。然后IIRC还有更多这样的方法等等。一些子类覆盖了大多数这些方法，一些子类可以只实现所需的抽象方法。某些方法真正在共享接口的大多数或所有集合中共同实现。例如，在我的痛苦经历中，给你一个不可修改的视图的是一个完整的 PITA。`size()``iterator()``AbstractList`

C++ 容器有一些所有容器共有的成员函数，几乎没有一个可以以相同的方式为所有容器实现[*]。在有可以使用迭代器（如`find`）执行的通用算法的情况下，它们是 中的自由函数`<algorithm>`，与继承可以查看的任何地方相去甚远。

还有所有序列、所有关联数组等共有的成员函数。但是对于每个这些概念，不同具体数据结构的实现之间并没有太多共同点。

所以最终归结为设计哲学的问题。Java 和 C++ 在容器方面都有一些代码重用。在 C++ 中，此代码重用来自`<algorithm>`. 在 Java 中，其中一些是通过继承来实现的。

主要的实际区别可能是，在 Java 中，您的函数可以在`java.util.Collection`不知道它是什么类型的集合的情况下接受 a。在 C++ 中，函数模板可以接受任何容器，但非模板函数不能。这影响了用户的编码风格，并且也受到了影响——Java 程序员比 C++ 程序员更有可能达到运行时多态性。

从实现者的角度来看，如果您正在编写 C++ 容器库，那么没有什么可以阻止您在 中的不同容器之间共享私有基类`std`，如果您认为这将有助于重用代码。

[*] 现在这在 C++11中`size()`得到保证，可能可以共同实现。在 C++03中只是“应该”是，并且有一些实现利用这一点来实现 in 的版本之一，而不是更新大小所需的版本。`O(1)``empty()``size()``O(1)``std::list``splice``O(1)``O(n)`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-13T09:35:13.547

没有充分的理由引入这样的基类。谁会从中受益？它在哪里有用？

需要“通用”接口的算法使用迭代器。没有将元素插入不同容器的通用方法。事实上，你甚至不能在某些容器中插入元素。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-13T09:40:28.357

如果您可以编写独立于您正在使用的容器的代码，那将是有意义的。但事实并非如此。推荐阅读*Effective STL*一书的*“第 2 项：谨防容器无关代码的错觉”*这一章。

 ** * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-13T09:44:20.410

从另一个角度来看：现在，如果您以通用方式使用它们，编译器就会拥有它可以拥有的所有信息，从而实现彻底的优化。感谢模板实现。

现在，例如，如果 list 和 vector 都实现了类似 push_backable 的抽象 OO 接口，并且您将在代码中使用抽象指针 (push_backable*)->push_back(...)，编译器将丢失大量信息并且因此有优化的机会。

这些是可能出现在内部循环中的典型操作，您确实希望对它们进行最大可能的优化。另请参阅 Frerich Raabe 的回答。*

# android - UI 测试工具，例如 Android 的 Snoop/Silverlight Spy

> ID：11467735
> 
> 赞同：2
> 
> 时间：2012-07-13T09:28:44.290
> 
> 标签：android

我想看到像 Snoop(WPF)、Silverlight Spy(WindowsPhone、Silverlight 应用程序)这样的可视化树？有没有可用于 Android 应用程序的工具？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T09:39:58.900

我不确定他们与 Snoop 和 SIlverlight 间谍所做的事情有多接近，因为我没有与他们合作过，但这里有。

[UI/应用程序练习器猴子](http://developer.android.com/tools/help/monkey.html)

> Monkey 是一个在您的模拟器或设备上运行的程序，它会生成伪随机的用户事件流，例如点击、触摸或手势，以及一些系统级事件。您可以使用 Monkey 以随机但可重复的方式对您正在开发的应用程序进行压力测试（来自 Android 开发人员文档）。

[尚酷](http://code.google.com/p/scirocco/)

> Scirocco 是一款适用于 Android 的 UI 测试自动化工具。它能够在多台设备上进行测试，并连续生成带有屏幕截图的测试报告。（来自 scirocco 文档）。

[机器人馆](http://code.google.com/p/robotium/)

> Robotium 是一个测试框架，旨在轻松为 Android 应用程序编写功能强大且健壮的自动黑盒测试用例。在 Robotium 的支持下，测试用例开发人员可以编写跨越多个 Android 活动的功能、系统和验收测试场景。Robotium 完全支持活动、对话框、Toast、菜单和上下文菜单（来自 robotium 文档）。

# c# - 在 Visual Studio 中捕获整数溢出异常

> ID：11467736
> 
> 赞同：2
> 
> 时间：2012-07-13T09:28:45.250
> 
> 标签：c#, .net, visual-studio, exception, integer

如何让 Visual Studio 引发整数溢出异常？我知道我可以`checked`明确地使用一个语句。但我想在我的解决方案中将此行为设为默认（至少在调试期间）。

```
int bigNumber= 12345;
byte overflowException = (byte)(bigNumber); //want to see an exception here 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-13T09:35:26.613

根据[文档](http://msdn.microsoft.com/en-us/library/khy08726.aspx)，有一个`/checked`编译器选项可以默认打开它。

> /checked 编译器选项允许您为所有未明确在已检查或未检查关键字范围内的整数算术语句指定检查或未检查上下文。

在项目的项目属性中，转到“构建”选项卡并单击“高级...”按钮。在这个窗口上是一个“检查算术上溢/下溢”复选框：

![在此处输入图像描述](../Images/cc948aba180fd31974efd84cc1975053.png)

顺便说一句，`(byte)(bigNumber)`不需要第二组括号：`(byte)bigNumber`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-13T09:35:02.487

您可以使用编译器“检查”选项， http: [//msdn.microsoft.com/en-us/library/h25wtyxf.aspx](http://msdn.microsoft.com/en-us/library/h25wtyxf.aspx)

# html - iphone中的固定位置

> ID：11467738
> 
> 赞同：0
> 
> 时间：2012-07-13T09:28:55.913
> 
> 标签：html, css, position, sticky-footer

页脚的固定位置在浏览器中有效，但在 iphone 中无效。

```
 <div class="footer">
        <input name="" type="submit" id="submit" value="send" />
   </div> 
```

CSS是，

```
.footer{
position:fixed; 
bottom:0; 
left:0; 
width:100%; 
margin:0 auto; 
padding:6px 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T12:51:28.360

position:fixed 仅适用于 IOS5+

# algorithm - 从大量条目中随机详尽（非重复）选择

> ID：11467740
> 
> 赞同：2
> 
> 时间：2012-07-13T09:29:05.390
> 
> 标签：algorithm, data-structures, random, indexing

假设我有一个存储在关系数据库中的大量（300-500k）文本文档集合。每个文档可以属于一个或多个（最多六个）类别。我需要用户能够随机选择特定类别中的文档，这样单个实体就不会重复，就像 StumbleUpon 的工作方式一样。

我真的没有看到一种方法可以使用带有大量用户和文档的慢速 NOT IN 查询来实现这一点，所以我想我可能需要为此目的实现一些自定义数据结构。也许已经有一篇论文描述了一些可能适合我需要的算法？

目前我正在考虑以下方法：

*   从数据库中读取所有条目
*   根据属于该类别的文档的 ID，为每个类别创建一个基于链表的索引。随机播放
*   创建一个包含特定用户查看的所有条目的布隆过滤器
*   使用迭代器遍历索引，使用布隆过滤器随机选择项目以挑选未查看的项目。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T08:29:10.730

这取决于用户如何获得它的随机条目。

**选项1：**

用户正在分页一些实体并在其中几个之后停止。例如，用户看到当前的随机实体，然后移动到下一个，阅读它并继续它几次，就是这样。下次此用户（或其他用户）从该类别中获取实体时，已查看的实体已清楚，您可以返回已查看的实体。

在该选项中，我建议保存一组（散列）已查看的实体 ID，并且每次用户要求随机实体时 - 从数据库中随机选择它并检查是否尚未在集合中。

因为集合太小而且你的数据太大，你得到一个已经查看过的 id 的机会太小了，大部分时间都需要 O(1)。

**选项 2：**

用户正在实体中分页，并且查看的实体正在所有用户之间以及每次用户访问您的页面时保存。在这种情况下，您可能会使用每个类别中的所有实体并保存所有查看的实体 + 检查是否查看了实体将需要一些时间。

在该选项中，我将获取该主题的所有 id - 将它们打乱并将其存储在链接列表中。当您想获得一个随机未查看的实体时 - 只需获取列表的头部并将其删除（O（1））。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-21T00:48:59.637

如果您通过表格跟踪用户看到的条目......试试这个。我将使用mysql，因为这是我能想到的最快的例子，但要点应该很清楚。

在“使用”的链接上...

```
insert into viewed (userid, url_id) values ("jj", 123) 
```

在寻找链接...

```
select p.url_id
from pages p left join viewed v on v.url_id = p.url_id
where v.url_id is null
order by rand()
limit 1 
```

这会导致数据库继续执行 1 对 1 连接，并且您将查询限制为仅返回用户尚未看到的一个条目。

只是一个建议。

编辑：可以进行这一操作，但不能保证 url 将成功传递给用户。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-16T08:30:04.893

我假设对于任何给定的 <user, category> 对，查看的文档数量相对于该类别中可用的文档总数来说非常小。

那么你可以只存储索引三元组 <user, category, document> 指示哪些文档已被查看，然后对随机选择的文档采取乐观的方法吗？在绝大多数情况下，用户不会阅读随机选择的文档。而且您可以快速检查，因为三元组已编入索引。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-16T14:44:13.680

我会选择伪随机方法：

1.) 确定要查看的类别中的元素数 (SELECT COUNT(*) WHERE ...)
2.) 在 1 ... count 范围内选择一个随机数。
3.）选择单个文档（SELECT * FROM ... WHERE [与计数时相同] ORDER BY [生成稳定顺序]。根据使用的SQL方言，有不同的子句可用于仅检索部分您想要的结果集（MySQL LIMIT 子句、SQLServer TOP 子句等）

如果文档的数量很大，那么两次为同一用户提供同一文档的机会很小，可以忽略不计。使用上述方案，您根本不必存储*任何*状态信息。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-17T15:21:43.027

您可能需要考虑像 Apache Cassandra 这样的 nosql 解决方案。这些似乎非常适合您的需求。有很多方法可以在一个环境中设计您需要的算法，您可以轻松地在运行中轻松地将新列添加到表（列族）中，并为非常稀疏的表提供出色的支持。

编辑：**以下许多可能的解决方案之一：**

1.  为每个类别创建一个 CF（列族，即表）（即时创建这些非常容易）。
2.  为属于该类别的每个文档在每个类别 CF 中添加一行。
3.  每当用户点击文档时，您都会添加一个名为的列并将其设置为 true 到该行。显然，这张表会很大，有数百万列，而且可能非常稀疏，但没问题，读取这仍然是恒定的时间。
4.  现在为某个类别中的用户查找新文档只需从 select * where == null 中选择任何结果即可。

如果您可以接受 Cassandra 的“最终一致”模型，您应该获得恒定的写入和读取时间、惊人的可扩展性等（即，用户永远不会获得重复文档并不是关键任务）

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-19T11:20:05.800

我过去通过使用[Apache Lucene](http://lucene.apache.org/core/)将关系数据库索引到面向文档的形式中解决了类似问题。这是在 NoSQL 服务器最近兴起之前，基本上是一样的，但它仍然是一种有效的替代方法。

您将为每个文本创建一个 Lucene[文档](http://lucene.apache.org/core/3_6_0/api/core/index.html)，其中包含一个 textId（关系数据库 id）字段和多值 categoryId 和 userId 字段。适当地填充 categoryId 字段。当用户阅读文本时，将其 id 添加到 userId 字段。一个简单的查询将返回具有给定 categoryId 而没有给定 userId 的文档集 - 随机选择一个并显示它。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-20T21:52:33.233

1.  将用户过去的 X 个选择存储在 cookie 或其他东西中。
2.  使用用户的新条件将最后的选择返回到服务器
3.  随机选择满足条件的文本之一，直到它不是用户最后 X 个选择的成员。
4.  返回此文本选择并更新最后 X 选择的列表。

我会尝试找到 X 的最佳值，但我想到的是像 16 的 X？

# jquery - Sending a recognizable error to JQuery from CakePHP

> ID：11467743
> 
> 赞同：1
> 
> 时间：2012-07-13T09:29:14.323
> 
> 标签：jquery, cakephp

I have the following JQuery code:

```
 $('#dropdown').bind('change', function() {       
    var formData = $('#newform').serialize()
    $.ajax({
        type: 'POST',
        url: baseUrl+"crm/orders/ajaxEdit",
        data: formData,
        success: function(){ 
            console.log("ok");
        },
        error: function() {
            console.log("not ok");
        }
    });
 }); 
```

The `ajaxEdit` action is very simple:

```
 function ajaxEdit() {
        $this->layout = 'ajax';
        $this->autoRender = false;
        $this->Order->save($this->data['Order']);
    } 
```

It works fine in that the data from the form is posted to the correct action in my CakePHP controller.

However, regardless of whether the insert query in CakePHP is successful or not, the "ok" message gets echoed to the console unless the HTTP request fails or something.

How can I get cake to send an error back to JQuery that JQuery will recognize as an error and echo "not ok" to the console in the event that there's a validation error or some other insert error in the Cake action?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T07:15:26.267

try this: jquery code

```
$('#dropdown').bind('change', function() {       
    var formData = $('#newform').serialize()
    $.ajax({
        type: 'POST',
        url: baseUrl+"crm/orders/ajaxEdit",
        data: formData,
        success: function(output){ 
            var x =  jQuery.parseJSON( output );
            if(x.success == 1){
                console.log("ok");
            }else{
                console.log("not ok");
            }
        },

    });
}); 
```

ajax edit action

```
function ajaxEdit() {
    $this->layout = 'ajax';
    $this->autoRender = false;
    if($this->Order->save($this->data['Order'])){
        $res = array('success'=>1);
        $str=json_encode($res);
        echo $str; 
    } 
    else{
        $res = array('success'=>0);
        $str=json_encode($res);
        echo $str; 
    }
} 
```

# ms-access - 在 Access 中使用子表单时“不使用 GoSub 就返回”

> ID：11467746
> 
> 赞同：16
> 
> 时间：2012-07-13T09:29:18.690
> 
> 标签：ms-access, ms-access-2007, vba

为什么我得到一个

> “不使用 GoSub 就返回”

在 Access 2007 中使用子窗体时出错？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-07-13T09:29:19.470

当子窗体中存在`Form_Load()`事件但主窗体中没有事件时，可能会发生这种情况。尝试将`empty Form_Load()`事件添加到主窗体。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-13T10:04:03.273

此错误最可能的原因是项目已损坏。你应该反编译，说明在这里：[Debug a bad DLL calling convention error](https://stackoverflow.com/questions/574587/debug-a-bad-dll-calling-convention-error-in-msaccess-vba-code/683399#683399)

首先，确保您已关闭名称自动更正：[http](http://allenbrowne.com/bug-03.html) ://allenbrowne.com/bug-03.html并确保您没有遗漏任何参考。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-20T19:04:48.310

[我在http://www.fmsinc.com/microsoftaccess/performance/decompile.asp](http://www.fmsinc.com/microsoftaccess/performance/decompile.asp)找到了一个有用的解决方案（就我而言）。它对我来说是一种魅力。HTH菲尔

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-04-10T14:55:28.763

执行 VBA 代码的反编译并重新编译然后压缩我的数据库为我解决了这个问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-05-31T15:12:43.317

我有类似的东西（不是专门在 VBA 中，而是使用表单来更新子表单）。我刚刚在屏幕更新对象的末尾添加了一个“StopAllMacros”步骤，它似乎有效。

[![在此处输入图像描述](../Images/e2b777921a24000e208eea1d40c7d28f.png)](https://i.stack.imgur.com/Idtux.png)

# qt - 重复按钮

> ID：11467750
> 
> 赞同：2
> 
> 时间：2012-07-13T09:29:24.033
> 
> 标签：qt, layout, copy

我一直在努力解决以下问题。我有一个放置在滚动区域中的工具按钮列表。我想使用复制工具按钮文本的按钮创建第二个滚动区域，但仅适用于选定的工具按钮。例如，让我们选择工具按钮 1,2 和 3。然后当我按下“更新”按钮时，应该会出现一个带有按钮 1,2 和 3 的滚动区域。这是我的代码：

CPP 文件：

```
#include "mainwindow.h"
#include "ui_mainwindow.h"
#include <QtGui>

MainWindow::MainWindow(QWidget *parent) :
QMainWindow(parent),
ui(new Ui::MainWindow)
{
ui->setupUi(this);

scrollArea.setParent(ui->centralWidget);
scrollArea.setGeometry(50,50,200,300);
scrollArea.setWidget(&viewport);
viewport.setLayout(&layout);

scrollArea2.setParent(ui->centralWidget);
scrollArea2.setGeometry(350,50,200,300);
scrollArea2.setWidget(&viewport2);
viewport2.setLayout(&layout2);

update.setParent(ui->centralWidget);
update.setGeometry(50,400,100,50);
update.setText("update");

addButtons();

connect(&update,SIGNAL(clicked()),this,SLOT(refreshScrollArea()));
}

MainWindow::~MainWindow()
{
delete ui;
}

void MainWindow::addButtons()
{
for(int i=0; i<5;i++)
{
    QToolButton *button = new QToolButton;
    button->setCheckable(true);
    buttons<<button;
    buttons[i]->setText(QString::number(i+1));
    buttons[i]->setMinimumSize(200,50);
    layout.addWidget(buttons[i]);
}

viewport.resize(200,5*50);
}

void MainWindow::refreshScrollArea()
{
while (!layout2.isEmpty())
{
    delete layout2.takeAt(0);
}

int selected_index=0;

for(int i=0; i<5;i++)
{
    if (buttons[i]->isChecked())
    {
        QPushButton * button = new QPushButton;
        button->setText(buttons[i]->text());
        layout2.addWidget(button);
        selected_index++;
    }
}

viewport2.resize(150,50*selected_index);
} 
```

头文件：

```
#ifndef MAINWINDOW_H
#define MAINWINDOW_H

#include <QMainWindow>
#include <QtGui>

namespace Ui {
class MainWindow;
}

class MainWindow : public QMainWindow
{
Q_OBJECT

public:
explicit MainWindow(QWidget *parent = 0);
~MainWindow();

private slots:

void addButtons();
void refreshScrollArea();

private:
Ui::MainWindow *ui;

QVector<QToolButton*> buttons;

QScrollArea scrollArea;
QScrollArea scrollArea2;

QVBoxLayout layout;
QVBoxLayout layout2;

QWidget viewport;
QWidget viewport2;

QPushButton update;
};

#endif // MAINWINDOW_H 
```

主要的：

```
#include <QtGui/QApplication>
#include "mainwindow.h"

int main(int argc, char *argv[])
{
QApplication a(argc, argv);
MainWindow w;
w.show();

return a.exec();
} 
```

当我按下更新按钮一次时，它工作得很好，但是当我选择不同的工具按钮并再次按下更新时，按钮似乎被堆叠起来，好像布局不是空的。但是，当我选择 no toolbutton 并推送更新时，没有按钮，因此布局被清空。谁能看到我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T13:12:47.873

“更新”代码的示例：

```
// you clear your duplicate layout
int num = layout2->count();
for (int i = 0; i < num; ++i
{
    delete layout2->itemAt(0);
}

// you create duplicate buttons for checked initial buttons
for (int i = 0; layout1->count(); ++i)
{
   QPushButton* btn = (QPushButton*)layout1->itemAt(i);
   if (btn->isChecked())
   {
        QPushButton* newBtn = new QPushButton;
        newBtn->setText(btn->text());
        layout2->addWidget(newBtn);
    }
} 
```

如果您不需要一次又一次地创建和删除新按钮，您可以拥有一组不变的按钮，只显示和隐藏它们。

# mysql - mysql如何格式化子时间

> ID：11467754
> 
> 赞同：0
> 
> 时间：2012-07-13T09:29:36.117
> 
> 标签：mysql

我想将 subtime 的返回值格式化为以下格式：HH:MM

```
SUBTIME('09:00:00', SEC_TO_TIME(30*60)), 
DATE_FORMAT(SUBTIME('09:00:00', SEC_TO_TIME(30*60)), '%H:%i') 
```

第一个子时间返回正确的 08:30:00，但带有 date_format 的子时间返回我只是 NULL

你能帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T09:40:05.123

您应该使用 TIME_FORMAT 而不是 DATE_FORMAT：

```
TIME_FORMAT(SUBTIME('09:00:00', SEC_TO_TIME(30*60)), '%H:%i') 
```

# sql - SQL 从表中减去时间（针对第二个表中的特定时间状态另外减少）

> ID：11467755
> 
> 赞同：1
> 
> 时间：2012-07-13T09:29:38.230
> 
> 标签：sql, subtraction

我有表 T1 和 T2。

T1

```
ID    TIME1    TIME2  
1001    1        10
1002    1        20 
```

T2

```
ID        STATUS    TIME
1001      NEW         1
1001      CLOSED      10
1002      NEW         1
1002      HOLD        5
1002      CLOSED      13 
```

如果表 T2 中不存在状态 HOLD，我想要结果 TIME2-TIME1；或 TIME2-TIME1-TIME 如果状态 HOLD 存在于该记录的表中

```
1001   9 (10-1)
1002   14(20-1-5) 
```

我最初编写了 SQL 查询，但这不起作用，因为它为第一条记录返回 NULL 而第二条记录的结果是 OK

```
SELECT T1.ID,T1.TIME2-T1.TIME1-T2.TIME
FROM T1
LEFT OUTER JOIN T2 ON T1.ID=T2.ID AND T2.STATUS='HOLD' 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T09:51:28.510

```
SELECT T1.ID
    , Case 
            When T2.STATUS = 'HOLD' THEN T1.Time2 - T1.Time1 - T2.Time 
            Else T1.Time2 -T1.Time1 
      END
FROM T1
LEFT OUTER JOIN T2 ON T1.ID=T2.ID AND T2.STATUS='HOLD' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T10:13:08.907

显然，表 T2 可能包含*多个*匹配 T1.ID的行。假设 T2 总是包含*至少*一个这样的行，那么我们可以这样做：

```
select T1.ID, min(case when T2.STATUS<>'HOLD' then T1.TIME2-T1.TIME1 
when T2.STATUS='HOLD' then  T1.TIME2-T1.TIME1-T2.[TIME] end)
from T1   join  T2 
on T1.ID=T2.ID
group by T1.ID 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-13T10:18:08.503

或简而言之

```
select 
    t1.id,
    t1.time2-case when status='HOLD' then t2.time else 0 end-t1.time1
from
    t1 left join t2 on t1.id=t2.id and t2.status='HOLD' 
```

# javascript - JavaScript 是否有相当于 VBScript 的 ExecuteGlobal 的功能？

> ID：11467759
> 
> 赞同：3
> 
> 时间：2012-07-13T09:29:51.547
> 
> 标签：javascript, vbscript

javascript中是否有任何替代ExecuteGlobal的方法？

```
Function vbExecuteGlobal(parmSCRIPT)
    ExecuteGlobal(parmSCRIPT)
End Function 
```

DevGuru [描述声明] 这样的：

> ExecuteGlobal 语句采用单个字符串参数，将其解释为 VBScript 语句或语句序列，并在全局命名空间中执行这些语句。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T09:43:49.377

与 VBScript 的 Execute[Global] 等效的 Javascript 是 eval()。传递的代码在调用的上下文中进行评估。

[有关详细信息，优点和缺点，](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/eval)请参见此处

**更新**

不推荐这种做法，而是澄清我对等价的理解：

```
// calling eval in global context is the exact equivalent of ExecuteGlobal
eval("function f0() {print('f0(): yes, we can!');}");
f0();

// calling eval in locally is the exact equivalent of Execute
function eval00() {
  eval("function f1() {print('f1(): no, we can not!');}");
  f1();
}
eval00();
try {
  f1();
}
catch(e) {
  print("** error:", e.message);
}

// dirty trick to affect global from local context
function eval01() {
  eval("f2 = function () {print('f2(): yes, we can use dirty tricks!');}");
  f2();
}
eval01();
f2(); 
```

输出：

```
js> load("EvalDemo.js")
f0(): yes, we can!
f1(): no, we can not!
** error: "f1" is not defined.
f2(): yes, we can use dirty tricks!
f2(): yes, we can use dirty tricks! 
```

所以：VBScript 中可以使用 Execute[Global] 解决的问题，可以使用 Javascript 中的 eval() 来解决；对于某些问题，可能需要额外的工作或技巧。

正如 Abhishek 明确表示“我想在 javascript 中评估 javascript”，我觉得没有必要证明我的回答是正确的。

# android - FindViewById() 找不到视图

> ID：11467760
> 
> 赞同：9
> 
> 时间：2012-07-13T09:29:54.327
> 
> 标签：android, android-layout

刚刚在我已经正常工作的布局中添加了一个新按钮，但 findViewById 函数似乎对我无法理解的事情感到愤怒。

这是一些布局：

```
<LinearLayout
        ...
    >
    <ListView
        android:id="@+id/my_lovely_list"
        android:layout_width="fill_parent"
        android:layout_weight="1" 
        />

    <Button
        android:id="@+id/my_lovely_butt"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="@string/exit_b"
        android:layout_weight="0"
        android:clickable="true"
        />

</LinearLayout> 
```

这是一些编码：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    ...
    list_o = (ListView)findViewById(R.id.my_lovely_list);
    butt_o = (Button)findViewById(R.id.my_lovely_butt);
    ...
} 
```

所以，最大的谜团是 ListView 找到没有任何问题，但 Button 无论如何都不会。我已经尝试清理 Proyect，并查看我在这里找到的帖子......但仍然找不到问题！有什么想法吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-07-13T09:31:28.663

```
import yourpackagename.R; 
```

代替 `android.R;`

导入`R`你的包

此外`Clean`，您的项目将**刷新**您的整个项目，然后您还将找到`ID`按钮

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-13T09:38:04.357

有时文件 R 不会重新生成。尝试 ：

*   清理你的项目
*   重建它
*   设法回到已编译的版本并重试一个一个地添加元素并每次编译以检查 R 文件
*   最后一个选项是关闭/重新打开 Eclipse 是的，有些错误无法以其他方式克服 ^^"

不用担心，这只是一些常见的 eclipse/android 错误，它经常发生（在其他时候，它也可能是您项目中某处的一个小语法错误，但我假设您已经检查过 x）

祝你好运

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-13T09:41:30.867

1.  在 Eclipse 中清理您的项目。
2.  确保 id 不重复
3.  删除按钮，保存并再次添加按钮并构建代码。
4.  确保导入了正确的 R 文件。

如果它是一个与语法相关的问题，那么它与编译时有关。

如果代码执行时出现问题，请确保布局已膨胀。如果找到了列表视图，那么按钮也一定可以找到。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2019-03-26T05:50:16.973

确保完成这些过程。

1：确保您导入了您的项目 R 文件。

```
import packagename.R 
```

2：清理你的项目

[![在此处输入图像描述](../Images/823c74f169f49ff3c95523be8f067ee1.png)](https://i.stack.imgur.com/1tu95.png)

3：如果以上两种解决方案都不起作用，请使您的缓存无效并重新启动 [![在此处输入图像描述](../Images/6c18a1dbd0c777eb9f81ff55df9d6761.png)](https://i.stack.imgur.com/rXbSh.png)[![在此处输入图像描述](../Images/29d0893c5ddbdae5935c336bbf7e6dda.png)](https://i.stack.imgur.com/qgeDf.png)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-10-29T15:21:56.147

在 Android Studio `Build`->`Clean Project`为我解决了这个问题。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-09-13T06:26:14.797

同时，仅通过清理您的项目、重建它或手动导入 R 文件，找到指定视图组件的 id 仍然无法被活动找到可能是一件可悲的事情。然后，如果你查看R文件的详细内容，你会发现id没有生成，然后，你需要检查一下，如果你自己的/res文件有问题，例如，名称布局文件、可绘制文件名或菜单文件的变体名称等。所有这些都可能导致 R 文件无法正确生成，甚至更糟糕的是，R 文件根本无法生成。

# playframework - 基于 Netty 的应用程序，计算时间长

> ID：11467761
> 
> 赞同：0
> 
> 时间：2012-07-13T09:29:55.687
> 
> 标签：playframework, netty

我将开始开发一个应用程序，其中网络子系统将基于 Netty。它的文档不多，尤其是很难找到一些“好的做法”。

所以问题是：在基于 Netty 的应用程序中，我应该在哪里执行长计算？

例如，让它成为一个非常慢的计算器，它将在一分钟内计算某个整数的阶乘。在 Netty 中，我将使用 FrameDecoder 将原始数据转换为数据包，并使用 PacketProcessor 选择要执行的操作。现在是时候自己执行数字运算了。所以问题是：用 Netty 进行长计算的典型方法是什么？

我知道，Play Framework 2 使用 Akka 演员，但他们是如何连接的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T10:52:57.827

您通常使用异步方式进行计算，从而释放 io 线程（而不是阻止它），或者使用 ExecutionHandler 来为您将处理移出 io 线程。

# asp.net - 对 401 未经授权的错误 IIS 7.5 进行故障排除

> ID：11467763
> 
> 赞同：0
> 
> 时间：2012-07-13T09:30:20.757
> 
> 标签：asp.net, forms-authentication, windows-server-2008, iis-7.5

我有一个 webapp，它是一个 .NET 4，在 Server 2008 上的 IIS 7.5 上运行的 webforms 应用程序。最近，显然偶尔会出现试图在 mac 上使用该应用程序的用户，并显示错误页面：

401 Unauthorized - 由于凭据无效，访问被拒绝。您无权使用您提供的凭据查看此目录。

该页面不提供任何进一步的信息或子状态代码。我检查了 IIS 错误日志以获取更多信息，并发现这个问题似乎确实是 Mac 上最常见的 Safari 上的用户所独有的，但它也发生在其他浏览器（如 Firefox）上。这些日志中再次没有提供子状态代码。

提供的错误消息似乎与 401.1 一致，但是我使用的是表单身份验证而不是 Windows 身份验证。我自己无法重现这一点，目前它显然对用户来说是随机发生的，并且在一组特定步骤之后不一致。

当用户在应用程序中或尝试登录时会发生此错误，我认为这与他们输入无效凭据无关，因为我有验证来处理该错误，并且可能发生在已登录应用程序的用户身上。

由于我无法重现该错误，我不知道如何解决这个问题，我想要一些关于这方面的指导以及你们可以提出的任何解决方案或想法。如果需要更多信息，请告诉我，我可以更新问题。

编辑：

我有一个想法，可能是 Mac 上的某些配置导致在不需要时发送 WWW-Authenticate 标头，但是在使用 TamerData 添加标头后，我发现我仍然无法复制该问题。IIS 中的所有身份验证都被禁用，匿名和表单除外。

编辑2：

我现在已经能够成功重现该问题，当未经身份验证的用户尝试使用 ?ReturnUrl=value 参数访问受保护的页面时会发生此问题。这将导致 IIS 显示上述错误页面。我可以通过在任何未经身份验证的尝试访问受保护页面并将用户重定向到 Begin_Request 中的登录页面时删除 ReturnUrl 参数来修复此行为。

然而，这个问题最常报告在用户刚登录**后**立即重定向到的页面上。因此，由于某种原因，当用户实际上经过身份验证时，仍然会收到 401 错误。知道为什么会这样吗？

# c# - 与 UserControl 合作的课程的最佳实践

> ID：11467765
> 
> 赞同：0
> 
> 时间：2012-07-13T09:30:23.423
> 
> 标签：c#, winforms, .net-3.5

我正在创建一组名为的类`*Activity`，它们都从接口继承，`IActivity`例如

```
 public interface IActivity
  {
    void StartActivity();
  }

  public class MyFirstActivity : IActivity
  {
    public int SomeVariable {get; set;}

    public MyFirstActivity(int someVariable)
    {
      SomeVariable = someVariable
    }

    public void StartActivity()
    {
      //some code to do stuff with SomeVariable
    }
  } 
```

这样我就可以创建一个`IActivity`s 的列表/数组并运行它们的`StartActivity()`方法。

现在我想做的是为每个继承自`IActivity`.

做这个的最好方式是什么？

我的想法是：

1.  为每个 Activity 创建一个单独的 UserControl，然后在 UserControl 的构造函数中创建一个 Activity 的实例......或者......
2.  使每个活动成为继承自`IActivity`. 问题在于我可能不想在程序的其他部分使用 UserControl 元素，只使用每个执行的操作并为此使用 UserControl 肯定会在不需要时使用更多资源......

有什么想法吗？

**编辑：** 这个想法是每个活动都有一些可以编辑的属性，并且每个活动都执行一个不同的操作，该操作在`StartActivity`调用时执行。活动可以通过创建活动实例并添加到列表来在代码中执行。循环遍历列表以`StartActivity`按顺序执行每个。或者，在表单上，​​每个活动的用户控件可以由用户创建并拖动到表单周围以达到所需的顺序（在幕后填充列表），然后单击“开始”按钮（`StartActivity`依次循环调用每个活动的列表。

这将使用 WinForms。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T11:18:18.337

你应该带着你的第一个想法去。将*Activity作为具体*UserContorl的Property(read-only)，通过UC构造函数实例化。然后您可以通过 UC 直观地设置 Activity 的属性。

# jquery - 如何在运行时向 CSS 属性添加值？

> ID：11467770
> 
> 赞同：0
> 
> 时间：2012-07-13T09:30:34.360
> 
> 标签：jquery, css

我创建了一个 css 文件。在那我写一个类说“HtmlElement”。在那我想为在运行时计算的css属性“left”赋值。所以我的问题是如何在 jquery 运行时为 css 属性赋值？提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T09:32:55.713

纯JS：

```
document.getElementById("myElementsId").style.left = "400px"; 
```

在 jQuery 中像：

```
$('.class').css('left', '50px'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T09:33:18.767

您可以使用[JQuery CSS](http://api.jquery.com/css/)方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T09:33:29.643

您可以在 jQuery 的帮助下添加内联 css，如下所示

```
 $('.HtmlElement').css('left','20px'); 
```

看[`.css()`](http://api.jquery.com/css/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-13T09:32:48.507

不是直接可能的，但您可以向所有使用该类的元素添加一个 CSS

```
$(".yourclass").css({left:"25px"}); 
```

或（但这隐含地添加`px`单位）

```
$(".yourclass").css({left:25}); 
```

这将设置 css 的样式。[在这里](http://api.jquery.com/css/)查看更多信息

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-13T09:38:51.110

```
$('.class').css({
'color','#555555',
'border','1px solid blue'
}); 
```

# c++ - 如何获取 C/C++ 变量的属性

> ID：11467772
> 
> 赞同：2
> 
> 时间：2012-07-13T09:30:38.447
> 
> 标签：c++, c, variables, scope

如何获取变量的属性？

例子：

```
int a = 5;
....
....
isConstant(a); //Prints "no!" if 'a' is not a constant at this time.
isRegister(a); //Prints "yes!" if 'a' is a register at this time.important.
isVolatile(a); //Prints "trusted" if 'a' is volatile.
isLocal(a);    //If it is temporary.
isStatic(a);   //Static? 
```

我只读过关于改变变量的常数而不是其他变量的内容。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-13T09:36:06.857

我很确定您可以将模板元编程用于`const`和`volatile`. IDK 关于`register`，我很确定你不能为`static`或局部范围的变量。

例如，在 C++11 中，您有：

```
#include <iostream>
#include <type_traits>

int main() 
{
    std::cout << boolalpha;
    std::cout << std::is_const<int>::value << '\n';
    std::cout << std::is_const<const int>::value  << '\n';
} 
```

印刷

```
false
true 
```

还有`std::is_volatile<>`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-13T10:57:20.527

主要是因为我想知道我是否可以：您可以通过一点内联汇编来查看寄存器中是否存在某些内容。它两次请求相同的输入，一次在寄存器中，一次在任何地方，无论是内存还是寄存器。如果更改一个更改两者，那么您将获得与两个输入相同的寄存器。

以下使用 gcc 在 x86 和 x86_64 上工作：

```
#include <iostream>

#define isRegister(x) \
  { \
    bool result; \
    asm("notl %1; /* alter always register one */ \
         cmpl %2, %1; /* has the other changed? */ \
         sete %0; /* save to result */ \
         notl %1; /* restore */" \
        :"=&q"(result) /* out */ \
        :"r"(x), "g"(x) /* in */ \
        : /* no clobber */ \
    ); \
   std::cout << (result ? "Yes" : "No") << "\n"; \
  }

int main() {
  register int a=666;
  int b=667;
  register int c = 0;
  int d = 0;
  isRegister(a);
  isRegister(b);
  isRegister(c);
  isRegister(d);
  std::cout << a << ", " << b << ", " << c << ", " << d << "\n";
} 
```

在这里使用内联 asm 会立即使其不可移植，并且您可能希望在实际代码中使用 gcc 的 expr-statement 扩展，这再次使其不可移植并且它是一个脆弱的 hack。您需要小心 - 积极的优化可以打破这一点。这是一个很好的提示，您应该将其留给编译器，而不是担心寄存器中有什么，并且实际使用此代码可能会改变答案的非零风险，因为它可能会占用寄存器本身！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-13T09:49:42.380

实际上，您可以确定变量是否在堆中动态分配。为此，您需要跟踪`malloc()`, `new()`/`new[]`等返回的地址。然后您可以检查变量的地址是否落入当前分配的内存块的任何范围内。

您还可以确定变量是否为全局/静态变量。为此，您将需要让您的程序自行解析（= 解析其可执行文件）以找出相关数据部分的开始和结束位置，或者指示编译器/链接器在数据部分的开头和结尾创建全局变量。然后你看看变量的地址是否在这些变量之间的范围内。

对于`const`,`volatile`和`register`修饰符，您可能可以按照其他人的建议使用一些 C++“魔法”。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-13T11:41:33.957

有一种相当简单的方法可以确定变量是在堆栈上（本地）还是在堆上（全局/静态/分配） - 基本上检查变量地址是否在堆栈顶部的变量和底部的变量之间堆。我还添加了一些测试代码。

```
#include <iostream>
#include <algorithm>
// we want asserts to work in release as well
#undef NDEBUG
#include <cassert>

//! Address of the first variable on the stack
void* g_stackStart;

//! \return true if the address of variable is between g_stackStart and an address of the variable on the top of the stack
template <class T>
bool isLocal(const T& var)
{
    void* stackEnd;
    __asm
    {
        mov stackEnd, ESP
    }
    // what's the direction of stack?
    if ( g_stackStart > stackEnd )
    {
        return &var < g_stackStart && &var >= stackEnd;
    }
    else
    {
        return &var >= g_stackStart && &var < stackEnd;
    }
}

// test for nested variables
void nested(int arg)
{
    int local = int();
    assert( isLocal(local) );
    assert( isLocal(arg) );
}

// global variable used for testing
int global;

int main()
{ 
    // global stack begin pointer must be set here
    __asm
    {
        mov g_stackStart, EBP
    }

    int onStack = int();
    int* onHeap = new int();
    std::pair<int, int> pair(0, 0);

    assert( isLocal(onStack) );
    assert( !isLocal(*onHeap) );
    assert( isLocal(onHeap) );
    assert( !isLocal(global) );
    assert( isLocal(pair) );
    assert( isLocal(pair.first) );
    assert( isLocal(pair.second) );
    nested(0);

    delete onHeap;

    return 0;
} 
```

# jquery - Struts2Jquery 网格

> ID：11467775
> 
> 赞同：0
> 
> 时间：2012-07-13T09:30:52.440
> 
> 标签：jquery, struts2, grid

我正在使用**Struts2Jquery Grid 插件**。我有一些问题阻止了我的工作。

1.  我正在创建 ID 列，但是在编辑时我没有在我的操作类中获取 id 值，如果我设置可编辑为真，那么我将在我的操作类中获取 ID 列的值。那么我怎样才能获得不可编辑的字段值在行动课上。

2.  在编辑和保存表单中，我有选择框，在更改选择框的值时，我想禁用或启用某些字段。

3.  在我的两种形式中都说我有三个文本框，当我转到第三个文本框时，我在前两个文本框中输入了一些值，我希望前两个文本框值的差异在第三个文本框的焦点上。
4.  是否可以在 struts2jquery Gird 中使用 jquery UI 多选，如 erichynds 以及如何实现这一点？

那么有人可以帮助我如何实现这一目标吗？

感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T11:16:48.930

[您可以在此处](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3ajqgriddocs)查看 jqgrid 的 wiki ，我认为这将帮助您了解其`jqgrid`工作原理。您还可以在[此处](http://struts.jgeppert.com/struts2-jquery-showcase/index.action)查看有关 struts2 jquery 的详细示例。

# java - 递归查找二叉树中节点高度的总和

> ID：11467776
> 
> 赞同：1
> 
> 时间：2012-07-13T09:30:57.303
> 
> 标签：java, recursion, binary-tree

如何递归地找到二叉树中节点高度的总和？

例子：

![在此处输入图像描述](../Images/17717ae8bd9f15d273aed1f4cbdc019f.png)

```
public int totalHeight() {
    return totalHeight(root);
}

private int totalHeight(BinaryNode<AnyType> n) {

    int totalHeight = 0;

    if (n.left == null && n.right == null)
        return totalHeight;
    if (n.left != null && n.right != null)
        return totalHeight + 1
                + Math.max(totalHeight(n.left), totalHeight(n.right));
    if (n.left != null)
        return totalHeight + 1 + Math.max(totalHeight(n.left), -1);
    if (n.right != null)
        return totalHeight + 1 + Math.max(-1, totalHeight(n.right));

    return totalHeight;
} 
```

我试过这个，但它只得到树的高度而不是所有节点高度的总和。

我觉得很难在递归中跟踪计数器，似乎`totalHeight`每次递归调用都设置为0。情况不妙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T19:28:51.340

一个简单的版本是执行两遍过程，首先记录每个节点的高度，然后遍历节点以总结它们。这种方法可以递归，但很容易在计算高度时通过求和来完成。

```
public static int totalHeightSum = 0;

private int calculateHeightAndAdd ( Node n )
{
     if ( n == null )
        return 0;

     int leftHeight = calculateHeightAndAdd ( n.left );
     int rightHeight= calculateHeightAndAdd ( n.right);

     int myHeight = 1 + Math.max ( leftHeight, rightHeight );

     totalHeightSum += myHeight;

     return myHeight;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T13:18:10.107

鉴于您对节点高度的实现，让我们简单地调用它`height(BinaryNode<?>)`，您可以：

如果您有权访问集合中的所有节点：

```
int sumHeight(List<BinaryNode<?>> nodes) {
    int sum = 0;
    for (BinaryNode<?> node: nodes) {
        sum += height(node);
    }
    return sum;
} 
```

如果您只能访问树结构中的节点：

```
int sumHeight(BinaryNode<?> node) {
    if (node == null) return 0;
    return height(node) + sumHeight(node.left) + sumHeight(node.right);
} 
```

看看是否有可以在一次递归中进行计算的算法（也许是一些回溯算法？）会很有趣。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T15:12:02.643

好的。我已经提出了一个解决方案。

a) 如果`n == null`返回`0`

b) 如果`n.left == null && n.right == null`返回`0`

c) 总高度为`total height of left`+ `total height of right`+`the height of it self`

*   自身的高度是：

1）如果左侧较大，则左侧总高度减去左侧左侧总高度

2）如果右侧较大，则右侧总高度减去右侧右侧总高度

```
public int totalHeight() {
    return totalHeight(root);
}

private int totalHeight(BinaryNode<AnyType> n) {
    if (n == null)
        return 0;
    else if (n.left == null && n.right == null)
        return 0;
    else
        return totalHeight(n.left)
                + totalHeight(n.right)
                + (totalHeight(n.left) > totalHeight(n.right) ? totalHeight(n.left)
                        - (n.left == null ? 0 : totalHeight(n.left.left))
                        : totalHeight(n.right)
                                - (n.right == null ? 0
                                        : totalHeight(n.right.right))) + 1;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-16T23:56:49.680

我假设您在插入期间没有更新高度。

解决方案：我会以一种无序的方式遍历树。所以我首先声明root.height=0。

然后说

```
BinaryNode right;
BinaryNode left;
BinaryNode parent;
static int level;
int height;

if(left!=null)
{
    left.height=left.parent.height+1;
    level=level+left.height;
    left.yourMethod();
}

if(right!=null)
{
    right.height= right.parent.height+1; 
    level=level+right.height;
    right.yourMethod();
} 
```

因此，您现在将拥有存储所有高度的关卡。

替代方法可以是使用队列的广度优先搜索遍历，但答案是一样的。希望这可以帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-13T10:03:59.263

递归查找每个节点的高度并不断添加到静态变量。或者，您可以记住高度并存储在每个节点中，然后再进行一次递归以将它们相加。

递归应该返回节点 n 的高度，而不是子树中每个节点的总高度。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-07-08T20:50:22.243

void addHeights(class tree* root, int depth, int& sum) { if(root) { addHeights(root->left, depth+1, sum);
addHeights(root->right, depth+1, sum); 总和 += 深度；} }

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-09-12T11:51:59.130

```
public int sum(){
    return sum(root);
}
private int sum(BinaryNode <?> n){
    if(n == null)
        return 0;
    else
        return n.data + sum(n.left) + sum(n.right);

} 
```

尽管我假设您将节点内的数据称为“数据”，但我需要更多数据来评估您的代码。

因此，如果节点为空，则表示您已到达树的末尾并返回 0。否则，它将获取数据并先向左然后向右遍历。每次递归时，它们都会被添加，直到没有更多的节点可以添加。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2012-07-13T09:50:16.447

```
 private  int maxHeight(BinaryNode<AnyType> n) {
  if (n ! = null) return 0;
  int leftheight = maxHeight(n.left);
   int rightheight = maxHeight(n.right);
  return (leftheight > rightheight) ? leftheight + 1 : rightheight + 1;
} 
```

到目前为止，你已经知道了4种情况来计算身高

本质是如果左孩子或右孩子存在，则继续向左或向右节点。如果存在，则返回 1。

计数功能在最后一条语句中。那就是要计算最大的高度。

主要课程是在方法工作时熟悉递归和编程堆栈。

# java - 带有子正则表达式的前瞻

> ID：11467780
> 
> 赞同：0
> 
> 时间：2012-07-13T09:31:07.230
> 
> 标签：java, regex, regex-lookarounds

我有一些数据（准确地说，这些数据来自 Windows 注册表），如下所示：

```
some data ... PACKAGE_SIZE    REG_SZ    100000\r\n    PATH    REG_SZ    C:\\Some\\path\r\n    VERSION    REG_SZ    1.0.0\r\n some other data... 
```

我需要从中提取路径，所以我使用这样的正则表达式：

```
(?<=(PATH.*?REG_SZ)).+?(?=\\r\\n) 
```

但它不起作用，据我了解，因为环视是原子的。到目前为止，我可以使用类似的东西：

```
(?<=PATH).+?(?=\\r\\n) 
```

捕捉到了什么

```
 REG_SZ    C:\\Some\\path 
```

我的问题是 - 这是否可以一次性提取路径？（这意味着不使用两个正则表达式）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T09:41:09.603

你可以试试这个方法

```
String data="some data ... PACKAGE_SIZE    REG_SZ    100000\r\n    PATH    REG_SZ    C:\\Some\\path\r\n    VERSION    REG_SZ    1.0.0\r\n some other data";
Pattern p=Pattern.compile("PATH\\s+REG_SZ\\s+(.*)\\r\\n");
Matcher m=p.matcher(data);
if (m.find())
    System.out.println(m.group(1)); 
```

输出：`C:\Some\path`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T09:39:17.130

**试试这个**

```
try {
    Pattern regex = Pattern.compile("(?<=PATH\\s{1,10}REG_SZ\\s{1,10})(\\S[^\r\n]+)(?=\r\n)", Pattern.CASE_INSENSITIVE | Pattern.UNICODE_CASE);
    Matcher regexMatcher = regex.matcher(subjectString);
    while (regexMatcher.find()) {
        // matched text: regexMatcher.group()
        // match start: regexMatcher.start()
        // match end: regexMatcher.end()
    } 
} catch (PatternSyntaxException ex) {
    // Syntax error in the regular expression
} 
```

## 重要的：

***假设 和 之间的空格数在1-10`PATH`之间变化。`REG_SZ``matched data`***

# c++ - 如何在 mousepressEvent() 函数中显示像素坐标，然后每次单击鼠标时如何在 paintGL() 函数中使用它们

> ID：11467783
> 
> 赞同：-2
> 
> 时间：2012-07-13T09:31:36.900
> 
> 标签：c++, opengl, qt4

我在 qt4 IDE 中的 opengl 上创建了一个 gui。我创建了一个带有 opengl 窗口的小部件，在那里我能够显示 [b] 曲线 [/b]。在这里我使用 [b]paintGL()[/b] 并在其中调用我的绘图函数进行显示。但我的问题是，我在这里使用 [b] mousePressEvent(QMouseEvent *event)[/b] 来获取像素坐标，以便单击 opengl 窗口我可以在该特定单击位置生成曲线。但是运行程序后我发现初始绘制函数和生成的曲线。但点击窗口后无法更新，但在控制台应用程序中执行了所有计算，只有显示没有更新。

那么在这个窗口上点击鼠标后如何更新opengl窗口呢？

这是我的源代码：

GlWidget.cpp

```
//////Mouse Click Event for finding the pixel values//////
void GLWidget::mousePressEvent(QMouseEvent *event)
{

  float window_width,window_height;
  float ratio_x,ratio_y,cy;  
  click_x=event->x();
  click_y=event->y();
  //  qDebug()<<"screen cx1==="<<cx1;
  // qDebug()<<"screen cy1==="<<cy1;

  window_width = 800;
  window_height = 600;

  ratio_x=30.0/window_width;
  ratio_y=30.0/window_height;
  cy=window_height-click_y;
  click_x=click_x*ratio_x-10;
  click_y=cy*ratio_y-10;

  qDebug()<<"original_position_on_screen x==="<<click_x;
  qDebug()<<"original_position_on_screen y==="<<click_y;

  count=count+1;
  qDebug()<<"count==="<<count;
  func();                                             
}

void GLWidget::func()
{
    Draw_Curve();       //Drawing function
}

void GLWidget::Draw_Curve()
{
//Draw The Curve
}

void GLWidget:: paintGL()  // paintGL() function
{
  glClear(GL_COLOR_BUFFER_BIT);
  Draw_Axes();  //Draw 3d coordinate axes           

  func();       //in this function we get the pixel coordinates everytime the    mouse is clicked   in the window
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T10:37:50.750

有几件事：

*   而不是调用函数从鼠标事件处理程序呈现任何内容，您应该请求更新

    ```
    void GLWidget::mousePressEvent(QMouseEvent *event)
    {
      float window_width,window_height;
      float ratio_x,ratio_y,cy;  
      click_x=event->x();
      click_y=event->y();
      //  qDebug()<<"screen cx1==="<<cx1;
      // qDebug()<<"screen cy1==="<<cy1;

      window_width = 800;
      window_height = 600;

      ratio_x=30.0/window_width;
      ratio_y=30.0/window_height;
      cy=window_height-click_y;
      click_x=click_x*ratio_x-10;
      click_y=cy*ratio_y-10;

      qDebug()<<"original_position_on_screen x==="<<click_x;
      qDebug()<<"original_position_on_screen y==="<<click_y;

      count=count+1;
      qDebug()<<"count==="<<count;

      update();  // to request image update
    } 
    ```

*   您的 paintGL() 方法会完成所有渲染。所以，无论你想显示什么都在这里。

# windows - 使用批处理脚本重命名所有文件夹名称

> ID：11467785
> 
> 赞同：1
> 
> 时间：2012-07-13T09:31:37.417
> 
> 标签：windows, batch-file

如何使用批处理脚本重命名文件夹名称？我需要重命名文件名，如：

```
a Filename1
b filename2 
to
A
B 
```

即仅将其设为大写和子字符串到初始部分。到目前为止，我想出了：

```
@echo "Renaming file"
for /D %%f in (C:\REN\*) do rename "%%f" "%%~nxf_myname"
pause 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T13:58:56.140

我假设您实际上想要重命名 C:\REN\ 中的文件夹，而不是文件。

我还假设“初始部分”是指直到第一个空格字符。如果这是正确的，那么您想使用 FOR /F 将名称解析为标记。

SET 搜索和替换功能对于搜索部分不区分大小写。

我正在为原始名称和新名称创建变量，并且我正在打开和关闭延迟扩展，以防文件夹名称包含`!`字符。`!`如果值包含并且启用了延迟扩展，则变量会损坏。

```
@echo off
setlocal disableDelayedExpansion
echo Renaming folders
for /d %%F in (C:\REN\*) do (
  for /f "eol= " %%A in ("%%~nxF") do (
    set "name=%%F"
    set "newName=%%A"
    setlocal enableDelayedExpansion
    for %%C in (
        A B C D E F G H I J K L M
        N O P Q R S T U V W X Y Z
    ) do set "newName=!newName:%%C=%%C!"
    ren "!name!" "!newName!"
    endlocal
  )
) 
```

# php - Google Maps Places 详细信息请求 (PHP)

> ID：11467789
> 
> 赞同：0
> 
> 时间：2012-07-13T09:31:46.380
> 
> 标签：php, google-places-api

我阅读了很多带有 REQUEST_DENIED 错误的消息，但我仍然无法弄清楚为什么它不起作用！我的 google API 密钥已激活 Places 和 Gmap v3 服务。关键是工作，因为我的自动完成应用程序正在使用它。我也使用与我的自动完成应用程序相同的域。我正在尝试通过参考来检查一个地方的详细信息。

为了省去我所有的尝试，假设我使用[这个类](https://github.com/anthony-mills/Google-Places---PHP-/blob/master/googlePlaces.php)，这是我的代码：

```
require('googlePlaces.php');
$g = new googlePlaces("MyGoogleAPIKey");
$g->setLanguage("fr");
$g->setReference($_GET['ref']);
var_dump( $g->details() ); 
```

但我有点怀疑这是一个代码问题，因为当我在浏览器中键入 URL 时它应该可以工作，不是吗？

当我回应`$URLToCall`我有[这个](https://maps.googleapis.com/maps/api/place/details/json?key=MyGoogleAPIKey&reference=CnRkAAAANb8Z2hdES4A-wCyX85rat4azuvIsqe7xpzIKQ-LSZO6N9OmweZtfkNazlIBdv28raT1_Q0l4XfdvCg6NzhWstSbKPKOh65XLQl2w5Y1gjMBs-Z_9NpiCemu6LQOxZD8oWfsj_lg20KT10XL9TZwVaRIQfH8Pu4Y6Yq0VQKQICPgY6hoU44ilRNmPXsWOLabYoqzE09WWrGc&language=fr&sensor=false)。浏览器中的那个 URL 给了我一个 REQUEST_DENIED。

我迷路了 ：（

感谢您的任何提示！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T12:41:55.837

好吧，伙计们，我有点讨厌自己。我花了 2 天时间试图弄清楚出了什么问题。

因为我不知道什么原因，我不得不创建一个新项目并获得一个新的 API 密钥。

# tsql - TSQL 更改表为删除和更新的级联添加约束

> ID：11467794
> 
> 赞同：3
> 
> 时间：2012-07-13T09:32:13.947
> 
> 标签：tsql, sql-server-2008-r2

我正在尝试在 tsql 中使用更新和删除来创建约束。我尝试了几种不同的方法，现在我有点卡住和沮丧 - 看起来很简单。我知道您无法更改现有约束，因此我不确定如何执行此操作；

```
alter table AllowedCars 
   add constraint FK_AllowedCars_CarID foreign key (CarID) 
      references Cars(LocusID) on delete cascade, 
constraint FK_AllowedCars_CarID foreign key (CarID) 
   references Cars(CarID) on update cascade 
```

或这个;

```
alter table AllowedCars add constraint FK_AllowedCars_CarID foreign key (CarID) 
   references Cars(CarID) on delete cascade and on update cascade 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-13T10:56:00.640

您需要先删除约束，然后重新创建它。您的第二次尝试是正确的，但您需要删除`and`.

```
alter table AllowedCars 
  drop constraint FK_AllowedCars_CarID 

alter table AllowedCars 
  add constraint FK_AllowedCars_CarID 
      foreign key (CarID) 
      references Cars(CarID) 
      on delete cascade 
      on update cascade 
```

# android - 方向变化的背景和片段

> ID：11467796
> 
> 赞同：1
> 
> 时间：2012-07-13T09:32:19.880
> 
> 标签：android

我正在使用片段兼容性包。

在我的 onAttach 片段中，我保留了一个`Context`参考。

```
public void onAttach(Activity activity) {
    super.onAttach(activity);
    Log.w(logTag, "Activity is: " + activity);
    mContext = activity;
    Log.w(logTag, "mContext is: " + mContext); // <-- Breakpoint here
} 
```

稍后，我使用上下文

```
private String loadExampleSuccessXML () {
    try {
        AssetManager assets = this.mContext.getAssets(); // <-- Breakpoint here
        //Other Stuff 
```

当我改变方向时， onAttach 似乎存储了新的 Context 但是当我到达时`loadExampleSuccessXML`，`mContext`为空。

`mContext`保存在 onAttach 和 at后我有断点`mContext.getAsssets()`。

当我第一次运行应用程序时，调试器会显示 mContext 的值：

在`onAttach(), mContext [MyActivity] (id=830010419632)`

在`loadExampleSuccessXML(), mContext [MyActivity] (id=830010419632)`

但是在配置更改之后

在`onAttach(), mContext [MyActivity] (id=830010565472)`

在`loadExampleSuccessXML(), mContext null`

我不明白为什么。任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T09:47:34.593

根据我的经验，您应该处理方向更改：

```
<activity
    android:name="com..."
    android:configChanges="orientation|keyboardHidden" /> 
```

参考：

*   [安卓：配置更改](http://developer.android.com/guide/topics/manifest/activity-element.html#config)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T10:03:12.570

您能否提供更多详细信息来说明为什么需要维护对上下文的引用？至少这从来都不是我们的应用程序的要求，并且已被证明（尽管从您发布的代码中不是您的情况）是 Android 内存泄漏的罪魁祸首......

如果您需要维护先前活动状态的某个方面，那么我建议使用`onSavedInstanceState()`. 在这里，您可以传递一些简单的属性（例如我上次在列表中选择的项目的 id）。清单配置修复通常是错误的方法，尽管它在诸如此类的帮助网站上很普遍。你可能不想要那个。

最后，再次考虑使用`setRetainInstance(true)`...，根据我们的经验，如果使用不当，这是非常危险的方法！`android.support.v4.*`这可能只是我们，但至少在最近的库中确实存在一些错误。当设置为`true`这个时，确保片段永远不会被破坏（即被`onDestroy()`调用），而是简单地附加和分离，因为欠活动在旋转时被破坏并重新创建。它将对您的问题进行排序，但确实阅读了有关其用法的文档……一些副作用非常微妙。

# python - 如何将 wx.grid 放入带有滚动条的 GridBagSizer

> ID：11467799
> 
> 赞同：0
> 
> 时间：2012-07-13T09:32:34.823
> 
> 标签：python, user-interface, wxpython

我用 Python 写了一些代码。

```
#!/usr/bin/python2
import wx
import wx.grid

class MainFrame(wx.Frame):
    def __init__(self):
        wx.Frame.__init__(self, None, -1, "Manager")
        sizer = wx.GridBagSizer(hgap=0, vgap=0)

        overall = wx.grid.Grid(self)
        overall.CreateGrid(5,2)
        sizer.Add(overall, pos=(0,0), span=(5,2), flag=wx.EXPAND)

        self.SetSizer(sizer)
        self.Fit()

app = wx.PySimpleApp()
MainFrame().Show()

app.MainLoop() 
```

它将显示一个 5x2 网格。但如果我改变：

```
sizer.Add(overall, pos=(0,0), span=(5,2), flag=wx.EXPAND) 
```

进入：

```
sizer.Add(overall, pos=(0,0), span=(4,2), flag=wx.EXPAND) 
```

**什么都不会改变**:(
但我想把一个 5x2 的网格放入一个 GridBagSizer 中，它有 4x2 的空间和一个滚动条。

怎么做？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T13:21:42.167

GridBagSizer 实际上用于将多个小部件放入类似网格的形状中，例如当您有一个带有成对标签和文本控件的表单时。在大多数情况下，它不仅仅适用于一个小部件。

您应该使用 BoxSizer。无论如何，我发现它们更灵活。wx.PySimpleApp 也已弃用。请改用 wx.App(False)。这是一些有效的代码：

```
import wx
import wx.grid

class MainFrame(wx.Frame):
    def __init__(self):
        wx.Frame.__init__(self, None, -1, "Manager")
        sizer = wx.BoxSizer(wx.VERTICAL)

        overall = wx.grid.Grid(self)
        overall.CreateGrid(5,2)
        sizer.Add(overall, 0, flag=wx.EXPAND)

        self.SetSizer(sizer)
        self.Fit()

app = wx.App(False)
MainFrame().Show()

app.MainLoop() 
```

**编辑（2012 年 7 月 16 日）：**这是另一个更符合您的描述的示例：

```
import wx

########################################################################
class ChartPanel(wx.Panel):
    """"""

    #----------------------------------------------------------------------
    def __init__(self, parent):
        """Constructor"""
        wx.Panel.__init__(self, parent)

########################################################################
class MainPanel(wx.Panel):
    """"""

    #----------------------------------------------------------------------
    def __init__(self, parent):
        """Constructor"""
        wx.Panel.__init__(self, parent)
        chart = ChartPanel(self)
        chart.SetBackgroundColour("blue")

        # create some sizers
        mainSizer = wx.BoxSizer(wx.VERTICAL)
        topSizer = wx.BoxSizer(wx.HORIZONTAL)
        # change to VERTICAL if the buttons need to be stacked
        btnSizer = wx.BoxSizer(wx.HORIZONTAL)

        for i in range(3):
            btn = wx.Button(self, label="Button #%s" % (i+1))
            btnSizer.Add(btn, 0, wx.ALL, 5)

        # put the buttons next to the Panel on the top
        topSizer.Add(btnSizer, 0, wx.ALL, 5)
        topSizer.Add(chart, 1, wx.EXPAND)

        mainSizer.Add(topSizer, 1, wx.EXPAND)
        mainSizer.AddSpacer(150,150)
        self.SetSizer(mainSizer)

########################################################################
class MainFrame(wx.Frame):
    """"""

    #----------------------------------------------------------------------
    def __init__(self):
        """Constructor"""
        wx.Frame.__init__(self, None, title="BoxSizer Example")
        panel = MainPanel(self)
        self.Show()

#----------------------------------------------------------------------
if __name__ == "__main__":
    app = wx.App(False)
    frame = MainFrame()
    app.MainLoop() 
```

# java - mysql 和 javax.naming.NamingException

> ID：11467801
> 
> 赞同：0
> 
> 时间：2012-07-13T09:32:40.537
> 
> 标签：java, mysql, eclipse, tomcat, connection-pooling

我正在使用tomcat和mysql（ide是eclipse）。我正在使用连接池。

在 context.xml 中，我有：

```
 <Resource name="jdbc/mydb" auth="Container" type="javax.sql.DataSource"
          maxActive="100" maxIdle="30" maxWait="10000"
          username="root" password="root" driverClassName="com.mysql.jdbc.Driver"
          url="jdbc:mysql://localhost:3306/mydb" 
          factory="org.apache.tomcat.jdbc.pool.DataSourceFactory" /> 
```

一开始我一直在easyphp中使用mysql（用户root没有密码）。一切正常。然后我添加了密码并正确更改了 context.xml（就像现在一样）。

从那时起，我有这些例外：

```
Unexpected exception resolving reference
java.sql.SQLException: Access denied for user 'root'@'localhost' (using password: NO)

Failed to register in JMX: javax.naming.NamingException: Access denied for user    'root'@'localhost' (using password: NO)
lug 13, 2012 9:16:45 AM org.apache.naming.NamingContext lookup
Unexpected exception resolving reference
java.sql.SQLException: Access denied for user 'root'@'localhost' (using password: NO) 
```

“奇怪”的事情是应用程序成功地在 db 上写入。

我已经卸载了easyphp，并在端口3306上安装了mysql，使用pwd root创建了root用户。

我得到了同样的例外。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T09:43:37.223

我建议您在遇到问题时在错误消息中剪切并粘贴通用内容。在最坏的情况下，当你得知自己并不孤单或第一个时，你会感到欣慰；充其量您会看到解决问题的简单方法。

我贴了这个

> mysql java.sql.SQLException：用户'root'@'localhost'的访问被拒绝

进了谷歌搜索，学到了很多有趣的东西。你也可以。

我的另一个建议是为您的应用程序创建一个单独的用户名和密码，并授予它适当的权限，而不是使用 root。Root 功能强大，不应将其提供给应用程序，即使应用程序和数据库都是您的。Root 可以访问每个表，包括系统表。我更喜欢为应用程序创建一个单独的数据库，并仅授予应用程序用户名和密码完成任务所需的权限（例如，除非需要，否则没有删除权限；表没有 DROP 等）

# java - 带有 HTML 文件的 URLConnection.getContent

> ID：11467803
> 
> 赞同：1
> 
> 时间：2012-07-13T09:32:48.440
> 
> 标签：java, servlets, httpurlconnection

当我使用类似的东西时：

```
URL url = new URL(a_url);
URLConnection url_conn = url.openConnection();
Object content = url_conn.getContent(); 
```

并且检索到的文件的 MIME 类型是我调试的 HTML 或 XML， `content`在运行时将包含以下实例：

```
sun.net.www.protocol.http.HttpURLConnection$HttpInputStream 
```

现在，如果我想`instanceof`在那个实例上使用我该怎么办？

```
if (content instanceof PlainTextInputStream)
{
...
}  
else if(content instanceof ImageProducer)
{
...
}
else if(content instanceof ???) {} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-13T09:52:06.640

你不应该依赖于实现类。总有一天会坏掉的。

我认为这是您应该如何根据请求标头执行此操作：

```
URLConnection url_conn = url.openConnection();
httpURLConnection http_url_conn = (httpURLConnection )url.openConnection();

String contentType = http_url_conn.getContentType()

  if(contentType.contains("text/plain")){
    //handle plain text
    .....
  } else if(contentType.contains("images/jpeg")){
    //handle image
    ......
  } 
```

**在此处阅读有关 Content-Type 的更多信息：**

*   [http://en.wikipedia.org/wiki/MIME](http://en.wikipedia.org/wiki/MIME)

# java - Eclipse 环境中的 Hadoop

> ID：11467813
> 
> 赞同：0
> 
> 时间：2012-07-13T09:33:31.063
> 
> 标签：java, linux, eclipse, ssh, hadoop

[运行http://developer.yahoo.com/hadoop/tutorial/module3.html#running](http://developer.yahoo.com/hadoop/tutorial/module3.html#running)提供的 wordcount 示例 我在 yahoo 提供的 VM 上运行 hadoop 并通过 ssh 客户端连接到 VM。

我收到这些错误：

```
12/07/13 00:10:03 WARN mapred.JobClient: Use GenericOptionsParser for parsing the arguments. Applications should implement Tool for the same.
12/07/13 00:10:03 INFO mapred.FileInputFormat: Total input paths to process : 2
12/07/13 00:10:03 INFO mapred.FileInputFormat: Total input paths to process : 2
12/07/13 00:10:04 INFO mapred.JobClient: Running job: job_201207121015_0021
12/07/13 00:10:05 INFO mapred.JobClient:  map 0% reduce 0%
12/07/13 00:10:10 INFO mapred.JobClient: Task Id : attempt_201207121015_0021_m_000000_0, Status : FAILED
java.lang.UnsupportedClassVersionError: WordCountReducer : Unsupported major.minor version 51.0
    at java.lang.ClassLoader.defineClass1(Native Method)
    at java.lang.ClassLoader.defineClass(Unknown Source)
    at java.security.SecureClassLoader.defineClass(Unknown Source)
    at java.net.URLClassLoader.defineClass(Unknown Source)
    at java.net.URLClassLoader.access$000(Unknown Source)
    at java.net.URLClassLoader$1.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at java.lang.ClassLoader.loadClassInternal(Unknown Source)
    at java.lang.Class.forName0(Native Method)
    at java.lang.Class.forName(Unknown Source)
    at org.apache.hadoop.conf.Configuration.getClassByName(Configuration.java:628)
    at org.apache.hadoop.conf.Configuration.getClass(Configuration.java:646)
    at org.apache.hadoop.conf.Configuration.getClass(Configuration.java:672)
    at org.apache.hadoop.mapred.JobConf.getCombinerClass(JobConf.java:780)
    at org.apache.hadoop.mapred.MapTask$MapOutputBuffer.<init>(MapTask.java:403)
    at org.apache.hadoop.mapred.MapTask.run(MapTask.java:193)
    at org.apache.hadoop.mapred.TaskTracker$Child.main(TaskTracker.java:2209)

12/07/13 00:10:10 WARN mapred.JobClient: Error reading task outputhadoop-desk.localdomain
12/07/13 00:10:10 WARN mapred.JobClient: Error reading task outputhadoop-desk.localdomain
12/07/13 00:10:10 INFO mapred.JobClient: Task Id : attempt_201207121015_0021_m_000001_0, Status : FAILED
java.lang.UnsupportedClassVersionError: WordCountReducer : Unsupported major.minor version 51.0
    at java.lang.ClassLoader.defineClass1(Native Method)
    at java.lang.ClassLoader.defineClass(Unknown Source)
    at java.security.SecureClassLoader.defineClass(Unknown Source)
    at java.net.URLClassLoader.defineClass(Unknown Source)
    at java.net.URLClassLoader.access$000(Unknown Source)
    at java.net.URLClassLoader$1.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at java.lang.ClassLoader.loadClassInternal(Unknown Source)
    at java.lang.Class.forName0(Native Method)
    at java.lang.Class.forName(Unknown Source)
    at org.apache.hadoop.conf.Configuration.getClassByName(Configuration.java:628)
    at org.apache.hadoop.conf.Configuration.getClass(Configuration.java:646)
    at org.apache.hadoop.conf.Configuration.getClass(Configuration.java:672)
    at org.apache.hadoop.mapred.JobConf.getCombinerClass(JobConf.java:780)
    at org.apache.hadoop.mapred.MapTask$MapOutputBuffer.<init>(MapTask.java:403)
    at org.apache.hadoop.mapred.MapTask.run(MapTask.java:193)
    at org.apache.hadoop.mapred.TaskTracker$Child.main(TaskTracker.java:2209)

12/07/13 00:10:10 WARN mapred.JobClient: Error reading task outputhadoop-desk.localdomain
12/07/13 00:10:10 WARN mapred.JobClient: Error reading task outputhadoop-desk.localdomain
12/07/13 00:10:14 INFO mapred.JobClient: Task Id : attempt_201207121015_0021_m_000000_1, Status : FAILED
java.lang.UnsupportedClassVersionError: WordCountReducer : Unsupported major.minor version 51.0
    at java.lang.ClassLoader.defineClass1(Native Method)
    at java.lang.ClassLoader.defineClass(Unknown Source)
    at java.security.SecureClassLoader.defineClass(Unknown Source)
    at java.net.URLClassLoader.defineClass(Unknown Source)
    at java.net.URLClassLoader.access$000(Unknown Source)
    at java.net.URLClassLoader$1.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at java.lang.ClassLoader.loadClassInternal(Unknown Source)
    at java.lang.Class.forName0(Native Method)
    at java.lang.Class.forName(Unknown Source)
    at org.apache.hadoop.conf.Configuration.getClassByName(Configuration.java:628)
    at org.apache.hadoop.conf.Configuration.getClass(Configuration.java:646)
    at org.apache.hadoop.conf.Configuration.getClass(Configuration.java:672)
    at org.apache.hadoop.mapred.JobConf.getCombinerClass(JobConf.java:780)
    at org.apache.hadoop.mapred.MapTask$MapOutputBuffer.<init>(MapTask.java:403)
    at org.apache.hadoop.mapred.MapTask.run(MapTask.java:193)
    at org.apache.hadoop.mapred.TaskTracker$Child.main(TaskTracker.java:2209)

12/07/13 00:10:14 WARN mapred.JobClient: Error reading task outputhadoop-desk.localdomain
12/07/13 00:10:14 WARN mapred.JobClient: Error reading task outputhadoop-desk.localdomain
12/07/13 00:10:15 INFO mapred.JobClient: Task Id : attempt_201207121015_0021_m_000001_1, Status : FAILED
java.lang.UnsupportedClassVersionError: WordCountReducer : Unsupported major.minor version 51.0
    at java.lang.ClassLoader.defineClass1(Native Method)
    at java.lang.ClassLoader.defineClass(Unknown Source)
    at java.security.SecureClassLoader.defineClass(Unknown Source)
    at java.net.URLClassLoader.defineClass(Unknown Source)
    at java.net.URLClassLoader.access$000(Unknown Source)
    at java.net.URLClassLoader$1.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at java.lang.ClassLoader.loadClassInternal(Unknown Source)
    at java.lang.Class.forName0(Native Method)
    at java.lang.Class.forName(Unknown Source)
    at org.apache.hadoop.conf.Configuration.getClassByName(Configuration.java:628)
    at org.apache.hadoop.conf.Configuration.getClass(Configuration.java:646)
    at org.apache.hadoop.conf.Configuration.getClass(Configuration.java:672)
    at org.apache.hadoop.mapred.JobConf.getCombinerClass(JobConf.java:780)
    at org.apache.hadoop.mapred.MapTask$MapOutputBuffer.<init>(MapTask.java:403)
    at org.apache.hadoop.mapred.MapTask.run(MapTask.java:193)
    at org.apache.hadoop.mapred.TaskTracker$Child.main(TaskTracker.java:2209)

12/07/13 00:10:15 WARN mapred.JobClient: Error reading task outputhadoop-desk.localdomain
12/07/13 00:10:15 WARN mapred.JobClient: Error reading task outputhadoop-desk.localdomain
12/07/13 00:10:19 INFO mapred.JobClient: Task Id : attempt_201207121015_0021_m_000000_2, Status : FAILED
java.lang.UnsupportedClassVersionError: WordCountReducer : Unsupported major.minor version 51.0
    at java.lang.ClassLoader.defineClass1(Native Method)
    at java.lang.ClassLoader.defineClass(Unknown Source)
    at java.security.SecureClassLoader.defineClass(Unknown Source)
    at java.net.URLClassLoader.defineClass(Unknown Source)
    at java.net.URLClassLoader.access$000(Unknown Source)
    at java.net.URLClassLoader$1.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at java.lang.ClassLoader.loadClassInternal(Unknown Source)
    at java.lang.Class.forName0(Native Method)
    at java.lang.Class.forName(Unknown Source)
    at org.apache.hadoop.conf.Configuration.getClassByName(Configuration.java:628)
    at org.apache.hadoop.conf.Configuration.getClass(Configuration.java:646)
    at org.apache.hadoop.conf.Configuration.getClass(Configuration.java:672)
    at org.apache.hadoop.mapred.JobConf.getCombinerClass(JobConf.java:780)
    at org.apache.hadoop.mapred.MapTask$MapOutputBuffer.<init>(MapTask.java:403)
    at org.apache.hadoop.mapred.MapTask.run(MapTask.java:193)
    at org.apache.hadoop.mapred.TaskTracker$Child.main(TaskTracker.java:2209)

12/07/13 00:10:19 WARN mapred.JobClient: Error reading task outputhadoop-desk.localdomain
12/07/13 00:10:19 WARN mapred.JobClient: Error reading task outputhadoop-desk.localdomain
12/07/13 00:10:19 INFO mapred.JobClient: Task Id : attempt_201207121015_0021_m_000001_2, Status : FAILED
java.lang.UnsupportedClassVersionError: WordCountReducer : Unsupported major.minor version 51.0
    at java.lang.ClassLoader.defineClass1(Native Method)
    at java.lang.ClassLoader.defineClass(Unknown Source)
    at java.security.SecureClassLoader.defineClass(Unknown Source)
    at java.net.URLClassLoader.defineClass(Unknown Source)
    at java.net.URLClassLoader.access$000(Unknown Source)
    at java.net.URLClassLoader$1.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at java.lang.ClassLoader.loadClassInternal(Unknown Source)
    at java.lang.Class.forName0(Native Method)
    at java.lang.Class.forName(Unknown Source)
    at org.apache.hadoop.conf.Configuration.getClassByName(Configuration.java:628)
    at org.apache.hadoop.conf.Configuration.getClass(Configuration.java:646)
    at org.apache.hadoop.conf.Configuration.getClass(Configuration.java:672)
    at org.apache.hadoop.mapred.JobConf.getCombinerClass(JobConf.java:780)
    at org.apache.hadoop.mapred.MapTask$MapOutputBuffer.<init>(MapTask.java:403)
    at org.apache.hadoop.mapred.MapTask.run(MapTask.java:193)
    at org.apache.hadoop.mapred.TaskTracker$Child.main(TaskTracker.java:2209)

12/07/13 00:10:19 WARN mapred.JobClient: Error reading task outputhadoop-desk.localdomain
12/07/13 00:10:19 WARN mapred.JobClient: Error reading task outputhadoop-desk.localdomain
java.io.IOException: Job failed!
    at org.apache.hadoop.mapred.JobClient.runJob(JobClient.java:1113)
    at WordCount.main(WordCount.java:33) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T09:36:17.383

您正在使用 Java7 编译代码，而 Hadoop 在 Java6 上运行。您可以让 Hadoop 在 Java7 上运行，也可以为 Java6 编译代码。

# sql-server-2008 - 如何从 SQL Server 2008 表中的完整路径获取文件夹和子文件夹列表

> ID：11467818
> 
> 赞同：1
> 
> 时间：2012-07-13T09:33:53.420
> 
> 标签：sql-server-2008, directory

我的 SQL Server 表中有一个包含文件路径的列（包含文件夹和子文件夹）

例如：

```
/Hidden Reporting/Validation Report
/Top Reporting/Inner/TopTools Report 
```

我目前有一个查询，它返回这些路径的所有主文件夹：

```
Select Distinct 
    LEFT((substring(Path, 2, (LEN(Path) - 1))), CHARINDEX('/', (substring(Path, 2,(LEN(Path) - 1)))) - 1) AS Folder
FROM dbo.Catalogs
Where Type=2 
```

结果：

```
Hidden Reporting
Top Reporting 
```

但我也需要获取子文件夹。

例如：

```
Hidden Reporting
Top Reporting
Inner 
```

如何在 SQL Server 2008 中执行此操作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T10:41:43.033

首先创建一个表值函数来拆分字符串。我得到了以下功能，可以从其他地方拆分

```
create FUNCTION [dbo].[SplitString]
(
    @sString varchar(5000),
    @cDelimiter char(1)
)
RETURNS @tParts TABLE ( part varchar(5000) )
AS
BEGIN
    if @sString is null return
    declare     @iStart int,
                @iPos int
    if substring( @sString, 1, 1 ) = @cDelimiter 
    begin
        set     @iStart = 2
        insert into @tParts
        values( null )
    end
    else 
        set     @iStart = 1
    while 1=1
    begin
        set     @iPos = charindex( @cDelimiter, @sString, @iStart )
        if @iPos = 0
                set     @iPos = len( @sString )+1
        if @iPos - @iStart > 0                  
                insert into @tParts
                values  ( substring( @sString, @iStart, @iPos-@iStart ))
        else
                insert into @tParts
                values( null )
        set     @iStart = @iPos+1
        if @iStart > len( @sString ) 
                break
    end
    RETURN

END 
```

现在您可以执行下面的选择查询以获得所需的输出

```
SELECT part
FROM Catalogs C 
cross APPLY dbo.SplitString( substring([Path],1,LEN([Path]) - 
 CHARINDEX('/',REVERSE([Path]))) ,'/') AS Results
WHERE ISNULL(part,'') <> '' 
```

# gwt - Chrome 浏览器是否支持 GWT 2.5？

> ID：11467822
> 
> 赞同：0
> 
> 时间：2012-07-13T09:34:12.547
> 
> 标签：gwt, google-chrome, gwt-2.5

我最近浏览了以下链接：

[https://developers.google.com/web-toolkit/release-notes#Release_Notes_Current](https://developers.google.com/web-toolkit/release-notes#Release_Notes_Current)

标题下有一点：**Breaking Changes and Other Changes of Note**

***GWT 不再支持 ChromeFrame。该实现导致的错误多于解决的问题。***

这是否意味着 Chrome 浏览器将不支持 GWT 2.5？还是我误解了？谁能解释一下？

提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-13T09:47:30.170

**编辑**谷歌确认发行说明中的​​错误：[https ://groups.google.com/d/msg/google-web-toolkit-contributors/wzilCaLySCU/aYMwD2zzOrsJ](https://groups.google.com/d/msg/google-web-toolkit-contributors/wzilCaLySCU/aYMwD2zzOrsJ)

这可能与[http://code.google.com/p/google-web-toolkit/issues/detail?id=6665有关](http://code.google.com/p/google-web-toolkit/issues/detail?id=6665)

从技术上讲，支持 ChromeFrame 应该没有什么特别的（这*与*Chrome 不同，所以回答您的问题：是的，您误解了发行说明中的​​声明）。

实际上，我认为发行说明是错误的：GWT 2.4 与 ChromeFrame 存在问题（实际上是在安装但禁用时），而这已在 2.5 中得到修复（参见上面问题的链接）。
我将与 Google 联系以了解更多信息，并可能修复发行说明（如果上述内容正确）。**编辑：** [完成](https://groups.google.com/d/topic/google-web-toolkit-contributors/wzilCaLySCU/discussion)（如果需要，将通过邮件直接联系一些人）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-13T09:45:49.303

[ChromeFrame](https://developers.google.com/chrome/chrome-frame/)是一个用于 Internet Explorer 的插件，它使用 Chrome 的渲染和 JavaScript 引擎而不是 IE 的等价物。所以这个声明没有提到独立的 Chrome 浏览器（如果它确实会很奇怪）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-13T09:44:08.200

[ChromeFrame 是 Chrome 以外其他浏览器的插件](http://www.chromium.org/developers/how-tos/chrome-frame-getting-started/chrome-frame-faq#TOC-What-is-Google-Chrome-Frame-)

# html - 如何在不中断链接的情况下为 IE 应用背景大小修复？

> ID：11467823
> 
> 赞同：0
> 
> 时间：2012-07-13T09:34:13.200
> 
> 标签：html, css

我有一组在 Chrome 和 Firefox 上都可以使用的链接，但是 IE 中的一个链接不可点击，也不能通过代码中的 url 链接。我现在知道原因是 IE 的背景大小修复。如何在不破坏链接的情况下应用背景大小修复？

HTML（tierThreeCentre 链接在 IE 中不起作用）：

```
<div class="tierThreeOrange">
    <h3>Header 1</h3>
    <a href="/home/" class="buttonLeft">Find out more</a>

</div>
<div class="tierThreeCentre"><!--this is the link not working in IE -->
    <h3>Header 2</h3>
    <a href="/home/next-page/" class="buttonLeft">Find out more</a>

</div>
<div class="tierThreeOrangeRight">
    <a href="http://promo.thissite.com" class="button">Find out more</a>
</div> 
```

CSS：

```
.tierThree, .tierThreeOrange, .tierThreeCentre, {
    position:relative;
    float:left;
    width:190px;
    height:150px;
    margin:20px 23px 20px 0px;
    padding:0;
    box-shadow:5px 5px 10px #888686;
    -webkit-box-shadow:5px 5px 10px #888686;
    -moz-box-shadow:5px 5px 10px #888686;
}

.tierThree, .tierThreeOrange, .tierThreeBlack {
    background:url(/path/path2/images/hp/ah-t3l.png) no-repeat; 
    background-position: -49px -150px;
    background-size: 340px;
    background-position-x: -49px; /* IE fix */
    background-position-y: -150px /* IE fix */
    filter: progid:DXImageTransform.Microsoft.AlphaImageLoader(src='/path/path2/images/hp/ah-t3l.png', sizingMethod='scale'); /* background-size fix for IE */
    -ms-filter: "progid:DXImageTransform.Microsoft.AlphaImageLoader(src='/path/path2/images/hp/ah-t3l.png',sizingMethod='scale')"; /* background-size fix for IE */
}

.tierThreeCentre {
    background:url(/path/path2/images/hp/ah-t3c.png) no-repeat;
    background-size:200px 150px;
    filter: progid:DXImageTransform.Microsoft.AlphaImageLoader(src='/path/path2/images/hp/ah-t3c.png', sizingMethod='scale'); /* background-size fix for IE */
    -ms-filter: "progid:DXImageTransform.Microsoft.AlphaImageLoader(src='//path/path2/images/hp/ah-t3c.png',sizingMethod='scale')"; /* background-size fix for IE */
}
.tierThreeRight, .tierThreeOrangeRight,  {
    position:relative;
    float:left;
    width:190px;
    height:150px;
    margin:20px 20px 20px 0px;
    padding:0;
    box-shadow:5px 5px 10px #E0E0E0;
    -webkit-box-shadow:5px 5px 10px #E0E0E0;
    -moz-box-shadow:5px 5px 10px #E0E0E0;
}

.tierThreeRight, .tierThreeOrangeRight, .tierThreeBlackRight {
    background:url(/path/path2/images/hp/ah-t3r.png) no-repeat;
    background-position:-30px
}

.button {
    -moz-box-shadow:inset 0px -8px 0px -1px #fe5715;
    -webkit-box-shadow:inset 0px -8px 0px -1px #fe5715;
    box-shadow:inset 0px -8px 0px -1px #fe5715;
    background:#fe5715; /* Old browsers */
    background:-moz-linear-gradient(top, #ffb260 0%, #fe5715 100%); /* FF3.6+ */
    background:-webkit-gradient(linear, left top, left bottom, color-stop(0%,#ffb260), color-stop(100%,#fe5715)); /* Chrome,Safari4+ */
    background:-webkit-linear-gradient(top, #ffb260 0%,#fe5715 100%); /* Chrome10+,Safari5.1+ */
    background:-o-linear-gradient(top, #ffb260 0%,#fe5715 100%); /* Opera 11.10+ */
    background:-ms-linear-gradient(top, #ffb260 0%,#fe5715 100%); /* IE10+ */
    background:linear-gradient(top, #ffb260 0%,#fe5715 100%); /* W3C */
    _filter:progid:DXImageTransform.Microsoft.gradient( startColorstr='#ffb260', endColorstr='#fe5715',GradientType=0 ); /* IE6-9 (underscrore hack for IE9) */
    -moz-border-radius:19px;
    -webkit-border-radius:19px;
    border-radius:19px;
    border:1px solid #ffffff;
    display:inline-block;
    color:#ffffff;
    font-family:arial;
    font-size:12px;
    font-weight:bold;
    padding:3px 17px;
    text-decoration:none;
    text-shadow:0px -1px 0px #fe5715;
    position:absolute;
    right:10px;
    bottom:15px;
}
.button:hover {
    -moz-box-shadow:inset 0px -6px 0px -1px #fe7944;
    -webkit-box-shadow:inset 0px -6px 0px -1px #fe7944;
    box-shadow:inset 0px -6px 0px -1px #fe7944;
    background:#fe7944; /* Old browsers */
    background:-moz-linear-gradient(top, #ffc180 0%, #fe7944 100%); /* FF3.6+ */
    background:-webkit-gradient(linear, left top, left bottom, color-stop(0%,#ffc180), color-stop(100%,#fe7944)); /* Chrome,Safari4+ */
    background:-webkit-linear-gradient(top, #ffc180 0%,#fe7944 100%); /* Chrome10+,Safari5.1+ */
    background:-o-linear-gradient(top, #ffc180 0%,#fe7944 100%); /* Opera 11.10+ */
    background:-ms-linear-gradient(top, #ffc180 0%,#fe7944 100%); /* IE10+ */
    background:linear-gradient(top, #ffc180 0%,#fe7944 100%); /* W3C */
    _filter:progid:DXImageTransform.Microsoft.gradient( startColorstr='#ffc180', endColorstr='#fe7944',GradientType=0 ); /* IE6-9 (underscrore hack for IE9) */
    text-shadow:0px 1px 0px #fe5715;
    text-decoration:none
}

.buttonLeft {
    -moz-box-shadow:inset 0px -8px 0px -1px #fe5715;
    -webkit-box-shadow:inset 0px -8px 0px -1px #fe5715;
    box-shadow:inset 0px -8px 0px -1px #fe5715;
    background:#fe5715; /* Old browsers */
    background:-moz-linear-gradient(top, #ffb260 0%, #fe5715 100%); /* FF3.6+ */
    background:-webkit-gradient(linear, left top, left bottom, color-stop(0%,#ffb260), color-stop(100%,#fe5715)); /* Chrome,Safari4+ */
    background:-webkit-linear-gradient(top, #ffb260 0%,#fe5715 100%); /* Chrome10+,Safari5.1+ */
    background:-o-linear-gradient(top, #ffb260 0%,#fe5715 100%); /* Opera 11.10+ */
    background:-ms-linear-gradient(top, #ffb260 0%,#fe5715 100%); /* IE10+ */
    background:linear-gradient(top, #ffb260 0%,#fe5715 100%); /* W3C */
    _filter:progid:DXImageTransform.Microsoft.gradient( startColorstr='#ffb260', endColorstr='#fe5715',GradientType=0 ); /* IE6-9 (underscrore hack for IE9) */
    -moz-border-radius:19px;
    -webkit-border-radius:19px;
    border-radius:19px;
    border:1px solid #ffffff;
    display:inline-block;
    color:#ffffff;
    font-family:arial;
    font-size:12px;
    font-weight:bold;
    padding:3px 17px;
    text-decoration:none;
    text-shadow:0px -1px 0px #fe5715;
    position:absolute;
    left:10px;
    bottom:15px;
}
.buttonLeft:hover {
    -moz-box-shadow:inset 0px -6px 0px -1px #fe7944;
    -webkit-box-shadow:inset 0px -6px 0px -1px #fe7944;
    box-shadow:inset 0px -6px 0px -1px #fe7944;
    background:#fe7944; /* Old browsers */
    background:-moz-linear-gradient(top, #ffc180 0%, #fe7944 100%); /* FF3.6+ */
    background:-webkit-gradient(linear, left top, left bottom, color-stop(0%,#ffc180), color-stop(100%,#fe7944)); /* Chrome,Safari4+ */
    background:-webkit-linear-gradient(top, #ffc180 0%,#fe7944 100%); /* Chrome10+,Safari5.1+ */
    background:-o-linear-gradient(top, #ffc180 0%,#fe7944 100%); /* Opera 11.10+ */
    background:-ms-linear-gradient(top, #ffc180 0%,#fe7944 100%); /* IE10+ */
    background:linear-gradient(top, #ffc180 0%,#fe7944 100%); /* W3C */
    _filter:progid:DXImageTransform.Microsoft.gradient( startColorstr='#ffc180', endColorstr='#fe7944',GradientType=0 ); /* IE6-9 (underscrore hack for IE9) */
    text-shadow:0px 1px 0px #fe5715;
    text-decoration:none
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T09:39:45.503

嘿，现在给锚链接显示属性，如下所示

```
a.buttonLeft{
display:block;
} 
```

# opera - 在歌剧蜻蜓上暂停脚本执行

> ID：11467833
> 
> 赞同：0
> 
> 时间：2012-07-13T09:35:04.077
> 
> 标签：opera, pausing-execution, opera-dragonfly

在 Chrome 开发工具中，我们可以使用界面底部一行的“暂停”图标来中断所有异常。所以当我们的网页在运行的时候，我们可以在不加断点的情况下突然中断，并且知道脚本在哪里停止。我们可以在歌剧蜻蜓中做到这一点吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T23:10:05.760

有一个“显示解析错误和异常中断”切换（立即在下拉列表的左侧选择当前要显示的脚本）。

# xmlhttprequest - xmlhttp 不工作

> ID：11467842
> 
> 赞同：0
> 
> 时间：2012-07-13T09:35:31.203
> 
> 标签：xmlhttprequest

我不确定我做错了什么。我把它放在身体里，在 div 旁边`myDiv`，它似乎没有运行，所以我不知道我做错了什么。

```
<script type="text/javascript" language="javascript">
  var xmlhttp;
  if (window.XMLHttpRequest) {
  // code for IE7+, Firefox, Chrome, Opera, Safari
    xmlhttp=new XMLHttpRequest();
  } else {
  // code for IE6, IE5
    xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }
  xmlhttp.open("GET","http://www.example.com/test.php",false);
  xmlhttp.send();
  document.getElementById("myDiv").innerHTML=xmlhttp.responseText;
</script>
<div id="myDiv"></div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T09:40:01.153

该脚本在呈现 div“myDiv”之前运行。把它们换...

```
<div id="myDiv"></div>

<script type="text/javascript" language="javascript">
var xmlhttp;
if (window.XMLHttpRequest) {
// code for IE7+, Firefox, Chrome, Opera, Safari
  xmlhttp=new XMLHttpRequest();
} else {
// code for IE6, IE5
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
}
xmlhttp.open("GET","http://www.example.com/test.php",false);
xmlhttp.send();
document.getElementById("myDiv").innerHTML=xmlhttp.responseText; 
```

# php - WHOIS 域可用性搜索

> ID：11467843
> 
> 赞同：0
> 
> 时间：2012-07-13T09:35:39.953
> 
> 标签：php, search, whois, domain-name

我遇到了以下域检查功能，但似乎无法正常工作。

```
function domain_checker($domain){

$extension = explode(".",$domainname);  
$extension = $extension[1];  
switch($extension)  
{  
    case "com": $server = "whois.verisign-grs.com"; break;  
    case "net": $server = "whois.verisign-grs.com"; break;  
    case "org": $server = "whois.pir.org"; break;  
    case "info": $server = "whois.afilias.net"; break;  
    case "biz": $server = "whois.biz"; break;  
    case "name": $server = "whois.nic.name"; break;  
    default: return "Given Extension not supported"; exit();  
}  
// connecting to the whois server.  
$handle = fsockopen($server, 43);  
if (!$handle)  
    return false; // connectin failure   

//asking the server  
fwrite($handle, $domainname."\r\n");  

// getting response  
$response = '';  
while (!feof($handle))  
    $response .= fgets($handle, 1024);  

fclose($handle);  
//checking if domain is available or not  
if($extension=="com" || $extension=="net" || $extension=="name")  
{  
    if(stripos($response, 'No match') === FALSE )  
        return $domainname." is not Available!";  
    else  
        return $domainname. " is Available!";  
}  
else  
{  
    if(stripos($response, "NOT FOUND") === FALSE)  
        return $domainname. " is not Available!";  
    else  
        return $domainname. " is Available!";  
} 
```

}

我不断收到以下错误：

> 警告：fsockopen() [function.fsockopen]：无法连接到 whois.verisign-grs.com:43

帮助表示赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T02:36:23.463

我可以验证克里斯蒂安发布的链接是否有效。您只需要先设置您的 COOKIE。它现在在其位于此处的主要站点上有一个验证码。

您必须让您的用户在那里填写验证码并存储 cookie 的结果。

[http://www.verisigninc.com/en_US/products-and-services/domain-name-services/whois/index.xhtml](http://www.verisigninc.com/en_US/products-and-services/domain-name-services/whois/index.xhtml)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T09:44:47.230

正如@phpdev 所写：*从错误消息中，很明显 whois.verisign-grs.com 不接受端口 43 上的连接。您可能必须找到另一个 whois 服务器来传递您的请求。*

我会找到威瑞信的解决方案：

```
http://www.verisigninc.com/cgi-bin/whois?type=domain&eswhois_nic=google.com&whois_tld=com 
```

参数：`eswhois_nic`是域名，`whois_tld`是*com*或*net*，基于域 然后只需使用 curl 或 file_get_contents 获取请求，瞧；）

# c# - DataTable 唯一约束 - 引发事件

> ID：11467844
> 
> 赞同：0
> 
> 时间：2012-07-13T09:35:42.093
> 
> 标签：c#, wpf, wpfdatagrid

我创建了一个数据表，其中第一列设置为唯一。当我插入新行或修改行时，只要违反唯一约束，就会出现一点“！” 出现在左侧。但是，我希望我的表要么引发事件，要么引发异常。

那可能吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T09:40:15.653

我认为您可以使用 RowChanged 事件。在处理程序中，您可以获得 e.Row.HasErrors。这应该足够了。

# ruby - Ruby 'Range.last' 没有给出最后一个值。为什么？

> ID：11467846
> 
> 赞同：9
> 
> 时间：2012-07-13T09:36:01.690
> 
> 标签：ruby, range

在 ruby​​ Range 对象中使用三点表示法时，我得到这个：

```
(0...5).each{|n| p n}
0
1
2
3
4 
```

当我使用“最后”方法时，我得到：

```
(0...5).last
 => 5 
```

我本来预计 4

这是一个错误吗？或者我对 Range 对象的概念有什么不明白的地方？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-13T09:51:56.900

这是设计使然。Ruby 2.0 文档[更具体](http://www.ruby-doc.org/core-2.0/Range.html#method-i-last)：

> 请注意，没有参数`last`将返回定义范围结束的对象，即使`exclude_end?`is `true`。
> 
> ```
> (10..20).last      #=> 20
> (10...20).last     #=> 20
> (10..20).last(3)   #=> [18, 19, 20]
> (10...20).last(3)  #=> [17, 18, 19] 
> ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T19:05:51.007

正如 Stefan 所回答的那样，您观察到的行为是预期的并记录在案。

如果您想获得将由范围枚举的最后一个元素而不必枚举整个范围，您可以使用[`Enumerable#reverse_each`](http://www.ruby-doc.org/core-1.9.3/Enumerable.html#method-i-reverse_each)

```
irb> (0...5).reverse_each.first
=> 4 
```

# c# - 不允许移动到下一个字段的字段验证器

> ID：11467848
> 
> 赞同：0
> 
> 时间：2012-07-13T09:36:14.387
> 
> 标签：c#, javascript, jquery, validation

我需要一个字段验证器，如果出现错误，它不允许用户移动到下一个字段。我尝试了允许移动到下一个字段的 asp 验证器和 jquery 验证器。

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T09:43:48.290

```
$('.class').focusout(function(){
    if (!isValid($(this).value)){
        $(this).focus();
    } 
});

function isValid(inp){
    return inp !== undefined && inp.length !== 0;
} 
```

​</p>

见这里的例子：http: [//jsfiddle.net/albertjan/vhzL4/](http://jsfiddle.net/albertjan/vhzL4/)

如果文本框为空：http: [//jsfiddle.net/albertjan/vhzL4/6/](http://jsfiddle.net/albertjan/vhzL4/6/)

已知 $('.class').focus() 不适用于 ff，请参阅：[Javascript focus and select not working in FF](https://stackoverflow.com/questions/2562723/javascript-focus-and-select-not-working-in-ff)

# html - 的奇怪行为？ 我有这个：

|  

&#124; Version notes &#124; Instructions &#124;
&#124; TEXT &#124; TEXT &#124;

所以基本上我在一个 div 里面有一个表，它有一个标题行和一个第二行，其中有 2 个单元格，其中包含应该有一个滚动条的 div，以防 TEXT 太大而无法放入其中。只要 TEXT 适合，它就可以完美地工作并且看起来像我想要的那样，但是如果它不适合它，那么表格只会伸展自己并变得比包含它的 div 更大。如果我给单元格内的 div 一个固定的高度：TEXT它会创建滚动条并按应有的方式滚动，但是我希望它具有表格单元格的大小，那么如何使其填充整个表格单元格但避免拉伸整个表格？ 用于图像下载的建筑设计 我正在从远程服务器实现优化的图像下载机制。 我想到了两种不同的方法。 1\. 创建一个新线程，并在该线程中以异步方式下载所有图像。 2.创建线程以下载每个图像。假设我要下载 50 个图像，那么将有 50 个线程来下载这些图像。 在设计和优化方面哪种方法更好？ 谢谢， 吉姆。 htmlcsshtml-table 4 1 回答 1 This answer is useful 0 您需要在div包含table. 编辑：根据MDN： <percentage>是相对于包含块的高度计算的。如果未明确指定包含块的高度，则该值计算为auto。根元素（例如）上的百分比高度是相对于视口的。 因此，如果要使用百分比高度，则需要确保其所有父级（直到一个具有固定高度的父级）具有非自动高度。 于 2012-07-13T09:40:17.213 回答 Related 1 php - PHP 动态表格宽度仅在 chrome（不是 Firefox、Internet Explorer 或 Safari）中正确显示。为什么是这样？ 5 javascript - SQL 查询生成器 Javascript UI 0 sharepoint - 面向合作伙伴的 SharePoint 2013 FBA 4 pycharm - pycharm：更改文档字体大小 1 bash - `xdotool` 可以替换 `expect` 脚本，等待字符串出现在活动窗口中吗？ 1 haskell - 在 ghci 中查看特定类型的 Typeclass 定义 1 java - 井字游戏中引发的异常 1 google-analytics - 使用谷歌分析跟踪数千个网站 1 ruby-on-rails - 如何让 form_for(@example) 在我的 Collections 中工作#show when example belongs_to Collection 2 jquery - .on 不触发动态列表 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：11467850
> 
> 赞同：1
> 
> 时间：
> 
> 标签：html, css, html-table

我有这个：

```
<div style="position:absolute;top:275px;right:0px;left:0px;bottom:84px;padding:10px;">
    <table border="1" style="width:100%;height:100%;">
        <tr>
            <th style="height:16px;width:50%;">Version notes</th>
            <th style="height:16px;width:50%;">Instructions</th>
        </tr>
        <tr>
            <td>
                <div style="overflow-y:scroll;overflow-x:hidden;height:100%;">
                    <div style="padding:16px;word-wrap:break-word;">
                        TEXT
                    </div>
                </div>
            </td>
            <td>
                <div style="overflow-y:scroll;overflow-x:hidden;height:100%;">
                    <div style="padding:16px;word-wrap:break-word;">
                        TEXT
                    </div>
                </div>
            </td>
        </tr>
    </table>
</div> 
```

所以基本上我在一个 div 里面有一个表，它有一个标题行和一个第二行，其中有 2 个单元格，其中包含应该有一个滚动条的 div，以防 TEXT 太大而无法放入其中。只要 TEXT 适合，它就可以完美地工作并且看起来像我想要的那样，但是如果它不适合它，那么表格只会伸展自己并变得比包含它的 div 更大。如果我给单元格内的 div 一个固定的高度：

```
<div style="overflow-y:scroll;overflow-x:hidden;height:500px;">
    <div style="padding:16px;word-wrap:break-word;">
        TEXT
    </div>
</div> 
```

它会创建滚动条并按应有的方式滚动，但是我希望它具有表格单元格的大小，那么如何使其填充整个表格单元格但避免拉伸整个表格？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T09:40:17.213

您需要在`div`包含`table`.

**编辑：**根据[MDN](https://developer.mozilla.org/en/CSS/height)：

> `<percentage>`是相对于包含块的高度计算的。如果未明确指定包含块的高度，则该值计算为`auto`。根元素（例如`<html>`）上的百分比高度是相对于视口的。

因此，如果要使用百分比高度，则需要确保其所有父级（直到一个具有固定高度的父级）具有非自动高度。</percentage>  |

# iphone - 用于图像下载的建筑设计

> ID：11467851
> 
> 赞同：0
> 
> 时间：2012-07-13T09:36:20.870
> 
> 标签：iphone, ios4, architecture

我正在从远程服务器实现优化的图像下载机制。

我想到了两种不同的方法。

1\. 创建一个新线程，并在该线程中以异步方式下载所有图像。
2.创建线程以下载每个图像。假设我要下载 50 个图像，那么将有 50 个线程来下载这些图像。

在设计和优化方面哪种方法更好？

谢谢，
吉姆。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T09:54:17.383

您的两种解决方案都有缺陷。

1）只有一个线程意味着您一次只下载一个图像？这似乎效率低下

2）出于同样的原因，一次下载是一个坏主意，同时下载 50 个图像是一个糟糕的性能主意，并且会减慢一切。还要考虑下载数据的线程对系统来说是资源昂贵的（网络 I/O、磁盘 I/O 等）。

我可以建议不要重新发明轮子并使用[NSOperationQueue](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/NSOperationQueue_class/Reference/Reference.html) 这是队列的可可/可可触摸实现，这意味着您可以添加多少操作（在您的情况下，操作是图像下载）但您可以指定最大并发操作数（通过`maxConcurrentOperationCount`属性）。

NSOperationQueue 处理所有多线程的东西，从 iOS 4 开始它使用 GCD 来执行操作。

# wcf - 序列化时 WCF 回调发生错误

> ID：11467852
> 
> 赞同：0
> 
> 时间：2012-07-13T09:36:23.370
> 
> 标签：wcf, callback, datacontract

我正在编写一个 Azure WCF 应用程序。

定义如下的数据合约：
`[DataContract]
public class UserInfo
{
[DataMember]
public string UserName { get; set; }
[DataMember]
public int UserID { get; set; }
[DataMember]
public bool IsOnline { get; set; }
}`

然后我在我的 WCF 服务中定义了一个数据契约：

`[DataContract(Name="UserInfo")]
public class ServiceUserInfo : UserInfo
{
[IgnoreDataMember]
public ICallback Callback { get; set; }
}`

然后在服务合约中，会回调给客户端，方法如下

`private void NoticeUsers(UserInfo currentuser)
{
var users = UserManager.GetAllActiveUsers();
foreach (var user in users)
{
if (user.UserName == currentuser.UserName)
continue;
user.Callback.UpdateUserList(currentuser);
}
}`

实际上，我将 ServiceUserInfo 对象作为参数传递给 NoticeUsers 方法。然后会出现如下错误：

尝试序列化参数[http://tempuri.org/:user](http://tempuri.org/:user)时出错。InnerException 消息是 'Type 'WCFServiceWebRole.ServiceUserInfo' 与数据协定名称 'UserInfo:http://schemas.datacontract.org/2004/07/WCFServiceWebRole' 不是预期的。考虑使用 DataContractResolver 或将任何静态未知的类型添加到已知类型列表中 - 例如，通过使用 KnownTypeAttribute 属性或将它们添加到传递给 DataContractSerializer 的已知类型列表中。有关更多详细信息，请参阅 InnerException。

我无法找到此问题的解决方案。请帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T02:18:55.527

我想我找到了问题的根本原因，但我不知道为什么。

该问题是由 Service 合同的 Namespace 属性引起的。

我没有设置我的服务合约接口和数据合约接口的命名空间。我以为它会默认设置，不会造成任何问题。但实际上这个线程的问题是由 Namespace 属性引起的。我为服务合同和数据合同设置了一个命名空间属性，当然是相同的命名空间，然后它就起作用了。问题再也不会发生了。

但是，我不知道为什么会导致这个问题。如果我不设置命名空间，它将是“ [http://tempuri.org](http://tempuri.org) ”的默认值，不是吗？

# c# - 绑定动画播放不止一次

> ID：11467853
> 
> 赞同：0
> 
> 时间：2012-07-13T09:36:37.937
> 
> 标签：c#, wpf, mvvm, propertychanged

我使用了 MVVM，我遇到了需要一个按钮来触发动画的情况。所以我为它设置了 EventTrigger 并运行了这个动画：

```
<DoubleAnimation 
    (...)
    From="{Binding ElementName=Browser, Path=DataContext.TooltipPosition}"
To="150"/> 
```

问题是我不希望该动画播放不止一次。因此，在第一次按下按钮后，它应该从 0 变为 150，并且对于所有成功的点击，它不应该是可见的，所以它应该从 150 变为 150。
在我的 ViewModel 中，我有一个属性 TooltipPosition 设置为 0。我创建了一个命令我的按钮将此属性设置为 150 并调用。

```
PropertyChanged(this, new PropertyChangedEventArgs("TooltipPosition"). 
```

问题是这个属性在第二次点击后改变了，所以我可以看到这个动画播放了两次。

我该如何解决？

-编辑-

是的，很抱歉，我没有包括所有信息。我正在尝试为很多对象设置动画，其中只有一个是可见的。因此，如果用户在 GUI 中更改对象的选择，那么动画应该再次从 0 开始到 150。很明显，如果元素 A 是动画的，然后是 B，然后是 A，那么这个动画将不可见。

-edit2-

我为 TextBlock 的宽度设置动画。问题是我有多个（绑定数据）TextBlocks，并且在任何时候都应该只有一个或一个都不可见。因此，我绑定了每个 TextBlock 的 Width 属性并进行了动画处理，因此基本上所有这些属性都受此动画的影响。但是其中只有一个可能是可见的，所以它可以解决问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T09:46:03.383

您可以忽略该`From`值。

请参阅[DoubleAnimation.To中的](http://msdn.microsoft.com/en-us/library/system.windows.media.animation.doubleanimation.to)*备注*部分：

> 动画从动画属性的基值或前一个动画的输出值进展到 To 属性指定的值

# sql - SQL Server 2008 实例连接问题

> ID：11467854
> 
> 赞同：0
> 
> 时间：2012-07-13T09:36:42.827
> 
> 标签：sql, sql-server, sql-server-2008

我的问题如下：

我在 Windows Server 2008 上安装了 SQL Server 2008 R2。我尝试使用默认实例名称 (MSSQLSERVER) 和命名实例。安装成功，没有错误。现在的问题是：

当我尝试使用 Management Studio 连接到我的 SQL Server 时，当我将“SERVER1\MSSQLSERVER”写为服务器地址时，它无法连接到这个实例。当我仅在 serveradress 字段中写入“SERVER1”时，它可以工作。

注意：我总是尝试以 SA 身份连接。密码是对的。不知道有没有关系...

但是我必须能够连接到“SERVER1\MSSQLSERVER”，因为当我想通过 C# 连接到没有实例的服务器时总是会出错。

有人可以告诉我我在哪里弄错了吗？

编辑：

C# 代码如下所示：

```
sqlConnection = "data source=(local);persist security info=True;User ID=sa;Password=12345;initial catalog=BBKat"

SqlConnection sqlCon = new SqlConnection( sqlConnection );

SqlCommand    sqlCmd = new SqlCommand( sqlCmdString, sqlCon ); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T09:44:53.707

`(local)`尝试在服务器名称中使用单个。和 C# web config connectionString 中的一样`Data Source=(local);Initial Catalog=YOUR_DB;Integrated Security=True`

**编辑**

将连接字符串更改为：

```
data source=(local);Integrated Security=False;User ID=sa;Password=12345;initial catalog=BBKat 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T10:30:32.123

我想你一点都没错。连接时不要编写默认实例名称。如上所述，您可以创建别名。

# r - 使用 ROCR 包的 R 中的 ROC 曲线

> ID：11467855
> 
> 赞同：22
> 
> 时间：2012-07-13T09:36:45.447
> 
> 标签：r, roc

有人可以解释一下如何用 ROCR 绘制 ROC 曲线。我知道我应该首先运行：

```
prediction(predictions, labels, label.ordering = NULL) 
```

接着：

```
performance(prediction.obj, measure, x.measure="cutoff", ...) 
```

我只是不清楚预测和标签是什么意思。我用 ctree 和 cforest 创建了一个模型，我希望他们两个的 ROC 曲线最后进行比较。在我的例子中，类属性是 y_n，我想它应该用于标签。但是预测呢？以下是我所做的步骤（数据集名称= bank_part）：

```
pred<-cforest(y_n~.,bank_part)
tablebank<-table(predict(pred),bank_part$y_n)
prediction(tablebank, bank_part$y_n) 
```

运行最后一行后，我收到此错误：

```
Error in prediction(tablebank, bank_part$y_n) : 
Number of cross-validation runs must be equal for predictions and labels. 
```

提前致谢！

这是另一个例子：我有训练数据集（bank_training）和测试数据集（bank_testing），我运行了一个随机森林，如下所示：

```
bankrf<-randomForest(y~., bank_training, mtry=4, ntree=2,    
keep.forest=TRUE,importance=TRUE) 
bankrf.pred<-predict(bankrf, bank_testing, type='response') 
```

现在 bankrf.pred 是一个带有标签 c=("0", "1") 的因子对象。不过，我不知道如何绘制 ROC，因为我陷入了预测部分。这就是我所做的

```
library(ROCR) 
pred<-prediction(bankrf.pred$y, bank_testing$c(0,1) 
```

但这仍然不正确，因为我收到错误消息

```
Error in bankrf.pred$y_n : $ operator is invalid for atomic vectors 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-07-13T12:29:37.137

预测是您对分类的连续预测，标签是每个变量的二元事实。

所以像下面这样的东西应该可以工作：

```
> pred <- prediction(c(0.1,.5,.3,.8,.9,.4,.9,.5), c(0,0,0,1,1,1,1,1))
> perf <- performance(pred, "tpr", "fpr")
> plot(perf) 
```

生成 ROC。

编辑：在问题中包含示例可重现代码可能对您有所帮助（我很难解释您的评论）。

这里没有新代码，但是......这是我经常用于绘制 ROC 的函数：

```
 plotROC <- function(truth, predicted, ...){
   pred <- prediction(abs(predicted), truth)    
   perf <- performance(pred,"tpr","fpr")

   plot(perf, ...)
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-13T15:07:29.110

`ROCR`就像@Jeff 说的那样，您的预测对于's 的`prediction`功能需要是连续的。`require(randomForest); ?predict.randomForest`表明，默认情况下，`predict.randomForest`返回原始尺度的预测（类标签，分类），而`predict.randomForest(..., type = 'prob')`返回每个类的概率。所以：

```
require(ROCR)
data(iris)
iris$setosa <- factor(1*(iris$Species == 'setosa'))
iris.rf <- randomForest(setosa ~ ., data=iris[,-5])
summary(predict(iris.rf, iris[,-5]))
summary(iris.preds <- predict(iris.rf, iris[,-5], type = 'prob'))
preds <- iris.preds[,2]
plot(performance(prediction(preds, iris$setosa), 'tpr', 'fpr')) 
```

给你你想要的。不同的分类包需要不同的命令来获取预测概率——有时是`predict(..., type='probs')`、`predict(..., type='prob')[,2]`等，因此只需查看您正在调用的每个函数的帮助文件。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-02-03T19:46:45.357

您可以这样做：

将我们的数据保存在 csv 文件中，("data_file.csv") 但您可能需要在此处提供完整路径。在该文件中有列标题，在这里我将使用“default_flag”、“var1”、“var2”、“var3”，其中 default_flag 为 0 或 1，其他变量具有任何值。代码：

```
rm(list=ls())
df <- read.csv("data_file.csv") #use the full path if needed
mylogit <- glm(default_flag ~  var1 + var2 + var3, family = "binomial" , data = df)

summary(mylogit)
library(ROCR)

df$score<-predict.glm(mylogit, type="response" )
pred<-prediction(df$score,df$default_flag)
perf<-performance(pred,"tpr", "fpr")
plot(perf)
auc<- performance(pred,"auc")
auc 
```

请注意， df$score 会给你默认的概率。如果您想使用此 logit（相同的回归系数）在另一个数据集 df2 中进行测试以进行交叉验证，请使用

```
df2 <- read.csv("data_file2.csv")

df2$score<-predict.glm(mylogit,newdata=df2, type="response" )

pred<-prediction(df2$score,df2$default_flag)
perf<-performance(pred,"tpr", "fpr")
plot(perf)
auc<- performance(pred,"auc")
auc 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-02-10T19:56:02.893

正如其他人指出的那样，问题在于 ROCR 中的预测需要数值。如果您要从`randomForest`（作为 ROCR 中预测的第一个参数）插入预测，则该预测需要由`type='prob'`而不是生成`type='response'`，这是默认值。或者，您可以获取`type='response'`结果并转换为数字（也就是说，如果您的回答是 0/1）。但是当你绘制它时，ROCR 会在 ROC 曲线上生成一个有意义的点。为了在 ROC 曲线上有很多点，您确实需要与每个预测相关的概率 - 即用于`type='prob'`生成预测。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-13T13:54:22.190

问题可能是您想在多次运行中运行预测函数，例如交叉验证。

在这种情况下，对于预测（预测，标签，label.ordering = NULL）函数，“预测”和“标签”变量的类应该是列表或矩阵。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-09-29T17:43:31.567

试试这个：

```
library(ROCR)
pred<-ROCR::prediction(bankrf.pred$y, bank_testing$c(0,1) 
```

存在的功能预测是许多包。您应该明确指定 (ROCR::) 以使用 ROCR 中的那个。这个对我有用。

# c# - WCF - 远程服务器返回意外响应：（405）方法不允许

> ID：11467856
> 
> 赞同：0
> 
> 时间：2012-07-13T09:36:45.760
> 
> 标签：c#, wcf, wsdl

我正在为 WCF 服务使用外部 WSDL 文件。

```
<wsdl:service n<wsdl:service name="CommonService">
    <wsdl:port name="BasicHttpBinding_ICommonService" binding="tns:BasicHttpBinding_ICommonService">
      <soap:address location="http://localhost:1371/CommonService.wsdl"/>
    </wsdl:port>
</wsdl:service> 
```

当我向该服务添加服务引用时，我在客户端中收到一个错误，即不允许使用方法。

但是当我从 WSDL 文件中删除上面的代码并用它替换它时，它工作正常。有什么问题。谁能找出这背后的原因。

```
<wsdl:service name="CommonService">
    <wsdl:port name="BasicHttpBinding_ICommonService" binding="tns:BasicHttpBinding_ICommonService">
      <soap:address location="http://localhost:1371/Service.svc"/>
    </wsdl:port>
</wsdl:service> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T09:44:20.273

我认为这是您没有在 IIS 中公开 .wsdl 扩展名的处理程序的事实。或者你没有办法映射那个扩展。通常，WCF 服务中的 wsdl 位于`.svc?wsdl`.

对不起，如果我说的很明显，但原因似乎是从这里改变位置：

`http://localhost:1371/CommonService.wsdl`

对此：

`http://localhost:1371/Service.svc`

# php - 无法从 mysql 检索 utf8 编码值

> ID：11467861
> 
> 赞同：2
> 
> 时间：2012-07-13T09:37:16.960
> 
> 标签：php, mysql, utf-8

我有这样的问题，先看看mysql表=>

```
CREATE TABLE IF NOT EXISTS users(
id int(4) NOT NULL AUTO_INCREMENT PRIMARY KEY,
name VARCHAR(40) CHARSET utf8 COLLATE 'utf8_unicode_ci' NOT NULL,
surname VARCHAR(40) CHARSET utf8 COLLATE 'utf8_unicode_ci' NOT NULL,
); 
```

它正在成功存储数据，但是当我尝试将此信息检索到我的 .php 文件（编码也是 utf8）时，它仍然显示问号（?????），为什么？我该如何解决？

**更新**

我做得不好的事情。所以我有 2 个 php 文件，一个是 classA.php 文件，我在其中定义了从数据库中检索信息的类，并且我已将此文件 (classA.php) 包含在我想要查看的 default.php 文件中数据。我有上面写的完全相同的表，我正在写

```
header('Content-Type: text/html; charset=UTF-8'); 
```

在 default.php 的第一行，但它仍然不起作用，感谢您的建议:))

**第二次更新**

这个脚本我在 classA.php 文件中，它的编码是默认的，就像 default.php 文件编码一样。我刚刚在第一行添加了 default.php 文件

```
header("Content-Type: text/html; charset=UTF-8"); 
```

但它仍然不起作用。

**第三次更新**

sql =>

```
create table ok(
id int(2) not null auto_increment primary key,
name varchar(20) charset utf8 not null); 
```

和php文件

```
<?php
 header('Content-Type: text/html; charset=UTF-8');
 ?>
 <!DOCTYPE html>
 <html>
 <head>
        <title>hello</title>
          <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    </head>
     <body>

     <?php
        $con = mysqli_connect("host","user","pass","db");

       if (mysqli_connect_errno()==0){
       if ($r = mysqli_query($con,"SELECT * FROM ok")){
    mysqli_set_charset($con,"utf8");
    while ($d = mysqli_fetch_assoc($r)){
        echo $d['name'] . "<br>";
           }
           }
          }

            if (isset($con)){
               mysqli_close($con);
             }
             ?>

               </body>
               </html> 
```

我已在 ok 表中插入 this=>

```
insert into ok(name) values("one"),("ერთი"),("two"),("ორი"); 
```

PS。特殊字符是格鲁吉亚语:)

它的结果是英文字符很好，格鲁吉亚人带问号:(

无论如何它都不起作用:(

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-13T09:48:09.867

**PHP 文件是 UTF-8**的事实并不一定意味着来自/去往**数据库**的数据也是 UTF-8。

你没有提到你正在使用哪个扩展，但是：

*   对于**mysql**使用`mysql_set_charset($link,'utf8');`

*   对于**mysqli**使用`mysqli->set_charset('utf8')`或与上面相同`mysqli_`

*   对于**PDO**，连接时包含`charset:utf8`在**DSN**字符串中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-13T09:40:38.293

声明 HTML utf8 编码：

```
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"> 
```

和/或在标头中传输编码：

```
header('Content-Type: text/html; charset=UTF-8'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-13T09:41:27.820

尝试

```
htmlentities($row['name'],ENT_QUOTES); 
```

看**[`htmlentities`](http://php.net/manual/en/function.htmlentities.php)**

# ruby-on-rails - 如何在图像轨道上放置链接 3.2

> ID：11467862
> 
> 赞同：0
> 
> 时间：2012-07-13T09:37:21.217
> 
> 标签：ruby-on-rails, image, hyperlink, ruby-on-rails-3.2

我的应用程序标题中有一个图像，但我想将该图像作为链接，并且我想以 Rails 方式执行此操作，因为我知道如何使用 html/php 执行此操作。

有这样的选择吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T09:56:05.367

您可以简单地使用这样的代码
`<%= link_to (image_tag "image_name.jpg", :title => 'Image_Title'), :action => :action_name %>`

# c# - 如何删除字符串C#之间的一些文本

> ID：11467863
> 
> 赞同：1
> 
> 时间：2012-07-13T09:37:24.577
> 
> 标签：c#, regex, lookahead, lookbehind

我有这样的文字：

> LINE\r\n **5\r\n11DA3\r\n330\r\n2\r\n100** \r\nAcDbEntity\r\n 8\r\n0-FD\r\n 6\r\nHIDDEN\r\n100

看一下粗体字。我想替换 5\r\n 和 \r\n100 之间的文本。我试过这段代码：

```
result[line] = Regex.Replace(result[line], @"((?<=5\r\n)(\S+?)(?=\r\n100))", "0"); 
```

但它不起作用。我的代码有问题吗？我确定 (\S+?) 是问题所在。有什么办法解决吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T10:15:44.787

您可以使用以下代码：

```
string type_1 = "LINE\r\n 5\r\n11DA3\r\n330\r\n2\r\n100\r\nAcDbEntity\r\n 8\r\n0-FD\r\n 6\r\nHIDDEN\r\n100";            
string output = Regex.Replace (
    type_1,
    "5\r\n(.*?)\r\n100",
    "5\r\n0\r\n100",
    RegexOptions.Singleline|RegexOptions.Compiled
);
Console.WriteLine (output); 
```

它输出：

```
LINE
 5
0
100,1
AcDbEntity
 8
0-FD
 6
HIDDEN
100 
```

它会将所有遇到的文本**5\r\n - ANYTHING HERE - \r\n100 更改**为**5\r\n0\r\n100**。如果您想要更具体的更改，请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T09:52:47.943

如果可移动内容是静态的，您可以使用

```
s.Replace("11DA3\r\n330\r\n2" ,100); 
```

甚至您可以尝试使用 string.indexof

# java - 在循环中重新运行java应用程序的奇怪行为

> ID：11467865
> 
> 赞同：0
> 
> 时间：2012-07-13T09:37:28.117
> 
> 标签：java, multithreading, unix, resources, daemon

Unix守护进程运行一个脚本循环，该脚本调用一个java程序：java {java_args} myClas.jar

java程序是具有多线程的重型程序。

问题很奇怪：第一次执行按预期工作。但是第二次执行卡在某个地方，我找不到原因（很难调试）。

是否有可能在第一次执行完成后仍有未清理的资源或执行此执行留下的线程？

如果是，是否可以在过程完成后立即清理并杀死所有内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T09:39:55.083

如果通过资源，你的意思是线程，那么没有。当虚拟机关闭时，堆上的所有东西、所有线程、对象和监视器都会被处理掉。但是，如果您依赖文件的存在/不存在来锁定或类似的东西，则可能会出现死锁。另外，当您启动第二个进程时，第一个进程是否可能仍在运行？

如果您的 java 进程在第二次运行时被卡住，您可以附加[`jvisualvm`](http://docs.oracle.com/javase/6/docs/technotes/tools/share/jvisualvm.html)到它并且应该能够找出它卡在哪里。

# java - 合并文件时BufferOutputStream写入零字节

> ID：11467867
> 
> 赞同：0
> 
> 时间：2012-07-13T09:37:51.287
> 
> 标签：java, io, fileinputstream, bufferedinputstream, bufferedoutputstream

我正在尝试将*n*个文件合并为单个文件。但是我的功能出现了奇怪的行为。*该函数在n*秒内被调用*x*次。假设我有 100 个文件要合并，每秒我调用 5 个文件并合并它。在下一秒，数量翻倍为 10，但从 1-5 是与之前相同的文件，其余的是新文件。它工作正常，但在某些时候，它给出零字节或有时给出正确的大小。

 *您能帮我找出下面函数中的错误吗？

```
public void mergeFile(list<String> fileList, int x) {
    int count = 0;
    BufferedOutputStream out = null;
    try {
        out = new BufferedOutputStream(new FileOutputStream("Test.doc"));
        for (String file : fileList) {
            InputStream in = new BufferedInputStream(new FileInputStream(file));
            byte[] buff = new byte[1024];
            in.read(buff);
            out.write(buff);
            in.close();
            count++;
            if (count == x) {
                break;
            }
        }
        out.flush();
        out.close();
    } catch (IOException e) {
        e.printStackTrace();
    }
} 
```

*对不起我的英语不好

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T10:29:06.490

> in.read(buff);

检查[Javadoc](http://docs.oracle.com/javase/7/docs/api/java/io/FileInputStream.html#read%28byte[]%29)。该方法不能保证填充缓冲区。它返回一个值，告诉您它读取了多少字节。您应该*使用*它，在这种情况下，您应该在决定要写入多少字节（如果有的话）时使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-08T23:51:40.513

您没有读取完整的文件，您从每个文件**中最多**只能读取1024 个字节。您需要循环读取，只要它返回数据（或使用类似[Files.copy()](http://docs.oracle.com/javase/8/docs/api/java/nio/file/Files.html#copy-java.nio.file.Path-java.io.OutputStream-)的东西。

顺便说一句：如果您使用大缓冲区进行复制，则不需要 BufferedOutputStream。

```
public void mergeFile(list<String> fileList, int x) throws IOException {
    try (OutputStream out = new FileOutputStream("Test.doc");) {
        int count=0;
        for (String file : fileList) {
            Files.copy(new File(file).toPath(), out);
            count++;
            if (count == x) {
                break;
            }
        }
    }
} 
```

如果您关闭，您也不需要 flush()。我在这里使用“try-with-resource”，所以我不需要明确地关闭它。最好传播异常。*

# web-services - symfony 2 + 肥皂

> ID：11467871
> 
> 赞同：0
> 
> 时间：2012-07-13T09:38:07.880
> 
> 标签：web-services, soap, symfony

我尝试用 symfony 2 做一个肥皂服务，结果我有这个：

```
 <trace>at Symfony\Component\HttpKernel\Debug\ErrorHandler->handle('2', 'SoapFault::SoapFault() expects at least 2 parameters, 1 given', '/var/www/Symfony/src/Acme/TxBundle/Controller/DefaultController.php', '39', array('ref' => '333', 'stockinfos' => null))  in  line</trace> 
```

我的功能：

```
 public function getInformationStockAction($ref)
{
      $stockinfos = $this->container->get('doctrine')->getRepository('TxBundle:LlxProduct')->findOneBy(array('ref'=>$ref))
  ;

     if (!$stockinfos)
    {
       throw new \SoapFault(sprintf('No warehouse found for the given productRef : "%s" ', $ref ));

         }

       return $this->container->get('besimple.soap.response')->setReturnValue($stockinfos); 
```

}

有人有想法吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T11:28:12.510

正如[文档](http://uk3.php.net/soapfault)所`SoapFault`建议的那样，您需要在创建异常时提供 2 个参数：

```
$faultCode = "yourCode"; // must be a string

throw new \SoapFault(
    $faultCodeHere, // This is the parameter you're missing :-)
    sprintf('No warehouse found for the given productRef : "%s" ', $ref)
); 
```

# versioning - 在单独项目中使用版本控制工具（svn、git）

> ID：11467872
> 
> 赞同：0
> 
> 时间：2012-07-13T09:38:11.167
> 
> 标签：versioning

你有没有在一个单独的项目中体验过版本控制系统的使用？有用吗？你有什么经验？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T02:16:24.217

即使您没有将它用于协作目的，使用版本控制也可以让您自由地进行实验，而不必担心破坏现有代码。你可以在一个新的分支中尝试一个实验，如果分支没有成功，可以将其丢弃，或者如果你想保留它，可以将它合并到你的主线中。

拥有一种众所周知的保存备份副本的方法也很有用（推送到存储在外部驱动器或网络上的存储库）。

# jasper-reports - cvc-complex-type.3.2.2 属性“uuid”不允许出现在元素“jasperreport”中

> ID：11467874
> 
> 赞同：16
> 
> 时间：2012-07-13T09:38:13.740
> 
> 标签：jasper-reports, ireport

下载了适用于 Linux 的 iReport-4.6.0，当通过 File->New... 菜单创建新报告时，新报告不会显示在预览中，而是显示错误消息`cvc-complex-type.3.2.2 attribute 'uuid' is not allowed to appear in element 'jasperreport'`。

即使在选项中选择兼容性 4.5.0 也会出现相同的错误消息。打开由 iReport-4.6.0 (Windows) 的其他用户生成的报告文件时也会出现相同的错误消息。

报告文件的架构为`http://jasperreports.sourceforge.net/xsd/jasperreport.xsd`，但此架构文件未提及任何`uuid`.

可能是什么问题呢？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-12-04T13:55:39.320

在 iReport Designer 中，您可以在选项窗口中将兼容模式更改为您喜欢的版本。对我来说，如果我将兼容性设置为 jasperreport 3.5.1，当我再次保存报告时，uuid 都会被删除。

问候

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2012-07-13T18:51:58.123

我找到了答案：

我用 notepad++ 打开了 JRXML 文件，做了一个“搜索和替换” `uuid="\w*-\w*-\w*-\w*-\w*"`，并选择了正则表达式，使用空字符串，然后所有出现的这个错误标签都被删除了。

为我工作。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-05-27T14:55:57.413

Open report in the notpad++ and just only remove uuid and it's number.. After You will compile proper and generate report.... I have same problem and I solveby this way..

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-01T10:05:03.860

我不使用 Linux。但是您使用 iReport Designer-xx 创建报表。您在项目中添加相同版本的 jasperreport(jasperreport-XX) jar。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-10-25T11:59:09.127

我只是建议我的同事也遇到了这个问题：

```
sed -i 's/ uuid="[^"]*"//g' $(find * -name \*.jrxml) 
```

我通常不使用[sed(1)](https://www.mirbsd.org/man1/sed)`-i`但她在 GNU/Linux 上，所以这不是问题。解决这个问题的更专业的 Unix 方法是：

```
find * -name \*.jrxml -print0 | while IFS= read -d '' -r file; do
    ed -s "$file" <<-'EOF'
        1,$g/ uuid="[^"]*"/s///g
        w
        q
    EOF
done 
```

（这四个空格是制表符，否则不起作用，你需要[mksh(1)](https://www.mirbsd.org/mksh.htm)或另一个可以读取 NUL 分隔输入的 shell。）

你也可以使用 Perl：

```
find * -name \*.jrxml -print0 | xargs -0 perl -pi -e 's/ uuid="[^"]*"//g' 
```

或者类似的东西，无论如何，取决于你的需要，你的[xargs(1)](https://www.mirbsd.org/man1/xargs)等等；-)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2014-02-26T12:17:12.513

如果您使用的是 ireport 4.6 或更高版本，解决 uuid 问题的最佳方法是使用类似的 ireport 4.6 或更高版本，因为 uuid 属性是从 4.​​6 版新引入的。否则如果你手动从jrxml文件中删除uuid，下次编译时uuid会再次被放到对应的标签中...

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-02-28T19:06:22.587

我有一个很好的简单解决方案。

我正在使用 Jasper Studio 5.5 支持有关 Jasper Server 4.5 的报告

1.  在 Jasper Studio 中，删除服务器引用（如果有）。
2.  重新创建连接。创建服务器连接时，转到“高级设置 > Jasper 服务器库版本”并从列表中选择您的服务器版本。
3.  打开您的报告，检查 uuid 标签是否已删除，部署

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-02-05T11:38:28.013

这个问题发生在我的案例中，因为重复的类路径条目，更具体地说，来自旧版本的 jasperreports-core-renderer.jar 和 jasperreports-extensions.jar 的条目（在选项 -> 类路径中）。

这些重复的条目是在 iReport 升级期间导入设置后出现的。显然这是由于 iReport 中的一个错误导致旧版本没有从类路径中删除。

因此，要么避免从以前的版本导入设置，要么手动删除过时的 .jar。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2020-09-29T16:34:30.057

严格来说，此修复仅适用于 Jaspersoft Studio，但此问题是搜索`attribute 'uuid' is not allowed`错误时的第一个结果。

对于 Jasper 服务器版本 <= 4.5.0 和 Jaspersoft Studio 6.11：

1.  在 Project Explorer 中右键单击 jrxml 文件 -> Properties -> Jaspersoft Studio -> Compatibility -> Source .jrxml Version -> JasperReports 4.5.0
2.  在 Repository Explorer 中右键单击服务器 -> 编辑 JasperReports 服务器连接 -> 高级设置 -> JasperReports 库版本 -> JasperReports 4.5.0

如果您使用 Jaspersoft Studio 发布到服务器，则第二步很重要。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2020-05-08T18:21:48.107

您始终可以将 Compability 设置为旧版本，它对我有用。

> 工具 > 选项 > iReport > 常规 > 兼容性

[![在此处输入图像描述](../Images/62c89db26a123218013e254e82a4b384.png)](https://i.stack.imgur.com/5K3Rp.png)

在此之后转到 xaml 并更改任何内容并再次保存然后运行报告以删除所有 uuid 。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2019-07-15T08:12:54.093

就我而言，我刚刚删除`uuid="63f04b11-4b7e-4cf1-99b5-a5ec6db799d6"` 了我生成的示例报告以测试它是否完美运行

所以你可以尝试删除`uuid=" "`

# html - 我可以将文件对象保存到本地存储中吗？

> ID：11467882
> 
> 赞同：0
> 
> 时间：2012-07-13T09:38:46.413
> 
> 标签：html, file, upload, local-storage, filereader

我可以这样做吗？喜欢：

```
var zFile = files.target.files[0]

localStorage.setItem("file", JSON.stringify(zFile));

var nFile = JSON.parse(localStorage['file']); 
```

在此之后我不能在 FileReader 中使用文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T09:43:06.797

不，先读取文件，然后将内容保存到本地存储中。

# google-chrome - Google Chrome 21 不支持 --disable-web-security 命令行开关

> ID：11467886
> 
> 赞同：5
> 
> 时间：2012-07-13T09:38:52.650
> 
> 标签：google-chrome, webdriver, selenium-chromedriver

自 Google Chrome 浏览器版本 21.* 和 Selenium Chrome 驱动程序版本 22.* 的最新版本以来，我们一直用于测试不同域的 iframe 的特殊命令行开关“--disable-web-security”不再存在支持（已弃用）。是否有任何解决方法可以自动化我们在 Chrome 浏览器中位于不同域中的框架？

我们现有的功能自动化框架完全依赖于这个开关（--disable-web-security）。响应将不胜感激。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-04T23:55:45.480

您不需要解决方法，标志仍然有效，新的是警告。

我刚刚使用 jQuery 执行了一个测试，将 AJAX 请求发送到另一个域，它使用命令行标志工作，但不使用它时没有。

不过，最好有办法禁用“黄色信息栏”。

（我正在运行 Chrome 21.0.1180.60）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-06T09:35:56.250

是的。原来的问题是即使在你关闭 chrome 之后......还有一个 chrome.exe 进程正在运行。使用 taskmanager 杀死它，即使在版本 28 中，该标志也可以工作

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-13T01:13:16.487

在使用该标志之前，您可能还必须终止在后台运行的 Chrome.exe 的所有运行实例。

# sharepoint - 使用来自其他站点的 sharepoint 2010 列表

> ID：11467887
> 
> 赞同：1
> 
> 时间：2012-07-13T09:38:54.310
> 
> 标签：sharepoint, sharepoint-2010

我正在使用 Sharepoint 2010，我想在一个新站点中创建一个列表，其中包含来自其他站点的列表。

就像全球概览一样。

我们的问题是我们正在使用多个带有 Ticketsystems 的站点。所以我想创建一个全局列表，其中包含来自所有其他站点的所有票证。（当然，如果他们获得了 Ticketsystem 的权利）。

有没有办法做到这一点？

问候

亚历克斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T13:26:10.870

您可以通过以下步骤在 SP2010 中轻松创建票务系统： 1\. 为票务系统创建内容类型 2\. 将 itemreceiver 添加到内容类型 3\. 为票务系统创建列表 4\. 添加内容类型绑定以绑定内容类型到列表 5\. 将列表部署到 rootweb 以及所有子站点，例如通过 web 模板添加列表

您添加的 itemreceiver 应该是 itemadding，它会将新创建的票证放置在子站点中，也位于 rootweb 级别。这将允许您拥有子站点上的所有票证和根站点级别的一个包含所有内容的列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T10:40:09.877

据我所知，没有通用方法可以将另一个列表中的引用混合到新列表中。

您可以将您的票务系统中的列表项集成并复制到“中央票务系统”中，或者创建一个自定义控件，从所有票务系统中读取并以您喜欢的方式显示它们。

无论哪种方式都有定制开发。

首先查看数据视图 Web 部件

*   [http://office.microsoft.com/en-us/sharepoint-designer-help/display-data-from-multiple-sources-in-a-single-data-view-HA010099144.aspx](http://office.microsoft.com/en-us/sharepoint-designer-help/display-data-from-multiple-sources-in-a-single-data-view-HA010099144.aspx)
*   [http://www.learningsharepoint.com/2010/10/16/create-dataview-webpart-in-sharepoint-2010-tutorial/](http://www.learningsharepoint.com/2010/10/16/create-dataview-webpart-in-sharepoint-2010-tutorial/)

还有内容查询 Web 部件

*   [http://msdn.microsoft.com/en-us/library/ff650512.aspx](http://msdn.microsoft.com/en-us/library/ff650512.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T16:02:55.447

[**SPSiteDataQuery**](http://msdn.microsoft.com/en-us/library/microsoft.sharepoint.spsitedataquery.aspx)类允许您对单个网站集中的所有列表/库运行 CAML 查询。将它与 SPGridView 控件绑定以获得类似 ListView 的用户界面非常简单。

在内部，这就是内容查询 Web 部件的用户，因此它有许多相同的限制。

这是一个合理的[例子](http://www.alexbruett.net/?p=119)

# php - SQL 语法错误，请检查第 1 行“0”附近使用的正确语法

> ID：11467889
> 
> 赞同：1
> 
> 时间：2012-07-13T09:38:57.883
> 
> 标签：php, mysql

我遇到了标题中提到的错误，这是我的PHP文件中的代码，我试图重新查询我的查询，但未能纠正错误，谁能告诉我为什么会出现这种错误，有没有办法我的表格错误是不是不正确？我看过一些类似的帖子，但我从这些帖子中知道问题应该是我的查询，但我不知道如何更改它。所以我可以请你帮忙告诉我我的查询问题在哪里，这绝对可以帮助我弄清楚我的概念。

```
$query = "SELECT * 
    FROM Tech AS T, Client AS C, Site AS S, Log AS L 
    WHERE T.TechID=L.TechID, C.ClientID=L.ClientID, S.SiteID=L.SiteID";
if($sort=="Tech")
   $query += "ORDER BY T.TechName ASC, L.Time DSC";
else if($sort=="Client")
   $query += "ORDER BY C.ClientName ASC, L.Time DSC";
$result = mysql_query($query) or die('Error! ' . mysql_error());; 
print "Real-Time check in/check out<br>";
print "<table><th><td>Tech</td><td>Client</td><td>Site</td>";
print "<td>Date and Time</td><td>Type</td></th>";
while($row = mysql_fetch_array($result)){
print "<tr><td>".$row['T.TechName']."</td>";
print "<td>".$row['C.ClientName']."</td>";
print "<td>".$row['S.SiteName']."</td>";
print "<td>".$row['L.Time']."</td>";
print "<td>".$row['L.Type']."</td></tr>";
}
print "</table>"; 
```

以下是错误消息：

> 错误！您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的“0”附近使用正确的语法

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-13T09:42:34.483

看不到零可能来自哪里..

但是在您将 ORDER BY 附加到查询的行中，您缺少一个空格。

要么在你原来的末尾追加一个空格，要么在你`$query`的开头追加一个空格`$query +=`

`DESC`同样对于下降它不应该`DSC`

+= 也应该是 .= 对于 PHP

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-13T09:43:54.677

AND 而不是逗号，

之前的空间`ORDER`

`.=`代替`+=`

```
$query = "SELECT * 
    FROM Tech AS T, Client AS C, Site AS S, Log AS L 
    WHERE T.TechID=L.TechID AND C.ClientID=L.ClientID AND S.SiteID=L.SiteID";
if($sort=="Tech")
   $query .= " ORDER BY T.TechName ASC, L.Time DESC";
else if($sort=="Client")
   $query .= " ORDER BY C.ClientName ASC, L.Time DESC"; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-13T09:41:53.250

你的问题在`WHERE`条款中。您需要使用`AND`构造而不是逗号：

```
SELECT * 
FROM Tech AS T, Client AS C, Site AS S, Log AS L 
WHERE T.TechID=L.TechID AND C.ClientID=L.ClientID AND S.SiteID=L.SiteID 
```

然而，更好的解决方案是使用连接：

```
SELECT * 
FROM Tech AS T
JOIN Client AS C on T.TechID=L.TechID
JOIN Site AS S on C.ClientID=L.ClientID
JOIN Log AS L on S.SiteID=L.SiteID 
```

**编辑：**你得到`near 0 at line 1`是因为你使用`+`尝试连接字符串而不是`.`运算符。当您使用 时`+`，php 将这两个部分都转换为数字并将它们相加。由于您的字符串不联系号码，因此两者都转换为 0，因此结果为`0`. 因此，您的最终 SQL 很简单`0`。你可以检查一下`print_r($query);`

**EDIT2：**`ORDER BY`感谢 Gerald Vesluis 注意到子句开头缺少空格。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-13T09:43:43.593

[`+`并`+=`](http://www.php.net/manual/en/language.operators.arithmetic.php)添加数字，[`.`并`.=`](http://www.php.net/manual/en/language.operators.string.php)附加字符串。

结果数组中的字段名不包括表名。您应该参考 (eg) `$row['TechName']`，而不是`$row['T.TechName']`.

### 无关

混合 DB 访问和输出会产生过高的耦合。理想情况下，每个都将在单独的层中处理。您可以使用 PDO 或（在 PHP 5.4 及更高版本中）mysqli 开始此过程，并使用`foreach`结果进行迭代，而不是显式调用属于 DB 结果类接口的任何方法。这种魔法是可能的，因为[`PDOStatement`](http://php.net/PDOStatement)并且（从 PHP 5.4 开始）[`mysqli_result`](http://php.net/mysqli_result)支持该[`Traversable`](http://php.net/Traversable)接口。

[`<br/>`](http://brainstormsandraves.com/articles/semantics/structure/#br)很少有[语义](http://webstyleguide.com/wsg3/5-site-structure/2-semantic-markup.html)；使用更合适的东西，例如标题元素，或将样式应用于现有元素。

`<th>`不是`<td>`;的有效父级 `<tr>`应该是父级并且`<th>`应该用来*代替* `<td>`.

虽然当分支由单个语句组成时括号是可选的，但将它们排除在外通常被认为是不好的风格，因为它有时会导致错误。

虽然`else if`在功能上等同于`elseif`，但它由运行时处理为`else`以 an`if`为主体：

```
if (...) {
} else {
    if (...) {
    }
} 
```

`elseif`是首选形式。

如果有任何机会`$sort`可以保存非字符串，`==`则可以评估为`TRUE`偶数 ( `0 == 'Tech'`)。使用[严格比较 ( `===`)](http://php.net/===)确保将值作为字符串进行比较。

应用各种建议的更改，您将得到如下结果：

```
# Future improvement: abstract each section into methods that are part of separate layers

# Database access
$statement = 'SELECT T.TechName, C.ClientName, S.SiteName, L.Time, L.Type 
    FROM Log AS L
      JOIN Tech AS T ON T.TechID=L.TechID
      JOIN Client AS C ON C.ClientID=L.ClientID
      JOIN Site AS S ON S.SiteID=L.SiteID';

if ($sort === 'Tech') {
   $query .= ' ORDER BY T.TechName ASC, L.Time DESC';
} elseif ($sort === 'Client') {
   $query .= ' ORDER BY C.ClientName ASC, L.Time DESC';
}

try {
    $data = $db->query($statement);
} catch (PDOException $exc) {
    $data = array();
    # handle error appropriately: inform user that there was an internal error. Log the actual error and possibly notify the dev team.
    ...
}

# Output/User interface
$fields = array('TechName' => 'Tech', 'ClientName' => 'Client', 'SiteName' => 'Site', 'Time' => 'Date and Time', 'Type' => 'Type');
if ($data) {
    ?>
    <h3>Real-Time check in/check out</h3>
    <table>
      <thead>
        <tr><th><?php echo implode('</th><th>', $fields) ?></th></tr>
      </thead>
      <tbody>
        <?php foreach ($data as $row) { ?>
          <tr>
            <?php foreach ($fields as $field => $label) { ?>
              <td><?php echo $row[$field] ?></td>
            <?php } ?>
          </tr>
        <?php } ?>
      </tbody>
    </table>
    <?php
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-13T09:44:35.013

我认为您需要在 $query 的末尾放置一个空格，因为您将 order by 语句附加到它上面而没有任何空格。

所以它看起来像这样：

```
L.SiteIDORDERBY 
```

而不是这样：

```
L.SiteID ORDER BY 
```

# google-apps-script - 如果文本包含“Quartal”或“Year”，则执行某些操作 - google docs

> ID：11467892
> 
> 赞同：0
> 
> 时间：2012-07-13T09:39:04.700
> 
> 标签：google-apps-script, google-sheets, google-docs

我正在处理谷歌文档表，目前正在尝试自动化大部分数据输入。如果在单元格中找到文本，我想执行操作。

看看这张表： [https ://docs.google.com/spreadsheet/ccc?key=0AlfftUoJOAjCdGp0Z2stbmhncGs0bFE5ZU43dkFLVEE#gid=0](https://docs.google.com/spreadsheet/ccc?key=0AlfftUoJOAjCdGp0Z2stbmhncGs0bFE5ZU43dkFLVEE#gid=0)

**我有这些场景：**

1.  每月 -> 以数字表示。伪代码：if number。
2.  每季度 -> 以“季度”表示。伪代码：如果文本包含“Quarter”
3.  每年 -> 由“每年”表示。伪代码：如果文本包含“每年”

如何检查 Google 文档中的三个场景？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T20:12:01.200

尝试这个：

```
function foo(){
var range = SpreadsheetApp.openById("your_spreadsheet_id").getSheetByName("Sheet1").getRange("A:A");
var values = range.getValues();
for(var i in values){
  if(values[i][0].match("Monthly")!=null){
     //cell contains "Monthly". Do something 
  } 
  if(values[i][0].match("Quarterly")!=null){
     //cell contains "Quarterly". Do something 
  }
  if(values[i][0].match("Yearly")!=null){
     //cell contains "Yearly". Do something 
  }
} 
```

这将扫描 A 列中的所有单元格，并根据其内容调用不同的函数。

# javascript - Uploadify 在上传操作中传递数据

> ID：11467895
> 
> 赞同：1
> 
> 时间：2012-07-13T09:39:12.633
> 
> 标签：javascript, variables, uploadify

我真的需要有人帮忙。这是我的上传代码：

```
$('#file_upload').uploadify({
    'swf' : 'assets/js/uploadify.swf',
    'uploader' : 'uploadify.php',
    'method' : 'post',
    'auto' : false,
    'multi' : false,
    'uploadLimit' : 1,
    'buttonText' : 'Select Image',
    'onUploadStart' : function(file) {
        var $recordId = [PASSED RECORD ID HERE];
        $("#file_upload").uploadify("settings", "formData", {'recordId' : $recordId});
    }
}); 
```

我想要做的是在单击按钮而不是自动上传文件时运行它。我有一个像下面这样的函数，当单击按钮时会调用它。

```
function updateRecord() {
    $('#file_upload').uploadify('upload');
} 
```

这一切都很好，但我需要做的是在运行 updateRecord 函数时，我需要将 $recordId 传递给上传的 formData。

有人可以告诉我如何从我的 updateRecord 函数中传递 formData 吗？

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T10:21:31.990

我对其进行了排序，我能够在调用上传方法之前更新设置：

```
function updateRecord() {
    $("#file_upload").uploadify("settings", "formData", {'recordId' : data});
    $('#file_upload').uploadify('upload');
} 
```

谢谢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T10:00:28.497

这是我的代码，这是一个工作示例：

```
<script type="text/javascript">
var uploadify_sel = $('#uploadify');
function submitUploadify(){

    var title = $('#form_name').val();
    var main = $('#main1').is(':checked') ? 1 : 0;
    uploadify_sel.uploadifySettings(
        'scriptData', {
            cookieID: '0daf9d4f8a44fcdc9c2aabc46c831203',
            type: 'investments',
            investment_id: '31',
            title: title,
            main: main
        }
    );
    uploadify_sel.uploadifyUpload();
}
var error = null;
$(document).ready(function() {
    uploadify_sel.uploadify({
        uploader : 'http://localhost:8080/project/assets/flash/admin/uploadify.swf',
        script : 'http://localhost:8080/project/ldmadmin/investments_gallery_ajax',
        cancelImg : 'http://localhost:8080/project/assets/gfx/admin/cancel.png',
        wmode : 'transparent',
        method : 'post',
        multi : true,
        removeCompleted : false,
        folder : 'uploads',
        auto : false,
        fileDataName: 'uploadify',
        fileDesc : 'Images (.jpg, .jpeg, .png, .gif)',
        fileExt : '*.jpg;*.jpeg;*.png;*.gif',
        buttonText: 'Choose Image File',
        scriptData : {},
        onError : function(a, b, c, d){
                                        },
        onComplete : function(event, ID, fileObj, response, data){
                                        },
        onAllComplete : function(event, ID, fileObj, response, data){
            if(error == null){
                window.location = window.location;
            }
        }
    });
});
</script> 
```

提交按钮调用函数 submitUploadify() 为：

```
<button name="btn" class="btn" onclick="submitUploadify(); return false;">Submit form</button> 
```

只需从中提取代码片段即可使其正常工作。这是使用 Uploadify v2.1.4 完成的

# c# - 在asp.net web api中使用什么路由从对象列表中删除项目

> ID：11467897
> 
> 赞同：1
> 
> 时间：2012-07-13T09:39:15.743
> 
> 标签：c#, asp.net, rest, asp.net-web-api

我在服务器上有一个名为 foo 的实体，它有一个分配给它的条形列表。我希望能够从 foo.

但是，我不想更新客户端并发送整个 foo，因为 foo 是一个大对象，所以如果我只是从 foo 中删除一个条形，那么每次都会发送很多 Json。

我只想发送 bar 然后将其从 foo 实体中删除。

我有我的课

```
public class Foo
{
    public Foo()
    {
        Bars = new Collection<Bar>();    
    }

    public ICollection<Bar> Bars { get; set; }
} 
```

我已经绘制了路线图

```
routes.MapHttpRoute(
    name: "fooBarRoute",
    routeTemplate: "api/foo/{fooId}/bar/{barId}",
    defaults: new { controller = "Bar", action = "RemoveBarFromFoo" }
    ); 
```

通过 javascript (coffeescript) 发送请求

```
$.ajax(
url: api/foo/1/bar/1,
data: jsonData,
cache: false,
type: 'XXX',
.... 
```

我只是不确定要使用什么路线，我试过 PUT 但它不喜欢它，我可能做错了。我不确定在这种情况下应该使用什么路线。

```
public class BarController : ApiController
{
    public void RemoveBarFromFoo(int fooId, Bar bar)
    {    
        // get the foo from the db and then remove the bar from the list and save
    }
} 
```

我的问题：我应该使用什么途径来实现这个目标？或者，如果我以错误的方式解决这个问题，我应该怎么做？

谢谢，尼尔

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T09:47:20.007

您使用的 HTTP 谓词必须是 DELETE 并且调用的操作名称`Delete`必须遵循标准 RESTful 约定。此外，此操作不应将 Bar 对象作为参数。只是`barId`因为这就是客户端发送的全部内容：

```
public class BarController : ApiController
{
    public void Delete(int fooId, int barId)
    {    
        // get the foo from the db and then remove the bar from the list and save
    }
} 
```

你打电话给：

```
$.ajax({
    url: 'api/foo/1/bar/1',
    type: 'DELETE',
    success: function(result) {

    }
}); 
```

现在 yuo 可以从您的路由定义中删除该操作，因为它是 HTTP 动词，它指示应该调用哪个操作：

```
routes.MapHttpRoute(
    name: "fooBarRoute",
    routeTemplate: "api/foo/{fooId}/bar/{barId}",
    defaults: new { controller = "Bar" }
); 
```

# antlr - ANTLR 输入与语法匹配但程序无法实现

> ID：11467901
> 
> 赞同：0
> 
> 时间：2012-07-13T09:39:43.833
> 
> 标签：antlr, antlr3, secs

我正在为 SML 消息编写解析器。输入：包含许多 SML 消息的文件。输出：带有已识别元素的消息队列。这是我的代码：

```
grammar SML;
options {language = Java;}
@header {
  package SECSParser;
 import SECSParser.SMLLexer;
}

@lexer::header {
  package SECSParser;
}

@parser::members {
  public static void main(String[] args) throws Exception {
    String file = "C:\\Messages.sml";
    SMLLexer lexer = new SMLLexer(new ANTLRFileStream(file));
    SMLParser parser = new SMLParser(new CommonTokenStream(lexer));
    parser.program();
  }
}

@lexer::members {
  public static String place = "end";
  public static void setPlace(String text) { SMLLexer.place = text; }
  public static String getPlace() {return SMLLexer.place;}
  public static boolean placeIsType() {
    return (SMLLexer.place.equals("wb")
    | SMLLexer.place.equals("value")
    | SMLLexer.place.equals("type"));
  }
  public static boolean placeIsStreamFunction() {
    return (SMLLexer.place.equals("sf") | SMLLexer.place.equals("name"));
  }
  public static boolean placeIsWaitBit() {
    return (SMLLexer.place.equals("sf") | SMLLexer.place.equals("wb"));
  }
  public boolean ahead() {
    if ((input.LA(-2) == 'S') || (input.LA(-2) == 's')) {
      return false;
    }
    return true;
  }
}

program:(message)* EOF;
message:{System.out.println("MESSAGE     : \n");}
  {SMLLexer.setPlace("name");}
  name ws* ':' ws* {SMLLexer.setPlace("sf");} str_func 
  (ws+ {SMLLexer.setPlace("wb");} waitbit)? (ws+ item)? '.' 
   ws* {SMLLexer.setPlace("end");};

name:LETTER(LETTER| NUMBER| '_')* {System.out.println("NAME     : " + $text + "\n");};
fragment STR:~('\'' | '\"');
NUMBER:'0'..'9';
LETTER:(('A'..'Z') | ('a'..'z'));
str_func: (('S' | 's') stream ('F' | 'f') function);
stream: NUMBER+ {System.out.println("STREAM     : " + $text + "\n");};
function: NUMBER+ {System.out.println("FUNCTION     : " + $text + "\n");};
waitbit: {SMLLexer.placeIsWaitBit()}?=>('W' | 'w') {
  System.out.println("WAITBIT     : " + $text + "\n");
};
item:{System.out.println("ITEM     : \n");} ws* SITEM ws* {SMLLexer.setPlace("type");}
  TYPE ( (ws* '[' number_item ']')? ws+ {SMLLexer.setPlace("value");}value)? 
  ws* EITEM ws* COMMENT? ws*;
SITEM: '<' {SMLLexer.setPlace("type");};
EITEM: '>';
TYPE:{SMLLexer.placeIsType()}?=>( 'A' | 'a' | 'L'| 'l'| 'BINARY'| 'binary'| 'BOOLEAN'| 'boolean'| 'JIS'| 'jis'| 'I8'| 'i8' | 'I1'| 'i1'| 'I2'| 'i2' | 'I4'| 'i4'| 'F4'| 'f4'| 'F8'| 'f8'| 'U8'| 'u8' | 'U1'| 'u1'| 'U2' | 'u2'| 'U4'| 'u4' ){System.out.println("TYPE     : " + $text + "\n");};
number_item: NUMBER+ {System.out.println("NUMBER ITEM     : " + $text + "\n");};
value:(item ws*)+| (string ws*)+| ((LETTER| NUMBER)ws*)+;
COMMENT:('/*' (options {greedy=false;}: .)* '*/') {$channel = HIDDEN;};
string:('\'' STR? '\'')| ('\"' STR? '\"') {System.out.println("VALUE     : " + $text + "\n");};
ANY:.;
ws:(' '| '\t'| '\r'| '\n'| '\f'); 
```

这是我的文件“Message.sml”

```
Are_You_There1l : S1F4 W.
On_Line_Data:S1F4 W
<L[2]
    <U4 13>
    <U4 7>
>.
W1Are_You_There: S1F4 W. 
```

结果是：

```
MESSAGE     : 
NAME     : Are_You_There1l
STREAM     : 1
FUNCTION     : 4
WAITBIT     : W
MESSAGE     : 
NAME     : On_Line_Data
STREAM     : 1
FUNCTION     : 4
WAITBIT     : W
ITEM     : 
MESSAGE     : 
NAME     : L
TYPE     : U4
TYPE     : U4
MESSAGE     : 
NAME     : Are_You_There
STREAM     : 1
FUNCTION     : 4
WAITBIT     : W

**C:\Messages.sml line 4:1 mismatched input 'L' expecting TYPE
C:\Messages.sml line 4:2 mismatched input '[' expecting ':'** 
```

不知道为什么我的程序不能实现 TYPE:'L'?? 我尝试使用 TYPE'U4'，它可以工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T16:02:48.907

有太多事情出错了，无法为您的问题提供答案。即使您的问题得到了回答，也不会有任何帮助，因为语法包含太多错误。我建议把它扔掉并重新开始。但在重新开始之前，请阅读一些[ANTLR 教程](https://stackoverflow.com/questions/278480/antlr-tutorials)或获取一份[The Definitive ANTLR Reference](http://pragprog.com/book/tpantlr/the-definitive-antlr-reference)的副本。

一些问题：

*   您似乎不知道解析器和词法分析器规则之间的区别。你的一些解析器规则应该是词法分析器规则，你的一些词法分析器规则应该是真正的解析器规则；
*   您在解析器规则中使用片段规则：这永远不会起作用，因为片段规则本身永远不会变成标记。分片规则只能在词法分析器规则（或其他分片规则）中使用；
*   您正在从解析器设置（静态）词法分析器变量：您不能这样做！解析器自己缓冲令牌会导致你的逻辑出现严重错误。词法分析器和解析器之间有严格的分离：词法分析器只生成标记，而不受解析器的任何干扰！词法分析是一个单独的过程。如果您确实需要，请选择 ANTLR 以外的其他内容（Google 用于“无扫描仪解析”、“PEG”和/或“packrat”）。这个问题很可能是为什么在您的特定情况下`'L'`没有被标记为 a ；`TYPE`
*   您正在使用文字标记，例如`('W' | 'w')`，但也将 a`LETTER`作为词法分析器规则。但是，单个`'w'`or`'W'`现在永远不会被标记为`LETTER`since。在解析器规则中定义文字标记或多或少与以下操作相同：

    `W : 'w' | 'W';`
    `LETTER : 'a'..'z' | 'A'..'Z'; // this will never match a 'w' or 'W' now!`

    这也与 ANTLR 的词法分析器独立于解析器运行这一事实有关。

再说一遍：在继续 IMO 之前，您确实需要掌握基础知识。

祝你好运！

# oracle - Oracle：使用枚举/二进制值来提高性能

> ID：11467907
> 
> 赞同：0
> 
> 时间：2012-07-13T09:40:02.827
> 
> 标签：oracle, indexing

我经常要处理可能只假设几个值的数据。我认为 Oracle 应该使用 16 个字节来保存 VARCHAR2(16) （在索引或表上）。

我可以使用 FK，但这意味着 Oracle 检查另一个表上是否存在值。我更喜欢只使用计算和 RAM。而且它的可读性较差。

如果我用数字或枚举或 CHAR(1) 替换 VARCHAR2(16)，我只会浪费 1 到 4 个字节。当我有 400 万行时，它可能有助于避免浪费空间。它会对性能产生重大影响吗？

我还想象一个场景，可以在我的索引中的 4° 位置使用字段（它不是选择性的。我想我只会使用一些）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T11:17:46.663

在我看来，您正在优化错误的东西。

假设您的表中有 400 万行，并且您设法通过使用 NUMBER 或 CHAR(1) 字段平均每行节省 10 个字节的存储空间，这更难理解但占用的存储空间更少。您节省了整整 40 兆字节！呜呼！！！以当前的存储价格计算，这 40 兆字节……完全无关紧要。

你说的是用便士衡量的储蓄。某人试图找出您的 ENUM、CHAR(1) 字段的含义或 NUMBER 字段的正确解释所花费的时间以美元为单位。例如，如果承包商**每年**需要一分钟来理解压缩字段（“嗯……'O' 状态是指打开还是缺货……或者是零……零又意味着什么？”），以每小时 120 美元的咨询费率计算，您已经花费了更多 (2 美元) 来尝试找出压缩字段，而不是存储在存储上。

您的建议在 1970 年代（我记得很清楚，谢谢）那个存储昂贵且不充足的时代非常有意义 - 您保存了所有可能的字节，压缩字段，使用了 2 位数的年份（记住那些，任何人？ :-)，并使用了所有可以节省空间的技巧。现在的存储很便宜而且很丰富。我有可用的网络驱动器，以 TERABYTES 为单位！花费开发人员的时间来节省相对微量的存储空间在“试图解释结果所花费的时间”方面是浪费的，这导致“所涉及的时间花费了美元”。尽可能清楚地拼写出事情，并使事情尽可能容易解释。YMMV。

# php - 奇怪的行为：（0 ==“字符串”）是真的| switch(0){} 给出第一种情况 'case "a": '

> ID：11467914
> 
> 赞同：5
> 
> 时间：2012-07-13T09:40:21.907
> 
> 标签：php

[这](http://codepad.org/f8q6zNrF)怎么可能发生？

```
var_dump(0=="some string"); // yields true, why? 
```

```
switch(0) {
  case "a":
    echo "a"; // <-- we get here, why?
    break;  

  case "b":
    echo "b";
    break;   

  default:
    echo "def";
    break;
} 
```

* * *

根据这个

```
0=="some string"
0==(int)"some string"
0==0
true 
```

这也合乎逻辑：

```
 0=="some string"
(string)0=="some string"
      "0"=="some string"
       false 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-13T09:56:42.473

### 太长; 没读过

^(在这篇相当长的帖子中总结一下；从一种类型到另一种类型的隐式转换会发生，如果您不希望这种情况发生，请使用更严格`===`或显式的强制转换。)

^(包括这两者的例子可以在这篇文章的后面找到。)

* * *

^(***有关类型杂耍的*进一步阅读可以在手册的相关部分中找到，位于[此处](http://php.net/language.types.type-juggling)。**)

* * *

### 世界末日会不会是PHP解释器在骗我？

并非如此，尽管乍一看这可能出乎意料，但它实际上是该语言的一个功能（*类型杂耍*），并且在其他情况下通常非常有用。

当比较不同类型的对象时，PHP 解释器需要找到一个共同点，如果它们是不同的类型，它自然会隐式地尝试将一个对象转换为另一个对象。

在这种情况下，它将尝试将字符串*“string”*转换为数字值。

以下行等同于您在问题中的内容：

```
if (0 == intval ("string")) 
```

* * *

### 嗯，等等.. erhm，什么！？

由于从*“字符串”*到数值的转换实际上是不可能的，因此隐式转换将产生`0`（由语言指定）。

> 它将转换为 int 的字符串，因为这是 PHP 委员会决定的。
> 
> 这主要是因为这种方式的隐式转换将有助于进行数学运算。
> 
> 与其他方式相比，期望这种行为更为常见。

我们知道compare `0`to`0`应该 compare `true`，这正是正在发生的事情。以下内容等同于您在问题中的内容，但进一步解释事情会更加冗长。

```
function equal_ ($lhs, $rhs) {
  if (gettype ($lhs) == 'integer')
    $rhs = intval($rhs);

  /* ... */

  return $lhs === $rhs;
}

if (equal_ (0, "string")) {

} 
```

* * *

### 但是，嘿..嘿，等一下！

*“当我使用我的开关时，我什至没有调用任何比较运算符，那个例子是怎么回事？”*

你没有，但解释器的内部会在执行你的*switch-statement*时。

要解决此问题，您将需要显式转换您正在搜索的指针或用作标签的值，以便它们属于同一类型。

您之前的代码片段可以编写如下，以便进行更严格的比较。

```
switch((string)0) {
  case "a":
    echo "a";
    break;  

  case "b":
    echo "b";
    break;   

  default:
    echo "def";
    break;
} 
```

* * *

### 如果我不想使用这个*“功能”*，我该怎么办？

自 PHP4 起有更严格的比较运算符；`===`.

这将不允许对其中一个操作数进行隐式转换，而是首先检查操作数是否属于同一类型 - 如果不是；它会返回假。

只有当它们是同一类型时，它才会真正比较两者，下面的函数在很多方面相当于 using `===`。

```
function strict_equal_ ($lhs, $rhs) {
  if (gettype ($lhs) != gettype ($rhs))
    return false;

  return $lhs == $rhs;
}

if (strict_equal_ (0, "string"))
  echo "True";
else
  echo "False"; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-13T09:43:34.360

它被称为[“类型杂耍”](http://php.net/language.types.type-juggling)，它是一种语言功能（据我所知，每种松散类型的语言）。比较运算符需要两个相同类型的值。如果没有相同的类型，PHP 会尝试将两者都转换为最常见的类型，即`int`此处。这表示

```
0=="some string"
0==0
true 
```

# android - 四元数旋转不能正常工作

> ID：11467919
> 
> 赞同：5
> 
> 时间：2012-07-13T09:40:31.380
> 
> 标签：android, opengl-es

在 OpenGL ES 1 for android 中，我有一个由 27 个较小的立方体组成的 Rubic 立方体。我想要导致特定小立方体正好在视点前面的旋转。所以我需要两个向量。一个是从对象的原点到特定立方体的向量。另一个是从原点到视点的向量。然后它们的叉积给我旋转轴，点积给我角度。

我将 (0,0,1)（从原点到世界坐标中的视点的向量）转换为对象坐标。这是代码：

```
 matrixGrabber.getCurrentModelView(gl);
    temporaryMatrix.set(matrixGrabber.mModelView);

    inputVector[0] = 0f; 
    inputVector[1] = 0f;
    inputVector[2] = 1f;
    inputVector[3] = 1f;
    Matrix.multiplyMV(resultVector, 0, temporaryMatrix.InvertMatrix(), 0, inputVector,0);
    resultVector[0]/=resultVector[3];
    resultVector[1]/=resultVector[3];
    resultVector[2]/=resultVector[3];

    inputVector = ..... // appropriate vector due to user-selection 

    axis = Vector.normalized(Vector.crossProduct(Vector.normalized(inputVector), Vector.normalized(resultVector)));
    degree = (float)Math.toDegrees(Math.acos(Vector.dot(Vector.normalized(inputVector), Vector.normalized(resultVector)))); 
```

我使用两个四元数进行旋转。每次用户选择一个动作时，应该发生一个旋转。这是代码：

```
 Quaternion currentRotation = new Quaternion();
    Quaternion temporaryRotation = new Quaternion();
    .
    .
    .
     currentRotation = (currentRotation).mulLeft(temporaryRotation.set(axis, degree));
     currentRotation.toMatrix(matrix);
     gl.glMatrixMode(GL10.GL_MODELVIEW);
     gl.glMultMatrixf(matrix, 0); 
```

现在的问题是它在第一次旋转时效果很好。无论第一次轮换是什么。它运作良好，但对于下一次旋转，它似乎得到了错误的轴和度数。

例如，如果坐标系是

*   X 右 (1,0,0)
*   Y向上 (0,1,0)
*   Z-in (0,0,1)

然后第一次绕 X 90 度逆时针 (CCW) 旋转产生

*   X'-右 (1,0,0)
*   Y'-in (0,0,1)
*   Z'-向下 (0,-1,0)

和围绕 Z 90 度 CCW 的第二次旋转产生

*   X'-in (0,1,0)
*   Y'-左 (-1,0,0)
*   Z'-向下 (0,-1,0)

但我希望

*   X-up (0,1,0)
*   Y-in (0,0,1)
*   Z-right(1,0,0)

我认为问题在于 resultVector（我使用的从原点到视点的第二个向量）没有正确转换。任何人都知道如何将世界坐标转换为对象坐标？任何人都知道当物体旋转时我们如何确定物体坐标？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2016-08-18T17:17:14.283

昨天我决定编写 Rubic Cube 拼图，因为我过去尝试过的任何游戏都让我感到非常不舒服，最后我终于有了一些心情/时间来自己编写代码。当我完成它时，这里是我的见解：

1.  **魔方表示法**

    我不认为四元数是一个好的选择。相反，我更喜欢：

    *   [4x4 均匀变换矩阵](https://stackoverflow.com/a/28084380/2521214)

    所以我最终得到了`3*3*3=27`变换矩阵的列表加上一个额外的整个立方体旋转。在起始状态下，所有子立方体都有单位旋转部分，并且原点设置为覆盖所有组合`{ -1 , 0 ,+1 }`以填充整个魔方（每个子立方体网格的大小`1.0`以 为中心`(0,0,0)`）

    [![轴](../Images/950717b652554b1e5463414a2f25ea4f.png)](https://i.stack.imgur.com/cTMHH.png)

    我的多维数据集在 C++ 代码中定义如下：

    ```
    reper cube[27]; // reper is transform matrix 
    ```

2.  **图形用户界面**

    我希望控制和观看尽可能接近真实的东西。因此，旋转由鼠标通过简单地单击目标子立方体（在`area0`或中`area1`）来控制，然后从鼠标拖动的方向决定哪个轴和哪个方向旋转。

    从起始位置没有问题（因为即使您的代码也适用于此）。问题从下一次旋转开始（尤其是在改变旋转轴时），因为局部坐标系已经改变。全局视图旋转也是如此，因为它会搞砸所有这些。

3.  **如何补救改变局部坐标系？**

    我想出了一个模糊的解决方案，我首先匹配每个坐标系中的轴。为了检测哪个轴是哪个轴，我只需对查询的方向与变换矩阵的所有轴进行点积，然后选择绝对点积最高的轴。该符号只是告诉坐标系是否相反（意味着应该反转旋转）。

    在**C++**和**OpenGL**样式矩阵中，它看起来像这样：

    ```
    void RubiCube::axises_unit(reper &rep,int &x,int &y,int &z,int &sx,int &sy,int &sz)
        {
        int i;
        double p[3],xyz[3][3],a,b;
        rep.axisx_get(xyz[0]);
        rep.axisy_get(xyz[1]);
        rep.axisz_get(xyz[2]);
        vector_ld(p,1.0,0.0,0.0); for (b=0.0,i=0;i<3;i++) { a=vector_mul(xyz[i],p); if (fabs(a)>=fabs(b)) { x=i; b=a; } } sx=+1; if (b<0) sx=-1;
        vector_ld(p,0.0,1.0,0.0); for (b=0.0,i=0;i<3;i++) { a=vector_mul(xyz[i],p); if (fabs(a)>=fabs(b)) { y=i; b=a; } } sy=+1; if (b<0) sy=-1;
        vector_ld(p,0.0,0.0,1.0); for (b=0.0,i=0;i<3;i++) { a=vector_mul(xyz[i],p); if (fabs(a)>=fabs(b)) { z=i; b=a; } } sz=+1; if (b<0) sz=-1;
        } 
    ```

    `reper`包含直接和逆变换矩阵的类在哪里。只是在`get_axis`直接矩阵内部窥视并返回选定的轴方向单位向量。是`vector_mul`点积，只是用坐标`vector_ld`填充 3D 矢量。`x,y,z`

    因为我还得到了未与单位矩阵轴对齐的全局立方体矩阵（因为它被旋转所以视图看起来像上图）然后我需要对特殊向量（初始视图矩阵值）进行此轴匹配在我的情况下就是这个：

    ```
    void RubiCube::axises_obj(reper &rep,int &x,int &y,int &z,int &sx,int &sy,int &sz)
        {
        int i;
        double p[3],xyz[3][3],a,b;
        rep.axisx_get(xyz[0]);
        rep.axisy_get(xyz[1]);
        rep.axisz_get(xyz[2]);
        vector_ld(p,+0.707,-0.299,-0.641); for (b=0.0,i=0;i<3;i++) { a=vector_mul(xyz[i],p); if (fabs(a)>=fabs(b)) { x=i; b=a; } } sx=+1; if (b<0) sx=-1;
        vector_ld(p,-0.000,-0.906,+0.423); for (b=0.0,i=0;i<3;i++) { a=vector_mul(xyz[i],p); if (fabs(a)>=fabs(b)) { y=i; b=a; } } sy=+1; if (b<0) sy=-1;
        vector_ld(p,-0.707,-0.299,-0.641); for (b=0.0,i=0;i<3;i++) { a=vector_mul(xyz[i],p); if (fabs(a)>=fabs(b)) { z=i; b=a; } } sz=+1; if (b<0) sz=-1;
        } 
    ```

    与单位变换矩阵相比，这两个函数都返回哪个轴是哪个轴`x,y,z`以及方向是否相反 (sx,sy,sz)。

4.  **切片旋转**

    这是谜题的核心。它简单地绕轴转动切片。这用于动画，因此角度步长很小（我使用 9 度），但整个转弯必须总共 90 度，否则 Rubic Cube 会损坏。

    ```
    void RubiCube::cube_rotate(int axis,int slice,double ang)
        {
        int j,k,a[3],s[3];
        double p[3],p0[3]={0.0,0.0,0.0},lang;
        reper *r;
        _redraw=true;
        for (k=0;k<27;k++)
            {
            r=&cube[k];
            // local axis,sign
            axises_unit(*r,a[0],a[1],a[2],s[0],s[1],s[2]);
            // lang is local signed angle change
            lang=ang; if (s[axis]<0) lang=-lang;
            // select slice
            r->gpos_get(p);
            j=round(p[axis]+1.0);
            if (j!=slice) continue;
            // rotate global position
            if (axis==0) vector_rotx(p0,p,+ang);
            if (axis==1) vector_roty(p0,p,-ang);
            if (axis==2) vector_rotz(p0,p,+ang);
            r->gpos_set(p);
            // rotate local cube orientation
            if (a[axis]==0) r->lrotx(-lang);
            if (a[axis]==1) r->lroty(-lang);
            if (a[axis]==2) r->lrotz(-lang);
            }
        } 
    ```

    Where`reper::gpos_get`返回矩阵原点作为 3D 向量（点）并`reper::gpos_set`基本上设置新的矩阵位置。将`vector_rotx(p0,p,a)`向量`p`围绕`p0`并按`x`角度旋转`a`。这些`+/-`标志只是为了匹配`reper`课堂上的轮换（我在某处有所不同）。`reper::lrotx`围绕其`reper`局部`x`轴旋转以获取更多信息，请参见第一个链接。

    如您所见，我直接使用每个矩阵原点坐标作为拓扑来选择切片立方体。

**在这里你可以试试我的演示：** [Win32+OpenGL Rubic Cube Demo](https://ulozto.cz/!vtYWqCSye/rubicuve-exe-zip)

这里有一些转折的动画 gif：

[![动画片](../Images/c25217dbef21af8b8ef9fdbb7ce68c57.png)](https://i.stack.imgur.com/PCLPB.gif)

**[Edit1] 我在 RubiCube 中添加了简单的求解器**

为了实现求解器，我添加了从我的**RubiCube**内部表示计算的表面平面颜色图（在左侧......中间的正方形是我使用的边的名称和索引）。我还为求解器添加了内部命令 que（右侧的轴和方向）：

[![轴](../Images/8307dc11acd382bd794c4279356e2081.png)](https://i.stack.imgur.com/3DOt8.png)

每个命令由 2 个字符串表示：

```
edge slice  CW: R L U D F B
edge slice CCW: R'L'U'D'F'B'
mid  slice  CW: R0L0U0D0F0B0
whole cube  CW: RcLcUcDcFcBc 
```

地图如下所示：

```
int map[6][3][3]; 
```

其中包含边、行和列`map[side][u][v]`的正方形颜色。我实现了简单的[7 步解决方案](https://ruwix.com/the-rubiks-cube/how-to-solve-the-rubiks-cube-beginners-method/)（如人类解决真正的立方体）：`s``u``v`

[![解决步骤](../Images/8994d31b9a6a5240e4172a287acdda68.png)](https://i.stack.imgur.com/VDaVw.png)

1.  输入状态（不是一步）
2.  黄中白十字（黄中朝前）
3.  白色十字（白色中间朝前）
4.  白色角（白色面朝下）
5.  中间层（使用前 3 个命令）
6.  顶层黄色十字（使用第四条命令）
7.  重新排序交叉，使边匹配（第 5 个命令）和重新排序角（第 6 个命令）
8.  定位顶层角以完成立方体（第 7 个命令）

求解器很简单，可以在字符串上运行（未优化），所以它有点慢，但无论如何完整的解决方案在我的设置中最多只需要 50 毫秒。您可以在这里尝试升级后的演示：

*   [Win32+OpenGL Rubic Cube Demo 带求解器](https://ulozto.net/!GEefUFCK9Xzm/rubicube-exe-zip)

求解时可能仍然存在一些未定义的情况（由于代码中的错误或遗漏的情况）。在这种情况下，应用程序会粗略挂起（尚未实现看门狗）。这些键在包含的文本文件中进行了描述。

我做了求解器轻量级（cca 300 行代码），所以找到的解决方案远非最佳。例如，我只测试一个角而不是测试 4 个角，然后循环旋转立方体，导致不必要的转弯。其中一些后来被过滤掉，但平均人类（我的）解决方案最多 200 圈，而这个求解器返回最多 300 圈（在最坏的情况下，我发现到目前为止）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T12:36:57.420

发生的情况是，当您将此变换应用于模型（在您的情况下为旋转）时，您也会旋转它的基向量。把它想象成你也会旋转你的坐标系，或者你是从模型的第一人称视角看的。您所做的每一次转换都会影响下一次转换。

由于您通常希望保留自己的坐标系，因此您可能需要考虑围绕立方体移动相机而不是旋转立方体。我相信您可以在您的 API 或 Web 上找到“lookAt”方法。它应该采用 3 个向量：cameraPosition、lookAtPoint、upVector。使用这种方法，您可以将立方体定位到 (0,0,0)，这也是您的“lookAtPoint”，第一个 cameraPosition 应该类似于 (0,0,-1)，第一个 upVector 到 (0,1,0)。现在进行运动（您可能只使用左/右和上/下作为输入）： 要上/下（围绕 X 旋转），您接下来执行以下操作：

```
originalDistance = (cameraPosition-objectPosition).lenght
leftVector = normalizedVector(crossProduct(camearPosition, upVector))//generaly cameraPosition-objectPosition
camearPosition = cameraPosition + upVector*inputScalar //inputScalar should be a small floating value
cameraPosition = normalizedVector(cameraPosition)*originalDistance //put camera to original distance from object
upVector = normalizedVector(crossProduct(cameraPosition, leftVector))//generaly cameraPosition-objectPosition 
```

要向左/向右（围绕 X 旋转），您接下来执行以下操作：

```
originalDistance = (cameraPosition-objectPosition).lenght
leftVector = normalizedVector(crossProduct(camearPosition, upVector))//generaly cameraPosition-objectPosition
camearPosition = cameraPosition + leftVector*inputScalar //inputScalar should be a small floating value
cameraPosition = normalizedVector(cameraPosition)*originalDistance //put camera to original distance from object
leftVector = normalizedVector(crossProduct(cameraPosition, upVector))//generaly cameraPosition-objectPosition
upVector = normalizedVector(crossProduct(cameraPosition, leftVector))//generaly cameraPosition-objectPosition 
```

这通常应该可以解决问题..（如果我写错了，请告诉我）

至于您旋转对象本身的方法，您应该找出对象自身坐标系中的四元数并围绕该坐标系旋转它。如果你有一些数学技能，这也很容易。除此之外，您还可以只定义 2 个角度 (X,Y) 并通过输入直接更改它们并使用 (1,0,0,X) 和 (0,1,0,Y) 的四元数，但可能存在问题当Y为90度时这种方法..

我希望这有帮助。

# vb.net - 将额外项目添加到数据绑定组合框中

> ID：11467921
> 
> 赞同：0
> 
> 时间：2012-07-13T09:40:33.553
> 
> 标签：vb.net, data-binding, combobox

我正在尝试在与数据库绑定后将项目添加到组合框中，因此组合框可以具有以下内容：

**组合框**

< 选择选项 >
值 1
值 2
值 3

尝试使用下面的代码，但我收到错误**“设置 DataSource 属性时无法修改项目集合。”** 它不允许我在组合框绑定后添加另一个项目。如何使用绑定的组合框将额外的项目添加到组合框中？

```
Public Overloads Sub SqLoadCombo2(ByVal comboBox As ComboBox, ByVal cnnStr As String, ByVal TextField As String, ByVal ValueField As String, ByVal sAdditionalText As String, ByVal sAdditionalValue As String, ByVal sTextSeperator As String, ByVal sAdditionalTextDirection As String)
    comboBox.Items.Clear()

    Dim sAddText() As String
    Dim sAddValue() As String
    Dim iAddSize As Integer
    Dim iCtr As Integer

    Dim conn As New SqlConnection("SERVER=192.168.168.200,1433;DATABASE=WBIS_Laos;UID=BISSKG;PWD=BISSKG;Asynchronous Processing=false;")

    Dim strSQL As String = cnnStr
    Dim da As New SqlDataAdapter(strSQL, conn)
    Dim ds As New DataSet
    da.Fill(ds, "Disk")

    With comboBox
        .DataSource = ds.Tables("Disk")
        .DisplayMember = TextField
        .ValueMember = ValueField
        .SelectedIndex = 0
    End With

    '==Retrieve Additional Text and Value==
    If sAdditionalText.ToString <> "" Then
        sAddText = sAdditionalText.Split(sTextSeperator)
        sAddValue = sAdditionalValue.Split(sTextSeperator)
        iAddSize = sAddText.Length
    Else
        ReDim sAddText(0)
        ReDim sAddValue(0)
        iAddSize = 0
    End If
    '**Retrieve Additional Text and Value**

    '==Push Additional text into combo based on the direction request==
    sAdditionalTextDirection = sAdditionalTextDirection.ToString.Trim.ToUpper

    If sAdditionalTextDirection <> "TOP" And sAdditionalTextDirection <> "BTM" Then
        sAdditionalTextDirection = "TOP"
    End If

    If sAdditionalTextDirection = "BTM" Then
        For iCtr = 0 To iAddSize - 1
            comboBox.Items.Add(sAddText(iCtr))
            comboBox.Items(comboBox.Items.Count - 1).Value = sAddValue(iCtr)
        Next
    Else
        For iCtr = iAddSize - 1 To 0 Step -1
            comboBox.Items.Insert(0, sAddText(iCtr))
            comboBox.Items(0).Value = sAddValue(iCtr)
        Next
    End If
End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-16T10:59:16.743

与其将组合框绑定到从头开始`dataAdapter`创建您自己的组合框 - 首先用您要添加到列表中的字段填充您的表格，然后循环通过您的阅读器将每个项目添加到. 在此之后，您可以将您的表格绑定到您的组合框。下面是我使用它的一个例子`DataTable``DataTable`

```
Dim sqlHardware As String = "SELECT * FROM Hardware ORDER BY HardwareType"
Dim dtHardware As New DataTable, drHardware As DataRow
dtHardware.Clear()
dtHardware.Columns.Add(New DataColumn("ID", GetType(String))) '1
dtHardware.Columns.Add(New DataColumn("HardwareType", GetType(String))) ' 2
Dim commandHardware As New SqlCommand(sqlHardware, ConnMVC)
If ConnMVC.State <> 1 Then ConnMVC.Open()
Dim readerHardware As SqlDataReader = commandHardware.ExecuteReader()
If readerHardware.HasRows Then
    drHardware = dtHardware.NewRow()
    drHardware(0) = "0"
    drHardware(1) = "Select Type"
    dtHardware.Rows.Add(drHardware)
    Do While readerHardware.Read
        drHardware = dtHardware.NewRow()
        drHardware(0) = readerHardware!ID
        drHardware(1) = readerHardware!HardwareType
        dtHardware.Rows.Add(drHardware)
    Loop
    cbSoortHardware.DataSource = dtHardware
    cbSoortHardware.DisplayMember = "SoortHardware"
    cbSoortHardware.ValueMember = "ID"
    cbSoortHardware.SelectedIndex = 0
End If 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-05-29T15:13:52.767

我使用连接到源列表的 BindingSource 对象，然后将其绑定到 ComboBox。所有操作都转移到源并刷新到组合框。在带有组合框和按钮的简单示例下方：

```
Public Class Form1
Dim CoupledOrder As New List(Of clsCoupledOrder)

Private Sub Form1_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load
    Dim cOrder As clsCoupledOrder
    cOrder = New clsCoupledOrder("1", "Sunday")

    CoupledOrder.Add(New clsCoupledOrder("1", "Sunday"))
    CoupledOrder.Add(New clsCoupledOrder("2", "Monday"))
    CoupledOrder.Add(New clsCoupledOrder("3", "Tuesday"))
    CoupledOrder.Add(New clsCoupledOrder("4", "Wednesday"))
    CoupledOrder.Add(New clsCoupledOrder("5", "Thursday"))
    CoupledOrder.Add(New clsCoupledOrder("6", "Friday"))
    CoupledOrder.Add(New clsCoupledOrder("7", "Saturday"))

    BindingSource1.DataSource = New BindingSource(CoupledOrder, Nothing)

    ComboBox1.DataSource = BindingSource1
    ComboBox1.DisplayMember = "Value"
    ComboBox1.ValueMember = "Description"

End Sub
Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click

    Dim AddValue As clsCoupledOrder = New clsCoupledOrder("8", "ExtraDay")

    BindingSource1.List.Insert(0, AddValue)
End Sub

Private Sub BindingSource1_CurrentChanged(sender As Object, e As EventArgs) Handles BindingSource1.CurrentChanged

End Sub 
```

结束类

```
Public Class clsCoupledOrder
Private StringDesc As String
Private GUID As String

Public Sub New(ByVal desc As String, ByVal value As String)

    Me.StringDesc = desc
    Me.GUID = value

End Sub

Public Property Description() As String
    Get
        Return StringDesc
    End Get
    Set(ByVal value As String)
        StringDesc = value

    End Set
End Property

Public Property Value() As String
    Get
        Return GUID
    End Get
    Set(ByVal value As String)
        GUID = value
    End Set
End Property 
```

结束类

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-11-26T09:47:21.290

我的解决方案是在顶部的表格中添加一个新行。

后

`da.Fill(ds, "Disk")`

插入此代码：

```
Dim dr As DataRow = ds.Tables("Disk").NewRow
dr(ValueField) = -1                    ' NB :use dr(0) in others situation see example 
dr(TextField) = "< Select Option >"    ' NB :use dr(1) in others situation see example 
ds.Tables("Disk").Rows.InsertAt(dr, 0) ' Insert the new row to datatable's top 
```

就这样

例子 ：

```
 Dim da As New SqlDataAdapter("Select id, Description FROM CelleEssiccazione", sConnessione)
    Dim ds As New DataSet
    da.Fill(ds, "Disk")

    Dim dr As DataRow = ds.Tables("Disk").NewRow
    dr("id") = 0                         ' or dr(0)
    dr("Description ") = "Seleziona..."  ' or dr(1)
    ds.Tables("Disk").Rows.InsertAt(dr, 0)

    MyComboBox.DataSource = ds.Tables("Disk")
    MyComboBox.DisplayMember = ds.Tables("Disk").Columns("Description").ToString
    MyComboBox.ValueMember = ds.Tables("Disk").Columns("id").ToString 
```

# android - 在日历中接收新事件的广播接收器？

> ID：11467923
> 
> 赞同：0
> 
> 时间：2012-07-13T09:40:42.490
> 
> 标签：android, calendar

当新事件添加到 Android 中的日历时，是否有可能接收通知？我搜索了一些广播接收器，浏览了新的 ICS CalendarContract，但没有运气。

我过去经常使用 BlackBerry API，其中日历似乎是操作系统的一部分。在那里，您可以为此类事情注册您的听众。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T14:39:39.630

afaik 这在 android 中是不可能的，因为在 Android 日历中是不同的应用程序。我有很多尝试，但仍然没有成功。

# sql - 仅在满足特定条件时才执行插入语句

> ID：11467925
> 
> 赞同：2
> 
> 时间：2012-07-13T09:40:52.937
> 
> 标签：sql, postgresql

我只想在满足某个条件时才运行插入语句。有没有办法在纯 sql 中做到这一点？

我想在 pl/pgsql 中做的一个例子：

```
CREATE OR REPLACE FUNCTION set_search_lock (
    userid     IN   integer,
)
    RETURNS boolean AS $body$

DECLARE
BEGIN

    PERFORM 'A' FROM LOCK_TABLE WHERE USERID = userid LIMIT 1;

    IF NOT FOUND THEN
        INSERT INTO LOCK_TABLE (USERID) VALUES (userid);
        RETURN true;
    ELSE
        RETURN false;
    END IF;

END;
$body$
LANGUAGE PLPGSQL; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T09:51:03.127

假设您要插入值 42，那么以下内容将仅在没有行的情况下插入一行：

```
insert into lock_table (userid) 
select 42
where not exists (select 1 from lock_table where userid = 42); 
```

# php - 我的登录会话安全吗？

> ID：11467931
> 
> 赞同：1
> 
> 时间：2012-07-13T09:41:33.127
> 
> 标签：php, security, session

第一次为网页创建登录系统，我一直在尝试阅读有关安全性的信息，但不确定我是否做得对。

到目前为止，我已经存储了一个用户名/密码，并且密码是用 sha256 和一个 3 char salt 散列的。如果用户名和密码正确，那么我会像这样创建一个新的会话 ID

```
session_regenerate_id (); 
$_SESSION['valid'] = 1;
$_SESSION['userid'] = $userid; 
```

在我检查的每一页

```
function isLoggedIn()
{
if(isset($_SESSION['valid']) && $_SESSION['valid'])
    return true;
return false;
} 
```

我用它来检查正确的用户

```
$username = $_POST['username'];
$password = $_POST['password'];
//connect to the database here
connect();
//save username
$username = mysql_real_escape_string($username);
//query the database for the username provided
$query = "SELECT password, salt
    FROM users
    WHERE username = '$username';";
$result = mysql_query($query);
if(mysql_num_rows($result) < 1) //no such user exists
{
  //show incorrect login message
}
//check the password is correct for the username found
$userData = mysql_fetch_array($result, MYSQL_ASSOC);
$hash = hash('sha256', $userData['salt'] . hash('sha256', $password) );
if($hash != $userData['password']) //incorrect password
{
  //show incorrect login message
}
else
{
//setup a new session 
validateUser();
//redirect to the main page
header('Location: main.php');
die(); 
```

如果它是假的，那么他们会被发送回登录页面。这足够安全吗？

在主页中，我也有 html 链接

```
 <li><a href="main.php">Home page</a> 
```

所以我需要在使用这些链接时在主页上结束 php 脚本？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-13T10:00:47.707

添加到[phpdev](https://stackoverflow.com/users/624884/phpdev)所说的内容。尽管它看起来足够安全，但我还是推荐了几件事。

当您想将用户发送到某个页面时，请确保您的脚本退出并完成执行，因为如果仍有一些行，它们将被执行。以此为例：

```
if (!isLoggedIn()){
   header('Location: login.php');
}
//It's wrong to assume that things are safe here
echo $secret_data; 
```

所以请确保您添加`exit();`或`die();`在您的`header()`电话之后。

此外，在散列时，请确保为**每个用户使用唯一的盐**，因此您需要在表中创建一个额外的列`users`来存储`salt`散列密码的旁边。还强烈建议使用经过良好测试的散列库，例如[PHPass](http://www.openwall.com/phpass/)。

如果您在使用相同域的同一 Web 服务器上运行不同的 Web 服务，例如： `mysite.com/my_super_awesome_app`并`mysite.com/my_not_very_awesome_app`确保您在`$_SESSION`类似的变量名称中添加前缀`$_SESSION['app1_valid']`或使用`session_set_cookie_params()`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-13T09:45:05.327

是的，这对我来说看起来很安全。只要确保你`session_start()`在做任何事情之前打电话并小心你设置的位置`$_SESSION['valid']`。确保仅在您确认他们输入了正确的用户名和密码后才设置。

至于加盐，我建议为每个用户使用大约 10 个字符的独特盐。[然后使用crypt](http://php.net/manual/en/function.crypt.php)和河豚算法 (bcrypt)对结果进行哈希处理。BCrypt 的设计使得计算散列的成本越来越高，如果有人窃取了你的密码散列，这一点很重要。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-13T20:00:28.527

不要忘记从登录表单向前要求 HTTPS，否则这一切都是徒劳的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-13T10:03:39.603

对于一个基本的应用程序来说，它看起来不错。你可以做的事情还有很多。计时器。字典攻击。登录尝试会话。搜索 SO。

```
function is_customer_logged_in() {
    if($_COOKIE['GC_CUST_LOGIN']==1 && $_SESSION["loggedIn"]=="1"){
        return true;
    }else{
        return false;
    }
}

$_SESSION["time"]=time();
setcookie("GC_CUST_LOGIN", 1, ".stackoverflow.com");
$_SESSION["loggedIn"]="1";
$_SESSION["loggedIn_Md5_Hash"]=md5(hash); 
```

您还可以为会话插入哈希值，检查是否已登录并添加一个数字，还可以在数据库检查后使用 cookie 和会话强制匹配。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-14T04:54:58.270

密码安全性需要考虑很多事情。不幸的是，sha-256 仍然无法击败 bcrypt 或 scrypt（它们实现了密钥拉伸、盐和可扩展的工作因子以帮助硬件改进）。

我会通过 openwall (http://www.openwall.com/phpass/) 查看 PHPass，这是一个非常标准的 bcrypt 库，并且易于使用。

就像其他人所说的那样，除非您的登录页面通过 HTTPS 保护，否则仍然可以嗅探密码。

我喜欢你正在重新生成 session_id。虽然在这种情况下可能无关紧要，但它有助于防止会话重放或会话固定攻击。

总体而言，要使您的系统更安全，还需要考虑其他一些事项：

*   密码政策
    *   密码长度
    *   数字+特殊字符
*   密码短语
    *   如果你能确保单词不常见，可能会有更多的熵
*   登录尝试失败后禁止
*   添加双重身份验证

# c# - 匹配特殊单词前有一个斜杠的行

> ID：11467935
> 
> 赞同：0
> 
> 时间：2012-07-13T09:41:51.893
> 
> 标签：c#, regex

我有许多类似格式的行（实际上是文件路径）。例如：

```
root/DATA/some/file.txt
root/DATA/another/file.txt
root/DATA/yet/another/file.exe
root/site/some/other/folder/before/DATA/file.xml
root/site/some/other/folder/DATA/file2.xml 
```

我想只取**之前包含单个斜杠的** `DATA`那些，即上面的前 3 个应该匹配，但最后 2 个不应该匹配。注意：`root`应该是一个字符序列，不包括`/`和`\`。

我最终得到了这个正则表达式，但它仍然匹配所有 5 个样本：

```
[^/]*/data/.* 
```

而且我被困在这里......如何指示它过滤掉该行，以防`DATA`在第一个斜杠之后没有明确遵循？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T09:48:12.797

这应该可以解决您的问题：

```
^[^/]*/DATA/.*$ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T09:46:26.810

您应该标记行的开头：

```
^[^/]*/data/.* 
```

此外，确保 Regex 处于多行模式并忽略大小写

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T09:53:29.043

```
Regex regex = new Regex("^[^/]*/data/.*",
                        RegexOptions.IgnoreCase|RegexOptions.Multiline); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-13T10:36:39.243

你有很多选择——比如你可以捕获所有 DATA 并稍后检查文本 DATA 之前有多少元素 '/' （例如在第一组中）；您可以检查更长的字符串等 - 正是您要求的东西，您可以使用代码模拟和重用：

```
string type_1 = "" +
    "root/DATA/some/file.txt" + "\n" +
    "root/DATA/another/file.txt" + "\n" +
    "root/DATA/yet/another/file.exe" + "\n" +
    "root/site/some/other/folder/before/DATA/file.xml" + "\n" +
    "root/site/some/other/folder/DATA/file2.xml";

Console.WriteLine ("Start TEXT:");
Console.WriteLine (type_1);

Console.WriteLine ("Result TEXT:");
MatchCollection mat = Regex.Matches (type_1, "^[^/]*/DATA.*?$", RegexOptions.Compiled|RegexOptions.Multiline);
Console.WriteLine (mat.Count);
foreach (Match m in mat) {
    Console.WriteLine (m.ToString ());  
} 
```

它的工作结果是：

```
Start TEXT:
root/DATA/some/file.txt
root/DATA/another/file.txt
root/DATA/yet/another/file.exe
root/site/some/other/folder/before/DATA/file.xml
root/site/some/other/folder/DATA/file2.xml
Result TEXT:
3
root/DATA/some/file.txt
root/DATA/another/file.txt
root/DATA/yet/another/file.exe 
```

它通过假设没有'/'可以在第一个'DATA'之前起作用。

# facebook-c#-sdk - Facebook SDK：使用开放图（提要）从应用程序发布到用户墙某些参数不起作用

> ID：11467938
> 
> 赞同：1
> 
> 时间：2012-07-13T09:41:57.760
> 
> 标签：facebook-c#-sdk, feed, facebook-opengraph, facebook-wall

我正在使用 Facebook C# SDK 从 Facebook 中运行的应用程序发布到用户的墙上。一切正常（应用程序具有正确的权限），事实上，帖子被发送到用户的墙上......奇怪的是我要求发布的信息并不完全是最终发布的信息。我的代码：

```
Dim facebook = New FacebookWebClient(fbWebContext)
Dim args As Dictionary(Of String, Object) = New Dictionary(Of String, Object)
args("picture") = "http://www.xxx.com/uploads/yyy.jpg"
args("link") = "https://www.facebook.com/zzz?sk=app_12532830&app_data=10000"
args("name") = "My name"
args("caption") = "My caption"
args("description") = "My description"
args("message") = "My message"
facebook.Post("https://graph.facebook.com/12345/feed", args) 
```

此代码完美运行并且没有错误，并且在用户墙上正确生成了一个帖子（在此示例中，ID 为 12345），但是...查看用户墙上的帖子，我得到：

```
1\. The message is OK
2\. The picture is OK
3\. The link is NOT OK: I get "https://www.facebook.com/zzz?sk=app_12532830" without the "app_data" parameter!
4\. The name is NOT OK: instead of getting "My name", I get "My name | [App Name]" (where [App Name] is the name of the application)
5\. Caption is NOT OK: this one simply doesn't appear.
6\. The description is OK 
```

诡异的！

现在......我已经尝试做完全相同的事情，但是从 Facebook 开发人员工具下的“Graph API Explorer”，指定所有字段和相同的值......然后一切都按预期工作......任何人都可以帮我？有人有任何线索吗？

先感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T12:21:20.893

皮特你上面说的每件事在我测试时都运行良好。唯一的一个例外是您尝试添加的图片，它被拒绝说“这是一个被阻止的内容”。我正在使用 Facebook C# SDK 版本 v4.0.30319。完整的代码如下。

```
 var client = new Facebook.FacebookClient(this.UserToken);
            dynamic parameters = new ExpandoObject();
            parameters.message = "My message";
            //parameters.picture = "http://www.xxx.com/uploads/yyy.jpg";
            parameters.picture = "http://www.bhaam.org.uk/images/index/den_building.jpg";
            parameters.link = "https://www.facebook.com/zzz?sk=app_12532830&app_data=10000";
            parameters.name = "My name";
            parameters.caption = "My caption";
            parameters.description = "My description";
            parameters.privacy = new
            {
                value = "SELF", //value = "ALL_FRIENDS", reference (http://developers.facebook.com/docs/reference/rest/photos.createAlbum/)
            };
            result = client.Post("me/feed", parameters);
            status = true; 
```

# amazon-web-services - 负载均衡器 IP

> ID：11467939
> 
> 赞同：0
> 
> 时间：2012-07-13T09:42:03.017
> 
> 标签：amazon-web-services

我有一个负载均衡器，它将监听端口 3306（非 vpc）使用 traceroute 命令我可以看到它具有内部 IP 50.50.50.50 我的问题是：

```
1) Should I use internal IP instead of internet-facing IP ?
2) Will I be charged more if I use internet-facing IP?
3) Will the performance improve if use Internal IP? 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T04:30:32.563

ELB[没有静态 IP 地址，](http://www.quora.com/Why-does-Amazon-not-allow-assigning-an-Elastic-IP-to-an-Elastic-Load-Balancer)正如很多地方所记录的[那样](https://serverfault.com/a/362646/128075)[（](http://blog.pagerduty.com/2010/08/load-balancers-need-static-ips/)尽管有一些[有趣的 HAProxy 解决方法，](http://nickhills.com/wp/2012/02/aws-elastic-load-balancing-with-a-static-ip-address/)如果您使用[Route53](http://aws.amazon.com/route53/)进行 DNS，您可以完全绕过它）。

因此，您混淆了三个概念。首先，EC2 实例具有私有 IP。这些实例是免费提供的，但除非您在虚拟私有云中，否则它们并没有太大意义。其次，可以为 EC2 实例分配公共“EIP”（不要与您可以通过它`ssh`访问实例的 CNAME 混淆），它们是公共 IP 地址，并且[可以在足够高的规模上花钱](http://aws.amazon.com/ec2/pricing/)。第三，ELB 具有 IP 地址，但它们不是静态的，因此您会遇到一个无法用于根域的极长 CNAME，并且基本上只会激怒几乎所有地方的所有人，包括 AWS 支持（如果您费心的话）问他们。

端口 3306 听起来像 MySQL，所以你实际上并没有平衡流量，是吗？为什么不直接在您的 MySQL 实例上添加一个 EIP，将安全组设置为只允许来自您指定的来源的流量，并完全排除 ELB 呢？它会让您花费更少，省去 CNAME 的麻烦，并迫使您实施严格的安全组策略，无论如何您都必须使用 ELB。

# .htaccess - 如何使用 ANT 生成带有 MD5 加密的 .htpasswd？

> ID：11467940
> 
> 赞同：0
> 
> 时间：2012-07-13T09:42:08.200
> 
> 标签：.htaccess, ant, ftp, md5, .htpasswd

我正在编写一个 ant 任务，它在基于 FTP linux 的服务器上创建文件夹，我想让它生成 .htaccess 文件和 .htpasswd 文件。

我需要使用 MD5 加密（或其他加密方法）在 .htpasswd 中写入密码，我该怎么做？

谢谢大家 ;)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T09:51:18.950

您可以从您的 ant 文件中调用外部可执行文件——尽管这意味着它需要访问该可执行文件。这可能会奏效：

```
<target name="update-htpasswd">
  <exec executable="/usr/bin/htpasswd">
    <arg value="-bm"/>
    <arg value="${passwordfile}"/>
    <arg value="${username}"/>
    <arg value="${plain-password}"/>
  </exec>
</target> 
```

保证格式正确。否则，您可以编写自己的 ant 任务并调用它。Java 具有内置的 MD5 库，因此您只需在 java 中生成正确的密码行并将其附加到密码文件中。那会更便携。

# windows - Haskell 检查程序的可用性

> ID：11467944
> 
> 赞同：0
> 
> 时间：2012-07-13T09:42:14.203
> 
> 标签：windows, shell, haskell, path, portability

是否可以检查给定字符串是否代表 $PATH(%path%) 中的可执行文件？它必须可移植到 Windows。仅调用它并查看返回状态的想法是不合适的，因为非零可能意味着程序错误或未找到程序。好吧，在代码中，我想关注

```
possibleCompilers = ["gcc", "icc", "foo", "bar.exe"]
presentCompiler :: IO String 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-13T09:52:54.007

该任务应该可以使用[`System.Directory.findExecutable`](http://www.haskell.org/ghc/docs/latest/html/libraries/directory-1.1.0.2/System-Directory.html#v%3afindExecutable).

```
possibleCompiler :: IO (Maybe String)
possibleCompiler = check possibleCompilers
  where
    check [] = return Nothing
    check (c:cs) = do
       mbc <- findExecutable c
       case mbc of
         Just _ -> return mbc
         Nothing -> check cs 
```

我将类型更改为`IO (Maybe String)`，因为可能找不到任何候选人。

# android - 从 XML 中提取 JSON

> ID：11467946
> 
> 赞同：0
> 
> 时间：2012-07-13T09:42:16.313
> 
> 标签：android, json, xml-parsing

我是android的初学者，所以请帮助我，我想从下面的xml解析字符串中提取json数组：

```
<?xml version="1.0" encoding="UTF-8"?>
<string xmlns="http://schemas.microsoft.com/2003/10/Serialization/">
[{"id":3033,"type":"cpt4","description":"New Patient Office Visit  for Moderate to Severe problems- Requiring Longer Visit","category":"Office Visits","subCategory":"Illness Related Visits","inNetwork":195.99,"outNetwork":424.06,"code":"99205","zip":"90210","lastupdated":"2012-02-13T00:00:00.000-05:00"}]
</string> 
```

我们如何在android中从上面的字符串中获取json字符串，帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T12:29:27.260

这是[GSON的解决方案](http://code.google.com/p/google-gson/)

*   从上面的链接下载**GSON** jar 将其添加到您的构建路径

在这里，我尝试解析 xml 以获取 json 字符串，然后解析 json 以从中获取必要的元素

```
String xml = "<?xml version=\"1.0\" encoding=\"UTF-8\"?>"
        + "<string xmlns=\"http://schemas.microsoft.com/2003/10/Serialization/\">"
        + "[{\"id\":3033,\"type\":\"cpt4\",\"description\":\"New Patient Office Visit  for Moderate to Severe problems- "
        + "Requiring Longer Visit\",\"category\":\"Office Visits\",\"subCategory\":\"Illness Related Visits\","
        + "\"inNetwork\":195.99,\"outNetwork\":424.06,\"code\":\"99205\",\"zip\":\"90210\",\"lastupdated\":\"2012-02-13T00:00:00.000-05:00\"}]"
        + "</string>";

Document doc = null;
DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
try {
    DocumentBuilder db = dbf.newDocumentBuilder();
    InputSource is = new InputSource();
    is.setCharacterStream(new StringReader(xml));
    doc = db.parse(is);
} catch (Exception e) {
    e.printStackTrace();
}

doc.getDocumentElement().normalize();
String text = doc.getDocumentElement().getTextContent();
System.out.println(text);

try {
    // testing whether the json string is valid or not
    JsonParser jsonParser = new JsonParser();
    JsonElement jsonElement = jsonParser.parse(text);
    System.out.println("Valid JSon");

    System.out.println("isArray : " + jsonElement.isJsonArray());

    JsonArray jsonArray = jsonElement.getAsJsonArray();
    JsonObject jsonObject = jsonArray.get(0).getAsJsonObject();
    System.out.println("id : " + jsonObject.get("id"));
    System.out.println("type : " + jsonObject.get("type"));
    System.out
            .println("description : " + jsonObject.get("description"));
    System.out.println("category : " + jsonObject.get("category"));
    System.out
            .println("subCategory : " + jsonObject.get("subCategory"));
    System.out.println("inNetwork : " + jsonObject.get("inNetwork"));
    System.out.println("outNetwork : " + jsonObject.get("outNetwork"));
    System.out.println("code : " + jsonObject.get("code"));
    System.out.println("zip : " + jsonObject.get("zip"));
    System.out
            .println("lastupdated : " + jsonObject.get("lastupdated"));

} catch (JsonSyntaxException e2) {
    // TODO Auto-generated catch block
    e2.printStackTrace();
} 
```

**注意**：-（当然你可以尝试不使用 GSON 并使用原生 JSON 解析器）

# android - 禁用 ListView 滚动到顶部

> ID：11467949
> 
> 赞同：0
> 
> 时间：2012-07-13T09:42:30.137
> 
> 标签：android

我有一个列表视图，其中项目被动态添加到列表顶部。我展示了列表顶部发生的一些最新事件。问题是，这些事件发生得非常频繁，比如一秒钟发生 5 个事件。这使列表下降。假设用户正在查看一个事件，然后当新事件发生时，它将他正在阅读的事件推送到下面，然后消失。我希望将新事件添加到顶部，但仅当他向上滚动时才应显示。一旦发生新事件，我就会在适配器上调用 notifydatasetchanged，这会将列表向下推。无论如何我可以冻结滚动。我试图通过 setTranscriptMode 禁用滚动。但这似乎没有帮助。请给我一些提示并指出我

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-13T09:47:18.480

您可以做的是尝试使用[**getFirstVisiblePosition()**](http://developer.android.com/reference/android/widget/AdapterView.html#getFirstVisiblePosition%28%29)在屏幕上获取 ListView 的可见位置，然后使用您获得的位置的 setSelection 再次设置适配器。

```
int position = mListView.getFirstVisiblePosition();
mListView.setAdapter(adapter);
mListView.setSelection(position + 1); 
```

我猜你需要 (position + 1) 因为你要为添加到列表的每个项目在列表顶部添加项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T10:47:09.267

要根据需要显示最新事件，您需要设置`android:transcriptMode="normal"` 默认情况下，只要更改数据集，就会将焦点设置为最后一项。

[http://developer.android.com/reference/android/widget/AbsListView.html#attr_android:transcriptMode](http://developer.android.com/reference/android/widget/AbsListView.html#attr_android:transcriptMode)

另外，我想冻结滚动，然后才可以设置`setOnScrollListener()`和更新列表。

# search - 我们可以在代码中硬编码搜索查询吗？

> ID：11467951
> 
> 赞同：-1
> 
> 时间：2012-07-13T09:42:38.617
> 
> 标签：search, web

在代码中硬编码网络搜索查询并进行网络搜索是否合法。例如，我可以在代码中使用以下查询吗？

[https://www.google.com/search?q=](https://www.google.com/search?q=) **searchkeyword** &ie=utf-8&oe=utf-8&aq=t [http://www.amazon.com/s/ref=nb_sb_noss_1?url=search-alias%3Daps&field-关键字=](http://www.amazon.com/s/ref=nb_sb_noss_1?url=search-alias%3Daps&field-keywords=)**搜索关键字**

谢谢！拉胡尔。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T09:52:46.537

如果我理解您的问题，您的意思是：您将此查询作为链接上传到浏览器以进行搜索查询。

答案是**肯定**的。你可以使用它。因为它有点像 HTTP Post 方法，并且您必须遵循 Google 结构（并取决于您使用的其他搜索引擎），但它可能会在将来的某个时候改变。（但我认为这很少发生；））

而且，您的问题不需要标记`Android`，因为它只是一个关于 Web 应用程序的问题，而且不仅适用于 Google。

# javascript - 在phonegap android应用程序中读取本地文件

> ID：11467952
> 
> 赞同：1
> 
> 时间：2012-07-13T09:42:45.273
> 
> 标签：javascript, cordova, phonegap-plugins

在我的 phonegap android 应用程序中，我在 assets/www/ 文件夹中有一个 xml 文件。如何在 javascript 中读取该文件的内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T17:44:38.643

尝试使用这个库[http://www.fyneworks.com/jquery/xml-to-json/](http://www.fyneworks.com/jquery/xml-to-json/)将 xml 数据转换为易于使用的 json。

此函数将加载 xml 文件：

```
function readXml(){
        $.get('data.xml', function(xml){

            // converts received XML document to string
            var xmlText = new XMLSerializer().serializeToString(xml);
            console.log(xmlText);

            var employees = $.xml2json(xml);
            console.log(employees)
            alert(employees.employee[0].name);
        });
    } 
```

完整源代码 - [https://gist.github.com/3106218](https://gist.github.com/3106218)

使用 Cordova 1.7 和 Android 2.2 对此进行了测试

# php - 需要 PHP 和 iOS 的解密/加密基本算法

> ID：11467953
> 
> 赞同：0
> 
> 时间：2012-07-13T09:42:48.420
> 
> 标签：php, ios, encryption

我正在寻找一种方法来加密 iOS 中的字符串，将其发送到 PHP 服务器并在那里解密。
服务器会将正常消息发送回 iOS，无需加密。
知道如何做到这一点吗？

**编辑：**加密应该在两端硬编码一个类似的密钥。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T09:50:52.697

base64编码和解码怎么样？

[http://php.net/manual/en/function.base64-encode.php](http://php.net/manual/en/function.base64-encode.php)

对于 iOS：[如何在 iPhone 上进行 Base64 编码](https://stackoverflow.com/questions/882277/how-to-base64-encode-on-the-iphone)

# .net - 如何使用 PLINQ 处理数组块

> ID：11467954
> 
> 赞同：1
> 
> 时间：2012-07-13T09:42:49.023
> 
> 标签：.net, linq, c#-4.0, parallel-processing, plinq

我需要获取大量的双打，并使用处理器密集型功能分块处理它。

我的原始数组非常大，大约 200MB 双倍的信号数据。

我需要将它分成 5000 个双精度块，使用返回单个双精度的函数处理具有一些处理器密集型数学的那些。需要这些函数结果中的每一个来创建稍后使用的有序数组。

我*认为*这对于使用 PLINQ 的并行性来说是最佳的，但我不太确定如何去做。

我编写的幼稚实现如下所示：

```
 var processedList = new List<double>();

        var chunk = new List<double>;
        foreach (var rawSample in drop.RawSamples)
        {
            chunk.Add(rawSample);

            if (chunk.Count == 5000)
            {
                // Do long processing here
                processedList.Add(LongProcessingFunction(chunk));

                chunk.Clear();
            }
        }

        // Do something later with the list of processed values..... 
```

那么，我从哪里开始使用 PLINQ？我需要能够使用处理器的所有内核来执行长时间、密集的功能。

我看到 IEnumerable 有一个 Take(n) 函数.....我可以使用它吗？

我可以在这里使用 AsParallel 吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T10:23:23.750

首先，如果您要处理如此大量的数据，则应尽可能避免逐个元素地处理它。在您的代码中，您可以通过以 5000 为增量迭代整数并使用类似[`Array.Copy()`](http://msdn.microsoft.com/en-us/library/z50k9bft).

或者，更好的是，根本不进行任何复制，让`LongProcessingFunction`接受一个数组（或`IList<T>`, 或`IReadOnlyList<T>`，如果您使用的是 .Net 4.5；但使用接口确实有一些开销）和该数组的偏移量。

如果你想使你的代码并行，你可以使用[`ParallelEnumerable.Range()`](http://msdn.microsoft.com/en-us/library/system.linq.parallelenumerable.range)with [`AsOrdered()`](http://msdn.microsoft.com/en-us/library/dd413357)（这是使结果以正确的顺序所必需的）和`Select()`：

```
double[] result = ParallelEnumerable.Range(0, drop.RawSamples.Length / chunkSize)
    .AsOrdered()
    .Select(i => LongProcessingFunction(drop.RawSamples, i * chunkSize))
    .ToArray(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T10:22:33.650

我建议在您的索引源上实现一个分区器，它将您的源分成 5000 个元素的块。然后可以使用并行处理它们中的每一个`AsParallel`。

```
class Program
{
    static void Main(string[] args)
    {

        IList<double> rawData =  [Your raw data here];

        IList<double> result =
            rawData
                .Partition(5000)
                .AsParallel()
                .AsOrdered()
                .Select(chunk => LongProcessingFunction(chunk))
                .ToList();
    }

    private static double LongProcessingFunction(IList<double> chunk)
    {
        throw new NotImplementedException();
    }
}

public static class MyExtensions
{
    public static IEnumerable<List<T>> Partition<T>(this IList<T> source, Int32 size)
    {
        for (int i = 0; i < Math.Ceiling(source.Count / (Double)size); i++)
        {
            yield return new List<T>(source.Skip(size*i).Take(size));
        }
    }
} 
```

# c++ - 运算符重载内部调用转换

> ID：11467955
> 
> 赞同：2
> 
> 时间：2012-07-13T09:42:51.957
> 
> 标签：c++

如果有课

```
class complex
   {
     private:
        float real,imag;
     public:
       complex operator +(complex c)
       {
         complex t;
         t.real=real+c.real;
         t.imag=imag+c.imag;
         return t;
       } 
```

如果我们调用重载运算符

c3=c1+c2；

然后编译器内部转换为 c3=c1.operator+(c2)

同样在运算符重载的类似示例中，= 的链接

```
class circle
  {
    private:
      int radius;
      float x,y;
    public:
      circle()
      {}
      circle(int rr,float xx,float yy)
      {
        radius=rr;
        x=xx;
        y=yy;
      }
      circle& operator=(const circle& c)
        {
          cout<<endl<<"assignment operator invoked";  
          radius=c.radius;
          x=c.x;
          y=c.y;
          return *this;
        }
int main()
{
    circle c1 (10,2.5,2.5);
    circle c2,c3;
    c3=c2=c1;
    c1.showdata();
    c2.showdata();
    c3.showdata();
    return 0;
} 
```

重载 = to 运算符将被调用 2 次，首先是 c2=c1，然后是 c3=c2。那么编译器将如何处理 c2=c1 及其函数原型？？编译器将如何在内部转换这个重载的运算符 = 调用？？（请参考上面的添加示例）谁的私有字段将被访问并返回到 ahich 对象值??

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T09:45:30.163

```
c3=c2=c1; 
```

被类似地评估为

```
c3.operator=(c2.operator=(c1)) 
```

`c2.operator=(c1)`返回`c2`分配后的引用`c1`。

请注意，对于您的课程，您不需要重载`operator =`，因为编译器生成的课程**完全相同**。

如果你这样做了，你应该遵守**三法则**——并且还要添加一个析构函数和复制构造函数。但是，同样，您的课程也不需要。

# c# - C# LINQ - 将嵌套字典转换为列表

> ID：11467957
> 
> 赞同：12
> 
> 时间：2012-07-13T09:42:55.187
> 
> 标签：c#, linq

如何将嵌套字典展平为一些对象列表（`SomeObject`在以下示例中），这些对象应包含这些字典的键？

例如：让我们有一个以下类型的字典

```
var nestedDictionary = new Dictionary<int, Dictionary<int, string>>(); 
```

那么，让我们上这堂课

```
public class SomeObject
{
   public int var1;
   public int var2;
   public string someStringVar;
} 
```

如何转换`nestedDictionary`为`List<SomeObject>`where`var1`是外部字典`var2`的键，是内部字典的键，是内部字典`someStringVar`的字符串值？

本质上，我如何转移这个：

```
nestedDict[0][0] = "foo";
nestedDict[0][1] = "bar";
nestedDict[0][2] = "foo1";
nestedDict[1][0] = "bar1";
nestedDict[1][1] = "foo2";
nestedDict[1][2] = "bar2"; 
```

对此（在伪 C# 中只是为了可视化它）

```
objList[0] = SomeObject { var1 = 0, var2 = 0, someStringVar = "foo" }
objList[1] = SomeObject { var1 = 0, var2 = 1, someStringVar = "bar" }
objList[2] = SomeObject { var1 = 0, var2 = 2, someStringVar = "foo1" }
objList[3] = SomeObject { var1 = 1, var2 = 0, someStringVar = "bar1" }
objList[4] = SomeObject { var1 = 1, var2 = 1, someStringVar = "foo2" }
objList[5] = SomeObject { var1 = 1, var2 = 2, someStringVar = "bar2" } 
```

使用 LINQ？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-13T09:49:33.190

您可以使用[SelectMany()](http://msdn.microsoft.com/en-us/library/bb534336.aspx)并编写如下内容：

```
var objList = nestedDictionary.SelectMany(
    pair => pair.Value.Select(
        innerPair => new SomeObject() {
            var1 = pair.Key,
            var2 = innerPair.Key,
            someStringVar = innerPair.Value
        })).ToList(); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-07-13T09:49:19.073

这应该有效：

```
var flattened =
from kvpOuter in nestedDictionary
from kvpInner in kvpOuter.Value
select new SomeObject()
{
    var1 = kvpOuter.Key,
    var2 = kvpInner.Key,
    someStringVar = kvpInner.Value
};
var list = flattened.ToList(); // if you need a list... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-13T09:49:49.193

这会给你一个可枚举的`IEnumerable<SomeObject>`：

```
var results = from d in nestedDictionary
              from innerD in d.Value
              select new SomeObject { var1 = d.Key, var2 = innerD .Key, someStringVar = innerD .Value }; 
```

分别调用`results.ToList`or`results.ToArray`来获取 a`List<SomeObject>`或`SomeObject[]`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-13T09:57:22.310

```
var xxx = nestedDictionary.SelectMany(
                    kvp =>
                    kvp.Value.Select(
                        xx => new SomeObject() {var1 = kvp.Key, var2 = xx.Key, someStringVar = xx.Value})); 
```

# html - 嵌套无序菜单点击 Ipad

> ID：11467959
> 
> 赞同：0
> 
> 时间：2012-07-13T09:42:58.150
> 
> 标签：html, css, ipad, menu, touch

我有一个嵌套菜单列表，如下所示。目前，当有人单击主菜单项时，它会跟随该链接。我想知道是否有办法让触摸屏在不遵循主菜单项的情况下显示下拉菜单？将鼠标悬停在主菜单项上时，子菜单的样式已设置为不显示

*   主菜单项
    *   子菜单项

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T10:05:31.323

我希望你正在尝试按照这个演示中提到的那样做：http: [//jsfiddle.net/akhurshid/rvy6U/](http://jsfiddle.net/akhurshid/rvy6U/)

**注意：`hover`触摸设备中不存在`tap`事件，而触摸设备中存在事件。`tap`并且`click`事件的行为相同。**

**jQuery**

```
$('#accordion li').click(function(){

    if($('.sub').css('display') == 'none') {
        $(this).find('a').next('.sub').stop().slideToggle('slow')
    } else {
        $(this).find('a').next('.sub').stop().slideToggle('slow')    
    }

});​ 
```

**HTML**

```
<ul id="accordion">
    <li><a href="#">Section 1</a>
        <ul class="sub">
            <li>Mauris mauris ante</li> 
            <li>blandit et, ultrices a</li>
        </ul>
    </li>

    <li><a href="#">Section 2</a>
        <ul class="sub">
            <li>Mauris mauris ante</li> 
            <li>blandit et, ultrices a</li>
        </ul>
    </li>
</ul> 
```

**CSS**

```
.sub {
    display: none;
}​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T09:57:44.253

您可以使用 jQuery onClick() 来显示我认为的子菜单。

您当前的悬停功能仍然适用于台式计算机，并且 onClick() 也适用于触摸屏设备和台式计算机。

# r - r - ggplot2 - 突出显示选定的点和奇怪的行为

> ID：11467965
> 
> 赞同：17
> 
> 时间：2012-07-13T09:43:37.920
> 
> 标签：r, ggplot2

我想突出显示选定的点并遇到一些奇怪的行为。首先是一些虚拟数据：

```
a <- 1:50
b <- rnorm(50)
mydata <- data.frame(a=a,b=b)
ggplot(mydata,aes(x=a,y=b)) + geom_point() 
```

这可以正常工作。现在，为了突出一些要点，我添加了`geom_point`另一层：

```
ggplot(mydata[20:40,],aes(x=a,y=b)) + 
    geom_point() + 
    geom_point(aes(x=a[c(10,12,13)],y=b[c(10,12,13)]),colour="red") 
```

请注意，我只显示有限范围的数据 ( `[20:40]`)。现在出现了奇怪的行为：

```
ggplot(mydata[10:40,],aes(x=a,y=b)) + 
    geom_point() + 
    geom_point(aes(x=a[c(10,12,13)],y=b[c(10,12,13)]),colour="red") 
```

更改所选范围的大小，我收到一个错误，大致翻译自德语：`Error...: Arguments implying different number of rows`. 奇怪的是，这随所选范围而变化。`[23:40]`会工作，`[22:40]`不会。

* * *

英文的错误是：

```
Error in data.frame(x = c(19L, 21L, 22L), y = c(0.28198, -0.6215,  : 
  arguments imply differing number of rows: 3, 31 
```

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-07-13T10:25:05.760

如果不同层之间的数据不同，则需要为每个层指定新数据。

您可以使用`data=...`每个`geom`需要不同数据的参数来执行此操作：

```
set.seed(1)
mydata <- data.frame(a=1:50, b=rnorm(50))
ggplot(mydata,aes(x=a,y=b)) + 
  geom_point(colour="blue") +
  geom_point(data=mydata[10:13, ], aes(x=a, y=b), colour="red", size=5) 
```

![在此处输入图像描述](../Images/3d05e40840ea163b1a186242df31eb8f.png)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2017-01-14T18:42:05.387

另一个选项在内部添加属性、颜色和大小的条件`geom_point`。然后我们手动控制那些使用`scale_colour_manual`和`scale_size_manual`分别。

```
set.seed(1)
mydata <- data.frame(a = 1:50, b = rnorm(50))
ggplot(mydata) + 
  geom_point(aes(x = a, y = b, colour = a > 9 & a < 14, size = a > 9 & a < 14)) + 
  scale_colour_manual(values = c("blue", "red")) + 
  scale_size_manual(values =c(1, 4))+
  theme(legend.position = "none") 
```

[![在此处输入图像描述](../Images/06bd4f00ac9a70d13bd861b9fcb3d2af.png)](https://i.stack.imgur.com/4bjFS.png)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2018-08-13T11:19:41.237

[gghighlight](http://yutani.rbind.io/post/2017-10-06-gghighlight/)的另一个解决方案：

```
a <- 1:50
b <- rnorm(50)
mydata <- data.frame(a=a,b=b, type = sample(letters, 50, replace = T))

library(gghighlight)
gghighlight_point(mydata, aes(x=a, y=b), label_key = type, 
                  a <= 14 & a >= 10 & b >= 0 , col="red") 
```

# iphone - iOS - 方向改变 - 视觉错觉或元素移动？

> ID：11467967
> 
> 赞同：0
> 
> 时间：2012-07-13T09:43:42.597
> 
> 标签：iphone, ios, ipad, animation, orientation

当我转动方向时，我想知道 iOS 中的动态动画。例如，在我的 iPad 上，动画在菜单中看起来非常“真实”。元素（应用程序、文件夹、停靠栏、背景图像、状态栏……）似乎以一种完美的审美方式滑到了正确的位置……
但在 App Store 中我发现了一个偏差，因为应用程序列表有另一种排列方式.
我的大问题：orientationChangeAnimation 是一种视错觉，还是真的如此动态？在 App Store 中，看起来实际屏幕正在转动，同时它的 alpha 值正在减小，而更改后的屏幕的横向/纵向方向也在做同样的反转（随着 alpha 值的增加在同一个轴上转动）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T11:23:39.797

是的，这实际上很容易做到，我在很多应用程序上都做过类似的事情。如果您想复制功能，您可以这样做：

在 willRotateToInterfaceOrientation 方法或 viewWillLayoutSubviews 方法中，您可以执行以下任一操作：

```
//Fade out
[UIView animateWithDuration:0.3 animations:^ {
    yourController.view.alpha = 0.2;
}];

//Fade In
[UIView animateWithDuration:0.3 animations:^ {
    yourController.view.alpha = 1.0;
}];

//Fade out fade in
[UIView animateWithDuration:0.15 animations:^ {
    yourController.view.alpha = 0.2;
}];

[UIView animateWithDuration:0.15 animations:^ {
    yourController.view.alpha = 1.0;
}]; 
```

干杯，

山姆

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T08:12:52.037

事实上，Springboard 确实可以移动东西（比如停靠栏），它还可以交叉淡入淡出项目（比如大多数应用程序图标）。

由于`viewWillLayoutSubviews`和`willRotateToInterfaceOrientation`在旋转期间在动画块内被调用，因此您可以简单地为 alpha 和 frame 等可动画属性分配新值。除非你想显式控制时间，否则不需要显式`animateWithDuration:animations:`调用；iOS 会在旋转过程中自动为您制作动画。

例如，在下面的代码中，红色和绿色方块在屏幕中心交叉淡入淡出，蓝色方块在旋转过程中在左上角和中上角之间移动。

```
CGRect b = self.view.bounds;
self.greenLabel = [[UILabel alloc] initWithFrame:CGRectMake(b.size.width / 2 - 50, b.size.height / 2 - 50, 100, 100)];
self.greenLabel.autoresizingMask = UIViewAutoresizingFlexibleLeftMargin | UIViewAutoresizingFlexibleRightMargin | UIViewAutoresizingFlexibleTopMargin | UIViewAutoresizingFlexibleBottomMargin;
self.greenLabel.backgroundColor = [UIColor greenColor];
[self.view addSubview:self.greenLabel];

self.redLabel = [[UILabel alloc] initWithFrame:self.greenLabel.frame];
self.redLabel.autoresizingMask = self.greenLabel.autoresizingMask;
self.redLabel.backgroundColor = [UIColor redColor];
[self.view addSubview:self.redLabel];

self.blueLabel = [[UILabel alloc] init];
self.blueLabel.backgroundColor = [UIColor blueColor];
[self.view addSubview:self.blueLabel];

...

- (void)viewWillLayoutSubviews {
  if (UIInterfaceOrientationIsLandscape(self.interfaceOrientation)) {
    self.greenLabel.alpha = 0;
    self.redLabel.alpha = 1;
    self.blueLabel.frame = CGRectMake((self.view.bounds.size.width - 100) / 2, 20, 100, 100);
  } else {
    self.greenLabel.alpha = 1;
    self.redLabel.alpha = 0;
    self.blueLabel.frame = CGRectMake(20, 20, 100, 100);
  }
} 
```

# python - “继续”是从 try catch 块中逃脱的 Pythonic 方式吗？

> ID：11467985
> 
> 赞同：4
> 
> 时间：2012-07-13T09:44:30.070
> 
> 标签：python, django

我是 django 的新手，想通过简单的 django 应用程序来了解更多信息，在代码中的一个地方，我必须选择`locationName`并获取与表中相同`locationName`的 id 匹配的元素。当我开始想知道`continue`逃避 for 循环的最 Pythonic 方式是什么？

有问题的代码如下：

```
for locationName in locationGroup:
    idRef = locationName.id
    try:
        element = location.objects.order_by('-id').filter(name__id=idRef)[0]
    except IndexError:
        continue 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-13T10:27:59.683

如果有一些你不想在 except 子句之后执行的代码`continue`是完全有效的，否则有些代码可能会`pass`更合适。

```
for x in range(y):
    try:
        do_something()
    except SomeException:
        continue
    # The following line will not get executed for the current x value if a SomeException is raised
    do_another_thing() 

for x in range(y):
    try:
        do_something()
    except SomeException:
        pass
    # The following line will get executed regardless of whether SomeException is thrown or not
    do_another_thing() 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-13T10:05:39.187

这正是`continue`/`break`关键字的用途，所以是的，这是最简单和最 Pythonic 的方式。

> 应该有一种——最好只有一种——明显的方法来做到这一点。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-13T09:45:37.187

你应该使用

```
try:
    element = location.objects.order_by('-id').filter(name__id=idRef)[0]
except IndexError:
    pass 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-13T10:41:22.310

你很难说出你在做什么。该代码通过查看第一个元素并捕获 IndexError 来检查您是否从查询中获得任何行。

我会以一种使这个意图更加清晰的方式来编写它：

```
for locationName in locationGroup:
    idRef = locationName.id
    rows = location.objects.order_by('-id').filter(name__id=idRef)
    if rows: # if we have rows do stuff otherwise continue
         element = rows[0]
         ... 
```

在这种情况下，您可以使用[`get`](https://docs.djangoproject.com/en/dev/ref/models/querysets/#django.db.models.query.QuerySet.get)which 使其更加清晰：

```
for locationName in locationGroup:
    idRef = locationName.id
    try:
         element = location.objects.get(name__id=idRef)
    except location.DoesNotExist:
         pass 
```

# ruby-on-rails - 是否可以将控制器动作“映射”到另一个控制器动作但更改某些参数？

> ID：11467998
> 
> 赞同：0
> 
> 时间：2012-07-13T09:45:18.730
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rails-activerecord, dry, rails-routing

我正在使用 Ruby on Rails 3.2.2，我想知道是否可以将控制器操作“映射”到另一个控制器操作但更改某些参数。也就是说，我有以下模型和控制器：

```
# File system:
# /app/models/articles/user_association.rb
# /app/models/users/article_association.rb
# /app/controllers/users/article_associations_controller.rb
# /app/controllers/articles/user_associations_controller.rb

# /app/models/articles/user_association.rb
class Articles::UserAssociation < ActiveRecord::Base
  ...
end

# /app/models/users/article_association.rb
class Users::ArticleAssociation < Articles::UserAssociation # Note inheritance
  #none
end

# /app/controllers/users/article_associations_controller.rb
class Articles::UserAssociationsController < ApplicationController
  def show
    @articles_user_association = Articles::UserAssociation.find(params[:article_id])
    ...
  end

  def edit
    @articles_user_association = Articles::UserAssociation.find(params[:article_id])
    ...
  end

  ...
end

# /app/controllers/articles/user_associations_controller.rb
class Users::ArticleAssociationsController < ApplicationController
  def show
    # It is the same as the Articles::UserAssociationsController#show 
    # controller action; the only thing that changes compared to 
    # Articles::UserAssociationsController#show is the usage of 
    # 'params[:user_id]' instead of 'params[:article_id]'.
    @users_article_association = Users::ArticleAssociation.find(params[:user_id])
    ...
  end

  def edit
    # It is the same as the Articles::UserAssociationsController#edit
    # controller action; the only thing that changes compared to  
    # Articles::UserAssociationsController#edit is the usage of
    # 'params[:article_id]' instead of 'params[:user_id]'. 
    @users_article_association = Users::ArticleAssociation.find(params[:user_id])
    ...
  end

  ...
end 
```

因此，我想将指向`/users/:user_id/article`路径的 HTTP 请求作为与路径相关的控制器操作来处理`/articles/:article_id/user`。

*注意*：我想这样做是为了干燥（不要重复自己）代码，但是，如前所述，和之间唯一改变`Users::ArticleAssociationsController`的`Articles::UserAssociationsController#show`是`params`.

是否可以？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T13:25:05.457

您不仅可以修改参数，还可以更改要查找的类。

```
@users_article_association = Users::ArticleAssociation.find(params[:user_id])
# and
@users_article_association = Articles::UserAssociation.find(params[:article_id]) 
```

它们完全不同。我建议你处理这些差异，然后将真正的公共代码提取到另一个方法中，并从双方调用。