# StackOverflow 问答 10343000-10343999

# flash - Datamapper 验证错误用括号括起来

> ID：10343003
> 
> 赞同：1
> 
> 时间：2012-04-26T23:53:03.010
> 
> 标签：flash, validation, sinatra, datamapper

我已经让 Datamapper 验证在 Sinatra 中工作，但是当尝试使用**flash[:error]**显示它们时，我不断收到被括号和引号包围的错误。

例如：[“电子邮件已被占用”]

```
%w{sinatra haml data_mapper bcrypt sinatra/flash}.each { |gem| require gem }

DataMapper.setup(:default, ENV['DATABASE_URL'] || "sqlite3://#{Dir.pwd}/development.db")

class User
   include DataMapper::Resource
   property :id,             Serial
   property :email,          String, :length => 255, :unique => true
   property :password,       String, :length => 255
   property :password_salt,  String, :length => 255
   attr_accessor :password, :password_confirmation

   validates_format_of :email, :as => :email_address
   validates_confirmation_of :password
end

enable :sessions

get '/signup' do
  haml :signup
end

post '/signup' do
@user = User.new(:email => params[:email], :password => params[:password], 
               :password_confirmation => params[:password_confirmation],
               :password_salt => BCrypt::Engine.generate_salt)
 if @user.save
   redirect '/'
 else
   flash[:error] = @user.errors.full_messages # here is the problem (I think)
   redirect '/signup'
 end
end

DataMapper.auto_upgrade! 
```

和 signup.haml

```
%h1 Sign up here!

  - if flash[:error]
  %p= flash[:error] ## Shortened for brevity (didn't include forms) 
```

我已经在@user.errors.full_messages 上尝试了所有东西，扁平化，to_s 等，但似乎没有什么能摆脱括号和引号。

这实际上是 gem sinatra-flash 的问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T00:09:04.207

怎么样

```
@user.errors.full_messages.join(",") 
```

# php - 将数组值写入mysql数据库

> ID：10343014
> 
> 赞同：0
> 
> 时间：2012-04-26T23:54:59.737
> 
> 标签：php, mysql, arrays

我已经从我的 Twitter 帐户中检索了直接消息，并且我想将发件人 ID、发件人屏幕名称和文本存储在 mysql 数据库表中，以便人工智能标记语言引擎读取它，以便它可以做出相应的回复。执行程序后，我检查了数据库，没有从数组中输入任何行，也没有错误消息。

这是我的代码：

```
$connection = new TwitterOAuth($consumer_key,$consumer_secret, $oAuthToken, $oAuthSecret);

// Get direct message data 
$content = $connection ->get('https://api.twitter.com/1/direct_messages.json');

echo '<pre>',print_r($content,true),'</pre>';

function write_messages_to_database() {

require_once('connect_to_database');

$conn = mysql_connect("127.0.0.1", "Diego", "frafra") or die(mysql_error());
mysql_select_db('bot', $conn) or die(mysql_error());

foreach ($content as $directmessage) {
   mysql_query("INSERT INTO 'twitter_senders' ('sender_id', 'sender_name'), VALUES ('{$content->id}', '{$content->sender_screen_name}')");
   $directmessage_id = mysql_last_insert_id();
   foreach ($directmessage->text as $text) {
        mysql_query("INSERT INTO 'message_senders' ('message'), VALUES ('{$text->text}')");
   } 

 }
} 
```

下面，我只想从中提取 和 中的值 的`id`数组。此外，该数组有三个对象，但我只是粘贴了一个作为示例。`sender_screen_name``text`

你怎么看？

```
大批
(
    [0] => 标准类对象
        (
            [sender_id] => 374504554
            [recipient_screen_name] => Infobot2012
            [recipient_id] => 428575951
            [收件人] => stdClass 对象
                (
                    [id] => 428575951
                    [profile_image_url] =>
                    [网址] =>
                    [created_at] => 2011 年 12 月 4 日星期日 22:56:38 +0000
                    [followers_count] => 3
                    [default_profile] => 1
                    [profile_background_color] => C0DEED
                    [语言] => zh
                    [utc_offset] =>
                    [名称] => 迭戈运河
                    [profile_background_image_url] =>
                    [位置] =>
                    [profile_link_color] => 0084B4
                    [listed_count] => 0
                    [已验证] =>
                    [受保护] =>
                    [profile_use_background_image] => 1
                    [is_translator] =>
                    [关注] =>
                    [描述] =>
                    [profile_text_color] => 333333
                    [statuses_count] => 10
                    [screen_name] => Infobot2012
                    [profile_image_url_https] =>
                    [时区] =>
                    [profile_background_image_url_https] =>
                    [friends_count] => 14
                    [default_profile_image] => 1
                    [contributors_enabled] =>
                    [profile_sidebar_border_color] => C0DEED
                    [id_str] => 428575951
                    [geo_enabled] =>
                    [收藏夹数] => 0
                    [profile_background_tile] =>
                    [通知] =>
                    [show_all_inline_media] =>
                    [profile_sidebar_fill_color] => DDEEF6
                    [follow_request_sent] =>
                )

            [id_str] => 194550124767227905
            [发件人] => 标准类对象
                (
                    [id] => 374504554
                    [profile_image_url] =>
                    [网址] =>
                    [created_at] => 2011 年 9 月 16 日星期五 12:46:20 +0000
                    [followers_count] => 19
                    [default_profile] => 1
                    [profile_background_color] => C0DEED
                    [语言] => zh
                    [utc_offset] =>
                    [名称] => 迭戈运河
                    [profile_background_image_url] =>
                    [位置] => 都柏林
                    [profile_link_color] => 0084B4
                    [listed_count] => 0
                    [已验证] =>
                    [受保护] =>
                    [profile_use_background_image] => 1
                    [is_translator] =>
                    [以下] => 1
                    [描述] =>
                    [profile_text_color] => 333333
                    [statuses_count] => 92
                    [screen_name] => sdiegolo
                    [profile_image_url_https] =>
                    [时区] =>
                    [profile_background_image_url_https] =>
                    [friends_count] => 79
                    [default_profile_image] =>
                    [contributors_enabled] =>
                    [profile_sidebar_border_color] => C0DEED
                    [id_str] => 374504554
                    [geo_enabled] =>
                    [收藏夹数] => 1
                    [profile_background_tile] =>
                    [通知] =>
                    [show_all_inline_media] =>
                    [profile_sidebar_fill_color] => DDEEF6
                    [follow_request_sent] =>
                )

            [created_at] => 2012 年 4 月 23 日星期一 22:15:38 +0000
            [id] => 1.9455012476723E+17
            [sender_screen_name] => sdiegolo
            [文本] => 你好信息机器人！
        )

```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T00:07:26.913

1.  你有没有调用你的`write_messages_to_database()`函数？

2.  无论如何，我建议您按照以下方式重新定义它：

    ```
    function write_messages_to_database($content) {
        // Use PDO - it'll make your life so much easier
        $dbh = new PDO('mysql:dbname=bot;host=127.0.0.1', "Diego", "frafra");

        // use prepared statements to prevent SQL injection
        // see http://bobby-tables.com for more info
        // great thing is, we can prepare once and use many!
        $sender_stmt = $dbh->prepare("
            INSERT INTO twitter_senders (sender_id, sender_name)
            VALUES (:id, :name)
        ");
        $sender_stmt->bindParam(":id"  , $sender_id  );
        $sender_stmt->bindParam(":name", $sender_name);

        $message_stmt = $dbh->prepare("
            INSERT INTO message_senders (message) VALUES (:text)
        ");
        $message_stmt->bindParam(":text", $text);

        foreach ($content as $directmessage) {
           $sender_id   = $directmessage->sender->id  ;
           $sender_name = $directmessage->sender->name;
           $sender_stmt->execute();

           // this is pointless...
           $directmessage_id = $dbh->lastInsertId();

           $text = $directmessage->text;
           $message_stmt->execute();
        }
    } 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T00:14:39.390

除非我们知道错误是什么，否则无法帮助您。

尝试这样做：

```
foreach ($directmessage->text as $text) {
        mysql_query("INSERT INTO 'message_senders' ('message'), VALUES ('{$text->text}')") 
        or die(mysql_error());
       } 
```

此外，更好的方法是：

```
foreach ($directmessage->text as $text) {
    $query = sprintf("INSERT INTO 'message_senders' ('message'), VALUES ('%s')"
                , mysql_real_escape_string($text->text));
    mysql_query($query) or die(mysql_error());
} 
```

# c# - Farseer 物理学不起作用

> ID：10343018
> 
> 赞同：0
> 
> 时间：2012-04-26T23:56:14.573
> 
> 标签：c#, windows-phone-7, xna, farseer

我刚刚开始将大量项目从 FPE2.x 移植到 FPE 3.3.1，我的所有物理都遇到了一些问题。

这是我正在做的一个示例，它证明了我的问题

[http://pastebin.com/wNfPhJUT](http://pastebin.com/wNfPhJUT)

我不能锻炼我做错了什么

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T12:01:41.823

问题是对象的大小，在 FPE2.x 中它可以轻松处理非常大的对象（即 100 x 100），但在 FPE 3.x 中它们需要小得多（即 0.1 x 0.1）

# c++ - C++：在仿 STL 类中使用任何迭代器类型？

> ID：10343019
> 
> 赞同：0
> 
> 时间：2012-04-26T23:56:14.727
> 
> 标签：c++, stl, iterator

我正在创建一个与向量（类项目）非常相似的容器类，并定义了一个迭代器子类。其中一个 ctor 采用两个迭代器参数，并使用它们表示的半开范围构建数据结构（双向链表）。

下面的代码（几乎）适用于使用两个 Sol::iterator 类型的迭代器调用 insert(iterator, iterator) 的情况（由于某种原因，*ita 总是指向正确的值，但 insert(*ita) 调用不'似乎没有增加价值？？）。（更大的）问题是插入调用需要适用于所有迭代器类型（例如vector::iterator），而我无法追踪如何使其工作。我试过 typedef / typename T::iterator iterator，但最安静的 g++ 是使用 'typename T::iterator iterator'，它返回

```
g++ ex1.cc -o sol -Wall -Wextra -ansi -pedantic
In file included from ex1.cc:1:0:
Sol.h:87:16: error: expected ‘)’ before ‘ita’
ex1.cc:109:5: error: expected ‘}’ at end of input
In file included from ex1.cc:1:0:
Sol.h:84:3: error: expected unqualified-id at end of input
make: *** [ex1] Error 1 
```

这没有多大意义；至少对我来说。这是粗略的笔触：

```
template <class T, int find_val = 1, class Compare = std::less<T> >
class Sol{

public:
    typedef unsigned int size_type; //typedef'ing class variable types
    typedef T key_type; 
    typedef T value_type; 
    //typename T::iterator iter;

private:

    struct node{ //Used as 'links' in the chain that is the doubly linked list
        T data;
        node *prev;
        node *next;
    };

    node *head, *tail; //The head and tail of the dll
    int find_promote_value; //How much should find() shift a value?

public:
    class iterator{
        private:
            node *no;
            friend class Sol;
            iterator(node *p) : no(p){
            }
        public:
            iterator() : no(0){
            }

            iterator operator++(){ //Preincrement
                no = no->next;
                return *this;
            }

            iterator operator++(int){ //Postincrement
                iterator temp = *this;
                ++*this;
                return temp;
            }

            iterator operator--(){  //Predecrement
                no = no->prev;
                return *this;
            }

            iterator operator--(int){  //Postdecriment
                iterator temp = *this;
                --*this;
                return temp;
            }

            T operator*(){
                return no->data;
            }

            T *operator->(){
                return &no->data;
            }

            bool operator==(const iterator &rhs){
                return no == rhs.no;
            }

            bool operator!=(const iterator &rhs){
                return no != rhs.no;
            }       
    };

    Sol() : head(0), tail(0), find_promote_value(find_val){
    }

    Sol(const Sol &rhs) : head(rhs.head), tail(rhs.tail), find_promote_value(rhs.find_promote_value){
    }

    typename T::iterator iterator;
    Sol(iterator ita, iterator itb){ //Sol.h::87\. Problem line
        while (ita != itb){
            iterator itr = insert(*ita);
std::cout << "Inserting " << *ita << ",printout: " << *itr <<"\n";
//dump();
            ++ita;
        }
    }

    ~Sol(){
        clear();
    }

    iterator insert(T input){
        node *n = new node;
        n->next = NULL;
        n->prev = tail;
        n->data = input;

        if(!tail){
            head = n;
            tail = n;
        }
        else{
            tail->next = n;
            tail = n;
        }

        return iterator(tail);
    }
   }; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T00:22:21.650

> （更大的）问题是插入调用需要适用于所有迭代器类型（例如vector::iterator），而我无法追踪如何使其工作。

您需要它适用于所有迭代器类型的事实表明它应该是一个模板函数。如果您查看容器`insert()`提供的函数`std::list`，您会发现其中一个具有以下声明：

```
template <class InputIterator>
void insert(iterator position, InputIterator first, InputIterator last); 
```

这允许它使用任何类型`first`和`last`（指定要插入的半开范围），只要该类型提供`insert()`函数使用的操作。你应该考虑做类似的事情。只要您的`insert()`函数仅对这些参数执行以下操作，您就应该能够使用几乎任何迭代器（输出迭代器除外）：

*   比较
*   取消引用
*   增量

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T23:59:16.213

您在课程结束时缺少一个分号`iterator`。

# java - 不知道这个错误是什么意思？

> ID：10343020
> 
> 赞同：-4
> 
> 时间：2012-04-26T23:56:20.063
> 
> 标签：java

```
 System.out.print("Enter Point1 X: ");
        int point1X = G51OOPInput.readInt();
        System.out.print("Enter Point1 Y: ");
        int point1Y = G51OOPInput.readInt();
        System.out.print("Enter Point2 X: ");
        int point2X = G51OOPInput.readInt();
        System.out.print("Enter Point2 Y: ");
        int point2Y = G51OOPInput.readInt();
        MyPoint p1 = new MyPoint(point1X, point1Y);
        MyPoint p2 = new MyPoint(point2X, point2Y);
        MyLine line = new MyLine(p1, p2); 
```

使用此代码，我收到一条错误消息：“无法实例化 MyLine 类型”，我不知道这意味着什么或如何修复它。请问有什么帮助吗？

那来自主文件，但 MyLine 的摘要在这里[http://pastebin.com/3tRbgtge](http://pastebin.com/3tRbgtge)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T00:01:20.520

是的，你的 MyLine 类是抽象的，你不能实例化它。

```
public abstract class MyLine extends MyShape{ 
```

您需要实例化它的具体子类。

**编辑**
或者，如果 MyLine 是您的类，并且您因为没有实现所有必要的方法而将其抽象化，则编辑该类，删除抽象关键字，并确保实现其父类 Shape 中定义的*所有抽象方法。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T00:01:42.237

`MyLine`是一个`abstract`类。你不能实例化它。您需要创建一个具体的子类`MyLine`并实例化它。

# asp.net - 多个 web.config 重定向规则

> ID：10343031
> 
> 赞同：1
> 
> 时间：2012-04-26T23:57:27.873
> 
> 标签：asp.net, windows, web-config, http-status-code-301

我尝试进行 301 重定向，因为我已经更改了域。使用 Windows 服务器并在 web.config 中添加以下规则。

```
 <rule name="redirectDomain" stopProcessing="true">
                    <match url="(.*)" />
                    <action type="Redirect" url="http://replacement-cost.net/{R:1}" redirectType="Permanent" />
                    <conditions logicalGrouping="MatchAny">
                        <add input="{HTTP_HOST}" pattern="^(www.)?windshield-replacement-cost\.org$" />
                    </conditions>
              </rule> 
```

只要新站点上的所有页面都具有相同的名称和文件结构，这就可以正常工作......除了作为旧域根的页面。现在在[http://replacement-cost.net/windshield-replacement-cost](http://replacement-cost.net/windshield-replacement-cost)

是否可以编写另一个规则来仅重定向根？而让第二条规则重定向所有其他页面？可能是某种执行顺序？

基本上可以达到与此相同的结果

如果 ruleURLISROOT = true > 转到[http://replacement-cost.net/windshield-replacement-cost](http://replacement-cost.net/windshield-replacement-cost)

别的

使用上面的代码重定向

任何帮助，将不胜感激。我花了很长时间才走到这一步！谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-27T00:22:06.303

这是新规则，应在现有规则之前添加

```
<rule name="redirect Root Domain" stopProcessing="true">
    <match url="^$" />
    <conditions logicalGrouping="MatchAll" trackAllCaptures="false">
        <add input="{HTTP_HOST}" pattern="^(www.)?windshield-replacement-cost\.org$" />
    </conditions>
    <action type="Redirect" url="http://replacement-cost.net/windshield-replacement-cost" />
</rule> 
```

这是您现有的规则

```
<rule name="redirectDomain" stopProcessing="true">
    <match url="(.*)" />
    <conditions logicalGrouping="MatchAny" trackAllCaptures="false">
        <add input="{HTTP_HOST}" pattern="^(www.)?windshield-replacement-cost\.org$" />
    </conditions>
    <action type="Redirect" url="http://replacement-cost.net/{R:1}" redirectType="Permanent" />
</rule> 
```

# php - CakePHP ajax 表单更新复制页面

> ID：10343037
> 
> 赞同：4
> 
> 时间：2012-04-26T23:58:40.960
> 
> 标签：php, ajax, cakephp, cakephp-2.1

我在我的网站上有一个使用 Js 助手的基本 ajax 表单，它工作正常，但是当出现验证错误时，更新回调会在我的成功 div 中复制整个页面。

成功分区：

```
<div id="success"></div> 
```

提交按钮：

```
echo $this->Js->submit('Send', array(
    'before'=>$this->Js->get('#sending')->effect('fadeIn'),
    'success'=>$this->Js->get('#sending')->effect('fadeOut'),
    'update'=>'#success',
    'class'=>'btn btn-primary'
)); 
```

Javascript：

```
$(document).ready(function(){

    $('#postkey, #gender, #hair, #location, #message').blur(function(){
        $.post(
            '/Cake_ajax/Posts/validate_form',
            { field: $(this).attr('id'), value: $(this).val() }
            //handleNameValidation
        );
    });

}); 
```

在我的控制器中验证表单功能：

```
public function validate_form(){
    if($this->RequestHandler->isAjax()){
        $this->request->data['Post'][$this->request['data']['field']] = $this->request['data']['value'];
        $this->Post->set($this->request->data);
        if($this->Post->validates()){
            $this->autorender = FALSE; // don't render a view
            $this->set('error','');
        }else{
          $this->layout ="ajax";
            $this->autoRender = FALSE;
            $error = $this->validateErrors($this->Post);
            $this->set('error',$this->Post->validationErrors[$this->request['data']['field']][0]);  
        }
    }
} 
```

我不知道这些信息是否足够继续，如果我需要发布更多代码，请告诉我。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T13:30:03.600

我刚刚使用您的 zip 文件测试了您的应用程序。

我观察到的是，这不是放在`#success`div 中的整个页面，而只是`Posts/add.ctp`视图的内容。所以基本上这意味着 RequestHandler 正确地完成了它的工作，这意味着使用的布局是**“** ajax”布局。为了摆脱表单之外的任何其他内容，add.ctp 页面不应包含表单之外的任何其他内容。在您的情况下`Posts/add.ctp`包含导航链接，这就是它们被重复的原因。

也就是说，提交按钮当前所做的是获取`Posts/add.ctp`视图内容并将其插入到您的空`#success`div 中。但是您永远不会删除页面上已经存在的表单。您可以做的是更新包含您的第一个表单的 div 的内容，甚至是整个`Posts/add.ctp`视图的内容。

在您的情况下，只需更新div`#content`而不是`#success`div 可能会满足您的需求：

```
echo $this->Js->submit('Send', array(
  'before'=>$this->Js->get('#sending')->effect('fadeIn'),
  'success'=>$this->Js->get('#sending')->effect('fadeOut'),
  'update'=>'#content',
  'class'=>'btn btn-primary',
  'controller'=>'posts',
  'action'=>'add'
)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T15:49:14.680

我遇到了同样的问题。尽管 nIcO 似乎提供了解决方案，但在我的情况下它并没有帮助，因为 Drawrdesign 想要的成功消息仍未呈现。

因此，我查看了您的 zip 文件并找到了解决方案。定义了两个 ajax 调用：1) .blur 和 2) .bind。1) 用于字段的验证，并通过 AJAX 向 PostsController 的 validate_form() 函数提交数据。而2）用于观察提交按钮的点击事件，并将数据发送给PostsController的add()函数。

此问题出现在 2)，因为您单击了提交按钮。因此，您应该查看 PostsController 的 add() 函数。在 validate_form() of 1) 函数中，您添加了以下行：

```
$this->autoRender = FALSE; 
```

这就是解决方案。因为在 CakePHP 自动呈现视图的地方，您不希望它发生，因为 AJAX。因此，在情况 1) 完成时，应将其添加到情况 2) 中的 add() 函数中，如下所示：

```
public function add() {
// Ajax post
if(!empty($this->request->data)) {
    // ...
    $this->autoRender = FALSE; // ** NEW LINE **
        if($this->Post->save($this->request->data)) {
            // ...     
        } 
        // ...
    } 
    // ...
} 
```

因此，它停止（自动）渲染 div="#success" 中的 add.ctp，并且您的“sending..”和“succes.ctp”的其他消息仍然开始显示。

PS。@Drawrdesign，你有没有看过 andrewperk 的指导视频？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-28T07:20:51.593

在 Ajax 请求处理中将布局设置为 ajax。因此错误消息将使用 ajax 布局而不是默认布局呈现。

**更新**

```
public function validate_form(){
if($this->RequestHandler->isAjax()){
    $this->request->data['Post'][$this->request['data']['field']] = $this->request['data']['value'];
    $this->Post->set($this->request->data);
    if($this->Post->validates()){            
        $this->autoRender = FALSE; // don't render a view
        $this->set('error','');
    }else{
        $this->layout ="ajax";
        $this->autoRender = FALSE; 
        $error = $this->validateErrors($this->Post);
        $this->set('error',$this->Post->validationErrors[$this->request['data']['field']][0]);  
    }
} 
```

}

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-02T15:26:31.760

确保您是：

使用 RequestHandler 组件（首选）：

```
class AppController {

    var $compontents = array('RequestHandler');

} 
```

或在您的操作中手动将布局设置为“ajax”：

```
$this->layout = "ajax" 
```

请求处理程序会在检测到 Ajax 请求时自动将布局设置为 ajax。

ajax 布局不返回渲染视图以外的任何内容。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-04T13:33:21.023

您好，首先，您似乎正在使用 cake 2 lib 并使用 1.3 代码，这可能会起作用，但部分已弃用，可能正在检查[迁移指南](http://book.cakephp.org/2.0/en/appendices/2-0-migration-guide.html)。控制台工具还可以将您的代码升级到 2.0/2.1 。

其次，您确实想渲染视图和空布局吗？$errors 在 Views/Posts/validate_form.ctp 中定义。您正在设置 $errors 然后不渲染视图。删除将自动渲染设置为 false 并放置在控制器操作的顶部。

```
$this->layout = 'ajax';
Configure::write("debug",0); 
```

有什么好处吗？

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-03-09T09:14:56.450

```
public function admin_edit_comment() {
    $this->layout = 'ajax';
    $this->autoRender = false;
    if ($this->request->is('ajax')) {
        if ($this->FaComment->save($this->request->data, false)) {
            $response['status'] = 'success';
            $response['action'] = 'edit_comment';
            $response['data'] = $this->request->data['FaComment'];
            $response['message'] = __d('vanderdeals', 'Comment saved successfully');

    } else {
            $response['status'] = 'error';
            $response['model'] = 'FaComment';
            $response['message'] = __d('vanderdeals', 'Internal server error occurred. Please try again later.');
        }

        echo json_encode($response);
    }
} 
```

# actionscript-3 - socket.readBytes 不移动指针

> ID：10343038
> 
> 赞同：3
> 
> 时间：2012-04-26T23:58:52.800
> 
> 标签：actionscript-3, sockets

我在尝试使用 ByteArrays 通过 Socket 发送对象和 unsigned int 时遇到了一个奇怪的问题。我正在尝试处理我可能会在多个数据包中接收数据的情况。

这是我的套接字数据处理程序：

```
protected function handleSocketData(e:ProgressEvent):void{
        var s:Socket = e.target as Socket;

        trace("pre if " + len + " " + s.bytesAvailable);
        if (len == 0 && s.bytesAvailable >= 4) {
            len = s.readUnsignedInt();

        }

        trace(len + " " + s.bytesAvailable);
        if (len > 0 && s.bytesAvailable >= len){
            var ba:ByteArray = new ByteArray();
            //s.readBytes(ba, 0, len);
            s.readBytes(ba, 0, s.bytesAvailable); //should be len

            //trace("handle socket before inflate " + ba.length);
            ba.inflate();
            //trace("handle socket after inflate " + ba.length);
            var o:Object = ba.readObject();
            Overlord.updatePlayers(o);
            trace(o.player);
            len = 0;

        }
} 
```

问题在于`s.readBytes(ba, 0, len);`

我正在使用 len （在类范围内定义）来处理我可能会收到多个数据包的情况。现在这似乎在我**第**一次通过套接字获取数据时起作用。

```
pre if 0 44 - trace I'm getting before the first if statement
38 40 - trace I'm getting after
frank - Everything comes in fine, working! 
```

现在，如果我再次通过套接字发送数据：

```
**first send:**
pre if 0 44
38 40
frank - working, yay!
**things start to fail every send after:**
pre if 0 46
218759168 42
pre if 218759168 84
218759168 84
pre if 218759168 127
218759168 127 
```

现在看来 readBytes 将数据留在缓冲区中。

奇怪的是，当我换掉`s.readBytes(ba, 0, len);`一切`s.readBytes(ba, 0, s.bytesAvailable);`似乎都有效时：

**使用 s.readBytes(ba, 0, s.bytesAvailable);**

```
**first send**
pre if 0 44
38 40
frank
**everything seems to work after, no old data in the buffer?**
pre if 0 44
38 40
frank
pre if 0 43
37 39
frank 
```

使用的问题`bytesAvailable`是现在我无法处理多个数据包。

```
pre if 2214 2218
2214 2218
RangeError: Error #2006: The supplied index is out of bounds.
at flash.utils::ByteArray/readObject() 
```

我不太确定我在这里缺少什么，似乎只有在我使用 socket.bytesAvailable 时缓冲区才会被清除。有人有意见吗？

**编辑**

我正在使用这种方法通过套接字发送数据。通过写入 ByteArray 的长度并在数据处理程序中读回它，我试图处理跨多个数据包获取数据对象。

```
 public function sendData(socketData:*):void{
        if(_connected){
            //trace("sending");
            var ba:ByteArray = new ByteArray();
            ba.writeObject(socketData);
            ba.position = 0;
            //trace("byteArray len before send and defalte: " + ba.length)
            ba.deflate();
            //trace("byteArray len before send and after defalte: " + ba.length)
            socket.writeUnsignedInt(ba.length);
            socket.writeBytes(ba, 0, ba.length);
            socket.flush();
        } else {
            throw new Error("Socket not open");
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T06:32:41.833

您应该真正将数据从套接字中拉出到一个字节数组中，然后对字节数组而不是套接字进行操作。当您在套接字或字节数组上调用任何 read***() 方法时，您会将 .position 属性移动到您的 read 方法的值。这也是您在 readObject 上收到提供的索引错误的原因。在调用 readObject 之前，先将 BA 的 .position 属性设置为 0。

```
 ba.position = 0;
 var o:Object = ba.readObject(); 
```

我对您的问题的评论以及我认为此答案中的详细信息至少是您的代码的一个基本问题。您还应该发布发送套接字的代码，以便我们更容易解决这个问题。

# php - 为什么 Aptana/Eclipse 必须“构建”PHP 项目？

> ID：10343040
> 
> 赞同：2
> 
> 时间：2012-04-26T23:59:18.493
> 
> 标签：php, eclipse, aptana

当我在 Aptana/Eclipse 中创建一个新项目时，我必须指定我的项目不应“自动构建”以避免这种明显不需要的行为。**如果这是一种编译语言，我会理解，但既然是 PHP，为什么 Aptana 需要构建，它在做什么需要这么长时间？**

当我在测试服务器上启动一个 PHP 文件并被视为永无止境的状态栏时，这尤其令人讨厌，因为 IDE 运行我的 jQuery UI 和 CKEditor 库中的每个文件，其中文件非常多。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T03:18:14.370

构建不仅仅意味着“编译”。例如，它可能正在验证 XML、HTML、JavaScript 等文件；它可能意味着将文件复制到构建输出位置（它为 Java 项目执行此操作，但我不使用 PHP，所以我不确定这是否是 PHP 构建的一部分）。

要了解更多关于它在做什么的信息，请打开项目的属性并查看构建器部分；还可以查看是否有验证或 XML 或其他部分可能允许您配置构建期间发生的情况。最重要的是，除非出现问题，否则构建不应超过几秒钟。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T01:16:05.337

其中一项任务是自省每个文件、函数、类、常量等以构建自动完成列表。

如果您需要快速进行一次性编辑，请不要使用繁重的 IDE :)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T04:21:22.287

您可以通过右键单击 > 构建 > 从构建中排除来从构建中排除项目。但是，是的，如果您想要适当的内容帮助，则该步骤是必要的。

# javascript - JQuery AJAX 在发出请求之前失败

> ID：10343044
> 
> 赞同：0
> 
> 时间：2012-04-27T00:00:06.137
> 
> 标签：javascript, jquery, ajax

这就是我正在做的事情：

```
$.ajax({
    "url":"localhost:8888/check_app",
    "success":function(data) {
        alert("success!");
        callback(data);
    },
    "error":function(data){
        alert(JSON.stringify(data));
    }
}); 
```

FF 和 Chrome 都出现了哪些错误。Firebug 显示没有发出 XHR 请求。

* * *

编辑：我在后端使用 node.js；控制台显示它没有收到任何请求。

当我将 $.ajax 更改为 $.get 时，我确实在 Firebug 中看到了一个 XHR 请求，但该 url 是一些我无法识别的奇怪编码字符串。

整个下午我都在工作...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T00:03:51.770

现在，您的浏览器正在寻找一个名为`localhost:8888`的文件夹以及该文件夹中名为`check_app`.

您想要的是使路径成为绝对路径，`http://localhost:8888/check_app`而不是。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T00:03:11.907

首先，对象键周围没有引号 - 它应该是 url : 而不是 "url" ：

您可能还需要在 $.ajax 的 URL 前面放置一个 http://，因为 $.get...奇怪的行为可能不需要它，但我想可能。

# c - 如何从线程调用的函数返回

> ID：10343047
> 
> 赞同：1
> 
> 时间：2012-04-27T00:01:00.153
> 
> 标签：c, multithreading

一个非常基本的概念疑问。请不要因为这个愚蠢的问题而恨我

如果我们从我的主函数中的线程调用如下函数

```
 char * function()
    {
            char message[10];
            .................
            ....do sth ......
            return message;
    } 
```

在这种情况下，内部缓冲区是自动的，并在线程函数返回时立即消失。

但是这样做是有效的

```
 char * function()
    {
            char * message = (char*)malloc(10);
            .................
            ....do sth ......
            return message;
    } 
```

我对下面的行感到困惑。这如何解决问题？

`Each thread will allocate a different array and store the address of that array in a stack variable. Every thread has its own stack so automatic data objects are different for each thread.`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T00:17:42.987

> 每个线程将分配一个不同的数组并将该数组的地址存储在堆栈变量中。每个线程都有自己的堆栈，因此每个线程的自动数据对象都不同。

此评论与您的​​第二个代码段无关。这个注释的意思是因为每个线程都有自己的堆栈；如果多个线程同时调用同一个函数，它们会将局部变量压入各自的堆栈，因此不会出现冲突。

事实上，您的第二个代码片段之所以有效，是因为每次调用该函数时，您都在动态分配新的堆内存并返回指向它的指针。

**注意：**一旦你完成它，取消分配内存通常很好:)

**另外：**请重新查看上面的第一个代码片段和[james](https://stackoverflow.com/users/439751/james)和[corbin 的](https://stackoverflow.com/users/567864/corbin)评论；这个功能，虽然有些可疑，但*不是无效*的~例如，[看这里](http://ideone.com/eTFtX)

# python - 我将如何在pygame中制作像相机一样的运动？

> ID：10343052
> 
> 赞同：1
> 
> 时间：2012-04-27T00:01:43.657
> 
> 标签：python, animation, pygame

我的游戏是平台游戏。我希望玩家在距离中心 X 像素时移动，向左或向右移动。

我知道 pygame 没有任何东西可以让相机移动。

当玩家到达距离中心 X 像素的点时，停止玩家移动并让地形向相反方向移动以显示可移动地形的错觉，就像相机运动一样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T00:08:24.183

让相机以玩家为中心的一种非常基本的方法是偏移您绘制的所有内容，以便玩家始终位于相机的中心。在我自己的游戏中，我使用一个函数来转换坐标：

```
def to_pygame_coords(coords):
    # move the coordinates so that 0, 0 is the player's position
    # then move the origin to the center of the window
    return coords - player.position.center + window.position.center 
```

要对此进行扩展，使其不是绝对定位在播放器上，您可以改为将窗口居中放置在一个盒子上。然后你更新盒子的中心，这样如果玩家离开盒子，盒子就会跟着他移动（从而移动相机）。

伪代码（未测试负坐标）：

```
BOX_WIDTH = 320
BOX_HEIGHT = 240
box_origin = player.position.center
def update_box(player_coords):
    if player_coords.x - box_origin.x > BOX_WIDTH:
        box_origin.x = player_coords.x - BOX_WIDTH
    elif box_origin.x - player_coords.x > BOX_WIDTH:
        box_origin.x = player_coords.x + BOX_WIDTH
    if player_coords.y - box_origin.y > BOX_HEIGHT:
        box_origin.y = player_coords.y - BOX_HEIGHT
    elif box_origin.y - player_coords.y > BOX_HEIGHT:
        box_origin.y = player_coords.y + BOX_HEIGHT

def to_pygame_coords(coords):
    # move the coordinates so that 0, 0 is the box's position
    # then move the origin to the center of the window
    return coords - box_origin + window.position.center 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T18:29:13.037

可视化：

视差滚动： http: [//blog.shinylittlething.com/wp-content/uploads/2009/08/parallax.png](http://blog.shinylittlething.com/wp-content/uploads/2009/08/parallax.png)（通常有多个图层，以不同的速度滚动，以显示距离。）

2d tilemap 滚动： [http ://mikecann.co.uk/wp-content/uploads/2011/11/tm.png](http://mikecann.co.uk/wp-content/uploads/2011/11/tm.png)

在纸上绘制坐标/这些图像有助于可视化问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T23:18:21.427

您可以制作一个名为 xscroll 的东西，将其添加到应该在屏幕上滚动的所有内容中。然后，当您从中心到达一定距离时，您不会将玩家的 movespeed 添加到他的位置，而是从 xscroll 中添加或减去 movespeed。这使得一切都以您角色移动的相同速度非常顺利地向后移动。我在我所有的游戏中都使用它，我从来没有遇到过问题。

# android - 忽略Android中的方向变化

> ID：10343055
> 
> 赞同：0
> 
> 时间：2012-04-27T00:02:14.430
> 
> 标签：android, android-layout

我想知道当方向改变时如何防止应用重新加载？

我有一个小型测试应用程序，它会播放音频声音，直到按下停止按钮。如果我将我的 Android 或模拟器从水平更改为纵向，则停止按钮不起作用。加载应用程序的第二次出现。无论方向是否已更改，我都希望第一次出现继续运行。

主.xml

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"

android:layout_width="fill_parent"

android:layout_height="fill_parent" android:orientation="horizontal">

<LinearLayout

android:layout_width="wrap_content"

android:layout_height="match_parent"

android:layout_weight="0.64" android:orientation="horizontal">

<Button

android:id="@+id/button1"

android:layout_width="wrap_content"

android:layout_height="wrap_content"

android:text="Play" />

<Button

android:id="@+id/button2"

android:layout_width="wrap_content"

android:layout_height="wrap_content"

android:text="Stop" />

</LinearLayout>

</LinearLayout> 
```

测试.java

```
import android.app.Activity;

import android.media.AudioManager;

import android.media.MediaPlayer;

import android.os.Bundle;

import android.view.View;

import android.widget.Button;

public class TestAppActivity extends Activity {

private Button btnDisplay;

private MediaPlayer mediaPlayer;

@Override

public void onCreate(Bundle savedInstanceState) 

{

super.onCreate(savedInstanceState);

setContentView(R.layout.main);

setVolumeControlStream(AudioManager.STREAM_MUSIC);

mediaPlayer = MediaPlayer.create(this, R.raw.nut);

mediaPlayer.setLooping(true);

((Button)findViewById(R.id.button1)).setOnClickListener( new View.OnClickListener() {

public void onClick(View v) {

mediaPlayer = MediaPlayer.create(LoopBugActivity.this, R.raw.nut);

mediaPlayer.setLooping(true);

mediaPlayer.start(); 

}

} );

((Button)findViewById(R.id.button2)).setOnClickListener( new View.OnClickListener() {

public void onClick(View v) {

mediaPlayer.stop();

}

} );

}

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T02:40:43.363

我添加到清单： android:screenOrientation="landscape" android:configChanges="keyboardHidden|orientation"

以及 Activity Java 文件。

```
@Override public void onConfigurationChanged(Configuration newConfig) {
super.onConfigurationChanged(newConfig);     
setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE); 
    } 
```

布局保持横向，方向的旋转不会影响应用程序的播放。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T00:16:09.393

发生这种情况是因为您的活动在方向更改期间被破坏并重新启动（在 Android 领域也称为配置更改）。

在您的 AndroidManifest.xml 文件中，将以下内容添加到您的活动声明中：

```
android:configChanges="orientation" 
```

所以它看起来像下面这样：

```
 <activity android:name="com.your.package.TestAppActivity"
        android:configChanges="orientation"
    /> 
```

然后，您的活动可以监听配置更改并手动响应。更改方向将不再自动重新启动活动。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-28T22:29:46.180

我仍然没有得到我想要的结果，当我旋转设备时内容仍然发生变化（**`onCreate()`**仍然调用该方法）。我给一个**空**的配置对象时达到的实际效果

**new Configuration()**而不是提供的参数**newConfig**

```
@Override
public void onConfigurationChanged(Configuration newConfig) {
    super.onConfigurationChanged(new Configuration());
} 
```

希望这对想要完全忽略方向变化事件的人有所帮助

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-27T00:15:49.003

这就是 Android Activity 的设计方式。如果方向发生变化，它将重新加载新活动。要么禁用方向，要么将应用程序分为 2 层（前端和后端）。前端将仅显示进度和控制按钮，后端将从前端获取命令并执行。在此模型中，您将不会遇到现在面临的问题。

看看这个[链接](https://stackoverflow.com/questions/1410504/how-to-make-application-completely-ignore-screen-orientation-change-in-android)它可能对你有帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-27T00:16:35.430

看看这篇文章：[处理运行时更改](http://developer.android.com/guide/topics/resources/runtime-changes.html)

我认为最好处理更改，但您仍然可以选择阻止它，如“b. 自己处理配置更改”中所述。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-27T00:18:02.713

在清单中，在您的标签中，输入 android:screenOrientation="portrait"

[http://developer.android.com/guide/topics/manifest/activity-element.html](http://developer.android.com/guide/topics/manifest/activity-element.html)

# file - Bash 像 GNOME 一样按文件名排序

> ID：10343056
> 
> 赞同：0
> 
> 时间：2012-04-27T00:02:17.540
> 
> 标签：file, bash, sorting, gnome, ls

Bash 用命令对文件进行排序的方式真的让我很烦，而且`sort`似乎找不到解决方法。当我按名称使用 GNOME 对文件进行排序时，它准确地显示了我想要的方式。我正在尝试按实际顺序排序，但是在 bash 中排序时，10 和 1 会搞砸一切。以下是 bash 如何对我的文件样本进行排序：

```
HeadsetBatteryBG_10@2x.png
HeadsetBatteryBG_11@2x.png
HeadsetBatteryBG_12@2x.png
HeadsetBatteryBG_1@2x.png
HeadsetBatteryBG_13@2x.png
HeadsetBatteryBG_14@2x.png
HeadsetBatteryBG_15@2x.png
HeadsetBatteryBG_16@2x.png
HeadsetBatteryBG_17@2x.png
HeadsetBatteryBG_2@2x.png
HeadsetBatteryBG_3@2x.png
HeadsetBatteryBG_4@2x.png
HeadsetBatteryBG_5@2x.png
HeadsetBatteryBG_6@2x.png
HeadsetBatteryBG_7@2x.png
HeadsetBatteryBG_8@2x.png
HeadsetBatteryBG_9@2x.png 
```

我看到它在这里做了什么，但是在 bash 中是否有任何地方可以对这样的列表进行排序，它应该如何排序？使用真实数字顺序的数字，而不是它正在做的这种奇怪的事情。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-27T00:08:21.850

尝试

```
sort -k2 -t_ -n [file] 
```

这将使用 _ 作为字段分隔符 (-t_) 在第二个字段 (-k2) 上按数字 (-n) 排序。

（无耻地从[超级用户](https://superuser.com/questions/79338/in-bash-how-to-sort-strings-with-numbers-in-them)那里窃取）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-27T01:47:26.557

甚至更简单，假设 GNU 排序：`sort -V`

```
 -V, --version-sort
          natural sort of (version) numbers within text 
```

# facebook - 使用 FB.CanvasgetPageInfo() 动态设置颜色框选项

> ID：10343057
> 
> 赞同：1
> 
> 时间：2012-04-27T00:02:23.817
> 
> 标签：facebook, colorbox

在事件（如滚动）发生之后，有没有办法在以后设置或重置颜色框选项？

这是您通常设置颜色框选项的方式：

```
 jQuery("a[rel='pop']").colorbox({ transition:"none", top:20px;}); 
```

我需要的是 FB.canvas.getPageInfo() 方法来重置“顶部”选项。因此，用户向下滚动了 300 像素。getPageInfo 可以告诉你。但是，在打开弹出窗口之前，我无法弄清楚如何让 getPageinfo() 与 colorbox 对话并更改设置。

```
FB.Canvas.getPageInfo(callbak);
function callbak(info){
       i want to set the 'top' here, with info.scrollTop
        so that when colorbox pops, its positioned correctly.
}//callback 
```

也许需要发生的不是在 (document).ready 上进行颜色框设置，而是需要将我的 rel="pop" 元素挂钩到一个测试 FB 的函数（因为我将在 fb 之外使用这个页面，太。）然后设置颜色框，然后触发颜色框。

/* xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx*/
我不知道如何在评论中编码，所以这里几乎是工作代码：这下面的工作，但只在第二次点击时，即使那样，它使用的是上一次点击的滚动顶部。我的颜色框设置之前的 alert() 在第一次单击时具有正确的信息。显然，它为下一次点击“正确”设置了顶部，但我需要为 *这次点击重置顶部。

```
 jQuery("a[rel='pop']").colorbox({ transition:"none", top:"5px", maxWidth:"85%", maxHeight:"85%",
      onOpen:function(){dothething(); }});  

function dothething(){
        FB.Canvas.getPageInfo(callbak);
        function callbak(info){
            var ist = info.scrollTop;
            // alert('callbak'+ist);
            jQuery("a[rel='pop']").colorbox({  top:ist+"px"});
        }//callback
    }//dothething 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T01:11:06.967

尝试：

```
jQuery("a[rel='pop']").click(function(e) {
  e.preventDefault();
  link = jQuery(this).attr('href');
  FB.Canvas.getPageInfo(function(info) {
    ist = info.scrollTop;
    jQuery.colorbox({href:link, transition:"none", top:ist+"px;", maxWidth:"85%",maxHeight:"85%"});
  });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T09:55:14.087

您可以随时重新应用设置：

```
jQuery("a[rel='pop']").colorbox({ transition:"none", top:20px;});
jQuery("a[rel='pop']").colorbox({ top:0px;}); // update the top property 
```

# html - 是否有一个 XSLT 漂浮在任何地方，可以将 Apple Pages 文档转换为像样的 HTML？

> ID：10343064
> 
> 赞同：0
> 
> 时间：2012-04-27T00:03:36.977
> 
> 标签：html, xslt, iwork

Apple 的文字处理器/DTP 应用程序 Pages 将其文件保存为压缩文件夹，其中包含一个带有内容的 XML 文件，以及保存为文件的附件（例如图像）。

我希望将此内容转换为体面的 HTML：`<p>`用于看起来像段落的内容、翻译成 HTML 表格的表格、维护的图像和链接。

我不需要从 Pages 文档中复制样式。

互联网上是否有 XSLT 可以执行此操作？[一个叫 Davin Granroth 的小伙子写了](http://blog.davingranroth.com/2009/11/xslt-to-get-text-from-apple-pages-documents/)一个很好的起点来获取文本，但它不处理图像、表格或链接。

我很想自己去尝试一下，但似乎有人已经写过这个了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T02:18:25.533

如果这不是为了某种自动化的服务器端处理，您可能想尝试 Pages 本身的导出功能。

# jquery - 如何在手风琴菜单中重置为加号

> ID：10343066
> 
> 赞同：0
> 
> 时间：2012-04-27T00:03:54.077
> 
> 标签：jquery

我用下面的 JS 做了一个手风琴菜单

```
$(function(){
 $('#accordion .fullChild>a.opener').text('+').addClass('box');

  $('#accordion .opener').click(function() {
  if($(this).text() == "-") {

  $(this).text("+");
  }
  else {

  $(this).text("-");
  }
});
});

            function initMenus() {
    $('ul#accordion ul').hide();

    $('ul#accordion li a.opener').click(
        function() {
            var checkElement = $(this).next();
            var parent = this.parentNode.parentNode.id;
                if($('#' + parent).hasClass('noaccordion')) {
                    $(this).next().slideToggle('normal');

                    return false;
                }
                if((checkElement.is('ul')) && (checkElement.is(':visible'))) {
                    if($('#' + parent).hasClass('collapsible')) {
                        $('#' + parent + ' ul:visible').slideUp('normal');

                    }
                    return false;
                }
            if((checkElement.is('ul')) && (!checkElement.is(':visible'))) {
                $('#' + parent + ' ul:visible').slideUp('normal');
                checkElement.slideDown('normal');

                return false;
            }
        }
    );
}
$(document).ready(function() {initMenus();}); 
```

这一切都像我想要的那样工作，但为了一件事。当您打开一个加号时，它会变为减号，但除非您再次切换它，否则它会保持为减号

这是一个小提琴[http://jsfiddle.net/ZpXrW/1/](http://jsfiddle.net/ZpXrW/1/)

html 和 css 是裸露的，我想了解我是如何编写错误的脚本以及如何使它变得更好——我假设有一种更简洁的方法来实现这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T00:25:12.797

为了让它变回加号，你需要......把它改回来，它不会自行发生。我使用手风琴逻辑更新了小提琴以解决问题[http://jsfiddle.net/ZpXrW/2/](http://jsfiddle.net/ZpXrW/2/)

# mongodb - C# 的 MongoDB 错误

> ID：10343067
> 
> 赞同：0
> 
> 时间：2012-04-27T00:03:54.623
> 
> 标签：mongodb, mongodb-.net-driver

我看过 Quickstart Windows 并下载**了 mongodb-win32-i386-2.0.4.zip**，当我运行 mongo.exe 时出现此错误：

```
Error: couldn't connect to server 127.0.0.1 shell/mongo.js:84   
exception: connect failed 
```

我应该怎么办？我需要下载其他东西吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T05:02:33.433

`mongo.exe`是*Mongo Shell*`localhost:27017` ，除非您明确指定另一个服务器和端口，否则它将尝试连接到服务器。

您所追求的是`mongod.exe`（注意“d”？），它是*MongoDB Server*。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T00:29:34.530

我想也许你没有启动你的 Mongo DB 服务器。

# css - 页面容器没有高度

> ID：10343068
> 
> 赞同：0
> 
> 时间：2012-04-27T00:04:28.240
> 
> 标签：css, html, height

我有这个网站（非常恢复）：

```
<body>
   <div id="container">
      <!-- all html in here -->
   </div>
</body> 
```

问题是我需要页面居中（所以我不能使用浮动），

身体有`background:#ddd`，容器有`background:#fff`，

问题是白色背景不可见，除非我以 px 为容器设置 min-height 或 height （或者如果我设置了浮动，但不兼容），

#container 标记是：

```
#contenedor{
    display: block;
    background:  white;
    width: 1024px;
    padding: 44px 2px 2px;
    position: relative; /* is relative so the margin auto works */
    margin: auto;

} 
```

测试在这里：http: [//jsfiddle.net/bfzWN/](http://jsfiddle.net/bfzWN/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T00:11:07.263

一个简单的解决方案是添加`overflow:auto`到您的容器 ( `#contenedor`) ：

```
#contenedor{
    display: block;
    background:  white;
    width: 1024px;
    padding: 44px 2px 2px;
    position: relative; /* is relative so the margin auto works */
    margin: auto;
    overflow: auto; /* ADD THIS LINE */
} 
```

现场示例：http: [//jsfiddle.net/bfzWN/1/](http://jsfiddle.net/bfzWN/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T00:15:13.750

您有很多未清除的浮动。我会添加一个伪元素，在你的竞争者之后清除：

```
#contenedor:after {
    content:"\0020";
    display:block;
    height:0px;
    overflow:hidden;
    clear:both;
} 
```

就个人而言，我比 @tw16 回答的“溢出”技巧更喜欢这个，因为如果你想在竞争者之外定位一些东西，你仍然可以。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T00:09:34.297

将 body 的宽度设置为 1024 并将其居中，这将允许您浮动 div。

```
<body style="width: 1024px; margin: 0px auto; text-align: center;"> 
```

.

```
#contenedor {
 display: block;
 background:  white;
 width: 1024px;
 padding: 44px 2px 2px;
 position: relative; /* is relative so the margin auto works */
 margin: auto;
 float: left; 
```

}

# javascript - 使用 :nth-child 选择行并追加

> ID：10343072
> 
> 赞同：0
> 
> 时间：2012-04-27T00:05:46.523
> 
> 标签：javascript, jquery, html, append, css-selectors

我正在做一个大学项目，我从一组 xml 文件中输入信息，然后使用 jQuery 作为单独的段落将其放入一组 div 中。

目前，输入的内容是这样的：

```
<p class="speech">Blah</p>
<p class="line">Blah</p>
<p class="line">Blah</p>
<p class="line">Blah</p>
<p class="line">Blah</p>
<p class="speech">Blah</p>
<p class="line">Blah</p> 
```

等等。

该模块的要求之一是每 5 行编号，我认为使用以下方法最容易做到这一点：

```
$("#contents_txt p:nth-child(5n)").append("<span> - 5th</span>"); 
```

但是，不是在每 5 行的末尾添加“5th”，而是多次添加：

> 伯爵夫人
> 
> 为了从我身边救出我的儿子，我埋葬了第二个丈夫。
> 
> 伯特伦
> 
> 我走了，夫人，为我父亲的死而哭泣
> 
> 新：但我必须听从陛下的命令，至 - 5日 - 5日 - 5日 - 5日 - 5日 - 5日 - 5日 - 5日 - 5日 - 5日 - 5日 - 5日 - 5日 - 5日 - 5日 - 5日 - 5日 - 5日 - 5日 - 5日 - 5日 - 5日 - 5日 - 5日 - 5日 - 5日 - 5日 - 5日 - 5日 - 5日 - 5日 - 5日 - 5日 - 5日 - 5日 - 5日 - 5日 - 5日 - 5日 - 5日 - 5日 - 5日 - 5日 - 5日 - 5日 - 5日 - 5日 - 5日 - 5日 - 5日 - 5日 - 5日 - 5日 - 5日 - 5日 - 5日 - 5日 - 5日 - 5日 - 5日 - 5日 - 5日 - 5日 - 5日 - 5日 - 5日 - 5日 - 5日 - 5日 - 5日 - 5日 - 5日 - 5日 - 5日 - 5日 - 5日 - 5日 - 5日 - 5日 - 5日 - 5日 - 5日 - 5日 - 5日 - 5日 - 5日 - 5日 - 5日 - 5日 - 5日 - 5日 - 5日 - 5日 - 5日 - 5日 - 5日 - 5日 - 5日 - 5日 - 5日 - 5日 - 5日 - 5日 - 5日 - 5日 - 5日 - 5日 - 5日 - 5日 - 5日 - 5日 - 5日 - 5日 - 5日 - 5日 - 5日 - 5日 - 5日 - 5日 - 5日 - 5日 - 5日 - 5日 - 5日 - 5日 - 5日 - 5日 - 5日 - 5日 - 5日 - 5日 - 5日 - 5日 - 5日 - 5日 - 5日 - 5日 - 5日 - 5日 - 5日 - 5日 - 5日- 5th - 5th - 5th - 5th - 5th - 5th - 5th - 5th - 5th - 5th - 5th - 5th - 5th - 5th - 5th - 5th - 5th - 5th - 5th - 5th - 5th - 5th - 5th - 5th - 5th - 5th - 5th - 5th - 5th - 5th - 5th - 5th - 5th - 5th - 5th - 5th - 5th - 5th - 5th - 5th - 5th - 5th - 5th - 5th - 5th - 5th - 5th - 5th - 5th - 5th - 5th - 5th - 5th - 5th - 5th - 5th - 5th - 5th - 5th - 5th - 5th - 5th - 5th - 5th - 5th - 5th - 5th - 5th - 5th - 5th - 5th - 5th - 5th - 5th - 5th - 第 5 - 第 5 - 第 55日 - 5日 - 5日 - 5日 - 5日 - 5日 - 5日 - 5日 - 5日 - 5日 - 5日 - 5日 - 5日5日 - 5日 - 5日 - 5日 - 5日 - 5日 - 5日 - 5日 - 5日 - 5日 - 5日 - 5日 - 5日

我不知道为什么会这样，因为如果我更改为`.css`选择器之类的东西，我可以将样式应用于每 5 行。

任何帮助将不胜感激！

提前致谢！

**编辑**

我做了一个 jsfiddle：http: [//jsfiddle.net/LfpMm/](http://jsfiddle.net/LfpMm/)但是它似乎在准系统环境中工作。

我的工作示例可用：http: [//immbudden.com/siab/siab.html](http://immbudden.com/siab/siab.html)

为了明白我的意思：点击一个剧本，点击内容导航，点击一个场景，你会看到发生了什么。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T00:41:44.993

查看您的 localscripts.js 文件。在这条线上

```
$(this).find("LINE").each(function(){
    $("#contents_txt").append("<p class='line'>"  + $(this).text() + "</p>");
    $("#contents_txt p:nth-child(5n)").append("<span> - 5th</span>");
}); 
```

也许将第二个附加从 .each 函数中移出

```
$(this).find("LINE").each(function(){
    $("#contents_txt").append("<p class='line'>"  + $(this).text() + "</p>");
});

    $("#contents_txt p:nth-child(5n)").append("<span> - 5th</span>"); 
```

# ruby-on-rails - ActiveRecord 对象的 Ruby dup 方法

> ID：10343073
> 
> 赞同：2
> 
> 时间：2012-04-27T00:06:14.787
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord

有人可以解释一下 AR 对象的这种行为吗：

```
u = User.first
uu = u.dup

uu == u  #=> true
u == uu  #=> false 
```

为什么后者不正确？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-27T00:23:54.223

这是因为如果第二个对象是新记录则[`ActiveRecord::Base#==`](http://api.rubyonrails.org/v3.0.9/classes/ActiveRecord/Base.html#method-i-3D-3D)返回。`false`既然`uu.new_record?`是`true`，当做`u == uu`它返回`false`；但是`u.new_record?`是`false`，因此`uu == u`不会通过该检查。

这种行为自 Rails 3.0 和两者以来都发生了变化`u == uu`，`uu == u`并将`false`在 Rails 3.2（可能还有 3.1）中返回。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T00:19:00.763

当我在`Ruby 1.9.3p194`and上运行它时`Rails 3.2.3`，我都得到了错误，所以我只能假设这是一个已修复的错误。

至于*为什么*会发生这种情况，我的理论是，复制的记录会记住它的来源，因此与原始记录相比，它知道返回真实。原版没有这样的信息，因此不知道如何识别它的克隆。

# ios - iOS Admob 网络中介：all_load 和 ObjC 出现重复符号错误

> ID：10343075
> 
> 赞同：8
> 
> 时间：2012-04-27T00:06:25.480
> 
> 标签：ios, xcode, admob, linker-errors, armv7

我知道以前有人问过这个问题，但我已经尝试了我能找到的所有东西，但都没有奏效。

我有一个功能齐全的 iOS 应用，现在我想与它集成 AdMob 网络中介。我已经成功地让 AdMob 正常工作，但调解器需要设置链接器“-all_load”和“-ObjC”（在其他链接器标志中）。果然，如果我在没有它们的情况下构建，则不会显示任何广告，并且在日志中说它需要设置它们。

问题是我无法使用 all_load 或 ObjC 集成功构建我的应用程序。我读到 iOS 应用程序不需要 ObjC，但即使没有它，我仍然遇到 all_load 的问题。问题是我收到此错误：

ld：架构armv7 clang的重复符号[此处的某些命令] [某些静态库]和[相同命令的路径]：错误：链接器命令失败，退出代码为1（使用-v查看调用）

如果我删除了有问题的静态库并重建，错误只会转移到我拥有的下一个静态库，依此类推。由于我正在尝试安装广告中介，因此我的应用需要安装来自不同广告网络的多个静态库。

以下是我尝试过的一些失败的解决方案：

*   为 armv6 而不是 armv7 编译（反正不是一个理想的修复，因为我都想要）
*   用 force_load [库路径] 替换 all_load，并在实际的 iOS 设备上进行测试，因为显然这种方法本身不适用于模拟器（这似乎没有任何作用，我遇到了完全相同的问题，使用相同的路径无论如何都在错误中找到）
*   删除 all_load（构建，但就像我说的，AdMob 中介需要它）
*   删除有问题的库（显然不起作用，因为该错误抱怨我需要的每一个静态库）

任何帮助都可以解决这个问题。

**编辑：我的问题的解决方案**

事实证明，我唯一没有尝试的只是在实际设备上使用 -ObjC，这似乎对我有用！

**EDIT2：没关系，仍然有问题**

当被问及哪些静态库导致我出现问题时，我将在下面引用我的评论：

“好吧，通过排除 all_load 并仅包括 ObjC，我让 AdMob 中介在没有任何其他网络的情况下工作，在我添加我的第一个网络 Adfonic 之前它工作正常，该网络目前与 MobileAppTracking 冲突，我得到：ld：重复符号 _OBJC_IVAR_$_Reachability [path]/Adfonic SDK/libAdfonic.a(Reachability.o) 和 [path]/Objects-normal/armv6/Reachability.o 中的 .reachabilityRef 用于架构 armv6 clang：错误：链接器命令失败，退出代码为 1（使用 -v查看调用）”

我通过删除所有其他广告网络库来使用 Admob Mediator 的基本功能，但是在我的第一个第三方网络集成中，我遇到了另一个与我已经实现的跟踪库 MobileAppTracking 之间的冲突。仍在寻找解决“重复符号”的解决方案。

**编辑 3**

我可以确认，我尝试使用 AdMob 中介器的每个广告网络（AdMob 本身除外）都无法编译，其中大部分是由于重复符号错误。我不明白这是怎么回事，因为我确定我不是唯一使用 Admob 中介服务的人。

**编辑 4**

我将在下面引用我的评论：

“我实际上设法让大多数广告网络和库为我工作，我不得不在 Compile Sources 下删除很多引用，但我仍然编译它，仍然使用 -ObjC 和 -all_load！”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T09:37:29.307

您可以使用 **-force_load "path/to/your/libGoogleAdMobAds.a"** 而不是 -all_load，这只会加载您的 libGoogleAdMobAds

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T14:54:50.810

请删除您的 SKD 文件夹中的 add-one 文件夹

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-22T11:29:04.890

添加一个名为“EXCLUDED_SOURCE_FILE_NAMES”的用户自定义构建设置：如[本文](http://mobworld.wordpress.com/2012/02/19/duplicate-symbol-_objc_class_/)所示，或修改.a文件如[本文](http://developer.appcelerator.com/question/136818/modules-conflicting-in-ios)所示。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-07-24T10:56:13.607

你找到解决这个问题的方法了吗？

我只是删除了 -all_load 参数，我的应用程序在我的设备上运行良好。但我不确定这个技巧。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-27T11:57:47.870

我有同样的问题。在其他链接器中添加 -ObjC 后，我无法编译（它抱怨重复符号和可达性。）。删除它可以让我编译，但 AdMob 正在使应用程序崩溃。

经过大量测试和使用大量参数后，我执行了以下操作，现在它正在工作：我去了 Targets -> AppName -> Build Phases -> Compile Sources 并删除了 Reachability.m。它编译得很好，而且 AdMod 也可以正常工作而不会崩溃。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-07T17:36:29.897

删除“附加”文件夹中除“中介”文件夹外的所有文件夹。

这个对我有用。

# matlab - 在 Matlab 二进制向量中组合数据元素

> ID：10343076
> 
> 赞同：1
> 
> 时间：2012-04-27T00:06:45.910
> 
> 标签：matlab, binary

我想知道是否有一个matlab函数可以根据另一个单独的整数数组组合matlab二进制数据数组中的数据。请看下面的例子。

```
d = [1 0 0 1 1 0 1 0 1 1 0 1 0]
c = [2 2 3 2 4] 
```

我想根据**c数组添加****d**数组的元素，Thet意味着，执行模2加法添加前2个元素 ，然后mod-2 of ，然后mod-2 of etc...**`d(1)+d(2)``d(3)+d(4)``d(5)+d(6)+d(7)`**

 **如果有人可以让我知道一个 matlab 函数来执行此操作而无需使用太多 for 循环，我真的很感激。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-13T17:54:20.517

```
mod(diff([0 arrayfun(@(n) sum(d(1:n)), cumsum(c))]),2) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T00:17:42.220

一种方法是首先创建一个具有 2x1、2x2、3x3、2x4 等的数组，然后`accumarray`使用`d`

```
idxVector = zeros(size(d));
idxVector(cumsum(c(1:end-1))+1) = 1;
idxVector = cumsum(idxVector) + 1;
out = accumarray(idxVector(:),d(:))

out =

     1
     1
     2
     1
     2 
```**

# jquery - jquery：将函数附加到尚未加载的元素

> ID：10343078
> 
> 赞同：3
> 
> 时间：2012-04-27T00:07:01.487
> 
> 标签：jquery, event-handling

我将一个函数附加到某个表的每个 th 元素：

```
$(document).ready(function()
{
    $('#table_id thead th').each(function()
    {
       $(this).disableTextSelect(); // disableTextSelect() is user defined function extending jquery
    });
} 
```

如果表已经加载，这可以正常工作。为了将它附加到表格中，如果将来要加载它，我必须使用 .on()。但我不知道怎么做:-(

```
$(document).on('which event?!', '#table_id thead th', function()
{
    $(this).disableTextSelect();
}); 
```

非常感谢，幻影

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T00:15:07.320

我假设您想将事件绑定到单击？

```
$(document).on('click', '#table_id thead th', function() {
    $(this).disableTextSelect();
}); 
```

为了将来参考，jQuery 文档包含所有 jQuery 事件的列表，可以在[这里](http://api.jquery.com/category/events/)找到。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-10T04:47:50.153

我遇到了同样的问题，我使用`.delegate("","load")` 但`delegate`不能将未来元素与事件绑定，`load,unload,change,blur,focus`因为这些事件不能`bubble`，而`delegate`基于它的实现。
最后我绑定事件`click`并完成。
如果您真的需要绑定`load`事件，我认为您可以`setInterval`改用：

```
var itv = setInterval(function(){
    var el = $("#table_id");
    if(el.length > 0){
        el.find('thead th').each(function(){
            $(this).disableTextSelect();
        });
        clearInterval(itv);
    }
},100); 
```

愿这对你有帮助。:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T00:17:26.583

如果表格是页面的一部分，它应该在 ready 事件发生时准备好。

如果您通过 AJAX 加载表格，那么您应该使用从`.ajax()`(or`.load()`等) 返回的对象并将您的逻辑传递给`.success()`该对象上的方法。

理论上，有一个加载事件，但它并不可靠。理论上，您也可以附加到任何 AJAX 请求的成功，然后您的函数在完成后自行分离，但这可能有点讨厌。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-27T00:37:43.213

我知道一些可行的方法，但我不确定它的可行性。将您想要的内容包装在一个函数中。

```
function somename() {
  $('#table_id thead th').each(function()
    {
       $(this).disableTextSelect(); // disableTextSelect() is user defined function extending jquery
    });
} 
```

调用`somename()` 一次为当前加载的元素激活它，并在每次加载适合选择器的新元素时调用它。我知道这会起作用，但我不知道使用它是否有效。

# c - 带有 GUI 的内存视图

> ID：10343081
> 
> 赞同：1
> 
> 时间：2012-04-27T00:07:37.820
> 
> 标签：c, linux, memory-management

有内存视图和图形用户界面吗？例如，我想查看我的 C 程序（`malloc()`）在内存中分配的值。也许像 Bless Hex Editor 这样的软件工具，但不是查看二进制文件，而是查看内存映射。我希望这对你来说很清楚。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T00:18:44.273

尝试使用调试器，这是查看程序内存的最佳方式。只需在感兴趣的点之前放置一个断点，它就会显示所有本地/全局变量的值。如果您尝试查看正在运行的程序的整个内存，HxD（免费的十六进制编辑器）允许您打开进程的内存（如果您有足够的权限）以进行查看/编辑。如果您尝试分析内存中的模式，作弊引擎也可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T22:09:17.497

用于查看所有分配的内存（每个应用程序）。我知道有几种解决方案。

*   您可以记录每个 malloc 和 free 并自己绘制它们。日志可以很容易地实现`mtrace()`（在 Linux 上的 Glibc 中，创建用于查找内存泄漏），请参阅例如我的[创新纳米库 mmtrace](https://stackoverflow.com/questions/2593284/enable-mtrace-malloc-trace-for-binary-program)或只是插入`mtrace()`和`muntrace()`调用程序。然后你会得到一个格式类似`@[IP] type address size]的文本文件，其中type是+表示malloc，-表示免费，<>表示realloc；大小是可选的。我有一个将此类日志转换为非常大的图像的 perl 绘图员。

*   我认为免费的[Sun Studio] 有这个/我会检查它/

*   TotalView（也作为 MemoryScope 单独出售）来自 Totalview，现在是 RogueWave。[http://www.roguewave.com/products/totalview/memoryscape.aspx](http://www.roguewave.com/products/totalview/memoryscape.aspx)

# javascript - 如何使通过 Feed 对话框发布到 Facebook 的链接不再要求用户授权我的应用程序？

> ID：10343083
> 
> 赞同：0
> 
> 时间：2012-04-27T00:07:51.860
> 
> 标签：javascript, facebook, facebook-javascript-sdk

所以这是交易：我正在开发一个包含 Facebook Connect 选项的网络应用程序，但这不是注册或登录的唯一方式。

我有一个按钮可以分享您所在的页面。它会打开一个提要对话框以发布指向用户提要的链接。在此过程中，绝不会要求用户授权我的应用程序，这是正确的。

但是如果我回到 Facebook 并单击链接，它会要求用户授权我的应用程序。我不想要那个。怎么让它停下来？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T00:20:38.543

在您的应用设置中关闭经过身份验证的推荐

# javascript - 使用外部按钮复制谷歌地球插件导航功能

> ID：10343088
> 
> 赞同：0
> 
> 时间：2012-04-27T00:08:31.663
> 
> 标签：javascript, html, google-earth-plugin

使用嵌入在 HTML 页面中的 Google 地球 javascript 插件，是否可以使用 Google 地球插件下方的一系列 HTML 链接复制 Google 地球导航？

![谷歌地球导航](../Images/edcde7676d5f1e0a8be398b5dc4b7ffa.png)

我只需要缩放按钮功能，没有滑块，4 个主要移动方向（向上、向下、向左、向右）和向上和向下用于 Look 按钮的相机倾斜。

Rotate 可以始终保持在 North。它不需要。

按钮示例。

```
<div id="map3d" style="height: 400px;"></div>
<h3>Look</h3>
<a href="#" class="btn" id="up">up</a>
<a href="#" class="btn" id="right">right</a>
<a href="#" class="btn" id="down">down</a>
<a href="#" class="btn" id="left">left</a>
<h3>Move</h3>
<a href="#" class="btn" id="north">north</a>
<a href="#" class="btn" id="east">east</a>
<a href="#" class="btn" id="west">west</a>
<a href="#" class="btn" id="south">south</a>
<h3>Zoom</h3>
<a href="#" class="btn" id="zoomIn">Zoom In</a>
<a href="#" class="btn" id="zoomOut">Zoom Out</a> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T01:03:49.087

是的，您可以只更改相机参数。

请参阅：[https ://developers.google.com/earth/documentation/camera_control](https://developers.google.com/earth/documentation/camera_control)

基本上，您获得当前视图，然后将其更改为新位置，或对其进行调整（即，每次单击按钮时，移动 X 度或其他东西）。

上面链接中的代码复制到此处，以防日后更改：

```
// Get the current view.
var lookAt = ge.getView().copyAsLookAt(ge.ALTITUDE_RELATIVE_TO_GROUND);

// Add 25 degrees to the current latitude and longitude values.
lookAt.setLatitude(lookAt.getLatitude() + 25.0);
lookAt.setLongitude(lookAt.getLongitude() + 25.0);

// Update the view in Google Earth.
ge.getView().setAbstractView(lookAt); 
```

# delphi - JEDI 代码库、Delphi IDE 菜单项（JCL 选项...）可以移动吗？

> ID：10343092
> 
> 赞同：5
> 
> 时间：2012-04-27T00:09:09.473
> 
> 标签：delphi, ide, delphi-xe2, jedi

有没有办法将 Delphi IDE 菜单项 Tools->JCL Options... 移动到工具菜单的底部？

![在此处输入图像描述](../Images/0877088a7b5cc5d0815cfd01ae3e582a.png)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-27T01:39:25.243

在`JclOtaActions.pas`，在`TJclOTAActionExpert.RegisterCommands`它注册菜单项：

```
ToolsMenuItem.Insert(0, FConfigurationMenuItem); 
```

我想如果你把它改成：

```
ToolsMenuItem.Add(FConfigurationMenuItem); 
```

然后它会在底部。

希望这能为您指明正确的方向...

# django - 如何知道复选框是否被选中 django

> ID：10343098
> 
> 赞同：-1
> 
> 时间：2012-04-27T00:10:21.640
> 
> 标签：django, django-models, django-forms

我在我的 html 文件中有一个表单：

```
<input type="checkbox" id ="hide_name" value="hidden"> 
```

我应该在我的模型中添加什么来知道这个复选框是否被选中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T00:20:43.130

好吧，这是检查复选框的人的事件链，并且该信息到达您的服务器。

首先，他们按下页面上的“提交”按钮，然后将它们发送到您在表单 HTML 中指定的目标 URL。他们的浏览器使用 HTTP POST（通常）从您的服务器请求该页面，其中包括来自该表单的所有数据作为请求的一部分。

Django 根据您的有效 url 列表检查该 URL 并将其发送到适当的视图。然后，有问题的视图可以检查传递给视图的请求对象以获取 POST 数据（它作为字典存储在[request.POST](https://docs.djangoproject.com/en/dev/ref/request-response/#django.http.HttpRequest.POST)中）。

然后你可以在你的视图中做任何你想做的事情，包括将它传递给你的模型。

如果您正在使用表单，您最好让 Django 呈现您的表单，而不是自己用 HTML 编写它们。有关更多信息，请参阅[表单文档](https://docs.djangoproject.com/en/1.4/topics/forms/)。

# c# - 在混合 Exchange 版本上使用 EWS API 的问题

> ID：10343101
> 
> 赞同：2
> 
> 时间：2012-04-27T00:10:49.833
> 
> 标签：c#, exchangewebservices

我有一个使用 EWS API 的应用程序。有些计算机使用 Exchange 2003，有些使用 2007/2010。最初，在我的应用程序中，我刚刚使用：

```
ExchangeService service = new ExchangeService();
service.UseDefaultCredentials = true;
service.AutodiscoverUrl(url); 
```

但我很快发现在使用 2003 的计算机上失败了，并出现错误：“客户端邮箱必须在 Exchange Server 2010 或更高版本上”。所以我将代码更改为（显然删除了 Exchange 服务器的实际地址）：

```
ExchangeService service = new ExchangeService();
service.UseDefaultCredentials = true;
service.Url = new Uri("https://....."); 
```

现在我收到错误消息：“请求的邮箱不支持指定的 RequestServerVersion。”。

所以，我想我明白为什么会发生这种情况，而且我似乎必须做一些完全不同的事情才能让它在 2003 年正常工作。除了没有使用 Net.Mail api 之外，我不确定该怎么做. 我是否仍可以使用 EWS API，如果可以，我需要更改哪些内容才能使其同时在两者上工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T10:12:31.800

Exchange 2003(2000?) 使用不同的 API，这与 EWS 完全不同。Exchange 2007 支持这两种 API。

您可以使用 CDO[如何将 CDO 与 Exchange 与 vbscript 一起使用](https://stackoverflow.com/questions/6283742/how-do-i-use-cdo-with-exchange-with-vbscript)

或 WebDAV使用 WebDAV[访问您的 Exchange 2000 / 2003 邮箱](http://www.msexchange.org/articles/access-exchange-2000-2003-mailbox-webdav.html)。

注意
我认为它更好用`New ExchangeService(ExchangeVersion.Exchange2007_SP1)`，那么你确定它与 2007 一起工作并在 2010 上使用向后兼容性。

# notepad++ - 关闭最后一个文档时关闭 Notepad++

> ID：10343102
> 
> 赞同：6
> 
> 时间：2012-04-27T00:11:02.640
> 
> 标签：notepad++

我现在使用记事本++ 几个月了，并且完成了所有设置，但是当我关闭最后一个选项卡时，找不到让 npp 关闭的方法。它总是会启动一个新的空文档。

任何想法如何让 npp 在关闭最后一个文档时关闭？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2017-03-03T16:32:03.843

Notepad++ 的最新更新包括关闭最后一个选项卡后关闭应用程序的功能。

要更新 Notepad++，请转到 ?>Update Notepad++ 并按照安装向导进行操作。

更新完成后，您将在“设置”>“首选项”菜单中选择“关闭最后一个选项卡时退出”（在选项卡栏输入组下）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-09-15T01:16:56.553

这完全基于 ufo 的代码。只有当您关闭最后一个文档时它才有效，无论它是否是新的，并且它不会冻结 npp。

为简洁起见，这里再次执行以下步骤：

1.  安装 Python 脚本插件
2.  在*Plugins > Python Script > Configuration*上将初始化模式从 LAZY 更改为 ATSARTUP
3.  打开*...\Notepad++\plugins\PythonScript\scripts\startup.py*并将以下代码放在它的末尾。
4.  保存并重新启动 Npp 以加载脚本。

    ```
    from threading import Timer

    def shutdownNppOnLastFileClosed(args):

        def closeNpp():
            notepad.menuCommand(MENUCOMMAND.FILE_EXIT)

        files = notepad.getFiles()
        if len(files) == 2:
            t = Timer(0.1, closeNpp)
            t.start()

    notepad.callback(shutdownNppOnLastFileClosed, [NOTIFICATION.FILEBEFORECLOSE]) 
    ```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-22T09:58:58.867

如果你熟悉 Python，你可以试试 N++ 的[Python Script](https://sourceforge.net/projects/npppythonscript/)插件。您将为文档关闭事件设置回调脚本。在它内部对所有打开的文档进行一些迭代，当只剩下 1 个没有文本时，则终止 N++。

我个人将“Alt + x”键映射到“Exit”Notepad++，这比通常工作的“Alt + F4”更容易掌握。

**/编辑**

我其实很喜欢你的想法，所以我自己很快就尝试了。花了大约 20 分钟才弄清楚。这是一个完整的解决方案：

1.  安装插件**Python 脚本**（上面的链接）
2.  转到*Plugins > Python > Configuration*并将***初始化***模式从*LAZY*更改为***ATSARTUP***
3.  打开“ *...\Notepad++\plugins\PythonScript\scripts\startup.py* ”并在其末尾放置以下代码：[似乎代码标签在编号列表下方不起作用，所以点击我查看代码](https://sourceforge.net/projects/npppythonscript/forums/forum/1199074/topic/5294989)

```
def shutdownNppOnLastFileClosed(args):
    import os
    files = notepad.getFiles()
    # there are always at least 2 'buffers' open in N++
    if len(files) == 2:
        currentBufferID = notepad.getCurrentBufferID()
        for (filename, bufferID, index, view) in files:
            if os.path.exists(filename):
                break
            notepad.activateBufferID(bufferID) 
            if editor.getLength() > 0:
                break
            # TODO: just to be on the safe side - if we
            # reached here, we actually should also check
            # if the 2 left empty buffers are not unsaved,
            # but I couldn't find a way to do that.
        else:
            # following 'menuCommand' looks cleaner than
            # the 'sys.exit' but it currently deadlocks N++:
            #notepad.menuCommand(MENUCOMMAND.FILE_EXIT)
            sys.exit(0)
        notepad.activateBufferID(currentBufferID)
notepad.callback(shutdownNppOnLastFileClosed, [NOTIFICATION.FILECLOSED]) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-27T00:53:18.943

notepad++ 是一个 MDI 表单应用程序，就像 MS OFFICE 一样，关闭子 MDI 表单不会影响主应用程序，所以，我认为除非你重建 nodepad++ 的源代码，否则我认为这是不知道的。

# c++ - Windows (.lnk) 快捷方式 API？

> ID：10343104
> 
> 赞同：5
> 
> 时间：2012-04-27T00:11:36.123
> 
> 标签：c++, windows, shortcuts

是否有任何功能可以让您在 Windows 中创建快捷方式，就像在 Linux 中创建符号链接一样？我希望能够编辑诸如目标和名称之类的内容，而不必每次由于更新而想更改某些内容时都必须重新创建一个全新的快捷方式。

我尝试`.lnk`在文本编辑器中打开一个文件，它是一大堆gobbelty gook。我想知道为什么它是半二进制的，因为 Linux 上的快捷方式就像一个`.ini`文件，简单易用。我担心如果我浏览数据，我可能会打乱某种校验和，并且快捷方式将不起作用，这就是为什么我想知道是否应该调用特定的 API 来修补这些对象。

更新：我找到了查询快捷方式数据的功能`MsiGetShortcutTarget()` [http://msdn.microsoft.com/en-us/library/windows/desktop/aa370299(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa370299(v=vs.85).aspx)，但还没有创建或修改快捷方式.

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-27T00:15:54.353

有关 shell 链接的 MSDN 文档，请参见[此处](http://msdn.microsoft.com/en-us/library/aa969393.aspx)。

# linux - linux mail < file.log 有 Content-Type: application/octet-stream （Gmail 中的无名附件）

> ID：10343106
> 
> 赞同：16
> 
> 时间：2012-04-27T00:12:31.943
> 
> 标签：linux, email, mailx

我一直在使用

```
 mail -s "here is a log file" "person@example.com" < log/logfile.log 
```

过去常常带有标题：

```
User-Agent: Heirloom mailx 12.4 7/29/08
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit 
```

但是现在文件更长了，我收到了无名附件，因为这样：

```
User-Agent: Heirloom mailx 12.4 7/29/08
MIME-Version: 1.0
Content-Type: application/octet-stream
Content-Transfer-Encoding: base64 
```

因此，如果所有其他方法都失败了，请查看手册`man mail`...

```
NAME
       mailx - send and receive Internet mail

SYNOPSIS
       mailx [-BDdEFintv~] [-s subject] [-a attachment ] [-c cc-addr] [-b bcc-addr] [-r from-addr] [-h hops]
              [-A account] [-S variable[=value]] to-addr . . . 
```

这些选项似乎都没有用，所以我该如何强制`Content-Type: text/plain`？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-27T00:33:21.440

手册页是一个很好的起点！继续阅读，直到您到达该`MIME TYPES`部分，并密切注意以下内容：

> 否则，或者如果文件名没有扩展名，则使用内容类型 text/plain 或 application/octet-stream，第一个用于文本或国际文本文件，第二个用于包含除换行符和水平字符以外的格式字符的任何文件制表符。

因此，如果您的消息包含换行符和制表符以外的“格式字符”（通常表示控制字符），它将自动归类为`application/octet-stream`. 我敢打赌，如果您仔细查看数据，您会发现一些控制字符漂浮在周围。

您可以通过...解决此问题

*   将日志文件作为附件（使用`-a`）而不是主要消息正文，并设置您的`~/.mime.types`文件以将文件标识`*.log`为文本/纯文本。
*   使用类似的东西过滤掉控制字符`tr`。
*   使用另一个 MUA，例如`mutt`发送邮件。实际上，您可以自己制作一条消息并将其直接发送到`sendmail`：

    ```
    (
      echo To: person@example.com
      echo From: you@example.com
      echo Subject: a logfile
      echo
      cat logfile.log
    ) | sendmail -t 
    ```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-05-07T04:07:59.473

我最近遇到了类似的问题，最后得到了一个更短的解决方案：

```
cat -v log/logfile.log | mail -s "here is a log file" "person@example.com" 
```

更多[关于 cat 与 mailx 讨论的](http://ask.fclose.com/305/plain-pipelined-content-application-octet-stream-attachment)细节。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-08-20T12:38:18.920

在基于 RedHat 的系统（SL、CentOS、Fedora 等）上，您需要安装 bsd-mailx，然后适当地设置 /etc/alternatives/mail：

```
sudo yum -y install bsd-mailx
sudo alternatives --set mail /usr/bin/bsd-mailx 
```

当然，您可能会破坏依赖 heirloom-mailx 行为但没有明确调用“mailx”而不是“mail”的应用程序。

显示有关 /bin/mail 当前指向的信息：

```
sudo alternatives --display mail 
```

要检查各种已安装的 mailx 软件包：

```
sudo rpm -qa *mailx 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-04-11T07:49:03.650

更改为 Ubuntu Precise 12.04 后，我在运行自动电子邮件脚本时遇到了一些麻烦。我不知道，当 Ubuntu（或 Debian）将 bsd-mailx 与 heirloom-mailx 交换时，这两个“邮件”命令的行为非常不同。（例如 heirloom 将 -a 用于附件，而它用于 bsd 中的其他标题。）在我的情况下，heirloom-mailx 无法可靠地确定 Mime 类型并继续将文本作为附件发送。怪我没有清除控制字符或其他任何东西，但我认为更改在升级之前完美完成工作的脚本没有多大意义。因此，如果您更喜欢自己设置 Mimetype，bsd-mailx 是一个更好的解决方案。

```
sudo apt-get install bsd-mailx 
sudo apt-get remove heirloom-mailx 
```

为我解决了。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-09-09T18:09:27.947

在我的例子中，脚本是从 cron 调用的，其中 LC_* 没有定义，重音被解释为“控制字符”。我刚刚在 crontab 文件的开头插入了以下几行：

```
LC_NAME=fr_FR.UTF-8
LC_ALL=fr_FR.UTF-8 
```

# wordpress - Wordpress 网站无法加载，但仪表板端工作正常？

> ID：10343108
> 
> 赞同：0
> 
> 时间：2012-04-27T00:13:21.470
> 
> 标签：wordpress

我已经在这个 wordpress 网站上工作了大约一个星期，今天当我开始工作时，它在浏览器中加载得很好。

我登录并更新了一些帖子，去查看实时站点，它就是无法加载。

仪表板端仍然可以正常加载，我可以继续编辑内容，但前端无法加载。只是坐着旋转。

我完全不知道为什么会发生这种情况或尝试什么。帮助！

[http://danapaigetrentlage.com/cfsa-test/](http://danapaigetrentlage.com/cfsa-test/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T11:57:33.670

我仍然不确定问题是什么，但它似乎与我家的互联网连接有关。我把手机连接到电脑上，加载页面没问题。

感谢您的回复和评论，它帮助我诊断出我的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T00:18:56.000

对我来说看起来像这样...

![在此处输入图像描述](../Images/149c42bb8bbba242dd80769674e1d526.png)

因此，尽管它加载了，但导航却一团糟。我认为这是由于您的 HTML 标签不匹配。您需要在导航列表中的某处关闭某些内容。也许这与您的加载问题有关。

# c - 在 C 中计算时间跨度

> ID：10343110
> 
> 赞同：1
> 
> 时间：2012-04-27T00:14:02.193
> 
> 标签：c, timer, timespan

我会简短：

我想测量 C 中的时间跨度，比如在套接字中发送这样的小东西：

```
sendto (s, buffer, sizeof (buffer), 0, (struct sockaddr *) &peer, peerlen); 
```

我目前正在这样做：

```
clock_t cBegin = (double)clock () * CLOCKS_PER_SEC;
sendto (s, buffer, sizeof (buffer), 0, (struct sockaddr *) &peer, peerlen);
clock_t cEnd = (double) clock() * CLOCKS_PER_SEC;

elapTicks = cEnd - cBegin;
elapMilli = elapTicks/1000;

printf ("Milisegundos: %lf, %lf\n", cBegin, cEnd); 
```

但我的 printf 总是 0.000000。我应该如何进行？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T00:16:29.207

在 POSIX 系统上，使用`gettimeofday()`or`clock_gettime()`代替。

该`clock()`函数仅告诉您使用了多少 CPU 时间。如果您的代码大部分时间都在休眠，等待某事发生，那么它将使用很少的 CPU。

但是，`sendto()`仅将您的数据报传递给网络层。它不等待远程系统接收它。如果您想计算需要多长时间，则需要等待回复。如果这不是您的想法，另一种选择是进行循环，并计算发出许多`sendto()`调用所需的时间。但是，这很可能会产生与将兆字节数据传递到网络堆栈（在 UDP 情况下，不会合并连续写入）的效果相混淆的结果。

# c# - 卸载 Winform 应用程序时完全删除所有文件夹和文件？

> ID：10343114
> 
> 赞同：4
> 
> 时间：2012-04-27T00:14:45.360
> 
> 标签：c#, winforms, windows-installer, uninstallation

卸载我的 Winform 应用程序后，各种文件和文件夹仍然存在 - 包括内容文件（图片、图标等）和应用程序创建的日志文件夹。对于内容文件：在自定义安装程序项目中，我将“永久”属性设置为 false。对于日志文件夹：我认为这将与其他所有内容一起删除。

我是否缺少 MSI 设置属性，或者我是否需要确定应用程序的根路径并删除覆盖`Uninstall`方法上的所有内容？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T00:17:01.847

不，没有。MSI 安装程序不会卸载它没有安装的任何东西，这意味着留下用户数据、日志文件等。

这是设计使然 - 如果用户错误地卸载了您的应用程序并清除了他们所有的财务数据或其他什么，您能想象责任吗？或者如果他们错误地将其他内容保存到您应用的数据文件夹中，而您的卸载程序将其删除？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T01:20:57.097

查看安装程序会保留有关它安装的所有文件的信息，并且在调用卸载时，此信息会告诉安装程序要删除哪些文件或文件夹。安装后，如果应用程序或用户创建任何文件夹或文件，这些项目即使在卸载后仍保留在那里。

但是有一个解决方案。`OnAfterUninstall`您可以在此处编写自己的自定义操作

```
protected override void OnAfterUninstall(IDictionary savedState)
{
    base.OnAfterUninstall(savedState);
    // Write your code
} 
```

# asp.net-mvc - 路由找不到我的 ActionResult 方法

> ID：10343116
> 
> 赞同：0
> 
> 时间：2012-04-27T00:15:08.103
> 
> 标签：asp.net-mvc, asp.net-mvc-3, asp.net-mvc-routing

我为我的 MVC3 应用程序创建了一个带有 Http400To404 ActionResult 的 ErrorController。

Route 测试器匹配特定的路由。尽管如此，我收到一条错误消息：

“在控制器‘Xxxxxx.Yyyyyyyyy.Zzzzzz.Controllers.ErrorController’上找不到公共操作方法‘http400to404’。

以下是网址的代码：

```
protected override void HandleUnauthorizedRequest(AuthorizationContext filterContext)
{
  string url = "~/Error/Http400To404?Exception=System.Exception%3A%20Failed%20to%20authorized% 20the%20request".ToLower();

  filterContext.Result = new RedirectResult(url);
} 
```

以下是 ErrorController 类：

```
public class ErrorController : Controller
{
  [HttpGet]
  [HttpPost]
  public ActionResult Http400To404(Exception e)
  {
   ....
  }

  ...
} 
```

我相信它正确地找到了控制器，但由于某种原因，动作结果没有被拾取。我尝试了以下方法使 URL 无济于事：

```
string url = urlHelper.RouteUrl("ErrorDefault", 
                            new RouteValueDictionary { { "Exception", (new Exception("Failed to authorized the request.")).ToString() },
                           {"controller","Error"},
                           {"action", "Http400To404"}}); 
```

我很感激你能提供的任何帮助。谢谢你，E。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T04:52:10.290

从 ActionResult 中删除 [HttpPost] 属性。同样默认情况下，Action 会同时响应 GET 和 POST，因此在这种情况下，您不需要指定任何属性。

# c# - 在 c# 中从 XMLfile 读取某些值

> ID：10343119
> 
> 赞同：0
> 
> 时间：2012-04-27T00:15:15.077
> 
> 标签：c#, xml, c#-4.0, linq-to-xml

我正在尝试从我的 XML 文件中读取一些数据

姓名/姓名/trckid

*   1）例如从下面粘贴的xml文件中我想读取名称/名称/trckid
    例如：trckid = FF7eb01f7-7985-47b1-8f8c-a0e92395d00f

*   2) 以及 Names/Name/Files/file/uri 其中 formatCode="2001"
    例如结果字符串：uri=http://cont.catalog.address.xyz.com/e2/ds/9b660964.jpg

这是我的示例 XML 文件

```
<?xml version="1.0" encoding="utf-8"?>
<Names tracking="trckids" execTime="0" xmlns="urn:schemas-microsoft-com:address:catalog">
    <Name xmlns="urn:schemas-microsoft-com:address:catalog" publishState="Published" lcid="1033" options="0" version="65" filterFlags="32687">
        <trckid ref="5ofol35" seoMetaData="/xyz/gpscatalog/">FF7eb01f7-7985-47b1-8f8c-a0e92395d00f</trckid>
        <providerId>Test0_2286326_304163829</providerId>
        <files>
            <file formatCode="2001" gpsFileId="9B660964-1626-466C-8359-F036506D8769" height="102" width="136" fileHash="4a4bcceb08b4ccdd16a958e8687c9588">
                <uri>http://cont.catalog.address.xyz.com/e2/ds/9b660964-1626-466c-8359-f036506d8769.jpg</uri>
            </file>
            <file formatCode="2007">
                <uri>http://img1.catalog.address.xyz.com/image.aspx?uuid=d7eb01f7-7985-47b1-8f8c-a0e92395d00f&amp;w=136&amp;h=102</uri>
            </file>
            <file formatCode="2200" gpsFileId="6C34F723-D798-4DA8-AEE4-0442C239D3A0" fileSize="311469" height="180" width="320"                                                                             sourceFileHash="6ea74770f622e3e0dc9cf5e229c7de7f">
                <uri>http://cont.catalog.address.xyz.com/e2/ds/0909a015-4b6a-4574-be63-c2facd527b9f_0.xml</uri>
            </file>
        </files>
    </Name>
   <Name xmlns="urn:schemas-microsoft-com:address:catalog" publishState="Published" lcid="1033" options="0" version="65" filterFlags="32687">
        <trckid ref="5ofol20" seoMetaData="/xyz/gpscatalog/">FF9eb01f7-7985-47b1-8f8c-a0e92395d00f</trckid>
        <providerId>Test1TheLorax_2286326_304163829</providerId>
        <files>
            <file formatCode="2001" gpsFileId="9B660964-1626-466C-8359-F036506D8769" height="102" width="136" fileHash="4a4bcceb08b4ccdd16a958e8687c9588">
                <uri>http://cont.catalog.address.xyz.com/e2/ds/9b660964-1626-466c-8359-f036506d8769.jpg</uri>
            </file>
            <file formatCode="2007">
                <uri>http://img1.catalog.address.xyz.com/image.aspx?uuid=d7eb01f7-7985-47b1-8f8c-a0e92395d00f&amp;w=136&amp;h=102</uri>
            </file>
            <file formatCode="2200" gpsFileId="6C34F723-D798-4DA8-AEE4-0442C239D3A0" fileSize="311469" height="180" width="320"                                                                             sourceFileHash="6ea74770f622e3e0dc9cf5e229c7de7f">
                <uri>http://cont.catalog.address.xyz.com/e2/ds/0909a015-4b6a-4574-be63-c2facd527b9f_0.xml</uri>
            </file>
        </files>
    </Name>
</Names> 
```

我尝试使用以下给定的代码

```
 XDocument xdoc = XDocument.Parse(xmlstring);
            XNamespace ns = xdoc.Root.GetDefaultNamespace();  // "urn:schemas-microsoft-com:msnvideo:catalog";
            IEnumerable<XElement> names = xdoc.Descendants(ns + "name");
   foreach (XElement name in names)
            {

                 rssFeedItems.Add(new Adressses
                    {
                    trackid=  Convert.ToString(name.Element(ns + "trackid").Value),
                    providerID= Convert.ToString(name.Element(ns + "provideid").Value),

                    imageUri = Convert.ToString(name.Element(ns + "uri").Value)
                    });

            }        
  Here  am able to read first two items ,ie, trackid and providerID ,but not the image uri 
```

我需要读取与 Names/Name/files/file@formatcode[2001]/uri 匹配的 uri

就像是

```
 imageUri = Convert.ToString(name.Element(ns + "Names/Name/files/file@formatcode[2001]/uri").Value) 
```

但这只是行不通。请帮忙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T00:56:05.380

首先，您的 xml 无效。结束标记应如下所示，`</Names>`而不是`<Names/>`

其次，您必须添加命名空间声明。像这样：

```
 XNamespace cat = "urn:schemas-microsoft-com:address:catalog";
    XNamespace add = "urn:schemas-microsoft-com:msnvideo:address";
    XDocument doc = XDocument.Parse(xdata);
    var firstTrck = doc.Element(cat + "Names").Elements(add + "Name").First().Element(add + "trckid");
    var val = firstTrck.Value; 
```

另外值得注意的是，注意如何在 Element/Elements 上附加 (s) 以确保您正在寻找一个或多个元素。

以下是迭代元素集合的方法：

```
 XNamespace cat = "urn:schemas-microsoft-com:address:catalog";
        XNamespace add = "urn:schemas-microsoft-com:msnvideo:address";
        XDocument doc = XDocument.Parse(xdata);

        var xNames = doc.Element(cat + "Names").Elements(add + "Name");
        foreach (var xName in xNames)
        {
            var trackingId = xName.Element(add + "trckid").Value;

            var xFiles = xName.Element(add + "files").Elements(add + "file").Where(xe => (string)xe.Attribute("formatCode") == "2001");
            foreach (var xFile in xFiles)
            {
                var uri = xFile.Element(add + "uri").Value;
            }
        } 
```

请注意，当您对此进行调试时，只有一个“名称”元素出现在集合中。这是因为`xmlns`声明不匹配每个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T02:47:11.963

我认为这将满足您的需求。

```
XmlDocument doc = new XmlDocument();
WebClient webClient = new WebClient();
string xmlstring = webClient.DownloadString(url);
doc.LoadXml(xmlstring);
XmlNamespaceManager nsMgr = new XmlNamespaceManager(doc.NameTable);
nsMgr.AddNamespace("ns", "urn:schemas-microsoft-com:address:catalog");
foreach (XmlNode n in doc.SelectNodes("/ns:Names/ns:Name/ns:trckid/@ref", nsMgr))
{
    Console.WriteLine(String.Format("trckid: {0}", n.InnerText));
}
foreach (XmlNode n in doc.SelectNodes("/ns:Names/ns:Name/ns:files/ns:file[@formatCode='2001']/ns:uri", nsMgr))
{
    Console.WriteLine(String.Format("uri: {0}", n.InnerText));
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-27T00:22:24.320

为什么不将每一行读入一个字符串数组，然后搜索包含您要查找的前缀的行。剥去它的正面和背面并将其存储在一个变量中。这对你有用吗？

# linux - 如何使用 Linux hugetlbfs 进行文件的共享内存映射？

> ID：10343124
> 
> 赞同：5
> 
> 时间：2012-04-27T00:16:09.697
> 
> 标签：linux, memory-mapped-files, vfs, huge-pages

我有一个程序，它使用`mmap()`共享内存来有效地访问大型数据库文件。我想尝试使用大页面，看看它是否可以加快速度。

我认为一种快速简便的方法是将数据库文件复制到 Linux 的*hugetlbfs*目录中，并在旧位置创建一个*符号链接。*

但是，这不起作用，因为该`cp`命令无法写入文件。我怀疑文件只能通过调用`ftrunc()`和`mmap()`系统调用来写入文件来创建。我可能会尝试编写一个复制工具来执行此操作，除非我得到描述现有工具的答案。

我正在寻找在 Linux 中使用大页面进行共享内存映射的任何其他好方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T22:20:07.480

现在是一个老问题。但是看到没有人回答，我实际上也想尝试大页面支持（出于不同的原因）。我会提供一个答案。

尽管现在大页面在现代内核中是透明的，但您仍然可以获得更多控制权。

这些功能可能是您正在寻找的。

[get_huge_pages()](http://linux.die.net/man/3/get_huge_pages) , [free_huge_pages()](http://linux.die.net/man/3/get_huge_pages) , [get_hugepage_region()](http://manpages.ubuntu.com/manpages/precise/man3/get_hugepage_region.3.html) , [free_hugepage_region()](http://manpages.ubuntu.com/manpages/precise/man3/get_hugepage_region.3.html)

您需要安装[libhugetlbfs](http://libhugetlbfs.sourceforge.net/)，它是hugetlbfs 的包装器。

这是一篇 Linux 周刊文章，可能会对您有所帮助。[巨大的页面 - 第 1 部分（介绍）](https://lwn.net/Articles/374424/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-12-08T10:30:55.873

Huge pages 是一种通过将几个连续的物理内存页（例如 4KB 长）映射到单个巨大的内存页（例如 2 MB、1 GB...）来节省 TLB 未命中的方法。Linux 提出了两种机制：

*   透明大页（THP）在内核内部透明管理；
*   由用户空间应用程序管理的用户控制的大页面。

除此之外，一个名为[libhugetlbfs](https://linux.die.net/man/7/libhugetlbfs)的可选用户空间库可用于提供用户友好的 API 和工具，以将大页面用于堆、静态链接程序的代码和数据段。这个库隐藏了内核提供的“原始”接口。根据应用程序，这可能有用或不够灵活。

对于问题的数据库示例问题，想法是在*hugetlbfs*文件系统中创建文件（它实际上是一种基于巨大内存页面的RAM文件系统），将文件（使用*ftrunc()*）扩展为大页面大小的倍数，将文件映射到内存中，并使用这些内存区域作为缓冲区来读取/写入数据库文件。由于访问内存页面所需的 TLB 条目更少，因此性能有所提高。

该[答案](https://stackoverflow.com/a/64914391/14393739)提供了有关使用 Linux“原始”接口映射大页面的方式的详细信息。

# facebook - 为特定 Facebook 主页正确创建 Facebook 应用程序的第一步是什么？

> ID：10343129
> 
> 赞同：1
> 
> 时间：2012-04-27T00:16:27.723
> 
> 标签：facebook, facebook-graph-api, facebook-apps, facebook-page

注意：我不确定是否应该将其添加到 stackoverflow 或网站管理员网站。让我知道我是否应该同时添加两者或特定的一个？

我正在尝试将非营利组织的 Facebook 页面元素实施到他们的网站中。但是，我不确定我是否以正确的方式进行此操作。我找到的所有信息都对我完全迷失的领域很模糊。

细节：

1.  他们的组织有一个 Facebook“页面”。
2.  我在以下位置创建了一个 Facebook APP：[https](https://developers.facebook.com/apps) ://developers.facebook.com/apps （现在我所做的只是创建了它。）
3.  他们将我的 Facebook 帐户作为管理员添加到他们的主页。
4.  他们有一个域 theirdomain.com 但正在我的个人域 dev.mydomain.com 上进行开发。（他们当前的主机非常严格，所以一旦开发完成，我会将所有内容移至他们的 domain.com，但在不同的主机上。）
5.  不要认为这个问题需要它，但我在 LAMP 环境中。

我的问题：

1.  如何安装 APP 或将其与他们的 Facebook 页面链接，以便访问他们的信息？人们一直说要创建一个 facebook 应用程序，但我没有找到关于某人如何使该应用程序专门为 Facebook 页面工作的确切信息。
2.  由于他们让我成为管理员，现在我从他们的主页更新中收到了一堆电子邮件，并且主页链接到我的个人 Facebook 帐户。这是所有开发人员在为客户创建 Facebook 功能时的处理方式吗？我有一种感觉，这不是我应该做的事情......
3.  一旦我在他们的网站中实现了 facebook 功能，我就不再想要访问 Facebook APP 或 Facebook 页面了。什么是预先计划的最佳方式，以便顺利过渡？

我创建 APP 的唯一目的是因为我想在他们的网站上显示“喜欢”和相册。也许还有一些其他功能，但基本上只是在他们的网站上显示某些 Facebook 页面内容。

我已经阅读了几天，但真的很困惑。一旦我能够指出正确的方向，我相信这一切都会有意义，我只需要点击那个缺失的拼图。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T01:21:08.983

1) 使用此链接

`https://www.facebook.com/dialog/pagetab?app_id=YOUR_APP_ID&display=popup&next=APPS_SECURE_CANVAS_URL`

将应用程序添加到页面。

或这个

```
http://www.facebook.com/add.php?api_key=your_app_id&pages=1 
```

也应该工作。

2) 是的，因为您现在是页面管理员，您将像任何其他管理员一样收到页面更新。您可以从设置页面选择退出更新。（或者您可以要求客户按照这些步骤操作）

3）您可以将自己从页面管理员中删除，但如果您可以删除该应用程序（或者它会从页面中分离出来）。最好让客户创建一个应用程序。我要求客户为他们创建一个应用程序。这是要走的路。

**编辑（评论后）**

1) 是以编程方式将应用程序添加到页面的标准方式。要访问 facebook 页面照片，请获取页面的访问令牌，然后通过图形 api（或通过其他方法）获取照片。

例如，如果您的页面有 id '12345'， `https://graph.facebook.com/12345/photos?access_token=<page_access_token>` 将为您抓取照片。

这会有所帮助`http://developers.facebook.com/docs/reference/api/page/`。

# model-view-controller - 尝试在 CakePHP 中制作瘦控制器和胖模型的指南

> ID：10343141
> 
> 赞同：1
> 
> 时间：2012-04-27T00:18:15.197
> 
> 标签：model-view-controller, cakephp

我是 Cake 的新手，一般来说也是 MVC 的新手。我想从一开始就养成良好的习惯。良好的习惯包括让控制器保持苗条，并使模型变胖。但对于像我这样的菜鸟来说，这有点移动目标。如果我需要将信息从一个模型传递到另一个模型，我是否只需将所有这些信息都转储到控制器中？试着让它在模型中工作？

这是一个动作，它是我试图解决的那种混乱的一个典型例子。

一切*似乎*都应该在控制器中，但我可能错了。此操作获取成员列表，将其发送到视图。在视图中，我可以勾选我想要“激活”其帐户的成员。没有 ACL，只是简单的身份验证。我确保“子管理员”只能通过使用 db 字段 client_id 看到他们被允许管理的用户。我使用的两个模型是用户和客户端。

```
public function activate() {
    if ($this->request->is('get')) {
        $id = $this->Auth->user('id');
        $this->User->id = $id; //make sure current User is the logged in user
        $currentClient = $this->User->field('client_id'); // get client_id based on logged in user
        $members = $this->User->Client->find('first', array( // find users that have the same client_id
            'conditions' => array('id' => $currentClient),
            'recursive' => 1
        ));
        $this->set('clients', $members); // send the users to the view                  
    } else if ($this->request->is('post') || $this->request->is('put')) {
        $members = $this->request->data['Members']; // grab players submitted from push form
        $memberIds = array(); // this will hold the selected users
        foreach($members as $a){
            $memberIds[$a['id']] = $a['id']; // loop over user's that were selected
        }
        $usersToActivate = $this->User->find('all', array( //find user records, based on the array of id's
            'conditions' => array(
                "User.id" => $memberIds
            )
        ));
        $this->Ticket->bulkActivate($usersToActivate); // send array of members into model for processing
        $this->Session->setFlash('Activations sent.', 'default', array('class' => 'success'));
        $this->redirect(array('action' => 'index'));
    }
} 
```

在我看来，它看起来并没有大错特错......而且我已经在模型中进行了一些处理（如实际获取用户记录并生成激活票证的 bulkActivate 所示）。

但我不禁觉得它还不是 100%。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T00:49:49.690

我不认为您只想获得一个客户？

```
$members = $this->User->Client->find('first', array 
```

我想这应该找到所有。在有很多用户的情况下，我已经改进了它以使用分页。我可能对此有误，但通过查看这段代码，我并不清楚您的关联和真正的目标。我不知道例如 Ticket 模型是如何与任何其他数据相关联的。但我猜你正在使用 Controller::uses，你不应该这样做，而是通过它们的关联访问相关模型。

不要使用像 $a 这样可怕的变量名，这很糟糕，没有人会知道这在更大的代码块或应用程序中意味着什么。您还命名了一个包含客户数据 $members 的数组，为什么不命名为 $clients？阅读这篇文章：[清洁代码](https://rads.stackoverflow.com/amzn/click/com/0132350882)和 CakePHP 我建议您遵循[CakePHP 编码标准](http://book.cakephp.org/2.0/en/contributing/cakephp-coding-conventions.html)。

描述目标，我认为这可以更好地重构。如果您想激活客户端以访问票证（这就是它的样子），为什么您没有在票证或客户端控制器/模型中完成它？

此外，大量的内联注释只会造成更多的混乱而不是帮助。编写干净易读的代码，代码会自己说话。您还没有在那里完成任何超级复杂的代码或超级复杂的数学运算。再一次，我可以推荐你阅读“清洁代码”，我认为这是每个开发人员的“必读”。

```
<?php
    // UsersController.php
    public function activate() {
        if ($this->request->is('post') || $this->request->is('put')) {
            $this->User->activate($this->request->data);
            $this->Session->setFlash('Activations sent.', 'default', array('class' => 'success'));
            $this->redirect(array('action' => 'index'));
        }

        this->Paginator->settings['Client'] = array(
            'conditions' => array('id' => $this->Auth->('current_id')),
            'contain' => array(
                'OnlyModelsYouNeedHere'));
        $this->set('clients', $this->Paginator->paginate($this->User->Client)); 
    }
?>

<?php
    // User.php - the model
    public function activate($data) {
        $memberIds = array();
        foreach($data['Members']members as $member) {
            $memberIds[$member['id']] = $member['id'];
        }
        $usersToActivate = $this->find('all', array(
            'conditions' => array(
                'User.id' => $memberIds)));
        return $this->Ticket->bulkActivate($usersToActivate);
    }
?> 
```

传递 id 也可以减少更多，但是，嘿，现在已经晚了。:) 把它当作你代码的粗略重构，想想我改变了什么，更重要的是为什么。

如果您想查看正确的瘦控制器和胖模型示例，[请查看我们的插件](https://github.com/cakedc/)，用户插件 UsersController 和 Model 可能会给您一个更大的图景。

# mysql - 如何命名 SQL 查询？

> ID：10343143
> 
> 赞同：1
> 
> 时间：2012-04-27T00:18:52.960
> 
> 标签：mysql, alias

我的教授要求我为与本作业相关的每个查询添加一个查询名称。我假设他指的是一个别名，所以我已经成功地使用了这段代码，并提出了一些问题：

```
SELECT COUNT(CustomerID) AS Problem1
FROM Customers; 
```

但是，在创建表或删除这样的列（没有错误）时，我不能使用 AS。

```
CREATE TABLE TestDB AS Problem6
(
SuggestionID Char(5) NOT NULL PRIMARY KEY,
Suggestion VarChar(100) NOT NULL,
SugContact Char(30) NOT NULL,
SugPhone Char(10),
SugDate Date NOT NULL,
SugPriority INT
) 
```

或使用 INSERT INTO 时。所以我的问题是：如何命名特定查询，特别是在创建上述数据库或删除列时。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T00:22:15.987

不能这样命名查询 - 您可以将其放入[存储过程中](http://dev.mysql.com/doc/refman/5.0/en/stored-routines.html)，或者替代地 - 更有可能的是，他只是希望您使用如下注释标记查询：

```
-- Question 1
CREATE TABLE TestDB( ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-10-14T12:31:07.413

使用 with，例如：

```
WITH Problem_1 AS (
 SELECT COUNT(CustomerID) as Customers
 from Customer
 ) 
```

在您的示例中，当您使用时，您只是在更改列名。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-12-30T08:01:54.767

```
(SELECT * AS B FROM TBL1)A 
```

`A`是上述采石场的名称

你可以`A`像这样使用：

```
SELECT PID FROM(SELECT ProductID AS PID,ProductName As PNAME FROM Products where ProductID=32)A 
```

一个真实的例子：

```
SELECT cID AS `Customer ID`,cNM AS `Customer Name`,MAX(SumPrice) AS `Total order `FROM(SELECT Customers.CustomerID AS cID , Customers.CustomerName AS cNM, sum(Products.Price*OrderDetails.Quantity)as SumPrice
FROM(((Orders
INNER JOIN Customers ON Orders.CustomerID = Customers.CustomerID)
INNER JOIN OrderDetails ON OrderDetails.OrderID = orders.OrderID)
INNER JOIN Products ON OrderDetails.ProductID = Products.ProductID)group by CustomerName)A 
```

我们使用`A`了 quary的结果

**[结果](https://i.stack.imgur.com/9uUbb.png)**

# java - jsf表达式语言（el）类函数生命范围

> ID：10343144
> 
> 赞同：0
> 
> 时间：2012-04-27T00:18:54.053
> 
> 标签：java, jsf, scope, el

el语言中使用的静态类的范围是什么？

我假设应用范围？

我在调试模式下对其进行了测试，并且该延迟加载属性仅在多个窗口、浏览器中初始化一次。

```
private static Object[] objects = null;

public static Object[] getObjects()
{
    if(ElClass.objects == null)
        //init objects
    return ElClass.objects;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T00:25:20.680

没有具体实例的方法。EL 函数类甚至没有被构造。EL 函数旨在完全无状态。静态变量是每个定义的 JVM 范围的（或者你称之为应用程序范围的）。在普通的 Java 代码中，您也可以这样做，`ELClass.getObjects()`而不是`new ELClass().getObjects()`.

至于您的特定示例，我建议仅在静态初始化程序块中进行初始化。延迟加载是不必要的。

```
private static final Object[] objects;

static {
    // Init objects.
}

public static Object[] getObjects() {
    return objects;
} 
```

我还建议添加一个私有构造函数，以防止函数类被构造。

```
private ELClass() {
    // Prevent construction.
} 
```

# jquery - 如何在带有外部 CSS 文件的 jquery 对话框中使用 dialogClass 选项

> ID：10343149
> 
> 赞同：1
> 
> 时间：2012-04-27T00:19:10.247
> 
> 标签：jquery, css, jquery-ui-dialog

我已经意识到如果您使用外部 CSS 文件，jquery 对话框将不会应用 dialogClass 定义的任何 CSS 样式。...或者至少不是我这样做的方式。我继续创建一个小提琴，但注意到它在那里工作，然后尝试将我的 CSS 移动到页面的头部部分并且它工作。有没有办法让 jquery 对话框应用来自外部 CSS 文件的样式，还是我在 html 页面中被 CSS 卡住了？请提供以下代码工作方式的解决方案（使用 html 进行即时对话框和初始化程序中提供的对话框选项）。

```
function test()
{
    var html = "<strong>Hello World!</strong>";
    var $dialog = $('<div></div>').html(html)
        .dialog({ dialogClass: 'myStyle', modal: true, autoOpen: false });

    $dialog.dialog('open');
}

.myStyle
{
    color: #FF0000;
    font-size: 28pt;
    font-family: 'Comic Sans MS';
}

<head>
<script type="text/javascript" src="myexternal.js"></script>
    <link type="text/css" href="core.css" rel="Stylesheet" />
    <link type="text/css" href="lib/jquery-ui-1.8.19.custom/css/ui-lightness/jquery-ui-1.8.19.custom.css" rel="Stylesheet" />   
    <script type="text/javascript" src="lib/jquery-ui-1.8.19.custom/js/jquery-1.7.2.min.js"></script>
    <script type="text/javascript" src="lib/jquery-ui-1.8.19.custom/js/jquery-ui-1.8.19.custom.min.js"></script>
</head>
<body>
    <form id="form2" >
        <div>
            <input id="Button2" type="button" value="Show Dialog" onclick="test();" />
        </div>
    </form>
</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T00:30:29.320

大声笑的问题是你的头部布局，将 jQueryUI css 链接放在你自己的核心链接之前。这种方式首先应用 jQueryUI.css，然后再应用你的 css，从而进行迟到的更改。

另外，同样，如果你的核心 js 使用 jquery，最好让它跟随你标题中的 jquery 链接。在添加您自己的“添加剂”之前，始终先添加“核心库”（又名 jQuery 和 jQueryUI）

# jquery - jQuery :eq(index) 选择器

> ID：10343150
> 
> 赞同：4
> 
> 时间：2012-04-27T00:19:16.000
> 
> 标签：jquery, jquery-selectors

我想动态使用 jQuery :eq(index) 选择器，这意味着我想提供一个变量作为索引并动态选择相应的元素。但它似乎不起作用。我认为这是因为引号。由于这个选择器被用作例如$('ul li:eq(3)')，当我提供一个变量作为索引时，索引可能被视为选择器中字符串的一部分而不是变量. 这样对吗？如何解决此问题并动态选择元素？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-27T00:29:17.203

```
var index = 5; 
```

以下内容适用于您的示例。

```
$('ul li:eq(' + index + ')') 
```

但是为了在现代浏览器中获得更好的性能，请使用：

```
$('ul li').eq(index) 
```

另一个原因`.eq()`比`:eq()`你可以通过 '.eq(-1)' 来获取最后一个元素更好。

来源：[http ://api.jquery.com/eq-selector/](http://api.jquery.com/eq-selector/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-27T00:21:44.147

您的怀疑是正确的，字符串中的变量名被视为字符串的一部分，而不是变量名。您想使用字符串连接让 Javascript 知道您的变量是一个变量。它看起来像这样：

```
$('ul li:eq(' + myVar + ')') 
```

现在，`myVar`被识别为变量，而不是字符串的一部分。

# c# - 在 Visual Studio 2010 winforms 项目中获取表单设计视图的任何快捷方式/

> ID：10343152
> 
> 赞同：3
> 
> 时间：2012-04-27T00:19:51.193
> 
> 标签：c#, vb.net, winforms, visual-studio, keyboard-shortcuts

在 Visual Studio 2010 的 winforms 项目中是否有快捷方式进入设计视图表单。F7 将带您到类表单后面的代码，shift + F7 将带您进入设计模式。是否有 filename.designer.cs 表单的快捷方式您有控件定义、委托（用于单击事件等）。定义。如果我更改点击事件的名称等，我会经常访问表单。我必须通过解决方案资源管理器并单击文件。是否有类似 F7 的快捷方式可以打开 Designer.cs 文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-05-21T10:50:04.387

使用 F7 在设计视图和代码视图之间切换

[有关更多信息，请点击此链接](http://www.aspdotnet-suresh.com/2012/11/visual-studio-keyboard-shortcut-keys.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-27T03:34:16.820

假设 C# 键盘设置，我知道的最短方法是按下`F12`导航`InitializeComponent()`到 .designer.cs *GUI 创建*代码。

如果您正在编辑控件定义、事件等的名称，则使用 Properties Window 会更容易`F4`。使用属性窗口也可以很好地进行重构。

# c - X86 程序集 - 处理 IDIV 指令

> ID：10343155
> 
> 赞同：25
> 
> 时间：2012-04-27T00:20:39.620
> 
> 标签：c, assembly, compiler-construction, x86

我目前正在编写一个简单的 C 编译器，它将 .c 文件作为输入并生成汇编代码（X86、AT&T 语法）。一切都很好，但是当我尝试执行 IDIVQ 指令时，我得到了一个浮点异常。这是我的输入：

```
int mymain(int x){
  int d;
  int e;
  d = 3;
  e = 6 / d;
  return e;
} 
```

这是我生成的代码：

```
mymain:
.LFB1:
    .cfi_startproc
    pushq   %rbp
    .cfi_def_cfa_offset 16
    movq    %rsp, %rbp
    .cfi_offset 6, -16
    .cfi_def_cfa_register 6
    movq    %rdi, -40(%rbp)
    movq    $3, -8(%rbp)
    movq    $6, %rax
    movq    -8(%rbp), %rdx
    movq    %rdx, %rbx
    idivq   %rbx
    movq    %rax, -16(%rbp)
    movq    -16(%rbp), %rax
    leave
    .cfi_def_cfa 7, 8
    ret
    .cfi_endproc
.LFE1:
    .size mymain, .-mymain 
```

根据[http://www.cs.virginia.edu/~evans/cs216/guides/x86.html](http://www.cs.virginia.edu/~evans/cs216/guides/x86.html)，**idivq %rbx应该在****%rax**中产生 6/d （商）。但是我遇到了一个浮点异常，我似乎找不到问题所在。

任何帮助都感激不尽！

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-04-27T10:23:57.923

Mysticials 答案的第一部分是正确的，`idiv`进行 128/64 位除法，所以 的值`rdx`，它保存被除数的高 64 位，不能包含随机值。但是零扩展是错误的方法。

由于您已经*签署了*变量，因此您需要*签署*extend `rax`to `rdx:rax`。在 AT&T 和Intel 语法中有一个特定的指令`cqto`（*将 quad 转换为 oct ）。*`cqo`AFAIK 较新版本的气体接受这两个名称。

```
movq    %rdx, %rbx
cqto                  # sign extend rax to rdx:rax
idivq   %rbx 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-04-27T00:27:45.197

该[`idivq`指令](https://www.felixcloutier.com/x86/idiv)将一个 128 位整数 ( `rdx:rax`) 除以给定的源操作数。

*   `rax`持有被除数的低 64 位。
*   `rdx`持有被除数的高 64 位。

当商不适合 64 位时，`idiv`将出错（#DE 异常，操作系统通过提供[POSIX 要求的算术异常所需的 SIGFPE 信号来处理该异常](https://stackoverflow.com/questions/16928942/why-does-integer-division-by-zero-result-in-a-floating-point-exception)）。

由于您正在编译使用 signed 的代码`int`，因此您还需要对 extend `rax`to进行签名`rdx:rax`，这意味着将`rax`符号位复制到的每一位，`rdx`并使用 cqo 别名 cqto 完成：

```
movq    %rdx, %rbx        # or load into RBX or RCX in the first place
cqo
idivq   %rbx              # signed division of RDX:RAX / RBX 
```

* * *

如果您一直在进行`unsigned`除法，则将 RDX 归零以将 RAX 零扩展为 RDX:RAX：

```
movq    %rdx, %rbx
xor     %edx, %edx      # zero "rdx"
divq    %rbx            # unsigned division of RDX:RAX / RBX 
```

* * *

另请注意，在 x86-64 System V ABI 中，`int`是 32 位有符号类型，而不是 64 位。在这种情况下，将其扩大到 64 位是合法的（因为结果相同），但会使您的代码变慢，尤其是除法。

# .net - 是否可以使用 Monodevelop 构建可移植类库？

> ID：10343160
> 
> 赞同：4
> 
> 时间：2012-04-27T00:21:18.627
> 
> 标签：.net, monodevelop, portable-class-library

是否可以使用[Monodevelop](http://monodevelop.com/)构建可[移植类库](http://msdn.microsoft.com/en-us/library/gg597391.aspx)？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-27T15:56:32.087

MonoDevelop 3.0 将附带初步的 PLP 支持，但它实际上无法针对特定的配置文件 - 相反，它只会针对您已安装的 MonoTouch 或 Mono4Android 配置文件（或 .NET Framework v4.0，如果两者都没有安装）。

这是一个 hack，但它适用于人们希望通过 MonoTouch 和 Mono4Android 使用 PLP 项目的方式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-27T08:47:40.880

更新：这个接受的答案现在已经过时了。

目前的情况是，只需几个小技巧，您就可以做很多事情 - 请参阅[http://slodge.blogspot.co.uk/2012/12/cross-platform-winrt-monodroid.html](http://slodge.blogspot.co.uk/2012/12/cross-platform-winrt-monodroid.html)

近期的情况是，相当广泛的全面支持正在积极开发中 - [http://slodge.blogspot.co.uk/2013/02/the-future-is-portable.html](http://slodge.blogspot.co.uk/2013/02/the-future-is-portable.html)

* * *

我不相信——我认为微软当前的 PCL 实施在实施方式上相当“封闭”。

另外，请注意，如果您的目标是 MonoDroid 和 MonoTouch 类型的项目，那么这些项目不受官方支持，并且它们不适合确切定义的可移植库配置文件 - 例如，如果您尝试包含 System.Net，那么您将遇到问题使用 MonoDroid。

也就是说......使用一些小的“黑客”，如[http://jpobst.blogspot.co.uk/2012/04/mono-for-android-portable-libraries-in.html](http://jpobst.blogspot.co.uk/2012/04/mono-for-android-portable-libraries-in.html)可以让 PCL 在非-微软项目。

# c++ - “多个运算符 + 匹配这些操作数”错误

> ID：10343161
> 
> 赞同：3
> 
> 时间：2012-04-27T00:21:25.900
> 
> 标签：c++, operator-overloading, type-conversion, implicit-conversion, explicit-constructor

我正在为学校作业创建一个 Money 课程。我已经定义了从 Money 到 double 的转换，我有一个 Money 的构造函数，它接受一个 int，另一个构造函数接受一个 double，并且我重载了“+”运算符以将两个 Money 类型的对象相加。当我尝试执行类似`myMoney + 10`myMoney 是 Money 类型的对象，而 10 显然是一个整数之类的操作时，会出现错误消息。以下是其余相关代码：

```
class Money {
private:
    int dollars;
    int cents;
public:
    Money(double r);
    Money(int d) : dollars(d), cents(0) {}
    operator double();
}

Money operator+(Money a, Money b) {
    double r = double(a) + double(b);
    return Money(r);
}

Money::operator double() {
    return dollars+double(cents)/100;
}

Money::Money(double r) {
    ...
} 
```

如果我尝试`Money(double(myMoney)+10)`并且如果我明确两个构造函数，该程序实际上可以工作，但我不确定我是否理解自动转换发生了什么。谁能解释这种行为？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-27T00:31:16.153

```
MyMoney + 10 
```

由于没有`operator+(Money, int)`，因此必须在此处进行一些转换。编译器可以将 转换`Money`为 a `double`，然后将 10 转换为 'double' 并选择内置的`operator+(double,double)`，或者它可以转换`int`为`Money`并选择您的`operator+(Money,Money)`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T01:26:42.773

编译器看到的问题以及 Benjamin 指出的问题是，有两个转换序列会导致`operator+`重载的不同有效参数集。但这实际上表明设计存在更深层次的问题。几乎不应该使用隐式转换，并且从两种不同类型进行隐式转换是一个问题的根源。

考虑使您的构造函数显式化，或者使转换运算符也显式化（C++11 语言特性），或者删除它们并提供命名转换（通过成员函数而不是运算符），就像`std::string::c_str()`.

任何东西都会自动变成钱真的有意义吗？它也很容易变成灰尘吗？学习让编译器通过避免削弱类型系统的隐式转换来帮助您检测逻辑问题。

# powershell - 如何从 3rd 方应用程序启动 powershell？

> ID：10343162
> 
> 赞同：0
> 
> 时间：2012-04-27T00:21:43.350
> 
> 标签：powershell, module, active-directory, launching-application

我创建了一个使用 Active Directory 模块的 Powershell 脚本。我需要从名为 LANDesk 的第 3 方应用程序执行脚本。

当我这样做时，它不会正确运行脚本。我相信这是因为 AD 模块。当我在加载了 AD 模块的 Powershell 提示符下运行脚本时，它工作正常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T00:25:57.257

从这样的应用程序中，您应该能够像这样运行它：

```
powershell.exe -file c:\myscript.ps1 
```

如果应用程序尝试从另一个用户的上下文运行脚本，您可能需要确保该用户已运行`Set-ExecutionPolicy RemoteSigned`（或不受限制）。另一种可能性是您的脚本在 32 位 PowerShell 提示符下运行，而应用程序正在启动 64 位版本的 PowerShell（反之亦然）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T11:31:35.730

从您的应用程序调用 powershell 并将脚本路径传递给 File 参数。在脚本中，导入 AD 模块，然后在 AD 模块上添加 relu 命令。如有必要，您可以通过 ExecutionPolicy 参数设置执行策略。

# javascript - 有什么方法可以访问 JavaScript/ActionScript 中的当前标签集

> ID：10343168
> 
> 赞同：0
> 
> 时间：2012-04-27T00:22:19.623
> 
> 标签：javascript, actionscript, namespaces, clone, labeled-statements

如果我创建一个简单的[标记语句](http://oreilly.com/javascript/excerpts/javascript-good-parts/jslint.html#labels)，例如：

```
foo: do { alert('hi') } while (false) 
```

有没有办法克隆 foo？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T23:36:16.463

不，显然这是不可能的。标签不能在赋值语句中使用，标签的范围是定义它的循环的条件块。

```
pastureLoop:
for (i = 0; i < pastureLen; i++)
{
   var pasture = pastures[i];
   var cows = pasture.getCows();

   var j, numCows = cows.length;
   for (j = 0; j < numCows; j++)
   {
      var cow = cows[j];
      if (cow.isSick())
         { break pastureLoop; }

      healthyCows++;
   }
}

pastureLoop:
for (i = 0; i < pastureLen; i++)
{
   var pasture = pastures[i];
   var cows = pasture.getCows();

   var j, numCows = cows.length;
   for (j = 0; j < numCows; j++)
   {
      var cow = cows[j];
      if (cow.isEating())
         { continue pastureLoop; }
   }

   // No cows were eating, so fire the callback for pasture[i]
   pasture.executeCallback();    // or whatever
} 
```

最接近的替代方案是非严格模式下的标记函数声明：

> B.3.2 标记函数声明
> 
> 在 ECMAScript 2015 之前，规范`LabelledStatement`不允许将语句标签与`FunctionDeclaration`. 但是，标签`FunctionDeclaration`是非严格代码的允许扩展，并且大多数浏览器托管的 ECMAScript 实现都支持该扩展。在 ECMAScript 2015 中，`LabelledStatement`允许使用`FunctionDeclaration`as a`LabelledItem`但 13.13.1 的语法产生式包含一个早期错误规则，如果发生这种情况会产生一个语法错误。为了 Web 浏览器的兼容性，该规则通过添加下划线文本进行修改：
> 
> LabelledItem : 函数声明

```
It is a Syntax Error if any strict mode source code matches this rule. 
```

这可用于创建不可访问的声明：

```
function show_alert()
  {
  label:
    {
    break label;
    var foo = 1;
    }
  console.log(foo);
  } 
```

但可以通过字符串操作和函数构造函数访问。

**参考**

*   [ECMAScript-6 附录 B，第 3.2 节：带标签的函数声明](http://www.ecma-international.org/ecma-262/6.0/#sec-labelled-function-declarations)

*   [es6 中的循环展开和完成值](https://esdiscuss.org/topic/loop-unrolling-and-completion-values-in-es6)

*   [JavaScript 转到](http://blog.stchur.com/2007/03/09/the-javascript-goto-statement/)

*   [加速你的 JavaScript，第 1 部分](http://www.nczonline.net/blog/2009/01/13/speed-up-your-javascript-part-1/)

# java - 无法用我的列表初始化课程

> ID：10343169
> 
> 赞同：0
> 
> 时间：2012-04-27T00:22:20.010
> 
> 标签：java

我无法在下面的课程中摆脱这个 NullPointerException 。我的控制器正在扩展这个类，当我注释掉下面的构造函数时问题就消失了......我做错了什么？

```
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'contentController' defined in file [C:\Users\bkuhl\JavaProjects\cmt\cmt\target\cmt\WEB-INF\classes\com\site\cmt\web\ContentController.class]: Instantiation of bean failed; nested exception is org.springframework.beans.BeanInstantiationException: Could not instantiate bean class [com.fettergroup.cmt.web.ContentController]: Constructor threw exception; nested exception is java.lang.NullPointerException 
```

* * *

```
public class Controller {
    private List<String> cssFiles;
    private List<String> jsFiles;

    public Controller () {
        this.addCss("global.css");
        this.addJs("global.js");
    }

    public ModelAndView render (ModelAndView model) {

        //add Js & Css files
        model.addObject("cssFiles", this.cssFiles);
        model.addObject("jsFiles", this.jsFiles);

        return model;
    }

    /*
     * Add a css file to the page
     */
    public final void addCss (String cssPath) {
        cssFiles.add(this.cssFiles.size(), cssPath);
    }

    /*
     * Add a javascript file to the page
     */
    public final void addJs (String jsPath) {
        jsFiles.add(this.jsFiles.size(), jsPath);
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T00:24:00.290

`cssFiles`并且`jsFiles`从未显式初始化，因此为空。您应该使用`List`诸如`ArrayList`.

```
private List<String> cssFiles = new ArrayList<String>();
private List<String> jsFiles = new ArrayList<String>(); 
```

当您声明一个字段（类变量）并且不分配它时，该值默认为 null（对于引用）、0（对于数字）或 false（布尔值）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T00:29:47.220

```
public Controller () {
    this.cssFiles = new ArrayList<String>();
    this.jsFiles = new ArrayList<String>();
    this.addCss("global.css");
    this.addJs("global.js");
} 
```

你为什么这样做：

```
public final void addCss (String cssPath) {
    cssFiles.add(this.cssFiles.size(), cssPath);
}

public final void addJs (String jsPath) {
    jsFiles.add(this.jsFiles.size(), jsPath);
} 
```

真的不需要第一个参数...

# python - 关于python3.2：创建一个函数来确定用户输入的日期是有效还是无效

> ID：10343171
> 
> 赞同：-3
> 
> 时间：2012-04-27T00:22:22.770
> 
> 标签：python, python-3.2

您好我正在尝试创建一个基本的 python 程序来确定用户输入的日期是有效还是无效。我只是很难确定问题出在哪里并且已经解决了一段时间。任何帮助表示赞赏。到目前为止，这是我的代码。

```
def main():
#get the month day and year
(month, day, year)=eval(input("Enter month, day, and year numbers:"))
date1=str(month)+"/"+str(day)+"/"+str(year)
#determine if user inputted date is valid or invalid
def Valid (month, day, year): int(month) in range(0,12), int(day) in range(0,31), int(year) in range(0,100000)
def Verify (month, day, year):
    if (month, day, year) is Valid (month, day, year):
        print ((date1), "is a valid date.")
    else:
        print ("This is not a valid date.")

Verify (month, day, year) 
```

（主要的）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T00:23:58.703

I'm only beginning Python so doubtless I'm not doing it correctly but, altering your code as little as possible, and leaving your lines in as comments before my suggestion:

```
#determine if user inputted date is valid or invalid 
def Valid (month, day, year):
    #int(month) in range(0,12), int(day) in range(0,31), int(year) in range(0,100000) 
    return int(month) in range(1,13) and int(day) in range(1,32) and int(year) in range(1,100000)

def Verify (month, day, year):
    #if (month, day, year) is Valid (month, day, year):
    if Valid (month, day, year):
        print ((date1), "is a valid date.")
    else:
        print ("This is not a valid date.")

#get the month day and year 
(month, day, year)=eval(input("Enter month, day, and year numbers:")) date1=str(month)+"/"+str(day)+"/"+str(year) 
Verify (month, day, year) 
```

Be aware that "in range(0,12)" will return True for 0 to 11 and False for 12; you need (1,13) for the month test. Naturally this still thinks 29th Feb 1989 and 31st April are valid. Remember that years divisible by 4 are only leap years if the century is also divisible by 4, and there was no year 0 in normal usage.

# objective-c - 从字符串中删除字符和之后的所有内容

> ID：10343175
> 
> 赞同：9
> 
> 时间：2012-04-27T00:23:00.263
> 
> 标签：objective-c, cocoa

我知道替换字符串的字符串，但这只有在我确切知道要删除的内容时才有效。

如果我有如下字符串：

“你好，这是一个测试&功能=你好”

如何删除“&feature”以及之后的所有内容？

任何帮助将不胜感激。提前致谢！

编辑：如果绝对有必要使用 REGEX，有人可以告诉我如何使用它吗？我知道它是 10.7 以后的版本，但我对此很好。更好的是，字符串修剪或使用 NSScanner 的示例？

再次感谢大家。

编辑：下面发布的解决方案是正确的，但导致我崩溃。这就是我解决问题的方法：

```
NSString *newString = [[oldString componentsSeparatedByString: @"&feature="] objectAtIndex:0]; 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-04-27T01:07:45.703

它可以在没有 REGEX 的情况下完成，如下所示：

```
NSString *string = @"hi-there-this-is-a-test&feature=hi-there";
    NSRange range = [string rangeOfString:@"&feature"];
    NSString *shortString = [string substringToIndex:range.location]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T00:27:24.690

查找模式匹配，也就是正则表达式。

哦，哇，TIL 没有在 Objective-C Cocoa 中执行正则表达式的内置方法？根据[Objective-C Cocoa 应用程序中的正则表达式](https://stackoverflow.com/questions/422138/regular-expressions-in-an-objective-c-cocoa-application)

无论如何，该问题中提到了库。

# c++ - 为什么这段 C++ 代码会出现“非法令牌”编译时错误？

> ID：10343177
> 
> 赞同：5
> 
> 时间：2012-04-27T00:23:09.793
> 
> 标签：c++, visual-studio, compiler-errors, numeric-limits

在我的应用程序（在 Visual C++ 2010 下编译）中，我在头文件中有这样的代码：

```
// example.h
#pragma once

#include <limits>

namespace myspace
{

// A generic equality test
template<typename T> inline bool equal(
    const T &v1, 
    const T &v2, 
    const T &eps = std::numeric_limits<T>::epsilon())
{
    return (v1 == v2);
}

// Template specialization for floating-point numbers
template<> bool equal<float>(
    const float &v1, 
    const float &v2, 
    const float &eps);

// A generic equality test for finite-precision real number representations (with epsilon)
template<typename T> inline bool realEqual(
    const T &p, 
    const T &q, 
    const T &eps = std::numeric_limits<T>::epsilon())
{
    return (fabs(p - q) < eps);
}

} // namespace myspace 
```

...以及 .cpp 文件中的一些代码：

```
// example.cpp
#include "example.h"

using namespace std;
using namespace myspace;

// equal-macro specialization that calls the appropriate equality test function for real numbers
template<> bool myspace::equal<float>(
    const float &v1, 
    const float &v2, 
    const float &eps)
{
    return (realEqual(v1, v2, eps));
}

int _tmain(int argc, _TCHAR* argv[])
{
    float a,b;
    bool x = realEqual(a,b); // OK
    bool x = equal(a,b); // compile error
    return 0;
} 
```

这无法编译，给我：

> ------ 构建开始：项目：测试，配置：调试 Win32 ------
> test.cpp
> c:\users\ninja\documents\visual studio 2010\projects\test\test\test.h(10 ): 错误 C2589: '::' : '::'右侧的非法令牌
> c:\users\ninja\documents\visual studio 2010\projects\test\test\test.h(10): 错误 C2059: 语法错误：'::'
> ========== 构建：0 成功，1 失败，0 最新，0 跳过 ==========

有问题的行是定义了 equal() 函数的“eps”参数默认值的行。

谷歌搜索显示人们在 numeric_limits 中的其他函数（即 min() 和 max()）也有类似的“非法令牌”错误，但这是由于特定于 Windows 的 c++ 标准库头文件中存在一些#define，它定义了由于某些遗留原因，“min”和“max”。没有提到 epsilon()，我对为什么我在这里遇到错误感到非常困惑。无论如何，将函数名称从“equal”更改为“smartEqual”之类的名称仍然会出现相同的错误，因此名称显然不是问题。什么是？

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-27T00:34:49.343

看起来它是由 Visual Studio 中的这个错误引起的：

[https://connect.microsoft.com/VisualStudio/feedback/details/583081/](https://connect.microsoft.com/VisualStudio/feedback/details/583081/)

另请参阅此处：

[模板函数特化默认参数](https://stackoverflow.com/questions/3402338/template-function-specialization-default-argument)

# android - 如何对从 Activity 启动/发送的 Intent 进行单元测试？

> ID：10343184
> 
> 赞同：7
> 
> 时间：2012-04-27T00:24:21.123
> 
> 标签：android, junit, android-testing

如何创建 Android JUnit 测试用例来测试 Activity 中生成的 Intent 的内容？

我有一个包含 EditText 窗口的 Activity，当用户完成输入所需数据时，Activity 会向 IntentService 启动一个 Intent，该 IntentService 记录数据并继续应用程序进程。这是我要测试的类， OnEditorActionListener/PasscodeEditorListener 被创建为一个单独的类：

```
public class PasscodeActivity extends BaseActivity {
    EditText                    m_textEntry = null;
    PasscodeEditorListener      m_passcodeEditorListener = null;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.passcode_activity);

        m_passcodeEditorListener = new PasscodeEditorListener();
        m_textEntry = (EditText) findViewById(R.id.passcode_activity_edit_text);
        m_textEntry.setTag(this);
        m_textEntry.setOnEditorActionListener(m_passcodeEditorListener);
    }

    @Override
    protected void onPause() {
        super.onPause();
        /*
         *   If we're covered for any reason during the passcode entry,
         *   exit the activity AND the application...
         */
        Intent finishApp = new Intent(this, CoreService.class);
        finishApp.setAction(AppConstants.INTENT_ACTION_ACTIVITY_REQUESTS_SERVICE_STOP);
        startService(finishApp);
        finish();
    }

}

class PasscodeEditorListener implements OnEditorActionListener{
    @Override
    public boolean onEditorAction(TextView v, int actionId, KeyEvent event) {
        PasscodeActivity activity = (PasscodeActivity) v.getTag();
        boolean imeSaysGo = ((actionId & EditorInfo.IME_ACTION_DONE)!=0)?true:false;
        boolean keycodeSaysGo = ((null != event) && 
                (KeyEvent.ACTION_DOWN == event.getAction()) && 
                (event.getKeyCode() == KeyEvent.KEYCODE_ENTER))?true:false;

        if (imeSaysGo || keycodeSaysGo){
            CharSequence seq = v.getText();
            Intent guidEntry = new Intent(activity, CoreService.class);
            guidEntry.setAction(AppConstants.INTENT_ACTION_PASSCODE_INPUT);
            guidEntry.putExtra(AppConstants.EXTRA_KEY_GUID, seq.toString());
            activity.startService(guidEntry);
            return true;
        }
        return false;
    }
} 
```

如何拦截活动生成的两个可能的出站 Intent 并验证其内容？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-27T13:10:36.513

我想出了如何在另一个网站的帮助下使用 ContextWrapper。

使用 ContextWrapper 并覆盖所有意图函数。概括我所有的 Activity 测试，我扩展了 ActivityUnitTestCase 类并将解决方案实现为 shim。享受：

```
import android.app.Activity;
import android.app.Instrumentation;
import android.content.ComponentName;
import android.content.Context;
import android.content.ContextWrapper;
import android.content.Intent;
import android.test.ActivityUnitTestCase;

public class IntentCatchingActivityUnitTestCase<T extends Activity> extends ActivityUnitTestCase<T> {

    protected Activity m_activity;
    protected Instrumentation m_inst;
    protected Intent[] m_caughtIntents;
    protected IntentCatchingContext m_contextWrapper;

    protected class IntentCatchingContext extends ContextWrapper {
        public IntentCatchingContext(Context base) {
            super(base);
        }

        @Override
        public ComponentName startService(Intent service) {
            m_caughtIntents = new Intent[] { service };
            return service.getComponent();
        }

        @Override
        public void startActivities(Intent[] intents) {
            m_caughtIntents = intents;
            super.startActivities(intents);
        }

        @Override
        public void startActivity(Intent intent) {
            m_caughtIntents = new Intent[] { intent };
            super.startActivity(intent);
        }

        @Override
        public boolean stopService(Intent intent) {
            m_caughtIntents = new Intent[] { intent };
            return super.stopService(intent);
        }
    }

    // --//
    public IntentCatchingActivityUnitTestCase(Class<T> activityClass) {
        super(activityClass);
    }

    protected void setUp() throws Exception {
        super.setUp();
        m_contextWrapper = new IntentCatchingContext(getInstrumentation().getTargetContext());
        setActivityContext(m_contextWrapper);
        startActivity(new Intent(), null, null);
        m_inst = getInstrumentation();
        m_activity = getActivity();
    }

    protected void tearDown() throws Exception {
        super.tearDown();
    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-27T07:57:24.340

或者，您可以重构代码以进行“干净”的单元测试（我的意思是一个单元测试，除了被测类之外，所有的东西都被模拟了）。实际上，我自己也遇到了一种情况，`java.lang.RuntimeException: Stub!`因为我要进行单元测试的代码创建了包含我注入的模拟的新意图。

我考虑为意图创建自己的工厂。然后我可以向我的测试类注入一个模拟工厂：

```
public class MyClassToBeTested {
    public MyClassToBeTested(IntentFactory intentFactory) {
        //assign intentFactory to field
    }
    ....
    public void myMethodToTestUsingIntents() {
        Intent i = intentFactory.create();
        i.setAction(AppConstants.INTENT_ACTION_PASSCODE_INPUT);
        //when doing unit test, inject a mocked version of the
        //IntentFactory and do the necessary verification afterwards.
        ....
    }
} 
```

我的情况和你的不一样，但我相信你也可以应用工厂模式来解决它。我更喜欢编写代码来支持真正的单元测试，但必须承认您的解决方案非常聪明。

# asp.net-mvc-3 - 如何在 mvc3 的编辑视图中显示选中的单选按钮

> ID：10343190
> 
> 赞同：1
> 
> 时间：2012-04-27T00:25:25.910
> 
> 标签：asp.net-mvc-3, radio-button

在我的编辑视图中，我可以保留字段的值，但单选按钮。就像我从网格中选择行并单击编辑一样，它为我提供了以前保存的所有其他字段 bt 的值，而不是单选按钮

如果保存的数据包含性别值为 F 那么我如何设置这些值

```
if(gender='f')
 {
    <input type="radio" name="forwhom" value="f" checked="checked"></input>
 }
else
  <input type="radio" name="forwhom" value="m" checked="checked"></input> 
```

我正在使用 2 个部分视图显示我的数据，如下所示

我必须为它写任何ajax吗？请帮忙问候！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T00:29:39.470

在这种情况下，您可以使用[Razor ：](http://weblogs.asp.net/scottgu/archive/2010/07/02/introducing-razor.aspx)

```
@Html.RadioButtonFor(x => x.Gender, "radioValue", new { @checked = true }) 
```

更多关于它的信息：

[如何在 Asp.net MVC3 中将 Html.RadioButtonFor 设置为默认选中](http://dotnetech.wordpress.com/2011/03/20/how-to-set-one-html-radiobuttonfor-as-selected-by-default-in-asp-net-mvc3/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-08-30T07:45:08.970

或试试这个。

```
if(gender = 'f')
 {
    @Html.RadioButtonFor(x => x.Gender, "radioValue", new { @checked = "true"})
 }
else 
 {
    @Html.RadioButtonFor(x => x.Gender, "radioValue", new {@checked = "true"})      
 } 
```

希望能帮到你。。谢谢。

# vb.net - VB.NET 设置

> ID：10343191
> 
> 赞同：-1
> 
> 时间：2012-04-27T00:25:37.467
> 
> 标签：vb.net, settings

我想将设置保存在我的程序中，如下所示。我有一个导入按钮来打开文件。我怎样才能做到这一点，当我下次启动我的程序时，它们已经被“导入”为设置或其他东西？*注意 - 我没有尝试过任何东西，因为我不知道如何做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T01:18:45.867

当您进行导入时，代码将执行类似将所有文件名写入文本文件的操作。然后每次执行程序时读取文本文件并检查任何内容。您可能需要修改代码以适合您的程序

```
Private Const MySetting As String = "MySetting.txt"
Private Sub Log_into_File(ByVal Filenames() As String)

    Dim oFile As System.IO.File
    Dim oWrite As System.IO.StreamWriter
    oWriter = oFile.OpenText(MySetting)

    For Each FName As String IN Filenames
        oWrite.WriteLine(FName & VbCrLF)
    Next    

    oWriter.Close() 

End Sub

Private Function Is_Imported() As Boolean

    Dim EntireFile As String
    Dim oFile As System.IO.File
    Dim oReader As System.IO.StreamReader
    oReader = oFile.OpenText(MySetting)

    EntireFile = oRead.ReadToEnd()

    oRead.Close()

    Return Trim(Replace(EntireFile, VbCrLF, "")).Equals(String.Empty)

End Function 
```

# iphone - Objective-C 属性规则

> ID：10343192
> 
> 赞同：2
> 
> 时间：2012-04-27T00:25:40.277
> 
> 标签：iphone, objective-c, ios, properties

我对 Objective-C 中属性的使用感到困惑。如果我像这样创建一个新的`IBOutlet`：

```
IBOutlet UISlider *uploadSlider; 
```

然后为滑块定义一个属性，以便我可以使用它的 getter 和 setter：

```
@property (nonatomic, strong) IBOutlet UISlider *uploadSlider; 
```

然后`@synthesize`在实现文件中，实际使用该属性的正确方法是什么？例如，如果我想改变滑块的轨迹图像，我是否调用

```
 [uploadSlider setMaximumTrackImage:[UIImage imageNamed:@"An image"] forState:UIControlStateSelected]; 
```

或者：

```
[self.uploadSlider setMaximumTrackImage:[UIImage imageNamed:@"An image"] forState:UIControlStateSelected]; 
```

我前缀的方法`self`只有在定义属性之后才可用，这让我认为它是正确的选择。但我不明白为什么。我什至需要属性来访问这些方法吗？

另外，如果我使用点语法来获取或设置与对象有关的信息，即使我没有直接访问其实例方法之一，我是否必须为该对象定义属性？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T00:27:59.617

正确的方法是与自己。

如果您像这样正确设置合成，您不应该以第一种方式执行此操作：

```
@synthesize something = _something; 
```

这是因为在第一种方法中，您直接访问您的 ivar，这是您在使用属性时应尽量避免的事情。

忘了提。

点符号只是 setter 和 getter 方法的快捷方式，可以加快输入内容的速度。但是我真的不建议您习惯它，因为它破坏了消息的一致性，例如目标 C 的体系结构。

[http://weblog.bignerdranch.com/?p=83](http://weblog.bignerdranch.com/?p=83)

顺便说一句，2 个注释：

您不需要自己设置 ivar，只要将其设置为 @property 再设置为 @synthesize xcode 就会为您添加 ivar。

如果您使用的是界面生成器，只需使用助手编辑器并控制将元素拖动到相应头文件中的属性区域即可。这可以节省大量时间。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-27T00:34:58.193

当前的最佳做法是，如果您希望它是公开的，则将其放入您的 .h 文件中；如果您希望它是私有的（这可能是您想要的），则将其放入您的 .m 文件的接口部分。此外，IBoutlet 通常使用弱指针，应在 viewDidUnload 方法中设置为 nil。

因此，在您的 .h 文件中，如果公开

```
 @property (nonatomic, strong) IBOutlet UISlider *uploadSlider;
 //IBOutlet's are usually weak 
```

或在您的 .m 文件中（如果是私有的）

```
 @interface
 @property (nonatomic, strong) IBOutlet UISlider *uploadSlider;
 //IBOutlet's are usually weak
 @end 
```

然后，在您的 .m 文件中，您将 @synthesize 像这样

```
 @synthesize uploadSlider = _uploadSlider; 
```

这将生成 getter 和 setter 以及一个名为 _uploadSlider 的实例变量，以便您知道如何访问它。

那么，正确的调用方式是：

```
[self.uploadSlider] 
```

这真的和

```
[self getUploadSlider] 
```

此外，为了您的信息，当您查看 Apple 文档时，应该使用 . 应该使用该消息调用语法和其他任何内容。

# android - Android setPixel 似乎没有做任何事情。我错过了一步吗？

> ID：10343194
> 
> 赞同：0
> 
> 时间：2012-04-27T00:25:50.417
> 
> 标签：android, graphics

我正在尝试将位图上的单个像素设置为某种颜色。让我难过的是我可以画线就好了....

在下面的代码中，我画了一条从 0,0 到 200,200 的线。正如预期的那样，出现了一条线。

但是，当我尝试在行尾设置单个像素的颜色时，似乎什么也没有发生。没有（我能看到的）被渲染。我需要做一些特别的事情来设置单个像素的颜色吗？

```
 canvas.drawBitmap(_bm, 0, 0, null);
        canvas.drawLine(0, 0, 200, 200, paint);
        _bm.setPixel(200,200, Color.MAGENTA); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T01:13:02.823

看起来您在绘制位图后正在更改像素，请尝试：

```
 _bm.setPixel(200,200, Color.MAGENTA);
 canvas.drawBitmap(_bm, 0, 0, null);
 canvas.drawLine(0, 0, 200, 200, paint); 
```

此外，位图必须是可变的...您可以使用 _bm.isMutable() 进行检查...

# javascript - jQuery滑块在视频播放时暂停并在视频结束时恢复

> ID：10343195
> 
> 赞同：1
> 
> 时间：2012-04-27T00:25:54.413
> 
> 标签：javascript, jquery, slider

我在幻灯片 8 上找到了这个滑块演示[http://showcase.awkwardgroup.com/](http://showcase.awkwardgroup.com/)有我想要的视频，当它开始播放视频时，没关系，我可以使用自动启动嵌入视频。但问题是，如果您将鼠标悬停在滑块上，即使视频开始播放，它也会继续滚动。

您如何修改它以在视频仍在播放时使滑块暂停？在更糟糕的情况下，我可以为该特定幻灯片花费自定义时间。

ps 他们确实在配置行中提供了自定义功能，但我不知道如何使它工作。

```
$(document).ready(function()
{
    $("#showcase").awShowcase(
    {
        auto:               true,
        interval:           3000,
        custom_function:    null /* Define a custom function that runs on content change */
    });
}); 
```

在 javascrip 中也有一行

```
 if (options.auto && options.pauseonover)
    {
        showcase.mouseenter(function() { break_loop = true; clearInterval(myInterval); });
        showcase.mouseleave(function()
        {
            if (!pause_loop)
            {
                break_loop = false; myInterval = window.setInterval(autoChange, options.interval);
            }
        });
    } 
```

编辑：好的，我发现每张幻灯片没有单独的超时时间，或者为视频制作图像，然后单击开始视频和暂停滑块或延长当前幻灯片的超时时间。

```
the problem is when i type `onclick="function() { break_loop = true; clearInterval(myInterval); })"` it saying myInterval not found how do i access properties of slider? 
```

# javascript - 如何将二次曲线切成两半？

> ID：10343197
> 
> 赞同：0
> 
> 时间：2012-04-27T00:25:58.747
> 
> 标签：javascript, canvas, quadratic-curve

我正在尝试绘制现有二次曲线的一半，但我不确定如何调整控制点来这样做：

[http://jsfiddle.net/s6sB8/3/](http://jsfiddle.net/s6sB8/3/)

您将看到画布中绘制的圆角矩形的上半部分，以及带有顶部 CSS 边框的框。我想要做的是用画布重现 css 绘制的框，换句话说，将角落切成两半。

我一直在弄乱起点和第一个控制点，但无法弄清楚如何准确拼接曲线。

我知道画布不会完全匹配 CSS，这很好，我不想让它达到。我试图在完全不扭曲其形状的情况下准确地绘制出一半的曲线。我对这背后的数学比这个具体例子的解决方案更感兴趣

更新示例：http: [//jsfiddle.net/s6sB8/4/](http://jsfiddle.net/s6sB8/4/)

您可以看到，虽然很接近，但我尝试绘制的曲线与原始曲线不太匹配...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T12:21:40.067

作为我的项目[http://canvimation.github.com/](http://canvimation.github.com/)的一部分，我需要能够绘制圆角矩形。

我使用贝塞尔曲线来近似四分之一圆而不是二次曲线来绘制角。我根据我的代码[http://jsfiddle.net/kCd7b/](http://jsfiddle.net/kCd7b/)创建了一个小提琴来绘制圆角矩形。在函数 rounded_rectangle 中，left、top、width 和 height 是边界矩形的参数，radius 是角弧的半径。我认为该函数可以更改为使用弧线或二次曲线

注意：1 我对这种方法的参考来自这个问题的答案中的第二个链接。 [如何用贝塞尔曲线最好地逼近几何弧？](https://stackoverflow.com/questions/734076/geometrical-arc-to-bezier-curve)

注意 2：我的方法首先绘制水平顶线并绘制完整曲线。如果你想从曲线中间开始画曲线的一半，那么你需要阅读[http://www.iancgbell.clara.net/maths/bezier.htm](http://www.iancgbell.clara.net/maths/bezier.htm)

注意 3：我使用 Bezier 曲线而不是圆弧，因为它使绘图和转换函数更容易编写，因为它们只需要考虑 lineTo 和 bezierCurveTo 我正在绘制的任何形状。

注 3：我的项目的源代码位于[https://github.com/canvimation/canvimation.github.com](https://github.com/canvimation/canvimation.github.com)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T01:31:31.120

我不是很擅长这个，所以，只是一个建议。

Mozilla 的一个很好的例子： [https ://developer.mozilla.org/samples/canvas-tutorial/2_5_canvas_quadraticcurveto.html](https://developer.mozilla.org/samples/canvas-tutorial/2_5_canvas_quadraticcurveto.html)

来自 wiki 的二次函数： [http ://en.wikipedia.org/wiki/Quadratic_curve](http://en.wikipedia.org/wiki/Quadratic_curve)

看了上面的链接，我们知道这`current position`是起点，`control point`是永远无法到达但越来越近的点，我们需要一个终点。当我们拥有它们时，我们得到了一条曲线。

在您的问题中，我们像这样“调整`control point`”：

```
 ctx.moveTo          ( 15, 11 );
      ctx.quadraticCurveTo( 16, 10, 20, 10 );
      ctx.lineTo          ( 95, 10 );

      ctx.moveTo          ( 100, 11);
      ctx.quadraticCurveTo( 99, 10, 95, 10 );

      ctx.lineWidth = 10;
      ctx.stroke(); 
```

看起来不错。

# string - 如何在 JSP 中找到整数的长度？

> ID：10343203
> 
> 赞同：2
> 
> 时间：2012-04-27T00:26:36.343
> 
> 标签：string, jsp, jstl, int

我可以`fn:length(mystring)`用来查找字符串的长度/字符数。

如何找到整数的长度/位数？

例如，如果我的 int 是 3000，我想返回 4。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T00:32:39.123

通过将其`String`评估为的主体将其转换为[`<c:set>`](http://docs.oracle.com/javaee/5/jstl/1.1/docs/tlddocs/c/set.html)：

```
<c:set var="intAsString">${someInt}</c:set> 
```

然后你可以用通常的方式得到它的长度：

```
${fn:length(intAsString)} 
```

# silverlight - 寻找在 Silverlight 中使用异步调用 Web 服务的示例？

> ID：10343206
> 
> 赞同：0
> 
> 时间：2012-04-27T00:27:20.417
> 
> 标签：silverlight, visual-studio-2012, c#-5.0

我正在寻找一个使用新的 async 关键字在 Silverlight 中调用 Web 服务的示例。

这是我要转换的代码：

```
var client = new DashboardServicesClient("BasicHttpBinding_IDashboardServices", App.DashboardServicesAddress);
client.SelectActiveDealsCompleted += (s, e) => m_Parent.BeginInvoke(() => RefreshDealsGridComplete(e.Result, e.Error));
client.SelectActiveDealsAsync(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T21:08:41.733

你总是可以自己做：

```
static class DashboardServicesClientExtensions
{
    //typeof(TypeIDontKnow) == e.Result.GetType()
    public static Task<TypeIDontKnow>> SelectActiveDealsTaskAsync()
    {
        var tcs = new TaskCompletionSource<TypeIDontKnow>();

        client.SelectActiveDealsCompleted += (s, e) => m_Parent.BeginInvoke(() =>
        {
            if (e.Erorr != null)
                tcs.TrySetException(e.Error);
            else
                tcs.TrySetResult(e.Result);
        };
        client.SelectActiveDealsAsync();

        return tcs.Task;
    }
};

// calling code
// you might change the return type to Tuple if you want :/
try
{
    // equivalent of e.Result
    RefreshDealsGridComplete(await client.SelectActiveDealsTaskAsync(), null);
}
catch (Exception e)
{
    RefreshDealsGridComplete(null, e);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T11:49:09.493

您必须使用目标版本 .Net 4.5 重新生成服务代码。然后你可以使用`async`关键字。写一些这样的代码：

```
var client = new DashboardServicesClient("BasicHttpBinding_IDashboardServices", App.DashboardServicesAddress);
// Wait here until you get the result ...
var result = await client.SelectActiveDealsAsync();
// ... then refresh the ui synchronously.
RefreshDealsGridComplete(result); 
```

或者您使用方法`ContinueWith`：

```
var client = new DashboardServicesClient("BasicHttpBinding_IDashboardServices", App.DashboardServicesAddress);
// Start the call ...
var resultAwaiter = client.SelectActiveDealsAsync();
// ... and define, what to do after finishing (while the call is running) ...
resultAwaiter.ContinueWith( async task => RefreshDealsGridComplete(await resultAwaiter));
// ... and forget it 
```

# x86 - 在 Linux 中从 IA32 访问操作数和操作

> ID：10343209
> 
> 赞同：0
> 
> 时间：2012-04-27T00:27:43.283
> 
> 标签：x86, addressing-mode

我对我必须为大学做的这项家庭作业感到有些困惑，我了解寄存器是什么，为什么要在内存或寄存器中放置一些字节，但对我推动这一点会有很大帮助第一个练习：

（Gnu 组装）：

```
| address  || Value |
|  0x100   || 0xFF  |
|  0x104   || 0xAB  |
|  0x108   || 0x13  |
|  0x10C   || 0x11  |

| Register|| Value |
|  %eax   || 0x100 |
|  %ecx   ||  0x1  |
|  %edx   ||  0x3  | 
```

用指示的操作数的相应值填写下表：

```
|  Operand     || Value |
|   %eax       ||
|   0x104      ||
|  $0x108      ||
|  (%eax)      ||
|  4(%eax)     ||
| 9(%eax,%edx) ||
|260(%ecx,%edx)||
|0xFC(,%ecx,4) ||
|(%eax,%edx,4) || 
```

通过查看，我可以看出第一个操作数的十六进制值为**0x100**并且是一个寄存器，第二个我无法分辨，因为之前没有，第三个操作数有一个美元标志，我读到它是一个立即数操作数，无法判断它得到什么值。

4(%eax) 它可能是一个内存地址，其中 4 是位移，从这一点上我不知道......

我希望我尽可能清楚地了解我的疑问，并非常感谢您提供的任何帮助。

亲切的问候，苏萨。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T03:38:57.820

似乎您需要查找 AT&T 语法。[下面](http://staff.ustc.edu.cn/~xlanchen/cailiao/x86%20Assembly%20Programming.htm)是关于如何解释 AT&T 语法内存操作数的简短描述（在**“AT&T 样式语法”**下）。

# .net - 迁移到可移植类库是一项重大改变吗？

> ID：10343214
> 
> 赞同：2
> 
> 时间：2012-04-27T00:28:13.537
> 
> 标签：.net, versioning, portable-class-library, semantic-versioning

目前我正在构建单独的二进制文件以针对每个运行时

*   .net 4
*   视窗电话
*   银光

现在，如果我将库移动为单个[Portable Class Library](http://msdn.microsoft.com/en-us/library/gg597391.aspx)，并且我没有更改功能，这是否被视为重大更改？

或者在[SemVer](http://semver.org/)术语中，它是主要、次要还是补丁版本更改？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T23:36:55.040

虽然理论上这应该是现实中的一个微小变化，但它有点复杂。

口语形式的经验 我在将程序集升级到便携式类库时遇到了几个问题。这些包括：

*   带有 .net 4 的 IIS 不会加载 PCL 程序集，因为它找不到“System.Core”。
*   Mono 2.10 存在可移植类库的问题。传闻将在 Mono 2.12 [http://www.mono-project.com/Release_Notes_Mono_2.12中修复](http://www.mono-project.com/Release_Notes_Mono_2.12)

这些很可能是未来将要解决的初期问题。但请注意您可能会导致图书馆消费者的上游问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T07:35:44.473

我会说这是一个较小的版本更改，因为链接到您的库的代码现在受到[PCL 的一些特定想法的影响](http://msdn.microsoft.com/en-us/library/gg597391.aspx)：

> 部署引用可移植类库程序集的 .NET Framework 4 应用程序时，必须指定对 .NET Framework 4 更新的依赖项。通过指定此依赖关系，您可以确保更新随您的应用程序一起安装。

此外，如果您公开了[某些框架类型](http://msdn.microsoft.com/en-us/library/gg597392.aspx)，则代码的使用者可能需要更改。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-12T22:23:18.290

是和不是。正如sixlettervariables 所说，如果之前的目标是4.0，是的，迁移到可移植是一个重大变化，因为您现在依赖于以前没有的.NET Framework 更新。对于其他平台（或者如果针对 .NET 4.0.3 或更高版本），不，这不是一个重大变化。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-27T07:34:26.727

我想说，如果您可以简单地将新程序集放入其中，并且一切都可以像以前一样继续工作而无需任何代码修改，那么这不是一个重大更改。

从图书馆消费者的角度来看，切换到 PCL 是一个相当中立的操作。对他们来说，它仍然只是一个类库。

在 semver 术语中，我认为它可以算作次要版本。

# ruby-on-rails - 允许 cancan Ability.rb 管理仅访问模型的特定字段

> ID：10343220
> 
> 赞同：0
> 
> 时间：2012-04-27T00:29:26.813
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, cancan

我正在尝试添加一个按钮以在 Rails 中将回复标记为已读。我目前有这样的东西。

```
# /app/models/ability.rb
...
can :manage, Reply, :user_id => user.id
... 
```

`load_and_authorize_resource`我的 RepliesController中也有

```
# /app/controllers/replies_controller.rb
class RepliesController < ApplicationController
  load_and_authorize_resource

  def update 
    @reply = Reply.find(params[:id])
    @reply.isRead = true
    if @reply.save
      flash[:notice] = "Marked as ready."
      flash[:alert] = params[:id]
      redirect_to root_path
    else
      render :action => 'new'
    end
  end 
```

我有一个按钮，用户可以在其中将回复标记为已读。

```
 = button_to "Mark as read", idea_reply_path(reply.idea,reply), :method => "put" 
```

问题是，由于我试图从ability.rb（顶部）中定义的其他 user.id 所有者更新对象，因此我没有编辑它的权限。

如果我添加这样的东西它会起作用，但我也将管理整个回复对象的权利授予其他人。

```
can :manage, Reply, :to_user_id => user.id 
```

我需要一种方法，只允许用户管理`isRead?`他的 user.id 匹配的对象的属性`to_user_id`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T00:49:08.087

您可以在控制器中定义一个新操作，例如 mark_as_read

```
 def mark_as_read
  #action to mark as read  
 end 
```

并且在能力定义中

```
can :manage, :Reply, :user_id => user.id
can :mark_as_read, :to_user_id => user.id 
```

顺序非常重要。现在登录的用户可以管理回复，并且作为用户的用户将只能标记_as_read。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T00:45:38.807

我想你可以两者兼得

```
can :manage, Reply, :user_id => user.id
can :update, Reply, :to_user_id => user.id 
```

如果更新操作仅用于将回复标记为已读，那么这就是您想要的

# actionscript-3 - 在 iPad 上连接 Facebook (adobe air)

> ID：10343224
> 
> 赞同：0
> 
> 时间：2012-04-27T00:29:43.800
> 
> 标签：actionscript-3, air

有没有人有使用 Adob​​e Air 在 iPad 上实施 Facebook 连接的经验。我对 API (http://code.google.com/p/facebook-actionscript-api/) 有疑问，并不断向我抛出错误。我已经为 web 的 flash 版本使用了相同的代码，它工作正常。

错误：

```
C:\Documents and Settings\SESA151424\My Documents\Work\projects\Clipsal iSelector\Air\src\com\facebook\graph\core\AbstractFacebook.as, Line 313 1061: Call to a possibly undefined method toString through a reference with static type com.facebook.graph.data:FQLMultiQuery. 
```

代码

```
import com.facebook.graph.Facebook;
private function init():void{
            Facebook.init(APP_ID, onInit);
            TweenPlugin.activate([TintPlugin, ColorTransformPlugin]);
            this.setUpProjectSection();

        }

        private function socialSignin(e:Event){
            var opts:Object = {scope:"publish_stream, user_photos"};
            //Facebook.login(onLogin, opts);
        }

        private function onLogin(result:Object, fail:Object):void{
            if (result) {
                //closeModalDialoge(new MouseEvent(MouseEvent.CLICK));
                _mainContainer.parent.facebookStatus.text = JSON.encode(result);
                _userInfo = ['result.uid', 'result.accessToken'];

                Facebook.api('/me', onCallApi, null, 'GET');
            }else{
                //_mainContainer.parent.facebookStatus.text = "Not Logged In\n";
            }
        }

        private function onCallApi(result:Object, fail:Object):void{
            //_mainContainer.parent.facebookStatus.text += '/n\n';
            var options:Object = {
                                username    :   _userInfo[0],
                                password    :   _userInfo[1],
                                firstname   :   result.first_name,
                                lastname    :   result.last_name,
                                name        :   result.name,
                                location    :   result.location,
                                gender      :   result.gender,
                                hometown    :   result.hometown
                                }

            _user.socialSignin(options);
            //_mainContainer.parent.facebookStatus.text += JSON.encode(result);
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T03:10:19.283

解决方案找到包{

```
import flash.display.MovieClip;
import flash.events.Event;
import flash.events.MouseEvent;
import flash.display.Stage;
import flash.display.StageAlign;
import flash.display.StageScaleMode;
import flash.media.StageWebView;

import com.facebook.graph.FacebookMobile;
import com.facebook.graph.controls.Distractor;

import demo.controls.GraphicButton;
import demo.events.FacebookDemoEvent;
import demo.models.FriendModel;
import demo.views.FriendDetail;
import demo.views.FriendsList;
import demo.views.UserInfo;

public class FriendListMobile extends MovieClip {

    //Place your application id here.
    protected static const APP_ID:String = 'xxxxxxxx';
    //Place your specified site URL for your app here. This is needed for clearing cookies when logging out.
    protected static const SITE_URL:String = 'xxxxxxxx';
    //Extended permission to access other parts of the user's profile that may be private, or if your application needs to publish content to Facebook on a user's behalf.
    protected var extendedPermissions:Array = ["publish_stream","user_website","user_status","user_about_me"];

    public var userInfo:UserInfo;
    public var loginBtn:GraphicButton;
    public var friendDetail:FriendDetail;
    public var friendList:FriendsList;

    public var distractor:Distractor;
    public var bg:DistractorOverlay;
    public var friendsModel:FriendModel;

    protected var selectedUserInfo:Object = {};

    public function FriendListMobile() {
        // constructor code
        addEventListener(Event.ADDED_TO_STAGE, handleAddedToStage);
    }

    protected function handleAddedToStage(event:Event):void {
        removeEventListener(Event.ADDED_TO_STAGE, handleAddedToStage);
        stage.align = StageAlign.TOP_LEFT;
        stage.scaleMode = StageScaleMode.NO_SCALE;
        init();
    }

    protected function init():void {
        configUI();
        addEventListeners();

        FacebookMobile.init(APP_ID, onHandleInit, null);
    }

    protected function configUI():void {
        loginBtn.label = 'Login';
        loginBtn.setSize(440, 60);
        loginBtn.setStyle('font', '_sans');
        loginBtn.setStyle('size', 25);

        friendsModel = new FriendModel();

        distractor = new Distractor();
        friendDetail.visible = false;

        bg = new DistractorOverlay();
        bg.visible = true;
        addChild(bg);

        distractor.x = 120
        distractor.y = 310; 

        bg.addChild(distractor);
    }

    protected function addEventListeners():void {
        loginBtn.addEventListener(MouseEvent.MOUSE_DOWN, handleLoginClick, false, 0, true);
        friendDetail.addEventListener(Event.CLOSE, onCloseDialog, false, 0, true);
        friendsModel.addEventListener(Event.COMPLETE, onFriendsComplete, false, 0, true);
        friendList.addEventListener(FacebookDemoEvent.FRIEND_SELECTED, onFriendSelected, false, 0, true);
    }

    /**
     * Pops up detail view for a selected friend.
     **/
    protected function showFriendDetail():void {
        bg.visible = true;

        friendDetail.visible = true;
        friendDetail.data = selectedUserInfo;

        this.setChildIndex(friendDetail, this.numChildren - 1);
    }

    /**
     * Event Handler Close DetailView
     **/
    protected function onCloseDialog(event:Event):void {
        friendDetail.visible = false;
        bg.visible = false;
    }

    /**
     * Event Handler user selects from the friend list.
     **/
    protected function onFriendSelected(event:FacebookDemoEvent):void {
        selectedUserInfo = event.data;
        showFriendDetail();
    }

    /**
     * Event Handler User clicks Login button.
     **/
    protected function handleLoginClick(event:MouseEvent):void {
        bg.visible = true;

        loginUser();
    }

    /**
     * Event Handler User clicks on Logout button.
     **/
    protected function handleLogOutClick(event:MouseEvent):void {
        FacebookMobile.logout(handleLogout, SITE_URL);

        loginBtn.label = 'Login';
        loginBtn.addEventListener(MouseEvent.MOUSE_DOWN, handleLoginClick, false, 0, true);

        friendList.clear();
        userInfo.clear();

        bg.visible = true;
    }

    /**
     * Event Handler once logged out.
     **/
    protected function handleLogout(response:Object):void {
        bg.visible = false;
    }

    /**
     * Event Handler FacebookMobile initializes application.
     * Application will check if user is return to application, 
     * if not user is prompted to log in.
     **/
    protected function onHandleInit(response:Object, fail:Object):void {
        if (response) {
            updateView(response.uid, response);
        } else {
            loginUser();
        }
    }

    /**
     * Updates UI for views 
     **/
    protected function updateView(id:String, data):void {
        userInfo.id = id;
        userInfo.data = data;

        loginBtn.label = 'Log Out';
        loginBtn.addEventListener(MouseEvent.MOUSE_DOWN, handleLogOutClick);
        loginBtn.removeEventListener(MouseEvent.MOUSE_DOWN, handleLoginClick);

        friendsModel.load();
    }

    /**
     * Preforms a login call to application. Mobile application takes in an instance 
     * StageView class.
     **/
    protected function loginUser():void {
        trace('not log in');
        FacebookMobile.login(handleLogin, stage, extendedPermissions, new StageWebView());
    }

    /**
     * Event Handler once user logs in.
     **/
    protected function handleLogin(response:Object, fail:Object):void {
        bg.visible = false;
        FacebookMobile.api('/me', handleUserInfo);
    }

    /**
     * Event Handler for users information.
     **/
    protected function handleUserInfo(response:Object, fail:Object):void {
        if (response) {
            updateView(response.id, response);
        }
    }

    /**
     * Event Handler FriendModel information has been loaded.
     **/
    protected function onFriendsComplete(event:Event):void {
        bg.visible = false;
        friendList.dataProvider = friendsModel.dataProvider;
    }
} 
```

}

# java - 为什么这段代码不能识别这两个变量是相同的？

> ID：10343227
> 
> 赞同：0
> 
> 时间：2012-04-27T00:30:13.797
> 
> 标签：java, compare

嘿，我正在尝试从用户那里获取字符串输入（在这种情况下是电影的名称，例如 Good Burger）。我有一个 Film 类的数组列表，我正在从中迭代。在每次迭代中，调用 Film 类实例中的一个方法，该方法返回一个电影名称字符串。当我比较这两者时，它似乎没有认识到它们是平等的，我不知道为什么。

这是接受输入并比较两者的代码：

//获取用户输入的电影。

```
 int numberOfFilmsCheck;
    numberOfFilmsCheck = 0;
    BufferedReader reader = new BufferedReader(new InputStreamReader(System.in));
    Film tempFilm;
    System.out.println("Please enter the names of the films you wish to be in the new schedule");
    System.out.println("Press enter after each one.");

    while(numberOfFilmsCheck < numberOfFilms){
        boolean foundFilm;
        foundFilm = false;
        String inputFilmName = null;
        tempFilm = null;
        String filmName;
        filmName = null;
        try{
            inputFilmName = reader.readLine();
            System.out.println(inputFilmName);
        }
        catch (IOException e){
            System.out.println("Error");
        }

        for(Film film : films){
            film.printFilmName();
            if(inputFilmName.equals(filmName)){
                foundFilm = true;
                tempFilm = film;
                System.out.println("Found film name");
                break;
            }
        }

        if(foundFilm == true){
            newFilmsForSchedule.add(tempFilm);
            numberOfFilmsCheck++;
        }
        else{
            System.out.println("The film you entered has not been recognised.");
            System.out.println("Please enter the film name as shown above.");
        } 
```

这是返回电影名称的 Film 类中的代码：

```
public String getFilmName()
{
    return filmName;
} 
```

如果您注意到那里有任何恶意打印语句，那只是我在检查代码是否正常工作。

任何帮助深表感谢！谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T00:48:42.580

该`getFilmName()`函数看起来非常有用，但前提是您最终调用它:-)

您似乎`filmName`在开始时设置为 null ，然后您实际上从未*更改*它（例如，通过调用`getFilmName()`）。因此，出于比较的目的，它将为空。

我怀疑你可能需要类似的东西：

```
for(Film film : films){
    film.printFilmName();
    filmName = film.getFilmName();               // <-- Added this.
    if(inputFilmName.equals(filmName)){          // <-- So that this works.
        foundFilm = true;
        tempFilm = film;
        System.out.println("Found film name");
        break;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T00:52:05.740

试着把这段代码：

```
System.out.println("'" + inputFilmName + "' vs '" + filmName + "'") 
```

在该`if(inputFilmName.equals(filmName)){`行之前，您将看到为什么它不相等。哦，注意单引号..

# android - 从 Button 的 onClickListener 访问 Checked RadioButton

> ID：10343230
> 
> 赞同：1
> 
> 时间：2012-04-27T00:30:40.590
> 
> 标签：android, onclick, android-ui

> **可能重复：**
> [getCheckedRadioButtonId() 返回无用的 int？](https://stackoverflow.com/questions/10356733/getcheckedradiobuttonid-returning-useless-int)

当我尝试获取在用户点击提交按钮时检查了哪个单选按钮时，日志总是为结果打印-1（不是这种情况）。这很有意义，因为每次 buildQuestions() 运行时我都会重置 radioGroup。所以，我需要一种更好的方法。我试过 v.getParent()，但这似乎并没有让我更接近。我的最终目标？传递给 submitTask，选择的 radioButton 和它旁边的任何文本。我能做些什么不同的事情？

这是构建整个 UI 元素的代码：

```
public class ElectionsFragment extends SherlockFragment {
TableLayout questionContainer;
View mainLayout;
int leftMargin=0;
int topMargin=4;
int rightMargin=0;
int bottomMargin=0;
RadioGroup radioGroup;
Polling activity;

public void buildQuestions(JSONObject question) throws JSONException {
    LayoutInflater inflater = (LayoutInflater) getActivity().
    getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    //progressBar.setVisibility(View.GONE);
    questionContainer = (TableLayout) mainLayout.findViewById(R.id.questionContainer);
    //questionContainer.removeAllViews();
    View questionBox = inflater.inflate(R.layout.question, null);
    questionBox.setId(Integer.parseInt(question.getString("id")));
    TextView title = (TextView) questionBox.findViewById(R.id.questionTextView);
    title.setText(question.getString("title"));

    radioGroup = (RadioGroup) questionBox.findViewById(R.id.responseRadioGroup);
    String typeFromTable = question.getString("default");
    Log.v("default", typeFromTable);
    int responseType = Integer.parseInt(typeFromTable);
    if (responseType == 1) {
        Log.v("1", question.toString());
        //populate default radio buttons
        Resources res = getResources();
        String[] defaultAnswers = res.getStringArray(R.array.defaultAnswers);
        int j = 0;
        while (j < 5) {
            RadioButton rb = new RadioButton(getActivity());
            rb.setText(defaultAnswers[j]);
            radioGroup.addView(rb);
            j++;
        }

    }
    else if (responseType == 0) {
        for (int j = 0; j < 5; j++) {
            if (question.getString("answer" + Integer.toString(j)) != "null") {
                RadioButton rb;
                rb = new RadioButton(getActivity());
                rb.setText(question.getString("answer" + Integer.toString(j)));
                if (question.getString("answer" + Integer.toString(j)).length() != 0) {                 
                    radioGroup.addView(rb);
                }
            }
            else {
                if (question.getString("answer" + Integer.toString(j)) == "null") {
                    RadioButton rb;
                    rb = new RadioButton(getActivity());
                    rb.setText("null");
                    radioGroup.addView(rb);
                }
            }
        }
    }

    Button chartsButton = (Button) questionBox.findViewById(R.id.chartsButton);
    chartsButton.setTag(question);
    Button submitButton = (Button) questionBox.findViewById(R.id.submitButton);

    chartsButton.setOnClickListener(chartsListener);
    submitButton.setOnClickListener(submitListener);

    TableRow tr = (TableRow) questionBox;
    TableLayout.LayoutParams trParams = new TableLayout.LayoutParams(
    TableLayout.LayoutParams.MATCH_PARENT,
    TableLayout.LayoutParams.MATCH_PARENT);
    trParams.setMargins(leftMargin, topMargin, rightMargin, bottomMargin);
    tr.setLayoutParams(trParams);   
    questionContainer.addView(tr);
    submitButton.setTag(question);
} 
```

这是 submitButton 的 onClickListener

```
public OnClickListener submitListener = new OnClickListener() {
    public void onClick(View v) {
        userFunctions = new UserFunctions();
        if (userFunctions.isUserLoggedIn(activity)) {
            Log.v("submit", Integer.toString(radioGroup.getCheckedRadioButtonId()));

            SubmitTask submitTask = new SubmitTask((Polling) activity, (JSONObject) v.getTag());
            submitTask.execute();

        }
    }   
}; 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-04-27T20:03:01.520

在这里解决：

[https://stackoverflow.com/a/10356828/1231943](https://stackoverflow.com/a/10356828/1231943)

# objective-c - 文档不受源代码控制，并且 nib 显示为 xml 文本

> ID：10343234
> 
> 赞同：5
> 
> 时间：2012-04-27T00:31:19.323
> 
> 标签：objective-c, xml, xcode4, nib

从昨天开始，在导航器中单击 nib 文件时，我得到“文档不受源代码控制”。而不是图形演示，我看到的是 xml。

自 2012 年 3 月 21 日以来，我一直在使用当前版本 4.3.2 (4E2002)。但昨天晚上首先出现了这个错误。重新启动和清理项目没有帮助，重新启动 mac 也没有帮助。切换到另一个项目时，我没有这个问题。我不知道我改变了任何偏好。

有什么线索有什么问题吗？

## 来自瑞士的问候，罗纳德霍夫曼

**解决方案**

我发现出了什么问题：“显示版本编辑器”已打开。关闭它时，错误消失了。 ![在此处输入图像描述](../Images/3e1a5bdc3cf8fc9376539f186bf52cde.png) 罗纳德

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T00:59:38.370

尝试在导航器中按住控件单击 nib 文件，然后转到“Open-As”并选择 Interface Builder - iOS。这应该可以解决您将其显示为 XML 的问题。

就它受源代码控制而言，您的项目作为一个整体是否受源代码控制？如果是这样，你在用什么？

# java - java - for循环迭代错误地填充arraylist

> ID：10343236
> 
> 赞同：0
> 
> 时间：2012-04-27T00:31:56.847
> 
> 标签：java, arraylist

在过去的两天里，我一直在尝试让一些代码工作，首先是地图，然后是 arrayLists。这是一个嵌套的 for 循环，我试图在迭代循环时使用它来填充数据结构。出于某种原因，它正在用最后一次迭代的结果填充我的最终数据结构（一个名为 DataArrays2.getCinemaRowLayout2() 的 arrayLists 的arrayList）。我的意思是所有添加的数组列表都是最终迭代的所有副本。我不知道为什么会这样！

可以在此处看到 2 次迭代的示例，每次迭代都有不同的输入：[[o, o, o, o], [o, o, o, o]]。我很感激它可能不是最好的结构，但我的时间不多了，所以请接受我的道歉。

非常感谢任何帮助！

```
for (int i=0; i<Screens.rows; i++){//for loop of screen rows

   System.out.println("Please enter how many seats and blank spaces in this row");
   Screens.columns = Integer.valueOf(scanInValue.next());

      for(int j=0; j<Screens.columns; j++){//for loop of seats in row
        System.out.println("Please enter 'o' for a seat or press enter for a space");
        in = scanInValue.next();
        DataArrays2.getCinemaRowLayout().add(j, in);//seats in a row arraylist
      }
DataArrays2.getCinemaRowLayout2().add(i, DataArrays2.getCinemaRowLayout());//arraylist of row arraylists
DataArrays2.getCinemaRowLayout().clear();//clears seats arrayList

}
DataArrays2.getScreenMapLayout().put(showingName, DataArrays2.getCinemaRowLayout2());//map of arraylists
BookingSystem2.saveShowing(DataArrays2.getScreenMapLayout()); //saves map to file 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-27T00:36:57.440

Java 传递是通过对象引用进行的，这意味着当您返回一个对象时，您将返回该对象在内存中的位置。因此，对于通过该循环的每次运行，您都在修改相同的 ArrayList（CinemaRowLayout 的属性）。如果您想每次都获得一个单独的实例，则必须从 CinemaRowLayout 的内容创建一个新的 ArrayList 并将该**新**集合添加到地图中。现在，您一遍又一遍地将同一个对象添加到地图中，然后对该对象进行更改。

或者，您可以让 DataArrays2.getCinemaLayout() 每次都返回一个新实例。如果是这种情况，您的 innerLoop 将如下所示：

```
ArrayList<whatever> temp = new ArrayList<whatever>();
for(int j=0; j<Screens.columns; j++){//for loop of seats in row
    System.out.println("Please enter 'o' for a seat or press enter for a space");
    in = scanInValue.next();
    temp.add(j, in);//seats in a row arraylist
}
DataArrays2.getCinemaRowLayout2().add(i, tmp); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-27T00:43:21.420

也许这个问题，[按值/引用传递，什么？](https://stackoverflow.com/questions/10300555/pass-by-value-reference-what)可以帮助您了解正在发生的事情...

# scala - 为什么类型推断在这里不起作用？

> ID：10343244
> 
> 赞同：6
> 
> 时间：2012-04-27T00:34:05.130
> 
> 标签：scala, structural-typing, type-bounds

这个问题出现在我正在编写的模块中，但我制作了一个表现相同行为的最小案例。

```
class Minimal[T](x : T) {
  def doSomething = x
}

object Sugar {
  type S[T] = { def doSomething : T }
  def apply[T, X <: S[T]] (x: X) = x.doSomething
}

object Error {
  val a = new Minimal(4)
  Sugar(a) // error: inferred [Nothing, Minimal[Int]] does not fit the bounds of apply
  Sugar[Int, Minimal[Int]](a) // works as expected
} 
```

问题是编译器设法找出`Minimal`( `Int`) 的内部参数，但随后将另一个出现设置`T`为`Nothing`，这显然不匹配`apply`。这些绝对是相同的`T`，因为删除第一个参数会使第二个参数抱怨 T 未定义。

是否有一些歧义意味着编译器无法推断第一个参数，或者这是一个错误？我可以优雅地解决这个问题吗？

更多信息：此代码是尝试语法糖的简单示例。原始代码试图使`|(a)|`的模均值`a`，其中 a 是一个向量。显然`|(a)|`比写作好`|[Float,Vector3[Float]](a)|`，但不幸的是我不能用它`unary_|`来让这更容易。

实际错误：

> 推断的类型参数 [Nothing,Minimal[Int]] 不符合方法应用的类型参数边界 [T,X <: Sugar.S[T]]

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-27T08:28:35.023

这不是 Scala 编译器错误，但它肯定是 Scala 类型推断的限制。编译器想在求解 , 之前确定 , 的边界`X`，但边界提到了迄今为​​止不受约束的类型变量，因此它固定在该变量上并从那里继续。一旦完全解决，它就不会重新访问......在这种情况下，当前类型推断总是从左到右进行。`S[T]``X``T``Nothing``T``X`

如果您的示例准确地代表了您的真实情况，那么有一个简单的解决方法，

```
def apply[T](x : S[T]) = x.doSomething 
```

这里`T`将被推断`Minimal`为直接符合`S[T]`而不是通过中间有界类型变量。

**更新**

Joshua's solution also avoids the problem of inferring type `T`, but in a completely different way.

```
def apply[T, X <% S[T]](x : X) = x.doSomething 
```

desugars to,

```
def apply[T, X](x : X)(implicit conv : X => S[T]) = x.doSomething 
```

The type variables `T` and `X` can now be solved for independently (because `T` is no longer mentioned in `X`'s bound). This means that `X` is inferred as `Minimal` immediately, and `T` is solved for as a part of the implicit search for a value of type `X => S[T]` to satisfy the implicit argument `conv`. `conforms` in `scala.Predef` manufactures values of this form, and in context will guarantee that given an argument of type `Minimal`, `T` will be inferred as Int. You could view this as an instance of [functional dependencies](http://www.chuusai.com/2011/07/16/fundeps-in-scala/) at work in Scala.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-27T00:46:11.593

结构类型的界限有些奇怪，请尝试使用 S[T] 上的视图界限。

`def apply[T, X <% S[T]] (x: X) = x.doSomething`工作正常。

# php - 在 PHP 函数中引用类变量作为默认参数

> ID：10343246
> 
> 赞同：4
> 
> 时间：2012-04-27T00:34:42.267
> 
> 标签：php, function, optional-parameters

我想在我的类中有一个具有默认参数的函数，以便可以在需要时省略该参数。我希望默认值是存储在我的类中的变量；

嗨，为什么这会在 Aptana 中显示错误消息？

```
class property{
    private $id;
    function load_data($id = $this->id){
        //...blah blah blah
    }
} 
```

我应该改用

```
class property{
    static $id;
    function load_data($id = self::id){
        //...blah blah blah
    }
} 
```

?

谢谢您的帮助

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-27T00:38:39.823

我很确定你不能做你正在寻找的东西。相反，您应该简单地检查参数是否有值，如果没有，则分配默认值，即对象属性。

```
class property{
    private $id;
    function load_data($id = null){
        $id = (is_null($id)) ? $this->id : $id;
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-27T00:38:42.627

你可以这样做：

```
class property
{
    private $id;

    function load_data($id = null){

        if (is_null($id)) {
            $id = $this->id;
        }

        //...blah blah blah
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-04-06T09:39:42.433

我知道这是一个老问题，但我在寻找相同类型的东西时想出了这个问题，答案是肯定的，只要你将它定义为常数，你就可以做到：

```
class property{
    const $id;
    function load_data($id = self::id){
        //...blah blah blah
    }
} 
```

# c - CPU的舍入模式什么时候可以改变？

> ID：10343250
> 
> 赞同：4
> 
> 时间：2012-04-27T00:35:25.013
> 
> 标签：c, x86, floating-point, context-switch

在相当多的文章中，他们建议使用`fistp`指令快速转换 float->integer。这取决于 CPU 的当前舍入模式，因此您必须设置它。

但是这种舍入模式可以在程序运行期间被其他程序改变吗？通过操作系统？

更糟糕的是，这是一种可能的情况（伪代码）吗？

```
set_rounding_mode(ROUND_TRUNCATE);
/* process gets switched out and other process sets the rounding mode to round */
int x = round_with_fistp(0.6);
printf("%d\n", x); // prints 1 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-27T01:01:23.767

没有一个理智的通用操作系统会在进程和线程之间共享舍入模式。它只应在线程请求它时更改，并且更改应仅对该线程本地。但是，您可能会遇到某些库（尤其是第 3 方）更改它，有时（或总是）无法恢复它并迫使您实施变通方法。

# php - PHP HTML Javascript 设计问题

> ID：10343253
> 
> 赞同：0
> 
> 时间：2012-04-27T00:35:30.197
> 
> 标签：php, javascript, jquery, html

我希望有人可以帮助我解决我的设计问题。我有 index.php：

其中包含一段javascript代码：

```
<script type="text/javascript">
$(function() {
    $.getJSON('http://localhost/getData.php', function(data) {

    foo... 
```

index.php 还包含一个更新屏幕的表单：

```
<form action="index.php" method="post" />
<input type="submit" name="action" value="update" /></p> 
```

现在我的问题是我需要将一些变量传递给 getData.php 来更新屏幕。getData 可以很好地处理静态信息，但根据表单上的选择，数据会发生变化。

我传递变量的最佳方式是什么？

还是我设计不正确？

谢谢

* * *

我更新的 javascript 如下所示：

```
<script type="text/javascript">
$(function() {
$.getJSON('http://localhost/getData.php', {
group_value: $('#group_id option:selected').val(),
updatedb_value: $('#update_db_id').val() 
}, function(data) { 
```

然后我的表格如下所示：

```
<form id="myform" action="index.php" method="post" />
<select id="group_id" name="group">
<option value="0">Atlanta</option>
<option value="1">Chicago</option>
<option value="2">Los Angeles</option>
<option value="3">New York</option>
</select>
<input type="submit" name="action" value="Update" />
<input type="checkbox" id="update_db_id" name="update_db" value="1" />Update DB?<br />
</form> 
```

无论我选择或检查什么，当我单击更新按钮时，JS 控制台都会显示

```
GET http://localhost/getData.php?group_value=0&updatedb_value=1 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T00:42:26.840

您可以使用`$(input_selector).val()`获取表单输入的值，并将其作为对象传递给 getJSON，如下所示：

```
$.getJSON('http://localhost/getData.php', {
    some_value: $(some_input).val(),
    other_value: $(other_input).val()
}, function(data) { ... }); 
```

您还可以使用[序列化](http://api.jquery.com/serialize/)来传递所有表单数据：

```
$.getJSON('http://localhost/getData.php', $(form_selector).serialize(), function(data) { ... }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T01:59:29.610

唔。仔细观察这一行：

```
<form id="myform" action="index.php" method="post" /> 
```

哎呀。您自行关闭了表单。这可能会导致输入/选择元素的更新方式出现问题。尝试将其更改为：

```
<form id="myform" action="index.php" method="post"> 
```

您实际上也不需要 select 元素上的复杂选择器。这也将为您提供选定的值：

```
$('#group_id').val() 
```

# sqlite - sqlite - 我如何获得单行结果？(luaSQLite3)

> ID：10343255
> 
> 赞同：3
> 
> 时间：2012-04-27T00:35:47.760
> 
> 标签：sqlite, lua, coronasdk

如何从 sql 语句中获取单行结果（例如，以表/数组的形式）。使用 Lua Sqlite (LuaSQLite3)。比如这个：

```
SELECT * FROM sqlite_master WHERE name ='myTable'; 
```

到目前为止，我注意到：

*   使用“nrows”/“rows”它返回一个迭代器
*   使用“exec”它似乎没有返回结果（？）

那么具体的问题是：

Q1 - 如何获得单行（比如第一行）结果？

Q2 - 如何获得行数？（例如 num_rows_returned = db:XXXX(sql)）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T00:50:43.197

为了获得单行，请使用该`db:first_row`方法。像这样。

```
row = db:first_row("SELECT `id` FROM `table`")
print(row.id) 
```

为了获得行数，请使用 SQL`COUNT`语句。像这样。

```
row = db:first_row("SELECT COUNT(`id`) AS count FROM `table`")
print(row.count) 
```

**编辑：**啊，对不起。以下是一些应该有效的方法。

您也可以使用`db:nrows`. 像这样。

```
rows = db:nrows("SELECT `id` FROM `table`")
row = rows[1]
print(row.id) 
```

我们也可以修改它来获取行数。

```
rows = db:nrows("SELECT COUNT(`id`) AS count FROM `table`")
row = rows[1]
print(row.count) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-27T00:49:09.117

`rows`只需循环从您使用的或您使用的任何函数返回的迭代器。除了你把 a`break`放在最后，所以你只迭代一次。

获得计数就是使用 SQL。您可以使用 SELECT 语句计算它：

```
SELECT count(*) FROM ... 
```

这将返回包含单个值的一行：查询中的行数。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-28T17:53:54.390

这是获取返回计数的演示：

```
> require "lsqlite3"
> db = sqlite3.open":memory:"
> db:exec "create table foo (x,y,z);"
> for x in db:urows "select count(*) from foo" do print(x) end
0
> db:exec "insert into foo values (10,11,12);"
> for x in db:urows "select count(*) from foo" do print(x) end
1
> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-11-25T11:51:35.213

这与我在项目中使用的类似，并且对我来说效果很好。

```
local query = "SELECT content FROM playerData WHERE name = 'myTable' LIMIT 1"

local queryResultTable = {}

local queryFunction = function(userData, numberOfColumns, columnValues, columnTitles)

    for i = 1, numberOfColumns do

        queryResultTable[columnTitles[i]] = columnValues[i]

    end

end

db:exec(query, queryFunction)

for k,v in pairs(queryResultTable) do

    print(k,v)

end 
```

您甚至可以将值连接到查询中以放置在通用方法/函数中。

```
local query = "SELECT * FROM ZQuestionTable WHERE ConceptNumber = "..conceptNumber.." AND QuestionNumber = "..questionNumber.." LIMIT 1" 
```

# flash - 重复（不重新加载页面）youtube 视频会消耗带宽吗？

> ID：10343257
> 
> 赞同：0
> 
> 时间：2012-04-27T00:35:55.130
> 
> 标签：flash, networking, youtube, bandwidth

Flash 是否将 youtube 视频存储在浏览器缓存中，或者每次通过单击重复按钮重复视频（而不是重新加载浏览器）时下载。

另外，在 youtuberepeat.com 中播放的视频怎么样？我很好奇，因为我不想在工作中成为带宽违规者。

我在网上搜索了结果，但找不到任何合适的东西来回答我的问题，因此求助于 stackoverflow 上的极客。

编辑：

啊..当我在家时，我本可以关闭笔记本电脑中的无线网络来找到这个……不过，我很想听听你们的消息！

编辑：

我尝试加载 youtube 视频和 youtuberepeat 视频，它们都可以在我的无线关闭的情况下使用。看起来浏览器的缓存正在存储此信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T00:38:56.150

我认为如果您单击重播，它会这样做。我总是看到下载栏显示为正在下载。但是，如果您将进度条（我不知道确切的名称）移回来，它似乎不会再次下载..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T23:50:19.033

我尝试加载 youtube 视频和 youtuberepeat 视频，它们都可以在我的无线关闭的情况下使用。看起来浏览器的缓存正在存储此信息。

# iphone - Xcode为什么在项目使用时不自动链接QuartzCore？

> ID：10343259
> 
> 赞同：5
> 
> 时间：2012-04-27T00:36:31.487
> 
> 标签：iphone, ios, xcode, quartz-core

我对使用 Xcode 开发 iOS 应用程序有些好奇，尽管我们特别声明：

```
#import <QuartzCore/QuartzCore.h> 
```

在我们的 中`ViewController.h`，当项目链接时，`QuartzCore`库不会自动链接。这是为什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-27T00:41:48.730

因为导入标头与链接库没有任何关系。

您需要将 QuartzCore Framework 添加到目标链接的列表库中。

![在此处输入图像描述](../Images/d3963dc3ffad7d8208e4db8bf7ba25b5.png)

> 为什么 Xcode 不会自动执行此操作？

好吧，您正在导入的标头实际上是该框架的一部分。所以 Xcode 必须扫描它的所有框架，检查它们的头文件，并可能自动链接连接的库。这对于与操作系统相关的框架当然是可行的，但对于自定义框架来说几乎是不可能的，只要 Xcode 不知道它们的位置。有时，应用程序实际上并不*想*仅仅因为它们使用例如在标头中定义的枚举而链接到库。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-27T00:44:01.827

Xcode 不会自动添加除 base 3 以外的任何库。只需链接即可。也许未来的版本会检测到，但现在你必须去构建阶段并链接它们。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-27T00:51:18.953

关键是 Xcode 无法知道您的项目应该与 Quartz Core Framework 链接。

**`#import <QuartzCore/QuartzCore.h>`说你需要 Quartz Core Framework 是不够的。**您可以编写自己的库，其中包含一个名为的头文件`QuartzCore.h`并将其放在名为`QuartzCore`. 如果它在你的include文件搜索路径中，是可以使用的，除非你在你的项目中也加入了官方的Quartz Core Framework（这会导致冲突）。

还有其他例子。在 Visual Studio 中为 .NET 项目导入命名空间时，它不会自动将任何程序集添加到项目的“引用”中。这是因为您可以添加第三方程序集作为具有相同命名空间的引用。您还可以添加不同版本的官方 .NET Framework 程序集。

# c# - .net 事件混淆

> ID：10343263
> 
> 赞同：0
> 
> 时间：2012-04-27T00:37:17.697
> 
> 标签：c#, .net, wpf, events

我有一个数据结构类，它是一个更大的数据/状态类的子类。

当包含的数据发生变化时，内部数据结构会触发一个事件。此事件由较大的数据/状态类使用。然后数据/状态类触发它自己的事件，以便它可以将附加信息传递给下一个事件处理程序。

```
Public class Data
{
    //properties and objects go here

    public int Count
    {
        get { return _count; }
        internal set 
        {
            //if the count grew simply set _count
            if (value != _oldCount)
            {
                _oldCount = _count;
                _count = value;
            }
            //if the count shrank then set the count and trigger an event if the count is under 100
            else
            {
                _oldCount = _count;
                _count = value;
                if (_count < 100)
                {
                    CountChanged(this, new EventArgs());
                }
            }
        }
    }
    public event EventHandler CountChanged;
} 
```

上述事件由此事件处理程序消费

```
Data.CountChanged += new EventHandler(DataCountChanged);
private void DataCountChanged(object sender, EventArgs e)
{
    DataRemoved(this, e);  //Handle the old event and trigger a new event to pass along more information
}
public event EventHandler DataRemoved; 
```

最后，第二个事件应该由另一个事件处理程序处理以完成一些工作。不幸的是，触发第二个事件的调用通常会因 NullReferenceException 而失败。为什么？

----编辑---- 我知道检查 Null 将防止异常。令人困惑的是为什么这个事件首先是 Null =D

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T02:26:06.503

您应该始终使用以下模式引发事件，以避免空引用和线程问题：

```
private void DataCountChanged(object sender, EventArgs e)
{
    var dr = DataRemoved;
    if (dr != null)
    {
        dr(this, e);
    }
} 
```

处理程序为空的原因是它应该被视为一个特殊的委托集合。当集合为空时，委托具有空值。当您附加一个或多个处理程序时，集合不再为空，因此不再为空。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T01:33:40.733

```
if(DataRemoved != null && DataRemoved.GetInvocationList().Length > 0)
            {
            } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T02:36:13.383

为您的事件分配一个空委托可能不是一个很好的设计实践。事件本质上是类似于函数指针的委托。换句话说，它们就像您班级中的其他参考成员一样。除非您为它们分配一个值或订阅它们，否则它们将为并且应该为空。

`private MyClass;`您获得的空引用异常与声明然后尝试在分配值之前使用它的原因相同。

当您订阅一个事件时，您实际上是在告诉事件要调用哪个函数。如果您的事件没有至少一个这样的函数指针，它就不会存在（NULL）。

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-04-27T00:46:30.270

有一个技巧可以避免空检查：

只需按如下方式初始化您的事件：

```
public event YourDelegate MyEvent = delegate { }; 
```

这样您就不需要检查空值，只需像往常一样调用事件：

```
this.MyEvent("Hi there!"); 
```

**已编辑**

澄清：

像这样声明一个事件：

```
public event Action MyEvent; 
```

它会自动翻译成：

```
private Action myEvent;
public event Action MyEvent
{
   add
   {
      this.myEvent += value;
   }
   remove
   {
      this.myEvent -= value;
   }
} 
```

因此像这样初始化一个事件：

```
public event Action MyEvent = delegate { }; 
```

这是安全的，因为**外部代码**不能为事件本身分配空值。

但是，您可以将 null 分配给**它声明的类**中的事件，但真正发生的是，**您将 null 分配给 event 使用的私有委托**。

资料来源：[Jon Skeet，C# 深度分析，事件](http://csharpindepth.com/Articles/Chapter2/Events.aspx)

# matlab - 在 MATLAB 中使用外部编辑器

> ID：10343270
> 
> 赞同：3
> 
> 时间：2012-04-27T00:38:57.003
> 
> 标签：matlab, emacs, editor

我正在尝试使用 EMACS 作为 MATLAB 的外部编辑器。按照此处的说明进行操作后：[matlab script editing](https://stackoverflow.com/questions/2376178/matlab-script-editing)我可以使用该`matlab-shell`功能，但我仍然不明白如何使用 EMACS 编写脚本。

当我进入`edit`MATLAB 控制台并进入 EMACS 时，我没有看到任何 MATLAB 特定的功能。语法高亮、调试等选项在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T10:36:03.537

您需要此处的 matlab-emacs 集成：http: [//matlab-emacs.sourceforge.net/](http://matlab-emacs.sourceforge.net/) - 这应该可以让您突出显示语法。如果你已经安装了，也许你需要更新你的`auto-mode-alist`.

我必须承认，虽然我广泛使用 emacs 进行编辑，但我使用 MATLAB 编辑器进行调试。

# vb.net - vb中的顺序访问文件

> ID：10343274
> 
> 赞同：0
> 
> 时间：2012-04-27T00:39:28.190
> 
> 标签：vb.net, winforms

我正在使用 Visual Basic 开发一个程序，该程序结合了对选票类型程序使用顺序访问文件。用户单击保存投票按钮的每种类型，都会存储投票数量。我要做的是在我的访问文件中将投票数显示为实际数字。我现在的程序编写方式，候选人的名字出现的次数与保存的选票一样多。例如，如果 perez 被投票 4 次，则在访问文件中 perez 显示在 4 个不同的行上。我如何显示他们被投票的实际次数。我正在考虑使用计数器变量，但不确定如何真正实现它。这就是我到目前为止所拥有的。

```
Public Class Voter

Dim file As IO.File

Dim infile As IO.StreamReader

Dim outfile As IO.StreamWriter

Private Sub Voter_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load
    outfile = IO.File.CreateText("Votes.txt")
End Sub

Private Sub btnVote_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles btnVote.Click
    lstResult.Items.Clear()
    'which buttons is clicked
    If radMark.Checked = True Then
        outfile.WriteLine(radMark.Text)
        radMark.Checked = False
    ElseIf radSheima.Checked = True Then
        outfile.WriteLine(radSheima.Text)
        radSheima.Checked = False
    ElseIf radSam.Checked = True Then
        outfile.WriteLine(radSam.Text)
        radSam.Checked = False
    Else
        MessageBox.Show("You should select one among them")
    End If
End Sub

Private Sub btnResult_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles btnResult.Click
    'Dim Mark, Sheima, Sam As Integer
    Dim Mark As Integer = 0
    Dim Sheima As Integer = 0
    Dim Sam As Integer = 0
    Dim name As String
    'Mark = Sheima = Sam = 0
    outfile.Close()
    infile = IO.File.OpenText("Votes.txt")
    'keep track of votes
    While Not infile.EndOfStream
        name = infile.ReadLine()
        If name.Equals("Mark Stone") Then
            Mark += 1
        ElseIf name.Equals("Sheima Patel") Then
            Sheima += 1
        Else
            Sam += 1
        End If
    End While
    'results
    lstResult.Items.Clear()
    lstResult.Items.Add("Mark Stone     " & CStr(Mark))
    lstResult.Items.Add("Shemia Patel   " & CStr(Sheima))
    lstResult.Items.Add("Sam Perez      " & CStr(Sam))
    infile.Close()
End Sub

Private Sub Button3_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button3.Click
    Me.Close()

End Sub
End Class 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T00:57:59.213

在您的 btnVote_Click 函数中，您每次单击时都会将单选按钮文本写入文件，这就是创建问题的方式。

此外，您正在计算名称在文件中出现的次数作为投票数，而不是数字。

您应该尝试将名称和计数放入您的投票文件中，而不仅仅是名称，例如

马克,1
希玛,2
相同,5

然后，当您单击投票按钮时，您应该读取 Mark 的数字，加 1 并将其写回。

试试这个，

```
Private Sub btnVote_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles btnVote.Click
    lstResult.Items.Clear()
    'which buttons is clicked
    If radMark.Checked = True Then
        AddCount(radMark.Text)
        radMark.Checked = False
    ElseIf radSheima.Checked = True Then
        AddCount(radSheima.Text)
        radSheima.Checked = False
    ElseIf radSam.Checked = True Then
        AddCount(radSam.Text)
        radSam.Checked = False
    Else
        MessageBox.Show("You should select one among them")
    End If
End Sub

Private Sub btnResult_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles btnResult.Click

    'results
    lstResult.Items.Clear()
    lstResult.Items.Add("Mark Stone     " & GetCount(radMark.Text))
    lstResult.Items.Add("Shemia Patel   " & CStr(radSheima.Text))
    lstResult.Items.Add("Sam Perez      " & CStr(radSam.Text))

End Sub

Private Sub AddCount(Byval VoteName As String)

    infile = New IO.File.StreamReader("Votes.txt")

    Dim whole_line As String
    Dim person As String
    Dim vote_count As Integer
    Dim found as boolean

    'read through the whole file until the end or find the name
    Do While infile.Peek() >= 0 And person <> VoteName

        'read each line
        whole_line = infile.ReadLine

        person = Split(whole_line, ",")(0)

        If person = VoteName Then

            vote_count = Split(whole_line, ",")(1)

            found = True
        End If
    Loop

    'Close the file after it is used.
    infile.Close()

    'Reopen the file with the StreamWriter
    outfile = IO.File.OpenText("Votes.txt")

    If found = True Then
        'the line will only be replace if the person name is found in the line
        whole_line = Whole_line.replace(VoteName & "," & vote_count, VoteName & "," & vote_count + 1)

        'Write back into the file
        outfile.WriteLine(whole_line)
    Else
        'if the vote name is not found in the file
        'Then create a new one
        outfile.WriteLine(VoteName & ",1" & VbCrLf)
    End If

        outfile.Close()

End Sub

Private Function GetCount(Byval VoteName As String)
    infile = New IO.File.StreamReader("Votes.txt")      

    Dim whole_line As String
    Dim person As String
    Dim vote_count As Integer

    'read through the whole file
    Do While infile.Peek() >= 0 And person <> VoteName

        'read each line
        whole_line = infile.ReadLine

        person = Split(Whole_line, ",")(0)

        If person = VoteName Then
            vote_count = Split(whole_line, ",")(1)
        End If
    Loop

    infile.Close()
    Return vote_count
End Sub 
```

# java - 使用 gson 解析时忽略成员字段

> ID：10343275
> 
> 赞同：1
> 
> 时间：2012-04-27T00:39:30.847
> 
> 标签：java, android, json, gson, pojo

我正在使用 Google 的[gson](http://code.google.com/p/google-gson/)库将 POJO 解析为 json。这些是涉及的对象：

```
// Order.java
public class Order {
    // ...
    private int id;
    private String name;
    private Location location;
    // ...
}
// Location.java
public class Location {
    // ...
    private String address;
    private float latitude;
    private float longitude;
    private String postcode
    // ...
} 
```

当我使用 gson 运行它（确保 Location 成员变量不为空）时，`new Gson().toJson(order)`我得到以下结果：

```
{
    "id" : 1,
    "name" : "nameValue"
} 
```

但我期待得到这样的东西：

```
{
    "id" : 1,
    "name" : "nameValue",
    "location" : {
            "address" : "some address",
            "latitude" : 53.346346,
            "longitude" : -3.346363,
            "postcode" : "23563"
        }
} 
```

无法弄清楚为什么会这样。有人遇到过这个吗？我可能做错了什么？

我尝试设置自定义类型适配器，但没有成功。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T06:21:06.413

好的，我弄清楚了问题所在。我有一个模拟对象工厂，它使用 Location 类型中的匿名构造函数创建了模拟对象，如下所示：

```
Location location = new Location() {
    {
         setAddress("some address");
         setLatitude(53.346346);
         setLongitude(-3.356363);
         setPostCode("23563");
    }
}; 
```

所以 Gson 将其解释为一个匿名类，正如文档中所说：

> 内部类、匿名类和本地类中的外部类对应的字段被忽略，不包含在序列化或反序列化中

我将其更改为按预期设置`GsonBuilder`和 iworks 的正常方式。但是我想知道是否可以使用这种启动，因为它确实适用于集合（ArrayList）。它使我的模拟工厂更易于阅读。:)

# php - 如何找到用户的 google 个人资料图片（在组织内）？

> ID：10343285
> 
> 赞同：3
> 
> 时间：2012-04-27T00:41:31.360
> 
> 标签：php, google-plus

我有一个自定义构建的博客，我想显示一个贡献者页面，其中包含每个贡献成员的个人资料图片。该组织使用谷歌应用程序，所有贡献成员都有谷歌/谷歌+个人资料照片。

有没有办法可以使用每个用户的电子邮件地址来查找他们的个人资料图片并将其显示在他们博客的个人资料页面上？还是我需要让他们在这之前用谷歌登录？

由于我们使用谷歌应用程序，如果我在组织内这样做会更容易吗？

基本上，我可以在我的 g-mail 帐户中看到所有这些用户的个人资料图片——那么有没有办法获取他们贡献的博客上使用的图片？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T03:27:50.367

没有用于通过电子邮件地址搜索配置文件的公共 API。不过，有一个[开放的功能请求](https://code.google.com/p/google-plus-platform/issues/detail?id=64)，您应该为更新加注星标。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-06-20T12:49:13.513

显然没有链接，但如果他们有公开的 G+ 个人资料，您应该能够简单地操纵 URL。

```
https://www.google.com/maps/contrib/123456{/reviews}
https://plus.google.com/123456 
```

# asp.net-mvc - ASP.NET WebApi + Autofac 没有找到 ApiControllers

> ID：10343292
> 
> 赞同：5
> 
> 时间：2012-04-27T00:42:16.240
> 
> 标签：asp.net-mvc, autofac, asp.net-mvc-4, asp.net-web-api

我正在尝试让 Autofac 与 WebApi 一起使用。我的 ApiControllers 在与主 Web 项目不同的项目中。

InventorySystem.Web.UI InventorySystem.Web.Api.Controllers

每当我尝试浏览到 api 路由时，我都会得到响应：

```
<Exception xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
    <ExceptionType>System.ArgumentNullException</ExceptionType>
    <Message>Value cannot be null. Parameter name: value</Message>
    <StackTrace>
at System.Web.Http.Controllers.HttpControllerContext.set_Controller(IHttpController value)
at System.Web.Http.Dispatcher.DefaultHttpControllerFactory.CreateInstance(HttpControllerContext controllerContext, HttpControllerDescriptor controllerDescriptor)
at System.Web.Http.Dispatcher.DefaultHttpControllerFactory.CreateController(HttpControllerContext controllerContext, String controllerName)
at Autofac.Integration.WebApi.AutofacControllerFactory.CreateController(HttpControllerContext controllerContext, String controllerName)
at System.Web.Http.Dispatcher.HttpControllerDispatcher.SendAsyncInternal(HttpRequestMessage request, CancellationToken cancellationToken)
at System.Web.Http.Dispatcher.HttpControllerDispatcher.SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
    </StackTrace>
</Exception> 
```

当我单步执行 Autofac 代码时，我看到我的控制器已注册，但 AutofacControllerActivator.Create() 返回 null。特别是行 return (ResolutionExtensions.ResolveOptional(scope, controllerType) as IHttpController);

autofac 代码： string binDirectory = Path.Combine(HttpRuntime.AppDomainAppPath, "bin");

```
 var builder = new ContainerBuilder();

        builder.ConfigureWebApi(GlobalConfiguration.Configuration);

        builder.RegisterControllers(Assembly.GetExecutingAssembly()).PropertiesAutowired();
        builder.RegisterApiControllers(Assembly.LoadFile(Path.Combine(binDirectory, "InventorySystem.Web.Api.dll"))).PropertiesAutowired();
        builder.RegisterFilterProvider();            

        var container = builder.Build();

        DependencyResolver.SetResolver(new AutofacDependencyResolver(container));
        GlobalConfiguration.Configuration.ServiceResolver.SetResolver(new AutofacWebApiDependencyResolver(container)); 
```

我错过了什么吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T11:13:15.260

您可能想看看这个[SO question](https://stackoverflow.com/questions/13423992/autofac-with-mvc4-controller-does-not-have-a-default-constructor)，其中*另一个*程序集是从一个引用 API 控制器开始的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-03T13:27:39.580

RegisterApiControllers 注册扩展查找实现`IHttpController`接口并具有以“Controller”结尾的名称的类型。您的控制器类名称是否有“Controller”后缀？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T00:28:02.460

您是否忘记使用构建容器为您的 Api 控制器注册构造函数依赖项？

HostingEnvironment.MapPath("~/bin") 是另一种获取 bin 目录中文件路径的好方法。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2016-06-07T09:34:53.740

```
var builder = new ContainerBuilder();   
builder.Update(container);
 var webApiResolver = new Autofac.Integration.WebApi.AutofacWebApiDependencyResolver(container);
    System.Web.Http.GlobalConfiguration.Configuration.DependencyResolver = webApiResolver; 
```

# silverlight - Silverlight/xaml 中通知的图标徽章覆盖

> ID：10343293
> 
> 赞同：2
> 
> 时间：2012-04-27T00:42:21.940
> 
> 标签：silverlight, xaml, notifications, styles, badge

我的 silverlight 应用程序中有一个功能区栏，我希望在其中一个图标上有一个徽章图标，显示图标激活的视图中的项目数。
想象一下 OS X 中的 Mail 图标，显示未读消息的数量或 IOS 应用程序图标上的通知计数器。

我对 xaml 样式了解不多，但在我看来，我可以复制功能区栏按钮的默认样式，然后添加某种红色圆圈和一个白色文本，该文本从一个新的功能区栏按钮上的属性，所以我可以绑定到它。

有没有人有这样的例子我可以开始？

* * *

感谢肖恩的回答。这就是我最终要做的：
在 xaml 中：

```
<telerikRibbonBar:RadRibbonRadioButton
    Text="Expired Active   Call Factors"
    Size="Large"
    LargeImage="/CallFactorDatabase.UI;component/Images/Ribbon/Large/ExpiredActiveView.png"
    Command="{Binding ActivateViewCommand}"
    CommandParameter="ExpiredActiveView">
    <Grid>
        <Grid.Resources>
            <converters:BooleanToVisibilityConverter x:Key="visibleWhenTrueConverter" VisibilityWhenTrue="Visible" VisibilityWhenFalse="Collapsed" />
        </Grid.Resources>
        <Grid Width="27" Height="27" Visibility="{Binding ExpiredActiveCallFactors, Converter={StaticResource visibleWhenTrueConverter}}" Margin="50,-40,0,0">
            <Ellipse Fill="Black" Width="27" Height="27"/>
            <Ellipse Width="25" Height="25" VerticalAlignment="Center" HorizontalAlignment="Center">
                <Ellipse.Fill>
                    <LinearGradientBrush StartPoint="0,0" EndPoint="0,1">
                        <GradientStop Color="Coral" Offset="0.0" />
                        <GradientStop Color="Red" Offset="1.0" />
                    </LinearGradientBrush>
                </Ellipse.Fill>
            </Ellipse>
            <Viewbox Width="25" Height="25" VerticalAlignment="Center" HorizontalAlignment="Center" >
                <TextBlock Text="{Binding ExpiredActiveCallFactorsCount}" Foreground="White"/>
            </Viewbox>
        </Grid>
    </Grid>
</telerikRibbonBar:RadRibbonRadioButton> 
```

它的外观：
![在此处输入图像描述](../Images/8696b8ffc774dd6764556ae38bbc7f14.png)

没有运气把它放在功能区按钮前面，但是哦，好吧。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-27T05:12:43.990

这可以通过一些绑定和一个可选的值转换器来完成。此示例假定您绑定到具有 Items 属性的模型，并且该属性的类型为 ObservableCollection，以便在添加/删除项目时，集合的 Count 属性将触发属性更改。

```
<Grid>
    <Grid.Resources>
        <local:CountToVisbilityConverter x:Key="CountToVis"/>
    </Grid.Resources>
    ....
    <Grid Width="25" Height="25" Visibility="{Binding Items.Count, Converter=CountToVis}">
        <Ellipse Fill="Red" Width="25" Height="25"/>
        <ViewBox Width="25" Height="25">
            <TextBlock Text="{Binding Itmes.Count}" Foreground="White"/>
        </Viewbox>
    </Grid>
</Grid> 
```

和价值转换器：

```
public class CountToVisibilityConverter : IValueConverter
{

    #region IValueConverter Members

    public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
    {
        if(value == null) return Visibility.Collapsed;

        int count = System.Convert.ToInt32(value);
        return count == 0 ? Visibility.Collapsed : Visibility.Visible;
    }

    public object ConvertBack(object value, Type targetType, object parameter, CultureInfo culture)
    {
        throw new NotImplementedException();
    }

    #endregion
} 
```

我看到可选”转换器的原因是因为您也可以像这样使用交互数据触发器

```
 <Grid x:Name="UnreadNotification" Width="25" Height="25">
        <Ellipse Fill="Red" Width="25" Height="25"/>
        <ViewBox Width="25" Height="25">
            <TextBlock Text="{Binding Itmes.Count}" Foreground="White"/>
        </Viewbox>
    </Grid>
    <i:Interaction.Triggers>
        <ei:DataTrigger Binding="{Binding Items.Count, Comparison="Equal"
                    Value="0">
            <ei:ChangePropertyAction PropertyName="IsEnabled"
                                 Value="True"
                                 TargetName="UnreadNotification" />
        </ei:DataTrigger>
    </i:Interaction.Triggers> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-05-03T13:40:37.430

这是我的解决方案。默认情况下，徽章将显示在右上角。您可以通过设置“BadgeMarginOffset”属性来更改此设置。我附上了几张图片来展示它的外观。一，它显示了包装 Telerik RadRibbonButton 的徽章。您还可以更改徽章的背景和前景颜色（BadgeBackground、BadgeForeground）。默认值如下所示。

[![使用 BadgeMarginOffset](../Images/2569d091ba30a12c5e7f7c54a9624bbd.png)](https://i.stack.imgur.com/2CRAP.png)

[![没有 BadgeMarginOffset](../Images/44a4c6c6ec0ac89032601f2b96d4187c.png)](https://i.stack.imgur.com/KwBBF.png)

[![Telerik RadRibbonButton](../Images/108610f74fdef2932df2728595820b10.png)](https://i.stack.imgur.com/G9G9j.png)

UserControl 的 XAML

```
<UserControl x:Class="Foundation.Common.Controls.Wpf.Badge"
         xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
         xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
         xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
         xmlns:converters="clr-namespace:Foundation.Common.Controls.Wpf.Converters"
         Background="Transparent" x:Name="UserControl"
         mc:Ignorable="d" >
<UserControl.Resources>
    <converters:GreaterThanZeroBooleanConverter x:Key="GreaterThanZeroBooleanConverter" />
    <converters:GreaterThanZeroVisibilityConverter x:Key="GreaterThanZeroVisibilityConverter"/>
</UserControl.Resources>
<UserControl.Template>
    <ControlTemplate>
        <Grid HorizontalAlignment="Stretch" >
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>
            <Border CornerRadius="10"  
                    UseLayoutRounding="True"
                    x:Name="BadgeBorder"
                    Grid.ZIndex="99"
                    VerticalAlignment="Top"
                    HorizontalAlignment="Right"
                    Visibility="{Binding ElementName=UserControl, Path=Count, Mode=TwoWay, Converter={StaticResource GreaterThanZeroVisibilityConverter}}"
                    Grid.Row="0"
                    Margin="{Binding ElementName=UserControl, Path=BadgeMarginOffset}"
                    Height="22"
                    Padding="6.7,2,7,3" 
                    Background="{Binding ElementName=UserControl, Path=BadgeBackground}">
                <Border.Style>
                    <Style TargetType="Border">
                        <Style.Triggers>
                            <DataTrigger Binding="{Binding ElementName=UserControl, Path=Count, Mode=TwoWay, Converter={StaticResource GreaterThanZeroBooleanConverter}}" Value="True">
                                <DataTrigger.EnterActions>
                                    <BeginStoryboard>
                                        <Storyboard>
                                            <DoubleAnimation From="0.0"
                                                             To="1.0"
                                                             Duration="0:0:0.7"
                                                             Storyboard.TargetProperty="Opacity"/>
                                        </Storyboard>
                                    </BeginStoryboard>
                                </DataTrigger.EnterActions>
                            </DataTrigger>
                            <DataTrigger Binding="{Binding ElementName=UserControl, Path=ShowDropShadow}" Value="True">
                                <Setter Property="Effect">
                                    <Setter.Value>
                                        <DropShadowEffect BlurRadius="6" ShadowDepth="4" Color="#949494"/>
                                    </Setter.Value>
                                </Setter>
                            </DataTrigger>
                        </Style.Triggers>
                    </Style>
                </Border.Style>
                <TextBlock Text="{Binding ElementName=UserControl, Path=Count}"
                           Foreground="{Binding ElementName=UserControl, Path=BadgeForeground}"
                           FontWeight="Bold"
                           FontSize="12">
                </TextBlock>
            </Border>
            <ContentPresenter Grid.Row="0" 
                              Grid.RowSpan="2"
                              DataContext="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=DataContext}"
                              Content="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=Content}" />
        </Grid>
    </ControlTemplate>
</UserControl.Template> 
```

UserControl背后的代码

```
public partial class Badge : UserControl
{
    #region Dependency Properties

    public static readonly DependencyProperty CountProperty =
        DependencyProperty.Register("Count", typeof(int), typeof(Badge));

    public static readonly DependencyProperty ShowDropShadowProperty =
        DependencyProperty.Register("ShowDropShadow", typeof(bool), typeof(Badge), new PropertyMetadata(true));

    public static readonly DependencyProperty BadgeMarginOffsetProperty =
        DependencyProperty.Register("BadgeMarginOffset", typeof(Thickness), typeof(Badge));

    public static readonly DependencyProperty BadgeBackgroundProperty =
        DependencyProperty.Register("BadgeBackground", typeof(Brush), typeof(Badge), new PropertyMetadata(Brushes.Red));

    public static readonly DependencyProperty BadgeForegroundProperty =
        DependencyProperty.Register("BadgeForeground", typeof(Brush), typeof(Badge), new PropertyMetadata(Brushes.White));

    #endregion Dependency Properties

    #region Constructor

    /// <summary>
    /// Initializes a new instance of the <see cref="Badge"/> class.
    /// </summary>
    public Badge()
    {
        this.InitializeComponent();
    }

    #endregion Constructor

    #region Properties

    /// <summary>
    /// Gets or sets a value indicating whether [show drop shadow].
    /// </summary>
    /// <value>
    ///   <c>true</c> if [show drop shadow]; otherwise, <c>false</c>.
    /// </value>
    public bool ShowDropShadow
    {
        get => (bool)this.GetValue(ShowDropShadowProperty);
        set => this.SetValue(ShowDropShadowProperty, value);
    }

    /// <summary>
    /// Gets or sets the badge margin offset.
    /// </summary>
    /// <value>
    /// The badge margin offset.
    /// </value>
    public Thickness BadgeMarginOffset
    {
        get => (Thickness)this.GetValue(BadgeMarginOffsetProperty);
        set => this.SetValue(BadgeMarginOffsetProperty, value);
    }

    /// <summary>
    /// Gets or sets the badge background.
    /// </summary>
    /// <value>
    /// The badge background.
    /// </value>
    public Brush BadgeBackground
    {
        get => (Brush)this.GetValue(BadgeBackgroundProperty);
        set => this.SetValue(BadgeBackgroundProperty, value);
    }

    /// <summary>
    /// Gets or sets the badge foreground.
    /// </summary>
    /// <value>
    /// The badge foreground.
    /// </value>
    public Brush BadgeForeground
    {
        get => (Brush)this.GetValue(BadgeForegroundProperty);
        set => this.SetValue(BadgeBackgroundProperty, value);
    }

    /// <summary>
    /// Gets or sets the count.
    /// </summary>
    /// <value>
    /// The count.
    /// </value>
    public int Count
    {
        get => (int)this.GetValue(CountProperty);
        set => this.SetValue(CountProperty, value);
    }

    #endregion Properties
} 
```

前两张图片的示例代码

```
<wpf:Badge Count="108" Margin="20" HorizontalAlignment="Left" BadgeMarginOffset="0,-5,-5,0">
    <Button Height="100" Width="100">
        <Button.Content>
            <Image Source="Resources/about.png" />
        </Button.Content>
    </Button>
</wpf:Badge> 
```

# c# - 处理文件中的数据引用/指针？

> ID：10343297
> 
> 赞同：0
> 
> 时间：2012-04-27T00:43:05.667
> 
> 标签：c#, c++, file

我正在使用二进制文件格式。我会尽量让这件事变得简单，因为这很难解释。

写入文件的数据结构可能包含“指针”（即指向文件中另一个位置的字符串的指针，或指向文件中另一个结构的指针。“指针”的更好用词是'offset'，即一个结构包含文件中字符串的偏移量）。

一个简单的例子：

```
struct ExampleStruct {
    public string Text;
    public int Number;
}; 
```

'Text' 字符串成员将被写入文件的开头，并且不包含在序列化结构中。

因此，本质上，该结构在文件中将如下所示：

```
struct ExampleStruct {
    public uint TextLocationOffset;
    public int Number;
}; 
```

...'TextLocationOffset' 是文件中字符串'Text' 所在位置的偏移量。

所以，在我有了这个之后，我需要一个“重定位表”——本质上是一个指向文件中数据指针的双指针列表。（那有意义吗？）

因此，由于我将 ExampleStruct 写入了我的文件，并且它包含一个“指针”（TextLocationOffset），因此我的“重定位表”将包括：

```
public uint TextLocationOffset_LocationOffset; 
```

...“TextLocationOffset_LocationOffset”包含文件中“TextLocationOffset”的偏移量。

这一切有意义吗？我试图尽可能地简化它。

我的问题是，我将如何跟踪 C# 中的所有指针/双指针/重定位？数据不断被添加到我拥有的 byte[] 数组中，因此偏移量将不断变化。

这在 C++ 中很容易，因为我可以获得正在“重新定位”的任何内容的双指针，然后我可以将原始“指针”（在我的示例中为“TextLocationOffset”）更改为正确的偏移量，然后我可以找到'TextLocationOffset' 值的位置并将其添加到我的重定位表中。

对不起，如果这没有意义。几周前我试着问过这个问题，但没有得到答复，我可能会让它听起来很混乱。

我只需要一种方法来跟踪我的代码中的所有这些......有什么提示吗？

PS如果您需要更详尽的示例，我很乐意提供。:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T02:29:13.607

您可能想查看其他方法来序列化和反序列化您的数据。除非您遇到非常特殊的情况，否则跟踪托管应用程序中的重定位和偏移是不必要的。如果您让我们更多地了解您在功能方面想要实现的目标，那么 SO 用户可以更好地指导您。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T00:55:13.463

使用数据库表 - 所有这些工作都已完成。

# objective-c - 遍历 NSMutableArray？

> ID：10343298
> 
> 赞同：1
> 
> 时间：2012-04-27T00:43:15.040
> 
> 标签：objective-c, nsmutablearray, traversal

首先让我告诉你我是一个完全的 Objective-C 初学者。这是我的问题：

我有一个 NSMutableArray 存储对象，（玩家）有玩家的名字和他/她的分数。

我可以使用 将对象添加到数组中`addObject`，但是在遍历这个数组时遇到了麻烦。我就是这样做的：

```
// Get the reference to the array 
NSMutableArray *myarray = [delegate getArray];
// Create a numerator
NSEnumerator *e = [myarray objectEnumerator];
id object;
while (object = [e nextObject])
{
    [object printPlayer];
} 
```

方法 printPlayer 属于 Player 类，它只打印名称和分数。

问题是当我在数组中有三个播放器并且我试图打印内容时，它在 printPlayer 方法中遇到了这个错误：

```
Thread 1: EXC_BAD_ACCESS(code=1, address=0x0000008) 
```

奇怪的是，如果我使用`NSLog(@"%@", object);`而不是`[object printPlayer];`它会打印对对象的引用并且不会出现任何错误。

任何人都可以指出我尝试使用时可能出现的问题`[object printPlayer]`

干杯

**更新 1：** 这是我的 printPlayer 方法：

```
-(void) printPlayer
{
    NSLog(@"\n\nName: %@\nScore: %d", playerName, playerScore);
} 
```

**更新 2：**

播放器.h：

```
@interface PROGPlayer : NSObject
@property (nonatomic, assign) NSString *playerName;
@property (nonatomic, assign) int playerScore;
-(id) init: (NSString *) n;
-(void) printPlayer;
@end 
```

播放器.m：

```
#import "PROGPlayer.h"
@implementation PROGPlayer

@synthesize playerName;
@synthesize playerScore;
/**
 * Player's class constructor
 * @param   n Player's name
 * @param   s Player's score
 */
-init: (NSString *) n
{
    if (!(self = [super init])) return nil;
    else 
    {
        playerName = n;
        playerScore = 0;
    }
    return self;
}

-(void) printPlayer
{
    NSLog(@"\n\nName: %@\nScore: %d", playerName, playerScore);
}
@end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T05:08:56.837

您的问题似乎在于您定义属性的方式。

您正在使用**assign**而不是**strong**或**copy**。

简而言之，这是因为**strong**意味着您希望保留您的对象。

使用*副本*意味着您要创建对象或值的新副本并将其设置为您的属性的值......正如马里奥和贾森解释的那样，在使用数组时使用**副本**是更好的做法，以防止数组被变异（即值已更改）在枚举/遍历时。使用**copy**也会保留新对象。

如果你使用 ARC 并且你的对象没有被保留，那么编译器会自动释放它们。

使用 assign 意味着您假设新对象已保留在其他地方并且您不想再次保留它。

我想发生的事情是您将变量分配给您的财产，但该变量被释放（因此导致零）并导致崩溃。

这里有几个链接：

[目标 C 新手：需要帮助理解强引用与分配](https://stackoverflow.com/q/10292031/1218605)

[Objective-C ARC：强 vs 保留和弱 vs 分配](https://stackoverflow.com/q/8927727/1218605)

[澄清分配，保留，复制，强？](https://stackoverflow.com/q/9035658/1218605)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-27T05:06:01.610

您的 playerName 属性最好被复制而不是分配

```
@property (nonatomic, copy) NSString *playerName; 
```

当试图访问分配的值时，对象很可能已经消失，导致访问不正确。

还记得在将属性设置为复制时在 dealloc 中释放 playerName。

干杯

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-27T01:18:19.013

无论是 Mike Z 所说的还是“粗鲁的”：

```
for (int i = 0; i < myArray.count; i++) {
    CustomClass* object = [myArray objectAtIndex:i];
    [object printPlayer];
} 
```

虽然有更优雅的方案，但您可以清楚地了解这个方案在做什么，以及 NS(Mutable)Array 如何只是标准 C 数组的简单模拟。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-27T00:53:18.453

你只想枚举数组？

```
for (CustomClass *object in myArray){
  [object printPlayer];
} 
```

# node.js - 如何使用everyauth 从 loginLocals 访问我的用户对象？

> ID：10343301
> 
> 赞同：1
> 
> 时间：2012-04-27T00:43:40.640
> 
> 标签：node.js, everyauth

我试过以下

```
.loginLocals(function (req, res, done) {
    console.log(req.user);
    done();

}) 
```

它似乎被 GET 调用（req.user 未定义）但不是 POST（此时我将能够访问用户并输入相关参数）

# webdriver - 如何在 Jbehave 中将相同的故事文本实现到不同的页面对象

> ID：10343303
> 
> 赞同：0
> 
> 时间：2012-04-27T00:43:46.513
> 
> 标签：webdriver, jbehave

我刚开始使用带有 WebDriver 的 Jbehave Web，想知道是否可以将相同的文本步骤应用于不同的步骤方法。

比如说你有以下两种情况

方案 1

*   鉴于我在要购买的房产页面上
*   当我点击搜索
*   然后我应该看到包含所有要购买的属性的结果页面

方案 2

*   鉴于我在要出租的物业页面上
*   当我点击搜索
*   然后我应该会看到包含所有要出租的房产的结果页面

如果我使用页面对象模式实现这一点，我将拥有一个名为 buyProperties 的页面对象，同样对于出租属性，一个页面对象称为类似rentProperties 的东西（以及结果页面对象）。

在这两种情况下，都会单击搜索按钮/链接，因此步骤文本是相同的。然而，实际上它们位于不同的页面（和页面对象）上。

我怎样才能实现 Jbehave 以便它知道调用 step 方法来实现单击rentProperties 页面上的搜索按钮的租赁场景，而对于购买场景它知道调用实现单击 buyProperties 页面上的搜索按钮的 step 方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T13:18:57.107

尝试

```
@Given ("I am on the properties to $action page")
public void given_i_am_on_the_properties_action_page(@Named("action") String action) {
    if (action.equalsIgnoreCase("Buy") {
        do something;
    }
    if (action.equalsIgnoreCase("Rent") {
        do something;
    }
} 
```

“做某事”可能是为后续步骤设置页面对象。同样，您可以为 @Then 步骤使用相同的方法和变量。

我使用了类似的东西来选择菜单项并等待页面加载，然后再继续下一步

```
@When ("I select menu item $menuItem")
public static void when_i_select_menu_item(@Named("menuItem") String menuItem) {
    String item = "";
    String waitFor = "";
    if (menuItem.equalsIgnoreCase("admin")) {
        item = "Admin";
        waitFor = "admin_page";
    }
    if (menuItem.equalsIgnoreCase("home")) {
        item = "Home";
        waitFor = "home_page";
    }
    if (menuItem.equalsIgnoreCase("search")) {
        item = "Search";
        waitFor = "search_page";
    }

    driver.findElement(By.id(item)).click();
    (new WebDriverWait(driver, timeout)).until(new ExpectedCondition<Boolean>() {
        public Boolean apply(WebDriver d) {
            return element.findElement(By.id(waitFor)).isDisplayed() || d.findElement(By.id(waitFor)).isEnabled();
        }
    });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T21:20:35.583

您的步骤类将有两种方法 - 一种用 @Given("...rent") 注释，另一种用 @Given("...buy") 注释。每种方法都做自己的事情。如果“rent”和“buy”是传入的变量，则根据该变量的值做不同的事情。我不确定我得到这个问题......对不起。

# c# - 将表达式解析为参数

> ID：10343304
> 
> 赞同：2
> 
> 时间：2012-04-27T00:43:54.370
> 
> 标签：c#, lambda

我正在尝试编写一个可以这样调用的方法：

```
var myCommand = Command.Where(x => x.Name == "grep" && x.Switch == "x"); 
```

我想要做的是解析结果表达式，如下所示：

```
public static string FindBy(Expression<Func<T, bool>>  expression)
{
    var condition1Key = ? //condition1Key = "Name"
    var condition1Value = ? //condition1Value = "grep"
    var condition2Key = ? //condition1Key = "Switch"
    var condition2Value = ? //condition1Value = "x"

   return string.Format("Looking for commands with {0} = {1} and {2} = {3}",
                         condition1Key, condition1Value, 
                         condition2Key, condition2Value);
} 
```

我确实找到[了这篇文章](https://stackoverflow.com/questions/1473289/use-lambda-expressions-as-a-parameter)，但它已经很老了，从未收到过正确的答案。

### 我如何解析传入`Expression`的内容以提取我需要的内容？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T00:49:02.387

您可以解析`Expression`树。这是 MSDN 的一个基本示例：http: [//msdn.microsoft.com/en-us/library/bb397951.aspx](http://msdn.microsoft.com/en-us/library/bb397951.aspx)

更多来自博客文章：http: [//blogs.msdn.com/b/charlie/archive/2008/01/31/expression-tree-basics.aspx](http://blogs.msdn.com/b/charlie/archive/2008/01/31/expression-tree-basics.aspx)

在这里有一个很好的答案：[https ://stackoverflow.com/a/239359/29093](https://stackoverflow.com/a/239359/29093)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-27T00:58:30.180

如果您按照您提到的 SO 线程中的链接，您将到达[MSDN 条目 for expressions](http://msdn.microsoft.com/en-us/library/bb397951.aspx)。特别是，在“解析表达式树”部分下，以下示例应该会有所帮助：

```
// Create an expression tree.
Expression<Func<int, bool>> exprTree = num => num < 5;

// Decompose the expression tree.
ParameterExpression param = (ParameterExpression)exprTree.Parameters[0];
BinaryExpression operation = (BinaryExpression)exprTree.Body;
ParameterExpression left = (ParameterExpression)operation.Left;
ConstantExpression right = (ConstantExpression)operation.Right;

Console.WriteLine("Decomposed expression: {0} => {1} {2} {3}",
              param.Name, left.Name, operation.NodeType, right.Value);

// This code produces the following output:
// Decomposed expression: num => num LessThan 5 
```

您甚至可以创建一个类来使在树上的行走更容易：[如何：实现表达式树访问器](http://msdn.microsoft.com/en-us/library/Bb882521.aspx)

# php - Wordpress / PHP - 设置 div 宽度以适合所有图像

> ID：10343305
> 
> 赞同：0
> 
> 时间：2012-04-27T00:44:01.337
> 
> 标签：php, image, wordpress, html, width

如果我这样调用帖子，每个帖子都包含许多图像，是否有任何 PHP 可以用来查找每个帖子中所有图像的总宽度，然后将 div id="page" 设置为最大宽度？

```
 <div id="page">
        <?php if ( have_posts() ) while ( have_posts() ) : the_post(); ?>
            <div id="post-<?php the_ID(); ?>" <?php post_class(); ?>>
                <div class="entry-content">
                    <?php the_content(); ?>
                </div><!-- .entry-content -->
            </div><!-- #post-## -->
    </div> 
```

在 javascript 中很容易，我是 PHP 新手，但怀疑它可行吗？干杯!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T09:02:37.457

php运行在服务器端，这意味着服务器在生成页面时，并不知道页面上图片的大小。

您可以使用该功能

> get_the_content()

页面的内容，然后使用该功能

> preg_match_all

获取图像的 src 和宽度。

然后，如果图片没有属性宽度，使用getimagesize()和图片的src参数来获取宽度。然后计算 div id="page" 的大小，但是这样会导致服务器超载。最好在客户端使用js。

# php - php bin2hex 解析错误

> ID：10343307
> 
> 赞同：0
> 
> 时间：2012-04-27T00:44:04.603
> 
> 标签：php

我不明白为什么这会不断抛出“PHP Parse 错误”：

```
$salt = bin2hex(mcrypt_create_iv(size)(32, MCRYPT_DEV_URANDOM)); 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T01:03:15.093

因为

```
mcrypt_create_iv(size)(32, MCRYPT_DEV_URANDOM) 
```

是胡说八道。应该

```
mcrypt_create_iv(32, MCRYPT_DEV_URANDOM) 
```

# strtotime - 难以将 yyyy-mm-dd 格式的日期转换为文本日期格式，例如 2012 年 1 月 21 日星期一 PHP

> ID：10343309
> 
> 赞同：0
> 
> 时间：2012-04-27T00:44:31.670
> 
> 标签：strtotime, mktime, php

我正在尝试将格式中的日期转换`(yyyy-mm-dd)`为文本日期格式，例如`Monday 21 Jan 2012`使用 PHP。我尝试过使用`mktime()`函数，但我是新手，我无法弄清楚。
任何帮助将不胜感激。

例如：-   `convert 2012-04-27 => Friday 27 April 2012`

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T00:46:35.343

```
echo date("l j M Y", strtotime('2012-04-26')); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T00:46:54.080

您可以使用[`DateTime`](http://php.net/DateTime)该类（建议使用该类`strtotime`）：

```
$date = new DateTime($date_string);
$textual = $date->format("l j M Y"); 
```

# java - 每次我尝试打开 Eclipse 时都无法创建 Java 虚拟机错误

> ID：10343312
> 
> 赞同：1
> 
> 时间：2012-04-27T00:44:53.723
> 
> 标签：java, eclipse, virtual-machine

![在此处输入图像描述](../Images/e02dc6fb2b37a8fb56234af4132cb153.png)

我尝试了在堆栈和谷歌的其他地方找到的各种不同的解决方案，每次尝试打开 Eclipse 时，我都会收到相同的错误消息。它已经运行了好几年，然后三天前我关闭了它。今天我试图重新打开它，但我不断收到消息。这是来自 Eclipse.ini 文件的代码。我使用的是 Mac 版本 10.6.8。这是一个屏幕截图。任何帮助，将不胜感激。

```
 -startup
  ../../../plugins/org.eclipse.equinox.launcher_1.2.0.v20110502.jar
  --launcher.library
  ../../../plugins/org.eclipse.equinox.launcher.cocoa.macosx_1.1.100.v20110502
  -product
  org.eclipse.epp.package.java.product
  --launcher.defaultAction
  openFile
 -showsplash
 org.eclipse.platform
 --launcher.XXMaxPermSize
 256m
 --launcher.defaultAction
 openFile
-vmargs
-Dosgi.requiredJavaVersion=1.5
-XstartOnFirstThread
-Dorg.eclipse.swt.internal.carbon.smallFonts
-XX:MaxPermSize=256m
-Xms40m
-Xmx384m
-Xdock:icon=../Resources/Eclipse.icns
-XstartOnFirstThread
-Dorg.eclipse.swt.internal.carbon.smallFonts 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-16T19:49:36.997

可能是Java不是最新的。转到 Mac 上的软件更新并更新 Java。在其他论坛上尝试了所有其他方法后，这终于奏效了！ [http://java.com/en/download/apple_manual.jsp?locale=en](http://java.com/en/download/apple_manual.jsp?locale=en)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-09T09:02:29.110

尝试删除**--launcher.XXMaxPermSize**之后的行： **256m**

# python - 如何重定向到另一个应用程序中的视图并仍然传递参数（Django）

> ID：10343313
> 
> 赞同：1
> 
> 时间：2012-04-27T00:45:11.113
> 
> 标签：python, django, url, redirect, view

有人问了像这样的另一个问题，但我不“喜欢”这个答案（实际上它一开始并没有真正回答这个问题）：[任何人都可以解释我如何将 arg 或 kwargs 从重定向传递到另一个看法？](https://stackoverflow.com/questions/6581351/can-any-one-explain-how-can-i-pass-arg-or-kwargs-from-redirect-to-another-view))

我有一个视图，需要重定向到另一个视图（在另一个应用程序中）并且仍然发送一个参数。目前我有：

```
return redirect('/projects/', login_error=error) 
```

哪个不起作用（重定向发生但参数没有通过）。甚至可以使用 来做到这一点`redirect()`吗？文档上没有任何内容。

但是，我也尝试在不使用 URL 的情况下引用视图：

```
return redirect('projects.views.list_all', login_error=error) 
```

但这也行不通。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T00:51:39.520

[`redirect`](https://docs.djangoproject.com/en/dev/topics/http/shortcuts/#redirect)返回到提供的 URL 的 HTTP 重定向 - 即，浏览器接收 30x 响应并启动新请求。

要保留两个请求之间的状态，您需要设置会话变量（根据另一个答案）或提供查询参数，例如：

```
return redirect('/projects/?login_error=error') 
```

然后，您将需要`request.GET`在另一个视图中处理传入参数。

# ruby-on-rails - RestKit & iOS, JSON, Rails - 如何将类的实例映射到字典/哈希中，以便通过唯一标识符轻松选择

> ID：10343314
> 
> 赞同：0
> 
> 时间：2012-04-27T00:45:31.653
> 
> 标签：ruby-on-rails, ios, ruby, xcode, restkit

我有一个与 Rails 应用程序交互的基本 iOS 应用程序。这里的想法是从我在 Rails 中设置的`channel`RESTful路由加载所有对象。`/channels.json`

我想将所有`Channel`对象加载到 Xcode 中的 NSDictionary 中，以便可以使用 ActiveRecord 生成的 Channel 对象的 ID 轻松识别它们——类似于`[dictionary objectForKey:@"1"]`

将所有对象加载到 NSArray 中我没有遇到任何问题`Channel`，但是让它们加载到 NSDictionary 中却很困难。我已经实现了 RestKit 的`didLoadObjectDictionary`委托方法，并将我的 JSON 响应设置如下：[https ://gist.github.com/2504664](https://gist.github.com/2504664)

我相信我的映射设置不正确。对象的映射`Channel`设置如下：[https ://gist.github.com/2504667](https://gist.github.com/2504667)

调用该`didLoadObjectDictionary`方法时，对象 NSDictionary 包含 0 个键/值对。

如何将所有`Channel`对象加载到 NSDictionary 中，以便我可以使用`objectForKey`如上所述的方法轻松引用它们？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T16:19:09.270

您仍然可以使用谓词从 nsarray 中获取内容：

```
[someArray filteredArrayUsingPredicate:[NSPredicate predicateWithFormat:@"id = %@", someId]]; 
```

它返回另一个 NSArray（它应该有一个对象）。

或者，您可以使用 restkit 的 coredata 映射，然后简单地通过 ID 从核心数据中获取对象。

# android - 检测文本副本的 Android 后台服务

> ID：10343317
> 
> 赞同：0
> 
> 时间：2012-04-27T00:45:49.173
> 
> 标签：android

我想开发一个应用程序，对剪贴板上复制的文本进行一些处理。

我想阻止用户复制文本、切换到我的应用程序、粘贴文本和单击进程。该过程将立即完成，因为用户只需将文本复制到剪贴板上。然后他会继续申请，看看他制作的文本副本上完成的过程。

有没有办法在剪贴板上的文本副本上有一种监听器？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-04-17T07:40:15.880

1.[`ClipboardManager.OnPrimaryClipChangedListener`](http://developer.android.com/reference/android/content/ClipboardManager.OnPrimaryClipChangedListener.html)用于在任何应用中复制文本时触发回调。

2.触发文本复制事件时启动您的应用程序

3.[`ClipboardManager.getPrimaryClip ()`](http://developer.android.com/reference/android/content/ClipboardManager.html#getPrimaryClip())用于在您的应用程序中获取复制的文本。根据需要使用文本。

你完成了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T01:07:37.603

覆盖编辑文本字段上的长按事件。查看[这篇](https://stackoverflow.com/questions/4181309/android-long-press-on-edit-text-behavior)文章，了解如何操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T00:50:01.750

你提到的方式听起来太侵入性了。另一种方法是在进入您的应用程序时解析每个“击键”。如果它进来太快，那么不要接受它被粘贴的理论。

# java - 相互依赖的类之间的泛型类型冲突

> ID：10343324
> 
> 赞同：3
> 
> 时间：2012-04-27T00:46:49.267
> 
> 标签：java, generics, junit

我正在尝试为我的表达式树编写 JUnit 测试。树由 BaseExpressionTree<ValueType>（终端节点）、ExpressionOperator<T>（非终端节点）和 CompositeExpressionTree<ValueType>（子树）组成。

数据结构应该与 String、Double 和 List<String> 或 List<Double> 作为 BaseExpression（终端叶）兼容。

这些类是用泛型实现的。Double 和 String 实现没有问题，但是 List< String> 和 List< Double> 实现会导致与泛型发生冲突。

问题的核心是 ListOperator 构造函数。ListOperator 用于表示对 ArrayList 和 LinkedList 等结构的操作。我想声明类如下：

```
public class ListOperator<List<T>> implements ExpressionOperator<List<T>>{ 
```

...

但相反，我只能将其声明如下：

```
public class ListOperator< T> implements ExpressionOperator<List<T>>{
    // a private field to store the String or Double operator to be used on the lists
    private ExpressionOperator<T> scalarOperator;

    /**
     * a constructor that takes one expression operator and stores it in the scalarOperator variable
     * @param       operator        an operation to be executed on a set of List operands
     */
    public ListOperator (ExpressionOperator<T> operator){
        this.scalarOperator=operator;
    }
} 
```

基本上 ListOperator 中的 < T> （表示列表）与 ExpressionOperator 中的 < T> （应该表示列表中的内容）冲突。

Eclipse 给出以下错误输出：

```
The constructor ListOperator<List<Double>>(DoubleOperator) is undefined 
```

有没有不涉及使用通配符的解决方案？作业说明相当明确，类定义的泛型是它们在提示中的描述方式。

我可以在构造函数参数中使用通配符，但到目前为止我还不能这样做。

```
 public ListOperator (? extends ExpressionOperator<T> operator){ 
```

和

```
 public ListOperator (< ? extends ExpressionOperator<T>> operator){ 
```

两者都给出错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T01:56:13.850

我认为您的问题与使用`ArrayList<Double>`类型`ValueType`参数有关，而不是`List<Double>`，这会导致与`ListOperator`.

尝试使用`List<Double>`无处不在而不是`ArrayList<Double>`.

更新：

你的`ListOperator`班级应该看起来像

```
public class ListOperator<T> implements ExpressionOperator<List<T>> { 
    // unchanged
  ...
  public ListOperator(ExpressionOperator<T> operator) {
    ...
  }
} 
```

你应该将它调用为`new ListOperator<Double>(myDoubleOperator)`.

# performance - 我可以从应用程序本身获取 asp.net MVC 3 应用程序的所有性能指标吗？

> ID：10343330
> 
> 赞同：0
> 
> 时间：2012-04-27T00:47:51.310
> 
> 标签：performance, asp.net-mvc-3, metrics, appharbor

所以假设我在某个地方的云中托管了一个 MVC 应用程序，这意味着我无法访问 IIS 或任何基础设施。

我所能控制的只是应用程序代码本身，以及归结为客户端的内容。

## 我的目标

是随着时间的推移收集 MVC 应用程序在响应时间方面的性能数据。

## 当前问题

我可以从 Google Analyics 和其他客户端技巧中获得大量数据，但这并不能说明 App Pool 是否经常回收。

同样，如果我在动作中设置秒表，这不会告诉我应用程序启动中的任何延迟（如果它必须重新启动）。

此外，如果我确实在操作中放置了秒表，它不会考虑重新渲染视图的任何延迟。例如，即使这是不好的做法，也可能会从视图进行数据库调用，而我的操作指标不会考虑到这一点。

## 我的问题

因此，如果我想获得来自多个客户和用户的请求持续多长时间的真实指标，那么除了应用程序中的秒表之外，哪里是最好的地方。或者是否不可能从应用程序本身获得真正的指标，我必须在应用程序之外放置计数器（如在 IIS 中）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T09:19:25.473

添加 New Relic，它作为 AppHarbor 服务的一部分免费提供 - [https://appharbor.com/addons/newrelic](https://appharbor.com/addons/newrelic)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T01:34:52.060

既然您提到“在某处的云中”，您是否使用 Microsoft Azure 进行托管？如果是这样，您可以使用 DiagnosticsMonitorConfiguration 记录到 Azure 存储中的一些很棒的[诊断](http://msdn.microsoft.com/library/ee773149)。

[这是](http://blogs.msdn.com/b/walterm/archive/2011/02/01/setting-up-performance-counters-in-your-web-and-worker-roles.aspx)有关如何将诊断添加到您的网络和辅助角色的教程。[您可以在MSDN](http://msdn.microsoft.com/en-us/library/windowsazure/hh411520.aspx)上找到性能计数器的完整列表

您可以从每秒应用程序请求、内存和 CPU 利用率、网络适配器统计信息、输出缓存命中/未命中、请求执行时间等方面获取所有信息。

# acs - 为什么每次调试项目时 Azure ACS 都需要身份验证？

> ID：10343331
> 
> 赞同：0
> 
> 时间：2012-04-27T00:47:51.787
> 
> 标签：acs

当您在 Visual Studio 中开发 Azure webrole 时，每次按 F5 运行项目并等待 Azure 开发环境启动，然后我需要访问登录页面并通过 Azure ACS 身份验证过程。需要做什么才能使 ACS 身份验证状态在编译和调试会话中保持不变？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T08:16:54.133

您可以将 ACS 令牌缓存在浏览器的 cookie 中，并使其在浏览器关闭后仍然存在。然后修改您的服务应用程序，以便它检查 cookie 中的令牌是否有效并且是否已过期。然后决定是否需要请求用户登录。只要确保每次都验证令牌。

BR，阿尔温德

# javascript - Javascript 打破 Internet Explorer 中属性的空值 - 如何让 IE 忽略这一点？

> ID：10343334
> 
> 赞同：0
> 
> 时间：2012-04-27T00:48:09.430
> 
> 标签：javascript, null, internet-explorer-9

Internet Explorer 正在为以下代码生成此错误：

`SCRIPT5007: Unable to get value of the property '0': object is null or undefined` `for "document.getElementById('files').files[0]`"

...files[0] 为空是正确的，但我不在乎，我怎么能告诉 IE 不在乎呢？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T00:52:22.543

```
var elem = document.getElementById('files'),
    file = elem.files && elem.files[0]; 
```

如果文件未定义，这将短路并返回`undefined`，否则将返回第一个文件。

澄清一点，错误表明这`files`是未定义的变量并且访问属性`0`会导致错误。如果它是`files[0]`它自己，则表达式只会返回`undefined`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-27T00:51:57.050

尝试...

```
var file;
if (document.getElementById('files').files){
    file = document.getElementById('files').files[0];
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-25T16:45:26.950

这已经很老了，但我想为像我一样来到这里的任何人回答

As Dennis says the error indicates that files is an undefined variable and I'm pretty sure that the problem is IE9 doesn't support files property.

As you can see [here](http://msdn.microsoft.com/en-us/library/ie/hh772931%28v=vs.85%29.aspx) IE10 is requiered for.

So try this:

```
var file; 
try{
   file = document.getElementById('files').files[0];
}catch(error){
   file= null;
} 
```

PS: I apologize for my poor English

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-27T00:53:11.343

```
var file = document.getElementById('files').files[0] || "undefined"; 
```

# ruby-on-rails - 让 url 助手拥有正确的域以在 Heroku 上暂存应用程序

> ID：10343336
> 
> 赞同：1
> 
> 时间：2012-04-27T00:48:42.907
> 
> 标签：ruby-on-rails, heroku, production, staging

我有一个域 www.example.com 和一个托管在 heroku 上的应用程序。我在链接回应用程序页面的电子邮件中使用 url 助手。对于生产，即 www.example.com/etc。

我也在 heroku 上设置了临时部署，位于 adjective-noun-xxxx。在登台中使用应用程序时，我希望 url 帮助程序链接到 adjective-noun-xxxx.herokuapp.com/etc 上的登台应用程序，但是在登台时使用它们仍然指向 www.example.com/etc，并且因此我的登台应用程序无法正常工作。

如何让暂存应用程序中的 url 帮助程序包含暂存应用程序域，而不是生产应用程序域？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T05:55:55.120

在这个 railscast 中，这被覆盖了。

[http://railscasts.com/episodes/312-sending-html-email](http://railscasts.com/episodes/312-sending-html-email)

# php - DDD、PHP 和存储库

> ID：10343342
> 
> 赞同：-3
> 
> 时间：2012-04-27T00:49:49.297
> 
> 标签：php, domain-driven-design

我正在研究 PHP 和 DDD。在我看来，存储库模式与 PHP 并不特别相关，因为 PHP 具有无共享架构。我对吗？

我并不是说它不适用，只是它不像在请求之间共享对象的语言那样中心......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T01:49:14.383

这可能会有所帮助： http: [//phpmaster.com/handling-collections-of-aggregate-roots/](http://phpmaster.com/handling-collections-of-aggregate-roots/)

# sql - SQL 将多行的单元格合并到一个单元格中

> ID：10343344
> 
> 赞同：4
> 
> 时间：2012-04-27T00:50:01.207
> 
> 标签：sql, tsql

类似于这里的问题： [http](http://forums.asp.net/t/1580379.aspx/1) ://forums.asp.net/t/1580379.aspx/1 我正在尝试将常见单元格合并到一个以逗号分隔的单元格中，但是通过内部连接。

我的 SQL 是：

```
SELECT DISTINCT tb_Order.OrderNumber, tb_Order.OrderId, 
  tb_Order.orderDate, tb_Order.OrderTotal, 
  tb_OrderStatus.OrderStatus, tb_Order.GroupOrderId, 
  tb_Venue.Title AS Venue
FROM tb_Order INNER JOIN tb_OrderItem ON tb_Order.OrderId = tb_OrderItem.OrderId 
  INNER JOIN tb_Show ON tb_OrderItem.ShowId = tb_Show.showId 
  INNER JOIN tb_OrderStatus ON tb_Order.OrderStatusId = tb_OrderStatus.OrderStatusID 
  INNER JOIN tb_Venue ON tb_Show.VenueId = tb_Venue.id
WHERE (tb_Order.OrderId = 705) 
```

![在此处输入图像描述](../Images/d583f874be66467ed4cb7792cf0a1151.png)

我需要 [venue] 以逗号分隔，例如：

```
"Interactive Seating Chart Advanced, Interactive Seating Chart Mode Multi-Click" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2020-10-22T15:10:28.317

如果您有 SQL Server 2017 (14.x) 及更高版本，则可以使用[STRING_AGG](https://docs.microsoft.com/en-us/sql/t-sql/functions/string-agg-transact-sql?view=sql-server-ver15)函数。

```
SELECT tb_Order.OrderNumber, tb_Order.OrderId, 
  tb_Order.orderDate, tb_Order.OrderTotal, 
  tb_OrderStatus.OrderStatus, tb_Order.GroupOrderId, 
  STRING_AGG(tb_Venue.Title, ',') AS Venue
FROM tb_Order INNER JOIN tb_OrderItem ON tb_Order.OrderId = tb_OrderItem.OrderId 
  INNER JOIN tb_Show ON tb_OrderItem.ShowId = tb_Show.showId 
  INNER JOIN tb_OrderStatus ON tb_Order.OrderStatusId = tb_OrderStatus.OrderStatusID 
  INNER JOIN tb_Venue ON tb_Show.VenueId = tb_Venue.id
WHERE (tb_Order.OrderId = 705)
GROUP BY tb_Order.OrderNumber, tb_Order.OrderId, 
  tb_Order.orderDate, tb_Order.OrderTotal, 
  tb_OrderStatus.OrderStatus, tb_Order.GroupOrderId 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T01:36:26.937

一种方法是使用行处理顺序的副作用来迭代地填充变量，就像这样。这样做的缺点是它不能在简单的查询上下文中工作，也不是最有效的解决方案。

```
 DECLARE @venues varchar(max)
      SET @venues = '' 

    SELECT @venues = 
      CASE WHEN @venues = '' THEN v.Title 
      ELSE @venues + ',' + v.Title END
    FROM tb_Venue v 

    SELECT @venues 
```

第二种方法是使用`STUFF`SQL Server XML 扩展，如下所示：

```
 SELECT DISTINCT v.Title,
        (STUFF(
        (SELECT ',' + v2.Title
         FROM tb_Venue v2
        -- uncomment this line if you are going 
        -- to aggregate only by something in the outer query
        -- WHERE v2.GroupKey = v.GroupKey  
         ORDER BY v2.Title
         FOR XML PATH(''), TYPE, ROOT
        ).value('root[1]','varchar(max)'),1,1,'')) as Aggregation
        FROM tb_Venue v 
```

基于 CLR 的解决方案通常是此用例中性能最高的解决方案，[此处](http://www.simple-talk.com/sql/t-sql-programming/concatenating-row-values-in-transact-sql/)描述了其中一个解决方案以及大量其他不太理想的解决方案......

您的问题不是根源于集合逻辑，因此没有干净的 SQL 解决方案......

# asp.net - 在提交数据之前，JQuery UI 模型对话框正在清除我的单选按钮？

> ID：10343347
> 
> 赞同：0
> 
> 时间：2012-04-27T00:50:08.443
> 
> 标签：asp.net, radio-button, jquery-ui-dialog

我的 JQueryUI 模型对话框有一些单选按钮和输入框，因此用户可以选择下载信息的日期范围。

该对话框由两个按钮初始化，下载和取消。下载按钮的函数通过评估其 HREF 属性触发 ASP.NET 链接按钮提交，然后调用“dialog('close')”关闭模型对话框。

问题是......某些下载选项的单选按钮在数据提交之前被清除。

为什么 JQueryUI 对话框在关闭时会清除单选按钮（但不是文本字段？）？它不应该清除任何 IMO，这应该取决于我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T22:46:57.223

似乎这是我与 jQueryUI 一起使用的 jQuery 版本中的一个错误。更新到最新版本的 jQuery 使这个问题消失（从 1.5.2 到 1.7.2）。具体来说，它在恢复对话中重建对象的状态时遇到了问题。

# c# - 如果 net.tcp 在同一台机器上，它会切换到 net.pipe（又名命名管道）吗？

> ID：10343349
> 
> 赞同：1
> 
> 时间：2012-04-27T00:50:49.423
> 
> 标签：c#, wcf

有人曾经告诉我，在 WCF 中，如果您使用 net.tcp 绑定但连接到实际上位于 localhost 上的服务，它实际上将使用下面的 net.pipe 绑定。我不确定服务的地址是否需要是localhost，本地IP等。

这是真的？有没有人测试过这个？有开销吗？
使用 net.tcp 进程间会打开一个返回本地机器的套接字吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T01:04:41.317

我很确定它不会那样做。当事情不像你期望的那样工作时，这将是非常令人困惑的。

# c - 是否存在用于 POSIX 文件名匹配 (fnmatch) 的已知 O(nm)-时间/O(1)-空间算法？

> ID：10343351
> 
> 赞同：18
> 
> 时间：2012-04-27T00:50:59.967
> 
> 标签：c, regex, string, pattern-matching, substring

**编辑：**哎呀！大承认，我搞砸了`?`in`fnmatch`模式语法的定义，似乎已经提出（并且可能解决了）一个更困难的问题，它的行为就像`.?`在正则表达式中一样。当然，它实际上应该表现得像`.`正则表达式（只匹配**一个**字符，而不是零或一）。这反过来意味着我最初的减少问题的工作足以解决（现在相当无聊的）原始问题。解决更难的问题仍然很有趣。有时间我可能会写出来。

从好的方面来说，这意味着像 2way/SMOA 针分解这样的东西更有可能适用于这些模式，这反过来可能会产生比最初想要的`O(n)`甚至更好的`O(n/m)`性能。

* * *

在问题标题中，设`m`图案/针`n`的长度和与之匹配的字符串的长度。

我对这个问题很感兴趣，因为我见过/使用的所有算法要么性能不佳，要么由于回溯而可能存在堆栈溢出漏洞，或者需要动态内存分配（例如，对于 DFA 方法或只是避免在调用上进行回溯stack），因此如果程序`fnmatch`用于授予/拒绝某种访问权限，则失败情况也可能很危险。

我愿意相信正则表达式匹配不存在这样的算法，但文件名模式语言比正则表达式简单得多。我已经将问题简化到可以假设模式不使用`*`字符的程度，并且在这个修改后的问题中，您不是匹配整个字符串，而是在字符串中搜索模式的出现（如子字符串匹配问题）。如果进一步简化语言并去掉`?`字符，语言只是由固定字符串和括号表达式的串联组成，这可以很容易地在`O(mn)`时间和 O(1) 空间上匹配，也许可以改进为`O(n)`如果 2way 和 SMOA 子字符串搜索中使用的针分解技术可以扩展到这种括号模式。然而，天真地每个都`?`需要使用或不`?`使用字符的试验，带来一个时间因素，`2^q`即模式中的字符`q`数。`?`

任何人都知道这个问题是否已经解决，或者有解决它的想法？

注意：在定义 O(1) 空间时，我使用的是[Transdichotomous_model](http://en.wikipedia.org/wiki/Transdichotomous_model)。

注 2：本网站详细介绍了我引用的 2way 和 SMOA 算法：[http ://www-igm.univ-mlv.fr/~lecroq/string/index.html](http://www-igm.univ-mlv.fr/~lecroq/string/index.html)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T08:22:17.757

您是否研究`re2`过 Russ Cox（来自 Google）的正则表达式引擎？

它是一个基于确定性有限自动机的正则表达式匹配引擎，不同于通常的实现（Perl、PCRE）使用回溯来模拟非确定性有限自动机。具体设计目标之一是消除您提到的灾难性回溯行为。

它不允许某些 Perl 扩展，例如搜索模式中的反向引用，但对于 glob 匹配，您不需要它。

我不确定它是否特别保证`O(mn)`了时间和`O(1)`内存限制，但它足以在存在时运行 Google 代码搜索服务。

至少看看里面看看它是如何工作的应该很酷。[Russ Cox 写了](http://swtch.com/~rsc/regexp/regexp1.html)三篇关于`re2`一、[二](http://swtch.com/~rsc/regexp/regexp2.html)、[三](http://swtch.com/~rsc/regexp/regexp3.html)的文章，并且[代码](http://code.google.com/p/re2/)是开源的。[`re2`](http://code.google.com/p/re2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T23:17:33.483

**编辑：**哎呀！大承认，我搞砸了`?`in`fnmatch`模式语法的定义，似乎已经解决了一个更困难的问题，它的行为就像`.?`在正则表达式中一样。当然，它实际上应该表现得像`.`正则表达式（只匹配**一个**字符，而不是零或一）。这反过来意味着我最初的减少问题的工作足以解决（现在相当无聊的）原始问题。解决更难的问题仍然很有趣。有时间我可能会写出来。

更难的问题的可能解决方案如下。

* * *

我已经计算出似乎是`O(log q)`空间中的解决方案（`q`模式中问号的数量在哪里，因此`q`< `m`）以及不确定但似乎优于指数的时间。

首先，快速解释一下问题的减少。首先在每个处打破模式`*`；它分解为（可能为零长度）初始和最终组件，以及两侧两侧为 a 的许多内部组件`*`。这意味着一旦我们确定初始/最终组件是否匹配，我们可以应用以下算法进行内部匹配：从最后一个组件开始，在字符串中搜索从最新偏移量开始的匹配。这使得最可能的“干草堆”字符可以自由地匹配早期的组件；如果它们不是全部都需要，那没问题，因为`*`干预的事实允许我们以后根据需要扔掉尽可能多的东西，所以尝试“使用更多`?`最后一个组件的标记”或找到它的较早出现。然后可以对每个组件重复此过程。请注意，在这里我强烈利用了`fnmatch`表达式中唯一的“重复运算符”是`*`匹配的事实*任何*字符出现零次或多次。同样的减少不适用于正则表达式。

解决了这个问题，我开始寻找如何有效地匹配单个组件。我允许时间因子为`n`，这意味着可以在字符串中的每个可能位置开始尝试，如果失败则放弃并移至下一个位置。这是我们将采用的一般程序（还没有类似 Boyer-Moore 的技巧；也许以后可以引入）。

对于给定的组件（不包含`*`，仅包含文字字符、与给定集合中的一个字符完全匹配的括号和`?`），它具有可以匹配的最小和最大长度字符串。如果省略所有`?`字符并将括号表达式计为一个字符，则最小值是长度，如果包含`?`字符，则最大值是长度。在每个位置，我们将尝试模式组件可以匹配的每个可能的长度。这意味着我们进行`q+1`试验。对于以下解释，假设长度保持固定（它是最外层循环，在即将引入的递归之外）。这也修复了我们将要与此时的模式进行比较的字符串的长度（以字符为单位）。

现在这是有趣的部分。我不想遍历所有可能使用`?`/不使用哪些字符的组合。迭代器太大而无法存储。所以我作弊。我将模式组件分成两个“半”，`L`并且`R`，其中每个包含一半的`?`字符。然后我简单地迭代使用多少个`?`字符的所有可能性`L`（从 0 到将根据上面固定的长度使用的总数），然后也确定`?`使用的字符数。`R`这也将我们尝试匹配的字符串划分为将与 pattern`L`和 pattern匹配的部分`R`。

现在，我们将检查带有字符的模式组件是否匹配特定的固定长度字符串的问题减少为检查带有字符的模式组件是否匹配特定的较小固定长度`q` `?`字符串的两个实例。`q/2` `?`应用递归。并且由于每一步都将`?`涉及的字符数减半，因此递归级别的数量为`log q`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T04:16:02.927

好的，这就是我解决问题的方法。

1.  尝试将模式的初始部分匹配到`*`字符串的第一个部分。如果这失败了，保释。如果成功，则丢弃模式和字符串的初始部分；我们已经完成了他们的工作。（如果我们在点击 a 之前点击了模式的结尾，那么`*`如果我们也到达了字符串的结尾，我们就有了一个匹配项。）

2.  一直跳到模式的结尾（最后一个 之后的所有内容`*`，如果模式以 a 结尾，则可能是零长度模式`*`）。计算匹配它所需的字符数，并从字符串末尾检查那么多字符。如果他们不匹配，我们就完成了。如果它们匹配，则丢弃模式和字符串的这个组件。

3.  现在，我们留下了一个（可能是空的）子模式序列，所有这些子模式的两侧都有`*`'s. 我们尝试在字符串的剩余部分中按顺序搜索它们，为每个匹配获取第一个匹配项，并在匹配项中丢弃字符串的开头。如果我们以这种方式找到每个组件的匹配项，我们就有了整个模式的匹配项。如果任何组件搜索失败，则整个模式将无法匹配。

该算法没有递归，并且仅在字符串/模式中存储有限数量的偏移量，因此在跨二分模型中它是 O(1) 空间。第 1 步是 O(m) 时间，第 2 步是 O(n+m) 时间（或者 O(m)，如果我们假设输入字符串长度已知，但我假设一个 C 字符串），并且步骤3 是（使用朴素搜索算法）O(nm)。因此，整个算法在时间上是 O(nm)。可以将第 3 步改进为 O(n)，但我还没有尝试过。

最后，请注意最初的更难的问题可能仍然有用解决。那是因为我没有考虑多字符整理元素，大多数实现正则表达式的人往往会忽略这些元素，因为它们很难正确正确，并且没有标准 API 可以与系统语言环境交互并获取必要的信息来获取他们。但话虽如此，这里有一个例子：假设`ch`是一个多字符整理元素。然后`[c[.ch.]]`可以消耗 1 或 2 个字符。我们又回到了需要我在原始答案中描述的更高级的算法，我认为这需要`O(log m)`空间，而且可能比`O(nm)`时间还多（我猜`O(n²m)`最好）。目前我对实现多字符整理元素支持没有兴趣，但它确实留下了一个很好的悬而未决的问题......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-27T07:37:19.357

您可以创建两个字符串的哈希值，然后进行比较。哈希计算将在 O(m) 中完成，而搜索在 O(m + n) 中完成

### 您可以使用类似这样的方法来计算 s[i] 是字符的字符串的哈希值

```
s[0]*31^(n-1) + s[1]*31^(n-2) + ... + s[n-1] 
```

正如您所说，这是用于文件名匹配的，您不能在字符串中有通配符的情况下使用它。祝你好运！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-27T12:09:14.070

我的感觉是这是不可能的。

虽然我不能提供一个无懈可击的论点，但我的直觉是，您将始终能够构建包含 q=Theta(m)`?`字符的模式，在某种意义上，算法需要考虑所有 2 ^q 个可能性。这将需要 O(q)=O(m) 空间来跟踪您当前正在查看的可能性。例如，NFA 算法使用这个空间来跟踪它当前所处的状态集；蛮力回溯方法使用空间作为堆栈（为了增加伤害，除了空间的 O(q) 之外，它还使用 O(2^q) 时间）。

# grails - Grails 2.0：禁用资源的所有日志记录

> ID：10343353
> 
> 赞同：0
> 
> 时间：2012-04-27T00:51:07.333
> 
> 标签：grails, log4j

是否有可能以及如何禁用资源的所有日志记录？例如：

> 错误 2012-04-26 19:48:00,929 [pool-5-thread-1] 错误 resource.ResourceMeta - 在处理 /bundle-bundle_core_head.css、/css/main.css、/lib/bootstrap/css/bootstrap 时。 min.css，需要但未找到资源：/images/go-dn-on.gif

我很高兴我拥有它，所以我可以修复它，但我真的想阻止它出现在日志文件中，尽管我仍然需要显示其他所有内容的错误级别。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-13T07:57:40.167

在 Config.groovy log4j 部分添加行

```
off 'org.grails.plugin.resource.ResourceMeta' 
```

尝试以下禁用所有日志

```
off 'grails.app.services.org.grails.plugin.resource',
'grails.app.taglib.org.grails.plugin.resource',
'grails.app.resourceMappers.org.grails.plugin.resource' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T01:10:37.587

在*Config.groovy的**appenders*部分添加以下 appender：

 *```
 'null' name: 'empty' 
```

然后，在 log4j 部分将错误消息从资源重定向到此附加程序：

```
error empty: ['grails.app.services.org.grails.plugin.resource',
    'grails.app.taglib.org.grails.plugin.resource',      
    'grails.app.resourceMappers.org.grails.plugin.resource'] 
```

这应该可以解决问题。*

# glassfish - 无法实例化 InitialContext

> ID：10343355
> 
> 赞同：0
> 
> 时间：2012-04-27T00:51:19.657
> 
> 标签：glassfish, jms

我有一个类作为 Glassfish V3 JMS 队列的独立客户端。这个类在我的本地主机上运行良好，即 glassfish 服务器和独立客户端都在我的本地 PC 上。

现在我需要在 Linux 机器上安装这个客户端。Glassfish V3 已经在这台 Linux 机器上运行。我已经`appserv-rt.jar`从 glassfish 安装目录添加并添加到standlaone客户端目录并设置类路径。但我不断收到此错误：

```
javax.naming.NoInitialContextException: Cannot instantiate class: com.sun.enterprise.naming.SerialInitContextFactory [Root exception is java.lang.ClassNotFoundException: com.sun.enterprise.naming.SerialInitContextFactory]
        at javax.naming.spi.NamingManager.getInitialContext(NamingManager.java:657)
        at javax.naming.InitialContext.getDefaultInitCtx(InitialContext.java:288)
        at javax.naming.InitialContext.init(InitialContext.java:223)
        at javax.naming.InitialContext.<init>(InitialContext.java:197)
        at com.cisco.zbl.controller.ZblBulkUploadThread.run(ZblBulkUploadThread.java:55)
        at java.lang.Thread.run(Thread.java:662)
Caused by: java.lang.ClassNotFoundException: com.sun.enterprise.naming.SerialInitContextFactory
        at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:307)
        at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:248)
        at java.lang.Class.forName0(Native Method)
        at java.lang.Class.forName(Class.java:247)
        at com.sun.naming.internal.VersionHelper12.loadClass(VersionHelper12.java:46)
        at javax.naming.spi.NamingManager.getInitialContext(NamingManager.java:654)
        ... 5 more 
```

这是我的Java代码：

```
 public class ZblBulkUploadThread implements Runnable,MessageListener{

    private static final Category log = Category.getInstance(ZblBulkUploadThread.class) ;

            private Queue queue;

    public void run()
    {
            try
            {
                    ZblConfig zblConfig = new ZblConfig() ;

                    InitialContext jndiContext = null;

                    MessageConsumer messageConsumer=null;

                    Properties props = new Properties();
            props.setProperty("java.naming.factory.initial",  "com.sun.enterprise.naming.SerialInitContextFactory");
            props.setProperty("java.naming.factory.url.pkgs",  "com.sun.enterprise.naming");
            props.setProperty("java.naming.factory.state", "com.sun.corba.ee.impl.presentation.rmi.JNDIStateFactoryImpl");

                    jndiContext = new InitialContext(props);

                    log.debug(zblConfig.getProperty("JMSConnectionFactoryName")) ;

                    //System.setProperty("java.naming.factory.initial","com.sun.jndi.ldap.LdapCtxFactory");

                    ConnectionFactory connectionFactory = (ConnectionFactory)jndiContext.lookup(zblConfig.getProperty("JMSConnectionFactoryName"));

                    Connection connection = connectionFactory.createConnection();

                    Session session = connection.createSession(false,Session.AUTO_ACKNOWLEDGE);

                    queue = (Queue)jndiContext.lookup(zblConfig.getProperty("JMSQueueName")) ;

                    messageConsumer = session.createConsumer(queue);

                    connection.start();

                    while(true)
                    {

                            Message message = messageConsumer.receive() ;

                            ObjectMessage om = ((ObjectMessage)message) ;
                            try
                            {

                                    RedirectFile file = (RedirectFile)om.getObject() ;

                                    log.debug("filePath "+file.getFilePath()) ;
                                    log.debug(" userName "+file.getUserName()) ;
                                    log.debug(" mode is "+file.getMode()) ;

                                    processMessage(file,zblConfig) ;

                            }
                            catch(Exception ex)
                            {
                                    log.error("ERROR "+ex.getMessage()) ;
                                    ex.printStackTrace() ;
                            }
                    }

            }
            catch(Exception ex)
            {

                    ex.printStackTrace() ;
                    log.error("Error "+ex.getMessage()) ;
            }
    } 
```

错误出现在这一行：`jndiContext = new InitialContext(props);`

如果我使用`InitialContext`.

这是我的 unix shell 脚本，它调用这个 java 程序（Standlaone 客户端）：

```
 APP_HOME=/local/scripts/apps/bulkUpload;

CLASSPATH=.:$APP_HOME/lib/gf-client.jar:$APP_HOME/lib/zbl.jar:$APP_HOME/lib/log4j-   1.2.4.jar:$APP_HOME/lib/javaee.jar:$APP_HOME/lib/poi-3.8-beta5-20111217.jar:$APP_HOME/lib/poi-examples-3.8-beta5-20111217:$APP_HOME/lib/poi-excelant-3.8-beta5-20111217:$APP_HOME/lib/poi-ooxml-3.8-beta5-20111217:$APP_HOME/lib/poi-ooxml-schemas-3.8-beta5-20111217:$APP_HOME/lib/poi-scratchpad-3.8-beta5-20111217:$APP_HOME/lib/appserv-rt.jar:

 echo "CLASSPATH=$CLASSPATH";

 export APP_HOME;
 export CLASSPATH;

 cd $APP_HOME;

 #javac -d . ZblBulkUploadThread.java

 java -cp $CLASSPATH -Dzbl.properties=zbl-stage.properties    -Djava.naming.factory.initial=com.sun.enterprise.naming.SerialInitContextFactory com.cisco.zbl.controller.ZblBulkUploadThread 
```

请帮助我 - 我已经被这个问题困扰了很长时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T00:57:28.223

执行`which java` 命令并查看 jdk 是否被正确拾取。我怀疑linux选择gc4j

更新：

将此行更改 `CLASSPATH=.:$APP_HOME/lib/gf-client.jar:$APP_HOME/lib/zbl.jar:$APP_HOME/lib/log4j- 1.2.4.jar:$APP_HOME/lib/javaee.jar:$APP_HOME/lib/poi-3.8-beta5-20111217.jar:$APP_HOME/lib/poi-examples-3.8-beta5-20111217:$APP_HOME/lib/poi-excelant-3.8-beta5-20111217:$APP_HOME/lib/poi-ooxml-3.8-beta5-20111217:$APP_HOME/lib/poi-ooxml-schemas-3.8-beta5-20111217:$APP_HOME/lib/poi-scratchpad-3.8-beta5-20111217:$APP_HOME/lib/appserv-rt.jar:` 为

```
CLASSPATH=.:$APP_HOME/lib/gf-client.jar:$APP_HOME/lib/zbl.jar:$APP_HOME/lib/log4j-   1.2.4.jar:$APP_HOME/lib/javaee.jar:$APP_HOME/lib/poi-3.8-beta5-20111217.jar:$APP_HOME/lib/poi-examples-3.8-beta5-20111217:$APP_HOME/lib/poi-excelant-3.8-beta5-20111217:$APP_HOME/lib/poi-ooxml-3.8-beta5-20111217:$APP_HOME/lib/poi-ooxml-schemas-3.8-beta5-20111217:$APP_HOME/lib/poi-scratchpad-3.8-beta5-20111217:$APP_HOME/lib/appserv-rt.jar 
```

# php - 在 PHP MVC 中创建子视图

> ID：10343358
> 
> 赞同：2
> 
> 时间：2012-04-27T00:51:37.750
> 
> 标签：php, model-view-controller, view, addsubview

我最近浏览了一些关于如何编写自己的 PHP MVC 框架的教程。为了避免一些问题和评论：我不想在生产环境中使用它，我只是喜欢摆弄并了解 MVC 中发生了什么。

到目前为止，我能够拥有单页，例如。[http://domain/news/show/3](http://domain/news/show/3)向我显示了数据库中 id 为 3 的新闻记录，[http://domain/news/](http://domain/news/all) all 在一页上将它们全部列出。

现在我有多个实体，因此有多个列表，并希望它们都出现在一个页面上。[最好是打开http://domain/](http://domain/)时看到的页面

我是否必须编写一个新模型和控制器来调用其他模型？我有点不确定如何实现这一目标。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T01:09:45.797

据我所知，对此没有严格的定义或约定。

我要做的是：

# 类概述

*   **`Controller_Homepage`**

*   **`Controller_News`**

*   **`Model_NewsArticle`**

# 行为

**控制器_首页**

*   **`Action_Index`**获取多个`Model_NewsArticle`实体，渲染它们，并将输出传递给视图。还获取您可能需要的任何其他实体并将其渲染输出提供给查看。

**控制器_新闻**

*   **`Action_List`**获取多个`Model_NewsArticle`实体，渲染它们，并将输出传递给视图。
*   **`Action_View`**调用`Model_NewsArticle::factory($id)`，对其进行渲染，并将输出传递给查看。

**型号_新闻文章**

*   包含一个**`factory`**接受`$id`. 返回 的实例`Model_NewsArticle`。
*   包含用于查找多篇文章的方法。查询构建器在这里会很好。

这绝不是全面的，我遗漏了很多小细节，但它相当简单而且相当枯燥。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T01:06:08.227

这确实是一个偏好问题。拥有另一个控制器和模型使大型项目中的代码分离更容易。就个人而言，我只会制作一个新的控制器，因为它是一个不同的页面，可能有不同的操作，我会使用现有的模型来获取数据以保持你的代码干燥（不要重复你自己）。

# python - 为什么下面的代码没有给出“IndexError”？

> ID：10343368
> 
> 赞同：0
> 
> 时间：2012-04-27T00:53:07.787
> 
> 标签：python

我有以下python代码：

```
a = [0,1,2,3,4,5]
del(a[2:7]) 
```

这不应该给出“IndexError”吗？如果没有，那为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T00:54:31.470

这会将列表切片从 2 删除到 7 之前。列表切片不会引发索引错误，如果它们超出列表的末尾，它们会返回列表的整个剩余部分。

```
>>> a = list(range(10))
>>> a
[0, 1, 2, 3, 4, 5, 6, 7, 8, 9]
>>> a [5:20]
[5, 6, 7, 8, 9] 
```

# xamarin.ios - Three20 和 MonoTouch：TTTabStrip 更改颜色不起作用

> ID：10343370
> 
> 赞同：0
> 
> 时间：2012-04-27T00:53:14.363
> 
> 标签：xamarin.ios, three20

我创建了一个继承自 TTDefaultStyleSheet 的新类。

```
public class BlackStyleSheet : TTDefaultStyleSheet
{
    public BlackStyleSheet() : base()
    {
        Console.WriteLine("BlackStyleSheet created.");
    }

    public override UIColor TabBarTintColor 
    {
        get
        {
        Console.WriteLine("BlackStyleSheet.TabBarTintColor returned.");
            return UIColor.Black;
        }
    }

    [Export ("tabTintColor")]
    public override UIColor TabTintColor 
    {
        get 
        {
            Console.WriteLine("BlackStyleSheet.TabTintColor returned.");
            return UIColor.Black;
        }
    }
} 
```

我将此自定义样式表设置为我的 FinishedLaunching 方法中的默认值。

```
public override void FinishedLaunching (UIApplication application)
{
    Three20.TTStyleSheet.GlobalStyleSheet = new BlackStyleSheet();
    Three20.TTDefaultStyleSheet.GlobalStyleSheet = new BlackStyleSheet();
    Console.WriteLine("Three20 style sheet set.");
} 
```

然后，我在自己的自定义 UIViewController 的 ViewDidLoad() 方法中创建实际的 TTTabStrip 和 TTTabItem 元素。*TTTabItem 对象是在类级别而不是方法级别声明的。*

```
tab1 = new TTTabItem("1");
tab2 = new TTTabItem("2");
tab3 = new TTTabItem("3");
TabStrip = new TTTabStrip();
TabStrip.Frame = new RectangleF(0,0,View.Frame.Width, 44);
TabStrip.TabItems = NSArray.FromNSObjects(tab1,tab2,tab3);
TabStrip.SelectedTabIndex = 0;
View.AddSubview(TabStrip); 
```

当 TTDefaultStyleSheet.GlobalStyleSheet 属性设置为新的自定义样式表时，应用程序崩溃。删除此属性设置后，应用程序可以完美运行，但选项卡条仍为灰色。

在我读过的所有论坛中（似乎都没有特定于 MonoTouch），它们都表明创建自己的样式表，然后将其设置为全局样式表是可行的方法。但这似乎不适用于 MonoTouch。

有没有人有任何想法？

谢谢，

约翰·K。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T03:49:52.017

我在 XCode 中使用 Objective-C 尝试了您的示例，我可以确认这种方法确实有效。我也为自己尝试了 MonoTouch，并看到了与您报告的相同结果。

过去我在 Three20 绑定代码中发现了几个问题，这些问题似乎会导致这样的中止。您可以尝试修复现有的绑定代码或仅从 Three20 手动创建您需要的绑定。

[http://docs.xamarin.com/ios/advanced_topics/binding_objective-c_types](http://docs.xamarin.com/ios/advanced_topics/binding_objective-c_types)

# python - 在嵌套列表中添加元素

> ID：10343374
> 
> 赞同：0
> 
> 时间：2012-04-27T00:53:42.780
> 
> 标签：python

我有一个包含这样的嵌套列表的列表：

```
[ [datetime.datetime(2000, 12, 10, 0, 0), 0.0011] , [datetime.datetime(2000, 12, 11, 0, 0), 0.0013 , [datetime.datetime(2000, 12, 12, 0, 0), 0.0014]]

etc.. 
```

我该如何去添加子元素 2 by 2 像这样：

总和（0.0011,0.0013）+ 0.0014

然后取这个总和的结果并将其添加到下一个子元素？

我基本上是在尝试复合价值观。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T01:07:12.323

最简单的方法是使用[内置`sum()`和](http://docs.python.org/library/functions.html#sum)生成[器表达式](https://www.youtube.com/watch?v=t85uBptTDYY)：

```
>>>items = [[datetime.datetime(2000, 12, 10, 0, 0), 0.0011], [datetime.datetime(2000, 12, 11, 0, 0), 0.0013 ], [datetime.datetime(2000, 12, 12, 0, 0), 0.0014]]
>>>sum(item[1] for item in items)
0.0038000000000000004 
```

# 编辑：

如果要打印求和的每个阶段的结果，则要使用[`functools.reduce()`](http://docs.python.org/py3k/library/functools.html#functools.reduce)（在 2.x 中是[builtin `reduce`）](http://docs.python.org/library/functions.html#reduce)。

```
from functools import reduce
import datetime

items = [[datetime.datetime(2000, 12, 10, 0, 0), 0.0011], [datetime.datetime(2000, 12, 11, 0, 0), 0.0013 ], [datetime.datetime(2000, 12, 12, 0, 0), 0.0014]]

def add_printing_result(a, b):
    total = a+b
    print(total)
    return total

reduce(add_printing_result, (item[1] for item in items)) 
```

这给了我们：

```
0.0024000000000000002
0.0038000000000000004 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T00:56:25.663

```
sum = 0, myarr = [ [datetime.datetime(2000, 12, 10, 0, 0), 0.0011] , [datetime.datetime(2000, 12, 11, 0, 0), 0.0013] , [datetime.datetime(2000, 12, 12, 0, 0), 0.0014]]

for(i in myarr):
    sum+=i[1] 
```

我确信有更好的方法来做到这一点（我不是 Python 专家），但这应该正确地对你的值求和，这`sum`就是子元素的总和。

# java - 无法正确解析 jsp indexOf 语句

> ID：10343375
> 
> 赞同：0
> 
> 时间：2012-04-27T00:53:50.557
> 
> 标签：java

`.indexOf("://")`这个 .jsp 文件的部分似乎破坏了这个文件的正确呈现......我怎样才能逃避这个以确保它不是问题？

```
 <c:choose>
            <c:when test="${cssFile.indexOf("://") > 0}"><link rel="stylesheet" href="${cssFile}" type="text/css" /></c:when>
            <c:otherwise><link rel="stylesheet" href="/cmt/css/${cssFile}" type="text/css" /></c:otherwise>
        </c:choose> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T01:17:49.350

你可以使用

```
<%@ taglib prefix="fn" uri="http://java.sun.com/jsp/jstl/functions" %>  
...
     test='${fn:indexOf(cssFile, "://") > 0}' 
```

# php - 如何在 PHP 中获取 span 的内部文本

> ID：10343376
> 
> 赞同：0
> 
> 时间：2012-04-27T00:54:15.613
> 
> 标签：php, html

好的，我已经创建了自己的下拉框。我有一个 div，在 div 中我有一个跨度。我需要抓住那个内部跨度文本。我怎么做？跨度的文本确实发生了变化。我15岁，所以让我休息一下！我需要一些帮助！这是价值观是纠察队。

```
 <div>
 <select id="test_select" style="display:none;">
        <option value="1">Graphic Designer</option>
        <option value="2">Animator</option>
        <option value="7">Announcer</option>
        <option value="11">Web Developer</option>
        <option value="12">Judge</option>
        </select>

</div> 
```

这就是需要得到的：

```
<div class="custom-select">
    <span>Select Option</span>
    <ul>        
    </ul>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T01:10:44.407

好的，您需要的不仅仅是 PHP 来完成这项工作；您还需要 JavaScript。

让我们从您的 HTML 开始。我假设您渲染的输出如下所示，我不会质疑您为什么要这样做。

```
<div id="dropdown">
    <span>Option One</span>
    <span>Option Two</span>
    <span>Option Three</span>
</div> 
```

所以我猜你的HTML。

要将值发布回 PHP，您还需要一种方法来捕获输入字段中的选定值，该输入字段可以与表单一起发布。隐藏的输入可能是您的最佳选择。

```
<input type="hidden" name="dropdown-selection" id="dropdown-selection" /> 
```

这样我们的标记就完成了。接下来，您需要从 div 中获取所选选项并将其粘贴到隐藏字段中。我假设你已经编写了一些代码来渲染你的 div，使其看起来和行为完全像一个下拉菜单（好吧，我会咬人的。你为什么要这样做？）。

这是使用 jQuery 的 JavaScript 代码（我们只在 StackOverflow 上使用 jQuery。开个玩笑；那不是真的。好吧，也许它有点真实）

```
<script type="text/javascript">
    $(function () {
        $('#dropdown-selection').val($('#dropdown span:visible').text());
    });
</script> 
```

现在，只要您确保隐藏字段包含在回发到目标 PHP 页面的表单中，您就可以使用 span 标签的值。

关于您在此处设置页面的方式，我做了很多假设。纠正我与现实无关的任何部分。

# entity-framework-4 - 保存时关联实体未附加到父对象

> ID：10343379
> 
> 赞同：0
> 
> 时间：2012-04-27T00:54:44.103
> 
> 标签：entity-framework-4, dbcontext

我正在开发一个使用 EF 4.2 和数据库优先开发的应用程序，使用标准 T4 模板生成 DbContext 和 POCO。T4 模板生成如下实体：

```
public class Address
{
    public int AddressId { get;set; }
    public string Address1 { get;set; }
    public string City { get;set; }
}

public class Account
{
    public int AccountId { get;set; }
    public string Name { get;set; }
    public int AddressId { get;set; }
    public Address BillingAddress { get;set; }
} 
```

当我为现有帐户创建帐单地址时，我的代码如下所示：

```
public void Save(Account updated)
{
    var existing = DbContext.Find(updated.AccountId);

    MyContext.Entry(existing).CurrentValues.SetEntry(updated);
    existing.Address = updated.Address;

    MyContext.SaveChanges();
} 
```

观察 SQL Server Profiler，我可以看到地址条目被插入到数据库中，但不幸的是，它发生*在*帐户条目更新之后，因此地址与其父帐户分离，当我下次加载帐户时，计费地址又是空的。

一种解决方法是在调用 SaveChanges() 之后添加以下代码：

```
if (existing.AddressId == null && existing.Address != null)
{
    existing.AddressId = existing.Address.AddressId;
    MyContext.SaveChanges();
} 
```

虽然它可能有效，但需要对数据库进行第二次 SQL UPDATE，并且随着实体的增长和添加更多关联，需要越来越多的 hack。我有什么明显的遗漏吗？

***更新*** 在下面 Ladislav 的回答之后，我在我的 T4 模板的 WriteNavigationProperty 中添加了对以下方法的调用：

```
void WriteKeyAttribute(CodeGenerationTools code, NavigationProperty navigationProperty, MetadataTools ef)
{
    var dependentProperties = navigationProperty.GetDependentProperties();
    if (dependentProperties.Any())
    {
        var keys = new List<string>();
        foreach (var key in dependentProperties)
        {
            keys.Add(String.Format("\"{0}\"", key.Name));
        }
#>
    [ForeignKey(<#= String.Join(", ", keys) #>)]
<#+
    }
} 
```

希望有帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T08:29:49.033

听起来您的 BillingAddress 映射不正确，因为 AddressId 未作为关系的 FK 处理。

尝试将此属性添加到您的导航属性：

```
[ForeignKey("AddressId")]
public Address BillingAddress { get;set; } 
```

如果您将 EDMX 与数据库一起使用，请首先确保这些类之间存在正确配置的关系。EF 在其存储映射中使用此信息，并且存储映射定义了操作的顺序。如果您没有正确配置关系实体，则按其类型名称的字母顺序处理 =>`Account`在`Address`.

顺便提一句。你确定你的通话`Account`过程中没有重复吗？`SaveChanges`

# ruby-on-rails - Rails Migrations：试图将列的类型从字符串更改为整数

> ID：10343383
> 
> 赞同：30
> 
> 时间：2012-04-27T00:55:21.220
> 
> 标签：ruby-on-rails, ruby, postgresql, casting, rails-migrations

我使用 rails generate migrations 命令在我的 rails 应用程序中创建了一个表。这是迁移文件：

```
class CreateListings < ActiveRecord::Migration
  def change
    create_table :listings do |t|
      t.string :name
      t.string :telephone
      t.string :latitude
      t.string :longitude

      t.timestamps
    end
  end
end 
```

然后我想将纬度和经度存储为整数，所以我尝试运行：

```
rails generate migration changeColumnType 
```

该文件的内容是：

```
class ChangeColumnType < ActiveRecord::Migration
  def up
    #change latitude columntype from string to integertype
    change_column :listings, :latitude, :integer
    change_column :listings, :longitude, :integer
    #change longitude columntype from string to integer type
  end

  def down  
  end
end 
```

我期待列类型发生变化，但是 rake 被中止并出现以下错误消息。我想知道为什么这没有通过？我在我的应用程序中使用 postgresql。

```
rake db:migrate
==  ChangeColumnType: migrating ===============================================
-- change_column(:listings, :latitude, :integer)
rake aborted!
An error has occurred, this and all later migrations canceled:

PG::Error: ERROR:  column "latitude" cannot be cast to type integer
: ALTER TABLE "listings" ALTER COLUMN "latitude" TYPE integer

Tasks: TOP => db:migrate
(See full trace by running task with --trace) 
```

注意：该表没有数据。谢谢

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-04-27T01:03:41.037

我引用手册[关于`ALTER TABLE`](http://www.postgresql.org/docs/current/interactive/sql-altertable.html)：

> 如果没有从旧类型到新类型的隐式或赋值强制转换，则必须提供 USING 子句。

你需要的是：

```
ALTER TABLE 列表 ALTER longitude TYPE integer USING longitude::int ;
ALTER TABLE 列表 ALTER latitude TYPE integer USING latitude::int ;

```

或者在一个命令中更短更快（对于大表）：

```
ALTER TABLE listings ALTER longitude TYPE integer USING longitude::int
                    ,ALTER latitude  TYPE integer USING latitude::int; 
```

只要所有条目都可以转换**为**`integer`.
如果您已`DEFAULT`为该列定义了 a，则可能必须为新类型删除并重新创建它。

这是[有关如何使用 ActiveRecord 执行此操作的博客文章](http://webjazz.blogspot.com/2010/03/how-to-alter-columns-in-postgresql.html)。
或者在评论中参考@mu 的建议。他知道他的红宝石。我只对这里的 PostgreSQL 好。

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2014-05-09T17:40:18.047

我知道这有点难看，但我更喜欢删除该列并使用新类型再次添加：

```
 def change
     remove_column :mytable, :mycolumn
     add_column :mytable, :mycolumn, :integer, default: 0
 end 
```

* * *

## 回答 #3

> 赞同：24
> 
> 时间：2013-09-25T19:20:42.683

我会将原始 SQL 包含在您的迁移文件中，如下所示，以便它更新 schema.rb。

```
class ChangeColumnType < ActiveRecord::Migration
  def up
    execute 'ALTER TABLE listings ALTER COLUMN latitude TYPE integer USING (latitude::integer)'
    execute 'ALTER TABLE listings ALTER COLUMN longitude TYPE integer USING (longitude::integer)'
  end

  def down
    execute 'ALTER TABLE listings ALTER COLUMN latitude TYPE text USING (latitude::text)'
    execute 'ALTER TABLE listings ALTER COLUMN longitude TYPE text USING (longitude::text)'
  end
end 
```

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2016-04-27T19:37:27.333

以下是一个更`rails way`接近问题的方法。对于我的情况，我的购买表中有两列，我需要将它们从字符串类型转换为浮点数。

```
def change
    change_column :purchases, :mc_gross, 'float USING CAST(mc_gross AS float)'
    change_column :purchases, :mc_fee, 'float USING CAST(mc_fee AS float)'
end 
```

这对我有用。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-04-27T03:34:34.037

1.  这些列中是否有现有数据？
2.  您不应该将 int 用于纬度和经度。它们应该是浮点数。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-04-29T15:26:08.047

纬度和经度是十进制的

```
rails g scaffold client name:string email:string 'latitude:decimal{12,3}' 'longitude:decimal{12,3}' 

class CreateClients < ActiveRecord::Migration[5.0]
  def change
    create_table :clients do |t|
      t.string :name
      t.string :email
      t.decimal :latitude, precision: 12, scale: 3
      t.decimal :longitude, precision: 12, scale: 3

      t.timestamps
    end
  end
end 
```

# sharepoint - 无法通过 Sharepoint 2010 中的 XML 将 DateTime 字段设置为默认值

> ID：10343386
> 
> 赞同：2
> 
> 时间：2012-04-27T00:55:31.690
> 
> 标签：sharepoint, sharepoint-2010, sharepoint-2007

我需要将 DateTime 字段设置为从当前日期起一年的默认值。我使用了以下 XML 语法：

```
<Default>=DATE(YEAR(Today)+1,MONTH(Today),DAY(Today))</Default> 
```

它不起作用并轰炸包含此字段的列表。我究竟做错了什么？

提前非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T12:36:07.690

请改用[DefaultFormula](http://msdn.microsoft.com/en-us/library/ms455738.aspx)。

[在功能中部署列级验证](http://www.3guysonsharepoint.com/?p=364)给出了一个示例，该示例在元素中使用相同的公式`DefaultFormula`而不是`Default`.

# html - 如何使 JqueryUi Slider 垂直居中对齐？

> ID：10343387
> 
> 赞同：1
> 
> 时间：2012-04-27T00:55:46.057
> 
> 标签：html, css, jquery-ui, slider

![滑块看起来像这样](../Images/4ff0c0d349c9231ec487f33e9df1c581.png)

这是我的代码：

```
<div class="search-option">
    <div id="slider-days" class="search-opt-left"></div>
    <input type="text" id="amount-days" class="search-opt-right input-small"/>
</div> 
```

我想让滑块和输入字段 algin 位于该行的中间。

我怎样才能做到这一点 ？谢谢 ！

我的 CSS：

```
.search-opt-left {
  float: left;
  width: 250px;
  vertical-align: middle;
}
.search-opt-right {
  float: left;
  margin-left: 20px;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T03:35:05.993

这可能是错误的。我通常做的是做一张桌子。而且由于表格行以垂直居中对齐开始，因此非常简单。

```
<div class="search-option">
    <table cellspacing="0" cellpadding="0">
        <tr>
            <td>
                <div id="slider-days" class="search-opt-left"></div>
            </td>
            <td>
                <input type="text" id="amount-days" class="search-opt-right input-small"/>
            </td>
        </tr>
    </table>
</div> 
```

然后，您可以更改您的 CSS 以摆脱不需要的东西。

# mysql - mysql不在重写查询问题

> ID：10343388
> 
> 赞同：1
> 
> 时间：2012-04-27T00:55:47.070
> 
> 标签：mysql

我有一个查询`NOT IN`。我听说 MySQL 不支持`NOT IN`，但我不知道如何重写它。

我的查询是：

```
SELECT * FROM quests
  WHERE id NOT IN ('" .$quest_completed. "') 
  AND location=" .$location_id. "
  AND (follows=0 OR follows IN ('" .$quest_completed. "')) 
  ORDER BY title 
```

例如：

```
SELECT * FROM quests 
WHERE id NOT IN (6,21) AND 
  location=8 AND 
  (follows=0 OR follows IN (6,21))
ORDER BY title 
```

当我指定时，正在返回第 6 行`WHERE id NOT IN 6`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T01:04:20.787

看起来，由于您在`$quest_completed`变量周围使用撇号，实际执行的查询可能是`NOT IN ('6,21')`，而不是`NOT IN (6,21)`（我认为这是您想要的？）。

不同之处在于第一个版本返回`id`不等于字符串`'6,21'`的记录，而第二个版本返回`id`既不是数字`6`也不是数字的记录`21`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T01:06:20.873

NOT IN 也可以解释为逻辑非（某些条件），例如

```
NOT ID in ( 'A', 'B', 'C', 'D' ) 
```

所以，如果您遇到书面问题，请尝试交换...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T00:58:40.133

MySQL[支持`NOT IN`就好了](http://dev.mysql.com/doc/refman/5.5/en/comparison-operators.html#function_not-in)。限制仅适用于某些情况，例如这里的情况：[MySQL "NOT IN" query](https://stackoverflow.com/questions/1519272/mysql-not-in-query)

# c# - 很长的计算使程序没有响应

> ID：10343390
> 
> 赞同：0
> 
> 时间：2012-04-27T00:56:11.947
> 
> 标签：c#, dictionary, datagridview

我有一个程序可以对数百万条记录进行彻底的计算。有时，它运行一个多小时，有时大约 30 分钟。在此期间，程序没有响应或无法点击。有什么解决方法吗？比如，加载鼠标图标。

另一个问题是，如果我将两个字典作为数据网格的数据源，与读取 csv 文件并将其放入数据网格相比，速度非常慢。这是算法：

```
for i = 0 to last record
    datarow row = new datarow
    put i to row[0]
    put names[i] to row[1]
    put comments[i] to row[2]
    add row to datatable
end for loop
datatable.acceptchanges()
datagridview.datasource = datatable 
```

注意：names[i] 和 comments[i] 是字典。但是，如果我只是从具有几乎相同循环的 csv 文件中读取并将其放入数据表并使其作为 datagridview 的数据源，它会更快（与 20 分钟的字典相比，大约需要 5-10 分钟）。有什么解决方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T00:59:14.143

您所要做的就是使用一些多线程在 UI 线程以外的线程上执行长时间运行的进程：

```
var task = new Task(() =>
{
    // do some work to get your dataTable
    dataTable.AcceptChanges();
    datagridview
        .Invoke(new Action(() => datagridview.DataSource = dataTable));
});

task.Start(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T00:59:18.567

假设您使用的是 .NET 4，请使用[`Task`](http://msdn.microsoft.com/en-us/library/system.threading.tasks.task.aspx)该类。它将在后台线程上运行作业，同时让您的 GUI 保持响应。

即使您不使用 .NET 4，也可以使用简单的多线程类。我很可能会使用`BackgroundWorker`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T01:09:39.380

我会使用一个任务在后台运行它。这样你的 UI 线程就不会在任务运行时被锁定。

```
 var task = new Task(() =>
 {
  for i = 0 to last record
     datarow row = new datarow
     put i to row[0]
     put names[i] to row[1]
     put comments[i] to row[2]
     add row to datatable
  end for loop
  datatable.acceptchanges()
 });

 // Start the task.
 task.Start();

 task.ContinueWith(t =>
 {
    datagridview.datasource = datatable
 }, TaskScheduler.FromCurrentSynchronizationContext()); 
```

您需要在 UI 线程中分配数据源，否则会出现异常。这就是 TaskScheduler 位将为您做的事情。任务完成后，您的延续将在 UI 线程上运行（假设您从 UI 线程设置延续）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-27T01:01:23.330

尝试这个：

```
var taskA = new Task(() => {
 for i = 0 to last record
    datarow row = new datarow
    put i to row[0]
    put names[i] to row[1]
    put comments[i] to row[2]
    add row to datatable
 end for loop
 datatable.acceptchanges()
 datagridview.datasource = datatable
});

// Start the task.
taskA.Start(); 
```

[查看更多关于任务](http://msdn.microsoft.com/en-us/library/dd537609.aspx)

# jquery - 我可以在缩略图库 jquery 脚本中将我的图像 src 更改回 mouseout 吗？

> ID：10343391
> 
> 赞同：0
> 
> 时间：2012-04-27T00:56:21.977
> 
> 标签：jquery, image, hover, gallery, thumbnails

我有一个照片库，其中的缩略图更改了主要的大图像。它工作得非常好，但我希望一旦用户的鼠标从缩略图上移开，主图像就会恢复到原始图像。有没有办法做到这一点？我看过很多类似的脚本并尝试过，但我就是无法解决。任何帮助将不胜感激！

这就是我正在使用的...

```
$(document).ready(function () {
    $(".thumbs a").hover(function () {
        var largePath = $(this).attr("href");
        var largeAlt = $(this).attr("title");
        $("#largeImg").attr({
            src: largePath,
            alt: largeAlt
        });
        return false;
    });
}); 
```

图像来自数据库，所以我不能给它一个明确的文件名。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T01:01:29.650

在更改之前尝试存储前一个图像的值。

```
$(document).ready(function(){
    var oldPath, oldAlt;

    $(".thumbs a").hover(function(){
        var largePath = $(this).attr("href");
        var largeAlt = $(this).attr("title");
        oldPath = $("#largeImg").attr("href");
        oldAlt = $("#largeImg").attr("title");

    $("#largeImg").attr({ src: largePath, alt: largeAlt });
        return false;
    }).mouseout(function() {
        $("#largeImg").attr({ src: oldPath, alt: oldAlt });
    });
}); 
```

# css - IE7 无法打开 CSS 菜单

> ID：10343393
> 
> 赞同：-3
> 
> 时间：2012-04-27T00:56:31.457
> 
> 标签：css, drop-down-menu

菜单适用于所有浏览器，但不适用于 IE7。它没有打开。

[http://goo.gl/oGR2O](http://goo.gl/oGR2O)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T01:22:22.090

这似乎可以解决它。

```
#middle {
  *position: inherit !important;
} 
```

虽然看起来您需要调整子导航项目的宽度。

# java - 使用 Hadoop，我可以在没有运行数据节点的机器上创建任务跟踪器吗？

> ID：10343397
> 
> 赞同：2
> 
> 时间：2012-04-27T00:57:37.123
> 
> 标签：java, hadoop, mapreduce, scalability, hbase

所以这是我的情况：

我有一个使用 HBase 的 mapreduce 作业。我的映射器接受一行文本输入并更新 HBase。我没有减速器，也没有将任何输出写入光盘。我希望能够在预期利用率激增时向集群添加更多处理能力，然后在利用率下降时缩减规模。让我们暂时假设我不能使用 Amazon 或任何其他云提供商；我在私有集群中运行。

一种解决方案是在我需要更多容量时将新机器添加到我的集群中。但是，我希望能够添加和删除这些机器而无需任何等待或麻烦。我不想在每次需要添加或删除节点时重新平衡 HDFS。

因此，一个好的策略似乎是拥有一个“核心”集群，其中每台机器都运行一个任务跟踪器和一个数据节点，当我需要增加容量时，我可以启动一些运行任务跟踪器的“一次性”机器，但不是数据节点。这可能吗？如果是这样，有什么影响？

我意识到在没有数据节点的机器上运行的任务跟踪器不会受益于数据局部性。但在实践中，这意味着什么？我在想象，当在其中一台“一次性”机器上安排作业时，jobtracker 将通过网络向 tasktracker 发送一行输入，然后 tasktracker 接收该输入行并将其直接提供给 Mapper，而无需将任何内容写入光盘。这是怎么回事？

哦，我正在使用 Cloudera cdh3u3。不知道这是否重要。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T10:37:13.820

> 我在想，当在其中一台“一次性”机器上安排作业时，jobtracker 将通过网络向 tasktracker 发送一行输入，然后 tasktracker 接收该行输入并将其直接提供给 Mapper，而无需将任何内容写入光盘。这是怎么回事？

不完全是，作业跟踪器任务一个任务跟踪器来运行一个映射任务来处理输入拆分。JobTracker 不会将数据传递给任务跟踪器，更多的是传递序列化的拆分信息（文件名、起始偏移量和长度）。TaskTracker 运行 MapTask，它是 MapTask 实例化 InputFormat 和关联的 RecordReader 以获取拆分信息 - 将输入 Key/Values 传递给 Mapper。

如果您没有本地数据节点，或者您有本地数据节点，但数据没有复制到本地数据节点上，则数据将从另一个数据节点通过网络读取（希望机架本地，但仍可能来自其他地方）。

您可以在 Hadoop 计数器输出中查看数据块在任务本地或机架本地的频率统计信息。

# spring - 根据属性文件的值处理多个 spring 安全上下文文件

> ID：10343398
> 
> 赞同：1
> 
> 时间：2012-04-27T00:57:46.253
> 
> 标签：spring, properties, spring-security

我在处理多个安全上下文文件时遇到问题。让我描述一下我正在尝试做的事情：

我有我现有的应用程序，它与我当前的 spring 安全配置完美运行。我正在尝试引入另一种以不同方式处理应用程序安全性的安全机制。但我想保留我们现有的安全配置作为备份，并希望从属性文件中处理要使用的安全配置。

假设我有两个弹簧安全上下文文件：

----> applicationContext-security.xml

----> applicationContext-security-new.xml

我有一个类似这样的属性：spring.config.use.new.config=true

因此，如果属性文件为真，它将使用新的上下文文件。如果出现问题，我将只更改属性文件并可以使用现有的安全机制。

那可能吗？任何信息将不胜感激。期待任何人的回答:(

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T07:53:13.423

你用什么来构建你的项目？

如果您使用 Maven，您可以只使用[属性插件](http://haroon.sis.utoronto.ca/zarar/properties-maven-plugin/index.html)并让它替换您在 web.xml 中的配置定义。

您的 web.xml 看起来像：

```
<context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>${security.context.location}</param-value>
</context-param> 
```

您的 pom.xml 将具有：

```
 <resources>
        <resource>
            <directory>src/main/resources</directory>
            <includes>
                <include>my.properties</include>
            </includes>
        </resource>
    <resources> 
```

您的 .properties 文件将具有：

```
security.context.location = /somewhere/security-context-new.xml 
```

或者

```
security.context.location = /somewhere/security-context-old.xml 
```

# python - 皮库达；nvcc 致命：找不到 Visual Studio 配置文件“（空）”

> ID：10343401
> 
> 赞同：4
> 
> 时间：2012-04-27T00:58:21.353
> 
> 标签：python, cuda, nvcc, pycuda

在安装 Visual C++ Express 2010 和各种 Nvidia 驱动程序、SDK 等之后，我正在尝试运行[pycuda 入门教程。我得到了](http://documen.tician.de/pycuda/tutorial.html)

```
mod = SourceModule("""
__global__ void doublify(float *a)
{
int idx = threadIdx.x + threadIdx.y*4;
a[idx] *= 2;
}
""") 
```

没有错误。但是 IPython 中的这个调用会产生

```
CompileError: nvcc compilation of c:\users\koj\appdata\local\temp\tmpbbhsca\kernel.cu failed
[command: nvcc --cubin -arch sm_21 -m64 -IC:\Python27\lib\site-packages\pycuda\..\..\..\include\pycuda kernel.cu]
[stderr:
nvcc fatal   : Visual Studio configuration file '(null)' could not be found for installation at 'C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\bin/../..'] 
```

在此之后，我安装了 MS Windows SDK 而不影响此错误，尽管我现在似乎能够在 Visual C++ Express 2010 中选择 x64 程序。那么，我需要修复什么？（我使用了预编译的 pycuda 文件。）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-27T23:06:03.633

在stackoverflow post [CUDA linking error - Visual Express 2008 - nvcc fatal due to (null) configuration file](https://stackoverflow.com/questions/2970493/cuda-linking-error-visual-express-2008-nvcc-fatal-due-to-null-configuratio) Amitabh Mritunjai 的回答修复了这个错误。他解释了 Visual C++ Express 2010 的步骤，而其余大部分内容是关于 2008 年的。

# vb.net - 如何从 VB.Net 3.5 中的对象列表创建连接字符串

> ID：10343403
> 
> 赞同：5
> 
> 时间：2012-04-27T00:58:38.330
> 
> 标签：vb.net, linq

我想我应该使用“聚合”，但显然我弄错了

首先，我得到一个我的 Entity 对象的列表

```
 Dim employers As List(Of myEntity) = (New XXXX()).getZZZ(userName, userType) 
```

然后我想这将是一种将所有名称放在字符串中的方法

```
 Dim names as String = employers.Aggregate(Function(current, [next]) current.Name & " " & [next].Name) 
```

但我得到错误：“无法将类型'lambda表达式'转换为参数类型'System.Func（MyEntity，myEntity，myEntity......”

任何线索？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-27T01:06:07.183

试试这个：

`Dim names = String.Join(" ", employers.Select(Function(employer) employer.Name))`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T01:04:34.553

```
Dim names as String = employers.Aggregate("", Function(current, [next]) current & " " & [next].Name)
' Use this                                ^^                                  ^^ 
```

之后您可能想要修剪字符串，因为它将以空格开头。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-26T08:03:53.867

尝试：

```
Dim names as String = employers.Select(Function(emp) emp.Name ).Aggregate(Function(current, [next]) current & " " & [next]) 
```

# c - 函数采用结构的 void 指针并将指向其成员的指针传递给另一个函数

> ID：10343407
> 
> 赞同：0
> 
> 时间：2012-04-27T00:58:47.923
> 
> 标签：c, pointers, struct

是的，标题和我一样令人困惑。该代码可能有助于显示我想要实现的目标；

在一个函数中，我通过这个；

```
RESTOUCH_POINT_STRUCT stConvertPoint;

stConvertPoint.usX = astLCDPoints[0].usX;
stConvertPoint.usY = astLCDPoints[0].usY;

Driver_Control((DRIVER_STRUCT*)pstResTouch->pstDisplay, CMD_CONVERT_POINT_TO_ORIENTATION, &stConvertPoint); 
```

接收驱动函数，需要将 的地址`stConvertPoint`作为 void 指针接受，然后对其进行强制转换以获取指向其成员的指针`usX`, 和`usY`。然后将其传递给一个内部函数，该函数会更改`usX`and的值`usY`。

```
DRIVER_RETURN ILI9328_Control(DRIVER_STRUCT *pstDriver_, USHORT usID_, void *pvData_)
{
...
case CMD_CONVERT_POINT_TO_ORIENTATION:
{
  DRAW_POINT_STRUCT* pstPoint = (DRAW_POINT_STRUCT*)pvData_;
  USHORT *pusX;
  USHORT *pusY;

  pusX = (USHORT*)pstPoint->usX;
  pusY = (USHORT*)pstPoint->usY;

  ILI9328_ConvertPointOrientation(pstDriver_, pusX, pusY);
}
break; 
```

假设这一切正常，调用函数中`stConvertPoint.usX`和的值`stConvertPoint.usY`现在应该不同。

这是可能吗？指针和引用总是让我非常困惑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T01:20:21.560

假设（按照命名约定）`usX`and`usY`成员只是`unsigned short`（它们不是指针），那么你*不*想要：

```
pusX = (USHORT*)pstPoint->usX;
pusY = (USHORT*)pstPoint->usY; 
```

这将创建无效且无用的指针。

相反，你想要：

```
pusX = &pstPoint->usX;
pusY = &pstPoint->usY; 
```

它们是指向结构的两个成员的指针。

# jquery - jQuery函数解析一段HTML

> ID：10343408
> 
> 赞同：0
> 
> 时间：2012-04-27T00:58:56.693
> 
> 标签：jquery, parsing

我正在寻找一个 jQuery 函数来解析 HTML 的一部分并从`<td>`div class="appArea" 中的第一个读取（存储在变量中）并继续读取 HTML，直到它到达带有 class="tb_pages" 类的表，然后停止。

我想我需要一个 each() 函数，但不能让它工作。

```
<div class="appArea">

<p class="cstmTitle">Team Wilson</p>
<table width="100%" cellpadding="5" cellspacing="0" border="0">
<tr valign="top">
<td>

<p>
<p>We are proud to do our part to change the future and make a positive impact in the lives of others.</p>
<p><strong>Bullet List Ex</strong>:</p>
<ul>
<li>First</li>
<li>Second </li>
</ul>

<table class="tb_pages" border="0">
<thead>
<tr>
<th>Bacon</th> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T01:04:14.360

丑陋：

```
var a = $('.appArea td:first').html().split('<table class="tb_pages"')[0];

var b = $('.appArea td:first').html().split(/<table(.*?)class="(.*?)tb_pages/)[0]; 
```

漂亮的：

```
var c = $('div').append(
        $('.appArea td:first table.tb_pages').prevAll().clone()
    ).html(); 
```

选择你的毒药。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-27T01:06:35.670

我的“解决方案”不那么难看，但在效率上付出了代价：

```
var myHTML = "", isReading = false;

$(".appArea").children().each(function() {
    if(this.tagName == "td") isReading = true;
    else if($(this).hasClass("tb_pages") isReading = false;
    if(isReading) myHTML += $(this).html();
}); 
```

或者使用我最喜欢的`if`速记的解决方案，稍微难看但同样效率更高：

```
var myHTML = "", isReading = false;

$(".appArea").children().each(function() {
    this.tagName == "td" && (isReading = true);
    $(this).hasClass("tb_pages") && (isReading = false);
    isReading && (myHTML += $(this).html());
}); 
```

* * *

或者替代**iambriansreed**的答案，使用`slice()`代替`split()`（应该稍微快一点，但同样丑陋）：

```
var $fullHTML = $(".appArea").html()
var myHTML = fullHTML.slice(fullHTML.indexOf("<td>"), fullHTML.indexOf('<table class="tb_pages"')); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T01:16:01.107

```
$('div.appArea td:first table.tb_pages').prevAll() 
```

将在 td 内但在 tb_pages 表之前获取所有内容。

# python - 有效地确定列表中三个项目中的两个是否相同

> ID：10343413
> 
> 赞同：3
> 
> 时间：2012-04-27T00:59:59.193
> 
> 标签：python, algorithm, list

确定列表中的两个元素是否完全相同的最有效方法是什么？例如：

```
>>> has1dup(["one", "one", "two"])
True
>>> has1dup(["one", "two", "three"])
False
>>> has1dup(["one", "one", "one"])
False 
```

我已经使用 if/else 语句成功地做到了这一点。但是，如果列表更大，为一对写出每种可能性的任务将变得非常困难和耗时。有没有更快/更简单的方法来实现这一点？

这是我尝试过的：

```
def has1dup(lst):
    if lst[0] == lst[1] and lst[1] != lst[2]:
        return True
    elif lst[1] == lst[2] and lst[2] != lst[0]:
        return True
    elif lst[0] == lst[2] and lst[2] != lst[1]:
        return True
    else:
        return False 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-27T01:04:22.550

您可以看到有多少个唯一值`set`。如果集合中的项比列表中的项少一项，则一项为重复项：

```
def has1dup(lst):
    return len(lst)-1 == len(set(lst)) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-27T01:15:48.287

```
>>> from collection import Counter
>>> 2 in Counter(["one", "one", "two"]).values()
True
>>> 2 in Counter(["one", "two", "three"]).values()
False 
```

*更新*
如果你想要只有两个相同的项目

```
Counter(seq).values().count(2) == 1 
```

适用于 Python 2.7+的`Counter`作品，对于较低版本，您可以手动完成

```
def counter(seq): 
    r = {}
    for x in seq:
        r[x] = r.setdefault(x, 0) + 1 # or defaultdict
    return r 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-27T01:15:48.340

[您可以使用内置](http://docs.python.org/library/functions.html#any)[的`any()`](http://docs.python.org/library/functions.html#any)非常轻松且很好地做到这一点：

```
def has_duplicates(seq):
    return any(seq.count(x) > 1 for x in seq) 
```

例子：

```
>>> has_duplicates([1, 1, 2])
True
>>> has_duplicates([1, 2, 2])
True
>>> has_duplicates([1, 2, 3])
False 
```

如果您只想找到两个且只有两个项目相同的位置，只需更改条件：

```
any(seq.count(x) == 2 for x in seq) 
```

如果你想找到哪里有一个，并且只有两个的一个实例，只有两个项目，我们也可以这样做，尽管它需要更多的工作：

```
def any_n(iterable, n):
    seen = 0
    for value in iterable:
        if value:
            if seen >= n:
                return False
            else:
                seen += 1
    return seen == n

def has_one_value_repeated_n_times(seq, n):
    return any_n((seq.count(x) == n for x in seq), n) 
```

一些快速测试：

```
tests = [
    [1,2,2,3,3,3,4,4,4,4,5,5,5,5,5],
    [1,2,2,3,3,4,4,4,4,5,5,5,5,5],
    [1,2,2],
    [1,1,2],
    [1,2,3],
]

for test in tests:
    print(test, "-", has_one_value_repeated_n_times(test, 2)) 
```

给我们：

```
[1, 2, 2, 3, 3, 3, 4, 4, 4, 4, 5, 5, 5, 5, 5] - True
[1, 2, 2, 3, 3, 4, 4, 4, 4, 5, 5, 5, 5, 5] - False
[1, 2, 2] - True
[1, 1, 2] - True
[1, 2, 3] - False 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-27T01:16:44.933

```
2 in collections.Counter(yourList).values() 
```

简短而高效。

如果您的意思是“完全”，如“在元素的多重性中，恰好有一个元素的多重性为 2”，那么您可以：

```
Counter(Counter(yourList).values()).get(2)==1 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-27T02:23:44.133

既然我们需要进行成对比较，那么使用`itertools.product`创建所有成对比较的序列怎么样？

```
from itertools import product

tests = """\
AAB
ABC
ABB
ABA
AAA""".splitlines()

def has_exactly_one_doubled_element(t):
    return sum(map(lambda a:a[0]==a[1], product(t,t))) == 5

for t in tests:
    print t, has_exactly_one_doubled_element(t) 
```

印刷：

```
AAB True
ABC False
ABB True
ABA True
AAA False 
```

那么，我是如何得出神奇数字 5 的呢？product 返回的对是每个元素与列表的第二个副本中的一个元素配对。如果所有 3 个都不相同，那么它们将各自比较等于自己，而不是其他，所以总数将为 3。如果 2 相同，则除了 3 个匹配项之外，两个副本将相互比较一次在每个方向上，因此将 2 与 3 相加得到 5。如果所有 3 都相同，则每个元素将与每个其他元素匹配，匹配 3*3 或 9 个。

这是任何长度列表的通用解决方案，以查看是否只有一个重复值（也使用`operator.__eq__`并`itertools.starmap`避免将 lambda 传递给`map`）：

```
from operator import __eq__ as EQ
from itertools import product, starmap

def has_exactly_one_doubled_element(t):
    return sum(starmap(EQ, product(t,t))) == len(t)+2

args = ["ABCD"]*4
tests = map(''.join, product(*args))
for t in tests:
    print t, has_exactly_one_doubled_element(t) 
```

印刷：

```
AAAA False
AAAB False
AAAC False
AAAD False
AABA False
AABB False
AABC True
AABD True
AACA False
AACB True
AACC False
AACD True
AADA False
AADB True
AADC True
AADD False
ABAA False
ABAB False
ABAC True
ABAD True
ABBA False
ABBB False
ABBC True
ABBD True
ABCA True
ABCB True
ABCC True
ABCD False
ABDA True
ABDB True
ABDC False
ABDD True
ACAA False
ACAB True
ACAC False
ACAD True
ACBA True
ACBB True
ACBC True
ACBD False
ACCA False
ACCB True
ACCC False
ACCD True
ACDA True
ACDB False
ACDC True
ACDD True
ADAA False
ADAB True
ADAC True
ADAD False
ADBA True
ADBB True
ADBC False
ADBD True
ADCA True
ADCB False
ADCC True
ADCD True
ADDA False
ADDB True
ADDC True
ADDD False
BAAA False
BAAB False
BAAC True
BAAD True
BABA False
BABB False
BABC True
BABD True
BACA True
BACB True
BACC True
BACD False
BADA True
BADB True
BADC False
BADD True
BBAA False
BBAB False
BBAC True
BBAD True
BBBA False
BBBB False
BBBC False
BBBD False
BBCA True
BBCB False
BBCC False
BBCD True
BBDA True
BBDB False
BBDC True
BBDD False
BCAA True
BCAB True
BCAC True
BCAD False
BCBA True
BCBB False
BCBC False
BCBD True
BCCA True
BCCB False
BCCC False
BCCD True
BCDA False
BCDB True
BCDC True
BCDD True
BDAA True
BDAB True
BDAC False
BDAD True
BDBA True
BDBB False
BDBC True
BDBD False
BDCA False
BDCB True
BDCC True
BDCD True
BDDA True
BDDB False
BDDC True
BDDD False
CAAA False
CAAB True
CAAC False
CAAD True
CABA True
CABB True
CABC True
CABD False
CACA False
CACB True
CACC False
CACD True
CADA True
CADB False
CADC True
CADD True
CBAA True
CBAB True
CBAC True
CBAD False
CBBA True
CBBB False
CBBC False
CBBD True
CBCA True
CBCB False
CBCC False
CBCD True
CBDA False
CBDB True
CBDC True
CBDD True
CCAA False
CCAB True
CCAC False
CCAD True
CCBA True
CCBB False
CCBC False
CCBD True
CCCA False
CCCB False
CCCC False
CCCD False
CCDA True
CCDB True
CCDC False
CCDD False
CDAA True
CDAB False
CDAC True
CDAD True
CDBA False
CDBB True
CDBC True
CDBD True
CDCA True
CDCB True
CDCC False
CDCD False
CDDA True
CDDB True
CDDC False
CDDD False
DAAA False
DAAB True
DAAC True
DAAD False
DABA True
DABB True
DABC False
DABD True
DACA True
DACB False
DACC True
DACD True
DADA False
DADB True
DADC True
DADD False
DBAA True
DBAB True
DBAC False
DBAD True
DBBA True
DBBB False
DBBC True
DBBD False
DBCA False
DBCB True
DBCC True
DBCD True
DBDA True
DBDB False
DBDC True
DBDD False
DCAA True
DCAB False
DCAC True
DCAD True
DCBA False
DCBB True
DCBC True
DCBD True
DCCA True
DCCB True
DCCC False
DCCD False
DCDA True
DCDB True
DCDC False
DCDD False
DDAA False
DDAB True
DDAC True
DDAD False
DDBA True
DDBB False
DDBC True
DDBD False
DDCA True
DDCB True
DDCC False
DDCD False
DDDA False
DDDB False
DDDC False
DDDD False 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-27T01:03:38.853

我不知道 Python，但这里有一些伪代码：

```
for i in 0 to length(list):
    j = indexOf(list, list[i], i + 1) > -1

    if j > -1 and indexOf(list, list[i], j + 1) == -1:
        // Found exactly two! 
```

它应该足以满足您的需求。

编辑：好的，我把它变成了 Python。对不起，如果它不是好的代码。

```
def exactlyTwo(l):
    for i in xrange(0, len(l)):
        try:
            j = l.index(l[i], i + 1)

            try:
                l.index(l[i], j + 1)
            except ValueError:
                return True
        except ValueError:
            # Do nothing. Not sure how to do that in Python.
            0

    return False 
```

[这是一个演示。](http://codepad.org/0zzx030X)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-27T01:04:43.143

我会试试这个：`len(set(my_list)) == 2`

但后来我看到，在可行的情况下（3 项），我们可以做得更好： `> python -c 'from timeit import Timer; t1 = Timer("a[0] == a[1] != a[2] or a[0] == a[2] != a[1] or a[1] == a[2] != a[0]", setup="""a=["one","one","two"]"""); t2 = Timer("len(set(a)) == 2", setup="""a=["one","one","two"]"""); print t1.timeit(), t2.timeit()'`

`0.893960952759 2.28438997269`

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-04-27T01:05:30.990

您拥有的代码没有任何问题（至少对于大小为 3 的列表） - 它可读且相当简洁，*如果*它成为问题，您真的应该只担心性能。

像集合转换这样的解决方案比三个条件要快得多的可能性虽然不是不可能，但不太可能。

我更喜欢稍微不同的形式来减少“缩进地狱”:-)

```
if list[0] == list[1] and list[1] != list[2]:
    return True

if list[1] == list[2] and list[2] != list[0]:
    return True

if list[0] == list[2] and list[2] != list[1]:
    return True

return False 
```

或者，如果您希望在屏幕/打印输出上一次看到尽可能多的代码：

```
if list[0] == list[1] and list[1] != list[2]: return True
if list[1] == list[2] and list[2] != list[0]: return True
if list[0] == list[2] and list[2] != list[1]: return True
return False 
```

对于更大的数组，你可以把它变成一个集合，如果集合的长度比数组的长度小一，那么就只有一个重复：

```
>>> a = [1,2,3,4,4,5,6,7]
>>> a
[1, 2, 3, 4, 4, 5, 6, 7]
>>> len(a) == len (set(a)) + 1
True 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-04-27T01:21:23.230

如果只有一个/没有一个元素重复，并且您可以将元素表示为正整数（例如通过使用字典将“一”映射到 1）

然后以下解决方案将起作用

```
def find_repeated_element(l):
    return reduce(lambda x,y: x^y, l + list(set(l)))

l = [1,1,2]
>>> find_repeated_element(l)
1
l = [1,2,3]
>>> find_repeated_element(l)
0
l = [1,1,1]
>>> find_repeated_element(l)
0 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-04-28T14:28:47.377

```
def exactlyTwo(elements):
    return sum(elements.count(i)-1 for i in elements) == 2 
```

适用于不可散列的元素，其中“正好两个元素”表示三元组和两个双打应该返回 False

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2012-04-27T01:05:58.180

```
def checkk(lis):
  sett=set(lis)
  for ele in sett:
     if lis.count(ele)==2:
       return 'yes'
  else:
     return 'no'

x=list(["one", "one", "two"])
y=list(["one", "two", "three"])
z=list(["one", "one", "one"])
w=list(["one", "two", "two"])
print(checkk(x))
print(checkk(y))
print(checkk(z))
print(checkk(w)) 
```

**输出：**

```
yes
no
no
yes 
```

* * *

## 回答 #12

> 赞同：-2
> 
> 时间：2012-04-27T01:01:42.460

你可以试试

```
list(["one", "one", "two"]).count("one") == 2 
```

# java - 将 android 应用程序的快捷方式添加到主屏幕上的按钮单击

> ID：10343414
> 
> 赞同：12
> 
> 时间：2012-04-27T01:00:01.370
> 
> 标签：java, android, homescreen

我想通过按一个按钮轻松地将我的应用程序添加到主屏幕。所以我在想的是我的应用程序底部的一个按钮，上面写着“添加到主屏幕”，当按下它时，它会在不关闭应用程序的情况下将快捷方式添加到主屏幕。我应该添加什么代码来做到这一点？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-04-27T01:20:47.093

发送带有结果 Intent 的 INSTALL_SHORTCUT 广播作为额外的（在这种情况下，结果 Intent 正在直接打开某些活动）。

```
 //where this is a context (e.g. your current activity)
    final Intent shortcutIntent = new Intent(this, SomeActivity.class);

    final Intent intent = new Intent();
    intent.putExtra(Intent.EXTRA_SHORTCUT_INTENT, shortcutIntent);
    // Sets the custom shortcut's title
    intent.putExtra(Intent.EXTRA_SHORTCUT_NAME, getString(R.string.app_name));
    // Set the custom shortcut icon
    intent.putExtra(Intent.EXTRA_SHORTCUT_ICON_RESOURCE, Intent.ShortcutIconResource.fromContext(this, R.drawable.icon));
    // add the shortcut
    intent.setAction("com.android.launcher.action.INSTALL_SHORTCUT");
    sendBroadcast(intent); 
```

您还需要在清单中获得此权限：

```
<uses-permission android:name="com.android.launcher.permission.INSTALL_SHORTCUT" /> 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2017-09-27T23:33:36.367

好的...我知道这是旧线程，但我想确保访问此线程的工程师有最新信息。

从 Android O 开始 - 作为背景检查限制（在这种情况下为隐式接收器）的一部分，com.android.launcher.action.INSTALL_SHORTCUT 广播不再对您的应用产生任何影响，因为它现在是一个私有的隐式广播。

根据 Android O ActivityManagerService.java ：

```
 case "com.android.launcher.action.INSTALL_SHORTCUT":
                // As of O, we no longer support this broadcasts, even for pre-O apps.
                // Apps should now be using ShortcutManager.pinRequestShortcut().
                Log.w(TAG, "Broadcast " + action
                        + " no longer supported. It will not be delivered."); 
```

我希望这有帮助 ！

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-04-27T01:34:45.563

第一步，你应该让午餐者可以接收广播：

```
 <!-- Intent received used to install shortcuts from other applications -->
    <receiver
        android:name="com.android.launcher2.InstallShortcutReceiver"
        android:permission="com.android.launcher.permission.INSTALL_SHORTCUT">
        <intent-filter>
            <action android:name="com.android.launcher.action.INSTALL_SHORTCUT"/>
        </intent-filter>
    </receiver> 
```

接下来，在 manifest.xml 中添加权限

```
<uses-permission android:name="com.android.launcher.permission.INSTALL_SHORTCUT"/> 
```

最后，创建一个函数并在单击按钮时调用它：

```
public void createShortCut(){
    // a Intent to create a shortCut
    Intent shortcutintent = new Intent("com.android.launcher.action.INSTALL_SHORTCUT");
    //repeat to create is forbidden
    shortcutintent.putExtra("duplicate", false);
    //set the name of shortCut
    shortcutintent.putExtra(Intent.EXTRA_SHORTCUT_NAME, getString(R.string.shortcutname));
    //set icon
    Parcelable icon = Intent.ShortcutIconResource.fromContext(getApplicationContext(), R.drawable.icon);
    shortcutintent.putExtra(Intent.EXTRA_SHORTCUT_ICON_RESOURCE, icon);
    //set the application to lunch when you click the icon
    shortcutintent.putExtra(Intent.EXTRA_SHORTCUT_INTENT, new Intent(getApplicationContext() , EnterActivity.class));
    //sendBroadcast,done
    sendBroadcast(shortcutintent);
} 
```

像这样做：

```
button.setOnClickListener(new OnClickListener() {
        public void onClick(View v) {
            createShortCut();
        }
    }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-04-23T16:43:24.530

对于我们这些仍然希望这样做的人，这里是用于 Android O 及更高版本的更新代码：

```
 ShortcutManager shortcutManager = (ShortcutManager) getSystemService(Context.SHORTCUT_SERVICE);
    if (shortcutManager.isRequestPinShortcutSupported()) {
        ShortcutInfo shortcutInfo = new ShortcutInfo.Builder(getApplicationContext(), "1")
                .setIntent(new Intent(getApplicationContext(), DestionationAcitivity.class).setAction(Intent.ACTION_MAIN))
                .setShortLabel("My Shortcut")
                .setIcon(Icon.createWithResource(this, R.drawable.yourDrawable))
                .build();
        shortcutManager.requestPinShortcut( shortcutInfo, null);
    } else {
        Toast.makeText(MainActivity.this,"Creating Shortcuts is not Supported on this Launcher",Toast.LENGTH_SHORT).show();
    } 
```

# ipad - CakePhP、Jquery Mobile、Ipad - 添加记录两次

> ID：10343419
> 
> 赞同：0
> 
> 时间：2012-04-27T01:00:47.717
> 
> 标签：ipad, cakephp, jquery-mobile

在 ipad 上使用 CakePhp 和 Jquery Mobile，

问题是有时在 ipad 上添加记录时，它会添加两次记录，就好像意外按下了两次保存按钮一样。

两条记录的 ID 不同，但数据相同。

如何停止保存按钮接受多次按下。

目前使用

```
<button type="submit" data-theme="b" data-inline="true">Save</button> 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T03:09:28.623

在保存数据之前验证它是否是一个发布请求。如果在刷新页面时保存数据后没有验证 post 方法，它将再次保存。

你可以在控制器中这样做

```
if ($this->request->is('post')) {
    $this->ModelName->create();
    if ($this->ModelName->save($this->request->data)) {
            $this->Session->setFlash(__('The Model has been saved'));
    }
} 
```

# ios - Dropbox API、OAuth 和 Apple

> ID：10343422
> 
> 赞同：0
> 
> 时间：2012-04-27T01:01:02.887
> 
> 标签：ios, dropbox, appstore-approval

我创建了一个 iOS 应用程序，要求用户链接他/她的 Dropbox 帐户。作为初始设置的一部分，用户需要使用 Dropbox 执行 OAuth 身份验证。使用最新版本的 Dropbox API，此 OAuth 请求将导致 Dropbox 应用程序被启动，或者如果设备上不存在 Dropbox 应用程序，则将启动 Safari。无论哪种方式，都会提示用户输入他/她的 Dropbox 凭据。

在后一种情况下，Safari 上有一个显示“创建帐户”的链接。我相信我的应用因为这个“创建帐户”链接而被拒绝。

> 11.13 链接到外部购买或订阅机制的应用程序将被拒绝

有没有人经历过这个？有什么办法吗？

作为开发人员，这非常令人沮丧，因为这超出了我的能力范围。我无法修改 Dropbox 的网站以删除该链接！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T07:44:09.020

我遇到了同样的问题。我认为唯一可行的方法是让 Dropbox 从 oauth 页面中删除注册链接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T14:46:40.660

Dropbox iOS SDK 的一个版本 (1.2.2-b2) 删除了“创建帐户”和“桌面版本”链接。它可以在 Brian S. 在[http://forums.dropbox.com/topic.php?id=59350的帖子中找到](http://forums.dropbox.com/topic.php?id=59350)

尚无关于此更新版本是否通过审批流程的消息。

# java - 如何在包含它的类的其他方法中使用在 main() 中声明的键盘输入？

> ID：10343433
> 
> 赞同：0
> 
> 时间：2012-04-27T01:02:05.843
> 
> 标签：java, input

我不确定如何使用

```
Scanner stdin = new Scanner(System.in);  //Keyboard input 
```

我在包含它的类的其他方法中在 main() 中声明。我得到“标准输入无法解析”。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-27T01:04:46.980

您需要了解[变量作用域](http://www.java2s.com/Tutorial/Java/0020__Language/VariableScope.htm)（这里是[Java 教程](http://docs.oracle.com/javase/tutorial/java/javaOO/variables.html)的链接，[另一个是关于变量作用域的](http://www.java-made-easy.com/variable-scope.html)）。

为了在其他方法中使用该变量，您需要传递对其他方法的引用。

```
public static void main(String[] args)
{
  Scanner stdin = new Scanner(System.in);  // define a local variable ...
  foo(stdin);                              // ... and pass it to the method
}

private static void foo(Scanner stdin)
{
  String s = stdin.next();                 // use the method parameter
} 
```

或者，您可以将扫描仪声明为静态字段：

```
public class TheExample
{
  private static Scanner stdin;

  public static void main(String[] args)
  {
    stdin = new Scanner(System.in);       // assign the static field ...
    foo();                                // ... then just invoke foo without parameters
  }

  private static void foo()
  {
    String s = stdin.next();              // use the static field
  }
} 
```

# c - 验证空行的输入 (\n\n)

> ID：10343438
> 
> 赞同：1
> 
> 时间：2012-04-27T01:02:45.703
> 
> 标签：c

我需要编写一个从标准输入读取的程序，并且只将非空行写入标准输出（即仅包含 \n 的行）。例如，如果标准输入是：

```
1

2

\n

3 
```

输出将是：

```
1

2

3 
```

这是我到目前为止所拥有的：

```
#include <stdio.h> 
#include <string.h> 

int main()

{
    char buf[BUFSIZ];
    char *p;

    printf ("Please enter some lines of text\n");

    if (fgets(buf, sizeof(buf), stdin) != NULL)
    {
        printf ("%s\n", buf);
        /*
         *  Remove newline character
         */
        if ((p = strchr(buf, '\n')) != NULL)
            *p = '\0';
    }
    return 0;
} 
```

有什么办法可以让我循环程序，这样即使输入了一个空行，用户仍然可以继续输入？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T01:07:56.730

这是作业吗？

如果没有，grep 会做你想做的事：

```
grep --invert-match '^$' yourfile 
```

也就是说，匹配任何不是行首 ( `^`) 的行，然后紧跟行尾 ( `$`)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T01:29:45.240

因此，该`if`语句用于一次性代码块，您需要一个循环语句。您甚至可以使用相同的条件。您还需要进行其他一些小的更改，但是一旦您确定了需要哪种类型的循环，您应该大部分都在那里。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T11:13:29.783

如果您不必仅在 C 中执行此操作。然后，您可以使用 UNIX 和 Perl 来解决您的问题

**输入**

```
1
2
\n
3 
```

**UNIX 解决方案**

```
$> grep -v '\n' Input 
```

**Perl 解决方案**

```
@text = `cat /home/Input`;
foreach my $no_only (@text)
{
        if ($no_only =~ /\d/)
        {
                print "$no_only\n";
        }
} 
```

**输出**

```
1
2
3 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-27T13:10:49.270

```
#include <stdio.h>

int main(void){
    char buf[BUFSIZ];

    printf ("Please enter some lines of text\n");

    while(fgets(buf, sizeof(buf), stdin) != NULL){
        if(*buf != '\n')
            printf("%s", buf);
    }
    return 0;
} 
```

# wordpress - Wordpress + 自定义分类法 + 固定链接

> ID：10343439
> 
> 赞同：0
> 
> 时间：2012-04-27T01:02:51.070
> 
> 标签：wordpress, permalinks, wp-list-categories

我知道以前也有类似的问题，但我找不到解决方案，觉得我的可能有点独特。

我有一些自定义帖子类型+分类法。

**帖子类型**= 产品 **分类**= Product_Categories

我的测试站点是：[http ://tech.stickystudios.ca/](http://tech.stickystudios.ca/)

如果您可以访问*Products -> Broadcast*，请单击左侧的类别...

无论我如何使用 URL，我都无法在这些页面中显示任何内容。

有关正在使用的插件的一些额外信息。- Magic Fields 2 - 查询牧马人 - Woo Commerce（用于“组件”页面）

这似乎是我整个网站的一种趋势，带有“类别”的东西只是不想正确“列出”。

任何帮助或指导将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T14:38:56.993

据我了解，您尝试升级您的永久链接以利用自定义帖子类型和分类法来交叉检查它们。

*最简单的使用方法是......*

**example.com/?cat=1**

或者

**example.com/?cat=1,2,3&tag=tag1,tag2**

其中仅**包含**术语，**不需要**类别术语和标签，但要求帖子至少有一个术语和标签。帖子类型默认为帖子。为了使用带有帖子类型和分类法的永久链接，您必须识别和使用 slugs 和 ID（仅限类别 ID）。

类别 = **cat=1,2,3**（ID）

标签 = **tag=tag_slug1,tag_slug2,tag_slug3**

（自定义）帖子类型 = **post_type=post_type_slug**

自定义分类法 = **taxonomy_slug=term_slug1,term_slug2,term_slug4**

*更高级的使用方法...*

**example.com/?post_type=posts&cat=21,32&tag=one&taxonomy_slug=term_slug1,term_slug2**

或者

**example.com/?post_type=foods&cat=12,43&tag=fruit,veg&color_taxonomy=red,white,purple**

使用此方法将允许您在特定的帖子类型（仅允许一个 slug）中进行搜索，在分类法中包含术语，并要求每个分类法中至少使用一个 ID 和 slug。一个利用这一点并提供动态导航侧边栏的已知插件是[Taxonomy Picker](http://wordpress.org/extend/plugins/taxonomy-picker/)。这应该允许您试验 URL 导航。另一个允许您创建帖子和*页面*列表的插件是[Advanced Post List](http://wordpress.org/extend/plugins/advanced-post-list/)。它可以列出多种帖子类型并包含/要求分类法以及从当前帖子/页面添加术语。创建列表需要更多的工作，但它比 WordPress 提供的更进一步。

# javascript - 将数据或数组索引附加到锚标记

> ID：10343441
> 
> 赞同：1
> 
> 时间：2012-04-27T01:03:34.143
> 
> 标签：javascript, jquery

我有一些 javascript/jquery 代码可以用一堆列表项动态填充无序列表。在列表项中，我有一个链接，我想将一些数据与生成的链接相关联，如下所示：

```
var thing1 = { name: 'My Object' };
var thing2 = { name: 'My Other Object' };
var li = $('<li></li><br />');
var aSel = $('<strong>' + thing1.name + '<br /><a class="btn btn-mini btn-success addDeal" href="javascript:void(0)"><i class="icon-plus"></i>Add Deal</a>';
li.append(aSel);
li.append(add);
$('#sidebar').append(li);
//This is in a loop so the same thing would happen with thing2, etc 
```

会像这样生成 HTML：

```
<div id="results">
    <ul id="sidebar">
        <li>
            <strong>My Object</strong><br />
            <a class="btn btn-mini btn-success addDeal" href="javascript:void(0)"><i class="icon-plus"></i>Add Deal</a>
        </li>
        <li>
            <strong>My Other Object</strong><br />
            <a class="btn btn-mini btn-success addDeal" href="javascript:void(0)"><i class="icon-plus"></i>Add Deal</a>
        </li>
    </ul>
</div> 
```

因此，如果用户单击第一个 Add Deal 链接，我想`thing1`在脚本中的其他位置处理数据。如果他们点击第二个链接，我想处理`thing2`数据。

我要走的路涉及一个数组和一些我觉得不太合适的代码。我想我错过了一些微不足道的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T01:15:35.413

您可以使用[jQuery.data](http://api.jquery.com/jQuery.data/)函数将“事物”附加到每个链接。就在该`var aSel =`行之后：

```
$('a', aSel).data('thing', thing1); // Select the anchor tag inside of 
                                    // aSel and attach thing1 to it 
```

然后，当单击锚标记时，使用以下命令检索它：`var thing = $(this).data('thing');`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T01:10:19.670

您可以使用[HTML5 自定义数据属性 (data-*)](http://html5doctor.com/html5-custom-data-attributes/)来实现您想要的。

特别看一下在 JavaScript 中使用数据属性。

# ruby-on-rails - 在 Ruby on Rails 应用程序中将 Web 表单打印（保存）到服务器的最佳方式是什么？

> ID：10343442
> 
> 赞同：0
> 
> 时间：2012-04-27T01:03:36.997
> 
> 标签：ruby-on-rails, ruby, forms, pdf, pdf-generation

更具体地说，我正在构建一个 Ruby on Rails 应用程序，用户将在其中填写 Web 表单，但我需要 [submit] 操作来在服务器上打印/保存不可编辑的（PDF 或类似的）文档。

对于填写表格的每个用户，它必须生成一个唯一的文件，其中包含他们的注册信息，以后可以打印出来。

任何可以提供帮助的人的主要业力点！先感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T19:48:15.297

查看大虾：[https ://github.com/prawnpdf/prawn](https://github.com/prawnpdf/prawn)

```
require 'prawn'

def create
  @thing = Thing.new(params[:thing])
  if @thing.save
    save_path = Rails.root.join('public','things',"#{@thing.id}.pdf")
    Prawn::Document.generate(save_path) do |pdf|
      pdf.text "Hello #{@thing.name}"
    end
    redirect_to @thing, :message => 'successfully created thing'
  end
end 
```

当然，您可能希望将文档生成提取到其自己的类或模板中，以将视图逻辑排除在控制器之外，但是，这是最简单的方法。

# javascript - JavaScript atan2() 函数未给出预期结果

> ID：10343448
> 
> 赞同：7
> 
> 时间：2012-04-27T01:04:15.610
> 
> 标签：javascript, coordinates, atan2, radians, polar-coordinates

通常，极坐标从 0 到*π*到 2 *π*（实际上正好在 2 *π*之前，因为它再次等于 0）。然而，当使用 JavaScript`atan2()`函数时，我得到了一个不同的、奇怪的范围：

```
笛卡尔 X | 笛卡尔Y | θ (θ)
==================================================== =========
     1 | 0 | 0 (0 × *π* )
     1 | 1 | 0.7853981633974483 (0.25 × *π* )
     0 | 1 | 1.5707963267948966 (0.5 × *π* )
    -1 | 1 | 2.356194490192345 (0.75 × *π* )
    -1 | 0 | 3.141592653589793 (1 × *π* )
    -1 | -1 | -2.356194490192345 (-0.75 × *π* )
     0 | -1 | -1.5707963267948966 (-0.5 × *π* )
     1 | -1 | -0.7853981633974483 (-0.25 × *π* )

```

如您所见，在达到*π* (180°) 后，它跳到 – *π* (–180°)，然后回到 0。我怎样才能让它使用范围**{0, ..., 2 *π* }**而不是**{– *π* , ..., *π* }**？我一直在尝试考虑每个计算来“修复”这些值，但我也想知道为什么 JavaScript 选择这个范围而不是典型的极坐标范围。谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-27T01:09:23.643

`atan2`返回该范围内的角度是非常标准的；例如，这就是`atan2`C 标准库中的。

如果您想要 0..2pi 而不是 -pi..pi，请测试结果是否为负，如果是则添加 2pi。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2016-09-03T15:16:30.703

这`atan2(y, x)`不是`atan2(x, y)`

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-27T01:07:36.883

如果结果是否定的，只需添加`2 * PI`到结果中。

```
function atan2Normalized(x,y) {
    var result = Math.atan2(x, y);
    if (result < 0) {
        result += (2 * Math.PI);
    }
    return(result);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-07-01T17:01:50.753

> 我怎样才能让它使用范围 {0, ..., 2π} 而不是 {–π, ..., π}？

该[`Math.atan2(Y,X)`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/atan2)函数将给出与 for 不同的`-0`结果`0`。

例如，在哪里`Math.atan2(0, -1)`返回`3.141592653589793`，`Math.atan2(-0, -1)`返回`-3.141592653589793`。

您可以使用这个事实来简化等式以获得范围内的结果`[0, 2π)`。

注意如果你否定`X`和`Y`值，你会得到什么：

```
 X   |   Y   |  -X   |  -Y   |  Math.atan2(-Y,-X)
===========================================================
   1   |   0   |  -1   |  -0   | -1.00π (-3.141592653589793)
   1   |   1   |  -1   |  -1   | -0.75π (-2.356194490192345)
   0   |   1   |  -0   |  -1   | -0.50π (-1.5707963267948966)
  -1   |   1   |   1   |  -1   | -0.25π (-0.7853981633974483)
  -1   |   0   |   1   |  -0   |  0.00π (0)
  -1   |  -1   |   1   |   1   |  0.25π (0.7853981633974483)
   0   |  -1   |  -0   |   1   |  0.50π (1.5707963267948966)
   1   |  -1   |  -1   |   1   |  0.75π (2.356194490192345) 
```

如果然后添加`π`到结果中，您将获得 range 中的值`[0, 2π)`。

因此，您可以使用：

```
var theta = Math.atan2(-Y, -X) + Math.PI; 
```

# php - 如何在 url 中返回最后四个路径？

> ID：10343452
> 
> 赞同：1
> 
> 时间：2012-04-27T01:04:40.333
> 
> 标签：php, url, path, explode, permalinks

类似于这个问题：[如何获取 URL 中的最后一个路径？](https://stackoverflow.com/questions/2273280/how-to-get-the-last-path-in-the-url)

...除了只返回 URL 中的*最后一个路径*，我想返回最后四个：

```
<?php 
  $url = 'http://blogs.mydomain.com/blog-name/2012/04/21/title-of-the-blog-post';
  print_r(parse_url($url));
  $url_path = parse_url($url, PHP_URL_PATH);
  $parts = explode('/', $url_path);
  $relative_permalink = end($parts);
echo $relative_permalink;
?> 
```

上面的代码来自我之前链接到的 Stack Overflow 项目。它有点像我想要的，除了它只返回博客文章的标题；我想返回 /blog-name/ 之后的所有内容，如下所示：

```
/20120/04/21/title-of-blog-post 
```

这段代码也能让我到达那里：

```
$url_endpoint = http://blogs.mydomain.com/blog-name/2012/04/21/title-of-the-blog-post;
$url_endpoint = parse_url( $url_endpoint );
$url_endpoint = $url_endpoint['path']; 
```

除了它还返回 /blog-name/ 以及它之后的所有内容。我想排除 /blog-name/

关于如何操作这些片段中的任何一个的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T01:07:17.550

```
list(, $last_four) = explode('/blog-name/', $url); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T01:08:08.450

尝试[array_slice](http://us2.php.net/array_slice)：

```
$relative_permalink = array_slice($parts, -4); 
```

**- 更新 -**

```
$url = 'http://blogs.mydomain.com/blog-name/2012/04/21/blog-title/';
$url_path = parse_url($url, PHP_URL_PATH);

// We are exploding on /, so there may be some empty array elements
// passing them through array_filter will remove them
$parts = array_filter(explode('/', $url_path), 'strlen');

// Grab the last 4 elements of array
$relative_permalink = array_slice($parts, -4);

// Put humpty back together again
echo implode('/', $relative_permalink); 
```

您的问题在最后 4 个中具有硬性要求，这将完成，但是 Blair McMillan 的答案更加灵活，因为它允许您在“博客名称”之后采取任何内容，所以请记住这一点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-27T01:08:08.920

`array_shift()`如果您想要第一个元素之后的所有内容，那么关闭第一个元素并返回其他元素不是更容易吗？

```
<?php 
  $url = 'http://blogs.mydomain.com/blog-name/2012/04/21/title-of-the-blog-post';
  print_r(parse_url($url));
  $url_path = parse_url($url, PHP_URL_PATH);
  $parts = explode('/', $url_path);
  $static_name = array_shift($parts);
  $relative_permalink = implode('/', $parts);
  echo $relative_permalink;
?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-27T01:12:30.147

尝试：

```
<?php 
$url = 'http://blogs.mydomain.com/blog-name/2012/04/21/title-of-the-blog-post';
$url_path = parse_url($url, PHP_URL_PATH);
$parts = explode('/', $url_path);
$relative_permalink = implode('/', array_slice($parts, -4));
echo $relative_permalink;
?> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-27T01:16:33.920

要获取 URL 中的路径，可以使用[parse_url](http://www.php.net/manual/en/function.parse-url.php)：

```
$url = 'http://blogs.mydomain.com/blog-name/2012/04/21/title-of-the-blog-post';
$urlInfo = parse_url($url);
print_r($urlInfo);
$urlPath = $urlInfo['path'];
echo "\n"; 
```

# ruby - YouTube_it Gem 身份验证错误

> ID：10343456
> 
> 赞同：1
> 
> 时间：2012-04-27T01:04:47.463
> 
> 标签：ruby, youtube-api

我正在使用 Youtube_it 并使用了这个例子[https://github.com/chebyte/youtube_it_rails_app_example](https://github.com/chebyte/youtube_it_rails_app_example)。但是我不断收到错误 BadAuthentication。这会让我相信我的用户、pass 或 dev_key 是错误的，但我已经检查了很多次。

还有什么可以导致这种情况的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T01:53:50.363

即使我的本地应用程序没有问题，我在 Heroku 上也遇到了同样的问题。

事实证明，谷歌阻止了来自未知来源的未经授权的帐户访问。我的 Gmail 帐户上弹出了一条通知，我只是按照说明解决了问题。

# android - 菜单检测远离其图标的点击

> ID：10343460
> 
> 赞同：0
> 
> 时间：2012-04-27T01:05:15.217
> 
> 标签：android, android-ui, android-menu

下面是我的应用程序的两张图片，第一张显示了您可以单击以激活菜单的总区域；第二个是活动的popupMenu。我认为它这样做的原因是 android:scaleType。

还有其他方法可以让图标停留在 VCenter、HRightedge 上吗？我只想在点击图标时激活菜单（但我认为我现在只是缩放图标以适应所有空间。有什么想法吗？

这是Java菜单：

```
public void showPopup(View v) {
            PopupMenu popup = new PopupMenu(this, v);
            MenuInflater inflater = this.getMenuInflater();
            inflater.inflate(R.menu.main_menu, popup.getMenu());
            popup.setOnMenuItemClickListener(this);
            popup.show();
        }

public boolean onMenuItemClick(android.view.MenuItem item) {
    switch (item.getItemId()) {
        case R.id.demographics:
            Intent intent = new Intent();
            intent.setClass(this, demoPanel.class);
            intent.putExtra("email", db.getUserDetails().get(db.KEY_EMAIL));
            startActivity(intent);
            return true;
        case R.id.settings:
            Log.v("v", "settings clicked");
            return true;
        default:
            return false;
    }
} 
```

这是 XML：

```
 <TableRow android:id="@+id/rememberTableRow"
        android:layout_width="wrap_content" android:layout_height="wrap_content">
        <TextView android:id="@+id/rememberTextView"
            android:layout_width="wrap_content" android:layout_height="wrap_content"
            android:text="@string/rememberDetails" android:layout_gravity="center" />

        <CheckBox android:id="@+id/rememberCheckBox"
            android:layout_width="wrap_content" android:layout_height="wrap_content"
            android:padding="20dp" />

        <ImageView
            android:id="@+id/imageView1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:onClick="showPopup"
            android:scaleType="fitEnd"
            android:src="@drawable/abs__ic_menu_moreoverflow_holo_dark" 
            android:layout_weight="1" 
            android:layout_gravity="center|right"/>

    </TableRow> 
```

![未选中](../Images/8aab4fa2007de3cbbc313e3c43931114.png)

![已选中](../Images/5ba555f3774febd76b14259f80e37fe0.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T17:50:22.733

我通过将布局权重移动到 CheckBox 来修复它（因此可以在大区域中选择它，而不仅仅是在其自身上方。

```
 <TableRow android:id="@+id/rememberTableRow"
        android:layout_width="wrap_content" android:layout_height="wrap_content">
        <TextView android:id="@+id/rememberTextView"
            android:layout_width="wrap_content" android:layout_height="wrap_content"
            android:text="@string/rememberDetails" android:layout_gravity="center" />

        <CheckBox android:id="@+id/rememberCheckBox"
            android:layout_width="wrap_content" android:layout_height="wrap_content"
            android:padding="20dp" 
            android:layout_weight="1"/>

        <ImageView
            android:id="@+id/imageView1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:onClick="showPopup"
            android:scaleType="fitEnd"

            android:src="@drawable/abs__ic_menu_moreoverflow_holo_dark"
            android:layout_gravity="center|right"/>

    </TableRow> 
```

不是一个理想的解决方案，但现在可以。

# javascript - 将 GET 数据传递给 POST 请求

> ID：10343464
> 
> 赞同：0
> 
> 时间：2012-04-27T01:05:42.160
> 
> 标签：javascript, html, node.js, express

我将 node.js 与 Express 一起使用。我有一个页面 /blah?name=john 生成一个带有表单的页面。当您单击表单提交按钮时，它将表单数据传递给 POST 请求。但是，我希望发布请求的一部分`?name=john`是来自生成页面的 GET 请求的任何数据。如何将名称变量与提交的表单数据一起转发到 POST 请求？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T10:13:31.870

动态地将查询字符串添加到一些隐藏的输入中。这样您的表格将如下所示：

```
<form action="/submit" method="post">
    <input type="text" placeholder="Some text here">
    <!-- Hidden input -->
    <input type="hidden" name="name" value="john">
    <input type="submit" value="submit">
</form> 
```

您应该根据 GET 参数在服务器上生成此隐藏输入:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T01:31:15.423

在 GET 请求期间，将表单上的 ACTION 设置为“MyPostPage.htm”+ query_string。当通过提交按钮发布表单时，它将使用表单的 ACTION 属性，该属性具有来自初始 GET 请求的添加查询字符串信息。

```
<HTML>
    <FORM ACTION="http://example.microsoft.com/sample.asp?name='fred'&age=27" METHOD="POST">
        Enter your name: <INPUT NAME="FName"><BR>
        Favorite Ice Cream Flavor:
        <SELECT NAME="Flavor">
            <OPTION VALUE="Chocolate">Chocolate
            <OPTION VALUE="Strawberry">Strawberry
            <OPTION VALUE="Vanilla" SELECTED>Vanilla
        </SELECT>
        <P><INPUT TYPE=SUBMIT>
    </FORM>
</HTML> 
```

# python - 谷歌应用引擎上的 mimetypes.mime_guess() 行为奇怪

> ID：10343468
> 
> 赞同：6
> 
> 时间：2012-04-27T01:06:12.970
> 
> 标签：python, google-app-engine, mime, webapp2

在我的 python shell 中，我可以做

```
>>> import mimetypes
>>> mimetypes.guess_type("ulla.svg")
('image/svg+xml', None) 
```

它的行为符合预期，但是，在谷歌应用引擎上运行相同的代码（或至少，这个相同的例子），它返回`(None, None)`

```
class TestHandler(webapp2.RequestHandler):
    def get(self):
        import mimetypes
        self.response.out.write(mimetypes.guess_type("ulla.svg")) 
```

我做错了吗？:)

**顺便说一句**- 我的 macbooks shell 是 python 2.7，app-engine 也是 2.7

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-27T12:04:05.483

`.svg`不包含在默认`types_map`嵌入`mimetypes`模块中：

```
>>> import mimetypes
>>> print '.svg' in mimetypes.types_map
False 
```

`mimetypes`[模块从系统文件](http://hg.python.org/cpython/file/2.7/Lib/mimetypes.py#l40)中添加额外的扩展名/mimetypes ，并且 svg 在大多数发行版中定义`/etc/mime.types`

```
$ cat /etc/mime.types  | grep svg
image/svg+xml                   svg svgz 
```

但不幸的是，它没有在 App Engine 沙箱中定义。

[您应该在公共问题跟踪器](http://code.google.com/p/googleappengine/issues/entry)上填写缺陷

作为一种解决方法，您可以自己注册 mimetype`mimetypes.add_type`

```
>>> import mimetypes
>>> mimetypes.guess_type("ulla.svg")
(None, None)
>>> mimetypes.add_type("image/svg+xml", ".svg")
>>> mimetypes.guess_type("ulla.svg")
('image/svg+xml', None) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-08T03:19:04.670

或者，您可以直接编辑 C:\Python27\Lib\mimetypes.py：

插入字典`'.svg' : 'image/svg+xml'`。`types_map`

信用：[来源](http://morkrispil.wordpress.com/2012/11/26/svg-support-for-app-engine-running-python-on-windows-xp/)

# c# - 从 alt 代码中获取一个字符（没有键盘事件）？

> ID：10343471
> 
> 赞同：1
> 
> 时间：2012-04-27T01:06:24.437
> 
> 标签：c#, keyboard, char

我需要列出 alt 代码中的所有字符。（如果您不知何故不知道那是什么，请按住 ALT 并在数字键盘上按一个，然后重复并按 2 等。）有没有办法在不使用键事件的情况下做到这一点？我到底要做的是这样的事情；

```
for (int i = 0; i < 10; i++) {
    Console.Write(KeyCode(i)); //Obviously KeyCode() doesnt actually exist, thats what im asking for :P
} 
```

如果重要的话，我需要它才能与 Winforms 和 WPF 一起使用，并且控制台会很好，但我不需要它..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T01:11:56.960

根据[维基百科](https://en.wikipedia.org/wiki/Alt_code)，以 0 开头的 4 位 alt 代码对应于[Windows-1252](https://en.wikipedia.org/wiki/Windows-1252)字符集，3 位代码对应于[DOS 代码页 437](https://en.wikipedia.org/wiki/Code_page_437)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T01:11:39.787

我才意识到你能做到

```
char aaaa = (char)i;
//i is any alt code 
```

这是最好/唯一的方法，这是什么编码？

# javascript - .attr('class') 返回多个类名，如何选择我要使用的一个？

> ID：10343479
> 
> 赞同：1
> 
> 时间：2012-04-27T01:07:38.820
> 
> 标签：javascript, jquery, jquery-selectors

当我使用 jQuery .attr('class') 时，我得到了'class1 class2 class3'，它们应该是单独的类，我如何选择其中一个类，例如我想更改 class1 上的 .css，我将如何遍历返回的类名，这些是我必须拆分的字符串，还是这些对象？谢谢！

顺便说一句，我的 html 看起来像这样：

```
<td class ="class1 class2 class3"> 
```

我通过在返回的 .attr('class') 上使用 .spilt 让它工作。我的目标是获得第二堂课，并在上面做一些 .css() 。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-27T01:17:16.160

`class`or属性在`className`单个字符串中返回以空格分隔的类名列表。如果要手动操作该属性，则必须自己手动将字符串解析为生成的类名。这是一个字符串，而不是单个对象。

现在，幸运的是，当您使用 jQuery 时，您很少需要自己动手。如果您想添加、删除或更改单个类名，您可以使用这些 jQuery 方法的组合，它们将为您完成所有解析：

```
.hasClass(classname)
.replaceClass(oldName, newName)
.removeClass(classname)
.addClass(classname) 
```

要删除一个类并添加一个单独的类，像这样将两个函数链接在一起并不少见。

```
x$.removeClass("foo").addClass("bar"); 
```

如果您真的只想在选择器中使用类名，那么您根本不必担心对象上有多少其他类名，因为 jQuery 内置的选择器库将为您处理所有这些。例如：

```
$(".myClassName").css("color", "red"); 
```

将查找在 className 属性中具有任何位置的所有对象，`myClassName`并将指定的 CSS 应用于这些对象。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-27T01:14:06.850

您可以使用 jquery[类方法](http://api.jquery.com/category/manipulation/class-attribute/)（addClass、removeClass、hasClass、toggleClass）来操作类

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-27T01:10:16.377

使用[类选择器](http://api.jquery.com/class-selector/)并让 jQuery 为您完成工作：

```
$('td.class1').css(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-27T01:12:39.123

Javascript

```
$(document).ready(function() {
    alert('Class 1 = ' + $('#test').attr("class").split(" ")[0]);
    alert('Class 2 = ' + $('#test').attr("class").split(" ")[1]);
    alert('Class 3 = ' + $('#test').attr("class").split(" ")[2]);
}) 
```

html

```
<div id="test" class="class1 class2 class3"></div> 
```

现场脚本：http: [//jsfiddle.net/7ZDP4/](http://jsfiddle.net/7ZDP4/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-27T01:13:47.803

```
$('td.class1').css('background','red');
$('td.class2').css('background','blue'); 
```

编辑，给定一个对象，您还可以使用：

```
if ( $(this).hasClass('class1') ){ /* do this */  } else {  } 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-04-27T01:15:04.823

我发现最简单的方法是使用 attr“href”作为单独的实体而不是使用类。

```
<td class="class1 class2" href="WhatYouWantToGrab" ></td> 
```

然后在 jQuery 中你会这样做

```
 $('.class1.class2').click(function() {
    var yourVariable = $(this).attr('href');

}); 
```

希望这可以帮助。

# c# - 有没有办法在不关闭套接字的情况下释放阻塞在套接字上的线程？

> ID：10343485
> 
> 赞同：0
> 
> 时间：2012-04-27T01:07:59.493
> 
> 标签：c#, multithreading, sockets

我有一个线程不断阻塞套接字，读取所有内容，然后再次阻塞，等待更多。它是异步通信协议的一部分，负责获取响应并将它们分发给发出请求的各种线程/窗口。它还处理响应“还活着？”超时消息等。我正在寻找的是一种通过方法调用关闭此循环的方法，基本上是为了释放套接字以进行一些手动干预，以防万一我永远需要它。

曾经有人告诉我解除阻塞在套接字上等待的线程的方法是让其他东西在套接字上调用 Close，尽管我不想这样做，但我宁愿让它保持打开状态。我过去处理这个问题的 Kludgier 方法是关闭套接字上的阻塞，让它休眠一段时间，或者设置套接字超时以保持循环，但这两种都是轮询的形式，我想避免。

也许有某种方法我可以使用事件来做到这一点，当套接字为我提供一些数据时是否会引发事件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T01:22:11.183

不幸的是，异步 I/O 编程是最难正确完成的事情之一（在任何语言中）。在 Windows 中，典型的方法是使用称为[I/O 完成端口](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365198%28v=vs.85%29.aspx)的东西。

幸运的是，在 .NET 中，支持异步事件的 Socket 类稍微简化了这一点，以通知您在套接字上已完成挂起的操作。[AsyncSocketEventArgs](http://msdn.microsoft.com/en-us/library/system.net.sockets.socketasynceventargs.aspx)的MSDN 文档有一个不错的示例。

有关更多信息，请查看 CodeProject.com 上的[C# Sockets Async Events](http://www.codeproject.com/Articles/83102/C-SocketAsyncEventArgs-High-Performance-Socket-Cod)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T08:37:43.937

如果要保持套接字打开，为什么要中断等待数据的线程？如果这个线程可以做其他事情以及等待他的套接字，你可以：

1) 使用“hEvent”等待句柄+WaitForMultipleObjects、完成例程或完整 IOCP 使用重叠 I/O。

2) 将所有非阻塞套接字活动移动到另一个线程，该线程在句柄数组上等待 WFMO，其中一个线程与仅执行阻塞读取的线程进行通信。

如果你真的必须解除阻塞等待阻塞调用的一个线程而不关闭它，你可以安排让它发送一些数据。在套接字上向对等客户端/服务器发送回显请求。然后它会回复，解锁等待它的 rx 线程。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T01:27:50.447

您可以使用 Thread.Interrupt - 阻塞调用将返回需要处理的 ThreadInterruptedException。

[你可以在这里](http://msdn.microsoft.com/en-us/library/system.threading.thread.interrupt.aspx)找到一个例子

# ruby - 无法在干净的 Lion 安装上安装 Ruby 1.9.3

> ID：10343486
> 
> 赞同：1
> 
> 时间：2012-04-27T01:08:03.203
> 
> 标签：ruby, rvm, ruby-1.9.3

尝试使用 RVM 安装 1.9.3。

在我的`make.log`

```
compiling readline.c
readline.c:1499:9: error: use of undeclared identifier 'username_completion_function'; did you mean 'rl_username_completion_function'?
                                    rl_username_completion_function);
                                    ^
readline.c:69:42: note: expanded from macro 'rl_username_completion_function'
# define rl_username_completion_function username_completion_function
                                         ^
/usr/local/include/readline/readline.h:443:14: note: 'rl_username_completion_function' declared here
extern char *rl_username_completion_function PARAMS((const char *, int));
             ^
1 error generated.
make[2]: *** [readline.o] Error 1
make[1]: *** [ext/readline/all] Error 2
make: *** [build-ext] Error 2 
```

我之前在 SL 中遇到过这个问题。我安装了 Xcode 4.3.2（也安装了命令行工具） 我安装了 readline 6.2.2。

添加`export ARCHFLAGS="-arch x86_64"`到我的`.bash_login`文件中。

我也尝试过`rvm install 1.9.3 --with-gcc=clang`，但我遇到了同样的错误，由于支持有限，我宁愿避免这样做。

有人有可行的程序吗？

编辑：

[链接到相关的开放 Ruby 票证](http://www.ruby-forum.com/topic/4110738)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T05:54:34.930

我解决了这个问题。RVM 无法识别已安装的 readline。有趣的是，readline 如何设法搞砸了这么多人的安装。

此命令将 rvm 指向正确的 readline 位置

```
rvm install 1.9.3 --with-gcc=clang --with-readline-dir=$rvm_path/usr 
```

# ruby-on-rails - RSpec 在请求规范中引用子记录

> ID：10343487
> 
> 赞同：0
> 
> 时间：2012-04-27T01:08:07.260
> 
> 标签：ruby-on-rails, testing, rspec, rspec-rails

我是 RSpec 的新手，我一直遇到的问题是了解哪些记录在/超出范围。请参阅下面的示例。我正在通过 FactoryGirl 创建一系列记录。例如，我创建了一个用户，然后在 before 块中我使用该用户登录。这似乎总是很好。但是每当我开始尝试使用以前创建的记录的子记录时，我似乎遇到了麻烦。例如与组。组需要一个用户和一个 group_type。每当我尝试对这些类型的记录做某事时，我都会遇到“Called id for nil”错误。我试过“puts group.name”，我可以看到该组正在创建，但由于某种原因，一旦“visit group_path(group)”行执行记录不再存在。我知道我' 我在这里缺少一些非常基本的东西。感谢任何帮助，因为这让我发疯了。

```
describe "activities page" do
  let(:user) { FactoryGirl.create(:user) }
  let!(:group_type) { FactoryGirl.create(:group_type) }
  let!(:group) { FactoryGirl.create(:group, user: user, group_type: group_type) }

 before do      
   sign_in user
   visit group_path(group)
   click_button "Check In"
 end 
```

错误：

```
1) Activity pages activities page 
 Failure/Error: visit group_path(group)
 RuntimeError:
   Called id for nil, which would mistakenly be 4 -- if you really wanted the id of nil, use object_id 
```

添加群展方式：

```
def show
  @group = Group.find(params[:id])
  @members = @group.members.paginate(page: params[:page])
  cookies[:group_id] = @group.id

  # Set Pusher chat
  @chat = Chat.find_by_group_id(@group.id)
  @user = current_user
  @messages = Message.find(:all, :conditions => ["chat_id = ?", @chat.id.to_s])
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-04T21:35:36.180

我相信这里的问题是您正在使用`let!`. 它们之间的区别在于非爆炸版本是懒惰的。仅在需要变量时才对其进行评估。
bang 版本在每个示例之前被调用。这里的问题是非惰性示例的顺序。我真的不认为你可以保证他们运行的顺序。在您的情况下，我相信 let!(:group) 在 let!(group_type) 运行之前运行会导致此失败。

# c - 有什么方法可以让 HP-UX 11.31(IA64) 支持 64-bit time_t

> ID：10343490
> 
> 赞同：2
> 
> 时间：2012-04-27T01:08:20.447
> 
> 标签：c, long-integer, hp-ux, time-t, itanium

我很惊讶在这个 HP-UX 11.31(IA64) 中得知 long 和 time_t 类型是 4 字节大小。我可以问为什么吗？

我的环境：

```
$ uname -a
HP-UX bdev1 B.11.31 U ia64 0999202893 unlimited-user license

$ cat /usr/include/sys/_time_t.h
......
#  ifndef _TIME_T
#    define _TIME_T
#    ifdef _KERNEL
typedef int32_t time_t;
#    else /* !_KERNEL */
_NAMESPACE_STD_START
typedef long time_t;
_NAMESPACE_STD_END
#    endif /* !_KERNEL */
#  endif /* _TIME_T */ 
```

我的代码：

```
$ cat sizeof.cpp

#include <iostream>
#include <ctime>

#define PRINT_SIZE(a) \
        std::cout << #a << ": " << sizeof(a) << std::endl

int main(void)
{
        PRINT_SIZE(long);
        PRINT_SIZE(time_t);
        return 0;
}

$ aCC sizeof.cpp

$ ./a.out
long: 4
time_t: 4 
```

任何人都可以帮助我找到一种通过 aCC 将 time_t 设置为 64 位的方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T01:18:10.370

我有一种预感，无论出于何种原因，g++ 决定在您的 HP-UX 系统上输出 32 位代码。[`-mlp64`您可以使用flag](http://gcc.gnu.org/onlinedocs/gcc-3.4.6/gcc/IA_002d64-Options.html)更改构建环境，如下所示：

```
$ g++ -Wall -mlp64 sizeof.cpp 
```

如果您使用的是[aCC，请使用`+DD64`](http://publib.boulder.ibm.com/infocenter/db2luw/v9/index.jsp?topic=%2Fcom.ibm.db2.udb.apdv.embed.doc%2Fdoc%2Fr0007659.htm)：

```
$ aCC +DD64 sizeof.cpp 
```

> HP-UX 11i v2 的对象格式是 ELF，因此您可以使用 +DD64 选项生成 LP64 代码。*（[来源](http://h21007.www2.hp.com/portal/download/files/unprot/stk/solaris_stk/portguides/TITLE.HTM#d0e3842)）*

# facebook - facebook 用户找不到我的 facebook 应用程序

> ID：10343492
> 
> 赞同：0
> 
> 时间：2012-04-27T01:08:56.883
> 
> 标签：facebook

我是 facebook 应用程序开发的新手，我已经发布了名为 Spydus Service 的应用程序，但 facebook 用户无法搜索它。只有当用户之前已经添加了应用程序时，它才会出现在搜索结果中。

有什么我在这里想念的吗？还有其他搜索/添加应用程序的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T01:21:47.183

你应该提交你的应用程序以供批准，检查[这个](https://developers.facebook.com/docs/opengraph/opengraph-approval/)

希望这可以帮助

# java - Java线程错误

> ID：10343493
> 
> 赞同：-5
> 
> 时间：2012-04-27T01:09:23.093
> 
> 标签：java, multithreading, runnable

我正在尝试使用“实现可运行”方法创建一个线程。然而，Java 抱怨缺少构造函数。有什么好的方法来处理这个？这是有问题的错误。

```
src\minecraft\net\minecraft\src\EntityClientPlayerMP.java:49: cannot find symbol
symbol  : constructor EntityClientPlayerMP()
location: class net.minecraft.src.EntityClientPlayerMP
         Runnable runnable = new EntityClientPlayerMP();
                             ^ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T01:11:21.843

在线快速搜索显示`EntityClientPlayerMP`有一个[构造函数](http://mcp.ocean-labs.de/files/jd124/client/net/minecraft/src/EntityClientPlayerMP.html#EntityClientPlayerMP%28net.minecraft.client.Minecraft,%20net.minecraft.src.World,%20net.minecraft.src.Session,%20net.minecraft.src.NetClientHandler%29)：

```
EntityClientPlayerMP(Minecraft par1Minecraft, World par2World,
    Session par3Session, NetClientHandler par4NetClientHandler) 
```

由于这是唯一的构造函数，因此创建该类的新对象将需要您使用它来调用它。

# html - 有没有办法用默认值创建一个选择列表，但没有下拉列表

> ID：10343501
> 
> 赞同：0
> 
> 时间：2012-04-27T01:10:21.160
> 
> 标签：html, css, drop-down-menu

确实有点奇怪的问题，但是有没有办法创建一个显示文本“选择一个”的选择选项列表，但是当你点击它时它实际上并没有下拉？

原因是，我将所有选项封装在从 div 标签创建的显示中，根据内容的大小和页面上的显示区域正确显示。我想在触发时使用带有下拉箭头的选择框，但不希望它做任何其他事情。

这些是 .asp 页面。顶级标签上的 css 允许我设置宽度，但是我希望能够将标签上的宽度设置为更宽，类别的大标题，但不幸的是这不起作用。但是我最初想使用一个下拉框，以便最初它看起来像一个标准框，因为此类项目的样式是特定于浏览器的。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T01:26:19.203

[http://jsfiddle.net/iambriansreed/SEen2/](http://jsfiddle.net/iambriansreed/SEen2/)

JavaScript

```
$('button').click(function(){
    $('div.options').show();
});​ 
```

HTML

```
<button type="button">
    <select>
        <option>Select One</option>
    </select>
    <div></div>
</button>

<div class="options" style="display: none;"> some other option window. </div>​ 
```

CSS

```
button {
    position: relative;
    border: none;
    background: none;
    padding: 0;
    outline: none;    
}
button div { 
    position: absolute;
    width: 100%;  
    z-index: 999;
    top: 0;
    bottom: 0;
} 
```

所以一个疯狂的问题的疯狂解决方案。包裹在按钮中的选择只是给了我一个可点击的区域。该按钮可以很容易地成为一个 div 包装器，但无论如何。按钮中的 div 位于选择的顶部，以防止对选择的任何点击。

jQuery 简单易懂。

# wpf - 更新版本/替换 BackgroundWorker 类？

> ID：10343505
> 
> 赞同：0
> 
> 时间：2012-04-27T01:11:01.880
> 
> 标签：wpf, backgroundworker, task-parallel-library

我一直在使用 .Net BackgroundWorker 类在我的 WPF 应用程序中提供响应式 UI。它运行良好，我很高兴继续使用它，但我想知道微软是否在更新的 .Net 版本中（可能在 TPL 中？）有一些东西，它建议继续进行最佳实践或指导？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T01:23:39.630

[.NET Framework 4.5 中的异步编程](http://msdn.microsoft.com/en-us/hh440482)

# javascript - 使用 Canvas 进行矩形操作的 JavaScript 库

> ID：10343506
> 
> 赞同：2
> 
> 时间：2012-04-27T01:11:14.957
> 
> 标签：javascript, html, canvas

我想创建类似于 UML / 流程图设计工具的东西。用户应该能够将形状拖到画布上，然后将文本添加到形状中，调整形状大小，重新定位形状，并通过角线将形状链接在一起。

# 问题：

是否有任何 JavaScript Canvas 库可供我在其上构建这样的应用程序？

如果您不确定我要达到的目标，请随时问我。提前致谢！

# 笔记：

任何教程也非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T12:15:36.573

我不了解库，我不使用库，而是通过控制所有鼠标事件自行完成所有操作：mousedown、mouseup、mousemove 等。

也许你可以通过阅读这个家伙的博客来学习，西蒙，他有很好的教程，比如：

[http://simonsarris.com/blog/510-making-html5-canvas-useful](http://simonsarris.com/blog/510-making-html5-canvas-useful)

[http://simonsarris.com/blog/225-canvas-selecting-resizing-shape](http://simonsarris.com/blog/225-canvas-selecting-resizing-shape)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-27T03:20:09.827

如果它不是太复杂或太大，那么 SVG 可能是一个更容易的选择。

[RaphaelJS](http://raphaeljs.com/)可能是最流行的 SVG 库。

可以做像这样简单的事情的画布库是[FabricJS](http://fabricjs.com/)和[KineticJS](http://www.kineticjs.com/)，但我认为它们中的任何一个都不能很好地支持链接的概念。

# php - 将android中的搜索界面链接到php搜索页面

> ID：10343507
> 
> 赞同：2
> 
> 时间：2012-04-27T01:11:18.990
> 
> 标签：php, android

嗨，我想知道如果我能做这样的事情，我有一个有两个页面的移动网站。一个用于搜索，第二个用于结果。我的目标是制作一个具有与 php 搜索页面完全一样的搜索界面的 android 应用程序。and when the options selected the results page will show up as a webview .sorry for my english and heres a picture to clear things up .Thanks [http://i.imgur.com/jGnin.jpg](http://i.imgur.com/jGnin.jpg) i just need a tip to replace the带有android搜索界面的php搜索页面。我在webview部分也不需要任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T13:45:14.037

您可以设置一个 WebView 来显示搜索页面，这对我来说似乎是更合乎逻辑的解决方案（可以这样实现：）

```
 WebView wv = (WebView)findViewById(R.id.webView); 
//you can load an html code  
wv.loadData("yourCode Html to load on the webView " , "text/html" , "utf-8"); 
// you can load an URL  
wv.loadUrl("http://www.stackoverflow.com"); 
```

或者如果你坚持只拥有一个不是 WebView 的界面，你需要修改你的搜索页面以某种方式获取数据（使用 GET 会是更好的选择，类似于谷歌）然后在玩家点击搜索时打开webview 并设置您的搜索条件，如下所示：

```
wv.loadUrl("http://www.stackoverflow.com?q=some+text+searc+in+your+app"); 
```

# vb.net - VB.NET 设置（导入）

> ID：10343509
> 
> 赞同：0
> 
> 时间：2012-04-27T01:11:37.963
> 
> 标签：vb.net

我希望它执行以下操作：当他们单击导入按钮时，打开多个文件（完成）然后将它们保存为设置。然后在表单加载时，打开这些文件，这样我就不必重新导入它们了！

我试过这个

```
For Each wl As String In File.ReadAllLines("settings.txt")
        OpenFileDialog1.FileName = (wl)
    Next 
```

在表单加载和 settings.txt 中包含 2 个文件名和位置。它只打开第二个文件而不是第一个文件。如何让它打开该设置文件中的所有文件？我还绑定了 ReadLines

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T01:55:31.933

将您的哈希破解方法抽象出来可能是最简单的：

```
Function hashType(ByVal filename As String) As Boolean
    If algo.Text = "MD5" Then
        Dim firstWord = (From word In IO.File.ReadLines(filename)
         Where String.Equals(MD5(word), hash.Text)).FirstOrDefault()
        If firstWord IsNot Nothing Then
            Label2.Text = firstWord
            Return True
        Else
            Label2.Text = "Hash Could Not Be Cracked"
        End If
    ElseIf algo.Text = "SHA1" Then
        Dim firstWord = (From word In IO.File.ReadLines(filename)
         Where String.Equals(SHA1(word), hash.Text)).FirstOrDefault()
        If firstWord IsNot Nothing Then
            Label2.Text = firstWord
            Return True
        Else
            Label2.Text = "Hash Could Not Be Cracked"
        End If
    End If

    Return False
End Function

Private Sub Thief3Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Thief3Button1.Click
    OpenFileDialog1.Filter = "Dictionaries (*.dic)|*.dic"
    OpenFileDialog1.FilterIndex = 1
    OpenFileDialog1.RestoreDirectory = True
    OpenFileDialog1.Multiselect = True
    OpenFileDialog1.ShowDialog()
End Sub

Private Sub Thief3TopButton1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Thief3TopButton1.Click
    Me.Close()
End Sub

Private Sub Thief3Button3_Click_2(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Thief3Button2.Click
    hashType(OpenFileDialog1.FileName)
End Sub

Private Sub Form1_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load
    For Each wl As String In File.ReadLines("settings.txt")
        If hashType(wl) Then Exit For
    Next
End Sub 
```

瞧。不过，我认为您可能希望在活动之外的其他地方执行此操作-首次创建表单时`Load`不会有任何内容。`hash.Text`

# java - 扑克游戏：用java创建一副牌

> ID：10343513
> 
> 赞同：3
> 
> 时间：2012-04-27T01:12:01.180
> 
> 标签：java, arrays, object, poker

我正在做一个创建扑克游戏的项目。尽管说明很清楚，但我在面向对象编程方面遇到了很多麻烦。

所以对于这个项目，我们必须创建四个对象，Card、Deck、Hand 和 Poker Hand。我已经完成了卡片对象的创建，现在正在处理卡片组对象。这就是我现在遇到麻烦的领域。我试过用谷歌搜索我的问题。但是，由于我是编程新手，所以我并没有真正了解他们的方法。例如，我不知道如何使用 ArrayList。我只知道非常基本的数组方法。

以下代码是我迄今为止为 Deck 对象所做的：

```
import java.util.*;

public class Deck {

    public static final int CARDS_IN_DECK = 52;
    public static final int SHUFFLE_SWAPS = 700;
    int shufflex = 0;

    private Card[] cards;
    private int card_holder;
    private int seed;

    public Deck(int seed) {
        this.cards = new Card[CARDS_IN_DECK];

        seed = 0;

        for (int i = 2; i <= 14; i++) {
            for (int j = 0; j <= 3; j++) {

                if (j == 0) {
                    cards[seed] = new Card(i, 'c'); // c = Clubs

                } else if (j == 1) {
                    cards[seed] = new Card(i, 'd'); // d == Diamond

                } else if (j == 2) {
                    cards[seed] = new Card(i, 's'); // s== Spade

                } else if (j == 3) {
                    cards[seed] = new Card(i, 'h'); // h = Heart
                }
                seed++;
            }
        }

    }

    public void shuffle(){
        Random rand = new Random ();
        int randomNumber = rand.nextInt(51);
        int randomNumber2 = rand.nextInt(51);

        while( shufflex < SHUFFLE_SWAPS ){

            HOW DO I DO THE SWAP HERE? DON'T KNOW THE SYNTAX
            I KNOW I NEED TO CREATE ANOTHER ARRAY TO TEMPORARY STORE THE FIRST CARD
            THEN I REPLACE THE FIRST CARD WITH THE SECOND CARD
            AND THEN REPLACE THE SECOND CARD WITH THE TEMPORARY CARD

            shufflex++;
        }
    }

    public Card nextCard() {

    }

    public String toString() {

    }
} 
```

以下是这部分的描述：

Deck 类代表一副 52 张扑克牌。我们将使用一组 Card 对象来管理卡片组中的实际卡片。

下面是类和实例字段，后面是Deck类的方法。按以下顺序完成每个项目。

类常量

声明并初始化以下公共静态类常量： CARDS_IN_DECK - 一个整数值，表示牌组中的牌张数。将此值设置为 52。 SHUFFLE_SWAPS - 一个整数值，表示在洗牌过程中卡片应切换位置的次数。数字越高，牌组的随机性和彻底洗牌就越多。将此值设置为至少 500。 实例字段

声明以下实例字段： Card 对象数组，用于管理卡片组中的 CARDS_IN_DECK 卡片。数组中的每个元素都是一个 Card 对象。一个整数，它保存要从卡片数组中处理的下一张卡片的索引。附带说明一下，这个变量将从 0 开始，每次发牌时增加 1（参见下面的方法）。一个整数变量，用于维护为测试提供的随机种子。方法

以下是您必须完成的方法列表。

`public Deck(int seed)`- 这是 Deck 类的构造函数。您必须首先使用您的类常量“CARDS_IN_DECK”初始化您的 Card 对象数组以容纳 52 张卡片。初始化数组后，您必须一次遍历一个元素并实际创建一个 Card 对象。必须创建所有卡片（四个花色中的每个花色为 2-14），并且不能有任何重复。种子参数应存储在种子的实例字段中。提示：在此构造函数中使用 Card.CLUBS、Card.LOWEST_VALUE 等。

`public void shuffle()`- 此方法处理重置牌组以便玩新手。此方法必须通过使用 Random 类来生成随机数来处理牌组的洗牌。您必须随机生成 0-51 之间的两个整数。然后，您必须在这两个位置交换卡片。例如，如果随机数是 20 和 11，Clubs 的 2 在数组的第 20 个元素中，而 Hearts 的 3 在数组的第 11 个元素中，则在这两张牌交换后，元素 20 将保存第 3 个红心和元素 11 将持有梅花 2。您必须重复生成两个数字并在相应位置交换卡片的过程，次数与类常量“SHUFFLE_SWAPS”指示的次数一样多。如果随机种子不是 -1，则您创建的 Random 对象应使用提供的随机种子。这将确保每次使用相同的随机种子运行程序时，牌组都会以相同的方式洗牌。例如，

`Random rand = new Random(seed);` 如果随机种子为 -1，则创建一个没有种子的 Random 对象，每次玩都会创建不同的游戏。例如，

`Random rand = new Random();` 最后，用于从牌堆中选择下一张要发牌的索引必须重置为 0。

`public Card nextCard()`- 此方法根据实例字段返回一副牌中的下一张牌，该实例字段知道数组中下一张要发牌的位置。在返回卡片之前，请确保更新此编号，以便下次调用该方法时，将返回卡片组中的下一张卡片（将其增加 1）。

`public String toString()`- 此方法返回 Deck 的 String 表示形式，这将在单元测试中派上用场。提示：为 Card 对象数组中的每个 Card 调用 Card 类的 toString() 方法。

* * *

我想我的`public Deck (int seed)`方法是对的。你能看一下吗？卡片对象的参数为（int value，char suit），所以对于deck，我返回（int，char）。在这种方法之后，我不确定如何从那里开始。有人可以给我一些指示吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T01:25:43.343

你应该使用`ArrayList`甲板有两个原因。首先，添加/删除卡片会更容易。其次，在`java.utils.Collections`. 所以要创建一个 ArrayList: `ArrayList<Card> deck = new ArrayList<Card>()`，添加一张卡片：`deck.add(someCard | int_index)`，删除一张卡片：`deck.remove(someCard | int_index)`，洗牌：（`deck = Collections.shuffle(deck)`记得 import `java.utils.Collections`）。

# c# - 防止客户端在基本网络服务器中连接两次

> ID：10343514
> 
> 赞同：2
> 
> 时间：2012-04-27T01:12:09.213
> 
> 标签：c#, tcp, webserver

我需要为家庭作业实现一个非常基本的 Web 服务器。我这样做的方式如下：

```
 TcpListener server = new TcpListener(IPAddress.Any, 8181);
        server.Start();

        // when a client connects this is what we will send back
        var HttpHeader = 
              "HTTP/1.1 200 OK\r\n"
            + "Content-Type: text/html\r\n"
            + "Content-Length: [LENGTH]\r\n\r\n";

        var html = "<h1>Hello Wold</h1>";

        // replace [LENGTH]  with the length of html
        HttpHeader = HttpHeader.Replace("[LENGTH]", html.Length.ToString());

        while (true)
        {
            // wait for client to connect
            var client = server.AcceptTcpClient();

            using (var stream = client.GetStream())
            {
                var messageToSend = HttpHeader + html;
                var sendData = System.Text.Encoding.ASCII.GetBytes(messageToSend);
                stream.Write(sendData, 0, sendData.Length);

                Thread.Sleep(2000);                    
            }                
        } 
```

**这是我运行程序时发生的情况：**

![在此处输入图像描述](../Images/69e16587adb85d63de86745ac772a03e.png)

如您所见，第一个循环效果很好。当我再次循环希望连接不同的其他客户端时，问题就来了。

* * *

## 编辑

![在此处输入图像描述](../Images/382933d476e06ad192d91c6402d860bd.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-27T01:17:29.280

听起来您的问题始于使用浏览器并假设它会发出一个请求。它不会——它会做一些额外的事情，比如尝试请求 FavIcon。使用 WGET 或使用 HttpWebRequest 编写测试客户端，它将为您提供一致可靠的结果。如果那不能得到你想要的结果 - 然后回来。

# cuda - cuda 是否应将唯一块索引及其计算移至共享内存？

> ID：10343515
> 
> 赞同：0
> 
> 时间：2012-04-27T01:12:10.440
> 
> 标签：cuda, synchronization, shared-memory

假设我们有一个内核，它需要一个唯一的块索引，并且应该尽可能地扩展，以便它应该在 3D 网格中扩展。

计算看起来很复杂，让一个线程执行它并将其存储在共享内存中。这是个好主意吗？
在所有文献中它总是存储在寄存器中，但是共享内存的缺点是什么？

我不确定，但共享内存读写访问是 4 个周期，而寄存器是 1 个周期？

**代替：**

```
__global__ kernel()
{
    //get unique 3D block index
    const unsigned long long int blockId = blockIdx.x //1D
        + blockIdx.y * gridDim.x //2D
        + gridDim.x * gridDim.y * blockIdx.z; //3D
} 
```

**也许使用：（假设只使用块的 x 维度）**

```
__global__ kernel()
{
    __shared__ unsigned long long int blockId_s;

    if(threadIdx.x == 0)
        blockId_s = blockIdx.x //1D
            + blockIdx.y * gridDim.x //2D
            + gridDim.x * gridDim.y * blockIdx.z; //3D
    __syncthreads();
} 
```

这将为每个线程节省一个寄存器，这在计算能力 1.x 中是昂贵的。

我没有测试，也不知道它对性能是好是坏。`__syncthreads()`cc 1.x 上的另一个可用寄存器是一个参数，但使用语句时性能应该会慢一些。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-05-26T05:55:42.743

在这种情况下，答案是肯定的，但主要是因为生成的代码使用了更少的寄存器，这允许更高的整体占用率和一些速度。尽管代码在第一个 warp 中有一些分支分歧，加上一个同步原语。

但是，这不应被视为通用规则，唯一确定的方法是编写代码并在目标 GPU 上对其进行基准测试。

*此答案是作为社区 wiki 条目从评论中添加的，以将此问题从未回答的队列中删除。*

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-04-28T19:43:33.977

在共享人的情况下，每次访问 blockId_s 时都会发生 n 路银行冲突 (n=WarpSize)。[CUDA C 编程指南，5.3.2.3]

并且 + shared mem 比 register 慢。

# scala - 代码使用 scalac 编译，但不在 REPL 中

> ID：10343516
> 
> 赞同：0
> 
> 时间：2012-04-27T01:12:16.097
> 
> 标签：scala, read-eval-print-loop

我有一些代码，比如说`Foo.scala`可以很容易地用 编译`scalac`，但是当我启动 REPL 并说`:load Foo.scala`. 我想这是标准的和记录的，但似乎找不到任何相关信息。

该文件如下所示：

```
abstract class BST[A](implicit cmp: A => Ordered[A]) {
  def fold[B](f: (B, A) => B, acc: B): B = {
    this match {
      case Leaf()        => acc
    }                 
  } 
} 

case class Leaf[A]()(implicit cmp: A => Ordered[A]) extends BST[A] 
```

我得到这样的错误：

```
scala> :load BST3.scala
Loading BST3.scala...
<console>:10: error: constructor cannot be instantiated to expected type;
 found   : Leaf[A(in class Leaf)]
 required: BST[A(in class BST)]
             case Leaf()        => acc
                  ^ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T01:13:55.360

看起来`:load`试图逐块解释文件。由于您的块是相互依赖的，因此这是一个问题。

尝试使用“粘贴模式”将多个块粘贴到 REPL 中，以便 Scala 一起编译：

```
scala> :paste

// Entering paste mode (ctrl-D to finish)

abstract class BST[A](implicit cmp: A => Ordered[A]) {
  def fold[B](f: (B, A) => B, acc: B): B = {
    this match {
      case Leaf()        => acc
    }                 
  } 
} 

case class Leaf[A]()(implicit cmp: A => Ordered[A]) extends BST[A]

// Exiting paste mode, now interpreting.

defined class BST
defined class Leaf 
```

# blackberry - 为什么这段代码不起作用？由于某种原因它不会覆盖文件

> ID：10343521
> 
> 赞同：1
> 
> 时间：2012-04-27T01:13:18.817
> 
> 标签：blackberry, sd-card, overwrite

我正在使用以下代码将图像写入`sdcard`然后显示为墙纸，但它只能工作一次，也就是说，它不会改变任何其他图片，所以我猜它没有覆盖文件，为什么?

**D.kF[]**是一个位图数组 **D.bgNumber**是一个 int

```
Graphics graphics = Graphics.create(D.kF[D.bgNumber]);  

JPEGEncodedImage encoder = JPEGEncodedImage.encode(D.kF[D.bgNumber], 100);  
try {  
    ExtendedFileConnection fconn = (ExtendedFileConnection) Connector  
    .open("file:///store/home/user/pictures/image.jpg",  
            Connector.READ_WRITE);  
    fconn.enableDRMForwardLock();  
    if (!fconn.exists()) {  
        fconn.create();  
    }  
    OutputStream os = fconn.openOutputStream();  
    os.write(encoder.getData());  
    os.close();  
    fconn.close();  
} catch (Exception e) {  
    System.out.println("Output file error: " + e.getMessage());  
}  

HomeScreen.setBackgroundImage("file:///store/home/user/pictures/image.jpg"); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T05:11:47.530

我认为存在缓存问题。您的图像文件已更改，但墙纸没有更改，因为它使用缓存的旧图像。

要在您的代码中解决此问题，请删除旧图像文件，使用新的不同名称生成新图像文件并使用此新文件设置背景。

# java - Android 检查设备中的日期格式

> ID：10343522
> 
> 赞同：2
> 
> 时间：2012-04-27T01:13:21.150
> 
> 标签：java, android, date

检查设备中设置的日期格式的最佳方法是什么？一种类似于控制的方法`PhoneStateListener.LISTEN_SIGNAL_STRENGTH`，例如……快速或即时的东西。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T02:43:38.097

不确定这是否是您所追求的，但我知道存储在 Android`Events`中的联系人日期（例如生日）以`String`格式存储为 a `YYYY-MM-DD`，或者`0000-MM-DD`年份未知。不幸的是，这是无证的。我希望所有内部日期都符合相同的结构，以帮助保持整个环境的一致性。

# iphone - 在实例变量中保存块

> ID：10343526
> 
> 赞同：3
> 
> 时间：2012-04-27T01:13:56.327
> 
> 标签：iphone, objective-c, ios, cocoa-touch, objective-c-blocks

我们如何声明一个全局（私有实例变量）来接受其中的一个块。我们是否需要综合它以及它对内存管理的影响是什么。

我从第三方方法收到了一个块，我想将其保存在实例变量中并在以后使用它。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-27T02:55:18.347

这是在后台完成一些工作后为完成回调存储块的（ARC-less）示例：

工人.h：

```
@interface Worker : NSObject
{
    void (^completion)(void);
}
@property(nonatomic,copy) void (^completion)(void);
- (void)workInBackground;
@end 
```

工人.m：

```
@implementation Worker
@synthesize completion;

- (void)dealloc
{
    Block_release(completion);

    [super dealloc];
}

- (void)setCompletion:(void (^)(void))block
{
    if ( completion != NULL )
        Block_release(completion);

    completion = Block_copy(block);
}

- (void)workInBackground
{
    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^(void)
    {
        // Do work..

        dispatch_async(dispatch_get_main_queue(), completion);
    });
}

@end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-27T01:17:39.313

请参考[`Blocks Programming Topics`](http://developer.apple.com/library/ios/#documentation/cocoa/Conceptual/Blocks/Articles/bxUsing.html#//apple_ref/doc/uid/TP40007502-CH5-SW2)：

> 您可以使用 C 函数复制和释放块：
> 
> ```
> Block_copy();
> Block_release(); 
> ```
> 
> 如果你使用的是 Objective-C，你可以发送一个 block `copy`、`retain`和`release`(and `autorelease`) 消息。
> 
> 为避免内存泄漏，您必须始终平衡 a`Block_copy()`与`Block_release()`. 您必须平衡`copy`or`retain`与`release`(or `autorelease`) — 除非在垃圾收集环境中。

# mysql - 在 SQL 中创建表

> ID：10343531
> 
> 赞同：0
> 
> 时间：2012-04-27T01:14:39.183
> 
> 标签：mysql

有谁知道如何在 SQL 中做到这一点？

第 1 步：在 MySQL 中创建一个名为 users 的表，至少包含 3 个字段。

第 2 步：id 是第一个使其成为主要的，也是 auto_increment。用户名是第二个。密码是第三个。

如果有人这样做，请给我代码或解释我需要做什么，我想学习如何去做

-预先感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T01:23:21.107

我认为，如果您想学习如何做，最好阅读一些有关该主题的教程。A quick [Google for MySQL create table](http://www.google.co.uk/search?q=mysql+create+table)有很多建议。

我怀疑只看代码*比*阅读教程或阅读手册更有启发性，但既然你问了：

```
CREATE TABLE users (
    id INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
    username VARCHAR(50),
    password VARCHAR(50)
); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T01:25:27.307

[您可以尝试使用SQL Fiddle](http://sqlfiddle.com/)在 MySQL 中创建表。这是一个在线工具，有助于快速原型设计...

看看这个小提琴：[http ://sqlfiddle.com/#!2/a7da8/1](http://sqlfiddle.com/#!2/a7da8/1)

# c - Winsock - 为什么 ZNC（和 IRC 保镖）不接受我的 winsock 连接？

> ID：10343533
> 
> 赞同：0
> 
> 时间：2012-04-27T01:15:11.853
> 
> 标签：c, winsock, irc

使用典型的 irc 客户端，我可以输入：

```
/server localhost 6667 nick:pass 
```

当我输入为 ZNC 配置的 nick:pass 时，（IRC 保镖）我被转发到我的 server/nick:pass 组合下 znc 连接到的服务器。

如何以编程方式同时打开所有这些参数的winsock连接？`/server localhost 6667 nick:pass`

我尝试在连接后发送数据，但 znc 似乎忽略了请求。或者我根本没有连接到它。此代码已连接到不需要 Ping 身份验证的 IRC 服务器，所以我知道它可以工作。

```
#define AF_INET                    2
#define SOCK_STREAM                1
#define SOL_SOCKET                 0xffff
#define SO_SNDTIMEO                0x1005

string server_addr = "127.0.0.1";
int server_port = 6667;

void ircconnect(){
int struct_sockaddr[4];
int addr, port_low, port_high;
int opts[1];
int c;

if (irc_disabled == 1) return(0);

// fill the sockaddr struct
addr = inet_addr(server_addr);
port_low = server_port & 0x00ff;
port_high = (server_port & 0xff00) >> 8; 
struct_sockaddr[0] = AF_INET | (port_high << 16) | (port_low << 24);
struct_sockaddr[1] = addr;
struct_sockaddr[2] = 0;
struct_sockaddr[3] = 0;

// connect
s = socket(AF_INET, SOCK_STREAM, 0);

opts[0] = 1000; // send timeout milliseconds
setsockopt(s, SOL_SOCKET, SO_SNDTIMEO, opts, 4);
c = connect(s, struct_sockaddr, 16);

Sleep(5000);

sendLine(nick + ":" + password); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T18:25:37.443

请参阅下面的python解释：

```
int struct_sockaddr[4];
int addr, port_low, port_high;
int opts[1];
int c;
string zncauth = nick + ":" + password;

if (irc_disabled == 1) return(0);

// fill the sockaddr struct
addr = inet_addr(server_addr);
port_low = server_port & 0x00ff;
port_high = (server_port & 0xff00) >> 8; 
struct_sockaddr[0] = AF_INET | (port_high << 16) | (port_low << 24);
struct_sockaddr[1] = addr;
struct_sockaddr[2] = 0;
struct_sockaddr[3] = 0;

// connect
s = socket(AF_INET, SOCK_STREAM, 0);
opts[0] = 1000; // send timeout milliseconds
setsockopt(s, SOL_SOCKET, SO_SNDTIMEO, opts, 4);
c = connect(s, struct_sockaddr, 16);

// send
sendLine("NICK zncbotnick");
sendLine("USER znc bot znc :znc");
sendLine("PASS " + zncauth);

void sendLine(string text){
    if (irc_disabled == 1) return(0);
    text = text + "\r\n";
    send(s, text, StringLen(text), 0);
} 
```

上面的代码终于可以工作了，这对我在 python 中使用 ZNC 进行身份验证有用。基本上，在另一种语言中，我向 znc 发送命令，但他们从未到达 znc，因为代码缺少 return 和 newline characters `'\r\n'`。使用 python，我能够实时诊断问题。

```
#!/usr/bin/env python
# -*- coding: utf-8 -*-

//Test.py
import socket

zncauth = 'nick:password'
server_addr = '127.0.0.1'
server_port = 6667
s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
s.connect((server_addr, server_port))   
s.send( 'NICK botnick\r\n')
s.send( 'USER znc bot znc :znc\r\n')
s.send( 'PASS ' + zncauth + ' \r\n') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T02:27:50.663

在使用 IRC 客户端与您的代码连接到 ZNC 时，使用像 Wireshark 这样的数据包嗅探器来查看套接字流量，并查找正在发送的命令中的任何差异。

话虽如此，您的代码中也有一些奇怪之处。试试这个：

```
#define AF_INET                    2
#define SOCK_STREAM                1
#define SOL_SOCKET                 0xffff
#define SO_SNDTIMEO                0x1005

string server_addr = "127.0.0.1";
u_short server_port = 6667;

void ircconnect(){
    struct sockaddr_in addr;
    int opts;
    int c;

    if (irc_disabled == 1) return(0);

    // fill the sockaddr struct
    memset(&addr, 0, sizeof(addr));
    addr.sin_family = AF_INET;
    addr.sin_port = htons(server_port);
    addr.sin_addr.s_addr = inet_addr(server_addr.c_str());

    // connect
    s = socket(AF_INET, SOCK_STREAM, 0);

    opts = 1000; // send timeout milliseconds
    setsockopt(s, SOL_SOCKET, SO_SNDTIMEO, (char *)&opts, sizeof(opts));
    c = connect(s, (struct sockaddr *)&addr, sizeof(addr));

    Sleep(5000);

    sendLine(nick + ":" + password); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-01T19:06:35.070

IRC 服务器实现 Internet 中继聊天协议。

该协议与您在 IRC 客户端中键入的命令没有任何共同之处。由于您不尊重 IRC 协议，因此服务器不理解您在说什么，因此最多会忽略您，或者只是断开连接。

该协议在一组 4 个 RFC 中定义：[RFC2810](http://www.rfc-editor.org/cgi-bin/rfcdoctype.pl?loc=RFC&letsgo=2810&type=http&file_format=txt)、[RFC2811](http://www.rfc-editor.org/cgi-bin/rfcdoctype.pl?loc=RFC&letsgo=2811&type=http&file_format=txt)、[RFC2812](http://www.rfc-editor.org/cgi-bin/rfcdoctype.pl?loc=RFC&letsgo=2812&type=http&file_format=txt)和[RFC2813](http://www.rfc-editor.org/cgi-bin/rfcdoctype.pl?loc=RFC&letsgo=2810&type=http&file_format=txt)。

在尝试实现与 IRC 服务器交互的任何程序之前，您应该阅读这些文档并了解 IRC 架构和协议。

此外，您会很容易地找到一些为您实现协议的库。

# actionscript-3 - 动作脚本 3 - 捕获当前播放的声音并持续写入服务器（用于流式传输）

> ID：10343541
> 
> 赞同：1
> 
> 时间：2012-04-27T01:15:54.757
> 
> 标签：actionscript-3, flash, streaming

基本上，当我的 Flash 程序正在运行时，我希望它能够播放当前的声音并将该流连续写入服务器。这样另一个用户就可以收听该流。基本上就像一个网络广播。

这是我天真地猜测该怎么做。

```
client:
  capture current playing sounds
  convert to mp3
  write to mp3 file on server

other client:
  load that mp3 and play the streaming song 
```

任何熟悉此解决方案的人？代码示例？我看过但对动作脚本 3 的了解还不够远：/

注意：我不是从麦克风捕获声音，而是当前播放的声音。（我写了一个简单的波形分析器，可以对播放的声音做出反应）

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T23:15:21.337

正如 Amy 在评论中提到的： [Adobe Flash Media Server](http://www.adobe.com/products/flash-media-server-family.html?sdid=EDXSC&skwcid=TC%7C22193%7Cadobe%20flash%20media%20server%7C%7CS%7Cb%7C14152144342)

我还找到了另一个（更便宜的）解决方案： [Wowza](http://www.wowza.com)

# mysql - MYSQL 将带有子查询的慢速更新转换为（更快？）连接

> ID：10343542
> 
> 赞同：0
> 
> 时间：2012-04-27T01:15:59.113
> 
> 标签：mysql, performance, join, subquery

我有一个使用 mysql 中的子查询的查询，它变得非常慢，最多需要几分钟，而我所做的所有其他查询都非常快。

当我发现子查询很可能是一个坏主意时，所以我想将此子查询转换为连接，就像我对所有其他使用对性能影响很大的子查询的查询所做的那样。

我的大多数其他查询都非常简单，但这个让我抓狂。

这是一个例子。

我有客户和账单。客户有多个账单。法案有状态。账单有一个参数“随便”。

我需要更新“所有账单都处于状态 1 或 2 并且账单参数不是 2 的所有客户端”

因为我不知道该怎么做，所以我使用了反转，即“所有没有账单的客户不在状态 1 和状态 2 中，并且账单参数不是 2”

这是我现在使用的两个带有子查询的变体，一个使用 count，一个使用“not in”，但它们似乎同样慢。

```
update client cl , bill bi 
set cl.parameter = "parameter1" 
where cl.parameter="parameter2" 
    and bi.whatever != "2" 
    and bi.client_id = cl.id  
    and (select count(cl.id) 
            from bill bi 
                where bi.client_id = cl.id 
                    and bi.state!="state0" 
                    and bi.state != "state1" 
        ) = 0; 
```

mysql状态“发送数据”变慢

```
update client cl , bill bi 
set cl.parameter = "parameter1"  
    where  cl.parameter="parameter2" 
        and bi.whatever != "2" 
        and bi.client_id = cl.id  
        and cl.id not in  (select distinct cl.id 
                                from bill bi  
                                    where bi.client_id = cl.id 
                                        and  ( bi.state!="state1" 
                                        and bi.state != "state2" 
                            ) ; 
```

在 mysql 状态下变慢“复制到临时表”

我尝试了几个小时，但如果没有那个缓慢的子查询，我无法将其转换为有用的东西。谁能告诉我如何使用连接或比现在更快的方法来做到这一点？

**更新**

多亏了 DRapp，这产生了完全相同的结果并且速度更快。对于我到目前为止可以测试的内容，查询时间减少到几秒钟，而且是几分钟前。

```
select
  c.id,
  sum( if( b.State IN ( "State1", "State2" ), 1, 0 )) as OkStatesCnt,
  sum( if( b.State NOT IN ( "State1", "State2" ) or b.whatever=2, 1, 0 )  ) as AnyOtherState
from
  client c
     join bill b
        ON c.id = b.client_id
where
  c.parameter = "parameter2"
   group by
      c.id
  having
      OkStatesCnt > 0
  AND AnyOtherState = 0 
```

和

```
UPDATE client cl,
  ( full select query from above ) as PreQualified
 set cl.parameter = "parameter1"
 where cl.id = PreQualified.id 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T01:47:42.333

为了预先确保将包含哪些客户端，您可以自行运行此查询...

```
select
      c.id,
      sum( if( b.State IN ( "State1", "State2" ), 1, 0 )) as OkStatesCnt,
      sum( if( b.State IN ( "State1", "State2" ), 0, 1 )) as AnyOtherState
   from
      client c
         join bill b
            ON c.id = b.client_id
           AND b.whatever != "2"
   where
      c.parameter = "parameter2"
       group by
          c.id
   having
          OkStatesCnt > 0
      AND AnyOtherState = 0 
```

如果这实际上是您正在寻找的，您可以在您的更新中实施，例如

```
UPDATE client cl,
      ( full select query from above ) as PreQualified
   set cl.parameter = "parameter1"
   where cl.id = PreQualified.id 
```

# jqgrid - jqGrid 4.3.2 失败

> ID：10343545
> 
> 赞同：0
> 
> 时间：2012-04-27T01:16:07.467
> 
> 标签：jqgrid, keyboard, editing, inline-editing

尝试这个版本的 jqGrid 并遇到问题。

1.  ESC 键未针对 Chrome 和“editRow”事件正确编程。大痛。
2.  ENTER 键不保存在使用 Firefox 的 editRow 选择元素上
3.  将列设置为具有编辑规则：由于缺少 isEmpty 的 Javascript 错误而导致必需的爆炸

使这个版本几乎无法使用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T07:01:47.000

试试我在[这里](https://stackoverflow.com/a/10275708/315935)和[这里描述的修复](http://www.trirand.com/blog/?page_id=393/bugs/jqgrid-4-3-2-bug-when-field-is-requried/#p26481)[的演示](http://www.ok-soft-gmbh.com/jqGrid/EditingTest.htm)。您在问题中描述的问题无法在演示中重现。

目前 jqGrid 没有自动测试（例如[使用](https://github.com/jquery/jquery-ui/tree/master/tests)jQuery UI ）。因此，更改会产生新的错误。在使用 jqGrid 的开发人员发现错误的情况下，用户应提供可用于重现错误的演示。因此，如果您下次遇到一些问题，您应该提供测试用例而不是您遇到的问题列表。

# c++ - 如何创建返回类型为 1) true/false 和 2) 动态数据的对象

> ID：10343546
> 
> 赞同：1
> 
> 时间：2012-04-27T01:16:11.220
> 
> 标签：c++

正如 mysql_fetch_array() 方法的返回类型既是布尔值，也是数值数组和关联数组，您可以在其中评估 sql 查询是否成功，如果成功，将返回数据存储到数组中，然后访问同一个对象 $row并显示如下所示的行：

```
while($row = mysql_fetch_array($result)){
    echo $row['name']. " - ". $row['age'];
    echo "<br />";
} 
```

所以你可以测试 $row 变量的真假，然后在这种情况下访问 $row 变量是一个数组，并能够用它做事。

我想在 C++ 中做同样的事情

我试图创建一个方法，该方法将根据方法中的一些条件返回枚举值，如果该方法为真，则执行其他操作。问题是我不知道如何创建这种数据类型。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T01:44:44.350

您正在寻找的是`std::pair`. 它有两个值。

```
#include <iostream>
#include <utility>

std::pair<bool, int> foo (int i)
{
    std::pair<bool, int> ret;

    if (i != 5)
    {
        ret.first = true;
        ret.second = i;
    }

    else
    {
        ret.first = false;
        ret.second = 0;
    }

    return ret;
}

int main()
{
    if (foo (6).first)
        std::cout << foo (6).second << '\n'; //prints

    if (foo (5).first)
        std::cout << foo (5).second; //doesn't print
} 
```

编辑：
啊，看到这是我第一次处理`std::pair`，我忽略了一些东西。您可以使用`std::make_pair (true, i)`并返回它以减少杂乱的功能。返回`std::pair<bool, int> (true, i)`也应该有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T01:55:43.540

使用智能指针：

```
while (std::shared_ptr< std::map<string, Variant> > row = fetch_row(result)) {
    std::cout << (*row)["name"] << " - " << (*row)["age"] << "\n<br />";
} 
```

如果有另一行可用，请确保`fetch_row()`返回指向地图的指针，或者在行数用完时返回空指针。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T02:06:07.833

您可以使用[boost optional](http://www.boost.org/doc/libs/1_49_0/libs/optional/doc/html/index.html)，它正是为此目的而设计的：重写 chriss 的代码以使用它看起来像这样：

```
boost::optional<int> foo (int i)
{
    if (i != 5)
    {
        return boost::optional<int>(i);
    }

    else
    {
        return boost::optional<int>();
    }
}

int main()
{
    boost::optional<int> f6 = foo(6);
    if ( f6 )
        std::cout << *f6 << '\n'; //prints

    boost::optional<int> f5 = foo(5);
    if ( f5 )
        std::cout << *f5 << '\n'; //doesn't print
} 
```

与 using 相比，这样做的一个好处`std::pair<bool,X>`是它适用于没有默认构造函数`boost::optional<X>`的类型。`X`

# css - 一个 div 的 CSS 绝对定位受不相关 div 中的边距影响

> ID：10343551
> 
> 赞同：6
> 
> 时间：2012-04-27T01:16:39.690
> 
> 标签：css, margin, css-position

鉴于以下情况，我希望页面顶部有一个 200 像素的红色框，然后是 100 像素的空白区域，然后是底部的紫色框。这就是 Dreamwever 中的 WYSIWYG 视图向我展示的内容，但我在 FF IE Chr 中得到的是页面中间的一个红色框。有趣的是，如果我为包装器 div 添加边框，我会得到我所期望的。

所以发生的事情是 #content div 的 margin-top:300px 正在向下推 #header div。由于#header div 绝对位于#wrapper div 内部，我不明白为什么会这样。

```
<style>
#wrapper{
    width:960px;
    margin:0 auto;
    background-color:#fff;
    position:relative;
    border:0px solid green;
    }
#header{
    width:960px;
    height:200px;
    background-color:#f00;
    position:absolute;
    top:0px;
    left:0px
    }
#content{
    width:960px;
    background-color:#f2f;
    margin-top:300px;
    }
</style>

<div id="wrapper">
    <div id="header">header</div>
    <div id="content">content<br  /><br  /><br  /></div>
</div> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-27T01:48:16.657

是的，你在正确的轨道上。真正发生的是 300px 边距被应用到**#wrapper** *（因此，随着它向下推 #header）*，因为 W3C 盒模型的[折叠边距](http://www.w3.org/TR/CSS2/box.html#collapsing-margins "折叠边距")行为。

在这种情况下，“一个盒子的上边距和它的第一个流入子的上边距”被折叠：**#wrapper**的 0px 上边距和**#content**的 300px 上边距组合成一个上边距对于**#wrapper** *（#content 是第一个流入的孩子，因为#header 具有绝对位置）。*

除了边框或更改位置之外，解决此问题的一种简单方法`#header`是将边距更改为填充：

```
#content{
  width:960px;
  background-color:#f2f;
  padding-top:300px;
} 
```

见[http://www.w3.org/TR/CSS2/box.html#collapsing-margins](http://www.w3.org/TR/CSS2/box.html#collapsing-margins "折叠边距")

# javascript - JavaScript 中的 void、eval 和 Function 构造函数有什么区别？

> ID：10343553
> 
> 赞同：5
> 
> 时间：2012-04-27T01:16:54.187
> 
> 标签：javascript, eval, void, ecmascript-5, function-constructor

```
void(document.body.innerText += 'hi')

eval(document.body.innerText +='\nbye')

Function(document.body.innerText += '\n!!!')

void(Function(function foo(){document.body.innerText += '\n>hi2'; return true}).toString())();

eval(Function(function foo(){document.body.innerText += '\nbye2'; return true}).toString())();

Function(Function(function foo(){document.body.innerText += '\n!!!2'; return true}).toString())();
```

在这些不同的语句中执行代码的处理模型是什么？

```
void(alert('hi'))
undefined

eval(alert('hi'))
undefined

Function(alert('hi'))
function anonymous() {
  undefined
}

eval(Function(function foo(){return true}).toString())();
TypeError: undefined is not a function

void(Function(function foo(){return true}).toString())();
TypeError: string is not a function

Function(Function(function foo(){return true}).toString())();
undefined 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-27T01:37:39.070

在[本文](http://perfectionkills.com/global-eval-what-are-the-options/)中解释了`eval`和`Function`构造函数：

> (…) 全局内置`eval`函数**在调用者范围内评估代码**。
> 
> 从构造函数创建的函数内部执行的代码`Function`并没有真正在全局范围内执行。但是，它也不会在本地范围内执行，这可能会导致混淆。 `Function`构造函数创建一个函数，其作用域链只包含一个全局作用域（当然，前面是函数自己的激活对象）。`Function`通过构造函数创建的函数中包含的任何代码都在该函数 **的范围内计算，而不是在全局范围内**。然而，代码几乎是全局执行的，因为全局对象是作用域链中的下一个对象。

根据[此页面](http://oreilly.com/javascript/excerpts/javascript-good-parts/bad-parts.html)，`void`只需返回`undefined`：

> 在许多语言中，`void`是一种没有值的类型。在 JavaScript 中， `void`是一个接受操作数并返回的运算符`undefined`。这没有用，而且非常混乱。避免`void`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-11-04T16:55:46.593

以下是评估差异的摘要：

*   `void`评估包含函数范围内的代码
*   `eval`评估包含函数范围内的字符串
*   `Function`在自己的范围内评估代码

和回报差异：

*   `void`总是返回未定义
*   `eval`返回执行代码的返回值
*   `Function`返回一个匿名函数

**参考**

*   [JS101：函数构造函数](http://dailyjs.com/2012/07/09/function-2/)
*   [JSLint 错误解释：函数构造函数是 eval](http://jslinterrors.com/the-function-constructor-is-eval)
*   [Eval 有多邪恶](https://javascriptweblog.wordpress.com/2010/04/19/how-evil-is-eval/)
*   [通过 Function 构造函数创建的函数的 [[Scope]]](http://dmitrysoshnikov.com/ecmascript/chapter-4-scope-chain/#scope-of-functions-created-via-function-constructor)
*   [通过 eval() 和 new Function() 评估 JavaScript 代码](http://www.2ality.com/2014/01/eval.html)
*   [Gmail for Mobile HTML5 系列：减少启动延迟 - Google 代码官方博客](http://googlecode.blogspot.com/2009/09/gmail-for-mobile-html5-series-reducing.html)
*   [通过 Eval() 更快地加载 – SproutCore](http://blog.sproutcore.com/faster-loading-through-eval/)
*   [(下)将 JavaScript 作为字符串加载 | 高性能网站](https://www.stevesouders.com/blog/2009/12/07/downloading-javascript-as-strings/)
*   [JavaScript 中的表达式与语句 - Axel Rauschmayer 博士](http://www.2ality.com/2012/09/expressions-vs-statements.html)
*   [JavaScript 中的 void 运算符](http://www.2ality.com/2011/05/void-operator.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-12-25T02:08:07.440

值得注意的是，**您完全滥用了这些功能**。

*   `void`只是评估一些表达式并返回未定义。

    请注意，它是一个运算符而不是一个函数，因此无需将操作数包含在括号内。

    `undefined`如果您担心可能会被遮蔽，或者您想输入更少的字符，这仅对获取值 undefined 有用。

    代替

    ```
    var undef = void(document.body.innerText += 'hi') 
    ```

    更好地使用

    ```
    document.body.innerText += 'hi';
    var undef = void 0; 
    ```

    如果您不需要 undefined，请不要使用`void`。

*   `eval`应该用字符串调用。它将该字符串评估为代码。确切的行为取决于您是以严格模式还是草率模式调用它，以及它是直接调用还是间接调用。

    如果您不使用字符串调用它，它只会返回参数。

    在您的情况下，`eval(document.body.innerText += '\nbye')`将：

    1.  运行`document.body.innerText += '\nbye'`，返回新值，例如`"hello\nbye"`。
    2.  将生成的文本评估为代码。这很可能会抛出。

    我几乎可以肯定`eval(document.body.innerText +='\nbye')`这不是你想要的，但这里有一个（不推荐的）反例：

    ```
    var myvar = 0;
    var bye = 123
    eval(document.body.innerText += '\nbye');
    console.log(myvar); // 123
    ```

    ```
    myvar =
    ```

*   构造`Function`函数基本上类似于`eval`，但它创建了一个函数，而不是立即将评估字符串作为代码运行。

    `document.body.innerText += '\n!!!'`不能返回一个有效的字符串，所以它只会抛出。

*   然后你有这些功能的一些奇怪的组合。

    如果将函数传递给`Function`构造函数，它将被字符串化。构造函数将返回一个匿名函数，该`Function`函数将只声明一个类似于参数的函数。这是毫无意义。

    如果您调用`toString`，这将对匿名函数进行字符串化。

    然后，`void(Function(function foo(){document.body.innerText += '\n>hi2'; return true}).toString())();`将尝试调用此字符串化。但是字符串是不可调用的。错误。

    并将`eval(Function(function foo(){document.body.innerText += '\nbye2'; return true}).toString())();`评估字符串化。只是为什么？但是函数声明不返回一个值，所以你只会得到 undefined，这是不可调用的。错误。

    并将`Function(Function(function foo(){document.body.innerText += '\n!!!2'; return true}).toString())();`stringify `foo`，将其解析为匿名函数，将匿名函数字符串化，然后再次将其解析为另一个匿名函数。请不要这样做。最后，调用将返回 undefined，因为其中没有 return 语句。

# c++ - C++ 不允许我交朋友

> ID：10343554
> 
> 赞同：31
> 
> 时间：2012-04-27T01:17:12.443
> 
> 标签：c++, visual-c++

我有两个类，Mesh 和 MeshList。我希望 MeshList 具有可以更改 Mesh 私有成员的功能。但它不会编译，我不知道为什么。这是我的代码。

**网格.h**

```
#ifndef _MESH_H
#define _MESH_H

#include "MeshList.h"
#include <iostream>

class Mesh
{
private:
    unsigned int vboHandle_;
    friend void MeshList::UpdateVBOHandle();
public:
    inline void Out() {std::cout << vboHandle_;}
};
#endif 
```

**网格.cpp**

```
#include "Mesh.h" 
```

**网格列表.h**

```
#ifndef _MESH_LIST_H
#define _MESH_LIST_H

#include "Mesh.h"

class MeshList
{

public:
    Mesh *mesh; //Line 11 Error
    void UpdateVBOHandle();
};
#endif 
```

**网格列表.cpp**

```
#include "MeshList.h"

void MeshList::UpdateVBOHandle()
{
    *mesh->vboHandle_ = 4;
} 
```

我收到这些错误：

MeshList.h（第 11 行）

*   错误 C2143：语法错误：缺少“；” 前 '*'
*   错误 C4430：缺少类型说明符 - 假定为 int。注意：C++ 不支持默认整数
*   错误 C4430：缺少类型说明符 - 假定为 int。注意：C++ 不支持默认整数

*   mesh.h(11)：错误 C2653：“MeshList”：不是类或命名空间名称

*   meshlist.cpp(5)：错误 C2248：“Mesh::vboHandle_”：无法访问在“Mesh”类中声明的私有成员
*   mesh.h(10) : 参见 'Mesh::vboHandle_' 的声明
*   mesh.h(8) : 参见“Mesh”的声明
*   meshlist.cpp(5) : 错误 C2100: 非法间接

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-27T01:21:37.470

当您编译`Mesh.cpp`时，它包括`Mesh.h`，其中包括`MeshList.h`，开始包括但由于现在已定义`Mesh.h`而提前停止。`_MESH_H`然后（返回`MeshList.h`）有一个对`Mesh`-- 的引用，但尚未声明。因此，例如，您的 C2143 错误。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-27T08:45:51.210

其他答案中解释了循环依赖关系......

解决方案来了：

在`MeshList.h`：

*   替换`#include "Mesh.h"`为前向声明`class Mesh;`（此处不需要包含，因为您只声明了指向网格的指针）

在`MeshList.cpp`：

*   添加`#include "Mesh.h"`到您的包含（您需要声明，因为您使用网格）

您提到的最后一个编译错误是另一个问题：

```
*mesh->vboHandle_ = 4; 
```

`mesh`是一个指针。您的代码选择该成员`vboHandle_`并尝试取消引用它（失败）。我想你的意思是：

```
mesh->vboHandle_ = 4; // <-- no leading asterisk 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-04-27T01:24:31.777

这是因为你已经`#include "MeshList.h"`在文件中了`Mesh.h`，所以文件`MeshList.h`会先被编译，而类`Mesh`还没有被声明。为此，编译器会认为`Mesh`错误行中的变量名之前没有类型，因此出现错误。

这是制作`friend`成员函数的示例：

```
#include <iostream>

class foo;

class bar
{
public:
    void barfunc(foo &f);
};

class foo
{
private:
    friend void bar::barfunc(foo &f);
    int i;
public:
    foo()
    {
        i = 0;
    }
    void printi()
    {
        std::cout << i << '\n';
    }
};

void bar::barfunc(foo &f)
{
    f.i = 5;
}

int main()
{
    foo f;
    bar b;
    b.barfunc(f);
    f.printi();
    return 0;
} 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-04-27T06:38:36.443

**问题：**包含中的循环依赖项。不幸的是，错误消息不太理想。

* * *

**解决方案：**如果您与整个类而不是单个函数成为朋友，那么您可以使用类的前向声明来打破循环。

```
// Mesh.h
#ifndef _MESH_H
#define _MESH_H

#include <iostream>

class MeshList;

class Mesh
{
private:
    unsigned int vboHandle_;
    friend class MeshList;
public:
    inline void Out() {std::cout << vboHandle_;}
};
#endif 
```

* * *

一些（主观）指南：

*   以与您在损坏时更改它的能力相反的顺序包含内容，即：首先是 STL，其次是 3rd 方标头，第三是您自己的中间件堆栈，当前项目包括第四，当前库包括第五。这样，如果发生冲突，希望错误将指向您的标题。

*   把东西放在课堂上的`public`东西之前。`private`类的客户只关心公共接口，不需要让他们在获得它之前遍历所有肮脏的实现细节。

# facebook - 如何在自定义操作中测试用户消息

> ID：10343562
> 
> 赞同：0
> 
> 时间：2012-04-27T01:18:18.143
> 
> 标签：facebook, facebook-graph-api, action, message

我在应用程序中创建了一个名为 review 的操作，并且在我的插件（评分插件）中，当用户对帖子进行排名时，我希望发布一个操作，并带有一条消息，例如“Derp 评分 4 颗星（满分 5 星）”。

当我使用我的开发用户进行测试时，我可以发送消息，但是当我使用身份验证对话框预览用户进行测试时，我收到消息：“未捕获的异常：不允许此操作设置用户消息，因为未请求此属性需要批准”。

我正在使用 perms publish_actions 和 publish_stream。我已请求批准该操作，并在请求的第二部分标记 que 选项“用户消息”，但由于该错误，他们无法测试该操作......我被卡住了 =/

# java - Java - 存储一堆对象并稍后遍历它们的最有效方法，其中数量未知且顺序无关紧要？

> ID：10343564
> 
> 赞同：1
> 
> 时间：2012-04-27T01:18:27.433
> 
> 标签：java, data-structures

“数量未知”是指在创建用于存储它们的任何数据结构时，我不知道最终将存储多少对象。一旦我拥有了所有这些对象，我希望能够遍历所有这些对象，我访问它们的顺序并不重要。我想知道什么是最有效的（在时间和空间上，但主要是时间）在java中执行此操作的方法。

我*确实*对事物中将存在的最大对象数量设置了上限，因此我正在考虑只制作一个这种大小的数组。但我不想浪费空间，而且数组最终可能是实际存储在其中的元素数量的两倍多。

我也在考虑使用 LinkedList，因为我认为迭代它可能比从哈希图之类的其他东西创建迭代器并迭代它更有效。但我不知道从各种 java 数据结构创建迭代器的成本有多大。

那么，有什么想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-27T01:24:53.080

使用 ArrayList。这将允许您毫无问题地迭代项目。您不会受到尺寸的过度限制，也不必提前知道有多少物品。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-27T01:34:26.060

据我所知，听起来您需要一个动态数组。我想您主要关心的是遍历对象，并且您不会在结构中间插入/删除对象。在那种情况下，我认为 Java ArrayList 类会很好地满足您的需求。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T01:27:43.590

你可以试试向量。Javadocs 的一个小总结： Vector 类实现了一个可增长的对象数组。像数组一样，它包含可以使用整数索引访问的组件。但是，Vector 的大小可以根据需要增加或缩小，以适应在创建 Vector 后添加和删除项目。

它提供随机访问，并针对存储增量进行了优化。此外，如果您没有任何多线程要求，则可以使用不同步的 ArrayList。

# objective-c - 当前循环完成后停止循环的 CAAnimation

> ID：10343565
> 
> 赞同：2
> 
> 时间：2012-04-27T01:18:28.577
> 
> 标签：objective-c, ios, core-animation

在我的应用程序中，我有一些无限循环的 CAAnimations ( `animation.repeatCount = HUGE_VALF`)。

我想要做的是在当前周期结束后删除这些动画。`-[CALayer removeAnimationForKey:]`使图层跳转到它的正常位置，这是我想阻止的。

我*可以*做的是：获取图层表示层的当前变换（我正在旋转），计算完成动画的时间，删除动画，并添加另一个重复计数为 1 的动画，但这似乎没有必要复杂，我觉得必须有一个更简单的方法来做到这一点。

那么，有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T01:29:53.967

如何使用一个动画，其完成块会根据标志再次调用动画？当您想让动画序列停止时，将该标志设置为 false。完成块将看到重复标志为假，并在最后一个循环结束时停止。

提交动画后，您应该将变换更改为其最终值。如果您正在制作视图动画，只需将变换设置为其最终值。这样，一旦动画被移除，它将保持在结束状态。

如果您正在使用层变换，则需要将设置变换为其最终状态的代码放在 CATransactionBegin/ 中，并带有 [CATransaction setDisableActions: YES]，这样更改就不会被隐式动画化。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2019-04-04T15:29:19.783

使用您用来设置重复次数的相同属性，您可以获得所需的行为。这将在循环结束后结束动画。

```
animation.repeatCount = 0 
```

# sql - 正则表达式是否有效地搜索 int 列？

> ID：10343571
> 
> 赞同：1
> 
> 时间：2012-04-27T01:18:43.177
> 
> 标签：sql, sql-like, sql-optimization

假设整数列上有一个索引`id`，

如何有效地找到`id`匹配的记录`%789%`？

`id LIKE '%789%'`将无法使用索引并且会出现性能问题。

有什么诀窍可以有效地完成这项工作吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T01:24:56.957

您可以创建一个计算列，如 convert(varchar(20), int_column) 并在其上放置一个索引。每当您想对 int_column 使用 LIKE 运算符时，您将改为对计算列执行此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T01:37:41.887

如果您的模式真的被打包在一起（而不是像 %4%5%6% 之类的东西），您可能会考虑将模式扩展为相应的整数比较。它确实会爆炸您的代码，但应该会大大加快实际搜索速度。

尝试：

```
mod( id, 1000 ) = 789 or
(7890 <= mod( id, 10000 ) and mod( id, 10000 ) < 7900) or 
(78900 <= mod( id, 100000 ) and mod( id, 100000 ) < 79000) or 
(789000 <= mod( id, 1000000 ) and mod( id, 1000000 ) < 790000) or 
 ...
(789000000 <= mod( id, 1000000000 ) and mod( id, 1000000000 ) < 790000000 
```

显然，如果您知道键的范围是有界的，则可以减少比较次数。

# google-chrome-extension - 为什么我的 chrome 扩展程序不能自动更新？

> ID：10343573
> 
> 赞同：9
> 
> 时间：2012-04-27T01:18:50.837
> 
> 标签：google-chrome-extension, auto-update

我做了一个非常基本的 chrome 扩展并设置了一个简单的 node.js 服务器来测试自动更新功能。服务器托管 .crx 文件，因此我只需访问 .crx 即可轻松安装扩展程序`http://localhost:3000/clients/chrome/extension.crx`。但是当我转到`tools`->`extensions`并单击时`Update extensions now`，扩展程序不会获取新版本。服务器确实收到了对 的请求`localhost:3000/clients/chrome/updates.xml`，但没有收到对新的 extension.crx 文件的任何请求。我在这里做错了什么？

* * *

**代码**

让我引导您完成代码以使其可重现：

**$树**

```
.
|-- clients
|   `-- chrome
|       |-- extension
|       |   `-- manifest.json
|       |-- extension.crx
|       |-- extension.pem
|       `-- updates.xml
`-- web.js 
```

扩展实际上只是一个清单文件。

**清单.json**

```
{
  "name": "testing auto-updates",
  "version": "1.0",
  "update_url": "http://localhost:3000/clients/chrome/updates.xml"
 } 
```

如您所见，我指的是使自动更新成为可能的 update_url。

**更新.xml**

```
<?xml version='1.0' encoding='UTF-8'?>
<gupdate xmlns='http://www.google.com/update2/response' protocol='2.0'>
  <app appid='fkphbmkcjefhhnnlhhjlnkellidponel'>
    <updatecheck codebase='http://localhost:3000/clients/chrome/extension.crx' version='1.0' />
  </app>
</gupdate> 
```

打包扩展会创建**extension.crx**和**extension.pem**。

我还制作了一个简单的 node.js 服务器来提供文件：

**网页.js**

```
var express = require('express');

var app = express.createServer(express.logger());

/* ROUTES */

app.get('/clients/chrome/extension.crx', function(request, response)
{
    response.contentType('application/x-chrome-extension');
    response.sendfile('clients/chrome/extension.crx');
});

app.get('/clients/chrome/updates.xml', function(request, response)
{
    response.sendfile('clients/chrome/updates.xml');
});

/* ROUTES END */

var port = process.env.PORT || 3000;

app.listen(port, function() {
  console.log("Listening on " + port);
}); 
```

好的，让我们测试一下。首先，启动服务器：

**$ 节点 web.js**

```
Listening on 3000 
```

通过访问[http://localhost:3000/clients/chrome/extension.crx](http://localhost:3000/clients/chrome/extension.crx)安装扩展。这部分在第一次尝试时效果很好。服务器记录请求：

```
127.0.0.1 - - [Thu, 26 Apr 2012 22:25:47 GMT] "GET /clients/chrome/extension.crx HTTP/1.1" 304 - "-" "Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/535.19 (KHTML, like Gecko) Ubuntu/11.10 Chromium/18.0.1025.151 Chrome/18.0.1025.151 Safari/535.19" 
```

让我们修改扩展名：

1.  在 manifest.json 中，设置`version`为 1.1（而不是 1.0）。
2.  在updates.xml 中，设置`version`为1.1（而不是1.0）。
3.  `extention.pem`使用与第一次相同的文件重新打包扩展。
4.  新`extension.crx`文件已创建。
5.  点击`Tools`-> `Extensions`->`Update extensions now`

人们会期望在`Tools`->中看到扩展的版本号更改为 1.1 `Extensions`。

相反，什么也没有发生。服务器收到对 的请求，`updates.xml`但没有收到`extension.crx`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T06:09:41.127

我认为错误在于您的 web.js 文件的服务方式`updates.xml`。这是我的推理：

*   我复制了您的设置，发现同样缺少更新。
*   然后我进行了第二次测试，只使用了我的公共 Dropbox 文件夹，一切都很顺利。
*   最后，我又做了两个测试：一个是 Node-hosted`updates.xml`指向 Dropbox-hosted 文件，另一个是 Dropbox-hosted`updates.xml`指向一个 Node-hosted crx 文件。

结果是，无论何时`updates.xml`由 Node 提供服务，Chrome 都没有正确更新扩展程序，而当`updates.xml`由 Dropbox 托管时，一切正常，无论是谁托管 crx 文件。（而且我确实更改了`update_url`清单中的 并为每次试用重新构建/上传了扩展）。

究竟为什么会发生这种情况对我来说仍然是一个很大的谜。这是我在 Chrome 中获取时获得的 HTTP 响应标头`updates.xml`（通常使用地址栏；我没有从更新操作中嗅探实际的网络流量，只是模拟它）：

**保管箱：**

```
HTTP/1.1 200 OK
Server: nginx/1.0.14
Date: ...
Content-Type: application/xml
Transfer-Encoding: chunked
Connection: keep-alive
x-robots-tag: noindex,nofollow
etag: ...
pragma: public
cache-control: max-age=0
Content-Encoding: gzip 
```

**节点.js：**

```
HTTP/1.1 200 OK
X-Powered-By: Express
Content-Type: application/xml
Date: ...
Cache-Control: public, max-age=0
Last-Modified: ...
ETag: "..."
Accept-Ranges: bytes
Content-Length: 284
Connection: keep-alive 
```

我还认为这可能是端口的问题（也许 Chrome 不喜欢从非 80 端口更新？），我现在刚刚发现`updates.xml`在端口 80 上来自我自己的 Apache 服务器的服务和 crx 文件导致损坏相同对于 Node 观察到的问题。

我希望我有一个实际的答案给你，但也许你可以用 Dropbox 运行一些测试，最后发现他们做了什么不同的事情，使 Chrome 像他们的更新文件一样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T12:19:37.680

由于它获取您的 XML 并且不更新扩展名，因此它可能不喜欢您的更新 xml 中的某些内容。我最好的猜测是您的“appid”与已安装扩展的 App ID 不匹配。在页面 chrome://extensions 查看已安装扩展的“ID”并验证该值是否与 update.xml 中的值匹配

# sharepoint - 如何在 Sharepoint 2010 中将用户字段设置为当前通过 XML 登录的用户的默认值？

> ID：10343574
> 
> 赞同：2
> 
> 时间：2012-04-27T01:19:29.450
> 
> 标签：sharepoint, sharepoint-2010

我正在尝试在 XML 中为 User 类型的字段创建字段定义，并且需要将其默认值设置为当前登录的用户。我该怎么做？

提前非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T18:04:56.280

这是我最近的一次：

```
<Field ID="{99ced9dc-5715-47a7-9ede-1733f027eeb4}" 
    Name="MyField" 
    DisplayName="My Field" 
    Type="User" 
    List="UserInfo" 
    UserSelectionMode="PeopleOnly" 
    Required="TRUE">
    <DefaultFormula>=";#"&amp;Me</DefaultFormula>
</Field> 
```

它不会[爆炸](http://social.technet.microsoft.com/Forums/en-ZA/sharepoint2010customization/thread/d503d05f-9234-45dd-90b4-3faef74fbf1e)，但也没有给出预期的结果。问题是它`Me`会给出用户的名字，但是由于[User Field](http://msdn.microsoft.com/en-us/library/microsoft.sharepoint.spfielduser.aspx)是[Lookup Field](http://msdn.microsoft.com/en-us/library/microsoft.sharepoint.spfieldlookup.aspx)的一种特殊类型，所以这个名字被忽略了。所需要的只是 ID，但我找不到任何能给我带来这种价值的东西。

以下是一些可能的解决方法：

*   自定义字段：[当前用户作为 SharePoint 人员或组字段的默认值](http://www.fftf.org/news/Oct06feed/Current_user_as_default_value_for_a_SharePoint_Person_or_Group_field.rss.html)
*   事件接收器：[使用事件接收器 ItemAdding–SharePoint 将当前用户添加到人员字段默认值](http://jeff-sharepoint-note.blogspot.com/2011/09/add-current-user-to-person-field.html)
*   Javascript：[当前用户作为 SharePoint 人员或组字段的默认值](http://social.msdn.microsoft.com/Forums/en/sharepointdevelopment/thread/ce824583-b488-4db4-9abd-09d9525b2040)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T06:12:40.307

I do not think so there is any constant for the current logged in user similar to `[today]` constant for DateTime type. So you probably have to create your own field inherited from [SPFieldUser](http://msdn.microsoft.com/en-us/library/microsoft.sharepoint.spfielduser.aspx) and parse the default value constant introduced by you, e.g. `[current]`. Then your field xml definition can look like

```
<Field Type="MyCurrentUser" Name="MyCurrentUser" ID="{...}">
    <Default>[current]</Default>
</Field> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-26T17:14:29.620

这不是 XML，但您可以创建一个在创建项目时运行的工作流。它将检查该字段是否为空，如果是，则将当前用户添加为值。我已经做到了，并且有效。

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2013-09-21T12:56:23.247

我编写了一个插件（[SharePoint Default Value Add-On](http://www.sharepointadd-ons.com/sharepoint_default_value)），它将“默认值”部分注入“创建列”对话框。

将“当前用户”（正在添加项目的用户）设置为默认值。

![在此处输入图像描述](../Images/50d02718995fed245047fef090189d83.png)

# c++ - QNetworkAccessManager 析构函数是否中止当前请求？

> ID：10343575
> 
> 赞同：2
> 
> 时间：2012-04-27T01:19:30.437
> 
> 标签：c++, qt, qnetworkaccessmanager

在用户应该能够取消所有上传的应用程序上工作。现在我想知道我是否必须追查 QNAM 的所有回复，或者只是删除它并期望它们全部中止？

文档中没有任何关于中止的说明，但我假设它会。

> 销毁 QNetworkAccessManager 对象并释放所有资源。请注意，从此类返回的 QNetworkReply 对象将此对象设置为它们的父对象，这意味着如果您不对它们调用 QObject::setParent()，它们将与它一起被删除。

编辑：最终为每个回复使用一个包装器（它也接管它并重试等），它在其析构函数中既断开 QNetworkReplys 信号又中止它。它与包装器一起被删除（父->子）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T01:25:00.963

它只会删除回复。从来源：

```
QNetworkAccessManager::~QNetworkAccessManager()
{
    // ...

    qDeleteAll(findChildren<QNetworkReply *>());

    // ...
} 
```

并且 QNetworkReply 的析构函数是空的，所以你需要手动中止它们。

# mongodb - MongoDB的错误

> ID：10343579
> 
> 赞同：0
> 
> 时间：2012-04-27T01:19:58.830
> 
> 标签：mongodb, mongodb-.net-driver

我在cmd上写了这两个逗号

```
**C:\> cd \my_mongo_dir\bin C:\my_mongo_dir\bin mongod** 
```

然后我在下载和解压缩 mongodb-win32-i386-2.0.4.zip 后打开了 mongo.exe，
但我也发现了这个错误！！：

```
Error: couldn't connect to server 127.0.0.1 shell/mongo.js:84  
exception: connect failed 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T08:30:18.150

看起来 mongod 没有运行。默认情况下，它应该在端口 27017 上启动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-17T13:59:30.687

做以下事情

1.  创建一个文件夹 data 并在该 db 文件夹中，即**drive:\data\db** ex **c:\data\db**
2.  首先，我们需要使用 bin 文件夹中的命令 mongod.exe avial 启动服务器，例如**drive:\mongodb-win32-i386-2.4.6\bin\mongod.exe**
    ex **c:\mongodb-win32-i386-2.4.6 \bin\mongod.exe**
3.  运行 bin 文件夹中的 mongo.exe，如 C:\mongodb-win32-i386-2.4.6\bin\mongo.exe

> **知道如何停止 mongod.exe**

从客户端我们需要发出这些命令

*   **使用管理员**
*   **db.shutdownServer()**
    然后 mongod 将自动关闭，您需要使用退出命令从客户端退出
    与 MONGO 度过美好的一天

# javascript - 如果知道 DOM 元素的 ID，如何获取组件？

> ID：10343585
> 
> 赞同：0
> 
> 时间：2012-04-27T01:20:56.897
> 
> 标签：javascript, extjs, extjs4, extjs3

我只是继承了一个有很多页面的 ExtJS 应用程序。此应用程序允许用户从 MS Word 粘贴。在 MS Word 2003 中，单引号和双引号不是正常的 ASCII 字符。当数据存储在数据库中时，它们被转换为方框或倒置问号，因为我们的数据库列不处理 Unicode，我们不想将列转换为处理 Unicode（数据应该只是 ASCII，除了这些报价）。我在网上找到了一个 JavaScript 函数，可以从给定的字符串中删除这些引号。

我通过添加以下内容来测试此功能：

```
enableKeyEvents: true,
listeners: {
    keyup: function(c,e) { ... }
} 
```

这适用于一个元素/组件。但是我有大约 100 个组件，而使用这个应用程序，要找到这些组件并不容易。所以我决定做的是使用 jQuery 监听 body 元素上的 keyup 事件：

```
jQuery('body').keyup(function(e) {
    var keyCode = e.which;
    if ((keyCode == 86) && (e.ctrlKey)) {
        var domEl = e.target;
        var domId = domEl.getAttribute('id');
    }
} 
```

此应用程序也使用网格组件和其他非网格组件。为了可靠地获取和设置值，我想获取组件并使用它的 getValue() 和 setValue() 方法。那么，知道了 DOM 元素的 ID，有没有办法获取组件呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T12:46:19.520

如果你有 domId 试试

```
var objComp = Ext.getCmp(domId); 
```

如果您使用任何布局尝试

```
var objComp = Ext.getCmp('center-region').getComponent(domId) 
```

# scheme - 方案，将 lambda 作为函数参数传递 - 需要帮助理解 args

> ID：10343595
> 
> 赞同：2
> 
> 时间：2012-04-27T01:23:29.280
> 
> 标签：scheme, arguments

这是一个家庭作业：

> 返回一个列表，其中包含给定列表中满足给定谓词的所有元素。例如，
> 
> ```
> (filter (lambda (x) (< x 5)) '(3 9 5 8 2 4 7)) 
> ```
> 
> 应该返回 (3 2 4)。

我昨天才开始计划，所以我是一个完整的菜鸟。如果我正确理解此函数函数调用的语法，“过滤器”是函数，“（lambda（x）（< x 5）”是参数。这类似于java中的匿名函数吗？

编辑：

我从另一篇关于 stackoverflow 的帖子中找到了一些代码。他们直接回答了这个问题：这是他们写的：

```
 (define (my-filter pred lst)
     (cond ((null? lst) null)
       ((pred (first lst))
          (cons (first lst) (my-filter pred (rest lst))))
       (else (my-filter pred (rest lst))))) 
```

这很好，而且有效，但在我使用它之前，我想了解它。“pred”是一个函数，但在这种情况下，它们将 (< x 5) 传递给它，并且它以某种方式接受了这个值。我不明白。

有人可以向我解释一下这个程序期间会发生什么吗？我不明白正在发生的事情背后的逻辑。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-27T01:43:20.407

其他答案很准确。另外，如果对你有帮助，这个程序的意思是一样的：

```
#lang racket

(define (less-than-five x) (< x 5))

(filter less-than-five '(3 9 5 8 2 4 7)) 
```

Scheme/Racket 和 Java 之间的主要区别在于

```
less-than-five 
```

是一个值；在 Java 中，方法不是值。

编辑：我看到你在你的问题中添加了一堆。我印象深刻的是你有后续问题，而不是仅仅接受你所得到的:)

我认为回答这个问题的最好方法是关注当你进行函数调用时会发生什么，并使用......步进器！

哦，什么鬼。我制作了一个视频，并在 YouTube 上播放：

[http://youtu.be/2hmamosiqGI](http://youtu.be/2hmamosiqGI)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T01:26:35.113

是的，您正在调用该`filter`函数，其参数之一是`(lambda (x) (< x 5))`. （还有另一个论点，你的数字列表。）是的，它很像一个匿名类，在 Java 中只有一个方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-27T01:27:12.073

是的，`lambda`在方案中定义了一个函数。如果函数没有按名称分配给变量，那么它基本上与匿名函数相同。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-27T01:44:58.780

下面是一个使用 Google 的 Guava 库的 Java 问题的简单示例：

```
Iterables.filter(asList(3,9,5,8,2,4,7), new Predicate<Integer>() {

    @Override
    public boolean apply(Integer a) {
        return a < 5;
    }

}); 
```

我提出它是为了表明 Java 没有匿名函数，而是匿名类。Java 没有作为第一类数据类型的功能。我提出这个问题是因为如果你参加一门课程（我想你是），这很可能会在考试中被问到。

# html - IE8、FF3对齐中心问题

> ID：10343599
> 
> 赞同：0
> 
> 时间：2012-04-27T01:24:04.473
> 
> 标签：html, css, image

我在 IE 和 Firefox 中遇到一个奇怪的错误，其中图像不会居中对齐。当页面加载图像中心时，然后在页面加载时神秘地向左移动！我有以下设置为 CSS：

```
#image{
display: block; 
margin-left: auto;
margin-right: auto;} 
```

和 HTML 标记：

```
<img id="image" src="example.png" width="158" height="167" alt="Example"> 
```

**请注意**，在 Chrome 和 Safari 中，我没有遇到此错误。

**更新：**图像没有父级，除了具有`min-width: 850px`和`width: 100%`属性的容器类。该图像的最右侧有一个图像，但绝对定位。图像正上方有一个标题元素，但其`margin-bottom`设置为零。

**更新**：有一个导致问题的标头具有以下 CSS：

```
#header {

                padding: 5px;
                height: 20px;
                margin-top: 0px;
                width: 100%;
                background: #333333;
            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T08:30:06.263

嗨，你可以像这样轻松地做

**HTML**

```
<div class="wraptocenter due">
<span></span>
<img width="101" height="101" alt="" src="http://images2.fanpop.com/images/photos/5200000/Animated-mermaid-images-mermaids-5260155-313-313.gif">
</div> 
```

**CSS**

```
.wraptocenter {
    background:red;
    display: table-cell;
    text-align: center;
    vertical-align: middle;
    width:300px;
    height:300px;
} 
```

现场演示[http://jsfiddle.net/zPQ9M/](http://jsfiddle.net/zPQ9M/)

更多信息毗邻中心[http://www.brunildo.org/test/img_center.html](http://www.brunildo.org/test/img_center.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T01:57:51.630

我试图在这里模拟你的代码。图像与中心对齐。

[http://jsfiddle.net/fSueu/](http://jsfiddle.net/fSueu/)

如果我遗漏了什么，你能给我更多的细节吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T02:31:40.033

```
#header {
    text-align: center;
            padding: 5px;
            height: 20px;
            margin-top: 0px;
            width: 100%;
            background: #333333;
        } 
```

将容器中的文本居中对齐，图像将在 IE 中居中对齐。

# android - 设置默认值复选框android

> ID：10343601
> 
> 赞同：4
> 
> 时间：2012-04-27T01:24:34.630
> 
> 标签：android, checkbox

我在数据库中有来自复选框的值的数据
我尝试使用来自数据库的值设置复选框，如果数据库未选中复选框，但如果未选中空复选框
。

```
public void load(){
   final Cursor c = helper.getSat(almagId);
       c.moveToFirst();
   if(c.getString(3) != null){
           ch1.isChecked();
   }
   isi2.setText(c.getString(4));
   if(c.getString(4) != null){
       ch2.isChecked();
   }
   isi3.setText(c.getString(5));
   if(c.getString(5) != null){
       ch3.isChecked();
   }
} 
```

但这不起作用..我该如何解决这个问题？谢谢您的反馈:)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-27T01:33:46.250

`isChecked()`将告诉您是否`CheckBox`已检查；您无法使用此方法更改“已检查”值。

要更改它，请使用[`setChecked(boolean)`](http://developer.android.com/reference/android/widget/CompoundButton.html#setChecked%28boolean%29)显式值或[`toggle()`](http://developer.android.com/reference/android/widget/CompoundButton.html#toggle%28%29)反转它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T01:34:31.293

isChecked 没有设置复选框，它只是告诉你它是否已经被选中。为了将复选框设置为选中，请调用 setChecked(boolean check)，如下所示：

```
checkBox.setChecked(true); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T01:37:37.013

您是否检查过以确保数据库在游标中返回空值（而不是空字符串）？

You haven't said how it's not working (all checked or none checked or wrong ones checked, so the above is a best guess stab in the dark).

# c - 需要一些关于从 Motif 迁移到 Gtk 的建议

> ID：10343603
> 
> 赞同：5
> 
> 时间：2012-04-27T01:24:54.117
> 
> 标签：c, gtk, legacy-code, x11, motif

我正在做一个关于将遗留 GUI 程序从 Motif 迁移到 Gtk 的项目。源代码很长（大约 80k 行）。现在我有两个计划：

1.  只需找到Motif函数和Gtk的对应关系。然后编写一些脚本来自动执行此转换。当然，这不可能是 100% 自动完成的，需要人工操作。
2.  从源代码回到 GUI 程序的架构。构建一个树状结构，然后根据该结构使用 Gtk 重新构建程序。

请给我一些关于这两个计划的建议。任何想法或想法也受到热烈欢迎。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T09:24:24.263

我记得在大学的时候，我有一个任务是从 MOTIF 程序（自动）转换到 X 框架 xview。我在这项任务中迷失了方向，并进行了彻底的重建。

祝你好运

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T09:43:05.317

我不知道主题，但你的解决方案 1 对我来说听起来是个非常糟糕的主意。工具包有一些特定的功能，只是不可互换。否则，您将很容易拥有与软件不同的前端，但事实并非如此，因为这需要大量的工作。

我不太了解您的解决方案 2，尤其是树状结构。它是一个图表，可以查看何时出现哪些屏幕？这将是一个好主意。截取当前屏幕的屏幕截图，将它们合并成一个带有箭头的大图像，说明哪些操作会导致哪个屏幕对您有所帮助。

然后，您需要查看 GUI 逻辑是否在您的程序中明确分开，是否全部绑定。如果它是绑定的，那么您将有很多工作，这很可能是在 GTK 中完全重新实现您的程序！

但是不要忘记您可以使用[Glade](http://glade.gnome.org/)来设计 GTK GUI，这将为您节省大量的 GUI 创建代码行。

由于您的应用程序是 80k LOC，我认为这是一个大项目，可能需要几个月才能实现。您将需要创建 GTK 应用程序骨架，然后复制/粘贴程序的内部逻辑。开始逐屏重新实现，这样您就可以看到真正的改进。如果你试图一次完成所有工作，你最终会因没有看到任何进展而灰心。

所有这些都是个人方法，这就是我的做法。其他人可能会找到更好的迁移计划。

[您可以通过在gtk-app-devel-list 邮件列表中](http://mail.gnome.org/archives/gtk-app-devel-list/index.html)搜索来找到更多建议（类似的问题已经被问过，比如[这个](http://mail.gnome.org/archives/gtk-app-devel-list/2012-February/msg00077.html)）。

# javascript - 多重加载冲突

> ID：10343608
> 
> 赞同：0
> 
> 时间：2012-04-27T01:25:39.233
> 
> 标签：javascript, jquery, onload

您好……我在使用 jQuery 缩略图滚动器时遇到了问题。它与 Fancybox 和我一直在使用的基于 onload 事件的另一个脚本发生冲突。我发现这个函数可以让 simon wilson 触发多个 onload 事件：

* * *

```
function func1() {
  alert("This is the first.");
}
function func2() {
  alert("This is the second.");
}

function addLoadEvent(func) {
  var oldonload = window.onload;
  if (typeof window.onload != 'function') {
    window.onload = func;
  } else {
    window.onload = function() {
      if (oldonload) {
        oldonload();
      }
      func();
    }
  }
}
addLoadEvent(func1);
addLoadEvent(func2);
addLoadEvent(function() {

I WANT TO INSERT THE FOLLOWING JQUERY FUNCTION HERE

}) 
```

* * *

我现在的问题是让第三个功能正常工作。这是一个语法问题。

这是我要插入的 jQuery：

```
jQuery.noConflict();
(function($){
window.onload=function(){ 
    $("#tS3").thumbnailScroller({ 
        scrollerType:"hoverPrecise", 
        scrollerOrientation:"vertical", 
        scrollSpeed:2, 
        scrollEasing:"easeOutCirc", 
        scrollEasingAmount:800, 
        acceleration:4, 
        scrollSpeed:800, 
        noScrollCenterSpace:10, 
        autoScrolling:0, 
        autoScrollingSpeed:2000, 
        autoScrollingEasing:"easeInOutQuad", 
        autoScrollingDelay:500 
    });
}
})(jQuery); 
```

任何建议都非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T01:29:03.263

尝试这个：

```
function func1() {
  alert("This is the first.");
}
function func2() {
  alert("This is the second.");
}

function addLoadEvent(func) {
  var oldonload = window.onload;
  if (typeof window.onload != 'function') {
    window.onload = func;
  } else {
    window.onload = function() {
      if (oldonload) {
        oldonload();
      }
      func();
    }
  }
}
addLoadEvent(func1);
addLoadEvent(func2);
addLoadEvent(function() {
    $("#tS3").thumbnailScroller({ 
        scrollerType:"hoverPrecise", 
            scrollerOrientation:"vertical", 
            scrollSpeed:2, 
            scrollEasing:"easeOutCirc", 
            scrollEasingAmount:800, 
            acceleration:4, 
            scrollSpeed:800, 
            noScrollCenterSpace:10, 
            autoScrolling:0, 
            autoScrollingSpeed:2000, 
            autoScrollingEasing:"easeInOutQuad", 
            autoScrollingDelay:500 
        });
}) 
```

你的问题是你试图添加的函数是`window.onload`用它自己的函数专门覆盖的，而不是像它本来的那样附加自己。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-28T03:39:42.250

为什么需要这样做？为什么你需要`onload`像这样对处理程序进行排队？既然您已经在使用 jQuery，为什么还要使用本机处理程序呢？

```
function func1() { ... }
function func2() { ... }
function thumbScroller() {
$("#tS3").thumbnailScroller({ 
        scrollerType:"hoverPrecise", 
        scrollerOrientation:"vertical", 
        scrollSpeed:2, 
        scrollEasing:"easeOutCirc", 
        scrollEasingAmount:800, 
        acceleration:4, 
        scrollSpeed:800, 
        noScrollCenterSpace:10, 
        autoScrolling:0, 
        autoScrollingSpeed:2000, 
        autoScrollingEasing:"easeInOutQuad", 
        autoScrollingDelay:500 
    });
} 
```

现在将它们统称为

```
jQuery(document).ready(function() {
    func1();
    func2();
    thumbScroller();
}); 
```

# delphi - Delphi DLL 未卸载，可能是由于仍然分配的 GDI

> ID：10343611
> 
> 赞同：2
> 
> 时间：2012-04-27T01:26:00.437
> 
> 标签：delphi, dll, delphi-2007

我们编写了一个 DLL 来执行我们所有的打印功能。它允许我们进行打印预览、打印以及生成 PDF。

我们现在有一个特定的 DLL 使用模式，之后 DLL 无法正确卸载。结果就是当我们退出主程序时，它消失了，但并没有终止，我们不得不手动杀死进程。

我想罪魁祸首是某些 GDI 资源没有被适当地“关闭”（当我这样说时，我是出于对 GDI 的无知而说的）。我们不直接处理 GDI 资源，而是在我们使用各种 Delphi 组件时为我们使用 GDI 资源。

有关如何查找和解决此类问题的任何提示？我们使用 GDIView 来确认在我们尝试终止程序后仍有一些 GID 资源，但我不知道如何将这些 Windows/内核句柄与底层 Delphi 代码相关联。我可以在程序执行期间的不同时间提供 GIDView 列表。

谢谢！

乔恩（德尔福 2007）

* * *

我回应了提出的建议，但没有人回应我的回应。最终，我放弃了。我最终编写了一个自杀例程，它不仅会杀死我自己的进程，还会杀死所有其他同名进程，以此作为解决问题的一种方法。可笑的矫枉过正，但我​​似乎别无选择。我正在使用我在某处找到的免费软件 ProcessInfo 工具。

```
procedure KillNamedProcesses(pName : String);
// used to clean up programs that hang as a result of DLLs not unloading
   var
      ProcessInfo : TProcessInfo;
      ProcessName : String;
      i : INTEGER;
      currentPID : cardinal;
   BEGIN
   currentPID := GetCurrentProcessID;
   pName := UpperCase(pName);
   ProcessInfo := TProcessInfo.Create(nil);

   // kill all old processes (not our process)
   for i := 0 to ProcessInfo.RunningProcesses.Count - 1 do begin
      ProcessName := ProcessInfo.RunningProcesses[i].ExeFile;
      IF (UpperCase(ProcessName) <> pName) THEN CONTINUE;
      IF (currentPID <> ProcessInfo.RunningProcesses[i].ProcessID) then
         ProcessInfo.RunningProcesses[i].TerminateProcess;
      END;
   // kill the last one (ourselves)
   for i := 0 to ProcessInfo.RunningProcesses.Count - 1 do begin
      ProcessName := ProcessInfo.RunningProcesses[i].ExeFile;
      IF (UpperCase(ProcessName) <> pName) THEN CONTINUE;
      ProcessInfo.RunningProcesses[i].TerminateProcess;
      END;
   ProcessInfo.Free;
   END; // KillNamedProcess 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-27T02:56:20.193

您无需返回 GDI 资源即可关闭进程。当然，您应该归还它们，但这不会阻止您终止。听起来很像您在 DLL 卸载中遇到了死锁。而且由于您的 DLL 无法卸载，那么您自然不会释放所有 GDI 资源。

调试这将涉及调试死锁。很难就此给出一般性建议，不幸的是，您使用的是较旧且功能较弱的 Delphi 版本。现代的 Delphi 调试器支持等待链遍历，使调试死锁变得相当简单。我想如果我是你，我会在你的应用程序处于死锁状态时进行一些事后调试。我会查看所有线程的堆栈跟踪，并使用它来了解无限期阻塞的任何内容。当程序处于死锁状态时，使用 Process Explorer 和 map2dbg 获取有意义的堆栈跟踪。

# ruby-on-rails - 如何在rails中为同一模型加载多个夹具组

> ID：10343612
> 
> 赞同：0
> 
> 时间：2012-04-27T01:26:04.497
> 
> 标签：ruby-on-rails, testing, fixtures

虽然我通常更喜欢 Factory Girl，但我需要使用现有的设备来测试我正在开发的应用程序。

问题是我需要使用依赖于测试的夹具集，即我有多个用于同一模型的集合，需要根据我正在运行的测试加载。

在过去的 rails 0.x 有几个插件可以做到这一点。我如何使用 Rails 3+ 完成相同的任务？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T19:27:02.310

您可以创建一些脚本文件来调用您的工厂来创建记录。然后在测试中需要脚本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T03:49:58.093

你说你是工厂女孩的粉丝，所以我不必向你推销它有多棒。

为什么不把这些装置改造成工厂呢？[在 Rails 中将 Fixtures 转换为 Factory Girl](https://stackoverflow.com/questions/1445584/convert-fixtures-into-factory-girl-in-rails)应该会有所帮助。

一旦您将数据作为 Factory Girl 中的工厂，我建议您利用其继承功能，如[https://github.com/thoughtbot/factory_girl/blob/master/GETTING_STARTED.md](https://github.com/thoughtbot/factory_girl/blob/master/GETTING_STARTED.md)所示：

> 您可以通过嵌套工厂轻松地为同一个类创建多个工厂，而无需重复公共属性：

```
工厂：后做
  标题“一个标题”

  工厂 :approved_post 做
    批准 真的
  结尾
结尾

批准后 = FactoryGirl.create(:approved_post)
approved_post.title # => "一个标题"
已批准_post.approved # => true

```

> 您还可以显式分配父级：

```
工厂：后做
  标题“一个标题”
结尾

工厂：approved_post，父：：post do
  批准 真的
结尾

```

# python - 在python中根据文件名定位文件

> ID：10343613
> 
> 赞同：0
> 
> 时间：2012-04-27T01:26:07.843
> 
> 标签：python, arcpy

我有几个包含 a.shp 或 b.shp 的文件夹，以及一些其他杂项文件。或者，一个文件夹可以同时包含 a.shp 和 b.shp。在那种情况下，我想选择a.shp。如果一个文件夹没有这两个文件，我会从我的分析中排除该文件夹。

我必须编写一个类似于以下的python代码：

```
 if folder1 has a.shp only:
    myunit = r"D:\folder1\a.shp"
 elif folder2 has b.shp only:
    myunit = r"D:\folder2\b.shp"
 elif folder3 has a.shp and b.shp:
    myunit = r"D:\folder3\a.shp"
 elif folder4 doesn't have a.shp and b.shp:
    Don't assign anything into myunit. 
```

如果有人可以提供有关如何在 Python 中执行此操作的建议，我将不胜感激。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T01:29:32.057

听起来好像你想要`os.path.exists`，它将路径名作为参数并返回`True`或`False`取决于它是否是存在的文件（或目录）的名称。您可能还需要`os.path.join`构建文件名。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T01:50:15.107

我认为您的代码与您的问题描述不一致。我假设问题描述正确，所以我创建了一个函数来过滤您需要的目录：

```
import os

def filter_dirs(dirs=[]):
    result = []
    for dir in dirs:
        files = os.listdir(dir)
        file_a = 'a.shp' in files
        file_b = 'b.shp' in files
        if file_a or file_b:
            result.append({'dir':dir, 'file_a':file_a, 'file_b':file_b})
    return result 
```

然后使用一些文件夹尝试该功能并查看结果：

```
filter_dirs(['D:\folder1', 'D:\folder2', 'D:\folder3']) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T01:32:55.783

如果你想避免导入 os.path.exists 等，你可以使用 try/catch 逻辑。如果 a 在那里，你总是想要它，所以你可以试着打开它。如果这不起作用，请捕获错误并尝试打开 b。如果这不起作用，请捕获错误并忽略该文件夹。

[文档](http://docs.python.org/howto/doanddont.html)中的代码片段（ctrl+f 表示“异常”）显示了推荐的方法：

```
def get_status(file):
    try:
        return open(file).readline()
    except EnvironmentError as err:
        print "Unable to open file: {}".format(err)
        sys.exit(1) 
```

同样来自文档，一个片段显示了 os.path 的另一种方式，如 Gareth 所述：

```
def get_status(file):
    if not os.path.exists(file):
        print "file not found"
        sys.exit(1)
    return open(file).readline() 
```

但是文档引用了这一点，以风格为由建议反对它。Python 特意有优雅的异常处理；利用这一点被认为比在你做之前担心 C 风格的偏执检查一切更惯用。但是，如果您想以 os.path 的方式执行此操作，请执行任何操作。无论哪种方式都有效。

# javascript - 脚本不会将数据添加到我的变量

> ID：10343619
> 
> 赞同：0
> 
> 时间：2012-04-27T01:26:58.093
> 
> 标签：javascript

我使用 ajax 请求返回一个 json 编码。

现在返回数据如下：

```
 {"24": {"24":["205", "22", "1", "1", "0", "0"]}}; 
```

我试图添加到：

```
///global set
var data = {"24":{"16":["172","22","1","1","0","0"],"15":["160","22","1","1","0","0"]}}; 
```

问题是 - 我的尝试没有添加到变量中。这是我的脚本：

```
var result = {24: {24:[205, 22, 1, 1, 0, 0]}}; //return data test
var obj = {}
for ( var key in result ){              
if ( result.hasOwnProperty( key ) ) {
    // If the key already exists
    if ( data[ key ] === result[ key ] ) {

        // Empty the temporary object
        obj = {}
        // Loop through the subkeys
        for ( var subkey in result[ key ] ) {              
            if ( result[ key ].hasOwnProperty( [ subkey ] ) ) {

                // Fill in the temporary object
                obj[ subkey ] = result[ key ][ subkey ]
            }
        }

        // Add the new object to the original object
        data[ key ] = obj
    }

    // If the key doesn't exist, do it normally
    else {
        data[ key ] = result[ key ]
       }
    }
}
obj = null

//show change
 console.log(data); 
```

这段代码运行后我对数据进行了检查，没有新添加的数据。任何人都可以看到错误在哪里/为什么不插入数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T02:12:01.117

试试这个：

```
var data = {"24":{"16":["172","22","1","1","0","0"],"15":["160","22","1","1","0","0"]}};
var result = {"24": {"24":["205", "22", "1", "1", "0", "0"]}};

function forEach(o,cb){
    for(var i in o){
        if (o.hasOwnProperty(i)){
            cb(i);
        }
    }
}

forEach(result,function(key){
    if (!data[key]) data[key]={};
    forEach(result[key],function(subkey){
        if (!data[key][subkey]) data[key][subkey]=[];
        forEach(result[key][subkey],function(i){
            data[key][subkey].push(result[key][subkey][i]);
        });
    });
});

console.log(data); 
```

**演示：http:** [//jsfiddle.net/363uy/](http://jsfiddle.net/363uy/)

# javascript - javascript play screencast()，如何让内联视频工作？

> ID：10343621
> 
> 赞同：0
> 
> 时间：2012-04-27T01:27:09.817
> 
> 标签：javascript, ruby-on-rails, ruby, video, inline

我正在开发一个现有项目（对我来说是新项目）。

它具有如下所示的内嵌视频和链接（haml）：

```
%a#play-video{:href => "#", :onclick => "play_screencast(); return false;"} 
```

我无法弄清楚这是调用的js代码在哪里。
它是rails，所以有超过20个js文件，比如modernizer、application.jsm等，
但我看不出这是在哪里定义的或者是如何完成的。

解决这个问题的最佳方法是什么？我想内联播放我的视频。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T04:12:28.420

您是否对所有 js 文件进行了搜索？

如果您使用的是 Linux/Unix/OSX，请转到 javascript 文件夹并运行：

```
grep play_screencast * 
```

那应该告诉你它是在哪里定义的。

您还可以转到 rails 根文件夹并递归搜索项目中的所有文件，如下所示：

```
grep -r play_screencast . 
```

如果您在 Windows 上，只需使用资源管理器运行普通的 Windows 文本搜索。

# file-upload - 使用 Carrierwave 在 Rails 中上传 PDF 并将每个页面转换为 PNG/JPEG 并将它们保存到新模型

> ID：10343623
> 
> 赞同：1
> 
> 时间：2012-04-27T01:27:19.843
> 
> 标签：file-upload, ruby-on-rails-3.1, carrierwave, pdf-conversion

我对使用carrierwave很陌生。目前我可以上传和对图像执行简单的操作，例如 resize_to_fit。
现在我需要更改我的 name-uploader.rb 文件，所以当我上传 PDF 文件时，它会自动将 pdf 转换为多个图像文件 (PNG/JPEG)。我想了解的一件主要事情是如何检查上传文件的类型？我知道我可以设置要接受的文件类型列表，我已经设置了接受的文件类型列表。
现在，当上传 pdf 文件时，我希望将其转换为多个图像，并为每个图像创建一个包含特定数据和图像的新模型。

*   如何查看上传文件的类型？
*   如何将 PDF 转换为多个图像（PNG/JPEG/等）文件？
*   我可以创建模型，或者从另一个控制器调用一个操作来使用 uploader.rb 文件中生成的 png 来创建模型吗？
*   Carrierwave 是这项工作的工具还是我应该使用另一个 gem 来上传文件？

我用过`convert => "png"`，但它给了我一个错误。

*注意：我已将 RMagic 包含在文件的顶部。*

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T17:01:26.777

试试[http://documentcloud.github.com/docsplit/](http://documentcloud.github.com/docsplit/)

# android - Android 谷歌地图与 AVD 4.0.3 不兼容

> ID：10343624
> 
> 赞同：0
> 
> 时间：2012-04-27T01:27:24.753
> 
> 标签：android, maps

我正在尝试使用 avd 4.0.3（最新）上的谷歌地图 api 显示谷歌地图。但是，它说找不到兼容的 AVD。有谁知道哪些版本可以兼容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T02:23:32.847

您应该使用带有 Google API 插件的 AVD [https://developers.google.com/android/add-ons/google-apis/](https://developers.google.com/android/add-ons/google-apis/)

`Google APIs (Google Inc.) - API Level 15`在创建 AVD 时选择 target = 。

# c++ - C++：构造一个 std::vector > 使用二维 C 数组？

> ID：10343626
> 
> 赞同：3
> 
> 时间：2012-04-27T01:27:38.957
> 
> 标签：c++, stdvector, arrays

可以使用 C 数组构造 std::vector，如下所示：`std::vector<int> vec(ary, ary + len)`。构造 a 的正确方法是`std::vector<std::vector<int> >`什么？

我一直在通过手动将每个元素复制到向量中来解决这个问题，显然这不是意图，但它确实有效。

```
int map[25][18] = { /*...DATA GOES HERE...*/ }
std::vector<std::vector<int> > m(18, std::vector<int>(25, 0));
for(int y = 0; y < 18; ++y) {
    for(int x = 0; x < 25; ++x) {
        m[y][x] = map[y][x];
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-27T01:32:51.233

```
int map[18][25] = { /*...DATA GOES HERE...*/ };
std::vector<std::vector<int> > m;
m.reserve(18);
for (std::size_t i = 0; i != 18; ++i)
    m.push_back(std::vector<int>(map[i], map[i] + 25)); 
```

在 C++11 中，您可以选择将最后一行替换为以下内容以消除一点噪音：

```
 m.emplace_back(map[i], map[i] + 25); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-27T01:50:49.360

你为什么要这样做？你有一个连续的内存块，你正在把它变成多个内存块。我建议您不要提供一个`matrix`类来封装单个`std::vector<int>`大小的内容并为访问...的元素`18*25`提供访问器（ ）`operator()( int, int )``col + row*columns`

更多关于运算符重载的[C++ FAQ lite](http://www.parashift.com/c++-faq-lite/operator-overloading.html#faq-13.10)条目。

# ios - 带有 UILineBreakModeWordWrap 的 Localizable.strings

> ID：10343628
> 
> 赞同：0
> 
> 时间：2012-04-27T01:27:44.123
> 
> 标签：ios, xcode, text, localization, uilabel

词长相差太大时设置的Localizable.strings，

我想设置一个动态的可以按照UILabel的字数来渲染，并且要计算与最后一个UILabel的距离。

请给我一些建议，谢谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T20:49:43.320

您不能从 Localizable.string 执行此操作。此文件仅包含您的字符串。通常，您会在界面代码中执行此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T01:10:26.353

```
textthird.lineBreakMode = UILineBreakModeWordWrap;
textthird.numberOfLines = 0;
CGSize size3 = CGSizeMake(285,2000); 
CGSize labelsize3 = [NSLocalizedString(@"text_third",nil) sizeWithFont:textthird.font constrainedToSize:size3 lineBreakMode:UILineBreakModeWordWrap]; 
[textthird setFrame:CGRectMake(25,labelsize.height+160,labelsize3.width,labelsize3.height)]; 
```

# c# - HttpClient.GetAsync(...) 在使用 await/async 时永远不会返回

> ID：10343632
> 
> 赞同：344
> 
> 时间：2012-04-27T01:28:07.750
> 
> 标签：c#, .net, asynchronous, async-await, dotnet-httpclient

**编辑：** [这个问题](https://stackoverflow.com/questions/9895048/async-call-with-await-in-httpclient-never-returns)看起来可能是同一个问题，但没有回应......

**编辑：**在测试用例 5 中，任务似乎卡在`WaitingForActivation`状态。

我在 .NET 4.5 中使用 System.Net.Http.HttpClient 遇到了一些奇怪的行为——“等待”调用 (eg) 的结果`httpClient.GetAsync(...)`将永远不会返回。

这仅在使用新的 async/await 语言功能和 Tasks API 时发生在某些情况下 - 仅使用延续时代码似乎总是有效。

这是一些重现问题的代码 - 将其放入 Visual Studio 11 中的新“MVC 4 WebApi 项目”中，以公开以下 GET 端点：

```
/api/test1
/api/test2
/api/test3
/api/test4
/api/test5 <--- never completes
/api/test6 
```

这里的每个端点都返回相同的数据（来自 stackoverflow.com 的响应标头），但`/api/test5`永远不会完成。

# 我是否在 HttpClient 类中遇到了错误，或者我是否以某种方式滥用了 API？

**重现代码：**

```
public class BaseApiController : ApiController
{
    /// <summary>
    /// Retrieves data using continuations
    /// </summary>
    protected Task<string> Continuations_GetSomeDataAsync()
    {
        var httpClient = new HttpClient();

        var t = httpClient.GetAsync("http://stackoverflow.com", HttpCompletionOption.ResponseHeadersRead);

        return t.ContinueWith(t1 => t1.Result.Content.Headers.ToString());
    }

    /// <summary>
    /// Retrieves data using async/await
    /// </summary>
    protected async Task<string> AsyncAwait_GetSomeDataAsync()
    {
        var httpClient = new HttpClient();

        var result = await httpClient.GetAsync("http://stackoverflow.com", HttpCompletionOption.ResponseHeadersRead);

        return result.Content.Headers.ToString();
    }
}

public class Test1Controller : BaseApiController
{
    /// <summary>
    /// Handles task using Async/Await
    /// </summary>
    public async Task<string> Get()
    {
        var data = await Continuations_GetSomeDataAsync();

        return data;
    }
}

public class Test2Controller : BaseApiController
{
    /// <summary>
    /// Handles task by blocking the thread until the task completes
    /// </summary>
    public string Get()
    {
        var task = Continuations_GetSomeDataAsync();

        var data = task.GetAwaiter().GetResult();

        return data;
    }
}

public class Test3Controller : BaseApiController
{
    /// <summary>
    /// Passes the task back to the controller host
    /// </summary>
    public Task<string> Get()
    {
        return Continuations_GetSomeDataAsync();
    }
}

public class Test4Controller : BaseApiController
{
    /// <summary>
    /// Handles task using Async/Await
    /// </summary>
    public async Task<string> Get()
    {
        var data = await AsyncAwait_GetSomeDataAsync();

        return data;
    }
}

public class Test5Controller : BaseApiController
{
    /// <summary>
    /// Handles task by blocking the thread until the task completes
    /// </summary>
    public string Get()
    {
        var task = AsyncAwait_GetSomeDataAsync();

        var data = task.GetAwaiter().GetResult();

        return data;
    }
}

public class Test6Controller : BaseApiController
{
    /// <summary>
    /// Passes the task back to the controller host
    /// </summary>
    public Task<string> Get()
    {
        return AsyncAwait_GetSomeDataAsync();
    }
} 
```

* * *

## 回答 #1

> 赞同：499
> 
> 时间：2012-04-27T13:20:20.143

您在滥用 API。

情况如下：在 ASP.NET 中，一次只有一个线程可以处理一个请求。如有必要，您可以进行一些并行处理（从线程池中借用额外的线程），但只有一个线程具有请求上下文（其他线程没有请求上下文）。

这是[由 ASP.NET 管理的`SynchronizationContext`](https://msdn.microsoft.com/en-us/magazine/gg598924.aspx)。

默认情况下，当您`await`a时，该方法会在捕获的（或捕获的，如果没有）`Task`上恢复。通常，这正是您想要的：异步控制器操作会有所作为，当它恢复时，它会使用请求上下文恢复。`SynchronizationContext``TaskScheduler``SynchronizationContext``await`

所以，这就是`test5`失败的原因：

*   `Test5Controller.Get`执行`AsyncAwait_GetSomeDataAsync`（在 ASP.NET 请求上下文中）。
*   `AsyncAwait_GetSomeDataAsync`执行`HttpClient.GetAsync`（在 ASP.NET 请求上下文中）。
*   HTTP 请求被发送出去，并`HttpClient.GetAsync`返回一个未完成的`Task`.
*   `AsyncAwait_GetSomeDataAsync`等待`Task`; 因为它不完整，所以`AsyncAwait_GetSomeDataAsync`返回一个 uncompleted `Task`。
*   `Test5Controller.Get` **阻塞**当前线程直到`Task`完成。
*   HTTP响应进来了，`Task`返回的`HttpClient.GetAsync`就完成了。
*   `AsyncAwait_GetSomeDataAsync`尝试在 ASP.NET 请求上下文中恢复。但是，该上下文中已经有一个线程：线程被阻塞在`Test5Controller.Get`.
*   僵局。

这就是其他工作的原因：

*   ( `test1`, `test2`, 和`test3`)：在 ASP.NET 请求上下文*之外*`Continuations_GetSomeDataAsync`将继续调度到线程池。这允许返回者完成，而无需重新输入请求上下文。*`Task``Continuations_GetSomeDataAsync`*
**   (`test4`和`test6`)：由于`Task`是*awaited*，所以 ASP.NET 请求线程没有被阻塞。这允许`AsyncAwait_GetSomeDataAsync`在准备好继续时使用 ASP.NET 请求上下文。*

 *以下是最佳实践：

1.  在您的“库”`async`方法中，`ConfigureAwait(false)`尽可能使用。在您的情况下，这将更`AsyncAwait_GetSomeDataAsync`改为`var result = await httpClient.GetAsync("http://stackoverflow.com", HttpCompletionOption.ResponseHeadersRead).ConfigureAwait(false);`
2.  不要在`Task`s 上阻塞；它`async`一直在下降。换句话说，使用`await`代替`GetResult`(`Task.Result`并且`Task.Wait`也应该替换为`await`)。

这样，您将获得两个好处：延续（`AsyncAwait_GetSomeDataAsync`方法的其余部分）在不必进入 ASP.NET 请求上下文的基本线程池线程上运行；并且控制器本身是`async`（它不会阻塞请求线程）。

更多信息：

*   我的[`async`/`await`介绍帖子](https://blog.stephencleary.com/2012/02/async-and-await.html)`Task`，其中包括对等待者如何使用的简要说明`SynchronizationContext`。
*   [Async/Await 常见问题解答](https://devblogs.microsoft.com/pfxteam/asyncawait-faq/)，其中更详细地介绍了上下文。另请参阅[等待、UI 和死锁！天啊！](https://devblogs.microsoft.com/pfxteam/await-and-ui-and-deadlocks-oh-my/)即使您使用的是 ASP.NET 而不是 UI，这*也*`SynchronizationContext`适用于此处，因为 ASP.NET将请求上下文一次限制为一个线程。
*   这个[MSDN 论坛帖子](https://social.msdn.microsoft.com/Forums/en-AU/async/thread/269172a3-adb9-4b5e-9ac1-8b67ff920177#48b596cc-5eca-4d0e-8743-10d59b64e2ce)。
*   Stephen Toub[演示了这个死锁（使用 UI）](https://channel9.msdn.com/Events/BUILD/BUILD2011/TOOL-829T)，[Lucian Wischik 也是如此](https://docs.microsoft.com/archive/blogs/lucian/talk-async-part-1-the-message-loop-and-the-task-type)。

**2012-07-13 更新：**将此答案[合并到博客文章](https://blog.stephencleary.com/2012/07/dont-block-on-async-code.html)中。

* * *

## 回答 #2

> 赞同：65
> 
> 时间：2013-11-01T13:23:52.080

编辑：通常尽量避免执行以下操作，除非作为避免死锁的最后努力。阅读 Stephen Cleary 的第一条评论。

[从这里](http://blogs.msdn.com/b/pfxteam/archive/2012/04/13/10293638.aspx)快速修复。而不是写：

```
Task tsk = AsyncOperation();
tsk.Wait(); 
```

尝试：

```
Task.Run(() => AsyncOperation()).Wait(); 
```

或者，如果您需要结果：

```
var result = Task.Run(() => AsyncOperation()).Result; 
```

从源（编辑以匹配上面的例子）：

> AsyncOperation 现在将在没有 SynchronizationContext 的 ThreadPool 上调用，并且在 AsyncOperation 内部使用的延续不会被强制返回到调用线程。

对我来说，这看起来像是一个可用的选项，因为我没有选择让它一直异步（我更喜欢）。

从来源：

> 确保 FooAsync 方法中的 await 找不到要封送回的上下文。最简单的方法是从 ThreadPool 调用异步工作，例如通过将调用包装在 Task.Run 中，例如
> 
> int Sync() { return Task.Run(() => Library.FooAsync()).Result; }
> 
> FooAsync 现在将在没有 SynchronizationContext 的 ThreadPool 上调用，并且 FooAsync 内部使用的延续不会被强制返回到调用 Sync() 的线程。

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2018-01-20T15:12:52.873

由于您正在使用`.Result`or`.Wait`或，`await`这最终会导致您的代码出现**死锁**。

您可以`ConfigureAwait(false)`在**防止死锁**`async`的方法中使用

 **像这样：

```
var result = await httpClient.GetAsync("http://stackoverflow.com", HttpCompletionOption.ResponseHeadersRead)
                             .ConfigureAwait(false); 
```

> 您可以`ConfigureAwait(false)`尽可能使用 Don't Block Async Code 。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-02-08T08:19:04.237

这两所学校并没有真正排除。

这是您只需使用的场景

```
 Task.Run(() => AsyncOperation()).Wait(); 
```

或类似的东西

```
 AsyncContext.Run(AsyncOperation); 
```

我有一个位于数据库事务属性下的 MVC 操作。这个想法（可能）是在出现问题时回滚操作中所做的所有事情。这不允许上下文切换，否则事务回滚或提交将自行失败。

我需要的库是异步的，因为它预计会异步运行。

唯一的选择。将其作为正常的同步调用运行。

我只是对每个人说。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-05-21T19:05:27.137

我将把它放在这里更多是为了完整性，而不是与 OP 直接相关。我花了将近一天的时间来调试一个`HttpClient`请求，想知道为什么我从来没有得到回应。

最后发现我忘记`await`了`async`调用堆栈的更下方的调用。

感觉就像少了一个分号一样好。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-10-26T16:16:03.417

在我的情况下，“等待”从未完成，因为执行请求时出现异常，例如服务器没有响应等。用 try..catch 包围它以识别发生了什么，它也会优雅地完成你的“等待”。

```
public async Task<Stuff> GetStuff(string id)
{
    string path = $"/api/v2/stuff/{id}";
    try
    {
        HttpResponseMessage response = await client.GetAsync(path);
        if (response.StatusCode == HttpStatusCode.OK)
        {
            string json = await response.Content.ReadAsStringAsync();
            return JsonUtility.FromJson<Stuff>(json);
        }
        else
        {
            Debug.LogError($"Could not retrieve stuff {id}");
        }
    }
    catch (Exception exception)
    {
        Debug.LogError($"Exception when retrieving stuff {exception}");
    }
    return null;
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2021-02-03T12:35:07.830

我使用了很多等待，所以我没有得到响应，我转换为同步调用它开始工作

```
 using (var client = new HttpClient())
            using (var request = new HttpRequestMessage())
            {
                client.DefaultRequestHeaders.Accept.Add(new MediaTypeWithQualityHeaderValue("application/json"));
                request.Method = HttpMethod.Get;
                request.RequestUri = new Uri(URL);
                var response = client.GetAsync(URL).Result;
                response.EnsureSuccessStatusCode();
                string responseBody = response.Content.ReadAsStringAsync().Result; 
```***

# ruby - 遍历 Yardoc `@macro` 的寄存器

> ID：10343634
> 
> 赞同：0
> 
> 时间：2012-04-27T01:29:19.267
> 
> 标签：ruby, documentation, yard

我正在寻找迭代 yardoc 寄存器的方法`@macro`。我知道您可以按如下方式使用它们：

```
class Post
  include DataMapper::Resource

  # @macro dm.property
  # @return [$2] the $1 $0 of the post
  property :title, String
end 
```

并且您可以生成由逗号分隔的寄存器表示的参数，就好像您正在获取数组的一部分，如下所示：

```
# @macro dsl_method
# @method $1(${2--2})
# @return [${-1}] the return value of $0
create_method_with_args :foo, :a, :b, :c, String 
```

生成：`foo(a, b, c)`但`returns (String) the return value of create_method_with_args`我有兴趣调用类似的东西`(${2--1}).each do |$arg|`并做文档说每个参数都有一行文档。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T04:45:11.650

不幸的是，宏是减少文档干燥度的极其简单的工具。出于安全考虑（您可能不希望 Ruby 在您的评论中运行），我们选择不实施可执行宏。它们并不是真正适用于所有问题的万能解决方案，但它们在非常简单的情况下运行良好。对于更复杂的情况，插件仍然是推荐的方法。

也就是说，由于您仍然需要在*某处*指定实际参数文档，所以我看不出插件如何为您简化任何事情。如果我是你，我会像你已经拥有的那样简单地定义它，并使用`@param`标签分别定义每个参数。例如（假设宏以前是按照您在问题中所做的方式“附加”的）：

```
# @param [String] a documentation for a
# @param [Symbol] b documentation for b
# @param [Hash] c documentation for c
create_method_with_args :bar, :a, :b, :c, Fixnum 
```

这对我来说似乎很合理，因为在这些文档中没有什么可以干掉的。

# php - 来自多个 JSON 文件的多级数组

> ID：10343637
> 
> 赞同：0
> 
> 时间：2012-04-27T01:29:46.260
> 
> 标签：php, arrays, json, multidimensional-array

我必须提取一堆 json 文件并从这些文件中的信息创建链接并递归地进入文件。

```
{
  "_v" : "12.2",
  "categories" : [ {
    "id" : "boys-hats-and-beanies",
    "name" : "Hats & Beanies"
    }
  ]
} 
```

所以从那我需要建立另一个网址进入并获取文件内容

[http://xxx.xxx/?id=boys-hats-and=beanies.json](http://xxx.xxx/?id=boys-hats-and=beanies.json)

在那个文件中，我可能不得不再做一次。正如我现在拥有的那样，它将我需要的信息放入许多数组中，我希望它保持层次结构。

```
$allLinks['root'] = array();
$allLinks['firstLevel'] = array();
$allLinks['secondLevel'] = array();
$allLinks['thirdLevel'] = array();

    function getContent($info){
        $content = file_get_contents($info);
        return json_decode($content, true);
    }

    $new = getContent('https://xxx.xxx/?id=root');

    foreach ($new['categories'] as $name => $value) {
            array_push($allLinks['root'], 'https://xxx.xxx/?id='.$value['id']);
    }

    foreach ($allLinks['root'] as $name => $value) {
        $new = getContent($value);
        foreach ($new['categories'] as $name => $value) {
            array_push($allLinks['firstLevel'], 'https://xxx.xxx/?id='.$value['id']);
        }
    }

    foreach ($allLinks['firstLevel'] as $name => $value) {
        $new = getContent($value);
        foreach ($new['categories'] as $name => $value) {
            array_push($allLinks['secondLevel'], 'https://xxx.xxx/?id='.$value['id']);
        }
    }

    foreach ($allLinks['secondLevel'] as $name => $value) {
        $new = getContent($value);
        foreach ($new['categories'] as $name => $value) {
            array_push($allLinks['thirdLevel'], 'https://xxx.xxx/?id='.$value['id']);
        }
    }

    print_r($allLinks); 
```

所以你可以看到我想要表达的意思。请任何帮助都会很棒！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T02:22:01.680

似乎您试图将 url 存储在一个数组中，这应该返回一个多维数组中的所有 url，其中 0 是第一级。

```
function getContent($info){
    $content = file_get_contents($info);
    return json_decode($content, true);
}

function getContentUrlById($id, $ext = '.json')
{
   return 'https://xxx.xxx/?id=' . $id . $ext;
}

function getContentRecursive($id = 'root', $level = 0)
{
    $result = array();
    $url = getContentUrlById($id);
    $content = getContent($url);
    $result[$level][] =  $url;
    foreach($content['categories'] as $cat){
      $result = array_merge_recursive($result, getContentRecursive($cat['id'], $level + 1));
    }

    return $result;
} 
```

# javascript - 平滑滚动移动错误

> ID：10343642
> 
> 赞同：1
> 
> 时间：2012-04-27T01:30:37.750
> 
> 标签：javascript, iphone, html, css, mobile

出于某种原因，这不适用于 iPhone 和其他一些移动设备。当您单击链接时，此代码使其位于..

```
<a href="#about">About Section</a> 
```

..它将平滑滚动到“about”的id。我该如何解决这个问题？它在 iPhone 上根本没有做任何事情

我目前在[http://www.xblakej.com/上使用它](http://www.xblakej.com/)

```
$(document).ready(function() {
  function filterPath(string) {
  return string
    .replace(/^\//,'')
    .replace(/(index|default).[a-zA-Z]{3,4}$/,'')
    .replace(/\/$/,'');
  }
  var locationPath = filterPath(location.pathname);
  var scrollElem = scrollableElement('html', 'body');
  $('a[href*=#]').each(function() {
   var thisPath = filterPath(this.pathname) || locationPath;
    if (  locationPath == thisPath
    && (location.hostname == this.hostname || !this.hostname)
    && this.hash.replace(/#/,'') ) {
    var $target = $(this.hash), target = this.hash;
      if (target) {
        var targetOffset = $target.offset().top;
        $(this).click(function(event) {
          event.preventDefault();
          $(scrollElem).animate({scrollTop: targetOffset}, 400, function() {
            location.hash = target;
          });
        });
      }
    }
  });
  function scrollableElement(els) {
    for (var i = 0, argLength = arguments.length; i <argLength; i++) {
      var el = arguments[i],
          $scrollElement = $(el);
      if ($scrollElement.scrollTop()> 0) {
        return el;
      } else {
        $scrollElement.scrollTop(1);
        var isScrollable = $scrollElement.scrollTop()> 0;
        $scrollElement.scrollTop(0);
        if (isScrollable) {
          return el;
        }
      }
    }
    return [];
  }
}); 
```

# c++ - 在 OSG 中创建太阳光源

> ID：10343643
> 
> 赞同：4
> 
> 时间：2012-04-27T01:30:41.793
> 
> 标签：c++, opengl, lighting, openscenegraph

我需要在 OpenSceneGraph 中的景观上方设置一个点 Source，它的作用就像太阳一样。我已经知道如何设置灯光，可以通过以下方式完成：

```
//LIGHT CODE ------------------------
osg::ref_ptr<osg::Group> lightGroup (new osg::Group);
osg::ref_ptr<osg::StateSet> lightSS (root->getOrCreateStateSet());
osg::ref_ptr<osg::LightSource> lightSource1 = new osg::LightSource;
osg::ref_ptr<osg::LightSource> lightSource2 = new osg::LightSource;

// create a local light.

float xCenter = tree->getRoot()->getXCenter();
float yCenter = tree->getRoot()->getYCenter();

osg::Vec4f lightPosition (osg::Vec4f(xCenter, yCenter,75.0,1.0f));
osg::ref_ptr<osg::Light> myLight = new osg::Light;
myLight->setLightNum(1);
myLight->setPosition(lightPosition);
    myLight->setAmbient(osg::Vec4(0.8f,0.8f,0.8f,1.0f));
    myLight->setDiffuse(osg::Vec4(0.1f,0.4f,0.1f,1.0f));
    myLight->setConstantAttenuation(1.0f);
    myLight->setDirection(osg::Vec3(0.0f, 0.0f, -1.0f));
lightSource1->setLight(myLight.get());

lightSource1->setLocalStateSetModes(osg::StateAttribute::ON); 
lightSource1->setStateSetModes(*lightSS,osg::StateAttribute::ON);
//osg::StateSet* lightSS (lightGroup->getOrCreateStateSet());

lightGroup->addChild(lightSource1.get());

//Light markers: small spheres
osg::ref_ptr<osg::Geode> lightMarkerGeode (new osg::Geode);
lightMarkerGeode->addDrawable(new osg::ShapeDrawable(new osg::Sphere(osg::Vec3f(xCenter,yCenter,75),10.0f)));

//Tuto 9: lighting code
root->addChild(lightGroup.get());
//Tuto 9: Adding the light marker geode
root->addChild(lightMarkerGeode.get());

//LIGHTCODE END---------------- 
```

这将产生一个看起来像这样的景观：

![](../Images/a1c0adf6c2c13ef573165fa4af9efdbd.png)

上面有灯光的风景（灯光由球体表示）

不过，这种光源似乎并没有真正对景观产生影响。问题是需要什么样的灯光设置（即氛围、漫射等）来制作模拟太阳光。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T17:44:55.020

对于它的价值，OSG 论坛/邮件列表通常非常适合回答问题：http: [//forum.openscenegraph.org/](http://forum.openscenegraph.org/)

在这里尝试回答您的问题 - 这取决于您尝试点亮的材料的特性。

我发现我加载的某些模型上的材料只会对 3 种光类型中的一种做出反应（具体来说，某些模型是仅镜面反射的），所以我只打开所有 3 种：

```
osg::Light *light = new osg::Light;
light->setAmbient(osg::Vec4(1.0,1.0,1.0,1.0));
light->setDiffuse(osg::Vec4(1.0,1.0,1.0,1.0));
light->setSpecular(osg::Vec4(1,1,1,1));  // some examples don't have this one 
```

对于您的情况，您也可以重新定义地形的环境和/或漫反射属性。

# javascript - 使用自己的上下文使用相对 url 更改 window.location

> ID：10343644
> 
> 赞同：1
> 
> 时间：2012-04-27T01:30:53.353
> 
> 标签：javascript, iframe, relative-path

**问题**

在我的应用程序中，我有一个父页面，其中包含一个 iframe 到子目录中的子页面。

> parent.html
> 子目录/child.html

在子页面中，我想使用相对于 parent 的相对 url（“targetPage.html”）设置父页面的*位置*。

> parent.html
> targetPage.html (**正确的**目标)
> subdir/child.html (行动的来源)
> subdir/targetPage.html (**不正确**的)

从孩子的内心，我可以说：

```
window.parent.location = "targetPage.html"; 
```

...但是当然，这（错误地）将父页面导航到“subdir/targetPage.html”，因为代码在子上下文中运行。

在父级调用代码无济于事：

```
window.parent.myFunctionToNavigateToTarget(); // defined in parent to navigate to "targetPage.html" 
```

...具有相同的效果，因为父函数正在子上下文中运行。

**问题**

有没有一种优雅的方法可以使用相对 URL 设置另一个窗口的位置，以使其相对于该窗口进行解释？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T01:50:02.610

您可以从父窗口中获取主机名和路径，然后附加您的目标页面：

```
var targetPage = 'somepage.html';

var url = window.parent.location.href;
if(url.indexOf('.') > -1){
   url = url.substring(0, url.lastIndexOf('/') + 1);
}
window.parent.location = url + targetPage; 
```

# c# - MonoDevelop 中已发布的应用程序崩溃

> ID：10343646
> 
> 赞同：0
> 
> 时间：2012-04-27T01:31:00.217
> 
> 标签：c#, .net, monodevelop, gtk#

我在 MonoDevelop 中制作了一个非常简单的 gtk# 2.0 应用程序。当我尝试在项目的 bin 文件夹中运行 .exe 文件，或者在创建包时运行应用程序时，它会立即崩溃。如果我从 MonoDevelop 运行程序，它运行良好，但在 IDE 之外它不起作用。我不想说安装程序，只需要有人可以运行的 .exe。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-19T18:33:55.360

尝试将运行时从默认切换到 .net（其中显示 Debug / Runtime）。它也会立即崩溃。我猜的问题在于缺少 gtk# .net 安装？

[http://www.go-mono.com/mono-downloads/download.html](http://www.go-mono.com/mono-downloads/download.html)

反过来。如果您安装了单声道编译器（并且您拥有它），您可以通过单声道输入一个特殊的命令行。在您的应用程序搜索中键入 mono 并使用找到的 Mono xxx 命令提示符程序。在那里转到您的 .exe 文件 (cd /d "C:\YourPath\bin\Debug\") 并使用单声道运行时执行它：单声道 Your.exe。这将再次起作用，因为它不是.net。

# android - 安卓游戏画面

> ID：10343648
> 
> 赞同：0
> 
> 时间：2012-04-27T01:31:17.467
> 
> 标签：android

你能帮我制作一个可触摸的图像吗？当您将其放置到正确的位置时，会弹出一条消息并显示文本。我的游戏是一个身体部位游戏，您将把身体部位放置到相应的位置...请帮助我，我将非常感谢您的回复，非常感谢....

```
if (event.getAction() == MotionEvent.ACTION_MOVE) {

        if (droid.isTouched()) {

            droid.setX((int)event.getX());
            droid.setY((int)event.getY());
        }
            if (roid.isTouched()) {

                roid.setX((int)event.getX());
                roid.setY((int)event.getY());
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T02:09:44.163

毫无疑问，这个问题的最佳答案是：

购买并阅读本书：[http ://www.amazon.com/Beginning-Android-Games-Mario-Zechner/dp/1430230428](https://rads.stackoverflow.com/amzn/click/com/1430230428)

它由 LibGDX 的作者编写，LibGDX 是最流行的安卓游戏引擎之一。这本书会教您构建完整游戏所需的一切。

# atk4 - 在网格列上设置 makeSortable() 无法按预期工作

> ID：10343651
> 
> 赞同：2
> 
> 时间：2012-04-27T01:32:06.267
> 
> 标签：atk4, agiletoolkit

我刚刚开始将 Agile Toolkit 4.2.0 用于一个简单的 CRUD Web 应用程序，到目前为止，我对该框架印象非常深刻，只是我无法让列排序正常工作。

更新 dvdrental page/video.php 示例并在末尾添加一行以进行设置`makeSortable()`似乎无法按预期工作。在迄今为止我测试过代码的所有浏览器中（Firefox 12、Chrome 18、Opera 11.62 和 IE 9），它只在“年份”列标题之前输出格式错误的 HTML 行。

```
class page_video extends Page {
    function init(){
        parent::init();
        $this->api->auth->check();

        $grid = $this->add('MVCGrid');
        $grid->setModel('Movie');

        $grid->getColumn('year')->makeSortable(); 
    }
} 
```

任何帮助将不胜感激，希望这不是我自己对这个新工具的无能造成的简单错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T17:19:47.580

已经为此打开了一个问题，[https://github.com/atk4/atk4/issues/46](https://github.com/atk4/atk4/issues/46)

# javascript - 程序化 Dojox 上传器 - ajax 上传不起作用

> ID：10343652
> 
> 赞同：3
> 
> 时间：2012-04-27T01:32:43.430
> 
> 标签：javascript, ajax, upload, dojo

我找不到任何有关以编程方式创建 dojox/form/Uploader 的文档。我自己尝试过，但看起来插件注册机制不知何故被破坏了。

```
require([
    "dojo/dom-construct",
    "dijit/form/Button",
    "dojox/form/Uploader",
    "dojox/form/uploader/FileList",
    "dojox/form/uploader/plugins/IFrame",
    "dojo/domReady!"
    ], function(domConstruct, Button, Uploader, UploaderFileList) {

   var form = domConstruct.create('form', {
        method: 'post',
        enctype: 'multipart/form-data',
        class: 'Uploader'
    }, document.body);     

    var up = new Uploader({
        label: 'Pick files',
        multiple: true,
        url: '/echo/json/'
    }).placeAt(form);

    var list = new UploaderFileList({
        uploader: up
    }).placeAt(form);

    var btn = new Button({
        type: 'submit',
        label: 'upload',
        onClick: function() {
            up.upload();
        }
    }).placeAt(form);

    btn.startup();
    up.startup();
    list.startup();

});​ 
```

[此处](http://jsfiddle.net/joshuaboshi/38B55/)关于 jsfiddle 的示例。

据我了解，dojox/form/Uploader 和 dojox/form/uploader/plugins/IFrame 的源代码，插件是通过 dojox.form.addUploaderPlugin 函数注册的，该函数使用 self 和 plugged 插件重新声明 Uploader 小部件类作为其前辈。但是 Uploader 小部件的关键方法“上传”永远不会被 HTML5 插件（它自动包含在 iframe 插件中）覆盖。

这是错误吗？或者我做错了什么？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-29T01:16:42.780

简而言之; 使用新的 dojox.form.Uploader 代替拉入的变量，否则插件扩展不适用。

原因是，您会看到程序员在 addUploaderPlugin 中执行以下操作：

```
dojox.form.UploaderOrg = dojox.form.Uploader;
var extensions = [dojox.form.UploaderOrg];
dojox.form.addUploaderPlugin = function(plug){

            extensions.push(plug);
            declare("dojox.form.Uploader", extensions, {});
    } 
```

AMD 加载程序返回的类是并且将始终是 dojox.form.UploaderOrg 并且不知道扩展插件。

更改为以下内容：

```
var up = new dojox.form.Uploader({
    label: 'Pick files',
    multiple: true,
    url: '/echo/json/'
}).placeAt(form); 
```

并确保你**没有**设置`djConfig.publishRequireResult = false`

# meteor - Meteor 如何调用 Meteor.methods() 中定义的方法？

> ID：10343656
> 
> 赞同：33
> 
> 时间：2012-04-27T01:33:39.640
> 
> 标签：meteor

我正在为 Meteor 服务器分配方法，如下所示：

在 bootstrap.js 中

```
Meteor.startup(function () {
    Meteor.methods({

        foo: function () {
            return 1;
        },

        bar: function () {

        // QUESTION: HOW TO CALL Meteor.methods.foo
        return 1 + foo;        

        }
    });
}); 
```

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2012-04-27T02:10:06.233

与调用 bar 的方式相同：`Meteor.call("foo");`

如果您在服务器上并且未指定回调，则该方法将同步运行。

**Meteor.call 的文档：http:** [//docs.meteor.com/#meteor_call](http://docs.meteor.com/#meteor_call)

# php - Preg_match 帮助查找标签并匹配内部

> ID：10343659
> 
> 赞同：0
> 
> 时间：2012-04-27T01:34:06.397
> 
> 标签：php, regex, preg-match

我正在尝试做一个`preg_match`for`data-movie="???"`来检索`???`.

`preg_match('/data-movie="(.*?)"/is',$results,$m);`

我不能完全正确。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T01:37:46.470

```
preg_match('/data\-movie="(.*)"/is', 'data-movie="abcdef"', $result);
print_r($result); 
```

输出：

```
Array
(
    [0] => data-movie="abcdef"
    [1] => abcdef
) 
```

这也可能对您有所帮助：[http ://regex.larsolavtorvik.com/](http://regex.larsolavtorvik.com/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T01:54:53.610

如果您知道电影将始终用双引号引起来，则此方法有效：

```
preg_match('/data-movie="([^"]*)"/is', $results, $m); 
```

它一直匹配任何字符，直到 a `"`。

# vim - 一个缓冲区退出时关闭vim语法？

> ID：10343670
> 
> 赞同：5
> 
> 时间：2012-04-27T01:35:03.540
> 
> 标签：vim

我的 vim 会话中有两个缓冲区，我在 vimrc 中设置了语法，我使用 minibufexpl 来管理 buf。

我使用**:q**退出当前 buf，但另一个 buf 会自动关闭语法，我必须使用 :set syntax=on 手动打开语法高亮。有人可以给我一个解决方案，在一个 buf 退出后不会自动关闭语法吗？谢谢！！（我尝试**:bd**退出 buf 而不是**:q**，有时它会保留语法，但有时不会）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T16:21:00.520

如果您使用 minibufexpl.vim，请将以下内容添加到您的 .vimrc 中：

```
let g:miniBufExplForceSyntaxEnable = 1 
```

它似乎是由 vim 中的错误引起的。有关详细信息，请参阅[minibufexpl 版本 6.3.1 的发行说明](http://www.vim.org/scripts/script.php?script_id=159)

请注意，这适用于**:bd**但不适用于**:q**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T03:15:29.620

这可能为时已晚，但我遇到了完全相同的问题，发现添加行

```
set hidden 
```

我的 .vimrc 解决了这个问题。这使得 vim 隐藏缓冲区而不是在您输入 ":q" 时关闭它们。当我使用 minibufexplorer 导航时，它似乎也使我的文件之间的语法突出显示保持启用状态。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-03-03T07:40:17.750

可能您应该将此行添加到`gvimrc`：

```
autocmd BufDelete * syntax on 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-27T02:00:54.477

你可以在你的 vimrc 中使用 syntax enable 或 syntax on。有关更多信息，请使用 :h 语法。

好的，然后检查您的语法文件是否正确，它应该看起来像这样

au BufNewFile,BufRead *.cpp set syntax=cpp11 <--这是我为 cpp 文件设置的行。

希望这有帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-27T08:33:14.263

插件行为不端。

关闭缓冲区（并丢失语法突出显示）后，进行调查，例如

```
:verbose set syntax? 
```

这将显示类似

```
 syntax=cpp
  Last set from C:\Program Files\Vim\vim73\syntax\syntax.vim 
```

你也许也能看到我做错了什么

```
:debug quit 
```

如果所有其他方法都失败了，请尝试通过逐个禁用插件（或删除所有插件并逐个启用）来消除错误来源。在某个时候，问题会出现/消失，您已经找到了有罪的一方。

# excel - For Each In：是否可以从第一个 FOR 单元格开始遍历单列范围并粘贴多列？

> ID：10343673
> 
> 赞同：2
> 
> 时间：2012-04-27T01:35:23.690
> 
> 标签：excel, vba, foreach, montecarlo

我在尝试优化代码的某个部分时遇到了麻烦。我正在执行蒙特卡洛模拟，我想复制一个范围的值重复多次。为此，我使用了 For Each In 结构。下面是一个最小的例子。

```
sub example()
Dim live As Excel.Range 'the range to be copied in each For Each In
Dim acell as Excel.Range 'For range
Set live = Range("C5:P5")

For Each acell in Range("B9:B90")
acell.value=live.value
Next acell

End Sub 
```

问题是`live`跨越多列，而`acell`只有一个单元格；最终发生的只是第一列被复制，其余的都是空白的。我还使用了`For Each acell in XYZ.rows`where`XYZ`是先前定义的多列和多行范围。但是，这要慢得多。

是否可以从第一个单元格开始遍历单列范围并粘贴多列？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T02:42:34.220

这是你想要的？

```
Sub example()
Dim live As Excel.Range 'the range to be copied in each For Each In
Dim acell As Excel.Range 'For range
Set live = Range("C5:P5")

live.Copy
Range("B9").PasteSpecial xlPasteValues, , , True

End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T07:36:55.500

最好`C5:P5`作为数组读入：

```
Sub CopyLoop()
    Dim copyRng(), targetRng As Range, cl As Range

    copyRng = Range("C5:P5") 'Read in as array
    Set targetRng = Range("B9:B90")

    For Each cl In targetRng
        Range("B" & cl.Row & ":O" & cl.Row) = copyRng
    Next cl
End Sub 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T12:18:05.883

您快到了; 你只是错过了代码中的一个微小变化。你必须达到`Resize`目标范围。代替

```
bcell.value=live.value ' bcell (presumably a typo) is only 1 column wide 
```

采用

```
acell.Resize(1, live.Columns.Count).Value = live.Value 
```

# javascript - Javascript Coin Slider - 在服务器上不工作

> ID：10343675
> 
> 赞同：2
> 
> 时间：2012-04-27T01:35:50.843
> 
> 标签：javascript, jquery, css, html

我在使用 Javascript Coin Slider 时遇到问题（伟大的下载来自/：[本研讨会](http://workshop.rs/projects/coin-slider/)）。我附上2个屏幕截图。一个是在 chrome 中工作的文件，第二个是同时托管在我的服务器上的同一个文件。这是我第一次真正玩弄 JQuery，所以我不确定是否有什么我忽略了？我已经详尽地查看了我所有的相关链接，以确保它们都是语法和语义正确的。

请帮忙！

![在此处输入图像描述](../Images/3d6207cc1afc88162db448c80e7027db.png)

![在此处输入图像描述](../Images/fc2660dd5da01f48787e6dc4c65ae5b4.png)

这是HTML / Js：

```
<div id="coin-slider">
<a href="team/index.html"><img src="img/jq/1.jpg" /></a>
<a href="history/index.html"><img src="img/jq/2.jpg" /></a>
<a href="planning/index.html"><img src="img/jq/3.jpg" /></a>
<a href="fun/index.html"><img src="img/jq/4.jpg" /></a>
<a href="girls/index.html"><img src="img/jq/5.jpg" /></a>
<a href="tour/index.html"><img src="img/jq/6.jpg" /></a>
  <script type="text/javascript">
    $(document).ready(function() {
      $('#coin-slider').coinslider({ width:959, height:325, navigation: false, delay: 4000, spw:10, sph:6, sdelay: 50, effect: 'rain' });
        });
      </script>
</div> 
```

......我的头叫：

```
<!-- JQuery Coin Slider image display and transition inclusions -->
  <script type="text/javascript"     src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
  <script type="text/javascript" src="js/coin-slider.min.js"></script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T01:51:22.287

如果您检查错误控制台，您将看到以下错误：`Uncaught TypeError: Object [object Object] has no method 'coinslider'`

这表明硬币滑块脚本尚未加载。如果您检查源代码，您可以看到 javascript 文件确实正确加载（文件）。

这会导致您假设它没有在正确的时间加载文件。

再次检查您的来源表明您没有将硬币滑块初始化包装到`document.ready`调用中，因此调用出现故障。

**解决方案：**将 coinslider 初始化封装到一个`document.ready`函数中，以便 jQuery 和其他所有内容都可用，您会发现它们都将开始工作。

**额外说明：**它在本地工作但不在服务器上工作的原因是在本地加载文件几乎没有延迟。您不必等待它通过 Internet 下载，因此它基本上按照您在源代码中提供的顺序运行。例如（简化一点以帮助解释）：

我们包含 2 个文件：jQuery.js 和 coinslider.js，我们按顺序包含它们（首先是 jQuery）。

我们的 coinslider.js 文件引用了 jQuery，需要 jQuery 加载后才能执行。

为了这个示例，我们假设两个 js 文件位于同一服务器上，但是 jQuery.js 文件比 coinslider.js 文件大很多。由于该文件大小，jQuery.js 文件的下载时间比coinslider.js 文件要长得多（实际上，它不仅取决于文件大小，还取决于服务器在世界上的位置 - 延迟 - 以及您和服务器之间的互联网速度）。

假设 2 个下载请求（1 个用于 jQuery.js，1 个用于 coinslider.js）基本上同时发送（时间 0 秒）。jQuery.js 需要 5 秒下载，coinslider.js 需要 2 秒下载。

在时间 1 秒：两个文件仍在下载中。

在时间 2 秒：coinslider.js 已完成下载并被执行。

在 5 秒的时间：jQuery.js 已经完成下载并被执行。

因为没有任何代码告诉浏览器现在立即执行coinslider.js，所以它在2 秒的时间运行并且因为jQuery.js 还没有被执行而失败。

通过在 coinslider.js 初始化周围包装一个`document.ready`函数，我们告诉浏览器在执行之前等待一切准备就绪，因此它将等到 5 秒标记，届时 jQuery 将可用并且一切都会好起来的。

然后可以发生快乐有趣的聚会时间:)

**编辑代码** 看起来包含脚本存在一些语法问题（您不能`<script>`在其他标签中包含`<script>`标签。

我不记得原始版本是什么样的，但现在它正在改变......

```
<!-- JQuery Coin Slider image display and transition inclusions -->
  <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"><script type="text/javascript">
    $(document).ready(function() {
      $('#coin-slider').coinslider({ width:959, height:325, navigation: false, delay: 4000, spw:10, sph:6, sdelay: 50, effect: 'rain' });
        });
      </script></script>
  <script type="text/javascript" src="js/coin-slider.min.js"><script type="text/javascript">
    $(document).ready(function() {
      $('#coin-slider').coinslider({ width:959, height:325, navigation: false, delay: 4000, spw:10, sph:6, sdelay: 50, effect: 'rain' });
        });
      </script></script> 
```

到：

```
<!-- JQuery Coin Slider image display and transition inclusions -->
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
<script type="text/javascript" src="js/coin-slider.min.js"></script>
<script type="text/javascript">
$(document).ready(function() {
  $('#coin-slider').coinslider({ width:959, height:325, navigation: false, delay: 4000, spw:10, sph:6, sdelay: 50, effect: 'rain' });
});
</script> 
```

此外，在您的源代码的第 93 行，您在`<div id="coin-slider">`

```
<script type="text/javascript">
        $(document).ready(function() {
          $('#coin-slider').coinslider({ width:959, height:325, navigation: false, delay: 4000, spw:10, sph:6, sdelay: 50, effect: 'rain' });
        });
</script> 
```

删除它。

# php - 数组中的 PHP 值

> ID：10343677
> 
> 赞同：0
> 
> 时间：2012-04-27T01:36:30.867
> 
> 标签：php, arrays

嗨，我正在检查给定数组的某个值。

我的数组看起来像

```
while($row = mysqli_fetch_array($result)){

    $positions[] = array( 'pos' => $row['pos'], 'mark' => $row['mark'] );
} 
```

我正在尝试使用类似的方法从中获取信息

```
<?php
    if(in_array('1', $positions)){
          echo "x";
    }
?> 
```

我知道值 '1' 在数组中，但 x 没有作为输出发送。关于如何让“1”被识别为在数组中的任何建议？

编辑：我意识到这是一个数组内的一个数组。是否可以将 in_array() 组合成类似这样的语句：“这些数组之一中的值是 '1'”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T01:40:18.307

in_array 不是递归的。您正在检查 1 是否在一个没有意义的数组中。您必须遍历每个元素并检查这种方式。

```
$in = false;
foreach ($positions as $pos) {
    if (in_array(1, $pos)) {
        $in = true;
        break;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T01:40:23.580

`in_array`只检查第一级。在这种情况下，它只看到一堆数组，没有任何类型的数字。相反，请考虑使用 循环遍历数组`foreach`，并检查它是否`1`是您期望的位置。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-27T01:41:24.517

那是因为 $positions 是一个数组数组（一个多维数组）。它不包含简单的“1”。

尝试使用 foreach 循环：

```
foreach($postions as $value)
    if ($value["pos"] == '1')
        echo "x ".$value["mark"]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-27T01:41:54.887

`$positions`由于您在第一个代码段中使用了这一事实，因此您的数组是递归的`$positions[]`。`in_array`不是递归的（参见[PHP 手册](http://php.net/manual/en/function.in-array.php)）。因此，您需要一个适用于递归数组（[source](http://www.php.net/manual/en/function.in-array.php#107821)）的自定义函数：

```
<?php
function in_arrayr( $needle, $haystack ) {
    foreach( $haystack as $v ){
        if( $needle == $v )
            return true;
        elseif( is_array( $v ) )
            if( in_arrayr( $needle, $v ) )
                return true;
    }
    return false;
}
?> 
```

`in_array()`您现在应该调用`in_arrayr()`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-27T01:41:18.797

问题是它`1`实际上不在数组中。它在`array`数组中的一个中。您正在将值`1`与`Array`显然不相同的值进行比较。

这样的事情应该让你开始：

```
foreach ($positions as $position) {
    if ($position['pos'] == 1) {
        echo "x";
        break;
    }
} 
```

# c# - 是否有可能有一个永远重复的 RX observable

> ID：10343681
> 
> 赞同：1
> 
> 时间：2012-04-27T01:37:36.920
> 
> 标签：c#, .net, system.reactive

我想通过 RX 创建一个心跳，但我似乎找不到一种方法来创建一个`Observable`可以无限期地脉冲的方法。

这甚至可能吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-27T01:42:52.793

尝试这个：

```
var forever = Observable.Interval(TimeSpan.FromSeconds(1.0)); 
```

# model-view-controller - Nodejs异步与同步方法负载测试

> ID：10343684
> 
> 赞同：1
> 
> 时间：2012-04-27T01:37:41.653
> 
> 标签：model-view-controller, node.js, asynchronous, sync, load-testing

我一直在尝试为 MVC 框架创建一个视图模块。

我有 2 个版本的代码。一个是同步的，一个是异步的。
我知道我应该使用异步版本。但是，每当我通过 AB 进行负载测试时，我都会从 Sync 版本中获得更好的结果。

难道我做错了什么？这是我正在测试的代码示例

同步版本：

```
var fs = require('fs'),
    path = require('path'),
    dot = require('dot');
    Step = require('../libraries/step.js');

var view = function(){};

view.prototype = {

    renderView : function(source, data, layout, callback)
    {
        var self = this;

        if (typeof callback !== 'function') throw ViewCallbackException;

        layout = layout ? layout : 'default';

        (function(sources, datas, layouts, callbacks)
        {
            content = fs.readFileSync('./views/layouts/' + layouts + '/index.html', 'utf-8');
            callbacks(null, content);
        })(source, data, layout, callback);
    }
} 
```

异步版本：

```
var fs = require('fs'),
    path = require('path'),
    dot = require('dot');
    Step = require('../libraries/step.js');

var view = function(){};

view.prototype = {

    renderView : function(source, data, layout, callback)
    {
        var self = this;

        if (typeof callback !== 'function') throw ViewCallbackException;

        layout = layout ? layout : 'default';

        (function(sources, datas, layouts, callbacks)
        {
            Step(
                function()
                {
                    fs.readFile('./views/layouts/' + layouts + '/index.html', 'utf-8', this);
                },
                callbacks
            );
        })(source, data, layout, callback);
    }
} 
```

# php - 按顺序对具有重复值的数组重新排序

> ID：10343686
> 
> 赞同：2
> 
> 时间：2012-04-27T01:37:59.527
> 
> 标签：php, multidimensional-array, sorting

**在按顺序放置重复值的同时保留**数组顺序的最佳方法是什么。

这是数组：

```
Array
(
    [0] => Array
        (
            [location] => 1320 N Street
        )

    [1] => Array
        (
            [location] => 1316 N St

        )

    [2] => Array
        (
            [location] => 1320 N Street
        )

) 
```

我想对重复的位置进行分组，所以它看起来像这样：

```
 Array
(
    [0] => Array
        (
            [location] => 1320 N Street
        )

    [1] => Array
        (
            [location] => 1320 N Street

        )

    [2] => Array
        (
            [location] => 1316 N St
        )

) 
```

我最初的想法是遍历数组并在位置键上执行 array_search 以获取索引重复位置，然后执行移位以移动位置。

谢谢你的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T02:13:42.410

这对我有用：

```
$arr = array(
        array("location" => "1320 N Street"),
        array("location" => "1320 N St"),
        array("location" => "1320 N Street"),
);

$tmp = array();
$sorted = array();
foreach ($arr as $k => $v)
{
        $s = serialize($v);
        if (!isset($tmp[$s]))
        {
                $tmp[$s] = $k;
                array_push($sorted, $v);
        } else {
                $sorted = array_merge(array_slice($sorted, 0, $tmp[$s]+1), array($v), array_slice($sorted, $tmp[$s]+1));
        }
}

print_r($sorted); 
```

样本输出：

```
Array
(
    [0] => Array
        (
            [location] => 1320 N Street
        )

    [1] => Array
        (
            [location] => 1320 N Street
        )

    [2] => Array
        (
            [location] => 1320 N St
        )

) 
```

编辑：`$s = serialize($v);`您也可以使用您喜欢的任何键，例如，`$s = $v["location"];`如果它只是重​​要的位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T01:50:01.873

您可以使用[array_multisort()](http://www.php.net/manual/en/function.array-multisort.php)来执行此操作。

```
array_multisort($sub_array[0], SORT_ASC, SORT_STRING,
                $sub_array[1], SORT_NUMERIC, SORT_DESC); 
```

# java - 新意图未在按钮单击时开始

> ID：10343688
> 
> 赞同：0
> 
> 时间：2012-04-27T01:38:20.173
> 
> 标签：java, android, android-intent, android-manifest

在我正在制作的应用程序上，在启动屏幕之后进入的主菜单屏幕上，当您单击其中一个按钮时，什么也没有发生。我不知道是什么问题？

这是 src 文件，它实现了 View.OnClickListener：

```
@Override
public void onClick(View v) {
    // TODO Auto-generated method stub
    switch (v.getId()) {
    case R.id.bPlay:
        Intent ourIntentPlay = new Intent(PartyActivity.this, Play.class);
        startActivity(ourIntentPlay);
        break;
    case R.id.bFacts:
        Intent ourIntentFacts = new Intent(PartyActivity.this, Facts.class);
        startActivity(ourIntentFacts);  
        break;
    case R.id.bInfo:
        Intent ourIntentInfo = new Intent(PartyActivity.this, Info.class);
        startActivity(ourIntentInfo);   
        break;
    case R.id.bHelp:    
        Intent ourIntentHelp = new Intent(PartyActivity.this, Help.class);
        startActivity(ourIntentHelp);
        break;
    }
} 
```

这是应用程序标签内的清单：

```
<activity
        android:name=".Splash"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity
        android:name=".PartyActivity"
        android:label="@string/app_name"
        android:screenOrientation="portrait" >
        <intent-filter>
            <action android:name="w.m.PARTYACTIVITY" />

            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity>
    <activity
        android:name=".Info"
        android:screenOrientation="portrait" >
        <intent-filter>
            <action android:name="w.m.INFO" />

            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity>
    <activity
        android:name=".Play"
        android:screenOrientation="portrait" >
        <intent-filter>
            <action android:name="w.m.PLAY" />

            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity>
    <activity
        android:name=".Help"
        android:screenOrientation="portrait" >
        <intent-filter>
            <action android:name="w.m.HELP" />

            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity> 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T01:40:31.833

您是否为按钮分配了监听器？在您的`onCreate()`方法中执行此操作：

```
findViewById(R.id.bPlay).setOnClickListener(clickListener); 
```

如果您的活动实施`OnClickListener`，那么`clickListener`将是`this`。对所有按钮执行此操作。

# visual-studio-2008 - C++/CLI 自动实现接口

> ID：10343690
> 
> 赞同：1
> 
> 时间：2012-04-27T01:38:29.257
> 
> 标签：visual-studio-2008, visual-c++

在 VS2008 的 C# 程序中，我可以指向接口的名称并说“自动实现”。

C++/CLI 是否有等效选项？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T00:48:33.690

Visual Studio 没有内置，但一些第三方插件为 C++ 提供了此类功能。我认为 Whole Tomato 的 Visual Assist X 包含它。

# ruby-on-rails - 可以检索 Rails 请求的实际原始 URL 吗？

> ID：10343691
> 
> 赞同：0
> 
> 时间：2012-04-27T01:38:33.493
> 
> 标签：ruby-on-rails, request, uriencoding

我想检索我在 Rails 应用程序中访问的页面的**实际**编码 URL 值。

所以，如果我访问[http://domain.com/dir/test%2Bpath](http://domain.com/dir/test%2Bpath)，我应该得到值 "http://domain.com/dir/test%2Bpath" 而不是 "http://domain.com/目录/测试+路径”。

有没有办法做到这一点？我检查了 Request 对象，谷歌搜索......什么都没有。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T02:15:48.157

在我的系统中，我可以使用`request.url`and `request.path`：

```
(rdb:1) request.url
"http://localhost:3000/test2/path/a%2Bb"
(rdb:1) request.path
"/test2/path/a%2Bb" 
```

这应该在控制器或视图中工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T01:47:45.493

您可以使用 ruby​​ 辅助方法

```
URI.unescape('http://domain.com/dir/test%2Bpath') 
```

# android - Android - 处理后退按钮

> ID：10343695
> 
> 赞同：1
> 
> 时间：2012-04-27T01:39:33.190
> 
> 标签：android

我有一个需要用户登录的应用程序。在应用程序中，登录是在 SharedPreferences 文件中包含一个特定的字符串。

除了一个用例：当用户按下手机的后退按钮时，它完全可以工作。

当用户按下手机的后退按钮时，在加载页面时是否会发生一些不同的事情，我应该注意并在代码中加以说明？

谢谢！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T01:47:44.667

```
 @Override
public boolean onKeyUp(int keyCode, KeyEvent event) {
    // TODO Auto-generated method stub
    if(keyCode == KeyEvent.KEYCODE_BACK)
    {
        //do your stuff here
        return true;
    }
    else
        return super.onKeyUp(keyCode, event);
} 
```

尝试上面的代码来处理返回键事件

# android - 从用户创建的所有 TextView 中获取文本

> ID：10343696
> 
> 赞同：0
> 
> 时间：2012-04-27T01:39:40.510
> 
> 标签：android

这是我的添加按钮代码，它将在每次单击添加按钮时从中获取文本`AutoCompleteTextView`并列出。我对从用户创建的`ListView`所有内容中获取文本感到非常困惑。`TextView`

因为我需要将所有用户输入`TextView`与数据库中的症状列进行比较来诊断疾病。希望你们能帮助我=）

```
private OnClickListener onClick() {
    return new OnClickListener() {

        @Override
        public void onClick(View v) { 
            mLayout.addView(createNewTextView(mEditText.getText().toString()));            
        }
    };
}

private TextView createNewTextView(String text) {
    final LayoutParams lparams = new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
    final TextView textView = new TextView(this);
    textView.setLayoutParams(lparams);
    //textView.setText("Symptom: " + text);
    textView.setText(text);
    return textView;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T01:53:34.353

您可以维护一个 ArrayList，如果所有文本视图都可以在其中存储所有 getText()。

只需在使用之前定义并初始化您的数组列表。像下面这样初始化

```
ArrayList<String> arrayList = new ArrayList<String>(); 
```

在 createNewTextView() 方法中，您可以使用以下行将名称添加到 arraylist

```
arrayList.add(text) 
```

稍后您可以使用这些数组列表作为参考并获取用户输入的所有文本

# c# - linq 查询到没有 foreach 的元素

> ID：10343704
> 
> 赞同：0
> 
> 时间：2012-04-27T01:40:53.597
> 
> 标签：c#, linq, linq-to-xml

我需要一些有关 LINQ 和 XML 的帮助。我已经阅读了许多文章，但似乎无法找到我正在寻找的内容，因为大多数人都在循环通过结果来获取值。我有以下 XML，我需要先根据*部分名称*访问特定元素，然后再根据*控件 id*访问特定元素。

```
<formData>
    <section name="SectionA">
        <control id="Textbox1" type="TextBox">
            <value>Value1</value>
        </control>
        <control id="Textbox2" type="TextBox">
            <value>Value2</value>
        </control>
        <control id="Textbox3" type="TextBox">
            <value>Value2</value>
        </control>
    </section>
    <section name="SectionB" />
    <section name="SectionC" />
    <section name="SectionD" />
    <section name="SectionE" />
</formData> 
```

我正在使用以下代码来获取我需要的元素。

```
IEnumerable<XElement> fields = xDocument.Element("formData").Elements("section")
        .Where(m => m.Attribute("name").Value == "SectionA")
        .Single()
        .Elements("control")
        .Where(f => f.Attribute("id").Value == "Control1"); 
```

这导致以下元素：

```
<control id="Textbox1" type="TextBox">
    <value>Value1</value>
</control> 
```

但是，这就是我所能得到的……我需要三个单独的值，ID、TYPE 和 Value。在不使用 foreach 或嵌套的 foreach 循环的情况下如何解决这个问题？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T01:50:03.987

如果你可以使用匿名类型，你可以这样做：

```
var fields = xDocument.Element("formData").Elements("section")
    .Where(m => m.Attribute("name").Value == "SectionA")
    .Single()
    .Elements("control")
    .Where(f => f.Attribute("id").Value == "Control1").Select( f => new
{
     Id = f.Attribute("id"),
     Type = f.Attribute("type"),
     Value = f.Element("value").Value
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T01:55:39.690

试试这个：

```
xdoc.Descendants("section")
    .Where(m => m.Attribute("name").Value == "SectionA")
    .Single()
    .Descendants("control")
    .Where(f => f.Attribute("id").Value == "Textbox1")
    .Select(f => new 
                   { Id = f.Attribute("id").Value, 
                     Type = f.Attribute("type").Value, 
                     Value = f.Element("value").Value } ); 
```

但是我更倾向于在前半部分使用 XPath：

```
xdoc.XPathSelectElements(@"//section[@name=""SectionA""]/control[@id=""Textbox1""]")
    .Select(f => new 
                   { Id = f.Attribute("id").Value, 
                     Type = f.Attribute("type").Value, 
                     Value = f.Element("value").Value } ); 
```

# android - 将新的数据库文件复制到其中后如何更新应用程序的数据库？

> ID：10343705
> 
> 赞同：-1
> 
> 时间：2012-04-27T01:40:57.507
> 
> 标签：android, sqlite

将新数据库文件复制到其中后如何更新应用程序的数据库

1.  我的电子邮件应用程序首先正在运行
2.  然后单击一个按钮，它将数据库文件从 sdcard 复制到 /data/data
3.  完成数据库文件的复制后，如何使应用程序使用新的数据库文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T04:37:01.927

我从未将数据库从 sdcard 复制到 /data/data 文件夹，但我想为了使用数据库，您只需要创建一个具有数据库名称的 DatabaseHelper 实例。这是我的 DatabaseHelper 的骨架版本。您需要编辑 DATABASE_NAME 常量并将其设置为您复制的数据库的名称。

```
public class DatabaseHelper extends SQLiteOpenHelper
{
    private Context context = null;
    private static final String DATABASE_NAME = "yourdbname.db";
    private static final int DATABASE_VERSION = 1;

    public DatabaseHelper(Context c)
    {
        super(c, DATABASE_NAME, null, DATABASE_VERSION);
        context = c;
    }

    @Override
    public void onCreate(SQLiteDatabase db)
    {
        ...
    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion)
    {
        ...
    }
    ...
} 
```

# java - 为什么我在用 Java 读取文本文件时循环？

> ID：10343706
> 
> 赞同：1
> 
> 时间：2012-04-27T01:40:59.243
> 
> 标签：java, loops, file-io, while-loop

为了测试，我在一个文本文件中有三个名字。

```
Joe       ,Smith
Jim       ,Jones
Bob       ,Johnson 
```

`s=reader.readLine();`我通过在循环末尾添加一秒来修复永恒循环`while`，但是当我运行下面的代码时，我得到以下输出：

```
JoeSmith
JoeSmith
JimJones
JimJones
BobJohnson
BobJohnson 
```

如何防止重复名称？我的第二个`s=reader.readLine();`位置不正确吗？ ***废话。没关系。我正在打印源数据和从中创建的数组字段。哦。

```
import java.nio.file.*;
import java.io.*;
import java.nio.channels.FileChannel;
import java.nio.ByteBuffer;
import static java.nio.file.StandardOpenOption.*;
import java.util.Scanner;
import java.text.*;
import javax.swing.JOptionPane;
//
public class VPass
{
    public static void main(String[] args)
    {
        final String FIRST_FORMAT = "          ";
        final String LAST_FORMAT = "          ";
        String delimiter = ",";
        String s = FIRST_FORMAT + delimiter + LAST_FORMAT ;
        String[] array = new String[2];
        Scanner kb = new Scanner(System.in);
        Path file = Paths.get("NameLIst.txt");
        try
        {    
            InputStream iStream=new BufferedInputStream(Files.newInputStream(file));
            BufferedReader reader=new BufferedReader(new InputStreamReader(iStream));
            s=reader.readLine();
            while(s != null)
            {
                array = s.split(delimiter);
                String firstName = array[0];
                String lastName = array[1];
                System.out.println(array[0]+array[1]+"\n"+firstName+lastName);
                s=reader.readLine();
            }
    }
    catch(Exception e)
    {
        System.out.println("Message: " + e);
    }
   }
  } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T01:42:55.370

再次放在`s=reader.readLine();`您的 while 循环的末尾。最终它将变为 null 并且您的循环将退出。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-27T01:42:58.007

`s`在第一次循环迭代后您永远不会更新。

您的代码需要更符合以下方面：

```
while ((s = reader.readLine()) != null)
{
  array = s.split(delimiter);
  String firstName = array[0].trim();
  String lastName = array[1].trim();
  System.out.println(array[0]+array[1]+"\n"+userName+password);
} 
```

编辑：`trim()`根据 Sanchit 的评论添加了建议。

* * *

问题更改后的后续编辑：

> 我通过添加第二个 s=reader.readLine(); 来修复永恒循环。在我的while循环结束时，但是当我运行下面的代码时，我得到以下输出：
> 
> > 乔史密斯
> > 
> > 乔史密斯
> > 
> > 吉姆琼斯
> > 
> > 吉姆琼斯
> > 
> > 鲍勃约翰逊
> > 
> > 鲍勃约翰逊

如果我们查看您的代码：

```
while(s != null)
{
  array = s.split(delimiter);
  String firstName = array[0];
  String lastName = array[1];
  System.out.println(array[0]+array[1]+"\n"+firstName+lastName);   // <-- this prints 2 lines of output
  s=reader.readLine();
} 
```

...您会看到每次循环迭代都输出 2 行输出。

# javascript - 工具提示中的 jQuery 滚动条仅在窗口调整大小时正确加载，每次激活时都会重新加载内容

> ID：10343707
> 
> 赞同：1
> 
> 时间：2012-04-27T01:41:00.170
> 
> 标签：javascript, jquery

我在 jQuery 工具提示中使用自定义 jQuery 滚动条。

***在 Firefox***中，如果您单击两次打开，例如，如果它打开，那么您不会关闭它，而是再次激活工具提示。

***在 chrome***中，它仅在您调整浏览器窗口大小时才会显示并正常运行。

我试图在小提琴中复制它以显示，但小提琴适用于非动态内容：http: [//jsfiddle.net/mstefanko/JdAmG/71/](http://jsfiddle.net/mstefanko/JdAmG/71/) **小提琴仍将显示我正在使用的**内容。

**工具提示的 HTML 实际上是使用 php inline：**

```
<div class="grab-this">
<div id="tip-content" class="nano">
    <div class="scrollContent">
    <?php foreach ( $member_info as $member ) : ?>
        <div class="member">
            <div class="member-photo">
                <img class="photo" src="<?php echo $member->photo_url ?>"/></div>
            <div class="team-member-screen-name">                                       
            <a href="<?php echo $member->url ?>"><?php echo $member->screen_name ?></a>
        </div>
    </div>
    </div>
    <?php endforeach ?>
</div>
</div> 
```

**我正在使用以下工具获取工具提示的内容：**

```
var team = $('.grab-this').html(); 
```

**激活工具提示，如：**

```
$('.tooltip').tipTip({activation: 'click', content: team, enter: function(){
    $("#tip-content.nano", "#tiptip_content").nanoScroller();
}); 
```

我在 Chrome 中注意到的最重要的一点是，每次打开工具提示时，图像和列表似乎都会重新填充。不知道如何解决。

此外，我实际上移动了库中的输入回调以完全支持这一点，之前是在内容加载到工具提示之前。

**任何想法都将不胜感激。在这一点上，即使是伪造窗口调整大小或在内容 100% 加载后强制滚动条重置的方法也会令人惊叹。谢谢**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T17:17:45.230

`mCustomScrollbar`我对插件有同样的问题。我发现因为我正在动态设置包含我正在应用滚动条的内容的 div 的高度，所以没有任何效果（但是当我调整窗口大小时它确实有效）。因此，在样式表中我将 div 的高度设置为 1px，并`updateOnContentResize`在插件初始化时设置为 true，如下所示：

```
$( '.mCustomScrollbar' ).mCustomScrollbar ( { advanced: { updateOnContentResize: true } } ); 
```

# javascript - Javascript - 我如何停止执行

> ID：10343721
> 
> 赞同：0
> 
> 时间：2012-04-27T01:43:16.027
> 
> 标签：javascript, jquery

这是我与嵌入式 js 的链接

```
<a style="padding: 5px;" onclick="confirm_message(); $('contact_693_').show(); $('errors_693_').hide(); this.hide(); $('dont_693_').show();; return false;" id="the_link_693_" href="#" class="add_someone_else">Check it out</a> 
```

这是我的功能

```
function confirm_message(){
         var response = confirm("Are you sure?");
    if(response){
      return false;
    }else{
             return false;
        }
} 
```

基本上，如果用户在确认中单击“否”，我不希望任何其他 js 触发....但是所有其他 javascript

```
 $('contact_693_').show(); $('errors_693_').hide(); this.hide(); $('dont_693_').show();; return false;" 
```

无论用户在确认中单击是还是否，仍然会触发......关于如何解决这个问题的任何想法......

此外，这个嵌入式 js 不是由我创建的，而是用 ruby​​ 构建在页面上的......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T01:52:49.903

抛出一个错误，像这样：

```
function confirm_message(){
    var response = confirm("Are you sure?");
    if(response){
      return false;
    }else{
         throw new Error("Chuck Norris roundhouse kicked your JS, sorry."); // or something a little more descriptive
    }
} 
```

它并不漂亮，但它应该阻止所有未来的 JS 处理。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-27T01:54:34.243

在确认功能中包含您的代码：

```
function confirm_then_execute(){    
     var response = confirm("Are you sure?");    
     if(response){
         $('contact_693_').show(); $('errors_693_').hide();this.hide(); $('dont_693_').show();return false;"
     }
     else{    
         return false;    
    }
} 
```

html:

```
<a style="padding: 5px;" onclick="confirm_then_execute()" id="the_link_693_" href="#" class="add_someone_else">Check it out</a> 
```

# php - PHP 与 Javascript 中的 HTML 标记

> ID：10343723
> 
> 赞同：-2
> 
> 时间：2012-04-27T01:43:22.923
> 
> 标签：php, javascript, html, ajax

当我有一个有趣的问题时，我一直在做很多事情，包括发出 AJAX 请求以从我的网站后端获取信息。是在 php 中进行 html 样式设置，然后发送到客户端更好，还是将数据作为 json 发送，然后在 javascript 中设置样式更好？

由于这个问题有点模糊，我将举一个例子：

```
<?php

$data = array();
$data[0] = array("username" => "Supericy", "content" => "just a sample message 1");
$data[1] = array("username" => "Supericy", "content" => "just a sample message 2");
$data[2] = array("username" => "Supericy", "content" => "just a sample message 3");
// etc...

// now this is the choice:
if ($json)
{
    return json_encode($data);
}
else
{

    // or
    $returnString = "";
    for (...)
    {
        $returnString .= '<div class="username">' . $data[i]["username"] . '</div>';
        $returnString .= '<div class="content">' . $data[i]["content"] . '</div>';
    }

    return $returnString;
}

?> 
```

然后在我的javascript中：

```
// get the information as raw json
var data = ajax_request(json = true);

var author = document.createElement('div');
author.className = "author";
author.innerHTML = data[i]["username"];

var content = document.createElement('div');
content.className = "content";
content.innerHTML = data[i]["content"];

body.appendChild(author);
body.appendChild(content);

// -- OR --

// get the information as pre-formated html
var data = ajax_request(json = false);
body.innerHTML += data; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T02:24:42.780

正如其他用户所说，这在很大程度上取决于您的目标受众是谁。如果您试图保持较低的启动成本并且正在为通常拥有有线/持续互联网连接的用户开发，那么您可以做任何事情。

但是，如果您正在设计应用程序并希望它保持相对可维护性，您可能应该研究 JSON。如果您确实使用 JSON，我还建议您选择一个 jQuery 之类的 javascript 库，以便您可以安全轻松地处理 JSON 对象的解码。

事实上，即使我从 AJAX 页面返回 HTML，我仍然将它包装在 JSON 对象中。这样看起来更标准化了，我可以轻松地重用我以前的 javascript 代码。

以下是一些基本的权衡：

**直接从 PHP 发送 HTML**

*   HTML 代码在代码中可见，可能更容易找到验证问题。
*   可能更容易维护。（关键字 MAY。）如果您正在生成复杂的 html，那么在 PHP 中构建可能会更容易。

**将 JSON 发送到 PHP 并让 Javascript 转换为 HTML**

*   发送到浏览器的数据更少。对于连接有限并为其带宽使用付费的移动用户来说，这是一个很大的优势。
*   通常更易于维护。
*   让客户端计算机而不是服务器进行处理（减少服务器负载）。
*   这些天似乎是与服务器通信的标准格式。甚至 Google Maps API 也使用 JSON 与开发人员进行交互。您甚至可以将 JSON 视为新的 XML。

顺便说一句，JSON 代表 Javascript Object Notation。它遵循 javascript 中对象的标准语法：

例如：var blah = {'variable_name':'variable_value'};

所以我对你的回答是无论如何都使用 JSON，但是你的查看者应该决定你发送多少数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T01:56:26.153

对于极其简单的站点/示例，这无关紧要......对于较大的项目，我会始终使用更便携的 json 响应。

使用 json 使得服务器调用和 js 视图逻辑都可以重用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T01:58:31.150

JSON 将是我的首选。在 JavaScript 中正确使用 HTML 要容易得多，而 PHP`json_encode`则非常方便。另外，它给人一种漂亮、干净的 MVC 感觉。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-04-27T01:49:11.933

我喜欢后端样式，因为这样您就不必担心浏览器兼容性（即互联网浏览器）。

# r - 如何在 R 中的 1 个图中绘制多个正态分布

> ID：10343724
> 
> 赞同：4
> 
> 时间：2012-04-27T01:43:23.920
> 
> 标签：r, plot

我有一个给出平均值和 SD 的数据：

```
#info mean sd
info1 20.84 4.56
info2 29.18 5.41
info3 38.90 6.22 
```

实际上有100多行。给定上述数据，如何绘制*一张图中每一行的正态分布？*

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-27T02:01:07.223

根据 N 真正得到的大小，您可能希望将其拆分为一组多个图表。但是，这是基本方法。首先，您需要根据您的均值和标准差生成一些随机数据。我选择了1000个随机点，你可以根据需要调整。接下来，设置一个具有适当尺寸的空白图，然后使用`lines`和`density`添加数据。我使用了 for 循环，因为它提供了一种为每个数据点指定线型的好方法。最后，在最后添加一个图例：

```
dat <- read.table(text = "info mean sd
info1 20.84 4.56
info2 29.18 5.41
info3 38.90 6.22
", header = TRUE)

densities <- apply(dat[, -1], 1, function(x) rnorm(n = 1000, mean = x[1], sd = x[2]))
colnames(densities) <- dat$info

plot(0, type = "n", xlim = c(min(densities), max(densities)), ylim = c(0, .2))
for (d in 1:ncol(densities)){
  lines(density(densities[, d]), lty = d)
}
legend("topright", legend=colnames(densities), lty=1:ncol(densities)) 
```

![在此处输入图像描述](../Images/2062aa579b4180afb2bc4adf773ee824.png)

或者，使用 ggplot2 可以带来很多好处，即它会自动为您指定合理的 xlim 和 ylim 值，并用图例做明智的事情而不会大惊小怪。

```
library(reshape2)
library(ggplot2)
#Put into long format
densities.m <- melt(densities)
#Plot
ggplot(densities.m, aes(value, linetype = Var2)) + geom_density() 
```

![在此处输入图像描述](../Images/26b8f347938d19fe21c4bff3f4eb9b7d.png)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-27T02:11:25.177

又是一美元的空头和一天的迟到。蔡斯的反应非常彻底。这是我的破解：

```
dat <- read.table(text="info  mean  sd
info1 20.84 4.56
info2 29.18 5.41
info3 38.90 6.22", header=T)

dat <- transform(dat, lower= mean-3*sd, upper= mean+3*sd)

plot(x=c(min(dat$lower)-2, max(dat$upper)+2), y=c(0, .25), ylab="", 
    xlim=c(min(dat$lower)-2, max(dat$upper)+2), xlab="", 
    axes=FALSE, xaxs = "i", type="n")
box()

FUN <- function(rownum) {
    par(new=TRUE)
    curve(dnorm(x,dat[rownum, 2], dat[rownum, 3]),
        xlim=c(c(min(dat$lower)-2, max(dat$upper)+2)), 
        ylim=c(0, .22),
        ylab="", xlab="")
}

lapply(seq_len(nrow(dat)), function(i) FUN(i)) 
```

![在此处输入图像描述](../Images/a5a7430b94d16146cd2af409f379d2d4.png)

# jquery - 设置多个带有 jQ uery 的 HTML 属性（获取 .attr 作为数组）的选项？我所拥有的是一个打开一个带有表单的 Jquery 弹出窗口。此表单有多个选项（您一次可以选择多个）。我正在尝试使用 的“国家/地区”属性来选择多个选项（请参见下面的示例）。这 WORKS: [//链接 .... //弹出 HTML <select id="countryselection" multiple="multiple">ID：10343726 赞同：1 时间：2012-04-27T01:43:48.943 标签：jquery, dom 回答 #1 赞同：3 时间：2012-04-27T02:07:40.933 http://jsfiddle.net/V62Yq/ <a href="#" id="openpop" countries="US,CA">link</a> <select id="countryselection" multiple="multiple"> <option>US</option> <option>CA</option> <option>GB</option> </select> ​ //The event handler $("#openpop").click(function(e){ e.preventDefault(); var vals = $(this).attr('countries').split(","); $("#countryselection").val(vals); });​ 尽管根据您所针对的 html 规范添加国家属性是有效的，但您可能应该在链接标签中使用数据属性来获取诸如“国家”之类的信息。您可以以相同的方式访问它们。 $(selector).attr('data-countries'); <a href="#" id="openpop" data-countries="US,CA">link</a> 见：http ://ejohn.org/blog/html-5-data-attributes/ 回答 #2 赞同：0 时间：2012-04-27T02:02:15.840 假设我们有这个属性：data-countries="US, CA"在<a href="#" id="openpop" data-countries="US, CA"> ... </a> 我们可以这样创建一个数组： con = $("a").data('countries'); arr = con.split(","); alert(arr[0]) http://jsfiddle.net/jV7Cn/ 回答 #3 赞同：0 时间：2012-04-27T02:03:10.910 目前尚不清楚您为什么要尝试使用属性来存储结构化数据，但是，如果允许您按如下方式定义您的国家/地区属性： <a href="#" id="openpop" countries="US,CA"> 您可以使用 Javascript拆分函数将其转换为数组。例如： ("#countryselection").val($(this).attr("countries").split(/,/)); 您原始行的问题： ("#countryselection").val([$(this).attr("countries")]); ...是 Javascript 正在获取属性的实际字符串值，$(this).attr("countries")并将其用作匿名数组的唯一元素，并传递给val(). 尽管此属性的值看起来像数组语法，但您应该知道它不是这样解析的。只有您在文本编辑器中输入的 Javascript 源代码（或 的字符串参数eval()）才会被解释。</select>](#)

# java - Java 静态 TimerTask 关闭

> ID：10343727
> 
> 赞同：0
> 
> 时间：2012-04-27T01:44:03.953
> 
> 标签：java, timer, application-shutdown

我有一个静态的、周期性的、java Timer/TimerTask，我想在应用程序运行时关闭它。我不希望应用程序挂起，因为某些线程仍在运行（例如在 Eclipse 中调试模式下发生的情况，某些环境可能会杀死该东西）。我让它静态的原因是我计划在所有包含类的实例中使用 Timer 有一些（非常简单，可能只是一个计数器）共享内存，所以我觉得类范围是合适的。

我的问题是如何最好地关闭定时器？现在是使用 finalize 的合适时间吗？这个计时器似乎足够良性，以至于有一个不确定的调用来完成可能会起作用？可能需要做某种实例计数来验证那里不再有该类的任何实例？欢迎提出有关管理静态计时器关闭的方法的建议。

伪代码：

```
class foo {

private static Timer someTimer = null;

public foo() {
  if(someTimer == null) {
     someTimer = new Timer(new TimerTask(...));
  }

}

//how should I shut this thing down?
protected void finalize() throws Throwable {

}

//or is better to have shutdown() called explicitly?

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T01:56:30.970

这一切都取决于您的应用程序实际执行的操作，但通常会有某种事件表明应用程序正在关闭。例如，如果它是一个 GUI 应用程序，那么这可能是“用户单击退出按钮”事件。或者它是一个基于 servlet API 的 webapp，它将是一个由 ServletContextListener 触发的事件。

您应该为此事件添加一个侦听器，该侦听器在您的 foo 对象上调用某种关闭方法。在此关闭方法中， foo 应该负责清理其资源，包括停止计时器。

作为最后的手段，您可能想要调查[JVM 关闭挂钩](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Runtime.html#addShutdownHook%28java.lang.Thread%29)

# javascript - 与 CKEditor 3 集成的 ASPNetSpell Spell Checker 不适用于 Chrome

> ID：10343728
> 
> 赞同：17
> 
> 时间：2012-04-27T01:44:09.087
> 
> 标签：javascript, asp.net, asp.net-mvc-3, ckeditor, spell-checking

我一直在努力将 ASPNetSpell 的拼写检查器 ( [http://www.aspnetspell.com/](http://www.aspnetspell.com/) ) 集成到 CKEditor ( [http://ckeditor.com/](http://ckeditor.com/) ) 中。我在 IE 8+、FireFox 12 和 Chrome 18.0.1025.152m 之间看到了一些令人不安的行为。

缺点似乎是 ASPNetSpell 在 Chrome 中找不到 CKEditor 的实例，但在 IE 和 Firefox 中却可以。

我已按照 ASPNetSpell 文档中的建议集成到“所有主要的 HTML 编辑器，包括 FCKEditor、CKEditor、TinyMCE ...”：

```
var spellinstance = new LiveSpellInstance();
spellinstance.Fields = "EDITORS";
spellinstance.ServerModel = "aspx";
spellinstance.DrawSpellImageButton(); 
```

我的理解是，当您将字段设置为“EDITORS”时，这会指示 ASPNetSpell 的客户端脚本查找所有 IFrame。

然而，模式对话框确实显示在 Chrome 中，我确实看到它向服务器发出请求，但是当它返回到对话框时，它的行为就像没有设置拼写检查的字段一样。当您在要检查的字段中有拼写错误时，IE 和 Firefox 会以这种方式运行。

我有以下问题：

1.  有没有人在带有 HTML 编辑器的 Chrome 中使用 ASPNetSpell 的拼写检查器的经验？
2.  我接下来可以看哪里？
3.  为什么模态对话框不加载拼写建议？

**更新**

我已经向他们的支持部门发送了另一封电子邮件，其中包括指向该帖子的链接。希望 ASPNETSPELL 能够增加一些专业知识。

**澄清**

我知道 ASPNETSPELL 不支持编辑器使用的文本区域上的 SCAYT（键入时进行拼写检查）。我正在寻求的功能是单击按钮时完成的显式拼写检查。

**更新#2**

我已经下载了 ASPNetSpell Support 的回答中引用的最近的 ASPNETSPELL 包。我仍然没有运气让它在 Chrome 中工作（当前版本现在是 21.0.1180.89 m）。当仅验证没有附加 CKEditor 实例的文本区域时，它将起作用。

下面是我的 Razor 视图目前的样子。

```
@using ASPNetSpell
@{  
    Layout = "~/_SiteLayout.cshtml";
    Page.Title = "Welcome to my Web Site!";
}
@{
    ASPNetSpell.Razor.SpellButton mySpellButton = new ASPNetSpell.Razor.SpellButton();
    mySpellButton.InstallationPath = ("/Content/ASPNetSpellInclude");
    mySpellButton.FieldsToSpellCheck = "myTextArea";
}
<p>
    <div id="spellcheckthis">
        <textarea id="myTextArea"></textarea>
    </div>
    <div>
        @Html.Raw(mySpellButton.getHtml())
    </div>
</p>
<script type="text/javascript" src="/scripts/ckeditor/ckeditor.js"></script>
<script type="text/javascript" src="/scripts/ckeditor/adapters/jquery.js"></script>
<script type="text/javascript">
    $("#myTextArea").ckeditor();
</script> 
```

当我注释掉这一行时，它起作用了。

```
$("#myTextArea").ckeditor(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T05:53:06.457

此问题现已解决。感谢您报告一个有效的问题。

感谢社区的投入！非常感激。

**应用解决方案：**

1.  [从http://www.aspnetspell.com/ASPNetSpell_Packages](http://www.aspnetspell.com/ASPNetSpell_Packages)下载包
2.  更新您的 ASPNetSpellInclude 目录
3.  清除所有浏览器缓存以确保

**澄清 Chrome 兼容性：**

1.  ASPNetSpell 支持 Chrome 以及 Safari、IE6-9、Opera、FireFox 等。
2.  对于所有浏览器中的所有富编辑器，“SpellCheck AS You Type”不适用于富 HTML 编辑器。这是因为这两种技术都使用可编辑的 DIV 元素覆盖 Textareas - 导致利益冲突。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T16:20:32.590

如果您阅读此页面[http://www.aspnetspell.com/Rich_HTML_Editors](http://www.aspnetspell.com/Rich_HTML_Editors)的最后一行， 则似乎表明这些类型的编辑器不支持您键入时的拼写...引用“只有 SpellButton 以这种方式工作.... AsYouType 无法直接与这些编辑器一起使用。”

# c - 循环顺序如何影响 C 中这种情况的位操作？

> ID：10343729
> 
> 赞同：0
> 
> 时间：2012-04-27T01:44:15.653
> 
> 标签：c, printing, bit-manipulation, decimal, bit

下面的代码在打印一些十进制数字时以看似无休止的循环结束。

```
int main(){
    show(0xBADECAFU);
}

void show(unsigned a){
    unsigned pos=0;
    for(; pos<UINT_MAX; pos++)
        printf("%u", (1U<<pos) & a);
} 
```

下面的代码实际上显示了十六进制数的位。为什么第一个程序运行不正常而第二个程序运行不正常？

```
int main(){
     show(0xBADECAFU);
}

void show(unsigned n){
    unsigned pos=31, count=1;
    for(; pos!=UINT_MAX; pos--, count++){
        printf("%u", n>>pos & 1U);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-27T01:48:41.313

中没有`UINT_MAX`位`unsigned int`。但是，有一些`CHAR_BIT * sizeof(unsigned int)`位。

```
/* nb: this prints bits LSB first */
void show(unsigned a){
    unsigned pos=0;
    for(; pos < CHAR_BIT*sizeof(unsigned); pos++)
        printf("%u", (1U<<pos) & a ? 1 : 0);
} 
```

考虑你的第二种情况，你循环直到`pos`equals `UINT_MAX`。这将正确^*打印出 32 位`unsigned`，假设下溢发生`~0`并且`sizeof(unsigned)`至少为 4。

您的第二个示例可以稍微改进：

```
void show(unsigned n){
    int pos = (CHAR_BIT * sizeof(unsigned)) - 1;
    for(; pos >= 0; pos--) {
        printf("%u", (n>>pos) & 1U);
    }
} 
```

[*您的“打印”位的代码很奇怪，在我的示例中，我已经修复了它。]

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-27T01:53:29.153

UINT_MAX 是可以存储在无符号整数变量中的最大值。它与位数没有直接关系。

您的第一个循环正在增加大量整数。

您的第二个循环从 31 减少到 ??? （无符号，那么当你减 0 时会发生什么？ - 看起来你很幸运并且 0-1 = UINT_MAX）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T04:24:38.967

这只是一个猜测。

我认为第一个问题是`(1U<<pos)`调用未定义的行为 if `pos >= (sizeof(unsigned int) * CHAR_BIT)`。在这种情况下，编译器可以自由地为所欲为。它可能假设您*永远不会*创建这种情况，因此`pos`必须*始终*是`< (sizeof(unsigned int) * CHAR_BIT) < UINT_MAX`，因此可以优化循环条件。不幸的是，这种“优化”给你留下了一个无限循环。

# c++ - 在 C/C++ 中去除二进制数中的前导零

> ID：10343730
> 
> 赞同：4
> 
> 时间：2012-04-27T01:44:17.477
> 
> 标签：c++, c, binary

给定一个整数，如何从其二进制表示中去除前导零？

我正在使用按位运算符来操作它的二进制表示。我想看看一个整数在其二进制表示中是否是回文。我知道那里有不同的解决方案，但我想比较第一位和最后一位，第二位和最后一位，等等。所以，我想知道如何去掉这个 int 的前导 0。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T02:09:54.063

您可以使用`BitScanForward`and `BitScanReverse`（确切的名称因编译器而异）从任一侧有效地修剪（好吧，跳过处理）零。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T02:55:28.067

您可以通过查找数字的对[数基数 2](http://graphics.stanford.edu/~seander/bithacks.html#IntegerLogDeBruijn)来查找设置的第一位：

```
/* from Bit Twiddling Hacks */
static const unsigned int MultiplyDeBruijnBitPosition[32] = 
{
    0, 9, 1, 10, 13, 21, 2, 29, 11, 14, 16, 18, 22, 25, 3, 30,
    8, 12, 20, 28, 15, 17, 24, 7, 19, 27, 23, 6, 26, 5, 4, 31
};

uint32_t pos = value;
pos |= pos >> 1;
pos |= pos >> 2;
pos |= pos >> 4;
pos |= pos >> 8;
pos |= pos >> 16;
pos = MultiplyDeBruijnBitPosition[(uint32_t)(pos * 0x07C4ACDDU) >> 27]; 
```

或者，如果您需要一个面具，只需适应[寻找 2 的下一个幂](http://graphics.stanford.edu/~seander/bithacks.html#RoundUpPowerOf2)：

```
/* adapted from Bit Twiddling Hacks */
uint32_t mask = value - 1;
mask |= mask >> 1;
mask |= mask >> 2;
mask |= mask >> 4;
mask |= mask >> 8;
mask |= mask >> 16; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-06-29T19:02:41.087

如果您不介意使用字符串并且性能不是问题，您可以这样做：

```
 #include <bitset>
    #include <string>
    using namespace std;

    // your number
    int N;
    ...

    // convert to a 32 bit length binary string
    string bitstr = bitset<32>(N).to_string();

    // get the substring
    int index = 0;
    string strippedstr;
    for(unsigned int i = 0; i < bitstr.length(); ++i) {
        if(bitstr[i] == '1') {
            index = i;
            break;
        }
    }
    strippedstr = bitstr.substr(index);
   ... 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-27T21:09:02.680

[这是在如何检查整数的二进制表示是否是回文中](https://stackoverflow.com/questions/845772/how-to-check-if-the-binary-representation-of-an-integer-is-a-palindrome)发布的答案？

您首先使用此函数反转位：

```
/* flip n */
unsigned int flip(unsigned int n)
{
    int i, newInt = 0;
    for (i=0; i<WORDSIZE; ++i)
    {
        newInt += (n & 0x0001);
        newInt <<= 1;
        n >>= 1;
    }
    return newInt;
} 
```

然后删除尾随零：

```
int flipped = flip(n);
/* shift to remove trailing zeroes */
while (!(flipped & 0x0001))
    flipped >>= 1; 
```

要回答您关于检查 int 是否为回文的评论，只需将移位翻转版本与原始版本进行比较：

```
return n == flipped; 
```

# matlab - Matlab中的离散傅里叶变换

> ID：10343731
> 
> 赞同：0
> 
> 时间：2012-04-27T01:44:33.170
> 
> 标签：matlab, fft, dft

我被要求在 matlab 中编写一个 fft 混合基数，但在此之前我想让以直接的方式进行离散傅立叶变换。所以我决定根据维基百科中定义的公式编写代码。

[对不起，我还不允许发布图片]

[http://en.wikipedia.org/wiki/Discrete_Fourier_transform](http://en.wikipedia.org/wiki/Discrete_Fourier_transform)

所以我写了我的代码如下：

```
%Brutal Force Descrete Fourier Trnasform
function [] = dft(X)

%Get the size of A
NN=size(X);
N=NN(2);
%====================

%Declaring an array to store the output variable
 Y = zeros (1, N)
%=========================================

for k = 0 : (N-1)
    st = 0; %the dummy in the summation is zero before we add
    for n = 0 : (N-1)
        t = X(n+1)*exp(-1i*2*pi*k*n/N);
        st = st + t;
    end
    Y(k+1) = st;
end
Y
%============================================= 
```

但是，我的代码似乎输出的结果与本网站的结果不同： [http ://www.random-science-tools.com/maths/FFT.htm](http://www.random-science-tools.com/maths/FFT.htm)

你能帮我找出问题所在吗？

谢谢！

============ 没关系，我的代码似乎是正确的......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T06:37:34.233

默认情况下，Web 链接中的计算器会在执行 FFT 之前将窗口函数应用于数据。这可能是造成差异的原因吗？您可以从下拉菜单中关闭窗口。

顺便说一句，Matlab 中有一个 FFT 函数

# c# - 如何在 C# 代码中使用 Sql 数据源选择的值

> ID：10343736
> 
> 赞同：0
> 
> 时间：2012-04-27T01:45:08.880
> 
> 标签：c#, email, sqldatasource, sqldatareader

我正在 SqlDataSource 中检索用户的电子邮件 ID，并希望向该电子邮件 ID 发送电子邮件。下面是 SQL 数据源的代码。

```
 <asp:SqlDataSource ID="UserDetailsSqlDataSource" runat="server" 
    ConnectionString="<%$ ConnectionStrings:UserDetailsConnectionString %>" 
    SelectCommand="SELECT [LoweredEmail] FROM [vw_aspnet_MembershipUsers] WHERE     ([UserName] = @UserName)">
   <SelectParameters>
        <asp:CookieParameter CookieName="userName" Name="UserName" Type="String" />
    </SelectParameters>
</asp:SqlDataSource> 
```

下面是发送电子邮件的代码。

```
 MailMessage mail = new MailMessage();
   mail.To.Add(); 
```

我不知道如何获取在 mail.To.Add(); 中检索到的电子邮件 ID；

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T02:04:37.367

您可以以编程方式调用[`Select`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.sqldatasource.select.aspx)a 的方法，该方法[`SqlDataSource`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.sqldatasource.aspx)将返回以下内容之一：

*   `DataView`何时`DataSourceMode`设置为`DataSet`
*   `IDataReader`何时`DataSourceMode`设置为`DataReader`

这是一个使用 a 的示例[`SqlDataReader`](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqldatareader.aspx)：

```
var args = System.Web.UI.DataSourceSelectArguments.Empty;
var reader = (SqlDataReader) UserDetailsSqlDataSource.Select(args);

while(reader.Read()) {
   //do something with each returned record, e.g.
   MailMessage mail = new MailMessage();
   mail.To.Add(reader["LoweredEmail"].ToString());
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T12:21:20.073

试试这个，你可以修改代码来传递参数：

```
 string temp = string.Empty;
        string cmdText = "SELECT [LoweredEmail] FROM [vw_aspnet_MembershipUsers] WHERE     ([UserName] = @UserName)"
        using (SqlConnection conn = new SqlConnection(ConnectionString))
        {
            conn.Open();
            using (SqlCommand cmd = new SqlCommand(cmdText, conn))
            {
                cmd.CommandType = CommandType.Text;
                         cmd.Parameters.AddWithValue(@UserName, UserName);
                using (SqlDataReader reader = cmd.ExecuteReader())
                {
                    while(reader.Read())
                    {
                        temp = reader.GetValue(0).ToString(); // email ID
                    }
                }
            }
            conn.Close(); 
```

# timer - 内核函数：lock_timer_base(struct timer_list *, unsigned long *)

> ID：10343737
> 
> 赞同：0
> 
> 时间：2012-04-27T01:45:28.447
> 
> 标签：timer, linux-kernel, delay, scheduler

我试图理解，

```
__mod_timer(struct timer_list *timer, unsigned long expires,
                                                bool pending_only, int pinned) 
```

这是调用`lock_timer_base`方法。我不确定，它到底想做什么？任何的想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T06:50:58.473

它正在尝试重新安排计时器。
`timer`指向一个计时器对象，该对象可能被设置为在未来某个时间到期。
这个函数想要改变它，所以它会在另一个时间过期（`expires`）。

需要锁定以确保数据不会损坏。
例如，有可能旧的过期时间正好是现在，而另一个 CPU 正在同时处理同一个计时器。锁是为了确保事情仍然有效。

# php - PHP_MySQL 显示数据连接表总是双显示

> ID：10343739
> 
> 赞同：0
> 
> 时间：2012-04-27T01:46:47.787
> 
> 标签：php, mysql, database

我的代码有问题：

```
<form name="form" method="get" action="" autocomplete="off">
                                    <input class="text sign" type="text" name="q" id="q" onkeyup="SetButtonStatus(this, 'btnButton')"/>
                                    <span class="hint"><b>Tips :</b>
                                        <br>
                                        1\. Search by <b>badgeid</b>, ex : 110702.<br>
                                        2\. Search by <b>name</b>, ex : david.<br>
                                        3\. Search by <b>otdate</b>, ex : 9-feb-2012.
                                    </span>
                                    <br>
                                    <input class="submit" type="submit" value="Search" ID="btnButton" disabled="disabled"/>
                                </form>

                            <?php
                                if(isset($_GET['q']) && $_GET['q'])
                                {
                                    include ("config.php");
                                    $q = $_GET['q'];
                                    $sql = "select t_submissions.submission_no,
                                    t_submissions.badge_id,
                                    t_submissions.employee_name,
                                    t_submissions.ot_date,
                                    t_submissions.ot_from,
                                    t_submissions.ot_to,
                                    t_submissions.submission_by,
                                    t_acknowledged.status_acknowledge,
                                    t_submissions.status_approve

                                    from t_submissions, t_acknowledged where t_submissions.employee_name like '%$q%' or ot_date like '%$q%' or t_submissions.badge_id like '%$q%' or t_submissions.submission_no=t_acknowledged.submission_no ORDER BY time_submission DESC";

                                    $result = mysql_query($sql) or trigger_error(mysql_error().$sql);
                                    if(mysql_num_rows($result) > 0)
                                    {
                                        ?>
                                        <div class="outer">
                                            <div style="height:342px; overflow:auto; width:818px;">
                                                <table cellspacing="0" class="font">
                                                <thead>
                                                    <tr>
                                                        <th class="th">Form No</th>
                                                        <th class="th">Badge ID</th>
                                                        <th class="th">Name</th>
                                                        <th class="th">OT Date</th>
                                                        <th class="th">OT From</th>
                                                        <th class="th">OT To</th>
                                                        <th class="th">Submission By</th>
                                                        <th class="th">Status Ack.</th>
                                                        <th class="th">Status App.</th>
                                                    </tr>                                               
                                                </thead>
                                                    <?php
                                                        while($submission = mysql_fetch_array($result))
                                                        {?>
                                                        <tbody>
                                                            <tr>
                                                                <td class="td"><?php echo $submission['submission_no'];?></td>
                                                                <td class="td"><?php echo $submission['badge_id'];?></td>
                                                                <td class="td"><?php echo $submission['employee_name'];?></td>
                                                                <td class="td"><?php echo $submission['ot_date'];?></td>
                                                                <td class="td"><?php echo $submission['ot_from'];?></td>
                                                                <td class="td"><?php echo $submission['ot_to'];?></td>
                                                                <td class="td"><?php echo $submission['submission_by'];?></td>
                                                                <td class="td"><?php echo $submission['status_acknowledge'];?></td>
                                                                <td class="td"><?php echo $submission['status_approve'];?></td>
                                                            </tr>
                                                        </tbody>
                                                    <?php }?>
                                                </table>
                                            </div>
                                        </div>
                                        <?php
                                    }
                                    else
                                    {
                                        echo '<p STYLE="position:absolute; TOP:170px; left:500px;">Data not found.</p>';
                                    }
                                }
                            ?> 
```

这段代码没有错误，但还没有用。因为当我尝试查找（例如：按日期查找：“2012 年 4 月 27 日”）时，数据显示，但它显示双数据，而在数据库中不是双数据。

我怀疑这里的代码可能是：

```
$sql = "select t_submissions.submission_no,
                                    t_submissions.badge_id,
                                    t_submissions.employee_name,
                                    t_submissions.ot_date,
                                    t_submissions.ot_from,
                                    t_submissions.ot_to,
                                    t_submissions.submission_by,
                                    t_acknowledged.status_acknowledge,
                                    t_submissions.status_approve

                                    from t_submissions, t_acknowledged where t_submissions.employee_name like '%$q%' or ot_date like '%$q%' or t_submissions.badge_id like '%$q%' and t_submissions.submission_no=t_acknowledged.submission_no ORDER BY time_submission DESC"; 
```

如果它有“或”和“和”，如何结合2个条件？

谢谢你的帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T03:05:56.110

```
$sql = "select t_submissions.submission_no,
                                t_submissions.badge_id,
                                t_submissions.employee_name,
                                t_submissions.ot_date,
                                t_submissions.ot_from,
                                t_submissions.ot_to,
                                t_submissions.submission_by,
                                t_acknowledged.status_acknowledge,
                                t_submissions.status_approve
                                from t_submissions, t_acknowledged where      
(t_submissions.employee_name like '%$q%' 
or ot_date like '%$q%' 
or t_submissions.badge_id like '%$q%') 
and t_submissions.submission_no=t_acknowledged.submission_no 
ORDER BY time_submission DESC"; 
```

# c++ - 为什么在一行中使用此 C++ 函数两次会导致编译错误？

> ID：10343741
> 
> 赞同：15
> 
> 时间：2012-04-27T01:47:01.033
> 
> 标签：c++, visual-studio, type-conversion, default-arguments

我在尝试在 Visual C++ 2010 中实现智能相等测试宏类型模板函数时遇到了一些麻烦，这与[VS 中关于模板函数的默认参数的错误有关](https://stackoverflow.com/questions/10343177/why-do-i-get-an-illegal-token-compile-time-error-with-this-piece-of-c-code)。我通过将参数的值包装在一个额外的函数中来修复它，但现在我发现我不能在一行中使用该函数两次！

头文件：

```
// example.h
#pragma once

#include <limits>

namespace myspace
{

// Need to define this separately to avoid a Visual Studio bug
template<typename T> T epsilon() { return std::numeric_limits<T>::epsilon(); }

// A generic equality test
template<typename T> inline bool smartEqual(
    const T &v1, 
    const T &v2, 
    const T &eps = epsilon<T>())
{
    return (v1 == v2);
}

// Template specialization for floating-point numbers
template<> bool smartEqual<float>(
    const float &v1, 
    const float &v2, 
    const float &eps);

} // namespace myspace 
```

源文件：

```
// example.cpp
#include "example.h"

using namespace std;
using namespace myspace;

// equal-macro specialization for floats using epsilon
template<> bool myspace::smartEqual<float>(
    const float &v1, 
    const float &v2, 
    const float &eps)
{
    return (fabs(v1 - v2) < eps);
}

int _tmain(int argc, _TCHAR* argv[])
{
    float a,b;
    bool x = smartEqual(a,b); // works ok
    bool x = smartEqual(a,b) && smartEqual(b,a); // error
    return 0;
} 
```

报错如下：

> ------ 构建开始：项目：测试，配置：调试 Win32 ------
> test.cpp
> c:\users\ninja\documents\visual studio 2010\projects\test\test\test.cpp(24 ): error C2440: 'default argument' : cannot convert from 'const float *' to 'const float &'
> 原因: cannot convert from 'const float *' to 'const float'
> 没有可以进行这种转换的上下文

违规行是我尝试使用逻辑 AND 两次调用 smartEqual() 的行。

我不明白为什么会这样。将“eps”从引用类型更改为简单的值类型可以修复它，但我希望我知道发生了什么。

谢谢！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-27T02:01:50.613

我想你现在已经遇到了[这个 VS10 错误](https://connect.microsoft.com/VisualStudio/feedback/details/718578/c-reference-default-argument-falsely-converted-to-pointer-on-instantiation-of-more-than-2-explicit-specializations)。

您的代码在 VS11 Beta 上编译正常。

您可以通过更改`smartEqual`为：

```
template<typename T> inline bool smartEqual(
    const T &v1, 
    const T &v2)
{
    return (v1 == v2);
} 
```

并且像这样专门针对浮点（和双精度）：

```
template<> bool myspace::smartEqual<float>(
    const float &v1, 
    const float &v2)
{
    return (fabs(v1 - v2) < std::numeric_limits<float>::epsilon());
} 
```

另一种选择是将 epsilon 参数更改为按值传递：

```
template<typename T> inline bool smartEqual(
    const T &v1, 
    const T &v2, 
    T eps = epsilon<T>())
{
    return (v1 == v2);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-27T02:15:31.370

代码在 VS2010 中失败，但在英特尔编译器中正常。看起来像VS2010中的一个错误

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-27T03:21:18.677

经过一番考虑，我决定采用@Fraser 建议的另一个解决方案（尽管我从他那里得到了灵感）并写下我自己的答案：

1.  第一个解决方案剥夺了我使用自定义值 eps 的灵活性。
2.  使用按值传递的第二个解决方案感觉不对，特别是如果将来我决定将这个函数用于一些更人为的类型。

由于 VS 似乎被关于参数默认值的错误覆盖（仅在模板中？），似乎最明智的做法是通过创建两个版本的 smartEqual 来回避这个问题；有和没有 eps （使用默认值），它几乎做同样的事情，如果不是那么简洁：

```
// An equality test that doesn't require the value of eps, default will be used
template<typename T> inline bool smartEqual(
    const T &v1, 
    const T &v2)
{
    return (v1 == v2);
}

// Float specialization: return (fabs(v1 - v2) < std::numeric_limits<float>::epsilon());
template<> inline bool smartEqual<float>(
    const float &v1, 
    const float &v2);

// A custom-eps value equality test
template<typename T> inline bool smartEqual(
    const T &v1, 
    const T &v2, 
    const T &eps)
{
    return (v1 == v2);
}

// Float specialization: return (fabs(v1 - v2) < eps);
template<> bool smartEqual<float>(
    const float &v1, 
    const float &v2, 
    const float &eps); 
```

# sql - 如何从存储为 varchar 的日期时间中提取日期

> ID：10343746
> 
> 赞同：0
> 
> 时间：2012-04-27T01:47:46.793
> 
> 标签：sql, sql-server

如何将存储为 a 的字符串 'Fri, 9 Mar 2012 10:43:21 +0000 (UTC)'`varchar(max)`转换为`datetime`值 '09-03-2012'，它是字符串的日期部分？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T14:42:18.273

如果你有 SQL Server 2012，你可以试试这个：

选择 CONVERT(date, TRY_PARSE('Fri, 9 Mar 2012 10:43:21 +0000' AS datetime2))

注意：（UTC）已被删除，它没有正确解析。

另外，请注意是否需要本地化该时间值。例如，我住在 AZ，所以通常我只是从 UTC 时间中减去 -7 小时来进行本地化。您将需要根据时区进行类似的调整

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T01:55:07.327

根据 MS：http: [//msdn.microsoft.com/en-us/library/ms187928.aspx](http://msdn.microsoft.com/en-us/library/ms187928.aspx)

> CONVERT() 函数是将一种数据类型的表达式转换为另一种数据类型的通用函数。CONVERT() 函数可用于以不同格式显示日期/时间数据。

表格列出了 105 作为您想要的样式的代码。

因此，对于您的示例日期：

```
CONVERT(VARCHAR(10), 'Fri, 9 Mar 2012 10:43:21 +0000 (UTC)', 105) 
```

应该可以解决问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T01:56:19.297

使用转换并参考此页面[http://msdn.microsoft.com/en-us/library/ms187928.aspx](http://msdn.microsoft.com/en-us/library/ms187928.aspx)

例如 CONVERT(varchar(8), GETDATE(), 112)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-27T02:09:48.297

我不得不先砍掉你的约会，但这里是：

```
DECLARE @ds varchar(30)='Fri, 9 Mar 2012 10:43:21 +0000 (UTC)';
SELECT CONVERT(VARCHAR(10)
,CAST(SUBSTRING(@ds
,CHARINDEX(' ',@ds)
,LEN(@ds)-(PATINDEX('%[0-9][0-9][0-9][0-9]%',@ds)+6))
AS DATETIME)
,105    
) 
```

结果：

```
09-03-2012 
```

# iphone - 在 SQLite 查询中使用 % 在 ame 引号内使用 NSString 变量

> ID：10343749
> 
> 赞同：0
> 
> 时间：2012-04-27T01:48:43.387
> 
> 标签：iphone, objective-c, xcode, sqlite

这是我的代码：

```
NSString *vorStatement = [NSString stringWithFormat:@"SELECT * FROM vor WHERE ident like '%@%'",vorStringSearch]; 
```

我需要将查询设为“SELECT * FROM vor WHERE ident like 'String%'”，但它不断删除其中的最后一个 %，因此查询最终成为“SELECT * FROM vor WHERE ident like 'String'” \ 在 % 前面，它不起作用......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T01:55:09.813

使用 '%%' 格式转义百分号。

```
SELECT * FROM vor WHERE ident like '%@%%' 
```

# html - 文本没有像预期的那样在 IE7 中的浮点数周围流动

> ID：10343755
> 
> 赞同：1
> 
> 时间：2012-04-27T01:49:19.930
> 
> 标签：html, css

我在 IE7 中遇到了浮动问题，我无法弄清楚。我 div 包含一个向右浮动的列表，以便文本保持在左侧。我使用的方法适用于其他浏览器，但不适用于 IE7。我已经简化了代码以使问题更清楚：

```
<div class="contentarea">
    <div class="rightmenu">
        <ul class="menu">
            <li class="item-472"><a href="/joomla/index.php/novazeal-websites" >Website Building</a></li>
            <li class="item-473"><a href="/joomla/index.php/novazeal-joomla-training" >Joomla Training</a></li>
        </ul>
             </div>
             <div class="item-page">
        <p>This is the services page. The quick brown fox jumps over the lazy yellow dog. My dog has fleas, The fox may catch them. I wouldn't want to be that fox.</p>
    </div>
</div> 
```

和相关的CSS：

```
.contentarea {
    background-color: #ffffff;
    width: 794px;
    min-height:100%; 
    height:100%; 
    overflow:visible;
    position:relative; 
    vertical-align: top;
    float:left;
}

.rightmenu {

    float:right;

} 
```

我猜想有一个来自更高层次结构的属性阻止浮动在 IE7 中正常工作，但我尝试更改我能想到的所有内容但没有成功。任何想法将不胜感激。

特里·罗兹穆斯。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T13:42:40.860

对两个 div 使用 float: right 。对一个 div 内的两个或多个相当大的 div 使用左右浮动可能会导致您在 IE7 中遇到的问题。

# mysql - 如何使用 Solr 数据导入处理程序来索引 MySQL 表？

> ID：10343756
> 
> 赞同：2
> 
> 时间：2012-04-27T01:49:32.183
> 
> 标签：mysql, solr, lucene, dataimporthandler

当我尝试通过在浏览器中加载来导入 mysql 表时：

```
http://192.168.136.129:8983/solr/dataimport?command=full-import 
```

我收到此错误：

```
HTTP ERROR 404

Problem accessing /solr/dataimport. Reason:

    NOT_FOUND

Powered by Jetty:// 
```

我正在按照官方 Solr wiki 中的本教程开始使用 DIH：

[http://wiki.apache.org/solr/DIHQuickStart](http://wiki.apache.org/solr/DIHQuickStart)

根据教程，我将此添加到我的 solrconfig.xml 中：

```
<requestHandler name="/dataimport" class="org.apache.solr.handler.dataimport.DataImportHandler">
  <lst name="defaults">
    <str name="config">data-config.xml</str>
  </lst>
</requestHandler> 
```

在 data-config.xml 我有以下内容：

```
<dataConfig>
  <dataSource type="JdbcDataSource" 
              driver="com.mysql.jdbc.Driver"
              url="jdbc:mysql://localhost/site" 
              user="root" 
              password="123"/>
  <document>
    <entity name="profiles" 
            query="select user_id,about,music,movies,occupation from profiles">
    </entity>
  </document>
</dataConfig> 
```

这些是我的 schema.xml 中定义的字段：

```
 <fields>
    <field name="user_id" type="string" indexed="true" stored="true" required="true" />
    <field name="about" type="string" indexed="true" stored="true" />
    <field name="music" type="string" indexed="true" stored="true" />
    <field name="movies" type="string" indexed="true" stored="true" />
    <field name="occupation" type="string" indexed="true" stored="true" />  
    <field name="text" type="text_general" indexed="true" stored="false" multiValued="true"/>
  </fields>

  <uniqueKey>user_id</uniqueKey> 
```

那么我做错了什么？我想它可能与 data-config.xml 文件有关。在其中，我不知道是否假设了 MySQL 驱动程序的某个路径。我从这里下载了 MySQL JDBC 驱动程序：

[http://dev.mysql.com/downloads/connector/j/3.1.html](http://dev.mysql.com/downloads/connector/j/3.1.html)

并将其放在我的`/solr/lib`目录中。

当我下载驱动程序并解压它时，在一个名为“mysql-connector-java-3.0.17-ga”的文件夹中有一堆文件夹。

我确实注意到里面有一个名为：的目录`com`，在里面`mysql`和里面，`jbdc`里面有一个名为`Driver.class`.

这是从 data-config.xml 引用的内容吗？如果是这样，为什么没有提到初始目录。

基本上我不知道问题是什么，请有人帮忙。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-05T19:45:44.133

只需确保在 solrconfig.xml 文件中有这些代码行

```
<lib dir="../../../contrib/dataimporthandler/lib/" regex=".*\.jar" />
<lib dir="../../../dist/" regex="solr-dataimporthandler-\d.*\.jar" /> 
```

确保这些 jar 文件的路径和那些 jar 文件应该在该路径上物理可用。如果您没有，请添加它并尝试重新启动 tomacat 服务器，希望它会得到解决。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-12T12:40:55.510

我知道这个问题很老，但我最近有机会设置它，并且在使用 Bitnami (Windows) 时遇到了类似的问题。

1.  `\dist`确保您有**dataimporter**和mysqlconnector **：**

solr-dataimporthandler-4.9.0.jar

mysql-connector-java-5.1.32-bin.jar

2.  在`\contrib\dataimporthandler\lib`

    激活-1.1.1.jar

    邮件 1.4.3.jar

3.  在你的集合中 solrconfig.xml 应该有

    ```
    <lib dir="../../contrib/dataimporthandler/lib/" regex=".*\.jar" />
    <lib dir="../../dist/" regex="solr-dataimporthandler-.*\.jar" />  
    <lib dir="../../dist/" regex="mysql-connector-java-.*\.jar"/> 
    ```

和：

```
 <requestHandler name="/dataimport" class="org.apache.solr.handler.dataimport.DataImportHandler">
    <lst name="defaults">
      <str name="config">db-data-config.xml</str>
    </lst>
  </requestHandler> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-04T16:04:36.807

看起来您在 Solr /lib 文件夹中缺少“DataImportHandler.jar”，或者您的 solr-conf.xml 文件不知道 DataImportHandler 类。

确保那里存在 DataImportHandler，以检查命中

```
"http://localhost/solr/dataimport" , 
```

如果您的浏览器上没有任何错误消息，这意味着 solr-conf.xml 不知道 SolrDataImportHandler.jar 的位置

解决方案：可以通过在 solr-conf.xml 中使用以下代码行来解决问题

```
</requestHandler>
<requestHandler name="/dataimport" class="org.apache.solr.handler.dataimport.DataImportHandler">
<lst name="defaults">
<str name="config">data-config.xml</str>
</lst>
</requestHandler> 
```

有关更多信息，请查看[此](http://www.beingjavaguys.com/2013/01/how-to-use-solr-data-import-handler-to.html)。

可能存在您的初始配置不完善的情况，请在开始导入前查看[此处配置 solr 。](http://www.beingjavaguys.com/2013/01/if-you-want-to-configure-solr4_19.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-04T09:16:53.840

尝试将您`data-config.xml`所在位置的绝对路径放在您的`solrconfig.xml`而不是相对路径中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-28T18:03:51.707

您收到 NOT_FOUND 错误的事实意味着您的请求处理程序没有被初始化。确保在插入请求处理程序后重新启动 solr。

还要确保将 data-config.xml 保存在与 solrconfig.xml 相同的目录中

# python - 确定当前位于顶部的 tkinter 窗口

> ID：10343759
> 
> 赞同：8
> 
> 时间：2012-04-27T01:49:42.793
> 
> 标签：python, tkinter

我在 python 2.7 和 tkinter 中编写了一个应用程序。我创建了一个带有几个按钮的工具栏，这些按钮打开了显示各种选项的相应顶部窗口。我使用带有“工具按钮”样式的 ttk.Checkbutton 作为指示器来显示选项窗口是打开还是关闭。

问题是如果选择了另一个窗口，选项窗口将回到后面。目前，如果再次选择工具按钮，选项窗口将关闭。但是，我只想在窗口位于顶部时关闭它。如果选项窗口不在顶部，我希望窗口移到前面。

我工作的一些代码：

```
class MainWindow:
    def __init__(self,application):
        self.mainframe=tk.Frame(application)
        application.geometry("900x600+30+30")

        self.otherOptionsSelect=tk.IntVar()
        self.otherOptions_Button=ttk.Checkbutton(application,style='Toolbutton',variable=self.otherOptionsSelect,
                                                onvalue=1, offvalue=0,image=self.optionsIcon, command=self.otherOptions)
    def otherOptions(self):

        if self.otherOptionsSelect.get()==0:
            self.otherOptions.destroy()
            return

        self.otherOptions=tk.Toplevel()
        self.otherOptions.title("IsoSurface Options")
        self.otherOptions.geometry("200x165+"+str(int(application.winfo_x())+555)+"+"+str(int(application.winfo_y())+230))

        self.otherOptApply_button=ttk.Button(self.otherOptions,text="Apply",command=self.showFrame)
        self.otherOptApply_button.place(x=20,y=80,width=50,height=30)

        self.otherOptClose_button=ttk.Button(self.otherOptions,text="Close",command=self.otherOptionsClose)
        self.otherOptClose_button.place(x=80,y=80,width=50,height=30)

    def otherOptionsClose(self):
        self.otherOptionsSelect.set(0)
        self.otherOptions.destroy() 
```

这是我编写的整个应用程序的图片： ![在此处输入图像描述](../Images/8e505bf53d035a418a420dd8ec8d41de.png)

在上图中，每个窗口都有各自的 ttk.checkbutton。目前，切换复选按钮可以打开或关闭窗口。但是，我真正想要它做的是如果窗口在应用程序前面，则关闭窗口，或者如果窗口在应用程序后面，则将窗口放在前面。

希望这可以解决一些问题。

提前致谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-30T23:01:59.903

实际上可以检查窗口的堆叠顺序。使用 Tkinter，你必须做一些有趣的 tcl eval 来获取信息。我在 TkDoc 的[Windows 和 Dialogs](http://www.tkdocs.com/tutorial/windows.html)部分找到了答案，向下滚动直到您到达“堆叠顺序”。代码让我感到困惑，直到我开始交互式地玩弄它。我的测试代码是：

```
import Tkinter as tk
root = tk.Tk()
root.title('root')
one = tk.Toplevel(root)
one.title('one')
two = tk.Toplevel(root)
two.title('two') 
```

然后我操纵窗户，使两个在上面，一个在下面，根在它们下面。在该配置中，以下怪异可以告诉您窗口的相对分层：

```
root.tk.eval('wm stackorder '+str(two)+' isabove '+str(root)) 
```

返回 1，表示“是的，窗口 2 位于窗口根的上方。” 而以下：

```
root.tk.eval('wm stackorder '+str(root)+' isabove '+str(two)) 
```

返回 0，表示“不，窗口根不在窗口 2 之上”。您还可以使用以下命令：

```
root.tk.eval('wm stackorder '+str(root)) 
```

它以奇怪的字符串形式返回完整的窗口堆叠顺序，如下所示：

```
'. .68400520L .68401032L' 
```

当您运行命令时，这开始有意义：

```
str(root)
str(one)
str(two) 
```

并找出根的内部名称为“.”，一个是“.68400520L”，两个是“.68401032L”。您向后阅读输出，`root.tk.eval('wm stackorder '+str(root))`所以它说两个在上面，一个在下面，根在两个下面。

# jquery - 如何在输入表单中保留和显示当前用户名？

> ID：10343760
> 
> 赞同：0
> 
> 时间：2012-04-27T01:49:44.950
> 
> 标签：jquery, codeigniter

我开始使用 Ion Auth 并想制作一个自定义登录表单。我想知道在用户单击“提交”按钮并且验证消息错误后如何在此输入表单中保留和显示当前用户名？我看到这种方法在网站上使用了很多，但我找不到任何例子来说明如何做到这一点。

例如：在他没有正确密码的情况下......

注意到我默认测试了这个例子，当用户输入错误的密码时，会弹出错误消息，当点击提交时，他当前的用户名或电子邮件是空白的，不存储在输入表单中。

更新这里是我当前的代码：

控制器

```
 public function login() {

    // Validated login form
    $this->form_validation->set_rules('username', 'Username', 'required');
    $this->form_validation->set_rules('password', 'Password', 'required');

    // Get user input form
    $username = $this->input->post('username', TRUE);
    $password = $this->input->post('password', TRUE);

    // If it can't log in
    if ($this->form_validation->run() !== true) {
        $data['message'] = (validation_errors()) ? validation_errors() : $this->session->flashdata('message'); 

        $data['username'] = array(  'name'      => 'username', 
                                    'type'      => 'text',
                                    'value'     => set_value('username') ); 

        $data['password'] = array(  'name'  => 'password',
                                    'type'  => 'password' );

        $data['submit'] = array (        'type' => 'submit',
                                    'value' => 'Login' );   

        // Display login page
        $this->load->view('login', $data);
    } else {
        // User success login
        if ($this->ion_auth->login($username, $password)) {
            $this->session->set_flashdata('message', $this->ion_auth->messages());
            redirect($this->config->item('base_url'), 'refresh');               
        } else {
            // Display error
            $this->session->set_flashdata('message', $this->ion_auth->set_error('Invalid username or password.'));

            redirect('auth/login', 'refresh');
        }
    }
} 
```

看法

```
<div id='login_form'>
<?php echo form_open("auth/login");?>
    <p><?php echo form_input($username);?></p>
    <p><?php echo form_password($password);?></p>

    <div id="message"><?php echo $message;?></div>
    <p id="submit"><?php echo form_submit($submit);?></p>
<?php echo form_close();?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T01:52:50.023

`set_value()`如果为 false，您将使用保留该值`form_validation`，CodeIgniter 将保留该值。

**例子：**

```
<input type="text" 
       name="quantity" 
       value="<?php echo set_value('quantity', '0'); ?>" 
       size="50" /> 
```

**参考：** [http ://codeigniter.com/user_guide/helpers/form_helper.html](http://codeigniter.com/user_guide/helpers/form_helper.html)

# c++ - opengl矩阵乘法

> ID：10343764
> 
> 赞同：1
> 
> 时间：2012-04-27T01:50:02.450
> 
> 标签：c++, opengl, matrix

如果我在 C 的 OpenGL 中有一个当前矩阵，并且我应用以下代码：

```
 glMultMatrixf(M);
   glMultMatrixf(M2); 
```

当前变换矩阵是什么样的？在红皮书中，它指出使用 glMultMatrix*(M) 可以做到这一点：CM。但是，执行上述操作也会导致这种情况发生：M(M2v)，其中 M2 在 M 之前应用。在这种情况下，M 将是左操作数，但在前 M 是右操作数。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-27T01:55:46.977

如果你这样做；

```
glLoadIdentity();
glMultMatrixf(M1);
glMultMatrixf(M2);
glMultMatrixf(M3); 
```

那么得到的矩阵是M = M1 * M2 * M3；

如果你应用一个顶点`v`，它会像这样相乘：`v' = M*v = M1*M2*M3*v`

不过，我不太了解您的困惑，您所指的“前案”是什么？

# javascript - 在Javascript倒数计时器中为分钟和秒添加前导零

> ID：10343772
> 
> 赞同：0
> 
> 时间：2012-04-27T01:50:55.743
> 
> 标签：javascript

我正在尝试在这个 javascript 倒数计时器中为分钟和秒添加前导零，但我无法让前导零函数工作。我添加的那个额外的leadingzero 函数似乎不起作用：

```
 <pre>  <html>
<head>
</head.
<body>

<p style="font-size:100px;">

<div id="countdown"></div> </p>
<div id="notifier"></div>
<script type="text/javascript">

   function display( notifier, str ) {
    document.getElementById(notifier).innerHTML = str;
  }

 function toMinuteAndSecond( x ) {
   return Math.floor(x/60) + ":" + x%60;
 }

  function setTimer( remain, actions ) {
    (function countdown() {
   display("countdown", toMinuteAndSecond(remain));         
   actions[remain] && actions[remain]();
   (remain -= 1) >= 0 && setTimeout(arguments.callee, 1000);
    })();
 }

function leadingzero(setTimer) {

if  (setTimer < 10 && setTimer >=0) 
         return '0' + setTimer;
         else
          return setTimer ; }

{
}

  setTimer(600, {
10: function () { display("notifier", "Just 10 seconds to go"); },
 5: function () { display("notifier", "5 seconds left");        },
 0: function () { display("notifier", "Your access is no longer guaranteed.. you   need    to refresh your page to gain another spot");       }
});   
</script>
</body>
</html>

</pre> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T18:18:46.853

```
function toMinuteAndSecond( x ) {
    mins = Math.floor(x/60)
    secs = x%60
    y = ((mins>0) ? ((mins>9) ? mins : '0'+mins) + ":" : "") 
    y += (secs>9 || mins == 0) ? secs : '0'+secs;
    return y
} 
```

# sql - 随着数据库的增长，SQLite 减速（滚动日志）

> ID：10343774
> 
> 赞同：2
> 
> 时间：2012-04-27T01:51:25.353
> 
> 标签：sql, performance, sqlite, database-performance

我在我的 c 应用程序中遇到了大规模的 sqlite 减速问题，不知道这是可以预期的，还是我没有正确使用 sqlite。数据库使用滚动日志，就像这里解释的那样[http://dt.deviantart.com/journal/Build-Your-Own-Circular-Log-with-MySQL-222550965](http://dt.deviantart.com/journal/Build-Your-Own-Circular-Log-with-MySQL-222550965)。

正在写入的表有大约 170 个浮点列，并设置为翻转 200 万行。插入行的查询如下所示：

```
INSERT OR REPLACE INTO table_name (row_id, <170 column names>) values ((SELECT
COALESCE(MAX(log_id), 0) % max_rows + 1 FROM table_name AS t), <170 floats>) 
```

插入时间似乎随着行数线性增长。第一个插入需要不到一秒，而第 60,000 个需要 30 秒。这是你所期望的吗？数据库存储在 ext3 格式的 SD 卡上，这可能是一个因素吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T02:50:11.893

当您使用 时`MAX(log_id)`，您是在要求数据库在表中找到 的最大值`log_id`。如果该列上没有索引，则确定最大值的唯一方法是扫描整个表。

`log_id`您可以使用 SQL 命令向列添加索引，例如：

```
create unique index idx1 on table_name (log_id); 
```

请注意，在一张特别大的桌子上，这可能需要一段时间。如果可以，请先在副本上尝试。

# java - 在Java中，如何一次从文件中迭代多个元素？

> ID：10343775
> 
> 赞同：1
> 
> 时间：2012-04-27T01:51:27.193
> 
> 标签：java, file

如何在 Java 中一次读取一定数量的元素（特别是字符）？这有点难以解释，但我的想法是这样的：

如果我有一个包含以下内容的文本文件：

> 这是一个名为 text.txt 的文本文件

我希望能够有一个字符串或一定长度的字符数组来遍历文件。所以如果我指定长度为3，第一次迭代char数组将包含[T，h，i]，如果我迭代一次，它将变为[h，i，s]，然后是[i，s ， ]， 等等。

我尝试使用 BufferedReader.read(char[], off, len) 方法一次从文件中读取一定数量的字符，但性能对于我想要做的事情很重要。

有没有什么方法可以在 Java 中实现这一点？我尝试过使用 BufferedReader，但我对它不太熟悉，无法充分利用它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T02:19:44.617

通过缓冲输入流和读取器，您实际上可以获得最佳 I/O 性能。（仅缓冲一个可以带来大部分改进；双缓冲只是稍微好一点，但更好。）这是一次读取一个文件块的示例代码：

```
final int CHUNK_SIZE = 3;
final int BUFFER_SIZE = 8192; // explicit buffer size is better
File file = ...
InputStream is = new BufferedInputStream(new FileInputStream(file), BUFFER_SIZE);
Reader rdr = new BufferedReader(new InputStreamReader(is), BUFFER_SIZE);
char buff = new char[CHUNK_SIZE];
int len;
while ((len = rdr.read(buff)) != -1) {
   // buff[0] through buff[len-1] are valid
}
rdr.close(); 
```

当然，这缺少各种错误检查、异常处理等，但它显示了缓冲流和读取器的基本思想。您可能还想在构造`InputStreamReader`. （您可以通过使用 a`FileReader`来绕过输入流的处理，但是您不能指定字符集编码并失去双缓冲带来的轻微性能提升。）

# c++ - 打印动态二维数组，C++

> ID：10343776
> 
> 赞同：1
> 
> 时间：2012-04-27T01:51:31.983
> 
> 标签：c++, multidimensional-array, dynamic-arrays

我正在尝试打印动态分配的二维数组的内容。但是，当我尝试下标一个元素时，我得到一个错误。任何帮助，将不胜感激。

制作数组的片段：

```
 char ** m_points = new char * [m_height];

   for (int y_i=0; y_i<m_height; y_i++)
   {
       m_points[y_i] = new char[m_width];

       for (int x_i=0; x_i<m_width; x_i++)
           m_points[y_i][x_i] = ' ';   
   } 
```

这应该打印数组内容（`cout << m_points[y_i][x_i]`发生错误的地方）：

```
 for (int y_i=0; y_i<m_height; y_i++)
   {       
       for (int x_i=0; x_i<m_width; x_i++)
           cout << m_points[y_i][x_i];

       cout << endl;
   } 
```

错误：

```
invalid types ‘char[int]’ for array subscript 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T02:48:11.817

好吧，我现在觉得自己像个白痴，哈哈。`m_points`是一个成员变量，我声明了两次（一次在构造函数中，一次在头文件中）。修改此问题后，一切正常。无论如何，感谢您的帮助。

# javascript - 用于检测焦点是否在文本字段中的 Javascript 代码

> ID：10343777
> 
> 赞同：4
> 
> 时间：2012-04-27T01:51:44.107
> 
> 标签：javascript, jquery, plugins, safari-extension

如果光标焦点不在文本字段中，我正在尝试制作一个 Safari 扩展程序。但是，以下用于检测焦点是否不在文本字段中的代码不起作用。

```
 if ($(document.activeElement).attr("type") != "text" 
       && $(document.activeElement).attr("type") != "textarea") {
          ..do something
    } 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-27T03:15:47.533

保持简单：

```
var el = document.activeElement;

if (el && (el.tagName.toLowerCase() == 'input' && el.type == 'text' ||
    el.tagName.toLowerCase() == 'textarea')) {
  // focused element is a text input or textarea
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T01:59:13.667

您可以使用 jquery 来实现这一点

```
$('input[type="text"]').focus(function() {
   alert('Focused');
}); 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-04-27T02:17:35.643

```
$("input[type=text]").filter(":not(:focus)").css("background","#ff0000");

$("input[type=text]").focus(function(){
    $(this).css("background","#ffffff");
});

$("input[type=text]").blur(function(){
    $(this).css("background","#ff0000");
}); 
```

应将所有非活动输入的背景设置为红色。（在 Chrome 18 中工作）

# c# - .Net 内存分析器和 固定

> ID：10343778
> 
> 赞同：3
> 
> 时间：2012-04-27T01:51:52.730
> 
> 标签：c#, .net, memory-leaks, memory-profiling

我正在使用 Scitech 的 .Net Memory Profiler 检查我的应用程序中的一些内容（在 WinXP 64 上运行）。我看到很多情况，我的应用程序使用的列表的单个实时实例始终为 32 字节并显示为数组（例如 Products[]）。

当我仔细查看该实例时，它看起来并没有被任何东西引用。如果我选中“仅显示根路径中包含的实例”复选框，则列表引用为空。如果我取消选中该复选框，我只会看到：

```
Object[]    #307[9126]
    <GCHandle>  #306 {Pinned} 
```

分配调用堆栈如下所示：

```
mscorlib!System.Collections.Generic.List<T>..cctor()
[Skipped frame(s)]
mscorlib!System.Collections.ObjectModel.Collection<T>..ctor()
MyApp.ProductsAdmin!MyApp.ProductsAdmin.ViewModels.ProductsAdminViewModel..ctor() ProductsAdminViewModel.cs 
```

看起来它刚刚结束了一个空列表的构建。当根路径中不包含任何实例并且我看到的只是固定时，这意味着什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T08:37:48.990

原因是 List 静态构造函数分配了一个 T 的空数组。使用 Reflector 看一下它的代码：

```
static List()
{
    List<T>._emptyArray = new T[0];
} 
```

# dom - 如何将事件绑定到 jquerymobile 中的多个选择菜单更改

> ID：10343780
> 
> 赞同：0
> 
> 时间：2012-04-27T01:52:05.920
> 
> 标签：dom, jquery-mobile

当我在 jquerymobile 中完成选择后，我想刷新我的页面。现在我使用 tag 中的 onchange 属性。这是我的代码。

```
<div data-role="fieldcontain" style = "background-color:white;border-bottom:1px solid #ccc">
    <label for="select-choice-1" class="select">select specity:</label>
    <select name="select-choice-1" id="select-choice-1" data-native-menu = false multiple=true onchange = "selectChange()"></select>
</div>

$("#select-choice-1").empty();
for (var i = 0; i < item.tagClassList.length; i++) {
    if (item.tagClassList[i].isSelected) {
        $("#select-choice-1").append("<option value="+item.tagClassList[i].id+"checked = true>"+item.tagClassList[i].className+"</option>");
    } else {
        $("#select-choice-1").append("<option value="+item.tagClassList[i].id+">"+item.tagClassList[i].className+"</option>");
    }
    if (i == item.tagClassList.length-1) {
        $("#select-choice-1").selectmenu("refresh");
    };
}; 
```

But the selectmenu() event fires whenever select is selected or selected is cancelled.How can I get the event fires when the selectmenu is closed

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T05:42:25.347

try binding to blur() like so

```
$('document').on('blur', '#select-choice-1', function(){
    //run your check here
    }); 
```

this also takes care of older versions of ios which seem to not fire change events on multiple selects.

# c++ - 为什么我的 C++ 程序的内存使用量不断增长？

> ID：10343781
> 
> 赞同：5
> 
> 时间：2012-04-27T01:52:18.563
> 
> 标签：c++, linux, memory

我是 Linux 和 C++ 的新手，对我的应用程序的内存使用有疑问。

我的应用程序处理大量实时数据，大约每秒**500条消息。**

我使用 std::map 来管理（即插入和删除）所有消息。例如，

```
std::map<int, data_struct> m_map;

// when receive a new message, convert the message into a data structure
m_map.insert(std::pair<int, data_struct>(message.id, data));

// when need to erase a message
iter = m_map.find(id);
if (iter != m_map.end()) {
    m.map.erase(iter);
} 
```

m_map 的大小大约为**2500**左右，即应用程序一开始收到很多新消息，然后逐渐需要擦除消息。大约 10 秒后，收到的新消息数量与需要删除的消息数量大致相同。

我的问题是，大约 20 分钟后，在 Linux **System Monitor**中，我注意到我的应用程序使用的内存约为 1GB。而且它的大小似乎每 20 分钟翻一番。这是正常的吗，应用程序真的使用了那么多内存吗？我在这里错过了什么吗？

谢谢。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-04-27T01:59:31.910

如果你的程序经常分配和释放内存块，你就会得到[碎片化](http://en.wikipedia.org/wiki/Fragmentation_%28computer%29)——操作系统只能做很多事情来确保你分配的内存块之间没有间隙。但一般来说，由此产​​生的内存使用量将趋于平稳。

如果您的程序的内存*不断*增加，那么您就有了内存泄漏——或者您忘记了`delete`对象（或者`free()`在 C 风格分配的情况下调用），或者您在容器中累积对象并忘记删除它们。

要查找丢失的`delete`电话，请使用[valgrind](http://valgrind.org/)！

使用 valgrind 检测内存泄漏就像使用你最喜欢的包管理器安装它然后运行一样简单

```
valgrind my_program 
```

您的程序将运行，当它完成时，valgrind 将转储非常详细的内存泄漏报告及其来源，包括完整的堆栈跟踪。

valgrind 很棒。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T20:46:04.403

map::erase() 调用对象的析构函数，所以你应该在那里处理内存泄漏

也许，如果您可以测量使用的内存增加了多少，以及数据结构的大小，您就会很好地提示问题出在哪里。

您每 20 分钟收到大约 600.000 条消息。如果内存使用量从 1GB 翻倍到 2GB，则每条消息会丢失 1.8kB（1GB / 600.000 条消息在 20 分钟内）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-02-01T23:57:18.363

嗯，内存使用量的增加不仅仅意味着泄漏。

RSS（居民规模）是否在增加？还是 VSZ（虚拟大小）在增加？

你可以通过运行“ps -aux”找到

我所经历的是，如果 RSS 保持不变并且 VSZ 不断增加，那么它肯定是内存泄漏。

如果 RSS 不断增长并且您的 VSZ 在某个时候稳定下来，那么您每次都会触及大量内存并且您正在增加所触及的内存量，在您的代码中发现这一点是很困难的。

# c# - 使用 LINQ 和 EF 返回具有多个结果的列表

> ID：10343782
> 
> 赞同：1
> 
> 时间：2012-04-27T01:52:20.247
> 
> 标签：c#, linq, entity-framework

我有这个返回用户的简单方法：

```
User usr = ReliableExecution.RetryWithExpression<User, User>(u => u.FirstOrDefault(x => x.UserEmail == userEmail)); 
```

现在我需要创建一个类似的方法，但我需要返回一个列表

```
List<Asset> lst = ReliableExecution.RetryWithExpression<Asset, List<Asset>>(u => u.SelectMany(x => x.EventId == eventId)); 
```

我的问题在于无法编译的 [SelectMany(x => x.EventId == eventId)] 部分，我无法确切了解如何使用 LINQ 来获得多个结果。我指定“SelectMany”只是一个例子，它可以是你认为正确的任何东西。

这是 RetryWithExpression 的签名供参考：

```
 public static TValue RetryWithExpression<T, TValue>(Func<ObjectSet<T>, TValue> func, Int32 retryInfiniteLoopGuard = 0)
         where T : class 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T02:04:19.977

我认为你的表达应该改写如下：

```
List<Asset> lst = ReliableExecution
    .RetryWithExpression<Asset, List<Asset>>(
        u => u.Where(x => x.EventId == eventId).ToList()
    ); 
```

简单来说，`SelectMany`使用从每个项目 A 中提取项目 B 列表的函子，将“项目 A 的列表列表”扁平化为“项目 B 的列表”；这不是你想做的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T02:04:25.197

看起来你想要：

```
List<Asset> lst = ReliableExecution.RetryWithExpression<Asset, List<Asset>>
                  (u => u.SelectMany(x => x.Where(y => y.EventId == eventId))); 
```

`SelectMany`期望传递`Func`的返回 an `IEnumerable`，然后将其展平。您正在通过列表，`Asset`然后尝试`EventId`直接在列表中选择。您真正想要的是使用匹配选择列表中的所有资产`EventId`，因此需要额外的`Where`子句。

# html - 如何删除列表中元素之间的空格？

> ID：10343783
> 
> 赞同：1
> 
> 时间：2012-04-27T00:22:33.723
> 
> 标签：html, css

我想删除列表中元素之间的空格。如果我将整个列表放在一起，我可以做到这一点，但这会使事情变得非常难以阅读。

这就是我所拥有的，我希望他们彼此冲撞。

[![一种](../Images/1e90d95dde33f46d3889882210b61517.png)](https://i.stack.imgur.com/KNurZ.jpg)

```
<div id="navBar">
    <ul>
        <li><a href="/" class="home">HOME</a></li>
        <li><a href="/">ROOMS</a></li>
            <!-- <ul>
                <li>Test</li>
            </ul> -->
        <li><a href="/profiles/" class="end">PROFILES</a></li>
    </ul>

       <!-- stuff -->
</div> 
```

CSS：

```
#navBar {
display: inline-block;
height: 30px;
margin: 0;
padding: 0;
border-top: 3px ridge #292929;
}

#navBar ul{
display: inline;
list-style: none;
margin: 0;
padding: 0; 
font: 15px bold Arial;
background: transparent;
}

#navBar ul li {
padding: 0;
display: inline;
text-align: center; 

}

#navBar ul li a{
display: inline-block;
width: 110px;
height: 23px;
padding-top: 7px;
text-decoration: none;
color: White;
border-right: 1px groove #292929;
border-bottom: 1px groove #292929;
background-color: #70797F;
} 
```

我认为这就是与页面的这一部分有关的内容。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T02:10:14.800

`li`向左浮动。

```
#navBar ul li {
    padding: 0;
    display: inline;
    text-align: center;
    float: left;
} 
```

[jsFiddle](http://jsfiddle.net/senoramor/762MK/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-27T02:13:10.277

使用“浮动：左”而不是“显示：内联”

检查这个[http://jsfiddle.net/ckzmF/](http://jsfiddle.net/ckzmF/)

```
#navBar ul li {
  padding: 0;
  text-align: center;
  float:left;
  /* display: inline; */
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-27T02:23:35.460

使用 float 属性，您可以删除元素之间的空间。 [检查这个](http://www.w3schools.com/css/css_float.asp)

```
#navBar ul li 
{
padding: 0;
display: inline;
text-align: center;
float:left;

} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-12T16:44:25.203

您还可以将 margin-left 或 padding-left 设置为 -2px （或任何其他适合的数字）

# android - Android - 尝试使意图转到新目录中的类时出现异常

> ID：10343784
> 
> 赞同：0
> 
> 时间：2012-04-27T01:52:25.693
> 
> 标签：android, android-manifest

我在清单文件中有这个意图：

```
<activity
    android:name=".ProductStrategyActivity"
    android:label="@string/product_strategy_header" /> 
```

当我尝试执行此操作时出现异常：

```
 Intent myIntent = new Intent(LearnActivity.this, ProductStrategyActivity.class);
        LearnActivity.this.startActivity(myIntent); 
```

并且该类位于我的 src/com/app_name/content/ 目录中的一个包中。

问题可能是我需要在清单文件中指定该目录吗？

对不起，我在异常中犯了一个错误。这是堆栈跟踪：

```
04-27 02:07:23.221: E/AndroidRuntime(1234): FATAL EXCEPTION: main
04-27 02:07:23.221: E/AndroidRuntime(1234): android.content.ActivityNotFoundException: Unable to find explicit activity class {com.problemio/com.problemio.content.ProductStrategyActivity}; have you declared this activity in your AndroidManifest.xml?
04-27 02:07:23.221: E/AndroidRuntime(1234):     at android.app.Instrumentation.checkStartActivityResult(Instrumentation.java:1508)
04-27 02:07:23.221: E/AndroidRuntime(1234):     at android.app.Instrumentation.execStartActivity(Instrumentation.java:1384)
04-27 02:07:23.221: E/AndroidRuntime(1234):     at android.app.Activity.startActivityForResult(Activity.java:3190)
04-27 02:07:23.221: E/AndroidRuntime(1234):     at android.app.Activity.startActivity(Activity.java:3297)
04-27 02:07:23.221: E/AndroidRuntime(1234):     at com.problemio.LearnActivity$3.onClick(LearnActivity.java:113)
04-27 02:07:23.221: E/AndroidRuntime(1234):     at android.view.View.performClick(View.java:3511)
04-27 02:07:23.221: E/AndroidRuntime(1234):     at android.view.View$PerformClick.run(View.java:14105)
04-27 02:07:23.221: E/AndroidRuntime(1234):     at android.os.Handler.handleCallback(Handler.java:605)
04-27 02:07:23.221: E/AndroidRuntime(1234):     at android.os.Handler.dispatchMessage(Handler.java:92)
04-27 02:07:23.221: E/AndroidRuntime(1234):     at android.os.Looper.loop(Looper.java:137)
04-27 02:07:23.221: E/AndroidRuntime(1234):     at android.app.ActivityThread.main(ActivityThread.java:4424)
04-27 02:07:23.221: E/AndroidRuntime(1234):     at java.lang.reflect.Method.invokeNative(Native Method)
04-27 02:07:23.221: E/AndroidRuntime(1234):     at java.lang.reflect.Method.invoke(Method.java:511)
04-27 02:07:23.221: E/AndroidRuntime(1234):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
04-27 02:07:23.221: E/AndroidRuntime(1234):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
04-27 02:07:23.221: E/AndroidRuntime(1234):     at dalvik.system.NativeStart.main(Native Method) 
```

那行 LearnActivity.java:113 是我告诉当前意图转到新的意图的地方。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T02:11:28.947

```
.ProductStrategyActivity 
```

将清单文件中的上述单词替换为以下

```
.content.directory.ProductStrategyActivity 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T02:00:20.957

Manifest 条目中的 android:name 可以*是*绝对包名*，也*可以是相对于应用程序命名空间的相对命名空间。

但是如果 Manifest 条目有问题，您将不会获得 NPE。肯定有其他问题。

# shell - 从行中读取值以在 php 或 shell 脚本中打印副本

> ID：10343788
> 
> 赞同：0
> 
> 时间：2012-04-27T01:52:51.700
> 
> 标签：shell, lpr

如何读取以下示例中的值“5”以发出 5 份文件打印？

例如..我的输出类似于下面的代码。

```
订购：101
嘉宾：拉杰
电话：xxx-xxx-xxxx

5 x 香蕉
5 x 葡萄
5 个苹果

```

如何读取上述文件中的值 5 并使用如下。如果有办法在变量中获取 5，我可以在 lpr 命令中使用它。

lpr output.txt -#

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T07:50:59.557

这会很有帮助。

```
egrep '[0-9]+' test | cut -f 1 -d " " | uniq 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T02:12:57.433

我会做这样的事情：

```
sed -n '/^[0-9]\+ x [A-Za-z]\+/ { s/^\([0-9]\+\) x \([A-Za-z]\+\)/\1 \2/; p }' file |
while read num fruit; do
  echo $num $fruit
  # do whatever with lpr
done 
```

***编辑***

如果您想要做的就是找到唯一的 ## ，其中您有一个类似的字符串`## x Something`，您可以使用这个：

```
sed -n '/^[0-9]\+ x [A-Za-z]\+/ { s/^\([0-9]\+\) x.*/\1/; p }' file | uniq 
```

如果要将其捕获到变量中，请使用：

```
var="$(sed -n '/^[0-9]\+ x [A-Za-z]\+/ { s/^\([0-9]\+\) x.*/\1/; p }' file | uniq)" 
```

# ruby - ERB 不想在 Rack App 中渲染文件

> ID：10343789
> 
> 赞同：0
> 
> 时间：2012-04-27T01:53:01.070
> 
> 标签：ruby, templates, rendering, rack, erb

当我使用 erb 方法时：

```
require 'erb'

def erb(template)
  path = File.expand_path("../views/#{template}", __FILE__)
  ERB.new(File.read(path)).result(binding)
end 
```

然后使用：

```
Rack::Response.new(erb('default.html.erb')) 
```

它引发了一个 Errno::ENOENT。为什么是这样？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T02:02:50.347

看起来你可能弄错了文件路径。检查以确保这是正确的。

# iphone - 将 Webapp 添加到 iPhone 主屏幕，例如 TestFlight

> ID：10343792
> 
> 赞同：2
> 
> 时间：2012-04-27T01:53:28.610
> 
> 标签：iphone, web-applications, iphone-standalone-web-app

如何在不让用户按下添加到主屏幕按钮的情况下将我的 web 应用程序添加到主屏幕。当您将 TestFlight 安装到手机时，它会执行此操作，我想创建类似的体验。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T09:30:48.750

这是不可能的。Testflight（和其他人）通过让用户安装特定的配置文件来做到这一点。所以用户必须安装配置文件，这比按下“添加到主页按钮”更复杂。此外，对于配置文件方式，您需要一个能够与特定 SSL 协议进行通信的服务器，并且用户必须信任您，该配置文件不会更改任何电话设置，这是此类配置文件的最初目的。

# javascript - 无法让媒体查询在 IE8 中工作

> ID：10343794
> 
> 赞同：0
> 
> 时间：2012-04-27T01:53:30.510
> 
> 标签：javascript, jquery, html, css, modernizr

**更新** 我已经在我的 FTP[链接](http://designobvio.us/DoV3/)上部署了一个实时版本！希望这会影响答案或至少是主要评论？:(

[Modernizr 2.5+](http://modernizr.com/news/modernizr-25/)取消了对 respond.js 的原生支持。

**问题：**从 Modernizr 2.5+ 加载 yesnope.js 时，如何运行 Respond.js 以实现 IE6~8 媒体查询兼容性？

**可能的答案：**

*   错误地引用了 yesnope 路径。

*   错过了安装步骤。

*   脚本的层次结构冲突

*   ？？？

**脚本：**

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
<script>window.jQuery || document.write(unescape('%3Cscript src="<?php echo get_template_directory_uri(); ?>/library/js/libs/jquery-1.7.1.min.js"%3E%3C/script%3E'))</script>
<script src="<?php echo get_template_directory_uri(); ?>/library/js/modernizr.full.min.js"></script>     
<script src="<?php echo get_template_directory_uri(); ?>/library/js/scripts.js"></script>
        <script src="<?php echo get_template_directory_uri(); ?>/library/js/libs/less-1.3.0.min.js"></script>
        <script src="<?php echo get_template_directory_uri(); ?>/library/js/libs/selectivizr-min.js"></script>
        <script src="<?php echo get_template_directory_uri(); ?>/library/js/libs/respond.min.js"></script>
        <script src="<?php echo get_template_directory_uri(); ?>/library/js/libs/ggs.js"></script>
        <script type="text/javascript">
        Modernizr.load({
            test: Modernizr.mq('only all and (min-width: 1px)'),//true if media queries  supported
            nope: 'library/js/libs/respond.min.js'
            });
        </script>

    </body> 
```

**文件结构**
![在此处输入图像描述](../Images/5c4821102144c4ccccdd956fda1cfd57.png)

**另外** 我已经删除了Modernizr 的[顶部](http://vvcap.net/db/jHwbDNBuDBXHAeNR6Jv5.png)，因为它坚持（两个版本都不起作用）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T20:47:24.860

我不确定您为什么需要共享您的目录结构，但这是否解决了问题？

```
Modernizr.load({
    test: Modernizr.mq('only all and (min-width: 1px)'),//true if media queries supported
    nope: 'library/js/libs/respond.min.js'
}); 
```

编辑：试试这个，我试图让路径更像你已经使用的路径。

```
Modernizr.load({
    test: Modernizr.mq('only all and (min-width: 1px)'),//true if media queries supported
    nope: '<?php echo get_template_directory_uri(); ?>/library/js/libs/respond.min.js'
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T05:47:15.410

**终于解决了！**
未编译的 LESS 文件无法识别 respond.js。所以使用 Simpless，你会得到 respond.js 在 IE 中工作。

[这是一个类似的问题](https://stackoverflow.com/questions/6372211/cant-get-less-js-to-work)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T20:37:08.343

除了 Modernize 应该独立工作并且开箱即用。

这个想法是你把它放在你的标题标签中，以防止所谓的“无样式内容的闪现”。

此外，Modernizr 提供了许多创建自定义下载的可能性：

[http://modernizr.com/download/](http://modernizr.com/download/)

在此页面上，您可以明确包含 YepNope 和 MediaQuery 的内容。

# java - Android应用调试中的强制关闭错误

> ID：10343795
> 
> 赞同：0
> 
> 时间：2012-04-27T01:53:31.630
> 
> 标签：java, android, android-widget

我没有收到任何编译错误，甚至没有出现严重警告，但是当我运行程序时，它会强制关闭，并且日志告诉我一行有某种错误。它成功了一次，但我不知道如何或何时成功。

onClick 方法：

```
public TextView equation;
public TextView answer11;
public TextView answer12;
public TextView or1;
public TextView or2;

public void SolveOnClick(View view){

    EditText a = (EditText)findViewById(R.id.aValue);
    EditText b = (EditText)findViewById(R.id.bValue);       //screws up somewhere here
        EditText c = (EditText)findViewById(R.id.cValue);
        equation = (TextView)findViewById(R.id.equationText);
        answer11 = (TextView)findViewById(R.id.answer1);
        answer12 = (TextView)findViewById(R.id.answer2);
        or1 = (TextView)findViewById(R.id.or1);
        or2 = (TextView)findViewById(R.id.or2);

    double A = Double.parseDouble(a.getText().toString());
        double B = Double.parseDouble(b.getText().toString());
        double C = Double.parseDouble(c.getText().toString());

        Formula(A,B,C);

    } 
```

我的主要图形布局：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/RelativeLayout1"
android:layout_width="fill_parent"
android:layout_height="fill_parent" >

<Button
    android:id="@+id/button1"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_alignParentLeft="true"
    android:onClick="SolveOnClick"
    android:text="@string/solveButtonText" />

<TextView
    android:id="@+id/textView4"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentTop="true"
    android:layout_centerHorizontal="true"
    android:text="@string/quadFormText"
    android:textAppearance="?android:attr/textAppearanceMedium" />

<TextView
    android:id="@+id/textView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@+id/textView4"
    android:layout_marginTop="17dp"
    android:layout_toLeftOf="@+id/textView4"
    android:text="@string/A"
    android:textAppearance="?android:attr/textAppearanceLarge" />

<EditText
    android:id="@+id/aValue"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignLeft="@+id/textView4"
    android:layout_alignTop="@+id/textView1"
    android:layout_marginLeft="15dp"
    android:ems="10"
    android:inputType="numberDecimal" >

    <requestFocus />
</EditText>

<EditText
    android:id="@+id/bValue"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignLeft="@+id/aValue"
    android:layout_below="@+id/aValue"
    android:layout_marginTop="14dp"
    android:ems="10"
    android:inputType="numberDecimal" />

<EditText
    android:id="@+id/cValue"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignLeft="@+id/bValue"
    android:layout_below="@+id/bValue"
    android:layout_marginTop="14dp"
    android:ems="10"
    android:inputType="numberDecimal" />

<TextView
    android:id="@+id/answer1Text"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerVertical="true"
    android:text="@string/equals1"
    android:textAppearance="?android:attr/textAppearanceMedium" />

<TextView
    android:id="@+id/answer2Text"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignLeft="@+id/answer1Text"
    android:layout_below="@+id/answer1Text"
    android:layout_marginTop="88dp"
    android:text="@string/equals2"
    android:textAppearance="?android:attr/textAppearanceMedium" />

<TextView
    android:id="@+id/answer1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignTop="@+id/answer1Text"
    android:layout_toRightOf="@+id/answer1Text"
    android:text="@string/answer11"
    android:textAppearance="?android:attr/textAppearanceMedium" />

<TextView
    android:id="@+id/or1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignLeft="@+id/answer1Text"
    android:layout_below="@+id/answer1Text"
    android:layout_marginTop="25dp"
    android:text="@string/or1"
    android:textAppearance="?android:attr/textAppearanceMedium" />

<TextView
    android:id="@+id/answer2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignTop="@+id/answer2Text"
    android:layout_toRightOf="@+id/answer1Text"
    android:text="@string/answer12"
    android:textAppearance="?android:attr/textAppearanceMedium" />

<TextView
    android:id="@+id/or2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignLeft="@+id/answer2Text"
    android:layout_below="@+id/answer2Text"
    android:layout_marginTop="24dp"
    android:text="@string/or2"
    android:textAppearance="?android:attr/textAppearanceMedium" />

<TextView
    android:id="@+id/equationText"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignLeft="@+id/textView1"
    android:layout_below="@+id/cValue"
    android:layout_marginTop="14dp"
    android:text="@string/equation"
    android:textAppearance="?android:attr/textAppearanceMedium" />

<TextView
    android:id="@+id/textView3"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignBottom="@+id/cValue"
    android:layout_toLeftOf="@+id/textView4"
    android:text="@string/C"
    android:textAppearance="?android:attr/textAppearanceLarge" />

<TextView
    android:id="@+id/textView2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignBottom="@+id/bValue"
    android:layout_alignLeft="@+id/textView3"
    android:text="@string/B"
    android:textAppearance="?android:attr/textAppearanceLarge" /> 
```

创建方法：

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
} 
```

程序失败时的日志之一：

```
04-26 20:39:33.174: E/AndroidRuntime(16092): Caused by: java.lang.ClassCastException:     android.widget.TextView
04-26 20:39:33.174: E/AndroidRuntime(16092):    at calc.ulater.QuadCalcActivity.SolveOnClick(QuadCalcActivity.java:31) 
```

我相信这与十进制文本框有关。在我让它们只取十进制数字之前，该程序运行良好，但在一两次之后它也运行良好。我宁愿不显示我的其余代码，除非你们确定问题出在那儿。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T02:04:10.253

如果这是搞砸的线路：

```
EditText b = (EditText)findViewById(R.id.bValue); 
```

然后它说您正在尝试将 a`TextView`转换为`EditText`.

31号线是什么？那个？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-27T02:04:23.303

```
EditText a = (EditText)findViewById(R.id.aValue);
EditText b = (EditText)findViewById(R.id.bValue);       //screws up somewhere here
EditText c = (EditText)findViewById(R.id.cValue);
equation = (TextView)findViewById(R.id.equationText);
answer11 = (TextView)findViewById(R.id.answer1);
answer12 = (TextView)findViewById(R.id.answer2);
or1 = (TextView)findViewById(R.id.or1);
or2 = (TextView)findViewById(R.id.or2); 
```

所有初始化必须在`onCreate()`而不是在`constructor`

更新：：

```
EditText a = (EditText)view.findViewById(R.id.aValue);
EditText b = (EditText)view.findViewById(R.id.bValue);       //screws up somewhere here
EditText c = (EditText)view.findViewById(R.id.cValue);
equation = (TextView)view.findViewById(R.id.equationText);
answer11 = (TextView)view.findViewById(R.id.answer1);
answer12 = (TextView)view.findViewById(R.id.answer2);
or1 = (TextView)view.findViewById(R.id.or1);
or2 = (TextView)view.findViewById(R.id.or2); 
```

如果视图是您的父视图

# azure - 在 Azure 中，多个 Web 角色如何从存储在 Blob 存储中的同一个 Lucene.net 索引中读取？

> ID：10343798
> 
> 赞同：4
> 
> 时间：2012-04-27T01:53:40.233
> 
> 标签：azure, lucene.net, azure-blob-storage

在 Azure 中，多个 Web 角色如何从存储在 Blob 存储中的同一个 Lucene.net 索引中读取？

顺便说一句 - 我正在使用 NuGet 的**Lucene.Net.Store.Azure**库将我的 Lucene.net 索引保存到 Azure Blob 存储。

下图中概述了我遇到的问题：

![在此处输入图像描述](../Images/5e378d76ee43bfc7cfaf94ef3592b24d.png)

我的一个想法是确保我的每个 Web 角色都以“只读”模式运行，并且从未写入索引。我可以为写作创建一个单独的工人角色。我不确定这是否可行。

我的另一个想法是制作索引的多个副本；每个 Web 角色一个。不过，这似乎有点低效。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T02:33:59.207

你的第一个想法很好。我还建议实现一个单独的工作者角色来写入索引。由于 Azure SLA 要求每个角色有两台服务器，因此您可以实施排队或 Blob 租赁机制，以确保两个工作人员不会尝试同时写入索引。

# ruby-on-rails - Rails：创建具有HABTM关系的记录

> ID：10343801
> 
> 赞同：4
> 
> 时间：2012-04-27T01:54:10.637
> 
> 标签：ruby-on-rails, new-operator, has-and-belongs-to-many

我一直在这样做以创建具有 HABTM 关系的记录：

```
@project = Project.new(:title => params[:project][:title],
                       :percent_complete => params[:project][:percent_complete])
@project.users << User.find(params[:project][:users]) 
```

我想知道是否有办法做同样的事情，但更简洁的是：

```
@project = Project.new(:title => params[:project][:title],
                       :percent_complete => params[:project][:percent_complete]
                       :users => User.find(params[:project][:users])) 
```

感谢您的时间！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T02:06:35.750

您可以研究在您的项目模型中使用[Accepts_nested_attributes_for 。](http://api.rubyonrails.org/classes/ActiveRecord/NestedAttributes/ClassMethods.html)我认为它应该做你正在寻找的东西。不过老实说，我认为它不会给你带来太多收益，而且可能会使事情变得比你想要的更复杂。

# android - 使用 Phonegap 创建 Android 服务？（即使关闭也可以运行phonegap应用程序）

> ID：10343828
> 
> 赞同：74
> 
> 时间：2012-04-27T01:59:11.930
> 
> 标签：android, cordova, mobile, android-intent, android-service

我一直在使用 Phonegap 开发一个 Android 应用程序，现在想做它，这样当应用程序关闭时，它仍然可以在应用程序中执行 java/js 代码。所以我知道我需要创建一个服务。如果我在 phonegap 上创建服务插件，我仍然可以执行 javascript 代码还是只执行 java？

有没有人做这样的事情？我发现了这个讨论，但似乎没有用：[http](http://groups.google.com/group/phonegap/browse_thread/thread/722b0e796baa7fc6) ://groups.google.com/group/phonegap/browse_thread/thread/722b0e796baa7fc6 这就是我现在所拥有的。

在我转向本地开发它之前，如果我无法弄清楚，我想我会问是否有人以前做过。我似乎找不到任何类似的 phonegap 插件。

编辑：我有一个将 Java 代码作为服务执行的应用程序。但是，当它调用 sendjavascript 时，它不起作用。那么，当应用程序使用phonegap关闭时，有没有办法让javascript代码在后台运行？

谢谢

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2012-05-03T08:47:26.037

不，不可能在后台（至少在我看来）作为服务运行 Javascript 代码。Android 上的 Phonegap 使用一个名为[Droidgap](https://github.com/sintaxi/phonegap/blob/master/android/framework/src/com/phonegap/DroidGap.java)的特殊活动，它托管一个 WebView。此浏览器控件执行 JavaScript。这意味着 JS 的执行只能在这个 Activity 内部处理，不管它是否可见。

您从 Google Groups 链接的代码尝试将用 Java 开发的服务绑定到 DroidGap 活动，因此该服务不是用 JS 编写的。

您可以在从 DroidGap 活动派生的子活动中的 JS 代码中包含一些后台活动。例如在你的活动中有一个后台线程，有一个 JS 回调函数并让线程调用这个回调函数。

如果您真的需要服务，则必须使用本地服务。

**更新：**
JS 代码只能通过 Droidgap 活动执行。一个活动可以有 3 个状态（基于[活动的生命周期](http://developer.android.com/reference/android/app/Activity.html#ActivityLifecycle)）：

1.  可见的
2.  不可见但仍然加载
3.  未加载

我提供了一个[示例](https://github.com/ChrLipp/SmsReceiver-Phonegap)，其中我实现了一个 Phonegap 插件。该插件允许活动将自己注册到 SMS_RECEIVED。当活动超出范围（事件 onbeforeunload）时，它会取消注册，因此只处理问题 1。

当您希望处理所有 3 个问题时，您必须将传入的 SMS 意图转发给活动。未加载时，系统将自动加载并激活活动。但这不再是后台服务，只要收到短信，您的应用就会变得可见。

如果您不想要这个（如果您真的想要后台服务），则必须提供本机实现。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-07-16T20:18:07.527

[这篇文章](http://www.tipsfromsiliconvalley.com/create-a-service-on-android-with-phonegap-application/)介绍了如何使用 Phonegap 在 Android上创建服务，它为您的问题提供了一些很好的信息。

它使用了一个很棒的插件，以便轻松地使用 phonegap 构建后台服务。但是你不能使用JS

我没有找到让 JS 在后台运行的方法。但是您可以使用插件将参数从 Java 传递给 JS，反之亦然……这非常有用。不过，您仍然需要用 Java 重写您的 JS 代码。除非您确实有特定的理由只希望运行 JS？（但不应该……）

希望这对访问此页面的某些人有用。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-02-10T13:44:44.443

是的，而且非常简单……只需安装插件 backgroundJS：

[https://build.phonegap.com/plugins/430](https://build.phonegap.com/plugins/430)

它允许您在后台运行 javascript 并结合本地通知插件，您甚至可以随时向用户发送通知，请记住这样做会导致电池更快耗尽，还要考虑这可能使用 iOS 策略创建问题。祝你好运！！！

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-02-13T15:56:26.500

您可以尝试添加**插件** [cordova-plugin-background-mode](https://github.com/katzer/cordova-plugin-background-mode)

但正如作者所说：
*大多数移动操作系统不支持无限后台任务，因此不符合公共商店供应商的要求。不保证成功提交。使用插件需要您自担风险！*

# javascript - 如何将变量传递给 JQuery 定义/方法？

> ID：10343830
> 
> 赞同：0
> 
> 时间：2012-04-27T01:59:27.900
> 
> 标签：javascript, jquery

我使用 jQuery 创建弹出窗口 (UI)。如果我使用下面的代码，我只有一个 600px 的编码高度。有没有办法，如何将变量传递给高度参数？

```
myFrame.dialog({
    title: "Foto-Upload",
    width: 570,
    height: 600,
    modal: true,
    buttons: {

                 "Schließen": function() {
                     $(this).dialog("close");
                 }
    },
    closeOnEscape: true,
    resizable: false
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T02:03:39.307

在 init 之后获取或设置宽度选项。

```
// get the width
var width = myFrame.dialog( "option", "width" );

// set the width
myFrame.dialog( "option", "width", 460 ); 
```

RTM：http: [//jqueryui.com/demos/dialog/#option-width](http://jqueryui.com/demos/dialog/#option-width)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-27T02:21:38.920

它基本上已经是对话框“功能对象”采用的“参数”。

但是如果它在另一个函数中，你也可以传递一个变量，就像下面的小提琴：

```
var _myHeight = 300;

setIt(_myHeight);

function setIt(_h) {
    $("#dialog").dialog({height: _h });
} 
```

[http://jsfiddle.net/tommyAwesome/NmfrP/](http://jsfiddle.net/tommyAwesome/NmfrP/)

然而，最好使用对话框函数的参数。（因为无论如何你都必须使用它。）

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-27T02:02:14.573

您可以使用

```
width: document.getElementById('image-width') 
```

其中图像宽度是

```
<input type="text" name="image-width" id="image-width"> 
```

# algorithm - 在信息检索环境中将概率的负对数钳制为正值（语言建模）

> ID：10343831
> 
> 赞同：2
> 
> 时间：2012-04-27T01:59:28.903
> 
> 标签：algorithm, math, information-retrieval, logarithm

如果我们取概率的对数，则返回的值为负。值用于信息检索库的匹配器中，该匹配器拒绝负值，因此我需要将负值钳制为正值，这样匹配器就不会拒绝文档。

一种方法是在概率中添加一个随机数，比如 K

即 return max(log( prob. + K) 其中 K 是一个大常数或 return max(log(K.Prob),0) 其中 K 是一个大常数

有没有更好的方法将负对数值钳位为正？其中哪一个是更好的方法？

如果我们选择上述任何一种方法，我对如何选择合适的 K 感到非常头晕。如果有人能建议如何选择合适的大 K，我会很高兴？

PS 使用对数值很重要，因为我们正在尝试实现需要乘以概率的模型，但由于架构不可行，无法支持我们将概率的对数相加，这是概率的乘积，因此使用对数值是重要的（采取反对数不是一种可行的方法）在这里

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-27T06:29:18.757

您始终可以使用 log(1 + p)。这将使您的范围从 (-inf, 0] -> [0, log(2)] 偏移。我认为这将解决您的问题。

一般来说，最常用的方法是按照其他人的建议对 log 取负值。您也可以使用 1/(1-log(p)) ，但这对您的情况没有帮助。

所以 log(1 + p) 似乎是最好的解决方案。

# opengl - 用于 OpenGL 集成的 CUDA 或 OpenCL？

> ID：10343833
> 
> 赞同：-1
> 
> 时间：2012-04-27T01:59:37.140
> 
> 标签：opengl, cuda, opencl

我想知道您更喜欢为 OpenGL 集成选择什么。前段时间，我读到 OpenCL 与 OpenGL 具有最佳集成，因为它们属于同一家公司，但我也读到 CUDA 在使用 NVIDIA 的显卡时获得了非常好的性能。那么，如果我有一张 NVIDIA 卡，并且我想用图形进行开发，我应该选择什么？OpenCL 还是 CUDA？

你能给出使用 OpenCL + OpenGL 的好处，以及使用 CUDA + OpenGL 或反之亦然的缺点吗？

请记住，我们正在使用 NVIDIA 的平台。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T03:04:47.767

opencl 和 opengl 在技术上是由 khronos 集团维护的标准，khronos 集团是由几家公司代表组成的。我不知道 nvidia 是否优化了它的 cuda 实现而不是它自己的 opencl 实现，但是 Nvidia 的卡有 opencl，当然你可以在你的设备上使用 opencl 或 cuda。如果您从一开始就学习 CUDA / OPENCL，我会选择 opencl（因为它遵循由多家公司实施的标准，而 NVIDIA 也实施了它）。但是，如果您已经了解 CUDA，请继续实施您的代码并让您的项目继续进行，然后再担心跨平台问题。

而这个帖子什么都有 [OpenCL 或 CUDA 哪条路要走？](https://stackoverflow.com/questions/2644979/opencl-or-cuda-which-way-to-go)

# ruby - 如何修改 Homebrew 的 PATH？

> ID：10343834
> 
> 赞同：159
> 
> 时间：2012-04-27T01:59:38.127
> 
> 标签：ruby, path, homebrew

尝试安装 ruby​​ 1.9.3，读到我需要先安装自制软件。Ran brew doctor，它给了我一堆警告。其中之一是：

> 警告：/usr/bin 出现在 /usr/local/bin 之前 这意味着将使用系统提供的程序而不是 Homebrew 提供的程序。两条路径都存在以下工具：
> 
> ```
> easy_install
> easy_install-2.6 
> ```
> 
> 考虑修改您的 PATH，以便 /usr/local/bin 在您的 PATH 中位于 /usr/bin 之前。

一个人如何做到这里的要求？

* * *

## 回答 #1

> 赞同：305
> 
> 时间：2012-04-27T02:08:54.957

打开您的 /etc/paths 文件，将 /usr/local/bin 放在 /usr/bin 的顶部

```
$ sudo vi /etc/paths
/usr/local/bin
/usr/local/sbin
/usr/bin
/bin
/usr/sbin
/sbin 
```

并**重新启动终端**，@mmel

* * *

## 回答 #2

> 赞同：81
> 
> 时间：2012-06-18T04:09:53.053

有很多方法可以更新您的路径。Jun1st 答案效果很好。另一种方法是增加你`.bash_profile`的：

```
export PATH="/usr/local/bin:/usr/local/sbin:~/bin:$PATH" 
```

上面的线放在你的前面`/usr/local/bin`和`/usr/local/sbin`前面`$PATH`。一旦你找到你的或启动一个新的终端，你可以通过[echo](https://en.wikipedia.org/wiki/Echo_(command))[来](https://en.wikipedia.org/wiki/Source_(command))`.bash_profile`验证你的路径。

```
$ echo $PATH
/usr/local/bin:/usr/local/sbin:/Users/<your account>/bin:/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin:/usr/X11/bin 
```

一旦对结果感到满意，`$ brew doctor`再次运行应该不再产生您的错误。

这篇博文帮助我解决了遇到的问题。[http://moncefbelyamani.com/how-to-install-xcode-homebrew-git-rvm-ruby-on-mac/](http://moncefbelyamani.com/how-to-install-xcode-homebrew-git-rvm-ruby-on-mac/)

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2013-10-31T01:00:13.850

只需在您喜欢的终端应用程序中运行以下行：

```
echo export PATH="/usr/local/bin:$PATH" >> ~/.bash_profile 
```

重新启动终端并运行

```
brew doctor 
```

这个问题应该得到解决

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-06-17T11:18:19.257

在 textEdit 中打开 bash 配置文件

打开 -e .bash_profile

编辑文件或粘贴在 PATH 前面 export PATH=/usr/bin:/usr/sbin:/bin:/sbin: **/usr/local/bin:/usr/local/sbin:~/bin**

保存并关闭文件

*要打开 .bash_profile 直接打开 textEdit > file > recent

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-05-14T06:55:12.610

为了避免不必要的重复，我将以下内容添加到我的 ~/.bash_profile

```
case ":$PATH:" in
  *:/usr/local/bin:*) ;;     # do nothing if $PATH already contains /usr/local/bin
  *) PATH=/usr/local/bin:$PATH ;;  # in every other case, add it to the front
esac 
```

信用：[https ://superuser.com/a/580611](https://superuser.com/a/580611)

# javascript - 获取跨度文本的值

> ID：10343838
> 
> 赞同：66
> 
> 时间：2012-04-27T02:00:00.933
> 
> 标签：javascript, html

我有一个 span`class="span"`和一个 hidden field `class="dropdown"`。

`span`文本发生变化，我需要抓取文本并将其设置为隐藏字段值的值。

然后我将使用 php（我已经拥有）并使用隐藏字段的名称将文本通过电子邮件发送给我。

我该怎么做？

* * *

## 回答 #1

> 赞同：91
> 
> 时间：2012-04-27T02:01:17.600

```
<script type="text/javascript">
document.getElementById('button1').onChange = function () {
    document.getElementById('hidden_field_id').value = document.getElementById('span_id').innerHTML;
}
</script> 
```

* * *

## 回答 #2

> 赞同：50
> 
> 时间：2014-06-13T06:43:20.913

```
var span_Text = document.getElementById("span_Id").innerText;

console.log(span_Text)
```

```
<span id="span_Id">I am the Text </span>
```

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2016-07-29T16:43:26.203

接受的答案很接近......但没有雪茄！

如果您严格希望将字符串返回给您，请使用`textContent`而不是。`innerHTML`

`innerHTML`如果其中还有其他 dom 元素，则可能会产生为您提供 node 元素的副作用。`textContent`会防范这种可能性。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2017-01-05T17:54:00.720

您需要更改您的代码如下：

```
<html>
<body>

<span id="span_Id">Click the button to display the content.</span>

<button onclick="displayDate()">Click Me</button>

<script>
function displayDate() {
   var span_Text = document.getElementById("span_Id").innerText;
   alert (span_Text);
}
</script>
</body>
</html> 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-04-27T02:06:48.550

从您的另一篇文章来看：[如何在 PHP 中获取跨度的内部文本](https://stackoverflow.com/questions/10343376/how-to-get-the-inner-text-of-a-span-in-php)。您是 Web 编程的新手，需要了解客户端代码 (JavaScript) 和服务器代码 (PHP) 之间的区别。

至于从客户端获取跨度文本的正确方法，我推荐 Johns 回答。

这些是开始的好地方。

JavaScript： [https ://stackoverflow.com/questions/11246/best-resources-to-learn-javascript](https://stackoverflow.com/questions/11246/best-resources-to-learn-javascript)

PHP： [https ://stackoverflow.com/questions/772349/what-is-a-good-online-tutorial-for-php](https://stackoverflow.com/questions/772349/what-is-a-good-online-tutorial-for-php)

我还推荐使用 jQuery（一旦你有一些 JavaScript 练习），它将消除你将要遇到的大部分跨浏览器兼容性问题。但是不要把它当作学习的拐杖，理解 JavaScript 也很好。 [http://jquery.com/](http://jquery.com/)

# java - 在 Java 中打印对象值

> ID：10343839
> 
> 赞同：0
> 
> 时间：2012-04-27T02:00:08.007
> 
> 标签：java, eclipse, object

用代码

```
package items;

public class itemtest {

static itemobject[] item = new items[10];
    {
    items[0] = new Toy("Example ID","Example Desc");
    items[1] = new Toy("Second Example ID", " Second Example Desc");
    }

    public static void main(String[] args) 
{
String tid = items[0].exampleiD;
 System.out.print(tid);
}
} 
```

我得到错误：

```
Exception in thread "main" java.lang.NullPointerException at items.itemtest.main(itemtest.java:17) 
```

在代码行上：`String tid = item[0].exampleID;`

抱歉，我对 java 很陌生，有人能解释一下我做错了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T02:03:39.010

```
 {
    items[0] = new Toy("Example ID","Example Desc");
    items[1] = new Toy("Second Example ID", " Second Example Desc");
 } 
```

您需要在此块之前加上单词`static`以使其在加载类时生效 - 这是您实际想要发生的，根据您的代码 - 而不是在`itemobject`创建新实例时，这永远不会发生在你的代码中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T06:26:29.030

从您的代码片段中，我假设您认为您正在尝试执行以下操作：

*   声明一个项目数组
*   用 Toy 对象初始化前两项
*   获取数组的第一项并打印

代码中的问题是：

*   您将项目数组声明为`static`字段
*   您有一个实例初始化块，您可以在其中初始化数组
*   您有一个主要功能，您可以在其中获取项目并打印它

问题是初始化块是在初始化*实例*时完成的。然而，主要方法是一种`static`方法，没有实例。因此该块还没有被调用，你得到了一个 NPE。

您还需要像这样制作初始化块`static`：

```
static {
    items[0] = new Toy...
    items[1] = new Toy...
} 
```

初始化类时调用一次`static`初始化块。因此，在 main 运行之前调用它。

# php - 如何卸载 php apache 和 mysql 以便我可以使用 MAMP - MAC Lion

> ID：10343841
> 
> 赞同：1
> 
> 时间：2012-04-27T02:00:28.417
> 
> 标签：php, mysql, macos, apache

我已经在我的 macbook 上安装了 mysql，因此决定使用 macports 来安装 php5。它将 apache 作为依赖项并安装了它。现在我无法让 php 与 mac 一起使用。到处搜索决定通过安装 MAMP 来节省一些时间。在此之前，我需要删除有关 php、apache 和 mysql 的所有内容。我已经按照以下步骤删除了 mysql：

[如何从 Mac OS X 中卸载 MySQL？](https://stackoverflow.com/questions/1436425/how-do-you-uninstall-mysql-from-mac-os-x)

如何从我的 mac 中删除 php5 和 apache？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T02:06:58.300

真的你不需要删除它们，只要确保 Apache 和 MySQL 没有运行，但是端口卸载“应用程序”应该可以解决问题。

就个人而言，我会回避 MAMP 并使用 Zend 社区服务器之类的东西，如果您需要使用 pear 和/或 pecl 安装其他模块，MAMP 可能会引起头痛。

# ios - iOS：获取音量键事件

> ID：10343842
> 
> 赞同：0
> 
> 时间：2012-04-27T02:00:49.077
> 
> 标签：ios

见过几个应用可以使用音量键切换任务，但是找不到相关信息，比如：“相机+”这个应用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T12:20:26.870

您可以查看[RBVolumeButtons](https://github.com/blladnar/RBVolumeButtons)以帮助您入门。

作者还写了[一篇博](http://fredandrandall.com/blog/2011/11/18/taking-control-of-the-volume-buttons-on-ios-like-camera/)文，提供了更多信息。

# python - 导入模块在 PyScripter 中有效，但在 Python 解释器中无效

> ID：10343844
> 
> 赞同：0
> 
> 时间：2012-04-27T02:00:58.540
> 
> 标签：python, import

我试图通过用不可读的变量替换可读变量来加密模块（ency0）。加密模块 (ency1) 在 PyScripter 中有效，但在 Python Interpreter 中无效。

```
# ency0 module:
 a,b = 2, 3
 _,__ = a,b

# ency1 module:
 import ency0
 print 5*_+6*__ 
 # expect result = 28 # 

# In Python Interpreter:
 >>>import ency0
 >>>import ency1
 Traceback <most recent call last>:
   File "<stndin>", line 1, in <module>
   File "ency1.py", line 13, in <module>
     print 5*_ + 6*__ 
 NameError: name '_' is not defined
 >>> 
```

在 PyScripter 中，只要先运行 ency0 然后再运行 ency1，我就可以获得 28 的正确结果。如果仅运行 ency1，则会收到一条名为“_”的错误消息未定义。

但是在 Python Interpreter 中，我总是有一条错误消息：无论是否提前运行 ency0，name '_' is not defined。

我相信我错过了一些默认情况下始终包含在 PyScripter 中的非常基本的语句。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T09:58:58.083

这是一个错误，因为您应该访问 _ as

```
ency0._ 
```

如果您只想使用_请使用

```
from ency0 import * 
```

代替

```
import ency0 
```

你可能总是使用 dir() 来打印你的局部变量列表。

# ruby - 关于 Ruby 中变量更改的问题

> ID：10343847
> 
> 赞同：2
> 
> 时间：2012-04-27T02:01:48.010
> 
> 标签：ruby

我有以下代码...

```
@organisims.each do |organisim|

  randomvalue = rand(10)
  prediction = organisim.predict

  if prediction == randomvalue
    organisim.resources += 1
  end
  if prediction != randomvalue
    organisim.resources -= 1
  end 
end 
```

如果它所做的预测与随机生成的数字相匹配，我正在尝试更改“organisims”资源。它似乎工作正常，如果没有匹配则 -1，如果匹配则 +1。

问题是，当我迭代这个（有机体）数组，处理它们的资源时，我在输出中收到重复项，例如

周期 100 平均资源：1500

周期 101 平均资源：1500

再说一次，

周期 102 平均资源：1400

周期 103 平均资源：1400

这是我的代码的问题（我认为它没有问题）还是 Ruby 使用的伪随机数生成器？

像往常一样干杯马丁

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T03:56:30.800

我认为这可能是您的累加器范围的问题，请考虑这个示例。

```
# example Organism class
class Organisim

  attr_accessor :predict, :resources, :prediction

  def initialize
    @resources = 0
  end

  def predict
    @prediction = rand(10)
    @prediction
  end

end

# initialize @organisims
@organisims = []

100.times do
  @organisims << Organisim.new
end

puts "!!!! Starting Organisim Specific Run"
# iterate over array tracking organisim's resource
@organisims.each_with_index do |org, i|
  # parrallel assignment
  r, p = rand(10), org.predict
  #ruby ternery operator
  (p == r) ? org.resources += 1 : org.resources -= 1
  puts "Run #{i} Prediction: #{org.prediction} Instance Resources: #{org.resources} Overall Resources: n/a"
end

puts "!!!! Cumulative Resource Run"
# resources scoped outside the iteration loop as accumulator
overall_resources = 0

# re-initialize @organisims
@organisims = []

100.times do
  @organisims << Organisim.new
end

@organisims.each_with_index do |org, i|
  # parrallel assignment
  r, p = rand(10), org.predict
  #ruby ternery operator
  #track class level resource
  (p == r) ? org.resources += 1 : org.resources -= 1

  #iterate accumulator
  (p == r) ? overall_resources += 1 : overall_resources -= 1
  puts "Run #{i} Prediction: #{org.prediction} Instance Resources: #{org.resources} Overall Resources: #{overall_resources}"
end 
```

第一个迭代循环就像（我认为）您在问题中遇到的那个，但是您正在更改organisim 对象实例中的资源。

您的累加器的第二次迭代超出了迭代的范围，因此它会随着对象的操作而增长和缩小。:-)

# javascript - 数组中的最大值，基于函数

> ID：10343850
> 
> 赞同：0
> 
> 时间：2012-04-27T02:02:00.447
> 
> 标签：javascript, jquery

我有一个对象数组。我想根据一个函数找到这个数组的“最大值”，该函数在给定 2 个对象时返回更大的对象。

```
function comparison(first, second) {
    // ... arbitrary comparison based on properties...
    return first; // or second
}

var a = [obj1, obj2, obj3];
var maxObj = ????(comparison); 
```

我在这里填写什么？什么是优雅和简短？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T02:12:25.067

这样的事情应该比排序更快（取决于数据）：

```
/*
  values: array of values to test.
      fn: function that takes two arguements and returns true if the first is bigger.
*/
var maximum = function(values, fn) {
    var currentValue, maxValue = values.pop();
    while(values.length)
        maxValue = fn(maxValue, currentValue = values.pop()) ? maxValue : currentValue;
    return maxValue;
} 
```

示例：http: [//jsfiddle.net/SaBJ4/2/](http://jsfiddle.net/SaBJ4/2/)

更好的是，使用[`Array.reduce`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/Reduce)：

```
var a = ['abc', 'defg', 'highlkasd', 'ac', 'asdh'];
a.reduce(function(a, b) { return a.length > b.length ? a : b; }); // highlkasd 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T02:17:33.347

显而易见的方法有什么问题？

```
for(var i = 0, max; i < a.length; ++i)
    max = typeof max == 'undefined' ? a[i] : comparison(a[i], max); 
```

随你喜欢把它包起来。

* * *

或者您可以利用这一事实`a = []; x = a[0]`让您参与`undefined`进来`x`，并按照 RobG 的方式进行操作：

```
for(var i = 1, max = a[0]; i < a.length; ++i)
    max = comparison(a[i], max); 
```

这很好地避免了一堆`typeof`你真的不需要的运算符和比较。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T02:04:44.377

```
[obj,obj,obj].sort(comparison)

// aka
var sorted = [obj,obj,obj].sort(function(a,b){
  // return 1/0/-1
}); 
```

然后弹出顶部或底部元素（无论您正在排序）以获得“最大”对象。

[数组排序](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/sort)

# php - 获取替代网址的最快方法？

> ID：10343853
> 
> 赞同：0
> 
> 时间：2012-04-27T02:02:27.803
> 
> 标签：php, url, url-rewriting

我正在从 googl 图书 API 中获取数据。当我抓取图片时，我会得到以下网址：

```
http://bks8.books.google.com/books?id=t9S82uKGp8IC&printsec=frontcover&img=1&zoom=1&edge=curl&source=gbs_api 
```

我需要一种轻松设置的方法：

```
http://www.example.com/quickFileNr847394.jpg 
```

这样当我访问上面的 url 时，它会抓取第一个 URL。我基本上只需要最简单和最快的方法来为我的程序提供一个映射到另一个 URL 的 URL？

# matlab - 具有高斯噪声的微分方程 MATLAB

> ID：10343868
> 
> 赞同：0
> 
> 时间：2012-04-27T02:04:47.840
> 
> 标签：matlab, statistics

该等式具有以下形式：

```
x'' + w.^2 x=n
w=1 
```

`n`是高斯*噪声* ，和。`mean = 0``standard deviation = 1`

如果没有*高斯噪声*，我可以使用`ODE45`from求解方程`matlab`。问题是，当考虑到高斯噪声时，我该如何处理这个方程？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T03:29:07.583

这实际上取决于如何将噪声添加到系统中。如果您想在系统中任意添加噪声，每次调用该函数时，都将其添加到表示数据的方程中：

```
function dydt = solve(t,y)
dydt = [y(2); -y(1)+randn(1)]; 
```

然后打电话

```
[t,y] = ode45(@solve, [0 10],[1 -1]); 
```

这里的问题是，如果噪声与信号大小相比很大，则需要更多的迭代，因此需要更多的时间。

另一方面，如果噪声是预先确定的，您可以采样并保持，或者合并一阶保持，然后将其添加到系统中

# iphone - iPhone 如何使用 ARC 正确处理 Core Foundation 引用？

> ID：10343871
> 
> 赞同：3
> 
> 时间：2012-04-27T02:05:03.053
> 
> 标签：iphone, objective-c, ios, reference, core-foundation

我对核心基础编程很陌生，想知道我想做的事情是正确的。我正在使用 ARC，但不确定它如何处理非对象引用。我需要保存对示例缓冲区的引用并稍后在应用程序中使用它。这是可能的，还是**会在此之前释放样本缓冲区？**

**将使用 self.sampleBuffer = sampleBuffer_; 导致内存泄漏？**在此呼叫之后，我是否需要添加手动呼叫以释放？

```
@property (nonatomic)CMSampleBufferRef sampleBuffer;

- (void)captureOutput:(AVCaptureOutput *)captureOutput didOutputSampleBuffer:(CMSampleBufferRef)sampleBuffer_ fromConnection:(AVCaptureConnection *)connection
{
    //does this cause memory leak?
    self.sampleBuffer = sampleBuffer_;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T02:13:39.223

它不会导致内存泄漏。实际上，您更有可能遇到从您下方释放的对象的问题，因为属性`assign`默认具有该属性，这意味着它们不保留（阅读：拥有）分配的对象。

如果您持有样本缓冲区足够长的时间以使其成为一个属性，您可能应该按照[文档](https://developer.apple.com/library/ios/#documentation/AVFoundation/Reference/AVCaptureVideoDataOutputSampleBufferDelegate_Protocol/Reference/Reference.html)并将样本复制到您自己的缓冲区，而不是持有交给您的委托的对象：

> 如果您的应用程序由于保留提供的 CMSampleBuffer 对象太久而导致样本被丢弃，但它需要长时间访问样本数据，请考虑将数据复制到新缓冲区中，然后释放样本缓冲区（如果它以前被保留）以便它引用的内存可以被重用。

另一方面，如果您真的想保留对示例缓冲区的引用，您可以保留其他所有内容，并`CFRetain`在将其分配给您的属性之前调用该对象（确保您`CFRelease`是之前分配的对象）。`strong`这与 Foundation 对象的属性具有等效的语义。

# asp.net - ASP.NET 打开 Excel 工作表错误：MS Access DB 引擎无法打开或写入文件..."

> ID：10343876
> 
> 赞同：0
> 
> 时间：2012-04-27T02:05:50.913
> 
> 标签：asp.net, ms-access, permissions

尝试从我的 ASP.NET 网站打开 Excel 工作表时收到错误消息：

> Microsoft Access 数据库引擎无法打开或写入文件“”。它已被其他用户独占打开，或者您需要权限才能查看和写入其数据。

我想知道这是否与我今天玩弄我的文档文件夹的“所有者”有关。

我该如何解决这个问题？

TIA

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T21:10:45.433

我需要授予 NETWORK SERVICE 帐户对我的文件夹的修改权限。

# java - Java如何获取声明对象的参数？

> ID：10343878
> 
> 赞同：0
> 
> 时间：2012-04-27T02:06:17.100
> 
> 标签：java, object, parameters, find

所以我想找出创建对象时使用了哪些参数。我该怎么做？例如：

```
Example temp=new Example(1,2,3); 
```

如何在不手动保存的情况下找出 1,2 和 3 的值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T02:11:55.427

定义良好的对象通常将其成员隐藏在一组方法后面。如果您需要发现一个对象是如何被初始化的，您应该向它的类添加允许确定这些细节的方法。是的，这将涉及至少将这些细节保存为对象初始化程序的一部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T02:07:23.517

你不能。（确实，如果可以的话，那会导致许多坏事发生。并非所有构造函数参数都应该被保存。）

像往常一样，手动将它们保存为类中的字段。

# web-services - 在 WAS 7.0 上部署的 EAR 应用程序中调用axis2 web 服务的异常

> ID：10343883
> 
> 赞同：1
> 
> 时间：2012-04-27T02:07:20.917
> 
> 标签：web-services, websphere, axis2, ear

我们已经使用axis2 部署了一些Web 服务，它们是在使用RAD 7.5.0 创建的EAR 项目上实现的。EAR 部署在Websphere Application Server 7.0 应用服务器上。我们在服务器上创建了一个共享库，其中包括所有使用的通用 jar（包括 commons-fileupload-1.2.jar），名为 CommonsJar。在我们使用 Tomcat Server 6.XX（仅部署 WAR 而不是整个 EAR）的单元测试中，应用程序具有良好的功能

当应用程序在 WAS 7.0 中部署时会出现问题：当我们在 Java EE 客户端中实例化 Web 服务客户端的存根类时，WAS 会提供以下异常：

```
[4/26/12 20:35:31:742 CDT] 00000026 SystemErr     R org.apache.axis2.deployment.DeploymentException: org.apache.commons.fileupload.FileUploadException
[4/26/12 20:35:31:743 CDT] 00000026 SystemErr     R     at org.apache.axis2.deployment.AxisConfigBuilder.processMessageBuilders(AxisConfigBuilder.java:741)
[4/26/12 20:35:31:743 CDT] 00000026 SystemErr     R     at org.apache.axis2.deployment.AxisConfigBuilder.populateConfig(AxisConfigBuilder.java:202)
[4/26/12 20:35:31:743 CDT] 00000026 SystemErr     R     at org.apache.axis2.deployment.DeploymentEngine.populateAxisConfiguration(DeploymentEngine.java:641)
[4/26/12 20:35:31:744 CDT] 00000026 SystemErr     R     at org.apache.axis2.deployment.FileSystemConfigurator.getAxisConfiguration(FileSystemConfigurator.java:116)
[4/26/12 20:35:31:744 CDT] 00000026 SystemErr     R     at org.apache.axis2.context.ConfigurationContextFactory.createConfigurationContext(ConfigurationContextFactory.java:68)
[4/26/12 20:35:31:744 CDT] 00000026 SystemErr     R     at org.apache.axis2.context.ConfigurationContextFactory.createConfigurationContextFromFileSystem(ConfigurationContextFactory.java:184)
[4/26/12 20:35:31:744 CDT] 00000026 SystemErr     R     at com.mx.ing.wm.portal.dao.RestableceUsuarioPortalDAO.<init>(RestableceUsuarioPortalDAO.java:57)
[4/26/12 20:35:31:744 CDT] 00000026 SystemErr     R     at com.mx.ing.wm.portal.blogic.RestableceUsuarioPortalFacade.consultaUsuarioRestablecer(RestableceUsuarioPortalFacade.java:16)
[4/26/12 20:35:31:744 CDT] 00000026 SystemErr     R     at com.mx.ing.wm.portal.actions.RestableceUsuarioPortalAction.consultaUsuarioRestablecer(RestableceUsuarioPortalAction.java:188)
[4/26/12 20:35:31:744 CDT] 00000026 SystemErr     R     at com.mx.ing.wm.portal.actions.RestableceUsuarioPortalAction.execute(RestableceUsuarioPortalAction.java:128)
[4/26/12 20:35:31:744 CDT] 00000026 SystemErr     R     at org.apache.struts.chain.commands.servlet.ExecuteAction.execute(ExecuteAction.java:58)
[4/26/12 20:35:31:744 CDT] 00000026 SystemErr     R     at org.apache.struts.chain.commands.AbstractExecuteAction.execute(AbstractExecuteAction.java:67)
[4/26/12 20:35:31:744 CDT] 00000026 SystemErr     R     at org.apache.struts.chain.commands.ActionCommandBase.execute(ActionCommandBase.java:51)
[4/26/12 20:35:31:744 CDT] 00000026 SystemErr     R     at org.apache.commons.chain.impl.ChainBase.execute(ChainBase.java:191)
[4/26/12 20:35:31:744 CDT] 00000026 SystemErr     R     at org.apache.commons.chain.generic.LookupCommand.execute(LookupCommand.java:305)
[4/26/12 20:35:31:745 CDT] 00000026 SystemErr     R     at org.apache.commons.chain.impl.ChainBase.execute(ChainBase.java:191)
[4/26/12 20:35:31:745 CDT] 00000026 SystemErr     R     at org.apache.struts.chain.ComposableRequestProcessor.process(ComposableRequestProcessor.java:283)
[4/26/12 20:35:31:745 CDT] 00000026 SystemErr     R     at org.apache.struts.action.ActionServlet.process(ActionServlet.java:1913)
[4/26/12 20:35:31:745 CDT] 00000026 SystemErr     R     at org.apache.struts.action.ActionServlet.doPost(ActionServlet.java:462)
[4/26/12 20:35:31:745 CDT] 00000026 SystemErr     R     at javax.servlet.http.HttpServlet.service(HttpServlet.java:738)
[4/26/12 20:35:31:745 CDT] 00000026 SystemErr     R     at javax.servlet.http.HttpServlet.service(HttpServlet.java:831)
[4/26/12 20:35:31:745 CDT] 00000026 SystemErr     R     at com.ibm.ws.webcontainer.servlet.ServletWrapper.service(ServletWrapper.java:1657)
[4/26/12 20:35:31:745 CDT] 00000026 SystemErr     R     at com.ibm.ws.webcontainer.servlet.ServletWrapper.handleRequest(ServletWrapper.java:939)
[4/26/12 20:35:31:745 CDT] 00000026 SystemErr     R     at com.ibm.ws.webcontainer.servlet.ServletWrapper.handleRequest(ServletWrapper.java:502)
[4/26/12 20:35:31:745 CDT] 00000026 SystemErr     R     at com.ibm.ws.webcontainer.servlet.ServletWrapperImpl.handleRequest(ServletWrapperImpl.java:179)
[4/26/12 20:35:31:745 CDT] 00000026 SystemErr     R     at com.ibm.ws.webcontainer.servlet.CacheServletWrapper.handleRequest(CacheServletWrapper.java:91)
[4/26/12 20:35:31:745 CDT] 00000026 SystemErr     R     at com.ibm.ws.webcontainer.WebContainer.handleRequest(WebContainer.java:864)
[4/26/12 20:35:31:746 CDT] 00000026 SystemErr     R     at com.ibm.ws.webcontainer.WSWebContainer.handleRequest(WSWebContainer.java:1592)
[4/26/12 20:35:31:746 CDT] 00000026 SystemErr     R     at com.ibm.ws.webcontainer.channel.WCChannelLink.ready(WCChannelLink.java:186)
[4/26/12 20:35:31:746 CDT] 00000026 SystemErr     R     at com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.handleDiscrimination(HttpInboundLink.java:452)
[4/26/12 20:35:31:746 CDT] 00000026 SystemErr     R     at com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.handleNewRequest(HttpInboundLink.java:511)
[4/26/12 20:35:31:746 CDT] 00000026 SystemErr     R     at com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.processRequest(HttpInboundLink.java:305)
[4/26/12 20:35:31:746 CDT] 00000026 SystemErr     R     at com.ibm.ws.http.channel.inbound.impl.HttpICLReadCallback.complete(HttpICLReadCallback.java:83)
[4/26/12 20:35:31:746 CDT] 00000026 SystemErr     R     at com.ibm.ws.ssl.channel.impl.SSLReadServiceContext$SSLReadCompletedCallback.complete(SSLReadServiceContext.java:1784)
[4/26/12 20:35:31:746 CDT] 00000026 SystemErr     R     at com.ibm.ws.tcp.channel.impl.AioReadCompletionListener.futureCompleted(AioReadCompletionListener.java:165)
[4/26/12 20:35:31:746 CDT] 00000026 SystemErr     R     at com.ibm.io.async.AbstractAsyncFuture.invokeCallback(AbstractAsyncFuture.java:217)
[4/26/12 20:35:31:746 CDT] 00000026 SystemErr     R     at com.ibm.io.async.AsyncChannelFuture.fireCompletionActions(AsyncChannelFuture.java:161)
[4/26/12 20:35:31:746 CDT] 00000026 SystemErr     R     at com.ibm.io.async.AsyncFuture.completed(AsyncFuture.java:138)
[4/26/12 20:35:31:747 CDT] 00000026 SystemErr     R     at com.ibm.io.async.ResultHandler.complete(ResultHandler.java:204)
[4/26/12 20:35:31:747 CDT] 00000026 SystemErr     R     at com.ibm.io.async.ResultHandler.runEventProcessingLoop(ResultHandler.java:775)
[4/26/12 20:35:31:747 CDT] 00000026 SystemErr     R     at com.ibm.io.async.ResultHandler$2.run(ResultHandler.java:905)
[4/26/12 20:35:31:747 CDT] 00000026 SystemErr     R     at com.ibm.ws.util.ThreadPool$Worker.run(ThreadPool.java:1604)
[4/26/12 20:35:31:747 CDT] 00000026 SystemErr     R Caused by: java.lang.NoClassDefFoundError: org.apache.commons.fileupload.FileUploadException
[4/26/12 20:35:31:748 CDT] 00000026 SystemErr     R     at java.lang.J9VMInternals.verifyImpl(Native Method)
[4/26/12 20:35:31:748 CDT] 00000026 SystemErr     R     at java.lang.J9VMInternals.verify(J9VMInternals.java:72)
[4/26/12 20:35:31:748 CDT] 00000026 SystemErr     R     at java.lang.J9VMInternals.initialize(J9VMInternals.java:134)
[4/26/12 20:35:31:748 CDT] 00000026 SystemErr     R     at java.lang.J9VMInternals.newInstanceImpl(Native Method)
[4/26/12 20:35:31:748 CDT] 00000026 SystemErr     R     at java.lang.Class.newInstance(Class.java:1345)
[4/26/12 20:35:31:748 CDT] 00000026 SystemErr     R     at org.apache.axis2.deployment.DescriptionBuilder.processMessageBuilders(DescriptionBuilder.java:230)
[4/26/12 20:35:31:748 CDT] 00000026 SystemErr     R     at org.apache.axis2.deployment.AxisConfigBuilder.processMessageBuilders(AxisConfigBuilder.java:738)
[4/26/12 20:35:31:748 CDT] 00000026 SystemErr     R     ... 41 more
[4/26/12 20:35:31:748 CDT] 00000026 SystemErr     R Caused by: java.lang.ClassNotFoundException: org.apache.commons.fileupload.FileUploadException
[4/26/12 20:35:31:749 CDT] 00000026 SystemErr     R     at java.lang.ClassNotFoundException.<init>(ClassNotFoundException.java:76)
[4/26/12 20:35:31:749 CDT] 00000026 SystemErr     R     at org.eclipse.osgi.framework.internal.core.BundleLoader.findClass(BundleLoader.java:351)
[4/26/12 20:35:31:749 CDT] 00000026 SystemErr     R     at org.eclipse.osgi.framework.internal.core.BundleLoader.findClass(BundleLoader.java:347)
[4/26/12 20:35:31:749 CDT] 00000026 SystemErr     R     at org.eclipse.osgi.internal.baseadaptor.DefaultClassLoader.loadClass(DefaultClassLoader.java:83)
[4/26/12 20:35:31:750 CDT] 00000026 SystemErr     R     at java.lang.ClassLoader.loadClass(ClassLoader.java:619)
[4/26/12 20:35:31:750 CDT] 00000026 SystemErr     R     ... 48 more 
```

我们的 deployment.xml 文件的配置如下所示：

```
<?xml version="1.0" encoding="UTF-8"?> <appdeployment:Deployment xmi:version="2.0" xmlns:xmi="http://www.omg.org/XMI" xmlns:appdeployment="http://www.ibm.com/websphere/appserver/schemas/5.0/appdeployment.xmi" xmi:id="Deployment_1335376658663">   <deployedObject xmi:type="appdeployment:ApplicationDeployment" xmi:id="ApplicationDeployment_1335376658663" startingWeight="10" warClassLoaderPolicy="SINGLE">
    <modules xmi:type="appdeployment:WebModuleDeployment" xmi:id="WebModuleDeployment_1335376658663" startingWeight="10000" uri="CallCenterWMWeb.war"/>
    <modules xmi:type="appdeployment:WebModuleDeployment" xmi:id="WebModuleDeployment_1335376658664" startingWeight="10000" uri="OperacionesWMWeb.war"/>
    <classloader xmi:id="Classloader_1335376658663" mode="PARENT_LAST">
      <libraries xmi:id="LibraryRef_1335376658663" libraryName="CommonsJar"/>
    </classloader>   </deployedObject> </appdeployment:Deployment> 
```

服务器上 JVM 变量的配置是这样的：

```
-Xquickstart -Xlp -Dclient.encoding.override=UTF-8 -agentlib:getClasses 
```

可能是什么问题，有什么想法吗？谢谢指教

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T21:49:28.250

检查这篇文章：

[http://axis.apache.org/axis2/java/core/docs/app_server.html](http://axis.apache.org/axis2/java/core/docs/app_server.html)

寻找 WebSphere 部分，也许您必须编辑 axis2.xml 配置并将参数 EnableChildFirstClassLoading 更改为“true”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T20:13:20.197

PARENT_LAST 似乎仅适用于您的部署 XML 的 CommonsJar，尝试从管理控制台 UI 或使用此处提到的脚本为所有 Web 应用程序打开它 -[我可以在 ibm-web-bnd 中为 WebSphere 设置类加载器策略吗？ xmi 文件是什么？](https://stackoverflow.com/questions/813202/can-i-set-the-classloader-policy-for-websphere-in-the-ibm-web-bnd-xmi-file)（请参阅其中的 deployment.xml 外观示例）

# spring - Spring 3.1 @Cacheable - 方法仍然执行

> ID：10343885
> 
> 赞同：28
> 
> 时间：2012-04-27T02:07:23.877
> 
> 标签：spring, caching, ehcache

我正在尝试按照[此处](http://www.javacodegeeks.com/2011/02/spring-31-cache-abstraction-tutorial.html "这里")和[此处](http://blog.springsource.org/2011/02/23/spring-3-1-m1-caching/)的说明实现 Spring 3.1 缓存，但它似乎不起作用：我的方法每次都运行，即使它被标记为 @cacheable。我究竟做错了什么？

我已经将它移动到一个带有自己的配置文件的 junit 测试用例中，以将它与我的应用程序的其余部分隔离，但问题仍然存在。以下是相关文件：

Spring-test-servlet.xml

```
<beans xmlns="http://www.springframework.org/schema/beans"
   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
   xmlns:cache="http://www.springframework.org/schema/cache"
   xmlns:p="http://www.springframework.org/schema/p"
   xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
    http://www.springframework.org/schema/cache http://www.springframework.org/schema/cache/spring-cache.xsd">
<cache:annotation-driven />

<bean id="cacheManager" class="org.springframework.cache.ehcache.EhCacheCacheManager" p:cache-manager-ref="ehcache"/>
<bean id="ehcache" class="org.springframework.cache.ehcache.EhCacheManagerFactoryBean"
      p:config-location="classpath:ehcache.xml"/>
</beans> 
```

ehcache.xml

```
<ehcache>
<diskStore path="java.io.tmpdir"/>
<cache name="cache"
       maxElementsInMemory="100"
       eternal="false"
       timeToIdleSeconds="120"
       timeToLiveSeconds="120"
       overflowToDisk="true"
       maxElementsOnDisk="10000000"
       diskPersistent="false"
       diskExpiryThreadIntervalSeconds="120"
       memoryStoreEvictionPolicy="LRU"/>

</ehcache> 
```

我的测试.java

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration({"classpath:spring-test-servlet.xml"})
@Component
public class MyTest extends TestCase {

    @Test
    public void testCache1(){
        for(int i = 0; i < 5; i++){
            System.out.println("Calling someMethod...");
            System.out.println(someMethod(0));
        }
    }

    @Cacheable("testmethod")
    private int someMethod(int val){
        System.out.println("Not from cache");
        return 5;
    }
} 
```

相关 Pom 条目：（spring-version = 3.1.1.RELEASE）

```
 <dependency>
        <groupId>net.sf.ehcache</groupId>
        <artifactId>ehcache-core</artifactId>
        <version>2.5.1</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-context-support</artifactId>
        <version>${spring.version}</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-context</artifactId>
        <version>${spring.version}</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-core</artifactId>
        <version>${spring.version}</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-test</artifactId>
        <version>${spring.version}</version>
    </dependency> 
```

当我运行测试时，Spring 会发出一些调试消息，看起来我的缓存已初始化且没有错误

```
DEBUG: config.ConfigurationHelper - No CacheManagerEventListenerFactory class specified. Skipping...
DEBUG: ehcache.Cache - No BootstrapCacheLoaderFactory class specified. Skipping...
DEBUG: ehcache.Cache - CacheWriter factory not configured. Skipping...
DEBUG: config.ConfigurationHelper - No CacheExceptionHandlerFactory class specified. Skipping...
DEBUG: store.MemoryStore - Initialized net.sf.ehcache.store.MemoryStore for cache
DEBUG: disk.DiskStorageFactory - Failed to delete file cache.data
DEBUG: disk.DiskStorageFactory - Failed to delete file cache.index
DEBUG: disk.DiskStorageFactory - Matching data file missing (or empty) for index file. Deleting index file /var/folders/qg/xwdvsg6x3mx_z_rcfvq7lc0m0000gn/T/cache.index
DEBUG: disk.DiskStorageFactory - Failed to delete file cache.index
DEBUG: ehcache.Cache - Initialised cache: cache
DEBUG: config.ConfigurationHelper - CacheDecoratorFactory not configured. Skipping for 'cache'.
DEBUG: config.ConfigurationHelper - CacheDecoratorFactory not configured for defaultCache. Skipping for 'cache'. 
```

但是调试输出显示在对 someMethod 的方法调用和每次从 someMethod 内部打印的 print 语句之间没有缓存检查。

有什么我想念的吗？

* * *

## 回答 #1

> 赞同：82
> 
> 时间：2012-04-27T08:20:41.090

来自[http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/cache.html](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/cache.html)

> 在代理模式下（默认），只有通过代理传入的外部方法调用会被拦截。这意味着自调用，实际上**是目标对象中的一个方法调用目标对象的另一个方法，**即使被调用的方法被标记为@Cacheable ，**也不会在运行时导致实际的缓存**——考虑使用aspectj模式这个案例。

和

> 方法可见性和`@Cacheable`//`@CachePut``@CacheEvict`
> 
> 使用代理时，您应该仅将`@Cache`注释应用于具有**公共可见性**的方法。

1.  `someMethod`您在同一个目标对象中自我调用。
2.  你的`@Cacheable`方法是不公开的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-27T08:08:42.653

您需要定义一个与您在注释中引用的名称匹配的缓存（“testmethod”）。在您的 ehcache.xml 中也为该缓存创建一个条目。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-12-04T14:48:38.033

除了 Lee Chee Kiam：这是我针对小项目的解决方案，仅在边际使用绕过（未注释）方法调用。**DAO 只是作为代理注入到自身中，并使用该代理而不是简单的方法调用来调用它自己的方法。**所以@Cacheable 被认为是不做复杂的仪器。

强烈建议使用代码内文档，因为它对同事来说可能看起来很奇怪。但它易于测试、简单、快速实现，并且为我省去了成熟的 AspectJ 工具。然而，对于更重的使用，我也会像 Lee Chee Kiam 一样建议 AspectJ 解决方案。

```
@Service
@Scope(proxyMode = ScopedProxyMode.TARGET_CLASS)
class PersonDao {

    private final PersonDao _personDao;

    @Autowired
    public PersonDao(PersonDao personDao) {
        _personDao = personDao;
    }

    @Cacheable(value = "defaultCache", key = "#id")
    public Person findPerson(int id) {
        return getSession().getPerson(id);
    }

    public List<Person> findPersons(int[] ids) {
        List<Person> list = new ArrayList<Person>();
        for (int id : ids) {
            list.add(_personDao.findPerson(id));
        }
        return list;
    }
} 
```

# actionscript-3 - 创建您自己的 ADDED_TO_STAGE 事件

> ID：10343886
> 
> 赞同：0
> 
> 时间：2012-04-27T02:07:34.673
> 
> 标签：actionscript-3, events

是否可以创建自己的 ADDED_TO_STAGE 事件？

我正在尝试将一些参数传递给它的处理程序......

它会是这样的：

addEventListener(Event.ADDED_TO_STAGE, arg1, arg2, init)

有什么解决方法吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T03:45:52.693

访问[此链接](https://stackoverflow.com/questions/6406957/how-to-pass-arguments-into-event-listener-function-in-flex-actionscript/6407128#6407128)将对此提供深入的答案，但这里有一个快速而肮脏的快照：

> 监听器调用的函数只能有一个参数，即触发它的事件。

您将需要从侦听器函数中调用另一个函数，或者创建一个自定义事件来保存您要解析的属性。推荐使用后者，但您可以通过以下方式实现前者：

```
function init(e:Event):void
{
    removeEventListener(Event.ADDED_TO_STAGE, init);

    finalize(arg1, arg2);
}

function finalize(a:*, b:*):void
{
    trace(a, b);
} 
```

# sql - SQL字符串比较

> ID：10343888
> 
> 赞同：0
> 
> 时间：2012-04-27T02:07:46.860
> 
> 标签：sql

这些是我的表的列：

```
contact_id, contact_number 
```

我有一个号码要在该表中搜索`contactInfo`。

我的表中有此类条目

```
contact_id    contact_number
1             1234567890
2             2345678901 
```

并且`numberToSearch`可以是任何这样的格式`+911234567890`或简单地`1234567890`

我正在使用这个查询

```
Select * from contactInfo where contact_number like numberToSearch; 
```

当两者`contact_number`和相同时，此查询可以正常工作`numberToSearch`。但是当`numberToSearch`大于时`contact_number`它找不到数字。

请建议我该怎么做才能匹配这种模式？的最后一位`numberToFind`必须与 匹配`contact_number`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T02:11:54.240

由于`numberToSearch`是包含联系电话作为子字符串的数字的*更长*版本，我认为您希望您的搜索条件是相反的：

```
Select * from contactInfo where numberToSearch like '%'+contact_number+'%'; 
```

此 SQL Server 版本。在 Oracle 或 MySQL 中使用`CONCAT('%', contact_number, '%')`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T04:04:09.773

您必须搜索数字中的数字才能搜索字符串，然后您必须编写如下查询

```
Select * from contactInfo where contact_number like '%numberToSearch%'; 
```

# device - 如何使用 DMA 从 linux 设备驱动程序写入硬盘驱动器

> ID：10343889
> 
> 赞同：1
> 
> 时间：2012-04-27T02:08:28.597
> 
> 标签：device, device-driver, linux-device-driver, hard-drive, dma

我可以将数据块从应用程序传输到设备驱动程序，但无法使用 DMA 将设备驱动程序的接口写入实际硬盘驱动器。是否有任何示例代码或指针？非常感谢您的帮助，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T02:26:09.080

如果你还没有看过它，[这](http://lwn.net/images/pdf/LDD3/ch15.pdf)是非常有用的。[这](http://lwn.net/Kernel/LDD3/)是其中的一部分。

# glassfish - GlassFish：如何设置 Access-Control-Allow-Origin 标头

> ID：10343892
> 
> 赞同：5
> 
> 时间：2012-04-27T02:09:06.753
> 
> 标签：glassfish, java-ee-6, glassfish-3

我正在使用最新版本的 GlassFish。我想设置 Access-Control-Allow-Origin 标头作为响应，以便可以从任何域调用我在 GlassFish 上托管的 API。但我不知道在哪里设置它。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-29T13:01:03.250

就我而言，API 请求由 Jersey 专门处理，因此我可以在以下位置设置响应标头`ContainerResponseFilter`：

```
package my.app;

import com.sun.jersey.spi.container.ContainerRequest;
import com.sun.jersey.spi.container.ContainerResponse;
import com.sun.jersey.spi.container.ContainerResponseFilter;

public class CrossOriginResourceSharingFilter implements ContainerResponseFilter {

    @Override
    public ContainerResponse filter(ContainerRequest creq, ContainerResponse cresp) {

        cresp.getHttpHeaders().putSingle("Access-Control-Allow-Origin", "*");
        cresp.getHttpHeaders().putSingle("Access-Control-Allow-Credentials", "true");
        cresp.getHttpHeaders().putSingle("Access-Control-Allow-Methods", "GET, POST, DELETE, PUT");
        cresp.getHttpHeaders().putSingle("Access-Control-Allow-Headers", "Content-Type, Accept");

        return cresp;
    }
} 
```

过滤器在 web.xml 中启用：

```
<servlet>
    <servlet-name>Gateway Servlet</servlet-name>
    <servlet-class>com.sun.jersey.spi.container.servlet.ServletContainer</servlet-class>
    <init-param>
        <param-name>com.sun.jersey.spi.container.ContainerResponseFilters</param-name>
        <param-value>my.app.CrossOriginResourceSharingFilter</param-value>
    </init-param>
    <load-on-startup>1</load-on-startup>
</servlet> 
```

如果你不使用 Jersey，我想你可以创建一个类似的 servlet 响应过滤器。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2016-11-21T02:48:44.230

最好和最简单的方法是右键单击项目

[![在项目中新建](../Images/ad9125f5a4463296aeeec0a07999808c.png)](https://i.stack.imgur.com/b0S6Y.png)

并选择*跨域资源共享过滤器*

[![创建新的跨域过滤器](../Images/80935e9a14fae7be76432d502ffa1251.png)](https://i.stack.imgur.com/OfMgO.png)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-05-29T15:38:58.490

这是执行此操作的 Java EE 标准方法。除了使用的库包 (javax) 和获取标头的方法调用不同 (getHeaders) 之外，它几乎与 Jersey 示例完全相同。

```
import java.io.IOException;
import javax.ws.rs.container.ContainerRequestContext;
import javax.ws.rs.container.ContainerResponseContext;
import javax.ws.rs.container.ContainerResponseFilter;
import javax.ws.rs.ext.Provider;

@Provider
public class RestResponseFilter implements ContainerResponseFilter{

@Override
    public void filter(ContainerRequestContext requestContext, ContainerResponseContext responseContext) throws IOException{
        responseContext.getHeaders().putSingle("Access-Control-Allow-Origin", "*");
        responseContext.getHeaders().putSingle("Access-Control-Allow-Credentials", "true");
        responseContext.getHeaders().putSingle("Access-Control-Allow-Methods", "GET, POST, DELETE, PUT");
        responseContext.getHeaders().putSingle("Access-Control-Allow-Headers", "Content-Type, Accept");
    }

} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-07-31T07:04:35.073

由于您使用标签 java-ee-6，我相信 @Provider 不受支持。我使用了以下代码，基于[javaee6 教程](https://docs.oracle.com/javaee/6/tutorial/doc/bnagb.html)：

```
import java.io.IOException;
import java.util.logging.Logger;
import javax.servlet.Filter;
import javax.servlet.FilterChain;
import javax.servlet.FilterConfig;
import javax.servlet.ServletException;
import javax.servlet.ServletRequest;
import javax.servlet.ServletResponse;
import javax.servlet.annotation.WebFilter;
import javax.servlet.http.HttpServletResponse;

@WebFilter(filterName = "AddHeaderFilter", urlPatterns = {"/*"})
public class ResponseFilter implements Filter {

  private final static Logger log = Logger.getLogger(ResponseFilter.class.getName() );

  @Override
  public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain) throws IOException, ServletException {
    if (response instanceof HttpServletResponse) {
      log.info("Adding headers");
      HttpServletResponse http = (HttpServletResponse) response;
      http.addHeader("Access-Control-Allow-Origin", "*");
      http.addHeader("Access-Control-Allow-Credentials", "true");
      http.addHeader("Access-Control-Allow-Methods", "GET, POST, DELETE, PUT");
    } 
    chain.doFilter(request, response);
} 
```

# python - Python libsvm：TypeError：__init__（）得到了一个意外的关键字参数'kernel_type'

> ID：10343893
> 
> 赞同：0
> 
> 时间：2012-04-27T02:09:24.800
> 
> 标签：python, typeerror, libsvm

我试图执行[https://stackoverflow.com/a/4215056](https://stackoverflow.com/a/4215056)中给出的 libsvm 示例，但我收到标题中提到的错误 TypeError。

```
from svm import *
prob = svm_problem([1,-1],[[1,0,1],[-1,0,-1]])
param = svm_parameter(kernel_type = LINEAR, C = 1)
## training  the model
m = svm_model(prob, param)
#testing the model
m.predict([1, 1, 1])

Error:
    param = svm_parameter(kernel_type = LINEAR, C = 1)
TypeError: __init__() got an unexpected keyword argument 'kernel_type' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T19:11:37.177

我在 libsvm-3.12 上遇到了这个问题（我假设你的问题是由类似的东西引起的）。查看 libsvm-3.12/python 文件夹中 svm.py 模块中的方法“svm_parameter”，该方法期望参数作为选项字符串传递，例如“-t 2 -v 5 -c 1”。

我发现这样做更好：

```
from svmutil import *
# Specify training set
prob = svm_problem([1,-1],[[1,0,1],[-1,0,-1]])
# Train the model
m = svm_train(prob, '-t 0 -c 1')
# Make a prediction
predicted_labels, _, _ = svm_predict([-1],[[1,1,1]],m)
# Predicted label for input [1,1,1] is predicted_labels[0]
print "Predicted value: " + str(predicted_labels[0]) 
```

一点解释： svm_predict(y,x,m) 除了模型 m 之外，还需要一个“正确标签”列表 y 和一个输入数据列表 x。然后，predicted_labels 将是 x 中给定的每个输入的预测类列表。这允许用户在一行中请求多个预测。

用户提供正确的标签以返回准确性信息。如果用户不知道正确的标签，那么只需将任意标签放在那里并忽略准确度值。查看 libsvm-3.12/python/svmutil.py 中的源代码，了解有关 svm_predict 在其他“_”位置返回的内容的更多信息。

特别是，从 'svmutil.py' 中获取的 svm_train 选项是：

```
"""
...
'options':
    -s svm_type : set type of SVM (default 0)
        0 -- C-SVC
        1 -- nu-SVC
        2 -- one-class SVM
        3 -- epsilon-SVR
        4 -- nu-SVR
    -t kernel_type : set type of kernel function (default 2)
        0 -- linear: u'*v
        1 -- polynomial: (gamma*u'*v + coef0)^degree
        2 -- radial basis function: exp(-gamma*|u-v|^2)
        3 -- sigmoid: tanh(gamma*u'*v + coef0)
        4 -- precomputed kernel (kernel values in training_set_file)
    -d degree : set degree in kernel function (default 3)
    -g gamma : set gamma in kernel function (default 1/num_features)
    -r coef0 : set coef0 in kernel function (default 0)
    -c cost : set the parameter C of C-SVC, epsilon-SVR, and nu-SVR (default 1)
    -n nu : set the parameter nu of nu-SVC, one-class SVM, and nu-SVR (default 0.5)
    -p epsilon : set the epsilon in loss function of epsilon-SVR (default 0.1)
    -m cachesize : set cache memory size in MB (default 100)
    -e epsilon : set tolerance of termination criterion (default 0.001)
    -h shrinking : whether to use the shrinking heuristics, 0 or 1 (default 1)
    -b probability_estimates : whether to train a SVC or SVR model for probability estimates, 0 or 1 (default 0)
    -wi weight : set the parameter C of class i to weight*C, for C-SVC (default 1)
    -v n: n-fold cross validation mode
    -q : quiet mode (no outputs)
""" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T23:52:14.407

上面的代码不适用于 libsvm 版本 3.16（最新版本）。请改用以下代码。但是，在开始之前，请确保您的项目工作文件夹中有这些文件 - “libsvm.dll”、“svm.py”和“svmutil.py”。例如：c:\my project\python_libsvm_exercise。

```
from svmutil import *
m = svm_train([1,-1],[[1,0,1],[-1,0,-1]], '-t 0 -c 10')
p_labels, p_acc, p_vals = svm_predict([1,-1],[[1,0,1],[-1,0,-1]], m) 
```

请务必阅读“README”文件。它有大量关于如何使用每个功能的示例。你可以在这里下载最新版本的 libsvm [http://goo.gl/YtCU](http://goo.gl/YtCU)

# c++ - 经典 ASP 和 ITaskScheduler 访问被拒绝错误

> ID：10343899
> 
> 赞同：1
> 
> 时间：2012-04-27T02:10:05.987
> 
> 标签：c++, com, asp-classic, scheduled-tasks, impersonation

我开发了一个 COM+ 服务器组件 (dll)，它使用 ITaskScheduler 和 ITask 接口为我工作的公司创建的特定 .exe 创建和编辑任务。该组件是从经典的 ASP 页面 (VBScript) 调用的，是我们正在开发的办公包的一部分。整个系统使用网络界面。在 Windows Server 2003/2008 上的 IIS 下运行时，尝试调用 ITaskScheduler->Enum 时出现 0x80070005 access denied 错误。这很有意义，IUsr_... 帐户不应该有权访问任务调度程序。我为用户添加了在网页上输入凭据的字段，然后在 COM 对象中调用 LogonUser 和 ImpersonateLoggedOnUser。但是我仍然收到拒绝访问错误。后续调用 IServerSecurity-> QueryBlanket 显示 COM 对象仍在 IUsr_... 帐户下运行。我的登录逻辑如下：

```
bool SystemUser::LogonUser(const wchar_t* userName, const wchar_t* domain, const wchar_t* password)
{
    if(::LogonUser(userName, domain, password, LOGON32_LOGON_NETWORK, LOGON32_PROVIDER_DEFAULT, &_token))
    {
        return true;
    }
    System::LogSystemError(__W_FILE__, __W_FUNCTION__, __LINE__, L"Unable to logon user: %s domain: %s", userName, domain);
    return false;
}

bool SystemUser::Impersonate()
{
    if(::ImpersonateLoggedOnUser(_token))
    {
        return true;
    }
    System::LogSystemError(__W_FILE__, __W_FUNCTION__, __LINE__, L"Unable to impersonate user");
    return false;
}

SuccessCode::Enum SystemUser::Logon(const wchar_t* userName, const wchar_t* domain, const wchar_t* password)
{
    if(!_token)
    {
        if(!LogonUser(userName, domain, password) || !Impersonate())
        {
            return SuccessCode::ImpersonateError;
        }
        else
        {
            Global::systemLog.Write(LogLevel::Information, L"Successfully logged on as user: '%s' domain: '%s'", userName, domain);
        }
    }
    return SuccessCode::Success;
} 
```

使用 LOGON32_LOGON_INTERACTIVE 作为登录类型没有区别。在 COM+ MMC 中设置特定角色也不行。非常感谢任何帮助或建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T18:37:22.993

解决方案是将登录和模拟逻辑移动到单独的 COM 对象。这需要在 ASP 中创建一个实例，并在创建任务调度对象的实例并调用它的代码之前调用登录代码。这样，模拟逻辑就应用于 ASP。IE。现在可以看到 ASP 在模拟帐户下运行。

# python - 通过 HTTP 将 Python 脚本中的嵌套字典或列表发送到 Rails 应用程序

> ID：10343903
> 
> 赞同：0
> 
> 时间：2012-04-27T02:10:41.200
> 
> 标签：python, ruby-on-rails, json, http

我需要通过 HTTP 将 Python 脚本中的嵌套列表或字典发送到 Ruby on Rails 3 应用程序。理想情况下，我希望能够仅通过`params[]`在控制器中使用 Rails 来检索对象。

我对这一切都很陌生。你能告诉我怎么做吗？我读过将嵌套列表或字典格式化为 JSON 可能是最好的方法，但我不知道如何通过 HTTP 发送 JSON 数据，更不用说使用 Rails 轻松访问发送的数据了`params[]`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T02:17:15.937

这取决于你提出什么样的要求。如果您执行 get 请求，那么格式如下的简单字符串将起作用：

```
example.com/controller/action?param1=value&param2=other%20value 
```

在 Rails 中，这将设置`params[:param1]='value'`params[:param2]='other value'`。

如果您想发送 json，只需将其作为内容类型为“text/json”的 HTTP 帖子发送，并确保您发布的 url 以 结尾`.json`，如下所示：

```
example.com/controller/action.json 
```

这将使用与您的 json 相同的键和值设置参数哈希。

# cocoa-touch - 来自地址的 CLRegion

> ID：10343905
> 
> 赞同：0
> 
> 时间：2012-04-27T02:10:47.993
> 
> 标签：cocoa-touch, core-location, cllocationmanager

有没有办法从地址获取 CLRegion ？我想使用 startMonitoringForRegion:desiredAccuracy: 来监控何时输入地址。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T23:38:20.633

不是直接的。[使用前向地理编码](https://stackoverflow.com/q/1140404/154803)将街道地址转换为纬度/经度，这将为您提供 CLRegion 中心点。然后你需要选择一个半径，你可以使用[initCircularRegionWithCenter:radius:identifier 创建区域：](http://developer.apple.com/library/ios/documentation/CoreLocation/Reference/CLRegion_class/Reference/Reference.html#//apple_ref/occ/instm/CLRegion/initCircularRegionWithCenter:radius:identifier:)

# php - 带格式的Mysql字符串输入

> ID：10343907
> 
> 赞同：1
> 
> 时间：2012-04-27T02:11:08.173
> 
> 标签：php, mysql, command-line, formatting, phpmyadmin

我是 MySQL 的初学者，我在表格中单元格的正确格式方面遇到了一些麻烦。

我将数据类型设置为，`TEXT`因此单元格内有足够的空间容纳几个小段落，但是我的问题是，如何使用我插入该单元格的撇号、引号、冒号和其他标点符号来格式化段落命令行（MAC）？

这就是列值：

```
joke TEXT NOT NULL, 
```

我想将此示例笑话插入表中：

```
Husband says: "When I'm gone you'll never find another man like me".
Wife replied: "What makes you think I'd want another man like you!" 
```

如何将其写入命令行，以便显示确切的格式或至少显示接近的格式。我的命令行条目如下所示：

```
INSERT INTO jokes
(date_submitted, source, joke_style, joke)
VALUES
(NOW(), 'www.example.com','Blonde', 'Joke would go here with (: ' ,) and so on.'); 
```

我是否用 来逃避撇号`\'`？我该如何处理其余的标点符号，以及如何存储换行符？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T02:12:29.890

使用[`mysql_real_escape_string()`](http://php.net/mysql_real_escape_string)或切换到[PDO](http://php.net/pdo)并[`PDO::prepare()`](http://php.net/pdo.prepare)与占位符一起使用。

例子：

```
$sth = $pdo->prepare('INSERT INTO jokes ... VALUES (NOW, :joke, ...)');
$sth->execute(array(':joke' => $joke)); 
```

如果需要手动编写命令，应转义`'`为`\'`，换行符为`\n`. 有关如何在 MySQL 中转义字符串的更多详细信息，请参阅有关[字符串文字](http://dev.mysql.com/doc/refman/5.0/en/string-literals.html)的手册部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T02:22:05.320

[这是手册](http://dev.mysql.com/doc/refman/5.0/en/string-literals.html)的摘录

以下 SELECT 语句演示了引用和转义的工作方式：

```
mysql> SELECT 'hello', '"hello"', '""hello""', 'hel''lo', '\'hello';
+-------+---------+-----------+--------+--------+
| hello | "hello" | ""hello"" | hel'lo | 'hello |
+-------+---------+-----------+--------+--------+

mysql> SELECT "hello", "'hello'", "''hello''", "hel""lo", "\"hello";
+-------+---------+-----------+--------+--------+
| hello | 'hello' | ''hello'' | hel"lo | "hello |
+-------+---------+-----------+--------+--------+

mysql> SELECT 'This\nIs\nFour\nLines';
+--------------------+
| This
Is
Four
Lines |
+--------------------+

mysql> SELECT 'disappearing\ backslash';
+------------------------+
| disappearing backslash |
+------------------------+ 
```

# javascript - 如何从字符串创建 Web Worker

> ID：10343913
> 
> 赞同：94
> 
> 时间：2012-04-27T02:12:00.410
> 
> 标签：javascript, web-worker, data-uri

如何使用从字符串（通过 POST 请求提供）创建 Web 工作者？

我能想到的一种方法，但我不确定如何实现它，是通过从服务器响应创建一个 data-URI，并将其传递给 Worker 构造函数，但我听说有些浏览器不允许这是因为相同的原产地政策。

[MDN 声明了有关数据 URI 的原始策略的不确定性](https://developer.mozilla.org/En/Using_web_workers)：

> 注意：作为 Worker 构造函数参数传递的 URI 必须遵守同源策略。目前，浏览器供应商对于数据 URI 是否同源存在分歧；Gecko 10.0 (Firefox 10.0 / Thunderbird 10.0) 及更高版本允许数据 URI 作为工作人员的有效脚本。其他浏览器可能不同意。

这里还有一篇[在 whatwg 上讨论它的帖子](http://lists.whatwg.org/pipermail/whatwg-whatwg.org/2011-March/030878.html)。

* * *

## 回答 #1

> 赞同：158
> 
> 时间：2012-04-29T12:53:13.127

> ### 概括
> 
> *   `blob:`适用于 Chrome 8+、Firefox 6+、Safari 6.0+、Opera 15+
> *   `data:application/javascript`歌剧 10.60 - 12
> *   `eval`否则（IE 10+）

[`URL.createObjectURL(<Blob blob>)`](https://developer.mozilla.org/en/DOM/window.URL.createObjectURL)可用于从字符串创建 Web 工作者。^(可以使用已弃用)[`BlobBuilder`](https://developer.mozilla.org/en/DOM/BlobBuilder)的API或[构造函数](https://developer.mozilla.org/en/DOM/Blob#Blob_constructor_example_usage)来创建 blob 。^([`Blob`](https://developer.mozilla.org/en/DOM/Blob#Blob_constructor_example_usage))

演示：http: [//jsfiddle.net/uqcFM/49/](http://jsfiddle.net/uqcFM/49/)

```
// URL.createObjectURL
window.URL = window.URL || window.webkitURL;

// "Server response", used in all examples
var response = "self.onmessage=function(e){postMessage('Worker: '+e.data);}";

var blob;
try {
    blob = new Blob([response], {type: 'application/javascript'});
} catch (e) { // Backwards-compatibility
    window.BlobBuilder = window.BlobBuilder || window.WebKitBlobBuilder || window.MozBlobBuilder;
    blob = new BlobBuilder();
    blob.append(response);
    blob = blob.getBlob();
}
var worker = new Worker(URL.createObjectURL(blob));

// Test, used in all examples:
worker.onmessage = function(e) {
    alert('Response: ' + e.data);
};
worker.postMessage('Test'); 
```

## 兼容性

以下浏览器^([源代码](https://developer.mozilla.org/En/Using_web_workers#Browser_compatibility))支持 Web Worker ：

*   铬 3
*   火狐 3.5
*   IE 10
*   歌剧 10.60
*   野生动物园 4

这个方法的支持是基于`Blob`API和`URL.createObjectUrl`方法的支持。[`Blob`兼容性](https://developer.mozilla.org/en/DOM/BlobBuilder#Browser_compatibility)：

*   Chrome 8+ ( `WebKitBlobBuilder`), 20+ (`Blob`构造函数)
*   Firefox 6+ ( `MozBlobBuilder`), 13+ (`Blob`构造函数)
*   Safari 6+（`Blob`构造函数）

IE10 支持`MSBlobBuilder`和`URL.createObjectURL`. 但是，尝试从`blob:`-URL 创建 Web Worker 会引发 SecurityError。

Opera 12 不支持`URL`API。`URL`由于. _ [_`browser.js`](http://my.opera.com/community/forums/topic.dml?id=1589432&t=1367917090&page=1#comment13564572)

## 后备 1：数据 URI

Opera 支持 data-URIs 作为`Worker`构造函数的参数。注意：不要忘记[转义特殊字符](https://stackoverflow.com/a/9239272/938089?convert-html-to-datatext-html-link-using-javascript)（例如`#`和`%`）。

```
// response as defined in the first example
var worker = new Worker('data:application/javascript,' +
                        encodeURIComponent(response) );
// ... Test as defined in the first example 
```

演示：http: [//jsfiddle.net/uqcFM/37/](http://jsfiddle.net/uqcFM/37/)

## 后备 2：评估

`eval`可用作 Safari (<6) 和 IE 10 的后备。

```
// Worker-helper.js
self.onmessage = function(e) {
    self.onmessage = null; // Clean-up
    eval(e.data);
};
// Usage:
var worker = new Worker('Worker-helper.js');
// `response` as defined in the first example
worker.postMessage(response);
// .. Test as defined in the first example 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2016-05-11T07:36:33.217

我同意当前接受的答案，但通常编辑和管理工作人员代码会很忙，因为它是以字符串的形式出现的。

因此，我们可以选择使用下面的方法，我们可以将 worker 保留为函数，然后转换为 string->blob：

```
// function to be your worker
function workerFunction() {
    var self = this;
    self.onmessage = function(e) {
        console.log('Received input: ', e.data); // message received from main thread
        self.postMessage("Response back to main thread");
    }
}

///////////////////////////////

var dataObj = '(' + workerFunction + ')();'; // here is the trick to convert the above fucntion to string
var blob = new Blob([dataObj.replace('"use strict";', '')]); // firefox adds "use strict"; to any function which might block worker execution so knock it off

var blobURL = (window.URL ? URL : webkitURL).createObjectURL(blob, {
    type: 'application/javascript; charset=utf-8'
});

var worker = new Worker(blobURL); // spawn new worker

worker.onmessage = function(e) {
    console.log('Worker said: ', e.data); // message received from worker
};
worker.postMessage("some input to worker"); // Send data to our worker. 
```

这是在 IE11+ 和 FF 和 Chrome 中测试的

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2020-05-05T19:20:05.973

由于支持向后兼容性，接受的答案有点复杂，所以我想发布相同的内容但简化了。在您的（现代）浏览器控制台中尝试此操作：

```
const code = "console.log('Hello from web worker!')"
const blob = new Blob([code], {type: 'application/javascript'})
const worker = new Worker(URL.createObjectURL(blob))
// See the output in your console.
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-02-11T16:40:15.847

我已经根据您的大部分想法采取了一种方法，并添加了一些我的想法。我的代码在worker上唯一需要的是使用'this'来引用'self'范围。我很确定这是非常可改进的：

```
// Sample code
var code = function() {
    this.onmessage = function(e) {
        this.postMessage('Worker: '+e.data);
        this.postMessage('Worker2: '+e.data);
    };
};

// New thread worker code
FakeWorkerCode = function(code, worker) {
    code.call(this);
    this.worker = worker;
}
FakeWorkerCode.prototype.postMessage = function(e) {
    this.worker.onmessage({data: e});
}
// Main thread worker side
FakeWorker = function(code) {
    this.code = new FakeWorkerCode(code, this);
}
FakeWorker.prototype.postMessage = function(e) {
    this.code.onmessage({data: e});
}

// Utilities for generating workers
Utils = {
    stringifyFunction: function(func) {
        // Stringify the code
        return '(' + func + ').call(self);';
    },
    generateWorker: function(code) {
        // URL.createObjectURL
        windowURL = window.URL || window.webkitURL;   
        var blob, worker;
        var stringified = Utils.stringifyFunction(code);
        try {
            blob = new Blob([stringified], {type: 'application/javascript'});
        } catch (e) { // Backwards-compatibility
            window.BlobBuilder = window.BlobBuilder || window.WebKitBlobBuilder || window.MozBlobBuilder;
            blob = new BlobBuilder();
            blob.append(stringified);
            blob = blob.getBlob();
        }

        if ("Worker" in window) {
            worker = new Worker(windowURL.createObjectURL(blob));
        } else {
            worker = new FakeWorker(code);
        }
        return worker;
    }
};

// Generate worker
var worker = Utils.generateWorker(code);
// Test, used in all examples:
worker.onmessage = function(e) {
    alert('Response: ' + e.data);
};
function runWorker() {
    worker.postMessage('working fine');
} 
```

演示：http: [//jsfiddle.net/8N6aR/](http://jsfiddle.net/8N6aR/)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-06-18T23:15:34.940

很好的答案 - 我今天在尝试创建具有后备功能的 Web Workers 不可用时（即在主线程中运行工作脚本）时一直在解决类似的问题。由于此线程与该主题有关，我想我会在这里提供我的解决方案：

```
 <script type="javascript/worker">
        //WORKER FUNCTIONS
        self.onmessage = function(event) {
            postMessage('Hello, ' + event.data.name + '!');
        }
    </script>

    <script type="text/javascript">

        function inlineWorker(parts, params, callback) {

            var URL = (window.URL || window.webkitURL);

            if (!URL && window.Worker) {

                var worker = new window.Worker(URL.createObjectURL(new Blob([parts], { "type" : "text/javascript" })));

                worker.onmessage = function(event) {
                  callback(event.data);
                };

                worker.postMessage(params);

            } else {

                var postMessage = function(result) {
                  callback(result);
                };

                var self = {}; //'self' in scope of inlineWorker. 
                eval(parts); //Converts self.onmessage function string to function on self via nearest scope (previous line) - please email chrisgwgreen.site@gmail.com if this could be tidier.
                self.onmessage({ 
                    data: params 
                });
            }
        }

        inlineWorker(
            document.querySelector('[type="javascript/worker"]').textContent, 
            {
                name: 'Chaps!!'
            },
            function(result) {
                document.body.innerHTML = result;
            }
        );

    </script>
</body> 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-10-29T05:44:07.547

根据您的用例，您可以使用类似的东西

> **[task.js](https://github.com/icodeforlove/task.js)**用于让 CPU 密集型代码在所有内核（node.js 和 web）上运行的简化接口

一个例子是

```
// turn blocking pure function into a worker task
const functionFromPostRequest = task.wrap('function (exampleArgument) {}');

// run task on a autoscaling worker pool
functionFromPostRequest('exampleArgumentValue').then(result => {
    // do something with result
}); 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-03-19T11:24:50.913

扩展@Chanu_Sukarno 的代码，您可以简单地将工作函数（或字符串）传递给该函数，它将在网络工作人员中执行：

```
async function doWorkerTask(workerFunction, input, buffers) {
  // Create worker
  let fnString = '(' + workerFunction.toString().replace('"use strict";', '') + ')();';
  let workerBlob = new Blob([fnString]);
  let workerBlobURL = window.URL.createObjectURL(workerBlob, { type: 'application/javascript; charset=utf-8' });
  let worker = new Worker(workerBlobURL);

  // Run worker
  return await new Promise(function(resolve, reject) {
    worker.onmessage = function(e) { resolve(e.data); };
    worker.postMessage(input, buffers);
  });
} 
```

以下是如何使用它的示例：

```
function myTask() {
  self.onmessage = function(e) {
    // do stuff with `e.data`, then:
    self.postMessage("my response");
    self.close();
  }
}
let output = await doWorkerTask(myTask, input, inputBuffers);
// now you can do something with `output` (which will be equal to "my response") 
```

* * *

* * *

在**nodejs**中，`doWorkerTask`看起来像这样：

```
async function doWorkerTask(workerFunction, input, buffers) {
  let Worker = require('webworker-threads').Worker;
  let worker = new Worker(workerFunction);

  // Run worker
  return await new Promise(function(resolve, reject) {
    worker.onmessage = function(e) { resolve(e.data); };
    worker.postMessage(input, buffers);
  });
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2022-02-18T15:10:18.937

我的解决方案（可以很容易地“承诺”......）

```
 function makeWorker(workerFunction, cb) {
        // Create worker
        var tplFun = "onmessage = function(e){console.log(e);   var args = Array.prototype.slice.call(e.data); var res=___.apply(this,args);postMessage(res);}"
        var fnTxt = workerFunction.toString().replace('"use strict";', '');
        var final = tplFun.replace("___", fnTxt);
        let workerBlob = new Blob([final]);
        let workerBlobURL = window.URL.createObjectURL(workerBlob, { type: 'application/javascript; charset=utf-8' });
        let worker = new Worker(workerBlobURL);
        return function () {
            var args = Array.prototype.slice.call(arguments);
            console.log(args)
            worker.postMessage(args);
            worker.onmessage = function (e) {
                console.log(e.data);
                cb(e.data);
            }
        }
    }

    function myTask(a, b, c) {
        return a * b * c;
    }

    function onresult(e) {
        alert(e);
    }
    var fn = makeWorker(myTask, onresult)
    fn(1, 2, 3); 
```

可以很好地使用“纯和慢”功能！

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2015-03-24T00:18:37.080

您可以通过将 更改为或来从*objectURL*获取真实数据，而不仅仅是 blob 。`responseType``"text"``"arraybuffer"`

这是to到back到or*的来回转换*。`text/javascript``blob``objectURL``blob``text/javascript`

[*如果您想知道，我正在使用它来生成**没有外部文件的网络工作者，***
*您可以使用它来返回二进制内容，例如 YouTube 视频；）（来自 <video> 标签资源属性）*]

```
var blob = new Blob(['self.onmessage=function(e){postMessage(e)}'],{type: 'text/javascript'});   //->console: (object)   Blob {size: 42, type: "text/javascript", slice: function}

var obju = URL.createObjectURL(js_blob); //->console:  "blob:http%3A//stackoverflow.com/02e79c2b-025a-4293-be0f-f121dd57ccf7"

var xhr = new XMLHttpRequest();
xhr.open('GET', 'blob:http%3A//stackoverflow.com/02e79c2b-025a-4293-be0f-f121dd57ccf7', true);
xhr.responseType = 'text'; /* or "blob" */
xhr.onreadystatechange = function(){
  if(xhr.DONE !== xhr.readyState) return;

  console.log(xhr.response);
}
xhr.send();

/*
  responseType "blob" ->console: (object)   Blob {size: 42, type: "text/javascript", slice: function}
  responseType "text" ->console: (text)     'self.onmessage=function(e){postMessage(e)}'
*/ 
```

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2015-10-18T12:00:50.307

使用我的小插件[https://github.com/zevero/worker-create](https://github.com/zevero/worker-create)

```
var worker_url = Worker.create("self.postMessage('Example post from Worker');");
var worker = new Worker(worker_url); 
```

但你也可以给它一个功能。

# objective-c - 当发送方子类具有相同的签名时，强制超类调用自己的方法

> ID：10343927
> 
> 赞同：1
> 
> 时间：2012-04-27T02:13:01.460
> 
> 标签：objective-c, inheritance, subclass

假设我有这个类及其子类

```
@interface MySuperClass
- (void)open:(id)type value:(id)value;
- (void)openWebpage:(NSURL*)url;
@end

@interface MySubClass
- (void)openWebpage:(MyBookmarkClass*)bookmark;
@end 
```

并且调用`[someMySubclass openWebpage:someBookmark]`调用`[super open:BookmarkClass value:self.url]`。并`open:value`调用`[self openWebpage:url]`。

我意识到这是非常做作的，但我遇到了类似的情况。我的困惑是，即使`[self openWebpage:url]`在被调用时`MySuperClass`，当它被执行时 openWebpage: 正在调用者的上下文中运行`MySubClass`，它不知道如何处理`NSURL`.

所以我的问题是：有没有办法强制在原始上下文中调用某些东西？或者让它尽可能多地调用 super 并找到最接近顶部的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T03:47:07.213

只有一个上下文。有一个对象。它的类是`MySubClass`.

用不同的不兼容类型覆盖方法是错误的。不要那样做。这不是具有函数重载的 C++。没有基于参数类型的调度。

约定是通过它们所作用的方法来命名方法。因此，您可能有一个名为`-openWebpageURL:`in的方法`MySuperClass`和另一个在`MySubClass`named中引入的方法`-openWebpageBookmark:`。请注意，`MySubClass`仍然会有一个名为`-openWebpageURL:`继承自的方法`MySuperClass`。

# django - 如何将对象从模板传递到django中的视图？

> ID：10343938
> 
> 赞同：1
> 
> 时间：2012-04-27T02:15:26.580
> 
> 标签：django, templates, object, view

这一定是以前问过的，但我找不到。

我已经在我的视图中检索了 my_object = get_object_or_404(MyObject, id=obj_id) 。
我将它传递给模板。
现在，当用户单击链接时，我想将相同的 my_object 传递给另一个视图。

```
<a href="/another_page/my_object.id">here</a> 
```

但随后我将不得不在第二个视图中再次通过它的 id 检索 my_object。
我可以以某种方式发送整个 my_object 吗？

我已经看到 url_pattern 有 \d+ 或 \w+ 来接收整数或字符串变量但如何传递对象的示例？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T05:56:20.887

不可以，您必须在详细视图中再次检索对象。为模型编写 get_absolute_url 并在模板中调用它。

# objective-c - NSCharacterSet 剪切字符串

> ID：10343940
> 
> 赞同：0
> 
> 时间：2012-04-27T02:15:34.427
> 
> 标签：objective-c, nscharacterset

我正在获取最新的推文并将其显示在我的应用程序中。我把它放在一个 NSMutableString 中，并在我的 xmlparser.m 文件中初始化该字符串，如下所示：

```
- (void) parser:(NSXMLParser *)parser foundCharacters:(NSString *)string
{
    currentNodeContent = (NSMutableString *) [string stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceAndNewlineCharacterSet]];
} 
```

我可以收到推文，但不知何故它会删掉一些推文并显示其中的一部分。例如推文是

> 教室里的电子游戏？社交媒体和#technology 可以改变教育[http://bit.ly/KfGViF](http://bit.ly/KfGViF) @GOVERNING #edtech

但它显示的是：

> #technology 可以改变教育[http://bit.ly/KfGViF](http://bit.ly/KfGViF) @GOVERNING #edtech

为什么你认为它是？我尝试以其他方式初始化 currentNodeContent ，但我无法解决问题。

你知道为什么会这样吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T02:29:24.367

事件驱动 (SAX) 解析器可以自由地在回调中仅返回节点的部分文本。您可能只获得了传入的推文的一部分。您可能应该在可变字符串中累积字符，直到获得指示元素结束的回调。[请参阅清单 3 和本指南](https://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/XMLParsing/Articles/HandlingElements.html)中的相关文本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T04:10:40.223

你这里有两个问题：

```
- (void) parser:(NSXMLParser *)parser foundCharacters:(NSString *)string
{
    currentNodeContent = (NSMutableString *) [string stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceAndNewlineCharacterSet]];
} 
```

简单地将 an`NSString`转换为 an`NSMutableString`是行不通的。您必须自己制作一个可变副本或`NSMutableString`使用`NSString`.

此外，文本解析器只给你字符串的最后一部分，因为它可能只是将“ `&`”解释为实体引用的一部分，或者它可能是实体引用本身。

您可能想要做的是：

1.  在开始解析之前，先进行初始化`currentNodeContent`，使其为空`NSMutableString`：

    ```
    currentNodeContent = [NSMutableString string]; 
    ```

2.  在解析时，将字符*附加*到`currentNodeContent`：

    ```
    [currentNodeContent appendString:[string stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceAndNewlineCharacterSet]]; 
    ```

# jquery - 使用 jquery 处理 z-index

> ID：10343941
> 
> 赞同：1
> 
> 时间：2012-04-27T02:15:45.987
> 
> 标签：jquery, jquery-ui, z-index, jquery-ui-draggable

我正在开发一个能够在页面上创建/添加新元素的网站。我想对页面上添加的每个元素的 z-index 进行控制。这样我就可以将一个 div 放在另一个 div 之上。

```
<div class="element ui-resizable ui-draggable" style="z-index:10000">
  <div id="controller">
    <a href="#" class="zup"> move up </a>
    <a href="#" class="zdown"> move down </a>
  </div>
  <div class="content">
    some text content her
  </div>
</div> 
```

javascript

```
$('.zup').click(function() {
  $cur_zindex = $(this).parents('.element').css('zIndex');
  $(this).parents('.element').css({ zIndex: $cur_zindex+1 })
})

$('.zdown').click(function() {
  $cur_zindex = $(this).parents('.element').css('zIndex');
  $(this).parents('.element').css({ zIndex: $cur_zindex-1 })
}) 
```

这方面的问题是当我多次单击元素的“上移”时，我还需要多次单击“下移”才能将当前元素位置放在后面。那是因为我多次单击时 z-index 上的差距。

简而言之，我希望有一种简单的方法让用户设置 z 索引，无论您单击多少“上移”，如果有人在另一个元素上单击“上移”，它将自动定位在多次单击的 zindex/向上移动的顶部

任何建议都非常受欢迎。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T20:20:26.853

所以我的方法有点不同，因为有 4 个控件（上/下/上/下）。我想不出一种方法可以将元素向上或向下移动 1 个增量或跳到堆栈的顶部或底部。我做了一个[**演示**](http://jsfiddle.net/q4Nba/3/)，您可以`z-index`在单击`+`或后看到每个元素上的`-`。可以添加更多元素来玩弄。

它可能不完全是您所追求的解决方案，但我希望它有所帮助。小提琴中的代码重复如下：

### HTML

```
<a href="#" id="add">add element</a>
<div id="elements">
    <div class="element ui-draggable">
      <div class="controller">
        <a href="#" class="top">⇈&lt;/a>
        <a href="#" class="zup">+</a>
        <a href="#" class="zdown">-</a>
        <a href="#" class="bottom">⇊&lt;/a>
      </div>
      <div class="content">lorum ipsum</div>
      <div class="zIndex"></div>
    </div>
</div>​ 
```

### CSS

```
.element {
    background-color:lightblue;
    border:1px solid darkblue;
    width:96px;
    height:96px;
    padding:2px;
    z-index:0;
}

.content {
    margin-top:4px;
}

.controller a {
    margin:0 4px;
    text-decoration:none;
}

.zIndex {
    position:absolute;
    right:0;
    bottom:0
}​ 
```

### JavaScript *（针对 jquery 1.7.2 运行）*

```
$('#add').on('click', function() {
    var $clone = $('.element:first')
                 .clone()
                 .attr('id', 'e' + $('.element').length++)
                 .draggable();

    $('#elements').append($clone);
    return false;
});

$('#elements').on('click', 'a', function() {
    var $element = $(this).closest('.element');
    var $siblings = $element.siblings();
    var zIndexes = $siblings.map(function() {
        return $(this).css('z-index');
    });

    var zIndex = parseInt($element.css('z-index'));

    switch(this.className) {
        case 'top':
            zIndex = Array.max(zIndexes) + 1;
            break;
        case 'zup':
             zIndex += 1;
            break;
        case 'zdown':
            zIndex -= 1;
            break;
        case 'bottom':
            zIndex = Array.min(zIndexes) - 1;
            break;
    }

    // workaround for negative z-index madness (simply set lowest as 0 and raise everything else by 1)
    if (zIndex === -1) {
        zIndex = 0;
        $siblings.each(function() {
            var z = parseInt($(this).css('z-index')) + 1;
            $(this).css('z-index', z);
            $(this).find('.zIndex').text(z);
        });
    }

    $element.css({zIndex:zIndex});
    $element.find('.zIndex').text(zIndex);
    return false;
});

$('.element').draggable();

Array.max = function(array) {
    return Math.max.apply(Math, array);
};

Array.min = function(array) {
    return Math.min.apply(Math, array);
}; 
```

在为此进行一些研究时，以下链接很有用[在可拖动元素上设置 z-index ，元素](https://stackoverflow.com/questions/5217311/setting-z-index-on-draggable-elements)数组[中的 jQuery min/max 属性](https://stackoverflow.com/questions/5052673/jquery-min-max-property-from-array-of-elements)，特别是（对于负面`z-index`问题）[http://bugs.jqueryui.com/ticket/ 4461](http://bugs.jqueryui.com/ticket/4461)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T02:42:26.310

这是我的想法。

```
$('.zup').click(function () {
  var max_zindex = -10000;
  $('.zup').each(function () {
    if ($(this).css('zIndex') > max_zindex) { max_zindex = $(this).css('zIndex'); }
  });

  // If we don't already have the max_zindex, then set the zindex to the max + 1
  // Notice that if the element clicked does have the max zindex, nothing happens.
  if (max_zindex != $(this).css('zIndex')) {
    $(this).css('zIndex', max_zindex + 1);
  }
});

$('.zdown').click(function () {
  var min_zindex = 10000;
  $('.zup').each(function () {
    if ($(this).css('zIndex') < min_zindex) { min_zindex = $(this).css('zIndex'); }
  });

  if (min_zindex != $(this).css('zIndex')) {
    $(this).css('zIndex', min_zindex + 1);
  }
}); 
```

# xml - XSLT - XML 到 CSV - 模板与 for-each - 删除空格

> ID：10343943
> 
> 赞同：1
> 
> 时间：2012-04-27T02:15:49.977
> 
> 标签：xml, xslt, csv

(1) 为什么 Option1 (Template) 会产生空白 (主要是 btw rec1 & 5) 而 Option2 (ForEach) 不会？
(2) 如果可能，我如何编码 Option1 以删除生成的空格？
假设：使用 XSLT v1.、用于测试的 XMLPad/Stylus、MSXML4。
处理具有多个“类型”选择标准的更大、更复杂的 XML 输入文件（元素/属性的混合），以创建多个 TSV 输出文件。许多参考资料似乎表明使用模板作为首选方法。当前，使用 match 会将过多的空白推送到消息队列中。

**XML:**

```
<main>
    <event>
        <event_type>Bike</event_type>
        <date>2012-02-05</date>
    </event>
    <event>
        <event_type>Run</event_type>
        <date>2012-02-06</date>
    </event>
    <event>
        <event_type>Swim</event_type>
        <date>2012-02-07</date>
    </event>
    <event>
        <event_type>Run</event_type>
        <date>2012-02-08</date>
    </event>
    <event>
        <event_type>Bike</event_type>
        <date>2012-02-09</date>
    </event>
</main> 
```

**XSL：**

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="text"/>
  <xsl:variable name="tab" select="'&#09;'" />

<xsl:template match="@*|text()"/>

<xsl:template match="/">
<xsl:text/>event<xsl:value-of select="$tab"/>
<xsl:text/>date<xsl:value-of select="$tab"/>
<xsl:apply-templates/>
</xsl:template>

<!-- OPTION1 -->
<xsl:template match="event[event_type='Bike']"><xsl:text>
</xsl:text>
<xsl:value-of select="event_type"/><xsl:value-of select="$tab"/>
<xsl:value-of select="date"/>
</xsl:template>

<!-- OPTION2 -->
<!--<xsl:template match="@*|node()">
<xsl:for-each select="event[event_type='Bike']"><xsl:text>
</xsl:text>
<xsl:value-of select="event_type"/><xsl:value-of select="$tab"/>
<xsl:value-of select="date"/>
</xsl:for-each>
</xsl:template>-->

</xsl:stylesheet> 
```

**输出 - Opt1 模板**（还不能发布图片，......是空白）

事件......日期......
自行车......2012-02-05............
自行车......2012-02-09。

**输出 - Opt2 ForEach**

活动...日期.....
自行车....2012-02-05
自行车....2012-02-09

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T02:34:34.793

**你想要这个**：

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output method="text"/>

    <xsl:variable name="vTab" select="'&#09;'" />
    <xsl:variable name="vNL" select="'&#10;'" />

    <xsl:template match="@*|text()"/>

    <xsl:template match="/*">
        <xsl:value-of select=
        "concat(' event', $vTab, 'date', $vTab, $vNL)"/>
        <xsl:apply-templates/>
    </xsl:template>

    <xsl:template match="event[event_type='Bike']">
      <xsl:value-of select=
        "concat(' ', event_type, $vTab, date, $vNL)"/>
    </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档时：**

```
<main>
    <event>
        <event_type>Bike</event_type>
        <date>2012-02-05</date>
    </event>
    <event>
        <event_type>Run</event_type>
        <date>2012-02-06</date>
    </event>
    <event>
        <event_type>Swim</event_type>
        <date>2012-02-07</date>
    </event>
    <event>
        <event_type>Run</event_type>
        <date>2012-02-08</date>
    </event>
    <event>
        <event_type>Bike</event_type>
        <date>2012-02-09</date>
    </event>
</main> 
```

**产生了想要的正确结果：**

```
 event  date    
 Bike   2012-02-05
 Bike   2012-02-09 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T02:46:55.000

我尝试了不同的编辑器（Architag XRay Xml 编辑器，它使用 MSXML），为了让它工作，我不得不使用 CR/LF 字符。我相信 Dimitre 的回答是正确的。这是我的修改：

```
<!-- OPTION1 -->
<xsl:template match="event[event_type='Bike']">
<xsl:text>&#13;&#10;</xsl:text>
<xsl:value-of select="event_type"/><xsl:value-of select="$tab"/>
<xsl:value-of select="date"/>
</xsl:template> 
```

# php - PHP 斜单引号 vs 直单引号

> ID：10343946
> 
> 赞同：3
> 
> 时间：2012-04-27T02:16:51.927
> 
> 标签：php

我让一个开发人员为我创建了一些代码，他在整个 SQL 语句中使用了有角度的单引号。我以前从未使用过这些，希望有人能解释成角度和直线之间的区别？

如果我用直引号替换所有有角度的查询，则查询不起作用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-27T02:18:27.867

斜引号（```，实际上称为反引号）用于分隔标识符，例如字段和表名。直引号用于分隔字符串，例如`'Hello, world!'`. 你不能把两者混在一起。

# c - C - 我使用什么选项来生成列表文件？

> ID：10343950
> 
> 赞同：6
> 
> 时间：2012-04-27T02:16:58.807
> 
> 标签：c, gcc

我是 C 编程语言和 gcc 的新手。

我正在尝试破译一个相当复杂的 C 程序。我想阅读一个有用的列表文件而不是源文件。

我正在寻找由 gcc 编译器创建的列表文件，其中包含：

1.  所有包含的源代码
2.  外部参照 = 交叉参考列表
3.  引用声明变量的位置。例如，如果该行包含`i++;`，则声明一个注释是 were `i`。

我对此进行了搜索，但是 gcc 有很多选择，我迷路了。

如果有更好的地方可以问我的问题，请告诉我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-04-11T20:00:56.863

好吧，我是老派，OP 需要的是预处理器输出，是的，它比 IDE 更有启发性。预处理器处理所有# 语句，如#include 和#ifdef。因此，它向您展示了最终成为编译器输入的内容。g++ 手册页解释了 4 个步骤：预处理、编译、汇编和链接

它继续解释说序列可以在任何时候停止。然后在“预处理器选项”下，解释了控制它的方法。正如另一篇文章所述， -E 可以解决问题，但这只是答案的一部分。要进行更精细的控制，请使用 -f 系列选项，例如 -fdirectives-only。所以可能OP想要的是：

```
 gcc  -E  -fdirectives-only  -o MySrc.lst  MySrc.cpp 
```

对于那些使用 C++ 的人，我建议直接使用 g++：

```
 g++  -E  -fdirectives-only  -o MySrc.lst  MySrc.cpp 
```

所需的列表然后在 MySrc.lst

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-27T03:23:09.930

一种不同的方法。如果你使用 ie Vim 然后在代码上运行 cscope。

例如，我将`Ctrl`+`\`作为 cscope 触发器。如果我在一个函数中：

```
01 #define SOME_BLAH 33
02 
03 void foo() {
04     printf("%d\n", SOME_BLAH); /* <- cursor on SOME_BLAH; 
05                                   trigger + G jumps to line 1 */
06 }
07 
08 void bar() {
09     foo(); /* <- Cursor on foo I hit trigger, G and I jump to line 3 */
10 } 
```

同样，您可以像这样跨文件跳转，进入包含，列出调用特定函数的函数，列出函数正在调用的函数，列出包含文件的文件，跳转到定义变量的位置等。所有这些都在几次击键之内。

每次跳转都会添加到 LIFO 堆栈中，`Ctrl``t`并将一个返回到我输入最后一个跳转到命令的位置。

* * *

另外添加 ie `Taglist`，您会在窗口的一侧获得一个列表，其中所有定义、变量、函数等都在列表中排序。

* * *

另一种选择是使用 ie 编译代码`-ggdb`并在像 Code::Blocks 之类的 IDE 中运行它，使用 DDD 或类似的 - 并在代码作为进程运行时单步执行。可以很有教育意义。

* * *

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-27T02:34:27.687

我理解你的困境。多年前，我试图完全按照你的做法去做，但最终我放弃了。尽管实际上*可以*做到这一点，但结果会将相关代码淹没在与手头问题无关的代码中，以至于毫无用处。

恐怕您将不得不学习如何以 C 方式阅读 C 代码。如果代码很复杂，并且您是初学者，那么——目前——你可能会不知所措。

如果您仍然想尝试，请查看源的几个 *.h “头”文件的名称。挑选出三四个在您看来可能解决问题的核心部分的头文件。首先阅读这些文件。从那里扩大你的阅读。这并不容易，直到你掌握了它。

祝你好运。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-27T04:49:45.437

要回答您的问题 #1，可以通过查看预处理器输出来查看所有包含的源代码`gcc -E`。但是，该代码可能更难理解，因此它可能不是您真正想要的，尽管我发现它在某些情况下对我需要做的事情很有用。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-27T02:18:54.750

你没有。您使用一个单独列出清单的程序。编译器也必须了解打印是愚蠢的。

我推荐[a2ps](http://www.gnu.org/software/a2ps/)。如需交叉参考，请查找[cxref](http://www.gedanken.org.uk/software/cxref/)。

# node.js - http.get 循环下载文件列表

> ID：10343951
> 
> 赞同：0
> 
> 时间：2012-04-27T02:17:02.213
> 
> 标签：node.js

我想让 http.get 下载图像文件列表。我有一个 for 循环来遍历列表并用代表保存位置的字符串填充变量 file_savedest。所以 http.get 在每次循环迭代时都会被调用，我如何将 file_savedest 输入 http.get 以便它知道要下载和保存的文件。

```
 var file_savedest = dir+"/"+iname;

    http.get(options, function(res){
        var imagedata = '';
        res.setEncoding('binary');

        res.on('data', function(chunk){
            imagedata += chunk
        });

        res.on('end', function(){
            fs.writeFile(file_savedest, imagedata, 'binary', function(err){
                if (err){
                    console.log(err);
                } else {
                    console.log("File:" + file_savedest + " saved");
                }
            });
        });
    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T02:21:28.007

使用[闭包](http://en.wikipedia.org/wiki/Closure_%28computer_science%29)：

```
(function(file_savedest){
    http.get(options, function(res){
        var imagedata = '';
        res.setEncoding('binary');

        res.on('data', function(chunk){
            imagedata += chunk
        });

        res.on('end', function(){
            fs.writeFile(file_savedest, imagedata, 'binary', function(err){
                if (err){
                    console.log(err);
                } else {
                    console.log("File:" + file_savedest + " saved");
                }
            });
        });
    });
}(dir+"/"+iname)); 
```

# model-view-controller - 我是否需要在 Entity Framework Code First 中为每个 poco 属性设置长度？

> ID：10343954
> 
> 赞同：2
> 
> 时间：2012-04-27T02:17:18.770
> 
> 标签：model-view-controller, entity-framework-4, code-first, nvarchar

我是否需要在 Entity Framework Code First 中为每个 poco 属性设置长度？如果我没有为属性设置 stringLength 或 maxlength/minlength ，它将是 nvarchar(max) ，nvarchar(max) 有多糟糕？我应该把它留在开发阶段，然后在生产前改进它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T18:19:52.783

您应该为要限制长度的每个属性定义一个最大长度。请注意，`nvarchar(max)`数据类型与数据类型不同`nvarchar(n)`，其中`n`是 1-4000 之间的数字。`max`当您没有定义最大长度时获得的版本适用于*大块*文本，例如段落等。它可以处理非常大的长度，因此数据与记录的其余字段分开存储。`nvarchar(n)`另一方面，与其余行内联存储。

最好现在就根据需要设置这些值，而不是等到以后再设置。选择尽可能大的值，这样您就不必增加它们。`nvarchar(n)`有效地存储其信息；例如，a`nvarchar(200)`不一定占用 200 个字符的空间；它只使用足够的空间来存储实际放入其中的内容，再加上几个额外的字节来节省其长度。

因此，只要有可能，您应该对实体的文本字段设置限制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T02:26:19.860

NVARCHAR - 是可变长度字段。所以它只占用你需要的空间。另一方面，NCHAR 分配它需要的所有空间，而不是像 NVARCHAR 那样按需分配。当列数据条目的大小可能会有很大差异时，MSDN 建议使用 nvarchar。这是我在项目早期阶段要走的路。您可以在需要时对其进行调整。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-28T20:18:35.087

根据下一篇博客[文章](http://geekswithblogs.net/johnsPerfBlog/archive/2008/04/16/ntext-vs-nvarcharmax-in-sql-2005.aspx)nvarchar(max) 与 ntext 不同，直到实际值大小未达到 4000 个符号（原因限制为 8K，并且widechars 每个字符使用两个字节）。就它达到这个大小而言，它的行为与 ntext 几乎相同。所以对我来说，我没有看到任何避免使用 nvarchar(max) 数据类型的充分理由。

# javascript - JsTestDriver，测试函数的名称

> ID：10343959
> 
> 赞同：1
> 
> 时间：2012-04-27T02:18:22.283
> 
> 标签：javascript, js-test-driver

测试函数的名称有什么限制吗？

当我将以下内容编写为`testA()`and`testB()`时，它们都将被实现。

```
AjaxCreateTest = TestCase("AjaxCreateTest");  
AjaxCreateTest.prototype.testA = function(){};  
AjaxCreateTest.prototype.testb = function(){}; 
```

但是如果我将名称从“testB”更改为“AjaxCreateT”，`testA()`就会执行。太奇怪了。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-28T09:33:49.280

JsTestDriver 仅执行以前缀“test”开头的方法。这是一种命名约定，使您能够在不作为测试执行的同一对象上编写辅助方法。

还有两个保留方法名`setUp`和`tearDown`，分别在每次测试之前和之后执行。

您甚至可以在测试名称中使用空格，这使您的测试具有很好的可读性，例如：

```
TestCase("AjaxCreateTest", {
    setUp : function() {
        this.subject = new MyAjaxCode();
        this.stubXHR();
    },

    tearDown : function() {
        this.restoreXHR();
    },

    stubXHR : function() {
        // stub global objects to intercept Ajax calls
    },

    restoreXHR : function() {
        // restore global state
    },

    "test should say hi" : function() {
        assertEquals("Hi", this.subject.sayHi());
    }
} 
```

在上面的例子中只有一个测试，其余的都是辅助方法。

我可以推荐[Sinon.JS](http://sinonjs.org/)来帮助您存根 Ajax 调用（请参阅“Fake XHR”）以及更多示例。

# php - 确定 PDF 文件是否可打开且未损坏

> ID：10343962
> 
> 赞同：0
> 
> 时间：2012-04-27T02:18:47.970
> 
> 标签：php, pdf

如果有人有可靠的方法来确定 PDF 文档是否实际上是 PDF 文档并且它没有损坏，我正在徘徊。

我在我的系统上生成报告，我想确定另一个系统返回的数据包含可打开的 PDF 文档（并且数据没有损坏）。

目前，我基本上是在查看字符串长度（PDF 被存储到一个变量中，而不是一个物理文件中）。在 PHP 中执行此操作的任何建议都会很棒。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T02:34:07.240

如果您只是想确保文件是 PDF 文件，而不检查它是否是完整的 pdf 文件，您可以读取文件的前 5 个字节，对于 PDF 文件，它们将完全等于字符串“%PDF-”

这就是`file`linux中的程序识别PDF文件的方式。

但是，如果您想绝对确保文件中的任何地方都没有错误，您可以运行一个处理整个文件的程序，并查看该程序是否返回成功。

在 linux 中，您可以使用 ghostscript ("gs") 将 PDF 文档呈现为任何格式。

或者您可以安装 acrobat reader，并`acroread`作为命令行程序运行以将其转换为 postscript：

```
acroread -print -toPostScript [your_file.pdf] 
```

要执行其中任何一项，您都需要使用[`system`](http://au2.php.net/manual/en/function.system.php)PHP 函数。要检查程序是否成功运行，您需要在第二个参数中传递一个变量以`system`接收返回状态。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-01-14T06:47:23.647

可以使用`pdfinfo`，`centos`安装命令：

```
yum install poppler-utils 
```

...并使用`pdfinfo`命令。PHP代码如下：

```
if(!exec("pdfinfo test.pdf")){
  echo "file is corrupted"
} 
```

# ruby-on-rails - 如何让我的 Rails 控制器通过Passenger 处理子域？

> ID：10343964
> 
> 赞同：1
> 
> 时间：2012-04-27T02:19:35.373
> 
> 标签：ruby-on-rails, apache, configuration, subdomain, passenger

所以这在开发模式下对我有用，但是当我尝试使用乘客部署我的 rails 应用程序时，我的控制器似乎没有被调用。

我已经为 www.example.com 的 API 设置了 cname 记录。另外，我使用的是 Rails 3.2 和 Ruby 1.9.3。

`routes.rb`这是我文件的相关部分。

```
# API
constraints :subdomain => 'api' do
  scope :module => 'api' do #:constraints => { :format => :json } do
    match '*skippydoo' => redirect('/'), :format => :html
    root :to => 'pages#developer', :format => :html
  end
end 
```

这是Apache的配置：

```
# PassengerHighPerformance on
PassengerMaxPoolSize 12
PassengerPoolIdleTime 1500
# PassengerMaxRequests 1000
PassengerStatThrottleRate 120
# RackAutoDetect Off
# RailsAutoDetect Off

NameVirtualHost 10.28.124.130:80

<VirtualHost 10.28.124.130:80>

ServerName application.example.com
ServerAlias application

DocumentRoot /var/www/application/current/public/
<Directory /var/www/application/current/public>
        Options +FollowSymLinks
        AllowOverride All
        Order allow,deny
        allow from all
</Directory>
RackBaseURI /
RackEnv staging

ErrorDocument 503 /system/maintenance.html
RewriteEngine On
RewriteLog /var/www/application/current/log/rewrite_log
RewriteLogLevel 9
RewriteCond %{REQUEST_URI} !.(css|gif|jpg|png)$
RewriteCond %{DOCUMENT_ROOT}/system/maintenance.html -f
RewriteCond %{SCRIPT_FILENAME} !maintenance.html
RewriteRule ^.*$  -  [redirect=503,last]

</VirtualHost>

<VirtualHost 10.28.124.130:80>

ServerName api.application.example.com
ServerAlias api.application

DocumentRoot /var/www/application-api/current/public
<Directory /var/www/application-api/current/public>
        Options +FollowSymLinks
        AllowOverride All
        Order allow,deny
        allow from all
</Directory>
RackBaseURI /
RackEnv staging
</VirtualHost> 
```

这只是呈现了一些我写的描述我的 API 的文档。

我可以将文档根目录切换到某个空目录并获取该渲染，因此我知道 Apache 工作正常。该`application-api`目录是我部署的应用程序的符号链接。

我的 API 控制器住在里面`$RAILS_ROOT/app/controllers/api/pages_controller.rb`，但真正做这项工作的是`$RAILS_ROOT/app/controllers/pages_controller.rb`

```
Started GET "/" for 10.29.28.157 at 2012-04-26 21:12:51 -0500
Processing by PagesController#home as HTML
  Rendered pages/home.html.erb within layouts/application (283.7ms)
  Rendered layouts/_stylesheets.html.erb (4.4ms)
  Rendered layouts/_header.html.erb (5.7ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 522ms (Views: 394.4ms | ActiveRecord: 12.1ms | Solr: 0.0ms) 
```

那么，什么给了？为什么它在开发中起作用而不是在生产中起作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T02:41:48.347

我没有看到您的 www 子域的 VirtualHost。Apache 是否甚至将请求发送给乘客？

也许您需要更改您的 ServerName，或添加另一个 ServerAlias？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T06:16:40.473

因此，我将约束更改为：

```
constraints :subdomain => /^api/ do 
```

它开始起作用了。现在，为什么正则表达式会起作用并且专门命名子域对我来说并不奇怪！

# android - Android 到 WCF 使用 JSON 400 错误请求和空指针

> ID：10343966
> 
> 赞同：0
> 
> 时间：2012-04-27T02:19:50.067
> 
> 标签：android, wcf, nullpointerexception, bad-request

我正在尝试将保存在 android 手机上的用户的一些信息保存到 WCF 服务。我从手机收到 400 错误，当我尝试使用 fiddler 向服务器发送相同的请求时（在我的本地主机上测试时），我的 Visual Studio 在我的保存方法中弹出一个空指针。我正在按照这个例子来发球，它只是不工作：[教程](http://fszlin.dymetis.com/post/2010/05/10/Comsuming-WCF-Services-With-Android.aspx)

这是我的一些代码：这是我在 WCF 服务中的用户对象：

```
[DataContract]
public class User
{
    [DataMember(Name= "userid")]
    public int UserId { get; set; }
    [DataMember(Name = "username")]
    public string username { get; set; }
    [DataMember(Name = "password")]
    public string password { get; set; }
    [DataMember(Name = "information")]
    public Byte[] information { get; set; }
} 
```

我的 IService 中的操作合同

```
 [OperationContract]
    [WebInvoke(Method = "POST",
        BodyStyle = WebMessageBodyStyle.Bare, 
        ResponseFormat = WebMessageFormat.Xml, 
        RequestFormat= WebMessageFormat.Json,
        UriTemplate = "saveUser")]
    Boolean saveUser(User user); 
```

^ 此方法抛出空指针，因为用户为空。我尝试将 WebMessageBodyStyle 更改为 WrappedRequest 但这没有帮助。

下面是发送 POST 请求的 android 代码：

```
JSONStringer user = new JSONStringer()
                .object()
                    .key("user").object()
                    .key("userid").value("1").key("username").value(appState.getCurrentUser().username)
                        .key("password").value(appState.getCurrentUser().password)
                        .key("information").value(str.toString())
                    .endObject()
                .endObject();
            StringEntity entity = new StringEntity(user.toString());
            HttpPost request = new HttpPost(new URI(url));
            request.setHeader(HTTP.CONTENT_TYPE, "application/json");
            request.setHeader("Accept", "application/json");

            request.setEntity(entity);
HttpResponse response = httpClient.execute(request); 
```

^ 响应是来自服务器的 400 错误。

这是将 json 发送到 localhost 的提琴手： [这是](http://www.mediafire.com/i/?2xxkzwle2xzl61w) 我添加内容长度的图片，但在图片中显示为 0。它确实是 86。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T09:43:01.090

尝试从[Fiddler](http://fiddler2.com/fiddler2/)执行 POST 请求，您的请求应如下所示：

```
POST http://localhost/SampleApp/Service1.svc/saveUser HTTP/1.1
Content-Type: application/json
Host: localhost

{"userid":1,"username":"testuser","password":"testpassword","information":null} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T03:46:31.900

如果你看看我是如何发送 byte[] 的，它实际上是一个字符串，当 JSON 对象到达服务时，服务无法确定将这个信息字符串放在哪里。找到这个后，我觉得自己完全是个菜鸟。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-24T19:52:36.187

有时**Bad request**是错误的错误。例如，如果您在 WCF 服务器端有一个***WritePermissionException*** **，您可能会收到此Bad request**。它可能会让您感到困惑，并让您怀疑您的 JSON 字符串或与您的请求相关的内容，但确实该项目导致的错误是无关紧要的。我花了很多时间来调试这个该死的**错误请求**。所以在我看来：

> 解决此错误的最佳方法是：

*   在 wcf 服务的 web.config 文件中启用**诊断**配置。

`<system.diagnostics> <sources> <source name="System.ServiceModel" switchValue="Information, ActivityTracing" propagateActivity="true"> <listeners> <add name="xml" /> </listeners> </source> <source name="System.ServiceModel.MessageLogging"> <listeners> <add name="xml" /> </listeners> </source> <source name="myUserTraceSource" switchValue="Information, ActivityTracing"> <listeners> <add name="xml" /> </listeners> </source> </sources> <sharedListeners> <add name="xml" type="System.Diagnostics.XmlWriterTraceListener" initializeData="Traces.svclog" /> </sharedListeners> </system.diagnostics>`

*   然后，如果您有来自 wcf 的发布，请将其托管在本地 IIS 上，然后在本地调用它

**注意：**要调用 REST wcf 方法，您可以使用**REST 客户端**（例如，**高级 REST 客户端**），它们可作为 chrome/firefox 中的扩展使用。

# ruby - 使用 RVM 安装 ruby 时遇到问题。数据库文件不存在？

> ID：10343967
> 
> 赞同：2
> 
> 时间：2012-04-27T02:19:52.050
> 
> 标签：ruby, configuration, rvm

在第一步遇到大问题。我安装了 RVM，然后输入“rvm install 1.9.3”，输出如下：

```
David-Coles-MacBook-Air:~ DavesPiece$ rvm install 1.9.3
Fetching yaml-0.1.4.tar.gz to /Users/DavesPiece/.rvm/archives
Extracting yaml-0.1.4.tar.gz to /Users/DavesPiece/.rvm/src
Configuring yaml in /Users/DavesPiece/.rvm/src/yaml-0.1.4.
Error running ' ./configure --prefix="/Users/DavesPiece/.rvm/usr"  ', please read /Users/DavesPiece/.rvm/log/ruby-1.9.3-p194/yaml/configure.log
Compiling yaml in /Users/DavesPiece/.rvm/src/yaml-0.1.4.
Error running 'make ', please read /Users/DavesPiece/.rvm/log/ruby-1.9.3-p194/yaml/make.log

Database file /Users/DavesPiece/.rvm/config/packages does not exist.

Installing Ruby from source to: /Users/DavesPiece/.rvm/rubies/ruby-1.9.3-p194, this may take a while depending on your cpu(s)...

ruby-1.9.3-p194 - #fetching 
ruby-1.9.3-p194 - #extracted to /Users/DavesPiece/.rvm/src/ruby-1.9.3-p194 (already extracted)
ruby-1.9.3-p194 - #configuring 
Error running ' ./configure --prefix=/Users/DavesPiece/.rvm/rubies/ruby-1.9.3-p194 --enable-shared --disable-install-doc --with-libyaml --with-opt-dir=/Users/DavesPiece/.rvm/usr ', please read /Users/DavesPiece/.rvm/log/ruby-1.9.3-p194/configure.log
There has been an error while running configure. Halting the installation.
ls: /Users/DavesPiece/.rvm/rubies/*/bin/ruby: No such file or directory
David-Coles-MacBook-Air:~ DavesPiece$ 
```

我去阅读了它提到的日志文件，但没有任何结果。知道我应该怎么做吗？我几乎用谷歌搜索了我的脸，找不到解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T16:08:27.473

这看起来很可疑，你是如何安装 RVM 的？

最简单的解决方案是：

```
touch /Users/DavesPiece/.rvm/config/packages 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T22:39:55.853

[无法使用 RVM 在 Lion 下安装 Ruby – GCC 问题](https://stackoverflow.com/questions/8032824/cant-install-ruby-under-lion-with-rvm-gcc-issues)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T02:36:48.567

如果您没有 Xcode，则需要安装它。如果您有 Lion 10.7.3 或更高版本，您可以在 App Store 中找到它。否则，您将需要访问 Apple 开发者网站（需要帐户）以查找下载和安装说明。

此外，如果您使用 Lion，则可能需要下载并安装 GCC-10.7-v2.pkg。如果您看到有关您的编译器基于 LLVM 的消息，您可能需要改用以下命令：CC=/usr/bin/gcc-4.2 rvm install 1.9.2-p290 --enable-shared

在没有看到您的 configure.log 的情况下，这只是一个最佳猜测。

# objective-c - UITableViewCell 使用重用标识符通过回调块给出不需要的结果

> ID：10343969
> 
> 赞同：1
> 
> 时间：2012-04-27T02:20:32.097
> 
> 标签：objective-c, uitableview, objective-c-blocks, reuseidentifier

当 loadImage 的回调块在下面运行时，表格单元格可能已被重用。所以应用到“imageView”的图像与这个重用单元格无关，它是旧单元格的图像。

如果我为每个具有图像的单元格设置唯一的标识符，问题就会消失。但这会导致性能不佳，结果很多。

我可以以某种方式将相同的重用标识符与回调块一起使用，并使图像出现在正确的单元格中吗？

```
 - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    NSDictionary *place;
    PlaceTableViewCell *cell; // UITableViewCell subclass
    NSString *identifier = @"PlaceTableViewCell";

    if (cell == nil) {

        NSArray *objects;

        objects = [[NSBundle mainBundle] loadNibNamed:@"PlaceTableViewCell" owner:self options:nil];

        for(id object in objects) {

            if([object isKindOfClass:[PlaceTableViewCell class]]) {                
                cell = (PlaceTableViewCell *)object;                
                break;
            }
        }
    }

    UIImageView *imageView;
    if((imageView = (UIImageView*)[cell viewWithTag:1])) {

        NSString *filename;
        int placeImageId = 0;
        place = [places objectAtIndex:indexPath.row];

        if(place) {

            placeImageId = [[d objectForKey:@"placeImageId"] intValue];

            if(placeImageId) {

                [[RestAPIConnector sharedInstance] loadImage :placeImageId :@"thumb" :^(NSString *response){

                    NSDictionary *image = [response JSONValue];

                    if ([image objectForKey:@"img"]) {

                        NSString *b64Img = [image objectForKey:@"img"];
                        UIImage *ui = [UIImage imageWithData:[Base64 decode:b64Img]];

                        imageView.image = ui;
                    }
                }];            
            }
        }
    }

    return cell;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T02:33:00.670

这就是我正在做的事情。

我没有直接使用单元格，而是传入索引路径

```
if(user.profileImage == nil)
{
    if (self.tableView.dragging == NO && self.tableView.decelerating == NO) {
        NSLog(@"file for user %d doesn't exist", [user.userId intValue]);
        [self startUserProfileImageDownload:user forIndexPath:indexPath];
    }
}
else
{
    cell.profileImageView.image = user.profileImage;

} 
```

下载完成后，使用索引路径检索单元格，并更新图像

```
MessageCell *cell = (MessageCell *)[self.tableView cellForRowAtIndexPath:path];

// Display the newly loaded image
cell.profileImageView.image = user.profileImage;
CALayer *roundedLayer = [cell.profileImageView layer]; 
```

MessageCell 是我的自定义单元格。如果您没有使用客户单元格，则可以使用 Tag 检索 imageView 回来。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T04:40:17.690

我会创建一个字典来保存图像，然后尝试从字典中读取`cellForRowAtIndexPath:`

```
@property(retain)NSMutableDictionary *imageData;

//...

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    //...

    UIImageView *imageView;
    if((imageView = (UIImageView*)[cell viewWithTag:1])) {
        int placeImageId = 0;
        place = [places objectAtIndex:indexPath.row];
        if(place) {
            placeImageId = [[d objectForKey:@"placeImageId"] intValue];
            if(placeImageId) {
                NSObject *image = [imageData objectForKey:[NSNumber numberWithInt:placeImageId]];
                if ([image isKindOfClass:[UIImage class]) {
                    imageView.image = (UIImage *)image;
                } else if (![image isEqual:@"downloading"]) {
                    [imageData addObject:@"downloading" forKey:[NSNumber numberWithInt:placeImageId]];
                    [[RestAPIConnector sharedInstance] loadImage:placeImageId onSuccess:^(NSString *response){
                        NSDictionary *image = [response JSONValue];
                        if ([image objectForKey:@"img"]) {
                            NSString *b64Img = [image objectForKey:@"img"];
                            [imageData addObject:[UIImage imageWithData:[Base64 decode:b64Img]] forKey:[NSNumber numberWithInt:placeImageId]];
                        }
                    }];            
                }
            }
        }
    }
    return cell;
} 
```

一些潜在的优化：

*   与@Jun1st 的示例一样，滚动时不要为单元格加载图像
*   将下载操作添加到 an`NSOperationQueue`并优先考虑最近请求的操作（取消已滚动的操作的优先级）
*   将下载的图像保存到文件系统并首先检查那里

# fonts - 标头中的 Safari 细字体渲染看起来不对，我该如何解决？

> ID：10343972
> 
> 赞同：3
> 
> 时间：2012-04-24T02:12:10.270
> 
> 标签：fonts, windows, safari

我正在做一个网站设计，我正在使用谷歌字体，特别是“Raleway”字体。这种字体的特点是线条很细，所有浏览器都能很好地渲染它，除了在 Windows 7 Safari 下，它看起来像被渲染成粗体，或者至少看起来很糟糕。

![在此处输入图像描述](../Images/cf5d12452e092e5b59e2e363911f2d21.png)

这是 Safari 的问题吗？还是谷歌字体问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T03:19:40.323

恐怕在 Safari 中呈现蹩脚的渲染，虽然一些谷歌字体似乎确实有这个问题，但我在`@font-face`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T11:00:10.333

我经常发现相反的问题，在 Safari 中显得苗条和时尚的字体在 Windows 浏览器中显得太苗条，以至于一些笔画几乎消失了。

这与字体渲染的不同方法有关……Windows 选择将字体限制在像素内，从而产生更清晰的图像，但会影响字母的形状，因此它们不一定符合设计师最初想要的样子，Apple另一方面，使用内插半像素的渲染系统，产生有时更柔和/更模糊的外观，但更符合字体设计者想要的字母形状。

两个系统都不是完美的，都有他们的粉丝和仇恨者，我可以看到两个系统的优点，我可以理解导致他们选择两种不同方法的决策过程，所以我不会将其中任何一个描述为“蹩脚” "但是当试图设计在两个系统上出现相似的东西时，它确实使字体选择变得困难。

# c# - 在 C# 表单中嵌入 html

> ID：10343974
> 
> 赞同：1
> 
> 时间：2012-04-27T02:20:50.207
> 
> 标签：c#, html, winforms

有没有办法将 HTML 嵌入到 Windows 窗体自定义用户控件中？我想创建一个轻量级控件以在 .NET 4.0 应用程序中使用，但由于它的内容可以更改，我认为使用 HTML 进行布局可能是最简单的。有没有办法在 Windows 窗体中实现这一点？C# 和 HTML 还有一些其他主题，但很确定不涉及创建解析 HTML 并显示它的控件。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T02:22:41.793

您可以使用 a `WebBrowser`，但我建议不要走这条路。只需使用传统控件来完成您需要的，如果可能的话，也许结合一点 GDI+。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T02:52:16.073

就易用性和维护而言，WebBrowser 将是您的最佳选择。您可以通过访问 browser.Document.DomDocument 接口和事件来进一步控制内容本身。我不建议使用 GDI，因为从长远来看，维护和管理自定义渲染会变得很痛苦。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T03:00:16.970

我一直在尝试做类似的事情并找到[了 awesomium](http://www.awesomium.com)。他们有一个 dotnet 和 mono wrapper 以及对整个行为的非常精细的控制。只要您的公司年收入少于 10 万，它也是免费的。

忘了提到它是一个基本上嵌入在应用程序中的浏览器，因此您不必担心用户没有安装它或任何东西，并且与 pc 和操作系统一致

# solaris - 有人知道 Solaris p 系列命令（pstack，pmap）的副作用吗？

> ID：10343978
> 
> 赞同：0
> 
> 时间：2012-04-27T02:21:42.897
> 
> 标签：solaris, pmap, pstack

我现在正在调查一个 prod 问题，并且希望我的调查不会对正常的 prod 环境造成任何副作用，那么它是否会导致正在运行的程序即使在短时间内暂停？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T05:52:47.057

[pmap](http://docs.oracle.com/cd/E19082-01/819-2239/pmap-1/index.html)正在向目标进程添加一个瞬态线程并实时分析它而不会中断它，因此使用它应该没有风险。

pstack、pfiles 和 pldd 在检查它们时正在停止目标进程。通常，这不会产生任何后果，因为在 Unix 等分时系统中的任何进程都可以预料到在短时间内停止。但是，在极少数情况下，停止受影响的进程可能比预期的要长，因此会产生不必要的副作用。这在[警告](http://docs.oracle.com/cd/E19082-01/819-2239/pstack-1/index.html#Warnings)部分的 p 命令手册页中有解释。

对于所有 p 命令，不建议在生产环境中使用 -F 标志，因为可能会发生混乱。

# jquery - jQuery 偶数高度浮动 LI 的

> ID：10343982
> 
> 赞同：2
> 
> 时间：2012-04-27T02:22:24.410
> 
> 标签：jquery, list, html-lists, each

我有一个清单如下：

```
<ul id="list">
   <li>lorem</li>
   <li>lorem</li>
   <li class="last">lorem</li>
   <li>lorem</li>
   <li>lorem</li>
   <li class="last">lorem</li>
</ul> 
```

我让 li 在 3 行中向左浮动。如何使用 jQuery 选择每一行（3 li's）找到该行中的最大高度，然后将该行中的其他设置为相同的高度？

这就是我现在所拥有的，但它只将 li 视为一个整体，而不是单独的行。

```
var maxHeight = 0;

$('ul#list li').each(function() {
   maxHeight = $(this).height() > maxHeight ? $(this).height() : maxHeight;
}).height(maxHeight); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-27T02:39:16.320

首先将元素分成几行，然后分别在每一行上使用您的逻辑：

```
var items = $('ul#list li');
var total = items.length;

for(i = 0; i < total; i+=3){
    var row = items.slice(i, Math.min(i + 2, total - 1));
    var maxHeight = 0;
    row.each(function() {
        maxHeight = $(this).height() > maxHeight ? $(this).height() : maxHeight;
    }).height(maxHeight);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T02:38:54.730

如果您可以将容器设置为`overflow: hidden`，则可以在不使用 JavaScript 的情况下执行此操作，方法是使用非常大`padding-bottom`和同样大的负数`margin-bottom`（为了在底部保留视觉填充，请`margin-bottom`移近 以`0`进行补偿）。例子：

```
#list {
    overflow: hidden;
}
#list li {
    padding-bottom: 1000px;
    margin-bottom: -1000px;
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-27T02:30:45.097

试试这个：

```
var getMaxHeight = function ($elms) {
    var maxH = 0;
    $elms.each(function () {
        if ($(this).outerHeight() > maxH) {
            maxH = $(this).outerHeight();
        }
    });
    return maxH;
};

var $li = $('#list li');
$li.height(getMaxHeight($li)); // Put this on load or doc.ready 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-04-27T04:04:29.883

希望这段代码可以帮助你...

```
$("#list li:nth-child(3n)").each(function(){
   var maxHeight = Math.max.apply(Math, $(this).children().map(function(){ return $(this).outerHeight(); }).get());
   $(this).children().each(function(){
      $(this).height(maxHeight);
   });
}); 
```

# ruby-on-rails - 如何在 Rails 中提供 socket.io 客户端文件

> ID：10343985
> 
> 赞同：1
> 
> 时间：2012-04-27T02:22:54.417
> 
> 标签：ruby-on-rails, ruby-on-rails-3, node.js, socket.io

我正在编写一个 Rails 应用程序，我想使用 node.js 和 socket.io 将聊天功能集成到我的应用程序中。我计划将我的 rails 应用程序部署在一台服务器上，并将我的聊天部署在一台更小的服务器上（以节省资金）。我的理由是，如果聊天消息需要 30 秒发送是可以的，但页面需要 30 秒才能加载是不行的。

无论如何，为了让它工作，我需要 Rails 来为 socket.io 客户端文件提供服务。如果我的小型节点服务器为客户端文件提供服务，那么小型服务器将成为较大服务器的瓶颈。我有一个基本的聊天原型正在运行，但它只适用于为客户端文件提供服务的节点。为了让 Rails 为客户端文件提供服务，我需要做什么？

先谢谢了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T19:37:45.450

所以这是我决定的解决方案。我决定让 Node 服务器处理客户端 javascript，而不是弄清楚我需要提供哪些客户端文件。为了保证Node服务器不会对Rails服务器造成瓶颈，我懒加载了socket.io-client文件。相关的咖啡脚本是：

```
$ ->
    $.getScript('http://localhost:8080/socket.io/socket.io.js')
    .done (script, textStatus) ->
        socket = io.connect('http://localhost:8080')
        setupSocket(socket) 
```

其中[http://localhost:8080](http://localhost:8080)是您的节点主机/端口。setupSocket 是我编写的用于处理设置所有事件处理程序的函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T06:30:47.110

Most probably you are running into the "Same Origin Policy" restriction. (Check your console log) Your main page is downloaded from the RoR host, so your scripts can only initiate a connection to that host.

In other words, this may not be possible.

# sql - 如何使属性设置器通过 SQL 函数发送值

> ID：10343988
> 
> 赞同：8
> 
> 时间：2012-04-27T02:23:25.913
> 
> 标签：sql, ruby-on-rails, postgresql, activerecord, arel

我试图让 ActiveRecord 模型中的属性设置器在 rails 生成其 sql 查询之前将其值包装在 text2ltree() postgres 函数中。

例如，

```
post.path = "1.2.3"
post.save 
```

应该产生类似的东西

```
UPDATE posts SET PATH=text2ltree('1.2.3') WHERE id = 123 # or whatever 
```

这样做的最佳方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T19:02:32.913

**编辑：**要完全实现您在上面寻找的内容，您可以使用它来覆盖模型文件中的默认设置器：

```
def path=(value)
  self[:path] = connection.execute("SELECT text2ltree('#{value}');")[0][0]
end 
```

然后你上面的代码就可以了。

我有兴趣了解更多关于 ActiveRecord 的内部结构及其难以理解的元编程基础，因此作为练习，我试图完成您在下面的评论中描述的内容。这是一个对我有用的例子（这都在 post.rb 中）：

```
module DatabaseTransformation
  extend ActiveSupport::Concern

  module ClassMethods
    def transformed_by_database(transformed_attributes = {})

      transformed_attributes.each do |attr_name, transformation|

        define_method("#{attr_name}=") do |argument|
          transformed_value = connection.execute("SELECT #{transformation}('#{argument}');")[0][0]
          write_attribute(attr_name, transformed_value)
        end
      end
    end
  end
end

class Post < ActiveRecord::Base
  attr_accessible :name, :path, :version
  include DatabaseTransformation
  transformed_by_database :name => "length" 

end 
```

控制台输出：

```
1.9.3p194 :001 > p = Post.new(:name => "foo")
   (0.3ms)  SELECT length('foo');
 => #<Post id: nil, name: 3, path: nil, version: nil, created_at: nil, updated_at: nil> 
```

在现实生活中，我假设您希望`include`ActiveRecord::Base 中的模块位于加载路径较早的某个文件中。您还必须正确处理传递给数据库函数的参数类型。最后，我了解到这`connection.execute`是由每个数据库适配器实现的，因此您在 Postgres 中访问结果的方式可能会有所不同（此示例是 SQLite3，其中结果集作为哈希数组返回，第一条数据记录的键是0]。

这篇博文非常有帮助：

[http://www.fakingfantastic.com/2010/09/20/concerning-yourself-with-active-support-concern/](http://www.fakingfantastic.com/2010/09/20/concerning-yourself-with-active-support-concern/)

就像 Rails 插件创作指南一样：

[http://guides.rubyonrails.org/plugins.html](http://guides.rubyonrails.org/plugins.html)

此外，对于它的价值，我认为在 Postgres 中我仍然会使用迁移来创建查询重写规则，但这带来了很好的学习体验。希望它有效，我现在可以停止思考如何去做。

# iphone - 为什么在 iOS 中，我们不能声明“UIAcceleration accelerationCurrent;” ViewController 类中的实例变量？

> ID：10343993
> 
> 赞同：1
> 
> 时间：2012-04-27T02:23:46.133
> 
> 标签：iphone, ios, accelerometer

如果 Accelerometer 的事件处理程序接受`UIAcceleration *`以下内容：

```
-(void) accelerometer:(UIAccelerometer *)accelerometer 
            didAccelerate:(UIAcceleration *)acceleration { 
```

那么如果`ViewController`有一个实例变量：

```
UIAcceleration accelerationCurrent; 
```

然后为了记住加速度作为当前状态，我用

```
accelerationCurrent = *acceleration; 
```

在加速度计事件处理程序中。但是`.h`文件中的实例变量声明给出了“接口类型不能静态分配”的错误。

我以为`UIAcceleration`只有 3 个双打：x,y,z，所以如果我们可以`CGPoint aPoint`在那里使用，为什么我们不能使用`UIAcceleration accelerationCurrent`，我们如何在不单独复制 x、y、z 而是使用一个`UIAcceleration`对象的情况下保持加速度？（如果我们声明一个指针，并复制指针（引用），那么在离开加速度计事件处理程序时，指针可能指向非法内存空间）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T02:36:42.950

即使`UIAcceleration`只有四个数据成员（x、y、z 和时间戳），它也不是 a `struct`，因此它不允许您静态引用它（即您需要使用指针）。这与`CGPoint`C不同`struct`，因此您可以通过指针或不使用指针来使用它。

不幸的是，没有办法复制您感兴趣的值：您绝对正确，一旦线程离开您的处理程序，`UIAcceleration`对象可能会在您背后重用。`UIAcceleration`也不符合复制协议，因此您需要自己编写该复制例程。

# php - 这些 php 脚本使用较少的服务器内存？

> ID：10343995
> 
> 赞同：0
> 
> 时间：2012-04-27T02:24:20.513
> 
> 标签：php

```
function test($matches)
{
    $fx = '';
    if(strpos($matches[0],"http://")===false)
    {
        $fx = "http://";
    }
    elseif(strpos($matches[0],"http:/")===false)
    {
        $fx = "http:/";
    }
    elseif(strpos($matches[0],"http:")===false)
    {
        $fx = "http:";
    }
    elseif(strpos($matches[0],"http")===false)
    {
        $fx = "http";
    }
    return $fx.$matches[0];
} 
```

或者

```
function test($matches)
{
    if(strpos($matches[0],"http://")===false)
    {
        return  "http://".$matches[0];
    }
    elseif(strpos($matches[0],"http:/")===false)
    {
        return "http:/".$matches[0];
    }
    elseif(strpos($matches[0],"http:")===false)
    {
        return "http:".$matches[0];
    }
    elseif(strpos($matches[0],"http")===false)
    {
        return "http".$matches[0];
    }
} 
```

我正在尝试将我的脚本写给他们使用尽可能少的内存，但有时代码看起来很难看，在我看来，第一个脚本看起来更漂亮和有条理，但我认为它使用更多的服务器内存。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T02:48:29.387

至于哪个会使用更少的内存，我认为它们是等效的（在最坏的情况下）。

但是，就它们的运行时间而言，第二个将比第一个快几分之一纳秒，因为一旦找到一个匹配条件，它将立即返回。总的来说，Big-O 的差异是恒定的，我们都知道这并没有什么区别：最好的情况是 O(3n) 与 O(n)，最坏的情况是 O(3n) 与 O(3n)（取决于$match[0] 的大小）。**但这一切都深深地依赖于 strpos() 函数的复杂性**。

为了可读性，它们的编写和结构也相同。

# python - Sphinx 公共 API 文档

> ID：10343998
> 
> 赞同：6
> 
> 时间：2012-04-27T02:24:49.537
> 
> 标签：python, python-sphinx

我有大量的 python 文件，我想为我的项目生成公共 API 文档。我用装饰器装饰的 api 的所有功能。

例如：

```
@api
def post_comment(comment)"
    """ Posts a coment
    """
    pass 
```

同一类中还有其他公共方法。API 分布在几个文件中，每个文件定义了带有方法的类，并且一些方法有这个 @api 装饰器。如何告诉 Sphinx 仅为公共 API 生成文档？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-27T19:09:18.463

我正在回答我自己的问题......经过更多搜索后，我发现了这个：

[https://www.sphinx-doc.org/en/master/usage/extensions/autodoc.html#skipping-members](https://www.sphinx-doc.org/en/master/usage/extensions/autodoc.html#skipping-members)

基本上，您可以在`conf.py`文件中定义一个函数，可以查看每个成员并跳过所有没有正确装饰器的函数。

这是我文件末尾的一个小示例`conf.py`（这是 sphinx 的配置文件）：

```
def my_doc_skip(app, what, name, obj, skip, options):
    if what != "method":
        return True

    # if obj is decorated with @api
    #     return True
    # return False

def setup(app):
    app.connect('autodoc-process-docstring', my_process_docstring)
    app.connect('autodoc-skip-member', my_doc_skip) 
```

您还可以使用函数处理文档字符串。