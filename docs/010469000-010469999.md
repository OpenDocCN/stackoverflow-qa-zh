# StackOverflow 问答 10469000-10469999

# ruby-on-rails - Rails 验证不适用于 habtm

> ID：10469001
> 
> 赞同：0
> 
> 时间：2012-05-06T07:47:44.727
> 
> 标签：ruby-on-rails, nested-forms, nested-resources

现在我有以下几点：

**模型 => 用户**（姓名、电子邮件）

```
has_and_belongs_to_many :trips 
```

**模型 => 行程**(dest1, dest2)

```
has_and_belongs_to_many :users

validates :dest1, :dest2, :presence => true 
```

**模型 => TripsUsers** (user_id, trip_id) (id => false)

```
belongs_to :user

belongs_to :trip 
```

正如您从代码中看到的，trip 模型对 dest1 和 dest2 进行了验证，但它没有显示错误。控制器和视图定义如下：

**trips_controller.rb**

```
 def new
    @user = User.find(params[:user_id])
    @trip = @user.trips.build
  end

  def create
    @user = User.find(params[:user_id])
    @trip = Trip.new(params[:trip])
    if @trip.save
      @trip.users << @user
      redirect_to user_trips_path, notice: "Success"
    else
      render :new
    end
  end 
```

**_form.html.erb**

```
<%= simple_form_for [@user, @trip] do |f| %>
    <%= f.error_notification %>
    <%= f.input :dest1 %>
    <%= f.input :dest2 %>
    <%= f.submit "Submit" %>
<% end %> 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-05-06T10:37:29.307

根据关于[验证的](http://guides.rubyonrails.org/active_record_validations_callbacks.html#presence)[rails 指南`presence`](http://guides.rubyonrails.org/active_record_validations_callbacks.html#presence)，它不能与关联对象一起使用。尝试使用自定义验证：

```
validate :destinations_presence

def destinations_presence
  if dest1.nil? 
    errors.add(:dest1, "missing dest1")
  elsif dest2.nil?
    errors.add(:dest1, "missing dest2")
  end
end 
```

# html - 如何为大型垂直显示器设计网页？

> ID：10469003
> 
> 赞同：2
> 
> 时间：2012-05-06T07:47:58.783
> 
> 标签：html, css, resolution, screen-orientation

我目前正在设计一个网页，用于在商场的 LED 屏幕上显示动态内容。

我需要确保我设计的内容完全适合显示器的高度和宽度。屏幕尺寸为 42 英寸，分辨率为 1280 × 720。

1.  如何确保我的设计完全适合屏幕？我更担心让它垂直适合。

2.  我如何设计能够自动适应并适应如此长的垂直屏幕的内容？

3.  是否有任何工具可以帮助我完成设计过程？

![数字广告牌](../Images/6b1aa775a9ed4378255794a982399c39.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T08:47:14.683

你不应该有很多问题，只需将你的高度设置为 1280 像素，宽度设置为 720 像素。

一个好的模板应该是：

```
<!doctype html>
<html>
    <head>
        <style>
            #wrapper {
                height:1280px;
                width:720px;
                outline:1px black solid; // useful when designing to see where boundary of screen is.
            }

        </style>
    </head>
    <body>
        <div id="wrapper">
            <!-- Everything goes in here. -->
        </div>
    </body>
</html> 
```

您需要找出他们使用的浏览器，然后在该浏览器中进行设计。您可能会发现它运行带有 IE 7 的 Windows XP Embedded。

为了便于使用 IE7，我建议设置一个运行浏览器的虚拟机。你可以在这里从微软那里得到这个：http: [//www.microsoft.com/en-us/download/details.aspx?id=](http://www.microsoft.com/en-us/download/details.aspx?id=11575&mnui=0) 11575&mnui= 0，或者如果你在 OSX 或 Linux 上，坦率地说很棒的[https:// github.com/xdissent/ievms](https://github.com/xdissent/ievms)可能很方便。

值得仔细考虑可读的最小字体大小。你可能还会发现，如果是旋转过的普通屏幕，子像素会旋转 90˚，即 RGB 不是从左到右，而是垂直排列。在这种情况下，微软的 Cleartype 看起来会很奇怪，所以如果打开它，你会发现较小的文本非常模糊。（它适用于左右像素而不是上下像素，因此旋转的屏幕会大大甩掉它）。

我会尝试获取屏幕的副本，或者只是通过您的电视运行它并将头侧向以近似它:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T08:56:04.333

问题 1,3：让自己成为 Firefox 的“Web Developer”插件。在工具栏中，在“调整大小”下选择“编辑调整大小尺寸”并添加“宽度：720，高度：1280”。现在您可以单击调整大小，并准确查看您的设计在所需的屏幕分辨率上的外观。

[https://addons.mozilla.org/en-US/firefox/addon/web-developer/](https://addons.mozilla.org/en-US/firefox/addon/web-developer/)

至于您的问题 2：使用 jQuery，您可以添加以下代码：

```
$(document).ready( function(){
  var height = $(window).height();
  var width = $(window).width();
  if(width>height) {
    // Landscape
    $("body").addClass("landscape");
  } else {
    // Portrait
    $("body").addClass("portrait");
  }
} 
```

它会将“portrait”或“landscape”类添加到您的页面“body”元素中。您现在可以将此类添加到您的 CSS 规则中以进行条件设计。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-06T09:00:36.623

您的好处是只需支持一种设备和分辨率，但您可能会面临一些挑战。

## 挑战

*   确保内容完全适合分配的空间（空白在这样的显示器上看起来很糟糕，因为会溢出（当然）。

*   处理可能较旧的浏览器（正如@Rich Bradshaw 指出的那样）和平庸的 CPU/GPU。

*   典型的桌面显示器和更大的显示器之间的像素密度差异。

*   色温/解释和字体渲染差异。

## 可能有帮助的事情

*   我的第一步是看看您是否可以将设备作为借用人提供给您进行测试。我曾与不止一家公司合作过，他们乐于在需要满足特定要求时借出/提供设备。如果您负责视觉设计的任何部分（例如，确保颜色不渗色、字体平滑等），这一点尤其重要。

*   如果您无法获得实际设备，请至少查看它是否已校准到特定的颜色配置文件，然后您可以在本地机器上设置（在 Windows 中，它位于“颜色管理”下）。

*   如果内容是静态的，那么很容易组合一个固定尺寸的布局，甚至可以在旧浏览器上使用。

*   如果内容本质上是动态的，您可以尝试使用[jQuery Masonry](http://masonry.desandro.com/)之类的方法，它会尝试将不同的内容放入动态网格中。但是，它可能会导致尺寸大于您的期望，因此您仍然需要对原始内容有一个大致的了解。这假设您正在运行一个有点现代的 JavaScript 引擎 IE7+)

*   确保你优雅地失败。在 PC/移动设备上使用的网站上的布局错误已经够糟糕的了，但在购物中心中间的大屏幕上的错误确实很突出。

我发现这些使用 Google TV 的指南在处理大屏幕上的设计/实现时很有用：[https ://developers.google.com/tv/web/docs/design_for_tv](https://developers.google.com/tv/web/docs/design_for_tv)

# c++ - 如何使用 CWindowImpl 类创建新窗口

> ID：10469010
> 
> 赞同：1
> 
> 时间：2012-05-06T07:50:08.217
> 
> 标签：c++, winapi, atl

我正在尝试使用以下类构建一个新窗口。但是我在尝试使用 CWindow::m_hwnd 变量获取新生成的窗口名称时遇到了一些严重的问题。我的猜测是我应该将一个变量传递给包含我父母的 HWND 的 CWindowImpl::Create() 函数，但我不知道如何获取它。

```
STDMETHODIMP CVMNExporter::SetSite(IUnknown *pUnkSite) {
    HRESULT hr;
    if(FAILED(hr = ATL::IObjectWithSiteImpl<CVMNExporter>::SetSite(pUnkSite)))
        return hr;
    // We are rnning from a web browser
    CONNECTION_CALLBACK = JSCRIPT_DISPID;
    EXPORTING_CALLBACK  = JSCRIPT_DISPID;
    MERGING_CALLBACK    = JSCRIPT_DISPID;
    ABORTING_CALLBACK   = JSCRIPT_DISPID;

    AddRef();
    if(NULL == Create(0)) {// Creates the hidden window
        Release();
        return HRESULT_FROM_WIN32(GetLastError());
    }
    ATLTRACE("TEST - SetSite(): this: %d, window: %d", this, m_hWnd);
    m_dwApartmentMode = HWND_APARTMENT;
    SendMessage(WM_EXPORTER_APARTMENT_SETUP, 0, 0);
    return S_OK;  } 
```

CVMNExporter 实现以下接口：

```
 public ATL::IObjectSafetyImpl<CVMNExporter, INTERFACESAFE_FOR_UNTRUSTED_CALLER | INTERFACESAFE_FOR_UNTRUSTED_DATA>,
        public ATL::IObjectWithSiteImpl<CVMNExporter>,
        public ATL::CWindowImpl<CVMNExporter, ATL::CWindow, ATL::CFrameWinTraits>, 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T12:07:02.820

好吧，我花了一些时间，但设法通过使用 GetActiveWindow() 来解决它

# asp.net-mvc-3 - MVC 和多个 google checkout 商家 ID

> ID：10469011
> 
> 赞同：0
> 
> 时间：2012-05-06T07:50:09.233
> 
> 标签：asp.net-mvc-3, credit-card, google-checkout, merchant-account

这将是我第一次处理信用卡交易和商户 ID。我有一个为活动组织者及其用户提供服务的网站。如果用户想购买活动的门票，我希望钱直接转到组织者手中。我在想我必须与拥有自己的商家 ID 的组织者一起处理这个问题，然后将它们存储起来。我的问题是，我是否也必须要他们的商家密钥？

作为一个后续问题，这是一种更好的交易处理方式，而不是只有一个商家 ID（网站）并通过它汇集资金并从用户分配给组织者，同时向他们收取一些额外费用?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T14:50:02.147

> 我要钱直接给主办方

然后，您应该将您的实现视为“仅服务提供商”，将 Google Checkout“集成”到您的服务中。您的关系是这样定义的 - 而您的客户 - 活动组织者*及其*客户与 Google Checkout 有自己的关系

这样，您就**不会** 参与他们与 Google Checkout 之间发生的交易*。*

此外，Google Checkout 仅*直接*向商家付款（据我所知，他们没有任何*其他*类型的“付款”）。

> 这是一种处理交易的更好方式，而不是只有一个商家 ID（网站）并通过它汇集资金并从用户那里分发给组织者，同时向他们收取一些额外费用

我认为您已经通过询问就意识到了陷阱-您意识到这**不仅仅是**技术问题-当您参与交易时，您有自己的责任要考虑。

*   你会怎么做拒付？是您的帐户被“击中”...
*   退款时你会怎么做？
*   *当活动组织者与*客户发生纠纷时，您会怎么做？

在这些示例案例中，**您**将不得不处理所有这些问题 - 您的“用户”与 Google Checkout *“无关”*（在 Google 眼中它们并不“存在”）。

另外，顺便说一句，我不是律师，但是根据他们的 TOS ， Google 不允许以某种方式将任何“费用”*添加到使用 Google Checkout 的交易中。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T14:45:53.443

如果您的商家帐户用于销售，那么您就是在转售活动门票。

作为经销商，您可以为客户提供非常干净的体验。但是您稍后会向活动组织者付款（不是在同一笔交易中）。稍后向活动组织者付款的一个很好的理由是，您可以将他们的全部或部分资金存放在第三方托管机构中，以防拒付。

如果想让客户的钱**直接**到活动主办方那里，我觉得有一些方法：

1.  客户通过 paypal、google checkout、authorize.net 等进行销售。您将客户引导至（活动组织者）付款页面，然后返回您的网站。我认为这就是 EventBrite 正在做的事情。您需要单独向活动组织者收取费用。（您可以同时向活动组织者拥有的信用卡收费。）

2.  您使用明确包含第 3 方功能的 Amazon Payments。-- 它使您（第三方）能够控制发生在其他两方（活动组织者和最终客户）之间的交易

祝你好运！

# qt - 使用 GDAL/OGR 在 QT 中显示矢量文件

> ID：10469012
> 
> 赞同：4
> 
> 时间：2012-05-06T07:50:37.230
> 
> 标签：qt, projection, shapefile, gdal, ogr

我正在编写一个应用程序来使用 gdal/ogr 加载矢量地图/形状文件并将它们显示到使用 Qt 设计的 gui 上。我是处理矢量文件的新手，我无法决定如何在 GUI 上呈现它们。我想到的几个方法是： - 将矢量文件转换为光栅并将它们显示为光栅.. - 在矢量文件中逐个绘制每个形状（我不知道如何做到这一点，我什至不知道它是否会甚至可能使用 GDAL/OGR，或者这将是多么复杂，因为在我的情况下，矢量文件可能非常复杂）

决定如何渲染矢量文件对我来说非常重要，因为在显示矢量文件后，我需要支持一些高级功能，如投影更改、交互式选择、地理参考等。

任何从事矢量/gis工作的人都可以告诉我这通常是如何完成的，以及使用什么Qt小部件来显示这些数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T22:32:40.777

显示矢量是一项棘手的任务，因为它需要渲染几何图形。

我会考虑量子地理信息系统（QGIS）。它实际上也是基于 QT，但带有复杂的渲染引擎。自定义 QGIS 应用程序甚至可以独立运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-11T14:14:09.513

我通过为每种形状文件编写渲染函数解决了绘制矢量文件的问题。Qt 的 QPainter 非常适合绘制多边形、多多边形、直线、多线等形状，然后将输出显示为 QImage。

# javascript - 如何正确对齐 javascript ALERT？

> ID：10469016
> 
> 赞同：1
> 
> 时间：2012-05-06T07:51:20.100
> 
> 标签：javascript, html, utf-8

我正在尝试右对齐 javascript 警报框中的一些文本。这是一个以色列客户，所以上下文是希伯来语，应该是正确的。

```
alert("הצעת חוק פרטית לאסור על\n מוסדות המדינה לשלם לספקים תמורת טובין ושירותים בתשלומים דחויים"); 
```

它在 FireFox 和 Chrome 中看起来不错，但在 IE9 中却不行。

想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-06T07:59:18.253

使用一些替代的 javascript 警报，例如[Impromptu](http://trentrichardson.com/Impromptu/)或类似的。它的风格可以很容易地配置以满足您的需求，并且其中大多数是跨浏览器兼容的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T08:01:18.320

如果您使用的是基于右对齐文本的语言版本的 IE9，则文本将在 IE9（本机）窗口中右对齐。你确定你用的是希伯来语版本的 IE9 进行测试吗？请记住，与 FF 和 Chrome 不同，IE9 UI 语言 == Windows 语言。

# django - 如何使用 django 测试框架测试 404 NOT FOUND？

> ID：10469018
> 
> 赞同：10
> 
> 时间：2012-05-06T07:51:29.467
> 
> 标签：django, testing, http-status-code-404

我正在尝试使用 Django 1.4 的测试框架自动化 404 页面测试。

如果我在运行开发服务器的浏览器地址栏中打印`127.0.0.1:8000/something/really/weird/`，我会看到一个 404 页面，并显示正确的“404 NOT FOUND”状态（如萤火虫所示）。

但是，如果我尝试使用此代码进行测试：

```
from django.test import TestCase
class Sample404TestCase(TestCase):
    def test_wrong_uri_returns_404(self):
        response = self.client.get('something/really/weird/')
        self.assertEqual(response.status_code, 404) 
```

测试失败，输出如下：

```
$./manage.py test main
Creating test database for alias 'default'...
.F
======================================================================
FAIL: test_wrong_uri_returns_404 (main.tests.Sample404TestCase)
----------------------------------------------------------------------
Traceback (most recent call last):
  File ".../main/tests.py", line 12, in test_wrong_uri_returns_404
    self.assertEqual(response.status_code, 404)
*AssertionError: 200 != 404*

----------------------------------------------------------------------
Ran 2 tests in 0.031s

FAILED (failures=1)
Destroying test database for alias 'default'... 
```

我对在这里获得 200 个代码感到非常惊讶。任何人都知道为什么会发生这种情况？

# 更新：

这里是 urls.py：http://pastebin.com/DikaVa8T [，](http://pastebin.com/DikAVa8T) 实际失败的测试是：

```
def test_wrong_uri_returns_404(self):
    response = self.client.get('/something/really/weird/')
    self.assertEqual(response.status_code, 404) 
```

项目中的一切都在发生[https://github.com/gbezyuk/django-app-skeleton](https://github.com/gbezyuk/django-app-skeleton)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-06T07:56:46.303

尝试

```
response = self.client.get('/something/really/weird/') # note the '/' before something 
```

`127.0.0.1:8000/something/really/weird/`在相`/something/really/weird/`对于根的路径中，***而不是***

*   `something/really/weird`
*   `something/really/weird/`
*   `/something/really/weird`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-21T07:59:46.573

问题是您的 ViewFor404 类返回 200 状态代码。查看 Django 的 TemplateView 定义：

```
class TemplateView(TemplateResponseMixin, View):
    """
    A view that renders a template.
    """
    def get_context_data(self, **kwargs):
        return {
            'params': kwargs
        }

    def get(self, request, *args, **kwargs):
        context = self.get_context_data(**kwargs)
        return self.render_to_response(context) 
```

所以你的班级所做的只是一个render_to_response，它会生成一个'200'响应。

如果您需要覆盖 404 处理程序，您应该在视图中执行更多类似的操作：

```
return HttpResponseNotFound('<h1>Page not found</h1>') 
```

（我不知道基于类的视图中的等价物）

或者更好的是，你能避免自定义视图吗？要自定义 404 显示，您只需创建一个 404.html 模板（在您网站的 templates/ 目录中），它将被 Django 的错误查看器拾取。

# sql - 删除除前 10 行之外的所有行

> ID：10469019
> 
> 赞同：0
> 
> 时间：2012-05-06T07:51:45.347
> 
> 标签：sql, sql-server, sql-delete

我有以下 SQL 语句，它似乎正在删除所选表中的每一行。它应该做的是删除除难度级别等于 1 的前 10 名之外的所有内容。

```
DELETE FROM Scores
WHERE Highscore_ID 
NOT IN (SELECT TOP 10 highScore FROM Scores WHERE difficulty = 1 ORDER BY HighScore DESC) 
```

关于为什么这会删除所有行的任何建议？运行子查询时，它会选择正确的行，但是，在删除时，它似乎想要删除每一行。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-06T07:55:28.340

您将 Hichscore_Id 与列 highScore 进行比较。这些列真的具有相同的值吗？

那么应该是

```
DELETE FROM Scores 
WHERE Highscore_ID NOT IN
          (SELECT TOP 10 HighScore_ID 
           FROM Scores 
           WHERE difficulty = 1 
           ORDER BY HighScore DESC); 
```

编辑：

尝试这个

```
DELETE FROM Scores
JOIN (SELECT ROW_NUMBER() OVER (ORDER BY highscore) AS your_row, * 
      FROM Scores 
      WHERE difficulty = 1 
      ORDER BY HighScore DESC) AS score2 ON score2.HighScore_ID = Scores.HighScore_ID
WHERE Scores.difficulty = 1 AND score2.your_row>10 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-06T07:54:51.593

不知道这是拼写错误还是真正的错误，但您的 select 子句应该引用 highscore_id，而不是 highscore。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-06T08:44:03.463

尝试这个：

```
with a as
(
select ROW_NUMBER() over(order by name) as ordinal, * from test
)
delete from a where a.ordinal > 10; 
```

相关：[http ://www.ienablemuch.com/2012/03/possible-in-sql-server-deleting-any-row.html](http://www.ienablemuch.com/2012/03/possible-in-sql-server-deleting-any-row.html)

* * *

样本数据：

```
CREATE TABLE [beatles]
    ([name] varchar(14));

INSERT INTO [beatles]
    ([name])
VALUES
    ('john'),
    ('paul'),
    ('george'),
    ('ringo'),
    ('pete'),
    ('brian'),
    ('george martin'); 
```

询问：

```
with a as
(
  select *, row_number() over(order by name) ordinal
  from beatles
)
delete from a
where ordinal > 4;

select * from beatles; 
```

之前的删除：

```
NAME
brian
george
george martin
john
paul
pete
ringo 
```

删除后：

```
NAME
brian
george
george martin
john 
```

现场测试：[http ://www.sqlfiddle.com/#!3/0adcf/6](http://www.sqlfiddle.com/#!3/0adcf/6)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-06T07:56:30.640

我的第一个猜测是“SELECT TOP 10 highScore FROM Scores WHERE难度= 1 ORDER BY HighScore DESC”可能返回空值。

我的第二个猜测是“highscore_id”与“highscore”不同，因此没有重叠（也没有任何内容被删除）。

*绝对*要仔细检查您的子查询，并确保它返回您期望的键！

# asterisk - 如何防止宏返回 Gosub

> ID：10469020
> 
> 赞同：0
> 
> 时间：2012-05-06T07:51:49.377
> 
> 标签：asterisk

我正在使用星号。这是我的场景：

```
[my-custom-ivr]
exten => s,1,Background(fa/main_menu)
exten => 1,1,Gosub(ghesse-sub,s,1(1))

[ghesse-sub]
exten => s,n,Macro(get-subfolder,${ARG1})
exten => S,n,Read(digitsDetected,"barg/1-Ghesseh/GhesseMenu/1",1,,2,10)
exten => s,n,NoOp(${digitsDetected});
exten => s,n,Macro(get-storyfilename,${digitsDetected})
exten => s,n,Playback(${StoryFileName})
exten => s,n,NoOp(${MaxStoryID})
exten => s,n,NoOp(${StoryFolderID}) 
```

执行 Macro(get-subfolder,${ARG1}) 后，它返回到 Gosub(ghesse-sub,s,1(1))。如何防止它这样做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T21:42:44.830

这是 GoSub 的期望行为（执行一个子程序，然后从您离开的地方继续）。

如果您不想要这种行为，那么您应该改用 Goto。

# android - 在游戏android中旋转精灵

> ID：10469031
> 
> 赞同：0
> 
> 时间：2012-05-06T07:54:09.127
> 
> 标签：android, canvas, matrix, bitmap

我想实现将精灵从位置 (x ,y ) 移动到位置 action_down (x1 , y1) 。但我无法旋转它。请帮助我。谢谢

这是我的代码：

```
public Sprite(GameView gameView, Bitmap bmp) {

      this.gameView = gameView;
      this.bmp = bmp;
      this.width = bmp.getWidth() / BMP_COLUMNS;// create width, height
      this.height = bmp.getHeight() / BMP_ROWS;
      Random rnd = new Random(System.currentTimeMillis());
      x = rnd.nextInt(gameView.getWidth() - bmp.getWidth());
      y = rnd.nextInt(gameView.getHeight() - bmp.getHeight());
}

public void onDraw(Canvas canvas) {

            Matrix matrix = new Matrix();
            matrix.postTranslate(x, y);
            float dx = x1-x;
    float dy = y1-y;
    float d = (float)Math.sqrt(dx*dx+dy*dy);
    vx = (float) (dx*5/d)/3 ;
    vy = (float) (dy*5/d)/3 ;
    if(k==1){
    x += vx ;
    y += vy ;
    }
    currentFrame = ++currentFrame % BMP_COLUMNS;
    int srcX = currentFrame * width;
    int srcY = 0 * height;
    Rect src = new Rect(srcX, srcY, srcX + width, srcY + height);
    Rect dst = new Rect(x, y, x + width, y + height);
    canvas.drawBitmap(bmp, src, dst, null);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-28T22:01:21.873

Here you go: Note: you need to convert from Bitmap to Image.

```
import java.awt.*;
import java.awt.geom.AffineTransform;
import java.awt.image.AffineTransformOp;
import java.awt.image.BufferedImage;

/**
 * Created by Chris on 3/28/2014.
 */
public class Sprite {
    private Image i;

    public Sprite(Image image) {
        this.i = image;
    }

    private BufferedImage image = null;
    private Graphics2D graphics = null;

    public void onDraw(Canvas canvas) {
        if(image == null || graphics == null) {
            setup();
        }
        Graphics g = canvas.getGraphics();
        graphics.setColor(Color.WHITE);
        graphics.fillRect(0, 0, image.getWidth(), image.getHeight());
        //Where to draw the Sprite on the canvas.
        int x = 100;
        int y = 100;
        //Because graphics is an instance of Graphics2D
        //Converts the degrees "45" to radians.
        double rotationAngle = Math.toRadians(45);
        double locX = image.getWidth() / 2;
        double locY = image.getHeight() / 2;
        AffineTransform tx = AffineTransform.getRotateInstance(rotationAngle, locX, locY);
        AffineTransformOp op = new AffineTransformOp(tx, AffineTransformOp.TYPE_BILINEAR);

        graphics.drawImage(op.filter(image, null), 0, 0, null);

        g.drawImage(image, x, y, (int) (image.getWidth() / 2), (int) (image.getHeight() / 2), null);
    }

    /**
     * Sets the Image up.
     */
    private void setup() {
        if(image != null) {
            image.flush();
            image = null;
        }
        if(graphics != null) {
            graphics.dispose();
            graphics = null;
        }
        image = new BufferedImage(i.getWidth(null) * 2, i.getHeight(null) * 2, BufferedImage.TYPE_INT_ARGB);
        graphics = image.createGraphics();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T08:00:03.713

你应该看看`matrix.postRotate`or `canvas.rotate`。

# c# - 如何在网站中反复检查用户活动值

> ID：10469035
> 
> 赞同：1
> 
> 时间：2012-05-06T07:55:02.120
> 
> 标签：c#, asp.net, web

我正在使用 ASP.NET 构建一个网站。这是一个我随机连接两个用户互相玩的游戏。

我需要做的是，当这两个玩家中的一个退出或闲置一段时间后，我完成游戏并将另一个玩家发送到某个页面，告诉他或她游戏结束。

我的问题是我无法弄清楚如何每隔一段时间跟踪用户状态。我知道 ASP.NET 有 (LastActivityDate)，但是我如何每 30 秒重复检查一次这个值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T07:58:49.940

假设您有 2 个用户

每个用户 每 2 秒*ping 一次服务器*`setInterval`（ajax）[使用 javascript's ] 并增加一个计数器 - 或在 or 中设置一个新时间`Application`）`Cache`-*全局访问对象*

偶尔 - 你扫描那些结构 - 如果值（比如说 DateTime） - 比 X 大 - 所以有人停止发送 ping - 这就是你知道有人已经离开的方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T08:13:58.150

您应该使用 jQuery 或其他 Javascript 库来简单地使用 ajax。您还需要使用“setInterval”功能来验证用户是否仍然处于活动状态。

链接： [http ://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

[http://www.w3schools.com/ajax/ajax_intro.asp](http://www.w3schools.com/ajax/ajax_intro.asp)

# php - 在php中减去两个日期

> ID：10469037
> 
> 赞同：37
> 
> 时间：2012-05-06T07:55:07.853
> 
> 标签：php

我在 php 中有两个日期

```
$date1 = 'May 3, 2012 10:38:22 GMT'

$date2 = '06 Apr 2012 07:22:21 GMT' 
```

然后我减去它们

```
$date2 - $date1 
```

，并得到

```
Result:6 
```

为什么结果是 6 而不是 27？... ? 我怎样才能减去这两个日期，并让它根据月份差异返回一个结果，同时减去年&日&时间？

* * *

## 回答 #1

> 赞同：74
> 
> 时间：2012-05-06T08:03:03.333

第 1 部分：为什么结果是 6？

当您第一次减去日期时，日期只是字符串。PHP 尝试将它们转换为整数。它通过转换直到第一个非数字来做到这一点。因此，date2 变为 6，date1 变为 0。

第 2 部分：如何让它工作？

```
$datetime1 = strtotime('May 3, 2012 10:38:22 GMT');
$datetime2 = strtotime('06 Apr 2012 07:22:21 GMT');

$secs = $datetime2 - $datetime1;// == <seconds between the two times>
$days = $secs / 86400; 
```

酌情转换。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-05-06T08:03:03.940

使用[DateTime](http://php.net/datetime)和[DateInterval](http://php.net/DateInterval)，

```
$date1 = new DateTime("May 3, 2012 10:38:22 GMT");
$date2 = new DateTime("06 Apr 2012 07:22:21 GMT");
echo $date1->diff($date2)->format("%d"); 
```

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2012-05-06T08:05:41.053

有一种方法可以使用 mktime n 在时间戳中生成日期，然后减去，然后使用日期函数以您想要的方式显示......

另一种方法是将两个日期格式化为相同的格式，然后减去....

第三种方式

```
$date1=  new DateTime("May 3, 2012 10:38:22 GMT");
$date2= new DateTime("06 Apr 2012 07:22:21 GMT");
echo $date1->diff($date2)->("%d"); 
```

第四路

```
$datetime1 = strtotime('May 3, 2012 10:38:22 GMT');
$datetime2 = strtotime('06 Apr 2012 07:22:21 GMT');
$secs = $datetime2 - $datetime1;// == return sec in difference
$days = $secs / 86400; 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2014-05-09T08:53:21.637

大多数提出的解决方案似乎都在起作用，但每个人都忘记了一件事：时间。

以**埃文**为例：

```
$datetime1 = strtotime('May 3, 2012 10:38:22 GMT');
$datetime2 = strtotime('06 Apr 2012 07:22:21 GMT');

$secs = $datetime2 - $datetime1;// == <seconds between the two times>
$days = $secs / 86400; 
```

当您不修剪时间部分时，可能会导致精确计算。例如：`2014-05-01 14:00:00`(Ymd) 和之间的间隔`2014-05-02 07:00:00`将为 0,xxx，而不是 1。您应该修剪每个日期的时间部分。

所以应该是：

```
$datetime1 = strtotime(date('Y-m-d', strtotime('May 3, 2012 10:38:22 GMT')));
$datetime2 = strtotime(date('Y-m-d', strtotime('06 Apr 2012 07:22:21 GMT')));

$secs = $datetime2 - $datetime1;// == <seconds between the two times>
$days = $secs / 86400; 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2013-05-27T10:42:39.580

```
$todate= strtotime('May 3, 2012 10:38:22 GMT');
$fromdate= strtotime('06 Apr 2012 07:22:21 GMT');
$calculate_seconds = $todate- $fromdate; // Number of seconds between the two dates
$days = floor($calculate_seconds / (24 * 60 * 60 )); // convert to days
echo($days); 
```

此代码将找到两个日期之间的日期差异..

这里的输出是 27

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-10-22T06:18:12.393

```
echo 'time'.$notification_time=  "2008-12-13 10:42:00";
 date_default_timezone_set('Asia/Kolkata');
 echo 'cureen'.$currenttime=date('Y-m-d H:i:s'); 
$now = new DateTime("$notification_time");
$ref = new DateTime("$currenttime");
$diff = $now->diff($ref);
printf('%d days, %d hours, %d minutes', $diff->d, $diff->h, $diff->i); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-12-30T11:20:18.653

如果要使用 diff（它返回一个 Dateinterval 对象）方法，正确的方法是使用 %a 进行格式化。我是说：

如果您检查[http://php.net/manual/en/dateinterval.format.php](http://php.net/manual/en/dateinterval.format.php)

正确的方法是：

```
 echo $date1->diff($date2)->format("%a"); 
```

为了得到所有的日子

# python - 检查是否加载了 .txt 文件

> ID：10469047
> 
> 赞同：0
> 
> 时间：2012-05-06T07:56:45.693
> 
> 标签：python, file, loading

我的程序有一个包含不同选项的菜单。如果您选择`l`，否则`L`它将加载 packages.txt 文件。这很好用。

```
 if option.upper() == 'L':
        f = open( "packages.txt", "r" ) 
```

然后，如果您选择`d`或`D`（d 表示显示），它应该检查文件是否已加载，然后显示（“打印”）文件中给出的信息。

```
if option.upper() == 'D':
    if open( "packages.txt", "r" ):
        a = []
        for line in f:
            a.append(line)
            print(line)

    if open( "packages.txt", "r" ):
        print("fail") 
```

那是我写的代码，打印和显示工作正常，但我无法理解 if file open 语句。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T08:00:16.160

这里的问题是您再次打开文件，而不是检查现有文件：

```
f = None

...

if option.upper() == 'L':
    f = open( "packages.txt", "r" )
elif opetion.upper() == 'D':
    if f and not f.closed:
        ...
    else:
        print("File not opened.") 
```

请注意，这通常是一个坏主意。最好只在需要时打开文件。

所以，更好的选择是这样的：

```
selected = option.upper()
filename = None

if selected == "L":
    filename = "packages.txt"
elif selected = "D":
    if filename:
        with open(filename, "r") as f:
            ...
    else:
        print("The file to display has not been selected.") 
```

请注意我[对`with`语句](http://docs.python.org/reference/compound_stmts.html#the-with-statement)的使用，它更具可读性并确保文件正确关闭，即使您有异常也是如此。

# jquery - Jquery追加动态div

> ID：10469049
> 
> 赞同：0
> 
> 时间：2012-05-06T07:56:59.080
> 
> 标签：jquery, jquery-selectors

我正在尝试将带有 ID 的表行附加到另一个表。我有以下代码：

```
var ID = jQuery.inArray(name, name_array);
$("#processed").append('#'+ID); 
```

以下代码不起作用，因为它仅显示`#1`、`#2`等（而不是具有该 ID 的 div）。我试图移动 ID 的表格行设置在第一行，但第二行不起作用。
我怎样才能附加它？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T08:00:24.323

```
var ID = jQuery.inArray(name, name_array);
$("#processed").append($('<div/>', { id: '#'+ID })); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T08:29:43.743

实际上，它们都可以包装成一行：

`$("#processed").append(jQuery('<tr />', { id: ('#' + jQuery.inArray(name, name_array)), name: name });`

# javascript - 使用 underscore.js 计算对象属性

> ID：10469051
> 
> 赞同：1
> 
> 时间：2012-05-06T07:58:07.347
> 
> 标签：javascript, underscore.js

所以我正在尝试用下划线想一个更好的方法来做到这一点：

```
state.attributes = _.reduce(list, function(memo, item){ 
    memo['neighborhood'] = (memo['neighborhood'] || []);
    var isNew = true;
    _.each(memo['neighborhood'], function(hood){
        if (hood.name === item.data.neighborhood) {
            hood.count++; isNew=false;
        } 
    });
    if(isNew){
        memo['neighborhood'].push({name:item.data.neighborhood, count:1});
    }
    return memo;
}); 
```

我想将列表的各种名称组合成一个唯一名称列表，并计算每个唯一名称出现的次数。下划线似乎正是为了解决这种问题而设计的，但我能想到的最佳解决方案似乎不够优雅。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-06T09:25:25.197

我不是 underscore.js 用户，但我想[`_.groupBy()`](http://underscorejs.org/#groupBy)适合这种情况：

```
var attributes = _.groupBy(list, function (item) {
    return item.data.neighborhood
}) 
```

它不会以您想要的确切方式返回数组，但它包含您需要的所有信息。因此，您拥有`attributes["foo"]`所有具有“foo”作为`neighborhood`值属性的项目，因此在`attributes["foo"].length`它们的计数中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T08:26:11.710

也许有更好的 underscore.js 方式，但您已经可以应用其他优化：

不要使用数组来跟踪名称和计数，而是使用`name: count`地图。这可以通过一个对象轻松完成：

```
state.attributes = _.reduce(list, function(memo, item){ 
    var n = item.data.neighborhood;
    memo['neighborhood'] = (memo['neighborhood'] || {});
    memo['neighborhood'][n] = memo['neighborhood'][n] + 1 || 1;
    return memo;
}); 
```

这行得通，因为如果`item.data.neighborhood`尚未在列表中，`memo['neighborhood'][item.data.neighborhood]`将返回`undefined`并`undefined + 1`返回`NaN`。
由于`NaN`计算结果为`false`，表达式`NaN || 1`将导致`1`。

# dataset - 神经网络数据集

> ID：10469057
> 
> 赞同：0
> 
> 时间：2012-05-06T07:58:53.943
> 
> 标签：dataset, machine-learning, neural-network, weka

我一直在研究神经网络，因为我需要在 weka 中训练一个数据集，但是我没有要在 weka 上实现的任何数据集，谁能帮助我，这是我在其中实现的论文

[http://www.lcc.uma.es/~lfranco/A25-Gomez+Franco+09.pdf](http://www.lcc.uma.es/~lfranco/A25-Gomez+Franco+09.pdf)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T12:37:22.267

数据集很容易创建。你所需要的只是想一个场景。例如，在一所学校，学生需要在体能测试中获得 75 分或更高的分数，但这会因体重和身高而异。因此，您在表中的属性将是：

体重 - 身高 - 分数 - 通过/失败

通过/失败将是您的神经网络的标签。

# ios - 应用程序设置，特别是 Root.plist 已损坏。为什么？

> ID：10469058
> 
> 赞同：1
> 
> 时间：2012-05-06T07:59:02.040
> 
> 标签：ios, settings.bundle

我的应用程序今天通过 Xcode 运行时开始神秘地崩溃。我将问题跟踪到设置不可用，事实上，查看我的应用程序的设置应用程序，我看到：

![在此处输入图像描述](../Images/7502585e1a9bb42e0caf92da215cdcc4.png)

转到 Xcode 中的 Settings.bundle，特别是 Root.plist，我收到以下错误消息：

![在此处输入图像描述](../Images/005c7b7658796df6c95368caf1e00dfb.png)

因此，该文件已损坏。令人不安，但并不太担心。我得到了昨晚的文件副本（感谢 TimeMachine）。我在那个文件和我现在拥有的文件之间做了一个差异，我看不出有什么区别。我回去几天，直到找到一个不同的版本。不幸的是，那是我认真修改 root.plist 文件的时候，所以我在最新版本中找不到任何损坏的东西。

此外，该应用程序只会在以前从未安装过我的应用程序的新 iPhone 上崩溃。我的其他 iPhone 在通过 Xcode 运行同一个应用程序时不会崩溃，但都显示一个空的设置窗口，如上面的屏幕截图所示。我认为，尽管 root.plist 损坏，实际的 NSUSerDefaults 仍然存在于曾经有一个未损坏的 root.plist 的 iPhone 上，但在新 iPhone 上没有 NSUSerDefaults，这导致了我的一些坏事应用程序。

这是我的 plist 内容。你能发现任何损坏的东西吗？谢谢。（我已经检查了[SO: Empty Settings Bundle in Xcode 4.2](https://stackoverflow.com/questions/7162846/empty-settings-bundle-in-xcode-4-2)并没有帮助。）

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
    <key>PreferenceSpecifiers</key>
    <array>
        <dict>
            <key>Type</key>
            <string>PSGroupSpecifier</string>
        </dict>
        <dict>
            <key>Type</key>
            <string>PSMultiValueSpecifier</string>
            <key>Title</key>
            <string>Initial Magnification</string>
            <key>Values</key>
            <array>
                <integer>1</integer>
                <integer>2</integer>
                <integer>3</integer>
            </array>
            <key>Titles</key>
            <array>
                <string>1x</string>
                <string>2x</string>
                <string>3x</string>
            </array>
            <key>Key</key>
            <string>LuminInitialMagnificationKey</string>
            <key>DefaultValue</key>
            <integer>2</integer>
        </dict>
        <dict>
            <key>Type</key>
            <string>PSToggleSwitchSpecifier</string>
            <key>Title</key>
            <string>Large Lock Button</string>
            <key>Key</key>
            <string>LuminLockButtonEmphasis</string>
            <key>DefaultValue</key>
            <true/>
        </dict>
        <dict>
            <key>Type</key>
            <string>PSToggleSwitchSpecifier</string>
            <key>Title</key>
            <string>Picture-in-Picture Frame</string>
            <key>Key</key>
            <string>LuminOutlineEnabled</string>
            <key>DefaultValue</key>
            <true/>
        </dict>
        <dict>
            <key>Type</key>
            <string>PSGroupSpecifier</string>
            <key>Title</key>
            <string>Sound</string>
        </dict>
        <dict>
            <key>DefaultValue</key>
            <false/>
            <key>Key</key>
            <string>LuminFocusBeepKey</string>
            <key>Title</key>
            <string>Focus Beep</string>
            <key>Type</key>
            <string>PSToggleSwitchSpecifier</string>
        </dict>
        <dict>
            <key>Type</key>
            <string>PSGroupSpecifier</string>
            <key>Title</key>
            <string>Share Options</string>
        </dict>
        <dict>
            <key>Type</key>
            <string>PSChildPaneSpecifier</string>
            <key>Title</key>
            <string>Mail</string>
            <key>File</key>
            <string>EmailSettings</string>
        </dict>
        <dict>
            <key>Type</key>
            <string>PSChildPaneSpecifier</string>
            <key>Title</key>
            <string>Tweet</string>
            <key>File</key>
            <string>TweetSettings</string>
        </dict>
        <dict>
            <key>Type</key>
            <string>PSChildPaneSpecifier</string>
            <key>Title</key>
            <string>Facebook</string>
            <key>File</key>
            <string>FacebookSettings</string>
        </dict>
        <dict>
            <key>Type</key>
            <string>PSGroupSpecifier</string>
            <key>Title</key>
            <string>History</string>
            <key>FooterText</key>
            <string>Tagged images will not be deleted. Dropbox mirroring is queued until WiFi connectivity is available.</string>
        </dict>
        <dict>
            <key>Type</key>
            <string>PSMultiValueSpecifier</string>
            <key>Title</key>
            <string>Delay Before Saving</string>
            <key>Values</key>
            <array>
                <string>1</string>
                <string>3</string>
                <string>5</string>
                <string>7</string>
            </array>
            <key>DefaultValue</key>
            <string>3</string>
            <key>Titles</key>
            <array>
                <string>1 second</string>
                <string>3 seconds</string>
                <string>5 seconds</string>
                <string>7 seconds</string>
            </array>
            <key>Key</key>
            <string>LuminTimeToWaitBeforeHistoryKey</string>
        </dict>
        <dict>
            <key>Type</key>
            <string>PSTextFieldSpecifier</string>
            <key>Title</key>
            <string>Number of Images to Keep</string>
            <key>Key</key>
            <string>LuminNumberOfHistoryFilesKey</string>
            <key>DefaultValue</key>
            <string>100</string>
            <key>KeyboardType</key>
            <string>NumberPad</string>
        </dict>
        <dict>
            <key>DefaultValue</key>
            <false/>
            <key>Key</key>
            <string>LuminDropboxActive</string>
            <key>Title</key>
            <string>Mirror to Dropbox</string>
            <key>Type</key>
            <string>PSToggleSwitchSpecifier</string>
        </dict>
        <dict>
            <key>Type</key>
            <string>PSGroupSpecifier</string>
            <key>FooterText</key>
            <string>Lumin™ © 2011-2012 M. Zabetian & BitsOnTheGo.com.  All rights reserved.  Special Thanks to Tim Smith and AppliedDesign.tv.</string>
        </dict>
        <dict>
            <key>Type</key>
            <string>PSTitleValueSpecifier</string>
            <key>DefaultValue</key>
            <string>Unknown</string>
            <key>Title</key>
            <string>Version</string>
            <key>Key</key>
            <string>AppVersionStringKey</string>
        </dict>
    </array>
    <key>StringsTable</key>
    <string>Root</string>
</dict>
</plist> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T23:00:59.607

我已经解决了这个问题。我换了

> Zabetian & BitsOnTheGo.com

和

> Zabetian 和 BitsOnTheGo.com

我不得不使用另一个文本编辑器，因为 Xcode 不会打开该文件，因为它声称它已损坏。替换那个 & 符号后，Xcode 可以打开它，我可以构建和运行我的应用程序并查看完整的设置窗格。

不确定这是否算作 Xcode 中的错误。取决于在设置列表中使用“&”和类似的字符是否合法。不知道为什么不会。

# attributes - Concrete5 核心博客缩略图，我如何在其他作曲家上重用它

> ID：10469060
> 
> 赞同：1
> 
> 时间：2012-05-06T07:59:28.923
> 
> 标签：attributes, concrete5

Concrete5 默认带有 blog_entry 包。
此软件包包括具有宽度和高度限制的图像缩略图。我怎样才能将它与其他类型重用？所以我想建立一个不同的博客并使用这些缩略图。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T20:16:06.743

要使页面类型可用于 Composer 仪表板界面，请转到 Dashboard -> Pages & Themes -> Page Types，然后单击相应页面类型旁边的“Composer”按钮（然后根据您的需要选中相应的框设置）。

如果您想让某些内容字段也可用于数据输入，请单击页面类型旁边的“默认值”按钮（在“页面类型”仪表板页面中），然后将块添加到页面上的区域，然后单击块并选择“作曲家”，并选中该框以使其在作曲家界面中可用。

博客文章的“缩略图”在页面默认值中使用“图像”块，因此在您启用页面类型以使用作曲家后，转到页面默认值并将“图像”块添加到区域，那么我认为您可以编辑该块并设置一些默认尺寸。在退出编辑模式之前，单击图像块并选择“作曲家”并选中该框以使其可用于作曲家界面。现在，当您在 Composer 中编写新页面类型的新页面时，它应该会出现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T21:17:42.827

您需要为页面列表块创建一个自定义模板（然后将页面列表块放在您的博客“索引”页面上，然后在编辑模式下单击该块并从弹出菜单中选择“自定义模板”并选择您的列表中的自定义模板）。

以下是有关如何创建自定义模板的一般说明：

*   [http://www.concrete5.org/community/forums/usage/how-to-make-a-custom-template/](http://www.concrete5.org/community/forums/usage/how-to-make-a-custom-template/)
*   [http://www.concrete5.org/documentation/how-tos/designers/custom-block-templates-views/](http://www.concrete5.org/documentation/how-tos/designers/custom-block-templates-views/)
*   [http://concrete5studio.com/support/tutorials/creating-a-custom-template/](http://concrete5studio.com/support/tutorials/creating-a-custom-template/)

请注意，从 Concrete 5.5 开始，页面列表默认模板中的标记比上面链接中显示的更清晰、更易于使用。但是，如果您仍在使用 5.4 或更低版本，我在这里提供了一些块模板的更简洁版本（这实际上是更新版本的系统模板的来源）：

*   [https://github.com/jordanlev/c5_clean_block_templates](https://github.com/jordanlev/c5_clean_block_templates)

有关具体包含图像缩略图的说明，请参阅这些模板的注释。

# api - Google Apps API（日历 v3）返回 404 错误

> ID：10469063
> 
> 赞同：1
> 
> 时间：2012-05-06T07:59:55.883
> 
> 标签：api, calendar

在一周前我开始收到错误消息之前，我一直在使用 Google API (Calendar v3) 一段时间没有问题。我仍然可以授权，但我提出的任何请求都会返回 404 错误。我还尝试使用另一个 Google Apps 帐户并遇到了同样的问题。

```
// Load the API and make an API call.
function makeApiCall() {
    gapi.client.load('calendar', 'v3', function() { 
        var request = gapi.client.calendar.events.list({ 
            'calendarId': 'primary' 
        }); 
        request.execute(function(resp) { 
            console.log (resp);
        }); 
    }); 
} 
```

控制台日志是：代码：404 数据：数组 [1] 错误：对象消息：“未找到” **原型**：对象

# java - 比较 JUnit 中的列表。它成功了，但我没有覆盖equals。它是如何工作的？

> ID：10469064
> 
> 赞同：2
> 
> 时间：2012-05-06T07:59:56.740
> 
> 标签：java, unit-testing, list, collections, junit

我有一个具有如下原始字段的类：

```
public class Person{  
  String name;  
  int age;  
  int id;  
  int height;  
  public Person(String name, int age, int id, int height){  
      this.name = name;
      this.age = age;  
      this.id = id;  
      this.height = height;  
  } 
  //other methods
} 
```

我有不同的人想按年龄排序：

```
Person p87 = new Person("John", 87, 123, 185);  
Person p22 = new Person("George", 22, 12, 180);  
//etc  ....for other persons. Then I create a list of them
List<Person> persons= Arrays.asList(p87, p22, p45, p31, p55, p62 );  
Collections.sort(persons, new Comparator<Person>() {

            @Override
            public int compare(Person p1, person p2) {
                return p1.age - p2.age;
            }

        }); 
```

现在我想测试它是否已正确排序，所以我有一个 JUnit 测试用例，其中包含以下内容：

`assertEquals(Arrays.asList(p22, p31, p45, p55, p62, p87 ), persons);`

测试用例通过。所以它是排序的。
但我不明白这一点。将使用[List.equals](http://docs.oracle.com/javase/6/docs/api/java/util/List.html#equals%28java.lang.Object%29)`assertEquals`比较两个列表，该列表调用*每个包含的 object*。 问题是我没有在课堂上覆盖。 结果以下**失败**： `equals` *`equals``Person`* 

 ***```
Person p22 = new Person("George", 22, 12, 180);   
Person p22_2 = new Person("George", 22, 12, 180);    
assertEquals(p22, p22_2); 
```

我不明白这一点。那么为什么 2 列表在测试用例中是相等的呢？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-06T08:01:36.853

在您的第一个示例中，您没有创建*新*对象 - 您正在比较对*同一*对象的引用。这是有效的，因为默认实现`equals`是比较引用相等性。

你正在做相当于这个：

```
Person p22 = new Person("George", 22, 12, 180);   
Person p22_2 = p22;
assertEquals(p22, p22_2);   // works, because both refer to the same object 
```***

# c# - 如何创建返回条件类型的方法

> ID：10469067
> 
> 赞同：0
> 
> 时间：2012-05-06T08:00:21.797
> 
> 标签：c#

如果我的pictureboxstupic 包含图像，我在我的一个项目中有一个方法如下返回字节[]。虽然我想以这样一种方式转换它，如果pictureboxstupic中没有图片，它应该返回string =“NULL”，否则它应该返回bute []。我怎样才能做到这一点？？

```
private byte[] GetPic()
{
    using (var stream = new MemoryStream())
    {
        var bmp = new Bitmap(pictureboxstupic.Image);
        bmp.Save(stream, System.Drawing.Imaging.ImageFormat.Jpeg);
        stream.Position = 0;
        var data = new byte[stream.Length];
        stream.Read(data, 0, data.Length);
        return data;
    }
} 
```

注意：我插入图像的列如下

```
CREATE TABLE [dbo].[Students] 
([Photo] [image] NULL) 
```

在我目前的情况下，我将图像插入到我上面提到的列中，即 Student.Photo 像这样

```
if (pictureboxstupic.Image == null)
{
    cmd.Parameters.Add("@Photo", SqlDbType.VarChar).Value = "NULL";
}
else
{
cmd.Parameters.Add("@Photo", SqlDbType.Image).Value = GetPic();
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-06T08:03:25.887

您可能总是返回对象并将其转换为您期望的类型 - 但这不是一个好主意。最好在调用方法之前检查pictureboxstupic 是否为空，然后执行正确的逻辑（例如分配“NULL”）。

您也可以对[TryParse](http://msdn.microsoft.com/en-us/library/f02979c7.aspx)应用类似的语义- 也就是说，如果 pictureboxstupic 不为空，您可能会返回 bool 并返回字节数组作为输出参数。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-06T08:19:22.093

@empi 的答案是正确的，我想对其进行扩展：方法和函数应该有一组严格定义的职责。就您的`GetPic`方法而言，它是获取图像的字节流。这应该是该方法中封装的逻辑的范围。

在某些错误框中显示单词“NULL”*不是* `GetPic`我们的责任。调用它的人负责显示图像或错误消息。这就是为什么我认为如果不接收图像是一个合理的条件就`GetPic`应该返回`null`，或者如果它是一个破坏程序流程的真正错误条件，甚至可能抛出异常。

在任何情况下你*都不应该*做的是返回一个`object`可以是`byte[]`or`string`的，因为这违背了强类型环境的全部要点，并且是稍后引入错误的好方法。如果您必须返回 a`byte[]`或 a `string`，您可以使用`ref/out`其他人建议的参数，或者创建一个名为 的新类`ImageData`，或者其他包含字节和错误消息的类，您可以使用它来检索一个或其他。

- 编辑

在你澄清之后，我仍然会坚持我的回答。你*不应该那样*做。数据库支持与字符串“NULL”不同*的NULL 值。*而不是插入此字符串，您应该确保您的列可以为空，并插入空值 - `DBNull.Value`。您当前的代码将崩溃，因为 Photo 列无法处理 VarChar 值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-06T08:03:44.160

`object`而是返回？然后通过首先使用`is`关键字检查类型来进行强制转换。

```
if(returnedType is string) //or use as and then check for NULL
{

}
else   //type is byte[]
{
} 
```

不确定您的用例以及它是否有效，但这可能是一个解决方案

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-06T08:08:01.540

您可以通过三种解决方案来实现：

1.) 使用对象作为返回类型

2.) 使用 'ref' 和 'out' 参数说明符返回数组并使方法返回类型字符串用于返回状态消息。

3.) 对指针使用“不安全”代码...

例子：

```
 public string GetPic(out byte[] ret)
    {
        if (Image == null)
            return "NULL";
        //set ret's value as image bytes
        return "ok";
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-06T08:26:07.163

你可以这样做：

```
 //call the method:
        string str = ""; //variable that will be changed accordingly by returned value
        byte[] image = GetPic();
        if (image.Length == 0)
        {
            //do what ever you want, like string = "NULL":
            str = "NULL";
        }
    //
    //

    private byte[] GetPic()
    {
        PictureBox pictureboxstupic = new PictureBox();
        using (var stream = new MemoryStream())
        {
            var bmp = new Bitmap(pictureboxstupic.Image);
            bmp.Save(stream, System.Drawing.Imaging.ImageFormat.Jpeg);
            stream.Position = 0;
            var data = new byte[stream.Length];
            stream.Read(data, 0, data.Length);
            return data;
        }
    } 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-05-06T11:48:26.173

我用这个方法解决了我的问题：

```
private object GetPic()
{
    if(pictureboxstupic.Image == null)
    {
        return null;
    }
    using (var stream = new MemoryStream())
    {
        var bmp = new Bitmap(pictureboxstupic.Image);
        bmp.Save(stream, System.Drawing.Imaging.ImageFormat.Jpeg);
        stream.Position = 0;
        var data = new byte[stream.Length];
        stream.Read(data, 0, data.Length);
        return data;

    }
} 
```

用法：

```
cmd.Parameters.Add("@Photo", SqlDbType.Image).Value = GetPic() ?? DBNull.Value; 
```

# c++ - 点网格上的内存泄漏（Valgrind）

> ID：10469069
> 
> 赞同：0
> 
> 时间：2012-05-06T08:00:40.333
> 
> 标签：c++, memory-leaks, valgrind

我正在使用 mapPixel 的概念创建一个地图网格（一个 2D 离散点），一个类：

```
class MapPixel
{
    friend class Map;
protected:
    int x;
    int y;
    float height;
    float vegetation;

    std::vector<const MapPixel*> neib;
...methods declaration, default constructor/destructor 
```

其中 neib 是指向其他 MapPixels 的指针列表，与 then 相邻。

我正在使用该方法

```
void MapPixel::addNeib(const MapPixel* neib_)
{
    neib.push_back(neib_);
} 
```

添加指向 neiber 像素的指针以构建图形（由于边界的 neibs 少于中心像素，因此此列表取决于大小）。

我的程序是有一个带有成员的类 Map

```
MapPixel **pixels; 
```

在构造函数 Map::Map() 中使用

```
pixels = new MapPixel*[width];
for (int i = 0; i < width; i++)
    pixels[i] = new MapPixel[height]; 
```

我使用 MapPixel::addNode() 方法来构建网络（例如）

```
pixels[i][j].addNeib(&pixels[i][j+1]); 
```

在 Map::~Map() 我按相反的顺序删除 MapPixel （不删除 neibs 以避免双重释放）：

```
for (int i = 0; i < width; i++)
    delete pixels[i];
delete pixels; 
```

Valgrind 说有几个像这样的大内存泄漏：

```
2,509,088 bytes in 39,205 blocks are possibly lost in loss record 4,071 of 4,071
  in MapPixel::addNeib(MapPixel const*) in Source/mappixel.cpp:52
  1: malloc in vg_replace_malloc.c:266
  2: operator new(unsigned long) in /usr/lib/libstdc++.6.0.9.dylib
  3: __gnu_cxx::new_allocator&lt;MapPixel const*&gt;::allocate(unsigned long, void const*) in ...
  4: std::_Vector_base&lt;MapPixel const*, std::allocator&lt;MapPixel const*&gt; &gt;::_M_allocate(unsigned long) in stl_vector.h:131
  5: std::vector&lt;MapPixel const*, std::allocator&lt;MapPixel const*&gt; &gt;::_M_insert_aux(__gnu_cxx::__normal_iterator&lt;MapPixel const**, std::vector&lt;MapPixel const*, std::allocator&lt;MapPixel const*&gt; &gt; &gt;, MapPixel const* const&amp;) in vector.tcc:271
  6: std::vector&lt;MapPixel const*, std::allocator&lt;MapPixel const*&gt; &gt;::push_back(MapPixel const* const&amp;) in stl_vector.h:608
  7: MapPixel::addNeib(MapPixel const*) in mappixel.cpp:52 
```

所有与第 52 行有关：

```
neib.push_back(neib_); 
```

有谁明白这一点？现在我对是否可以使用 std::vector 来构建像素的 neibs 失去信心。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T08:22:52.353

请注意，valgrind 说“*可能*丢失”，而不是“*肯定*丢失”。区别很重要。有关确切含义，请参见[此处](http://valgrind.org/docs/manual/faq.html#faq.deflost)。

该错误与`vector<>`实现代码分配的块有关，最有可能随着`vector`增长而调整包含元素的内存块的大小。如果您正在分配实例`MapPixel`并忘记释放它们，您可能会得到这些，因为包含`vector`将无法释放其内存，但您也会收到有关您自己的代码的错误。

除非！当您释放`pixels`阵列时，您使用的是`delete[]`or`delete`吗？

更新：您正在使用`delete`. 你需要使用`delete[]`. 这确实是内存泄漏。你分配的任何东西都`new[]`必须用 释放`delete[]`，否则只会为第一个元素调用正确的析构函数（甚至是编译器自动生成的析构函数）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T18:50:25.297

正如已经提到的另一个答案，内存泄漏很可能是由错误的`delete`运算符引起的。[在构造函数中，您使用operator new[]](http://www.cplusplus.com/reference/std/new/operator%20new%5B%5D/)创建一个数组数组：

```
pixels = new MapPixel*[width];
for (int i = 0; i < width; i++)
  pixels[i] = new MapPixel[height]; 
```

您需要使用相应的数组删除[运算符 delete[]](http://www.cplusplus.com/reference/std/new/operator%20delete%5B%5D/)释放数组的内存：

```
for (int i = 0; i < width; i++)
  delete [] pixels[i];
delete [] pixels; 
```

但是，我建议您改为使用嵌套`std::vector`的像素矩阵。这样您就可以免费获得内存管理。

```
std::vector<std::vector<MapPixel> > pixels;
// in constructor something like:
pixels.resize(width, std::vector<MapPixel>(height));
// nothing to do in destructor 
```

对于您的邻居，我不会使用 std::vector，而是使用普通的`MapPixel *neib[8];`（假设为摩尔社区）或更确切地说是`std::array<MapPixel*, 8> neib;`. 但我不知道您可能对这个项目有什么其他要求。

除了内存管理，使用 STL 容器还有其他好处，例如，方便的成员函数，它们不会衰减为指针，仅举几例。

# c# - 如何编写事件日志类别

> ID：10469073
> 
> 赞同：7
> 
> 时间：2012-05-06T08:01:25.630
> 
> 标签：c#, windows, event-log

众所周知，我们可以使用 EventLog 类来编写事件日志，但我对如何在事件日志中写入类别名称感到困惑。虽然它提供了类别参数，例如，WriteEntry 的类型之一是：

```
public void WriteEntry(
string message,
EventLogEntryType type,
int eventID,
short category 
```

)
它只是在我的日志中显示数字。为什么类别的类型是短的，而不是字符串？如何在事件查看器中显示类别名称？谢谢！顺便说一句，我们不会创建自定义 CategoryMessageFile。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-06T08:53:17.127

您可以编写具有给定类别的事件日志条目，但您需要使用在事件日志中注册的字符串资源表创建一个额外的本机 dll。这确实使您的部署更加复杂。您当前必须在安装期间执行

1.  要创建新的事件日志源，您需要在每次创建新源时拥有管理员权限。因此，收集所有源代码是明智的，这样您就可以在初始安装期间立即安装。
2.  创建一个本机 dll，其中包含您要提供的每个类别 ID 的字符串资源表。
3.  在注册表中注册类别 dll 以使 Windows 知道它。

现在您可以使用重载来编写具有给定类别的事件日志消息。

有一篇非常好的[Dr. Jobs Journal 文章](http://www.drdobbs.com/184405714)准确描述了您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T23:01:26.717

不要使用 WriteEntry，你会得到一个安全异常。安装后不需要管理员权限。

改用 WriteEvent 参见：[https ://security.stackexchange.com/q/15857/396](https://security.stackexchange.com/q/15857/396)

# php - 将表单输入的 id 和值保存在数组中

> ID：10469075
> 
> 赞同：0
> 
> 时间：2012-05-06T08:01:42.320
> 
> 标签：php

我制作了一个界面，用户可以在其中创建自己的表单。我刚刚设法将该表单加载到一个单独的 php 文件中。

我想知道的是，在发布表单后，如何捕获数组中输入的所有 id 和值，以便我可以显示表单（只读）并将其显示在另一个页面上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T08:09:14.203

如果您的`<form>` `method`属性是`post`- 您将 POST 请求发送到服务器。您可以通过`$_POST`like访问所有 POST 数据`var_dump($_POST);`。

如果您的`<form>` `method`属性是`get`或者您没有`method`设置 - 您将 GET 请求发送到服务器。您可以通过`$_GET`like访问所有 GET 数据`var_dump($_GET);`。

无论哪个输入字段在表单中 - 它们都将在这里。

```
$post = array();

foreach($_POST as $key => $value) {
 $post[$key] => $value;
} 
```

但是这个例子不太好。它不受 SQL 注入的保护 - 请注意它。但是有了它，您可以获取`$post`数组中的所有 $_POST 数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T08:15:56.043

当您发布表单时，您拥有“数组”`$_GET`或`$_POST`根据方法（但您可以使用`$_REQUEST`它同时获取发布和获取“参数”），其中您拥有处理表单内容所需的所有数据。PHP [array_keys](http://www.php.net/manual/en/function.array-keys.php)返回为表单中每个字段指定的名称的键。使用循环中的每个键，您可以对该字段的“内容”进行某种处理，您可以使用循环中的当前键进行检索；例如

```
 foreach(array_keys($_GET) as $a)
  {
      echo $a . " => " . $_GET[$a];
  } 
```

# jquery - 使用 Fancybox 时删除 Wordpress 中的侧边栏

> ID：10469083
> 
> 赞同：0
> 
> 时间：2012-05-06T08:03:39.430
> 
> 标签：jquery, fancybox, wordpress

我在这里为 Wordpress 使用 fancybox：[http](http://www.nawair.dk/?gallery=299-2) ://www.nawair.dk/?gallery=299-2 我真的很想删除侧边栏，并试图删除这个 php 行：在这个文件中：nawair.dk /wp-content/themes/portfolio-press/gallery-template.php，但这无济于事。请问有人有什么建议吗？任何帮助将不胜感激！最好的，延斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T07:38:40.863

WordPress 中的“侧边栏”或“小部件区域”由两部分组成。侧边栏定义及其实现。

侧边栏的定义创建了您从小部件管理面板中看到的名称和描述，并允许主题定义侧边栏的包装标记。这是通过`register_sidebar()` [`register_sidebars()`](http://codex.wordpress.org/Function_Reference/register_sidebars)函数完成的。第二个显然用于一次注册多个侧边栏。这通常在 functions.php 中完成 - 但实际上这可以在主题中的任何模板上完成，甚至可以通过插件完成。

侧边栏的实现是在您希望它显示和内联的模板上完成的。用于此的函数是[`dynamic_sidebar()`](http://codex.wordpress.org/Function_Reference/dynamic_sidebar)，唯一需要传递的参数是`'name'`边栏在定义时给出的参数。

要删除神秘的侧边栏，请查看 Widget 管理面板并找出其名称，查看 functions.php 以删除其定义，然后查找其实现以将其也删除。如果在明显的位置找到一个或两个都没有，只需在整个主题中搜索`'dynamic_sidebar'`和/或`'register_sidebar`- 或者更简单，只需搜索边栏本身的名称，这应该会返回定义和实现。

注意：我意识到您可能只想将它从您使用 fancybox 画廊的特定页面中删除，据我所知（通过检查页面的源代码）是 post_type 'gallery' 的单个帖子。如果这是您希望删除的唯一类型的地方，并且您的侧边栏位于一些通用模板（如“index.php”）上，那么您可能只想用条件标签将其包装起来：

```
if(is_single() && 'gallery' == get_post_type()){
   dynamic_sidebar('Your Sidebar');
} 
```

当然我猜测你想要的条件，所以请查看[WordPress Codex 中的条件标签页面](http://codex.wordpress.org/Conditional_Tags)

# php - 将数字列表随机插入表格

> ID：10469086
> 
> 赞同：0
> 
> 时间：2012-05-06T08:04:17.750
> 
> 标签：php, mysql, sql

我有一个 1-20,000 之间的数字列表。我希望将所有这些数字*随机*插入一个表中，并且只插入一次。我怎样才能做到这一点？

例如对于 1-10，它们将按以下顺序插入，而不是 1、2、3、4

9 3 5 1 2 4 6 ..等

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T08:06:04.147

使用[shuffle()](http://php.net/manual/en/function.shuffle.php)

```
$arr = <numbers 1-20K>

shuffle($arr);

<code to insert into sql> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T08:13:11.870

您可以使用 Knuths 或 Floyds 算法来实现这一点，然后将所有数字存储在数据库中。阅读此 SO 问题以了解两种实现：

[C编程语言中整数数组中的唯一随机数](https://stackoverflow.com/questions/1608181/unique-random-numbers-in-an-integer-array-in-the-c-programming-language)

一个提示，确保不要将每个生成的数字都保存到数据库中，您应该批量插入。

# php - 正则表达式和大小写

> ID：10469089
> 
> 赞同：0
> 
> 时间：2012-05-06T08:04:32.657
> 
> 标签：php, regex, case-insensitive

我在用这个

```
preg_match('/<meta\s+http-equiv="Content-Type" content="([^;]+)(?:;\s*charset=["]?([^"^\s]*))?"/i', $html, $match) 
```

获取**字符集**，但这不适用于此

```
<META http-equiv=Content-Type content="text/html; charset=windows-1256"> 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T08:08:25.250

[您在preg_match()](http://www.php.net/manual/en/function.preg-match.php)中有双引号，但在 html 示例中没有。

这里：**http-equiv=Content-Type**

如果您想支持 preg_match() 在此处使用和不使用引号，只需将代码更改为：

```
preg_match('/<meta\s+http-equiv=(")?Content-Type(")?\s+content="([^;]+)(?:;\s*charset=["]?([^"^\s]*))?"/i', $html, $match); 
```

当属性顺序改变时可以使用的更好的版本：

```
preg_match('/<meta.+?content="([^;]+)(?:;\s*charset=["]?([^"^\s]*))?"/i', $html, $match); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T08:12:23.337

如果您只对获取字符集感兴趣，为什么不使用更简单的东西，例如：

```
preg_match('/charset=([^"]+)/i', $html, $match); 
```

当然，您可以对其进行调整以满足您的特定需求，但要保持简单，让它工作起来会容易得多。

# java - 如何在 Eclipse 动态 Web 项目中读取配置文件？

> ID：10469090
> 
> 赞同：0
> 
> 时间：2012-05-06T08:04:42.833
> 
> 标签：java, servlets, configuration, web, web.xml

我知道有一个名为 web.xml 的配置文件我想要实现的是拥有另一个具有应用程序特定配置的配置文件，并且必须在启动 Web 服务器时读取它。我还希望一个类能够读取此配置。有没有办法我可以配置这是 web.xml 文件本身还是有另一种方式

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T08:47:53.493

您可以使用 Apache Commons 配置。看看[用户指南](http://commons.apache.org/configuration/userguide/user_guide.html)。由于您希望它在启动时完成，这里是一个示例 ServletContextListener：

```
package test;

import java.io.File;
import java.net.MalformedURLException;
import java.util.logging.Level;
import java.util.logging.Logger;
import javax.servlet.ServletContext;
import javax.servlet.ServletContextEvent;
import javax.servlet.ServletContextListener;
import org.apache.commons.configuration.Configuration;
import org.apache.commons.configuration.ConfigurationException;
import org.apache.commons.configuration.XMLConfiguration;

public class ConfigurationListener implements ServletContextListener {

    @Override
    public void contextInitialized(ServletContextEvent sce) {
        ServletContext context = sce.getServletContext();
        File configFile;

        try {
            configFile = new File(context.getResource("/WEB-INF/configuration.xml").getPath());
            Configuration config = new XMLConfiguration(configFile);
            context.setAttribute("configuration", config);
        } catch (ConfigurationException | MalformedURLException ex) {
            Logger.getLogger(ConfigurationListener.class.getName()).log(Level.SEVERE, null, ex);
        }
    }

    @Override
    public void contextDestroyed(ServletContextEvent sce) {}
} 
```

现在在您的 Web 应用程序中的任何位置获取您的配置，如下所示：

```
Configuration config = (Configuration) request.getServletContext().getAttribute("configuration"); 
```

我会创建一个类来保存配置，而不是将其作为属性添加到 ServletContext。该类将简单地通过静态方法提供对配置的访问。

# xml - 如何使用 XSLT 基于节点属性拆分 XML 文件？

> ID：10469094
> 
> 赞同：2
> 
> 时间：2012-05-06T08:04:55.957
> 
> 标签：xml, xslt, split

如果我有这个输入文件：

```
<root> 
    <node id="N1">
        <fruit id="small_fruit">
            <orange id="1" action="create">
                <attribute>
                    <color>yellow</color>
                </attribute>
            </orange>
        </fruit>

        <fruit id="large_fruit" action="create">
            <melon id="1" action="destroy">
                <attribute>
                    <color>green</color>
                </attribute>
            </melon>
        </fruit>            
    </node>

    <node id="N2">
        <dog id="small_dog">    
            <poodle id="1" action="create">
                <attribute>
                    <color>Yellow</color>    
                </attribute>
            </poodle>       

            <poodle id="1" action="change">
                <attribute>
                    <color>Brown</color>        
                </attribute>
            </poodle>

            <terrier id="2" action="destroy">
                <attribute>
                    <color>Blue</color>    
                </attribute>
            </terrier>
        </dog>                          
    </node>
</root> 
```

我需要分成两个文件： **output1: node_destroy.xml**

```
<root> 
    <node id="N1">          
        <fruit id="large_fruit" action="create">
            <melon id="1" action="destroy">
                <attribute>
                    <color>green</color>
                </attribute>
            </melon>
        </fruit>            
    </node>

    <node id="N2">
        <dog id="small_dog">                
            <terrier id="2" action="destroy">
                <attribute>
                    <color>Blue</color>    
                </attribute>
            </terrier>
        </dog>                          
    </node>
</root> 
```

**输出2：node_other_than_destroy.xml**

```
<root> 
    <node id="N1">
        <fruit id="small_fruit">
            <orange id="1" action="create">
                <attribute>
                    <color>yellow</color>
                </attribute>
            </orange>
        </fruit>                  
    </node>

    <node id="N2">
        <dog id="small_dog">    
            <poodle id="1" action="create">
                <attribute>
                    <color>Yellow</color>    
                </attribute>
            </poodle>       

            <poodle id="1" action="change">
                <attribute>
                    <color>Brown</color>        
                </attribute>
            </poodle>
        </dog>                          
    </node>
</root> 
```

基本上，我需要将带有 action='destroy' 的节点删除到一个文件中，而将其他带有其他操作的节点删除到另一个文件中。（**选中的动作节点是甜瓜、贵宾犬、梗犬而不是它们的父母，即水果和狗**）

请帮我处理转换文件。非常感谢。

问候，约翰

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T10:15:48.747

您使用哪种 XSLT 处理器？如果那是像 Saxon 9 或 AltovaXML 或 XmlPrime 这样的 XSLT 2.0 处理器，那么您可以[使用`xsl:result-document instruction`](http://www.w3.org/TR/xslt20/#creating-result-trees). 对于 XSLT 1.0 处理器，您需要检查处理器是否支持扩展指令来创建多个结果文档。因此，请告诉我们您使用哪种处理器，然后我们可以为您的输入样本和所需的输出样本建议具体的代码样本。

[编辑] 我准备了一个 XSLT 2.0 示例：

```
<xsl:stylesheet
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  xmlns:xs="http://www.w3.org/2001/XMLSchema"
  exclude-result-prefixes="xs"
  version="2.0">

  <xsl:param name="action" as="xs:string" select="'destroy'"/>

  <xsl:strip-space elements="*"/>
  <xsl:output indent="yes"/>

  <xsl:template match="/">
    <xsl:result-document href="node_{$action}.xml">
      <xsl:apply-templates/>
    </xsl:result-document>
    <xsl:result-document href="node_other_than_{$action}.xml">
      <xsl:apply-templates mode="other"/>
    </xsl:result-document>
  </xsl:template>

  <xsl:template match="@* | node()" mode="#all">
    <xsl:copy>
      <xsl:apply-templates select="@* , node()" mode="#current"/>
    </xsl:copy>
  </xsl:template>

  <xsl:template match="/*/*[*/*[@action = $action]] 
                       | /*/*/*[*[@action = $action]]">
    <xsl:next-match/>
  </xsl:template>

  <xsl:template match="/*/*[not(*/*[@action = $action])] 
                       | /*/*/*[not(*[@action = $action])]
                       | /*/*/*/*[not(@action = $action)]"/>

  <xsl:template match="/*/*[*/*[not(@action = $action)]] 
                       | /*/*/*[*[not(@action = $action)]]" mode="other">
    <xsl:next-match/>
  </xsl:template>

  <xsl:template match="/*/*[not(*/*[not(@action = $action)])] 
                       | /*/*/*[not(*[not(@action = $action)])]
                       | /*/*/*/*[@action = $action]" mode="other"/>

</xsl:stylesheet> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-06T15:32:25.383

**在 XSLT 1.0 中，没有一种方法可以从一次转换的执行中创建多个输出**。

**下面是两个单独的 XSLT 1.0 转换**：

第一个只产生结果`action="destroy`：

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="node()|@*">
     <xsl:copy>
       <xsl:apply-templates select="node()|@*"/>
     </xsl:copy>
 </xsl:template>

 <xsl:template match="node[not(*/*/@action = 'destroy')]"/>
 <xsl:template match="node/*[not(*/@action = 'destroy')]"/>

 <xsl:template match="node/*/*[not(@action = 'destroy')]"/>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档时**：

```
<root>
    <node id="N1">
        <fruit id="small_fruit">
            <orange id="1" action="create">
                <attribute>
                    <color>yellow</color>
                </attribute>
            </orange>
        </fruit>

        <fruit id="large_fruit" action="create">
            <melon id="1" action="destroy">
                <attribute>
                    <color>green</color>
                </attribute>
            </melon>
        </fruit>
    </node>

    <node id="N2">
        <dog id="small_dog">
            <poodle id="1" action="create">
                <attribute>
                    <color>Yellow</color>
                </attribute>
            </poodle>

            <poodle id="1" action="change">
                <attribute>
                    <color>Brown</color>
                </attribute>
            </poodle>

            <terrier id="2" action="destroy">
                <attribute>
                    <color>Blue</color>
                </attribute>
            </terrier>
        </dog>
    </node>
</root> 
```

**产生了想要的正确结果：**

```
<root>
   <node id="N1">
      <fruit id="large_fruit" action="create">
         <melon id="1" action="destroy">
            <attribute>
               <color>green</color>
            </attribute>
         </melon>
      </fruit>
   </node>
   <node id="N2">
      <dog id="small_dog">
         <terrier id="2" action="destroy">
            <attribute>
               <color>Blue</color>
            </attribute>
         </terrier>
      </dog>
   </node>
</root> 
```

**第二个转换产生所有“非破坏”内容：**

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="node()|@*">
     <xsl:copy>
       <xsl:apply-templates select="node()|@*"/>
     </xsl:copy>
 </xsl:template>

 <xsl:template match="node[not(*/*/@action[not(. = 'destroy')])]"/>
 <xsl:template match="node/*[not(*/@action[not(. = 'destroy')])]"/>

 <xsl:template match="node/*/*[@action = 'destroy']"/>
</xsl:stylesheet> 
```

**当此转换应用于同一个 XML 文档（如上）时，会产生所需的结果：**

```
<root>
   <node id="N1">
      <fruit id="small_fruit">
         <orange id="1" action="create">
            <attribute>
               <color>yellow</color>
            </attribute>
         </orange>
      </fruit>
   </node>
   <node id="N2">
      <dog id="small_dog">
         <poodle id="1" action="create">
            <attribute>
               <color>Yellow</color>
            </attribute>
         </poodle>
         <poodle id="1" action="change">
            <attribute>
               <color>Brown</color>
            </attribute>
         </poodle>
      </dog>
   </node>
</root> 
```

* * *

**二、XSLT 2.0 解决方案——在同一个转换中创建两个输出文件：**

```
<xsl:stylesheet version="2.0"
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    xmlns:xs="http://www.w3.org/2001/XMLSchema">
    <xsl:output omit-xml-declaration="yes" indent="yes"/>

 <xsl:template match="node()|@*" mode="destroyed non-destroyed">
     <xsl:copy>
       <xsl:apply-templates select="node()|@*" mode="#current"/>
     </xsl:copy>
 </xsl:template>

 <xsl:template match="/">
   <xsl:variable name="vResultDestroyed">
     <xsl:apply-templates mode="destroyed"/>
   </xsl:variable>
   <xsl:variable name="vResultNonDestroyed">
     <xsl:apply-templates mode="non-destroyed"/>
   </xsl:variable>

   <xsl:for-each select="1 to 2">
     <xsl:result-document
        href="file:///c:temp/delete/{'non-'[position()=current()]}destroyed.xml">
      <xsl:copy-of select=
       "($vResultNonDestroyed, $vResultDestroyed)[position() = current()]"/>
     </xsl:result-document>
   </xsl:for-each>
 </xsl:template>

 <xsl:template mode="destroyed" match="node[not(*/*/@action = 'destroy')]"/>
 <xsl:template mode="destroyed" match="node/*[not(*/@action = 'destroy')]"/>
 <xsl:template mode="destroyed" match="node/*/*[not(@action = 'destroy')]"/>

 <xsl:template mode="non-destroyed"  match="node[not(*/*/@action[not(. = 'destroy')])]"/>
 <xsl:template mode="non-destroyed"  match="node/*[not(*/@action[not(. = 'destroy')])]"/>
 <xsl:template mode="non-destroyed"  match="node/*/*[@action = 'destroy']"/>
</xsl:stylesheet> 
```

**当使用 Saxon 9.1.07 运行此转换时，正确的输出将写入文件**：

`C:\Program Files\Java\jre6\bin\temp\delete\destroyed.xml`

和

`C:\Program Files\Java\jre6\bin\temp\delete\non-destroyed.xml`

# javascript - YouTube ajax，.replace() 不起作用

> ID：10469095
> 
> 赞同：0
> 
> 时间：2012-05-06T08:05:10.803
> 
> 标签：javascript, jquery, ajax, replace, jsonp

我正在使用下面的 jquery，并且在 var video_tags=data.tags 中添加 .replace(",", " ") 不会返回值。如何用空格替换逗号。

## [http://jsfiddle.net/hJGe4/1/](http://jsfiddle.net/hJGe4/1/)

```
$(document).ready(function () {
    $(".search_input").focus();
    $(".search_input").keyup(function () {
        $("#video").html('');
        var search_input = $(this).val();
        var keyword = encodeURIComponent(search_input);
        var yt_url = 'http://gdata.youtube.com/feeds/api/videos?q=' + keyword + '&format=5&max-results=6&v=2&alt=jsonc';
        $.ajax({
            type : "GET",
            url : yt_url,
            dataType : "jsonp",
            success : function (response) {
                if (response.data.items) {
                    $.each(response.data.items, function (i, data) {
                        var video_title = data.title;
                        var video_tags = data.tags.replace(",", " ");
                        var final = video_title + '<br/>' + video_tags + '<br/><br/><br/>';
                        $("#video").append(final);
                    });
                } else {
                    $("#video").html("<div id='no'>No Video</div>");
                }
            }
        });
    });
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T08:08:44.320

`var video_tags=data.tags.replace(",", " ");`

应该

`var video_tags=data.tags.join(" ");`

***[演示](http://jsfiddle.net/hJGe4/5/)***

# google-app-engine - 如何存储包含使用 GAE 和 Objectify 的列表的类列表的类？

> ID：10469097
> 
> 赞同：1
> 
> 时间：2012-05-06T08:05:24.883
> 
> 标签：google-app-engine, objectify

我有一个类似于以下的 Java 模型：

```
public class Country {
    @Id private String id;
    private CurrencyId currencyId;
    private List<Province> provinceList;
    ...
}

public class Province {
    @Id private String id;
    private Gobernor gobernorId;
    private List<City> cityList;
    ...
}

public class City {
    @Id private String id;
    private String name;
    ...
} 
```

我想**使用 objectify**存储该数据。但是，由于国家/地区数据可能会更改，我还想存储国家/地区数据的存储日期，所以我认为我应该存储一个实体，例如：

```
public class CountryListEntity {
    @Id private String id;
    private List<Country> countryList;
    private Date storeDate;
} 
```

请注意，如果我可以这样存储它，我将只有一个 ID 为“root”的 CountryListEntity 实体。我对谷歌应用程序如何存储数据以及objectify如何工作都知之甚少。我尝试了许多@Embedded 的组合，但我遇到了很多错误，即

> 不能将数组或集合属性放在 @Embedded 数组或集合中

谁能告诉我如何定义这些类？非常感谢存储和检索此“根”实体所需的代码片段！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T19:11:39.213

@Embedded 集合被转换为低级实体中的一系列集合字段。这就是为什么你只能做一层嵌入。

如果您要一次存储/加载所有数据，并且如果您的实体与示例中的实体一样简单，则可以将列表的 @Serialized 注释放在 @Embedded 列表中。

[您可以从此讨论](https://groups.google.com/forum/?fromgroups#!searchin/objectify-appengine/Embed%2420list/objectify-appengine/QoUyEqUfrpc/qIYeiD5BZtAJ)中了解更多信息。

这种方法的问题是您的低级嵌入将无法被索引。

```
public class CountryListEntity {
    @Id private String id;

    @Embedded 
    private List<Country> countryList;

    private Date storeDate;
}

public class Country implements Serializable {
    private String id;
    private CurrencyId currencyId;

    @Serialized
    private List<Province> provinceList;
    // ...
}

public class Province implements Serializable {
    private String id;
    private Gobernor gobernorId;

    @Serialized
    private List<City> cityList;
    // ...
}

public class City implements Serializable {
    private String id;
    private String name;
    // ...
} 
```

# php - 无法通过单击同一页面上的删除按钮从数据库中删除用户

> ID：10469113
> 
> 赞同：0
> 
> 时间：2012-05-06T08:08:29.453
> 
> 标签：php, mysql

我搜索了解决方案，但没有任何效果。

```
<?php

$result = mysql_query("SELECT username, EmailAddress FROM users", $connection);

echo "<form method='post'><table class='mecz' cellpadding='0' cellspacing='0' border='0'>
<tr>
<th>user names:</th>
<th>address e-mail</th>
<th></th>
</tr>";

while($row = mysql_fetch_array($result))
{
echo "<tr align='center'>";
echo "<td>" . $row['username'] . "</td>";
echo "<td>" . $row['EmailAddress'] . "</td>";
echo "<td><input class='delete' type='submit' name='delete' value='usuń' /></td>";
echo "</tr>";
}
echo "</table></form>"; 
```

//这是我尝试从表单传递删除操作的一部分

```
?>
<?php

if (($_POST['username'] != "") && (isset($_POST['delete'])))  
{
$username = $_POST['username']; 
$query = "DELETE FROM users WHERE username = '".$username."' AND '".$_POST['delete']."'";
$result = mysql_query($query,$connection);
echo mysql_error();
}

?> 
```

我认为解决方案不是很复杂，但我找不到，请帮忙。

谢谢，克里斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T08:13:36.637

1.  您没有发送`username`您发布的代码，因此`$_POST['username']`未设置，因此未执行删除。

2.  即使您输入`if`-block，您的删除查询也没有多大意义 - 应该`AND '".$_POST['delete']."'`怎么做？那部分似乎很无意义。

3.  您尝试制作一个包含多个提交按钮的表单（每个用户一个）。在服务器端，当整个表单作为一大堆数据发送时，您无法确定按下了哪个提交按钮。您将需要每个用户一个表单或简单地使用链接（`a`-elements）来发送`delete`- 和 -`username`值（但请注意，在后一种情况下，您会做`GET`而不是`POST`-requests）

4.  您没有`action`为您的表单指定 a - 这可能是您的问题，也可能不是问题，请参阅有关此问题的各种评论以获取更多信息。

5.  [您的 delete-query 对sql-injections](http://en.wikipedia.org/wiki/SQL_injection)完全开放。请考虑使用[准备好的语句](http://en.wikipedia.org/wiki/SQL_injection)或至少[`mysql_real_escape_sting`](http://www.php.net/manual/en/function.mysql-real-escape-string.php)避免这种情况。

这只是真正的问题点，它们会阻止您的代码完全工作或留下尴尬的安全漏洞。此外，有些事情是不必要的或某种混乱的（例如`mysql_error`每次调用而不是仅在查询失败时才这样做 - 但也许您只是为了调试而添加了它）。

总的来说，您似乎应该再次开始阅读一本好书或一些详细的教程，以刷新和扩展您对 php/mysql/html 的基本理解。

# python - 如何确保字符串在 python 中正确返回？

> ID：10469125
> 
> 赞同：0
> 
> 时间：2012-05-06T08:10:26.343
> 
> 标签：python, data-structures, return, return-type

我正在构建一些代码，它会从字符串的开头和结尾删除任何非数字条目，我对以下代码有一个非常令人困惑的问题：

```
def String_Trim(Raw_String):
        if Raw_String[0].isdigit() == False:
            New_String = Raw_String[1:]
            String_Trim(New_String)
        elif Raw_String[-1].isdigit() == False:
            New_String = Raw_String[:-1]
            String_Trim(New_String)
        else:
            print Raw_String
            return Raw_String

print(String_Trim('ab19fsd')) 
```

Raw_String 的初始打印工作正常并显示我想要的值 (19)，但由于某种原因，尝试打印 String_Trim 的返回值的最后一行返回 None。python到底在做什么，我该如何解决？任何其他关于改进我的代码的评论也将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T08:14:42.380

为此使用正则表达式。修剪字符串的递归确实不是一个好主意：

```
import re

def trim_string(string):
  return re.sub(r'^([^0-9]+)(.*?)([^0-9]+)$', r'\2', string) 
```

分解它，正则表达式 ( `r'^([^0-9]+)(.*?)([^0-9]+)$'`) 是这样的：

*   `^`匹配字符串的开头。
*   `([^0-9]+)`匹配一组连续的非数字字符。
*   `(.*?)`匹配一组东西（非贪婪）。
*   `([^0-9]+)`匹配另一组连续的非数字字符。
*   `$`匹配字符串的结尾。

替换字符串 ,`r'\2'`只是说只用第二组替换匹配的字符串，这是两组非数字字符之间的东西。

* * *

但是，如果您*确实*确定要使用现有解决方案，则需要了解递归的实际工作原理。当您调用 时`return foo`，该函数将`foo`作为其输出返回。如果你不打电话`return`，你会`None`自动返回。

话虽如此，您需要`return`在递归过程的每种情况下，而不仅仅是在最后：

```
def String_Trim(Raw_String):
    if Raw_String[0].isdigit() == False:
        New_String = Raw_String[1:]
        return String_Trim(New_String)
    elif Raw_String[-1].isdigit() == False:
        New_String = Raw_String[:-1]
        return String_Trim(New_String)
    else:
        print Raw_String
        return Raw_String 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T08:20:39.783

您仅在内部的一种情况下返回一个值`StringTrim`。`return`在递归调用前面添加：

```
 return String_Trim(New_String) 
```

那应该解决它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-06T08:26:21.230

如果我正确理解您的问题，您只想返回字符串中的数字；因为“从头到尾修剪任何非数字”对我来说听起来像“只返回数字”。

如果这是正确的，你可以这样做：

```
''.join(a for a in 'abc19def' if a.isdigit()) 
```

# vim - Vim：在替换之前以交互方式检查发生了什么？

> ID：10469129
> 
> 赞同：4
> 
> 时间：2012-05-06T08:10:58.480
> 
> 标签：vim

`vim`有非常强大的命令工具。我可以用 'Set' 代替所有 'Array'：

```
:%s/Array/Set/g 
```

但是我可以作为 Unix 命令（例如`rm`）以交互方式执行此操作吗？我希望`vim`问我是否真的要替换一个词，而不是一次全部替换。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-06T08:18:50.467

是的，您可以通过附加另一个命令来做到这一点：

```
:%s/Array/Set/gc 
```

# properties - jars、外部属性和外部文件 io

> ID：10469132
> 
> 赞同：0
> 
> 时间：2012-05-06T08:11:41.477
> 
> 标签：properties, io, executable-jar

我检查了很多类似的问题，但到目前为止我对解决方案不满意。

曾经使用过 Minecraft 服务器吗？在初始启动时，它会创建它需要的所有文件和文件夹，并允许您通过使它们位于可执行 jar 文件的外部来对 Server.properties 和 ops.txt 等文件进行更改。

我正在做一个类似的项目，我想复制这种行为。当我在 Eclipse 中运行它时，一切都很好。但是，当我导出到 jar 文件时，事情变得很奇怪。外部文件和文件夹的创建很顺利，但事后看来，它们似乎无法读取或写入。任何想法 Notch 如何制作他的服务器？

--edit-- 从头开始​​，它甚至似乎不能可靠地创建文件和文件夹。也许它只会在创建后的第一次运行中创建它们？

--edit again-- 它在根目录中创建它们。当我在eclipse中测试它时，根目录被限制在包含项目的文件夹中，因此看起来很好。解决方案是让类知道它的位置，并将其包含在所有文件操作中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T02:25:48.003

让可执行 jar 文件中的主类查找它的位置，然后让它将该信息存储在全局字符串或其他东西中。在文件操作中使用该字符串为文件名添加前缀，瞧！它正在写入正确的目录。

# django - django - 从 urls.py 访问 GET 变量

> ID：10469136
> 
> 赞同：1
> 
> 时间：2012-05-06T08:12:59.663
> 
> 标签：django, django-urls, django-haystack, geodjango

我是第一次实现 django-haystack，需要进行地理空间搜索。是否可以从 urls.py 访问用户输入？

我遵循了 haystack 文档，并且能够使用

```
from django.conf.urls.defaults import *
from haystack.forms import ModelSearchForm, HighlightedSearchForm
from haystack.query import SearchQuerySet
from haystack.views import SearchView
from haystack.views import SearchView, search_view_factory

**sqs = SearchQuerySet().all()**

urlpatterns = patterns('haystack.views',
url(r'^$', search_view_factory(
    view_class=SearchView,
    template='search/search.html',
    searchqueryset=sqs,
    form_class=HighlightedSearchForm
    ), name='haystack_search'),
) 
```

我需要做**sqs = SearchQuerySet().dwithin('location', user_location, D(mi=5))**

其中 user_location 将是用户输入并将通过 GET 变量传递，有什么方法可以在这里访问它吗？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T08:34:43.680

检查[如何在 Django 中从 urls.py 访问 HttpRequest](https://stackoverflow.com/questions/4838480/how-to-access-httprequest-from-urls-py-in-django)

然后你的代码看起来像

```
urlpatterns = patterns('haystack.views',
url(r'^$', lambda request, *args, **kwargs: search_view_factory(
    view_class=SearchView,
    template='search/search.html',
    searchqueryset=SearchQuerySet().dwithin('location', request.GET.get('user_location'), D(mi=5)),
    form_class=HighlightedSearchForm
    ), name='haystack_search')(request, *args, **kwargs),
) 
```

通常最好显式地编写一个视图来调用相应的搜索视图。

# php - 增量字符有效，但添加无效。为什么？

> ID：10469147
> 
> 赞同：6
> 
> 时间：2012-05-06T08:14:36.577
> 
> 标签：php

```
$a = 'a';
print ($a+1);
print ($a++);
print $a; 
```

输出是：`1 a b`

所以很明显，增量运算符完成了它的工作，但我不明白为什么输出是 '1' in case `$a+1`。谁能解释一下？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-06T08:17:53.010

PHP 不是 C，所以`'a' + 1`也不是`'b'`。

`'a'`在数字上下文中是`0`, 和`0+1 = 1`.

```
php> echo (int)'a';
0 
```

后缀/前缀增量运算符*确实*像 C 字符一样工作，这一事实似乎是 PHP 的一个讨厌的“功能”。特别是因为在这种情况下减量运算符是无操作的。

当你增加`'z'`它会变得更糟：

```
php> $a = 'z';
php> echo ++$a
aa 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-06T08:18:40.380

原因是 PHP 以特定于上下文的方式处理变量。它有点类似于 Visual Basic。

该表达式`'a' + 1`使用数学加法。在这种情况下`a`被解释为一个数字，所以它会被认为是 0（如果你熟悉 C，这就像将字符串 "a" 输入`atoi()`）。

如果您使用表达式`'a' . 1`，结果将是`a1`由于它使用字符串连接。

要获得您期望的结果 ( `b`)，您必须使用`chr(ord('a') + 1)`，其中`ord()`显式返回（第一个）字符的 ASCII 值。

`$a++`是一种特殊情况，本质上是查看 ascii 值而不是值本身作为变量的重载。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-06T08:20:40.923

从[http://php.net/manual/en/types.comparisons.php](http://php.net/manual/en/types.comparisons.php)，“a”+1 被执行为 0+1。有些语言 (C#) 会将 (string)+(int) 翻译成 (string)+(string)，而 PHP 则相反：(int)+(int)。

改为强制字符串连接：`"a" . 1`产生'a1'。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-06T08:20:13.717

当您执行加法时，PHP 会尝试将 'a' 转换为整数。就像你在 C 中使用 atoi 一样，'a' 被解释为 0。因此 0 + 1 是 1。

# xaml - 在 WinRT 中绑定到 UserControl

> ID：10469154
> 
> 赞同：2
> 
> 时间：2012-05-06T08:15:55.070
> 
> 标签：xaml, windows-8, windows-runtime, winrt-xaml

我创建了一个简单的 Rating 用户控件，当我使用绑定时，这个控件在 WinRT 中不起作用的问题，它在 windows phone 上运行良好，这是我的控件：

```
public sealed partial class RatingControl : UserControl
{
    public int Rate { get { return (int)GetValue(RateProperty); } set { SetValue(RateProperty, value); } }
    public static readonly DependencyProperty RateProperty = DependencyProperty.Register("Rate",
                                                                    typeof(int),
                                                                    typeof(RatingControl), null);
    public RatingControl()
    {
        this.InitializeComponent();
        this.Loaded += RatingControl_Loaded;
    }

    void RatingControl_Loaded(object sender, RoutedEventArgs e)
    {
        List<Image> Images = new List<Image>();
        for (int i = 0; i < 5; i++)
        {
            Image img = new Image { Width = 35, Height = 35, Margin = new Thickness(3) };
            img.Source = new BitmapImage { UriSource = new System.Uri("ms-appx:Images/Stars/notFilled.png") };
            Images.Add(img);
            sp.Children.Add(img);
        }
        for (int i = 0; i < Rate; i++)
            Images[i].Source = new BitmapImage { UriSource = new System.Uri("ms-appx:Images/Stars/Filled.png") };
    }
} 
```

当我对值进行硬编码时，它可以正常工作：

```
<local:RatingControl Rate="3" /> 
```

但是当我使用绑定时，它只显示零星。我检查了 Rate 的值，它总是为零。

```
<local:RatingControl Rate="{Binding Decor, Mode=TwoWay}" /> 
```

更新：我刚刚发现绑定发生在我得到 Rate 的值之前，所以它一直为零。我该如何解决？我需要在获得值后进行绑定。我还认为每次更改 Rate 值时都会发生绑定。

解决方案：我没有正确实现 DependencyObject，我应该这样做：

```
public static readonly DependencyProperty RateProperty = DependencyProperty.Register("Rate",
                                                                    typeof(int),
                                                                    typeof(RatingControl), new PropertyMetadata(0, new PropertyChangedCallback(BindRateControl))); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-12T06:11:19.100

解决方案：我没有正确实现 DependencyObject，我应该这样做（添加回调方法）：

```
public static readonly DependencyProperty RateProperty = DependencyProperty.Register("Rate",
                                                                typeof(int),
                                                                typeof(RatingControl), 
                                                                new PropertyMetadata(0, new PropertyChangedCallback(BindRateControl))); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T16:39:51.750

您是否尝试从代码隐藏中添加 UserControl。这可以帮助您确保在获取值后触发 UserControl。

# java - Java 以纯文本形式登录

> ID：10469157
> 
> 赞同：12
> 
> 时间：2012-05-06T08:17:09.180
> 
> 标签：java, logging, java.util.logging

我使用以下代码将 Java Logger 重定向到登录文件：

```
Handler handler = new FileHandler("test.log", LOG_SIZE, LOG_ROTATION_COUNT);
Logger.getLogger("").addHandler(handler); 
```

但它以 XML 格式记录。我想完全像输出（即纯文本）。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-06T08:22:35.697

您需要在处理程序上设置[格式化](http://docs.oracle.com/javase/7/docs/api/java/util/logging/Formatter.html)程序。创建您自己的或使用[SimpleFormatter](http://docs.oracle.com/javase/7/docs/api/java/util/logging/SimpleFormatter.html)

# c# - asp.net mvc 3 razor 登录视图不返回请求的 url

> ID：10469170
> 
> 赞同：0
> 
> 时间：2012-05-06T08:18:54.253
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, razor

登录后，用户不会返回到请求的 URL。

这是**控制器**：

```
 public ActionResult LogIn()
    {
        return View();
    }

    [HttpPost]
    public ActionResult LogIn(LoginModel model, string returnUrl)
    {
        if (ModelState.IsValid)
        {
            if (UserIsValid(model.Username, model.Password))
            {
                if (model.RememberMe == false)
                {

                }
                else
                {
                    FormsAuthenticationTicket ticket = new FormsAuthenticationTicket(1,
                        model.Username,
                        DateTime.Now,
                        DateTime.Now.AddDays(15),
                        false,
                        "user",
                        FormsAuthentication.FormsCookiePath);

                    string HashedCoockies = FormsAuthentication.Encrypt(ticket);
                    HttpCookie cookie = new HttpCookie(FormsAuthentication.FormsCookieName, HashedCoockies);
                    Response.Cookies.Add(cookie);

                    if (Url.IsLocalUrl(returnUrl) && returnUrl.Length > 1 && returnUrl.StartsWith("/")
                            && !returnUrl.StartsWith("//") && !returnUrl.StartsWith("/\\"))
                    {
                        return Redirect(returnUrl);
                    }
                    else
                    {
                        return RedirectToAction("Index", "Home");
                    }
                }
            }
            else
            {
                ModelState.AddModelError("", "The user name or password is incorrect.");
            }
        }

        return View(model);
    } 
```

**看法：**

```
 @using (Html.BeginForm())
 {
                <label for="username">
                    Username:</label>
                <br />
                @Html.TextBoxFor(model => model.Username)
                <br />
                <br />
                <label for="password">
                    Password:</label>
                <p>
                    <a href="#">Forgot your password?</a></p>
                @Html.PasswordFor(model => model.Password)
                <br />
                <br />
                <div id="lower">
                    <br />
                    <br />
                    @Html.CheckBoxFor(model => model.RememberMe, new { style = "margin-left: 10px; margin-top: 7px; position: absolute;" })
                    <label for="check" id="keep" style="margin-left: 30px; margin-top: -14px;">
                        Keep me logged in</label>
                    <input type="submit" value="Login" class="round-button" style="float: right; margin-right: 20px;" />
                </div>
} 
```

和**web.config**

```
<authentication mode="Forms">
    <forms loginUrl="~/account/login" timeout="2880" />
</authentication> 
```

ps 我的 login.cshtml 没有 _Layout.html

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T09:22:19.687

returnUrl 可以为空。当 url 采用这种格式时，returnUrl 将有一个值

[http://localhost:56457/Account/LogIn?returnUrl=whatever_return_url](http://localhost:56457/Account/LogIn?returnUrl=whatever_return_url)

当您尝试访问whatever_return_url（在访问之前需要授权）时，它会将您重定向到添加了returnUrl的登录页面（意味着您之前没有登录）

这意味着如果您的登录成功，它应该带您whatever_return_url。如果未指定 returnUrl（即：如果 returnUrl 为空），它应该在登录后将您带到“Home”控制器的“Index”操作。

[http://localhost:56457/Home/Index](http://localhost:56457/Home/Index)

Check thoroughly your controller, action names and the validity of the URLs

# android - Android :: 如何断开与 wifi 网络的连接？

> ID：10469173
> 
> 赞同：14
> 
> 时间：2012-05-06T08:19:42.303
> 
> 标签：android, wifi

我用谷歌搜索并发现许多网站都说“禁用 Wifi 无线电”。但在我的情况下，我只希望 android 设备从特定的 wifi 网络（SSID 预先知道）断开而不关闭 WiFi 无线电。请给我一些关于这个问题的见解

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-06-06T09:28:02.857

哇，这不应该花一个月的时间来回答。

这是我通常使用的最简单的方法：

```
 WifiManager wifi = (WifiManager) getSystemService(Context.WIFI_SERVICE);
 wifi.disconnect();
 discon = new DisconnectWifi();
 registerReceiver(discon, new IntentFilter(WifiManager.SUPPLICANT_STATE_CHANGED_ACTION)); 
```

DisconnectWifi只是扩展BroadcastReceiver的一个小类：

```
 public class DisconnectWifi extends BroadcastReceiver  {

    @Override
    public void onReceive(Context c, Intent intent) {
        if(!intent.getParcelableExtra(wifi.EXTRA_NEW_STATE).toString().equals(SupplicantState.SCANNING)) wifi.disconnect();
        }
    } 
```

# html - 我需要一些帮助来在 CSS 中对齐我的导航栏

> ID：10469181
> 
> 赞同：1
> 
> 时间：2012-05-06T08:21:23.163
> 
> 标签：html, css

我对网页设计相当陌生，但非常了解它。只是，当涉及到数学时，我完全迷失了 OO 我为导航栏所做的几乎是我创建了一个精灵，现在正在使用精灵的两个不同部分来创建悬停链接的效果超过。哦，顺便说一句，我也用 span 标签屏蔽了超链接，所以是的。因此，如果有人可以请帮助我，这是我的乐队页面[http://atfamusic.hostei.com/#](http://atfamusic.hostei.com/#)（在 Firefox idky 中效果最好，仍然需要解决这个问题），所以没有太多关于它的内容。代码是（用于CSS）

```
#navigation { margin:0; padding:0; width:900px; height:50px;
              background-image:url(navigation-background.gif); }

#navigation li { margin:0; padding:0; list-style-type:none; display:inline; height:44px;
                 text-align:center; float:left; line-height:40px; }

#navigation a { display:block; height:44px; }
#navigation a:hover { background-image:url(navigation-background.gif); }

#nav-bio {width:81px; }
#nav-bio a:hover { background-position:85px bottom; }

#nav-photos { width:116px; }
#nav-photos a:hover { background-position:-166px bottom ; }

#nav-music { width:102px; }
#nav-music a:hover { background-position:-197px bottom ; }

#nav-videos { width:108px; }
#nav-videos a:hover { background-position:-278px bottom; }

#nav-external sites { width:202px; }
#nav-external sites a:hover { background-position:-556px bottom; }

#nav-merch { width:120px; }
#nav-merch a:hover { background-position:-1112px bottom; }

#navigation span { display:none; } 
```

所以是的请帮助。哦，如果有人能弄清楚为什么标题在 Internet Explorer 中没有对齐，那就太好了！:)

PS如果愿意做额外的中心导航栏以及 \m/ 那会很棒。对不起，如果我很烂并且是新手：P

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T11:01:41.783

嗨@xripper，下面的 HTML 和 CSS 将解决您的导航问题。我从 ul li a 中删除了标签，因为它们不是必需的，而是使用 css 缩进文本，这意味着屏幕阅读器等仍然可以访问 a。

```
<ul id="navigation">
    <li id="nav-bio"><a href="#">Bio</a></li>

    <li id="nav-photos"><a href="#">Photos</a></li>

    <li id="nav-music"><a href="#">Music</a></li>

    <li id="nav-videos"><a href="#">Videos</a></li>

    <li id="nav-externalsites"><a href="#">External Sites</a></li>

    <li id="nav-merch"><a href="#">Merch</a></li>
</ul> 
```

并且以下 css 将修复您在导航上的精灵

```
ul#navigation {
    margin: 0 auto;
    padding: 0;
    width: 900px;
    height: 50px;
    background-image: url(navigation-background.gif);
    }

    ul#navigation li {
        margin: 0;
        padding: 0;
        list-style-type: none;
        display: inline;
        height: 50px;
        text-align: center;
        float: left;
        line-height: 40px;
        position: relative;
        }

        ul#navigation li a {
            display: block;
            height: 50px;
            text-indent: -999em;
            }

        ul#navigation li a:hover {
            background: url(navigation-background.gif) bottom left no-repeat;
            }

    ul#navigation li#nav-bio {
        width: 81px;
        margin-left: 84px;
        }

        ul#navigation li#nav-bio a:hover {
            background-position: -84px bottom;
            }

    ul#navigation li#nav-photos {
        width: 116px;
        }

        ul#navigation li#nav-photos a:hover {
            background-position: -165px bottom;
            }

    ul#navigation li#nav-music {
        width: 102px;
        }

        ul#navigation li#nav-music a:hover {
            background-position: -281px bottom;
            }

    ul#navigation li#nav-videos {
        width: 108px;
        }

        ul#navigation li#nav-videos a:hover {
            background-position: -383px bottom;
            }

    ul#navigation li#nav-externalsites {
        width: 202px;
        }

        ul#navigation li#nav-externalsites a:hover {
            background-position: -491px bottom;
            }

    ul#navigation li#nav-merch {
        width: 120px;
        }

        ul#navigation li#nav-merch a:hover {
            background-position: -693px bottom;
            } 
```

我相信这将跨浏览器工作，但我目前无法访问 IE。让我知道它是否对您有用，如果没有，我会尝试再次提供帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T09:16:29.387

```
`enter code here`plz use this css

For bio
#nav-bio {
    width: 166px;
}
#nav-bio a:hover {
    background-position: 0px 90%;
}

For Photos
#nav-photos a:hover {
    background-position: 734px 90%;
}

For music
#nav-music a:hover {
    background-position: -282px 90%;
}

For Videos
#nav-videos a:hover {
    background-position: -384px 90%;
}
For external(plz change the class name in html code)
#nav-external {
    width: 201px;
}
#nav-external a:hover {
    background-position: -492px 90%;
}

for merch
#nav-merch {
    width: 120px;
}
#nav-merch a:hover {
    background-position: -693px 90%;
} 
```

# android - HandlerThread 是如何处理消息的？

> ID：10469186
> 
> 赞同：1
> 
> 时间：2012-05-06T08:22:36.507
> 
> 标签：android, handler, surfaceview

我正在实现我自己的[SurfaceView](http://developer.android.com/reference/android/view/SurfaceView.html)，它包含一个 Thread 对象，其目的是将各种图形对象绘制到 Canvas 上。在我的 SurfaceView 的构造函数中，我设置了要绘制的对象，并且 Thread 对象（当前）仅将它们适当地定位到 Canvas。

在用户执行特定操作（即线程对象正在运行）之后，我现在需要更改在 SurfaceView 的构造函数中创建的对象之一（对象是位图）。这意味着应用程序的 GUI 线程和执行我的 Thread 对象的线程之间的通信。我发现[这个](http://developer.android.com/reference/android/os/HandlerThread.html)页面详细介绍了[HandlerThread](http://developer.android.com/reference/android/os/HandlerThread.html)类的使用，非常适合我需要实现的目标。但是我需要确定这个类是如何工作的，以确保没有内存一致性错误。

以下是我自己的类的伪代码，为了清楚起见，去掉了很多内容：

```
public MyThread extends Thread {
    boolean _run = true;
    public void run(){

        // Create HandlerThread object
        // Create Looper object
        // Create Handler object
        while (_run){
            // DRAW the Bitmap in this loop
        }
    }

    public boolean handleMessage(Message message){
        /*
        ALTER the Bitmap here as required
        */
    }
}

public MyThread extends Thread {
    boolean _run = true;
    public void run(){

        // Create HandlerThread object
        // Create Looper object
        // Create Handler object
        while (_run){
            // DRAW the Bitmap in this loop
        }
    }

    public boolean handleMessage(Message message){
        /*
        ALTER the Bitmap here as required
        */
    }
} 
```

据我了解，该`handleMessage()`方法由执行该`run()`方法的同一线程执行。但是，因为`handleMessage()`更改位图而绘制位`run()`图。我可以确定`handleMessage()`在线程返回`run()`方法之前将全部完成吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-03T00:08:09.723

不知道我是否理解这个问题？？

在这两种情况下，您都在扩展一个常规的 Thread 类，它本身并没有做任何特别的事情。进程以序列化方式执行，除非您另有指定`run`并`handleMessage`从不同的 CALLING 线程运行。所以我的猜测是肯定的。这应该是一个相当简单的线程安全执行模式——如果你在同一个线程中调用`handleMessage`，`run`那么没有理由不应该同步它们。如果您从不同的线程调用这两种方法，（或者如果您非常担心并且无法在其他任何地方找到答案），您始终可以通过使用`synchronized(myLock)`以下两种方法来锁定对象监视器：

```
public MyThread extends Thread {
    boolean _run = true;
    public void run(){
        synchronized(this) {
            while (_run){
            // DRAW the Bitmap in this loop
            }
        }
    }

    public boolean handleMessage(Message message){
        synchronized(this){...}
    }
} 
```

# c++ - 是否可以使用 C++ 在 Linux 上开发可加载内核模块（LKM）？

> ID：10469188
> 
> 赞同：19
> 
> 时间：2012-05-06T08:23:15.353
> 
> 标签：c++, c, linux-kernel

当我开发可加载内核模块 (LKM) 时，我应该使用 C 吗？

是否可以在 Linux 上使用 C 以外的语言（例如 C++）开发可加载内核模块（LKM）？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-06T08:29:38.580

在某种程度上可能是可能的，但请注意（来自[http://www.tux.org/lkml/#s15-3](http://www.tux.org/lkml/#s15-3)）：

> *用 C++ 编写新驱动程序是个好主意吗？* 简短的回答是否定的，因为内核中不支持 C++ 驱动程序。
> 
> *为什么不在内核中添加一个 C++ 接口层来支持 C++ 驱动程序呢？* 简短的回答是为什么要麻烦，因为没有任何适用于 Linux 的 C++ 驱动程序。

我认为最好的办法是查阅现有资源（有一些内核驱动书籍，包括在线免费的一本），它们都是用 C 语言编写的，弄清了基础知识，然后你可以尝试看看是否可以让 c++ 工作那里。

但我非常怀疑这会很容易。您甚至无法访问内核中的完整 C 标准库。需要考虑的事情：它不链接到共享库，并且总可执行映像通常为 2-3 MB。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-13T11:39:33.900

我很确定我在某个地方看到了一个内核配置选项，允许在内核模块中使用 C++，不久前（但无法再次找到它）。我可以看到某些模板在驱动程序模块中使用会非常有趣。只是为了轶事：OS X Mach 内核部分是用 C++ 编写的。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-06T08:26:33.917

最后归结为目标代码，由汇编程序生成并随后链接在一起。

所以是的，有可能，你在[这里](http://kerneltrap.org/node/2067)找到一个关于这个的辩论。

这取决于你想用 LKM 做什么，你想将它用于自己和一些实验，还是它会在任何地方变得富有成效？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-03-26T19:33:35.583

有一个操作系统正在用 C++ 重写 Linux 内核，它被称为 Boss-Mool，您可以使用 C++ 编写驱动程序。这是链接：[https ://www.bosslinux.in/boss-mool](https://www.bosslinux.in/boss-mool)

* * *

## 回答 #5

> 赞同：-6
> 
> 时间：2014-03-03T19:47:02.403

好吧，最初的问题是针对 Linux 的，而不是针对 OS X 或 Windows 之类的。

绝对没有办法用 C++ 编写 Linux 内核模式驱动程序！那是因为您需要与不会与您的模块链接的 libstdc++ 链接。libstdc++ 不适用于内核模式，就这么简单！

# javascript - 如何将两个函数的代码与不同的参数结合起来？

> ID：10469199
> 
> 赞同：1
> 
> 时间：2012-05-06T08:26:23.460
> 
> 标签：javascript, jquery

我有以下两个功能：

```
function mvcOnFailure(message) {

    $.modal({
        title: "MVC Error",
        closeButton: true,
        content: message,
        ...
    });
}

function ajaxOnFailure(ajaxContext) {

    $.modal({
        title: "Ajax Error",
        closeButton: true,
        content: ajaxContext.responseText,
        ...
    });
} 
```

他们都做同样的事情（省略了一些行），但采用不同的论点。有什么方法可以组合这些功能。我在想的是以某种方式拥有一个功能来完成大部分工作，例如打开对话框，然后让另外两个从中继承。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T08:29:53.900

> 我在想的是以某种方式拥有一个功能来完成大部分工作，例如打开对话框，然后让另外两个从中继承。

不是*继承*，但是是的，将公共代码放在第三个函数中并从其他两个函数中*调用它。*非常粗略：

```
function mvcOnFailure(message) {

    doTheCommonStuff("MVC Error", message /*, other, stuff */);
}

function ajaxOnFailure(ajaxContext) {

    doTheCommonStuff("Ajax Error", ajaxContext.responseText /*, other, stuff */);
}

function doTheCommonStuff(title, content /*, other, stuff */) {
    $.modal({
        title: title,
        closeButton: true,
        content: content
        ...
    });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T08:31:08.293

您可以对两个回调使用相同的函数。您所要做的就是检查您的参数，例如在这种情况下，我会尝试查看它是一个对象还是一个字符串（不熟悉 MVC，但我认为它会是一个对象）。

然而，这可能很棘手（甚至不可能），并且它可以被认为是错误的编码（本质上是传递一个控制变量选择要执行的代码），因此保留函数但调用通用函数来格式化/创建输出可能是更好的解决方案.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-06T08:55:46.167

我想`message`参数是差异。因此，应该可以将这两个功能合二为一：

```
function mvcOrAjaxOnFailure(message) {
    $.modal({
        title: message.responseText ? "Ajax (XHR) Error" : "MVC Error",
        closeButton: true,
        content: message.responseText || message,
        ...
    });
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-06T09:36:20.137

在 ES5 中，您不仅可以使用[bind](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function/bind)来创建具有不同上下文对象的新函数，还可以执行柯里化（http://en.wikipedia.org/wiki/Currying）：

```
function displayModal(title, message) {
    $.modal({
        title: title,
        closeButton: true,
        content: message,
        ...
    });
}

var mvcOnFailure = displayModal.bind(undefined, "MVC Error");
var ajaxOnFailure = displayModal.bind(undefined, "Ajax Error"); 
```

现在您有两个新`displayModal`函数，其中第一个参数 ( `title`) 已设置。因此，例如，当您致电时：

```
mvcOnFailure("foo"); 
```

“foo”将是`message`参数，并`title`自动成为“MVC 错误”。

# php - 1 周后从 MySQL 数据库中删除记录

> ID：10469203
> 
> 赞同：1
> 
> 时间：2012-05-06T08:27:11.327
> 
> 标签：php, mysql, html, phpmyadmin

我想知道如何在 1 周后从 MySQL 数据库中删除记录

这是我用于插入记录和添加日期的代码

```
INSERT INTO moviesdone VALUES ('" . $id2 . "', NOW()) 
```

其中 $id 是我正在插入并希望在 1 周后删除的名称。

我也想自动执行此操作，我可以在 phpMyAdmin 中进行设置

所以，我只需要知道：如何正确写入日期（如果需要）以及如何在一周后删除记录？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-06T08:29:43.743

定期运行此代码，例如每天一次：

```
DELETE FROM moviesdone 
WHERE datetimecol < NOW() - INTERVAL 7 DAY 
```

您可以使用 [事件调度程序](http://dev.mysql.com/doc/refman/5.5/en/events.html)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-06T08:33:43.960

如果您使用的是 MySQL 5.1.6 或更高版本，您可以使用[`CREATE EVENT`](http://dev.mysql.com/doc/refman/5.1/en/create-event.html)

就像是

```
CREATE EVENT del_entries
ON SCHEDULE EVERY 1 DAY
DO
   DELETE FROM table WHERE DATEDIFF(NOW(), creation_date) >= 7; 
```

# django - 如何向 Mezzanine 项目添加新页面

> ID：10469206
> 
> 赞同：1
> 
> 时间：2012-05-06T08:27:35.237
> 
> 标签：django, django-cms, mezzanine

我在 Django 中使用 Mezzanine - CMS，我想为用户帐户创建一个页面。该页面的链接需要添加到顶部栏导航。用户帐户页面没有很多功能，有点类似于关于页面。

我一直在尝试环顾四周，但还没有真正弄清楚如何为新页面添加 url 和模板。谁能给我指出正确的方向，这样我就可以开始了。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T15:38:05.057

这是在评论上下文中对问题的回答，以允许标记已回答的问题。

模板中的用户名——标准 Django，只要您在模板上下文中使用请求

[https://docs.djangoproject.com/en/dev/topics/http/shortcuts/#render](https://docs.djangoproject.com/en/dev/topics/http/shortcuts/#render)

看法：

```
render(request, template, context) 
```

模板：

```
{% if user.is_authenticated %}{{ user.first_name }} {{ user.last_name }}{% endif %} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-24T01:30:42.050

我最近对此有点问题，并且在没有真正答案的情况下不断遇到这个问题。这个答案可以为我节省几个小时。

所以在 2017 年，答案是在[这里](https://docs.djangoproject.com/en/1.11/topics/db/models/)阅读 Django 文档。仅仅浏览 Mezzanine 文档是没有希望的，因为他们认为在使用他们的东西之前你已经很了解 Django。

您可以通过加载 django 设置并通过执行类似操作创建新模型实例来执行与任何模型相同的操作，例如添加已包含在夹层中的页面，如 Link、Richtext 等（即[此处](http://mezzanine.jupo.org/docs/content-architecture.html)列出的文档） ：

```
python manage.py shell
>>> from mezzanine.pages.models import Link
>>> pageLink = Link()
>>> pageLink.set_slug("/PageName")
>>> pageLink.title("Page Name")
>>> pageLink.save() 
```

所有这一切都是通过调用 manage.py shell 加载 django 项目，然后将模型的实例作为其背后数据库的 API。调用 save 提交更改并准备好进行迁移。

```
python manage.py makemigrations && python manage.py migrate 
```

# java - java.io.IOException：Android 设备上没有剩余空间

> ID：10469207
> 
> 赞同：8
> 
> 时间：2012-05-06T08:27:48.157
> 
> 标签：java, android, io, filesystems, ioexception

我们在 android 市场上有应用程序，我们的用户从这个错误中得到了很多： **java.io.IOException: No space left on device**

从我目前发现的情况来看，我知道他们在外部存储上留有足够的空间，而且这只发生在 Android 2.x 上。

我对Linux文件系统做了一个小研究，发现除了空间限制之外，每个目录中的文件数和根目录下的文件总数都有限制。但看起来我们的应用程序没有达到任何这些。

*   你有过这样的事情吗？
*   关于 Android (2.x) 中发生了什么变化以及他们如何在 Android (3+) 中修复它的任何想法？

**编辑：**这不是安装问题，而是在尝试保存下载的文件时。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-06T10:52:16.733

添加导致异常的绝对文件路径的日志输出可能会有所帮助。

如果写入的文件被写入本地内存文件系统而不是 sd 卡文件系统，这是一个可能的解决方案：

`java.io.IOException: No space left on device`**我的意思是设备的内部存储文件系统**上没有足够的内存。

您可以尝试**在 sd 卡上****安装**应用程序，方法是在清单文件中设置一个条目：

 **```
 <manifest ..... android:installLocation="preferExternal"> 
```

编辑

如果应用程序安装在内部存储器中，它的本地文件也存储在本地存储器中。如果应用程序安装在 sd-cardit 上，则它的本地文件也存储在 sd-card 上。

因此在 sd 卡上安装应用程序可能会解决您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T08:35:43.633

我相信（如果我不正确的话）在所有空间用完后打开大文件或任何超过永久存储最大值的文件可能会遇到问题。例如：直到我用完设备上的所有空间直到最后一点，我的 android 才打开没有任何问题。除非我升级或删除所有我最喜欢的歌曲和电影，否则它不会起作用。测试并尝试了它。但话又说回来，错误可能更灵活，也意味着其他东西......：D**

# iphone - Xcode 4.3.2 - 从文本字段引用到字符串成员

> ID：10469209
> 
> 赞同：0
> 
> 时间：2012-05-06T08:28:06.813
> 
> 标签：iphone, xcode, reference, textfield

我是 Xcode 和 Objective-C 的新手。我可以看到一个演示，它从视图上的文本字段对类的字符串成员进行了这样的引用，这样每当字符串更改时，文本字段的内容也会更改。但是这个演示不是最新的 Xcode，我找不到如何用 Xcode 4.3.2 做同样的事情。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T08:37:24.607

这与XCode无关，这是objective-c。XCode*只是*一个代码编辑器。

您正在寻找的是一个[观察者](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Protocols/NSKeyValueObserving_Protocol/Reference/Reference.html)。给你的 NSString 添加一个观察者，每当它发生变化时，你都可以更新你的 UITextField。我想我有一些代码可以做到这一点，我会看看我能不能找到它。

***编辑***
这是我曾经提出的问题的链接：[将观察者添加到 NSString](https://stackoverflow.com/questions/3281969/adding-an-observer-to-an-nsstring)

# string - 检查字符串是否只是字母（没有符号和数字）lisp

> ID：10469211
> 
> 赞同：2
> 
> 时间：2012-05-06T08:28:40.247
> 
> 标签：string, lisp

我需要检查一个单词是否只有字母示例“hfjel”返回真“df（f0”返回假

任何人都可以向我解释函数符号名称谢谢你的帮助

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-06T08:44:12.137

有一个方便的标准函数可以满足[`alpha-char-p`](http://www.lispworks.com/documentation/HyperSpec/Body/f_alpha_.htm#alpha-char-p)您的要求。

```
CL-USER(1): (alpha-char-p #\a)
T
CL-USER(2): (alpha-char-p #\Γ)
T
CL-USER(3): (alpha-char-p #\α)
T
CL-USER(4): (alpha-char-p #\0)
NIL
CL-USER(5): (alpha-char-p #\.)
NIL 
```

您可以结合使用它[`every`](http://www.lispworks.com/documentation/HyperSpec/Body/f_everyc.htm#every)：

```
CL-USER(7): (every #'alpha-char-p "word")
T
CL-USER(8): (every #'alpha-char-p "nonword7")
NIL
CL-USER(9): (every #'alpha-char-p "non-alpha-word")
NIL
CL-USER(10): (every #'alpha-char-p "今日は")
T 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-06T09:18:33.733

好的，我在上面评论了变音符号，因为这种特殊情况经常被忽视，下面是一个例子：

```
* (defparameter *weird-letter*
        (coerce (list (code-char #x0438)
                  (code-char #x0306)) 'string))
*WEIRD-LETTER*

* *weird-letter*
"и"

* (length *weird-letter*)
2

* (every #'alpha-char-p *weird-letter*)
NIL 
```

我实际上不确定 Lisp 实现在这里会做什么不同的实现，因为其中一些支持 Unicode 是不同的（到目前为止我可以说）。

对于上面的代码，预期的结果一定是`T`，因为实际上，两个代码点 U+0438-U+0306 构成了一个带变音符号的字母。Unicode中有两种拼写方式，一种是单个字符，另一种是同一个字母不加变音符号和变音符号的组合。

所以，如果你想超级正确，那么你必须检查一下，如果字母后面没有变音符号，但是（你瞧！）其中只有一些实际上是有效的字母！Unicode 是一件严肃的事情……

编辑：

为了更好地说明我的情况：

```
#!/opt/ActivePerl-5.14/bin/perl

binmode STDOUT, ":utf8";

my $weird_letter = "\x{0438}\x{0306}";
print "$weird_letter\n";

if ($weird_letter =~ m/^(\pL|(\pL\pM))+$/)
     { print "it is a letter!\n"; }
else { print "it is not a letter!\n"; } 
```

以上几乎可以公平对待这种角色。

# ajax - 扩展：如何拦截 AJAX 响应？

> ID：10469214
> 
> 赞同：1
> 
> 时间：2012-05-06T08:29:29.077
> 
> 标签：ajax, google-chrome-extension

由于扩展无法访问`unsafeWindow`，如 Firefox 可以，挂钩到 DOM 脚本我是否正在寻找其他想法，所以我来寻求帮助！

如何使用一些代码注入 DOM 并将截获的响应发送到后台页面，然后在调用内容脚本进行最终处理之前进行一些初始处理。完成后，它以修改后的响应或原始响应（取决于）响应后台，并且后台页面将响应发送回 DOM，DOM 将其处理给 DOM 脚本响应函数。
这样做只有*一个*问题，后台页面无法与 DOM 通信。

我做了一个注入一些代码的小测试，在那里我向控制台输出了一些东西和一个警报。结果不好，因为警报触发但控制台是空的 - 甚至没有错误，这让我想知道 -**哪个**控制台收到了输出？

```
function injectCode(fn){ // Executing an anonymous script
     var script = document.createElement('script');
     script.type = 'application/javascript';
     script.textContent = '(' + fn + ')();';
     document.documentElement.appendChild(script); // run the script
     document.documentElement.removeChild(script); // clean up
  }
var code = function(){
  console.log('dom',window);
  alert('code injected');
}
injectCode(code); 
```

我还尝试`addEventListener`了`DOMAttrModified` `DOMSubtreeModified` `DOMNodeInserted`DOM 元素，这些元素在 DOM ajax 响应被完全解析但都未能触发时发生变化。

我是否正在尝试做不可能的事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T09:29:03.057

在继续之前，请确保您知道[扩展中脚本上下文](https://stackoverflow.com/a/9916089/938089?chrome-extension-auto-run-a-function)之间的区别。

要从后台页面**注入**脚本，您必须执行**Content script**，然后按您的问题/[此处所述](https://stackoverflow.com/a/9517879/938089?building-a-chrome-extension-inject-code-in-a-page-using-a-content-script)**注入**脚本。

示例（使用[`chrome.tabs.executeScript`](http://code.google.com/chrome/extensions/tabs.html#method-executeScript)）：

```
// null = current active tab
// Simple code, background:
chrome.tabs.executeScript(null, {
   code: [
    'var s = document.createElement("script");',
    's.textContent = "console.log(window);";',
    '(document.head||document.documentElement).appendChild(s);',
    's.parentNode.removeChild(s);'
   ].join('\n')
}); 
```

我可以想象这种方法不适用于大量代码。对于一组预定义的脚本，您可以使用两个脚本：代码本身和帮助脚本：

```
// config.js
var fn_code = function() {
    console.log(window); ....
};
// helper.js
var s = document.createElement('script');
s.textContent = '(' + fn_code + ')();';
(document.head||document.documentElement).appendChild(s);
s.parentNode.removeChild(s);

// Background:
chrome.tabs.executeScript(null, {file: 'config.js'}, function() {
    chrome.tabs.executeScript(null, {file: 'helper.js'});
}); 
```

注意：我没有直接链接到“config.js”，因为这会使使用[清单版本 2](http://code.google.com/chrome/extensions/manifest.html#manifest_version)时的使用变得复杂，请参阅[`"web_accessible_resources"`](http://code.google.com/chrome/extensions/manifest.html#web_accessible_resources).

* * *

前面的方法只展示了如何在一个方向（背景->页面）执行代码。如果需要从注入的脚本中激活后台功能，则必须定义并监听自定义事件处理程序。请参阅[此答案 + 演示](https://stackoverflow.com/a/9636008/938089?chrome-extension-retrieving-gmails-original-message)。

* * *

因为代码是被**注入**的，所以运行在页面的范围内，你必须在页面上查看控制台。

当`chrome.tabs.executeScript`Content 脚本执行失败时（例如，因为扩展程序没有访问某个页面的权限），后台页面的控制台会记录一个错误。可以按照以下[步骤](https://stackoverflow.com/a/10258029/938089?google-chrome-extension-logging-from-background-js)访问此控制台。

# iphone - iOS：离开屏幕时使应用程序终止

> ID：10469218
> 
> 赞同：2
> 
> 时间：2012-05-06T08:29:50.150
> 
> 标签：iphone, objective-c, ios, ipad, ios5

我已经构建了一个简单的应用程序来激活硬件中的某些东西，这并不重要。

现在我只希望应用程序在用户离开屏幕、切换应用程序、接听电话、按下主页按钮等时完全终止。

我被所有的应用程序状态搞混了，我找不到合适的地方来处理它。我想我需要听一个“进入睡眠”事件并发出终止命令（退出！）或类似的东西。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-06T08:34:52.313

这比人们想象的要容易。

在你的应用程序的 plist 文件中定义（检查）选项“应用程序不在后台运行”（`UIApplicationExitsOnSuspend`），你就完成了。

![在此处输入图像描述](../Images/efabb8cf5159bf7500b405e7eb798dbe.png)

# c# - 将我的班级列表序列化到 Windows Phone 隔离存储

> ID：10469221
> 
> 赞同：0
> 
> 时间：2012-05-06T08:29:58.843
> 
> 标签：c#, xml, windows-phone-7, serialization, xml-serialization

我正在使用 .net XmlSerializer 类将我的游戏状态序列化到独立存储中。
这使我可以避免使用大量属性来混淆我的代码。

**每当我尝试序列化我的公共数据结构列表时都会遇到异常：**
“在序列化 GameState_test.Planet 类型的对象时检测到循环引用”

**我该如何解决？**我研究了很多答案，但没有一个与 WP7 相关。

```
public class Hazard { public Planet CurrentPlanet;} //reference to the planet its on

public struct Inventory
{
    public Inventory(int coins = 0, int arrows = 0) { Coins = coins; Arrows = arrows; }

    public int Coins;
    public int Arrows;
}

public class Planet
    {
        public Inventory Inventory;
        internal readonly int Index;              
        internal readonly List<int> Connections;  
        public Hazard pHazard; //hazard currently on planet
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T09:27:09.437

您使用的序列化程序不支持序列化循环引用。切换到 DataContract 序列化程序 (System.Runtime.Serialization) 并遵循本指南： http: [//blogs.msdn.com/b/sowmy/archive/2006/03/26/561188.aspx](http://blogs.msdn.com/b/sowmy/archive/2006/03/26/561188.aspx)
或使用支持的第三方序列化程序它。

# kineticjs - KineticJS 仅在 mousedown 时影响鼠标悬停的元素

> ID：10469222
> 
> 赞同：0
> 
> 时间：2012-05-06T08:30:05.593
> 
> 标签：kineticjs

此函数在画布上构建 NxN 网格并返回图层以供使用。在鼠标悬停时，它会更改单元格的颜色。但我需要的是只在鼠标按下时运行鼠标悬停，就像刷子一样。我该怎么做？

```
function buildGrid(config){
    var layer = new Kinetic.Layer(),i, j;
    for(i=0;i<config.y;i++){
        for(j=0;j<config.x;j++){
            (function(i,j){
                var cell = new Kinetic.Rect({
                    x: j * config.width,
                    y: i * config.height,
                    width: config.width,
                    height: config.height,
                    fill: "#00D2FF",
                    stroke: "black",
                    strokeWidth: 1
                })
                cell.on('mouseover',function(){
                    this.setFill('#F00');
                    layer.draw();
                });
                layer.add(cell)
            }(i,j));
        }
    }    
    return layer;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T08:48:25.500

你试过“dragmove”而不是“mouseover”吗？

* * *

让 mousedown 设置一个由 mouseover 代码检查的变量怎么样？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T07:38:53.487

对于触摸屏元素，您必须使用它。这将适用于 pc 和移动设备、ipad 和任何平板电脑浏览器。

```
replay.on("touchstart mousedown", function() 
```

# apache-flex - 旧的 flex sdk 下载

> ID：10469223
> 
> 赞同：9
> 
> 时间：2012-05-06T08:30:21.210
> 
> 标签：apache-flex, sdk

由于旧的 flex sdk 下载链接不起作用，并且问题 [https://stackoverflow.com/questions/10456540/where-else-find-a-download-link-of-flex-sdk-4](https://stackoverflow.com/questions/10456540/where-else-find-a-download-link-of-flex-sdk-4) 已关闭，也许有人有其他一些（私人）链接......？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-06T18:57:13.763

我刚刚从@zwetan 下载了 4.5.1：

[http://download.macromedia.com/pub/flex/sdk/flex_sdk_4.5.1.zip](http://download.macromedia.com/pub/flex/sdk/flex_sdk_4.5.1.zip)

对于旧版本，我相信你可以调整 url，所以如果我想要 4.6，我只是使用：

[http://download.macromedia.com/pub/flex/sdk/flex_sdk_4.6.zip](http://download.macromedia.com/pub/flex/sdk/flex_sdk_4.6.zip)和它 dl'ed。

我不知道这是否对其他人有用，但它目前对我有用。我现在将拥有自己的副本。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-17T23:14:32.940

找到了东西：http: [//sourceforge.net/adobe/flexsdk/wiki/Downloads/](http://sourceforge.net/adobe/flexsdk/wiki/Downloads/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-06T14:51:29.560

您可以从 SVN 存储库中获取代码。试试[这里](http://opensource.adobe.com/svn/opensource/flex/sdk/tags)或[这里](http://opensource.adobe.com/svn/opensource/flex/sdk/branches)。

我只是不知道哪个 Flex 4.0 分支/标签是发布版本。

# jquery - 在 ASP.NET 中使用 Uploadify 时看不到任何会话值

> ID：10469227
> 
> 赞同：0
> 
> 时间：2012-05-06T08:31:02.257
> 
> 标签：jquery, asp.net, uploadify

我正在使用[Uploadify](http://www.uploadify.com)在我的站点中上传文件，为了使上传更安全，我在页面加载后在服务器端创建“令牌”（随机数）并将其放入 Session 和 JS 变量中，以便在我开始上传时文件我将相同的令牌发送回服务器。
问题是在发回它时我跟踪了代码并且会话值都丢失​​了，看起来像是另一个会话。
这是怎么发生的，我该如何解决？
这是 ASP.NET 中的伪代码：

**服务器端**

```
var token = getRandomNumber();
Session["myToken"] = token;
Response.write("<script> var tokenInJS = "+token+"</script>"); 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T09:09:35.050

您是否在 Uploadify 的手册中阅读过[这篇](http://www.uploadify.com/documentation/uploadify/using-sessions-with-uploadify/)关于 Flash 中的一个错误的帖子，该错误会阻止它发布会话变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T08:35:21.083

```
var token = getRandomNumber();
//put the token into session.
Session["myToken"] = token;

//use session variable
Response.write("<script> var tokenInJS = "+Session["myToken"]+"</script>"); 
```

# html - WebSockets-向连接的客户端发送图像

> ID：10469230
> 
> 赞同：2
> 
> 时间：2012-05-06T08:31:31.760
> 
> 标签：html, websocket

这是我在 stackoverflow.com 上的第一篇文章，所以我会尽量直截了当。我必须使用 websockets 开发 webapp 的功能。我可以使用 websockets 发送文本数据，但不能发送图像。我已经查看并尝试了不同的可能性，但无法使其工作。图像的处理有在javascript中。

如果您有解决方案，请帮助我。谢谢。

更新：我已经成功使用 HTML5 的 FileReader Api 发送带有 websockets 的图像。谢谢大家。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T08:37:58.183

Websockects 不能发送图像或二进制数据以外的任何东西。您可以通过将图像运行时转换为 Base64 数据并通过 javascript 将其解码为图像来解决此问题。

有很多关于如何解码 Base64 编码图像的示例，但您也可以将其直接嵌入到图像 src 中：`<img src="data:image/png;base64,xxxxxxxxxxxxxxxxxx" />`将 x'es 替换为 Base64 数据。

# android - Android 页面控件类似于 iPhone 页面控件

> ID：10469232
> 
> 赞同：6
> 
> 时间：2012-05-06T08:32:17.560
> 
> 标签：android, iphone, scroll

我想把一些东西放回这个非常有用的网站，所以这不是一个真正的问题，而是我对这个问题的解决方案。我还要补充一点，这个解决方案是从本网站和许多其他网站的支持中收集到的，因此它代表了许多其他开发人员的共同努力。我对他们说声谢谢！

问题是“如何在 Android 环境中重新创建 iPhone 应用程序的水平滚动视图方面和相关的页面控件？”

这是因为我想在单个滚动视图中显示配方中的步骤、每个步骤的相关方法以及必要的成分。我还想要一个页面控件向用户显示他们在步骤中的位置，并允许他们移动到任何特定步骤

我的应用程序的这一部分显示了食谱中的步骤。每个步骤都出现在一个页面上，并包含三个组件。步骤标识符（即步骤 1、步骤 2）、步骤所需的方法和成分。

在配方部分下方，我们显示一个页面控件，该控件显示哪个页面处于活动状态并且可用于导航到特定页面。您会注意到页面控件具有图像按钮，并且两个图像是简单的圆圈，一个用于非选定页面（page.png），一个用于选定页面（page_selected.png）

创建活动时，将从数据中检索所选配方的步骤，并通过为配方中的每个步骤添加视图来创建滚动条部分。当您滑动滚动条时，视图会捕捉到下一页或上一页，并且寻呼机显示会更新以指示您所在的页面

前 3 个 xml 布局（res/layout）

食谱.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<RelativeLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content" >

 <!--Scroller section-->

   <HorizontalScrollView
       android:id="@+id/scroll_view"
        android:layout_width="match_parent"
        android:layout_height="320dp"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:layout_marginTop="100dp" >

            <LinearLayout
                android:id="@+id/methodScrollView"
                android:layout_width="match_parent"
                android:layout_height="match_parent"
                android:orientation="horizontal" >
            </LinearLayout>

    </HorizontalScrollView>

<!-- pager section --> 

    <LinearLayout
        android:id="@+id/pager"
        android:layout_width="match_parent"
        android:layout_height="20dp"
        android:layout_alignParentLeft="true"
        android:layout_alignParentRight="true"
        android:layout_alignParentTop="true"
        android:layout_marginLeft="20dp"
        android:layout_marginRight="20dp"
        android:layout_marginTop="430dp"
        android:gravity="center"
        android:orientation="horizontal" >

    </LinearLayout>

</RelativeLayout> 
```

recipesscroll.xml（将添加到每个配方步骤的滚动部分的视图。请注意，滚动部分在 recipeViewController.java 中有一个 onTouchlistner 来处理页面滚动）

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/recipeScroll"
    android:layout_width="320dp"
    android:layout_height="320dp"
    android:gravity="center_vertical" >

   <TextView
    android:id="@+id/method"
    style="@style/scrollMethod"
    android:layout_width="wrap_content"
    android:layout_height="200dp"
    android:layout_alignParentTop="true"
    android:text="Method" />

   <TextView
    android:id="@+id/ingredients"
    style="@style/scrollIngredients"
    android:layout_width="wrap_content"
    android:layout_height="120dp"
    android:layout_alignParentTop="true"
    android:text="Ingredients" />

   <TextView
    android:id="@+id/methodStep"
    style="@style/scrollStep"
    android:layout_width="wrap_content"
    android:layout_height="20dp"
    android:layout_alignParentTop="true"
    android:text="Step" />

</RelativeLayout> 
```

recipiespager.xml （将添加到每个配方步骤的寻呼机部分的视图。请注意，这些视图中的每一个都将在 recipeViewController.java 中有一个 onClick 事件，该事件将滚动到寻呼机控件中选择的特定页面）

```
<?xml version="1.0" encoding="utf-8"?>
<Button xmlns:android="http://schemas.android.com/apk/res/android"
            style="@style/pageButton"
            android:layout_marginLeft="10dp"
            android:layout_width="16dp"
            android:layout_height="16dp"
            android:onClick="selectPage">

</Button> 
```

这一切都汇集在 recipeViewController.java

```
//my package name change this to yours
package com.infactdata.spinAdinner;

import java.util.ArrayList;

//DataModel is the model for my data change this to yours or ignore 
because it is just away of holding the data that will populate the views
import com.infactdata.plist.DataModel;

import android.content.res.Resources;
import android.graphics.Typeface;
import android.os.Bundle;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.MotionEvent;
import android.view.View;
import android.view.View.OnClickListener;
import android.view.View.OnTouchListener;
import android.widget.Button;
import android.widget.HorizontalScrollView;
import android.widget.ImageView;
import android.widget.LinearLayout;
import android.widget.RelativeLayout;
import android.widget.TableLayout;
import android.widget.TableRow;
import android.widget.TextView;

public class RecipeViewController extends RootViewController {
    private DataModel currentData;
    HorizontalScrollView h_scroll;
    int numberOfPages = 0;
    int thePage;
    int otherPage;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        //first of the xml files
        setContentView(R.layout.recipe);

        //reference to my global variables
        GlobalClass global = (GlobalClass)getApplicationContext();

        //because I wanted a particular type face
        Typeface face=Typeface.createFromAsset(getAssets(), "fonts/trebucit.ttf");

        //VERY IMPORTANT because we need to use this to add the content to the scroll
        and pager sections   
        LayoutInflater inflater = getLayoutInflater();

        //current data held a dataModel
        currentData = global.getCurrent();  

        currentName.setText(currentData.getName());

        String imageFile = currentData.getImage();
        Resources r = getResources();

        int res = r.getIdentifier(imageFile, "drawable", "com.infactdata.spinAdinner");
        image.setImageResource(res);

        //recources that change the pager indicators to different images
        thePage = r.getIdentifier("page_selected", "drawable","com.infactdata.spinAdinner");
        otherPage = r.getIdentifier("page", "drawable", "com.infactdata.spinAdinner");

        //Get the method(ArrayList) out of the currentData(DataModel). This is the array of 
        data that will fill the added view with different content (ie. the specific
        instructions for the recipe step. This could be your own data array.   

        ArrayList<String[]> method = new ArrayList<String[]>();
        method = currentData.getMethod(0);
        numberOfPages = method.size();

        //now to build the views by adding the content and then adding the text for that 
        content that reflects the instructions for the step in the recipe  

        for( int i = 0; i < method.size(); i++){

            String[] methodStep = method.get(i);

            //find the scroll view
            LinearLayout scroll = (LinearLayout) findViewById(R.id.methodScrollView);

            //find the recipe scroller. the second xml file 
            RelativeLayout step = (RelativeLayout)findViewById(R.id.recipeScroll);

            //add the recipe step (step) to the scrollview (scroll)
            step = (RelativeLayout)inflater.inflate(R.layout.recipescroll, scroll, false);

            //add the instructions for this step in the recipe
            TextView stage = (TextView)step.findViewById(R.id.methodStep);
            stage.setText(methodStep[0].toString());
            stage.setTypeface(face);

            TextView methodText = (TextView)step.findViewById(R.id.method);
            methodText.setText(methodStep[1].toString());
            methodText.setTypeface(face);

            TextView ingredients = (TextView)step.findViewById(R.id.ingredients);
            ingredients.setText(methodStep[2].toString());
            ingredients.setTypeface(face);

            //create method step and add to scroll
            scroll.addView(step);

            //pager setup is a duplicate of the above
            //find the pager
            LinearLayout pager = (LinearLayout) findViewById(R.id.pager);

           //find the pager button. the third xml file
           Button page = (Button)inflater.inflate(R.layout.recipespager, pager, false);

           //give each button it own ID. This will be used to test which button should  be highlighted and used to move to a specific page. This is because the ID is equal to the page number (0 based of course) 
           page.setId(i);

           //because this is a fresh construction we will be on page 0 so highlight that button   
          if (i == 0){
              page.setBackgroundResource(thePage);
           }

           //create page control and add to pager
           pager.addView(page);
       }

      //create the onTouch controls 

      h_scroll = (HorizontalScrollView) findViewById(R.id.scroll_view);
      h_scroll.setOnTouchListener(scrolling);

 }

 private OnTouchListener scrolling = new OnTouchListener(){
     public boolean onTouch(View v, MotionEvent event) {
         if (event.getAction() == MotionEvent.ACTION_UP || event.getAction() == 
         MotionEvent.ACTION_CANCEL ){
             int scrollX = h_scroll.getScrollX();
             int itemWidth = h_scroll.getMeasuredWidth();
             int activePage = ((scrollX + itemWidth / 2) / itemWidth);
             int scrollTo = activePage * itemWidth;
             h_scroll.smoothScrollTo(scrollTo, 0);

             //page control display the active page button
             Log.v("MyDebug","Active page = "+activePage);
             for(int i = 0; i < numberOfPages; i++){
                Button aPage = (Button) findViewById(i);
                if(i == activePage){
                    aPage.setBackgroundResource(thePage);
                }else{
                    aPage.setBackgroundResource(otherPage);
                }
             }

             return true;
         } else {
             return false;
         }
     }

 };

 //this is the onClick handler for the page buttons and moves the scroller to the page 
 associated with the button. That is through the button ID, which matches the page 
 number (0 based of course

 public void selectPage(View v) {
     int newPage = v.getId();
     int itemWidth = h_scroll.getMeasuredWidth();
     int scrollTo = newPage * itemWidth;
     h_scroll.smoothScrollTo(scrollTo, 0);

   //page control display
     Log.v("MyDebug","Active page = "+newPage);
     for(int i = 0; i < numberOfPages; i++){
        Button aPage = (Button) findViewById(i);
        if(i == newPage){
            aPage.setBackgroundResource(thePage);
        }else{
            aPage.setBackgroundResource(otherPage);
        }
     }
  }

  public void finishActivity(View v){
      //perform back action
      finish();
  }

  public void nextActivity(View v){
      //move to next activity
  }
} 
```

那是我的解决方案。我确信有很多比我聪明的程序员，所以我相信有人可以改进这一点。无论如何感谢stackoverflow！！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T09:11:16.120

我认为 GreenDroid 库将有助于实现类似于 iPhone 的 UIPageControl 的功能。

在市场 GDDatalog 中查看他们的应用程序。您还可以提取所需的文件并制作页面控件。我已经在我的应用程序中使用了它，它工作正常。需要进行一些优化以使其更流畅。

[https://github.com/cyrilmottier/GreenDroid](https://github.com/cyrilmottier/GreenDroid)

# python - OpenCV - 将蒙版应用于彩色图像

> ID：10469235
> 
> 赞同：64
> 
> 时间：2012-05-06T08:32:57.453
> 
> 标签：python, opencv, image-processing, mask

如何在最新的 python 绑定（cv2）中将蒙版应用于彩色图像？在以前的 python 绑定中，最简单的方法是使用`cv.Copy`例如

`cv.Copy(dst, src, mask)`

但是这个函数在 cv2 绑定中不可用。有没有不使用样板代码的解决方法？

* * *

## 回答 #1

> 赞同：90
> 
> 时间：2012-05-06T10:49:02.323

`cv2.bitwise_and`在这里，如果您已经拥有蒙版图像，则可以使用函数。

检查以下代码：

```
img = cv2.imread('lena.jpg')
mask = cv2.imread('mask.png',0)
res = cv2.bitwise_and(img,img,mask = mask) 
```

对于 lena 图像和矩形掩码，输出将如下所示。

![在此处输入图像描述](../Images/34241b3e3050d3736b55a5c5cbf2636f.png)

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2016-07-21T00:46:52.043

好吧，如果您希望背景不是纯黑色，这是一个解决方案。我们只需要将蒙版反转并应用***到相同大小的背景图像中***，然后将背景和前景结合起来。该解决方案的一个优点是背景可以是任何东西（甚至是其他图像）。

这个例子是从[Hough Circle Transform](http://opencv-python-tutroals.readthedocs.io/en/latest/py_tutorials/py_imgproc/py_houghcircles/py_houghcircles.html)修改而来的。第一个图像是 OpenCV 标志，第二个是原始蒙版，第三个是背景 + 前景组合。

[![应用蒙版并获得自定义背景](../Images/178f9a91a18af573e48d0c0d36f10c44.png)](https://i.stack.imgur.com/vqQw2.png)

```
# http://opencv-python-tutroals.readthedocs.io/en/latest/py_tutorials/py_imgproc/py_houghcircles/py_houghcircles.html
import cv2
import numpy as np

# load the image
img = cv2.imread('E:\\FOTOS\\opencv\\opencv_logo.png')
img = cv2.cvtColor(img, cv2.COLOR_BGR2RGB)

# detect circles
gray = cv2.medianBlur(cv2.cvtColor(img, cv2.COLOR_RGB2GRAY), 5)
circles = cv2.HoughCircles(gray, cv2.HOUGH_GRADIENT, 1, 20, param1=50, param2=50, minRadius=0, maxRadius=0)
circles = np.uint16(np.around(circles))

# draw mask
mask = np.full((img.shape[0], img.shape[1]), 0, dtype=np.uint8)  # mask is only 
for i in circles[0, :]:
    cv2.circle(mask, (i[0], i[1]), i[2], (255, 255, 255), -1)

# get first masked value (foreground)
fg = cv2.bitwise_or(img, img, mask=mask)

# get second masked value (background) mask must be inverted
mask = cv2.bitwise_not(mask)
background = np.full(img.shape, 255, dtype=np.uint8)
bk = cv2.bitwise_or(background, background, mask=mask)

# combine foreground+background
final = cv2.bitwise_or(fg, bk) 
```

*注意：最好使用 opencv 方法，因为它们已经过优化。*

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2019-01-18T19:28:31.753

```
import cv2 as cv

im_color = cv.imread("lena.png", cv.IMREAD_COLOR)
im_gray = cv.cvtColor(im_color, cv.COLOR_BGR2GRAY) 
```

此时你有一个彩色和一个灰色的图像。我们正在处理`8-bit`，`uint8`图像在这里。这意味着图像可以具有范围内的像素值，`[0, 255]`并且值必须是整数。

[![左色右灰](../Images/1dda9730701450095bfa128d54cef812.png)](https://i.stack.imgur.com/Bxl8h.jpg)

让我们做一个二进制阈值操作。它创建一个黑白蒙版图像。黑色区域有价值`0`，白色区域`255`

```
_, mask = cv.threshold(im_gray, thresh=180, maxval=255, type=cv.THRESH_BINARY)
im_thresh_gray = cv.bitwise_and(im_gray, mask) 
```

面具可以在下面的左边看到。右边的图像是`bitwise_and`灰度图像和蒙版之间应用运算的结果。发生的事情是，掩码的像素值为零（黑色）的空间位置在结果图像中变为像素值为零。蒙版像素值为 255（白色）的位置，生成的图像保留其原始灰度值。

[![左掩码，右位和带掩码](../Images/0eb1ee132cd5e8f43f7e8ef95f46db73.png)](https://i.stack.imgur.com/iw2XS.jpg)

要将这个蒙版应用于我们的原始彩色图像，我们需要将蒙版转换为 3 通道图像，因为原始彩色图像是 3 通道图像。

```
mask3 = cv.cvtColor(mask, cv.COLOR_GRAY2BGR)  # 3 channel mask 
```

`bitwise_and`然后，我们可以使用相同的函数将此 3 通道蒙版应用于我们的彩色图像。

```
im_thresh_color = cv.bitwise_and(im_color, mask3) 
```

`mask3`来自代码的是左下方的图像，并且`im_thresh_color`在其右侧。

[![left-mask-3channel，right-bitwise_and_with_3channel-mask](../Images/30c663bca45925c7ba9e6add35c34fe1.png)](https://i.stack.imgur.com/McuI7.jpg)

您可以绘制结果并亲自查看。

```
cv.imshow("original image", im_color)
cv.imshow("binary mask", mask)
cv.imshow("3 channel mask", mask3)
cv.imshow("im_thresh_gray", im_thresh_gray)
cv.imshow("im_thresh_color", im_thresh_color)
cv.waitKey(0) 
```

~~原始图像是`lenacolor.png`我在[这里](https://homepages.cae.wisc.edu/%7Eece533/images/)找到的。~~

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-02-24T23:43:59.887

描述的其他方法假定二进制掩码。如果您想使用实值单通道灰度图像作为遮罩（例如来自 alpha 通道），您可以将其扩展为三个通道，然后将其用于插值：

```
assert len(mask.shape) == 2 and issubclass(mask.dtype.type, np.floating)
assert len(foreground_rgb.shape) == 3
assert len(background_rgb.shape) == 3

alpha3 = np.stack([mask]*3, axis=2)
blended = alpha3 * foreground_rgb + (1\. - alpha3) * background_rgb 
```

请注意，`mask`需要在范围内`0..1`才能使操作成功。还假设`1.0`编码只保留前景，而`0.0`意味着只保留背景。

如果面具可能有 shape `(h, w, 1)`，这有助于：

```
alpha3 = np.squeeze(np.stack([np.atleast_3d(mask)]*3, axis=2)) 
```

如果是，则在这里`np.atleast_3d(mask)`制作蒙版，并将结果从to重塑。`(h, w, 1)``(h, w)``np.squeeze(...)``(h, w, 3, 1)``(h, w, 3)`

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-07-23T13:37:37.303

Abid Rahman K 给出的答案并不完全正确。我也试过了，发现很有帮助，但卡住了。

这就是我使用给定蒙版复制图像的方式。

```
x, y = np.where(mask!=0)
pts = zip(x, y)
# Assuming dst and src are of same sizes
for pt in pts:
   dst[pt] = src[pt] 
```

这有点慢，但给出了正确的结果。

编辑：

Pythonic 方式。

```
idx = (mask!=0)
dst[idx] = src[idx] 
```

# delphi - 如何在 msWord 中打开 QuickReport

> ID：10469241
> 
> 赞同：2
> 
> 时间：2012-05-06T08:34:06.870
> 
> 标签：delphi, report, quickreports

我正在使用 Delphi 6，我需要使用户能够使用 WinWord 修改快速报告。

如何将选择的任何内容导出到快速报告到 word 文件？或者除了快速报告之外，还有其他方法可以构建报告并导出它们吗？

像第三方工具？

谢谢你

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-06T22:00:37.757

您可能正在寻找[`QR Design`](http://www.quickreport.co.uk/WebInfoPage.aspx?WebInfoID=646). 它是基于 Quickreport 的独立最终用户报表设计器。您可以将其编译到您的应用程序中，也可以将其作为独立的、单独的应用程序分发，用于打印和设计 Quickreport 报告。有关如何获取 Quickreport 版本的副本的更多信息[`contact vendor`](http://www.quickreport.co.uk/Contact.aspx)。

*   [`QRDesign Screenshots`](http://www.quickreport.co.uk/WebInfoPage.aspx?WebInfoID=697)
*   [`QRDesign Feature List`](http://www.quickreport.co.uk/WebInfoPage.aspx?WebInfoID=708)

# visual-studio-2010 - 处理位于 HomeGroup 文件夹中的项目

> ID：10469244
> 
> 赞同：0
> 
> 时间：2012-05-06T08:34:39.630
> 
> 标签：visual-studio-2010

我有一台电脑和笔记本电脑。当我在大学时，我在笔记本电脑上从事一个项目（或独奏）。当我回到家时，我真的很想用我的电脑处理这个项目（我有双屏，当然我的电脑速度更快！）。

这些项目位于`Documents\Visual Studio......`我的笔记本电脑中，当然这个文件夹在家庭组中共享。

我可以在我的 PC 中打开该项目，但是当我尝试构建该项目时，我会遇到如下错误：

```
Error   1   Unexpected error creating debug information file '\\AMIGA\Users\Sean\Documents\Visual Studio 2010\Projects\MiniScope\MiniScope\obj\Debug\MiniScope.PDB' -- '\\AMIGA\Users\Sean\Documents\Visual Studio 2010\Projects\MiniScope\MiniScope\obj\Debug\MiniScope.pdb: Access is denied. 
```

' 迷你镜

和这样的警告：

```
Warning 2   Could not read state file "obj\Debug\ResolveAssemblyReference.cache". Access to the path '\\AMIGA\Users\Sean\Documents\Visual Studio 2010\Projects\MiniScope\MiniScope\obj\Debug\ResolveAssemblyReference.cache' is denied. MiniScope 
```

有人可以告诉我，我怎样才能授予这个项目的权限，以便他们可以编译和运行？！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T08:39:47.333

这是 Visual Studio 的一项安全功能。网络驱动器被认为是不受信任的（因为其他人可能会在您处理它时更改代码或注入恶意内容）。

作为解决方案，我建议不要使用网络共享。相反，请使用工具来同步文件夹或文件托管服务，例如[Dropbox](http://www.dropbox.com/)、[SkyDrive](http://skydrive.live.com/)或[Box.net](http://www.box.net/)。

我从未使用过其他两种服务，但 Dropbox 允许您像使用任何其他文件夹一样使用 Dropbox 文件夹（它本质上只是该服务观察到的标准文件夹）。内部的任何修改都会镜像到他们的服务器（安全/加密）以及您与之链接的任何 PC 或 Android 设备上。因此，您可以链接您的 PC 和笔记本电脑，该工具会为您进行同步（使用互联网或 LAN，以可用者为准（并且速度更快））。

# hibernate - JPA - 嵌入的嵌套集合元素

> ID：10469247
> 
> 赞同：3
> 
> 时间：2012-05-06T08:35:08.610
> 
> 标签：hibernate, jpa

我已经阅读了 JPA 规范 - 以及第 2.6 节（Embeddeble 类和基本类型的集合）。

它说“包含在元素集合中的可嵌入类，不得包含元素集合”。

我对这样的结构有要求。我想知道绕过这个问题的标准方法是什么。也就是说，有一个元素的集合，它们的类型是一个可嵌入的类，它可能包含一个元素的集合）。

实现这一点对我来说很重要，同时仍将其保留为可嵌入的类。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T09:33:47.210

你考虑过继承C吗？

因此，您将拥有扩展 C 的 C_A 和 C_B，并且 A 具有 C_A，B 具有 C_B。然后 C_A 和 C_B 可以引用他们的父母..

# javascript - Dojo Dnd 问题：Dojo 使用 insertNodes 在源中插入来自 json 的数据

> ID：10469253
> 
> 赞同：0
> 
> 时间：2012-05-06T08:36:19.547
> 
> 标签：javascript, json, dojo

我有一个json如下；

```
var jsonRoles = {"roles": [
                            {"roleId": 1, "roleName": "Admin", "roleDesc": "This is an Admin"},
                            {"roleId": 2, "roleName": "Manager", "roleDesc": "This is a Manager role"},
                            {"roleId": 3, "roleName": "User", "roleDesc": "This is a user role"}
                        ]
                    }; 
```

我想以编程方式将数据插入到 dnd 源中，如下所示；

```
var rolesItems = new Source("roleNode", { accept: [ "roleName"] });
            rolesItems .insertNodes(false, [
                { data: "Admin",     type: [ "roleName" ] },
                { data: "Manager",   type: [ "roleName" ] },
                { data: "User",      type: [ "roleName" ] }
            ]);
            rolesItems .forInItems(function(item, id, map){
                domClass.add(id, item.type[0]);
            }); 
```

我该如何执行任务？任何的想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T07:41:24.400

我想出了如何解决它。如果有人感兴趣，以下是解决方案；

```
//Json
var jsonRoles = {"roles": [
                  {"roleId": 1, "roleName": "Admin", "roleDesc": "This is an Admin"},
                  {"roleId": 2, "roleName": "Manager", "roleDesc": "This is a Manager role"},
                  {"roleId": 3, "roleName": "User", "roleDesc": "This is a user role"}
                 ]
               };

//Array for Roles
var roles_len = jsonRoles.roles.length;
var arr_roles = [];
var role_type = ["roles"];
for(var i=0;i<roles_len;i++){
   var obj_roles = {};
   obj_roles["data"] = jsonRoles.roles[i].roleName;
   obj_roles["type"] = [role_type[0]];
   arr_roles.push(obj_roles);
}

//Source Container (for dojo 1.6, for dojo 1.7 its different)
    var roleListContainer = new dojo.dnd.Source("roleNode", {accept: ["permissions","roles"]});
    roleListContainer.insertNodes(false, arr_roles); 
```

# html - 如何强制复选框和文本在同一行？

> ID：10469256
> 
> 赞同：50
> 
> 时间：2012-05-06T08:37:00.090
> 
> 标签：html

如何强制复选框和以下文本出现在同一行？在下面的 HTML 中，我只想在标签和输入之间换行，而不是在输入和标签之间换行。

```
<p><fieldset>
    <input type="checkbox" id="a">
    <label for="a">a</label>
    <input type="checkbox" id="b">
    <!-- depending on width, a linebreak can occur here. -->
    <label for="b">b</label>
    <input type="checkbox" id="c">
    <label for="c">c</label>
</fieldset></p> 
```

澄清一下：如果 fieldset/p 对所有元素都不够宽，而不是：

```
[] a [] b []
c [] d [] e 
```

我想：

```
[] a [] b
[] c [] d
[] e 
```

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-05-06T10:42:01.987

如果您将每个项目包装在一个 div 中，它不会中断。通过下面的链接查看我的小提琴。我将字段集的宽度设为 125 像素，并将每个项目设为 50 像素宽。您会看到标签和复选框并排保持在新行上并且不会中断。

```
<fieldset>
<div class="item">
    <input type="checkbox" id="a">
    <label for="a">a</label>
</div>
<div class="item">
   <input type="checkbox" id="b">
<!-- depending on width, a linebreak can occur here. -->
    <label for="b">bgf bh fhg fdg hg dg gfh dfgh</label>
</div>
<div class="item">
    <input type="checkbox" id="c">
    <label for="c">c</label>
</div>
</fieldset> 
```

[http://jsfiddle.net/t5dwp7pg/1/](http://jsfiddle.net/t5dwp7pg/1/)

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2012-05-06T08:39:45.337

试试这个 CSS：

```
label {
  display: inline-block;
} 
```

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2012-11-13T11:15:06.673

尝试这个。以下将复选框和标签视为唯一元素：

```
<style>
  .item {white-space: nowrap;display:inline  }
</style>
<fieldset>
<div class="item">
    <input type="checkbox" id="a">
    <label for="a">aaaaaaaaaaaa aaaa a a a a a a aaaaaaaaaaaaa</label>
</div>
<div class="item">
   <input type="checkbox" id="b">
<!-- depending on width, a linebreak NEVER occurs here. -->
    <label for="b">bbbbbbbbbbbb bbbbbbbbbbbbbbbbb  b b b b  bb</label>
</div>
<div class="item">
    <input type="checkbox" id="c">
    <label for="c">ccccc c c c c ccccccccccccccc  cccc</label>
</div>
</fieldset> 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2015-07-02T02:33:54.617

仅使用 css 执行此操作的另一种方法：

```
input[type='checkbox'] {
  float: left;
  width: 20px;
}
input[type='checkbox'] + label {
  display: block;
  width: 30px;
} 
```

请注意，这会强制每个复选框及其标签放在单独的行上，而不是仅在溢出时才这样做。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2019-11-18T18:02:10.627

您可以将标签包裹在输入周围：

```
 **<label for="a"><input type="checkbox" id="a">a</label>** 
```

这对我有用。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-06T08:48:21.377

[http://jsbin.com/etozop/2/edit](http://jsbin.com/etozop/2/edit)

```
put a div wrapper with WIDTH :

  <p><fieldset style="width:60px;">
   <div style="border:solid 1px red;width:80px;">
    <input type="checkbox" id="a">
    <label for="a">a</label>
    <input type="checkbox" id="b">

    <label for="b">b</label>
   </div>

    <input type="checkbox" id="c">
    <label for="c">c</label>
</fieldset></p> 
```

*一个名字可能是“john winston ono lennon”，它很长……那你想做什么？（你永远不会知道长度）......你可以创建一个在 x 字符之后包装的函数，例如：“john winston o....”*

# sql-server - 使用 Google Drive 管理大量文档

> ID：10469257
> 
> 赞同：0
> 
> 时间：2012-05-06T08:37:03.093
> 
> 标签：sql-server, sql-server-2008, google-docs-api

我有一个 CMS 数据库（SQL Server），它存储了大约 200 万个 PDF、Word、Excel 等文档，平均大小为 2MB。

我想移动这些文档并将它们上传到 Google Drive，取回一个 Id，并将其作为参考存储在 SQL Server 中。

有没有人这样做或知道这种方法可能存在的问题？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T16:41:18.110

您将无法直接通过 SQL Server 执行此操作，但您可以编写一个简单的 .NET（或其他）应用程序来满足您的需求。

这是[驱动器 API 文档](https://developers.google.com/drive/)、[API 客户端和](https://developers.google.com/drive/downloads)[上传文件](https://developers.google.com/drive/manage-uploads)的具体说明。

凯尔

# visual-c++ - C++ 球在菱形中弹跳

> ID：10469260
> 
> 赞同：1
> 
> 时间：2012-05-06T08:37:21.597
> 
> 标签：visual-c++, c++-cli, gdi+, bounce

我用 VC++ 做了一个简单的弹球程序。
这个程序的目标是球必须在菱形中反弹。它不能脱离菱形。
好像运行成功了，但是在左右角，卡住了。
如何解决这个问题？我认为当球向左右角移动时，方程的条件是重复的......
你能建议其他算法来解决这个问题吗？
我试图解决这个问题，
`while(!isInside(getNextPos(circle))) { updateDirectionVector(circle); }`
但我不能这样做，因为随机值每次都发生了变化。（使用定时器重复）
这是这个程序的算法，除了在角落工作。

```
up:
while(1) goDownSideCircle;
if(StuckOnDownSide) goto down;
down:
while(1) goUpSideCircle;
if(StuckOnUpSide) goto up; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T19:20:29.647

问题解决了。
求解算法：

```
 RandValue;
    while(1){
    DrawCircle(Center_X,Center_Y);
    Center_X+=Rand_X; Center_Y+=Rand_Y;
    check=false;
    Check_X=Center_X; Check_Y=Center_Y;
    while(BorderCheck){
    RandValue;
    Check_X+=Rand_X; Check_Y+=Rand_Y;
    check=true;}
    if(check){
    Center_X=Check_X; Center_Y=Check_Y;}} 
```

# jquery - onclick 更改插件设置

> ID：10469266
> 
> 赞同：0
> 
> 时间：2012-05-06T08:38:26.610
> 
> 标签：jquery, jscrollpane, conflict, jquery-jscrollpane

以下是设置：

```
$(function()
{
    $('.info').jScrollPane(
        {showArrows: true, hijackInternalLinks: true, animateScroll: true}
    );
}); 
```

问题是`animateScroll: true`与箭头冲突，但我的内部锚链接需要它。

我认为这将解决冲突。当您单击箭头按钮时：`<a class="jspArrow jspArrowDown jspActive"</a>`它会将 jScrollPane 设置更改为 `animateScroll: false`然后当您取消单击时它会恢复为`animateScroll: true`

我希望这是有道理的。任何帮助都会很棒。

*编辑*

很抱歉没有早点回来。我已经设置了一个演示，你可以看到向下箭头不起作用。我认为它与 animateScroll: true

[http://jsfiddle.net/sVSsy/](http://jsfiddle.net/sVSsy/)

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T13:46:22.040

当 DIV 的宽度约为**600px时，使用您需要的两个选项在官方****scroll_to_animate.html** [演示页面](http://jscrollpane.kelvinluck.com/scroll_to_animate.html)上没有看到任何问题。

 **解决方案是使用**jScrollPane arrowButtonSpeed 选项**，在使用较小的 DIV 时使用默认值**0**以外的值，例如在使用某些浏览器（如 Chrome）时使用**300px**宽度。

此 jsfiddle 更新还删除了重复鼠标脚本的资产，将重复的 ID 'one' 替换为 DIV 内容的附加 ID 'four'，因为 ID 只能使用一次。您将看到其他速度设置及其默认值，您可以对 DIV 大小的任何更改进行试验。

这是更新的 jsfiddle：http:
[//jsfiddle.net/sVSsy/3/](http://jsfiddle.net/sVSsy/3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T06:54:30.897

尝试使用您想要的属性来破坏和重建它。

```
var api= $('#element').data('jsp');
api.destroy();
$('#element').jScrollPane({animateScroll: true}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T07:21:20.727

你尝试过类似的东西：

```
$('yourelement').click(function(){
    if($('panedelement').jScrollPane.animateScroll === true)
        $('panedelement').jScrollPane.animateScroll = false;
    else
        $('panedelement').jScrollPane.animateScroll = true
}); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-09T18:25:51.057

您可以绑定到 onmousedown 和 onmouseup 事件：

[http://www.w3schools.com/jsref/event_onmousedown.asp](http://www.w3schools.com/jsref/event_onmousedown.asp) http://www.w3schools.com/jsref/event_onmouseup.asp

因此，在鼠标向下箭头时，您会将 animateScroll 设置为 false，而在鼠标向上时，您会将 animateScroll 设置为 true。**

# php - 发生错误：SyntaxError: JSON.parse: unexpected character

> ID：10469270
> 
> 赞同：0
> 
> 时间：2012-05-06T08:39:40.713
> 
> 标签：php, jquery, mysql, json

我正在尝试使用 JQuery/JSON 更新记录，但我看到了这个错误：

> 发生了错误：
> 
> [对象对象]
> 
> 解析器错误
> 
> SyntaxError: JSON.parse: 意外字符

**我的 JS：**

```
jQuery('#commentForm').live('submit', function (event) {
event.preventDefault()

jQuery.ajax(edit_url, {
    data: jQuery(this).serialize(),
    dataType: 'json',
    type: 'POST',
    success: function (data) {
        if (data.error === 'OK') {
            alert('ok c good')
        } else {
            alert('hi' + data.error)
        }
    },
    error: function(x,y,z){
        alert('An error has occurred:\n' + x + '\n' + y + '\n' + z);
    }
})

return false;
}) 
```

**还有我的 php：**

```
$ret = array(
    'error'             =>  'OK',
);
$update =
    "UPDATE crm_set_users SET ".
        "crm_set_users_civilite = '".mysql_real_escape_string($crm_set_users_civilite)."',".
        "crm_set_users_nom = '".mysql_real_escape_string($crm_set_users_nom)."',".
        "crm_set_users_prenom = '".mysql_real_escape_string($crm_set_users_prenom)."',".
        "crm_set_users_email = '".mysql_real_escape_string($crm_set_users_email)."', ".
        "crm_set_users_telephone = '".mysql_real_escape_string($crm_set_users_telephone)."', ".
        "crm_set_users_portable = '".mysql_real_escape_string($crm_set_users_portable)."'";

if($crm_set_users_photo != ""){
    $update .=", crm_set_users_photo = '".mysql_real_escape_string($crm_set_users_photo)."'";
}   

$update .=
    "WHERE ".
        "crm_set_users_id = '".mysql_real_escape_string($user_id)."'";

echo json_encode($ret);
exit; 
```

如果我的 php 是：

```
$ret = array(
    'error'             =>  'OK',
);
echo json_encode($ret);
exit; 
```

然后它工作......

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T08:59:19.347

可能您的 PHP 会抛出一些错误或警告，从而使返回的文档不是有效的 JSON 字符串。使用像[FireBug](http://getfirebug.com/)这样的调试器来查看 PHP 脚本返回的实际结果。

如果没有可用的活动 MySQL 连接，则在`mysql_real_escape_string`( [link](http://php.net/manual/en/function.mysql-real-escape-string.php) )的 PHP 文档之后会抛出错误。也许那是你的问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-06T09:00:52.130

问题一定是更新记录的php失败，所以没有输出json。

我认为您需要在`WHERE`

```
$update .=
    " WHERE ". 
```

在字符串的其余部分之后给它一些空间

# c# - 更改中继器行值？

> ID：10469274
> 
> 赞同：4
> 
> 时间：2012-05-06T08:40:16.180
> 
> 标签：c#, asp.net, webforms, repeater, itemdatabound

我正在尝试更改中继器中的值：（通过 itemdatabound 事件）

*如果年份为空 - 设置值`blabla`*

我的中继器：

```
 <ItemTemplate>
                <tr  >
                    <td  >
                        <%#Eval("year") %>
                   </td> 
```

我的 C# 代码：

```
 void RPT_Bordereaux_ItemDataBound(object sender, RepeaterItemEventArgs e)
    {
            if (e.Item.ItemType == ListItemType.Item || e.Item.ItemType == ListItemType.AlternatingItem)
        {
            if (string.IsNullOrEmpty(((DataRowView)e.Item.DataItem)["year"].ToString()))
            { 
                (((DataRowView)e.Item.DataItem)["year"]) = "blabla"; // ???????

            }
        } 
```

它确实发生了变化，但未显示在转发器中（显示旧值）。

一种解决方案是在 - 中添加一个`server control`或`literal`（ runat 服务器）并在服务器中添加`itemTemplate`“ `findControl`” - 并更改其值。

其他解决方案是通过 jQuery - 搜索空的最后一个 TD。

但是 - 我的问题：

还有其他*服务器端*解决方案（）吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-06T10:59:48.470

你可以尝试这样的事情：

**.aspx 中的中继器：**

```
<asp:Repeater ID="Repeater1" runat="server">
    <ItemTemplate>
    <table>
    <tr>
          <td> <%# GetText(Container.DataItem) %></td>
    </tr>

    </table>
    </ItemTemplate>
</asp:Repeater> 
```

**.cs**：

```
 protected static string GetText(object dataItem)
 {
    string year = Convert.ToString(DataBinder.Eval(dataItem, "year"));
    if (!string.IsNullOrEmpty(year))
    {
        return year;
    }
    else
    {
        return "blahblah";
    }

 } 
```

IN`GetText`方法您可以通过字符串检查是否为空而不是返回字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T09:49:29.113

您可以尝试使用在控件绑定之前而不是在控件绑定之后发生的 itemcreated 事件。第一个链接中的示例：

[http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.repeater.itemcreated.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.repeater.itemcreated.aspx)

[http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.repeater_events.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.repeater_events.aspx)

ItemDataBound 在Repeater 控件中的项目被数据绑定之后但在页面上呈现之前发生。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-06T11:08:35.893

文件

```
<asp:Repeater ID="RPT_Bordereaux" runat="server">
    <ItemTemplate>
    <table>
    <tr>
          <td> <%# GetValue(Container.DataItem) %></td>
    </tr>

    </table>
    </ItemTemplate>
</asp:Repeater> 
```

.CS 代码

```
protected void RPT_Bordereaux_ItemDataBound(object sender, RepeaterItemEventArgs e)
{
    if (e.Item.ItemType == ListItemType.Item || e.Item.ItemType == ListItemType.AlternatingItem)
   {
   }
}

protected static string GetValue(object dataItem)
{
   string year = Convert.ToString(DataBinder.Eval(dataItem, "year"));
    if (!string.IsNullOrEmpty(year))
     {
       return Convert.ToString(year);
     }
     else
            {
                return "blahbla";
            }

         } 
```

这应该工作

# jquery - jQuery从多个根节点中删除

> ID：10469275
> 
> 赞同：-1
> 
> 时间：2012-05-06T08:40:26.537
> 
> 标签：jquery

我有以下问题

我创建了一个 jquery 多节点对象，我想通过 jquery 选择器删除其中一个节点

```
var o = $("<tr class=items /><tr class=details />");
o.find(".details").remove(); // doesn't work
var outer = $("<div />"); // try to wrap with an outer
outer.append(o);
outer.find(".details").remove(); //removes only from outer 
```

感谢帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T09:14:16.487

您不能在 jQuery 对象上使用 jQuery 的 DOM 操作函数。您可以通过扩展 jQuery 编写自己的函数来执行此操作，也可以使用默认的 Javascript 数组并使用 inArray 来提取您的值。

# python - 用其他字母替换列表中的特定字母

> ID：10469282
> 
> 赞同：-1
> 
> 时间：2012-05-06T08:43:01.500
> 
> 标签：python, list, replace

我有一个看起来像这样的列表：

```
foo = ["z", "q", "t", "a", "p", "m", "n", "b", "c", "w", "l", "d", "f", "h",
       "y", "e", "j", "k", "g", "i", "o", "r", "u", "s", "v", "x"] 
```

我有另一个看起来像这样的列表：

```
bar = ["h", "e", "l", "l", "o", "m", "y", "n", "a", "m", "e", "i", "s", "r",
       "e", "a", "l", "l", "y", "l", "o", "n", "g", "a", "n", "d"] 
```

我想做的是使用 foo 的第一个元素，并用它替换 bar 的第一个元素，这样 foo 的第一个元素现在总是值得`"h"`的，所以如果`"h"`再次出现在 bar 中，`"z"`（第一个元素foo) 被自动放入。 然后将 foo 的第二个元素替换为 bar 的第二个元素（除非它是`"h"`），然后第二个元素变为`"e"`，依此类推，直到整个或 bar 已使用 foo 对字母进行加密。然后打印新栏，但字母从加密过程中更改。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T08:49:37.883

其实很简单：

```
new_string = ''

for every letter in your string:
  new_string = new_string + bar[index of the "letter" in foo] 
```

我会留给你找出合适的 Python 函数，因为你会从学习如何自己做这件事中受益。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T09:00:19.620

为了与 Blender 的方法保持一致，这是另一种方法。

```
new_string = ''
cipher = dict(zip(foo,bar))
for every_letter in your_string: 
    # use more python magic here 
```

如果你打算使用 python，你应该了解[`dict`](http://docs.python.org/tutorial/datastructures.html#dictionaries).

# android - 使用 Fragment 时 findViewById 返回 NULL

> ID：10469283
> 
> 赞同：29
> 
> 时间：2012-05-06T08:43:46.087
> 
> 标签：android, android-activity, nullreferenceexception, fragment

我是 Android 开发的新手，当然也是 Fragments 的新手。

我想在主要活动中访问我的片段的控件，但“findViewById”返回 null。没有片段代码可以正常工作。

这是我的代码的一部分：

**片段**：_

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical"
    tools:ignore="HardcodedText" >

    <EditText
        android:id="@+id/txtXML"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:ems="10"
        android:scrollbars="vertical">
    </EditText>

</LinearLayout> 
```

MainActivity 的 onCreate ：

```
 @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        super.setContentView(R.layout.main);

        this.initialisePaging();

        EditText txtXML = (EditText) findViewById(R.id.txtXML);} 
```

在这一点上，**txtXML**为空。

我的代码中缺少什么或者我应该怎么做？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-10-24T12:46:07.137

在 onCreateView 上的片段上尝试这样

```
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {

    if (container == null) {
        return null;
    }

    LinearLayout ll = (LinearLayout )inflater.inflate(R.layout.tab_frag1_layout, container, false);
EditText txtXML = (EditText) ll.findViewById(R.id.txtXML);

    return ll;
} 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-05-07T07:41:00.603

您应该在方法上`inflate`设置片段的布局，然后您可以简单地使用.`onCreateView``Fragment``findViewById``Activity`

在此示例中，我的片段布局是一个 LinearLayout，因此我将`inflate`结果转换为 LinearLayout。

```
 public class FrgResults extends Fragment 
    {
        public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) 
        {
            //some code
            LinearLayout ll = (LinearLayout)inflater.inflate(R.layout.frg_result, container, false);
            //some code
            return ll;
        }
    } 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-06-17T18:10:32.593

我迟到了，但对于其他有这个问题的人。您应该在 onCreateView 方法中膨胀您的视图。然后覆盖该`onCreateActivity`方法，您可以`getView().findViewById`在那里使用。

```
@Override public View onCreateView(LayoutInflater inflater, ViewGroup     container, Bundle savedInstanceState) 
{
     return      inflater.inflate(R.layout.fragment, container, false);
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-05-06T11:00:37.867

您无法访问活动类中片段的视图，`findViewById`而是您可以做的是......

您的活动文件中必须有一个 Fragment 类的对象，对吧？在该片段类中创建 EditText 类的 getter 方法并在您的活动中访问该方法。

在需要 Edittext obj 的事件上在 Fragment 类中创建回调。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-05-06T09:46:30.057

1）试试这个：

Eclipse 菜单 -> 项目 -> 清理...

**更新**

2) 如果您有 2 个或更多“主”布局实例，请检查它们是否都有一个带有“txtXML”ID 的视图

3)

片段是可以放置在活动中的应用程序用户界面或行为的一部分。与fragment的交互是通过FragmentManager完成的，可以通过Activity.getFragmentManager()和Fragment.getFragmentManager()获得。

Fragment 类可以通过多种方式获得多种结果。它是核心，它代表了在更大的 Activity 中运行的特定操作或接口。Fragment 与其所在的 Activity 密切相关，不能单独使用。尽管 Fragment 定义了自己的生命周期，但该生命周期取决于其活动：如果活动停止，则无法启动其中的任何片段；当activity被销毁时，所有的fragment都会被销毁。

研究[这个](http://developer.android.com/reference/android/app/Fragment.html)。您必须使用 FragmentManager。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-09T18:33:18.713

如果您想像在活动 onCreate 中一样使用 findViewById，您可以简单地将所有内容放入覆盖的方法 onActivityCreated 中。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-08-13T05:54:31.923

上面的所有答案都告诉您应该如何“返回布局”，但没有确切告诉您如何引用返回的布局，因此我无法使用任何给出的解决方案。我使用了不同的方法来解决问题。在处理片段的 Fragment 类中，进入`onViewCreated()`该类并在其中创建一个上下文变量，以保存父活动（在我的情况下为主要活动）的上下文。

```
public void onViewCreated(@NonNull View view, Bundle savedInstanceState) {
    super.onViewCreated(view, savedInstanceState);
    Context fragmentContext = (MainActivity) view.getContext();
} 
```

完成后，您可以使用新上下文从`onViewCreated()`方法内部访问片段上的项目。

```
EditText editText = context.findViewById(R.id.textXML); 
```

# java - 用 weka 聚类相互作用的粒子

> ID：10469287
> 
> 赞同：2
> 
> 时间：2012-05-06T08:45:25.400
> 
> 标签：java, cluster-analysis, weka, data-mining, particles

我有一个可以这样总结的聚类问题：

*   我在 3D 空间中有 N 个粒子
*   每个粒子可以与不同数量的其他粒子相互作用
*   每一次互动都有力量
*   我不知道先验聚类的数量
*   我没有学习样本（应该无人监督）

输出：我想得到：

*   簇数
*   每个粒子成为集群一部分的概率（能够移除未明确分配的粒子）
*   我想直接从我的 java 代码中调用 clusterer。

问题：

*   什么集群最适合我的问题？
*   我应该如何格式化我的数据？
*   我应该使用 3D 定位信息来补充交互信息吗？
*   我怎样才能得到每个粒子的结果？

我对 weka 很陌生，但从我在互联网上可以找到的内容来看：

*   SOM 可以解决我的问题
*   这是一个多实例问题，但我可以找到任何显示如何创建关系数据的示例。SOM 是否支持关系属性？

谢谢你的帮助。让诺

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-06T14:50:10.670

Weka 在集群方面非常“有限”。它只有很少的聚类算法，而且非常有限。我不确定您是否可以将交互强度放入任何 Weka 聚类算法中。

您可能想看看[ELKI](http://elki.dbs.ifi.lmu.de/)。它拥有比 Weka 更先进的聚类算法，而且非常灵活。例如，您可以轻松定义自己的距离函数（[教程](http://elki.dbs.ifi.lmu.de/wiki/Tutorial/DistanceFunctions)）并将其用于任何基于距离的聚类算法。

选择合适的聚类算法是我们在这里无法回答的。您需要尝试一些并尝试不同的参数。您应该首先尝试回答的关键问题是：**什么是对您有用的集群**？

你已经开始提出其中一些问题。例如，您是否只想使用交互强度，或者是否还包括位置信息。但是由于我不知道*你*想要达到什么，我不能告诉你*如何*。

一定要看看 DBSCAN 和 OPTICS 算法（特别是 OPTICS，不要使用 Weka 中的算法。它很慢，不完整且无人维护！）。如果这对您的任务有任何意义，也许可以开始阅读他们的维基百科文章。这就是为什么我认为它们对您有帮助的原因：

*   他们不需要知道聚类的数量（与 k-means 和 EM 聚类不同）
*   他们需要一个“最小点”参数，本质上是一个“最小集群大小”；它控制结果的细粒度。增加它以获得更少和更大的集群。
*   他们可以使用任意距离或相似度函数（例如，*交互强度*）。对于 DBSCAN，您需要设置一个阈值来考虑显着性，对于 OPTICS，这不是必需的。

接下来，如果它们对您的用例有意义，我可能会使用 OPTICS 的交互强度数据并尝试集群的 Xi 提取。（Weka 没有 Xi 提取）。或者也许先看一下 OPTICS 图，看看你的相似性和 MinPts 参数是否真的产生了 OPTICS 所需的“谷”。DBSCAN 更快，但您需要修复距离阈值。如果您的数据集非常大，您可能希望从样本上的 OPTICS 开始，然后决定几个 epsilon 值并在具有这些值的完整数据集上运行 DBSCAN。

不过，请从这里开始阅读，看看这对您的任务是否有意义：

[https://en.wikipedia.org/wiki/DBSCAN#Basic_idea](https://en.wikipedia.org/wiki/DBSCAN#Basic_idea)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T20:06:21.950

如果您的数据是按照 WEKA 的 ARFF 文件格式准备的，那么您可以使用 WEKA 资源管理器的 CLUSTER 选项卡。这会聚类您的数据（无监督），并为您提供每个聚类的每个特征值的阈值。对于无监督学习非常方便。

# java - 为什么 MigLayout 不拉伸此表格单元格的大小以适应网格？

> ID：10469289
> 
> 赞同：0
> 
> 时间：2012-05-06T08:45:58.533
> 
> 标签：java, swing, miglayout

下面是我使用 Java Swing 和 MigLayout 作为主要布局管理器创建的 GUI 的屏幕截图。“游戏板”保持了尽可能小的尺寸，但这不是理想的行为。我希望它`JPanel`一直延伸到右侧和底部。

为什么布局的行为不像我预期的那样？我可以改变这种行为吗？

![图形用户界面](../Images/7ab75129cda4d40f005f48aa57af95f2.png)

以下是主窗口中的相关代码：

```
_frame.setLayout(new MigLayout());
_frame.getContentPane().add(_board);
_frame.getContentPane().add(_cardPick, "wrap, span 2 1");
_frame.getContentPane().add(_regList);
_frame.getContentPane().add(_chkPowerdown, "gapleft 15, align left bottom");
_frame.getContentPane().add(_btnSubmit, "gapleft 15, wrap, align left bottom");
_frame.pack(); 
```

前三个组件都有一个`TitledBorder`. 它们是`JPanel`带有`MigLayout`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T15:32:09.507

Marko Topolnik 的这条[评论解决了我的问题：](https://stackoverflow.com/questions/10469289/why-doesnt-miglayout-stretch-the-size-of-this-table-cell-to-fit-the-grid#comment13524792_10469289)

> 但是电路板组件上没有布局提示。默认为不拉伸。你读过`grow`和`fill`约束吗？

# jquery - 使用 jQuery 等待两个事件，并在两者都完成后执行回调

> ID：10469292
> 
> 赞同：0
> 
> 时间：2012-05-06T08:46:23.390
> 
> 标签：jquery

我有一个`.click()`关于元素的事件。在它关闭后，这个暴徒会发生一个转换和一个 AJAX 调用。这就是发生的一切。

我需要的是一个回调，以便在完成这两件事时将其放入`.click()`函数中以执行，即使不支持转换也是如此。这是一个时间表：

jQuery 需要等待 ajax 调用和转换，然后在 ajax 调用完成并且转换完成或根本没有发生后执行回调。

我怎样才能做到这一点？谢谢！

*注意：我正在使用`$.ajax()`ajax 调用和相关元素上的正常 CSS3 转换。我可以使用javascript事件绑定检测transitionEnd，我有一个名为transitionEnd的变量设置和另一个检测浏览器是否支持转换调用supportsTrans的变量。*

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-06T08:52:01.500

每个事件都有一个标志，最初是错误的。挂钩有问题的两个事件（`transitionEnd`和 ajax`success`，听起来像）。每个事件设置它的标志并调用一个函数。该函数检查标志：如果两者都设置，它会做一些事情。

这是一个使用`animate`CSS 过渡而不是 CSS 过渡的示例，只是为了简单起见：[Live example](http://jsbin.com/orulan/2) | [资源](http://jsbin.com/orulan/2/edit)

```
jQuery(function($) {

  $("#theButton").click(function() {
    this.style.display = "none";
    $("#box, #content").show();
    doTheStuff();
  });

  function doTheStuff() {
    var ajaxDone = false,
        ajaxFailed = false,
        animationDone = false;

    display("Triggering ajax and animation");

    $.ajax({
      url: "http://jsbin.com/ibebiv",
      method: "GET",
      success: function(data) {
        $("#content").append(data);
        display("ajax done");
        ajaxDone = true;
        checkDone();
      },
      error: function() {
        ajaxFailed = true;
        checkDone();
      }
    });

    $("#box").animate({
      left: "+200px"
    }, function() {
      display("animation done");
      animationDone  = true;
      checkDone();
    });

    function checkDone() {
      if ((ajaxDone || ajaxFailed) && animationFlag) {
        display("<strong>All done</strong>");
      }
    }
  }

  function display(msg) {
    $("<p>").html(msg).appendTo("#content");
  }
}); 
```

注意错误处理，以防 ajax 调用失败。

# https - tomcat配置为https时无法启动

> ID：10469297
> 
> 赞同：0
> 
> 时间：2012-05-06T08:47:17.863
> 
> 标签：https, localhost

嗨，我正在使用 localhost 和 tomcat 测试 https

我首先去了 c:/tomcat7 的路径

我输入了命令 keytool -genkey -alias tomcat -keyalg RSA -keystore mycert.jks

所以我在 c:/tomcat7 文件夹中得到了文件 mycert.jks（我给了密码 haihai）

然后我对server.xml进行了如下更改

```
<Connector port="8443" protocol="HTTP/1.1" SSLEnabled="true"
               maxThreads="150" scheme="https" secure="true" keystoreFile=”mycert.jks” keysotrePass="haihai"
               clientAuth="false" sslProtocol="TLS" /> 
```

但是tomcat正在启动并立即关闭。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T09:03:31.270

确保如果您在此处更改端口号，您还应该更改为非 SSL 连接器上的 redirectPort 属性指定的值。这允许 Tomcat 自动重定向尝试访问具有指定 SSL 的安全约束的页面的用户，正如 Servlet 规范所要求的那样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-16T15:31:35.063

根据[文档](http://tomcat.apache.org/tomcat-7.0-doc/ssl-howto.html)，您需要提供密钥库的完整路径：

```
<!-- Define a SSL Coyote HTTP/1.1 Connector on port 8443 -->
<Connector
           protocol="HTTP/1.1"
           port="8443" maxThreads="200"
           scheme="https" secure="true" SSLEnabled="true"
           keystoreFile="${user.home}/.keystore" keystorePass="changeit"
           clientAuth="false" sslProtocol="TLS"/> 
```

如果要使用默认的 java 密钥库，则无需提供密钥库路径。

# java - 字节码和位码有什么区别

> ID：10469301
> 
> 赞同：8
> 
> 时间：2012-05-06T08:48:09.470
> 
> 标签：java, gcc, compiler-construction, llvm, bytecode

> **可能重复：**
> [LLVM 和 java 字节码有什么区别？](https://stackoverflow.com/questions/454720/what-are-the-differences-between-llvm-and-java-bytecode)

例如，在 LLVM 中，它说..

```
What is commonly known as the LLVM bitcode file format 
(also, sometimes anachronistically known as bytecode) is actually two things: 
a bitstream container format and an encoding of LLVM IR into the container 
format. 
```

我只知道可以由 JVM 运行的独立于平台的 Java 字节码

但是对于 LLVM 位代码，还有更具体的例子吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T08:53:59.753

从[LLVM 邮件列表](http://lists.cs.uiuc.edu/pipermail/llvmdev/2010-September/035076.html)：

> 该格式实际上是比特流，而不是字节流。有关详细信息，请参阅此文档：http: [//llvm.org/docs/BitCodeFormat.html](http://llvm.org/docs/BitCodeFormat.html)

# pascal - Lazarus：小部件窗口不再显示

> ID：10469305
> 
> 赞同：2
> 
> 时间：2012-05-06T08:49:02.577
> 
> 标签：pascal, lazarus

在 Lazarus 应用程序中使用 LCL 时，您应该有一个窗口，其中包含您使用的所有小部件出现在 IDE 中。出于某种奇怪的原因，我的一个项目中不再有这个 Windows，并通过 Lazarus 菜单查找它，但没有任何成功。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T04:24:18.080

结果比我想象的要容易：单击`Toggle between Unit and Form`左上角的按钮（保存按钮旁边）或在`F12`包含表单的单元上单击键盘快捷键会打开表单窗口。

# c# - 使用 Autofac 解决 XAML 中的依赖关系

> ID：10469308
> 
> 赞同：1
> 
> 时间：2012-05-06T08:50:15.817
> 
> 标签：c#, wpf, xaml, dependency-injection, autofac

我的应用程序中有一个类`MyResource`，如下所示：

```
public class MyResource : IMyResource
{
    // ... whatever ...
} 
```

当我在 App.xaml.cs 中初始化我的应用程序时，我使用 Autofac 有类似的东西：

```
builder.Register<IMyResource>(container => new MyResource()); 
```

现在我需要`StaticResource`在`Window`我的 WPF 应用程序中添加一个，如下所示：

```
<Window.Resources>
    <local:MyResource x:Key="MyResource" />
</Window.Resources> 
```

但是，当然，整个想法*并不是要*引用这里的具体实例`MyResource`。此外，我可能需要在我的应用程序`MyResource`中使用不同`Window`或不同的实例。`UserControl`所以我想使用一个通过 Autofac 容器解析的`MyResource`as a `StaticResource`for my实例。`Window`我怎样才能做到这一点？

我正在考虑在 my 的代码隐藏中添加资源`Window`，但它可能会创建对我不想要的容器的依赖。

当我初始化应用程序时，我也在考虑在 App.xaml.cs 中做类似的事情：

```
App.Current.MainWindow.Resources.Add("MyResource", container.Resolve<IMyResource>()); 
```

但是当我在我的 XAML 中使用资源时

```
<ListBox ItemsSource="{Binding Source={StaticResource ResourceKey=MyResource}}"/> 
```

我收到了`XAMLParseException`哪个内部异常的消息，指出找不到名为 MyResource 的资源。即使它起作用了，我也觉得它有点臭。

那么如何实现呢？只有可能吗？如果不是，那么实现这一点的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T16:51:00.433

按着这些次序

*   注册`MyWindow`并`MyResource`使用 Autofac。
*   放置`IMyResource`在`MyWindow`（是的，您正在修改后面的代码，但您不是指您的容器的构造函数中。如果您不能在代码隐藏中包含代码 - 也许您是 UserControl - 然后确保有人正在设置`DataContext`某处）
*   设置`DataContext`为`IMyResource`（在构造函数中）的具体实例，或者如果您使用的是 MVVM，请将实例放入您的视图模型（也将使用 Autofac 注册）。
*   解决`MyWindow`

在代码中：

```
MyWindow(IMyResource myResource) : this()
{
  DataContext = myResource;
} 
```

如果您使用的是 ViewModel（也在 Autofac 中注册）：

```
MyWindow(MyViewModel viewModel) : this()
{
  DataContext = viewModel;
} 
```

将此行添加到您的 XAML：

```
<Window.DataContext><local:IMyResource></Window.DataContext> 
```

或这个：

```
<Window.DataContext><local:MyViewModel></Window.DataContext> 
```

然后你的标记`ListBox`变得微不足道：

```
<ListBox ItemsSource="{Binding}"/> 
```

或者，使用 viewmodel，作为 property `Items`，例如，它同样好：

```
<ListBox ItemsSource="{Binding Items}"/> 
```

# java - AlramManager 安排任务在预定义的时间后运行

> ID：10469310
> 
> 赞同：0
> 
> 时间：2012-05-06T08:50:46.217
> 
> 标签：java, android, broadcastreceiver, alarmmanager, android-pendingintent

我正在尝试使用`AlarmManager`来安排任务在预定义的时间运行。这`AlarmManager`是从我的应用程序初始化并在后台运行（运行良好），当在方法`Broadcast`内部接收到事件时，我调用一个服务，在其中我试图重新安排它来调用说“15 分钟后”；但由于某些原因它不起作用。它所做的一切就是停止.`onReceive()``context.startService(webServiceIntent);``PendingIntent``PendingIntent`

以下是相关来源：

```
//Initiliazing AlarmManager from my app
AlarmManager alarmManager = (AlarmManager) getSystemService(ALARM_SERVICE);             
pendingIntent = PendingIntent.getBroadcast(this, 0, getLocationPollerIntent(), 0);
alarmManager.setRepeating(AlarmManager.ELAPSED_REALTIME_WAKEUP, SystemClock.elapsedRealtime(),  Constant.LOCATION_POLLING_PERIOD, pendingIntent);

//onReceive Method of BroadcastReceiver
@Override
public void onReceive(Context context, Intent intent) {
        Intent webServiceIntent = new Intent(context, LocationNotificationService.class);
        webServiceIntent.putExtra("UPDATED_LOCATION", loc);
    context.startService(webServiceIntent);
}

//Inside LocationNotificationService to reschedule the PendingIntent - This PendingIntent never get called

protected void onHandleIntent(Intent intent) {
       c.set(Calendar.HOUR_OF_DAY, 13);
       c.set(Calendar.MINUTE, 35);
       c.set(Calendar.SECOND, 0);

       AlarmManager alarmManager = (AlarmManager) getSystemService(ALARM_SERVICE);
       PendingIntent pendingIntent = PendingIntent.getBroadcast(this, 0, getLocationPollerIntent(), PendingIntent.FLAG_UPDATE_CURRENT);
       alarmManager.setRepeating(AlarmManager.ELAPSED_REALTIME_WAKEUP, c.getTimeInMillis(), Constant.LOCATION_POLLING_PERIOD, pendingIntent);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T12:26:00.893

问题 1：如果在您的通话`SystemClock.elapsedRealtime()`期间毫秒计时结束，可能已经过去了。`setRepeating()`确保您指定未来的时间。

问题 #2：如果您在设备的当前时区`13:35`之后运行此代码，可能已经过去了。`13:35`确保您指定未来的时间。

`startService()`问题 3：许多设备在您的通话和之间睡着了`onHandleIntent()`，这就是我写[`WakefulIntentService`](https://github.com/commonsguy/cwac-wakeful).

# c# - 访问由反射创建的类型的属性

> ID：10469311
> 
> 赞同：0
> 
> 时间：2012-05-06T08:50:48.530
> 
> 标签：c#, reflection

我有以下代码：

```
List<MultiServiceRequestMember> _memberList = new List<MultiServiceRequestMember>();
var type = Type.GetType(svc.NotificationClassName); <- this is a string of the class name.
MultiServiceRequestMember newMember = (MultiServiceRequestMember)Activator.CreateInstance(type);

_memberList.add(newMember); 
```

MultServiceRequestMember 是一种基本类型，我想将值分配给特定于`type`. 我的问题是：我如何转换 newMember 来输入和访问它的属性？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T08:56:53.153

> 如何转换 newMember 以键入和访问它的属性？

你不能*转换*它，因为你在编译时不知道具体的类型。如果你这样做了，你一开始就不需要反思！

您还必须通过反射设置属性：

```
// TODO: Checking that you managed to get the property, that's it's writable etc.
var property = type.GetProperty("PropertyName");
property.SetValue(newMember, "new value", null); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T08:59:02.113

您必须将代码更改为如下所示：

```
List<MultiServiceRequestMember> _memberList = new List<MultiServiceRequestMember>();
var type = Type.GetType(svc.NotificationClassName);
MultiServiceRequestMember newMember = null;
if (type == typeof(MultiServiceRequestMemberA))
{
    newMember = new MultiServiceRequestMemberA();
    //set specific properties
}
else if (type == typeof(MultiServiceRequestMemberB)) //etc.
{
    //...
}
else
{
    //throw or some default
}

_memberList.add(newMember); 
```

但是，它看起来像代码异味。我猜你正在尝试基于其他对象初始化一个对象（我们称之为 NotificationInfo）。然后代替看起来像这样的代码：

```
if (type == typeof(MultiServiceRequestMemberA))
{
    newMember = new MultiServiceRequestMemberA();
    newMember.A = notificationInfo.A;
} 
```

也许应该考虑以下设计：

```
class MultiServiceRequestMember
{
    public virtual void Initialize(NotificationInfo notificationInfo) //or abstract if you wish
    {
    }
}

class MultiServiceRequestMemberA : MultiServiceRequestMember
{
    public override void Initialize(NotificationInfo notificationInfo)
    {
        base.Initialize(notificationInfo);
        this.A = notificationInfo.A;
    }
} 
```

然后您就可以保留之前的代码，只需调用 Initialize。

# c# - 从 Vimeo url 中提取拇指

> ID：10469312
> 
> 赞同：1
> 
> 时间：2012-05-06T08:51:34.000
> 
> 标签：c#, .net, regex, parsing, vimeo

我想从 Vimeo 视频页面中提取图像。我已经浏览过这些链接

[C# 正则表达式通过 url 从 youtube 和 vimeo 获取视频 ID](https://stackoverflow.com/questions/3652046/c-sharp-regex-to-get-video-id-from-youtube-and-vimeo-by-url)

[从 Vimeo 获取 img 缩略图？](https://stackoverflow.com/questions/1361149/get-img-thumbnails-from-vimeo)

[使用 jquery 动态加载 Vimeo 视频](https://stackoverflow.com/questions/6805297/using-jquery-to-dynamically-load-vimeo-videos)

并在上述链接的帮助下，我掌握了这个正则表达式：**vimeo.com/(?:.# *|* ./videos /)?([0-9]+)**

我可以通过上述正则表达式为这些网址解析视频 ID（我需要提取缩略图）

[http://vimeo.com/channels/hd#11384488](http://vimeo.com/channels/hd#11384488)

[http://vimeo.com/groups/brooklynbands/videos/7906210](http://vimeo.com/groups/brooklynbands/videos/7906210)

[http://vimeo.com/staffpicks#13561592](http://vimeo.com/staffpicks#13561592)

[http://vimeo.com/834881](http://vimeo.com/834881)

但我无法获取这些类型的 url 的 id：

[http://vimeo.com/videoschool/lesson/20/make-a-great-holiday-video](http://vimeo.com/videoschool/lesson/20/make-a-great-holiday-video)

[http://vimeo.com/videoschool/lesson/38/video-101-adding-text-and-titles-with-imovie](http://vimeo.com/videoschool/lesson/38/video-101-adding-text-and-titles-with-imovie)

**这些 url 甚至不包含视频 id 信息**。如何从中提取视频ID？有没有其他方法可以通过提供 url 来提取 vimeo 视频的缩略图？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T03:54:19.280

您必须抓取 URL 并从 HTML 中解析视频 ID。它在那里很多次，但一种方法是从`<div>`视频周围的一个标签的 id 中获取它。对于您发布的最后一个 URL，它看起来像这样：

`<div id="player_17861379_1698442974" class="f player">`

下划线字符之间的第一个数字字符串是视频 ID。您可以使用正则表达式从 HTML 中解析它，例如：

`<div[^<]+?id="player_(\d+?)_`

哪个应该给你 17861379。没有文章的同一视频位于[http://vimeo.com/17861379](http://vimeo.com/17861379)。

# android - 拦截 YouTube 搜索

> ID：10469318
> 
> 赞同：0
> 
> 时间：2012-05-06T08:52:56.027
> 
> 标签：android, youtube, intercept

我想要的是让用户能够在任何应用程序请求 YouTube 搜索时运行我的应用程序而不是默认的 YouTube 应用程序。我试过玩`intent-filter`，但没有成功。意图看起来像这样（来自 DDMS）`Starting: Intent { act=android.intent.action.SEARCH flg=0x10000000 pkg=com.google.android.youtube cmp=com.google.android.youtube/.app.froyo.phone.ResultsActivity (has extras) } from pid 4766`：. 如您所见，它不包含任何`data`字段，因此我无法`<data>`像处理 URL 拦截那样轻松地将元素添加到我的意图过滤器中。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T12:22:20.207

For the `Intent` that you have listed, it is impossible for you to "intercept" it, as it specifically identifies the component (`cmp=com.google.android.youtube/.app.froyo.phone.ResultsActivity`).

# python - 卡在python打开文件方法

> ID：10469319
> 
> 赞同：-3
> 
> 时间：2012-05-06T08:53:12.360
> 
> 标签：python, user-interface, interface

我正在尝试在 Python 2.7 中构建一个汇编程序，但我被困在了第一步。谁能给我一个例子，说明如何编写代码来打开一个对话框来选择一个文件，就像使用 Java filechooser 方法一样？

我熟悉 open 方法，但问题是您必须在方法中指定位置。我需要能够选择任何文件，而不仅仅是指定的文件。我知道“raw_input”可能与此有关，但我不完全确定如何实现它，因此将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T08:56:53.957

[此答案](https://stackoverflow.com/a/6904731/367273)中提供的代码在我的机器上运行良好。

# android-emulator - Android DDMS 无法建立 Loopback 线程

> ID：10469320
> 
> 赞同：0
> 
> 时间：2012-05-06T08:53:13.997
> 
> 标签：android-emulator, ddms

我已经在 Eclipse ADT 和 android sdk 附带的 ddms.bat 中进行了尝试。两者的结果相同：*“无法初始化监视器线程：无法建立环回连接”*。

但是，如果我以安全模式启动计算机，它就可以正常工作。显然，这意味着问题出在我计算机上的某些第三方服务或驱动程序上。

因此，我在正常模式下检查并停止了计算机上的所有非关键服务，但 ddms 仍然返回错误。

**如何确定导致问题的原因？**

*计算机详细信息：
Windows 7（64 位）
Windows 防火墙...禁用
Agnitum Outpost Security...为所有程序添加例外，关闭防火墙，关闭防泄漏，暂停保护，关闭自我保护，并停止进程*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T23:23:20.657

我相信我已经解决了我自己的问题。即使在禁用了我可以使用的 Agnitum Outpost Security 软件包的每个部分之后，ddms 仍然无法工作，但是在我卸载 Agnitum Outpost 之后，ddms 工作得很好。

问题在于 Agnitum Outpost 在某个低级别阻塞了套接字，可能是驱动程序或类似的东西。

# javascript - 如何在 chrome.contextMenus.create onClick 函数中获取 TITLE 的参考？

> ID：10469323
> 
> 赞同：0
> 
> 时间：2012-05-06T08:53:54.677
> 
> 标签：javascript, google-chrome-extension

我想在 onClick 函数中获取 chrome.contextMenus.create title 属性的参考。

例如：

```
chrome.contextMenus.create({"title": "sometitle", "contexts":["selection"], "onclick": searchSelection});

function searchSelection(info, tab){
    var query = "<i want title (sometitle) here>"+info.selectionText;
    var url = "http://www.google.com/search?q="+query;
    chrome.tabs.create({url: url});
} 
```

我搜索了，但没有找到这样做的选项。

* * *

+1 问题：有没有办法内联编辑 contextMenu 项目？还是在 CM 元素之后附加一个可编辑的输入字段？我认为没有，但值得提出一个问题:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T09:07:43.240

没有现有的 API 方法来检索有关给定菜单项的信息，因为这些信息很少需要，并且已经可供扩展程序的开发人员使用。

这是实现结果的通用函数：

```
/**
 * Creates a menu item using chrome.contextMenus.create.
 * When the second argument is specified, the click handler receives a
 *  third argument: The original creation data.
 * When the "onclick" property is set in the creationData, the "onclick"
 *  event does not receive a third parameter.
 *
 * @param object creationObject    Basic creation object
 * @param function onclickHandler  "click" property of the creationObject
 */
function createMenuItem(creationObject, onclickHandler) {
    if (onclickHandler) {
        creationObject.onclick = function(onClickData, tab) {
            onclickHandler(onClickData, tab, creationObject);
        };
    }
    return chrome.contextMenus.create(creationObject);
}

// Usage:
createMenuItem({"title": "sometitle", "contexts":["selection"]}, searchSelection);
function searchSelection(info, tab, creationData) {
    var query = "<i want title " + creationData.title + " here>" + info.selectionText;
    var url = "http://www.google.com/search?q=" + query;
    chrome.tabs.create({url: url});
} 
```

不，没有办法添加内联可编辑的菜单项（[文档`chrome.contextMenus.create`](http://code.google.com/chrome/extensions/contextMenus.html#method-create)中提到了唯一可用的选项）。

# azure - 在 Windows azure 上将办公文件（word、excel、power point）转换为 pdf

> ID：10469328
> 
> 赞同：0
> 
> 时间：2012-05-06T08:54:18.210
> 
> 标签：azure

我正在构建一个用户可以上传文件的 Web 应用程序。我希望能够在用户上传到 pdf 时转换 office 文档。有人实施过这样的事情吗？或者找到可以在天蓝色环境中完成的产品？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T10:41:26.327

Aspose 支持 Windows Azure。如果您查看他们的网站，有一个在 Windows Azure 中将 Microsoft Word 文档转换为 PDF 的指南：

[如何在 Windows Azure 中转换文档](http://www.aspose.com/docs/display/wordsnet/How+to++Convert+Documents+in+Windows+Azure "如何在 Windows Azure 中转换文档")

您可以假设大多数解决方案都可以在 Windows Azure 中运行，但使用 Office 自动化的解决方案需要在您的实例上安装 Office。无论如何安装 Office（使用 VM 角色或启动任务）都不是一个好主意：http: [//support.microsoft.com/kb/257757](http://support.microsoft.com/kb/257757)

# php - CodeIgniter 搜索查询

> ID：10469330
> 
> 赞同：1
> 
> 时间：2012-05-06T08:55:14.213
> 
> 标签：php, mysql, codeigniter, search

我正在编写一些脚本，我想创建搜索。我的项目基于 CodeIgniter，我希望所有代码内容都与它兼容。我已经写过这样的问题，但是我没有得到足够的帮助，也没有人愿意帮助我，所以我打开了这个问题。

我已经在研究用于搜索的查询，但这并不好，因为它不支持多个单词。因此，如果我在搜索表单中输入单词“test”（假设测试单词在数据库中的某个字段中），结果将很少，但是如果我输入单词“test test test”（再次假设测试单词是在其中一个字段的数据库中）将没有任何结果。

我之前的查询：

```
$this->db->select('title, content, date, hyperlink')->or_like(array('title' => $query, 'content' => $query))->order_by('id_article', 'desc')->get('news'); 
```

经过一些调整：

```
$this->db->select('title, content, date, hyperlink');
foreach ($parts as $q)
{
    $this->db->or_like(array('title' => $q, 'content' => $q));
}
$this->order_by('id_article', 'desc')
$show_results = $this->db->get('news'); 
```

创建良好查询的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T09:03:51.647

试试这个代码。这将在您的搜索查询中为您提供更多帮助。它将搜索任意数量的单词，只要该单词存在。

```
$this->db->select('title, content, date, hyperlink');
$this->db->where("title LIKE '%$query%' OR content LIKE '%$query%'"); 
```

希望这对您有所帮助。

# jquery - 如何找出使用jQuery单击了哪个表格行？

> ID：10469334
> 
> 赞同：1
> 
> 时间：2012-05-06T08:55:50.837
> 
> 标签：jquery

我正在使用“实时”功能在表格行上做一些点击操作，即

```
$("tr").live('click',function() {
      alert('Some table row is clicked');
}); 
```

我想找出单击和使用哪一行，并`if-else`基于此给出一些自定义警报。谁能告诉我该怎么做？

非常感谢。

**编辑1：**

有没有办法可以引用函数内单击行的元素？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-06T08:57:10.137

```
$("tr").live('click', function() {
    if (this.id == "foo") {
        alert('the tr with the foo id was clicked');
    }
});​ 
```

如果要检查哪个行号，请使用`index`：

```
$("tr").live('click', function() {
   if $(this).index() === 2) {
     alert('The third row was clicked'); // Yes the third as it's zero base index
   }
});​ 
```

[**现场演示**](http://jsfiddle.net/Kh9vt/)

* * *

**更新：**

```
$("tr").live('click', function() {
    // "this" is the clicked <tr> element
    // $(this).find('td span') is the spans inside a td inside the clicked <tr>
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-06T09:04:53.693

First you shouldn't use .live() ever :)

[why you shouldn't use .live()](http://www.ultimatewebtips.com/why-jquery-live-is-a-bad-option-to-use/)

you can use instead .delegate()
**Example**

```
$(document).delegate("tr", "click", function(e) {
 // write your code here 
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-06T09:09:38.527

Let me suggest an easy way. Suppose this is your table:

```
<table>
<tr id = '1' class="tr">...</tr>
<tr id = '2' class="tr">...</tr>
<tr id = '3' class="tr">...</tr>
</table> 
```

Place this in your jQuery code:

```
$(function(){

$('.tr').click(function(){
var row_no = $(this).attr('id');
alert('Row number '+row_no+' was clicked');
});

}); 
```

Hope this helps you.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-06T09:02:10.727

演示：http: [//jsfiddle.net/zJUuX/](http://jsfiddle.net/zJUuX/)

HTML：

```
<table>
    <tr><td>hey</td></tr>
    <tr><td>hi</td></tr>
</table> 
```

查询：

```
$("table tr").click(function(){
    messages( $(this).index() );
});

    function messages(index) {
        switch(index){
            case 0:
                alert("you clicked 1st row");
                break;
            case 1:
                alert("you clicked 2nd row");
                break;
            default:
                break;
        }
        $("table tr").eq(index).css("background","#ff0");
        $("table tr").eq(index).find("a"); //will find all the nested anchor tags.
    } 
```

好了，学习者，现在我将接受我的虚拟积分：D。玩得开心。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-06T09:01:59.030

您可以使用 访问单击的元素`this`。

*offtopic* : $.live 自 1.7 起已弃用，您应该使用 $.on。请参阅[此处](http://api.jquery.com/live/)了解更多信息。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-06T09:02:54.017

As an improvement on gdoron's answer jQuery's live() is deprecated, try `delegate` or `on`:

```
$("#mytable").delegate("tr", "click", function(e) {
  if (this == "foo") {
     ....
  }
}); 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-05-06T09:02:45.123

```
//Even row
$("tr:even").click(function() {
    alert('Even');
});

//Odd row
$("tr:odd").click(function() {
    alert('Odd');
});​ 
```

# django - django haystack - 使用通用视图函数进行搜索

> ID：10469340
> 
> 赞同：3
> 
> 时间：2012-05-06T08:57:09.360
> 
> 标签：django, django-views, django-urls, django-haystack

我正在尝试将此代码从 haystack 转换为 urls.py 调用通用视图函数，但我得到**'function' object has no attribute 'status_code'**。我认为这是因为它没有返回响应对象。

干草堆代码：

```
from django.conf.urls.defaults import *
from haystack.forms import ModelSearchForm, HighlightedSearchForm
from haystack.query import SearchQuerySet
from haystack.views import SearchView

sqs = SearchQuerySet().filter(author='john')

# With threading...
from haystack.views import SearchView, search_view_factory

urlpatterns = patterns('haystack.views',
    url(r'^$', search_view_factory(
        view_class=SearchView,
        template='search/search.html',
        searchqueryset=sqs,
        form_class=HighlightedSearchForm
    ), name='haystack_search'),
) 
```

我的新 urls.py 只是在 views.py 中调用 search()。

在views.py中，我有

```
def search(request):
    sqs = SearchQuerySet().all()
    return search_view_factory(
        view_class=SearchView,
        template='search/search.html',
        searchqueryset=sqs,
        form_class=HighlightedSearchForm
        ) 
```

我这样做是因为我想根据用户输入和状态来处理 sqs 相当多的问题。

上面的 search_view_factory 不应该返回一个 SearchView 类，似乎它会自动调用 create_response() 并返回 render_to_response。尝试手动调用 create_response() ，但这也不起作用。

[django-haystack 代码](https://github.com/toastdriven/django-haystack/blob/master/haystack/views.py)可以在这里找到。

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-06T09:58:42.863

`search_view_factory`返回一个视图函数而不是一个，`HttpResponse`您需要正确调用它。

```
def search(request):
    sqs = SearchQuerySet().all()
    view = search_view_factory(
        view_class=SearchView,
        template='search/search.html',
        searchqueryset=sqs,
        form_class=HighlightedSearchForm
        )
    return view(request) 
```

抱歉在您之前的问题中误导，我也已修复它。

# node.js - 如何使用 Formidable 将文件上传直接流式传输到 Mongo 的 GridFS？

> ID：10469350
> 
> 赞同：4
> 
> 时间：2012-05-06T08:59:01.727
> 
> 标签：node.js, mongodb, file-upload, stream

我正在尝试将来自 Formidable 的上传直接流式传输到 Mongo 的 GridFS。

在写入任何数据之前需要打开 GridStore，但是在打开存储所需的时间内，已经有太多数据未解析并且失败。

如何准备 GridStore 然后处理传入的上传？

```
function upload (request, response, next, options) {
    var form = new Formidable.IncomingForm();

    var store = new Mongo.GridStore(options.mongoose.connection.db, new ObjectID, 'w+', {
        root: 'store',
        chunk_size: 1024 * 64
    } );

    form.onPart = function (part) {
        if(!part.filename){
            form.handlePart(part);
            return;
        }

        part.on('data', function(buffer){
            store.write(buffer);
        });

        part.on('end', function() {
            store.close();
        });
    };

    store.open( function (error, store) {
        form.parse(request);
    });

    response.send();
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T18:05:08.577

由于打开 GridStore 文件是异步的，而强大的不是，因此您需要在等待 GridStore 文件打开时对强大的传入流进行一些手动缓冲。由于 GridFS 无法通过管道传输给您，因此您需要在打开后手动将每个缓冲块写入 GridStore。

刚刚发布`gridform`的应该可以满足您的需求。

[https://github.com/aheckmann/gridform](https://github.com/aheckmann/gridform)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-21T16:18:19.570

您可以将表单的处理代码移动到`store.open`回调中，例如：

```
function upload (request, response, next, options) {

    var store = new Mongo.GridStore(options.mongoose.connection.db, new ObjectID, 'w+', {
        root: 'store',
        chunk_size: 1024 * 64
    } );

    store.open( function (error, store) {
        var form = new Formidable.IncomingForm();
        form.onPart = function (part) {
            if(!part.filename){
                form.handlePart(part);
                return;
            }

            part.on('data', function(buffer){
                store.write(buffer);
            });

            part.on('end', function() {
                store.close();
            });
        };
        form.parse(request);
    });

    response.send();
} 
```

# xcode - XCode UITextField

> ID：10469353
> 
> 赞同：0
> 
> 时间：2012-05-06T08:59:31.693
> 
> 标签：xcode, uitextfield

在**.h**里面：

```
@interface MyController : UIViewController<UITextFieldDelegate> {

   IBOutlet UITextField *phonenum;
   IBOutlet UITextField *email;
}

@property (nonatomic, retain) UITextField *phonenum;
@property (nonatomic, retain) UITextField *email;

-(IBAction) btnClicked: (id) sender;
@end 
```

在**.m**里面：

```
-(IBAction) btnClicked: (id) sender{

NSString *str = [[NSString alloc]init];
NSLog(@"str=%@",str);  //this contains valid value
email.text=str;  /// does not set the value
[[self email] setText: str];  // does not set the value
} 
```

在没有使用 NSString 的变量 str 设置 UITextField 值的情况下，我做错了什么？这是某种接口生成器设置吗？我有文件所有者的委托链接。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T09:44:38.870

似乎 str 为零，所以什么也没有发生。你的最后两行做同样的事情。你应该写

`NSString *str = email.text;`

然后用str做一些事情，比如

`user.email = str;`

或直接

`user.email = email.text`

如果您想使用 UITextField 中的文本更新用户电子邮件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T06:15:29.877

也许您忘记将您的插座与 Interface Builder 中的接口连接起来

如果您不知道如何操作，请参阅：

[http://developer.apple.com/library/mac/#recipes/xcode_help-interface_builder/CreatingOutlet.html](http://developer.apple.com/library/mac/#recipes/xcode_help-interface_builder/CreatingOutlet.html)

# c# - C#更改多个控件的背景图片

> ID：10469354
> 
> 赞同：0
> 
> 时间：2012-05-06T08:59:45.307
> 
> 标签：c#, winforms

在 C# 表单中，我创建了一个函数，该函数一旦被调用，就会创建一个具有所需图像、大小和位置的图片框：

```
private void NewPic(string nName, int locX, int locY, int SizX, int SizY, Image Img)
{
    PictureBox Pic = new PictureBox();
    Pic.Name = nName; Pic.Image = Img;
    Pic.BackColor = Color.Transparent;
    Pic.SizeMode = System.Windows.Forms.PictureBoxSizeMode.StretchImage;
    Pic.Size = new System.Drawing.Size(SizX, SizY);
    Pic.Location = new System.Drawing.Point(locX, locY);
    Controls.Add(Pic);
    Pic.Click += new EventHandler(Pic_Click);
} 
```

现在，当我需要一张图片时，我会这样做：

```
NewPic("FIRE", 32, 100, 120, 120, Properties.Resources.Image); 
```

问题是，在单击事件中，当我单击图片框时，我希望它更改其背景图像，但是，如果我单击其他一些图片框，我希望最后一个图片框自行重置：

```
private void Pic_Click(object sender, System.EventArgs e)
{
    PictureBox pb = (PictureBox)sender;
    switch (pb.Name)
    {
        case "1": 
            pb.BackgroundImage = Properties.Resources.OtherImg; //creates the background
            pb.BackgroundImageLayout = ImageLayout.Stretch;
                //INSERT CODE HERE: to remove from other if it has
            break;
        case "2":
            pb.BackgroundImage = Properties.Resources.OtherImg; //creates the background
            pb.BackgroundImageLayout = ImageLayout.Stretch;
                //INSERT CODE HERE: to remove from other if it has
            break;
        }
     } 
```

我需要可以应用于多个图片框/对象的代码，而不仅仅是两个

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T09:08:02.850

最简单的方法是在表单中添加一个成员，该成员将跟踪先前单击的 PictureBox：

```
PictureBox _lastPictureBox = null; 
```

在处理程序中，检查 _lastPictureBox 是否有值，并根据需要更新它：

```
private void Pic_Click(object sender, System.EventArgs e)
{
    PictureBox pb = (PictureBox)sender;
    if (_lastPictureBox != null) 
    {
        // update the previous one, eg:
        _lastPictureBox.BackgroundImage = Properties.Resources.FirstImg;
    }

    // now set it to the current one:
    _lastPictureBox = pb;

    switch (pb.Name)
    {
    case "1": 
        pb.BackgroundImage = Properties.Resources.OtherImg; //creates the background
        pb.BackgroundImageLayout = ImageLayout.Stretch;
        break;
    case "2":
        pb.BackgroundImage = Properties.Resources.OtherImg; //creates the background
        pb.BackgroundImageLayout = ImageLayout.Stretch;
        break;
    }
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T09:15:40.383

我认为您也需要存储最后一个图片框的图像

```
PictureBox _lastPictureBox = null;
Image _lastPictureBoxImage = null;

private void Pic_Click(object sender, System.EventArgs e)
{
    PictureBox pb = (PictureBox)sender;
    if (_lastPictureBox != null) 
    {
      // update the previous one, eg:
       _lastPictureBox.BackgroundImage = _lastPictureBoxImage;
    }

    // now set it to the current one:
   _lastPictureBox = pb;
   _lastPictureBoxImage = pb.Image;
   switch (pb.Name)
   {
     case "1": 
       pb.BackgroundImage = Properties.Resources.OtherImg; //creates the background
       pb.BackgroundImageLayout = ImageLayout.Stretch;
    break;
    case "2":
      pb.BackgroundImage = Properties.Resources.OtherImg; //creates the background
      pb.BackgroundImageLayout = ImageLayout.Stretch;
    break;
  } 
```

}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-06T09:09:41.573

如果我理解正确，您需要一个全局变量

```
PictureBox lastbox; 
```

然后您可以插入以下代码：

```
lastbox.Image = Properties.Resources.Image;
lasbox = pb; 
```

# asp.net-mvc - 从 MVC 中的 viewModel 填充模型的推荐方法是什么？

> ID：10469357
> 
> 赞同：1
> 
> 时间：2012-05-06T09:00:38.283
> 
> 标签：asp.net-mvc, asp.net-mvc-3

我有以下课程：

```
 public class City {
      public string key1 {get; set; }
      public string key2 { get; set; }
      public string col1 { get; set; }
      public string col2 { get; set; }
      public int newplusnew2 { get; set; }
   } 
```

一个视图模型：

```
 public class CityViewModel {
      public City city { get; set; }
      public int new1 { get; set; }
      public int new1 { get; set; }
   } 
```

一种行为：

```
 public JsonResult JsonCreate(CityViewModel viewModel)
        {

 //  Validation checks go here

            var model = new City ();
            ???

   } 
```

有人能告诉我从视图模型中填充四个字符串列和 int 列的最佳方法吗？我只是想知道是否有一些推荐的方法来做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T09:38:02.933

如果我理解正确，您`CityViewModel`从回发中得到回复，并且您需要`City`离开......但据我所知，`CityViewModel`已经包含一个`City`对象，所以您可以这样做：

```
public JsonResult JsonCreate(CityViewModel viewModel)
{
    //  Validation checks go here
    var model = viewModel.city;
} 
```

# algorithm - 在游戏中计算卡车载货量

> ID：10469358
> 
> 赞同：0
> 
> 时间：2012-05-06T09:00:45.483
> 
> 标签：algorithm, math, cargo, capacity-planning

这更像是一个数学/算法问题，而不是一个编程问题，但我希望你们能提供帮助。

场景#1：

> 玩家 1`crates`的库存中有 40 个。
> 
> 玩家 1 有 2 `trucks`，
> 
> 1x `small` （容量：8 个板条箱）
> 
> 1x `medium`（容量：16 个板条箱）

* * *

> 给定`capacity`：
> 
> 一辆`small`卡车可以装8个板条箱
> 
> 一辆`medium`卡车可以装 16 个板条箱
> 
> 一辆`large`卡车可以装30个板条箱

玩家 1 需要多少辆卡车才能带走所有 40 个板条箱？

情景#2，如果卡车里已经有货物怎么办？

> 玩家 1 有 40 个板条箱和 2 辆卡车，如上述场景。
> 
> 如果`small`已经有 2 个板条箱，给他 8-2 = 6 个空间
> 
> 如果`medium`已经有 4 个板条箱，给他 16-4 = 8 个空间
> 
> 玩家 1 需要多少辆卡车才能拿走所有 40 个板条箱？算法是什么？

场景#3：没有卡车

> 玩家 1 总共有 0 辆卡车。他需要多少辆卡车才能带走所有 40 个板条箱？同样，您将使用什么算法？

场景#4：卡车太多

> 玩家 1 有 10 辆卡车，全部`large`满载。运送全部 40 个板条箱需要多少辆卡车？

我在想。

方案 1，

```
2 trucks, 1 small = 8 and 1 medium = 16
8+16 = 24 crates
40 - 24 = 16 trucks?? // This looks wrong. 
```

卡车的成本是较早完成的（您先购买它们）。

我认为我的算法是错误的。我需要将其除以基数吗？我用卡车分开吗？

对此的任何帮助都会非常有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T09:20:59.193

当您尝试解决此类问题以保留单位时，这非常有帮助

40 箱 - 24 箱 = 16 箱

玩家有 40 个板条箱，他有能力运输 24 个板条箱，因此他需要额外的卡车来运输剩余的板条箱。据推测，运输 16 个板条箱的最有效方法是增加 1 辆中型卡车（您也可以使用 1 辆大型卡车或 2 辆小型卡车）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T10:25:00.297

我建议以下算法（伪代码）

```
do truck = 1,number_trucks
  current_capacity(truck) = total_capacity(truck) - loaded_crates(truck)
enddo
sort trucks according to current_capacity (biggest first)
remaining_crates = 40
do truck = 1,number_trucks
  if(remaining_crates - current_capacity(truck) > 0)
    load truck full
    remaining_crates -= current_capacity(truck)
  else
    if(truck != last truck)
      if(remaining_crates - current_capacity(truck+1) > 0)
        load truck with remaining_crates
        remaining_crates = 0
      endif
    else
      load truck full
      remaining_crates -= current_capacity(truck)
    endif
  endif
enddo
sort truck_class according to total_capacity(truck_class) (biggest first)
do truck_class = 1,number_truck_classes
  while(remaining_crates - total_capacity(truck_class) > 0)
    buy truck of truck_class
    remaining_crates -= total_capacity(truck_class)
  end while
  if(truck_class == number_truck_classes && remaining_crates > 0)
    buy truck of truck_class
  endif
enddo 
```

# java - 异常：javax.resource.spi.ResourceAdapterInternalException：意外错误

> ID：10469361
> 
> 赞同：0
> 
> 时间：2012-05-06T09:01:35.513
> 
> 标签：java, xml

我正在使用 ejb3 处理 Java 中的大型企业应用程序。

我在以下查询> SELECT CONTENT FROM TBLMXML 的帮助下从数据库中获取 xml 内容。并借助以下代码获取此内容：

```
if(rowSet.getObject("CONTENT") instanceof oracle.sql.OPAQUE){

XMLType xmlType = XMLType.createXML(((oracle.sql.OPAQUE) rowSet.getObject("CONTENT"));

} 
```

但是当这个查询被触发时，我得到了以下错误：

```
14:21:15,698 : [WARN ] : [TxConnectionManager] :  Connection error occured: org.jboss.resource.connectionmanager.TxConnectionManager$TxConnectionEventListener@1357dfa[state=NORMAL mc=org.jboss.resource.adapter.jdbc.local.LocalManagedConnection@1897e13 handles=1 lastUse=1336294101874 permit=true trackByTx=true mcp=org.jboss.resource.connectionmanager.JBossManagedConnectionPool$OnePool@9f08ca context=org.jboss.resource.connectionmanager.InternalManagedConnectionPool@fa3d7c xaResource=org.jboss.resource.connectionmanager.TxConnectionManager$LocalXAResource@191a3ed txSync=null]
javax.resource.spi.ResourceAdapterInternalException: Unexpected error
    at org.jboss.resource.adapter.jdbc.BaseWrapperManagedConnection.broadcastConnectionError(BaseWrapperManagedConnection.java:409)
    at org.jboss.resource.adapter.jdbc.BaseWrapperManagedConnection.connectionError(BaseWrapperManagedConnection.java:385)
    at org.jboss.resource.adapter.jdbc.WrappedConnection.checkException(WrappedConnection.java:865)
    at org.jboss.resource.adapter.jdbc.WrappedStatement.checkException(WrappedStatement.java:852)
    at org.jboss.resource.adapter.jdbc.WrappedResultSet.checkException(WrappedResultSet.java:1947)
    at org.jboss.resource.adapter.jdbc.WrappedResultSet.getObject(WrappedResultSet.java:768)
    at oracle.jdbc.rowset.OracleCachedRowSet.populate(OracleCachedRowSet.java:2078)
    at com.elitecore.billingengine.ejb.base.BillingSearchSessionBase.execute(BillingSearchSessionBase.java:125)
    at com.elitecore.billingengine.ejb.billcommon.session.CacheDataProviderSessionBean.populateDataMap(CacheDataProviderSessionBean.java:196)
    at com.elitecore.billingengine.ejb.billcommon.session.CacheDataProviderSessionBean.retrieveDataQuery(CacheDataProviderSessionBean.java:158)
    at com.elitecore.billingengine.ejb.billcommon.session.CacheDataProviderSessionBean.getMapForCache(CacheDataProviderSessionBean.java:72)
    at sun.reflect.GeneratedMethodAccessor362.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.jboss.invocation.Invocation.performCall(Invocation.java:386)
    at org.jboss.ejb.StatelessSessionContainer$ContainerInterceptor.invoke(StatelessSessionContainer.java:228)
    at org.jboss.resource.connectionmanager.CachedConnectionInterceptor.invoke(CachedConnectionInterceptor.java:156)
    at org.jboss.ejb.plugins.StatelessSessionInstanceInterceptor.invoke(StatelessSessionInstanceInterceptor.java:173)
    at org.jboss.ejb.plugins.CallValidationInterceptor.invoke(CallValidationInterceptor.java:63)
    at org.jboss.ejb.plugins.AbstractTxInterceptor.invokeNext(AbstractTxInterceptor.java:121) 
```

请让我知道我错过了什么。?? M 使用 oracle 10g。

提前致谢

水

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-08T11:21:42.620

你用的是什么版本的JBoss？我在使用 JBoss 5 时遇到了一个非常相似的问题，我通过执行以下操作解决了它：

尝试查看您的 oracle-ds.xml 文件（它可以有任何名称，只要它以*-ds.xml*结尾）。确保您已配置`<min-pool-size>`以及`<max-pool-size>`标签。

请参阅此在 JBoss 5 中配置 Oracle 数据源，可在[此处](http://docs.jboss.org/jbossas/docs/Installation_And_Getting_Started_Guide/5/html/Using_other_Databases.html)找到指南。

# android - Android布尔如果不是条件不起作用

> ID：10469367
> 
> 赞同：0
> 
> 时间：2012-05-06T09:02:26.543
> 
> 标签：android

我通过以下方法检查了在我的意图服务中不起作用的布尔值 if(!updating_questions)

```
private void sendBroadcast(Context context, String key, String value){
    //Don't broadcast if updating questions
    Util.log_debug_message("@@@@ Updating questions - " + updating_questions);
    if(!updating_questions){
        Util.log_debug_message("@@@@ Broadcasting, updating_questions = " + updating_questions);
        Broadcast.sendBroadcast(context, ResponseReceiver.ACTION_RESP, Intent.CATEGORY_DEFAULT,
                key, value);
    }
} 
```

update_questions 标志是一个全局私有变量，它的值为 false

```
private boolean updating_questions = false; 
```

该值是从 onHandleIntent(Intent intent) 方法中的额外内容设置的

```
 updating_questions = intent.getBooleanExtra(AppConstants.C2DM_MESSAGE_UPDATE_QUESTIONS, false); 
```

该值是使用设置的

```
 if(updating_questions){
        refreshService.putExtra(AppConstants.C2DM_MESSAGE_UPDATE_QUESTIONS, true);
    } else {
        refreshService.putExtra(AppConstants.C2DM_MESSAGE_UPDATE_QUESTIONS, false);
    } 
```

此检查似乎正常运行，控制台中的输出显示该值为假，但条件被视为真

```
D/QuizApp (  878): @@@@ Updating questions - false
D/QuizApp (  878): @@@@ Broadcasting, updating_questions = false 
```

那么，如果该值为 false，那么如何广播消息呢？我显然错过了一些非常基本的东西，但不知道它是什么

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T09:05:02.613

你的`if`条件是：

```
!updating_questions 
```

这意味着如果不是，则**执行***此块*（请参阅运算符）。`updating_questions` **`true``!`**

# php - MySQL 复杂子计算的语法

> ID：10469374
> 
> 赞同：1
> 
> 时间：2012-05-06T09:03:44.693
> 
> 标签：php, mysql, select, syntax, proc

使用以下选择，我试图在 PHP 循环遍历每一行时查看每一行，拉出当前位置半径并使用 PROC 计算出每个“事件”到当前位置的距离，然后在移动到下一行之前`distance_between`填充。`DISTANCEFROMEVENT`

我跌倒的地方（因为大部分工作）是添加动作

```
distance_between 52.5960 , -1.9110 ,
GOFL_LOCCGRP_TPEGILOC_TO_POINTCOORDINATES_LATITUDE ,
GOFL_LOCCGRP_TPEGILOC_TO_POINTCOORDINATES_LONGITUDE AS DISTANCEFROMEVENT 
```

我不清楚如何将其加入`SELECT`语句的语法，尽管我自己知道它应该可以工作。

```
SELECT * FROM Current
    WHERE (GOFL_LOCCGRP_TPEGILOC_TO_POINTCOORDINATES_LATITUDE <53.319589001447
    AND
    GOFL_LOCCGRP_TPEGILOC_TO_POINTCOORDINATES_LATITUDE > 51.872410998553
    AND
    GOFL_LOCCGRP_TPEGILOC_TO_POINTCOORDINATES_LONGITUDE > -2.6349916029658
    AND
    GOFL_LOCCGRP_TPEGILOC_TO_POINTCOORDINATES_LONGITUDE < -1.1870083970342
    AND
    VALIDPERIOD_STARTOFPERIOD < '12-05-06 16:15:31'
    AND
    VALIDPERIOD_ENDOFPERIOD > '12-05-06 16:15:31' ,
    distance_between 52.5960 , -1.9110 , GOFL_LOCCGRP_TPEGILOC_TO_POINTCOORDINATES_LATITUDE , GOFL_LOCCGRP_TPEGILOC_TO_POINTCOORDINATES_LONGITUDE AS DISTANCEFROMEVENT ) 
```

我能得到的任何指导将不胜感激。

人族

```
CREATE FUNCTION distance_between (from_lat DECIMAL(6, 3),
    from_lng DECIMAL(6, 3),
    to_lat DECIMAL(6, 3),
    to_lng DECIMAL(6, 3))
    RETURNS DECIMAL(11, 3)

    RETURN 6371 * 2 * ATAN2(SQRT(POW(SIN(RADIANS(to_lat - from_lat)/2), 2) +
    POW(SIN(RADIANS(to_lng - from_lng)/2), 2) * COS(RADIANS(from_lat)) *
    COS(RADIANS(to_lat))), SQRT(1 - POW(SIN(RADIANS(to_lat - from_lat)/2), 2) +
    POW(SIN(RADIANS(to_lng - from_lng)/2), 2) * COS(RADIANS(from_lat)) * COS(RADIANS(to_lat)))); 
```

在职的.............

```
SELECT *, ( 3959 * acos( cos( radians(52.5960) ) * cos( radians( GOFL_LOCCGRP_TPEGILOC_TO_POINTCOORDINATES_LATITUDE ) ) * cos( radians( GOFL_LOCCGRP_TPEGILOC_TO_POINTCOORDINATES_LONGITUDE ) - radians(-1.9110) ) + sin( radians(52.5960) ) * sin( radians( GOFL_LOCCGRP_TPEGILOC_TO_POINTCOORDINATES_LATITUDE ) ) ) ) AS DISTANCEFROMEVENT FROM Current HAVING DISTANCEFROMEVENT < 50 ORDER BY DISTANCEFROMEVENT 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T12:46:48.870

您在给您带来麻烦的部分之前的最后一个搜索词缺少结束“'”。除非这只是这里的错字。如果不是这样，请告诉我，我再看看

**编辑：**

```
SELECT *, (distance_between 52.5960 , -1.9110 , 
GOFL_LOCCGRP_TPEGILOC_TO_POINTCOORDINATES_LATITUDE , GOFL_LOCCGRP_TPEGILOC_TO_POINTCOORDINATES_LONGITUDE) AS DISTANCEFROMEVENT 
FROM Current WHERE
GOFL_LOCCGRP_TPEGILOC_TO_POINTCOORDINATES_LATITUDE < 53.319589001447
AND GOFL_LOCCGRP_TPEGILOC_TO_POINTCOORDINATES_LATITUDE > 51.872410998553
AND GOFL_LOCCGRP_TPEGILOC_TO_POINTCOORDINATES_LONGITUDE > -2.6349916029658
AND GOFL_LOCCGRP_TPEGILOC_TO_POINTCOORDINATES_LONGITUDE < -1.1870083970342
AND VALIDPERIOD_STARTOFPERIOD < '12-05-06 16:15:31'
AND VALIDPERIOD_ENDOFPERIOD > '12-05-06 16:15:31' 
```

好的，所以您需要调用 SELECT 中的 DISTANCEFROMEVENT 字段以使其出现。

# java - 复制带有依赖项的签名 jar

> ID：10469375
> 
> 赞同：0
> 
> 时间：2012-05-06T09:03:46.970
> 
> 标签：java, maven, applet, signed-applet

我正在开发一个 Maven 网络项目。我创建了一个不同的 Maven 项目，其中包含我想在主项目中使用的几个小程序。此项目作为依赖项添加到主项目。

在我的 Applet 项目 POM 中，

我添加了一个插件来创建一个带有依赖项的 jar，

```
<plugin>
    <artifactId>maven-assembly-plugin</artifactId>
    <version>2.3</version>
    <configuration>
      <descriptorRefs>
        <descriptorRef>jar-with-dependencies</descriptorRef>
      </descriptorRefs>
    </configuration>
    <executions>
      <execution>
        <id>make-assembly</id> <!-- this is used for inheritance merges -->
        <phase>package</phase> <!-- bind to the packaging phase -->
        <goals>
          <goal>single</goal>
        </goals>
      </execution>
    </executions>
</plugin> 
```

我还签署了 uberjar 以避免一些安全限制。

```
<plugin>
    <artifactId>maven-jar-plugin</artifactId>
    <executions>
      <execution>
        <goals>
          <goal>sign</goal>
        </goals>
      </execution>
      <execution>
        <id>make-assembly</id>
        <phase>package</phase>
        <goals>
          <goal>sign</goal>
        </goals>
      </execution>
    </executions>
    <configuration>
      <jarPath>${project.build.directory}/${project.build.FinalName}-${project.packaging}-with-dependencies.${project.packaging}</jarPath>
      <keystore>${basedir}/signstore.jks</keystore>
      <alias>signstore</alias>
      <storepass>signstore</storepass>
    </configuration>
  </plugin> 
```

我现在想在构建主项目时将签名的 uberjar 复制到 webapp 文件夹，以便我的 HTML 文件可以使用它。

这可能吗？我只设法复制了没有依赖关系的 jar。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T14:27:14.630

[我对 jar-with-dependencies 也有同样的问题，使用maven shade 插件](http://maven.apache.org/plugins/maven-shade-plugin/)构建它要容易得多：

```
<build>
        <plugins>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-shade-plugin</artifactId>
                <version>1.6</version>
                <executions>
                    <execution>
                        <phase>package</phase>
                        <goals>
                            <goal>shade</goal>
                        </goals>
                        <configuration>
                            <transformers>
                                <transformer
                                    implementation="org.apache.maven.plugins.shade.resource.ManifestResourceTransformer">
                                    <mainClass>your.main.Class</mainClass>
                                </transformer>
                            </transformers>
                        </configuration>
                    </execution>
                </executions>
            </plugin>
        </plugins>
    </build> 
```

这在与 maven jar 插件战斗后的几个小时内很快就起作用了。它还为您解决依赖关系之间的冲突

# parsing - 使用重定向从 url 获取 html 内容

> ID：10469378
> 
> 赞同：1
> 
> 时间：2012-05-06T09:04:24.473
> 
> 标签：parsing, windows-phone-7, httpwebrequest

我正在将应用程序移植到 Windows Phone。

该应用程序正在解析一个 html 页面并从中提取信息。但是，在尝试解析内容时，我注意到我认为实际页面只是一个重定向到实际内容页面的小页面。我要从中获取数据的实际页面的 URL 实际上是动态的。

在我的原始应用程序中，我像这样使用 MaximumAutomaticRedirections。

```
 HttpWebRequest request = (HttpWebRequest)WebRequest.Create(m_BaseUrl + "/watch/" + VideoId.ToString());

        request.MaximumAutomaticRedirections = 4;
        request.MaximumResponseHeadersLength = 4;

        request.Credentials = CredentialCache.DefaultCredentials;
        HttpWebResponse response = (HttpWebResponse)request.GetResponse(); 
```

现在，MaximumAutomaticRedirections 在 windows 应用程序中处理重定向，但在手机 sdk 上，没有这样的属性。

你对如何解决这个问题有什么建议吗？

最好的问候，彼得拉尔森！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T17:52:06.707

在 Windows Phone 上，您仍然拥有[`HttpWebRequest.AllowAutoRedirect`](http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.allowautoredirect%28v=vs.95%29)属性（默认为`true`），但它[似乎无法正常工作](http://forums.create.msdn.com/forums/p/101733/604007.aspx)。

尝试：

`WebClient`这是包装，`HttpWebRequest`但尝试并没有什么坏处。

或者

从读取`Location`标题[`HttpWebResponse.Headers`](http://msdn.microsoft.com/en-us/library/system.net.httpwebresponse.headers)。

# macos - 使用 chrome 打开 URL 并指定本地 ChromeUser，用于测试目的

> ID：10469379
> 
> 赞同：0
> 
> 时间：2012-05-06T09:04:39.743
> 
> 标签：macos, google-chrome

出于测试目的，我正在尝试从脚本自动打开 URL。我通常仅出于测试目的在特殊的本地 ChromeUser 下使用 google chrome。[此处](https://support.google.com/chrome/bin/answer.py?hl=en&answer=2364824)概述了本地 Chrome 用户。

我发现[这个](http://peter.sh/experiments/chromium-command-line-switches/)在打开 google chrome 时指定了标志，并且在[这里](http://www.chromium.org/developers/how-tos/run-chromium-with-flags)讨论了它的用法，但是当我执行指定的命令时，我遇到了错误：

```
$ /Applications/Google\ Chrome.app/Contents/MacOS/Google\ Chrome --remote-debugging-port=9222
[0506/035142:INFO:breakpad_mac.mm(148)] Breakpad disabled
[15398:-1409084736:2001131272496316:ERROR:process_singleton_mac.cc(102)] Unable to obtain profile lock. 
```

这有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T15:25:05.637

Chrome 的应用程序支持文件夹中有一个锁定文件。

```
rm -f Library/Application\ Support/Google/Chrome/SingletonLock 
```

# javascript - KnockoutJS & jQuery(noConflict) & prototype.js = 冲突？

> ID：10469381
> 
> 赞同：2
> 
> 时间：2012-05-06T09:05:02.087
> 
> 标签：javascript, jquery, prototypejs, knockout.js

到目前为止，我一直在使用 knockoutJS 和 jQuery，没有任何问题，但是仅在我的 html 中包含prototype.js 文件，在启动应用程序时会导致几个错误。我在开始时运行 jQuery.noConflict() 以避免 jQuery 和prototypejs 之间的冲突，但显然它并没有解决问题。代码和错误如下：

```
<script type="text/javascript" src="js/jquery/jquery-1.6.4.min.js"></script>
<script type="text/javascript" src="js/jquery/jquery-ui-1.8.16.custom.min.js"></script>
<script type="text/javascript" src="js/jquery/jquery.dataTables.min.js"></script>
<script type="text/javascript" src="js/jquery/jquery-contextmenu.js"></script>
 <script type="text/javascript" src="js/jquery/jquery.tmpl.js"></script>

<script type="text/javascript" src="js/prototype.js"></script>

<script type="text/javascript">
   jQuery.noConflict();   
</script>

<!--  knockout library -->
<script type="text/javascript" src="js/knockout-1.2.1.js"></script>
<script type="text/javascript" src="js/knockout.mapping-latest.js"></script> 
```

//////////////

currentServerTree[key].serverName 不是函数 anonymous()knockout-1.2.1.js（第 11 行）

```
Za(a=" { text: scoringFunctio...n = __ko_value; } } } ", b=Object { preferenceName=d(), selectedServer=d(), selectedDatabase=d(), more...})knockout-1.2.1.js (line 11)
J()knockout-1.2.1.js (line 44)
j()knockout-1.2.1.js (line 34)
j(e=function(), d=null, b=Object { disposeWhenNodeIsRemoved=textarea#inScoreFunction.inputField, read=function(), disposeWhen=function()})knockout-1.2.1.js (line 36)
J(e=textarea#inScoreFunction.inputField, d=null, b=Object { preferenceName=d(), selectedServer=d(), selectedDatabase=d(), more...}, a="data-bind")knockout-1.2.1.js (line 45)
ua(a=textarea#inScoreFunction.inputField)knockout-1.2.1.js (line 45)
g(a=[input#singleTable.inputField Constant, input#joinTable.inputField Variable, th, 16 more...], b=function())knockout-1.2.1.js (line 8)
ua(e=Object { preferenceName=d(), selectedServer=d(), selectedDatabase=d(), more...}, d=table#attributesTable4)knockout-1.2.1.js (line 45)
()index.jsp (line 1052)
[Break On This Error]   

...rn "+a))();return(new Function("sc","with(sc) { return ("+a+") }"))(b)},Fa:funct... 
```

如果我删除prototype.js 行，一切都运行得很好。知道可能导致问题的原因吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T09:24:45.173

我认为您可能实际上在代码中的某处使用了 jQuery，并尝试使用`$`它来访问它。您的调用`jQuery.noConflict();`实际上并没有做任何事情，因为原型是稍后加载的。它的目的是将 $ 设置回 jQuery 更改之前的状态，因此如果您在原型之后加载了 jQuery，它会将 $ 设置回原型。

看起来您还没有使用原型，因为该页面在未加载时可以工作，因此请尝试将原型的引用保留在其中并将其后的 .noConflict 脚本更改为此以查看它是否有效：

```
<script type="text/javascript">
   $ = jQuery;   
</script> 
```

如果可行，那么您的代码在某处使用 $ 并且您需要决定是否要 $ 代表 jQuery 或原型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T11:29:24.150

noConflict() 的目的是从 jQuery 中删除“$”符号，从而允许原型使用它。为了让它工作，你必须在 Prototype 实际加载之前运行它：

```
<script type="text/javascript" src="js/jquery/jquery-1.6.4.min.js"></script>
<script type="text/javascript" src="js/jquery/jquery-ui-1.8.16.custom.min.js"></script>
<script type="text/javascript" src="js/jquery/jquery.dataTables.min.js"></script>
<script type="text/javascript" src="js/jquery/jquery-contextmenu.js"></script>
<script type="text/javascript" src="js/jquery/jquery.tmpl.js"></script>

<script type="text/javascript">jQuery.noConflict();</script>

<script type="text/javascript" src="js/prototype.js"></script>

<!--  knockout library -->
<script type="text/javascript" src="js/knockout-1.2.1.js"></script>
<script type="text/javascript" src="js/knockout.mapping-latest.js"></script> 
```

# php - 嵌套 While 循环无法正常工作

> ID：10469383
> 
> 赞同：2
> 
> 时间：2012-05-06T09:05:19.883
> 
> 标签：php, while-loop

我最近开始研究 php，我不知道为什么 while 循环不能正常工作，问题是 $sexy['post_id'] 的值没有得到更新。我的桌子上有 2 行

```
$getpostId = "SELECT post_id FROM likersTable WHERE executed='0'";
$postIdDetails = mysqli_query($dbConnect,$getpostId)
                or die('Some error in post id');

$getAllUserId = "SELECT * FROM likersTable";
$allUserIdDetails = mysqli_query($dbConnect,$getAllUserId)
                    or die('Some error in all user id');

while($sexy = mysqli_fetch_array($postIdDetails)){
    while($shitty = mysqli_fetch_array($allUserIdDetails)){
        echo 'User Id: '.$shitty['user_id'].'<br />';
        echo 'Post Id: '.$sexy['post_id'].'<br />';
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T09:14:00.603

使用 mysqli_fetch_assoc，而不是 mysqli_fetch_array

您可能还想在第一次和第二次之间执行 mysqli_data_seek($allUserIdDetails, 0) 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T10:45:16.157

我会尝试将此作为调试的第一部分。

```
$sexy = mysqli_fetch_array($postIdDetails);
$shitty = mysqli_fetch_array($allUserIdDetails);
print_r($sexy);
echo "<br><br>";
print_r($shitty); 
```

分别输出sexy和shitty数组中的内容。

此外，如果字段`executed='0'`是.`executed=0``executed``INT`

+1 使用 mysqli。我仍然是一个mysql狗屎。

# php - How to debug something that works and not at random?

> ID：10469386
> 
> 赞同：0
> 
> 时间：2012-05-06T09:06:53.827
> 
> 标签：php, nntp

I'm using the [Net_NNTP](http://pear.php.net/package/Net_NNTP/redirected) `->post()` function. This posts a message to a NNTP server. Sometimes however (30-50% of the cases) the lasts 1 or 2 characters of every line of the message are truncated. Sometimes this works just fine.

I really can't find any way to replicate this; it's not about the text inserted in the message or so on, it's not about server load etc... I simply don't understand it.

How do you think should I debug it?

* * *

Here is some example code, acting the same as the the PHP's class.

```
$sh = fsockopen('nntp-server', 119);
fwrite($sh, "POST\r\n");
fwrite($sh, $article);
fwrite($sh, "\r\n.\r\n"); 
```

`$article` is always the same. The server i'm connecting to a cluster of know to be reliable servers of a respectable ISP, i don't think that to be the problem!

This really has no sense to me.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T12:26:03.810

> however (30-50% of the cases) the lasts 1 or 2 characters of every line of the message are truncated

If you had entire line last lines missing, one could say non-intentional software error. But if you are loosing few bytes from every line, this is most likely intentional behavior by some software. Like forced word wrap or when you characters in your line are suddenly wrongly encoded (like utf). Maybe there is a bytes per lime limit set by this NNTP server.

Either way, i doubt that the request packet is exactly same when it passes and when it fails.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T09:34:15.773

If it depends on input (i.e. some input always fails), just make a testscript providing that input and step through code using xdebug or the like, inspecting variables as you go.

# xcode - 将单个文件转换为弧？

> ID：10469387
> 
> 赞同：9
> 
> 时间：2012-05-06T09:06:58.280
> 
> 标签：xcode, memory-management, memory-leaks, automatic-ref-counting, xcode4.3

我已经看到很多关于将整个项目转换为 arc，然后使用标志告诉 Xcode 哪些不转换的信息。

仅将单个文件转换为 arc 怎么样？我试过了，它运行良好。我可以这样做吗？我有点担心，因为如果我在这里和那里转换东西，整个项目不会转换为弧，它们会导致内存泄漏。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-06T18:48:38.820

是的你可以。但是，您需要告诉编译器哪些文件不是 ARC。您可以在项目设置中执行此操作。转到`your project`> `Select the target of the app in question`> `Build Phases`。现在下拉“编译源”并选择您不希望使用 ARC 编译的文件，按 ENTER 并会出现一个小弹出框。在这里你可以写`-fno-objc-arc`。按下`Done`，你就完成了。

编译时，它会尝试为没有`-fno-objc-arc`标志的文件添加自动引用计数。在使用 ASIHTTPRequest 或 MBProgressHud（和其他）等非弧库时非常有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T13:01:46.323

仅告诉某些文件是 ARC 使用标志：

```
-fobjc-arc 
```

# android - 广播接收器上的空指针异常

> ID：10469391
> 
> 赞同：1
> 
> 时间：2012-05-06T09:07:44.170
> 
> 标签：android, android-widget, nullpointerexception

我正在尝试使用广播接收器在按下按钮时更改主屏幕小部件的 texview 上的文本。但是，我使用我当前拥有的代码在我的小部件上遇到空指针异常，并且 logcat 在大约 4-5 秒后调试断开的小部件上似乎没用。非常感谢任何帮助:)

广播接收器：

```
package kevin.erica.box;

public class TestReceiver extends BroadcastReceiver {
private Random rgenerator = new Random();
private Random rgenerator2 = new Random();
private String [] myString1;
private String myStringRandom = myString1[rgenerator.nextInt(myString1.length)];

public static final String TEST_INTENT= "MyTestIntent";

@Override
public void onReceive(Context context, Intent intent) {
 // TODO Auto-generated method stub

 Toast.makeText(context, "Test", Toast.LENGTH_SHORT);

    AppWidgetManager appWidgetManager = AppWidgetManager.getInstance(context.getApplicationContext());

  Toast.makeText(context, "Test", Toast.LENGTH_SHORT).show();
  int[] appWidgetIds = intent.getIntArrayExtra(AppWidgetManager.EXTRA_APPWIDGET_IDS);
  RemoteViews rViews = new RemoteViews(context.getPackageName(), R.layout.widgetlayout);
            rViews.setTextViewText(R.id.widget1label, "someupdateddata");
            appWidgetManager.updateAppWidget(appWidgetIds, rViews);

} 
```

我的小部件活动：

```
package kevin.erica.box;

public class Widget extends AppWidgetProvider {

private Random rgenerator = new Random();
private Random rgenerator2 = new Random();
private String[] myString1;

  public void onUpdate(Context context, AppWidgetManager appWidgetManager, int[] appWidgetIds) {
      Resources res = context.getResources();
        myString1 = res.getStringArray(R.array.myArray);

    final int N = appWidgetIds.length;
    Log.i("ExampleWidget",  "Updating widgets " + Arrays.asList(appWidgetIds));
    // Perform this loop procedure for each App Widget that belongs to this
    // provider
    for (int i = 0; i < N; i++) {
      int appWidgetId = appWidgetIds[i];
      // Create an Intent to launch ExampleActivity
      Intent intent = new Intent();
        intent.setAction(TestReceiver.TEST_INTENT);
        intent.setClassName(TestReceiver.class.getPackage().getName(), TestReceiver.class.getName());
        intent.putExtra(AppWidgetManager.EXTRA_APPWIDGET_IDS, appWidgetIds);
      PendingIntent pendingIntent = PendingIntent.getBroadcast(context.getApplicationContext(), 0, intent, PendingIntent.FLAG_CANCEL_CURRENT);
      // Get the layout for the App Widget and attach an on-click listener
      // to the button
      RemoteViews views = new RemoteViews(context.getPackageName(), R.layout.widgetlayout);
      views.setOnClickPendingIntent(R.id.imagewidgeterica, pendingIntent);
      // To update a label
      views.setTextViewText(R.id.widget1label , myString1[rgenerator.nextInt(myString1.length)]);
      // Tell the AppWidgetManager to perform an update on the current app
      // widget
      appWidgetManager.updateAppWidget(appWidgetId, views);

     }

}

         } 
```

# asp.net - Why usercontrol outputcache has no Location property?

> ID：10469393
> 
> 赞同：0
> 
> 时间：2012-05-06T09:08:02.833
> 
> 标签：asp.net, user-controls, outputcache

I have some questions about OutPutCache to UserControl. I'm a fresher on OutPutCache.

1、I found that I can't set the location property. Where does the UserControl existed? 2、It seems that the UserControl would inherit outputcache features from the page. So how can I set the no-store property to the UserControl individually? Such as: I cached a news page, it will be refreshed daily. but I want to get the latest views everytime. or I only want to get the login username. What should I do?

I will be very appreciate for your help! Best Regards,

David Peng

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T09:16:27.747

You could use `<asp:substitution>` control and load UserControl that cannot be cached in [substitution](http://msdn.microsoft.com/en-us/library/ms228212.aspx) control, look at this article about [donut caching](http://weblogs.asp.net/scottgu/archive/2006/11/28/tip-trick-implement-donut-caching-with-the-asp-net-2-0-output-cache-substitution-feature.aspx).

Since substitution control can just take string and render it you will have to render user control to string and assign that string to substitution control, here are the details [How to use ASP.Net server controls inside of Substitution control?](https://stackoverflow.com/questions/3138192/how-to-use-asp-net-server-controls-inside-of-substitution-control)

# sql - 从 SQL 生成周计划报告

> ID：10469396
> 
> 赞同：1
> 
> 时间：2012-05-06T09:09:00.770
> 
> 标签：sql, language-agnostic, pdf-generation, report

给定一个约会数据库表，我想打印一份报告（PDF 或打印机），显示一周中的每一天，并按照预定时间的顺序显示约会。

数据库表如下所示（简化）：

```
CREATE TABLE APPOINTMENTS  (
    ID INTEGER NOT NULL,
    Name VARCHAR (50),
    Date DATE,
    Time TIME); 
```

输出应如下所示：

![所需的输出报告](../Images/886bdc1e8df2b4c83e36c03425fa7a09.png)

我一直通过使用 2D 图形操作（矩形、文本输出等）对其进行编码来生成报告，但这很乏味且难以更改。

从 SQL 到此类报告的最简单方法是什么？涉及的编程越少越好。如果需要，我不关心编程语言，报告生成将独立运行。

编辑：即使我不关心平台/语言，我也不需要独立于平台的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T09:13:09.910

这个问题被标记为“语言不可知论”，但我建议将其缩小到至少操作系统，如果不是语言的话。

如果 Windows 平台是可接受的，那么 MS SQL Reporting Services 具有完全免费的选项，允许在很少或无需编程（查询除外）的情况下创建报告。报告随后通过网站交付，并可导出为 PDF。

只要有可用的 ODBC 驱动程序，数据库类型本身对 SQL Reporting Services (SSRS) 就无关紧要。当然，如果您在完全非 Windows 环境中运行，那么我可能不会走这条路。

以下是 SSRS 中的几个日历样式的报告，它们看起来与您所显示的相似：

[http://www.simple-talk.com/sql/reporting-services/ten-common-sql-server-reporting-services-challenges-and-solutions/#hr](http://www.simple-talk.com/sql/reporting-services/ten-common-sql-server-reporting-services-challenges-and-solutions/#hr)

[http://rduclos.wordpress.com/2010/02/13/ssrs-2008-generate-calendars-based-on-a-date-range/](http://rduclos.wordpress.com/2010/02/13/ssrs-2008-generate-calendars-based-on-a-date-range/)

这些文章使用相当冗长`UNIONs`。我可能会改用`PIVOT`MS SQL 中的关键字，但结果是一样的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T09:48:10.180

我会为[Jasper Reports](https://en.wikipedia.org/wiki/JasperReports)投一票，这是一个基于 Java 的报告堆栈。您可以使用 iReport 等基于桌面的应用程序创建报告，并将它们上传到默认的 Jasper Web 应用程序。报告可以立即生成，也可以设置为定期生成并发送到电子邮件地址。还有一个权限系统，以便您组织中的各种角色可以访问正确的报告。

如果您想以编程方式访问报告服务，Jasper 还包含一个 SOAP 引擎——我以这种方式为长时间运行的报告开发了一个“背景报告”服务，从 PHP 调用。

所有这些软件都在 F/OSS 许可下可用，但您需要自信地设置和运行 Java 应用程序。我相信我以前工作的实例在 Glassfish 下运行，但 Tomcat 可以工作。

# mysql - 具有 10+ 百万行的 MySQL 表 - 如何使用索引加快搜索速度？

> ID：10469400
> 
> 赞同：1
> 
> 时间：2012-05-06T09:09:46.853
> 
> 标签：mysql, indexing

我的表结构如下：

> > 如果不存在则创建表`commodity_data`(
> > `dataid`bigint(20) unsigned NOT NULL AUTO_INCREMENT,
> > `commodity`smallint(6) NOT NULL,
> > `market`smallint(6) NOT NULL,
> > `quantity`float NOT NULL,
> > `price_min`mediumint(9) NOT NULL,
> > `price_max`mediumint(9) NOT NULL,
> > `price_modal`mediumint(9 ) NOT NULL,
> > `date`date NOT NULL,
> > `modified`timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
> > PRIMARY KEY ( `dataid`)
> > ) ENGINE=InnoDB DEFAULT CHARSET=latin1 AUTO_INCREMENT=7059415 ;

我在此表上的 SELECT 将包含 WHERE 子句，其中搜索“商品”、“市场”和“日期”中的一个或多个。

我的 ORDER BY 将按 price_min、price_max 或 price_modal 以及有时是其他大多数字段。

该表最终将超过 1000 万行，并将继续以每天约 5 到 10000 的速度扩展。

我的服务器目前是 VPS 双 2.4Ghz xeon，4GB RAM。

唯一的索引当前位于“dataid”字段上。

我已经读过设置索引会有所帮助，我认为这些应该是关于商品、市场和日期的，但我想在继续之前检查这是否正确，除非有更好的方法来做到这一点。表大小将在 600MB 左右并且还在增长。

“commodity”和“market”字段是指其他表中商品和市场的ID。我要么 LEFT JOIN 要么如果它更快，我会将这些表读入 PHP 中的数组（简单的一级关联数组 id => 名称）。大约有 300 种商品和 2,000 个市场。

目前 SELECT 花费的时间太长，例如带有 WHERE 子句的 COUNT 查询将花费一分钟或更长时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T09:24:46.537

尝试找出`compound`您需要哪些索引：如果您正在搜索`commodity`AND `market`AND `date`，您应该在所有三个索引上都有 1（一）个索引。订购很重要，例如，如果您有时不包括`market`，则订单可能会消失`INDEX(commodity,date,market)` （最后未使用）。如果`WHERE`变化很大，则案例的多个复合索引可能会有所帮助（例如`INDEX(commodity,date,market)`，但也`INDEX(market,date,commodity)`有。请记住，它们在编写/更新时会影响性能。

`innodb_buffer_pool_size` [尽管如此，一分钟还是很长的：确保您的数据库可以通过设置as high is it can go](http://www.mysqlperformanceblog.com/2007/11/03/choosing-innodb_buffer_pool_size/)将表加载到内存中。之后，对仍然需要很长时间的查询运行上述 EXPLAINS 并从那里获取。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-06T09:18:28.160

[如果您在查询文本之前使用EXPLAIN](http://dev.mysql.com/doc/refman/5.5/en/explain.html)运行选择查询，MySQL 将显示来自优化器的有关查询执行计划的信息，以及将加快查询速度的建议索引...

# jquery - jQuery：将所有匹配元素的 position().left 作为数组返回

> ID：10469401
> 
> 赞同：1
> 
> 时间：2012-05-06T09:10:13.000
> 
> 标签：jquery, arrays

我想获得所有匹配元素的数组'`position().left`

但我不熟悉`.map()`：

我知道如何通过使用a来获得它`loop`：

```
 var arr = new Array();

     var b = $(".matchME").length;
     var a = 0;

     for(i=0; i< b; i++){
        var c = $(".matchME:eq("+ a+ ")").position().left;
        arr.push(c);
        a++;
     } 
```

但是当我尝试使用时我弄错了`.map()`：

```
var arr = $('.matchME').map(function(i,e) {
  return e.position().left;
}).get(); 
```

* * *

**如果有人可以向我解释我错了哪一部分并为我提供正确的方法，我将不胜感激。**

*（或除使用之外的其他智能方法`.map()`*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T09:14:48.810

您缺少的是将**e**包装在 JQuery 选择器中，使其成为 JQ 对象，而不是常规 DOM 对象：

```
var arr = $('.match').map(function(i,e) {
    return $(e).position().left;
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T09:14:40.017

您以正确的方式使用[map()](http://api.jquery.com/map/)`e` ，但假设传递给映射函数的参数是一个 jQuery 对象。它实际上是一个 DOM 元素，因此不支持[position()](http://api.jquery.com/position/)方法。

你可以通过写来解决这个问题：

```
var arr = $(".matchME").map(function(i, e) {
    return $(e).position().left;
}).get(); 
```

另请注意，为方便起见，当前 DOM 元素也绑定到`this`，因此您可以编写：

```
var arr = $(".matchME").map(function() {
    return $(this).position().left;
}).get(); 
```

# android - Android解压下载的.xml.gz文件

> ID：10469407
> 
> 赞同：3
> 
> 时间：2012-05-06T09:11:50.570
> 
> 标签：android, gzip

我正在尝试以编程方式解压缩 .xml.gz 文件。这似乎很简单，因为互联网上有很多示例可以告诉您如何解压缩 .gz 文件。但是，每次我尝试这样做时，都会出现异常：java.io.IOException: unknown format (magic number d4d4)。

我正在尝试在 Android 应用程序中执行此操作，它的执行方式是否应该与 Java 中的其他方式不同？

我正在关注[此处](http://www.java2s.com/Tutorial/Java/0180__File/UnzipafilewithGZIPInputStream.htm)提供的示例代码。

有人知道我在这里做错了什么吗？另外，我在从 Web 服务器下载文件后解压缩文件。下载似乎运行良好。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-17T10:24:03.413

找到了一种同时下载解压的好方法。它就像微风一样工作。

```
protected String doInBackground(String... sUrl) {
    try {
        URL url = new URL(sUrl[0]);
        URLConnection connection = url.openConnection();
        InputStream stream = connection.getInputStream();
        stream = new GZIPInputStream(stream);
        InputSource is = new InputSource(stream);
        InputStream input = new BufferedInputStream(is.getByteStream());
        OutputStream output = new FileOutputStream("Path to the file");
        byte data[] = new byte[2097152];
        long total = 0;
        int count;

        while ((count = input.read(data)) != -1) {
            total += count;
            output.write(data, 0, count);
        }

        output.flush();
        output.close();
        input.close();
    } catch (BufferOverflowException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
        return null;
    }
} 
```

参考：[http ://abhirampal.com/2012/05/17/android-download-decompress-gzip/](http://abhirampal.com/2012/05/17/android-download-decompress-gzip/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-05-23T15:38:42.707

这是一种使用改造的方法：

```
public interface DownloadApi {
    @Streaming
    @GET("/download")
    Call<ResponseBody> download();
}

private Retrofit getRetrofitClient() {
    OkHttpClient.Builder httpClient = new OkHttpClient.Builder();

    Retrofit.Builder builder =  new Retrofit.Builder()
        .baseUrl(API_BASE_URL)
        .addConverterFactory(GsonConverterFactory.create());

     return builder
        .client(httpClient.build())
        .build();
}

public void download() {
    DownloadApi api = getRetrofitClient().create(DownloadApi.class);
    Call<ResponseBody> call = api.download();

    call.enqueue(new Callback<ResponseBody>() {
        @Override
        public void onResponse(Call<ResponseBody> call, Response<ResponseBody> response) {
            if (response.isSuccessful()) {
                unzipAndWriteResponseBodyToDisk(response.body());
            } else {
                //TODO
            }
        }

        @Override
        public void onFailure(Call<ResponseBody> call, Throwable t) {
            //TODO
        }
    });
}

 private boolean unzipAndWriteResponseBodyToDisk(ResponseBody responseBody) {
    try {
        InputStream compressedInputStream = new GZIPInputStream(responseBody.byteStream());
        InputSource inputSource = new InputSource(compressedInputStream);
        InputStream inputStream = new BufferedInputStream(inputSource.getByteStream());

        File outputFile = new File("path to your file")
        outputFile.getParentFile().mkdirs();
        OutputStream outputStream = new FileOutputStream(outputFile.getAbsoluteFile());

        byte[] buffer = new byte[1024];
        int length;
        while ((length = inputStream.read(buffer)) > 0) {
            outputStream.write(buffer, 0, length);
        }

        outputStream.flush();
        outputStream.close();
        inputStream.close();
        return true;
    } catch (IOException e) {
        e.printStackTrace();
        return false;
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-07T01:37:49.173

.xml.gz 文件的前十个字节是什么？看起来解压缩器试图告诉您前两个字节是 d4 d4。.gz 文件必须以 1f 8b 开头。

# c# - HTMLAgilityPack 表达式不能包含 lambda 表达式

> ID：10469408
> 
> 赞同：0
> 
> 时间：2012-05-06T09:12:01.523
> 
> 标签：c#, windows-phone-7, lambda, html-agility-pack

我想要名为album_notes 的div 的InnerText。正如我在许多其他地方所做的那样，我的代码如下：

```
public void Album_Notes(HtmlAgilityPack.HtmlDocument bandHTML)
{
        this.lblNotes.Text = bandHTML.DocumentNode.Descendants("div").First(x => x.Id == "album_notes").InnerHtml; 
```

TextBlock，lblNotes，最终没有文本作为结果。如果我在调试模式下打开 QuickWatch，我会得到以下结果：

> 表达式不能包含 lambda 表达式

即使我在同一个应用程序的其他地方至少使用了 10 次完全相同的语法。奇怪的是它实际上并没有抛出错误或任何东西，它只是用一个空字符串填充 TextBlock。

我的代码有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T10:19:45.517

该`Expression cannot contain lambda expressions`消息不是来自 HTMLAgilityPack，而是来自 QuickWatch 功能。基本上，lambda 表达式只是一种语法糖：在编译时，lambda 被转换为“真正的”函数。由于这是在编译期间发生的事情，因此您无法在运行时（即在 QuickWatch 窗口中）创建全新的 lambda。

现在的问题是：为什么是`lblNotes.Text`空的？不幸的是，没有看到 HTML 代码我就无法知道。但是，如果没有错误，则意味着已找到“album_notes”div（否则您将遇到空引用异常）。因此，该`InnerHtml`属性可能是空的。

您可以通过稍微重写代码来检查：

```
public void Album_Notes(HtmlAgilityPack.HtmlDocument bandHTML)
{
    var div = bandHTML.DocumentNode.Descendants("div").First(x => x.Id == "album_notes");
    this.lblNotes.Text = div.InnerHtml;
} 
```

这样，如果你在最后一行下一个断点，你就可以在 quickwatch 窗口中检查`div`and的值。`div.InnerHtml`

# jquery - jQuery memoize css 用于悬停效果

> ID：10469411
> 
> 赞同：0
> 
> 时间：2012-05-06T09:12:36.103
> 
> 标签：jquery, css, undo, memoization

我想为元素创建悬停效果，但希望元素的悬停前 CSS 在再次悬停时与以前相同。所以，当再次悬停在元素之外时，我不想无意中覆盖先前的样式。换句话说 - 一种记住元素的 css 状态并在以后恢复该状态的简单方法。

想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T09:16:09.057

通过将特定类应用于元素来触发悬停 CSS。

然后，当您的悬停完成时，删除悬停类。

这让 CSS 可以为您处理样式覆盖和恢复。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-06T09:16:52.043

只需创建一个新的 CSS 类。和悬停时，使用`addClass(_thatclass_)`和悬停时使用`removeClass(_thatclass_)`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-06T09:20:36.770

你可以用纯 CSS 来做[`:hover`](https://developer.mozilla.org/en/CSS/%3Ahover)吗？如果可以的话，你应该，它会在不自动悬停时恢复旧的 CSS。

[看这个例子](http://jsfiddle.net/5dBEc/1/)，所有`div`的s都有一个边框，当你悬停时会变大，当你停止悬停时会缩小到正常状态。我会把 CSS 放在这里，所以这个答案是独立的：

```
div {
   border: 2px solid red;
}

div:hover {
  border-width: 10px;
} 
```

（请注意，您可以在选择器中的任何位置使用悬停，而不仅仅是在结尾处，例如`#myID:hover .childClass`）

# node.js - 如何使用 Node.js http 客户端进行 POST？

> ID：10469412
> 
> 赞同：2
> 
> 时间：2012-05-06T09:12:40.650
> 
> 标签：node.js

我正在尝试遵循此处的文档

[http://nodejs.org/api/http.html](http://nodejs.org/api/http.html)

但是我找不到有关执行简单操作（例如将用户名和密码发布到 URL）的文档。我该怎么做？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-04T12:57:05.630

node.js 文档对此并不是特别清楚

[http://nodejs.org/api/http.html#http_http_request_options_callback](http://nodejs.org/api/http.html#http_http_request_options_callback)

这就是我提出请求的方式，使用查询字符串来解析输入。

```
//require a few things.

var http = require('http'),
    qs = require('qs');

//These are the post options
var options = {
  hostname: 'www.mysite.com',
  port: 80,
  path: '/auth',
  method: 'POST'
};
//The postdata can be anything, but I'm using querystring 
//to convert it into the format 
//username=User&password=Password to be easily parsed in php

var postdata = qs.stringify({
    username:"User",
    password:"Password"
});

//Initialise the variable that will store the response
var body='';

//Now we're going to set up the request and the callbacks to handle the data
var request = http.request(options, function(response) {
    //When we receive data, we want to store it in a string
    response.on('data', function (chunk) {
        body += chunk;
    });
    //On end of the request, run what we need to
    response.on('end',function() {
        //Do Something with the data
        console.log(body);
    });
});

//Now we need to set up the request itself. 
//This is a simple sample error function
request.on('error', function(e) {
  console.log('problem with request: ' + e.message);
});

//Write our post data to the request
request.write(postdata);
//End the request.
request.end(); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-06T09:14:26.337

如果你需要做的不仅仅是一个 POST，比如使用 RESTful API，我建议你看看[restler](https://github.com/danwrong/restler)。

它有一个非常简单的 API

```
var rest = require('restler');

rest.post('http://service.com/login', {
  data: { username: 'foo', password: 'bar' },
}).on('complete', function(data, response) {
  if (response.statusCode == 200) {
    // you can get at the raw response like this...
  }
}); 
```

# iphone - 我想将 UIButton 移动到特定位置，例如在网格上

> ID：10469427
> 
> 赞同：4
> 
> 时间：2012-05-06T09:15:05.057
> 
> 标签：iphone, objective-c, xcode, ipad, uibutton

大家好，我有一个带有网格布局的背景图像，并希望允许用户将一组按钮中的一个移动到特定的网格位置，但只能移动到那些特定的位置。换句话说，假设我想将 y 轴上的移动限制为增量，例如 65 像素，然后将按钮捕捉到最近的点（如果将其移动 67 像素，它将回弹 2 像素）。有谁知道如何做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T09:29:56.787

下面是我目前正在使用的一些代码，它允许用户在屏幕上拖放图像。您会注意到“if”语句的值设置为“960”和“640”等，这表明如果用户试图将图像拖出屏幕，它会将图像动画移回屏幕并且可以轻松修改使图像移动到用户放在附近的最近的网格坐标。

```
- (void)callMarkerFourteen
{

    UIImage *image = [UIImage imageNamed:@"VerticalLine.png"];

    markerViewFourteen = [[UIView alloc] initWithFrame:CGRectMake(160, 210, 40, image.size.height)];
    [markerViewFourteen setBackgroundColor:[UIColor colorWithRed:255 green:0 blue:0 alpha:.5]];
    markerImageViewFourteen = [[UIImageView alloc] initWithFrame:[markerViewFourteen frame]];
    [markerImageViewFourteen setFrame:CGRectMake(18, 0, 4, 100)];
    [markerImageViewFourteen setImage:image];
    [markerViewFourteen addSubview:markerImageViewFourteen];

    UIPanGestureRecognizer *panRecognizer = [[UIPanGestureRecognizer alloc] initWithTarget:self action:@selector(move:)];
    [panRecognizer setMinimumNumberOfTouches:1];
    [panRecognizer setMaximumNumberOfTouches:1];
    [panRecognizer setDelegate:self];
    [markerViewFourteen addGestureRecognizer:panRecognizer];

    [self.view addSubview:markerViewFourteen];
}

-(void)move:(id)sender {

    [[[(UITapGestureRecognizer*)sender view] layer] removeAllAnimations];

    [self.view bringSubviewToFront:[(UIPanGestureRecognizer*)sender view]];
    CGPoint translatedPoint = [(UIPanGestureRecognizer*)sender translationInView:self.view];

    if([(UIPanGestureRecognizer*)sender state] == UIGestureRecognizerStateBegan) {

        firstX = [[sender view] center].x;
        firstY = [[sender view] center].y;
    }

    translatedPoint = CGPointMake(firstX+translatedPoint.x, firstY+translatedPoint.y);

    [[sender view] setCenter:translatedPoint];

    if([(UIPanGestureRecognizer*)sender state] == UIGestureRecognizerStateEnded) {

        CGFloat finalX = translatedPoint.x + (0.0*[(UIPanGestureRecognizer*)sender velocityInView:self.view].x);
        CGFloat finalY = translatedPoint.y + (0.0*[(UIPanGestureRecognizer*)sender velocityInView:self.view].y);

        if(UIDeviceOrientationIsPortrait([[UIDevice currentDevice] orientation])) {

            if(finalX < 0) {                                
                finalX = 0;             
            }                           
            else if(finalX > 640) {

                finalX = 640;
            }

            if(finalY < 0) {                                
                finalY = 0;             
            }                       
            else if(finalY > 960) {

                finalY = 960;
            }
        }

        else {

            if(finalX < 0) {                                
                finalX = 0;             
            }                       
            else if(finalX > 960) {

                finalX = 640;
            }

            if(finalY < 0) {                                
                finalY = 0;             
            }                       
            else if(finalY > 640) {

                finalY = 960;
            }
        }

        [UIView beginAnimations:nil context:NULL];
        [UIView setAnimationDuration:.35];
        [UIView setAnimationCurve:UIViewAnimationCurveEaseOut];
        [[sender view] setCenter:CGPointMake(finalX, finalY)];
        [UIView commitAnimations];
    }
} 
```

# cordova - 将值从 Controller 类传递到 Web 服务

> ID：10469431
> 
> 赞同：1
> 
> 时间：2012-05-06T09:15:59.290
> 
> 标签：cordova, sencha-touch, extjs, sencha-touch-2

我在`View`

```
{
     xtype:'button',
     id:'when_button_click',
     text:'Button Click',
     ui:'alert'
} 
```

在控制器中，我有以下代码；

1.）我遇到的问题是它不会`Ext.Ajax.request({`在函数中从行开始执行`onNewNote`。如何让程序将数据发送到该 URL。

2.) 在 中`View`，我有几个`textfields`，所以当用户点击 时`button`，我需要将在 中输入的值`textfields`发送到`Controller`班级，然后通过 web 服务发送。如何将文本字段数据从 View 类发送到 Controller 类？

```
Ext.define('myapp.controller.testcont', {

                      extend: "Ext.app.Controller",
                      config: {
                      refs: {
                      newNoteBtn: "#when_button_click"
                      },
                      control: {
                      newNoteBtn: {
                      tap: "onNewNote"
                      }
                      }
                      },
                      onNewNote: function () {

                     console.log("inside onNewNote function");

           Ext.Ajax.request({
                            url: 'http://call.com/the_webservice',
                            params : values,

                            failure: function (response) {
                            var text = response.responseText;
                             console.log("fail");

                            },                              success: function (response) {
                            var text = response.responseText;
                             console.log("success");

                            }

                            });

           var view = Ext.create('Ext.navigation.View', {
                                 fullscreen: true,
                                 items: [
                                         {
                                         title: 'Navigation View',
                                         html: 'This is the first item in the stack!'
                                         }
                                         ]
                                 });

                      }

                      // init and launch functions omitted.
                      }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T09:29:36.367

通常，当您定义多个表单字段时，您必须首先将它们包装在一个`FormPanel`组件中，为其设置一个`id`，比如说`id: 'form'`，然后在您的控制器中：

`Ext.getCmp('form').getValues();`

将返回一个对象，其中包含表单面板中每个字段的值。

# jquery - jQuery。Fn.Function 导致其他功能失败？

> ID：10469441
> 
> 赞同：2
> 
> 时间：2012-05-06T09:17:02.513
> 
> 标签：jquery, html, function

我是 jQuery 新手，我已经学习了一些关于编写 fn 函数的教程，并且我的第一个成功了；但是，当我添加第二个 fn 函数时，整个脚本停止工作。对于我的问题的任何反馈或解决方案，我将不胜感激。我已经包含了我的 jQuery 以及我正在使用的 HTML 表单。

在目前的形式下，它只是为了在用户按下“提交”时停止页面刷新，但是自从添加了“jQuery.fn.clear”之后，它就停止了这样做。

```
$(document).ready(function () {

    // Length validation
    jQuery.fn.validate = function (clength, value) {
        if ($.trim($(this).val()).length < clength || $.trim($(this).val()) == value) {
            $(this).val("You can't leave this blank!");
            return false;
        } else {
            return false;
        }
    };

    // Default value validation
    jQuery.fn.clear = function () {
        var value = $.trim($(this).val());
        if (value == "You can't leave this blank" || value == "Name" || value == "Email Address"
        value == "Telephone") {
            $(this).val("");
        }
    };

    $(function () {
        $(".submit-button").click(function () {
            $("#send-name").validate(1, "Name");
            $("#send-mail").validate(6, "Email Address");

            $(".spinny").fadeTo(0, 1);
            $(this).attr('value', 'Validating...');
            return false;
        });
    });
});

<form method="POST" action="">
    <div class="left">
        <label for="name">What's your name?</label>
        <input type="text" id="send-name" name="name"
        id="name" class="watermark" size="40" value="Name" />
        <br />
        <label for="email">Your Email</label>
        <input type="text" id="send-mail" name="email" size="40"
        class="watermark" Value="Email Address" />
        <br />
        <label for="number">Your contact number</label>
        <input type="text" id="send-number" name="number"
        size="40" class="watermark" value="Telephone" />
        <br />
    </div>
    <div class="right">
        <label for="message">How can I help?</label>
        <textarea name="message" id="message" class="watermark"
        cols="40" rows="10" title="Message"></textarea>
        <br />
        <Br />
        <img src="_img/spinny.gif" class="spinny" />
        <input type="submit" class="submit-button" value="Submit" />
    </div>
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T09:20:05.537

`});`你之前忘记了`$(function () {`。你也忘记了`||`之前`value == "Telephone"`

实际上，只需删除`$(function () {`- 当您已经拥有一个新的文档就绪块时，没有理由开始！

```
$(document).ready(function () {

    // Length validation
    $.fn.validate = function (clength, value) {
        ...
    };

    // Default value validation
    $.fn.clear = function () {
        ...
    };

    $(".submit-button").click(function () {
        ...
    });
}); 
```

* * *

其他一些改进代码的建议：

*   `$(this).attr('value'`不好。始终用于`.val()`获取/设置元素的值。
*   不要`jQuery`多写一次。如果您希望您的代码与 兼容`$.noConflict()`，请像这样更改第一行：`jQuery(document).ready(function($){`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T09:20:36.263

您在这里缺少一个运算符：

```
value == "Email Address"  value == "Telephone" 
```

应该：

```
value == "Email Address" || value == "Telephone" 
```

此外，您缺少事件处理程序的结尾`});`。`ready`但是，您根本不必在准备好的处理程序中声明扩展。

# c# - AJAX with ASP.NET 4 - 使用 ajax 添加到 ListItem

> ID：10469452
> 
> 赞同：0
> 
> 时间：2012-05-06T09:19:44.990
> 
> 标签：c#, asp.net, ajax

首先，我想指出，我对在 ASP.NET 中使用 MS Ajax 框架非常陌生，因此我可能做错了一些非常简单和基本的事情......我非常乐意接受这一点！

无论如何，我试图通过向服务器发送一个新的序列号，验证它然后从服务器端更新列表框控件来将项目添加到列表框。第一次单击按钮时，我得到了想要的结果——新的序列号被发送到服务器，添加到服务器的列表框类实例，然后发送回客户端。到现在为止还挺好...

不幸的是，下次我单击添加按钮时出现异常：

> [http://ajax.aspnetcdn.com/ajax/4.5/3/MicrosoftAjaxWebForms.debug.js](http://ajax.aspnetcdn.com/ajax/4.5/3/MicrosoftAjaxWebForms.debug.js)中第 881 行第 13 列的未处理异常
> 
> 0x800a139e - Microsoft JScript 运行时错误：Sys.WebForms.PageRequestManagerServerErrorException：已添加具有相同键的项目。

这第二个命令似乎没有将其提交给服务器，异常似乎在客户端到达服务器之前（我通过在按钮单击事件处理程序上的服务器上放置断点和跟踪命令来验证这一点）。

我不确定它指的是什么键，而且我对 ajax 框架还不够熟悉，无法尝试通过 javascript 的嵌套来跟踪问题！

我知道问题与我对列表框的使用无关，因为当我只有按钮和文本框时问题仍然存在。

我已经包含了我的 ASP 代码和代码隐藏或一个非常简单的应用程序，我可以在上面重现这个问题。如果有人能对这个例外有所了解，我将不胜感激 - 到目前为止，我所做的任何搜索都只发现人们使用数据绑定并且确实存在重复键......我什至不知道我在哪里用钥匙！我确定这是在 ajax 框架内部注册的东西。

```
<%@ Page Language="C#" AutoEventWireup="true" CodeBehind="AjaxTest.aspx.cs" Inherits="AjaxTest" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
</head>
<body>
    <form id="form1" runat="server">
    <div>
        <asp:ScriptManager runat="server" EnableCdn="true" ID="ScriptManager" />
        <asp:UpdatePanel ID="ListBoxPanel" runat="server">
            <ContentTemplate>
                <asp:ListBox ID="lstSerialNumbers" runat="server" /><br />
                <asp:TextBox ID="txtNewSn" runat="server" MaxLength="50" /><br />
                <asp:Button ID="btnAddSn" runat="server" OnClick="btnAddSn_Click" Text="Add"/>
            </ContentTemplate>
        </asp:UpdatePanel>

    </div>
   </form>
</body>
</html> 
```

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;

namespace Test
{
    public partial class AjaxTest : System.Web.UI.Page
    {
        protected void Page_Load(object sender, EventArgs e)
        {

        }

        protected void btnAddSn_Click(object sender, EventArgs e)
        {
            lstSerialNumbers.Items.Add(new ListItem(txtNewSn.Text));
            txtNewSn.Text = "";
        }
    }
} 
```

如果我可以提供任何其他信息，请告诉我。

问候， 安东尼

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T09:36:22.247

我检查了您的代码，它运行良好，没有问题您是否尝试重新安装 ms ajax？ [http://www.microsoft.com/en-us/download/details.aspx?id=883](http://www.microsoft.com/en-us/download/details.aspx?id=883)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T13:32:28.750

我刚刚遇到了类似的问题，WebForms 控件仅在我的开发机器上停止响应。

例如，我会在列表视图中单击[编辑]（第一个命令可以）并获取 EditItemTemplate。如果我单击其他任何内容（例如 [Update] 或 [Cancel]），UI 中将不会发生任何事情，但我可以通过调试器看到更新或取消事件实际上正在触发 - 只是 UI 已死。

我启动了 Fiddler 并且可以看到从请求中发回

```
"49|error|500|An item with the same key has already been added.| 
```

在拉了很多头发和咬牙切齿之后，我发现了一些[有类似问题的](http://forums.asp.net/t/1830421.aspx/1?MicrosoftAjaxWebForms%20An%20item%20with%20the%20same%20key%20has%20already%20been%20added)可怜的家伙——在他的例子中，它原来是 Telerik rad 脚本管理器参数，它是 EnableCdn = true。我没有使用它，但 ACT 使用的是 CDN。当我设置

```
<ajaxToolkit:ToolkitScriptManager runat="server"  EnableCdn="false"> 
```

一切都开始正常工作了。

我非常讨厌 Ajax Control Toolkit。我发布了这个迟到的“答案”（= 不要在开发人员上使用 CDN），这样其他人就不会像我一样遭受痛苦。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T08:39:09.353

我只是想结束这个问题，通过简单地重建项目，我设法让一切正常。我不确定是什么导致了这个问题，或者究竟是什么解决了这个问题，但它似乎起到了作用……令人烦恼的是，如果它再次发生（或帮助其他人），我无法指出它。

# jquery - 使用 Jquery 自动完成提交

> ID：10469453
> 
> 赞同：0
> 
> 时间：2012-05-06T09:19:55.630
> 
> 标签：jquery, jquery-ui, autocomplete, submit

我正在使用 Jquery 自动完成[信息](http://jqueryui.com/demos/autocomplete/)

单击时，我正在尝试提交列表项的文本。所以我尝试了：

```
select: function(e, ui){
        $('form').submit();

       } 
```

它现在所做的是提交输入值，而不是列表项文本。我怎样才能提交列表项？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T10:28:57.953

我不完全了解您要提交的内容，但是您可以创建一个隐藏字段，并在您的活动中将“列表”放入您的隐藏字段中。在这种情况下，当您提交表单时，您可以获得隐藏字段的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T09:42:14.770

所以我确实在关闭时提交（在输入键上），如下所示：

```
close: function(e, ui){
        $('form').submit();
       } 
```

我像这样处理鼠标点击：

```
$('.ui-autocomplete').click(function() {
$('form').submit();
}); 
```

这种“解决方法”会导致问题吗？在某些特定情况下这不起作用...？？

（如果我什么都没听到，我会接受我自己的回答（：）

# javascript - html 中的内联 svg - 如何优雅地降级？

> ID：10469457
> 
> 赞同：9
> 
> 时间：2012-05-06T09:20:18.257
> 
> 标签：javascript, html, svg

请参阅下面的代码 - 我正在尝试在我的网站中包含内联 svg。我正在遵循[一个简洁的建议](http://shepherdinteractive.com/about-us/blog/2008/12/inline-svg-fallback/)来使用 svg 开关元素，以便它在旧浏览器上优雅地降级。这个想法是支持 svg 的浏览器使用 switch 块中的第一个元素；那些不忽略所有 svg 标签而只显示埋在 switch 块的第二个元素（即 foreignobject 标签）中的 img。

它工作得非常好......除了我的 svg（它是乐谱）必须包含文本元素并且它们被旧浏览器渲染（以及外来对象）。

具有讽刺意味的是，在 IE8 及更低版本中使用条件注释很容易解决这个问题。

对于其他较旧的浏览器，我在 foreignobject 中有一个 javascript 解决方法，它重新定义了 svg 文本的类。它有效......但感觉就像一个真正的黑客。

有没有更好的方法来做到这一点（更好的 javascript、css 解决方案、另一种处理 svg 文本的方法......）？

无论如何，这是代码的基本内容：

```
<html>
<head>

<!-- this deals with elements using the svgtext class in old IE browsers -->
<!--[if lte IE 8]>
<style type="text/css">
.svgtext { display: none; }
</style>
<![endif]-->
<style type="text/css">
.donotdisplay { display: none; }
</style>

</head>
<body>

<svg ...>
<switch>
<g>
<!-- the svg goes here -->
<text class="svgtext">this gets rendered unless I deal with it</text>
</g>
<foreignObject ...>
<script type="text/javascript">
window.onload=function(){
  var inputs=document.getElementsByTagName('text');
  for(i=0;i<inputs.length;i++){
    inputs[i].className='donotdisplay';
  }
}
</script>
<!-- the replacement img tag goes here -->
</foreignObject>
</switch>
</svg>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-06T11:15:28.900

这是针对 IE8 和更早版本以外的浏览器（需要基于 JS 的 shiv 来识别`text`元素）的一个仅 CSS 解决方案的想法，

```
<!DOCTYPE html>
<html>
  <head>
    <title>Test Case</title>

<!--[if lte IE 8]>
    <script type="text/javascript">
      document.createElement("text");
    </script>
<![endif]-->

    <style type="text/css">
      @namespace svg "http://www.w3.org/2000/svg";
      text { display: none; }
      svg|text { display: inline; }
    </style>
  </head>
  <body>

    <svg>
      <switch>
        <g>
          <circle cx="100" cy="50" r="40" stroke="black" stroke-width="2" fill="red"/>
          <text x="20" y="120">this gets rendered unless I deal with it</text>
        </g>
        <foreignObject>
          <p>Use an SVG capable browser</p>
        </foreignObject>
      </switch>
    </svg>

  </body>
</html> 
```

这里的想法是支持 SVG 内联的浏览器通过将 SVG 元素放入“http://www.w3.org/2000/svg”命名空间来实现，然后可以在 css 中对其进行寻址。

在显示 SVG 的 Firefox 12、IE9、Chrome 18 Opera 11.6 以及显示回退的 Firefox 3.6 和 Safari 5.0 中进行了测试。

JSFiddle 在[http://jsfiddle.net/rGjKs/](http://jsfiddle.net/rGjKs/)

# c# - Winform Syncfusion ToolStripRadioButton 图像

> ID：10469465
> 
> 赞同：0
> 
> 时间：2012-05-06T09:21:29.250
> 
> 标签：c#, winforms, radio-button, syncfusion

我在 Winform 项目中使用 Syncfusion。我正在尝试添加一个 ToolStripEx ToolStripRadioButton。ToolStripEx 在功能区中。

我希望单选按钮是图像。

我的代码是：

```
LayoutCoosing.Items.Add(new ToolStripRadioButton()
{ 
    Name = "SingleScreenDividerButton",
    DisplayStyle = System.Windows.Forms.ToolStripItemDisplayStyle.Image,
    Image = (Image)Properties.Resources.ResourceManager.GetObject("SingleScreenDivider"),
    GroupID = 0,
    Checked = true
}); 
```

我检查了，图像路径是好的。为什么 RadioButton 没有得到图像？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T05:08:44.453

`ToolStripRadioButton`不支持显示图像。因为`ToolStripRadioButton`是从 派生的`ToolsStripButton`，所以它将避免基础渲染来渲染`RadioButton`外观，并且我们没有任何实现来渲染其中的图像。

但这种支持将在我们未来的版本中提供。

# php - JavaScript 事件，与 php 混合？

> ID：10469466
> 
> 赞同：-2
> 
> 时间：2012-05-06T09:21:43.913
> 
> 标签：php, javascript, css, javascript-events

因此，我提出的一个想法遇到了一个巨大的错误。所以我正在我的主要网站上做一个项目，我们需要在页面上放置一个正在工作的页面，yadayda，但我想添加让用户向我们发送电子邮件的功能，但是在我们收到该数据后，弹出对话框会显示..但这并不像我想要的那样工作。

所以我需要帮助的实际上是 PHP 和 JavaScript 事件，以使其确认消息和电子邮件已发送，然后显示对话框。有谁知道如何做到这一点？或者至少如何在用户执行某些操作后显示对话框，例如输入信息而不是单击按钮？如果有人可以提供帮助，我将非常感激！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-06T09:24:37.133

如果您使用 jQuery，您可以对服务器端脚本进行 AJAX 调用，并使用成功回调在客户端启动对话。

```
$.ajax({
  url: 'ajax/test.php',
  data: { name: "WeLikeThePandaz", email: "panda@gmail.com" },
  success: function(response) {
    if (response.status == "OK"){
      // Show dialog 
    }else{
      // Let the user know there were errors
      alert(response.error);
    }
  }
},'json'); 
```

这是使用该`$.ajax`方法的相关文档 -

[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

* * *

然后，您的服务器端 PHP 代码`ajax/test.php`可以破译发送的数据并组装一个 json 对象以返回给 jQuery -

```
<?php
$err= '';
$name = sanitizeString($_POST['name']);
$email = sanitizeString($_POST['email']);
// note the sanitization of the strings before we insert them - always make sure
// to sanitize your data before insertion into your database.

// Insert data into database.
$result = mysql_query('INSERT INTO `user_table` VALUES...');
if (!$result) {
  $status = "FAIL";
  $err = mysql_error();
}else{
  $status = "OK";
} 

echo json_encode(array('error'=>$err,'status'=>$status)); // send the response
exit();

?> 
```

# php - 使用php更改apache服务器的IP地址

> ID：10469471
> 
> 赞同：0
> 
> 时间：2012-05-06T09:22:58.390
> 
> 标签：php, linux, apache, ip

我正在尝试创建一个设置页面（为客户端），他们可以在其中查看当前的上行地址、更改 IP 地址等。我有一个 php 文件来查看 IP 地址

```
 <?php
  $res=shell_exec("ifconfig");
  echo $res;
 ?> 
```

这段代码工作得很好，并显示了预期的结果。但是，更改服务器 IP 地址的代码无法正常工作。

```
 <?php
 shell_exec("ifconfig eth0 192.168.163.136");
 ?> 
```

运行此代码后，当我使用 ipaddr 检查终端上的 ipaddress 时，我看不到 ipaddress 有任何变化。请指出我哪里出错了。我认为这是 apache 不是超级/root 用户的问题。如果是这种情况，我不知道如何让 apache 以 root 用户身份运行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T09:29:33.323

您的 PHP 脚本没有足够的权限来更改接口地址。您可能想要编写一个 Shellscript，赋予它正确的权限（例如，将其所有者更改为 root，并设置 suid 位），然后从您的 PHP 脚本运行它。然而，我建议不要做这样的事情

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T09:25:10.437

IP 地址是在网络协议的*网络层*中配置的，而不是在PHP 运行的**应用层中配置的。***简单地说*，PHP 无权访问它，也无法更改它们。

想象一下，如果可能的话，它可能会造成哪些漏洞。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T20:54:02.793

`/srv/http`在 ifconfig 工作之前添加。它所需要的只是根拥有的位置。

# c++ - 调用子类化 QWidget 的方法

> ID：10469472
> 
> 赞同：0
> 
> 时间：2012-05-06T09:23:48.247
> 
> 标签：c++, class, qt4

这应该很容易，但是有些东西不起作用，我找不到问题。

我有两个类，如下所示：

1) 个人选项卡

```
#ifndef INDIVIDUALTAB_H
#define INDIVIDUALTAB_H

#include <QMainWindow>
#include <QInputDialog>
#include <QTableWidget>
#include <QVBoxLayout>
#include <QLabel>

class IndividualTab : public QWidget
{
    Q_OBJECT

public:
    IndividualTab(QWidget *parent = 0);
    QTableWidget *table;
    QVBoxLayout *layout;

};
#endif // INDIVIDUALTAB_H

IndividualTab::IndividualTab(QWidget *parent) : QWidget()
{
    table = new QTableWidget(0,4);
    layout = new QVBoxLayout();
} 
```

2) 二等舱

```
#ifndef SECONDCLASS_H
#define SECONDCLASS_H

#include "individualtab.h"

class secondClass : public QMainWindow
{
    Q_OBJECT

public:
    explicit secondClass(QWidget *parent = 0);
    Ui::secondClass *ui;
    ~secondClass();

    QList<IndividualTab> *individualTabList;
};
#endif // SECONDCLASS_H

secondClass::secondClass(QWidget *parent) : QMainWindow(parent), ui(new Ui::secondClass)
{
    ui->setupUi(this);
}

secondClass::~secondClass()
{
    delete ui;
}

void secondClass::addNewItem()
{
    //Getting parameters
    QList<QString> parameters;
    //creating QList

    //Updating individualTab
    for(int i = 0; i < ui->tabWidget->count(); i++)
    {
        if(parameters.at(0) == ui->tabWidget->tabText(i))
        {
            IndividualTab tab = individualTabList->at(i);
            tab.addItem(parameters);
            break;
        }
 }
} 
```

当我编译我有这个错误：

```
In file included from ../secondclass.h:5:0,
                 from ../secondclass.cpp:1:
/usr/include/qt4/QtGui/qwidget.h: In copy constructor 'IndividualTab::IndividualTab(const IndividualTab&)':
/usr/include/qt4/QtGui/qwidget.h:806:5: error: 'QWidget::QWidget(const QWidget&)' is private
../individualtab.h:10:7: error: within this context
../secondclass.cpp: In member function 'void SecondClass::addNewItem()':
../secondclass.cpp:142:56: note: synthesized method 'IndividualTab::IndividualTab(const IndividualTab&)' first required here 
```

我坚持认为问题出在`IndividualTab tab = individualTabList->at(i);` 所以我换了

```
IndividualTab *tab = new IndividualTab();
tab = individualTabList->at(i); 
```

但在这种情况下，我有这个错误：

```
../secondclass.cpp: In member function 'void SecondClass::addNewItem()':
../secondclass.cpp:143:42: error: cannot convert 'const IndividualTab' to 'IndividualTab*' in assignment
../secondclass.cpp:144:17: error: request for member 'addItem' in 'tab', which is of non-class type 'IndividualTab*'
In file included from ../secondclass.h:5:0,
                 from ../secondclass.cpp:1:
/usr/include/qt4/QtGui/qwidget.h: In copy constructor 'IndividualTab::IndividualTab(const IndividualTab&)':
../individualtab.h:10:7:   instantiated from 'void QList<T>::node_construct(QList<T>::Node*, const T&) [with T = IndividualTab]'
/usr/include/qt4/QtCore/qlist.h:512:13:   instantiated from 'void QList<T>::append(const T&) [with T = IndividualTab]'
../Ripetizioni/secondclass.cpp:112:38:   instantiated from here
/usr/include/qt4/QtGui/qwidget.h:806:5: error: 'QWidget::QWidget(const QWidget&)' is private
../individualtab.h:10:7: error: within this context
In file included from /usr/include/qt4/QtCore/qobject.h:50:0,
                 from /usr/include/qt4/QtGui/qwidget.h:46,
                 from /usr/include/qt4/QtGui/qmainwindow.h:45,
                 from /usr/include/qt4/QtGui/QMainWindow:1,
                 from ../secondclass.h:4,
                 from ../secondclass.cpp:1:
/usr/include/qt4/QtCore/qlist.h: In member function 'void QList<T>::node_construct(QList<T>::Node*, const T&) [with T = IndividualTab]':
/usr/include/qt4/QtCore/qlist.h:372:58: note: synthesized method 'IndividualTab::IndividualTab(const IndividualTab&)' first required here 
```

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T09:29:18.357

`QWidget`s 不是用来复制的。你`individualTabList`应该是一个指向-的容器`IndividualTab`。并且没有充分的理由将该成员本身作为指针。将声明更改为：

```
 QList<IndividualTab*> individualTabList; 
```

那么你也能：

```
IndividualTab *tab = individualTabList.at(i); 
```

# git - 如何合并回远程分支

> ID：10469474
> 
> 赞同：15
> 
> 时间：2012-05-06T09:24:12.523
> 
> 标签：git, github

我的远程 GitHub 存储库中有这两个分支：

*   **发展**
*   **掌握**

如何将开发合并到远程存储库上的 master 中？我试过了

```
git merge development 
```

和

```
git merge origin 
```

但它说 repo 是最新的，所以我做错了，因为 github 说开发比 master 提前 12 次提交。

**更新**

感谢您的跟进 - 这里有更多信息，我使用了推送到远程存储库

```
git push origin 
```

并且我的更改已提交。如果我在另一个文件夹中进行克隆，如果我签出开发分支，我会看到那里的所有更改。

```
git branch -av 
development      8265e30 - etc
hotfix-t4        8342e44 - etc 
*master          0041bod - Initial Commit
  remotes/origin/HEAD  -> origin/master
  remotes/origin/development 8265e30 - etc
  remotes/origin/experimental 22cd3ef test1
  remotes/origin/hotfix-t4 8342e44 test
  remotes/origin/master 0041bod Initial commit 
```

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-05-06T10:08:14.490

`git push`or的行为`git push origin`（即，当您没有将 refspec 指定为最后一个参数时）相当令人惊讶 - 默认情况下，只要具有该名称的分支在本地和远程都存在，它就会将每个分支推送到同名之一。（可以使用`push.default`config 选项更改此默认值。）

因此，为了确保您已正确地将特定分支推送到远程中的相同名称`origin`，最好始终使用这种形式：

```
git push origin <branch-name> 
```

...相当于`git push origin <branch-name>:<branch-name>`.

所以，为了确保你已经合并`development`到`master`本地，然后推`master`送到 GitHub，请完全执行以下操作：

```
git checkout master
git merge development
git push origin master 
```

# java - Android，如何在通过蓝牙发送数据时更新 UI

> ID：10469475
> 
> 赞同：0
> 
> 时间：2012-05-06T09:24:14.897
> 
> 标签：java, android

我的应用程序上有一个按钮，当我单击时（将我带到图片库以获取结果）。当我选择图片时，我得到的结果很好，然后开始使用独立方法传输图像。

问题是 UI 卡在画廊屏幕上，然后屏幕变暗，直到传输完成...我尝试使用 run on ui 更新 UI，但它不起作用...

```
while ((bytesRead = bis.read(buf, 0, buf.length)) != -1)
        {
            BT_data_out.write(buf, 0, bytesRead);
            if(fill++ > 2) {BT_data_out.flush(); fill = 0;};
            prgrss += bytesRead;
            final String done = Integer.toString(prgrss);
            final String total = Integer.toString(fileL);

            if(update_rate > (50000/bufSize) ) {
                update_rate = 0;
                runOnUiThread(new Runnable()
                {
                    @Override
                    public void run()
                    {
                        mTextMISC.setText(done+"/"+total+" B");
                    }
                });

            }
            update_rate++;
        } 
```

传输完成后，我可以看到 UI 线程的最终效果，但从未看到所有中间更新。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T09:34:20.767

您不能从辅助线程本地更新主 UI 线程。为此，您必须将[处理](http://developer.android.com/reference/android/os/Handler.html)程序附加到主 UI 线程并从辅助线程向其发布消息。或者，您可以使用[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)，它是 Android 的实现，使线程和处理程序的使用变得更加容易。

# iphone - 内部属性与 ivars

> ID：10469488
> 
> 赞同：4
> 
> 时间：2012-05-06T09:26:50.890
> 
> 标签：iphone, objective-c, ios, automatic-ref-counting

当我需要一个私有对象时，我目前使用属性，如下所示：

```
// Class extension in .m file
@interface MyClass()
@property (strong, nonatomic) NSArray* myInternalArray;
@end

self.myInternalArray = something; 
```

或者，您可以这样做：

```
@implementation MyClass {

    NSArray* _myInternalArray;
}

_myInternalArray = something; 
```

如果没有自定义 setter 或 getter，两者是等价的。内部变量的最佳实践是什么？一种方法比另一种方法有什么优势吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-06T10:06:30.040

虽然有些人可能会争辩说选择是一个偏好问题，而且他们确实有一点道理，但大多数现代语言都支持属性并使它们更容易和更容易编码是有充分理由的。

ARC 的引入并没有显着降低房产的价值。这一切都归结为 - 在一个属性中，您已经封装了一个变量的使用。这种封装在需要时是无价的，而在不需要时则没有太多开销。

例如（在我的脑海中）假设您发现您需要在保存之前验证该值。如果您使用的是 iVar，则必须确保在使用 iVar 的任何地方都调用了验证代码，然后才允许更改其值。使用属性，您只需要覆盖`setIVarName:`并将验证放在那里。有人可能会争辩说，一个与另一个一样简单——在许多情况下可能是这样，但这里 iVar 存在一个障碍——你不能确保未来的更改（由你或其他编码人员）会在之前插入验证iVar 已更改。在这里使用属性确实有这种保证。

就个人而言，我尽可能使用 iVar 上的属性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-06T10:05:11.430

我想说属性的优点是您可以使用设置器，并且设置器可以独立于调用它们的代码而发展。例如，您可以决定现在设置属性将触发 setNeedsLayout。通过从一开始就使用属性，您无需重构现有代码。

这种模式非常适合 Cocoa/iOS API，在这些 API 中，您不必在更改其属性后要求系统对象执行任何操作：setter 立即确保内部和 UI 的一致性。

属性是私有的这一事实不应该让我们将它们实现为二等属性，你怎么看？

# c# - 无法加载文件或程序集“System.Data”

> ID：10469489
> 
> 赞同：1
> 
> 时间：2012-05-06T09:27:09.137
> 
> 标签：c#, web-config

我收到此错误：

```
Could not load file or assembly 'System.Data' or one of its dependencies 
```

这是我在 Web.Config 中的代码。

```
<add assembly="System.Data" /> 
```

程序集加载跟踪：以下信息有助于确定无法加载程序集“System.Data”的原因。

```
WRN: Assembly binding logging is turned OFF.
To enable assembly bind failure logging, set the registry value [HKLM\Software\Microsoft\Fusion!EnableLog] (DWORD) to 1.
Note: There is some performance penalty associated with assembly bind failure logging.
To turn this feature off, remove the registry value [HKLM\Software\Microsoft\Fusion!EnableLog]. 
```

* * *

版本信息：Microsoft .NET Framework 版本：4.0.30319；ASP.NET 版本：4.0.30319.272

你能帮我弄清楚我做错了什么吗？谢谢

# javascript - Cufon（jQuery？）选择器不选择子级

> ID：10469490
> 
> 赞同：2
> 
> 时间：2012-05-06T09:27:09.217
> 
> 标签：javascript, jquery-selectors, cufon

我有一个带有子菜单的非常基本且常用的列表菜单：

```
<ul>
    <li>Home</li>
    <li>
        About
        <ul id="sub-menu">
            <li>Child1</li>
            <li>Child2</li>
        </ul>
    </li>
</ul> 
```

然后我有一个 Cufon 选择器将字体应用于菜单：

```
Cufon.replace('ul li a'); 
```

有没有办法只选择菜单的第一级而忽略另一级？现在两个级别都有字体，但我想为子菜单使用别的东西。

我是 Javascript、Cufon 和 jQuery 的初学者，我尝试使用子选择器，但我没有运气。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T10:41:13.680

您的 JavaScript 库似乎使用了 CSS 样式的选择器；你可以使用

```
<ul class='containingMenu'>
 <li>Home</li>
 <li>
    About
    <ul id="sub-menu">
        <li>Child1</li>
        <li>Child2</li>
    </ul>
 </li>
</ul> 
```

用这个选择器

```
ul.containingMenu > li > a 
```

其中`>`导致选择器仅适用于`a`作为 的直接子代的`li`的直接子代的`ul.containingMenu`。

↪[在 JSFiddle 上查看这个示例](http://jsfiddle.net/FVzeQ/)。

# c++ - 朋友类定义

> ID：10469503
> 
> 赞同：4
> 
> 时间：2012-05-06T09:30:07.583
> 
> 标签：c++, methods, static, friend

今天我查看了头文件的源代码，`boost::asio::ip::address`发现了以下几行：

```
class address
{
  // I removed some irrelevant lines here...

  public:

  /// Compare addresses for ordering.
  friend bool operator>=(const address& a1, const address& a2)
  {
    return !(a1 < a2);
  }
}; 
```

现在我知道什么`friend`是 for 但我从未见过它后面跟着一个定义，**在类定义**中。

所以我的问题是，这个`friend`声明有什么作用？在我看来，这`operator>=`不是一种方法，但是也没有`static`关键字。

在这种特殊情况下是否`friend`替换？`static`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T09:35:10.703

是和不是。它不会替换`static`，因为您在呼叫接线员时不需要限定名称。它有点像你不需要类实例来调用它。

这就像在类外声明运算符：

```
class address
{
  // I removed some irrelevant lines here...

  public:

  /// Compare addresses for ordering.
  friend bool operator>=(const address& a1, const address& a2);
};

inline bool operator>=(const address& a1, const address& a2)
{
   return !(a1 < a2);
} 
```

您可以从类中访问私有和受保护的方法。

Think of overloading the stream operator inside the class, the same technique can be applied.

# css - 我可以像这样在 CSS 中组合伪类吗？

> ID：10469504
> 
> 赞同：0
> 
> 时间：2012-05-06T09:30:17.093
> 
> 标签：css, css-selectors, pseudo-class

**HTML：**

```
<table>
<tr class="not-counted"><th>Heading 1</th></tr>
<tr><td>key1</td><td>val1</td></tr>
<tr><td>key2</td><td>val2</td></tr>
<tr class="not-counted"><th>Heading 2</th></tr>
<tr><td>key3</td><td>val3</td></tr>
</table>​ 
```

**CSS 样式：**

```
table tr:not(.not-counted):nth-child(even) td {
    background-color: gray;
}​ 
```

**演示：http:** [//jsfiddle.net/MartyIX/fdtpL/](http://jsfiddle.net/MartyIX/fdtpL/)

我希望包含 key3 的 TR 也有灰色背景，但它不起作用。如何正确编写 CSS？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T11:31:55.513

您想在 CSS 中为带有斑马线的表格设置样式，其中未知数量的行未设置样式（或隐藏，相同的结果），这些未设置样式的行位于表中的任何位置。
要设置样式的每个剩余行前面是奇数位置的未知数量的无样式行和偶数位置的未知数量的无样式行，以任何顺序排列。

除非您添加约束，否则您的特殊需求在 CSS2.1 或 CSS3 中是不可设置的。[例如，如果你知道你会遇到多少无样式的行，那么我下面的推特中的 2 个小提琴就可以解决问题： https](https://twitter.com/#!/PhilippeVay/statuses/166243438436687873)
://twitter.com/#!/PhilippeVay/statuses/166243438436687873这是来自地狱的 CSS，不要永远不要在生产中这样做！简而言之，jQuery/Sizzle 和它的伪类要好得多。或者更好的是，为您想要设置样式的每一行添加一个类服务器端。`:visible`

您的示例的其他小提琴：http: [//jsfiddle.net/yBKqy/](http://jsfiddle.net/yBKqy/)
您可以看到它一直有效，直到您的第二个无样式行旁边的行。下面的其余行前面都有一个奇数无样式行和一个偶数无样式行；适用的规则将是最后宣布的规则。AFAIK 无法以有意义的方式应用一个或另一个。如果您向第一个选择器添加权重，它将始终适用。如果您不这样做，最后一个将始终适用。

如果您知道在有另一个无样式行或表格末尾之前有多少行可以跟随无样式行，这里是另一个小提琴：http: [//jsfiddle.net/yBKqy/3/](http://jsfiddle.net/yBKqy/3/)
这个特定示例适用于不超过 4 行一行，但不是 6。你可以让它与 6 一起工作，但它会在 7 时失败，等等

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T12:32:29.970

我在虚拟线的帮助下解决了这个问题：

**HTML**

```
<table>
<tr><th>Heading 1</th></tr>
<tr style="display:none;"><th></th></tr> <!-- dummy line -->
<tr><td>key1</td><td>val1</td></tr>
<tr><td>key2</td><td>val2</td></tr>
<tr><th>Heading 2</th></tr>
<tr style="display:none;"><th></th></tr> <!-- dummy line -->
<tr><td>key3</td><td>val3</td></tr>
</table>​ 
```

**CSS**

```
table tr:nth-child(even) td {
    background-color: gray;
}​ 
```

**演示**

[http://jsfiddle.net/MartyIX/fdtpL/3/](http://jsfiddle.net/MartyIX/fdtpL/3/)

我并不为此感到骄傲，但我已经为此浪费了太多时间。

# c++ - 每个字母的重复次数

> ID：10469506
> 
> 赞同：-10
> 
> 时间：2012-05-06T09:31:01.117
> 
> 标签：c++, numbers, counting

你知道如何在 C++ 中找到单词中每个字母的重复次数吗？例如，这个词是密西西比州。

米 - 1

我 - 4

小号 - 4

P - 2

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-06T09:40:59.927

由于这几乎肯定是功课，我只会给出整体情况。

当然，为每个可能的字母创建一个向量（因为您说英语，可能 26 位向量就足够了）。将所有位置初始化为零。

遍历整个字符串，对于每个字母，将每个位置添加到与您正在阅读的字符串位置中的字母对应的向量中。例如，如果您正在阅读“a”，则将 1 与第一个位置相加。对于“b”，将 1 与第二个位置相加，依此类推。请注意，您不应该关心大写和小写。

到达字符串的末尾？美好的。现在遍历整个向量并显示每个非零位置的计数。你可以把对应的字母放在它的一边。

请记住，所有简单字母都按 ASCII/Latin1/UTF-* 的字母顺序排列，因此“a”将为您提供相应字母的编号。( x - 'a' ) 会给你字母在向量中的位置。不要好奇哪个确切的值是不可移植的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-06T09:40:47.233

使用地图...自己选择是否处理大写/小写和标点符号/其他符号。

```
#include <map>
#include <iostream>

using namespace std;

int main() {
    string word = "MISSISSIPPI";
    map<char,int> charCount;
    for (unsigned int i=0; i<word.size(); i++)
        charCount[word[i]]++;

    for (map<char, int>::iterator it = charCount.begin(); it != charCount.end(); ++it)
        cout << it->first << ": " << it->second << endl;

    return 0;
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-06T09:59:05.037

我想你可以尝试这样的事情：

```
#include <iostream>
#include <cstring>

int main()
{
    const int N = 26;//number of characters in the alphabet
    int count[N];
    char *str = "MISSISSIPPI";

    for (int i = 0; i < N; i++) count[i] = 0;
    for (int i = 0; i < strlen(str); i++)
    {
        if (str[i] >= 'a' && str[i] <= 'z')
            ++count[str[i]-'a'];
        else if (str[i] >= 'A' && str[i] <= 'Z')
            ++count[str[i] - 'A'];

    }
    for (int i = 0; i < N; i++)
        cout << (char)('a'+i) << " - " << count[i];

    return 0;
} 
```

# c++ - 符号加载非常慢

> ID：10469508
> 
> 赞同：4
> 
> 时间：2012-05-06T09:31:12.287
> 
> 标签：c++, macos, gdb

我最近注意到 gdb 需要很长时间才能开始从我的目标应用程序执行代码。我不知道为什么。我正在使用 MacOS 10.6.5 和 GNU gdb 6.3.50-20050815（Apple 版本 gdb-1510）

如果我用 CTRL-C 中断它，我可以从回溯中看到以下输出（如下）。看起来它在加载符号时卡住了？

无论如何，我对 gdb 在后台的工作方式相当不熟练。有人可以为我建议一个改进的技巧吗？

```
#0  0x00007fff5fc05136 in __dyld__ZN4dyldL10loadPhase5EPKcRKNS_11LoadContextEPSt6vectorIS1_SaIS1_EE ()
#1  0x00007fff5fc0523f in __dyld__ZN4dyldL10loadPhase4EPKcRKNS_11LoadContextEPSt6vectorIS1_SaIS1_EE ()
#2  0x00007fff5fc0599e in __dyld__ZN4dyldL10loadPhase3EPKcRKNS_11LoadContextEPSt6vectorIS1_SaIS1_EE ()
#3  0x00007fff5fc05a47 in __dyld__ZN4dyldL10loadPhase1EPKcRKNS_11LoadContextEPSt6vectorIS1_SaIS1_EE ()
#4  0x00007fff5fc05b65 in __dyld__ZN4dyldL10loadPhase0EPKcRKNS_11LoadContextEPSt6vectorIS1_SaIS1_EE ()
#5  0x00007fff5fc05bf0 in __dyld__ZN4dyld4loadEPKcRKNS_11LoadContextE ()
#6  0x00007fff5fc06a5d in __dyld__ZN4dyldL14libraryLocatorEPKcbS1_PKN11ImageLoader10RPathChainE ()
#7  0x00007fff5fc0c746 in __dyld__ZN11ImageLoader22recursiveLoadLibrariesERKNS_11LinkContextEbRKNS_10RPathChainE ()
#8  0x00007fff5fc0c66f in __dyld__ZN11ImageLoader22recursiveLoadLibrariesERKNS_11LinkContextEbRKNS_10RPathChainE ()
#9  0x00007fff5fc0c66f in __dyld__ZN11ImageLoader22recursiveLoadLibrariesERKNS_11LinkContextEbRKNS_10RPathChainE ()
#10 0x00007fff5fc0c7b6 in __dyld__ZN11ImageLoader4linkERKNS_11LinkContextEbbRKNS_10RPathChainE ()
#11 0x00007fff5fc04d48 in __dyld__ZN4dyld4linkEP11ImageLoaderbRKNS0_10RPathChainE ()
#12 0x00007fff5fc068d6 in __dyld__ZN4dyld5_mainEPK12macho_headermiPPKcS5_S5_ ()
#13 0x00007fff5fc016d2 in __dyld__ZN13dyldbootstrap5startEPK12macho_headeriPPKcl ()
#14 0x00007fff5fc01052 in __dyld__dyld_start () 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2020-07-30T21:03:48.890

我认为这是由于在 gdb 代码中反复设置/恢复信号处理程序造成的。当我使用

ptrace -p

我得到匹配系统调用的页面......

rt_sigaction(SIGSEGV, {SIG_DFL, [], SA_RESTORER, 0x3bfc60f710}, NULL, 8) = 0 rt_sigaction(SIGSEGV, {0x68a820, [], SA_RESTORER|SA_STACK, 0x3bfc60f710}, {SIG_DFL, [], SA_RESTORER, 0x3bfc60, 0x3bfc60, ) = 0 rt_sigprocmask(SIG_BLOCK, NULL, [], 8) = 0 rt_sigaction(SIGSEGV, {SIG_DFL, [], SA_RESTORER, 0x3bfc60f710}, NULL, 8) = 0 rt_sigaction(SIGSEGV, {0x68a820, [], SA_RESTORER|SA_STACK , 0x3bfc60f710}, {SIG_DFL, [], SA_RESTORER, 0x3bfc60f710}, 8) = 0 rt_sigprocmask(SIG_BLOCK, NULL, [], 8) = 0 rt_sigaction(SIGSEGV, {SIG_DFL, [], SA_RESTORER, 0x3bfc60f710}, NULL, 8 ) = 0 rt_sigaction(SIGSEGV, {0x68a820, [], SA_RESTORER|SA_STACK, 0x3bfc60f710}, {SIG_DFL, [], SA_RESTORER, 0x3bfc60f710}, 8) = 0 rt_sigprocmask(SIG_BLOCK, NULL, [], 8) = 0 rt_sigaction( SIGSEGV, {SIG_DFL, [], SA_RESTORER, 0x3bfc60f710}, NULL, 8) = 0 rt_sigaction(SIGSEGV, {0x68a820, [],SA_RESTORER|SA_STACK, 0x3bfc60f710}, {SIG_DFL, [], SA_RESTORER, 0x3bfc60f710}, 8) = 0 rt_sigprocmask(SIG_BLOCK, NULL, [], 8) = 0 rt_sigaction(SIGSEGV, {SIG_DFL, [], SA_RESTORER, 0x3bfc60f710, NULL, 8) = 0 rt_sigaction(SIGSEGV, {0x68a820, [], SA_RESTORER|SA_STACK, 0x3bfc60f710}, {SIG_DFL, [], SA_RESTORER, 0x3bfc60f710}, 8) = 0 rt_sigprocmask(SIG_BLOCK, NULL, [], 8) = 0 rt_sigaction(SIGSEGV, {SIG_DFL, [], SA_RESTORER, 0x3bfc60f710}, NULL, 8) = 0 rt_sigaction(SIGSEGV, {0x68a820, [], SA_RESTORER|SA_STACK, 0x3bfc60f710}, {SIG_DFL, [], SA_0f710}, 0x3bfc 8) = 0 rt_sigprocmask(SIG_BLOCK, NULL, [], 8) = 0SA_RESTORER|SA_STACK, 0x3bfc60f710}, {SIG_DFL, [], SA_RESTORER, 0x3bfc60f710}, 8) = 0 rt_sigprocmask(SIG_BLOCK, NULL, [], 8) = 0 rt_sigaction(SIGSEGV, {SIG_DFL, [], SA_RESTORER, 0x3bfc60f710, NULL, 8) = 0 rt_sigaction(SIGSEGV, {0x68a820, [], SA_RESTORER|SA_STACK, 0x3bfc60f710}, {SIG_DFL, [], SA_RESTORER, 0x3bfc60f710}, 8) = 0 rt_sigprocmask(SIG_BLOCK, NULL, [], 8) = 0SA_RESTORER|SA_STACK, 0x3bfc60f710}, {SIG_DFL, [], SA_RESTORER, 0x3bfc60f710}, 8) = 0 rt_sigprocmask(SIG_BLOCK, NULL, [], 8) = 0 rt_sigaction(SIGSEGV, {SIG_DFL, [], SA_RESTORER, 0x3bfc60f710, NULL, 8) = 0 rt_sigaction(SIGSEGV, {0x68a820, [], SA_RESTORER|SA_STACK, 0x3bfc60f710}, {SIG_DFL, [], SA_RESTORER, 0x3bfc60f710}, 8) = 0 rt_sigprocmask(SIG_BLOCK, NULL, [], 8) = 0

# android - 如何在android中实现switchHoldingandActive

> ID：10469510
> 
> 赞同：0
> 
> 时间：2012-05-06T09:31:33.870
> 
> 标签：android, telephony

我正在android中开发一个应用程序。我能够覆盖来电屏幕，但现在我想实现 SwitchingHoldandActive()。如果您有任何想法和建议，请在此处发布

# android - 关闭/打开安卓屏幕

> ID：10469511
> 
> 赞同：0
> 
> 时间：2012-05-06T09:31:37.047
> 
> 标签：android, screen, brightness

我正在尝试关闭 android 屏幕，然后在几秒钟后再次打开。“关闭”部分有效，使用以下代码：

```
WindowManager.LayoutParams layoutParam = getWindow().getAttributes();
oldBrightness = android.provider.Settings.System.getInt(getContentResolver(), android.provider.Settings.System.SCREEN_BRIGHTNESS)/255f;
layoutParam.screenBrightness = 0; 
layoutParam.flags |= WindowManager.LayoutParams.FLAG_KEEP_SCREEN_ON;
getWindow().setAttributes(layoutParam); 
```

但是，当我尝试再次打开屏幕时，它不适用于以下代码：

```
WindowManager.LayoutParams layoutParam = getWindow().getAttributes();
layoutParam.screenBrightness = oldBrightness;
layoutParam.flags |= WindowManager.LayoutParams.FLAG_KEEP_SCREEN_ON;
getWindow().setAttributes(layoutParam); 
```

有什么想法可以解决吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-08-25T07:18:09.173

我想你可以试试 Powermanager WakeLock 也许它会起作用。我在我的应用程序中使用此代码。它运作良好。:)

您还需要在清单中设置权限。

```
<uses-permission android:name="android.permission.WAKE_LOCK"/> // Manifest Permission

PowerManager pm = (PowerManager) getSystemService(Context.POWER_SERVICE); 
                WakeLock wakeLock = pm.newWakeLock(PowerManager.FULL_WAKE_LOCK
                                                 | PowerManager.ACQUIRE_CAUSES_WAKEUP
                                                 | PowerManager.ON_AFTER_RELEASE, "MyWakeLock");
                wakeLock.acquire(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T12:55:02.090

首先，您确定这一行中的“/255f”：

```
oldBrightness = android.provider.Settings.System.getInt(getContentResolver(), android.provider.Settings.System.SCREEN_BRIGHTNESS)/255f; 
```

当您获取/设置它时，“oldBrightness”的值是多少？

也许你可以试试这个：

```
PowerManager.WakeLock lck = pm.newWakeLock(PowerManager.SCREEN_BRIGHT_WAKE_LOCK | PowerManager.ACQUIRE_CAUSES_WAKEUP, "tag");
lck.acquire(); 
```

正常的唤醒锁不会打开屏幕，但会在用户启动时使其保持打开状态。但是这个标志会强制屏幕立即打开。它需要“android.permission.WAKE_LOCK”。

更多关于它：

[http://developer.android.com/reference/android/os/PowerManager.html#PARTIAL_WAKE_LOCK](http://developer.android.com/reference/android/os/PowerManager.html#PARTIAL_WAKE_LOCK)

以及屏幕属性（开、关、亮、暗等）：

[http://developer.android.com/reference/android/os/PowerManager.html](http://developer.android.com/reference/android/os/PowerManager.html)

# python - 可以抓取未分配给变量的实例化对象吗？

> ID：10469512
> 
> 赞同：2
> 
> 时间：2012-05-06T09:31:43.560
> 
> 标签：python, class, variables, object

您可以抓取未分配给变量的实例化对象吗？例如：

```
import time
time.time() 
```

我怎样才能抓住我已经实例化的对象来调用它的方法。也许我可以获得所有实例化时间对象的列表，然后通过某种返回的 id 重新分配它们？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-06T09:33:07.373

在交互式解释器中，最后计算的值保存为`_`

```
>>> import time
>>> time.time()
1336296696.824
>>> _
1336296696.824 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-06T09:39:43.427

没有引用的对象根本不存在。Python 内存管理通过引用计数来工作。一旦一个对象没有任何引用，它就会被销毁。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-06T09:37:11.350

这闻起来像是对不需要优化的东西进行优化的糟糕尝试。

让 GC 处理这样的对象 - 它很可能会立即被删除，因为它的引用计数在创建后立即为零。

这也意味着无法访问未引用的对象。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-06T10:25:23.330

假设您正在谈论 REPL，[IPython](http://ipython.org/)（我强烈推荐）允许您访问任何过去计算的结果。例如：

```
In [1]: 2 * 2 * 2
Out[1]: 8

In [2]: _ * 2
Out[2]: 16

In [3]: _ * 3
Out[3]: 48

In [4]: _1
Out[4]: 8

In [5]: _2
Out[5]: 16

In [6]: 
```

# macos - 如何使用 Mac OS X Lion(10.7.3) 安装 PhoneGap？

> ID：10469513
> 
> 赞同：0
> 
> 时间：2012-05-06T09:32:00.657
> 
> 标签：macos, cordova

我有一个 Mac OS X Lion（10.7.3）。现在我想在我的 XCode 中安装 PhoneGap。我的 XCode 版本是 4.3.2。

**我在**安装时按照 PhoneGap 网站的安装说明进行操作。但是当我创建一个项目时，它会显示错误，并且`www`在项目创建时也没有创建文件夹。

根据[**PhoneGap 网站**](http://phonegap.com/start)安装我必须有Mac OS X Snow Leopard (10.6)。是否无法使用 Lion(10.7.3) 安装 PhoneGap，或者我必须等到支持的版本出现？

*注意：我是 Xcode、Mac 和 PhoneGap 的新手。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T09:44:24.810

您指定**您是该技术**的新手，为此，您应该按照教程**一步一步**地**阅读所有要点，然后再**对您的计算机进行任何操作，以便您完全了解接下来要做什么。

您提到该`www`文件夹​​甚至没有创建，好吧，启动教程非常明确（*第 3.9 点*），甚至还有一个带有放置区域的图像：

> 下一步很**重要**！将 www 文件夹拖到 Xcode 4 中。您不能只将 www 文件夹拖到应用程序的文件夹中。需要拖入Xcode 4！！在我的情况下，我会将它拖放到 HiWorld 上，如下所示。

关于你提到它是否可以安装在 Lion 中，是的，你可以，启动显示最低要求，它应该被读作

> 装有 Mac OS X 10.6+ 的基于 Intel 的计算机

# visual-studio - 如何修复 WACK 报告中的启动时间性能和暂停性能？

> ID：10469514
> 
> 赞同：0
> 
> 时间：2012-05-06T09:32:46.593
> 
> 标签：visual-studio, windows-8, windows-runtime, app-certification-kit

我用 WACK 测试了我的应用程序，得到了以下结果。我该如何解决这两个警告，我可以将我的应用程序放在 AppStore 中吗？

```
------------------------------------------------------------------
Overall Score: PASSED WITH WARNINGS

Launch time performance

WARNING
Performance Launch
Warning: Following results were encountered while running the Performance Launch test.
Application App has a launch time of 0.971 secs.
Application App has CPU utilization of 12.15 percent. CPU utilization of 50 percent or higher can significantly degrade performance for Application Launch/Suspend.
Application App allocates process private memory of 0 MB. Process private memory usage of greater than 25 MB can significantly degrade performance for Application Launch/Suspend.
Application App issues File I/O of 0.722 MB. Issuing File I/O of 50 MB or higher can significantly degrade performance for Application Launch/Suspend.
Impact if not fixed: Application launch is your customer’s first experience and impression of your Metro style application. To ensure system responsiveness applications are expected to launch within 5 seconds. Windows 8 is targeted at a broad range of hardware configurations and this launch time target is intended to provide a good baseline of performance across the broadest range of hardware capabilities. It is important to understand the launch performance of your application, while taking hardware capabilities into consideration. If your application has passed this test locally but has launch times which are close to the required limits, consider what type of hardware this test is being executed on as your application could potentially fail the Windows Store certification process. Reducing resource utilization can reduce the duration of launch, especially when contention for resources is high.
How to fix: Additional information can be found here.

Suspend performance

WARNING
Performance Suspend
Warning: Following results were encountered while running the Performance Suspend test.
Application App has a suspend time of 0.005 secs.
Application App has CPU utilization of 9.11 percent. CPU utilization of 50 percent or higher can significantly degrade performance for Application Launch/Suspend.
Application App issues File I/O of 0 MB. Issuing File I/O of 20 MB or higher can significantly degrade performance for Application Launch/Suspend.
Impact if not fixed: In the Metro style user experience, Application suspend is a very frequent occurrence. To ensure fast and fluid multitasking, applications are expected to suspend within 2 seconds. Windows 8 is targeted at a broad range of hardware configurations and this suspend time target is intended to provide a good baseline of performance across the broadest range of hardware capabilities. It is important to understand the suspend performance of your application, while taking hardware capabilities into consideration. If your application has passed this test locally but has suspend times which are close to the required limits, consider what type of hardware this test is being executed on as your application could potentially fail the Windows Store certification process. Reducing resource utilization during can improve the duration of suspend, especially when contention for resources is high.
How to fix: Additional information can be found here. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T14:27:01.000

每个应用程序都会在 Consumer Preview 中收到这些警告，因为它们用于报告启动和暂停时间。您会看到您的数字远低于关注的阈值。这些警告不会导致应用商店出现问题——您今天在应用商店中看到的每个应用程序也会收到这些警告。

# tfs - 从 ClearCase 迁移到 TFS - 内存不足异常

> ID：10469515
> 
> 赞同：2
> 
> 时间：2012-05-06T09:32:57.023
> 
> 标签：tfs, migration, out-of-memory, clearcase, tfs-migration

我正在尝试使用“TFS 集成工具”将大型 ClearCase 流（它也有大量历史集）迁移到 TFS 2010。

该工具挂起，`TfsMigrationShell.exe Information: 0 : VersionControl: ClearCase history command: 'lshistory -minor -since 01-Jan-0001.00:00:00 -eventid -recurse -fmt "*%n*%o*%m*%e*%d*%Nc*%l##" -pname \IB_FE'` 然后给出以下运行时错误： `System.OutOfMemoryException: Exception of type 'System.OutOfMemoryException' was thrown. at System.String.Split(String[] separator, Int32 count, StringSplitOptions options) at Microsoft.TeamFoundation.Migration.ClearCaseDetailedHistoryAdapter.ClearCaseCommandSpec.ParseHistoryTable(String cmdOutput) at Microsoft.TeamFoundation.Migration.ClearCaseDetailedHistoryAdapter.ClearCaseServer.GetHistoryRecords(ReadOnlyCollection'1 filters, DateTime since, Boolean writeHistoryRecordsFound) at Microsoft.TeamFoundation.Migration.ClearCaseDetailedHistoryAdapter.ClearCaseAnalysisProvider.queryHistory(ChangeGroupService changeGroupService) at Microsoft.TeamFoundation.Migration.ClearCaseDetailedHistoryAdapter.ClearCaseAnalysisProvider.GenerateDeltaTable() at Microsoft.TeamFoundation.Migration.Toolkit.AnalysisEngine.GenerateDeltaTables(Guid sourceId)`

请指教。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T10:48:11.193

问题是：

*   对于历史悠久的回购来说，a`cleartool lshistory -minor`可能是*巨大的*
*   它也可能是不完整的，因为每周都会运行 Vob 清理，除非这些作业已被修改以保留它们。请参阅“[清理 VOB 数据库后保留次要事件记录](http://www-01.ibm.com/support/docview.wss?uid=swg21124633)”

由于您无法修改工具以仅导入特定数据“d1”、“d1”到“d2”等，直到“现在”，我真的会考虑：

*   仅将很短的 ClearCase 历史导入 TFS（例如，如果您使用 ClearCase UCM，则为最后 5 个基线）
*   如果您需要返回旧历史记录（用于存档），请将 ClearCase 保持在只读模式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T10:02:16.063

您引发了 System.OutOfMemoryException，看起来您需要更多可用的 RAM/Paging 才能运行该工具。

尽可能关闭所有正在运行的应用程序，确保 System Paging 文件足够大（例如 RAM 的三倍）。

然后再试一次。

# mongoid - Mongoid:Module 的 Mongoid 3.0.0 未定义方法“master”

> ID：10469521
> 
> 赞同：2
> 
> 时间：2012-05-06T09:33:43.737
> 
> 标签：mongoid

```
 Mongoid.master.collection("seq").find_and_modify({
   :query  => {:_id   => self.class.name},
   :update => {'$inc' => {:next => 1}},
   :new    => true,
   :upsert => true
})["next"] 
```

它在 mongoid 2.4.9 中运行良好，但是当我使用 mongoid 3.0.0 时，出现错误

```
NoMethodError in PostsController#new

undefined method `master' for Mongoid:Module 
```

Mongoid 3.0.0 不支持 Mongoid.master ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T05:14:14.257

由于 Mongoid 3.0.0 是用 Moped 代替 Mongo Ruby Driver，所以旧的 API 不能调用。

你可以试试这个：

```
Mongoid::Sessions.default.command({:findAndModify => "seq",
                                         :query  => { :_id => self.class.name },
                                         :update => { "$inc" => { :next => 1 } },
                                         :upsert => true,
                                         :new    => true }) 
```

你可以使用这个 Gem 来做自动递增 id 功能： [https ://github.com/huacnlee/mongoid_auto_increment_id](https://github.com/huacnlee/mongoid_auto_increment_id)

# java - 如何在图形上定位鼠标输入

> ID：10469523
> 
> 赞同：-1
> 
> 时间：2012-05-06T09:34:06.833
> 
> 标签：java, graphics, mouse

我想知道是否有人可以告诉我如何在窗口中找到鼠标的坐标，以及该鼠​​标是否已被单击。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T09:38:39.873

对于鼠标移动/定位，请在组件上使用 MouseMotionListener。对于鼠标单击，请在组件上使用 MouseListener。

```
component.addMouseListener(...);
component.addMouseMotionListener(...); 
```

您可以为两者使用相同的侦听器，并且您可以扩展一个适配器类 ( `MouseAdapter`) 以仅覆盖您关心的事件方法。

[在此处](http://docs.oracle.com/javase/tutorial/uiswing/events/mouselistener.html)阅读有关鼠标侦听器的所有信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T10:06:04.597

您可以阅读有关鼠标事件和侦听器的 Java 文档，也可以查看[此示例](http://beginwithjava.blogspot.com/2008/08/simple-mouse-interaction-in-java.html)，它完全涵盖了您要查找的内容：鼠标单击和鼠标位置`JComponent`

# android - md5 生成的代码不再显示谷歌地图

> ID：10469524
> 
> 赞同：0
> 
> 时间：2012-05-06T09:34:10.500
> 
> 标签：android, google-maps

我有问题。我有一个生成的调试 md5 代码。我切换了代码，以便可以发布我的应用程序，现在运行模拟器时出现灰屏。地图不再显示。这是一个问题吗？我应该尝试使用另一个 md5 代码吗？或者调试代码可以工作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T09:54:39.570

您必须生成另一个 API 代码。您的 Google Maps API 代码是根据您的应用签名所用的密钥生成的，因此，如果您使用发布密钥对应用进行签名，则必须生成使用相同发布密钥生成的 API 代码。

# tinymce - 更改 tinymce imagemanager 上传文件夹

> ID：10469528
> 
> 赞同：1
> 
> 时间：2012-05-06T09:35:04.757
> 
> 标签：tinymce

我正在使用 tinymce 和 imagemanager 上传图片。

我上传的任何图像都保存在此路径中：`tiny_mce/plugins/imagemanager/files/`

可以将此路径更改为：（`uploads/`在 tiny_mce 文件夹之外）？

并且可以将路径更改为`uploads/test/`或`tiny_mce/plugins/imagemanager/files/test/`- 如果测试不存在将创建它吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-18T12:46:17.773

我认为您无法使用 tinyMCE 设置解决它。但是您可以尝试为此实现自己的插件。 [http://www.tinymce.com/wiki.php/MCImageManager:Creating_a_plugin](http://www.tinymce.com/wiki.php/MCImageManager%3aCreating_a_plugin)

您可以尝试覆盖上传文件后执行的方法 OnAfterUpload。您可以访问新文件的路径，并且可以进行一些操作。像这样：

```
 public override bool OnAfterUpload(ManagerEngine man, string cmd, NameValueCollection input)
        {
           foreach (string path in man.RootPaths)
           {
                string fileName = input["name"];
                // create new folder if necessary. Copy files etc

           }

            return true;
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T08:34:46.153

抱歉，目前这似乎是不可能的。

# c++ - 前向声明/何时最好包含标题？

> ID：10469531
> 
> 赞同：7
> 
> 时间：2012-05-06T09:35:35.500
> 
> 标签：c++, header-files, forward-declaration

我很清楚何时可以/不能使用前向声明，但我仍然不确定一件事。

假设我知道我迟早必须包含一个标头来取消引用 A 类的对象。我不清楚做类似的事情是否更有效。

```
class A;
class B
{
   A* a;
   void DoSomethingWithA();
}; 
```

然后在cpp中有类似的东西..

```
#include "A.hpp"
void B::DoSomethingWithA()
{
   a->FunctionOfA();
} 
```

或者我也可以首先在 B 的头文件中包含 A 的头文件？如果前者效率更高，那么如果有人清楚地解释为什么我怀疑它与编译过程有关，我将不胜感激。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-06T09:56:47.493

尽可能使用前向声明（如您的示例）。这减少了编译时间，但更重要的是最大限度地减少了不需要知道也不关心实现细节的代码的头文件和库依赖关系。一般来说，除了实际实现之外，没有任何代码应该关心实现细节。

这是谷歌对此的理由：[头文件依赖](https://google.github.io/styleguide/cppguide.html)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-06T09:52:52.347

当你使用前向声明时，你明确地说*“B类不需要知道A类的内部实现，它只需要知道名为A的类存在”*。**如果您可以避免包含该标题，请避免使用它。**- 使用前向声明是一种很好的做法，因为您可以通过使用它来消除多余的依赖关系。

另请注意，当您更改头文件时，会导致重新编译包含它的所有文件。

这些问题也将对您有所帮助：
[前向声明的缺点是什么？](https://stackoverflow.com/q/9470961/1168156)
[前向声明的目的是什么？](https://stackoverflow.com/q/3110096/1168156)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-06T09:49:49.273

不要试图让你的*编译*高效。有龙。只需包含`A.hpp`在`B.hpp`.

C 和 C++ 头文件的标准做法是将所有头文件包装在 an`#ifndef`中，以确保它只编译一次：

```
#ifndef _A_HPP_
#define _A_HPP_

// all your definitions

#endif 
```

这样，如果您`#include "A.hpp"`在 中`B.hpp`，您可以拥有一个包含两者的程序，并且它不会中断，因为它不会尝试定义任何东西两次。

# java - 访问 jar 内的图像

> ID：10469533
> 
> 赞同：2
> 
> 时间：2012-05-06T09:35:57.357
> 
> 标签：java, jar, embedded-resource

第一的。我知道已经存在关于如何访问 jar 文件中的图像的各种主题。第二。我尝试了很多选择，但没有一个不起作用。我当然知道我在某个地方犯了错误。你能帮我理解我做错了什么吗？

所以，我有一个名为“j”的原型项目，它只包含一个 java 类——客户端。客户端尝试访问图像 good.png。在我将所有内容打包到可执行 jar 文件后，客户端无法访问文件。我在eclipse中工作，并使用ant。

```
j/
-src/
--com/
---pupcom/
----Client.java
-images/
--good.png
-build.xml
-.classpath
-.project 
```

com.pupcom.Client 包含

```
package com.pupcom;
//imports;
public class Client {
    public static void main(String [] a) {
        new Client();
    }
    public Client() {
        URL imageURL =  getClass().getClassLoader().getResource("images"+File.separator+"good.png");
        if(imageURL != null){
            Image image = Toolkit.getDefaultToolkit().getImage(imageURL);
            if(image != null){
                System.out.println("Complete!");
            }else{
                System.out.println("image == null");
            }
        }else{
            System.out.println("imageURL == null");
        }
    }
} 
```

构建.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<project name="j" basedir=".">
    <property name="src.dir" value="src"/>
    <property name="build.dir" value="build"/>
    <property name="main-class" value="com.pupcom.Client"/>
    <property name="jar.name" value="j.jar"/>
    <target name="clean">
        <delete dir="${build.dir}"/>
        <delete file="${jar.name}"/>
    </target>
    <target name="compile" depends="clean">
        <mkdir dir="${build.dir}"/>
        <mkdir dir="${build.dir}/images"/>
        <copy todir="${build.dir}/images">
            <fileset dir="images" />
        </copy>
        <javac srcdir="${src.dir}" destdir="${build.dir}" />
    </target>
    <target name="run" depends="jar">
            <java  jar="${jar.name}" fork="true"/>
        </target>
    <target name="jar" depends="compile">
        <jar destfile="${jar.name}">
            <fileset dir="${build.dir}" />
            <manifest>
                <attribute name="Main-Class" value="${main-class}"/>
            </manifest>
        </jar>
    </target>
</project> 
```

我还使用了这些行：

```
URL imageURL =  getClass().getClassLoader().getResource(File.separator + "images"+File.separator+"good.PNG");
URL imageURL =  getClass().getClassLoader().getResource("good.PNG");
URL imageURL =  getClass().getResource(File.separator + "images"+File.separator+"good.PNG");
URL imageURL =  getClass().getResource("good.PNG");
URL imageURL =  Client.class.getResource(File.separator + "images"+File.separator+"good.PNG");
URL imageURL =  Client.class.getResource("good.PNG");
URL imageURL =  Client.class.getClassLoader().getResource(File.separator + "images"+File.separator+"good.PNG");
URL imageURL =  Client.class.getClassLoader().getResource("good.PNG"); 
```

谢谢你的帮助！！！！！！！！！！

感谢 Marko Topolnik，通过将“File.separator”替换为“/”解决了这个问题。非常感谢 Marko Topolnik!!!!

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-06T09:41:56.190

1.  Don't use the `File.separator` in `getResource()` - it **always** takes `/` (think of it as an URL HREF).
2.  Prefix the path with `/` to ensure the class loader searches from the root of the class-path, rather than relative to the package of the class.
3.  Check that `good.PNG` is the correct case. It does not matter on the Windows file-system, but `getResource()` is case-sensitive.

# c - WinAPI 获取鼠标光标图标

> ID：10469538
> 
> 赞同：4
> 
> 时间：2012-05-06T09:37:04.273
> 
> 标签：c, windows, winapi, mouse, mouse-cursor

我想在 Windows 中获取光标图标。我认为我使用的语言在这里不是很重要，所以我将使用我尝试使用的 WinAPI 函数编写伪代码：

```
c = CURSORINFO.new(20, 1, 1, POINT.new(1,1));
GetCursorInfo(c); #provides correctly filled structure with hCursor

DrawIcon(GetWindowDC(GetForegroundWindow()), 1, 1, c.hCursor); 
```

所以这部分工作正常，它在活动窗口上绘制当前光标。但这不是我想要的。我想得到一个像素数组，所以我应该在内存中绘制它。

我正在尝试这样做：

```
hdc = CreateCompatibleDC(GetDC(0)); #returns non-zero int
canvas = CreateCompatibleBitmap(hdc, 256, 256); #returns non-zero int too

c = CURSORINFO.new(20, 1, 1, POINT.new(1,1));
GetCursorInfo(c);

DrawIcon(hdc, 1, 1, c.hCursor); #returns 1
GetPixel(hdc, 1, 1); #returns -1 
```

为什么 GetPixel() 不返回 COLORREF？我错过了什么？

我对 WinAPI 不是很有经验，所以我可能犯了一些愚蠢的错误。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-06T10:09:04.253

您必须在设备上下文中选择您创建的位图。如果不是，该[`GetPixel`函数](http://msdn.microsoft.com/en-us/library/dd144909.aspx)将返回`CLR_INVALID`(0xFFFFFFFF)：

> 必须在设备上下文中选择位图，否则`CLR_INVALID`会在所有像素上返回。

此外，您显示的伪代码严重泄漏对象。无论何时调用`GetDC`，都*必须*`ReleaseDC`在使用完毕后调用。并且每当您创建一个 GDI 对象时，您必须在用完它后销毁它。

最后，您似乎假设原点（即左上点）的坐标为 (1, 1)。它们实际上是 (0, 0)。

这是我要编写的代码（为简洁起见，省略了错误检查）：

```
// Get your device contexts.
HDC hdcScreen = GetDC(NULL);
HDC hdcMem = CreateCompatibleDC(hdcScreen);

// Create the bitmap to use as a canvas.
HBITMAP hbmCanvas = CreateCompatibleBitmap(hdcScreen, 256, 256);

// Select the bitmap into the device context.
HGDIOBJ hbmOld = SelectObject(hdcMem, hbmCanvas);

// Get information about the global cursor.
CURSORINFO ci;
ci.cbSize = sizeof(ci);
GetCursorInfo(&ci);

// Draw the cursor into the canvas.
DrawIcon(hdcMem, 0, 0, ci.hCursor);

// Get the color of the pixel you're interested in.
COLORREF clr = GetPixel(hdcMem, 0, 0);

// Clean up after yourself.
SelectObject(hdcMem, hbmOld);
DeleteObject(hbmCanvas);
DeleteDC(hdcMem);
ReleaseDC(hdcScreen); 
```

* * *

但最后一个警告 - 该[`DrawIcon`功能](http://msdn.microsoft.com/en-us/library/windows/desktop/ms648064.aspx)可能不会像您期望的那样工作*。*它仅限于以默认大小绘制图标或光标。在大多数系统上，这将是 32x32。从文档中：

> `DrawIcon`使用图标的系统度量值指定的宽度和高度绘制图标或光标；有关详细信息，请参阅[`GetSystemMetrics`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724385.aspx)。

相反，您可能想要使用该[`DrawIconEx`函数](http://msdn.microsoft.com/en-us/library/windows/desktop/ms648065.aspx)。以下代码将在资源的实际大小处绘制光标：

```
DrawIconEx(hdcMem, 0, 0, ci.hCursor, 0, 0, 0, NULL, DI_NORMAL); 
```

# c# - 单例中的成员变量是否应该声明为静态？

> ID：10469540
> 
> 赞同：6
> 
> 时间：2012-05-06T09:37:29.180
> 
> 标签：c#, singleton

环顾网络，我看到了这个实现（线程安全）单例（在 C# 中）的简单模式。

```
public sealed class MySingleton
{
    private static readonly MySingleton _instance = new MySingleton();

    private string[] _data = new string[10];

    // Private constructor, so no outsiders have access.
    private MySingleton()
    {
        // Initialize _data member here
    }

    // Static method to provide access to instance
    public static MySingleton Instance
    {
      get { return _instance; }
    }

    public string GetStringCount
    {
        return _data.Length;
    }

} 
```

我知道该`_instance`成员需要声明为静态，因为它是从静态`Instance()`方法访问的。

但是其他成员应该被声明为静态的吗？根据定义，单例只存在一次，因此成员也只能存在一次（对于单个实例），就像静态变量只存在一次一样。

我应该声明`_data`为静态的吗？

*   会不会有功能上的区别？
*   有什么性能差异吗？
*   还有其他喜欢静态或非静态的理由吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-06T09:44:48.273

如果你有一个 Singleton，那么你就有一个类的实例。类成员不能是静态的（Instance 属性支持字段除外）。如果你的单例中有多个静态变量，你实际上创建的不是一个单例，而是许多单例。一般建议是仅在绝对必要时使用 static 关键字。

将单例数据作为非静态类成员存储在单例实例中会更干净。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-06T09:48:57.717

如果您选择在静态类上使用单例（参见[this](http://www.dotnetperls.com/singleton-static)和[this](https://stackoverflow.com/questions/519520/difference-between-static-class-and-singleton-pattern)），那么我认为拥有实例成员而不是静态成员更有意义。

# hibernate - SimpleXML & hibernate 玩得不好？

> ID：10469542
> 
> 赞同：2
> 
> 时间：2012-05-06T09:37:34.647
> 
> 标签：hibernate, struts2, simple-framework

在我的 Web 应用程序中，我使用 Hibernate 和 struts2。因为我需要以 XML 形式发回数据，所以我添加了 SimpleXML 框架。

我还处于测试阶段。所以我在我的 Store 类中添加了注释，它也是由 Hibernate 生成的 POJO 类。

我的 xml 中没有数据。这是我得到的：

```
<store>
  <storeID>0</storeID>
</store> 
```

我期待这个 XML 代替：

```
<store>
  <storeID>2</storeID>
  <storeName>JC Penny</storeName>
</store> 
```

Store 类的代码如下所示：

```
 /**
 * Store generated by hbm2java
 */
 @Root(name="store")
 @Entity
@Table(name="store"
    ,catalog="shopperdb"
)
public class Store  implements java.io.Serializable {

    @Element(name="storeID")
     private int id;

     @Element(name="storeName" , required=false)
     private String name;
     @Id 

@Column(name="id", unique=true, nullable=false)
public int getId() {
    return this.id;
}

public void setId(int id) {
    this.id = id;
}

@Column(name="name", length=45)
public String getName() {
    return this.name;
}

public void setName(String name) {
    this.name = name;
} 
} 
```

这也是我的操作中的代码，它使用休眠从数据库加载数据并将 XML 生成到我的日志文件：

```
 _sess = HibernateUtil.getSessionFactory().getCurrentSession();

     if (!_sess.isOpen()) _sess = HibernateUtil.getSessionFactory().openSession();

     _tx = _sess.beginTransaction();

     Store tempStore = (Store) _sess.load(Store.class, 2);

     Serializer serializer = new Persister();

     serializer.write(tempStore, System.out);

     _tx.commit(); 
```

顺便说一句，我从数据库中获取了正确的数据，因为我有一些从这篇文章中获取的打印语句。

非常感谢您的帮助，萨尔。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T10:16:54.917

我修好了它！似乎在使用 Hibernate 时， LOAD 方法返回的对象（不知何故）与查询 LIST 方法返回的对象不同。去搞清楚！

所以我替换了以下行：

```
Store tempStore = (Store) _sess.load(Store.class, 2); 
```

有了这个：

```
 Store tempStore = (Store)_sess.createQuery("from Store s where s.id=:sid").setInteger("sid", 2).uniqueResult(); 
```

我不确定为什么。我也不确定任何性能后果

# java - 使用“ant”命令从 XML 文件按顺序运行 *.sql 文件（在 SQL Server 2008 Express 上构建 i2b2 本体数据库）？

> ID：10469543
> 
> 赞同：1
> 
> 时间：2012-05-06T09:38:00.433
> 
> 标签：java, sql-server, ant, ontology, i2b2

以下是 i2b2 数据库设置教程中的命令，用于创建一堆表并为特定数据库加载数据。我之前只在 SQL Server Management Studio (SSMS) 中手动（在新的查询窗口中）运行 *.sql 命令。这是必须从 Java 运行的东西，还是我可以直接从某个命令提示符处执行此操作？如果是这样，你能帮我完成必要的步骤吗？（即：我是否需要引用第 3 方程序集，我猜我需要配置我的数据库连接字符串等。）

```
ant –f data_build.xml create_workdata_tables_release_1-6

ant –f data_build.xml db_workdata_load_data 
```

将鼠标悬停在“ant”（StackOverflow 标签）上之后，它似乎是一些 Java 工具。

“Apache Ant（以前称为 Jakarta Ant）是用于 Java 项目的声明式、基于 XML 的构建工具。它提供了一组丰富的标准任务来执行最常见的构建操作，例如使用 javac 编译、构建档案和运行测试。Ant 的功能可以通过自定义任务和宏进行扩展。”

我尝试在 Windows 的命令提示符下运行它，但出现错误。

```
C:\Source\i2b2\i2b2createdb-1602\edu.harvard.i2b2.data\Release_1-6\NewInstall\Metadata>ant -f data_build.xml create_crcdata_tables_release_1-6
'ant' is not recognized as an internal or external command,
operable program or batch file. 
```

我看到了 XML 文件中列出的实际 *.sql 文件，我猜它们是以特定方式排序的，以便关联的（包含主键）首先将数据加载到它们中，然后桥/父/所有者/base 表（包含外键）最后运行，因为它们依赖于关联的表。如果一切都失败了，我可能可以按照列出的顺序直接从 SSMS 运行这些命令，但我很想试试这个“ant”命令。

设置说明：

[http://www.i2b2.org](http://www.i2b2.org)

下载“i2b2createdb-1602.zip”并解压。

下载“i2b2core-doc-1602.zip”并解压（使用这些 PDF 文档获取安装说明）

======================================

看来我必须定义 XML 文件中定义的变量。

```
<?xml version="1.0" encoding="UTF-8"?>
<!--
$Id: data_build.xml,v 1.5 2010/06/04 15:33:06 lcp5 Exp $
-->
<project name="Ontology/Metadata data" basedir=".">

    <property environment="env" />

    <property file="./db.properties" />

    <!-- =================================================================== -->
    <!--                                INIT                                 -->
    <!-- =================================================================== -->
    <target name="init"  description="Prepare for build">
        <path id="classpath">
            <pathelement location="../ojdbc14.jar" />
            <pathelement location="../sqljdbc.jar"/>
        </path>
    </target>

    <!-- =================================================================== -->
    <!--            DATABASE SETUP TARGETS                                   -->
    <!-- =================================================================== -->
    <target name="db_create_user" depends="init">
        <sql driver="${db.driver}" url="${db.url}" userid="${db.username}" password="${db.password}" classpathref="classpath" onerror="continue" print="true">
                    CREATE USER  i2b2metadata IDENTIFIED BY   i2b2metadata;
                </sql>
    </target>

    <target name="create_metadata_tables_release_1-6" depends="init">
        <sql driver="${db.driver}" url="${db.url}" userid="${db.username}" password="${db.password}" classpathref="classpath" onerror="continue" print="true">
            <transaction src="./scripts/create_${db.type}_i2b2metadata_tables.sql" />
        </sql>
    </target>

    <target name="db_metadata_load_data" depends="init">
        <echo message="Loading metadata -- may take a while; over 10 min" />
        <sql driver="${db.driver}" url="${db.url}" userid="${db.username}" password="${db.password}" classpathref="classpath" onerror="continue" print="true">
            <transaction src="./${db.project}/scripts/schemes_insert_data.sql" />
            <transaction src="./${db.project}/scripts/table_access_insert_data.sql" />
            <transaction src="./${db.project}/scripts/${db.type}/birn_insert_data.sql" />
            <transaction src="./${db.project}/scripts/${db.type}/custom_meta_insert_data.sql" />
            <transaction src="./${db.project}/scripts/${db.type}/i2b2_metadata_insert_data.sql" />
            <transaction src="./${db.project}/scripts/${db.type}/i2b2_metadata_demographics_insert_data.sql" />
            <transaction src="./${db.project}/scripts/${db.type}/i2b2_metadata_diagnoses_insert_data.sql" />
            <transaction src="./${db.project}/scripts/${db.type}/i2b2_metadata_expressions_insert_data.sql" />
            <transaction src="./${db.project}/scripts/${db.type}/i2b2_metadata_labtests_insert_data.sql" />
            <transaction src="./${db.project}/scripts/${db.type}/i2b2_metadata_medications_insert_data.sql" />
            <transaction src="./${db.project}/scripts/${db.type}/i2b2_metadata_modifiers_insert_data.sql" />
            <transaction src="./${db.project}/scripts/${db.type}/i2b2_metadata_procedures_insert_data.sql" />
            <transaction src="./${db.project}/scripts/${db.type}/i2b2_metadata_providers_insert_data.sql" />
            <transaction src="./${db.project}/scripts/${db.type}/i2b2_metadata_reports_insert_data.sql" />
            <transaction src="./${db.project}/scripts/${db.type}/i2b2_metadata_visitDetails_insert_data.sql" />
        </sql>
    </target>

</project> 
```

======================================

# 2012 年 5 月 6 日上午 6:52 更新：

**SQL Server Management Studio 设置：**

*   SQL Server Management Studio > 创建名为“i2b2_demo”的新数据库

**安装 Oracle JDK：**

*   [http://docs.oracle.com/javase/7/docs/webnotes/install/windows/jdk-installation-windows.html](http://docs.oracle.com/javase/7/docs/webnotes/install/windows/jdk-installation-windows.html)

**安装 Apache Ant：**

*   [在http://ant.apache.org/](http://ant.apache.org/)下载二进制文件
*   导航到此路径以获取安装说明：手册 > 安装 Apache Ant > 获取 Ant > ..follow instructions
*   将提取的文件夹（包含 bin 文件夹）移动到`C:\source_code\apache-ant-1.8.3\`%ANT_HOME% 环境变量中使用的目录或目录中

**Java 和 Ant 的 Windows 7 环境变量设置：**

Windows 7 > 控制面板 > 系统 > 单击“环境变量”按钮 >

*（不要忘记尾随的“\”）* *[ *MacGyver 5/6/2012 @2:45pm - 忽略这个...删除尾随的“\”字符...请参阅我在问题下方的评论]*

在“系统变量”部分下，单击“添加”> 变量名称：`JAVA_HOME` 变量值：`C:\Program Files\Java\jdk1.7.0_02\`

在“系统变量”部分下，单击“添加”> 变量名称：`ANT_HOME` 变量值：`C:\source_code\apache-ant-1.8.3\`

在“系统变量”部分下，单击“路径”环境变量，单击“编辑”> 变量名称：`Path` 变量值：`{value before editing};%JAVA_HOME%\bin;%ANT_HOME%\bin;`

*   重新启动命令提示符（以管理员身份运行）

*   `C:\source_code\i2b2\i2b2createdb-1602\edu.harvard.i2b2.data\Release_1-6\NewInstall\{folder}\db.properties`用适当的值替换每个文件。代替 ”？” 具有正确的值。

**“db.properties”文件：**

```
db.type=sqlserver
db.username=?
db.password=?
db.server=LAPTOP-INSPIRON\SQLEXPRESS
db.driver=com.microsoft.sqlserver.jdbc.SQLServerDriver
db.url=jdbc:sqlserver:LAPTOP-INSPIRON\SQLEXPRESS;databasename=i2b2_demo
db.project=demo 
```

**收到此错误：**

```
C:\source_code\i2b2\i2b2createdb-1602\edu.harvard.i2b2.data\Release_1-6\NewInsta
ll\Crcdata>ant -f data_build.xml upgrade_metadata_tables_release_1-6
Buildfile: build.xml does not exist!
Build failed 
```

======================================

# 更新于 2012 年 5 月 6 日 @ 上午 7:33 ... 发现此页面出现错误 ...

**安装蚂蚁：**

要么点击这个：[http ://ant.apache.org/manual/index.html](http://ant.apache.org/manual/index.html)

或者...

导航到[http://ant.apache.org/](http://ant.apache.org/) > 手册 > 安装 Apache Ant > 安装 Ant >

```
C:\source_code\apache-ant-1.8.3>ant -version
Apache Ant(TM) version 1.8.3 compiled on February 26 2012

C:\source_code\apache-ant-1.8.3>ant -f fetch.xml
Buildfile: C:\source_code\apache-ant-1.8.3\fetch.xml

pick-dest:

BUILD FAILED
C:\source_code\apache-ant-1.8.3\fetch.xml:70: ERROR
Set -Ddest=LOCATION on the command line
  -Ddest=user     user lib dir  C:\Users\Keith/.ant/lib
  -Ddest=system   ant lib dir   C:\source_code\apache-ant-1.8.3/lib
  -Ddest=optional optional dir  ${basedir}/lib/optional  (for Ant developers)

Total time: 0 seconds

C:\source_code\apache-ant-1.8.3>build install
'build' is not recognized as an internal or external command,
operable program or batch file. 
```

......然后注意到我错过了命令上的参数..它仍然失败了！

```
C:\source_code\apache-ant-1.8.3>ant -f fetch.xml -Ddest=system
Buildfile: C:\source_code\apache-ant-1.8.3\fetch.xml

pick-dest:
     [echo] Downloading to C:\source_code\apache-ant-1.8.3\lib

probe-m2:

download-m2:
     [echo] Downloading to C:\source_code\apache-ant-1.8.3\lib
      [get] Getting: http://repo1.maven.org/maven2/org/apache/maven/maven-artifa
ct-ant/2.0.4/maven-artifact-ant-2.0.4-dep.jar
      [get] To: C:\source_code\apache-ant-1.8.3\lib\maven-artifact-ant-2.0.4-dep
.jar
      [get] ...................................

dont-validate-m2-checksum:

validate-m2-checksum:

checksum-mismatch:

checksum-match:

get-m2:

macros:

init:

logging:
[artifact:dependencies] Downloading: log4j/log4j/1.2.14/log4j-1.2.14.pom
[artifact:dependencies] Transferring 2K
[artifact:dependencies] Downloading: log4j/log4j/1.2.14/log4j-1.2.14.jar
[artifact:dependencies] Transferring 358K
     [copy] Copying 1 file to C:\source_code\apache-ant-1.8.3\lib
[artifact:dependencies] Downloading: commons-logging/commons-logging-api/1.1/com
mons-logging-api-1.1.pom
[artifact:dependencies] Transferring 5K
[artifact:dependencies] Downloading: commons-logging/commons-logging-api/1.1/com
mons-logging-api-1.1.jar
[artifact:dependencies] Transferring 43K
     [copy] Copying 1 file to C:\source_code\apache-ant-1.8.3\lib

junit:
[artifact:dependencies] Downloading: junit/junit/4.8.1/junit-4.8.1.pom
[artifact:dependencies] Transferring 0K
[artifact:dependencies] Downloading: junit/junit/4.8.1/junit-4.8.1.jar
[artifact:dependencies] Transferring 231K
     [copy] Copying 1 file to C:\source_code\apache-ant-1.8.3\lib

xml:
[artifact:dependencies] Downloading: xalan/xalan/2.7.1/xalan-2.7.1.pom
[artifact:dependencies] Transferring 1K
[artifact:dependencies] Downloading: org/apache/apache/4/apache-4.pom
[artifact:dependencies] Transferring 4K
[artifact:dependencies] Downloading: xalan/serializer/2.7.1/serializer-2.7.1.pom

[artifact:dependencies] Transferring 1K
[artifact:dependencies] Downloading: xml-apis/xml-apis/1.3.04/xml-apis-1.3.04.po
m
[artifact:dependencies] Transferring 1K
[artifact:dependencies] Downloading: org/apache/apache/3/apache-3.pom
[artifact:dependencies] Transferring 3K
[artifact:dependencies] Downloading: xml-apis/xml-apis/1.3.04/xml-apis-1.3.04.ja
r
[artifact:dependencies] Transferring 189K
[artifact:dependencies] Downloading: xalan/serializer/2.7.1/serializer-2.7.1.jar

[artifact:dependencies] Transferring 271K
[artifact:dependencies] Downloading: xalan/xalan/2.7.1/xalan-2.7.1.jar
[artifact:dependencies] Transferring 3101K
     [copy] Copying 3 files to C:\source_code\apache-ant-1.8.3\lib
[artifact:dependencies] Downloading: xml-resolver/xml-resolver/1.2/xml-resolver-
1.2.pom
[artifact:dependencies] Transferring 1K
[artifact:dependencies] Downloading: xml-resolver/xml-resolver/1.2/xml-resolver-
1.2.jar
[artifact:dependencies] Transferring 82K
     [copy] Copying 1 file to C:\source_code\apache-ant-1.8.3\lib

networking:
[artifact:dependencies] Downloading: commons-net/commons-net/1.4.1/commons-net-1
.4.1.pom
[artifact:dependencies] Transferring 4K
[artifact:dependencies] Downloading: oro/oro/2.0.8/oro-2.0.8.pom
[artifact:dependencies] Transferring 0K
[artifact:dependencies] Downloading: oro/oro/2.0.8/oro-2.0.8.jar
[artifact:dependencies] Transferring 63K
[artifact:dependencies] Downloading: commons-net/commons-net/1.4.1/commons-net-1
.4.1.jar
[artifact:dependencies] Transferring 176K
     [copy] Copying 2 files to C:\source_code\apache-ant-1.8.3\lib
[artifact:dependencies] Downloading: com/jcraft/jsch/0.1.42/jsch-0.1.42.pom
[artifact:dependencies] Transferring 0K
[artifact:dependencies] Downloading: com/jcraft/jsch/0.1.42/jsch-0.1.42.jar
[artifact:dependencies] Transferring 181K
     [copy] Copying 1 file to C:\source_code\apache-ant-1.8.3\lib

regexp:
[artifact:dependencies] Downloading: regexp/regexp/1.3/regexp-1.3.pom
[artifact:dependencies] Transferring 0K
[artifact:dependencies] Downloading: regexp/regexp/1.3/regexp-1.3.jar
[artifact:dependencies] Transferring 24K
     [copy] Copying 1 file to C:\source_code\apache-ant-1.8.3\lib

antlr:
[artifact:dependencies] Downloading: antlr/antlr/2.7.7/antlr-2.7.7.pom
[artifact:dependencies] Transferring 0K
[artifact:dependencies] Downloading: antlr/antlr/2.7.7/antlr-2.7.7.jar
[artifact:dependencies] Transferring 434K
     [copy] Copying 1 file to C:\source_code\apache-ant-1.8.3\lib

bcel:
[artifact:dependencies] Downloading: bcel/bcel/5.1/bcel-5.1.pom
[artifact:dependencies] Transferring 0K
[artifact:dependencies] Downloading: regexp/regexp/1.2/regexp-1.2.pom
[artifact:dependencies] Transferring 0K
[artifact:dependencies] Downloading: regexp/regexp/1.2/regexp-1.2.jar
[artifact:dependencies] Transferring 29K
[artifact:dependencies] Downloading: bcel/bcel/5.1/bcel-5.1.jar
[artifact:dependencies] Transferring 503K
     [copy] Copying 2 files to C:\source_code\apache-ant-1.8.3\lib

jdepend:
[artifact:dependencies] Downloading: jdepend/jdepend/2.9.1/jdepend-2.9.1.pom
[artifact:dependencies] Transferring 0K
[artifact:dependencies] Downloading: jdepend/jdepend/2.9.1/jdepend-2.9.1.jar
[artifact:dependencies] Transferring 56K
     [copy] Copying 1 file to C:\source_code\apache-ant-1.8.3\lib

bsf:
[artifact:dependencies] Downloading: bsf/bsf/2.4.0/bsf-2.4.0.pom
[artifact:dependencies] Transferring 1K
[artifact:dependencies] Downloading: commons-logging/commons-logging/1.0.4/commo
ns-logging-1.0.4.pom
[artifact:dependencies] Transferring 5K
[artifact:dependencies] Downloading: commons-logging/commons-logging/1.0.4/commo
ns-logging-1.0.4.jar
[artifact:dependencies] Transferring 37K
[artifact:dependencies] Downloading: bsf/bsf/2.4.0/bsf-2.4.0.jar
[artifact:dependencies] Transferring 110K
     [copy] Copying 2 files to C:\source_code\apache-ant-1.8.3\lib

debugging:
[artifact:dependencies] Downloading: which/which/1.0/which-1.0.pom
[artifact:dependencies] Transferring 0K
[artifact:dependencies] Downloading: which/which/1.0/which-1.0.jar
[artifact:dependencies] Transferring 16K
     [copy] Copying 1 file to C:\source_code\apache-ant-1.8.3\lib

jruby:
[artifact:dependencies] Downloading: org/jruby/jruby/0.9.8/jruby-0.9.8.pom
[artifact:dependencies] Transferring 5K
[artifact:dependencies] Downloading: org/jruby/shared/0.9.8/shared-0.9.8.pom
[artifact:dependencies] Transferring 4K
[artifact:dependencies] Downloading: asm/asm-commons/2.2.3/asm-commons-2.2.3.pom

[artifact:dependencies] Transferring 0K
[artifact:dependencies] Downloading: asm/asm-parent/2.2.3/asm-parent-2.2.3.pom
[artifact:dependencies] Transferring 2K
[artifact:dependencies] Downloading: asm/asm-tree/2.2.3/asm-tree-2.2.3.pom
[artifact:dependencies] Transferring 0K
[artifact:dependencies] Downloading: asm/asm/2.2.3/asm-2.2.3.pom
[artifact:dependencies] Transferring 0K
[artifact:dependencies] Downloading: asm/asm-commons/2.2.3/asm-commons-2.2.3.jar

[artifact:dependencies] Transferring 14K
[artifact:dependencies] Downloading: org/jruby/jruby/0.9.8/jruby-0.9.8.jar
[artifact:dependencies] Transferring 1644K
[artifact:dependencies] Downloading: asm/asm/2.2.3/asm-2.2.3.jar
[artifact:dependencies] Transferring 34K
[artifact:dependencies] Downloading: asm/asm-tree/2.2.3/asm-tree-2.2.3.jar
[artifact:dependencies] Transferring 15K
     [copy] Copying 4 files to C:\source_code\apache-ant-1.8.3\lib

beanshell:
[artifact:dependencies] Downloading: org/beanshell/bsh/2.0b4/bsh-2.0b4.pom
[artifact:dependencies] Transferring 1K
[artifact:dependencies] Downloading: org/beanshell/beanshell/2.0b4/beanshell-2.0
b4.pom
[artifact:dependencies] Transferring 1K
[artifact:dependencies] Downloading: org/beanshell/bsh/2.0b4/bsh-2.0b4.jar
[artifact:dependencies] Transferring 275K
     [copy] Copying 1 file to C:\source_code\apache-ant-1.8.3\lib
[artifact:dependencies] Downloading: org/beanshell/bsh-core/2.0b4/bsh-core-2.0b4
.pom
[artifact:dependencies] Transferring 0K
[artifact:dependencies] Downloading: org/beanshell/bsh-core/2.0b4/bsh-core-2.0b4
.jar
[artifact:dependencies] Transferring 140K
     [copy] Copying 1 file to C:\source_code\apache-ant-1.8.3\lib

rhino:
[artifact:dependencies] Downloading: rhino/js/1.6R7/js-1.6R7.pom
[artifact:dependencies] Transferring 0K
[artifact:dependencies] Downloading: rhino/js/1.6R7/js-1.6R7.jar
[artifact:dependencies] Transferring 794K
     [copy] Copying 1 file to C:\source_code\apache-ant-1.8.3\lib

script:

javamail:
[artifact:dependencies] Downloading: javax/mail/mail/1.4/mail-1.4.pom
[artifact:dependencies] Transferring 0K
[artifact:dependencies] Downloading: javax/activation/activation/1.1/activation-
1.1.pom
[artifact:dependencies] Transferring 1K
[artifact:dependencies] Downloading: javax/mail/mail/1.4/mail-1.4.jar
[artifact:dependencies] Transferring 379K
[artifact:dependencies] Downloading: javax/activation/activation/1.1/activation-
1.1.jar
[artifact:dependencies] Transferring 61K
     [copy] Copying 2 files to C:\source_code\apache-ant-1.8.3\lib

jspc:
[artifact:dependencies] Downloading: tomcat/jasper-compiler/4.1.36/jasper-compil
er-4.1.36.pom
[artifact:dependencies] [WARNING] Unable to get resource from repository remote
(http://repo1.maven.org/maven2/)
[artifact:dependencies] Downloading: tomcat/jasper-compiler/4.1.36/jasper-compil
er-4.1.36.pom
[artifact:dependencies] [WARNING] Unable to get resource from repository central
 (http://repo1.maven.org/maven2)
[artifact:dependencies] Downloading: tomcat/jasper-compiler/4.1.36/jasper-compil
er-4.1.36.jar
[artifact:dependencies] Transferring 179K
     [copy] Copying 1 file to C:\source_code\apache-ant-1.8.3\lib
[artifact:dependencies] Downloading: tomcat/jasper-runtime/4.1.36/jasper-runtime
-4.1.36.pom
[artifact:dependencies] [WARNING] Unable to get resource from repository remote
(http://repo1.maven.org/maven2/)
[artifact:dependencies] Downloading: tomcat/jasper-runtime/4.1.36/jasper-runtime
-4.1.36.pom
[artifact:dependencies] [WARNING] Unable to get resource from repository central
 (http://repo1.maven.org/maven2)
[artifact:dependencies] Downloading: tomcat/jasper-runtime/4.1.36/jasper-runtime
-4.1.36.jar
[artifact:dependencies] Transferring 70K
     [copy] Copying 1 file to C:\source_code\apache-ant-1.8.3\lib
[artifact:dependencies] Downloading: javax/servlet/servlet-api/2.3/servlet-api-2
.3.pom
[artifact:dependencies] Transferring 0K
[artifact:dependencies] Downloading: javax/servlet/servlet-api/2.3/servlet-api-2
.3.jar
[artifact:dependencies] Transferring 76K
     [copy] Copying 1 file to C:\source_code\apache-ant-1.8.3\lib

jai:
[artifact:dependencies] Downloading: javax/media/jai-core/1.1.3/jai-core-1.1.3.p
om
[artifact:dependencies] Transferring 1K
[artifact:dependencies] Downloading: javax/media/jai-core/1.1.3/jai-core-1.1.3.j
ar
[artifact:dependencies] Transferring 1856K
     [copy] Copying 1 file to C:\source_code\apache-ant-1.8.3\lib
[artifact:dependencies] Downloading: com/sun/media/jai-codec/1.1.3/jai-codec-1.1
.3.pom
[artifact:dependencies] Transferring 1K
[artifact:dependencies] Downloading: com/sun/media/jai-codec/1.1.3/jai-codec-1.1
.3.jar
[artifact:dependencies] Transferring 252K
     [copy] Copying 1 file to C:\source_code\apache-ant-1.8.3\lib

nonm2-macros:

init-no-m2:

init-cache:

-setup-temp-cache:
    [mkdir] Created dir: C:\Users\{user name}\.ant\tempcache

-fetch-netrexx:

-fetch-netrexx-no-commons-net:
      [get] Getting: ftp://ftp.software.ibm.com/software/awdtools/netrexx/NetRex
x.zip
      [get] To: C:\Users\{user name}\.ant\tempcache\NetRexx.zip
      [get] Error opening connection java.net.SocketException: Permission denied
: recv failed
      [get] Error opening connection java.net.SocketException: Connection reset
      [get] Error opening connection java.net.SocketException: Connection reset
      [get] Can't get ftp://ftp.software.ibm.com/software/awdtools/netrexx/NetRe
xx.zip to C:\Users\{user name}\.ant\tempcache\NetRexx.zip

BUILD FAILED
C:\source_code\apache-ant-1.8.3\fetch.xml:328: Can't get ftp://ftp.software.ibm.
com/software/awdtools/netrexx/NetRexx.zip to C:\Users\{user name}\.ant\tempcache\NetRe
xx.zip

Total time: 49 seconds 
```

======================================

# 更新于 2012 年 5 月 6 日@下午 1:33

我阅读了这个片段，并意识到我把“\”放在了两个环境变量（ANT_HOME 和 JAVA_HOME）的末尾。我想你不能那样做。我的错。

**视窗注意：**

"ant.bat 脚本使用三个环境变量 - ANT_HOME、CLASSPATH 和 JAVA_HOME。确保设置了 ANT_HOME 和 JAVA_HOME 变量，并且它们没有引号（' 或 "）并且它们不以 \ 或以/。CLASSPATH 应该未设置或为空。”

*   再一次，我不得不重新打开我的 Windows“cmd”窗口，因为我做了这些环境变量更改。

好像以前效果更好。请注意，它在下面没有做太多。它仍然失败。或者它可能不需要它们，因为它在上次运行时找到了它们。

```
C:\Windows\system32>cd %ANT_HOME%

C:\source_code\apache-ant-1.8.3>ant -f fetch.xml -Ddest=system
Buildfile: C:\source_code\apache-ant-1.8.3\fetch.xml

pick-dest:
     [echo] Downloading to C:\source_code\apache-ant-1.8.3\lib

probe-m2:

download-m2:

dont-validate-m2-checksum:

validate-m2-checksum:

checksum-mismatch:

checksum-match:

get-m2:

macros:

init:

logging:

junit:

xml:

networking:

regexp:

antlr:

bcel:

jdepend:

bsf:

debugging:

jruby:

beanshell:

rhino:

script:

javamail:

jspc:
[artifact:dependencies] Downloading: tomcat/jasper-compiler/4.1.36/jasper-compil
er-4.1.36.pom
[artifact:dependencies] [WARNING] Unable to get resource from repository remote
(http://repo1.maven.org/maven2/)
[artifact:dependencies] Downloading: tomcat/jasper-compiler/4.1.36/jasper-compil
er-4.1.36.pom
[artifact:dependencies] [WARNING] Unable to get resource from repository central
 (http://repo1.maven.org/maven2)
[artifact:dependencies] Downloading: tomcat/jasper-runtime/4.1.36/jasper-runtime
-4.1.36.pom
[artifact:dependencies] [WARNING] Unable to get resource from repository remote
(http://repo1.maven.org/maven2/)
[artifact:dependencies] Downloading: tomcat/jasper-runtime/4.1.36/jasper-runtime
-4.1.36.pom
[artifact:dependencies] [WARNING] Unable to get resource from repository central
 (http://repo1.maven.org/maven2)

jai:

nonm2-macros:

init-no-m2:

init-cache:

-setup-temp-cache:

-fetch-netrexx:
      [ftp] getting files

BUILD FAILED
C:\source_code\apache-ant-1.8.3\fetch.xml:325: The following error occurred whil
e executing this line:
C:\source_code\apache-ant-1.8.3\fetch.xml:144: java.net.SocketException: Permiss
ion denied: recv failed
        at java.net.SocketInputStream.socketRead0(Native Method)
        at java.net.SocketInputStream.read(SocketInputStream.java:150)
        at java.net.SocketInputStream.read(SocketInputStream.java:121)
        at java.io.BufferedInputStream.read1(BufferedInputStream.java:273)
        at java.io.BufferedInputStream.read(BufferedInputStream.java:334)
        at java.io.BufferedInputStream.fill(BufferedInputStream.java:235)
        at java.io.BufferedInputStream.read(BufferedInputStream.java:254)
        at org.apache.commons.net.telnet.TelnetInputStream.__read(TelnetInputStr
eam.java:114)
        at org.apache.commons.net.telnet.TelnetInputStream.run(TelnetInputStream
.java:535)
        at java.lang.Thread.run(Thread.java:722)

Total time: 4 seconds 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T09:45:08.527

看来您的计算机上根本没有安装 Ant。所以我认为你必须下载并安装它：

[http://ant.apache.org/](http://ant.apache.org/)

[http://ant.apache.org/manual/index.html](http://ant.apache.org/manual/index.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T04:59:32.277

Apache Ant 在显示实际堆栈跟踪方面做得不是很好。因此，对于 Ant 问题的故障排除，也可以在 Java 中完成，从 Java 中进行调试。在我的示例中，我能够通过运行此代码进行故障排除。您需要将“sqljdbc_auth.dll”放入运行目录以使其正常工作。这假定您已授予 i2b2 用户的权限。

```
import java.sql.*;

public class TestConnection
{
    public static void main(String[] args)
    {
        DB db = new DB();
        db.dbConnect("jdbc:sqlserver://LAPTOP-INSPIRON\\SQLEXPRESS:1435;databaseName=i2b2_demo;integratedSecurity=true;","i2b2","i2b2");
    }
}

class DB
{
    public DB() {}

    public void dbConnect(String db_connect_string, String db_userid, String db_password)
    {
        try
        {
            Connection conn = DriverManager.getConnection(db_connect_string, db_userid, db_password);
            System.out.println("connected");
        }
        catch (Exception e)
        {
            e.printStackTrace();
        }
    }
}; 
```

**构建 i2b2 本体数据库所需的步骤：**

(1) 所有程序 > SQL Server 2008 R2 Express > 配置工具 > SQL Server 配置管理器 (SSCM) > 右键单击​​实例 TCP/IP 协议 > 选择启用

(2) SSCM - TCP/IP Properties > IP Addresses (tab) > set IP2 (section) > IP address to local IP address (例如192.168.1.101)

(3) SSCM - TCP/IP 属性 > IP 地址（选项卡）> IPAll（部分）> 删除动态端口

(4) SSCM - TCP/IP 属性 > IP 地址（选项卡）> IPAll（部分）> 添加静态端口 1435（默认为 1433，但我有两个实例）

(5) JDBC - 如果连接到 SQL Server 2008，请不要为 JDBC 使用 apache ant jar 文件 .. 而是下载 JDBC 版本 4 并使用“sqljdbc.jar”，然后在 build.xml 类路径 jar 列表中使用它

(6) JDBC - 将“sqljdbc_auth.dll”放在这些文件夹中（在 ant 运行目录内）：

```
C:\source_code\i2b2\i2b2createdb-1602\edu.harvard.i2b2.data\Release_1-6\NewInstall\{folder}\ 
```

(7) JDBC - 如果您从另一台机器连接到此 SQL 框，请创建防火墙传入规则以允许 TCP 端口（1433、1434 或 1435 ... 或任何您选择的端口）。

(8) JDBC——连接字符串

```
db.url=jdbc:sqlserver://LAPTOP-INSPIRON\\SQLEXPRESS:1435;databaseName=i2b2_demo; 
```

(9) Apache Ant 下载 - 如果您选择使用二进制文件，则无需调用“build install”。在这种情况下，请跳过 10-12。如果您选择下载 src 文件，您将在运行“构建安装”之前做 3 件事，否则它会显示“构建失败”而不是“构建成功”

(10) "build install" - 从 build.xml 的 lite 列表中移除 test-jar (最初命名为 "data_build.xml")

```
 <target name="dist-lite"
    depends="jars,test-jar"

to

  <target name="dist-lite"
    depends="jars" 
```

(11)“build install”——在“lib”文件夹下添加一个名为“optional”的文件夹

（12）“构建安装” - 按照这里的答案：

[Apache Ant 安装错误的解决方法](https://stackoverflow.com/questions/10473518/workaround-for-apache-ant-install-bug/10473581#10473581)

(13) 取进程——运行“ant -f fetch.xml -Ddest=system”

(14) Ant 命令 - 运行这个 "ant create_workdata_tables_release_1-6" .. 换句话说，不要使用 -f .. 如果你不想将 "data_build.xml" 重命名为 "build.xml" 使用 - buildfile（不是 -f）参数和构建文件的路径和文件名。

(15) 以正确的顺序执行命令，以便正确构建数据库.. 如果不这样做，请重新开始。

**仅供参考：如果我们使用 Red Gate SQL 比较和 Red Gate SQL 数据比较工具，这会容易得多。**

# java - 找不到符号错误消息

> ID：10469545
> 
> 赞同：1
> 
> 时间：2012-05-06T09:38:04.040
> 
> 标签：java, netbeans

在编写程序时，当我尝试从另一个类调用方法 setTextArea() 时，我得到“找不到符号消息”。编译程序后，我收到以下错误消息：无法编译的源代码 - 错误的符号类型：gui.setTextArea

这是我的代码：

```
public class LinkExtractor {

    public static void main(String[] args) throws IOException {
        //Validate.isTrue(args.length == 1, "usage: supply url to fetch");
        String base = "http://uk.ask.com/web?q=";
        String keyword ="flowers";
        String tale="&search=&qsrc=0&o=312&l=dir";
        String url =base+keyword+tale;

        print("Fetching %s...", url);

        Document doc = Jsoup.connect(url).get();
        Elements links = doc.select("a[href]");

        print("\nLinks: (%d)", links.size());
        for (Element link : links) {
            print(" * a: <%s>  (%s)", link.attr("abs:href"), trim(link.text(), 35));
      AssistantGUI gui=new AssistantGUI();

        }
    }

    public static void print(String msg, Object... args) {
      ***//here is the problem line***
        gui.setTextArea(String.format(msg, args));

    }

    private static String trim(String s, int width) {
        if (s.length() > width)
            return s.substring(0, width-1) + ".";
        else
            return s;
    }
} 
```

这是我的第二节课：

```
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JTextArea;

public class AssistantGUI {
JFrame frame= new JFrame("TextArea frame");
JPanel panel=new JPanel();
JTextArea text= new JTextArea("",5,20);

public AssistantGUI(){

frame.add(panel);
panel.add(text);
frame.setSize(250,200);
frame.setVisible(true);
frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

}
public void setTextArea(String myString){
text.append(myString);
}
public static void main(String[] args){
AssistantGUI gui= new AssistantGUI();

gui.setTextArea("Hello");
}

} 
```

我阅读了许多类似问题的帖子，但找不到解决方案。在我看来一切都很好。我正在创建一个 AssistantGUI 的实例，然后我用它来调用方法 setTextArea()，为什么它不能识别它？有任何想法吗？我将非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T09:50:18.213

现在有@RameshK 的正确答案。在面向对象的风格中：做这样的事情（使事情非静态）：

```
AssistantGUI gui = new AssistantGUI();

public static void main(String[] args) throws IOException {
    new LinkExctractor().execute();
}

private void execute() {
    //Validate.isTrue(args.length == 1, "usage: supply url to fetch");
    String base = "http://uk.ask.com/web?q=";
    String keyword ="flowers";
    String tail = "&search=&qsrc=0&o=312&l=dir";
    String url = base + keyword + tail;

    print("Fetching %s...", url);

    Document doc = Jsoup.connect(url).get();
    Elements links = doc.select("a[href]");

    print("\nLinks: (%d)", links.size());
    for (Element link : links) {
        print(" * a: <%s>  (%s)", link.attr("abs:href"), trim(link.text(), 35));
    }
}

private void print... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T09:46:21.893

你还没有声明`gui`，所以自然找不到。用不同的方法声明局部变量不算数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-06T09:47:47.353

在您的第一堂课中，您在 main 方法中实例化一个`gui`局部变量。一旦退出 main 方法，该引用就会丢失，并且方法 print 找不到它。一个快速的解决方案是将其设为`gui`类的静态成员（但这不是正确的方法）。

考虑阅读本[教程](http://docs.oracle.com/javase/tutorial/java/javaOO/variables.html)，但更重要的是，尝试摆脱所有这些`static`（除了必须保持静态的 main 方法）并改用`new`使用实例。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-06T09:47:52.413

您正在 main 方法内的第一个类中创建 gui 对象，它将充当局部变量。

每当您从 print 方法调用 setTextArea 时，那里都不允许引用。

所以试试这些改变你的第一堂课

```
public class LinkExtractor {
    public static AssistantGUI gui=new AssistantGUI(); // create the object
    public static void main(String[] args) throws IOException {
        //Validate.isTrue(args.length == 1, "usage: supply url to fetch");
        String base = "http://uk.ask.com/web?q=";
        String keyword ="flowers";
        String tale="&search=&qsrc=0&o=312&l=dir";
        String url =base+keyword+tale;

        print("Fetching %s...", url);

        Document doc = Jsoup.connect(url).get();
        Elements links = doc.select("a[href]");

        print("\nLinks: (%d)", links.size());
        for (Element link : links) {
            print(" * a: <%s>  (%s)", link.attr("abs:href"), trim(link.text(), 35));

        }
    }

    public static void print(String msg, Object... args) {
      ***//here is the problem line***
        gui.setTextArea(String.format(msg, args));

    }

    private static String trim(String s, int width) {
        if (s.length() > width)
            return s.substring(0, width-1) + ".";
        else
            return s;
    }
} 
```

# python - python/SQL 语法问题

> ID：10469548
> 
> 赞同：0
> 
> 时间：2012-05-06T09:38:47.917
> 
> 标签：python, sql, database, sqlite

我在调用此 SQL 命令时遇到问题，我得到：'OperationalError: near "'0-0'": syntax error'

我的电话如下：

```
users_db_curs.execute("INSERT INTO `"+table_name+"` (uID, username, password, creator_exp, location) 
VALUES ('"+user_ID+"', '"+username+"', '"+password+"', '"+creator_exp+"', '0-0')") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T10:18:40.777

我测试了你的语句，*如果*你的不同变量的格式正确，可以直接连接到语句字符串中，它应该可以正常工作：

```
>>> import sqlite3
>>> conn = sqlite3.connect(':memory:')
>>> cu = conn.cursor()
>>> cu.execute('create table foo (uID, username, password, creator_exp, location)')
<sqlite3.Cursor object at 0x7fccc2c115e0>
>>> user_ID='a'
>>> username='b'
>>> password='c'
>>> creator_exp='d'
>>> table_name='foo'
>>> cu.execute("INSERT INTO `"+table_name+"` (uID, username, password, creator_exp, location) VALUES ('"+user_ID+"', '"+username+"', '"+password+"', '"+creator_exp+"', '0-0')")
<sqlite3.Cursor object at 0x7fccc2c115e0> 
```

当你得到它时[可能不是](http://xkcd.com/327/)`syntax error`这样：

```
>>> username="'barf"
>>> cu.execute("INSERT INTO `"+table_name+"` (uID, username, password, creator_exp, location) VALUES ('"+user_ID+"', '"+username+"', '"+password+"', '"+creator_exp+"', '0-0')")
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
sqlite3.OperationalError: near "barf": syntax error 
```

因此，只需使用[格式化参数](http://docs.python.org/library/sqlite3.html#sqlite3.Cursor.execute)即可。

```
>>> cu.execute("INSERT INTO `"+table_name+"` (uID, username, password, creator_exp, location) VALUES (?, ?, ?, ?, '0-0')", 
(user_ID, username, password, creator_exp))
<sqlite3.Cursor object at 0x7fccc2c115e0 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T10:16:19.687

```
con = sqlite.connect(db_name)
cur = con.cursor()

with con:
   cur.execute("INSERT INTO ? VALUES(?, ?, ?, ?, ?)",
       (table_name, user_ID, username, password, creator_exp)) 
```

应该可以工作
你应该阅读[Zetcode 的教程](http://zetcode.com/db/sqlitepythontutorial/)

# ios - 将 UIActivityIndi catorView 添加到 UINavigationBar 上的 UIBarButtonItem (iOS)

> ID：10469550
> 
> 赞同：5
> 
> 时间：2012-05-06T09:39:31.923
> 
> 标签：ios, iphone, uibarbuttonitem, uiactivityindicatorview

我找到了[一篇很棒的文章](http://vandadnp.wordpress.com/2011/02/20/uibarbuttonitem-with-activity-indicator-done-the-proper-way/)，如何在导航栏上的栏按钮内添加活动指示器。但在我的情况下，我不能重复这一点。我已经在代码中（不在笔尖中）添加了导航栏和 UIBarButton，但我找不到一个名为`UINavigationButton`将活动指示器放入其中的元素。

我希望 UIBarButtonItem 按钮可见：

![在此处输入图像描述](../Images/435e7a1d7579ae2b492e0868bd13c552.png)

而不是这样：

![在此处输入图像描述](../Images/e8c946b849faa7152ac912b4eda9e04c.png)

有没有人建议如何使这项工作？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-06T13:56:59.947

一个粗略的解决方法可能是这样的：

```
 act=[[UIActivityIndicatorView alloc] initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleWhite];
 [act setFrame:CGRectMake(14, 5, 20, 20)];
 [act startAnimating];
 rightButt=[[UIBarButtonItem alloc] initWithTitle:@"" style:UIBarButtonItemStyleBordered target:self action:nil];
 self.navigationItem.rightBarButtonItem=rightButt;
 if ([[self.navigationController.navigationBar subviews] count]>=2) {
     //Be careful with the next line, Here you get access to an static index, 
     //Apple could change the structure of the navbar and your index may change in the future.
     [[[self.navigationController.navigationBar subviews] objectAtIndex:2] addSubview:act];    

    } 
```

你会得到这个：

![在此处输入图像描述](../Images/69b6317301d79f0e21c24bef67befc50.png)

**编辑**：
从你的评论看来，你想在 UIToolbar 中添加这个按钮，而不是在 UINavigationBar 中，它几乎是一样的：

```
UIActivityIndicatorView* act=[[UIActivityIndicatorView alloc] initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleWhite];
[act setFrame:CGRectMake(10, 13, 20, 20)];
[act startAnimating];
UIBarButtonItem *rightButt=[[UIBarButtonItem alloc] initWithTitle:@"      " style:UIBarButtonItemStyleBordered target:self action:nil];
UIToolbar *tb=[[UIToolbar alloc] initWithFrame:CGRectMake(0, 0, 320, 44)];
[tb setBarStyle:UIBarStyleBlack];
[tb setItems:[NSArray arrayWithObjects:rightButt, nil]];
if ([[tb subviews] count]>=1) {
    [[[tb subviews] objectAtIndex:1] addSubview:act];      
} 
```

你会得到这个：

![在此处输入图像描述](../Images/e5fd7a03e26d9db5e7d4740f132b695e.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T09:48:28.927

使用按钮并在其中添加活动指示器作为子视图

# java - 阶乘函数 - 并行处理

> ID：10469552
> 
> 赞同：-9
> 
> 时间：2012-05-06T09:40:04.787
> 
> 标签：java, parallel-processing

我需要在 EREW PRAM 系统上的**并行计算中编写****阶乘函数**（n！） 。假设我们有 n 个处理器。复杂度应该是 log n。我怎样才能做到这一点？

 *** * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T09:44:11.173

> 我们有 n 个处理器。复杂度应该是 log n。

这个问题没有意义，因为您正在寻找一种算法，其复杂性 ( `log n`)*会*随着您添加处理器（即增加`n`）而增加。

我猜你要做的是将产品`1*2*3*...*k`分成`n`大小相等的块，在单独的处理器上计算每个子产品，然后将`n`结果相乘。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-06T09:56:58.843

一般来说，您可以为 N 个处理器划分 N 次工作并独立计算每个。您可以通过将每件作品的答案相乘来组合结果。例如，第一个任务执行了 m!，下一个 (2m)!/m!，第三个 (3m!)/(2m!) 等等。当你将结果乘以你得到 n!。

顺便说一句：对于小于 1000 的小值，您不会这样做，`n`因为启动新线程/任务的开销可能大于在单个线程中执行此操作所需的时间。

* * *

我怀疑伪代码还不够，所以这里有一个例子

```
public enum CalcFactorial {;

    public static BigInteger factorial(long n) {
        BigInteger result = BigInteger.ONE;
        for (long i = 2; i <= n; i++)
            result = result.multiply(BigInteger.valueOf(i));
        return result;
    }

    public static BigInteger pfactorial(long n) {
        int processors = Runtime.getRuntime().availableProcessors();
        if (n < processors * 2)
            return factorial(n);
        long batchSize = (n + processors - 1) / processors;
        ExecutorService service = Executors.newFixedThreadPool(processors);
        try {
            List<Future<BigInteger>> results = new ArrayList<Future<BigInteger>>();
            for (long i = 1; i <= n; i += batchSize) {
                final long start = i;
                final long end = Math.min(n + 1, i + batchSize);
                results.add(service.submit(new Callable<BigInteger>() {
                    @Override
                    public BigInteger call() throws Exception {
                        BigInteger n = BigInteger.valueOf(start);
                        for (long j = start + 1; j < end; j++)
                            n = n.multiply(BigInteger.valueOf(j));
                        return n;
                    }
                }));
            }
            BigInteger result = BigInteger.ONE;
            for (Future<BigInteger> future : results) {
                result = result.multiply(future.get());
            }
            return result;
        } catch (Exception e) {
            throw new AssertionError(e);
        } finally {
            service.shutdown();
        }
    }
}

public class CalcFactorialTest {
    @Test
    public void testFactorial() {
        final int tests = 200;
        for (int i = 1; i <= tests; i++) {
            BigInteger f1 = factorial(i * i);
            BigInteger f2 = pfactorial(i * i);
            assertEquals(f1, f2);
        }
        long start = System.nanoTime();
        for (int i = 1; i <= tests; i++) {
            BigInteger f1 = factorial(i * i);
        }
        long mid = System.nanoTime();
        for (int i = 1; i <= tests; i++) {
            BigInteger f2 = pfactorial(i * i);
        }
        long end = System.nanoTime();
        System.out.printf("Single threaded took %.3f sec, multi-thread took %.3f%n",
                (mid - start) / 1e9, (end - mid) / 1e9);
    }
} 
```

在 3.72 GHz i7 上打印

```
Single threaded took 58.702 sec, multi-thread took 11.391 
```**

# spring - 在我的 Java EE 项目中使用 spring 时出现错误

> ID：10469553
> 
> 赞同：-2
> 
> 时间：2012-05-06T09:40:31.400
> 
> 标签：spring, jakarta-ee

```
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'helpManager' defined in ServletContext resource [/WEB-INF/applicationContext.xml]: Initialization of bean failed; nested exception is java.lang.NoClassDefFoundError: com/wotongji/Dao/UserDao**
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:527)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:293)
at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:290)
at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:192)
at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:585)
at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:895)
at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:425)
at org.springframework.web.context.ContextLoader.createWebApplicationContext(ContextLoader.java:282)
at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:204)
at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:47)
at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4779)
at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5273)
at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:895)
at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:871)
at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:615)
at org.apache.catalina.startup.HostConfig.deployDescriptor(HostConfig.java:649)
at org.apache.catalina.startup.HostConfig.deployApps(HostConfig.java:530)
at org.apache.catalina.startup.HostConfig.check(HostConfig.java:1467)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at org.apache.tomcat.util.modeler.BaseModelMBean.invoke(BaseModelMBean.java:301)
at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:836)
at com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:761)
at org.apache.catalina.manager.ManagerServlet.check(ManagerServlet.java:1436)
at org.apache.catalina.manager.ManagerServlet.deploy(ManagerServlet.java:856)
at org.apache.catalina.manager.ManagerServlet.doGet(ManagerServlet.java:353)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.apache.catalina.filters.SetCharacterEncodingFilter.doFilter(SetCharacterEncodingFilter.java:108)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:224)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169)
at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:581)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927) 
```

UserDao.java是我自己定义的类。我用的是hibernate和strut和spring。jar很多，我认为是spring引起的，但具体不知道。我不知道是什么原因造成的。我想可能是jar冲突引起的。但我没有找到它。我正在等待你的帮助。^.^。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T09:47:07.637

“UserDao”名称末尾的“星星”怎么样？
`nested exception is java.lang.NoClassDefFoundError: com/wotongji/Dao/UserDao**`

检查 bean 中的导入是否有拼写错误。

# c - 为类似数据库的功能编写代码或查找 C 库？

> ID：10469558
> 
> 赞同：-1
> 
> 时间：2012-05-06T09:41:55.310
> 
> 标签：c

几年来，我一直在研究一个当前将其数据存储在数据库中的系统。数百万笔交易对它有相当高的需求。

没有*必*要这样做，但纯粹是为了好玩，我已经很长时间了，现在想知道如果我用 c 编写整个东西，并直接从磁盘写入/读取，我能做到多快。我知道这有点疯狂。

所有数据都适合内存，所以最大的问题是以某种方式存储可以在系统崩溃时重放的事务日志。

我想知道有哪些人在 C 方面的经验比我想象的要多。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T10:10:21.363

如果我正确理解他的问题，我可以看到两个选项：

1.  您可以查看 SQLite 之类的东西，除了将存储处理到磁盘之外，它还提供了“用 C 语言编写”和快速执行部分。它是一个基于文件的数据库，对系统/程序崩溃非常快速且具有弹性。

2.  您可以在存储 Live Copy 的同时将所有数据记录到磁盘，但如果将其存储为 SQL 事务，它将比等效的原始数据大。在这种情况下，您需要权衡，因为像 SQLite 这样的东西可能比您手动编码的 RAM 存储方法具有更多的处理开销，但由于其原始（非 SQL）存储，写入磁盘的可能更少。

# java - 如何修改/重新创建 Html.fromHtml()？

> ID：10469560
> 
> 赞同：0
> 
> 时间：2012-05-06T09:42:11.743
> 
> 标签：java, android

我不太了解 Java 的所有可能性，尤其是如果它不是我的代码的话。

所以，[http ://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/2.2_r1.1/android/text/Html.java#Html.fromHtml%28java.lang .String%29](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/2.2_r1.1/android/text/Html.java#Html.fromHtml%28java.lang.String%29)，我只需要修改 Html.fromHtml() 吗？

但我不明白它是如何工作的：它是创建像 Html2 这样的新类并复制/粘贴所有代码的好方法吗？当我这样做时，我有一些我不明白的错误：

```
private static class HtmlParser {
        private static final HTMLSchema schema = new HTMLSchema();
    } 
```

他告诉我的 Htmlschema 不能解析为一个类型，并添加类 HtmlSchema ......但我在哪里可以找到它？

还有这个 ：

```
return XmlUtils.convertValueToInt(color, -1); 
```

> XmlUtils 无法解析。

其余的错误已经在 Eclipse 的帮助下解决了

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T12:20:27.007

> 他告诉我的 Htmlschema 不能解析为一个类型，并添加类 HtmlSchema ......但我在哪里可以找到它？

```
import org.ccil.cowan.tagsoup.HTMLSchema; 
```

`HTMLSchema`来自 TagSoup，一个在 Android 框架内部使用但不通过 Android SDK 公开的 JAR。

> XmlUtils 无法解析。

```
import com.android.internal.util.XmlUtils; 
```

`XmlUtils`是来自 Android 固件的类，不通过 Android SDK 公开。

# android - 如何使用多个主键

> ID：10469562
> 
> 赞同：10
> 
> 时间：2012-05-06T09:42:22.983
> 
> 标签：android, ormlite

我为我的 android 应用程序创建了数据库，女巫有 16 个表。我想使用 ORMlite 映射。问题是我没有找到您具有复合 id（多个主键）的示例。例如我有表：

```
CREATE  TABLE IF NOT EXISTS `Tourist_Guide`.`Cultural_activity` (
  `City_Id` INT NOT NULL ,
  `activity_Id` INT NOT NULL ,
  `Cultural_activity_Id` INT NOT NULL AUTO_INCREMENT ,
  `Name_Of_Cultural_activity` VARCHAR(30) NOT NULL ,
  PRIMARY KEY (`Cultural_activity_Id`, `City_Id`, `activity_Id`) ,
  INDEX `fk_Cultural_activity_activity1` (`City_Id` ASC, `activity_Id` ASC) ,
  CONSTRAINT `fk_Cultural_activity_activity1`
    FOREIGN KEY (`City_Id` , `activity_Id` )
    REFERENCES `Tourist_Guide`.`activity` (`City_Id` , `activity_Id` )
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB; 
```

你能告诉我如何将这个表映射到类（这个类应该是什么样子），这可能吗？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-05-06T09:55:17.520

您必须在每个唯一字段上方使用以下注释：

> @DatabaseField (uniqueCombo = true)

[这是关于`uniqueCombo`.](http://ormlite.com/docs/unique-combo)

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-12-17T15:48:34.637

可以生成由其他字段组成的人工 ID 字段。这可以通过将注释中的[`useSetGet`](http://ormlite.com/javadoc/ormlite-core/com/j256/ormlite/field/DatabaseField.html#useGetSet%28%29)属性设置为 true 来完成。`@DatabaseField`这使得 ORMLite 调用 getter 和 setter 方法，而不是使用反射。

然后，在您的吸气剂中，您可以返回字段的组合。

在您的示例中，这看起来像这样：

```
@DatabaseField(id=true, useGetSet=true)
private String id;

...

public String getId(){

    return culturalAcitivityId +"-" +cityId +"-" +activityId;

}
public void setId(String id){

    this.id = id;

} 
```

[http://ormlite.com/javadoc/ormlite-core/com/j256/ormlite/field/DatabaseField.html#useGetSet()](http://ormlite.com/javadoc/ormlite-core/com/j256/ormlite/field/DatabaseField.html#useGetSet())

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-12-03T14:01:30.707

> ### 限制
> 
> 为简单起见，并且为了能够在 db4o、memcached、redis 或文件系统（即 ServiceStack 中包含的提供程序）中持久保存相同的 POCO 类，每个模型都必须有一个主键，按照惯例 OrmLite 期望它是 Id，尽管您使用 [Alias("DbFieldName")] 属性将其映射到具有不同名称的列或使用 [PrimaryKey] 属性告诉 OrmLite 使用不同的属性作为主键。
> 
> 您仍然可以从这些表中选择，您将无法使用依赖它的 API，例如隐含过滤器（即未指定）的更新或删除，所有以 ById 结尾的 API 等。
> 
> ### 解决方法单一主键限制
> 
> 支持具有多个主键的表的潜在解决方法是创建一个自动生成的 Id 属性，该属性根据所有主键字段返回唯一值，例如：

```
public class OrderDetail
{
    public string Id { get { return this.OrderId + "/" + this.ProductId; } }

public int OrderId { get; set; }
    public int ProductId { get; set; }
    public decimal UnitPrice { get; set; }
    public short Quantity { get; set; }
    public double Discount { get; set; }
} 
```

[https://github.com/ServiceStack/ServiceStack.OrmLite/#limitations](https://github.com/ServiceStack/ServiceStack.OrmLite/#limitations)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-20T00:30:54.013

[ServiceStack 的 OrmLite](https://github.com/ServiceStack/ServiceStack.OrmLite/)在设计上不支持多个复合主键。为了使您的相同 POCO 在数据库之外有用（例如 NoSQL 数据存储、缓存提供程序等），OrmLite 期望每种类型都有一个主键，我的默认值是`Id`属性（可使用 ModelConfig 类或`[PrimaryKey]`属性覆盖`[Alias]`）。

克服此限制的解决方法包括创建单个唯一 ID，但包括对复合主键的唯一约束，例如：

```
[CompositeIndex("CompositePkId1","CompositePkId2", Unique = true)] 
public class Poco 
{
    [AutoIncrement]
    public int Id { get; set; }
    public int CompositePkId1 { get; set; }
    public int CompositePkId2 { get; set; }
} 
```

或者创建一个包含所有主键组合的伪列，例如：

```
public class Poco 
{
    public string Id { get { return CompositePkId1 + ":" + CompositePkId2; } }
    public int CompositePkId1 { get; set; }
    public int CompositePkId2 { get; set; }
} 
```

# objective-c - 使用 NSScreen 获取内部 macbook 屏幕

> ID：10469563
> 
> 赞同：5
> 
> 时间：2012-05-06T09:42:30.660
> 
> 标签：objective-c, screen

如果我将外接显示器连接到我的 MacBook，我将如何检索 MacBook 屏幕？

任何一个屏幕都可以是带有菜单栏和停靠栏的屏幕。它们也可以具有相同的分辨率、相同的名称等。

是否可以在不要求用户拔掉除 MacBook 屏幕之外的所有屏幕的情况下确定它？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-06T13:52:09.650

您可以使用`CGDisplayIsBuiltin()`来确定显示器是否是内置的。

示例代码：

```
int i = 0;
for(NSScreen* screen in [NSScreen screens]) {
    NSDictionary* screenDictionary = [screen deviceDescription];
    NSNumber* screenID = [screenDictionary objectForKey:@"NSScreenNumber"];
    CGDirectDisplayID aID = [screenID unsignedIntValue];     
    NSLog(@"Screen number %i is%@ builtin", i, CGDisplayIsBuiltin(aID)? @"": @" not");
    i++;
} 
```

# javascript - 如何使用位置对象解析 URL 而无需在 javascript 中重定向页面？

> ID：10469575
> 
> 赞同：2
> 
> 时间：2012-05-06T09:45:48.880
> 
> 标签：javascript, url

浏览器有一个非常高效的 URL 解析器，可以让您从当前 URL获取`location.href`、`hash`、等。`query`我想使用它而不是使用正则表达式来编码。

如果您设置`location.href`或执行`location.replace(url)`，页面将在 Chrome 中重定向。我试图在这个浏览器中获取位置的原型，但我找不到`location.prototype`. 在 js 控制台中有一个`location.__proto__`被描述为`Location`类的类，但我找不到实例化它的方法。另外，我需要一个跨浏览器解决方案，`__proto__`在 IE 中不可用。

如果不可能，不要给我一个正则表达式替代品，只要告诉我铁的事实，只要你能用证据支持它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-06T09:55:22.597

是的，很有可能！如果您创建一个新`a`对象，您可以使用位置字段而无需重定向浏览器。

例如：

```
var a = document.createElement('a');
a.href = "http://openid.neosmart.net/mqudsi#fake" 
```

您现在可以访问`.hash`、`.pathname`、`.host`和所有其他位置信息！

```
> console.log(a.host);
openid.neosmart.net 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T10:05:03.290

我写了一个很棒的 Mahmoud 解决方案的通用版本：

```
 var parseUrl = (function(){

    var div = document.createElement('div');
    div.innerHTML = "<a></a>";

    return function(url){
      div.firstChild.href = url;
      div.innerHTML = div.innerHTML;
      return div.firstChild;
    };

  })(); 
```

它是这样工作的：

```
var url = parseUrl('http://google.com');
var url = zerobin.parseUrl('http://google.com');
console.log(url.protocol);
"http:"
console.log(url.host);
"google.com" 
```

`parseUrl`代码有点复杂，因为如果你想让 IE 解析 URL，IE 需要它的 HTML 解析器处理链接 HTML 代码。因此，我们创建了一个闭包，在其中存储 a`<div>`和 a`<a>`作为子项（避免每次调用都重新创建它），当我们需要解析 URL 时，我们只需获取 的 HTML `div`，并将其注入自身，强制 IE 解析它。

# sql - Database_Default 是什么意思？

> ID：10469578
> 
> 赞同：0
> 
> 时间：2012-05-06T09:46:18.753
> 
> 标签：sql, sql-server, database

我明白什么是排序规则。

我关于 DATABASE_DEFAULT 的问题

DATABASE_DEFAULT 是指当前运行的数据库还是模型数据库？

想象一下，我创建了一个新数据库，然后如果我调用此行，则在创建过程后将其更改为排序规则

```
ON GP_DOCNUMBR COLLATE DATABASE_DEFAULT = DocumentNumber COLLATE DATABASE_DEFAULT 
```

DATABASE_DEFAULT 是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-06T10:24:05.337

DATABASE_DEFAULT 是您在安装 sql server 时设置的排序规则。我总是通过检查 tempdb 的排序规则来获得服务器的默认排序规则。

# android - 按返回按钮查看寻呼机

> ID：10469585
> 
> 赞同：-2
> 
> 时间：2012-05-06T09:46:32.467
> 
> 标签：android, android-viewpager

我的 viewpager 运行良好，当我单击视图/页面时，它会打开一个新活动，但是当我想按返回以转到 viewpager 时，应用程序会关闭。当我按下后退按钮时，如何让 viewpager 正确打开到当前页面？

我知道这是应该的，所以这里是 viewpager 代码：

```
public class LogoQuizActivity extends Activity {

private
class PageListener extends SimpleOnPageChangeListener{
public void onPageSelected(int position) {
    //Log.i(TAG, "page selected " + position);
       currentPage = position;
}
}    

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    MyPagerAdapter adapter = new MyPagerAdapter();
    ViewPager myPager = (ViewPager) findViewById(R.id.myfivepanelpager);
    myPager.setAdapter(adapter);
    myPager.setCurrentItem(currentPage);
    myPager.setPadding(0, 150, 0, 0);

    PageListener pageListener = new PageListener();
    myPager.setOnPageChangeListener(pageListener);

}

private class MyPagerAdapter extends PagerAdapter {

    public int getCount() {
        return 5;
    }

    public Object instantiateItem(View collection, int position) {

        LayoutInflater inflater = (LayoutInflater) collection.getContext()
                .getSystemService(Context.LAYOUT_INFLATER_SERVICE);

        View view = null; // this comes first
         int resId = 0;
        switch (position) {
        case 0:
            resId = R.layout.farleft;
            view = inflater.inflate(resId, null);

            break;
        case 1:
            resId = R.layout.left;
            view = inflater.inflate(resId, null);

            break;
        case 2:
            resId = R.layout.middle;
            view = inflater.inflate(resId, null);

            break;
        case 3:
            resId = R.layout.right;
            view = inflater.inflate(resId, null);

            break;
        case 4:
            resId = R.layout.farright;
            view = inflater.inflate(resId, null);

            break;
        }

        view.setTag(position);
        view.setOnClickListener(new OnClickListener() {
            public void onClick(View view) {

                int position = (Integer) view.getTag();
                Log.v("Log_tag", "Here image is clicked" + position);

                if(position == 0){
                    Intent intent = new Intent(LogoQuizActivity.this,
                            LevelOne.class);
                    startActivity(intent);

                }

                if(position == 1){
                    Intent intent = new Intent(getBaseContext(),
                            LevelTwo.class);
                    startActivity(intent);
                }

                if(position == 2){
                    Intent intent = new Intent(getBaseContext(),
                            LevelThree.class);
                    startActivity(intent);
                }

                if(position == 3){
                    Intent intent = new Intent(getBaseContext(),
                            LevelFour.class);
                    startActivity(intent);
                }

                if(position == 4){
                    Intent intent = new Intent(getBaseContext(),
                            LevelFive.class);
                    startActivity(intent);
                }
            }
        });

        ((ViewPager) collection).addView(view, 0);

        return view;

    }

    @Override
    public void destroyItem(View arg0, int arg1, Object arg2) {
        ((ViewPager) arg0).removeView((View) arg2);

    }

    @Override
    public void finishUpdate(View arg0) {
        // TODO Auto-generated method stub

    }

    @Override
    public boolean isViewFromObject(View arg0, Object arg1) {
        return arg0 == ((View) arg1);

    }

    @Override
    public void restoreState(Parcelable arg0, ClassLoader arg1) {
        // TODO Auto-generated method stub

    }

    @Override
    public Parcelable saveState() {
        // TODO Auto-generated method stub
        return null;
    }

    @Override
    public void startUpdate(View arg0) {
        // TODO Auto-generated method stub

    }       

}

} 
```

我不确定这是否与恢复状态方法有关或在 parcelable savestate 中返回 null。这可能是完全显而易见的，所以提前感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T10:25:54.267

在我调用新意图后，通过`FLAG_ACTIVITY_CLEAR_TOP`在我的第二个和第三个活动上使用解决了这个问题。

# java - C++ 到 Java 中的全局变量

> ID：10469593
> 
> 赞同：0
> 
> 时间：2012-05-06T09:47:33.443
> 
> 标签：java, c++, global-variables

我如何在 Java 中编写 C++ 的所有这些全局变量？

```
 //Global variables
  int charClass;
  char lexeme [100];
  char nextChar;
  int lexLen;
  int token;
  int nextToken;
  extern string word("Apple"); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-06T09:50:30.563

类中的公共静态变量怎么样？

```
public class Globals {
    public static int charClass;
    public static char[] lexeme = new char[100];
    public static char nextChar;
    public static int lexLen;
    public static int token;
    public static int nextToken;
    public static String word = "Apple";
} 
```

有几个不同之处，但主要思想是相似的（至少对于原语而言）。

# c++ - 为什么我写一个空的 main 时没有警告？

> ID：10469602
> 
> 赞同：1
> 
> 时间：2012-05-06T09:48:52.467
> 
> 标签：c++, c, visual-studio, g++

如果我编写如下程序，g++ 和 Visual Studio 会礼貌地警告我，从未使用过局部变量 a：

```
int main()
{
    int a; // An unused variable? Warning! Warning!
} 
```

如果我删除未使用的变量（让编译器满意），它会留下以下程序：

```
int main()
{
    // An empty main? That's fine.
} 
```

现在，我留下了一个无用的程序。

也许我遗漏了一些东西，但是，**如果一个未使用的变量足以引发警告，为什么一个空程序可以呢？**

上面的例子非常简单。但在现实生活中，如果我有一个空主程序的大程序（因为我忘了在里面放任何东西）。那么有警告应该是一件好事，不是吗。

也许我在 g++ 或 Visual Studio 中缺少一个选项，当主目录为空时会引发警告/错误？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-06T09:50:40.243

这样做的原因很简单，如果其中没有 return 语句，则按照标准的定义`main`隐式返回。`EXIT_SUCCESS`

所以一个空的 main 就可以了，不需要返回，不需要函数调用，什么都没有。

* * *

要回答为什么 GCC 不*警告*您的问题是因为警告可以*帮助*您解决*常见错误*。不使用变量会导致混乱的错误和代码膨胀。

然而，完全忘记编写一个 main 函数对于初学者来说并不是一个常见的错误，也不值得警告（因为它也是完全合法的）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T17:17:22.890

我怀疑很多原因是编译器通常会尝试警告潜在问题，但*不一定*很明显。

现在可以肯定的是，如果您的*所有*`main`变量都包含一个从未使用过的变量的定义，那是相当明显的——但如果您定义了 16 个变量（或其他变量）并且其中一个不再使用，那可能就不那么明显了.

在不`main`包含任何内容的情况下，我*想*同样的情况也可能发生在空的情况下`main`——例如，你可能有一个完整的`#ifdef`/ `#elif`/etc. 网络，这导致`main`某些特定平台完全是空的。我很确定我从来没有遇到过这个，我很确定我也从来没有听说过其他人看到它。至少对我来说，这表明它在实践中的出现频率可能不足以让大多数人非常关心这种可能性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-06T09:53:02.777

> 如果未使用的变量足以引发警告，为什么空程序可以？

首先，一个空`main`不等于一个空程序。可能存在具有非平凡构造函数/析构函数的静态对象。`main`无论是否为空，这些都会被调用。

其次，人们可能会想到编译器可以警告的大量潜在错误，但大多数编译器不会。我认为这个特定的问题并不经常出现（并且需要几秒钟才能弄清楚）。因此，我没有看到一个令人信服的案例来专门诊断它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-06T10:40:23.027

当我清理包含 Informix 4GL 的定制运行程序的继承 C 代码时，我修复了每个警告，并设置了警告标志以捕获所有内容，并且有很多警告。

我已经很久没有使用 Visual C++了。不能将 VC++ 配置为标记最严重的警告吗？它可能不是默认设置，但您必须更改它。

那么有可能至少会标记未使用的变量。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-06T12:41:06.423

在全局意义`int main()`上只是对程序的主函数的定义，该函数`SUCCESS`在完成时返回。main 函数是所有 C++ 程序开始执行的点，与它在源代码中的位置无关。

所以这：

```
int main()
{
    // An empty main? That's fine.

    // notice that the "return 0;" part is here by default, whether you wrote it or not 
} 
```

只是一个返回可接受值的函数的定义。所以一切都很好，这就是编译器保持沉默的原因。

# apache-flex - (flex mobile)如何在我的自定义布局中添加元素

> ID：10469604
> 
> 赞同：2
> 
> 时间：2012-05-06T09:48:58.900
> 
> 标签：apache-flex, layout, mobile

这是我的代码：

```
public class my_Layout extends LayoutBase
{
    public function my_Layout(){
        super();
        var b:Button = new Button;
        b.label="my button"
        addChild(b)
    }
} 
```

但它显示错误，我的方法 addChild 未定义，

那我能做什么，谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T06:36:06.953

```
private function get_list():List{
        var list:List = target.parent.parent.parent.parent as List;
        return list;
    }
    private function get_document():View{
        var list:List = get_list();
        return list.document as View;
    }

var list:List = get_list();
        var document:View = get_document();
        var b:Button = new Button;
        b.label = 'wwwwwwwwwwwwwwwwwwwwww';
        document.addElement(b); 
```

# javascript - RequireJS：在回调中定义

> ID：10469605
> 
> 赞同：3
> 
> 时间：2012-05-06T09:49:08.303
> 
> 标签：javascript, callback, requirejs, requirejs-define

在我的模块中，我想推迟“定义”调用，但 RequireJS 在文件加载后运行回调，而不是在“定义”时运行回调......例如：

*一个.js：*

```
require(['b'], function(b){
  console.log(b);
}); 
```

*b.js：*

```
define({'foo':'bar'}); 
```

这按预期工作，写入对象 {foo:bar}。但是，如果我将“定义”移动到延迟函数：

*b.js：*

```
setTimeout(function(){
  define({'foo':'bar'});
}, 1000); 
```

然后 console.log(b) 写入“null”。

怎么了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T17:25:04.110

我认为任何延迟或延迟都应该发生在定义函数中，或者您可以使用一些回调模式，如下所示：

```
//a.js
require(['b'], function(b){
  b.getData(
    function(data) {
        console.log(data);
    }
  );
});

//b.js
define(function(){
    this.getData = function(callback) {
        setTimeout(function(_callback){
            return function() {
                _callback({'foo':'bar'});
            }
        }(callback), 1000);     
    }
    return this;
}); 
```

使用此模式，您可以在 a.js 中设置回调函数来处理来自 b.js 的延迟响应。

希望这对您有所帮助。

# c - 如何将 LKM（可加载内核模块）链接到静态或动态库？

> ID：10469606
> 
> 赞同：2
> 
> 时间：2012-05-06T09:49:28.277
> 
> 标签：c, linux-kernel, static-libraries, dynamic-library

搜索后，我找不到任何 LKM 使用静态或动态库的示例。

我想创建静态和动态库（可能使用标准 C 库或任何其他库），然后开发一个使用我自己的静态和动态库的 LKM。

如何将 LKM（可加载内核模块）链接到静态或动态库？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-06T10:03:29.107

恐怕你有一个重大的误解——Linux 内核模块不能与标准用户空间库链接，例如 C 库，无论是静态的还是动态的。这是因为 C 库和动态链接器（实现动态链接）实际上调用内核来完成它的工作。

您可以编写静态 C 库并将其链接到内核模块，而 LKML 实际上是内核动态库的一种形式。有关详细信息，请参见 Documentation/kbuild/ 目录

# javascript - 如何：悬停图像和动画绘制一条线和描述淡出

> ID：10469610
> 
> 赞同：0
> 
> 时间：2012-05-06T09:50:00.343
> 
> 标签：javascript, jquery, css, effects

作为标题，如果我想实现一些效果，比如对悬停在图像上进行描述，并且带有描述的 div 框将在该行下方淡出，我如何使用 Javascript、jQuery 或 CSS3 来实现这一点？谢谢你的回复。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T09:51:56.723

您可以将图像和描述放在 div 中，将 div 高度设置为图像高度并溢出：隐藏；

然后在 :hover 上关闭溢出

使用 CSS 过渡以获得平滑的效果

# php - PHP OOP 如何对配置数据进行分组

> ID：10469620
> 
> 赞同：1
> 
> 时间：2012-05-06T09:52:38.020
> 
> 标签：php, oop, constants

我想在一些对象中存储一些配置数据，但我有一个问题......

```
class B {
  const attr1 = 'something1';
  const attr2 = 'something2';
  const attr3 = 'something3';
}

class A {
  const attr1 = 'somethingA1';
  const attr2 = 'somethingA2';
  const attr3 = 'somethingA3';
  const b = <---- i wanna put here a reference of B, but B as a class (not an object...), i'm crazy?
} 
```

我不确定我的例子是否清楚......从A，我想访问B的attr1，比如A::B::attr1，或者类似的东西，还有另一种方法可以做到这一点吗？还是我错了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T10:10:43.657

没有办法分配对类的引用，也没有办法在运行时分配类常量。所以你的整个方法几乎是不可能的。你能做的是

```
const b = 'B' 
```

从 PHP 5.3.0 开始，您可以这样做

```
$b = A::b;
echo $b::attr1; 
```

但你不能这样做`A::b::attr1`。这将引发`T_PAAMAYIM_NEKUDOTAYIM`错误。这是解析器的限制。在撰写本文时，PHP 无法做到这一点。

* * *

> 因为B类包含A的一组数据，我想在b（A）中存储一个复杂的数据，我想这样做是因为我想保持代码干净

[您可以通过`B`合成 来`A`](http://en.wikipedia.org/wiki/Object_composition)轻松解决此问题，例如，您可以[在](http://en.wikipedia.org/wiki/Dependency_injection)创建时[注入`B``A`](http://en.wikipedia.org/wiki/Dependency_injection)`A`

```
class A
{
    private $b;

    public function __construct(B $b)
    {
        $this->b = $b;
    }
}
$a = new A(new B); 
```

或[在内部](http://en.wikipedia.org/wiki/GRASP_%28object-oriented_design%29#Creator)[创建`B``A`](http://en.wikipedia.org/wiki/GRASP_%28object-oriented_design%29#Creator)，例如

```
class A
{
    private $b;

    public function __construct()
    {
        $this->b = new B;
    }
} 
```

因为`B`只是 的数据部分`A`，[所以您通过隧道传输所有公共访问，`A`](http://en.wikipedia.org/wiki/Delegation_pattern)而不是获取`B`然后使用 B 的方法。所以任何使用的代码`A`都不需要知道里面有`B`什么`A`。这将允许您轻松更改`B`，而无需担心消耗的代码`A`，例如让`attr1`您添加一个 getter 到`A`：

```
public function getAttr1()
{
    $b = $this->b;
    return $b::attr1;
} 
```

在使用属性而不是常量时，您可以减轻对赋值的笨拙需求`B`（无论如何，常量在 PHP 中都是愚蠢的，因为您必须将它们视为公共 API），例如

```
class B
{ 
    private $attr1;

    public function getAttr1()
    {
        return $this->attr1;
    }
} 
```

然后你可以做`A`：

```
public function getAttr1()
{
    return $this->b->getAttr1();
} 
```

更好的是不要完全暴露`B`through的内部结构，`A`而只[添加对 A 执行某些操作的公共方法](http://pragprog.com/articles/tell-dont-ask)。这将使您的 API 更小，您的代码更面向对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T10:09:24.817

你不能像那样引用一个类，因为你使用这个类的唯一方法是通过一个对象，所以尝试这样做也没有意义。

用户这个：

```
class A {
  const attr1 = 'somethingA1';
  const attr2 = 'somethingA2';
  const attr3 = 'somethingA3';
  public $b;

  function __construct() {
    $this -> b = new b();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-06T09:54:39.640

你可以简单地说`b = "B"`..

如果你想创建 B 的对象，你可以做 `new b`或访问属性

# c++ - Qt 图像 I/O 和 QPixmap::grabWindow

> ID：10469622
> 
> 赞同：1
> 
> 时间：2012-05-06T09:53:00.640
> 
> 标签：c++, image, qt, io

我正在编写一种“远程桌面”程序，但我遇到了一些问题。我在服务器端使用 QPixmap::grabWindow 来捕获屏幕截图并将其发送到客户端，然后将其写入 QByteArray 并通过 QTcpSocket 发送。生成的 QPixmap 的大小太大，并且如您所知，应用程序对时间至关重要。有没有办法优化它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T10:07:24.643

*   使用增量。基本思想是这样的：想象一个覆盖窗口图像的网格，将其划分为 16 像素 x 16 像素左右的正方形。将每个方块与前一个窗口中发送给客户端的对应方块进行比较。如果只有一个像素发生了变化，就将方块的新内容发送给客户端。
*   尝试使用某种形式的快速压缩来压缩图像。例如，您可以使用[zlib ，但将压缩级别保持在 3 或以下。](http://www.zlib.net/)或者您可以在通过 TCP 发送时压缩整个数据流（这很棘手 - 您必须小心刷新缓冲区等。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T12:47:04.143

添加到迈克尔斯的答案：

*   降低分辨率
*   减少颜色深度
*   降低帧率
*   使用截屏编解码器/解码器

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-06T18:57:16.033

（除了迈克尔更详细的答案：）对于压缩，您可以使用 qCompress / qUncompress （这实际上取决于 Qt 包含的 zlib）[http://qt-project.org/doc/qt-4.8/qbytearray.html#qUncompress](http://qt-project.org/doc/qt-4.8/qbytearray.html#qUncompress)

# java - 用另一个 jar 和 cmd 参数启动一个 jar

> ID：10469625
> 
> 赞同：2
> 
> 时间：2012-05-06T09:53:14.110
> 
> 标签：java, jar, path, exec

我有一个带有这样的主文件的 jar：

```
public class StartMesekocka3D {

    public static void main(String[] args) {
        try {
            Runtime.getRuntime().exec("java -Djava.library.path=\"bin\" -jar \"Mesekocka3D.jar\"");
        } catch (IOException ex) {
            Logger.getLogger(StartMesekocka3D.class.getName()).log(Level.SEVERE, null, ex);
        }
    }
} 
```

我想用 djava 参数启动另一个 jar。如果我双击 jar（它们当然在同一个文件夹中），没有任何反应，如果我输入**java -jar Startmesekocka3D.jar**它会启动另一个 jar，并且运行良好。双击应该是什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T10:04:35.343

我认为双击不会启动`StartMesekocka3D`。你有两个解决方案：

*   您可以创建一个批处理/shell 文件（简单的解决方案）。
*   您可以按照[本教程](http://csdl.ics.hawaii.edu/~johnson/613f99/modules/04/jar-files.html)创建可执行文件`jar`。如果您使用的是**Netbeans**，这里[是教程](http://netbeans.org/kb/articles/javase-deploy.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T10:02:00.597

要创建可以通过单击 dbl 启动的可执行 jar，您需要在 manifest.mf 中定义 Main Class 条目，然后使用新的 manifest.mf 将其 jar

# javascript - Javascript流沙滑块

> ID：10469632
> 
> 赞同：0
> 
> 时间：2012-05-06T09:54:41.473
> 
> 标签：javascript, quicksand

我正在尝试包含 javascript 循环滑块 - Quicksand 1.2.1 但在萤火虫控制台中我收到此错误：

```
$("#home_header ul").cycle is not a function 
```

谁能帮我这个？

这是应用程序[http://mycompany.herokuapp.com的链接](http://mycompany.herokuapp.com)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T10:05:50.473

你应该在你的标题中添加这个：

```
<script type="text/javascript" src="http://malsup.github.com/jquery.cycle.all.js"></script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T10:08:22.800

你在用[流沙](http://razorjack.net/quicksand/index.html)吗？根据文档，这将是`$('#home_header ul').quicksand();`

# c# - 在 C#.Net 和 Oracle 之间获得不同的加密结果

> ID：10469633
> 
> 赞同：1
> 
> 时间：2012-05-06T09:54:57.133
> 
> 标签：c#, oracle, character-encoding, cryptography, hash

我想在 C#.Net 和 Oracle 10g 中基于 SHA1 算法加密一些字符串。

**我在 C#.Net 中的算法：**

```
string salt = "123";
System.Security.Cryptography.SHA1 sha = System.Security.Cryptography.SHA1.Create();
byte[] preHash = System.Text.Encoding.UTF32.GetBytes(salt);
byte[] hash = sha.ComputeHash(preHash);

string password = System.Convert.ToBase64String(hash);
password = password.Substring(0, 8);

// password value is: "7yP7/lkJ" 
```

**在甲骨文中：**

```
Create Or Replace Function Sha1(P_Value Varchar2,P_Length Number) Return Varchar2 
Is 
P_String Varchar2(2000) := P_Value ;
L_Hash_Value_Raw    Raw (100);    
Lv_Hash_Value_Varchar   Varchar2 (40); 
Begin   
    L_Hash_Value_Raw := Dbms_Crypto.Hash (Src   => Utl_Raw.Cast_To_Raw(P_String),       
                                         Typ   => Dbms_Crypto.Hash_Sh1);   
-- Convert Into Varchar2 
Select   Utl_Raw.Cast_To_Varchar2(Utl_Encode.Base64_Encode(L_Hash_Value_Raw))
Into   Lv_Hash_Value_Varchar  
From   Dual;  
    Lv_Hash_Value_Varchar := Substr(Lv_Hash_Value_Varchar,0,P_Length);
Return Lv_Hash_Value_Varchar;
End; 
```

* * *

**Oracle 的调用：**

```
select SHA1('123', 8) from dual; -- Result: "QLOAFWMI" 
```

也许我的一般问题是 Oracle (PL/SQL) 和 .Net 在加密/原始/十六进制级别方面有什么区别？我想这个答案会解决这个特定的问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-06T10:12:53.710

你使用了错误的编码。试试下面的代码：

```
string salt = "123";
System.Security.Cryptography.SHA1 sha = System.Security.Cryptography.SHA1.Create();
byte[] preHash = System.Text.Encoding.UTF8.GetBytes(salt);
byte[] hash = sha.ComputeHash(preHash);

string password = System.Convert.ToBase64String(hash);
password = password.Substring(0, 8); 
```

# c# - 如何从托管 c# 代码中挂钩本机 Windows API？

> ID：10469637
> 
> 赞同：-2
> 
> 时间：2012-05-06T09:55:23.947
> 
> 标签：c#, .net, winapi, pinvoke, nt-native-api

我想使用以下原生 API：

```
NtOpenProcess 
NtOpenThread 
NtReadVirtualMemory 
NtWriteVirtualMemory 
PsCreateSystemThread 
KiAttachProcess 
```

是否可以从托管 C# 代码中挂钩这些 API？如果是这样，有人可以提供一个如何做到这一点的例子吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T06:08:56.227

您可以使用原始参数声明 NtOpenProcess，然后在其声明之前声明 DllImport("kernel32.dll")（您可以使用此方法几乎任何 dll/过程组合）。

像这样：

```
[DllImport("kernel32.dll")]
internal static extern int NtOpenProcess(IntPtr32 arguments...); 
```

这是[MSDN 上的解释](http://msdn.microsoft.com/en-us/library/aa288468%28v=vs.71%29.aspx#pinvoke_callingdllexport)。

**更新**：实际上你想要做的是可以从 C# 做，但在 C++ 的帮助下。如果你想拦截来自其他程序的 API 调用，一种更简单的方法是用 C++ 编写 API 拦截代码（使用本机 Windows 功能），然后`DllImport`将你的 C++ DLL 插入到你的 C# 应用程序中，只执行来自 C# 代码的函数调用。

# javascript - jQuery 文档准备就绪 - 函数调用：顺序还是异步？

> ID：10469638
> 
> 赞同：1
> 
> 时间：2012-05-06T09:56:03.040
> 
> 标签：javascript, jquery, function, asynchronous, onload

我认识到这个问题可能与 Javascript 函数的一般运作方式有关（而不仅仅是我的特殊情况），但是......

我想知道我的文档准备功能如何......嗯......功能。在程式化的形式中，它如下所示：

```
$(function () {
    object1.init();
    object2.init();
    object3.init(); etc... 
```

object2.init() 只会在 object1.init() 返回时触发吗？还是它们都会以异步方式触发？

更新：如果它们按顺序触发，有什么方法可以让它们同时运行（我可能不需要这样做）？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T09:57:02.597

> object2.init() 只会在 object1.init() 返回时触发吗？还是它们都会以异步方式触发？

object2.init() 仅在 object1.init() 返回时触发。
所有函数都存储在一个队列中，并一个接一个地被触发。

没有办法让它们同时开火。
不只是 jQuery，而且 javascript 也不支持并行编程。

* * *

**你可以看到jQuery源代码：**

（*更新：*我删除了实际代码，因为答案变成了一个迷你 jQuery 源代码......）

```
// Handle when the DOM is ready
ready: function(wait) {
    ...

// Call all callbacks with the given context and arguments
fireWith: function(context, args) {
    ...

jQuery.Callbacks = function( flags ) {  
    ...

// The deferred used on DOM ready
readyList, 
```

检查[jQuery 源代码中的那些函数和变量](http://code.jquery.com/jquery-1.7.2.js)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-06T09:58:33.077

它将按顺序运行。

如果其中一个`init()`进行异步调用，那显然是异步的，但每个函数（或实际上的任何行）将依次​​运行。

# c - scanf 函数返回什么？

> ID：10469643
> 
> 赞同：32
> 
> 时间：2012-05-06T09:57:08.423
> 
> 标签：c, scanf

scanf 在以下情况下返回的值是多少：

```
int g;
int p = scanf("%d", &g);      // Originally: int p = scanf("%d", g); 
```

我知道该`scanf`函数的签名是：

```
int scanf(const char *format, ...) 
```

`int`这个函数返回的值是多少？

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-05-06T09:58:49.403

从`man`页面：

```
NAME
       scanf,  fscanf, sscanf, vscanf, vsscanf, vfscanf 

       ...

RETURN VALUE
       These functions return the number of input items  successfully  matched
       and assigned, which can be fewer than provided for, or even zero in the
       event of an early matching failure.

       The value EOF is returned if the end of input is reached before  either
       the  first  successful conversion or a matching failure occurs.  EOF is
       also returned if a read error occurs, in which case the error indicator
       for  the  stream  (see ferror(3)) is set, and errno is set indicate the
       error. 
```

在您的情况下，`scanf()`可以返回`0`,`1`或`EOF`.

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-06T10:05:43.220

从[scanf](http://www.cplusplus.com/reference/clibrary/cstdio/scanf/)：

> 成功时，该函数返回成功读取的项目数。如果发生匹配失败，此计数可以匹配预期的读数数量或更少，甚至为零。如果在成功读取任何数据之前输入失败，则返回 EOF。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-06T10:10:25.310

从技术上讲，这是 UB（未定义行为）。

```
int g;
int p=scanf("%d",g);
                 ^ 
```

您将一个未初始化的整数传递给 scanf 以将其用作要写入的地址。从这一点开始，任何事情都可能发生。您的应用程序很可能会崩溃。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-12T13:37:48.930

它将返回 1，因为 scanf 返回成功读取的项目数

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-10-12T18:56:20.020

无论您在 VDU 输入中给出什么，都会进入变量`g`，如果成功读取，则`p`等于 1。

# php - 将加载进度添加到 AJAX url fetch

> ID：10469651
> 
> 赞同：0
> 
> 时间：2012-05-06T09:59:17.890
> 
> 标签：php, javascript, jquery, ajax

如果可以将加载进度（即 67%）添加到我的 AJAX url fetch 中，我是否可以添加到下面的代码中？：

```
 function update() {
          $("#notice_div").html('<font color="yellow">Henter data fra <?php echo $storeName; ?>..'); 
          $.ajax({
            type: 'GET',
            url: 'getOrders.php?gs=<?php echo $_SESSION['store'] ?>',
            timeout: 2000,
            success: function(data) {
              $("#orders").html(data);
              $("#notice_div").html('<font color="green">OK</font>'); 
              window.setTimeout(update, 10000);
            },
            error: function (XMLHttpRequest, textStatus, errorThrown) {
              $("#notice_div").html('<font color="red">Det lykkedes ikke at kontakte server..</font>');
              window.setTimeout(update, 60000);
            }
        });
        } 
```

一边说“Henter data fra: ... (67%)”等

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T10:18:33.350

它在某些情况下是可能的，但对于这种精简操作是不可行的。您是否希望进度条指示上传表单数据的进度？或者您想指示下载响应数据的进度？如果您要上传一些文件，是的，您可以进行并行查询，该查询将为您提供间隔时间。但是对于这种小的通信开销，大多数时候它是来自服务器端的处理延迟，除非您知道处理的不同阶段，否则很难设计进度中继。

它与 PHP 或您正在使用的客户端库无关。您需要设计双方，并且在所有其他语言中都是类似的任务

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T10:23:47.847

如果我没记错的话，你不能单独使用 JQuery 来完成它，因为它无法访问浏览器的请求数据。

唯一可以完成的方法是，如果您使用支持部分请求处理的后端，在这种情况下，您可以同时打开一个到后端的单独连接，并轮询或推送给定文件 ID 的上传进度。但是，正如我所说，PHP 不支持部分请求，所以你不能这样做。

# javascript-events - 使用 javascript 立即重定向

> ID：10469655
> 
> 赞同：1
> 
> 时间：2012-05-06T10:00:27.883
> 
> 标签：javascript-events

我在使用 javascript 重定向页面时遇到问题。我想在单击按钮后重定向页面，但它会自动重定向。这是为什么？

```
window.onload=initAll; 
function initAll(){
   if(window.addEventListener) {
      document.getElementById('check').addEventListener("click",redirection,false);
   } else if (window.attachEvent){ 
      document.getElementById('check').attachEvent("onclick", redirection);
   }
   function redirection(){
      window.location.href='http://www.google.com';
   }
}

<html>
   <head>
      <title></title>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
      <script type="text/javascript" src="glavna.js"></script>
   </head>
   <body>
      <div id="wrapper">
         <form action="glavna.html">City:<input id="city" type="text"/>&nbsp;&nbsp;
            Price: From:<input type="text" id="from"/>&nbsp; To:<input type="text" id="to"/>
            &nbsp;&nbsp;Refresh in min :<input type="text" id="refresh"/>
            <button id="check" >Search</button>
         </form>
      </div>
   </body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T17:58:16.037

这可以通过`window.location.href`它的功能来完成

```
// similar behavior as clicking on a link
window.location.href = "you want to redirect"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T10:04:03.080

`window.location`是位置对象。`window.location.href`改用重定向

# php - php 和 ajax 中的通知

> ID：10469666
> 
> 赞同：0
> 
> 时间：2012-05-06T10:02:42.987
> 
> 标签：php, jquery, mysql, sql, ajax

如何**整理**和**获取**用户的新通知？

**通知表** ![在此处输入图像描述](../Images/7e6f6e9091e344df80cd678119a1b7f4.png)

我这里有一个代码，可以让所有用户通知

```
 //PHP PART
    "SELECT *
     FROM notifications
     WHERE tagged_by = "12042905" and action = \"unread\"";

    //JAVASCRIPT PART
    function n() {
        $.ajax({
           url: "notifications.php",
           dataType: "json",
           success: function(responseJSON) {
             $("div").html(reponseJSON[0].notify_id)
           }
        })
    }

    setInterval("n()", 1000) 
```

但它每秒都会给我所有的通知。现在我的问题是我只想在通知表中获取新添加的行我该怎么做以及如何一次输出一个？我应该在 jQuery 中使用 .append() 还是 .insert() ？

> **注意：date_notify 语法是 ymd h:i:s 或 "2012-05-06 17:11:18"**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T10:37:59.423

您可以简单地为您的 MySQL 查询添加一个限制。

```
"SELECT *
FROM notifications
WHERE tagged_by = "12042905" and action = \"unread\"
LIMIT 1"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T08:37:16.873

```
 Your problem is, you have a timer that keep on calling your function n() every 1sec at a time
  so the output will repeat until timer keep on running. , so to avoid that problem?

  1\. The "Div" handler that will hold your ouput will empty first!
     ex.
        $("div").empty();
  2\. try to use append()

     ex. $("div").append(reponseJSON[0].notify_id);

  Hope this will help! tnx 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-06T10:51:47.467

您的问题是，您没有在发送通知后将“操作”的值从“未读”更新为“已读”。
所以解决方案很简单：在每次拉取（选择查询）之后，您应该更新刚刚选择的所有行。

同样对于列“操作”，您应该使用 0 和 1 值而不是未读和已读来优化您的数据库。

# windows - 如何解释甚至控制 MDI 应用程序打开文件的顺序？

> ID：10469669
> 
> 赞同：0
> 
> 时间：2012-05-06T10:03:05.267
> 
> 标签：windows, delphi, mdi, windows-shell

假设一个目录包含以下 16 个文件：

```
pos1_conf1_1_OS_1state_lbs.out
pos1_conf1_1_OS_3state_lbs.out
pos1_conf2_1_OS_1state_lbs.out
pos1_conf2_1_OS_3state_lbs.out
pos2_conf1_1_OS_1state_lbs.out
pos2_conf1_1_OS_3state_lbs.out
pos3_conf1_1_OS_1state_lbs.out
pos3_conf1_1_OS_3state_lbs.out
pos4_conf1_1_OS_1state_lbs.out
pos4_conf1_1_OS_3state_lbs.out
pos5_conf1_1_OS_1state_lbs.out
pos5_conf1_1_OS_3state_lbs.out
pos5_conf2_1_OS_1state_lbs.out
pos5_conf2_1_OS_3state_lbs.out
pos6_conf1_1_OS_1state_lbs.out
pos6_conf1_1_OS_3state_lbs.out 
```

如果我一次打开它们，通过“文件->打开”或“拖放”，文件将以完全随机的顺序打开。

![样本图片](../Images/f8e6e6cf4793eb81c42107bd8c1a5492.png)

应该注意的是，这种情况发生在商业软件（如 ChemDraw）和自制实用程序中。我想知道如何解释甚至控制 MDI 应用程序打开的文件的这种随机顺序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T17:49:50.247

如果我没记错的话，文件对话框首先返回带有焦点矩形的文件，然后其余文件按照对话框显示它们的顺序。您无法更改此行为，因此如果您不喜欢它，则必须对文件进行排序。

# c# - 反序列化包含日期的json字符串

> ID：10469679
> 
> 赞同：0
> 
> 时间：2012-05-06T10:05:22.137
> 
> 标签：c#, json, datetime, deserialization

我一直在看一些关于如何反序列化 json 字符串中的日期的帖子。

这些帖子提到对字符串进行替换以重新格式化日期部分。

json 字符串如下所示：

```
"/Date(1336258800000)/\" 
```

显然我需要得到的是：

```
"new Date(1336258800000)" 
```

问题是，一旦我尝试替换，或者 indexOf ')/\' 它找不到要替换的字符串（indexOf 为 -1）

谁能看到我做错了什么？

```
 JavaScriptSerializer jss = new JavaScriptSerializer();

                    //Fix an issue with Json Dates
                    string json = eventArgument.Replace( @"/Date(", "new Date(" ).Replace( @")/\", ")" );

                    int index = json.IndexOf( @")/\", 0 );

                    WorkPattern wp = jss.DeserializeObject( json ) as WorkPattern; 
```

这是完整的 json 字符串：

```
"{\"WorkPatternDays\":[{\"WorkPatternDayShifts\":[{\"WorkPatternDayShiftRates\":[{\"Duration\":8.5,\"Sequence\":0,\"WorkPatternDayShiftID\":186,\"WorkPatternDayShiftRateID\":105,\"Deleted\":false,\"UpdatedUser\":\"\",\"UpdatedDate\":\"/Date(1336258800000)/\"}],\"WorkPatternDayShiftBreaks\":[{\"PaidBreak\":true,\"Duration\":1,\"EndTime\":\"/Date(1336050000000)/\",\"StartTime\":\"/Date(1336046400000)/\",\"WorkPatternDayShiftID\":186,\"WorkPatternDayShiftBreakID\":284,\"Deleted\":false,\"UpdatedUser\":\"\",\"UpdatedDate\":\"/Date(1336258800000)/\"},{\"PaidBreak\":false,\"Duration\":0.25,\"EndTime\":\"/Date(1336058100000)/\",\"StartTime\":\"/Date(1336057200000)/\",\"WorkPatternDayShiftID\":186,\"WorkPatternDayShiftBreakID\":285,\"Deleted\":false,\"UpdatedUser\":\"\",\"UpdatedDate\":\"/Date(1336258800000)/\"}],\"Duration\":8.5,\"EndTime\":\"/Date(1336062600000)/\",\"StartTime\":\"/Date(1336032000000)/\",\"WorkPatternDayID\":186,\"WorkPatternDayShiftID\":186,\"Deleted\":false,\"UpdatedUser\":\"\",\"UpdatedDate\":\"/Date(1336258800000)/\"}],\"DayOfWeek\":1,\"DayOfWeekNumber\":1,\"WorkPatternID\":105,\"WorkPatternDayID\":186,\"Deleted\":false,\"UpdatedUser\":\"\",\"UpdatedDate\":\"/Date(1336258800000)/\"},{\"WorkPatternDayShifts\":[{\"WorkPatternDayShiftRates\":[],\"WorkPatternDayShiftBreaks\":[{\"PaidBreak\":true,\"Duration\":0.5,\"EndTime\":\"/Date(1336041000000)/\",\"StartTime\":\"/Date(1336039200000)/\",\"WorkPatternDayShiftID\":187,\"WorkPatternDayShiftBreakID\":286,\"Deleted\":false,\"UpdatedUser\":\"\",\"UpdatedDate\":\"/Date(1336258800000)/\"}],\"Duration\":5.5,\"EndTime\":\"/Date(1336046400000)/\",\"StartTime\":\"/Date(1336026600000)/\",\"WorkPatternDayID\":187,\"WorkPatternDayShiftID\":187,\"Deleted\":false,\"UpdatedUser\":\"\",\"UpdatedDate\":\"/Date(1336258800000)/\"}],\"DayOfWeek\":3,\"DayOfWeekNumber\":3,\"WorkPatternID\":105,\"WorkPatternDayID\":187,\"Deleted\":false,\"UpdatedUser\":\"\",\"UpdatedDate\":\"/Date(1336258800000)/\"}],\"WorkPatternName\":\"Naths Test Work Pattern\",\"WorkPatternID\":105,\"Deleted\":false,\"UpdatedUser\":\"\",\"UpdatedDate\":\"/Date(1336258800000)/\"}" 
```

更多信息以了解它们如何组合在一起：

后面的代码：

```
 public override void DataBind()
        {
            try
            {
                if ( this.WorkPattern != null )
                {
                    //Create a javascript serializer
                    JavaScriptSerializer jss = new JavaScriptSerializer();

                    //Get the serialised object as a json string
                    string json = jss.Serialize( this.WorkPattern );

                    //Run the jquery code
                    base.RunjQueryCode(
                        String.Format( "loadWorkPattern({0});", json ) );

                    jss = null;
                }
            }
            catch ( Exception )
            {

                throw;
            }
        }

 protected override void HandlePostbacks( string eventTarget, string eventArgument )
        {
            try
            {
                switch ( eventTarget )
                {
                    case "Save":

                        JavaScriptSerializer jss = new JavaScriptSerializer();

                        //Fix an issue with Json Dates
                        string json = eventArgument.Replace( @"/Date(", "new Date(" ).Replace( @")/\", ")" );

                        int index = json.IndexOf( @")/\\", 0 );

                        WorkPattern wp = jss.DeserializeObject( json ) as WorkPattern;

                        object o = jss.Deserialize<WorkPattern>( json );

                        break;
                    default: break;
                }

                base.HandlePostbacks( eventTarget, eventArgument );
            }
            catch ( Exception )
            {
                throw;
            }
        } 
```

标记/js：

```
function loadWorkPattern(jsonData) {

        //Store the work pattern
        _workPattern = jsonData;

        //Loop through the work pattern days
        $.each(_workPattern.WorkPatternDays, function (key, workPatternDay) {

            //Loop through each shift
            $.each(workPatternDay.WorkPatternDayShifts, function (key, workPatternShift) {
                addShift(workPatternShift, workPatternDay.DayOfWeekNumber);

                //Loop through each break
                $.each(workPatternShift.WorkPatternDayShiftBreaks, function (key, workPatternDayShiftBreak) {
                    addBreak(workPatternDayShiftBreak);
                });
            });
        });
    }

    function saveWorkPattern() {
        __doPostBack('Save', JSON.stringify(_workPattern));
    } 
```

**我在发送回服务器之前调用 JSON.stringify 来序列化存储的对象，这是我做错了什么吗？**

**更新**

这是工作代码：

```
string json = eventArgument.Replace( @"/Date(", "\\/Date(" ).Replace( @")/", ")\\/" ); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T10:07:59.437

尝试`int index = json.IndexOf( @")/\\", 0 );`- 在斜线前加上另一个斜线

**更新**

```
JavaScriptSerializer s = new JavaScriptSerializer();
string date = s.Serialize(DateTime.Now);
int index = date.IndexOf(@")\/", 0);
Console.WriteLine(index); // index = 21 
```

**更新 - 解决方案**

问题是初始字符串是`/Date(1336258800000)/`，但不是`/Date(1336258800000)/\`因为最后一个斜杠是`"`JSON 中字符的转义。并且去亚化的格式应该是不同的，所以工作解决方案是

```
string json = eventArgument.Replace( @"/Date(", "\\/Date(" ).Replace( @")/", ")\\/" ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T11:09:42.463

我使用了正则表达式，希望这不是问题。正则表达式检测`/Date(NUMBER)/\`并获取 NUMBER 作为正则表达式匹配中的一个组，因此我使用它来替换 dateTimeJson 中与在其构造函数中指定的正则表达式匹配的所有内容，并使用 new Date(NUMBER)。

```
 //the source JSON
        string dateTimeJson = "/Date(1336258800000)/\\";
        string result = "";

        //you might want to do a quick IndexOf("Date") to make sure that there is a date
        //so you won't trouble yourselve with regex computation unnecessarily. performance?

        //find Date(NUMBER) matches and get the NUMBER then use it again with new Date in the 
        //call to replace
        System.Text.RegularExpressions.MatchCollection matches = null;
        System.Text.RegularExpressions.Regex regex = null;
        try
        {
            //at the end is one forwared slash for regex escaping \ and another is the \ that is escaped
            regex = new System.Text.RegularExpressions.Regex(@"/Date\(([0-9]*)\)/\\");
            matches = regex.Matches(dateTimeJson);
            string dateNumber = matches[0].Groups[1].Value;
            result = regex.Replace(dateTimeJson, "new Date(" + dateNumber + ")");
        }
        catch (Exception iii)
        {
            //MessageBox.Show(iii.ToString());
        }
        MessageBox.Show(result); 
```

# webmatrix - 我编辑了brand.png图片，但旧的仍然出现在面包店模板中

> ID：10469685
> 
> 赞同：0
> 
> 时间：2012-05-06T10:06:14.357
> 
> 标签：webmatrix

我是 webprogramming 的初学者，刚刚开始在 Microsofts Webmatrix 中使用 Bakery 模板。我正在尝试更改布局中显示的徽标并在模板的图像文件夹中查找，只有 2 张图片，其中一张名为brand.png。我使用Paint对其进行编辑并再次保存。但是每当我从 Webmatrix 运行网站时，它都会显示不再存在的旧徽标。IIS（或默认运行的任何东西）是在做一些缓存还是发生了什么？我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T10:09:56.117

尝试 F5 或 CTRL+F5 清除缓存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T15:02:36.750

site.css 文件的第 103 行，

```
background: transparent url(../Images/brand.png) no-repeat; 
```

删除以下文字brand.png，然后按f5清除浏览器缓存

# c# - 如何暂停/恢复线程

> ID：10469687
> 
> 赞同：14
> 
> 时间：2012-05-06T10:06:24.407
> 
> 标签：c#, wpf, multithreading, resume

如何暂停/恢复线程？一旦我`Join()`一个线程，我就无法重新启动它。那么，如何在按下“暂停”按钮时启动线程并使其暂停，并在按下恢复按钮时恢复它？

该线程唯一做的就是在标签控件中显示一些随机文本。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-05-06T10:19:31.530

或许`ManualResetEvent`是个不错的选择。一个简短的例子：

```
private static EventWaitHandle waitHandle = new ManualResetEvent(initialState: true); 

// Main thread
public void OnPauseClick(...) {
   waitHandle.Reset();
}

public void OnResumeClick(...) {
   waitHandle.Set();
}

// Worker thread
public void DoSth() {
   while (true) {
     // show some random text in a label control (btw. you have to
     // dispatch the action onto the main thread)
     waitHandle.WaitOne(); // waits for the signal to be set
   }
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-06T10:18:07.390

我可以建议您阅读[Joe Albahari 的 C# 中的线程](http://www.albahari.com/threading/)，特别是[暂停和恢复](http://www.albahari.com/threading/part4.aspx#_Suspend_and_Resume)部分：

> 可以通过不推荐使用的方法 Thread.Suspend 和 Thread.Resume 显式挂起和恢复线程。这种机制与阻塞机制是完全分开的。两个系统都是独立的并且并行运行。
> 
> 一个线程可以挂起自己或另一个线程。调用 Suspend 会导致线程短暂进入 SuspendRequested 状态，然后在达到垃圾收集安全点时，它进入 Suspended 状态。从那里，它只能通过另一个调用其 Resume 方法的线程来恢复。Resume 仅适用于挂起的线程，而不适用于阻塞的线程。
> 
> 从 .NET 2.0 开始，Suspend 和 Resume 已被弃用，不鼓励使用它们，因为任意挂起另一个线程所固有的危险。如果持有关键资源锁的线程被挂起，整个应用程序（或计算机）可能会死锁。这比调用 Abort 危险得多——这会导致任何此类锁通过 finally 块中的代码被释放（至少在理论上）。

![暂停请求状态](../Images/77c296fc5d4ae6974219d92ee5d37aa5.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-06T10:21:50.750

手动挂起和恢复线程不是最好的主意。[但是，您可以通过使用线程同步原语（如ManualResetEvent](http://msdn.microsoft.com/en-us/library/system.threading.manualresetevent.aspx)）轻松模拟此行为

看看[这个问题](https://stackoverflow.com/questions/142826/is-there-a-way-to-indefinitely-pause-a-thread)，你可能会发现它很有帮助。

但我相信您可以通过使用计时器轻松实现按时间“在标签控件中显示随机文本”的目标。

这是一个使用[DispatcherTimer的快速示例](http://msdn.microsoft.com/en-us/library/System.Windows.Threading.DispatcherTimer.aspx)

```
var timer = new DispatcherTimer(); 
timer.Tick += (s, e) => Label.Text = GetRandomText(); 
timer.Interval = TimeSpan.FromMilliseconds(500); 
timer.Start(); 
```

您可以通过调用暂停它`timer.Stop()`，然后`timer.Start()`再次恢复。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-07T18:12:34.210

这里有两种对我有用的方法。两者都假设工作线程有自己的处理循环。

1.  让线程调用回调以请求继续执行的权限
2.  让父级调用线程类上的一个方法来发出信号

下面的控制台应用程序示例显示了这两种方法，使用回调来暂停/继续，以及使用工作方法来停止。回调方法的另一个优点是它还可以方便地在检查是否允许继续时传回状态更新。

```
using System;
using System.Threading;

namespace ConsoleApplication7
{
    class Program
    {
        static bool keepGoing;
        static void Main(string[] args)
        {
            keepGoing = true;
            Worker worker = new Worker(new KeepGoingDelegate(KeepGoing));
            Thread thread = new Thread(worker.DoWork);
            thread.IsBackground = true;
            thread.Start();

            while (thread.ThreadState != ThreadState.Stopped)
            {
                switch (Console.ReadKey(true).KeyChar)
                {
                    case 'p':
                        keepGoing = false;
                        break;
                    case 'w':
                        keepGoing = true;
                        break;
                    case 's':
                        worker.Stop();
                        break;
                }
                Thread.Sleep(100);
            }
            Console.WriteLine("Done");
            Console.ReadKey();
        }

        static bool KeepGoing()
        {
            return keepGoing;
        }
    }

    public delegate bool KeepGoingDelegate();
    public class Worker
    {
        bool stop = false;
        KeepGoingDelegate KeepGoingCallback;
        public Worker(KeepGoingDelegate callbackArg)
        {
            KeepGoingCallback = callbackArg;
        }

        public void DoWork()
        {
            while (!stop)
            {
                Console.Write(KeepGoingCallback()?"\rWorking":"\rPaused ");

                Thread.Sleep(100);
            }
            Console.WriteLine("\nStopped");
        }

        public void Stop()
        {
            stop = true;
        }
    }
} 
```

# ruby - 如何将带有输出选项的 curl 命令转换为 httparty？

> ID：10469691
> 
> 赞同：0
> 
> 时间：2012-05-06T10:06:42.020
> 
> 标签：ruby, curl, httparty

我正在尝试将其转换为：

```
curl -k -v -X GET -H "Accept: application/pdf" https://username:password@rest.click2mail.com/v1/mailingBuilders/456/proofs/1 -o myProof 
```

为 httparty。这是我的代码：

```
@auth = {:username => 'test', :password => 'test'}
options = {:headers => {'Accept' => 'application/pdf'}, :basic_auth => @auth }
body = HTTMultiParty.get("https://stage.rest.click2mail.com/v1/mailingBuilders/54544/proofs/1", options)

File.open("myProof", "w") do |file|
  file.write body
end

p "Reponse #{body.parsed_response}" 
```

响应返回

“无法将 urn:c2m:document:id:361 从 text/plain 转换为 application/pdf”

**编辑 (2)**

body.inspect 带有“text/plain”返回

```
#<HTTParty::Response:0x8 @parsed_response=nil, @response=#<Net::HTTPNotAcceptable 406 Not Acceptable readbody=true>, @headers={\"date\"=>[\"Sun, 06 May 2012 11:22:12 GMT\"], \"server\"=>[\"Jetty(6.1.x)\"], \"content-length\"=>[\"0\"], \"connection\"=>[\"close\"], \"content-type\"=>[\"text/plain; charset=UTF-8\"]}> 
```

带有“应用程序/pdf”

```
#<HTTParty::Response:0x7fce08a92260 @parsed_response=\"Cannot convert urn:c2m:document:id:361 from text/plain to application/pdf\", @response=#<Net::HTTPBadRequest 400 Bad Request readbody=true>, @headers={\"date\"=>[\"Sun, 06 May 2012 11:24:09 GMT\"], \"server\"=>[\"Jetty(6.1.x)\"], \"content-type\"=>[\"application/pdf\"], \"connection\"=>[\"close\"], \"transfer-encoding\"=>[\"chunked\"]}> 
```

**编辑 3**

API：第 8 步

[https://developers.click2mail.com/rest-api#send-a-test-mailing](https://developers.click2mail.com/rest-api#send-a-test-mailing)

**编辑 4**

带有 debug_ouput 选项

带有“应用程序/pdf”

```
opening connection to stage.rest.click2mail.com...
opened
<- "GET /v1/mailingBuilders/54544/proofs/1 HTTP/1.1\r\nAccept: application/pdf\r\nAuthorization: Basic Ym9sb2RldjptVW43Mjk0eQ==\r\nConnection: close\r\nHost: stage.rest.click2mail.com\r\n\r\n"
-> "HTTP/1.1 400 Bad Request\r\n"
-> "Date: Sun, 06 May 2012 14:05:30 GMT\r\n"
-> "Server: Jetty(6.1.x)\r\n"
-> "Content-Type: application/pdf\r\n"
-> "Connection: close\r\n"
-> "Transfer-Encoding: chunked\r\n"
-> "\r\n"
-> "49\r\n"
reading 73 bytes...
-> ""
-> "Cannot convert urn:c2m:document:id:361 from text/plain to application/pdf"
read 73 bytes
reading 2 bytes...
-> ""
-> "\r\n"
read 2 bytes
-> "0\r\n"
-> "\r\n"
Conn close 
```

带有“文本/纯文本”

```
opening connection to stage.rest.click2mail.com...
opened
<- "GET /v1/mailingBuilders/54544/proofs/1 HTTP/1.1\r\nAccept: text/plain\r\nAuthorization: Basic Ym9sb2RldjptVW43Mjk0eQ==\r\nConnection: close\r\nHost: stage.rest.click2mail.com\r\n\r\n"
-> "HTTP/1.1 406 Not Acceptable\r\n"
-> "Date: Sun, 06 May 2012 14:14:19 GMT\r\n"
-> "Server: Jetty(6.1.x)\r\n"
-> "Content-Length: 0\r\n"
-> "Connection: close\r\n"
-> "Content-Type: text/plain; charset=UTF-8\r\n"
-> "\r\n"
reading 0 bytes...
-> ""
read 0 bytes
Conn close 
```

从 curl 命令记录

**编辑 (4)**

好吧，我找到了 Rest Client 的解决方案，我用这个 gem 做了我的微薄贡献。

[https://github.com/bolom/click2mail-ruby-gem](https://github.com/bolom/click2mail-ruby-gem)

谢谢大家

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T10:31:13.420

您也可以使用 net::http (需要 'net/http') 有关如何下载大文件的示例，请参阅[此问题。](https://stackoverflow.com/questions/9304141/memory-issues-with-httparty-and-download-large-files)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T10:20:22.427

尝试这个：

```
body = Httparty.get("https://username:password@rest.click2mail.com/v1/mailingBuilders/456/proofs/1")

File.open("myProof", "w") do |file|
    file.write body
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T14:51:31.890

问题在于它本身的 API。

它与您如何调用 API 以获取证明或您使用的 Rest API 库无关。问题是您用来创建此 mailingBuilders 的任何内容都会导致出现错误消息“无法将 urn:c2m:document:id:361 从 text/plain 转换为 application/pdf”的问题。

请向 support@click2mail.com 发送您为创建此 mailingBuilder 所做的确切操作，以便我们查看它并查看问题所在。

# ajax - 如何在jquery ajax函数中获取codeigniter url参数

> ID：10469698
> 
> 赞同：0
> 
> 时间：2012-05-06T10:08:05.843
> 
> 标签：ajax, codeigniter, jquery, query-string

我在codeigniter中有以下网址。

```
<a href="../add-item-to-wishlist/5/21" class="wishlist_item">Add to wishlist</a> 
```

我有以下jquery函数

```
<script>
        $(document).ready(function(){
          $('body').on('click', 'a.wishlist_item', function(e){
            $.ajax({
            url:"../add-item-to-wishlist",
            data : "the query string",
                success: function(result){
                    // success code.
                }
            });
            e.preventDefault();
          });
        });
    </script> 
```

如何获取查询字符串值并传递给上面的 url？add-to-wishlist 路由重定向到一个控制器函数，该函数恰好采用两个参数。

```
function add_to_wishlist($itemID,$wishlistID = NULL) 
```

我想要做的是使用 ajax 调用这个函数，但我不知道如何使用 ajax 调用这个函数

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T11:43:18.127

将您的锚 URL 更改为控制器方法

```
href = "add_to_wishlist/5/21" 
```

然后您可以`get`使用完整的 URL 进行请求

```
<script>
    $(document).ready(function(){
      $('body').on('click', 'a.wishlist_item', function(e){
        e.preventDefault();
        var obj = $(this);
        $.ajax({
            type:'get',
            url:obj.attr('href'),
            success: function(result){
                // success code.
            }
        });

      });
    });
</script> 
```

# asp.net - IIS 默认文档重写 URL

> ID：10469700
> 
> 赞同：0
> 
> 时间：2012-05-06T10:08:16.187
> 
> 标签：asp.net, iis-7, default-document

我在 IIS 和 web.config 中都将站点[http://www.modapik.com](http://www.modapik.com)的默认文档配置为 index.aspx。但是当我点击 URL 时，浏览器会打开我完全不想要的[http://www.modapik.com/index.aspx 。](http://www.modapik.com/index.aspx)如何将 IIS 配置为仅打开[http://www.modapik.com](http://www.modapik.com)

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T11:06:22.493

您必须为此使用 URL 重写功能

# java - 如何配置 Java 优先队列以忽略重复项？

> ID：10469701
> 
> 赞同：22
> 
> 时间：2012-05-06T10:08:17.027
> 
> 标签：java, collections, priority-queue

我认为 add() 应该忽略重复，但我的输出有重复。如何不存储重复项？

我还想知道优先级队列如何检查两个元素是否重复。我猜它使用的是比较器，但我只是想确定一下。

谢谢

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-05-06T10:26:02.153

这是[PriorityQueue Javadoc](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/PriorityQueue.html)的一部分：

> 此队列根据构造时指定的顺序对元素进行排序，该顺序根据其自然顺序（请参阅 Comparable）或根据使用的构造函数指定的 Comparator 指定。

所以是的，PriorityQueue 使用 Comparator （如果您将其指定为构造函数参数）或使用 compareTo(...) 方法（元素必须实现 Comparable 接口）。

PriorityQueue 允许重复。因此，如果您想避免这种情况，您需要实现自己的 Queue 版本。[您可以在第 85 页](http://books.google.pl/books?id=Ft8t0S4VjmwC&lpg=PR1&dq=effective%20java&pg=PA84#v=onepage&q&f=false)的“Effective Java”中找到非常优雅的方法，如何做到这一点。或者，您可以扩展 PriorityQueue 类并覆盖 add 方法（这是放置 contains(...) 检查的理想场所）。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-05-06T10:20:33.987

Java 中的 A`PriorityQueue`对重复元素没有任何限制。如果要确保两个相同的项目永远不会同时出现在优先级队列中，最简单的方法是`Set`与优先级队列并行维护一个单独的项目。每次要将元素插入优先级队列时，您可以检查集合是否已经包含它，如果没有，则将其添加到集合和优先级队列中。每当您从优先级队列中删除一个元素时，也只需从集合中删除该元素。

或者，根据您打算在优先级队列上执行的操作，以及在您的情况下如何定义相等性，将其替换为单个可能是可行的，`TreeSet`因为这仍然允许您执行您将拥有的所有重要操作在优先队列中访问，同时它还不允许重复。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-10-21T08:53:02.323

以下示例实现

```
import java.util.PriorityQueue;

public class NoDuplicates<E> extends PriorityQueue<E> 
{
    @Override
    public boolean offer(E e) 
    {
        boolean isAdded = false;
        if(!super.contains(e))
        {
            isAdded = super.offer(e);
        }
        return isAdded;
    }
    public static void main(String args[])
    {
        PriorityQueue<Integer> p = new NoDuplicates<Integer>();
        p.add(10);
        p.add(20);
        p.add(10);
        for(int i =0;i<=2;i++)
        {
            System.out.println(p.poll());
        }

    }
} 
```

结果是

```
10
20
null 
```

这表明它没有添加重复元素`10`。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-05-06T10:56:18.393

集合是唯一忽略重复的东西。列表和队列没有。（LinkedList 是一个队列）

如果要删除重复项，可以检查 take() 条目是否与前一个条目相同并忽略它。您可以按照自己喜欢的方式进行比较。;)

# html - 是否可以将元素设置为仅在删除元素时显示？

> ID：10469703
> 
> 赞同：0
> 
> 时间：2012-05-06T10:08:18.743
> 
> 标签：html

出于打印目的，我删除了 IMG 元素，但我希望在删除 IMG 元素时在站点的另一部分显示 H1 元素。

这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T10:25:39.533

您可以为此使用 CSS[媒体类型](http://www.w3.org/TR/CSS2/media.html)。

不要认为它是在删除另一个元素时揭示一个元素；而是将其视为有选择地显示元素，具体取决于它们是用于打印还是用于屏幕。

这是一个例子：

```
<!DOCTYPE html>
<html>
<head>
<style>
@media print {
    .screenonly { display: none; }
}
@media screen {
    .printonly { display: none; }
}
</style>
</head>
<body>
<h1 class=printonly>Header for print</h1>
<h1 class=screenonly>Header for screen</h1>
</body>
</html> 
```

将此保存到文件并在浏览器中查看，您只会看到“屏幕标题”。打印同一页，您将看到“打印页眉”。

这种技术适用于任何元素，并可用于为打印或屏幕设置任何 CSS 样式。

# java - 在项目之间共享常量

> ID：10469705
> 
> 赞同：0
> 
> 时间：2012-05-06T10:08:24.350
> 
> 标签：java, constants, project-structure

我有两个java项目；一个服务器项目和一个客户端项目。在两者之间的网络代码中，我发送请求。我不想在代码中为不同类型的请求键入 0、1、2，所以我改用常量。我的问题是我不想在两个项目中声明这些常量，而是在一个地方声明，因为两个项目的常量相同。有谁知道一个好的解决方案？

编辑：客户端项目是一个 android 应用程序，服务器是一个 servlet，它应该处理来自客户端的请求。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-06T10:11:22.480

创建一个带有接口的库项目。这个接口声明了常量。在两个项目中共享这个库。如果你在 maven 中使用一些依赖管理，这很容易。

编辑：

[使用http://en.wikipedia.org/wiki/Constant_interface](http://en.wikipedia.org/wiki/Constant_interface)中描述的最终类更好！但核心是，使用一个库项目并在一个单独的 jar 中共享两个项目的公共部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T10:16:56.167

我不知道你的架构，但如果客户端调用服务器，你已经在这里有了依赖。

因此，您应该将服务器项目作为依赖项添加到客户端项目中。然后您可以在包含常量的服务器项目中定义一个类（或者在您的情况下可能是一个枚举）。这是它所属的地方，因为服务器提供了这些方法。

# python - 如何获得加入词的len？

> ID：10469707
> 
> 赞同：-2
> 
> 时间：2012-05-06T10:08:45.140
> 
> 标签：python

```
join_word = ' '.join(word)
len_join_word = len(join_word) 
```

我试图获得 join_word 的 len 但它什么也没打印出来。

获得join_word的len的任何可能方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T10:14:04.467

你做对了：

```
In [1]: word=['a', 'sdfs', 'sdfsdfsfs']

In [2]: join_word = ' '.join(word)

In [3]: len_join_word = len(join_word)

In [4]: print(len_join_word)
16 
```

> 我试图获得 join_word 的 len 但它什么也没打印出来。

您可能什么都看不到，因为您没有打印出结果。尝试`print(len_join_word)`在最后添加。

# javascript - jQuery Countdown 插件 - 仅显示非零句点

> ID：10469714
> 
> 赞同：4
> 
> 时间：2012-05-06T10:09:41.990
> 
> 标签：javascript, jquery, countdown, period, countdowntimer

我正在使用 jQuery 倒计时插件编写倒计时。

我只希望它显示活动（“非零”）期间，例如，而不是

*剩余时间：0 天 0 小时 13 分钟 20 秒*

它应该只显示

*13 分 20 秒。*

我的代码是：

```
$('#countdown').countdown({
    expiryUrl:'index.php?show=main', 
    expiryText: 'EXPIRED', 
    until: timeleft, 
    layout:'{d<}{dn} {dl} and {d>}{h<}{hn} {hl}, {h>}{m<}{mnn} {ml}, {m>}{s<}{snn}{sl}{s>}'
}); 
```

但问题是，使用此代码它隐藏了“天”期间，而不是“小时/分钟”

所以目前我得到这个：

*剩余时间：0 小时 10 分钟 27 秒*

我该怎么做才能隐藏所有零句点？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T11:08:30.797

您好，请参阅此处添加 2 个 jsfiddle 以向您展示差异：http: [//jsfiddle.net/8JJ9B/6/](http://jsfiddle.net/8JJ9B/6/)（只有几秒钟会出现**注意**，当您将`**format**`倒计时选项设置为小写时会发生这种情况）**和** [http://jsfiddle .net/8JJ9B/4/](http://jsfiddle.net/8JJ9B/4/)（也会出现零，因为我将格式选项设置为大写字符）**更新** [http://jsfiddle.net/cUW4M/](http://jsfiddle.net/cUW4M/)

为了避免出现任何非零值倒计时插件有一个`format:`名为`options as lower case character`

**进一步** [http://keith-wood.name/countdownRef.html#format](http://keith-wood.name/countdownRef.html#format)

> [引用]**格式**选项 == ...对强制句点使用大写字符，或对可选句点使用相应的小写字符，即仅在非零时显示。一旦显示了一个可选句点，之后的所有句点也会显示...[取消引用]

**代码**

```
$('#highlightCountdown').countdown({until: 0, format: 'hmS',onTick: highlightLast5}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-30T16:21:46.077

@Tats_innit 答案的简化版本（所有正确信息都在评论和 jsfiddles 中）：结合**格式**和**布局**参数是关键。

```
$('#mytimer').countdown({
    until: timerEnd, 
    compact: true,
    format: 'dhMS',
    layout: '{d<}{dn} days {d>}{h<}{hn}{sep}{h>}{m<}{mnn}{sep}{m>}{s<}{snn}{s>}'
}); 
```

这会酌情产生：

**4天22:16:01**

**11:12:13**

**06:05**

**00:01**

# sql - SQL、GROUP BY 和 INNER JOIN

> ID：10469715
> 
> 赞同：1
> 
> 时间：2012-05-06T10:09:47.963
> 
> 标签：sql, sql-server, join

除了这个问题：[SQL 和 SUM 中的比较](https://stackoverflow.com/questions/10460755/comparing-in-sql-and-sum)

我需要更多帮助。在这一点上，我有一个视图（我们称之为内部连接视图），它使用一个内部连接来连接两个表。这可以。然后我有另一个视图，它使用 SUM+GROUP BY 来总结来自内部连接视图的一些数据，这很好。但是，现在我需要来自与 group by 没有任何关系的内部连接视图中的数据。那有意义吗？我不能只选择它然后对其进行分组，因为这会产生错误的计算。

我怎么能解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T07:02:59.220

要在一个 SELECT 中使用“分组”和“非分组”数据，您可以使用“PARTITION BY”标签：http: [//www.adp-gmbh.ch/ora/sql/analytical/index.html](http://www.adp-gmbh.ch/ora/sql/analytical/index.html)

# objective-c - 实例变量声明错误？

> ID：10469719
> 
> 赞同：0
> 
> 时间：2012-05-06T10:09:57.500
> 
> 标签：objective-c

我的实例变量 secondNumber 没有声明自己。为什么不？（我是编程新手，所以请多多包涵。）在 Xcode 中，错误提示：“Parse Issue: Expected ';' 在声明列表的末尾。

```
//  main.m
//  Subtraction
//
//  Copyright 2012 __MyCompanyName__. All rights reserved.
//

#import <Foundation/Foundation.h>

@interface NumberSub: NSObject

{
int firstNumber
int secondNumber
int result 
}
-(void) print;
-(void) setFirstNumber: (int) f;
-(void) setSecondNumber: (int) s;
-(void) resetAll;
-(void) printResult;
@end

@implementation NumberSub

-(void) setFirstNumber: (int) f;
{
firstNumber = f;
}

-(void) setSecondNumber: (int) s
{ 
secondNumber = s;
}

-(void) print
{
NSLog(@"%i - %i = ", firstNumber, secondNumber);

}

-(void) printResult
{
NSLog(@"%i", firstNumber - secondNumber);
}

-(void) resetAll
{
firstNumber = 0;
secondNumber = 0;
}

@end

int main (int argc, char *argv[])
{
NumberSub *subtractNumber = [[NumberSub = alloc]init];

[subtractNumber setFirstNumber: 10];
[subtractNumber setSecondNumber: 5];

[subtractNumber print];
[subtractNumber printResult];

[subtractNumber release];   
return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T10:11:57.947

你忘了 ; 在每行的末尾

```
@interface NumberSub: NSObject

{
    int firstNumber;
    int secondNumber;
    int result ;
} 
```

# c# - 如何在文本在窗口中换行的文本中插入硬换行符？

> ID：10469722
> 
> 赞同：-1
> 
> 时间：2012-05-06T10:10:02.697
> 
> 标签：c#, windows

这个问题始于有人想将 Word 文档中的每一个明显的“文本行”导入 Excel 工作表中的一行，但我确信如果没有一些开发，这是不可能的。

我想在窗口中显示字符串时在每个点插入一个换行符（无论可能配置为什么）。我怎样才能做到这一点？我想我需要查询窗口并获取其文本行的数组，然后计算每行中的字符，并在原始字符串中，在为该行显示的字符数之后插入换行符。

我当然意识到更改窗口大小将使我询问如何编写的这段代码的所有工作无效，但这不是一个相关的问题。

**有用的信息：** 我找到了原始 Word 到 Excel 导出问题的解决方案。当您将 Word 文档另存为文本文件时，在“保存”对话框中单击“**保存”***后*，您将看到另一个对话框，其中包含插入换行符的选项。

 *** * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T19:18:37.203

您可以做的是获取显示控件的宽度和它正在使用的字体，然后用于[`GetTextMetrics`](http://msdn.microsoft.com/en-us/library/dd144941%28v=vs.85%29.aspx)获取可用于找出每个字符宽度的[`TEXTMETRIC`结构。](http://msdn.microsoft.com/en-us/library/dd145132%28v=vs.85%29.aspx)这是非常复杂的，因为它考虑了所有不同的角色配置文件。

一个更简单的方法是使用[`GetTextExtentPoint32`](http://msdn.microsoft.com/en-us/library/dd144938%28VS.85%29.aspx)它，给定一个字符串和字体属性，将返回其宽度（以像素为单位）。`GetTextExtentPoint32`因此，您可以粗略估计换行符的位置，在该子字符串上调用此函数，并在结果刚好小于文本控件的宽度时插入换行符。

干杯。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T19:41:25.087

你可以做的是这样的：

```
int width = txtBox.width;
Graphics g = CreateGraphics();

SizeF size = g.MeasureString(myText, txtBox.Font);

if (size.Width > width)
{
    int i = 0;
    List<string> lines = new List<String>();
    string str = "";
    while (i<myText.Length)
    {

        str = str + myText.SubString(i,1);
        int w = (int)(g.MeasureString(str, txtBox.Font).Width);
        while (w<width && i<myText.Length)
        {
             i++;
             str = str + myText.SubString(i,1);
        }
        str = str + '\n';
    }

    // str now contains your newline formatted string
    return str;
}
return myText; 
```**

# javascript - Javascript：传递一个特殊的参数

> ID：10469727
> 
> 赞同：3
> 
> 时间：2012-05-06T10:10:36.997
> 
> 标签：javascript, arguments

我记得遇到过这个问题的解决方案。如果我没记错的话，这种类型的论点有一个特殊的术语。但我只是不记得它到底是什么。我尝试在网上搜索它但无济于事..所以它来了：

**我想传递一个由函数组成的参数。**我应该怎么办？

```
function meow(cat){
    var z = $("#nyan").position().cat;
    alert(z);
}

meow(left); 
```

或者

```
function meow(cat){
    var z = $("#nyan").cat();
    alert(z);
}

meow(height); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T10:13:47.703

这不是一个功能。它看起来更像是您想要一个属性的名称。

我只是想给你一些建议，看看你最喜欢哪一个。

```
function meow(cat) {
    var z = $("#nyan").position()[cat];
    alert(z);
}

meow("left"); 
```

... 或者 ...

```
function meow(cat) {
    var z = $("#nyan")[cat]();
    alert(z);
}

meow("height"); 
```

...或者，真正使用一个函数：

```
function meow(getter) {
    var z = getter($("#nyan"));
    alert(z);
}

meow(function(nyan) { return nyan.position().left });
meow(function(nyan) { return nyan.position().top });
// etc. 
```

**编辑**：最重要的是这`a.b`相当于——`a["b"]`注意后者中的引号。

因此，如果您想要`a.x`if `width`is`true` *或* `a.y`if `width`is `false`，例如：

```
var result = a[width ? "x" : "y"]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T10:15:43.150

您可以`call`用来调用作为参数传递的函数：

```
function meow(cat) {
    var z = cat.call($("#nyan"));
    alert(z);
}

meow($.fn.height); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-06T10:23:04.343

给定的解决方案将起作用，但如果您希望函数同时接受属性/属性和函数，它们将不起作用。

尝试这个：

```
function meow(cat){
  var z = typeof cat == 'function' ? $("#nyan").[z]() : $("#nyan")[z];
  alert(z);
}

meow(left); 
```

修改它以满足您的需求。

# javascript - JAVASCRIPT --> 为什么我会收到错误消息“Uncaught TypeError: number is not a function”？

> ID：10469729
> 
> 赞同：0
> 
> 时间：2012-05-06T10:10:45.413
> 
> 标签：javascript, google-maps-api-3

我想知道为什么我收到错误消息 (Uncaught TypeError: number is not a function) ，这是我的代码：

```
<script type = "text/javascript">
  function dataparse(points)
   {
      points = points.substr(0, points.length - 1);
      var linar = points.split("\n");
      // Break each point by line break
      var wrkar = [];
      var pntar = [];
      for (var i = 0; i < linar.length; i++)
      {
          wrkar = linar[i].split(",", 2);
          // Break each point into x and y
          pntar.push(new google.maps.LatLng(parseFloat(wrkar[0]), parseFloat(wrkar[1])));
      }
      return pntar;
  }

  var cd = [
  (30.40545181622765, -9.582610613708539)
  (30.405229737948233, -9.577975756530805)
  (30.40300892737293, -9.577546603088422)
  (30.402268645956614, -9.584241396789594)
  ];

  var df = dataparse(cd);
  alert('df'); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-06T10:20:48.403

`(30.40545181622765, -9.582610613708539)`评估为`-9.582610613708539`

连同下一行，它被解释为

`-9.577975756530805(30.405229737948233, -9.577975756530805)`

这当然失败了，因为`-9.577...`它不是一个函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T10:22:48.900

1.  您的`dataparse`函数需要一个字符串，给定`points.substr(0,points.length - 1)`
2.  您将 cd 初始化为一个数组，但解析器尝试`(num1, num2) (num3, num4)`作为一个函数执行（原因参见 GGG 的答案）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-06T10:14:13.343

由于`cd`变量而引发错误。您使用括号，但它是不正确的。按照您的`dataparse`方法`cd`变量应该如下所示：

```
var cd = "30.40545181622765, -9.582610613708539\n"+
    "30.405229737948233, -9.577975756530805\n"+
    "30.40300892737293, -9.577546603088422\n"+
    "30.402268645956614, -9.584241396789594"; 
```

**更新**：但是，您可以以更漂亮的形式重写代码：

```
function dataparse(points) {
    var pntar = [];
    for (var i = 0; i < points.length; i++) {
        pntar.push(new google.maps.LatLng(points[i][0], points[i][1]));
    }
    return pntar;
}

var cd = [
    [30.40545181622765, -9.582610613708539],
    [30.405229737948233, -9.577975756530805],
    [30.40300892737293, -9.577546603088422],
    [30.402268645956614, -9.584241396789594]
    ];

var df = dataparse(cd);
alert(df); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-06T10:23:27.223

您的点数组无效。您必须对点本身使用方括号并用逗号分隔它们

```
var cd = [
    [30.40545181622765, -9.582610613708539],
    [30.405229737948233, -9.577975756530805],
    [30.40300892737293, -9.577546603088422],
    [30.402268645956614, -9.584241396789594]
]; 
```

并且您还必须修改（简化）您的`dataparse`函数以正确处理数组

```
function dataparse(points) {
    var i,
        length,
        pntar = [];

    for (i = 0, length = points.length; i < length; i++) {
        pntar.push(new google.maps.LatLng(points[i][0], points[i][1]));
    }

    return pntar;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-06T10:23:38.010

你得到了这个，因为括号中的每个数字都被评估，你应该用你的函数接受的正确参数替换它......因为你正在使用`substr`，但实际上你想传递一个数组，你应该向你的函数添加一些代码以及：

```
function dataparse(pairs)
{
    for ( i=0; i < pairs.length ; i++ ) {
       var wrkar = pairs[i].split(", ",2);
       var pntar = [] ;
       pntar.push( new google.maps.LatLng(parseFloat(wrkar[0]), parseFloat(wrkar[1])) ); 
       return pntar;
    }    
}

var cd = [
        "30.40545181622765, -9.582610613708539",
        "30.405229737948233, -9.577975756530805",
        "30.40300892737293, -9.577546603088422",
        "30.402268645956614, -9.584241396789594"
];

var df = dataparse(cd);
alert('df');​ 
```

这是一个 jsfiddle [http://jsfiddle.net/ptQfc/](http://jsfiddle.net/ptQfc/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-06T10:25:44.087

**第一个错误：**

```
var cd = [
            (30.40545181622765, -9.582610613708539)
(30.405229737948233, -9.577975756530805)
(30.40300892737293, -9.577546603088422)
(30.402268645956614, -9.584241396789594)
]; 
```

Javascript 数组必须用逗号而不是换行符分隔！

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-06T10:30:20.857

您误解了所需的语法，它导致了一大堆错误，即试图将您的变量解释为一个函数。

在 Javascript 中，`var=[val,val2]`构造创建一个数组。您正在尝试将括号的内容视为字符串，并将其拆分。

存储数组的更好方法是：

```
var cd = [
    [30.40545181622765, -9.582610613708539],
    [30.405229737948233, -9.577975756530805],
    [30.40300892737293, -9.577546603088422],
    [30.402268645956614, -9.584241396789594]
]; 
```

然后你的函数可以写成：

```
function dataparse(linar) {
    var wrkar = [] ;
    var pntar = [] ;
    for (var i = 0; i < linar.length; i++) {
        wrkar = linar[i];                // Break each point into x and y
        pntar.push( new google.maps.LatLng(parseFloat(wrkar[0]),parseFloat(wrkar[1]))); 
    }
    return pntar ;
} 
```

与`linar`数组数组一样，每次循环遍历数组时，它都会将下一个数组设置为 的值`wrkar`，从而为您提供`x`和`y`坐标。

# asp.net - ASP.Net MVC 控制器和视图交互

> ID：10469730
> 
> 赞同：0
> 
> 时间：2012-05-06T10:10:52.757
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3, asp.net-mvc-2

`MVC application`我使用以下模板创建了一个示例。

> ASP.NET MVC2 空 Web 应用程序

然后 a 添加了 a`Controller`的名称`First`和 a 右键单击`ActionResult`​​添加 a `View`。

我`http://localhost:49565/First`在浏览器中输入。

**询问**

控制器如何在内部知道当我们键入时将显示特定页面`http://localhost:49565/First`？

此外，如果我为一个`Controller`. 系统将如何决定优先显示哪一个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T10:30:15.077

控制器由 MVC 框架调用，该框架使用 Global.asax.cs 中定义的路由来确定要调用的控制器和操作。有一个如下所示的默认路由：

```
routes.MapRoute(
    "Default", // Route name
    "{controller}/{action}/{id}", // URL with parameters
    new { controller = "Home", action = "Index", id = UrlParameter.Optional } // Parameter defaults
); 
```

当应用程序收到请求时，会尝试将 URL 解析为路由的格式。如果向 发出请求`http://localhost:49565/`，它将使用默认值，该默认值将用于`Index`名为 的控制器中的操作`HomeController`。当您创建新的控制器时`FirstController`， 和 call `http://localhost:49565/First`，它使用`FirstController`代替 ，`HomeController`因为它已被提供（但仍用于`Index`操作）。

此外，当一个动作被调用并且没有明确定义视图时，它将寻找一个与被调用动作同名的视图。在你的情况下，它会是`~/Views/First/Index.aspx`.

**编辑**

如果你想使用另一个视图，你可以在 return 语句中指定它

```
return View("OtherView"); 
```

它将`~/Views/First/OtherView.aspx`改为使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T10:28:19.610

看看[这个](http://www.simple-talk.com/dotnet/.net-framework/an-introduction-to-asp.net-mvc-extensibility/)博客文章让你知道它是如何完成的

# c# - 在 sharepoing 2010 中运行 Interop COM

> ID：10469736
> 
> 赞同：0
> 
> 时间：2012-05-06T10:12:00.863
> 
> 标签：c#, .net, sharepoint, com

我有一个 Com Component DLL，我使用它在 SysWOW64 中注册`Regsvr32.exe`

我制作了一个示例 Windows 应用程序来检查组件的功能，它运行良好我只需将平台目标更改为 x86，因为如果我选择任何 CPU 或 x64，它会抛出此异常：

```
Retrieving the COM class factory for component with CLSID {00853A19-BD51-419B-9269-2DABE57EB61F} failed due to the following error: 80040154. 
```

任何方式对我来说都不是问题，因为我将目标平台更改为 x86，但是当我将该 DLL 与 SharePoint 2010 集成时出现问题，因为你们知道 SharePoint 必须在 x64 平台上下文中运行，所以再次抛出相同的异常，我不知道如何解决这个问题，所以我回到我的示例应用程序并将平台目标更改为 x64 以尝试产生相同的问题，现在我试图找到另一种方法来修复它而不将平台目标更改为 x86

有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T10:31:29.047

[这修复了它！](http://blogs.technet.com/b/meamcs/archive/2012/03/05/referencing-32-bit-com-components-in-sharepoint-2010-after-upgrade-from-sharepoint-2007.aspx)

# c# - 如何在 C# 中使用“OnNavigationTo”

> ID：10469740
> 
> 赞同：0
> 
> 时间：2012-05-06T10:12:51.103
> 
> 标签：c#, windows-phone-7

我是一名初学者 WP7 应用程序程序员。现在，我从 App Hub 学习 XAML 和 C#。

因此，我尝试从 App Hub 学习示例，但即使我从 App Hub 复制示例，我的程序也无法运行。我的程序如下：

```
protected override void OnNavigatedTo(System.Windows.Navigation.NavigationEventArgs e)
{
    base.OnNavigatedTo(e);
    string msg = "";
    if (NavigationContext.QueryString.TryGetValue("msg", out msg))
        MyTBl.Text = msg;
} 
```

我有对象`MyTB1`，但失败的名称仍然出现。
我需要违抗对象还是其他失败？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T10:53:25.580

您似乎需要在页面的 xaml 布局中使用 x:Name="MyTB1" 或其他具有 Text 属性的控件来使用 TextBlock 控件。祝你好运。

# android - 在 Android 上使用 Google 地图进行路由

> ID：10469749
> 
> 赞同：1
> 
> 时间：2012-05-06T10:15:07.807
> 
> 标签：android, google-maps

我正在构建一个 Android 应用程序，我想实现 Google Maps Api 以启用从 A 点到 B 点的路由。到目前为止，我已经设法实现了 Google 地图并将其显示在应用程序上，如果有人可以解释如何做添加“方向”，那就太好了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T10:17:29.433

使用意图

```
String uri = "http://maps.google.com/maps?saddr=" +sourcelat+","+sourcelon+"&daddr="+destlat+","+destlon;
Intent intent = new Intent(android.content.Intent.ACTION_VIEW, Uri.parse(uri));
intent.setClassName("com.google.android.apps.maps", "com.google.android.maps.MapsActivity");
startActivity(intent); 
```

还有一个使用代码 下载[源代码](http://www.mediafire.com/download.php?t8idm6zapac7cal)

# iphone - 希伯来语中的 Apple 推送通知显示为“？？？？？？？？？”

> ID：10469751
> 
> 赞同：0
> 
> 时间：2012-05-06T10:15:18.913
> 
> 标签：iphone, ios, encoding, windows-server-2008, apple-push-notifications

我有一个 iPhone 应用程序，它从 Windows 服务器获取推送通知以及通过 HTTP 获取的其他数据，我通过 HTTP 获取的数据在屏幕上看起来不错，但推送通知仅显示问号，我尝试将其编码为 UTF-8 , ASCII 但我仍然得到问号，我的 iPhone 配置为希伯来语，我有一个 he.lproj 文件，没有 en 文件

有人有想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T03:41:30.597

知道什么是错误，我使用基于[Moon-Apns](https://github.com/arashnorouzi/Moon-APNS)的推送通知服务器，在检查源代码后，我发现他们正在将所需的字符编码为 UTF-8 ......但他们不使用他们编码的字符串，他们将原始字符串传递给 apn，所以我修复了它，现在一切都很好，谢谢大家的帮助！如果有人需要这个修复我很乐意指出它并给出代码

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T12:26:24.187

在我看来，您的服务器端对希伯来语的编码不正确。尽量确保服务器响应正确。我在使用俄语编码时遇到了同样的问题，只有当我们将 php 响应代码设置为 UTF-8（不是默认设置的 Latin1）时才解决。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-06T10:37:05.737

使用 nslog 查看 pushnotification 和 appdelegate didreceive 远程通知方法中接收到的数据，如果没有数据，那么您在服务器端有问题，可能是在正确的参数分配给通知对象

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-06T12:24:48.247

确保发送站点和接收站点的编码相同（例如 UTF8）。

对于我的具体帮助，您的代码是必要的。

如果您无法使用 NSLog() 打印非拉丁文本，[这个问题](https://stackoverflow.com/questions/10162355/how-do-i-log-russian-text-or-non-latin/10162587#10162587)可能会对您有所帮助。

# mysql - 如何找到具有某些属性的所有产品？

> ID：10469754
> 
> 赞同：0
> 
> 时间：2012-05-06T10:15:41.540
> 
> 标签：mysql

我在 MySQL 表中列出产品属性，其中每一行都包含一个产品 ID`prod`和一个属性 ID `prop`。如果产品具有三个属性，则该产品会产生三行。示例表：

```
prod | prop
-----+-----
1    | 1
2    | 1
2    | 2
2    | 3
3    | 2
3    | 4 
```

我怎样才能找到哪些产品同时具有属性#1 和#2（产品#2）？

我能想到的唯一方法是每个属性一个选择和内部连接，但我认为这将非常低效。它是一个网站的搜索功能，必须适用于表中的 10k 行和 10 个请求的属性。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T10:17:37.523

```
 SELECT prod
    FROM tbl
   WHERE prop IN (1, 2)
GROUP BY prod
  HAVING COUNT(*) = 2 
```

如果总是要找到 2 个属性 - 那么`INNER JOIN`效率会更高：

```
 SELECT t1.p
      FROM tbl t1
INNER JOIN tbl.t2 ON t2.prod = t1.prod
                 AND t2.prop = 2
     WHERE t1.prop = 1 
```

此查询尽可能高效的推荐索引是复合索引`(prop, prod)`

# jquery - 发生错误时强制每个人停止

> ID：10469761
> 
> 赞同：1
> 
> 时间：2012-05-06T10:16:12.570
> 
> 标签：jquery, each

当我找到我要找的东西时，我怎么能强制 $.each(arr, callback(key,value){...}) 停止？

如果我能做到这一点，我可以停止并使用找到的最后一个值进行回调吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-06T10:17:11.370

只需在回调中返回 false 即可。

例如

```
var map = { 
  'flammable': 'inflammable', 
  'duh': 'no duh' 
}; 
$.each(map, function(key, value) { 
  alert(key + ': ' + value); 
  if (key == 'flammable') {
     //Do your result processing here (e.g. call another function)
     return false; //found
  }
}); 
```

# java - 令牌上的类型语法错误，错误的构造

> ID：10469763
> 
> 赞同：0
> 
> 时间：2012-05-06T10:16:45.370
> 
> 标签：java

```
package list;

public class LinkedList implements List {

    //Datenfeld
    private Element item;

    //Zeigerfeld
    private LinkedList next;

    //Konstruktor, erzeugt leere Liste
    public LinkedList() {
        item = null;
        next = null;
    }

    //Selektoren
    public Object getItem() {
        return item;
    }

    public LinkedList next() {
        return next;
    }

    //ist die Liste leer?
    public boolean isEmpty() {
        return next == null;
    }

    public Object firstElement() {
        if (isEmpty()) 
            return null;
        else
            return next.item;
    }

    public int length() {
        if (isEmpty())
            return 0;
        else
            return 1 + next.length();
    }

    //fügt x am Kopf ein
    public LinkedList insert(Element x) {
        LinkedList l = new LinkedList();
        l.item = x;
        l.next = next;
        next = l;
        return this;
    }

    //hängt das x ans Ende der Liste und liefert Teilliste
    public LinkedList append (Element x) {
        if (isEmpty())
            return insert(x);
        else
            return next.append(x);
    }

    //liefert Null, falls x nicht in Liste
    //sonst Teilliste
    private LinkedList find(Element x) {
        if (isEmpty()) 
            return null;
        else
            if (firstElement().equals(x))
                return this;
            else
                return next.find(x);
    }

    //entfertn erstes x der Liste
    public LinkedList delete(Element x) {
        LinkedList l = find(x);
        if (l != null)
            return l.next = l.next.next;
        else
            return this;
    }

    //entfernt das erste Element der Liste
    public LinkedList delete() {
        if (!isEmpty()) 
            next = next.next;
        return this;    
    }

    public boolean isInList(Element x) {
        return(find(x) != null);
    }

    public String toString() {
        return (next == null ? " |--" : " --> " + next.item + next);
    }

    static void println(Element x) {
        System.out.println(x.toString());
    }

    public LinkedList add(Element x, int n) {
        return null;
    }

    public LinkedList remove(int n) {
        return null;
    }

    public Element get(int n) {
        return null;
    }

    public int firstIndexOf(Element x) {
        return 1;
    }

    public int lastIndexOf(Element x) {
        return 1;
    }

    LinkedList l1 = new LinkedList();

    l1.insert("AA");
} 
```

在最后一行`(l1.insert("AA");`我得到了错误

```
Type Syntax error on token(s), misplaced construct(s). 
```

需要帮忙。找不到问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-06T10:19:36.400

在方法之外，您不能有这样的随机语句。您需要将该语句放在一个方法中，或者构建一个使用您的链表并进行插入的类。

# ruby - RVM：在 Snow Leopard 上安装 libyaml 包时遇到问题

> ID：10469766
> 
> 赞同：1
> 
> 时间：2012-05-06T10:17:05.677
> 
> 标签：ruby, rvm, yaml

我在 Mac OS 10.6.8 上使用 RVM 1.13.4 和 XCode 3.2.6。对 Snow Leopard 的升级是最近才出现的，我相信那是我开始遇到这个问题的时候。

当我运行时`rvm pkg install libyaml`，我收到以下错误：

```
Fetching yaml-0.1.4.tar.gz to /Users/tsherif/.rvm/archives
Extracting yaml-0.1.4.tar.gz to /Users/tsherif/.rvm/src
Prepare yaml in /Users/tsherif/.rvm/src/yaml-0.1.4.
Configuring yaml in /Users/tsherif/.rvm/src/yaml-0.1.4.
Compiling yaml in /Users/tsherif/.rvm/src/yaml-0.1.4.
Error running 'make ', please read /Users/tsherif/.rvm/log/yaml/make.log

Database file /Users/tsherif/.rvm/config/packages does not exist. 
```

不知道故事是什么`config/packages`。该`make.log`文件包含以下内容：

```
[2012-05-06 05:37:14] make 
make  all-recursive
Making all in include
make[2]: Nothing to be done for `all'.
Making all in src
/bin/sh ../libtool --tag=CC   --mode=compile /usr/bin/gcc-4.2 -DHAVE_CONFIG_H -I. -I..  -I../include   -g -O2 -MT api.lo -MD -MP -MF .deps/api.Tpo -c -o api.lo api.c
../libtool: line 787: X--tag=CC: command not found
../libtool: line 820: libtool: ignoring unknown tag : command not found
../libtool: line 787: X--mode=compile: command not found
../libtool: line 953: *** Warning: inferring the mode of operation is deprecated.: command not found
../libtool: line 954: *** Future versions of Libtool will require --mode=MODE be specified.: command not found
../libtool: line 984: libtool: warning: cannot infer operation mode from `/usr/bin/gcc-4.2': No such file or directory
../libtool: line 7011: libtool: you must specify a MODE: command not found
../libtool: line 7012: Try `libtool --help' for more information.: command not found
make[2]: *** [api.lo] Error 1
make[1]: *** [all-recursive] Error 1
make: *** [all] Error 2 
```

似乎 shell 在将参数`libtool`传递给`libtool`? 未找到命令，因此将字符串`command not found`传递给`libtool`，然后会喷出一堆`sh`尝试执行的错误输出，当然，失败了。它可能与`X`似乎添加到`--tag`and`--mode`选项的 s 有关吗？无论如何，鉴于我对`libtool`and的理解有限，这是我最好的猜测`make`。

根据我在 SO 上看到的类似问题，我尝试添加以下选项，但无济于事：

*   `--with-gcc=clang`
*   `--enable-shared`

我也尝试过`libyaml`使用 MacPorts 单独安装（没有 RVM）并从源代码编译，但都没有成功。奇怪的是，如果我在安装 Ruby 后将 Psych 作为 gem 安装，就没有问题（但我确实希望它用 Ruby 编译）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T17:08:34.220

您是否尝试过使用[Homebrew](http://github.com/mxcl/homebrew)安装？它使大多数依赖包非常容易安装，然后运行`brew install libyaml`​​.

# f# - 如何定义和使用 % 作为前缀运算符？

> ID：10469767
> 
> 赞同：5
> 
> 时间：2012-05-06T10:17:11.260
> 
> 标签：f#

```
type T() =
    static member (~%)(t : T) = t

let t = T()
let t' = %t // FAILS 
```

错误消息说`t`应该是 type `Quotation.Expr<'a>`。% 是一个所谓的[有效前缀运算符](https://stackoverflow.com/questions/2304120/f-what-are-the-valid-prefix-operators)，但是否可以实际使用它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-06T17:16:46.350

您看到此行为的原因是因为 F# 没有`(~%)`像大多数顶级运算符那样使用静态约束进行定义。它被定义为一个函数`Quotations.Expr<'a> -> 'a`。因此，您在 type 上定义的`(~%)`函数（它是 的别名）不能通过使用顶级运算符来解析。`op_Splice``T``(~%)`

您可以通过以下 FSI 交互看到这一点：

```
> <@ (~%) @>;;

  <@ (~%) @>;;
  ^^^^^^^^^^

C:\Users\Stephen\AppData\Local\Temp\stdin(5,1): error FS0030: Value restriction. The value 'it' has been inferred to have generic type
    val it : Expr<(Expr<'_a> -> '_a)>    
Either define 'it' as a simple data term, make it a function with explicit arguments or, if you do not intend for it to be generic, add a type annotation. 
```

因此，如果我们如下重新定义顶级`(~%)`运算符，那么您的示例将编译而不会出错：

```
let inline (~%) (x : ^a) = (^a : (static member op_Splice : ^a -> 'b) (x)) 
```

但请注意，引号拼接将不再起作用：

```
let x = <@ 3 @>
<@ %x @>
----^
error FS0001: The type 'Expr<int>' does not support the operator '~%' 
```

那是因为 的原始定义`(~%)`被编译器特殊处理以进行引号拼接。实际上，您可以在和签名中[看到](https://github.com/fsharp/fsharp/blob/master/src/fsharp/FSharp.Core/quotations.fsi#L49)这些类型根本没有定义任何运算符，更不用说.`Expr``Expr<'T>``op_Splice`

`&&`您可以使用和中`||`缀运算符看到类似的结果。可以重新定义（映射到`op_BooleanAnd`and `op_BooleanOr`），但除非它们是，否则编译器会对其进行特殊处理。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-06T10:29:45.113

我不确定为什么`%`操作员会这样，但您可以使用全局`let`绑定重新定义它：

```
let (~%) a = -a
%10 
```

如果无法将运算符定义为`static`成员（我不确定是否是这种情况，或者我只是遗漏了一些东西），您仍然可以定义一个`inline`调用对象的某些静态成员的定义。这应该为您提供基本相同的功能：

```
// Instead of defining static member '%', we define static member 'Percent'
type T() =     
    static member Percent(t : T) = t 

// Inline definition of '~%' that calls the static member 'Percent' of an object
let inline (~%) (x : ^T) = (^T : (static member Percent : ^T -> 'R) (x))  

// Now you can use the '%t' syntax to invoke the static member
let t = T()     
let t' = %t 
```

**背景：**在 F# 引用代码中，它用于将表达式“拼接”到另一个表达式中（以构建由另一个先前定义的表达式组成的表达式）。错误消息表明编译器没有看到您的定义。

```
let two = <@ 2 @>
let oneAndTwo = <@ 1 + %two @> 
```

# coldfusion - 如何将查询数据存储在 ColdFusion 中的变量中以备后用？

> ID：10469769
> 
> 赞同：1
> 
> 时间：2012-05-06T10:17:19.463
> 
> 标签：coldfusion, coldfusion-9, cfquery

我正在尝试为从我的表中检索到的每个项目检索和存储 ID，以便以后可以使用这些 ID。我尝试嵌套查询，但这没有奏效。这是我的第一个查询：

```
<CFQUERY datasource="MyDSN" name="MAIN2"> SELECT * from order_items where orderID= #orderID#</CFQUERY> 
```

现在，如果我输出这个查询，它会显示 1 和 117，这是我需要的两个 ID。

我的下一个查询是：

```
<CFQUERY datasource="MyDSN" name="MAIN3">select c.catalogueID,
c.product_name,
c.product_price,
c.description,
p.productID

from products p
join product_catalogue c on c.catalogueid = p.catalogueid
where p.productid = "#productID#"</CFQUERY> 
```

但它告诉我 productID 没有定义，它显然是空的。我刚刚开始使用 ColdFusion，所以我不确定存储我需要的值的最佳方式，所以我再次使用它们。我还需要循环第二个查询以针对每个 ID 1 和 117 运行两次。

任何有关如何实现这一点的建议将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T03:53:39.510

我的基本规则是，如果我发现自己使用查询来创建其他查询或循环查询以执行其他查询；现在是考虑合并查询的时候了。

我不确定您在 MAIN2 查询中使用哪个字段来提供 MAIN3 查询。所以，我在下面的查询中输入了“productID”。您可能需要更改它以适合您的字段名称。

```
<CFQUERY datasource="MyDSN" name="MAIN3">select c.catalogueID,
c.product_name,
c.product_price,
c.description,
p.productID

from products p
join product_catalogue c on c.catalogueid = p.catalogueid
where p.productid IN (SELECT DISTINCT productID from order_items where orderID= <cfqueryparam value="#orderID#" cfsqltype="CF_SQL_INTEGER">)
</CFQUERY> 
```

您还可以更改此查询以利用“连接”将 [order_items] 连接到查询。

最后，您应该`<cfqueryparam>`为 where 子句使用标签；这有助于保护您的查询免受 sql 注入攻击。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T13:33:34.517

每当我缓存数据以供以后使用时，我倾向于问自己我将如何使用这些数据，以及它是否属于另一种数据类型而不是查询。

例如，如果我想要一堆可能通过 ID 访问的数据，我可以创建一个结构，其中键是 ID，数据是数据集的另一种结构。然后我将把这个结构保存在应用程序范围内，只在需要时刷新它。这速度很快，而且比每次都查询要容易得多。当创建原始数据集的查询是一种具有大量连接、子查询、神奇的跨数据库存储过程但数据集返回实际上相当小的资源占用时，这尤其有用。

所以创建你的产品结构看起来像这样：

```
<CFQUERY datasource="MyDSN" name="MAIN3">
  SELECT 
    c.catalogueID,
    c.product_name,
    c.product_price,
    c.description,
    p.productID
  FROM products p
  JOIN product_catalogue c 
  ON c.catalogueid = p.catalogueid
  WHERE p.productid = <cfqueryparam value="#ProductID#" cfsqltype="cf_sql_integer">
</CFQUERY>

<cfset products = structNew() />
<cfset item = structNew() />
<cfloop query="MAIN3">
   <cfif NOT structKeyExists(products, productID)>
      <cfset item = structNew() />
      <cfset item.catalogueID = catalogueID />
      <cfset item.product_name = product_name />
      <cfset item.product_price = product_price />
      <cfset item.description = description />
      <cfset products[productID] = structCopy(item) />
   </cfif>
</cfloop>

<cfset application.products = structCopy(products) /> 
```

# javascript - HTML5/javascript Android 应用程序可以访问相机/录音机吗？

> ID：10469782
> 
> 赞同：0
> 
> 时间：2012-05-06T10:19:35.947
> 
> 标签：javascript, android, html

我正在考虑进入 Android 应用程序开发，我听说 HTML5 应用程序现在变得越来越流行。HTML5 + javascript 可以用于访问手机上的媒体输入，还是仅适用于 Java 应用程序？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T10:24:15.450

在纯 HTML5/JS 中，你不能。

但是，您可以使用诸如 Phonegap 之类的成名工具，它提供了 JS 库，允许您访问设备功能，例如 GPS、相机等。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-06T10:25:25.117

像 Phonegap 这样的框架通过在它支持的每个设备的 api 周围提供一个包装器来实现这一点，可以从使用它构建的 html5 应用程序中调用它。在此处查看他们的网站或[在此处](http://phonegap.com/about)查看他们的相机 api 的 api[文档](http://docs.phonegap.com/en/1.0.0/phonegap_camera_camera.md.html)。

# c# - 卸载加载的外部进程的dll

> ID：10469783
> 
> 赞同：-1
> 
> 时间：2012-05-06T10:19:36.390
> 
> 标签：c#, winapi, visual-c++

有人知道如何卸载外部进程加载的 dll 或任何其他类型的模块吗？

我试着做`GetModuleHandle`，然后`FreeLibrary`没有结果......

感谢您的所有回复

感谢您的所有回复。我在这里找到了一篇有趣的 msdn 文章：

[http://blogs.msdn.com/b/jmstall/archive/2006/09/28/managed-create-remote-thread.aspx](http://blogs.msdn.com/b/jmstall/archive/2006/09/28/managed-create-remote-thread.aspx)

问题是当我尝试执行 OpenProcess 时，外部进程崩溃。

从中卸载模块的最低进程访问权限是多少？

这是我在 c# 中尝试做的事情： [code] protected const int PROCESS_ALL_ACCESS = (STANDARD_RIGHTS_REQUIRED | SYNCHRONIZE | 0xFFF); 受保护的 const int STANDARD_RIGHTS_REQUIRED = 0xF0000; 受保护的 const int SYNCHRONIZE = 0x100000;

```
 public static bool UnloadRemoteModule(FileEntry le)
    {
        try
        {
            Process process = System.Diagnostics.Process.GetProcessById(le.ProcessID);

            if (process == null) return false;
            StringBuilder sb = new StringBuilder(le.File);

            UnloadModuleThreadProc umproc = new UnloadModuleThreadProc(UnloadModule);
            IntPtr fpProc = Marshal.GetFunctionPointerForDelegate(umproc);               

            SafeProcessHandle processHandle = null;

            IntPtr currentProcess = NativeMethods.GetCurrentProcess();
            int processId = le.ProcessID;
            bool remote = (processId != NativeMethods.GetProcessId(currentProcess));

            try
            {
                if (remote)
                {

                    MessageBox.Show("OPENING PROCESS !");
                    processHandle = NativeMethods.OpenProcess(PROCESS_ALL_ACCESS, true, processId);
                    System.Threading.Thread.Sleep(200);
                    uint dwThreadId;

                    if (processHandle.DangerousGetHandle() == IntPtr.Zero)
                    {
                        MessageBox.Show("COULD NOT OPEN HANDLE !");

                    }
                    else
                    {
                        // Create a thread in the first process.
                        IntPtr hThread = CreateRemoteThread(
                            processHandle.DangerousGetHandle(),
                            IntPtr.Zero,
                            0,
                            fpProc, IntPtr.Zero,
                            0,
                            out dwThreadId);

                        System.Threading.Thread.Sleep(200);

                        WaitForThreadToExit(hThread);
                    }

                }
                return true;
            }
            finally
            {
                if (remote)
                {                        
                    if (processHandle != null)
                    {
                        processHandle.Close();
                    }                       
                }
            }

            return false;
        }
        catch (Exception ex)
        {
            //Module.ShowError(ex);
            return false;
        }
    }

    public delegate int UnloadModuleThreadProc(IntPtr sb_module_name);

    static int UnloadModule(IntPtr sb_module_name2)
    {
        using (StreamWriter sw = new StreamWriter(@"c:\a\logerr.txt"))
        {
            sw.AutoFlush = true;
            sw.WriteLine("In Unload Module");

            StringBuilder sb_module_name =new StringBuilder(@"C:\Windows\System32\MyDll.dll");

            IntPtr mh = DetectOpenFiles.GetModuleHandle(sb_module_name.ToString());

            sw.WriteLine("LAST ERROR="+Marshal.GetLastWin32Error().ToString());

            sw.WriteLine("POINTER="+mh.ToInt32());

            if (mh != IntPtr.Zero)
            {
                return (FreeLibrary(mh) ? 1 : 0);
            }

            sw.WriteLine("LAST ERROR 2 =" + Marshal.GetLastWin32Error().ToString());
            sw.WriteLine("EXIT " + mh.ToInt32());
        }

        return 0;
    }[/code] 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-06T10:29:14.213

你可以做到，但老实说，我必须问为什么？你很可能会把事情搞砸，超出你的想象。说真的，如果你这样做，没有什么可以做对的。不要阅读这篇文章的其余部分，关闭你的浏览器，做一些冥想，然后找出你做错了什么让你问这个问题。

**这里是龙**

也就是说，它可以做到，而且相当容易。

您所要做的就是使用[`CreateRemoteThread`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682437%28v=vs.85%29.aspx)，将句柄传递给您要强制卸载的进程，并将函数指针传递给调用`GetModuleHandle`and的函数`FreeLibrary`。非常简单。

示例代码（未经测试，用vi编写，无论如何都不要使用）：

```
DWORD WINAPI UnloadNamedModule(void *)
{
    //If you value your life, don't use this code
    LPCTSTR moduleName = _T("MYMODULE.DLL");
    HMODULE module = GetModuleHandle(moduleName);

    if (module != NULL)
    {
        UnloadModule(hModule);
        //All hell breaks loose. Not even this comment will be reached.
        //On your own head be it. Don't say I didn't warn you.
    }
}

//Warning: this function should never be run!
void UnloadRemoteModule(HANDLE hProcess)
{
    CreateRemoteThread(hProcess, NULL, 0, UnloadNamedModule, NULL, 0);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T10:25:58.330

*您不能强制外部进程卸载它的模块。您需要从外部进程内部运行该代码。*您能希望的最好结果就是终止拥有外部 DLL 的进程。如果您可以从外部进程中卸载 dll，那将是非常危险的，代码可能在您将其从 RAM 中拉出时正在运行。

如果您要替换 DLL，最好的办法是重命名 DLL 并保存新的。这样，DLL 将在下次外部进程加载它时使用。

***更正上面的斜体：你可以这样做，但如果你这样做，你会遇到大麻烦。我仍然认为最好的方法是执行我上面列出的操作，重命名 DLL 并将新的 DLL 放在它的位置，以便下次外部进程启动。如果您想替换 DLL，这是一种更安全的方法。***

# c++ - 为什么编译器在返回对局部变量的局部引用时不警告“返回局部变量或临时地址”？

> ID：10469788
> 
> 赞同：5
> 
> 时间：2012-05-06T10:20:29.633
> 
> 标签：c++, visual-studio-2010

在 Visual Studio 2010 中编译以下代码时会发生这种情况。我的问题是：如果函数返回局部变量的地址，C++ 编译器会发出警告，但为什么在返回对局部变量的局部引用时不发出警告？

它仍然是错误的（返回对局部变量的局部引用），只是编译器无法检测到它？检查“num”和“r”的地址会发现它们共享相同的内存位置。

```
#include <iostream>  
using namespace std;

int & intReference() {
  int num = 5;
  int &r = num;
  cout << "\nAddress of num: " << &num;

  //return num; // Compiler warning: C4172: returning address of local variable or temporary
  return r; // No warning?
}

void main() {
  int &k = intReference();
  cout << "\nk = " << k;  // 5
  cout << "\nAddress of k: " << &k; // same address as num

  char c;
  cin.get(c);
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-06T10:22:42.670

是的，它仍然是错误的。

编译器无法检测到您正在做危险（或非法）事情的所有情况。它会在找到它们时发出警告，但它不能识别所有情况（也不是必须）。

# arrays - 根据日期对 Excel 数据透视项目进行排序

> ID：10469790
> 
> 赞同：1
> 
> 时间：2012-05-06T10:20:35.983
> 
> 标签：arrays, excel, vba, pivot-table

编辑：解决了！！暂时还不能提出解决方案。

我有一个带有“日期”行字段的数据透视表。我需要一个从最旧日期到最新日期排序的 VBA 代码。

我需要日期为 AUS 格式，即。dd/mm/yyyy 或 d mmm yyyy 或类似。这是 Excel 无法正确排序它们的时候。

因此，假设枢轴字段“日期”具有以下枢轴项：

```
01 Jan 2012
30 Apr 2012
(blank)
03 Feb 2013
14 Feb 2012
22 Nov 2012 
```

正确的顺序是：

```
01 Jan 2012
14 Feb 2012
30 Apr 2012
22 Nov 2012
03 Feb 2013
(blank) 
```

我想我越来越近了，但仍然没有运气。

```
Dim pi As PivotItem
Dim pfd As PivotField
Dim pt As PivotTable

Set pfd = pt.PivotFields("Snapshot Date")

For Each pi In pfd.PivotItems
pi = CDate(pi) 'converts to US date for sorting 
Next pi

pfd.AutoSort _
xlAscending, "Snapshot Date"

For Each pi In pfd.PivotItems
pi = Format(pi, "d mmm yyyy") 'converts to AUS
Next pi 
```

谢谢你的帮助。分枝

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T10:32:59.090

我认为您不必为此创建宏。选择您的日期，右键单击->单元格格式->日期->选择您想要的日期格式。

然后进行排序，选择要排序的所有行，转到数据/排序，选择包含日期和排序顺序（升序/降序）的列，然后单击确定。

你的日期应该排序;）

编辑：当您使用宏时，请尝试类似的操作

```
Set pfd = pt.PivotFields("Snapshot Date")
pfd.Sort Key1:=Range("A1"), Order1:=xlDescending, Header:=xlYes 
```

# android - Android SecurityException CALL_PHONE 即使我在清单文件中声明它

> ID：10469793
> 
> 赞同：3
> 
> 时间：2012-05-06T10:21:43.333
> 
> 标签：android, permission-denied, securityexception

在我的应用程序中，我需要在某些情况下以编程方式发起呼叫。

它大部分时间都有效，但我可以看到有时它不起作用，**特别是在 2.3.7 版本上**。也许该特定权限已删除并且在该版本中是非法的？我找不到有关异常起源的线索。

我在清单中获得了许可：

```
<uses-permission android:name="android.permission.CALL_PHONE" /> 
```

的java代码：

```
private void launchCall(String number, int calltype) {
            Intent callIntent = new Intent();
            callIntent.setAction(Intent.ACTION_CALL);
            callIntent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
            callIntent.setData(Uri.parse("tel:"+ number));
            if (calltype == CALL_TYPE_VIDEO) {
                callIntent.setAction(ACTION_VIDEO_CALL);
                callIntent.putExtra("videocall", true);
            }
            context.startActivity(callIntent);
        } 
```

异常跟踪：

```
java.lang.SecurityException: Permission Denial: starting Intent { act=android.intent.action.CALL dat=tel:xxx-xxx-xxxx flg=0x10000000 cmp=com.android.phone/.OutgoingCallBroadcaster } from ProcessRecord{415f7158 4016:com.tawkon/10092} (pid=4016, uid=10092) requires android.permission.CALL_PHONE
at android.os.Parcel.readException(Parcel.java:1322)
at android.os.Parcel.readException(Parcel.java:1276)
at android.app.ActivityManagerProxy.startActivity(ActivityManagerNative.java:1359)
at android.app.Instrumentation.execStartActivity(Instrumentation.java:1374)
at android.app.ContextImpl.startActivity(ContextImpl.java:640)
at android.content.ContextWrapper.startActivity(ContextWrapper.java:258)
at com.tawkon.Service.PrecallSuggestionManager.launchCall(PrecallSuggestionManager.java:305)
at com.tawkon.Service.PrecallSuggestionManager.access$12(PrecallSuggestionManager.java:291)
at com.tawkon.Service.PrecallSuggestionManager$6.run(PrecallSuggestionManager.java:215)
at android.os.Handler.handleCallback(Handler.java:587)
at android.os.Handler.dispatchMessage(Handler.java:92)
at android.os.Looper.loop(Looper.java:130)
at android.app.ActivityThread.main(ActivityThread.java:3703)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:507)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:841)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:599)
at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-05-11T15:24:46.207

您需要将其添加到**Visual Studio IDE**`Call permission`中的应用程序`manifest` 的项目属性中。. [单击此处查看图像。](https://i.stack.imgur.com/hlAf5.jpg)

 *** * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-21T09:21:40.673

我有同样的问题，我发现权限不在正确的位置！将此复制到您的清单中：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.shalom.itai.automaticdailer" >
    <uses-sdk android:minSdkVersion="8" android:targetSdkVersion="17" />
    <uses-permission android:name="android.permission.CALL_PHONE" />
    <uses-permission android:name="android.permission.READ_PHONE_STATE" />
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-19T06:11:21.570

以下解决方案对我来说效果很好。

AndroidManifest.xml

```
<uses-sdk android:minSdkVersion="8" android:targetSdkVersion="17" />
<uses-permission android:name="android.permission.CALL_PHONE" /> 
```

activity_main.xml

```
<EditText
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:id="@+id/phoneNumberEditTextId"/>
<Button
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="make phone call"
    android:onClick="makePhoneCall"/> 
```

MainActivity.java

```
 private static final int MY_PERMISSIONS_REQUEST_CALL_PHONE = 1;

 public void makePhoneCall(View view) {

        int permissionCheck = ContextCompat.checkSelfPermission(this, Manifest.permission.CALL_PHONE);
        if (permissionCheck != PackageManager.PERMISSION_GRANTED) {
            ActivityCompat.requestPermissions(this, new String[]{Manifest.permission.CALL_PHONE}, MY_PERMISSIONS_REQUEST_CALL_PHONE);
        } else {
            callPhone();
        }

    }

    @Override
    public void onRequestPermissionsResult(int requestCode, String permissions[], int[] grantResults) {
        switch (requestCode) {
            case MY_PERMISSIONS_REQUEST_CALL_PHONE: {
                if (grantResults.length > 0 && grantResults[0] == PackageManager.PERMISSION_GRANTED) {
                    callPhone();
                }
            }
        }
    }

    private void callPhone() {
        EditText editText = (EditText) findViewById(R.id.phoneNumberEditTextId);
        Intent intent = new Intent(Intent.ACTION_CALL);
        intent.setData(Uri.parse("tel:" + editText.getText().toString()));
        if (ActivityCompat.checkSelfPermission(this, Manifest.permission.CALL_PHONE) == PackageManager.PERMISSION_GRANTED) {
            startActivity(intent);
        }
    } 
```**

# python - 什么可以将 .mfd 文件转换为其他格式？

> ID：10469806
> 
> 赞同：0
> 
> 时间：2012-05-06T10:23:40.910
> 
> 标签：python, sqlite, nfc, mifare

我有 .mfd 文件，我想将 .mfd 文件中的信息导入 python 以保存在数据库（sqlite3）中。有人可以帮助我或给我方法……谢谢！

我使用 libnfc (nfc-mfclassic) 读取标签中的所有块，然后我得到了 .mfd。如果我想在 python 中将这样的数据保存到数据库中。我应该怎么做......

我的标签是 mifare 1k

我运行这个东西：`nfc-mfclassic r a dumptest.mfd` 在终端（Ubuntu）中获取所有数据

```
Usage: nfc-mfclassic r|w a|b <dump.mfd> [<keys.mfd>]
  r|w           - Perform read from (r) or write to (w) card
  a|b           - Use A or B keys for action
  <dump.mfd>    - MiFare Dump (MFD) used to write (card to MFD) or (MFD to card)
  <keys.mfd>    - MiFare Dump (MFD) that contain the keys (optional)
Or: nfc-mfclassic x <dump.mfd> <payload.bin>
  x             - Extract payload (data blocks) from MFD
  <dump.mfd>    - MiFare Dump (MFD) that contains wanted payload
  <payload.bin> - Binary file where payload will be extracted 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-07-28T00:57:19.473

试试我的 Mifare 转储解析器[https://github.com/zhovner/mfdread](https://github.com/zhovner/mfdread) 代码非常简单，所以你可以修改它来做你需要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T11:01:26.993

在这里你可以找到一个用 Python 读取 nfc-mfclassic 转储的程序：http://habrahabr.ru/post/141213/ [（](http://habrahabr.ru/post/141213/)页面是俄语，你可以使用谷歌翻译或滚动到“Программа на питоне, которая читает данные из дампа полученного с помощью nfc-mfclassic”部分）。之后使用 python-sqlite (http://docs.python.org/library/sqlite3.html) 将数据保存到 sqllite。

# internet-explorer - 压缩css3-pie

> ID：10469809
> 
> 赞同：0
> 
> 时间：2012-05-06T10:24:07.527
> 
> 标签：internet-explorer, css3pie

在文档中，它说可以对 pie.htc 进行 gzip 压缩，但没有关于如何执行此操作的线索。现在我如何压缩 .htc 文件并让浏览器知道它已压缩？（我记得，对 .js 文件也可以做同样的事情。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T12:26:04.143

最快的方法是压缩服务器必须输出的所有内容。

阿帕奇：

```
<IfModule mod_gzip.c>
# Enable the module
mod_gzip_on yes 
# Allow GZIP compression for all requests 
mod_gzip_item_include mime .?
</IfModule>

# Method 2: Compress all content, manually excluding specified file types
<IfModule mod_deflate.c>
  # place filter 'DEFLATE' on all outgoing content
  SetOutputFilter DEFLATE
  # exclude uncompressible content via file type
  SetEnvIfNoCase Request_URI .(?:gif|jpe?g|png|rar|zip)$ no-gzip
  <IfModule mod_headers.c>
    # properly handle requests coming from behind proxies
    Header append Vary User-Agent
  </IfModule>
</IfModule> 
```

# javascript - 如何使用拆分（）

> ID：10469810
> 
> 赞同：-4
> 
> 时间：2012-05-06T10:24:10.000
> 
> 标签：javascript, jquery

这是这样的字符串

```
var a = ".fontlist-1 .fontlist-2";
var b = ".fontlist-1 .fontlist-3";
var c = ".fontlist-1 .fontlist-4"; 
```

我需要的是如何使用 split() 方法并且只获取字符串中的第二个单词。对于上述字符串，我只需要第二个单词（即 .fontlist-2、.fontlist-3、.fontlist-4）。我怎样才能分裂并得到那个词？如果您需要更多信息，我可以给您。

还有一件事。在某些情况下，如果我有这样的字符串。

```
var a = ".fontlist-1" 
```

那么你的代码必须给我 .fontlist-1 字。有可能吗？

有人可以指导我吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T10:26:27.883

`".fontlist-1 .fontlist-2".split(/\s+/)[1]`给你字符串的第二个单词，在这种情况下`.fontlist-2`. 你*可以*自己[找到它](https://stackoverflow.com/search?q=javascript%20split)。

好吧，到底是什么......对于a，b和c尝试：

```
[a,b,c]
   .map(function(el){return el.split(/\s+/).pop();})
   .join(' ');
//=> ".fontlist-2 .fontlist-3 .fontlist-4" 
```

# google-chrome-extension - 检查弹出窗口是否删除了扩展；调试控制台吃扩展表单元素输入

> ID：10469813
> 
> 赞同：6
> 
> 时间：2012-05-06T10:24:37.980
> 
> 标签：google-chrome-extension

为了调试扩展，Chrome 曾经在右键单击扩展图标（浏览器右上角）时提供“检查弹出”菜单选项。我相信这个选项最近被删除了（可能是我正在使用的最新的 Chrome 版本 20）。

仍然可以通过右键单击扩展弹出窗口中的任何元素并选择“检查元素”来激活调试控制台。然而，我遇到的问题是，当我现在打开调试控制台时，在弹出窗口中输入表单元素不起作用。即使表单元素似乎有焦点（它有一个闪烁的光标处于活动状态），所有输入的输入都直接进入调试控制台。

**更新**：似乎焦点不是专门针对调试控制台，而是针对下面的任何窗口。就像扩展窗口是一个“留在顶部”的窗口，没有捕获任何输入。

**更新：2012-07-24：**更新到`22.0.1215.0 (Official Build 147830) dev`并且错误仍然存​​在。但是，是的，Youtube 全屏现在突然可以在我的双屏系统上运行了！

**2012-05-09 更新：**在 Linux x64 (Ubuntu 12.04) 上从 20.0.1123 升级到 20.0.1130.1 dev。问题仍然存在，并且使调试扩展比需要的困难得多。还确认了旧 Chrome 版本 (20.0.1105.0) 上的行为。哦，好吧，也许这只是我......

**2012-05-09 更新 2：**假设这是一个错误，请考虑将背景页面添加到您的弹出窗口并登录到该页面的控制台，直到错误得到修复。至少这让我现在的生活更轻松。

**更新：2012-10-19：**正如 omri 所写（并指出），Inspect Popup 选项正在被放回 Chrome 中，这有望解决这个问题（最终）。

有人可以确认/否认这种行为，和/或建议可能的解决方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T20:49:52.340

1.  打开弹窗
2.  右键单击弹出窗口并检查。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T13:13:16.567

它将被重新添加到 chrome [http://code.google.com/p/chromium/issues/detail?id=143349](http://code.google.com/p/chromium/issues/detail?id=143349)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T07:05:25.143

更新：不接受答案，因为另一个用户确认了 OSX 的这种行为，所以至少它会在雷达上显示为未解决，尽管可能有一个错误跟踪器需要发布。

google-chrome-beta（版本 20.0.1132.34 beta）上仍然存在此错误。我猜这通常与 X11 上的窗口和弹出窗口处理有关，并且显然不是一个高优先级错误，因为它在很多版本中都保持这种方式。结束问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-17T17:12:45.480

我在右键单击时看到缺少的“检查弹出窗口”选项，但是我可以在表单字段中编辑/输入文本。

我想知道您是否遇到了不相关的问题？如果您正在使用或更新到新的 2.0 扩展清单，您可能会遇到由于添加了 content_security_policy 默认值而导致弹出窗口中的内联 javascript 无法再触发的问题。基本上这可以防止脚本注入，但似乎也杀死了弹出窗口中的所有 JS。可以通过更改弹出窗口中处理事件的方式或更改默认策略来解决此问题。以下是该文档的链接： [http ://code.google.com/chrome/extensions/contentSecurityPolicy.html](http://code.google.com/chrome/extensions/contentSecurityPolicy.html)

这只是一个猜测，因为我不知道您的代码中发生了什么，但我最近在升级我的扩展程序时看到了类似的事情。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-01T07:42:10.983

刚刚升级到 22.0.1221.1 (Official Build 149058) dev 并且问题似乎已经解决了，尽管有一个解决方法。在弹出窗口中右键单击并选择“检查元素”以启动控制台的旧方法仍会按照最初报告的方式获取所有输入。

但是，似乎通过右键单击弹出图标，旧的“检查弹出窗口”似乎又回来了，当使用它时，它似乎并没有从打开的弹出窗口本身获取输入。

# c# - 使用“AesManaged”C# 解密字符串时，填充无效且无法删除异常

> ID：10469819
> 
> 赞同：5
> 
> 时间：2012-05-06T10:25:24.937
> 
> 标签：c#, c#-4.0, c#-3.0, aes

请建议我在哪里需要更新/重构代码以消除异常。当我尝试使用以下代码解密加密字符串时出现异常。

以下行抛出异常

```
using (StreamReader srDecrypt = new StreamReader(csDecrypt))
{
     // Read the decrypted bytes from the decrypting stream
     // and place them in a string.
     plaintext = srDecrypt.ReadToEnd();
}

public string EncryptAuthenticationTokenAes(string plainText)
{

    byte[] encrypted;
    // Create an AesManaged object
    // with the specified key and IV.
    using (AesManaged aesAlg = new AesManaged())
    {

        // Create a decrytor to perform the stream transform.
        ICryptoTransform encryptor = aesAlg.CreateEncryptor(aesAlg.Key, aesAlg.IV);
        aesAlg.Padding = PaddingMode.None;
        // Create the streams used for encryption.
        using (MemoryStream msEncrypt = new MemoryStream())
        {
            using (CryptoStream csEncrypt = new CryptoStream(msEncrypt, encryptor, CryptoStreamMode.Write))
            {
                using (StreamWriter swEncrypt = new StreamWriter(csEncrypt))
                {

                    //Write all data to the stream.
                    swEncrypt.Write(plainText);
                }
                encrypted = msEncrypt.ToArray();
            }
        }
    }

    // Return the encrypted bytes from the memory stream.
    return Convert.ToBase64String(encrypted);

}

public string DecryptPasswordAes(string encryptedString)
{
    //Convert cipher text back to byte array
    byte[] cipherText = Convert.FromBase64String(encryptedString);

    // Declare the string used to hold
    // the decrypted text.
    string plaintext = null;

    // Create an AesManaged object
    // with the specified key and IV.
    using (AesManaged aesAlg = new AesManaged())
    {
        // Create a decrytor to perform the stream transform.
        ICryptoTransform decryptor = aesAlg.CreateDecryptor(aesAlg.Key, aesAlg.IV);
        aesAlg.Padding = PaddingMode.None;
        // Create the streams used for decryption.
        using (MemoryStream msDecrypt = new MemoryStream(cipherText))
        {
            using (CryptoStream csDecrypt = new CryptoStream(msDecrypt, decryptor, CryptoStreamMode.Read))
            {
                using (StreamReader srDecrypt = new StreamReader(csDecrypt))
                {

                    // Read the decrypted bytes from the decrypting stream
                    // and place them in a string.
                    plaintext = srDecrypt.ReadToEnd();
                }
            }
        }

    }

    return plaintext;

} 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-06T12:05:34.460

使用 CryptoStream 时的标准错误，您忘记强制它加密流的最后一个字节。它将字节保存在内部缓冲区中，直到有足够的字节到达以发出块。您必须强制输出最后几个字节。使固定：

```
 using (var msEncrypt = new MemoryStream())
    using (var csEncrypt = new CryptoStream(msEncrypt, encryptor, CryptoStreamMode.Write))
    using (var swEncrypt = new StreamWriter(csEncrypt)) {
        swEncrypt.Write(plainText);
        csEncrypt.FlushFinalBlock();
        encrypted = msEncrypt.ToArray();
    } 
```

解密时出现异常，因为*加密*缺少最终填充。真正的问题是由*using*语句引起的，如果您等到 CryptoStream 关​​闭后才获取加密字节，则不会出现此问题。但这并不好用，因为 StreamWriter 上的*using*语句也关闭了 CryptoStream 和 MemoryStream。显式使用 FlushFinalBlock() 是最好的解决方法。

# multithreading - 为什么与启用线程的 Perl 相比，非线程 Perl 不使用 off64_t 类型？

> ID：10469821
> 
> 赞同：6
> 
> 时间：2012-05-06T10:25:27.083
> 
> 标签：multithreading, perl, compilation, large-files

我最初的任务是安装 mod_perl 2.0.6 + Apache 2.2.22。该过程因编译 mod_perl 时
出现许多错误而停止。`off64_t`于是，我开始深入挖掘。首先，我安装了两个新的 Perl 5.8.9 实例（因为我必须使用这个版本）：一个线程版本和一个非线程版本（它们是相同的，只是`usethreads`不同）。尝试使用线程化的 Perl 重现相同的内容并成功完成并且完全没有`off64_t`错误。
结论很明显：线程化的 Perl 提供了必要`off64_t`的，非线程化的则没有。
进一步搜索，我比较了两个 Perl 的`config.h`（来自`core/<arch>/CORE`），在第 3671 行我可以看到这个（在非线程 Perl 中）：

```
 /* HAS_OFF64_T:
     *      This symbol will be defined if the C compiler supports off64_t.
     */
    /*#define       HAS_OFF64_T             / **/ 
```

在启用线程的 Perl 中：

```
 #define HAS_OFF64_T            /**/ 
```

`perl -V`对于两个 Perl 实例都报告`ccflags ='... -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64 ...'`为使用的编译器标志。

据我了解，`off64_t`用于*大文件*，与线程无关。我找到了关于`off_t`和的信息`off64_t`：

> 如果源是用`_FILE_OFFSET_BITS = 64`这种类型编译的（即`off_t`）透明地被替换为`off64_t`.

**很快**：有 2 个相同的 Perl 构建，只有一个区别：`usethreads`配置参数。带线程的 Perl 启用`off64_t`，非线程的则不启用。

我的问题是：*为什么会发生这种情况以及线程如何连接到`off64_t`应该用于大文件而不是线程的这种数据类型*？

信息：Arch Linux OS 32 位（内核 2.6.33）、gcc 4.5.0、libc 2.11.1、标准 Perl 5.8.9

注：在第 15526 行`off64_t`处理，生成一个简单的并尝试编译。问题是为什么非线程 Perl 不能编译它而线程 Perl 可以。`Configure``try.c`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T19:39:04.027

我不确定回答我自己的问题是否是一种公认​​的行为，但是当我在寻找解决方案而不只是等待别人做我的*作业*时，我认为这对阅读本文的其他人会很有用。

很快，我的问题的答案是gcc 编译器标志，似乎线程与这种类型 `-D_GNU_SOURCE`没有任何共同之处。`off64_t`

似乎 when`-Dusethreads`用于`Configure`,`hints/linux.sh`并执行以下代码：

```
case "$usethreads" in
$define|true|[yY]*)
    ccflags="-D_REENTRANT -D_GNU_SOURCE -DTHREADS_HAVE_PIDS $ccflags" 
```

然后使用定义编译代码`_GNU_SOURCE`，这允许使用很多东西（就像在这些线程中回答的那样：[“#define _GNU_SOURCE”意味着什么？](https://stackoverflow.com/questions/5582211/what-does-define-gnu-source-imply)）。

当 Perl 在没有线程支持的情况下构建时，这些标志将被跳过，并且头文件中的许多位仍然被注释。
似乎 Perl 本身不受此影响。甚至旧版本的 Apache 也没有，但是 Apache 2.2+ 开始使用由 Apache 启用的代码，`_GNU_SOURCE`并且构建`mod_perl`不像以前那么简单。

我不知道谁应该注意到这件事。也许核心 Perl 维护者自己，也许 Apache 维护者，也许没有人，这只是我的特殊情况或编译器问题。

结论：在构建非线程 Perl 时，`_GNU_SOURCE`不使用，因此 Perl`.h`文件有很多注释`#define`，并且针对 Apache 2.2+ 源构建 mod_perl 失败。`-Accflags='-D_GNU_SOURCE'`构建 Perl 时应添加 一个附加项。

也欢迎其他答案。也许我错了，或者我只是看到*了冰山一角*。

# actionscript-3 - As3 BigInteger 返回不正确的答案

> ID：10469829
> 
> 赞同：1
> 
> 时间：2012-05-06T10:26:09.923
> 
> 标签：actionscript-3, flash, biginteger

我正在尝试在闪存中实现 RSA 加密程序。我研究了使用 Big Numbers 并在 Crypto 包中找到了 BigInteger var 类型。我开始玩 BigIntegers，但我的输出从来都不是正确的答案。例如，当答案应该是 9409 时，下面的代码将输出 5911。任何有关此错误的输入都会很棒。

```
var temp:BigInteger = new BigInteger(String(97));
temp = temp.pow(2);
trace(temp.toString());

Output = 5911 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T11:49:59.727

我不确定您指的是哪个加密包，虽然它是[as3crypto](http://code.google.com/p/as3crypto/)但我不记得它的实现具有`pow`具有该签名的方法。但无论哪种方式，您始终必须记住您正在处理的基础以及库的设计目的。

(97 [16] ) ² = 5911 [16]

您正在处理十六进制而不是十进制数字。

想想那件 Geek-is-chic 的 T 恤，上面写着“有 10 种人。理解二进制的人和不理解二进制的人”。在这种情况下，“10”被假定为 10 [2]。等于 2 [10]。不合格的基地几乎总是毁了每个人的一天。

# ios - iOS 使用 AFImageCache 缓存图像似乎不起作用

> ID：10469832
> 
> 赞同：0
> 
> 时间：2012-05-06T10:27:02.667
> 
> 标签：ios, caching, nsdata, afnetworking

我正在尝试使用 AFImageCache 缓存从 URL 加载的一些图像，但没有成功……我不确定我是否做错了什么，如果你曾经使用过这个库，我会喜欢你的意见。

我从 NSURLRequest 中获取图像，然后将其缓存如下

```
UIImage *img; //This image is a png icon returned from the server
NSData *imgData = UIImagePNGRepresentation(img); // Always checking length to make sure its more than 0, and it is

[[AFImageCache sharedImageCache] cacheImageData: imgData
                                         forURL: myURL
                                      cacheName: @"IconCache"]; 
```

在下一次运行时，我会尝试检查图像是否被缓存，但由于某种原因总会得到`nil`。

```
UIImage *myIcon = [[AFImageCache sharedImageCache] cachedImageForURL: myURL cacheName: @"IconCache"];

NSLog("%@", myIcon); // output (null) 
```

对此有任何想法或想法吗？谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-08T15:01:32.027

您使用的是什么版本的 AFNetworking？`AFImageCache`很久以前就从公共 API 中删除了。如果要进行图像缓存，请使用`NSURLCache`，它会在系统级别缓存所有网络响应。`AFImageCache`一直只是一个临时缓存，用于提高滚动视图中图像加载的性能。

# c++ - 来自 C++ 控制台的大量输入

> ID：10469835
> 
> 赞同：2
> 
> 时间：2012-05-06T10:27:36.620
> 
> 标签：c++, string, input, console, getline

我需要直接在控制台中输入超过 10000 个小于 max long long 的整数。控制台使用 getline(cin,string) 接受超过 9000 个。一个一个地输入它们会大大减慢我的程序。无论如何，我可以覆盖控制台的 getline 最大输入吗？

[编辑以包括 OP 的评论：]

```
#include <iostream>
using namespace std;
int main()
{
   long long n=0,i=0,a,b;
   cin>>n;
   for(i=0;i<n;i++) { cin>>a>>b; cout<<a+b<<endl; }
   return 0;
} 
```

当输入超过 10000 个整数时，此代码会在任务上给出“超出时间限制”错误。

编辑：在一个答案的帮助下重写代码后：

```
#include <iostream>

static inline int error(int n) { std::cerr << "Input error!\n"; return n; }

int main()
{
    long long a,b,n;  // number of colours and vertices

    if (!(std::cin>> n)) { return error(1); }

    for (int i = 0; i != n; ++i)
    {
        if (!(std::cin >> a>>b)) { return error(1); }
        std::cout << a+b << "\n";
    }
} 
```

现在它在测试用例上给了我一个运行时错误（NZEC），有 10000+ 个整数

编辑 2：我发现了一些对我有帮助的东西，但它只在 C# 中：[如何在 C# 中从控制台读取很长的输入？](https://stackoverflow.com/questions/9750853/how-to-read-very-long-input-from-console-in-c) 在 C++ 中找不到等价物

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-06T10:45:23.197

默认情况下**，iostream 与 C stdio**函数同步，这使得它们对于算法竞赛来说太慢了。在程序开始时[禁用同步：](http://en.cppreference.com/w/cpp/io/ios_base/sync_with_stdio)

```
std::ios::sync_with_stdio(false); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-06T10:47:35.457

您可以从文件中获取输入。您所要做的就是像这样重定向标准输入

```
if (!freopen("filename.txt", "r", stdin)) { 
    cout << "Could not open file";
    return 1;
}
long long n=0,i=0,a,b;
cin>>n;
for(i=0;i<n;i++) { cin>>a>>b; cout<<a+b<<endl; }
return 0; 
```

# iphone - 如何在 iphone 中从 UIButton 导航到下一页或如何调整针对 UIButton 的推送事件

> ID：10469836
> 
> 赞同：-1
> 
> 时间：2012-05-06T10:27:45.927
> 
> 标签：iphone

我是一名新生，刚刚加入了一家 iphone 编程软件公司作为实习生。我是 iphone 编程新手，但不是计算机编程新手。我不知道如何使用 UIbutton 切换到下一个视图控制器。

我的编码如下...

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    if (!self.detailViewController) {
        self.detailViewController = [[HelloDetailViewController alloc] initWithNibName:@"HelloDetailViewController" bundle:nil];
    }
    NSDate *object = [_objects objectAtIndex:indexPath.row];
    self.detailViewController.detailItem = object;
    [self.navigationController pushViewController:self.detailViewController animated:YES];

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T10:54:12.707

欢迎出国。学习Objective-C编程并不难。虽然有很多关于这方面的教程，但您可能想熟悉所有的`UINavitationController`,`UIViewController`以及小部件 (`UIButton`等`UILabel`)。

所以，要回答你的问题，有两种方法可以做到。

*   创建然后将其连接到xib中的按钮`IBAction`。`.h`

`-(IBAction) submit;`

*   假设你有一个按钮，打电话`IBOutlet UIButton *myButton`

> [myButton addTarget:self action:@selector(submit) forControlEvents:UIControlEventTouchUpInside];

你的方法：

```
-(void) submit{
 if (!self.detailViewController) {
        self.detailViewController = [[HelloDetailViewController alloc] initWithNibName:@"HelloDetailViewController" bundle:nil];
    }
    //NSDate *object = [_objects objectAtIndex:indexPath.row];
    //self.detailViewController.detailItem = object;
    [self.navigationController pushViewController:self.detailViewController animated:YES];

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T11:13:59.493

要简单地切换到下一个视图控制器，请编写以下代码

```
viewcontrollerobject=[[ViewControllerName alloc] initWithNibName:@"ViewControllerXibName" bundle:nil];
[self.view addSubview:viewcontrollerobject.view]; 
```

如果您需要导航推送视图控制器动画，请使用代码

```
 [self.navigationController pushViewController:ViewControllerName animated:YES]; 
```

这将带您进入下一页......

# matlab - 使用带 libsvm 的 sequencefs 进行功能选择

> ID：10469837
> 
> 赞同：1
> 
> 时间：2012-05-06T10:28:04.277
> 
> 标签：matlab, machine-learning, classification, libsvm

我想用 matlab 工具箱做特征选择。那里有一个很好的功能，叫做sequentialfs，它做得很好。但是，我无法将它与 LibSVM 函数集成以执行特征选择。它适用于 KnnClassify，请有人帮助我。这是 KnnClassify 的代码：

fun1 = @(XT,yT,Xt,yt)...

```
 (sum((yt ~= knnclassify(Xt,XT,yT,5)))); 
```

[fs,history]=sequentialfs(fun1,data,label,'cv',c,'options',opts,'direction','forward');

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T11:49:56.393

您需要包装 libsvm 函数以在特定功能集上训练和测试 SVM。我建议在一个单独的 .m 文件中写东西（虽然原则上我认为它可以放在一个匿名函数中）。就像是：

```
function err = svmwrapper(xTrain, yTrain, xTest, yTest)
  model = svmtrain(yTrain, xTrain, <svm parameters>);
  err = sum(svmpredict(yTest, xTest, model) ~= yTest);
end 
```

然后你可以打电话`sequentialfs`：

```
[fs history] = sequentialfs(@svmwrapper, ...); 
```

（您可能需要检查 参数的顺序`svmtrain`，我永远不记得它们应该是哪个方向）。

这个想法是 svmwrapper 将训练一个 SVM 并在测试集上返回它的错误。

匿名等价物是：

```
svmwrapper = @(xTrain, yTrain, xTest, yTest)sum(svmpredict(yTest, xTest, svmtrain(yTrain, xTrain, <svm parameters>) ~= yTest); 
```

这看起来不太好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-16T11:56:33.987

我不知道这个问题是否仍然存在，但我使用以下句柄使该功能正常工作：

% 输入的顺序很重要，因为 libsvm 的 svmpredict 和 svmtrain 将输入作为
% ytrain、xtrain 但sequentialfs 以 xtrain、ytrain、xtest、ytest 形式发送数据

```
svfun = @(xtrain,ytrain,xtest,ytest)sum(svmpredict(ytest,xtest,svmtrain(ytrain,xtrain,<svm options>)) ~= ytest);

[fs history] = sequentialfs(svfun,x,y) 
```

# css - Twitter Bootstrap - 行流体的位置问题

> ID：10469838
> 
> 赞同：9
> 
> 时间：2012-05-06T10:28:04.823
> 
> 标签：css, twitter-bootstrap

我目前正在使用 Twitter bootstrap 构建一个网站（这太棒了！）。我的布局使用：

```
<div class="row">
    <div class="span6"></div>
    <div class="span6"></div>
    <div class="span6"></div>
    <div class="span6"></div>
</div> 
```

效果很好，我基本上每行有 2 个 div，而且我们不必在循环中包含一个计数器来消除边距。它是完美的！但是我们决定改变我们对固定布局的想法，所以我从 .row 切换到 .row-fluid。这就是问题来的时候。

我知道有这样的事情：

```
<div class="row-fluid">
    <div class="span6"></div>
    <div class="span6"></div>
    <div class="span6"></div>
    <div class="span6"></div>
</div> 
```

**带有 .span6 的 div 对第一行效果很好，但是 .span6 上的 margin-left 从第二行开始出现**，因此布局，嗯，......不好。

我很**惊讶它对于固定布局但不是 row-fluid 效果惊人**。有解决办法吗？我在我所有的网站上都使用了这个，所以必须为所有这些添加计数器会......太多的工作。

这是 JS 小提琴：http: [//jsfiddle.net/denislexic/uAs6k/3/](http://jsfiddle.net/denislexic/uAs6k/3/)

任何帮助表示赞赏，谢谢。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-05-24T06:03:46.510

根据 12 列网格设置，您的 2 个示例实际上`<div class="span6"></div>`在一个全宽“行”内有 4 个......加起来是“24”，或者是“行”或“行流体”宽度的两倍。当有太多无法容纳在父行的宽度内时，您基本上是在创建下降浮动。（*这也是为什么 'margin-left:0' 似乎没有应用于您的第三个 'span6'，**看起来**它是第二行的第一个 'span6'。*）

**在默认/固定 'row'**中，嵌套列的 'span*'s + 'offset*'s 将需要小于或等于其父列 'span*'，或者如果它是第一级行，则12，因为浮动的“跨度*”宽度以像素为单位。

**在灵活/流动的 'row-fluid'**中，列宽是按百分比设置的，因此每行和嵌套行可以有嵌套列 'span*' 和 'offset*' 每次加起来为 12。 [http://twitter.github.com/bootstrap/scaffolding.html#fluidGridSystem](http://twitter.github.com/bootstrap/scaffolding.html#fluidGridSystem)

这应该可以解决您的“行流体”设置问题。 [http://jsfiddle.net/csabatino/uAs6k/9/](http://jsfiddle.net/csabatino/uAs6k/9/)

```
<h1>NOW this is working.</h1>
<div class="row-fluid">
    <div class="span6">Content</div>
    <div class="span6">Content</div>
</div>
<div class="row-fluid">
    <div class="span6">Content</div>
    <div class="span6">Content</div>
</div>

<h1>Default fixed 'row' is working, too.</h1>
<div class="row">
    <div class="span6">Content</div>
    <div class="span6">Content</div>
</div>
<div class="row">
    <div class="span6">Content</div>
    <div class="span6">Content</div>
</div> 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-05-08T16:06:54.827

如果您知道每行的跨度数，则可以使用如下表达式：

```
.row-fluid [class*="span"]:nth-child(3n+1) {
   margin-left: 0;
} 
```

例如：如果每行有 3 个跨度，则上述表达式将从每行的第一个跨度中删除边距。下面的删除了每一行最后一个元素的边距：

```
.row-fluid [class*="span"]:nth-child(3n+3) {
    margin-right: 0;
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-06T10:34:33.290

```
.row-fluid [class*="span"]:first-child {
margin-left: 0;
} 
```

它只会删除第一个孩子的边距，因此您需要添加另一个类或更改`span6`为`margin-left:0;`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-10-14T14:35:42.360

我通过在开头放置一个带有 span12 的空 div 来解决它，在代码中丑陋但在 gui 中有效

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-18T05:19:02.593

如果应用程序无法计算元素并划分为行，那么删除`margin-left`和添加`padding-right`对我来说效果很好：

```
.gal [class*="span"] {margin-left:0; padding-right:20px;} 
```

[http://jsfiddle.net/uAs6k/116/](http://jsfiddle.net/uAs6k/116/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-09-29T21:45:28.670

我只是用 jQuery 来代替：

```
$(document).ready(function(){
    function doFluidFirstSpan() {
        var top = $('.thumbnails > li:first-child').position().top;
        $('.thumbnails > li').each(function(){
            if($(this).position().top > top) {
                $(this).addClass("alpha");
                top = $(this).position().top;   
            }
        }); 
    }

    doFluidFirstSpan();
} 
```

和CSS：

```
.alpha { margin-left: 0 !important; } 
```

# c++ - Cortex-A8 强制内存缓存

> ID：10469839
> 
> 赞同：3
> 
> 时间：2012-05-06T10:28:07.027
> 
> 标签：c++, c, caching, cortex-a8

有必要使用函数实时处理大量数字（~1 Mb），例如`void processData(char* data)`.

在目标平台上运行了以下测试：

```
int j = 10;
while(j--)
    processData(dataPtr); 
```

每次使用相同的数据。它显示了以下结果：

1.  第一次运行大约需要 22.5 毫秒
2.  第二次运行和其他运行大约需要 12.5 毫秒

在我看来，这可能是由于第二次运行时数据已经在处理器缓存中，因此它的工作速度要快得多。

问题：在实际情况下，数据每次都会不同。

有什么方法可以对数据进行某种“预加载”以进行缓存？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T10:55:21.977

预取是可能的（使用`gcc`，使用`__builtin_prefetch`），但应谨慎使用，否则可能会降低性能而不是提高性能。

在执行此操作之前，应尽可能检查和优化函数中的内存访问模式。
基本上，我们希望内存访问尽可能少，并且它们应该尽可能串行。

有一个预取操作，但不建议对整个数据集执行此操作。
更好的设计是，在循环中的每次迭代中，为下一次迭代（或者可能是之后的一次，如果循环运行得非常快）预取数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T07:58:18.220

您可以做的是记住您的整个工作集适合 LLC，您将第一次运行称为“热身运行”并且您不考虑它的时间安排。当然，如果第三次、第四次和进一步的运行时间与第二次运行显示的时间一致，则这种方法是合理的。然后，当您报告基准测试结果时，您会显示平均 2-N 次运行时间，但您在报告中提到数据适合 L3，并且使用更多“真实世界的数据”可以预期不同的结果。我认为这通常称为微基准测试，当您在同一个定义明确的常量数据集上测试一个特定函数的性能时。

# javascript - 使用 Phonegap 全局数组的 Javascript 不起作用

> ID：10469843
> 
> 赞同：0
> 
> 时间：2012-05-06T10:28:44.743
> 
> 标签：javascript, android, cordova

我正在创建一个 phonegap 应用程序来获取联系人并将它们保存在数据库中。我在顶部创建了两个空的全局数组，它们将保存电话号码和一个人的显示姓名，稍后将存储在数据库表中。为了检查联系人是否成功保存在数组中，我创建了一个`test_data()`函数。

现在我的问题是`test_data()`代码不起作用，日志中没有显示任何值。现在，如果我将该代码从`test_data()`函数移到`onSuccess()`它可以正常工作。这是代码。这不是在 JS 中声明全局数组的正确方法吗？

```
<!DOCTYPE html>
<html>
  <head>
    <title>Contact Example</title>

    <script type="text/javascript" charset="utf-8" src="cordova-1.7.0.js"></script>
    <script type="text/javascript" charset="utf-8">
     var gcont = []; var gphon = [];

    // Wait for Cordova to load
    //
    document.addEventListener("deviceready", onDeviceReady, false);

    // Cordova is ready
    //
    function onDeviceReady() {

    // find all contacts with 'Bob' in any name field
    var options = new ContactFindOptions();
    options.filter=""; 
    options.multiple=true;
    var fields = ["displayName", "phoneNumbers"];
    navigator.contacts.find(fields, onSuccess, onError, options);
    test_data();
    }

    // onSuccess: Get a snapshot of the current contacts
    //
    function onSuccess(contacts) {

    for(var index=0;index<contacts.length;index++){ 
    gcont[index] = contacts[index].displayName; 
    gphon[index] = contacts[index].phoneNumbers[0].value; 

    }           

    }

    function test_data(){
    for (z=0;z<gcont.length;z++){
    console.log(gcont[z]);}
 }

    // onError: Failed to get the contacts
    //
    function onError(contactError) {
        alert('Error With Contacts!');
    }

    </script>
  </head>
  <body>
    <h1>Example</h1>
    <p>Find Contacts</p>
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T10:51:57.070

对 test_data() 的调用在 onDeviceReady() 中不起作用，因为对 contacts.find 的 onSuccess 回调是异步的，并且在执行 test_data() 时尚未填充数组。

# javascript - 我可以在用于桌面 AIR 应用程序的 Adob e Flex 项目中使用诸如 turn.js 之类的 javascript 库吗？

> ID：10469848
> 
> 赞同：0
> 
> 时间：2012-05-06T10:29:44.137
> 
> 标签：javascript, actionscript-3, apache-flex, flex4.5, flash-builder4.5

我想为桌面 AIR 应用程序的 Adob​​e Flex 4.6 项目中的多个图像设置旋转效果。

我遇到了[http://pageflip.hu/](http://pageflip.hu/)和[http://www.megazine3.de/home.html](http://www.megazine3.de/home.html)但我正在寻找可以在商业应用程序中使用而无需支付许可证的东西。

我想看看是否有办法在桌面 Adob​​e Flex 4.6 应用程序中使用[http://www.turnjs.com/#home 。](http://www.turnjs.com/#home)

图像将存储在 applicationStorageDirectory 中。

如果无法在本地磁盘中存储的文件上使用 javascript turn.js 创建桌面 AIR 应用程序，那么有哪些与 turn.js 具有类似效果的 actionscript 3 或 flex 库可用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T11:59:33.770

我不认为 turn.js 在 Flex 中可以很好地工作。

谷歌说有一个[http://www.rubenswieringa.com/blog/flex-book-component-beta](http://www.rubenswieringa.com/blog/flex-book-component-beta)

# html - 如何让 div 扩展到他的兄弟 div 的高度

> ID：10469850
> 
> 赞同：1
> 
> 时间：2012-05-06T10:29:58.313
> 
> 标签：html, css, height

我一直在寻找一段时间，但找不到解决方案。

我有一个包含 2 列内容的 div。

```
<div id="container">
  <div id="content1">
    Content1
  </div>

  <div id="content2">
    <span style="font-size: 1500px;"> Stretch height</span>
  </div>
</div> 
```

和CSS：

```
#container {
  height: 100%;
}

#content1 {
  position: absolute;
  top: 0;
  left: 0;
  width: 50%;
  float:right;
  background-color: pink;
  min-height: 100%;
  height: auto;
}

#content2 {
  position: absolute;
  top: 0;
  right: 0;
  width: 50%;
  float:left;
  background-color: red;
  min-height: 100%;
  height: auto;
} 
```

目前，#content1 的高度为 100%，而 #content2 已扩展以适应其内容。这样#content1 的背景颜色只出现在顶部，向下滚动时您可以看到它没有着色。

我该如何克服呢？（不使用JS）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T10:34:25.103

`min-height: 100%`您可以使用 ，而不是使用`bottom: 0`。当`top`和`bottom`属性都设置为 0 时，它将填充整个高度（如果`position`设置为`absolute`，即）。

# c++-cli - 包括不同的案例标题

> ID：10469855
> 
> 赞同：0
> 
> 时间：2012-05-06T10:31:02.640
> 
> 标签：c++-cli

是否可以用于`case 1`一个标题和`case 2`另一个？因为当我在程序中使用这两个标题时，我遇到了`ambiguous symbol`错误。

标题 1（winapifunctions.h）

```
 #include <Windows.h>

 void CallWindowProc(String^ windowtitle)
 {
 }; 
```

标题 2（classes.h）

```
 using namespace System;
 using namespace System::Collections::Generic;

 public delegate void Super();
 public ref class Event{}; 
 public ref class MyException:public DivideByZeroException{};
 public interface class IType{};
 public interface class IVal{};
 public ref class Writer abstract{};
 public ref class Check: public Writer,public IType,public IVal
 .....other classes 
```

主程序

```
#include "stdafx.h"
#include "classes.h"
#include "winapifunctions.h"
int main(array<System::String^>^ args)
{
  //read x
  switch(x){ case 1: {CallWindowProc("title");break;} case 2: { Check^ obj = gcnew Check();break;}
}; 
```

和错误 -`IServiceProvider:ambiguous symbol`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-06T10:33:10.937

**简短的回答**：没有。

**长答案**：包含在编译期间由预处理器处理，而您的`case`语句在运行时处理。没有办法让编译时的事情在运行时发生。

你到底想达到什么目的？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T10:42:52.003

您可以使用以下代码解决此问题：

```
// 1.cpp
case 1:
    DoCase1();
    break;
case 2:
    DoCase2();
    break;

// 2.cpp
#include <Windows.h>
void DoCase1()
{
    // ...
}

// 3.cpp
#include <AnotherHeader.h>
void DoCase2()
{
    // ...
} 
```

如果您要发布更多代码和确切的错误消息，也许可以找到更好的解决方案。

# ios - 从 Cocoa 中的视图访问子视图的 drawRect 方法

> ID：10469861
> 
> 赞同：0
> 
> 时间：2012-05-06T10:32:31.173
> 
> 标签：ios, cocoa, class, uiview, drawrect

我有我的主 iOS 视图，其中 UIVIew 作为子视图链接到一个类（称为 graphView）。我的 graphView 有一个在应用程序启动时启动的 drawRect 方法。

现在，单击主视图中的按钮，我希望子 UIView 使用特定参数刷新（因此 drawRect 重新启动）。

我该怎么做，即如何访问最初实例化的 graphView 类？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T10:48:34.953

您可以通过在 UIView 上调用 setNeedsDisplay 来请求更新视图。然后应该由操作系统调用drawRect方法。

如果您在 XCode 设计器中创建了子视图，请在 UIViewDelegate 中创建 UIView 的出口以访问子视图实例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T10:49:00.160

您应该有一个 GraphView 的属性。通过这个，您始终可以在主视图控制器中访问您的 Graphview，即：

```
@property (strong, nonatomic) GraphView *graphView 
```

你会在你的实现中像这样合成：

```
@synthesize graphView = _graphView; 
```

当用户现在按下按钮时，您可以执行以下功能：

```
- (void) buttonTouched:(id)sender
{
    [_graphView setNeedsDisplay];
} 
```

这会将 _graphView 标记为需要重绘的视图，从而在下一个绘制周期中执行其 drawRect: 方法。

# ruby-on-rails - 与 Thinking Sphinx 的深度关联和 Sphinx 索引？

> ID：10469864
> 
> 赞同：2
> 
> 时间：2012-05-06T10:33:06.027
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, sphinx, thinking-sphinx

目前我有 ff 表：

```
Teams
id

Team_User
team_id, user_id

Users
user_id

Item
id
team_id 
```

和ff。模型：

```
Team
has_and_belongs_to_many :users

User
has_and_belongs_to_many :teams

Item
belongs_to :audit_team, :class_name => "Team", :foreign_key => "team_id" 
```

为什么我要归档是为了让 Sphinx 索引与 Item 关联的所有 user_id，我想出了这个索引定义：

```
 define_index do
    has audit_team.users(id), :as => :team_users
  end 
```

我不确定这是否正确。此外，Thinking Sphinx 并没有为此构建配置。当我重建、重新索引和运行应用程序时，ff. 出现错误：

```
index ncpar_core: no such filter attribute 'team_users' 
```

可能是什么问题，我该如何存档？

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T05:08:02.860

您可能需要在添加属性后运行 ts:rebuild 以便 Sphinx 知道它。另外，也许这是一个错字，而不是在您的代码中，但`id`在属性定义中应该是一个符号：

```
has audit_team.users(:id), :as => :team_users 
```

# objective-c - 使用 Instruments 测试 iOS 应用程序开发的最佳实践

> ID：10469866
> 
> 赞同：4
> 
> 时间：2012-05-06T10:33:31.323
> 
> 标签：objective-c, ios, xcode, testing, instruments

我想知道为客户提供的专业应用程序如何如此优雅、流畅且很少或没有应用程序崩溃。因为我总是看到问题主要是关于内存泄漏、NSZombie 或性能不够好。

我认为用 Instruments Tool 解决一些问题很棒。但我只是熟悉内存泄漏和僵尸模板。当然，我认为还有其他有趣的工具可以更好地跟踪和修复我们的应用程序。（系统使用、自动化测试等。有什么想法吗？）

**我的问题：**使用 Instruments 提升应用程序的最佳策略是什么？推荐仪器模板或任何建议？

**让我们分享您的经验并讨论！**

**更新：**我可以问更多问题，我应该将这个问题编辑到维基吗？我们可以分享战略应该不仅仅是问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T18:53:05.147

我主要（大约 98.2% 的时间）使用 Leaks and Allocations 模板。此外，很多人不知道 - 但在 Xcode 4 中，您可以直接从 Xcode 使用工具启动应用程序。从顶部菜单中，只需选择产品 -> 配置文件。

另外——即使在使用 ARC 时，您仍然应该注意如何使用内存以及如何分配对象。很多时候，ARC 做得很好，但我的代码中的一个小的编程更改导致分配的对象少得多。ARC 将在编写代码时为您提供帮助，但这不是不测试和分析您的应用程序以使其尽可能高效的借口。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T07:00:30.347

CPU 采样器 (Time Profiler) 会告诉您程序的执行时间在哪里。如果您的应用程序“慢”，该工具通常可以帮助您确定问题时间消费者在哪里，以及（如果您了解您的程序）如何解决这些问题。

定期运行此工具以了解您的程序以及它们所依赖的抽象背后的实现——不要等到问题出现。

* * *

您可以使用 CPU 采样器来记录程序线程的调用堆栈。这是以高频率记录的。采样器显示信息，例如花费最多时间的函数以及它们花费的时间百分比。您可以向调用者收取库或函数的费用，有效地选择您想要的粒度，或隐藏您无法更改的内容。一旦你找到了你感兴趣的函数/方法，你可以在 Instruments 中查看源文件，它会分解你花了这么长时间的东西。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-07T06:49:52.117

是的，仪器很关键。ARC 缓解了一些最严重的内存问题。分析（在产品菜单上）也被低估了。

查看[WWDC 2011](https://developer.apple.com/videos/wwdc/2011/)中App Frameworks 部分的程序 123，*提高应用程序的稳定性，*该程序很好地讨论了可能影响代码稳定性的其他问题（我特别认为关于测试的讨论很好）。

最后，优雅不是工具的产物，而是好的设计的产物。制作一款优雅的产品需要大量的工作。拥抱[HIG](http://developer.apple.com/library/ios/#documentation/UserExperience/Conceptual/MobileHIG/Introduction/Introduction.html)和其中包含的更广泛的哲学主题。此外，与您尊重的开发人员一起进行代码和设计审查。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-06T11:59:18.730

Apple 引入了称为自动引用计数 (ARC) 的甜美功能，几乎可以为您控制所有内存。您只需要设置属性的弱/强参数。它几乎消除了所有内存泄漏问题。至于工具——我不知道除 Instruments 之外的任何其他应用程序。Instruments 拥有所有... Instruments :) 我需要，用来做测试。

# javascript - 如何使用流星绑定客户端对象上的服务器端事件，反之亦然

> ID：10469867
> 
> 赞同：2
> 
> 时间：2012-05-06T10:33:59.357
> 
> 标签：javascript, events, rpc, meteor

是否可以将服务器端事件直接绑定到流星中的客户端对象？

例如，我想在服务器端事件触发时更新视图。另一方面，我想在用户单击视图项时触发服务器端方法。

我可以对所有事件使用[Meteor#methods](http://docs.meteor.com/#methods_header)但这似乎很奇怪。

或者我可以指定一个事件处理程序，例如在客户端和服务器范围之外使用[EventEmitter](https://github.com/Wolfy87/EventEmitter)以便它在双方都可用并触发/绑定事件 ob 那个对象？

有些人对此感到困惑，我感谢您提供正确方向的提示。

问候菲利克斯

**更新：**

在用户事件应该映射到服务器端操作的情况下，使用 Meteor#methods 非常有效。另一种方式仍然不清楚。服务器端的异步操作可以将它们的结果保存在一个集合中，该集合被发布/订阅到客户端，这反过来又可以由于反应上下文而更新某些视图。但这很奇怪，因为坚持这种信息很慢，浪费空间和时间。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T13:43:04.640

我相信您可以在服务器端使用 Collection.observe 来“观察”集合上的事件，因为客户端正在插入、更新、删除等……如果您只专注于集合，这可能是一个开始。我将它用作一种服务器端事件循环来监视集合更改。

当用户单击视图中的某些内容时，尝试将模板事件绑定到 View css 选择器，然后调用 Meteor 方法，该方法将通知服务器该事件。请参阅将键处理程序和/或按钮处理程序绑定到 Template.entry.event 的示例，然后调用 Meteor 方法通知服务器发生了某些事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T00:17:57.027

在 Session 中存储进度呢？你可以这样做：

```
Template.progress.value = function() {
    return Session.get('progress');
} 
```

然后，每当您更新服务器上的 Session 时，客户端模板都会自动获取这些更改。

出于好奇，您究竟是如何在服务器上执行异步操作的？我仍在试图弄清楚这一点。

# ios - 遍历 iOS Core 数据的单个实体

> ID：10469877
> 
> 赞同：0
> 
> 时间：2012-05-06T10:35:38.887
> 
> 标签：ios, core-data, entity, traversal

我有一个具有三个属性的实体“testData”：时间、节拍、速率。我需要每次都遍历“时间”属性，并将相应的节拍和速率值存储在 NSMutablearray 中。

```
NSManagedObjectContext *context = [self.fetchedResultsController managedObjectContext];
NSEntityDescription *entity = [[self.fetchedResultsController fetchRequest] entity];
NSManagedObject *newManagedObject = [NSEntityDescription insertNewObjectForEntityForName:[entity name] inManagedObjectContext:context];

[newManagedObject setValue:[x] forKey:@"timeStamp"];
[newManagedObject setValue:[y] forKey:@"beat"];
[newManagedObject setValue:[z] forKey:@"rate"];

// Save the context.
NSError *error = nil;
if (![context save:&error]) {
     // Replace this implementation with code to handle the error appropriately.
     // abort() causes the application to generate a crash log and terminate. You should not use this function in a shipping application, although it may be useful during development. 
    NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
    abort(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T14:35:59.920

如果我理解你想要做什么：

为该实体（无谓词）执行 FetchRequest 并将结果放入 NSArray。

在返回的数组上执行 ForIn 并将所需的对象（节拍和速率）添加到它们对应的 NSMutableArrays 中。

另外——你可能想看看[MagicalRecord](https://github.com/magicalpanda/magicalrecord)（一个开源库，它让处理 Core Data 变得更加有趣：）

# asp.net - 需要一个全局变量才能在 MVC 和 ASPX 母版页中访问

> ID：10469879
> 
> 赞同：0
> 
> 时间：2012-05-06T10:35:55.230
> 
> 标签：asp.net, asp.net-mvc, session

我的项目是 MVC3 和 ASPX 页面的组合，当然我有 2 个母版页 - 一个用于 MVC 页面，另一个用于 ASPX。

我遇到了一种情况，我需要在两个母版页中保持一个值。我尝试通过以下方式使用会话

要保存 MVC3 母版页 (_Layout.cshtml) 中的值，1\. 将 Ajax 请求发送到一个 ASPX 页面（发送变量值作为查询参数） 2\. 将值保存在会话中 3\. 导航到 ASPX 页面 4\. 从ASPX 母版页中的会话

简而言之，MVC3母版页--> Ajax Req to ASPX page to save into Session --> Navigate to ASPX page

从 ASPX 母版页保存值 1\. 保存到会话 2\. 导航到 MVC 页面 3\. 从页面控制器访问会话

我想在从 MVC3 页面导航到 ASPX 页面之前避免对 ASPX 页面的 Ajax 请求。我需要一种全局访问类型的东西来访问 MVC 母版页和 ASPX 母版页。

这可能吗。

谢谢， 桑托什

PS我试图在这里提供所有细节。如果我不清楚，请告诉我。

# java - 监听器不起作用

> ID：10469880
> 
> 赞同：2
> 
> 时间：2012-05-06T10:35:59.370
> 
> 标签：java, swing, model-view-controller

根据 MVC 模型，我正在编写一个 Java 程序。

所以问题是框架对按钮点击没有反应。（点击后我写的文字没有添加到TextArea）

起初我调用 View 和 Controller 的构造函数

```
 MessageFrame mf = new MessageFrame(con);
                MessageFrameListener mfl = new MessageFrameListener(mf); 
```

这是 MessageFrameListener 类（控制器）的一部分

```
public class MessageFrameListener{
private MessageFrame mf;

public MessageFrameListener(MessageFrame m_f){
    mf = m_f;
    m_f.addButtonListener(new SButtonListener());
}

//@Override
public class SButtonListener implements ActionListener{
    public void actionPerformed(ActionEvent e) {
            String insert = mf.getInput();
            mf.addLine(insert);
            mf.refreshInput();
    }
}
} 
```

这是 MessageFrame 类（视图）的部分

```
public class MessageFrame{

public JTextField messField;
public JTextArea dialogArea;
public JButton sendButton;
public JFrame frame;
public Contact con;
public MessageFrame (Contact con_get) {
    con = con_get;
    frame = new JFrame();

  frame.setSize(538, 299);

  JPanel panel_1 = new JPanel();
  frame.getContentPane().add(panel_1, BorderLayout.NORTH);

  JPanel panel_2 = new JPanel();
  frame.getContentPane().add(panel_2, BorderLayout.SOUTH);
  panel_2.setLayout(new BoxLayout(panel_2, BoxLayout.X_AXIS));

  messField = new JTextField();
  panel_2.add(messField);
  messField.setColumns(10);

  JButton sendButton = new JButton("Send");
  panel_2.add(sendButton);

  JPanel panel_3 = new JPanel();
  frame.getContentPane().add(panel_3, BorderLayout.EAST);

  JPanel panel_4 = new JPanel();
  frame.getContentPane().add(panel_4, BorderLayout.CENTER);
  panel_4.setLayout(new BorderLayout(0, 0));

  JTextArea dialogArea = new JTextArea();
  panel_4.add(dialogArea);
  frame.setVisible(true);

}

public String getInput(){
    return messField.getText();
}

public void refreshInput(){
    messField.setText("");
}

public void addLine(String line){
    dialogArea.append(line);
}

public void addButtonListener(ActionListener bal){
    sendButton.addActionListener(bal);
}

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T10:56:38.450

由于您已经发布了代码碎片并且还没有发布我们可以测试的正常运行的[SSCCE](http://sscce.org)，我们所能做的就是猜测——所以你会得到你所支付的，这是我的猜测：

您正在收听错误的 MessageFrame。您的程序有 2 个或更多 MessageFrame 对象，其中一个显示，另一个正在收听，因此您显示的 MessageFrame 永远不会绊倒听众。

如果这没有帮助，并且您需要*更好*的帮助，请向我们提供*更好*的问题和[sscce](http://sscce.org)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-06T11:03:54.130

如果您检查程序的输出或调试它，您肯定会找到答案。

```
Exception in thread "main" java.lang.NullPointerException
    at test3.MessageFrame.addButtonListener(Main.java:93)
    at test3.MessageFrameListener.<init>(Main.java:28)
    at test3.Main.main(Main.java:18) 
```

您通过在构造函数中再次声明它来隐藏对 JButton sendButton 的引用，因此该字段永远不会被初始化。

```
JButton sendButton = new JButton("Send");
panel_2.add(sendButton); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-06T10:39:40.367

您正在添加一个空字符串：

```
String insert = mf.getInput(); //all it does is: messField.getText();
mf.addLine(insert); //adding the empty string
mf.refreshInput(); //all it does is: messField.setText(""); 
```

# android - 如何像在 iOS 中一样使用 Button 在 Android EditText 中制作？

> ID：10469883
> 
> 赞同：0
> 
> 时间：2012-05-06T10:36:31.977
> 
> 标签：android, android-edittext, android-button

我可以用 Android 默认方式对下面的图片做类似的事情吗？[在此处](https://docs.google.com/open?id=0B8PY9GkvB5pTVnQxaEpaWFM4U2s)查看示例图片

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T10:39:37.560

是的，你用正确的图形制作了你的编辑框，然后在它旁边放了另一个按钮。

# mysql - 如何通过过滤同一关系来查询多对多连接？

> ID：10469884
> 
> 赞同：2
> 
> 时间：2012-05-06T10:36:39.823
> 
> 标签：mysql, sql, many-to-many

我使用这些模型表简化了多对多关系案例。

```
Posts:
------------------------------
|   id |    title |     body |
------------------------------
|    1 |      One |    text1 |
|    2 |      Two |    text2 |
|    3 |    Three |    text3 |
------------------------------

Tags:
-------------------
|   id |     name |
-------------------
|    1 |      SQL |
|    2 |     GLSL |
|    3 |      PHP |
-------------------

Post_tags:
------------------------------
|   id |    p_id |      t_id |
------------------------------
|    1 |       1 |         1 |
|    2 |       1 |         3 |
|    3 |       2 |         1 |
|    3 |       3 |         2 |
------------------------------ 
```

我的目标是查询带有特定标签的帖子，我对此没有问题，但我也想显示帖子的所有相关标签，而不仅仅是我查询的标签。我的查询如下所示：

```
SELECT p.Title, p.Body, t.name
FROM Posts p
LEFT JOIN Post_tags pt ON p.id = pt.p_id
LEFT JOIN Tags t ON t.id = pt.t_id
WHERE t.name LIKE '%SQL%' 
```

这将获取带有“SQL”标签的帖子，但它仅将带有标签的帖子表与找到“SQL”字符串的标签连接起来，因此与帖子关联的另一个标签“PHP”不会被连接起来。

显然问题是我在 WHERE 子句中加入表，但是如何在一个查询或（最好是子查询）中解决这个问题？

目前，我在我的应用程序中的两个单独的查询中执行此操作，一个用于选择匹配的帖子，另一个用于检索完整的帖子数据。这不是那么有效，而且似乎也是一个蹩脚的解决方案，而且我还没有找到更好的解决方案，所以我决定询问 StackOverflow 社区。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T12:54:34.140

我能想到的最简洁（可能很快）：

```
select p.*, '' as x, t.name
from Posts p
join Posts_tags pt 
ON  pt.p_id = p.id 
AND pt.p_id in (select p_id 
                from Posts_tags 
                join Tags on Tags.id = Posts_tags.t_id 
                where Tags.name like '%SQL%')
join Tags t on t.id = pt.t_id; 
```

如果您需要将标签折叠在一行中，请使用 GROUP_CONCAT：

```
select p.*, group_concat(t.name) as tags
from Posts p
join Posts_tags pt 
ON  pt.p_id = p.id 
AND pt.p_id in (select p_id 
                from Posts_tags 
                join Tags on Tags.id = Posts_tags.t_id 
                where Tags.name like '%SQL%')
join Tags t on t.id = pt.t_id
group by p.id; 
```

输出：

```
ID  TITLE   BODY    TAGS
1   One     text1   SQL,PHP
2   Two     text2   SQL 
```

现场测试：[http ://www.sqlfiddle.com/#!2/52b3b/2](http://www.sqlfiddle.com/#!2/52b3b/2)

* * *

**更新**

有一个比这更优化的解决方案，请参见此处：[https ://stackoverflow.com/a/10471529](https://stackoverflow.com/a/10471529)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-06T15:00:54.347

我的[旧答案](https://stackoverflow.com/a/10470671)不是最短的，这是最短的：

```
select p.*, '' as x, t.name, t.name like '%SQL%'
from Posts p
join Posts_tags pt on pt.p_id = p.id 
join Tags t on t.id = pt.t_id; 
```

输出：

```
ID  TITLE   BODY    X       NAME    T.NAME LIKE '%SQL%'
1   One     text1           SQL     1
1   One     text1           PHP     0
2   Two     text2           SQL     1
3   Three   text3           GLSL    0 
```

因此，如果我们按 ID 分组，并检查组中是否至少有一个（由 bit_or 辅助；Postgresql 也有这个，恰当地命名为 bool_or）满足 '%SQL%' 标准，它的位是 ON（又名布尔=真）。我们可以选择该组并保留该组下的所有标签，例如，标签 id 1 出现在帖子 1 上，而帖子 1 有其他标签，即 #3 或 PHP。属于同一 Post ID 的所有标签都不会被丢弃，因为我们不会使用`WHERE`过滤器，`HAVING`而是使用过滤器：

```
select p.*, group_concat(t.name) as tags
from Posts p
join Posts_tags pt on pt.p_id = p.id 
join Tags t on t.id = pt.t_id
group by p.id
having bit_or(t.name like '%SQL%'); 
```

我们也可以将其重写为：

```
select p.*, group_concat(t.name) as tags
from Posts p
join Posts_tags pt on pt.p_id = p.id 
join Tags t on t.id = pt.t_id
group by p.id
having sum(t.name like '%SQL%') >= 1; 
```

`BIT_OR`就像`IN`, or `ANY`, 所以它比评估事物更具语义`SUM`

输出：

```
D   TITLE   BODY    TAGS
1   One     text1   PHP,SQL
2   Two     text2   SQL 
```

现场测试：[http ://www.sqlfiddle.com/#!2/52b3b/26](http://www.sqlfiddle.com/#!2/52b3b/26)

* * *

我在stackoverflow上学到了很多东西。在我的旧答案之后，我正在考虑如何在 Postgresql 中使用窗口函数（MySQL 没有）通过`SUM OVER partition`. 然后我想到了 Postgresql 的`bool_or`,`bool_and`和`every`函数。然后我记得MySQL有`bit_or`:-)

使用的最后一个解决方案`SUM`只是事后的想法，当我想到这`bit_or`只是**至少一个语义为 true**时，很明显你也可以使用`HAVING SUM(condition) >= 1`。现在它适用于所有数据库:-)

我最终没有通过窗口函数解决它，上面的解决方案现在适用于所有数据库:-)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-06T10:47:10.033

为所有标签添加单独的内部连接

```
SELECT p.Title, p.Body, t2.name
FROM Posts p
LEFT JOIN Post_tags pt ON p.id = pt.p_id
LEFT JOIN Tags t ON t.id = pt.t_id
INNER JOIN Post_tags pt2 ON p.id = pt2.p_id
INNER JOIN Tags t2 on ON t2.id = pt2.t_id
WHERE t.name LIKE '%SQL%' 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-06T10:53:58.687

试试这个：

```
SELECT p.Title, p.Body, t.name,GROUP_CONCAT(t2.name) AS `tags`
FROM Posts p
LEFT JOIN Post_tags pt ON p.id = pt.p_id
LEFT JOIN Tags t ON t.id = pt.t_id
JOIN Tags t2 ON t2.id = p.id
WHERE t.name LIKE '%SQL%' 
```

这使用 GROUP_CONCAT 创建与该特定帖子关联的标签的逗号分隔列表。查询的输出：

```
TITLE BODY   NAME   tags
One   text1  SQL    SQL,GLSL 
```

SQL小提琴：[http ://sqlfiddle.com/#!2/2f698/9](http://sqlfiddle.com/#!2/2f698/9)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-06T15:01:31.823

另一种方法是围绕`posts_tags`与自身的内部连接构建：

```
SELECT *
FROM posts_tags pt1
JOIN posts_tags pt2
USING(p_id)
WHERE pt2.t_id = 1;

+------+------+------+
| p_id | t_id | t_id |
+------+------+------+
|    1 |    1 |    1 |
|    1 |    3 |    1 |
|    1 |    4 |    1 |
|    3 |    1 |    1 |
|    3 |    2 |    1 |
|    5 |    1 |    1 |
|    5 |    3 |    1 |
|    7 |    1 |    1 |
+------+------+------+
8 rows in set (0.00 sec) 
```

如果没有该`WHERE`子句，内部连接将给出与每个帖子关联的所有标签的完整笛卡尔积 (t_id 1, t_id 2)。将该`WHERE`子句应用于一半的笛卡尔积可以为您提供您正在寻找的“包含 x 的集合的所有成员”结构。（上面的例子表明只有与标签 id 1 关联的帖子被检索到；此外，与这些帖子关联的所有标签也都存在。）现在它是两个更简单的连接来获取与 p_id 和 t_id 关联的信息：

```
SELECT title,name
FROM posts_tags pt1
JOIN posts_tags pt2
  ON(pt1.p_id = pt2.p_id)
JOIN posts
  ON(pt1.p_id = posts.id)
JOIN tags
  ON (pt1.t_id = tags.id)
WHERE pt2.t_id = 1;

+---------+--------+
| title   | name   |
+---------+--------+
| first   | php    |
| first   | skiing |
| first   | tuna   |
| third   | php    |
| third   | sql    |
| fifth   | php    |
| fifth   | skiing |
| seventh | php    |
+---------+--------+
8 rows in set (0.01 sec) 
```

# c++ - *** 检测到 glibc *** ./burcu.exe: free(): invalid next size (fast): 0x000000001dad6310 ***

> ID：10469886
> 
> 赞同：0
> 
> 时间：2012-05-06T10:37:12.217
> 
> 标签：c++, delete-operator

当我删除二维指针数组时，我的程序出现问题。我确实搜索了这个问题，但在我的代码中看不到任何错误。我不知道这段代码有什么问题：

矩阵.h：

```
#ifndef _MATRIX_
#define _MATRIX_

#include<iostream>
#include<string>

 using namespace std;

    template <class Type>

class Matrix {
    int line, column;
    Type** arr;

public:
    Matrix/*<Type> */(int, int);
    void print() const;
    ~Matrix/*<Type>*/();
    Type getElement (int, int) const;
    bool contains (int) const;

};

    template <class Type>
Matrix<Type> ::Matrix (int line_in, int column_in)

{ line=line_in;
  column= column_in;
  arr = new Type*[column];

   for( int i = 0 ; i < column ; i++ )
        arr[i] = new Type[line];      

    for( int i=0; i<line; i++)
        for( int j=0; j<column; j++)
            {arr[i][j]=(Type) (rand()%101)/10;
    /*cout<< arr[i][j]<<endl;*/}

}

template <class Type>
Matrix<Type>::~Matrix ()

{ 
    for(int i=0;i<column;++i)
    delete [] arr[i];
    delete [] arr;
}

template <class Type>
Type Matrix<Type>::getElement( int index_1, int index_2) const

{   string error= "Index out of bounds";
    if (index_1>line||index_2>column) throw error;
    else
    return arr[index_1-1][index_2-1];

}

 /*     template <class Type>
    void Matrix <Type>::print() const

    {   for( int i=0; i<line; i++)
          {for( int j=0; j<column; j++)
            {cout<< arr[i][j] << "  ";}
         cout<<"\n";}
    }
    */
 /*   template <class Type>
bool Matrix <Type>::contains( int number) const

{   for( int i=0; i<line; i++)
     { for( int j=0; j<column; j++)
         { if( arr[i][j]== number)
         return true;}
}
    return false;
}*/

#endif 
```

主.cpp：

```
#include <iostream>
#include <ctime>
#include <string>
#include<cstdlib>
#include<conio.h>
#include"matrix.h"
using namespace std;

int main()
{
    srand(time(NULL));
Matrix<int> m1(3,5);  // creating some objects 
Matrix<int> m2(3,5);  // matrices’ elements are assigned randomly from 0 to 10
Matrix<double> m3(5,5);
Matrix<double> m4(5,6);

/*  try{
    cout << m1.getElement(3,5) << endl;   // trying to get the element at(3,6)
}
catch(const string & err_msg)
{ 
    cout << err_msg << endl;   
}*/

//cout << "Printing m4" << endl;
//m4.print();                              // printing m4

/*try{ 
    Matrix<double> m6 = m4 / m3;        // trying to divide two matrices
}
catch(const string & err_msg)
{ 
    cout << err_msg << endl;   
} */

 // cout << "Printing m1" << endl;
 // m1.print(); 

 /* if(m1.contains(4))     // checking if the matrix has an element with value 4
    cout << "Matrix contains the element" << endl;
else
    cout << "Matrix does not contain the element" << endl;*/

 /* Matrix<int> m5 = m2;
cout << "Printing m5" << endl;
m5.print();

try{
    --m1;           // decrement m1's matrix elements by 1
    m5 = m1 + m2;   // sum m1 and m2 object's matrices and assign result to m5
    ++m3;           // increment m1's matrix elements by 1
    m2 = m5 / m1;   
    if(m5 == m1)    // comparing two objects
        cout << "Objects are equal" << endl;
    else
        cout << "Objects are not equal" << endl;
}
catch(const string & err_msg)
{ 
    cout << err_msg << endl;   
}

cout << "Printing m5" << endl;
m5.print();
    }
  */

getch();

return 0;
    } 
```

Linux 上的错误消息：

```
*** glibc detected *** ./burcu.exe: free(): invalid next size (fast): 0x000000001dad6310 ***
 ======= Backtrace: =========
 /lib64/libc.so.6[0x38e3e70d7f]
/lib64/libc.so.6(cfree+0x4b)[0x38e3e711db]
./burcu.exe[0x400c45]
./burcu.exe(__gxx_personality_v0+0x1f0)[0x400908]
/lib64/libc.so.6(__libc_start_main+0xf4)[0x38e3e1d994]
./burcu.exe(__gxx_personality_v0+0x61)[0x400779]
======= Memory map: ========
 00400000-00401000 r-xp 00000000 00:16 28050037                           /users/lnxsrv1/ee/akgunhas/burcu3/burcu.exe
 00601000-00602000 rw-p 00001000 00:16 28050037                           /users/lnxsrv1   /ee/akgunhas/burcu3/burcu.exe
1dad6000-1daf7000 rw-p 1dad6000 00:00 0 
38e3a00000-38e3a1c000 r-xp 00000000 fd:00 1593483                        /lib64/ld-2.5.so
38e3c1c000-38e3c1d000 r--p 0001c000 fd:00 1593483                        /lib64/ld-2.5.so
38e3c1d000-38e3c1e000 rw-p 0001d000 fd:00 1593483                        /lib64/ld-2.5.so
38e3e00000-38e3f4d000 r-xp 00000000 fd:00 32363                          /lib64/libc-2.5.so
38e3f4d000-38e414d000 ---p 0014d000 fd:00 32363                          /lib64/libc-2.5.so
38e414d000-38e4151000 r--p 0014d000 fd:00 32363                          /lib64/libc-2.5.so
38e4151000-38e4152000 rw-p 00151000 fd:00 32363                          /lib64/libc-2.5.so
38e4152000-38e4157000 rw-p 38e4152000 00:00 0 
38e4200000-38e4282000 r-xp 00000000 fd:00 291216                         /lib64/libm-2.5.so
38e4282000-38e4481000 ---p 00082000 fd:00 291216                         /lib64/libm-2.5.so
38e4481000-38e4482000 r--p 00081000 fd:00 291216                         /lib64/libm-2.5.so
38e4482000-38e4483000 rw-p 00082000 fd:00 291216                         /lib64/libm-2.5.so
38e7a00000-38e7a0d000 r-xp 00000000 fd:00 291213                         /lib64/libgcc_s-4.1.2-20080825.so.1
38e7a0d000-38e7c0d000 ---p 0000d000 fd:00 291213                         /lib64/libgcc_s-   4.1.2-20080825.so.1
 38e7c0d000-38e7c0e000 rw-p 0000d000 fd:00 291213                         /lib64/libgcc_s-   4.1.2-20080825.so.1
38eae00000-38eaee6000 r-xp 00000000 fd:00 785480                         /usr/lib64/libstdc++.so.6.0.8
38eaee6000-38eb0e5000 ---p 000e6000 fd:00 785480                         /usr/lib64/libstdc++.so.6.0.8
38eb0e5000-38eb0eb000 r--p 000e5000 fd:00 785480                         /usr/lib64/libstdc++.so.6.0.8
38eb0eb000-38eb0ee000 rw-p 000eb000 fd:00 785480                         /usr/lib64       /libstdc++.so.6.0.8
38eb0ee000-38eb100000 rw-p 38eb0ee000 00:00 0 
2abb21ac1000-2abb21ac3000 rw-p 2abb21ac1000 00:00 0 
2abb21ad9000-2abb21adb000 rw-p 2abb21ad9000 00:00 0 
7fff72e31000-7fff72e46000 rw-p 7ffffffe9000 00:00 0                      [stack]
7fff72f24000-7fff72f27000 r-xp 7fff72f24000 00:00 0                      [vdso]
ffffffffff600000-ffffffffffe00000 ---p 00000000 00:00 0                  [vsyscall]
Aborted 
```

在 VS 2010 中：

```
HEAP[burcuhw3.exe]: Heap block at 001738B0 modified at 00173904 past requested size of 4c
Windows has triggered a breakpoint in burcuhw3.exe.

This may be due to a corruption of the heap, which indicates a bug in burcuhw3.exe or any of the DLLs it has loaded.

This may also be due to the user pressing F12 while burcuhw3.exe has focus.

The output window may have more diagnostic information.
The program '[1320] burcuhw3.exe: Native' has exited with code 0 (0x0). 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T10:54:50.307

似乎内部数据是在构造函数中分配的`arr[column][line]`，然后用作`arr[line][column]`。那将是一个问题！

# jquery - 我怎么知道哪个元素有一个类？

> ID：10469888
> 
> 赞同：1
> 
> 时间：2012-05-06T10:37:52.543
> 
> 标签：jquery, class, html

我的页面有六个`div`元素。

使用 jQuery 和 Z-Index，单击一个按钮会增加一个按钮的宽度`div`以覆盖所有其他按钮。在此过程中，它还假设类：`active`(z-index:900)。

当我单击另一个按钮时，`div`该类`active`应返回其原始大小和位置。原始值保存到变量中，但我如何知道`active`类中元素的名称？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T10:45:59.587

这是[`jQuery`函数](http://api.jquery.com/jQuery/)aka的基本特征之一`$()`。

这样做：

```
var elements = $(".myclass"); 
```

将为您提供所有使用 CSS 类的元素`myclass`。从那里你可以这样做：

```
elements.css({
    left: orig_left,
    top: orig_top,
    width: orig_width,
    height: orig_height
}); 
```

样式更改将立即应用于所有元素。

但是，如果您希望将元素恢复为其默认值（即原始 html 中的内容），您可以这样做：

```
elements.css({
    left: null,
    top: null,
    width: null,
    height: null
}); 
```

甚至：

```
elements.attr("style",""); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T10:40:10.927

`$('.active')[0].id` 将为您提供具有“活动”类的第一个元素的 ID

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-06T10:40:28.363

您可以选择所有具有类的元素：`$('.youClass')`。

# php - PHP/mySQL - 如何使用更多外键将嵌套行提取到多维数组中

> ID：10469889
> 
> 赞同：-1
> 
> 时间：2012-05-06T10:37:57.293
> 
> 标签：php, mysql, sql, arrays

好吧，问题就像这里：[PHP/mySQL - how to fetch nested rows into multidimensinal array](https://stackoverflow.com/questions/357122/php-mysql-how-to-fetch-nested-rows-into-multidimensinal-array)

它的工作（除了添加太多的列），但如果我有更多的主键呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T11:22:45.477

没关系，同样的原则成立：

```
$sql = <<<EOL
SELECT table1.pk AS pk1, table2.pk AS pk2, table3.pk AS pk3, etc...
FROM yourtable
LEFT JOIN ...
EOL;
$result = mysql_query($sql) or die(mysql_error());
$data = array();
while($row = mysql_fetch_assoc($data)) {
    $data[$pk1][$pk2][$pk3][etc...] = $row;
} 
```

# php - 来自确切表格的数据

> ID：10469895
> 
> 赞同：2
> 
> 时间：2012-05-06T10:39:40.727
> 
> 标签：php, jquery, ajax, forms

我一直在谷歌搜索，但仍然没有答案，所以我决定在这里问这个问题： PHP 中有没有办法检查我在某些脚本中收到的数据是否来自页面上的特定表单？我问是因为每个人都可以看到我用于将数据保存到我的数据库的脚本的名称，所以如果有人能够找出整个 URL，他也能够向脚本发送一些假数据，我需要一个条件，即仅当数据来自我页面上的正确表单时才会触发保存过程。

我正在使用 jQuery 调用 AJAX 函数，所以基本上如果我单击“发送”按钮，就会触发 $.POST() 方法来调用脚本以保存数据。

谢谢，托马斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T11:20:14.623

## 使用令牌检查请求是否有效

提交数据时，您始终可以添加某种安全令牌：

令牌可以很容易地扩展到许多不同的用途，并且在检查某些请求是否有效时覆盖广泛的区域，例如，您可以让您的非关键表单向公众开放，要求用户从某个页面获取他们的密钥（*强制他们打开该页面*），然后在提交数据时使用这些键来识别它们。

当然，所有这些都可以对用户完全透明，因为您可以通过 cookie（*或会话 cookie，在这里无关紧要，因为服务器密钥在使用后应更改并在指定时间内失效或当用户的身份发生变化时*）。
在这个使用示例中，只有打开首页的用户才能向服务器提交数据。

另一种情况是当 cookie 在包含用于向服务器提交数据的表单的同一页面上分发时。每个打开页面的用户都会有他们的密钥来立即提交数据，但是如果有人试图从外部发出请求，它将失败。
请参阅[OWASP Cross Site Request Forgery](https://www.owasp.org/index.php/Cross-Site_Request_Forgery_%28CSRF%29)
和[codinghorror.com 博客 CSRF and You](http://www.codinghorror.com/blog/2008/09/cross-site-request-forgeries-and-you.html)

### 只有AJAX？

这是我对另一个问题的回答，这个答案涵盖了向 ajax 请求插入附加数据的不同方法：[Liftweb：创建一个可以传统方式和 AJAX 提交的表单](https://stackoverflow.com/q/7784818/1338846)（仔细查看

```
$.ajax({ 
    ... 
    data: /* here */ 
    ... 
```

## 目前我正在以这种方式使用令牌：

### 用于提交的表格

这个隐藏的输入可以添加到表单中，这不是必需的，因为您可以使用前面[*在另一个答案*](https://stackoverflow.com/a/10235181/1338846)中描述的方法。

```
<input type="hidden" name="formid" value="<?php echo generateFormId(); ?>" /> 
```

### 函数 generateFormId()

只需生成随机字符串并将其保存到会话存储中

```
function generateFormId() {
    // Insert some random string: base64_encode is not really needed here
    $_SESSION['FORM_ID'] = 'FormID'.base64_encode( uniqid() );
    // If you want longer random string mixed with some other method just add them:
    //$_SESSION['FORM_ID'] = 'FormID'.base64_encode( crypt(uniqid()).uniqid('',true) );
    return $_SESSION['FORM_ID'];
} 
```

### 处理提交的表单数据

```
if (!isset($_SESSION['FORM_ID']) || $_SESSION['FORM_ID'] != $_POST['formid']) {
    // You can use these if you want to redirect user back to form, preserving values:
    //$_SESSION['RELOAD_POST'] = $_POST;
    //$_SESSION['RELOAD_ID'] = uniqid('re');
    echo 'Form expired, cannot submit values.';
    //echo '<a href="form.php?reload='.$_SESSION['RELOAD_ID'].'">Go back and try again</a>';
    exit(1); // <== Stop processing in case of error.
} 
```

## 如果您需要检查哪个表单正在提交数据

然后，您可以在生成 id 时添加前缀，并在处理表单数据时检查该前缀。

当一个 php 脚本处理许多不同的形式时，就会出现这种情况。

* * *

**请记住，防止恶意用户的唯一最终答案**是从您的服务器上拔下所有电线......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T10:45:11.790

这是一个有趣的话题，但你错过了一个重要的点：垃圾邮件机器人/坏用户也可以通过使用特定的表单页面（！）来轰炸你的数据库。

因此，问题不是如何检查请求是否来自该页面，而是如何检查他是普通用户还是机器人/垃圾邮件发送者/机器人。

使用验证码进行操作，例如[http://www.recaptcha.net](http://www.recaptcha.net)

如果我稍微误解了这个问题：如果您想确保请求来自“真实”用户，您将不得不使用登录系统/用户系统并检查用户 ID/密码（通过数据库或会话）每个你想做一个数据库请求的时间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-06T10:56:35.873

您可以通过检查以下内容来验证页面是否通过 AJAX 被请求：

```
strtolower($_SERVER['HTTP_X_REQUESTED_WITH']) != 'xmlhttprequest' 
```

您还可以检查[HTTP_REFERER](http://php.net/manual/en/reserved.variables.server.php)。

但听起来您正在尝试保护处理易受攻击数据的页面。这需要的不仅仅是上述两件事。我建议在谷歌上搜索“CSRF Forgery”以获取更多信息。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-06T11:05:32.280

这些是你应该看看的东西。

1.  Capthcas。
2.  推荐人检查。
3.  使用 POST 而不是 GET。[仍然 Curl 可以自动化它。]

# c++ - 错误：移植项目时“不允许不完整的类型”

> ID：10469896
> 
> 赞同：1
> 
> 时间：2012-05-06T10:39:44.930
> 
> 标签：c++, templates, singleton, incomplete-type

我将[http://www.drdobbs.com/embedded-systems/225700666](http://www.drdobbs.com/embedded-systems/225700666)移植到微处理器`Keil MDK`。`ARM`该框架可以`gcc`在我的桌面上编译并正常工作，但使用`Keil`编译器会给我一个错误：

`logging/singleton.h(65): error: #70: incomplete type is not allowed`

以下代码显示了`singleton`我得到此错误的地方的实现。这个错误来自哪里？

```
namespace logging {

  namespace detail {

      template <typename T>
      class singleton
      {
        private:
          struct obj
          {
            obj() { singleton<T>::instance(); }
            inline void empty() const { }
          };
          static obj __obj;

          singleton();

        public:
          typedef T obj_type;

          static obj_type & instance()
          {
            static obj_type obj;  // <-- Here I get this error

            __obj.empty();

            return obj;
          }
      };
      template <typename T>
      typename singleton<T>::obj
      singleton<T>::__obj;

  } /* detail */
} /* logging */ 
```

编辑：在`singleton`此处实例化

```
template <typename log_t, typename T>
struct Obj {
    static return_type& obj () {
        typedef singleton<return_type> log_output;
        return log_output::instance();
    }
}; 
```

`return_type`typedef在哪里：

```
typedef R return_type; 
```

这是父模板的参数：

```
template<typename Level = ::logging::Void, typename R = loggingReturnType>
    class Logger {
       ...
    }; 
```

`loggingReturnType`在类定义之上向前声明：

```
struct loggingReturnType; 
```

编辑 2：这`loggingReturnType`是通过以下 makro 生成的。

```
#define LOGGING_DEFINE_OUTPUT(BASE)                                           \
namespace logging {                                                           \
    struct loggingReturnType : public BASE {                                  \
            /*! \brief The provided typedef is used for compile time          \
             *         selection of different implementation of the           \
             *         %logging framework. Thus, it is necessary              \
             *         that any output type supports this type                \
             *         definition, why it is defined here.                    \
             */                                                               \
            typedef BASE    output_base_type;                                 \
        };                                                                    \
} 
```

这个 makro 在配置头中被调用。

编辑 3：她是预处理器输出的链接：http: [//www.pasteall.org/31617/cpp](http://www.pasteall.org/31617/cpp)。该文件使用`g++`. 的定义`loggingReturnType`是 - 之前的最后一个，`main`所以单例不是确切的类型，但它仍然有效。我还查看了`Keil`编译器的预处理器输出，几乎是一样的。

那么这里出了什么问题呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T11:41:13.813

根据您在此处输入的信息，错误消息非常有意义。该代码试图在堆栈上创建一个对象的实例。该对象的类型只是前向声明的，但当时编译器没有可用的定义。

在必须创建此类型的实例之前，您需要使编译器可以使用此类型的定义。

# android - Android - 在动画中生成视图的阴影，如拖放事件

> ID：10469897
> 
> 赞同：1
> 
> 时间：2012-05-06T10:39:50.087
> 
> 标签：android, android-animation

在我的 android 应用程序中，我得到了一个动画，其中视图是从一个点翻译到另一个点，我可以使用它`TranslateAnimation`，但问题是，我需要留下视图的阴影，就像拖放一样，

我在课堂上尝试过hack，`DragShadowBuilder`但没有成功，谁能指导我如何实现这一目标。

谢谢，

# c# - 停止主线程直到 WCF 调用返回？

> ID：10469901
> 
> 赞同：-1
> 
> 时间：2012-05-06T10:40:46.093
> 
> 标签：c#, .net, wcf, web-services

我是 Web 服务的新手，从 WCF 开始。我有多个 Web 服务调用，每个调用都是异步完成的。但我的问题是，主线程应该停止，直到所有 Web 服务调用都返回，并且当所有 Web 服务调用都返回时，它才应该继续。

我在这里尝试了两件事：

1.  使用布尔变量和无限循环来停止主线程。我更改了`Completed`Web 服务调用方法中的值。它导致了一个无限循环，并且`Completed`从未被调用。

2.  我从主线程进行了 Web 服务调用，在进行了 Web 服务调用之后，我在主线程上调用了 Join 方法来停止该线程，直到 Web 服务返回。

这是代码片段：

```
ServerMonitoringBoardDataService.ServerMonitoringBoardDataServiceClient c = new ServerMonitoringBoardDataService.ServerMonitoringBoardDataServiceClient();
c.GetEnvironmentAndServersCompleted += new EventHandler<ServerMonitoringBoardDataService.GetEnvironmentAndServersCompletedEventArgs>(c_GetEnvironmentAndServersCompleted);
c.GetEnvironmentAndServersAsync();

void c_GetEnvironmentAndServersCompleted(object sender, ServerMonitoringBoardDataService.GetEnvironmentAndServersCompletedEventArgs e)
{
    var x = e.Result;
} 
```

我遇到问题的原因是，多个 Web 服务调用以列表形式返回数据，我对这些数据进行了一些操作，然后将其显示在 UI 上。Web 服务调用是在静态构造函数中进行的，以便获取数据只需一次，并多次操作和显示。

但是发生的情况是主线程在获取数据并继续执行操作之前不会停止，我得到一个空异常。

请为我提出一条出路，以及为什么上述方法不起作用。

提前感谢您对此提供的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T11:01:14.140

最简单的代码是使用异步操作模型（即您调用`BeginXXX`它，它会返回一个`IAsyncResult`给您）并按照[此处](http://msdn.microsoft.com/en-us/library/ms228967.aspx)概述的过程进行所有异步调用。如果您使用 Visual Studio 附带的服务代理生成器，则此模型是开箱即用的。

您将从进行异步调用开始：

```
var async1 = service.BeginFoo();
var async2 = service.BeginBar();
// more similar calls 
```

然后一一结束——顺序无关紧要：

```
var result1 = service.EndFoo(async1);
var result2 = service.EndBar(async2);
// etc 
```

当然在实践中你需要添加错误处理，所以它不会那么短。

# java - android 应用中的 BatteryService 类型的方法 getPreferenceManager() 未定义

> ID：10469902
> 
> 赞同：1
> 
> 时间：2012-05-06T10:40:49.260
> 
> 标签：java, android

我正在提供服务，所以我有从服务扩展而来的服务类。我从 PreferenceScreen 获得一个复选框，并根据它是否被选中执行操作。要获得 CheckBoxPreference，我使用 getPreferenceManager() 方法。但它有红色下划线。当我将鼠标悬停在它上面时，我会看到这个错误`The method getPreferenceManager() is undefined for the type BatteryService`。当我在我的主类中使用相同的代码时，它就可以工作了。这是我的代码

```
public int onStartCommand(Intent intent, int flags, int startId) {
    initNotification();

    final CheckBoxPreference checkboxPref = (CheckBoxPreference) getPreferenceManager().findPreference("cbAlarm");

    checkboxPref.setOnPreferenceChangeListener(new Preference.OnPreferenceChangeListener() {
                public boolean onPreferenceChange(Preference preference,
                        Object newValue) {
                    if (newValue.toString().equals("true")) {
                        Toast.makeText(getApplicationContext(), "Service Started", Toast.LENGTH_LONG).show();
                        registerReceiver(batteryInfoReceiver, new IntentFilter(
                                Intent.ACTION_BATTERY_CHANGED));
                    } else if (newValue.toString().equals("false")) {
                        stopService(new Intent(getBaseContext(),
                                BatteryService.class));
                        Toast.makeText(getApplicationContext(),
                                "Unchecked", Toast.LENGTH_SHORT).show();
                    }
                    return true;
                }
            });
    return START_STICKY;
} 
```

我怎么解决这个问题？请帮忙

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T22:27:42.150

该`getPreferencesManager()`函数不适用于`Service`派生对象 - 仅适用于您可能从中复制上述代码的 PreferenceActivity 或 PreferenceFragment 派生对象，或单个 Preference 对象。

如果您只想在服务启动时对复选框首选项的值进行采样，请使用以下内容：

```
SharedPreferences sp = PreferenceManager.getDefaultSharedPreferences(this);
boolean alarm = sp.getBoolean("cbAlarm", false);    // defaulting to false 
```

但是，我从您的侦听器代码中猜测，如果用户更改设置，您也希望收到通知。这意味着将 onPreferenceChange 保留在 PreferenceActivity/PreferenceFragment 中，并向服务发送消息。为此，请考虑使用[Android 之类的最佳方式从 Activity 到 Service / Engine 进行通信](https://stackoverflow.com/questions/12105883/android-best-way-to-communicate-from-an-activity-to-a-service-engine)，或者如果在警报关闭时它无事可做，则只需启动/停止整个服务！

# javascript - 使用 Javascript 平均时间

> ID：10469903
> 
> 赞同：3
> 
> 时间：2012-05-06T10:40:56.363
> 
> 标签：javascript, jquery, cordova, timer, average

我正在使用 Phonegap 和 JQuery 构建一个应用程序。

应用程序以格式存储（使用 window.localStorage ）一组时间（不超过 10 次）。

```
 HH:MM:SS.mm 
```

列表中有许多“零”时间，例如 '00:00:00.00' iphonegap、javascript 消除使用..

```
 function removeA(arr){
        var what, a= arguments, L= a.length, ax;
        while(L> 1 && arr.length){
            what= a[--L];
            while((ax= arr.indexOf(what))!= -1){
                arr.splice(ax, 1);
            }
        }
        return arr;
    }

    scores.sort();
    removeA(scores,'00:00:00.00'); 
```

这样我就得到了最快的时间，而且只有那些有价值的时间。

我需要从剩余的值中得出这些时间的平均值。

```
eg:  00:00:03.00
     00:00:05.00
     00:00:02.00
     00:00:06.00

=    00:00:04.00 
```

提前致谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T10:54:03.537

如果您还要有毫秒值并且想要考虑它们，则将时间转换为毫秒。现在，将它们相加并除以记录数。否则，将所有内容转换为秒并找到平均值 - 当然，您会在几秒内得到答案。

如果花一点时间考虑一下，转换非常简单。以下是转换方法。

**以毫秒为单位：**

```
function convertToMS(timeStr) {      // timeStr in format 'HH:MM:SS.mm'
    var I = parseInt;  // for brevity
    var t = timeStr,
        h = I( t.substr(0,2) ),
        m = I( t.substr(3,2) ),
        s = I( t.substr(6,2) ),
        ms = I( t.substr(9,2) );

    return h * 3600000 + m * 60000 + s * 1000 + ms;
} 
```

**到秒：**

```
function convertToS(timeStr) {      // timeStr in format 'HH:MM:SS[.mm]'  -- .mm is ignored.
    var I = parseInt;  // for brevity
    var t = timeStr,
        h = I( t.substr(0,2) ),
        m = I( t.substr(3,2) ),
        s = I( t.substr(6,2) );

    return h * 3600 + m * 60 + s;
} 
```

转换完成后，将它们相加并找到平均值。

**更新：** 为了转换回“HH:MM:SS.mm”格式，我们将时间改回“块”的小时、分钟、秒和（如果适用）毫秒。

```
function chunkifyFromSec(time) {  // time in s
    var t = "",
        h = Math.floor(time / 3600),
        m = Math.floor( (t - (h * 3600)) / 60 ),
        s = t - (h * 3600) - (m * 60);
    return {
        HH: h, MM: m, SS: s, mm: 0
    };
}
function chunkifyFromMS(time) {   // time in ms
    var t = "",
        h = Math.floor(time / 3600000),
        m = Math.floor( (t - (h * 3600000)) / 60000 ),
        s = Math.floor( (t - (h * 3600000) - (m * 60000)) / 1000 ),
        mm = t - (h * 3600000) - (m * 600000) - (s * 1000);
    return {
        HH: h, MM: m, SS: s, mm: mm
    };
} 
```

然后，我们使用以下命令以 'HH:MM:SS.mm' 格式返回字符串：

```
function toTimeStr(chunks) {
    return
           (chunks.HH < 0 ? '0' : '') + chunks.HH + ":"
           += (chunks.MM < 0 ? '0' : '') + chunks.MM + ":"
           += (chunks.SS < 0 ? '0' : '') + chunks.SS + "."
           += (chunks.mm < 0 ? '0' : '') + chunks.mm
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-06T12:01:42.107

```
var times= [ '00:00:03.00', '00:00:05.00', '00:00:02.00', '00:00:06.00'],
    date = 0,
    result = '';
function offsetify(t){
    return t < 10 ? '0' + t : t;
}
for(var x = 0; x < times.length; x++ ) {
    var tarr = times[x].split(':');
    date += new Date(0, 0, 0, tarr[0], tarr[1], tarr[2].split('.')[0], tarr[2].split('.')[1]).getTime();   
}
var avg = new Date(date/times.length);
result = offsetify(avg.getHours()) + ':' + offsetify(avg.getMinutes()) + ':' + offsetify(avg.getSeconds()) + '.' + offsetify(avg.getMilliseconds()); 
```

***[演示](http://jsfiddle.net/3yVMK/1/)***

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-06T11:10:43.917

我对 Javascript 没有太多经验，所以我可能有一些语法错误，但我认为你可以做类似的事情

```
var i = 0;
var totalTime = 0.0;
for (i=0; i < scores.length; i++) {
    var hours = parseFloat(scores[i].substring(0, 2)); //get numeric value for hours
    var minutes = parseFloat(scores[i].substring(3,5)); //get numeric value for minutes
    var seconds = parseFloat(scores[i].substring(6)); //get numeric for the seconds

    var time = ((hours * 60) + minutes) * 60 + seconds; //60 minutes in an hour, 60 seconds in a minute
    totalTime += time;
}

var avgTime = totalTime/scores.length;

var avgHours = Math.floor(avgTime / 3600); //60*60
var avgHoursStr = String(avgHours);

var avgMinutes = Math.floor((avgTime % 3600) / 60); //mod to get rid of the hours
var avgMinutesStr = String(avgMinutes);

var avgSeconds = avgTime - avgHours*3600 - avgMinutes*60; //get the remainder. Can't use mod due to decimal
var avgSeconds = String(avgSeconds);

//Concat strings. Add the ":" spacers. Where necessary, add leading 0
var avgStr = (avgHoursStr.length > 1 ? "" : "0") + avgHoursStr + ":" + (avgMinutesStr.length > 1 ? "" : "0") + avgMinuteStr + ":" + avgSecondsStr; 
```

[编辑 - 感谢 Parth Thakkar 指出我的问题]

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-06T11:08:56.630

以毫秒或秒为单位返回答案：

```
var times = ["00:00:03.00", "00:00:05.00", "00:00:02.00", "00:00:06.00"];

function averageTimes(times,unit) {
    if (!times) {
        return false;
    }
    else {
        var totalMilliseconds = 0, hours, minutes, seconds, milliseconds, parts;
        for (var i = 0, len = times.length; i < len; i++) {
            parts = times[i].split(':');
            hours = parseInt(parts[0], 10) * 3600000;
            minutes = parseInt(parts[1], 10) * 60000;
            seconds = parseInt(parts[2].split('.')[0], 10) * 1000;
            milliseconds = parseInt(parts[2].split('.')[1], 10);
            totalMilliseconds += (hours + minutes + seconds + milliseconds);
        }
        if (!unit || unit.toLowerCase() == 'ms'){
            return totalMilliseconds/times.length + ' milliseconds';
        }
        else if (unit.toLowerCase() == 's') {
            return (totalMilliseconds/1000)/times.length + ' seconds';
        }

    }
}

// parameters:
// times: an array of times in your supplied format, 'HH:MM:SS:mm',
// unit: a string ('ms' or 's'), denoting whether to return milliseconds or seconds.
var average = averageTimes(times,'s');
console.log(average);​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/ppNQj/1/)。

参考：

*   [`for(){/*...*/}`循环](https://developer.mozilla.org/en/JavaScript/Reference/Statements/for)。
*   [`parseInt()`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/parseInt).
*   [`split()`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/split).
*   [`toLowerCase()`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/toLowerCase).

# .net - Settings.setting 在调试模式下给出不同的值

> ID：10469904
> 
> 赞同：2
> 
> 时间：2012-05-06T10:41:24.063
> 
> 标签：.net, settings.settings

第一个奇怪：

我真的很想知道为什么我`Settings.settings`在调试和非调试模式下从文件中获取不同的值。换句话说，我在不调试（运行-> 不调试启动）和调试模式（rub-> 调试）下启动我的应用程序。在这些模式下，它总是为我**提供相同键的不同值。**

第二个奇怪：

当我在运行时使用我的应用程序更改存储在`Settings.settings`文件中的值时，这些值不会更改。在 Visual Studio 中打开此文件时，我会看到该文件中的先前值。注意我不要忘记打电话`Default.Save()`来保存更改。

他们的原因是什么？为什么会出现这些问题，我该如何解决？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-06T10:46:37.243

原因很简单。调试时，您不会启动应用程序本身，而是启动执行代码的 Visual Studio 托管进程。由于设置是每个可执行文件特定的，因此您可以为 VS 调试器托管的可执行文件获取不同的先前保存的设置，就像您直接启动应用程序一样。

您可以通过在您的

项目属性 - 调试 -

```
 uncheck Enable Visual Studio Hosting Process. 
```

[如果它们是应用程序范围](http://www.codeproject.com/Articles/14744/Read-Write-App-Config-File-with-NET-2-0)的，则这些设置是不可变的（只读）。当您使用用户范围调用保存设置时，它们将存储在您的用户配置文件中。app.config 内容永远不会改变，这对于只允许管理员安装应用程序是有意义的。稍后，用户可以通过将“差异”写入其本地用户配置文件来更改设置。

# javascript - 长时间使用后网站崩溃

> ID：10469908
> 
> 赞同：-1
> 
> 时间：2012-05-06T10:42:25.380
> 
> 标签：javascript, ajax, web, crash, chat

我正在免费网站提供商（000webhost）上建立一个网站，我目前正在聊天。我设置了每 500 毫秒读取一个文件并检查是否发布了新消息的间隔。如果有新消息，我会将 .txt 文件中的所有消息加载到 html 中的元素中。它快完成了，但是经过长时间的聊天或只是在聊天页面上（3 分钟或更长时间），我的网站崩溃了，我必须等待大约一个小时才能访问它。我每半秒使用 javascript 和 ajax 刷新一次聊天。有人知道我做错了什么吗？我已经在谷歌上搜索过这个问题，但找不到任何帮助。

编辑：我将刷新聊天的间隔更改为 2.5 秒，网站没有崩溃。我认为这解决了问题..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T10:49:40.280

听起来主机正在阻止您，可能是由于请求过多。每 500 毫秒来自同一 IP 的一个请求可能会被误认为是 DOS 攻击或类似攻击。

有更高效和更合适的方式来构建聊天 - 例如，看看 web sockets 或 node.js。

*   [NodeJS 聊天](http://chat.nodejs.org/)
*   [Web Socket 聊天](http://html5demos.com/web-socket)

**更新**

正如汤姆在评论中指出的那样，可能是免费的网络主机不提供或不允许您设置节点服务器。在这种情况下，我想您可以尝试增加请求间隔，看看这是否对您有帮助，或者与主机核实他们是否有这样的限制。请求间隔的增加可能会使聊天感觉不那么敏感，但很难在免费主机上获得所有内容。

# android - 错误：索引出站。当读取文件的一些字节时

> ID：10469909
> 
> 赞同：0
> 
> 时间：2012-05-06T10:42:29.793
> 
> 标签：android, file, byte

我想从“偏移量”读取文件的一些字节，它的长度是“大小”。所以我使用 FIleInputStream 和这段代码：

```
byte[] data = new byte[size];
FileInputStream fis=new FileInputStream(inputFile);
System.out.println("offset:"+offset+","+"size:"+size);
fis.read(data, offset, size); 
```

所以我有偏移量和大小的真实值，但我收到错误：indexoutofbound。我不明白。谁能展示我是如何摔倒的，以及是否有其他正确的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T10:46:33.500

[JavaDoc](http://docs.oracle.com/javase/6/docs/api/java/io/FileInputStream.html#read%28byte%5b%5d,%20int,%20int%29)告诉您：

```
public int read(byte[] b, int off, int len) throws IOException 
```

```
Throws:
    IndexOutOfBoundsException - If off is negative, len is negative, or len is 
    greater than b.length - off 
```

请注意，索引是从 0 开始的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T10:47:46.027

我不太确定你在`offset`这里得到了什么，但`offset`它意味着你想要存储字节的数组中的偏移量（即起始索引）。

因此，您尝试`size`从 position 开始将字节读入数组`offset`- 因此是`IndexOutOfBounds`if `offset > 0`。你需要`offset`为 0，它应该可以工作。

# java - 什么是调用方法和被调用方法？

> ID：10469910
> 
> 赞同：6
> 
> 时间：2012-05-06T10:42:34.567
> 
> 标签：java, function, methods

调用方法和被调用方法是否相同？

我想知道的是“调用方法”是指在大多数情况下调用另一个主要方法的方法，还是主要方法本身？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-05-06T10:43:28.180

调用方法是包含实际调用的方法；被调用的方法是被调用的方法。它们是不同的。例如：

```
// Calling method
void f()
{
    g();
}

// Called method
void g()
{
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-06T10:45:30.163

调用方法是包含实际调用的方法。

被调用的方法是被调用的方法。它们是不同的。

它们也称为 Caller 和 Callee 方法。

例如

```
int caller(){
int x=callee();
}

int callee(){
return 5;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-03T17:07:26.703

被调用的方法意味着方法的初始化。调用方法意味着我们在哪里使用该初始化方法。

# javascript - Jquery .validate 需要_from_group

> ID：10469913
> 
> 赞同：6
> 
> 时间：2012-05-06T10:43:38.133
> 
> 标签：javascript, jquery, validation

每当我使用`require_from_group`它时，它都会禁用所有其他验证。任何想法为什么？

还有一种方法可以将“Telefon”和“Mobitel”分组并应用于`require_from_group`它吗？

```
 $(document).ready(function(){
    $("#fncMain").validate(
    {
    /*groups:{Call:"Telefon Mobitel"},*/
    rules:{
        Davcna:{required:true,exactlength:5, digits:true},
        Idzav:{required:true,exactlength:5, digits:true},
        Maticna:{required:true,exactlength:5, digits:true},
        Telefon:{require_from_group: [1,".callme"]},
        Mobitel:{require_from_group: [1,".callme"]}
    }, 
    messages:{

    }}
    );
  }); 
```

此处未包含的所有其他字段都使用简单的“必需”类。如果我删除`require_from_group`适用于“Telefon”和“Mobitel”的规则，所有其他字段验证都可以正常工作。

感谢帮助。

**编辑**html：[http](http://cl.ly/29391q0Q3G231T2I380m) ://cl.ly/29391q0Q3G231T2I380m （太长，无法在此处发布）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-30T14:33:13.147

@Tats_innit 在`require_from_group`这里发布了一个自定义：[https ://stackoverflow.com/posts/13127475](https://stackoverflow.com/posts/13127475)

事实证明，这还修复了一个已记录的 github 错误，该错误是`require_from_group`在`additional-method-1.10.js`for 的1.10.0 版本中发布的`jquery.validation`。

**github 问题： [require_from_group 禁用其他规则](https://github.com/jzaefferer/jquery-validation/issues/412)**

Smileyanp@github 在他的解决方案中引用了这篇文章，他在其中重用了@Tats_innit 的函数并创建了一个[测试](http://jsfiddle.net/hfLwB/4/)，表明它可以正常工作**，并且不会禁用**对之前定义的其他规则的验证`require_from_group`。

这篇文章在这里是为了节省时间，因为这个小细节花了 3 小时的谷歌搜索。

**使固定：**

只需在加载`additional-method-1.10.js`后更新或执行此代码`additional-method-1.10.js`（以覆盖函数）。

```
jQuery.validator.addMethod("require_from_group", function(value, element, options) {
  var numberRequired = options[0];
  var selector = options[1];
  var fields = $(selector, element.form);
  var filled_fields = fields.filter(function() {
    // it's more clear to compare with empty string
    return $(this).val() != ""; 
  });
  var empty_fields = fields.not(filled_fields);
  // we will mark only first empty field as invalid
  if (filled_fields.length < numberRequired && empty_fields[0] == element) {
    return false;
  }
  return true;
// {0} below is the 0th item in the options field
}, jQuery.format("Please fill out at least {0} of these fields.")); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-05-19T17:38:48.047

**编辑**：实际上，此修复程序似乎已合并到版本 1.12.0 中，您可以在此处找到它的 CDN 指针：http: [**//jqueryvalidation.org/**](http://jqueryvalidation.org/)

并供参考：

```
http://ajax.aspnetcdn.com/ajax/jquery.validate/1.12.0/jquery.validate.js
http://ajax.aspnetcdn.com/ajax/jquery.validate/1.12.0/jquery.validate.min.js
http://ajax.aspnetcdn.com/ajax/jquery.validate/1.12.0/additional-methods.js
http://ajax.aspnetcdn.com/ajax/jquery.validate/1.12.0/additional-methods.min.js 
```

在找到上面的解决方案之前，我在下面找到了这段代码，所以我的建议是使用上面引用的 CDN 链接，而不是将下面的代码粘贴到您的 JS 文件中。

[**现在在 GitHub 上**](https://github.com/jzaefferer/jquery-validation/issues/412)有一个更好的修复（滚动到最底部），我在这里复制了它。 ***这不是我的工作***，写它的 GitHub 用户 sfreytag 似乎不是 SO 贡献者，我只是想将它放入 SO 中，以便其他发现此内容的人不必在 GitHub 上挖掘线程：

```
jQuery.validator.addMethod("require_from_group", function(value, element, options) {
    var validator = this;
    var selector = options[1];
    var validOrNot = $(selector, element.form).filter(function() {
        return validator.elementValue(this);
    }).length >= options[0];

    if(!$(element).data('being_validated')) {
        var fields = $(selector, element.form);
        fields.data('being_validated', true);
        fields.valid();
        $(element.form).valid();
        fields.data('being_validated', false);
    }
    return validOrNot;
}, jQuery.format("Please fill at least {0} of these fields.")); 
```

到目前为止，我已经对此进行了有限的测试，但它似乎正在按您的预期工作，所有验证都会发生（而不是像以前那样通过任何非“require_from_group”验证），所以我对此感到满意到目前为止。我只是在我的 JS 代码顶部的验证器声明之后添加了它：

```
$.validator.setDefaults({
    debug: true,
    success: "valid"
});

jQuery.validator.addMethod("require_from_group", function(value, element, options) {
    var validator = this;
    var selector = options[1];
   //continuation of code... 
```

# facebook - 我想将我的 Facebook 帐户的帖子恢复到简单的表格，但我遇到了一些问题

> ID：10469915
> 
> 赞同：1
> 
> 时间：2012-05-06T10:44:33.923
> 
> 标签：facebook, get, httpwebrequest, posts

我正在使用 C# 和 ASP.NET 对此进行编码。我不希望用户被迫登录并授权我的 facebook 应用程序，所以我编写了这段代码来让我的令牌正常工作：

```
 HttpWebRequest myRequest = (HttpWebRequest)WebRequest.Create("https://graph.facebook.com/oauth/access_token?client_id=MYID&client_secret=MYSECRET&user_id=MYUSERID&grant_type=client_credentials");
        myRequest.Method = "GET";
        WebResponse myResponse = myRequest.GetResponse();
        StreamReader sr = new StreamReader(myResponse.GetResponseStream(), System.Text.Encoding.UTF8);
        string result1 = sr.ReadToEnd();
        sr.Close();
        myResponse.Close();
        string token = result1.Substring(13, result1.Length - 13); 
```

然后我写了这段代码来获取我最近的帖子：

```
 HttpWebRequest myRequest1 = (HttpWebRequest)WebRequest.Create(string.Format("{0}{1}","https://graph.facebook.com/app/posts?access_token=",token));
        myRequest1.Method = "GET";
        WebResponse myResponse1 = myRequest1.GetResponse();
        //StreamReader sr1 = new StreamReader(myResponse1.GetResponseStream(), System.Text.Encoding.UTF8);
        StreamReader sr1 = new StreamReader(myResponse1.GetResponseStream());
        string result2 = sr1.ReadToEnd();
        sr1.Close();
        myResponse1.Close(); 
```

如何快速将此 JSON 对象转换为表格？

# c# - c#从xml文件中获取信息

> ID：10469920
> 
> 赞同：0
> 
> 时间：2012-05-06T10:45:54.630
> 
> 标签：c#, asp.net, xml

想要获取`<forecast_conditions></forecast_conditions>`我使用的第一个标签中的所有信息

```
var for_cod = from currentCond in xdoc.Root.Descendants("current_conditions")
                         select currentCond; 
```

我不知道如何从 2,3`<forecast_conditions></forecast_conditions>`标签中获取信息，因为它具有相同的名称，也许您有什么想法？

xml 文件：[http ://www.google.com/ig/api?weather=vilnius&hleng=eng](http://www.google.com/ig/api?weather=vilnius&hleng=eng)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T11:11:16.030

我不确定你到底需要什么。如果要获取结果集中的所有预测条件，可以使用这个简单的查询

```
 var query  = from t in doc.Descendants("forecast_conditions")
                         select t; 
```

您可能想[使用 ASP.NET 和 LINQ to XML 查看来自 Google Weather 的天气信息](http://www.devtechie.com/post/2012/01/16/Weather-Information-from-Google-Weather-using-ASPNET-and-LINQ-to-XML.aspx)，还可以查看这篇文章[Using Google Weather API In AC# Application](http://www.dreamincode.net/forums/topic/153911-c#using-google-weather-api-in-a-c#-application/)。它虽然没有使用 LINQ。另请查看此线程[C# Pull XML data from google's weather API](https://stackoverflow.com/questions/7704437/c-sharp-pull-xml-data-from-googles-weather-api)

# relational-database - er 模型 -> 关系模型（数据库）

> ID：10469923
> 
> 赞同：0
> 
> 时间：2012-05-06T10:46:14.140
> 
> 标签：relational-database, entity-relationship

我有一个具有以下实体的 er 模型：和`Doctor, Patient, Human`之间存在代关系。我正在尝试创建一个关系模型。那么，哪个模型是正确的：第一个还是第二个？`Doctor -> Human``Patient -> Human`

1)

```
Human (Name, Surname, Sex, Address)
Doctor(License number, specification)
Patient(Insurance number, diagnosis) 
```

2)

```
Doctor(Name, Surname, Sex, Address, License number, specification)
Patient(Name, Surname, Sex, Address, Insurance number, diagnosis) 
```

并且实体 Human 不是必需的。

PS A 是关系模型的新手。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T11:01:08.087

这在很大程度上取决于您的要求。医生也可以是病人吗？如果是，您需要一个基表，例如`human`. 在这种情况下`doctor`，`patient`应该有一个外键`human`。

如果您的 DBMS 支持，另一种选择是使用表继承。在 PostgreSQL 中，您可以执行以下操作：

```
create table human 
(
   name text,
   surname text,
   sex char(1),
   address text
);

create table doctor 
(
   license_number integer,
   specifiction text
)
inherits (human);

create table patient
(
   insurance_number integer,
   diagnosis text
)
inherits (human); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T10:55:35.507

两种模型都是“正确的”。但是插入和查询数据是有区别的。

当您想要保持数据规范化时，第一个是一个不错的选择（有关规范化的更多信息，请参见[http://en.wikipedia.org/wiki/Database_normalization](http://en.wikipedia.org/wiki/Database_normalization)）。但是，例如，当您要查询所有医生或所有患者时，您必须连接两个表。
此外，当您插入一个新对象时，您必须插入两行（人类和医生/患者）。
当您使用 OR-Mapper，它将您的数据转换为对象时，您可以使用多态性，因为您有一个共同的基础（人类）。

当速度很重要时，第二种可能性是一个不错的选择。
当您想要查询所有医生/患者时，它会更快，因为不需要连接。
但是当您要查询例如医生和患者的所有地址时，它会变慢

# cakephp - CakePHP 2.1 资产压缩插件未创建缓存文件

> ID：10469924
> 
> 赞同：7
> 
> 时间：2012-05-06T10:46:24.390
> 
> 标签：cakephp, plugins, cakephp-2.1

我正在使用**CakePHP Plugin AssetCompress** (v 0.7)，它工作得很好，除了它不缓存目录中的任何文件。这是我的**asset_compress.ini**设置：

```
[General]
writeCache = true
cacheConfig = false
alwaysEnableController = true
debug = false

[js]
timestamp = true
paths[] = WEBROOT/js/
cachePath = WEBROOT/cache_js/

[speedtest.min.js]
files[] = speedtest/speedtest.js 
```

补充说明：

*   我在 core.php 中将调试设置为“0”
*   cache_js 文件夹是可写的 (777)
*   我也使用 MemCache 作为缓存引擎（不确定这是否会导致问题）

有人在 Asset Compress 插件上遇到过同样的问题吗？

* * *

**更新：**这是我用于 CSS/Less 部分的，效果很好：[https ://github.com/Hyra/less](https://github.com/Hyra/less)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T00:02:30.893

您必须使用 shell 脚本生成文件。这些文件不会自动生成。

[https://github.com/markstory/asset_compress/wiki/Shell](https://github.com/markstory/asset_compress/wiki/Shell)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T07:35:38.777

如果我很好理解这个[Github 的 wiki 页面](https://github.com/markstory/asset_compress/wiki/Configuration)，您应该更改`cacheConfig = false`为`cacheConfig = true`以利用 MemCache。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-23T11:04:42.097

生成和存储在asset_compress.ini 配置中定义的静态资产或通过AssetCompress 帮助程序即时生成和存储。这是为了让您不必在每次更改 css 或 js 文件时手动运行控制台脚本。

这就是一些人将其定义为“讨厌”的黑客行为，我称之为可行的解决方案。每次 AppController beforeFilter() 运行并且调试级别大于 0 时，它只是通过 php exec() 方法运行控制台脚本。因此，在调试级别应为 0 的生产环境中，不会运行 exec() .

将以下内容添加到您的 /app/Controller/AppController.php beforeFilter() 函数中。

```
if(Configure::read('debug') > 0){
  exec(APP.'Console'.DS.'cake -app '.APP.' AssetCompress.asset_compress build -f');
} 
```

这是假设您可以从控制台 (linux) 或 cmd 提示符 (windows) 运行正常的 AssetCompress

# mysql - 带有 LIMIT 的 MySQL 子查询

> ID：10469927
> 
> 赞同：0
> 
> 时间：2012-05-06T10:46:53.563
> 
> 标签：mysql, subquery, limit

我已经阅读了有关使用子查询的类似帖子，但不知道如何将其应用于我的需求。

我有两个药表：

`Generics`带有字段`GenericID`和`GenericName`

并`DrugCaseCounts`带有字段`GenericID`（指向 的链接`Generics`），`DrugName`以及`Cases`

`Generics`。_ `GenericName`是药物中的活性成分，例如氟西汀，和`DrugCaseCounts`。`DrugName`是品牌名称，例如百忧解。 `DrugCaseCounts`. `Cases`是出现该品牌名称的案例报告的数量。一个可以有超过 10`DrugCaseCounts`条记录（不同的品牌名称）`Generics`。`GenericID`.

我想生成一个列表，显示：

`Generics`. `GenericID`, `Generics`. `GenericName`, `DrugCaseCounts`. `DrugName`,`Cases`

列出前 10 名`DrugCaseCounts`。`DrugName`记录，`GenericID`按案例降序分组。

我知道这需要 DrugCaseCounts 表上的子查询，但我不知道如何陈述它。

# android - Android 恢复工具（4EXT 等）

> ID：10469931
> 
> 赞同：0
> 
> 时间：2012-05-06T10:47:30.677
> 
> 标签：android, recovery

我想知道像 4EXT 这样的恢复工具是否可以安全安装。它们是仅在以恢复模式启动时才“起作用”，还是在正常使用手机时也可以控制系统？！

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T10:52:17.560

4EXT 和其他只是库存 Android 恢复系统的增强版本。除非您处于恢复模式，否则它们不会与系统交互。

# javascript - Javascript - 除非在括号内，否则除以空格

> ID：10469932
> 
> 赞同：0
> 
> 时间：2012-05-06T10:47:30.917
> 
> 标签：javascript, regex

我想将字符串除以空格，但前提是空格不在方括号内。例如：

> “多么美好的晴天啊”

分割后应该是这样的：

> [什么，一个，[晴天]，一天]

我试图自己找到解决方案，但恐怕我对 javascript 中的 RegExp 还不够熟悉。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T11:23:40.563

当必须包含空格时，需要以下 RegEx：

```
"What a [nice sunny] day".match(/(^|\s)(\[[^\]]+\]|\S+)/g)
// Outputs: ["What"," a"," [nice sunny]"," day"] 
```

在评论中，很明显必须删除空格：

```
"What a [nice sunny] day".match(/\[[^\]]+\]|\S+/g)
// Outputs: ["What","a","[nice sunny]","day"] 
```

# sql - SQL 总和

> ID：10469941
> 
> 赞同：3
> 
> 时间：2012-05-06T10:48:38.100
> 
> 标签：sql, oracle, count, sum

我已经计算了不同表中的计数总和。此操作执行两次，每次执行一次`performanceID`。现在我想得到这两个总和的总和。

以下是我目前所做的两个总和的代码：

```
 SELECT SUM((COUNT (BookingID) * CategoryPrice)) AS TotalAmount
    FROM Booking, Production
    WHERE Booking.PerformanceID IN(SELECT PerformanceID FROM Performance WHERE PerformanceID = '1')
    and Production.ProductionID IN 
    (SELECT ProductionID FROM Performance WHERE PerformanceID = '1') 
    GROUP BY BookingID, CategoryPrice
    UNION ALL
    SELECT SUM((COUNT (BookingID) * CategoryPrice)) AS TotalAmount
    FROM Booking, Production
    WHERE Booking.PerformanceID IN(SELECT PerformanceID FROM Performance WHERE PerformanceID = '2')
    and Production.ProductionID IN 
    (SELECT ProductionID FROM Performance WHERE PerformanceID = '2')
     GROUP BY BookingID, CategoryPrice 
```

我得到的结果是：

```
总金额
------------
         70
         60

```

我如何在这里总结这两个总和？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-06T11:12:52.900

我永远不会与 FGITW 竞争，但我必须对这个查询说些什么……

如果我们添加空格，我希望你能明白我的意思：

```
SELECT SUM( (COUNT(BookingID) * CategoryPrice) ) AS TotalAmount
  FROM Booking
     , Production
 WHERE Booking.PerformanceID IN ( SELECT PerformanceID 
                                   FROM Performance 
                                  WHERE PerformanceID = '1')
   AND Production.ProductionID IN ( SELECT ProductionID FROM Performance 
                                     WHERE PerformanceID = '1') 
 GROUP BY BookingID, CategoryPrice
 UNION ALL
SELECT SUM( (COUNT(BookingID) * CategoryPrice)) AS TotalAmount
  FROM Booking
     , Production
 WHERE Booking.PerformanceID IN ( SELECT PerformanceID 
                                    FROM Performance 
                                   WHERE PerformanceID = '2')
   AND Production.ProductionID IN ( SELECT ProductionID 
                                      FROM Performance 
                                     WHERE PerformanceID = '2')
 GROUP BY BookingID, CategoryPrice 
```

将查询分解为返回两行的*唯一*原因是分析函数和 union all。

1.  您正在 和 之间进行笛卡尔连接[，](http://www.orafaq.com/wiki/Cartesian_join)这意味着您将每个中的行数相乘。`booking``production`
2.  您的子选择`performance`返回一个已知值。根本没有理由这样做。
3.  您正在隐式地将数字转换为字符串并再次转换为数字。
4.  您在这里扫描表或索引 8 次！

似乎您想要每次性能的总金额，在这种情况下，您的查询可以简化为以下内容：

```
SELECT SUM(bookings * CategoryPrice)
  FROM ( SELECT CategoryPrice , count(*) as bookings
           FROM Booking b
           JOIN performance per
             ON p.performanceid =  per.performanceid
           JOIN Production p
             ON p.productionid = per.productionid
          WHERE p.performanceid in (1, 2)
          GROUP BY CategoryPrice
                ) 
```

请注意显式连接语法，它已经存在了几十年，使事情变得更加清晰，并[有助于防止错误](https://stackoverflow.com/a/10263148/458741)。假设您在两个表上都有索引，此查询将执行两次范围扫描，一次`booking`和一次。它还将进行唯一扫描，假设它是该表的主键。`production``performanceid``performance``performanceid`

作为对此的解释，现在我终于设法让您的架构正确！我们选择这两个表演，`1`和`2`。然后，我们选择与这些表演相关的每一部作品以及与这些作品相关的每一部预订。您可以根据表`categoryprice`中的内容进一步简化此操作。然后，我们获取每个预订的数量`categoryprice`并将这些乘积相加，从而为您提供总价值。

作为一点建议，我*始终*建议您在接受查询正确*之前*了解您希望从查询中返回的值。最好的人可以而且确实会犯错误。能够捕获它们，因为您可以看到返回的值不正确，这将有所帮助。

### 延伸阅读：

*   [加入 (SQL)](http://en.wikipedia.org/wiki/Join_(SQL)) - 维基百科
*   [SQL 连接的可视化解释](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)- 编码恐怖
*   [在功能](http://www.techonthenet.com/sql/in.php)- 网络技术

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T11:01:01.480

使用 sub sql，并求和 TotalAmount

```
SELECT SUM(TotalAmount)
   ( SELECT SUM((COUNT (BookingID) * CategoryPrice)) AS TotalAmount
        FROM Booking, Production
        WHERE Booking.PerformanceID IN(SELECT PerformanceID FROM Performance WHERE PerformanceID = '1')
        and Production.ProductionID IN 
        (SELECT ProductionID FROM Performance WHERE PerformanceID = '1') 
        GROUP BY BookingID, CategoryPrice
        UNION ALL
        SELECT SUM((COUNT (BookingID) * CategoryPrice)) AS TotalAmount
        FROM Booking, Production
        WHERE Booking.PerformanceID IN(SELECT PerformanceID FROM Performance WHERE PerformanceID = '2')
        and Production.ProductionID IN 
        (SELECT ProductionID FROM Performance WHERE PerformanceID = '2')
Group By CategoryPrice) 
```

# flash - 影片剪辑的 2D 数组 - 错误 #1006

> ID：10469947
> 
> 赞同：0
> 
> 时间：2012-05-06T10:50:03.437
> 
> 标签：flash, actionscript, adobe, flash-cs5.5

我还在学习用 AS3 编写代码，这看起来很简单，类似于 Java，所以如果我在某个地方犯了一个愚蠢的错误，我深表歉意。

根据问题标题，我正在尝试创建我已经创建的 MovieClip 的 2D（嵌套）数组，以便它们可以按如下方式在网格上打印出来。

```
var NumCols:Number = 8;
var NumRows:Number = 8;
var ColWidth:Number =  (stage.stageWidth-8)/NumCols;
var ColHeight:Number = (stage.stageWidth-8)/NumRows;
var GemMatrix:Array = new Array( 8, 8 );
var n = 1;
var SW:Number = stage.stageWidth;
var SH:Number = stage.stageHeight;

private function GJ_GenerateBoard(event:MouseEvent):void {
// Initialization...
for (var j = 0; j < NumRows; ++j)
{
    GemMatrix[y] = [];
    for (var i = 0; i < NumCols; ++i)
    {
        trace(i,j);
        GemMatrix[i][j] = new Gem() as MovieClip;
        this.addChild(GemMatrix[i][j]);
        GemMatrix[i][j].x = i*ColWidth+ColWidth/2;
        GemMatrix[i][j].y = j*ColHeight+ColHeight/2;
    }
} 
```

我收到的错误是：

```
ReferenceError: Error #1056: Cannot create property 0 on Number. 
```

当我尝试创建一个新的 Gem() 实例时，这会在线上发生。

任何帮助是极大的赞赏。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T17:10:34.150

var GemMatrix:Array = new Array(8, 8);

这就是你的。这实际上创建了一个一维数组，即 [Number(8), Number(8)]。您不需要在 AS3 中定义数组的长度，以下是我将如何设置它：

```
var GemMatrix:Array = [];

for (var i:int = 0; i < NumCols; i++){
    var $a:Array = [];
    for (var m:int = 0; m < NumRows; m++){
        var $gem:MovieClip = new Gem();
        $gem.x = i*ColWidth+ColWidth/2;
        $gem.y = j*ColHeight+ColHeight/2;
        addChild($gem);

        $a.push($gem);
    }
    GemMatrix.push($a);
} 
```

此外，这一行很奇怪： GemMatrix[y] = []; 这不会引发错误的唯一原因是因为 y 是您当前从其扩展的类的动态属性，表示它的 y 位置（很可能是 this.y = 0）。

# javascript - JavaScript 插入图像

> ID：10469948
> 
> 赞同：0
> 
> 时间：2012-05-06T10:50:13.343
> 
> 标签：javascript, html

嗨，我正在尝试在每个页面加载时在特定页面上插入特定图像，但我似乎无法得到它，我的代码看起来像这样

```
function display() {
coursetitle = (x[i].getElementsByTagName("title")[0].childNodes[0].nodeValue);
coursecode = (x[i].getElementsByTagName("code")[0].childNodes[0].nodeValue);
enrolledyear = (x[i].getElementsByTagName("year")[0].childNodes[0].nodeValue);
semester = (x[i].getElementsByTagName("semester")[0].childNodes[0].nodeValue);
labday = (x[i].getElementsByTagName("labday")[0].childNodes[0].nodeValue);
lectureday = (x[i].getElementsByTagName("lectureday")[0].childNodes[0].nodeValue);
description = (x[i].getElementsByTagName("description")[0].childNodes[0].nodeValue);
graphic = (x[i].getElementsByTagName("graphic")[0].childNodes[0].nodeValue);

 document.getElementById("show").innerHTML = "Title: " + coursetitle + "<br />Code: " + 
+ coursecode + "<br />Year: " + enrolledyear + "<br />Semester:" + semester +
"<br />Lab Day:" + labday + "<br />Lecture Day:" + lectureday +
"<br />Course Description:<br/>" + description; 
```

我应该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T10:53:02.687

如果图形值有图片路径

```
 document.getElementById("show").innerHTML = "Title: " + coursetitle + "<br />Code: " + 
+ coursecode + "<br />Year: " + enrolledyear + "<br />Semester:" + semester +
"<br />Lab Day:" + labday + "<br />Lecture Day:" + lectureday +
"<br />Course Description:<br/>" + description + "</br> <img src=\""+graphic +"\" /> "; 
```

# python - 将两个字符串合二为一

> ID：10469960
> 
> 赞同：13
> 
> 时间：2012-05-06T10:52:45.667
> 
> 标签：python, string, algorithm

假设我有 2 个字符串

```
AAABBBCCCCC 
```

和

```
AAAABBBBCCCC 
```

使这些字符串尽可能相似，因为我只能删除我应该删除的字符

*   从第一个字符串中删除最后一个 C
*   从第二个字符串中删除最后一个 A 和最后一个 B，

使他们成为

```
AAABBBCCCC 
```

找出从每个字符串中删除哪些字符的有效算法是什么？

我目前正在粉碎我的脑细胞，思考涉及字符串子字符串的解决方案，在另一个字符串中寻找它们。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-06T11:05:09.107

[Levenshtein distance](http://en.wikipedia.org/wiki/Levenshtein_distance)可以计算将一个字符串转换为另一个字符串需要多少更改。对源稍作改动，您不仅可以获得距离，还可以获得所需的转换。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-05-06T11:06:51.337

怎么用`difflib`？

```
import difflib

s1 = 'AAABBBCCCCC'
s2 = 'AAAABBBBCCCC'

for difference in difflib.ndiff(s1, s2):
    print difference,
    if difference[0] == '+':
        print 'remove this char from s2'
    elif difference[0] == '-':
        print 'remove this char from s1'
    else:
        print 'no change here' 
```

这将打印出两个字符串之间的差异，然后您可以使用它们来消除差异。这是输出：

```
 A no change here
  A no change here
  A no change here
+ A remove this char from s2
+ B remove this char from s2
  B no change here
  B no change here
  B no change here
  C no change here
  C no change here
  C no change here
  C no change here
- C remove this char from s1 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-06T11:06:13.740

不知道它是否是最快的，但随着代码的运行，它至少很短：

```
import difflib
''.join([c[-1] for c in difflib.Differ().compare('AAABBBCCCCC','AAAABBBBCCCC') if c[0] == ' ']) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-06T11:08:12.277

我认为正则表达式可以做到这一点。这是一个字符串距离问题。我是说。让我们有两个字符串：

```
str1 = 'abc'
str2 = 'aabbcc' 
```

首先，我选择short，并构造一个正则表达式，如：

```
regex = '(\w*)'+'(\w*)'.join(list(str1))+'(\w*)' 
```

然后，我们可以搜索：

```
matches = re.search(regex,str2) 
```

我使用圆括号对我感兴趣的部分进行分组。这组matches.group()是两个字符串的距离。接下来，我可以弄清楚应该删除哪些字符。这是我的想法，希望对你有帮助。

# eclipse - 如何使用 Eclipse Plugin for SVN 让 Tortoise 识别项目结帐？

> ID：10469966
> 
> 赞同：0
> 
> 时间：2012-05-06T10:53:30.050
> 
> 标签：eclipse, svn, version-control, eclipse-plugin

在 Windows 7 上，我一直在使用 Tortoise 进行 Subversion。我还在为 Subversion 使用 Eclipse 插件。我交替使用它们来提交或更新项目文件。但是在另一个系统上，我有相同的设置，Tortoise 无法将文件夹/文件识别为使用 Eclipse 签出的 SVN。

我想知道，我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T12:27:03.420

我对 Eclipse Subversion 插件（Subclipse、Subversive）和其他客户端（命令行客户端、Tortoise、RapidSVN）的体验从“正常工作”到“被破坏的工作空间”不等。有一次，`svn info`Eclipse 工作区上的一个简单操作以某种方式更改了所有元数据，即 Eclipse 失去了项目与 SVN 的连接。

磁盘布局格式取决于连接器类型及其版本。

最好的办法是使用 JavaHL 作为插件连接器，因为它使用与 Tortoise 和命令行客户端相同的本地库。

目前我的个人策略是只使用一种 SVN 客户端作为工作空间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T13:31:16.990

最近 SVN 工作副本的格式或多或少发生了变化。会不会是 Eclipse 插件和 TortoiseSVN 使用了不同的格式？最新版本的 TortoiseSVN 使用新格式，检查 Eclipse 插件可能有意义。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-06T14:23:34.440

确保您的 Eclipse 插件（您使用的是 Subclipse？Subversive？另一个插件？）和 TortoiseSVN 基于相同版本的 Subversion。每当 Subversion 发布新版本（例如，从 1.5 到 1.6，或从 1.6 到 1.7）时，他们倾向于修改 svn 工作副本格式，以使基于旧版本的 SVN 客户端无法识别它。

例如，有关详细信息，请参阅[1.6 发行说明](http://subversion.apache.org/docs/release-notes/1.6.html#wc-upgrades)。

# .net - 如何在 VB.NET 中创建命令链接按钮（带有多行文本）？

> ID：10469968
> 
> 赞同：3
> 
> 时间：2012-05-06T10:54:00.557
> 
> 标签：.net, vb.net, winforms, winapi, button

我知道如何使用默认按钮项，但是有什么方法可以实现多行按钮的样式（或者更确切地说，“可点击文本”？），如下所示？

![](../Images/18a85afa30638b221296c1699e80a2e2.png)

情况是我有一个界面供用户选择他希望建立什么样的文件，并且在较大的主文本行下必须有一个简短的描述。

我只打算在 Windows 7 上运行它，所以我不需要担心与旧版本 Windows 的向后兼容性

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-08T02:55:18.170

屏幕截图中显示的按钮实际上是整个 Aero UI 中使用的按钮。它是一种自定义样式的按钮，称为“命令链接”，可以轻松应用于标准`Button`控件。

不幸的是，WinForms 库并没有通过一个简单的属性公开这个功能，但是通过一点 P/Invoke 很容易解决这个问题。

您要查找的样式称为`BS_COMMANDLINK`. 根据[文档](http://msdn.microsoft.com/en-us/library/windows/desktop/bb775951.aspx)，这种风格：

> 创建一个行为类似于`BS_PUSHBUTTON`样式按钮的命令链接按钮，但命令链接按钮左侧有一个绿色箭头，指向按钮文本。可以通过向按钮发送`BCM_SETNOTE`消息来设置按钮文本的标题。

这是一个小自定义按钮控件类，它扩展了标准 WinForms`Button`控件，并将“命令链接”样式实现为您可以在设计器中或通过代码配置的属性。

关于代码有几点需要注意：

1.  该`FlatStyle`属性必须始终设置为`FlatStyle.System`，这会强制使用标准的 Windows API 按钮控件，而不是由 WinForms 代码绘制的控件。这是`BS_COMMANDLINK`样式工作所必需的（因为它仅受本机控件支持），并且无论如何它都会产生更好看的按钮控件（具有跳动效果等）。为了强制执行此操作，我重写了该`FlatStyle`属性并设置了默认值。

2.  该`CommandLink`属性是您打开和关闭“命令链接”样式的方式。默认情况下它是关闭的，为您提供标准按钮控件，因此您可以将应用程序中的*所有*按钮控件替换为此控件，如果您愿意，只是为了方便。当您打开该属性（将其设置为`True`）时，您会得到一个精美的多行命令链接按钮。

3.  命令链接按钮的标题与标准按钮上显示的标题相同。但是，标题按钮*也*支持第二行的“描述”。`CommandLinkNote`这可以通过WinAPI 消息之后称为 的另一个属性进行配置`BCM_SETNOTE`。当您将按钮配置为标准按钮控件 ( `CommandLink = False`) 时，此属性的值将被忽略。

```
Imports System.Windows.Forms
Imports System.ComponentModel
Imports System.Runtime.InteropServices

Public Class ButtonEx : Inherits Button

    Private _commandLink As Boolean
    Private _commandLinkNote As String

    Public Sub New() : MyBase.New()
        'Set default property values on the base class to avoid the Obsolete warning
        MyBase.FlatStyle = FlatStyle.System
    End Sub

    <Category("Appearance")> _
    <DefaultValue(False)> _
    <Description("Specifies this button should use the command link style. " & _
                 "(Only applies under Windows Vista and later.)")> _
    Public Property CommandLink As Boolean
        Get
            Return _commandLink
        End Get
        Set(ByVal value As Boolean)
            If _commandLink <> value Then
                _commandLink = value
                Me.UpdateCommandLink()
            End If
        End Set
    End Property

    <Category("Appearance")> _
    <DefaultValue("")> _
    <Description("Sets the description text for a command link button. " & _
                 "(Only applies under Windows Vista and later.)")> _
    Public Property CommandLinkNote As String
        Get
            Return _commandLinkNote
        End Get
        Set(value As String)
            If _commandLinkNote <> value Then
                _commandLinkNote = value
                Me.UpdateCommandLink()
            End If
        End Set
    End Property

    <Browsable(False)> <EditorBrowsable(EditorBrowsableState.Never)> _
    <DebuggerBrowsable(DebuggerBrowsableState.Never)> _
    <Obsolete("This property is not supported on the ButtonEx control.")> _
    <DefaultValue(GetType(FlatStyle), "System")> _
    Public Shadows Property FlatStyle As FlatStyle
        'Set the default flat style to "System", and hide this property because
        'none of the custom properties will work without it set to "System"
        Get
            Return MyBase.FlatStyle
        End Get
        Set(ByVal value As FlatStyle)
            MyBase.FlatStyle = value
        End Set
    End Property

#Region "P/Invoke Stuff"
    Private Const BS_COMMANDLINK As Integer = &HE
    Private Const BCM_SETNOTE As Integer = &H1609

    <DllImport("user32.dll", CharSet:=CharSet.Unicode, SetLastError:=False)> _
    Private Shared Function SendMessage(ByVal hWnd As IntPtr, ByVal msg As Integer, ByVal wParam As IntPtr, _
                                        <MarshalAs(UnmanagedType.LPWStr)> ByVal lParam As String) As IntPtr
    End Function

    Private Sub UpdateCommandLink()
        Me.RecreateHandle()
        SendMessage(Me.Handle, BCM_SETNOTE, IntPtr.Zero, _commandLinkNote)
    End Sub

    Protected Overrides ReadOnly Property CreateParams As CreateParams
        Get
            Dim cp As CreateParams = MyBase.CreateParams

            If Me.CommandLink Then
                cp.Style = cp.Style Or BS_COMMANDLINK
            End If

            Return cp
        End Get
    End Property
#End Region

End Class 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-31T16:41:37.787

不幸的是，接受的答案有错误，请改用我的库`VistaUIFramework`，它包含更好的 CommandLink。

# 比较

* * *

### 接受的答案

*   你必须经常检查`CommandLink`
*   `CommandLinkNote`不工作（如果您第二次运行您的应用程序）
*   `CommandLinkNote`不是多行
*   它没有默认大小（CommandLink 默认太小）

### VistaUI框架

*   有`CommandLink`控制权
*   `Note`一直在工作（属性是`Note`而不是`CommandLinkNote`）
*   `Note`是多行的
*   它有一个默认尺寸（200x74）

VistaUIFramework 还有另一个控件：

*   按钮（使用 FlatStyle=System 让按钮对事件产生影响）
*   CheckBox（使用 FlatStyle=System 让复选框对事件产生影响）
*   RadioButton（使用 FlatStyle=System 让单选按钮对事件产生影响）
*   TextBox（它有`Hint`属性，一个灰色的文本替换空值）
*   表单（它具有`CloseBox`属性，它的工作方式类似于`MaximizeBox`and `MinimizeBox`，但它与关闭按钮一起工作）
*   ProgressBar（它具有在`State`不改变已安装操作系统的本机视觉样式的情况下更改进度条的状态/颜色的属性）

* * *

VistaUIFramework 将 WinForms 与 C++ 中的 Win32/WinAPI 混合在一起。

[https://www.github.com/myapkapp/VistaUIFramework/](https://www.github.com/myapkapp/VistaUIFramework/)

**重要提示：**这不是垃圾邮件，我只是假装发布一个提供更好 CommandLink 和更多内容的答案。

# php - 使用 MATCH () AGAINST() 时出现 MYSQL 语法错误

> ID：10469970
> 
> 赞同：0
> 
> 时间：2012-05-06T10:54:03.573
> 
> 标签：php, mysql, match-against

我试图查询数据库以查找单独表中两列之间的相关结果，为此我使用以下代码：

```
$query = "SELECT * FROM $table WHERE MATCH (TITLE) AGAINST ($description) AND ARTIST=$band ORDER BY relevance DESC";
    $result = mysql_query($query);
    if (!$result) {
        die("Result False on line 47: $result <br>
            Query: $query <br>
            Error: " . mysql_error());
    } 
```

正如您可能期望的那样，出现错误消息说我的 MYSQL 语法有错误，但我不确定它是什么，任何指针？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T10:59:30.053

`AGAINST ($description)`应该`AGAINST ('$description')`

`ARTIST=$band`应该`ARTIST='$band'`

通过查询处理的任何字符串都需要单引号 ( ' )，并且带有空格的列名需要反引号 ( ` )。

如果`$description`或`$band`包含任何引号或斜杠，则需要使用[mysql_real_escape_string()](http://php.net/manual/en/function.mysql-real-escape-string.php)转义它们（无论如何我建议这样做）

此外，您可以将`die`语句合并到查询行中：

```
$result = mysql_query($query) or die(
"Result False on line 47: $result <br>
            Query: $query <br>
            Error: " . mysql_error()
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-30T12:41:50.337

有时即使语法是正确的，也会出现此错误，因为某些 SQL 版本不支持此语法。

在考虑其他方式之前，请确保您的 MySQL 版本是否支持此查询。

# android - 为什么android中的图像按钮不起作用..？

> ID：10469977
> 
> 赞同：0
> 
> 时间：2012-05-06T10:54:59.540
> 
> 标签：android, android-intent

我正在制作一个安卓应用程序。在主类中，我想借助图像按钮调用另一个类（Tweetlogin）。但是，一旦我单击图像按钮，它就不会加载所需的结果，而是显示意外错误。我的代码有什么问题。？在主要课程中，我写道：

```
ImageButton twiter = (ImageButton) findViewById(R.id.imageButton1);
    twiter.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View v) {
            Intent i = new Intent(getApplicationContext(),
                    Tweetlogin.class);
            startActivity(i);

        }

    }); 
```

我用另一个代码更改了意图行，但这也不起作用：

```
twiter.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View v) {
            Intent i = new Intent(main.this,
                    Tweetlogin.class);
            startActivity(i);

        }

    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T11:07:43.380

您的 AndroidManifest.xml 中是否列出了 Tweetlogin 活动？

就像是：

```
 <activity
            android:name=".Tweetlogin"
            android:label="@string/app_name" >
        </activity> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T10:57:59.557

改变

```
Intent i = new Intent(getApplicationContext(), Tweetlogin.class); 
```

至

```
Intent i = new Intent(getBaseContext(), Tweetlogin.class); 
```

并确保您的对象`twiter`不为*空*

# c# - 我应该考虑从 WPF 切换到 Silverlight 吗？

> ID：10469978
> 
> 赞同：1
> 
> 时间：2012-05-06T10:55:09.010
> 
> 标签：c#, .net, wpf, silverlight

我一直在将 WPF 用于一个远未完成的新项目。这是一个爱好项目，也是一个非常有用的项目。

我希望具有跨平台兼容性（即 Linux + Mac + Windows），但 Windows 是主要目标。我对 Web 语言以及 C# 和 Erlang 非常熟悉，但 C/C++ 不在其中，我讨厌 Java。因此，为我选择 WPF 是很自然的举动。

[但是，在阅读了http://www.mono-project.com/WPF](http://www.mono-project.com/WPF)等众多资源之后：

> 在这一点上，我们强烈建议对 WPF 感兴趣的用户改用 Silverlight，因为它现在可以在浏览器之外使用，并提供一组丰富的跨平台 API 和功能。

我开始怀疑是否应该将我的应用程序移植到 Silverlight 并改用它。

几个事实：

*   我的应用程序是纯桌面应用程序，应该是这样。它需要对系统资源的较低级别的访问（但不是低到 .NET 还不够）。
*   我希望支持这三个平台，但 Windows 是主要关注点。
*   我更喜欢 C# 和 .NET 以及类似于 WPF 的东西，其中 UI 是声明性的，以干净的方式与代码分离，并允许丰富的用户界面。

我听说 Silverlight 已经在 Mac 上工作了，并且可以通过 Moonlight 支持 Linux。

**我应该考虑从 WPF 切换到 Silverlight 吗？可能会出现什么问题？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T11:05:17.007

首先，我会考虑[这个](https://stackoverflow.com/questions/944608/wpf-vs-silverlight)答案。

要点是（实际上）Silverlight 是 WPF 的子集，因此如果您的应用程序用户群仅为 PC/Window 用户，您可能希望在 WPF 中开发您的应用程序，因为在功能方面它仍然比 Silverlight 丰富得多，而且因为它是桌面应用程序，因此您可以访问本地计算机。如果你想开发一个基于 Web 的应用程序，它可以在浏览器上运行，不仅在 PC 上，而且在 Mac 上，那么你想在 Silverlight 中进行开发。

在我看来**，对于您的要求，** WPF 仍然是最佳选择。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-06T11:03:05.287

好吧，根据经验，我可以看出，有些东西在 Silverlight 中不会像在 WPF 中那样工作。我最近遇到的一些事情（虽然还有很多）：

*   绑定不能完全按照您的意愿工作。例如，默认情况下，在 WPF 中，您的绑定属性会在文本字段上的 keyUp 上更改。在 Silverlight 中情况并非如此：它将在 Blur 上更新。像 Caliburn.Micro 这样的框架通过隐式添加来解决这个问题。
*   WPF 有一个叫做 Adorners 的东西。这些基本上允许您为调整大小、旋转等内容添加小的 UI 元素。您通常在设计师中看到的内容（拖动以调整大小）。您可以在 Silverlight 中制作类似的东西，但它有点复杂。
*   我不确定 WPF，但在 Silverlight 中，对 Web 服务的调用最终是在 UI 线程上完成的。你可以在任何你想要的地方设置它，但实际的调用和回调是在主线程上完成的。在处理可能需要一段时间才能执行的网络呼叫结果时要记住的事情（如果我错了，有人可以纠正我）。

我认为您应该使用新应用程序的典型方式是从 Silverlight 开始，如果您确实需要，则迁移到 WPF。另外，有人告诉我，将 Silverlight 应用程序移植到 winRT/Metro 会稍微容易一些，所以这可能是您想要检查的内容。

**另外** 这里是 MSDN 中描述各种差异的链接：http: [//msdn.microsoft.com/en-us/library/cc903925%28v=vs.95%29.aspx](http://msdn.microsoft.com/en-us/library/cc903925%28v=vs.95%29.aspx)

# javascript - 让事件监听器独一无二？

> ID：10469981
> 
> 赞同：0
> 
> 时间：2012-05-06T10:55:44.533
> 
> 标签：javascript, events

所以我有一个问题，我设置的事件监听器都碰巧使用同一个变量。这是它的样子：

```
// Prepare tooltips
for (var i = 0; i < document.getElementsByClassName("tooltip").length; i++) {

    var tooltip = document.getElementsByClassName("tooltip")[i];
    var input = document.getElementsByName(tooltip.id.substr(8))[0];

    var offsetTop = 0;
    var tmp = input;

    while (tmp != null) {
        offsetTop += tmp.offsetTop;
        tmp = tmp.offsetParent;
    }

    offsetTop -= 130;

    var offsetLeft = (input.offsetParent.offsetLeft + input.scrollWidth) + 50;

    tooltip.innerHTML += "<div class='corner'></div>";
    tooltip.style.top = offsetTop + "px";
    tooltip.style.left = offsetLeft + "px";

    input.addEventListener("focus", function() { document.getElementById(tooltip.id).style.display = "block"; });
    input.addEventListener("blur", function() { document.getElementById(tooltip.id).style.display = "none"; });
} 
```

在最后两行中，我设置了事件监听器。因此，每当我关注一个输入字段时，无论哪一个 tooltip.id 总是相同的。我在每个循环中都检查了 input.id 之前的不同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T11:36:25.700

Javascript 是一种有趣的语言 :)
在每个循环中，您都在声明一个使用对变量工具提示的引用的函数。由于您多次使用该变量：它的值发生了变化，但引用保持不变。当函数执行时，它使用引用（具有最后一个值）。

这是解决方案：（我建议只调用一次方法'document.getElementsByClassName（“tooltip”）'，因为它会导致DOM遍历。

==== 代码从这里开始

var toollips = document.getElementsByClassName("tooltip"); for (var i = 0; i < toollips.length; i++) { var tooltip = toollips[i]; var input = document.getElementsByName(tooltip.id.substr(8))[0];

```
var offsetTop = 0;
var tmp = input;

while (tmp != null)
{
    offsetTop += tmp.offsetTop;
    tmp = tmp.offsetParent;
}

offsetTop -= 130;

var offsetLeft = (input.offsetParent.offsetLeft + input.scrollWidth) + 50;

tooltip.innerHTML += "<div class='corner'></div>";
tooltip.style.top = offsetTop + "px";
tooltip.style.left = offsetLeft + "px";

// assign tooltip id to the input
input.tooltipId = tooltip.id;

// add event listeners
input.addEventListener("focus", function() { document.getElementById(this.tooltipId ).style.display = "block"; });
input.addEventListener("blur", function() { document.getElementById(this.tooltipId).style.display = "none"; }); 
```

}

==== 代码到此结束

# android - 无法在 android 中将“”解析为整数

> ID：10469986
> 
> 赞同：0
> 
> 时间：2012-05-06T10:57:50.183
> 
> 标签：android, integer

我读了很多文章，但还是不明白。

我有一个字符串类型的串行数据，我想将它与整数进行比较。

这是读取的串行数据代码：

```
case MESSAGE_READ:
                int i;

                byte[] readBuf = (byte[]) msg.obj; 

             // construct a string from the valid bytes in the buffer
                String readMessage = new String(readBuf, 0, msg.arg1);
                Log.i(LOG_TAG, readMessage);

                mTextView.setText(readMessage);
                String [] numbers = readMessage.split("\n");
                int [] intNumber = new int[numbers.length];
                //List<Integer> integers = new ArrayList<Integer>();

                for (String number : numbers) {

                    //integers.add(Integer.valueOf(number.trim()));
                    for (i=0;i<numbers.length;i++){
                        intNumber[i] = Integer.valueOf(number.trim());
                        if (intNumber[i]<0 || intNumber[i]>95){
                            //Some Actions
                        }
                    }
                }
                break; 
```

LogCat 显示：

```
05-06 17:28:06.919: D/BluetoothReadService(15090): connected
05-06 17:28:06.919: D/BluetoothReadService(15090): create ConnectedThread
05-06 17:28:06.929: D/BluetoothReadService(15090): setState() 2 -> 3
05-06 17:28:06.949: I/BluetoothReadService(15090): BEGIN mConnectedThread
05-06 17:28:06.969: I/HBAS(15090): MESSAGE_STATE_CHANGE: 3
05-06 17:28:07.079: I/HBAS(15090): 24

05-06 17:28:07.079: I/HBAS(15090): 25

05-06 17:28:07.079: I/HBAS(15090): 26

05-06 17:28:07.079: I/HBAS(15090): 27

05-06 17:28:07.079: I/HBAS(15090): 28

05-06 17:28:07.079: I/HBAS(15090): 29

05-06 17:28:07.079: I/HBAS(15090): 0

05-06 17:28:07.079: I/HBAS(15090): 1

05-06 17:28:07.079: I/HBAS(15090): 2

05-06 17:28:07.079: I/HBAS(15090): 3

05-06 17:28:07.079: I/HBAS(15090): 4

05-06 17:28:07.079: I/HBAS(15090): 5

05-06 17:28:07.079: I/HBAS(15090): 6

05-06 17:28:07.079: I/HBAS(15090): 7

05-06 17:28:07.079: I/HBAS(15090): 8

05-06 17:28:07.079: I/HBAS(15090): 9

05-06 17:28:07.079: I/HBAS(15090): 10

05-06 17:28:07.079: I/HBAS(15090): 11

05-06 17:28:07.079: I/HBAS(15090): 12

05-06 17:28:07.079: I/HBAS(15090): 13

05-06 17:28:07.079: I/HBAS(15090): 14

05-06 17:28:07.079: I/HBAS(15090): 15

05-06 17:28:07.079: I/HBAS(15090): 16

05-06 17:28:07.079: I/HBAS(15090): 17

05-06 17:28:07.079: I/HBAS(15090): 18

05-06 17:28:07.079: I/HBAS(15090): 19

05-06 17:28:07.079: I/HBAS(15090): 20

05-06 17:28:07.079: I/HBAS(15090): 21

05-06 17:28:07.079: I/HBAS(15090): 22

05-06 17:28:07.079: I/HBAS(15090): 23

05-06 17:28:07.079: I/HBAS(15090): 24

05-06 17:28:07.079: I/HBAS(15090): 25

05-06 17:28:07.079: I/HBAS(15090): 26

05-06 17:28:07.079: I/HBAS(15090): 27

05-06 17:28:07.079: I/HBAS(15090): 28

05-06 17:28:07.079: I/HBAS(15090): 29

05-06 17:28:07.079: I/HBAS(15090): 0

05-06 17:28:07.079: I/HBAS(15090): 1

05-06 17:28:07.079: I/HBAS(15090): 2

05-06 17:28:07.079: I/HBAS(15090): 3

05-06 17:28:07.079: I/HBAS(15090): 4

05-06 17:28:07.079: I/HBAS(15090): 5

05-06 17:28:07.079: I/HBAS(15090): 6

05-06 17:28:07.079: I/HBAS(15090): 7

05-06 17:28:07.079: I/HBAS(15090): 8

05-06 17:28:07.079: I/HBAS(15090): 9

05-06 17:28:07.079: I/HBAS(15090): 10

05-06 17:28:07.079: I/HBAS(15090): 11

05-06 17:28:07.079: I/HBAS(15090): 12

05-06 17:28:07.079: I/HBAS(15090): 13

05-06 17:28:07.079: I/HBAS(15090): 14

05-06 17:28:07.079: I/HBAS(15090): 15

05-06 17:28:07.079: I/HBAS(15090): 16

05-06 17:28:07.079: I/HBAS(15090): 17

05-06 17:28:07.079: I/HBAS(15090): 18

05-06 17:28:07.079: I/HBAS(15090): 19

05-06 17:28:07.079: I/HBAS(15090): 20

05-06 17:28:07.079: I/HBAS(15090): 21

05-06 17:28:07.079: I/HBAS(15090): 22

05-06 17:28:07.079: I/HBAS(15090): 23

05-06 17:28:07.079: I/HBAS(15090): 24

05-06 17:28:07.079: I/HBAS(15090): 25

05-06 17:28:07.079: I/HBAS(15090): 26

05-06 17:28:07.079: I/HBAS(15090): 27

05-06 17:28:07.079: I/HBAS(15090): 28

05-06 17:28:07.079: I/HBAS(15090): 29

05-06 17:28:07.079: I/HBAS(15090): 0

05-06 17:28:07.079: I/HBAS(15090): 1

05-06 17:28:07.079: I/HBAS(15090): 2

05-06 17:28:07.079: I/HBAS(15090): 3

05-06 17:28:07.079: I/HBAS(15090): 4

05-06 17:28:07.079: I/HBAS(15090): 5

05-06 17:28:07.079: I/HBAS(15090): 6

05-06 17:28:07.079: I/HBAS(15090): 7

05-06 17:28:07.079: I/HBAS(15090): 8

05-06 17:28:07.079: I/HBAS(15090): 9

05-06 17:28:07.079: I/HBAS(15090): 10

05-06 17:28:07.079: I/HBAS(15090): 11

05-06 17:28:07.079: I/HBAS(15090): 12

05-06 17:28:07.079: I/HBAS(15090): 13

05-06 17:28:07.079: I/HBAS(15090): 14

05-06 17:28:07.079: I/HBAS(15090): 15

05-06 17:28:07.079: I/HBAS(15090): 16

05-06 17:28:07.079: I/HBAS(15090): 17

05-06 17:28:07.079: I/HBAS(15090): 18

05-06 17:28:07.079: I/HBAS(15090): 19

05-06 17:28:07.079: I/HBAS(15090): 20

05-06 17:28:07.079: I/HBAS(15090): 21

05-06 17:28:07.079: I/HBAS(15090): 22

05-06 17:28:07.079: I/HBAS(15090): 23

05-06 17:28:07.079: I/HBAS(15090): 24

05-06 17:28:07.079: I/HBAS(15090): 25

05-06 17:28:07.079: I/HBAS(15090): 26

05-06 17:28:07.079: I/HBAS(15090): 27

05-06 17:28:07.079: I/HBAS(15090): 28

05-06 17:28:07.079: I/HBAS(15090): 29

05-06 17:28:07.079: I/HBAS(15090): 0

05-06 17:28:07.079: I/HBAS(15090): 1

05-06 17:28:07.079: I/HBAS(15090): 2

05-06 17:28:07.079: I/HBAS(15090): 3

05-06 17:28:07.079: I/HBAS(15090): 4

05-06 17:28:07.079: I/HBAS(15090): 5

05-06 17:28:07.079: I/HBAS(15090): 6

05-06 17:28:07.079: I/HBAS(15090): 7

05-06 17:28:07.079: I/HBAS(15090): 8

05-06 17:28:07.079: I/HBAS(15090): 9

05-06 17:28:07.079: I/HBAS(15090): 10

05-06 17:28:07.079: I/HBAS(15090): 11

05-06 17:28:07.079: I/HBAS(15090): 12

05-06 17:28:07.969: I/HBAS(15090): 1
05-06 17:28:08.029: I/HBAS(15090): 3

05-06 17:28:09.019: I/HBAS(15090): 14

05-06 17:28:09.979: I/HBAS(15090): 1
05-06 17:28:10.029: I/HBAS(15090): 5

05-06 17:28:10.989: I/HBAS(15090): 16

05-06 17:28:12.009: I/HBAS(15090): 17

05-06 17:28:12.999: I/HBAS(15090): 18

05-06 17:28:13.999: I/HBAS(15090): 19

05-06 17:28:14.999: I/HBAS(15090): 20

05-06 17:28:16.009: I/HBAS(15090): 21

05-06 17:28:17.009: I/HBAS(15090): 22

05-06 17:28:18.009: I/HBAS(15090): 23

05-06 17:28:19.019: I/HBAS(15090): 24

05-06 17:28:20.019: I/HBAS(15090): 25

05-06 17:28:21.029: I/HBAS(15090): 26

05-06 17:28:22.029: I/HBAS(15090): 27

05-06 17:28:23.029: I/HBAS(15090): 28

05-06 17:28:24.039: I/HBAS(15090): 29

05-06 17:28:25.039: I/HBAS(15090): 0

05-06 17:28:26.029: I/HBAS(15090): 1
05-06 17:28:26.069: I/HBAS(15090): 

05-06 17:28:26.069: D/AndroidRuntime(15090): Shutting down VM
05-06 17:28:26.069: W/dalvikvm(15090): threadid=1: thread exiting with uncaught exception (group=0x40018578)
05-06 17:28:26.079: E/AndroidRuntime(15090): FATAL EXCEPTION: main
05-06 17:28:26.079: E/AndroidRuntime(15090): java.lang.NumberFormatException: unable to parse '' as integer
05-06 17:28:26.079: E/AndroidRuntime(15090):    at java.lang.Integer.parseInt(Integer.java:362)
05-06 17:28:26.079: E/AndroidRuntime(15090):    at java.lang.Integer.parseInt(Integer.java:332)
05-06 17:28:26.079: E/AndroidRuntime(15090):    at java.lang.Integer.valueOf(Integer.java:506)
05-06 17:28:26.079: E/AndroidRuntime(15090):    at com.android.hbas.FinalSetting$1.handleMessage(FinalSetting.java:362)
05-06 17:28:26.079: E/AndroidRuntime(15090):    at android.os.Handler.dispatchMessage(Handler.java:99)
05-06 17:28:26.079: E/AndroidRuntime(15090):    at android.os.Looper.loop(Looper.java:130)
05-06 17:28:26.079: E/AndroidRuntime(15090):    at android.app.ActivityThread.main(ActivityThread.java:3687)
05-06 17:28:26.079: E/AndroidRuntime(15090):    at java.lang.reflect.Method.invokeNative(Native Method)
05-06 17:28:26.079: E/AndroidRuntime(15090):    at java.lang.reflect.Method.invoke(Method.java:507)
05-06 17:28:26.079: E/AndroidRuntime(15090):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:867)
05-06 17:28:26.079: E/AndroidRuntime(15090):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:625)
05-06 17:28:26.079: E/AndroidRuntime(15090):    at dalvik.system.NativeStart.main(Native Method) 
```

开始时它有效，但在某些时候它因为''事情而发生了FC。所以有什么解决办法？？？感谢您的建议..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T11:04:54.270

检查你的字符串是`' '`唯一的。

```
 if(str.trim().length>0){

       try{ 

       int i =Integer.parseInt(str);

       }catch(NumberFormatException ne){
          System.out.println("could not parse :: " +ne);
        }

    } 
```

# performance - GLSL着色器算法优化

> ID：10469988
> 
> 赞同：0
> 
> 时间：2012-05-06T10:58:09.430
> 
> 标签：performance, optimization, glsl, shader

有没有一种方法可以优化下一个算法以使其更快，即使只是速度的小幅提升？

```
const mat3 factor = mat3(1.0, 1.0, 1.0, 2.112, 1.4, 0.0, 0.0, 2.18, -2.21);

vec3 calculate(in vec2 coord)
{
    vec3 sample = texture2D(texture_a, coord).rgb;
    return (factor / sample) * 2.15;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T11:09:59.873

`texture_a`如果可以的话，我能想到的唯一重要的优化是打包`texture_b`成一个单一的三通道纹理。这为您节省了两个纹理查找之一，这很可能是这里的瓶颈。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T18:02:05.520

@Thomas 的回答是最有帮助的，因为纹理查找是最昂贵的，如果他的解决方案在您的应用程序中是可能的。如果您已经在其他地方使用了这些纹理，则最好将这些值作为参数传递以避免重复查找。

否则我不知道它是否可以优化那么多，但我想到了一些直截了当的事情。

**编译器优化：**

如果可能，也将 const 关键字分配给坐标参数。
在每个浮点元素中分配 f 字面量。

**也许手动分配垫**

我不知道它是否更快，因为我不知道矩阵乘法是如何实现的，但是由于常数因子矩阵包含许多 1 和 0，它可能可以手动分配。

```
vec3 calculate(const in vec2 coord)
{
    //not 100% sure if that init is possible
    const vec3 sample = vec3(texture2D(texture_a, coord).r
        texture2D(texture_b, coord).ra - 0.5f);

    vec3 result = vec3(sample.y);
    result.x += sample.x + sample.z;
    result.y += 2.112f * sample.x;
    result.z *= 2.18f;
    result.z -= 2.21f * sample.z;

    return result;
} 
```

# mysql - 为什么“分组依据”不适用于 MySQL 查询？

> ID：10469989
> 
> 赞同：0
> 
> 时间：2012-05-06T10:58:24.127
> 
> 标签：mysql, group-by

我有以下查询，我在其中加入两个表，当我最后删除 group by 时查询正在工作，但它为我返回了太多行。

第一要务是拥有`order by`距离（在查询中计算），随后我只想要距离最小的唯一`tr_id`。

当我使用时，`group by`我收到以下错误：

> *1064 - 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以`GROUP BY tr_id LIMIT 0, 30`在第 2 行附近使用正确的语法。*

```
SELECT op.operatorid AS tr_id, de.latitude AS
tolatitude, de.longitude AS tolongitude, de.surname AS tosurname,
de.firstname AS tofirstname, de.did AS to_id,
de.tzz AS tmzz, 
op.bkk AS tobkk, 
( 3959 * acos( cos( radians(52.524368165134284) ) * cos( radians(
de.latitude )
 ) * cos( radians( de.longitude) - radians(13.410530090332031) ) + sin(
radians(52.524368165134284) ) * sin( radians( de.latitude ) ) ) ) 
AS distance 
FROM de 
INNER JOIN op ON de.did = op.did 
WHERE de.type='Dutch' AND de.longitude > 11.6118868785
AND de.longitude < 15.2091733022 AND de.latitude > 50.7257249533
AND de.latitude < 54.323011377 having distance < 200 
GROUP BY tr_id
ORDER BY distance 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-06T11:00:19.280

`ORDER BY`应在**之后指定** `GROUP BY`

PS：我在你的 中没有看到聚合函数的使用`SELECT`，所以整个查询看起来有点混乱

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-06T11:22:39.323

HAVING 子句必须在任何 GROUP BY 子句之后，因此您的查询必须是：-

```
SELECT op.operatorid AS tr_id, de.latitude AS
tolatitude, de.longitude AS tolongitude, de.surname AS tosurname,
de.firstname AS tofirstname, de.did AS to_id,
de.tzz AS tmzz, 
op.bkk AS tobkk, 
( 3959 * acos( cos( radians(52.524368165134284) ) * cos( radians(
de.latitude )
) * cos( radians( de.longitude) - radians(13.410530090332031) ) + sin(
radians(52.524368165134284) ) * sin( radians( de.latitude ) ) ) ) 
AS distance 
FROM de 
INNER JOIN op ON de.did = op.did 
WHERE de.type='Dutch' AND de.longitude > 11.6118868785
AND de.longitude < 15.2091733022 AND de.latitude > 50.7257249533
AND de.latitude < 54.323011377  
GROUP BY tr_id having distance < 200
ORDER BY distance 
```

# asp.net - 显示另一个页面上的 ASPxPopup 控件

> ID：10469990
> 
> 赞同：0
> 
> 时间：2012-05-06T10:58:25.117
> 
> 标签：asp.net, .net, devexpress

我在页面上有一个 DevExpress ASPxPopup 控件。现在我想在单击母版页中菜单栏上的链接时显示该弹出窗口。

我可以使用 Master.FindControl() 访问母版页中的弹出窗口，但我不知道如何访问子页面中的弹出窗口。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T07:27:41.113

如果您知道当页面完全加载时，则可以使用母版页和子 aspx 页面呈现的 html 标记和脚本来使用它。因此，您可以在母版页或 ChildPage 上访问这两个 popupControl。

只需分配 Set [ASPxPopupControl.ClientInstanceName](http://documentation.devexpress.com/#AspNet/DevExpressWebASPxPopupControlASPxPopupControlBase_ClientInstanceNametopic)并使用按钮的客户端事件来显示或隐藏弹出窗口。

检查以下工作示例：//母版页标记

```
<head runat="server">
    <title></title>
    <asp:ContentPlaceHolder ID="head" runat="server">
    </asp:ContentPlaceHolder>
</head>

<body>
    <form id="form1" runat="server">
    <div>
        <dx:ASPxPopupControl ID="parentPopupControl" ClientInstanceName="parentPopup" runat="server">
            <ContentCollection>
<dx:PopupControlContentControl runat="server" SupportsDisabledAttribute="True">this 
    is parent popup</dx:PopupControlContentControl>
</ContentCollection>
        </dx:ASPxPopupControl>
        <dx:ASPxHyperLink ID="hlnkShowChildPopup" runat="server" Text="Show Child Popup">
            <ClientSideEvents Click="function(s, e) {
    childPopup.Show();
}" />
        </dx:ASPxHyperLink>

        <asp:ContentPlaceHolder ID="ContentPlaceHolder1" runat="server">

        </asp:ContentPlaceHolder>
    </div>
    </form>
</body>` 
```

///子页面标记

```
<asp:Content ID="Content2" ContentPlaceHolderID="ContentPlaceHolder1" runat="server">
    <dx:ASPxPopupControl ID="childPopupControl" runat="server" 
    ClientInstanceName="childPopup">
    <ContentCollection>
<dx:PopupControlContentControl runat="server" SupportsDisabledAttribute="True">this 
    is child popup control</dx:PopupControlContentControl>
</ContentCollection>
</dx:ASPxPopupControl>

    <dx:ASPxHyperLink ID="hlnkShowParentPopup" runat="server" Text="Show Parent Popup">
            <ClientSideEvents Click="function(s, e) {
    parentPopup.Show();
}" />
        </dx:ASPxHyperLink>
</asp:Content>` 
```

注意：您不能更好地使用服务器端包含的弹出控件，因此请学习回调和回调面板等以工作客户端脚本。

希望这对你有帮助..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T11:25:51.847

您可以在客户端实现此功能。设置[ASPxPopupControl](http://documentation.devexpress.com/#AspNet/clsDevExpressWebASPxPopupControlASPxPopupControltopic)。[客户端实例名称](http://documentation.devexpress.com/#AspNet/DevExpressWebASPxPopupControlASPxPopupControlBase_ClientInstanceNametopic)。然后使用弹出控制[客户端方法](http://documentation.devexpress.com/#AspNet/DevExpressWebASPxPopupControlScriptsASPxClientPopupControlMembersTopicAll)，如 Show 或 ShowWindow。

# sql-server - 寻找一种更好的方法来捕获参数化查询中的 MDX 错误

> ID：10469992
> 
> 赞同：0
> 
> 时间：2012-05-06T10:58:50.420
> 
> 标签：sql-server, reporting-services, ssas

上周五我们在工作中遇到了一种情况，我们正在讨论使用硬编码值的长（400 行左右）MDX 查询，然后将许多硬编码值转换为参数。（它由另一个开发人员很好地设置，因此您可以注释掉硬编码的语法并取消注释掉参数化的语法）。我们将查询剪切并粘贴到数据集查询中，将其编辑为表达式 (fx) 并在其周围加上适当的引号 =“多行查询”。当我们单击“获取字段”时，我们会收到一个模糊的错误，告诉我们要么存在语法错误，要么无法连接到多维数据集。所以我们退回到一个更简单的查询版本，所有参数都让它工作，现在一个一个地添加度量值——现在这很好，但供将来参考——**在这种情况下是否有更好的方法来捕获语法错误？另外，在运行时，用户做出选择后，有没有办法查看参数已经展开的 MDX？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T11:35:44.013

我可能是错的，但我认为“刷新字段”按钮在您使用动态表达式时不起作用。在这些情况下，您应该使用查询的非动态版本（具有相同的元数据），单击“刷新字段”按钮以获取列出的字段，然后使用动态表达式对查询进行参数化。只要表达式不更改元数据，您就可以开始了。

# c++ - 调用析构函数以释放 C++ 运算符中的内存的正确方法是什么？

> ID：10469994
> 
> 赞同：1
> 
> 时间：2012-05-06T10:58:56.660
> 
> 标签：c++

我很难知道自己做错了什么。

```
Huge& Huge::operator *=(const Huge& h) {
    Huge retHuge = *this * h;
    string out1 = retHuge.toString(); // for debugging purposes
    return *this = retHuge;
//  return retHuge;
} 
```

这

```
Huge retHuge = *this * h; 
```

我在字符串中验证时工作正常`out1`。如果我返回 retHuge 并在调用例程中打印结果，我可以看到原始的 this 保持不变。如果我执行 a`*this = retHuge`并返回`*this`，我会`SEGSEGV`出错。

调用析构函数清理内存并在乘法后返回结果的正确方法是什么？

我要感谢大家的回答。Crazy Eddie 使用了我所拥有的并对其进行了扩展，这正是我想做的。我更改了来源以反映他的建议，并且出现了 SEGSEGV 故障。

我认为这意味着我的语法必须基本正确，但我的其余代码中隐藏了一个错误。这是有价值的信息，我需要回去仔细查看是否能找到一些东西。我不想在没有做好功课之前偷懒和寻求帮助，所以我先好好看看。

我的经验主要是 Java，它有一个很好的未引用对象垃圾收集器。我将使用调试器并验证是否正在调用我的析构函数来释放内存。

这是一个很好的提示，首先尝试执行 *= 运算符，然后从中构建 = 运算符。很明显，我做了相反的事情。您的回答似乎仍然表明我所做的确实应该有效。既然不行，那我就回去看看能不能找到什么。如果我做完作业后还是找不到任何东西，我会继续问。与此同时，感谢所有的帮助。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-06T11:23:35.660

适用于您的特定情况[的重载算术运算符](https://stackoverflow.com/a/4421719/140719)的规范形式：

```
Huge& Huge::operator *=(const Huge& h) // class member function
{
  // somehow multiply h's value into this' value
  return *this;
}

Huge operator*(Huge lhs, const Huge& rhs) // free function; note lhs being copied
{
  lhs *= rhs;  // *= already implemented above
  return lhs;
} 
```

这里根本不涉及动态内存，因此您不需要删除任何内存。

根据[运算符重载经验法则](https://stackoverflow.com/a/4421729/140719)，复合赋值表单应该是一个成员，因为它改变了它的左操作数（并且可能需要访问类的私有部分）。非赋值版本应该是一个自由成员函数，以便隐式转换可以平等地应用于两个操作数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-06T11:04:10.813

不要；*_* `delete this`之后，`*this`正在写入未分配的内存。

相反，只需说`*this = retHuge`（不带`delete this`），然后`return *this`。

`operator =`改为处理释放。

这是一个完整的示例，带有一个虚构的复杂有效负载 a `int *`：

```
#include <iostream>

class A {
public:
    A(int _val): val(new int(_val))
    { }

    ~A() {
        delete this->val;
    }

    A &operator =(const A &r) {
        // Pretend this->val is complex and we need to reallocate the
        // entire thing.
        delete this->val;

        this->val = new int(*r.val);

        return *this;
    }

    A operator *(const A &r) const {
        return A(*this->val * *r.val);
    }

    A &operator *=(const A &r) {
        return *this = *this * r;
    }

    int *val;
};

int main() {
    A x(5), y(10);
    x *= y;

    std::cout << "x: " << *x.val << ", y: " << *y.val << std::endl;
    return 0;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-06T11:39:53.333

由于您似乎已经有了 * 运算符，并且我假设此时分配有效，这将是最好的实现：

```
Huge& Huge::operator *=(const Huge& h) {
    Huge retHuge = *this * h;

    return *this = retHuge;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-06T11:04:53.700

`operator=`意味着您将右手站点分配**到此**.

所以，你应该改变**this**的内容，然后最后`return *this;`

# ssms - 如何在 SQL Server Management Studio 中创建“对”表？

> ID：10469995
> 
> 赞同：1
> 
> 时间：2012-05-06T10:58:56.780
> 
> 标签：ssms

我正在使用连接到 SQL Server 2008 R2 的 SQL Server Management Studio。

*   我有一个`User`用列`Id`( `uniqueidentifier`)调用的表
*   我有一个`Role`用列`Id`( `uniqueidentifier`)调用的表
*   我想要一个名为`UserRolePair`2 列的表：`UserId`和`RoleId`.

我需要每一行都是唯一的（每个用户没有重复的角色）。

这很简单——我只需右键单击，选择`Indexes & Keys`并创建一个新**的唯一**键，它由两列组成。

现在我需要做的 - 是从表的列创建一个外键，并从表`UserId`的列创建一个外键。`Id``User``RoleId``Id``Role`

但是当我`Relationships`从子菜单中选择时 - 我得到了这个：

![这1](../Images/a0b15e8d4be2de951ae2829c8e5bbb3a.png)

首先 - 为什么我在这里有 2 个关系？

其次 - 当我现在想为每一列**分别**创建一个新的外键时，我得到这个：

![这2](../Images/aa49d5a6180b0939b1ca69971acccf4f.png)

我无法选择表格`RoleId`的`Id`列`Role`！

它说我需要为表的两列分配**同一个表**`UserRole`中的外键。

 **解决办法是什么 ？

“独特”是什么导致了我的问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T13:12:57.713

最好的办法是使用 T-SQL 语句，而不是与视觉设计者纠缠不清。

`UserRolePair`a) 从to创建外键`Role`：

```
ALTER TABLE dbo.UserRolePair
ADD CONSTRAINT FK_UserRolePair_Role
FOREIGN KEY (RoleID) REFERENCES dbo.Role(ID) 
```

`UserRolePair`b）从to创建外键`User`：

```
ALTER TABLE dbo.UserRolePair
ADD CONSTRAINT FK_UserRolePair_User
FOREIGN KEY (UserID) REFERENCES dbo.User(ID) 
```

只需在查询窗口中执行这些操作（确保在正确的数据库中！），您就完成了！**

# c - 比较不同结构数组中的两个元素？

> ID：10469996
> 
> 赞同：1
> 
> 时间：2012-05-06T10:59:07.480
> 
> 标签：c, io, set

我有两个文件，`cars.txt`并且`reservation.txt`，这两个文件有`resID`共同点。

我希望用户输入一个日期，使用该日期查看**不可用**的汽车，然后打印它们（通过`resID`）。

car.txt: (从左到右: `reservationID`, `carID`, `carYOM`, `carMake`, `carModel`, `carFuel`, `catagory`.)

```
R001;V001;2003;Toyota;Camry;Petrol;Budget
R002;V002;2005;Toyota;Prius;Petrol;Economy
R003;V003;1999;Ford;Falcon;Petrol;Midsize
R004;V004;2007;Ford;Territory;Diesel;Fullsize
R005;V005;2010;Ferrari;599;Petrol;Fullsize
R006;V006;1998;Holden;Comadore;Diesel;Midsize
R007;V007;2008;Honda;Civic;Petrol;Budget
R008;V008;2000;Mazda;MX5;Petrol;Economy 
```

reservation.txt：（从左到右：`reservationID`, `customerID`, `reservationStartDate`, `reservationStartTime`, `reservationEndDate`, `reservationEndTime`.）

```
R001;C005;2012/02/12;09:15A.M;2012/03/15;05:00P.M
R002;C002;2012/04/15;10:00A.M;2012/04/22;10:30A.M
R003;C003;2012/01/16;02:11P.M;2012/04/15;12:00P.M
R004;C004;2012/05/05;03:00P.M;2012/05/08;10:40A.M
R005;C005;2012/05/15;10:00A.M;2012/04/23;05:00P.M
R006;C006;2012/04/11;05:30P.M;2012/04/15;10:00A.M
R007;C008;2012/05/15;03:15P.M;2012/05/18;11:00A.M
R008;C007;2012/04/15;11:40P.M;2012/04/23;09:00A.M 
```

有问题的代码：

```
#include <stdio.h>
#include <string.h>
#define MAX_CAR 100
#define MAX_RES 100

int main(){

    typedef struct{                 //car struct
        char reservationID[20];
        char carID[20];
        char carYOM[20];
        char carMake[20];
        char carModel[50];
        char carFuel[20];
        char catagory[20];
    } car_t;

    typedef struct{                 //res struct
        char reservationID[20];
        char customerID[20];
        char reservationStartDate[20];
        char reservationStartTime[20];
        char reservationEndDate[50];
        char reservationEndTime[20];
    } res_t;

    car_t car[MAX_CAR];             //car array
    res_t reservation[MAX_RES];     //res array
    FILE *carHandle;
    FILE *resHandle;
    char line[100];
    char *item;
    int rescount = 0;
    int carcount =0;
    int k;
    int i;
    int option;
    char choice[20];    

    resHandle = fopen("reservation.txt","r");    

    while (fgets(line, 99, resHandle)){
      //cut up the reservation file line by line and put the bits into the res array.
        item = strtok(line,";");
        strcpy(reservation[rescount].reservationID,item);
        item = strtok(NULL,";");
        strcpy(reservation[rescount].customerID,item);
        item = strtok(NULL,";");
        strcpy(reservation[rescount].reservationStartDate,item);
        item = strtok(NULL,";");
        strcpy(reservation[rescount].reservationStartTime,item);
        item = strtok(NULL,";");
        strcpy(reservation[rescount].reservationEndDate,item);
        item = strtok(NULL,"\n");
        strcpy(reservation[rescount].reservationEndTime,item);
        rescount++;
    }

    fclose(resHandle);

    carHandle = fopen("car.txt","r");    

    while (fgets(line, 99, carHandle)){
        //cut up the car file line by line and put the bits into the car array.
        item = strtok(line,";");
        strcpy(car[carcount].reservationID,item);
        item = strtok(NULL,";");
        strcpy(car[carcount].carID,item);
        item = strtok(NULL,";");
        strcpy(car[carcount].carYOM,item);
        item = strtok(NULL,";");
        strcpy(car[carcount].carMake,item);
        item = strtok(NULL,";");
        strcpy(car[carcount].carModel,item);
        item = strtok(NULL,";");
        strcpy(car[carcount].carFuel,item);
        item = strtok(NULL,"\n");
        strcpy(car[carcount].catagory,item);
        carcount++;
    }

    fclose(carHandle);

    printf("Enter todays date (in YYYY/MM/DD format):");
    scanf("%s", choice);
    for (k=0;k<=rescount; k++){
        if (strcmp(choice,reservation[k].reservationStartDate)>=0 && strcmp(choice,reservation[k].reservationStartDate)>=0){
            for (i=0;i<=carcount; i++){
                if (strcmp(car[i].reservationID,reservation[i].reservationID)==0){
                    printf("\nreservationID: %s\nreservationStartTime: %s\ncustomerID: %s\ncarid: %s\nyom: %s\nmake: %s\nmodel: %s\nfueltype: %s\ncategory: %s\n\n", car[k].reservationID, reservation[i].reservationStartTime, reservation[i].customerID, car[k].carID, car[k].carYOM, car[k].carMake, car[k].carModel, car[k].carFuel, car[k].catagory);
                    goto outofloop;
                }
            }
        }else printf("\nall the cars are available\n");
        break;
    }
    outofloop:

    return(0);
} 
```

目前该代码仅适用于输入字符串“2012/02/12”到“2012/03/15”（即预订文件的第一行）

任何其他输入字符串都不会超过第一个 if 语句。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T12:00:00.500

您的问题是您只测试第一个预订。

```
for (k = 0; k < rescount; k++) {
    if () {
    } else {
    }
    break;
} 
```

还要注意循环控制应该`<`只有（如上面的代码），而不是`<=`你的代码。

# c - C unix 套接字。要处理的信号

> ID：10469997
> 
> 赞同：0
> 
> 时间：2012-05-06T10:59:14.300
> 
> 标签：c, sockets, unix, signals

我必须在服务器端和客户端的 AF_INET 套接字中处理哪种信号？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T11:02:43.033

根据您正在做的事情的方式，您*可能*必须处理`SIG_PIPE`，当连接被任意断开时可能会发生这种情况。

您不必处理任何其他信号。

如果您使用`select()`or`poll()`或（个人喜好）`epoll()`，您应该检查错误（例如，`POLLHUP` ，您应该在检查读/写可用性*之前*） 。

您还应该始终检查`read()/write()/send()/recv()`. 如果有错误，则返回-1，但如果返回0，则表示另一端断开连接。即，读取 0 确实意味着读取了 0 个字节，但连接仍然良好。它不是。关闭插座。这是 POSIX 规定的。