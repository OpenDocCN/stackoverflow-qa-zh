# StackOverflow 问答 10947000-10947999

# binding - 没有文本单元的 Javafx-2 表格视图绑定

> ID：10947005
> 
> 赞同：0
> 
> 时间：2012-06-08T10:18:27.527
> 
> 标签：binding, tableview, javafx-2

我想在 TableView 中显示一系列金融交易。每笔交易由日期、描述和金额组成。

如果我使用对另一个问题的回复中显示的示例将所有单元格视为文本，我可以使用绑定来完成这项工作。这允许进行单元格编辑，这是我的目标。

但我无法让它在日期和金额列上工作，我认为我需要为每种单元格类型建立一个单独的单元格工厂，并且可能需要一个单独的 updateItem 方法，但我被卡住了。

任何指向示例或建议的指针都会有所帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T09:28:50.430

您可能需要查看 DataFX 项目： [http](http://www.javafxdata.org/) ://www.javafxdata.org/ ，特别是单元工厂，例如： [http://www.javafxdata.org/javadoc/org/javafxdata/control/cell/TextFieldCellFactory。 html](http://www.javafxdata.org/javadoc/org/javafxdata/control/cell/TextFieldCellFactory.html)

DataFX 包含用于多种数据类型、表格、列表和树视图的自定义单元工厂。例如，假设您的金额具有双精度类型，您可以在 TableColum 的子类中编写类似的内容（将 ??? 替换为代表表中一行的类的类名）：

```
setCellFactory(TextFieldCellFactory.<???, Number>forTableColumn(new Callback<String,Number>(){
        @Override
        public Number call(String newValueStr) {
            double newValue = Double.parseDouble(newValueStr);
            return newValue;    
    }));

setOnEditCommit(new EventHandler<CellEditEvent<???, Number>>() {
        @Override
        public void handle(CellEditEvent<???, Number> t) {
            double newValue = t.getNewValue().doubleValue();
            // do something with the double value the user entered here     
        }
    });
} 
```

}

我希望至少能给你一些方向。为了清楚起见，我省略了异常处理。

# php - php在没有空格等的地方爆炸

> ID：10947007
> 
> 赞同：-5
> 
> 时间：2012-06-08T10:18:44.397
> 
> 标签：php, explode

我试图分解一个尚未明确定义部分的字符串（即带有空格或逗号）

示例字符串：FRPARRGBASD

FR PAR GB ASD 都需要被分解以作为单独的实体插入到数据库中。

请问我该怎么做

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T10:26:38.183

我假设这些是地名“法国”、“巴黎”、“英国”等......

这是一种可能的解决方案：

```
$places = array("FR", "PAR", "GB", "ASD");
$string = "FRPARGBASD";

$tokens = array();
while (strlen($string) > 0) {
   $next_token = "";
   $i = 0;
   while ($next_token == "") {
      if (substr($string, 0, strlen($places[$i])) == $places[$i]) {
         $next_token = $places[$i];
      }
   }
   $tokens[] = $next_token;
   $string = substr($string, strlen($next_token));
}

var_dump($tokens); 
```

希望有帮助

# machine-learning - weka 中的测试文件是否需要与训练相同或更少的功能？

> ID：10947015
> 
> 赞同：2
> 
> 时间：2012-06-08T10:19:24.473
> 
> 标签：machine-learning, classification, weka

我从两个不同的数据集中准备了两个不同的 .arff 文件，一个用于测试，另一个用于训练。它们中的每一个都有相同的实例，但不同的特征会改变每个文件的特征向量的维度。当我对这些文件中的每一个进行交叉验证时，它们都运行良好。这表明 .arff 文件已正确准备并且没有任何错误。

现在，如果我使用与测试文件相比维度更少的训练文件进行评估。我收到以下错误。

```
Exception in thread "main" java.lang.ArrayIndexOutOfBoundsException: 5986
at  weka.classifiers.bayes.NaiveBayesMultinomial.probOfDocGivenClass(NaiveBayesMultinomial.java:295)
at weka.classifiers.bayes.NaiveBayesMultinomial.distributionForInstance(NaiveBayesMultinomial.java:254)
at weka.classifiers.Evaluation.evaluationForSingleInstance(Evaluation.java:1657)
at weka.classifiers.Evaluation.evaluateModelOnceAndRecordPrediction(Evaluation.java:1694)
at weka.classifiers.Evaluation.evaluateModel(Evaluation.java:1574)
at TrainCrossValidateARFF.main(TrainCrossValidateARFF.java:44) 
```

weka 中的测试文件是否需要与 train 相同或更少的功能？评估代码

```
public class TrainCrossValidateARFF{
    private static DecimalFormat df = new DecimalFormat("#.##");
    public static void main(String args[]) throws Exception
    {
            if (args.length != 1 && args.length != 2) {
                    System.out.println("USAGE: CrossValidateARFF <arff_file> [<stop_words_file>]");
                    System.exit(-1);
            }
            String TrainarffFilePath = args[0];
            DataSource ds = new DataSource(TrainarffFilePath);
            Instances Train = ds.getDataSet();
            Train.setClassIndex(Train.numAttributes() - 1);

            String TestarffFilePath = args[1];
            DataSource ds1 = new DataSource(TestarffFilePath);
            Instances Test  = ds1.getDataSet();
            // setting class attribute
            Test.setClassIndex(Test.numAttributes() - 1);

            System.out.println("-----------"+TrainarffFilePath+"--------------");
            System.out.println("-----------"+TestarffFilePath+"--------------");
            NaiveBayesMultinomial naiveBayes = new NaiveBayesMultinomial();
            naiveBayes.buildClassifier(Train);

            Evaluation eval = new Evaluation(Train);
            eval.evaluateModel(naiveBayes,Test);
            System.out.println(eval.toSummaryString("\nResults\n======\n", false));
}
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-08T10:42:02.263

> weka 中的测试文件是否需要与 train 相同或更少的功能？评估代码

需要相同数量的功能。您可能需要插入 ? 也适用于类属性。

根据[Weka 建筑师 Mark Hall的说法](http://permalink.gmane.org/gmane.comp.ai.weka/28779)

> 为了兼容，两组实例的头部信息需要相同——相同数量的属性，相同的名称，相同的顺序。此外，任何名义属性必须具有在两组实例中以相同顺序声明的相同值。对于测试集中的未知类值，只需将每个值设置为缺失 - 即“？”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T12:32:37.177

根据 Weka 的[wiki](http://weka.wikispaces.com/Why+do+I+get+the+error+message+%27training+and+test+set+are+not+compatible%27?)，训练集和测试集的特征数量需要相同。这些特征的类型（例如，名义、数字等）也需要相同。

另外，我假设您没有对任何一个数据集应用任何 Weka 过滤器。如果您在每个数据集上单独应用过滤器（即使它是相同的过滤器），数据集通常会变[得不兼容。](http://weka.wikispaces.com/How+do+I+generate+compatible+train+and+test+sets+that+get+processed+with+a+filter?)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-04T13:46:07.627

如何将数据集划分为训练集和测试集？

您可以使用 RemovePercentage 过滤器（包 weka.filters.unsupervised.instance）。

在资源管理器中，只需执行以下操作：

训练集：

- 加载完整的数据集

- 在预处理面板中选择 RemovePercentage 过滤器

- 为拆分设置正确的百分比

- 应用过滤器

- 将生成的数据另存为新文件

测试集：

- 加载完整的数据集（或只使用撤消来恢复对数据集的更改）

- 如果尚未选择，请选择 RemovePercentage 过滤器

- 将 invertSelection 属性设置为 true

- 应用过滤器

- 将生成的数据另存为新文件

# javascript - 用javascript解析json数据

> ID：10947027
> 
> 赞同：1
> 
> 时间：2012-06-08T10:20:10.743
> 
> 标签：javascript

我有一个通过 php 输出 json 数据的代理脚本，我希望能够使用 javascript 操作这些数据。我有以下代码，但它只获取 php 脚本输出的整个 json 字符串。如何获取数据并能够访问此 json 数据中的各个对象？

```
var xmlhttp;
function loadXMLDoc(url, cfunc) {
    if (window.XMLHttpRequest) {
        // code for IE7+, Firefox, Chrome, Opera, Safari
        xmlhttp = new XMLHttpRequest();
    } else {
        // code for IE6, IE5
        xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
    }
    xmlhttp.onreadystatechange = cfunc;
    xmlhttp.open("GET", url, true);
    xmlhttp.send();
}

loadXMLDoc("http://xxxxx.appspot.com/userbase_us.php?callback=userdata", function() {
  if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
      var json = xmlhttp.responseText;
      alert(json);
  }
}); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-08T10:21:14.143

您可以使用本机[`JSON.parse`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/JSON/parse)方法：

```
var json = JSON.parse(xmlhttp.responseText); 
```

请注意，由于旧版浏览器不支持此功能，因此您很可能希望对其进行[polyfill](https://github.com/douglascrockford/JSON-js)。

# smo - SQL Server 2012 小程序

> ID：10947032
> 
> 赞同：4
> 
> 时间：2012-06-08T10:20:35.330
> 
> 标签：smo, sql-server-2012

关于 SQL Server 2012 SMO 1\. 与 v10.0.0.0 (2008) 相比，v11.0.0.0 (2012) 添加了哪些类型/方法/属性？2\. 是否应该使用 app.config 设置程序集绑定重定向以允许没有 SQL Server 2008 的用户同时保持与 2008 的兼容性？

```
<runtime>
  <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
     <dependentAssembly>
        <assemblyIdentity name="Microsoft.SqlServer.Smo"
                          publicKeyToken="89845dcd8080cc91"
                          culture="neutral" />
        <bindingRedirect oldVersion="10.0.0.0"
                         newVersion="11.0.0.0"/>
     </dependentAssembly>
  </assemblyBinding> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T16:10:57.850

我在下面回答实际问题。但首先，我发现您的既定目标和您提出的解决方案之间可能存在未实现的问题。也就是说，绑定重定向不是有条件的。因此，如果它找不到版本`11.0.0.0`，它将崩溃而不是重新使用`10.0.0.0`. 因此，您只需在安装 SMO 2012 时修改 app.config。如果这是您的意图，请忽略本段的其余部分。一个可能更简单的解决方案是简单地安装您决定让您的应用程序依赖的 SMO 版本。它可作为 SQL Server 的单独安装提供，您可以同时安装`10.0.0.0`和`11.0.0.0`安装。下载[页面](http://www.microsoft.com/en-us/download/details.aspx?id=27596)：[2012、2008](http://www.microsoft.com/en-us/download/details.aspx?id=35580) [R2、2008](http://www.microsoft.com/en-us/download/details.aspx?id=30440)。_ 您将需要并且`SQLSysClrTypes.msi``SharedManagementObjects.msi`

现在关于实际问题：

我能找到的唯一官方信息是[SMO 中的向后兼容性](http://msdn.microsoft.com/en-us/library/dd206977%28v=sql.110%29.aspx)。在您开始查看文档的先前版本之前，它看起来很适合您正在讨论的内容。即，从 SQL2008 版本开始，它看起来相对没有变化。

据此

> 可以使用 SQL Server 2012 中的 SMO 重新编译使用以前版本的 SQL Server 编写的 SMO 应用程序。

**更新：**发布后，我决定尝试使用另一个以前没有以这种方式使用过的项目。它有问题，因为它还引用了在这种情况下`SmoExtended.`至少有一种类型在和程序集之间移动。但是，该类型仍保留在同一命名空间中。这是一个重大更改的示例，其中只需重新编译即可使用新版本。简而言之，如果您不使用任何程序集，您更有可能成功重定向程序集。`DeviceType``Smo``SmoExtended``Smo*Extended`

如果只需要重新编译。然后，是的，然后程序集重定向一个很好的工作机会（因为应用程序将运行，这并没有说明任何关于破坏行为的改变）。我能想到不会出现这种情况的主要时间是在程序集之间移动类型时。特别是如果在两个程序集中定义了相同的命名空间。

由于似乎没有来自 Microsoft 的更详细的更改列表，您可以使用反射来迭代您对确切差异非常好奇的程序集的成员。您还可以翻阅 msdn 上的[文档](http://msdn.microsoft.com/en-us/library/ms212724%28v=sql.110%29.aspx)版本，看看是否发现了新的类/方法。但是反思会更好地告诉你所有的差异。由于 MS 确实增加了版本，因此在某处进行了一些重大更改和/或添加了新的类/方法。因此，您将需要测试这两种方法以查看它是否在运行时实际工作。

如果您尝试重定向注意，您将需要重定向您引用的所有 SMO 程序集，而不仅仅是主要的。这至少意味着：

```
<runtime>
  <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
    <dependentAssembly>
      <assemblyIdentity name="Microsoft.SqlServer.Smo"
                        publicKeyToken="89845dcd8080cc91"
                        culture="neutral" />
      <bindingRedirect oldVersion="10.0.0.0"
                       newVersion="11.0.0.0" />
    </dependentAssembly>
    <dependentAssembly>
      <assemblyIdentity name="Microsoft.SqlServer.Management.Sdk.Sfc"
                        publicKeyToken="89845dcd8080cc91"
                        culture="neutral" />
      <bindingRedirect oldVersion="10.0.0.0"
                       newVersion="11.0.0.0" />
    </dependentAssembly>
    <dependentAssembly>
      <assemblyIdentity name="Microsoft.SqlServer.ConnectionInfo"
                        publicKeyToken="89845dcd8080cc91"
                        culture="neutral" />
      <bindingRedirect oldVersion="10.0.0.0"
                       newVersion="11.0.0.0" />
    </dependentAssembly>
  </assemblyBinding>
</runtime> 
```

我在生产中有这样的重定向并且没有问题。虽然是 YMMV。目前，我们在我们的机器上开发链接 SMO 2012，但创建我们的构建机器链接 SMO 2008，这意味着如果我们使用 2012 年的新东西（尚未发生），我们的构建机器将会失败。有点冒险，因为我们可以在本地测试并获得与发布版本不同的结果（但幸运的是，我们有一个 QA 部门与发布版本一起工作，但在这里我们从未遇到过问题。）实际上，我更经常使用上面的倒数。我将在我的机器上编译一个程序集，并希望将它部署到不支持 SMO 2012 的客户端。

简而言之，您很有可能会取得成功，尽管这样做需要您自担风险。

# javascript - 如何访问 xslt 中的 javascript 变量

> ID：10947035
> 
> 赞同：4
> 
> 时间：2012-06-08T10:20:42.860
> 
> 标签：javascript, xslt

我有以下代码

```
<xsl:result-document href="output1/output3/index.html" format="html">
 <html>
 <head>
<SCRIPT LANGUAGE="JavaScript">
function getParams() 
{
var idx = document.URL.indexOf('?');
var params = new Array();
if (idx != -1) {
var pairs = document.URL.substring(idx+1, document.URL.length).split('&amp;');
for (var i=0; i&lt;pairs.length; i++) {
nameVal = pairs[i].split('=');
params[nameVal[0]] = nameVal[1];
   }
}
return params;
}
params = getParams();
</SCRIPT>

<SCRIPT LANGUAGE="JavaScript">
val = unescape(params["value"]);
document.write("value = " + val);
</SCRIPT>
</head>

<body>
 <xsl:choose>
    <xsl:when test="a:id=''">
    <xsl:value-of select="a:name"/>
    </xsl:when>
 </xsl:choose>
</body>
</html>
</xsl:result-document> 
```

我想访问 xsl:when' 中的 javascript 变量 'val'。我需要该值才能运行条件。任何想法 - 怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T10:25:31.453

各种 XSLT 引擎允许在其转换周期中执行 javascript。但是，您只是将脚本作为输出标记的一部分（即只是常规 JS）。

[请参阅 IBM 的示例。](http://www.ibm.com/developerworks/xml/library/x-tipxsltjs/)它们具有用于包含和执行 JavaScript 的特殊标签，每个引擎都会有所不同。请注意，他们使用函数从一段 JavaScript 返回值，如果无法直接访问变量，请编写一个函数来返回该值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T08:52:12.917

[Saxon-CE](http://www.saxonica.com/ce/doc/contents.html)是在浏览器中运行的 XSLT 2.0 处理器。它被编译成 JavaScript 并提供高级别的 JavaScript 互操作性。JavaScript/DOM 节点、数字、字符串、布尔值和数组（转换为 XSLT 2.0 序列）在 JavaScript/XSLT 接口中相对无缝地工作。

对于您的具体情况，您在 Saxon-CE 中有多种选择；*您可以使用ixsl:call()*直接调用现有或注入的 JavaScript 函数，也可以使用*ixsl:get()*检索变量的值。或者，您可以在 XSLT 2.0 中完成所有工作：

[编辑评论中提到的更正]

![XSLT 代码](../Images/81fb0d898f2e4fb0bd343f7a533a1e6c.png)

这是包含为文本而不是图形的相同代码 - 没有格式

```
<xsl:transform
xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
xmlns:ixsl="http://saxonica.com/ns/interactiveXSLT"
xmlns:xs="http://www.w3.org/2001/XMLSchema"
xmlns:f="urn:local-function"
xmlns:a="urn:source-xml"
extension-element-prefixes="ixsl"
version="2.0"
>
<xsl:template match="/">
<xsl:variable name="urlparams" select="ixsl:get(
ixsl:get(ixsl:window(),'location'),
'search')"
as="xs:string"/>
<xsl:variable name ="pairs" select="tokenize(substring($urlparams,2), '&amp;')"
as="xs:string*"/>
<xsl:variable name="value" select="f:getValue($pairs)"/>
<p>value: <xsl:value-of select="$value"/></p>

<xsl:choose>
<xsl:when test="a:id eq $value">
<xsl:value-of select="a:name"/>
</xsl:when>
</xsl:choose>

</xsl:template>

<xsl:function name="f:getValue" as="xs:string*">
<xsl:param name="pairs" as="xs:string*"/>
<xsl:sequence select="for $p in $pairs,
   $v in substring-before($p, '=')
return
    if ($v eq 'value')
        then substring($p, string-length($v) + 2)
    else ()"/>
</xsl:function>

</xsl:transform> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T14:39:40.547

您要问的是不可能的：JavaScript 是在页面呈现时由浏览器执行的 - 并且没有办法解决这个问题，因为 JavaScript 正在解析页面 URL，只有浏览器才会知道。

另一方面，XSLT 生成 HTML 页面 - 因此它在浏览器甚至看到要执行的 JavaScript 之前执行。

# java - ArrayList 删除错误

> ID：10947040
> 
> 赞同：1
> 
> 时间：2012-06-08T10:21:04.780
> 
> 标签：java, arraylist, iterator, is-empty

我正在为学校做一个项目，但我现在有点卡住了

我的问题是我有一个正方形数组列表每个正方形都有一个值（从 0 到 100）。它的起始值为 9999，所以我可以检查它是否被选中。如果选中了一个正方形，我希望将其从 arrayList 中删除。所以过了一会儿就没有正方形了。

有一些代码设置了第一个值，这就是为什么我检查值是否为 9999。

但我得到一个错误。一个我以前没见过的。

线程“AWT-EventQueue-0”中的异常 java.util.ConcurrentModificationException

Vak = 正方形

这是我的代码：

```
while (!vakken.isEmpty()) { // check if empty
        Iterator itrVak = vakken.iterator();
        while (itrVak.hasNext()) {
            Vak vak = (Vak) itrVak.next(); // here is get the error
            if (vak.getValue() != 9999) {// check if square value is 9999
                Collection checkVakken = vak.getNeighbour().values();
                Iterator itre = checkVakken.iterator();
                while (itre.hasNext()) {
                    Vak nextVak = (Vak) itre.next();
                    if (nextVak != null) {
                        if (nextVak.getValue() == 9999) {
                            nextVak.setValue(vak.getValue() + 1); // set value by its neighbour
                            vakken.remove(vak);
                            checkvakken.add(vak);
                        }
                    }
                }
            } else {
                vakken.remove(vak);
                checkvakken.add(vak);
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T10:28:05.797

在迭代集合时，您正在从集合中删除元素。由于迭代器在这种情况下可能会产生不可预知的结果，因此它无法快速抛出您遇到的异常。

您只能在遍历集合时通过迭代器的方法更改集合。迭代器本身应该有 remove 方法，它删除当前元素并保持迭代器完好无损。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-08T10:25:04.217

迭代时，您应该使用`Iterator`实例来删除对象：

`itre.remove();`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-08T10:57:43.097

你可以这样尝试：

```
itre.remove(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-08T10:27:01.180

迭代器永远不允许您在迭代时进行修改..您需要改用循环..发生这种情况是因为您正在使用迭代器，同时其他线程正在修改列表...

# jquery - Phonegap 应用程序开发建议

> ID：10947044
> 
> 赞同：1
> 
> 时间：2012-06-08T10:21:17.453
> 
> 标签：jquery, jquery-mobile, cordova

我刚刚使用 Phonegap、jQuery 和 jQuery mobile 完成了我的第一个 iOS 应用程序，并在开发过程中遇到了几个问题。主要问题是设备上的性能问题、与自动播放相关的不可靠的视频播放、过渡期间烦人的白屏和水平滚动问题。我希望那里的一些人，比我更有经验，可以提出更好的工具来使用，我看过 Sencha touch 和 jQTouch，但不知道该采取什么方向。

任何建议都会非常有益。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T13:24:49.240

我建议你使用 sencha-touch 2 来开发这样的电话间隙应用程序。我也对 jquery mobile 的性能问题感到非常恼火，尤其是在过渡期间出现的白屏问题，但是当我尝试 sencha 时，它非常令人印象深刻。我相信你也会喜欢的。在这里也很容易学习[。](http://docs.sencha.com/touch/2-0/#!/video)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T10:22:33.967

如果您不知道/想使用 Obj-C，Titanium 是最好的方法[http://appcelerator.com](http://appcelerator.com)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-08T15:59:52.837

现有的所有框架都可以完成工作，但正确完成工作是另一回事。我使用自定义构建的框架，性能实际上相当不错，即使在 Android 2.2.2 上也是如此！

您需要了解 CSS 过渡会节省您的时间，在 iOS 上您可以获得硬件加速。忘记使用 jQuery 制作动画。

在这点上，使用 jQuery 很好，Zepto 可以更好 - 它们具有相似的语法，因此很容易跳入 Zepto。

不要像网站一样进行应用程序构建 - 您需要考虑环境。移动设备的处理能力受到更多限制 - 所以一些在桌面上运行良好的东西在移动设备上表现不佳。考虑图像与代码绘图。使用 Ajax 加载页面与将所有内容放在一个页面上（这会杀死您的处理器）

学习本机代码还有额外的好处 - 将它们一起使用可能非常有用 - 使用本机进行繁重的工作......

这些框架确实有效，但它们体积庞大，如果你像我一样喜欢控制。我喜欢了解项目中的每一行代码，所以如果确实出现问题，我知道如何解决它...

只是我的想法！

# amazon-s3 - 用于分析 s3 日志的 Amazon Elastic Map Reduce

> ID：10947045
> 
> 赞同：6
> 
> 时间：2012-06-08T10:21:24.593
> 
> 标签：amazon-s3, amazon-web-services, transform, hive, elastic-map-reduce

我正在使用 EMR 来分析 Web nginx 日志。但是我需要处理日志，使其可以分为行和列，以便于查询。因此，我按以下方式制作了两个表 - rawlog、processedlog：

```
create table rawlog(line string)
row format delimited fields terminated by '\t' lines terminated by '\n'
LOCATION 's3://istreamanalytics/logs/';

CREATE EXTERNAL TABLE processedlog (
day string,
hour int,
playSessionId string
)
ROW FORMAT DELIMITED FIELDS TERMINATED BY '\t' LINES TERMINATED BY '\n'; 
```

并在 hive 中添加了一个可以进行转换的 ruby​​ 脚本，脚本如下：

```
#!/usr/bin/env ruby

mon={"Jan" => '01',"Feb" => '02',"Mar" => '03',"Apr" => '04',"May" => '05',"Jun" =>    '06',"Jul" => '07',"Aug" => '08',"Sep" => '09',"Oct" => '10',"Nov" => '11',"Dec" => '12'}

STDIN.each_line do |line|
if line =~ /(\d+)\/(\w+)\/(\d+):(\d+):\d+:\d+ \+\d+] "GET \/api\?playSessionId=(^&*)/
d = "#{$3}-#{mon$2}-#{$1}"
h = $4
pid = $5
puts "#{d}\t#{h}\t#{pid}"
end
end 
```

现在，当我在 hive 上使用以下命令运行作业时：

```
from rawlog insert overwrite table processedlog select transform (line) using 'ruby /mnt/var/lib/hive_081/downloaded_resources/hive_transformer.rb' as (day String, hour INT, playSessionId String); 
```

我收到以下错误：

```
Total MapReduce jobs = 2
Launching Job 1 out of 2
Number of reduce tasks is set to 0 since there's no reduce operator
Starting Job = job_201206061145_0015, Tracking URL = http://domU-12-31-39-0F-86-07.compute-1.internal:9100/jobdetails.jsp?jobid=job_201206061145_0015
Kill Command = /home/hadoop/.versions/0.20.205/libexec/../bin/hadoop job -Dmapred.job.tracker=10.193.133.241:9001 -kill job_201206061145_0015
Hadoop job information for Stage-1: number of mappers: 1; number of reducers: 0
2012-06-08 09:47:49,644 Stage-1 map = 0%, reduce = 0%
2012-06-08 09:48:50,267 Stage-1 map = 0%, reduce = 0%
2012-06-08 09:48:52,278 Stage-1 map = 100%, reduce = 100%
Ended Job = job_201206061145_0015 with errors
Error during job, obtaining debugging information...
 Examining task ID: task_201206061145_0015_m_000002 (and more) from job job_201206061145_0015

Exception in thread "Thread-41" java.lang.RuntimeException: Error while reading from task log url
at org.apache.hadoop.hive.ql.exec.errors.TaskLogProcessor.getErrors(TaskLogProcessor.java:130)
at org.apache.hadoop.hive.ql.exec.JobDebugger.showJobFailDebugInfo(JobDebugger.java:211)
at org.apache.hadoop.hive.ql.exec.JobDebugger.run(JobDebugger.java:81)
at java.lang.Thread.run(Thread.java:662)
Caused by: java.io.IOException: Server returned HTTP response code: 400 for URL:     

http://10.254.139.143:9103/tasklogtaskid=attempt_201206061145_0015_m_000000_2&start=-8193
at sun.net.www.protocol.http.HttpURLConnection.getInputStream(HttpURLConnection.java:1436)
at java.net.URL.openStream(URL.java:1010)
at org.apache.hadoop.hive.ql.exec.errors.TaskLogProcessor.getErrors(TaskLogProcessor.java:120)
... 3 more
Counters:
 FAILED: Execution Error, return code 2 from org.apache.hadoop.hive.ql.exec.MapRedTask
 MapReduce Jobs Launched:
 Job 0: Map: 1 HDFS Read: 0 HDFS Write: 0 FAIL
 Total MapReduce CPU Time Spent: 0 msec 
```

有人可以告诉我有什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T04:07:46.100

有关错误的更多详细信息可以在日志文件中找到，或者在您的情况下查看详细信息：`http://10.254.139.143:9103/tasklogtaskid=attempt_201206061145_0015_m_000000_2&start=-8193`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T23:43:14.127

EMR 是一个非常通用的日志处理工具。

为什么不使用更量身定制的技术。

例如：

*   [相扑逻辑](http://www.sumologic.com/)
*   [Splunk 风暴](http://www.splunkstorm.com/)
*   [日志](http://www.loggly/)

至少使用 Sumo，您可以使这种处理变得更加容易。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T03:41:36.310

我要提出的唯一建议是确保脚本在 EMR 之前正常工作。使用 EMR 测试脚本应该是该过程的最后一步。除此之外，它通常是一个基本的配置问题。

一些基本的谷歌搜索发现：

[http://entxtech.blogspot.com/2010/10/how-to-unit-test-apache-hive-scripts.html](http://entxtech.blogspot.com/2010/10/how-to-unit-test-apache-hive-scripts.html) [http://jairam.me/2011/09/08/hive-on-amazon-emr /](http://jairam.me/2011/09/08/hive-on-amazon-emr/)

# jquery - jquery查找并替换多个项目

> ID：10947046
> 
> 赞同：1
> 
> 时间：2012-06-08T10:21:25.310
> 
> 标签：jquery, replace

我有一张需要为每种语言翻译的月表

像这样的东西（显然不起作用）

```
$('.lang-en #monthly th').each(function() {
    var text = $(this).text();
    $(this).text(text.replace('Tam', 'Jan')); 
    $(this).text(text.replace('Hel', 'Feb')); 
    $(this).text(text.replace('Maa', 'Mar')); 
    $(this).text(text.replace('Huh', 'Apr')); 
    $(this).text(text.replace('Tou', 'May')); 
    $(this).text(text.replace('Kes', 'Jun')); 
    $(this).text(text.replace('Hei', 'Jul')); 
    $(this).text(text.replace('Elo', 'Aug')); 
    $(this).text(text.replace('Syy', 'Sep')); 
    $(this).text(text.replace('Lok', 'Oct')); 
    $(this).text(text.replace('Mar', 'Nov'));
    $(this).text(text.replace('Jou', 'Dec')); 
    $(this).text(text.replace('Yht', 'Total'));

}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T10:24:32.333

您可以维护原始字符串和替换字符串之间的映射，并将函数传递给[text()](http://api.jquery.com/text/)：

```
var mapping = {
    "Tam": "Jan",
    "Hel": "Feb",
    // ...and so on...
};

$("#monthly th").text(function(index, originalText) {
    return mapping[originalText];
}); 
```

**编辑：**如果只想替换部分文本，可以使用嵌套数组而不是对象：

```
var mapping = [
    ["Tam", "Jan"],
    ["Hel", "Feb"],
    // ...and so on...
];

$("#monthly th").text(function(index, originalText) {
    var pattern = mapping[index];
    return originalText.replace(pattern[0], pattern[1]);
}); 
```

# iphone - 想要在不使用 MFmailcomposer 且不使用 web 服务的情况下发送邮件

> ID：10947048
> 
> 赞同：2
> 
> 时间：2012-06-08T10:21:32.803
> 
> 标签：iphone, objective-c

我有一项与无连接或 MFmailcomposer 的情况下发送邮件有关的任务。只是我正在处理一个必须发送单个邮件 ID 的表单。当表单填满并且用户执行发送操作时，如果连接可用，则在没有 MFmailcomposer 和 web 服务的情况下将邮件发送到客户端，否则如果 Wi-fi 不可用，则填写的表单文本文件将保存在文档目录中。当 iPhone 连接时然后自动将其发送到该邮件-id。文档保存为文本文件。但现在该怎么办？SMTP 对它有用吗？建议我...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T11:01:37.730

您肯定必须使用 SMTP 实现此功能。

检查这个 SO Post，[开源 Cocoa/Cocoa-Touch POP3/SMTP 库的答案？](https://stackoverflow.com/questions/740939/open-source-cocoa-cocoa-touch-pop3-smtp-library)

包括几个指向不同 SMTP 库的链接以及示例代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T10:37:58.830

下面的链接可以帮助你...

[http://www.raddonline.com/blogs/geek-journal/iphone-sdk-testing-network-reachability/](http://www.raddonline.com/blogs/geek-journal/iphone-sdk-testing-network-reachability/)

# android - Android 模拟器 - 错误

> ID：10947049
> 
> 赞同：0
> 
> 时间：2012-06-08T10:21:33.623
> 
> 标签：android, android-emulator, extjs, sencha-touch-2

我正在尝试在 android 模拟器上运行我的示例 sencha app 2，但它给了我以下错误。

```
C:\path\to\www\mysenchaapp>sencha app build native
[INFO] Deploying your application to C:\path\to\www\mysenchaapp\build\package
[INFO] Copied sdk/sencha-touch.js
[INFO] Copied app.js
[INFO] Copied resources/css/app.css
[INFO] Copied resources/images
[INFO] Copied resources/icons
[INFO] Copied resources/loading
[INFO] Resolving your application dependencies...
[INFO] Found 139 dependencies. Concatenating all into app.js...
[INFO] Processed sdk/sencha-touch.js
[INFO] Minifying sdk/sencha-touch.js
[INFO] Processed app.js
[INFO] Minifying app.js
[INFO] Minifying resources/css/app.css
[INFO] Minified sdk/sencha-touch.js
[INFO] Minified app.js
[INFO] Minified resources/css/app.css
[INFO] Generated app.json
[INFO] Embedded microloader into index.html
[INFO] Packaging your application as a native app...
[INFO] ""C:Program FilesAndroidandroid-sdk/tools/android" create project --targe
t android-7 --name MyApplication --activity STActivity --path "C:\path\to\www\my
senchaapp\build\native/" --package com.mycompany.myAppID"
Failed to create android project
Failed to package application
[ERROR] The system cannot find the path specified. 
```

请让我知道，这里有什么问题。

感谢您的时间和支持

**更新;**

```
C:\path\to\www\mysenchaapp>sencha app build native
[INFO] Deploying your application to C:\path\to\www\mysenchaapp\build\package
[INFO] Copied sdk/sencha-touch.js
[INFO] Copied app.js
[INFO] Copied resources/css/app.css
[INFO] Copied resources/images
[INFO] Copied resources/icons
[INFO] Copied resources/loading
[INFO] Resolving your application dependencies...
[INFO] Found 139 dependencies. Concatenating all into app.js...
[INFO] Processed sdk/sencha-touch.js
[INFO] Minifying sdk/sencha-touch.js
[INFO] Processed app.js
[INFO] Minifying app.js
[INFO] Minifying resources/css/app.css
[INFO] Minified sdk/sencha-touch.js
[INFO] Minified app.js
[INFO] Minified resources/css/app.css
[INFO] Generated app.json
[INFO] Embedded microloader into index.html
[INFO] Packaging your application as a native app...
[INFO] ""C:/Program Files/Android/android-sdk/tools/android" create project --
rget android-7 --name MyApplication --activity STActivity --path "C:\path\to\w
\mysenchaapp\build\native/" --package com.mycompany.myAppID"
Failed to copy packager library
Failed to package application
[ERROR] Error: Target id is not valid. Use 'android.bat list targets' to get t
 target ids.
Copy operation failed src=C:/Windows/stbuild/st-res/android//nimblekit.jar dst
:\path\to\www\mysenchaapp\build\native//libs/nimblekit.jar 
```

# android - 带有片段标签和 AdMob 的操作栏

> ID：10947053
> 
> 赞同：2
> 
> 时间：2012-06-08T10:21:42.427
> 
> 标签：android, admob, android-actionbar

我有一个应用程序将 ActionBar 与选项卡结合使用 Fragments。现在我想把屏幕分成顶部的普通屏幕和底部的一个小条用于广告： ![在此处输入图像描述](../Images/5e4ff3f5b7196a9176617b3f5efd54b8.png)
左边是普通屏幕，标签和它们的片段占据了整个屏幕。我想要的是右边的情况。标签和片段占据红色部分，绿色部分用于广告。所以红色部分应该为广告腾出空间，我不想覆盖广告。

由于设置 ActionBar 和选项卡的 Activity 没有布局，我无法添加 AdView。

我怎样才能做到这一点？

**编辑**
这就是我实现我的应用程序的方式。带有选项卡的操作栏负责显示片段，因此在主 Activity 中不使用 xml 布局文件。

我的代码： `TestActivity.java`

```
public class TestActivity extends SherlockFragmentActivity {
    private ActionBar actionBar;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setupTabs(savedInstanceState);

        initAds();
    }

    private void setupTabs(Bundle savedInstanceState) {
        actionBar = getSupportActionBar();
        actionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);

        addTab1();
        addTab2();
    }

    private void addTab1() {
        Tab tab1 = actionBar.newTab();
        tab1.setTag("1");
        String tabText = "1";
        tab1.setText(tabText);
        tab1.setTabListener(new TabListener<MyFragment>(TestActivity.this, "1", MyFragment.class));

        actionBar.addTab(tab1);
    }

    private void addTab2() {
        Tab tab1 = actionBar.newTab();
        tab1.setTag("2");
        String tabText = "2";
        tab1.setText(tabText);
        tab1.setTabListener(new TabListener<MyFragment>(TestActivity.this, "2", MyFragment.class));

        actionBar.addTab(tab1);
    }

    private void initAds(){
        //Here I want to display the ad, only loading once, Just like Davek804 said
    }
} 
```

`TabListener.java`

```
public class TabListener<T extends SherlockFragment> implements com.actionbarsherlock.app.ActionBar.TabListener {
    private final SherlockFragmentActivity mActivity;
    private final String mTag;
    private final Class<T> mClass;

    public TabListener(SherlockFragmentActivity activity, String tag, Class<T> clz) {
        mActivity = activity;
        mTag = tag;
        mClass = clz;
    }

    /* The following are each of the ActionBar.TabListener callbacks */

    public void onTabSelected(Tab tab, FragmentTransaction ft) {
        SherlockFragment preInitializedFragment = (SherlockFragment) mActivity.getSupportFragmentManager().findFragmentByTag(mTag);

        // Check if the fragment is already initialized
        if (preInitializedFragment == null) {
            // If not, instantiate and add it to the activity
            SherlockFragment mFragment = (SherlockFragment) SherlockFragment.instantiate(mActivity, mClass.getName());
            ft.add(android.R.id.content, mFragment, mTag);
        } else {
            ft.attach(preInitializedFragment);
        }
    }

    public void onTabUnselected(Tab tab, FragmentTransaction ft) {
        SherlockFragment preInitializedFragment = (SherlockFragment) mActivity.getSupportFragmentManager().findFragmentByTag(mTag);

        if (preInitializedFragment != null) {
            // Detach the fragment, because another one is being attached
            ft.detach(preInitializedFragment);
        }
    }

    public void onTabReselected(Tab tab, FragmentTransaction ft) {
        // User selected the already selected tab. Usually do nothing.
    }
} 
```

`MyFragment.java`

```
public class MyFragment extends SherlockFragment {

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        return inflater.inflate(R.layout.myfragment, container, false);
    }

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-11T02:02:54.723

创建一个包含 AdView 定义的 XML 文件，并将`<include>`其包含在每个片段的底部。

或者，创建一个布局和您的选项卡。参照。参考dos：

> 要开始，您的布局必须包含一个 ViewGroup，您可以在其中放置与选项卡关联的每个 Fragment。确保 ViewGroup 具有资源 ID，以便您可以从选项卡交换代码中引用它。或者，如果选项卡内容将填充活动布局（不包括操作栏），那么您的活动根本不需要布局（您甚至不需要调用 setContentView()）。相反，您可以将每个片段放在默认的根 ViewGroup 中，您可以使用 android.R.id.content ID 来引用它（您可以在片段事务期间在下面的示例代码中看到此 ID）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T02:10:10.747

[http://android-developers.blogspot.com/2009/02/android-layout-tricks-2-reusing-layouts.html](http://android-developers.blogspot.com/2009/02/android-layout-tricks-2-reusing-layouts.html)

[http://android-developers.blogspot.com/2009/03/android-layout-tricks-3-optimize-by.html](http://android-developers.blogspot.com/2009/03/android-layout-tricks-3-optimize-by.html)

第二个链接详细说明了如何执行此图片：![在此处输入图像描述](../Images/9357614aa2bf8ede62d5fecb0a3e22aa.png)

# python - Python：如何在列表中添加字典键的值而不是引用？

> ID：10947056
> 
> 赞同：0
> 
> 时间：2012-06-08T10:22:13.943
> 
> 标签：python, list, dictionary

我有一个由名称和每个键中的列表组成的字典，如下所示：

```
dict1={}
for i in names:
    dict1[i]=[] 
```

然后，我处理一个 csv 文件并找到我需要的结果，我将其附加到相应的字典值，并在列表中附加名称和字典值，如下所示：

```
list1=[]
for i2 in data:
    total_score=sum(i2[1:4])
    dict1[i2[0]].append(total_score)
    list1.append([i2[0],dict1[i2[0]]]) 
```

如果我尝试打印 list1 的元素，我会得到每个键的最终列表，而不是渐进列表。

结束列表应该是这样的：

```
list1=[[name1,[50]],[name1,[50,60]],[name1,[50,60,0,85]]] 
```

有什么想法吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T10:28:07.600

除非您以某种方式克隆您的列表，否则只会有一份副本（用您的话来说，是最后一份）。如果我明白你想要什么，解决方案就像

```
list1=[]
for i2 in data:
    total_score=sum(i2[1:4])
    templist = dict1[i2[0]][:]
    templist.append(total_score)
    list1.append([i2[0],templist]) 
```

有关详细信息，请参阅[http://docs.python.org/library/copy.html 。](http://docs.python.org/library/copy.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T11:55:37.157

只是改变：

```
 list1.append([i2[0],dict1[i2[0]]]) 
```

到：

```
 list1.append([i2[0],dict1[i2[0]][:]]) 
```

这将复制 dict1 中列表的当前值，而不仅仅是引用它。

（我猜这个附加曾经是一个打印语句，它只会在 dict1 中显示列表的当前值。但是当你将它保存到 list1 中时，你保存的是对列表的引用，而不是它的副本。`[:]`slice 操作符会创建一个副本，因此不会将附加到 key 列表的附加内容`i2[0]`添加到副本中。）

# ssas - SSAS 按订购产品数量计算订单的最佳方法

> ID：10947062
> 
> 赞同：0
> 
> 时间：2012-06-08T10:22:33.763
> 
> 标签：ssas, mdx

我正在寻找实现按订购产品数量计算订单的最佳方法。

ProductsOrdered有一个事实表，像这样

```
CREATE TABLE ProductsOrdered (
    IdOrder UNIQUEIDENTIFIER,
    IdProduct UNIQUEIDENTIFIER,
    OrderDate DATE,
    Quantity INT,
    Price DECIMAL(18,2)
) 
```

对于每个订单，表中都有所订购的每种产品的行。

我想要一个衡量一个产品订购了多少个，2 个订购了多少，等等。

就像这个 SQL 查询一样。

```
SELECT OrderedProductNumber, COUNT(IdOrder) AS NumberOfOrders
FROM (
    SELECT IdOrder, COUNT(IdProduct) AS OrderedProductNumber
    FROM ProductsOrdered
    GROUP BY IdOrder
) t
GROUP BY OrderedProductNumber 
```

哪个 MDX 表达式是最好的对应物？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T13:37:00.933

您遇到的问题是您只能按维度生成计数。在这种情况下，您的维度是订购的产品（1、2、3 等）。您的选择是创建一个具有多种可能性的物理维度（乏味），或者为要执行的维度创建“虚拟”成员与计算相同的事情（乏味且可能是性能问题）。我倾向于为订购的产品创建一个维度，然后使用您的 SQL 查询创建一个事实表，并将维度和度量值组添加到多维数据集。从长远来看，这将更容易实现，并且通过物理实例化计数，您将获得更好的查询性能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T17:19:49.857

您可以基于产品定义维度，然后基于事实表定义度量组，您命名为 ProductOrdered，然后您可以根据您的 IOrder 列定义不同的计数度量（例如`[IOrderdistinctcount]`）

之后你可以使用

```
select 
{IOrderdstinccount} on 0,
[dim Product].[product].[Product].members on 1
from [Cube] 
```

# android - android中的JSON解析：x错误没有值

> ID：10947065
> 
> 赞同：2
> 
> 时间：2012-06-08T10:22:38.530
> 
> 标签：android, json, parsing

这是我在 AsyncTask 中使用的代码

```
DefaultHttpClient httpClient = new DefaultHttpClient();
HttpGet request = new HttpGet(url);    
request.setHeader("Accept", "application/json");
request.setHeader("Content-type", "application/json");

HttpResponse response = httpClient.execute(request);

HttpEntity responseEntity = response.getEntity();

char[] buffer = new char[(int)responseEntity.getContentLength()];
    InputStream stream = responseEntity.getContent();
    InputStreamReader reader = new InputStreamReader(stream);
    reader.read(buffer);
    stream.close();

    result = new String(buffer);
    return result; 
```

这将返回一个字符串结果，并在我的 onPostExecute 方法中尝试解析该输入字符串：

```
JSONObject vehicle = new JSONObject(new String(result));
makeEdit.setText(vehicle.getString("make"));
plateEdit.setText(vehicle.getString("plate"));
modelEdit.setText(vehicle.getString("model"));
yearEdit.setText(vehicle.getString("year")); 
```

一旦它到达 makeEdit.setText 它就会抛出一个错误 - make 没有价值。我对android还是很陌生，所以如果有明显的错误，不要发送死亡威胁。输入文本是以下 JSON 字符串：

```
{"GetJSONObjectResult":{"make":"Ford","model":"Focus","plate":"XXO123GP","year":2006}} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-08T10:25:46.623

`No value for x error`message 在处理 JSON 时很常见。这通常是由于被忽略的代码造成的。

通常，当 dong JSON 时，我会首先尝试查看*人类可读*的结构。为此，我通常使用[JSONViewer](http://jsonviewer.stack.hu/)。

在你的情况下，结构是这样的：

![在此处输入图像描述](../Images/f4cf7818384b25adfc634e02d41c71e6.png)

您会看到它`make`位于另一个名为`GetJSONObjectResult`. 因此，要获取它，必须先获取容器对象：

```
JSONObject vehicle = ((JSONObject)new JSONObject(result)).getJSONObject("GetJSONObjectResult");
//a more easy to read
JSONObject container = new JSONObject(result);
JSONObject vehicle = container.getJSONObject("GetJSONObjectResult"); 
```

最后使用对象得到`make`：

```
makeEdit.setText(vehicle.getString("make"));
plateEdit.setText(vehicle.getString("plate"));
modelEdit.setText(vehicle.getString("model"));
yearEdit.setText(vehicle.getString("year")); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-08T10:26:45.750

您的 JSON 对象本身包含一个 JSONObject。要访问您的数据，您必须这样做：

```
vehicle.getJSONObject("GetJSONObjectResult").getString("make"); 
```

# php - 超时后如何断开 ZeroMQ 套接字？

> ID：10947074
> 
> 赞同：6
> 
> 时间：2012-06-08T10:22:59.587
> 
> 标签：php, zeromq

我在 PHP 中使用 ZeroMQ 非常成功，并编写了一个作业服务器。我有一个管理脚本，它检查服务器的运行状况并执行诸如 ping 超时之类的操作。

当服务器启动时，一切都很好，但是当它关​​闭时（并且`ZMQPoll`按预期超时），我的脚本会做它应该做的事情 - 但脚本永远不会终止。

我已经尝试清理和取消设置所有套接字变量等。但即使调用`exit()`PHP 脚本也会挂起。

似乎没有套接字`disconnect()`方法，那么我如何告诉 PHP 套接字已死并且我不希望它挂起？

这是我的管理脚本中的以下代码片段 -

```
 // ...
        // waiting for dead server on zmqsock to respond after sending a message
        // 
        $poll = new ZMQPoll;
        $poll->add( $this->zmqsock, ZMQ::POLL_IN );
        $readable = $writeable = array();
        $poll->poll( $readable, $writeable, $timeout * 1000 );
        if( $errors = $poll->getLastErrors() ) {
            foreach ( $errors as $err ) {
                throw new Exception($err);
            }
        }
        if( ! $readable ){
             // clean up everything, raise errors, etc..
             $poll->clear();
             unset( $poll, $this->zmqsock, $this->zmqcontext );
             // Script hangs here
             exit(0);
        }
        // .. 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-08T11:57:55.010

ZeroMQ 将在关闭时尝试传递挂起的消息 - 您可以通过设置 ZMQ::SOCKOPT_LINGER 套接字选项（您必须在连接*之前*执行此操作）来控制它，这应该允许您快速终止。

[查看http://api.zeromq.org/2-1:zmq-setsockopt](http://api.zeromq.org/2-1:zmq-setsockopt)上的 ZMQ_LINGER 位

# mongoose - 如何在 qooxdoo 表中管理来自 mongoose/mongodb 的子文档？

> ID：10947078
> 
> 赞同：0
> 
> 时间：2012-06-08T10:23:39.590
> 
> 标签：mongoose, qooxdoo

我在 qooxdoo 中有一个表格，其中显示了一些数据，但是这个数据有点不同，因为嵌入了子文档：

```
[
    {
        simpleField: 1,
        mapSubDocField: {
            key1: 1,
            key2: 3
        }
    },
    {
        simpleField: 1,
        mapSubDocField: {
            key1: 1,
            key2: 3
        }
    },
    {
        simpleField: 1,
        mapSubDocField: {
            key1: 1,
            key2: 3
        }
    },
] 
```

我试图做这样的事情但没有奏效：

```
model.setColumns(   ['simpleFIeld', 'key1', 'key2'], 
            ['simpleFIeld', 'mapSubDocField.key1', 'mapSubDocField.key2']); 
```

但没有用，我的领域是空的。

我该怎么办？谢谢

编辑：目前在我的模型中，我还添加了这个脚本：

```
 var i = result.length;
        var item;
        var key;
        var subitem;
        var subkey;
        while(i--){
            item = result[i];
            for(key in item){
                if(Object.prototype.toString.call(item[key]) === '[object Object]'){
                    var subitem = item[key];
                    for(subkey in subitem){

                        item[key+'.'+subkey] = subitem[subkey];
                        delete item[key];
                    }
                }
            }
        } 
```

这会将上面的对象转换为：

```
[
    {
        simpleField: 1,
        mapSubDocField.key1: 1,
        mapSubDocField.key2: 3
    },
    {
        simpleField: 1,
        mapSubDocField.key1: 1,
        mapSubDocField.key2: 3
    },
    {
        simpleField: 1,
        mapSubDocField.key1: 1,
        mapSubDocField.key2: 3
    }
] 
```

但问题仍然存在：存在更好的方法吗？（也许qooxdoo可以自己管理）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T08:12:16.913

该表能够将数据显示为列表列表。如果您有分层数据结构，您可能需要考虑将数据显示为树。qooxdoo 还为数据可视化提供了树。也许 TreeVirtual 是您的正确选择？如果您想坚持使用表格，您有责任将数据带到表格可以理解的结构中。

# java - 在 Flash 页面中，选择框（组合框）无法使用 Webdriver

> ID：10947080
> 
> 赞同：0
> 
> 时间：2012-06-08T10:23:51.773
> 
> 标签：java, webdriver, watir-webdriver

我已经完成了一些示例代码，以在 Flash 页面中使用 webdriver 选择组合框，但 Select(...) 和 type(....) 方法不起作用，但 click(....) 方法工作正常。

请帮助解决这个问题。类型 1：以下方法不起作用。

```
public void type(String locator, String value)
{
    ((JavascriptExecutor) webDriver).executeScript("document.getElementById('" + flashObjectId + "').fp_type({" + locator +", 'text':'"+ value +"'})");
}

public void select(String locator, String value) 
{
    ((JavascriptExecutor) webDriver).executeScript("document.getElementById('" + flashObjectId + "').fp_select({" + locator +", 'label':'"+ value +"'})");
} 
```

它在下面的 click(....) 方法中工作正常。

```
public String click(final String objectId, final String optionalButtonLabel) 
{
    return call("doFlexClick", objectId, optionalButtonLabel);
}

private String call(final String functionName, final String... args) 
{
    final Object result =
          ((JavascriptExecutor)webDriver).executeScript(
               makeJsFunction(functionName, args),
               new Object[0]);

       return result != null ? result.toString() : null;
}

private String makeJsFunction(final String functionName, final String... args) 
{
    final StringBuffer functionArgs = new StringBuffer();

    if (args.length > 0) 
    {
       for (int i = 0; i < args.length; i++) 
        {
           if (i > 0) 
            {
               functionArgs.append(",");
            }
           functionArgs.append(String.format("'%1$s'", args[i]));
           System.out.println("functionArgs: "+functionArgs);
          }
     }

     return String.format(
       "return document.%1$s.%2$s(%3$s);",
       flashObjectId,
       functionName,
       functionArgs);
} 
```

请帮助在选择框中修复此问题并在 Flash 中使用 webdriver 键入操作。

提前致谢， 戈帕尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T10:42:08.013

Watir-Webdriver 不支持 Flash 页面。

# javascript - 如何为多个id动态分配数字？

> ID：10947081
> 
> 赞同：0
> 
> 时间：2012-06-08T10:23:57.930
> 
> 标签：javascript, jquery

这似乎是很长的路要走，是否可以为 id 动态分配数字？

```
$(function () {
    $('#Button1').click(function(){
        $('#RegularExpressionValidator1, #RegularExpressionValidator2, #RequiredFieldValidator1, #RequiredFieldValidator2, #RequiredFieldValidator3, #RequiredFieldValidator4, #RequiredFieldValidator5, #RequiredFieldValidator6, #RequiredFieldValidator7, #RequiredFieldValidator8, #RequiredFieldValidator9').css("display", "block");
    });
}); 
```

这些是我无权访问的 .NET 生成的 ID。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-08T10:25:39.573

您可以使用“[以”选择器开头的属性](http://api.jquery.com/attribute-starts-with-selector/)：

```
$("[id^='RegularExpressionValidator']").css("display", "block"); 
```

来自 jQuery 文档：

> 此选择器可用于识别由服务器端框架生成的页面中的元素，这些框架生成具有系统元素 ID 的 HTML。但是，它会比使用类选择器慢，因此如果可以的话，可以利用类来对类似元素进行分组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T10:26:20.437

查看[以选择器开头的属性](http://api.jquery.com/attribute-starts-with-selector/)。使用它，您可以简单地执行以下操作：

```
$(function () {
    $('#Button1').click(function(){
        $('[id^="RegularExpressionValidator"], [id^="RequiredFieldValidator"]').css("display", "block");
    });
}); 
```

这将选择 ID 以 开头的所有元素`RegularExpressionValidator`。您可能需要指定元素类型，以及要查看的容器以选择更少的元素。

您可能还想使用`$.show()`而不是`$.css()`：

```
$('[id^="RegularExpressionValidator"], [id^="RequiredFieldValidator"]').show(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-08T10:28:57.920

尝试

```
$(function () {
    $('#Button1').click(function(){
        $('[id^="RegularExpressionValidator"], [id^="RequiredFieldValidator"]').css("display", "block");
    });
}); 
```

# wpf - 非方形布局

> ID：10947091
> 
> 赞同：3
> 
> 时间：2012-06-08T10:24:28.667
> 
> 标签：wpf, panel

我正在尝试在 wpf 中进行某种布局，最好的解释方式是向您展示：

这就是它现在的样子：

![在此处输入图像描述](../Images/8dd116f9e7e34d3556634cdeedd831de.png)

它应该是这样的：

![在此处输入图像描述](../Images/f8090b2c8f46b23b6555305d425e22bc.png)

有没有人知道如何在 wpf 中实现这一点？边框必须与图像中的完全相同。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T14:36:48.753

如果这些是网格，您可以使用两个`Border`Width 设置为 the`CornerRadius`并将其高度绑定到`ActualHeight`右上角面板的 99.9% 的方式来伪造它：

```
<Grid>
  <Grid.ColumnDefinitions>
    <ColumnDefinition Width="3*" />
    <ColumnDefinition Width="2*" />
  </Grid.ColumnDefinitions>
  <Grid.RowDefinitions>
    <RowDefinition Height="*" />
    <RowDefinition Height="9*" />
  </Grid.RowDefinitions>
  <Border Background="Red" Grid.RowSpan="2" CornerRadius="5" Margin="2"/>
  <Border x:Name="TopRight" Background="Red" Grid.Column="1"
          CornerRadius="5" Margin="2"/>
  <Border Background="Yellow" Width="5"
          Height="{Binding ActualHeight, ElementName=TopRight}"
          HorizontalAlignment="Right" VerticalAlignment="Top" Margin="0,2,0,2"/>
  <Border Background="Yellow" Width="5" HorizontalAlignment="Left"
          Height="{Binding ActualHeight, ElementName=TopRight}"
          VerticalAlignment="Top" Grid.Column="1" Margin="0,2,2,0"/>
  <Border Background="Green" Grid.Column="1" Grid.Row="1"
          CornerRadius="5" Margin="2"/>
</Grid> 
```

此处的颜色仅作为叠加的示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T10:38:41.523

这是一种方法：

```
<Grid>

  <Grid.ColumnDefinitions>
    <ColumnDefinition Width="3*" />
    <ColumnDefinition Width="2*" />
  </Grid.ColumnDefinitions>

  <Grid.RowDefinitions>
    <RowDefinition Height="*" />
    <RowDefinition Height="9*" />
  </Grid.RowDefinitions>

  <Control x:Name="Panel1" Grid.ColumnSpan="2" Grid.RowSpan="2" />

  <Control x:Name="Panel2" Grid.Column="1" Grid.Row="1" />

</Grid> 
```

您可以根据需要使用列/行比率（或使用固定值）。

（当然使用你想要的而不是`<Control />`s）

# azure - 哪种 Azure 诊断日志存储 webrole 实例计数更改、启动、停止、升级等数据？

> ID：10947096
> 
> 赞同：0
> 
> 时间：2012-06-08T10:24:53.753
> 
> 标签：azure, azure-storage, azure-diagnostics

哪种 Azure 诊断日志存储 webrole 实例计数更改、启动、strop、升级等数据？我需要为我的应用程序存储这些日志。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T18:07:22.400

Windows Azure 角色实例计数数据不通过 Windows Azure 诊断日志存储。Windows Azure 诊断旨在将日志信息存储在与资源、应用程序相关的实例中，以便您可以从中获取此类数据。

但是，实例特定的数据（例如启动、停止、就绪等）已经存储在 Azure 诊断范围之外的 VM 中（意味着您无需在 VM 中执行任何操作来获取此数据，默认情况下会记录它）。此数据由 Windows Azure VM AppAgent 直接存储，大小可能为几兆字节，因此您可以确定可以 RDP 到 Azure VM 并查看此日志数据。我不建议您从 Azure VM 中移动此日志数据，因为它可能对您没有任何用处。

要查看此类日志，您只需 RDP 到您的 Azure VM 并访问**C:\logs**文件夹，日志将位于文件名中，即 WaAppAgent.###.log 并打开这些日志文件，您可以看到当前实例状态：

```
[00000011] [06/07/2012 12:01:03.01] WaAppAgent Heartbeat.
[00000011] [06/07/2012 12:01:03.01] Role ***.MainWebRole_IN_0 is reporting state Ready.
[00000012] [06/07/2012 12:01:04.32] Role ***.MainWebRole_IN_0 has current state Started, desired state Started, and goal state execution status StartSucceeded.
[00000011] [06/07/2012 12:01:08.01] WaAppAgent Heartbeat. 
```

只要你的角色正在运行，这样的文件就会累积很多，所以虽然拥有这些信息是件好事，但我只是不认为你会从中获得任何大的价值。我编写了一个工具来总结这些日志，以了解上次角色启动或停止的时间，因此您可以在这里尝试：http: [//azurevmassist.codeplex.com/](http://azurevmassist.codeplex.com/)

# reporting-services - SSRS 通过单击按钮显示/隐藏参数窗格

> ID：10947098
> 
> 赞同：2
> 
> 时间：2012-06-08T10:25:07.803
> 
> 标签：reporting-services, ssrs-2008

我创建了一个包含许多参数的报告，以便用户可以过滤数据。

默认情况下，显示/隐藏参数选项卡是关闭的。要访问这些参数，用户需要单击常用按钮以展开标题区域并查看所有可能的参数。

这一切都很好，我希望默认隐藏参数，因为它占报告的很大一部分，并不是每个人都希望看到它们。

但是，我想要的是创建一个名为“使用过滤”或类似名称的文本框并创建一个“操作”，以便在单击该框时单击报告的 URL，并在末尾包含某种附加命令，以便它重新加载当前页面，但使用显示参数窗格的命令。

我已尝试将以下内容添加到报告页面的 URL，但它不起作用：

```
&rc:HeaderArea=full&rc:Parameters=true 
```

并且

```
&rv:HeaderArea=full&rc:Parameters=true 
```

它所做的只是重新加载页面，但对参数窗格没有任何更改。

谁能在这里指出我正确的方向。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T10:54:52.360

如果要使用这些参数，则必须通过 Web 服务 URL 而不是前端 URL 加载报告。

通常在标准安装中，这些是`http://MyServer/Reports`（前端）和`http://ReportServer`（WebService）。只有 WebService URL 会接受您尝试使用的参数，另一个只会忽略它们，因此报告正在加载但没有观察您传递给它的参数。

# java - 如何在不调整窗口大小的情况下使用 Java 在 Selenium Webdriver 中捕获屏幕截图

> ID：10947101
> 
> 赞同：2
> 
> 时间：2012-06-08T10:25:19.573
> 
> 标签：java, selenium, webdriver, screenshot

我正在尝试在 selenium 运行时截取网页的屏幕截图。我为此目的使用以下代码

```
WebDriver augmentedDriver = new Augmenter().augment(seleniumDriver);
            File scrFile = ((TakesScreenshot)augmentedDriver).getScreenshotAs(OutputType.FILE); 
```

现在它很好地满足了我的目的，只是每当调用此方法时，浏览器都会自动进入默认大小并再次最大化。

每次调用屏幕截图功能时，这种情况都会继续。如果我不使用 selenium webdriver 截取屏幕截图并使用其他 java 函数，我能够解决这个问题。

我想知道是否有人有类似的问题/为什么我会遇到这个问题。有什么解决方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T13:02:21.987

```
File scrFile = ((TakesScreenshot)driver).getScreenshotAs(OutputType.FILE);

FileUtils.copyFile(scrFile, new File("D:\\screenshot.jpg")); 
```

这段代码肯定会有所帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T20:42:02.533

它会尝试适应页面大小并尽可能小或尽可能大地截取整个页面以适应整个页面。除了烦人之外，它不应该是任何其他问题的原因，因此被认为是比仅截取实际视口的屏幕截图更好的解决方案，因为实际视口可能会丢失您尝试检查的页面的某些重要部分。

如果您对此不满意，请使用[`Robot`](http://docs.oracle.com/javase/7/docs/api/java/awt/Robot.html)它的[`createScreenCapture()`](http://docs.oracle.com/javase/7/docs/api/java/awt/Robot.html#createScreenCapture%28java.awt.Rectangle%29)方法。

* * *

或者，但它只适用于 Firefox，您可以尝试覆盖`FirefoxDriver's`屏幕截图的方法。未经测试，不知道是否允许您这样做。

```
JavascriptExecutor js = (JavascriptExecutor)driver;
js.executeScript("FirefoxDriver.prototype.screenshot = function(a){};"); 
```

并且（如果这还不够的话）甚至可能

```
js.executeScript("FirefoxDriver.prototype.saveScreenshot = function(a,b){};"); 
```

[从这里](http://code.google.com/p/selenium/source/browse/trunk/javascript/firefox-driver/js/firefoxDriver.js)推断。实际的屏幕截图代码在[这里](http://code.google.com/p/selenium/source/browse/trunk/javascript/firefox-driver/js/screenshooter.js)。您可以`FirefoxDriver.prototype.screenshot`用您自己的函数替换该函数，该函数不会为`height`and `width`...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-21T07:27:44.890

截图代码使用了 TakesScreenshot 接口的 getScreenshotAs 方法。以下代码将对 webDriver 实例打开的网页进行截图。

```
File scrFile = ((TakesScreenshot)driver).getScreenshotAs(OutputType.FILE);
FileUtils.copyFile(scrFile, new File("D:\\testScreenShot.jpg")); 
```

现在为了在测试失败的情况下截屏，我们将使用 TestNG 的 AfterMethod 注释。在 AfterMethod 注释中，我们将使用 ITestResult 接口的 getStatus() 方法返回测试结果，如果失败，我们可以使用上述命令进行截图。用于在测试失败时截取屏幕截图的代码片段 -

```
@AfterMethod
public void takeScreenShotOnFailure(ITestResult testResult) throws IOException {
    if (testResult.getStatus() == ITestResult.FAILURE) {
        File scrFile = ((TakesScreenshot)driver).getScreenshotAs(OutputType.FILE);
        FileUtils.copyFile(scrFile, new File("D:\\testScreenShot.jpg"));
   }        
} 
```

有关完整的示例脚本，请参阅[http://artoftesting.com/automationTesting/screenShotInSelenium.html](http://artoftesting.com/automationTesting/screenShotInSelenium.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-05-10T17:23:59.380

我为此创建了一个方法，该方法非常易于使用。它截取整个网页的屏幕截图。它根据屏幕截图的数量对屏幕截图进行计数和命名，该方法还将屏幕截图作为 .png 文件存储到 src 中。

```
public static void screenshot(WebDriver driver) 
{

    System.out.println("Taking the screenshot.");   
    console_logs("Taking the screenshot.");
    scrFile = ((TakesScreenshot)driver).getScreenshotAs(OutputType.FILE);
    try {
        FileUtils.copyFile(scrFile, new File("src//tempOutput//webPage_screenshot_"+count+".png"));
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    count++;
    //return scrFile;
} 
```

**使用方法：**

```
screenshot(driver); 
```

# ios - 使用 Storyboard 将 NSString 传递给另一个视图

> ID：10947113
> 
> 赞同：0
> 
> 时间：2012-06-08T10:26:21.800
> 
> 标签：ios, uitableview, uiwebview, storyboard, segue

好的，

我已经阅读了一些关于此的问答，但我需要能够将它与我的代码联系起来，但我没有成功，我希望有人能帮助我:-)

我有一个填充了 NSMUtableArray 的 UITableViewController。

我想链接到每个条目，然后在其中包含 UIWebView 的 DetailViewController 中显示该 URL。

现在我有了将字符串从一个 VC 传递到下一个 VC 的想法，但这似乎行不通。

这是我在第一个 TVC 中的相关代码：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
int currentindex = [indexPath row];
switch (currentindex) {
    case 0:
            _urlAddress = @"http://localhost:8888/thePalmsMenu/breakfast_menu.php";

        break;

    case 1:

            _urlAddress = @"http://localhost:8888/thePalmsMenu/lunch_menu.php";

        break;
    default:
        break;

}

webVC *sView = [[webVC alloc] init];
sView.urlAddress = _urlAddress;
[self.navigationController pushViewController:sView animated:YES];

} 
```

然后我在第二个视图控制器中有这个，它里面有 UIWebView。

```
-(void)viewDidLoad
{

    _vc.urlAddress = _urlAddress;

    NSURL *url = [NSURL URLWithString:_urlAddress];
    NSURLRequest *requestObj = [NSURLRequest requestWithURL:url];
   [_webView loadRequest:requestObj];

} 
```

现在，代码也显示我正在执行推送导航，但这不起作用 - 如果我嵌入第一个视图，那么我会收到一个错误，说我不能两次推送该视图，所以它们必须是相关的。

这是错误消息：

> 2012-06-08 22:23:28.965 menu_test[68491:f803] 嵌套推送动画可能导致导航栏损坏 2012-06-08 22:23:29.447 menu_test[68491:f803] 在意外状态下完成导航转换. 导航栏子视图树可能会损坏。2012-06-08 22:23:29.449 menu_test[68491:f803] 对 .

现在，即使这些看起来像 2 个问题，它们肯定是相关的。

我也尝试过使用 NSUserDefaults，但这并不顺利，因为需要先设置链接，然后才能使用它，而不是直接传递它。

任何帮助都会很棒:-)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T11:32:54.027

发生的事情是您实际上两次推送视图控制器，第一次是从情节提要推送序列中，第二次是从代码中进行，

你有 2 个解决方案我会写下其中最简单的（如果你也需要第二个，请询问）

您需要从`prepareForSegue`方法中传递数据

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    if ([[segue identifier] isEqualToString:@"TheIdentifierOfYourDetailView"]) {
        NSIndexPath *indexPath = [self.tableView indexPathForSelectedRow];

        int currentindex = [indexPath row];
        switch (currentindex) {
            case 0:
                _urlAddress = @"http://localhost:8888/thePalmsMenu/breakfast_menu.php";

                break;

            case 1:

                _urlAddress = @"http://localhost:8888/thePalmsMenu/lunch_menu.php";

                break;
            default:
                break;

        }

        [[segue destinationViewController] setUrlAddress:_urlAddress];
    }
} 
```

# android - Android中的按钮选择

> ID：10947114
> 
> 赞同：0
> 
> 时间：2012-06-08T10:26:22.687
> 
> 标签：android, android-button

我必须创建每个按钮执行特定任务的按钮选项。那么如何进行按钮选择。我试过的代码在这里。

```
 Button b1      
        b1.setOnClickListener(new Button.OnClickListener(){

    public void onClick(View v) {
              if(v.getId()==R.id.button1)
              {      //do something
                       }
                      if(v.getId()==R.id.button2)
              {      //do something
                          }
                       }); 
```

对于单按钮功能，此代码可以正常工作。

```
 Button b1= (Button)findViewById(R.id.button1);        
        b1.setOnClickListener(new Button.OnClickListener(){

    public void onClick(View v) {
              if(v.getId()==R.id.button1)
              {      //do something
                       }
                      }}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T10:33:55.580

例如，您有 3 个以上的按钮意味着，

首先你有实施`OnClickListener`

```
for ex. public class ImageViewer extends Activity implements OnClickListener{}

Button b1=(Button)findViewById(R.id.button01);
Button b2=(Button)findViewById(R.id.button02);
Button b3=(Button)findViewById(R.id.button03); 
```

在那之后，

```
b1.setOnClickListener(this);
b2.setOnClickListener(this);
b3.setOnClickListener(this); 
```

现在，你的工具`onClick`

```
public void onClick(View v) {

        switch (v.getId()) {

        case R.id.button01:
        //perform your task 
        break;
        case R.id.button02:
        //perform your task 
        break;
        case R.id.button03:
        //perform your task 
        break;
        }
        } 
```

**您只有一个按钮单击功能意味着，**

```
Button b1=(Button)findViewById(R.id.button01);

        b1.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {
                // TODO Auto-generated method stub
                //perform your task
            }
        }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T10:30:53.487

如果你想使用这个模式

```
if(v.getId()==R.id.button1)
{      
  //do something
}
if(v.getId()==R.id.button2)
{      
  //do something
} 
```

你必须让你的类实现“OnClickListener”并实现“Onclick”方法。然后要将侦听器设置为您的按钮，您只需设置：

```
b1.setOnClickListener(this); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T10:28:08.383

试试这个——

```
Button button = (Button) findViewById(R.id.button1);

    // Listening to Login Screen link
    button.setOnClickListener(new View.OnClickListener() {

        public void onClick(View arg0) {
             // do your stuff here
        }
    }); 
```

如果你有多个按钮，那么，试试这个 -

```
public class buttonsexample extends Activity implements OnClickListener
{
    @Override
    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        Button b1 = (Button)findViewById(R.id.button1);
        Button b2 = (Button)findViewById(R.id.button2);
        Button b3 = (Button)findViewById(R.id.button3);
        b1.setOnClickListener(this);
        b2.setOnClickListener(this);
        b3.setOnClickListener(this);
    }

    @Override
    public void onClick(View v) 
    {
        // TODO Auto-generated method stub
        int id = v.getId();
        if(id == R.id.button1)
        {
            // do your stuff here
        }else if(id == R.id.button2)
        {
            // do your stuff here
        }else if(id == R.id.button3)
        {
            // do your stuff here
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-08T10:28:52.367

```
Button b1= (Button)findViewById(R.id.button1);        
        b1.setOnClickListener(new Button.OnClickListener(){

    public void onClick(View v) {
                      }});

Button b2= (Button)findViewById(R.id.button1);        
        b2.setOnClickListener(new Button.OnClickListener(){

    public void onClick(View v) {
                      }}); 
```

等等...

或者

```
public class ABCActivity extends Activity implements OnClickListener {
Button b1= (Button)findViewById(R.id.button1); 
Button b2= (Button)findViewById(R.id.button2); 

b1.setOnClickListener(this);
b2.setOnClickListener(this);

@Override
    public void onClick(View v) {

        switch (v.getId()) {
        case R.id.button1:
            break;
        case R.id.button2:
            break;

    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-08T10:33:57.777

如果你不想实现 OnClickListener 你可以这样做

```
Button b1= (Button)findViewById(R.id.button1);
Button b2= (Button)findViewById(R.id.button2);
b1.setOnClickListener(listen);
b2.setOnClickListener(listen);

OnClickListener listen=new OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub

    switch (v.getId()) {

             case R.id.button1:
             //perform your task 
             break;
             case R.id.button2:
             //perform your task 
             break;
             }

        }
    }; 
```

# python - pytz：获取所有时区，现在是特定时间

> ID：10947115
> 
> 赞同：3
> 
> 时间：2012-06-08T10:26:24.807
> 
> 标签：python, timezone, pytz

在数据库中，我有表（用户），它为该用户存储时区（作为字符串值，例如：“欧洲/奥斯陆”）。现在，我需要获取所有用户，例如现在的当地时间：上午 9 点。

有没有什么好的方法可以做到这一点，而不需要对所有用户进行循环？如果`pytz`能够返回时区列表，现在时间是上午 9 点，我可以使用简单的`IN`SQL 语句。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-08T10:32:49.290

```
import datetime
import pytz

now = datetime.now(pytz.utc)
# datetime.datetime(2012, 6, 8, 10, 31, 58, 493905, tzinfo=<UTC>)

[tz for tz in pytz.common_timezones_set if now.astimezone(pytz.timezone(tz)).hour == 9]
# ['Atlantic/Cape_Verde']

[tz for tz in pytz.common_timezones_set if now.astimezone(pytz.timezone(tz)).hour == 12]
# returns a list of 45 timezones, 'Europe/Oslo' included 
```

# java - 个性化类加载器的休眠加载映射

> ID：10947124
> 
> 赞同：0
> 
> 时间：2012-06-08T10:27:08.200
> 
> 标签：java, hibernate, classloader, hibernate-mapping, hibernate.cfg.xml

java jdk1.6.0_17 和 hibernate 有问题。我必须打开一个休眠会话工厂，但映射文件（mapper-test.jar）是由个人类加载器（URLClassLoader）加载的

```
 File map = new File("/opt/sigeco/infowebrepository/mapper/mapper-test.jar");
   File map1 = new File("/opt/sigeco/infowebrepository/mapper/hibernate3.jar");       
          URL[] urls = new URL[] { map.toURI().toURL(),map1.toURI().toURL()};   
          URLClassLoader loader = new URLClassLoader(urls);
          //test load is ok
          loader.loadClass("it.sigeco.infoweb.dao.app.IcFabb");          
          Configuration configuration=new Configuration();          
          configuration.configure( loader.getResource("hibernate.cfg.xml"));       
          configuration.buildSessionFactory(); 
```

问题是：

```
org.hibernate.MappingException: Resource: it/sigeco/infoweb/dao/app/IcFabb.hbm.xml not found
at org.hibernate.cfg.Configuration.addResource(Configuration.java:479)
at org.hibernate.cfg.Configuration.parseMappingElement(Configuration.java:1465)
at org.hibernate.cfg.Configuration.parseSessionFactory(Configuration.java:1433)
at org.hibernate.cfg.Configuration.doConfigure(Configuration.java:1414)
at org.hibernate.cfg.Configuration.doConfigure(Configuration.java:1390)
at org.hibernate.cfg.Configuration.configure(Configuration.java:1325)
at testLoad.main(testLoad.java:32) 
```

hibernate.cfg.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
  <!DOCTYPE hibernate-configuration PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
   "http://hibernate.sourceforge.net/hibernate-configuration-3.0.dtd">
  <hibernate-configuration>
    <session-factory>
       <property name="dialect">org.hibernate.dialect.SQLServerDialect</property>
       <property name="show_sql">true</property>
       <property name="hibernate.cache.use_query_cache">false</property>
       <property name="hibernate.cache.use_second_level_cache">false</property>
      <property name="hibernate.jdbc.use_scrollable_resultset">true</property>
      <mapping resource="it/sigeco/infoweb/dao/app/IcFabb.hbm.xml"/>        
    </session-factory>
 </hibernate-configuration> 
```

如果使用构建路径加载映射器测试是成功的，那么映射器测试就可以了。

似乎配置在系统类加载器中而不是在 URLClassLoader 中搜索文件 it/sigeco/infoweb/dao/app/IcFabb.hbm.xml，但是如何将配置与加载器连接？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T15:01:45.307

我找到了一种解决方案。我创建了一个个性化的 ClassLoader，MapperClassLoader，它在 costructor 中扩展 UrlClassLoader：

```
MapperClassLoader(URL[] urls)
{
        super( urls,MapperClassLoader.class.getClassLoader());
} 
```

其中 urls 包含 jars url。因此，将父加载器设置为系统类加载器。创建 MapperClassLoader 后，将系统 ClassLoader 设置为 MapperClassLoader

```
Thread.currentThread().setContextClassLoader( MapperClassLoader.getInstance()); 
```

所以 mapper-test.jar 是可用的。

# java - JDBC 数据源返回 NULL

> ID：10947127
> 
> 赞同：0
> 
> 时间：2012-06-08T10:27:17.813
> 
> 标签：java, spring

我有这个作为“数据源”的工作 java 代码：

```
public final class PMF {
        static Driver driver = null;
    static String url = "jdbc:jiql://local";

    static Properties props = new Properties();

    static {
       String password = "jiql";
       String user = "admin";
       props.put("user",user);
       props.put("password",password);
       try {
           Class clazz = Class.forName("org.jiql.jdbc.Driver");
           driver = (Driver) clazz.newInstance();
       } catch (Exception e){
           e.printStackTrace();
       }
    }

    public static Connection get() {
        try{
            return driver.connect(url,props);
        } catch (java.sql.SQLException e){
            e.printStackTrace();
        }
        return null;
    }
} 
```

当我尝试使用以下代码将此代码改编为 Spring 时：

**jdbc.properties**

```
jdbc.driverClassName=org.jiql.jdbc.Driver

# development
jdbc.url=jdbc:jiql://local
jdbc.username=admin
jdbc.password=jiql 
```

**应用程序上下文.xml**

```
<!-- placeholders -->
<bean class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
    <property name="locations" value="/WEB-INF/jdbc.properties"/>
</bean>

<!-- data source -->
<bean id="dataSource" destroy-method="close" class="org.apache.commons.dbcp.BasicDataSource">
    <property name="driverClassName" value="${jdbc.driverClassName}"/>
    <property name="url" value="${jdbc.url}"/>
    <property name="username" value="${jdbc.username}"/>
    <property name="password" value="${jdbc.password}"/>
</bean> 
```

当我在 DAO 中执行此操作时，“数据源”变为空：

```
@Autowired
private DataSource dataSource; 
```

什么可能导致数据源为空？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T04:07:15.697

看起来这是一个 DAO 问题，而不是 JDBC 问题。我使用 Spring STS 重新创建了应用程序，一切正常。

# ruby-on-rails-3 - 在 Rails 3 中覆盖销毁和删除并删除回调

> ID：10947131
> 
> 赞同：1
> 
> 时间：2012-06-08T10:27:35.797
> 
> 标签：ruby-on-rails-3

我只想在 User 模型中阻止销毁和删除，并且我想阻止回调。简而言之，我想阻止任何删除用户记录的可能性。我尝试覆盖destroy和delete方法，但它们没有被调用并且用户总是被删除。

```
class User < ActiveRecord::Base
  def destroy
  end

  def delete
  end
end 
```

我不想使用任何与此相关的 gem，所以不要引用任何 gem。我不确定重写这些方法是否是个好主意，也许我应该创建一个“停用”方法并将默认的删除和销毁方法保留在那里，以防万一我在 Rails 控制台中需要它们

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-06-27T19:14:54.200

### 请参阅 Rails API 方法。

只要您知道自己在做什么以及后果，覆盖这些方法不一定是坏事。有时这是解决问题的最干净的方法。

我的建议是查看以下 Rails API 方法文档条目，并确保此处没有遗漏任何重要操作。

**[＃破坏](http://api.rubyonrails.org/classes/ActiveRecord/Persistence.html#method-i-destroy)**

**[＃破坏！](http://api.rubyonrails.org/classes/ActiveRecord/Persistence.html#method-i-destroy-21)**

**[＃删除](http://api.rubyonrails.org/classes/ActiveRecord/Persistence.html#method-i-delete)**

通过在模型中创建这些方法，它将覆盖继承的 Rails API 中的任何内容，因此它应该可以正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T10:47:21.677

我不确定我是否完全理解你的问题。

一种方法是将`destroy`and`delete`方法设为私有。

你说这些方法永远不会被调用，但是对象无论如何都会被删除。这是怎么发生的？您是否要从集合中删除它们？您可能需要重写一个类方法，`User`而不是这两个实例方法。

# c# - 创建自定义事件处理程序时遇到问题

> ID：10947132
> 
> 赞同：1
> 
> 时间：2012-06-08T10:27:42.027
> 
> 标签：c#, events, parameters

我一直在尝试创建一个自定义事件来处理鼠标控件等，但我一直遇到一些教程似乎都没有解决的错误。我很确定我的创建/分配逻辑是正确的，但也许我在这里遗漏了一些根本错误的东西。

首先，我使用与方法相同的签名创建我的委托；

```
public delegate void MouseDown(object sender, MouseEventArgs e, Control control); 
```

然后我将它分配给我的事件；

```
public event MouseDown OnMouseDown; 
```

最后我尝试订阅该活动；

```
public static void Init(Control control, Control container, Direction direction)
{
    control.MouseDown += OnMouseDown;

}
//ignore the parameters I'm passing, these are out of the scope of my problem. 
```

但是，在本节中，我收到错误“非静态字段、方法或属性“blah blah.OnMouseDown”需要对象引用”

最后，这是我尝试在 mouseDown 上订阅的方法；

```
public void MouseDownEvent(object sender, MouseEventArgs e, Control control)
{
    Dragging = true;
    DragStart = new Point(e.X, e.Y);
    control.Capture = true;
} 
```

我试图修改我在某处找到的帮助程序类可能无济于事。如果需要任何进一步的信息，请随时询问。

注意：此类的主要目标是允许在运行时移动控件。

**编辑：**

我相信前两个已经奏效，但要移动我需要使用以下方法；

```
public void MouseMoveEvent(object sender, MouseEventArgs e, Control control, Control container, Direction direction)
{
     if (Dragging)
    {
        if (direction != Direction.Vertical)
            container.Left = Math.Max(0, e.X + container.Left - DragStart.X);
        if (direction != Direction.Horizontal)
            container.Top = Math.Max(0, e.Y + container.Top - DragStart.Y);
    }
} 
```

所以我需要发送方向方向，我不能作为发件人发送。我对整个系统进行这些更改的原因是，我在使用匿名委托之前让它工作，但是当我想重新锁定控件时，这些被证明很难取消订阅。

**编辑 2：**
从头开始，如果我没有通过正确的控制，mouseDown 和 mouseUp 将不起作用，至少订阅我以前做的方式。我可以试试你的方法，但是，我这样做的方式只是调用一个订阅所有 3 个 MouseControls 的方法。看起来我可以按照建议订阅单独的方法，或者我需要正确传递正确的控件，即不是发送者作为控件。有任何想法吗？

目前我正在通过从任何地方运行此方法进行订阅；

```
helper.Init(this.Controls["btn" + i]); 
```

然后在将按钮订阅到我的 mouseup、down 和 move 之前，它会运行这些方法。

```
public static void Init(Control control)
{
    Init(control, Direction.Any);
}

public static void Init(Control control, Direction direction)
{
    Init(control, control, direction);
}

public static void Init(Control control, Control container, Direction direction)
{
    control.MouseDown += new MouseEventHandler(FireOnMouseDown);
    control.MouseUp += new MouseEventHandler(FireOnMouseUp);
    control.MouseMove += delegate(object sender, MouseEventArgs e)
    {
        if (Dragging)
        {
            if (direction != Direction.Vertical)
                container.Left = Math.Max(0, e.X + container.Left - DragStart.X);
            if (direction != Direction.Horizontal)
                container.Top = Math.Max(0, e.Y + container.Top - DragStart.Y);
        }
    };
} 
```

注意：第三次订阅是他们之前的样子（匿名代表）。我相信我需要在事件中通过正确的控制。这是否让我的问题更加清晰？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T10:38:50.977

回答这个问题：

> 但是，在本节中，我收到错误“非静态字段、方法或属性“blah blah.OnMouseDown”需要 ohject 引用”

`Init`方法是静态的，这意味着在其中使用的任何非局部变量都必须是静态的。在您的代码中，`public event MouseDown OnMouseDown;`必须是静态的。

只需这样做，它就可以正常工作（不需要委托）：

**编辑** 请参阅下面的代码以了解如何获取已单击的控件。

```
public static void Init(Control control, Control container, Direction direction)
{
   control.MouseDown += new System.Windows.Forms.MouseEventHandler(On_MouseDown);;
}
private static void On_MouseDown(object sender, System.Windows.Forms.MouseEventArgs e)       
{     
   Control control = sender as Control;
   if(control != null){
       // Here we go, use the control to do whatever you want with it 
   } 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T10:44:54.877

你应该写：

```
control.MouseDown += new MouseEventHandler(MouseDownEvent); 
```

注意这里必须更改 MouseDownEvent 的签名，因为 Control 的 MouseDown 事件只需要 sender 和 MouseEventArgs 作为参数。

但我不确定这是否是你真正想要的。该指令的作用是当鼠标在控件上按下时执行MouseDownEvent。这是你想要的吗？

该指令`public event MouseDown OnMouseDown;`是不合适的，除非在出现这种情况的同一类中的某个地方您没有编写以这种方式触发此事件的内容：

```
if (OnMouseDown!= null)
   OnMouseDown(aSenderObject, aMouseEventArgs, aControl); 
```

要订阅 thgis 事件，您应该这样写（这里 hc anObj 是定义事件的类的实例）：

```
anObj.OnMouseDown+= new MouseDown(MouseDownEvent); 
```

希望能帮助到你。也许更多的上下文可能是有用的。

编辑：

如果您尝试实现一个管理控件移动的类，您可以拥有包含以下内容的 Helper 类：

```
public delegate void MouseDown(object sender, MouseEventArgs e, Control control);
public static event MouseDown OnMouseDown; 
```

如果您希望能够将控件“注册”到您的类，这就是这样做的方法（请注意，事件是静态的）。在这里你说当鼠标按下控制时，FireMouseDown 被执行。

```
public static void Init(Control control, Control container, Direction direction)
    {
        control.MouseDown += new MouseEventHandler(FireOnMouseDown);
    } 
```

在 FireMouseDown 中，您必须使用正确的参数触发 OnMouseEvent：

```
public static void FireOnMouseDown(object sender, MouseEventArgs e)
    {
        if (OnMouseDown != null)
            OnMouseDown(this, e, sender as Control);
    } 
```

现在您可以从 Helper 外部订阅 OnMouseDown 您的原始方法：

```
Helper.OnMouseDown += new MouseDown(MouseDownEvent); 
```

编辑2：

我没有指定它，但这里发生的是每次在传递给 Init 的控件之一上有 MouseDown 事件（我的意思是 windows 事件）时都会触发 OnMouseDown 事件。这意味着对 OnMouseDown 的注册只需进行一次。之后，每次您在这些控件之一上有 MouseDown 时，都会执行 MouseDownEvent 并传递以下参数：

```
sender -> the Helper class
e -> the original MouseEventArgs generated by Windows
control -> the control that generated the original event 
```

关于 MouseMove 事件，您应该对 MouseDown 执行类似操作，只需添加您需要的额外参数（即使我不清楚容器和方向的含义是什么，因为容器似乎总是等于控制和方向始终是 Direction.Any)。我的意思是：

```
public delegate void MouseMove(object sender, MouseEventArgs e, Control control, Control container, Direction direction);
public static event MouseMove OnMouseMove;

public static void FireOnMouseMove(object sender, MouseEventArgs e) 
{ 
    if (OnMouseMove != null) 
        OnMouseMove(this, e, sender as Control, aContainer, aDirection); 
} 
```

我在这里不明白的是你要从哪里找到aContainer和aDirection。如果我应该复制你的 Init 我会写`OnMouseMove(this, e, sender as Control, sender as Control, Direction.Any);`，但我不认为它会起作用。

# mysql - MySQL全文搜索结果不准确

> ID：10947133
> 
> 赞同：1
> 
> 时间：2012-06-08T10:27:43.737
> 
> 标签：mysql, sql, database, full-text-search

我一直在尝试在 mysql 上运行全文搜索，但我并没有完全得到我应该得到的结果。

我有几个带有“（OBB）”的条目。但是当我搜索“obb”时，我不会得到任何结果。

我正在使用的声明是一个非常基本的声明。

```
SELECT * FROM learning_course WHERE MATCH (name, keywords) 
AGAINST ('"obb*"' IN BOOLEAN MODE); 
```

但是，如果我要使用简单的`LIKE "%obb%"`，我会得到预期的结果。

我错过了什么吗？我检查了其他关键字，它工作正常。任何帮助表示赞赏。先谢谢了。

# php - 如何在给定日期范围内获得工作日缺勤天数？

> ID：10947134
> 
> 赞同：3
> 
> 时间：2012-06-08T10:27:46.037
> 
> 标签：php

这是我为获取员工在给定日期范围内的休假日列表而创建的功能。如果取的叶子是一两片也没关系，但它太复杂了，检索结果需要很长时间，因此会导致超时错误！有什么帮助吗？

这是功能：

```
function dates_between($emp_id, $start_date, $end_date) 
 {

    $day_incrementer = 1;
    $count_leaves = 0;
    $flag = 0;

    // Getting the days from DB where the employee '28' had worked in given date range

    $work_res = mysql_query("SELECT DISTINCT date FROM `work_details` WHERE  employee_id='28' and date between '2012-02-01' and '2012-02-29'");

    do {
        while($row = mysql_fetch_array($work_res)) 
             {
           while((date("Y-m-d",$start_date) < $row['date']) && ($flag = 0)) 
                       // loop to find  startdate  less than table date! if table date(attendance) is starting from 3, we need to print leaves 1,2  if they are not  weekends
                   {
                 if(!(date('N', strtotime(date("Y-m-d", $start_date))) >=6)) 
                       {    
                               //checking for weekends, prints only weekdays
                    echo date("Y-m-d", $start_date) . " \n ";
                    $count_leaves++;
               }

           $start_date = $start_date + ($day_incrementer * 60 * 60 *24);              
            }

            $flag=1;

    while((date("Y-m-d",$start_date) != $row['date']))
     // loop to print $start_date,which is not equal to table date
    {
    if(!(date('N', strtotime(date("Y-m-d", $start_date))) >= 6)) 
      {
        echo  date("Y-m-d", $start_date) . "\n";
        $count_leaves++;
      }
     $$start_date = $start_date + ($day_incrementer * 60 * 60 * 24);
     }

        $start_date = $start_date + ($day_incrementer * 60 * 60 * 24);
    }

 // loop to print $start_date,comes rest after tabledate if tabledate finishes with 28, prints rest of dates 29,30
  if(!(date('N', strtotime(date("Y-m-d", $start_date))) >= 6) && ($start_date <= $end_date))
  {
            echo  date("Y-m-d", $start_date) . "\n";
            $count_leaves++;
            $start_date = $start_date + ($day_incrementer * 60 * 60 * 24);
  }

  } while($start_date <= $end_date);

    return($count_leaves);
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T18:32:59.407

我注意到您在其他地方也问过类似的问题（http://stackoverflow.com/questions/10898293/how-to-get-days-of-leave-taken-in-a-given-month）。现在，我尝试深入研究您的代码，以基本了解您的尝试。如果我的回答不完全符合您的愿望，请原谅我，因为不容易读懂另一个人的想法。基本上，我所做的是准备一个示例代码来满足您的需求。此代码采用特定工作人员在给定月份和年份中工作的日期数组。然后它会继续获取该给定月份、那一年的所有可用工作日期。两个数组的差异给出了工人缺席的日期（由于离开或擅离职守）。没有考虑公共假期，但当然，您可以轻松修改代码以添加它。

现在，只是一个警告，这段代码是基本的，如果两个数组的日期格式不完全相同，数组差异会让你失败。就个人而言，我将编写自己的比较回调函数来比较各个日期并将其传递给 array_udiff() 以获得最大的确定性。我很确定你能处理好。我只提供了基础知识。自由使用并根据您的情况进行扩展。说得够多了，请看下面的代码示例。

```
<?php
/***************************************************************************
* how to get DAYS absent from working days from given date range?
* @Author Prof. No Time - 12th/June/2012
****************************************************************************/

//Leave was 10th, 13th, 23rd, 24th
//Note that 01-02-2012 is NOT exactly same as 1-2-2012; Important for the array_diff fxn used below. 
//Note Format is d-m-Y
//Note I am assuming you have pulled this from a database of course
$imaginaryWorkDatesOfWorker1 = array(
    '01-02-2012', '02-02-2012', '03-02-2012', '06-02-2012', '07-02-2012', '08-02-2012',
    '09-02-2012', '14-02-2012', '15-02-2012', '16-02-2012', '17-02-2012', '20-02-2012',
    '21-02-2012', '22-02-2012', '27-02-2012', '28-02-2012', '29-02-2012'    
);

$leaveDays1 = getLeaveDays(2, 2012, $imaginaryWorkDatesOfWorker1);
displayWorkersLeaveDays($leaveDays1);

//Leave was 2nd, 16th, 19th, 23rd and 26th
$imaginaryWorkDatesOfWorker2 = array(
    '01-03-2012', '05-03-2012', '06-03-2012', '07-03-2012', '08-03-2012', '09-03-2012',
    '12-03-2012', '13-03-2012', '14-03-2012', '15-03-2012', '20-03-2012', '21-03-2012',
    '22-03-2012', '27-03-2012', '28-03-2012', '29-03-2012', '30-03-2012'
);

$leaveDays2 = getLeaveDays(3, 2012, $imaginaryWorkDatesOfWorker2);
displayWorkersLeaveDays($leaveDays2);

///MAIN FUNCTION TO GET LEAVE DATES///
function getLeaveDays($month, $year, $arrDatesPresent=array()){
  $arrAllWorkDatesInMonth = getDatesInTheMonth($month, $year);

  //var_dump($arrDatesPresent); var_dump($arrAllWorkDatesInMonth);

  $leaveDays = array_diff($arrAllWorkDatesInMonth, $arrDatesPresent);
  return $leaveDays;
}

///HELPER FUNCTIONS///
/**
 * <p>Gets all the dates in a given month in the specified year. default format d-m-Y<p>
 * @param int $month
 * @param int $year
 * @param boolean $includeWeekends
 * @param string $format2Use
 * @throws Exception if invalid parameters are given
 * @return array: dates in the given month, in the given year
 */
function getDatesInTheMonth($month, $year, $includeWeekends=false, $format2Use='d-m-Y')    {
  $arrDatesInTheMonth = array();
  if (empty($format2Use)) $format2Use = 'm-d-Y';

  if (empty($month) || empty($year)){
    throw new Exception("Invalid parameters given.");
  }
  else{
    $fauxDate = mktime(0, 0, 0, $month, 1, $year);
    $numOfDaysInMonth = date('t', $fauxDate);

    if (!empty($numOfDaysInMonth)){
        for ($day = 1; $day <= $numOfDaysInMonth; $day++){

            $timeStamp = mktime(0, 0, 0, $month, $day, $year);
            $cdate = date($format2Use, $timeStamp);

            if ($includeWeekends){
                $arrDatesInTheMonth[] = $cdate;
            }
            else{
                if (!isWeekend($cdate)) { $arrDatesInTheMonth[] = $cdate; }
            }
        }
    }
  }

  return $arrDatesInTheMonth;
}

/**
 * Checks if given date is a weekend use this if you have PHP greater than v5.1.
 * Credit: http://stackoverflow.com/users/298479/thiefmaster
 * @param date $date
 * @return boolean
 */
function isWeekend($date) {
  return (date('N', strtotime($date)) >= 6);
}

/**
 * Checks if given date is a weekend use this if you have PHP less than v5.1.
 * Credit: http://stackoverflow.com/users/298479/thiefmaster
 * @param date $date
 * @return boolean
 */
function isWeekend2($date) {
  $weekDay = date('w', strtotime($date));
  return ($weekDay == 0 || $weekDay == 6);
}

function printDates($arrDates){
  foreach ($arrDates as $key => $cdate) {
      $display = sprintf( '%s <br />', date('[l] - jS \of F Y', strtotime($cdate)) );
      echo $display;
  }
}

function displayWorkersLeaveDays($leaveDays){
  echo '<div style="background-color:#CCC;margin:10px 0;">';
  echo '<div>Your Leave days are as follows: </div>';
  printDates($leaveDays);
  echo '</div>';
} 
```

希望这可以帮助。

# android - Intent 和 OnActivityResult 导致 Activity 自动重启：需要解决此问题

> ID：10947136
> 
> 赞同：0
> 
> 时间：2012-06-08T10:28:01.107
> 
> 标签：android, android-layout, android-intent

我有 20 个图像视图，当我单击任何 1 个按钮时，我有 20 个按钮供他们使用从他们那里，让我在我的图像视图上为各个按钮显示这些图像现在问题是，当我执行上述整个过程时，我的活动正在自动重新启动，并且所有首先选择的图像都从他们的图像视图中消失供参考我的代码是如下：

```
 @Override
         public void onCreate(Bundle savedInstanceState) {
          super.onCreate(savedInstanceState);
           setContentView(R.layout.new_upload);

      // *****************Assigning Button variable their Id declare in XML
      // file starts here*****************

      new_select1 = (Button) findViewById(R.id.new_select1);
      new_select2 = (Button) findViewById(R.id.new_select2);
      new_select3 = (Button) findViewById(R.id.new_select3);
      new_select4 = (Button) findViewById(R.id.new_select4);
      new_select5 = (Button) findViewById(R.id.new_select5);
      new_select6 = (Button) findViewById(R.id.new_select6);
      new_select7 = (Button) findViewById(R.id.new_select7);
      new_select8 = (Button) findViewById(R.id.new_select8);
      new_select9 = (Button) findViewById(R.id.new_select9);
      new_select10 = (Button) findViewById(R.id.new_select10);
      new_select11 = (Button) findViewById(R.id.new_select11);
      new_select12 = (Button) findViewById(R.id.new_select12);
      new_select13 = (Button) findViewById(R.id.new_select13);
      new_select14 = (Button) findViewById(R.id.new_select14);
      new_select15 = (Button) findViewById(R.id.new_select15);
      new_select16 = (Button) findViewById(R.id.new_select16);
      new_select17 = (Button) findViewById(R.id.new_select17);
      new_select18 = (Button) findViewById(R.id.new_select18);
      new_select19 = (Button) findViewById(R.id.new_select19);
      new_select20 = (Button) findViewById(R.id.new_select20);

      // *****************Assigning Button variable their Id declare in XML
      // file ends here*****************

      // *****************Assigning Image variable their Id declare in XML
      // file starts here*****************

      new_selectimage1 = (ImageView) findViewById(R.id.new_selectImage1);
      new_selectimage2 = (ImageView) findViewById(R.id.new_selectImage2);
      new_selectimage3 = (ImageView) findViewById(R.id.new_selectImage3);
      new_selectimage4 = (ImageView) findViewById(R.id.new_selectImage4);
      new_selectimage5 = (ImageView) findViewById(R.id.new_selectImage5);
      new_selectimage6 = (ImageView) findViewById(R.id.new_selectImage6);
      new_selectimage7 = (ImageView) findViewById(R.id.new_selectImage7);
      new_selectimage8 = (ImageView) findViewById(R.id.new_selectImage8);
      new_selectimage9 = (ImageView) findViewById(R.id.new_selectImage9);
      new_selectimage10 = (ImageView) findViewById(R.id.new_selectImage10);
      new_selectimage11 = (ImageView) findViewById(R.id.new_selectImage11);
      new_selectimage12 = (ImageView) findViewById(R.id.new_selectImage12);
      new_selectimage13 = (ImageView) findViewById(R.id.new_selectImage13);
      new_selectimage14 = (ImageView) findViewById(R.id.new_selectImage14);
      new_selectimage15 = (ImageView) findViewById(R.id.new_selectImage15);
      new_selectimage16 = (ImageView) findViewById(R.id.new_selectImage16);
      new_selectimage17 = (ImageView) findViewById(R.id.new_selectImage17);
      new_selectimage18 = (ImageView) findViewById(R.id.new_selectImage18);
      new_selectimage19 = (ImageView) findViewById(R.id.new_selectImage19);
      new_selectimage20 = (ImageView) findViewById(R.id.new_selectImage20);

      // ****Assigning Image variable their Id declare in XML file ends
      // here*****************

      // **************Creating Dialog to give option to user to new_select
      // image from gallery or from camera starts here****************

      final String[] items = new String[] { "From Camera", "From Gallery" };
      ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,
        android.R.layout.select_dialog_item, items);
      AlertDialog.Builder builder = new AlertDialog.Builder(this);

      builder.setTitle("select Image");
      builder.setAdapter(adapter, new DialogInterface.OnClickListener() {
       public void onClick(DialogInterface dialog, int item) {
        if (item == 0) {
         if (android.os.Environment.getExternalStorageState()
           .equals(android.os.Environment.MEDIA_MOUNTED)) {
          Intent intent = new Intent(
            MediaStore.ACTION_IMAGE_CAPTURE);
          File file = new File(Environment
            .getExternalStorageDirectory(),
            "/AUSRWC/picture" + ".jpg");
          mImageCaptureUri = Uri.fromFile(file);

          try {
           Toast.makeText(getBaseContext(), "Click Image",
             Toast.LENGTH_SHORT).show();
           intent.putExtra(
             android.provider.MediaStore.EXTRA_OUTPUT,
             mImageCaptureUri);
           intent.putExtra("return-data", true);
           startActivityForResult(intent, PICK_FROM_CAMERA);
          } catch (Exception e) {
           e.printStackTrace();
          }
         } else {
          Toast.makeText(getBaseContext(),
            "Please insert SdCard First",
            Toast.LENGTH_SHORT).show();
         }
         dialog.cancel();
        } else {
         Intent intent = new Intent();
         Toast.makeText(getBaseContext(), "Select Image",
           Toast.LENGTH_SHORT).show();

         intent.setType("image/*");
         intent.setAction(Intent.ACTION_GET_CONTENT);

         startActivityForResult(Intent.createChooser(intent,
           "Complete action using"), PICK_FROM_FILE);
        }
       }
      });

      dialog = builder.create();
      // **************Creating Dialog to give option to user to new_select
      // image from gallery or from camera ends here****************

      // ********************Image 1 button code starts
      // here*******************************
       new_select1.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View v) {
         buttonpressed = 1;
         dialog.show();
        }
       });

      // ********************Image 1 button code ends
      // here*******************************

      // ********************Image 2 button code starts
      // here*******************************
       new_select2.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View v) {
         buttonpressed = 2;
         dialog.show();
        }
       });

      // ********************Image 2 button code ends
      // here*******************************

      // ********************Image 3 button code starts
      // here*******************************

       new_select3.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View v) {
         buttonpressed = 3;
         dialog.show();
        }
       });

      // ********************Image 3 button code ends
      // here*******************************

      // ********************Image 4 button code starts
      // here*******************************
      new_select4.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View v) {
         buttonpressed = 4;
         dialog.show();
        }
       });

      // ********************Image 4 button code ends
      // here*******************************

      // ********************Image 5 button code starts
      // here*******************************
     new_select5.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View v) {
         buttonpressed = 5;
         dialog.show();
        }
       });

      // ********************Image 5 button code ends
      // here*******************************

      // ********************Image 6 button code starts
      // here*******************************
      new_select6.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View v) {
         buttonpressed = 6;
         dialog.show();
        }
       });

      // ********************Image 6 button code ends
      // here*******************************

      // ********************Image 7 button code starts
      // here*******************************
     new_select7.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View v) {
        buttonpressed = 7;
         dialog.show();
        }
       });

      // ********************Image 7 button code ends
      // here*******************************

      // ********************Image 8 button code starts
      // here*******************************
       new_select8.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View v) {
         buttonpressed = 8;
         dialog.show();
        }
       });

      // ********************Image 8 button code ends
      // here*******************************

      // ********************Image 9 button code starts
      // here*******************************
      new_select9.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View v) {
        buttonpressed = 9;
         dialog.show();
        }
       });

      // ********************Image 9 button code ends
      // here*******************************

      // ********************Image 10 button code starts
      // here*******************************
       new_select10.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View v) {
        buttonpressed = 10;
         dialog.show();
        }
       });

      // ********************Image 10 button code ends
      // here*******************************

      // ********************Image 11 button code starts
      // here*******************************
       new_select11.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View v) {
         buttonpressed = 11;
         dialog.show();
        }
       });

      // ********************Image 11 button code ends
      // here*******************************

      // ********************Image 12 button code starts
      // here*******************************
      new_select12.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View v) {
         buttonpressed = 12;
         dialog.show();
        }
       });

      // ********************Image 12 button code ends
      // here*******************************

      // ********************Image 13 button code starts
      // here*******************************
      new_select13.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View v) {
         buttonpressed = 13;
         dialog.show();
        }
       });

      // ********************Image 13 button code ends
      // here*******************************

      // ********************Image 14 button code starts
      // here*******************************
      new_select14.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View v) {
         buttonpressed = 14;
         dialog.show();
        }
       });

      // ********************Image 14 button code ends
      // here*******************************

      // ********************Image 15 button code starts
      // here*******************************
      new_select15.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View v) {
         buttonpressed = 15;
         dialog.show();
        }
       });

      // ********************Image 15 button code ends
      // here*******************************

      // ********************Image 16 button code starts
      // here*******************************
      new_select16.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View v) {
         buttonpressed = 16;
         dialog.show();
        }
       });

      // ********************Image 16 button code ends
      // here*******************************

      // ********************Image 17 button code starts
      // here*******************************
     new_select17.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View v) {
         buttonpressed = 17;
         dialog.show();
        }
       });

      // ********************Image 17 button code ends
      // here*******************************

      // ********************Image 18 button code starts
      // here*******************************
      new_select18.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View v) {
         buttonpressed = 18;
         dialog.show();
        }
       });

      // ********************Image 18 button code ends
      // here*******************************

      // ********************Image 19 button code starts
      // here*******************************
      new_select19.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View v) {
        buttonpressed = 19;
         dialog.show();
        }
       });

      // ********************Image 19 button code ends
      // here*******************************

      // ********************Image 20 button code starts
      // here*******************************
     new_select20.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View v) {
         buttonpressed = 20;
         dialog.show();
        }
       });

      // ********************Image 20 button code ends
      // here*******************************
    }

   // ***********************To get Path of new_selected Image code starts
     // here************************************

     public String getRealPathFromURI(Uri contentUri) {
      String[] proj = { MediaStore.Images.Media.DATA };
      Cursor cursor = managedQuery(contentUri, proj, null, null, null);

      if (cursor == null)
       return null;

      int column_index = cursor
        .getColumnIndexOrThrow(MediaStore.Images.Media.DATA);

      cursor.moveToFirst();

      return cursor.getString(column_index);
     }

     // ***********************To get Path of new_selected Image code ends
     // here************************************

     // **********************Picture obtained from the camera or from gallery
     // code starts here**************
     @Override
     protected void onActivityResult(int requestCode, int resultCode, Intent data) {
      //path = "";
      Log.e("","requestCode="+requestCode); 
      switch (requestCode){

       case PICK_FROM_FILE:

                    if (resultCode == Activity.RESULT_OK) {
                     mImageCaptureUri = data.getData();
                path = getRealPathFromURI(mImageCaptureUri); // from Gallery
                Log.e("", "Imagepath from gallery=" + path);
                if (path == null)
                path = mImageCaptureUri.getPath(); // from File Manager

                if (path != null) {
                dialog1 = ProgressDialog.show(new_upload.this, "",
                  "Processing Please wait...", true);
                new ImageDisplayTask().execute();
               }
                    }
                    break;
       case PICK_FROM_CAMERA:
           if (resultCode == Activity.RESULT_OK) {
            try {
             path = mImageCaptureUri.getPath();
             Log.e("", "Imagepath from Camera =" + path);
             // bitmap = BitmapFactory.decodeFile(path);
            } catch (Exception e) {
             e.printStackTrace();
            }
            if (path != null) {
             dialog1 = ProgressDialog.show(new_upload.this, "",
               "Processing Please wait...", true);
             //new ImageDisplayTask1().execute();
             new ImageDisplayTask().execute();
            }
           }
           break;
                default:

                }
    }

     // ********************Picture obtained from the camera or from gallery code
     // ends here*********************************************

     // ******************Image Display on Button when new_selected from gallery
     // Ashynch Code starts here********************************

     class ImageDisplayTask extends AsyncTask<Void, Void, String> {

      @Override
      protected String doInBackground(Void... unsued) {

       Bitmap src = BitmapFactory.decodeFile(path);
       Bitmap dest = Bitmap.createBitmap(src.getWidth(), src.getHeight(),
         Bitmap.Config.ARGB_8888);

       //Bitmap dest = Bitmap.createScaledBitmap(src, src.getWidth(),src.getHeight(), true);
       SimpleDateFormat sdf = new SimpleDateFormat("dd-MM-yyyy HH:mm:ss");
       String dateTime = sdf.format(Calendar.getInstance().getTime()); // reading local ``
       String timestamp = dateTime + "    " + roadworthynumber;

       SimpleDateFormat sdf1 = new SimpleDateFormat("dd-MM-yyyy HH:mm:ss");
       String dateTime1 = sdf1.format(Calendar.getInstance().getTime());
       Imagename = dateTime1.toString().trim().replaceAll(":", "")
         .replaceAll("-", "").replaceAll(" ", "")
         + roadworthynumber + ".jpg";

       Canvas cs = new Canvas(dest);
       Paint tPaint = new Paint();
       tPaint.setTextSize(100);
       tPaint.setTypeface(Typeface.SERIF);
       tPaint.setColor(Color.RED);
       tPaint.setStyle(Style.FILL);
       cs.drawBitmap(src, 0f, 0f, null);
       float height = tPaint.measureText("yY");
       cs.drawText(timestamp, 5f, src.getHeight() - height + 5f, tPaint);
       try {
        dest.compress(Bitmap.CompressFormat.JPEG, 70,
          new FileOutputStream(new File(cacheDir, Imagename)));
        dest.recycle();
        src.recycle();
       } catch (FileNotFoundException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
       }
       return null;
      }

      @Override
      protected void onProgressUpdate(Void... unsued) {

      }

      @Override
      protected void onPostExecute(String serverresponse) {
      String error = "noerror";
       Display currentDisplay = getWindowManager().getDefaultDisplay();
       int dw = currentDisplay.getWidth();
       int dh = currentDisplay.getHeight() - 100;
       Log.e("", "width= " + dw + " Height= " + dh);
       try {

        BitmapFactory.Options bmpFactoryOptions = new BitmapFactory.Options();
        bmpFactoryOptions.inJustDecodeBounds = true;

        Bitmap bmp = BitmapFactory.decodeFile(
          Environment.getExternalStorageDirectory() + "/AUSRWC/"
            + Imagename, bmpFactoryOptions);
        int heightRatio = (int) Math.ceil(bmpFactoryOptions.outHeight
          / (float) dh);
        int widthRatio = (int) Math.ceil(bmpFactoryOptions.outWidth
          / (float) dw);
        if (heightRatio > 1 && widthRatio > 1) {
         if (heightRatio > widthRatio) {
          bmpFactoryOptions.inSampleSize = heightRatio;
         } else {
          bmpFactoryOptions.inSampleSize = widthRatio;
         }
        }
        bmpFactoryOptions.inJustDecodeBounds = false;
        bmp = BitmapFactory.decodeFile(
          Environment.getExternalStorageDirectory() + "/AUSRWC/"
            + Imagename, bmpFactoryOptions);

      if (buttonpressed == 1) {
           new_selectimage1.setImageBitmap(bmp); //Image set on ImageView
        } else if (buttonpressed == 2) {
         new_selectimage2.setImageBitmap(bmp);//Image set on ImageView
        } else if (buttonpressed == 3) {
         new_selectimage3.setImageBitmap(bmp);//Image set on ImageView
        } else if (buttonpressed == 4) {
         new_selectimage4.setImageBitmap(bmp);//Image set on ImageView
        } else if (buttonpressed == 5) {
         new_selectimage5.setImageBitmap(bmp);//Image set on ImageView
        } else if (buttonpressed == 6) {
         new_selectimage6.setImageBitmap(bmp);//Image set on ImageView
        } else if (buttonpressed == 7) {
         new_selectimage7.setImageBitmap(bmp);//Image set on ImageView
        } else if (buttonpressed == 8) {
         new_selectimage8.setImageBitmap(bmp);//Image set on ImageView
        } else if (buttonpressed == 9) {
         new_selectimage9.setImageBitmap(bmp);//Image set on ImageView
       } else if (buttonpressed == 10) {
         new_selectimage10.setImageBitmap(bmp);
        } else if (buttonpressed == 11) {
         new_selectimage11.setImageBitmap(bmp);
        } else if (buttonpressed == 12) {
         new_selectimage12.setImageBitmap(bmp);
        } else if (buttonpressed == 13) {
          new_selectimage13.setImageBitmap(bmp);
    } else if (buttonpressed == 14) {
     new_selectimage14.setImageBitmap(bmp);
    } else if (buttonpressed == 15) {
     new_selectimage15.setImageBitmap(bmp);
     } else if (buttonpressed == 16) {
     new_selectimage16.setImageBitmap(bmp);
    } else if (buttonpressed == 17) {
     new_selectimage17.setImageBitmap(bmp);
    } else if (buttonpressed == 18) {
     new_selectimage18.setImageBitmap(bmp);
    } else if (buttonpressed == 19) {
     new_selectimage19.setImageBitmap(bmp);
    } else if (buttonpressed == 20) {
     new_selectimage20.setImageBitmap(bmp);
    }
       } catch (Exception e)
    {
       Log.e("",e.tostring());
    } 
```

我的日志如下

```
06-11 12:36:43.899: I/ActivityManager(163): Process com.AUSRWC (pid 18012) has died.
06-11 12:36:43.899: I/ActivityManager(163): Low Memory: No more background processes.
06-11 12:36:43.909: I/WindowManager(163): WIN DEATH: Window{409be3d0 com.AUSRWC/com.AUSRWC.new_upload paused=false}
06-11 12:36:45.199: I/InputReader(163): dispatchTouch::touch event's action is 0
06-11 12:36:45.199: I/InputDispatcher(163): Delivering touch to current input target: action: 0, channel '40866bd8 com.cooliris.media/com.cooliris.media.Gallery (server)'
06-11 12:36:45.279: I/InputReader(163): dispatchTouch::touch event's action is 1
06-11 12:36:45.279: I/InputDispatcher(163): Delivering touch to current input target: action: 1, channel '40866bd8 com.cooliris.media/com.cooliris.media.Gallery (server)'
06-11 12:36:45.279: D/Gallery(18750): performReturn : contentUri = content://media/external/images/media/421
06-11 12:36:45.289: D/Gallery(18750): performReturn : result = Intent { dat=content://media/external/images/media/421 }
06-11 12:36:45.289: I/RenderView(18750): OnPause RenderView com.cooliris.media.RenderView@40515188
06-11 12:36:45.289: E/SensorManager(18750): unregisterListener:: all sensors,  listener = com.cooliris.media.RenderView@40515188
06-11 12:36:45.299: I/GLThread(18750): onPause tid=46
06-11 12:36:45.299: I/Main thread(18750): onPause waiting for mPaused.
06-11 12:36:45.299: I/Main thread(18750): onPause waiting for mPaused.
06-11 12:36:45.309: I/GLThread(18750): mPaused is now true tid=46
06-11 12:36:45.309: I/GLThread(18750): releasing EGL surface because paused tid=46
06-11 12:36:45.309: W/EglHelper(18750): destroySurface()  tid=46
06-11 12:36:45.319: W/EglHelper(18750): finish() tid=46
06-11 12:36:45.349: I/GLThread(18750): releasing EGL context because paused tid=46
06-11 12:36:45.359: I/ActivityManager(163): Start proc com.AUSRWC for activity com.AUSRWC/.new_upload: pid=18810 uid=10067 gids={3003, 1006, 1015}
06-11 12:36:45.419: I/OrientationDebug(163): [pwm] in updateOrientationListenerLp()
06-11 12:36:45.419: V/OrientationDebug(163): in updateOrientationListenerLp(), Screen status=true, current orientation=1, SensorEnabled=true
06-11 12:36:45.419: I/OrientationDebug(163): [pwm] needSensorRunningLp(), return true #4
06-11 12:36:45.439: E/jdwp(18810): Failed sending reply to debugger: Broken pipe
06-11 12:36:45.499: I/GLThread(18750): noticed surfaceView surface lost tid=46
06-11 12:36:45.609: I/ApplicationPackageManager(18810): cscCountry is not German : INU 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T10:38:43.617

看起来正在重新创建活动。尝试将以下内容添加到清单中的活动条目中

`android:configChanges="orientation|keyboardHidden" android:launchMode="singleTask"`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T11:08:16.523

问题可能是由于内存利用率。尝试使用 Memory Analyzer Tool 测试代码，以便找出问题所在。

如果您在活动重新创建期间发布日志语句，我可以为您提供更好的帮助。

# c++ - XML 中的 UTF 8 编码日语字符串

> ID：10947137
> 
> 赞同：0
> 
> 时间：2012-06-08T10:28:02.277
> 
> 标签：c++, xml, unicode, character

我正在尝试使用日语字符串创建一个 SOAP 调用。我面临的问题是，当我将此字符串编码为 UTF8 编码字符串时，其中包含许多控制字符（例如 0x1B (Esc)）。如果我删除所有此类控制字符以使其成为有效的 SOAP 调用，则日语内容在服务器端显示为垃圾。如何为日文字符创建有效的 SOAP 请求？任何建议都受到高度赞赏。我正在使用带有 MS-DOM 的 C++。

最诚挚的问候。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T11:03:27.113

如果我没记错的话是真的，前 32 个 unicode 代码点不允许作为 XML 文档中的字符，甚至使用`&#`. 不确定它们是否在 HTML 中被允许，但服务器肯定认为它们在您的请求中是不允许的，并且它获得了唯一有意义的投票。

我注意到您的文档声称是用 编码的`iso-2022-jp`，而不是`utf-8`. 事实上，`ESC $ B`出现在您文档中的字符序列是有效的 iso-2022-jp。它表明数据正在切换编码（从 ASCII 到称为 JIS X 0208-1983 的 2 字节日语编码）。

但是在构建您的请求的过程中，某些东西已经看到该`0x1B`字节并将其解释为字符 U+001B，但没有意识到它是作为已经在文档编码中编码的数据中的一个字节。因此，它已将 XML 转义为“尽力而为”，即使这不是有效的 XML。

可能，序列化您的 XML 文档的任何东西都不知道编码应该是`iso-2022-jp`. 我想它认为它应该将文档序列化为 ASCII、ISO-Latin-1 或 UTF-8，并且该`<meta>`元素对它没有任何意义（无论如何，这是一种指定编码的 HTML 方式，它在 XML 中没有特别的意义）。但我不知道 MS-DOM，所以我不知道如何纠正。

如果您只是`ESC`从 iso-2022-jp 数据中删除字符，那么您隐藏了数据已切换编码的事实，因此解码器将继续将所有这些`7nMK`内容解释为 ASCII，而它应该被解释为 JIS X 0208 -1983 年。因此，垃圾。

还有一些奇怪的事情——`iso-2022-jp`切换回 ASCII 的代码是`ESC ( B`，但我`|(B</font>`在你的数据中看到，当我希望第二个 ESC 字符发生与第一个 ESC 字符相同的事情时：`&#0x1B(B</font>`。同样，`$B#M#S(B`并且`$BL@D+(B`尝试从 ASCII 切换到 JIS X 0208-1983 并返回，并且这些`ESC`字符再次消失而不是被转义。

我无法解释为什么某些`ESC`字符消失了，而一个字符被转义了，但是您生成的内容看起来几乎但不完全像 valid ，这绝非巧合`iso-2022-jp`。我认为 iso-2022-jp 是 7 位编码，所以部分问题可能是您获取了 iso-2022-jp 数据，并通过转换 ISO-Latin-1（或其他一些 8下半部分匹配 ASCII 的位编码，例如任何 Windows 代码页）到 UTF-8。如果是这样，那么这个函数保持 7 位数据不变，它不会将其转换为 UTF-8。然后当解释为 UTF-8 时，数据中包含 ESC 字符。

如果您想以 UTF-8 格式发送数据，那么首先您需要将其实际转换为 iso-2022-jp（转换为宽字符或转换为 UTF-8，无论您的 SOAP 或 XML 库所期望的哪个）。其次，您需要将其标记为 UTF-8，而不是 iso-2022-jp。最后，您需要将整个文档序列化为 UTF-8，尽管正如我所说的，您可能已经在这样做了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T15:55:37.097

正如 Steve Jessop 所指出的，您似乎已将文本编码为 iso-2022-jp，而不是 UTF-8。所以首先要做的是检查并确保你有正确的 UTF-8。

如果问题仍然存在，请考虑对文本进行编码。

最简单的选项是“十六进制编码”，您只需将每个字节的十六进制值写为 ASCII 数字。例如，0x1B 字节变为“1B”，即 0x31、0x42。

如果你想变得花哨，你可以使用 MIME 甚至 UUENCODE。

# iphone - ShareKit 2.0 崩溃

> ID：10947141
> 
> 赞同：0
> 
> 时间：2012-06-08T10:28:13.970
> 
> 标签：iphone, objective-c, sharekit

我在我的 iPhone 应用程序中使用 sharekit 2.0。[我已安装并遵循https://github.com/ShareKit/ShareKit/wiki/Installing-sharekit](https://github.com/ShareKit/ShareKit/wiki/Installing-sharekit)上的所有说明。尽管有如下警告（不是错误），但应用程序构建良好

```
ld: warning: directory not found for option '-L/Users/ilaagarwal/Downloads/Thomas/puzzle game with friends/Twitter+OAuth/Libraries & Headers' 
```

我做了一个按钮，按下按钮后会发生以下动作

```
- (IBAction)OnShareFacebook:(id)sender {
SHKItem *item = [SHKItem text:@"message to share"];
NSLog (@"Button Pressed");
} 
```

该应用程序在尝试执行 SHKitem 行时崩溃。如果我评论该行，则操作执行良好，没有任何错误。任何线索为什么它在使用 SHKItem 时崩溃以及我如何修复它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T11:49:50.530

在 ShareKit 的配置文件中，我在 DefaultSHKConfigurator.m 中添加了密钥，但它不起作用。我必须完全按照链接[https://github.com/ShareKit/ShareKit/wiki/Configuration](https://github.com/ShareKit/ShareKit/wiki/Configuration)中的说明进行操作，然后应用程序没有崩溃，因此问题解决了。

# twisted - 用于桌面应用程序的首选 python 网络框架/库

> ID：10947142
> 
> 赞同：0
> 
> 时间：2012-06-08T10:28:15.093
> 
> 标签：twisted, tornado, gevent

我想用python写一个p2p分享软件，主要用在windows下，也可以用在linux下。所以我尝试了一些框架/库，例如 Twisted、Gevent 和 Tornado（可能是 tornado 对 Windows 桌面客户端来说不是一个好的）。

但我不知道该选择哪一个。

Twisted 有点大，我觉得……我认为 Gevent 在 *nix 平台上更有用。Tornado 是一个网络服务器，所以可能这个不适合桌面应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T13:07:46.213

Twisted 是其中最适合开发网络应用程序的。它包含实现协议的最多支持代码。Twisted 还包括其中最好的 GUI 库集成。它适用于 Gtk（也适用于 Windows）和 Qt3 和 Qt4。它也可以与 wxWidgets 一起使用（尽管它的支持不如 Gtk 或 Qt3/4 好）。它也可以与 Windows GUI 事件循环集成。

当然，鉴于对您的需求的描述极少（几乎不存在），建议 Twisted 是最适合您需求的库是荒谬的。我认为与您列出的其他选项（实际上，Python 中可用的任何其他选项）相比，Twisted 很可能至少同样适合（如果不是更适合）任意网络应用程序的需求。但是，我不能说它是否最适合您的特定情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T21:33:12.497

我认为 Windows 中所有这些的底层事件循环的默认值将基于 Select（尽管看起来至少 Twisted 对 IOCP 具有特定于平台的支持）。

对上述差异有更好理解的人可能应该发表评论，但从开发人员的角度来看，选择主要围绕首选语法。Twisted 通过反应器模式实现一切，而 gevent 使用协同程序。我会看一些简单的例子，看看哪个更适合你的感受。

# file-upload - 使用 Joomla 1.5 的用户访问权限上传文件

> ID：10947143
> 
> 赞同：0
> 
> 时间：2012-06-08T10:28:15.110
> 
> 标签：file-upload, joomla, components, joomla1.5

我们希望让客户能够从我们的网站下载和上传文件。他们必须只能看到他们上传的文件。我们还希望有文件可供下载，但请选择允许下载的用户。因此，每个客户端都有自己的前端，他们可以在其中查看可以下载的内容或上传自己的文件。

我的问题是：

**Joomla 1.5 有可用的组件吗？**

我们的网站在 Joomla 上运行！1.5。

任何帮助，将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T12:39:42.680

[您可以通过网站http://www.jdownloads.com/](http://www.jdownloads.com/)的前端使用此组件进行文件下载和上传

然后，您将需要一个文件树来显示该文件夹中的文件，但是我不太确定用户只能看到他们自己上传的文件。

# ios - 将核心数据对象设置为零

> ID：10947144
> 
> 赞同：2
> 
> 时间：2012-06-08T10:28:25.060
> 
> 标签：ios, core-data

我对此不确定，但确实将核心数据对象设置为 nil，将其从核心数据中删除。例如：

```
MyObject *obj = [MyObject fetchFromCoreDataWithID:objectID];
obj = nil; 
```

这是否会从 Core Data 中删除该对象？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T10:30:59.943

不，该对象仅代表您的 CoreData 存储中的内容。如果你想删除对象，你必须这样做：

```
NSError *saveError = nil;
[_managedObjectContext deleteObject:obj];
[_managedObjectContext save:&saveError]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T10:30:27.537

不。

您需要执行以下操作才能将其删除：

```
[managedObjectContext deleteObject:obj] 
```

[有关更多详细信息，请参阅文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CoreData/Articles/cdCreateMOs.html)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-08T10:31:27.243

不。要删除检查[deleteObject](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CoreData/Articles/cdCreateMOs.html)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-08T13:22:52.937

您也可以创建您的`NSManagedObject`而不将其添加到`NSManagedObjectContext`. 那么你根本不需要删除它。有关详细信息，请参阅此内容：[在 Core Data 中插入新的托管对象](https://stackoverflow.com/q/10732785/730701)。

# macos - 当单元格具有特定单词时，突出显示 excel mac 2011 中的行

> ID：10947147
> 
> 赞同：6
> 
> 时间：2012-06-08T10:28:47.073
> 
> 标签：macos, excel, formatting, conditional, row

在 Excel 2011 Mac 中（这似乎很重要，因为 stackoverflow 中用于 excel windows 或 mac 旧版本的其他参考解决方案似乎不起作用）。

我想应用条件格式，因此当 D 列中的单元格包含“学生”一词时，包含该单元格的整行将获得颜色格式（文本为蓝色，单元格为白色/空白填充）。

我已经尝试过 INDIRECT 和其他一些公式，但我没有做对。只有包含该单词的单元格获得格式，而不是整行（即，模式匹配的同一行上的其余单元格）。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-08T12:21:31.123

诚然，这个答案是基于 Windows 版本的，但它应该仍然适合你。
*（尽可能混合使用 Windows 和 Mac 版本的图片。）*

1.  从**条件格式**菜单中选择**管理规则...。**

     **![条件格式菜单](../Images/e61d57db529cc106277f6681f00ceed2.png)** 
***   单击**新建规则...**按钮。

    ![条件格式规则管理器](../Images/ea43efff34f4eaf15385d5c4782d0636.png)

    *   选择**“使用公式确定要格式化的单元格**”，输入如下所示的公式，然后单击“**格式...”**按钮选择您的条件格式（无填充的蓝色文本）。
    *- 您说您在 D 列中寻找“学生”一词，我假设第 3 行是您希望应用此条件格式的第一行。如果不是这种情况，只需将**3更改为另一个行号。***

    ![新的格式规则](../Images/81df813ef6464cbbb22a5f18c32e4d3c.png)

    **如果“学生”一词不是目标单元格中​​的唯一内容，请改用以下公式：** `=ISNUMBER(SEARCH("student",$D3))`

    *   **然后在“应用于”**文本框中键入一个范围，如图所示。
    *- 在此示例中，我们假设第 3 行是第一行，第 400 行是您希望应用条件格式的最后一行。*
    *- 请注意，我们没有在公式中包含列字母，因为我们希望每行的每一列都包含在内。*

    ![具有新规则的条件格式规则管理器](../Images/98a9d4b7ea1de8decff1a70b2d857da1.png)

    *   单击**确定**，您应该完成。** 

 **我希望这对你有用。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2016-01-10T02:09:07.030

请按照以下步骤进行条件格式设置。

第 1 步 - 选择**条件格式**>**新规则...**

第 2 步 - 选择**样式**下拉菜单

第 3 步 - 选择**经典**

[第 4 步](http://i.stack.imgur.com/hN1kD.png)- 选择下拉菜单，**仅格式化排名靠前或排名靠后的值**

第 5 步 - 从下拉列表中选择**使用公式确定要格式化的单元格**

[第 6 步](http://i.stack.imgur.com/P1TiM.png)- 突出显示所需的单元格并记下当前单元格。(D3)

第 7 步 - 在公式部分使用公式：**=MATCH("Student",D3,0)**。
同样，D3 是当前单元格。

步骤 8 - 按**OK****

# database - 在wordpress admin中将多个数组保存在一个数组中

> ID：10947154
> 
> 赞同：0
> 
> 时间：2012-06-08T10:29:30.633
> 
> 标签：database, themes, options, wordpress

我正在尝试从选项页面在 wordpress 数据库中创建一个多维数组。我有表单标签

```
<form action="options.php" post="post"> 
```

我得到的选项

```
<?php settings_fields( 'theme_styles' ); ?>
<?php $options = get_option( 'theme_styles_options' ); ?> 
```

我有一个领域

```
<input type="text" id="theme_styles_options[option_name]" name="theme_styles_options[option_name]" class="regular-text" value="<?php esc_attr_e( $options[option_name] ); ?> /> 
```

我希望能够多次使用该字段但在不同的数组下，例如

```
array(
  'first_array' => array(
    'option_name' => 'value1'
  )
  'second_array' => array(
    'option_name' => 'value2'
  )
) 
```

我现在知道我当前的代码保存为

```
array(
  'option_name' => 'value1'
) 
```

如何设置我的字段以将值发送到 options.php 页面以保存为多维数组？另外，如果有人知道如何保存它，我如何从数据库中的字段中检索它？

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T11:59:12.383

在保存之前 - 使用`add_option`或`update_option`- 只需将现有数组合并到另一个大数组中。那里的两个函数都接受数组。

从数据库中获取一个选项`get_option`

更多细节-> [http://codex.wordpress.org/Options_API](http://codex.wordpress.org/Options_API)

# javascript - 如何在页面加载时从浏览器窗口顶部显示一个框？

> ID：10947155
> 
> 赞同：1
> 
> 时间：2012-06-08T10:29:44.063
> 
> 标签：javascript, jquery

我希望在页面加载时从浏览器窗口的顶部出现一个框。

理想情况下，它看起来像这样：

[http://demo.cookieconsent.silktide.com/](http://demo.cookieconsent.silktide.com/)

所以页面加载并向下滑动。

我将如何实现这一目标？

我查看了[http://jqueryui.com/demos/dialog/](http://jqueryui.com/demos/dialog/)但它似乎没有执行上述操作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T10:37:34.253

试试[这个](http://jsfiddle.net/srFKa/3/)

在此示例中，我创建了一个固定在窗口顶部但起初隐藏的 div，然后在页面加载时显示下滑动画。

希望这可以帮助

[此处](http://jsfiddle.net/srFKa/3/)更新演示

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T11:02:17.923

尝试这个-

**html**

```
<div id="box"><h1 style="text-align:center">content goes here</h1></div> 
```

**jQuery**

```
$(document).ready(function(){
    $("#box").animate({top:"0px"},"slow");
}); 
```

**css**

```
background:red;
position:fixed;
width:100%;
height:60px;
top:-60px 
```

**总的来说，代码是 -**

```
<html>
<head>
<script type="text/javascript" src="jquery.js"></script>

<style>
#box
{
background:red;
position:fixed;
width:100%;
height:60px;
top:-60px
}
</style>
<script type="text/javascript"> 
$(document).ready(function(){
    $("#box").animate({top:"0px"},"slow");
});
</script> 
</head>

<body>
<div id="box"><h1 style="text-align:center">content goes here</h1></div>
rest page content<br>
rest page content<br>
rest page content<br>
rest page content<br>
rest page content<br>
rest page content<br>
rest page content<br>
rest page content<br>
rest page content<br>
rest page content<br>
rest page content<br>
rest page content<br>
rest page content<br>
rest page content<br>
rest page content<br>
rest page content<br>
rest page content<br>
rest page content<br>
rest page content<br>
rest page content<br>
rest page content<br>
rest page content<br>
rest page content<br>
rest page content<br>
rest page content<br>
rest page content<br>
rest page content<br>
rest page content<br>
rest page content<br>
rest page content<br>
rest page content<br>
rest page content<br>
rest page content<br>
rest page content<br>
rest page content<br>
rest page content<br>
rest page content<br>
rest page content<br>
</body>
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T10:32:28.597

在您的 html 中放入 a `<div>`，将其 css 设置为，`position: fixed`然后您就完成了。

# spring - 如何将 Spring AOP 加载到 Web 应用程序中？

> ID：10947157
> 
> 赞同：0
> 
> 时间：2012-06-08T10:29:56.537
> 
> 标签：spring, aop

我试图在 web 应用程序中实现 Spring AOP。不幸的是，我在网上找到的所有示例代码都是控制台应用程序。我不知道如何在网络应用程序中做到这一点？

在 web.xml 文件中，我像这样加载 applicationContext.xml：

```
<context-param>
  <param-name>contextConfigLocation</param-name>
  <param-value>/WEB-INF/applicationContext.xml</param-value>
</context-param> 
```

在 applicationContext.xml 文件中，我将 ProxyFactoryBean 定义如下：

```
<bean id="theBo" class="my.package.TheBo">
  ...
</bean>    
<bean id="theProxy" class="org.springframework.aop.framework.ProxyFactoryBean">
      <property name="proxyInterfaces">
        <list>
            <value>my.package.ITheBo</value>
        </list>
    </property>
    <property name="target" ref="theBo"/>
    <property name="interceptorNames">
        <list>
            <value>loggingBeforeAdvice</value>
        </list>
    </property>
</bean> 
```

我现在的情况是我不知道放置此代码的最佳位置在哪里：

```
ApplicationContext context = new ClassPathXmlApplicationContext("WEB-INF/applicationContext.xml");
theBo = (ITheBo) context.getBean("theProxy"); 
```

如果这是一个控制台应用程序，我宁愿把它放在 main() 中，但我怎么能在 web 应用程序中这样做呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T10:53:33.330

您不需要以下代码来加载上下文：

```
ApplicationContext context = new ClassPathXmlApplicationContext("WEBINF/applicationContext.xml");
theBo = (ITheBo) context.getBean("theProxy"); 
```

您必须将其添加`ContextLoaderListener`到您的`web.xml`文件中：

```
<listener>
    <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
</listener> 
```

`<context-param>`现在，当您的 Web 应用程序启动时，会加载 contextConfigLocation中声明的上下文。在你的情况下'/WEB-INF/applicationContext.xml'。

如果您需要特定类中的上下文，您可以实现`ApplicationContextAware`接口来检索它。

剩下的，你的 webapp 现在是一个基本的 spring 应用程序，你可以像往常一样连接你的类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T09:51:08.750

感谢@Dave Newton 给了我线索。为了让我`theProxy`从网络注入，就我而言，它是 JSF，我必须将以下代码放入`faces-config.xml`.

```
<application>
   <variable-resolver>
      org.springframework.web.jsf.DelegatingVariableResolver
   </variable-resolver>
</application>

<managed-bean>
   <managed-bean-name>theAction</managed-bean-name>
   <managed-bean-class>org.huahsin68.theAction</managed-bean-class>
      <managed-bean-scope>session</managed-bean-scope>
      <managed-property>
         <property-name>theBo</property-name>
            <value>#{theProxy}</value>
      </managed-property>
</managed-bean> 
```

并将@tom 提供的侦听器放入`web.xml`.

# php - PHP PCNTL - 在终端中保持控制

> ID：10947158
> 
> 赞同：0
> 
> 时间：2012-06-08T10:29:56.963
> 
> 标签：php, terminal, pcntl

我想运行并行进程来同时处理至少 4 个用户。

```
ob_end_flush();

for($i = 0; $i < 4; $i++)
{
   $pid=pcntl_fork();
   if ($pid == -1) {
      echo("Could not create a new child.");
      exit;
   } else if ($pid == 0) {
      //This will get excuted only in the child process
      echo 'parent1';
      sleep(5);
      echo 'parent2';
     exit;
   }
} 
```

输出是这样的：

```
> php testscript.php
parent1
parent1
parent1
parent1
> parent2
parent2
parent2
parent2 
```

当前发生的情况是在显示`parent1`4 次后，对脚本的控制丢失，并启动了一个新的空命令行。再等 5 秒后，剩余的输出来了。

我怎样才能避免这种情况发生。我希望能够在我想要的时候打破脚本。

**编辑**

如果我通过终端发送信号，比如说按 CTRL+C，脚本不会停止，需要一种方法来通知脚本在那一刻停止。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T17:41:28.570

您正在创建肮脏的僵尸/无父进程，这些进程被其他当然也不想要它们的人采用 =)

当您使用分叉时，您需要了解您正在创建当前进程（堆栈/堆和所有）的副本，为其提供一个新的进程 ID（PID）并将其父 ID（PPID）设置为自己的说产生的过程是一个孩子。在这里，这 4 个新孩子的父母完成了他所有明显的工作，然后没有任何错误地死去，因为他无事可做。但是作为任何尊重的父母应该做的，你的父母过程应该坐下来照顾他的孩子。这就是信号变得有用的地方，尤其是 SIGCHLD 信号，它将被发送到任何子进程刚刚过去的父进程。结合一个小的事件处理循环，你的父母可以优雅地管理他的孩子 \o/

tl;博士我的博客中有一个示例 fork 包装器[http://codehackit.blogspot.be/2012/01/childpids-break-pcntlsignaldispatch.html](http://codehackit.blogspot.be/2012/01/childpids-break-pcntlsignaldispatch.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T14:52:57.230

如果您想以自定义方式对其做出反应，则需要使用[pcntl_signal](http://php.net/manual/en/function.pcntl-signal.php)为 CTRL-C（等于[SIGINT](http://en.wikipedia.org/wiki/Signal_%28computing%29)，值为 2）设置信号处理程序。

# r - 编写健壮的 R 代码：命名空间、屏蔽和使用 `::` 运算符

> ID：10947159
> 
> 赞同：47
> 
> 时间：2012-06-08T10:30:01.130
> 
> 标签：r, coding-style, namespaces, package, masking

## 精简版

对于那些不想阅读我的“案例”的人来说，这就是本质：

1.  什么是最小化新包破坏现有代码的机会的推荐方法，即使您编写的代码**尽可能健壮**？
2.  什么是充分利用**命名空间机制**的推荐方法？

    a) 只*使用*贡献的包（比如在一些 R 分析项目中）？

    b) 关于*开发*自己的软件包？

3.  由于甚至没有与类（AFAIU）可比的命名空间机制，如何最好地避免与**正式类**（在我的情况下主要是[参考类）相关的冲突？](http://stat.ethz.ch/R-manual/R-devel/library/methods/html/refClass.html)`::`

* * *

## R 宇宙的运作方式

这是我两年来一直在脑海中挥之不去的事情，但我不觉得我已经找到了一个令人满意的解决方案。另外，我觉得情况越来越糟。

[我们在CRAN](http://cran.at.r-project.org/web/packages/available_packages_by_name.html)、[github](https://github.com/)、[R-Forge](http://r-forge.r-project.org/)等上看到越来越多的包，这简直太棒了。

在这样一个去中心化的环境中，构成 R 的代码库（为简单起见，假设是*基础 R*和*贡献的 R*）很自然地会偏离稳健性方面的理想状态：人们遵循不同的约定，有 S3、S4 、S4 参考类等。如果有一个强制执行约定的“*中央清算实例*”，事情就不能像它们那样“对齐” 。没关系。

## 问题

鉴于上述情况，使用 R 编写健壮的代码可能非常困难。并非您需要的所有东西都在 base R 中。对于某些项目，您最终会加载相当多的贡献包。

**恕我直言，在这方面最大的问题是命名空间概念在 R 中的使用方式：R 允许简单地编写某个函数/方法的名称，而无需明确要求它的命名空间（即`foo`vs. `namespace::foo`）**。

所以为了简单起见，这就是每个人都在做的事情。但这样一来，名称冲突、代码损坏以及需要重写/重构代码只是时间问题（或加载的不同包的数量）。

充其量，您将**知道**哪些现有功能被新添加的包屏蔽/重载。在最坏的情况下，您将一无所知，直到您的代码中断。

几个例子：

*   尝试同时加载[RMySQL](http://cran.at.r-project.org/web/packages/RMySQL/index.html)和[RSQLite](http://cran.at.r-project.org/web/packages/RSQLite/index.html)，它们不太顺利
*   [RMongo](http://cran.at.r-project.org/web/packages/RMongo/index.html)也会覆盖 RMySQL 的某些[功能](http://cran.at.r-project.org/web/packages/RMySQL/index.html)
*   [预测](http://cran.at.r-project.org/web/packages/forecast/index.html)掩盖了很多关于 ARIMA 相关函数的东西
*   [R.utils](http://cran.at.r-project.org/web/packages/R.utils/index.html)甚至掩盖了`base::parse`例程

（我不记得具体是哪些功能导致了问题，但如果有兴趣，我愿意再次查找）

令人惊讶的是，这似乎并没有困扰很多程序员。[我试图在r-devel](http://tolstoy.newcastle.edu.au/R/e15/devel/11/08/0416.html)引起几次兴趣，但无济于事。

## `::`使用运算符的缺点

1.  `::`正如 Dominick Samperi[指出的那样](http://tolstoy.newcastle.edu.au/R/e15/devel/11/10/0716.html)，在某些情况下使用运算符可能会严重影响效率。
2.  在**开发**自己的包时，您甚至不能`::`在自己的代码中使用运算符，因为您的代码还不是真正的包，因此也没有命名空间。所以我必须一开始就坚持下去`foo`，构建，测试，然后再把所有东西都改成`namespace::foo`. 并不真地。

## 避免这些问题的可能解决方案

1.  **将每个包中的每个函数重新分配**给遵循某些命名约定的变量，例如`namespace..foo`，为了避免与之相关的低效率（我[在这里](http://tolstoy.newcastle.edu.au/R/e15/devel/11/08/0416.html)`namespace::foo`概述过一次）。优点：它有效。缺点：它很笨拙，而且你使用的内存加倍。
2.  **开发包时**模拟命名空间。**AFAIU，这不太可能，至少我当时被[告知](http://tolstoy.newcastle.edu.au/R/e13/devel/11/01/0039.html)。**
***   **强制**使用`namespace::foo`. _ 恕我直言，那将是最好的做法。当然，我们会失去一些简单性，但话说回来，R 宇宙不再简单了（至少它不像 00 年代初期那样简单）。**

 **## 那么（正式）课程呢？

除了上述方面之外，`::`方式对于函数/方法也很有效。但是类定义呢？

将包[timeDate](http://cran.at.r-project.org/web/packages/timeDate/index.html)与它的类一起使用`timeDate`。假设出现另一个包，它也有一个 class `timeDate`。我看不出我如何明确声明我想要`timeDate`来自两个包中的任何一个的类的新实例。

这样的事情是行不通的：

```
new(timeDate::timeDate)
new("timeDate::timeDate")
new("timeDate", ns="timeDate") 
```

随着越来越多的人为他们的 R 包切换到 OOP 样式，这可能是一个大问题，从而导致大量的类定义。如果有**一种**方法可以显式处理类定义的命名空间，我将非常感谢一个指针！

## 结论

尽管这有点冗长，但我希望我能够指出核心问题/问题，并且我可以在这里提高更多认识。

我认为[devtools](http://cran.at.r-project.org/web/packages/devtools/index.html)和[mvbutils](http://cran.at.r-project.org/web/packages/mvbutils/index.html)确实有一些可能值得推广的方法，但我敢肯定还有更多要说的。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-06-08T14:58:09.127

好问题。

## 验证

编写健壮、稳定且可用于生产的 R 代码很难。你说：“令人惊讶的是，这似乎并没有打扰很多程序员”。这是因为大多数 R 程序员没有编写**生产**代码。他们正在执行一次性的学术/研究任务。我会严重质疑任何声称 R 易于投入生产的程序员的技能。除了你已经链接到的关于搜索/查找机制的帖子之外，我还写了一篇关于[警告](http://obeautifulcode.com/R/A-Warning-About-Warning/)危险的帖子。这些建议将有助于降低生产代码的复杂性。

## 编写健壮/生产 R 代码的技巧

1.  避免使用 Depends 的包，而偏爱使用 Imports 的包。仅将依赖项填充到 Imports 中的包完全可以安全使用。如果您绝对必须使用使用 Depends 的软件包，请在致电后立即给作者发送电子邮件`install.packages()`。

这是我告诉作者的话：“嗨，作者，我是 XYZ 包的粉丝。我想提出一个请求。你能在下一次更新中将 ABC 和 DEF 从 Depends 移到 Imports 吗？我无法将你的包添加到我自己的包的 Imports 直到发生这种情况。随着 R 2.14 对每个包强制执行 NAMESPACE，R Core 的一般信息是包应该尝试成为“好公民”。如果我必须加载一个 Depends 包，它会增加一个很大的负担：每次我依赖一个新包时，我都必须检查是否存在冲突。使用 Imports，该包没有副作用。我知道这样做可能会破坏其他人的包。我认为这是正确的做法展示对 Imports 的承诺，从长远来看，它将帮助人们生成更强大的 R 代码。”

2.  使用 importFrom。不要将整个包添加到 Imports，只添加您需要的那些特定功能。我使用 Roxygen2 函数文档和自动生成 NAMESPACE 文件的 roxygenize() 来完成此操作。通过这种方式，您可以导入两个有冲突的包，其中冲突不在您实际需要使用的功能中。这很乏味吗？直到它成为一种习惯。好处：您可以快速识别所有第 3 方依赖项。这有助于...

3.  不要盲目升级包。逐行阅读更新日志，并考虑更新将如何影响您自己的包的稳定性。大多数时候，更新不会触及您实际使用的功能。

4.  避免 S4 课程。我正在这里挥手。我发现 S4 很复杂，它需要足够的脑力来处理 R 的功能方面的搜索/查找机制。你真的需要这些 OO 功能吗？管理状态 = 管理复杂性 - 将其留给 Python 或 Java =)

5.  编写单元测试。使用 testthat 包。

6.  每当您 R CMD 构建/测试您的包时，解析输出并查找 NOTE、INFO、WARNING。此外，用自己的眼睛进行物理扫描。构建步骤的一部分记录了冲突，但没有附加警告等。

7.  在调用第 3 方包后立即添加断言和不变量。换句话说，不要完全相信别人给你的东西。稍微探查一下结果，`stop()`如果结果出乎意料。您不必发疯——选择一两个暗示有效/高置信度结果的断言。

我认为还有更多，但现在这已成为肌肉记忆 =) 如果有更多，我会增加。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-06-08T11:14:35.273

我的看法：

摘要：灵活性是有代价的。我愿意付出这个代价。

1）我根本不使用会导致此类问题的软件包。如果我真的，真的需要我自己的包中的那个包中的一个函数，我会`importFrom()`在我的`NAMESPACE`文件中使用。无论如何，如果我在使用包时遇到问题，我会联系包作者。问题出在他们这边，而不是 R 那边。

2）我从不`::`在自己的代码中使用。通过只导出我的包的用户需要的函数，我可以将我自己的函数保留在 NAMESPACE 中而不会发生冲突。未导出的函数也不会隐藏具有相同名称的函数，所以这是双赢的。

关于环境、命名空间等如何工作的很好的指南，您可以在这里找到：http: [//blog.obeautifulcode.com/R/How-R-Searches-And-Finds-Stuff/](http://blog.obeautifulcode.com/R/How-R-Searches-And-Finds-Stuff/)

对于每个编写包之类的人来说，这绝对是必读的。阅读本文后，您将意识到`::`在您的包代码中使用是不必要的。**

# objective-c - iOS 单元标签链接

> ID：10947160
> 
> 赞同：0
> 
> 时间：2012-06-08T10:30:05.980
> 
> 标签：objective-c, ios

嗨，我是 iOS 编程新手，需要一点帮助。

我有一个表格视图单元格，它由 .plist 文件中的数据填充。我需要能够在其中一个单元格内建立链接。我怎么能这样做？

这是将数据加载到单元格中的代码：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    static NSString *CellIdentifier = @"CustomTableCell";
    static NSString *CellNib = @"DetailViewCell";

    DetailViewCell *cell = (DetailViewCell *)[tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if (cell == nil) {
        NSArray *nib = [[NSBundle mainBundle] loadNibNamed:CellNib owner:self options:nil];
        cell = (DetailViewCell *)[nib objectAtIndex:0];
    }   

    cell.accessoryType = UITableViewCellAccessoryNone;
    cell.cellTitleLabel.textColor = [UIColor blackColor];
    cell.cellTitleLabel.font = [UIFont systemFontOfSize:20.0];
    cell.cellSubtitleLabel.textColor = [UIColor darkGrayColor];

    informations = [[NSArray alloc] initWithObjects:@"City", @"Country", @"State", @"History", @"Link", nil];
    subtitles = [[NSArray alloc] initWithObjects:titleString, subtitleString, stateString, populationString, @"Link", nil];

    cell.cellTitleLabel.text = [informations objectAtIndex:indexPath.row];
    cell.cellSubtitleLabel.text = [subtitles objectAtIndex:indexPath.row];

    return (DetailViewCell *) cell; 
} 
```

对于单元格“链接”，我需要它来打开存储在 .plist 文件中的 url。我怎么能这样做？

非常感谢

瑞安

PS：我是这个东西的新手，所以要描述一下。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T10:36:34.053

首先，将以下内容移至 viewDidLoad

```
 informations = [[NSArray alloc] initWithObjects:@"City", @"Country", @"State", @"History", @"Link", nil];
    subtitles = [[NSArray alloc] initWithObjects:titleString, subtitleString, stateString, populationString, @"Link", nil]; 
```

其次，对于值为@"Link"的单元格

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath 
{
    DetailViewCell *cell = [tableView cellForRowAtIndexPath:indexPath];
    if(cell.cellTitleLabel.text == @"Link")
    {
          //Open in safari
          [[UIApplication sharedApplication] openURL:[NSURL URLWithString:cell.cellSubtitleLabel.text]];
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T10:44:38.143

制作 viewController 的两个数组属性。

```
@property (nonatomic, retain) NSArray *informationArray, *subtitlesArray; 
```

`-viewDidLoad`在您的方法中初始化它们：

```
 self.informationArray = [NSArray arrayWithObjects:@"City", @"Country", @"State", @"History", @"Link", nil];
   self.subtitlesArray = [NSArray arrayWithObjects:titleString, subtitleString, stateString, populationString, @"Link", nil]; 
```

然后检查检索到的数据是否为链接，然后在 safari 中打开。

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath 
{
    id title = [self.informationArray objectAtIndex:indexPath.row];

    NSURL *link = [NSURL URLWithString:[self.subtitlesArray objectAtIndex:indexPath.row]];

    //or to get the link out of a .plist

    NSDictionary *plist = [NSData dataWithContentsOfFile:filePathForPlist];

    NSURL *link = [NSURL URLWithString:[[plist objectForKey:title] objectForKey:@"Link"];

    // you may need to get a different object from the .plist depending on the structure of the file.

    //Check to see if the indexPath matches a cell with a title of "Link" and that the URL can be opened.

    if([title isEqualToString:@"Link"] && [[UIApplication sharedApplication] canOpenURL:link]) {

          [[UIApplication sharedApplication] openURL:link];

    }
} 
```

# ruby-on-rails - 添加文件上传进度条的最简单方法（回形针）Apache/Paperclip/Rails

> ID：10947162
> 
> 赞同：5
> 
> 时间：2012-06-08T10:30:15.617
> 
> 标签：ruby-on-rails, paperclip

是否有基于回形针和 apache 服务器的 Rails 上传的简单上传进度条示例？到目前为止，我看到的示例要么已经过时，要么让我感到非常困惑。

感谢你的帮助！

码头。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T12:23:07.573

考虑将[Fine Uploader](http://fineuploader.com/)与[Rack Raw Upload](https://github.com/newbamboo/rack-raw-upload) gem 结合使用。

在 Rails 3.2 应用程序中一直为我完美工作。

# cron - Plone 4 中最好的任务调度方法是什么？

> ID：10947163
> 
> 赞同：5
> 
> 时间：2012-06-08T10:30:16.153
> 
> 标签：cron, scheduled-tasks, plone

我们需要在 Plone 4 中安排一些任务（在 n 天不活动后通知用户等）。最好的方法是什么？Plone 中有什么东西，或者是旧的 cron 工作吗？我想避免[cron4plone](http://plone.org/products/cron4plone)。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-08T11:01:54.760

只需使用 zope.conf 中的内置[`<clock-server>`功能](http://collective-docs.readthedocs.org/en/latest/misc/asyncronoustasks.html#clock-server)；`zope-conf-additional`在以下选项中列出它们`plone.recipe.zope2instance`：

```
zope-conf-additional =
  <clock-server>
    method /Plone/path/to/callable
    period 7200
    user username-to-invoke-method-with
    password password-for-user
    host localhost
  </clock-server> 
```

上面的代码片段将`/Plone/path/to/callable`每 2 小时调用一次，并将 Host 标头设置为`localhost`配置的用户和密码。

时钟服务器被添加到 Zope 2.10；在此之前，它是 Chris McDonough 的独立产品。我通常为此类任务创建专用视图。

另一种方法是使用 cron 作业来调用视图（通常使用`wget`or `cron`）或[zopectl 命令行脚本](https://stackoverflow.com/questions/10511955/can-you-define-an-entry-point-in-your-plone-product-to-run-a-script-as-if-it-was/10514765#10514765)。当我需要精确控制*何时*需要执行脚本时，我会使用它，例如每天午夜。

# python - 在 Python pylab 玫瑰/极坐标图中更改图例标题的字体大小

> ID：10947167
> 
> 赞同：8
> 
> 时间：2012-06-08T10:30:47.573
> 
> 标签：python, title, font-size, legend, matplotlib

我正在尝试更改玫瑰图或“极地”图上现有图例标题的字体大小。大部分代码是由不在场的其他人编写的。我已经添加：-

```
ax.legend(title=legend_title)
setp(l.get_title(), fontsize=8) 
```

添加标题“legend_title”，这是一个变量，用户在使用此代码的不同函数中输入字符串。第二行没有返回错误，但似乎也没有做任何事情。完整的代码如下。'Rose' 和 'RoseAxes' 是由某人编写的模块/函数。有谁知道改变图例标题字体大小的方法？我找到了一些正常情节的例子，但找不到玫瑰/极地情节的例子。

```
from Rose.RoseAxes import RoseAxes
from pylab import figure, title, setp, close, clf
from PlotGeneration import color_map_xml

fig = figure(1)
rect = [0.02, 0.1, 0.8, 0.8]
ax = RoseAxes(fig, rect, axisbg='w')
fig.add_axes(ax)
if cmap == None:
    (XMLcmap,colors) = color_map_xml.get_cmap('D:/HRW/VET/HrwPyLibs/ColorMapLibrary/paired.xml',255)
else:
    XMLcmap = cmap

bqs = kwargs.pop('CTfigname', None)
ax.box(Dir, U, bins = rose_binX, units = unit, nsector = nsector, cmap = XMLcmap, lw = 0, **kwargs )

l = ax.legend()
ax.legend(title=legend_title)
setp(l.get_texts(), fontsize=8)
setp(l.get_title(), fontsize=8) 
```

谢谢你的帮助

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2017-03-08T19:53:43.637

在图例和图例标题中调整字体大小的快速方法：

```
import numpy as np
import pylab as plt

f,ax = plt.subplots()
x = np.arange(10)
y = np.sin(x)
ax.plot(x,y, label = 'sin')

leg = ax.legend(fontsize = 'large')
leg.set_title("title", prop = {'size':'x-large'})

f.show() 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-01-31T12:38:27.767

这里有一个类似的问题： [如何设置 Matplotlib 轴图例的字体大小？](https://stackoverflow.com/questions/12402561/how-to-set-font-size-of-matplotlib-axis-legend)

我设法使用第二个答案更改标题的字体大小，我发现这是最简单的一个。您还可以更改颜色标题和其他属性。我得到以下代码：

```
leg=legend((x3, x4,),shadow=False, loc=loca,title=labelE,prop={'size':8})
leg.draw_frame(False)
ax111.get_legend().get_title().set_fontsize('36')
ax111.yaxis.set_tick_params(labelsize=10) 
```

我的猜测是，可以将替换 set_fontsize('#') 的任何标题属性更改为此处列出的其他参数：

[http://matplotlib.org/api/pyplot_api.html#matplotlib.pyplot.legend](http://matplotlib.org/api/pyplot_api.html#matplotlib.pyplot.legend)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2019-05-22T15:00:25.043

该[`pyplot`api](https://matplotlib.org/api/_as_gen/matplotlib.pyplot.legend.html#matplotlib.pyplot.legend)接受. `title_fontsize`_`pyplot.legend()`

# javascript - 在 javascript 中简化 if .. else

> ID：10947171
> 
> 赞同：0
> 
> 时间：2012-06-08T10:30:57.760
> 
> 标签：javascript

脑子一片空白，想不出解决办法……

我有以下代码：

```
if (onlySelected === true) {
    if (r.selected == true) {
        result.push(pushValue);
    }
}
else {
    result.push(pushValue);
} 
```

我怎样才能将此代码简化为：

```
if (condition) { result.push(pushValue) } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-08T10:32:29.117

试试这个：

```
if (!onlySelected || r.selected){
    result.push(pushValue);
} 
```

或者如果你绝对需要类型相等而不仅仅是真实性：

```
if (onlySelected !== true || r.selected){
    result.push(pushValue);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T10:32:40.070

```
if(onlySelected === false || r.selected == true) {
    result.push(pushValue);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T10:32:43.837

```
(!onlySelected || r.selected) && result.push(pushValue); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-08T10:34:10.780

```
if( (onlySelected === true && r.selected === true) || 1) {
    result.push(value)
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-08T10:34:25.570

我认为这会起作用：

```
if(!onlySelected || (onlySelected && r.selected))
    result.push(pushValue); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-09T00:09:42.670

嗯，这就是我做到的。

```
onlySelected === !0 ? r.selected == 1 && result.push(pushValue) : result.push(pushValue) 
```

# jquery - jquery 插件 - 使用 elem 访问 dom

> ID：10947176
> 
> 赞同：0
> 
> 时间：2012-06-08T10:31:15.107
> 
> 标签：jquery, jquery-plugins, element, css-selectors

所以我正在为画廊编写我的第一个 jquery 插件。我遇到的问题是访问与我正在按下的控件相关的 dom 元素。

```
init: function(options, elem) {
var self = this;
arrows = $(elem).find('.gallery-nav-bar  .widget.arrow');
console.log(arrows); 
```

如何将选择器与对象结合起来？

$(elem '.arrow'); //我知道这不起作用

笔记：

$('.arrow', elem) 像这样比 find 好得多。我认为我也可以使用此语法 - $('#selector', this) ？是否有此类选择的任何文档？

# sql - sql server中的加权标准偏差没有聚合错误

> ID：10947180
> 
> 赞同：4
> 
> 时间：2012-06-08T10:31:25.820
> 
> 标签：sql, sql-server, math, statistics

在计算加权平方和偏差时重做加权平均值（已在另一列中）会导致错误“无法对包含聚合或子查询的表达式执行聚合函数”。

```
SQRT(SUM(wt.value*SQUARE(out1.value-(SUM(ISNULL(out1.value,0)*wt.value)/SUM(wt.value))))
    / (((COUNT(wt.value)-1)*SUM(wt.value))/(COUNT(wt.value)))) as wsdevInc0 
```

您能否建议如何在 SQL 中计算加权标准偏差，而不是在查询层次结构中添加另一个级别的“SELECT”（并且可能会复制数据的选择）？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-08-30T20:39:56.207

我刚刚遇到了同样的问题和错误消息。解决方法是重写加权标准差公式。

总体方差公式，使用 <> 表示平均值，也适用于加权平均值，是：

```
variance = <(x - <x>)^2> 
```

此表单包含嵌入在另一个聚合函数中的聚合函数，因此会出现 SQL 错误消息。

解决方案是在没有嵌套聚合的情况下重写公式：

```
variance = <x^2> - <x>^2 
```

这直接乘以前面的公式，并注意`<x<x>> = <x><x>`.

标准差就是方差的平方根，所以 SQL 变成：

```
SQRT( SUM(w*SQUARE(x))/SUM(w) - SQUARE(SUM(w*x)/SUM(w)) ) 
```

其中`w`是权重，`x`是统计变量。

上述公式适用于人口数据集。对于样本数据集，将上述 SQL 值乘以

```
SQRT( COUNT(*)/(COUNT(*)-1) ) 
```

# eclipse - 在 eclipse 中调试

> ID：10947184
> 
> 赞同：0
> 
> 时间：2012-06-08T10:31:33.780
> 
> 标签：eclipse, debugging

想了解eclipse中完整的调试过程。深入了解eclipse的调试过程，哪本书或教程好？请指教。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T10:40:24.433

帮助/帮助内容菜单项打开内部 Eclipse 帮助。您可以从`Java development user guide/Tasks/Running and Debugging`部分和`C/C++ development user guide/Tasks/Running and debugging projects`部分开始。

对于插件开发，有一个`Plug-in Development Environment/Reference/Launchers`部分。

# scala - 斯卡拉。蚀。SBT 在模式匹配上崩溃，什么也不说。SBT错误？

> ID：10947186
> 
> 赞同：0
> 
> 时间：2012-06-08T10:31:34.380
> 
> 标签：scala, pattern-matching, sbt

对不起，很长的消息 - 希望，你会读到它。我开始学习 Scala 课程。它是 FTP 服务器。它使用模式匹配进行命令识别。我在 Eclipse 中编写代码。我认为，SBT 有一个错误，但我不知道从哪里说。

说明：编译时间长。编译后IDE中没有任何错误。但是“问题”面板中有下一行：

> SBT 构建器在编译您的项目时崩溃。这是 Scala 编译器或 SBT 中的错误。检查错误日志以了解详细信息。错误消息是：ch.epfl.lamp.fjbg.JCode$OffsetTooBigException: offset too big to fit in 16 bits: 38838 FTPDaemon Unknown Scala Problem

但程序启动并运行。运行时的下一个错误：

> java.lang.ClassLoader.defineClass(ClassLoader.java:787) 在 java.security.SecureClassLoader.defineClass 的线程“主”java.lang.ClassFormatError 中的异常：在 java.lang.ClassLoader.defineClass1(Native Method) 的截断类文件(SecureClassLoader.java:142) 在 java.net.URLClassLoader.defineClass(URLClassLoader.java:447) 在 java.net.URLClassLoader.access$100(URLClassLoader.java:71) 在 java.net.URLClassLoader$1.run(URLClassLoader. java:361) 在 java.net.URLClassLoader$1.run(URLClassLoader.java:355) 在 java.security.AccessController.doPrivileged(Native Method) 在 java.net.URLClassLoader.findClass(URLClassLoader.java:354) 在 java. lang.ClassLoader.loadClass(ClassLoader.java:423) 在 sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:308) 在 java.lang.ClassLoader。loadClass(ClassLoader.java:356) at org.egslava.ftp.ControlConnection.(ControlConnection.scala:14) at org.egslava.ftp.Main$.main(Main.scala:38) at org.egslava.ftp.Main .main(Main.scala)

当我执行 new ControlConnection().start(); 时显示此错误 ControlConnection 使用变量 currentState（指向抽象类 FtpState 的指针）。当前状态可能是 DoLogin 类或 WaitForCommandsState 类的实例。

WaitForCommands 包含下一个代码块：

```
message match{  
case owner.Noop() => "200 NOOP ok\r\n";     
case owner.User(_) => "530 Can't change from guest user\r\n";   
case owner.Pass(_) => "230 Already logged in\r\n";  
case owner.Pasv() => pasv() + "\r\n";   case owner.List() => list() + "\r\n";   
case "condition" => "error";    
case owner.Nlst() => nlst() + "\r\n";   
case owner.TypeCMD() => ""//"200 Switching to binary mode\r\n";
case "PWD" => "257 \"" + currentDirectory + "\"\r\n";   
case "SITE HELP" => "200-\r\n200\r\n";  
case owner.Cwd(path) => "250 Directory successfuly changed\r\n";
case "condition2" => "error2"   
case unrecognizedCommand => "500 Unrecognized command " + unrecognizedCommand + "\r\n"; 
} 
```

如果我评论字符串（任何）： case "condition" => "error";
或者 case "condition2" => "error2"
错误就会消失。

它是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T10:57:39.027

用于编译模式匹配的算法将在过大的 case 语句上失败，因为生成的字节码长于 JVM 类允许的最大值。据我了解，这将在 Scala 2.10 中修复。

# c# - 我应该使用 ViewModel 中的 AutoMapper 来建模对象吗

> ID：10947188
> 
> 赞同：2
> 
> 时间：2012-06-08T10:31:55.653
> 
> 标签：c#, asp.net-mvc, model, viewmodel, automapper

我想在视图模型中进行所有输入验证。

当访问数据库时，必须将视图模型数据复制到发送到数据库的模型中。

我担心数据可能会丢失，因为：

*   Automapper 在某些情况下设置错误，因此属性不会复制到模型中
*   或者 Automapper 只是不适合所有场景，可能太复杂的 ViewModel

我的担忧是合理的还是我应该不在乎？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T10:36:18.460

Automapper 在这种情况下完全没问题，我将它广泛用于此目的。如果您担心数据丢失，您应该不使用模型本身的数据注释验证来确保在持久化或调用其他服务之前拥有所需的数据。

此外，使用 Automapper 或仅手动代码映射完全确保您不会错过任何内容的唯一真正方法是一组好的单元测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T10:40:08.800

> 我担心数据可能会丢失，因为： Automapper 在某些情况下设置错误，因此属性不会复制到模型中 或者 Automapper 不适合每种情况，可能太复杂 ViewModels
> 
> 我认为您不太可能丢失数据。对于复杂的视图模型，您可以选择手动设置 Automapper 不会复制的特定属性。正如@feanz 所建议的，好的单元测试将为您提供所需的保证。**

# javascript - 对于 javascript 调用 api“gapi.auth.authorize”用于谷歌分析没有被执行。

> ID：10947191
> 
> 赞同：5
> 
> 时间：2012-06-08T10:32:00.500
> 
> 标签：javascript, google-analytics-api

我一直在尝试将 Google Analytics Core Reporting API 与 JavaScript 一起使用。我是新手，我试图使用谷歌为[core_reporting_api_v3](https://code.google.com/p/google-api-javascript-client/source/browse/#hg/samples/analytics/v3)提供的示例代码。但在`core_reporting_api_v3.html`文件运行后，它会调用`auth_util.js`.

来自 auth_utils.js 的代码：

```
function checkAuth() 
{
    gapi.auth.authorize({client_id: clientId, scope: scopes}, handleAuthResult);
}

function handleAuthResult(authResult) 
{
    alert("made it");
    if (authResult) 
    {
        gapi.client.load('analytics', 'v3', handleAuthorized);
    } 
    else 
    {
        handleUnAuthorized();
    } 
```

在函数中，使用客户端 ID、范围、立即数（已尝试：true/false）和回调函数`checkAuth()`调用 google api 。`gapi.auth.authorize`它应该会弹出一个授权窗口进行用户授权。之后调用回调函数。但是这个弹出窗口永远不会出现。请帮我解决这个问题，我不明白问题所在。有人可能认为问题出在凭据上，但我使用 python 使用相同的凭据并成功获得了结果。有什么方法可以跟踪浏览器中的进程，例如：正在进行什么调用以及进程在哪里卡住了？是否有任何教程可以`gapi.auth.authorize`在 javascript 中以原始形式将此调用编写为 REST API？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T05:13:15.027

我有一个类似的问题，所以修改了样本以适应。包含的顺序似乎也影响了它。这对我有用：

1.  在 google API 控制台中 - https://code.google.com/apis/console -
2.  设置新项目，保存客户端密钥和 API 密钥。
3.  将回调 URI 设置为调用文件。
4.  在“服务”下打开分析 API、谷歌云存储和预测 API。在此之后它开始 Authing OK。

这是我使用的对我有用的代码。

在调用页面中 - 在控制台中保存为 RedirectURI：

```
<script language="javascript">
    //  PURPOSE:    Load in ClientID and API key dynamically
    var cMsg;
    var cStatus     =   '';
    var clientId    =   '<?php echo $authClientID; ?>';
    var apiKey      =   '<?php echo $authDevKey; ?>';
    var scopes      =   'https://www.googleapis.com/auth/analytics.readonly';
    var scope       =   'https://www.google.com/analytics/feeds';
    var profileId   =   '';
</script> 
<!-- CORE API JS --> 
<script src="js/hello_analytics_api_v3_auth.js"></script> 
<script src="js/hello_analytics_api_v3.js"></script> 
<!-- Load the Client Library. Use the onload parameter to specify a callback function --> 
<script src="https://apis.google.com/js/client.js?onload=handleClientLoad"></script> 

Here is the code i've used to get around it Saved in hello_analytics_api_v3_auth.js:

    function handleClientLoad() {
        gapi.client.setApiKey(apiKey);
        window.setTimeout(checkAuth,1);
    }

    //  3\. Check if the user has Authenticated and Authorized
    function checkAuth() {
        // Call the Google Accounts Service to determine the current user's auth status.
        // Pass the response to the handleAuthResult callback function
        gapi.auth.authorize({client_id: clientId, scope: scopes, immediate: true}, handleAuthResult);

    }
    //  4\. Update the UI based on the user's authorization status
    function handleAuthResult(authResult) {
      if (authResult) {
        // The user has authorized access
        // Load the Analytics Client. This function is defined in the next section.
        loadAnalyticsClient();
      } else {
        // User has not Authenticated and Authorized
        handleUnAuthorized();
      }
    }
    //  3\. Create An Analytics Service Object
    function loadAnalyticsClient() {
      // Load the Analytics client and set handleAuthorized as the callback function
      gapi.client.load('analytics', 'v3', handleAuthorized);
    } 
```

希望它可以帮助您解决您的问题。-乔尔

# c# - ASP.NET 图表自定义处理程序

> ID：10947193
> 
> 赞同：0
> 
> 时间：2012-06-08T10:32:00.733
> 
> 标签：c#, asp.net, azure, azure-storage, asp.net-charts

在我的 Web 应用程序是“本地”解决方案之前，我使用“标准”asp.net 图表控件和磁盘存储模式。像这样 ：

```
<asp:Chart ID="AssetDistChart" runat="server" BackColor="Transparent" 
    Width="250px" Height="350px" ImageStorageMode="UseImageLocation" ImageLocation="~/files/categories_#SEQ(30,20)"> ... 
```

有了这个，我所有的图表图片都是在文件夹/文件中生成的，名称为 categories_XXX ......而且效果很好。

现在，我需要将我的解决方案转移到 Azure 平台，并且在磁盘上存储图表图像不再适合我。所以我创建了自己的图表处理程序，它从 Blob 存储中保存/加载图表图像。处理程序如下：

```
public class ChartImageHandler : IChartStorageHandler
    {
        ...

        public void Delete(string key)
        {
            CloudBlob csv = chartContainer.GetBlobReference(key);
            csv.Delete();
        }

        public bool Exists(string key)
        {
            bool exists = true;
            WebClient webClient = new WebClient();
            try
            {
                using (Stream stream = webClient.OpenRead(key))
                { }
            }
            catch (WebException)
            {
                exists = false;
            }
            return exists;
        }

        public byte[] Load(string key)
        {
            CloudBlob image = chartContainer.GetBlobReference(key);
            byte[] imageArray;
            try
            {
                imageArray = image.DownloadByteArray();
            }
            catch (Exception e)
            {
                System.Threading.Thread.Sleep(1000);
                imageArray = image.DownloadByteArray();

            }
            return imageArray;
        }

        public void Save(string key, byte[] data)
        {
            CloudBlockBlob pictureBlob = chartContainer.GetBlockBlobReference(key);
            pictureBlob.UploadByteArray(data);
        }
    } 
```

另外，我的 asp.net 图表控件现在是这样的：

```
<asp:Chart ID="AssetDistChart" runat="server" BackColor="Transparent" 
    Width="250px" Height="350px" ImageStorageMode="UseHttpHandler"> 
```

我还在 web.config 中编辑了图表设置以使用这个新的处理程序。

此处理程序有效，但我的图片以通用名称保存：

图表_0.png 图表_1.png ...

我怎样才能像以前一样管理自己的文件名。我尝试添加`ImageLocation="~/files/categories_#SEQ(30,20)"`

到asp.net图表控制但没有成功。如何设置自己的名称（键）以及放置位置？在处理程序、asp.net 图表控件或声明 char 控件的代码隐藏文件中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T17:44:29.830

在上面的代码中，当您将图像存储在 Azure Blob 存储中时，您直接将其存储在容器中，因此您在访问它们时检索为

```
http://azure_storage_name.*/_containername_/chartimage_name 
```

或者，您可以创建一个文件夹类型的图表图像名称，例如 files/categories_1 和 files/categories_2 等，它们将在 Azure Blob 存储中存储为：

```
http://azure_storage_name.*/_containername_/files/categories_1
http://azure_storage_name.*/_containername_/files/categories_2 
```

要获得它，您只需在将代码保存在 Save() 函数中时更改代码：

```
string key = "files/myimage_1.jpg";
CloudBlockBlob pictureBlob = container.GetBlockBlobReference(key); 
```

因此，当您保存图像时，它将保存为您的 azure storage /container_name/files/myimage_1.jpg，您可以通过访问 Windows Azure Storage 来验证。

现在，当您阅读它时，只需阅读密钥，您将获得预期的文件名。你可能需要修改你的代码以获得你想要的方式，但我已经给你一个想法如何去做。

# unit-testing - 如果有断言错误，Junit 报告不会生成报告

> ID：10947194
> 
> 赞同：5
> 
> 时间：2012-06-08T10:32:01.613
> 
> 标签：unit-testing, ant, junit, reporting, automated-tests

如果有断言错误，Junit 报告不生成报告要测试的类

```
public class Math {

    static public int add(int a, int b) {

        return a + b;
    }

    static public int multiply ( int a, int b) {
        if(a==0&&b==0)
            return 0;;
        return a * b;
    }
} 
```

Junit测试类

```
import junit.framework.*;

public class TestMath extends TestCase { 

  protected void setUp() { 

    // put common setup code in here
   }

  protected void tearDown() {

    // put common cleanup code in here
  }

  public void testAdd() {
    int num1 = 3;
    int num2 = 2;
    int total = 5;
    int sum = 0;
    sum = Math.add(num1, num2);
    assertEquals(sum, total);
  }

  public void testMulitply() {

    int num1 = 3; 
    int num2 = 7; 
    int total = 21;
    int sum = 0;
    sum = Math.multiply(num1, num2);
    assertEquals("Problem with multiply", sum, total);

    num1 = 5;
    num2 = 4;
    total = 20;
    sum = Math.multiply(num1, num2);
    assertEquals("Problem with multiply", sum, total);

  }
  public void testv(){
     Assert.assertEquals(1, Math.multiply(0, 0));
  }

} 
```

我正在使用 junit 报告来生成报告

问题是如果断言失败，报告不会生成，Ant Build 就会失败。我的假设是，如果断言失败，则应该在失败中列出，而不是在构建结果中列出错误。

蚂蚁 XML

```
<project name="SampleJUnitTests" default="dist" basedir=".">
    <description>
        Sample JUnit Tests
    </description>
  <!-- set global properties for this build -->

  <property name="project_name" value="junitSamples"/>
  <property name="src" location="src"/>
  <property name="build" location="bin"/>
  <property name="dist"  location="dist"/>
  <property name="lib"  location="lib"/>
  <property name="res"  location="res"/>
  <property name="reports" location="reports"/>

  <!-- the names of various distributable files -->
  <property name="jar_name" value="${project_name}.jar"/>
  <property name="war_name" value="${project_name}.war"/>

    <!-- top level targets -->

  <target name="compile" depends="init" description="compile the source code " >
        <javac srcdir="${src}" destdir="${build}">  
            <classpath>
                <fileset dir="lib">
                    <include name="**/*.jar"/>
                </fileset>
            </classpath>
        </javac>

  </target>

  <target name="dist" depends="compile" description="generate the distributable files " >

    <!-- Put everything in ${build} into the MyProject-${DSTAMP}.jar file -->
    <jar jarfile="${dist}/${jar_name}" basedir="${build}"/>

  </target>

  <target name="clean"
        description="clean up" >
    <!-- Delete the ${build} and ${dist} directory trees -->
    <delete dir="${build}"/>
    <delete dir="${dist}"/>
    <delete dir="${reports}"/>
  </target>

    <target name="run-tests" depends="compile" description="run your test suite" >
        <junit printsummary="yes" haltonfailure="yes" showoutput="yes" >
            <classpath>
                <pathelement path="${build}"/>
                <fileset dir="lib">
                    <include name="**/*.jar"/>
                </fileset>
            </classpath>            

          <batchtest fork="yes" todir="${reports}/raw/">
            <formatter type="xml"/>
            <fileset dir="${src}">
              <include name="**/*Test*.java"/>
            </fileset>
          </batchtest>
        </junit>    
    </target>

  <target name ="test" depends="run-tests">
        <junitreport todir="${reports}">
          <fileset dir="${reports}/raw/">
            <include name="TEST-*.xml"/>
          </fileset>
          <report format="frames" todir="${reports}/html/"/>
        </junitreport>
  </target>

  <target name ="run" depends="" description="if this project can be run, run it" >

  </target>

    <!-- supporting targets -->

     <target name="init" description="initialize the build environment" >
    <!-- Create the time stamp -->
    <tstamp/>
    <!-- Create directory structures -->
    <mkdir dir="${build}"/>
    <mkdir dir="${lib}"/>
    <mkdir dir="${dist}/lib"/>
    <mkdir dir="${reports}"/>
    <mkdir dir="${reports}/raw/"/>
    <mkdir dir="${reports}/html/"/>
  </target>

  <target name="all" depends="clean, test">

  </target>

</project> 
```

我的要求是，如果断言失败，它应该显示在失败中？我需要做什么 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T15:54:37.480

Tharani 在评论中已经回答了这个问题......回答它以使其无人回答......

更改 haltonfailure="no" 的值，它将像加急一样工作...

# citrix - Citrix 应用程序能否访问客户端 localhost

> ID：10947195
> 
> 赞同：0
> 
> 时间：2012-06-08T10:32:15.383
> 
> 标签：citrix

我有几个与 citrix 应用程序工作有关的问题。首先我解释一下场景......

1.  考虑我有 2 个应用程序安装在 Citrix 服务器中

    ```
    APP "A"  - Which is accessible to the clients through citrix connection(published)

    APP "B"  -  Which is installed in Citrix server(not published) and will act as a mediator for citrix app ("A") and clients local machine 
    ```

这是场景，

*   在应用程序“A”中，我们有链接将尝试通过应用程序“B”联系客户本地应用程序和本地主机，这意味着“B”将充当中介（出于某些验证和安全目的，我们使用此“B”） citrix 应用程序和客户端本地应用程序。表示“A”将向“B”发送请求，“B”负责联系客户本地应用程序，在这种情况下，如果“B”出现问题，“B”必须显示消息框用户。

现在我的问题是：

1.  由于“B”没有发布，用户可以看到APP“B”的消息框吗？？？

2.  如果我想完成问题 1，我想做什么？

3.  如果我在应用程序“B”中引用“http://localhost //something”，它将指向哪个 IIS，“客户端本地计算机 localhost”或“Citrix 服务器 localhost”。？？

4.  用户可以访问除APP“A”以外的任何其他应用程序吗？？

任何帮助表示赞赏，在此先感谢

马杜米

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T14:50:58.930

1.  由于应用程序是无缝发布的，因此用户将看不到该终端会话中运行的其他应用程序的任何窗口。除非发布的应用程序显式调用另一个应用程序，否则这是正确的。例如，如果我在 IE 中单击 mailto 链接并安装了 Outlook，它将启动并无缝地向用户显示。

2.  应用程序“B”有 GUI 还是只是一个进程？如果它只是一个过程，我会创建一个批处理文件，在后台为每个用户启动它。

3.  Citrix 服务器的本地主机

4.  不完全确定你在这里问什么。

# sql-server - 使用 T-SQL 删除字段中的所有撇号

> ID：10947196
> 
> 赞同：4
> 
> 时间：2012-06-08T10:32:26.660
> 
> 标签：sql-server, tsql

我在数据库中有一个值，它包含一些撇号，例如............

> 美好的一天。他真高兴。

结果一定是......

> 美好的一天。他真高兴。

我可以使用什么 T-SQL 语句来删除撇号？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-08T10:36:48.290

使用[replace](http://msdn.microsoft.com/en-us/library/ms186862.aspx)，这是一个例子：

```
declare @value varchar(40)
select @value = 'It''s a good day. He''s so happy.'

select @value, replace(@value, '''', '') 
```

* * *

如果要更新表中的列，请执行以下操作：

```
update table
set column = replace(column, '''', '') 
```

* * *

它将所有出现的指定字符串值（在您的情况下为撇号）替换为另一个字符串值（在您的情况下为空字符串）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-08T10:36:57.230

采用：

```
REPLACE ( string_expression , string_pattern , string_replacement ) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T10:40:31.277

检查这个

```
Replace(ColumnName, '''', '') 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-08-16T13:31:38.953

[来自MSDN](https://msdn.microsoft.com/en-GB/library/ms186862.aspx)提供的信息的答案：

```
REPLACE ( string_expression , string_pattern , string_replacement ) 
```

> *string_expression*
> 是要搜索的字符串表达式。string_expression 可以是字符或二进制数据类型。
> 
> *string_pattern*
> 是要查找的子字符串。string_pattern 可以是字符或二进制数据类型。string_pattern 不能为空字符串 ('')，并且不得超过适合页面的最大字节数。
> 
> *string_replacement*
> 是替换字符串。string_replacement 可以是字符或二进制数据类型。

例子：

```
REPLACE ( 'Hello SQL' , 'SQL' , 'World' ) 

/* Output = "Hello World" */ 
```

# mysql - 从 MySQL 中的信息模式获取索引方向

> ID：10947197
> 
> 赞同：4
> 
> 时间：2012-06-08T10:32:27.177
> 
> 标签：mysql, indexing, information-schema

假设我按降序创建索引

```
CREATE INDEX `MyTable.MyIndex`
USING BTREE ON `MyTable` (`DateFrom` DESC, `DateTo` DESC); 
```

我想从中获取有关它的信息`information_schema`。

根据[文档](http://dev.mysql.com/doc/refman/5.5/en/statistics-table.html) `information_schema.statistics`表完成这项工作。但是我找不到有关索引列顺序的任何信息（即`ASC`或`DESC`）。

我怎样才能找到这些信息？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-08T10:43:18.823

### 对于 MySQL 版本 < 8

表格统计信息在文档中的哪里写？

此外，我在[创建索引文档](http://dev.mysql.com/doc/refman/5.5/en/create-index.html)中发现：

> index_col_name 规范可以以 ASC 或 DESC 结尾。
> 这些关键字被允许用于指定升序或降序索引值存储的未来扩展。
> 目前，它们被解析但被忽略；索引值始终按升序存储。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T10:42:55.953

试试这个查询....

```
SELECT   non_unique,
         index_name,
         seq_in_index,
         column_name,
         collation,
         cardinality,
         sub_part,
         packed,
         nullable,
         index_type,
         comment
FROM     information_schema.STATISTICS
WHERE    table_schema = schema()
AND      table_name   = 'MyTable'
ORDER BY index_name,
         seq_in_index 
```

# java - 播放应用程序上不可能出现 NullPointerException

> ID：10947208
> 
> 赞同：1
> 
> 时间：2012-06-08T10:33:21.763
> 
> 标签：java, playframework, nullpointerexception

我遇到了一个非常奇怪的 NPE 异常。这是有问题的代码：

```
 private static int countRecurse(File file) {
        Preconditions.checkNotNull(file, "file argument");
        int entries = 0;
        for (File entry : file.listFiles()) {    //NPE on this line
            if (entry != null) {
                if (entry.isDirectory())
                    entries += countRecurse(entry);
                else
                    entries++;
            }

        }
        return entries;
    } 
```

我在注释行收到 NPE 异常。这是我得到的堆栈跟踪：

```
java.lang.NullPointerException
        at controllers.StudyPreparation.countRecurse(StudyPreparation.java:103)
        at controllers.StudyPreparation.readDicomFiles(StudyPreparation.java:95)
        at controllers.StudyPreparation.access$100(StudyPreparation.java:30)
        at controllers.StudyPreparation$1.onReady(StudyPreparation.java:77)
        at play.core.j.JavaWebSocket$$anonfun$webSocketWrapper$1$$anonfun$apply$1.apply(JavaWebSocket.scala:48)
        at play.core.j.JavaWebSocket$$anonfun$webSocketWrapper$1$$anonfun$apply$ 
```

该代码是 Play 框架应用程序的一部分，但我认为这不是问题的一部分……因为我已经测试了文件是否为空，所以它不能为空。如果 listFiles() 方法内部发生错误，我希望在堆栈跟踪中看到它。

那么可能是什么问题呢？

**编辑：**

解决了检查文件是否为目录的问题...由于 file.listFiles() 返回 null，因此抛出 NPE。

即使没有在 javadocs 中记录，它也会返回 null，因为路径不存在。我没有检查，因为在我的开发机器上程序运行良好，问题只出现在生产服务器中，但显然与代码中的其他部分有关......

感谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T10:43:17.690

来自 file.listFiles() 的 javadoc

```
Returns an array of abstract pathnames denoting the files in the directory 
denoted by this abstract pathname. 

If this abstract pathname does not denote a directory, then this method returns 
null. ... 
```

所以`file.isDirectory()`在使用前检查是否`file.listFiles()`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-08T10:48:03.460

由于 File 不是目录，可能会发生`file.listFiles()`返回。`null`

> 如果此抽象路径名不表示目录，则此方法返回 null。否则返回一个 File 对象数组，一个对应于目录中的每个文件或目录。结果中不包括表示目录本身和目录父目录的路径名。每个生成的抽象路径名都是使用 File(File, String) 构造函数从这个抽象路径名构造的。因此，如果这个路径名是绝对的，那么每个生成的路径名都是绝对的；如果此路径名是相对的，则每个生成的路径名都将相对于同一目录。

# c# - RichTextBox 使用私有字体时行为不正确

> ID：10947209
> 
> 赞同：2
> 
> 时间：2012-06-08T10:33:23.047
> 
> 标签：c#, fonts, richtextbox

使用带有私有字体的 RichTextBox 我遇到了以下问题：我可以在文本框中使用我的私有字体编写文本，但是当我选择它时（在我的程序中需要它）文本框返回 MS Sans Serif 作为选择字体。

```
PrivateFontCollection pfc = new PrivateFontCollection(); // font collection
pfc.AddFontFile("..\\..\\Fonts\\infotra1.ttf"); // load font
rtb.Font = new Font(pfc.Families[0], 10.0f, FontStyle.Regular);
rtb.AppendText("lorem ipsum bla bla bla\n"); 
```

现在，文本已正确附加到文本框中。

> 私人无效rtb_SelectionChanged（对象发件人，EventArgs e）{ var f = rtb.SelectionFont; }

如果我选择文本并检查 rtb.SelectionFont 它会返回 MS Sans Serif。

我知道系统在找不到我的字体时会返回 MS Sans Serif。我是否应该以某种方式告诉 RichTextBox 我也在使用我的私人字体？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T12:13:38.300

它可能按预期工作，但您需要查看`f.OriginalFontName`而不是`f.Name`意识到它，因为您使用的是私有字体。

查看字体文档（[http://msdn.microsoft.com/en-us/library/164w6x6z](http://msdn.microsoft.com/en-us/library/164w6x6z)）我发现了这个：

> 如果 familyName 参数指定的字体未安装在运行应用程序的机器上或不受支持，**则将替换为 Microsoft Sans Serif**。

# uialertview - alertButton "OK" 切换到另一个 ViewController

> ID：10947210
> 
> 赞同：0
> 
> 时间：2012-06-08T10:33:32.890
> 
> 标签：uialertview, ios5.1

在我的应用程序中，我拍摄了一张保存到相机胶卷的照片。现在当图片被保存时，会有一个警告告诉用户，图像已成功保存，并有一个 OK 按钮。现在我想在警报框中按下 OK 按钮后切换到另一个视图控制器。如何才能做到这一点？多谢。

它的 Xcode 4.3 / iOS 5.1

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T10:46:20.437

UIAlertViewDelegate 是您解决问题的答案。使用方法

*   (void)alertView:(UIAlertView *)alertView didDismissWithButtonIndex:(NSInteger)buttonIndex

如果您只有一个按钮，那么对于 buttonIndex 0，您应该推送另一个视图。但是请确保将 alertview 的委托设置为 self ，你会没事的。

# python - Pycharm - 更改导航窗格的主题？

> ID：10947214
> 
> 赞同：1
> 
> 时间：2012-06-08T10:33:50.690
> 
> 标签：python, pycharm

我为 Pycharm 选择了一个深色主题，以便在编码时更容易看到。然而，左侧的导航窗格仍然是亮白色，分散了编码的注意力。

有没有办法改变那部分的主题？我在设置中找不到任何东西。

非常感谢

![在此处输入图像描述](../Images/98500cc8ce1c0de5de8ba2ca3fa5c266.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-08T10:39:19.837

不更改 Java Look&Feel 是不可能开箱即用的，有一个[开放的功能请求使其可配置](http://youtrack.jetbrains.com/issue/IDEA-62247)，并且一个用户贡献了一个使背景变暗[的插件。](http://plugins.intellij.net/plugin/index?pr=idea&pluginId=7055)

# objective-c - 我们什么时候在 Objective-C 中使用“->”？

> ID：10947218
> 
> 赞同：2
> 
> 时间：2012-06-08T10:33:59.587
> 
> 标签：objective-c, ios

有时我确实看到

```
self->someData = d; 
```

在 Objective-C 代码中。有人可以解释什么时候使用它吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-08T10:38:46.323

访问未列为属性的实例的变量。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-08T10:37:57.803

此语法可用于直接访问对象的公共实例变量。（它不适用于私有变量。）您可能应该创建一个属性并使用它，或者使用键值编码。

# opengl - 最小化后如何恢复OpenGL缓冲区？

> ID：10947220
> 
> 赞同：0
> 
> 时间：2012-06-08T10:34:10.177
> 
> 标签：opengl, windows-7, buffer, sdl

假设我制作了一个使用 SDL + OpenGL 来显示图形的应用程序。场景不是动态的，所以我偶尔会绘制和交换缓冲区。

我观察到，在 Windows 7 下最小化并恢复窗口后，显示的内容被破坏并显示随机内容。有什么方法可以在不重复上次渲染的情况下恢复它？

我正在使用带有 Intel G45/G43 Express 芯片组的 Windows 7 Proffesional SP1。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T11:50:54.357

您可以将其复制到纹理（使用`glCopyTexSubImage2D`），然后在需要显示内容时渲染该纹理。或者您可以通过 FBO 渲染到纹理开始。

但是没有自动的方法来恢复图像数据。真的，当它恢复时重新渲染显示会更容易。如果窗口与显示重叠，您可能会遇到同样的问题。

# android - 如何在 Android 应用程序中设置图标

> ID：10947223
> 
> 赞同：0
> 
> 时间：2012-06-08T10:34:14.407
> 
> 标签：android, icons

> **可能重复：**
> [图标/文本按钮的网格布局](https://stackoverflow.com/questions/5046320/a-grid-layout-of-icon-text-buttons)

我正在制作一个有 9 个图标的 Android 应用程序，我想将它们排列成 3*3 行和列。如何做到这一点，它可以在任何 Android 手机上填满整个屏幕，而无需担心尺寸。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T10:39:29.907

干得好

您将需要 GridView 。

```
<?xml version="1.0" encoding="utf-8"?>
<GridView xmlns:android="http://schemas.android.com/apk/res/android" 
    android:id="@+id/gridview"
    android:layout_width="fill_parent" 
    android:layout_height="fill_parent"
    android:columnWidth="90dp"
    android:numColumns="3"
    android:verticalSpacing="10dp"
    android:horizontalSpacing="10dp"
    android:stretchMode="columnWidth"
    android:gravity="center"
/> 
```

您的活动将如下所示。

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    GridView gridview = (GridView) findViewById(R.id.gridview);
    gridview.setAdapter(new ImageAdapter(this));

    gridview.setOnItemClickListener(new OnItemClickListener() {
        public void onItemClick(AdapterView<?> parent, View v, int position, long id) {
            Toast.makeText(HelloGridView.this, "" + position, Toast.LENGTH_SHORT).show();
        }
    });
} 
```

ImageAdapter 将如下所示。

```
public class ImageAdapter extends BaseAdapter {
    private Context mContext;

    public ImageAdapter(Context c) {
        mContext = c;
    }

    public int getCount() {
        return mThumbIds.length;
    }

    public Object getItem(int position) {
        return null;
    }

    public long getItemId(int position) {
        return 0;
    }

    // create a new ImageView for each item referenced by the Adapter
    public View getView(int position, View convertView, ViewGroup parent) {
        ImageView imageView;
        if (convertView == null) {  // if it's not recycled, initialize some attributes
            imageView = new ImageView(mContext);
            imageView.setLayoutParams(new GridView.LayoutParams(85, 85));
            imageView.setScaleType(ImageView.ScaleType.CENTER_CROP);
            imageView.setPadding(8, 8, 8, 8);
        } else {
            imageView = (ImageView) convertView;
        }

        imageView.setImageResource(mThumbIds[position]);
        return imageView;
    }

    // references to our images
    private Integer[] mThumbIds = {
            R.drawable.sample_2, R.drawable.sample_3,
            R.drawable.sample_4, R.drawable.sample_5,
            R.drawable.sample_6, R.drawable.sample_7,
            R.drawable.sample_0, R.drawable.sample_1,
            R.drawable.sample_2, R.drawable.sample_3,
            R.drawable.sample_4, R.drawable.sample_5,
            R.drawable.sample_6, R.drawable.sample_7,
            R.drawable.sample_0, R.drawable.sample_1,
            R.drawable.sample_2, R.drawable.sample_3,
            R.drawable.sample_4, R.drawable.sample_5,
            R.drawable.sample_6, R.drawable.sample_7
    };
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T10:58:59.277

或者你可以使用LinearLayouts：一个主要的垂直LinearLayout包含三个水平LinearLayouts，每个包含三个图标。

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
 android:background="#FFFFFF" 
 android:orientation="vertical" 
 android:layout_height="match_parent" 
 android:layout_width="match_parent">

<LinearLayout
    android:id="@+id/linearLayout1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal"
    >
<Button 
       android:id="@+id/icon_1"
       android:background="@drawable/icon_1" 
       android:layout_height="wrap_content" 
       android:layout_width="wrap_content" 
       android:textSize="15sp" 
       android:layout_weight="1" 
       android:text="Icon 1" 
       ></Button>
<Button 
       android:id="@+id/icon_2"
       android:background="@drawable/icon_2" 
       android:layout_height="wrap_content" 
       android:layout_width="wrap_content" 
       android:textSize="15sp" 
       android:layout_weight="1" 
       android:text="Icon 2" 
       ></Button>
<Button 
       android:id="@+id/icon_3"
       android:background="@drawable/icon_3" 
       android:layout_height="wrap_content" 
       android:layout_width="wrap_content" 
       android:textSize="15sp" 
       android:layout_weight="1" 
       android:text="Icon 3" 
       ></Button>
</LinearLayout>
<LinearLayout
    android:id="@+id/linearLayout2"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal"
    >
<Button 
       android:id="@+id/icon_4"
       android:background="@drawable/icon_4" 
       android:layout_height="wrap_content" 
       android:layout_width="wrap_content" 
       android:textSize="15sp" 
       android:layout_weight="1" 
       android:text="Icon 4" 
       ></Button>
 <Button 
       android:id="@+id/icon_5"
       android:background="@drawable/icon_5" 
       android:layout_height="wrap_content" 
       android:layout_width="wrap_content" 
       android:textSize="15sp" 
       android:layout_weight="1"
       android:text="Icon 5" 
       ></Button>
 <Button 
       android:id="@+id/icon_6"
       android:background="@drawable/icon_6" 
       android:layout_height="wrap_content" 
       android:layout_width="wrap_content" 
       android:textSize="15sp" 
       android:layout_weight="1" 
       android:text="Icon 6" 
       ></Button>
</LinearLayout>
<LinearLayout
    android:id="@+id/linearLayout3"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal"
    >
<Button 
       android:id="@+id/icon_7"
       android:background="@drawable/icon_7" 
       android:layout_height="wrap_content" 
       android:layout_width="wrap_content" 
       android:textSize="15sp" 
       android:layout_weight="1" 
       android:text="Icon 7" 
       ></Button>
 <Button 
       android:id="@+id/icon_8"
       android:background="@drawable/icon_8" 
       android:layout_height="wrap_content" 
       android:layout_width="wrap_content" 
       android:textSize="15sp" 
       android:layout_weight="1" 
       android:text="Icon 8" 
       ></Button>
 <Button 
       android:id="@+id/icon_9"
       android:background="@drawable/icon_9" 
       android:layout_height="wrap_content" 
       android:layout_width="wrap_content" 
       android:textSize="15sp" 
       android:layout_weight="1" 
       android:text="Icon 9" 
       ></Button>
</LinearLayout>
</LinearLayout> 
```

结果：

![屏幕图标](../Images/90c5340fbb0b49e8ec45e84308c0034c.png)

# string - 按数字对文件名列表进行排序

> ID：10947226
> 
> 赞同：1
> 
> 时间：2012-06-08T10:34:31.860
> 
> 标签：string, sorting, python, numeric

有没有办法（如 php 的 natsort）对由文件名组成的列表进行排序，这些文件名仅在一个数字上不同，并且按 glob 未排序返回，例如：

```
test1.dat
test7.dat
.
.
test10.dat
test3.dat 
```

当我进行天真的排序时，结果是

```
test1.dat
test10.dat
test2.dat
.
.
. 
```

因为 1 出现在 2 之前 :) 我可以用 for 循环和范围（或带范围的生成器）构造一些东西，但这感觉有点不合常理......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-08T10:36:05.530

```
sorted(glob.glob('*.dat'), key=lambda x: int(x.split('.')[0][4:])) 
```

这将获取文件名，去除扩展名并获取第四个位置之后字符的整数值。适用于“testXXX.dat”，其中 XXX 是任意长度的整数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T10:41:14.707

使用 re 的解决方案（未经测试）：

```
prefix_number=re.compile(r'(.*)(\d+)\.dat$')
def sortkey(ss):
    match=prefix_number.match(ss)
    if(match):
       return (match.group(0),int(match.group(1))
    else:
       return (ss,)

sorted(glob.iglob('*.dat'), key=sortkey ) 
```

此解决方案通过按前缀（例如“test”）和整数（例如 1）拆分文件名来工作。然后它首先按前缀排序，然后按整数排序。当然，缺点是你需要`re`一个稍微复杂一点的解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T10:47:45.130

eumiro的回答很好。我只是想添加一个更灵活的方法：

```
def natural_sort(data):
    convert = lambda text: int(text) if text.isdigit() else text.lower()
    alphanum_key = lambda key: [convert(c) for c in re.split('([0-9]+)', key)]
    return sorted(data, key=alphanum_key) 
```

# php - PHPMailer 附件类型和大小限制

> ID：10947228
> 
> 赞同：1
> 
> 时间：2012-06-08T10:34:46.180
> 
> 标签：php, phpmailer

我有一个表格，我正在使用 PHPMailer 将该表格中的数据发送到我的电子邮件。用户也可以发送附件，但我有一个问题：如何让 PHPMailer 拒绝大于 2Mb 的附件并只允许 iamge 附件（不允许其他类型的文档）？

这是我使用 PHPMailer 来增加电子邮件附件的代码：

```
foreach(array_keys($_FILES['fileAttach']['name']) as $key) {

   $source = $_FILES['fileAttach']['tmp_name'][$key]; 
   $filename = $_FILES['fileAttach']['name'][$key]; 

   $mail->AddAttachment($source, $filename);

} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-08T10:37:57.200

您可以使用检查文件大小[`filesize()`](http://de.php.net/manual/en/function.filesize.php)和使用类型[`mime_content_type()`](http://php.net/manual/en/function.mime-content-type.php)。

生成的代码可能如下所示：

```
$maxsize = 2 * 1024 * 1024; // 2 MB
$types = array('image/png', 'image/jpeg', 'image/gif'); // allowed mime-types

if(filesize($filename) < $maxsize && in_array(mime_content_type($filename),$types)){
  $mail->AddAttachment($source, $filename);
} 
```

**编辑：** PHPMailer 没有内置的这些 chacks 可能性 - 正如您从源代码中看到的那样，它仅在添加附件时检查文件是否存在：

```
if ( !@is_file($path) ) {
  throw new phpmailerException($this->Lang('file_access') . $path, self::STOP_CONTINUE);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T12:56:20.960

使用[filesize()](http://php.net/manual/en/function.filesize.php)检查文件大小。要检查文件是否为图像，请使用[getimagesize()](http://php.net/manual/en/function.getimagesize.php)如果它不是图像则返回 false，否则它将返回一个包含 mimetype 的信息数组（如果您不想检查特定的图像类型）。

# ruby-on-rails - 禁止使用正则表达式的字符（双引号）

> ID：10947235
> 
> 赞同：1
> 
> 时间：2012-06-08T10:35:13.220
> 
> 标签：ruby-on-rails, regex

我完全是正则表达式的菜鸟。对于 Ruby on Rails 项目，我需要一个字段来允许所有字母但禁止双引号。知道如何制定吗？

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T10:37:28.600

只需使用否定字符类：

```
[^"] 
```

字符类将包含*除*双引号之外的所有字符。如果你想用你可能想要的验证一个字符串

```
^[^"]*$ 
```

匹配字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T11:28:34.283

如果您想使用[格式验证助手](http://guides.rubyonrails.org/active_record_validations_callbacks.html#format)：

```
validates :your_field, format => {
  :with => /\A[^"]+\z/,
  :message => "No quotes allowed"
} 
```

正则表达式：

`\A`从字符串的开头

`[^"]`允许任何字符，除了`"`

`+`一次或多次

`\z`到字符串的末尾

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T10:40:25.613

**你可以使用：**

```
if subject =~ /\b[[:alpha:]]+\b/i
    # Successful match
else
    # Match attempt failed
end 
```

**解释**

```
"
\\b             # Assert position at a word boundary
[[:alpha:]]    # Match a single character present in the list below
                  # A character in the POSIX character class “alpha”
   +              # Between one and unlimited times, as many times as possible, giving back as needed (greedy)
\\b             # Assert position at a word boundary
" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-08T10:42:28.730

您需要指定从开始到结束的每个字符都不能是 `"`：

```
^[^"]*$ 
```

这意味着：
`^`：匹配必须从行或字符串的开头开始；: 匹配除;
`[^"]`以外的任何字符（字母、标点符号、...）：匹配上一项零次或多次；: 匹配必须在行或字符串的末尾结束。`"`
`*`
`$`

# php - 我们如何监控 SOLR 数据获取速度？

> ID：10947238
> 
> 赞同：3
> 
> 时间：2012-06-08T10:35:22.237
> 
> 标签：php, solr

我正在使用 SOLR 搜索数据。他们有什么方法可以识别 SOLR 数据获取速度吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T13:55:02.693

如果您的意思是监控 Solr 获取数据的速度，Solr 的响应包含一个您可以使用的 QTime 属性。

[QTime 是衡量什么的？](http://lucene.472066.n3.nabble.com/What-is-QTime-a-measure-of-td495772.html)

> QTime 是请求到达（创建 SolrQueryRequest 对象时）和请求处理程序完成之间经过的时间（以毫秒为单位）。换句话说，它将告诉您执行查询需要多长时间，包括查询解析、实际搜索、分面等。

如果这能满足您的需要，我建议您阅读 Solr 用户组的以下帖子，其中讨论了监控此值的选项。

*   [监控 QTime](http://lucene.472066.n3.nabble.com/Monitor-the-QTime-td2469551.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T10:45:38.220

你可以像其他任何事情一样做：

```
$start = microtime(true);
$data = $solr->query('*');
echo (microtime(true) - $start) . 'seconds'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T18:02:06.487

您还可以安装像 New Relic 这样的服务器监控工具，它将为您提供有关 Solr 的各种统计信息。

# google-maps - 如何叠加创建的地图和坐标？

> ID：10947241
> 
> 赞同：1
> 
> 时间：2012-06-08T10:35:36.263
> 
> 标签：google-maps

我用谷歌地图创建了一条路线并将其保存在我的地图中。
同时，我用一个设备记录了 GPS 坐标。
为了分析我的设备的质量，我想在创建的地图上导入或叠加坐标。是否有可能做到这一点以及如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T10:55:12.350

您必须使用 Google Maps API 并根据您的要求构建一个小型应用程序。

没有比这更简单的方法了。

# iphone - 在不减小几何尺寸的情况下降低图像质量

> ID：10947243
> 
> 赞同：2
> 
> 时间：2012-06-08T10:35:39.623
> 
> 标签：iphone, objective-c, ipad, core-graphics, quartz-graphics

我和 UIImage 具有透明度。

我正在将 UIImage 的 PNG 表示形式上传到我的 Web 服务，该服务接受小于 800K 的数据。

所以基本上我想减小大小（不是几何的，而是物理的 IE，以字节为单位），即降低 uimage 的质量。

**请不要将我指向 Quartz 指南**

**请不要使用 UIImage 的 JPEG 表示它不支持透明度**

**请不要让图像变小然后缩放它**

我需要减少 UIImage 中的颜色任何想法如何通过 Quartz 实现它？

在我尝试之后，创建了一个上下文并绘制了图像。玩过 bytesPerRow 但仍然失败，请帮助找到解决方案！

```
size_t width = CGImageGetWidth(image.CGImage);
size_t height = CGImageGetHeight(image.CGImage);
size_t bitsPerComponent = CGImageGetBitsPerComponent(image.CGImage);
size_t bytesPerRow = CGImageGetBytesPerRow(image.CGImage);

CGColorSpaceRef colorSpace = CGImageGetColorSpace(image.CGImage);
CGContextRef ctx = CGBitmapContextCreate(NULL, // Let CG allocate it for us
                                         width,
                                         height,
                                         bitsPerComponent,
                                         bytesPerRow,
                                         colorSpace,
                                         kCGImageAlphaPremultipliedLast); // RGBA
CGColorSpaceRelease(colorSpace);
CGRect rect = CGRectMake( 0, 0, CGImageGetWidth(image.CGImage), CGImageGetHeight(image.CGImage));
CGContextDrawImage( ctx, rect, image.CGImage);

CGImageRef newImg = CGBitmapContextCreateImage(ctx);
UIImage* compressedImage = [UIImage imageWithCGImage:newImg];
CGImageRelease(newImg);

CGContextRelease(ctx); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-07T20:09:43.740

虽然 JPEG 不支持透明度，但实际上仍有 JPEG 选项。

获取当前的 PNG 并创建两个文件，一个有损 JPEG 文件，一个只有 alpha 通道的 PNG。ImageMagick 非常适合这个顺便说一句。

然后将 JPEG 加载到 UIImage 中，并将 PNG 作为掩码应用到 UIImage 中，瞧，你就有了一个透明的 JPEG。嗯，有点。

我这里没有我的实现，如果我这样做是我的客户项目的一部分，所以我不愿意分享它，但本指南将帮助您入门：http: [//jeroendeleeuw.com/post/ 33638733049/how-to-mask-images-with-core-graphics-in-ios](http://jeroendeleeuw.com/post/33638733049/how-to-mask-images-with-core-graphics-in-ios)作为参考，我的尺寸减少了 80% 左右。

祝你好运。

# jquery - wordpress 中的 filebase 插件不会加载树视图中的文件

> ID：10947244
> 
> 赞同：0
> 
> 时间：2012-06-08T10:35:49.223
> 
> 标签：jquery, wordpress

我正在使用 wp-filebase 来管理 wordpress 上的文件。问题是它不再加载文件，并且在控制台中我收到错误消息：

```
POST http://.../wp-content/plugins/filebase/wpfb-ajax.php 200 OK
a is null

f(a=null, c=createNode(parent), d=[[ul]])jquery...r=1.7.1 (riga 2)
  success(response=null)jquery....2.9.14 (riga 50)
f(b=Object { url="http://gliamicidipooh.i...-filebase/wpfb-ajax.php", isLocal=false,    global=true, altri elementi...}, f=[null, "success", Object { readyState=4, status=200, statusText="OK"}])jquery...r=1.7.1 (riga 2)
f(b=Object { url="http://gliamicidipooh.i...-filebase/wpfb-ajax.php", isLocal=false, global=true, altri elementi...}, c=[null, "success", Object { readyState=4, status=200, statusText="OK"}])jquery...r=1.7.1 (riga 2)
clone(a=200, c="OK", l=Object { text=""}, m="Date: Fri, 08 Jun 2012 ...sfer-Encoding: chunked\n")jquery...r=1.7.1 (riga 4)
clone(a=readystatechange , e=undefined)jquery...r=1.7.1 (riga 4)
[Interrompi per questo errore]  

..."resolve"],fail:[b,"reject"],progress:[c,"notify"]},function(a,b){var c=b[0],e=b... 
```

jQuery版本有问题吗？我在 wordpress 3.3.1 上使用 filebase v. 0.2.9.14。如果您需要更多信息，请发表评论，我将编辑我的帖子

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T13:23:18.313

解决了，问题是我使用的是 gzip 压缩插件，它导致了这个问题。禁用压缩后它工作正常。

# excel - 如何使用excel自动筛选功能

> ID：10947245
> 
> 赞同：0
> 
> 时间：2012-06-08T10:35:55.157
> 
> 标签：excel, filter

我有一个大问题。我使用excel自动过滤功能，在过滤结果的末尾，下一行，我需要显示结果摘要。我知道如何使用excel的公式。问题是如何找到显示摘要的行。感谢您的帮助。谢谢~

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T18:07:34.787

如果您自动过滤一个区域，并且您想在自动过滤发生时在底部查看小计或总计。

确保在过滤的内容和总计行之间有一个空白行。这样，自动过滤器就不会隐藏结果。如果这就是你的意思

# java - 如何为运行不受信任的应用程序制作沙箱？

> ID：10947246
> 
> 赞同：1
> 
> 时间：2012-06-08T10:35:56.183
> 
> 标签：java, .net, native, sandbox

我想创建通过一些队列任务接收的 Windows 服务，以同时运行许多控制台应用程序。我也想让我的服务器安全。仅仅因为任何人都可以将病毒上传到我的服务器并安排它运行。应用程序可以用 Java、C# 编写，它们也可以是原生应用程序，用纯 C 编写。

最简单的方法是使用虚拟机运行应用程序。但是 VM 需要大量资源来运行，事实上，对于每个 VM，我将运行单独的 Windows 副本，这会占用大量内存和处理器资源。

第二种方法是编写文件系统微过滤内核驱动程序来控制文件系统和Windows注册表。我可以制作隔离文件夹并限制对其他文件夹的所有访问。我也可以为每个正在运行的线程和进程设置配额。但我无法控制内存，它可以用来破解我的沙箱。

理想情况下，我需要一个可以在沙箱中运行应用程序的解决方案，还需要控制这个沙箱（清理它，将新应用程序部署到其中，运行刚刚部署的应用程序，从沙箱复制日志文件）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T07:54:59.440

我刚刚找到了解决方案。解决方案是使用 ReactOS 作为 VirtualBox 上的客户操作系统。因此，因为我想使用 4-5 台 PC 和每台大约 20 个来宾操作系统来创建“计算集群”，所以我需要有来宾操作系统，它不会占用太多内存。ReactOS 占用大约 25 Mb 或 RAM。以及 25 到显卡仿真和其他 VirtualBox 的东西。我将创建部署服务来部署我需要在 ReactOS 中运行的应用程序。之后，客户操作系统将收到有关部署完成的通知，并将运行已部署的应用程序。应用程序完成工作后，所有日志将被复制到主机，来宾虚拟机将回滚到快照。所以，如果有人上传病毒，它的所有工作结果都会被自动清除。而且我可以运行很多副本，因为 ReactOS 只占用 25-30 Mb 的 RAM

# javascript - 命名自调用函数

> ID：10947248
> 
> 赞同：14
> 
> 时间：2012-06-08T10:35:58.553
> 
> 标签：javascript, self-invoking-function

有没有理由使用*命名*的自调用函数？

例如：

```
(function foo() 
{
     alert('Hello World! Named Self Invoking Function Here');
})(); 
```

就我的学习而言，这与匿名自调用函数的作用相同，没有额外的优点（您不能在调用后再次调用它），也没有额外的缺点，因为它不会“污染”全局范围（我认为）。

是否有任何时候命名像上面这样的自调用函数是有意义的？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-08T10:39:20.657

如果您需要一个递归的自调用函数，那么它可能是有意义的：

```
(function loop(i) {
    console.log(i);
    i++;
    if(i < 10) {
        loop(i);
    }
})(0); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-06-08T10:47:26.020

我使用这种模式定期从服务器轮询数据。这使得代码不那么混乱（尤其是`setTimeout`行）。

```
(function poll() {
  $.get("/somedata", function (data) {
    // Processing data...
    setTimeout(poll, 1000);
  });
})(); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-08T10:49:26.427

这对递归很有用，但你应该暂时避免命名函数表达式。直到版本 9，它们才在 Internet Explorer 中得到正确支持。

请参阅：http: [//javascript.info/tutorial/functions-declarations-and-expressions](http://javascript.info/tutorial/functions-declarations-and-expressions)

> “IE<9 不支持 NFE”

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-01-21T00:51:28.680

命名自调用函数可以提高可读性。例如，在您通过自调用函数创建多个闭包的情况下，通过提供名称，它可以无害地提高代码的可读性（除了失去旧的 IE 支持，如前所述）。本质上，您正在创建命名代码块，这可能是分解大型函数的好方法。

例如，

```
function bigFunction() {
   (function doTheFirstThing() {
      //code here.
   })();
   (function doTheSecondThing() {
     //code here.
   })(); 
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-11-12T07:41:04.317

您可以将其用于初始化，即您必须首先运行的代码行，然后它将调用另一个脚本。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-09-25T06:45:54.890

它为我们提供了一种创建递归、自执行函数的方法。在下面的演示中，我创建了一个自执行函数，它递增一个计数器，记录它，然后递归地调用自身：

```
var counter = 0;
// Create a self-executing function block; however, rather
// than passing in an anonymous, headless function, let's
// pass in a named function.
(function useCounter() {
  // Increment and log counter.
  console.log(++counter);
  // Call *this* function again in after a short timeout.
  setTimeout(useCounter, 1000);
})(); // Self-execute.
```

自调用函数的另一个更常见的用途是数据隐私，其中包含的所有内容仅在这些函数的范围内可用。

有关更多详细信息，请访问[https://en.wikibooks.org/wiki/JavaScript/Anonymous_functions](https://en.wikibooks.org/wiki/JavaScript/Anonymous_functions)

# javascript - 通过 JavaScript 单击到 Flash 对象

> ID：10947254
> 
> 赞同：15
> 
> 时间：2012-06-08T10:36:24.760
> 
> 标签：javascript, jquery, flash

是否可以通过 JavaScript 在 Flash 对象上触发点击事件？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-08T10:39:06.717

是和不是。您*可以*使用[`ExternalInterface`](https://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/external/ExternalInterface.html)来模拟 Flash 项目中的点击事件，前提是它们不关心事件源（即人与否）。

但是，Flash 中对单击事件源特别模糊的功能之一是“**文件选择**”对话框。如果没有来自真实用户的真正点击（就浏览器而言），就不可能触发它；如果可能的话，这实际上是一个潜在的安全风险。如果我没记错的话，这在 FP 9 之前是可能的，我们在文件上传器中利用了这种行为。一旦他们修复它就开始引起问题，但我很高兴他们这样做了:)

克服这个限制的典型方法是创建一个透明的 Flash 对象并在其上放置一个显示按钮图像的层；点击事件最终会命中 Flash 对象并触发用户点击事件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-08T21:03:23.260

我从未测试过这个，所以只是认为

请注意请注意，您应该有一个特定的 div 来捕获点击。

在 Actionscript 中要模拟点击事件，是可以使用的。

```
 element.dispatchEvent(new MouseEvent(MouseEvent.CLICK, true, false)); 
```

那么，为什么不创建一个外部函数，一旦使用外部接口从 JavaScript 接收到调用，就会分派事件呢？当然，这是非常粗糙的，但它可能会奏效。

动作脚本：

```
import flash.external.*;

function simulateButtonClick() 
{ 
// Here goes your code
} 
ExternalInterface.addCallback("invokeSimulateButtonClick", simulateButtonClick); 
```

Javascript：

```
 ExternalInterface.addCallback("invokeSimulateButtonClick", YOUR_VARIABLES); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-09T06:00:31.957

Flash 可以`ExternalInterface`，但您需要先在 Flash (.fla) 中编写一些 ActionScript。

一些参考资料——

[在 Flash 中使用外部接口](https://stackoverflow.com/questions/818089/using-externalinterface-in-flash)

[http://www.actionscript.org/resources/articles/638/1/Basics-of-using-the-ExternalInterface/Page1.html](http://www.actionscript.org/resources/articles/638/1/Basics-of-using-the-ExternalInterface/Page1.html)

[http://www.adobe.com/devnet/flash/articles/external_interface.html](http://www.adobe.com/devnet/flash/articles/external_interface.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-08T10:41:33.683

不，您无法捕获对嵌入元素的点击，除非它位于 div 或其他东西的后面。

# c++ - 初始化列表中的自定义类对象

> ID：10947263
> 
> 赞同：-1
> 
> 时间：2012-06-08T10:37:03.013
> 
> 标签：c++, constructor, initialization

我有一个班级酒吧：

```
class Bar
{
public:
Bar(void);
~Bar(void);
}; 
```

还有一个类`Foo`，它将对象的引用`Bar`作为构造函数参数并需要将其保存在私有成员中`bar_`：

```
class Foo
{
private:

Bar& bar_;
public:
Foo(Bar& bar) : bar_(bar) {}
~Foo(void) {}
}; 
```

这不编译：

> 在“Foo”中找不到重载的成员函数
> 
> 缺少类型说明符 - 假定为 int。注意：C++ 不支持默认整数

现在我怀疑我需要保证的几件事，第二个错误是`Bar& bar_;`在`Foo`. 声明时是否需要使用显式构造函数`bar_`？

我有兴趣了解编译器在这个问题上是如何工作的，因此非常感谢详细的解释。

谢谢。

编辑

好的，我正在发布一个新代码，因为我的代码显然没有任何问题。 `Parser.h`：

```
#pragma once
class Parser
{
private:
std::istream& inputStream_;
Analyzer& analyzer_;
public:
Parser(std::istream &inputStream, Analyzer& analyzer);
~Parser(void);
}; 
```

`Parser.cpp`：

```
#include "stdafx.h"
#include "Parser.h"
#include "Analyzer.h"
Parser::Parser(std::istream &inputStream, Analyzer& analyzer ) : inputStream_(inputStream),     analyzer_(analyzer) {}

Parser::~Parser(void) {} 
```

`Analyzer.h`：

```
 #pragma once
class Analyzer
{
public:
    Analyzer(void);
    ~Analyzer(void);
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T11:15:15.387

> 这不编译：
> 
> ```
> overloaded member function not found in 'Foo'    
> missing type specifier - int assumed. Note: C++ does not support default-int 
> ```

您提供的代码片段确实可以编译。不过，我可以告诉你一些关于这些错误的信息。

当您编译一个与您的类中声明的同名方法具有相同名称但签名不同的方法时，会出现第一条错误消息。例如，如果您有：

```
class A {
public:
    int foo (int);
};

int A::foo () { return 0; } 
```

编译器将发出关于未找到重载成员函数的错误。编译器认为`foo`是重载的，因为`foo(void)`不同于`foo(int)`.

第二个错误发生在您定义没有类型的变量或函数时。这通常不是实际问题，而是其他问题的结果。例如，如果您的代码在声明之前尝试使用类，例如：

```
B b;
class B {}; 
```

你会得到关于缺少类型说明符的第二个错误，但它是`B`在第一行讨论的。

# css - CSS 优化 - dom 中的额外类或 css 文件中的预处理器重复样式？

> ID：10947264
> 
> 赞同：9
> 
> 时间：2012-06-08T10:37:05.027
> 
> 标签：css, optimization, less

我开始一个相当大的项目，我正在考虑使用 LESS 来预处理我的 css 的选项。

LESS 的有用之处在于您可以定义一个 mixin，例如：

```
.border-radius(@radius) {
    -webkit-border-radius: @radius;
    -moz-border-radius: @radius;
    -o-border-radius: @radius;
    -ms-border-radius: @radius;
    border-radius: @radius;
} 
```

然后在类声明中使用它

```
.rounded-div {
   .border-radius(10px);
} 
```

将输出 css 获取为：

```
.rounded-div {
    -webkit-border-radius: 10px;
    -moz-border-radius: 10px;
    -o-border-radius: 10px;
    -ms-border-radius: 10px;
    border-radius: 10px;
} 
```

这在浏览器前缀的情况下非常有用。然而，同样的概念可以用来封装常用的 css，例如：

```
.column-container {
    overflow: hidden;
    display: block;
    width: 100%;
}
.column(@width) {
    float: left;
    width: @width;
} 
```

然后在我的设计中需要列时使用这个 mixin：

```
.my-column-outer {
    .column-container();
    background: red;
}
.my-column-inner {
    .column(50%);
    font-color: yellow;
} 
```

（当然，使用预处理器，我们可以轻松地将其扩展为更有用，例如，将列数和容器宽度作为变量传递，并让 LESS 根据列数和容器宽度确定每列的宽度！ )

这样做的问题是，当编译时，我的最终 css 文件将有 100 个这样的声明，复制和粘贴，使文件变得庞大、臃肿和重复。对此的替代方法是使用网格系统，该系统为每个列布局选项预定义类，例如 .c-50（带有“float: left; width:50%;”定义）、.c-33、. c-25 以适应 2 列、3 列和 4 列布局，然后将这些类用于我的 dom。

我真的不喜欢额外类的想法，从经验到臃肿的dom（创建额外的div只是为了附加网格类）。此外，html/css 的最基本教程会告诉您 dom 应该与样式分开 - 网格类与样式相关！对我来说，它与将“border-radius-10”类附加到上面的 .rounded-div 示例相同！

另一方面，重复代码导致的大型 css 文件也是一个缺点

所以我想我的问题是，你会推荐哪一个，你使用哪一个？

并且，哪种解决方案最适合优化？除了较大的文件大小之外，是否有任何关于浏览器渲染多个类是否比大型 css 文件更快的研究，或者相反？

我很想听听你的意见！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T18:53:07.380

From my point of view, compiling LESS on client side using JS can reduce your performance and it will have an extra load on browser. But if you can compile it on server then web server can gzip and transfer it to client.
Anyway, personally I prefer compilation on server side because:

1.  I cant trust performance JS LESS compiler on non-modern browsers
2.  Even I cant trust functionality of client side compilers, because each browser can have it's own output. On the other hand, I can rely on my server side compile job.

# facebook - 如何在 Yesod 的单子中重定向？

> ID：10947267
> 
> 赞同：0
> 
> 时间：2012-06-08T10:37:18.517
> 
> 标签：facebook, haskell, redirect, monads, yesod

我目前正在使用[fb](http://hackage.haskell.org/packages/archive/fb/0.9.6/doc/html/Facebook.html)包编写一个从 Facebook 获取数据的 Yesod 应用程序。在我的处理程序中，我设法使身份验证的第一步工作，但我需要重定向到`getUserAccessTokenStep1`返回的 url，我将其定义为`fbRedirUrl`. 我在所有 monad 包装和类型检查方面都遇到了问题，以确保我可以重定向到这个 url。

```
getAccessTokenR :: Handler RepHtml
getAccessTokenR = do
  withManager $ \manager -> do
    FB.runFacebookT creds manager $ do
      fbRedirUrl <- FB.getUserAccessTokenStep1 redirUrl []
      liftIO $ print fbRedirUrl 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T11:52:01.543

看起来如果您通过这些管理器/Facebook monad 层将重定向 URL 传回，那么您就可以提供它。重定向 URL 的类型是`Text`，它有一个`RedirectUrl`typeclass 的实例，这是使用该`redirect`函数所必需的（如[文档](http://hackage.haskell.org/packages/archive/yesod-core/1.0.1/doc/html/Yesod-Handler.html#g:5)中所示）。

您*应该*能够通过以下方式完成这项工作：

```
getAccessTokenR :: Handler RepHtml
getAccessTokenR = do
  url <- withManager $ \manager ->
    FB.runFacebookT creds manager $
       FB.getUserAccessTokenStep1 redirUrl []
  redirect url 
```

这里没有真正的魔法，你基本上有两种高级模式，一种是“with”模式，它将本地化​​资源的使用（在本例中为`manager`），另一种是“运行”模式，那是真的使用 Monad 变换器（不要太担心细节！）。

所以`withManager`给你一个经理来使用，大概它会处理一些经理的设置和删除。这可能是这样的

```
withManager :: (Manager -> Handler a) -> Handler a 
```

在其中你有 facebook runner，它将被键入：

```
runFacebookT :: Credentials -> Manager -> FacebookT Auth Handler a -> Handler a 
```

这基本上是说，如果你给它一些凭据、管理器和一些 Facebook 特定的计算（比如获取重定向 URL），它可以将其转换为你选择的 Monad（这里我们选择`Handler`，因为这就是`withManager`想要的）。在您的情况下，`a`类型变量是`Text`重定向 URL 的。

使用这对`with`和`run`模式，我们得到的结果是，在深处提供的 URL 会冒泡到我们的`Handler`monad 中。然后我们把它找出来并把它交给`redirect`函数！

# vb.net - VB.net SyncLock 对象

> ID：10947269
> 
> 赞同：2
> 
> 时间：2012-06-08T10:37:24.367
> 
> 标签：vb.net, multithreading, object, thread-safety, synclock

我总是在人们使用的 SyncLock 示例中看到

```
 Private Lock1 As New Object ' declaration
    SyncLock Lock1 ' usage 
```

但为什么？在我的具体情况下，我锁定了一个队列以避免多线程入队和出队我的数据出现问题。

我可以像这样锁定 Queue 对象本身吗？

```
 Private cmdQueue As New Queue(Of QueueItem) ' declaration
    SyncLock cmdQueue ' usage 
```

任何帮助表示赞赏。谢谢。

**编辑：**

感谢所有答案，但 tcarvin 答案是我正在寻找的。该队列对于我的单例 Comms 对象是私有的，该对象对要发送的新消息进行排队（由 Send 方法公开），该队列在该对象内的工作线程中一次一条消息被使用，并且我在锁中拥有的唯一代码是一次调用 Enqueue 和 Dequeue。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T15:48:38.703

肯定来自其他海报的圣人建议。但答案是肯定的，你可以使用 Queue 对象来锁定。您可以使用任何对象。在您的代码片段中，您将队列实例声明为私有，因此您可能会避免其他人锁定您的队列对象的常见问题（假设您没有将对象传递到您的类之外）。最佳实践建议使用专用对象，这样，在未来，有人不会更改您的代码，然后公开用于锁定的队列对象。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-08T12:13:20.847

这是关于锁的常见误解。锁的作用是*阻止代码*，而不是赋予对象线程安全性。该对象仅用于跟踪锁的状态。而且由于您想阻止*特定*的代码，您需要一个*特定*的对象来存储锁定状态。公共队列不够具体，它必然会被其他地方的其他代码使用。如果它还滥用队列对象来阻塞自己的代码，那么出现严重死锁问题的可能性就很高。

锁定对象以实现线程安全的概念实际上是存在的，它是我的机器似乎从未接触过的深入研究的主题。它被称为STM，“软件事务记忆”。维基百科文章[在这里](http://en.wikipedia.org/wiki/Software_transactional_memory)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-08T10:41:38.463

问题是其他人可以锁定您的对象，这将超出您的控制范围。[请参阅 Microsoft 在此lock 语句](http://msdn.microsoft.com/en-us/library/c5kehkcz.aspx)上的最佳实践

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2016-08-01T20:51:38.557

我认为您所做的是不好的做法，因为锁定的对象必须保持不变。由于您锁定 a`Queue(Of QueueItem)`然后您从同一个 Queue 中出列，因此对象会更改，并且如此处所述：[https](https://msdn.microsoft.com/en-us/library/3a86s51t.aspx) ://msdn.microsoft.com/en-us/library/3a86s51t.aspx （第二条规则），

> 该机制要求锁定对象保持不变。

所以你应该这样做`Public StatusObject As New Object`并锁定它

# wordpress - 添加这个浮动垂直条在wordpress中水平显示

> ID：10947275
> 
> 赞同：1
> 
> 时间：2012-06-08T10:37:53.923
> 
> 标签：wordpress, addthis

添加此浮动垂直条在 wordpress 内容单页中无法正常工作！

这是我的代码

```
 <div class="addthis_bar addthis_bar_vertical addthis_bar_large" style="top:50px;left:50px;">
<div class="addthis_toolbox addthis_default_style">
    <span><a class="addthis_button_facebook_like" fb:like:layout="box_count"></a></span>
    <span><a class="addthis_button_tweet" tw:count="vertical"></a></span>
    <span><a class="addthis_button_google_plusone" g:plusone:size="tall"></a></span>
    <span><a class="addthis_button_stumbleupon_badge" su:badge:style="5" ></a></span> 
    <span><a class="addthis_button_pinterest_pinit"  pi:pinit:url="<?php echo get_permalink(get_the_ID()); ?>" pi:pinit:media="<?php echo $thumb_image[0];?>" pi:pinit:layout="vertical"></a></span>
    <span><a class="addthis_counter"></a></span>
</div> 
```

我已按照[addthis site](http://www.addthis.com/labs/floating-vertical-bar)中的说明进行操作。

我曾尝试使用其他 addthis 工具箱 [32 X 32 中型图标]，但最终出现错误。

下面的代码是我尝试过的另一个 addthis 代码，

```
<div class="addthis_bar addthis_bar_vertical addthis_bar_medium" style="top:50px;left:50px;">
<div class="addthis_toolbox addthis_default_style addthis_32x32_style">
    <span><a class="addthis_button_preferred_1"></a></span>
    <span><a class="addthis_button_preferred_2"></a></span>
    <span><a class="addthis_button_preferred_3"></a></span>
    <span><a class="addthis_button_preferred_4"></a></span>
    <span><a class="addthis_button_compact"></a></span>
</div> 
```

我没有为此使用任何单独的样式（CSS）。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T08:57:44.973

谢谢玛丽的建议。我报告了这个问题来添加这个。[这是解决方案](http://support.addthis.com/customer/portal/questions/359679-addthis-floating-vertical-bar-showing-horizontally-in-wordpress)

Addthis团队最近更新了垂直分享栏

所以[这](http://support.addthis.com/customer/portal/questions/359679-addthis-floating-vertical-bar-showing-horizontally-in-wordpress)是最新的代码，它工作正常..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T16:32:50.280

这是已报告给 AddThis 支持的问题。我也在使用 AddThis CSS 样式 addthis_bar_vertical 以垂直样式显示我的 AddThis 工具栏，该样式浮动在浏览器窗口的一侧，并且在过去几个月中一直运行良好。

但是，就在几天前，工具栏现在水平显示在我的浏览器窗口底部。

我正在等待 AddThis 解决问题，但请随时将此问题报告给他们的支持人员，以便为这个烦人的问题添加您的声音！

# java - 如何在 Java 中解析文件中的整数？

> ID：10947281
> 
> 赞同：0
> 
> 时间：2012-06-08T10:38:35.753
> 
> 标签：java, string, parsing

我`n.txt`在格式的文本文件中有整数，2 列整数，各列用空格分隔。

我想读取这些整数并转义它们之间的空格并将这两个整数输入到 2 个单独的整数中。下面的代码用于解析`String`获得的。我想知道是否有任何`String`方法可以将它们拆分`String`为单独的数组并使用空白空间作为分隔符？

```
String URL="C:\\User\\Nimit\\Desktop\\n.txt";
File f = new File(URL);
FileReader inputF = new FileReader(f);
BufferedReader in = new BufferedReader(inputF);

int[] a= new int [1000];
int[] b= new int [1000];

String s =in.readLine();

while(s!=null)
{
    int i = 0;
    a[i] = Integer.parseInt(s,b[i]); //this is line 19

    //*not important*// System.out.println(a[i]);
    s = in.readLine(); 
}

in.close();

System.out.println("the output of the file is " +f); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-08T10:52:31.823

我建议你使用`Scanner`：

```
Scanner s = new Scanner(new File(fileName));

int[] a = new int[1000];
int[] b = new int[1000];

int count = 0;
while (s.hasNextInt()) {
    a[count] = s.nextInt();
    b[count] = s.nextInt();
    count++;
}

s.close(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T10:41:38.973

类的用户`split()`方法`String`。`String arr[]="A B C".split(" ");`

PS：既然你说这是一个新手提示。首先使用谷歌，大多数时候你会比在这里发布问题时更快地找到答案！并阅读 Java-doc，因为您可以在那里找到大部分答案。只需在谷歌搜索之前浏览一下，然后来这里或任何其他论坛提问。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T10:42:05.663

每当您有类似 [http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/String.html的问题时，您应该首先阅读文档](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/String.html)

您正在寻找的似乎是 String.Split() [http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/String.html#split(java.lang.String](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/String.html#split(java.lang.String) )

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-08T10:50:35.910

```
int i=0;
s = in.readLine(); 
while(s!=null && i<1000) // your arrays can only hold 1000 ints
{
   String pair[] = s.split(" ");
   a[i] = Integer.parseInt(pair[0]);
   b[i] = Integer.parseInt(pair[1]);
   i++; // don't forget to increment
   s = in.readLine(); 
} 
```

像这样的东西。

# android - 如何以编程方式从android中删除通话记录？

> ID：10947283
> 
> 赞同：12
> 
> 时间：2012-06-08T10:38:42.593
> 
> 标签：android, calllog

如何从应用程序中删除/删除通话记录。我正在这样做

```
 this.getContentResolver().delete(CallLog.Calls.CONTENT_URI,null,null); 
```

它不工作。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-06-08T11:20:17.293

确保您具有以下权限`Manifest.xml`：

```
<uses-permission android:name="android.permission.READ_CONTACTS" /> 
<uses-permission android:name="android.permission.WRITE_CONTACTS" /> 
```

要删除特定号码的通话记录，请尝试以下方式：

```
public void DeleteCallLogByNumber(String number) {   
    String queryString = "NUMBER=" + number; 
    this.getContentResolver().delete(CallLog.Calls.CONTENT_URI, queryString, null);  
} 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-12-26T10:14:04.370

现有的解决方案不会删除带有 0 或 + 前缀的数字。为此，它适用于所有电话号码，需要将号码放在单引号中，如下所示：

```
String queryString = "NUMBER='"+numberToDelete+"'";
context.getContentResolver().delete(CallLog.Calls.CONTENT_URI, queryString, null); 
```

希望这可以帮助。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2014-08-12T12:42:17.727

接受的答案将从通话记录中删除特定号码的所有通话。如果您只想删除一个调用，您可以通过将 CallLogId 传递给该函数并运行此查询来实现。

```
public void DeleteCallById(String idd) {   
    this.getContentResolver().delete(CallLog.Calls.CONTENT_URI,CallLog.Calls._ID + " = ? ",
            new String[] { String.valueOf(idd) });
    } 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2014-06-18T13:20:36.540

```
<uses-permission android:name="android.permission.WRITE_CALL_LOG"/> 
```

您只需要授予此权限即可使用此方法：

```
this.getContentResolver().delete(CallLog.Calls.CONTENT_URI, null, null); 
```

它对我来说完美无缺。我已经在运行 Kitkat 4.4.2 的 Moto-G 和带有 Jelly Bean 4.1 的 Samsung Note 上对其进行了测试。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2015-06-12T08:27:17.150

这是一种改进的方法，例如如果数据库中存储的数字是：“914111222”，这个方法可以处理像：“+98 914 111 2222”这样的数字：

```
public void removeContactsLogFromPhoneLogs(String numberTag){
    char[] number=numberTag.toCharArray();
    String n="%";
    for(int i=0;i<number.length;i++)
    {
        n=n+(number[i]+"%");
    }
    String queryString=CallLog.Calls.NUMBER+" LIKE '"+n+"'"; 
    mContext.getContentResolver().delete(CallLog.Calls.CONTENT_URI,queryString,null);

} 
```

它需要以下许可：

```
<uses-permission android:name="android.permission.WRITE_CALL_LOG"/> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-09-27T10:06:34.817

如果您想按特定 ID 删除多个通话记录，可以使用以下方法：

```
public void deleteCallLog(List<String> listOfIds){
    getContentResolver().delete(CallLog.Calls.CONTENT_URI,CallLog.Calls._ID + " in (" + TextUtils.join(",", listOfIds) + ")",
            null);
    callLogAdapter.notifyDataSetChanged();
} 
```

# linux - 如何为 VLAN 嗅探初始化原始套接字

> ID：10947286
> 
> 赞同：4
> 
> 时间：2012-06-08T10:38:46.263
> 
> 标签：linux, sockets

我正在尝试创建从不同 VLAN 嗅探 DHCP 提供的软件，我的问题是我接收的数据包不包含 VLAN 标记。我正在使用原始套接字，并且尝试启用混杂模式，但无济于事。

问题是如何指示内核保持数据包中的所有数据完好无损？

使用wireshark时，我可以看到VLAN标头设置正常的回复数据包，但我的recv'ed数据已删除所有VLAN信息。

提前致谢！

——劳里

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2020-01-15T21:49:38.900

这是旧的，但这仍然没有解决：

> 在 NIC 上启用 VLAN 卸载时，Linux 将不会在 recv 返回的数据中传递 VLAN 标记。相反，它在控制消息中传递 VLAN TCI。

要获取控制字段，您需要使用`PACKET_AUXDATA`，它将以下内容添加到辅助数据中：

```
 struct tpacket_auxdata {
      __u32 tp_status;
      __u32 tp_len;      /* packet length */
      __u32 tp_snaplen;  /* captured length */
      __u16 tp_mac;
      __u16 tp_net;
      __u16 tp_vlan_tci;
      __u16 tp_padding;
  }; 
```

例如

```
sock.setsockopt(SOL_PACKET, PACKET_AUXDATA, 1) 
```

完成后，使用`recvmsg()`并遍历辅助数据以查找`PACKET_AUXDATA`. 从中取出 tp_vlan_tci，并将其注入数据包数据中。

**代码示例**

*   C：libpcap

[https://github.com/the-tcpdump-group/libpcap/blob/3a7962215f4f3b13ac792ad0e0487a53c0f1178e/pcap-linux.c#L1756](https://github.com/the-tcpdump-group/libpcap/blob/3a7962215f4f3b13ac792ad0e0487a53c0f1178e/pcap-linux.c#L1756)

*   Python

```
import ctypes, socket

# From bits/socket.h
SOL_PACKET = 263
# From asm/socket.h
SO_ATTACH_FILTER = 26
ETH_P_8021Q = 0x8100
TP_STATUS_VLAN_VALID = 1 << 4

class tpacket_auxdata(ctypes.Structure):
    _fields_ = [
        ("tp_status", ctypes.c_uint),
        ("tp_len", ctypes.c_uint),
        ("tp_snaplen", ctypes.c_uint),
        ("tp_mac", ctypes.c_ushort),
        ("tp_net", ctypes.c_ushort),
        ("tp_vlan_tci", ctypes.c_ushort),
        ("tp_padding", ctypes.c_ushort),
    ]

def _recv_raw(sock, x=65535):
    """Internal function to receive a Packet,
    and process ancillary data.
    """
    flags_len = socket.CMSG_LEN(4096)
    pkt, ancdata, flags, sa_ll = sock.recvmsg(x, flags_len)
    if not pkt:
        return pkt, sa_ll
    for cmsg_lvl, cmsg_type, cmsg_data in ancdata:
        # Check available ancillary data
        if (cmsg_lvl == SOL_PACKET and cmsg_type == PACKET_AUXDATA):
            # Parse AUXDATA
            auxdata = tpacket_auxdata.from_buffer_copy(cmsg_data)
            if auxdata.tp_vlan_tci != 0 or \
                    auxdata.tp_status & TP_STATUS_VLAN_VALID:
                # Insert VLAN tag
                tag = struct.pack(
                    "!HH",
                    ETH_P_8021Q,
                    auxdata.tp_vlan_tci
                )
                    pkt = pkt[:12] + tag + pkt[12:]
        return pkt 
```

（来自[https://github.com/secdev/scapy](https://github.com/secdev/scapy)）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T11:44:01.197

如果我正确理解[Linux 代码](http://lxr.linux.no/#linux+v3.4.1/net/core/dev.c#L3185)，VLAN 标记会提前从数据包的有效负载中剥离，并存储在无法通过原始套接字 API 访问的字段中。相反，尝试做wireshark 所做的事情，即使用[pcap API](http://www.tcpdump.org/pcap.html)。

# titanium - 钛工作室 - 兼容性

> ID：10947290
> 
> 赞同：0
> 
> 时间：2012-06-08T10:38:58.270
> 
> 标签：titanium, compatibility, appcelerator

很基本的问题...

我找不到 Titanium studio 可以处理的服务（光传感器、通知、邮件、加速度计......）的兼容性表（曾经看过一次）......

如果有人有...请给我链接！

非常感谢！

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T10:42:45.267

谷歌搜索有那么难吗？[http://docs.appcelerator.com/titanium/2.0/index.html#!/guide/Titanium_Compatibility_Matrix](http://docs.appcelerator.com/titanium/2.0/index.html#!/guide/Titanium_Compatibility_Matrix)

# node.js - 使用 lighttpd 重定向端口 80 上的 websocket 流量

> ID：10947298
> 
> 赞同：8
> 
> 时间：2012-06-08T10:39:23.810
> 
> 标签：node.js, websocket, socket.io, lighttpd

我有一个托管在 lighttpd 上的网站，可通过“www”子域访问。我也有一个聊天服务器在用 node.js 和 socket.io 监听端口 8124。

我希望所有客户端流量都发生在端口 80 上，方法是将所有请求重定向到“聊天”子域到端口 8124。所以我启用了 mod_proxy 并在 lighttpd.conf 中添加了：

```
$HTTP["host"] == "chat.myserver.com" {
    proxy.server = (
            "" => ((
                    "host" => "78.128.79.192",
                    "port" => "8124"
            ))
    )
} 
```

在客户端，当我连接到 websocket 时，

```
var socket = io.connect('http://chat.myserver.com'); 
```

我从 node.js 得到正确的消息：

```
debug - client authorized
info  - handshake authorized 6067470561567883577
debug - setting request GET /socket.io/1/websocket/6067470561567883577
debug - set heartbeat interval for client 6067470561567883577
debug - client authorized for 
debug - websocket writing 1:: 
```

但是浏览器报错：

```
Firefox can't connect to server ws://chat.myserver.com/socket.io/1/websocket/6067470561567883577 
```

当然，如果我直接连接到端口 8124，一切正常：

```
var socket = io.connect('http://www.myserver.com:8124'); 
```

但是，正如我所说，我希望所有客户端流量都在端口 80 上。这可能吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-08T11:03:19.937

已知 mod_proxy 与 websockets 不兼容。

[HAProxy](http://haproxy.1wt.eu/)是兼容的（我自己没有测试过，但是这里有[一篇关于它的 websockets 配置](http://jfarcand.wordpress.com/2011/10/06/configuring-haproxy-for-websocket/)的文章）。

# java - 在 JDBC 中停止或终止长时间运行的查询

> ID：10947303
> 
> 赞同：8
> 
> 时间：2012-06-08T10:39:43.877
> 
> 标签：java, oracle, jdbc

有什么方法可以停止或终止 JDBC 中长时间运行的 Oracle 查询？它通常以重新启动应用程序服务器以使 jdbc 与 Oracle DB 断开连接而告终。

`Kill session`在 Java 或 JDBC 中寻找类似于 SQL Plus 的功能

在 SQL 加

```
SQL> ALTER SYSTEM KILL SESSION 'sid,serial#'; 
```

在java中执行的任何线索？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-08T16:03:55.973

如果没有 jdbc 超时，如果您在另一个线程中运行查询，您可以使用 Statement.cancel() 来终止它。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-08T10:43:09.353

可能有点过时，但我建议改用[JDBC Timeout](https://stackoverflow.com/questions/18822552/setting-network-timeout-for-jdbc-connection)。它还有一个额外的好处，就是优雅地终止而不是强制终止。

使用现代应用服务器，您通常可以从数据源配置中定义 JDBC 超时。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-09T12:30:36.423

你可以试试 Statement.setQueryTimeout

# jquery - 如何在 jquery 中选择未选择的（不是：选择的）项目？

> ID：10947305
> 
> 赞同：2
> 
> 时间：2012-06-08T10:40:00.933
> 
> 标签：jquery

我正在寻找与`:selected`.

它必须选择每个未选中的复选框。

我已经厌倦了这种方式，但它不起作用：

```
$("#cont").find("input[type=checkbox]:not(:selected)") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T10:40:44.867

选择器`:selected`主要用于`<select>`. 对于复选框和单选按钮，您应该使用`:checked`选择器。

```
$("#cont").find("input[type=checkbox]:not(:checked)"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T10:43:52.607

检查的属性是输入

```
$("#cont").find("input[type=checkbox]:not(:checked)"); 
```

# class - 让新客户成为班级成员

> ID：10947306
> 
> 赞同：0
> 
> 时间：2012-06-08T10:40:02.233
> 
> 标签：class, architecture, software-design

我一直在使用 API 来做一些工作。这是我第一次使用它的方式：

```
var someStuff = new myObject ();
someStuff.Name = "stackOverflow";
someStuff.Options.MaxSurname = 5; //this caused me to get a runtime exception, Options is Null 
```

修复很简单。我显然必须新建 Options 成员才能创建一个实例。

```
someStuff.Options = new Options ();
someStuff.Options.MaxSurname = 5; 
```

显然，这现在按预期工作。这个可以吗？作为客户，我不知道我必须新加入这个 Options 成员。一旦我去调试并得到运行时空对象异常，快速修复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T10:51:42.393

是的，这没关系。由于某种原因，您使用的 API 要求您构造一个 Options 对象，而编译器无法检查这一点（因此在运行时出现异常）。

你也可以在将它应用到 SomeStuff 之前构造对象，如果这对你来说感觉更自然：

```
Options someOptions = new Options ();
someOptions.MaxSurname = 5;
someStuff.Options = someOptions; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T11:09:38.443

你总是可以使用工厂方法。

示例代码：

```
public class MyObjectFactory
{
    public static MyObject CreateSomeObject()
    {
        return new MyObject() { SomeOptions = new Options(); }
    }
}

// used as ...
var myObject = MyObjectFactory.CreateSomeObject();
myObject.Options.MaxSurNames = 5; 
```

因此，您无法再获得 MyObject 的不完整实例。而且感觉很自然。

# f# - F# 闭包中的可变变量

> ID：10947309
> 
> 赞同：4
> 
> 时间：2012-06-08T10:40:24.877
> 
> 标签：f#

我正在尝试从 java do F# 中移植一些代码，以在给定点周围生成多维点网格。我想出了这个：

```
let gridGenerator midpoint stepSize steps = 
    seq {
        let n = Array.length midpoint
        let direction = Array.create n -steps
        let mutable lastIndex = n-1
        while lastIndex>=0 do
            let next = midpoint |> Array.mapi (fun i x -> x+ direction.[i]*stepSize)
            while lastIndex>=0 && direction.[lastIndex]=steps do 
                direction.[lastIndex]<- (-steps)
                lastIndex<-lastIndex-1;        
            if lastIndex>=0 then
                direction.[lastIndex]<-direction.[lastIndex]+1;
                lastIndex <- n-1;
            yield next;
    } 
```

除了这段代码非常必要（我会很感激如何修复它的提示），我得到一个编译错误：

> Program.fs(18,15)：错误 FS0407：可变变量“lastIndex”的使用方式无效。可变变量不能被闭包捕获。考虑通过“ref”和“！”消除这种突变的使用或使用堆分配的可变参考单元。

我该如何解决这个错误？我怎样才能使它更实用？

示例：对于 midpoint `[|0.0, 1.0|]`，步长`0.5`和`1`我期望的步数（实际上是任何顺序）

```
seq{[|-0.5, 0.5|], [|-0.5, 1.0|], [|-0.5, 1.5|], [|0.0, 0.5|], [|0.0, 1.0|], [|0.0, 1.5|], [|0.5, 0.5|], [|0.5, 1.0|], [|0.5, 1.5|]} 
```

另请注意，这将执行多次，因此性能至关重要。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-08T10:49:59.383

```
let gridGenerator midpoint stepSize steps =
    seq {
        let n = Array.length midpoint
        let direction = Array.create n -steps
        let lastIndex = ref (n - 1)
        while !lastIndex >= 0 do
            let next = midpoint |> Array.mapi (fun i x -> x + direction.[i] * stepSize)
            while !lastIndex >= 0 && direction.[!lastIndex] = steps do
                direction.[!lastIndex] <- -steps
                decr lastIndex
            if !lastIndex >= 0 then
                direction.[!lastIndex] <- direction.[!lastIndex] + 1
                lastIndex := n - 1
            yield next
    } 
```

?

`ref`'s 非常适合此类用途，并且不被视为可变变量（因为它们不是）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-08T12:00:27.027

这是一种更实用的方法：

```
let rec gridGenerator midpoint stepSize steps =
    match midpoint with
    | [] -> Seq.singleton []
    | p::point ->
        seq {
            for d in - stepSize * steps .. stepSize .. stepSize * steps do
                for q in gridGenerator point stepSize steps do
                    yield (p + d) :: q
        } 
```

和签名：

```
val gridGenerator : int list -> int -> int -> seq<int list> 
```

如果您重用结果，请记住将其缓存或转换（为数组或列表）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-04-27T05:05:56.027

现在你可以只使用 F# 4，它没有这样的约束。

# jquery - $("html").mask 在 IE7 中不起作用

> ID：10947311
> 
> 赞同：3
> 
> 时间：2012-06-08T10:40:25.913
> 
> 标签：jquery, internet-explorer-7, mask

我试图通过屏蔽整个页面来显示加载图像。所以页面中的其他元素是不可访问的。但它不仅在 IE7 中工作。在其他浏览器中，它工作正常。

我的代码是

```
$('html').mask('<div class="loading-msg-wrapper"><div class="loading-icon"><img src="ajax-loader-tr.gif"></div><div class="loading-text">Loading ...</div></div>'); 
```

CSS：

```
.loadmask {
    z-index: 6000;
    position: absolute;
    top:0;
    left:0;
    -moz-opacity: 0.8;
    opacity: .80;
    filter: alpha(opacity=80);
    background-color: #FFF;
    width: 100%;
    height: 100%;
    zoom: 1;
}
.loadmask-msg {
    z-index: 60001;
    position: absolute;
    top: 0;
    left: 0;
    border:1px solid #E80060;
    background: #E80060;
    padding:2px;
}
.loadmask-msg div.loading-outer-wrapper {
    padding:5px 10px 5px 25px;
    background: #fbfbfb url('../images/loading.gif') no-repeat 5px 5px;
    line-height: 16px;
    border:1px solid #E80060;
    color:#222;
    font:normal 11px tahoma, arial, helvetica, sans-serif;
    cursor:wait;
} 
```

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T12:53:39.873

我做了一些测试，IE7 似乎不喜欢直接对 html 标记进行操作。尝试在 $('body') 上使用掩码。

# hyperlink - 如何为来自同一链接的页面添加规范标签？

> ID：10947313
> 
> 赞同：5
> 
> 时间：2012-06-08T10:40:39.020
> 
> 标签：hyperlink, symfony1, seo, canonical-link

我正在使用 symfony 1.0.6。

在我的网站中，我有两个 URL。

```
http://newe4s.com/news/articles/view/033/job-news-and-information 
```

和

```
http://newe4s.com/news/articles/view/033/job-news-and-information/graduate/Connections-help-graduates-get-jobs 
```

现在，所有新文章都使用相同的布局，并且以上两个链接都从数据库中获取相同的数据。谷歌报告内容重复，因为它获得了相同内容的多个 URL。当我搜索解决方案时，我发现使用“规范”结构解决了这个需要

```
<link rel="canonical" href="http://newe4s.com/news/articles/view/033/job-news-and-information /> 
```

添加到页面头部

```
http://newe4s.com/news/articles/view/033/job-news-and-information/graduate/Connections-help-graduates-get-jobs 
```

但这里的问题是，两者都使用相同的布局并基于文章 id（上例中的 033），获取并显示数据。我无法更改或硬编码规范的 href。

有没有办法在 action.class 或模板文件中手动添加链接标签？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T21:28:30.017

根据[旧票](http://trac.symfony-project.org/ticket/7282)（基于[旧 symfony 论坛中的旧线程](http://oldforum.symfony-project.org/index.php/t/3778/)） - 指向[最终来源](http://jnotes.jonasfischer.net/2009/10/symfony-link-tags-e-g-canonical/)，您可以轻松创建一个助手，将链接标签添加到您的页面（例如`/lib/helper/CanonicalHelper.php`）：

```
/**
* Add link tag to slot 'links'
*
* @param String $href [Absolute or internat URI]
* @param String $rel [value for 'rel' attribtue, e.g. 'canonical']
*
* @return void
*/
function add_link($href, $rel)
{
  $slot = get_slot('links');

  try {
    $href = url_for($href, true);
    $slot .= "\n<link rel=\"$rel\" href=\"$href\" />";
  } catch (InvalidArgumentException $e) {
    $slot .= "\n<!-- Could not add Link '$href': Only absolute or internal URIs allowed -->";
  }

  slot('links', $slot);
} 
```

然后你可以在你的模板中调用它：

```
<?php add_link(
  'http://newe4s.com/news/articles/view/033/job-news-and-information',
  'canonical'
); ?> 
```

最后，不要忘记在你的`layout.php`：

```
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <title>Title</title>
    <link rel="shortcut icon" href="/favicon.ico" />
    <?php include_javascripts() ?>
    <?php include_stylesheets() ?>
    <?php include_slot('links'); ?>
  </head> 
```

如果您想从 中添加它`actions`，它也在博客文章中定义。

**编辑：**

如果您创建了一个名为的助手，`CanonicalHelper.php`请不要忘记在要使用`add_link`函数时包含它：

```
<?php use_helper('Canonical') ?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-06-18T09:33:30.210

Symfony 1.0.11

# Important part is slot('links') & end_slot() so whatever print in between will be assigned to slot similar to ob_start & ob_end()

```
function add_link($href, $rel)
   {
      slot('links');
      echo "\n<link rel=\"$rel\" href=\"$href\" />\n";
      end_slot();
   } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T12:32:50.537

嗨，我正在做以下事情，如果我是对的或错的，请告诉我。

在 /lib/symfony/CanonicalHelper.php

```
<?php 
function add_link($href, $rel)
{
 $slot = get_slot('links');
 try {
  $href = url_for($href, true);
  $slot.= "\n<link rel=\"$rel\" href=\"$href\" />";
 }
 catch (InvalidArgumentException $e) {
 $slot.= "\n<!-- Could not add Link '$href': Only absolute or internal URIs allowed   -->";
}
 return $slot;
}
?> 
```

在 layout.php 中：

```
<?php include_slot('links'); ?> 
```

在成功文件中：

```
<?php use_helper('Canonical');?>
<?php echo add_link('nonsense', 'canonical');?> 
```

# javascript - 定义事件

> ID：10947317
> 
> 赞同：-3
> 
> 时间：2012-06-08T10:40:53.143
> 
> 标签：javascript

我了解如何创建事件，如下所示：

```
var evt=document.createEvent('Event');
evt.initEvent('foo',true,true);
window.dispatch(evt); 
```

然后任何人都可以写：（`window.addEventListener("foo",myFunc,false);`仅用于野生动物园）

但我不明白我在哪里定义事件的测试`foo`。例如，如果事件是`shake`，如果 iPhone 被晃动，我在哪里编写测试？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T10:56:25.100

好的，它是：

```
if(shaked)window.dispatch(evt); 
```

我以为我们总是要写

```
window.dispatch(evt); 
```

接着

```
if(shaked)return true; //or something like that 
```

# web-services - 在 Web 服务器中动态创建的流式文件存档

> ID：10947318
> 
> 赞同：0
> 
> 时间：2012-06-08T10:41:00.313
> 
> 标签：web-services, haskell, compression, yesod

我有一个允许文件上传的[Yesod](http://www.yesodweb.com/)应用程序（但问题比这更笼统）。我也允许文件下载。我想允许用户使用单个链接下载多个文件。根据这个问题：[如何使用一个 HTTP 请求下载多个文件？](https://stackoverflow.com/questions/1041542/how-to-download-multiple-files-with-one-http-request)唯一的解决方案似乎是创建包含所有文件的文件存档。

我想使用来自 Hackage 的库在 Haskell 的常量内存中执行此操作，而无需写入磁盘或执行外部程序。

特别是以下是非解决方案：

*   调用外部程序来创建存档：文件可能在磁盘上，也可能在某个数据库中，可以通过某个远程 URL 访问。文件系统可能是“只读的”。出于安全原因，可能无法执行外部程序。外部程序使部署复杂化。

*   从源文件在磁盘上创建临时存档：参见上面的“只读”文件系统。效率也很低：实际上写入磁盘非常慢。

*   在内存中创建完整的存档并在之后提供它：文件可能非常大（想想 CD 图像）和多个。需要的内存太大了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T11:15:50.437

这在很大程度上取决于您想要支持的文件格式（.zip、.tar.gz、tar.bz2 是最常见的），但您可以使用该[`zip-archive`](http://hackage.haskell.org/package/zip-archive)库来创建 .zip 存档。这些档案是作为惰性字节字符串生成的，这意味着它们将即时生成。唯一棘手的部分是生成`Archive`具有正确内容的类型值。例如，它可能看起来像这样：

```
import Codec.Archive.Zip

-- ... and in your code:
let archiveTemplate =
  Archive
  { zComment = ByteString.pack "Downloaded from mysite.com"
  , zSignature = Nothing
  , zEntries = []
  }

let filesIWantToInclude = ["foo.png", "bar.iso"]
entries <- forM filesIWantToInclude $ readEntry []
let archive = foldr addEntryToArchive archiveTemplate entries

let byteString = fromArchive archive
-- Now you can send the byteString over the network, or something. 
```

如果您的文件系统上没有要压缩的文件，而是数据库中的文件或其他文件，则可以手动构建类型[`Entry`](http://hackage.haskell.org/packages/archive/zip-archive/latest/doc/html/Codec-Archive-Zip.html#t%3aEntry)的值并填写正确的字段。您只需要一个惰性`ByteString`表示您想要的数据压缩，仅此而已；然后您可以使用该[`toEntry`](http://hackage.haskell.org/packages/archive/zip-archive/latest/doc/html/Codec-Archive-Zip.html#v%3atoEntry)函数生成一个条目。值得一提的是，`eRelativePath`in 字段`Entry`是 .zip 存档中文件的相对路径，而不是文件系统中的实际相对路径。

# ruby-on-rails-3 - RoR "file_field" 和 Twitter 引导程序

> ID：10947320
> 
> 赞同：5
> 
> 时间：2012-06-08T10:41:01.390
> 
> 标签：ruby-on-rails-3, twitter-bootstrap

我正在尝试在我的 Rails3 应用程序中自定义这部分代码

```
<%= f.submit "Create my account", :class => "btn btn-small btn-primary btn-inverse" %>
<%= f.file_field :photo %> 
```

进入这个：

```
<%= f.submit "Create my account", :class => "btn btn-small btn-primary btn-inverse" %>
<%= f.file_field :photo, :class => "btn btn-small btn-primary btn-inverse" %> 
```

但 file_field 似乎没有响应自定义。

有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-04-03T20:56:04.457

我使用了mindriot的建议，但是需要在内联onchange js之后添加一个逗号并且由于不允许单字符编辑而无法编辑他的答案：

```
<div class="input-group">
  <span class="input-group-btn">
    <span class="btn btn-small btn-primary btn-inverse" onclick="$(this).parent().find('input[type=file]').click();">Browse</span>
    <%= f.file_field :file_upload, onchange: "$(this).parent().parent().find('.form-control').html($(this).val().split(/[\\\\|/]/).pop());", style: "display: none;" %>
  </span>
  <span class="form-control"></span>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T16:25:06.270

该类应用于输入而不是按钮

[http://jsfiddle.net/baptme/k3KtH/](http://jsfiddle.net/baptme/k3KtH/)

如果要设置按钮样式，可以使用此处描述的方法： [http ://www.quirksmode.org/dom/inputfile.html](http://www.quirksmode.org/dom/inputfile.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-27T17:45:45.310

```
<div class="input-group">
  <span class="input-group-btn">
    <span class="btn btn-small btn-primary btn-inverse" onclick="$(this).parent().find('input[type=file]').click();">Browse</span>
    <%= f.file_field :photo, onchange: "$(this).parent().parent().find('.form-control').html($(this).val().split(/[\\\\|/]/).pop());" style: "display: none;" %>
  </span>
  <span class="form-control"></span>
</div> 
```

基于这个[答案](https://stackoverflow.com/a/30489353/1011746)。

# iphone - 刷新 MasterView XML 解析文件 - Objective C

> ID：10947322
> 
> 赞同：1
> 
> 时间：2012-06-08T10:41:14.677
> 
> 标签：iphone, objective-c, ios, xcode, ipad

我在目标 C 中为 iPad 做了一个应用程序。在此我正在解析一个 xml 文件并使用它在 MasterView（拆分视图应用程序）中显示其内容。但是，xml 文件会不时更新。如何刷新主视图中显示的内容？

我已经使用 NSXML Parser 解析了 xml 文件，目前我已经使用 NSTimer 每隔两秒使用“reloadData”命令刷新内容。它不工作。请帮忙。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T10:48:38.527

首先在 .h 文件中声明计时器，如下所示

```
NSTimer *timer; 
```

然后在 .m 文件中使用它，就像下面的语法

```
timer = [NSTimer scheduledTimerWithTimeInterval:2.0 target:self selector:@selector(yourMethod) userInfo:nil repeats:YES]; 
```

在这里，如果你想用 viewWill Appear 重复计时器，那么上面的代码在`viewWillAppear:`方法中声明..

希望，这对你有帮助.... :)

# salesforce - 从列表中获取选定的选项

> ID：10947331
> 
> 赞同：0
> 
> 时间：2012-06-08T10:41:56.640
> 
> 标签：salesforce, apex-code, visualforce, force.com

如何在此列表中获取选定的选项，在 apex 类中：

```
<apex:column headerValue="Type d'ctivité">
     <apex:selectList value="{!typeAct}" size="1" >
          <apex:selectOptions value="{!nomAct}"/>
     </apex:selectList> 
</apex:column> 
```

谢谢 ！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T14:31:17.187

所选值将存储在您的`typeAct`变量中，因为您的选择列表通过`value`属性绑定到它。

# grails - Grails 排除在更深层次上不起作用

> ID：10947333
> 
> 赞同：2
> 
> 时间：2012-06-08T10:41:58.300
> 
> 标签：grails

我正在使用 Grails 2.0.3。在 中`BuildConfig.groovy`，我有以下排除。

```
dependencies {
    runtime ('com.mycompany.apps.notification:client:1.2.1') {
        excludes([ group: 'xom', name: 'xom' ])
    }
} 
```

我的依赖树如下所示。（使用 maven2 创建树）

```
[INFO] ------------------------------------------------------------------------
[INFO] [dependency:tree {execution: default-cli}]
[INFO] com.mycompany.apps.notification:notifytest:jar:0.0.1-SNAPSHOT
[INFO] \- com.mycompany.apps.notification:client:jar:1.2.1:compile
[INFO]    \- com.mycompany.apps.notification:api:jar:1.2.1:compile
[INFO]       \- com.mycompany.framework:platformservice.shared:jar:3.22.0:compile
[INFO]          \- com.mycompany.framework:saml.res:jar:1.0.0:compile
[INFO]             \- xom:xom:jar:1.1:compile
[INFO]                +- xerces:xmlParserAPIs:jar:2.6.2:compile
[INFO]                \- jaxen:jaxen:jar:1.1-beta-8:compile
[INFO]                   \- (xerces:xmlParserAPIs:jar:2.6.2:compile - omitted for duplicate)
[INFO] ------------------------------------------------------------------------ 
```

排除在树中的第 4 级之前工作正常，但排除在该级别以下被忽略。在我的示例中，排除在“com.mycompany.framework:platformservice.shared”之前有效，但不适用于“com.mycompany.framework:saml.res”及以下。

我使用 maven 2.2 尝试了相同的操作，并且排除在上面树的所有级别中都有效。我是否缺少 grails 中的一些配置以排除在更深层次上的工作？或者这是一个已知问题？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-05-03T18:12:24.900

我也遇到过类似的问题……让我发疯。有几个 jira 问题可以解决 grails 中的依赖问题，希望它们能在 2.3 中得到解决。无论如何，为了解决您的问题，我通常会排除更高的依赖项，然后直接包含它，然后排除我实际上试图从中排除的项目。烦人，但它有效。

所以也许是这样的？

```
runtime ('com.mycompany.apps.notification:client:1.2.1') {
    excludes([ group: 'com.mycompany.framework', name: 'saml' ])
}

runtime ('com.mycompany.framework:saml.res:1.0.0') {
    excludes([ group: 'xom', name: 'xom' ])
} 
```

此外，有时依赖项通常会变得棘手，我发现 grails --refresh-dependencies compile 可以解决问题。或者，更糟的是删除整个 .grails 目录。

# c - C修改printf()输出到文件

> ID：10947335
> 
> 赞同：5
> 
> 时间：2012-06-08T10:42:03.370
> 
> 标签：c, linux, unix, printf

有没有办法修改以`printf`在文件上而不是控制台上输出字符串？

我尝试在 Internet 上查找某些内容，并找到了类似的电话，`dup`这可能与此有关。`dup2``fflush`

编辑：

也许我不清楚..问题是这是在C考试题中..问题如下：

解释一个通常将字符串输出到屏幕（使用 ）的程序如何在**不**更改上述程序中的任何代码的情况下将`printf()`字符串输出到文件。

 *** * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-08T10:50:19.320

如果您无权修改打印的源代码，您可以使用[`freopen`](http://www.cplusplus.com/reference/clibrary/cstdio/freopen/)on`stdout`重定向到文件：

```
stdout = freopen("my_log.txt", "w", stdout); 
```

然而，这接近于黑客攻击，因为命令行重定向将按预期停止工作。如果您确实有权访问执行打印的代码，`fprintf`则首选使用。

您也可以将您的`stdout`临时切换为函数调用，然后将其放回：

```
FILE *saved = stdout;
stdout = fopen("log.txt", "a");
call_function_that_prints_to_stdout();
fclose(stdout);
stdout = saved; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-08T11:02:50.750

这通常通过 I/O 重定向 (... >file) 完成。

检查这个小程序：

```
#include <stdio.h>
#include <unistd.h>

int main (int argc, char *argv[]) {
    if (isatty (fileno (stdout)))
        fprintf (stderr, "output goes to terminal\n");
    else
        fprintf (stderr, "output goes to file\n");

    return 0;
}

ottj@NBL3-AEY55:~ $ ./x
output goes to terminal
ottj@NBL3-AEY55:~ $ ./x >yy
output goes to file 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-08T11:01:47.253

其他答案无法解决不更改任何代码的问题。

因此，根据环境，唯一剩下的就是调用程序时的标准输出重定向。

```
./program > target_file 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-06-08T10:00:22.673

咨询了讲师，这是提供的正确解决方案（由讲师本人）：

```
int main {
    int newFile = open(desiredFilePath, O_WRONLY)
    if ((fork())==0) {
        dup2(newFile,stdout) // Explained below
        close newFile
        Set stdout as CLOSE_ON_EXEC false
        exec the user program
    }
    else{
        Wait for child
    }
    return 0
} 
```

dup2 背后的逻辑：这里 stdout 设置为 newFile 的副本，这意味着 FD 0 现在实际上是用户需要的文件，而不是控制台。这是因为 dup 2 的默认行为是关闭第二个参数的文件描述符并将其分配给第一个参数。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-08T10:44:55.180

使用要么`sprintf`写入字符串，然后写入文件，要么`fprintf`直接写入。

[http://linux.die.net/man/3/fprintf](http://linux.die.net/man/3/fprintf)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-08-20T05:37:04.410

**因为文件使用缓冲区，所以只`fflush(STDOUT_FILENO)`在 printf 之后使用****

# c# - 如何在被 Lync Client API 2010 拒绝后接受传入的视频呼叫？

> ID：10947336
> 
> 赞同：2
> 
> 时间：2012-06-08T10:42:04.433
> 
> 标签：c#, lync-2010

我正在使用 Lync Client API 2010 实现一个应用程序，该应用程序将允许用户通过它而不是通过 Lync 客户端窗口接受/拒绝 IM/音频/视频 Lync 对话。在大多数情况下，我可以让应用程序按预期工作，但以下情况除外：

1.  假设账户 LyncA 使用账户 LyncB 发起音频通话
2.  我的应用程序（安装在运行 LyncB 帐户的 PC 上）通过 ConversationAdded 事件检测到在 LyncB 帐户上创建了一个新的 lync 对话。
3.  单击我的应用程序上的接受按钮以接受来自 LyncA 的呼叫（然后我的应用程序将调用 AudioVideoModality 的 BeginConnect）。一切都按预期工作。LyncB 接受来自 LyncA 的音频呼叫。
4.  LyncA 单击 Lync 窗口上的视频按钮以将视频添加到对话中。
5.  LyncB 检测到并自动显示视频窗口，无需任何用户交互，视频通道开始传输。
6.  现在，单击 LyncB 的 Lync 窗口上的结束视频按钮以结束从 LyncA 传输的视频。视频停止，但音频通话仍在继续。
7.  现在，LyncA 再次单击 Lync 窗口上的视频按钮以将视频添加回对话中。
8.  这时，LyncB 会弹出一个“Accept/Decline”消息框，询问用户是否允许接受或拒绝视频传输。我的应用程序通过 AudioVideoModality 的事件 ActionAvailabilityChanged 检测到这一点。但是，我的应用程序此时无法使用 Lync API 2010 接受视频传输。我已经尝试了 AudioVideoModality 中的 Accept 方法以及 BeginConnect 方法。还尝试了 AudioVideoModality 中 VideoChannel 的 BeginStart，但仍然无法接受传入的视频传输。在调用 BeginConnect 方法时，它抛出了 UnauthorizedAccessException 异常。

有没有其他人在这里遇到同样的问题？如果您能为我提供一些解决此问题的提示，我们将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T21:51:20.157

这只是一个猜测：可能 VideoChannel 仍然处于活动状态，但处于暂停状态。您可以尝试使用 AVModality BeginRetrieve 方法来检索视频。

视频通道的状态如何？

# mysql - 包含字符串的 mySQL MATCH AGAINST

> ID：10947340
> 
> 赞同：0
> 
> 时间：2012-06-08T10:42:16.583
> 
> 标签：mysql, sql, database, match

所以我对mysqls匹配有问题。

我需要做这样的事情：

```
SELECT somefield FROM my_table WHERE MATCH(somefield) AGAINST ('some 2 x 3'); 
```

“一些 2 x 3”是我正在寻找的东西。但问题是mysql搜索每个单词，所以它会搜索'some'，'2'，'x'和'3'，因为我不能在我的mysql设置中更改ft_min_word_len，所以这不起作用并忽略任何东西少于 2 个字符。

所以我想做的是在查询中对“2 x 3”位进行分组。所以它可以像这样出来？？？

```
SELECT somefield FROM my_table WHERE MATCH(somefield) AGAINST ('some {2 x 3}'); 
```

这将搜索“一些”和“2 x 3”

如果有可能我该怎么做？

感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T10:48:33.757

似乎全文不是您请求的正确解决方案。MySQL 不会索引短语`2 x 3`，甚至不会索引单词`some`，因为它在停用词列表中。我建议您扩展查询 with`OR somefield LIKE '%some 2 x 3%'`子句来处理全文搜索不够的情况。

# java - android java中的字符串比较

> ID：10947344
> 
> 赞同：1
> 
> 时间：2012-06-08T10:42:51.523
> 
> 标签：java, android, string

```
if(EditText1.getText().toString().equals("National"))
{
..  
.. 
} 
```

这实际上是在比较“国家”这个词不是吗？

我的需要是，它应该比较单词，但要比较“National”这个词的其余部分。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-08T10:50:45.127

不使用 ( `!`)：

```
if(!EditText1.getText().toString().equals("National")){...} 
```

# asp.net - 从代码隐藏更改过程值？

> ID：10947351
> 
> 赞同：0
> 
> 时间：2012-06-08T10:43:26.503
> 
> 标签：asp.net, ajax, percentage

我使用 ASP.NET

我想在数据库工作时从代码隐藏向用户显示百分比。

我认为问题就在这里，当我从 cs percentege 调用这个函数时，工作正常！

```
 protected void btnUpdate_Click(object sender, EventArgs e)
  {
        System.Threading.Thread.Sleep(5000);
  } 
```

但我真正的代码是连接数据库并插入 300 - 1000 行！当它工作时，服务器光标图标变为忙碌图标，所以它冻结了，我无法设置我的百分比值。

请帮忙...

我有一个网络服务：

```
 public double CommittedCount = 0;

    [WebMethod]
    public string ShowPercentage()
    {
        return ((CommittedCount / FinishCount) * 100 ).ToString();
    }

    [WebMethod]
    public void SetCommittedCount(double committedCount)
    {
        CommittedCount = committedCount;
    }

    public double FinishCount
    {
        get
        {
                if(Glob.ExcelDataSet.Tables[0].Rows.Count > 0)
                    return Glob.ExcelDataSet.Tables[0].Rows.Count;
                return 1;

        }
    } 
```

我有一个ajaxcall函数：

```
function updateProgress() {
        $.ajax({
            type: "POST",
            url: '<%=ResolveUrl("~/processCalculator.asmx/ShowPercentage") %>',
            data: "{}",
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            async: true,
            success: function (msg) {
                // TODO: revert the line below in your actual code
                //$("#progressbar").progressbar("option", "value", msg.d);
                $(".percentage").text(msg.d);
                if (msg.d < 100) {
                    setTimeout(updateProgress, 100);
                }
            }
        });

    } 
```

我在点击时调用了 updateProgress 按钮：

```
<asp:Button Text="Sorgula" ID="btnAction" class="button_action" OnClick="Action_Click" Width="80px" runat="server" />

        $(".button_action").click(function () {
            var action_ = $(this).attr("value");
            var ExcelRowCount = $('#<%=ExcelActionsIsAvaibleRowCount.ClientID %>').val();
            if (ExcelRowCount != "") {
                if (confirm(ExcelRowCount + " kayıt için [" + action_ + "] aksiyonu gerçekleştirilecek?")) {
                    setTimeout(updateProgress, 100);
                    return true;
                }
                else 
                {
                    return false;
                }
            }
        }); 
```

我的 Cs 操作代码受保护 void btnAction_Click(object sender, EventArgs e) {

```
...
...
for (int rowIndex = 1; rowIndex < Glob.ExcelDataSet.Tables[0].Rows.Count; rowIndex++)
{
   ...     
   ...                

   aksiyon_sonucu_ = action.InsertRow(
   Glob.ExcelDataSet.Tables[0].Rows[rowIndex], DegistirilebilirKolonlar, true);

  // my persentage
  processCalculater pCal = new processCalculater();
  pCal.SetCommittedCount(rowIndex);

  ...
  ... 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T10:55:50.903

您需要使用 PageAsyncTask （或其他一些多线程）。

这是来自 MSDN 的关于用法的文章，其中还有一个显示进度指示器的示例。

[http://msdn.microsoft.com/en-us/library/system.web.ui.pageasynctask.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.pageasynctask.aspx)

多线程的其他选项是：

```
ThreadPool.QueueUserWorkItem(s => System.Threading.Thread.Sleep(5000)) 
```

和

```
new Thread(() => System.Threading.Thread.Sleep(5000)){ IsBackground = true }.Start() 
```

这个想法是将您长时间运行的任务放入后台线程（使用上述任何技术）。传入您的上下文（会话）以保存您的进度。然后使用 AJAX 和 WebMethod，您可以访问会话数据并显示后台线程的进度。

# c - 打印文件的内容

> ID：10947352
> 
> 赞同：1
> 
> 时间：2012-06-08T10:43:35.250
> 
> 标签：c, string, realloc

```
openFile(argv[1],"r");
while(characterBuff != EOF)
{
    characterBuff = fgetc(examFile);
    memoryAlloc += 1;
    string = expandRealloc(string, memoryAlloc);
    appendString(string, characterBuff);
    printf("%s\n", string);
}
closeFile();
free(string); 
```

在以下代码中：我从 printf 获得的输出给了我 ackward 值，例如 [somehash]D[somehash]E[somehash]S[somehash]K

我得到的输出词是“DESK”，但是从内存中取出了各种随机的东西，我做错了什么？

注意：以下内容已使用 malloc(sizeof(char)) 分配，并在每次将单个 char 添加到字符串时重新分配。

即我应该得到的输出应该是：D De Des Desk 但我得到的不是我之前给你看的东西。

编辑：

```
char* expandRealloc(char* ptrS, size_t n)
{
    void *tmp;
    if((tmp = realloc(ptrS, n)) == NULL)
    {
        printf("Error: Memory leak possible; Closing Program");
        exit(EXIT_FAILURE);
    }
    else
    {
        ptrS = tmp;
        return ptrS;
    }
} 
```

我为 realloc 写了一个包装函数。感谢您的帮助，但它仍然没有解决问题，我在尝试打印结果时仍然得到 [somecrapmemoryhash][letter][somecrapmemoryhash][letter]。

附加字符串：

```
void appendString(char* inputString, int inputChar)
{
    int stringLenght = strlen(inputString);
    inputString[stringLenght - 1] = inputChar;
    inputString[stringLenght] = '\0';
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-08T11:06:58.647

当`realloc`被调用时，它可能会移动分配的内存，因此您需要将指针的旧内容替换为 realloc 返回的值。

尝试

```
char *temp_string;
    .
    .
    .
temp_string = realloc(string, memoryAlloc);
if(temp_string != NULL)
  string = temp_string; 
```

* * *

**编辑**

令我震惊的是，这里的大部分问题是使用用户编写的函数来完成长期以来一直是标准库一部分的事情。在不使用特殊包装器等的情况下修改此代码以使用标准库函数将不再困难，并且会导致更高的可靠性。例如，appendString 函数似乎是这里遇到的许多困难的根源。如果改为使用 strcat 函数（对源代码进行少量修改），则可以避免大量的恶化和拉扯头发。

标准库的存在是有充分理由的。它是一致的、可靠的、经过调试的、有用的，而且——嗯——它是标准。如果这里有人认为他们自己比为标准库做出贡献的数百人更聪明，那么他们很可能是错的。如果这里有人认为他们不能使用标准库中的函数来执行基本操作，因为他们的需求非常特殊，那么他们很可能是错误的。C 语言本身并不是特别特别——让我们面对现实吧，花括号并不是什么大不了的事 :-)——C 的力量直接来自“把所有东西都放在一个函数中”的哲学——即来自使用完成任务的函数库。标准库是初级C程序员需要学习的最基本的东西，

分享和享受。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-08T13:27:43.010

你的`appendString`功能是错误的 - 改变：

```
void appendString(char* inputString, int inputChar)
{
    int stringLenght = strlen(inputString);
    inputString[stringLenght - 1] = inputChar;
    inputString[stringLenght] = '\0';
} 
```

至：

```
void appendString(char* inputString, int inputChar)
{
    int stringLength = strlen(inputString);
    inputString[stringLength] = inputChar;
    inputString[stringLength + 1] = '\0';
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T11:31:08.257

您的字符串打印问题看起来很可疑，就像您的字符串末尾缺少`NULL`终止符......是否`appendString`需要添加终止符？

# php - php奇怪的错误与if？

> ID：10947355
> 
> 赞同：0
> 
> 时间：2012-06-08T10:43:52.107
> 
> 标签：php, activation

您好，我正在尝试创建一个帐户激活页面，但是当我尝试激活一个帐户时，它可以正常工作两次。所以基本上我的激活链接使用用base64_encode（）编码的用户ID和用crypt（sha512）编码的用户传递。所以我在注册页面上的代码如下所示：

```
 $qry = "SELECT * FROM users WHERE username='$username'"; 
    $res = mysql_query($qry);
    $row = mysql_fetch_row($res);
    $userid=$row[0];//gets the id of the user
    $userpass=$row[2];//gets the pass from database (which is already encoded)
    $userid=base64_encode($userid); //encodes userid
    $code=substr($userpass,6,strlen($userpass)-6); // cuts off some $6$xx$ information which is needed for crypt.
    $message="//here is some message and then the link 
    http://www.xxx.be/forum/confirm.php?userid=".$userid."&code=".$code;

    mail($email , "xxx registration confirmation" ,$message,"From:NoReply@xxx.be"); 
```

这是我在 confirm.php 中使用的代码：

```
$userid=base64_decode($_GET['userid']); 
$qry = "SELECT * FROM users WHERE id='$userid'"; 
$res = mysql_query($qry);
$row = mysql_fetch_row($res);
if ($userid%2==0) {
$pass=substr($row[2],0,strlen($row[2])-1);
} else {
$pass=$row[2];
}
if ($pass=="$6$10$".$_GET['code']) {
$qry = "UPDATE users SET activated=1
WHERE id=$userid"; 
$res = mysql_query($qry); 
```

所以我的问题来了：（confirm.php 中的第 5-9 行）我不明白为什么我必须这样做。每次我创建一个帐户时，它只在用户 ID 为奇数时才有效。如果它甚至在密码中添加了一个点。所以像这样：
用户ID：1密码：
用户ID：2密码：stackoverflow。

所以这就是为什么 $pass 没有匹配 "$6$10$".$_GET['code'] 并且整个代码失败的原因。我完全不知道为什么当我的用户 ID 为 0 时它会添加点。ps：confirm.php 中的第 5-9 行解决了这个问题。但我只想知道它为什么这样做。

**编辑：请在回答之前阅读整篇文章。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T11:00:46.787

```
if ($userid%2==0) {
    $pass=substr($row[2],0,strlen($row[2])-1);
} else {
    $pass=$row[2];
} 
```

该语句是无用的，它正在破坏您的代码。如果 userid == 偶数，那么它会从 $row[2] 字符串中截断最后一个字符。

要修复，您可以删除 if 语句并拥有

```
$pass = $row[2]; 
```

另外作为旁注，正如有人评论的那样，您应该考虑使用准备好的语句来防止 SQL 注入。或者*至少*在将您使用的 $_GET 变量放入查询之前对其进行清理。

# c# - 即使代码拼写错误也能搜索产品

> ID：10947357
> 
> 赞同：1
> 
> 时间：2012-06-08T10:43:53.083
> 
> 标签：c#

好吧，伙计们，我在这里陷入困境。

基本上我遇到的问题是，当人们在搜索某些东西时，他们在很多时候都错误地输入了代码，例如在搜索时：`K00000WEFLZ`他们错误地输入了 0，然后产品结果什么也没有返回，我基本上是想尝试让搜索检查搜索是否在字母“K”之后包含一定数量的 0（因为 K 总是会说 10+ 个 ID 号和至少 4-5 个 0），如果它会在搜索操作期间将其替换为“*”，并且无论他们输入的问题有多么错误，您仍然可以找到产品。

我知道我将不得不创建一个自定义类并覆盖它的默认值（但是其中很多无法访问/是私有的），因为默认搜索模式无法更改，因为这将为每个人更改它，我只想要它用于这个特定的站点。

我也不能在开头或结尾使用通配符，因为它有一个庞大的目录，它会将英里数与许多结果相匹配。

据我所知，这是处理默认逻辑类搜索的代码：

```
protected virtual IList<Product> CreateCustomCollection()
{
        var list = new List<Product>();

        switch (mode)
        {
            case ProductRepeaterMode.Search:

                if (Page.Request.QueryString["search"] != null && Page.Request.QueryString["search"].Length != 0)
                {
                    bool[] customString = new bool[5] { SearchCustomString1, SearchCustomString2, SearchCustomString3, SearchCustomString4, SearchCustomString5 };
                    IList<Product> results = Fabric.ObjectProvider.Get<IProductSearchCommand>().Search(Page.Request.QueryString["search"], out searchWords, IncludeSkus, IsPublicFacing, customString, CoreHttpModule.Session);

                    var retailOrder = WebStoreManager.CurrentOrder as IRetailOrder;
                    var accountOrder = WebStoreManager.CurrentOrder as IAccountOrder;

                    IList<Product> productsToRemove = new List<Product>();
                    IList<Product> productsToAdd = new List<Product>();

                    foreach (var product in results)
                    {
                        if (hideRestrictedProducts)
                        {
                            if (retailOrder != null)
                            {
                                if (!product.CanBePurchasedByRetailCustomer || product.AgentOnly)
                                    productsToRemove.Add(product);
                            }
                            else
                            {
                                if (accountOrder != null)
                                {
                                    var add = false;

                                    if (product.CanBePurchasedOnAccount)
                                        add = true;

                                    if (product.AgentOnly)
                                    {
                                        if (accountOrder.Agent != null)
                                            add = true;
                                        else
                                            add = false;
                                    }

                                    if (!add)
                                        productsToRemove.Add(product);
                                }
                            }
                        }

                        // Replace SKUs with lines
                        if (resolveSkusToLines)
                        {
                            var sku = product.Role as SkuProductRole;
                            if (sku != null)
                            {
                                productsToRemove.Add(product);
                                if (sku.Owner != null && sku.Owner.Product != null)
                                {
                                    var line = sku.Owner.Product;
                                    if (!results.Contains(line) && !productsToAdd.Contains(line))
                                        productsToAdd.Add(line);
                                }
                            }
                        }
                    }

                    foreach (Product product in productsToAdd)
                    {
                        results.Add(product);
                    }

                    foreach (Product product in productsToRemove)
                    {
                        results.Remove(product);
                    }

                    foreach (var result in results)
                        list.Add(result);
                }
                break;
        }
        return list;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T15:35:09.577

逻辑模糊，喜欢。我这样做的方式是，从搜索字符串本身构建一个正则表达式，它并没有说明它应该如何完成，但我会尽我最大的努力。

将正则表达式构建器视为自定义构建的压缩操作。从您的字符数组开始并从中构建正则表达式搜索，每当您在一行中找到 2 个相同的字符时，将第二个字符（并忽略第二个字符之外的任何其他字符）替换为“+”字符，然后使用正则表达式运行生成的搜索而不是精确的字符串匹配。

`K00000WEFLZ`会变成`K0+WEFLEZ`，并匹配 K，1 个或多个 0，WEFLEZ。该算法需要对任何重复的字符执行此操作，因此它可能会有点傻。类似的事情`KK000WWLEFF22`会来`K+0+W+LEF+2+`。搜索字符串并没有那么好，并且可能匹配很多您不想要的东西......但有效。或者您可以将其限制为仅替换 0 或 0。等等等等......无论最终效果如何。

我推荐的另一种方式是实时过滤。但它的用处更多地取决于预期的正常功能。用户输入值会更常见，还是更常见的是他们从其他地方复制/粘贴它。在第二种情况下，实时过滤完全没用。否则...重新过滤每个 keyPress 或 TextChanged 事件的列表。至少那时他们可能会知道整个列表何时消失，因为输入了一个额外的 0。

**编辑 - 添加代码示例**

```
private string RegStringZipper(string searchString)
    {
        StringBuilder sb = new StringBuilder();
        char lastChar = new char();
        bool plusFlag = false;
        foreach (char c in searchString)
        {
            if (sb.Length == 0)
            {
                sb.Append(c);
                lastChar = c;
            }
            else
            {
                if (lastChar == c)
                {//we have a repeating character
                    //Note: Here is also where if you only wanted to filter a specific character, like 0, you would check for it.
                    if (!plusFlag)
                    {//we have not already added the +
                        sb.Append('+');
                        plusFlag = true;
                    }
                    //else do nothing, skip the characer
                }
                else
                {
                    sb.Append(c);
                    plusFlag = false;
                    lastChar = c;
                }
            }
        }
        return sb.ToString();
    } 
```

至于我会将它放入您的代码中的哪个位置...这实际上取决于该搜索功能的实际工作方式，它不是我以前玩过的东西...说到这...如果它按看起来的方式工作喜欢它可能会工作，在上面的代码中用'+'换成'*'......

```
if (Page.Request.QueryString["search"] != null && Page.Request.QueryString["search"].Length != 0)
            {
                bool[] customString = new bool[5] { SearchCustomString1, SearchCustomString2, SearchCustomString3, SearchCustomString4, SearchCustomString5 };
                string SearchString = RegStringZipper(Page.Request.QueryString["search"]);
                //please note, given that I dont know what FabricProvider.Search works on, I dont actually know that this works as intended.
                IList<Product> results = Fabric.ObjectProvider.Get<IProductSearchCommand>().Search(SearchString, out searchWords, IncludeSkus, IsPublicFacing, customString, CoreHttpModule.Session); 
```

# php - 如何在该特定页面上选择导航菜单？

> ID：10947358
> 
> 赞同：0
> 
> 时间：2012-06-08T10:43:59.860
> 
> 标签：php, mysql, html

我正在使用 PHP 在网页上构建一个导航系统，它基本上从 MySQL 数据库中查询数据并在主菜单上显示为 ul、li 菜单。但我不知道如何在用户转到该页面时选择导航菜单。我有一个想法，但是当用户进入该页面时，默认情况下不会选择主菜单。

我还编写了一个 CSS 类，如果它是那个页面，则将该类赋予锚标记。

这是我的 PHP 代码：

```
//Query Functions 
function queryMenu() {
    $query = "SELECT * FROM menu_en";
    return $query;  
}

// Render Functions
function renderNav() {  
    $menus = queryMenu();
    $queryMenu = mysql_query($menus);
    while( $navigation = mysql_fetch_array($queryMenu) ){
        if( $navigation['id'] == $_GET['pageId'] ){
            echo '<li>
                    <a href="index.php?pageId="'.$navigation['id'].' class="selected" >'.$navigation['menu_title'].
                 '</a></li>';
        }else{
            echo '<li><a href="index.php?pageId="'.$navigation['id'].'>'.$navigation['menu_title'].'</a></li>';
        }
    }
} 
```

建议我一个更好的方法来做到这一点，因为我想提高我的 PHP 技能。如果上面的代码中有任何错误的方法，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T10:51:41.803

如果主页在 $_GET['pageId'] 未设置时，您可以使用 isset() 检查

```
if(isset($_GET['pageId'])) {
    $page = $_GET['pageId']
} else {
    $page = $homePageId; // the ID of the home page. 
} 
```

然后你会替换这一行：

```
if( $navigation['id'] == $_GET['pageId'] ){ 
```

用这条线：

```
if( $navigation['id'] == $page ){ 
```

如果我理解正确，我认为这会起作用。

# php - 在 numberArray 下拉列表中包含“0”

> ID：10947363
> 
> 赞同：0
> 
> 时间：2012-06-08T10:44:24.087
> 
> 标签：php, arrays, magento

是否可以在以下生成的下拉列表中包含选项“0”：-

```
'options' =>  Mage::helper('menu')->numberArray(5,Mage::helper('menu')->__('')), 
```

这是...的一部分

```
$fieldset->addField('column', 'select', array(
        'name' => 'column',
        'label' => Mage::helper('menu')->__('Column'),
        'title' => Mage::helper('menu')->__('Column'),
        'required' => true,
        'options' =>  Mage::helper('menu')->numberArray(5,Mage::helper('menu')->__('')),
    )); 
```

这会生成一个下拉列表 1-5 但我想在此下拉列表的开头包含 0 （或“无”或任何其他不是 1+ 整数的值）但我不确定如何编辑上面允许这样做。

如果有人可以建议需要什么，那就太好了。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T12:51:34.247

由于`numberArray()`不是原生的 Magento 方法，我们*无法*知道这个自定义方法到底做了什么。

但是，`Varien_Data_Form_Element_Fieldset::addField()`通常只需要一个简单的 assoc 数组作为`options`键的值，所以很可能这样的事情会起作用：

```
'options' => array(
    0 => 'none',
    1 => 'one',
    2 => 'two',
    3 => 'three',
    4 => 'four',
    5 => 'five'
), 
```

# python - 凸多边形之间的豪斯多夫距离

> ID：10947366
> 
> 赞同：2
> 
> 时间：2012-06-08T10:44:32.043
> 
> 标签：python, algorithm, computational-geometry

我有兴趣计算由它们的顶点定义的 2 个多边形（特别是几乎是矩形的四边形）之间的 Hausdorff 距离。它们可能重叠。

回想一下 $d_H(A,B) = \max(d(A,B), d(B,A))$ 其中 $d$ 是 Hausdorff 半度量 $d(A,B) = \sup_{a\在 A}\inf_{b\in B}d(a,b)$。

给定 $A$, ${A_i}$, $d(A,B)=\max{d(A_i,B)}$ 的有限不相交覆盖，是真的吗？其推论是 $d(A,B)=d(A\setminus B,B)$。

我找到了 Atallah [1 (PDF)](http://docs.lib.purdue.edu/cgi/viewcontent.cgi?article=1362&context=cstech&sei-redir=1&referer=http%3A%2F%2Fscholar.google.co.uk%2Fscholar_url%3Fhl%3Den%26q%3Dhttp%3A%2F%2Fdocs.lib.purdue.edu%2Fcgi%2Fviewcontent.cgi%253Farticle%253D1362%2526context%253Dcstech%26sa%3DX%26scisig%3DAAGBfm2KBgx4gRLwPm_PuNgeO-bP1KLiKA%26oi%3Dscholarr%26ei%3D87PRT4Ft6KPRBaGoua8E%26ved%3D0CAYQgAMoADAA#search=%22http%3A%2F%2Fdocs.lib.purdue.edu%2Fcgi%2Fviewcontent.cgi%3Farticle%3D1362%26context%3Dcstech%22)的一篇论文。我对使用 Python 工作很感兴趣，并且愿意接受任何预编程的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T14:58:53.170

在凸多边形的情况下，是从 的顶点到 中任意点`d(A, B)`的距离的最大值。因此，如果您可以计算任意点到凸多边形的距离，则豪斯多夫距离并不难计算。`A``B`

要计算从一个点到凸多边形的距离，您首先必须测试该点是否在多边形内（如果是，则距离为 0），然后如果不是，则找到到任何边界线段的最小距离。

您的另一个问题的答案是否定的。例如，让 A 和 B 都是以原点为中心的同一个 2x2 正方形。将 A 划分为 4 个 1x1 方格。[每个 A i]到 B的 Hausdorff 距离为`sqrt(2)`，但 A 到 B 的距离为 0。

**更新：**关于顶点的声明并不是很明显，因此我将绘制一个在任何有限维数上都很好的证明。我试图证明的结果是，在计算`d(A, B)`多边形和`B`凸面时，只要找到到 的顶点的距离就足够`A`了`B`。（最近的点`B`可能不是顶点，但最远的点之一`A`必须是顶点。）

由于两者都是有限的封闭形状，因此它们是紧凑的。从紧致性来看，必然存在一个点`p`，`A`即尽可能远离`B`。从紧致性来看，必然存在一个点`q`，`B`它尽可能地接近于`A`。

仅当`A`和`B`是同一个多边形时，该距离才为 0，在这种情况下，很明显我们在 的顶点处实现了该距离`A`。因此，在不失一般性的情况下，我们可以假设从`p`到有一个正距离`q`。

画出与从到`q`的线垂直的平面（在更高维度上，某种超平面）。任何一点都可以穿过这个平面吗？好吧，如果有一个，比如说，那么从到的线段上的每个点都必须在其中，因为是凸的。但是很容易证明，这条线段上一定有一个点比is 更接近，这与 的定义相矛盾。因此不能越过这个位面。`p``q``B``r``q``r``B``B``p``q``q``B`

显然`p`不可能是内点，因为如果是内点，那么继续沿着从`q`到的射线`p`，你会发现其中的点离后面有界`A`的平面更远，这与 的定义相矛盾。如果是 的一个顶点，则结果为真。因此，唯一有趣的情况是 if在边界上但不是顶点。`B``p``p``A``p``A`

如果是这样，那么`p`是在表面上。如果该表面不平行于我们构建的平面，则很容易沿着该表面行进，远离我们在后面界定的平面，并找到距离比`B`更远的点。因此，该表面必须平行于该平面。由于是有限的，因此该曲面必须在某个顶点处终止。这些顶点与该平面的距离与 相同，因此至少与 一样远。因此，至少存在一个离 尽可能远的顶点。`B``p``A``p``B``p``A``B`

这就是为什么找到从多边形的顶点到另一个多边形的距离的最大值就足够了。

（我把构建一对`q`没有顶点的多边形作为一个有趣的练习留给读者。）

# bootloader - Kexec on embeded images

> ID：10947370
> 
> 赞同：0
> 
> 时间：2012-06-08T10:44:53.977
> 
> 标签：bootloader

I'm trying to boot my kernel image (bzImage format and which is built using buildroot) with kexec. This bzImage got its embedded initrd too. But when I try kexec, it just hangs. I'm not sure where I can see kexec logs.

[root@localhost boot]# kexec -v kexec-tools-testing 20070330 released 30th March 2007

[root@localhost boot]# kexec -l /boot/bzImage -d --command-line=quiet noapic ro noswap setup_linux_vesafb: 800x600x16 @ f0000000 +1d4c00

[root@localhost boot]# kexec -e

Older kexec binary clearly mentions in help that it doesn't support bzImage yet but newer ones do support it. So I in fact tried all kexec versions (2.0.0/1/2/3 and some test versions too). But I get same result. I'm trying kexec from Centos 5.5 32 bit and bzImage is built for i386\. This is actually VM on Xenserver but I don't think that should matter anyway. Interestingly if I install my bzImage locally with grub.conf (and using same cmdline above), it boots fine with bootloader. So image seems to be fine.

I'm pretty new to Linux boot stuff so probably missing something very obvious here. Any help or pointers provided will be appreciated.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T05:26:30.023

Not sure what played magic here but upgrading busybox package inside kernel image (through buildroot) helped. It started booting fine with all kexec versions. There's one problem which I see is console of box is garbeled for some reason (post kexec) but if I ssh to box it shows everything fine.

# axapta - 安装 Dynamics ax 2012 时出现错误 1001

> ID：10947373
> 
> 赞同：1
> 
> 时间：2012-06-08T10:44:54.783
> 
> 标签：axapta, ax, dynamics-ax-2012

在安装 Dynamics AX 2012 时出现错误：“错误 1001”我尝试安装很多次，但每次都出现此错误，并且日志文件中出现此错误：

> > 安装：安装期间出错：2012-06-08 11:27:25Z >>安装：在 AOS 服务器安装程序中的安装自定义操作步骤期间发生错误

2012-06-08 11:27:26Z >>安装：只有自定义日志名称的前八个字符有意义，并且系统上已经有另一个使用给定名称的前八个字符的日志。给定名称：“Microsoft Dynamics AX 工作流”，现有日志名称：“Microsoft Web 部署”。2012-06-08 11:27:26Z >>安装：在 System.Diagnostics.EventLog.CreateEventSource(EventSourceCreationData sourceData)

2012-06-08 11:27:26Z 在 Microsoft.Dynamics.Setup.AosServer.CreateEventSourceIfItDoesNotExistForAxWorkflowRuntimeAos()

2012-06-08 11:27:26Z 在 Microsoft.Dynamics.Setup.AosServer.Install(InstallDriver installDriver)

2012-06-08 11:27:26Z 在 Microsoft.Dynamics.Setup.InstallDriver.Install（IDictionary stateSaver）

2012-06-08 11:27:26Z >>安装：AOS 服务器端 08/06/2012 11:26:51

2012-06-08 11:27:26Z 回滚程序集 'C:\Program Files\Microsoft Dynamics AX\60\Server\MicrosoftDynamicsAX\Bin\Microsoft.Dynamics.Setup.AosServer.dll'。

2012-06-08 11:27:26Z 受影响的参数有：

2012-06-08 11:27:26Z aosinstancename = MicrosoftDynamicsAX

2012-06-08 11:27:26Z 旁路警告 = 0

2012-06-08 11:27:26Z 程序集路径 = C:\Program Files\Microsoft Dynamics AX\60\Server\MicrosoftDynamicsAX\Bin\Microsoft.Dynamics.Setup.AosServer.dll

2012-06-08 11:27:26Z aosport = 2712

2012-06-08 11:27:26Z aosexe = Ax32Serv

2012-06-08 11:27:26Z bindir = C:\Program Files\Microsoft Dynamics AX\60\Server\MicrosoftDynamicsAX\Bin#

2012-06-08 11:27:26Z aosinstancenum = 01

2012-06-08 11:27:26Z installtype = notransaction

2012-06-08 11:27:26Z 日志文件 = C:\Program Files\Microsoft Dynamics AX\60\Server\MicrosoftDynamicsAX\Bin\Microsoft.Dynamics.Setup.AosServer.InstallLog

2012-06-08 11:27:26Z aosnettcpport = 8201

2012-06-08 11:27:26Z aoswsdlport = 8101

2012-06-08 11:27:26Z 设置语言 =

2012-06-08 11:27:26Z uilevel = 3

2012-06-08 11:27:26Z 行动 = 回滚

2012-06-08 11:27:26Z aosaccount = NT AUTHORITY\NETWORKSERVICE

2012-06-08 11:27:26Z

2012-06-08 11:27:26Z >>回滚：AOS 服务器启动 08/06/2012 11:27:01

2012-06-08 11:27:26Z >>回滚：尝试删除可能刚刚部分或完全安装的 AOS 服务器

2012-06-08 11:27:26Z >>回滚：netsh.exe http 删除 urlacl url=http://+:8101/DynamicsAx/Services/

2012-06-08 11:27:26Z >>回滚：

2012-06-08 11:27:26Z URL预留成功删除

2012-06-08 11:27:26Z

2012-06-08 11:27:26Z >>回滚：生成防火墙规则名称：'Dynamics AX 6.0 - MicrosoftDynamicsAX (RPC)'

2012-06-08 11:27:26Z >>回滚：关闭端口：'Dynamics AX 6.0 - MicrosoftDynamicsAX (RPC)'。

2012-06-08 11:27:26Z >>回滚：生成防火墙规则名称：'Dynamics AX 6.0 - MicrosoftDynamicsAX (NetTCP)'

2012-06-08 11:27:26Z >>回滚：关闭端口：'Dynamics AX 6.0 - MicrosoftDynamicsAX (NetTCP)'。

2012-06-08 11:27:26Z >>回滚：生成防火墙规则名称：'Dynamics AX 6.0 - MicrosoftDynamicsAX (WSDL)'

2012-06-08 11:27:26Z >>回滚：关闭端口：'Dynamics AX 6.0 - MicrosoftDynamicsAX (WSDL)'。

2012-06-08 11:27:26Z >>回滚：Unlodctr“动态服务器”

2012-06-08 11:27:26Z >>回滚：

2012-06-08 11:27:26Z Dynamics Server 的计数器尚未安装

2012-06-08 11:27:26Z >>回滚：在设置 AOS 服务器期间发生错误。程序运行：Unlodctr。参数：“动态服务器”

2012-06-08 11:27:26Z >>回滚：<<<=====警告=====>>>>

2012-06-08 11:27:26Z >>回滚：运行 lodctr.exe 发生错误。必须手动运行以下命令才能使 AOS 正常运行： Unlodctr "Dynamics Server"

2012-06-08 11:27:26Z >>回滚：AOS 服务器端 08/06/2012 11:27:02

2012-06-08 11:27:26Z 公共属性安装路径设置为“C:\Program Files\Microsoft Dynamics AX\60”。

2012-06-08 11:27:26Z 从注册表中检索到安装路径。值：'C:\Program Files\Microsoft Dynamics AX\60'

2012-06-08 11:27:26Z ***** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *****

2012-06-08 11:27:26Z 组件安装任务因错误而停止。

2012-06-08 11:27:26Z ***** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *****

2012-06-08 11:27:27Z S260FinishedInfo

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T11:59:55.847

看起来 Microsoft Web Deploy 和 Microsoft Dynamics AX 2012 Workflow 都尝试创建一个名为“Microsof”的自定义事件日志。如果您卸载 Microsoft Web Deploy，AX 安装是否成功？

# python - Python：在新的并行进程中开始媒体播放

> ID：10947375
> 
> 赞同：0
> 
> 时间：2012-06-08T10:44:59.157
> 
> 标签：python, media-player

对于一个允许我在播放时对媒体进行评分的小型媒体库，我需要同时运行媒体和 python shell。这就是我的想法：

```
def play(path):
  os.execlp("vlc.exe", "vlc.exe", path)

process = multiprocessing.Process(target=play, args=(somePath,))
process.start()
input("Press Enter to kill process")
process.terminate() 
```

外壳按预期工作，但没有播放任何内容。VLC 未启动。

如果我直接调用播放，则启动 vlc 并开始播放媒体。但是当然我失去了对 python shell 的控制。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T11:07:49.283

[使用subprocess 模块](http://docs.python.org/library/subprocess.html)将其作为子进程打开

```
subprocess.call('vlc.exe my video') 
```

# php - codeigniter 在视图中获取目录信息

> ID：10947378
> 
> 赞同：1
> 
> 时间：2012-06-08T10:45:07.970
> 
> 标签：php, codeigniter

我基本上很难将动态变量传递给视图。

我有如下的php函数：

 ````
public function scandir_recursive($directory, $filter=FALSE)
{
 // if the path has a slash at the end we remove it here
 if(substr($directory,-1) == '/')
 {
     $directory = substr($directory,0,-1);
 }

 // if the path is not valid or is not a directory ...
 if(!file_exists($directory) || !is_dir($directory))
 {
     // ... we return false and exit the function
     return FALSE;

 // ... else if the path is readable
 }elseif(is_readable($directory))
 {
     // initialize directory tree variable
     $directory_tree = array();

     // we open the directory
     $directory_list = opendir($directory);

     // and scan through the items inside
     while (FALSE !== ($file = readdir($directory_list)))
     {
         // if the filepointer is not the current directory
         // or the parent directory
         if($file != '.' && $file != '..')
         {
             // we build the new path to scan
             $path = $directory.'/'.$file;

             // if the path is readable
             if(is_readable($path))
             {
                 // we split the new path by directories
                 $subdirectories = explode('/',$path);

                 // if the new path is a directory
                 if(is_dir($path))
                 {
                     // add the directory details to the file list
                     $directory_tree[] = array(
                         'path'    => $path,
                         'name'    => end($subdirectories),
                         'kind'    => 'directory',

                         // we scan the new path by calling this function
                         'content' => scandir_recursive($path, $filter));

                 // if the new path is a file
                 }elseif(is_file($path))
                 {
                     // get the file extension by taking everything after the last dot
                     $extension = end(explode('.',end($subdirectories)));

                     // if there is no filter set or the filter is set and matches
                     if($filter === FALSE || $filter == $extension)
                     {
                         // add the file details to the file list
                         $directory_tree[] = array(
                             'path'      => $path,
                             'name'      => end($subdirectories),
                             'extension' => $extension,
                             'size'      => filesize($path),
                             'kind'      => 'file');
                     }
                 }
             }
         }
     }
     // close the directory
     closedir($directory_list);

     // return file list
     return $directory_tree;

// if the path is not readable ...
 }else{
     // ... we return false
     return FALSE;
    }
}
    </code> 
```

我需要使这样的函数可操作，因为我可以递归地回显从目录中检索到的数据并将这些数据传递给视图。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T10:54:56.977

在控制器中执行以下操作：

```
$data['directory_tree'] = scandir_recursive($directory);
$this->load->view('my_view', $data); 
```

在视图中，您可以像这样访问变量：

```
echo $directory_tree['path']; 
````

# wpf - 为什么 WPF 绑定以两种不同的方式处理 INotifyPropertyChanged？

> ID：10947380
> 
> 赞同：10
> 
> 时间：2012-06-08T10:45:12.730
> 
> 标签：wpf, binding, inotifypropertychanged

我最近发现 wpf 以两种不同的方式处理 INotifyPropertyChanged。我只想知道是什么原因。

让我们采用验证为 true 的正常双向绑定。

如果您将属性从 ui 设置为 viewmodel，它会像这样。

*   设置器调用开始
*   值集
*   INotifyPropertyChanged 已启动
*   INotifyPropertyChanged 完成
*   二传手完成
*   getter 调用并完成
*   IDataErrorInfo 调用并完成

但是如果您在视图模型中设置属性，它会像这样

*   设置器调用开始
*   值集
*   INotifyPropertyChanged 已启动
*   getter 调用并完成
*   IDataErrorInfo 调用并完成
*   INotifyPropertyChanged 完成
*   二传手完成

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-08T10:50:50.777

将属性从 UI 更改为 ViewModel 可能会导致死锁情况，这种情况可能会在两种情况下遇到结束较少的递归调用。为了阻止这种情况发生，当 WPF 对模型进行更改时，它会继续通过 INotifyPropertyChanged 跟踪更改，但此更改将在调度程序队列中排队，并在其当前更新完成后执行。

由于 viewmodel 中的更改不是由 WPF 发起的，因此 WPF 不会对操作进行排队，它会立即执行更改。

# asp.net - 如何在由字符串构造的 xml 中显示 &

> ID：10947381
> 
> 赞同：2
> 
> 时间：2012-06-08T10:45:14.050
> 
> 标签：asp.net, xml-parsing, asp.net-mvc-4, asp.net-web-api

我正在使用 asp.net mvc4 创建一个 web api，响应输出是 xml。在输出到浏览器之前，我修改了 xml 响应，以便开始标记和结束标记之间的值之一包含一个 url 字符串，该字符串可能具有“ **&** ”在浏览器中输出时，这会生成一个错误，即 xml 格式不正确。我已经阅读了[如何在 XML 属性中显示 & 这将由 XSLT](https://stackoverflow.com/questions/7897761/how-to-show-in-a-xml-attribute-that-would-be-produced-by-xslt)生成，可以使用 DOE 使用 xslt 生成未转义的内容，但不知道这如何适用于从字符串生成并显示在浏览器中的 xml

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T11:26:51.647

您应该将 & 编码为

```
&amp; 
```

XML 可以理解（参见[http://en.wikipedia.org/wiki/List_of_XML_and_HTML_character_entity_references#Predefined%5Fentities%5Fin%5FXML](http://en.wikipedia.org/wiki/List_of_XML_and_HTML_character_entity_references#Predefined%5Fentities%5Fin%5FXML)）

另一种选择是将输出包围在 CDATA 标记中 (http://stackoverflow.com/questions/2784183/what-does-cdata-in-xml-mean)

# asp.net - 在asp.net中重写网址？

> ID：10947382
> 
> 赞同：0
> 
> 时间：2012-06-08T10:45:15.490
> 
> 标签：asp.net, url-rewriting, url-routing

我正在研究asp.net web 应用程序。

请指导我在 asp.net 中重写 url：

我需要更改以下链接

```
http://www.faredepot.com/ViewArticle.aspx?aid=1 
```

至

```
http://www.faredepot.com/Cheap_Flights_to_Atlanta.html 
```

我怎样才能做到这一点我试过如下

```
void Application_BeginRequest(object sender, EventArgs e) {

        string fullOrigionalpath = Request.Url.ToString();

        if (fullOrigionalpath.Contains("http://www.faredepot.com/Cheap_Flights_to_Atlanta.html")) {
            Context.RewritePath("http://www.faredepot.com/ViewArticle.aspx?aid=1");
        }
    } 
```

或者尝试在 web.config 中执行此操作

```
<rewriter>
    <rewrite url="http://www.faredepot.com/ViewArticle.aspx?aid=1" to="http://www.faredepot.com/Cheap_Flights_to_Atlanta.htm" />
</rewriter> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T10:49:24.817

您在这里对所有可能的解决方案进行了很好的细分：[http ://weblogs.asp.net/scottgu/archive/2007/02/26/tip-trick-url-rewriting-with-asp-net.aspx](http://weblogs.asp.net/scottgu/archive/2007/02/26/tip-trick-url-rewriting-with-asp-net.aspx)

您使用的是哪个版本的 IIS？对于 IIS7 使用它自己的 URL 重写模块，对于 II6 使用 Intelligencia [UrlRewriter.NET：http://urlrewriter.net/](http://urlrewriter.net/)

# wpf - 检查多个BackgroundWorker的进度

> ID：10947384
> 
> 赞同：2
> 
> 时间：2012-06-08T10:45:29.687
> 
> 标签：wpf, progress-bar, backgroundworker

所以我使用循环创建了多个 BackgroundWorker：

```
 foreach (var item in list)
  {
    worker = new BackgroundWorker();
    worker.DoWork += worker_DoWork;
    worker.RunWorkerAsync(item);
  } 
```

现在我只是不知道如何检查所有这些工人是否完成了工作？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T11:11:57.067

您可以保留一个活跃工作人员列表，并让每个工作人员在完成后自行删除：

```
List<BackgroundWorker> workers = new List<BackgroundWorker>();

...

  foreach (var item in list)
  {
    worker = new BackgroundWorker();
    worker.DoWork += worker_DoWork;
    workers.Add(worker);
    worker.RunWorkerCompleted += delegate(object s, RunWorkerCompletedEventArgs args)
    {
        BackgroundWorker worker = (BackgroundWorker)s;
        workers.Remove(worker);
    }
    worker.RunWorkerAsync(item);
  }

...

public bool IsWorkDone
{
    get { return workers.Count == 0; }
} 
```

如果您不想合并 IsWorkDone，则可以在`workers.Remove(worker)`列表为空之后引发事件...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T11:17:43.010

假设`workers`是代表工人列表的变量，`_completedWorkersCount`是完成工作的工人的数量......

```
 worker.RunWorkerCompleted +=
    (o, e) =>
     {
         _completedWorkersCount = workers.Where(w => !w.IsBusy).Count();
     }; 
```

# javascript - 如何更改单个输入值而不是批量？

> ID：10947386
> 
> 赞同：0
> 
> 时间：2012-06-08T10:45:42.833
> 
> 标签：javascript, jquery, javascript-events

我有一个项目列表，每个项目都有一个复选框和一个文本输入框。当复选框被选中时，我想将此项目的“menu_order_input”值设置为 0。

```
 jQuery(document).ready( function($) {
       $(document).on('change','input[type="checkbox"][name^="gal-item"]',
       function(){
           $('.menu_order_input').val(0);
 }); 
```

使用上面的代码，当一个选中一个复选框时，所有项目菜单_Order_input值都设置为0。如何获得此函数以仅更改一个项目的值？

**[编辑]** menu_order_input”被包装在一个div中，复选框没有任何包装。它被javascript插入到“menue_order”div之前的html中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T10:49:51.447

它取决于您的 HTML 标记。

如果它们都在表格行中，例如您可以使用`$(this).closest('tr').find('menu_order_input').val(0);`

或者如果输入紧跟复选框，则使用： `$(this).next('.menu_order_item').val(0);`

或来自[jQuery 的众多其他函数中的任何一个：遍历 DOM](http://api.jquery.com/category/traversing/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T10:56:30.243

```
$(this).siblings('.menu_order_input').val(0); 
```

# php - 提交php表单

> ID：10947387
> 
> 赞同：-3
> 
> 时间：2012-06-08T10:45:52.537
> 
> 标签：php, sql, forms

我正在编写一个 php 代码，用户在其中输入各种详细信息，然后以表格形式提交它们。但是，当我提交它时，我得到了一个错误：

> 警告：mysql_query() [function.mysql-query]：第 95 行 /home/sifeiitd/public_html/wh.php 中的用户 'sifeiitd'@'localhost' 的访问被拒绝（使用密码：否）
> 
> 警告：mysql_query() [function.mysql-query]：无法在第 95 行的 /home/sifeiitd/public_html/wh.php 中建立到服务器的链接

我的php代码是

```
<?php
                //include the connection file

                require_once('functions/connection.php');
                require_once('functions/functions.php');

                $display_query = mysql_query("SELECT * FROM eportal");

                    echo "<table id='pageTable'><thead><tr><th>Item code</th><th>Image</th><th>Description</th><th>Cost</th></tr></thead>";
                    echo "<tbody>";
                    while($row = mysql_fetch_array($display_query)){
                        print "<tr><td>".$row['itemid']."</td><td>"."</td><td>".$row['description']."</td><td>";
                        print "&#8377;".$row['cost']."</td></tr>";
                    }
                    echo "</tbody>";
                    echo "</table>";
                    mysql_close($connection);

            ?>
            <?php

            //save the data on the DB and send the email

            //If the user has submitted the form
            if($_POST['submit']){
                //protect the posted value then store them to variables
                $name = protect($_POST['name']);
                $email = protect($_POST['email']);
                $contact=protect($_POST['contact']);
                $itemid=protect($_POST['itemid']);
                $itemquantity=protect($_POST['itemquantity']);
                $ip = gethostbyname($_SERVER['REMOTE_ADDR']);
                $message = protect($_POST['message']);
                //Check if the username or password boxes were not filled in
                if(!$name || !$email || !$contact || !$itemid){
                    //if not display an error message
                    echo "<center>Fields marked with <strong>&#40; &#42; &#421</strong> are mandatory!</center>";
                    }else{
                    //if the were continue checking
                        $result = mysql_query("INSERT INTO `wh_order` (`name`, `email`, `contact`, `itemid`, `itemquantity`, `ip`,`message`) VALUES('".$name."','".$email."','".$contact."','".$itemid."','".$itemquantity."','".$ip."','".$message."')");
                         //send the email with the order
                         if($result)
                            {
                                //send the email

                                $to = "ps@xyz.com";
                                $subject = "New order for Weaving Hope";

                                //headers and subject
                                $headers  = "MIME-Version: 1.0\r\n";
                                $headers .= "Content-type: text/html; charset=iso-8859-1\r\n";
                                $headers .= "From: ".$name." <".$email.">\r\n";

                                $body = "New contact<br />";
                                $body .= "Name: ".$name."<br />";
                                $body .= "Email: ".$email."<br />";
                                $body .= "Contact No.: ".$contact."<br />";
                                $body .= "Item Id: ".$itemid."<br />";
                                $body .= "Quantity: ".$itemquantity."<br />";
                                $body .= "Comment: ".$message."<br />";
                                $body .= "IP: ".$ip."<br />";

                                mail($to, $subject, $body, $headers);

                                //ok message

                                echo "Your message has been sent";
                            }
                        }
                    }
            ?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T10:47:04.710

> 用户 'sifeiitd'@'localhost' 的访问被拒绝（使用密码：否）

对我来说，这似乎是一个非常明显的错误。检查您的`mysql_connect()`陈述，可能在`connection.php`.

# solr - Solr/Lucene 可以做模糊场崩溃吗？

> ID：10947388
> 
> 赞同：1
> 
> 时间：2012-06-08T10:45:56.770
> 
> 标签：solr, lucene, grouping, similarity, collapse

**编辑**

Solr 可以做模糊场崩溃吗？IE 折叠具有相似值而不是相同值的字段？

我认为它可以，但现在我不确定，这使得我下面的原始问题无效。

**原始问题**

对于大量给定的值，我需要确定哪个是最普遍的。所有值的集合都会随着时间而变化，因此我可以预期输出也会随着时间而变化。

我收集 Solr 可以执行“字段折叠”以按给定字段对结果进行分组，并具有相似性的容差。是否有可能，甚至合适，仅使用 Solr 来折叠字段，以获得最常见的值？我们在业务的其他部分使用 Solr，最好利用现有代码而不是自制解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T11:38:07.193

不，solr 不支持模糊折叠。（至少不是基于 wiki 上记录的内容）

Solr 4.0 支持`group.func`允许您根据[FunctionQuery](http://wiki.apache.org/solr/FunctionQuery)的结果对结果进行分组，因此有可能在某个时间点创建一个函数来获得您想要的大致结果，但是现有的函数都不能满足您的需求.

但是，Solr 确实支持结果[**聚类**](http://wiki.apache.org/solr/ClusteringComponent)，这可能适用于您的用例。聚类是用[Carrot ²](http://project.carrot2.org/)完成的。如果将胡萝卜使用的字段限制为单个字段，您可能会得到与“模糊聚类”类似的结果，但与字段折叠相比，您对胡萝卜所做的控制要少得多。

对于普通文档，您可能希望通过胡萝卜分析所有字段，例如：

```
carrot.title=my_title&carrot.snippet=my_title,my_description 
```

但是，例如，如果您有一个`manufacturer`拼写或标点符号略有变化的字段，则可能只为胡萝卜提供一个字段用于`title`和`snippet`：

```
carrot.title=manufacturer&carrot.snippet=manufacturer 
```

# javascript - 如何设置 mobiscroll 的 maxDate？

> ID：10947396
> 
> 赞同：0
> 
> 时间：2012-06-08T10:46:27.953
> 
> 标签：javascript, maxdate, mobiscroll

我想知道如何在 mobiscroll 上设置最大日期。我知道我应该使用 maxDate 选项，但我无法在任何地方找到字符串的格式。任何人都可以帮忙吗？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-11T09:13:39.427

我不熟悉 mobiscroll，但如果我理解正确，它的[文档](http://docs.mobiscroll.com/)说*maxDate*接受`Date`全局对象。因此，实际上，格式可以是标准 JavaScript 接受的任何格式`Date`：

这是`Date`来自 MDN 的文档：[https ://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Date](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Date)

并从中引用了一些使用示例：

```
new Date("December 17, 1995 03:24:00");
new Date(1995,11,17);
new Date(1995,11,17,3,24,0); 
```

# android - 如何制作可扩展列表Android

> ID：10947398
> 
> 赞同：3
> 
> 时间：2012-06-08T10:46:34.537
> 
> 标签：android, android-listview

我想制作一个具有 1 级和 2 级的可扩展列表，通常应显示 1 级列表，当单击 1 级列表项时，2 级将打开左侧。请指导我如何做到这一点。

![在此处输入图像描述](../Images/450cc5033887a45e3658b8ab05580b56.png)

我阅读了很多教程，但都在向下/而不是左侧或右侧扩展列表 level2。请指导我。提前致谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T11:31:51.583

这似乎是一个有趣的 hack。我也在实现类似的东西，我是你应该从[我](http://udinic.wordpress.com/2011/09/03/expanding-listview-items/)开始的地方开始。它为您提供了一些关于我们正在尝试实现的想法。顺便说一句，这是著名的 ANY.Do 应用程序的开发人员的博客，该应用程序具有该功能。

# c# - 如何在 C# 项目中实现和执行 OCR？

> ID：10947399
> 
> 赞同：52
> 
> 时间：2012-06-08T10:46:47.020
> 
> 标签：c#, ocr

我已经搜索了一段时间，并且我看到了一些 OCR 库请求。我想知道如何实现最纯粹、易于安装和使用带有详细信息的 OCR 库以安装到 C# 项目中。

如果可能的话，我只想像通常的 dll 引用一样实现它......

例子：

```
using org.pdfbox.pdmodel;
using org.pdfbox.util; 
```

还有一个小的 OCR 代码示例会很好，例如：

```
public string OCRFromBitmap(Bitmap Bmp)
{
    Bmp.Save(temppath, System.Drawing.Imaging.ImageFormat.Tiff);
    string OcrResult = Analyze(temppath);
    File.Delete(temppath);
    return OcrResult;
} 
```

因此，请考虑到我对 OCR 项目并不熟悉，并给我一个类似于与假人交谈的答案。

**编辑：** 我猜人们误解了我的要求。我想知道如何将这些开源 OCR 库实现到 C# 项目以及如何使用它们。作为 dup 给出的链接根本没有给出我要求的答案。

* * *

## 回答 #1

> 赞同：120
> 
> 时间：2014-12-09T17:32:48.537

如果有人正在研究这个，我一直在尝试不同的选择，下面的方法产生了非常好的结果。以下是获取工作示例的步骤：

1.  将[.NET Wrapper for tesseract](https://github.com/charlesw/tesseract)添加到您的项目中。它可以通过 NuGet 包`Install-Package Tesseract`( [https://github.com/charlesw/tesseract](https://github.com/charlesw/tesseract) ) 添加。
2.  转到官方[Tesseract](https://code.google.com/p/tesseract-ocr/)项目的[下载](https://code.google.com/p/tesseract-ocr/downloads/list)部分（ [https://code.google.com/p/tesseract-ocr/](https://code.google.com/p/tesseract-ocr/)**编辑：** 它现在位于此处：[https](https://github.com/tesseract-ocr/langdata) ://github.com/tesseract-ocr/langdata ）。
***   下载首选语言数据，例如：`tesseract-ocr-3.02.eng.tar.gz English language data for Tesseract 3.02`.*   在您的项目中创建`tessdata`目录并将语言数据文件放入其中。*   转到`Properties`新添加的文件并将它们设置为在构建时复制。*   添加对`System.Drawing`.*   从 .NET Wrapper 存储库中，在`Samples`目录中将示例`phototest.tif`文件复制到您的项目目录中，并将其设置为在构建时复制。*   在您的项目中创建以下两个文件（只是为了开始）：**

 ****程序.cs**

```
using System;
using Tesseract;
using System.Diagnostics;

namespace ConsoleApplication
{
    class Program
    {
        public static void Main(string[] args)
        {
            var testImagePath = "./phototest.tif";
            if (args.Length > 0)
            {
                testImagePath = args[0];
            }

            try
            {
                var logger = new FormattedConsoleLogger();
                var resultPrinter = new ResultPrinter(logger);
                using (var engine = new TesseractEngine(@"./tessdata", "eng", EngineMode.Default))
                {
                    using (var img = Pix.LoadFromFile(testImagePath))
                    {
                        using (logger.Begin("Process image"))
                        {
                            var i = 1;
                            using (var page = engine.Process(img))
                            {
                                var text = page.GetText();
                                logger.Log("Text: {0}", text);
                                logger.Log("Mean confidence: {0}", page.GetMeanConfidence());

                                using (var iter = page.GetIterator())
                                {
                                    iter.Begin();
                                    do
                                    {
                                        if (i % 2 == 0)
                                        {
                                            using (logger.Begin("Line {0}", i))
                                            {
                                                do
                                                {
                                                    using (logger.Begin("Word Iteration"))
                                                    {
                                                        if (iter.IsAtBeginningOf(PageIteratorLevel.Block))
                                                        {
                                                            logger.Log("New block");
                                                        }
                                                        if (iter.IsAtBeginningOf(PageIteratorLevel.Para))
                                                        {
                                                            logger.Log("New paragraph");
                                                        }
                                                        if (iter.IsAtBeginningOf(PageIteratorLevel.TextLine))
                                                        {
                                                            logger.Log("New line");
                                                        }
                                                        logger.Log("word: " + iter.GetText(PageIteratorLevel.Word));
                                                    }
                                                } while (iter.Next(PageIteratorLevel.TextLine, PageIteratorLevel.Word));
                                            }
                                        }
                                        i++;
                                    } while (iter.Next(PageIteratorLevel.Para, PageIteratorLevel.TextLine));
                                }
                            }
                        }
                    }
                }
            }
            catch (Exception e)
            {
                Trace.TraceError(e.ToString());
                Console.WriteLine("Unexpected Error: " + e.Message);
                Console.WriteLine("Details: ");
                Console.WriteLine(e.ToString());
            }
            Console.Write("Press any key to continue . . . ");
            Console.ReadKey(true);
        }

        private class ResultPrinter
        {
            readonly FormattedConsoleLogger logger;

            public ResultPrinter(FormattedConsoleLogger logger)
            {
                this.logger = logger;
            }

            public void Print(ResultIterator iter)
            {
                logger.Log("Is beginning of block: {0}", iter.IsAtBeginningOf(PageIteratorLevel.Block));
                logger.Log("Is beginning of para: {0}", iter.IsAtBeginningOf(PageIteratorLevel.Para));
                logger.Log("Is beginning of text line: {0}", iter.IsAtBeginningOf(PageIteratorLevel.TextLine));
                logger.Log("Is beginning of word: {0}", iter.IsAtBeginningOf(PageIteratorLevel.Word));
                logger.Log("Is beginning of symbol: {0}", iter.IsAtBeginningOf(PageIteratorLevel.Symbol));

                logger.Log("Block text: \"{0}\"", iter.GetText(PageIteratorLevel.Block));
                logger.Log("Para text: \"{0}\"", iter.GetText(PageIteratorLevel.Para));
                logger.Log("TextLine text: \"{0}\"", iter.GetText(PageIteratorLevel.TextLine));
                logger.Log("Word text: \"{0}\"", iter.GetText(PageIteratorLevel.Word));
                logger.Log("Symbol text: \"{0}\"", iter.GetText(PageIteratorLevel.Symbol));
            }
        }
    }
} 
```

**格式化控制台记录器.cs**

```
using System;
using System.Collections.Generic;
using System.Text;
using Tesseract;

namespace ConsoleApplication
{
    public class FormattedConsoleLogger
    {
        const string Tab = "    ";
        private class Scope : DisposableBase
        {
            private int indentLevel;
            private string indent;
            private FormattedConsoleLogger container;

            public Scope(FormattedConsoleLogger container, int indentLevel)
            {
                this.container = container;
                this.indentLevel = indentLevel;
                StringBuilder indent = new StringBuilder();
                for (int i = 0; i < indentLevel; i++)
                {
                    indent.Append(Tab);
                }
                this.indent = indent.ToString();
            }

            public void Log(string format, object[] args)
            {
                var message = String.Format(format, args);
                StringBuilder indentedMessage = new StringBuilder(message.Length + indent.Length * 10);
                int i = 0;
                bool isNewLine = true;
                while (i < message.Length)
                {
                    if (message.Length > i && message[i] == '\r' && message[i + 1] == '\n')
                    {
                        indentedMessage.AppendLine();
                        isNewLine = true;
                        i += 2;
                    }
                    else if (message[i] == '\r' || message[i] == '\n')
                    {
                        indentedMessage.AppendLine();
                        isNewLine = true;
                        i++;
                    }
                    else
                    {
                        if (isNewLine)
                        {
                            indentedMessage.Append(indent);
                            isNewLine = false;
                        }
                        indentedMessage.Append(message[i]);
                        i++;
                    }
                }

                Console.WriteLine(indentedMessage.ToString());

            }

            public Scope Begin()
            {
                return new Scope(container, indentLevel + 1);
            }

            protected override void Dispose(bool disposing)
            {
                if (disposing)
                {
                    var scope = container.scopes.Pop();
                    if (scope != this)
                    {
                        throw new InvalidOperationException("Format scope removed out of order.");
                    }
                }
            }
        }

        private Stack<Scope> scopes = new Stack<Scope>();

        public IDisposable Begin(string title = "", params object[] args)
        {
            Log(title, args);
            Scope scope;
            if (scopes.Count == 0)
            {
                scope = new Scope(this, 1);
            }
            else
            {
                scope = ActiveScope.Begin();
            }
            scopes.Push(scope);
            return scope;
        }

        public void Log(string format, params object[] args)
        {
            if (scopes.Count > 0)
            {
                ActiveScope.Log(format, args);
            }
            else
            {
                Console.WriteLine(String.Format(format, args));
            }
        }

        private Scope ActiveScope
        {
            get
            {
                var top = scopes.Peek();
                if (top == null) throw new InvalidOperationException("No current scope");
                return top;
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-06-08T10:57:04.857

这是一个：（查看[http://hongouru.blogspot.ie/2011/09/c-ocr-optical-character-recognition.html](http://hongouru.blogspot.ie/2011/09/c-ocr-optical-character-recognition.html)或[http://www.codeproject.com/Articles/41709/How-To-使用-Office-2007-OCR-Using-C](http://www.codeproject.com/Articles/41709/How-To-Use-Office-2007-OCR-Using-C)了解更多信息）

```
using MODI;
static void Main(string[] args)
{
    DocumentClass myDoc = new DocumentClass();
    myDoc.Create(@"theDocumentName.tiff"); //we work with the .tiff extension
    myDoc.OCR(MiLANGUAGES.miLANG_ENGLISH, true, true);

    foreach (Image anImage in myDoc.Images)
    {
        Console.WriteLine(anImage.Layout.Text); //here we cout to the console.
    }
} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-06-08T21:22:52.460

我正在使用带有 TessNet2 的 tesseract OCR 引擎（一个 C# 包装器 - [http://www.pixel-technology.com/freeware/tessnet2/](http://www.pixel-technology.com/freeware/tessnet2/)）。

一些基本代码：

```
using tessnet2; 
```

...

```
Bitmap image = new Bitmap(@"u:\user files\bwalker\2849257.tif");
            tessnet2.Tesseract ocr = new tessnet2.Tesseract();
            ocr.SetVariable("tessedit_char_whitelist", "0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz.,$-/#&=()\"':?"); // Accepted characters
            ocr.Init(@"C:\Users\bwalker\Documents\Visual Studio 2010\Projects\tessnetWinForms\tessnetWinForms\bin\Release\", "eng", false); // Directory of your tessdata folder
            List<tessnet2.Word> result = ocr.DoOCR(image, System.Drawing.Rectangle.Empty);
            string Results = "";
            foreach (tessnet2.Word word in result)
            {
                Results += word.Confidence + ", " + word.Text + ", " + word.Left + ", " + word.Top + ", " + word.Bottom + ", " + word.Right + "\n";
            } 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2018-12-27T19:04:37.700

一些在线 API 运行良好：[ocr.space](https://ocr.space/)和[Google Cloud Vision](https://cloud.google.com/vision/)。只要您每月执行的 OCR 少于 1000 个，这两个都是免费的。您可以拖放图像以进行快速手动测试，以查看它们对您的图像的执行情况。

我发现 OCR.space 更易于使用（不要乱用 nuget 库），但就我的目的而言，Google Cloud Vision 提供的结果略好于 OCR.space。

谷歌云视觉示例：

```
GoogleCredential cred = GoogleCredential.FromJson(json);
Channel channel = new Channel(ImageAnnotatorClient.DefaultEndpoint.Host, ImageAnnotatorClient.DefaultEndpoint.Port, cred.ToChannelCredentials());
ImageAnnotatorClient client = ImageAnnotatorClient.Create(channel);
Image image = Image.FromStream(stream);

EntityAnnotation googleOcrText = client.DetectText(image).First();
Console.Write(googleOcrText.Description); 
```

OCR.space 示例：

```
string uri = $"https://api.ocr.space/parse/imageurl?apikey=helloworld&url={imageUri}";
string responseString = WebUtilities.DoGetRequest(uri);
OcrSpaceResult result = JsonConvert.DeserializeObject<OcrSpaceResult>(responseString);
if ((!result.IsErroredOnProcessing) && !String.IsNullOrEmpty(result.ParsedResults[0].ParsedText))
  return result.ParsedResults[0].ParsedText; 
```**

# c# - 解析表达式和检索解析树的最简单方法是什么？

> ID：10947400
> 
> 赞同：1
> 
> 时间：2012-06-08T10:47:01.107
> 
> 标签：c#, vb.net, parsing, .net-2.0, expression-trees

我只想解析简单的表达式，例如-

```
IIF(FVAL(PFC) = TRUE, (IIF((ORGVAL(BAS, "2012/12/31") + ORGVAL(DA)) < 6500, (FVAL(BAS)  + FVAL(DA)) * 12%, 780)), 0)` 
```

解析完这个我应该能够知道哪些函数包含哪些参数。

```
|-FVAL
       |-PFC
|-ORGVAL 
       |-BAS
       |-"2012/12/31" 
```

我坚持使用 .Net Framework 2.0，所以对我来说没有 Linq 或 lambda 表达式好东西。此外，我想将代码包含在我的自定义库中，而不仅仅是引用它。谁能指出我一些好的库或代码。

我只需要解析而不是评估表达式并找到正在使用的标记。找到标记后，我需要在解析之前更改表达式字符串，例如如果使用函数`ORGVAL`，则传递的参数必须以下划线作为前缀。喜欢`ORGVAL(BAS)`将转变为`ORGVAL(_BAS)`。有些函数可以有两个参数，例如`ORGVAL(BAS, "2012/12/31")`，这将转换为`ORGVAL(_BAS, "2012/12/31")`

**注意：如果有其他方法，请告诉我。我很想避免使用解析器和词法分析器。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T11:27:34.440

这看起来像是一个未经修饰但完整的表达式解析器（尚未对其进行测试，但可能是一个起点）。

[http://gbacon.blogspot.it/2005/09/simple-expression-parser-in-c.html](http://gbacon.blogspot.it/2005/09/simple-expression-parser-in-c.html)

它很旧，但您提到了 C# 2.0，所以无论如何它可能没问题。我不确定它针对的是哪个版本的 C#。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T11:31:27.480

如果您不介意使用其中一种 .NET 语言编写代码，则可以使用 CodeDom 即时编译代码，然后将其作为仅内存程序集执行。例如，这将是您展示的示例表达式的最接近的近似值：

```
private abstract class Logic
{
    protected double FVAL(object arg)
    {
        // put code here
        return 0;
    }

    protected double ORGVAL(object arg)
    {
        // put code here
        return 0;
    }

    protected double ORGVAL(object arg, string date)
    {
        // put code here
        return 0;
    }

    public abstract double GetValue(object PFC, object BAS, object DA);
}

private class DynamicLogic : Logic
{
    public override double GetValue(object PFC, object BAS, object DA)
    {
        return (FVAL(PFC) = true ? ((ORGVAL(BAS, "2012/12/31") + ORGVAL(DA)) < 6500 ? (FVAL(BAS) + FVAL(DA)) * .12 : 780) : 0);
    }
}

private Logic GenerateLogic(string code)
{
    using (CSharpCodeProvider provider = new CSharpCodeProvider())
    {
        StringBuilder classCode = new StringBuilder();
        classCode.AppendLine("private class DynamicLogic : Logic");
        classCode.AppendLine("    {");
        classCode.AppendLine("        public override int GetValue(object PFC, object BAS, object DA)");
        classCode.AppendLine("        {");
        classCode.AppendLine("            return (" + code + ");");
        classCode.AppendLine("        }");
        classCode.AppendLine("    }");
        CompilerParameters p = new CompilerParameters();
        p.GenerateInMemory = true;
        p.ReferencedAssemblies.Add(Assembly.GetExecutingAssembly().Location);
        CompilerResults results = provider.CompileAssemblyFromSource(p, code);
        return (Logic)Activator.CreateInstance(type);
        if (results.Errors.HasErrors)
        {
            throw new Exception("Failed to compile DynamicLogic class");
        }
        return (Logic)results.CompiledAssembly.CreateInstance("DynamicLogic");
    }
}

private double evaluate(object PFC, object BAS, object DA)
{
    Logic logic = GenerateLogic("FVAL(PFC) = true ? ((ORGVAL(BAS, \"2012/12/31\") + ORGVAL(DA)) < 6500 ? (FVAL(BAS) + FVAL(DA)) * .12  : 780) : 0");
    return logic.GetValue(PFC, BAS, DA);
} 
```

**编辑：**我知道你说你需要真正得到表达式三，它本身，不仅仅是评估它，而是我处理了代码，所以我想我会继续并将它发布给未来的路人。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-13T05:44:17.860

你想做的事情听起来很像解析，所以我认为你不会很幸运地找到不涉及解析的解决方案。如果您想说的是您不想自己编写解析器，那么有几个可用的数学表达式解析库。

我是 Jep.Net (http://www.singularsys.com/jep.net) 的作者之一，它是一个可能适合您需求的表达式解析组件。它有据可查，高度可定制，肯定会让您跳过实现自己的自定义解析器的繁琐且容易出错的过程。如果它不适合您，谷歌搜索“.net 表达式解析库”将为您提供其他库。

祝你好运！

# visual-studio-2010 - 在 Silverlight 5 和 Visual Studio 2010 SP1 的 XAML 编辑器中禁用 Intellisense

> ID：10947402
> 
> 赞同：1
> 
> 时间：2012-06-08T10:47:05.147
> 
> 标签：visual-studio-2010, silverlight, xaml, intellisense, silverlight-5.0

几天前，我在 Visual Studio 2010 SP1 中的 Silverlight 5 项目的 XAML 编辑器停止工作。在它运作良好之前。我在网上看到这是一个已知问题，但我找不到原因，特别是解决方案（如果存在）。

皮莱吉

我在这里更新了我的问题： [https ://stackoverflow.com/questions/10976820/visual-studio-2010-sp1-silverlight-5-behavior-disables-xaml-intellisense](https://stackoverflow.com/questions/10976820/visual-studio-2010-sp1-silverlight-5-behavior-disables-xaml-intellisense)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T12:34:39.530

当您添加阻止智能感知的 xmlns 定义时，通常会发生这种情况。

造成这种情况的主要原因有两个：

1.  您在 xaml 所在的同一程序集中引用了一个命名空间，它看起来像这样：

    `xmlns:myLabel="clr-namespace:MyAssembly.MyNamespace"`

    这是一个简单的修复，只需`;assembly=`在最后添加，所以它看起来像这样：

    `xmlns:myLabel="clr-namespace:MyAssembly.MyNamespace;assembly="`

2.  您引用了具有影响反射的内部错误的程序集。这是一个更大的问题，因为很难找到反射不喜欢的东西。因此，我知道处理它的唯一方法是删除（注释）有问题的 xmlns 定义并在整个 xaml 中使用蓝色波浪线（但使用智能感知），然后在构建项目之前添加 xmlns 定义. 是的，这是一个主要的 PITA。:(

希望在您的情况下，这是第一个原因。

# android - 在 Xml 中的 mainclass 中加载 CustomView 类

> ID：10947416
> 
> 赞同：1
> 
> 时间：2012-06-08T10:48:03.943
> 
> 标签：android, view

我尝试在 xml 中加载我的主类中的 customview 类。因为要将图像保存在视图中，我在 xml 中创建了按钮，所以我需要在我的 xml 的框架布局中加载这些自定义视图。通过开始这些，我只是将视图类放在线性布局中，它会导致 forceclose :(

我的 MainClass.java

```
public class FingerPaint extends Activity
    implements ColorPickerDialog.OnColorChangedListener {    
int height,width;
@Override

protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    Display display = getWindowManager().getDefaultDisplay(); 
    width = display.getWidth();  // deprecated
    height = display.getHeight();   
    Log.i("FingerPaint", ""+width+""+height);
    //setContentView(new MyView(this));--->It Works fine. But need these in xml
    setContentView(R.layout.paint);

    mPaint = new Paint();
    mPaint.setAntiAlias(true);
    mPaint.setDither(true);
    mPaint.setColor(0xFFFF0000);
    mPaint.setStyle(Paint.Style.STROKE);
    mPaint.setStrokeJoin(Paint.Join.ROUND);
    mPaint.setStrokeCap(Paint.Cap.ROUND);
    mPaint.setStrokeWidth(12);

    mEmboss = new EmbossMaskFilter(new float[] { 1, 1, 1 },
                                   0.4f, 6, 3.5f);

    mBlur = new BlurMaskFilter(8, BlurMaskFilter.Blur.NORMAL);
}

private Paint       mPaint;
private MaskFilter  mEmboss;
private MaskFilter  mBlur;

public void colorChanged(int color) {
    mPaint.setColor(color);
}

public class MyView extends View {

    private static final float MINP = 0.25f;
    private static final float MAXP = 0.75f;

    private Bitmap  mBitmap;
    private Canvas  mCanvas;
    private Path    mPath;
    private Paint   mBitmapPaint;

    public MyView(Context c) {
        super(c);
        Bitmap bm = BitmapFactory.decodeFile("/sdcard/angel.jpg");
        if (bm != null) {
            setBackgroundDrawable(new BitmapDrawable(bm));
            Log.i("FingerPaint", "setbackground"+bm.getHeight());
        }
        mBitmap = Bitmap.createBitmap(width, height, Bitmap.Config.ARGB_8888);
        mCanvas = new Canvas(mBitmap);

        mPath = new Path();
        mBitmapPaint = new Paint(Paint.DITHER_FLAG);
    }

    public MyView(Context context, AttributeSet attrs) {
        super(context, attrs);
        mBitmap = Bitmap.createBitmap(width, height, Bitmap.Config.ARGB_8888);
        mCanvas = new Canvas(mBitmap);

        mPath = new Path();
        mBitmapPaint = new Paint(Paint.DITHER_FLAG);
   }

    public MyView(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);

    }

    @Override
    protected void onSizeChanged(int w, int h, int oldw, int oldh) {
        super.onSizeChanged(w, h, oldw, oldh);
    }

    @Override
    protected void onDraw(Canvas canvas) {
       // canvas.drawColor(0xFFAAAAAA);

        canvas.drawBitmap(mBitmap, 0, 0, mBitmapPaint);

        canvas.drawPath(mPath, mPaint);
    }

    private float mX, mY;
    private static final float TOUCH_TOLERANCE = 4;

    private void touch_start(float x, float y) {
        mPath.reset();
        mPath.moveTo(x, y);
        mX = x;
        mY = y;
    }
    private void touch_move(float x, float y) {
        float dx = Math.abs(x - mX);
        float dy = Math.abs(y - mY);
        if (dx >= TOUCH_TOLERANCE || dy >= TOUCH_TOLERANCE) {
            mPath.quadTo(mX, mY, (x + mX)/2, (y + mY)/2);
            mX = x;
            mY = y;
        }
    }
    private void touch_up() {
        mPath.lineTo(mX, mY);
        // commit the path to our offscreen
        mCanvas.drawPath(mPath, mPaint);
        // kill this so we don't double draw
        mPath.reset();
    }

    @Override
    public boolean onTouchEvent(MotionEvent event) {
        float x = event.getX();
        float y = event.getY();

        switch (event.getAction()) {
            case MotionEvent.ACTION_DOWN:
                touch_start(x, y);
                invalidate();
                break;
            case MotionEvent.ACTION_MOVE:
                touch_move(x, y);
                invalidate();
                break;
            case MotionEvent.ACTION_UP:
                touch_up();
                invalidate();
                break;
        }
        return true;
    }
}

private static final int COLOR_MENU_ID = Menu.FIRST;
private static final int EMBOSS_MENU_ID = Menu.FIRST + 1;
private static final int BLUR_MENU_ID = Menu.FIRST + 2;
private static final int ERASE_MENU_ID = Menu.FIRST + 3;
private static final int SRCATOP_MENU_ID = Menu.FIRST + 4;

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    super.onCreateOptionsMenu(menu);

    menu.add(0, COLOR_MENU_ID, 0, "Color").setShortcut('3', 'c');
    menu.add(0, EMBOSS_MENU_ID, 0, "Emboss").setShortcut('4', 's');
    menu.add(0, BLUR_MENU_ID, 0, "Blur").setShortcut('5', 'z');
    menu.add(0, ERASE_MENU_ID, 0, "Erase").setShortcut('5', 'z');
    menu.add(0, SRCATOP_MENU_ID, 0, "SrcATop").setShortcut('5', 'z');

    /****   Is this the mechanism to extend with filter effects?
    Intent intent = new Intent(null, getIntent().getData());
    intent.addCategory(Intent.CATEGORY_ALTERNATIVE);
    menu.addIntentOptions(
                          Menu.ALTERNATIVE, 0,
                          new ComponentName(this, NotesList.class),
                          null, intent, 0, null);
    *****/
    return true;
}

@Override
public boolean onPrepareOptionsMenu(Menu menu) {
    super.onPrepareOptionsMenu(menu);
    return true;
}

@Override
public boolean onOptionsItemSelected(MenuItem item) {
    mPaint.setXfermode(null);
    mPaint.setAlpha(0xFF);

    switch (item.getItemId()) {
        case COLOR_MENU_ID:
            new ColorPickerDialog(this, this, mPaint.getColor()).show();
            return true;
        case EMBOSS_MENU_ID:
            if (mPaint.getMaskFilter() != mEmboss) {
                mPaint.setMaskFilter(mEmboss);
            } else {
                mPaint.setMaskFilter(null);
            }
            return true;
        case BLUR_MENU_ID:
            if (mPaint.getMaskFilter() != mBlur) {
                mPaint.setMaskFilter(mBlur);
            } else {
                mPaint.setMaskFilter(null);
            }
            return true;
        case ERASE_MENU_ID:
            mPaint.setXfermode(new PorterDuffXfermode(PorterDuff.Mode.CLEAR));
            /*//mPaint.setXfermode(new PorterDuffXfermode(PorterDuff.Mode.SRC)); 
            mPaint.setColor(Color.TRANSPARENT);*/
            return true;
        case SRCATOP_MENU_ID:
            mPaint.setXfermode(new PorterDuffXfermode(
                                                PorterDuff.Mode.SRC_ATOP));
            mPaint.setAlpha(0x80);
            return true;
    }
    return super.onOptionsItemSelected(item);
} 
```

}

和paint.xml一样，

```
<?xml version="1.0" encoding="utf-8"?>
    <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >
    <com.powercamerapro.FingerPaint.MyView android:id="@+id/myView1"
     android:layout_width="wrap_content" android:layout_height="wrap_content">
     </com.powercamerapro.FingerPaint.MyView>
    </LinearLayout> 
```

它抛出异常，

```
ERROR/AndroidRuntime(670): Caused by: java.lang.ClassNotFoundException: com.powercamerapro.FingerPaint.MyView in loader dalvik.system.PathClassLoader@44e8c840 
```

请指出我的错误以及如何纠正这些错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T10:49:19.043

像这样使用内部类 com.powercamerapro.FingerPaint$MyView

并使用`<view class="com.powercamerapro.FingerPaint$MyView" />` +

```
You need to add public static to the inner class 
```

# java - 从特定字节开始读取

> ID：10947417
> 
> 赞同：0
> 
> 时间：2012-06-08T10:48:09.963
> 
> 标签：java, android

如何从特定字节开始读取？我有以下代码：

```
 try {
            while ( (len = f.read(buffer)) > 0 ) {}         
        } 
```

例如，我想从 50 字节开始读取。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T11:21:55.817

您应该使用跳过方法。 [http://developer.android.com/reference/java/io/InputStream.html#skip(long](http://developer.android.com/reference/java/io/InputStream.html#skip(long) )

您可以跳过所需的字节数。

```
int nbToSkip = 50
while (nbToSkip > 0) {
   int nbSkipped = f.skip( nbToSkip );
   nbToSkip -= nbSkipped ; 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T11:00:50.430

我不确定“f”的类型是什么，但我会假设它是某种流。

另外，您的意思是要读取 50 个字节的块，还是从流中的第 50 个字节开始？我假设后者。

不确定您使用的是什么语言，但无论如何都可以：

也许有一种寻找功能，您可以使用它寻找流中的特定位置，如下所示：

```
f.seek(50, SEEK_START); 
```

否则，您可以通过从流中读取 50 个字节或 50 次 1 个字节来以穷人的方式做到这一点。

没有更多参考，很难给你一个好的答案。

# iphone - 无法在 iPhone 上加载/安装应用程序

> ID：10947418
> 
> 赞同：0
> 
> 时间：2012-06-08T10:48:19.750
> 
> 标签：iphone, ios, xcode

在完成从如何创建证书到向 Xcode 添加临时证书的每一步之后，我无法在 iphone 上加载应用程序。

我正在使用 Xcode 4.2 iOs 5 并尝试在 iOS 4.1 [iPhone 3G] 上加载应用程序。

当我在我的设备上运行其他示例应用程序时，它会成功安装并运行。

我的应用程序成功构建，并且我已经根据我的 iOS 配置了我的应用程序的 buld 设置。

可能的原因是什么？

请帮忙。

仅出于测试目的，我的应用由一个单独的 UIButton 组成，仅此而已。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T11:07:16.890

在应用程序构建设置中，将部署目标设置为低于您的设备 ios。Xcode 模板从 5.0 开始，希望对您有所帮助。

*我正在使用 Xcode 4.2 iOs 5 并尝试在 iOS 4.1 上加载应用程序*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T11:35:25.553

查看帖子[在使用 Xcode 4.2 和 iOS 5 SDK 时是否可以针对较旧的 iOS 版本？](https://stackoverflow.com/questions/7760946/is-it-possible-to-target-older-ios-versions-when-using-xcode-4-2-and-ios-5-sdk)由mmorris回答。

它帮助了我。

# .net - Linqpad 工作目录

> ID：10947422
> 
> 赞同：0
> 
> 时间：2012-06-08T10:48:37.997
> 
> 标签：.net, linqpad

当我在 Linqpad 中运行我的代码时，它的工作目录是什么？
是否有一个 UI 来指定它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T14:14:09.583

现在的答案是，LINQPad 的工作目录是未定义的。

是的，有一个很好的论据可以使这个可预测并且有 Util.Cd 方法来改变它。让我们在这里讨论一下以避免 StackOverflow 离题警察：http: [//forum.linqpad.net/](http://forum.linqpad.net/)

# scala - Specs2：使用消息忽略规范？

> ID：10947423
> 
> 赞同：28
> 
> 时间：2012-06-08T10:48:42.710
> 
> 标签：scala, testing, specs2

我需要将我的一个测试用例置于*“待定”*状态。

我想给它添加一些消息，在运行测试时可以在输出中显示，比如带有`@Ignore("Pending: issue #1234 needs to be fixed")`.

Specs2 有对应的吗？

```
class MySpec extends mutable.Specification {
  args(skipAll = true) // Can I include a message here in the output somehow?

  "cool MyClass feature" should {
    "which is broken unfortunately" in {
      failure
    }
  }
} 
```

提前致谢！

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-06-08T11:09:17.117

对于一个单独的例子，我相信你可以使用：

```
class MySpec extends mutable.Specification {

  "cool MyClass feature" should {
    "which is broken unfortunately" in {
      failure
    }.pendingUntilFixed("message about the issue")
  }

} 
```

我不知道是否有一种方法可以扩展它以将规范中的所有示例标记为带有相同消息的待处理，正如您似乎希望的那样。

# javascript - 如何在其他脚本之前运行 javascript 脚本？

> ID：10947424
> 
> 赞同：3
> 
> 时间：2012-06-08T10:48:44.800
> 
> 标签：javascript, javascript-events, html

您知道是否可以确保 Javascript 脚本站点首先在网页中运行？

对于上下文，我试图`span`在另一个库（就像 cufon）启动并与原始内容混淆之前标记每个。由于不可能`onLoad()`在跨度上使用，这是我能看到在客户端执行此操作的唯一方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-08T10:51:34.973

优先顺序由加载的顺序决定。

1.  头标签脚本（按它们列出的顺序）
2.  脚本和其他事件属性按它们在代码中出现的顺序排列。
3.  车身负载

我确实混淆了 #2 和 #3 - 澄清**在整个正文（包括脚本）加载*****后*****触发正文 onLoad 事件**

 *此外，如果将脚本更改`<span>`标签放置在 head 标签中（除非它们是一个函数），则脚本会在加载时运行，而当 head 加载时，body 和 span 标签尚未加载。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T10:51:48.623

将`<script>`标签放在页面源代码中您需要修改的内容之后，但在任何其他脚本之前。脚本的运行顺序与其标签出现在页面上的顺序相同。*

# linux - Linux 用户空间 L2 控制协议

> ID：10947433
> 
> 赞同：1
> 
> 时间：2012-06-08T10:49:27.063
> 
> 标签：linux, sockets, kernel, drivers, ethernet

我有一个网络设备，其中以太网交换机芯片的端口连接到 CPU 的网络控制器。交换芯片将数据包从其他端口转发到 CPU 端口，并添加特殊的头（在 MAC 头之前），其中包含入口端口等信息。

我可以在网络控制器驱动程序中接收数据包时剥离头部，这样Linux网络堆栈就可以与交换机正常通信。然而，我的目标是将特殊标头中的一些信息传递给用户空间第 2 层控制协议套件。

在我的例子中，第 2 层控制协议通常会使用原始套接字来接收其控制帧。例如，生成树协议必须能够分辨数据包来自哪个交换机端口。

此外，http、telnet 服务器等服务应该能够使用相同的网络接口。

是否有任何 Linux 内置方法可以将此类信息从驱动程序传递到用户空间网络服务器/客户端？如果没有，有什么建议可以实施吗？

我可以实现一个简单的 ioctl 调用来向驱动程序查询所读取的最后一个数据包的标头信息。但是，不能保证该设备没有被 和 之间的其他进程`recv()`使用`ioctl()`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T11:32:15.823

我认为实现这一点的最佳方法是添加一个字段[`sk_buff`](http://lxr.linux.no/#linux+v3.3.1/include/linux/skbuff.h#L381)来存储您的特殊 L2 标头。`sk_buff`如果我理解正确，则在将s 从一层传递到另一层时应保留标头，尽管您可能需要向[`skb_clone`](http://lxr.linux.no/#linux+v3.3.1/net/core/skbuff.c#L584).

如果你达到了这一点，那么将这个值发送到用户空间只会受到你的想象力的限制。例如，您可以

1.  将值存储在套接字结构中[`sock`](http://lxr.linux.no/#linux+v3.3.1/include/net/sock.h#L260)，稍后使用`ioctl`;将其返回
2.  直接返回`recvfrom`'s中的值[`src_addr`](http://lxr.linux.no/#linux+v3.3.1/net/ipv4/udp.c#L1162)

希望这有帮助。

# php - 在 onclick() 函数中传递多个单词

> ID：10947434
> 
> 赞同：1
> 
> 时间：2012-06-08T10:49:27.823
> 
> 标签：php, javascript, jquery, onclick

单击链接时，我想将包含几个单词的字符串传递给 jQuery。
它适用于整数或单个单词的参数，但当参数是由几个单词组成的字符串时，该函数不会执行。
例子：

```
$name='Steve';
$fullName='Steve Jobs';

<a href="javascript:void(0)" onclick="send(<? echo $name; ?>)">Link 1</a>
<a href="javascript:void(0)" onclick="send(<? echo $fullName; ?>)">Link 2</a> 
```

Javascript代码：

```
function send(name){
    alert (name);
} 
```

***链接 1***有效。
***链接 2***不起作用。
如何使***Link 2***工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T10:52:27.090

您需要在 echo'd 变量周围加上引号，因为它们将被解释为字符串，而不是 javascript 变量名：

```
<a href="javascript:void(0)" onclick="send('<? echo $name; ?>')">Link 1</a>
<a href="javascript:void(0)" onclick="send('<? echo $fullName; ?>')">Link 2</a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T10:53:08.747

你需要引号`<?echo ... ?>`

```
<a href="javascript:void(0)" onclick="send('<? echo $name; ?>')">Link 1</a>
<a href="javascript:void(0)" onclick="send('<? echo $fullName; ?>')">Link 2</a> 
```

# .net - 为什么从Form中删除GroupBox控件后，Form上没有创建TextBox？

> ID：10947435
> 
> 赞同：0
> 
> 时间：2012-06-08T10:49:28.790
> 
> 标签：.net, vb.net, winforms

我是 WinForms VB NET 编程的新手。

我需要在运行时创建文本框。

我找到了以下 VB NET 代码：

```
Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click

    Dim textbox1 As New TextBox
    textbox1.Name = "Textbox1"
    textbox1.Size = New Size(170, 20)
    textbox1.Location = New Point(70, 32)
    textbox1.Visible = True
    GroupBox1.Controls.Add(textbox1)  

End Sub 
```

当从 Form 中删除此行**GroupBox1.Controls.Add(textbox1)**和 GroupBox 控件时，在触发事件后不会在 Form 上创建 TextBox 。

知道为什么会这样吗？

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T11:57:18.187

子控件（如 TextBox）*必须*具有父控件才能可见。你可以通过设置它的 Parent 属性来给它一个父级，或者更常见的是通过将它添加到父级的 Controls 集合中。因此，如果您删除组框，那么您确实无法再看到文本框，它不会有父级。

随意将其添加到表单中：

```
Me.Controls.Add(textbox1) 
```

# sql - 在 sql server 中数据从一个表移动到另一个表的精度提高

> ID：10947436
> 
> 赞同：1
> 
> 时间：2012-06-08T10:49:37.657
> 
> 标签：sql, sql-server-2008, precision

我们的sql server 2008中有三个表

1.  交易订单
2.  交易装运
3.  交易子订单。

其中三个有一个共同的列**Carrying_cost**。三个表中的数据类型相同。它是浮点数，NUMERIC_PRECISION 53 和 NUMERIC_PRECISION_RADIX 2。

1.  在表 1 - transact_orders 中，该列的三行值为 5.1。转换（十进制（20,15），携带成本）`5.100000`在这里返回......

2.  表 2 - transact_shipments 三行正在从 transact_orders 中的这三行获取 Carrying_cost。转换（十进制（20,15），携带成本）`5.100000`在这里也返回.....。

3.  表 3 - transact_child_orders 总结了来自 transact_shipments 的这三个持有成本。那里显示的值是`15.3`我运行正常选择时的值。

但在这个稳定的`convert(decimal(20,15), carrying_cost)`回报。它也在 ui 中`15.299999999999999`显示了该值。`precision gained`虽然 ui 只是获取值，而不是进行任何转换。在 java 代码中，从 db 中获取值的变量定义为`double`.

步骤3中的代码，总结了三个carrying_costs很简单::

…… `sum(isnull(transact_shipments.carrying_costs,0)) sum_carrying_costs,`_

知道为什么这种变化发生在第三步吗？任何帮助将不胜感激。如果需要更多信息，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T11:21:05.117

我不会发表一堆评论，而是写一个答案。

浮点数不适用于不能接受舍入误差的精确值 - 例如金融。

浮点数可以从非常小的数字扩展到非常大的数字。但他们不会在不损失一定程度的准确性的情况下这样做。您可以在线查看详细信息，那里有很多好作品供您阅读。

但是，简单地说，这是因为它们是真正的二进制数——一些十进制数不能以 100% 的准确度表示为二进制值。 *（就像 1/3 不能以十进制 100% 准确度表示。）*

我不确定是什么导致了 DECIMAL 数据类型的性能问题，通常是因为正在进行一些隐式转换。 *（您在某处有一个浮点数，或者具有不同定义的小数等）*

但不管是什么原因；没有什么比整数算术更快的了。那么，存储你的值是整数吗？ `£1.10`可以存储为`110p`. 或者，如果您知道由于某种原因您会得到几分之一便士，`11000dp` *（十便士）*。

然后，您确实需要考虑您将达到的最大价值，以及是否`INT`更`BIGINT`合适。

此外，在处理整数时，请注意除法。如果你分成`£10`3个人，最后一个`1p`需要去哪里？ `£3.33`两个人和`£3.34`一个人？ `£0.01`被银行吃掉了？但是，总是不应该得到`lost to the digital elves`.

而且，显然，当向用户显示数字时，您需要将其操作回`£`而不是`dp`; 但无论如何你都需要经常这样做，以获得`£10k`or`£10M`等​​。

无论您做什么，如果您不想因浮点值导致舍入错误，请不要使用 FLOAT。

*（网上有很多关于如何使用浮点数的文章，更重要的是，如何不使用浮点数。这是一个很大的话题；只是不要陷入“它如此准确，令人惊叹，它可以做任何事情”的陷阱 - 我无法计算人们使用这种不幸的常见但幼稚的假设来搞砸数据的次数。）*

# android - 无法打开编辑器：Eclipse Android 中引发了意外异常

> ID：10947444
> 
> 赞同：3
> 
> 时间：2012-06-08T10:50:30.120
> 
> 标签：android, eclipse

当我尝试在 Eclipse的**res/layout/文件夹中打开 xml 文件时出现错误。**

我收到以下错误

```
java.lang.NullPointerException
at com.android.ide.eclipse.adt.internal.editors.layout.configuration.ConfigurationComposite.syncRenderState(ConfigurationComposite.java:2428)
at com.android.ide.eclipse.adt.internal.editors.layout.gle2.GraphicalEditorPart.activated(GraphicalEditorPart.java:934)
at com.android.ide.eclipse.adt.internal.editors.layout.LayoutEditorDelegate.delegatePageChange(LayoutEditorDelegate.java:450)
at com.android.ide.eclipse.adt.internal.editors.common.CommonXmlEditor.pageChange(CommonXmlEditor.java:358)
at org.eclipse.ui.part.MultiPageEditorPart.setActivePage(MultiPageEditorPart.java:1067)
at org.eclipse.ui.forms.editor.FormEditor.setActivePage(FormEditor.java:607)
at org.eclipse.ui.part.MultiPageEditorPart.createPartControl(MultiPageEditorPart.java:352)
at org.eclipse.ui.internal.EditorReference.createPartHelper(EditorReference.java:670)
at org.eclipse.ui.internal.EditorReference.createPart(EditorReference.java:465)
at org.eclipse.ui.internal.WorkbenchPartReference.getPart(WorkbenchPartReference.java:595)
at org.eclipse.ui.internal.EditorReference.getEditor(EditorReference.java:289)
at org.eclipse.ui.internal.WorkbenchPage.busyOpenEditorBatched(WorkbenchPage.java:2945)
at org.eclipse.ui.internal.WorkbenchPage.busyOpenEditor(WorkbenchPage.java:2850)
at org.eclipse.ui.internal.WorkbenchPage.access$11(WorkbenchPage.java:2842)
at org.eclipse.ui.internal.WorkbenchPage$10.run(WorkbenchPage.java:2793)
at org.eclipse.swt.custom.BusyIndicator.showWhile(BusyIndicator.java:70)
at org.eclipse.ui.internal.WorkbenchPage.openEditor(WorkbenchPage.java:2789)
at org.eclipse.ui.internal.WorkbenchPage.openEditor(WorkbenchPage.java:2773)
at org.eclipse.ui.internal.WorkbenchPage.openEditor(WorkbenchPage.java:2764)
at org.eclipse.ui.ide.IDE.openEditor(IDE.java:651)
at org.eclipse.ui.ide.IDE.openEditor(IDE.java:610)
at org.eclipse.jdt.internal.ui.javaeditor.EditorUtility.openInEditor(EditorUtility.java:355)
at org.eclipse.jdt.internal.ui.javaeditor.EditorUtility.openInEditor(EditorUtility.java:164)
at org.eclipse.jdt.ui.actions.OpenAction.run(OpenAction.java:249)
at org.eclipse.jdt.ui.actions.OpenAction.run(OpenAction.java:228)
at org.eclipse.jdt.ui.actions.SelectionDispatchAction.dispatchRun(SelectionDispatchAction.java:275)
at org.eclipse.jdt.ui.actions.SelectionDispatchAction.run(SelectionDispatchAction.java:251)
at org.eclipse.jdt.internal.ui.packageview.PackageExplorerActionGroup.handleOpen(PackageExplorerActionGroup.java:376)
at org.eclipse.jdt.internal.ui.packageview.PackageExplorerPart$4.open(PackageExplorerPart.java:538)
at org.eclipse.ui.OpenAndLinkWithEditorHelper$InternalListener.open(OpenAndLinkWithEditorHelper.java:48)
at org.eclipse.jface.viewers.StructuredViewer$2.run(StructuredViewer.java:866)
at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)
at org.eclipse.ui.internal.JFaceUtil$1.run(JFaceUtil.java:49)
at org.eclipse.jface.util.SafeRunnable.run(SafeRunnable.java:175)
at org.eclipse.jface.viewers.StructuredViewer.fireOpen(StructuredViewer.java:864)
at org.eclipse.jface.viewers.StructuredViewer.handleOpen(StructuredViewer.java:1152)
at org.eclipse.jface.viewers.StructuredViewer$6.handleOpen(StructuredViewer.java:1256)
at org.eclipse.jface.util.OpenStrategy.fireOpenEvent(OpenStrategy.java:275)
at org.eclipse.jface.util.OpenStrategy.access$2(OpenStrategy.java:269)
at org.eclipse.jface.util.OpenStrategy$1.handleEvent(OpenStrategy.java:309)
at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:84)
at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1053)
at org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:4165)
at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3754)
at org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:2701)
at org.eclipse.ui.internal.Workbench.runUI(Workbench.java:2665)
at org.eclipse.ui.internal.Workbench.access$4(Workbench.java:2499)
at org.eclipse.ui.internal.Workbench$7.run(Workbench.java:679)
at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:332)
at org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:668)
at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:149)
at org.eclipse.ui.internal.ide.application.IDEApplication.start(IDEApplication.java:123)
at org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:196)
at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:110)
at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:79)
at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:344)
at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:179)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
at java.lang.reflect.Method.invoke(Unknown Source)
at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:622)
at org.eclipse.equinox.launcher.Main.basicRun(Main.java:577)
at org.eclipse.equinox.launcher.Main.run(Main.java:1410) 
```

当我尝试通过**Android Common xml Layout**打开 xml 文件时，出现此错误。任何人都可以帮助我.....提前谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T11:30:41.847

**我认为eclipse**有什么东西崩溃了。您最好更改 Eclipse 工作区路径。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T15:43:49.017

如果您遇到此类错误，请尝试使用其他编辑器打开文件（右键单击项目资源管理器中的文件 -> 打开方式）。

例如，当我试图`.jsp`在 Eclipse 中打开文件时，我遇到了这样的错误。我的问题是 Eclipse 尝试使用*Web Page Editor*而不是*JSP Editor*打开 JSP 文件。所以，我点击 Window -> Preferences -> General -> Editors -> File Associaions，在文件类型列表中找到 *.jsp，选择 JSP Editor 作为 Default... 完成！

# java - 简单类 - 是内存泄漏吗？

> ID：10947445
> 
> 赞同：4
> 
> 时间：2012-06-08T10:50:35.343
> 
> 标签：java, memory-leaks

我有一个非常简单的类，它有一个整数变量。我只是将变量“i”的值打印到屏幕上并增加它，并使线程休眠 1 秒。当我针对此方法运行分析器时，即使我没有创建任何新变量，内存使用量也会缓慢增加。执行此代码大约 16 小时后，我看到内存使用量增加到 4 MB（启动程序时最初为 1 MB）。我是Java新手。任何人都可以帮助解释我哪里出错了，或者为什么即使没有创建新变量，内存使用量也会逐渐增加？提前致谢。

我正在使用 netbeans 7.1 及其分析器来查看内存使用情况。

```
 public static void main(String[] args)
    {
        try
        {
            int i = 1;
            while(true)
            {
                System.out.println(i);
                i++;
                Thread.sleep(1000);
            }
        }
        catch(InterruptedException ex)
        {
            System.out.print(ex.toString());
        }
    } 
```

程序启动时的初始内存使用量：1569852 字节。

执行循环 16 小时后的内存使用量：4095829 字节

![我在这篇文章中的代码遇到的问题的屏幕截图](../Images/104f5b2e1be9e2d99586122f4365d337.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T10:55:17.747

它不一定是内存泄漏。`System.out.println(i);`当 GC 运行时，将收集语句中分配的对象（我假设） 。*Java 中的内存泄漏是指内存被 GC无法*回收的无用对象填满。

`println(i)`用于将`Integer.toString(int)`转换`int`为字符串，并且`String`每次都分配一个新的。这不是泄漏，因为一旦将字符串复制到输出缓冲区，字符串将变得无法访问并成为 GC 的候选对象。

其他可能的内存分配来源：

*   Thread.sleep 可以在幕后分配对象。

*   某些私有 JVM 线程可能会导致此问题。

*   分析器用来监视 JVM 状态的“java 代理”代码可能会导致这种情况。它必须组装数据并将数据通过套接字发送到分析器应用程序，这很可能涉及分配 Java 对象。它也可能在 JVM 的堆或非堆内存中积累东西。

但只要在 GC 运行时 / 可以回收*空间*，这并不重要。如果不能，那么您可能在您正在使用的分析器中发现了 JVM 错误或错误。（尝试用一个很长的睡眠来替换循环，看看“泄漏”是否仍然存在。）这是否是由分析引起的缓慢泄漏可能无关紧要......因为您通常不运行生产代码启用了这么长时间的分析。

* * *

注意：`System.gc()`不保证调用会导致 GC 运行。阅读 javadoc。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T10:56:25.017

我在这段代码中没有看到任何内存泄漏。您应该了解 Java 中的垃圾收集器是如何工作的以及它的策略。基本上说 GC 在需要之前不会清理 - 如特定策略所示。

您也可以尝试调用`System.gc()`。

这些对象可能是在两个 Java Core 函数中创建的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T10:55:43.940

这是由于控制台中显示的文本以及整数的大小（一点点）。

Java 打印函数使用 8 位 ASCII，因此 56000 次打印一个数字，每个字符 8 个字节很快就会占用内存。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-08T10:56:37.763

按照本教程查找内存泄漏：[使用 VisualVM 分析 Java 应用程序中的内存泄漏](http://rejeev.blogspot.de/2009/04/analyzing-memory-leak-in-java.html)。您必须在开始时制作应用程序的快照，并在一段时间后制作另一个快照。使用 VisualVM，您可以执行此操作并将这些与快照进行比较。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-08T11:38:12.000

尝试将 JVM 内存上限设置得如此之低，以致可能的泄漏会导致它耗尽内存。

如果使用的内存达到该限制并继续愉快地工作，那么垃圾收集就可以完成它的工作。

如果相反，它会爆炸，那么你就有一个真正的问题......

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-15T10:10:23.473

正如分析器的图表所显示的那样，这似乎不是泄漏。图表在特定时间间隔后急剧下降，即执行 GC 时。如果图表继续稳步攀升，那将是一个泄漏。之后剩余的堆空间必须由 thread.sleep() 使用，并且（如上面的答案之一所述）来自探查器的某些代码。

您可以尝试在其中运行 VisualVM`%JAVA_HOME%/bin`并分析您的应用程序。它还为您提供了随意执行 GC 的选项以及更多选项。

我注意到我使用的 VisualVM 的更多功能正在消耗更多内存（高达 10MB）。所以这个增加，它也必须来自你的分析器，但它仍然不是泄漏，因为空间是在 GC 上回收的。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-06-08T10:53:01.900

没有printlns会发生这种情况吗？换句话说，也许让 printlns 显示在控制台上是消耗内存的原因。

# iphone - 我们如何在主类 Xib 中添加子类 Xib？

> ID：10947453
> 
> 赞同：0
> 
> 时间：2012-06-08T10:51:43.053
> 
> 标签：iphone, objective-c, ios, ipad, subclass

我正在为 Ipad 开发应用程序。在这个应用程序中，我的第一类 Xib 上有一个 UIButton，现在我想在按钮点击的第一类 XIB 中添加第二类 XIB。我知道如何调用第二类 XIB。这是像这样..

```
-(IBAction)displaysecondclass
{
 secondview *sec=[[secondview alloc] initWithNibName:@"secondview" bundle:nil];
 [self presentModalViewController:sec animated:YES];
 [sec release];
} 
```

但我不想去二等舱，我需要像这样在 firstview 上显示二等舱 XIB。

```
-(IBAction)displaysecondclass
{
 secondview *sec=[[secondview alloc] initWithNibName:@"secondview" bundle:nil];
 [self.view addSubView:sec];
} 
```

谁能帮我提前在第一个 view.thanx 中添加第二类 xib。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T10:55:26.057

将按钮代码更改为

```
-(IBAction)displaysecondclass
{
 secondview *sec=[[secondview alloc] initWithNibName:@"secondview" bundle:nil];
 [self.view addSubView:sec.view];
} 
```

请注意，一旦您不再需要它，您将需要添加额外的功能来释放视图控制器

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T13:47:18.397

谢谢大家，实际上我是兼职 IOS 程序员。虽然这不是一项艰巨的任务，但我在我的问题中提到。当我问这个问题是否与子类或新类有关时，我有点困惑，这就是我发布的原因Question.Thanx for every one to help me.now 我使用这个链接得到了它的解决方案，这可能对某个新人有帮助。

[http://www.roseindia.net/tutorial/iphone/examples/iPhone-Create-SubView.html](http://www.roseindia.net/tutorial/iphone/examples/iPhone-Create-SubView.html)

# forms - Kentico CMS：文本区域输入长度计算和确定最大长度 - 特别是当文本中有换行符时

> ID：10947454
> 
> 赞同：1
> 
> 时间：2012-06-08T10:51:43.707
> 
> 标签：forms, validation, content-management-system, textarea, kentico

**Kentico 如何计算表单文本区域中输入内容的长度以及它对换行符的价值是多少？**根据我的 JavaScript 计算，换行符是 2 个字符，但似乎 Kentico 将其计算为超过 2 个字符。

**问题总结：**

我在我的 Kentico 网站上的表单上输入的文本区域设置了最大长度 2500。

我已经在这个文本区域中输入了一些文本，并且通过我的 JavaScript 计算（用于显示用户留下了多少字符），字符长度正好是 2500（包括换行符和空格），因此应该验证并发送。但是，Kentico 没有输入我的输入，说我的最大长度已超出。见下文：

![在此处输入图像描述](../Images/6feb06386e6383656447cebb8466b66c.png)

如果我删除换行符并输入一些额外的字符以使我的字符计算恢复到 2500，则表单发送而不会失败。

**使用失败的测试：**

> Lorem ipsum dolor sit amet, consectetur adipiscing elit。Quisque vitae augue ac enim molestie scelerisque a id metus。Suspendisse purus justo，iaculis quis accumsan ut，congue vitae mauris。Nunc luctus vulputate scelerisque。Nullam ullamcorper porta elit，sed ornare lorem placerat dictum。sed quis enim quis nibh convallis sagittis nec vitae felis。Sed porttitor，nibh et volutpat posuere，neque dui sollicitudin sapien，在 scelerisque lacus elit quis enim。在 metus lectus 的 Donec。sed quis enim quis nibh convallis sagittis nec vitae felis。Sed porttitor，nibh et volutpat posuere，neque dui sollicitudin sapien，在 scelerisque lacus elit quis enim。在 metus lectus 的 Donec。Lorem ipsum dolor sit amet, consectetur adipiscing elit。Quisque vitae augue ac enim molestie scelerisque a id metus。Suspendisse purus justo, iaculis quis accumsan ut, congue vitae mauris。Nunc luctus vulputate scelerisque。Nullam ullamcorper porta elit，sed ornare lorem placerat dictum。sed quis enim quis nibh convallis sagittis nec vitae felis。Sed porttitor，nibh et volutpat posuere，neque dui sollicitudin sapien，在 scelerisque lacus elit quis enim。Donec at metus lectus.Lorem ipsum dolor sit amet, consectetur adipiscing elit。Quisque vitae augue ac enim molestie scelerisque a id metus。悬吊法 consectetur adipiscing 精英。Quisque vitae augue ac enim molestie scelerisque a id metus。悬吊法 consectetur adipiscing 精英。Quisque vitae augue ac enim molestie scelerisque a id metus。悬吊法
> 
> to, iaculis quis accumsan ut, congue vitae mauris。Nunc luctus vulputate scelerisque。Nullam ullamcorper porta elit，sed ornare lorem placerat dictum。sed quis enim quis nibh convallis sagittis nec vitae felis。Sed porttitor，nibh et volutpat posuere，neque dui sollicitudin sapien，在 scelerisque lacus elit quis enim。在 metus lectus 的 Donec。sed quis enim quis nibh convallis sagittis nec vitae felis。Sed porttitor，nibh et volutpat posuere，neque dui sollicitudin sapien，在 scelerisque lacus elit quis enim。在 metus lectus 的 Donec。Lorem ipsum dolor sit amet, consectetur adipiscing elit。Quisque vitae augue ac enim molestie scelerisque a id metus。Suspendisse purus justo，iaculis quis accumsan ut，congue vitae mauris。Nunc luctus vulputate scelerisque。Nullam ullamcorper porta elit，sed ornare lorem placerat dictum。sed quis enim quis nibh convallis sagittis nec vitae felis。Sed porttitor，nibh et volutpat posuere，neque dui sollicitudin sapien，在 scelerisque lacus elit quis enim。Donec at metus lectus.Lorem ipsum dolor sit amet, consectetur adipiscing elit。Quisque vitae augue ac enim molestie scelerisque a id metus。Suspendisse purus justo, iaculis quis accumsan ut, congue vitae maur d

**使用通过的测试：**请注意，换行符已被删除，并在末尾添加了 2 个额外字符以使其恢复到 2500 个字符

> Lorem ipsum dolor sit amet, consectetur adipiscing elit。Quisque vitae augue ac enim molestie scelerisque a id metus。Suspendisse purus justo，iaculis quis accumsan ut，congue vitae mauris。Nunc luctus vulputate scelerisque。Nullam ullamcorper porta elit，sed ornare lorem placerat dictum。sed quis enim quis nibh convallis sagittis nec vitae felis。Sed porttitor，nibh et volutpat posuere，neque dui sollicitudin sapien，在 scelerisque lacus elit quis enim。在 metus lectus 的 Donec。sed quis enim quis nibh convallis sagittis nec vitae felis。Sed porttitor，nibh et volutpat posuere，neque dui sollicitudin sapien，在 scelerisque lacus elit quis enim。在 metus lectus 的 Donec。Lorem ipsum dolor sit amet, consectetur adipiscing elit。Quisque vitae augue ac enim molestie scelerisque a id metus。Suspendisse purus justo, iaculis quis accumsan ut, congue vitae mauris。Nunc luctus vulputate scelerisque。Nullam ullamcorper porta elit，sed ornare lorem placerat dictum。sed quis enim quis nibh convallis sagittis nec vitae felis。Sed porttitor，nibh et volutpat posuere，neque dui sollicitudin sapien，在 scelerisque lacus elit quis enim。Donec at metus lectus.Lorem ipsum dolor sit amet, consectetur adipiscing elit。Quisque vitae augue ac enim molestie scelerisque a id metus。Suspendisse purus justo，iaculis quis accumsan ut，congue vitae mauris。Nunc luctus vulputate scelerisque。Nullam ullamcorper porta elit，sed ornare lorem placerat dictum。sed quis enim quis nibh convallis sagittis nec vitae felis。Sed porttitor，nibh et volutpat posuere，neque dui sollicitudin sapien，在 scelerisque lacus elit quis enim。在 metus lectus 的 Donec。sed quis enim quis nibh convallis sagittis nec vitae felis。Sed porttitor，nibh et volutpat posuere，neque dui sollicitudin sapien，在 scelerisque lacus elit quis enim。在 metus lectus 的 Donec。Lorem ipsum dolor sit amet, consectetur adipiscing elit。Quisque vitae augue ac enim molestie scelerisque a id metus。Suspendisse purus justo，iaculis quis accumsan ut，congue vitae mauris。Nunc luctus vulputate scelerisque。Nullam ullamcorper porta elit，sed ornare lorem placerat dictum。sed quis enim quis nibh convallis sagittis nec vitae felis。Sed porttitor，nibh et volutpat posuere，neque dui sollicitudin sapien，在 scelerisque lacus elit quis enim。Donec at metus lectus.Lorem ipsum dolor sit amet, consectetur adipiscing elit。Quisque vitae augue ac enim molestie scelerisque a id metus。Suspendisse purus justo,

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T20:52:00.823

这基本上是与浏览器相关的 JavaScript 问题。在 Firefox 或 Chrome 或任何其他基于 WebKit 的浏览器中，textareaVariableName.val().length 将只计算 1 个字符作为换行符 (\n)。jQuery 实现也是如此。但在 IE 中 document.getElementById('textareaVariableName').value.length 将计算 2 换行 (\r\n)

在 Kentico 中，文本被验证为实际的字符数，因此验证失败。

对此的快速修复是用于计算实际长度的简单正则表达式：

```
function getTextLength(elementId){
   if (elementId) {
      var elem = document.getElementById(elementId);
      if (elem) {
         var str = elem.value;
         if (str) {
            str = str.replace(/(\r\n|\r|\n)/g, '\r\n');
            return str.length;
         }
      }
   }
   return 0;
} 
```

这应该可以帮助您独立于客户使用的浏览器正确计算字符数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T14:04:11.060

问题在于我在 JavaScript 中的计算给换行符的长度为 1，而 Kentico 的计算给换行符的长度为 2。所以他们不匹配。因此，我的字符计数器说输入文本的长度没问题，但 Kentico 的检查认为它超过了最大长度。

**这是我以前的：**

```
enteredText = textareaVariableName.val();
characterCount = enteredText.length; //one line break entered returned 1 
```

**这就是我将其更改为：**

```
enteredText = textareaVariableName.val();
enteredTextEncoded = escape(enteredText);
//next I match any line break characters - %0A - after encoding the text area text
linebreaks = enteredTextEncoded.match(/%0A/g);
(linebreaks != null) ? linebreaksLength = linebreaks.length : linebreaksLength = 0;
characterCount = enteredText.length + linebreaksLength; //one line break entered now returns 2 
```

**有没有更好的方法可以检查文本中的换行符，而不是对文本进行编码然后检查子字符串 %0A ？**

**编辑/更新：**我相信以下是一个更好的解决方案，而不是我上面所做的。

```
var limit = 2500; //for example
enteredText = textareaVariableName.val();
numberOfLineBreaks = (enteredText.match(/\n/g)||[]).length;
left = limit - enteredText.length - numberOfLineBreaks;
if (left < 0) {
    //character count over code here
} else {
    //character count within limits code here               
} 
```

# javascript - 如何在gridview中获取最后一个td的值

> ID：10947462
> 
> 赞同：0
> 
> 时间：2012-06-08T10:52:53.787
> 
> 标签：javascript, jquery-ui, jquery

我试图得到最后一个 tr 然后最后一个 td

```
 var lastimageId = $("#GVUserWebDetail tr:last").children("td:first").html(); 
```

但 null 是返回

请给出任何解决方案

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T10:55:19.680

> 我试图得到**最后一个**tr 然后**最后一个**td

如果您试图获取最后一行和单元格，如何：

```
$(function()
{
    var bottomRightCell = $("#GVUserWebDetail tr:last-child td:last-child");

    var message = 'id: ' + bottomRightCell.attr('id') + '\n';
    message += 'text: ' + bottomRightCell.text();

    alert(message);
});​ 
```

## [jsFiddle 演示](http://jsfiddle.net/HwvhW/1/)

# java - 在java中，“public static void main”可以重命名或重构吗？

> ID：10947464
> 
> 赞同：11
> 
> 时间：2012-06-08T10:53:00.320
> 
> 标签：java, refactoring, main

我不想更改签名的`public static void`...`String[] args`部分，但是否可以“重命名”此功能（例如，只是为了好玩）？

所以执行的入口点将是一个具有另一个名称的函数。

将其重命名为，例如`boot`（如果不是历史性的，在我的特定情况下更好地反映它的实际用途）。

* * *

**有关的**

我有兴趣做一些不同的事情，但这些问题仍然很有趣：

[java 中的 public static void main(String arg[ ] ) 是否已修复？](https://stackoverflow.com/questions/10028589/public-static-void-mainstring-arg-in-java-is-it-fixed)

[为什么函数 main() 的名字 main](https://stackoverflow.com/questions/1688338/why-the-name-main-for-function-main)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-08T10:55:33.857

不，[Java 语言规范](http://docs.oracle.com/javase/specs/jls/se7/html/jls-12.html#jls-12.1)说：

> Java 虚拟机通过调用`main`某个指定类的方法开始执行，并传递给它一个参数，该参数是一个字符串数组。

[JVM 规范](http://docs.oracle.com/javase/specs/jvms/se7/html/jvms-5.html#jvms-5.2)说了同样的话：

> 然后，Java 虚拟机链接初始类，对其进行初始化，并调用公共类方法`void main(String[])`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-08T10:56:22.470

简单回答 不，原因，[规范](http://docs.oracle.com/javase/specs/jls/se7/html/jls-12.html#jls-12.1)就是这样，`JVM`只会寻找`main`而不是任何自定义名称作为起点。它必须被称为 main 并带有确切的签名`public static void main(String[] args)`

从逻辑上讲，除非命令具有传递 start 方法的选项，否则如何`JVM`知道`main`它必须寻找`boot`或其他东西而不是方法是有道理的。`java`

但这是没有充分理由的要求太多。

其次，由于它的标准化，它也有助于开发人员社区，无论谁查看代码都知道如何运行给定的`Java`独立程序，或者说如果你有一个项目，你的第一点总是寻找主要方法，然后从那里你继续前行。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-08T10:56:00.677

不可以。根据 Java 语言规范，您不能这样做。但是如果你愿意，因为Java是一个开源项目，所以下载Java语言的完整源代码并进行相应的更改（我的意思是更改JVM本身的源代码）。这是您可以做到这一点的唯一方法。

所以现在你可以理解了，为什么我说这是不可能的。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-08T10:57:26.903

在开始时，JVM 正在从`public static void main`以字符串数组作为参数的方法中查找。所以你唯一能做的就是重命名参数`args`。如果你想要像 boot 这样的方法，没有人会阻止你做这样的事情（我个人不推荐这种“模式”）

```
static void boot(String[] arguments){
    //your logic
}

public static void main(String[] args) {
    boot(args);
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-08T10:55:46.467

您的应用程序从 开始运行`public static void main(String[] args)`。这就像 JVM 启动程序的地方。如果您更改它，JVM 会随意不启动您的应用程序。

如果您想将其`boot()`作为应用程序的起点，请在`main()`.

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-08T11:43:19.280

简单的答案是`NO`。当您开始执行程序时，它会查找 `public static void main(String[] args)`接受字符串数组参数的程序。从这个入口点开始**主线程**。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2018-05-23T12:25:51.130

是的，如果我们可以改变JVM的配置，让它寻找另一个名字的方法而不是main方法，我们就可以改变main方法的名称。

# php - 在 php 中对对象执行 foreach

> ID：10947472
> 
> 赞同：0
> 
> 时间：2012-06-08T10:53:44.753
> 
> 标签：php, codeigniter

我如何对对象执行 foreach 。我希望格式化我在 ci 查询中得到的结果

```
foreach ($CIResult as $key => $value) {
    $CIResult -> $key = MyCustomFunction($value);
} 
```

**编辑**

我希望 CIResult 仅作为对象保留

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T10:55:47.887

您始终可以[将对象强制转换为数组](http://bg.php.net/manual/en/language.types.array.php#language.types.array.casting)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T11:04:16.467

这是你想要的吗 ？

```
foreach ($CIResult as $ciObj) {
    // Access object properties like  
     $ciObj->property_name = format_name($ciObj->property_name);
} 
```

您能否更明确地说明您要格式化的内容？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T11:09:49.883

```
foreach ($CIResult as &$object) //by reference
{
     $object->property = $new_value;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-08T11:15:39.450

```
foreach((array)$CIResult as $key => $value)
    $CIResult->$key = MyCustomFunction($value); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-08T11:22:38.653

```
foreach ($CIResult as $key => &$value) {
    $value = MyCustomFunction($value);
} 
```

请务必注意，这仅适用于对象的公共属性。

# java - 如何使数据库连接类成为单例？

> ID：10947473
> 
> 赞同：0
> 
> 时间：2012-06-08T10:53:45.767
> 
> 标签：java, singleton

```
ExecutorService es = Executors.newSingleThreadExecutor();
Class1 class = new Class();
es.execute(class); 
```

* * *

Class1 实现 Runnable 代码来调用 dbconnection 所在的 db connection/class。

问题是，每次调用 Class1 时，都会创建 db 连接并将其重载到系统。那么，我可以只使用 dbconnection 类的实例，这样我就不会每次都创建连接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T10:57:02.770

如果所有客户端都打开一个静态连接并保持打开状态直到应用程序生命周期。在这种情况下，sql server 将无法在达到阈值后允许创建新连接。

因此，建议在需要时创建连接并在工作完成时关闭它。

通过使用连接池，您可以节省每次创建连接的处理和时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T11:06:24.920

如果您的应用程序运行在诸如 Glassfish（可能还有 Tomcat）之类的应用程序服务器上，您可能想尝试使用 db 连接池——它们可以很好地处理连接的使用和重用。

撇开这一点不谈，在使用完连接后始终关闭连接是一种很好的做法。

# uml - 在 Visual Paradigm 中显示继承的方法等

> ID：10947479
> 
> 赞同：3
> 
> 时间：2012-06-08T10:54:07.807
> 
> 标签：uml, visual-paradigm

我正在使用 Visual Paradigm CE 进行一些 UML 设计。

有没有办法在类图中显示所有继承的方法？无法弄清楚在选项中的哪里可以找到它，我只是盲目还是没有办法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-08T13:58:34.483

没有办法做到这一点，这是有原因的。如果在 UML 中您在两个类（父类和子类）中编写方法，那么这意味着该方法在子类中被覆盖。我将说明：

```
+--------+         +--------+
| Class1 |         | Class2 |
+--------+<|-------+--------+
| m1()   |         |        |
+--------+         +--------+ 
```

在这里，当您执行时`class2.m1()`，方法`class1.m1()`将被执行（分别是`class1`和的`class2`实例）。如果你这样建模：`Class1``Class2`

```
+--------+         +--------+
| Class1 |         | Class2 |
+--------+<|-------+--------+
| m1()   |         | m1()   |
+--------+         +--------+ 
```

这意味着`Class2`有一个**新**的实现，`m1()`并且该实现将被调用。

希望这可以解决问题。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-06T07:51:01.413

*   右键单击类 > 表示选项 > 属性 > 显示继承的属性
*   右键单击类 > 表示选项 > 操作 > 显示继承的操作

我实际上使用的是 Agilian（也是 VP Suite），但我认为它是相同的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-09T08:37:22.893

我认为这个问题更可能与类图中分类器之间的选项“显示隐藏”继承链接有关。此选项在极少数工具中可用。我知道 RSA 和 Omondo 有它。

这是模型中的一种实时导航，与 Omondo EclipseUML 元建模方法更相关。

# image - 使用 html5 和 kineticjs 在六边形内显示图像

> ID：10947480
> 
> 赞同：1
> 
> 时间：2012-06-08T10:54:14.393
> 
> 标签：image, html, kineticjs

我想绘制一个六边形并使用 html5 在其中显示一个图像。我已经尝试过了，但我没有得到图像。我只想为此使用[kineticjs](http://kineticjs.com/)。

这是代码：

```
function hexagon(){
    var stage = new Kinetic.Stage({
      container: "container"
    });

    var layer = new Kinetic.Layer();

    var hexagon = new Kinetic.RegularPolygon({
      x: 100,
      y: 100,
      sides: 6,
      radius: 100,
      fill: {image: "css/images/logo.png"},

      stroke: "royalblue",
      strokeWidth: 2
    });

    // add the shape to the layer
    layer.add(hexagon);
   // add the layer to the stage
    stage.add(layer);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T13:48:44.103

fill 接受一个图像对象。尝试以下操作：

```
var layer = new Kinetic.Layer();

logo = new Image();
logo.src = "css/images/logo.png";

var hexagon = new Kinetic.RegularPolygon({
      x: 100,
      y: 100,
      sides: 6,
      radius: 100,
      fill: {image: logo},

      stroke: "royalblue",
      strokeWidth: 2
    });

    // add the shape to the layer
    layer.add(hexagon);
   // add the layer to the stage
    stage.add(layer);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-07T21:10:40.777

KinectJS 的作者写了一些非常棒的教程。在这幅画中，他画了一个五边形的图像，以及其他一些东西。应该足以帮助你。

[http://www.html5canvastutorials.com/kineticjs/html5-canvas-set-fill-with-kineticjs/](http://www.html5canvastutorials.com/kineticjs/html5-canvas-set-fill-with-kineticjs/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-11-04T05:53:29.720

我有解决办法。

迟到（迟到总比没有好）

它应该是：

```
fill: {image: "css/images/logo.png", offset: [0, 0]} 
```

# jquery - 如何使用 jquery 解析 xml 文件而不会丢失 html 标签 ，包括在里面吗？

> ID：10947482
> 
> 赞同：0
> 
> 时间：2012-06-08T10:54:37.437
> 
> 标签：jquery, html, xml

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T10:57:57.617

我不确定您是否尝试将 DOM 对象取回而不是 XML 对象，但如果您想要查看 Javascript Dom Parser [http://www.w3schools.com/dom/dom_parser.asp](http://www.w3schools.com/dom/dom_parser.asp)

```
if (window.DOMParser)
  {
      parser=new DOMParser();
      xmlDoc=parser.parseFromString(text,"text/xml");
  }
else // Internet Explorer
  {
      xmlDoc=new ActiveXObject("Microsoft.XMLDOM");
      xmlDoc.async=false;
      xmlDoc.loadXML(text);
  } 
```

# php - 通过 JQuery ajax.post 向 PHP 提交 JSON 数据

> ID：10947483
> 
> 赞同：6
> 
> 时间：2012-06-08T10:54:42.447
> 
> 标签：php, jquery, ajax, json

我使用 POST 通过 AJAX 将数据提交到 php 文件。只需提交字符串就可以正常工作，但现在我想用 JSON 提交我的 JS 对象并在 PHP 端对其进行解码。

在控制台中，我可以看到，我的数据已正确提交，但在 PHP 端 json_decode 返回 NULL。

我尝试了以下方法：

```
this.getAbsence = function()
{
    alert(JSON.stringify(this));
    jQuery.ajax({
        type: "POST",
        contentType: "application/json; charset=utf-8",
        url: "ajax/selectSingle.php?m=getAbsence",
        data: JSON.stringify(this),
        success : function(data){
            alert(data);
        }
    });
} 
```

PHP：

```
echo $_POST['data'];
echo json_decode($_POST['data']);
echo var_dump(json_decode($_POST['data'])); 
```

和：

```
this.getAbsence = function()
{
    alert(JSON.stringify(this));
    jQuery.ajax({
        type: "POST",
        contentType: "application/json; charset=utf-8",
        url: "ajax/selectSingle.php?m=getAbsence",
        data: {'Absence' : JSON.stringify(this)},
        success : function(data){
            alert(data);
        }
    });
} 
```

PHP：

```
echo $_POST['Absence'];
echo json_decode($_POST['Absence']);
echo var_dump(json_decode($_POST['Absence'])); 
```

警报只是为了检查一切是否正常...

是的，通常的字符串被正确回显:-)

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-06-08T10:56:21.357

你在第一个代码中的代码出错的地方是你必须使用这个：

```
var_dump(json_decode(file_get_contents("php://input"))); //and not $_POST['data'] 
```

引用 PHP 手册

> php://input 是一个只读流，允许您从请求正文中读取原始数据。

由于在您的情况下，您要在正文中提交 JSON，因此您必须从此流中读取它。通常的方法`$_POST['field_name']`不起作用，因为帖子正文不是 URLencoded 格式。

在第二部分中，您一定使用过这个：

```
contentType: "application/json; charset=utf-8",
url: "ajax/selectSingle.php?m=getAbsence",
data: JSON.stringify({'Absence' : JSON.stringify(this)}), 
```

**更新**：

当请求具有内容类型`application/json`时，PHP 不会解析请求并为您提供 JSON 对象`$_POST`，您必须自己从原始 HTTP 正文中解析它。使用 检索 JSON 字符串`file_get_contents("php://input");`。

如果你必须使用`$_POST`它，你会做到：

```
data: {"data":JSON.stringify({'Absence' : JSON.stringify(this)})}, 
```

然后在 PHP 中执行：

```
$json = json_decode($_POST['data']); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T10:58:02.407

单引号对 php 无效，`json_encode`对字段名称和值都使用双引号。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T11:11:41.720

对我来说，看起来你应该重新格式化你的 AJAX 对象。url-property 应该只是目标 php-file 的 URL，任何需要发布的数据都应该是 data-property 中的查询字符串的形式。以下应该按您的预期工作：

```
this.getAbsence = function() {
  var strJSONData = JSON.stringify(this);
  alert(strJSONData);
  jQuery.ajax({
    type: 'POST',
    contentType: 'application/json; charset=utf-8',
    url: 'ajax/selectSingle.php',
    data: 'm=getAbsence&Absence=' + strJSONData,
    success: function(data) {
      alert(data);
    }
  });
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-08T11:16:07.227

试试这个

```
 var vThis = this;
  this.getAbsence = function()
  {
    alert(JSON.stringify(vThis));
    jQuery.ajax({
       type: "POST",
       contentType: "application/json; charset=utf-8",
       url: "ajax/selectSingle.php?m=getAbsence",
       data: JSON.stringify(vThis),
       success : function(data){
         alert(data);
       } 
     });
   } 
```

**编辑**

我想我们也可以做到这一点！

```
 var vThis = this;
  this.getAbsence = function()
  {
    alert(JSON.stringify(vThis));
    jQuery.ajax({
       type: "POST",
       dataType: "json",
       url: "ajax/selectSingle.php?m=getAbsence",
       data: vThis,
       success : function(data){
         alert(data);
       } 
     });
   } 
```

在 PHP 中

```
print_r($_POST); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2022-02-23T14:40:59.870

在 PHP 方面试试这个：

```
$sectionValue = htmlspecialchars($_POST['sectionValue'], ENT_QUOTES);
$dataToWrite = json_decode(html_entity_decode($sectionValue, ENT_QUOTES, "utf-8" ), true); 
```

# c# - 在 MonoDevelop 中添加事件时出错

> ID：10947484
> 
> 赞同：1
> 
> 时间：2012-06-08T10:54:49.137
> 
> 标签：c#, windows, monodevelop, gtk#

当我双击 Clicked 信号以添加新的 Clicked 事件时，它不会自动添加代码。它显示错误

![错误单体开发](../Images/1e943de2353be5bfe23acf0712ea3dbf.png)

我使用最新版本的 Monodevelop 和 Gtk# Toolkit 和 Window7 平台如何修复它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T11:02:56.573

尝试手动添加。在窗口类的构造函数中写入：

```
yourElement.Clicked += new EventHandler(Method);
void Method(~)
{
//logic
} 
```

其中*EventHandler*是*Clicked*事件的委托类型，*Method*是方法，与*EventHandler*签名相同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T08:22:09.797

这是 MonoDevelop 3.0.1 中仍然存在的错误。在下面查看完整的堆栈跟踪。手动添加偶数就像 Arman Stepanyan 描述的那样。

> System.Reflection.TargetInvocationException：调用的目标已引发异常。---> System.NotImplementedException：请求的功能未实现。在 MonoDevelop.Ide.TypeSystem.CodeGenerationService.GetSuitableInsertionPoint（IEnumerable`1 点，IUnresolvedTypeDefinition cls，IUnresolvedMember 成员）[0x0003e] 在 /build/buildd/monodevelop-3.0.1/main/src/core/MonoDevelop.Ide/MonoDevelop.Ide .TypeSystem/CodeGenerationService.cs:335 在 MonoDevelop.Ide.TypeSystem.CodeGenerationService.AddNewMember（ITypeDefinition 类型，IUnresolvedTypeDefinition 部分，IUnresolvedMember newMember，Boolean implementExplicit）[0x00043] 在 /build/buildd/monodevelop-3.0.1/main/src/核心/MonoDevelop.Ide/MonoDevelop.Ide.TypeSystem/CodeGenerationService.cs:91 在 MonoDevelop.GtkCore.GuiBuilder.CodeBinder.BindSignal (Stetic.*AnonStoreyD.<>m*_17 (System.Object , System.EventArgs) [0x00000] 在 :0 在 Stetic.GuiDispatch.InvokeSync (System.EventHandler h) [0x00000] 在 :0 在 Stetic.Project.NotifySignalAdded (System.Object obj, System.String 名称, Stetic.Signal 信号) [0x00000] in :0 at (wrapper remoting-invoke-with-check) Stetic.Project:NotifySignalAdded (object,string,Stetic.Signal) 在 Stetic.ProjectBackend.Stetic.IProject.NotifySignalAdded (Stetic. SignalEventArgs args) [0x00000] in :0 at Stetic.ObjectWrapper.OnSignalAdded (Stetic.SignalEventArgs args) [0x00000] in :0 at Stetic.SignalCollection.OnInsertComplete (Int32 index, System.Object value) [0x00000] in :0 at System .Collections.CollectionBase.System.Collections.IList.Add (System.Object value) [0x00000] in :0 --- End of internal exception stack trace --- at System.Reflection.MonoMethod。在 System.Reflection.MethodBase.Invoke (System.Object obj , System.Object[] 参数) [0x00000] in :0 at System.Delegate.DynamicInvokeImpl (System.Object[] args) [0x00000] in :0 at System.MulticastDelegate.DynamicInvokeImpl (System.Object[] args) [0x00000 ] in :0 at System.Delegate.DynamicInvoke (System.Object[] args) [0x00000] in :0 at GLib.Signal.ClosureInvokedCB (System.Object o, GLib.ClosureInvokedArgs args) [0x00000] in :0 在 GLib。 SignalClosure.Invoke (GLib.ClosureInvokedArgs args) [0x00000] in :0 at GLib.SignalClosure.MarshalCallback (IntPtr raw_closure, IntPtr return_val, UInt32 n_param_vals, IntPtr param_values, IntPtr invocation_hint,IntPtr marshal_data) [0x00000] in :0

# java - 使用spring时如何配置jetty通过maven运行？

> ID：10947487
> 
> 赞同：1
> 
> 时间：2012-06-08T10:55:10.090
> 
> 标签：java, spring, maven, jetty

我正在使用 maven-jetty-plugin。Jetty 在预集成测试阶段启动。它开始但给出了这个错误：

java.lang.NoClassDefFoundError: org/spingframework/context/ApplicationContext。

如何解决码头类路径以包括弹簧？

```
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 11.415s
[INFO] Finished at: Thu Jun 07 20:05:02 IST 2012
[INFO] Final Memory: 35M/208M
[INFO] ------------------------------------------------------------------------
[ERROR] Failed to execute goal org.mortbay.jetty:jetty-maven-plugin:8.1.4.v20120524:run (start-jetty) on project abc:
Execution start-jetty of goal org.mortbay.jetty:jetty-maven-plugin:8.1.4.v20120524:run failed: A required class was missin
g while executing org.mortbay.jetty:jetty-maven-plugin:8.1.4.v20120524:run: org/springframework/context/ApplicationContext
[ERROR] -----------------------------------------------------
[ERROR] realm =    plugin>org.mortbay.jetty:jetty-maven-plugin:8.1.4.v20120524
[ERROR] strategy = org.codehaus.plexus.classworlds.strategy.SelfFirstStrategy
[ERROR] urls[0] = file:/root/.m2/repository/org/mortbay/jetty/jetty-maven-plugin/8.1.4.v20120524/jetty-maven-plugin-.1.4.v20
[ERROR] urls[1] = file:/root/.m2/repository/org/eclipse/jetty/jetty-util/8.1.4.v20120524/jetty-util-8.1.4.v20120524.jar
[ERROR] urls[2] = file:/root/.m2/repository/org/eclipse/jetty/jetty-webapp/8.1.4.v20120524/jetty-webapp-8.1.4.v20120524.jar
[ERROR] urls[3] = file:/root/.m2/repository/org/eclipse/jetty/jetty-xml/8.1.4.v20120524/jetty-xml-8.1.4.v20120524.jar
[ERROR] urls[4] = file:/root/.m2/repository/org/eclipse/jetty/jetty-servlet/8.1.4.v20120524/jetty-servlet-.1.4.v20120524.jar
[ERROR] urls[5] = file:/root/.m2/repository/org/eclipse/jetty/jetty-security/8.1.4.v20120524/jetty-security-8.1.4.v2
...
[ERROR] urls[37] = file:/root/.m2/repository/org/eclipse/jetty/orbit/javax.servlet.jsp.jstl/1.2.0.v201105211821javax.servlet.jsp.jstl-1.2.0.v201105211821.jar
[ERROR] Number of foreign imports: 1
[ERROR] import: Entry[import  from realm ClassRealm[maven.api, parent: null]]
[ERROR]
[ERROR] -----------------------------------------------------: org.springframework.context.ApplicationContext 
```

pom.xml 的当前状态：

```
<?xml version="1.0" encoding="UTF-8"?>
<project xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd" xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">

<modelVersion>4.0.0</modelVersion>
<packaging>war</packaging>
<properties>
    <surefire-version>2.12</surefire-version>
    <failsafe-version>2.12</failsafe-version>
    <servlet-api-version>2.5</servlet-api-version>
    <maven-compiler-plugin>2.3.2</maven-compiler-plugin>
    <maven-resources-plugin>2.4.3</maven-resources-plugin>
    <maven-site-plugin>2.0-beta-7</maven-site-plugin>
    <maven-war-plugin>2.2</maven-war-plugin>
</properties>

<dependencies>
    <dependency>
        <groupId>org.apache.cxf</groupId>
        <artifactId>cxf-rt-transports-http</artifactId>
    </dependency>
    <dependency>
        <groupId>org.apache.cxf</groupId>
        <artifactId>cxf-rt-frontend-jaxrs</artifactId>
    </dependency>
    <dependency>
        <groupId>org.codehaus.jackson</groupId>
        <artifactId>jackson-jaxrs</artifactId>
    </dependency>
    <dependency>
        <groupId>commons-httpclient</groupId>
        <artifactId>commons-httpclient</artifactId>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-core</artifactId>
    </dependency>
   <dependency>
    <groupId>org.springframework</groupId>
    <artifactId>spring-context</artifactId>
   </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-web</artifactId>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-tx</artifactId>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-test</artifactId>
        <scope>test</scope>
    </dependency>
    <dependency>
        <groupId>javax.servlet</groupId>
        <artifactId>servlet-api</artifactId>
        <version>${servlet-api-version}</version>
        <!-- provided by web container -->
        <scope>provided</scope>
    </dependency>
    <dependency>
        <groupId>commons-configuration</groupId>
        <artifactId>commons-configuration</artifactId>
    </dependency>
</dependencies>

<build>
    <testResources>
        <testResource><directory>src/main/webapp/WEB-INF</directory></testResource>
        <testResource><directory>src/test/resources</directory></testResource>
    </testResources>

    <plugins>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-compiler-plugin</artifactId>
            <version>${maven-compiler-plugin}</version>
            <configuration>
                <source>1.6</source>
                <target>1.6</target>
                <encoding>${project.build.sourceEncoding}</encoding>
                <showDeprecation>true</showDeprecation>
            </configuration>
        </plugin>

        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-resources-plugin</artifactId>
            <version>${maven-resources-plugin}</version>
            <configuration>
                <encoding>${project.build.sourceEncoding}</encoding>
            </configuration>
        </plugin>

        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-site-plugin</artifactId>
            <version>${maven-site-plugin}</version>
        </plugin>

        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-war-plugin</artifactId>
            <version>${maven-war-plugin}</version>
            <configuration>
                <webResources>
                    <resource>
                        <directory>src/main/resources</directory>
                        <includes>
                            <include>/.xml</include>
                        </includes>
                        <targetPath>WEB-INF/lib</targetPath>
                    </resource>
                </webResources>
            </configuration>
        </plugin>

        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-surefire-plugin</artifactId>
           <version>${surefire-version}</version>
            <configuration>
                <additionalClasspathElements>
                    <additionalClasspathElement>src/main/webapp/WEB-INF</additionalClasspathElement>
                </additionalClasspathElements>
                <configuration>
                    <includes>
                        <include>Test.java</include>
                    </includes>
                    <excludes>
                        <exclude>FunctionalTest.java</exclude>
                    </excludes>
                </configuration>
            </configuration>
        </plugin>

        <plugin>
      <groupId>org.mortbay.jetty</groupId>
      <artifactId>jetty-maven-plugin</artifactId>
      <configuration>
              <scanIntervalSeconds>10</scanIntervalSeconds>
              <stopKey>stop</stopKey>
              <stopPort>9999</stopPort>
              <dependencies>
            <dependency>
                        <groupId>org.springframework</groupId>
                        <artifactId>spring-context</artifactId>
                        <version>3.0.5.RELEASE</version>
            </dependency>

            <dependency>
                        <groupId>org.springframework</groupId>
                        <artifactId>spring-core</artifactId>
            </dependency>
               </dependencies>
        </configuration>
        <executions>
           <execution>
                 <id>start-jetty</id>
                  <phase>pre-integration-test</phase>
                  <goals>
                      <goal>run</goal>
                  </goals>
                   <configuration>
                       <project>
                           <dependencies>
                           <dependency>
                                   <groupId>org.springframework</groupId>
                                   <artifactId>spring-context</artifactId>
                                   <version>3.0.5.RELEASE</version>
                               </dependency>
                               <dependency>
                        <groupId>org.springframework</groupId>
                <artifactId>spring-core</artifactId>
                               </dependency>
                        </dependencies>
                         </project>

                 <scanIntervalSeconds>0</scanIntervalSeconds>
                         <daemon>true</daemon>
                     </configuration>
                 </execution>
               <execution>
               <id>stop-jetty</id>
               <phase>post-integration-test</phase>
               <goals>
                  <goal>stop</goal>
               </goals>
               </execution>
        </executions>
  </plugin>
   </plugins>
</build> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T13:20:13.633

You will need the following dependency:

```
 <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-context</artifactId>
            <version>3.0.5.RELEASE</version>
        </dependency> 
```

in order to solve the NoClassDefFoundError. However, you will most-likely need further dependencies later on, such as spring-beans, spring-core, spring-context-support, etc. in order to use the basic stuff from the Springframework.

In addition, you can use [Jarvana](http://jarvana.com/jarvana/) or [FindJar](http://findjar.com/) to figure out which artifacts contain a class you need to add as a dependency.

# jquery - 没有数据建议的 jQuery 的 Ajax 自动完成

> ID：10947489
> 
> 赞同：1
> 
> 时间：2012-06-08T10:55:16.110
> 
> 标签：jquery, autocomplete

我有

```
var autocompleteProfessionals = that.container.find("#ProfessionalsName");

    autocompleteProfessionals.each(function () {
        $(this).autocomplete({
            serviceUrl: '../Professionals/FindProfessionals',
            minChars: 2,
            delimiter: /(,|;)\s*/,
            maxHeight: 200,
            width: 400,
            zIndex: 9999,
            deferRequestBy: 100,  
            onSelect: function (value, data) {
                that.container.find("#IdProfessionals").val(data.IdProfessionals);

            }
        });
    }
    ); 
```

当我找到具有自动完成功能的专业人士并选择他时，我设置了他的 ID。然后我从字段中删除这个专业名称并输入不存在的专业名称。我这里有问题，因为 IdProfessionals 是有效的，但 ProfessionalsName 不是。

当我从文本字段中删除专业名称时，如何从 IdProfessionals 中删除值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T11:02:56.340

[http://jqueryui.com/demos/autocomplete/#event-search](http://jqueryui.com/demos/autocomplete/#event-search)

```
var autocompleteProfessionals = that.container.find("#ProfessionalsName");

autocompleteProfessionals.autocomplete({
   serviceUrl: '../Professionals/FindProfessionals',
   minChars: 2,
   delimiter: /(,|;)\s*/,
   maxHeight: 200,
   width: 400,
   zIndex: 9999,
   deferRequestBy: 100,  
   onSelect: function (value, data) {
     that.container.find("#IdProfessionals").val(data.IdProfessionals);
   }
   search: function(event, ui) {
     $('#IdProfessionals').val('');
   } 
 }); 
```

# csla - 为什么CSLA如此命名？

> ID：10947493
> 
> 赞同：0
> 
> 时间：2012-06-08T10:55:22.130
> 
> 标签：csla

我阅读了维基百科条目，现在正在阅读罗克福德的书。但是无法对“基于组件的可扩展和逻辑架构”这个名称的含义给出一个直接的答案。

我知道它有助于开发人员设计与其他关注点松散耦合的业务对象并支持验证、n 级撤消、父子关系等。但是我如何将它们与 Component、Scalabale、Logical 相关联？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T04:11:43.980

该框架起源于VB6 时代。根据这些标准，它是可扩展的和基于组件的。

# c# - 使用 Windsor 3 从代码中注入 AppSettings

> ID：10947509
> 
> 赞同：2
> 
> 时间：2012-06-08T10:56:12.330
> 
> 标签：c#, castle-windsor, windsor-3.0

我正在寻找摆脱 Windsor Xml 配置文件的方法。我只想保留必要的设置（主要是字符串）并将它们移动到 AppSettings。

有什么好的方法吗？最好不要在 AppSettings 和依赖项（ctor 参数）之间手动映射。

我不介意为此发生一些事情，但我想最小化实际业务问题解决应用程序的样板代码。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-09T10:38:26.550

您可以配置[对 AppSettings 的依赖关系](http://docs.castleproject.org/Default.aspx?Page=Whats-New-In-Windsor-3&NS=Windsor&AspxAutoDetectCookieSupport=1#Added_Dependency_class_11)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-08T15:45:27.167

## 使用子依赖解析器注入值

在您对不想注入配置对象发表评论后，我开始查看我的一些配置对象，`SubDependancyResolvers`并且偶然我用谷歌搜索了如何在其中获取属性名称，`SubDependancyResolver`然后我遇到了一个实际的实现。该项目是在[mausch](https://code.google.com/p/mausch/)，由“杂项实验和其他yerbas”组成。我无法验证代码是否有效，但它遵循我的解析器的工作方式。

它们的[实现](http://mausch.googlecode.com/svn/trunk/WindsorInitConfig/WindsorInitConfig/AppSettingsResolver.cs)包含一个属性，该属性应用于将配置中的应用程序设置映射到设置属性的设置类。另一种方法是拥有一个应用于要注入构造函数的属性的属性，并一起取消设置类：

```
public class AppSettingsAttribute: Attribute {}

public class AppSettingsResolver : ISubDependencyResolver
{
private readonly IKernel kernel;

public AppSettingsResolver(IKernel kernel)
{
    this.kernel = kernel;
}

public object Resolve( CreationContext context, ISubDependencyResolver contextHandlerResolver, Castle.Core.ComponentModel model, DependencyModel dependency )
{
    if( (
        from constructor in model.Constructors
        from dependencyModel in constructor.Dependencies
        where dependencyModel == dependency

        from parameterInfo in constructor.Constructor.GetParameters()
        select parameterInfo ).Any( parameterInfo => parameterInfo.Name == dependency.DependencyKey ) )
    {
        var converter = (IConversionManager) kernel.GetSubSystem(SubSystemConstants.ConversionManagerKey);

        return converter.PerformConversion(ConfigurationManager.AppSettings[dependency.DependencyKey], dependency.TargetType);
    }
    return null;
}

public bool CanResolve( CreationContext context, ISubDependencyResolver contextHandlerResolver, Castle.Core.ComponentModel model, DependencyModel dependency )
{
    return (
        from constructor in model.Constructors
        from dependencyModel in constructor.Dependencies
        where dependencyModel == dependency

        from parameterInfo in constructor.Constructor.GetParameters()
        where parameterInfo.Name == dependency.DependencyKey
        select ( Attribute.GetCustomAttribute( parameterInfo, typeof(AppSettingsAttribute) ) != null ) 
    ).FirstOrDefault();
}
}

[ TestFixture ]
public class When_resolving_dependancies_from_the_app_settings_configuration_section
{
    [ Test ]
    public void Should_resolve_a_string_and_an_int()
    {
        var container = new WindsorContainer();

        container.Kernel.Resolver.AddSubResolver(new AppSettingsResolver( container.Kernel ));
        container.Register( Component.For<Dependent>() );

        var dependent = container.Resolve<Dependent>();

        dependent.Foo.Should().Be( "bar" );

        dependent.Baz.Should().Be( 1 );
    }

    public class Dependent
    {
        public string Foo { get; private set; }
        public int Baz { get; private set; }

        public Dependent([AppSettings]string foo, [AppSettings]int baz)
        {
            Foo = foo;
            Baz = baz;
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T13:09:10.690

## 使用带有特定配置类的属性注入

为您的配置创建一个接口，然后有一个实现将`ConfigurationManager.AppSettings`您注入到 Windsor 作为依赖项包装起来。

```
class SomeThingDependentOnSomeConfiguration
{
    public SomeThingDependentOnSomeConfiguration(ISomeConfiguration config) { ... }
}

interface ISomeConfiguration
{
    int SomeValue { get; }
    string AnotherValue { get; }
}

class SomeConfigurationAppSettings : ISomeConfiguration
{
    public int SomeValue
    {
        get
        {
            return Convert.ToInt32(ConfigurationManager.AppSettings["SomeValue"]);
        }
    }

    public string AnotherValue
    {
        get
        {
            return ConfigurationManager.AppSettings["AnotherValue"];
        }
    }
} 
```

这允许您稍后引入一个`ConfigurationSection`（IMO 比应用程序设置更干净），或者如果您需要，您可以将其替换为使用硬编码值的类。

```
class SomeConfigurationConfigurationSections : ConfigurationSection, ISomeConfiguration
{
    [ConfigurationProperty("SomeValue")]
    public int SomeValue
    {
        get { return (int)this["SomeValue"]; }
    }

    [ConfigurationProperty("AnotherValue")]
    public string AnotherValue
    {
        get { return (string)this["AnotherValue"]; }
    }
} 
```

# asp.net - asp.net中如何根据app pool的生命周期来管理一个对象

> ID：10947512
> 
> 赞同：0
> 
> 时间：2012-06-08T10:56:17.107
> 
> 标签：asp.net, object, iis-7, static, dispose

基本上，我要做的是创建一个单例对象，只要应用程序池还活着，它就会持续存在。

IIS 应该能够实例化和销毁许多可以访问单例对象的应用程序。

到目前为止，听起来静态类应该可以完成这项工作吗？唯一的麻烦是我想在应用程序池关闭时处理它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T11:03:51.873

您需要添加一个终结器：

```
public class MyClass
{ 
    public MyClass() 
    { 
        //Constructor 
    } 

    ~MyClass() 
    { 
        // Deconstructor/finalizer 
    } 
} 
```

# pdf - SWFTools pdf2swf 精确裁剪

> ID：10947515
> 
> 赞同：2
> 
> 时间：2012-06-08T10:56:24.590
> 
> 标签：pdf, flash, crop, pdf2swf

我正在尝试制作一个小程序来裁剪 PDF 页面并导出为 SWF 文件，这些文件将显示在网络上。我正在使用 SWFTools 通过此命令行裁剪并转换为 SWF

```
pdf2swf -c x1:y1:x2:y2 mypdf.pdf -o exported.swf 
```

但它会掩盖而不是裁剪，并保持文件大小与整页相同。我检查了 swftools wiki 页面和文档，但没有发现任何相关的裁剪。有什么办法可以裁剪和缩小尺寸？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T06:41:58.427

我找到了定义为“从文件中删除尽可能多的剪辑层”的解决方案 -G 参数。在 pdf2swf 帮助中为我工作。

```
pdf2swf -G -c x1:y1:x2:y2 mypdf.pdf -o exported.swf 
```

# php - 分组时找到 maxdate 和 mindate

> ID：10947519
> 
> 赞同：0
> 
> 时间：2012-06-08T10:56:30.900
> 
> 标签：php, group-by, maxdate, mindate

数据库表

```
TYPE       DATE         PLAYER   MINUTE
---------------------------------------
starter    2000-01-01   Tom      
starter    2005-01-01   Tom      
starter    2005-01-01   Ben 
starter    2010-01-01   Tom
subbedin   2012-01-01   Ben      46 
```

询问

```
$query = mysql_query("SELECT *,
SUM(CASE WHEN type = 'starter' OR type = 'subbedin' THEN 1 ELSE 0 END) AS apps,
SUM(CASE WHEN Tüüp = 'starter' THEN 90 ELSE 0 end + CASE WHEN Tüüp = 'subbedin' THEN 91 - minutes ELSE 0 end) AS minutes
FROM players
GROUP BY player
ORDER BY apps DESC minutes DESC
"); 
```

我已经按照球员的出场次数和出场时间对结果进行了分组，但我无法让它显示第一次和最后一次出场的日期。

```
PLAYER   APPS   MINUTES   FIRST        LAST
-------------------------------------------------
Tom      3      270       2000-01-01   2010-01-01
Ben      2      135       2005-01-01   2012-01-01 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T11:08:19.877

尝试这个 ....

```
SELECT
    SUM(CASE WHEN type = 'starter' OR type = 'subbedin' THEN 1 ELSE 0 END) AS apps,
    SUM(CASE WHEN type = 'starter' THEN 90 ELSE 0 end + CASE WHEN type = 'subbedin' THEN 91 - minutes ELSE 0 end) AS `minutes`,
    MIN(`DATE`) as `FIRST`,
    MAX(`DATE`) as `LAST`
    FROM players
    GROUP BY player; 
```

# c++ - 在 c++ 中使用 wstring 编译问题

> ID：10947520
> 
> 赞同：2
> 
> 时间：2012-06-08T10:56:32.487
> 
> 标签：c++, visual-studio-2010, wstring

我需要为基于 Zinc 的 Flash 应用程序重构一个 .dll。

在将一个类从 master 复制并粘贴到分支后，我遇到了一些奇怪的编译错误：

```
GameInfo.h(15): error C2146: syntax error : missing ';' before identifier 'm_wsVersion'
GameInfo.h(15): error C4430: missing type specifier - int assumed. Note: C++ does not support default-int
GameInfo.h(15): error C4430: missing type specifier - int assumed. Note: C++ does not support default-int 
```

寻址代码：

```
// removed the comments
#include "stdafx.h"
#include <string.h>

class GameInfo {

public:

    UINT m_uiGameId;

    wstring m_wsVersion; // Line 15

    UINT m_uiCheckSum;

    wstring m_wsFilePath; // Same error report as on line 15

public:
    static BOOL createFromFile(wstring path, GameInfo &target); // error "error C2061: syntax error : identifier 'wstring'" thrown
}; 
```

我使用 Visual Studio 2010，在 IDE 本身中一切正常，没有语法错误或类似的错误。如前所述，我没有接触代码，标题似乎很好。

有谁知道这个错误怎么办？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-08T10:58:34.013

尝试使用字符串标头，并限定命名空间：

```
#include <string>

class GameInfo {
   ....  
   std::wstring m_wsVersion;
}; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-08T10:58:16.750

`#include <string>`是 C++ 中包含字符串类和使用的正确标准`std::wstring`。

我强烈建议 AGAINST 使用`using namespace std;`您的标题之一，因为您会强制使用标题的任何人将 std 内容拉入全局命名空间。

# javascript - 使用 Phonegap 访问软键盘按钮

> ID：10947532
> 
> 赞同：1
> 
> 时间：2012-06-08T10:57:36.947
> 
> 标签：javascript, android, cordova, dojo, keyboard

我已经开发了一个带有 dojo 和 phonegap for android 的移动应用程序。问题是，我想访问右下角按钮。我想将其名称更改为“发送”，并且我想将按钮与功能连接起来。有谁知道如何做到这一点？使用 javascript，或者如何在本地执行此操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T12:33:08.353

本机可以将文本更改为某些其他有限选项，但是我怀疑是否可以从 PhoneGap 应用程序的上下文中进行。

查看这篇文章，其中详细介绍了相对相同但在本地进行的过程。

[Android - 在 EditText 中处理“Enter”](https://stackoverflow.com/questions/1489852/android-handle-enter-in-an-edittext)

有关更多详细信息，您需要查看[文档](http://developer.android.com/resources/articles/on-screen-inputs.html)

# android - 来自 Javascript 接口类的 SetText

> ID：10947536
> 
> 赞同：2
> 
> 时间：2012-06-08T10:57:45.703
> 
> 标签：android, android-webview

我有一个 javascript 接口类来接收来自 javascript 的一些值。我从接口类中烘烤了该值，但我无法将该值设置为 TextVie。会有什么问题？？

```
 class JavaScriptInterfaceForCount {
    Context mContext;

    JavaScriptInterfaceForCount(Context c) {
        mContext = c;
    }
    public void receiveValueFromJs(String scrollwidth, String columwidth) {
            mPagenumberTextView.setText(scrollwidth+"");
      }
 } 
```

日志猫结果

```
06-08 16:20:37.003: E/AndroidRuntime(1198):                android.view.ViewRoot$CalledFromWrongThreadException: Only the original thread that created     a view hierarchy can touch its views.
06-08 16:20:37.003: E/AndroidRuntime(1198):     at android.view.ViewRoot.checkThread(ViewRoot.java:2802)
06-08 16:20:37.003: E/AndroidRuntime(1198):     at android.view.ViewRoot.requestLayout(ViewRoot.java:594)
06-08 16:20:37.003: E/AndroidRuntime(1198):     at android.view.View.requestLayout(View.java:8125)
06-08 16:20:37.003: E/AndroidRuntime(1198):     at android.view.View.requestLayout(View.java:8125)
06-08 16:20:37.003: E/AndroidRuntime(1198):     at android.view.View.requestLayout(View.java:8125)
06-08 16:20:37.003: E/AndroidRuntime(1198):     at android.view.View.requestLayout(View.java:8125)
06-08 16:20:37.003: E/AndroidRuntime(1198):     at android.widget.RelativeLayout.requestLayout(RelativeLayout.java:254)
06-08 16:20:37.003: E/AndroidRuntime(1198):     at android.view.View.requestLayout(View.java:8125)
06-08 16:20:37.003: E/AndroidRuntime(1198):     at android.widget.TextView.checkForRelayout(TextView.java:5378)
06-08 16:20:37.003: E/AndroidRuntime(1198):     at android.widget.TextView.setText(TextView.java:2688)
06-08 16:20:37.003: E/AndroidRuntime(1198):     at android.widget.TextView.setText(TextView.java:2556)
06-08 16:20:37.003: E/AndroidRuntime(1198):     at android.widget.TextView.setText(TextView.java:2531)
06-08 16:20:37.003: E/AndroidRuntime(1198):     at com.epub.reader.TestWebActivity$JavaScriptInterfaceForCount.receiveValueFromJs(TestWebActivity.java:326)
06-08 16:20:37.003: E/AndroidRuntime(1198):     at android.webkit.BrowserFrame.stringByEvaluatingJavaScriptFromString(Native Method)
06-08 16:20:37.003: E/AndroidRuntime(1198):     at android.webkit.BrowserFrame.stringByEvaluatingJavaScriptFromString(Native Method)
06-08 16:20:37.003: E/AndroidRuntime(1198):     at android.webkit.BrowserFrame.loadUrl(BrowserFrame.java:245)
06-08 16:20:37.003: E/AndroidRuntime(1198):     at android.webkit.WebViewCore.loadUrl(WebViewCore.java:1562)
06-08 16:20:37.003: E/AndroidRuntime(1198):     at android.webkit.WebViewCore.access$1400(WebViewCore.java:52)
06-08 16:20:37.003: E/AndroidRuntime(1198):     at android.webkit.WebViewCore$EventHub$1.handleMessage(WebViewCore.java:948)
06-08 16:20:37.003: E/AndroidRuntime(1198):     at android.os.Handler.dispatchMessage(Handler.java:99)
06-08 16:20:37.003: E/AndroidRuntime(1198):     at android.os.Looper.loop(Looper.java:123)
06-08 16:20:37.003: E/AndroidRuntime(1198):     at android.webkit.WebViewCore$WebCoreThread.run(WebViewCore.java:621)
06-08 16:20:37.003: E/AndroidRuntime(1198):     at java.lang.Thread.run(Thread.java:1096) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-08T11:16:49.703

```
runOnUiThread(new Runnable() {
     public void run() {
         mPagenumberTextView.setText(scrollwidth+"");
    }
}); 
```

您必须在主线程中编辑 UI

# api - SoundCloud API 获取曲目收藏夹

> ID：10947538
> 
> 赞同：0
> 
> 时间：2012-06-08T10:57:57.387
> 
> 标签：api, statistics, soundcloud

是否有可能通过 SoundCloud API 知道谁以及何时喜欢您的曲目？

[我可以在http://soundcloud.com/%usernick%/%track-name%/stats/who/favorites?from_date=2012-01-01&to_date=2012-06-09](http://soundcloud.com/%usernick%/%track-name%/stats/who/favorites?from_date=2012-01-01&to_date=2012-06-09)上看到这个列表

我可以看到收藏夹的天数统计[http://soundcloud.com/%usernick%/%track-name%/stats/counts/favorites?from_date=2012-01-01&to_date=2012-06-09](http://soundcloud.com/%usernick%/%track-name%/stats/counts/favorites?from_date=2012-01-01&to_date=2012-06-09)

但是我如何通过 API 获得它？

`/tracks/%track_id%/favorites.json`我在 GET或 GET上除此信息外`/users/user_id/favorites/%track_id%.json`，但它不起作用。

注意：此功能仅适用于付费用户。

PS：对不起我的英语不好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T10:43:06.173

我只找到了一种方法——通过`/my/activity/`，但在这种情况下，我必须获得所有曲目、评论和收藏夹的所有活动。

# html - 将背景应用于和/或

> ID：10947541
> 
> 赞同：55
> 
> 时间：2012-06-08T10:58:07.820
> 
> 标签：html, css

```
$("#toggle").click(function(){
    $("html").toggleClass("bg");
});
```

```
html.bg {
    background: blue;
}

body {
    background: yellow;
}
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<!DOCTYPE html>
<html class="bg">
<head>
</head>

<body>
    Test
    <br>
    <button id="toggle">Toggle HTML background</button>
</body>
</html>
```

我发现如果你应用一个 CSS 背景`body`，它会占据整个页面（不管它的实际高度或宽度`body`是多少）。

但是，如果对`html`和都应用 CSS 背景`body`，则背景`body` **不会占据整个页面**。

这种差异是预期的行为吗？

我将如何叠加两个全屏背景（例如，背景颜色和半透明图像？）

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2012-06-08T11:01:35.500

这是[正确的行为](http://www.w3.org/TR/css3-background/#special-backgrounds)。¹ [在标准模式下](https://stackoverflow.com/questions/32214152/why-does-my-div-height-100-work-only-when-doctype-is-removed/32215263#32215263),[和](https://stackoverflow.com/questions/23599919/why-doesnt-the-html-element-take-up-the-whole-browser-viewport/23599937#23599937)`body`,并不会立即占据视口的整个高度，即使当您只对后者应用背景时它也会如此显示。事实上，如果你不给它自己的背景，元素将采用背景，并将其传递给画布：[`html`](https://stackoverflow.com/questions/23599919/why-doesnt-the-html-element-take-up-the-whole-browser-viewport/23599937#23599937)`html``body``html`

> 根元素的背景变成了画布的背景，并且它的背景绘制区域扩展到覆盖整个画布，尽管任何图像的大小和位置都相对于根元素，就好像它们是为该元素单独绘制的一样。（换句话说，背景定位区域被确定为根元素。）如果根的'background-color'值为'transparent'，则画布的背景颜色取决于UA。根元素不再绘制此背景，即其背景的使用值是透明的。
> 
> 对于根元素是 HTML`HTML`元素或 XHTML`html`元素的文档：如果根元素上的 'background-image' 的计算值是 'none' 并且它的 'background-color' 是 'transparent'，则用户代理必须改为传播该元素的第一个 HTML`BODY`或 XHTML`body`子元素的背景属性的计算值。该`BODY`元素的背景属性的使用值是它们的初始值，并且传播的值被视为在根元素上指定了它们。建议 HTML 文档的作者为`BODY`元素而不是`HTML`元素指定画布背景。

但是，也就是说，您可以将任何背景图像叠加在单个元素（或`html`或`body`）上的背景颜色上，而不必依赖两个元素 - 只需在速记属性中使用`background-color`和`background-image`或组合它们：`background`

```
body {
    background: #ddd url(background.png) center top no-repeat;
} 
```

如果你想组合*两个背景图片*，你需要依赖多个背景。这样做主要有两天时间：

*   在 CSS2 中，这就是两个元素的样式都派上用场的地方：只需设置一个背景图像`html`和另一个`body`您希望叠加在第一个图像上的图像。为确保背景图像`body`以全视口高度显示，您还需要分别应用`height`和`min-height`：

    ```
    html {
        height: 100%;
        background: #ddd url(background1.png) repeat;
    }

    body {
        min-height: 100%;
        background: transparent url(background2.png) center top no-repeat;
    } 
    ```

    顺便说一句，您必须分别指定`height`and `min-height`to`html`和的原因`body`是因为这两个元素都没有任何内在高度。两者都是`height: auto`默认的。它是具有 100% 高度`height: 100%`的视口，因此取自视口，然后应用到`body`最低限度以允许滚动内容。

*   在 CSS3 中，语法得到了扩展，因此您可以[在单个属性中声明多个背景值](http://www.w3.org/TR/css3-background/#layering)，从而无需将背景应用于多个元素（或调整`height`/ `min-height`）：

    ```
    body {
        background: url(background2.png) center top no-repeat, 
                    #ddd url(background1.png) repeat;
    } 
    ```

    唯一需要注意的是，在单个多层背景中，只有最底层可能有背景颜色。您可以在此示例中看到`transparent`上层缺少该值。

    不用担心 - 即使您使用多层背景，上面指定的传播背景值的行为也完全相同。

但是，如果您需要支持较旧的浏览器，则需要使用 CSS2 方法，该方法一直支持到 IE7。

我在[这个其他答案](https://stackoverflow.com/questions/7187569/whats-the-difference-between-applying-css-to-html-body-and/7187588#7187588)下的评论解释了，伴随着[小提琴](http://jsfiddle.net/BoltClock/vddbh)，`body`实际上是如何从`html`默认边距偏移的，即使它看起来像是被填充了，这也是由于这种看似奇怪的现象。

* * *

¹ [这可能源于设置 HTML`background`和导致背景`bgcolor`属性`body`应用于整个视口的属性。更多关于[这里](https://stackoverflow.com/questions/4565942/should-global-css-styles-be-set-on-the-html-element-or-the-body-element/4565959#4565959)。]

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2018-01-30T20:19:56.677

建议阅读：

[https://css-tricks.com/just-one-of-those-weird-things-about-css-background-on-body/](https://css-tricks.com/just-one-of-those-weird-things-about-css-background-on-body/)

本质上，在没有 a `background`on`html`元素的情况下，`body` `background`将覆盖页面。如果元素`background`上有 a，则其行为就像任何其他元素一样。`html``body` `background`

# javascript - 加载和访问加载时的所有图像

> ID：10947545
> 
> 赞同：1
> 
> 时间：2012-06-08T10:58:32.583
> 
> 标签：javascript, jquery, html, css

我有一个页面，其中菜单按钮（图像）是白色的，但我希望它们在悬停时变为红色并在鼠标输出时返回白色。所以我有相应的红色菜单按钮。所以如果白色按钮是motors1.jpg，红色按钮是motors2.jpg，因此下面的JQuery代码是算法。

```
<table>
<tr>
<td><img class="navimg" src="images/home1.gif"/></td>
<td><img class="navimg" src="images/motors1.gif"/></td>
<td><img class="navimg" src="images/about_us1.gif"/></td>
<td><img class="navimg" src="images/media1.gif"/></td>
<td><img class="navimg" src="images/forums1.gif"/></td>
<td><img class="navimg" src="images/dealers1.gif"/></td>
<td><img class="navimg" src="images/whats_new1.gif"/></td>

</tr>
</table> 
```

Jquery 代码是：

```
$(document).ready(function(){
   $('.navimg').mouseover(function(){
    source=$(this).attr('src').replace('1','2');
    $(this).attr('src',source);

   }).mouseout(function(){
    source= source.replace('2','1');
    $(this).attr('src',source);
   });

}); 
```

我使用外部 CSS 样式表进行定位

```
 .navimg{
                         width: 125.5px;
                         height: 34px;
                                  } 
```

所以问题是：我注意到第一次加载页面时白色按钮变为红色按钮时存在延迟。我认为滞后是因为红色按钮未在页面加载时加载（因此不在浏览器缓存中），因此 jquery 代码重新加载它们。因此，通过将它们加载为隐藏输入、将它们加载到浏览器缓存来解决此问题的任何方法都将受到赞赏或任何其他解决此问题的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T11:07:14.510

只需使用图像精灵[源](http://www.w3schools.com/css/css_image_sprites.asp)

对于一个菜单按钮，您将拥有一个包含白色和红色图像的图像文件，因此您只需要更改`background-position`悬停动作。它非常快，图像加载完全，你不需要使用一些 javascripts，只需要 CSS 。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-08T11:17:19.127

使用精灵是最好的解决方案。

但是，如果您无法做到这一点，则可以使用以下 JavaScript 方法（取自 Dreamweaver）预加载图像。

**在您的 html 标记之后添加以下内容。**

```
<script type="text/JavaScript">
function MM_preloadImages() { //v3.0
  var d=document; if(d.images){ if(!d.MM_p) d.MM_p=new Array();
    var i,j=d.MM_p.length,a=MM_preloadImages.arguments; for(i=0; i<a.length; i++)
    if (a[i].indexOf("#")!=0){ d.MM_p[j]=new Image; d.MM_p[j++].src=a[i];}}
}
</script> 
```

将以下属性添加到您的 body 标签：

```
onload="MM_preloadImages('path of image goes here')" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-08T11:04:36.553

我会通过加入motor1.gif 和motors2.gif 成为motors.gif 来做到这一点。

如果您制作了一张顶部为白色图像，底部为红色图像的图像，那么您的`mouseover/mouseout`（ps. check out `hover`）只需要更改图像偏移量，无需预加载。

# objective-c - 按下按钮时出现无法识别的选择器错误

> ID：10947547
> 
> 赞同：1
> 
> 时间：2012-06-08T10:58:40.040
> 
> 标签：objective-c, ios, cocoa-touch, uiviewcontroller, uibutton

基本上，我得到了错误：

```
-[UIViewController donePress:]: unrecognized selector sent to instance 0x6a7f7c0
*** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[UIViewController donePress:]: unrecognized selector sent to instance 0x6a7f7c0'
*** First throw call stack:
(0x13cd022 0x155ecd6 0x13cecbd 0x1333ed0 0x1333cb2 0x13cee99 0x1a14e 0x1a0e6 0xc0ade 0xc0fa7 0xc0266 0x3f3c0 0x3f5e6 0x25dc4 0x19634 0x12b7ef5 0x13a1195 0x1305ff2 0x13048da 0x1303d84 0x1303c9b 0x12b67d8 0x12b688a 0x17626 0x1d6d 0x1cd5)
terminate called throwing an exception 
```

每当我按下一个按钮。此按钮位于第二个视图中，已由以下人员加载：

```
replacementController = [[UIViewController alloc] initWithNibName:@"NFCController" bundle:nil];
[self.view addSubview:self.replacementController.view]; 
```

该按钮通过使用拆分窗格视图和控件拖动到头文件连接到一个类。Xcode 生成了相关的方法。但是，现在当我单击按钮时，它会因上述错误而崩溃。

如果您需要更多信息，请告诉我。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-08T11:01:06.383

您正在初始化 a`UIViewController`而不是`NFCController`

将初始化更改为

```
replacementController = [[NFCController alloc] initWithNibName:@"NFCController" bundle:nil]; 
```

说明：正在创建的对象是 UIViewController 而不是 NFCController 并且 UIViewController 没有名为 donePress: 的函数，因此您收到错误

# c++ - 在 C++ 中查找反斜杠 (\)

> ID：10947550
> 
> 赞同：2
> 
> 时间：2012-06-08T10:58:44.080
> 
> 标签：c++

`\`我对C++ 中反斜杠的计数有疑问，我有以下代码：

```
string path = "a\b\c";
int level = 0;
int path_length = path.size();
for(int i = 0; i < path_length; i++){
if(path.at(i) == '\\'){
        level++;
    }
}
cout << level << endl; 
```

但是，级别始终为0！你能解释一下为什么吗？以及如何计算数量`/`？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-08T10:59:36.543

你的字符串是~~无效的~~不是你所期望的——它应该是`string path = "a\\b\\c";`

您甚至会收到警告（或至少 MSVS 提供警告）：

> 警告 C4129：“c”：无法识别的字符转义序列

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-06-08T11:20:30.090

变量中的反斜杠应该被转义。

```
string path = "a\\b\\c"; 
```

您也可以使用`count`算法库中的函数来避免循环字符串中的每个字符并检查它是否是反斜杠。

```
#include <iostream>
#include <string>
#include <algorithm>   // for count()
using namespace std;

int main()
{
string path = "a\\b\\c";
int no_of_backslash = (int)count(path.begin(), path.end(), '\\');
cout << "no of backslash " << no_of_backslash << endl;
} 
```

# php - 压缩图像 - 获取图像大小 PHP

> ID：10947556
> 
> 赞同：2
> 
> 时间：2012-06-08T10:59:31.687
> 
> 标签：php, compression, flush

我有一个脚本，它递归地循环遍历所有子目录并压缩所有 jpeg。我在压缩前后打印文件大小，但打印的数字相同。我正在运行的脚本是：

```
set_time_limit (86000);
ob_implicit_flush(true);
$main = "files";

function readDirs($main){
  $dirHandle = opendir($main);
  while($file = readdir($dirHandle)){
    $newFile = $main.'/'.$file;
    if(is_dir($newFile) && $file != '.' && $file != '..'){
       readDirs($newFile);
    }
    else{
        if($file != '.' && $file != '..' && stristr($newFile,'.jpg'))
        {
            //echo $newFile.'</br>';
            $img = imagecreatefromjpeg($newFile);
            echo 'Compressing '.$newFile.'... from ('.filesize($newFile).' bytes) to (';
            imagejpeg($img,$newFile, 30);
            echo filesize($newFile).' bytes)...<br>';
            for($k = 0; $k < 40000; $k++)
                echo ' '; // extra spaces to fill up browser buffer
        }
    }
  } 
} 
```

我得到的输出是：

> 压缩文件/1013/0079/3180/Beautifully_renovated_garden_apartment_in_Rehavia_7.JPG... 从（58666 字节）到（58666 字节）... 压缩文件/1013/0088/0559/Exquisite_stand_alone_house_in_Givat_Hamivtar_exceptional_views_3.JPG... 从（49786 字节）到（49786 字节） 49786 字节）... 压缩文件/1013/0088/0587/Exquisite_stand_alone_house_in_Givat_Hamivtar_exceptional_views_6.JPG... 从（18994 字节）到（18994 字节）... 压缩文件/1013/0138/4914/Beautiful_4_rooms_apartment_with_views_to_the_Old_City...从(527801 字节) 到 (527801 字节)... 压缩文件/1013/0208/0656/Fevrier_2011_005.JPG... 从 (35607 字节) 到 (35607 字节)... 压缩文件/1013/0216/6078/Beautiful_townhouse_in_the_heart_of_the_German_Colony_00 .JPG... 从（42509 字节）到（42509 字节）...正在压缩文件/1013/0217/1359/Unique_luxurious_new_penthouse_in_the_heart_of_the_German_Colony_028.jpg... 从（1101251 字节）到（1101251 字节）... 正在压缩文件/1013/0269/0299/Exclusive_Duplex_Penthouse_in_the_German_Colony_0171.jpg... 从（2 字节） 20912 字节）... 压缩文件/1013/0821/0299/Beautiful_views_to_the_Knesset_and_Gan_Saker_016.JPG... 从（570428 字节）到（570428 字节）... 压缩文件/1013/0822/0660/Beautiful_new_penthouse_in_luxurious_building_with_pool_158double.jpg... (1020561 字节) 到 (1020561 字节)... 压缩文件/1013/0847/8190/New_luxurious_penthouse_with_private_entrance_in_Old_Katamon_016.JPG... 从 (542071 字节) 到 (542071 字节)... ... ... ...压缩文件/1013/0269/0299/Exclusive_Duplex_Penthouse_in_the_German_Colony_0171.jpg... 从（20912 字节）到（20912 字节）... 压缩文件/1013/0821/0299/Beautiful_views_to_the_Knesset_and_Gan_Saker_016.JPG... 从（570428 字节） 570428 字节）... 压缩文件/1013/0822/0660/Beautiful_new_penthouse_in_luxurious_building_with_pool_158double.jpg... 从（1020561 字节）到（1020561 字节）... 压缩文件/1013/0847/8190/New_luxurious_penthouse_with_private_entrance_in_Old_K... （542071 字节）到（542071 字节）... ... ... ...压缩文件/1013/0269/0299/Exclusive_Duplex_Penthouse_in_the_German_Colony_0171.jpg... 从（20912 字节）到（20912 字节）... 压缩文件/1013/0821/0299/Beautiful_views_to_the_Knesset_and_Gan_Saker_016.JPG... 从（570428 字节） 570428 字节）... 压缩文件/1013/0822/0660/Beautiful_new_penthouse_in_luxurious_building_with_pool_158double.jpg... 从（1020561 字节）到（1020561 字节）... 压缩文件/1013/0847/8190/New_luxurious_penthouse_with_private_entrance_in_Old_K... （542071 字节）到（542071 字节）... ... ... ...正在压缩文件/1013/0822/0660/Beautiful_new_penthouse_in_luxurious_building_with_pool_158double.jpg... 从（1020561 字节）到（1020561 字节）... 压缩文件/1013/0847/8190/New_luxurious_penthouse_with_private_entrance_in_Old_Katamon_016.JPG... 从（452071 字节） 542071 字节）... ... ... ...正在压缩文件/1013/0822/0660/Beautiful_new_penthouse_in_luxurious_building_with_pool_158double.jpg... 从（1020561 字节）到（1020561 字节）... 压缩文件/1013/0847/8190/New_luxurious_penthouse_with_private_entrance_in_Old_Katamon_016.JPG... 从（452071 字节） 542071 字节）... ... ... ...

有人可以告诉我是什么问题吗？为什么尺寸没有更新？

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T11:10:08.630

`filesize()`使用可能没有足够时间在两次调用之间刷新的缓存机制（“统计缓存”）。

用于`clearstatcache()`强制缓存刷新。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T11:14:52.233

filesize() 函数缓存每个文件的大小，以防止非常慢的 stat()-syscall。它在内部保存给定文件名的文件大小，以便更快地响应新调用。

正如建议的那样，您必须调用 clearstatcache() 才能获得正确的结果。如果您使用 PHP >= 5.3.0，您还可以指定必须清除的缓存部分。

您的代码应如下所示：

```
 echo 'Compressing '.$newFile.'... from ('.filesize($newFile).' bytes) to (';
        imagejpeg($img,$newFile, 30);
        clearstatcache(true, $newFile);  // or clearstatcache() if you want to flush the whole cache
        echo filesize($newFile).' bytes)...<br>'; 
```

我希望这就是你要找的。

# php - php设置权限文件使其可写

> ID：10947558
> 
> 赞同：1
> 
> 时间：2012-06-08T10:59:43.207
> 
> 标签：php, linux, permissions, filesystems

经过多年的 php 编程，这个问题对我来说仍然很奇怪。

我想让一个文件在动态上可写，以便在生产/开发中没有权限问题......但它仍然给我带来了麻烦。

有人可以解释我错了什么吗？

```
// permissions    -- the folder writable by www-data
//drwxrwxrwx 2 www-data www-data  4096 mag 24 12:19 Details

// then the file not writable by the owner
-r----x--t 1 www-data www-data 0 giu  8 12:48 /home/giuseppe/homeProj//Ariprova/trunk/PhpCsv/phpcsv/ConfigClasses/Helpers/Virtuemart2/Details/324-PartsToAdd.json

// then the code

if (!file_exists($fileRequest)) {   // it's found
                throw new Exception ('File non trovato. Nome File completo: '.$fileRequest. ' con cartella '.  getcwd()); 
                }  

if (!is_writable($fileRequest)) {
                $results = @chmod($fileRequest, '0777');  //this gives true 

            }

            $fileReq = fopen($fileRequest, 'w');
            fwrite($fileReq, 'a string' );   // this writes nothing on file

            fclose($fileReq); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-08T11:10:14.307

更改`chmod($fileRequest, '0777')`为`chmod($fileRequest, 0777)`。该字符串`'0777'`将被转换为一个数值，这将是十进制的 777，这不是您所期望的；你真正想要的是 0777 八进制。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-08T11:08:19.037

这是 chmod 的手册页：http: [//php.net/chmod](http://php.net/chmod) 你可以看到函数“**尝试**更改指定文件的模式”

这是因为可能不允许运行脚本的用户（例如 apache）覆盖该目录所有者设置的权限（至少这可能是原因之一）

**更新**：您可以尝试与所有者一起进入父目录（或确定为 root）并将所有权更改为您需要能够执行此操作的用户（chown apache:apache dirname 或类似的东西）

# sql - where 语句的性能差异

> ID：10947559
> 
> 赞同：0
> 
> 时间：2012-06-08T10:59:47.740
> 
> 标签：sql, sql-server, sql-server-2008, sql-server-2008-r2

1-以下命令的性能差异是什么？

```
 ... Where ID in (1,2,3)

... where ID = 1 OR ID = 2 OR ID = 3 
```

2-以下命令的性能差异（条件优先级）在哪里？

```
... where Condition1 and condition2  ->  ... where condition2 and condition1
... where Condition1 OR condition2  ->  ... where condition2 OR condition1 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T11:06:32.010

以下两种类型没有区别；因为无论如何，在运行时，您的数据库引擎会将`IN`子句展平为 OR'd 堆栈。所以`IN(1,2,3)`将扩大到`col = 1 OR col = 2 OR col = 3`

```
... Where ID in (1,2,3)   

... where ID = 1 OR ID = 2 OR ID = 3 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T11:18:25.850

我不认为在性能上有显着差异。如果您查看执行计划，SQL Server 会在数据加载步骤中嵌入过滤。当从磁盘读取数据并将其加载到磁盘页面中时，就会发生这种情况。与变幻莫测的 I/O 相比，花费几个周期使一个比另一个更快基本上没有影响。

“in”运算符的一个典型实现是作为一个小哈希表。对于三个元素，这很容易比顺序比较慢。但是，对于更多比较，“in”方法会更快。对于数字来说尤其如此，因为内置硬件比较会非常快。不过，还要记住，编译器知道“in”列表中的内容，因此如果数据库设计人员认为这是值得优化的，它可以选择进行顺序比较。不过，我怀疑他们会这么想。

回应亚伦的评论。我的信念是基于 IN 可以返回的两个错误：

*错误 8623：查询处理器用尽内部资源，无法生成查询计划。这是一个罕见的事件，仅适用于极其复杂的查询或引用大量表或分区的查询。请简化查询。如果您认为自己错误地收到了此消息，请联系客户支持服务以获取更多信息。*

*错误 8632：内部错误：已达到表达式服务限制。请在您的查询中寻找可能复杂的表达式，并尝试简化它们。*

(http://msdn.microsoft.com/en-us/library/ms177682.aspx)

我不熟悉关于 WHERE 子句的逻辑表述的这些错误。因此，我做出了一个可能轻率的假设，即底层实现是使用哈希表。

# java - 如何使用 Swig 将数组（java 中的 long 数组）从 Java 传递到 C++

> ID：10947560
> 
> 赞同：5
> 
> 时间：2012-06-08T10:59:49.690
> 
> 标签：java, c++, swig

我有如下示例 .h 文件：

```
class Test
{
public:
       void SelectValues(long long values[])
}; 
```

我使用 SWIG 并从 .i 文件下面创建了 JNI 接口

```
%module MyLib
%include "carrays.i"
%array_functions(long long, long_long_array )

%{
  #include "Test.h"
%}

/* Let's just grab the original header file here */
%include <windows.i> /*This line is used for calling conventions*/ 
% include "Test.h" 
```

当我创建 Java 方法时，它创建如下：

```
public void SelectValues(SWIGTYPE_p_long_long includeKeys) 
```

同样对于 JNI 文件，它采用参数作为`jlongArray`但仅采用简单`jlong`。由于这个问题，我无法创建 long like 数组`long[]={1L,2L}`并将其传递给上面的 Java 方法以调用适当的 JNI 方法。

我希望 SWIG 以这样一种方式生成接口，即我可以将上述数组传递给我的 C++ 方法。

我已经阅读[了这个问题](https://stackoverflow.com/questions/4167233/how-do-i-pass-arrays-from-java-to-c-using-swig)，但它并没有帮助我了解如何将数组从 Java 传递到 C++。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T13:38:21.597

您在这里所做的`array_functions`是正确且可用的，但它专注于直接包装 C++ 代码，并且不会使用底层 Java 数组。您可以将其与以下内容一起使用：

```
SWIGTYPE_p_long_long array = MyLib.new_long_long_array(100); // new array with 100 elements.
for (int i = 0; i < 100; ++i) {
  long_long_array_setitem(array, i, i);
}
new Test().SelectValues(array); 
```

其中数组只是“真实”C++ 内存块的代理，您可以从 Java 端读取/写入并传递给包装函数。

我从您的问题中猜想您有兴趣在 Java 方面让这种感觉更“自然”。SWIG 还提供`array_class`了类似地包装数组的方法，但它是一个适当的对象，而不是静态函数的集合。例如，如果您将接口文件更改为使用`array_class(long long, LongLongArray)`而不是`array_functions`您可以执行以下操作：

```
LongLongArray array = new LongLongArray(100);
for (int i = 0; i < 100; ++i) {
   array.setitem(i,i); 
}
new Test().SelectValues(array.cast()); 
```

如果你愿意的话，你实际上可以使用一些类型图让 SWIG 做更多的事情。您的示例类没有长度，`SelectValues`所以我假设您是 0 终止数组，尽管您同样可以通过一些简单的更改来传递长度。

（为方便起见，我为`%inline`您的班级减少了文件数量并添加了一个虚拟实现以进行测试）

```
%module MyLib

%{
#include <iostream>
%}

%typemap(jtype) long long values[] "long[]"
%typemap(jstype) long long values[] "long[]"
%typemap(javain) long long values[] "$javainput"
%typemap(jni) long long values[] "jlongArray"
%typemap(in) long long values[] {
  jboolean isCopy;
  $1 = JCALL2(GetLongArrayElements, jenv, $input, &isCopy);
}

%inline %{
class Test
{
public:
  void SelectValues(long long values[]) {
    while (*values) {
      std::cout << *values++ << "\n";
    }
  }
};
%} 
```

在这里，我们说 SWIG 生成的代理类和它生成的 JNI 类都将使用`long[]`，即 Java 数组。我们不需要在 Java Proxy 到 Java JNI 的转换中做任何事情，所以`javain`typemap 只是一个直接的传递。在 JNI 的 C++ 端是 a `jlongArray`，我们也在另一个类型映射中指定了它。

然后我们需要一个`in`类型映射来安排从 jlong​​Array 到`long long[]`C++ 端的转换 - 有一个 JNI 调用，我们不在乎它是我们最终使用的 JVM 的副本还是实际内存。（例如，您可能关心是否要修改结果并使其在 Java 中可见）

我对此进行了测试：

```
public class run {
  public static void main(String[] argv) {
    System.loadLibrary("mylib");
    long arr[] = {100,99,1,0}; // Terminate with 0!
    new Test().SelectValues(arr);
  }
} 
```

这完全符合您的期望。

# android - 按下后退键的不同行为

> ID：10947563
> 
> 赞同：0
> 
> 时间：2012-06-08T11:00:04.050
> 
> 标签：android, android-activity

我有四个活动，应用程序循环通过这些活动。第一个获取大量数据，所以我不想多次这样做。事情是，如果用户在最后一个活动上按下返回键，我想返回第一个而不重新加载活动。我目前正在考虑 startActivityForResult 方法并完成前两个方法，但可能有更好的解决方案？

设想：

![在此处输入图像描述](../Images/a6507db72d84f224395d6b8573de5bc7.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T11:19:42.743

哈斯兰，

您必须了解的第一件事是，对于是否重新加载 Activity，您几乎没有选择余地。这是由系统（很大程度上）决定的。话虽如此，您可以做很多事情来限制系统杀死 Activity 的愿望。此外，您可以使用多种工具来限制此类可能关闭的影响

1.  完成每个子活动，因为它变得不重要。这将释放资源，降低摆脱未使用的活动的需要（即使是暂时的）。

2.  找到一种简单但聪明的方法来限制负载。

根据提供的信息，您提出的解决方案是实现两者的可行方法。但是，我会问“在活动 C 打开时，活动 B 是否必须处于活动状态？” 如果没有，您可能需要执行以下操作：

1.  startActivityForResult(活动 B)

2.  Activity B 完成后，将结果发送回 Activity A 和 startActivityForResult(Activity C)

3.  最后，当活动 C 完成时，您可以 startActivityForResult(Activity D) 并返回将毫不费力地工作，您不必关闭其他活动。

此外，如果您在活动 C 上按返回，您可以根据需要向活动 A 提供取消的结果，强制重新启动活动 B。根据 Activity B 所需的处理，这对您的应用程序来说可能一点也不麻烦。

不管你如何处理这个，我建议找到一种方法来缓存这些数据，例如 onResume()，如果需要，你可以快速重新加载。这是因为没有办法确保您的原始 Activity 不会被释放为其他 Activity 让路。

希望这可以帮助，

模糊逻辑

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T11:09:21.443

尝试使用这个：

```
 Intent a = new Intent(this,A.class);
    a.addFlags(Intent.FLAG_ACTIVITY_REORDER_TO_FRONT);
    startActivity(a);
    return true; 
```

活动 A 将被重新排序到前面，而不创建新实例。如果要通过 intent 传递 extras，可以在 Activity A 的 onNewIntent(intent) 中获取 intent extras。

# mysql - 表不存在：显示键

> ID：10947564
> 
> 赞同：2
> 
> 时间：2012-06-08T11:00:10.130
> 
> 标签：mysql, ruby-on-rails

运行 db:migrate 时出现此错误

```
Mysql2::Error: Table 'sample_app_development.microposts' doesn't exist: SHOW KEYS FROM 
`microposts 
```

这是我的迁移

```
class CreateMicroposts < ActiveRecord::Migration
      def change
        create_table :microposts do |t|
          t.string :content
          t.integer :user_id

          t.timestamps

          add_index :microposts, [:user_id, :created_at]    

        end
      end
    end 
```

我尝试重新启动 mysql 并删除并重新创建数据库。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-08T11:03:54.543

将您`add_index`移出`create_table`'s 块。

# java - 使用 JPA 执行返回不同对象的本机查询

> ID：10947565
> 
> 赞同：0
> 
> 时间：2012-06-08T11:00:12.093
> 
> 标签：java, jpa

我有以下查询：

```
SELECT City.*, User.*
FROM City,User 
```

我有一个 entityManager 对象。所以可以执行这个查询，entityManager 会返回一个 [City,User] 列表？

因为我只看到存在这个方法：createNativeQuery(String, Class)。

# android - Android WebView 还是 ImageView？

> ID：10947566
> 
> 赞同：2
> 
> 时间：2012-06-08T11:00:12.110
> 
> 标签：android, webview, imageview, scale, download

我有一个从 URL 下载和显示图像的应用程序。这很好用

```
URLConnection conn = urls[i].openConnection();
conn.connect();
if(conn.getContentLength() > 0)
is = conn.getInputStream();
bis = new BufferedInputStream(is);
Bitmap temp = BitmapFactory.decodeStream(bis); 
```

我注意到 WebView 的下载和显示图像比上面的代码快得多，所以我想我会尝试。

```
String url = "http:\\image.jpg"
int mWidth = getSystemService(Context.WINDOW_SERVICE).getDefaultDisplay().getWidth()
webView.loadData("<html><body> <img src=\"" + url + "\" width=\"" + mWidth + "px\" height=\"auto\"></body></html>", "text/html", null); 
```

尽管这样可以更快地获取图像，但它不会将图像缩放到屏幕大小，但大图像总是超出 WebView 的宽度，需要滚动才能正确查看。

有谁知道我如何解决问题以在 WebView 中正确显示图像，或者如何首先加快图像的下载速度？

我希望加快下载速度，但如果我可以正确缩放图像，我很乐意使用 WebView。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-08T11:09:48.987

通过 CSS 将图像元素的宽度设置为 100%，高度应根据图像的纵横比/比例进行缩放。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T11:16:52.093

我还没有尝试过。但是从您的问题中，我可以看到您使用 webview 面临的唯一问题是屏幕尺寸适合问题。为了克服这个问题，您可以简单地将初始比例级别设置为 1，并且您的图像应该适合屏幕内部。

尝试这个，

```
 <WebView  
      android:id="@+id/webview"
      android:layout_width="50dip" 
      android:layout_height="50dip"/>

webView.setInitialScale(1);
webView.getSettings().setJavaScriptEnabled(true);
webView.getSettings().setLoadWithOverviewMode(true);
webView.getSettings().setUseWideViewPort(true);
webView.setScrollBarStyle(WebView.SCROLLBARS_OUTSIDE_OVERLAY);
webView.setScrollbarFadingEnabled(false); 
```

注意：我不确定这将在多大程度上有效。我还没试过这个。但是尝试一下是值得的。

# java - 将java程序中输入的值（以表单形式）添加到sql数据库：

> ID：10947567
> 
> 赞同：0
> 
> 时间：2012-06-08T11:00:15.077
> 
> 标签：java, sql, user-interface, netbeans

我正在尝试捕获和存储用户详细信息（名称、密码等）并将它们存储在 sql 数据库中，以便用户将来登录时使用。

如何将详细信息保存为数据库中的一行，但将它们作为单独的字符串输入？另外，我如何捕获和存储从组合框中选择的性别（男、女）等详细信息？谢谢。

```
private class achandler implements ActionListener {
        @Override
        public void actionPerformed(ActionEvent ae) {
            //capture user details
            String fnamevalue = fnametext.getText();
            String lnamevalue = lnametext.getText();
            String usernamevalue = usernametext.getText();
            char[] pwdvalue = pwdtext.getPassword();
            char[] pwdrptvalue = pwdrpttext.getPassword();

            if(pwdvalue == pwdrptvalue) {
            //add user details to an array
            String[] userdetail = {fnamevalue, lnamevalue, usernamevalue, pwdvalue.toString()};

            try {
            Class.forName("com.mysql.jdbc.Driver");
            String Url = "jdbc:mysql://localhost/nsibirwa?" +
                                   "user=root&password=1234";

            Connection con = DriverManager.getConnection(Url);
            Statement stmt = con.createStatement();

            //I am stuck here!!!! i.e. adding 'userdetail' as a tuple in the database

        }
        catch (SQLException e) {
            System.out.println("SQL Exception: "+ e.toString());
        } 
        catch (ClassNotFoundException cE) {
            System.out.println("Class Not Found Exception: "+ cE.toString());
        }
       }
            else {
            JOptionPane.showMessageDialog(null, "password not matching!", 
                        "Password error", JOptionPane.ERROR_MESSAGE);
            }

     }
   } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T11:04:10.833

> *在数据库中添加“userdetail”作为元组*

就像是：

```
Connection con = DriverManager.getConnection(Url);
PreparedStatement stmt = con.prepareStatement("insert into user_details (fname, lname, username, pwd) values (?,?,?,?));
stmt.setString(1, fnamevalue);
stmt.setString(2, lnamevalue);
stmt.setString(3, username);
stmt.setString(4, new String (pwdvalue));
stmt.executeUpdate(); 
```

您的代码还有另一个问题：

```
if (pwdvalue == pwdrptvalue) 
```

你**不能**像那样比较对象。您需要将这些 char[] 转换为字符串并用于`equals()`比较它们。搜索“java string equals”以找出原因。这是非常基本的 Java 知识（并且在我看过的每个教程中都有介绍）

这假设您有一个以、和`user_details`列命名的表。如果您的表定义不同，则需要调整插入语句。`fname``lname``username``pwd`

> *另外，我如何捕获和存储从组合框中选择的性别（男、女）等详细信息？*

我建议您为此提出第二个问题。您不应该在一个问题中混合完全不同的主题（JDBC/SQL 与普通 Swing）。

# wpf - 在 MenuItem 子项上触发 - XaML

> ID：10947568
> 
> 赞同：2
> 
> 时间：2012-06-08T11:00:18.143
> 
> 标签：wpf, xaml, menuitem

我做了与 WPF 编程的官方文档中显示的几乎相同的事情。`

```
 <MenuItem.Triggers>
                        <EventTrigger RoutedEvent="MenuItem.Click">
                            <EventTrigger.Actions>
                            <PauseStoryboard BeginStoryboardName="BsB" />
                            </EventTrigger.Actions>
                        </EventTrigger>
                    </MenuItem.Triggers>
                </MenuItem>` 
```

问题是，为了使其仅在 XaML 下工作，不涉及 C#... 有没有人知道为什么这不起作用？

我也尝试过独立完成：

```
 <EventTrigger RoutedEvent="MenuItem.Click">
                <PauseStoryboard BeginStoryboardName="BsB"/>

            </EventTrigger> 
```

但我只是不知道如何准确引用 MenuItem 的特定子项。如果这是一个转贴，我很抱歉，但到目前为止我发现的所有内容都没有帮助，而且 MSDN 网站也没有准确显示如何做到这一点。

谢谢

# android - OpenGL ES - android - 带有两个三角形的正方形 - 线性渐变？

> ID：10947575
> 
> 赞同：1
> 
> 时间：2012-06-08T11:01:04.470
> 
> 标签：android, opengl-es, alphablending

我有一个由两个三角形组成的正方形。左上角应该是红色，右下角应该是蓝色。现在我想要一个从左上角到右下角的线性渐变。

我不想要右上角和左下角的颜色。我试图给 alpha 0，但这不起作用。我看到黑色。

```
 float vertices[] = 
    {
        -1.0f, -1.0f,
         1.0f, -1.0f,
        -1.0f,  1.0f,
         1.0f,  1.0f
    }; 

    byte maxColor=(byte)255;

    byte colors[] = 
    {
        maxColor,       0,       0, maxColor,
        0,              0,       0,        0,
        0,              0,maxColor, maxColor,
        0,              0,       0,        0
    }; 

    byte indices[] = 
    {
        0, 3, 1,
        0, 2, 3
    }; 
```

有谁知道如何做到这一点？

编辑：

我现在以不同的方式解决了它。我用从上到下的渐变填充正方形。然后我将正方形旋转 45 度并将其放大一点。

感谢您的回答。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T11:21:53.010

好吧，如果您想在四边形上获得线性渐变，而另外两个边缘会自动从插值中获取颜色，那么不要弄乱 alpha，它（通常）仅用于透明效果。

不幸的是，您不能只为某些顶点指定颜色并为其他顶点获得自动插值。光栅化器不仅神奇地使用线性渐变，还使用来自其他基元的信息。它只是在图元中插入图元（单个三角形）顶点的颜色。所以你需要给你的其他顶点一些颜色。

但在你的情况下，这很容易。您的顶点实际上都在“渐变”的中间，因此您可以自己进行插值并为它们提供正确的颜色，在您的情况下`(128, 0, 128)`（+-1，但谁在乎）：

```
byte colors[] = 
{
    255,   0,   0, 255, 
    128,   0,   0, 255, 
      0,   0, 255, 255, 
    128,   0, 128, 255
}; 
```

光栅化器在各个三角形上独立插值的事实可能会引入一些偏离纯梯度的插值伪影（尽管在您的情况下可能不会）。在这种情况下，如果四边形的对角线（两个三角形之间的边界）沿着渐变或穿过渐变，可能会有所不同。

# c++ - Windows 7 上 Win32 应用程序任务栏中的错误放大图标

> ID：10947578
> 
> 赞同：0
> 
> 时间：2012-06-08T11:01:15.437
> 
> 标签：c++, winapi

我有一个 UI C++ Win32/WTL 应用程序。我有一个包含许多嵌入式尺寸的应用程序图标，包括 16x16、32x32、48x48 和 64x64。我`SetIcon()`为小图标和大图标都做了一个，但我的 Windows 7 任务栏显示了一个模糊的放大图标。

是否有需要调用的特殊 API 或一些特殊注意事项？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T08:34:29.310

任务栏中显示的图标不是您使用 SetIcon() 设置的图标，而是资源管理器还为 exe 文件本身显示的图标。这意味着它会在您的 exe 资源中显示第一个图标。将图标的资源 ID 更改为例如 1，使其成为第一个图标，或者为您的 exe 当前使用的第一个图标添加其他大小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T11:34:26.557

图标是否按顺序排列？我有信息，Windows 直接使用图标。尝试将图标 64x64 放在数组的第一位。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T11:42:17.767

不寻常的 DPI / 字体大小设置？我见过 XP 要求一个 20x20 的图标。

# asp.net-mvc - 如何以 x-www-form-urlencoded 格式对模型进行编码，以便它可以被 ASP.NET MVC 操作使用？

> ID：10947579
> 
> 赞同：2
> 
> 时间：2012-06-08T11:01:17.870
> 
> 标签：asp.net-mvc, c#-4.0

假设我有一个看起来像这样的 ASP.NET MVC 3 控制器

```
public class MyController : Contoller
{
    public ActionResult Edit(MyModel model)
    {
        /* doing some stuff with the model */
    }
} 
```

模型看起来像这样

```
public class MyModel
{
    public string Property1 { get; set; }
    public string Property2 { get; set; }
    public ThatModel Property1 { get; set; }
    public List<ThisModel> BunchOfThisModel { get; set; }
}

public class ThatModel
{
    public string Property1 { get; set; }
    public string Property2 { get; set; }
    public string Property3 { get; set; }
    public string Property4 { get; set; }
    public string Property5 { get; set; }
    public string Property6 { get; set; }
}

public class ThisModel
{
    public string Property1 { get; set; }
    public string Property2 { get; set; }
} 
```

ASP.NET MVC 或 .NET（v4 可以，v4.5 不行）是否提供任何内置方法来编码模型（在这种情况下是 MyModel），以便可以将它作为表单 url 编码（又名x-www-form-urlencoded）？例如“property1=abc&property2=def”。但是，在将请求解码回模型时，ASP.NET MVC 有自己的方式来处理嵌套模型等。假设我正在使用自 .NET 1.1 以来提供的[WebRequest](http://msdn.microsoft.com/en-us/library/debx8sh9.aspx) / [WebResponse API 模拟浏览器。](http://msdn.microsoft.com/en-us/library/456dfw4f.aspx)

本质上，我想在测试中建立请求来验证

1.  如果需要，通过绑定排除某些数据
2.  如果需要，设置防伪令牌
3.  恶意数据会得到相应处理

注意：现阶段未使用 ASP.NET Web API。因为我正在为现有应用程序编写（集成）测试，所以将模型作为 JSON、XML 或其他替代格式发送不适用于该问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T11:47:04.880

我希望我已经正确理解了这个问题，但是如果您正在“发布”该数据（来自 JSON？），那么它就能够使用最佳猜测过程来构建模型。

属性名称是匹配的，所以如果你发送（这里猜测重复的Property1实际上是Property3）

```
{
  Property1="this", 
  Property2="that", 
  Property3={Property1="this3", ....}, 
  BunchOfThisModel=[{Property1="bunchthis"},{....}]
} 
```

这将使用匹配的任何名称填充您的 POCO。如果您遗漏了一个属性（即 Property2），它将具有它的`default(T)`价值。

在 GET 请求中发送对象模型会复杂得多，您可以对 JSON 字符串进行 base64 处理，然后在服务器上解析它，这是一种流行的方法，但鉴于它是一个复杂的模型，POST 可能最适合您的意图。

您还可以使用 CustomBinder（[这里有一篇好文章](http://www.dotnetcurry.com/ShowArticle.aspx?ID=584)）。您还可以通过使用`BindAttribute`Exclude/Include 选项来控制哪些属性绑定到您的 POCO 对象。

希望我没有错过重点，这被证明是有用的:)

# android - 安卓按钮布局

> ID：10947582
> 
> 赞同：0
> 
> 时间：2012-06-08T11:01:33.510
> 
> 标签：android, android-layout

我最近将我的按钮编码为与屏幕右侧对齐，它似乎不想工作。我还检查了我的父布局是否设置为覆盖屏幕的整个宽度，并且确实如此。

```
 public void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);

    //Vertical Layout - For the layout of the newSheetLayout.
    newSheetLayoutV = new LinearLayout(this);
    newSheetLayoutV.setOrientation(LinearLayout.VERTICAL);

    //Horizontal layout - nested in Vertical layout. Used for the next, back and save buttons.
    newSheetButtonLayoutH = new LinearLayout(this);
    newSheetButtonLayoutH.setOrientation(LinearLayout.HORIZONTAL);

  //Vertical Layout - For the layout of the newSheetLayout.
    dataShowV = new LinearLayout(this);
    dataShowV.setOrientation(LinearLayout.VERTICAL);

    //Horizontal layout - nested in the dataShow V. Used for the data entry objects.
    dataShowH = new LinearLayout(this);
    dataShowH.setOrientation(LinearLayout.HORIZONTAL);

    //Next button.
    nextButton = new Button(this);
    nextButton.setText("NEXT >");
    nextButton.setOnClickListener(nextListener);

    //Back button.
    backButton = new Button(this);
    backButton.setText("< BACK");
    backButton.setOnClickListener(backListener);
    backButton.setEnabled(false);

    //Save button.
    saveButton = new Button(this);
    saveButton.setText("Save");
    saveButton.setOnClickListener(saveListener);
    saveButton.setEnabled(false);

    //Addition of the buttons to the button view in order that needs to be seen.
    newSheetButtonLayoutH.addView(backButton);
    newSheetButtonLayoutH.addView(nextButton);
    newSheetButtonLayoutH.addView(saveButton);

    //Layout Param's for the buttons.
    LinearLayout.LayoutParams params = new LinearLayout.LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.WRAP_CONTENT);
    newSheetButtonLayoutH.setLayoutParams(params); 

    //Set save to anchor right.
    LinearLayout.LayoutParams saveButtonParam = new LinearLayout.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
    saveButtonParam.gravity = Gravity.RIGHT;
    saveButton.setLayoutParams(saveButtonParam);

    //Add all the layout Views to the main layout view.
    newSheetLayoutV.addView(dataShowV);
    newSheetLayoutV.addView(newSheetButtonLayoutH);
    newSheetLayoutV.setGravity(Gravity.BOTTOM);

    setContentView(newSheetLayoutV);
} 
```

如果这是简单的事情并且我对解决方案非常盲目，我会相应地惩罚自己。

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T11:06:30.333

尝试设置`layout_gravity`of`LinearLayout`而不是你的`Button`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T11:06:38.597

尝试

```
saveButton.setLayoutParams(new LinearLayout.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT,Gravity.RIGHT); 
```

如果您正在使用 xml 并且您不需要以动态方式进行操作，那么请执行

```
android:layout_gravity="right" 
```

编辑：我认为这就是你想要的

![在此处输入图像描述](../Images/2ecd22e9a1ab27c874e8c00636400b67.png)

```
LinearLayout newSheetLayoutV,dataShowV,dataShowH,newSheetButtonLayoutH,newlayout;
    Button nextButton,backButton,saveButton;
    //RelativeLayout ;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        newSheetLayoutV = new LinearLayout(this);
        newSheetLayoutV.setOrientation(LinearLayout.VERTICAL);

        //Horizontal layout - nested in Vertical layout. Used for the next, back and save buttons.
        newSheetButtonLayoutH = new LinearLayout(this);
        newSheetButtonLayoutH.setOrientation(LinearLayout.HORIZONTAL);
        newlayout = new LinearLayout(this);
        newlayout.setOrientation(LinearLayout.VERTICAL);
        newlayout.setGravity(Gravity.RIGHT);
        newlayout.setLayoutParams(new LinearLayout.LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.WRAP_CONTENT));
        //newSheetButtonLayoutH = new RelativeLayout(this);

      //Vertical Layout - For the layout of the newSheetLayout.
        dataShowV = new LinearLayout(this);
        dataShowV.setOrientation(LinearLayout.VERTICAL);

        //Horizontal layout - nested in the dataShow V. Used for the data entry objects.
        dataShowH = new LinearLayout(this);
        dataShowH.setOrientation(LinearLayout.HORIZONTAL);

        //Next button.
        nextButton = new Button(this);
        nextButton.setText("NEXT >");
        //nextButton.setOnClickListener(nextListener);

        //Back button.
        backButton = new Button(this);
        backButton.setText("< BACK");
        //backButton.setOnClickListener(backListener);
        backButton.setEnabled(false);

        //Save button.
        saveButton = new Button(this);
        saveButton.setText("Save");
        //saveButton.setOnClickListener(saveListener);
        saveButton.setEnabled(false);
        LinearLayout.LayoutParams saveButtonParam = new LinearLayout.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
        //saveButtonParam.gravity = Gravity.RIGHT;
        saveButton.setLayoutParams(saveButtonParam);
        //Addition of the buttons to the button view in order that needs to be seen.

        newSheetButtonLayoutH.addView(backButton);

        newSheetButtonLayoutH.addView(nextButton);
        newlayout.addView(saveButton);
        newSheetButtonLayoutH.addView(newlayout);

        //Layout Param's for the buttons.
        LinearLayout.LayoutParams params = new LinearLayout.LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.WRAP_CONTENT);
        newSheetButtonLayoutH.setLayoutParams(params); 

        //Set save to anchor right.

        //Add all the layout Views to the main layout view.
        newSheetLayoutV.addView(dataShowV);
        newSheetLayoutV.addView(newSheetButtonLayoutH);
        newSheetLayoutV.setGravity(Gravity.BOTTOM);

        setContentView(newSheetLayoutV);

    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T12:45:59.890

尝试提供 RelativeLayout 参数

```
 RelativeLayout.LayoutParams rel_lp = new RelativeLayout.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
    rel_lp.addRule(RelativeLayout.ALIGN_RIGHT);
    rel_lp.addRule(RelativeLayout.ALIGN_PARENT_RIGHT);      
    btn.setLayoutParams(rel_lp); 
```

# java - 带有接口实现的@Override 注释错误

> ID：10947584
> 
> 赞同：9
> 
> 时间：2012-06-08T11:01:35.967
> 
> 标签：java, eclipse, annotations

**我正在使用 JRE 1.6 版本并且在使用`@Override`接口时意识到 JRE 1.5 的问题。**

我导入了一个新项目（Spring + Maven）和 Eclipse，`@Override`每当任何接口方法被覆盖时，每个注释都会出错。

到目前为止我尝试过的事情

1.  检查项目和工作区特定的 JRE 和合规级别，它设置为 1.6 版本。
    ![在此处输入图像描述](../Images/2b01c1510ef8898e1f9688a0da7b07b6.png)
2.  检查构建路径上的 JRE 库，它也是一样的。
3.  将项目方面的 Java 版本更改为 1.6（不知道是否有帮助）
    ![在此处输入图像描述](../Images/1100eeb10a87e661c0969d43a366a1ab.png)
4.  Maven 是否清理并安装（至今已安装了数百次）
5.  注释的禁用错误/警告仍然没有运气![在此处输入图像描述](../Images/297f627e5290f6cdce36cda192532e13.png)
6.  Eclipse 重启（愚蠢的事情，但帮了我很多时间）
7.  如果我没有其他尝试，最后一个选项将删除所有 .setting 和 .project 文件。

* * *

**编辑1：**
我收到以下错误

```
The method XXX of type XXX must override a superclass method. 
```

* * *

**编辑 2：**
代码示例
接口声明

```
public interface HelperService {   
    public RequisitionTypeDTO getRequisitionTypeDTO(int id) throws Exception;  
} 
```

执行：

```
 @Service
   public class HelperServiceImpl implements HelperService{   
   @Override  // Getting error for this line
   public RequisitionTypeDTO getRequisitionTypeDTO(int id) throws Exception{
                         // Bla Bla Bla 
      }  
   } 
```

* * *

**编辑 3：**
无论此错误如何，我都能成功构建和运行我的应用程序。只是对源代码中的红色错误标志不满意。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-08T12:06:40.787

检查`RequisitionTypeDTO`in 接口是否与实现中的类型相同`RequisitionTypeDTO`（不同的导入）。

如果可以，请尝试添加`maven-compiler-plugin`

```
<build>
    <plugins>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-compiler-plugin</artifactId>
            <version>2.5.1</version>
            <configuration>
                <source>1.6</source>
                <target>1.6</target>
            </configuration>
        </plugin>
    </plugins>
</build> 
```

和`Maven`->`Update project configuration...`从项目的上下文菜单中 - 因为这是你应该设置编译 jre 的方式。

当然`mvn clean`，在 Eclipse中尝试`Project`->`Clean...`

如果一切都失败了，用最少的代码创建一个新的简单项目，并检查是否有同样的错误。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-22T15:04:10.533

我也得到了这个，而且我*确实*有一套“Java Builder”。进一步调查表明问题在于我的“编译器合规级别”设置为 1.5 而不是 1.6。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-08T12:19:21.997

实现没有为当前项目选择生成器。选择`Java Builder`和繁荣。代码中不再有危险信号。

![在此处输入图像描述](../Images/631eac5bbb6367d3d07c6da8f2c86ec7.png)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-12-11T01:46:47.700

我遇到了类似的问题（这是使用完美运行的代码）。

几分钟前，我不再看到同一个包中的类（[Eclipse 中的 Maven java 项目没有看到同一个包中的类](https://stackoverflow.com/questions/10618017/maven-java-project-in-eclipse-doesnt-see-classes-in-same-package)），并通过执行 Maven -> 更新项目“修复”了该错误。

这将我的编译器级别更改为 1.5 并导致了一个新问题，即这个主题

（通过显式更改我的编译器级别来修复）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-07-31T14:58:39.893

我有同样的错误。对我来说，问题是没有在属性-> 项目方面选择“Java”即使我正确设置了我的 jre 和编译器级别，我仍然遇到了问题。

# oauth - oAuth 2.0 的弱点 - 有哪些替代方案？

> ID：10947586
> 
> 赞同：4
> 
> 时间：2012-06-08T11:01:42.580
> 
> 标签：oauth, acs

我正在开发一个使用 ASP.NET web api 框架构建的 api 的移动应用程序。我们决定使用 ACS 和 custm STS 作为保护 api 的机制。我们正在使用自定义 STS，因为我们需要根据我们自己的身份存储对用户进行身份验证。

信息流如下：

1.  移动应用程序使用用户凭据调用自定义 STS。
2.  用户根据我们自己的身份存储进行身份验证。
3.  一旦用户通过身份验证，就会从 ACS 检索授权代码并用于检索 SWT 访问令牌。
4.  令牌返回到移动应用程序。
5.  移动应用程序在授权标头中嵌入访问令牌并向 API 发出请求
6.  API 中的 HTTP 模块验证访问令牌，如果令牌有效，则返回数据。

当我们使用 oAuth 2.0 时，一切都通过 SSL 完成。

oAUth 2.0 的问题在于它面临中间人攻击的风险，因为 ACS 发布的 SWT 令牌是原始令牌并且没有以任何方式加密。但是，它是使用 256 位对称密钥签名的。

我们使用 swt 令牌是因为我们使用的是基于 http 的方法，并且令牌非常适合 http 请求的 auth 标头。

Microsoft 在以下帖子中提供了一些 ACS 安全指南：http: [//msdn.microsoft.com/en-us/library/windowsazure/gg185962.aspx](http://msdn.microsoft.com/en-us/library/windowsazure/gg185962.aspx)

我们目前在检查发行者和受众时实施其中的 2 个，即令牌是由我们的受信任发行者 (ACS) 发行的，并且令牌是为正确的受众（我们的 api）发行的。

我们的方案基于以下文章： http: [//msdn.microsoft.com/en-us/library/hh446531.aspx](http://msdn.microsoft.com/en-us/library/hh446531.aspx) ，因为此类 WIF 不用于处理传入令牌。WIF 仅用于索赔处理。

鉴于上述情况，我们还可以做些什么来改进我们必须保护基于休息的 API 的实现？

欢迎任何和所有评论/批评/建议。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T05:26:26.753

我认为您已经采取了正确的方法。最重要的是验证令牌是否由 ACS 签名。切勿与其他任何人共享您的 ACS 密钥。如果他们不知道密钥，他们就无法伪造签名。

也不要在令牌中存储机密信息（如密码、信用卡号等）。您应该期望令牌可能由其他人获得，但没有人可以伪造具有正确签名的令牌。

# towerjs - Towerjs 模型查找器 - 变量范围

> ID：10947590
> 
> 赞同：0
> 
> 时间：2012-06-08T11:02:00.920
> 
> 标签：towerjs

我想查询模型，然后根据结果做其他事情

问题：

```
 exists = false
  App.User.where(email: "example@domain.com").exists (error, exists) =>      
    console.log exists #=> true
  console.log exists #=> false 
```

示例为什么我想要这个：

```
class App.User extends Tower.Model
  newUser: ->
    exists = false
    App.User.where(email: "some@email.com").exists (error, exists) =>   

    unless exists                 # here is always: exists = false
      @.create
        email: "some@email.com"   # so user is created 
```

我也尝试过这样的事情：

```
class App.User extends Tower.Model
  newUser: ->
    @.where(email: "some@email.com").exists (error, exists) =>
      unless exists                         # statement works 
        @.create                            # but I can't create an user
          email: "some@email.com"  

        App.User.create                     # also doesn't work
          email: "some@email.com"  

        user = new App.User                 # this also fails
        user.set "email", "some@email.com"
        user.save() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T17:24:20.280

对数据库的查询是异步的，这意味着您需要在数据返回后运行的任何代码都必须在回调中。因此，在您的第一个示例中，这`unless exists`实际上将在数据库查询完成之前运行。我认为如果你将它和它后面的代码缩进两个空格，这会将它放在回调中，它会按预期运行。尝试：

```
class App.User extends Tower.Model
  newUser: ->
    exists = false
    App.User.where(email: "some@email.com").exists (error, exists) =>   

      unless exists                 
        @.create
          email: "some@email.com" 
```

如果唯一性验证工作正常，您只需在模型上放置唯一性验证即可更轻松地获得相同的结果。所以在你的模型中你会有类似的东西：

```
class App.User extends Tower.Model
  @field "email", type: "String"
  @field "firstName", type: "String"
  @field "lastName", type: "String"

  @hasMany "posts"

  @validates 'email', uniqueness: true

  @timestamps() 
```

不幸的是，根据最近的一些实验，有一个小错误会`uniqueness`导致它失败。我在 Tower 的问题列表中发布了这个错误，我自己也在研究它，所以希望它很快就会正常工作。

希望这可以帮助。

编辑：我想我会提到，我不完全确定为什么第二个示例会失败，因为它看起来很像我的建议，除非我错了或上下文（@ 的值）由于使用 @ in 而发生变化数据库查询而不是 App.User。

# python - 如何在我的身材上设置 x_lim 和 y_lim？[Python 2.7 matplotlib]

> ID：10947593
> 
> 赞同：0
> 
> 时间：2012-06-08T11:02:16.717
> 
> 标签：python, matplotlib

我在绘制图形时遇到了一些麻烦。我有一个文件，其中包含一些由我用 c++ 编写的应用程序计算的结果，我想为计算数据绘制图形。

问题是我不知道 X 轴和 Y 轴上的“最大”和“最小”限制......

我试过：

```
# -*- coding: utf-8 -*-
#!/usr/bin/env python

import matplotlib
matplotlib.use("Agg")
import matplotlib.pyplot as plt

def plot_it(ox, oy, x_label, y_label, filename) :

    fig = plt.figure()
    axis = fig.add_subplot(111)
    plt.xlabel(x_label)
    plt.ylabel(y_label)
    plt.ylim(min(oy),max(oy))
    plt.xlim(min(ox),max(ox))
    axis.plot(ox, oy, color = 'red')
    plt.savefig(filename)
    plt.clf()
    plt.close()

filename = input("Filename (file with data)\n>")
res = []
try :
    with open(filename, 'r') as file :
        for line in file :
            line = line.rstrip('\n')
            res.append(line.split(" "))
except IOError :
    print("IO error")

if len(res) != 0 :

    ox = []
    oy = []

    x_label = str(input("OX label\n>"))
    y_label = str(input("OY label\n>"))

    for i in range(0,len(res)) :
        ox.append(res[i][0])
        oy.append(res[i][1])

    plot_it(ox, oy, x_label, y_label, 'fig_' + str(filename[:len(filename)-4]) + '.png') 
```

我的文件在这里： http: [//pastie.org/private/4rl64ule9ymljmp6g5bfzg](http://pastie.org/private/4rl64ule9ymljmp6g5bfzg)（只需复制并保存为file.txt）

我得到了这些错误：

> 回溯（最后一次调用）：文件“E:/plotter.py”，第 43 行，在 plot_it(ox, oy, x_label, y_label, 'fig_' + str(filename[:len(filename)-4]) + '.png') 文件“E:/plotter.py”，第 14 行，在 plot_it plt.ylim(min(oy),max(oy)) 文件“C:\Python27\lib\site-packages\matplotlib\pyplot .py”，第 1252 行，在 ylim ret = ax.set_ylim(*args, **kwargs) 文件“C:\Python27\lib\site-packages\matplotlib\axes.py”，第 2642 行，在 set_ylim 底部，顶部= mtransforms.nonsingular(bottom, top, increase=False) 文件“C:\Python27\lib\site-packages\matplotlib\transforms.py”，第 2282 行，非单数 if (not np.isfinite(vmin)) 或 ( not np.isfinite(vmax)): NotImplementedError: 未为此类型实现

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T11:08:47.990

添加：

```
plt.ylim(min(oy),max(oy))
plt.xlim(min(ox),max(ox)) 
```

对于您提供的第二个代码块，这会将您的 x 和限制设置为数据的最小值/最大值。

# ios - 在加载视图之前从 iCloud 加载文档

> ID：10947606
> 
> 赞同：0
> 
> 时间：2012-06-08T11:03:31.077
> 
> 标签：ios, multithreading, icloud, uidocument

我在 iCloud 上有图像，我为它们子类化了 UIDocument。现在我想在加载 ViewController 后在 UITableView 上显示图像。所以我在`viewDidLoad`方法中添加了这段代码

```
- (void)viewDidLoad    
    {
        ...
              iCloudImage *iClImage = [[iCloudImage alloc] initWithFileURL:ubiquitousPackage];
              [iClImage openWithCompletionHandler:^(BOOL success) {
                if (success) {                
                    NSLog(@"iCloud document opened");
                    dataFromFileManager = [iClImage.imageDictionary objectForKey:img.fileName];
                    imageToDraw = [[[UIImage alloc] initWithData:dataFromFileManager] autorelease];
                } else {                
                    NSLog(@"failed opening document from iCloud");    
                    imageToDraw = [UIImage imageNamed:@"defaultImage.jpg"];
                }
                [arrayOfImages addObject:imageToDraw];
            }];
        ...
    } 
```

在这里，我将所有图像一张一张地收集到`NSMutableArray *arrayOfImages`，然后在`- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath`方法中使用该数组。但是它们没有显示在表格中，因为它们正在另一个线程中下载。如何解决这个问题并仅在下载图像或设置默认图像后才开始显示 UITableView？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T11:07:40.203

我最近遇到了同样的问题。我没有等到图像下载完毕才加载视图，而是在桌子上显示了一个进度指示器。然后，当图像确实加载时，我向视图发送了一个 NSNotification，通知它删除进度指示器并加载数据。

这样，您可以保持 UI 响应，并向用户显示实际正在加载的内容。如果您需要我提供更多技术细节，请告诉我。

# sql - 如何更新 postgresql 中的 xml 数据类型列

> ID：10947608
> 
> 赞同：3
> 
> 时间：2012-06-08T11:03:47.120
> 
> 标签：sql, xml, postgresql

PostgreSQL 版本 9.1，

我有一张桌子，

```
xmltest=# \d xmltest
    Table "public.xmltest"
 Column  |  Type   | Modifiers 
---------+---------+-----------
 id      | integer | not null
 xmldata | xml     | 
Indexes:
    "xmltest_pkey" PRIMARY KEY, btree (id)

xmltest=# select * from xmltest;
 id |                xmldata                
----+---------------------------------------
  1 | <root>                               +
    | <child1>somedata for child1 </child1>+
    | <child2>somedata for child2 </child2>+
    | </root> 
(1 row) 
```

现在如何更新元素/标签 child2 中的值，

我不喜欢一次更新整个专栏，

他们是一种更新/添加/删除特定标签值的方法，如果是，请分享:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T21:36:30.333

[PostgreSQL XML 函数](http://www.postgresql.org/docs/current/interactive/functions-xml.html)的目标是*生成*和*处理*XML，恐怕不是操纵它。

您可以[使用 提取值`xpath()`](https://stackoverflow.com/a/7628453/939860)，有许多[构建 XML 的函数](http://www.postgresql.org/docs/current/interactive/functions-xml.html#FUNCTIONS-PRODUCING-XML)，但我不知道*更新*给定 XML 值中元素的内置功能。

# linux-kernel - 内核中 ping 的来源

> ID：10947612
> 
> 赞同：1
> 
> 时间：2012-06-08T11:04:05.963
> 
> 标签：linux-kernel, ping

我正在学习原始套接字。我听说 ping 实用程序正在使用原始套接字。所以我想研究它的来源。那么有人可以帮我找到 linux-2.6 内核代码中 ping 实用程序的源代码在哪里。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-08T11:08:48.773

它不是内核的一部分。它是[iputils 包](http://www.skbuff.net/iputils/)的一部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-09T08:13:47.730

如前所述，它包含在`iputils`, 但也包含在`inetutils`. 因此，您可以运行以下任一程序（假设是 Debian/Ubuntu Linux）来查看源代码：

`apt-get source iputils`

`apt-get source inetutils`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-08T11:09:10.473

它不在内核中。ping 是“iputils”的一部分。找到一个 iputils 源包并从那里查看。

# c++ - 什么是 DllMain 中挂钩回调函数的入口代码

> ID：10947613
> 
> 赞同：-1
> 
> 时间：2012-06-08T11:04:07.277
> 
> 标签：c++, c, winapi, dll, hook

设置线程特定挂钩时，DLL 中的原因代码是什么？
谁能帮我解决这个问题？

谢谢，阿希什。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T11:17:01.003

您的问题仍然不清楚，但我假设您的意思是使用`SetWindowsHookEx()`安装系统范围的挂钩，因此将您的 dll 注入所有应用程序的地址空间。

原因码将是`DLL_PROCESS_ATTACH`，因为您正在附加到一个进程。

# python - 如何在Django中将数字转换为逗号分隔的字符串

> ID：10947617
> 
> 赞同：2
> 
> 时间：2012-06-08T11:04:16.620
> 
> 标签：python, django

我想将价格转换为给定国家/地区的标准逗号分隔字符串。例如，如果我们为印度执行此操作，则 100000 应转换为 10,00,000，但对于美国，则应转换为 1,000,000。

我在 python 中看到了语言环境库。可以使用它来完成。

例如：

```
>> import locale
>> locale.setlocale(locale.LC_ALL, 'en_US.utf8')
>> locale.format("%.2f", 100028282.23, grouping=True) 
```

有用。

但我只想知道我们是否可以在 Django 中使用本地化来做到这一点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-08T11:33:33.737

是的，本地化可以做到这一点。另请查看[THOUSAND_SEPARATOR](https://docs.djangoproject.com/en/1.4/ref/settings/#thousand-separator)、[NUMBER_GROUPING](https://docs.djangoproject.com/en/1.4/ref/settings/#std%3asetting-NUMBER_GROUPING)、[DECIMAL_SEPARATOR](https://docs.djangoproject.com/en/1.4/ref/settings/#std%3asetting-DECIMAL_SEPARATOR)和[USE_THOUSAND_SEPARATOR](https://docs.djangoproject.com/en/1.4/ref/settings/#std%3asetting-USE_THOUSAND_SEPARATOR)设置。

# html - ipad css 转换导致字体问题

> ID：10947618
> 
> 赞同：4
> 
> 时间：2012-06-08T11:04:26.090
> 
> 标签：html, css, ipad-2, css-transforms

我正在 iPad 上进行 HTML/CSS/Javascript 开发。我正在使用 css 转换来翻译画廊元素（ul 中的 li 元素）。li 包含文本。这一切在桌面上都可以很好地制作动画，但在 iPad 2 设备上，动画阶段会使字体不那么亮，当动画完成后，字体会恢复正常。差异非常明显，几乎就像从常规字体变为粗体并返回一样。如前所述，这一切在桌面 safari 上都很好，只发生在 iPad 移动 safari 上。

有人有同样的问题吗？

.pom。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T11:11:44.110

我已经看到了这种和其他稍微奇怪的行为，这些行为归结为 3d 转换的硬件加速，但我还没有找到一个标准的“修复”。为了更好地理解问题，请查看此处的提示：

[http://davidwalsh.name/translate3d](http://davidwalsh.name/translate3d)

和这里：-

[如何在 Safari 中的 WebKit 3D 转换后强制重新渲染](https://stackoverflow.com/questions/4641522/how-to-force-re-render-after-a-webkit-3d-transform-in-safari)

# security - 带有 REST 的基于角色的 Web UI

> ID：10947619
> 
> 赞同：4
> 
> 时间：2012-06-08T11:04:27.317
> 
> 标签：security, rest, roles

我们为新的基于 Web 的应用程序选择了基于 REST 的架构。整个平台以 RESTful 服务的形式公开，因此任何 UI（WEB/Mobile）都可以在这些之上构建。因此，应用程序分为 3 层，即数据库、应用程序层——这只是公开 RESTful 服务和 UI——目前是基于 HTML5/CSS/Javascript 的使用 Web 服务的 UI。

此应用程序还具有基于角色的访问权限，因此必须根据角色设计 UI。Web 服务在服务响应中返回一组权限，然后在 Javascript 中使用它来构建 UI，这是一个好主意吗？

角色的 UI 变化如下：
主菜单可能会根据角色而变化
必须根据角色控制选项卡
应用程序中的大多数页面都是基于小部件的，小部件的显示再次标记为角色

再一次，我想知道这是否是一个正确的想法。请建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T12:02:29.557

要遵循 HATEOAS（作为应用程序状态引擎的超媒体）约束，您应该让 REST 服务本身提供对“应用程序状态”有效的状态转换（即链接），其中*包括*有关导航、选项卡的任何特定逻辑等根据用户的角色可用。

因此，您的资源应该以这样一种方式设计，即它们可以返回特定于您的登录用户的结果。

例如（使用[HAL](http://stateless.co/hal_specification.html)作为超媒体类型）

```
GET /users/123/navigation

{
  "_links": {
    "http://api.service.com/rels/home": { "href"="/" "title"="Home" },
    "http://api.service.com/rels/admin": { "href"="/admin" "title"="Admin" }
   }
} 
```

这样做将“什么角色可以做什么”的业务逻辑保留在*服务*中，这才是真正属于该逻辑的地方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T11:44:45.290

为此，您需要将所有菜单选项、小部件和页面名称存储在数据库中，并在运行时加载菜单。（即您的第一个请求是从服务器发送角色和 getMnu）

您可以轻松创建基于角色的 Rest 架构，并为 Restful 服务提供安全性。

# c# - asp的新手。连接到数据库的问题。不确定正确的使用方法

> ID：10947621
> 
> 赞同：1
> 
> 时间：2012-06-08T11:04:29.617
> 
> 标签：c#, asp.net

过去一周左右，我一直在使用 asp 表单。大多数情况下，我已经习惯了 gridview 并使用 site.master 在每个页面上显示菜单并使用 web.config 中的连接字符串来访问我的 sql server 数据库。

但是我并没有发现 gridview 的所有功能，并且对这一切应该如何工作感到有些困惑。我来自 PHP，而 ASP 似乎是一个不同的世界。我想要做的是循环一个表并打印出记录，但我想使用我自己的循环而不是 gridview，所以我也可以有自定义列。所以我可以用不同的获取和类似的东西创建动态链接。在 PHP 中有语法连接到数据库，编写循环，然后通过回显或类似的方式打印其中的 html。

在 aspx 中，我使用 C# 作为我的语言，所以我明白我实际上是在 <% --code-- %> 之间编写 c# 代码以实现这一点

所以asp基本上是一种使用c#或VB编写脚本的能力

最后，我应该在 Page_load 后面的代码中还是在 aspx 文件的顶部编写数据库连接...

对新手问题感到抱歉，如果有人可以提供帮助，我将非常感谢您指出一个合适的教程以及解释所有这些。我发现我通常使用的 w3schools 东西非常令人困惑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T11:12:08.323

如果使用得当，网格视图可以非常强大，您可以做的一件事是挂钩一个事件（在数据行绑定上），这将允许您一次操作每一行。

ASP.NET 比 PHP 更受事件驱动，但是如果您仍想以 PHP 方式做事，理论上您可以循环遍历每个结果。

```
 using (
           var oConn =
               new SqlConnection(
                   ConfigurationManager.ConnectionStrings["myConnectionStringNameFromWebConfig"].ConnectionString)
           )
        {
            oConn.Open();
            using (SqlCommand oCmd = oConn.CreateCommand())
            {
                oCmd.CommandType = CommandType.StoredProcedure;
                oCmd.CommandText = "p_jl_GetThemeForPortal";
                oCmd.Parameters.Add(new SqlParameter("@gClientID", clientID));
            }

             using(var oDR = oCmd.ExecuteReader())
                {
                    while(oDR.Read())
                    {
                        string x = (string)oDR["ColumnName"];
                        int y = (int) oDR["ColumnName2"];
                        // Do something with the string and int
                    }
                }

        } 
```

这种模式（通过使用 using 语句）确保您的连接在每个提取序列结束时关闭，因此您没有大量打开的数据库连接

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T11:12:40.323

首先：在服务器端的 Page_load 或任何其他选择记录的方法中编写代码。对于从数据库中选择记录，您可以使用以下代码

```
string myConnectionString="server=dbserver;database=mydatabase;uid=user;pwd=password;Connect Timeout=120;pooling=true;Max Pool Size=60;";// you can place your connection string in web.config
SqlConnection con = new SqlConnection(myConnectionString);

SqlCommand cmd = con.CreateCommand();
cmd.CommandText = @"SELECT [stuff] FROM [tableOfStuff]";

con.Open();

SqlDataReader dr = null;
try
{
    dr = cmd.ExecuteReader();

    while(dr.Read())
    {
        // construct your html for your table data here
    }
}
catch(SomeTypeOfException ex){ /* handle exception */ } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T13:40:45.700

示例 aspx：

```
<asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="false">
    <Columns>
        <asp:BoundField DataField="CountryID" HeaderText="ID" ItemStyle-HorizontalAlign="Center" />
        <asp:TemplateField HeaderText="Flag" ItemStyle-HorizontalAlign="Center">
            <ItemTemplate>
                <img src='<%# "img/flags/" + Eval("CountryFlag").ToString()%>' alt="flag" />
            </ItemTemplate>
        </asp:TemplateField>
        <asp:BoundField DataField="CountryName" HeaderStyle-HorizontalAlign="Left" HeaderText="Name" ItemStyle-CssClass="dg_title"/>
        <asp:TemplateField HeaderText="VAT" ItemStyle-HorizontalAlign="Center">
            <ItemTemplate>
                <%# CheckBool(Convert.ToBoolean(Eval("CalculateVat"))) %>
            </ItemTemplate>
        </asp:TemplateField>  
        </Columns>
</asp:GridView> 
```

在后面的代码中`CheckBool`是我制作的一个函数：

```
public string CheckBool(bool toCheck)
{
    if (toCheck)
        return "<img src=\"img/checked.png\" alt=\"Yes\" />";
    else
        return "<img src=\"img/deleted.png\" alt=\"No\" />";
} 
```

并且在`Page_Load`

```
protected void Page_Load(object sender, EventArgs e)
{
    GridView1.DataSource = SsUtils.GetCountries();
    GridView1.DataBind();        
} 
```

`SsUtils`是一个静态类，`GetCountries`返回一个`List<Country>`是类国家的集合。但是您也可以使用`DataSet`or`DataTable`作为您的网格视图的数据源。

这只是一个示例，以显示一些可能性。您还可以使用网格视图来编辑按钮、分页、排序等。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-08T11:34:20.913

为了更好地控制渲染，您可以使用[ListView](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.listview)。例如，向下滚动到该页面的底部。

# iphone - 如何解析xml

> ID：10947628
> 
> 赞同：-6
> 
> 时间：2012-06-08T11:04:57.753
> 
> 标签：iphone

我想从以下链接获取距离文本。我使用了 NSXML 解析但无法得到结果。请告诉我应该使用哪种 xml 方法来跟踪 xml。

[http://maps.googleapis.com/maps/api/directions/xml?origin=30.9165904,75.8634752&destination=30.89314000,75.86938000&sensor=true](http://maps.googleapis.com/maps/api/directions/xml?origin=30.9165904,75.8634752&destination=30.89314000,75.86938000&sensor=true)

谢谢大家

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T11:13:55.227

最好的通常是使用 DOM，如下所示：

```
var dist_element = document.getElementsByTagName("distance").child[1]; 
```

问题是，如果你有几个元素的标签距离，你会得到一个数组。因此，您将需要遍历每个元素。

抱歉，我没有详细介绍所有细节，但具体实现取决于您选择的语言。您使用哪种语言？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T11:14:13.497

我认为使用 TouchXML 进行解析...下面的链接对此有答案

[使用 TouchXML 解析子节点](https://stackoverflow.com/questions/6432638/parsing-subnode-with-touchxml)

你也可以得到子节点，它的一个例子是波纹管......

```
NSArray *nodes3 = [doc nodesForXPath:@"//step" error:nil];
//        NSLog(@">>>>>>>>>>>> response node count :%d", [nodes3 count]);

        for (CXMLElement *node in nodes3) { 

            NSString *str;
            for(int counter = 0; counter < [node childCount]; counter++) {  
//                NSLog(@">>>>>>>>> child node name :%@", [[node childAtIndex:counter] name]);

                if ([[[node childAtIndex:counter] name] isEqualToString:@"distance"]) {                 
                    str = [[node childAtIndex:counter] stringValue];
//                    NSLog(@"error number :%@", str);
                }
//etc....

            }
        } 
```

希望，这对你有帮助.. :)

# search - Kentico CMS：显示在搜索结果页面上搜索的短语

> ID：10947630
> 
> 赞同：0
> 
> 时间：2012-06-08T11:05:16.447
> 
> 标签：search, content-management-system, kentico

在我的搜索结果页面上，我想显示用户搜索的短语。

例如，而不是使用标题**搜索结果：**如您在屏幕截图中看到的那样，我想使用标题**搜索结果来搜索简历：**

**是否可以提取搜索到的单词？**

目前，标题是硬编码在围绕搜索结果 Web 部件的 Web 部件容器中。

**当前搜索结果截图：** ![在此处输入图像描述](../Images/01d3ae95a162c56b731f2517ea689e25.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T11:31:20.867

我收到了 Kentico 关于如何执行此操作的回复。请参阅下面的解决方案。

> 您的**搜索结果：**文本可能填充在智能搜索 Web 部件的**容器标题** 属性中，因此请将其更改为以下内容：
> 
> **{?searchtext?} 的搜索结果：**

这完美！**{?searchtext?}**拉入搜索的单词。

# types - 在 Clojure 中表示 sum 类型（ab）的惯用方式

> ID：10947636
> 
> 赞同：23
> 
> 时间：2012-06-08T11:05:43.267
> 
> 标签：types, clojure, discriminated-union

*已编辑。我现在的问题是：在静态类型语言中，通常使用什么惯用的 Clojure 构造而不是 sum 类型？到目前为止的共识：如果行为可以统一，则使用协议，否则使用标记对/映射，在前置和后置条件中放置必要的断言。*

Clojure 提供了多种表示*产品类型*的方法：向量、映射、记录……，但是如何表示[*总和类型*](https://en.wikipedia.org/wiki/Sum_type)，也称为标记联合和变体记录？类似于`Either a b`Haskell 或`Either[+A, +B]`Scala 中的东西。

我想到的第一件事是带有特殊标签的地图：`{:tag :left :value a}`，但是所有代码都将被条件污染，`(:tag value)`如果不存在则处理特殊情况......我想确保的是那`:tag`总是存在的，它只能采用一个指定的值，并且对应的值始终具有相同的类型/行为并且不能是`nil`，并且有一种简单的方法可以看到我处理了代码中的所有情况。

~~我可以在 的行中想到一个宏`defrecord`，但对于 sum 类型：~~

 ~~```
; it creates a special record type and some helper functions
(defvariant Either
   left Foo
   right :bar)
; user.Either

(def x (left (Foo. "foo")))   ;; factory functions for every variant
; #user.Either{:variant :left :value #user.Foo{:name "foo"}}
(def y (right (Foo. "bar")))  ;; factory functions check types
; SomeException...
(def y (right ^{:type :bar} ()))
; #user.Either{:variant :right :value ()}

(variants x) ;; list of all possible options is intrinsic to the value
; [:left :right] 
```~~ 

~~这样的事情是否已经存在？~~（*回答：没有*）。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-06-08T14:40:49.347

> 您如何表示总和类型，也称为标记联合和变体记录？类似于`Either a b`Haskell 或 `Either[+A, +B]`Scala 中的东西。

`Either`有两个用途：返回两种类型之一的值，或者返回两个相同类型的值，它们应该基于标签具有不同的语义。

第一次使用仅在使用静态类型系统时才重要。 `Either`考虑到 Haskell 类型系统的约束，基本上是可能的最小解决方案。使用动态类型系统，您可以返回所需的任何类型的值。`Either`不需要。

第二种用途*很*重要，但可以通过两种（或更多）方式非常简单地完成：

1.  `{:tag :left :value 123} {:tag :right :value "hello"}`
2.  `{:left 123} {:right "hello"}`

> 我想确保的是， :tag 始终存在，并且它只能采用指定值之一，并且相应的值始终具有相同的类型/行为并且不能为 nil，并且有一种简单的方法可以看到我处理了代码中的所有情况。

如果您想以静态方式确保这一点，Clojure 可能不是您的语言。原因很简单：表达式直到运行时才具有类型——直到它们返回一个值。

宏不起作用的原因是在宏扩展时，您没有运行时值——因此没有运行时类型。您有符号、原子、s 表达式等编译时构造。您可以`eval`使用它们，但`eval`由于多种原因，使用被认为是不好的做法。

但是，我们可以在运行时做得很好。

*   我想确保的是 :tag 始终存在，
*   并且只能取指定值之一
*   并且相应的值始终具有相同的类型/行为
*   并且不能为零
*   并且有一种简单的方法可以看出我处理了代码中的所有情况。

我的策略是将所有通常是静态的（在 Haskell 中）转换为运行时。让我们写一些代码。

```
;; let us define a union "type" (static type to runtime value)
(def either-string-number {:left java.lang.String :right java.lang.Number})

;; a constructor for a given type
(defn mk-value-of-union [union-type tag value]  
  (assert (union-type tag)) ; tag is valid  
  (assert (instance? (union-type tag) value)) ; value is of correct type  
  (assert value)  
  {:tag tag :value value :union-type union-type}) 

;; "conditional" to ensure that all the cases are handled  
;; take a value and a map of tags to functions of one argument
;; if calls the function mapped to the appropriate tag
(defn union-case-fn [union-value tag-fn]
  ;; assert that we handle all cases
  (assert (= (set (keys tag-fn))
             (set (keys (:union-type union-value)))))
  ((tag-fn (:tag union-value)) (:value union-value)))

;; extra points for wrapping this in a macro

;; example
(def j (mk-value-of-union either-string-number :right 2))

(union-case-fn j {:left #(println "left: " %) :right #(println "right: " %)})
=> right: 2

(union-case-fn j {:left #(println "left: " %)})
=> AssertionError Assert failed: (= (set (keys tag-fn)) (set (keys (:union-type union-value)))) 
```

此代码使用以下惯用的 Clojure 构造：

*   数据驱动编程：创建代表“类型”的数据结构。这个值是不可变的和一流的，你可以使用整个语言来实现逻辑。这是我不相信 Haskell 能做到的事情：在运行时操作类型。
*   使用地图来表示值。
*   高阶编程：将 fns 的映射传递给另一个函数。

如果您使用`Either`多态性，您可以选择使用协议。否则，如果您对标签感兴趣，那么某种形式的东西`{:tag :left :value 123}`是最惯用的。你会经常看到这样的东西：

```
;; let's say we have a function that may generate an error or succeed
(defn somefunction []
  ...
  (if (some error condition)
    {:status :error :message "Really bad error occurred."}
    {:status :success :result [1 2 3]}))

;; then you can check the status
(let [r (somefunction)]
  (case (:status r)
    :error
    (println "Error: " (:message r))
    :success
    (do-something-else (:result r))
    ;; default
    (println "Don't know what to do!"))) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-08T13:10:02.600

一般来说，动态类型语言中的 sum 类型表示为：

*   标记对（例如，带有代表构造函数的标记的产品类型）
*   在运行时对标签进行案例分析以进行调度

在静态类型语言中，大多数值都通过类型来区分——这意味着您无需进行运行时标记分析即可知道您是否拥有 an`Either`或 a `Maybe`——因此您只需查看标记即可知道它是 a`Left`还是 a `Right`。

在动态类型设置中，您必须先进行运行时类型分析（查看您拥有什么类型的值），然后对构造函数进行案例分析（查看您拥有哪种类型的值）。

一种方法是为每种类型的每个构造函数分配一个唯一标记。

在某种程度上，您可以将动态类型视为将*所有*值放入单个求和类型，将所有类型分析推迟到运行时测试。

* * *

> 我想确保的是， :tag 始终存在，并且它只能采用指定值之一，并且相应的值始终具有相同的类型/行为并且不能为 nil，并且有一种简单的方法可以看到我处理了代码中的所有情况。

顺便说一句，这几乎是对静态类型系统将做什么的描述。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-14T14:44:03.693

如果没有完成像[类型化 clojure](https://github.com/frenchy64/typed-clojure)这样令人兴奋的事情，我认为您无法避免运行时检查断言。

clojure 提供的一个鲜为人知的功能绝对有助于运行时检查，是前置条件和后置条件的实现（参见[http://clojure.org/special_forms](http://clojure.org/special_forms)和[fogus 的博客文章](http://blog.fogus.me/2009/12/21/clojures-pre-and-post/)）。我认为您甚至可以使用带有前置条件和后置条件的单个高阶包装函数来检查您对相关代码的所有断言。这很好地避免了运行时检查“污染问题”。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-06-08T12:56:41.573

这在某些语言中运行良好的原因是您在结果上分派（通常按类型） - 即您使用结果的某些属性（通常是类型）来决定下一步做什么。

所以你需要看看在clojure中调度是如何发生的。

1.  **nil 特殊情况**- 该`nil`值在各个地方都是特殊情况，可以用作“Maybe”的“None”部分。例如，`if-let`非常有用。

2.  **模式匹配**- 除了解构序列之外，基本 clojure 对此没有太多支持，但是有各种库可以做到。请参阅[Clojure 替换 ADT 和模式匹配？](https://stackoverflow.com/questions/3541794/clojure-replacement-for-adts-and-pattern-matching)[*更新*：在评论中 mnicky 说这已经过时了，你应该使用[core.match](https://github.com/clojure/core.match) ]

3.  **OO 按类型**- 按类型选择方法。因此您可以返回父级的不同子类并调用重载的方法来执行您想要的不同操作。如果你来自一个感觉很奇怪/笨拙的功能背景，但这是一个选择。

4.  **手动标记**- 最后，您可以使用`case`或`cond`与显式标记一起使用。更有用的是，您可以将它们包装在某种按您想要的方式工作的宏中。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-06-14T09:11:23.050

作为一种动态类型语言，通常类型在 Clojure 中的相关性/重要性不如在 Haskell / Scala 中。您**实际上并不需要显式定义它们**- 例如，您已经可以将 A 类型或 B 类型的值存储在变量中。

所以这真的取决于你想用这些总和类型做什么。您可能真的对**基于 type 的多态行为感兴趣，在这种情况下，定义一个****协议和两种不同的记录类型**，它们一起给出 sum 类型的多态行为可能是有意义的：

```
(defprotocol Fooable
  (foo [x]))

(defrecord AType [avalue]
  Fooable 
    (foo [x]
      (println (str "A value: " (:avalue x)))))

(defrecord BType [bvalue]
  Fooable 
    (foo [x]
      (println (str "B value: " (:bvalue x)))))

(foo (AType. "AAAAAA"))

=> A value: AAAAAA 
```

我认为这将提供您可能希望从 sum 类型中获得的几乎所有好处。

这种方法的其他优点：

*   记录和协议在 Clojure 中非常惯用
*   出色的性能（因为协议调度被高度优化）
*   您可以在协议中添加对 nil 的处理（通过`extend-protocol`）

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2016-11-30T12:57:24.183

使用带有标签的向量作为向量中的第一个元素，并使用 core.match 来解构标记的数据。因此，对于上面的示例，“任一”数据将被编码为：

```
[:left 123]
[:right "hello"] 
```

然后解构你需要参考[core.match](https://github.com/clojure/core.match)并使用：

```
(match either
  [:left num-val] (do-something-to-num num-val)
  [:right str-val] (do-something-to-str str-val)) 
```

这比其他答案更简洁。

[这个 youtube talk](https://www.youtube.com/watch?v=ZQkIWWTygio)更详细地解释了为什么向量对于在地图上编码变体是可取的。我的总结是，使用地图对变体进行编码是有问题的，因为您必须记住地图是“标记地图”而不是常规地图。要正确使用“标记地图”，您必须**始终**进行两阶段查找：首先是标记，然后是基于标记的数据。如果（**何时**）您忘记在映射编码的变体中查找标签，或者对标签或数据的键查找错误，您将得到一个难以追踪的空指针异常。

该视频还涵盖了矢量编码变体的这些方面：

*   捕获非法标签。
*   如果需要，使用[Typed Clojure](http://typedclojure.org/)添加静态检查。
*   将此数据存储在[Datomic](http://www.datomic.com/)中。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-06-08T12:00:02.420

不，到目前为止，clojure 中还没有这样的东西。虽然您可以实现它，但 IMO 这种类型似乎更适合静态类型语言，并且不会在 clojure 等动态环境中为您带来太多好处。

# erlang - 将字符串转换为二进制

> ID：10947637
> 
> 赞同：2
> 
> 时间：2012-06-08T11:05:45.227
> 
> 标签：erlang

我有以下问题。我有一个文件用于存储一些记录的数组（未知结构）。我所知道的所有记录都用“。”分隔。（点）。该记录的“字段”之一是二进制值。

所以结构是：

```
multiline_text <<binary_value>> multiline_text . 
```

我可以逐块读取文件（因为它非常大）并解析数据以获取实际数据“<>”，但它不是二进制值，而是字符串。我正在尝试将其转换为二进制（以转换为后期），但我没有成功。

我尝试使用 BIF `list_to_binary`（但它不会工作，因为它不是一个列表）——它已经是一个二进制文件。我试图将其转换为整数列表，将它们折叠并转换，但它仍然无法正常工作。

我想我缺少一些基本的东西（我是 Erlang 的新手）。有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T11:50:47.077

如果您以这种格式将您感兴趣的二进制文件转换为字符串，例如：

```
S = "<< 1,2,3 >>". 
```

然后你可以做这样的事情：

```
> {ok, T, _} = erl_scan:string(S ++ ".").
> {ok, Term} = erl_parse:parse_term(T). 
{ok,<<1,2,3>>} 
```

然后您可以使用`Term`, 它实际上将您刚刚读取的二进制文件作为字符串读取。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T12:11:29.707

这是没有 erl_parse 的版本。只是为了学习：

```
str2bin(Bin)->
Bin1 = string:strip(Bin, left, $<),
Bin2 = string:strip(Bin1, right, $>),
list_to_binary(lists:map(fun(Str) -> {Int, _Rest} = string:to_integer(string:strip(Str)), Int end, string:tokens(Bin2, ","))). 
```

# c# - 在静态类中保存对记录器的引用

> ID：10947639
> 
> 赞同：7
> 
> 时间：2012-06-08T11:05:52.187
> 
> 标签：c#, .net, static, global-variables, log4net

我正在使用 log4net，我在其中获取对静态类中记录器的引用，如下所示：

```
internal static class Constants
{
   public static readonly ILog Log = LogManager.GetLogger(MethodBase.GetCurrentMethod().DeclaringType);
} 
```

并在整个应用程序中使用该引用，如下所示：

```
Constants.Log.Info(_message); 
```

但是，我感觉这可能会导致问题，并且我意识到常量（全局？）变量可能是一件坏事。

*   这种方法有什么问题吗？
*   原因是什么？
*   可以做些什么来解决这些问题？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-08T11:08:39.600

您是对的，如果您希望能够轻松区分日志级别并为每个类使用不同的日志目标（“附加程序”） ，那**不是最好的方法。**

通常建议每个类都有一个静态`ILog`实例，以它的完全限定类型命名：

```
namespace Animals
{
   public class Dog
   {
       private static readonly ILog Log = LogManager.GetLogger(typeof(Dog));
   }

   public class Cat
   {
       private static readonly ILog Log = LogManager.GetLogger(typeof(Cat));
   }
} 
```

虽然与单例相比，这看起来需要更多的工作，但从长远来看，它非常方便。完成此操作后，很容易通过配置文件区分`Dog`和记录级别（使用[log4net](http://logging.apache.org/log4net/)语法`Cat`显示的示例）：

```
<log4net>

   <!-- appender definitions ommited -->

   <!-- default for all loggers in Animals namespace -->
   <logger name="Animals">
     <level value="WARN"/>
   </logger>

   <!-- ...but we need full debug for Dogs -->
   <logger name="Animals.Dog">
     <level value="DEBUG"/>
   </logger>

   <!-- ...and we want to send Cat messages over e-mail -->
   <logger name="Animals.Cat">
     <level value="INFO"/>
     <appender-ref ref="SmtpAppender"/> 
   </logger>

</log4net> 
```

像 log4net 这样的日志框架也使用[分层日志](http://www.informit.com/guides/content.aspx?g=java&seqNum=457)的概念：如果一个 logger 的名称后跟一个点是后代 logger 名称的前缀，则该 logger 被称为另一个 logger 的祖先。要使用此功能，最好避免手动命名记录器（使用硬编码`string`s），而是使用类型信息来包含整个命名空间。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-08T11:08:12.070

这实际上创建了一个单例，尽管这样做存在许多问题，包括进行有效的单元测试。单元测试不需要记录，这引入了不必要的依赖。

您应该考虑使用 IoC 容器和依赖注入。

# java - 包括 jpos.xml

> ID：10947641
> 
> 赞同：2
> 
> 时间：2012-06-08T11:06:06.620
> 
> 标签：java, epson, thermal-printer, jpos

我正在制作 POS 系统，现在我正在尝试设置 pos 打印机 epson tm-t20。当我尝试打开端口时，打印机在哪里，我收到以下错误消息：

`jpos.JposException: Could not connect to service with logicalName = POSPrinter: Exception.message=Could not create service instance. at jpos.loader.simple.SimpleServiceConnection.connect(Unknown Source) at jpos.BaseJposControl.open(Unknown Source) at tisk.Step1Frame.processWindowEvent(Step1Frame.java:83) at java.awt.Window.processEvent(Window.java:2009) at java.awt.Component.dispatchEventImpl(Component.java:4861) at java.awt.Container.dispatchEventImpl(Container.java:2287) at java.awt.Window.dispatchEventImpl(Window.java:2719) at java.awt.Component.dispatchEvent(Component.java:4687) at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:703) at java.awt.EventQueue.access$000(EventQueue.java:102) at java.awt.EventQueue$3.run(EventQueue.java:662) at java.awt.EventQueue$3.run(EventQueue.java:660) at java.security.AccessController.doPrivileged(Native Method) at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76) at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:87) at java.awt.EventQueue$4.run(EventQueue.java:676) at java.awt.EventQueue$4.run(EventQueue.java:674) at java.security.AccessController.doPrivileged(Native Method) at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76) at java.awt.EventQueue.dispatchEvent(EventQueue.java:673) at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:244) at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:163) at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:151) at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:147) at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:139) at java.awt.EventDispatchThread.run(EventDispatchThread.java:97)`

我生成了 jpos.xml，但我不知道将它放在项目中的哪个位置..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-29T17:09:16.287

该文件可以放在任何地方，但根目录是最好的起点。/* 如果要将 jpos.xml 文件放在本地文件系统的其他位置，请取消注释以下行并指定 jpos.xml 的完整路径。

```
 If you want to place the jpos.xml file on a webserver for access over the internet then uncomment
 the second System.setProperty line below and specify the full URL to jpos.xml.
 */

System.setProperty( JposPropertiesConst.JPOS_POPULATOR_FILE_PROP_NAME, "jpos.xml");

System.setProperty(JposPropertiesConst.JPOS_POPULATOR_FILE_URL_PROP_NAME, "http://some-where-remote.com/jpos.xml"); 
```

错误尝试添加这个

```
 System.setProperty("jpos.loader.serviceManagerClass", "jpos.loader.simple.SimpleServiceManager");
  System.setProperty("jpos.config.populatorFile", "jposxml.cfg");
  System.setProperty("jpos.util.tracing.TurnOnNamedTracers", "JposServiceLoader,SimpleEntryRegistry,SimpleRegPopulator,XercesRegPopulator");
  System.setProperty("jpos.util.tracing.TurnOnAllNamedTracers", "ON"); 
```

# java - 春天，休眠：未能懒惰地初始化一个集合

> ID：10947642
> 
> 赞同：1
> 
> 时间：2012-06-08T11:06:16.537
> 
> 标签：java, spring, hibernate, collections, lazy-initialization

我有延迟初始化的问题。我找不到解决方案。

例外：

```
[pool-1-thread-12] ERROR:12:20:14.840 o.h.LazyInitializationException - failed to lazily initialize a collection of role: de.beeld.forges.domain.Server.applications, no session or session was closed
org.hibernate.LazyInitializationException: failed to lazily initialize a collection of role: de.beeld.forges.domain.Server.applications, no session or session was closed
    at org.hibernate.collection.AbstractPersistentCollection.throwLazyInitializationException(AbstractPersistentCollection.java:380)
    at org.hibernate.collection.AbstractPersistentCollection.throwLazyInitializationExceptionIfNotConnected(AbstractPersistentCollection.java:372)
[pool-2-thread-1] ERROR:12:20:14.840 o.s.s.support.MethodInvokingRunnable - Invocation of method 'readStatusCache' on target class [class de.beeld.forges.task.annotation.ScheduledProcessor$$EnhancerByCGLIB$$ee649dc3] failed
java.util.ConcurrentModificationException: null
    at java.util.AbstractList$Itr.checkForComodification(AbstractList.java:372)
    at java.util.AbstractList$Itr.next(AbstractList.java:343) 
```

休眠.xml

```
<!-- Hibernate SessionFactory -->
<bean id="sessionFactory" class="org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean"
    p:dataSource-ref="standardDataSource" p:lobHandler-ref="defaultLobHandler">
    <property name="annotatedClasses">
        <list>
            <value>de.beeld.forges.domain.Server</value>
            <value>de.beeld.forges.domain.Application</value>
            <value>de.beeld.forges.domain.Forge</value>
        </list>
    </property>
</property>
</bean>
<bean id="defaultLobHandler" class="org.springframework.jdbc.support.lob.DefaultLobHandler" />
<!-- Read in DAOs from the hibernate package -->
<context:component-scan base-package="de.beeld.forges.dao" />
<bean id="transactionManager"
    class="org.springframework.orm.hibernate3.HibernateTransactionManager"
    p:sessionFactory-ref="sessionFactory" />

<bean id="transactionTemplate"
    class="org.springframework.transaction.support.TransactionTemplate">
    <property name="transactionManager" ref="transactionManager" />
</bean>

<tx:annotation-driven transaction-manager="transactionManager" />
    <context:component-scan base-package="de.beeld">
    <context:exclude-filter expression="org.springframework.stereotype.Controller"
        type="annotation" />
    <context:exclude-filter expression="org.springframework.stereotype.Repository"
        type="annotation" />
</context:component-scan>
<bean class="org.springframework.dao.annotation.PersistenceExceptionTranslationPostProcessor" /> 
```

readStatusCache 方法：

```
public void readStatusCache() {
    String execCommand = "java -jar ...";
    List<Future<Map<Long, Integer>>> list = new ArrayList<Future<Map<Long, Integer>>>();
    String serverName = null;
    for (Server server : serviceFacade.getServers()) {
        serverName = server.getName();

        Callable<Map<Long, Integer>> worker = new ApplicationStatusReader2(server.getApplications(),
                sshConnector, execCommand, serverName);
        Future<Map<Long, Integer>> submit = this.serviceFacade.getExecutor().submit(worker);
        list.add(submit);
    }

    for (Future<Map<Long, Integer>> future : list) {
        //do stuff
    }
} 
```

服务器.java

```
@Entity
@org.hibernate.annotations.Entity(dynamicUpdate = true)
public class Server implements DomainObject, Comparable<Server> {
private static final long serialVersionUID = -8920952435734596243L;

@Id
@GeneratedValue(strategy = GenerationType.AUTO)
private Long id;

@Column(unique = true, nullable = false)
@NotEmpty
private String name;

@Column(nullable = false)
@NotEmpty
@Pattern(regexp = "^([01]?\\d\\d?|2[0-4]\\d|25[0-5])\\.([01]?\\d\\d?|2[0-4]\\d|25[0-5])\\.([01]?\\d\\d?|2[0-4]\\d|25[0-5])\\.([01]?\\d\\d?|2[0-4]\\d|25[0-5])$", message = "The ip must be in format xxx.xxx.xxx.xxx")
private String ip;

@Column(nullable = false)
@NotEmpty
private String fqdn;

@OneToMany(mappedBy = "server", fetch = FetchType.LAZY)
private List<Application> applications;

@Version
private int version;

//getter and setter
} 
```

应用程序.java

```
@Entity
public class Application implements DomainObject {
private static final long serialVersionUID = -8127137156319959239L;
@Id
@GeneratedValue(strategy = GenerationType.IDENTITY)
private Long id;
@ManyToOne(fetch = FetchType.LAZY)
private Server server;
@Column(nullable = false)
@NotEmpty
private String name;
@Column(nullable = false)
@NotEmpty
private String location;
@Column(nullable = false)
@NotEmpty
private String binDir;
private String confDir;
private boolean isContainer = false;
private String containerDir;
private String startup = "startup.sh";
private String shutdown = "shutdown.sh";
@ManyToOne(fetch = FetchType.LAZY)
@Fetch(FetchMode.JOIN)
private Forge forge;
@ManyToOne(fetch = FetchType.LAZY)
@Fetch(FetchMode.JOIN)
private Application parent;
@OneToMany(mappedBy = "parent", fetch = FetchType.LAZY)
private List<Application> offsprings;
@NotEmpty
private String blueprint;
private Integer replaceable = 0;
private Integer running = 0;
@Version
private int version;

//getter and setter
} 
```

我真的不知道为什么我无法从服务器读取应用程序列表

如果有人可以提供帮助，那就太好了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-08T15:27:25.227

很可能是因为您将应用程序集合设置为延迟加载。因此，当您从对 serviceFacade.getServers() 的初始调用返回时，我的猜测是您不再打开用于获取服务器列表的会话。

结果，当您遍历应用程序时，会话已关闭，因此无法加载集合的实际内容。

你有三种可能：

1.  保持会话打开（谷歌用于将休眠会话绑定到线程，或者如果 readStatusCache 方法在 spring 托管对象中，只需向其添加 @Transactional 注释，或调用它的入口点）。
2.  将应用程序集合更改为急切加载
3.  让您的 dao 层在会话仍处于打开状态时完全初始化应用程序集合（请参阅 Hibernate.initialize 方法）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T11:15:52.467

两个循环

```
 for (Server server : serviceFacade.getServers()) {
        serverName = server.getName();

        Callable<Map<Long, Integer>> worker = new ApplicationStatusReader2(server.getApplications(),
                sshConnector, execCommand, serverName);
        Future<Map<Long, Integer>> submit = this.serviceFacade.getExecutor().submit(worker);
        list.add(submit);
    }

    for (Future<Map<Long, Integer>> future : list) {
        //do stuff
    } 
```

被两个单独的线程同时调用。`readStatusCache()`您可以通过同步方法来检查是否是这种情况。但这应该在 Spring 层中完成。您是否正确使用交易等？

请阅读此答案以获取有关 spring 和 hibernate 的线程安全的更多信息。[在 webapp 中使用 Spring-Hibernate，线程安全会话管理的策略是什么](https://stackoverflow.com/questions/3309473/spring-hibernate-used-in-a-webapp-what-are-strategies-for-thread-safe-session-ma)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-30T11:46:28.327

当我遇到同样的异常时，解决方案是将@Transactional注解添加到控制器中的方法中。

# python - 如何在 linux 终端上重现类似 wget 的速度接口？

> ID：10947650
> 
> 赞同：3
> 
> 时间：2012-06-08T11:06:46.647
> 
> 标签：python, unix, terminal, stdout, curses

Wget 以非常清晰的方式将速度信息打印到标准输出，其中在下载文件时显示和刷新速度，并在屏幕上滚动一个条。我想在 Python 程序中复制这种输出。这怎么可能？

我认为[curses](http://docs.python.org/library/curses.html)库应该能够做到这一点；这就是我想出的：-

```
import curses, time

class Speeder( object ):
    """Show and refresh time and download speed in a curses interface."""
    t1 = 0\. # start time
    t  = 0\. # current time
    tf = 0\. # end time
    def start(self, filename=None ):
        """Start timer"""
        self.t1 = self.t = time.time()
        curses.use_env(True)
        curses.initscr()
        self.win = curses.newwin(4, 0)
        if filename is not None:
            self.win.addnstr(filename, 50 )
            self.win.refresh()

    def update(self, rbytes):
        """Refresh speed."""
        t = time.time()
        td = t - self.t
        self.t = t
        speed = rbytes / td 
        self.win.addstr(0,54,str('{0:.02f} B/s'.format(speed)))
        self.win.refresh()

    def end(self):
        """End timer"""
        self.tf = time.time() 
        curses.endwin()

try:
    speed = Speeder()
    speed.start(filename='foo.bar')
    for i in xrange(10):
        time.sleep(0.5)
        speed.update(200)
finally:
    speed.end() 
```

问题是它占据了整个窗口，而我一次只需要一行。我宁愿不将所有命令行历史记录推回终端窗口上方。如果我错了，请纠正我，但我目前认为 curses 应用程序总是占据整个终端窗口。

因此，我查看了[tty](http://docs.python.org/library/tty.html)和[termios](http://docs.python.org/library/termios.html#module-termios)模块，但找不到任何我想做的示例。

最后，我遇到[了一篇博客文章](http://www.mutaku.com/wp/index.php/2011/06/python-dynamically-printing-to-single-line-of-stdout/)，它通过简单地将一些特殊字符写入 sys.stdout 来实现。将他的代码应用于我的 Speeder 课程，我想出了这个：-

```
import sys
class Speeder( object ):
    """Show and refresh time and download speed."""
    t1 = 0\. # start time
    t  = 0\. # current time
    tf = 0\. # end time
    def start(self, filename=None ):
        """Start timer"""
        self.t1 = self.t = time.time()
        if filename is not None:
            sys.stdout.write( '\r\x1b[K' + filename.ljust(50) )
            sys.stdout.flush()

    def update(self, rbytes):
        """Refresh speed."""
        t = time.time()
        td = t - self.t
        self.t = t
        speed = '{0} B/s'.format( rbytes / td )
        sys.stdout.write( "\r\x1b[K" + speed.rjust(65) )
        sys.stdout.flush()

    def end(self):
        """End timer"""
        self.tf = time.time()
        sys.stdout.write('\n') 
```

这有更少的代码行，我喜欢，但是我不知道发生了什么，或者如何修改它以仅更新行的一部分，类似于 curses.addstr 函数。目前，文件名被空格覆盖。我当然可以修改该类以每次从 python 构造整行，但我想了解这一点以便根据我自己的需要对其进行调整。

作者说这只能在 VT100 终端上实现。所以我想这只能在Unix终端上工作吗？很好，但是有没有任何 Unix 终端不能在上面工作？

是否有关于该主题的更好的文档，或更复杂的示例（例如更新多行、一行多行或一行中的单个字符），最好用于 Python？这似乎不是 Python 的一个特性，而是 tty，这就是为什么我想我什么都没找到。是否有手册页或我应该阅读的内容？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-08T11:20:26.140

上面的代码使用 ANSI 转义码：[https](https://en.wikipedia.org/wiki/ANSI_escape_code) ://en.wikipedia.org/wiki/ANSI_escape_code 。我认为这就是您在尝试了解您找到的代码时正在寻找的文档。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-08T11:21:33.053

您可能想看看[Blessings](http://pypi.python.org/pypi/blessings/)，它似乎正是您想要的：

> Blessings 解除了几个 curses 的限制性假设，它也让你的代码很漂亮

# android - 使用邮件 ID 在 facebook 中发送好友请求

> ID：10947651
> 
> 赞同：0
> 
> 时间：2012-06-08T11:06:47.113
> 
> 标签：android, facebook

我正在将 facebook 集成到我的 android 应用程序中，在这里我需要使用已通过他们的 api 调用注册为linkedin 的邮件 ID 发送好​​友请求。

我研究了更多并且花了很多时间在这我无法得到任何解决方案，所以我请求你们提供任何示例代码或任何解决方案。

感谢您

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T13:36:44.767

有[Friends Dialog](http://developers.facebook.com/docs/reference/dialogs/friends/)但我不能说它是否在 android 中运行良好（使用[Dialogs](http://developers.facebook.com/docs/reference/androidsdk/dialog/)）但你应该能够在 webview 中打开它。

请注意文档中的限制/警告：

> 此功能旨在帮助用户在 Facebook 上与他们在现实生活中联系的人成为朋友。您不应使用此功能来鼓励用户与他们在现实生活中没有联系的其他用户成为朋友。如果发现您的应用程序鼓励这种行为，您可能会禁用此功能。

话虽如此，您不能将`email`其用作标识符，整个 facebook api（图形和 fql）都可以与用户 ID 或用户名一起使用。
如果您检查[User fql 表](http://developers.facebook.com/docs/reference/fql/user/)，您会看到只有可索引字段是`uid`,`username`和`name`.

# python - 无法安装 python 模块：命令“/usr/bin/llvm-gcc”失败，退出状态为 1

> ID：10947653
> 
> 赞同：0
> 
> 时间：2012-06-08T11:06:57.540
> 
> 标签：python, macos, llvm-gcc

有人可以帮我解决这个问题吗，我发现很多帖子都报告了同样的错误，但没有解决方案对我有用。我在多个模块中遇到了同样的错误。

我正在设置 os X 10.7。我已经安装了 Xcode 4.3.2，我已经下载了命令行工具。我按照本教程安装了 python2.7：[http](http://www.thisisthegreenroom.com/2011/installing-python-numpy-scipy-matplotlib-and-ipython-on-lion/#lion) ://www.thisisthegreenroom.com/2011/installing-python-numpy-scipy-matplotlib-and-ipython-on-lion/#lion 。

现在我正在尝试使用以下命令安装一些其他模块，例如 igraph： pip install python-igraph 并且我收到此错误：

lipo：无法打开输入文件：/var/folders/XXX（没有这样的文件或目录）

错误：命令“/usr/bin/llvm-gcc”失败，退出状态为 1

多个包我得到相同的错误:(

我已经尝试过：导出 ARCHFLAGS="-arch i386 -arch x86_64" 并遵循以下内容： [http ://waqasshabbir.tumblr.com/post/19073648382/llvm-gcc-4-2-exe-error -on-mac-osx-lion-when-building](http://waqasshabbir.tumblr.com/post/19073648382/llvm-gcc-4-2-exe-error-on-mac-osx-lion-when-building)

谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T11:25:36.517

我曾经在 Linux 和 pip 上遇到过类似的问题。使用“sudo pip install ....”为我解决了这个问题。也许这也适用于 OS X。

祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T18:05:01.057

我终于设法安装 igraph 做：

```
brew install igraph
sudo pip install python-igraph 
```

但是我仍然有其他模块的问题！！！！感谢您的帮助

# objective-c - 如何在可可中获取系统区域设置和系统语言

> ID：10947664
> 
> 赞同：6
> 
> 时间：2012-06-08T11:07:41.367
> 
> 标签：objective-c, macos, cocoa, nslocale

我想获取系统默认语言和系统区域设置。

我尝试了以下代码片段来获取系统当前语言环境，如下所示

```
NSLocale *locale;
locale = [NSLocale systemLocale];

NSString * localLanguage = [locale objectForKey:NSLocaleIdentifier];
NSLog (@"Language : %@", localLanguage); 

NSLog(@"System locale Identifier %@",[locale localeIdentifier]); 
```

但是系统语言环境标识符没有显示任何内容。如果它是当前语言环境，它会给出正确的结果。为什么系统语言环境没有给出任何值以及如何获取系统默认语言而不是用户首选语言？请帮助

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-26T11:32:28.387

您可以简单地使用： `NSString* language = [[NSLocale preferredLanguages] objectAtIndex:0];`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-08T11:27:21.510

默认值`NSLocaleIdentifier`是有意`@""`指示没有当前选择。根据 Apple 的说法，`systemLocale`这只是对未在用户选择的区域设置 ( `currentLocale`) 中实现的键的后备，并且由于它始终处于设置状态并且始终处于用户的控制之下，因此这是有道理的。

如果您想关注用户的首选语言列表，您需要使用`+ preferredLanguages`，它会返回用户喜欢的语言列表，按用户喜欢的顺序排列。这适用于 OSX 和 iOS，并在选择语言时为系统提供适当的回退。

对于测试，您可以使用命令行开关`-AppleLanguages`，其值为逗号分隔、括号括起来的数组（例如`(DE,FR,EN)`：），Xcode 将模拟用户的首选语言列表。

由于用户设置了首选语言（至少在 OSX 中），因此操作系统在为用户选择本地化数据时将遵循该列表。通常，由于这个事实，除了使用宏之外的任何操作都被认为是不必要的。但是，如果您有需要本地化的非资源信息，则可以手动查看该值。

# java - 在服务器中禁用 http 端口后访问 https webservice 时出错

> ID：10947665
> 
> 赞同：1
> 
> 时间：2012-06-08T11:07:47.880
> 
> 标签：java, http, ssl, https, webservices-client

在服务器中禁用 http 端口后，我试图从 https 站点访问操作。它抛出以下错误。启用 http 后，它的工作正常。然后我可以使用 https 请求 .. 请在下面找到启用 sslConnection 的代码

```
public static void enableSSL() throws NoSuchAlgorithmException, KeyManagementException {
     TrustManager[] trustAllCerts = new TrustManager[] { new X509TrustManager() {

            @Override
            public void checkClientTrusted(X509Certificate[] chain,
                    String authType) throws CertificateException {
                // TODO Auto-generated method stub

            }

            @Override
            public void checkServerTrusted(X509Certificate[] chain,
                    String authType) throws CertificateException {
                // TODO Auto-generated method stub

            }

            @Override
            public X509Certificate[] getAcceptedIssuers() {
                // TODO Auto-generated method stub
                return null;
            }

        } };
        // Install the all-trusting trust manager
        SSLContext sc = SSLContext.getInstance("SSL");
        // Create empty HostnameVerifier
        HostnameVerifier hv = new HostnameVerifier() {

            @Override
            public boolean verify(String arg0, SSLSession arg1) {
                // TODO Auto-generated method stub
                return true;
            }
        };

        sc.init(null, trustAllCerts, new java.security.SecureRandom());
        HttpsURLConnection.setDefaultSSLSocketFactory(sc.getSocketFactory());
        HttpsURLConnection.setDefaultHostnameVerifier(hv);

} 
```

请在下面找到错误

```
com.sun.xml.ws.client.ClientTransportException: HTTP transport error:
java.net.SocketTimeoutException: connect timed out at 
com.sun.xml.ws.transport.http.client.HttpClientTransport.getOutput(HttpClientTransport.java:132) at 
com.sun.xml.ws.transport.http.client.HttpTransportPipe.process(HttpTransportPipe.java:153) at 
com.sun.xml.ws.transport.http.client.HttpTransportPipe.processRequest(HttpTransportPipe.java:94) at 
com.sun.xml.ws.transport.DeferredTransportPipe.processRequest(DeferredTransportPipe.java:116) at
com.sun.xml.ws.api.pipe.Fiber.__doRun(Fiber.java:598) at 
com.sun.xml.ws.api.pipe.Fiber._doRun(Fiber.java:557) at
com.sun.xml.ws.api.pipe.Fiber.doRun(Fiber.java:542) at 
com.sun.xml.ws.api.pipe.Fiber.runSync(Fiber.java:439) at 
com.sun.xml.ws.client.Stub.process(Stub.java:222) at 
com.sun.xml.ws.client.sei.SEIStub.doProcess(SEIStub.java:135) at 
com.sun.xml.ws.client.sei.SyncMethodHandler.invoke(SyncMethodHandler.java:109) at 
com.sun.xml.ws.client.sei.SyncMethodHandler.invoke(SyncMethodHandler.java:89) at 
com.sun.xml.ws.client.sei.SEIStub.invoke(SEIStub.java:118) at 
$Proxy32.getStageRoot(Unknown Source) at 
com.hash.aif.client.file.AIFFilePortClient.getStageRoot(AIFFilePortClient.java:57) at 
com.hash.aif.client.AifSSLClient.main(AifSSLClient.java:21) Caused by:
java.net.SocketTimeoutException: connect timed out at 
java.net.DualStackPlainSocketImpl.waitForConnect(Native Method) at 
java.net.DualStackPlainSocketImpl.socketConnect(Unknown Source) at 
java.net.AbstractPlainSocketImpl.doConnect(Unknown Source) at 
java.net.AbstractPlainSocketImpl.connectToAddress(Unknown Source) at 
java.net.AbstractPlainSocketImpl.connect(Unknown Source) at 
java.net.PlainSocketImpl.connect(Unknown Source) at 
java.net.SocksSocketImpl.connect(Unknown Source) at 
java.net.Socket.connect(Unknown Source) at 
sun.security.ssl.SSLSocketImpl.connect(Unknown Source) at 
sun.net.NetworkClient.doConnect(Unknown Source) at 
sun.net.www.http.HttpClient.openServer(Unknown Source) at 
sun.net.www.http.HttpClient.openServer(Unknown Source) at 
sun.net.www.protocol.https.HttpsClient.<init>(Unknown Source) at 
sun.net.www.protocol.https.HttpsClient.New(Unknown Source) at 
sun.net.www.protocol.https.AbstractDelegateHttpsURLConnection.getNewHttpClient(Unknown Source) at 
sun.net.www.protocol.http.HttpURLConnection.plainConnect(Unknown Source) at 
sun.net.www.protocol.https.AbstractDelegateHttpsURLConnection.connect(Unknown Source) at 
sun.net.www.protocol.http.HttpURLConnection.getOutputStream(Unknown Source) at 
sun.net.www.protocol.https.HttpsURLConnectionImpl.getOutputStream(Unknown Source) at 
com.sun.xml.ws.transport.http.client.HttpClientTransport.getOutput(HttpClientTransport.java:120) ... 15 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T04:39:29.617

HTTPS 与标准 HTTP (80) 位于不同的端口 (443)。连接超时，因此很可能是服务器没有提供 HTTPS（它只提供 HTTP），或者有一些防火墙问题阻止您访问目标计算机上的端口 443。

这是指示连接超时的错误堆栈的相关部分：

```
Caused by:
java.net.SocketTimeoutException: connect timed out at 
java.net.DualStackPlainSocketImpl.waitForConnect(Native Method) at 
java.net.DualStackPlainSocketImpl.socketConnect(Unknown S 
```

# c# - 如何使用 MVC AJax.BeginForm 传递动态值

> ID：10947666
> 
> 赞同：2
> 
> 时间：2012-06-08T11:07:48.117
> 
> 标签：c#, ajax, asp.net-mvc

我正在使用 MVC 和 AJax.BeginForm 对我的页面进行一些 ajax 更新。BeginForm 代码类似于：

```
using (Ajax.BeginForm("HandleCrop", "Card", 
                   new 
                   { 
                       accept = true, 
                       id = Model.ImageUpload.ID, 
                       file = Model.ImageUpload.File, 
                       imageCropX = Model.CropInfo.X,
                       imageCropY = Model.CropInfo.Y,
                       imageCropWidth = Model.CropInfo.Width,
                       imageCropHeight = Model.CropInfo.Height                        
                   }, 
                   new AjaxOptions 
                   { 
                       HttpMethod = "POST", 
                       OnComplete = "ConfirmCompleted", 
                       OnSuccess = "ReloadUpload", 
                       OnFailure = "Failure" 
                   }, null)) 
```

Model.CropInfo 被作为隐藏字段放入，如下所示：

```
<%=Html.HiddenFor(m => m.CropInfo.X) %>
<%=Html.HiddenFor(m => m.CropInfo.Y) %>
<%=Html.HiddenFor(m => m.CropInfo.Width) %>
<%=Html.HiddenFor(m => m.CropInfo.Height) %> 
```

然而，这些值正在被一些客户端javascript动态修改，并且这些值需要通过Ajax回调发布到服务器。上面的代码显然不起作用，因为在呈现页面时正在填充 Ajax 表单中的 imageCrop.. 参数（因此全为 0）。

我的问题是：处理这种情况的正确方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T11:20:03.127

从 Ajax 中这部分应该被完全删除：

```
 imageCropX = Model.CropInfo.X,
    imageCropY = Model.CropInfo.Y,
    imageCropWidth = Model.CropInfo.Width,
    imageCropHeight = Model.CropInfo.Height 
```

在你应该从发布的数据中填写好`TryUpdateModel`。`Action``CropInfo`

如果您**不使用**模型的自动更新（或通过`TryUpdateModel`），而不是**使用**此数据作为输入参数，`Action`那么只需将这些`Action`参数重命名为`CropInfo_X`,`CropInfo_Y`和`CropInfo_Width`（`CropInfo_Height`我认为这就是隐藏字段在 HTML 中的命名方式，在页面源代码中检查）

# twitter-bootstrap - 我的 Twitter Bootstrap 选项卡/药丸有什么问题？

> ID：10947669
> 
> 赞同：0
> 
> 时间：2012-06-08T11:07:57.803
> 
> 标签：twitter-bootstrap

我不能让药片起作用。这是[我的现场应用程序](http://btctox.org/api)。

我相信我使用了正确的布局，并`.tab()`在我的选项卡上调用，但它不起作用。我错过了什么？

选定的选项卡未在单击时切换，并且选项卡内容未显示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T16:18:39.633

您忘记在不同的 a 标签上添加 data-toggle="tab"

```
<a href="#tobtc" data-toggle="tab">http://btctox.org/api/tobtc</a> 
```

代替

```
<div class="tab-content2"> 
```

和

```
<div class="tab-content"> 
```

一切都好

# php - $_POST 真的安全吗？

> ID：10947670
> 
> 赞同：0
> 
> 时间：2012-06-08T11:08:03.763
> 
> 标签：php, jquery, mysql, security, post

我在 mysql 中有一条表消息

```
id(bigint)      sender(int)    receiver(int)     message(varchar)
1                 42                420           Hi
2                 80                32            Hello
3                 61                32            I love you 
```

我的 delete.php 代码

```
if(isset($_POST['id']))mysql_query("Delete from message where id=".$_POST['id'].""); 
```

用户使用 ajax 请求删除消息的页面

```
<div>sender:Romeo
receiver:Juliet
message:I love you</div>
<span id="3">delete</span>//delete message with id 3
<script>
$("span").click(function(){$.post("delete.php",{"id",$("span").attr("id")});
});</script> 
```

现在据我所知，任何人都可以知道我正在向哪个页面发出此请求，并使用方法 post 和 action delete.php 轻松开发一个假表单并删除消息。谁能告诉我如何防止这种情况？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-08T11:10:16.013

您需要验证/验证传入数据（即当前用户是否有权删除指定消息？）。您还需要通过使用[准备好的语句](http://php.net/manual/en/book.pdo.php)来防止 SQL 注入，而不是直接将用户数据插入到查询中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T11:12:51.060

[mysql_real_escape_string()](http://php.net/manual/en/function.mysql-real-escape-string.php)应该用于清理 MySQL 查询的用户输入。

例如。

```
$id = mysql_real_escape_string( $_POST['id'] );
mysql_query( "SELECT * FROM blah WHERE id='$id'" ); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-08T11:17:05.027

请注意，如果您过滤和转义数据，则不会阻止用户了解 Ajax 调用的端点并通过猜测 ID 来删除所有消息。

就像 Ed Daniel 指出的那样，您应该使用身份验证，以便只有授权用户才能删除帖子，并且只有他们是作者或有权这样做。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-08T11:10:52.300

这是一个修复：

```
$id = array_key_exists('id', $_POST) ? (int) $_POST['id'] : null;
if ($id)
{
    mysql_query("DELETE FROM message WHERE id={$id}");
} 
```

我首先检查了该项目是否存在于`$_POST`数组中，以避免 PHP 通知，而且我`(int)`在使用它之前已经对其进行了消毒。

一些建议：总是在你的`if`陈述中使用大括号——有一天它会为你省去很多麻烦。另外，如果可以的话，迁移到 PDO 或 mysqli，这样你就可以使用准备好的语句。最后，最好有一个 SQL 的大小写约定——如果你愿意，你可以用标题大小写来写它，但我更喜欢大写的关键字，小写的实体名称。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-08T11:14:50.223

我希望朱丽叶必须首先登录才能看到该消息！基本上，这就是您的答案 - 用户身份验证。如果 POST 的提交者无法说服您他们有权删除该邮件，那么不要让他们这样做。

正如 Olli Charlesworth 指出的那样，SQL 是在自找麻烦。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-08T11:16:08.380

该页面必须仅供登录用户访问。您可以通过检查他的 user_id 或 $_SESSION 中的任何类似内容来简单地检查天气用户是否已登录。即使有人可以将数据从他的 m/c 发布到您的服务器，它也不会被添加，因为您已经在上面进行了身份验证检查。你最好使用 prepare 语句、mysql_escape 或 addSlashes、regexp 等来清理你的输入。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-08T11:27:51.940

您示例中的代码包含一个大的 MySQL 注入问题。无论您是否使用由用户控制的 $_POST、$_GET、$_COOKIE、$_FILES、$_SERVER 中的值（包括 USER_AGENT、上传文件的文件名等），您都必须对其进行保护。

正如建议的那样，最好的方法是使用 PDO（PHP 数据对象，用于数据库访问的抽象层）。 `mysql_real_escape_string()`转义像 " 和 ' 之类的任何引号，但对每种类型的注入都没有帮助。

在你的情况下，如果有人使用`-1 OR 1=1`你的整张桌子将被清除。并且`mysql_real_escape_string`不能提供任何安全保障。

您还应该实现某种登录，现在每个人都可以删除表中的任何记录。

查看 PDO 的 PHP 手册：http: [//de.php.net/manual/en/pdo.prepare.php](http://de.php.net/manual/en/pdo.prepare.php)了解更多信息。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-06-08T14:28:05.480

检查记录的用户 ID 是否等于接收者 ID。

如果没有，就死

# ruby-on-rails-3 - Rails 3 中的“如果”失败

> ID：10947676
> 
> 赞同：0
> 
> 时间：2012-06-08T11:08:20.183
> 
> 标签：ruby-on-rails-3

由于奇怪的原因，我有这段代码似乎不起作用：

```
 <% if (@user.photo.blank?) %>               
        <%= image_tag("empty_profile_pic.png") %> <!-- replace with user's image -->
    <%else %>
        <%= image_tag(@user.photo.url(:small)) %> 
    <% end %> 
```

如果图片在 mySQL 数据库中为空，我希望它显示另一张图片。我试过`empty?, nil?, blank?`了，但没有成功，还有

```
 @user.photo.blank.url.* 
```

有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T12:47:13.217

怎么样

@user.photo. 存在吗？

~查尔斯~

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T14:06:06.797

```
<%= image_tag(@user.photo.try(:url, :small) || "empty_profile_pic.png") %> 
```

# android - OSGi (Felix)：更改系统包的标准包以使其在 Android 上运行

> ID：10947678
> 
> 赞同：1
> 
> 时间：2012-06-08T11:08:24.050
> 
> 标签：android, osgi, bundle, packages, apache-felix

我开发了一个小型 EMF 项目作为 OSGi Bundle。现在我想在带有 Apache Felix 的 android 上使用它。EMF 使用一些标准的 java 库。像 java.xml.xxx。通常 OSGi 系统包会导出这些。但在我的 android 案例中，它看起来像这样：

> ## 系统包 (0)
> 
> Bundle-Description = 此捆绑包是系统特定的；它实现了各种系统服务。
> 
> 捆绑清单版本 = 2
> 
> 捆绑名称 = 系统捆绑
> 
> Bundle-SymbolicName = org.apache.felix.framework
> 
> 捆绑版本 = 4.1.0.SNAPSHOT
> 
> 导出包 = org.osgi.framework; 版本=“1.6.0”，org.osgi.framework.launch；版本="1.0.0", org.osgi.framework.wiring; 版本="1.0.0", org.osgi.framework.startlevel; 版本=“1.0.0”，org.osgi.framework.hooks.bundle；版本=“1.0.0”，org.osgi.framework.hooks.resolver；版本=“1.0.0”，org.osgi.framework.hooks.service；版本=“1.1.0”，org.osgi.framework.hooks.weaving；版本=“1.0.0”，org.osgi.service.packageadmin；版本="1.2.0", org.osgi.service.startlevel; 版本=“1.1.0”，org.osgi.service.url；版本=“1.0.0”，org.osgi.util.tracker；版本="1.5.0"
> 
> 导出服务 = org.osgi.service.packageadmin.PackageAdmin,org.osgi.service.startlevel.StartLevel,org.osgi.service.url.URLHandlers
> 
> 提供能力 =

这与普通系统捆绑包的系统捆绑包导出没什么不同；-) 我不知道它是否起作用：我正在像这样启动 Felix：

```
 Properties configArg = new Properties();
        File chacheDir = this.getFilesDir();
        configArg.setProperty(Constants.FRAMEWORK_STORAGE, chacheDir.getAbsolutePath());
        configArg.setProperty("osgi.shell.telnet.ip", ipadd);
        configArg.setProperty("osgi.shell.telnet.port", "6666");
        Felix felix = new Felix(configArg);

        try{
            felix.start();
            ... 
```

现在的问题是，我如何在系统包中获取缺少的标准 java 包。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T12:26:38.457

我找到的最佳解决方案是`FRAMEWORK_SYSTEMPACKAGES`用 Android 平台中可用的特定包替换。这些都是，

*   `android.jar`您在目标设备中找到的所有软件包，
*   除了`java.*`和`junit.*`,
*   `org.osgi.*`但系统捆绑正常导出的所有软件包。

所以，像

```
String SYSTEM_PACKAGES = 
    "org.osgi.framework;version=\"1.6\"," + 
    // ...
    "android," + 
    // ...
    "javax.crypto," + 
    // ...
    "org.apache.commons.logging";

Map<String, Object> config = new HashMap<String, Object>();
config.put(Constants.FRAMEWORK_SYSTEMPACKAGES, SYSTEM_PACKAGES);
Framework framework = new Felix(config);
framework.start(); 
```

# vb.net - Telerik 版本的 system.windows.text 代码

> ID：10947679
> 
> 赞同：1
> 
> 时间：2012-06-08T11:08:25.517
> 
> 标签：vb.net, winforms, telerik

我希望有一个部分类来管理我在`radtextboxes`用户按下回车键和我正在寻找这行代码的 Telerik 解释之间的焦点`tbs(i).KeyDown += New KeyEventHandler(AddressOf textBoxes_KeyDown)`任何想法。请帮忙。

```
Partial Public Class MstFileTruck Inherits Form

    Private tbs() As Telerik.WinControls.UI.RadTextBox

    Public Sub New()
        InitializeComponent()
        tbs = New Telerik.WinControls.UI.RadTextBox() {txtTruckNumber,   txtRegistrationNumber, txtOwnerName}
        For i As Integer = 0 To tbs.Length - 1
            tbs(i).Tag = i
            tbs(i).KeyDown += New KeyEventHandler(AddressOf textBoxes_KeyDown)
            '    'tbs(i).IsHandleCreated += New KeyEventArgs(Keys.Enter) '(AddressOf textBoxes_KeyDown)
            '    tbs(i).RootElement.KeyDownEvent.EventName(textBoxes_KeyDown) '= New KeyEventArgs(AddressOf   Telerik.WinControls.UI.RadTextBoxElement.KeyDownEvent.EventName(textBoxes_KeyDown(tbs, RootRadElement.KeyDownEvent))) '(AddressOf textBoxes_KeyDown)
        Next
        tbs(0).Focus()
    End Sub

    Private Sub textBoxes_KeyDown(sender As Object, e As KeyEventArgs)
        Dim tb As Telerik.WinControls.UI.RadTextBox = TryCast(sender, Telerik.WinControls.UI.RadTextBox)
        If tb IsNot Nothing Then
            If e.KeyCode = Keys.Enter Then
                Dim tag As Integer = CInt(tb.Tag)
                If tag = 2 Then
                    tbs(0).Focus()
                Else
                    tbs(tag + 1).Focus()
                End If
            End If
        End If
    End Sub
End Class 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T14:14:05.847

我不太确定你的代码应该做什么。我什至不确定您的事件订阅是否有效，但是，这里是如何在两个 RadTextBox 实例之间切换焦点：

```
 Private Sub RadTextBox_KeyDown(sender As System.Object, e As System.Windows.Forms.KeyEventArgs) Handles RadTextBox1.KeyDown, RadTextBox2.KeyDown
    If e.KeyCode = Keys.Enter Then
        Dim tb As RadTextBox = DirectCast(sender, RadTextBox)
        If tb.Name = "RadTextBox1" Then
            RadTextBox2.TextBoxElement.Focus()
        Else
            RadTextBox1.TextBoxElement.Focus()
        End If
    End If
End Sub 
```

在 VB 中订阅事件的另一种方法是：

```
 AddHandler RadTextBox1.KeyDown, AddressOf RadTextBox_KeyDown

        Private Sub RadTextBox_KeyDown(sender As System.Object, e As System.Windows.Forms.KeyEventArgs)
           'your code here
        End Sub 
```

这是整个代码，它应该在您的 .vb 文件中看起来像

```
Imports Telerik.WinControls.UI

Public Class Form1

Public Sub New()

    ' This call is required by the designer.
    InitializeComponent()

    AddHandler RadTextBox1.KeyDown, AddressOf RadTextBox_KeyDown
End Sub

Private Sub RadTextBox_KeyDown(sender As System.Object, e As System.Windows.Forms.KeyEventArgs) Handles RadTextBox1.KeyDown, RadTextBox2.KeyDown
    If e.KeyCode = Keys.Enter Then
        Dim tb As RadTextBox = DirectCast(sender, RadTextBox)
        If tb.Name = "RadTextBox1" Then
            RadTextBox2.TextBoxElement.Focus()
        Else
            RadTextBox1.TextBoxElement.Focus()
        End If
    End If
End Sub 
```

结束类

# qt - “在发出破坏（）时在〜QObject中检测到意外异常”是什么意思？意思是

> ID：10947680
> 
> 赞同：1
> 
> 时间：2012-06-08T11:08:26.757
> 
> 标签：qt, destructor

我有一个 Qt 应用程序，当 A 类的实例被销毁并试图向 B 类的实例（它有一个来自 A 的 destroy() 插槽）发出信号时，该应用程序会因分段错误而崩溃。当破坏发生时，就在崩溃之前，我得到了：

> 在发出destroy() 时在~QObject 中检测到意外异常。，

然后，具有以下回溯的段错误：

```
#0  0x0000000000 in ??
#1  0x35b9b0117a in QObject::~QObject() ... 
```

这是什么意思？我们谈论什么样的期望？在销毁过程中，A 和 B 最终都可能被销毁，但据我所知，信号在销毁时断开，所以销毁顺序不重要……那有什么关系呢？

# freebsd - FreeBSD 上的 IPMI 看门狗超时前中断

> ID：10947682
> 
> 赞同：0
> 
> 时间：2012-06-08T11:08:42.577
> 
> 标签：freebsd, intel, platform, watchdog

我试图通过 FreeBSD 7 上的 IPMI 启用看门狗。

根据 IPMI 规范 v2.0。它可以通过设置超时前动作位来设置 NMI 中断。
超时操作返回正确，但没有响应 NMI 中断。
我徘徊在其他地方是否需要其他配置。

有什么建议么？
谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T19:46:22.680

FreeBSD watchdogd 守护进程就是你想要的。它初始化对应的设备（ichwd 或 amdsbwd - 如果您启用了它，它应该显示在您的 dmesg 中）或使用软件看门狗。

# java - OSMDROID 中的气泡

> ID：10947685
> 
> 赞同：1
> 
> 时间：2012-06-08T11:08:54.540
> 
> 标签：java, android, osmdroid

在 OSMDROID 网页的主屏幕可以看到信息气泡的使用，但我不知道如何实现这个功能。我在官方文档、互联网和 stackoverflow 中搜索了它是如何做到的，但我没有找到任何东西。

这个功能在库中可用还是只是 OSMViewer 的一部分？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T13:04:20.107

看看这个线程，帖子#5：

[https://groups.google.com/group/osmdroid/browse_frm/thread/262444b24373385b?hl=en#](https://groups.google.com/group/osmdroid/browse_frm/thread/262444b24373385b?hl=en#)

使用这个新库，您可以拥有比相当有限的 ItemizedOverlayWithFocus 更好的“信息窗口”：

[http://code.google.com/p/osmbonuspack/](http://code.google.com/p/osmbonuspack/)

我自己还没有测试过，但看起来不错。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-08T11:29:41.413

查看器程序的源代码位于 Google Code 上，因此您可以看到他们是如何完成所有工作的： [http ://code.google.com/p/osmdroid/source/browse/#svn%2Ftrunk%2FOpenStreetMapViewer](http://code.google.com/p/osmdroid/source/browse/#svn%2Ftrunk%2FOpenStreetMapViewer)

我认为您正在寻找的是 ItemizedOverlayWithFocus，在这里使用： [http ://code.google.com/p/osmdroid/source/browse/trunk/OpenStreetMapViewer/src/org/osmdroid/samples/SampleWithMinimapItemizedoverlayWithFocus.java](http://code.google.com/p/osmdroid/source/browse/trunk/OpenStreetMapViewer/src/org/osmdroid/samples/SampleWithMinimapItemizedoverlayWithFocus.java)

# html - 在画布动画上覆盖 Web 模板

> ID：10947686
> 
> 赞同：0
> 
> 时间：2012-06-08T11:09:00.953
> 
> 标签：html, css, canvas

我有一个动画画布，我试图在它上面覆盖一个响应式 Web 模板，但是 Web 模板只是位于画布的底部而不是它的顶部。我曾尝试更改绝对布局，但这会删除网站的响应方面。

我也尝试添加一个 zindex，但同样没有任何区别，任何朝着正确方向的建议或轻推将不胜感激。

模板链接如下

```
 http://www.redstardigitalmedia.co.uk/blue/index.html 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T14:27:21.393

我使用 chrome 开发工具修改了您的页面，并添加到您的画布元素中：

```
 <canvas id="world" width="1600" height="779" style="
    z-index: -1;
    position: absolute;"> 
```

并到您的页面：

```
<div class="gridContainer clearfix" style="
    position: absolute;
    z-index: 1;"> 
```

而且效果很好（虽然画布动画流畅度可以提高，你用 requestAnimationframe 吗？）

# python - Python：将原始字符串写入文件

> ID：10947690
> 
> 赞同：4
> 
> 时间：2012-06-08T11:09:13.180
> 
> 标签：python

我想用 Python 脚本生成 C 代码，而不必逃避。例如，我尝试过：

```
myFile.write(someString + r'\r\n\') 
```

希望`r`前缀能让事情顺利进行。但是，我仍然收到错误消息：

```
myFile.write(someString + ur'\r\n\')
                                   ^
SyntaxError: EOL while scanning string literal 
```

如何将原始字符串写入 Python 中的文件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-08T11:38:16.663

Python 原始字符串[不能以反斜杠结尾](http://docs.python.org/faq/design.html#why-can-t-raw-strings-r-strings-end-with-a-backslash)。

但是，有一些解决方法。

您可以在字符串末尾添加一个空格：

```
>>> with open("c:\\tmp\\test.txt", "w") as myFile:
...   myFile.write(someString + r'\r\n\ ') 
```

您可能不会为此烦恼，因此这可能是一个解决方案。

假设`someString`是*你好*。

这将写入`Hallo\r\n\_`文件，其中`_`是空格。

如果你不喜欢多余的空间，你可以像这样删除它：

```
>>> with open("c:\\tmp\\test.txt", "w") as myFile:
...   myFile.write(someString + r'\r\n\ '[:-1]) 
```

这将写入`Hallo\r\n\`文件，没有额外的空格，也没有转义反斜杠。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-08T11:31:30.583

你需要转义最后一个`\`，这样它就不会转义字符串的结尾，但是如果你把它作为原始字符串的一部分，它不会得到你想要的东西：

```
>>> r'\r\n\\'
'\\r\\n\\\\' 
```

然而，Python 的字符串文字连接允许您混合原始字符串和普通字符串：

```
>>> r'\r\n' '\\'
'\\r\\n\\' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-08T11:50:21.627

您可以通过 format 方法将原始字符串插入到字符串中。这样可以确保插入原始字符串并进行适当的转义。

例子：

```
mystring = "some string content {0}"
# insert raw string 
mystring = mystring.format(r"\r\n\\")

myfile = open("test.txt", "w")
myfile.write(mystring)
myfile.close() 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-08T11:10:30.157

```
myFile.write(someString + r'\r\n\\') 
```

只是逃避你的字符串^^

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-08T11:13:47.020

没有转义就无法获得任意内容的字符串文字。你总是会遇到问题，因为没有办法例如有“文字结尾字符”，在这种情况下`'`没有转义，因为 Python 无法判断它是字符串文字的结尾还是一部分。

这就是我们一开始就逃跑的全部原因。所以你的问题的答案是：你不能。不在 Python 或任何其他语言中。

# java - java SecretKeyFactory 密码散列不能正常工作

> ID：10947694
> 
> 赞同：1
> 
> 时间：2012-06-08T11:09:32.890
> 
> 标签：java, security, hash, passwords, salt

我有一个 Web 应用程序，我想将密码哈希存储在远程数据库中。我写了一个简单的类，它生成一个密码哈希。有两种公共方法可用： 1\. encrypt - 加密密码并创建散列 2\. checkPassword - 调用 encrypt 以创建散列，然后比较两个散列

我用两个密码检查做了一个简单的测试，一个应该通过，另一个不应该。

有时有效，有时无效。

正确的输出：

```
password: abcdefg, hash: fd9927e15150bd01713115a761d1dea18b7da4aa
password: abcdefg, salt: 3595ac1baff6aa5e0097520593c7ac74
password: abcdefg, hash: fd9927e15150bd01713115a761d1dea18b7da4aa
password: abcdefg, salt: 3595ac1baff6aa5e0097520593c7ac74
passwords: abcdefg and abcdefg matched: true
password: abcdefgh, hash: a64a2958f3999d8ecdeb03326a151e786435ea4
password: abcdefgh, salt: 3595ac1baff6aa5e0097520593c7ac74
passwords: abcdefg and abcdefgh matched: false 
```

错误的输出：

```
password: abcdefg, hash: 4913fe5cdea3346690463f76f73c1336ae976674
password: abcdefg, salt: 8e2aa1ec28d84fbaf78a6df260a7c707
password: abcdefg, hash: 97abd26927bf96076019b932bf6ab5494a8b0979
password: abcdefg, salt: 8e2aa1ec28d84fbaf78a6df260a7c707
passwords: abcdefg and abcdefg matched: false
password: abcdefgh, hash: 70594cd854bd60e07dfe14f72f01aa1f50de9aa2
password: abcdefgh, salt: 8e2aa1ec28d84fbaf78a6df260a7c707
passwords: abcdefg and abcdefgh matched: false 
```

资源：

```
import java.math.BigInteger;
import java.security.NoSuchAlgorithmException;
import java.security.spec.InvalidKeySpecException;
import java.security.spec.KeySpec;
import java.util.Random;

import javax.crypto.SecretKeyFactory;
import javax.crypto.spec.PBEKeySpec;

public class CryptoUtils {

    /***************************************************************************
    * @param password
    * 
    * @return String[2] { hashed password, salt }
    * 
    * @throws NoSuchAlgorithmException
    * @throws InvalidKeySpecException
    ***************************************************************************/
    public static String[] encrypt(String password) throws NoSuchAlgorithmException, InvalidKeySpecException {
        byte[] salt = new byte[16];
        new Random().nextBytes(salt);

        return encrypt(password, salt);
    }

    private static String[] encrypt(String password, byte[] salt) throws NoSuchAlgorithmException, InvalidKeySpecException {
        KeySpec spec = new PBEKeySpec(password.toCharArray(), salt, 2048, 160);
        SecretKeyFactory f = SecretKeyFactory.getInstance("PBKDF2WithHmacSHA1");
        byte[] hash = f.generateSecret(spec).getEncoded();

        String passHash = new BigInteger(1, hash).toString(16);
        String saltString = new BigInteger(1, salt).toString(16);

        System.out.println("password: " + password + ", hash: " + passHash);// DEBUG
        System.out.println("password: " + password + ", salt: " + saltString);

        return new String[] { passHash, saltString };
    }

    public static boolean checkPassword(String password, String hash, String salt) throws NoSuchAlgorithmException, InvalidKeySpecException {
        String[] encrypted = encrypt(password, new BigInteger(salt, 16).toByteArray());

        return encrypted[0].equals(hash);
    }

    public static void main(String[] args) throws NoSuchAlgorithmException, InvalidKeySpecException {
        String pass1 = "abcdefg";
        String pass2 = pass1;
        String pass3 = pass1 + "h";

        String[] result = encrypt(pass1);
        String hash = result[0];
        String salt = result[1];

        System.out.println("passwords: " + pass1 + " and " + pass2 + " matched: " + checkPassword(pass2, hash, salt));
        System.out.println("passwords: " + pass1 + " and " + pass3 + " matched: " + checkPassword(pass3, hash, salt));
    }
} 
```

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T12:13:08.473

问题是您使用 BigInteger 将盐字符串转换为字节。如果您的盐字符串是负数并且不以零位开头，则此代码有效。如果你的盐字符串是正数，BigInteger.toByteArray() 必须通过在开头再添加一个零字节来进行符号扩展，因此它的长度为 17 个字节。此外，如果您的盐字符串的最高字节为零，则 BigInteger.toByteArray() 不需要 16 个字节来表示它，因此您的盐再次以错误的长度结束。您可能可以编写逻辑来重新格式化 BigInteger 的输出以始终包含 16 个字节，但一次简单地解析输入字符串两个字符可能更容易，自己将字节值添加到数组中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T12:50:38.490

问题在于字符串到字节数组和反向转换。现在我使用 Base64.encode() 和 Base64.decode() 方法并且它有效。

```
import java.security.NoSuchAlgorithmException;
import java.security.spec.InvalidKeySpecException;
import java.security.spec.KeySpec;
import java.util.Random;

import javax.crypto.SecretKeyFactory;
import javax.crypto.spec.PBEKeySpec;

import com.sun.org.apache.xerces.internal.impl.dv.util.Base64;

public class CryptoUtils {

    /***************************************************************************
    * @param password
    * 
    * @return String[2] { hashed password, salt }
    * 
    * @throws NoSuchAlgorithmException
    * @throws InvalidKeySpecException
    ***************************************************************************/
    public static String[] encrypt(String password) throws NoSuchAlgorithmException, InvalidKeySpecException {
        byte[] salt = new byte[16];
        new Random().nextBytes(salt);

        return encrypt(password, salt);
    }

    private static String[] encrypt(String password, byte[] salt) throws NoSuchAlgorithmException, InvalidKeySpecException {
        KeySpec spec = new PBEKeySpec(password.toCharArray(), salt, 2048, 160);
        SecretKeyFactory f = SecretKeyFactory.getInstance("PBKDF2WithHmacSHA1");
        byte[] hash = f.generateSecret(spec).getEncoded();

        String passHash = Base64.encode(hash);
        String saltString = Base64.encode(salt);

        System.out.println("password: " + password + ", hash: " + passHash);// DEBUG
        System.out.println("password: " + password + ", salt: " + saltString);

        return new String[] { passHash, saltString };
    }

    public static boolean checkPassword(String password, String hash, String salt) throws NoSuchAlgorithmException, InvalidKeySpecException {
        String[] encrypted = encrypt(password, Base64.decode(salt));

        return encrypted[0].equals(hash);
    }

    public static void main(String[] args) throws NoSuchAlgorithmException, InvalidKeySpecException {
        String pass1 = "abcdefg";
        String pass2 = pass1;
        String pass3 = pass1 + "h";

        String[] result = encrypt(pass1);
        String hash = result[0];
        String salt = result[1];

        System.out.println("passwords: " + pass1 + " and " + pass2 + " matched: " + checkPassword(pass2, hash, salt));
        System.out.println("passwords: " + pass1 + " and " + pass3 + " matched: " + checkPassword(pass3, hash, salt));
    }
} 
```

# php - 如果浏览器 cookie 被禁用，则无法登录

> ID：10947696
> 
> 赞同：0
> 
> 时间：2012-06-08T11:09:45.433
> 
> 标签：php, cookies, browser, silverstripe

我正在使用 SilverStripe PHP 框架，其中有一些登录面板。我的问题是当我在浏览器中禁用 cookie 时，我无法登录。我可以在登录时转义 cookie 吗？或者有没有其他解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T18:52:43.633

One solution would be not using cookie at all and instead turning the

```
session.use_only_cookies to "0" 
```

forcing to append session id to urls. This has a potential drawbacks some one getting the url can hack in to others session. Also any change in the state will be appended to url.

# c# - System.Threading.ThreadPool.SetMaxThreads 的默认值

> ID：10947700
> 
> 赞同：24
> 
> 时间：2012-06-08T11:09:49.503
> 
> 标签：c#, .net, default, threadpool

假设，我没有通过调用函数显式设置任何值：

```
System.Threading.ThreadPool.SetMaxThreads 
```

默认值是多少？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-06-08T11:43:58.317

它取决于 .NET 框架版本，在 2.0、3.0 和 4.0 中进行了更改。在 2.0 中，它是内核数量的 50 倍。在 3.0（又名 2.0 SP1）中，它是内核数量的 250 倍，而 4.0 使其动态取决于位数和操作系统资源。如果我没记错的话，最大 I/O 完成线程总是 1000。

一般来说，它非常高，程序*永远不*应该接近。在 32 位机器上，当所有这些线程使用它们的 1 兆字节堆栈消耗可用的虚拟内存时，该程序很可能首先使用 OOM 进行轰炸。*一般来说，只有当 TP 线程请求很多并且运行的线程数分钟*都没有完成时，它才会失控。TP 线程的理想状态是不超过半秒。

Debug > Windows > Threads 调试器窗口说出了令人不快的事实。并且很好地提示了为什么这些 TP 线程没有完成，你可以看到它们的调用堆栈。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-08T11:14:41.233

> 每个进程有一个线程池。从 .NET Framework 版本 4 开始，进程的线程池的默认大小取决于几个因素，例如虚拟地址空间的大小。进程可以调用 GetMaxThreads 方法来确定线程数。可以使用 SetMaxThreads 方法更改线程池中的线程数。每个线程使用默认堆栈大小并以默认优先级运行。块引用
> 
> 托管 .NET Framework 的非托管代码可以使用在 mscoree.h 文件中定义的 CorSetMaxThreads 函数来更改线程池的大小。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-08T11:12:13.013

它不是一个固定数字，它取决于可用内存和其他因素 - 您可以在运行时使用`GetMaxThreads()`

# javascript - 使用 javascript 从谷歌电子表格中获取 JSON

> ID：10947702
> 
> 赞同：1
> 
> 时间：2012-06-08T11:09:54.153
> 
> 标签：javascript, google-app-engine, oauth-2.0, google-spreadsheet-api

我想从谷歌电子表格中获取 JSON，我搜索了几个链接，但找不到确切的解决方案。

有人可以帮我解决问题。

[https://developers.google.com/gdata/docs/json](https://developers.google.com/gdata/docs/json)
[http://www.mail-archive.com/google-help-dataapi@googlegroups.com/msg01924.html](http://www.mail-archive.com/google-help-dataapi@googlegroups.com/msg01924.html)
[http://code.google.com/ apis/gdata/docs/js.html](http://code.google.com/apis/gdata/docs/js.html)
[http://code.google.com/apis/spreadsheets/gadgets/](http://code.google.com/apis/spreadsheets/gadgets/)
[http://code.google.com/apis/documents/docs/3.0developers_guide_protocol.html#UploadingDocs](http://code.google.com/apis/documents/docs/3.0developers_guide_protocol.html#UploadingDocs)

问候
阿努普·辛格

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T07:14:30.397

有点晚了，但这是工作流程：

[如果您的电子表格是私有的，请参阅此处](https://stackoverflow.com/questions/14238935/google-spreadsheets-api-with-oauth2-0-using-javascript)的答案以获得正确的 OAuth 授权。

您可以通过转到 Google Drive 并查看您的电子表格来找到您的电子表格密钥。url 中是字符串“key=xxxx”。'xxxx' 是您的电子表格密钥。

然后只需执行以下操作：

```
var token = gapi.auth.getToken().access_token;
var urlLocation = ''; //put the spreadsheet key here
var url = 'https://spreadsheets.google.com/feeds/list/' + urlLocation + '/od6/private/full?alt=json-in-script&access_token=' + token + '&callback=?';

$.getJSON(url, function(data) {
    console.log(data);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T04:41:58.923

[https://developers.google.com/gdata/samples/spreadsheet_sample](https://developers.google.com/gdata/samples/spreadsheet_sample)

这是一个例子。

请注意，此 JSON 仅适用于[“已发布”](https://developers.google.com/google-apps/spreadsheets/#spreadsheets_api_urls_visibilities_and_projections)电子表格。

# php - 无法绑定多部分标识符

> ID：10947706
> 
> 赞同：0
> 
> 时间：2012-06-08T11:10:14.713
> 
> 标签：php, sql-server

```
$query = "SELECT cc.countryCode, m.stfMode 
          FROM test t LEFT JOIN countryCode cc ON t.idcountryCode=cc.idcountryCode LEFT JOIN mode m ON t.idmode=m.idmode 
          WHERE t.idtest=".$idtest; 
```

当我执行上述查询时，我收到以下错误

> 警告：mssql_query()：消息：无法绑定多部分标识符“.countryCode”。

请帮忙....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T11:53:26.607

在您的查询 `countryCode`中用于表名​​和该表中的列。请更改表名或`countryCode`表的列名

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T11:15:15.980

使用`Select cc.idcountryCode` 代替`SELECT cc.countryCode`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T12:38:16.487

您的 SQL 应如下所示

```
SELECT 
cc.idcountryCode, m.stfMode 
FROM test t 
LEFT JOIN countryCode cc 
ON t.idcountryCode=cc.idcountryCode 
LEFT JOIN mode m ON t.idmode=m.idmode 

WHERE t.idtest 
```

# sql-server - 动态连接字符串的“数据源”参数需要计算机名

> ID：10947711
> 
> 赞同：0
> 
> 时间：2012-06-08T11:10:23.327
> 
> 标签：sql-server, vb.net, dynamic, connection-string

我们将更改 Settings.vb 中的连接字符串，因此当我们的应用程序在不同于开发计算机的其他计算机上运行时，我们无需担心它是什么。

我们的代码如下所示：

```
Partial Friend NotInheritable Class MySettings

    Dim strComputerName As String
    Dim strConnectionString As String

    Private Sub MySettings_SettingsLoaded(ByVal sender As Object, ByVal e As System.Configuration.SettingsLoadedEventArgs) Handles Me.SettingsLoaded

        '  strComputerName = 

        ' Build a new construction string.
        '---------------------------------
        strConnectionString = "Data Source=" & strComputerName & "\sqlexpress" & _
                              ";Integrated Security=True;User Instance=True"

        ' Change to the new connection string.
        '-------------------------------------
        Me.Item("Kemal_Business_SolutionConnectionString") = (strConnectionString)
    End Sub
End Class 
```

您能告诉我如何获取计算机名称，因为我们需要将该信息放入连接字符串的“数据源”部分吗？

更新：这是最终编码的样子。谢谢各位的回应：

```
Partial Friend NotInheritable Class MySettings

    Dim strComputerName As String
    Dim strConnectionString As String

    Private Sub MySettings_SettingsLoaded(ByVal sender As Object, ByVal e As System.Configuration.SettingsLoadedEventArgs) Handles Me.SettingsLoaded

        strComputerName = Environment.MachineName
        'strComputerName = My.Computer.Name

        ' Build a new construction string.
        '---------------------------------
        strConnectionString = "Data Source=" & strComputerName & "\sqlexpress;" & _
                              "Initial Catalog=""Kemal Business Solution"";" & _
                              "Integrated Security=True"

        ' Change to the new connection string.
        '-------------------------------------
        Me.Item("Kemal_Business_SolutionConnectionString") = (strConnectionString)
    End Sub
End Class 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T11:19:03.623

或者更加神秘。

```
strComputerName = Environment.MachineName 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T11:14:52.350

由于您使用的是 VB.net，因此您可以访问`My`命名空间，这使得这非常容易。

```
strComputerName = My.Computer.Name 
```

任务完成。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-08T11:44:21.243

您也可以尝试以下任何一种代码行。这里`Data Source=.;`表示来自本地计算机的数据库

```
strConnectionString = "Data Source=.\sqlexpress;Integrated Security=True;User Instance=True" 
```

- 或者 -

```
strConnectionString = "Data Source=.;Integrated Security=True;User Instance=True" 
```

# c# - 计算实验室信息系统 (LIS) 帧的校验和

> ID：10947717
> 
> 赞同：15
> 
> 时间：2012-06-08T11:10:55.457
> 
> 标签：c#, checksum

我正在为[实验室信息系统](https://www.limswiki.org/index.php/Laboratory_information_system)开发仪器驱动程序。我想知道如何计算帧的校验和。

校验和算法说明：

> 1.  用字符 [0-9] 和 [AF] 表示。
>     
>     
> 2.  从 [STX] 之后的字符开始到 [ETB] 或 [ETX]（包括 [ETB] 或 [ETX]）的字符以二进制形式添加。
>     
>     
> 3.  代表十六进制代码中最低有效 8 位的 2 位数字被转换为 ASCII 字符 [0-9] 和 [AF]。
>     
>     
> 4.  最高有效位存储在 CHK1 中，最低有效位存储在 CHK2 中。

我没有得到上面的第 3 点和第 4 点。

这是一个示例框架：

```
<STX>2Q|1|2^1||||20011001153000<CR><ETX><CHK1><CHK2><CR><LF> 
```

`CHK1`和的值是`CHK2`多少？如何在 C# 中实现给定的算法？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-07-02T12:14:24.993

最后我得到了答案，这里是计算校验和的代码：

```
private string CalculateChecksum(string dataToCalculate)
{
    byte[] byteToCalculate = Encoding.ASCII.GetBytes(dataToCalculate);
    int checksum = 0;
    foreach (byte chData in byteToCalculate)
    {
        checksum += chData;
    }
    checksum &= 0xff;
    return checksum.ToString("X2");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-10-29T22:53:00.477

您可以在一行中执行此操作：

```
return Encoding.ASCII.GetBytes(dataToCalculate).Aggregate((r, n) => r += n).ToString("X2"); 
```

* * *

## 回答 #3

> 赞同：-4
> 
> 时间：2015-06-11T07:34:59.220

```
private bool CheckChecksum(string data)
{
   bool isValid =false

   byte[] byteToCalculate = Encoding.ASCII.GetBytes(dataToCalculate);
   int checkSum = 0;
   for ( int i=i i<byteToCalculate.Length;i++)
   {
      checkSum += byteToCalculate[i];
   }
   checksum &= 0xff;

  if (checksum == byteToCalculate[ChecksumPlace]
  {
   return true
  }
  else
  {
  return  false
  }
} 
```

# sharepoint - Sharepoint 网络表单提交感谢消息问题

> ID：10947718
> 
> 赞同：0
> 
> 时间：2012-06-08T11:10:57.523
> 
> 标签：sharepoint, sharepoint-2010, webforms, page-lifecycle

我有一个包含简单 Web 表单的 Web 部件。提交 Web 表单后，用户会看到感谢或错误消息。

它位于代码后面`Click_event`：

```
lblMessage.Text = "Your Profile Details were updated successfully"; 
```

以及 asxc 文件中的代码：

```
<asp:Label ID="lblMessage" runat="server" Text=""></asp:Label> 
```

问题是刷新页面后消息不会消失。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T21:10:09.340

当您按 F5 时，这会将页面刷新到其原始状态，其中标签没有您显示的任何文本。您的标签拥有该文本的唯一方法是通过按钮单击事件。

> 看起来您需要阅读有关页面生命周期和视图状态的一些信息：
> 
> [http://rameshsps2010.blogspot.com/2011/06/sp-and-aspnet-page-life-cycle.html](http://rameshsps2010.blogspot.com/2011/06/sp-and-aspnet-page-life-cycle.html)
> 
> [http://nishantrana.wordpress.com/2009/02/14/understanding-web-part-life-cycle/](http://nishantrana.wordpress.com/2009/02/14/understanding-web-part-life-cycle/)
> 
> [http://www.sharepointdotnet.com/2012/02/page-lifecycle-events-in-aspnet.html](http://www.sharepointdotnet.com/2012/02/page-lifecycle-events-in-aspnet.html)

# php - 计算投票

> ID：10947719
> 
> 赞同：0
> 
> 时间：2012-06-08T11:10:58.677
> 
> 标签：php, mysql

我在我的网站上获得了一项民意调查和 5 星评级：

```
1 star - 1 (worst)
2 stars - 2
3 stars - 3
4 stars - 4
5 stars - 5 (best) 
```

现在，我应该如何将投票记录存储在 MySQL 中？如何计算它们？默认评分值为 5，但如果用户将其评分为 1 星，则应将此值更改为 1，然后开始以某种方式计算它...首先我需要了解如何将投票存储在我的数据库中。你可能有更多的经验。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T11:18:52.203

将投票存储在单独的表格中，这样您就可以记录谁投票了。

`user_id, topic_id , vote, date`现在就足够了。计算很容易将所有投票除以与该主题相关的投票总数。这会给你平均值。如果您希望它显示为 1-5，则可以`round()`。为了在每次加载主题时不进行此计算，您可以将其存储在主题表中的字段中，并在每次从投票表中添加/删除记录时更新该字段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T11:16:39.750

只需将投票存储在表格中的整数字段（1 到 5）中，并结合其他信息（例如，确保用户只能投票一次）。

当您想显示结果时，您可以使用投票，例如计算平均值或其他统计数据。在每次投票后重新计算（和存储）统计数据也是可能的，但不是真正需要的，除非您的页面浏览量比投票数多得多，否则可能会导致资源使用量减少。（这当然也取决于你的静态计算的复杂性）

# bash - 在 Bash 中连接字符串、文件和程序输出

> ID：10947722
> 
> 赞同：23
> 
> 时间：2012-06-08T11:11:02.157
> 
> 标签：bash, concatenation, stdout

在我的例子中，用例是 CSS 文件连接，在它被最小化之前。连接两个 CSS 文件：

```
cat 1.css 2.css > out.css 
```

*要在一个*位置添加一些文本，我可以这样做

```
cat 1.css <<SOMESTUFF 2.css > out.css
This will end in the middle.
SOMESTUFF 
```

要从另一个程序添加*STDOUT*：

```
sed 's/foo/bar/g' 3.css | cat 1.css - 2.css > out.css 
```

到目前为止，一切都很好。但是我经常遇到需要将*多个*字符串、文件甚至程序输出混合在一起的情况，例如版权标题、预处理的文件`sed(1)`等等。我想以尽可能少的步骤和临时文件将它们连接在一起，同时可以自由选择顺序。

简而言之，我正在寻找一种在 Bash 中以尽可能少的步骤执行此操作的方法：

```
command [string|file|output]+ > concatenated
# note the plus ;-) --------^ 
```

（基本上，`cat`我想拥有一个处理多个 STDIN 就足够了，比如

```
<(echo "FOO") <(sed ...) <(echo "BAR") cat 1.css -echo1- -sed- 2.css -echo2- 
```

但我看不到，我如何才能访问这些。）

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-06-08T11:29:27.947

这有效：

```
cat 1.css <(echo "FOO") <(sed ...) 2.css <(echo "BAR") 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-06-08T11:16:04.130

你可以做：

```
echo "$(command 1)" "$(command 2)" ... "$(command n)" > outputFile 
```

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2012-06-08T11:19:37.810

您可以在子shell 中添加所有命令，该子shell 被重定向到一个文件：

```
(
    cat 1.css
    echo "FOO"
    sed ...
    echo BAR
    cat 2.css
) > output 
```

您还可以附加到带有`>>`. 例如：

```
cat 1.css  >  output
echo "FOO" >> output
sed ...    >> output
echo "BAR" >> output 
cat 2.css  >> output 
```

（这可能会重复打开和关闭文件）

# java - 在 websphere 本地信任库中添加证书；以编程方式

> ID：10947724
> 
> 赞同：2
> 
> 时间：2012-06-08T11:11:10.350
> 
> 标签：java, security, certificate, websphere

我正在使用 websphere 7。可以将其管理控制台证书添加到信任库。

```
Security->SSL certificate and key management->Key stores and certificates-> NodeDefaultTrustStore-> Signer certificates 
```

我想通过 Java 代码以**编程方式添加它。**如何使用 Java 在该商店中添加和删除它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T17:32:28.727

伊姆兰，

看看是否可以使用 wsadmin 实用程序自动老化证书，最好让 websphere 管理该信任存储

[http://pic.dhe.ibm.com/infocenter/wasinfo/v7r0/index.jsp?topic=%2Fcom.ibm.websphere.express.doc%2Finfo%2Fexp%2Fae%2Frxml_atsignercert.html](http://pic.dhe.ibm.com/infocenter/wasinfo/v7r0/index.jsp?topic=/com.ibm.websphere.express.doc/info/exp/ae/rxml_atsignercert.html)

谢谢，暗淡

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-02-11T02:14:07.537

这是一个从 URL 获取的工作示例：

```
wsadmin.bat -conntype SOAP -port 8881 -host localhost -username localwsadmin -password Mypass123 -lang jython -c "AdminTask.retrieveSignerFromPort('-host smtp.office365.com -port 995 -keyStoreName NodeDefaultTrustStore -certificateAlias MSO365cert')" 
```

像这样从文件中添加：

```
AdminTask.addSignerCertificate('[-keyStoreName NodeDefaultTrustStore -certificateAlias
default -certificateFilePath <file path> -base64Encoded true]') 
```

也可以通过 GUI iKeyman 或 Java CMD **keytool.exe** (C:\IBM\WebSphere\AppServer\java\bin\keytool.exe)完成

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T11:40:44.270

[此代码示例](http://code.google.com/p/java-use-examples/source/browse/trunk/src/com/aw/ad/util/InstallCert.java)可以帮助您做到这一点。它从 URL 获取证书并将其存储在密钥库中。

编辑：

另外，看看[KeyStore](http://docs.oracle.com/javase/6/docs/api/java/security/KeyStore.html)类。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-20T05:43:43.777

无法通过 Java 代码以编程方式在 Websphere 中添加信任库。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-08-14T14:54:03.637

您可以做的一件事，如果可以通过“Web”界面（即通过 HTML/等页面）来完成，那么您可以通过某种方式来完成。

看看[Selenium HQ](http://www.seleniumhq.org/)。我认为它可能对你有用。

# gwt - gwt - java.lang.NoClassDefFoundError: com/google/gwt/dev/js/JsKeywords

> ID：10947726
> 
> 赞同：0
> 
> 时间：2012-06-08T11:11:36.103
> 
> 标签：gwt

我正在尝试编译 gwt 模块。产生这个错误，env有gwt-log-3.1.8和gwtsdk-2.4.0。知道为什么会这样。它在不同的项目中使用了早期的工作。

错误 ：

[java] 加载继承模块 'com.allen_sauer.gwt.log.gwt-log-OFF' [java] 加载继承模块 'com.allen_sauer.gwt.log.gwt-log-impl' [java] [ERROR] 第 87 行：处理元素“property-provider”[java] java.lang.NoClassDefFoundError：com.google.gwt.dev.js.ast.JsScope.maybeMangleKeyword 处的 com/google/gwt/dev/js/JsKeywords [java] 时出现意外异常(JsScope.java:56) [java] 在 com.google.gwt.dev.js.ast.JsScope.declareName(JsScope.java:75) [java] 在 com.google.gwt.dev.js.JsParser.mapVar (JsParser.java:1229) [java] 在 com.google.gwt.dev.js.JsParser.map(JsParser.java:324) [java] 在 com.google.gwt.dev.js.JsParser.mapStatement(JsParser .java:1026) [java] 在 com.google.gwt.dev.js.JsParser.mapStatements(JsParser.java:1046) [java] 在 com.google.gwt.dev.js.JsParser.mapBlock(JsParser.java:442) [java] 在 com.google.gwt.dev.js.JsParser.mapFunction(JsParser.java:718) [java] 在 com.google.gwt.dev.js.JsParser.map(JsParser.java:296)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T12:01:56.047

JsKeywords 类是 gwt-dev.jar 的一部分。确保这个 jar 在类路径中。

# delphi - 自动化不同本地化版本的 Excel 时如何正确设置 NumberFormat 属性

> ID：10947727
> 
> 赞同：3
> 
> 时间：2012-06-08T11:11:36.960
> 
> 标签：delphi, excel, automation, ole, number-formatting

我遇到了以下问题：

当通过我的 Delphi 程序中的 OLE 自动化 Excel 并尝试设置单元格的 NumberFormat 属性时，Excel 需要本地化格式的格式字符串。

通常，当通过在 Excel 中记录宏来检查格式时，Excel 期望它是这样的： Cells(1, 2).NumberFormat = "#,##0.00"

这意味着千位分隔符是“，”，小数点分隔符是“.”。

实际上，我使用的是本地化版本的 Excel。在我的语言环境中，千位分隔符是“”，小数点分隔符是“，”。

因此，每当从我的 Delphi 程序中设置 NumberFormat 时，我都需要将其指定为“###0,00”。

**我的问题是：**显然，如果我在我的程序中对这些值进行硬编码，那么当我的程序与英语或其他不同本地化版本的 Excel 一起使用时，就会出现异常。是否有设置 NumberFormat 属性的“通用”方法？（使用默认的英语语言环境？）

谢谢！

**更新：**我在此页面上找到了一种更优雅的方法：http: [//www.delphikingdom.com/asp/viewitem.asp?catalogid=920](http://www.delphikingdom.com/asp/viewitem.asp?catalogid=920&mode=print) &mode=print 它是俄语（我也不会说）但是你可以很容易地理解代码。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-08T11:46:07.163

在 Excel 中，您有两个字段：

*   数字格式

*   数字格式本地

NumberFormat 采用美国标准中始终使用区域设置不变的格式，而 NumberFormatLocal 需要具有设置区域设置的格式。

例如

```
Sub test()
    Dim r As Range
    Set r = ActiveWorkbook.ActiveSheet.Range("$A$1")
    r.NumberFormat = "#,##0.00"
    Set r = ActiveWorkbook.ActiveSheet.Range("$A$2")
    r.NumberFormat = "#.##0,00"
    Set r = ActiveWorkbook.ActiveSheet.Range("$A$3")
    r.NumberFormatLocal = "#,##0.00"
    Set r = ActiveWorkbook.ActiveSheet.Range("$A$4")
    r.NumberFormatLocal = "#.##0,00"       
End Sub 
```

使用德语设置（十进制 sep: 和千位 sep: .）为 $A$1 和 $A$4 提供正确格式的数字。如果您将 Windows 中的区域设置更改为您喜欢的任何内容，您可以对其进行测试，如果您的格式正常，您可以尝试。

假设您使用 Delphi 5 并且有这样的代码来启动 Excel（并且可以访问 ComObj.pas）：

```
var
  oXL, oWB, oSheet : Variant;
 LocaleId : Integer;
begin
 oXL := CreateOleObject('Excel.Application');
 oXL.Visible := True;
 oWB := oXL.Workbooks.Add;
 oSheet := oWB.ActiveSheet;
 oSheet.Range['$A$1'].NumberFormatLocal := '#.##0,00';
 oSheet.Range['$A$2'].NumberFormatLocal := '#,##0.00';
 LocaleID:= DispCallLocaleID($0409);
 try
    oSheet.Range['$A$3'].NumberFormat := '#.##0,00';
    oSheet.Range['$A$4'].NumberFormat := '#,##0.00';
 finally
    DispCallLocaleId( LocaleId);
 end;
end; 
```

然后默认情况下，每个调用都通过调用 ComObj.DispatchInvoke 的 ComObj.VarDispInvoke。在那里，您可以找到对 Dispatch.Invoke 的调用，该调用将 lcid 作为第三个参数。这设置为 0。您可以使用注释中第一个链接中显示的技术来创建您自己的单元并将所有代码从 ComObj 复制到您自己的单元（或直接修改 ComObj）。只是不要忘记在单元的初始化中设置 VarDispProc 变量。最后一部分似乎并非在所有情况下都有效（可能取决于模块的顺序），但您可以在代码中设置变量：

```
 VarDispProc := @VarDispInvoke; 
```

您必须将 VarDispInvoke 放入 ComObj 复制模块的接口部分。第一个链接的代码不能直接工作，因为它修改了上述 Delphi 示例中未调用的不同方法。
更改 numberformat 调用的语言环境就足够了（以避免副作用）。
上面的示例以及所描述的修改适用于我的德语 excel 正确。如果没有修改或调用 DispCallLocaleId，我会看到与您描述的相同的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-04-12T08:00:35.830

***您可以让 excel 管理此选项以避免在其他系统中的差异：***

```
.....NumberFormat :='#'+Excel.ThousandsSeparator+'##0'+Excel.DecimalSeparator+'00'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-08-08T13:15:59.063

也可以直接设置属性值

```
 SetDispatchPropValue(oSheet, 
     'Range['$A$1'].NumberFormatLocal',$0409); 
```

# c# - C# - 使用 HTMLAgilityPack 将节点转换为字符串

> ID：10947728
> 
> 赞同：1
> 
> 时间：2012-06-08T11:11:39.280
> 
> 标签：c#, html-agility-pack, dom, selectsinglenode

我正在尝试将选定的跨度标记的内部文本转换为字符串。

```
<span id="course-text">ELEC1700/ELEC1700 2012 S1: Computer Engineering 1</span> 
```

所以上面会变成：“ELEC1700/ELEC1700 2012 S1: Computer Engineering 1”

我已经尝试了几种使用 innerText 和 getAttributes 的组合，但我无法让它工作。

```
string name;

WebClient client = new WebClient();

HtmlAgilityPack.HtmlDocument htmlDoc = new HtmlAgilityPack.HtmlDocument();

htmlDoc.Load(new System.IO.StringReader(client.DownloadString(urlTxtBx.Text)));

name = htmlDoc.DocumentNode.SelectSingleNode("//span[@id='course-text']").InnerText; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T11:36:35.243

我错过了 urlTxtBx.Text 上的 client.DownloadString。

上面的代码现在可以正常工作了:)

# python - Python：从实例中删除成员

> ID：10947738
> 
> 赞同：1
> 
> 时间：2012-06-08T11:12:13.997
> 
> 标签：python, reflection

`__dict__`我在运行时使用该属性将可调用对象添加到 A 类的实例中。在某些时候，虽然我想从我的实例中删除所有添加的对象。我考虑过将初始`__dict__`属性存储在一个成员中`_orgDict`，然后再执行`self.__dict__ = self._orgDict`。我想知道是否：

*   这有效吗？
*   删除的对象真的被删除了还是不再包含在我的实例中？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-08T11:27:49.043

你的意思是[del](http://docs.python.org/tutorial/datastructures.html#the-del-statement)语句？

```
del(instance.attribute) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T11:42:35.447

快速测试表明重新分配实例`__dict__`似乎有效：

```
>>> class B(object): 
       pass
>>> b = B()
>>> b.b = 6
>>> b.b
6
>>> b.__dict__ = {}
>>> b.b
Traceback (most recent call last):
  File "<pyshell#57>", line 1, in <module>
    b.b
AttributeError: 'B' object has no attribute 'b' 
```

但是，我不确定这是否得到保证，或者它是否恰好起作用。特别是在支持非 C Python 方面，您可能需要小心。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T12:21:56.937

是的。可以通过赋值覆盖（删除）对象。这是示例。

```
>>> class callable_objects:
    def __init__(self, name, fame=None):
        self.name = name
            self.fame = fame
        def _name(self):
            if self.name[0] in ["a","b","c","d","e"]:
                self._fame("1")
            else:
                self._fame("2")
        def _fame(self, ifame):
            if ifame == "1":
                print "Ur fame is bad"
            else:
                print "Ur fame is very bad"

>>> c = callable_objects("ameet")
>>> callable_objects.__dict__ 
{'__module__': '__main__', '_fame': <function _fame at 0x02B5C370>, '__doc__': None, '__init__': <function __init__ at 0x02B5C330>, '_name': <function _name at 0x02B5C2F0>}
>>> c.__dict__
{'name': 'ameet', 'fame': None}
>>> callable_objects.__dict__ = c.__dict__
>>> callable_objects.__dict__
{'name': 'ameet', 'fame': None} 
```

# facebook - Facebook 帖子上的 Flex SWF 应用程序无法与 Chrome 和资源管理器的后端通信

> ID：10947739
> 
> 赞同：0
> 
> 时间：2012-06-08T11:12:25.307
> 
> 标签：facebook, apache-flex, flash

我开发了一个简单的 Flex 应用程序，允许 Facebook 用户录制音频。此应用程序作为 SWF 视频发布在 facebook 帖子中（使用 facebook 帖子上的“source”参数）。我的 SWF 与 CMS 后端通信以接收一些参数，并在通过 Flash 播放器在本地录制音频文件后上传音频文件。该应用程序在 Firefox 上运行正常，它可以毫无问题地与 CMS 通信，但它不能使用 Explorer 或 Chrome 浏览器进行通信。有什么建议吗？

另一个重要的一点：应用程序可以直接在 Explorer 或 Chrome 上访问它（无需通过 Facebook 帖子加载），所以问题只是通过 Facebook 帖子访问它时。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T11:24:27.823

请参阅此处的文档：[https](https://developers.facebook.com/docs/feed-gaming/) ://developers.facebook.com/docs/feed-gaming/ 我有理由确定您无法回调服务器，您需要通过 URL 参数配置 SWF

# mysql - MySQL 错误 1064：存储过程

> ID：10947741
> 
> 赞同：0
> 
> 时间：2012-06-08T11:12:32.077
> 
> 标签：mysql, mysql-error-1064

谢谢，这是工作

它在这 2 行：

```
SET valueName = CONCAT(valueName, ' ,', _valueSplit);
SET valueValue = CONCAT(valueValue,' ,', json(_entryData, _valueSplit)); 
```

我已经声明了变量，但是在 NULL 所以 CONCAT 返回 NULL 并且查询继续 NULL 到

感谢德瓦特帮助我

* * *

## 帖子：

当我尝试使用我的存储过程时出现此错误

```
call _extract() Error Code: 1064\. You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'NULL' at line 1 
```

但我在我的程序中看不到任何东西，但上面没有指令 NULL

```
CREATE PROCEDURE _extract()
BEGIN
    DECLARE _entryType VARCHAR(45);
    DECLARE _entryData VARCHAR(1024);
    DECLARE _entryTime BIGINT(20);

    DECLARE no_more_rows BOOLEAN;
    DECLARE num_rows INT DEFAULT 0;

    DECLARE entryCursor CURSOR FOR SELECT entryValue, entryTime FROM TrackingEntry;
    DECLARE CONTINUE HANDLER FOR NOT FOUND SET no_more_rows = TRUE;

    OPEN entryCursor;
    select FOUND_ROWS() into num_rows;

    mainLoop: LOOP

        FETCH entryCursor INTO _entryData, _entryTime;

        IF no_more_rows THEN
            CLOSE entryCursor;
            LEAVE mainLoop;
        END IF;

        SET _entryType = json(_entryData, "type");
        CALL split_string(json(_entryData, "data"), ",");
        CALL _extractJson(_entryType, _entryData);

    END LOOP mainLoop;
END$$ 
```

_extractJson 程序：下一部分数据的提取

```
CREATE PROCEDURE _extractJson(`_entryType` VARCHAR(255))
BEGIN

    DECLARE _valueSplit VARCHAR(255);

    DECLARE valueName VARCHAR(255);
    DECLARE valueValue VARCHAR(255);

    DECLARE split_no_more_rows BOOLEAN;
    DECLARE split_num_rows INT DEFAULT 0;

    DECLARE splitCursor CURSOR FOR SELECT SQL_CALC_FOUND_ROWS _value FROM SplitValues;
    DECLARE CONTINUE HANDLER FOR NOT FOUND SET split_no_more_rows = TRUE;

    OPEN splitCursor;
    select FOUND_ROWS() into split_num_rows;
    dataLoop: LOOP
        FETCH splitCursor INTO _valueSplit;
        IF split_no_more_rows THEN
            CLOSE splitCursor;
            LEAVE dataLoop;
        END IF;

        SET valueName = CONCAT(valueName, ' ,', _valueSplit);
        SET valueValue = CONCAT(valueValue,' ,', json(_entryData, _valueSplit));

    END LOOP dataLoop;
    SET @query = CONCAT('INSERT INTO ',_entryType, ' (',valueName,') VALUES (',valueValue,')' );
    PREPARE stmt FROM @query;
    EXECUTE stmt;
    DEALLOCATE PREPARE stmt;
    --end stuffs here
END$$ 
```

解释我想做什么

一些数据存储在 trackingEntry 中，每一行都包含有关用户做什么（在社交游戏中）和他来自哪里（动作、引荐来源和其他一些值）的信息

这些数据以 Json 格式存储：{“type”：“tableName”，“data”：“row1,row2,row3”，“row1”：“value”，“row2”：“value”，“row3 “ ： “价值” }

数据的类型（操作（连接，在墙上发布））它是我们仪表板应用程序之一的表名

“数据”是可用数据的列表

在我们有了数据之后

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T11:24:24.910

您必须`SQL_CALC_FOUND_ROWS`在 select 语句中添加，以便该`FOUND_ROWS()`功能起作用。

所以改变这一行

```
DECLARE entryCursor CURSOR FOR SELECT entryValue, entryTime FROM TrackingEntry; 
```

像这样

```
DECLARE entryCursor CURSOR FOR SELECT SQL_CALC_FOUND_ROWS entryValue, entryTime FROM TrackingEntry; 
```

[你可以在这里](http://dev.mysql.com/doc/refman/5.1/en/information-functions.html#function_found-rows)阅读更多关于它的信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T12:55:50.730

问题可能出在准备好的 INSERT 语句上，似乎其中一个变量是 NULL。尝试评论准备好的语句并选择@query，你会看到问题 -

```
SET @query = CONCAT('INSERT INTO ',_entryType, ' (',valueName,') VALUES (',valueValue,')' );
SELECT @query;
-- PREPARE stmt FROM @query;
-- EXECUTE stmt;
-- DEALLOCATE PREPARE stmt; 
```

# c - Valgrind 在尝试释放 malloc 的结构时报告内存错误

> ID：10947742
> 
> 赞同：1
> 
> 时间：2012-06-08T11:12:32.493
> 
> 标签：c, memory, valgrind

当先前 malloc 的结构被释放时，Valgrind 总是抱怨存在内存错误。该结构如下所示：

```
typedef struct bullet
{
  int x, y;
  struct bullet * next;
} BULLET; 
```

...我通过使用分配内存

```
BULLET * b;
b = malloc(sizeof(BULLET)); // sizeof(BULLET) is 16 
```

稍后，只需调用`free(b);`. 然而，Valgrind 似乎对此并不满意，所以它告诉我

```
==2619== Invalid read of size 8
==2619==    at 0x40249F: ctrl_bullets (player.c:89)
==2619==    by 0x405083: loop_game (game.c:305)
==2619==    by 0x406CCA: main (main.c:47)
==2619==  Address 0x5b8d818 is 8 bytes inside a block of size 16 free'd
==2619==    at 0x4C29A9E: free (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)
==2619==    by 0x402E04: rm_bullet (player.c:329)
==2619==    by 0x402485: ctrl_bullets (player.c:95)
==2619==    by 0x405083: loop_game (game.c:305)
==2619==    by 0x406CCA: main (main.c:47) 
```

当然我不能只分配 8 个字节，因为那将是存储指针所需的大小，而不是结构的大小 - 那么为什么 Valgrind 一直告诉我有错误？

*编辑*：更多可能相关的代码......

```
void
ctrl_bullets(WINDOW * w_field, BULLETLIST * lb)
{
  if (lb->num > 0)
  {
    BULLET * b;

    for (b = lb->head; b != NULL; b = b->next) // player.c:89
    {
      if (b->x > CON_FIELDMAXX)
      {
        write_log(LOG_DEBUG, "Bullet %p is outside the playing field; x: %d; "
                  "y: %d\n", (void *) b, b->x, b->y);
        rm_bullet(w_field, lb, b);
      }
      else
      {
        mv_bullet(w_field, b);
      }
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-08T14:31:44.143

问题是你释放了 b，然后尝试访问 b->next

valgrind 告诉您的错误是您正在访问已释放的 16 字节块内的 8 字节块（NEXT 指针）。

如果释放 b，则无法访问 b->next。只需将其存储在 tmp 变量中：P

（另外，请记住在释放后将 b 设置为 null ，这样您就没有[悬空指针](http://en.wikipedia.org/wiki/Dangling_pointer)）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T11:25:23.097

里面的 8 个字节`BULLET`很可能是字段`next`。你可能已经保存在`&next`某个地方并在`ctrl_bullets (player.c:89)`. 但是由于您没有向我们展示该代码，因此我们不能多说。

*编辑：*或者我们可以猜测您的指针`next`形成了一个链表，并且您在执行.`next``0``free`

# oracle10g - 在插入语句中使用两个 .nextval

> ID：10947743
> 
> 赞同：2
> 
> 时间：2012-06-08T11:12:37.460
> 
> 标签：oracle10g

我正在使用 oracle 数据库并面临两个 id_poduct.nextval 创建为错误的问题：`ORA-00001: unique constraint (SYSTEM.SYS_C004166) violated`

它是一个主键。使用所有是一个要求。我可以在语句中使用 2 .nextval 吗？

```
insert all 
   into sale_product values (id_product.nextval, id.currval, 'hello', 123, 1) 
   into sale_product values (id_product.nextval, id.currval, 'hi', 123, 1) 
select * from dual; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-09T22:04:27.420

```
insert into sale_product
select id_product.nextval, id.currval, a, b, c
from
(
    select 'hello' a, 123 b, 1 c from dual union all
    select 'hi'    a, 123 b, 1 c from dual
); 
```

这不使用`insert all`语法，但如果您只插入同一个表，它的工作方式相同。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-08T16:23:37.200

INSERT 中的值`id_product.NEXTVAL`与`first`INSERT 相同`second`，因此您将得到`unique constraint`违规。如果您删除约束并执行插入，您会注意到重复的值！

唯一的方法是依次执行两个批量 INSERTS 或具有两个不同范围的单独序列，后者需要大量的编码和检查。

```
create table temp(id  number ,id2 number);

insert all 
   into temp values (supplier_seq.nextval, supplier_seq.currval) 
   into temp values (supplier_seq.nextval, supplier_seq.currval) 
select * from dual;

    ID        ID2
---------- ----------
     2          2
     2          2 
```

**参考 多表插入语句** 的子查询不能使用序列 [http://docs.oracle.com/cd/B19306_01/server.102/b14200/statements_9014.htm#i2080134](http://docs.oracle.com/cd/B19306_01/server.102/b14200/statements_9014.htm#i2080134)

# php - SOLR 高亮问题

> ID：10947746
> 
> 赞同：1
> 
> 时间：2012-06-08T11:12:41.407
> 
> 标签：php, solr, highlight

在使用 SOLR highlighting 时，有时我没有得到正确的数据。例如，如果我使用“come up”，我会得到突出显示的结果作为*come* *up*。他们是否有任何用于显示突出显示结果的配置*设置*？

# c# - 如何在没有根节点的情况下保存 Xdocument

> ID：10947750
> 
> 赞同：0
> 
> 时间：2012-06-08T11:12:57.850
> 
> 标签：c#, xml

我有以附加模式将肥皂序列化的xml文件添加到文件中，这将导致多个像这样的根节点

```
<SOAP-ENV:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:SOAP-ENC="http://schemas.xmlsoap.org/soap/encoding/" xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/" xmlns:clr="http://schemas.microsoft.com/soap/encoding/clr/1.0" SOAP-ENV:encodingStyle="http://schemas.xmlsoap.org/soap/encoding/">
<SOAP-ENV:Body>
<a1:Image id="ref-1" xmlns:a1="http://schemas.microsoft.com/clr/nsassem/Spo.DataModel/Spo.DataModel%2C%20Version%3D12.1.3.0%2C%20Culture%3Dneutral%2C%20PublicKeyToken%3D23bd062a94e26d58">
<Name id="ref-4">Component</Name>
<ImmediateState xsi:type="a2:ModifiedState" xmlns:a2="http://schemas.microsoft.com/clr/nsassem/Spo.Plugins/Spo.DataModel%2C%20Version%3D12.1.3.0%2C%20Culture%3Dneutral%2C%20PublicKeyToken%3D23bd062a94e26d58">Current</ImmediateState>
</a1:Image>
</SOAP-ENV:Body>
</SOAP-ENV:Envelope>
<SOAP-ENV:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:SOAP-ENC="http://schemas.xmlsoap.org/soap/encoding/" xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/" xmlns:clr="http://schemas.microsoft.com/soap/encoding/clr/1.0" SOAP-ENV:encodingStyle="http://schemas.xmlsoap.org/soap/encoding/">
<SOAP-ENV:Body>
<a1:Image id="ref-1" xmlns:a1="http://schemas.microsoft.com/clr/nsassem/Spo.DataModel/Spo.DataModel%2C%20Version%3D12.1.3.0%2C%20Culture%3Dneutral%2C%20PublicKeyToken%3D23bd062a94e26d58">
<Name id="ref-4">Connect</Name>
<ImmediateState xsi:type="a2:ModifiedState" xmlns:a2="http://schemas.microsoft.com/clr/nsassem/Spo.Plugins/Spo.DataModel%2C%20Version%3D12.1.3.0%2C%20Culture%3Dneutral%2C%20PublicKeyToken%3D23bd062a94e26d58">Current</ImmediateState>
</a1:Image>
</SOAP-ENV:Body>
</SOAP-ENV:Envelope> 
```

我这样做是为了加载 XDocument

```
 StreamReader Sr = new StreamReader(filename);
 XDocument doc = XDocument.Parse("<rootnode>" + Sr.ReadToEnd() + "</rootnode>"); 
```

然后我对 doc 做了一些修改，最后我希望它在没有根节点的情况下保存

```
<?xml version="1.0" encoding="utf-8"?> 
```

当我做

```
doc.Save(filename); 
```

我想在没有根节点的情况下保存它，因为我可以再次反序列化文件

所以请为我提供任何替代方法来实现....

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T15:12:34.430

这将为您提供没有根节点的 xml。

```
StringBuilder sb = new StringBuilder();
doc.Root.Elements().ToList().ForEach(x => sb.Append(x.ToString()));
string xmlWithoutRootNodes = sb.ToString();
File.WriteAllText("file", xmlWithoutRootNodes); 
```

# c# - 如何在wpf中获取xml第n个元素名称

> ID：10947751
> 
> 赞同：1
> 
> 时间：2012-06-08T11:12:58.707
> 
> 标签：c#, wpf

![nth_element_name](../Images/a5ee92d419e2a418525cc46d4f1ce9bd.png)

```
public partial class XML_3 : Window
{
    public XML_3()
    {
        this.InitializeComponent();

        XmlDocument doc = new XmlDocument();
        doc.Load("D:/sample.xml");

        XmlNodeList student_list = doc.GetElementsByTagName("Student");

        foreach (XmlNode node in student_list)
        {
            XmlElement student = (XmlElement)node;

            int element_count = student.ChildNodes.Count;               

        }
    }
} 
```

在上面的代码中。我可以获得除根元素（学生）之外的元素的计数。现在计数是 3。

但我必须得到 2ed 元素名称（Kavi），它是属性元素名称（ID），它是子元素名称（FName，MName）。

我应该怎么做才能得到这些东西。

请帮我...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T11:29:11.087

使用 XDocument（[为什么？](https://stackoverflow.com/questions/4383919/xdocument-versus-xmldocument)）：

```
var doc = XDocument.Parse(xml); // OR Load(...)

var nodeCount = doc.Elements().Count();
var secondNode = doc.Elements().Skip(1).First();
var studentName = secondNode.Name;
var studentId = secondNode.Attribute("ID").Value; 
```

或（对于您的代码）：

```
var secondNode = student.ChildNodes[1] as XmlElement;
var studentName = secondNode.LocalName;
var studentId = secondNode.Attributes["ID"]; 
```

**补充**：

```
var secondNode = student.ChildNodes[1];
var fName =
    secondNode.ChildNodes.Cast<XmlElement>().FirstOrDefault(x => x.LocalName == "FName").InnerText;
var mName =
    secondNode.ChildNodes.Cast<XmlElement>().FirstOrDefault(x => x.LocalName == "MName").InnerText;
var studentId = secondNode.Attributes["ID"].Value; 
```

# vim - 如何在 vim 中从块的开头转到 C 块的末尾，反之亦然？

> ID：10947752
> 
> 赞同：2
> 
> 时间：2012-06-08T11:13:01.963
> 
> 标签：vim

我在 C 中有一段这样的代码-

```
enum colors { //---->I am here
RED,
BLUE,

/* Hundreds of colors in between */

}; // -----> I want to reach here in the easiest possible way. 
```

从块的末尾回到块的开头也很有用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-08T11:15:55.757

通常，`%`密钥会执行此操作（在*正常*模式下）。它是双向的。您可能还需要查看[相关文档](http://vimdoc.sourceforge.net/htmldoc/usr_29.html#29.3)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T11:46:02.057

您可以使用“Shift + 5”键在代码块的开头/结尾之间跳转。

# jquery - JQuery 问题 - Magento 自定义字段

> ID：10947754
> 
> 赞同：1
> 
> 时间：2012-06-08T11:13:06.120
> 
> 标签：jquery

我想弄清楚如何在 JQuery 中做某事，我需要一点帮助。我认为我需要做的是正则表达式搜索，然后匹配特定字段。

我基本上有一个 Magento 商店，它有 3 个自定义字段，它们都有如下名称

```
options_22_text
options_23_text 
```

基本上他们有 options_number_text （用随机数替换数字）。

对于每个页面，我需要选择 3 个自定义字段（按照它们在页面上显示的顺序）和

这是我到目前为止所得到的，但是由于数字发生了变化，它不适用于所有页面

```
jQuery(document).ready(function() {
    if (jQuery('#options_3_text').length > 0){
        //Custom Options - Template: Description.phtml

        jQuery('#options_2_text').click(function() {
            //Make sure other fields are filled out first
            if (jQuery('#options_3_text').val() == "") {
                alert('You must enter the first line!');
                jQuery('#options_3_text').focus();
            }
        });

        jQuery('#options_1_text').click(function() {
            //Make sure other fields are filled out first
            if (jQuery('#options_3_text').val() == "") {
                alert('You must enter the first line!');
                jQuery('#options_3_text').focus();
            }
        });
    }
}); 
```

基本上这个人需要填写第一个文本字段，因为它会调整价格。我需要找到一个很好的方法 - 请帮忙！？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T11:32:38.647

`$("input[id^=options_]")`应该拾取所有以 options_ 开头的输入元素

# ldap - FitNesse 的 AD/LDAP 身份验证

> ID：10947755
> 
> 赞同：3
> 
> 时间：2012-06-08T11:13:16.820
> 
> 标签：ldap, fitnesse

我们将把 FitNesse 放在服务器上，并希望为此提供 AD/LDAP 身份验证解决方案。有没有人对此有过良好且易于设置的解决方案的经验？

提前致谢。马格努斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T12:18:13.677

一种直接的方法是下载[UnboundID LDAP SDK](http://www.unboundid.com/products/ldap-sdk/)的标准版本并获取文件的副本`jsse.jar`并将两个 jar 文件安装在健身 lib 目录中。在扩展类并覆盖方法的`fitness.authentication`包中创建一个类。指定所需的属性，例如主机名、端口、简单或 SASL 绑定、是使用 SSL 还是 StartTLS、基础对象、搜索范围等。`fitness.authentication.Authenticator``isAuthenticated()`

将`jsse.jar`提供必要的 SSL 类，以便可以根据需要实现 SSL 和 StartTLS。

### 也可以看看

*   [LDAP：编程实践](http://ff1959.wordpress.com/2011/10/27/ldap-programming-best-practices/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T14:16:11.770

这是可能的，但它需要找到或创建一个插件来做到这一点。

我发现了以下内容，但我从未尝试过：

*   [https://github.com/timander/fitnesse-ldap-authenticator](https://github.com/timander/fitnesse-ldap-authenticator)。

也在那里，但更老的是：[https ://github.com/dleonard0/fitnesse](https://github.com/dleonard0/fitnesse)

你可以从那里开始，但你可能不得不弄脏你的手。不幸的是，我只是对代码的那部分不太熟悉。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T11:46:34.787

见这里： http: [//fitnesse.org/FitNesse.UserGuide.AdministeringFitNesse.SecurityDescription.SpnegoAuthentication](http://fitnesse.org/FitNesse.UserGuide.AdministeringFitNesse.SecurityDescription.SpnegoAuthentication)

我需要给更多的角色让stakeoverflow开心。

# php - php - 用foreach分解字符串并插入多行太慢

> ID：10947760
> 
> 赞同：1
> 
> 时间：2012-06-08T11:13:39.703
> 
> 标签：php, mysql

我想用空格分解一个字符串，检查这个词是否已经存在。如果没有，请将每个片段插入 mysql db 中的多行。我以前试过这个...

```
<?php
if($_SERVER['REQUEST_METHOD'] == 'POST') {
    include("connect.php");
    $counter = 0;
    $counters = 0;
    $string = mysql_real_escape_string($_POST['words']);
    $arr = explode(" ",$string);
    foreach($arr as $str) {
        $sql = mysql_query("SELECT * FROM unicode WHERE word = '$str'") or die (mysql_error());
        if (mysql_num_rows($sql) == 0) {
            $sqli = mysql_query("INSERT INTO unicode (word) VALUES ('$str')") or die (mysql_error());
            $counters++;
        } elseif (mysql_num_rows($sql) > 0) { 
            $counter++;
        }
    }
    header("Location: ../addspellwords?success=457394056369&entered=$counters&duplicates=$counter");
}
?> 
```

这也太慢了。。。。

有没有其他方法可以做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T11:30:18.307

根据传递的内容，您可以`SELECT`删除当前存在的单词，然后将它们留在`INSERT`. 另一种选择可能是`INSERT...ON DUPLICATE KEY`您的`word`列是键（我希望基于您的代码）。尝试以下操作：

```
<?php
if($_SERVER['REQUEST_METHOD'] == 'POST') {
    include("connect.php");
    $counter = 0;
    $counters = 0;
    $string = mysql_real_escape_string($_POST['words']);
    $arr = explode(" ",$string);

    $sql = mysql_query("SELECT `word` FROM unicode WHERE word IN ('".implode("', '", $arr) . ")") or die (mysql_error());
    $dupes = array();
    while($r = mysql_fetch_assoc($sql) {
        $dupes[] = $r['word'];
    }
    $newwords = array_diff($arr, $dupes);
    if(count($newwords)) {
        $sqli = mysql_query("INSERT INTO unicode (word) VALUES ('" . implode("'),('", $newwords) . "')") or die (mysql_error());
    }
    header("Location: ../addspellwords?success=457394056369&entered=".count($newwords)."&duplicates=".count($dupes));
}
?> 
```

# objective-c - CLGeocoder 不返回任何内容

> ID：10947762
> 
> 赞同：0
> 
> 时间：2012-06-08T11:13:45.370
> 
> 标签：objective-c

我正在尝试使用 CLLocationManager 和 CLGeocoder 确定 iPhone 用户的位置。

我的 CLLocationManager 似乎运行良好，但不幸的是 CLGeocoder 并没有做我想做的事情。

部分代码摘录：

```
- (void)locationManager:(CLLocationManager *)manager didUpdateToLocation:(CLLocation *)newLocation fromLocation:(CLLocation *)oldLocation {

    [self.locationManager stopUpdatingLocation];

    NSLog(@"Location updated to: %@",newLocation);

    [self.geocoder reverseGeocodeLocation:newLocation completionHandler:^(NSArray *placemarks, NSError *error) {

        NSLog(@"Reverse geocoding finished");

        self.currentPlacemark = [placemarks objectAtIndex:0];
        NSLog(@"%@",self.currentPlacemark.locality);
        NSLog(@"%@",self.currentPlacemark.ISOcountryCode); 

    }];
}

- (void)getCurrentLocation {

    NSLog(@"Determining current location");

    self.locationManager = [[CLLocationManager alloc] init];
    self.locationManager.delegate = self;

    [self.locationManager startUpdatingLocation];
}

- (void)viewDidLoad {

    [super viewDidLoad];
    [self getCurrentLocation];
} 
```

*self.currentPlacemark*是一个*CLPlacemark*对象。

*self.geocoder*是一个*CLGeocoder*对象。

*self.locationManager*是一个*CLLocationManager*对象。

我错过了什么？为什么这不起作用？老实说，我花了几个小时，慢慢地开始变得绝望……</p>

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T11:24:15.783

是的，您应该分配并初始化您的地理编码器。

```
self.geocoder = [[[CLGeocoder alloc] init] autorelease];
[self.geocoder reverseGeocodeLocation:newLocation completionHandler:^(NSArray *placemarks, NSError *error) {

    NSLog(@"Reverse geocoding finished");

    self.currentPlacemark = [placemarks objectAtIndex:0];
    NSLog(@"%@",self.currentPlacemark.locality);
    NSLog(@"%@",self.currentPlacemark.ISOcountryCode); 

}]; 
```

# c# - 为资源管理器创建嵌入资源

> ID：10947764
> 
> 赞同：3
> 
> 时间：2012-06-08T11:13:49.360
> 
> 标签：c#, .net, class-library

我试图在我的 DLL 上嵌入一些图标，但有些东西是不正确的。

使用 .NET4 和 VS 2010 和 Windows7 x64 我有这个卫星 DLL（类库）。我添加资源文件和我的图标。在我的 DLL 代码中，我可以访问图标。（但这不是想法）。

问题是当我尝试使用这个 DLL 时，例如，为我的自定义文件夹选择一个图标。我点击文件夹属性，更改图标，但是当我选择我的 DLL 时，我收到一个错误，说我的 DLL 上没有图标。

我确信我的类库中缺少一些东西来实现这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-21T13:43:41.450

尝试将您的图标放在资源 DLL 中，而不是类库中。请参阅：[MSDN 上的“Creating a Resource-Only DLL”](http://msdn.microsoft.com/en-us/library/24b2tcy0.aspx)（我在 Visual C++ > Win32 > Win32 Project 中找到了上述项目类型）。

# php - 使用 PHP 无限循环与服务器的持久连接

> ID：10947765
> 
> 赞同：2
> 
> 时间：2012-06-08T11:13:52.793
> 
> 标签：php, javascript, infinite-loop, persistent-connection

我想保持我的网站更新，在数据库中添加了一项新信息。我不能使用`Node.js`and `Comet Programming`，并且`Javascript's setInterval`由于请求太多，这似乎是个坏主意。

现在我正在使用这样的东西：

**Javascript：**

```
var url = "path_to/file.php";
var req = xmlhttp();
req.open("GET", url, true);
req.send(null);
poll = setInterval(getResponse, 100);
function getResponse()
{
  var data = req.responseText;
  var res = document.getElementById("response");
  res.innerHTML = data;
} 
```

**PHP：**

```
<?php
  set_time_limit(0);
  ob_start(); 

   while(true)
   {
    #CODE
    flush(); 
    ob_flush(); 
    sleep(0.3); 
   }

  flush(); 
  ob_flush(); 
?> 
```

**这是一个好主意吗？我可以毫无问题地使用它吗？也许有人知道保持持久连接的更好方法？（在我的网站上将有大约 500 个在线用户）**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T11:32:47.620

[通过WebSockets](http://en.wikipedia.org/wiki/WebSockets)推送是一种替代方法，但仅适用于最新版本的浏览器。

您的脚本的缺点是每 100 毫秒询问一次（这很短），当最新的 ajax 响应尚未到达时也是如此。我会更改脚本以仅在前一个 ajax 已经到达并且自最后一个 ajax 到达后的最短时间（超时）时才要求服务器进行更改。

例如（未经测试）：

```
function getResponse() {
    var data = req.responseText;
    var res = document.getElementById("response");
    res.innerHTML = data;
    setTimeout(getResponse, 500);
}
var url = "path_to/file.php";
var req = xmlhttp();
req.open("GET", url, true);
req.send(null);
getResponse(); 
```

# java - Java中的a.getClass()和A.class有什么区别？

> ID：10947768
> 
> 赞同：109
> 
> 时间：2012-06-08T11:13:58.803
> 
> 标签：java, class, reflection

`a.getClass()`在 Java 中，围绕使用or的选择存在哪些优点/缺点`A.class`？两者都可以在任何`Class<?>`预期的地方使用，但我想在不同的情况下使用两者都会有性能或其他微妙的好处（就像有`Class.forName()`和`ClassLoader.loadClass()`.

* * *

## 回答 #1

> 赞同：171
> 
> 时间：2012-06-08T11:16:02.110

我不会比较它们的优缺点，因为它们有不同的目的，而且很少在两者之间做出“选择”。

*   `a.getClass()`返回 的运行时**类型**。`a`即，如果你有`A a = new B();`然后`a.getClass()`将返回`B`类。

*   `A.class`**静态**评估`A`类，并用于通常与反射相关的其他目的。

 **在性能方面，可能存在*可*衡量的差异，但我不会说什么，因为最终它取决于 JVM 和/或编译器。

* * *

[这篇文章在这里](http://programming.guide/java/difference-between-class-and-getclass.html)被改写为一篇文章。

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2012-06-08T11:16:40.127

它们在您可以使用它们的位置方面实际上是不同的。`A.class`在编译时工作，而`a.getClass()`需要类型的实例`A`并在运行时工作。

也可能存在性能差异。虽然`A.class`可以由编译器解析，因为它知道 的实际类型`A`，`a.getClass()`是在运行时发生的虚拟方法调用。

作为参考，针对字节码的编译器通常会发出以下指令`Integer.getClass()`：

```
aload_1
invokevirtual   #3; //Method java/lang/Object.getClass:()Ljava/lang/Class; 
```

以及以下内容`Integer.class`：

```
//const #3 = class  #16;    //  java/lang/Integer

ldc_w   #3; //class java/lang/Integer 
```

前者通常涉及虚拟方法分派，因此可能需要更长的时间来执行。然而，这最终取决于 JVM。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-06-08T11:17:46.760

看看下面的例子

`a.getClass()!= A.class`，即 a 不是 A 的实例，而是 A 的匿名子类

`a.getClass()`需要类型 A 的实例

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2014-06-20T07:09:27.870

`a.getClass`当你有一个类/类型的实例并且你想得到它的确切类型时使用。当`a.class`你`type`有空并且你想创建它的实例时使用。
在编译时评估时还`getClass()`返回实例的运行时类型。 考虑和的性能，比 具有更好的性能 。**例子 ：**`.class`
`getClass()``.class``.class``getClass()`

 **```
public class PerfomanceClass {

    public static void main(String[] args) {
        // TODO Auto-generated method stub

        long time=System.nanoTime();
        Class class1="String".getClass();
        class1="String".getClass();
        class1="String".getClass();
        class1="String".getClass();

        System.out.println("time (getClass()) :"+(System.nanoTime()-time)+" ns");     

        long time2=System.nanoTime();
        Class class2=String.class;
        class2=String.class;
        class2=String.class;
        class2=String.class;

        System.out.println("time (.class):"+(System.nanoTime()-time2)+" ns");
    }

} 
```

输出 ：

```
time (getClass()) : 79410 ns
time (.class)     : 8032 ns 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-08T15:54:49.933

我想补充一个区别。假设您有一个如下所示的构造函数类，其中包含一个接受 Class 对象的超类。您希望每当创建子类对象时，应将子类的类对象传递给超类。下面的代码将无法编译，因为您不能在构造函数中调用实例方法。在这种情况下，如果您替换`myObject.getClass()`为`MyClass.class`. 它会完美运行。

```
Class MyClass
{
    private MyClass myObject = new MyClass();
    public MyClass()
    {
        super(myObject.getClass()); //error line compile time error
    }
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-11-24T14:37:07.753

有趣的是，上面示例中提到的性能差异似乎与其他原因有关。使用 3 个不同的类，平均而言，性能几乎相同：

```
import java.util.LinkedHashMap;
public class PerfomanceClass {

public static void main(String[] args) {

    long time = System.nanoTime();
    Class class1 = "String".getClass();
    Class class11 = "Integer".getClass();
    Class class111 = "LinkedHashMap".getClass();

    System.out.println("time (getClass()) :" + (System.nanoTime() - time) + " ns");

    long time2 = System.nanoTime();
    Class class2 = String.class;
    Class class22 = Integer.class;
    Class class222 = LinkedHashMap.class;

    System.out.println("time (.class):" + (System.nanoTime() - time2) + " ns");
} } 
```

输出将类似于：

```
time (getClass()) :23506 ns 
time (.class):23838 ns 
```

并且切换调用的顺序甚至会导致`getClass()`更快。

```
import java.util.LinkedHashMap;

public class PerfomanceClass {

public static void main(String[] args) {
    long time2 = System.nanoTime();
    Class class2 = LinkedHashMap.class;

    System.out.println("time (.class):" + (System.nanoTime() - time2) + " ns");

    long time = System.nanoTime();
    Class class1 = "LinkedHashMap".getClass();

    System.out.println("time (getClass()) :" + (System.nanoTime() - time) + " ns");
}} 
```

输出：

```
time (.class):33108 ns
time (getClass()) :6622 ns 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-08-11T07:04:09.237

`p.getClass()`，其中`p`是对象的实例，返回此对象的运行时类`p`。`p`不能是会导致编译时错误的类型，它应该是对象的实例。

```
// B extends A
A a = new B();
System.out.println(a.getClass());
//output: class B 
```

`p.class`是一个表达式。`.class`称为类语法。`p`是一种类型。它可以是类、接口或数组的名称，甚至是原始类型。 `a.getClass() == B.class`.

如果类型可用并且有实例，则可以使用`getClass`方法来获取类型的名称。否则，使用`.class`语法****

# sql - 出现在多个配置文件中的帐号数量的不同计数

> ID：10947771
> 
> 赞同：3
> 
> 时间：2012-06-08T11:14:16.477
> 
> 标签：sql, sql-server, distinct

我有一个表，其中包含 (account_num) 和用户配置文件 (profile_id) 中的帐号。不同的配置文件可以有多个相同帐号的实例，或者具有不同帐号的配置文件的多个实例。（同一帐号不能有多个配置文件实例）。

我正在尝试编写一个查询，该查询将为我提供一个不同的帐号数量，这些帐号出现在多个配置文件中。

我正在尝试以下查询（尽管建议更有效的查询将不胜感激）；

```
Select Count(*) from
(select account_num, count(profile_id) as num_users
from dbo.sample
where account_num <> ''
group by account_num
)
where num_users >1 
```

但我不断收到以下错误；

```
Msg 156, Level 15, State 1, Line 7
Incorrect syntax near the keyword 'where'. 
```

我正在使用 Microsoft SQL Server Management Studio。顺便说一句，这个查询在 Oracle 服务器上会有所不同吗？

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T11:18:06.667

尝试给子查询起别名

```
 select Count(*) from 
    (   
        select account_num, count(profile_id) as num_users 
        from dbo.sample 
        where account_num <> '' group by account_num
    ) t 
 where num_users > 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T11:47:29.627

您想要的结果也可以通过以下查询显示：

```
SELECT COUNT(DISTINCT account_num) AS cnt
FROM dbo.sample    a                        --- no AS here to work in Oracle
WHERE account_num <> ''
  AND profile_id IS NOT NULL
  AND EXISTS
      ( SELECT *
        FROM dbo.sample    b 
        WHERE b.account_num = a.account_num
          AND profile_id IS NOT NULL
          AND b.PK <> a.PK                  --- the PRIMARY KEY of the table
      ) ; 
```

# tsql - 组乘法,阅读障碍

> ID：10947773
> 
> 赞同：-2
> 
> 时间：2012-06-08T11:14:19.753
> 
> 标签：tsql

现在这是一个带有一个子查询的简单插入查询，并且运行良好：

```
INSERT INTO CSolutions..Report2  

SELECT  Nov.Chain, CG.Grouping, reg.code as regcode,reg.pname,reg.fname,reg.sname, SUM(NS.Currency) as sumeur ,   sum(ns2.kpl) as sumkpl,0,0,0,0

FROM CSolutions..NovSales NS,CSolutions..NSaleskpl NS2, CSolutions..NovCGroup CG, sales..reg_eng reg,
        (SELECT DISTINCT P.Code, Nov.Chain
        FROM Register..Pcy P
            INNER JOIN Register..TCustomer TC ON (P.Code = TC.PCode)
            INNER JOIN CSolutions..Novies2 Nov ON (TC.Code = Nov.TCode)
        ) AS Nov

WHERE NS.SpCode = CG.SpCode and ns.spcode = ns2.spcode AND Ns.PCode = Nov.Code
and ns.spcode = reg.code
 and ns.pcode = ns2.pcode

  **and NS.SalesMonth = '201205'
   and  NS2.SalesMonth = '201205'**

GROUP BY Nov.Chain, CG.Grouping , reg.code,reg.pname,reg.fname,reg.sname 
```

这是同一个查询的派生，但它不能正常工作：

```
INSERT INTO CSolutions..Report2  

SELECT  Nov.Chain, CG.Grouping, reg.code as regcode,reg.pname,reg.fname,reg.sname, SUM(NS.Currency) as sumeur ,   sum(ns2.kpl) as sumkpl,0,0,0,0

FROM CSolutions..NovSales NS,CSolutions..NSaleskpl NS2, CSolutions..NovCGroup CG, sales..reg_eng reg,
        (SELECT DISTINCT P.Code, Nov.Chain
        FROM Register..Pcy P
            INNER JOIN Register..TCustomer TC ON (P.Code = TC.PCode)
            INNER JOIN CSolutions..Novies2 Nov ON (TC.Code = Nov.TCode)
        ) AS Nov

WHERE NS.SpCode = CG.SpCode and ns.spcode = ns2.spcode AND Ns.PCode = Nov.Code
and ns.spcode = reg.code
 and ns.pcode = ns2.pcode

  **and NS.SalesMonth between '201201' and '201205'
   and  NS2.SalesMonth between '201201' and '201205'**

GROUP BY Nov.Chain, CG.Grouping , reg.code,reg.pname,reg.fname,reg.sname 
```

这将给出 5 个月总金额的 5 倍，

我是一个阅读障碍者，我很难发现错误，我希望有人能帮助我？？:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T11:51:46.690

CSolutions..NovSales 和 CSolutions..NSaleskpl NS2 中的 salesmonth 没有加入。在第一个查询中，这无关紧要，因为您只查看一个销售月。在第二个查询中，我假设当您从每个表中选择一个值范围时有多个销售月。由于 salesmonth 的原因，您因此获得了交叉加入。

# iphone - 在 UIWebView 中加载 MS OneNote 文件

> ID：10947785
> 
> 赞同：0
> 
> 时间：2012-06-08T11:15:19.547
> 
> 标签：iphone, ios, ipad, onenote

我正在尝试在 WebView 中加载 MS OneNote 文件，但一切都是徒劳的。我发现这样做很难。相反，我尝试了另一种方法。我获得了 MS OneNote 文件数据并使用“writeToFile”将其写入“pdf”文件。但仍然无法加载 pdf 转换后的文件。有没有办法直接在 webview 上加载 MS OneNOte 或以任何方式以编程方式将其转换为 pdf 格式。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T11:27:48.320

您可能想尝试使用[UIDocumentInteractionController](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIDocumentInteractionController_class/Reference/Reference.html)打开文件，它将显示大多数文件，但我没有尝试使用 OneNote 文件。[示例代码](http://developer.apple.com/library/ios/#samplecode/DocInteraction/Introduction/Intro.html)。

# javascript - `.click(handler())` 和 `.click(handler)` 之间的区别

> ID：10947786
> 
> 赞同：6
> 
> 时间：2012-06-08T11:15:19.893
> 
> 标签：javascript, jquery

我有以下代码。

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
    <script type="text/javascript" src="jquery-1.4.2.min.js" ></script>
    <script type="text/javascript">
    function myFun()
    {
        alert(5)
    }
        $(document).ready(function(){
            $("#myID").click(myFun());
        })
    </script>
 </head>

 <body>
  <input type="button" value="Click it" id="myID" />
 </body>
</html> 
```

当我运行此代码`alert(5)`时，页面加载时即将到来。如果我写

```
$("#myID").click(myFun) 
```

那么警报仅在我们单击按钮时出现。为什么它会这样？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-08T11:17:22.527

```
$("#myID").click(myFun()); 
```

这会调用`myFun()`并尝试安装它作为事件处理程序返回的任何内容。由于它没有返回任何内容，因此您实际上是在*触发*点击`#myID`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-08T11:17:50.510

阅读此[.click()](http://api.jquery.com/click/) - 将事件处理程序绑定到`click`JavaScript 事件，或使用 JavaScript 在元素上触发该事件。

您只需要编写`$("#myID").click(myFun);`而不是`$("#myID").click(myFun());`因为当您`myFun()`在代码中编写该函数时会立即调用该函数（而不是在单击事件触发时`#myID`）。

# [工作演示](http://jsfiddle.net/JrrDn/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-08T11:21:47.860

试试这个在点击事件上运行函数：

```
function myFun(){
    alert(5);
}

$(document).ready(function(){
    $("#myID").click(function(){
        myFun();
    });
}) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-08T11:39:09.363

试试这个：

这将起作用

```
$(document).ready(function() {
    function myFun() {
        alert(5)
    }
            $("#myID").click(function(){
            myFun();
            });
});​ 
```

# ajax - AJAX XMLHttpRequest 状态未定义

> ID：10947787
> 
> 赞同：0
> 
> 时间：2012-06-08T11:15:29.910
> 
> 标签：ajax, xmlhttprequest

在下面的一段 JavaScript 代码中，我正在使用 AJAX 执行 GetData.php。但是，当我删除评论以查看请求对象的状态属性时，它显示为未定义，尽管 PHP 脚本正在正确执行并且我的页面正在按照我的意愿进行更改。但我仍然需要国家财产。关于这里发生了什么的任何线索？

```
 function refreshPage()
 {
    var curr = document.getElementById('list').value;
    var opts = document.getElementById('list').options;
    for(var i=0;i<opts.length;i++)
     document.getElementById('list').remove(opts[i]);
    var request = new XMLHttpRequest();
    request.onreadystatechange=
    function()
    {
        if(request.readyState == 4)
        {
          //alert(request.state);
          //if(request.state == 200)
          {
            fillOptions();
            var exists = checkOption(curr);
            var opts = document.getElementById('list').options;
            if(exists == true)
            {
                for(var i=0;i<opts.length;i++)
                  if(curr == opts[i])
                  {
                    opts[i].selected = true;
                    break;
                  }
            }
            else
            {
                opts[0].selected = true;
            }
            refreshData();
          }
          /*else
          {
             alert(request.responseText);
             //document.close();    
          }*/
       }
    }
    request.open("GET","GetData.php?Address=" + address + "&Port=" + port,true);
    request.send();
 } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T11:19:28.210

你的意思`request.status`不是 request.state 吗？
尝试将其更改为 .status ，它应该可以正常工作:)

# python - 使用 wxnotebook 的 wxpython boxsizer 问题

> ID：10947792
> 
> 赞同：1
> 
> 时间：2012-06-08T11:15:51.347
> 
> 标签：python, wxpython, wxnotebook, boxsizer

我正在尝试在 notebookPage 面板的垂直布局 sizer 内嵌套一个水平布局的 sizer。

我从[wxPython 中获得了一些灵感：Resizing a notebook within a notebook](https://stackoverflow.com/questions/8953513/wxpython-resizing-a-notebook-within-a-notebook) but cannot make it normal work。

而不是得到这个布局

> 吨位限制（以吨为单位）：[3000]
> [x] 启用匹配类别过滤器

面板中的所有内容都在一行中被破坏

我在 Win7、python 2.6.6、wx 2.8.12.1 上运行它

以下是相关代码：

```
import sys
import os

import wx

class MainWindow(wx.Frame):
    def __init__(self,parent,title):
        self.ID_LOAD=101
        self.ID_SAVE=102

        # based on a frame, so set up the frame
        wx.Frame.__init__(self,parent,wx.ID_ANY, title, size=(640,480))

        self.CreateStatusBar()

        self.tab = wx.Notebook(self, -1, style=(wx.NB_TOP))
        self.globPanel = wx.NotebookPage(self.tab, -1)
        self.orderPanel = wx.NotebookPage(self.tab, -1)
        self.slabsPanel = wx.NotebookPage(self.tab, -1)
        self.tab.AddPage(self.globPanel, "Global filter")
        self.tab.AddPage(self.orderPanel, "Orders filter")
        self.tab.AddPage(self.slabsPanel, "Slabs filter")

        self.toolbar = wx.ToolBar(self, wx.ID_ANY, style=wx.TB_HORIZONTAL)
        self.toolbar.SetToolBitmapSize((20,20))
        load_ico = wx.ArtProvider.GetBitmap(wx.ART_FILE_OPEN, wx.ART_TOOLBAR, (20,20))
        self.toolbar.AddLabelTool(self.ID_LOAD, "Load", load_ico, bmpDisabled=wx.NullBitmap, shortHelp='Load', longHelp="Loads a text file to the filter editor")
        save_ico = wx.ArtProvider.GetBitmap(wx.ART_FILE_SAVE, wx.ART_TOOLBAR, (20,20))
        self.toolbar.AddLabelTool(self.ID_SAVE, "Save", save_ico, bmpDisabled=wx.NullBitmap, shortHelp='Save', longHelp="Saves the contents of the filter editor")
        self.toolbar.AddSeparator()

        self.tonnageStatic = wx.StaticText(self.globPanel, wx.ID_ANY, "Tonnage limit (in tons): ")
        self.tonnageEdit = wx.TextCtrl(self.globPanel, wx.ID_ANY, '30000') 
        self.tonnageSizer = wx.BoxSizer(wx.HORIZONTAL)
        self.tonnageSizer.Add(self.tonnageStatic, flag=wx.EXPAND | wx.RIGHT | wx.LEFT | wx.TOP | wx.BOTTOM, border=10)
        self.tonnageSizer.Add(self.tonnageEdit, flag=wx.EXPAND | wx.RIGHT | wx.LEFT | wx.TOP | wx.BOTTOM, border=10)

        self.filterCheck = wx.CheckBox(self.globPanel, wx.ID_ANY, "Enable filter on matchings categories")

        self.globSizer = wx.BoxSizer(wx.VERTICAL)
        self.globSizer.Add(self.tonnageSizer)
        self.globSizer.Add(wx.StaticLine(self), 0, wx.EXPAND)
        self.globSizer.Add(self.filterCheck, 0, wx.EXPAND)
        self.globPanel.SetSizer(self.globSizer)

        self.sizer = wx.BoxSizer(wx.VERTICAL)
        self.sizer.Add(self.toolbar,0,wx.EXPAND)
        self.sizer.Add(wx.StaticLine(self), 0, wx.EXPAND)
        self.sizer.Add(self.tab, 1, wx.EXPAND)
        self.SetSizer(self.sizer)
        self.Layout()
        self.toolbar.Realize()

        # Show it !!!
        self.Show(1)            

def main():
    app = wx.PySimpleApp()
    view = MainWindow(None, "Input filter")
    app.MainLoop()

if __name__ == "__main__":
    main() 
```

像这样稍微好一点，但我没有得到静态行，只显示 checkox 标签的第一个字符

```
self.tonnageStatic = wx.StaticText(self.globPanel, wx.ID_ANY, "Tonnage limit (in tons): ")
self.tonnageEdit = wx.TextCtrl(self.globPanel, wx.ID_ANY, '30000') 
self.tonnageSizer = wx.BoxSizer(wx.HORIZONTAL)
self.tonnageSizer.Add(self.tonnageStatic, 0, flag=wx.EXPAND|wx.ALL)
self.tonnageSizer.Add(self.tonnageEdit, 0, flag=wx.EXPAND|wx.ALL)

self.filterCheck = wx.CheckBox(self.globPanel, wx.ID_ANY, "Enable filter on matchings categories")

self.globSizer = wx.BoxSizer(wx.VERTICAL)
self.globSizer.Add(self.tonnageSizer)
self.globSizer.Add(wx.StaticLine(self.globPanel), 0, wx.EXPAND)
self.globSizer.Add(self.filterCheck, 0, wx.EXPAND)
self.globPanel.SetSizer(self.globSizer)

self.sizer = wx.BoxSizer(wx.VERTICAL)
self.sizer.Add(self.toolbar,0,wx.EXPAND)
self.sizer.Add(wx.StaticLine(self), 0, wx.EXPAND)
self.sizer.Add(self.tab, 1, wx.EXPAND)
self.SetSizer(self.sizer)
self.globPanel.Layout()
self.Layout()
self.toolbar.Realize()

# Show it !!!
self.Show(1) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T12:34:57.517

我只是在windows上运行它，如果你`.Layout()`在行后调用globPanel，`self.Layout()`它应该把sizer踢成形状:)

您也可以使用`wx.ALL`与右、左、上和下相同的

**编辑**：我很好奇为什么会出现这种奇怪的行为，并进行了更多调查。我查看了使用笔记本的地方，并且总是使用面板作为页面。如果您将 NotebookPages 更改为 Panels，您可以取消`Layout`调用，它可以按预期工作。

# eclipse - JavaME - 在 Eclipse 中执行 NetBeans 应用程序

> ID：10947806
> 
> 赞同：0
> 
> 时间：2012-06-08T11:16:56.787
> 
> 标签：eclipse, netbeans, java-me

我想在 Eclipse 中运行我的 J2ME 应用程序。它是在 Netbeans IDE 中制作的，但想在 Eclipse 中运行。为此，我安装了 J2ME 插件，但我希望模拟器运行应用程序。请发送一些安装模拟器的链接，以便我也可以在 Eclipse 中运行它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T12:43:47.643

您可以将 eclipse 项目导入 Netbeans，因为 Netbeans 具有该实用程序，但是对于将 Netbeans 项目导入 Eclipse，没有默认实用程序。您可以尝试以下步骤，

*   在 Eclipse 中创建新的 Java ME 项目
*   将您的 src 和 res 文件从 NetBeans 复制并粘贴到 Eclipse
*   将默认的 Midlet 执行属性设置为`Àpplication Descriptor`文件。

# jquery - 如何将html附加到jquery中类的最后一段？

> ID：10947809
> 
> 赞同：1
> 
> 时间：2012-06-08T11:17:03.730
> 
> 标签：jquery

我有一个包含多个 .desc div 的页面。我想在这些 div 中的最后一个段落中添加一些 html。

这个我试过了。。

```
$(".desc p:last").append(" <span class='orange readMore'>Read More</span> <span class='orange readLess'>Read Less</span>"); 
```

然而，这只是将它添加到整个页面中该 div 的最后一段。不是 .desc div 中的每个最后一个段落。如果这有意义...

```
<div class="desc">

                <p>Description1</p> 
            </div>
<div class="desc">
                <p>Description2 <span class="orange readMore" style="display: inline; ">Read More</span> <span class="orange readLess" style="display: none; ">Read Less</span></p> 
        </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T11:19:54.437

```
$(".desc").each(function(){
    $(this).find('p:last').append("<span class='orange readMore'>Read More</span> <span class='orange readLess'>Read Less</span>");
}); 
```

可能是这样的？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T11:20:18.117

您应该[`:last-child`](http://api.jquery.com/last-child-selector/)改用：

```
$(".desc p:last-child").append("Some stuff"); 
```

选择`:last`器将始终将匹配的集合减少到该集合中的最后一个元素。它只会返回一个元素。

来自文档`:last-child`（以下引用完美地描述了您的确切问题）：

> While `:last` matches only a single element, `:last-child` can match more than one: one for each parent.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T11:18:57.663

试试这个：

$("div.desc').each(function () { $(this).find('p:last').after(" 阅读更多 阅读更少"); });

# jquery - jQuery Carousel 幻灯片导航到特定点

> ID：10947819
> 
> 赞同：0
> 
> 时间：2012-06-08T11:18:11.563
> 
> 标签：jquery, ruby-on-rails, ruby-on-rails-3

我使用 jQuery 创建了一个幻灯片轮播，并隐藏了溢出，您可以在其中通过从 margin-left 值添加或减去幻灯片宽度来来回导航。

[http://trainingstage.ntistudio.co.uk/slideshows/2/presentation](http://trainingstage.ntistudio.co.uk/slideshows/2/presentation)

[http://pastebin.com/nYQiEfqB](http://pastebin.com/nYQiEfqB)

我现在希望能够将幻灯片分类到相关部分，然后导航到每个部分的开头，但不确定如何执行此操作。主要问题是内容将是动态的（使用 rails 构建），因此无法将值硬编码到每个幻灯片中。

谁能给我一些关于从哪里开始 jQuery 的指示，以便我可以塑造 rails 后端？一个类似的让我解构的工作项目也可能很好。

任何关于这个问题的提示或提示都非常受欢迎。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T10:28:48.767

*   为部分第一页上的元素提供唯一 ID。
*   使用 jQuery 查找该元素的 offset() [http://api.jquery.com/offset/](http://api.jquery.com/offset/)

*   计算该元素存在的幻灯片。粗略算法：current_slide = Math.ceil($('example').offset().left / slide_width);

注意：您将希望始终对上述操作的结果进行四舍五入，因为您将放映的第一张幻灯片初始化为 1。

缺点：我不知道 offset() 是否真的会根据幻灯片的完整文档或只是单个幻灯片来报告元素。

这个解决方案很混乱，它甚至可能不起作用，但也许其中的想法对你有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T20:10:46.860

使用标识符对每个元素进行分类。例如，一个猫类，将类“猫”添加到每个项目。假设您在猫之后养狗，并且您想去养狗。

```
var slideAmount = $('.cats').length * 500 //500 being your viewport width
$('.carouselParent').animate({'left' : -slideAmount}); 
```

这是非常基本的逻辑位，我想你会明白我在说什么？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T02:13:08.303

在查看了您的网站目标后，我刚刚遇到了满足您要求的**完美jQuery 滑块。**

**jQuery Local Scroll**可以轻松处理 AJAX 内容，并允许在您的主要部分中包含**子部分。**

**jQuery AJAX Local Scroll v1.2.7:** [**网页 AJAX Demo**](http://demos.flesler.com/jquery/localScroll/ajax/)和主页是[**HERE**](http://flesler.blogspot.com/2009/03/jquerylocalscroll-127-released.html)。

**编辑：**如果滚动条是在页面加载时动态创建的，那么请查看它们的正常[**非 AJAX 版本**](http://demos.flesler.com/jquery/localScroll/)，该版本显示了部分和子部分的不同导航技术。

**EDIT2：**至于使用 jQuery 在不同元素之间导航，这个插件也可以使用 jQuery 选择器滚动到任何元素。

# css - CSS 下拉菜单未正确显示

> ID：10947821
> 
> 赞同：0
> 
> 时间：2012-06-08T11:18:17.207
> 
> 标签：css, menu

我在将 CSS 下拉菜单更改为下拉菜单时遇到了一些麻烦。我想我快到了，但由于某种原因，某些按钮无法正确显示（文本向下移动，但菜单向上移动）。有关实际代码，请参见crisislab.nl。

任何帮助将非常感激！

```
#navigation {
    width: 980px;
    height: 38px;
}

#navigation li {
    float: left;
    position: relative;
    top: 220px;
}

#navigation li:hover {
    background: transparent  url(gfx/navigation_hover.png) repeat;
}

#navigation li a {
    text-transform: uppercase;
    color: white;
    padding: 13px 33px;
    line-height: 38px;
    font-size: 11px;
}

#navigation li a:hover {
    text-decoration: none;
}

#navigation li ul {
    position: absolute;
    background: transparent  url(gfx/navigation_hover.png) left top repeat;
    z-index: 1000;
    min-width: 100%;
    display:none; 
    left:-1px;
}

#navigation li:hover ul {
    bottom: 38px;
    display:block;   
}

#navigation li ul li {
    background: none;
    width: 100%;
}

#navigation li ul li:hover {
    background: none;
    background-color: #2a51b5;
}

#navigation li ul li a {
    text-transform: uppercase;
    color: white;
    padding-left: 8px 10px;
    line-height: 28px;
    width: 100%;
    display:block;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T11:25:37.000

`bottom: 38px;`从下面的代码中删除它：

```
#navigation li:hover ul {
    bottom: 38px;/*Just Remove This*/
    display: block;
} 
```

将 top:0 添加到 #navigation ul li ul li

```
#navigation li ul li {
    background: none repeat scroll 0 0 transparent;
    top: 0;/*Add This*/
    width: 100%;
} 
```

我想这会对你有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T12:21:11.973

当很难找到错误时，总是复制代码并将其分解成最小的最简单的块。

希望这会有所帮助：http: [//jsfiddle.net/ccS7q/](http://jsfiddle.net/ccS7q/)

但是，除非您使用 jquery 或 javascript，否则您将无法实现向上列出子列表的下拉菜单。上面的小提琴不能向上列出，您可以`ul li.menu-item ul` `top`随着列表的延长手动调整值。虽然工作量很大。我建议您改用 jquery。

# c# - gmail 帐户发送电子邮件的端口

> ID：10947827
> 
> 赞同：0
> 
> 时间：2012-06-08T11:18:43.810
> 
> 标签：c#

请有人帮我确定从 gmail 帐户发送电子邮件的正确端口是 25,465 还是 587。我检查了一些表格，它说 C# 类不支持使用 SSL 发送电子邮件，它使用 TSL 和端口用于TSL 是 587。它正确吗？我很困惑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T11:30:23.153

Gmail 通常在 .net 应用程序中使用端口号 587。检查以下示例代码示例

```
System.Net.Mail.SmtpClient SmtpClientObject = new System.Net.Mail.SmtpClient();

SmtpClientObject.UseDefaultCredentials = false;    
SmtpClientObject.Credentials = new System.Net.NetworkCredential("MyUserName@gmail.com", "myPassword");    
SmtpClientObject.Host = "smtp.gmail.com";    
SmtpClientObject.Port = 587;    
SmtpClientObject.EnableSsl = true;    
SmtpClientObject.Send("MyUserName@gmail.com", "YourUserName@gmail.com", "TestSubject", "MessageBody"); 
```

# ruby - 调试 Ruby 段错误

> ID：10947829
> 
> 赞同：7
> 
> 时间：2012-06-08T11:18:49.127
> 
> 标签：ruby, debugging, segmentation-fault

如何确定段错误是由于库不一致，还是我正在使用的某个 gem 中的错误？

```
$ uname -a
Linux [redacted] 3.2.0-24-generic #39-Ubuntu SMP Mon May 21 16:52:17 UTC 2012 x86_64 x86_64 x86_64 GNU/Linux
$ ruby1.9.1 --version
ruby 1.9.3p0 (2011-10-30 revision 33570) [x86_64-linux]

$ CPUPROFILE_OBJECTS=1 CPUPROFILE=/tmp/my_app_profile_objects RUBYOPT="-r`gem1.9.1 which perftools | tail -1`" ruby1.9.1 -e '[].map'
-e:1: [BUG] Segmentation fault
ruby 1.9.3p0 (2011-10-30 revision 33570) [x86_64-linux]

-- Control frame information -----------------------------------------------
c:0004 p:---- s:0009 b:0009 l:000008 d:000008 CFUNC  :map
c:0003 p:0010 s:0006 b:0006 l:0011f8 d:0002f8 EVAL   -e:1
c:0002 p:---- s:0004 b:0004 l:000003 d:000003 FINISH
c:0001 p:0000 s:0002 b:0002 l:0011f8 d:0011f8 TOP   

-- Ruby level backtrace information ----------------------------------------
-e:1:in `<main>'
-e:1:in `map'

-- C level backtrace information -------------------------------------------
/usr/lib/libruby-1.9.1.so.1.9(+0x155b29) [0x7fd39f1dab29] ../sysdeps/x86_64/multiarch/strcpy-ssse3.S:1638
/usr/lib/libruby-1.9.1.so.1.9(+0x57709) [0x7fd39f0dc709] vfscanf.c:1777
/usr/lib/libruby-1.9.1.so.1.9(rb_bug+0xb7) [0x7fd39f0dd137] vfscanf.c:1796
/usr/lib/libruby-1.9.1.so.1.9(+0xf604f) [0x7fd39f17b04f] wcfuncs.c:49
/lib/x86_64-linux-gnu/libc.so.6(+0x364c0) [0x7fd39ecfe4c0] ../sysdeps/posix/killpg.c:38
/usr/lib/libruby-1.9.1.so.1.9(rb_check_type+0xd8) [0x7fd39f0de7e8] vfscanf.c:1963
/usr/lib/libruby-1.9.1.so.1.9(rb_data_typed_object_alloc+0xad) [0x7fd39f0f340d] iofdopen.c:51
/usr/lib/libruby-1.9.1.so.1.9(+0x54f9f) [0x7fd39f0d9f9f] vfscanf.c:2014
/usr/lib/libruby-1.9.1.so.1.9(rb_enumeratorize+0x33) [0x7fd39f0dae33] vfscanf.c:2373
/usr/lib/libruby-1.9.1.so.1.9(+0x14e9a1) [0x7fd39f1d39a1] ../sysdeps/x86_64/multiarch/../strcmp.S:293
/usr/lib/libruby-1.9.1.so.1.9(+0x145912) [0x7fd39f1ca912] ../sysdeps/x86_64/multiarch/memcpy-ssse3.S:2001
/usr/lib/libruby-1.9.1.so.1.9(+0x14b31d) [0x7fd39f1d031d] ../sysdeps/x86_64/multiarch/memcpy-ssse3-back.S:2032
/usr/lib/libruby-1.9.1.so.1.9(rb_iseq_eval_main+0xaf) [0x7fd39f1d769f] ../sysdeps/x86_64/multiarch/../strcmp.S:1811
/usr/lib/libruby-1.9.1.so.1.9(+0x5b172) [0x7fd39f0e0172] vfscanf.c:1471
/usr/lib/libruby-1.9.1.so.1.9(ruby_exec_node+0x1d) [0x7fd39f0e0c5d] vfscanf.c:2288
/usr/lib/libruby-1.9.1.so.1.9(ruby_run_node+0x1e) [0x7fd39f0e280e] psiginfo.c:209
ruby1.9.1() [0x4007db]
/lib/x86_64-linux-gnu/libc.so.6(__libc_start_main+0xed) [0x7fd39ece976d] libc-start.c:226
ruby1.9.1() [0x400809]

-- Other runtime information -----------------------------------------------

* Loaded script: -e

* Loaded features:

    0 enumerator.so
    1 /usr/lib/ruby/1.9.1/x86_64-linux/enc/encdb.so
    2 /usr/lib/ruby/1.9.1/x86_64-linux/enc/trans/transdb.so
    3 /usr/lib/ruby/1.9.1/rubygems/defaults.rb
    4 /usr/lib/ruby/1.9.1/x86_64-linux/rbconfig.rb
    5 /usr/lib/ruby/1.9.1/rubygems/deprecate.rb
    6 /usr/lib/ruby/1.9.1/rubygems/exceptions.rb
    7 /usr/lib/ruby/1.9.1/rubygems/custom_require.rb
    8 /usr/lib/ruby/1.9.1/rubygems.rb
    9 /var/lib/gems/1.9.1/gems/perftools.rb-2.0.0/lib/perftools.so

* Process memory map:

00400000-00401000 r-xp 00000000 08:07 704429                             /usr/bin/ruby1.9.1
00600000-00601000 r--p 00000000 08:07 704429                             /usr/bin/ruby1.9.1
00601000-00602000 rw-p 00001000 08:07 704429                             /usr/bin/ruby1.9.1
01464000-016e4000 rw-p 00000000 00:00 0                                  [heap]
7fd39c3e1000-7fd39cf53000 rw-p 00000000 00:00 0 
7fd39cf53000-7fd39cf68000 r-xp 00000000 08:06 5443                       /lib/x86_64-linux-gnu/libgcc_s.so.1
7fd39cf68000-7fd39d167000 ---p 00015000 08:06 5443                       /lib/x86_64-linux-gnu/libgcc_s.so.1
7fd39d167000-7fd39d168000 r--p 00014000 08:06 5443                       /lib/x86_64-linux-gnu/libgcc_s.so.1
7fd39d168000-7fd39d169000 rw-p 00015000 08:06 5443                       /lib/x86_64-linux-gnu/libgcc_s.so.1
7fd39d169000-7fd39d24b000 r-xp 00000000 08:07 137087                     /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.16
7fd39d24b000-7fd39d44a000 ---p 000e2000 08:07 137087                     /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.16
7fd39d44a000-7fd39d452000 r--p 000e1000 08:07 137087                     /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.16
7fd39d452000-7fd39d454000 rw-p 000e9000 08:07 137087                     /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.16
7fd39d454000-7fd39d469000 rw-p 00000000 00:00 0 
7fd39d469000-7fd39d47d000 r-xp 00000000 08:06 144897                     /var/lib/gems/1.9.1/gems/perftools.rb-2.0.0/lib/perftools.so
7fd39d47d000-7fd39d67c000 ---p 00014000 08:06 144897                     /var/lib/gems/1.9.1/gems/perftools.rb-2.0.0/lib/perftools.so
7fd39d67c000-7fd39d67d000 r--p 00013000 08:06 144897                     /var/lib/gems/1.9.1/gems/perftools.rb-2.0.0/lib/perftools.so
7fd39d67d000-7fd39d67e000 rw-p 00014000 08:06 144897                     /var/lib/gems/1.9.1/gems/perftools.rb-2.0.0/lib/perftools.so
7fd39d67e000-7fd39d682000 rw-p 00000000 00:00 0 
7fd39d682000-7fd39d684000 r-xp 00000000 08:07 157727                     /usr/lib/ruby/1.9.1/x86_64-linux/enc/trans/transdb.so
7fd39d684000-7fd39d884000 ---p 00002000 08:07 157727                     /usr/lib/ruby/1.9.1/x86_64-linux/enc/trans/transdb.so
7fd39d884000-7fd39d885000 r--p 00002000 08:07 157727                     /usr/lib/ruby/1.9.1/x86_64-linux/enc/trans/transdb.so
7fd39d885000-7fd39d886000 rw-p 00003000 08:07 157727                     /usr/lib/ruby/1.9.1/x86_64-linux/enc/trans/transdb.so
7fd39d886000-7fd39d888000 r-xp 00000000 08:07 157743                     /usr/lib/ruby/1.9.1/x86_64-linux/enc/encdb.so
7fd39d888000-7fd39da87000 ---p 00002000 08:07 157743                     /usr/lib/ruby/1.9.1/x86_64-linux/enc/encdb.so
7fd39da87000-7fd39da88000 r--p 00001000 08:07 157743                     /usr/lib/ruby/1.9.1/x86_64-linux/enc/encdb.so
7fd39da88000-7fd39da89000 rw-p 00002000 08:07 157743                     /usr/lib/ruby/1.9.1/x86_64-linux/enc/encdb.so
7fd39da89000-7fd39e16c000 r--p 00000000 08:07 134744                     /usr/lib/locale/locale-archive
7fd39e16c000-7fd39e265000 r-xp 00000000 08:06 5454                       /lib/x86_64-linux-gnu/libm-2.15.so
7fd39e265000-7fd39e464000 ---p 000f9000 08:06 5454                       /lib/x86_64-linux-gnu/libm-2.15.so
7fd39e464000-7fd39e465000 r--p 000f8000 08:06 5454                       /lib/x86_64-linux-gnu/libm-2.15.so
7fd39e465000-7fd39e466000 rw-p 000f9000 08:06 5454                       /lib/x86_64-linux-gnu/libm-2.15.so
7fd39e466000-7fd39e46f000 r-xp 00000000 08:06 5430                       /lib/x86_64-linux-gnu/libcrypt-2.15.so
7fd39e46f000-7fd39e66f000 ---p 00009000 08:06 5430                       /lib/x86_64-linux-gnu/libcrypt-2.15.so
7fd39e66f000-7fd39e670000 r--p 00009000 08:06 5430                       /lib/x86_64-linux-gnu/libcrypt-2.15.so
7fd39e670000-7fd39e671000 rw-p 0000a000 08:06 5430                       /lib/x86_64-linux-gnu/libcrypt-2.15.so
7fd39e671000-7fd39e69f000 rw-p 00000000 00:00 0 
7fd39e69f000-7fd39e6a1000 r-xp 00000000 08:06 5435                       /lib/x86_64-linux-gnu/libdl-2.15.so
7fd39e6a1000-7fd39e8a1000 ---p 00002000 08:06 5435                       /lib/x86_64-linux-gnu/libdl-2.15.so
7fd39e8a1000-7fd39e8a2000 r--p 00002000 08:06 5435                       /lib/x86_64-linux-gnu/libdl-2.15.so
7fd39e8a2000-7fd39e8a3000 rw-p 00003000 08:06 5435                       /lib/x86_64-linux-gnu/libdl-2.15.so
7fd39e8a3000-7fd39e8aa000 r-xp 00000000 08:06 5508                       /lib/x86_64-linux-gnu/librt-2.15.so
7fd39e8aa000-7fd39eaa9000 ---p 00007000 08:06 5508                       /lib/x86_64-linux-gnu/librt-2.15.so
7fd39eaa9000-7fd39eaaa000 r--p 00006000 08:06 5508                       /lib/x86_64-linux-gnu/librt-2.15.so
7fd39eaaa000-7fd39eaab000 rw-p 00007000 08:06 5508                       /lib/x86_64-linux-gnu/librt-2.15.so
7fd39eaab000-7fd39eac3000 r-xp 00000000 08:06 5502                       /lib/x86_64-linux-gnu/libpthread-2.15.so
7fd39eac3000-7fd39ecc2000 ---p 00018000 08:06 5502                       /lib/x86_64-linux-gnu/libpthread-2.15.so
7fd39ecc2000-7fd39ecc3000 r--p 00017000 08:06 5502                       /lib/x86_64-linux-gnu/libpthread-2.15.so
7fd39ecc3000-7fd39ecc4000 rw-p 00018000 08:06 5502                       /lib/x86_64-linux-gnu/libpthread-2.15.so
7fd39ecc4000-7fd39ecc8000 rw-p 00000000 00:00 0 
7fd39ecc8000-7fd39ee7b000 r-xp 00000000 08:06 5422                       /lib/x86_64-linux-gnu/libc-2.15.so
7fd39ee7b000-7fd39f07a000 ---p 001b3000 08:06 5422                       /lib/x86_64-linux-gnu/libc-2.15.so
7fd39f07a000-7fd39f07e000 r--p 001b2000 08:06 5422                       /lib/x86_64-linux-gnu/libc-2.15.so
7fd39f07e000-7fd39f080000 rw-p 001b6000 08:06 5422                       /lib/x86_64-linux-gnu/libc-2.15.so
7fd39f080000-7fd39f085000 rw-p 00000000 00:00 0 
7fd39f085000-7fd39f0f0000 r-xp 00000000 08:07 158047                     /usr/lib/libruby-1.9.1.so.1.9.1
7fd39f0f0000-7fd39f0f3000 rwxp 0006b000 08:07 158047                     /usr/lib/libruby-1.9.1.so.1.9.1
7fd39f0f3000-7fd39f275000 r-xp 0006e000 08:07 158047                     /usr/lib/libruby-1.9.1.so.1.9.1
7fd39f275000-7fd39f474000 ---p 001f0000 08:07 158047                     /usr/lib/libruby-1.9.1.so.1.9.1
7fd39f474000-7fd39f479000 r--p 001ef000 08:07 158047                     /usr/lib/libruby-1.9.1.so.1.9.1
7fd39f479000-7fd39f47d000 rw-p 001f4000 08:07 158047                     /usr/lib/libruby-1.9.1.so.1.9.1
7fd39f47d000-7fd39f499000 rw-p 00000000 00:00 0 
7fd39f499000-7fd39f4bb000 r-xp 00000000 08:06 5402                       /lib/x86_64-linux-gnu/ld-2.15.so
7fd39f59b000-7fd39f6a1000 rw-p 00000000 00:00 0 
7fd39f6b4000-7fd39f6b5000 rw-p 00000000 00:00 0 
7fd39f6b5000-7fd39f6b6000 ---p 00000000 00:00 0 
7fd39f6b6000-7fd39f6bb000 rw-p 00000000 00:00 0 
7fd39f6bb000-7fd39f6bc000 r--p 00022000 08:06 5402                       /lib/x86_64-linux-gnu/ld-2.15.so
7fd39f6bc000-7fd39f6be000 rw-p 00023000 08:06 5402                       /lib/x86_64-linux-gnu/ld-2.15.so
7fff507f8000-7fff50819000 rw-p 00000000 00:00 0                          [stack]
7fff50941000-7fff50942000 r-xp 00000000 00:00 0                          [vdso]
ffffffffff600000-ffffffffff601000 r-xp 00000000 00:00 0                  [vsyscall]

[NOTE]
You may have encountered a bug in the Ruby interpreter or extension libraries.
Bug reports are welcome.
For details: http://www.ruby-lang.org/bugreport.html

Aborted (core dumped) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-18T23:31:53.197

您可以通过调试来找出软件的哪个部分导致了分段错误——这对你来说可能并不奇怪——*调试*！如你看到的...

```
Aborted (core dumped) 
```

...有一个核心转储。

只需在您的可执行文件和核心转储上启动 gdb 并找出其参数`strcpy`（参见回溯的第一行）是什么。然后通过堆栈跟踪和代码向后走。似乎已经编译了调试符号，所以你很幸运，你可以看到实际调用了哪个函数以及提供了哪些参数——至少如果错误没有破坏堆栈的话。

但是，如果您对调试 C 或汇编代码不太熟悉，您可能希望等待 perftools 的开发人员调试此[问题](https://github.com/tmm1/perftools.rb/issues/46)。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-06-08T12:15:48.093

看起来 Ruby 本身正在崩溃，所以很有可能，这是一个错误。Ruby 1.9.3 是最新的，所以你可以试试看是否修复了错误。

# apache - htaccess 移动重定向到子域无法正常工作

> ID：10947831
> 
> 赞同：0
> 
> 时间：2012-06-08T11:18:52.837
> 
> 标签：apache, .htaccess, redirect, mobile

我正在使用以下 htaccess 代码来重定向移动用户

```
 # Mobile Redirection
    RewriteCond %{HTTP_USER_AGENT} "android|blackberry|ipad|iphone|ipod|iemobile|opera mobile|palmos|webos|googlebot-mobile" [NC]
    RewriteRule ^$ http://m.mydomain.com [R,L] 
```

问题是它仅在用户输入[http://mydomain.com/](http://mydomain.com/)时才有效 如果我输入[http://mydomain.com/anyurl](http://mydomain.com/anyurl) 它不会重定向到子域。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T12:01:59.417

您正在将根 url 与 regex 匹配`^$`。

试试`^.*$`，如果你想重定向到相关的移动页面，该行应该是`RewriteRule ^(.*)$ http://m.mydomain.com/$1 [R,L]`(`$1`是括号中的匹配模式)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T12:35:33.310

将重写规则更改为以下内容：

```
RewriteRule ^.*$ http://m.mydomain.com [R,L] 
```

# objective-c - 启用 ARC 和 armv6 的应用程序是否可以在 iOS4 版本以下运行？

> ID：10947834
> 
> 赞同：3
> 
> 时间：2012-06-08T11:19:03.197
> 
> 标签：objective-c, ios, ios5, ios4, automatic-ref-counting

启用 ARC 和 armv6 组合的应用程序是否可以在 iOS4 版本以下运行？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-08T11:28:51.833

从[文档](http://developer.apple.com/library/mac/#releasenotes/ObjectiveC/RN-TransitioningToARC/Introduction/Introduction.html)

> Mac OS X v10.6 和 v10.7（64 位应用程序）以及 iOS 4 和 iOS 5 的 Xcode 4.2 支持 ARC。Mac OS X v10.6 和 iOS 4 不支持弱引用。

由于 iOS 5.0 之前的版本不支持弱引用，我认为您不能在旧项目中运行启用 ARC 的项目。

编辑：感谢@rokjarc 提到 about `unsafe_unretained`，它将在 iOS 4 以上设备上工作以替换弱引用。但是对于 OP 关于“ARC 项目是否可以在 iOS 4.0 之前的版本上工作”的问题的答案必须是否定的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-08T11:53:48.297

您不能在*armv6*中启用 ARC 。如果架构是*armv6 armv7*或只有*armv7*，那么您可以启用 ARC。

所以回答你的问题：它在 iOS4 版本以下不起作用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-08T12:05:43.527

在您的架构中添加 armv6 和 armv7，所有版本都支持

# delphi - 如何制作带有滚动条的弹出菜单？

> ID：10947836
> 
> 赞同：7
> 
> 时间：2012-06-08T11:19:07.477
> 
> 标签：delphi

我`TPopupMenu`在我的程序中使用，我想在其中添加一个垂直滚动条并能够设置它的大小（比如 10 个可见项目），并处理移动滑块滚动条的事件（在单击按钮后或滚动鼠标后车轮）。我想知道具有此功能的组件是否存在，或者我会对创建此组件的理论感到高兴。例如，我需要类似于 Vista/7 资源管理器地址栏中的弹出菜单的行为（当前文件夹中的子文件夹列表）

谢谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-08T12:37:51.587

***更新：***

以下代码显示了如何扩展标准弹出菜单以显示您自己的弹出表单而不是真实菜单。菜单项被渲染到列表框中，其中`DrawMenuItem`还包含项目的自定义绘图（如果有的话）。项目高度测量也被考虑在内，因此项目高度应该与使用标准菜单相同。控件中引入了以下属性`TPopupMenu`：

*   PopupForm - 是使用自定义模式时必须设置的强制属性，它是弹出菜单时需要保持焦点的表单
*   PopupMode - 它是普通模式和特殊模式之间的切换（默认为 pmStandard）
    - pmCustom - 将使用自定义表单而不是标准弹出菜单
    - pmStandard - 将使用标准弹出菜单并忽略所有新属性
*   PopupCount - 是菜单弹出时要显示的项目的计数，与组合框的 DropDownCount 含义相似（默认为 5）

***如何扩展弹出菜单控件：***

创建一个空表格并命名为`TPopupForm`，单位另存为`PopupUnit`并复制，粘贴以下代码并再次保存：

```
unit PopupUnit;

interface

uses
  Windows, Messages, SysUtils, Variants, Classes, Graphics, Controls, Forms,
  Dialogs, StdCtrls, Menus;

type
  TPopupMode = (pmStandard, pmCustom);
  TPopupMenu = class(Menus.TPopupMenu)
  private
    FPopupForm: TForm;
    FPopupMode: TPopupMode;
    FPopupCount: Integer;
  public
    constructor Create(AOwner: TComponent); override;
    procedure Popup(X, Y: Integer); override;
    property PopupForm: TForm read FPopupForm write FPopupForm;
    property PopupMode: TPopupMode read FPopupMode write FPopupMode;
    property PopupCount: Integer read FPopupCount write FPopupCount;
  end;

type
  TMenuItem = class(Menus.TMenuItem)
  end;
  TPopupForm = class(TForm)
  private
    FListBox: TListBox;
    FPopupForm: TForm;
    FPopupMenu: TPopupMenu;
    FPopupCount: Integer;
    procedure WMActivate(var AMessage: TWMActivate); message WM_ACTIVATE;
    procedure ListBoxDrawItem(Control: TWinControl; Index: Integer;
      Rect: TRect; State: TOwnerDrawState);
    procedure ListBoxMeasureItem(Control: TWinControl; Index: Integer;
      var Height: Integer);
    procedure ListBoxMouseDown(Sender: TObject; Button: TMouseButton;
      Shift: TShiftState; X, Y: Integer);
    procedure ListBoxMouseUp(Sender: TObject; Button: TMouseButton;
      Shift: TShiftState; X, Y: Integer);
    procedure ListBoxMouseMove(Sender: TObject; Shift: TShiftState; X,
      Y: Integer);
    procedure ListBoxKeyDown(Sender: TObject; var Key: Word;
      Shift: TShiftState);
  protected
    procedure Paint; override;
    procedure CreateParams(var Params: TCreateParams); override;
  public
    constructor Create(AOwner: TComponent; APopupForm: TForm;
      APopupMenu: TPopupMenu; APopupCount: Integer); reintroduce;
  end;

var
  PopupForm: TPopupForm;

implementation

{$R *.dfm}

{ TPopupForm }

constructor TPopupForm.Create(AOwner: TComponent; APopupForm: TForm;
  APopupMenu: TPopupMenu; APopupCount: Integer);
var
  I: Integer;
  MaxWidth: Integer;
  MaxHeight: Integer;
  ItemWidth: Integer;
  ItemHeight: Integer;
begin
  inherited Create(AOwner);
  BorderStyle := bsNone;

  FPopupForm := APopupForm;
  FPopupMenu := APopupMenu;
  FPopupCount := APopupCount;

  FListBox := TListBox.Create(Self);
  FListBox.Parent := Self;
  FListBox.BorderStyle := bsNone;
  FListBox.Style := lbOwnerDrawVariable;
  FListBox.Color := clMenu;
  FListBox.Top := 2;
  FListBox.Left := 2;

  MaxWidth := 0;
  MaxHeight := 0;

  FListBox.Items.BeginUpdate;
  try
    FListBox.Items.Clear;
    for I := 0 to FPopupMenu.Items.Count - 1 do
    begin
      TMenuItem(FPopupMenu.Items[I]).MeasureItem(FListBox.Canvas, ItemWidth,
        ItemHeight);
      if ItemWidth > MaxWidth then
        MaxWidth := ItemWidth;
      if I < FPopupCount then
        MaxHeight := MaxHeight + ItemHeight;
      FListBox.Items.Add('');
    end;
  finally
    FListBox.Items.EndUpdate;
  end;
  if FPopupMenu.Items.Count > FPopupCount then
    MaxWidth := MaxWidth + GetSystemMetrics(SM_CXVSCROLL) + 16;

  FListBox.Width := MaxWidth;
  FListBox.Height := MaxHeight;
  FListBox.ItemHeight := ItemHeight;
  FListBox.OnMouseDown := ListBoxMouseDown;
  FListBox.OnMouseUp := ListBoxMouseUp;
  FListBox.OnDrawItem := ListBoxDrawItem;
  FListBox.OnKeyDown := ListBoxKeyDown;
  FListBox.OnMeasureItem := ListBoxMeasureItem;
  FListBox.OnMouseMove := ListBoxMouseMove;

  ClientWidth := FListBox.Width + 4;
  ClientHeight := FListBox.Height + 4;
end;

procedure TPopupForm.CreateParams(var Params: TCreateParams);
begin
  inherited;
  Params.WindowClass.Style := Params.WindowClass.Style or CS_DROPSHADOW;
end;

procedure TPopupForm.ListBoxDrawItem(Control: TWinControl; Index: Integer;
  Rect: TRect; State: TOwnerDrawState);
begin
  DrawMenuItem(FPopupMenu.Items[Index], FListBox.Canvas, Rect, State);
end;

procedure TPopupForm.ListBoxKeyDown(Sender: TObject; var Key: Word;
  Shift: TShiftState);
begin
  case Key of
    VK_ESCAPE: Close;
    VK_RETURN:
    begin
      Close;
      if FListBox.ItemIndex <> -1 then
        FPopupMenu.Items[FListBox.ItemIndex].Click;
    end;
  end;
end;

procedure TPopupForm.ListBoxMeasureItem(Control: TWinControl; Index: Integer;
  var Height: Integer);
var
  ItemWidth: Integer;
begin
  TMenuItem(FPopupMenu.Items[Index]).MeasureItem(FListBox.Canvas, ItemWidth,
    Height);
end;

procedure TPopupForm.ListBoxMouseDown(Sender: TObject; Button: TMouseButton;
  Shift: TShiftState; X, Y: Integer);
begin
  SetCapture(FListBox.Handle);
end;

procedure TPopupForm.ListBoxMouseMove(Sender: TObject; Shift: TShiftState; X,
  Y: Integer);
var
  ItemIndex: Integer;
begin
  ItemIndex := FListBox.ItemAtPos(Point(X, Y), True);
  if ItemIndex <> FListBox.ItemIndex then
    FListBox.ItemIndex := ItemIndex;
end;

procedure TPopupForm.ListBoxMouseUp(Sender: TObject; Button: TMouseButton;
  Shift: TShiftState; X, Y: Integer);
begin
  Close;
  if FListBox.ItemIndex <> -1 then
    FPopupMenu.Items[FListBox.ItemIndex].Click;
end;

procedure TPopupForm.Paint;
begin
  inherited;
  Canvas.Pen.Color := clSilver;
  Canvas.Rectangle(ClientRect);
end;

procedure TPopupForm.WMActivate(var AMessage: TWMActivate);
begin
  SendMessage(FPopupForm.Handle, WM_NCACTIVATE, 1, 0);
  inherited;
  if AMessage.Active = WA_INACTIVE then
    Release;
end;

{ TPopupMenu }

constructor TPopupMenu.Create(AOwner: TComponent);
begin
  inherited;
  FPopupMode := pmStandard;
  FPopupCount := 5;
end;

procedure TPopupMenu.Popup(X, Y: Integer);
begin
  case FPopupMode of
    pmCustom:
    with TPopupForm.Create(nil, FPopupForm, Self, FPopupCount) do
    begin
      Top := Y;
      Left := X;
      Show;
    end;
    pmStandard: inherited;
  end;
end;

end. 
```

***如何使用扩展的弹出菜单控件：***

只需在子句`PopupUnit`末尾添加`uses`，弹出菜单控件就会获得新属性。

如果您想使用自定义表单而不是真实菜单的模式，请在菜单弹出之前使用以下内容：

```
// this will enable the custom mode
PopupMenu1.PopupMode := pmCustom;
// this will fake the currently focused form as active, it is mandatory to
// assign the currently focused form to this property (at least now); so Self
// used here is the representation of the currently focused form
PopupMenu1.PopupForm := Self;
// this will show 5 menu items and the rest will be accessible by scroll bars
PopupMenu1.PopupCount := 5; 
```

如果您想使用经典弹出菜单，请保留设置，因为标准模式是默认模式，或者只是以这种方式设置模式，标准弹出菜单将显示（在这种情况下，其余新属性将被忽略）：

```
PopupMenu1.PopupMode := pmStandard; 
```

***免责声明：***

代码需要审查（至少根本没有菜单快捷方式的实现）并且应该改进某些部分。

# php - 如何使用 PHP 在 MySQL 中编写 table.column？

> ID：10947839
> 
> 赞同：-1
> 
> 时间：2012-06-08T11:19:35.577
> 
> 标签：php, mysql, arrays

如何`table.column`用 PHP 编写代码？

例如，这给了我错误，表中没有这样的列。

```
$aColumns = array( 'a.TIMESTAMP'); 
```

如何编写它才能真正在 php 和 mysql 中工作？当我将此代码放入 MySQL 时，一切正常。任何的想法？

当我只放一列来查看时

```
$aColumns = array( 'TIMESTAMP'); 
```

工作正常。

编辑：

我想要达到的是获得一定的`table.column`. 也许我的语法不正确。

例如，当我将此代码放入 MySQL 时：

```
SELECT a.id,b.id from a,b 
```

当我在 PHP 中执行与我之前向您展示的相同的事情时，这非常有效，然后我不断收到错误

编辑2：

```
 $aColumns = array( 'a.id','b.id','c.id');

    /* Indexed column (used for fast and accurate table cardinality) */
    $sIndexColumn = "id";

    /* DB table to use */
    $sTable = "a,b,c" ;
    $swhere="a.id=b.id AND c.id=a.id" 
```

这是我真正需要的一个例子

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T11:30:30.363

干得好：

```
SELECT
    a.id AS a_id, b.id AS b_id
FROM
    a
INNER JOIN b ON (a.id = b.id) 
```

这里的技巧是*列别名*，它允许我们避免结果集中的命名冲突。

# winforms - winforms中的sql连接错误？窗口应用程序？

> ID：10947847
> 
> 赞同：1
> 
> 时间：2012-06-08T11:20:05.943
> 
> 标签：winforms

在 Microsoft Window 应用程序中，我在 app.config 文件中编写连接代码，当我在 winforms 中访问时，它给出了错误，请你帮帮我。

```
 private void btnInsert_Click(object sender, EventArgs e)
 {
     SqlConnection con = new SqlConnection(ConfigurationManager.AppSettings["mycon"]);

     cmd = new SqlCommand("USP_Insert_Students", con );
     cmd.CommandType = CommandType.StoredProcedure; 
     con.Open();

     cmd.Parameters.AddWithValue("@Stname", txtStname.Text);
     cmd.Parameters.AddWithValue("@class", txtClass.Text);
     cmd.Parameters.AddWithValue("@Section", txtSection.Text);
     cmd.Parameters.AddWithValue("@Address", txtAddress.Text);
     cmd.Parameters.AddWithValue("@states", cmdStates.SelectedText.ToString());
     cmd.ExecuteNonQuery();
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T11:31:43.750

你的错误是：在`mycon`里面定义了`<connectionStrings>`- 但你试图从`.AppSettings`!

那永远都行不通...

你需要`ConfigurationManager.ConnectionStrings["mycon"].ConnectionString`改用。

试试这个代码：

```
private void btnInsert_Click(object sender, EventArgs e)
{
     string connectionString = ConfigurationManager.ConnectionStrings["mycon"].ConnectionString;

     using(SqlConnection con = new SqlConnection(connectionString))
     using(SqlCommand cmd = new SqlCommand("dbo.USP_Insert_Students", con))
     {
         cmd.CommandType = CommandType.StoredProcedure; 

         cmd.Parameters.AddWithValue("@Stname", txtStname.Text);
         cmd.Parameters.AddWithValue("@class", txtClass.Text);
         cmd.Parameters.AddWithValue("@Section", txtSection.Text);
         cmd.Parameters.AddWithValue("@Address", txtAddress.Text);
         cmd.Parameters.AddWithValue("@states", cmdStates.SelectedText.ToString());

         con.Open();
         cmd.ExecuteNonQuery();
         con.Close();        
     }
} 
```

# jsp - 如何使用来自 DTO 的数据创建和填充动态 html 表

> ID：10947856
> 
> 赞同：1
> 
> 时间：2012-06-08T11:20:47.733
> 
> 标签：jsp, servlets, jstl, dto, html-table

我想在 JSP 页面上显示一个使用 JSTL 的动态 HTML 表。（要插入表中的数据以 Vector of 的形式出现（DTO 包含许多参数，例如姓名、电子邮件、地址、电话等...））谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-08T15:37:41.687

[http://www.java-forums.org/javaserver-pages-jsp-jstl/30404-iterating-over-array-objects-jstl.html](http://www.java-forums.org/javaserver-pages-jsp-jstl/30404-iterating-over-array-objects-jstl.html) 这是一个很好的例子，试试上面的代码。在那段代码中的Demo类只不过是 DTO。谢谢

# java - 在 webdriver 2.21 和 mozilla11 中处理警报

> ID：10947857
> 
> 赞同：1
> 
> 时间：2012-06-08T11:20:51.213
> 
> 标签：java, webdriver, alert, mozilla

我正在使用 Firefox 11 + WebDriver 2.21.0 / WebDriver 2.22.0（都试过了）。

在我的场景中，当我单击一个选项卡时，它会打开一个确认框，然后单击`OK`它开始从服务器加载新选项卡。

所以我将这种情况处理为：

```
driver.findElement(By.id("myTab")).click();
driver.switchTo().alert().accept(); 
```

但是在单击“mytab”后，它会无限期地等待窗口加载。所以它没有出现`alert.accept()`，浏览器等待接受确认对话框来加载新页面，所以我最终陷入了死锁状态。

此代码在 Internet Explorer 中运行良好。

请帮忙，这种情况怎么处理？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T00:50:51.413

先生，您可能在 Selenium WebDriver 中发现了一个错误（或至少是一个不一致的地方）。

看看[这里](http://code.google.com/p/selenium/issues/list)有没有发现过，如果没有，请随意[归档](http://code.google.com/p/selenium/issues/entry)。

同时，您可以尝试[使用“不稳定”加载策略](http://code.google.com/p/selenium/wiki/FirefoxDriver)[进行`FirefoxDriver`](http://code.google.com/p/selenium/wiki/FirefoxDriver)加载，然后（如果还不够）可能[`driver.manage().timeouts().pageLoadTimeout()`](http://selenium.googlecode.com/svn/trunk/docs/api/java/org/openqa/selenium/WebDriver.Timeouts.html#pageLoadTimeout%28long,%20java.util.concurrent.TimeUnit%29)（仅适用于具有“不稳定”设置的 Firefox）。

~~作为一种解决方法，您可以尝试通过 JavaScript 单击选项卡 - 尽管我不确定它是否会起作用：~~

```
((JavascriptExecutor)driver).executeScript("document.getElementById('myTab').click()"); 
```

* * *

**编辑：**

作为另一种解决方法（受 Selenium RC 启发），您可以做些什么，您可以暂时禁用确认对话框...

```
// assuming your driver can handle JS ;)
JavascriptExecutor js = (JavascriptExecutor)driver;

// stores the original confirm() function and replaces it
js.executeScript("window.originalConfirm = window.confirm;" 
        + "window.confirm = function(m) { return true; };");

driver.findElement(By.id("myTab")).click();
// it should not even fire the confirm and just proceed

// get the confirm back
js.executeScript("window.confirm = window.originalConfirm;"); 
```

# css - 元素和自身属性的 CSS 规范，没有空格

> ID：10947861
> 
> 赞同：0
> 
> 时间：2012-06-08T11:21:06.707
> 
> 标签：css

以下样式在规格方面有什么区别？

```
 ul .active { background: #E7F3EF;}
  ul li.active { background: #E7F3EF;}

<ul>
  <li class="active">Item 1</li>
  <li>Item 2</li>
  <li>Item 3</li>
</ul> 
```

最后一个我错误地用 sass 编码，`ul li .active`花了我一些时间才弄清楚。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T11:24:32.687

```
ul .active { background: #E7F3EF;} 
```

这将匹配任何具有类名“活动”的元素，该元素是`ul`元素的后代。

```
ul li.active { background: #E7F3EF;} 
```

这将匹配任何`li`具有类名“活动”的元素，该元素是元素的后代`ul`。

```
ul li .active { background: #E7F3EF;} 
```

这将匹配任何具有类名“活动”的`li`元素，该元素是元素的后代，即元素的后代`ul`。

正如您所注意到的，空格是相关的。选择器中的空格通常表示后代组合子。

有关规范的相关部分，请参阅“[后代组合器](http://www.w3.org/TR/selectors/#descendant-combinators)”。

# android - 防止android在webapp中休眠

> ID：10947862
> 
> 赞同：2
> 
> 时间：2012-06-08T11:21:19.990
> 
> 标签：android, web-applications

我正在开发一个从服务器接收通知的**webapp 。**目前，目标设备只是 Android 4 设备 [三星 Galaxy Nexus]）。正常情况下，当用户一段时间不触摸屏幕时，屏幕会熄灭，锁定屏幕。

我在 developer.adnroid.con 页面中进行了搜索，但我所看到的只是处理比例和屏幕尺寸。

我不想用 webview 制作一个原生应用程序，因为 webapp 的好处是它不需要安装，你可以分享一个链接....

**有没有办法在不**使用带有 webview 的本机应用程序的情况下防止 android 从 webapp 休眠？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-10-29T17:57:02.050

自己寻找合适的解决方案。但是播放视频似乎可以解决问题。因此，循环播放隐藏在主要内容后面的小视频应该可以。您可能可以使用 src 的 dataURI 来进行复制和粘贴解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T11:41:12.610

我认为你在看什么取决于安卓浏览器。

或者您使用带有 webbview 的客户端 Android 应用程序，或者让设备通过锁定屏幕节省电池 :(

# objective-c - ios上xml解析的优化技巧和指南

> ID：10947864
> 
> 赞同：4
> 
> 时间：2012-06-08T11:21:25.707
> 
> 标签：objective-c, ios, xml, xml-parsing, xmpp

我正在寻找 ios 上 xml 解析的优化技巧和指南。我目前在我的一个项目中使用 KissXML 来解析大约 50 Hz 的消息。有了这个速率，我可以清楚地看到即使是相对较短的消息（大约 10 个元素），处理消息的高处理负载也是如此。

优化策略之一当然是选择“正确的”解析器。可以在此处找到可用的 ios 解析器之间的详细比较[http://www.raywenderlich.com/553/how-to-chose-the-best-xml-parser-for-your-iphone-project](http://www.raywenderlich.com/553/how-to-chose-the-best-xml-parser-for-your-iphone-project)。

但是，我目前正在尝试研究有关如何通过有效负载进行优化以尽可能提高性能的一般准则和技巧。希望高手对此有意见！非常感谢任何个人或部分提示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T11:29:22.880

至于不直接涉及解析 XML 的提示，但仍然可以帮助您完成该任务：

1.  在后台线程中进行解析可以轻松帮助您。使用 GCD，您还可以定义线程的优先级。
2.  您可以使用[此](http://developer.apple.com/library/ios/documentation/cocoa/conceptual/ObjCRuntimeGuide/ObjCRuntimeGuide.pdf)Apple 文档中的技术。在第 14 页，您可以阅读：

> 使用 methodForSelector: 来规避动态绑定可以节省消息传递所需的大部分时间。但是，仅当特定消息重复多次时，节省才会显着，如上面所示的 for 循环。

我实际上已经使用这种技术在对象数组上设置了一个值，并且我能够获得 0.7 秒的改进。可能不多，但在更重和重复的任务中，我确实认为它会有所作为。

# php - (Wordpress) - 显示自定义字段超链接的 PHP 变量

> ID：10947874
> 
> 赞同：0
> 
> 时间：2012-06-08T11:21:58.100
> 
> 标签：php, wordpress, variables, hyperlink

我有与特定书籍相关的作者，如果作者不止一个，我需要用逗号分隔它们。我已经使用 PHP implode 函数完成了这项工作，但我无法让它显示一串作者姓名，超链接（我无法正确设置变量）。

这是我最初拥有的代码，它显示了作者姓名，链接到他们各自的页面，但不是逗号分隔（没有内爆）。

```
<?php if(get_field('author')): ?>
        <?php foreach(get_field('author') as $related): ?>
            <a href="<?php echo get_permalink($related->ID); ?>"><?php echo get_the_title($related->ID) ?></a>&nbsp;
        <?php endforeach; ?>
    <?php endif; ?> 
```

这是我现在拥有的代码，它用逗号分隔有多个值的位置，但不能正确显示作者姓名：

```
<?php foreach(get_field('author') as $related);
$author = get_post_meta( $post->ID, 'author' ); 
$authorString = implode (',' , $author);
echo $authorString; 
?> 
```

我想我需要编辑 '$author = ' 变量以包含

```
<a href="<?php echo get_permalink($related->ID); ?>"><?php echo get_the_title($related->ID) ?></a> 
```

一些旧代码。任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T11:58:31.853

为什么要使用`implode`？如果计数器大于零，您不能只使用计数器并回显逗号吗？像那样：

```
<?php if(get_field('author')): ?>
    <?php $i = 0; foreach(get_field('author') as $related): ?>

        <?php if($i > 0) { echo ",&nbsp;"; } ?>

        <a href="<?php echo get_permalink($related->ID); ?>"><?php echo get_the_title($related->ID) ?></a>

    <?php ++$i; endforeach;  ?>
<?php endif; ?> 
```

这样你就可以使用你的工作代码。

# c# - 计算三角形的面积

> ID：10947885
> 
> 赞同：2
> 
> 时间：2012-06-08T11:22:49.647
> 
> 标签：c#

我正在使用此代码来计算三角形的面积，其值为 2、2 和 1。当我在袖珍计算器中进行计算时，我得到 0.97，但在 C# 中它是 0。我想这与它有关小数的四舍五入，但我已经从 i 和向上更改了最后一个值，但结果仍然是 0！我究竟做错了什么？帮忙打赏！谢谢！

```
double i = (valueA + valueB + valueC) / 2;
return Math.Round(Math.Sqrt(i * (i - valueA) * (i - valueB) * (i - valueC)),1); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-08T11:24:16.963

除以`2.0`or`2d`或`2D`

**原因：**整数除法只给出整数部分，去掉小数部分。

`2`是整数。`2.0`是双重价值。

```
double i = (valueA + valueB + valueC) / 2.0; 
```

或者

```
double i = (valueA + valueB + valueC) / 2d; 
```

或者

```
double i = (valueA + valueB + valueC) / 2D; 
```

第二行保持不变

```
return Math.Round(Math.Sqrt(i * (i - valueA) * (i - valueB) * (i - valueC)),1); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-08T11:24:36.120

请尝试`(valueA + valueB + valueC) / 2.0`。

# html - 为什么 display:table-cell 在没有 display:table 的情况下不能居中内容？

> ID：10947886
> 
> 赞同：3
> 
> 时间：2012-06-08T11:23:18.313
> 
> 标签：html, css, centering

我正在寻找最有效（或优雅）的方式来垂直和水平地居中可变高度的内容。我想出了这个：[http](http://cssdeck.com/t/2veysdkg/16) ://cssdeck.com/t/2veysdkg/16 ，它使用 css 表格将主要内容垂直居中。

我对编写这段特定代码的要求是：

*   必须能够垂直和水平居中可变和固定宽度的内容
*   居中的内容必须在正常的文档流中（所以没有重叠）
*   粘性页脚和普通页眉，均为 100% 宽度
*   尽可能少的 hack、丑陋的代码或非语义 html
*   我不关心对 IE6、IE7 的支持（我将为它们使用不同的样式表）

`display:table-row`奇怪的是，只有当 header 和 footer 设置为， body-tag设置为 时，才满足上述要求`display:table`。这很奇怪，因为据我了解，当缺少父表元素时，css 会生成匿名表元素。所以`display:table-cell`应该在没有所有周围元素的情况下工作，但我无法让它工作。

如果由我决定，我宁愿不要弄乱 body 标签的显示模式，并将页眉和页脚保留在`display:block`. 但我无法让它发挥作用。有谁知道为什么这不起作用，以及如何在不使用`display:table`and的情况下满足上述要求`display:table-row`？

*对于那些不想访问 cssdeck 来查看我的源代码的人，我会在这里发布：*

HTML

```
<!doctype html>
<html>
    <head>
        <meta charset="utf-8">
        <title>Vertical Centering</title>
    </head>
    <body>
        <div id="header">header</div>
        <div id="vertical">
            <div id="horizontal">content</div>
        </div>
        <div id="footer">footer</div>
    </body>
</html> 
```

CSS

```
body, html {
    height: 100%;
    width: 100%;
    margin: 0;
    padding: 0;
}

body {
    display: table;
}

#header {
    display: table-row;
    height: 2em;
    background: gray;
}

#vertical {
    display: table-cell;
    vertical-align: middle;
    width: 100%;
    height: 100%;
}

#horizontal {
    height: 500px;
    width: 500px;
    margin: auto;
    background: gray;
}

#footer {
    height: 2em;
    display: table-row;
    width: 100%;
    background: gray;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-11T07:02:58.617

**显示属性如何工作？**

display 属性允许您指定一系列与表格相关的值，以使元素显示为好像它们是表格元素一样。可用的显示值有：

*   `table`使元素表现得像一个表格元素
*   `table-row`使元素表现得像表格行 (tr) 元素
*   `table-cell`使元素表现得像表格单元 (td) 元素
*   `table-row-group`使元素表现得像表体行组 (tbody) 元素
*   `table-header-group`使元素的行为类似于表头行组（thead）元素
*   `table-footer-group`使元素的行为类似于表格页脚行组 (tfoot) 元素
*   `table-caption`使元素表现得像表格标题元素
*   `table-column`使元素表现得像表格列 (col) 元素
*   `table-column-group`使元素的行为类似于表列组 (colgroup) 元素

在此处查看完整列表... [http://www.digital-web.com/articles/everything_you_know_about_CSS_Is_wrong/](http://www.digital-web.com/articles/everything_you_know_about_CSS_Is_wrong/)

但你的问题可以这样解决

检查工作小提琴[http://jsfiddle.net/jZJXf/1/](http://jsfiddle.net/jZJXf/1/)

CSS应该是这样的。

```
body, html {
    height: 100%;
    width: 100%;
    margin: 0;
    padding: 0;
}
body {
    display: table;
}

#header {
    width: 100%;
    height: 2em;
    background: gray;
}

#vertical {
    display: table;
    width: 100%;
    height: 100%;
}

#horizontal {
    display:table;
    height: 500px;
    width: 500px;
    margin: 10% auto 0% auto;
    background: gray;
}

#footer {
    height: 2em;
    width: 100%;
    background: gray;
    bottom: 0px;
    display: table;

} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-10T14:00:53.793

实际上，浏览器*正在*按照您的预期插入一个匿名表格元素。但是，此元素的存在只是为了使表语义起作用。CSS 中没有任何方法可以针对这个匿名块来为其提供 100% 的宽度和高度，这是您的布局所需要的。

如果你想改变它的表现形式，你需要在你的 HTML 中使用一个实际的元素来充当“表格”对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T11:55:38.967

这对我有用（CSS）：

```
body, html {
    height: 100%;
    width: 100%;
    margin: 0;
    padding: 0;
}

body {
}

#header {
    height: 2em;
    background: gray;
}

#vertical {
    display: table-cell;
    vertical-align: middle;
    width: 500px;
    height: 500px;
}

#horizontal {
    height: 300px;
    width: 300px;
    margin: auto;
    background: gray;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-08T11:55:39.563

你的问题是布局。您需要一个显示表格的开放 div。然后在里面你下一个显示表格行的div。在里面你旁边是你的表格单元格。

```
<div id="testTable">
  <div id="testRow">
    <div id="testCell"></div>
    <div id="testCell"></div>
  </div>
  <div id="testRow">
    <div id="testCell"></div>
    <div id="testCell"></div>
  </div>
 </div> 
```

那应该是你的div的布局。

CSS如下。

```
#testTable {
display: table;
}
#testRow {
display: table-row;
}
#testCell {
display: table-cell;
} 
```

自然地，你会将你想要的内容添加到 div 中，并将额外的格式添加到 CSS 中。不过，这个大纲应该有助于作为指导。如果您需要视觉参考，请查看此站点。[http://www.quirksmode.org/css/display.html](http://www.quirksmode.org/css/display.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-10T13:54:51.437

在我看来，问题是你的 div 上的 % 高度/宽度。好吧，不一定是问题，而是您没有得到预期结果的原因。

与 html 表格非常相似，“display: table-cell”元素需要包含在表格和表格行中。

如果没有找到，将创建一个匿名表和表行（它在您的代码中）。现在，问题是匿名表将被设置为自动收缩内容。

此外，如果内容难以理解，任何设置内容大小的尝试都会被忽略。您确实在内容上给出了高度/宽度，但是，您现在告诉您的表格单元格占用**100% 的匿名表格**，这对浏览器没有任何意义。

基本上，您需要表格的原因是帮助浏览器智能地确定区域的尺寸。不过，您不必将其设置在身体上。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-11T03:12:19.277

尝试使用此 css 使用您的 html，我不确定 10% 的顶部、底部边距，但它适用于 con css 甲板。

```
body, html {
    margin: 0;
    padding: 0;
}

#header {
    width: 100%;
    height: 2em;
    background: gray;
}

#vertical {
    display: table;
    width: 100%;
    height: 100%;
}

#horizontal {
    display:table;
    height: 500px;
    width: 500px;
    margin: 10% auto;
    background: gray;
}

#footer {
    height: 2em;
    width: 100%;
    background: gray;
    bottom: 0px;
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-11T10:03:18.617

我自己想出了一些东西（满足设计/代码要求，并且只增加了一点额外的复杂性/无语义的 html）。

*   Pro：不需要在 display:table 上设置 body 标签，在 display:table-row 上设置页眉/页脚。
*   缺点：需要一个额外的（非语义的）div 用于 display:table 标签。

在这里查看：http: [//cssdeck.com/t/2veysdkg/51](http://cssdeck.com/t/2veysdkg/51)。

HTML

```
<!doctype html>
<html>
    <head>
        <meta charset="utf-8">
        <title>Vertical Centering</title>
    </head>
    <body>
        <div id="header">header</div>
        <div id="table">
            <div id="tablecell">
                <div id="content">content</div>
            </div>
        </div>
        <div id="footer">footer</div>
    </body>
</html> 
```

CSS

```
body, html {
    height: 100%;
    width: 100%;
    margin: 0;
    padding: 0;
}

#header {
    height: 2em;
    background: gray;
}

#table {
    width: 100%;
    height: 100%;
    display: table;
    margin-top: -2em;
    margin-bottom: -2em;
}

#tablecell {
    display: table-cell;
    vertical-align: middle;
}

#content {
    height: 500px;
    width: 500px;
    margin: 2em auto 2em;
    background: gray;
}

#footer {
    height: 2em;
    width: 100%;
    background: gray;
} 
```

# java - Android列表视图，如何定位没有边距的列表视图？

> ID：10947887
> 
> 赞同：1
> 
> 时间：2012-06-08T11:23:23.203
> 
> 标签：java, android, android-layout, android-relativelayout

我正在关注这个示例（第一条评论）， [如何使用“扩展活动”创建自定义 ListView？](https://stackoverflow.com/questions/5632666/how-to-create-a-custom-listview-with-extends-activity)

我想要的是制作完全相同的列表，但顶部没有那个 TextView。试图删除它但不得不恢复它，因为没有一个阵列适配器将无法工作（？）

所以我得到了这段代码，见下文，它正在工作，但我对我的保证金解决方案有点不满意。我也想做同样的事，但没有余地。底部的边距远低于： android:layout_marginTop="20dip"

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="#ffccd0"
    android:orientation="vertical" >

    <TextView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:background="#ffb0b6"
        android:textColor="#b3000d"
        android:textStyle="bold"
        android:typeface="sans"
        android:visibility="invisible" />

        <RelativeLayout
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"            
            android:background="#570000" >

            <TextView
                android:id="@+id/tv_1"
                android:layout_width="70dip"
                android:layout_height="wrap_content"
                android:gravity="center_vertical|left"
                android:paddingLeft="20dip"
                android:text="Abbr"
                android:textColor="#FFFFFF"
                android:textSize="16dip"
                android:textStyle="bold"
                android:typeface="serif" >
            </TextView>

            <TextView
                android:id="@+id/tv_2"
                android:layout_width="200dip"
                android:layout_height="wrap_content"
                android:layout_toRightOf="@+id/tv_1"
                android:gravity="center_vertical|left"
                android:text="Countries"
                android:textColor="#FFFFFF"
                android:textSize="16dip"
                android:textStyle="bold"
                android:typeface="serif" >
            </TextView>
        </RelativeLayout>

        <ListView
            android:id="@+id/lv_country"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:cacheColorHint="#00000000" android:layout_marginTop="20dip">
        </ListView>

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T11:25:36.830

为 TextView 和 RelativeLayout 设置一个 Id，然后设置为您的 ListView：

```
android:layout_below="@id/your_relative_layout_id"
android:layout_above="@id/your_text_view_id" 
```

此外，您还可以为您的 ListView 设置：

```
android:layout_height="0dp" 
```

因为你已经用另外两条线设置了它的高度。它更轻。

# c# - Buttons Xna 如何添加额外的参数

> ID：10947888
> 
> 赞同：0
> 
> 时间：2012-06-08T11:23:24.647
> 
> 标签：c#, xna

我已经按照在线教程制作了一个按钮类，但有点卡住了。我要做的就是向 clickedevent 添加一个参数，例如

```
 private void Button_OnPress(object sender, EventArgs e, int number)
    {

    } 
```

每当我尝试将其作为事件添加到我的按钮时，我都会遇到麻烦。例如

```
Button.OnPress += new EventHandler(Button_OnPress); 
```

有什么愚蠢的东西我错过了。还是根本不可能？

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T11:29:30.927

使用匿名方法：

```
void Button_OnPress(object sender, EventArgs e, int num) { ... } 
```

和代表：

```
Button.OnPress += delegate(object sender, EventArgs e)  {
Button_OnPress(sender, e, num); }; 
```

# jquery - 提交 jquery/ajax 表单后更改列表中的图像

> ID：10947890
> 
> 赞同：0
> 
> 时间：2012-06-08T11:23:36.573
> 
> 标签：jquery, html, css, ajax

我有两个问题：

我列出了文件，当我单击其中一个文件时，会出现表单，并且我可以描述我的图像，单击提交按钮后，我的表单将变为“添加”信息。但我还想更改列表上的标题，我希望 IE 出现在列表项旁边的 YES 字符串，我最近添加了描述。怎么做？

第二个问题是关于刷新表单，我不想看到添加的消息，只是在计算数据库请求时加载一些 gif，当它完成时，我想看到填写了我最近添加的信息的表单。怎么做？

**Jsfiddle 来说明我最近版本的脚本要更正**：http: [//jsfiddle.net/GSC3x/5/](http://jsfiddle.net/GSC3x/5/)

**@@更新到第一个问题：**

当我有这样的列表项时：

```
<li class="files"><a href="#" class="show_hide" >filename <img align="right" src="http://artivia-dev2/git.png" alt="OK" /></a> 
```

当我想在提交表单后只更改此处的图像时 - 怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T11:29:52.660

```
upform.html("<div class='message'></div>"); 
```

因此，在您获得响应后，您将 div 的内容替换为另一个内容。因此，您拥有的初始表单现在丢失了，而不是从您的服务器发送 json 响应并用服务器值填写您的表单。

将 Yes 附加到 li like file1 Yes

示例 HTML

```
<li><a href="#" class="show_hide" >file2</a><span></span> 
```

示例代码

```
jQuery(upform).parent().prev().text('Yes'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T11:51:29.420

只需将以下代码添加到您的按钮单击事件中。

```
var aLink = $(this).parents('li').children(':first'); 
```

演示：http: [//jsfiddle.net/GSC3x/10/](http://jsfiddle.net/GSC3x/10/)

# memory - 在 Clojure 中处理大量序列时，如何避免堆内存不足？

> ID：10947891
> 
> 赞同：4
> 
> 时间：2012-06-08T11:23:45.050
> 
> 标签：memory, clojure, jvm, sequence, heap-memory

我正在尝试生成一个序列，该序列对应于对非常宽、深的树的广度优先搜索……当我沿着​​序列走得太远时，我遇到了内存问题。在 IRC 频道上四处询问并查看这里，导致此类问题的第一大原因是不经意间抓住了头；但我看不到我在哪里做这个。

代码很简单；这是一个显示问题的版本：

```
(def atoms '(a b c))

(defn get-ch [n] (map #(str n %) atoms)) 

(defn add-ch 
  ([] (apply concat (iterate add-ch atoms))) 
  ([n] (mapcat get-ch n)))

(dorun (take 20000000 (add-ch))) 
```

这是另一个版本（这是我在从#clojure 获得帮助之前开始使用的版本），它显示了相同的问题：

```
(def atoms '(a b c))

(defn get-children [n] (map #(str n %) atoms))

(defn add-layer 
  ([] (add-layer atoms)) 
  ([n] (let [child-nodes (mapcat get-children n) ] 
      (lazy-seq (concat n (add-layer child-nodes))))))

(dorun (take 20000000 (add-layer))) 
```

两者都给了我一个“OutOfMemoryError Java 堆空间”。我在 Macbook Air 上从 Eclipse/CounterClockwise 中的 REPL 运行它们。

我对 Clojure 还是很陌生，所以在为此苦苦挣扎了一天之后，我希望这是我忽略的微不足道的事情。我意识到我可以增加堆大小以降低问题发生的可能性，但是我最终想要处理的序列非常庞大，我认为这对我没有帮助。

我尝试用“drop”替换“take”（在上面的示例中），以避免保持头部 - 这没有区别。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T16:23:43.593

我错过了多伦。问题似乎出在 StringBuilder str 上。

如果我按以下方式替换 get-children，则此方法有效：

```
 (defn get-children [n] (map #(if (seq? n) (conj n %) (conj (list n) %)) atoms)) 
```

# c# - 更新条目时出错。有关详细信息，请参阅内部异常。- Linq 到实体

> ID：10947892
> 
> 赞同：6
> 
> 时间：2012-06-08T11:23:48.617
> 
> 标签：c#, database, xna, linq-to-entities

一直在环顾四周，我似乎无法弄清楚出了什么问题。

目前我正在尝试在玩家死亡时使用新的高分更新我的数据库。但无论我选择尝试保存什么，它都会向我抛出异常。

代码：

```
 HighScore hs = new HighScore();
            var id = from i in db.HighScores
                     orderby i.ID descending
                     select i;
            int newId = 0;

            if (id.Count() == 0)
            {
                newId = 1;
            }
            else
            {
                newId = id.First().ID + 1;
            }
        hs.ID = 6; //I just hardcoded in 6 to make sure i wasent because of the newId      //thing, and i have checked if theres already something on the sixths spot as well.
            hs.UserHighscore = 100;
            hs.HighscoreUsername = "test";
            hs.GameID = 1;
            db.HighScores.AddObject(hs);
            db.SaveChanges(); 
```

我已经检查了一遍又一遍，我似乎无法弄清楚问题是什么。

任何帮助都将不胜感激。

例外：

```
System.Data.UpdateException was unhandled
  Message=An error occurred while updating the entries. See the inner exception for details.
  Source=System.Data.Entity
  StackTrace:
       at System.Data.Mapping.Update.Internal.UpdateTranslator.Update(IEntityStateManager stateManager, IEntityAdapter adapter)
       at System.Data.EntityClient.EntityAdapter.Update(IEntityStateManager entityCache)
       at System.Data.Objects.ObjectContext.SaveChanges(SaveOptions options)
       at System.Data.Objects.ObjectContext.SaveChanges()
       at MatematikSpilMenu.SaveBunniesSceen.SaveHighscore() in MatematikSpilMenu\SaveBunniesSceen.cs:line 173
       at MatematikSpilMenu.SaveBunniesSceen.Update(GameTime gameTime, Boolean otherScreenIsActive, Boolean coveredByOtherScreens) in C:\Users\Etarnalazure-Alien\documents\visual studio 2010\Projects\MatematikSpilMenu\MatematikSpilMenu\MatematikSpilMenu\SaveBunniesSceen.cs:line 110
       at MatematikSpilMenu.ScreenManager.Update(GameTime gameTime) in MatematikSpilMenu\ScreenManager.cs:line 101
       at Microsoft.Xna.Framework.Game.Update(GameTime gameTime)
       at Microsoft.Xna.Framework.Game.Tick()
       at Microsoft.Xna.Framework.Game.HostIdle(Object sender, EventArgs e)
       at Microsoft.Xna.Framework.GameHost.OnIdle()
       at Microsoft.Xna.Framework.WindowsGameHost.RunOneFrame()
       at Microsoft.Xna.Framework.WindowsGameHost.ApplicationIdle(Object sender, EventArgs e)
       at System.Windows.Forms.Application.ThreadContext.System.Windows.Forms.UnsafeNativeMethods.IMsoComponent.FDoIdle(Int32 grfidlef)
       at System.Windows.Forms.Application.ComponentManager.System.Windows.Forms.UnsafeNativeMethods.IMsoComponentManager.FPushMessageLoop(IntPtr dwComponentID, Int32 reason, Int32 pvLoopData)
       at System.Windows.Forms.Application.ThreadContext.RunMessageLoopInner(Int32 reason, ApplicationContext context)
       at System.Windows.Forms.Application.ThreadContext.RunMessageLoop(Int32 reason, ApplicationContext context)
       at System.Windows.Forms.Application.Run(Form mainForm)
       at Microsoft.Xna.Framework.WindowsGameHost.Run()
       at Microsoft.Xna.Framework.Game.RunGame(Boolean useBlockingRun)
       at Microsoft.Xna.Framework.Game.Run()
       at MatematikSpilMenu.Program.Main() in MatematikSpilMenu\Game1.cs:line 120
  InnerException: System.Data.EntityCommandCompilationException
       Message=An error occurred while preparing the command definition. See the inner exception for details.
       Source=System.Data.Entity
       StackTrace:
            at System.Data.Mapping.Update.Internal.UpdateTranslator.CreateCommand(DbModificationCommandTree commandTree)
            at System.Data.Mapping.Update.Internal.DynamicUpdateCommand.CreateCommand(UpdateTranslator translator, Dictionary`2 identifierValues)
            at System.Data.Mapping.Update.Internal.DynamicUpdateCommand.Execute(UpdateTranslator translator, EntityConnection connection, Dictionary`2 identifierValues, List`1 generatedValues)
            at System.Data.Mapping.Update.Internal.UpdateTranslator.Update(IEntityStateManager stateManager, IEntityAdapter adapter)
       InnerException: System.NotSupportedException
            Message=Server-generated keys and server-generated values are not supported by SQL Server Compact.
            Source=System.Data.SqlServerCe.Entity
            StackTrace:
                 at System.Data.SqlServerCe.SqlGen.DmlSqlGenerator.GenerateReturningSql(StringBuilder commandText, DbModificationCommandTree tree, ExpressionTranslator translator, DbExpression returning)
                 at System.Data.SqlServerCe.SqlGen.DmlSqlGenerator.GenerateInsertSql(DbInsertCommandTree tree, List`1& parameters, Boolean isLocalProvider)
                 at System.Data.SqlServerCe.SqlGen.SqlGenerator.GenerateSql(DbCommandTree tree, List`1& parameters, CommandType& commandType, Boolean isLocalProvider)
                 at System.Data.SqlServerCe.SqlCeProviderServices.CreateCommand(DbProviderManifest providerManifest, DbCommandTree commandTree)
                 at System.Data.SqlServerCe.SqlCeProviderServices.CreateDbCommandDefinition(DbProviderManifest providerManifest, DbCommandTree commandTree)
                 at System.Data.Common.DbProviderServices.CreateCommandDefinition(DbCommandTree commandTree)
                 at System.Data.Common.DbProviderServices.CreateCommand(DbCommandTree commandTree)
                 at System.Data.Mapping.Update.Internal.UpdateTranslator.CreateCommand(DbModificationCommandTree commandTree)
            InnerException: 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-15T13:56:14.217

好吧，根据我的经验，这通常是由数据库错误触发的，在我的情况下，它是与失败并引发根异常的表关联的触发器。但是，在您的情况下，您似乎在使用自动编号（身份）字段时错误地尝试手动定义 id。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-08T11:28:05.093

在我看来，问题的根源在于您使用的 SQL 服务器：

> SQL Server Compact 不支持服务器生成的键和服务器生成的值。

您是否尝试在 SQL Server Compact 版本上使用自动增量 ID？我记不太清了，但也许用那个 SQL 版本是不可能的。我建议你先检查一下。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-08T13:15:38.967

找到了解决方案，似乎它的数据库在使用太多地方时可能会出错（这只是我的猜测）。无论哪种方式，创建一个新表然后向其中添加东西似乎都可以解决它（没有使用身份。）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-26T09:49:51.123

在我的情况下，在打开表数据库后，auto_ink 列的主键问题就消失了。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-08-09T12:56:12.183

服务器生成的密钥表现不佳所以去检查数据库可能是你的数据库初级密钥是自动生成的密钥所以去尝试手动插入数据

# php - Apache 优雅重启 - 是否影响当前 PHP 脚本执行

> ID：10947895
> 
> 赞同：2
> 
> 时间：2012-06-08T11:23:55.193
> 
> 标签：php, apache, restart

我一直在阅读有关 Apache 优雅重启的信息。

```
apachectl -k graceful 
```

[http://httpd.apache.org/docs/2.2/stopping.html#graceful](http://httpd.apache.org/docs/2.2/stopping.html#graceful)

> USR1 或优雅信号导致父进程建议子进程在当前请求后退出（或者如果它们没有提供任何服务则立即退出）。

[http://www.electrictoolbox.com/artic...estart-apache/](http://www.electrictoolbox.com/artic...estart-apache/)

> ...意味着任何正在下载内容的人都可以继续下载。

如果当前正在执行一个长时间运行的 PHP 脚本（例如：处理大图像），那么优雅重启会允许它完成还是会阻碍它的执行？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-08T11:34:56.607

它将完成，因为 Apache 子进程正忙于为客户请求提供响应并等待 PHP 完成响应。

# ffmpeg - 使用 ffmpeg 转码时寻找视频

> ID：10947896
> 
> 赞同：3
> 
> 时间：2012-06-08T11:24:02.053
> 
> 标签：ffmpeg, mpeg, transcoding, webm

我正在构建一个记录直播电视的应用程序（dvbt：mpeg.ts-files）并立即使用 ffmpeg 将其转码为 webm 文件。我能够以恒定的速度做到这一点；所以 ffmpeg 没有赶上不断增长的文件。

现在我想在 html5 网站上播放这个文件。这可行，但是当 ffmpeg 未完成转码（并且我的 webm 文件仍在增长）时，我无法找到它（并且没有进度条）。

是否可以在进行转码时查找视频文件？我错过了一些 ffmpeg 设置吗？还是 webm 的问题？

这就是我现在所拥有的：

```
ffmpeg -re "inputfile.ts" -y -f webm -vcodec libvpx -acodec libvorbis \ 
       -aq 90 -ac 2 -b:v 1300k -threads 2 "outputfile.webm" 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T19:59:43.270

我不知道这会有所帮助，但我已经研究了一个与您类似的解决方案，将 ffmpeg 转码为 flash 以在网络上流式传输。搜索方法需要播放器中的 JavaScript 来收集搜索位置，然后更改播放器的 URL，告诉后端从新位置重新开始流式传输，例如：

```
http://server/player.php?video=x.flv&pos=1838 
```

在后端，ffmpeg 命令类似于：

```
ffmpeg -y -ss 1838 -i x.mpg -s 320x240 -g 30 -r 24 -f flv -deinterlace -ac 1 -ar 11025 -ab 64k -b 256k 
```

但是，我遇到的问题是 -ss 导致 ffmpeg 在搜索时拍摄视频的快照。因此，如果视频是实时录制的（仍在写入），则转码流将在播放到达“相对结束”（流开始时结束*的时间点）时结束。*我仍然没有找到解决这个问题的方法。

如果您对观看现场录音不感兴趣，我认为类似的方法可能对您有用 - 如果您有将 JavaScript 注入 HTML5 播放器的方法。

# c# - C#中的线程安全树视图节点图像索引更改

> ID：10947906
> 
> 赞同：0
> 
> 时间：2012-06-08T11:24:41.503
> 
> 标签：c#, treeview, thread-safety

如何以线程安全的方式更改树视图节点的图像索引？TreeNode 类没有 Invoke() 方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T11:26:35.853

您可以调用`Invoke`表单而不是组件本身。

组件代码在表单的线程上执行，因此对组件的调用只是将操作委托给表单的线程。`form.Invoke`使用as 你会得到完全相同的结果`form.component.Invoke`。

# php - 在无限while循环中如何回显某些内容？

> ID：10947908
> 
> 赞同：0
> 
> 时间：2012-06-08T11:24:46.703
> 
> 标签：php, infinite-loop, shared-hosting

*例如我有这样的事情：*

```
<?php
  header("Content-Type: text/html; charset=UTF-8");
  set_time_limit(0); 
  ob_start("ob_gzhandler");

  while(true) :
    echo microtime(true)."<br>";
    ob_flush();
    flush(); 
    sleep(1);
  endwhile;

  ob_end_clean();
?> 
```

此代码适用于我`localhost`，并且页面上的每一秒都被打印`microtime()`，但是当我尝试在我`Shared Linux Hosting`没有打印任何内容时运行相同的脚本时，页面只有无限的加载时间。

**如何在我的主机上无限循环打印一些东西？**

*也许我必须在我的`php.ini`文件中启用/禁用某些东西？有任何想法吗？*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T11:29:27.903

它是 Gzip 等待所有数据，因此它可以压缩并发送它。

当您使用共享主机时，完全禁用它可能有点棘手。所以我们可以：

**使用 PHP 在 Linux 主机上禁用 Gzip**

```
ini_set('output_buffering','on');
ini_set('zlib.output_compression', 0) 
```

**使用 .htaccess 禁用 Gzip**

```
SetEnv no-gzip dont-vary 
```

**编辑：** 你也可以在你的 Linux 主机上试试这个吗？

```
<?php
ini_set('output_buffering','on');
ini_set('zlib.output_compression', 0);
ob_implicit_flush();
for($i=0;$i<100;$i++) {
      echo $i;
      echo str_repeat(" ", 500);
      ob_flush();
      flush();
      sleep(1);
}
?> 
```

这个适用于我的主机，看看它是否适用于你的主机会很有趣。

# apache-flex - 在 flex 中嵌入 flash 内容/视频

> ID：10947910
> 
> 赞同：0
> 
> 时间：2012-06-08T11:25:02.347
> 
> 标签：apache-flex, flex4

我想在我的 mxml 中嵌入“application/x-shockwave-flash”内容。基本上我想点击一个 url，从中获取“application/x-shockwave-flash”内容并将其显示在我的 mxml/swf 中。如何去做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T16:26:52.767

这不是它的工作原理。例如，您应该使用[Spark VideoPlayer 和 VideoDisplay 控件](http://help.adobe.com/en_US/flex/using/WSc78f87379113c38b-669905c51221a3b97af-8000.html)组件来加载它。

# java - 从另一个 Activity 布局将可绘制应用到 ImageView

> ID：10947912
> 
> 赞同：0
> 
> 时间：2012-06-08T11:25:10.323
> 
> 标签：java, android

使用[这个](https://github.com/jasonpolites/gesture-imageview)库，我试图检索编辑后的图像并将其放在另一个活动的 ImageView 上......

**调用函数将编辑后的drawable设置为另一个ImageView：**

```
Log.d("eiDR",gImageView.getDrawable().toString());
PreviewPostal pp = new PreviewPostal();
pp.setImage(gImageView.getDrawable()); 
```

**将编辑后的drawable设置为另一个ImageView（在PreviewPostal Activity中）：**

```
public void setImage(Drawable dr){
    Log.d("ppDR",dr.toString());
    //ImageView iv = (ImageView)this.findViewById(R.id.imageForTest);
    //iv.setImageDrawable(dr);
} 
```

这记录了相同的可绘制对象，但如果我取消注释这两行，它会给我一个 NPE。

注意：活动包装在 TabHost 中（每个活动都是一个具有自己布局的选项卡）。

提前致谢！

**编辑：我如何添加活动（标签）：**

```
mTabHost = getTabHost();

// Tab Editar Imagem
TabSpec editImageSpec = mTabHost.newTabSpec("Imagem");
editImageSpec.setIndicator(setTabIndicator(getResources().getDrawable(R.drawable.tab_editimage_icon)));
Intent editImageIntent = new Intent(this, EditImage.class);
editImageIntent.putExtra("imagem", getIntent().getStringExtra("imagem"));
editImageSpec.setContent(editImageIntent); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T11:28:42.877

你不能简单地做到这一点。首先让我解释一下这条线的含义。

```
ImageView iv = (ImageView)this.findViewById(R.id.imageForTest); 
```

这只是意味着，您正在尝试引用当前活动中存在的元素。也就是说，您可以使用**setContentView**提供的布局。所以现在当 android 在当前布局中搜索这个 ImageView 时，显然它不会存在并抛出一个**空指针异常**。

您实际上需要做的是，通过某种方式保存 Drawable，然后当您传递给该活动时，您必须将 Drawable 设置为该 ImaegView。

请参阅此链接，了解如何将 Drawable 转换为位图并使用 putExtra 将其发送到下一个活动。

[https://stackoverflow.com/a/9033864/603744](https://stackoverflow.com/a/9033864/603744)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T12:19:47.740

选项：

1.您可以为结果**启动活动**，并且在被调用活动的结果上只需将可绘制的字节[]返回给调用活动

2.在SD卡上有一个**预定义的位置**，然后将被调用活动的图像保存在该位置，并从调用活动访问相同的位置

**3.编写一个实现可序列化**的简单pojo 。然后为结果启动第二个活动，并根据第二个活动的结果填充pojo并将其从被调用活动返回到调用活动。

我希望这有帮助..

# backbone.js - 无法遍历骨干集合，可能是获取/绑定问题

> ID：10947918
> 
> 赞同：0
> 
> 时间：2012-06-08T11:25:39.713
> 
> 标签：backbone.js, handlebars.js, backbone.js-collections

我正在将用户朋友的列表抓取到一个集合中，并且我想遍历这些朋友，以便用户可以选择一个朋友并在以后做很多事情。

在我的初始化中我有

```
朋友 = 新的 MyApp.Collections.UserFriends();
Friends.fetch({ 数据: $.param({ 搜索: this.model.attributes.user_id}),
            成功：函数（）{

            },
            错误：函数（）{
                alert('获取好友错误');
            }
         });

         friends.bind('fetched', this.render(),this);

```

然后在我的渲染中我有

```
控制台日志（朋友）；
    console.log(HandlebarsTemplates['friends/friendsResults'](friends);
    $(this.el).html(HandlebarsTemplates['friends/friendsResults'](friends);

```

我的车把是

```
好的，我有正确的车把模板
{{#每个模型}}
<li> {{attributes.username}}</li>
{{/每个}}

```

控制台中的朋友集合是，所以我可以看到模型在那里。

```
byCid：对象
_byId：对象
_callbacks：对象
长度：39
型号：阵列[39]
__proto__: q

```

我担心的是问题是在收集之前触发了渲染，但这是我认为`friends.bind('fetched',this.render(), this)`应该解决的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T11:45:38.427

Backbone 中没有“获取”事件，请尝试使用“重置”，[http://backbonejs.org/#FAQ-events](http://backbonejs.org/#FAQ-events)。

# ruby - 为什么我的 ruby 要求不能正常工作？

> ID：10947919
> 
> 赞同：0
> 
> 时间：2012-06-08T11:25:41.813
> 
> 标签：ruby, require, ruby-1.9

> **可能重复：**
> [为什么 Ruby 1.9.2 删除“.” 来自 LOAD_PATH，还有什么替代方法？](https://stackoverflow.com/questions/2900370/why-does-ruby-1-9-2-remove-from-load-path-and-whats-the-alternative)[要求命令在自定义代码上的 Snow Leopard Ruby](https://stackoverflow.com/questions/10945114/ruby-require-call-fails-on-custom-code)[调用失败](https://stackoverflow.com/questions/10945114/ruby-require-call-fails-on-custom-code)
> [的 bash irb 中不起作用](https://stackoverflow.com/questions/7228312/require-command-not-working-within-bash-irb-on-snow-leopard)
> [`require`](https://stackoverflow.com/questions/10945114/ruby-require-call-fails-on-custom-code)

我在跑：

*   OS X 10.6.8
*   RVM 1.12.3 与 Ruby 1.9.3

假设我在一个目录中有以下文件：

### a.rb

```
require 'b'
puts message_from_b 
```

### b.rb

```
def message_from_b
    "foo"
end 
```

运行 a.rb 时出现以下**LoadError**：

> /Users/Alex/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require': 无法加载此类文件 -- b (LoadError )

但是，如果我将**a.rb**的第 1 行替换为`require './b'`，它可以正常工作。

在查看其他人的 Ruby 代码时，似乎他们不需要指定当前目录，因为它需要同一目录中的文件。

那么，为什么我必须这样做呢？这与我的 RVM 安装有关吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T11:34:05.703

文件`b.rb`不在您的加载路径中。将`b.rb`'s 目录添加到您的加载路径

```
$LOAD_PATH.unshift(File.dirname(__FILE__)) # assuming it's the current directory 
```

或使用

```
require_relative 'b' 
```

# java - Oracle xdb-xmlparser 源代码

> ID：10947927
> 
> 赞同：2
> 
> 时间：2012-06-08T11:26:17.250
> 
> 标签：java, xml, jaxb, jaxp

与我之前的[问题有关](https://stackoverflow.com/questions/10929790/saxparseexception-xml-20221-invalid-char-in-text)，有人知道我是否可以获得以下源代码：

```
<dependency>
    <groupId>com.oracle</groupId>
    <artifactId>xdb-xmlparser</artifactId>
    <version>10.2.0.3.0</version>
</dependency> 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T18:18:59.273

通常，您不会从 Oracle 等公司获得源代码。如果您正在调查一个错误或一个奇怪的行为，反编译它，您将获得几乎没有注释的原始源代码。

使用任何工具，如 jad 或 GUI 工具 DJ Java Decompilerr。

这是调查问题的好习惯，但 Oracle 不支持:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-16T16:25:09.013

（不是这样）很久以前，我公司一直在努力获取Oracle ADF Framework的源码。它按照以下方式进行：

1.  我们在 Metalink 上发布了一个问题（现在称为[My Oracle Support](https://support.oracle.com)，您需要成为 Oracle 合作伙伴，或者从他们那里购买支持订阅才能在此处发布）。

2.  他们给我们发了一份大约 6 页长的表格，其中规定了如何存储源代码、谁可以访问它以及我们在阅读它时必须戴什么类型的疯狂帽子。嗯，这种东西。

3.  他们要求这个表格由一些高级管理人员签名，上面有我的名字，作为有权访问代码的人，并将其传真回给他们手动签名。

4.  几天后，他们在 Metalink 上发布了一个包含源的 ZIP 文件的链接（在我们问题的答案中，所以没有其他人可以访问它）。

我们这样做了两次 - ADF 10g 和 ADF 11g。两次都一样。

所以基本上 - 你最好的选择是联系甲骨文。

这是[对 Oracle 文档的引用，说明上述内容适用于 ADF](http://docs.oracle.com/cd/B31017_01/web.1013/b25947/web_testdebug005.htm)，引用：

> 您可以通过向 Oracle 全球支持提出服务请求并提出请求来获取 Oracle ADF 的完整源代码。

PS 还有其他方法，例如反编译 Oracle JAR，但请注意，他可能会违反许可证。

# c# - 在 application_endrequest 上处理对象上下文

> ID：10947928
> 
> 赞同：5
> 
> 时间：2012-06-08T11:26:18.383
> 
> 标签：c#, asp.net, entity-framework

我遇到了存储在*HttpContext.Current.Items*中的 EF4 对象上下文的问题，然后希望在完全处理请求后立即处理。

在 Aplication_EndRequest 事件中，我调用 RepositoryContext 的 Terminate() 方法，该方法将从*HttpContext.Current.Items*集合中找到活动的*ObjectContext* ，并在其连接上调用*Close()并在其上调用**Dispose()*。

 ***问题是有时我会在我的一个页面上出现奇怪的行为。在某些情况下，我收到一条错误消息：

> ObjectContext 实例已被释放，不能再用于需要连接的操作

我认为这可能会发生，因为不仅页面请求一旦完成就会调用 Application_EndRequest 事件，还会调用图像请求等，因此有时其他请求可能会在主页请求 ObjectContext 完成其工作之前对其进行处理，但这应该不会发生，因为一切都是在集合*HttpContext.Current.Items*上进行的，这当然不是在 HTTP 请求之间共享的。

另外，从研究来看，这可能是由于某些数据库请求的延迟加载引起的，但这里不应该是这种情况，因为我没有在代码的其他任何地方调用 Dispose（我已经检查过），因此 EndRequest 上的 Dispose() 应该只有当**一切**都完成时才被调用，不是吗？

关于可能导致这种情况的任何想法？我该如何测试它？你有什么建议？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T17:56:02.643

这意味着已经在 ObjectContext 上调用了 Dispose()。发生这种情况的原因有很多，但归结为在 Application_EndRequest 之前调用 Dispose() 的事实。如果没有所有来源，就不可能确切地说出原因。

因为您正在寻求建议，所以我的第一个是将 ObjectContext 从 HttpContext 中取出。数据库连接应该只存在很短的时间，并执行特定的任务。如果它是短暂的，您可以将 ObjectContext 放在 using 语句中，该语句将自动为您调用 Dispose()。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T18:08:41.443

假设您有一个为您提供当前 ObjectContext 的类，那么程序员可能会根据博客或类似内容中的一些示例编写以下代码：

```
using(var context = ContextProvider.GetCurrentContext()){
    ...
} 
```

并在请求结束之前处理了 ObjectContext。

如果你想测试 ObjectContext 被放置在哪里，你可以这样做：

在您的 ObjectContext 实现中，将 Dispose 方法更改为：

```
public override void Dispose() {
    throw new InvalidOpearationException("Gotcha!");
}

public void ActuallyDisposePlease() {
    base.Dispose();
} 
```

并在 Application_EndRequest 中调用ActuallyDisposePlease() 方法。

当然，这是为了测试/调试/诊断的角度，永远不要影响生产。***

# jquery-ui - jquery-ui 自动完成选择唯一的答案

> ID：10947930
> 
> 赞同：4
> 
> 时间：2012-06-08T11:26:25.530
> 
> 标签：jquery-ui, jquery-ui-autocomplete

如果只有一个答案返回，我想让 jquery-ui 自动完成自动选择答案。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-08T11:26:25.950

我使用“打开”回调设置了自动完成：

```
 $('#people_new_user input[type="text"]').each(
    function(index, element) {
        var field = element.name;
        $(element)
            .autocomplete({
          source: "/cf/AutoComplete/People?current="+field,
          open: openUser
        });
    }); 
```

在打开的回调中，我查看是否只有一个结果，如果是，则选择它：

```
function openUser(event, ui)
{
  // Try to select the first one if it's the only one
  var $children = $(this).data('ui-autocomplete').menu.element.children();
  if ($children.size() == 1)
  {
     $children.first().click();
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-26T10:50:04.710

非常感谢，它对我们很有效。如果它对任何人有帮助，我在 IE10 下第一次使用它时遇到了问题。它在 IE8、Chrome 和 Firefox 中一直运行良好。

在 IE10 下失败就`jQuery(this).data('autocomplete').menu.element.children()`行了：*找不到成员*

事实证明，这仅仅是因为网页有：`<meta http-equiv="X-UA-Compatible" content="IE=7"/>` 删除这个解决了问题（它在 IE8 中仍然可以正常工作）。

但在我注意到这一点之前，我花了很多时间尝试并未能迁移到 jquery-1.11.1.min.js（来自 1.6.4）和 jquery-ui-1.11.0（来自 1.8.16）。

# java - AOP 异常处理

> ID：10947933
> 
> 赞同：23
> 
> 时间：2012-06-08T11:26:31.703
> 
> 标签：java, exception-handling, aop

我看到 Guice 和 Spring 在后台使用 AOP Alliance 进行方法拦截，我一直在试图弄清楚如何让 AOP Alliance 拦截和处理某些异常，这样我就不必继续编写相同的代码了在每个`catch`街区内重新来过。

但是看了下戏，好像AOP联盟并没有提供任何拦截 throwed`Throwable`的方式，让handler/interceptor可以做一些事情（记录异常等），然后**判断是否传播进一步的异常或只是恢复到引发异常的行之后的下一行**：

```
HerpDerp hd = null;

if(hd == null)
    throw new RuntimeException("Herpyl derp!");

Manny.pacquiao(); 
```

我正在寻找一种 AOP 异常处理机制，它会拦截并使用业务逻辑来决定是继续传播它还是在调用`RuntimeException`时恢复它。`Manny.pacquioa()`

*   如果在 Java 中无法做到这一点，请告诉我
*   不管它是否可以在 Java 中做到这一点，有没有办法用 AOP 联盟拦截抛出的异常，或者我必须去别的地方。如果我必须去别的地方，在哪里？方面J？

谢谢！

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-06-11T15:16:48.380

您可以使用 Spring AOP 捕获异常，但我不知道这是否符合您对纯 Java 框架的要求。

使用 Spring，您可以编写一个简单的 AOP 拦截器，如下所示：

```
@Aspect
public class ErrorInterceptor{
@AfterThrowing(pointcut = "execution(* com.mycompany.package..* (..))", throwing = "ex")
public void errorInterceptor(WidgetException ex) {
    if (logger.isDebugEnabled()) {
        logger.debug("Error Message Interceptor started");
    }

    // DO SOMETHING HERE WITH EX
    logger.debug( ex.getCause().getMessage());

    if (logger.isDebugEnabled()) {
        logger.debug("Error Message Interceptor finished.");
    }
}
} 
```

但是没有办法返回调用方法或在下一行继续处理。但是，如果您在这里处理异常，除非您自己重新抛出它，否则它不会冒泡。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-11T15:36:08.450

这不存在是有原因的。这将需要重写代码的块结构，就好像您首先编写了 try/catch 块一样。在我看来，这可能会对变量范围和其他事物造成严重破坏。您要求 AOP 将字节码重写为类似于以下代码的内容，这是相当大的重写。

```
HerpDerp hd = null;

try {
    if(hd == null)
        throw new RuntimeException("Herpyl derp!");
} catch(RuntimeException e) {
   if (someConditionIsMet) {
       throw e;
   }
}

Manny.pacquiao(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-14T02:57:44.447

@4herpsand7derpsago 如果您要做的是使用 AOP 捕获抛出的异常以执行各种任务来处理它，然后返回最初抛出异常的代码，我认为您错过了理解 AOP 的概念。

正如您在代码中指出的那样

```
HerpDerp hd = null;

if(hd == null)
throw new RuntimeException("Herpyl derp!");

Manny.pacquiao(); 
```

如果您希望 AOP 捕获您的`RuntimeException`，执行一些东西来处理它并返回`Manny.pacquiao();`，答案是**您不能**。原因是当`RuntimeException`AOP 抛出并捕获 时，堆栈已经在您的 AOP 代码中。你不能回来执行`Many.pacquiao();`。如果要继续执行，唯一的方法`Many.pacquiao();`是使用`try-finally`块如下

```
HerpDerp hd = null;

try {
    if(hd == null)
        throw new RuntimeException("Herpyl derp!");
} finally {
    Manny.pacquiao();
} 
```

只有这样你`Many.pacquiao()`才会被执行，但在你的 AOP 捕获之前`RuntimeException`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-08T12:04:25.103

要使用 AspectJ “捕获”未捕获的异常，您可以使用以下方面：

```
pointcut uncaughtExceptionScope() : 
    (execution(* com.mycompany.myrootpackage..Main.main(..)) 
    || execution(* java.util.concurrent.Callable+.call()) 
    || execution(* java.lang.Runnable+.run()) 
    ));

after() throwing(Throwable t) : uncaughtExceptionScope() && !cflow(adviceexecution())    {
    handleException(thisJoinPoint, t);
}   

protected void handleException(JoinPoint jp, Throwable t)
{
    // handle exception here
} 
```

我认为不可能“回到”执行点。

# c# - 将数组存储在内存中的最佳实践

> ID：10947944
> 
> 赞同：3
> 
> 时间：2012-06-08T11:27:25.250
> 
> 标签：c#, wcf, memory-management

所以我们有一个向客户端提供一些对象的 WCF 服务。我们的 wcf 服务从数据访问层 (DAL) 获取数据。DAL 从 API 获取数据并将其格式化为我们可以使用的对象。对于大多数对象，这很有效。

但是我们还需要来自 API 的对象列表，并且对象不会改变。针对 API 的查询需要 15 到 20 秒。对同一数据多次运行此查询的方式很长。**所以我们想将列表存储在内存中。因为 DBA 不是我们最好的朋友，SQLite 或 SQL CE 不是一个选择。**

现在我们有了类似的东西，第一次加载组时，我们将它们存储在私有静态变量中。**这是做这样的事情的正确方法，还是有更好的方法？**

```
 public static class GroupStore
    {
        private static DTO.Group[] _groups;

        public static DTO.Group[] GetAll()
        {
            if (_groups == null)
            {
                var dal = PluginHandler.Instance.GetPlugin();
                _groups = dal.GetAll();
            }
            return _groups;
        }
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-08T11:37:18.633

如果您使用的是 .NET4，则可以使用`Lazy<T>`该类。它是线程安全的，并为您包装了延迟加载。

代码变得更加干净：

```
public static class GroupStore
{
    private static Lazy<DTO.Group[]> _groups = new Lazy<DTO.Group[]>(GetAll);

    public static DTO.Group[] Groups { get { return _groups.Value; } }

    private static DTO.Group[] GetAll()
    {
        var dal = PluginHandler.Instance.GetPlugin();
        return dal.GetAll();
    }
} 
```

**更新**

您在评论中链接的答案是可以的。但是`IsValueCreated`无故使用锁定（因为列表可能在检查和下一次访问之间发生了变化）。

如果调用“ToString”get，我也不会创建该值。

更干净的解决方案：

```
public sealed class Lazy<T> where T : class
{
    private readonly object _syncRoot = new object();
    private readonly Func<T> _factory;
    private T _value;

    public Lazy(Func<T> factory)
    {
        if (factory == null) throw new ArgumentNullException("factory");

        _factory = factory;
    }

    public T Value
    {
        get
        {
            if (_value == null)
            {
                lock (_syncRoot)
                {
                    if (_value == null)
                    {
                        _value = _factory();
                    }
                }
            }
            return _value;
        }
    }

    public override string ToString()
    {
        return _value == null ? "Not created" : _value.ToString();
    }
} 
```

# php - 以结构化方式显示连接的 mysql 数据而不会损失性能

> ID：10947952
> 
> 赞同：0
> 
> 时间：2012-06-08T11:27:41.817
> 
> 标签：php, mysql, performance, database-performance

在数据库中，有项目。每个项目都有文件。每个文件都有多个版本。

所以理论上，我可以做到这一点（伪）；

```
$res = mysql_query("SELECT * FROM projects");
while($row=mysql_fetch_assoc($res))
{
    echo "Project ".$row["id"]."<br/>";
    $res2 = mysql_query("SELECT * FROM projectfiles");
    while($row2=mysql_fetch_assoc($res2))
    {
        echo "FileID ".$row2["id"]."<br/>";
        $res3 = mysql_query("SELECT * FROM fileversions");
        while($row3=mysql_fetch_assoc($res3))
        {
            echo $row3["name"]."<br/>";
        }
        echo "<br/>";
    }
} 
```

样本输出：

```
Project 1
    FileID 1
        test_file_1.txt.1

    FileID 2
        test_file_2.txt.1

    FileID 3
        test_file_3.txt.1
        test_file_3.txt.2 
```

但这将意味着只需要一个的负载和负载 mysql 查询。

所以我加入了查询：

```
$sql = "SELECT projectfiles.*, fileversions.*, 
    projects.id as projects_id
   FROM projects";

$sql .= " LEFT JOIN".
    " (SELECT 
        projectfiles.id as projectfiles_id,
        projectfiles.fileID as projectfiles_fileID,
        projectfiles.projectID as projectfiles_projectID
       FROM projectfiles
       ) AS projectfiles".
    " ON projects.id = projectfiles_projectID";

$sql .= " LEFT JOIN".
    " (SELECT 
        fileversions.id as fileversions_id,
        fileversions.name as fileversions_name,
        fileversions.location as fileversions_location,
        fileversions.fileID as fileversions_fileID
       FROM fileversions
       ) AS fileversions".
    " ON projectfiles.projectfiles_fileID = fileversions_fileID"; 
```

但是现在，当然，这给我留下了非结构化数据：

![在此处输入图像描述](../Images/4f5e0cdcbc6b3da67bf095a639cd56e4.png)

所以我所做的是：

```
while($row = mysql_fetch_assoc($res))
{
    $projectID = $row["projects_id"];
    $fileID = $row["projectfiles_fileID"];
    $fileversionID = $row["fileversions_id"];

    $fileversionsArray[$fileversionID] = array($row["fileversions_name"],$row["fileversions_location"]);
    $fileArray[$fileID][$fileversionID] = $fileversionID;
    $projectArray[$projectID][$fileID] = $fileID;
} 
```

所以我可以像这样展示它：

```
foreach($projectArray as $projectID => $projectDatas)
{
    echo "Project ID: ".$projectID."\n";
    foreach($projectDatas as $fileID)
    {
        echo "\tFile ID: ".$fileID."\n";
        foreach($fileArray[$fileID] as $fileversionID)
        {
            echo "\t\tFile version name: ";
            echo $fileversionsArray[$fileversionID][0];
            echo "\n";
            echo "\t\tFile location: ";
            echo $fileversionsArray[$fileversionID][2];
            echo "\n";
        }
    }
} 
```

这给出了输出：

![ex2](../Images/54b8514c5b842ed0e7743b0a5d3923b5.png)

但是我不太确定这样做是否能获得任何性能，因为在连接的行中有很多重复的数据，而且如果数据库中的内容发生变化，更新一次代码肯定需要做很多工作。

我想简而言之；对于我认为存在的正确解决方案，这感觉就像是一种肮脏的解决方法。

有没有更好的解决方案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T12:15:21.767

无法直接从 MySQL 数据库返回结构化数据。您将这些面向表的数据转换为数组的努力是正确的。

看看 PHP [dibi 库](http://dibiphp.com/cs/)，该`->fetchAssoc()`方法 ( [doc](http://api.dibiphp.com/2.0/DibiResult.html#_fetchAssoc) ) 可以用漂亮而简短的语法完成您需要的一切。

# php - 将多个 MySql 查询合并为一个查询

> ID：10947957
> 
> 赞同：0
> 
> 时间：2012-06-08T11:28:07.063
> 
> 标签：php, mysql, sql

我有表名用户。

```
id   name date       cdate           c  a   b
1     rz  42121221  42121221         0  1   0
2     an  12122111  42121221         0  0   1
3     cb  22121221  42121221         1  1   1   
4     ss  3321221   42121221         1  0   0 
```

我有两个选择两个日期之间的值，然后我必须使用这个语句找到计数。

```
 SELECT COALESCE(SUM(IF(c=1 AND a=0 AND b=1  ,  1, 0)),0) AS ACTIVE WHERE DATE BETWEEN 'DATE 1' AND 'DATE 2',COALESCE(SUM(IF(c=0 AND a=0 AND b=1  ,  1, 0)),0) AS INC WHERE cdate BETWEEN 'DATE 1' AND 'DATE 2' FROM users 
```

此查询不起作用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T11:35:50.587

使用喜欢

```
select COALESCE(SUM(IF(c=1 AND a=0 AND b=1  ,  1, 0)),0) AS ACTIVE from users where date between 'date1' and date '2' 
```

# perl - Perl 是否以相反的顺序打印数组元素？

> ID：10947961
> 
> 赞同：0
> 
> 时间：2012-06-08T11:28:21.427
> 
> 标签：perl

我对 Perl 中的以下哈希数组感到惊讶

```
#!/usr/bin/perl

print "content-type: text/html \n\n";

# DEFINE A HASH
%coins = ( "Quarter" , 25,
           "Dime" ,    10,
           "Nickel",    5 );

# LOOP THROUGH IT
while (($key, $value) = each(%coins)){
  print $key.", ".$value."<br />";
} 
```

产生以下输出

```
Nickel, 5
Dime, 10
Quarter, 25 
```

我知道 Perl 有能力通过使用负数索引来访问最后一个元素，但是这里我们没有使用负数作为索引，那么为什么它会以相反的顺序打印哈希数组的内容呢？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-08T11:31:25.373

那不是数组，那是哈希。这意味着事物在内部存储为键的哈希值，而不是键的顺序。没有办法让它们按照添加的顺序返回。如果您希望它们按密钥顺序排列，则需要

```
for my $key (sort keys %coins)
{
  print $key, $coins{$key};
} 
```

# c - 为什么在 C 中使用 %c？

> ID：10947965
> 
> 赞同：7
> 
> 时间：2012-06-08T11:28:44.483
> 
> 标签：c

根据 K&R C 第 1.6 节，a`char`是一种整数。那么我们为什么需要`%c`. 为什么我们不能`%d`用于一切？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-06-08T11:30:14.950

因为`%d`将打印 的数字字符代码`char`：

```
printf("%d", 'a'); 
```

打印`97`（在 ASCII 系统上），而

```
printf("%c", 'a'); 
```

打印`a`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-08T11:30:39.503

虽然它是一个整数，但它`%c`会将其数值解释为显示的字符值。例如字符`a`：

如果你使用`%d`你会得到一个整数，例如 97，字符的*内部*表示`a`

对比

用于`%c`显示字符 ' `a`' 本身（如果使用 ASCII）

即，这是*内部表示*与外部目的*解释*的问题（例如 with `printf`）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-08T11:30:30.143

粗略地说，`%c`打印字符的 ASCII 表示。`%d`打印其十进制值。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-08T11:31:23.657

如果您使用`%c`，您将打印（或扫描）一个字符或字符。如果您使用`%d`，您将打印（或扫描）一个整数。

```
printf("%d", 0x70); 
```

机器如何知道您要输出一个字符，而不是其等效的 ASCII 值？

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-06-08T11:31:39.130

%d 认为 char 是 32 位并像整数一样打印它，但是 %c 将 char 的 int 值转换为 ascii 字符然后打印它。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2014-10-26T15:30:57.253

`%d`用于打印`decimal(integer)`数字，而`%c`用于打印`character`。如果您尝试打印具有`%d`格式的字符，计算机将打印`ASCII`字符的代码。

# python - XML到熊猫数据框

> ID：10947968
> 
> 赞同：5
> 
> 时间：2012-06-08T11:28:57.670
> 
> 标签：python, xml, dataframe, pandas

我有一个包含数千行的 XML 文件，例如：

```
<Word x1="206" y1="120" x2="214" y2="144" font="Times-Roman" style="font-size:22pt">WORD</Word> 
```

我想将它（所有它的属性）转换为`pandas` `dataframe`. 为此，我可以使用漂亮的汤循环文件并逐行插入值或创建要作为列插入的列表。但是我想知道是否有一种更 Pythonic 的方式来完成我所描述的。先感谢您。

代码示例：

```
x1list=[]
x2list=[]

for word in soup.page.findAll('word'):
    x1list.append(int(word['x1']))
    x2list.append(int(word['x2']))
df=DataFrame({'x1':x1list,'x2':x2list}) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T12:09:32.080

试试这个：

```
DataFrame.from_records([(int(word['x1']), int(word['x2']))
                        for word in soup.page.findAll('word')],
                       columns=('x1', 'x2')) 
```

# java - 如何从另一个类调用 setListAdapter

> ID：10947969
> 
> 赞同：1
> 
> 时间：2012-06-08T11:29:03.237
> 
> 标签：java, android, listview

我有一个带有自定义适配器的 ExpandableListView（比如说在 A 类中），我需要`setListAdapter(mAdapter)`从另一个类（B 类），特别是从服务中调用。

```
 mAdapter = new Refeicao.MyExpandableListAdapter();
  setListAdapter(Refeicao.mAdapter); 
```

从stackoverflow中的类似问题我尝试了一些解决方案，例如：

-1 将该代码放入 A 类中的静态方法中，以便从 B 中调用它 - 但得到了非静态方法引用“错误”

-2 查看 listView = getActivity().findViewById(R.id.list); - 我想不工作，因为服务不是一项活动

-3
方法 setListAdapter(ExpandableListAdapter) 未定义类型

```
static ExpandableListView lv;
lv = (ExpandableListView) findViewById(android.R.id.list); 
```

接着

```
 mAdapter = new A.MyExpandableListAdapter();
                            A.lv.setListAdapter(mAdapter); 
```

我得到：对于 ExpandableListView 类型，方法 setListAdapter(ExpandableListAdapter) 是未定义的。

无论如何，有什么办法可以解决我的问题吗？

# python - 处理 django 查询的更好方法

> ID：10947972
> 
> 赞同：0
> 
> 时间：2012-06-08T11:29:14.017
> 
> 标签：python, django

我有以下型号。

```
class Model1(models.Model):
   name = models.CharField()

class Model2(models.Model):
   name = models.CharField()
   model1 = models.ForeignKey(model1)

class Model3(models.Model):
   name = models.CharField()
   model2 = models.ForeignKey(model2)
   flag = models.BooleanField(blank=False) 
```

所以我的显示应该是这样的，`Model2.name`并且`Model1.name`在列表页面上。条件是：我应该只显示`Model2`至少有一个的实例`Model3.flag = True`

所以现在我正在获取`Model2`列表中的所有对象并迭代`Model3`。我无法正确使用`select_related()`该模型。任何人都可以帮助。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T12:17:04.637

就像是：

```
qs = Model2.objects.filter(model3__flag=True).select_related('model1').distinct()
for m2 in qs:
    print m2.model1.name, m2.name

# only fetch the names, 
# this works if you treat duplicated ('name', 'model1__name') tuples same and show them once.
qs = qs.values('model1__name', 'name')
for x in qs:
    print x['model1__name'], x['name'] 
```

# java - 如何在 JSP 代码中获取请求站点的 IP 地址？

> ID：10947973
> 
> 赞同：0
> 
> 时间：2012-06-08T11:29:15.873
> 
> 标签：java, jakarta-ee, networking, network-programming

我的任务是确定客户端和 Web 服务器之间是否存在 NAT。我正在使用这个算法：

1.  用户请求网页
2.  JSP代码运行并获取请求站点的IP
3.  JSP代码获取服务器的内部IP
4.  我比较了两个 IP，如果它们相同 - 这意味着没有 NAT

**我的问题是：如何在 JSP 代码中获取请求站点的 IP 地址？** 我尝试使用**request.getRequestURL()**，但它返回了站点的域名。我也尝试获取请求的标头**主机**，但它也没有工作。此外，我有没有 DNS 服务的特定服务器，这就是为什么我无法获得 DNS 名称的 IP。

或者任何想法如何确定客户端和服务器之间是否存在 NAT？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T11:34:45.213

试试[`HttpServletRequest.getRemoteAddr()`](http://docs.oracle.com/javaee/6/api/javax/servlet/ServletRequest.html#getRemoteAddr%28%29)。

说明 说：

> 返回发送请求的客户端或最后一个代理的 Internet 协议 (IP) 地址。对于 HTTP servlet，与 CGI 变量 REMOTE_ADDR 的值相同。

**注意**：这只会让您（或尝试）获得客户端 IP 地址。不是客户端请求的服务器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T11:35:17.773

JSP 代码不能，因为它在服务器上运行。

我假设您实际上是指由 JSP 创建的页面中的 Javascript 代码，但我认为不允许不受信任的 Javascript 找出浏览器的 IP 地址或主机名。

（有一个技巧用于在 javascript 中获取客户端*的*IP 地址，但它涉及向远程服务器发送请求......在您的情况下，远程服务器只能提供 NATed 地址。另一个技巧涉及运行Java 小程序，但我怀疑这也会遇到沙盒限制......除非用户的浏览器信任小程序。）

简而言之，我认为服务器通常不可能找出客户端的 IP 地址是否经过 NAT。

* * *

请注意，如果您确实找到了经过 NAT 处理的地址背后的真实 IP 地址，那么它可能对您没有任何用处。IP 地址可能无法路由（因为它在私有范围内和/或在防火墙后面），并且在任何公共 DNS 服务器中都没有名称。

# lync - 我可以远程使用 Lync Server 2010 SDK 吗？

> ID：10947976
> 
> 赞同：1
> 
> 时间：2012-06-08T11:29:25.417
> 
> 标签：lync

我正在考虑开发 Intranet 网站的一部分，其中一个要求是有一个用户可以单击的按钮，该按钮将在 Lync 中与他们指定的联系人开始对话。

如果我可以从外部机器访问客户端 SDK，它似乎会很棒，但我看不出有一种方法可以让我在用户机器上运行 C# 代码（如果有人有任何想法，请随时提出建议，但我知道这种事情是被提防的）。

所以我现在正在查看服务器 SDK 及其示例，我无法确定是否可以在与服务器不同的机器上运行服务器 SDK？在尝试确定是否可以使用服务器 SDK 满足所需功能之前，我需要确定这是否可能（这似乎不像客户端 sdk 那样有很好的文档记录）。

所以我的问题基本上是：我可以从远程计算机访问 Lync Server 2010 SDK 的功能吗？如果可以，我应该从哪里着手？

这里的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T08:23:28.323

事实证明，不，不可能远程访问服务器SDK。

唯一合适的解决方法是在运行 Lync 的服务器上创建 Web 服务，公开必要的功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-10T15:27:22.677

不需要在 Lync 服务器计算机上安装 Lync Server SDK。您的开发机器（安装了 SDK）甚至不需要在同一个域中。您使用 SDK 创建的自定义应用程序...我认为它必须部署在应用程序池中。我认为池通常位于应用程序服务器上，可以是单独的计算机。这里的文章和演示视频可能会有所启发：

[Lync Server 2013：注册托管代码应用程序](http://channel9.msdn.com/posts/Lync-Server-2013-Register-a-managed-code-application)

[在 Lync Server 2013 上注册托管应用程序](http://msdn.microsoft.com/EN-US/library/dn600167.aspx)

但是，您的方案 - 您说您想要一个“Intranet 网站，并且其中一个要求是有一个用户可以单击的按钮，该按钮将在 Lync 中与他们指定的联系人开始对话。”

这听起来像是使用 Silverlight 和 Lync 客户端 SDK 开发的自定义 Lync 客户端。请看以下视频演示：

[将 Lync 控件添加到 Web 应用程序](http://channel9.msdn.com/posts/Add-Lync-Controls-to-a-Web-Application)

# wpf - 如何使用带有复选框的转换器？

> ID：10947980
> 
> 赞同：1
> 
> 时间：2012-06-08T11:29:32.940
> 
> 标签：wpf, xaml

我的 XAML 中有以下复选框：

```
<CheckBox x:Name="DisplayPlateGapPoints" Content="Display Plate Gap Points" IsChecked="True"/> 
```

我还有另一个带有 Opacity 属性的控件。我想根据复选框是选中还是未选中（通过转换器）来设置不透明度。我已经尝试过了，但是在运行时出现异常：

```
Opacity="{Binding IsChecked, ElementName=DisplayPlateGapPoints, Converter={DynamicResource boolOpacityConverter}}" 
```

例外情况如下：

```
A 'DynamicResourceExtension' cannot be set on the Converter property of type 'Binding' 
```

转换器本身在另一个 XAML 文件中定义如下：

```
<UserControl.Resources>
     <converters:BoolOpacityConverter    x:Key="boolOpacityConverter" /> 
```

有人可以指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T11:43:33.480

使用 a`StaticResource`而不是 a `DynamicResource`，即：

```
Opacity="{Binding IsChecked, ElementName=DisplayPlateGapPoints, Converter={StaticResource boolOpacityConverter}}" 
```

并确保通过资源字典（在 app.xaml 或目标 XAML 文件中）引用其他 XAML 文件。

# iphone - 如何删除手势识别器

> ID：10947982
> 
> 赞同：50
> 
> 时间：2012-06-08T11:29:45.017
> 
> 标签：iphone, objective-c, ios, ipad, ios4

所以，我在覆盖视图中添加了一个手势识别器。当点击屏幕时，我希望这个覆盖消失。话虽如此，添加手势识别器会覆盖“内部修饰”和其他按钮单击事件。我需要这个，因此我需要删除gesturerecognizer。我可以使用这种方法，但是我有问题。我的代码如下 -

```
- (void)helpClicked
{
    CGRect visibleBounds = [self convertRect:[self bounds] toView:viewContainer];
    CGFloat minimumVisibleX = CGRectGetMinX(visibleBounds);
    UIImageView * helpOverlay = [[UIImageView alloc]initWithFrame:CGRectMake(minimumVisibleX, 0, 1024, 768)];
    UIImage * helpImage = [UIImage imageNamed:@"HelpOverLay.png"];
    [helpOverlay setImage:helpImage];
    helpOverlay.tag = 50;
    self.scrollEnabled = NO;
    [self addSubview:helpOverlay]; 
    UITapGestureRecognizer *tap = [[UITapGestureRecognizer alloc] 
                               initWithTarget:self
                               action:@selector(dismissView)];

[self addGestureRecognizer:tap]; 
```

}

在这里，我将覆盖从另一个视图中移除。

```
- (void) dismissView
{
    UIView *overlay = [self viewWithTag:50];
    [overlay removeFromSuperview];
    self.scrollEnabled = YES;
} 
```

我的问题是如何在第二种方法中删除手势识别器？我不能将变量 tap 传递给这个方法，也不能在以前的方法中删除它。任何指针？在事件方面，我遇到了很多传递变量问题。

* * *

## 回答 #1

> 赞同：108
> 
> 时间：2012-06-08T11:35:20.313

此循环将删除视图具有的所有手势识别器

```
for (UIGestureRecognizer *recognizer in self.view.gestureRecognizers) {
    [self.view removeGestureRecognizer:recognizer];
} 
```

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2012-06-08T11:37:29.840

`ivar` `UITapGestureRecognizer *tap`在你的`@interface`.

更改`helpClicked`为：

```
- (void)helpClicked
{
    CGRect visibleBounds = [self convertRect:[self bounds] toView:viewContainer];
    CGFloat minimumVisibleX = CGRectGetMinX(visibleBounds);
    UIImageView * helpOverlay = [[UIImageView alloc]initWithFrame:CGRectMake(minimumVisibleX, 0, 1024, 768)];
    UIImage * helpImage = [UIImage imageNamed:@"HelpOverLay.png"];
    [helpOverlay setImage:helpImage];
    helpOverlay.tag = 50;
    self.scrollEnabled = NO;
    [self addSubview:helpOverlay]; 
    tap = [[UITapGestureRecognizer alloc] 
                               initWithTarget:self
                               action:@selector(dismissView)];

    [self addGestureRecognizer:tap];  
} 
```

并`dismissView`：

```
for (UIGestureRecognizer *recognizer in self.view.gestureRecognizers) {
    [self removeGestureRecognizer:tap];
} 
```

编辑：我认为 nhahtdh 的方法比这个更优雅一点。

EDIT2：看来你在`[self addGestureRecognizer:tap]`工作，所以我假设这是`UIView`.

* * *

## 回答 #3

> 赞同：30
> 
> 时间：2015-07-30T17:38:25.653

从[WWDC 2015 Cocoa Touch Best Practices](https://developer.apple.com/videos/wwdc/2015/?id=231)开始，建议您保留一个属性或 iVar，如果您以后需要访问它，不要使用 using `viewWithTag:`。

## Moto：属性而不是标签

这可以让你免于一些麻烦：

1.  在处理多个手势时，您可以通过访问属性直接删除您想要的手势并将其删除。（无需迭代所有视图的手势来移除正确的手势）
2.  在迭代时通过标签找到正确的手势，当视图上有多个标签以及与特定标签发生冲突时会非常误导

> （即）您第一次使用标签实现了它，一切都按预期工作。稍后您将处理另一个功能，可以说会破坏此功能并导致您不希望出现的不良行为。日志不会给你警告，你能得到的最好的东西取决于它是一个崩溃信号**发送到实例的无法识别的选择器的情况**。*有时你不会得到这些*。

## 解决方案

声明 iVar

```
@implementation YourController {
    UITapGestureRecognizer *tap;
} 
```

设置您的视图

```
- (void) helpClicked {
    //Your customization code

    //Adding tap gesture
    tap = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(dismissView)];
    [self addGestureRecognizer:tap];
} 
```

直接移除手势

```
- (void) dismissView {
    [self.view removeGestureRecognizer:tap];
} 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2017-01-20T04:38:47.347

**斯威夫特**版本：

```
if let recognizers = yourView.gestureRecognizers { 
  for recognizer in recognizers {
    yourView.removeGestureRecognizer(recognizer)
  }
} 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2012-06-08T11:36:04.573

只需设置一次覆盖视图，并设置手势识别器，但将覆盖视图**隐藏**。当视图被隐藏时，它不会收到用户的任何触摸。仅在必要时使覆盖视图可见，并在不需要时将其隐藏。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2012-06-08T12:44:27.157

对于第二种方法，您的代码可能看起来更像这样：

```
- (void) dismissView {
  UIView *overlay = [self viewWithTag:50];

  for (UIGestureRecognizer *recognizer in self.view.gestureRecognizers) {
    if([recognizer isKindOfClass:[UITapGestureRecognizer class]]) {
      [self removeGestureRecognizer:recognizer];
    }
  }

  [overlay removeFromSuperview];
  self.scrollEnabled = YES;
} 
```

我添加了对 的检查`UITapGestureRecognizer`，以防您的班级处理超过 1`UIGestureRecognizer`秒并且您只想删除它。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2014-12-01T12:54:39.840

这对我有用：

```
for (UIGestureRecognizer *gr in self.view.gestureRecognizers) {
  [self.view removeGestureRecognizer:gr];
} 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2018-06-27T06:14:19.640

**在斯威夫特 4**

```
if let gestures = shotButton.gestureRecognizers //first be safe if gestures are there
    {
        for gesture in gestures //get one by one
        {
            shotButton.removeGestureRecognizer(gesture) //remove gesture one by one
        }
    } 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2017-10-11T14:42:41.750

如果您能够扩展视图，您可以尝试这种方式：

```
_ = gestureRecognizers.flatMap { $0.map { removeGestureRecognizer($0) } } 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-05-07T20:23:40.530

它对我有用。

```
while (view.gestureRecognizers.count) {
  [view removeGestureRecognizer:[view.gestureRecognizers objectAtIndex:0]];
} 
```

# python - Python 错误 - 我在 GAE 中随机（很少）得到这个奇怪的错误

> ID：10947983
> 
> 赞同：2
> 
> 时间：2012-06-08T11:29:49.307
> 
> 标签：python, debugging, google-app-engine

我们有一个名为 model 的包

在模型中，我们有一个 TopicM 模块，它定义了一个类 Topic 我们将它导入到同一个包中名为 GeneralM 的模块中。有时（很少）我们会收到此错误：

可能是什么原因？会不会是循环进口？我们是否应该把一些东西放进去`'__init__.py'?`

请指教。

（我为冗长的错误道歉）-->-->-->

```
<type 'exceptions.ImportError'> Python 2.7.2: C:\Python27\pythonw.exe
Fri Jun 08 11:23:46 2012

A problem occurred in a Python script. Here is the sequence of function calls leading up to the error, in the order they occurred.
 D:\Program Files\Google\google_appengine\google\appengine\tools\dev_appserver.py in _HandleRequest(self=<google.appengine.tools.dev_appserver.DevAppServerRequestHandler instance>)
   2779         outfile = cStringIO.StringIO()
   2780         try:
=> 2781           self._Dispatch(dispatcher, self.rfile, outfile, env_dict)
   2782         finally:
   2783           self.module_manager.UpdateModuleFileModificationTimes()
self = <google.appengine.tools.dev_appserver.DevAppServerRequestHandler instance>, self._Dispatch = <bound method DevAppServerRequestHandler._Dispat...v_appserver.DevAppServerRequestHandler instance>>, dispatcher = <google.appengine.tools.dev_appserver.MatcherDispatcher object>, self.rfile = <socket._fileobject object>, outfile = <cStringIO.StringO object>, env_dict = {'APPENGINE_RUNTIME': 'python', 'APPLICATION_ID': 'dev~greatest-app-ever', 'CURRENT_VERSION_ID': '1.1', 'REMOTE_ADDR': '127.0.0.1', 'REQUEST_ID_HASH': 'F1F836CB', 'REQUEST_METHOD': 'GET', 'SDK_VERSION': '1.6.5', 'SERVER_NAME': 'localhost', 'SERVER_PORT': '8080', 'SERVER_PROTOCOL': 'HTTP/1.0', ...}
 D:\Program Files\Google\google_appengine\google\appengine\tools\dev_appserver.py in _Dispatch(self=<google.appengine.tools.dev_appserver.DevAppServerRequestHandler instance>, dispatcher=<google.appengine.tools.dev_appserver.MatcherDispatcher object>, socket_infile=<socket._fileobject object>, outfile=<cStringIO.StringO object>, env_dict={'APPENGINE_RUNTIME': 'python', 'APPLICATION_ID': 'dev~greatest-app-ever', 'CURRENT_VERSION_ID': '1.1', 'REMOTE_ADDR': '127.0.0.1', 'REQUEST_ID_HASH': 'F1F836CB', 'REQUEST_METHOD': 'GET', 'SDK_VERSION': '1.6.5', 'SERVER_NAME': 'localhost', 'SERVER_PORT': '8080', 'SERVER_PROTOCOL': 'HTTP/1.0', ...})
   2667           dispatcher.Dispatch(app_server_request,
   2668                               outfile,
=> 2669                               base_env_dict=env_dict)
   2670         finally:
   2671           request_file.close()
base_env_dict undefined, env_dict = {'APPENGINE_RUNTIME': 'python', 'APPLICATION_ID': 'dev~greatest-app-ever', 'CURRENT_VERSION_ID': '1.1', 'REMOTE_ADDR': '127.0.0.1', 'REQUEST_ID_HASH': 'F1F836CB', 'REQUEST_METHOD': 'GET', 'SDK_VERSION': '1.6.5', 'SERVER_NAME': 'localhost', 'SERVER_PORT': '8080', 'SERVER_PROTOCOL': 'HTTP/1.0', ...}
 D:\Program Files\Google\google_appengine\google\appengine\tools\dev_appserver.py in Dispatch(self=<google.appengine.tools.dev_appserver.MatcherDispatcher object>, request=<AppServerRequest relative_url: /prof?lectureKey...mp', mode 'rb' at 0x0384A860> force_admin: False>, outfile=<cStringIO.StringO object>, base_env_dict={'APPENGINE_RUNTIME': 'python', 'APPLICATION_ID': 'dev~greatest-app-ever', 'CURRENT_VERSION_ID': '1.1', 'REMOTE_ADDR': '127.0.0.1', 'REQUEST_ID_HASH': 'F1F836CB', 'REQUEST_METHOD': 'GET', 'SDK_VERSION': '1.6.5', 'SERVER_NAME': 'localhost', 'SERVER_PORT': '8080', 'SERVER_PROTOCOL': 'HTTP/1.0', ...})
    690         forward_request = dispatcher.Dispatch(request,
    691                                               outfile,
=>  692                                               base_env_dict=base_env_dict)
    693 
    694         if forward_request:
base_env_dict = {'APPENGINE_RUNTIME': 'python', 'APPLICATION_ID': 'dev~greatest-app-ever', 'CURRENT_VERSION_ID': '1.1', 'REMOTE_ADDR': '127.0.0.1', 'REQUEST_ID_HASH': 'F1F836CB', 'REQUEST_METHOD': 'GET', 'SDK_VERSION': '1.6.5', 'SERVER_NAME': 'localhost', 'SERVER_PORT': '8080', 'SERVER_PROTOCOL': 'HTTP/1.0', ...}
 D:\Program Files\Google\google_appengine\google\appengine\tools\dev_appserver.py in Dispatch(self=<google.appengine.tools.dev_appserver.CGIDispatcher object>, request=<AppServerRequest relative_url: /prof?lectureKey...mp', mode 'rb' at 0x0384A860> force_admin: False>, outfile=<cStringIO.StringO object>, base_env_dict={'APPENGINE_RUNTIME': 'python', 'APPLICATION_ID': 'dev~greatest-app-ever', 'CURRENT_VERSION_ID': '1.1', 'REMOTE_ADDR': '127.0.0.1', 'REQUEST_ID_HASH': 'F1F836CB', 'REQUEST_METHOD': 'GET', 'SDK_VERSION': '1.6.5', 'SERVER_NAME': 'localhost', 'SERVER_PORT': '8080', 'SERVER_PROTOCOL': 'HTTP/1.0', ...})
   1729                      memory_file,
   1730                      outfile,
=> 1731                      self._module_dict)
   1732     finally:
   1733       logging.root.level = before_level
self = <google.appengine.tools.dev_appserver.CGIDispatcher object>, self._module_dict = {'Cookie': <module 'Cookie' from 'C:\Python27\lib\Cookie.pyc'>, 'StringIO': <module 'StringIO' from 'C:\Python27\lib\StringIO.pyc'>, 'UserDict': <module 'UserDict' from 'C:\Python27\lib\UserDict.pyc'>, '__builtin__': <module '__builtin__' (built-in)>, '__future__': <module '__future__' from 'C:\Python27\lib\__future__.pyc'>, '__main__': <module 'prof' from 'C:\Current Project\study-wise\src\prof.py'>, '_abcoll': <module '_abcoll' from 'C:\Python27\lib\_abcoll.pyc'>, '_bisect': <module '_bisect' (built-in)>, '_collections': <module '_collections' (built-in)>, '_functools': <module '_functools' (built-in)>, ...}
 D:\Program Files\Google\google_appengine\google\appengine\tools\dev_appserver.py in ExecuteCGI(config=<AppInfoExternal error_handlers=None b...one api_version=1 api_config=None >, root_path=r'C:\Current Project\study-wise\src', handler_path='prof.py', cgi_path=r'C:\Current Project\study-wise\src\prof.py', env={'APPENGINE_RUNTIME': 'python', 'APPLICATION_ID': 'dev~greatest-app-ever', 'AUTH_DOMAIN': 'gmail.com', 'CONTENT_LENGTH': '', 'CONTENT_TYPE': 'application/x-www-form-urlencoded', 'CURRENT_VERSION_ID': '1.1', 'GATEWAY_INTERFACE': 'CGI/1.1', 'HTTP_ACCEPT': 'text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8', 'HTTP_ACCEPT_LANGUAGE': 'en-us,en;q=0.5', 'HTTP_CACHE_CONTROL': 'max-age=0', ...}, infile=<cStringIO.StringO object>, outfile=<cStringIO.StringO object>, module_dict={'Cookie': <module 'Cookie' from 'C:\Python27\lib\Cookie.pyc'>, 'StringIO': <module 'StringIO' from 'C:\Python27\lib\StringIO.pyc'>, 'UserDict': <module 'UserDict' from 'C:\Python27\lib\UserDict.pyc'>, '__builtin__': <module '__builtin__' (built-in)>, '__future__': <module '__future__' from 'C:\Python27\lib\__future__.pyc'>, '__main__': <module 'prof' from 'C:\Current Project\study-wise\src\prof.py'>, '_abcoll': <module '_abcoll' from 'C:\Python27\lib\_abcoll.pyc'>, '_bisect': <module '_bisect' (built-in)>, '_collections': <module '_collections' (built-in)>, '_functools': <module '_functools' (built-in)>, ...}, exec_script=<function ExecuteOrImportScript>, exec_py27_handler=<function ExecutePy27Handler>)
   1629         reset_modules = exec_py27_handler(config, handler_path, cgi_path, hook)
   1630       else:
=> 1631         reset_modules = exec_script(config, handler_path, cgi_path, hook)
   1632     except SystemExit, e:
   1633       logging.debug('CGI exited with status: %s', e)
reset_modules = True, exec_script = <function ExecuteOrImportScript>, config = <AppInfoExternal error_handlers=None b...one api_version=1 api_config=None >, handler_path = 'prof.py', cgi_path = r'C:\Current Project\study-wise\src\prof.py', hook = <google.appengine.tools.dev_appserver_import_hook.HardenedModulesHook object>
 D:\Program Files\Google\google_appengine\google\appengine\tools\dev_appserver.py in ExecuteOrImportScript(config=<AppInfoExternal error_handlers=None b...one api_version=1 api_config=None >, handler_path='prof.py', cgi_path=r'C:\Current Project\study-wise\src\prof.py', import_hook=<google.appengine.tools.dev_appserver_import_hook.HardenedModulesHook object>)
   1317 
   1318     if module_code:
=> 1319       exec module_code in script_module.__dict__
   1320     else:
   1321       script_module.main()
module_code = <code object <module> at 03760E78, file "C:\Current Project\study-wise\src\prof.py", line 2>, script_module = <module 'prof' from 'C:\Current Project\study-wise\src\prof.py'>, script_module.__dict__ = {'__builtins__': {'ArithmeticError': <type 'exceptions.ArithmeticError'>, 'AssertionError': <type 'exceptions.AssertionError'>, 'AttributeError': <type 'exceptions.AttributeError'>, 'BaseException': <type 'exceptions.BaseException'>, 'BufferError': <type 'exceptions.BufferError'>, 'BytesWarning': <type 'exceptions.BytesWarning'>, 'DeprecationWarning': <type 'exceptions.DeprecationWarning'>, 'EOFError': <type 'exceptions.EOFError'>, 'Ellipsis': Ellipsis, 'EnvironmentError': <type 'exceptions.EnvironmentError'>, ...}, '__doc__': None, '__file__': r'C:\Current Project\study-wise\src\prof.py', '__loader__': <google.appengine.tools.dev_appserver_import_hook.HardenedModulesHook object>, '__name__': 'prof', '__package__': None, 'run_wsgi_app': <function run_wsgi_app>, 'template': <module 'google.appengine.ext.webapp.template' f...engine\google\appengine\ext\webapp\template.pyc'>, 'webapp': <module 'google.appengine.ext.webapp' from 'D:\P...engine\google\appengine\ext\webapp\__init__.pyc'>}
 C:\Current Project\study-wise\src\prof.py in ()
      3 from google.appengine.ext.webapp.util import run_wsgi_app
      4 from google.appengine.ext.webapp import template
=>    5 from model import TopicM
      6 from model import LectureM
      7 from model import GeneralM
model undefined, TopicM undefined
 D:\Program Files\Google\google_appengine\google\appengine\tools\dev_appserver_import_hook.py in Decorate(self=<google.appengine.tools.dev_appserver_import_hook.HardenedModulesHook object>, *args=('model.TopicM',), **kwargs={})
    674     self._indent_level += 1
    675     try:
=>  676       return func(self, *args, **kwargs)
    677     finally:
    678       self._indent_level -= 1
func = <function load_module>, self = <google.appengine.tools.dev_appserver_import_hook.HardenedModulesHook object>, args = ('model.TopicM',), kwargs = {}
 D:\Program Files\Google\google_appengine\google\appengine\tools\dev_appserver_import_hook.py in load_module(self=<google.appengine.tools.dev_appserver_import_hook.HardenedModulesHook object>, fullname='model.TopicM')
   1856         search_path = parent_module.__path__
   1857 
=> 1858     return self.FindAndLoadModule(submodule, fullname, search_path)
   1859 
   1860   @Trace
self = <google.appengine.tools.dev_appserver_import_hook.HardenedModulesHook object>, self.FindAndLoadModule = <bound method HardenedModulesHook.Decorate of <g...ppserver_import_hook.HardenedModulesHook object>>, submodule = 'TopicM', fullname = 'model.TopicM', search_path = [r'C:\Current Project\study-wise\src\model', r'C:\Current Project\study-wise\src\model']
 D:\Program Files\Google\google_appengine\google\appengine\tools\dev_appserver_import_hook.py in Decorate(self=<google.appengine.tools.dev_appserver_import_hook.HardenedModulesHook object>, *args=('TopicM', 'model.TopicM', [r'C:\Current Project\study-wise\src\model', r'C:\Current Project\study-wise\src\model']), **kwargs={})
    674     self._indent_level += 1
    675     try:
=>  676       return func(self, *args, **kwargs)
    677     finally:
    678       self._indent_level -= 1
func = <function FindAndLoadModule>, self = <google.appengine.tools.dev_appserver_import_hook.HardenedModulesHook object>, args = ('TopicM', 'model.TopicM', [r'C:\Current Project\study-wise\src\model', r'C:\Current Project\study-wise\src\model']), kwargs = {}
 D:\Program Files\Google\google_appengine\google\appengine\tools\dev_appserver_import_hook.py in FindAndLoadModule(self=<google.appengine.tools.dev_appserver_import_hook.HardenedModulesHook object>, submodule='TopicM', submodule_fullname='model.TopicM', search_path=[r'C:\Current Project\study-wise\src\model', r'C:\Current Project\study-wise\src\model'])
   1720                                          source_file,
   1721                                          pathname,
=> 1722                                          description)
   1723 
   1724 
description = ('.py', 'U', 1)
 D:\Program Files\Google\google_appengine\google\appengine\tools\dev_appserver_import_hook.py in Decorate(self=<google.appengine.tools.dev_appserver_import_hook.HardenedModulesHook object>, *args=('model.TopicM', <closed file 'C:\Current Project\study-wise\src\model\TopicM.py', mode 'U'>, r'C:\Current Project\study-wise\src\model\TopicM.py', ('.py', 'U', 1)), **kwargs={})
    674     self._indent_level += 1
    675     try:
=>  676       return func(self, *args, **kwargs)
    677     finally:
    678       self._indent_level -= 1
func = <function LoadModuleRestricted>, self = <google.appengine.tools.dev_appserver_import_hook.HardenedModulesHook object>, args = ('model.TopicM', <closed file 'C:\Current Project\study-wise\src\model\TopicM.py', mode 'U'>, r'C:\Current Project\study-wise\src\model\TopicM.py', ('.py', 'U', 1)), kwargs = {}
 D:\Program Files\Google\google_appengine\google\appengine\tools\dev_appserver_import_hook.py in LoadModuleRestricted(self=<google.appengine.tools.dev_appserver_import_hook.HardenedModulesHook object>, submodule_fullname='model.TopicM', source_file=<closed file 'C:\Current Project\study-wise\src\model\TopicM.py', mode 'U'>, pathname=r'C:\Current Project\study-wise\src\model\TopicM.py', description=('.py', 'U', 1))
   1663                                      source_file,
   1664                                      pathname,
=> 1665                                      description)
   1666       except:
   1667 
description = ('.py', 'U', 1)
 C:\Current Project\study-wise\src\model\TopicM.py in ()
      2 from google.appengine.ext import db
=>    3 import GeneralM
      4 import LectureM
      5 
      6 def getTopicsByLecture(lecture):
GeneralM undefined
 D:\Program Files\Google\google_appengine\google\appengine\tools\dev_appserver_import_hook.py in Decorate(self=<google.appengine.tools.dev_appserver_import_hook.HardenedModulesHook object>, *args=('model.GeneralM',), **kwargs={})
    674     self._indent_level += 1
    675     try:
=>  676       return func(self, *args, **kwargs)
    677     finally:
    678       self._indent_level -= 1
func = <function load_module>, self = <google.appengine.tools.dev_appserver_import_hook.HardenedModulesHook object>, args = ('model.GeneralM',), kwargs = {}
 D:\Program Files\Google\google_appengine\google\appengine\tools\dev_appserver_import_hook.py in load_module(self=<google.appengine.tools.dev_appserver_import_hook.HardenedModulesHook object>, fullname='model.GeneralM')
   1856         search_path = parent_module.__path__
   1857 
=> 1858     return self.FindAndLoadModule(submodule, fullname, search_path)
   1859 
   1860   @Trace
self = <google.appengine.tools.dev_appserver_import_hook.HardenedModulesHook object>, self.FindAndLoadModule = <bound method HardenedModulesHook.Decorate of <g...ppserver_import_hook.HardenedModulesHook object>>, submodule = 'GeneralM', fullname = 'model.GeneralM', search_path = [r'C:\Current Project\study-wise\src\model', r'C:\Current Project\study-wise\src\model']
 D:\Program Files\Google\google_appengine\google\appengine\tools\dev_appserver_import_hook.py in Decorate(self=<google.appengine.tools.dev_appserver_import_hook.HardenedModulesHook object>, *args=('GeneralM', 'model.GeneralM', [r'C:\Current Project\study-wise\src\model', r'C:\Current Project\study-wise\src\model']), **kwargs={})
    674     self._indent_level += 1
    675     try:
=>  676       return func(self, *args, **kwargs)
    677     finally:
    678       self._indent_level -= 1
func = <function FindAndLoadModule>, self = <google.appengine.tools.dev_appserver_import_hook.HardenedModulesHook object>, args = ('GeneralM', 'model.GeneralM', [r'C:\Current Project\study-wise\src\model', r'C:\Current Project\study-wise\src\model']), kwargs = {}
 D:\Program Files\Google\google_appengine\google\appengine\tools\dev_appserver_import_hook.py in FindAndLoadModule(self=<google.appengine.tools.dev_appserver_import_hook.HardenedModulesHook object>, submodule='GeneralM', submodule_fullname='model.GeneralM', search_path=[r'C:\Current Project\study-wise\src\model', r'C:\Current Project\study-wise\src\model'])
   1720                                          source_file,
   1721                                          pathname,
=> 1722                                          description)
   1723 
   1724 
description = ('.py', 'U', 1)
 D:\Program Files\Google\google_appengine\google\appengine\tools\dev_appserver_import_hook.py in Decorate(self=<google.appengine.tools.dev_appserver_import_hook.HardenedModulesHook object>, *args=('model.GeneralM', <closed file 'C:\Current Project\study-wise\src\model\GeneralM.py', mode 'U'>, r'C:\Current Project\study-wise\src\model\GeneralM.py', ('.py', 'U', 1)), **kwargs={})
    674     self._indent_level += 1
    675     try:
=>  676       return func(self, *args, **kwargs)
    677     finally:
    678       self._indent_level -= 1
func = <function LoadModuleRestricted>, self = <google.appengine.tools.dev_appserver_import_hook.HardenedModulesHook object>, args = ('model.GeneralM', <closed file 'C:\Current Project\study-wise\src\model\GeneralM.py', mode 'U'>, r'C:\Current Project\study-wise\src\model\GeneralM.py', ('.py', 'U', 1)), kwargs = {}
 D:\Program Files\Google\google_appengine\google\appengine\tools\dev_appserver_import_hook.py in LoadModuleRestricted(self=<google.appengine.tools.dev_appserver_import_hook.HardenedModulesHook object>, submodule_fullname='model.GeneralM', source_file=<closed file 'C:\Current Project\study-wise\src\model\GeneralM.py', mode 'U'>, pathname=r'C:\Current Project\study-wise\src\model\GeneralM.py', description=('.py', 'U', 1))
   1663                                      source_file,
   1664                                      pathname,
=> 1665                                      description)
   1666       except:
   1667 
description = ('.py', 'U', 1)
 C:\Current Project\study-wise\src\model\GeneralM.py in ()
      2 from google.appengine.ext import db
      3 from google.appengine.api import users
=>    4 from TopicM import Topic
      5 from LectureM import Lecture
      6 
TopicM undefined, Topic undefined

<type 'exceptions.ImportError'>: cannot import name Topic
      args = ('cannot import name Topic',)
      message = 'cannot import name Topic' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T12:07:56.170

看到[Pythonic 方式来解决循环导入语句？](https://stackoverflow.com/questions/5748946/pythonic-way-to-resolve-circular-import-statements). 基于此，将 GeneralM 中的导入从更改`from TopicM import Topic`为 just `import TopicM`，然后将引用限定为`Topic`as `TopicM.Topic`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-09T01:42:36.877

尝试将所有可能的导入移动到模块的底部，如果您正确规划了类关系，那应该可以解决您的问题！

如果您的问题拒绝消失，请阅读这个很棒的答案： [https ://stackoverflow.com/a/894885/988434](https://stackoverflow.com/a/894885/988434)

玩得开心黑客！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T12:07:07.417

```
from model.TopicM import Topic 
```

试试看。

# android - SQLite ERROR close() 从未在数据库上显式调用

> ID：10947988
> 
> 赞同：0
> 
> 时间：2012-06-08T11:30:08.370
> 
> 标签：android, sqlite

我有一个 SQLite 数据库，它可以工作，但是在更改或添加竞争时在 Logcat 上出现以下错误。我必须关闭数据库吗？

```
06-08 12:52:29.897: E/Database(6274): close() was never explicitly called on database '/data/data/de.android.test/databases/table.db' 
06-08 12:52:29.897: E/Database(6274): android.database.sqlite.DatabaseObjectNotClosedException: Application did not close the cursor or database object that was opened here
06-08 12:52:29.897: E/Database(6274):   at android.database.sqlite.SQLiteDatabase.<init>(SQLiteDatabase.java:1900)
06-08 12:52:29.897: E/Database(6274):   at android.database.sqlite.SQLiteDatabase.openDatabase(SQLiteDatabase.java:884)
06-08 12:52:29.897: E/Database(6274):   at android.database.sqlite.SQLiteDatabase.openOrCreateDatabase(SQLiteDatabase.java:918)
06-08 12:52:29.897: E/Database(6274):   at android.database.sqlite.SQLiteDatabase.openOrCreateDatabase(SQLiteDatabase.java:911)
06-08 12:52:29.897: E/Database(6274):   at android.app.ContextImpl.openOrCreateDatabase(ContextImpl.java:548)
06-08 12:52:29.897: E/Database(6274):   at android.content.ContextWrapper.openOrCreateDatabase(ContextWrapper.java:203)
06-08 12:52:29.897: E/Database(6274):   at android.database.sqlite.SQLiteOpenHelper.getWritableDatabase(SQLiteOpenHelper.java:98)
06-08 12:52:29.897: E/Database(6274):   at de.database.DAO.<init>(DAO.java:39)
06-08 12:52:29.897: E/Database(6274):   at de.AWocheActivity.onClick(AWocheActivity.java:551)
06-08 12:52:29.897: E/Database(6274):   at android.view.View.performClick(View.java:2408)
06-08 12:52:29.897: E/Database(6274):   at android.view.View$PerformClick.run(View.java:8817)
06-08 12:52:29.897: E/Database(6274):   at android.os.Handler.handleCallback(Handler.java:587)
06-08 12:52:29.897: E/Database(6274):   at android.os.Handler.dispatchMessage(Handler.java:92)
06-08 12:52:29.897: E/Database(6274):   at android.os.Looper.loop(Looper.java:144)
06-08 12:52:29.897: E/Database(6274):   at android.app.ActivityThread.main(ActivityThread.java:4937)
06-08 12:52:29.897: E/Database(6274):   at java.lang.reflect.Method.invokeNative(Native Method)
06-08 12:52:29.897: E/Database(6274):   at java.lang.reflect.Method.invoke(Method.java:521)
06-08 12:52:29.897: E/Database(6274):   at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:858)
06-08 12:52:29.897: E/Database(6274):   at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:616)
06-08 12:52:29.897: E/Database(6274):   at dalvik.system.NativeStart.main(Native Method) 
```

这是代码：

活动：

```
 public void onCreate(Bundle savedInstanceState) {
    .
    .
    .
    dao = new DAO(this);
    Cursor subjectList = dao.fetchAllSubject();
   }

    public void onClick(View v) {
    global_db_Id = 0;

    dao = new DAO(this);
    Cursor subjectList = dao.fetchAllSubject();

        if (global_db_Id == 0){
        long insertedId = dao.createSubject(String.valueOf(hour), "A", String.valueOf(day), fach_kurz.getText().toString(), fach_lang.getText().toString(), String.valueOf(item), room.getText().toString(),String.valueOf(index_awoche));
        }else{
            dao.updateSubject(String.valueOf(global_db_Id), String.valueOf(hour), "A", String.valueOf(day), fach_kurz.getText().toString(), fach_lang.getText().toString(), String.valueOf(item), room.getText().toString(), String.valueOf(index_awoche));

         //if (dao != null) {
         //dao.close();
        //}         
} 
```

在 onClick 方法结束时，我尝试关闭数据库，但随后应用程序崩溃了。数据库：

```
 public class DAO {

        private DatabaseHelper dbHelper;

        private SQLiteDatabase database;
        public long createSubject(String hour, String week, String day, String name,String desc, String col, String room, String btn_nr){
            ContentValues values = new ContentValues();
            values.put(COLUMN_HOUR, hour);
            values.put(COLUMN_WEEK, week);
            values.put(COLUMN_DAY, day);
            values.put(COLUMN_NAME, name);
            values.put(COLUMN_DESCRIPTION, desc);
            values.put(COLUMN_COLOUR, col);
            values.put(COLUMN_ROOM, room);
            values.put(COLUMN_BTN_NR, btn_nr);

return database.insert(TABLE, null, values);
    }

    public Cursor fetchAllSubject(){
        Cursor mCursor = database.query(true, TABLE, new String[] {
                COLUMN_ID, COLUMN_HOUR, COLUMN_WEEK, COLUMN_DAY, COLUMN_NAME, COLUMN_DESCRIPTION, COLUMN_COLOUR, COLUMN_ROOM, COLUMN_BTN_NR},null
                , null, null, null, null, null);
        if (mCursor != null) {
            mCursor.moveToFirst();
        }
        return mCursor;
    }

    public int updateSubject(String id, String hour, String week, String day, String name,String desc, String col, String room, String btn_nr){
        ContentValues values = new ContentValues();
        values.put(COLUMN_HOUR, hour);
        values.put(COLUMN_WEEK, week);
        values.put(COLUMN_DAY, day);
        values.put(COLUMN_NAME, name);
        values.put(COLUMN_DESCRIPTION, desc);
        values.put(COLUMN_COLOUR, col);
        values.put(COLUMN_ROOM, room);
        values.put(COLUMN_BTN_NR, btn_nr);
        return database.update(TABLE, values,COLUMN_ID + "=?",new String[]{id});
        }
    // This I tried on the end of the onClick Method    
    public void close(){
            if(database!=null)
                database.close();
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T11:42:31.983

在您的数据库文件中写入以下代码

```
public class DataBaseHelper extends SQLiteOpenHelper {

   public DataBaseHelper(Context context) {

    super(context, DB_NAME, null, 1);
    this.myContext = context;
 }

    @Override
    public synchronized void close() {

    if (myDataBase != null)
        myDataBase.close();

    super.close();

    }

    @Override
    public void onCreate(SQLiteDatabase arg0) {

    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {

    } 
```

然后从活动中调用

```
 myDataBase.close(); 
```

这是一个很好的参考链接

[http://www.reigndesign.com/blog/using-your-own-sqlite-database-in-android-applications/](http://www.reigndesign.com/blog/using-your-own-sqlite-database-in-android-applications/)

# html - 水平居中具有动态宽度的块元素 - 仅 CSS 跨浏览器

> ID：10947989
> 
> 赞同：6
> 
> 时间：2012-06-08T11:30:14.403
> 
> 标签：html, css

这是一个古老的话题，但我发誓它被证明比它应该的更困难。

我创建了一个 jsfiddle 来显示问题。[http://jsfiddle.net/motocomdigital/VfDfw/1/](http://jsfiddle.net/motocomdigital/VfDfw/1/)

我以为我破解了它，但它在 IE 8 兼容模式下失败。

**问题**

我有导航菜单，在一个语义无序列表中。包含的 div 包装器具有固定宽度，即网站的主要宽度。

无序列表需要在包装器中浮动。但是导航中的所有块元素都没有设置宽度。

[http://jsfiddle.net/motocomdigital/VfDfw/1/](http://jsfiddle.net/motocomdigital/VfDfw/1/)

我为每个元素着色了不同的背景颜色，以便您可以看到每个元素。

我以为我找到了一个修复购买，将**div.nav**上的包装宽度的一半作为左侧位置，然后在**.nav ul**上留有 -50% 的边距- 但似乎在 IE 8 兼容模式下失败，请参见下面的小提琴......

[http://jsfiddle.net/motocomdigital/VfDfw/2/](http://jsfiddle.net/motocomdigital/VfDfw/2/)

任何人都可以提出解决方案或更有效的 CSS 方法。它在烤我的面条。

谢谢

* * *

**更新**

我想我应该用我为什么在我的小提琴示例中使用每个 div 来更新我的问题。

看看我的新小提琴。[http://jsfiddle.net/motocomdigital/VfDfw/3/](http://jsfiddle.net/motocomdigital/VfDfw/4/)

我现在为每个元素添加了 10px 的顶部位置，这样您就可以看到我使用这么多 div 的目的。但唯一的问题是这个解决方案对 IE 7 不友好。所以我需要另一种居中块元素的解决方案。我希望有一个**float: center** CSS 规则！

![在此处输入图像描述](../Images/d3f6c18bd4467e1d790f4128b1dc060a.png)

1.  深蓝色**div**是我的导航无限背景图像的地平线 100% 宽度 div。
2.  红色**div**是包装器，它是我网站的最大宽度。小提琴宽度：420px。
3.  绿色**div**是我的动态导航的浮动宽度，位于左侧：210px（以上宽度的 50%）
4.  黄色的**ul**是我的动态导航**li**元素的浮动宽度，负边距为 50%
5.  蓝色的**li**是我的带有分隔线的锚按钮容器。

我希望这是有道理的。但是这个解决方案几乎奏效了，可惜它在 IE7 中不起作用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-01-10T09:38:23.597

使用带有文本对齐中心的显示块和内联块可以帮助您。它曾经在非常旧的浏览器中工作。在包装器、nav、ul 中将块更改为 inline-block 以使它们全宽或“收缩”并居中。（无法检查旧 IE 中的小提琴，但“应该”工作）

当您在 div 中居中文本并且文本不是真正的文本，而是内联块时，它们的行为就像它们在“单词”中一样，使内容成为居中的元素列表，而不需要任何固定宽度。

```
body {
    font-family: Helvetica, Arial, Geneva, sans-serif;
}

#horizon {
    height: 49px;
    width: 100%;
    overflow: visable;
    position: relative;
    background: url(images/nav-bg.jpg) no-repeat center top #041e75;
    top: 100px;
}

#wrapper {
    max-width: 420px;
    margin:  0 auto;
    height: 49px;
    overflow: visible;
    background: red;
    padding:10px;
    text-align:center;
}

.nav {
    display:block;
    height: 49px;
    background: green;
    padding:5px;
    text-align:center;
}

.nav a {
    color: #ffffff;
}

.nav ul {
    background: yellow;
    padding:5px;
    display:block;
    text-align:center;
}

.nav ul li {
    display: inline-block;
    background: blue;
    overflow: visible;
}

.nav ul li a {
    display: block;
    height: 49px;
    text-shadow: 1px 1px 1px rgba(0, 0, 0, 0.50);
    padding-right: 10px;
    padding-left: 10px;
}

.nav ul li a:hover {
    text-decoration: none;
    background-color: rgb(6, 29, 93 );
    background-color: rgba(13, 43, 119, 0.95);
}
```

```
<div id="horizon">

    <div id="wrapper">

        <div class="nav">                

            <ul>

                <li><a href="#" title="home">Home</a></li>
                <li><a href="#" title="about">About</a></li>
                <li><a href="#" title="menu">Menu</a></li>
                <li><a href="#" title="map">Map</a></li>
                <li><a href="#" title="contact">Contact</a></li>

            </ul>

        </div>

    </div>

</div>
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-01-15T12:22:25.320

嗨，您可能想尝试使用“适合内容宽度”的“margin 0 auto”技术，如下所示：

```
.nav { 
      overflow: visible; 
      height: 49px; 
      position: relative; 
      background: green; 
}

.nav ul {
    height: 49px;
    display: block;
    text-align: center;
    border-right: 1px white solid;
    margin-left: -50%;
    top: 10px;
    overflow: visible;
    background: yellow;
    display: block; 
    margin: 0 auto; 
    width: fit-content; 
} 
```

希望这有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-02-06T21:57:28.540

嗨，我认为我尝试使用 flex 的方式，flex display 是最好的方法，我在如何使用它的行中解释了它。

```
 body {
    font-family: Helvetica, Arial, Geneva, sans-serif;
}

#horizon {
    height: 49px;
    width: 100%;
    overflow: visable;
    background: url(images/nav-bg.jpg) no-repeat center top #041e75;
}

#wrapper {
    width: 420px;
    margin:  0 auto;
    height: 49px;
    overflow: visible;
    background: red;    
    width: 100%;

}

.nav {
    overflow: visible;
    height: 49px;
    float: left;
    left: 210px;
    background: green;
    width: 100%;
}
.nav ul{
  /* useflex to make them to be as a row */
  display: flex;
  /* remove the points from the ul */
  list-style: none;
  /* use this to chose how to spreate the content */
  justify-content: space-between;
  justify-content: space-around;
  justify-content: space-evenly;
}

a {
  /* remove text dec for the li */
  text-decoration: none;
  color: black;
} 
```

# c# - 我需要一种方法来将我所有的方法都包装在 try catch

> ID：10947993
> 
> 赞同：2
> 
> 时间：2012-06-08T11:30:26.810
> 
> 标签：c#, methods, delegates, lambda, try-catch

如果有一种方法可以将我的所有方法包装在 try catch 中，而无需在每个方法中编写 try catch。

目前我们正在使用下面提到的方法：

```
public TValue ErrorHandler<TValue>(Func<TValue> action)
    {
        try
        {
            return (TValue)action();
        }
        catch (Exception ex)
        {
            //Handle Exception and Log it..........
            return default(TValue);
        }
    }

    public void ErrorHandler(Action action)
    {
        try
        {
            action();
        }
        catch (Exception ex)
        {
            //Handle Exception and Log it..........
        }
    } 
```

这被用作：

```
public void ClearControls()
    {
        this.ErrorHandler(() =>
        {
               //................................
        });
    } 
```

由于其中使用了 Lambda，如果在调试时编辑代码，它会强制再次运行应用程序。

请让我知道任何其他可能的解决方案，我可以在所有方法中实现 Try Catch 并毫无痛苦地调试我的代码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T11:32:53.470

像[PostSharp](http://www.sharpcrafters.com/)这样的[AOP](http://en.wikipedia.org/wiki/Aspect-oriented_programming)框架可以在这里为您提供帮助。有一篇关于[这里](http://www.sharpcrafters.com/blog/post/Day-1-e28093-OnExceptionAspect.aspx)的博客文章。`OnExceptionAspect`

基本上，最终结果不是将 try-catch 放入您的方法中，而是使用属性（或本例中的方面）装饰方法。

就我个人而言，我永远不会真正使用它，因为我只尝试/捕捉我可以处理的事情，并且从不需要像整个应用程序中的每个方法记录这样的事情。如果你不能处理它，不要抓住它。

* * *

**更新：**根据您的评论，PostSharp 的替代品是[Castle DynamicProxy](http://stw.castleproject.org/Default.aspx?Page=DynamicProxy&NS=Tools&AspxAutoDetectCookieSupport=1)，它是免费的。关于 PostSharp 许可证，您应该能够从免费版本中获得所需的行为，该版本涵盖了方法级别的 aspest，详见[此处](http://www.sharpcrafters.com/purchase/compare)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-08T11:43:11.213

*   不要将*所有内容都*包装在`try-catch`. `try-catch`在您通常会在代码中没有错误的情况下看到异常的地方使用，例如 IO 操作。如果你包装所有东西，那实际上可能会使测试和调试变得更加困难，从而导致代码质量降低。让错误冒出并在开发早期捕获它们。
*   编写一个处理程序方法来执行日志记录和您想要做的所有其他常见事情，并简单地在块`try-catch`中使用该方法。`catch`
*   `try-catch`通过订阅[AppDomain.Current.UnhandledException](http://msdn.microsoft.com/en-us/library/system.appdomain.unhandledexception.aspx)事件，使用全局异常处理程序记录块未处理的异常。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T11:35:01.927

最简单的解决方案是捕获调用者中的错误，或者更进一步，线程入口点通常是您的 Program.cs 或 global.asax.cs。

# css - 强制浏览器忽略包装器中的溢出元素

> ID：10947994
> 
> 赞同：0
> 
> 时间：2012-06-08T11:30:28.790
> 
> 标签：css

我正在研究一些基本的网页布局。问题是如果屏幕小于 1050 像素（1050 像素是包装器的宽度），浏览器不会忽略从包装器溢出的元素并添加水平滚动条。查看代码：

**HTML**

```
<body>
    <div id="wrapperMain">
        <div id="headerLeftOverflow"></div>            
        <div id="headerRightOverflow"></div>
        <div id="headerMain"></div>
    </div>
</body> 
```

**CSS**

```
body {    
    margin: 0;
    padding: 0;
    background-color: #f9eacc;
    text-align: center;
    font-family: Tahoma , sans-serif;
    color: #333333;

}

div#wrapperMain {
   width:  1050px;
   margin: auto;
   position: relative;
   height: 800px;
}

div#headerMain {
    position: absolute;
    top: 0;
    left: 0;
    width: 1050px;
    height: 565px;
    background-image: url("../images/header.png");
    background-repeat: no-repeat;
}

div#headerLeftOverflow {
    position: absolute;
    width: 271px;
    height: 565px;
    background-image: url("../images/headerLeftOverflow.png");
    top: 0;
    left: -271px;    
}

div#headerRightOverflow {
    position: absolute;
    width: 277px;
    height: 565px;
    background-image: url("../images/headerRightOverflow.png");
    top: 0;
    left: 1050px;   
} 
```

**不要误会我的意思。**

如果屏幕足够宽，我希望 id 为“headerRightOverflow”的 div 可见。奇怪的是 id 为“headerLeftOverflow”的 div 可以正常工作（如果屏幕小于 1050 像素，则 div 被隐藏）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T11:53:33.650

如果您想快速解决使滚动条消失的问题 - 添加

```
body{overflow-x: hidden;} 
```

但是，我认为你应该简单地编写你的代码，没有位置：绝对。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T11:31:48.163

以这种方式正确的 wrappermain ti 的 css

```
div#wrapperMain { 
overflow:hidden;
   width:  1050px; 
   margin: auto; 
   position: relative; 
   height: 800px; 
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T12:09:33.340

最好的办法是使用 CSS3 媒体查询

```
/* Greater than standard 1050px */
@media only screen and (min-width: 1050px) {
//Your Code here that has to be performed when the screen size is more than 1050
} 
```

[或者你可以使用像modernizr](http://modernizr.com/)这样的Javascript库

Modernizr 是您制作最佳网站和应用程序的起点，无论您的访问者使用什么浏览器或设备，它们都能正常工作。

# c# - 文化中立的 TryParse

> ID：10947997
> 
> 赞同：0
> 
> 时间：2012-06-08T11:30:33.597
> 
> 标签：c#

我有以下扩展方法

```
public static bool IsValidCurrency(this string value)
{
    CultureInfo culture = new CultureInfo ("en-gb");
    decimal result;
    return decimal.TryParse(value, NumberStyles.Currency, culture, out result);
} 
```

我希望这在文化上是中立的，允许将 $ 、 €、 ¥ 等传递到方法中

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T11:58:07.763

不同的文化可能使用相同的货币符号来表示不同的事物。因此，没有不变的方式来读取货币。

然而，它可以通过以下方式完成：

```
public static bool IsValidCurrency(this string value)
{       
    decimal result;
    var cultures = CultureInfo.GetCultures(CultureTypes.SpecificCultures);
    return cultures.Any(info => Decimal.TryParse(value, NumberStyles.Currency, info, out result));
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T11:56:22.853

我最初的想法是，在没有上下文的情况下将货币符号传递给这种方法意味着它可能是一个有效的符号，但不一定是*正确*的——例如，许多地区使用“$”符号。

如果我仍然这样做，我可能会循环特定的 .NET 文化（避免使用 Invariant Culture，如果您使用的是 Windows 7），根据传入的字符串检查每个 RegionInfo 的 CurrencySymbol 属性。这很快，很脏（并且**未经测试**），而它仍在我的脑海中；我相信这可以更有效地编码：

```
public static Boolean IsValidCurrency(this string value)
{
  // Assume the worst.
  Boolean isValid = false;

  foreach (CultureInfo c in CultureInfo.GetCultures(CultureTypes.SpecificCultures))
  {
    // Account for InvariantCulture weirdness in Windows 7.
    if (!c.Equals(CultureInfo.InvariantCulture))
    {
      RegionInfo r = new RegionInfo(c.LCID);

      if (r.CurrencySymbol.Equals(value, StringComparison.OrdinalIgnoreCase))
      {
        // We've got a match, so flag it and break.
        isValid = true;
        break;
      }
    }
  }

  return isValid;
} 
```

这假设您只传递符号，并没有解决不同符号的变体使用。无论如何，希望这能让你思考。