# StackOverflow 问答 000889000-000889999

# windows-vista - 如何从 IE8 降级到 IE7？

> ID：889002
> 
> 赞同：0
> 
> 时间：2009-05-20T16:36:50.027
> 
> 标签：windows-vista, internet-explorer-8, internet-explorer-7, flexbuilder

如何在 Vista 上从 IE8 降级到 IE7？

我想降级是因为我的 Flex Builder 在调试 Flex 应用程序时没有正确关闭浏览器。我确信这可能会在 Flex Builder 或 IE8 的某些未来版本中得到修复，但现在，我想降级以便更有效地调试。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-28T17:03:48.270

另一种选择，只需单击此页面上的“修复它”按钮：http: [//support.microsoft.com/kb/957700/en-us](http://support.microsoft.com/kb/957700/en-us)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-20T16:42:03.570

您可以在“卸载程序”对话框中删除更新。在左侧的任务窗格中是已安装更新的链接，您可以在其中卸载“Windows Internet Explorer 8”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-20T16:39:18.850

我建议使用独立的 IE7 作为选项。看看你是否可以用这个来使用你的 flex builder。

[http://tredosoft.com/IE7_standalone](http://tredosoft.com/IE7_standalone)

[http://tredosoft.com/Multiple_IE](http://tredosoft.com/Multiple_IE)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-28T16:58:57.500

以下是您在 Vista 或 XP 中卸载它的方法。转到“开始”>“运行”，然后（小心地）输入以下行：

%windir%\ie8\spuninst\spuninst.exe

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2011-01-13T11:55:50.393

我知道这个问题特别提到了降级到 IE7，但我只是想在按照 PQW 链接中提到的说明成功删除 IE8 后提一下（[http://support.microsoft.com/kb/957700/en-us](http://support.microsoft.com/kb/957700/en-us) ) 在我的 Windows Server 2003 机器上，我得到了一个完整的 IE6 版本，因此不需要重新安装 IE7。

# asp-classic - IIS6 缓存重命名的文件夹 - 可以刷新/重置吗？

> ID：889008
> 
> 赞同：1
> 
> 时间：2009-05-20T16:37:58.073
> 
> 标签：asp-classic, iis-6

在 Windows2003 服务器上，我有两个文件夹：

*   论坛
*   论坛开发

论坛文件夹已上线并被积极使用。dev 文件夹包含许多已更改的 ASP 文件。将 Forum 重命名为其他名称并将 Forum_dev 更改为 Forum 似乎忽略了更改的文件。有没有办法强制 IIS 清除其缓存？

我想我可以浏览更改的文件（在新的论坛文件夹中），进行更改并保存文件就可以了，但是文件很多...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-20T20:17:02.983

重命名根物理文件夹可能没有帮助，因为应用程序保留了该文件夹。您可以将其命名为“粉红大象”，它不会在意它只需要在启动应用程序时查找文件夹时的名称。

正确和友好的方法是简单地回收应用程序所在的应用程序池。您可以从 IIS 管理器中池的上下文菜单中执行此操作。

与回收相比，不要使用 IISRESET 严重严厉。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-20T16:44:22.303

您可以使用蛮力并执行以下操作：

```
c:\> IISRESET 
```

不好，但应该完成工作。

您确定是 IIS 缓存这些页面而不是浏览器客户端吗？

# .net - DevExpress - 无法在 TextEdit 控件中使用 ctrl-v

> ID：889014
> 
> 赞同：0
> 
> 时间：2009-05-20T16:39:19.707
> 
> 标签：.net, devexpress, textedit

我试图将一个单独程序中的值粘贴到一个`TextEdit`控件中，当我使用 ctrl-v 时它没有做任何事情。但是，我可以使用右键单击并粘贴，这是成功的。

有没有`AllowShortcutKeys = true`我想念的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-20T16:54:38.617

如果您对菜单项使用 Ctrl+V 快捷方式并且该菜单项的处理程序不执行任何操作，则它可能先于 TextEditor 的功能。

此外，如果您的表单是 MDI 孩子，您可能需要按照本文[http://msdn.microsoft.com/en-us/library/4s6dtf7z.aspx的说明手动执行复制/粘贴操作](http://msdn.microsoft.com/en-us/library/4s6dtf7z.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-20T16:46:14.513

表单上是否有可以成功粘贴的非 DX 控件？您可能在表单上有一个正在吃粘贴击键的事件。具体来说，检查`KeyPreview`表单的属性和`KeyPress`事件。

# javascript - 检测 Javascript 中的自动代理详细信息

> ID：889021
> 
> 赞同：1
> 
> 时间：2009-05-20T16:40:26.290
> 
> 标签：javascript

是否可以在 javascript 中检测和获取代理服务器名称和端口？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-20T19:42:34.643

不可以。浏览器代理设置不适用于网页中运行的 JavaScript。

也许。浏览器代理设置可能（在某些 Web 浏览器中）可从以提升权限运行的 JavaScript（例如，Firefox 插件）获得。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-20T19:57:28.263

对于它的价值：当您询问 JavaScript 时，即使从任何类型的浏览器插件（如 Flash 或 Java 小程序）访问浏览器代理设置也是不可能的，或者至少不可靠或合规的方式。

我之所以提到这一点，只是因为有时当 JavaScript 无法执行某些操作时，此类插件会提供可行的解决方法……但在这里我认为您是 SOL

也许你可以告诉我们更多关于你想要完成的事情？也许还有另一种方法可以满足您的需求。

# django - 在 Django 中查找多对多类别树的根

> ID：889040
> 
> 赞同：2
> 
> 时间：2009-05-20T16:43:22.757
> 
> 标签：django, many-to-many

我有一个 Django 模型，例如：

```
class Category(models.Model):
    status=models.CharField(max_length=16)
    machineName=models.CharField(max_length=50)
    readableName=models.CharField(max_length=100)
    description=models.CharField(max_length=1024)
    parents=models.ManyToManyField('self') 
```

每个类别可能存在于许多父母中。有些类别没有父类别，它们是“根”类别。在简单的 SQL 中，我可以通过以下方式找到它们：

```
SELECT "readableName"
FROM foo_category AS c
LEFT JOIN foo_category_parents AS cp ON (c.id=cp.from_category_id)
WHERE cp.to_category_id IS NULL; 
```

事实上，这很好用。如何通过 Django-y 调用找到“没有父母的类别列表”？我试过：

```
# Says "Cannot resolve keyword 'is_null' into field."
Category.objects.filter(parents__is_null=True)
# Says "Join on field 'id' not permitted."
Category.objects.filter(parents__pk_null=True) 
```

但如前所述，两者都不起作用。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-20T17:51:44.103

Django 的多对多字段通常是对称操作的（请参阅[Django 文档中的此条目](http://docs.djangoproject.com/en/dev/ref/models/fields/#manytomanyfield)）。当您对自己执行 ManyToMany 时，这意味着将创建一个反向的 ManyToMany 条目，因此实际上每个具有父级的类别都将是父级的父级（如果这有意义的话）。

换句话说：

```
a = Category.objects.create(name='a')
b = Category.objects.create(name='b')
b.parents.add(a)

print b.parents.all() # produces [a]
print a.parents.all() # produces [b], which is why your filter is failing 
```

为了解决这个问题，有一个特殊的选择：

```
class Category(models.Model):
    # ... as above ...
    parents=models.ManyToManyField('self', symmetrical=False) 
```

现在您可以通过以下方式获取父类别：

```
 Category.objects.filter(parents=None) 
```

# javascript - javascript：将值传递给隐藏标签或文本的警报时遇到问题

> ID：889042
> 
> 赞同：0
> 
> 时间：2009-05-20T16:44:15.877
> 
> 标签：javascript

我有一个 html 文件，它将值传递到 java servlet 以插入数据库。这是我的代码：

```
<html>
<head>
<script type="text/javascript">
function masinsert(id)
{
 var currentTime=new Date();

 var button = document.getElementById("m"+id);
 button.onclick="";
 button.value="Inserting";

 var partnumber     = document.getElementById("partnumber"+id).value;
 var itemcost       = document.getElementById("itemcost"+id).value;
 var itemlistprice  = document.getElementById("itemlistprice"+id).value;
 var sUnitMeasKey   = document.getElementById("UnitMeasKey"+id);
 var sPurchProdLine     = document.getElementById("PurchProdLine"+id);
 var sItemClassKey  = document.getElementById("itemclasskey"+id);

 var UMKselected = getSelected(sUnitMeasKey);
 var PPLselected = getSelected(sPurchProdLine);
 var ICKselected = getSelected(sItemClassKey);

 function handleHttpResponse()
  {
   if (http.readyState == 4) {
    button.value="Imported";
   }
  }

 var http = getHTTPObject(); // We create the HTTP Object
 var tempUrl = "\MASInsert2";
 tempUrl +=  "?partnumber="+partnumber+"&"+"itemcost="+itemcost+"&"+"itemlistprice="+itemlistprice+"&"+"UnitMeasure="+UMKselected+"&"+"PurchProdLine="+PPLselected+"&"+"itemclasskey="+ICKselected;
  alert(tempUrl);
 http.open("POST", tempUrl, true);
 http.onreadystatechange = handleHttpResponse;
 http.send(null);   
}

function getSelected(ele)
{
    return ele.options[ele.selectedIndex].value;
}

function getHTTPObject(){
 var xmlhttp;
 /*@cc_on
 @if (@_jscript_version >= 5)
   try {
    xmlhttp = new ActiveXObject("Msxml2.XMLHTTP");
   }catch (e){
    try {
     xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
     }catch (E) {
      xmlhttp = false;
      }
  }
  @else
  xmlhttp = false;
  @end @*/
  if (!xmlhttp && typeof XMLHttpRequest != 'undefined') {
    try {
      xmlhttp = new XMLHttpRequest();
    } catch (e) {
      xmlhttp = false;
    }
  }
  return xmlhttp;
 }
</script>
</head>
<body>

<form name=bob method=get>
<input type=hidden id="partnumber321" name="partnumber321" value="884910U">
<input type=hidden id="itemcost321" name="itemcost321" value="1027.39">
<input type=hidden id="itemlistprice321" name="itemlistprice321" value="1129.0">
<input type=hidden id="itemdescription321" name="itemdescription321" value="XSERIES 306M SS P4 3.0GHZ 1MB">
<select id="UnitMeasKey321" name="UnitMeasKey321"><option value="112">Each</select>
<select id="PurchProdLine321" name="PurchProdLine321"><option value="18">IBM</select>
<select id="itemclasskey321" name="itemclasskey321"><option value="48">Hardware</select>
<input id="m321" type="button" onclick="masinsert('321')" value="Add">
</form>
</body>
</html> 
```

当我按下按钮时，alert(partnumber) 返回 null (firefox) 或 object (IE)。我是否错误地传递了这些值以供 servlet 处理？任何想法为什么？它不应该返回一个值吗？

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-20T16:48:56.037

Firefox 返回 null 因为该名称没有 ID。`GetElementByName`如果您不想为输入分配 ID，请致电。

IE 正在返回一个对象，因为 DOM 元素是对象。您需要检查其属性之一（`value`最有可能）以查看它的实际设置。

IE 不应该返回一个对象，但它天真地假设它`GetElementById`与`GetElementByName`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-20T16:51:57.390

经典 IE 错误**[ID 与名称](http://webbugtrack.blogspot.com/2007/08/bug-152-getelementbyid-returns.html)**。您要么需要指定和使用 id 属性，要么使用 getElementsByName（注意它会返回匹配的“集合”）或 form.elements[nameOrIndex] 格式。

例如

```
alert(document.forms[myFormNameOrIndex].elements[myElementNameOrIndex].value); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-20T16:52:26.373

我看到三件奇怪的事情（可能还有问题）：

1.  你如何设置id“partnumber”？IE 给你一个对象似乎你只设置了输入框的 name 属性，而不是 id 属性。
2.  您必须获取这些属性的值才能构造一个 url：`partnumber.value`
3.  您正在使用一种`GET`看似插入的方法。这应该是一个`POST`.

# python - 仅当正则表达式与另一个正则表达式不匹配时才替换它（Python）

> ID：889045
> 
> 赞同：5
> 
> 时间：2009-05-20T16:45:00.133
> 
> 标签：python, regex

长话短说，我有两个正则表达式模式。一种模式匹配我想要替换的东西，另一种模式匹配那些不应该被替换的模式的特殊情况。举个简单的例子，假设第一个是“\{.*\}”，第二个是“\{\{.*\}\}”。那么“{this}”应该被替换，但“{{this}}”不应该。有没有一种简单的方法来获取一个字符串并说“只要它不匹配第二个字符串，就用“hello”替换第一个字符串的所有实例”？

换句话说，有没有办法在不修改第一个字符串的情况下轻松制作“匹配第一个字符串但不匹配第二个字符串”的正则表达式？我知道我可以手动修改我的第一个正则表达式以永远不匹配第二个的实例，但是随着第一个正则表达式变得更加复杂，这变得非常困难。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-20T23:34:57.247

使用否定的前瞻/后置断言

```
pattern = re.compile( "(?<!\{)\{(?!\{).*?(?<!\})\}(?!\})" )
pattern.sub( "hello", input_string ) 
```

否定的前瞻/后置断言允许您与更多的字符串进行比较，但不被视为使用了字符串的一部分进行匹配。还有一个正常的向前/向后断言，这将导致字符串仅在字符串被给定模式跟随/之前时才匹配。

看起来有点混乱，这里是碎片：

```
"(?<!\{)"  #Not preceded by a {
"\{"       #A {
"(?!\{)"   #Not followed by a {
".*?"      #Any character(s) (non-greedy)
"(?<!\})"  #Not preceded by a } (in reference to the next character)
"\}"       #A }
"(?!\})"   #Not followed by a } 
```

因此，我们正在寻找一个 { 周围没有任何其他 { ，然后是一些字符，然后是一个没有任何其他 } 的 } 。

通过使用否定的前瞻/后置断言，我们将其压缩为单个正则表达式，该正则表达式将成功匹配字符串中任何位置的单个 {}。

另外，请注意 * 是一个贪心运算符。它会尽可能匹配。如果您使用`"\{.*\}"`并且文本中有多个 {} 块，则将使用它之间的所有内容。

> “这是一些示例文本 {block1} 更多文本，看着我消失 {block2} 更多文本”

变成

> “这是一些示例文本你好甚至更多文本”

代替

> “这是一些示例文本你好更多文本，看我消失你好更多文本”

为了获得正确的输出，我们需要通过附加一个 ? 使其不贪婪。

python 文档很好地展示了 re 库，但真正学习的唯一方法是进行实验。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-20T17:00:49.570

你可以给替换一个函数（[参考](http://docs.python.org/howto/regex.html#search-and-replace)）

但请确保第一个正则表达式包含第二个。这只是一个例子：

```
regex1 = re.compile('\{.*\}')
regex2 = re.compile('\{\{.*\}\}')

def replace(match):
    match = match.group(0)
    if regex2.match(match):
        return match
    return 'replacement'

regex1.sub(replace, data) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-20T16:54:52.000

您可以将所有 {} 实例替换为您的替换字符串（其中将包括 {{}} 实例），然后将 {{}} 实例替换为对其自身的反向引用（用原始数据覆盖第一个替换） -- 那么只有 {} 实例会发生变化。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-20T17:29:03.710

当您正在寻找的实际上是一种模式时，匹配两个不同的正则表达式让我觉得不是最佳选择。为了显示：

```
import re
foo = "{{this}}"
bar = "{that}"
re.match("\{[^\{].*[^\}]\}", foo)  # gives you nothing
re.match("\{[^\{].*[^\}]\}", bar)  # gives you a match object 
```

所以这真的是你的正则表达式，它可能更精确一些。

# c# - 使用 C# 中的 char* 参数调用 DLL 函数？

> ID：889054
> 
> 赞同：4
> 
> 时间：2009-05-20T16:48:04.963
> 
> 标签：c#

我有一个需要从 C# 调用的 C++ dll。dll 中的一个函数需要 char* 作为输入参数，而另一个函数使用 char* 作为输出参数。

从 C# 调用这些的正确方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-20T16:50:26.190

如果参数是只读的，字符串应该可以工作，如果方法修改了字符串，您应该使用 StringBuilder 代替。

来自以下参考的示例：

```
 [DllImport ("libc.so")]
 private static extern void strncpy (StringBuilder dest, 
      string src, uint n);

 private static void UseStrncpy ()
 {
    StringBuilder sb = new StringBuilder (256);
    strncpy (sb, "this is the source string", sb.Capacity);
    Console.WriteLine (sb.ToString());
 } 
```

如果您不知道 p/invoke 编组如何工作，您可以阅读[http://www.mono-project.com/Interop_with_Native_Libraries](http://www.mono-project.com/Interop_with_Native_Libraries)

如果您只关注字符串，请阅读以下部分：[http ://www.mono-project.com/Interop_with_Native_Libraries#Strings](http://www.mono-project.com/Interop_with_Native_Libraries#Strings)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-20T17:10:38.850

尽管您可以使用 MarshalAs 属性控制有关字符串的详细信息，但仅对输入参数使用字符串即可。例如

```
[DllImport("somedll.dll", CharSet = CharSet.Unicode)]
static extern void Func([MarshalAs(UnmanagedType.LPWStr)] string wideString); 
```

至于返回 char* 参数，由于涉及对象所有权，所以稍微复杂一些。如果您可以更改 C++ DLL，您可以使用 CoTaskMemAllocate，例如：

```
void OutputString(char*& output)
{
    char* toCopy = "hello...";
    size_t bufferSize = strlen(toCopy);
    LPVOID mem = CoTaskMemAlloc(bufferSize);
    memcpy(mem, toCopy, bufferSize);
    output = static_cast<char*>(mem);
} 
```

然后，C# 端只使用一个“输出字符串”参数，垃圾收集器可以获取该字符串的所有权。

另一种方法是使用 StringBuilder，但是在实际调用函数之前，您需要知道字符串的大小。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-20T16:50:59.077

不确定这是否有效，但您是否尝试过

```
StringObject.ToCharArray(); 
```

不确定从 char * 初始化字符串。Mybe 只是分配给一个字符串对象，值得一试。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-20T16:51:37.750

你试过 StringBuilder 吗？我在谷歌搜索中找到了这个：

```
[DllImport("advapi32.dll")]
public static extern bool GetUserName(StringBuilder lpBuffer, ref int nSize); 
```

如果您发布您正在拨打的电话，我们可以帮助您组装它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-11-28T11:12:28.017

如果 DLL 函数期望分配的缓冲区`char*`（不是宽/多字节缓冲区），则以下内容将起作用：

```
[DllImport("somedll.dll", CharSet = CharSet.Ansi)]
static extern void TheFunc(byte[] someBuffer, int someSize); 
```

此处将在 c# 中分配的缓冲区传递给`TheFunc`该缓冲区，该缓冲区用字符串（char 类型）填充它。C# 不会“解释”字节，它们被视为 8 位整数，因此非常适合保存 8 位字符。

因此，截断的示例代码将是：

```
byte[] mybuffer;
int bufSize;

bufSize = 2048;
mybuffer = new byte[bufSize];

TheFunc(mybuffer, bufSize);

string value;
for(value = "", int ix  = 0; (mybuffer[ix] != 0) && (ix < bufSize); ix++)
  value += (char) mybuffer[ix];

DoSomethingWithTheReturnedString(value); 
```

# nhibernate - 我可以将两个表“加入”一个类，同时使用 NHibernate 创建多对一关系吗？

> ID：889063
> 
> 赞同：1
> 
> 时间：2009-05-20T16:49:56.363
> 
> 标签：nhibernate

我们有一个遗留数据库架构，我尝试（不成功）将其与 NHibernate 进行映射。举一个简单的例子，假设我想要一个 Person 类，其名字来自“Person”表，但他们的姓氏来自“Person2”表。“Person”表也有这个人的汽车的 ID，我希望我的 Person 类有一个 Car 属性。我可以使用以下方法映射所有内容；

```
<hibernate-mapping default-cascade="save-update" xmlns="urn:nhibernate-mapping-2.2" auto-import="true">
  <class name="NHibernateMappingTest.Person, NHibernateMappingTest" lazy="false">
    <id name="Id" >
      <generator class="native" />
    </id>
    <property name="FirstName" />
    <many-to-one name="Car" access="property" class="NHibernateMappingTest.Car, NHibernateMappingTest" column="CarId"  cascade="save-update"/>
    <join table="Person2">
      <key column="PersonId" />
      <property name="LastName" />
    </join>
  </class>
</hibernate-mapping> 
```

让我结合 Person 和 Person2 表，让我找到他们的 Car - 一切正常。

但是......如果 Person2 表恰好有这个人的 HouseId，我希望能够在我的映射中添加第二个元素......

```
<many-to-one name="House" access="property" class="NHibernateMappingTest.House, NHibernateMappingTest" column="HouseId" cascade="save-update"/> 
```

...这样我的 Person 类就可以拥有 House 属性。

然而，这就是一切都出错的地方，因为 NHibernate 生成的 SQL 假定 HouseId 列在 Person 表中（但它不是，它在 Person2 中），所以我收到以下错误；

MySql.Data.MySqlClient.MySqlException: #42S22Unknown column 'HouseId' in 'field list'

NHibernate 是否能够做我正在尝试的事情，是否有不同的方法来实现这一点（不更改数据库架构），或者我只是在我的地图文件中犯了初学者的错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-22T13:44:27.423

文森特 - 感谢您的回复。不，我没有将标签元素嵌套在元素内。但是按照你的建议，我试过了，效果很好！非常感谢您的回复。

```
<hibernate-mapping default-cascade="save-update" xmlns="urn:nhibernate-mapping-2.2" auto-import="true">
      <class name="NHibernateMappingTest.Person, NHibernateMappingTest" lazy="false">
        <id name="Id" >
          <generator class="native" />
        </id>
        <property name="FirstName" />
        <many-to-one name="Car" access="property" class="NHibernateMappingTest.Car, NHibernateMappingTest" column="CarId"  cascade="save-update"/>
        <join table="Person2">
          <key column="PersonId" />
          <property name="LastName" />
          <many-to-one name="House" access="property" class="NHibernateMappingTest.House, NHibernateMappingTest" column="HouseId" cascade="save-update"/>
        </join>
      </class>
    </hibernate-mapping> 
```

# javascript - Javascript 正则表达式 - 执行无限循环

> ID：889067
> 
> 赞同：8
> 
> 时间：2009-05-20T16:51:37.593
> 
> 标签：javascript, regex

我正在尝试使用正则表达式获取链接文本。可能有几个链接可能与该模式匹配，我想得到最远的一个，直到第 4 个。这是我的 JS 代码：

```
var level=1;
while ( _match = /<a href="http:\/\/www.mysite.com\/x\/(?:.*)>(.*)<\/a>/img.exec(_html)){
    if (level < 5)  (_anchor_text=_match[1]);
    level ++;
} 
```

问题是这段代码在 IE 上进入无限循环（在 FF 上运行良好），尽管模式存在。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-05-20T17:07:48.700

**`RegExp.exec`**，我相信，利用该[**`lastIndex`**](https://developer.mozilla.org/En/Core_JavaScript_1.5_Reference/Global_Objects/RegExp/LastIndex)属性并不断对其进行修改以使“全局组捕获”之类的事情成为可能；要让它工作，你需要有一个正则表达式。目前，您正在每次迭代中创建一个新的，所以它不会工作......

试试这个：

```
var level = 1;
var pattern = /<a href="http:\/\/www.mysite.com\/x\/(?:.*)>(.*)<\/a>/img;
var _match;
while ( _match = pattern.exec(_html)){
     if (level < 5)  (_anchor_text=_match[1]);
     level ++;
} 
```

# .net - .NET 中的“受保护”和“受保护的内部”修饰符有什么区别？

> ID：889076
> 
> 赞同：4
> 
> 时间：2009-05-20T16:53:55.887
> 
> 标签：.net, access-modifiers

.NET 中的“受保护”和“受保护的内部”修饰符有什么区别？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-05-20T17:14:08.687

**私人的**

> 仅允许从特定类型内访问

**受保护**

> 私有访问被扩展为包括继承类型

**内部的**

> 私有访问被扩展为在同一程序集中包含其他类型

所以它遵循：

**受保护的内部**

> 私有访问被扩展为允许访问继承自此类型或与此类型位于同一程序集中的类型，或两者兼而有之*。*

基本上，首先将所有内容视为`private`第一，然后将其他任何您视为扩展的内容都考虑在内。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-05-20T16:55:35.213

**`protected`**

> 成员仅对继承类型可见。

**`protected internal`**

> 成员仅对继承类型可见，也对与声明类型相同的程序集中包含的所有类型可见。

这是一个 C# 示例：

```
class Program
{
    static void Main()
    {
        Foo foo = new Foo();

        // Notice I can call this method here because
        // the Foo type is within the same assembly
        // and the method is marked as "protected internal".
        foo.ProtectedInternalMethod();

        // The line below does not compile because
        // I cannot access a "protected" method.
        foo.ProtectedMethod();
    }
}

class Foo
{
    // This method is only visible to any type 
    // that inherits from "Foo"
    protected void ProtectedMethod() { }

    // This method is visible to any type that inherits
    // from "Foo" as well as all other types compiled in
    // this assembly (notably "Program" above).
    protected internal void ProtectedInternalMethod() { }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-20T20:32:52.030

像往常一样，来自[Fabulous Eric Lippert 的一篇博](http://blogs.msdn.com/ericlippert/archive/2008/04/24/why-can-t-i-access-a-protected-member-from-a-derived-class-part-three.aspx)文：

> 许多人认为 [ `protected internal`] 表示*“此程序集中的所有派生类都可以访问 M”。*它不是。**它实际上意味着*“所有派生类和此程序集中的所有类都可以访问 M”*。** 也就是说，它是*限制较少*的组合，而不是*限制较多*的组合。
> 
> 这对很多人来说是违反直觉的。我一直试图找出原因，我想我明白了。我认为人们将`internal`,`protected`和`private`视为 . 的“自然”状态的限制`public`。使用该模型，`protected internal`意味着“同时应用受保护的限制和内部限制”。
> 
> 这是错误的思考方式。相反，`internal`和`protected`是`public`的“自然”状态的弱化`private`。`private`是 C# 中的默认值；如果你想让某些东西具有更广泛的可访问性，你必须这么说。使用该模型，很明显它`protected internal`的限制比单独的任何一个都弱。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2010-11-04T16:23:36.037

**`protected`**对于和lemme之间的区别，请**`protected internal`**举一个简短的例子，我将匹配这个例子......

`Country A`: 一个组件

`Country B`: 另一个不同的程序集

`X``Y`（基类）是A 国（继承类）的父亲

`Z`(Inherited Class of ) 是B 国`X`的另一个儿子。`X`

`X`有财产。

1.  如果`X`提到财产，`protected`然后 `X`说：我所有的儿子`Y`和`Z`，只有你们俩可以在任何地方访问我的财产……上帝保佑你。除了你，没有人可以访问我的财产。

2.  如果`X`提到财产，`protected internal`那么 说：包括我儿子在内`X`的我国家的所有人，都可以访问我的财产。亲爱的儿子，你仍然可以访问我的财产。`A``Y``Z``Country B`

希望大家明白...

谢谢你。

# installation - 如何让用户决定他是否想要 NSIS（Nullsoft Scriptable Install System）桌面上的快捷方式？

> ID：889082
> 
> 赞同：0
> 
> 时间：2009-05-20T16:54:40.193
> 
> 标签：installation, nsis

在问题中，我想让用户决定他/她是否想要我的应用程序的桌面快捷方式或不使用 NSIS。我试图使用自定义页面来做到这一点，但没有运气。

也许有人以前做过并且愿意分享脚本？

提前致谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-20T18:13:37.880

简单的方法是只使用一个部分，组件页面会处理它

如果您选择自定义页面选项（恕我直言过度杀伤），您可以将结果存储在全局变量中，或者直接使用 section.nsh 中的帮助宏切换（隐藏）部分

注意：我很确定 MS 指南告诉您不要创建桌面快捷方式

# python - 函数装饰器

> ID：889088
> 
> 赞同：6
> 
> 时间：2009-05-20T16:57:13.463
> 
> 标签：python, decorator, argument-passing

我喜欢能够测量我编写的 python 函数的性能，所以我经常做类似的事情......

```
import time

def some_function(arg1, arg2, ..., argN, verbose = True) :
    t = time.clock() # works best in Windows
    # t = time.time() # apparently works better in Linux

    # Function code goes here

    t = time.clock() - t
    if verbose :
        print "some_function executed in",t,"sec."

    return return_val 
```

是的，我知道您应该使用 timeit 来衡量性能，但这对我的需求来说很好，并且允许我打开和关闭这些信息以便非常顺利地进行调试。

这段代码当然是在我了解函数装饰器之前......我现在对它们了解不多，但我认为我可以使用 **kwds 字典编写一个执行以下操作的装饰器：

```
some_function(arg1, arg2, ..., argN) # Does not time function
some_function(arg1, arg2, ..., argN, verbose = True) # Times function 
```

尽管如此，我还是想复制我之前的函数工作，以便工作更像：

```
some_function(arg1, arg2, ..., argN) # Does not time function
some_function(arg1, arg2, ..., argN, False) # Does not time function
some_function(arg1, arg2, ..., argN, True) # Times function 
```

我想这将需要装饰器计算参数的数量，知道原始函数将占用多少，去掉多余的，将正确的数量传递给函数......我不确定如何告诉 python要做到这一点...有可能吗？有没有更好的方法来实现同样的目标？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-05-20T17:12:34.057

尽管[检查](http://docs.python.org/3.0/library/inspect.html)可能会让您有所了解，但您想要的通常是*不可能*的：

```
def f(*args):
    pass 
```

现在需要多少参数`f`？由于`*args`并`**kwargs`允许任意数量的参数，因此无法确定函数所需的参数数量。事实上，在某些情况下，函数真正处理的数量与抛出的数量一样多！

* * *

**编辑：**如果你愿意忍受`verbose`一个特殊的关键字参数，你可以这样做：

```
import time

def timed(f):
    def dec(*args, **kwargs):
        verbose = kwargs.pop('verbose', False)
        t = time.clock()

        ret = f(*args, **kwargs)

        if verbose:
            print("%s executed in %ds" % (f.__name__, time.clock() - t))

        return ret

    return dec

@timed
def add(a, b):
    return a + b

print(add(2, 2, verbose=True)) 
```

（感谢[Alex Martelli](https://stackoverflow.com/questions/889088/function-decorators/889235#889235)的`kwargs.pop`提示！）

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2009-05-20T17:34:31.093

但是，对 Stephan202 的答案 +1（将其放在单独的答案中，因为注释不能很好地格式化代码！），该答案中的以下代码：

```
verbose = False
if 'verbose' in kwargs:
     verbose = True
     del kwargs['verbose'] 
```

可以更清晰简洁地表达为：

```
verbose = kwargs.pop('verbose', False) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-20T17:34:34.933

这可能很困难，但你可以在这些线上做点什么。下面的代码尝试删除任何额外的参数并将它们打印出来。

```
def mydeco(func):
    def wrap(*args, **kwargs):
        """
        we want to eat any extra argument, so just count args and kwargs
        and if more(>func.func_code.co_argcount) first take it out from kwargs 
        based on func.func_code.co_varnames, else last one from args
        """
        extraArgs = []

        newKwargs = {}
        for name, value in kwargs.iteritems():
            if name in func.func_code.co_varnames:
                newKwargs[name] = value
            else:
                extraArgs.append(kwargs[name])

        diff = len(args) + len(newKwargs) - func.func_code.co_argcount
        if diff:
            extraArgs.extend(args[-diff:])
            args = args[:-diff]

        func(*args, **newKwargs)
        print "%s has extra args=%s"%(func.func_name, extraArgs)

    return wrap

@mydeco
def func1(a, b, c=3):
    pass

func1(1,b=2,c=3, d="x")
func1(1,2,3,"y") 
```

输出是

```
func1 has extra args=['x']
func1 has extra args=['y'] 
```

# shoes - 鞋子 Debian 包

> ID：889092
> 
> 赞同：0
> 
> 时间：2009-05-20T16:57:50.437
> 
> 标签：shoes

有人知道 Debian 鞋包吗？

我正在制作一张现场 CD，并希望在其中包含鞋子，但我似乎找不到。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-20T17:00:56.637

> [http://packages.debian.org/testing/interpreters/shoes](http://packages.debian.org/testing/interpreters/shoes)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-20T17:28:42.103

[packages.debian.org/search?keywords=shoes](http://packages.debian.org/search?keywords=shoes)

帕吉特鞋

*   [lenny (stable)](http://packages.debian.org/lenny/shoes) (interpreters): tiny graphics and windowing toolkit using Ruby 0.r396-5: alpha amd64 arm armel hppa i386 ia64 mips mipsel powerpc s390 sparc

*   [挤压（测试）](http://packages.debian.org/squeeze/shoes)（解释器）：使用 Ruby 0.r396-5 的微型图形和窗口工具包：alpha amd64 armel hppa i386 ia64 mips mipsel powerpc s390 sparc

*   [sid (unstable)](http://packages.debian.org/sid/shoes) (interpreters): tiny graphics and windowing toolkit using Ruby 0.r396-5: alpha amd64 armel hppa hurd-i386 i386 ia64 m68k mips mipsel powerpc s390 sparc

# c# - 使用 Java+Swing 优于 C#+WinForms/WPF 有什么优势？

> ID：889097
> 
> 赞同：1
> 
> 时间：2009-05-20T16:59:07.063
> 
> 标签：c#, java, wpf, swing

这里有一个小组使用 Java，服务器端和客户端，客户端 UI 使用 Swing。我计划建议他们将前端更改为 C# 和 WinForms 或 WPF，但我想准备好：

1.  从 Swing 迁移到 Winforms / WPF 的好处列表。
2.  使用 WinForms / WPF 可能会被我抛回的 Swing 好处列表（我能想到的唯一一个是能够在服务器和客户端之间共享更多代码，因为它们是相同的语言 - 给定服务器端将保持 Java 的事实）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2010-09-03T16:46:28.397

我会先说我是 .net 开发人员，所以以下内容可能是异端。

听起来您的公司已经在 java 方面进行了大量投资。人员、软件许可证和代码库。

如果我的公司（或团队）主要是 java 并且我们成功地满足了业务需求，那么坦率地说，我 **不会切换。**

我考虑切换技术堆栈的唯一方法是，如果我们所在的堆栈真的死了。这意味着很难找到程序员，它不再满足业务需求，我们有大量失败的项目，和/或语言本身不再发展。

仅仅因为某人更喜欢一种语言而不是另一种语言而切换是行不通的，最终不会有任何商业意义。像这样的改变行为将意味着公司将失去那些仍然致力于旧堆栈的人。仅就丢失的知识而言，更换人员的成本非常高。

另一件事，如果您还不知道切换平台的硬性原因是什么，那么您甚至不应该尝试鼓励它。以会计师的角度来看，这真的会提供什么？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-20T17:06:52.163

1.  性能和启动时间。在性能/启动时间方面，您无法将 Swing 与 Winforms/WPF 进行比较。

2.  真的不知道...如果您有一个不了解 .Net API 的高素质 Java 团队，请坚持使用 Swing，否则，不要三思而后行...使用 Winforms。关于“由于使用相同的语言而能够在服务器和客户端之间共享更多代码的能力”，请不要打扰......有无数种方法可以使两个不同的应用程序相互使用不同的语言。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-20T17:07:34.160

1）秋千臭。（几乎只是在开玩笑，但在我看来，这真的很糟糕。）即使您打算使用 Java 进行开发，也请使用 SWT 或其他一些看起来/行为不错的工具包。迁移到 Windows 窗体或 WPF 将（可能）在 Windows 上为您提供更强大的用户界面选项，但仅限于 Windows。

2) 你把自己绑在 Windows 上，失去了 Java+Swing 的跨平台特性。您可能会失去一些共享代码的能力。您必须在非 Java 中重新开发，这可能意味着您团队中的其他开发人员缺乏经验/培训/知识。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-20T17:39:25.157

与在 Windows 上运行的 Swing 应用程序相比，.NET winform 应用程序的 GUI 性能应该更快。不过，对于大多数应用程序来说，目前这并没有太大的区别，如今的计算机可以非常快地运行 Java。

无论哪种方式，您仍然会与 Java 后端代码交谈。根据他们所做的，您最好还是坚持使用 Swing 前端。

如果这是一个选项，您应该考虑使用 Web 前端。如果它可以用 XHTML/Javascript/CSS 制作，您将保留 Java GUI 为您提供的跨平台优势。

但实际上，您需要考虑为什么要更改为 Winforms 而不是 Java。现有的 Java 应用程序是否有一些你不喜欢的东西会更好，并且值得用另一种语言重新开发？它是否可以在不完全重写的情况下修复？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-20T19:20:54.920

您是否有任何自定义组件从 Swing 迁移到 .net 会很痛苦？您是否有专门开发自定义 Swing 组件（Java2D 专业知识、熟悉 Swings 输入子系统等）但对 WinForm 自定义开发知之甚少的员工？

如果这些问题的答案是肯定的，那么您可能应该坚持使用 Swing。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-21T13:48:49.157

1) 让 Winforms 应用程序感觉像 Windows 应用程序更容易。如果您不小心，Java 应用程序通常会觉得“有趣”。

2）你正在编程的一切都在使用Java。拥有一个不是 Java 的组件意味着该项目更难使用。整体维护也会更烦人。目前，您项目团队中的每个人都只需要了解 Java 才能与项目团队中的其他人一起工作。从招聘和可维护性的角度来看，这很方便。就个人而言，我反对切换 GUI，除非您从中获得其他好处。

你没有提供任何你计划提出建议的理由。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2010-09-03T16:37:34.690

如果使用 windows .net 是更好的选择，因为您有： 1\. Visual Studio 中的优秀设计师，良好的文档和示例 2\. 运行时更好的启动、CPU 和内存使用：请参阅[http://www.codeproject.com/KB/ dotnet/RuntimePerformance.aspx](http://www.codeproject.com/KB/dotnet/RuntimePerformance.aspx)

如果使用 Linux，您可以使用 Mono 与 Java，但由于发行版数量众多，因此在那里进行比较更加复杂。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-01-18T22:24:32.020

最大的优势是您可以在 java 中使用的免费库。大多数 nosql 系统都是用 java 编写的，是 Neo4j 中最好的（只有 java 可以让您能够运行这些嵌入式产品）。这是 dot net 做不到的，这些会给你的应用程序提供没有 winforms 的能力，wpf 可以有。

# git - 使用 git 组织多个项目的最佳方式是什么

> ID：889100
> 
> 赞同：21
> 
> 时间：2009-05-20T17:00:21.507
> 
> 标签：git, version-control, repository

我有 5-10 个独立项目，我希望使用 Git 将它们置于版本控制之下。组织项目/存储库的最佳方式是什么：

*   每个项目使用一个存储库
*   为我的所有工作使用一个存储库，并为每个项目使用子目录
*   或者完全不同的东西

什么对你最有效，为什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-05-20T17:10:36.790

我肯定会说每个项目使用一个存储库。否则，您将在项目之间进行各种串扰，更不用说如果您使用命令行 git 指定长路径是一件痛苦的事。Git 适用于每个项目模型的一个存储库，我真的看不出有任何理由使用其他任何东西；我认为我从来没有真正理解为什么 SVN 提倡以这种方式工作。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-05-20T17:23:02.227

为了完成[Marc 的回答](https://stackoverflow.com/questions/889100/what-is-the-best-way-to-organize-multiple-projects-when-using-git/889136#889136)，使用一个中央存储库（其中包含所有项目）不会阻止多个存储库，每个存储库都有自己的项目。

让我们听听[Linus 本人](http://www.gelato.unsw.edu.au/archives/git/0611/31075.html)的说法：

> 无论哪种方式都没有真正的问题，也许更重要的是，这甚至不是您必须在第一天就决定的事情。
> 
> 您可以轻松地以一种或另一种方式做到这一点，或者
> 
> *   根据需要切换
> *   甚至在有意义的地方*混合使用这两种方法。*
> 
> 例如，让公共“分发点”使用单个共享存储库可能是完全明智的，该共享存储库包含所有模块作为同一存储库中的单独分支。
> 
> 但是，即使这样一个中央分发点存储库是这样设置的，个别开发人员可能会认为他们更乐意为不同的模块拥有单独的存储库。这两种方法并非互不兼容，您可以在两种不同类型的存储库之间获取数据并将其推回。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-06-19T19:09:09.773

如果存储库已损坏。它会影响所有项目团队。所以每个项目的 repo 是个好主意。

# .net - 如何取消长时间运行的数据库操作？

> ID：889102
> 
> 赞同：28
> 
> 时间：2009-05-20T17:00:35.907
> 
> 标签：.net, database, oracle, asynchronous, backgroundworker

目前正在与 Oracle 合作，但也需要 MS SQL 的解决方案。

我有一个 GUI，允许用户生成将在数据库上执行的 SQL。这可能需要很长时间，具体取决于它们生成的搜索。我希望 GUI/App 在此搜索期间做出响应，并且我希望用户能够取消搜索。

我正在使用后台工作线程。

我的问题是，当用户取消搜索时，我无法中断对数据库的调用。它一直等到完成，然后它可以轮询“CancelationPending”属性。这不仅会浪费数据库上的资源，还会给我的代码带来问题。

如果用户在很长的查询上点击“搜索”，然后点击“取消”，然后再次点击“搜索”——第一次搜索仍在数据库中进行。当他们再次点击搜索时，后台工作人员仍然很忙。我对这个问题的唯一解决方案是创建一个新的后台工作人员。

这似乎是一种非常丑陋的做事方式。数据库继续工作我正在创建后台工作人员的新实例....当我真的想停止数据库调用并重新使用同一个工作人员时。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-05-20T17:36:18.190

如果您使用 ADO.NET 和 SQL 数据提供程序，请查看 SqlCommand.Cancel 方法。这就是你要找的。但是，它会尝试取消并且取消可能需要一些时间。基本上，由 SQL Server 决定何时批准您的取消请求。当查询被取消时，你应该得到一个 SqlException 指示操作被用户取消。显然，您不想将此异常视为异常并对其进行特殊处理，例如如果 SqlException 是由于用户取消操作而导致的，则将其吞下。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2010-09-13T10:02:34.883

我还注意到 command.Cancel() 并没有真正中止命令。对我有用的是在用户中止时关闭连接（如果你使用一个回滚事务）。这将在命令执行时在后台线程中引发异常，因此您必须捕获它并检查那里的 CancellationPending 属性，并且在这种情况下不要重新引发异常......

```
// When aborting
worker.CancelAsync();
command.Connection.Close();

// In your DoWork event handler
...
catch (Exception)
{
    if (worker.CancellationPending)
    {
        e.Cancel = true;
        return;
    }
    else
    {
        throw;
    }
}

// And in your RunWorkerCompleted event handler
if (e.Error == null && !e.Cancelled)
{
    ...
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-05-21T17:02:53.820

我很确定这是**可能的**——我们使用 TOAD for Oracle，它可以让您取消长时间运行的查询，[如此处所述](http://asktoad.com/DWiki/doku.php/faq/answers/queries)。我不确定他们是怎么做到的。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-05-20T17:09:01.770

您可以让后台工作人员在不同的线程上触发实际的数据库调用，然后定期检查数据库调用是否已完成或是否已按下取消，此时您可以终止数据库线程。这实际上不会帮助数据库加载任何内容（因为您的查询已经发送并且仍在处理中），但它确实释放了与之相关的本地资源。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-05-20T19:45:04.077

我认为最好的解决方案似乎是通过监控表终止会话。

使用 Oracle，您可以像 Burnsys 所说的那样做到这一点

在 Firebird 2.5 中它看起来是[一样的](http://www.firebirdsql.org/rlsnotesh/rlsnotes25.html#rnfb25-mon-usg)

我希望 SQL 女士中存在类似的东西

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-05-20T17:17:47.790

如果您使用的是 SQLCommand，您可以尝试调用它的[Cancel](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.cancel.aspx)方法。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2009-05-20T17:19:07.350

打开与数据库的新连接，以 sysdba 身份登录并发送“ALTER SYSTEM KILL SESSION 'sid,serial#' IMMEDIATE”命令，指定要终止的进程的 SID。

获取 sessionID：从 v$mystat 中选择 sid，其中 rownum = 1

要获取序列号：从 v$session 中选择 sid、序列号，其中 sid = :SID

[http://www.oracle-base.com/articles/misc/KillingOracleSessions.php](http://www.oracle-base.com/articles/misc/KillingOracleSessions.php)

编辑：这里不以 sysdba 身份登录的 WW 想法：http: [//forums.oracle.com/forums/thread.jspa? threadID=620578](http://forums.oracle.com/forums/thread.jspa?threadID=620578)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-05-23T09:16:03.473

我已经尝试使用 ADO 2.8 和 SQLOLEDB 或 SQL Server 本机客户端取消和关闭。使用取消，记录集停止获取数据，但在后台继续从服务器读取并消耗应用程序的内存。在 32 位应用程序中，您可能会在几分钟后收到“内存不足”消息。当我关闭记录集（或连接，之前有或没有取消）时，ADO 2.8 会等待，直到所有记录都被提取。

我不知道 ADO.NET 是否做得更好，但我认为在 Cancel/Close 之后监视内存和网络访问以确保 ADO 真的停止读取数据是个好主意。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2018-09-11T16:06:42.390

KILL SESSION 是我取消长时间运行的查询的唯一工作方式。我正在使用提供的托管 oracle，并且 OracleCommand.Cancel() 有时可以工作，但通常无法正常工作。根据我的测试，OracleCommand.CommandTimeout 也不受尊重。前段时间，当我使用非托管 oracle 时，我设法取消了命令，但不再使用托管的。以任何方式终止会话是唯一的选择。查询不在 UI 线程上运行，而是在单独的线程上运行。取消命令是从 UI 线程发送的。它有点复杂，因为应用程序使用了一个使用 WCF 的中间层，但最终我要终止会话。当然，在运行查询时，我必须找到并保存会话，以便在必要时将其终止。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2019-07-27T06:42:00.253

Oracle`ALTER SYSTEM CANCEL SQL`在 18c 中引入。您需要在 SQL 中添加某种带有 UID 的注释，然后查找类似这样的内容

```
SELECT S.SID||','||S.SERIAL#
                    FROM GV$SESSION S, V$SQL Q
                    WHERE S.USERNAME IS NOT NULL
                    AND S.STATUS = 'ACTIVE'
                    AND S.SQL_ID IS NOT NULL
                    AND Q.SQL_ID = S.SQL_ID
                    and sql_text like '%{queryId}%' 
```

然后从 .NET 运行另一个操作`ALTER SYSTEM CANCEL SQL 'SID, SERIAL'`

* * *

## 回答 #11

> 赞同：-2
> 
> 时间：2009-05-20T17:06:45.893

我不认为这是可能的。以下是 Oracle 网站上有关此主题的讨论链接： [http://forums.oracle.com/forums/thread.jspa?threadID=400492&start=15&tstart=0](http://forums.oracle.com/forums/thread.jspa?threadID=400492&start=15&tstart=0)

# c# - windows mobile 在应用程序关闭时释放资源（.net 3.5 cf）

> ID：889106
> 
> 赞同：1
> 
> 时间：2009-05-20T17:01:19.930
> 
> 标签：c#, .net, winforms, windows-mobile, comparison

我有一个基本的 .net 3.5 cf 应用程序，包含 4 个以上的表单。我正在使用我创建的窗口处理程序类，以确保某些表单一次只打开一个实例，而其他（例如产品详细信息）可以根据用户需要多次打开。我的问题在于，当用户关闭所有表单（通过单击表单上的“x”而不是菜单中的“退出”按钮）时，应用程序不会释放数据库连接。除此之外，如果用户关闭所有表单然后再次打开应用程序，则会显示他们以前的搜索结果而不是新表单。当用户关闭所有表单时，如何确保释放所有资源？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-20T17:30:41.540

(X) 按钮是最小化按钮，而不是关闭按钮。您需要将 Forms 上的 MinimizeButton 更改为 false - 这会将 (X) 更改为 (ok) - 或添加逻辑来处理所有 Forms 都被最小化的情况。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-20T17:31:33.237

请注意，在 Windows Mobile 上，单击“X”更像是最小化窗口而不是关闭它。它绝对不会退出应用程序，并且实际上可能会在表单上执行最小化而不是关闭（我不记得了）

因此，当他们“再次打开应用程序”时，很可能只是重新显示相同的表单。

# java - 在 .Net 应用程序中使用 Java/AXIS Web 服务的问题

> ID：889109
> 
> 赞同：4
> 
> 时间：2009-05-20T17:03:08.567
> 
> 标签：java, .net, web-services, interop, wsdl

我必须使用由第 3 方用 Java 编写的 Web 服务，我猜是用 Axis 生成的。

我正在使用 .Net Framework 3.5 SP1 和 VS 2008。

正如我们在 .net 2.0 中所做的那样，我制作了一个 Web 参考，并将其指向服务的[wsdl](https://servicoscomercialpta.bvfinanceira.com.br/gmp2/servicos?WSDL)。

它与服务的某些方法完美配合，但是当我尝试调用以 int 作为参数的方法时，会引发以下异常：

```
JAXRPCTIE01: caught exception while handling request:  
unexpected element type:  
expected={http://schemas.xmlsoap.org/soap/encoding/}int,
actual={http://www.w3.org/2001/XMLSchema}int 
```

我检查了 wsdl，它定义了五个不同的 Xml Schema 命名空间：

```
<definitions xmlns="http://schemas.xmlsoap.org/wsdl/"  
xmlns:tns="urn:servicos/wsdlservicosgmp2"  
xmlns:ns2="http://schemas.xmlsoap.org/soap/encoding/"  
xmlns:ns3="urn:servicos/typesservicosgmp2"  
xmlns:xsd="http://www.w3.org/2001/XMLSchema"
xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/"
name="servicosgmp2"  
targetNamespace="urn:servicos/wsdlservicosgmp2">

<schema xmlns="http://www.w3.org/2001/XMLSchema"  
xmlns:tns="urn:servicos/typesservicosgmp2"  
xmlns:soap11-enc="http://schemas.xmlsoap.org/soap/encoding/"  
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"  
xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/"  
targetNamespace="urn:servicos/typesservicosgmp2"> 
```

以及有问题的方法的定义：

```
<message name="IWsServicosGMP2_buscaConvenio">  
<part name="Integer_1" type="ns2:int" />  
<part name="Integer_2" type="ns2:int" />  
</message> 
```

任何人都知道我必须做些什么来解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-22T20:25:42.923

似乎 Java/AXIS Web 服务正在使用 SOAP（第 5 节）编码。这是一个倒退，这些天很奇怪。

你从哪里得到的网络服务？它运行了多长时间？你有能力改变它吗？轴或轴 2？什么版本？对于 AXIS1，从 AXIS v1.1 开始的任何东西都可以正常工作，但我建议更新到 v1.4。如果可能，请移至 AXIS2，并使用 v1.4。（令人困惑的是，AXIS 和 AXIS2 的版本号相同。）

Java端为什么要使用SOAP编码？Java 端是否采用了***WSDL 优先***方法，或者这是动态生成的 WSDL 方法之一？ [AXIS 和 .NET 可以很好地协同工作](http://www.google.com/search?hl=en&rls=com.microsoft%3A*&q=AXIS+.net+interop)，如果您首先从[WSDL+XSD 开始](http://www.mindreef.com/newsletter/newsletter-v6.html)，并将自己限制在 doc/lit webservices 并将您对 xmlschema 的使用限制在不那么奇特的部分：原语、结构和相同的数组。您可以嵌套到任何级别：包含数组的结构数组、包含结构数组的结构等。

**附录**：如果你从你的 Java 对象模型开始，并尝试从它动态生成一个有线接口（例如，WSDL），你往往会得到更糟糕的互操作，并且你倾向于考虑通过有线发送对象而不是的消息，这可能是有害的。

要避免的事情：列表、限制、替换组和其他古怪的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-20T17:16:59.570

您需要进入 .NET 生成的代理类，并手动将输入参数的名称空间更改为 Axis 代码正在使用的名称空间。希望这会奏效。

我一直在阅读，似乎 Axis 并不总是与 .NET 一起工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-20T17:49:59.520

我不确定这是否会有所帮助，但可能值得一试。您是否尝试过添加服务引用（svcutil.exe 包装器）而不是 Web 引用（wsdl.exe 包装器）？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2010-04-01T16:13:09.000

我也在处理 AXIS 问题并找到了一些解决方案。

我一直在使用使用 AXIS 1.3 的不受支持的 Web 服务与 ITIM 5.0 集成。我遇到的所有问题都在 1.4 中得到修复，并且看到产品已经超过 5 年，我不明白他们为什么选择坚持使用旧版本。除了已发表的关于 AXIS 如何通过指向集中式值存储来表示数组的问题之外，我还发现了几个问题。其中一个问题是命名空间。AXIS 倾向于生成带有命名空间的 WSDL，但返回值没有命名空间，.NET 只是在反序列化期间无法找到该值。我花了很长时间才找到原因，但我通过从代理代码中手动删除命名空间要求来解决它。我遇到的第二个问题是 WSDL 如何表示项的集合。该集合被命名为 SomeCollection，下面的项目被命名为 Item。当服务返回时，项目的名称与集合相同（SomeCollection 包含 SomeCollection(s)）。我必须手动将代理中的所有这些引用重命名为与集合相同。这些花费了我无数个小时。如果我找到了，我会把它们贴在这里。显然解决方案是升级到 1.4，但 IBM 不会支持，也不会交出源代码来做。

在我的博客中阅读更多内容。

[http://nbaked.wordpress.com/2010/04/01/issues-integrating-axis-web-services-with-net/](http://nbaked.wordpress.com/2010/04/01/issues-integrating-axis-web-services-with-net/)

# wpf - WPF 画布上的完美中心

> ID：889112
> 
> 赞同：3
> 
> 时间：2009-05-20T17:04:55.257
> 
> 标签：wpf, layout, canvas

由于画布需要 Top/Left 来放置，如果你想居中，在适当的 Canvas.Top 上添加一个网格，Horizo​​ntalAlignment="Center" 是最好的方法，还是有更好的方法？

这个片段是一个 150X300 的画布，一些内容以网格为中心....

```
<Canvas Width="150" Height="300">
    <Grid Canvas.Top="75" Width="106" HorizontalAlignment="Center">
        {whatever you want centered}
    </Grid>
</Canvas> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-20T21:04:41.577

Guy 的解决方案有效，但如果您同时进行命中测试，您可能需要调整 z 顺序和可见性。

另一种选择是在画布内设置网格（正如您在 XAML 中指定的那样），并将高度/宽度设置为（或绑定到）画布的高度/宽度。然后将 Horizo​​ntalAlignment/VerticalAlignment 设置为 Grid 内容的中心。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-20T18:22:49.373

我不确定这是否能满足您的确切要求，但是如果您将画布和内容作为对等点放在网格中，它将为您提供居中的结果：

```
<Grid>
    <Canvas Width="150" Height="300"/>
    <Button HorizontalAlignment="Center" VerticalAlignment="Center" Width="106" Content="Click"/>
</Grid> 
```

# javascript - iframe 再次加载失败

> ID：889114
> 
> 赞同：1
> 
> 时间：2009-05-20T17:05:34.507
> 
> 标签：javascript, iframe

我有一个类似于[Detect failure to load contents of an iframe](https://stackoverflow.com/q/375710/2065237)问题中提出的问题。我正在整理一个将 Google 日历加载为 iframe 的网页。我知道将使用我的网页的大量计算机将限制互联网访问，因此 Google 日历不会加载到 iframe 中。我想在我的页面中放置一个“计时器”，在经过一定时间或尝试后停止尝试加载 Google 日历，而是加载一个显示无法访问日历的本地页面。

我一直在尝试使用`checkForContents()`前面描述的功能，但现在我意识到我无法从 Google 站点获取任何对象属性。换句话说，`document.getElementById(iframe).contentWindow.document`什么都不返回（或者至少没有什么有用的）并且函数会默默地但完全失败。我可以改为使用`document.getElementById(iframe).contentWindow` 简单地返回“[object Window]”（而且我似乎不够聪明，无法用它做任何有用的事情）。

有什么想法吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-20T17:07:30.523

安全沙箱的原因，如果域不同，您将无法访问或修改任何内容

# jquery - 如何以编程方式设置 jQuery UI Slider 值并触发事件？

> ID：889116
> 
> 赞同：15
> 
> 时间：2009-05-20T17:06:11.573
> 
> 标签：jquery, jquery-ui

我有一个这样定义的滑块：

```
$("#slider").slider({
        orientation: "vertical",
        range: "min",
        min: 0,
        max: totalRows,
        value: totalRows,
        slide: function(e, ui) {
          scrollTheTable(ui.value, totalRows, visibleRows, $table);
        }
      }); 
```

使用滑块时，分配给幻灯片的功能被调用没有问题。我有一个表，它可能包含也可能不包含具有 SelectedItem 类的行。我正在研究一种方法，该方法基本上会在页面加载时将该行“滚动”到表格顶部。

该方法的内容如下所示：

```
$("#slider").slider('value', $rows.length - index); 
```

此属性设置滑块值并且滑块正确呈现，但我的幻灯片处理程序永远不会被调用来完成表格上的工作。

我在这里想念什么？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2009-05-20T17:22:34.457

看起来幻灯片参数仅对鼠标事件有效。以编程方式设置值时，会触发更改事件。因此，将我的设置更改为此得到了我想要的。

```
 $("#slider").slider({
        orientation: "vertical",
        range: "min",
        min: 0,
        max: totalRows,
        value: totalRows,
        slide: function(e, ui) {
          scrollTheTable(ui.value, totalRows, visibleRows, $table);
        },
        change: function(e, ui) {
          scrollTheTable(ui.value, totalRows, visibleRows, $table);
        }
      }); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-02T21:35:40.947

要初始化滑块，上面使用“slide：function（...”和“change：function（”的方法很完美。但是要从外部更改滑块，例如通过单击缩略图或任何其他带有“on-”的div点击事件”，您可以使用：

```
$("#slider").slider('value', newvalue); 
```

对我来说重要的提示是代码行稍微不正确（$rows ？，PHP？）：

```
$("#slider").slider('value', $rows.length - index); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-11-28T05:07:11.640

我正在使用一个有 2 个手柄的滑块。我能够使用以下代码以编程方式更新它：

```
$("#slider-range").slider('values',[57,180]).change(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-20T17:13:41.277

设置值后为什么不调用它？

```
scrollTheTable($rows.length - index, totalRows, visibleRows, $table); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-02-14T20:59:47.867

如 jquery 的 api 中所述：使用 slider('value', X) 将调用内置的更改函数。所以建议不要使用幻灯片回调。

# jquery - 将元数据解析器添加到表头

> ID：889117
> 
> 赞同：0
> 
> 时间：2009-05-20T17:06:25.503
> 
> 标签：jquery

这是一个正在进行的项目，我即将完成。我一直在开发一个基于 jQueryt 的 tablesorter 插件的自定义表格排序器。快完成了，谢天谢地。我的最后一个问题是这个，我有一个表头如下：

```
<th class="blue_bg"><a rel = "Header" href="#" title="Sort column in decending order" class="">Seats Available</a></th> 
```

我想添加内联元数据解析器以禁用对特定列的排序。我目前有一个遍历每个标题的函数，没有类，并添加解析器如下：

```
 //th without a class automatically get sorting disabled
    $("th[class='']").each(function(){
    $(this).addClass("{sorter: false}");
}); 
```

我也有一个通过并搜索一个特定的字符串，该字符串指示是否应禁止对列进行排序：

```
 //Add disabling parser to each header with a disable class
    $("th[class*='csuci.sortable.false']").each(function(){
    $(this).removeClass("csuci.sortable.false").addClass("{sorter: false}");
}); 
```

基本上，我希望它设置这样，除非用户另外指定，否则默认情况下或通过用户定义的字符串，列将禁用排序。回顾一下，我对根本没有类并且有一个指定禁用字符串的类的列禁用了排序。我还想要第三个条件，用户可以在标题中包含任何其他类，在此示例中，用户指定一个类以使列的背景变为蓝色。但是，我不确定将禁用解析器添加到此示例标头中需要什么语法。帮助表示赞赏，在此先感谢。

更新：这是我的完整函数，它根据 th 类属性中的内容或不在其中添加解析器：

```
$(function(){
    //Add disabling parser to each header with a disable class
    $("th[class*='csuci.sortable.false']").each(function(){
        $(this).removeClass("csuci.sortable.false").addClass("{sorter: false}");
    });

    //th without a class automatically get sorting disabled
    $("th[class='']").each(function(){
        $(this).addClass("{sorter: false}");
    });

    //Add parser to each table that has a class="csuci.sortable."
    $("th[class*='csuci.sortable.date']").each(function(){
        $(this).removeClass("csuci.sortable.date").addClass("{sorter: 'usLongDate'}");
    });

    $("th[class*='csuci.sortable.percent']").each(function(){
        $(this).removeClass("csuci.sortable.date").addClass("{sorter: 'percent'}");
    });

    $("th[class*='csuci.sortable.ip']").each(function(){
        $(this).removeClass("csuci.sortable.date").addClass("{sorter: 'ip-address'}");
    });

    $("th[class*='csuci.sortable.url']").each(function(){
        $(this).removeClass("csuci.sortable.date").addClass("{sorter: 'url'}");
    });

    $("th[class*='csuci.sortable.money']").each(function(){
        $(this).removeClass("csuci.sortable.date").addClass("{sorter: 'currency'}");
    });

    $("th[class*='csuci.sortable.time']").each(function(){
        $(this).removeClass("csuci.sortable.date").addClass("{sorter: 'time'}");
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-20T17:36:51.887

那么，您希望在哪些情况下启用分拣机？听起来分拣器启用的唯一情况是直接为真标志。您可能只需要使用[not](http://docs.jquery.com/Selectors/not#selector)。

```
$("th:not([class*='csuci.sortable.true'])").each(function(){
    $(this).addClass("{sorter: false}");
}); 
```

如果排序仅由 true 标志启用，并且您需要为所有元素设置排序器，那么您可以匹配所有列并使用条件来设置标志。

```
$("th").each(function(){
    var sortEnabled = $this.hasClass('csuci.sortable.true');
    $(this).addClass("{sorter: "+sortEnabled+"}");
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-20T20:53:37.307

我设法解决了这个问题，我只是在开头添加了一个遍历函数，将禁用解析器添加到每个表头，然后每次后续遍历删除禁用解析器，检查硬编码字符串并添加必要的解析器：

```
$(function(){

    //Add disable parser to all headers
    $("th").each(function(){
        $(this).addClass("{sorter: false}");
    });

    //Add disable parser to each header with a disable class
    $("th[class*='csuci.sortable.false']").each(function(){
        $(this).removeClass("csuci.sortable.false").addClass("{sorter: false}");
    });

    //th without a class automatically gets sorting disabled
    $("th[class='']").each(function(){
        $(this).addClass("{sorter: false}");
    });

    //Add parser to each table that has a class="csuci.sortable.date"
    $("th[class*='csuci.sortable.date']").each(function(){
        $(this).removeClass("{sorter: false}");
        $(this).removeClass("csuci.sortable.date").addClass("{sorter: 'usLongDate'}");
    });
    //Add parser to each table that has a class="csuci.sortable.percent"
    $("th[class*='csuci.sortable.percent']").each(function(){
        $(this).removeClass("{sorter: false}");
        $(this).removeClass("csuci.sortable.percent").addClass("{sorter: 'percent'}");
    });
    //Add parser to each table that has a class="csuci.sortable.ip"
    $("th[class*='csuci.sortable.ip']").each(function(){
        $(this).removeClass("{sorter: false}");
        $(this).removeClass("csuci.sortable.ip").addClass("{sorter: 'ip-address'}");
    });
    //Add parser to each table that has a class="csuci.sortable.url"
    $("th[class*='csuci.sortable.url']").each(function(){
        $(this).removeClass("{sorter: false}");
        $(this).removeClass("csuci.sortable.url").addClass("{sorter: 'url'}");
    });
    //Add parser to each table that has a class="csuci.sortable.money"
    $("th[class*='csuci.sortable.money']").each(function(){
        $(this).removeClass("{sorter: false}");
        $(this).removeClass("csuci.sortable.money").addClass("{sorter: 'currency'}");
    });
    //Add parser to each table that has a class="csuci.sortable.time"
    $("th[class*='csuci.sortable.time']").each(function(){
        $(this).removeClass("{sorter: false}");
        $(this).removeClass("csuci.sortable.time").addClass("{sorter: 'time'}");
    });
}); 
```

可能不是最干净的方法，但它确实有效。感谢 StackOverflow 的所有人，他们为我提供了对 jQuery 工作原理的宝贵见解，它确实是一个宏伟的库。

# django - 是否可以在 AppEngine 模板中对输出进行 html 编码？

> ID：889131
> 
> 赞同：0
> 
> 时间：2009-05-20T17:09:31.707
> 
> 标签：django, templates, django-templates, html-encode

所以，我传递了一个包含 html 的“内容”属性的对象。

```
<div>{{ myobject.content }}</div> 
```

我希望能够输出内容，以便将字符呈现为 html 字符。

“内容”的内容可能是：<p>Hello</p>

我希望将其发送到浏览器：<p>Hello</p>

有什么我可以在我的模板中自动执行此操作的吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-20T17:19:31.640

是的，`{{ myobject.content | escape }}`应该有帮助（假设您的意思是 Django 模板——没有特定的“App Engine”模板系统，GAE 应用程序经常使用 Django 模板系统）；如果您想要两个级别的转义，您可能需要重复该`| escape`部分（在您提供的某些但并非全部示例中似乎是这种情况）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-20T17:25:43.170

这是 Django 的 django.utils.html.escape 函数：

```
def escape(html):
    """Returns the given HTML with ampersands, quotes and carets encoded."""
    return mark_safe(force_unicode(html).replace('&', '&amp;').replace('<', '&l
t;').replace('>', '&gt;').replace('"', '&quot;').replace("'", '&#39;')) 
```

另外，请参见[此处](https://stackoverflow.com/questions/275174/how-do-i-perform-html-decoding-encoding-using-python-django)。

# python - Python 正则表达式匹配 # 后跟 0-7 后跟 ##

> ID：889143
> 
> 赞同：2
> 
> 时间：2009-05-20T17:12:09.253
> 
> 标签：python, regex

我想拦截以开头的字符串`\*#\*`

后跟一个 0 到 7 之间的数字

并以：`##`

所以像`\*#\*0##`

但我找不到这个的正则表达式

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-20T17:22:34.880

假设您只想允许**一个**# 之前和两个之后，我会这样做：

```
r'^(\#{1}([0-7])\#{2})' 
```

需要注意的是，[亚历克斯的](https://stackoverflow.com/questions/889143/python-regular-expression/889154#889154)正则表达式也将匹配诸如

```
###7######
########1### 
```

这可能或可能不重要。

我上面的正则表达式匹配以 #[0-7]## 开头的字符串，并忽略字符串的结尾。如果您希望它仅在整行时匹配，则可以在末尾添加$ **。**

第一个反向引用为您提供整个#<number>## 字符串，第二个反向引用为您提供# 内的数字。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-20T17:50:09.970

以上示例均未考虑 *#*

```
^\*#\*[0-7]##$ 
```

通过：*#*7##

失败：*#*22324324##

失败：*#3232#

^ 字符将匹配字符串的开头，\* 将匹配单个星号，# 字符在此示例中不需要转义，最后 [0-7] 将仅匹配 0 到 7 之间的单个字符.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-20T17:15:23.147

`r'\#[0-7]\#\#'`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-20T17:18:06.150

正则表达式应该像 ^#[0-7]##$

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-21T10:24:42.640

据我了解，您需要的最简单的正则表达式是：

```
rex= re.compile(r'^\*#\*([0-7])##$') 
```

`{1}`结构是多余的。在执行`rex.match`（或`rex.search`，但这里没有必要）之后，`.group(1)`匹配对象的包含给定的数字。

编辑：整个匹配的字符串始终可以作为`match.group(0)`. 如果您只需要完整的字符串，请删除正则表达式中的任何括号：

```
rex= re.compile(r'^\*#\*[0-7]##$') 
```

# c# - 构造函数应该直接将自己的参数初始化为私有成员还是通过公共字段（以 C# 为中心）？

> ID：889144
> 
> 赞同：4
> 
> 时间：2009-05-20T17:12:17.643
> 
> 标签：c#, constructor, initialization

例如哪种方式更好

```
class Foo {
private string _Bar ; 
  Foo ( string bar)
  {
    _Bar = bar ; 
  }
 public string Bar 
 { 
   get { return _Bar ; //more logic here
   } 
   set { _Bar = value ;   //more logic could be added
  }
 }
} 
```

或者

```
class Foo {
private string _Bar ; 
  Foo ( string bar)
  {
    this.Bar = bar ; 
  }
 public string Bar { 
  get { return _Bar ; //more logic could be added } 
  set { _Bar = value ; //more logic could be added }}
} 
```

编辑：我知道后者允许在其中添加更多逻辑，但是因此使用它是否合理...

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-20T17:16:48.057

无论哪种方式对班级有意义；没有“最佳做法”。

有时您可能希望确保只执行属性可以执行的相同操作；在这种情况下，使用该属性是有意义的。

有时你想做一些只能在构造函数中完成的事情，这违反了你可以通过属性构建后做的事情，在这种情况下，使用该字段是有意义的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-20T17:16:01.693

这取决于。

当没有副作用时，我更喜欢使用这些属性。但是，有时设置属性会产生其他副作用，例如事件通知、可能不必要的（此时）验证等。在这些情况下，直接设置支持字段是更好的选择。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-20T17:16:53.593

这取决于，如果您需要执行公共属性中的逻辑，请使用该方法。如果您只是进行直接分配，那么分配给私人成员就可以了。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-20T17:28:53.477

我经常使用属性，因为它允许我只在一个地方（属性设置器）编写我的验证。它有助于避免重复代码。

```
public class Foo
{
   private string _Bar = String.Empty;

   public string Bar
   {
      get { return _Bar; }
      set 
      {
          if (value == null)
             throw new ArgumentNullException("Bar");
          _Bar = value;
      }
   }

   public Foo(string bar)
   {
      Bar = bar;
   }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-20T17:27:36.897

请阅读 Eric Lippert 的这篇出色的博客文章：[自动与显式属性](http://blogs.msdn.com/ericlippert/archive/2009/01/14/automatic-vs-explicit-properties.aspx)：

> 这是我去年从 C# 用户那里得到的一个问题，我经常收到一个问题：
> 
> *用户：对于“常规”显式属性，我倾向于直接在类中使用私有支持字段。当然，使用自动属性，您不能这样做。我担心的是，将来，如果我决定出于某种原因需要一个显式属性，我只能选择更改类实现以使用新的私有字段，或者继续使用该属性。我不确定在这种情况下应该做些什么。*
> 
> 你说“出于任何原因”，这是关键。您的问题的答案将完全取决于促使改变的原因。
> 
> 如果促使从自动实现的属性更改为显式实现的属性的原因是改变属性的语义，那么***您应该评估从类中访问属性时所需的语义是否与访问时所需的语义相同或不同课外的财产。***[强调我的]

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-20T18:01:00.043

您的示例有点太简单了，但是您的评论“//可以添加更多逻辑”暗示了 set 属性可能比对私有变量的简单赋值更复杂的可能性。

如果您已经在属性集中编写了相同的逻辑，请不要在构造函数中重复相同的逻辑。这将是不必要的重复代码，并且当逻辑需要更改时可能容易出错，并且对于将来必须维护代码的开发人员来说是一件痛苦的事情。

如果您的 set 属性在构造函数中具有一些不需要/不需要的副作用，例如事件通知，那么您应该将公共代码重构为它自己的方法。构造函数和 set 属性都可以调用此方法。

你会得到很多“视情况而定”的答案，因为这取决于。造成这种情况的部分原因是个人偏好（通常由过去的经验决定，即某些东西难以维护或有问题）。每种情况都不同的一些原因，虽然我们用代码实现了很多常见的模式和任务，但总是有可能不遵循规范来在你的编码解决方案中创造或创新问题。请记住，我们不编写代码，我们使用代码作为工具编写解决方案。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-05-20T19:16:00.657

我将在我的“它取决于”的答案上添加一些内容：您试图在确保内部状态保持一致、代码重复和性能之间找到平衡。

我同意亚当 P，因为您当前的示例非常简单，这并不重要。

考虑一个只读变量 Qux 依赖于 Bar 和另一个成员 Baz 的示例。Qux 的计算成本相当高，因此您不希望在运行中进行此操作——这建议使用私有字段来存储状态，并在 IFF Bar 和 Baz 更改时对其进行更改。

因此，在您的构造函数中，您可以公开设置 Bar 和 Baz，知道 Qux 将被解析两次，或者将 Qux 的解析推迟到构造函数结束（并保存一次 Qux 解析调用）。

在不太可能更改的相当琐碎的代码中（例如，支持简单私有字段的公共属性），选择一种风格，坚持下去，并专注于解决程序的实际问题。

# asp.net - 如何描述 JSR-172 (Java ME) 消费的 ASP.NET Web 服务 ENUM

> ID：889153
> 
> 赞同：0
> 
> 时间：2009-05-20T17:14:56.890
> 
> 标签：asp.net, web-services, java-me

我有 .NET Web 服务，我正在尝试从 Java 手机使用该 Web 服务。我还在使用带有 Web 服务工具包的 NetBeans 开发环境。当我尝试创建代理时，它在枚举中步履蹒跚，指出不支持简单类型。有没有办法在 WSDL 中描述枚举类型以便工具包可以理解？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-09-18T17:00:14.723

```
 // send a POST request to web server
    public String sendPostRequest(String urlstring, String requeststring)
    {
            HttpConnection hc = null;
            DataInputStream dis = null;
            DataOutputStream dos = null;

            String message = "";

            // specifying the query string
            String requeststring = "request=gettimestamp";
            try
            {
                    // openning up http connection with the web server
                    // for both read and write access
                    hc = (HttpConnection) Connector.open(urlstring, Connector.READ_WRITE);

                    // setting the request method to POST
                    hc.setRequestMethod(HttpConnection.POST);
                    hc.setRequestProperty("User-Agent","Profile/MIDP-2.0 Confirguration/CLDC-1.0");
                    hc.setRequestProperty("Content-Type", "application/x-www-form-urlencoded");

                    // obtaining output stream for sending query string
                    dos = hc.openDataOutputStream();
                    byte[] request_body = requeststring.getBytes();

                    // sending query string to web server
                    for (int i = 0; i < request_body.length; i++)
                    {
                            dos.writeByte(request_body[i]);
                    }
                    // flush outdos.flush();

                    // obtaining input stream for receiving HTTP response
                    dis = new DataInputStream(hc.openInputStream());

                    // reading the response from web server character by character
                    int ch;
                    while ((ch = dis.read()) != -1)
                    {
                            message = message + (char) ch;
                    }

            }
            catch (IOException ioe){
                    message = "ERROR";
            }
            finally{
                    // freeing up i/o streams and http connection
                    try{
                            if (hc != null)
                                    hc.close();
                    }
                    catch (IOException ignored){}
                    try{
                            if (dis != null)
                                    dis.close();
                    }
                    catch (IOException ignored){}
                    try{
                            if (dos != null)
                                    dos.close();
                    }
                    catch (IOException ignored){}
            }
            return message;
    } 
```

# database-design - 如何构建和实施自助式自定义报告？

> ID：889155
> 
> 赞同：3
> 
> 时间：2009-05-20T17:15:42.177
> 
> 标签：database-design, architecture, reporting

需要什么类型的架构、设计和软件来提供类似于谷歌分析提供的出色自定义报告功能的东西。更具体地说，我们希望用户能够从列表中指定维度和指标并生成报告。

*   我们需要数据仓库吗？
*   我们需要OLAP吗？
*   数据访问层是否需要 ORM、动态 sql 或存储过程？
*   是否有任何第 3 方或开源产品可以帮助我们实现目标？

是否还有其他人（公司、开发人员）甚至在 google 级别上完成了此功能？例子？

**笔记**

我对建立谷歌分析竞争对手不感兴趣。我希望将报告的易用性应用于我们自己独特的数据集。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-20T19:04:03.037

您肯定需要一个包含大量 ETL、agg 和 pre-agg 进程的数据仓库，这些进程在非高峰时间运行。OLAP 多维数据集并不能真正扩展用于大容量 Web 分析。

对于数据收集，您可能还需要使用 MSMQ 或类似的硬件负载平衡。磁盘 I/O 是一个典型的瓶颈，因此在内存中工作并进行一些预聚合肯定会有所帮助。在我之前在 Microsoft 的工作中，我们的一些遗留数据收集系统直接登录到日志文件而不是数据库。我们使用了[日志解析器](http://www.microsoft.com/DownLoads/details.aspx?FamilyID=890cd06b-abf8-4c25-91b2-f8d975cf8c07&displaylang=en)）并且几乎全天候进行大量 ETL 和聚合。

数据收集是它的核心，如果你打算扩展，你将不得不建立一个最先进的数据仓库。我们几乎完全依赖存储过程。我们有数千个，其中一些非常复杂且经过大量优化。除了性能，可扩展性也是一个大问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-20T18:28:07.290

您可能想查看[http://haveamint.com/](http://haveamint.com/)。它不是免费的，但作为一种产品，它可以让您托管自己的分析。

Piwik ( [http://piwik.org/](http://piwik.org/) ) 是一个很棒的开源实现。

至于建立一个谷歌分析竞争对手，分析将不是困难的部分。如果您的服务会着火，最大的困难将是扩展数据库。

# design-patterns - 什么是包装类？

> ID：889160
> 
> 赞同：232
> 
> 时间：2009-05-20T17:16:15.920
> 
> 标签：design-patterns, wrapper

什么是包装类？
这些类有什么用？

* * *

## 回答 #1

> 赞同：177
> 
> 时间：2009-05-20T17:19:59.283

通常，包装类是“包装”或“封装”另一个类或组件的功能的任何类。通过提供底层类或组件的实现的抽象级别，这些很有用；例如，包装 COM 组件的包装类可以管理调用 COM 组件的过程，而不用打扰调用代码。它们还可以通过减少涉及的接口点数量来简化底层对象的使用；通常，这可以更安全地使用底层组件。

* * *

## 回答 #2

> 赞同：72
> 
> 时间：2009-05-20T17:18:10.520

就像它听起来的那样：一个将另一个类或 API 的功能“包装”在更简单或仅仅是不同的 API 中的类。

### 请参阅：[适配器模式](http://en.wikipedia.org/wiki/Adapter_pattern)、[外观模式](http://en.wikipedia.org/wiki/Facade_pattern)

* * *

## 回答 #3

> 赞同：41
> 
> 时间：2012-07-02T10:14:01.123

包装类提供了一种将原始类型用作对象的方法。对于每个原语，我们都有一个包装类，例如，

```
int Integer
byte Byte 
```

Integer 和 Byte 是原始 int 和 byte 的包装类。当您需要将原语用作对象时存在时间/限制，因此包装类提供了一种称为装箱/拆箱的机制。

概念可以通过以下示例很好地理解为

```
double d = 135.0 d;
Double doubleWrapper = new Double(d);

int integerValue = doubleWrapper.intValue();
byte byteValue = doubleWrapper.byteValue();
string stringValue = doubleWrapper.stringValue(); 
```

所以这就是方式，我们也可以使用包装类类型转换为其他原始类型。当您需要将原始类型转换为对象并使用它们来获取其他原始类型时，使用这种类型的转换。尽管对于这种方法，您需要编写大量代码。然而，同样可以通过简单的铸造技术来实现，因为代码片段可以实现如下

```
double d = 135.0;
int integerValue = (int) d ; 
```

尽管双精度值被显式转换为整数值，也称为向下转换。

* * *

## 回答 #4

> 赞同：18
> 
> 时间：2009-05-20T17:21:27.173

包装类不一定需要包装另一个类。它可能是一个 API 类包装功能，例如 dll 文件。

例如，创建一个 dll 包装类可能非常有用，它负责所有 dll 初始化和清理，并创建包装从例如创建的函数指针的类方法`GetProcAddress()`。

干杯！

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2009-05-20T17:18:52.937

包装类是一个“包装”其他东西的类，就像它的名字一样。

更正式的定义是实现[适配器模式](http://en.wikipedia.org/wiki/Adapter_pattern)的类。这允许您将一组 API 修改为更可用、更易读的形式。例如，在 C# 中，如果您想使用本机 Windows API，将其包装到符合 .NET 设计准则的类中会有所帮助。

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2009-05-20T18:32:11.010

有几种设计模式可以称为包装类。

[请参阅我对“代理、装饰器、适配器和桥接模式有何不同？](https://stackoverflow.com/questions/350404/how-do-the-proxy-decorator-adaptor-and-bridge-patterns-differ/350471#350471) ”的回答。

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2009-05-20T17:43:19.610

值得注意的是，在某些环境中，包装类所做的大部分工作都被方面所取代。

编辑：

一般来说，包装器将扩展被包装者所做的事情，而不关心被包装者的实现，否则包装与扩展被包装类没有意义。一个典型的例子是围绕其他一些服务接口添加计时信息或日志功能，而不是将其添加到该接口的每个实现中。

这最终成为 Aspect 编程的典型示例。不是逐个函数地遍历接口函数并添加样板日志，而是在方面编程中定义一个切入点，它是一种方法的正则表达式，然后声明要在所有匹配的方法之前、之后或周围执行的方法切入点。可以公平地说，方面编程是装饰器模式的一种使用，包装器类也可以用于这种模式，但这两种技术都有其他用途。

* * *

## 回答 #8

> 赞同：7
> 
> 时间：2011-09-09T05:11:15.657

包装类是包装另一个类并提供客户端和被包装的原始类之间的抽象的类。

* * *

## 回答 #9

> 赞同：5
> 
> 时间：2009-05-20T17:25:44.670

包装类通常是将对象作为私有属性的类。包装器实现了该私有对象的 API，因此它可以作为私有对象的参数传递。

假设您有一个集合，并且您想在将对象添加到其中时使用某种翻译-您编写一个包含所有集合方法的包装类。当 add() 被调用时，包装器翻译参数而不是仅仅将它们传递到私有集合中。

包装器可以在任何可以使用集合的地方使用，并且私有对象仍然可以让其他对象引用它并读取它。

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2009-05-20T17:18:39.160

包装类是用于包装另一个类以在客户端和被包装的原始类之间添加一层间接和抽象的类。

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2011-07-04T08:14:17.730

Wrapper 类是原始数据类型的包装器。它在其相应的类实例中表示原始数据类型，例如布尔数据类型可以表示为布尔类实例。Java 中的所有原始包装类都是不可变的，即一旦为包装类实例分配了一个值，就无法进一步更改。

* * *

## 回答 #12

> 赞同：3
> 
> 时间：2012-05-01T12:42:22.513

Java 编程为每个原始数据类型提供了包装类，将原始数据类型转换为包装类对应的对象。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2014-11-18T03:14:38.683

使包装类健康并不是一件容易的事。理解一个包装类是如何被其他人设计的也不是一件容易的事。因为它是想法，而不是代码。只有理解了思想，才能理解 wrapper。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2015-11-03T06:23:57.000

包装类的出现是为了满足程序员的基本需求——即在只允许对象的地方使用原始值。正如他们的名字所暗示的，包装类包装一个原始值并将该值保存在一个对象中。因此，所有不允许使用原语的地方——例如泛型、hashmap-keys、Arraylists 等——程序员现在可以选择将这些原语值作为其对应的包装类型提供。

此外，这些包装器类型具有许多实用方法，用于从原始类型转换为相应的包装器类型并返回，以及从字符串转换为包装器类型并返回。

我在我的博客中写了一篇关于包装器类的详细文章，深入解释了包装器类型的概念 - [http://www.javabrahman.com/corejava/java-wrapper-classes-tutorial-with-examples/](http://www.javabrahman.com/corejava/java-wrapper-classes-tutorial-with-examples/) （披露 -这个博客归我所有）

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2015-11-20T09:27:17.720

我目前为我的项目使用了一个包装类，我得到的主要好处（只是扩大主题解释的一个好处）：

异常处理：我的主类，另一个类包装，有方法如果发生任何抛出异常，所以我创建了一个包装类来处理异常并立即记录它们。因此，在我的主要范围内，没有异常处理。我只是调用一个方法并做一些事情。

易于使用：我可以轻松地启动对象。通常启动阶段由许多步骤构成。

代码可读性：当另一个程序员打开我的代码时，代码看起来非常清晰且易于操作。

隐藏细节：如果你正在生成一个其他程序员将要使用的类，那么你可以包装诸如“错误处理、异常处理、日志消息等......”这样的细节，这样程序员就不必处理混乱，只是简单地使用方法。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2015-12-14T14:09:45.193

包装类是一个仅用于保存某些东西并向其添加一些功能的类。在 Java 中，因为原语（如整数、浮点数、字符......）不是对象，所以如果你想像对待它们一样对待它们，那么你必须使用包装类。假设你想创建一个整数向量，问题是向量只包含对象而不是基元。所以你要做的就是把所有的整数放在一个整数包装器中并使用它。例子：

```
int number = 5;
Integer numberWrapped = new Integer(number);
//now you have the int in an object.
//and this is how to access the int value that is being wrapped.
int again = numberWrapped.intValue(); 
```

* * *

## 回答 #17

> 赞同：-8
> 
> 时间：2011-09-27T11:46:11.593

包装器是用于在不同平台之间的两个不同应用程序之间进行通信的类

# .net - 编写我们自己的持续集成服务器时要考虑的事项？

> ID：889167
> 
> 赞同：5
> 
> 时间：2009-05-20T17:17:15.013
> 
> 标签：.net, continuous-integration, custom-build-step

我在一个组织中从事一个大型项目，该组织正在（缓慢地）升级我们的开发流程，使其更加现代化。我们目前正在考虑转向持续集成模型；作为这一举措的一部分，我们正在考虑编写自己的持续集成服务器。我们有一个非常成熟（有些僵化）的构建过程；我们还有大量的测试，我们希望将它们作为构建验证测试运行。

我们研究了几个商业 CI 服务器，似乎根据我们的个人需求定制其中任何一个所涉及的工作量相对较高；如此之高以至于我们可能值得花时间自定义编写我们自己的 CI 服务器。但是，我觉得我们可能遗漏了这个过程的一些潜在陷阱。已经提出并考虑了我们实施中的错误问题；在评估我们的选择时，我们还应该牢记其他主要考虑因素（当然，除了编写 CI 系统所涉及的工作量）吗？从任何实施过自定义 CI 服务器的人那里，有什么特别的麻烦？从任何使用过商业 CI 系统的人那里，有没有你希望自己做的事情，或者你特别高兴你没有做的事情？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2009-05-20T17:26:01.673

我强烈反对这种 NIH 的想法。

*   考虑修改像 CruiseControl.NET 这样的开源 CI 服务器
*   考虑编写自定义 Nant 任务
*   考虑修改您的项目以更适合现有选项
*   你不想从事持续集成的业务，你只想使用它并看到它的好处

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2009-05-20T17:22:10.417

为什么不构建您需要的定制部分，而不是一个成熟的 CI 服务器？尽可能多地重复使用，而不是定制所有东西，你至少可以制作一些现成的零件。

（顺便说一句，我不会将其描述为“NIH”）

请注意，即使您花费与构建自己的 CI 服务器一样多的时间来配置构建以使用现有的 CI 服务器（可能在这里很慷慨），您也只需要维护每个自定义位 - 而不是整个框架。

看看你可以利用什么，并使用它。另请查看似乎有希望朝着您前进的方向前进的工具。开箱即用的 CI 服务器不会在您的环境中完美运行。它们都必须进行调整并“半途而废”。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-05-20T17:42:56.523

做好这件事根本不是一件小事——开源社区至少在第三代开源 CI 服务器上——在此过程中吸取了很多教训。

我当然会鼓励您查看允许轻松扩展的现成 CI 服务器之一，并构建那些缺少的部分。在大多数现有 CI 服务器中，您的问题中没有任何事情没有完成（并且做得很好）。

在转向开源解决方案之前，我确实实施了一个“穷人的”内部 CI 系统，并且发现开源系统更好、更完整、更强大，以至于我的努力毫无意义。

特别是，如果您正在寻找可扩展性，[Hudson](http://hudson-ci.org/)将是一个不错的选择 - 它具有出色的插件架构，并且作者可用于付费咨询工作 - 可能比滚动您自己的资源更好地利用您的资源。

顺便说一句，在我参与构建过程之前，产品构建需要 14.5 小时，没有自动化测试、打包或 CM。多亏了一些努力，并遵循现有 CI 社区制定的最佳实践，相同的项目构建时间缩短到 7.5 分钟，包括自动化测试、打包和 CM。根据我的经验，绝对值得付出一些努力来使您的构建符合经验丰富的 CI 社区的现有最佳实践，而不是试图让 CI 屈服于您现有的构建。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-20T17:41:52.750

我会考虑的事情：

*   我们在这个领域的团队有什么样的经验？
*   时间线是否可以让团队中的人员花时间学习 CI 服务器的设计？
*   是否有预算聘请具有此领域知识的人员来补充团队？
*   为什么你认为你可以比现有的解决方案做得更好？

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-22T01:44:46.963

我也走过这条路。我已经为我工作过的各种公司编写了 3 次内部自动构建系统。一直很有趣，我是那种喜欢写工具的人。

然而，归根结底，它从来都不是一个专业的系统。它总是一个足够好的系统，为我们工作，让我们度过难关。当然，除非我去度假，或者去另一个城市开会，等等。以至于每当我出城时，构建都会失败，失败，失败。不是因为我们的代码有问题，而是因为我每天都会在构建系统中处理一些小事情。当我不在那里处理它们时，没有其他人知道该怎么做。

所有这一切都从我们的主要关注点——我们自己的软件开发——转移了时间。

最后，我们（在我的敦促下）放弃了我编写的手工构建的 perl 脚本系统，我们购买了一个商业系统：[Zed Builds and Bugs](http://www.hericus.com/)

现在，当出现问题时，就是我们自己的代码有问题。供应商的构建系统有效。当我们有问题时，我们会问他们，或者询问用户社区。当我们需要了解如何做某事时，他们会有人回答我们的问题。

最重要的是，我又可以休假了 :-)

我仍然是使用构建系统处理大部分任务的人，但这不再是编写它的问题。这是一个使我们现有的 makefile、Visual Studio 项目、Ant 构建脚本等适应新系统的问题。

Believe me, it's much easier to buy versus build in this case. Your core business isn't creating a build system (or you wouldn't have asked the question). Focus on your core business, and buy the tools you need for everything else.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-20T17:41:09.490

我可能会尝试从我的角度给出一些提示。在我们公司，我们使用不同的构建环境配置和不同的目标环境。不同的配置是指不同的系统架构。这是我想描述的一点。（虽然我不知道这是否是你的实际问题）。

产品的构建是在构建环境上完成的，为了运行测试，产品本身必须转移到目标环境。因此它涉及交叉编译。我们没有使用商业或开源的持续集成解决方案，但我们使用了一组 bash 脚本（没有时间创建合理的解决方案 :( ）运行测试（无论单元、集成、健全性、组件等..）必须在目标上完成。

所以你可能会问的问题是——什么是开发环境？您想在哪里运行测试？（我们一直在目标上运行测试，并且在构建环境上也进行了一小部分测试）目标环境与开发环境相同吗？您是否需要针对不同的配置（平台、软件等）进行构建？

你还没有说明你使用的是什么语言。我知道这可能无关紧要，但事实并非如此 :) （即使 java 在不同平台上的行为也不同（x86 vs x86-64）

任何其他的东西，比如用测试覆盖代码，在编译期间完成的一些静态代码分析（之前..）运行文档任务我认为不是很有趣，因为这些任务可以作为单独的插件完成。

# mysql - 仅在有顺序先例的查询中获取第一个匹配项？

> ID：889179
> 
> 赞同：1
> 
> 时间：2009-05-20T17:20:03.293
> 
> 标签：mysql

我有一个包含字段 id（主键）、name1、name2 和昵称的表。

给定一个名称，我希望它在三个字段中的任何一个中返回包含该名称的条目；但是，我希望它只返回一个条目，有时我的查询返回超过 1 个匹配项。此外，如果有多个匹配项，我希望它首先返回与 name1 匹配的那个。

这是我现在的查询，它给了我一切：

```
SELECT * FROM table WHERE name1 like "Bob" OR name2 like "Bob" OR nicknames rlike "[,]Bob[,]|[,]Bob$"; 
```

谢谢。我在 C++ 和 mysql++ 中这样做。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-20T17:21:06.240

```
SELECT * FROM (
    SELECT * FROM table WHERE name1 like "Bob" limit 1
    UNION SELECT * FROM table WHERE name2 like "Bob" limit 1
    UNION SELECT * from table WHERE nicknames rlike "[,]Bob[,]|[,]Bob$" limit 1
) AS t1 LIMIT 1; 
```

每个记录的限制为 1 可防止数据库提取 50,000 条 Bob 记录只是为了向您展示其中的一条。

# c# - 什么时候在 Linq 中调用 OnValidate？

> ID：889181
> 
> 赞同：6
> 
> 时间：2009-05-20T17:20:51.763
> 
> 标签：c#, linq, partial

我想在我的 Linq 表类中实现这个部分方法。

```
partial void OnValidate(System.Data.Linq.ChangeAction action); 
```

我希望它是在插入之前调用的。谁能告诉我何时调用 OnValidate 方法？

**更新 1**

我知道我可以检查枚举以查看导致它触发的操作。但**它**什么时候被调用？我需要知道每次有人提交更改时是否都会调用它或什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-20T17:30:44.113

每个已更改实体的 OnValidate 方法（如果存在）将在 SubmitChanges 期间为包含该实体的数据上下文调用。因此，它将触发自上次调用 SubmitChanges（或创建上下文）以来使用该数据上下文完成的所有插入、更新和删除操作。如果您需要根据更改类型区分验证操作，您可以关闭 ChangeAction 参数来控制执行流程。

# c# - LINQ转SQL

> ID：889194
> 
> 赞同：1
> 
> 时间：2009-05-20T17:24:46.543
> 
> 标签：c#, linq, linq-to-sql

> **可能的重复：**
> [LINQ to SQL DOA 吗？](https://stackoverflow.com/questions/252683/is-linq-to-sql-doa)

我正在启动一个新的 ASP.Net 项目，该项目将所有数据保存在 SQL 数据库中。我通常会使用 Linq to SQL 来完成我的所有查询、更新和插入。但正如我最近发现的那样，微软将不再开发/支持 Linq to SQL。你会用什么作为替代品？

有谁知道他们为什么放弃这个，因为我开始喜欢 Linq to SQL，你知道他们会用什么代替它吗？

任何信息都会很棒。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-05-20T17:30:34.723

**Linq to SQL 没有死，也没有被 EF 取代**，他们没有杀了它，随意比较对比

*   LINQ转SQL
*   实体框架（又名 Linq to Entity）
*   nHibernate 或任何其他 ORM

选择一个适合你的并坚持下去，两者都不会死。

FWIW，微软在 Linq to SQL 上的开发人员比现在在 MVC.net 上的开发人员还要多

我更喜欢 Linq 而不是 SQL，因为我不需要支持非 MSSQL db，而且它比 EF 轻得多。它不支持您需要的所有最后一件事，但在我看来（我可能会为此感到愤怒）Linq to SQL 之于 MVC.net，就像 EF 之于 webforms。

EF 显然比 Linq to SQL 有其优势，但有些东西是 linq to sql 完全不支持的（跨 db 连接、非 mssql 数据库、基于视图创建类型等）。每个工具都有它的位置。

两者的一些不错的[比较](http://blogs.msdn.com/swiss_dpe_team/archive/2008/11/06/entity-framework-vs-linq-to-sql.aspx)

哦，[StackOverflow 是用 linq to sql 构建的](https://stackoverflow.com/questions/749358/what-was-stack-overflow-built-with-closed)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-20T17:29:14.583

微软现在正在推动实体框架代替 Linq to SQL：

[http://blogs.msdn.com/adonet/archive/2008/10/29/update-on-linq-to-sql-and-linq-to-entities-roadmap.aspx](http://blogs.msdn.com/adonet/archive/2008/10/29/update-on-linq-to-sql-and-linq-to-entities-roadmap.aspx)

关于实体框架的 MSDN 信息：http: [//msdn.microsoft.com/en-us/library/aa697427 (VS.80).aspx](http://msdn.microsoft.com/en-us/library/aa697427(VS.80).aspx)

**更新：** 更完整的实体框架资源列表：http: [//blogs.msdn.com/wriju/archive/2009/03/10/ado-net-entity-framework-resources.aspx](http://blogs.msdn.com/wriju/archive/2009/03/10/ado-net-entity-framework-resources.aspx)

当然还有关于该主题的 O'Reilly 必读书籍：http: [//fyi.oreilly.com/2009/02/introducting-the-adonet-entity.html](http://fyi.oreilly.com/2009/02/introducting-the-adonet-entity.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-20T18:00:26.470

**如果您使用任何技术，请准备好让它最终失宠，而不是成为最新技术！**

如果你不选择 Linq，你使用的任何东西最终都会“老”，人们会问它是否值得学习或使用，因为有更好的东西出来。

如果您正在编写软件，请准备好继续学习新技术和方法，或者转行。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-20T18:08:01.400

如果您喜欢 Linq 2 Sql，那么我建议您试用[SubSonic](http://subsonicproject.com/)，因为它的工作方式非常类似于 Linq 2 Sql。它是轻量级的，您的包装类是从现有数据库生成的。我相信下一个版本的 SubSonic 也会支持 Linq。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2009-05-20T17:28:24.163

Linq to Entities 将取代 Linq to SQL。

# javascript - 浏览器是否编译和缓存 javascript？

> ID：889195
> 
> 赞同：2
> 
> 时间：2009-05-20T17:25:06.543
> 
> 标签：javascript, internet-explorer, internet-explorer-8

我注意到在更改 javascript 文件、清除缓存并重新加载后；特别是一个函数在大约 90 毫秒内运行，下次我加载页面时，它会在 40 毫秒内运行，下次我运行它时，它会在 20 毫秒内运行……然后永远不会变得更快。

看起来 IE 正在编译我的 javascript 并将编译后的版本缓存在某处，类似于 SQLServer 处理查询的方式。

这就是正在发生的事情吗？

有人知道我在哪里可以找到有关浏览器如何处理 javascript 的说明吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-20T18:55:21.430

您可能想查看[Eric Lippert](http://blogs.msdn.com/ptorr/archive/2003/09/14/56184.aspx#56186)对 Peter Torr 的博客文章[Compiled, Explained, 不管](http://blogs.msdn.com/ptorr/archive/2003/09/14/56184.aspx)的评论：

> 从某种意义上说，JScript Classic 就像一种编译语言，在任何 JScript Classic 程序运行之前，我们都会对代码进行全面的语法检查，生成完整的解析树，并生成字节码。然后我们通过字节码解释器运行字节码。从这个意义上说，JScript 与 Java 一样“经过编译”。不同之处在于 JScript 不允许您保留或检查我们专有的字节码。此外，字节码比 JVM 字节码高级得多——JScript Classic 字节码语言只不过是解析树的线性化，而 JVM 字节码显然旨在在低级堆栈机器上运行。

该帖子和评论来自 2003 年 9 月，但从 Ralph Sommerer 的[On JavaScript performance in IE8](http://blogs.msdn.com/sompost/archive/2008/09/26/javascript-performance-in-ie8.aspx)帖子来看，它们在底层 JScript 引擎中并没有太大变化：

> 除非在 IE（和其他地方）中使用的 JavaScript 引擎对原生代码采用某种形式的编译，否则它在性能方面总是落后于竞争对手。从我从他们的[Channel9 外观](http://channel9.msdn.com/posts/janakiram/Whats-New-for-JScript-in-IE8/)中收集到的信息来看，他们在字节码执行方面做出了改进，但他们的主要目标是 JavaScript 原生对象（数组、字符串……）和 JavaScript-DOM 交互。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-20T17:29:51.103

IE8 不是开源的，只能做假设；但是，开源浏览器（例如 Chromium、Firefox、Webkit）确实像您所说的那样工作，非浏览器中的许多其他解释器也不一定是 JS 设置（在第一次看到或重新加载时编译新源，缓存或保存编译版本，以便将来更快地执行），因此 IE 的 Javascript 方法应该非常相似，正如您所猜测的那样，这似乎是非常合理的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-20T17:27:07.117

我知道你问过 IE8，但这里是 V8 - Google 的引擎。包括有关 V8 工作原理的视频。

[http://code.google.com/p/v8/](http://code.google.com/p/v8/)

# .net - 多个值的 IComparer

> ID：889214
> 
> 赞同：4
> 
> 时间：2009-05-20T17:28:57.533
> 
> 标签：.net

是否可以使用 iComparer 对象中的两个值对列表进行排序？

我有一个基于 value1 排序的自定义比较器类。但是对 value1 和 value2 进行排序的最佳方法是什么？

按 value2 然后 value1 对列表进行排序会起作用吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2009-05-20T17:34:59.190

你的`IComparer`班级应该处理它。例如：

```
public class ThingComparer : IComparer
{
    public int Compare(object x, object y)
    {
        // null- and type-checking omitted for clarity

        // sort by A, B, and then C

        if (x.A != y.A) return x.A.CompareTo(y.A);
        if (x.B != y.B) return x.B.CompareTo(y.B);
        return x.C.CompareTo(y.C);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-20T17:36:10.547

如果您实现自己的比较器，您可以执行任何您想要的排序：

```
List<Customer> customers = GetCustomers();
customers.Sort(delegate(Customer x, Customer y)
{
    if (x.Name != y.Name)
    {
        return x.Name.CompareTo(y.Name);
    }

    return x.Location.CompareTo(y.Location);
}); 
```

现在上面的代码不是一个 IComparer 类，但是比较的方法是一样的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-20T17:39:39.510

```
public class ScratchComparer : IComparer<Scratch>
{
    public int Compare(Scratch x, Scratch y)
    {
        return x.Foo.CompareTo(y.Foo).CompareTo(0.CompareTo(x.Bar.CompareTo(y.Bar)));
    }
}

[TestFixture]
public class Scratch
{
    public virtual int Foo { get; set; }
    public virtual int Bar { get; set; }

    [Test]
    public void Should_sort()
    {
        var scratches = new[]
        {
            new Scratch {Foo = 1, Bar = 1},
            new Scratch {Foo = 2, Bar = 1},
            new Scratch {Foo = 1, Bar = 1},
            new Scratch {Foo = 1, Bar = 2}
        };

        // IComparer
        Array.Sort(scratches, new ScratchComparer());

        scratches[0].Foo.ShouldEqual(1);
        scratches[0].Bar.ShouldEqual(1);

        scratches[1].Foo.ShouldEqual(1);
        scratches[1].Bar.ShouldEqual(1);

        scratches[2].Foo.ShouldEqual(1);
        scratches[2].Bar.ShouldEqual(2);

        scratches[3].Foo.ShouldEqual(2);
        scratches[3].Bar.ShouldEqual(1);

        // better
        Scratch[] ordered = scratches.OrderBy(x => x.Foo).ThenBy(x => x.Bar).ToArray();

        ordered[0].Foo.ShouldEqual(1);
        ordered[0].Bar.ShouldEqual(1);

        ordered[1].Foo.ShouldEqual(1);
        ordered[1].Bar.ShouldEqual(1);

        ordered[2].Foo.ShouldEqual(1);
        ordered[2].Bar.ShouldEqual(2);

        ordered[3].Foo.ShouldEqual(2);
        ordered[3].Bar.ShouldEqual(1);
    }
} 
```

# configuration-management - 在组织中使用配置管理来控制文档的更好形式是什么

> ID：889226
> 
> 赞同：1
> 
> 时间：2009-05-20T17:31:48.417
> 
> 标签：configuration-management, process-management

我正在考虑向我的组织建议，为我组织中的所有用户实施 SVN。

实现它的最佳形式是什么？执行此操作的最佳工具是什么？实现这一点的最佳过程是什么？

我有任何想法来实现它。但我想听听一些成功的故事，不要把时间浪费在行不通的事情上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-20T18:27:43.640

在我的组织中，我们已经使用运行 Apache 的 Windows 服务器成功实现了 SVN，对于客户端访问，我们使用 TortoiseSVN。服务器配置为通过 LDAP 访问我们的信息。

我们不仅使用它来跟踪进入大型内容管理系统的 HTML 代码，而且我们还使用它来存储 Microsoft Word 文档形式的页面的支持文档和线框。TortoiseSVN diff 对于我们的 Word 线框来说是惊人的。它将使用 Word 中内置的更改跟踪向我们展示客户对线框所做的更改。

缺点是 TortoiseSVN 确实有一个学习曲线，我们实际上必须教用户如何使用它，而用户已经精通技术。所以要让普通用户正确使用 TortoiseSVN 真的很难。

# networking - 如何测量网络性能（如何对网络协议进行基准测试）

> ID：889229
> 
> 赞同：12
> 
> 时间：2009-05-20T17:32:32.377
> 
> 标签：networking, network-programming, benchmarking, network-protocols, profiling

首先，有一点背景。分布式版本控制系统 (DVCS) 有许多不同的比较，它们比较存储库的大小或操作的基准速度。除了测量涉及“克隆”、“拉取”/“获取”或“推送”等网络的操作（命令）速度之外，我还没有找到任何可以对各种 DVCS 的网络性能和使用的各种协议进行基准测试的方法。

我想知道你会如何进行这样的比较；如何测量应用程序的网络性能，或如何对网络协议进行基准测试。我在这里设想还测量性能对网络带宽和网络延迟（ping 时间）的依赖性；一些协议以更多往返交换（协商）的形式牺牲延迟，以发送所需的最少最终“包”。

如果可能的话，我更喜欢只涉及一台计算机的解决方案。我希望看到在 Linux 上运行的开源解决方案。但我也欢迎更通用的答案。

**首选操作系统：** Linux
**首选语言：** C、Perl、shell 脚本

* * *

***可能的测量：***

*   在一个会话中从服务器到客户端以及从客户端到服务器传输的总字节数；这也可以用来测量协议的开销*（带宽）*
*   一个事务中的往返次数（连接）*（延迟）*
*   网络运行速度（克隆/拉/推所需的时间）与网络带宽和网络延迟（ping 时间）的相关性

如何进行这样的测量（这样的基准）？

* * *

**2009 年 2 月 6 日添加：**
最简单的基准（测量）将是命令的网络版本`time`，即运行的命令会给我传输的字节数，以及执行给定命令期间的往返次数/网络连接数。

* * *

**2009 年 9 月 6 日添加：**上述网络版本命令解决方案的
*示例*`time`假想输出可能如下所示：

```
$ ntime git clone -q git://git.example.com/repo.git
...
bytes sent: nnn (nn kiB), bytes received: nnn (nn kiB), avg: nn.nn KB/s
nn reads, nn writes 
```

请注意，它只是一个示例输出，详细说明了人们可能想要获得的信息。

* * *

**添加了 09-06-2009：**
看起来我想要的一些东西可以使用 dummynet 来**实现**，工具（最初）用于测试网络协议......

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2009-06-05T21:54:27.153

如果我对您的理解正确，您基本上对特定于网络的系统调用的[Linux 'strace'](http://en.wikipedia.org/wiki/Strace)（[简介）感兴趣？](http://linuxhelp.blogspot.com/2006/05/strace-very-powerful-troubleshooting.html)

可能是分析器和调试器的组合，用于网络应用程序（即“ntrace”），提供各种可选测量的详细分析？

在 Linux 下，[strace](http://linux.die.net/man/1/strace)实用程序主要基于 Linux 内核提供的功能，即[ptrace（进程跟踪）](http://linux.die.net/man/2/ptrace) API：

*   [使用 Ptrace 进行进程跟踪](http://linuxgazette.net/issue81/sandeep.html)
*   [玩 ptrace - 第一部分](http://www.linuxjournal.com/article/6100)
*   [玩 ptrace - 第二部分](http://www.linuxjournal.com/article/6210)
*   [使用 ptrace 进行系统调用跟踪](http://www.cs.ualberta.ca/~paullu/C498/meng.ptrace.slides.pdf)
*   [使用 Ptrace() 将字节码注入正在运行的进程中](http://www.securitytube.net/Bytecode-Injection-into-a-Running-Process-using-Ptrace()-video.aspx)
*   [通过改进的 ptrace() 在 Linux 中实现更好的进程控制](http://www.cc.gatech.edu/~nehil22/projects/ptrace.pdf)

使用 ptrace，应该可以获取您感兴趣的大部分数据。

在 Windows 上，您可能需要查看[弯路](http://research.microsoft.com/en-us/projects/detours/)以拦截/重定向 Winsock API 调用以进行检查/基准测试。

如果您真的不需要那么多低级信息，您也可以直接使用 strace （在 linux 上）并仅使用它来跟踪某些系统调用，例如考虑以下仅跟踪对 open 系统调用的调用的行（使用附加的 -o FILE 参数，您可以将所有输出重定向到输出文件）：

`strace -e trace=open -o results.log`

通过向 strace 传递一个额外的 -v 标志，您可以增加其详细程度以获取更多信息（当使用由许多较小的 shell 实用程序和独立工具组成的 git 等 SCM 时，您可能还需要考虑使用 - f 标志，以便也遵循分叉进程）。

因此，您会感兴趣的是与[sockets](http://linux.die.net/man/7/socket)相关的所有系统调用，即：

*   接受
*   绑定
*   连接
*   获取对等名称
*   获取名称
*   getockopt
*   听
*   收视率
*   接收来自
*   发送
*   发送至
*   套索选择
*   关闭
*   插座
*   套接字对

（一开始，您可能只想考虑处理 send.../recv... 调用，不过）

为了简化这一点，您还可以使用“network”作为参数进行跟踪，这将跟踪所有与网络相关的调用：

> -e trace=network：跟踪所有与网络相关的系统调用。

因此，相应的 strace 调用可能如下所示：

`strace -v -e trace=accept,bind,connect,getpeername,getsockname,getsockopt,listen,recv,recvfrom,send,sendto setsockopt,shutdown,socket,socketpair -o results.log -f git pull`

程序运行完毕后，您主要想检查日志文件以评估数据，这可以通过使用正则表达式轻松实现。

例如，在 linux shell 中运行以下命令时： `strace -v -o wget.log -e trace=connect,recv,recvfrom,send,sendto wget http://www.google.com`

生成的日志文件包含如下消息：

*   recv(3, "HTTP/1.0 302 Found\r\n位置: htt"..., 511, MSG_PEEK) = 511
*   发送至(4, "\24\0\0\0\26\0\1\3^\206*J\0\0\0\0\0\0\0\0"..., 20, 0 , {sa_family=AF_NETLINK, pid=0, groups=00000000}, 12) = 20

查看这两个系统调用的手册页，很明显 511 和 20 分别是传输的字节数。如果您还需要详细的时序信息，可以将 -T 标志传递给 strace：

> -T -- 打印每个系统调用花费的时间

此外，您可以通过传递 -c 标志来获取一些统计信息：

> -c：计算每个系统调用的时间、调用和错误，并在程序退出时报告摘要。在 Linux 上，这试图显示独立于挂钟时间的系统时间（在内核中运行的 CPU 时间）。如果 -c 与 -f 或 -F（见下文）一起使用，则仅保留所有跟踪进程的汇总总数。

如果您还需要检查处理的实际数据，您可能需要查看读/写说明符：

> -e read=set：对从指定集合中列出的文件描述符读取的所有数据执行完整的十六进制和 ASCII 转储。例如，要查看文件描述符 3 和 5 上的所有输入活动，请使用 -e read=3,5。请注意，这与由选项 -e trace=read 控制的 read(2) 系统调用的正常跟踪无关。-e write=set：对写入指定集合中列出的文件描述符的所有数据执行完整的十六进制和 ASCII 转储。例如，要查看文件描述符 3 和 5 上的所有输出活动，请使用 -e write=3,5。请注意，这与 write(2) 系统调用的正常跟踪无关，后者由选项 -e trace=write 控制。

您还可以自定义字符串的最大长度：

> -s strsize：指定要打印的最大字符串大小（默认为 32）。请注意，文件名不被视为字符串，并且始终完整打印

或者将字符串转储为十六进制：

> -xx：以十六进制字符串格式打印所有字符串。

因此，在大部分情况下使用 strace 似乎是一种很好的混合方法，因为它很容易做到，但仍然有大量可用的低级信息，如果您发现需要额外的低级信息，您可能想要考虑改为扩展 strace 或使用[sourceforge 上的 strace 项目](http://sourceforge.net/projects/strace/)提交相应的功能请求。

然而，想一想，实现一个相当简单的网络流量基准的一种涉及较少且与平台无关的方式，将是在客户端和实际服务器之间使用某种形式的中间层：基本上是计量的服务器，分析流量并将其重定向到真实服务器。

很像代理服务器（例如[SOCKS](http://en.wikipedia.org/wiki/SOCKS)），因此所有流量都通过您的分析器进行隧道传输，进而可以累积统计数据和其他指标。

像这样的基本版本可能只需使用 netcat 和一些 shell 脚本就可以轻松组合在一起，但更复杂的版本可能会受益于使用 perl 或 python。

对于 SOCKS 服务器的 python 实现，您可能需要查看[pysocks](http://sourceforge.net/projects/pysocks/)。

此外，python 当然也有[扭曲](http://twistedmatrix.com/trac/)：

> Twisted 是一个事件驱动的网络引擎，用 Python 编写并在 MIT 许可下获得许可。

但是，如果您确实需要更多低级信息，您可能真的想研究拦截系统调用。

如果您还需要特定于协议的效率数据，您可能需要查看[tcpdump](http://en.wikipedia.org/wiki/Tcpdump)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-06-16T18:14:18.300

*可能*的答案是使用**[SystemTap](http://sourceware.org/systemtap/)**。在示例脚本中，[nettop](http://sourceware.org/systemtap/wiki/WSNetTop)以类似“top”的方式显示（某些）所需的网络信息，还有[iotime](http://sourceware.org/systemtap/wiki/WSBootTap)脚本以所需的形式显示 I/O 信息。

# debugging - Windows Mobile 6.0 上的 BugTrap 和 RapiDbg

> ID：889230
> 
> 赞同：1
> 
> 时间：2009-05-20T17:32:54.797
> 
> 标签：debugging, windows-mobile, driver, pocketpc, outputdebugstring

我正在尝试将驱动程序和一些应用程序从运行 PocketPC 2003 (Windows CE 4.21) 的 PDA 移植到运行 Windows Mobile 6 (CE 5.2) 的PDA。

有谁知道我是否/如何记录驱动程序发出的 OutputDebugString 调用，而不是使用 Platform Builder 或任何自定义操作系统映像？

移植已完成 99%，但我需要对驱动程序级别发生的事情进行故障排除和调试。

到目前为止，BugTrap (columbo) 和 RapiDbg 的组合使我能够在不需要 Platform Builder 的情况下调试驱动程序。我能够捕获我所有的`OutputDebugString`，通过我的开发机器上的 activesync 提取它们并从那里工作。

显然**bugtrap.exe**不能在 WM6 上运行（它崩溃），我找不到任何新版本。

有没有办法在不需要平台生成器或操作系统调试映像的情况下捕获（转储到文件，通过 USB 发送到主机，......无论如何）OutputDebugString 调用？

我尝试使用 tracetool 框架（参见 sourceforge），将 ODS 调用（幸运的是，我所有的调试语句都使用宏）替换为它`Trace::Debug()->Send`，并且虽然常规 DLL 和应用程序按预期工作，但驱动程序却没有。

# wpf - 无法将菜单项中的命令绑定到命令绑定

> ID：889234
> 
> 赞同：0
> 
> 时间：2009-05-20T17:34:21.923
> 
> 标签：wpf, menuitem, commandbinding

我有以下xaml：

```
<Window x:Class="Isolator.Window1"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="Isolator" Height="394" Width="486" Background="Black" WindowStyle="None" WindowState="Maximized">
    <Window.CommandBindings>
        <CommandBinding Command="Close" Executed="CommandBinding_Executed" CanExecute="CommandBinding_CanExecute"/>
    </Window.CommandBindings>
    <Window.ContextMenu>
        <ContextMenu>
            <MenuItem Header="Stop" Name="StopMenuItem" Click="StopMenuItem_Click" />
            <MenuItem Header="Close" Command="Close"/>

        </ContextMenu>
    </Window.ContextMenu>
    <Grid Loaded="Grid_Loaded">

    </Grid>
</Window> 
```

关闭菜单项指定它应该使用关闭命令。Close 命令绑定指定应为 CanExecute 调用 CommandBinding_CanExecute，但永远不会调用 CommandBinding_CanExecute。关闭菜单项始终处于禁用状态。

我假设绑定没有发生。谁能解释为什么？

如果它与不在可视树中的上下文菜单有关，您如何解决它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-20T17:39:00.650

这个声明`Command="Close"`没有任何作用。您是说命令是字符串“关闭”。这就是为什么它不起作用。

如果在 Window 中定义了 Close 命令实例，请使用`Command="{Binding Close}"`. 或者，如果您使用的是 ApplicationCommands.Close，那么它将是

```
Command="{x:Static ApplicationCommands.Close}" 
```

# ruby-on-rails - has_many 和单表继承

> ID：889250
> 
> 赞同：6
> 
> 时间：2009-05-20T17:37:29.920
> 
> 标签：ruby-on-rails, has-many, single-table-inheritance

我在两个实体 Feeds 和 Posts 之间有一个 has_many 关系。我也有特定类型的帖子、视频和照片。这是使用单表继承在数据库中构建的。

现在我的 Feed 模型指定了 Feed 和 Posts 之间的 has_many 关系（包括子类型）

```
class Feed < ActiveRecord::Base
  has_many :posts
  has_many :photos
  has_many :videos 
```

有没有更好、更传统的方法来指定这个？还是我拥有的东西尽可能简单？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-06-02T14:03:20.227

如果我理解正确，您有帖子，帖子可以是视频或照片。正如 Jaryl 所说，你所拥有的可能是最容易理解/处理的，但是如果你想变得花哨，你可以使用单表继承或多态关联。

STI - 示例（来自 Agile Web Development with Rails 3rd Edition）

```
create_table :people, :force => true do |t|
   t.string :type

   #common attributes
   t.string :name
   t.string :email

   #attributes for type=Customer
   t.decimal :balance, :precision => 10, :scale => 2

   #attributes for type=Employee
   t.integer :reports_to
   t.integer :dept

   #attributes for type=Manager
   #none
end

class Person < ActiveRecord::Base
end

class Customer < Person
end

class Employee < Person
   belongs_to :boss, :class_name => "Manager", :foreign_key => :reports_to
end

class Manager < Person
end 
```

所以如果你创建一个客户

```
Customer.create(:name => 'John Doe', :email => 'john@doe.com', :balance => 78.29) 
```

然后你可以通过人找到它

```
x = Person.find_by_name('John Doe')
x.class #=> Customer
x.email #=> john@doe.com
x.balance #=> 78.29
x.some_customer_class_method # will work because the Person.find method returned a Customer object 
```

所以你可以有

```
class Post < ActiveRecord::Base
end
class Photo < Post
end
class Video < Post
end 
```

然后你可以通过 Post.all 找到它们，但你会得到照片和视频对象（如果你有不是照片或视频的帖子，则发布对象）

**不要忘记 db 表中的字符串 :type**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-21T19:19:24.667

这几乎是你能做的最简单的事情。

好吧，如果照片可以被视为与视频相同，那么也许您可以取消 STI 并使用命名范围来为不同类型的内容提供访问器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-07-08T04:46:59.060

我同意问题中的示例非常简单。它已经在使用 STI 并明确说明了这些关联。

此外，您可以稍后删除 STI，并将 :photos 和 :videos 拆分为各自单独的表，而无需稍微更改 Feed 模型的代码。分数！

# mysql - Mysql排序顺序很奇怪

> ID：889253
> 
> 赞同：0
> 
> 时间：2009-05-20T17:38:42.100
> 
> 标签：mysql, utf-8, sql-order-by

```
SELECT events.title 
FROM events 
ORDER BY events.title DESC 
```

除了桌子最后的几个事件外，我得到了正确的排序。

标题表上的编码是`utf8_general_ci`. 我试过重新输入标题，希望它使用了一些我看不到的奇怪的俄语字符，但它仍然以错误的顺序出现。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-20T18:01:24.177

只是一个疯狂的猜测，但也许你的一些标题在开头有一些空格。

如果这是您的问题，您可以使用

```
Order By TRIM(events.title) DESC 
```

但这会减慢您的查询速度，因为如果您有，MySQL 将无法使用标题上的索引。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-20T18:12:39.800

你能跑吗

```
SELECT HEX(CAST(title AS BINARY))
FROM   events
WHERE  id = @weird_record 
```

并在这里发布输出？

**更新：**

似乎记录很简单`ASCII`，没有奇怪字符的前导空格，并说`Walters Brothers Rebellion`

您能否对出现故障的记录做同样的事情？

请选择一些应该在之前`Walter Brothers`但在之后的记录，反之亦然，然后发布相同查询的结果。

# sql - 具有详细程度的数据建模，其中一些不存在

> ID：889254
> 
> 赞同：1
> 
> 时间：2009-05-20T17:38:50.133
> 
> 标签：sql, datamodel

我正在为轮滑德比联赛做一个数据模型来跟踪他们的比赛。我跟踪诸如单圈时间、每圈罚分、每节罚分和每场比赛罚分之类的事情。

问题是在某些情况下，我只会拥有整体数据；我可能对一场比赛有“每场罚分”，对另一场比赛有“每节罚分”。因此，在最低级别，对于某些比赛，我将拥有非常详细的数据（每次罚分），而在最高级别，我将获得每场比赛的罚分。

当我对某些记录没有详细信息时，我不确定如何建模/使用它来进行报告。我想过这样的事情：

PenaltiesPerMatch MatchID PenaltyCount

PenaltiesPerPeriod MatchID PeriodID PenaltyCount

PenaltiesPerLap MatchID PeriodID LapID PenaltyCount

但我担心的是更高层次的信息可以从低层次得到。我是否重复记录（例如，用每圈罚分的数据填写每个时段的罚分记录，按时段求和？）或保留唯一记录（不要为我已经在罚分中的数据输入每个时段的罚分每圈；通过对周期求和来计算）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-20T17:44:29.343

我要做的是记录您拥有的信息。对于某些匹配，请详细记录它，而对于其他匹配则要详细记录。

当您报告比赛时：

*   计算高细节匹配的每场比赛总和
*   使用来自低细节匹配的每个匹配的总和

以您拥有的最低详细级别存储数据；计算更高的细节级别。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-20T18:17:18.077

您可以将信息保存在一个表中，使用 NULL 值表示您没有达到该级别的数据。您将无法在其上放置主键，因此您需要一个代理键，但您应该能够使用唯一约束。

例如：

```
CREATE TABLE PenaltyCounts
(
    penalty_count_id INT NOT NULL,
    match_id         INT NOT NULL,
    period           TINYINT NULL CHECK (period BETWEEN 1 AND 3),
    lap              SMALLINT NULL,
    penalty_count    SMALLINT NOT NULL,
    CONSTRAINT PK_PenaltyCounts PRIMARY KEY NONCLUSTERED (penalty_count_id),
    CONSTRAINT UI_PenaltyCounts UNIQUE CLUSTERED (match_id, period, lap),
    CONSTRAINT CK_lap_needs_period CHECK (lap IS NULL OR period IS NOT NULL)
) 
```

我还没有看到一个简单的解决方案的一个问题是如何强制他们只能进入一个级别的处罚。例如，他们仍然可以这样做：

```
INSERT INTO PenaltyCounts (penalty_count_id, match_id, period, lap, penalty_count)
VALUES (1, 1, NULL, NULL, 5)
INSERT INTO PenaltyCounts (penalty_count_id, match_id, period, lap, penalty_count)
VALUES (2, 1, 1, NULL, 3)
INSERT INTO PenaltyCounts (penalty_count_id, match_id, period, lap, penalty_count)
VALUES (3, 1, 2, NULL, 2) 
```

这种单表解决方案的优点是可以通过查询一个表找到所有统计信息，并且 GROUP BY 可以很好地汇总所有信息。

您也可以使用单独的表格方法，但将视图放在它们之上以将所有内容放在一起。尽管将数字放入多个级别，但这仍然允许上述问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-20T17:46:00.743

我认为这取决于哪些信息对客户有价值。如果他们想按时期获得信息，那么您应该将其作为单独的记录包含在内。必须区分按时段和按比赛进行的处罚。

我总是受到周期信息的惩罚，然后你可以做一个汇总数据的查询。

如果您的期间始终是一个固定数字，那么您可能只需要在表中做两列而不是一个新表来保存期间信息

# php - 通过 PHP 更改 Mysql 数据库中的值

> ID：889257
> 
> 赞同：0
> 
> 时间：2009-05-20T17:39:12.693
> 
> 标签：php, mysql

大家好，我想通过 PHP 代码更改表（在 mysql 数据库中）中的值。我在表格中有一个名为“已批准”的行，它可以设置为两个选项，“0”（未批准）和“1”（已批准）。我正在创建一个脚本，将批准的个人从“0”更改为“1”。

例如，有一个名为“职位”的不同值，“已批准”将“职位”设置为已批准或未批准（其中已批准设置为 1 或 0）。如果措辞有误，我会尽量说得更清楚。

我想我的问题是我可以让一个单独的“位置”值将其“批准”数据从 0 切换到 1，反之亦然。

谢谢！

编辑/更新：

这是此特定表的转储信息：

```
 CREATE TABLE `positions` (
  `posID` int(10) unsigned NOT NULL auto_increment,
  `postitle` varchar(500) NOT NULL default '',
  `addtitletext` varchar(35) default NULL,
  `description` text NOT NULL,
  `print_website` enum('1','2') NOT NULL default '1',
  `userID` tinyint(4) unsigned NOT NULL default '0',
  `submitted_on` datetime NOT NULL default '0000-00-00 00:00:00',
  `approved_date` date NOT NULL default '0000-00-00',
  `approved` enum('0','1') NOT NULL default '0',
  PRIMARY KEY  (`posID`)
) ENGINE=MyISAM AUTO_INCREMENT=464 DEFAULT CHARSET=latin1;

LOCK TABLES `positions` WRITE;
/*!40000 ALTER TABLE `positions` DISABLE KEYS */;
INSERT INTO `positions` (`posID`,`postitle`,`addtitletext`,`description`,`print_website`,`userID`,`submitted_on`,`approved_date`,`approved`)
VALUES 
```

我试图在此处编辑此代码以使其从未批准更改为已批准（反之亦然）

```
 <? 
include('secure.php');
include('config.php'); 

if (isset($_POST['submitted'])) { 
foreach($_POST AS $key => $value) { $_POST[$key] = mysql_real_escape_string($value); } 
$sql = "UPDATE `positions` SET `approved` =  '{$_POST['approved']}'"; 
mysql_query($sql) or die(mysql_error()); 
echo (mysql_affected_rows()) ? "Edited row.<br />" : "Nothing changed. <br />"; 
echo "<a href='list.php'>Back To Listing</a>"; 
} 
$row = mysql_fetch_array ( mysql_query("SELECT * FROM `positions` WHERE `posID` = '$posID' ")); 

?>

<form action='' method='POST'> 
<p><b>Approved:</b><br /><input type='text' name='approved' value='<?= stripslashes($row['approved']) ?>' /> 
<p><input type='submit' value='Edit Row' /><input type='hidden' value='1' name='submitted' /> 
</form> 
```

如果它有帮助，太棒了，但如果它更令人困惑，对不起哈哈。

编辑：这是我所拥有的，但得到一个空白页（我知道的错误）

```
<? 
include('secure.php');
include('config.php'); 
if (isset($_GET['posID']) ) { 
$posID = (int) $_GET['posID']; 
if (isset($_POST['submitted'])) { 
foreach($_POST AS $key => $value) { $_POST[$key] = mysql_real_escape_string($value); } 
$sql = "UPDATE `positions` SET `approved` =  '{$_POST['approved']}'  WHERE `posID` = '$posID'"; 
mysql_query($sql) or die(mysql_error()); 
echo (mysql_affected_rows()) ? "Edited row.<br />" : "Nothing changed. <br />"; 
echo "<a href='list.php'>Back To Listing</a>"; 
} 

<form action='' method='POST'> 
<p><b>Approved:</b><br /><input type='text' name='approved' value='<?= stripslashes($row['approved']) ?>' /> 
<p><input type='submit' value='Edit Row' /><input type='hidden' value='1' name='submitted' /> 
</form> 
<? } ?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-20T17:48:18.867

我不完全确定您要做什么，因为听起来批准是表格中的一列，而不是一行。如果您想执行以下操作：

```
function toggle_approved($position_id) {
$query = "UPDATE positions SET approved = !approved WHERE posID = '$position_id'";
// execute the query here with your mysql_query() call
} 
```

我假设你有一些执行 mysql 查询的方法，如果没有看到[这个链接](http://www.w3schools.com/PHP/php_mysql_intro.asp)。还要确保使用表名和位置字段名。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-20T17:50:24.510

是的。你会做这样的事情：

```
UPDATE table_name
SET approved=value
WHERE position=some_value 
```

学习 SQL 和 PHP 的好地方是 w3schools：[http ://www.w3schools.com/sql/default.asp](http://www.w3schools.com/sql/default.asp)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-21T15:59:36.117

弄清楚我做错了什么！这是我的代码，它实际上是上一页中我忽略修复的内容（愚蠢的小链接错误）。

```
<? 
include('secure.php');
include('config.php'); 

if (isset($_GET['posID']) ) { 
$posID = (int) $_GET['posID'];
if (isset($_POST['submitted'])) { 
$sql = "UPDATE `positions` SET  `approved` =  '{$_POST['approved']}'   WHERE `posID` = '$posID'"; 
mysql_query($sql) or die(mysql_error()); 
echo (mysql_affected_rows()) ? "Edited row.<br />" : "Nothing changed. <br />"; 
echo "<a href='list.php'>Back To Listing</a>"; 
} 
$row = mysql_fetch_array ( mysql_query("SELECT `approve` FROM `positions` WHERE `posID` = '$posID' ")); 
//echo "<p><b>Department</p></b>";
//$query="SELECT deptname,deptID FROM depts";

//$result = mysql_query ($query);
//echo "<select name=depts value=''>Department</option>";

//while($nt=mysql_fetch_array($result)){
//echo "<option value=$nt[deptID]>$nt[deptname]</option>";
/* Option values are added by looping through the array */
//}
//echo "</select>";
//`department` =  '{$_POST['department']}'

?>

<form action='' method='POST'> 
<p><b>Approved:</b><br /><input type='text' name='approved' value='<?= stripslashes($row['approved']) ?>' /> 
<p><input type='submit' value='Edit Row' /><input type='hidden' value='1' name='submitted' /> 
</form> 

<? } ?> 
```

# c++ - 迭代器与反向迭代器

> ID：889262
> 
> 赞同：7
> 
> 时间：2009-05-20T17:40:11.100
> 
> 标签：c++, performance, stl, stdmap

我`std::map`用来存储很多元素（元素对），我有一个“小”的疑问。在 my或`std::map`上迭代所有元素更有效的是什么？`iterator``reverse_iterator`

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2010-03-31T00:09:50.793

根据记录，**取消引用`reverse_iterator`**`std::map`和`std::set`容器的速度是使用-O3 gcc 3.4.6 和 MSVC 在 Intel/AMD 处理器上的**两倍**`iterator`（在 PPC 架构上几乎是速度的 3 倍。）同样适用`const_reverse_iterator`于`const_iterator`. 这是因为`reverse_iterator` *实际上*指向紧跟在要取消引用的树节点之后的树节点，因此需要额外的工作。 `std::vector`迭代器表现出更温和的差异（`reverse_iterator`在 PPC 上仅慢约 30%，在 Intel/AMD 上几乎无法区分。）顺便说一下，`std::vector`迭代器比`std::map`或`std::set`迭代器快 20 倍。

```
#include <set>
#include <vector>
#include <stdio.h>
#ifdef _WIN32
#include <sys/timeb.h>
#else
#include <sys/time.h>
#endif
#include <time.h>

#define CONTAINER std::set< int >

double
mygettime(void) {
# ifdef _WIN32
  struct _timeb tb;
  _ftime(&tb);
  return (double)tb.time + (0.001 * (double)tb.millitm);
# else
  struct timeval tv;
  if(gettimeofday(&tv, 0) < 0) {
    perror("oops");
  }
  return (double)tv.tv_sec + (0.000001 * (double)tv.tv_usec);
# endif
}

int main() {
  int i, x = 0;
  CONTAINER bla;
  for (i = 0; i < 10000; bla.insert(bla.end(), i++)) ;

  double t1 = mygettime();

  for (i = 0; i < 100; ++i) {
    for (CONTAINER::iterator it = bla.begin(); it != bla.end(); ++it) {
      x ^= *it;
    }
  }

  printf("forward: %f\n", mygettime() - t1);

  double t2 = mygettime();

  for (i = 0; i < 100; ++i) {
    for (CONTAINER::reverse_iterator it = bla.rbegin(); it != bla.rend(); ++it) {
      x ^= *it;
    }
  }

  printf("reverse: %f\n", mygettime() - t2);

  return 0;
} 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2009-05-20T17:44:39.857

真的有关系吗？这些是您必须尽量避免恕我直言的微优化类型。此外，即使地图中大量元素的迭代时间发生变化，您尝试遍历如此大地图的所有元素这一事实也意味着您很可能选择了错误的数据结构。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-20T17:49:37.087

除非您分析了您的代码并发现存在显着差异，否则我不会担心它。

> “过早的优化是万恶之源。” ——唐纳德·克努斯

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-20T17:50:00.017

很可能没有区别。std::reverse_iterator 只是一个模板 shim，它在编译时将 ++'s 转换为 --'s。

对于向量或其他连续存储容器，前向迭代器与缓存的交互可能比反向迭代器稍微好一点（你不太可能检测到它），但对于基于树的容器，它不会产生任何影响完全不同——不会有任何可利用的参考位置。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-20T17:50:16.023

我认为使用 reverse_iterator 没有意义；这是反直觉的。

这会使代码更难理解，有人会看代码然后“wtf”；如果您需要发表评论来解释原因，这可能意味着它不是一个好的代码开始。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2009-05-20T17:59:04.273

我想知道是否需要迭代。Map 包含键值对，通常您将其用于查找。如果由于某些原因您仍然需要迭代地图（可能正在删除地图中包含的指针等），那么您可以使用[std::for_each](http://www.sgi.com/tech/stl/for_each.html)。忘记微优化，您可以尝试增加代码的可读性。

# ruby-on-rails - 在 ruby on rails 中使用 attachment_fu 将文件保存在公用文件夹之外

> ID：889267
> 
> 赞同：1
> 
> 时间：2009-05-20T17:40:47.773
> 
> 标签：ruby-on-rails, path, attachment-fu

我在 Rails 应用程序中使用 attachment_fu 来处理文件上传，我想将它们保存在应用程序根目录中名为附件的目录中。但是，我似乎无法让这个插件将文件保存在公共目录之外的任何其他目录中。谁能告诉我该怎么做？

谢谢

-C

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-20T17:51:14.320

你尝试过什么吗？

```
has_attachment :storage => :file_system, :path_prefix => 'attachments/' 
```

# sql - 如何在 ORDER BY 子句中使用 cfqueryparam？

> ID：889272
> 
> 赞同：7
> 
> 时间：2009-05-20T17:41:43.000
> 
> 标签：sql, coldfusion, cfquery, cfqueryparam

我正在努力成为一名优秀的 CF Web 开发人员，并使用`<cfqueryparam>`所有 FORM 或 URL 元素来实现我的 SQL 查询。

在这种情况下，我试图让用户动态控制 ORDER BY 子句。

```
<cfquery datasource="MyDSN" name="qIncidents">
  SELECT IncidentID, AnimalID, IntakeDate, DxDate, OutcomeDate
  FROM Incidents
  WHERE ShelterID = <cfqueryparam cfsqltype="cf_sql_integer" value="#Arguments.ShelterID#">
  ORDER BY <cfqueryparam cfsqltype="cf_sql_varchar" value="#SortBy#">
</cfquery> 
```

当我这样做时，我收到以下错误：

> 由 ORDER BY 编号 1 标识的 SELECT 项包含一个变量，作为标识列位置的表达式的一部分。只有在通过引用列名的表达式进行排序时才允许使用变量。

关于如何安全地做到这一点的任何建议？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2009-05-20T17:46:19.650

不幸的是，您不能在 Order By 子句中直接使用 CFQUERYPARAM。

如果您想动态地使用 Order By 但仍然可以安全地使用，您可以设置 CFSWITCH 或类似的结构来根据某些条件（例如 URL 变量）更改 SortBy 变量。与往常一样，不要直接从用户传递任何值，只需查看用户的输入并基于此从预定的可能值列表中进行选择。然后，只需使用标准语法：

```
ORDER BY #SortBy# 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-21T12:57:48.527

我将扩展 Aaron 的答案。我要做的一件事是使用 listfindnocase() 来确保传递给 order by 子句的参数是有效的：

```
<cfset variables.safeSortColumn = "name">
<cfset variables.safeSortOrder = "desc">

<cfparam name="url.sortcolumn" type="string" default="#variables.safeSortColumn#">
<cfparam name="url.sortorder" type="string" default="#variables.safeSortOrder#">

<cfif listfindnocase("name,age,address", url.sortcolumn)>
    <cfset variables.safeSortColumn = url.sortcolumn>
</cfif>

<cfif listfindnocase("desc,asc", url.sortorder)>
    <cfset variables.safeSortOrder = url.sortorder>
</cfif>

<cfquery>
select *
from mytable
order by #variables.safeSortcolumn# #variables.safeSortorder#
</cfquery> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-21T18:18:40.610

将序数值用于列引用的问题是它（我相信）是执行创建表 SQL 语句时的序数值 - 因此，当您随着时间的推移将列添加到数据库表中时，您使用的 GUI 工具显示列可能不代表其实际的序数值。我真的不会为此使用 cfqueryparam。

我确实喜欢在请求变量（url、form）中使用数字来指定要排序的列，然后在开关中使用它并将其转换为实际的列名 - 这样你就不会将列名暴露给用户。

至于何时/为什么使用 cfqueryparam，请记住它不仅仅是关于输入验证和防止 SQL 注入（尽管这是一个非常好的奖励） - 使用 cfqueryparam，数据库的底层 SQL 使用 SQL 绑定通过驱动程序发送回variables - 占位符值，因此数据库优化器可以确定以更通用的格式使用哪个索引......所以当您发送这样的 SQL 语句时：SELECT * FROM product WHERE ID=1 和 SELECT * FROM product WHERE ID=2优化器运行两次。但是使用绑定变量，SQL 看起来像这样 SELECT * FROM product WHERE ID=? (?=1) 和 SELECT * FROM product WHERE ID=? (?=2) 所以优化器可以使用第一次分析的缓存结果来准确地知道在第二次查询中使用什么索引。根据 SQL 和数据库的复杂性，这可以节省大量时间。以我的经验，它对 where 子句中的 oracle 和日期/时间列非常有用。

至于在哪里使用cfqueryparam，它可以在哪里使用SQL绑定变量......

乔恩

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-21T16:46:07.240

关于在 MySQL 的 order 子句中使用“cfqueryparam”的评论。是的，我相信 MySQL 数据源允许这样做。虽然使用列*ordinal*，而不是列名（它似乎被视为一个常量字符串）。

不幸的是，它似乎根本不适用于 MS SQL 数据源。至少据我所知不是。

```
<!--- this works --->
<cfset url.sortColumnNumber = "3">
<cfquery name="getDataByPosition" datasource="MySQLDSN">
   SELECT  RecordID, ProductName, DateAdded
   FROM TestTable
   ORDER BY <cfqueryparam value="#url.sortColumnNumber#" cfsqltype="cf_sql_integer"> ASC
</cfquery>
<cfdump var="#getDataByPosition#">

<!--- this does NOT work --->
<cfset url.sortColumnName = "DateAdded">
<cfquery name="getDataByName" datasource="MySQLDSN">
   SELECT  RecordID, ProductName, DateAdded
   FROM    TestTable
   ORDER BY <cfqueryparam value="DateAdded" cfsqltype="cf_sql_varchar"> ASC
</cfquery>
<cfdump var="#getDataByName#"> 
```

**更新：**关于序数的评论：不，我相信它指的是选择列表中的列位置，而不是基础表。所以应该没问题。

是的，我同意 sql 注入保护不是 cfqueryparam 的主要目的。所以绑定变量的描述是一个很好的补充。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-06-24T22:02:10.067

以为我会在这个问题上抛出更少的代码：

```
<cfset sortColumns = {IncidentID = "IncidentID", AnimalID = "AnimalID", IntakeDate = "IntakeDate", DxDate = "DxDate", OutcomeDate = "OutcomeDate"}>
<cfset sortDirections = {ASC = "ASC", DESC = "DESC"}>

<cfquery datasource="MyDSN" name="qIncidents">
    SELECT IncidentID, AnimalID, IntakeDate, DxDate, OutcomeDate
    FROM Incidents
    WHERE ShelterID = <cfqueryparam cfsqltype="cf_sql_integer" value="#Arguments.ShelterID#">
    ORDER BY #sortColumns[sortBy]# #sortDirections[sortDirection]#
</cfquery> 
```

sortBy 和 sortDirection 通过 URL 或任何地方进入。

我喜欢这个，因为它很干净而且你不能通过 ORDER BY 子句注入任何东西。

任何意见？

# jquery - sIFR 编码不间断空格字符 - %20

> ID：889277
> 
> 赞同：0
> 
> 时间：2009-05-20T17:42:22.560
> 
> 标签：jquery, fonts, sifr

用 OpensIFRr 转换 ttf 时一定是我做错了，但我在所有 sIFR 的文本中看到 %20 个字符用于不间断空格。我正在使用带有以下内容的 jQuery sIFR 插件（3.04）：

```
<div><h1>My Example Text</h1></div>
...    
<script type="text/javascript">
        <!--
            var $j = jQuery;
            $j(document).ready(function(){
                    $j('h1').sifr({
                        path: '/fonts/',
                        font: 'fancy_script'
                    });
            });
        //-->
</script> 
```

无论我使用哪种字体都会发生。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-13T23:07:52.573

所以几周前我遇到了这个问题，并决定恢复到我在以前的网站上成功使用过的这个插件的旧版本。我再也找不到旧版本了，所以我认为是时候做一些有用的事情了，并决定解决这个问题。在对程序进行了一些挖掘之后，我发现了发生了什么。

在构建 PARAM 标记的过程中，swfobject.js 插件会对传递给它的数据进行 urlencode。不确定尼尔这样做的原因是什么，但如果绕过这一点，在最初的测试中，一切似乎都可以正常工作。

说什么？

在 swfobject.js 文件中，在此处查找此行：

```
bArr.push([b, '=', win.escape(win.escape(paramAttributes[a][b]))].join(x)); 
```

并将其更改为：

```
bArr.push([b, '=', paramAttributes[a][b]].join(x)); 
```

我要给作者写一封电子邮件，看看他是否想在他的下一个正式版本中包含这个修复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-20T21:28:43.493

对我来说，这似乎是 jQuery 插件的问题。尝试使用官方 sIFR 版本，看看是否有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-10-02T08:31:15.690

感谢您的修复，对我很有用 - 还修复了德国元音变音的问题，如 äöü...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2010-04-12T05:59:41.517

好像有一个重复的转义电话。

改变

bArr.push([b, '=', win.escape(win.escape(paramAttributes[a][b]))].join(x));

到

bArr.push([b, '=', win.escape(paramAttributes[a][b])].join(x));

也有效，并且可以防止其他问题（转义首先解决）。

# asp.net - 两个 ASP.NET Postback 相关的问题

> ID：889288
> 
> 赞同：0
> 
> 时间：2009-05-20T17:46:10.370
> 
> 标签：asp.net, javascript

**问题 1）** 我有一个控件，我通过使用如下语句从服务器端添加一个属性：

```
ControlName.Attributes.Add("myTestAttribute", "") 
```

在客户端，我使用 Javascript 函数修改此属性的值：

```
Document.getElementById(ControlName).setAttribute("myTestAttribute", “Hello Server!!”); 
```

我的问题是，当我尝试访问 Postback 处理函数上的属性值时，该属性为空。我错过了一些步骤吗？

**问题 2)** 是否可以从 Postback 处理函数内部获取服务器端页面的完整 HTML 代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-20T18:17:04.067

如果 javascript 修改了页面上的元素，它们对服务器是不可见的。当回发发生时，服务器可用的唯一数据是页面上表单中发送的数据。

ASP.net 处理标准表单元素，如文本框、下拉列表等，方法是将它们的值放入一个名为 viewstate 的隐藏字段中（这通常是经过编码的，因此无法直接读取）。

如果您希望通过 javascript 修改的页面元素对服务器可见，您可以编写新的隐藏表单元素并从 Request[string name] 数组中检索它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-20T17:48:20.927

1.  将该属性添加代码放入 Page_Init
2.  没有

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-20T18:12:21.550

在回答问题 2 时，如果您想在回发后知道它们的值，您可以将这些属性的状态保留在视图状态中。

# build - 您将什么用于暂存/部署工件服务器？

> ID：889299
> 
> 赞同：1
> 
> 时间：2009-05-20T17:48:29.710
> 
> 标签：build, continuous-integration, release, deployment, staging

我正在考虑编写自己的发布存储服务器，在此之前，我想知道人们使用什么来查看集成而不是创建。

**那么，您使用什么来存储构建以供内部访问？**

我正在寻找一个网络应用程序，它允许我上传工件，然后通过各种标签引用它们，以便我可以按组件或发布工具将它们组合在一起。我还希望通过准备或升级来控制每个构建的访问控制。

我将登台定义为**将构建的工件放在服务器上供用户社区访问**。工件通常是包含应用程序或库 + 文档的 zip 文件。用户社区是开发人员、QA 和服务交付/运营。基本上，创作者、检查者和外部用户。

我们在发布工具中单独发布工件并作为组发布（例如，发布 1.1 包含 foo 1.0.1 和 bar 1.0.7）。根据工件，我们可能希望限制访问。操作应该无法访问预发布的版本，我们可能想要跟踪谁下载了有限的可用性版本。

所以，我希望找到一种工具，它可以通过良好的可扩展设计完成我想要的大部分工作，这样我就可以添加我没有的东西。

有人知道用于管理构建后构建的好工具吗？

示例可能是：

*   quickbuild/lunt 构建
*   团队锻造
*   打造锻造
*   Jira 和汇合作为一组
*   声型联结
*   自家种植
*   SVN 存储库使用分支来提升来自 dev->Qa->GA 的构建

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-06-16T13:27:02.153

彼得，

由于您没有得到很多答案，我将让您了解[AnthillPro](http://www.anthillpro.com)，我为它的开发人员 Urbancode 工作。

好的，免责声明，AnthillPro 旨在为您正在讨论的广泛受众提供服务 - 开发人员、检查人员和操作人员。与您列出的工具相比，AnthillPro 类似于 BuildForge（我们的主要竞争对手）或具有紧密集成的工件存储库（如 nexus）的快速构建。因此构建运行，您可以在一个漂亮的 web ui 中查看构建的结果 - 以及构建工件。具有正确权限的用户可以运行辅助过程，例如针对先前构建的部署或测试 - 以及来自所选构建的工件。

目标是管理从创建到各种测试工具和部署环境再到发布到生产的整个构建生命周期。它不是一个讨厌的大套件，相反，我们与 Subversion 和 Jira 等工具集成，以确保每个版本都有源和问题单更改清单。

您的发布包将很好地映射到 AnthillPro 的内置依赖系统。我们经常看到客户创建的虚拟项目只需要很少或不需要源代码，而是将组件关联或打包到发布包中。

AnthillPro 可能无法满足您的要求，一般来说，我们会允许操作人员查看预发布版本。但是，您可以通过未标记为“预发布”的任何构建的操作添加将立即失败/阻止尝试发布的规则。AnthillPro 的状态系统允许团队使用自定义标记标记构建，例如“在 QA”或“已批准发布”。结合有关运行工作流程的规则，这应该可以为您提供所需的控制。如果某些项目特别敏感，您只需使用基于角色的安全性将其锁定。

希望这能让你有所了解。

——埃里克

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-17T20:59:24.727

我的选择是

构建自动化系统，如 AntHill、QuickBuild、TeamForge、BuildForge

*   文件服务器
*   源代码控制服务器
*   maven 存储库管理器（nexus，archiva）

我的目标是

*   按多个标准（工件类型、发布工具、阶段/阶段）进行组构建
*   从 dev -> qa -> 发布促进构建
*   为开发构建、质量保证就绪构建、生产就绪构建提供访问控制

我将关注源代码控制作为文件服务器（使用 svn）或 maven repos 管理器作为使用 nexus 的文件服务器。理据如下：

*   尽量减少努力
*   最小化成本
*   使用我可以在需要时轻松扩展的东西（因为我确信我的要求会改变）。
*   maven 的使用正在增长，最终将成为这里的主导构建技术。

谢谢你提供的详情。

# c# - 如何获取堆栈帧的执行对象？

> ID：889310
> 
> 赞同：13
> 
> 时间：2009-05-20T17:50:17.757
> 
> 标签：c#, reflection, stack-trace, stack-frame

使用反射时，可以使用 System.Diagnostics.StackTrace 获取调用堆栈（除此之外，由于 JIT 优化，它可能是一个粗略的近似值）并检查包含的 StackFrame 对象。

如何获取对堆栈帧中的方法正在执行的对象（this 指针）的引用？

我知道我可以通过在堆栈帧对象上调用 GetMethod() 来获取 MethodBase，但我正在寻找的是类似于 GetObject() 的东西（如果方法是静态的，它自然会返回 null）。似乎只能查询堆栈帧对象以获取静态确定的信息，例如方法信息、原始文件等。

VS 调试器知道（尽管它可能使用另一种获取调用堆栈跟踪的方法），因为可以双击调用堆栈窗口中的任何堆栈帧并查看本地和类字段的值。

编辑：澄清：我想要调用该方法的*对象**实例。***即：如果方法 Foo() 在调用堆栈上的某处对对象实例 A 调用，并且它级联到我执行堆栈跟踪的方法，我想从执行堆栈跟踪的位置获取对 A 的引用。（不是方法基的声明类型）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-20T18:24:56.280

我很确定这是不可能的。原因如下：

1.  这可能会破坏类型安全，因为任何人都可以查找框架，获取对象，而不管他们正在执行哪个 AppDomain\Thread 或他们拥有的权限。

2.  ' `this`' (C#) 标识符实际上只是实例方法的一个参数（第一个），所以实际上静态方法和实例方法之间没有区别，编译器会魔法将权限传递`this`给实例方法，这当然意味着您需要访问所有方法参数才能获取`this`对象。（`StackFrame`不支持）

可以通过使用`unsafe`代码获取实例方法的第一个参数的指针，然后将其转换为正确的类型，但我不知道如何做到这一点，只是一个想法。

顺便说一句，您可以想象实例方法在被编译为 C# 3.0 扩展方法后，它们将`this`指针作为第一个参数。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-10T08:56:25.467

可以获得对`thiscall`对象的引用，但不能仅使用 .NET 代码。必须涉及本机代码。即使使用动态类和 System.Relection.Emit 命名空间，.NET 也没有工具来访问其他方法评估堆栈和参数。

另一方面，如果您反汇编您的 .NET 方法，您可以看到此引用根本没有在物理堆栈上传递。`Thiscall`引用存储在`ECX`( `RCX`for x64) 寄存器中。因此，可以从您的方法爬上堆栈到要从中获取`thiscall`对象的方法。然后在该方法的机器代码中查找将寄存器ECX（RCX）保存在堆栈中的指令，并从该指令中获取该引用所在的相对地址。

当然，爬升的方法在 x32 和 x64 应用中是截然不同的。要生成这样的函数，您不仅必须使用 C#，还必须使用汇编代码，并记住 x64 下不允许内联汇编；它必须是一个完整的汇编模块。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2009-05-20T18:05:45.417

我不确定我是否完全理解你想要什么，但如果你想知道某个堆栈帧的方法声明的类型，我认为这段代码会返回：

```
StackTrace trace = new StackTrace();    
Type methodOwner = trace.GetFrame(0).GetMethod().DeclaringType; 
```

您当然需要传递您感兴趣的帧的索引（我以 0 为例）。

# url - 描述性 URL 与基本 URL

> ID：889312
> 
> 赞同：3
> 
> 时间：2009-05-20T17:50:30.580
> 
> 标签：url, seo, friendly-url

我有一个网站，并且我对所有链接都使用了干净的 URL。我想知道关于简短的基本 URL 与较长的描述性 URL 的意见是什么。

例如，如果我的网站是关于乔治亚斗牛犬足球新闻的，那么哪个更适合 SEO？

**[http://www.example.com/news](http://www.example.com/news)**

或者

**[http://www.example.com/georgia-bulldog-football-news](http://www.example.com/georgia-bulldog-football-news)**

我已经读了很多书，但是我对简单与描述性的因素感到困惑。任何人都可以根据SEO经验发表意见吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-20T17:52:49.967

*描述性格式，因为搜索引擎可以在*URL 中提取关键字。除此之外，我认为没有太大区别。我个人更喜欢简单的格式，但我对 URL 很着迷！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-20T19:58:20.367

从最终用户的角度来考虑。

我不知道谷歌在其排名中真正使用了多少 URL。这是很明显的欺骗（如关键字），我怀疑它在他们的算法中很低。他们所做的核心是计算传入链接，并尝试识别实际页面内容的含义。

但用户喜欢可读的 URL。它给了他们一个暗示，他们将得到什么。我知道可读的 URL 极大地增加了我点击某些东西的可能性（比如在电子邮件中）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-20T17:54:55.313

有关此主题的详细信息，请参见[此处](https://stackoverflow.com/questions/47427/why-do-some-websites-add-slugs-to-the-end-of-urls)和[此处。](https://stackoverflow.com/search?q=url+seo)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-20T17:55:10.460

除了谷歌，没有人确切知道这对排名有多少影响，但它有帮助，[谷歌建议你使用连字符](http://www.google.com/support/webmasters/bin/answer.py?hl=en&answer=76329)（正如你所展示的那样）。这也往往会增加搜索结果页面的点击率。我发现这篇文章非常有用：

[http://searchengineland.com/supercharge-your-urls-for-maximum-seo-impact-14006](http://searchengineland.com/supercharge-your-urls-for-maximum-seo-impact-14006)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-06-03T03:26:51.743

可读性很好，可能有助于您的排名。在您的示例中，确切的域很重要，例如

georgiabulldogs.com/news

和

southcollegesports.com/news

会给用户留下非常不同的期望。

在某些情况下，可键入性也很重要，而且在您希望人们输入 URL 的任何时候，长连字符或带有 ID 的 URL 都很糟糕。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-06-03T03:15:58.083

我喜欢第二个。

No.1 从 SEO 的角度来看，如果你在你的 URL 中添加关键字会更好。（添加关键字比 null 更好，虽然不确定这在排名中到底有多少）并采取 SRACKOVERFLOW.COM 正在做相同。

No.2 从访问者的角度来看，第二个是可读的。这对最终用户有好处，谷歌没有理由不计算这个元素！

# iphone - iPhone 通知图标

> ID：889316
> 
> 赞同：4
> 
> 时间：2009-05-20T17:51:15.210
> 
> 标签：iphone, icons

在我的程序图标上，我想显示有多少显示一个数字，例如在 AppStore 程序图标上，它显示有多少可用更新。我怎样才能在我自己的程序图标上实现这个？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-05-20T18:01:13.490

您的应用程序可以通过调用添加徽章图标编号：

```
[UIApplication sharedApplication].applicationIconBadgeNumber = 1; // any NSInteger 
```

这在[iPhone 2.0](http://developer.apple.com/iphone/library/documentation/UIKit/Reference/UIApplication_Class/Reference/Reference.html#//apple_ref/occ/instp/UIApplication/applicationIconBadgeNumber)中可用，但在 3.0 中，应用程序不必运行即可使用推送通知服务更新号码（需要云中的服务器）。

# tfs - 与 TFS 合并后如何处理分支

> ID：889317
> 
> 赞同：38
> 
> 时间：2009-05-20T17:51:18.317
> 
> 标签：tfs

将分支合并回“主干”后，大多数人对分支做了什么。直接删掉？把它移到另一个区域？改变它的权限？

我们担心的是，在合并完成后，离开并且不阅读邮件的开发人员可能会来工作并继续在分支上工作。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2009-05-21T08:12:12.753

一旦分支肯定死了，那么我想删除它们。如有必要，您始终可以取消删除 TFS 中的某些内容（选项、源代码管理、显示已删除项目）。开发人员在该领域工作时没有意识到它可能会出现一些奇怪的行为（即，当他们执行“获取最新”时文件消失了）但是他们很快就会发现某些事情已经发生了。

也就是说，有时可能需要一段时间才能确保分支肯定已经死亡，在这种情况下，更改分支的权限以便只有有限数量的人可以编辑该分支上的文件是一种方便的技术。您可以让一个人使用签出锁锁定分支中的所有文件，但我没有发现在冻结分支时效果太好 - 权限似乎效果更好，因此您不必拥有一堆挂起的更改（锁）来管理分支中的所有文件，并且在冻结时您可以让多个人在处理它。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-05-20T17:52:57.827

一旦我们确定合并成功，我们就会删除分支。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2010-03-15T20:40:32.637

我们将它们移动到存档文件夹。我们也应该更改权限。

# javascript - 如何使用 JavaScript 近似计算网站的连接速度？

> ID：889319
> 
> 赞同：5
> 
> 时间：2009-05-20T17:51:43.557
> 
> 标签：javascript, connection, widget

如何使用 JavaScript 近似计算网站的连接速度？

我想创建一个类似的 javascript 小部件，它将计算打开当前打开页面的速度。

我在问这是否可以仅使用 javascript 来完成，这个想法是什么。

**更新**

请注意，页面大小始终为未知。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-05-20T18:01:03.427

[这](http://stimpy77.spaces.live.com/blog/cns!FE05918FD4D775C5!382.entry)是一个将 AJAX 与 .Net 后端结合使用的示例，尽管它可以是任何东西。

[这](http://www.phaster.com/golden_hill_free_web/ghfw_connection_speed.shtml)是一个使用图像的更简单示例。

关键是要有一个已知大小的页面/对象，并在浏览器检索它时捕获开始和结束时间。然后只需将大小除以某个 [时间单位] 即可得到每个 [时间单位] 的 [大小]。然后使用数学将其转换为您想要的任何内容。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2009-05-20T17:57:31.703

当然。

```
<script>
    startTime = Date.now();
    window.onload = function(){
        endTime = Date.now();
        //Time in ms between opening page, and loading all the date
        alert(endTime - startTime)
    };
</script> 
```

现在来近似速度。静态你知道让我们说页面是200kb。

```
var kbps = 200 / (endTime - startTime * 1000); 
```

# error-handling - Struts2 Version 2.0.x 处理未知动作

> ID：889322
> 
> 赞同：0
> 
> 时间：2009-05-20T17:51:47.707
> 
> 标签：error-handling, struts2

在 struts2 版本 2.1.x 中，有一个新的 UnknownHandler 会在请求到达并且找不到动作名称时启动。

问题是......如果存在于 2.0.x 版本中的等效机制是什么？

我最近从检查日志文件中注意到，当操作名称未正确解析时会引发异常，这实际上会导致一些问题。是否有用于处理此问题的应用程序范围的设置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-20T17:59:44.633

通配符默认值还是操作默认值？

[http://struts.apache.org/2.0.14/docs/action-configuration.html#ActionConfiguration-WildcardMethod](http://struts.apache.org/2.0.14/docs/action-configuration.html#ActionConfiguration-WildcardMethod)

```
<action name="*">
  <result>/{1}.jsp</result>
</action> 
```

...

```
<package name="Hello" extends="action-default">

    <default-action-ref name="UnderConstruction">

    <action name="UnderConstruction">
        <result>/UnderConstruction.jsp</result>
    </action>

    ... 
```

# asp.net - 向 SharePoint Web 控件添加属性

> ID：889323
> 
> 赞同：2
> 
> 时间：2009-05-20T17:51:58.050
> 
> 标签：asp.net, javascript, sharepoint, web-controls

我正在尝试向 SharePoint Web 控件添加属性：

Microsoft.SharePoint.WebControls.BooleanField 基本上呈现为 html 输入复选框控件。

如何为此添加属性？比如一个事件？

通常对于 asp.net web 控件，您可以这样做：

```
sampleControl.Attributes.Add("onclick", "alert('test');"); 
```

有任何想法吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-21T06:31:07.563

附加到 asp.net 控件的属性不一定会复制到呈现的 html 控件。如果在控件上设置属性没有达到预期的效果，您需要使用 javascript 来查找呈现的 html 控件并添加属性客户端 - 使用 jQuery 很容易。

# c++ - 如何确保在 C++ 的派生类中覆盖（隐藏）了一个方法？

> ID：889324
> 
> 赞同：4
> 
> 时间：2009-05-20T17:52:08.860
> 
> 标签：c++, polymorphism

```
class Base {

    public:
         void foo() const {
             std::cout << "foo const" << std::endl;
         }

};

class Derived : public Base {

  public:
         void foo()  {
             std::cout << "foo"<< std::endl;
         }

 } 
```

我想确保 foo() const 为 Base 正确隐藏。是的，这是个坏主意，也许我应该让 Base::foo() const 成为纯虚拟，以要求 Dervied::foo() 正确覆盖——但是假设我不能让 Base::foo() const pure虚拟的。有没有更好的方法来确保 Base::foo() const 正确隐藏在 Derived 中？

编辑：我想确保在 Derived 中我正确隐藏了基本实现。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-20T18:00:01.073

只需在派生类中定义一个成员函数 foo，就可以隐藏基类中的所有 foo 函数。

您需要稍微细化一下这个问题——您是否担心派生类中的 foo 不是基类中 foo 的适当替代品？我很难确定你真正想要的是什么。

**编辑：**根据您的编辑和其他评论，我认为您对隐藏在 C++ 中的工作方式存在误解。在这种情况下，一个函数是 const 而另一个不是 - 一旦 C++ 在派生类中找到一个函数 foo ，它就会停止寻找其他任何地方！这对人们来说通常是一个巨大的陷阱。考虑以下：

```
class Base
{
    void foo(double d)
    {
        cout << d;
    }
};
class Derived : public Base
{
    void foo(int i)
    {
        cout << i;
    }
};

Derived obj;
obj.foo(123.456); 
```

你认为输出是什么？这是123！你可能会收到一个编译器警告，告诉你双精度值将被截断。尽管采用双精度的函数签名显然是更好的匹配，但从未考虑过它 - 它已被隐藏。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-20T17:57:08.380

就 C++ 而言，“void foo() const”和“void foo()”是两个完全不同的函数。这就是为什么您看不到派生的“foo”将“foo”隐藏在 Base 中的原因。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-20T18:00:02.463

您确定要从 Base 中隐藏 foo() 吗？如果您想利用多态性，您需要将 foo() 的基本版本设为虚拟。不过，它不必是纯粹的。否则你会得到静态绑定——你想要吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-20T17:55:35.687

如果您不想使其成为纯虚拟并因此强制实现，您可能只是让类`foo()`中的主体`Base`立即抛出异常。这样做的目的是强制任何实现者和用户实现覆盖，或者在他们尝试使用它时让它崩溃。

我以前见过这样做，虽然它有点难看，但它确实有效。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-20T18:25:34.173

如果我正确理解了您的问题，那么您是在问如何确保`Derived`类强制覆盖该方法，而不是使该方法纯在`Base`类中。

通过确保所有派生类都提供方法的实现，恕我直言，您暗示`Base`类中的方法实际上没有用于任何目的。对象必须调用`Derived`方法的任何类版本`foo()`。因此，在我看来，该方法应该是纯虚拟的。我认为没有其他方法可以实现这一目标，我相信。

另外，请注意，在您的示例中，您更改了`foo()`in`Base`和的签名`Derived`。这使得`Base`类方法在`Derived`类中是不可见的。除非您使用`using Base::foo`，否则该方法`foo()`对类是不可见的`Derived`。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-20T19:30:51.670

在 Base::foo() 中，您可以执行以下操作：

```
assert (dynamic_cast<const Derived*> (this) == NULL); 
```

但它存在三个问题：

1.  它需要对 Base 类进行更改，该更改应禁止修改。
2.  它可能比您需要的更强大，因为您可能希望允许从 Base 对象或显式调用 Base::foo()。
3.  它使用 RTTI，这意味着一个 vtbl，这可能就是为什么你不想一开始就使用虚拟函数。

# python - 如何检查文件是否是有效的图像文件？

> ID：889333
> 
> 赞同：132
> 
> 时间：2009-05-20T17:55:16.247
> 
> 标签：python, image, identification, imghdr

我目前正在使用 PIL。

```
from PIL import Image
try:
    im=Image.open(filename)
    # do stuff
except IOError:
    # filename not an image file 
```

然而，虽然这足以涵盖大多数情况，但某些图像文件（如 xcf、svg 和 psd）并未被检测到。Psd 文件会引发 OverflowError 异常。

有什么办法我也可以包括它们吗？

* * *

## 回答 #1

> 赞同：238
> 
> 时间：2009-05-24T00:29:03.123

我刚刚找到了内置的[imghdr](http://docs.python.org/library/imghdr.html)模块。来自 python 文档：

> imghdr 模块确定文件或字节流中包含的图像类型。

这是它的工作原理：

```
>>> import imghdr
>>> imghdr.what('/tmp/bass')
'gif' 
```

使用模块比重新实现类似的功能要好得多

* * *

## 回答 #2

> 赞同：54
> 
> 时间：2009-05-20T19:02:45.300

除了 Brian 建议的内容之外，您还可以使用 PIL 的[验证](http://effbot.org/imagingbook/image.htm#tag-Image.Image.verify)方法来检查文件是否损坏。

> im.verify()
> 
> 尝试确定文件是否损坏，而不实际解码图像数据。如果此方法发现任何问题，它会引发适当的异常。此方法仅适用于新打开的图像；如果图像已经加载，则结果未定义。另外，如果您在使用此方法后需要加载图像，则必须重新打开图像文件。属性

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2019-08-08T09:26:22.707

除了`PIL`图像检查，您还可以像这样添加文件扩展名检查：

```
filename.lower().endswith(('.png', '.jpg', '.jpeg', '.tiff', '.bmp', '.gif')) 
```

请注意，这仅检查文件名是否具有有效的图像扩展名，它实际上并没有打开图像以查看它是否是有效图像，这就是您需要额外使用`PIL`或其他答案中建议的库之一的原因。

* * *

## 回答 #4

> 赞同：17
> 
> 时间：2009-05-20T17:58:26.133

很多时候，前几个字符将是各种文件格式的神奇数字。除了上面的异常检查之外，您还可以检查这一点。

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2020-04-13T19:23:06.023

一种选择是使用该`filetype`软件包。

**安装**

`python -m pip install filetype`

**好处**

1.  快速：通过仅加载图像的前几个字节来工作（*检查幻数*）
2.  支持不同的 mime 类型：图像、视频、字体、音频、档案。

**例子**

**文件类型 >= 1.0.7**

```
import filetype

filename = "/path/to/file.jpg"

if filetype.is_image(filename):
    print(f"{filename} is a valid image...")
elif filetype.is_video(filename):
    print(f"{filename} is a valid video...") 
```

**文件类型 <= 1.0.6**

```
import filetype

filename = "/path/to/file.jpg"

if filetype.image(filename):
    print(f"{filename} is a valid image...")
elif filetype.video(filename):
    print(f"{filename} is a valid video...") 
```

官方回购的附加信息：[https ://github.com/h2non/filetype.py](https://github.com/h2non/filetype.py)

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2018-11-25T19:03:07.600

**更新**

我还在[GitHub 上](https://github.com/ftarlao/check-media-integrity)的 Python 脚本中实现了以下解决方案。

我还验证了损坏的文件（jpg）通常不是“损坏”的图像，即损坏的图片文件有时仍然是合法的图片文件，原始图像丢失或更改，但您仍然可以毫无错误地加载它。但是，文件截断总是会导致错误。

**结束更新**

您可以使用大多数图像格式的 Python *Pillow* (PIL) 模块来检查文件是否是有效且完整的图像文件。

如果您还打算检测损坏的图像，@Nadia Alramli 会正确建议该`im.verify()`方法，但这**并不能检测到所有可能的图像缺陷**，例如，`im.verify`不会检测到截断的图像（大多数查看器通常加载灰色区域）。

*Pillow*也能够检测到这些类型的缺陷，但您必须应用图像处理或图像解码/重新编码或触发检查。最后我建议使用这段代码：

```
from PIL import Image

try:
  im = Image.load(filename)
  im.verify() #I perform also verify, don't know if he sees other types o defects
  im.close() #reload is necessary in my case
  im = Image.load(filename) 
  im.transpose(Image.FLIP_LEFT_RIGHT)
  im.close()
except: 
  #manage excetions here 
```

如果出现图像缺陷，此代码将引发异常。请考虑 im.verify 比执行图像处理快大约 100 倍（我认为翻转是更便宜的转换之一）。使用此代码，您将以大约 10 MBytes/sec 的标准 Pillow 或 40 MBytes/sec 的 Pillow-SIMD 模块（现代 2.5Ghz x86_64 CPU）验证一组图像。

对于其他格式*psd* , *xcf* ,.. 可以使用*Imagemagick*包装器*Wand*，代码如下：查看 Wand 文档：[here](https://docs.wand-py.org/en/0.6.7/)，安装：[here](https://pypi.org/project/Wand/)

```
im = wand.image.Image(filename=filename)
temp = im.flip;
im.close() 
```

但是，从我的实验来看，Wand 没有检测到截断的图像，我认为它在没有提示的情况下将缺少的部分加载为灰色区域。

我认为*Imagemagick*有一个外部命令*identify*可以完成这项**工作**，但我还没有找到以编程方式调用该函数的方法，我也没有测试过这条路线。

我建议始终执行初步检查，检查*文件大小*不为零（或非常小），这是一个非常*便宜*的想法：

```
import os

statfile = os.stat(filename)
filesize = statfile.st_size
if filesize == 0:
  #manage here the 'faulty image' case 
```

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2009-05-20T18:05:40.487

在 Linux 上，您可以使用[python-magic](https://pypi.org/project/python-magic/)，它使用[libmagic](https://man7.org/linux/man-pages/man3/libmagic.3.html)来识别文件格式。

AFAIK，libmagic 会查看文件并试图告诉你更多关于它的信息，而不仅仅是格式，比如位图尺寸、格式版本等。所以你可能会认为这是对“有效性”的肤浅测试。

对于“有效”的其他定义，您可能必须编写自己的测试。

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2009-05-20T19:29:00.193

您可以使用 Python 绑定到 libmagic、[python-magic](http://pypi.python.org/pypi/python-magic/)，然后检查 mime 类型。这不会告诉您文件是否损坏或完好无损，但它应该能够确定它是什么类型的图像。

* * *

## 回答 #9

> 赞同：-2
> 
> 时间：2020-02-26T09:30:35.523

```
format = [".jpg",".png",".jpeg"]
 for (path,dirs,files) in os.walk(path):
     for file in files:
         if file.endswith(tuple(format)):
             print(path)
             print ("Valid",file)
         else:
             print(path)
             print("InValid",file) 
```

# macos - 在 OSX 上安装应用程序的首选过程是什么？

> ID：889348
> 
> 赞同：3
> 
> 时间：2009-05-20T17:57:52.810
> 
> 标签：macos, installation

我来自 Windows 世界...库和实现事务性安装，理论上避免了拙劣的安装）...

有人可以解释如何在 OSX 上安装应用程序的架构和过程吗？Windows Installer 是否有相应的组件？如果是这样，我将如何将它用于我的应用程序？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-05-20T18:01:28.730

这可能是矫枉过正，但看看这个：

[软件交付指南：简介 (Apple)](http://developer.apple.com/documentation/DeveloperTools/Conceptual/SoftwareDistribution/Introduction/Introduction.html)

讨论 Mac 上的各种软件交付程序及其工作原理。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-05-20T18:13:34.167

`.app`应用程序通常与扩展一起打包成“捆绑包” 。这些包包含二进制文件（通常是 Mach-O）和应用程序*需要*运行的任何其他资源；这些通常包括：

*   应用程序资源 - 图标/图像、NIB 文件等项目（用于定​​义用户界面）
*   定义应用程序名称、包格式等参数的属性列表文件
*   OS X 可以为用户设置的不同语言环境加载的本地化文件和字符串

这些包通常保存在`/Applications/`文件夹中，尽管它们可以移动并放置在文件系统的任何位置（包格式使移动这些应用程序更容易）。

安装应用程序的常用方法是下载一个[Apple Disk Image](http://en.wikipedia.org/wiki/Apple_Disk_Image)文件（扩展名`.dmg`），该文件作为磁盘驱动器安装在用户的操作系统上；然后应用程序实际上以两种主要方式安装：

*   通过安装程序应用程序；这使用`.pkg`提供“向导”安装过程的安装包（扩展名），并在安装可配置时使用（用户可以选择安装哪些额外的依赖项等）。免费的 Apple 工具`PackageMaker`可用于创建这些包。
*   只需将应用程序图标拖入应用程序文件夹即可；这适用于不需要自定义安装设置的应用程序；通常会显示一个显示应用程序图标和应用程序文件夹图标的窗口，并且用户将应用程序图标拖到应用程序文件夹图标上（例如，请参见[此处](http://www.macvswindows.com/images/d/d6/osx_draginstall.jpg)）

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2009-05-20T18:00:02.917

您将图标拖到您的应用程序文件夹中。

它实际上是一个名称以 . 结尾的文件夹`.app`。操作系统将其视为一个单元。“文件夹”内部是应用程序分发和元数据，用于告诉操作系统如何运行它。通常，系统范围的组件在首次运行时安装。

您有时会发现 package( `.pkg`) 包的工作方式与`.msi`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-20T18:00:34.317

OS X 应用程序通常是“xcopy 部署”的，并且自包含在所谓的*bundles*中。

# css - 使用 css 根据屏幕大小扩大或缩小

> ID：889357
> 
> 赞同：3
> 
> 时间：2009-05-20T18:00:25.520
> 
> 标签：css, html

我对CSS很垃圾，我糊里糊涂，而不是把头撞在砖墙上......

www.SchofieldBell.com

通过将所有内容放在#wrapper 中，我将页面的书部分放在中间：

```
#wrapper
{
    BORDER-RIGHT: 0px solid; 
    BORDER-TOP: 0px solid; 
    BORDER-LEFT: 0px solid; 
    BORDER-BOTTOM: 0px solid; 

    PADDING-TOP: 0px;   
    PADDING-RIGHT: 0px; 
    PADDING-LEFT: 0px; 
    PADDING-BOTTOM: 17px; 
    MARGIN: 0px auto; 

    WIDTH: 900px;

    DISPLAY: block;

    POSITION: relative; 
    TOP: 0px; 
} 
```

但我希望页面的左侧（缺少的位）根据屏幕尺寸扩大或缩小......

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-20T18:06:43.730

它被称为弹性或流体布局，[在 A List Apart 中有一篇很棒的文章](http://www.alistapart.com/articles/elastic/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-20T18:06:53.777

首先开...

1.  图片超载，优化什么的，花了5-8秒加载
2.  给元素一个 23% 的宽度和一个 min-height 属性。
3.  这种设计根本不流畅，对于我的 1600x1200 屏幕来说太大了，请重新考虑。
4.  混合使用 CSS / 表格 / 和 iFrame 非常混乱，请尝试纠正它。

谢谢。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-20T18:08:11.760

首先，请用所有小写字母编写 CSS 代码——这样更容易阅读。:-)

```
#wrapper {
    width: 90%;
} 
```

将确保#wrapper 的宽度始终等于视口（浏览器的查看区域）的 90%。

或者

```
#wrapper {
    margin: 20px;
} 
```

将确保#wrapper 宽度始终为视口的 100%，每边减去 20 个像素。

我是否正确理解了您的问题？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-20T18:13:33.560

根据我是否正确理解您的目标，这可能值得一试：将 div 放在 #wrapper 中并将其定位 c。距包装器右侧 900 像素。我假设您的意图是溢出页面左侧的文本。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-20T18:41:41.613

Eduardo 提到了 A List Apart，但是，我认为该站点上的这篇文章可能更合适（因为它似乎正是您想要的）。

[2 列，液体，右侧固定](http://www.alistapart.com/d/multicolumnlayouts/2ColLiquidRightRailTallest.html)

# php - 有什么作用？... ： ... 做？

> ID：889373
> 
> 赞同：18
> 
> 时间：2009-05-20T18:04:38.023
> 
> 标签：php, syntax, ternary-operator

```
$items = (isset($_POST['items'])) ? $_POST['items'] : array(); 
```

我不明白这段代码的最后一段“ `? $_POST['items'] : array();`”

这种代码组合究竟做了什么？

我使用它从 html 文本框中获取一堆值并将其存储到会话数组中。但问题是，如果我尝试重新提交文本框中的数据，新的数组会话会覆盖旧的会话数组，完全空白。

我只想覆盖数组中已经有值的地方。如果用户决定只填写几个文本框，我不希望之前的会话数组数据被空格覆盖（来自空白文本框）。

我认为上面的代码是问题所在，但我不确定它是如何工作的。请启发我。

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2009-05-20T18:05:58.877

这是**一个** [三元运算符](http://www.php.net/ternary#language.operators.comparison.ternary)：

表达式的`(expr1) ? (expr2) : (expr3)` 计算结果为`expr2`if`expr1`计算结果为`TRUE`，并且`expr3`if`expr1`计算结果为`FALSE`。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2009-05-20T18:05:46.523

最后一部分称为*条件运算符*。基本上它是一个浓缩的`if/else`陈述。

它是这样工作的：

```
$items =
    // if this expression is true
    (isset($_POST['items'])) 
    // then "$_POST['items']" is assigned to $items
    ? $_POST['items'] 
    // else "array()" is assigned
    : array(); 
```

这里还有一些可能更简单的伪代码：

```
$items = (condition) ? value_if_condition_true : value_if_condition_false; 
```

* * *

**编辑：**这是一个快速的、迂腐的旁注：PHP 文档将此运算符称为*三元运算符*。虽然条件运算符在技术上是一个三元运算符（即具有 3 个操作数的运算符），但将其称为三元运算符是用词不当（而且相当推定***）***。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-20T18:09:39.947

它与以下内容相同：

```
if (isset($_POST['items']){
    $items = $_POST['items'];
} else {
    $items = array();
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-05-21T17:31:41.127

查看 Paolo 的答案以了解三元运算符。

要执行您正在做的事情，您可能需要使用会话变量。

在页面顶部放置这个（因为在开始会话之前您无法向页面输出任何内容。IE NO ECHO STATEMENTS）

```
session_start(); 
```

然后，当用户提交您的表单时，将结果保存在此服务器变量中。如果这是用户第一次提交表单，直接保存即可，否则循环并添加任何不为空的值。看看这是不是你要找的：

HTML 代码 (testform.html):

```
<html>
    <body>
    <form name="someForm" action="process.php" method="POST"> 
        <input name="items[]" type="text">
        <input name="items[]" type="text">
        <input name="items[]" type="text">
        <input type="submit">
    </form>
    </body>
</html> 
```

处理代码（process.php）：

```
<?php
session_start();

if(!$_SESSION['items']) {
    // If this is the first time the user submitted the form,
    // set what they put in to the master list which is $_SESSION['items'].
    $_SESSION['items'] = $_POST['items'];
}
else {
    // If the user has submitted items before...
    // Then we want to replace any fields they changed with the changed value
    // and leave the blank ones with what they previously gave us.
    foreach ($_POST['items'] as $key => $value) {
        if ($value != '') { // So long as the field is not blank
            $_SESSION['items'][$key] = $value;
        }
    }
}

// Displaying the array.
foreach ($_SESSION['items'] as $k => $v) {
    echo $v,'<br>';
}
?> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-09-16T06:20:29.367

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-20T18:06:22.543

基本上，如果 $_POST['items'] 存在，则 $items 被设置为它，否则它被设置为一个空数组。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-05-20T18:08:41.603

它是一个三元运算符，本质上说如果 items 键在 $_POST 中，则将 $items 设置为等于 $_POST['items'] 的值，否则将其设置为空数组。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-06-06T18:11:57.183

我认为还值得注意的是，它`?:`是一个单独的运算符，其中：

```
$one = $two ?: $three;
$one = two() ?: three(); 
```

是以下的简写：

```
$one = $two ? $two : $three;
$one = two() ? two() : three(); 
```

除了键入更少之外，运行时的优势在于，如果使用类似 的函数`two()`，则该函数将仅使用简写形式计算一次，但使用长形式可能会计算两次。

# svn - 如何在没有初始签出的情况下在 CVS 中列出文件？

> ID：889378
> 
> 赞同：25
> 
> 时间：2009-05-20T18:05:39.520
> 
> 标签：svn, cvs, svn-checkout

如何在没有初始签出的情况下列出文件 CVS？

在颠覆中，我可以简单地在 CVS 中执行“svn ls [http://svn.svn.com](http://svn.svn.com) ”我该怎么做？

例如，我有这个 CVS 连接：

```
 pserver:anonymous@evocms.cvs.sourceforge.net:/cvsroot/evocms 
```

如何列出其中的所有文件？

**更新：**

我正在这样做：

```
c:\>set CVSROOT=pserver:anonymous@evocms.cvs.sourceforge.net:/cvsroot/evocms
c:\>cvs -list ---> doesn't work, prints out the help screen 
```

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2009-05-22T07:51:09.697

如果是一次性操作，则不需要设置`CVSROOT`环境变量。只需使用`-d`临时存储库规范的参数。

如果您的 CVS/CVSNT 版本不太旧（确切地说，您需要 CVS 1.12.8 或更高版本或 CVSNT），那么正如其他人所说，**在登录后**

```
cvs ls 
```

应该可以正常工作。

如果您的 CVS/CVSNT 版本不支持该`ls`命令，那么您可以尝试

```
cvs checkout -c 
```

这只会转储预定义[模块](http://www.cvsnt.org/manual/html/Administrative-files.html#modules)的列表。

如果您的 CVS/CVSNT 版本足够老，您可能会幸运地使用以下 hack（不适用于更新版本的 CVSNT，除非在服务器上启用了兼容模式）：

首先将存储库的根目录检出到某个临时位置，这样我们就有了必要的元数据：

```
cvs -d[your CVSROOT string] co -l -dTemp . 
```

然后模拟该文件夹的更新（带有目录）：

```
cd Temp
cvs -n up -d 
```

这将发出（几乎）与实际结帐相同的输出，而无需实际从服务器获取文件。

如果您在 Windows 上并使用相当新版本的 CVSNT 作为客户端，那么`cvs ls`当它检测到不支持`ls`自身的服务器时，它实际上会自动回退到这种机制。

* * *

哦，是的，而且 AFAICT 没有`cvs -list`. 它甚至不是有效的 CVS 命令行语法：`-list`必须是全局参数而不是命令，因为它紧跟在 the 之后，`cvs`并且没有指定实际命令。但是话又说回来，所有多字母参数（例如`--help`）都必须以双破折号开头，例如`cvs --version`. 大家有没有想过`cvs list`which 只是 的别名`cvs ls`？

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2010-01-15T11:02:55.957

```
cvs -d $CVSROOT rls 
```

希望这会有所帮助（cvs 版本 1.12.13）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-05-20T18:41:26.543

您需要先[登录](http://www.cvsnt.org/manual/html/login.html)，如下所示：

> cvs -d :pserver:anonymous@evocms.cvs.sourceforge.net:/cvsroot/evocms 登录

然后，正如其他人所说，使用[*ls*命令](http://www.cvsnt.org/manual/html/ls.html)。

有关背景，请参阅[远程存储库的讨论](http://www.cvsnt.org/manual/html/Remote-repositories.html)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-10-02T18:05:01.523

这就是我使用的。msolorzano 是我的登录名和密码，“Deployer”是模块：

```
cvs -d :pserver:msolorzano:password@gtess-cvs:/cvsdata/data1 rlog -R Deployer 
```

...事实上，如果您在 UNIX/Linux 环境中执行命令，您可以以“干净的方式”检查 cvs 文件列表，如下所示：

```
cvs -d :pserver:msolorzano:password@gtess-cvs:/cvsdata/data1 rlog Deployer | grep  ',v' | sed 's/RCS file: //g' | sed s/,v//g 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-05-20T18:20:49.253

cvs 中有一个类似的命令

用法： cvs ls
~~cvs -list 列出模块， ls 列出模块的内容。~~

编辑：他们是对的，命令列表和 ls 是一样的，我很抱歉。

好吧，我真的不知道如何在没有实际检查的情况下列出 cvs 目录。您尝试访问的存储库是否具有 cvsweb 访问权限？

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-20T18:17:51.350

[见 cvs 命令](http://www.cvsnt.org/manual/html/ls.html)

例如;

```
cvs list 
```

将列出 CVS 服务器中的所有模块

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-12-07T17:24:04.527

全部，

这是一个全面的方法：

1.  启动命令提示符
2.  复制此 cvs -d CVSROOT 登录名（或者，无论您对应的 CVSROOT 是什么）
3.  输入您的密码并在出现提示时按回车键。这可能需要一段时间，但完成后，将出现新的提示。
4.  输入 cvs –d cvs -d CVSROOT ls
5.  砰！有你的清单

请记住，如果您没有定义 CVSROOT，您可以在此处复制并粘贴您自己的 CVSROOT。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2010-11-08T12:27:18.660

`cvs -d [CVS_ROOT] rlog {module_name}`

# iphone - 如何获得精确的时间，例如在 Objective-C 中以毫秒为单位？

> ID：889380
> 
> 赞同：104
> 
> 时间：2009-05-20T18:05:43.217
> 
> 标签：iphone, objective-c, cocoa-touch, uikit

有没有一种简单的方法可以非常精确地获得时间？

我需要计算方法调用之间的一些延迟。更具体地说，我想计算 UIScrollView 中的滚动速度。

* * *

## 回答 #1

> 赞同：129
> 
> 时间：2009-05-20T18:11:40.613

`NSDate`并且这些`timeIntervalSince*`方法将返回一个`NSTimeInterval`具有亚毫秒精度的双精度值。`NSTimeInterval`以秒为单位，但它使用双精度来为您提供更高的精度。

为了计算毫秒时间精度，您可以执行以下操作：

```
// Get a current time for where you want to start measuring from
NSDate *date = [NSDate date];

// do work...

// Find elapsed time and convert to milliseconds
// Use (-) modifier to conversion since receiver is earlier than now
double timePassed_ms = [date timeIntervalSinceNow] * -1000.0; 
```

[timeIntervalSinceNow 上的文档](http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSDate_Class/Reference/Reference.html#//apple_ref/occ/instm/NSDate/timeIntervalSinceNow)。

还有许多其他方法可以使用 来计算此间隔`NSDate`，我建议您查看*[NSDate 类参考](http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSDate_Class/Reference/Reference.html#//apple_ref/doc/uid/20000188-2603)*`NSDate`中的类文档。

* * *

## 回答 #2

> 赞同：42
> 
> 时间：2009-05-20T19:04:21.630

`mach_absolute_time()`可用于获得精确的测量值。

见[http://developer.apple.com/qa/qa2004/qa1398.html](http://developer.apple.com/qa/qa2004/qa1398.html)

也可用`CACurrentMediaTime()`，它本质上是相同的，但具有更易于使用的界面。

（注意：此答案写于 2009 年。有关`clock_gettime()`较新版本的 macOS 和 iOS 中可用的更简单的 POSIX 接口，请参阅 Pavel Alexeev 的答案。）

* * *

## 回答 #3

> 赞同：31
> 
> 时间：2015-05-21T02:47:20.023

请不要使用`NSDate`、`CFAbsoluteTimeGetCurrent`、 或`gettimeofday`来测量经过的时间。这些都依赖于系统时钟，由于许多不同的原因，系统时钟可以随时更改*，*例如网络时间同步 (NTP) 更新时钟（经常针对漂移进行调整）、DST 调整、闰秒等。

这意味着，如果您正在测量下载或上传速度，您的数字会突然出现峰值或下降，这与实际发生的情况无关；你的性能测试会有奇怪的错误异常值；并且您的手动计时器将在不正确的持续时间后触发。时间甚至可能倒退，你最终会得到负增量，你可能会得到无限递归或死代码（是的，我已经完成了这两个）。

使用`mach_absolute_time`. 它测量内核启动后的实际秒数。它是单调递增的（永远不会倒退），并且不受日期和时间设置的影响。由于使用起来很痛苦，所以这里有一个简单的包装器，可以为您提供`NSTimeInterval`：

```
// LBClock.h
@interface LBClock : NSObject
+ (instancetype)sharedClock;
// since device boot or something. Monotonically increasing, unaffected by date and time settings
- (NSTimeInterval)absoluteTime;

- (NSTimeInterval)machAbsoluteToTimeInterval:(uint64_t)machAbsolute;
@end

// LBClock.m
#include <mach/mach.h>
#include <mach/mach_time.h>

@implementation LBClock
{
    mach_timebase_info_data_t _clock_timebase;
}

+ (instancetype)sharedClock
{
    static LBClock *g;
    static dispatch_once_t onceToken;
    dispatch_once(&onceToken, ^{
        g = [LBClock new];
    });
    return g;
}

- (id)init
{
    if(!(self = [super init]))
        return nil;
    mach_timebase_info(&_clock_timebase);
    return self;
}

- (NSTimeInterval)machAbsoluteToTimeInterval:(uint64_t)machAbsolute
{
    uint64_t nanos = (machAbsolute * _clock_timebase.numer) / _clock_timebase.denom;

    return nanos/1.0e9;
}

- (NSTimeInterval)absoluteTime
{
    uint64_t machtime = mach_absolute_time();
    return [self machAbsoluteToTimeInterval:machtime];
}
@end 
```

* * *

## 回答 #4

> 赞同：16
> 
> 时间：2009-05-20T18:08:24.427

[`CFAbsoluteTimeGetCurrent()`](https://developer.apple.com/documentation/corefoundation/1543542-cfabsolutetimegetcurrent)返回绝对时间作为一个`double`值，但我不知道它的精度是多少——它*可能*只每十几毫秒更新一次，或者它可能每微秒更新一次，我不知道。

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2012-03-20T02:03:29.680

我不会使用`mach_absolute_time()`，因为它使用滴答声（可能是正常运行时间）查询内核和处理器的组合的绝对时间。

我会用什么：

```
CFAbsoluteTimeGetCurrent(); 
```

此功能经过优化，可修正 iOS 和 OSX 软硬件的差异。

***更怪异的东西***

`mach_absolute_time()`和的差商`AFAbsoluteTimeGetCurrent()`始终在 24000011.154871 左右

这是我的应用程序的日志：

**请注意，最终结果时间与`CFAbsoluteTimeGetCurrent()`'s不同**

```
 2012-03-19 21:46:35.609 Rest Counter[3776:707] First Time: 353900795.609040
 2012-03-19 21:46:36.360 Rest Counter[3776:707] Second Time: 353900796.360177
 2012-03-19 21:46:36.361 Rest Counter[3776:707] Final Result Time (difference): 0.751137
 2012-03-19 21:46:36.363 Rest Counter[3776:707] Mach absolute time: 18027372
 2012-03-19 21:46:36.365 Rest Counter[3776:707] Mach absolute time/final time: 24000113.153295
 2012-03-19 21:46:36.367 Rest Counter[3776:707] -----------------------------------------------------
 2012-03-19 21:46:43.074 Rest Counter[3776:707] First Time: 353900803.074637
 2012-03-19 21:46:43.170 Rest Counter[3776:707] Second Time: 353900803.170256
 2012-03-19 21:46:43.172 Rest Counter[3776:707] Final Result Time (difference): 0.095619
 2012-03-19 21:46:43.173 Rest Counter[3776:707] Mach absolute time: 2294833
 2012-03-19 21:46:43.175 Rest Counter[3776:707] Mach absolute time/final time: 23999753.727777
 2012-03-19 21:46:43.177 Rest Counter[3776:707] -----------------------------------------------------
 2012-03-19 21:46:46.499 Rest Counter[3776:707] First Time: 353900806.499199
 2012-03-19 21:46:55.017 Rest Counter[3776:707] Second Time: 353900815.016985
 2012-03-19 21:46:55.018 Rest Counter[3776:707] Final Result Time (difference): 8.517786
 2012-03-19 21:46:55.020 Rest Counter[3776:707] Mach absolute time: 204426836
 2012-03-19 21:46:55.022 Rest Counter[3776:707] Mach absolute time/final time: 23999996.639500
 2012-03-19 21:46:55.024 Rest Counter[3776:707] ----------------------------------------------------- 
```

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2018-06-20T21:52:50.277

基于的函数适用`mach_absolute_time`于短时间测量。
但对于长时间测量，重要的警告是它们在设备处于睡眠状态时停止滴答作响。

有一个功能可以获取自启动以来的时间。它不会在睡觉时停止。此外，`gettimeofday`不是单调的，但在我的实验中，我总是看到系统时间变化时启动时间会发生变化，所以我认为它应该可以正常工作。

```
func timeSinceBoot() -> TimeInterval
{
    var bootTime = timeval()
    var currentTime = timeval()
    var timeZone = timezone()

    let mib = UnsafeMutablePointer<Int32>.allocate(capacity: 2)
    mib[0] = CTL_KERN
    mib[1] = KERN_BOOTTIME
    var size = MemoryLayout.size(ofValue: bootTime)

    var timeSinceBoot = 0.0

    gettimeofday(&currentTime, &timeZone)

    if sysctl(mib, 2, &bootTime, &size, nil, 0) != -1 && bootTime.tv_sec != 0 {
        timeSinceBoot = Double(currentTime.tv_sec - bootTime.tv_sec)
        timeSinceBoot += Double(currentTime.tv_usec - bootTime.tv_usec) / 1000000.0
    }
    return timeSinceBoot
} 
```

从 iOS 10 和 macOS 10.12 开始，我们可以使用 CLOCK_MONOTONIC：

```
if #available(OSX 10.12, *) {
    var uptime = timespec()
    if clock_gettime(CLOCK_MONOTONIC_RAW, &uptime) == 0 {
        return Double(uptime.tv_sec) + Double(uptime.tv_nsec) / 1000000000.0
    }
} 
```

把它们加起来：

*   `Date.timeIntervalSinceReferenceDate`— 随系统时间变化而变化，而不是单调的
*   `CFAbsoluteTimeGetCurrent()`— 不单调，可能会倒退
*   `CACurrentMediaTime()`— 当设备处于睡眠状态时停止滴答作响
*   `timeSinceBoot()`— 不睡觉，但可能不单调
*   `CLOCK_MONOTONIC`— 不休眠，单调，自 iOS 10 起支持

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2013-08-23T22:37:44.173

```
#define CTTimeStart() NSDate * __date = [NSDate date]
#define CTTimeEnd(MSG) NSLog(MSG " %g",[__date timeIntervalSinceNow]*-1) 
```

用法：

```
CTTimeStart();
...
CTTimeEnd(@"that was a long time:"); 
```

输出：

```
2013-08-23 15:34:39.558 App-Dev[21229:907] that was a long time: .0023 
```

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2010-11-05T00:34:53.863

此外，这里是如何以毫秒为单位计算使用 Unix 纪元初始化的 64 位`NSNumber`，以防您希望将其存储在 CoreData 中。我的应用程序需要这个，它与以这种方式存储日期的系统交互。

```
 + (NSNumber*) longUnixEpoch {
      return [NSNumber numberWithLongLong:[[NSDate date] timeIntervalSince1970] * 1000];
  } 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2012-01-24T19:36:28.420

I know this is an old one but even I found myself wandering past it again, so I thought I'd submit my own option here.

Best bet is to check out my blog post on this: [Timing things in Objective-C: A stopwatch](http://metal-sole.com/2012/01/24/timing-things-in-objective-c-a-stopwatch/)

Basically, I wrote a class that does stop watching in a very basic way but is encapsulated so that you only need to do the following:

```
[MMStopwatchARC start:@"My Timer"];
// your work here ...
[MMStopwatchARC stop:@"My Timer"]; 
```

And you end up with:

```
MyApp[4090:15203]  -> Stopwatch: [My Timer] runtime: [0.029] 
```

in the log...

Again, check out my post for a little more or download it here: [MMStopwatch.zip](http://metal-sole.com/wp-content/uploads/2012/01/MMStopwatch.zip)

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-08-17T01:35:28.873

您可以使用 NSDate 获取自 1970 年 1 月 1 日以来的当前时间（以毫秒为单位）：

```
- (double)currentTimeInMilliseconds {
    NSDate *date = [NSDate date];
    return [date timeIntervalSince1970]*1000;
} 
```

* * *

## 回答 #11

> 赞同：-2
> 
> 时间：2015-08-27T20:40:30.267

对于那些我们需要@Jeff Thompson 答案的 Swift 版本：

```
// Get a current time for where you want to start measuring from
var date = NSDate()

// do work...

// Find elapsed time and convert to milliseconds
// Use (-) modifier to conversion since receiver is earlier than now
var timePassed_ms: Double = date.timeIntervalSinceNow * -1000.0 
```

我希望这对你有帮助。

# php - 将 STR_TO_DATE 格式化为日期

> ID：889381
> 
> 赞同：1
> 
> 时间：2009-05-20T18:05:44.480
> 
> 标签：php, mysql, string, date

嗨，我已经能够使用 提取 a`VARCHAR`到日期`string_to_date`，但是无论我尝试什么，日期总是回显，例如`2009-05-25`
这是我的有效代码：

```
$query = "SELECT u.url_id, url, title, description, STR_TO_DATE( pub_date, '%d-%b-%Y') 
    AS pub_date FROM urls AS u, url_associations AS ua WHERE u.url_id = ua.url_id AND
    ua.url_category_id=$type AND ua.approved = 'Y' ORDER BY pub_date DESC";
$result = mysql_query ($query);
echo "  <tr>
<td align=\"left\">{$row['pub_date']}</td>
</tr>\n"; 
```

我已经尝试过`DATE_FORMAT`类似的方法，但我要么收到`2009-05-25`要么空白。谁能帮我解决这个问题。我正在寻找和测试，但我决定在这里寻求帮助，因为我们欢迎帮助，而且以前帮助过的人非常友善。

谢谢

肖恩

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-20T18:25:04.660

的返回类型`STR_TO_DATE`是`DATE`返回的`PHP`。

这是`PHP`在您的日期格式`echo`，而不是`MySQL`.

要进行`MySQL`侧面格式化，请使用：

```
DATE_FORMAT(STR_TO_DATE( pub_date, '%d-%b-%Y'), '%Y.%m.%d') 
```

或其他格式。

内部格式控制您的字符串如何存储在数据库中，外部格式控制它将如何输出。

要进行`PHP`侧面格式化（这更好，因为您可以尊重不同用户的文化特定格式），请使用：

```
echo date('Y m d', strtotime($row['pub_date'])) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-21T07:13:50.453

从[这个参考站点](https://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_date-format)以下是mysql命令和输出

```
mysql> SELECT DATE_FORMAT('2009-10-04 22:23:00', '%W %M %Y');
        -> 'Sunday October 2009'
mysql> SELECT DATE_FORMAT('2007-10-04 22:23:00', '%H:%i:%s');
        -> '22:23:00'
mysql> SELECT DATE_FORMAT('1900-10-04 22:23:00',
    ->                 '%D %y %a %d %m %b %j');
        -> '4th 00 Thu 04 10 Oct 277'
mysql> SELECT DATE_FORMAT('1997-10-04 22:23:00',
    ->                 '%H %k %I %r %T %S %w');
        -> '22 22 10 10:23:00 PM 22:23:00 00 6'
mysql> SELECT DATE_FORMAT('1999-01-01', '%X %V');
        -> '1998 52'
mysql> SELECT DATE_FORMAT('2006-06-00', '%d');
        -> '00' 
```

# visual-studio - Visual Studio 中意外删除的“工具”菜单

> ID：889387
> 
> 赞同：1
> 
> 时间：2009-05-20T18:06:42.840
> 
> 标签：visual-studio, development-environment

我在 Visual Studio 08 中搞乱我的工具栏和菜单。我注意到它们的行为很奇怪。当我关闭“自定义”对话框时，我的“工具”和“帮助”菜单消失了（也许更多，我不记得还有什么）。我不想重置所有内容，因为一年多来我一直在按照自己的喜好缩减 VS 环境，而且我从未保存过这些设置。我有很多自定义命令怪癖修复。我不喜欢重新开始。我想教训是我应该定期保存我的设置。

有谁知道如何找回菜单？我什至不知道可以删除实际的菜单（不是工具栏项）！

谢谢，瑞安

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-20T18:11:34.297

您可以尝试从全新安装中导出设置，找到带有菜单的部分并仅导入那些？我相信设置文件已注册到 Visual Studio，因此双击它应该开始导入过程。

更不用说，这将成为导出和备份您自己的设置的好习惯......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-20T18:12:53.577

尝试右键单击工具栏单击自定义。然后您可以选择菜单栏并单击重置。不确定它是否会起作用，但值得一试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-09-30T05:43:03.480

您可以通过转到“窗口 > 重置窗口布局”重新打开工具栏。我只用 VS 2019 测试过它。

但是，IDK，如果这就是你要问的......

# c# - 代码示例上的 Base64ToHex()

> ID：889400
> 
> 赞同：1
> 
> 时间：2009-05-20T18:10:31.333
> 
> 标签：c#, api

我正在阅读此代码[示例](http://www.codinghorror.com/blog/archives/001267.html)：

由于我不懂 C#，所以我决定试一试。

在编译时，我收到了这条消息：

```
Main.cs(32,65): error CS1061: Type `string' does not contain a definition for `Base64ToHex' and no extension method `Base64ToHex' of type `string' could be found (are you missing a using directive or an assembly reference?)
Compilation failed: 1 error(s), 0 warnings 
```

我查看了[MSDN](http://msdn.microsoft.com/en-us/library/system.string_members.aspx)，正如预期的那样，我没有找到该方法的参考。

问：这个方法是从哪里来的？

ps 我的代码如下：

```
using System.Security.Cryptography;
using System.Text;
using System;

class MainClass
{ 
    public static string Encrypt(string toEncrypt, string key, bool useHashing)
    {
         ..... // same as in post
         .....
    }

    public static void Main( string [] args )
    {
        string key = "secret";

        Console.WriteLine( Encrypt("oscar" + "000", key, true ).Base64ToHex() );
    } 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-20T18:18:43.033

如果该代码曾经编译过，那么 Jeff 可能在 String 上有一个名为“Base64ToHex”的扩展方法。 [扩展方法](http://msdn.microsoft.com/en-us/library/bb383977.aspx)允许您定义方法来“扩展”其他类，这样看起来该方法实际上是在该类中定义的：

```
public static class ExtensionMethods
{
    public static string Base64ToHex(this string str)
    {
        return ...;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-20T18:22:15.460

中没有`Base64ToHex`方法`System.String`。我认为您正在寻找[Convert.FromBase64String](http://msdn.microsoft.com/en-us/library/system.convert.frombase64string.aspx)和[BitConverter.ToString](http://msdn.microsoft.com/en-us/library/3a733s97.aspx)：

```
string encrypted = Encrypt("oscar" + "000", key, true);
Console.WriteLine(BitConverter.ToString(Convert.FromBase64String(encrypted))); 
```

* * *

我看了你的链接，我猜他写了一个辅助扩展方法，它做同样的事情：

```
public static string Base64ToHex(this string s)
{
    return BitConverter.ToString(Convert.FromBase64String(s));
} 
```

# java - 在同一主机上使用 Java 中的多个 SSL 客户端证书

> ID：889406
> 
> 赞同：12
> 
> 时间：2009-05-20T18:12:00.597
> 
> 标签：java, ssl, certificate

在我的 Java 应用程序中，我需要使用 SSL 连接到同一主机，但每次都使用不同的证书。我需要使用不同证书的原因是远程站点使用嵌入在证书中的用户 ID 属性来识别客户端。

这是一个在 3 个不同操作系统上运行的服务器应用程序，我需要能够在不重新启动进程的情况下切换证书。

[另一位用户](https://stackoverflow.com/questions/759603/how-do-i-use-multiple-ssl-certificates-in-java)建议将多个证书导入同一个密钥库。不过，我不确定这对我有帮助，除非有办法告诉 Java 使用密钥库中的哪个证书。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2009-05-20T18:41:51.800

SSL 可以向客户端提供有关要出示哪个证书的提示。这*可能*允许您使用其中包含多个身份的一个密钥库，但不幸的是，大多数服务器不使用此提示功能。因此，如果您为每个连接指定要使用的客户端证书，它将更加健壮。

这是设置`SSLContext`具有指定身份和信任存储的示例代码。您可以重复这些步骤来创建多个上下文，一个用于您要使用的每个客户端证书。每个`SSLContext`都可能使用相同的信任存储，但不同的身份存储（包含要在该上下文中使用的单个客户端密钥条目）。

初始化一次您需要的上下文，并为每个连接重用正确的上下文。如果您进行多个连接，这将允许您利用 SSL 会话。

```
KeyManagerFactory kmf = 
  KeyManagerFactory.getInstance(KeyManagerFactory.getDefaultAlgorithm());
kmf.init(identityStore, password);
TrustManagerFactory tmf =
  TrustManagerFactory.getInstance(TrustManagerFactory.getDefaultAlgorithm());
tmf.init(trustStore);
SSLContext ctx = SSLContext.getInstance("TLS");
ctx.init(kmf.getKeyManagers(), tmf.getTrustManagers(), null); 
```

稍后，您可以直接创建一个套接字：

```
SSLSocketFactory factory = ctx.getSocketFactory();
Socket socket = factory.createSocket(host, port); 
```

或者，如果您正在使用`URL`该类，则可以`SSLSocketFactory`在发出 HTTPS 请求时指定要使用的类：

```
HttpsURLConnection con = (HttpsURLConnection) url.openConnection();
con.setSSLSocketFactory(ctx.getSocketFactory()); 
```

Java 6 有一些额外的 API，可以根据您对密码套件等的偏好更轻松地配置套接字。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-12-03T08:48:45.417

自从提出问题以来，实现可能已经发生了很大变化。我的理解是服务器会将受信任的问题发送给客户端：

```
Found trusted certificate:
[
[
  Version: V3
  Subject: CN=localhost, OU=Spring, O=Pivotal, L=Holualoa, ST=HI, C=US
  Signature Algorithm: SHA256withRSA, OID = 1.2.840.113549.1.1.11 
```

然后客户端会收到一个CertificateRequest：

```
*** CertificateRequest
Cert Types: RSA, DSS, ECDSA
Supported Signature Algorithms: SHA512withECDSA, SHA512withRSA, SHA384withECDSA, SHA384withRSA, SHA256withECDSA, SHA256withRSA, SHA256withDSA, SHA224withECDSA, SHA224withRSA, SHA224withDSA, SHA1withECDSA, SHA1withRSA, SHA1withDSA
Cert Authorities:
<CN=localhost, OU=Spring, O=Pivotal, L=Holualoa, ST=HI, C=US> 
```

然后客户端将使用颁发者扫描其本地密钥库：

```
Set<X500Principal> certIssuers =
                        credentials.getIssuerX500Principals();
for (int i = 0; i < x500Issuers.length; i++) {
    if (certIssuers.contains(issuers[i])) {
        aliases.add(alias);
        if (debug != null && Debug.isOn("keymanager")) {
            System.out.println("matching alias: " + alias);
        }
        break;
    } 
```

如果[找到](https://github.com/openjdk-mirror/jdk7u-jdk/blob/f4d80957e89a19a29bb9f9807d2a28351ed7f7df/src/share/classes/sun/security/ssl/SunX509KeyManagerImpl.java#L380)，它将使用该证书。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2009-11-02T22:50:47.333

[这里](http://wiki.apache.org/ws/FrontPage/Axis/DynamicSSLConfig)有一个解决方案，用于从 Axis 客户端动态选择用于 SSL 身份验证的客户端证书。

# javascript - 帮助正则表达式替换字符串中的每一秒逗号

> ID：889408
> 
> 赞同：8
> 
> 时间：2009-05-20T18:12:09.083
> 
> 标签：javascript, regex

我有一串这样的显示......

1235、3、1343、5、1234、1

我需要用分号替换每隔一个逗号

IE

1235, 3; 1343, 5; 1234, 1

字符串长度将始终不同，但将遵循与上述相同的模式，即数字逗号空格数字逗号空格等。

我怎么能用javascript做到这一点？是否可以？

谢谢，迈克

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-05-20T18:17:10.323

```
'1235, 3, 1343, 5, 1234, 1'.replace(/([0-9]+),\s([0-9]+),\s/g, '$1, $2; ') 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-05-20T18:18:42.067

```
var s = '1235, 3, 1343, 5, 1234, 1';
var result = s.replace(/(,[^,]*),/g,"$1;"); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-05-20T19:08:21.187

```
var s='1235, 3, 1343, 5, 1234, 1';

s=s.replace(/([^,]+,[^,]+),/g,'$1;') 
```

匹配任何不是逗号的内容，然后是逗号，然后是不是逗号的任何内容，然后是逗号。

将括号内的所有内容（不包括最后一个逗号）替换为自身（'$1'），并添加一个分号代替该逗号。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-05-20T18:15:47.470

怎么样：

```
var regex = /(\d+),\s(\d+),\s/g;
var str = '1235, 3, 1343, 5, 1234, 1'; 
alert(str.replace(regex, '$1, $2; ')); // 1235, 3; 1343, 5; 1234, 1 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-05-20T18:26:42.673

```
var myregexp = /(\d+,\s\d+),/g;
result = subject.replace(myregexp, "$1;"); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-20T18:26:30.210

```
var foo = "1235,3,1343,5,1234,1".replace(/(.\*?),(.\*?),/g, "$1,$2;");

console.log(foo)
```

# database - 与 CouchDB 交互的语言/框架支持

> ID：889410
> 
> 赞同：2
> 
> 时间：2009-05-20T18:12:30.253
> 
> 标签：database, web-applications, frameworks, couchdb

我有兴趣知道是否有任何服务器端 Web 应用程序框架可以与 CouchDB 很好地集成？有没有人有这方面的经验？似乎动态语言非常适合使用 JSON，但我更感兴趣的是了解它如何适应框架和应用程序的设计。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-15T16:26:33.623

我为 CouchDB 推荐的两个框架是 Ruby on Rails 和 Django。两者都有一个可以包含的小文件，以便与 CouchDB 轻松交互。对于 Ruby/Rails，这使您能够编写如下所示的代码（[代码片段来自这里](http://wiki.apache.org/couchdb/Getting_started_with_Ruby)）：

```
# Create the database
server = Couch::Server.new("localhost", "5984")
server.put("/foo/", "")

# Insert a new document into the database
doc = <<-JSON
{"type":"comment","body":"First Post!"}
JSON
server.put("/foo/document_id", doc)

# Get the document back later
res = server.get("/foo/document_id")
json = res.body
puts json 
```

Python/Django 允许您用相对最少的工作量来做同样的事情（[见这里](http://wiki.apache.org/couchdb/Getting_started_with_Python)）。这两者都不是在 web 框架级别，但它们需要最少的工作量来设置，并且在 Rails 和 Django 中很容易上手。Django 方法仍然需要安装一些包，所以如果您由于某种原因不能这样做，那么 Rails 方法是可行的方法。

可以在[这里](http://lethain.com/entry/2008/aug/18/an-introduction-to-using-couchdb-with-django/)找到另一个关于 Django 上 Python 的好方法（也来自 CouchDB 常见问题解答）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-17T01:01:13.763

根据您要构建的 CouchApp 可能需要查看的内容：它专为使用 CouchDB 编写应用程序而设计：

[https://github.com/jchris/couchapp/wiki/manual](https://github.com/jchris/couchapp/wiki/manual)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-11-14T13:00:41.817

目前唯一致力于 CouchDB 的 Web 框架是[CouchDBKit](http://couchdbkit.org/) for Python。

查看官方 wiki 页面，其中列出了如何开始使用您的语言：

[http://wiki.apache.org/couchdb/Basics](http://wiki.apache.org/couchdb/Basics)

选择最适合您的语言和框架，然后使用其中一个轻量级的 CouchDB 库。

目前看来，CouchDB 的进展非常迅速。我相信很快就会有更多的框架支持 CouchDB。我目前正在研究为 PHP 构建一个。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2010-04-27T03:10:24.170

我在 jcouchdb for Java 和 CouchApp for JavaScript 和 CouchDBKit with Python 方面取得了很好的成功。所有这些都是积极开发的、开源的、精心设计的，如果缺少你真正需要的东西，它们也很容易增强。我已经为 jcouchdb 和 couchapp 提交了补丁和功能增强。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2010-05-07T17:05:50.867

实际上，您并不真的需要这样的框架。相反，您可以在 CouchDB 中编写整个 Web 应用程序。它允许您生成 HTML 文件或任何其他 XML 派生格式，您甚至可以使用 HTML 模板。我认为这是一个不错的选择，因为 JavaScript 是一种丰富而灵活的语言。另一方面，您不必在数据库和 Web 应用程序之间建立连接。

有关更多详细信息，请查看：http: [//books.couchdb.org/relax/design-documents/shows](http://books.couchdb.org/relax/design-documents/shows)

还有一个相关的问题：[Using CouchDB to serve HTML](https://stackoverflow.com/questions/1911226/using-couchdb-to-serve-html)

# cocoa - 自动更新目标的 Xcode 构建阶段？

> ID：889416
> 
> 赞同：3
> 
> 时间：2009-05-20T18:14:00.283
> 
> 标签：cocoa, xcode, build-process

似乎在标准 Xcode 项目中，默认目标会使用任何新添加的实现文件自动“更新”编译源构建阶段。这使用户不必将每个新文件拖入阶段。

我已经定义了第二个目标，它包含大量的单元测试代码，它被链接为实际（第一个）应用程序目标的直接依赖关系。因此，可以单独维护目标，尽管在第一个构建的任何时候，第二个也是如此。第二个目标还包含一个编译源阶段，但每次创建新源文件时，我都必须将它们复制到该阶段。

**我的问题：**如何配置编译源构建阶段以自动包含项目中的所有源文件？（或所有源文件的子集？）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-20T18:24:02.600

当您向项目添加新文件时，Xcode 会询问您要将其分配给哪个目标。如果此步骤正确完成，则无需手动将这些文件复制到测试目标的编译阶段。

# c# - 当用户控件在公共属性上有 Browsable false 时，为什么设计器在添加到表单时将其设置为 null？

> ID：889424
> 
> 赞同：13
> 
> 时间：2009-05-20T18:16:50.167
> 
> 标签：c#, winforms, visual-studio-2008, user-controls

我有一个具有一些公共属性的用户控件，其中一个是我设置 [Browseable(false)] 的对象。当我在 Visual Studio 的设计器中添加此控件时，生成的代码会将此对象设置为 null。

```
public class Foo : System.Windows.Forms.UserControl
{
    [Browsable(false)]
    public object Bar { get; set; }

    [Browsable(true)]
    public bool IsSomething { get; set; }

    ...
}

private void InitializeComponent()
{
    ...
    this.foo = new Foo();

    this.foo.IsSomething = false;
    this.foo.Bar = null;
    ...
} 
```

我不明白为什么 Visual Studio 会想要这样做，我很好奇是否有办法标记它以便它不会设置它。我通过将对象设置为构造函数中的某些内容来发现这一点，只是为了观察控件的父级将其设置回 null。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2009-05-20T19:53:49.363

这里有几个选项。首先，BrowsableAttribute 仅确定属性是否显示在属性网格中。要完全防止属性被序列化，请使用 DesignerSerializationVisibilityAttribute：

```
[Browsable(false)]
[DesignerSerializationVisibility(DesignerSerializationVisibility.Hidden)]
public object Bar { get; set; } 
```

其次，如果您希望属性被序列化，但仅在用户实际更改了值时，请使用 DefaultValueAttribute：

```
[Browsable(true)]
[DefaultValue(false)]
public bool IsSomething { get; set; } 
```

这将导致该属性仅在与其默认值不同时才被序列化。这也有其他积极的副作用

1.  属性值在未更改时以正常字体显示，但在更改时以粗体显示。
2.  右键单击属性网格中的属性时，“重置”选项将可用。

有更高级的技术可以控制与设计器的属性交互（谷歌“ShouldSerialize”），但这些属性应该让你大部分时间都在那里。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-20T18:55:02.943

通常，当您在自定义控件的构造函数中设置值时，VS 设计器将生成代码来设置您在构造函数中设置的所有值。IE：

```
public class Person
{
    public string FirstName { get; set; }
    public string LastName { get; set; }
    public int Age { get; set; }
}

public class MyTextBox : TextBox
{
    public MyTextBox()
    {
        this.Person = new Person
        {
            FirstName = "John",
            LastName = "Doe",
            Age = 45
        };
    }

    [Browsable(false)]
    public Person Person { get; set; }
} 
```

当我将 MyTextBox 添加到我的表单时，这是生成的代码：

```
// 
// myTextBox1
// 
this.myTextBox1.Location = new System.Drawing.Point(149, 91);
this.myTextBox1.Name = "myTextBox1";
person1.Age = 45;
person1.FirstName = "John";
person1.LastName = "Doe";
this.myTextBox1.Person = person1;
this.myTextBox1.Size = new System.Drawing.Size(100, 20);
this.myTextBox1.TabIndex = 3; 
```

但是，这里的问题是，如果您对构造函数进行更改，则需要重新构建项目，并且在许多情况下从表单中删除控件并重新添加它，以便 VS 可以重新生成代码。我猜在你的情况下 VS 只是没有赶上你的变化。尝试从窗体中删除控件并重建控件。然后重新添加它，它*应该可以*工作。

# command-pattern - 命令模式：客户端和调用者

> ID：889429
> 
> 赞同：1
> 
> 时间：2009-05-20T18:17:24.847
> 
> 标签：command-pattern, design-patterns

在命令模式中：

为什么客户端参与者不应该与调用者参与者是同一类？当客户端参与者和调用者参与者可以是同一个类时，是否存在可能的场景？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-20T18:24:47.797

最大的原因是它违反了单一责任原则。客户参与者和调用者参与者都有各自的责任，对其中一个的更改将影响另一个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-29T22:50:34.440

1) Client 的主要责任是适当地实例化 Invoker、Receiver 和 Command 对象，然后在适当的地点和时间启动执行过程。

例如，它可能是这样的

```
class Client {

...

invoker.executeCommand()

...

} 
```

2) Invoker 的主要职责是按特定顺序调用命令对象的一个​​或多个命令方法。

例如，

```
class Invoker {

...
command.command1();
command.command2();
command.command3();
...

} 
```

例如，让我们考虑 java.awt.event.KeyListener 类。它具有三个按以下顺序调用的方法：

```
keyPressed(KeyEvent e)
keyTyped(KeyEvent e)
keyReleased(KeyEvent e) 
```

此侦听器的调用程序类可以是：

```
class KeyInvocation {
    KeyListener listener;

    void invokeKey(EventObject e) {
        listener.keyPressed(e);
        listener.keyTyped(e);
        listener.keyReleased(e);
    }
} 
```

同时，Client 类应该适当地实例化 EventObject、KeyListener 和 KeyInvocation，然后在适当的地点和时间执行 invokeKey 方法。

当然 Invoker 是命令模式的附加层。在命令模式的更简单情况下，我们可以完全跳过 Invoker 类并在客户端一中完成所有工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-12-02T02:14:41.157

因此，让我们以文本编辑器为例。当您打开一个应用程序时，该应用程序就是客户端，它将在调用程序中存储各种接收器和命令。例如。它会将 pasteCommand 添加到接收者是文档的粘贴菜单项。它将 openCommand 添加到打开菜单项，其中接收者是应用程序本身。

这完全回答了您的问题，调用者和客户端如何不同

# architecture - “初学者”应该了解架构和规划

> ID：889431
> 
> 赞同：8
> 
> 时间：2009-05-20T18:17:46.983
> 
> 标签：architecture

我一直在使用 C 和 C# 多年，我认为自己是一个“相当不错”的程序员，但正如多次指出的那样，编程只是软件工程和开发的一小部分。我是我部门的唯一编码员，但看起来这种情况将开始改变，我想从 Stackoverflow 社区了解以下内容。

*   **从程序员到开发人员需要什么**——我读过 Code Complete，所以我想我已经准备好冒险了。在某种程度上我已经是。
*   **在做我的软件模型时我应该使用什么工具**- 假设 C#
*   **在设置硬性和快速代码之前，我应该对我的架构进行多深的建模？**- 我意识到这个问题是多么主观，我更喜欢经验法则而不是“这取决于”。假设我正在编写旨在“持续 5-10 年”的内部工具
*   **你愿意给从编码转向工程的人什么建议？**

谢谢大家！有一个伟大的阵亡将士纪念日！

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2009-05-20T19:15:58.330

首先是通用答案：

*   了解*任何*给定的工具都不是解决所有问题的灵丹妙药。因此，当您阅读有关 MVC 或函数式编程的内容时，或者有人说 LISP 将解决您的所有问题时，他们不会。他们可能会解决你遇到的一大堆问题，但他们不会解决所有问题。在许多情况下，除了解决一些问题之外，他们还会引入一大堆其他问题。
*   轻松了解不同组件/技术/工具的局限性和优势，为任何给定问题提供解决方案。在评估所有优点和缺点的基础上做出决定 - 不要盲目地做出决定。
*   为工作选择合适的工具，包括语言、开发、集成技术。
*   谁将维护代码？向预期受众编码。如果那是你，不要指望从现在起六个月后你会提供一个修复，你会记得你今天的思维过程是什么......编写简单易读的代码并记录你的思维过程。不是“如何”——代码是这样做的，而是“为什么”。无论您的代码多么容易阅读，它都无法告诉您*为什么*这样做。代码注释是关于为什么，而不是如何。
*   了解您的用户、他们的工作方式、他们对工具的心态、他们的工作、他们对软件学习曲线的态度。
*   了解将支持您的应用程序的人员/团队的心态——这也意味着安装。
*   了解源代码控制的必要性并使用它。
*   备份，总是假设并为最坏的情况做准备，如果你不这样做，你会希望你这样做的。
*   学习如何编写软件规范、技术规范、测试文档、用户文档。
*   FAT/SAT/UAT 测试和签核程序。
*   设定低于您能够提供的期望值，不要向客户承诺兰博基尼并提供大众甲壳虫 [Bug]。最好向甲壳虫 [Bug] 承诺并交付一辆梅赛德斯。
*   不要过度复杂化*任何事情*——包括架构、编程或其他任何事情。文档应该易于阅读，界面应该易于使用。

现在具体说：

*   了解您必须先研究问题并了解问题域，然后才能提供*任何*类型的解决方案、架构或其他方式。
*   了解用户期望交付的内容、交付方式以及他们将如何与之交互。
*   找到将使用您的解决方案的技术最不熟练的人，如果他们能理解，其他人也会。
*   *为您的用户*和金融家设计您的软件。如果您将其交付给的人不能/不会使用它，那么您将永远不会听到它的结束-即使您的金融家最初感到满意，他们也会很快放弃。

**没有计划就是为失败做计划**

您的环境、软件需求、目标受众、网络支持人员、预算和许多其他因素都会极大地影响您提供的解决方案。例如，在我编写代码的环境类型中，我倾向于使用一组有限的工具来交付产品，并且它们可能会因您的环境而异：

*   网络浏览器 - IE/Firefox/Opera/Safari
*   应用程序/文件服务器 - Windows Server、Linux、Unix
*   Web 服务器 - IIS/Apache
*   Web 应用程序开发 - ASP.NET/C#/VB.NET/ASP/PHP/JavaScript/AJAX/MVC
*   控制台应用程序开发 - BAT/C#/VB.NET [如果 BAT 文件可以更简单地完成这项工作，请不要编写完整的 C# 应用程序]。
*   Windows 应用程序开发 - C#/VB.NET
*   数据维护 - C#/VB.NET/Excel/VBA
*   数据库服务器 - SQL Server、MySQL、Oracle
*   网络/数据/文件集成服务 - MSMQ、BizTalk、SonicMQ、FTP

我可以将这些技术中的一种或多种用于我的解决方案，这完全取决于对我的要求。关键是要了解与给定情况相关的内容并仅使用必要的内容。例如，如果单个用户可以轻松使用命令行实用程序，则不要编写完整的 Web 应用程序；如果许多用户需要访问无法轻松安装在其计算机上的应用程序，则不要编写 Windows 应用程序由于用户限制和有限的系统支持人员。不要为几乎不能用鼠标在窗口中导航的用户编写命令行实用程序，也不要指望 Microsoft 专家支持您的基于 *nix 的系统。

提供图表和文档，使诊断问题变得简单，以便在发现问题时*[*并且它们*将会*]，用户/桌面支持可以轻松地将问题缩小到系统中的特定组件。这将使您的生活更轻松，因为他们要么能够自己解决问题，要么为您提供足够的信息来快速简单地解决问题。

**编辑**：作为对您对 UML 的评论的回应，这非常适合此目的，但您必须再次了解您的目标受众。如果你是一个孤独的程序员，正在为一个不了解 UML 的小客户开发系统，那么你也可以提供一个用简单英语装饰的常规流程图。如果您的目标受众是一家软件咨询公司，其业务是软件开发，那么无论如何，UML 都是一个很棒的工具——尤其是与一些 UML 工具一样，您可以让它自动生成您的存根类/方法，以便您自动化一些过程。我倾向于在小公司的小团队中工作，所以我不会尽可能多地使用 UML，并且可能没有像我应该的那样理解它，但这并不是说如果我被要求我不会不要刷它。这是一个很好的工具，可以放在你的工具箱中，但不要仅仅为了它而使用它。您在解决方案的设计/架构/开发中使用的所有内容都应该出于客观原因使用 - 不要只是盲目地使用/学习它，因为有人说“你应该使用它，因为它很棒”。

良好架构的关键是：

*   了解您正在使用的工具
*   了解您应该和不应该将您拥有的工具用于任何特定目的的原因
*   客观地做出明智的决定，不要基于道听途说或情绪。

最重要的是：

*   用你的常识！！如果某些事情听起来或感觉不对，请找出原因，最坏的情况是您会发现自己错了并且您已经纠正了误解/误解，最好的情况是您节省了很多时间来追求不正确和基于这种误解的潜在昂贵选择——无论哪种方式，你都比以前好。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-05-20T18:24:50.650

请记住以下几点：

*   抽象——干净、简单、切中要害
*   重复 - 认真地避免它
*   依赖关系 - 分层架构，其中接口是挂在上面的钩子
*   不变性 - 您处理可变性的次数越多（尤其是在并发环境中），您就越开始欣赏没有状态。
*   假设——不要做出假设，不要让责任泄露。[得墨忒耳法则](http://en.wikipedia.org/wiki/Law_of_Demeter)很有帮助。

与审查或分享您的想法的人一起进行迭代设计和编码非常重要。你会有盲点。尝试结对编程。

从长远来看，测试至关重要。它们保护您的背部，让您自由地改变而无所畏惧。恐惧是导致重复、膨胀和不洁的力量。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-20T18:23:44.163

在我看来，阅读书籍、文章或博客非常重要。但这还不够。尝试找一位经验丰富的开发人员/架构师来指导您。从程序员到架构师的转变需要很长时间，经验是最重要的。

尝试获得可以研究和研究新技术的项目。但是，真的，试着找一个导师。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-20T19:36:55.170

第一步：询问 Stack Overflow 的好人。

好的开始

其他步骤：我很抱歉这些不是您问题的直接答案，但希望它们能帮助您找到它们。

如果你在大学或技术学院附近，看看他们是否有你可以参加的软件工程课程，这可能比你和你的公司能负担得起的时间投入更多，但那些教授类型通常会有很好的建议。

所以你是一个人操作是吗？源代码控制是小菜一碟吧？不再，您必须了解源代码管理是您在整个世界上最好的朋友，而不是您的妻子，不是您的狗，它是您的源代码管理应用程序。

聘请优秀的程序员！一个程序员和另一个程序员之间的差异是巨大的，在你的团队中有一个平庸或糟糕的程序员是一个巨大的问题。在面试中，给他们一些非常难的问题，你可能会搞砸自己，在这个经济环境下，你应该有很多选择，所以一定要找个天才。

之前的答案说要找一位导师，而不是阅读 Joel on Software。

[http://www.joelonsoftware.com/articles/fog0000000043.html](http://www.joelonsoftware.com/articles/fog0000000043.html)

# c++ - C/C++ 的 Markdown 实现

> ID：889434
> 
> 赞同：38
> 
> 时间：2009-05-20T18:18:01.367
> 
> 标签：c++, c, markdown

C 或 C++的[Markdown](http://daringfireball.net/projects/markdown/)的最佳实现是什么？

我通过谷歌找到了这些，并希望评论哪些工作良好，哪些不工作（以及哪些我可能错过了）：

*   [挂钩降价](http://github.com/jgm/peg-markdown/tree/master)
*   [折扣](http://www.pell.portland.or.us/~orc/Code/markdown/)
*   [Cpp-降价](http://cpp-markdown.sourceforge.net/)
*   [libsoldout](http://fossil.instinctive.eu/libsoldout/home)（以前的 libupskirt）

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2009-05-20T19:52:00.380

1.  **[peg-markdown](http://hasseg.org/peg-markdown-highlight/)**依赖于 GLib 和其他第 3 部分工具。我已经测试过了，效果很好。

    **好处：**

    *   根据 GPL 和 MIT 双重许可。
    *   使用内部形式语法，因此易于维护和扩展。

    **缺点：**

    *   依赖于 GLib
    *   提供 C API。
2.  **[Cpp-Markdown](http://cpp-markdown.sourceforge.net/)，**大多数 C++ 代码，但它很慢而且有点臃肿。另一方面，它很容易理解和修改，取决于 boost-1.35。

    **好处**

    *   仅取决于升压
    *   用 C++ 编写，看起来不那么危险
    *   在麻省理工学院获得许可。

    **缺点**

    *   慢（它仍然比 Perl 实现快大约 10 倍，但比 Discount 慢大约 10 倍）
3.  **[折扣](http://www.pell.portland.or.us/~orc/Code/discount/)，**这是我用于博客[http://art-blog.no-ip.info/cppcms/blog](http://art-blog.no-ip.info/cppcms/blog)和 wiki [http://art-blog.no-ip.info/wikipp/en/page/的代码主要](http://art-blog.no-ip.info/wikipp/en/page/main). 它是由铁杆 C 程序员编写的，很难维护（甚至开发人员都在积极维护它）。

    **好处**

    *   极快
    *   用纯 C 编写（没有第三部分依赖）。
    *   积极维护
    *   拥有许可的 3 条款 BSD 许可证

    **缺点**

    *   几乎不可能维护（即使我可以删除/添加一些fatures）。
    *   ~~只有 FILE API，所以我应该调整代码以使其与通用缓冲区一起使用~~。
    *   ~~根据与 GPL 不兼容的 4 条款 BSD 许可证获得许可。如果您不想将它用作 GPL 版软件的一部分，那就有问题了。~~

为什么我这么了解他们？

我正在开发[CppCMS](http://cppcms.sourceforge.net)，所以我需要一个好的降价到 HTML 转换器。当我选择一个（折扣）时，这是唯一的解决方案。从那以后，由于许可问题，我需要更换它。也就是说，我还是很喜欢它，因为它是最快的 Markdown 解决方案。

PS：如果你想要 Discount 的 C++ 包装器，请查看[http://cppcms.svn.sourceforge.net/viewvc/cppcms/cms/trunk/cxxmarkdown/](http://cppcms.svn.sourceforge.net/viewvc/cppcms/cms/trunk/cxxmarkdown/)，它不是最新版本，但已经进行了调整。

**编辑：**我刚刚访问了折扣网站，我发现它也添加了一个非文件 API。所以现在它是真正的图书馆。

**编辑 2：**如果您找到更好的实现或在 FOSS 许可下编写自己的实现，请告诉我 ;)

**编辑 3：**正如 cloose 评论的那样，折扣已将许可证更改为 3 条款 BSD。

# regex - mod_rewrite 可以保留双斜杠吗？

> ID：889435
> 
> 赞同：1
> 
> 时间：2009-05-20T18:18:17.417
> 
> 标签：regex, mod-rewrite

我只是在学习 mod_rewrite 和正则表达式的东西，而我正在尝试做的是将具有任意数量的变量和值的任何名称的变量传递到脚本中，并将它们转发到不同的脚本。

这是我到目前为止所拥有的：

```
RewriteEngine on
RewriteRule ^script\$(.*[\])? anotherscript?ip=%{REMOTE_ADDR}&$1 [L] 
```

除了我传递的参数之一是 URL 并且 http:// 之后的 // 总是被剥离为一个斜杠之外，这一切似乎都有效。

例如，我做

脚本$url= [http://www.stackoverflow.com](http://www.stackoverflow.com)

然后它重定向到：

anotherscript?ip=127.0.0.1&url=http:/www.stackoverflow.com

第二个脚本在单斜杠上窒息。

我意识到保留双斜杠与人们通常对 mod_rewrite 所做的完全相反。有没有办法可以保留双斜线？

**编辑**：在 Gumbo 的帮助下找到了解决方案。

```
RewriteCond %{THE_REQUEST} ^GET\ (.*)/script\$([^\s]+) 
RewriteRule ^script\$(.*) anotherscript?ip=%{REMOTE_ADDR}&%2 [L] 
```

我必须在 RewriteCond 上的 /script 前面添加 (.*)，一旦我这样做了，它就消除了 404 错误，然后只需通过匹配即可。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-20T18:24:03.023

试试这个规则：

```
RewriteCond %{THE_REQUEST} ^GET\ /script\$([^\s]+)
RewriteRule ^script\$.+ anotherscript?ip=%{REMOTE_ADDR}&%1 [L] 
```

请参阅[Diggbar modrewrite-他们如何通过 modrewrite 传递 URL？](https://stackoverflow.com/questions/831355/diggbar-modrewrite-how-do-they-pass-urls-through-modrewrite/869017#869017)为解释。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-20T19:24:26.957

我认为您的 RewriteRule 正则表达式的第一部分可能有问题

```
^script\$(.*[\])? 
```

反斜杠 ( `\`) 用于将特殊字符转义为 litteral 字符，因此您实际上是在尝试匹配右括号 ( `]`)，这是有意的吗？

试试这个

```
RewriteRule ^script\$(.*)? anotherscript?ip=%{REMOTE_ADDR}&$1 [L] 
```

# asp.net-mvc - javascript注入asp mvc

> ID：889441
> 
> 赞同：1
> 
> 时间：2009-05-20T18:19:43.920
> 
> 标签：asp.net-mvc, entity-framework

我创建了控制器：

```
 [Authorize]
    [AcceptVerbs(HttpVerbs.Delete)]
    public ActionResult Delete(int id)
    {
        try
        {
            db.DeleteObject(db.AEROLINEA.FirstOrDefault(x => x.AEROLINEAID == id));
            db.SaveChanges();
        }
        catch { /* TODO:Display message*/ }

        return View();
    } 
```

如果我在 firebug 中执行下一个 javascript，任何登录的人都可以删除航空公司，即使他没有删除权限

```
 var action = "/Airline/Delete/" + recordId;

    var request = new Sys.Net.WebRequest();
    request.set_httpVerb("DELETE");
    request.set_url(action);
    request.add_completed(deleteCompleted);
    request.invoke(); 
```

如何避免这个问题？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-20T18:31:36.533

您可以过滤角色：

**例子：**

```
[Authorize(Roles="Admin")]
    [AcceptVerbs(HttpVerbs.Delete)]
    public ActionResult Delete(int id)
    {
        try
        {
            db.DeleteObject(db.AEROLINEA.FirstOrDefault(x => x.AEROLINEAID == id));
            db.SaveChanges();
        }
        catch { /* TODO:Display message*/ }

        return View();
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-20T19:23:40.407

或者在 View 使用 AntiforgeryToken 和多汁的盐。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-20T19:30:06.167

[Authorize] 不带参数允许您指示用户必须登录。您还可以指定用户/角色，授权访问您的操作

# asp.net - asp .net mvc OnResultExecuting 修改 filterContext 结果

> ID：889442
> 
> 赞同：6
> 
> 时间：2009-05-20T18:19:50.393
> 
> 标签：asp.net, asp.net-mvc

简单的问题。如何在我的控制器中覆盖 OnResultExecuting 方法并强制使用不同的 ActionResult？

示例代码如下。目前，原来的 ActionResutl 继续执行，我的新 RedirectResult 被忽略。

```
RedirectResult redirectResult = new RedirectResult("http://www.google.com");
filterContext.Result = redirectResult;
base.OnResultExecuting(filterContext); 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-05-20T18:26:45.857

如果您覆盖 OnActionExecuted 方法，这是可能的。

**例子：**

```
protected override void OnActionExecuted(ActionExecutedContext filterContext)
  {
      filterContext.Result = new RedirectResult("http://google.com");
      base.OnActionExecuted(filterContext);
  } 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-04-09T13:58:07.043

我想知道完全相同的事情。我搜索了谷歌，发现了你的问题以及其他问题，而且答案似乎都是一样的。使用`IActionFilter.OnActionExecuted`方法。

然而，这并不是一个真正的答案，因为@randy-burden 建议您可以修改/替换结果过滤器中的 RedirectToRouteResult 操作结果。那么为什么不是 RedirectRoute 操作结果呢？

如果您真的想重定向到`IResultFilter.OnResultExecuting`方法中的特定 url，那么您可以执行以下任一操作：

```
RedirectResult redirectResult = new RedirectResult("http://www.google.com");
filterContext.Result = redirectResult;
filterContext.Result.ExecuteResult(filterContext.Controller.ControllerContext);
filterContext.Cancel = true;
base.OnResultExecuting(filterContext); 
```

或者

```
filterContext.HttpContext.Response.RedirectLocation = "http://www.google.com";
filterContext.HttpContext.Response.StatusCode = 302;
filterContext.Cancel = true;
base.OnResultExecuting(filterContext); 
```

在第一个选项中，您手动执行 RedirectResult 并通过这样做`filterContext.Cancel = true`告诉框架您不需要`filterContext.Result`运行。在第二个选项中，您实际上是在做同样的事情，但不是让 RedirectResult 配置您自己做的 Http 响应。

在我的情况下，我想向重定向 url 附加一个额外的查询参数，并告诉框架我想取消重定向操作结果，然后无论如何重定向似乎有点错误，但它确实有效。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-01-04T21:53:09.657

如果您使用的是 MVC5，则可以这样做

```
public void OnResultExecuting(ResultExecutingContext filterContext)
{
   filterContext.HttpContext.Response.Redirect("http://www.google.com");
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2011-08-22T20:50:51.653

我需要从 OnActionExecuting 重定向并最终这样做并且它有效：

```
 filterContext.Result = new RedirectToRouteResult(
                new RouteValueDictionary
                    {{"controller", "Base"}, {"action", "Error"}, {"errorMessage", errorMessage}}); 
```

# silverlight - WPF 到 silverlight：文件 IO 呢？

> ID：889443
> 
> 赞同：0
> 
> 时间：2009-05-20T18:19:55.450
> 
> 标签：silverlight, file-io

我们有一个工作的 WPF 应用程序，我们正在研究通过 Silverlight 在浏览器中运行它。现在最大的问号是；我们将拥有什么样的文件访问权限（无需过多考虑）？

*   我们可以打开服务器端文件吗？
*   我们可以打开客户端文件吗？
*   我们可以获得文件（客户端或服务器端）的更改通知吗？
*   我们可以进行正常的打开/查找/写入/追加操作吗？

（好的链接欢迎作为答案）

* * *

*   [这](http://www.insidercoding.com/post/2008/08/08/Tutorial-Reading-and-Writing-Files-in-Silverlight.aspx)看起来与客户端相关，与[后续/更正一样](http://www.insidercoding.com/post/2008/08/18/Reading-Local-Files-in-Silverlight.aspx)
*   尚未找到有关从服务器加载文件的任何信息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-22T07:52:18.773

1.  服务器端文件：不，除非您通过 Web 服务提供它们。
2.  您可以通过两种方式打开文件。一个是[隔离存储](http://www.switchonthecode.com/tutorials/silverlight-tutorial-using-isolated-storage)，您的应用程序拥有的一个区域，大小有限（尽管您可以要求用户增加）。在这里，您可以阅读、写作和做您想做的事。如果您想访问硬盘，那么您只能读取，并且必须从[文件打开对话框](http://www.silverlightexamples.net/post/Open-File-Dialog-in-Silverlight.aspx)中打开文件。
3.  如果您的意思是通过 FileSystemWatcher - 不，即使在隔离存储中也是如此。很明显，服务器端你可以做你想做的事，因为那里没有 Silverlight。您可以使用[双工 Web 服务](http://msdn.microsoft.com/en-us/library/cc645028(VS.95).aspx)，以便服务器可以在发生文件更改等事情时通知您的 silverlight 应用程序。
4.  在隔离存储中，您可以随心所欲。除此之外，它只是读取操作，用户必须从“文件打开”对话框中选择一个文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-20T18:41:04.453

使其成为 XBAP 并将其部署为完全信任

你有什么样的应用程序？？？？先说出来，我们就可以得出结论了！

更新

*   [WPF Internet 沙盒功能列表（XBAPS 和松散 XAML）](http://scorbs.com/2006/11/09/wpf-internet-sandbox-feature-list-xbaps-loose-xaml/)
*   [Windows Presentation Foundation 安全沙盒](http://msdn.microsoft.com/en-us/library/aa480229.aspx)
*   [银光](http://weblogs.asp.net/scottgu/archive/2007/05/07/silverlight.aspx)
*   [文件访问问题](http://silverlight.net/forums/t/8434.aspx)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2009-05-21T21:31:56.523

如果没有丰富的客户端组件，您将无法使用 silverlight 操作本地文件。该客户端组件必须公开 Web 服务 API 并像本地 Web 服务器一样运行。使用这种方法，您几乎可以完成常规 WPF 应用程序可以做的所有事情。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2009-05-22T07:16:39.383

1.  “我们可以打开服务器端文件吗？” - 是，但需要网络服务（已编辑）
2.  “我们可以打开客户端文件吗？” - 是的，只能通过打开文件窗口或孤立存储中的文件
3.  “我们能否获得文件（客户端或服务器端）的更改通知？” - 是的，但仅限于服务器端。
4.  “我们可以进行正常的打开/查找/写入/追加操作吗？” 使用 Silverlight 中提供的 System.IO.FileStream 类，您可以在内存中操作文本流。但是，您需要通过 Web 服务获取流，使用文件打开窗口打开它，或者从隔离存储中获取。

# python - 在 if 语句中除法

> ID：889446
> 
> 赞同：0
> 
> 时间：2009-05-20T18:20:36.337
> 
> 标签：python

在 Python 中，如果我有一个范围，并且我想遍历它并将每个数字除以另一个数字，我可以在 if 语句中执行此操作吗？

```
a = range(20)
for i in a:
   if i / 3 == True:
      print i 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-20T18:24:57.077

对，但是。

请，请，请。永远不要说`if some expression == True`。这是多余的，导致很多人想知道你在想什么。

更重要的是。

`i/3`是商。

`i%3`是余数。如果 i 是 3 的倍数，`i%3 == 0`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-20T19:19:31.583

这里的每个人都做得很好，解释了如何正确地做。我只是想解释一下你做错了什么。

```
if i / 3 == True 
```

相当于：

```
if i / 3 == 1 
```

因为 True == 1。所以您基本上是在检查 i 除以 3 是否等于 1。您的代码实际上将打印 3 4 5。

我认为您想要做的是检查 i 是否是 3 的倍数。像这样：

```
if i % 3 == 0 
```

您当然可以使用 if 语句来执行此操作。或者您可以将[列表推导](http://docs.python.org/tutorial/datastructures.html#list-comprehensions)与 if 一起使用

```
[x for x in range(20) if x % 3 == 0] 
```

* * *

对于那些如何拒绝投票的人，来自[python 文档](http://www.python.org/doc/2.5.2/lib/node34.html)：

布尔值是两个常量对象 False 和 True。它们用于表示真值（尽管其他值也可以被认为是假或真）。**在数字上下文中（例如，当用作算术运算符的参数时），它们的行为分别类似于整数 0 和 1。**

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-20T18:46:49.717

At the command prompt:

```
>>> [i for i in range(20) if i%3 == 0]
>>> [0, 3, 6, 9, 12, 15, 18] 
```

OR

```
>>> a = [i for i in range(20) if i%3 == 0]
>>> print a
[0, 3, 6, 9, 12, 15, 18]
>>> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-20T18:26:47.977

嗯，您似乎想要一个奇怪的东西-您将 i 除以 3 并检查它是否等于 1。因为 4 == True => False。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-20T18:45:11.203

Short answer: no. You cannot make assignments in if statements in python.

But really, I don't understand what you are trying to do here. Your sample code will only print out the numbers 3, 4, and 5 because every other value of i divided by 3 evaluates to something other than 1 (and therefore false).

If you want to divide everything in a list by 3, you want map(lambda x: x / 3, range(20)). if you want decimal answers, map(lambda x : x / 3.0, range(20)). These will return a new list where each element is a the number in the original list divided by three.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-20T18:55:35.487

在我自己从事 Project Euler 的工作时，我发现“ `if not x % y`”是表示“如果 x 是 y 的倍数”的最简洁的方式。这相当于“ `if x % y == 0`”，在其他答案中可以看到。我认为两者之间没有显着差异。您使用的只是个人喜好问题。

# core-data - 对核心数据的担忧

> ID：889447
> 
> 赞同：2
> 
> 时间：2009-05-20T18:20:42.280
> 
> 标签：core-data

我正准备开始我的第一次核心数据冒险。在评估框架时，出现了两个问题，这让我真正考虑在这个项目中使用 Core Data 还是坚持使用 SQLite。

1.  我的应用程序将严重依赖从外部源导入数据。我知道可以导入核心数据，但处理复杂的关系似乎既复杂又乏味。有没有一种简单的方法来完成复杂的导入？

2.  该应用程序必须能够执行跨多个表或具有多个条件的复杂查询。构建这些谓词和表达式简直让我害怕......

是否值得冒险使用 Core Data 还是我应该坚持使用 SQLite？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-22T17:25:32.407

正如[我](https://stackoverflow.com/questions/523482/core-data-vs-sqlite3/524301#524301)和[其他人](http://www.cocoabuilder.com/archive/message/cocoa/2009/5/18/237007)之前所说，Core Data 确实是一个对象图管理框架。它管理模型对象之间的关系，包括对其基数的约束，并管理级联删除等。它还管理对单个属性的约束。Core Data*恰好*也能够将该对象图持久化到磁盘上。它可以以多种格式执行此操作，包括 XML、二进制和通过 SQLite。因此，Core Data 确实与 SQLite 正交。如果您的任务是处理嵌入式 SQL 兼容数据库，请使用 SQLite。如果您的任务是管理 MVC 应用程序的模型层，请使用 Core Data。在对您的问题的具体回答中：

1.  没有什么魔法可以自动将复杂数据导入任何模型。也就是说，在 Core Data 中相对容易。采用[多通道](https://web.archive.org/web/20130622041930/https://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/CoreData/Articles/cdImporting.html#//apple_ref/doc/uid/TP40003174) [方法](https://web.archive.org/web/20081013001127/https://developer.apple.com/documentation/Cocoa/Conceptual/CoreData/Articles/cdZ104Versioning.html#//apple_ref/doc/uid/TP40002989-SW4)并使用 SQLite 后端可以帮助您减少内存消耗，因为它允许您一次只将数据的一个子集保留在内存中。如果数据集可以保存在内存中，您可以编写自定义持久存储格式，从 Core Data 中直接读取/写入您的旧数据格式（请参阅[原子存储编程指南](https://developer.apple.com/library/archive/documentation/Cocoa/Conceptual/AtomicStore_Concepts/Introduction/Introduction.html)）。

2.  以声明方式构建复合体`NSPredicate`有点冗长，但不应该吓到你。[Predicate Programming Guide](https://developer.apple.com/library/archive/documentation/Cocoa/Conceptual/Predicates/AdditionalChapters/Introduction.html)是一个很好的起点。当然，您也可以使用字符串格式编写谓词，就像字符串格式的 SQL 语句一样。值得注意的是，如上所述，Core Data 中的谓词是在对象和对象图上，而不是在 SQL 表上。如果您*真的*想在表的级别上思考，请坚持使用 SQLite 并编写自己的包装器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-20T18:50:07.090

我真的不能说你的第一点。

但是，关于您的第二点，使用 Core Data 意味着您不必真正担心复杂的查询，因为您可以假装所有关系都已经在内存中正确建立（Apple 的实现细节除外）。连接在数据库环境中的复杂程度并不重要，因为您确实不在数据库环境中。如果您需要获取当前对象的祖父母的第四个孩子，然后找到该孩子的宠物的名字和品种，您所做的就是使用一系列消息或属性在代码中遍历对象树。不用担心加入或任何事情。唯一的问题是它可能真的很慢，具体取决于你的对象的关系，但我不能准确地说出，因为我没有

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T18:43:35.043

If the data importer from an external source is written based on the same core data model (for the targeted/destination side of the import) - nothing will be conceptually different as compare to using/updating the same data (through the core data stack from your actual application).

If you create the data importer without using the core data stack, make sure you learn well the db schema that would be generated/expected by the core data based model. There is nothing magic there - just make sure you follow how the cross entity relationships are implemented and how entity hierarchies are stored.

I had to create recently a data importer from Access database into the core data based Sqlite store as a .NET app. Once my destination core data model was define, I created a small app that populated the Sqlite store with randomly generated entities (including all the expected relationships). Then, I reverse engineered how the core data actually created the Sqlite store for the model and how it handles the relationships by learning from the generated and persisted data. Then, I implemented the .NET based importer/data-transformer according to my observations. At the end, I got perfect core data friendly data store that could be open an modified from the application that was using the core data stack on Mac OSX.

# sharepoint - Sharepoint 作为企业内容管理 (ECM)

> ID：889450
> 
> 赞同：2
> 
> 时间：2009-05-20T18:20:56.243
> 
> 标签：sharepoint

我为一家大型组织工作，我们一直在将 SharePoint 用于文档库。昨天我的老板把我叫到他的办公室问我：

“我听说 SharePoint 是一个 ECM！那么它可以为我们做什么？”。

“您希望我们利用 SharePoint 解决什么样的问题？”，我回答。

“我想知道他们说它是 ECM 是什么意思，以及它如何帮助我们？”，他说。

我告诉他它有文档管理、工作流、记录管理、搜索和其他一些东西。

任何人，他希望我将 SharePoint 作为 ECM 提供的东西的列表放在一起。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-20T18:23:44.210

[您可能会在MS ECM 团队的博客](http://blogs.msdn.com/ecm/)上找到一些有用的信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-20T18:26:05.670

Microsoft Office Sharepoint Server 具有大量可用的内容管理系统。以前的 Microsoft 内容管理服务器已停产，该功能被置于 Sharepoint 保护伞下。通常这是指网络内容，但老实说，它可以是与企业相关的任何类型的内容。它旨在成为所有主要 WCMS 的直接竞争对手，特别关注企业（治理、审计、安全模型等）。

话虽如此，MOSS 的 EWCM 的当前迭代非常糟糕。如果您可以将您的 CM 策略开发为与 MOSS 平行，那么它可以工作，否则它会比它的价值更痛苦。使用 SP 进行文档管理，使用其他东西进行内容管理。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-06-16T11:47:25.457

Sharepoint 是一个仅限于 windows 环境的协作平台

我认为给 Alfresco 社区（实验室）一个机会，因为它“充当”Sharepoint 服务器，因此 Microsoft Office 套件不会注意到差异，但您的钱包会...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-08-01T18:45:10.777

呃... 觉得老板花的钱太多了。但实际上，我们不应该部署技术解决方案来解决业务问题。

功能列表可在以下位置找到

[http://sharepoint.microsoft.com/product/capabilities/Pages/default.aspx](http://sharepoint.microsoft.com/product/capabilities/Pages/default.aspx)

# .net - .Net 框架的区别？

> ID：889459
> 
> 赞同：0
> 
> 时间：2009-05-20T18:23:09.157
> 
> 标签：.net

.Net 框架 1.1、2.0、3.0 和 3.5 在功能方面有什么区别？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-05-20T18:24:38.437

请阅读[.NET Framework - 版本](http://en.wikipedia.org/wiki/.NET_Framework#Versions)。最具体地说，这些部分：

> *   [1.1 与 1.0 相比的变化](http://en.wikipedia.org/wiki/.NET_Framework#Changes_in_1.1_on_comparison_with_1.0)
> *   [2.0 与 1.1 相比的变化](http://en.wikipedia.org/wiki/.NET_Framework#Changes_in_2.0_in_comparison_with_1.1)
> *   [自 3.0 版以来的更改](http://en.wikipedia.org/wiki/.NET_Framework#Changes_since_version_3.0)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-20T20:31:23.890

以下是我回忆进展的方式：

v1.0 -- 天哪，这真的应该叫BETA

v1.1——哦，那更好了，现在它大部分时间都能正常工作。

v2.0 -- 那是什么，你真的只是想将垃圾收集添加到 C++ 并限制多重继承。

v3.0 -- WPF、WCF、WF -- OMFG，你想让我学习一套全新的 API 来完成我刚刚学到的完全相同的事情吗？你在开玩笑吧？

v3.5——LINQ（尤其是 SQL）——哦，太好了，在过去的 10 年里，是什么造就了 6 种不同的数据访问技术？来吧，让所有人都学习 Python 或 Ruby。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-20T18:25:45.157

Wikipedia 似乎对从 1.0 到 3.5 的框架变化有最好的概述：

[http://en.wikipedia.org/wiki/.NET_Framework#Versions](http://en.wikipedia.org/wiki/.NET_Framework#Versions)

MSDN 还对每个框架版本进行了概述：

v1.1
亮点：并行执行、安全增强、IPv6 支持
[http://msdn.microsoft.com/en-us/library/9wtde3k4.aspx](http://msdn.microsoft.com/en-us/library/9wtde3k4.aspx)

v2.0
亮点：64 位支持、泛型、System.IO.Compression 等（大量更新）
[http://msdn.microsoft.com/en-us/library/t357fb32.aspx](http://msdn.microsoft.com/en-us/library/t357fb32.aspx)

v3.0
亮点：Windows 通信、工作流和演示基础
[http://msdn.microsoft.com/en-us/library/bb822048.aspx](http://msdn.microsoft.com/en-us/library/bb822048.aspx)

v3.5
亮点：HashSet、Linq 介绍、表达式树
[http://msdn.microsoft.com/en-us/library/bb332048.aspx](http://msdn.microsoft.com/en-us/library/bb332048.aspx)

v3.5 SP1
亮点：DataRepeater 控件、WPF 性能改进
[http://msdn.microsoft.com/en-us/library/cc713697.aspx](http://msdn.microsoft.com/en-us/library/cc713697.aspx)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-05-20T18:28:05.543

这里有一个类似的博客，展示了[.NET Framework 1.1 及更高版本的差异和新增功能](http://dufoli.wordpress.com/2007/09/11/net-framework-11-20-30-35-21/)

**.NET 框架 1.0：**

这是 .NET Framework 的第一个版本，于 2002 年 2 月 13 日发布，适用于 Windows 98、Me、NT 4.0、2000 和 XP。

**.NET 框架 1.1：**

这是 .NET Framework 的第一个版本，作为 Windows 操作系统的一部分，正在发货。.NET Framework 1.1 版对 .NET Framework 1.0 版进行了扩展，增加了新功能、对现有功能的改进以及对文档的增强。

**.NET 框架 2.0：**

它在框架的类中带来了很多演变并重构了一些控制。这里的另一个重大发展是支持以下语言的语言：

```
* generics
* anonymous methods
* partial class
* nullable type
* … 
```

**.NET 框架 3.0：**

这个框架是在Vista下开发应用程序的关键。它只是一组使用 XML 映射的程序集：

```
* Communication (WCF)
* View (WPF)
* Workflow (WWF)
* Digital identity (CardSpace) 
```

框架还是它背后的.NET framework2.0。对于很多开发人员来说，这不是一个真正的框架。

**.NET 框架 3.5：**

它在语言中实现了 Linq 进化。所以我们在课堂上有以下演变：

```
* Linq for SQL, XML, Dataset, Object
* Addin system
* p2p base class
* Active directory
* ASP.NET Ajax 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-20T18:25:57.933

特征！

*   在 2.0 中，最大的特性是泛型。
*   在 3.0 中，最大的特性是 WPF、WCF 和 WWF
*   在 3.5 中，最大的特性是 Linq

在所有版本中，都有更多功能，但在我看来，这些是最大的标签。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-05-20T18:48:51.040

*If you want a serious answer to this question, you would check the Microsoft Website, Wikipedia, or the other questions on SO that ask the same thing. Here're my two cents...*

Let's see... version 1.x, Microsoft seemed poised to take over all platforms at all moments in all languages. Mono was looking promising for other platforms, and it was a pretty exciting moment. I was proud to develop on Windows!

When MS .Net 2.0 came out, Mono was in a stable, good state, but it was obviously going to lag one version behind Microsoft .Net forever. It was obvious that Microsoft not only wasn't going to support Mono, but was involved in a series of lawsuits with Novell. Do they put cash into Mono development?

Now 3.5 is out, and it's clear: if you're not developing for Windows (that is, your deployment platform is Windows) and you're not a Mono enthusiast (there are millions, but I think there are 10x as many Java people as Mono-based .Net devs), you no longer care about .Net whatsoever.

So basically, Microsoft was poised to take over the world for the second time, but they decided that selling Windows was more important than one-platform-to-rule-them-all. And they may be right... they've got enough cash to still do something very interesting.

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-05-20T18:25:26.560

[维基百科](http://en.wikipedia.org/wiki/.NET_Framework#Versions)很好地列出了版本之间的差异。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-05-20T18:26:03.847

看看[这篇维基百科文章](http://en.wikipedia.org/wiki/.NET_Framework)。您还需要将 4.0 添加到您的列表中......

# nhibernate - 使用 nhibernate 从 db 获取特定数量的行

> ID：889470
> 
> 赞同：1
> 
> 时间：2009-05-20T18:24:53.130
> 
> 标签：nhibernate

如何一次从 nhibernate 中获取特定数量的记录，例如 10 条或 15 条，而不是所有记录。实际上，我使用criteria.setmaxresults() 得到了答案。但我的问题是我怎样才能获得前 10 条记录，然后是接下来的 10 条记录，然后......接下来的 10 条......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-20T18:33:29.960

`SetMaxResults()`结合使用`SetFirstResult()`

# ruby-on-rails - 尝试访问时不显眼地为关联创建记录？

> ID：889477
> 
> 赞同：3
> 
> 时间：2009-05-20T18:25:29.603
> 
> 标签：ruby-on-rails, ruby, model-view-controller, unobtrusive

我在两个模型之间有一个简单的 has_one/belongs_to 关系。

这是我的应用程序中的一个新关联，因此有许多记录尚未创建关联记录。

在我的整个应用程序中，我假设模型具有关联并且我正在访问它的属性和方法。但是，由于该关联不存在，我遇到了很多错误。

我想做的是在第一次通过它的任何方法和属性访问时，不显眼地动态构建关联的记录。记录中有数据并不重要，我只需要它存在，这样我调用的那些方法就可以构建数据。

**编辑：**我不想在我试图访问关系的所有实例上检查并创建记录，所以理想情况下，这需要在模型本身上完成，而不是在我的任何地方的控制器中完成。

有什么想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-20T20:17:30.500

这就是我们最终得到的结果。它不是我写的（一位同事写的），但它通过了我为这个案例编写的先前失败的测试。

```
def stats_with_create
  stats_without_create || create_stats
end
alias_method_chain :stats, :create 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-20T18:35:50.363

在控制器中，您可以在`show`方法中添加这样的内容（未经测试，但它应该给您一个想法：

```
@thing = Thing.find params[:id]
if @thing.other_thing.nil?
  @thing.other_thing = OtherThing.new.save!
  @thing.save!
end 
```

这并不理想，您可以通过在 Thing 模型中放置一个方法来检查并创建相关模型而不是将其放入控制器中来清理它。

另一种选择是创建一个用于访问 的新访问器`other_thing`，并根据需要创建它。

但是，正确的做法可能是在迁移中或直接修复您的数据，正确创建相关模型。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-20T19:05:36.963

直接的答案是覆盖关系的方法。调用时它将检查记录是否存在，如果不存在则创建它。

但是，我建议您使用迁移来预先创建所有记录。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-20T19:12:45.780

我以前做过这种事情，但不是在模型层面上。我已经在控制器级别使用 before_filter 完成了它，该过滤器在所有需要访问已经存在或不存在的模型关联的方法之前运行。

我刚刚意识到你可以在模型中使用 after_find 和 after_initialize 回调。

你可以坚持：

```
def after_initialize
   association.build if association.nil?
end 
```

在您的模型中，它应该可以解决您的问题..（免责声明：未经我测试）:)

# c# - System.Security.Policy.Evidence、Web 服务和破坏 LoH

> ID：889480
> 
> 赞同：2
> 
> 时间：2009-05-20T18:25:44.423
> 
> 标签：c#, .net, out-of-memory, heap-fragmentation

已开发的新应用程序大量使用 Web 服务。我们开始定期处理内存不足异常（随着使用量的增加）。在查看内存转储时，我注意到有大量相同大小的字节 []。查看这些 byte[] 的句柄，我注意到它们被 System.Security.Policy.Evidence 引用

经过进一步审查，我将这些内存分配确定为其中包含我们的 Web 服务类的实际程序集 (dll)（特别是其中 2 个程序集在内存中的 128 次和 115 次）。我在这里找到了一些信息-> blogs.msdn.com/tess/archive/2008/06/25/asp-net-memory-leak-byte-arrays-rooted-in-system-security-policy-evidence.aspx

在这里 --> blogs.javista.com/2009/03/18/best-practices-for-crm-memory-usage/

但我还没有找到很多关于这个问题的其他参考资料。（.NET 框架将 Web 服务程序集加载到内存中以检查安全策略）。

目前，我看到的唯一解决方案之一是将 Web 服务的程序集分成引用库的较小程序集。

我很困惑为什么 .NET 框架必须将整个程序集加载到内存中以检查策略，并想看看其他人是否遇到过这个问题以及您的解决方案是什么。

谢谢，丹

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-17T05:07:17.743

我在 Framework 3.5 SP1 的内存转储中看到了同样的情况。

Tess 的博客谈到这些程序集被存储在 ASP.NET 缓存中，以及缓存刷新程序集，导致它们被重新加载。建议是当系统内存不足时缓存将刷新它们，这是 ASP.NET 缓存中任何内容的默认行为。苔丝说修补程序解决了这个问题。

当前版本的 System.Web.Services 包含在 System.Web.Services.Protocols.ServerProcotol 的 AddToCache 方法中：

```
 HttpRuntime.Cache.Insert(this.CreateKey(protocolType, serverType), value, null, Cache.NoAbsoluteExpiration, Cache.NoSlidingExpiration, CacheItemPriority.NotRemovable, null); 
```

请注意，这是明确将缓存项设置为永不过期且永不可移除。我想这就是修补程序为解决问题而更改的内容——不再自动刷新缓存。

现在，在遇到此问题的应用程序中，我们有一些代码在某些情况下手动清除 ASP.NET 缓存中的所有内容。我认为这就是我们看到问题的原因：虽然修补程序停止了 ASP.NET 缓存自动从缓存中清除这些程序集，但我们的代码正在出现并手动清除缓存。

我想知道您的应用程序（或其任何第三方组件）是否正在对可能删除这些项目的缓存做任何事情？

# asp.net - Changing WebControl ID Inside of a Repeater

> ID：889485
> 
> 赞同：0
> 
> 时间：2009-05-20T18:26:10.927
> 
> 标签：asp.net, web-controls

```
<ItemTemplate>
    <asp:Label runat="server"><%#DataBinder.Eval(Container.DataItem, "Question")%></asp:Label>
    <asp:DropDownList runat="server" id="<%#DataBinder.Eval(Container.DataItem, "QuestionID")%>">>
        <asp:ListItem value="1" text="Yes" />
        <asp:ListItem value="0" text="No" />
    </asp:DropDownList>
<ItemTemplate> 
```

This is roughly what I'm trying to do. Obviously, the implementation is faulty, but I can't find any information on how I'd go about this in practice. Any help is appreciated.

Edit: What I'm trying to do exactly is add a DropDownList for each item in this Repeater, and upon submission of the form, use the ID's of each Yes/No answer to input into a database. The SqlDataReader that I'm using has two fields: The question content and the questionID.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-20T18:36:07.727

I think you'd be better off using the built in support for IDs inside a Repeater. If the goal is to assign it an ID to make it easy to find the proper control after the data has been bound you might try something like this:

```
<asp:Repeater ID="Repeater1" runat="server>
    <ItemTemplate>
        <asp:Label ID="QuestionID" Visible="False" Runat="server"><%#DataBinder.Eval(Container.DataItem, "FieldContent")%></asp:Label>
        <asp:DropDownList ID="MyDropDownList" Runat="server"></asp:DropDownList>
    </ItemTemplate>
</asp:Repeater> 
```

Then, in your code you can loop through the items in the Repeater until you find the label you're looking for:

```
foreach (RepeaterItem curItem in Repeater1.Items)
{
    // Due to the way a Repeater works, these two controls are linked together.  The questionID
    // label that is found is in the same RepeaterItem as the DropDownList (and any other controls
    // you might find using curRow.FindControl)
    var questionID = curRow.FindControl("QuestionID") as Label;
    var myDropDownList = curRow.FindControl("MyDropDownList") as DropDownList;
} 
```

A Repeater basically consists of a collection of RepeaterItems. The RepeaterItems are specified using the ItemTemplate tag. Each RepeaterItem has its own set of controls that are, by the very nature of a Repeater, associated with each other.

Say you're pulling the Repeater data from a database. Each Repeater item represents data from an individual row in the query results. So if you assign the QuestionID to a label and the QuestionName to a DropDownList, the ID in the label would match up with the name in drop down.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2010-05-04T20:59:59.010

Could you remove the control from the markup file, and hook the repeater's onItemDataBound event. In that event, you should be able to create the dropdown control "manually", assigning whatever ID you want.

# c# - 在 Silverlight 中显示正在播放的媒体文件的波形？

> ID：889491
> 
> 赞同：2
> 
> 时间：2009-05-20T18:26:56.153
> 
> 标签：c#, silverlight

在silverlight中播放声音文件时，我想显示输出的波形（或至少获得幅度值）。有没有标准的方法来做到这一点？

编辑：这在 SL3 中可能吗？还是SL4？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-12-31T19:54:53.280

使用：[http ://salusemediakit.codeplex.com/](http://salusemediakit.codeplex.com/)

# asp.net-mvc - 使用asp.net-mvc 的正确方法是什么？对项目的评论列表

> ID：889492
> 
> 赞同：0
> 
> 时间：2009-05-20T18:27:15.310
> 
> 标签：asp.net-mvc

你有一个项目的一些信息，你有一个关于该项目的评论列表

您将如何使用路线管理添加/删除/编辑？

现在我有这个：

```
/item/details/7/editcomment/1
/item/details/7/delcomment/1
/item/details/7/addcomment 
```

这是正确的方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-20T19:04:09.480

*   /comment/edit/{commentid}
*   /comment/delete/{commentid}
*   /comment/add/{itemid}

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-20T18:34:46.823

我建议您删除“详细信息”：

> /item/7/editcomment/1
> /item/7/delcomment/1
> /item/7/addcomment

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-20T19:25:10.810

我想指出，出于安全原因，您不希望使用这种方法来删除项目。始终使用 POST 来执行任何修改操作。否则，有人可能会尝试通过插入带有删除链接的图像来滥用系统。

当然，如果您只是将用户重定向到确认页面并且他们必须单击提交按钮来启动操作，那也没关系。

阅读更多关于斯蒂芬瓦尔特的博客：

[ASP.NET MVC 技巧 #46 – 不要使用删除链接，因为它们会造成安全漏洞](http://stephenwalther.com/blog/archive/2009/01/21/asp.net-mvc-tip-46-ndash-donrsquot-use-delete-links-because.aspx)

# java - 如何让我的简单 Java Web 服务正常工作？

> ID：889498
> 
> 赞同：0
> 
> 时间：2009-05-20T18:28:50.267
> 
> 标签：java, web-services, xampp

在一个教科书练习中，我们制作了 3 个 Java 类和一个 XML 文件。

我的问题是：

1.  我应该在哪里保存这些 .java 文件？我使用的是 NetBeans 6.5，所以默认是我的文档。
2.  我应该如何命名 XML 文件？

我正在使用 XAMPP 所以`WSDL.xml`我放入的文件`xampp/httdocs`但是当我打开`127.0.0.1:9876[/]ts?wsdl`它时说找不到页面。

注意：我**不需要**知道如何创建 Java 类。我需要知道将定义类的*文件放在哪里。*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-20T18:40:42.287

Subjective opinion:
If you don't know such basic things such as placing java files into right directories, perhaps, you should first try a few much simpler examples, than creating a web service.

In Netbeans, you can **create a Java project**, than add Java classes by doing
**File -> New... -> Java -> Java Class**

To learn how to use Netbeans, visit:
[**http://netbeans.org/kb/**](http://netbeans.org/kb/)

Especially [**"NetBeans IDE Java Quick Start Tutorial"**](http://www.netbeans.org/kb/docs/java/quickstart.html) might be helpful to start.

Furthermore, you don't run Java webapps with some kind of XAMP, but with **Java web servers** such as **Glassfish** or **Apache Tomcat**.
Both these servers are bundled with Netbeans when you use Netbeans Java profile (see table at [**Netbeans download page**](http://www.netbeans.org/downloads/index.html))

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-21T03:32:42.870

查看随书提供的[示例代码。](http://examples.oreilly.com/9780596521127/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-20T19:04:25.220

我认为您应该遵循 ivan_ivanovich_ivanoff 的建议并从基础开始。

完成后，您可能想回到这里阅读我对[Stack Overflow: Simple Java web services](https://stackoverflow.com/questions/193602/simple-java-web-services)问题的回答。它假定您知道如何编译 Java 类以及如何将其打包到 JAR 中，但由于这些都是您必须学习的非常基本的任务，它可能会帮助您启动和运行 Web 服务。

# language-agnostic - 演示 (FX) 编码教程？

> ID：889501
> 
> 赞同：13
> 
> 时间：2009-05-20T18:29:30.110
> 
> 标签：language-agnostic, demoscene

我正在寻找一些好的教程来帮助我开始进行[演示编码](http://en.wikipedia.org/wiki/Demo_(computer_programming))。我在 CG 方面有一些背景，但这都是理论上的。
有很多常规的 3D 编程教程，但我特别想找一些老式的 2D 东西。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2009-05-20T18:40:56.263

首先加入[pouet.net](http://pouet.net/)。这是[所有带有源代码的产品的列表](http://www.pouet.net/sourceprod.php)。

在 ircnet、#ukscene、#pouet.net、#coders、#Breakpoint、#bitfellas、#macscene 上闲逛

[iq](http://iquilezles.org/prods/)也写了大量的[教程](http://iquilezles.org/www/)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2009-05-20T18:34:02.520

[在 demoscene 杂志Hugi](http://www.hugi.scene.org/main.php?page=hugi)问题中有一些很好的演示编码示例。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-05-20T18:44:24.667

Scene.org 有一个很好的旧学校效果和东西的资源[集合](http://www.scene.org/dir.php?dir=%2Fresources%2Fcode/)。虽然很难浏览。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-13T10:59:28.567

[亚历克斯·尚巴德](http://www.flipcode.com/archives/articles.shtml)（Alex Chambard）在古老的翻转码上的演示艺术。

# asp.net - ASP.NET 应用程序和本地时区

> ID：889504
> 
> 赞同：3
> 
> 时间：2009-05-20T18:30:09.267
> 
> 标签：asp.net, iis, timezone

我有一个托管在时区 A 的 ASP.NET 应用程序，并且正在由时区 B 中的用户使用。即使托管环境位于 A 中，是否有任何方法可以将整个 Web 应用程序的时区设置为 B？我已经在 web.config 中使用适当的 uiCulture 和文化值设置了全球化标签，它们在一周中的几天和其他本地化设置中工作得很好，不幸的是他们没有调整时钟：/ 我能做的最简单的事情是什么实现调整，所以当我在应用程序中执行 DataTime.Now 时，我得到时区 B 中的当前时间，而不是 A。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-20T18:34:07.650

假设您有权进行此更改：假设应用程序的所有用户共享相同的时区，我的建议是将机器的时区设置为 B。

否则：存储来自 Utc 的时区 B 的偏移量并使用该组合，尽管这可能会遇到夏令时问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-22T20:37:06.193

通过 JavaScript Date.getTimezoneOffset() 调用以分钟为单位获取客户端时区偏移量，并通过隐藏的输入字段将其传递回服务器。

服务器端使用 DateTime.UTCNow 以 UTC 格式获取服务器时间。

服务器端使用 DateTime.SpecifyKind 根据需要在服务器本地时间和 UTC 之间进行转换。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-08-03T19:16:24.520

我最近不得不在我正在制作的网站中考虑查看者的时区。所以我首先获得了服务器的 UTC 时间，然后添加了查看器的时区（通过客户端脚本获得）。

然后在我的代码中，我将其用作偏移量。

同意这是一种非常糟糕的编程方式，而且一点也不简单或高效，但这对我来说似乎是唯一的方式。

# .net - 子类未显示 SOAP 文档中的继承属性（ASMX Web 服务）

> ID：889505
> 
> 赞同：0
> 
> 时间：2009-05-20T18:30:23.650
> 
> 标签：.net, web-services, inheritance

我正在编写一个 .NET 网络服务（VB.NET）。DisplayChild() 方法之一返回 Child 类型的对象。孩子被定义：

```
<Serializable()> _
Public Class Child
    Inherits BaseClass
    Property NotInInheritedProperties() as Object
    ...
    End Property
End Class 
```

BaseClass 看起来像：

```
<Serializable()> _
Public MustInherit Class BaseClass

    Property BaseProperty() as Object
    ...
    End Property
End Class 
```

但是，在显示从 DisplayChild() 返回的 SOAP 定义中，输出中显示的唯一属性是 NotInInheritedProperties 属性。那么我的问题是，如何让 BaseClass 中的属性显示在 SOAP 文档中？最初我认为 BaseClass 上没有 Serializable 属性是问题所在。但是，即使更改了它，它仍然无法正常工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-20T20:28:13.880

即使当您通过 Web 浏览器查看服务时，SOAP 定义上没有显示 BaseProperty，它看起来仍然是 WSDL 的一部分。如果您查看 WSDL（YourService.asmx?WSDL，或 YourService.asmx 上显示“服务描述”的链接），您应该会看到 BaseClass 和 Child 之间的继承，类似于：

```
<s:complexType name="Child">
  <s:complexContent mixed="false">
    <s:extension base="tns:BaseClass">
      <s:sequence>
        <s:element minOccurs="0" maxOccurs="1" name="NotInInheritedProperties" />
      </s:sequence>
    </s:extension>
  </s:complexContent>
</s:complexType>
<s:complexType name="BaseClass" abstract="true">
  <s:sequence>
    <s:element minOccurs="0" maxOccurs="1" name="BaseProperty" />
  </s:sequence>
</s:complexType> 
```

如果您的 Web 服务的消费者看不到该属性，那么这可能是其特定实现的问题（我使用过一些“启用了 Web 服务”的企业应用程序，这些应用程序绝对会在返回复杂的 Web 服务上窒息类型）

# asp.net-mvc - XSLT 可以呈现 MVC ASP.NET 控件/代码吗？

> ID：889508
> 
> 赞同：1
> 
> 时间：2009-05-20T18:31:50.060
> 
> 标签：asp.net-mvc, xslt, controls

有没有办法直接在 .NET Framework 下的 XSLT/XSL 转换文件中呈现 ASP.net MVC 控件或代码？如果是这样，你能给我一个样本或链接吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-20T21:16:54.093

我正在阅读 Apress 的一本很棒的 ASP.NET MVC 书：http: [//www.amazon.com/Pro-ASP-NET-Framework-Steven-Sanderson/dp/1430210079](https://rads.stackoverflow.com/amzn/click/com/1430210079)

在第 10 章中，有一节称为“实现自定义视图引擎”，它逐步向您展示如何实现 XSLT 视图引擎。它实际上非常简单（希望我可以发布它，但不想侵犯版权）。

我强烈推荐这本书给任何人（我在他们的网站上购买并下载了电子书），作者真的很好地解释了事情。... OTOH，我建议您避免使用那些带有作者照片的红书...除非您喜欢主要由屏幕截图和代码转储组成的书籍，而很少努力清楚地解释概念。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-20T18:50:11.223

虽然这是可能的（使用与 html 相同的策略，但经常骚扰 VS 以使其工作，并对 XSLT 太顽固而无法触及的任何内容使用原始文本输出），但这几乎绝对不是你真正想要的做。即使您已经拥有用于生成 html 文档的 XSLT，这在我看来也是个坏主意。相反，您应该尝试搜索“Asp.Net Data Binding XML”。您会发现这样的结果[，](http://www.w3schools.com/aspnet/aspnet_xml.asp)这可能会给您带来更好且更易于维护的结果。

# sql - 两条sql语句有什么区别？

> ID：889511
> 
> 赞同：0
> 
> 时间：2009-05-20T18:32:56.780
> 
> 标签：sql, sql-server-2005, triggers

再会

我们要做的只是在触发器内确保用户没有插入两个名称中包含“单独”的费用。这些费用需要单独处理。

出于某种原因，sql 的顶部似乎在两周前停止工作。为了解决它，我以第二种方式重新编码并获得正确的结果。我感到困惑的是，为什么第一部分*似乎*在过去几年中有效，而现在却没有？

```
SELECT  @AloneRecordCount = count(*) 

FROM  inserted i 
      INNER JOIN deleted d on i.id = d.id 

WHERE  i.StatusID = 32 
      AND d.StatusID <> 32 
      AND i.id IN  
      (SELECT settlementid FROM vwFundingDisbursement fd
      WHERE fd.DisbTypeName LIKE  '%Alone'
      AND fd.PaymentMethodID = 0)

SELECT  @AloneRecordCount = count(i.id) 

FROM    inserted i INNER JOIN
        deleted d on i.id = d.id
        JOIN vwFundingDisbursement fd on i.id = fd.settlementid

WHERE   i.StatusID = 32 
        AND d.StatusID <> 32  
        AND fd.DisbTypeName like '%Alone'
        AND fd.PaymentMethodID = 0 
```

这是在 SQL Server 2005
上没有错误，相反，顶部语句将仅返回 1 或零
，而底部语句将返回找到的实际数字。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-20T18:39:36.797

你有一个空的 vwFundingDisbursement.settlementid 值吗？是最近出现的吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-20T19:18:42.320

架构（或至少如何创建视图）会有所帮助，但这里有一个猜测......

如果您在 vwFundingDisbursement 中查找分配类型名称中值为“Alone”的多行，则 JOIN 将返回多行，因为您的源表 (INSERTED) 连接到视图中的多行。但是，如果您使用 IN，SQL 不在乎它是否返回多个匹配项，它只会给您一行。

举个例子：

```
CREATE TABLE dbo.Test_In_vs_Join1
(
     my_id     INT     NOT NULL
)

CREATE TABLE dbo.Test_In_vs_Join2
(
     my_id     INT     NOT NULL
)

INSERT INTO dbo.Test_In_vs_Join1 (my_id) VALUES (1)
INSERT INTO dbo.Test_In_vs_Join1 (my_id) VALUES (2)
INSERT INTO dbo.Test_In_vs_Join1 (my_id) VALUES (3)
INSERT INTO dbo.Test_In_vs_Join1 (my_id) VALUES (4)
INSERT INTO dbo.Test_In_vs_Join1 (my_id) VALUES (5)

INSERT INTO dbo.Test_In_vs_Join2 (my_id) VALUES (1)
INSERT INTO dbo.Test_In_vs_Join2 (my_id) VALUES (1)
INSERT INTO dbo.Test_In_vs_Join2 (my_id) VALUES (2)
INSERT INTO dbo.Test_In_vs_Join2 (my_id) VALUES (3)
INSERT INTO dbo.Test_In_vs_Join2 (my_id) VALUES (3)

SELECT
     T1.my_id,
     COUNT(*)
FROM
     dbo.Test_In_vs_Join1 T1
INNER JOIN dbo.Test_In_vs_Join2 T2 ON
     T2.my_id = T1.my_id
GROUP BY
    T1.my_id

SELECT
     T1.my_id,
     COUNT(*)
FROM
     dbo.Test_In_vs_Join1 T1
WHERE
    T1.my_id IN (SELECT T2.my_id FROM dbo.Test_In_vs_Join2 T2)
GROUP BY
    T1.my_id 
```

附带说明一下，像这样将一列埋在另一列中是违反规范化形式的，只是提出问题。当您发现时，在触发器中执行这种业务逻辑也是一条危险的路径。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-20T18:56:20.400

计数（*）
计数（i.id）

将根据 NULL 值返回不同的计数

[在 SQL 中，count(*) 和 count('x') 有什么区别？](https://stackoverflow.com/questions/59322/in-sql-whats-the-difference-between-count-and-countx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-20T19:29:13.313

我假设这个 MSSQL(?) 并且它正在处理一个 UPDATE 语句，因为您要加入两个插入/删除的表？

这个触发器在哪个表上？

# nhibernate - nhibernate 多对多映射 - 映射表中的附加列？

> ID：889513
> 
> 赞同：11
> 
> 时间：2009-05-20T18:33:58.370
> 
> 标签：nhibernate, nhibernate-mapping

我有以下映射定义：

```
 <class name="Role" table="Role" optimistic-lock="version" >

    <id name="Id" type="Int32" unsaved-value="0" >
      <generator class="native" />
    </id>

    <property name="RoleName" type="String(40)" not-null="true" />

    <bag name="UsersInRole" generic="true" lazy="true" cascade="all" table="UserRoles" >
      <key  column="RoleId" />
      <many-to-many column="UserId" class="SystemUser, Domain"/>
    </bag> 
```

和

```
<id name="Id" type="Int32" unsaved-value="0" >
  <generator class="native" />
</id>
<property name="UserName" type="String(40)" not-null="true" unique="true" /> 
```

此映射生成映射表 UserRoles，其中包含两列 - RoleId 和 UserId。

但是，我想为该关系添加额外的属性——即一些定义关系状态的枚举值以及有效的开始和结束日期。

是否可以在 nhibernate 中进行，或者我是否需要在此处添加其他类并将关系 m-to-m 更改为 2 个关系 [user] 1-to-m [user_role] m-to-1 [role] ？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-05-21T15:28:50.920

您需要在代码中添加一个额外的类，例如 UserRole，以保留额外的属性。

当涉及到映射时，可以将其映射为您提到的类。但我也认为它可以映射为角色映射中的复合元素：

```
<set name="UsersInRole" lazy="true" table="UserRoles" >
  <key  column="RoleId" />
  <composite-element class="UserRole">
     <many-to-one name="User" column="UserId" not-null="true"/>
     <propery name="RelationState" not-null="true"/>
     <propery name="StartDate" not-null="true"/>
     <propery name="EndDate" not-null="true"/>
  </composite-element>
</set> 
```

所有属性都必须不为空，因为它们已成为 UserRoles 表的主键的一部分。有关更多信息，请参阅：

*   [Nhibernate 复合元素映射](http://mhinze.com/archive/nhibernate-composite-element-mapping/)
*   [7.2\. 依赖对象的集合](http://www.hibernate.org/hib_docs/nhibernate/html/components.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-20T18:35:22.953

添加额外的类。

# asp.net-mvc - ASP.Net MVC 控制器构造函数中的会话 null

> ID：889516
> 
> 赞同：91
> 
> 时间：2009-05-20T18:34:08.977
> 
> 标签：asp.net-mvc, session

为什么Controllers的构造函数中Session为null？可以从 Action 方法访问它。据推测，因为 MVC 路由框架负责更新控制器，所以它当时还没有（重新）实例化会话。

有谁知道这是否是设计使然，如果是，为什么？

[我已经设法通过使用延迟加载模式来规避这个问题。]

* * *

## 回答 #1

> 赞同：82
> 
> 时间：2009-07-31T13:09:12.547

Andrei 是对的——它是空的，因为在 ASP.NET MVC 框架下运行时，HttpContext（以及因此 HttpContext.Session）在构造控制器类时没有设置，但它稍后设置（“注入”）由 ControllerBuilder 类。如果您想更好地了解生命周期，您可以下拉 ASP.NET MVC 框架（源可用），或参考：[this page](http://www.codethinked.com/post/2008/09/27/ASPNET-MVC-Request-Flow.aspx)

如果您需要访问 Session，那么一种方法是覆盖“OnActionExecuting”方法并在那里访问它，因为届时它将可用。

但是，正如 Andrei 所建议的，如果您的代码依赖于 Session，那么编写单元测试可能会很困难，所以也许您可以考虑将 Session 包装在一个帮助器类中，然后可以将其换成一个不同的、非在单元测试下运行时的 web 版本，因此将控制器与 web 分离。

* * *

## 回答 #2

> 赞同：63
> 
> 时间：2012-09-28T07:12:02.027

除了这里的其他答案，虽然`Controller.Session`没有在构造函数中填充，但您仍然可以通过以下方式访问会话：

`System.Web.HttpContext.Current.Session`

标准警告是，这可能会降低控制器的可测试性。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2009-06-19T23:31:37.777

Session 在生命周期的后期注入。为什么你仍然需要构造函数中的会话？如果 TDD 需要它，则应将会话包装到可模拟对象中。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2014-05-02T19:49:25.460

您可以覆盖 Initialize 方法来设置会话。

```
protected override void Initialize(RequestContext requestContext) 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-03-01T07:20:05.740

如果您使用的是 IoC 容器，请尝试注入并使用 the`HttpSessionStateBase`而不是`Session`对象：

```
private static Container defaultContainer()
{
    return new Container(ioc =>
    {
        // session manager setup
        ioc.For<HttpSessionStateBase>()
           .Use(ctx => new HttpSessionStateWrapper(HttpContext.Current.Session)); 
    });
} 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2018-07-19T05:47:24.517

这个答案可能对某些人有用

如果我们重写 Initialize 方法，那么我们必须使用请求上下文初始化基类：base.Initialize(requestContext);

```
protected override void Initialize(RequestContext requestContext)
        {
            base.Initialize(requestContext);

        } 
```

# ms-access - MS-Access：通过连接选择要删除的行

> ID：889517
> 
> 赞同：13
> 
> 时间：2009-05-20T18:34:36.607
> 
> 标签：ms-access

我发现[这个问题](https://stackoverflow.com/questions/439750/t-sql-selecting-rows-to-delete-via-joins)正在讨论我想做的事情，但它是针对 T-SQL 的。有没有办法在 Microsoft Access 中做类似的事情？以下示例基于我在该问题中发现的内容。

我需要删除 中的所有记录，这些记录基于 中的另一个字段`TableA`链接到`TableB`via 字段。`Bid``TableB`

这是选择要删除的项目的查询：

```
SELECT * 
FROM TableA a
INNER JOIN TableB b on b.Bid = a.Bid
WHERE [my filter condition] 
```

以下查询导致错误“指定包含要删除的记录的表”。

```
DELETE TableA 
FROM TableA a
INNER JOIN TableB b on b.Bid = a.Bid
WHERE [my filter condition] 
```

这可以通过 Access 查询实现吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-20T19:03:28.920

这应该有效：

```
DELETE TableB.Text, TableA.*
FROM TableA 
INNER JOIN TableB ON TableA.BID = TableB.BID
WHERE TableB.Text="foo"; 
```

# windows - 使用 Windows 批处理文件中的命令结果设置变量的值

> ID：889518
> 
> 赞同：101
> 
> 时间：2009-05-20T18:34:41.877
> 
> 标签：windows, batch-file

在**Bash**环境中工作时，要将变量的值设置为命令的结果，我通常会这样做：

```
var=$(command -args) 
```

`var`命令设置的变量在哪里`command -args`。然后我可以将该变量作为`$var`.

与几乎所有 Unix shell 兼容的更传统的方法是：

```
set var=`command -args` 
```

也就是说，如何使用**Windows 批处理文件**中的命令结果设置变量的值？我试过了：

```
set var=command -args 
```

但我发现它`var`设置为`command -args`而不是命令的输出。

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2009-05-20T19:07:42.217

要执行[Jesse 描述](https://stackoverflow.com/a/889578)的操作，您需要从 Windows 批处理文件中编写：

```
for /f "delims=" %%a in ('ver') do @set foobar=%%a 
```

但是，如果您习惯于 Unix 类型的脚本，我建议您在 Windows 系统上使用[Cygwin 。](http://www.cygwin.org)

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2012-08-22T08:58:10.217

需要小心一点，因为 Windows 批处理命令：

```
for /f "delims=" %%a in ('command') do @set theValue=%%a 
```

与 Unix shell 语句的语义不同：

```
theValue=`command` 
```

考虑命令失败导致错误的情况。

在 Unix shell 版本中，仍然会发生对“theValue”的赋值，之前的任何值都被替换为空值。

在 Windows 批处理版本中，处理错误的是 "for" 命令，并且永远不会到达 "do" 子句——因此将保留 "theValue" 的任何先前值。

要在 Windows 批处理脚本中获得更多类似 Unix 的语义，您必须确保分配发生：

```
set theValue=
for /f "delims=" %%a in ('command') do @set theValue=%%a 
```

将 Unix 脚本转换为 Windows 批处理时未能清除变量的值可能是导致细微错误的原因。

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2009-05-20T21:26:40.737

当我在批处理文件中需要数据库查询的结果时，我会这样做：

```
sqlplus -S schema/schema@db @query.sql> __query.tmp
set /p result=<__query.tmp
del __query.tmp 
```

关键在第 2 行：“set /p”通过“<”重定向运算符将“result”的值设置为“__query.tmp”中第一行（仅）的值。

* * *

## 回答 #4

> 赞同：16
> 
> 时间：2009-05-20T18:49:59.710

The only way I've seen it done is if you do this:

```
for /f "delims=" %a in ('ver') do @set foobar=%a 
```

`ver` is the version command for Windows and on my system it produces:

```
Microsoft Windows [Version 6.0.6001] 
```

[Source](http://www.tomshardware.com/forum/230090-45-windows-batch-file-output-program-variable)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2020-11-05T19:41:15.277

这里有两种方法：

```
@echo off

:::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::
;;set "[[=>"#" 2>&1&set/p "&set "]]==<# & del /q # >nul 2>&1" &::
:::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::

:: --examples

::assigning chcp command output to %code-page% variable
chcp %[[%code-page%]]%
echo 1: %code-page%

::assigning whoami command output to %its-me% variable
whoami %[[%its-me%]]%
echo 2: %its-me%

::::::::::::::::::::::::::::::::::::::::::::::::::
;;set "{{=for /f "tokens=* delims=" %%# in ('" &::
;;set "--=') do @set ""                        &::
;;set "}}==%%#""                               &::
::::::::::::::::::::::::::::::::::::::::::::::::::

:: --examples

::assigning ver output to %win-ver% variable
%{{% ver %--%win-ver%}}%
echo 3: %win-ver%

::assigning hostname output to %my-host% variable
%{{% hostname %--%my-host%}}%
echo 4: %my-host% 
```

脚本的输出：

```
1: Active code page: 65001
2: mypc\user
3: Microsoft Windows [Version 10.0.19042.1110]
4: mypc 
```

解释：

**1]**以结尾的部分`&::`为行尾注释，可以忽略。我把它们只用于宏封闭

**2]** `;;`在行首将被忽略，因为`;`它是批处理脚本的标准分隔符。它放在那里是因为它提醒注释并进一步增强分配宏定义的位置。

**3]**使用的技术称为“宏”，它将命令分配给变量，并且当调用该变量时执行该命令。

**4]**定义的第一个宏包含两部分：

```
set "[[=>"#" 2>&1&set/p " 
```

和

```
set "]]==<# & del /q # >nul 2>&1" 
```

分开`&`允许我在一行上定义它们。第一个获取命令的输出并将其重定向到文件`#`。并添加`set/p`以开始读取文件的`set /p` [技术](https://www.dostips.com/forum/viewtopic.php?t=2128)。第二个宏完成`set /p`读取`<#`然后删除文件。两个宏之间的文本是变量的名称。就像是`set /p myVariable=<#`

**5]**第二个宏包含三个部分，扩展只是一个`for /f`循环。可能可以以更优雅的方式完成。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-10-24T02:39:22.480

```
Set "dateTime="
For /F %%A In ('powershell get-date -format "{yyyyMMdd_HHmm}"') Do Set "dateTime=%%A"
echo %dateTime%
pause 
```

[![在此处输入图像描述](https://i.stack.imgur.com/9y0yS.png)](https://i.stack.imgur.com/9y0yS.png) 用于`for`命令的[官方 Microsoft 文档](https://docs.microsoft.com/en-us/windows-server/administration/windows-commands/for)

# html - 如何阅读 properties in ActiveX web control with VC++/MFC I have ActiveX control done in VC++/MFC. It embeds into html web page. Now I need to be able to configure it by providing parameters in html tag. like: The que 问问题 问问题 2009-05-20T18:36:52.543 2619 次 This question shows research effort; it is useful and clear 1 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. I have ActiveX control done in VC++/MFC. It embeds into html web page. Now I need to be able to configure it by providing parameters in html tag. like: The question is how do I read those parameters during my ActiveX initialization? My research revealed that it has to be done through IPersistPropertyBag interface, but I could really use some code examples to figure that out. Any examples in VC++ please? Thanks, Mike Maybe I didn't quite understand the question, but... that's what I did: Create new form Drop a TableLayoutPanel on the form, and set Dock = Fill In Form design window (if you are using VS) click on the small arrow on TableLayoutPanel to open a menu with tasks and go to "Edit Rows and Columns..." In that window add as many columns as you need and set all of them to take "Percent" of the whole size and put the same number everywhere. You can put any number, just ensure it is the same, VS will make the sum equal to 100% automatically. And... it should work, at least when I resize such form I see all columns resized together... If you are not in VS, or have troubles with that method, this is the code I have auto-generated in my Designer class: this.tableLayoutPanel1.ColumnCount = 7; this.tableLayoutPanel1.ColumnStyles.Add(new System.Windows.Forms.ColumnStyle(System.Windows.Forms.SizeType.Percent, 14.28571F)); this.tableLayoutPanel1.ColumnStyles.Add(new System.Windows.Forms.ColumnStyle(System.Windows.Forms.SizeType.Percent, 14.28571F)); this.tableLayoutPanel1.ColumnStyles.Add(new System.Windows.Forms.ColumnStyle(System.Windows.Forms.SizeType.Percent, 14.28571F)); this.tableLayoutPanel1.ColumnStyles.Add(new System.Windows.Forms.ColumnStyle(System.Windows.Forms.SizeType.Percent, 14.28571F)); this.tableLayoutPanel1.ColumnStyles.Add(new System.Windows.Forms.ColumnStyle(System.Windows.Forms.SizeType.Percent, 14.28571F)); this.tableLayoutPanel1.ColumnStyles.Add(new System.Windows.Forms.ColumnStyle(System.Windows.Forms.SizeType.Percent, 14.28571F)); this.tableLayoutPanel1.ColumnStyles.Add(new System.Windows.Forms.ColumnStyle(System.Windows.Forms.SizeType.Percent, 14.28571F)); htmlvisual-c++activex 4 2 回答 2 This answer is useful 2 我会回答我自己的问题...... 基本上从 ActiveX 的角度来看，这些 HTML 参数是“持久存储”参数。 所以在你的 HTML 文件中： <OBJECT ID="activex1" WIDTH=300 HEIGHT=200 ... <PARAM NAME="ServerAddress" VALUE="192.168.1.1:1234"> ... </OBJECT> 在您的 MFC ActiveX 控件中： void Cubcam_activexCtrl::DoPropExchange(CPropExchange* pPX) { ExchangeVersion(pPX, MAKELONG(_wVerMinor, _wVerMajor)); COleControl::DoPropExchange(pPX); // TODO: Call PX_ functions for each persistent custom property. PX_String(pPX, _T("ServerAddress"), m_serverAddress, _T("")); } 于 2009-08-07T18:02:15.080 回答 This answer is useful 0 有趣的; 我将不得不尝试您描述的方法。我知道的方法是实现 IPersistPropertyBag 接口并实现 Load 方法。 我没有使用过 MFC，只是 ATL，但我是手动实现的。我将不得不研究您提供的解决方案，看看 MFC 使用的底层方法是否有优势。 于 2010-11-05T03:01:46.657 回答 Related 2 sql - 用 PostgreSQL 中另一个表的列更新一个表的列 0 ruby-on-rails - 如何在backbone.js的集合中提供宁静的（嵌套的）url？（Rails App） 1 java - 在 Jersey+Jackson 中序列化响应 1 c - how to make gluLookAt and glPerspective to work like glortho? 5 c# - 使用实体框架从集合中删除项目 0 android - Android 网页视图刷卡阿拉伯语版 1 javascript - IE 10 功能嗅探 1 text - DirectX 11：文本输出，使用您自己的字体纹理 13 regex - 1 到 100 之间的正则表达式数 1 perl - POP3 是否区分已读和未读邮件 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：889526
> 
> 赞同：1
> 
> 时间：
> 
> 标签：html, visual-c++, activex

I have ActiveX control done in VC++/MFC. It embeds into html web page. Now I need to be able to configure it by providing parameters in html tag. like: The question is how do I read those parameters during my ActiveX initialization? My research revealed that it has to be done through IPersistPropertyBag interface, but I could really use some code examples to figure that out.

Any examples in VC++ please?

Thanks, Mike

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-08-07T18:02:15.080

我会回答我自己的问题......
基本上从 ActiveX 的角度来看，这些 HTML 参数是“持久存储”参数。
所以在你的 HTML 文件中：

```
<OBJECT ID="activex1" WIDTH=300 HEIGHT=200
    ...
    <PARAM NAME="ServerAddress" VALUE="192.168.1.1:1234">
    ...
</OBJECT> 
```

在您的 MFC ActiveX 控件中：

```
void Cubcam_activexCtrl::DoPropExchange(CPropExchange* pPX)
{
    ExchangeVersion(pPX, MAKELONG(_wVerMinor, _wVerMajor));
    COleControl::DoPropExchange(pPX);

    // TODO: Call PX_ functions for each persistent custom property.
    PX_String(pPX, _T("ServerAddress"), m_serverAddress, _T(""));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2010-11-05T03:01:46.657

有趣的; 我将不得不尝试您描述的方法。我知道的方法是实现 IPersistPropertyBag 接口并实现 Load 方法。

我没有使用过 MFC，只是 ATL，但我是手动实现的。我将不得不研究您提供的解决方案，看看 MFC 使用的底层方法是否有优势。

# mysql - 在嵌套集中移动节点

> ID：889527
> 
> 赞同：25
> 
> 时间：2009-05-20T18:37:08.253
> 
> 标签：mysql, tree, hierarchical-data, nested-sets

我需要一个在嵌套集中移动节点及其所有子节点的 MySQL 查询。我找到[了这个](http://archives.postgresql.org//pgsql-sql/2002-11/msg00358.php)网站，但这个功能看起来很不合逻辑——没有嵌套集合模型`universeid`或`treeid`在嵌套集合模型中，而且代码本身比感觉需要的要长。我在表中得到的唯一额外列是`parent`.

我不能只是删除并再次添加节点，因为它会丢失它的 ID。

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2009-08-13T19:47:13.627

我明白了，这个话题已经很老了，但无论如何它仍然没有答案。我从谷歌来到这里，并没有找到这个问题的直接答案。

因此，经过一些研究，我发现了非常简单的解决方案。

一切，我们需要移动我们的节点是：节点左右位置，新的父节点正确位置。然后可以通过四个简单的步骤将节点移动到新位置：

1.  将节点及其所有子节点的位置更改为负值，与模块的当前位置相等。
2.  将所有位置“向上”移动，即当前节点的 pos_right。
3.  将所有位置“向下”移动，即新父节点的 pos_right。
4.  更改当前节点及其所有子节点的位置，使其现在正好位于新父节点的“之后”（或“下”）。

这是理论，现在 - 这个算法在 MySQL 中的实现（使用 PHP 的例子）：

```
-- step 0: Initialize parameters.
SELECT
    @node_id := 1, --put there id of moving node 
    @node_pos_left := 0, --put there left position of moving node
    @node_pos_right := 1, --put there right position of moving node
    @parent_id := 2, --put there id of new parent node (there moving node should be moved)

    @parent_pos_right := 4; --put there right position of new parent node (there moving node should be moved)
SELECT
    @node_size := @node_pos_right - @node_pos_left + 1; -- 'size' of moving node (including all it's sub nodes)

-- step 1: temporary "remove" moving node

UPDATE `list_items`
SET `pos_left` = 0-(`pos_left`), `pos_right` = 0-(`pos_right`)
WHERE `pos_left` >= @node_pos_left AND `pos_right` <= @node_pos_right;

-- step 2: decrease left and/or right position values of currently 'lower' items (and parents)

UPDATE `list_items`
SET `pos_left` = `pos_left` - @node_size
WHERE `pos_left` > @node_pos_right;
UPDATE `list_items`
SET `pos_right` = `pos_right` - @node_size
WHERE `pos_right` > @node_pos_right;

-- step 3: increase left and/or right position values of future 'lower' items (and parents)

UPDATE `list_items`
SET `pos_left` = `pos_left` + @node_size
WHERE `pos_left` >= IF(@parent_pos_right > @node_pos_right, @parent_pos_right - @node_size, @parent_pos_right);
UPDATE `list_items`
SET `pos_right` = `pos_right` + @node_size
WHERE `pos_right` >= IF(@parent_pos_right > @node_pos_right, @parent_pos_right - @node_size, @parent_pos_right);

-- step 4: move node (ant it's subnodes) and update it's parent item id

UPDATE `list_items`
SET
    `pos_left` = 0-(`pos_left`)+IF(@parent_pos_right > @node_pos_right, @parent_pos_right - @node_pos_right - 1, @parent_pos_right - @node_pos_right - 1 + @node_size),
    `pos_right` = 0-(`pos_right`)+IF(@parent_pos_right > @node_pos_right, @parent_pos_right - @node_pos_right - 1, @parent_pos_right - @node_pos_right - 1 + @node_size)
WHERE `pos_left` <= 0-@node_pos_left AND `pos_right` >= 0-@node_pos_right;
UPDATE `list_items`
SET `parent_item_id` = @parent_id
WHERE `item_id` = @node_id; 
```

请注意 - SQL 代码中仍然可能存在一些语法错误，因为我实际上在 PHP 中使用了这个算法，如下所示：

```
$iItemId = 1;
$iItemPosLeft = 0;
$iItemPosRight = 1;
$iParentId = 2;
$iParentPosRight = 4;
$iSize = $iPosRight - $iPosLeft + 1;
$sql = array(

    // step 1: temporary "remove" moving node

    'UPDATE `list_items`
    SET `pos_left` = 0-(`pos_left`), `pos_right` = 0-(`pos_right`)
    WHERE `pos_left` >= "'.$iItemPosLeft.'" AND `pos_right` <= "'.$iItemPosRight.'"',

    // step 2: decrease left and/or right position values of currently 'lower' items (and parents)

    'UPDATE `list_items`
    SET `pos_left` = `pos_left` - '.$iSize.'
    WHERE `pos_left` > "'.$iItemPosRight.'"',
    'UPDATE `list_items`
    SET `pos_right` = `pos_right` - '.$iSize.'
    WHERE `pos_right` > "'.$iItemPosRight.'"',

    // step 3: increase left and/or right position values of future 'lower' items (and parents)

    'UPDATE `list_items`
    SET `pos_left` = `pos_left` + '.$iSize.'
    WHERE `pos_left` >= "'.($iParentPosRight > $iItemPosRight ? $iParentPosRight - $iSize : $iParentPosRight).'"',
    'UPDATE `list_items`
    SET `pos_right` = `pos_right` + '.$iSize.'
    WHERE `pos_right` >= "'.($iParentPosRight > $iItemPosRight ? $iParentPosRight - $iSize : $iParentPosRight).'"',

    // step 4: move node (ant it's subnodes) and update it's parent item id

    'UPDATE `list_items`
    SET
        `pos_left` = 0-(`pos_left`)+'.($iParentPosRight > $iItemPosRight ? $iParentPosRight - $iItemPosRight - 1 : $iParentPosRight - $iItemPosRight - 1 + $iSize).',
        `pos_right` = 0-(`pos_right`)+'.($iParentPosRight > $iItemPosRight ? $iParentPosRight - $iItemPosRight - 1 : $iParentPosRight - $iItemPosRight - 1 + $iSize).'
    WHERE `pos_left` <= "'.(0-$iItemPosLeft).'" AND i.`pos_right` >= "'.(0-$iItemPosRight).'"',
    'UPDATE `list_items`
    SET `parent_item_id` = "'.$iParentItemId.'"
    WHERE `item_id`="'.$iItemId.'"'
);

foreach($sql as $sqlQuery){
    mysql_query($sqlQuery);
} 
```

另请注意，该代码可能会被优化，但为了更好的可读性，我将保留它。如果您在多用户系统中使用嵌套集，还要考虑表锁定。

希望我的信息对任何在我之后寻找解决方案的人有所帮助。也欢迎任何意见和更正。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-01-08T05:27:27.483

这是一个解决方案，可让您将节点移动到树中的任何位置，无论是作为兄弟节点还是子节点，只需一个输入参数 - 节点的新左侧位置 (newlpos)。

基本上分为三个步骤：

*   为子树创建新空间。
*   将子树移动到该空间中。
*   删除子树腾出的旧空间。

在 psuedo-sql 中，它看起来像这样：

```
//
 *  -- create new space for subtree
 *  UPDATE tags SET lpos = lpos + :width WHERE lpos >= :newlpos
 *  UPDATE tags SET rpos = rpos + :width WHERE rpos >= :newlpos
 * 
 *  -- move subtree into new space
 *  UPDATE tags SET lpos = lpos + :distance, rpos = rpos + :distance
 *           WHERE lpos >= :tmppos AND rpos < :tmppos + :width
 * 
 *  -- remove old space vacated by subtree
 *  UPDATE tags SET lpos = lpos - :width WHERE lpos > :oldrpos
 *  UPDATE tags SET rpos = rpos - :width WHERE rpos > :oldrpos
 */ 
```

:distance 变量是新位置和旧位置之间的距离，:width 是子树的大小，:tmppos 用于跟踪在更新期间移动的子树。这些变量定义为：

```
// calculate position adjustment variables
int width = node.getRpos() - node.getLpos() + 1;
int distance = newlpos - node.getLpos();
int tmppos = node.getLpos();

// backwards movement must account for new space
if (distance < 0) {
    distance -= width;
    tmppos += width;
} 
```

有关完整的代码示例，请参阅我的博客：

[https://rogerkeays.com/how-to-move-a-node-in-nested-sets-with-sql](https://rogerkeays.com/how-to-move-a-node-in-nested-sets-with-sql)

如果您喜欢此解决方案，请投票。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-14T14:18:50.850

我知道这是一个老问题，但我自己只是使用了答案，但用于 SQL Server。如果有人想要，这里是基于接受的答案的 SQL Server 存储过程的代码。

```
CREATE PROCEDURE [dbo].[Item_Move] 
    @id uniqueidentifier, 
    @destinationId uniqueidentifier
AS
BEGIN

    SET NOCOUNT ON;

    declare @moverLeft int,
            @moverRight int,
            @destinationRight int,
            @node_size int

    -- step 0: Initialize parameters.
    SELECT 
        @moverLeft = leftExtent, 
        @moverRight = rightExtent 
    FROM 
        Item 
    WHERE 
        id = @id

    SELECT 
        @destinationRight = rightExtent 
    FROM 
        Item 
    WHERE 
        id = @destinationId

    SELECT
        @node_size = @moverRight - @moverLeft + 1; -- 'size' of moving node (including all it's sub nodes)

    -- step 1: temporary "remove" moving node
    UPDATE Item
    SET leftExtent = 0-(leftExtent), rightExtent = 0-(rightExtent), updatedDate = GETDATE()
    WHERE leftExtent >= @moverLeft AND rightExtent <= @moverRight;

    -- step 2: decrease left and/or right position values of currently 'lower' items (and parents)
    UPDATE Item
    SET leftExtent = leftExtent - @node_size, updatedDate = GETDATE()
    WHERE leftExtent > @moverRight;
    UPDATE Item
    SET rightExtent = rightExtent - @node_size, updatedDate = GETDATE()
    WHERE rightExtent > @moverRight;

    -- step 3: increase left and/or right position values of future 'lower' items (and parents)
    UPDATE Item
    SET leftExtent = leftExtent + @node_size, updatedDate = GETDATE()
    WHERE leftExtent >= CASE WHEN @destinationRight > @moverRight THEN @destinationRight - @node_size ELSE @destinationRight END;
    UPDATE Item
    SET rightExtent = rightExtent + @node_size, updatedDate = GETDATE()
    WHERE rightExtent >= CASE WHEN @destinationRight > @moverRight THEN @destinationRight - @node_size ELSE @destinationRight END;

    -- step 4: move node (and it's subnodes) and update it's parent item id
    UPDATE Item
    SET
        leftExtent = 0-(leftExtent) + CASE WHEN @destinationRight > @moverRight THEN @destinationRight - @moverRight - 1 ELSE @destinationRight - @moverRight - 1 + @node_size END,
        rightExtent = 0-(rightExtent) + CASE WHEN @destinationRight > @moverRight THEN @destinationRight - @moverRight - 1 ELSE @destinationRight - @moverRight - 1 + @node_size END, 
        updatedDate = GETDATE()
    WHERE leftExtent <= 0-@moverLeft AND rightExtent >= 0-@moverRight;
    UPDATE Item
    SET parentId = @destinationId, updatedDate = GETDATE()
    WHERE id = @id;

END 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-20T18:54:20.823

在嵌套集设计中移动子树非常昂贵且复杂。

您应该考虑使用不同的设计来表示树。

例如，如果您使用路径枚举设计，则将每个节点的直接祖先列表存储为连接字符串。

```
id path
 1  1/
 2  1/2/
 3  1/3/
 4  1/3/4/
 5  1/3/5/ 
```

然后移动一个子树（比如节点 3 移动到节点 2 的子节点）：

```
UPDATE Tree t
 JOIN Tree node2 ON (node2.id = 2)
 JOIN Tree node3 ON (node3.id = 3)
SET t.path = CONCAT(node2.path, REPLACE(t.path, node3.path, node2.path))
WHERE t.path LIKE CONCAT(node3.path, '%'); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-20T19:04:24.750

有关在以下位置存储和使用分层数据的信息，请参阅我博客中的文章`MySQL`：

*   [**MySQL 中的分层查询**](http://explainextended.com/2009/03/17/hierarchical-queries-in-mysql/)

要在这样的表中移动整个分支，您只需要更新根的`parent`（单行）

您需要创建一个函数：

```
CREATE FUNCTION hierarchy_connect_by_parent_eq_prior_id(value INT) RETURNS INT
NOT DETERMINISTIC
READS SQL DATA
BEGIN
        DECLARE _id INT;
        DECLARE _parent INT;
        DECLARE _next INT;
        DECLARE CONTINUE HANDLER FOR NOT FOUND SET @id = NULL;

        SET _parent = @id;
        SET _id = -1;

        IF @id IS NULL THEN
                RETURN NULL;
        END IF;

        LOOP
                SELECT  MIN(id)
                INTO    @id
                FROM    t_hierarchy
                WHERE   parent = _parent
                        AND id > _id;
                IF @id IS NOT NULL OR _parent = @start_with THEN
                        SET @level = @level + 1;
                        RETURN @id;
                END IF;
                SET @level := @level - 1;
                SELECT  id, parent
                INTO    _id, _parent
                FROM    t_hierarchy
                WHERE   id = _parent;
        END LOOP;
END 
```

并在查询中使用它：

```
SELECT  CONCAT(REPEAT('    ', level - 1), CAST(hi.id AS CHAR)) AS treeitem, parent, level
FROM    (
        SELECT  hierarchy_connect_by_parent_eq_prior_id(id) AS id, @level AS level
        FROM    (
                SELECT  @start_with := 0,
                        @id := @start_with,
                        @level := 0
                ) vars, t_hierarchy
        WHERE   @id IS NOT NULL
        ) ho
JOIN    t_hierarchy hi
ON      hi.id = ho.id 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-22T20:58:24.043

我有一个存储过程，它将嵌套集中的节点移动到新的父节点。我在名为“somedb”的 MySQL / InnoDB 数据库中使用名为“category”的表。当然，如果目标是您要移动的类别的子类别，则此过程会搞砸，因此请确保您没有尝试将节点嵌入到自身内部。我将把它作为练习留给读者，以使这个过程在这种情况下安全。

```
CREATE PROCEDURE `somedb`.`moveCatParent` (IN cat_a VARCHAR(45), IN cat_b VARCHAR(45))
BEGIN
    START TRANSACTION;

    /* cat_b.lft + 1 is the destination. */
    SELECT @destination := (lft + 1)
    FROM category
    WHERE name = cat_b;

    SELECT @cat_a_width := ((rgt - lft) + 1)
    FROM category
    WHERE name = cat_a;

    /* Rip this table a new cat_a sized hole inside cat_b. */  
    UPDATE category SET rgt = rgt + @cat_a_width WHERE rgt >= @destination;
    UPDATE category SET lft = lft + @cat_a_width WHERE lft >= @destination;

    SELECT @cat_a_lft := lft, @cat_a_rgt := rgt
    FROM category
    WHERE name = cat_a;

    SELECT @diff := @destination - @cat_a_lft;

    /* Move cat_a and all inhabitants to new hole */  
    UPDATE category SET rgt = rgt + @diff WHERE rgt BETWEEN @cat_a_lft AND @cat_a_rgt;
    UPDATE category SET lft = lft + @diff WHERE lft BETWEEN @cat_a_lft AND @cat_a_rgt;

    /* Close the gap created when we moved cat_a. */
    UPDATE category SET rgt = rgt - @cat_a_width WHERE rgt >= @cat_a_lft;
    UPDATE category SET lft = lft - @cat_a_width WHERE lft >= @cat_a_lft;

    COMMIT;
END 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-10-04T13:24:27.177

我相信用两个额外的列来存储原始节点的右值和左值（以及所有后续子节点）可以简化算法。我已经用铅笔和纸处理了这些例子，所以如果你发现算法中有任何漏洞，请告诉我。

目标节点（您要移动的节点的新父节点）是 tNode。目标节点的左值为 tNode.L，右值为 tNode.R。同样，您要移动的节点是 mNode，mNode 的左右值是 mNode.L 和 mNode.R。两个额外的列是 mNode.SL 和 mNode.SR

所以总而言之，我们有 4 列用于操作 R、L、SL 和 SR

* * *

## 第1步

计算

```
delta1 = (mNode.R - mNode.L) + 1 
```

## 第2步

将 mNode 原始 L 和 R 保存到 SL 和 SR 列中

```
- For All L between mNode.L and mNode.R 
   mNode.SL = mNode.L ; mNode.L = 0 ;
 - For All R between mNode.L and mNode.R 
   mNode.SR = mNode.R ; mNode.R = 0 ; 
```

## 第三步

```
Do For all Nodes
IF L > mNode.SR 
   L = L + delta1
IF R > mNode.SR
   R = R + delta1 
```

现在 mNode 从 Tree 中分离出来，并且 Tree 在没有 mNode 的情况下进行了调整。

## 第4步

计算

```
delta2 = (tNode.R - mNode.SL) 
```

## 第五步

```
Do for all Nodes
  IF L >= tNode.R
    L = L + delta1
  IF R >= tNode.R
    R = R + delta1 
```

现在我们已经调整了树（和目标节点）以接受被删除的节点数。

## Step6

在 tNode 处附加 mNode 并重置 SL/SR 列值

```
Do for all Nodes
 IF SL between mNode.SL and mNode.SR
    L = mNode.SL + delta2 ; mNode.SL = 0  ;
 IF SR between mNode.SL and mNode.SR
    R = mNode.SR + delta2 ; mNode.SR = 0 ; 
```

在所有这些步骤之后，我们应该将 mNode 移动到 tNode 下。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2010-12-29T19:17:36.563

感谢您将 lft 和 rgt 转换为负面对应物的想法。我在这里发布了一个更通用的方法：[Move node in Nested Sets tree](https://stackoverflow.com/questions/2801285/move-node-in-nested-sets-tree)。

queryBatch() 函数将查询包含在事务中。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-04-22T14:37:20.287

很简单，先定义一个存储过程：

```
 CREATE DEFINER=`root`@`localhost` PROCEDURE `move_item`(
        IN itemId BIGINT, IN kind SMALLINT, 
        IN newSiblingId BIGINT UNSIGNED, IN newSiblingKind SMALLINT, IN newParentId BIGINT UNSIGNED,
        IN jobId BIGINT UNSIGNED, IN companyId BIGINT UNSIGNED,
        OUT outSucess SMALLINT UNSIGNED)
proc_label:BEGIN 
```

接下来我们需要一些局部变量：

```
DECLARE oldLeft, oldRight, newLeft, newRight, itemWidth, moveBy INT UNSIGNED DEFAULT 0; 
set outSucess =0; 
```

现在获取我们旧的左右并获取宽度

```
SELECT `LFT`, `RGT` into oldLeft, oldRight from `nodes` where `ID`=itemId LIMIT 1;
SET itemWidth = oldRight - oldLeft + 1; 
```

现在乘以 -1 将它们“从树中取出”

```
UPDATE `nodes` SET `RGT`=`RGT`* -1, `LFT`=`LFT`* -1 WHERE ``LFT` BETWEEN oldLeft and oldRight; 
```

下一部分不是必需的，因为没有它，树也可以工作，但它很整洁；缩小旧差距：

```
-- Update right
UPDATE `nodes` SET `RGT` = `RGT` - itemWidth WHERE `RGT` > oldRight;
-- Update left
UPDATE `nodes` SET `LFT` = `LFT` - itemWidth WHERE `LFT` > oldRight; 
```

现在找到新位置：

```
SELECT (`RGT`+1) into newLeft from `nodes`  where `ID`=newSiblingId LIMIT 1;

-- No sibling, so make it last in parent
IF (newLeft = 0) AND (newParentId != 0) THEN
  SELECT `RGT` into newLeft from `nodes` WHERE `ID`=newParentId LIMIT 1;
END IF;

 -- If no previous sibling or parent, set to first item in tree
IF (newLeft=0) OR (newLeft=NULL) THEN SET newLeft=1;
END IF; 
```

现在腾出一些空间：

```
 -- Update right
UPDATE `nodes` SET `RGT` = `RGT` + itemWidth WHERE `RGT` >= newLeft;
-- Update left
UPDATE `nodes` SET `LFT` = `LFT` + itemWidth WHERE `LFT` >= newLeft; 
```

最后将移出树的节点移回 * -1，当你在它的时候，也将它们移动到正确的位置：

```
SET moveBy = OldLeft - NewLeft;
UPDATE `nodes` SET `RGT`=(`RGT`* -1)-moveBy, `LFT`=(`LFT`* -1)-moveBy WHERE `LFT` < 0;
set outSucess =1; 
```

未经测试、粘贴、调整和简化的工作程序。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2015-11-25T13:36:00.240

我知道这篇文章很旧，但我为其他所有会来这里查看解决方案的人发布了这个解决方案。我找到了这个@sedna-soft.de。我测试了 id 并且工作得很好

```
 -- moves a subtree before the specified position
 -- if the position is the rgt of a node, the subtree will be its last child
 -- if the position is the lft of a node, the subtree will be inserted before
 -- @param l the lft of the subtree to move
 -- @param r the rgt of the subtree to move
 -- @param p the position to move the subtree before

 SET @r: , @l: , @p: 

 update tree
 set
 lft = lft + if (@p > @r,
    if (@r < lft and lft < @p,
        @l - @r - 1,
        if (@l <= lft and lft < @r,
            @p - @r - 1,
            0
        )
    ),
    if (@p <= lft and lft < @l,
        @r - @l + 1,
        if (@l <= lft and lft < @r,
            @p - @l,
            0
        )
    )
),
rgt = rgt + if (@p > @r,
    if (@r < rgt and rgt < @p,
        @l - @r - 1,
        if (@l < rgt and rgt <= @r,
            @p - @r - 1,
            0
        )
    ),
    if (@p <= rgt and rgt < @l,
        @r - @l + 1,
        if (@l < rgt and rgt <= @r,
            @p - @l,
            0
        )
    )
        )
  where @r < @p or @p < @l; 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2019-03-29T07:35:37.197

```
# Get Left and Right offsets of both source node (Drag Node) and target node (Drop off Node).
SELECT lft,rgt INTO @sourceNodeLft,@sourceNodeRgt FROM treetest WHERE id=_sourceNodeId;
SELECT lft,rgt INTO @targetNodeLft,@targetNodeRgt FROM treetest WHERE id=_targetNodeId;

# Determine node order direction
SET @direction := IF(@targetNodeLft<@sourceNodeLft,'UP','DOWN'); 

# Determine with of source node (Drag Node)
SET @width := @sourceNodeRgt - @sourceNodeLft + 1;

# Mark all displaced nodes with negative lft and rgt
UPDATE treetest SET lft = 0-lft, rgt = 0-rgt 
                                WHERE lft >= @targetNodeLft AND rgt <= @targetNodeRgt;
UPDATE treetest SET lft = 0-lft, rgt = 0-rgt 
                                WHERE lft >= @sourceNodeLft AND rgt <= @sourceNodeRgt;

# Update left and right offsets of inner nodes between source (Drag Node)and target (Drop off) node
UPDATE treetest SET lft =   (lft + IF(@direction = 'UP',@width,0-@width)),
                                    rgt = (rgt + IF(@direction = 'UP',@width,0-@width))
                                WHERE lft > IF(@direction = 'UP', @targetNodeLft, @sourceNodeLft)
                                            AND rgt < IF(@direction = 'UP', @sourceNodeLft, @targetNodeLft);

# Update source (Drag) Node and its children offsets  
SET @sourceOffset := IF(@direction = 'UP',@targetNodeLft - @sourceNodeLft, @targetNodeRgt - @width - @sourceNodeLft+1);
UPDATE treetest SET lft = 0 - lft + @sourceOffset, 
                                        rgt = 0 - rgt + @sourceOffset
                                WHERE (0-lft) >= @sourceNodeLft AND (0-rgt) <= @sourceNodeRgt;

# Update target (Drop off) node and its children offsets
SET @targetOffset := IF(@direction = 'UP', 0 - @width,@width);
UPDATE treetest SET lft = 0 - (lft + @targetOffset),
                                        rgt = 0 - (rgt + @targetOffset)
                                WHERE (0-lft) >= @targetNodeLft AND (0-rgt) <= @targetNodeRgt; 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2019-06-02T08:52:24.490

已经有很多答案了，但我觉得我的答案可能对某人有用。根据 Roger Keays 的回答（非常感谢！），我为 mySQL 数据库编写了存储过程：

```
-- to move target before specified node
CREATE DEFINER=`root`@`%` PROCEDURE `move_before`(IN target_id int, before_id int)
BEGIN
    SELECT @new_pos := lft FROM dirs WHERE  id = before_id; 
    CALL  move(target_id, @new_pos);
END

-- to move target after specified node
CREATE DEFINER=`root`@`%` PROCEDURE `move_after`(IN target_id int, after_id int)
BEGIN
    SELECT @new_pos := rgt + 1 FROM dirs WHERE  id = after_id;
    CALL  move(target_id, @new_pos);
END

-- to move target to the specified node
CREATE DEFINER=`root`@`%` PROCEDURE `move_in`(IN target_id int, parent_id int)
BEGIN
    SELECT @new_pos := rgt FROM dirs WHERE  id = parent_id;
    CALL  move(target_id, @new_pos);
END

--main procedure to move target before position 
CREATE DEFINER=`root`@`%` PROCEDURE `move`(in target_id int, in  new_pos int)
BEGIN

    SELECT @oldlft :=  lft, @oldrgt :=  rgt 
    FROM dirs 
    WHERE target_id =  id;

    SET @width := @oldrgt - @oldlft +1;
    SET @distance :=  new_pos - @oldlft;
    SET @tmppos := @oldlft;

    IF (@distance <0)
    THEN
        SELECT @distance := @distance - @width;
        SELECT @tmppos := @tmppos + @width;
    END IF;

    -- create new space for subtree
    UPDATE dirs SET lft = lft + @width WHERE lft >=  new_pos;
    UPDATE dirs SET rgt = rgt + @width WHERE rgt >=  new_pos;

    -- move subtree into new space
    UPDATE dirs SET lft = lft + @distance, rgt = rgt + @distance
        WHERE lft >= @tmppos AND rgt < @tmppos + @width;

    -- remove old space vacated by subtree
    UPDATE dirs SET lft = lft - @width WHERE lft > @oldrgt;
    UPDATE dirs SET rgt = rgt - @width WHERE rgt > @oldrgt;

END 
```

* * *

## 回答 #13

> 赞同：-1
> 
> 时间：2009-12-08T19:12:43.020

$row 是一个数组，代表我必须移动的行；它必须是这样的：

```
Array ( [lft] => 5 [rgt] => 10 [width] => 6 ) 
```

$row2 是代表命运节点的数组；

```
Array ( [id] => 5 [lft] => 2 [rgt] => 17 [width] => 16 ) 
```

...

```
mysql_query("UPDATE entryCategory SET rgt = rgt + %d - %d, lft = lft + %d - %d WHERE rgt <= %d and lft >= %d;",$row2["rgt"],$row["lft"],$row2["rgt"],$row["lft"],$row["rgt"],$row["lft"]);
mysql_query("UPDATE entryCategory SET rgt = rgt + %d WHERE id=%d;",$row["width"],$row2["id"]);
mysql_query("UPDATE entryCategory SET rgt = rgt - %d, lft = lft - %d  WHERE rgt > %d and lft > %d;",$row["width"],$row["width"],$row["rgt"],$row["rgt"]); 
```

# python - 如何针对 python HTTPConnection 读取（）/写入（）？

> ID：889528
> 
> 赞同：2
> 
> 时间：2009-05-20T18:37:23.247
> 
> 标签：python, http, rpc

我有以下形式的python代码：

```
(o,i) = os.popen2 ("/usr/bin/ssh host executable")  
ios = IOSource(i,o) 
```

然后库代码使用这个 IOSource，对输入流 i 和输出流 o 执行 writes() 和 read()s。

是的，这里有 IPC。想想 RPC。

我想这样做，但以 HTTP 方式而不是产生 ssh。

我以前做过 python http：

```
conn=httplib.HTTPConnection('localhost',8000)  
conn.connect()  
conn.request('POST','/someurl/')  
response=conn.getresponse() 
```

如何从 HTTPConnection 获取输入流/输出流，以便我的 lib 代码可以像上面的 ssh 示例一样读取/写入？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-20T18:42:41.817

输出：

```
output = response.read() 
```

[http://docs.python.org/library/httplib.html#httpresponse-objects](http://docs.python.org/library/httplib.html#httpresponse-objects)

输入：在您的请求的 POST 正文中传递您的数据

# sql-server - 为结果集中的每一行发送电子邮件

> ID：889532
> 
> 赞同：5
> 
> 时间：2009-05-20T18:39:00.013
> 
> 标签：sql-server, sql-server-2005, tsql

我想使用 sp_send_dbmail 为结果集的每一行发送一封电子邮件。

在不使用循环的情况下完成此任务的适当方法是什么？

编辑：我并不是坚持循环在这里不合适，但是有没有一种基于集合的方法来做到这一点。我试过创建一个函数，但是一个函数不能调用它里面的存储过程。只有另一个 func 或扩展 sp （我也不想这样做）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-20T18:44:36.773

这种情况正是循环有利于（和设计）的。

由于您所做的事情超出了数据库范围，因此为它们使用循环是完全合法的。

数据库旨在存储数据并针对这些数据执行查询，这些数据以最方便的方式返回它们。

关系数据库可以以行集的形式返回数据。

游标（和使用它们的循环）旨在保持稳定的行集，以便可以完成每一行的一些事情。

这里的“事物”指的不是纯粹的数据库技巧，而是影响外部世界的真实事物，即数据库设计的事物，无论是在网页上显示表格、生成财务报告还是发送电子邮件。

将游标用于纯数据库任务（例如将一个行集转换为另一个）是不好的，但是将它们用于您描述的那些事情是非常好的。

基于集合的方法被设计为在单个事务中工作。

如果您的 set-base 查询由于某种原因失败，您的数据库将恢复到之前的状态，但您不能“回滚”已发送的电子邮件。如果出现错误，您将无法跟踪您的消息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-20T18:51:20.753

如果您需要每行一封电子邮件，则必须是逐行操作。这不是基于标准集合的操作。

您可以在 SQL 中通过它，或者您在客户端语言中“为每个”

我不会从触发器发送电子邮件顺便说一句：您的交易在触发器执行时处于打开状态

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-20T18:46:56.330

不是最佳做法，但如果您想避免循环：

您可以创建一个“SendMails”表，在 Insert 上有一个触发器

sp_send_dbmail 从触发器内部调用

然后你做：

```
Truncate Table SendMails

insert into SendMails (From, To, Subject,text) Select field1,field2,field3,field4 from MyTable 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-20T19:12:53.657

在 SQL Server Reporting Services 中设置数据驱动订阅：-D

对我来说，这听起来像是 SSRS 要求——TSQL 本身并不是真正为报告而设计的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-20T19:27:08.777

实现这一点的最佳方法是将您的电子邮件发送逻辑放在用户定义的函数中。

然后你只需调用 SELECT MyEmailFunc(emailaddress) FROM MyTable

它避免了循环，您甚至可以在更新语句中使用它来显示电子邮件已发送。例如：

UDPATE MyTable SET SENT = MyEmailFunc(emailaddress) WHERE sent = 0

# .net - 如何在 Visual Web Developer 2008 Express Edition 和 ASP.NET MVC 中编辑和继续？

> ID：889541
> 
> 赞同：6
> 
> 时间：2009-05-20T18:41:17.030
> 
> 标签：.net, asp.net-mvc, visual-studio-2008, vwdexpress

我在 Web Properties 页面上启用了**Enable Edit and Continue**，并且在我的配置中也启用了它，但 Visual Web Developer 2008 Express Edition 拒绝让我编辑 ASP.NET MVC 项目的源文件。我可以毫无问题地编辑 aspx 文件。

有什么想法有什么问题或缺少什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-25T15:35:13.580

如果您的目标是 x64 或 64 位计算机上的任何 CPU，则无法使用编辑并继续。它仅在您以 x32 为目标时才有效。

出于这个原因，我将我的平台目标设置为 x32 以进行调试配置。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-08-24T08:41:36.330

我的结论是，它只是行不通。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-01-18T14:09:38.860

请记住，在您的项目属性中勾选“启用编辑并继续”以在构建和测试您的应用程序之前**保存**您的更改。我犯了这个错误，这比我愿意分享的时间要多！

![在此处输入图像描述](https://i.stack.imgur.com/hL8L8.png)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-09-12T19:20:10.310

它最终在 Visual Studio 2010 (MVC 4) 中运行良好，以下是执行此操作**所需的所有**步骤。

我可以更改控制器中的操作代码（当应用程序“暂停”或在断点处停止时），并且所有更改都会在“继续”之后或逐步调试后自动使用。

**工具 > 选项 > 调试 > 编辑并继续**

![启用编辑并继续](https://i.stack.imgur.com/TbjKR.png)

**工具 > 选项 > 调试 > 常规**

![使能够](https://i.stack.imgur.com/Z8G9e.png)

**构建 > 配置管理器...**

![为所有项目设置平台 x86](https://i.stack.imgur.com/b4U1i.png)

**在解决方案资源管理器中，右键单击主（Web）项目名称 > 属性**

![使能够](https://i.stack.imgur.com/ENsaO.png)

将构建输出路径更改为**\bin**

![将构建输出路径更改为](https://i.stack.imgur.com/LnAZY.png)

来源：[如果尚未加载程序集，则不允许更改](http://sciagaprogramisty.blogspot.com/2012/09/changes-are-not-allowed-if-assembly-has.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-27T09:37:54.753

您必须在**两个地方**启用此功能。[请参阅有关Web 应用程序项目 (WAP) 的编辑并继续的](http://blogs.msdn.com/webdevelopertips/archive/2008/11/26/tip-29-did-you-know-how-to-enable-edit-and-continue-feature-for-web-application-projects.aspx)博客文章

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-12-10T02:31:06.693

对于运行 Vista 64 位的任何人...

IDE 可能还没有准备好在没有 tweek 的情况下在 Vista 64 位上编辑并继续 (EnC) Web 应用程序。

我的情况：将 Web App 迁移到 Vista 64 位。将平台设置为 x86，在工具/选项和 Web 属性中设置 EnC，在 Web.Config 中设置调试标志，在构建配置中设置调试模式等。

不开心 - 可以打断点、检查变量等，但不能 EnC。

有 7 个 Google 点击消息“如果程序集尚未加载，则不允许更改”。但是，对于这种情况没有新的建议。

在尝试了很多事情之后，最终尝试将构建输出路径从“bin\x86\debug”更改为“bin\”。

整个土地都充满了欢乐 - 现在使用 EnC 进行调试。

# sharepoint - SharePoint 在文件服务器中爬网文件

> ID：889548
> 
> 赞同：1
> 
> 时间：2009-05-20T18:42:28.493
> 
> 标签：sharepoint, sharepoint-2007

SharePoint 是否能够对存储在文件服务器中的文件进行爬网？如果是，如何？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-20T19:13:41.957

您需要在 Central Admin 中添加搜索源、范围和显示组。有关详细信息，请参阅以下内容：

[http://office.microsoft.com/en-us/sharepointserver/HA011603241033.aspx](http://office.microsoft.com/en-us/sharepointserver/HA011603241033.aspx) [http://sharepointsearch.com/cs/blogs/sanjaya/archive/2009/04/03/sharepoint-search-scopes.aspx](http://sharepointsearch.com/cs/blogs/sanjaya/archive/2009/04/03/sharepoint-search-scopes.aspx)

第二个链接实际上有一个很好的演练。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-22T04:05:24.190

您只需将内容源添加到您的 SSP。

1.  转到管理中心站点，单击 SSP 链接
2.  导航到 Seach 管理
3.  点击内容来源
4.  选择“新内容源”
5.  选择文件共享的“内容源类型”

不幸的是，添加新内容源的便利性掩盖了在采取此操作之前应该完成的想法。具体来说，您需要选择一个可以访问文档的索引帐户。

您还需要确保索引有足够的空间来索引驱动器的内容（为索引计划约 30% 的[文档空间](http://blogs.msdn.com/joelo/archive/2006/12/29/search-and-index-sizing-and-planning-real-world-data-from-msweb.aspx)）

另一个棘手的问题是隐藏你不想看到的东西。我听说过一些非常幽默的故事，人们在大型共享驱动器上输入“信用卡详细信息”、“密码”或“薪水”到搜索中，并对结果感到相当震惊。

确保您熟悉搜索范围以便从搜索中获得最大收益，但添加新内容源不是必需的。

# java - 进度条 + Java 中的 MVC =？

> ID：889551
> 
> 赞同：5
> 
> 时间：2009-05-20T18:42:55.543
> 
> 标签：java, model-view-controller, swing, progress-bar

所以我在 Java Swing 中有一个漂亮的、漂亮的 MVC 架构应用程序，现在我想添加一个进度条，我对将 JProgressBar 合并到我的视图中的良好设计方法感到困惑。我是不是该：

*   将 DefaultBoundedRangeModel 添加到我的控制器状态，然后导出它？

    ```
    class Model {
      final private DefaultBoundedRangeModel progress
        = new DefaultBoundedRangeModel();

      public void getProgressModel() { return progress; }
      public void setProgressCount(int i) { progress.setValue(i); }
    }

    class Controller {
      Model model;
      int progressCount;
      void doSomething()
      {
         model.setProgressCount(++progressCount);
      }
    }

    class View {
      void setup(Model m)
      {
        JProgressBar progressBar = /* get or create progress bar */  ;
        progressBar.setModel(m.getProgressModel());
      }
    }

    /* dilemma: Model allows progress to be exported so technically
     all of the progress state could be set by someone else; should it be put
     into a read-only wrapper? */ 
    ```

*   使用 JGoodies Binding 尝试将 JProgressBar 的视觉状态连接到我的模型的状态？

    ```
    class Model {
      private int progress;

      public void getProgressCount() { return progress; }
      public void setProgressCount(int i) { progress = i; }
    }

    class View {
      void setup(Model m)
      {
        ProgressBar progressBar = /* get or create progress bar */  ;
        CallSomeMagicMethodToConnect(m, "progressCount", progressBar, "value");
        // is there something that works like the above?
        // how do I get it to automatically update???
      }
    } 
    ```

*   或者是其他东西？？？

**编辑：**更具体地说：有人可以为我指出一个Java应用程序的现实来源的好例子，它有一个包含进度条的状态栏，并且有一个体面的MVC实现吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-20T19:05:56.980

我想说，别的。

我在 MVC 中遇到的问题是定义模型的抽象级别。

*   模型可以是 UI 组件的某种对象

*   模型也可以是它自身的程序的某种其他类型的对象。

和

*   模型可以和商业模型一样高。

在这种情况下，我将为进度条分离模型/组件对，并在单独的控制器类中处理它们。

本文**[描述](http://java.sun.com/products/jfc/tsc/articles/architecture/)**了 Swing 架构，并可能阐明它在内部使用模型的方式。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-20T20:24:44.027

否（对 1）和 NOOOO（对 2）。至少在我看来。

否（对 1）：首先，DefaultBoundedRangeModel 是一个 javax.swing 类。在我看来，这些类在模型中没有位置。例如，考虑生活在服务器上的模型，通过 RMI 访问 - 突然在那里放置一个 javax.swing 类似乎“不正确”。但是，真正的问题是您将模型的一部分（有界模型）提供给其他人，而无法控制触发的事件或进行的查询。

否（对 2）：呃。绑定很有趣，但（至少在我看来）应该用于 UI 模型和 UI 组件之间的同步，而不是数据模型和 UI 模型之间的同步。同样，想想如果您的数据模型位于远程服务器上，由 RMI 访问会发生什么。

所以呢？好吧，这只是一个建议，但我会添加一个事件侦听器接口并添加标准事件侦听器订阅方法（addListner(...)、removeListener(...)）。当我有更新时，我会在我的模型中调用这些监听器。当然，我会确保记录调用线程（或者说它无法确定），以便客户端（本例中的 UI）能够正确同步（invokeLater 和朋友）。由于监听器服务将被控制器公开，这将允许模型存在于任何地方（甚至允许监听器被远程调用或池化）。此外，这会将模型与 UI 分离，从而可以构建更多包含它的模型（翻译器/装饰器/依赖模型）。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-05-25T12:26:57.577

在我们的应用程序（MVC，大约 100 KLOC）中，我们有它（实际上是模式观察者）：

```
/**
 * Observer on progress changes
 */
public interface IProgressListener {
  public void setProgress(ProgressEvent e);
}

public class ProgressEvent extends ... {
  private int progressCount;
  // setter + getter
  ...
}

class Model {
  public void addProgressListener(IProgressListener l);
  protected void fireProgressChange(ProgressEvent e);   // call .setProgress() on listeners
}

class Controller {
  private Model model;
}

class View extends ProgressBar implements IProgressListener {
  ...
  // IProgressListener implementation
  public void setProgress(ProgressEvent e) {
    this.setValue(e.getProgress());
  }
  ...
} 
```

# performance - Image Rendering Test

> ID：889554
> 
> 赞同：3
> 
> 时间：2009-05-20T18:43:59.533
> 
> 标签：performance, image, rendering

I am benchmarking a custom brower and want to benchmark the rendering speeds of different types of images (gif, jpg, png) of the same file size to see which of the image formats this browser renders the fastest.

My process was just to have a simple seperate HTML page for each type of image and just use a Javascript counter before it is rendered and and after to measure the browser's rendering speed of that specific image.

Any thoughts on this process? Any thoughts on how to improve it?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-20T20:40:29.050

嗯，这样很难得到有意义的通用结果。您正在测量加载 html、javascript 和图像的组合。根据您从哪里加载它们，您还可以测量磁盘或网络缓存。图像渲染代码将有一些启动时间，取决于内存分配器和可能的垃圾收集。然后是图像大小、颜色深度、压缩量、页面上的图像数量、缩放、样式表的影响、javascript 计时器的分辨率。哦，您是渲染到窗口的可见部分、图层中还是屏幕外。

但别担心，你将能够想出一个可用的测试。针对你的具体情况。或者差异甚至可能非常明显。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-20T19:07:09.380

Firefox [Firebug](http://www.mozilla.com/en-US/firefox/personal.html) 插件[YSlow](http://developer.yahoo.com/yslow/)[很](http://getfirebug.com/)不错

# javascript - How do you use onPageLoad in Javascript?

> ID：889564
> 
> 赞同：7
> 
> 时间：2009-05-20T18:45:43.430
> 
> 标签：javascript, firefox, tabs, onpageloadstring

I tried using

```
onPageLoad: function() {
    alert("hi");
} 
```

but it won't work. I need it for a Firefox extension.

Any suggestions please?

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2009-05-20T19:08:12.590

如果你想在 vanilla javascript 中执行此操作，只需使用`window.onload`事件处理程序。

```
window.onload = function() {
  alert('hi!');
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-05-20T18:48:04.987

```
var itsloading = window.onload; 
```

or

```
<body onload="doSomething();"></body> 
//this calls your javascript function doSomething 
```

**for your example**

```
<script language="javascript">

function sayhi() 
{
  alert("hi")
}
</script>

<body onload="sayhi();"></body> 
```

**EDIT -**

For the extension in firefox [On page load](https://developer.mozilla.org/En/Code_snippets/On_page_load) example

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-05-20T19:03:46.017

假设您的意思是 onload-event：

您应该使用[jQuery](http://docs.jquery.com/Events/ready#fn)之类的 javascript 库来使其在所有浏览器中都能正常工作。

```
<script type="text/javascript">
    $(document).ready(function() {
        alert("Hi!");
    });
</script> 
```

如果您真的不想使用 javascript 库（不要期望它在所有浏览器中都能正常工作。）：

```
<script type="text/javascript">
    function sayHi() {
        alert("Hi!");
    }
</script>
<body onload="javascript:sayHi();">
... 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-11-11T17:30:21.970

```
 <script language="javascript">

    window.onload = onPageLoad();

    function onPageLoad() {
        alert('page loaded!');
        }
</script> 
```

# c# - 您如何将其他编程语言嵌入到您的代码中？

> ID：889569
> 
> 赞同：5
> 
> 时间：2009-05-20T18:47:38.373
> 
> 标签：c#, javascript

使用 C# 进行 ASP.NET 和 MOSS 开发，我们经常需要将 JavaScript 嵌入到 C# 代码中。为了做到这一点，似乎有两种流行的思想流派：

```
string blah = "asdf";
StringBuilder someJavaScript = new StringBuilder();
someJavaScript.Append("<script language='JavaScript' >");
someJavaScript.Append("function foo()\n");
someJavaScript.Append("{\n");
someJavaScript.Append("  var bar = '{0}';\n", blah);
someJavaScript.Append("}\n");
someJavaScript.Append("</script>"); 
```

另一种思想流派是这样的：

```
string blah = "asdf";
string someJavaScript = @"
    <script language='JavaScript' >
    function foo()
    {
      var bar = '" + blah + @"';
    }
    </script>"; 
```

有没有比这两种方法更好的方法？我个人喜欢第二个，因为您可以看到 JavaScript 的整个部分（或其他语言块，无论是 SQL 还是您拥有的），它还有助于在该特定语言的另一个编辑器之间复制代码。

编辑：
我应该提到最终目标是在最终网页中格式化 JavaScript。

我还更改了示例以显示与生成的代码的交互。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-20T18:53:58.110

第二个显然方式，方式，更清晰。做第一件事根本没有任何理由。

但是，我会将其扩展到以下内容：

```
string someJavaScript = string.Format(@"
    <script language='JavaScript' >
      function foo()
      {
          var bar = '{0}';
      }
    </script>", blah); 
```

如果你有几件事要粘在字符串中，那么 string.Format 方法将变得比内联连接更具可读性。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-05-20T19:01:06.163

第二种方式，虽然使用外部文件要好得多，并且允许对应用程序进行修改而无需重新编译。

您还需要一种很好的、​​可读的方式来插入变量。最简单的方法是使用 string.Format，但是每个变量都是 {0} 或 {1}，因此这可能是不可读的。

怎么样：

```
public static string Insert(object dictionary, string into)
{
    foreach (PropertyInfo property in dictionary.GetType().GetProperties())
        into = into.Replace("<%" + property.Name + "%>", 
                            property.GetValue(dictionary, null).ToString());

    return into;
} 
```

然后你可以这样做：

```
string js = Insert(new { divList, url }, 
                   @"jQuery(document).ready(function(){
                        jQuery('#<%divList%>').jqGrid({
                            url:'<%url%>',
                            datatype: 'json',
                            mtype: 'GET', ... etc..."); 
```

或者如果脚本在外部文件中：

```
string js = Insert(new { divList, url }, File.ReadAllText("someFile.js")); 
```

您可以传递任何对象，并且可以通过 ASP 样式的转义语法直接访问其属性。

显然，上面给出的实现不是很有效，但是很短。

另一种可能性是编写一个返回 JavaScript 的 .aspx 页面，然后您可以将其包含在您的 HTML 页面中并提供`<script>`参考。您可以[将页面的 ContentType 设置](http://msdn.microsoft.com/en-us/library/ydy4x04a.aspx)为`application/x-javascript`。

这将允许您使用普通的 ASP.NET`<%= %>`标记来修改它，并且已经是一个快速、强大的外部文件解决方案，当您对脚本进行编辑时会自动编译。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-05-20T18:50:07.900

如何将 JavaScript 作为资源部分添加到文件中，以便可以从可执行文件的资源部分作为（嵌入）脚本加载？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-20T18:52:16.490

字符串文字有一个原因：可读性。

（性能不是问题，这是我们正在谈论的MOSS......）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2010-09-08T08:35:37.987

我们为此目的编写了一个库，它提供了一种流利的语法来将 JavaScript 嵌入到 C# 代码中。[你可以在这里](http://adamjsgenerator.codeplex.com)阅读更多关于它的信息。

简而言之，您的示例将写为：

```
var function = JS.Function("foo").Do(
    JS.Var(JS.Id("bar").AssignWith(blah)));
string someJavaScript = "<script>" + function + "</script>"; 
```

一方面，它将确保 blah 变量的内容被正确引用，例如，如果它包含特殊字符。

# xslt - XSL：选择节点中的所有文本，特定类型的节点除外

> ID：889571
> 
> 赞同：2
> 
> 时间：2009-05-20T18:48:11.010
> 
> 标签：xslt

如何输出节点中的所有文本，包括其子节点中的文本，同时排除“a”节点中的文本？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-05-20T21:17:30.193

利用文本节点的内置模板规则，即将它们复制到结果中。即使对于您指定的新处理模式（以下代码中的“all-but-a”），内置规则也将起作用：对于元素，（递归）处理子元素；对于文本节点，复制。您只需要覆盖其中之一，即`<a>`元素规则，因此是空模板规则，它有效地去除了文本。

```
<xsl:stylesheet version="1.0"
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

  <xsl:template match="myNode">
    <!-- Process children -->
    <xsl:apply-templates mode="all-but-a"/>
  </xsl:template>

          <!-- Don't process <a> elements -->
          <xsl:template mode="all-but-a" match="a"/>

</xsl:stylesheet> 
```

有关内置模板规则如何工作的完整描述，请查看我网站上[“XSLT](http://lenzconsulting.com/how-xslt-works/)工作原理”的“内置模板规则”部分。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-20T18:53:05.053

如果您当前正在处理您的节点。

```
<xsl:value-of select="."/> 
```

应该返回所有的文本内容

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-29T05:31:25.903

我相信这就是您正在寻找的：

```
<xsl:for-each select="//text()[not(ancestor::a)]">
  <xsl:value-of select="."/>
</xsl:for-each> 
```

它选择不是锚标记子级的所有文本节点。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-20T18:52:51.077

```
<xsl:for-each select="//*[text() and name() != 'a']">
<xsl:value-of select="."/>
</xsl:for-each> 
```

# java - 对于非 web 应用程序，spring 的 ContextLoader 是否有等价物

> ID：889576
> 
> 赞同：4
> 
> 时间：2009-05-20T18:49:14.220
> 
> 标签：java, spring

我想要一个类似于 spring 的 ContextLoader/ContextLoaderListener/ContextLoadServlet 的类。当应用程序服务器初始化并将您配置的上下文放入内存时，将调用这些类。

对于没有容器包装的应用程序，这有什么类比？

这将排除多个实例化，提供统一的检索位置，并且也不会遭受双重检查锁定跛行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-20T18:53:06.007

经典的是 ClassPathXmlApplicationContext：

```
import org.springframework.context.ApplicationContext;
import org.springframework.context.support.ClassPathXmlApplicationContext;
import org.springframework.scripting.Messenger;

public final class Boot {

    public static void main(final String[] args) throws Exception {
        ApplicationContext ctx = new ClassPathXmlApplicationContext("scripting/beans.xml");
        Messenger messenger = (Messenger) ctx.getBean("messenger");
        System.out.println(messenger);
    }
} 
```

[在这里](http://static.springframework.org/spring/docs/2.5.x/reference/beans.html)查看更多

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-20T19:02:28.453

可以在此处找到替代解决方案：

[简单的 Spring，独立应用使用 ClasspathApplicationContext，如何重用？](https://stackoverflow.com/questions/707355/simple-spring-use-of-classpathapplicationcontext-for-standalone-apps-how-to-reu/707729#707729)

用于使用 SingletonBeanFactoryLocator。

# c++ - 为什么 C++ 编译器 (gcc) 认为函数是“虚拟”字段？

> ID：889581
> 
> 赞同：12
> 
> 时间：2009-05-20T18:50:10.600
> 
> 标签：c++, gcc, compiler-errors

我的班级中有以下方法定义：

```
virtual Calc* Compile(
  Evaluator* evaluator, ResolvedFunCall* fun_call, string* error); 
```

出于某种原因，GCC 抱怨说：

`error: 'Compile' declared as a 'virtual' field`

任何想法为什么它会相信 Compile 是一个领域，而不是一个方法？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2009-05-20T19:09:16.660

当第一个参数对它没有意义时，我会收到该错误。检查`Evaluator`称为类型：

```
struct A {
    virtual void* b(nonsense*, string*);
};

=> error: 'b' declared as a 'virtual' field

struct A {
    virtual void* b(string*, nonsense*);
};

=> error: 'nonsense' has not been declared 
```

为了找出某个东西是对象还是函数声明，编译器有时必须扫描整个声明。声明中可能形成声明的任何构造都被视为声明。如果不是，那么任何这样的构造都被认为是一个表达式。GCC 显然认为因为`nonsense`不是有效类型，所以它不能是有效的参数声明，因此回退将整个声明视为一个字段（请注意，它说另外*`error: expected ';' before '(' token`*）。在本地范围内同样的事情

```
int main() {
    int a;

    // "nonsense * a" not treated as declaration
    void f(nonsense*a);
}

=> error: variable or field 'f' declared void

int main() {
    // "nonsense * a" treated as parameter declaration
    typedef int nonsense;
    void f(nonsense*a);
}

=> (compiles successfully) 
```

# sharepoint - 如何使用 Sharepoint Web 服务更改站点标题和描述？

> ID：889584
> 
> 赞同：0
> 
> 时间：2009-05-20T18:50:35.153
> 
> 标签：sharepoint

我想使用 Sharepoint Web 服务阅读和更改 sharepoint 站点（SPSite 和 SPWeb）的标题。

我有共享点网站的网址。想要使用 sharepoint web 服务更改页面的标题。

无法创建 SPWeb。

任何输入。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T19:10:26.523

您可以通过 Web 服务获取标题和描述，但不要更改它，因为没有更新方法。[Webs.GetWeb 方法](http://msdn.microsoft.com/en-us/library/webs.webs.getweb.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-21T18:51:43.787

我认为当前的 SharePoint Web 服务没有更新 Web 或网站集标题的方法。但是，您可以[编写自己的 Web 服务](http://msdn.microsoft.com/en-us/library/ms464040.aspx)，它可以很容易地做到这一点。

# rest - 如何将 ActiveResource 与浅嵌套路由一起使用？

> ID：889588
> 
> 赞同：16
> 
> 时间：2009-05-20T18:51:47.523
> 
> 标签：rest, activeresource

我有一个 Rails 应用程序，它有一个 Company 资源和一个[嵌套资源](http://railscasts.com/episodes/139-nested-resources)Employee。我正在使用浅层路由，因此要操作 Employee，我的路由是：

```
GET     /employees/1
PUT     /employees/1
DELETE  /employees/1
POST    /companies/1/employees 
```

如何使用 ActiveResource 创建、读取、更新和销毁员工？

要创建员工，我可以使用：

```
class Employee < ActiveResource::Base
  self.site = "http://example.com/companies/:company_id"
end 
```

但如果我尝试这样做：

```
e=Employee.find(1, :params => {:company_id => 1}) 
```

我得到 404 是因为使用浅层路由时未定义路由 /companies/:company_id/employees/:id 。

要读取、编辑和删除员工，我可以使用：

```
class Employee < ActiveResource::Base
  self.site = "http://example.com"
end 
```

但是，由于缺乏公司外部路线，似乎没有办法创建新员工。

一种解决方案是定义单独的 CompanyEmployee 和 Employee 类，但这似乎过于复杂。

如何在 ActiveResource 中使用单个 Employee 类来执行所有四个 CRUD 操作？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2011-07-26T20:39:15.947

我正在使用 Rails 3.0.9。您可以像这样设置前缀：

```
class Employee < ActiveResource::Base
  self.prefix = "/companies/:company_id/"
end 
```

进而

```
Employee.find(:all, :params => {:company_id => 99}) 
```

或者

```
e = Employee.new(:name => "Corey")
e.prefix_options[:company_id] = 1 
```

它将用 prefix_options 中的值替换 :company_id。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2009-05-22T02:27:42.697

您可以覆盖一个名为 collection_path 的受保护实例方法。

```
class Employee < ActiveResource::Base
  self.site = "http://example.com"

  def collection_path(options = nil)
    "/companies/#{prefix_options[:company_id]}/#{self.class.collection_name}"
  end
end 
```

然后，您将能够创建员工。

```
e = Employee.new(:name => "Corey")
e.prefix_options[:company_id] = 1
e.save 
```

除了 clone 方法之外，似乎没有记录 prefix_options ，因此这可能会在未来的版本中发生变化。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T15:06:29.317

见这篇文章：[http ://blog.flame.org/2009/11/04/activeresource-and-shallow-nested-routes.html](http://blog.flame.org/2009/11/04/activeresource-and-shallow-nested-routes.html)

在这里，作者提出重写类方法[collection_path](http://apidock.com/rails/v3.1.0/ActiveResource/Base/collection_path/class)。这是有道理的，因为 new_element_path 也使用此方法，并且在两种情况下都将检索相同的路径。

例子：

```
class Employee < ActiveResource::Base
  self.site = "http://example.com"

  def self.collection_path(prefix_options = {},query_options=nil)
    super
    "/companies/#{query_options[:company_id]}/#{collection_name}.#{format.extension}#{query_string(query_options)}"
  end
end 
```

然后，您可以通过以下方式为公司找到员工：

```
company = Company.find(:first)
Employee.find(:all, :params => {:company_id => company.id }) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-10-24T18:14:19.737

我发现最好`ActiveResource::Base.element_path`使用库中定义的相同功能进行覆盖，但`prefix_options`在返回值中省略使用。没有

```
class Employee < ActiveResource::Base
  self.site = 'http://example.com'
  self.prefix = '/companies/:company_id/'

  # Over-ride method and omit `#{prefix(prefix_options)}` from the returned string
  def self.element_path(id, prefix_options = {}, query_options = nil)
    "/#{collection_name}/#{URI.parser.escape id.to_s}.#{format.extension}"
  end
end 
```

然后 Employee 类将像往常一样运行，无需像其他解决方案中建议的那样将 prefix_options 分配给实例。

# data-modeling - 电话号码的国际格式是什么

> ID：889592
> 
> 赞同：4
> 
> 时间：2009-05-20T18:52:26.927
> 
> 标签：data-modeling

是否有适合所有号码的电话号码格式？（比区号 3 个数字和其余 7 个数字更灵活的东西）

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-05-20T19:15:20.127

这被标记为数据建模......所以我将解决这个问题。

电话号码，无论国家/地区，都应始终存储为不带格式 ( `eg. "9083429876"`) 的字符串。

我看到人们试图将这些存储为带格式的字符串......这通常会导致灾难。在某个地方，有人会希望这些数字的格式不同。然后你不仅要为它们编写一个格式化函数，还要为它们编写一个非格式化函数。约萨。

我还看到有人试图将这些存储为 INT64（或 BIGINT）。嗯，很好，但为什么呢？没有人会显示未格式化的电话号码。要格式化，您必须将其转换为字符串。有些人试图争辩说它是出于分类目的，但这也行不通。对电话号码进行排序从来都不是有用的操作。根据区号过滤数字很有用 - 但按数字排序顺序返回所有数字？从来没有用。

我看到的第三个不好的做法是人们将数字的每个组成部分存储在单独的字段中。再次，不好。当你开始在那里戳国际号码时，这些字段变得毫无意义。举个例子：你认为塞内加尔使用区号吗？

因此，作为分手的想法，我留给您：由于每个国家/地区都有自己的一组数字（实际上是符号）-应该考虑并注意如何格式化它们以进行显示。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-05-20T18:53:58.533

[http://en.wikipedia.org/wiki/E.164](http://en.wikipedia.org/wiki/E.164)

[http://www.kropla.com/dialcode.htm](http://www.kropla.com/dialcode.htm)

编辑：应该在我实际提交之前检查我粘贴的内容。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-20T18:56:09.837

所有电话号码的格式为：

*   国家代码（1-3 位数）
*   其余的部分

电话号码的位数应为 15 或更少。

另见[维基百科](http://en.wikipedia.org/wiki/E.164)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2011-09-27T11:21:18.860

始终将数字与国家/地区代码一起存储，以便在显示时能够明确并为读者正确格式化。

# iphone - 在架构上，如何从 AppStore 安装 iPhone 应用程序？

> ID：889595
> 
> 赞同：5
> 
> 时间：2009-05-20T18:52:54.680
> 
> 标签：iphone

当我们通过 AppStore 点击“立即安装”按钮时，我很好奇将应用程序放到 iPhone 上的过程是什么？

它会下载压缩的zip吗？包？和 XCOPY 等效吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-05-20T18:56:25.063

它下载一个`IPA`文件，该文件在技术上是一个压缩文件，其中包含应用程序以及 DRM 签名和其他内容。它通过将文件夹复制到`/var/mobile/Applications/{GUID}/`.

# algorithm - 以多边形的角度计算边界矩形

> ID：889596
> 
> 赞同：7
> 
> 时间：2009-05-20T18:53:03.323
> 
> 标签：algorithm, graphics, geometry

我需要以任意角度确定多边形的边界矩形。这张图片说明了我需要做的事情：

[替代文字 http://kevlar.net/RotatedBoundingRectangle.png](http://kevlar.net/RotatedBoundingRectangle.png)

对于简单的二维多边形，我需要以不同的角度确定粉色矩形。

任何解决方案都非常感谢！

**编辑：**

感谢您的回答，一旦我得到正确的中心点，我就可以工作了。你们真棒！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-05-20T18:59:31.377

要获得具有特定角度的边界框，请将多边形反向旋转该角度。然后您可以使用最小/最大 x/y 坐标来获得一个简单的边界框并将其旋转角度以获得最终结果。

从您的评论看来，您在获取多边形的中心点时遇到了问题。多边形的中心应该是每个点的坐标和的平均值。所以对于点 P1,...,PN，计算：

```
xsum = p1.x + ... + pn.x;
ysum = p1.y + ... + pn.y;
xcenter = xsum / n;
ycenter = ysum / n; 
```

为了完成这一点，我还为所涉及的旋转添加了一些公式。要围绕中心点 (cx, cy) 旋转点 (x,y)，请执行以下操作：

```
// Translate center to (0,0)
xt = x - cx;
yt = y - cy;
// Rotate by angle alpha (make sure to convert alpha to radians if needed)
xr = xt * cos(alpha) - yt * sin(alpha);
yr = xt * sin(alpha) + yt * cos(alpha);
// Translate back to (cx, cy)
result.x = xr + cx;
result.y = yr + cx; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-20T19:12:23.253

要获得最小的矩形，您应该获得正确的角度。这可以通过碰撞检测中使用的算法来完成：定向边界框。基本步骤：

获取所有顶点坐标
构建协方差矩阵
查找特征值投影
特征值空间中的所有顶点 在
每个特征值空间中查找最大值和最小值。

欲了解更多信息，只需谷歌 OBB “碰撞检测”

Ps：如果您只是投影所有顶点并找到最大值和最小值，那么您正在制作 AABB（轴对齐边界框）。它更容易并且需要更少的计算工作，但不能保证最小框。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-20T19:01:45.897

我将您的问题解释为“对于给定的 2D 多边形，您如何计算预定方向角的边界矩形的位置？”

我会通过相对于方向角旋转多边形来做到这一点，然后使用适合存储多边形点的结构的任何搜索算法在两个基本方向上简单搜索其最大和最小点。（简单地说，你需要找到最高和最低的 X 值，以及最高和最低的 Y 值。）

然后最小值和最大值定义你的矩形。

您可以在不先旋转多边形的情况下做同样的事情，但是您对最小和最大点的搜索必须更加复杂。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2010-07-23T23:56:42.540

要获得一个包含多边形的面积最小的矩形，您可以使用[旋转卡尺](http://cgm.cs.mcgill.ca/~orm/maer.html)算法。

关键的见解是（与您的示例图像不同，所以我假设您实际上不需要最小面积？），任何这样的最小矩形都与多边形（的凸包）的至少一个边缘共线。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-07-13T01:09:54.977

这是@schnaader 的答案的python 实现。给定一个带有坐标 x 和 y 的点集以及约束这些点的矩形的度数，该函数返回一个具有四个角的点集（以及第一个角的重复）。

```
def BoundingRectangleAnglePoints(x,y, alphadeg):
    #convert to radians and reverse direction    
    alpha = np.radians(alphadeg)

    #calculate center
    cx = np.mean(x)
    cy = np.mean(y)

    #Translate center to (0,0)
    xt = x - cx
    yt = y - cy

    #Rotate by angle alpha (make sure to convert alpha to radians if needed)
    xr = xt * np.cos(alpha) - yt * np.sin(alpha)
    yr = xt * np.sin(alpha) + yt * np.cos(alpha)

    #Find the min and max in rotated space
    minx_r = np.min(xr)
    miny_r = np.min(yr)
    maxx_r = np.max(xr)
    maxy_r = np.max(yr)
    #Set up  the minimum and maximum points of the bounding rectangle    
    xbound_r = np.asarray([minx_r, minx_r, maxx_r, maxx_r,minx_r])
    ybound_r = np.asarray([miny_r, maxy_r, maxy_r, miny_r,miny_r])

    #Rotate and Translate back to (cx, cy)
    xbound = (xbound_r * np.cos(-alpha) - ybound_r * np.sin(-alpha))+cx
    ybound = (xbound_r * np.sin(-alpha) + ybound_r * np.cos(-alpha))+cy

    return xbound, ybound 
```

# asp.net-mvc - 如何将信息从控制器传递到视图，然后使用 asp.net mvc 将其返回到控制器中？

> ID：889607
> 
> 赞同：0
> 
> 时间：2009-05-20T18:55:09.403
> 
> 标签：asp.net-mvc

我很确定这很容易，但我似乎找不到它。

我有 2 个表在 sql 中链接在一起；

```
 table1 with field named idTable1, info
   table2 with field named idTable1, idTable2, moreInfo 
```

当我显示可以在 table2 中添加新行的视图时，我可以访问 idTable1

```
 <%=Html.Encode(Model.idTable1)%> 
```

但是当我提交表单时，我丢失了该信息，在控制器中 IdTable1 现在为空

如何解决这个“问题”？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-20T19:14:18.333

`Html.Encode`您可以尝试使用 ，而不是使用`Html.Hidden`。例子：

```
<form>
...
<%= Html.Hidden("idTable1", Model.idTable1) %>
...
</form> 
```

`idTable1`这将与表单数据一起提交值。

# ruby-on-rails - 以 rails 形式验证多个模型

> ID：889608
> 
> 赞同：2
> 
> 时间：2009-05-20T18:55:14.847
> 
> 标签：ruby-on-rails, validation

我正在浏览第 73 期的 railscast ( [http://railscasts.com/episodes/73-complex-forms-part-1](http://railscasts.com/episodes/73-complex-forms-part-1) )，其中 Ryan Bates 解释了如何以一种形式使用多个模型。他以单一形式创建了一个项目对象及其任务（一个简单的应用程序，您可以在其中创建一个项目及其相关任务）

它运作良好，但我不确定如何进行验证。像存在等正常的验证很容易做到。但是，如何进行重复任务检查？如果我们添加 validates_uniqueness_of，它将检查所有项目的所有任务，而我们只想检查正在创建的当前项目中的重复任务。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-21T19:22:35.380

你想做的是：

```
validates_uniqueness_of :task_name, :scope => :project_id 
```

# asp.net-mvc - ASP.NET MVC：动作内的授权 - 建议的模式或者这是一种气味？

> ID：889619
> 
> 赞同：10
> 
> 时间：2009-05-20T18:57:31.707
> 
> 标签：asp.net-mvc, model-view-controller, design-patterns, authorization, single-responsibility-principle

我有一个在控制器和操作上使用授权属性的 ASP.NET MVC 应用程序。这一直运作良好，但出现了新的皱纹。

对象：装运

角色：运输、会计、一般用户

货件通过工作流程移动。在状态 A 中，它只能由 Shipping 编辑。在状态 B 中，它只能由会计编辑。

我有一个 ShipmentController 和一个 Edit Action。我可以放置一个 Authorization 属性来将 Edit 操作限制为仅这两个角色，但这并不能区分 Shipment 处于哪个状态。我需要在服务调用之前在操作中执行一些 Authorization 以确定用户是否真正被授权执行编辑操作。

所以我有两个问题：

1）在Action中获得授权的好方法是什么。Controller Action 调用服务，然后服务对 Shipment 对象进行适当的调用（更新数量、更新日期等）。我确定我希望 Shipment 对象不受任何授权要求的影响。另一方面，如果我希望服务对象知道授权，我并没有真正的把握。有什么好的模式吗？

2）我的问题实际上是糟糕设计的症状吗？我应该有一个 StateAshipmentController 和 StateBshipmentController，而不是 ShipmentController？我没有在 Shipment 对象中内置任何多态性（状态只是一个枚举），但也许我应该并且控制器应该反映这一点。

我想我正在寻求更通用的解决方案，而不是针对我的案例的特定解决方案。我只是想提供一个例子来说明这个问题。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-21T14:18:19.347

我认为 Action 方法在其中进行进一步的授权检查没有问题。您可以利用角色提供程序来获得您正在寻找的细粒度授权。请原谅我的语法 - 它可能很粗糙，我还没有测试过。

```
[Authorize(Roles="Shipping, Accounting")]
public ActionResult Edit(int id)
{
    Shipment shipment = repos.GetShipment(id);

    switch (shipment.State)
    {
         case ShipmentState.A:
         if (Roles.IsUserInRole("Shipping"))
                return View(shipment);
         else
                return View("NotAuthorized");
         break;
         case ShipmentState.B:
         if (Roles.IsUserInRole("Accounting"))
                return View(shipment);
         else
               return View("NotAuthorized");
         break;
         default:
              return View("NotAuthorized");
     }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-20T19:01:55.490

您的授权属性可以从操作参数或路线数据中获取货件，然后做出决定。

对于第 1 点，有许多模式可以在域对象中启用丰富的行为。在双重分派中，您将对服务抽象（接口）的引用传递给对象上的方法。然后它可以做它的事情。您还可以编写一个应用程序服务来接收 Shipment 并完成工作。

2号，不一定。您可能需要将“上下文 Shipment”的概念抽象为一项服务，以确定您所处的 Shipment 上下文。但我会使用 YAGNI 直到您再次需要它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-20T19:06:36.743

你可以看看[Rhino.Security](http://weblogs.asp.net/arturtrosin/archive/2009/04/02/rhino-tools-rhino-security-guide.aspx)，它可以用来在这些场景中实现用户授权。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-22T13:15:00.430

除了上面的答案，您可以返回一个 HttpUnauthorizedResult 而不是为 NotAuthorized 创建自己的视图。这将重定向到登录页面，其行为就像通常的 [Authorize] 属性

# c# - 将服务引用添加到共享类的多个 WCF 服务

> ID：889621
> 
> 赞同：6
> 
> 时间：2009-05-20T18:58:04.263
> 
> 标签：c#, wcf, silverlight, web-services, proxy

我正在尝试将我的 WCF Web 服务拆分为几个服务，而不是 1 个巨型服务。但是 Visual Studio（Silverlight 客户端）复制了两个服务共享的公共类。这是一个简单的例子来说明我的问题。

在此示例中，有两个服务。两者都返回类型“Person”。默认情况下，VS 将在唯一的 NameSpaces 下创建两个单独的 Person 代理。这意味着不同服务返回的“Person”不能被客户端当作同一个东西来消费。我该如何解决？是否可以不自己编写代理类？

## 常见的

```
[DataContract]
public class Person
{
    [DataMember]
    string FirstName { get; set; }
    [DataMember]
    string LastName { get; set; }
    [DataMember]
    string PrivateData { get; set; }
} 
```

## 员工服务.svc

```
[ServiceContract(Namespace = "")]
public class StaffService
{
     [OperationContract]
     public Person GetPerson ()
     {
         return new Person {"John", "Doe", "secret"};
     };
} 
```

## 公共服务.svc

```
[ServiceContract(Namespace = "")]
public class PublicService
{
     [OperationContract]
     public Person GetPerson ()
     {
         return new Person {"John", "Doe", "*****"};
     };
} 
```

谢谢你的帮助！贾斯汀

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-05-20T21:02:23.733

“添加服务引用”的“高级”部分下有一个名为“在引用的程序集中重用类型”的复选框。这将寻找您的服务中使用的类型，如果它们已经存在于引用的程序集中，那么将使用它们而不是生成的代理类。

这里需要注意的是，它只搜索“引用的程序集”，因此它不会获取其他服务生成的代理（我相信不同的命名空间也会阻止它）。

我的 Silverlight 项目中通常有一个业务/域项目，所以我将我的共享类添加到该项目中（通常使用“添加现有项目”>“添加为链接”，以便共享代码）。

完成后，您可以生成服务引用，它们应该选择您现有的类型。

希望这可以帮助

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-20T19:02:40.310

如果同时使用 svcutil.exe 生成代理，它只会生成一种类型。我不知道如何通过向项目添加服务引用来做到这一点。

我们在批处理文件中运行它，因此我将其剪掉并更改了名称以保护无辜者。它实际上是将服务名称空间映射在一起，然后**将所有 URL 包含在一起**。它还具有集合类型集（用于列表）并包含一个程序集引用（其他一些答案引用。

```
@ECHO OFF

SET cmd=C:\"Program Files"\"Microsoft SDKs"\Windows\v6.0a\bin\SvcUtil.exe
SET cmd=%cmd% /out:Traffic.cs /noConfig /collectionType:System.Collections.Generic.List`1

SET cmd=%cmd% /reference:..\..\..\lib\Architecture.Frameworks.dll

REM ######### Service namespace mappings (Service Contracts and Message Contracts)
SET cmd=%cmd% /namespace:"http://services.test.com/app/2005/09/"
SET cmd=%cmd%,"app.ServiceProxies"

REM ######### Schema namespace mappings (Data Contracts)
SET cmd=%cmd% /namespace:"http://schemas.company.com/app/2005/09/"
SET cmd=%cmd%,"Co.ServiceProxies.app.DataContracts"

REM ######### Set all the URLs that have common types
SET cmd=%cmd% http://localhost/Services/MyService1.svc
SET cmd=%cmd% http://localhost/Services/MyService2.svc

%cmd%

PAUSE 
```

如果所有项目都在同一个服务命​​名空间中，您可能只需拥有所有 URL 而不必担心命名空间，但我没有尝试过这种方式。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2009-05-20T19:20:42.473

svcutil.exe 可以重用指定程序集中的类型。如果您手动运行 svcutil.exe，您可以通过设置服务引用属性或 /reference 键来配置它。

如果您是上述服务的所有者，请考虑将 Person 类等数据类型放入单独的程序集中，该程序集可从客户端和服务中获取。

# django - django 中的 login_required 装饰器

> ID：889622
> 
> 赞同：17
> 
> 时间：2009-05-20T18:58:20.677
> 
> 标签：django

在 urls.py 和 views.py 中使用 login_required 装饰器有什么区别吗？如果我把这一行：

```
url(r'^add/$', login_required(views.add_media), name = 'add_media_action') 
```

在 urls.py 中我会达到与在 views.py 中装饰 add_media 函数相同的效果：

```
@login_required
def add_media(request):
    ... 
```

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2009-05-20T19:04:44.780

在 Python 中，装饰器是一个函数，它接受一个函数作为参数，并返回一个装饰函数。`@login_required`语法可以翻译成：

```
def add_media(request):
  ...
add_media = login_required(add_media) 
```

因此，如果您手动应用装饰器（如在您的第一个片段中），它应该会产生相同的效果。

如果您想同时使用视图的修饰和未修饰版本，则第一个片段中的方法很有用。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2009-05-20T19:25:04.303

正如其他人指出的那样，它们确实是等价的。如果您希望采用这种方法，还需要考虑两件事：

1.  在 urls.py 中执行此操作将登录要求与代码中定义被装饰的地方分开。因此，您（或其他维护人员）可能会忘记该函数已被修饰。

2.  因为您在 urls 文件中应用了安全性，所以有人可能会错误地添加另一个指向同一函数的 URL，但忘记将函数包装在 login_required 中，从而导致安全漏洞。

希望有帮助。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-05-20T19:04:45.640

是的，它们是一样的。装饰器是将函数包装在另一个函数中的语法糖。因此，无论哪种情况，您都`login_required`在环绕`views.add_media`.

# active-directory - 查明用户的证书何时到期

> ID：889623
> 
> 赞同：0
> 
> 时间：2009-05-20T18:58:28.350
> 
> 标签：active-directory, ldap, certificate, digital-certificate, ldap-query

有谁知道我如何才能找出用户证书何时到期？我知道我可以使用以下代码获取给定用户的所有证书：

```
Set objUserTemplate = _
    GetObject("LDAP://cn=userTemplate,OU=Management,dc=NA,dc=fabrikam,dc=com")
arrUserCertificates = objUserTemplate.GetEx("userCertificate") 
```

但是，我该如何轮询给定证书的到期日期呢？我确实在这里看到了这个 java 代码：[http](http://forums.novell.com/novell-developer-forums/dev-ldap/364977-q-retrieving-users-public-key-over-ldap.html) ://forums.novell.com/novell-developer-forums/dev-ldap/364977-q-retrieving-users-public-key-over-ldap.html ，

```
X509Certificate cert = ( X509Certificate )it.next();
java.util.Date expires = cert.getNotAfter();
GregorianCalendar calNow = new GregorianCalendar();
GregorianCalendar calExp = new GregorianCalendar();
calExp.setTime( expires );
//issuerDN = cert.getIssuerDN().getName();
int daysTilExp = com.willeke.utility.DateUtils.daysPast( calExp );
long diffDays = com.willeke.utility.DateUtils.diffDayPeriods( calNow,
calExp );
if( diffDays <= 0 )
{
String mex = " Will expire in: " + diffDays + " days!"; 
```

但我不确定我是否可以`getNotAfter`在 VB 中使用该方法，或者我将如何去做。有没有人有任何想法？如果可能的话，我希望帮助在 VBScript/VB.Net/VBA 等中进行此查询。

我确实在[这里找到了这个 VBScript 代码，](http://www.cruto.com/resources/vbscript/vbscript-examples/ad/users/list/List-Published-Certificates-for-a-User-Account.asp)它似乎正在做我想要完成的事情，但看起来相当复杂，而 java 代码看起来要简单得多。有没有一种更简单的方法可以在某种 VB 中进行此查询？

从克鲁托网站：

```
On Error Resume Next

Const E_ADS_PROPERTY_NOT_FOUND  = &h8000500D
Const ForWriting = 2
Const WshRunning = 0

Set objUser = GetObject _
    ("GC://cn=MyerKen,ou=Management,dc=NA,dc=fabrikam,dc=com")
objUser.GetInfoEx Array("userCertificate"), 0
arrUserCertificates = objUser.GetEx("userCertificate")

If Err.Number = E_ADS_PROPERTY_NOT_FOUND Then
    WScript.Echo "No assigned certificates"
    WScript.Quit
Else
    Set objShell = CreateObject("WScript.Shell")
    Set objFSO = CreateObject("Scripting.FileSystemObject")
    strPath = "." 
    intFileCounter = 0

    For Each arrUserCertificate in arrUserCertificates
        strFileName = "file" & intFileCounter
        strFullName = objFSO.BuildPath(strPath, strFileName)
        Set objFile = objFSO.OpenTextFile(strFullName, ForWriting, True)

        For i = 1 To LenB(arrUserCertificate)
            ReDim Preserve arrUserCertificatesChar(i - 1)
            arrUserCertificatesChar(i-1) = _
                Hex(AscB(MidB(arrUserCertificate, i, 3)))
        Next

        intCounter=0
        For Each HexVal in arrUserCertificatesChar
            intCounter=intCounter + 1
            If Len(HexVal) = 1 Then 
                objFile.Write(0 & HexVal & " ")
            Else
                objFile.Write(HexVal & " ")
            End If
        Next
        objFile.Close
        Set objFile = Nothing

        Set objExecCmd1 = objShell.Exec _
            ("certutil -decodeHex " & strFileName & " " & strFileName & ".cer")
        Do While objExecCmd1.Status = WshRunning
            WScript.Sleep 100
        Loop
        Set objExecCmd1 = Nothing

        Set objExecCmd2 = objShell.Exec("certutil " & strFileName & ".cer")
        Set objStdOut = objExecCmd2.StdOut
        Set objExecCmd2 = Nothing

        WScript.Echo VbCrLf & "Certificate " & intFileCounter + 1
        While Not objStdOut.AtEndOfStream
            strLine = objStdOut.ReadLine
            If InStr(strLine, "Issuer:") Then
                WScript.Echo Trim(strLine)
                WScript.Echo vbTab & Trim(objStdOut.ReadLine)
            End If
            If InStr(strLine, "Subject:") Then
                Wscript.Echo Trim(strLine)
                WScript.Echo vbTab & Trim(objStdOut.ReadLine)
            End If
            If InStr(strLine, "NotAfter:") Then
                strLine = Trim(strLine)
                WScript.Echo "Expires:"
                Wscript.Echo vbTab & Mid(strLine, 11)
            End If
        Wend

        objFSO.DeleteFile(strFullName)
        objFSO.DeleteFile(strPath & "\" & strFileName & ".cer") 

        intFileCounter = intFileCounter + 1
    Next
End If 
```

更新我确实看到我可以[将证书导入到 CAPICOM](http://msdn.microsoft.com/en-us/library/aa376527(VS.85).aspx)对象中以返回[ValidToDate](http://msdn.microsoft.com/en-us/library/aa376548(VS.85).aspx)属性，但是根据这里的帖子，显然它存储在 AD 中的格式是错误的格式：[http://www.powershellcommunity。 org/Forums/tabid/54/aff/4/aft/1639/afv/topic/Default.aspx](http://www.powershellcommunity.org/Forums/tabid/54/aff/4/aft/1639/afv/topic/Default.aspx)

有谁知道 CAPICOM 导入功能需要什么格式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-20T19:16:32.497

Microsoft 有一个名为 CAPICOM 的 ActiveX 控件，它允许您以编程方式访问证书的各种属性。[MSDN CAPICOM 文章](http://msdn.microsoft.com/en-us/library/ms995332.aspx)详细介绍了这些函数。Platform SDK（链接自 Where to get it 链接）包括示例、文档和可再发行控件。示例包括 VBScript 示例。[我在这里](http://www.microsoft.com/downloads/details.aspx?FamilyID=860ee43a-a843-462f-abb5-ff88ea5896f6&DisplayLang=en "平台SDK下载")找到了平台 SDK 的下载。

简而言之，一旦您检索到证书，您就在寻找**ValidFromDate**和**ValidToDate**属性。

# encoding - ……某种编码？

> ID：889627
> 
> 赞同：5
> 
> 时间：2009-05-20T19:00:13.370
> 
> 标签：encoding, hex

如果以前有人问过这个问题，请原谅我，但我向你保证，我已经在互联网上搜索过，但一无所获，可能是因为我没有正确的术语。

我想取一个整数并将其转换为小端（？）十六进制表示，如下所示：

303 -> 0x2f010000

我可以看到字节被打包，使得 16 和 1 的位置都在同一个字节中，并且 4096 的位置和 256 的位置共享一个字节。如果有人能给我指出这种编码的正确术语，我相信我能找到关于如何做到这一点的答案。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-20T19:07:18.847

将位移运算符与按位 AND 和 OR 运算符结合使用...

假设 32 位无符号：

```
int value = 303;
int result = 0x00000000;

for (int i = 0; i < 4; i++)
{
    result = result | ((value & (0xFF << (i * 8))) << (24 - (i * 8)));
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-20T19:51:59.040

Big-endian 和 little-endian 指的是内存中字节的顺序。像 0x2f100000 这样的值没有内在的字节序，字节序取决于 CPU 架构。

如果您总是想反转 32 位值中字节的顺序，请使用 Demi 发布的代码。

如果您总是想获得特定的字节顺序（因为您正准备通过网络传输这些字节，或者将它们存储到磁盘文件中），请使用其他东西。例如，BSD 套接字库有一个函数 htonl()，它获取 CPU 的本机 32 位值并将其放入大端顺序。

如果您在 little-endian 机器上运行，htonl(303) == 0x2f100000。如果您在大端机器上运行，htonl(303) == 303。在这两种情况下，结果都将由内存中的字节 [0x00, 0x00, 0x01, 0x2f] 表示。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-20T21:19:42.870

如果有人可以对我试图做的事情给出一个具体的术语，我仍然很想听听。然而，我确实找到了一种方法来做我需要的事情，我会把它贴在这里，所以如果有人来照顾我，他们可以找到它。可能有（可能是）一种更简单、更直接的方法来做到这一点，但这是我最终在 VB.Net 中为取回我想要的字节码所做的事情：

```
Private Function Encode(ByVal original As Integer) as Byte()    
    Dim twofiftysixes As Integer = CInt(Math.Floor(original / 256))
    Dim sixteens As Integer = CInt(Math.Floor((original - (256 * twofiftysixes)) / 16))
    Dim ones As Integer = original Mod 16
    Dim bytecode As Byte() = {CByte((16 * sixteens) + ones), CByte(twofiftysixes), 0, 0}
    Return bytecode
End Function 
```

有效地将整数分解为其十六进制分量，然后将适当的对转换为 cBytes。

# sql-server - 如何从 TSQL 日期时间字段中获取 YYYY-MM-DD 格式的日期？

> ID：889629
> 
> 赞同：289
> 
> 时间：2009-05-20T19:00:41.857
> 
> 标签：sql-server, tsql

如何以`YYYY-MM-DD`格式从 SQL Server 检索日期？我需要它来使用 SQL Server 2000 及更高版本。是否有一种简单的方法可以在 SQL Server 中执行此操作，或者在检索结果集后以编程方式对其进行转换是否更容易？

我已经阅读了Microsoft Technet 上的[CAST 和 CONVERT](http://technet.microsoft.com/en-us/library/ms187928.aspx)，但没有列出我想要的格式，并且无法选择更改日期格式。

* * *

## 回答 #1

> 赞同：468
> 
> 时间：2009-05-20T19:05:59.973

```
SELECT CONVERT(char(10), GetDate(),126) 
```

限制您不想要的小时部分的 varchar 印章的大小。

* * *

## 回答 #2

> 赞同：152
> 
> 时间：2016-08-30T06:53:10.470

```
SELECT convert(varchar, getdate(), 100) -- mon dd yyyy hh:mmAM

SELECT convert(varchar, getdate(), 101) -- mm/dd/yyyy – 10/02/2008                  

SELECT convert(varchar, getdate(), 102) -- yyyy.mm.dd – 2008.10.02           

SELECT convert(varchar, getdate(), 103) -- dd/mm/yyyy

SELECT convert(varchar, getdate(), 104) -- dd.mm.yyyy

SELECT convert(varchar, getdate(), 105) -- dd-mm-yyyy

SELECT convert(varchar, getdate(), 106) -- dd mon yyyy

SELECT convert(varchar, getdate(), 107) -- mon dd, yyyy

SELECT convert(varchar, getdate(), 108) -- hh:mm:ss

SELECT convert(varchar, getdate(), 109) -- mon dd yyyy hh:mm:ss:mmmAM (or PM)

SELECT convert(varchar, getdate(), 110) -- mm-dd-yyyy

SELECT convert(varchar, getdate(), 111) -- yyyy/mm/dd

SELECT convert(varchar, getdate(), 112) -- yyyymmdd

SELECT convert(varchar, getdate(), 113) -- dd mon yyyy hh:mm:ss:mmm

SELECT convert(varchar, getdate(), 114) -- hh:mm:ss:mmm(24h)

SELECT convert(varchar, getdate(), 120) -- yyyy-mm-dd hh:mm:ss(24h)

SELECT convert(varchar, getdate(), 121) -- yyyy-mm-dd hh:mm:ss.mmm

SELECT convert(varchar, getdate(), 126) -- yyyy-mm-ddThh:mm:ss.mmm 
```

* * *

## 回答 #3

> 赞同：122
> 
> 时间：2015-12-21T09:53:22.380

从**SQL Server 2012**开始（原始问题是针对 2000 年的）：

`SELECT FORMAT(GetDate(), 'yyyy-MM-dd')`

* * *

## 回答 #4

> 赞同：36
> 
> 时间：2009-05-20T19:02:20.217

您所追求的表格列在书籍在线文档中。

[http://msdn.microsoft.com/en-us/library/aa226054(SQL.80).aspx](http://msdn.microsoft.com/en-us/library/aa226054(SQL.80).aspx)

例如，尝试以下操作：

```
select convert(varchar,getDate(),120)
select convert(varchar(10),getDate(),120) 
```

* * *

## 回答 #5

> 赞同：26
> 
> 时间：2009-05-20T19:10:05.473

具有格式说明符 120的`convert`函数将为您提供格式“yyyy-MM-dd HH:mm:ss”，因此您只需将长度限制为 10 即可仅获取日期部分：

```
convert(varchar(10), theDate, 120) 
```

但是，格式化日期通常在表示层而不是在数据库或业务层中进行。如果您返回从数据库格式化的日期，那么如果客户端代码需要对其进行任何计算，则必须再次将其解析为日期。

C# 中的示例：

```
theDate.ToString("yyyy-MM-dd") 
```

* * *

## 回答 #6

> 赞同：14
> 
> 时间：2011-09-07T07:43:14.323

对于 YYYYMMDD 试试

```
select convert(varchar,getDate(),112) 
```

我只在 SQLServer2008 上测试过。

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2012-01-05T19:10:07.687

另一种方式...

```
CONVERT(varchar, DATEPART(yyyy, @datetime)) + '/' + CONVERT(varchar, DATEPART(mm, @datetime)) + '/' + CONVERT(varchar, DATEPART(dd, @datetime)) 
```

* * *

## 回答 #8

> 赞同：7
> 
> 时间：2013-06-11T07:30:43.873

对于那些也想要时间部分的人（我做过），以下片段可能会有所帮助

```
SELECT convert(varchar, getdate(), 120) -- yyyy-mm-dd hh:mm:ss(24h)
SELECT convert(varchar, getdate(), 121) -- yyyy-mm-dd hh:mm:ss.mmm
SELECT convert(varchar, getdate(), 126) -- yyyy-mm-ddThh:mm:ss.mmm
                              --example -- 2008-10-02T10:52:47.513 
```

* * *

## 回答 #9

> 赞同：7
> 
> 时间：2020-01-12T05:42:37.510

我不确定为什么在上面的答案中忽略/省略了最简单的方法：

```
SELECT FORMAT(GetDate(),'yyyy-MM-dd');--= 2020-01-02

SELECT FORMAT(GetDate(),'dd MMM yyyy HH:mm:ss');-- = 02 Jan 2020 08:08:08 
```

我更喜欢第二种，因为无论你说哪种语言，你都会明白它是什么日期！

此外，当您将其发送到保存过程时，SQL Server 总是“理解”它，无论计算机中设置了哪种区域格式 - 我总是使用全年 (yyyy)、月份名称 (MMM) 和 24 小时格式（大写 HH）在我的编程中一个小时。

* * *

## 回答 #10

> 赞同：6
> 
> 时间：2012-10-29T09:26:44.077

```
replace(convert(varchar, getdate(), 111), '/','-') 
```

也会在不“砍掉任何东西”的情况下做伎俩。

* * *

## 回答 #11

> 赞同：6
> 
> 时间：2013-12-05T13:33:13.210

万一有人想反其道而行之，却**发现**了这一点。

```
select convert(datetime, '12.09.2014', 104) 
```

这会将德语日期格式的字符串转换为日期时间对象。

**为什么是 104？**见这里：http: [//msdn.microsoft.com/en-us/library/ms187928.aspx](http://msdn.microsoft.com/en-us/library/ms187928.aspx)

* * *

## 回答 #12

> 赞同：5
> 
> 时间：2009-05-20T19:06:43.687

在您的演员和转换链接中，使用样式 126：

`CONVERT (varchar(10), DTvalue, 126)`

这会截断时间。您要求将它放在 yyyy-mm-dd 中意味着它必须是字符串数据类型和日期时间。

坦率地说，除非您有充分的理由不这样做，否则我会在客户端上这样做。

* * *

## 回答 #13

> 赞同：4
> 
> 时间：2011-10-13T16:00:24.940

如果您想将其用作日期而不是`varchar`之后的日期，请不要忘记将其转换回：

```
select convert(datetime,CONVERT(char(10), GetDate(),126)) 
```

* * *

## 回答 #14

> 赞同：3
> 
> 时间：2018-11-12T23:46:49.080

你也可以使用。这是通过使用新的数据类型`DATE`。可能不适用于所有以前的版本，但在以后的版本中大大简化了使用。

```
SELECT CAST(getdate() AS DATE)
SELECT LEFT(CAST(getdate() AS DATE), 7) 
```

* * *

## 回答 #15

> 赞同：2
> 
> 时间：2009-05-20T19:09:42.650

`SELECT CONVERT(NVARCHAR(20), GETDATE(), 23)`

* * *

## 回答 #16

> 赞同：2
> 
> 时间：2018-01-11T01:05:17.080

在 SQL Server 2008 中，您可以这样做：`CONVERT(date,getdate())`

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2009-05-20T19:10:00.077

我会使用：

```
CONVERT(char(10),GETDATE(),126) 
```

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2012-03-20T09:26:42.347

```
SELECT Code,Description FROM TABLE

-- This will Include only date part of 14th March 2010\. Any date with date companents will not be considered.
WHERE ID= 1 AND FromDate >= CONVERT(DATETIME, '2010-02-14', 126) AND ToDate <= DATEADD(dd, 1, CONVERT(DATETIME, '2010-03-14', 126))

-- This will Include the whole day of 14th March 2010
--WHERE ID= 1 AND FromDate >= CONVERT(DATETIME, '2010-02-14', 126) AND ToDate < DATEADD(dd, 1, CONVERT(DATETIME, '2010-03-14', 126)) 
```

* * *

## 回答 #19

> 赞同：1
> 
> 时间：2020-03-23T15:45:33.603

如果您希望日期用斜线分隔，似乎没有必要做任何奇怪的事情。只需用反斜杠转义它。否则你会得到一个点。

```
SELECT FORMAT(GETDATE(),'yyyy\/MM'); 
```

在 SQL Server 2016 上测试

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2014-05-05T09:42:10.990

对每个 convert / cast 函数使用 CASE 语句对我来说总是有效的：

> 请将 tableXXXXY 替换为您的表名，并将 issueDate_dat 替换为该表中您的日期时间字段的名称：

```
SELECT  issueDate_dat, CONVERT(varchar, DATEPART(yyyy, issuedate_dat))  AS issueDateYYYY
, CASE WHEN (len(CONVERT(varchar, DATEPART(mm, issuedate_dat))) < 2) THEN '0' +CONVERT(varchar, DATEPART(mm, issuedate_dat)) ELSE CONVERT(varchar, DATEPART(mm, issuedate_dat)) END AS  issueDateMM
, CASE WHEN (len(CONVERT(varchar, DATEPART(dd, issuedate_dat))) <2) THEN '0' +CONVERT(varchar, DATEPART(dd, issuedate_dat)) ELSE CONVERT(varchar, DATEPART(dd, issuedate_dat)) END AS issueDateDD
FROM            tableXXXXY 
```

希望这会有所帮助。查伯特。

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2017-02-22T12:06:32.063

如果您的源日期格式全部搞砸了，请尝试以下方式：

```
select
convert(nvarchar(50),year(a.messedupDate))+'-'+
(case when len(convert(nvarchar(50),month(a.messedupDate)))=1 
    then '0'+ convert(nvarchar(50),month(a.messedupDate))+'-' 
    else convert(nvarchar(50),month(a.messedupDate)) end)+
(case when len(convert(nvarchar(50),day(a.messedupDate)))=1 
    then '0'+ convert(nvarchar(50),day(a.messedupDate))+'-'
    else convert(nvarchar(50),day(a.messedupDate)) end) 
from messytable a 
```

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2017-02-22T21:35:48.970

这个解决方案对我有用，简单有效（也有 126）

```
CONVERT(NVARCHAR(MAX), CAST(GETDATE() as date), 120) 
```

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2017-08-28T10:14:32.200

```
 IFormatProvider culture = new System.Globalization.CultureInfo("fr-FR", true);

cmdGetPaymentStatement.Parameters.AddWithValue("@pStartDate", DateTime.Parse("22/12/2017", culture, System.Globalization.DateTimeStyles.AssumeLocal)).IsNullable = true; 
```

* * *

## 回答 #24

> 赞同：-1
> 
> 时间：2020-11-04T11:45:28.937

由于字符串处理很昂贵，而 FORMAT 更昂贵，我很惊讶 Asher/Aaron Dietz 的响应没有更高，如果不是最高的话；问题是寻求 ISO 8601 日期，并没有特别要求它作为字符串类型。

最有效的方法将是其中任何一种（我已经包含了 Asher/Aaron Dietz 已经建议完整性的答案）：

**所有版本**

```
select  cast(getdate() as date)
select  convert(date, getdate()) 
```

**2008 年及以上**

```
select  convert(date, current_timestamp) 
```

**ANSI SQL 等效 2008 及更高版本**

```
select  cast(current_timestamp as date) 
```

参考：

[https://sqlperformance.com/2015/06/t-sql-queries/format-is-nice-and-all-but](https://sqlperformance.com/2015/06/t-sql-queries/format-is-nice-and-all-but)

[https://en.wikipedia.org/wiki/ISO_8601](https://en.wikipedia.org/wiki/ISO_8601)

[https://www.w3schools.com/sql/func_sqlserver_current_timestamp.asp](https://www.w3schools.com/sql/func_sqlserver_current_timestamp.asp)

[https://docs.microsoft.com/en-us/sql/t-sql/functions/current-timestamp-transact-sql?view=sql-server-ver15](https://docs.microsoft.com/en-us/sql/t-sql/functions/current-timestamp-transact-sql?view=sql-server-ver15)

# maven-2 - 如何在同一个项目中结合库代码和 maven 插件？

> ID：889634
> 
> 赞同：1
> 
> 时间：2009-05-20T19:02:12.557
> 
> 标签：maven-2, maven-plugin

我可以制作一个可以作为依赖项包含（以引用其中的 Java 类）并作为插件执行的单个 maven 项目吗？

我正在开发一个库来帮助在 LAMP 堆栈上托管 GWT。为了有人使用它，他们需要扩展一些 Java 类（所以它必须是一个依赖项）并且他们需要调用一个 maven 插件（所以它需要是一个插件）。插件代码引用相同的 Java 类，因此如果它们是单独的项目，则插件必须依赖于库之一。

照原样，我将库作为普通的 maven 项目，并将插件作为依赖于库的 maven 插件。这意味着要发布，我必须发布两个不同的工件，并且依赖项目必须更新两个工件的两个版本号。有一个项目会很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-21T19:18:54.000

您最好执行以下操作

1.  jar 的项目，Foo:Foo.jar
2.  使用 Foo:Foo.jar 作为构建插件的依赖项的项目
3.  构建1&2的[Maven父项目](http://www.sonatype.com/books/maven-book/reference/multimodule-sect-simple-parent.html)

目录结构看起来像这样

```
\project\pom.xml
\project\foo\pom.xml
\project\foo\src\main\java\foo.java
\project\plugin\pom.xml
\project\plugin\src\main\resources
\project\plugin\src\main\java 
```

从 \project 你可以做一个`mvn clean package`构建`\project\foo\target\foo.jar`和`\project\plugin\target\plugin.jar`

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-20T19:08:11.717

如果您创建一个 Maven 插件，它仍然有一个 artifactId/groupId/version。没有理由不能在您的部分和您的部分中引用它。另一方面，如果那很难看，为什么不使用您的主项目和 maven 插件项目都依赖的公共代码创建一个库？

编辑：

抱歉，第二部分不清楚。查看复合 maven 项目，其中有一个定义许多子模块的顶级 pom。在这种情况下，maven 插件和公共库代码可以是单独的子代，产生单独的工件，但您只需要从顶层执行一个版本号和一个发布命令。我还没有这样做，但是有很多开源项目可以这样做。它经常被用作一种习惯用法，将测试代码放入可以被所有其他人引用的单个模块中，而无需将其放入任何可分发的 jar 中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-24T05:54:07.673

最好的做法是不要按照你的建议去做。这方面的示例包括 PMD、BND、JUnit/TestNG 等 - 似乎没有严肃的项目将 maven 插件与库本身打包在一起。

获得这两种选择的一种方法是使用 maven 程序集为每个库和插件创建两个单独的 maven 项目，然后将单独的打包为包含两者的类的 jar。

# .net - 在 Visual Studio 中，我可以在调试时禁用签名我的应用程序吗？

> ID：889640
> 
> 赞同：3
> 
> 时间：2009-05-20T19:02:49.233
> 
> 标签：.net, visual-studio-2008, clickonce, vsto

在 Visual Studio 的项目属性 -> 签名选项卡中，我已经使用代码签名证书对我的项目进行了签名。然而，在我的团队中，我是唯一拥有代码签名证书的人，即使我们处于多开发人员环境中。当其他开发人员尝试“开始调试”时，他们会收到以下消息：

“找不到与项目系统指纹匹配的证书”

任何人有任何建议允许他们调试他们的项目，但只允许我发布？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-20T20:25:48.643

可能有效的一件事是添加构建后事件来调用执行您签名的脚本。您可以在发布文件时使用诸如[signtool.exe之类的东西对文件进行签名。](http://msdn.microsoft.com/en-us/library/8s9b9yaz.aspx)

您可以制作脚本文件的多个版本，例如：Debug_sign.bat、Release_sign.bat

然后在您的构建后事件命令行中：
call "$(ProjectDir)$(ConfigurationName)_sign.bat"
将根据您的目标调用正确的脚本。

只有发布脚本才会真正签署输出文件。调试脚本文件什么都不做。

我使用 signtool 对带有 .pfx 的程序集进行签名，如下所示：
signtool.exe sign /f "codesign_cert.pfx" /p "cert_password" /d "App description" /du “ [http://mywebsite](http://mywebsite) ” myApp.exe

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-20T19:12:51.567

[延迟签名](http://msdn.microsoft.com/en-us/library/t07a3dye.aspx)对你有用吗？

# emacs - 在 emacs 中打开 xml 文件时运行 sgml-pretty-print？

> ID：889649
> 
> 赞同：3
> 
> 时间：2009-05-20T19:04:08.230
> 
> 标签：emacs, elisp

我目前可以使用 sgml-pretty-print 在 emacs 中漂亮地打印一个 xml 文件，但这是一个手动过程：

1.  M-<
2.  C空间
3.  米->
4.  Mx sgml-漂亮的打印

我希望这会自动发生（或者至少有一些选择这样做）。我是 emacs/elisp 的新手，不明白如何：

1.  当您打开文件时，emacs 知道要运行什么代码（这是否从 files.el 开始？）
2.  如果您想用自己的代码覆盖该代码，该怎么做

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-20T19:12:17.030

这应该为您解决问题：

```
(add-hook 'find-file-hook 'my-sgml-find-file-hook)
(defun my-sgml-find-file-hook ()
  "run sgml pretty-print on the file when it's opened (if it's sgml)"
  (when (eq major-mode 'sgml-mode)
    (sgml-pretty-print (point-min) (point-max)))) 
```

关键信息是[find-file-hook](http://www.gnu.org/software/emacs/elisp/html_node/Visiting-Functions.html#Visiting-Functions)、[point-min](http://www.gnu.org/software/emacs/elisp/html_node/Point.html) (-max) 和[major-mode](http://www.gnu.org/software/emacs/elisp/html_node/Major-Modes.html#Major-Modes)。

如果您想了解有关 elisp 的更多信息，可以查看这个[问题](https://stackoverflow.com/questions/41522/tips-for-learning-elisp)，它提供了一些关于如何解决问题的指示。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-20T19:16:59.187

[Trey Jackson 的答案的](https://stackoverflow.com/questions/889649/run-sgml-pretty-print-when-opening-an-xml-file-in-emacs/889691#889691)一个稍微简单的替代方案。只需将其添加到您的`~/.emacs`文件中：

```
(add-hook 'sgml-mode-hook #'(lambda ()
  (sgml-pretty-print (point-min) (point-max)))) 
```

# jquery - jQuery JSP Capture 元素在提交操作后设置以更改 CSS

> ID：889684
> 
> 赞同：1
> 
> 时间：2009-05-20T19:10:10.560
> 
> 标签：jquery, jsp

我有一个具有 jQuery 的 JSP，并希望在成功提交时更改操作消息 CSS。

所以我有一个页面，用户输入信息，点击提交，然后在页面顶部显示一个带有 actionMessage 或 actionError 类的 span 标签（提交后）。想知道我是否可以在页面提交后检查元素并添加一些 CSS 以使其以我希望的方式显示。

```
<span class="actionMessage">Yeah all go!</span> 
```

或者

```
<span class="actionError">Try again I didn't like that :(</span> 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-20T19:15:40.330

您可以使用[提交事件](http://docs.jquery.com/Events/submit)来处理表单提交。

```
$("form").submit(function () {
  if (/* form_is_valid */) {
    $(".actionMessage").show();
    $(".actionError").hide();
    return true; // Send the request to the server.
  } else {
    $(".actionError").show();
    $(".actionMessage").hide();
    return false;  // Do not send the request.
  }
}); 
```

默认情况下，您的消息元素应隐藏：

```
.actionMessage, .actionError {
  display: none;
} 
```

如果即使请求有效，您也不想将请求发送到服务器，在这种情况下，您也可以从提交事件处理程序返回 false。

# jquery - 如何在 jQuery 中通过 DOM 查询 XML 字符串

> ID：889688
> 
> 赞同：4
> 
> 时间：2009-05-20T19:11:13.130
> 
> 标签：jquery, dom

我想获取一个字符串并将其视为 XML。然后我将能够通过 jQuery.find 使用 DOM 进行查询。在 Firefox 中一切正常，但我意识到这在 IE 中不起作用。

我正在这样做：

```
 var t = "<div><outer><inner>abc</inner><inner>def</inner></outer></div>";
  alert("[" + $(t).find("outer").html() + "]"); 
```

在 Firefox 3 中，它打印：

```
[<inner>abc</inner><inner>def</inner>] 
```

在 IE 7 中打印：

```
[] 
```

有什么解决方法可以让它跨浏览器工作？

谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-05-20T21:59:44.320

有两种方法可以解决这个问题。

1.  将 XML 字符串转换为 DOM，使用此[插件](http://outwestmedia.com/jquery-plugins/xmldom/)解析它或遵循本[教程](http://www.webmonkey.com/tutorial/Easy_XML_Consumption_using_jQuery?oldid=20032)
2.  使用此[插件](http://www.fyneworks.com/jquery/xml-to-json/)将 XML 转换为 JSON 。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-20T22:08:39.077

是否可以将 XML 存储为 JSON（我认为会这样）？例如，在 PHP 中，您可以将 XML 转换为数组或对象，然后使用`json_encode`. 然后，您可以将其作为 javascript 变量回显，如下所示：

**在 PHP 中：**

```
<?php
$xml = "<div><outer><inner>abc</inner><inner>def</inner></outer></div>";
$xml_object = simplexml_load_string(xml);
$json = json_encode($xml_object);
?>
<script language="javascript">
$(function() {
    // eval() is okay to use if you know where the JSON is 
    // coming from (and, of course, you do...) 
    var data = eval('<?php echo $json; ?>');
    $(document).data('myapp.data',data);
});
</script> 
```

现在，每当您需要访问该数据时，您都可以像这样获取它：

```
function some_function() {
    var data = $(document).data('myapp.data');
    $.each(data.div.outer,function() {
        // Would alert 'abc' then 'def'
        alert(this.inner);
    });
} 
```

我希望这一切都是有道理的。至少您不必再担心客户端的 XML。当然，如果您绝对需要，我发现这在过去对我有用：

```
var xml = "<div><outer><inner>abc</inner><inner>def</inner></outer></div>";
var $xml = $('<div />').append(xml);
alert("[" + $xml.find("outer").html() + "]"); 
```

**编辑** 我修改了我的代码以使用您提供的实际 XML——不确定我在哪里混在一起（一定是从别人的答案中意外抓取了片段）。你真的应该试一试我的第一个建议——它应该有效。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2011-11-10T18:25:03.240

将 XML 字符串放入 Javascript 变量中：

```
var xmlString = $('<?xml version="1.0"?><Customers><Customer Name="Allan Border" Age="26" ContactNumber="004416165245" Address="Unit # 24 East London" City="London" Country="England"></Customer><Customer Name="Jennifer" Age="28" ContactNumber="004416165248" Address="Unit # 28 West London" City="London" Country="England"></Customer></Customers>'); 
```

现在您可以通过遍历每个客户节点来解析 XML：

```
$(xmlString).find("Customer").each(function () {
 var customerName = $(this).attr("Name");
 var age = $(this).attr("Age");
 var contactNumber = $(this).attr("ContactNumber");
 var address = $(this).attr("Address");
 var city = $(this).attr("City");
 var country = $(this).attr("Country");
 }); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-20T19:27:06.763

首先，jQuery 构造函数采用 HTML 而不是 XML ......话虽如此，您的 XML 可能会工作 - 但它取决于很多依赖于浏览器的行为。此外，通过将新创建的元素附加到页面上某处的隐藏元素，然后尝试查询它，您可能会获得更好的成功：

```
var xml = "<books><book><title>Title</title></book></books>";
$(xml).appendTo("#hidden");
alert($("#hidden books").length); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2010-12-24T10:36:59.477

**在用于 Selenium 的 Javascript 中，在浏览器中读取 XML 文件：**

```
function loadXMLFromDOM2XMLString( xmlString, xmltag, currentChildNode ) { 
var nodes = currentChildNode.childNodes; 
var i = 0 ;
var node = nodes[i];
while ( i < nodes.length) {
   if (node.data == null) {xmltag = '<'+node.localName+'>';} else {xmltag = node.data;};
   xmlString = xmlString  + xmltag;
   xmlString = loadXMLFromDOM2XMLString( xmlString, xmltag, node  );   
   if (node.data == null) {xmltag = '<'+'/'+node.localName+'>';} else {xmltag = "";};
   xmlString = xmlString + xmltag;
   i++;
   node = nodes[i];
}
 return xmlString ;
} ;
var xmlString = "";
var xmltag = "";

var currentChildNode = window.document;

xmlString = loadXMLFromDOM2XMLString( xmlString, xmltag, currentChildNode );
xmlString; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-20T22:50:40.910

在 ie 中使用字符串 xml，您需要使用 .filter，因为它不想识别 xml 节点树。

在 ie8 中尝试[使用](http://jsbin.com/ijefa)可见的调试器来获取控制台输出。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-05-21T16:54:37.393

那么，与其将 XML 数据集存储在 DOM 中，不如将其转换为 HTML 表并使其不可见。那应该解决 jQuery 问题……至少是浏览器特定的问题。然后重新开始完善您的选择器。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2010-02-03T17:07:06.597

已经有一段时间了，但我刚刚意识到我忘了发布我是如何用你的综合想法解决问题的。

我需要一个完全客户端的数据库（没有 PHP）。

我创建了一个带有 HTML 注释的 div，其中包含 XML。我[用 this 解析了 HTML 注释，](http://www.bennadel.com/blog/1563-jQuery-Comments-Plug-in-To-Access-HTML-Comments-For-DOM-Templating.htm)然后用 this[将 XML 转换为 JSON](http://www.fyneworks.com/jquery/xml-to-json/)。

```
 var xmltext = $("#piecelist").comments();
   var json = $.xml2json(xmltext.html()); 
```

你可以在这里看到我的方法： [http ://wesculpt.net/art.html](http://wesculpt.net/art.html)

也许我应该把这个方法变成一个 jQuery 插件。

感谢大家的帮助。

# php - 支持 SVN 和 FTP 的快速 Windows PHP 编辑器？

> ID：889689
> 
> 赞同：9
> 
> 时间：2009-05-20T19:11:34.707
> 
> 标签：php, windows, svn, editor, ftp

我正在为 Windows 寻找一个体面、快速的 PHP 编辑器。在 x64 下本机运行的东西将是理想的。

我已经尝试过 aptana studio，但我对所有过度膨胀并没有留下深刻的印象。笨拙的 SVN 支持和缺乏本地 FTP 加上基本上是一个凌乱的 IDE 是令人讨厌的。

我目前在我的 Mac 上使用来自 Panic 的 Coda，我喜欢 SVN + FTP 集成。它速度快，反应灵敏，不会给我带来任何麻烦。

我不反对：

1.  如果有合适的产品，安装 Linux。
2.  使用带有适当插件的 Visual Studio。
3.  在商业产品上花钱。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-05-21T14:27:21.280

带有[FTP_synchronize](http://notepad-plus.sourceforge.net/uk/site.htm)和[Subversion](http://www.switchonthecode.com/tech-news/notepadplusplus-subversion-plugin)插件的[Notepad++ 。](http://notepad-plus.sourceforge.net)

它是免费的。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-05-20T19:43:11.723

不确定 NetBeans 是否支持来回传输文件的 FTP，但它具有出色的 Subversion 支持。我开始非常喜欢 NetBeans，我的最后一个编辑器是 Zend Studio IDE。

[http://www.netbeans.org/](http://www.netbeans.org/)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-05-20T19:21:29.817

至于开源应用程序，您可以尝试带有[PDT（PHP 开发工具）](http://www.eclipse.org/pdt/)插件的 Eclipse。我发现它运作良好。

如果您愿意花一点钱，[Zend Studio](http://www.zend.com/products/studio/)是一个非常不错的编辑器，它基于 PDT 和 Eclipse，但有一些不错的商业质量润色。

我经常使用这两种解决方案，并将它们推荐给任何人。特别是如果您已经习惯了 Eclipse。

对于 SVN 支持，使用[Subclipse](http://subclipse.tigris.org/)插件来 eclipse。带有 Aptana 的 SVN 插件也让我感到沮丧。Zend Studio 有一个不错的 SVN 向导。Subclipse 插件很好地集成到 Eclipse 中。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-05-20T19:29:01.457

我特别喜欢 NuSphere 的 PhpED。除了 FTP 和 svn 之外，还有调试、代码折叠等，而且速度相当快。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-05-20T23:46:40.190

我使用 PHP Designer，它运行良好。具有 TortoiseSVN 支持、快速、不太大、ftp、调试、实时语法检查等。

也不是很贵:)

不能发链接因为我是新用户:(

mpsoftware.dk/phpdesigner.php

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-05-20T19:39:31.560

虽然它不是免费的，但我强烈推荐 Ultra Edit：

studio 版本集成了 SVN 和 ftp。

[http://www.ultraedit.com/products/uestudio.html](http://www.ultraedit.com/products/uestudio.html)

我喜欢它主要是因为编辑器本身非常强大。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2010-11-30T13:09:50.033

我更喜欢 PSPad。它有 FTP（我不确定 SVN）并且感觉类似于我的首选 KDE Kate 编辑器。我也偶尔使用 jEdit。它有 SVN 和 FTP（包括 SFTP）的插件。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-05-20T19:22:31.813

试试[Geany](http://www.geany.org)

它非常快速和轻量级。开发人员称它为 IDE，但我更愿意称它为“类固醇编辑器”。它对一些 HTML 标记进行自动完成，并为 PHP 函数提供自动完成和调用提示。

它有[颠覆插件](http://plugins.geany.org/geanyvc/)

但是它没有 FTP 插件，主要原因是您可以轻松地读取/写入远程 FTP，就好像它们在本地磁盘上一样，并且可以像使用常规文件一样使用它们：

[http://www.ghacks.net/2006/08/03/how-to-mount-an-ftp-drive-in-windows/](http://www.ghacks.net/2006/08/03/how-to-mount-an-ftp-drive-in-windows/)

[http://lifehacker.com/software/how-to/map-an-ftp-drive-in-windows-304502.php](http://lifehacker.com/software/how-to/map-an-ftp-drive-in-windows-304502.php)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-05-20T20:13:33.380

[一个真正的编辑器](http://ourcomments.org/Emacs/EmacsW32.html)，或者另一个真正的编辑[器](http://www.vim.org/)。两者都内置了对 SVN 的支持，虽然我从未使用过它，但我相当确定 TRAMP 可以做 FTP（不确定 VIM 是否能做到这一点）。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-05-20T23:40:47.487

我使用 Activestate 的[Komodo IDE](http://www.activestate.com/komodo/)。它具有良好的 SVN 集成，可以从远程服务器（包括 FTP）打开文件。对于一个非常大的项目，它可能会变得有点慢/笨重，但它通常很快。

Komodo IDE 是一种商业产品（约 300 美元），但 ActiveState 有一个缩减的开源版本，称为[Komodo Edit](http://www.activestate.com/komodo_edit/)，但我不相信它支持 SVN。

支持 FTP 的另一种方法是使用 Fuse（仅限 OSX/Linux）之类的程序将 FTP 服务器挂载为目录，我相信有几个商业 Windows 程序可以提供类似的功能。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2009-05-21T14:36:07.750

我个人使用 NetBeans。我使用了 Eclipse PDT，但 NetBeans 似乎更干净、更快。也更容易配置。它有自己的 Subversion 插件，效果很好。还有一个叫做[远程文件系统](http://plugins.netbeans.org/PluginPortal/faces/PluginDetailPage.jsp?pluginid=13195)的 FTP 扩展，但我没用过。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2010-07-07T07:14:36.687

我使用 Netbeans，它同时具有 sftp 和 ftp 支持以及全功能颠覆支持（差异、合并、历史等）。您可以通过 ide 本身内部的 ssh 连接到远程机器（如 PuTTY）。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2011-02-03T07:12:37.810

[PHPEdit 最好的 PHP IDE/PHP 编辑器之一](http://www.phpedit.com)提供了这个

# regex - 这个密码规则的正则表达式有什么问题

> ID：889703
> 
> 赞同：1
> 
> 时间：2009-05-20T19:13:59.583
> 
> 标签：regex

我正在尝试至少 2 个字母、至少 2 个非字母和至少 6 个字符的长度：

```
^.*(?=.{6,})(?=[a-zA-Z]*){2,}(?=[0-9@#$%^&+=]*){2,}.*$ 
```

但这在许多层面上都没有达到目标，但我不知道为什么。有什么建议么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-05-20T19:17:47.907

虽然这种类型的测试可以使用正则表达式完成，但进行非正则表达式检查可能更容易且更易于维护。实现这一点的正则表达式相当复杂并且有点不可读。但是运行这个测试的代码是相当直接的。例如，将以下方法作为您的要求的实现（语言 C#）

```
public bool IsValid(string password) {
  // arg null check ommitted
  return password.Length >= 6 &&
         password.Where(Char.IsLetter).Count() > 2 &&
         password.Where(x => !Char.IsLetter(x)).Count() > 2;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-20T19:17:22.837

如果你真的想使用正则表达式，试试这个：

```
(?=.{6})(?=[^a-zA-Z]*[a-zA-Z][^a-zA-Z]*[a-zA-Z])(?=[^0-9@#$%^&+=]*[0-9@#$%^&+=][^0-9@#$%^&+=]*[0-9@#$%^&+=])^.+$ 
```

这匹配至少六个字符长 ( `(?=.{6,})`) 并且包含至少两个字母字符 ( `(?=[a-zA-Z][^a-zA-Z]*[a-zA-Z])`) 并且包含字符集的至少两个字符`[0-9@#$%^&+=]`( `(?=[0-9@#$%^&+=][^0-9@#$%^&+=]*[0-9@#$%^&+=])`) 的任何内容。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-21T02:42:53.297

要回答标题中的问题，您的正则表达式有什么问题：

首先，`.*`开头的 (dot-star) 消耗了整个字符串。然后第一个前瞻`(?=.{6,})`被应用并失败，因为匹配位置在字符串的末尾。因此，正则表达式引擎开始回溯，通过一次将匹配位置向后移动一个字符并重新应用前瞻来“收回”字符。当它取回六个字符时，第一个前瞻成功并应用下一个。

第二个前瞻是`(?=[a-zA-Z]*)`，意思是“在当前匹配位置，尝试匹配零个或多个 ASCII 字母”。匹配位置距离字符串末尾还有六个字符，但这没关系；无论您应用它，前瞻总是会成功，因为它可以合法地匹配零个字符。此外，字母可以在字符串中的任何位置，因此前瞻必须适应可能存在的任何中间非字母。

那么你有`{2,}`. 它不是前瞻子表达式的一部分，因为它在括号之外。在那个位置，这意味着前瞻必须成功两次或更多次，这是没有意义的。如果它成功了一次，它会成功任意次数，因为它每次都被应用在同一个位置。当您将量词应用于前瞻（或任何其他零宽度断言，例如后瞻、单词边界、行锚）时，一些正则表达式风格将其视为错误。大多数口味似乎都忽略了量词。

然后你有另一个总是会成功的前瞻，以及另一个无用的量词。最后，最后的点星重新消耗了第一个点星必须放弃的六个字符。

我认为这就是你想要的：

```
^
(?=.{6})
(?=(?:[^A-Za-z]*[A-Za-z]){2})
(?=(?:[^0-9@#$%^&+=]*[0-9@#$%^&+=]){2})
.*$
```

# php - 我对 CodeIgniter Web 应用程序有我的要求，现在怎么办？

> ID：889706
> 
> 赞同：2
> 
> 时间：2009-05-20T19:14:32.033
> 
> 标签：php, codeigniter

我正在做一个项目，并为系统必须做的事情制定了高级用户要求。这个项目是一个基于 CodeIgniter 框架的 php web 应用程序。现在我正在尝试将这些要求进一步分解为控制器/操作。做这个的最好方式是什么？

我正在考虑创建一个包含四列表格的 word 文档。第一列将是控制器的名称，第二列将包含操作，第三列将包含特定于操作的视图名称，第四列将显示哪些用户可以访问该操作。这听起来是个好主意吗？

我喜欢界面优先的方法来构建应用程序，但实际上，在创建原型界面之前，我需要知道我需要哪些视图。

任何人都可以帮助我如何规划应用程序和任何可能有帮助的文档吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-05-20T19:36:57.430

您的故障是一个好主意，但这实际上是*第二步*。

这就是我要做的：

*   接受您的需求，并将它们转化为一系列场景（“用例”、“用户故事”）。

*   选择一个，然后像在纸上一样，画出你想要的用户界面的基础知识，如果你想让 Good Code Fairy 为你提供完美的系统。

*   分别浏览场景，并在故事中的所有名词下划线；这些可能是域对象。用不同的颜色在所有*动词*下划线。每个动词都是这些领域对象之一的方法。（事实上​​，域对象将是动词的对象。很酷，嗯？）

*   弄清楚如何使用这些域对象来实现该用户界面。

*   构建它

*   把它展示给你的客户，他们*总是会*说“我喜欢它，*但是*”

*   将您学到的更改和知识放入您的要求中，并重复直到检查清除。

Peter Coad 写了一本我仍然认为是最好的初学者的书： [Java 设计：构建更好的应用程序和小程序](https://rads.stackoverflow.com/amzn/click/com/0139111816)。它面向Java，但设计部分是通用的。

您的域对象是模型，数据的显示（粗略地说）是视图，附加到操作的代码是控制器。

* * *

关于用例

做用例或用户故事的“正确方法”受到大量讨论和宗教战争的影响。有数以万计的选择，从 Cockburn[有点复杂的表格](http://alistair.cockburn.us/Basic+use+case+template)，到在[索引](http://www.agilemodeling.com/artifacts/userStory.htm)[卡上](http://www.inquestra.com/developing-user-stories-in-an-xp-environment.html)[潦草的](http://c2.com/cgi/wiki?UserStory)[笔记](http://en.wikipedia.org/wiki/User_story) 。

对于您描述的那种应用程序，我做了两件事：我尽量将它们保持在 25 个单词或更少，并且我考虑了 SMART 的首字母缩略词。

*   25 个字或更少有助于使它们保持小规模。做几个小故事比花几个星期写一个大故事更可取。

*   SMART 代表“具体、可衡量、与责任和测试达成一致”。（或者至少我是这么解释的。还有其他版本。）

    *   *具体来说*，你必须对你知道被问到什么感到舒服。
    *   *可衡量*的，你必须有某种测试方式或某种可以接受的声明
    *   *协议*，因为它需要是您和客户都同意满足需求的东西——换句话说，合同的“思想会议”
    *   有了*责任*，你必须知道你得到了什么，客户或用户负责提供什么，以及你是什么
    *   和*Tests*，换句话说，你应该有一个有效的程序来给你“它可以接受”或“它不可接受”的答案。

我使用的*表格*有模式

> *特定角色的用户*
> *做某事会*
> *带来一些好处*

所以，在你的例子中，我会写

*   管理员（谁？）
*   列出所有常见问题解答（做什么？）
*   查看它们以获取更新。（为什么？）

“带来一些好处”部分是我强调的，很多其他人没有，甚至没有提到。如果您需要确定它们的优先级，它会在以后有很大帮助。

“测试”部分是对验收测试的描述：您正在回答“这完成了吗？”这个问题。所以验收测试可能是

*   登录的管理员选择“列出常见问题解答”。所有已知的常见问题解答都以正确的格式列出。

理想情况下，您应该设置它，以便某些工具（如 expect 或 gui 测试工具）可以自动运行它，但特别是在小型项目中，您最终可能需要手动测试。您*想要*自动化测试，因为在构建系统时，您想要进行回归测试；也就是说，您想重复测试以确保以后的更改没有破坏任何内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-22T06:25:14.630

你所做的是以用户为中心的工作。

1.  您制作屏幕的粗略模型（使用 Balsamiq 或其他东西），然后将它们展示给您的客户/利益相关者，并引导他们通过它（就像他们正在使用它一样）。让他们同意。
2.  然后你编写代码（我相信你可以弄清楚那部分）
3.  然后你再次向你的客户展示（让他们实际详细使用它），并就更改达成一致。
4.  现在你完成它

祝你好运！

# .net - Dataset.Copy() 不复制新记录的值

> ID：889709
> 
> 赞同：0
> 
> 时间：2009-05-20T19:14:40.940
> 
> 标签：.net, winforms, .net-3.5, dataset

我有一个包含多个表的数据集。特别是一张表中有一条记录。我正在向此数据表添加另一条记录，并使用 Dataset.Copy() 方法将整个数据集对象复制到另一个实例。

```
 Dataset2 = DirectCast(Dataset1.Copy(), dsApplication) 
```

但是，从此方法返回的数据集的新副本不正确。新行在那里并且具有“已添加”的 RowState，但值为空白（这是一个字符串字段）。数据集以空白值保存到数据库中。

现在，我有两行。原来的一个，空白的一个。如果我将空白更改为具有文本并再次启动操作，则原始数据集将该行显示为具有文本，但 RowState 为未更改，并且第二个数据集再次具有该行的空白。

有人对这种行为有解释吗？为什么 Dataset.Copy() 操作中没有复制第二行的值？为什么添加文本后第二行的 RowState 不显示为已修改？

编辑：原始数据集正在通过 datagridview 进行修改。如果在我将文本输入到 datagridview 单元格后，我在启动复制操作之前单击另一行，它工作正常。如果我不点击另一行，那么它会失败。在启动复制操作之前，我调用了 datagridview.endedit() 方法。这仍然很奇怪，因为即使没有单击另一个单元格，当我调试代码时，原始数据集总是在复制操作之前立即显示正确的值，所以我不明白为什么 datagridview 会产生任何影响。

编辑#2：在调试时，我注意到如果我更改了gridview 中的第一个值，RowState 会更改为Modified，正如预期的那样。但是，对于任何其他行，尽管实际值发生变化，但 RowState 仍保持不变。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-20T20:09:37.787

您是否调用了 DataSet.AcceptChanges() 方法？我相信您需要这些更改才能生效...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-26T13:38:55.997

问题原来是 DataGridView 控件的问题。调用 EndEdit() 方法时，DataGridView 确实更新了数据集中的值，但由于某种原因，RowState 保持不变。这显然导致该值被 Copy() 操作忽略。我认为这是 DataGridView 中的一个错误，因为如果编辑网格中的第一行，则不会发生此行为，只有其他行。

为了使其正常工作，我必须在包含 DataGridView 的表单上调用 Me.Validate() 方法，而不是调用 DataGridView.EndEdit()。然后，调用 BindingSource.EndEdit() 方法可确保将值传播到基础数据集。这会导致 RowState 正确更改为已添加或已修改，并且一切正常。

正如我所说，恕我直言，我认为这是 DataGridView 控件的错误......特别是考虑到不一致的行为。我相信通过绑定源将数据从绑定控件适当地获取到底层数据集的步骤应该得到更好的记录，因为我发现了许多建议的解决方案，但是每个方法在被调用的方法、它们被调用的对象方面都略有不同，以及它们被调用的顺序。

# mysql - 基于两个计算列的计算列

> ID：889711
> 
> 赞同：4
> 
> 时间：2009-05-20T19:14:57.290
> 
> 标签：mysql, subquery, calculated-columns

我正在尝试进行一个相当复杂的`SELECT`计算，我将对其进行概括：

1.  主查询是表的通配符选择
2.  一个子查询`COUNT()`根据条件执行所有项目中的一项（这很好用）
3.  另一个子查询`SUM()`根据另一个条件在列中执行一个数字。这也可以正常工作，除非没有记录满足条件，否则它会返回`NULL`.

我最初想将两个子查询相加，`(subquery1)+(subquery2) AS total`除非 subquery2 为 null，否则`total`无论 subquery1 的结果是什么，它都可以正常工作，在这种情况下变为 null。我的第二个想法是尝试创建第三列来计算两个子查询（即`(subquery1) AS count1, (subquery2) AS count2, count1+count2 AS total`），但我认为不可能计算两个计算列，即使是这样，我也觉得一样问题适用。

除了获取两个子查询值并将它们汇总到我的程序中之外，有没有人有一个优雅的解决方案来解决这个问题？

谢谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-05-20T19:43:26.200

这里有两个问题：

*   您不能在同一个 SELECT 列表中的另一个表达式中使用一个列别名。

    但是，您可以在派生表子查询中建立别名并在外部查询中使用它们。

*   你不能用 NULL 做算术，因为*NULL 不是零*。

    `COALESCE()`但是，您可以使用该函数将 NULL“默认”为非 NULL 值。此函数返回其第一个非 NULL 参数。

这是一个例子：

```
SELECT *, count1+count2 AS total
FROM (SELECT *, COALESCE((subquery1), 0) AS count1, 
                COALESCE((subquery2), 0) AS count2 
      FROM ... ) t; 
```

（请记住，必须为派生表指定一个表别名，在本例中为“t”）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-20T19:19:36.513

首先，COALESCE 函数应该可以帮助您处理任何空问题。

您是否可以使用联合将这两个查询合并为一个结果集，然后将其视为子查询以进行进一步分析？

或者也许我没有完全理解你的问题？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-20T19:19:10.277

我会尝试（对于第二个查询）类似：SELECT SUM(ISNULL(myColumn, 0)) //请在使用它之前验证语法，不过......

对于该列为零的任何实例，这应该返回 0 而不是 null。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2011-02-28T19:35:47.420

可能没有必要说，但是由于您在程序中使用它，由于可移植性问题，您宁愿使用程序逻辑来对两个结果（NULL 和一个数字）求和。

谁知道 COALESCE 函数何时被弃用，或者另一个 DBMS 是否支持它。

# sql - 将 UUID 从一种格式转换为另一种格式

> ID：889726
> 
> 赞同：2
> 
> 时间：2009-05-20T19:17:46.690
> 
> 标签：sql, regex, string, uuid

我有一个这样格式化的 SQL 文档（它有大约 3000 个这样的条目）：

```
INSERT INTO DATA(UUID, IS_SIMULATED, ENVIRONMENT) VALUES('99b857afcb2e4f7dbf8657ea916ad9d7',FALSE,'SPACE')
INSERT INTO DATA(UUID, IS_SIMULATED, ENVIRONMENT) VALUES('df8480e333c044f08ada939c66fa13f5',FALSE,'AIR')
INSERT INTO DATA(UUID, IS_SIMULATED, ENVIRONMENT) VALUES('ad3e38a5e28f40ba8234bb8727936963',FALSE,'SURFACE')
INSERT INTO DATA(UUID, IS_SIMULATED, ENVIRONMENT) VALUES('58f23ec0b9d141ed89dba8ce2f0fd377',FALSE,'SUBSURFACE')
INSERT INTO DATA(UUID, IS_SIMULATED, ENVIRONMENT) VALUES('244182c8e53247529bd55f54c527bdbf',FALSE,'LAND') 
```

我需要格式化所有 UUID 字符串以包含破折号，如下所示：

```
550e8400-e29b-41d4-a716-446655440000 
```

有没有一种简单的方法来解析它并按照我需要的方式格式化 UUID 而无需手动操作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-20T19:22:38.473

试试这个正则表达式：

```
'([0-9a-f]{8})([0-9a-f]{4})([0-9a-f]{4})([0-9a-f]{4})([0-9a-f]{12})' 
```

并将匹配项替换为`'$1-$2-$3-$4-$5'`.

# asp.net-mvc - 你如何在 asp.net mvc 中持久化查询字符串值？

> ID：889732
> 
> 赞同：14
> 
> 时间：2009-05-20T19:19:23.737
> 
> 标签：asp.net-mvc, query-string, viewdata

在 asp.net mvc 中保留查询字符串值的好方法是什么？

如果我有一个网址：/questions?page=2&sort=newest&items=50&showcomments=1&search=abcd

在分页链接上，我想在所有链接中保留这些查询字符串值，以便它们在用户单击“下一页”时保持不变（在这种情况下，页面值会改变，但其余部分会保持不变）

我可以想到两种方法来做到这一点：

1.  视图中的 Request.Querystring 并将值添加到链接
2.  使用 ViewData 将每个查询字符串值从控制器传回视图

这个比那个好吗？这些是唯一的选择还是有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-05-20T20:24:31.047

我为此使用了扩展方法：

```
public static string RouteLinkWithExtraValues(
        this HtmlHelper htmlHelper,
        string name,
        object values)
    {
        var routeValues = new RouteValueDictionary(htmlHelper.ViewContext.RouteData.Values);

        var extraValues = new RouteValueDictionary(values);
        foreach (var val in extraValues)
        {
            if (!routeValues.ContainsKey(val.Key))
                routeValues.Add(val.Key, val.Value);
            else
                routeValues[val.Key] = val.Value;
        }

        foreach (string key in htmlHelper.ViewContext.HttpContext.Request.Form)
        {
            routeValues[key] = htmlHelper.ViewContext.HttpContext.Request.Form[key];
        }

        foreach (string key in htmlHelper.ViewContext.HttpContext.Request.QueryString)
        {
            if (!routeValues.ContainsKey(key) && htmlHelper.ViewContext.HttpContext.Request.QueryString[key] != "")
                routeValues[key] = htmlHelper.ViewContext.HttpContext.Request.QueryString[key];
        }

        var urlHelper = new UrlHelper(htmlHelper.ViewContext.RequestContext);

        return string.Format("<a href=\"{0}\">{1}</a>", urlHelper.RouteUrl(routeValues), name);
    } 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-05-20T20:57:09.937

我会在视图中处理 QueryString（您的选项 #1），而不是从控制器中传递它。这种方法使视图更加独立，允许您将其转换为视图控件并在不同的视图中重复使用它。

注意：直接在视图中访问 QueryString 似乎违反了分离模型和视图的设计原则，但实际上这些数据是与视图相关的导航问题，而不是模型的一部分。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-20T20:07:43.720

我只会保留 Session 中的值，这样分页链接只需要拥有；

> /questions?page=2
> 
> /questions?page=3

我不使用 QueryString 的一个原因是我不希望用户看到我传递给程序的值。这让他们很容易进入地址栏并开始更改值以“看看会发生什么”。使用此代码，他们所能做的就是更改页码。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-03-01T13:34:08.257

下面是我在 Asp.Net Core 中的做法，首先将查询字符串参数分配给控制器中的 ViewBags：

```
[HttpGet("/[controller]/[action]/{categoryId?}/{contractTypeId?}/{locationId?}")]
public IActionResult Index(Guid categoryId, int contractTypeId, Guid locationId)
{
    ViewBag.CategoryId = categoryId;
    ViewBag.ContractTypeId = contractTypeId;
    ViewBag.LocationId = locationId;

    ...
} 
```

然后将值传递给您的链接，如下所示：

```
<a asp-action="Index" asp-controller="Jobs"
   asp-route-categoryId="@teachingCategory.Id"
   asp-route-contractTypeId="@ViewBag.ContractTypeId"
   asp-route-locationId="@ViewBag.LocationId">
   @teachingCategory.Description (@teachingCategory.Rank)
</a>

<a asp-action="Index" asp-controller="Jobs"
   asp-route-categoryId="@ViewBag.CategoryId"
   asp-route-contractTypeId="@typeOfEmployment.Id"
   asp-route-locationId="@ViewBag.LocationId">
   @typeOfEmployment.Name
</a>

<a asp-action="Index" asp-controller="Jobs"
   asp-route-categoryId="@ViewBag.CategoryId"
   asp-route-contractTypeId="@ViewBag.ContractTypeId"
   asp-route-locationId="@item.Id">
   @item.Id
</a> 
```

请注意，每个链接都保留自己的实际值，并通过我们传递给 ViewBag 的内容传递其余的路由值。

# visual-studio-2005 - 为什么调试时会收到“检测到 LoaderLock”警告？

> ID：889736
> 
> 赞同：15
> 
> 时间：2009-05-20T19:19:52.707
> 
> 标签：visual-studio-2005, class-library, autocad

我正在为 AutoCAD 2009 开发一个附加组件。项目输出是一个类库。当我尝试调试和加载类库时，我收到此“检测到 LoaderLock 消息”。我一直在编写这些附加组件，这是我看到的第一条此类消息。

1.  我从哪里开始尝试解决这个问题？
2.  什么是 LoaderLock，为什么它现在困扰着我？

检测到 LoaderLock 消息：尝试在 OS Loader 锁内进行托管执行。不要尝试在 DllMain 或图像初始化函数中运行托管代码，因为这样做会导致应用程序挂起。

我去了`Debug -> Exceptions -> "Managed Debugging Assistants"`，找到`"LoaderLock"`并取消选中该`"Thrown"`复选框。

我可以再次调试，但我做了什么以及为什么必须这样做？这会给我带来其他问题吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2009-05-20T19:33:35.287

加载器锁是一个进程范围的锁，系统使用它来同步访问将加载 DLL 到进程地址空间的访问。加载 DLL、释放 DLL、查询 DLL 信息等的函数都获取加载器锁。通常对开发人员影响最大的是加载程序锁在 DllMain 运行时也被持有 - 这意味着您通常不知道的操作系统锁可以在运行代码时被持有。

加载程序锁可以被视为在锁层次结构中处于非常低的级别。在 DllMain 期间在加载程序锁下运行的代码可能是死锁的原因。例如，CLR 有它自己的一组内部锁，它可以在加载 DLL 时持有这些锁。如果您从 DllMain 中调用托管代码，您可能会导致线程上的 CLR 在持有加载程序锁的同时获取这些锁之一。如果另一个线程上的 CLR 获得了该锁（导致 DllMain 中的原始线程阻塞），然后尝试加载将获得加载器锁的 DLL，您的进程将死锁。

听起来 CLR 正试图抢先检测在加载程序锁下运行的托管代码。当您在调试器中看到此故障导致的堆栈时，请确定导致托管代码从 DllMain 中运行的原因并将其删除。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-20T20:04:14.350

根据我使用 AutoCAD 的经验，可以安全地忽略 LoaderLock 警告。这不是您的代码做错了什么的迹象，而是由于 AutoCAD 加载和初始化您的应用程序的方式而引发了警告。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2011-12-29T07:43:21.323

这是 Visual Studio 2005 中的一个错误。有关详细信息，请阅读本文：http: [//support.microsoft.com/kb/913996](http://support.microsoft.com/kb/913996)

# sql - 如何在 MS Access 查询中求和和替换列数据并对所有数据进行平均？

> ID：889737
> 
> 赞同：1
> 
> 时间：2009-05-20T19:20:36.280
> 
> 标签：sql, ms-access, vba, insert, sum

我从一个名为analyzedCopy 的表中提取数据，并使用它来覆盖另一个名为analyzed 的表中的所有信息。我正在排序/过滤/操作的列是 readings_miu_id、ReadDate、ReadTime、RSSI。我目前正在使用以下sql将数据从analyzedCopy移动到analyze，以获取每对唯一的readings_miu_id和ReadDate的最后一次（ReadTime中的最高值，因为它被格式化为军事时间）。

```
SELECT readings_miu_id, Reading, ReadDate, ReadTime, MIUwindow, SN, Noise, RSSI, ColRSSI,MIURSSI,Firmware,CFGDate,FreqCorr,Active,MeterType,OriginCol,ColID,Ownage,SiteID,PremID, prem_group1, prem_group2,ReadID  
    INTO analyzed  
    FROM analyzedCopy AS A  
    WHERE  ReadDate BETWEEN #04/21/09# AND #04/29/09#  AND ReadTime=  (SELECT TOP 1 analyzedCopy.ReadTime FROM analyzedCopy  
    WHERE analyzedCopy.readings_miu_id = A.readings_miu_id  AND analyzedCopy.ReadDate = A.ReadDate  
    ORDER BY analyzedCopy.readings_miu_id, analyzedCopy.ReadDate, analyzedCopy.ReadTime DESC)

   ORDER BY A.readings_miu_id, A.ReadDate, A.ReadTime DESC ; 
```

我需要在此代码中添加能够将每个记录“分析”到表中的能力，`readings_miu_id`同时更改`ReadDate`以显示所需的日期范围（在这种情况下，它需要显示类似“4/21/09 到 4/29 /09")，同时还取每个 RSSI 值的平均值，`DISTINCT reading_miu_id`并将该平均 RSSI 插入分析表的 RSSI 字段中。

为了回顾/概述，我有一个代码将另一个表中的所有记录插入到一​​个表中，其中`ReadTime`每个唯一`readings_miu_id`和 ReadDate 组合的最高记录。我需要在此代码中添加获取已排序（上一句中的步骤）记录的平均 RSSI 并将该平均值插入到分析中的 RSSI 并将日期范围插入到`ReadDate`分析中的能力。

我意识到我可能在这里要求很多，如果我需要使用两个或三个不同的步骤或 SQL 代码，那很好。这将进入的程序不会被很多人使用，我的老板不在乎代码是否混乱或运行需要一点时间。我对被迫做如此低效和混乱的事情感到畏缩，但这就是我被迫做的事情。

我应该能够使用`sum()`那里的功能来总结 RSSI 值，我只是不确定如何做到这一点，同时将总和除以每个的计数，`DISTINCT readings_miu_id`同时对这些数据执行我需要做的所有其他事情。使用 VB.NET 2008 和 sqlServer，我可以通过一些逻辑语句运行每一行来执行我需要对数据执行的操作，但我不知道如何在 SQL 或 VBA 中执行此操作。

* * *

### 编辑：

如果我解释的不够好，请告诉我，我会尽我所能纠正并添加信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-20T20:14:03.270

一次解决一个问题。为每个步骤、AnalyzedStep1、AnalyzedStep2 等创建表。

# asp.net - 如果我希望对网站的 HTML 进行细粒度控制，是否应该学习 ASP.NET？

> ID：889741
> 
> 赞同：-2
> 
> 时间：2009-05-20T19:21:02.970
> 
> 标签：asp.net, asp.net-mvc, webforms

几个月来，我一直在考虑下载 Microsoft 的[express web 平台](http://www.microsoft.com/web/downloads/platform.aspx)并学习 ASP.NET，我可能真的很喜欢，因为我已经使用 PHP 进行 web 工作，但更喜欢使用 C#。

但是，我不想这样做的主要原因是我一直将 ASP.NET 与无用的意大利面条 HTML 相关联。我发布的链接就是一个很好的例子。是否可以在更类似于 PHP 的上下文中使用 ASP.NET，使用它来为我的网站提供动力，但出于验证和语义原因，不让 HTML、CSS 和 JavaScript 手动完成？

* * *

**编辑**

我决定不学习 ASP.NET 并坚持使用 PHP。

虽然 MVC 听起来不错，但对我来说，它最终可能会成为开发/调试方面的难题。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2009-05-20T19:22:17.803

如果您使用 ASP.NET MVC，事情会变得更好。我建议你跳过 ASP.NET WebForms，直接跳转到 MVC。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-20T19:33:18.530

如果您打算使用经典的 ASP.NET Web 窗体，您真的需要了解它是如何工作的，以避免真正丑陋的 html。如果你知道你在做什么，你可以接近你想要的（你不能完全摆脱 ViewState 并且它会用元素 ID 做一些丑陋的事情）

当人们像编写 VB 6 Windows 应用程序一样编写 Web 表单时，就会出现许多经典 ASP.NET 的丑陋之处。

ASP.NET MVC 是一个不错的选择。这可能是作为起点的方法；我想自己切换到它。我想我的意思是，您可以使用 Classic ASP.NET 获得不那么难看的 HTML。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-20T19:24:08.767

你真的会想看看asp.net mvc。它允许您以比普通 Web 表单更适合 Web 的方式进行开发。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-20T19:24:09.110

首先，即使使用网络表单，ASP.Net 也允许您完全控制标记输出。当然，在某些情况下它比其他情况更容易，但在任何地方你发现你没有从控件中获得你想要的 html，你总是可以用 ControlAdapter 替换呈现行为。

也就是说，正如其他人所提到的，您可能会发现使用 ASP.Net MVC 获得所需的准确 html 标记要容易得多。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-20T19:25:39.933

MVC.net 和 WebForms 建立在 ASP.net 之上

您可以通过禁用视图状态而不使用任何控制器（或很少使用）来获得相当数量的网络表单控制。一切都在于你让它为你做多少

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-05-20T19:49:23.630

如果您希望获得最新最好的技能，那么 MVC 是您应该开始的地方，但我也会考虑您是否会被要求支持 ASP.Net Webforms。了解 ViewState 对此至关重要。

对于细粒度的 HTML 输出，您可以使用经典的 ASP.Net 以多种不同的方式生成它。越来越多的开发人员使用 ASP.Net 和[Javascript](http://www.west-wind.com/presentations/jQuery/jQueryPart2.aspx)的微模板来[生成 RIA 的](http://www.west-wind.com/Weblog/ShowPosts.aspx?Category=jQuery). 这不可避免地会导致您的 html 输出保持清洁，以便可以使用 jQuery 和 CSS 对其进行操作。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-05-20T20:22:03.160

学习 ASP.NET MVC，因为它可以让您更好地控制生成的 html。此外，学习 ASP.NET 将显着增加您的工作机会。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-05-20T23:17:49.170

我在 ASP.NET 中的第一次真正开发是使用 MVC，我必须说我现在真的很想念它，因为我正在使用 webforms 进行下一个项目。每个都有它的位置，网络表单在我正在做的事情上工作得很好（也利用它作为了解 TableAdapters 和其他东西的机会），但我真的很怀念能够将我需要的数据直接插入到 HTML 中。这样我就知道我构建的布局不会搞砸了。

作为一个框架，我非常喜欢 ASP.NET，但页面上的控件似乎与任何类似于 HTML 的东西相去甚远，以至于我经常会在精神上与我正在输入的内容与我期望看到的内容脱节。不过，当我第一次开始使用 HTML 时，我就是这样，所以我想我会习惯它的。当我开始使用 MVC 时，总体而言，来自前端背景的体验要愉快得多。

# iphone - Sending view to back

> ID：889746
> 
> 赞同：23
> 
> 时间：2009-05-20T19:22:31.563
> 
> 标签：iphone, uiview, uiviewcontroller

When I try to send a view to the back, it hides some of the buttons and labels in my view controller. The view I am sending to the back is a UIImageView. Does anyone have an opinion of what might be the problem?

* * *

Here is the code I am using:

```
UIImage *image = [UIImage imageNamed: @"background.jpg"];
UIImageView *backImage = [[UIImageView alloc] initWithImage: image];
[self.view addSubview: backImage];
[self.view sendSubviewToBack: backImage]; 
```

Then, when I am adding controls to self.view, they does not always show

* * *

I managed to get it roght by moving my code from init to loadView. I don't understand why that should make a difference, but hey.. it works!

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2009-05-21T07:20:56.600

If you are using `UIView`'s `sendSubviewToBack:` or a similar message, you probably have your buttons inserted in the hierarchy under the `UIImageView`. When a view moves in the hierarchy, all of its subviews move with it.

To fix this, you need to add your controls as subviews of the same view (possibly the `UIWindow`) you added the `UIImageView` to initially.

Without seeing your code, it's very difficult to be more precise.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2011-12-08T06:25:54.963

By not having to add it programmatically and adjust the views, much easier to layer each one in the interface builder. Make sure the image view, if this is set as the background, make sure it is the first to be listed.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-20T22:29:47.363

Agreed. Not quite sure by what you mean by "send to the back" but here's a guess...

If you are adjusting the layering within your main view, be sure you are not sending a view "to the back" (changing it's layer) that has number of subviews... or else they would all go to the back (their layering would change) at the same time.

If this is totally not what you meant, just let me know, and I'll delete this answer.

# user-interface - jsp动态图形界面

> ID：889754
> 
> 赞同：0
> 
> 时间：2009-05-20T19:24:07.270
> 
> 标签：user-interface, jsp

我问自己是否有可能以某种方式在 jsp 中创建动态 gui。这样我就可以有一个类似国家的下拉菜单，并根据我在该窗口中选择的内容为城市选择一个下拉菜单，而无需重新加载 jsp 页面。或者，在具有多个输入行的对话框中，能够使用按钮添加额外的行，而无需重新加载整个页面。在第一种情况下，城市信息将在数据库中，在第二种情况下，提供的信息将存储在数据库中，所以我不能只使用 java 脚本（也不想这样做）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-20T19:29:51.313

要更新页面而不发回整个页面，浏览器将使用 ajax。使用数据库并不能消除 ajax。Ajax 调用从数据库中挖掘数据的服务器代码。

无论如何，要做你想做的事，而不用编写自己的 javascript，看看 GWT（Google Web Toolkit）。您在 Java 中为您生成 javascript 的 ajax 应用程序是正确的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-20T19:41:40.167

至少，您需要使用 JavaScript 来实现您想要的。大多数人会按照蒂姆在第一段中描述的方式来实现它。

设置两个.JSP：第一个包含带有国家下拉菜单的主表单。第一个 .JSP 上的某些 JavaScript 会触发对第二个 .JSP 的 AJAX 请求。第二个 .JSP 接受 country-ID 参数并使用 servlet 查询您的数据库以获取城市列表，然后呈现该数据。一旦请求返回，您的第一个 .JSP 中的 JavaScript 会将城市列表插入到新的下拉菜单中。

这可能看起来很复杂，但有几个 JavaScript 库可以帮助您完成这项任务。查看[jQuery](http://jquery.com/)或[Dojo](http://www.dojotoolkit.org)。

# c++ - C++ - 如何知道 map::upper_bound() 是否没有返回值？

> ID：889756
> 
> 赞同：1
> 
> 时间：2009-05-20T19:24:09.033
> 
> 标签：c++, stl

我有一张非常简单的地图：

```
std::map<int, double> distances;
distances[20.5] = 1;
distances[19] = 2;
distances[24] = 3; 
```

在这种情况下使用 map::upper_bound() 时，我如何知道是否没有任何返回值，例如：

```
std::map<int, double>::iterator iter = distances.upper_bound(24); 
```

（24 是最大键，因此返回了意外的结果，但是如何通过代码知道这一点？如何知道我已经达到了最大键？）。

谢谢 ！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-05-20T19:26:00.463

```
if (iter == distances.end())
    // no upper bound 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-20T19:29:13.750

C++ 中的大多数迭代器将被设置到集合的末尾以表示不存在的值。这是迭代器表示“没有更多数据”的唯一有效值。

因此，您可以与 进行比较`iter`，`distances.end()`如果它们相等，那么您就得到了答案。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-20T20:12:53.520

这是`distances.end()`，这很有意义。直观地说，`upper_bound()`返回指向第一个位置的迭代器，即您的键在或将在地图中的“之后”。如果地图中的所有键都小于或等于您的键，那么第一个“在”它们之后的位置就是结束迭代器。

# database - 关系数据库和面向对象数据库哪个更好，会被压制？

> ID：889770
> 
> 赞同：1
> 
> 时间：2009-05-20T19:27:00.913
> 
> 标签：database, rdbms, object-oriented-database

我想知道RDBMS或OODBMS是否会在不久的将来被压制？

今天我阅读了很多关于它们之间差异的文章，并且大多数文章似乎都支持 OODBMS。这是否意味着 RDBMS 将被尚未完善的 OODBMS 压制？如果不是，是什么让你这么认为？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-20T19:35:08.370

> 新的信息世界是关于 BLOB 的。

不，不是。BLOB 对某些事情很有用，但它们不会取代或使更结构化的数据库或数据类型的适当使用过时。

关系模型非常擅长解决某一类数据组织问题。非关系模型解决了一些不同的问题，但这并不会使关系模型过时。

一直在出现其他非关系数据库架构。自从关系模型首次发布以来，这种情况就一直在进行。

我们可以使用 OODBMS、键值存储、MapReduce 框架、语义网等，而不会影响 RDBMS。 **没有零和游戏。**

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-05-20T19:31:30.640

什么是更好的皮卡车或轿车？

用法可以重叠，但都有专门的用途。当用于他们的预期任务时，它们比不正确使用的另一个工作得更好：

*   **坏**：搬家那天沙发从轿车窗户里伸出来！
*   **好**：搬家那天皮卡车后面的沙发。
*   **坏**：拼车的人骑在拼车车道上的皮卡车后面！
*   **好**：人们坐在拼车车道的轿车座位上。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-20T20:24:47.600

And no one is going to rewrite the millions (maybe billions now that I think of it) of business critical relational databases out there anytime soon to be OODBMS.

# iphone - 键盘 iPhone

> ID：889774
> 
> 赞同：0
> 
> 时间：2009-05-20T19:28:29.243
> 
> 标签：iphone, keyboard, touch, iphone-softkeyboard

是否可以知道用户何时触摸键盘 iphone？当用户从键盘触摸某个按钮时...：/

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-20T19:54:37.130

最简单的方法是使用 TextField。即使您的 UI 不需要一个，您也可以将它的框架设置为零，这样它就不会出现在屏幕上。然后，您可以使用文本字段的委托回调方法访问所按下的键。

```
- (void)viewDidLoad {
    [super viewDidLoad];
    //CGRectZero because we don't want the textfield to be shown onscreen
    UITextField *f = [[UITextField alloc] initWithFrame:CGRectZero];
    //We set the delegate so we can grab keypressed
    f.delegate = self; 
    [self.view addSubview:f];
    [f becomeFirstResponder];  //Show the keyboard
}

- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range
                                                       replacementString:(NSString *)string {
    if (string.length >0) {
       NSLog(@"%@ Pressed",string);
    }
    else {
       NSLog(@"Backspcae pressed");
    }        
}

- (BOOL)textFieldShouldReturn:(UITextField *)textField {
    NSLog(@"return pressed");
    return YES;
} 
```

注意：为避免编译器警告，请确保在您的 .h 文件中该类明确表示它实现了 UITextFieldDelegate 协议。IE：

```
@interface MyViewController : UIViewController <UITextFieldDelegate> 
```

# sql - MySQL 类型转换：为什么浮点数是最低公分母类型？

> ID：889792
> 
> 赞同：1
> 
> 时间：2009-05-20T19:30:42.623
> 
> 标签：sql, mysql, casting

我最近遇到了一个查询导致全表扫描的问题，它归结为一个列的定义与我认为的不同，它是 VARCHAR 而不是 INT。当使用“string_column = 17”查询时，查询运行，它只是无法使用索引。这真的让我陷入了困境。

所以我去搜索并发现发生了什么，我看到的行为与[MySQL 的文档](http://dev.mysql.com/doc/refman/5.0/en/type-conversion.html)所说的一致：

> 在所有其他情况下，参数作为浮点（实）数进行比较。

所以我的问题是......为什么是浮动？

我可以看到尝试将数字转换为字符串（尽管上面链接的 MySQL 页面中的点是不这样做的充分理由）。我也可以理解抛出某种错误或生成警告（我的偏好）。相反，它愉快地运行。

那么为什么将所有内容都转换为浮点数？这是来自 SQL 标准，还是基于其他原因？谁能帮我解释一下这个选择？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-20T19:43:20.383

我感觉到你的痛苦。我们的数据库中有一个列，其中包含公司众所周知的“订单号”。但它并不总是一个数字，在某些情况下它也可以有其他字符，所以我们将它保存在一个 varchar 中。对于 SQL Server 2000，这意味着选择“order_number = 123456”是不好的。SQL Server 有效地将谓词重写为`"CAST(order_number, INT) = 123456"`具有两个不良影响：

1.  索引`order_number`以 varchar 形式打开，因此它开始全面扫描
2.  这些非数字订单号最终会导致向用户抛出转换错误，并带有相当无用的消息。

在某种程度上，我们确实拥有那些非数字的“数字”是件好事，因为至少将参数作为数字传递的写得不好的查询会被困住，而不仅仅是吸收资源。

我认为没有标准。我似乎记得 PostgreSQL 8.3 删除了数字和文本类型之间的一些默认转换，以便在计划查询时这种情况会引发错误。

大概“float”被认为是范围最广的数字类型，因此所有数字都可以被无声地提升为？

哦，当你有 varchar 列和一个将所有字符串文字作为 nvarchar 传递的 Java 应用程序时，类似的问题（但没有转换错误）......突然你的 varchar 索引不再使用，祝你好运找到这种情况的发生。当然，您可以告诉 Java 应用程序将字符串作为 varchar 发送，但现在我们只能在 windows-1252 中使用字符，因为这就是 5-6 年前创建的数据库，当时它只是一个“权宜之计” ，啊哈。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-20T19:41:54.583

嗯，这很容易理解：`float`能够容纳最大范围的数字。

例如，如果基础数据类型是`datetime`，则可以简单地将其转换为具有相同内在值的浮点数。

如果数据类型是一个`string`，很容易将其解析为浮点数，从而无法承受性能下降。

所以浮点数据类型更好地回退。

# sql - 在 vb.net 中编写 sql 代码

> ID：889795
> 
> 赞同：-1
> 
> 时间：2009-05-20T19:30:53.870
> 
> 标签：sql, vb.net

我在 ASP.net 3.5 页面上的文本框中输入了信息。当我单击提交按钮时，我希望将此信息写入 sql server 数据库。

有人可以告诉我我需要做什么来完成这个。最终用户不应该看到任何东西。

我正在使用visual web developer 2008。事件处理代码使用vb放在一个单独的文件中。

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-20T19:35:37.183

有*很多*不同的方法可以实现这一点：动态数据、LinqToSQL、类型化数据集、数据访问应用程序块或其他 ORM。我首选的方法是直接 sql，它会使用如下代码：

```
Public Sub SaveAnswer(ByVal answer As String)
    Dim sql As String = "INSERT INTO [table1] (ans) VALUES (@Answer)"

    Using cn As New SqlConnection(getConnectionString()), _
          cmd As New SqlCommand(sql)

        cmd.Parameters.Add("@Answer", SqlDbType.VarChar, 50).Value = answer

        cn.Open()
        cmd.ExecuteNonQuery()
    End Using
End Sub

Private Function getConnectionString() As String
    ''//normally read from a config file for this

    Return "Server=(local)\SQLEXPRESS;Database=testdb;Trusted_Connection=True;"
End Function 
```

从这个样本中可以得到一些东西：

*   即使抛出异常，它也会通过`Using`块正确关闭数据库连接
*   参数化查询防止sql注入
*   `getConnectionString()`是私人的。您应该将数据访问抽象到一个单独的类或程序集中，这是开始执行它的一种方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-20T19:35:22.037

有很多方法可以处理它。我将从一些 ADO.NET（.NET 用于与数据库对话的库）资源开始：

*   [使用 ADO.NET 修改数据](http://msdn.microsoft.com/en-us/library/ms254950(VS.80).aspx)
*   [ADO.NET 概述](http://msdn.microsoft.com/en-us/library/ms254950(VS.80).aspx)
*   [简单插入](http://msdn.microsoft.com/en-us/library/3btz0xwf(VS.80).aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-20T19:44:33.547

听起来您是 ASP.NET 的初学者。最好的办法是在线查找构建数据库驱动的 ASP.NET 应用程序的教程。在这里直接回答您的问题将重写在其他地方找到的编写得更好的教程。

您应该从一些有针对性的 Google 搜索教程开始，例如[这个](http://www.google.com/search?hl=en&client=firefox-a&rls=org.mozilla%3Aen-US%3Aofficial&q=ASP.NET+Tutorial+Database+ADO.NET&btnG=Search)。

我的建议是从 2.0 开始，而不是 3.5 —— 即使它是旧版本，新版本也建立在它之上，因此您将学习在 3.5 中仍然有用的基础知识。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-20T19:35:00.307

需要查看 LINQ to SQL 或 ADO.NET（较低级别）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-20T19:40:07.520

dot net 3.5 集成了一个 LINQ 功能...您无需编写 sql 代码...它是 SQL ORM 为您完成这项工作

创建一个数据库（.mdb 文件），然后创建一个 dbml 文件（即 datacontext），将您在数据库中创建的表拖放到 dbml...

然后你准备好编码......

如果 dbml 文件名为 master ...并且表名为 table1 并且有一列 column1

那么这就是你使用它的方式

```
dim db = new masterdatacontext()
dim c = new table1()
c.column1 = textbox1.text()
db.table1.insertonsubmit(c)
db.submitchanges() 
```

就是这样...

# c# - 并行应用程序的可变与不可变

> ID：889804
> 
> 赞同：3
> 
> 时间：2009-05-20T19:33:57.937
> 
> 标签：c#, .net, parallel-processing, immutability, mutable

在我正在编写的应用程序中，我需要编写许多基本类型，它们很可能是不可变的。但我想知道如何将并行应用程序中的可变类型与不可变类型进行比较。

您可以对可变对象使用锁，对吗？它与并行应用程序中使用不可变类型的其他技术相比如何？

你至少远离使用不可变类型的锁，对吧？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-20T19:41:12.900

类型

*   尽可能使用不可变类型。
*   尽可能使用线程安全的集合而不是显式锁。
*   只有在没有其他合理选择时才使用可变类型。

线程

*   尽可能使用线程池。
*   当线程池不可用时使用无限循环。
*   手动启动和停止线程作为最后的手段。

如果您必须使用显式锁，请彻底记录它们。尤其是涉及到锁定对象的顺序时。如果你知道 Foo 对象总是在 Bar 对象之前被锁定并且 Foo(key 100) 总是在 Foo(key = 200) 之前被锁定，你就不会遇到死锁。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-20T19:44:45.560

编写可并行化应用程序的关键是远离可变共享状态。在线程之间共享可变状态需要同步，这通常需要某种形式的锁定。使用不可变类型可以帮助确保您不会意外共享状态，因为无法更改这些对象的状态。然而，这不是灵丹妙药，而只是一种设计选择。如果您尝试并行化的算法需要共享状态，您将不得不创建某种同步。

可变性不影响锁定。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-20T19:54:06.570

当您使用可变类型时，您将自己暴露于读后写或写后写错误。这些是与更新值相关的同步错误，而其他线程正在同时读取或更新该值。

为了防止同步错误，您必须使用某种形式的锁定机制。如果您确实使用显式锁定，则需要非常小心获取锁的顺序。如果你不小心，你可能会引入死锁。例如：线程 A 获得锁 X，然后线程 B 获得锁 Y。稍后，线程 A 请求锁 Y，线程 B 请求锁 X。这导致两个线程无限期地等待永远不会释放的锁。

锁定的两个好的经验法则：

*   按特定顺序获取锁（例如，总是在锁 Y 之前获取锁 X）
*   持有锁的时间尽可能短。在需要时获取它们，并在完成后立即释放它们。

如果您在创建对象后从未对其进行写入，则无需在访问之前锁定它。因此，您不需要锁定不可变对象。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-17T15:04:50.953

尽可能使用不可变类型。必要时使用可变类型（序列化等）。

使用 System.Threading.Tasks 进行所有并行化 - 添加 async 和 await 关键字后，甚至可以使用 C# 5 中的语言构建任务。

我在 C# 中写了一篇关于可变/不可变类型的文章：[http ://rickyhelgesson.wordpress.com/2012/07/17/mutable-or-immutable-in-a-parallel-world/](http://rickyhelgesson.wordpress.com/2012/07/17/mutable-or-immutable-in-a-parallel-world/)

# php - 无论如何升级PHP4 mysql客户端？

> ID：889813
> 
> 赞同：0
> 
> 时间：2009-05-20T19:35:44.517
> 
> 标签：php, mysql, php4

我收到以下错误：

*客户端不支持服务器请求的认证协议；考虑升级 MySQL 客户端*

我知道我可以解决它：

```
SET PASSWORD FOR user@localhost = OLD_PASSWORD('password'); 
```

但我想知道是否有另一种方法可以通过使用不同的 PHP mysql 扩展或其他方式来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-20T19:39:30.437

一种选择是`OLD_PASSWORD`按照您的建议使用，另一种选择是升级 MySQL 客户端库和 PHP MySQL 绑定。我不知道任何其他选择：没有替代库。

# c# - 是否可以在 XAML 中绑定 Canvas 的 Children 属性？

> ID：889825
> 
> 赞同：60
> 
> 时间：2009-05-20T19:36:57.790
> 
> 标签：c#, wpf, data-binding, .net-3.5, canvas

我有点惊讶，无法通过 XAML 为 Canvas.Children 设置绑定。我不得不求助于看起来像这样的代码隐藏方法：

```
private void UserControl_Loaded(object sender, RoutedEventArgs e)
{
    DesignerViewModel dvm = this.DataContext as DesignerViewModel;
    dvm.Document.Items.CollectionChanged += new System.Collections.Specialized.NotifyCollectionChangedEventHandler(Items_CollectionChanged);

    foreach (UIElement element in dvm.Document.Items)
        designerCanvas.Children.Add(element);
}

private void Items_CollectionChanged(object sender, NotifyCollectionChangedEventArgs e)
{
    ObservableCollection<UIElement> collection = sender as ObservableCollection<UIElement>;

    foreach (UIElement element in collection)
        if (!designerCanvas.Children.Contains(element))
            designerCanvas.Children.Add(element);

    List<UIElement> removeList = new List<UIElement>();
    foreach (UIElement element in designerCanvas.Children)
        if (!collection.Contains(element))
            removeList.Add(element);

    foreach (UIElement element in removeList)
        designerCanvas.Children.Remove(element);
} 
```

我宁愿像这样在 XAML 中设置一个绑定：

```
<Canvas x:Name="designerCanvas"
        Children="{Binding Document.Items}"
        Width="{Binding Document.Width}"
        Height="{Binding Document.Height}">
</Canvas> 
```

有没有办法在不采用代码隐藏方法的情况下实现这一点？我已经对这个主题进行了一些谷歌搜索，但对于这个特定问题并没有想出太多。

我不喜欢我目前的方法，因为它通过让 View 意识到它是 ViewModel 来破坏我漂亮的 Model-View-ViewModel。

* * *

## 回答 #1

> 赞同：146
> 
> 时间：2009-06-23T01:18:19.263

```
<ItemsControl ItemsSource="{Binding Path=Circles}">
    <ItemsControl.ItemsPanel>
         <ItemsPanelTemplate>
              <Canvas Background="White" Width="500" Height="500"  />
         </ItemsPanelTemplate>
    </ItemsControl.ItemsPanel>
    <ItemsControl.ItemTemplate>
        <DataTemplate>
            <Ellipse Fill="{Binding Path=Color, Converter={StaticResource colorBrushConverter}}" Width="25" Height="25" />
        </DataTemplate>
    </ItemsControl.ItemTemplate>
    <ItemsControl.ItemContainerStyle>
        <Style>
            <Setter Property="Canvas.Top" Value="{Binding Path=Y}" />
            <Setter Property="Canvas.Left" Value="{Binding Path=X}" />
        </Style>
    </ItemsControl.ItemContainerStyle>
</ItemsControl> 
```

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2009-07-30T21:57:06.170

其他人已经就如何做你真正想做的事情给出了可扩展的答复。我将解释为什么你不能`Children`直接绑定。

问题很简单——数据绑定目标不能是只读属性，而且`Panel.Children`是只读的。那里的收藏没有特殊处理。相反，`ItemsControl.ItemsSource`它是一个读/写属性，即使它是集合类型 - 对于 .NET 类来说很少出现，但需要它来支持绑定方案。

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2009-05-20T20:35:34.240

`ItemsControl`旨在从其他集合（甚至非 UI 数据集合）创建 UI 控件的动态集合。

您可以模板 an`ItemsControl`以在`Canvas`. 理想的方法是将支持面板设置为 a `Canvas`，然后在直接子级上设置`Canvas.Left`and`Canvas.Top`属性。我无法让它工作，因为`ItemsControl`它用容器包装了它的孩子，而且很难`Canvas`在这些容器上设置属性。

相反，我使用 a`Grid`作为所有项目的箱，并单独绘制它们`Canvas`。这种方法有一些开销。

```
<ItemsControl x:Name="Collection" HorizontalAlignment="Stretch" VerticalAlignment="Stretch">
    <ItemsControl.ItemsPanel>
        <ItemsPanelTemplate>
            <Grid HorizontalAlignment="Stretch" VerticalAlignment="Stretch"/>
        </ItemsPanelTemplate>
    </ItemsControl.ItemsPanel>
    <ItemsControl.ItemTemplate>
        <DataTemplate DataType="{x:Type local:MyPoint}">
            <Canvas HorizontalAlignment="Stretch" VerticalAlignment="Stretch">
                <Ellipse Width="10" Height="10" Fill="Black" Canvas.Left="{Binding X}" Canvas.Top="{Binding Y}"/>
            </Canvas>
        </DataTemplate>
    </ItemsControl.ItemTemplate>
</ItemsControl> 
```

这是我用来设置源集合的代码：

```
List<MyPoint> points = new List<MyPoint>();

points.Add(new MyPoint(2, 100));
points.Add(new MyPoint(50, 20));
points.Add(new MyPoint(200, 200));
points.Add(new MyPoint(300, 370));

Collection.ItemsSource = points; 
```

`MyPoint`是一个行为就像`System`版本一样的自定义类。我创建它是为了证明您可以使用自己的自定义类。

最后一个细节：您可以将 ItemsSource 属性绑定到您想要的任何集合。例如：

```
<ItemsControls ItemsSource="{Binding Document.Items}"><!--etc, etc...--> 
```

有关 ItemsControl 及其工作原理的更多详细信息，请查看以下文档：[MSDN Library Reference](http://msdn.microsoft.com/en-us/library/system.windows.controls.itemscontrol.aspx)；[数据模板](http://msdn.microsoft.com/en-us/library/ms742521.aspx)；[WPF 博士关于 ItemsControl 的系列](https://web.archive.org/web/20090421081446/http://drwpf.com:80/blog/Home/tabid/36/EntryID/13/Default.aspx)。

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2010-09-20T12:37:00.530

```
internal static class CanvasAssistant
{
    #region Dependency Properties

    public static readonly DependencyProperty BoundChildrenProperty =
        DependencyProperty.RegisterAttached("BoundChildren", typeof (object), typeof (CanvasAssistant),
                                            new FrameworkPropertyMetadata(null, onBoundChildrenChanged));

    #endregion

    public static void SetBoundChildren(DependencyObject dependencyObject, string value)
    {
        dependencyObject.SetValue(BoundChildrenProperty, value);
    }

    private static void onBoundChildrenChanged(DependencyObject dependencyObject,
                                               DependencyPropertyChangedEventArgs e)
    {
        if (dependencyObject == null)
        {
            return;
        }
        var canvas = dependencyObject as Canvas;
        if (canvas == null) return;

        var objects = (ObservableCollection<UIElement>) e.NewValue;

        if (objects == null)
        {
            canvas.Children.Clear();
            return;
        }

        //TODO: Create Method for that.
        objects.CollectionChanged += (sender, args) =>
                                            {
                                                if (args.Action == NotifyCollectionChangedAction.Add)
                                                    foreach (object item in args.NewItems)
                                                    {
                                                        canvas.Children.Add((UIElement) item);
                                                    }
                                                if (args.Action == NotifyCollectionChangedAction.Remove)
                                                    foreach (object item in args.OldItems)
                                                    {
                                                        canvas.Children.Remove((UIElement) item);
                                                    }
                                            };

        foreach (UIElement item in objects)
        {
            canvas.Children.Add(item);
        }
    }
} 
```

并使用：

```
<Canvas x:Name="PART_SomeCanvas"
        Controls:CanvasAssistant.BoundChildren="{TemplateBinding SomeItems}"/> 
```

* * *

## 回答 #5

> 赞同：12
> 
> 时间：2009-05-20T20:05:07.343

我不相信它可以与 Children 属性结合使用。我今天实际上试图这样做，但它像你一样在我身上犯了错误。

Canvas 是一个非常基本的容器。它真的不是为这种工作而设计的。您应该查看众多 ItemsControls 之一。您可以将 ViewModel 的数据模型 ObservableCollection 绑定到它们的 ItemsSource 属性，并使用 DataTemplates 来处理每个项目在控件中的呈现方式。

如果您找不到以令人满意的方式呈现您的项目的 ItemsControl，您可能必须创建一个自定义控件来满足您的需要。

# opengl - OpenGL - 从小于该屏幕的屏幕复制纹理

> ID：889827
> 
> 赞同：0
> 
> 时间：2009-05-20T19:38:22.187
> 
> 标签：opengl, textures, blur, mipmaps, bloom

我正在尝试将屏幕捕捉到分辨率低于屏幕本身的纹理（以渲染回屏幕并创建模糊/绽放效果），但效果不太好。我知道可以使用 mipmap 来执行此操作，但我无法让正确的命令序列起作用。

我当前的代码：

```
width=1024;
height=1024;

glGenTextures(1, &texture);

glEnable(GL_TEXTURE_2D);
glBindTexture(GL_TEXTURE_2D, texture);

glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);
glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);
glEnable (GL_BLEND);
glBlendFunc (GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA);
glTexEnvf(GL_TEXTURE_ENV, GL_TEXTURE_ENV_MODE,  GL_MODULATE);
glHint(GL_PERSPECTIVE_CORRECTION_HINT, GL_FASTEST);
glTexParameterf( GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_CLAMP );

glCopyTexImage2D(GL_TEXTURE_2D, 0, GL_RGB, 0, 0, width, height, 0);

// code for rendering the screen back on goes here 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-20T20:24:15.200

您无法一次性捕获和降级过滤。您必须首先将全屏捕获到更大的纹理，然后如果启用了自动创建 mipmap，则应该创建 mipmap，然后您可以再次使用该纹理渲染一个，确保您适当地调整 mipmap 级别。

但是，这看起来很难看，因为自动 mipmapgeneration 通常使用盒子过滤器。

我要做的是设置一些 FBO（帧缓冲区对象）和 GLSL 着色器。这使您可以更好地控制所有步骤：

*   在纹理中创建原始图像
*   应用一些不错的高斯低通滤波
*   将过滤与原始图像混合到帧缓冲区

# java - SMTP 身份验证

> ID：889833
> 
> 赞同：0
> 
> 时间：2009-05-20T19:40:02.340
> 
> 标签：java, smtp, email

我正在编写一个类以通过 SSL 连接到 SMTP 服务器并发送邮件。我使用的 smtp 服务器（雅虎）需要身份验证。有人可以告诉我应该使用哪些命令来发送我的用户凭据的身份验证是如何进行的吗？

注意：我知道 JavaMail API。我只想要一个简单的类来发送邮件而无需外部库。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-20T19:51:20.960

[Internet RFC 821](http://www.faqs.org/rfcs/rfc821.html)涵盖了 SMTP 协议的基础知识，而[RFC 2554](http://www.faqs.org/rfcs/rfc2554.html)涵盖了身份验证扩展。您将需要其中的许多来启动功能正常的 SMTP 客户端。

但是，实际上，只使用 JavaMail 要简单得多（除非这是家庭作业，在这种情况下，我猜那是作弊。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T05:16:07.737

您可以通过在 c# 中执行此操作

```
class smtp
{
    SmtpClient client;
    MailMessage   mm;

    void send()
    {
      mm.send();
    }

    void smtp_configure()
    {
     client.Credentials = new NetworkCredential(username, password);
                client.Port = smtp_port;
                client.Host = smtp_host;              
                client.EnableSsl = true;
    }
    message_configure()
    {
      mm = new MailMessage(From, To);
      mm.Body = MgsText;
      mm.BodyEncoding = Encoding.UTF8;
      mm.Subject = Subject;
    }

   Main()
   {
      smtp_configure();
      message_configure();
      send();
    }

} 
```

# oracle10g - 按连续时间间隔对 SQL 结果进行分组（oracle sql）

> ID：889836
> 
> 赞同：0
> 
> 时间：2009-05-20T19:40:32.807
> 
> 标签：oracle10g

我在下表中有以下数据，我正在寻找一种方法来对每个 id 返回的连续时间间隔进行分组：

```
CREATE TABLE DUMMY
(
  ID          VARCHAR2(10 BYTE),
  TIME_STAMP  VARCHAR2(8 BYTE),
  NAME        VARCHAR2(255 BYTE)
);

SELECT ID, min(TIME_STAMP) "startDate", max(TIME_STAMP) "endDate", NAME
GROUP BY ID , NAME 
```

就像是

```
100 20011128 20011203 David
100 20011204 20011207 Unknown
100 20011208 20011215 David
100 20011216 20011220 Sara 
```

等等 ...

附言。我有一个示例脚本，但我不知道如何附加我的文件。

大家好，这里有更多的输入：

1.  对于特定 ID，只有一条带有 time_stamp 的记录。
2.  用户可以不同，例如第 1 天 David、第 2 天未知、第 3 天 David 等等。

因此，每个 ID 一年中的每一天都有一行，但用户不同。现在，我想查看断点，基于从第一天到最后一天的 time_stamp 间隔的差异，以从开始日到最后一天的日期顺序中的特定 ID。

查询结果应该是：

```
ID   NAME     MIN_DATE  MAX_DATE
100  David    20011128  20050407
100  Sara     20050408  20050417
100  David    20050418  20080416
100  Unknown  20080417  20080507
100  David    20080508  20080508
100  Unknown  20080509  20080607
100  David    20080608  20080608
100  Unknown  20080609  20080921
100  David    20080922  20080922
100  Unknown  20080923  20081231
100  David    20090101  20090405 
```

谢谢

再次嗨，非常感谢大家，我已经解决了这个问题，这里是解决方案：

```
select id, min(time_stamp), max(time_stamp), name
from   ( select id, time_stamp, name,
                max(rn) over (order by time_stamp) grp
         from   ( select id, time_stamp, name,
                         case
                              when lag(name) over (order by time_stamp) <> name or
                                   row_number() over (order by time_stamp) = 1
                              then row_number() over (order by time_stamp)
                         end rn
                  from   dummy
                )
       )
group by id, grp, name
order by 1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-20T20:12:51.807

```
Select
   ID,
   Name,
   min(time_stamp) min_date,
   max(time_stamp) max_date
from
   Dummy
group by
   Id,
   Name 
```

那应该行得通。

如果您想要每个 ID 的日期范围，但您可以执行所有名称：

```
Select
   d.Id,
   d.Name,
   dr.min_date,
   dr.max_date
from
   Dummy d

   JOIN 
      (Select
         Id,
         min(time_stamp) min_date,
         max(time_stamp) max_date
      from
         Dummy
      group by
         Id 
      ) dr
      on ( dr.Id = d.Id) 
```

# .net - .Net 客户端使用错误的提供程序连接到 SQL 2005

> ID：889839
> 
> 赞同：1
> 
> 时间：2009-05-20T19:41:09.513
> 
> 标签：.net, sql-server

我正在尝试从开发人员机器连接到服务器上的数据库。服务器禁用了命名管道协议。出于某种原因，我们从一位开发人员的框中收到以下错误消息。其他两个开发人员框可以使用相同的代码进行连接（使用 tcp/ip）。我尝试在客户端上禁用命名管道协议，但仍然收到以下消息。

> 由于登录前连接初始化过程出错，客户端无法建立连接。可能的原因包括：客户端尝试连接到不受支持的 SQL Server 版本；服务器太忙而无法接受新连接；或者服务器上存在资源限制（内存不足或允许的最大连接数）。（提供者：命名管道提供者，错误：0 - 管道的另一端没有进程。）

正在使用的连接字符串：

数据源=SERVER_NAME；数据库=DATABASE_NAME；trusted_connection=yes；连接超时=120；

感谢您的任何想法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-20T20:06:13.223

在 Win98 客户端和 ADO 中，我们曾经通过将其添加到连接字符串来强制连接 TCPIP： Network Library=dbmssocn;

在 XP 上，您可以这样做： Network Library=TCPIP;

不确定 M$ 是否仍然支持或鼓励 ADO.Net 连接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-20T20:28:37.890

您可以尝试运行命令“CliConfg.exe”并将默认协议设置为“TCP/IP”

# excel - 如何将代码更改保存到 Excel VBA 加载项？

> ID：889840
> 
> 赞同：2
> 
> 时间：2009-05-20T19:41:10.387
> 
> 标签：excel, vba, save, excel-2007, add-in

我在 VBA 中为 Excel 制作了一个加载项，现在我需要更改代码，但文件不会保存。我打开 .xlam 文件，进行更改，按 ctrl-S 保存，没有弹出错误，关闭。但是当我重新打开时，我所做的任何更改都不存在。是什么赋予了？是否有一些特殊的方法我必须保存加载项才能使更改生效？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-11-12T17:50:12.707

在 VB 编辑器中，在 Project Explorer 窗格中选择项目，然后在即时窗口 (Ctrl + G) 中输入此行并按 Enter：

ThisWorkbook.保存

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-21T16:53:35.057

我曾遇到过看起来加载项未保存的情况。我不得不卸载加载项，重新启动 Excel，然后重新加载加载项。保存的更改在那里，只是在重新加载加载项之前不显示。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-21T16:47:15.990

在进行默认 Excel 保存时，我遇到了加载项不保存的问题；相反，您应该确保始终从 VBA 编辑器内部保存。除此之外，确保您没有选中“锁定项目以供查看”复选框或添加密码——这些都可以在“项目属性”对话框的“保护”选项卡上找到，“工具”中的第 5 项“ 菜单。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-06-09T19:25:18.017

我在 .xlam 文件的 Sheet1 上有一个按钮，代码如下：

```
Private Sub CommandButton3_Click()
    ThisWorkbook.IsAddin = True
    ThisWorkbook.Saved = True
End Sub 
```

当我想保存 .xlam 文件时，我在 Project Explorer 窗口中选择 ThisWorksheet，然后将 IsAddin 属性的值更改为 false，即显示 .xlam 文件的 sheet1。我单击按钮，将其更改回 Addin 文件并保存代码。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-02-07T23:10:32.100

我还遇到了 VBE 不会在我创建的 .xlam 加载项中保存代码更改的问题。偶然我发现如果有任何工作簿打开（除了隐藏的 .xlam），VBE 保存不会发生，但如果所有其他工作簿都关闭，那么 VBE 会保存加载项中的更改。保存和关闭所有工作簿以保存代码更改，然后重新打开它们是一种尴尬的解决方法，但它比总是导出更改的模块、关闭 Excel、重新打开它和 VBE，然后导入保存的 .bas 文件要快。也许这给了某人（在微软？）一个提示，为什么 VBE 没有按应有的方式保存。

# visual-studio-2008 - VS2008 MSTest 命令行程序在加载单元测试程序集时挂起

> ID：889843
> 
> 赞同：2
> 
> 时间：2009-05-20T19:41:21.027
> 
> 标签：visual-studio-2008, mstest, dependencies

在 Visual Studio 2008 SP1 中，您可以创建一个使用 MSTest 作为测试运行器的单元测试项目。我现在一直在编写测试，测试来自托管 MSTest 项目的非托管 C++ MFC，这是一次非常有趣的旅程。

使用 IDE 的测试运行程序与使用命令行应用程序 MSTest.exe 之间似乎存在差异。在我的场景中，测试将在 IDE 中正常运行并且所有测试都将通过，但是如果您运行命令行测试运行程序，MSTest.exe 将在尝试加载单元测试 DLL 时挂起。

这似乎是 DLL 中缺少依赖项的问题。当我在 Depends.exe (Dependency Walker) 中加载单元测试 DLL 时，Depends.exe 会抱怨找不到 msvcr90d.dll，这是 VS2008 调试 C 运行时。我将该文件复制到 Out 文件夹以进行测试运行，并尝试在测试 DLL 上运行 mstest，但它没有解决问题。有任何想法吗？

我可以将一些 DeploymentItem 添加到测试或 testrunco​​nfig，但我无法找出我需要添加的内容。有什么想法可以找到应该添加为 DeploymentItems 的项目吗？

当我针对已删除 CWinApp 对象的静态库进行测试时，会发生这种情况。我想我必须删除它，这样就没有两个 CWinApp 实例，对吧？

我在 MSDN 论坛中查看了这篇帮助文章，但它并没有解决我的问题： [http ://social.msdn.microsoft.com/forums/en-US/vststest/thread/aa7f7567-faba-4589- b0ae-fe8d2c831c7a/](http://social.msdn.microsoft.com/forums/en-US/vststest/thread/aa7f7567-faba-4589-b0ae-fe8d2c831c7a/) 我不确定缺少哪个程序集，并且进程监视器中有太多条目，似乎无法找到丢失的程序集。有什么帮助吗？

# javascript - 正则表达式捕获变量

> ID：889844
> 
> 赞同：0
> 
> 时间：2009-05-20T19:41:36.267
> 
> 标签：javascript, html, regex

我正在尝试使用 HTML 表单和 javascript（我提到这一点，因为在 javascript 上使用正则表达式处理的一些高级功能时不可用）来完成以下操作：

为表单提供一些文本，并使用正则表达式对其进行查看并“捕获”它的某些部分以用作变量......

即文本是：

“abcde 电子邮件：asdf@gfds.com 电子邮件：fake@mail.net sdfsdaf...”

...现在，我的问题是，例如，我想不出一种优雅的方式将两封电子邮件都捕获为变量 e1 和 e2。

到目前为止我的正则表达式是这样的：/email: (\b\w+\b)/g 但由于某种原因，这并没有返回 2 个匹配项......它只返回 asdf@gfds.com > <

建议？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-20T19:48:41.900

您可以使用[RegExp.exec()](https://developer.mozilla.org/en/Core_JavaScript_1.5_Reference/Global_Objects/RegExp/exec)将正则表达式重复应用于字符串，每次都返回一个新匹配项：

```
var entry = "[...]"; //Whatever your data entry is
var regex = /email: (\b\w+\b)/g
var emails = []
while ((match = regex.exec(entry))) {
    emails[emails.length] = match[1];
} 
```

我将所有电子邮件存储在一个数组中（以便使这项工作成为任意输入）。看起来您的正则表达式也可能有点偏离；如果您只想捕获完整的电子邮件，则必须更改它。

# php - 在函数内部调用对象

> ID：889848
> 
> 赞同：7
> 
> 时间：2009-05-20T19:41:56.143
> 
> 标签：php, oop, function

所以我不会在 PHP 中使用 OOP。

这是我的问题，我有一个可以从中调用函数的对象，它提供了一个数组。所以这里是代码。

```
$obj = new OBJ();

function go($url){
    $array = $obj->grabArray($url);
    echo $array['hits'];
}

go('http://www.mysite.com/hello'); 
```

这给了我错误

致命错误：在非对象上调用成员函数 grabArray()

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2009-05-20T19:45:47.927

这不是 OOP 问题，而是范围问题。$obj 在函数 go() 中不可见。您要么需要将其作为参数传入，要么使用 global 关键字将其带入函数的作用域（不推荐）

推荐方式

```
$obj = new OBJ();

go('http://www.mysite.com/hello', $obj);

function go( $url, $object )
{
    $array = $object->grabArray($url);
    echo $array['hits'];
} 
```

不推荐的方式

```
$obj = new OBJ();

go('http://www.mysite.com/hello');

function go( $url )
{
    global $obj;
    $array = $object->grabArray($url);
    echo $array['hits'];
} 
```

还有另一种类似于 OOP 组合概念的解决方案 - 您可以让 go() 函数负责创建 OBJ 的实例。

```
go('http://www.mysite.com/hello');

function go( $url )
{
    $obj = new OBJ();
    $array = $obj->grabArray($url);
    echo $array['hits'];
} 
```

不过，这可能并不理想，因为每次执行 go() 时都会创建一个全新的 OBJ 实例。您可以通过使用静态变量“缓存”go() 中的 OBJ 实例来解决此问题

```
function go( $url )
{
    static $obj;
    if ( is_null( $obj ) )
    {
        $obj = new OBJ();
    }
    $array = $obj->grabArray($url);
    echo $array['hits'];
} 
```

但是这种类似组合的方法只有在除了 go() 函数之外没有在其他任何地方使用 OBJ 实例时才真正有用 - 如果您确实在其他地方使用它，那么参数方法是最佳选择。

关键在于为手头的任务选择正确的解决方案！

# regex - 编译正则表达式时可以捕获“无法识别的转义”警告吗？

> ID：889850
> 
> 赞同：3
> 
> 时间：2009-05-20T19:42:10.480
> 
> 标签：regex, perl

我正在从配置文件中读取正则表达式，其中可能有也可能没有无效的语法。（它被锁定在防火墙后面，所以我们不要进入安全问题。）我已经能够测试许多错误并给出友好的消息。

没有这样的运气：

> `Unrecognized escape \Q passed through in regex`

我知道是什么原因造成的，我只想知道我是否可以在 Perl 5.8 中捕获它。到目前为止，它一直拒绝我检查这种情况的努力。

所以问题是：有人知道如何捕捉这个吗？我必须重定向 STDERR 吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-20T20:39:04.577

您可以将警告设为 FATAL 并使用块 eval：

```
#!/usr/bin/perl

use strict;
use warnings;

my $s = '\M';

my $r = eval {
    use warnings FATAL => qw( regexp );
    qr/$s/;
};

$r or die "Runtime regexp compilation produced:\n$@\n"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-20T20:00:22.563

以下是如何将此警告转换为错误：

```
sub un {
  local $SIG{__WARN__} = sub {
    die $_[0] if $_[0]=~/^Unrecognized escape /;
    print STDERR $_[0]
  };
  qr{$_[0]}
}
un('al\Fa');
print "Not reached.\n"; 
```

以下是忽略此警告的方法：

```
sub un {
  local $SIG{__WARN__} = sub {
    print STDERR $_[0] if $_[0]!~/^Unrecognized escape /;
  };
  qr{$_[0]}
}
un('al\Fa');
print "Reached.\n"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-20T20:13:56.733

由于这是一个警告，因此您还需要重定向`STDERR`。

我的猜测是您收到警告是因为您正在插入从配置文件中获得的正则表达式字符串 -`s/\\/\\\\/g`在使用它之前尝试使用正则表达式字符串。

# sql - Sql server 中的标识列

> ID：889855
> 
> 赞同：6
> 
> 时间：2009-05-20T19:42:44.907
> 
> 标签：sql, sql-server

为什么Sql server 不允许在一个表中有多个IDENTITY 列？？任何具体原因。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-20T19:45:40.503

你为什么需要它？SQL Server 为每个带有列的表跟踪**单个值**（当前标识值），`IDENTITY`因此每个表只能有一个标识列。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-20T19:46:24.463

SQL Server 将标识存储在内部表中，使用表的 id 作为键。因此，SQL Server 不可能在每个表中拥有多个 Identity 列。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-20T19:52:55.557

标识列是数据库表中的一列（也称为字段）：-

1.  唯一标识表中的每一行
2.  由数据库生成的值组成

这很像 Microsoft Access 中的自动编号字段或 Oracle 中的序列。

标识列与主键的不同之处在于它的值由服务器管理并且（除了极少数情况）不能修改。在许多情况下，标识列用作主键，但并非总是如此。

SQL Server 使用标识列作为键值来引用特定的行。所以只能创建一个标识列。此外，如果没有明确声明标识列，Sql server 会在内部存储一个单独的列，其中包含每行的键值。如前所述，如果您希望多个列具有唯一值，则可以使用 UNIQUE 关键字。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-05-21T07:25:38.680

因为 MS 意识到超过 80% 的用户只希望每个表有一个自动增量列，并且有第二个（或更多）的解决方法很简单，即创建一个 IDENTITY 种子 = 1，增量 = 1 然后计算列将自动生成的值乘以一个因子以更改增量并添加一个偏移量以更改种子。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2011-02-22T12:04:23.817

是的，Sequences 允许多个身份，例如 atable 中的列，但这里存在一些问题。在典型的开发场景中，我看到开发人员在列中手动插入有效值（假设是通过序列插入）。稍后当一个序列尝试向表中插入值时，它可能由于唯一键冲突而失败。

此外，在多开发人员/多供应商场景中，开发人员可能对多个表使用相同的序列（因为序列未链接到表）。这可能会导致其中一个表中的值缺失。即 tableA 可能会得到值 1，而 tableB 可能会使用值 2，而 tableA 会得到 3。这意味着 tableA 将有 1 和 3（缺少 2）。

除此之外，还有另一种情况，您有一个每天都会被截断的表。由于序列与 table 没有任何链接，因此截断的表将继续使用 Seq.NextVal 再次（除非您手动重置序列），从而在一段时间后导致缺失值甚至更危险的算术溢出错误。

由于上述原因，我觉得 Oracle 序列和 SQL 服务器标识列都适合它们的用途。我更喜欢 oracle 实现标识列的概念和 SQL Server 实现序列概念，以便开发人员可以根据他们的要求实现两者中的任何一个。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-20T19:44:22.457

标识列的全部目的是它将包含表中每一行的唯一值。那么为什么在任何给定的表中都需要不止一个呢？

如果您确实需要多个问题，也许您需要澄清您的问题。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-05-20T19:46:16.897

标识列用于唯一标识表的单行。如果您希望其他列是唯一的，您可以为您可能需要的每个“身份”列创建一个 UNIQUE 索引。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2009-05-20T20:32:11.783

我一直认为这是对 SQL Server 的任意和不好的限制。是的，您只希望一个标识列实际标识一行，但有正当的理由希望数据库为数据库中的多个字段自动生成一个数字。

这就是 Oracle 中序列的好处。它们没有绑在桌子上。您可以使用多个不同的序列在同一个表中填充任意数量的字段。您*也*可以让多个表共享相同的序列，尽管这可能是一个非常糟糕的决定。但关键是你可以。它更细化，并为您提供更大的灵活性。

序列的坏处在于您必须编写代码来实际递增它们，无论是在您的插入语句中还是在表上的插入触发器中。SQL Server 标识的好处在于，您所要做的就是更改属性或在表创建中添加关键字，然后就完成了。

# objective-c - 注册 Cocoa 共享软件

> ID：889861
> 
> 赞同：13
> 
> 时间：2009-05-20T19:43:52.767
> 
> 标签：objective-c, cocoa, macos, shareware

保护 Cocoa 共享软件应用程序免受软件盗版的最佳方法是什么？是否有用于此任务的开发人员库/工具？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-05-20T19:49:22.103

[Allan Odgaard - 使用 openssl 作为许可证密钥](http://sigpipe.macromates.com/2004/09/05/using-openssl-for-license-keys/)是一种方法。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2009-05-20T21:47:45.233

[AquaticPrime](http://www.aquaticmac.com/)是一个简单易用的 Cocoa 许可框架。它使用安全签名的 plist 作为它的“许可证密钥”，这使得将任意信息嵌入许可证变得简单。

使用 AquaticPrime 时，通常会将许可证分发为一个小文件，而不是作为文本字符串，这可能对您的应用程序有利或不利。

该框架包括在 C#、Carbon、Cocoa、PHP、Python、Ruby 和 STL 中生成许可证的代码。它还包括一个 GUI 一次性许可证生成器。我的经验非常好。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-05-22T12:37:13.080

说到 Wil Shipley，他已将他的应用内支付和注册框架以[Golden % Braeburn](http://www.golden-braeburn.com/)的名义提供许可。我相信[Delicious Library](http://delicious-monster.com/)和[SousChef](http://acaciatreesoftware.com/)都使用了这个框架。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-05-20T20:38:43.920

让我们看看这里。

自制方法：

*   [常见的对策](http://lipidity.com/apple/shareware-licensing-techniques/)
*   [序列化](http://www.codehackers.net/blog/?p=14)

推荐的服务解决方案：

*   [水上运动](http://www.aquaticmac.com/)
*   [eSellerate](http://www.esellerate.net/) - 还处理交易处理

此列表绝不是全面的，而只是简要提及一些流行的选择。显然，他们只能绕开盗版，因此在应该投入多少时间方面显然存在妥协。我还建议谷歌搜索 Wil Shipley（美味应用程序）关于为什么开发人员不应该竭尽全力防止盗版的想法。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-05-26T04:01:58.833

不要忘记阅读一些破解 Cocoa 应用程序的常用方法。警惕方法调配和输入管理器。您不必竭尽全力保护您的应用程序 - 破解者总是会超越您 - 但也不要天真！

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-05-20T22:43:36.120

我可以推荐的不错的解决方案是药水商店（来自药水工厂）和可可豆类（来自 gleb dolgich）。他们提供代码生成和验证以及销售您的应用程序的实际商店

两者都是开源的

# nhibernate - NHibernate - LazyLoad 一对零

> ID：889862
> 
> 赞同：1
> 
> 时间：2009-05-20T19:43:58.930
> 
> 标签：nhibernate, fluent-nhibernate, nhibernate-mapping

我正在为 NHibernate 及其延迟加载而苦苦挣扎。

我有一个简化的结构，但它显示了我的问题。

```
Class Shift {
 int ShiftID;
 DateTime ShiftStart;
 Employee Employee;
}

Class Employee {
 int EmployeeID;
 string Name;
} 
```

数据：

```
 ShiftData
 ID                         SHIFTTIME       EmployeeID (int)
 1                           12:00                  0
 2                           13:00                  1
 3                           14:00                  0                           
 4                           13:00                  3

Employees
ID                         NAME
1                           Morten
2                           Peter
3                           Henrik 
```

我的班次加载策略是使用 Join，这样当我加载班次时，NHibernate 会自动执行左连接以获取客户。这非常适用于附有员工的班次，但是有些班次还没有任何员工。

当我尝试在加载班次后访问此类班次的员工时，它会导致另一个针对数据库的 SELECT（通过使用您的 NHProfiler 发现）为什么会发生这种情况？

希望你有一个答案我真的坚持这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-20T20:44:29.200

我的猜测是，发生这种情况是因为没有员工的班次将有一个空的`Employee`代理。NHibernate 看到空代理并尽职尽责地尝试从数据库加载数据。

至于解决方案，查看您的映射确实会有所帮助。但是，您可以尝试确保关系设置了 fetch="join" 属性或关闭此关系的延迟加载。

# c# - WCF 中使用 LINQ、C#、VS2008 的连接字符串

> ID：889876
> 
> 赞同：0
> 
> 时间：2009-05-20T19:47:11.653
> 
> 标签：c#, linq, wcf

我添加了一个带有适当连接字符串和有效凭据的 DBML 文件。我记录了托管 SQL 服务器的 VPN，我想测试我的 WCF 服务，如果它找不到数据库会引发什么错误。

```
public List<Users> GetName(strinng UserEmail)
{

  var dbResult = from u in Users
                 where u.email.Equals(UserEmail)
                 select {v.Firstname, v.LastName, v.Zip};

  //Build List<Users>
  return List<users>;
} 
```

说上面是我的方法之一。在调用无法访问我的数据库的方法时，我没有看到任何错误被抛出。如何检查连接是否有效以及数据库是否存在？

我假设 DBML.cs 文件将确保在 cstor 中进行此检查

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-20T20:15:48.493

当我尝试执行 ToList() 时，我的小测试失败了（这是因为 LINQ 的延迟执行）。当无法建立连接时，我得到了一个 SqlException ......花了一点时间让异常返回，但它不可避免地发生了。

这是我的小测试 LINQ 代码：

```
TestDataContext con = new TestDataContext();
        var users = from user in con.Users
                    select user;
        //failed on this line...
        IList<User> faUsers = users.ToList(); 
```

我的测试是我刚刚关闭了我的 Sql Server 实例。

如果您正在谈论从该 webmethod 调用的客户端进行调试，则与 webmethod 的连接可能在 web 服务和数据库服务器之间的连接之前超时......这可能是您的超时异常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-20T20:09:07.430

即使这不是您的问题，您也可以通过以下方式使您的方法更简单（未经测试）：

```
 var dbResult = from u in db.Users
                 where u.email.Equals(UserEmail)
                 select new User() 
                 {
                     FirstName = u.Firstname, 
                     LastName = u.LastName, 
                     Zip = u.Zip
                 };

  return dbResult.ToList(); 
```

//更新：更改了从原始问题复制的错别字

# iphone - 如何在 iPhone 模拟器中关闭慢动作？

> ID：889881
> 
> 赞同：16
> 
> 时间：2009-05-20T19:48:45.833
> 
> 标签：iphone, ios-simulator

我不知道是不是因为我使用的是 Mighty Mouse 还是什么，但是我在使用 iPhone 模拟器时总是不小心打开了慢动作。我怎么关掉它？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2015-07-13T08:02:24.357

更新：`version 11.3`（2019 年 12 月）工作正常。

我有 iOS 模拟器`version 8.3`（Xcode 6），新的快捷方式是`command ⌘</kbd> + `T` to toggle "Slow Animations"`

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2009-05-21T07:04:51.080

在 beta 5 之前，它是三班制。苹果改变（或破坏）看到[这个问题](https://devforums.apple.com/message/68736#68736)（没有答案）。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2010-08-06T20:24:40.290

如上所述，我刚刚安装了“slowmo”，它可以在 3.2 模拟器上运行。我花了一段时间才弄清楚如何启用它。您必须在模拟器的硬件菜单中选中“模拟硬件键盘”，然后快速连续按 Mac 的 shift 键 3 次以打开/关闭它。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-07-27T08:21:40.253

我认为，在 iOS 8 及更高版本中，它是`Cmd`+`T`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-20T20:04:13.960

我不完全确定，但我注意到在菜单中切换“演示模式”有时会奏效，有时不会。我也不完全确定是否真的有慢动作功能，或者这是否是模拟器中的错误。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2010-01-15T16:11:04.617

[您可以从http://mschrag.github.com/](http://mschrag.github.com/)下载“slowmo”以重新启用慢动作功能，允许您在模式之间切换。

我在 iPhone Simulator 3.1 (139.1) 上对其进行了测试，它仍然有效。

运行下载中的 slowmo.sh 脚本，然后快速连续按 shift 3 次。

# .net - 如何在 NHibernate 中使用具有枚举属性的 ICriteria

> ID：889884
> 
> 赞同：2
> 
> 时间：2009-05-20T19:49:01.277
> 
> 标签：.net, nhibernate, search, enums, criteria

您好我想写一个 FindByExample(object o) 方法。所以我尝试了这个：

```
public IList<T> FindByExample(T o)
{
    return Session.CreateCriteria(typeof(T)).Add(Example.Create(o)).List<T>();
} 
```

（它在一个通用类中）

它应该可以正常工作，但是如果 T 具有枚举类型的属性，则会引发此异常：“NHibernate.Criterion.SimpleExpression 中的类型不匹配：EnumProperty 预期类型 System.Int32，实际类型 EnumType”

映射是这样的：

`<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2" ...>`

`<class name="OrdenDeCompra" table="ordenDeCompra" lazy="false">`

```
<id name="Id" column="id_ordenDeCompra" type="Int32">
  <generator class="increment" />
</id>

...

<property name="EnumType" column="id_enum" 
          type="Int32" not-null="true" />
... 
```

`</class>` `</hibernate-mapping>`

如何按 Enum 进行搜索？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-05-20T20:08:19.973

将枚举的映射类型从 Int32 更改为枚举的类型。

```
<property name="EnumType" column="id_enum" 
          type="namespace.here.enumTypeName, assemblyname" not-null="true" /> 
```

编辑：枚举的整数值仍将作为 int 存储在数据库中。

# c# - 标签尺寸变化

> ID：889891
> 
> 赞同：0
> 
> 时间：2009-05-20T19:50:52.147
> 
> 标签：c#, vb.net

我有一个标签，其内容由 while 循环显示。当我在标签中显示文本时，它会正确显示。有时几分钟，相同的文本会显示在相同的标签中，并且控件中文本的大小会发生变化。

这是代码：

```
//Form_Load :

Thread t = new Thread(displaySentences);
t.Start();

//display sentences:
void displaySentences()
{
    while(true)
    {
       if(i>=5)
          i=0;

       label4.Text = textarray[i];
       i++;

    }

} 
```

第一次迭代中的文本大小（i=0）与第二次迭代中标签控件中的文本大小不同。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-20T20:01:37.990

你不想自动调整大小吗？将 autosize 属性设置为 false。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-20T20:18:11.887

我会在其他地方寻找修改 label4 对象属性的东西。

旁注 - 你真的应该产生一个线程并让那个线程与 UI 混淆吗？Chris Sells 写了一系列文章，解释了为什么这是一个坏主意。

# c# - 从具有相同属性的另一个对象创建对象

> ID：889895
> 
> 赞同：2
> 
> 时间：2009-05-20T19:51:51.690
> 
> 标签：c#, .net

我在 C# 中有一个对象，可以说 20 个属性，它是数据合同的一部分。我还有另一个具有类似属性的业务实体，我想从响应对象中填充它。除了将一个对象的每个属性分配给另一个对象的相应属性之外，还有其他方法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-20T19:53:21.923

是的，看看[Automapper](http://www.lostechies.com/blogs/jimmy_bogard/archive/2009/01/22/automapper-the-object-object-mapper.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-20T20:13:20.383

[MiscUtil](http://www.yoda.arachsys.com/csharp/miscutil/)对此 ( `PropertyCopy`) 有一个答案，它使用`Expression`(.NET 3.5) 和一个静态字段来缓存已编译的委托（因此每次调用的成本可以忽略不计）：

```
DestType clone = PropertyCopy<DestType>.CopyFrom(original); 
```

如果您使用的是 2.0，那么反射可能是您的朋友。如果需要，您可以使用它[`HyperDescriptor`](http://www.codeproject.com/KB/cs/HyperPropertyDescriptor.aspx)来提高性能。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-20T19:54:47.833

如果您想以自动方式进行反射，则可以选择反射，前提是属性名称可以在对象之间轻松映射。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-20T20:00:06.557

Automapper 值得一试，但最后，我认为它不适合我。**这类工具的最大问题是每次**发生映射时都会产生大量的运行时开销。[上周](https://stackoverflow.com/questions/870656/object-to-object-mapping-utility)我问了同样的问题，最后我推出了自己的解决方案（查看接受的答案）。你可以自由修改我提供的源代码，我不声称它的有效性、适用性、性能、你打破它你得到保持碎片等，但它工作得很好为我创建设计时对象到对象的映射。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-20T19:54:14.587

[C# Object Clone Wars](http://www.csharp411.com/c-object-clone-wars/)可能是一个很好的起点。

# python - python中函数的准确计时

> ID：889900
> 
> 赞同：63
> 
> 时间：2009-05-20T19:52:35.077
> 
> 标签：python, testing, time, profiling

我在 windows 上用 python 编程，想准确测量函数运行所需的时间。我写了一个函数“time_it”，它接受另一个函数，运行它，然后返回它运行的时间。

```
def time_it(f, *args):
    start = time.clock()
    f(*args)
    return (time.clock() - start)*1000 
```

我调用了 1000 次并取平均值。（最后的 1000 常数是以毫秒为单位给出答案。）

这个函数似乎可以工作，但我有一种烦人的感觉，我做错了什么，而且通过这种方式，我使用的时间比函数运行时实际使用的时间要多。

有没有更标准或可接受的方式来做到这一点？

当我将测试函数更改为调用打印以使其花费更长的时间时，我的 time_it 函数返回平均 2.5 毫秒，而 cProfile.run('f()') 返回平均 7.0 毫秒。我认为我的函数会高估时间，如果有的话，这里发生了什么？

还有一点需要注意的是，我关心的是功能之间的相对时间，而不是绝对时间，因为这显然会因硬件和其他因素而异。

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2009-05-20T19:55:45.910

使用 Python 标准库中的[`timeit`模块](http://docs.python.org/library/timeit.html)。

基本用法：

```
from timeit import Timer

# first argument is the code to be run, the second "setup" argument is only run once,
# and it not included in the execution time.
t = Timer("""x.index(123)""", setup="""x = range(1000)""")

print t.timeit() # prints float, for example 5.8254
# ..or..
print t.timeit(1000) # repeat 1000 times instead of the default 1million 
```

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2009-05-20T19:55:39.733

我建议您不要编写自己的分析代码，而是查看内置的 Python 分析器（`profile`或`cProfile`，取决于您的需要）：[http ://docs.python.org/library/profile.html](http://docs.python.org/library/profile.html)

* * *

## 回答 #3

> 赞同：35
> 
> 时间：2013-08-30T08:12:23.817

你可以像这样创建一个“timeme”装饰器

```
import time                                                

def timeme(method):
    def wrapper(*args, **kw):
        startTime = int(round(time.time() * 1000))
        result = method(*args, **kw)
        endTime = int(round(time.time() * 1000))

        print(endTime - startTime,'ms')
        return result

    return wrapper

@timeme
def func1(a,b,c = 'c',sleep = 1):
    time.sleep(sleep)
    print(a,b,c)

func1('a','b','c',0)
func1('a','b','c',0.5)
func1('a','b','c',0.6)
func1('a','b','c',1) 
```

* * *

## 回答 #4

> 赞同：24
> 
> 时间：2009-05-20T20:21:00.900

这段代码非常不准确

```
total= 0
for i in range(1000):
    start= time.clock()
    function()
    end= time.clock()
    total += end-start
time= total/1000 
```

此代码不太准确

```
start= time.clock()
for i in range(1000):
    function()
end= time.clock()
time= (end-start)/1000 
```

如果函数的运行时间接近时钟的精度，那么非常不准确的会受到测量偏差的影响。大多数测量的时间只是 0 到几个时钟滴答之间的随机数。

根据您的系统工作负载，您从单个函数观察到的“时间”可能完全是操作系统调度和其他不可控开销的产物。

第二个版本（不太准确）的测量偏差较小。如果您的函数真的很快，您可能需要运行 10,000 次以减少操作系统调度和其他开销。

当然，两者都具有极大的误导性。程序的运行时间——作为一个整体——不是函数运行时间的总和。您只能使用这些数字进行相对比较。它们不是传达很多意义的绝对测量值。

* * *

## 回答 #5

> 赞同：15
> 
> 时间：2013-08-30T07:33:17.070

如果你想为 python 方法计时，即使你测量的块可能会抛出，一个好的方法是使用`with`语句。将某个`Timer`类定义为

```
import time

class Timer:    
    def __enter__(self):
        self.start = time.clock()
        return self

    def __exit__(self, *args):
        self.end = time.clock()
        self.interval = self.end - self.start 
```

然后，您可能想要对可能抛出的连接方法进行计时。采用

```
import httplib

with Timer() as t:
    conn = httplib.HTTPConnection('google.com')
    conn.request('GET', '/')

print('Request took %.03f sec.' % t.interval) 
```

`__exit()__`即使连接请求失败，也会调用方法。更准确地说，如果它抛出，你会使用`try` `finally`它来查看结果，就像

```
try:
    with Timer() as t:
        conn = httplib.HTTPConnection('google.com')
        conn.request('GET', '/')
finally:
    print('Request took %.03f sec.' % t.interval) 
```

[更多细节在这里。](http://preshing.com/20110924/timing-your-code-using-pythons-with-statement)

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2014-02-18T16:45:21.840

这个更整洁

```
from contextlib import contextmanager

import time
@contextmanager
def timeblock(label):
    start = time.clock()
    try:
        yield
    finally:
        end = time.clock()
        print ('{} : {}'.format(label, end - start))

with timeblock("just a test"):
            print "yippee" 
```

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2016-12-08T05:52:13.253

类似于@AlexMartelli 的回答

```
import timeit
timeit.timeit(fun, number=10000) 
```

可以做到这一点。

# winapi - 用户可以直接在 Microsoft Vista 上与服务交互吗？

> ID：889920
> 
> 赞同：1
> 
> 时间：2009-05-20T19:55:46.130
> 
> 标签：winapi, windows-services, windows-vista, winlogon

在 Microsoft 网站上（请参阅[msdn.microsoft.com/en-us/library/ms683502(VS.85).aspx](http://msdn.microsoft.com/en-us/library/ms683502(VS.85).aspx)），它清楚地表明“服务无法直接与 Windows Vista 中的用户交互”。

所以我决定使用“psexec -s cmd.exe”来测试它。据我所知，“psexec”会创建一个服务以打开命令提示符。不用说它奏效了。然后我决定将“EnumWinSta GUI”与 psexec 结合使用来切换到 winlogon 桌面。令我惊讶的是，我什至可以在这个桌面上启动“cmd.exe”。这是否意味着从服务创建的新流程可以是交互式的？

还是因为 psexec 做了某种黑魔法？如果是这样，它是如何做到的？

我正在尝试将服务中的全屏窗口显示到 Vista 和 XP 中的 winlogon 桌面对象中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-20T19:58:22.600

在服务中运行的代码不能直接与交互式会话进行交互。

但是，作为具有足够权限的服务运行的代码可以创建一个在特定用户桌面内运行的新进程——例如，获取交互式会话的用户令牌并调用 CreateProcessAsUser。

您可以使用 WTSGetActiveConsoleSessionId 获取活动控制台会话，即实际在机器上的用户的会话。然后可以使用 WTSQueryUserToken 来获取令牌。

您的服务还可以在其处理函数中使用会话更改通知来查看用户何时登录/注销、解锁他们的会话等。

# google-maps - Google Maps Tiles - 如何将 30k 坐标划分为图块

> ID：889921
> 
> 赞同：3
> 
> 时间：2009-05-20T19:56:30.730
> 
> 标签：google-maps, maps, google-maps-markers, cluster-analysis

是否可以有效地将 30k（并且还在增长）或更多坐标划分为 Google 地图上的图块？

我的目标是索引所有坐标 - 分配给一个图块，然后为每个缩放级别定义一个图块大小。

在客户端，标记管理器将对每个图块进行聚类（理想情况下，该图块的点数少于 200）

新坐标将自动分配给特定的图块。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-20T19:58:52.240

你会想要[一个四叉树](http://en.wikipedia.org/wiki/Quadtree)。

> 四叉树是一种树数据结构，其中每个内部节点最多有四个子节点。四叉树最常用于通过递归地将二维空间细分为四个象限或区域来划分二维空间。

# iphone - iPhone - UITextView 的问题

> ID：889925
> 
> 赞同：6
> 
> 时间：2009-05-20T19:57:34.143
> 
> 标签：iphone, keyboard, uitextview

这可能是一件容易的事，但我就是想不通 - 我如何结束编辑文本视图？如何让键盘消失？还是我必须在它外面点击才能让它消失？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-05-21T06:54:35.183

首先，像这样一个（说实话）相当简单的问题让我想知道您是否尝试过阅读文档或在互联网上搜索。

搜索“Apple 文档 UITextView”会为您提供该类文档的[链接。](http://developer.apple.com/iPhone/library/documentation/UIKit/Reference/UITextView_Class/index.html)同样，[这里是](http://developer.apple.com/iphone/library/documentation/uikit/reference/UITextViewDelegate_Protocol/index.html)UITextViewDelegate 的文档。

搜索“UITextView 简单示例”会为您提供这个[有用的示例](http://iphoneincubator.com/blog/tag/uitextview)。

搜索“UITextView 关闭键盘”，第一次点击似乎[准确地回答了您的问题](http://iphonedevelopertips.com/cocoa/how-to-dismiss-the-keyboard-when-using-a-uitextview.html)。（尽管他在返回键上关闭了键盘，这可能不是您想要的。）（编辑-从您的第二条评论看来，这正是您想要的。）

PS上面的人是正确的，如果有点简洁（可以理解）。你需要实现一个 UITextViewDelegate。在该委托中，如果您想在返回键上隐藏键盘，请实现 shouldChangeTextInRange，查找 @"\n" 并在收到第一响应者时辞职。或者，在您的 UI 中添加“完成编辑”按钮，并在用户按下它时退出第一响应者。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-20T20:01:24.840

好简单：

```
[myTextField resignFirstResponder]; 
```

会成功的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-08T06:58:04.853

一种结束编辑的方法，在 textView 外部点击，并不是完全简单的。选择其他文本视图或文本字段或激活导航控件将触发...

```
- (void)textViewDidEndEditing:(UITextView *)textView 
```

...在您指定为 textView 代表的任何对象上。您可以通过调用...自己触发此操作

```
- (BOOL)endEditing:(BOOL)force 
```

...在包含您的文本字段的视图上。

假设我在 UITableViewCell 内（在 UITable 内）有一个 UITextView。我想通过点击表格来结束编辑。我可以这样做：

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    UITapGestureRecognizer *tapRecognizer = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(didTapTable)];
    [[self tableView] addGestureRecognizer:tapRecognizer];
    [tapRecognizer release];
}

- (void)didTapTable
{
    [[self tableView] endEditing:YES];
} 
```

现在，每当我点击我的表格时，我都会结束编辑。而且，正如其他人所说，`textViewDidEndEditing`我应该一定要打电话`[textView resignFirstResponder];`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-20T20:01:34.697

```
[yourTextField resignFirstResponder]; 
```

将使键盘消失并结束编辑。

# sql - INNER 和 LEFT OUTER 加入帮助

> ID：889926
> 
> 赞同：1
> 
> 时间：2009-05-20T19:57:37.063
> 
> 标签：sql, sql-server, sql-server-2005

假设我有 3 张桌子。表A、表B、表C

我需要操作 INNER JOIN 后可用的记录集。

```
Set 1 -> TableA INNER JOIN TableB
Set 2 -> TableC INNER JOIN TableB 
```

无论 Set 2 是否为空，我都需要 Set 1 ( `LEFT OUTER JOIN`)。

所以本质上，我正在尝试编写一个查询并且已经走到了这一步

```
SELECT *
  FROM TableA 
       INNER JOIN TableB ON ...
       LEFT OUTER JOIN (TableC INNER JOIN TableB) 
```

我将如何在 SQL Server 中编写代码？

编辑：实际上，我想做的是加入多个表。如果我需要连接多个表，例如：OUTER JOIN OF（TableA 和 TableB 的 INNER JOIN）和（TableC 和 TableD 的 INNER JOIN）注意：等式中有一个新的 TableD，您的响应将如何变化

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-20T20:00:28.100

```
 SELECT * FROM TableA 
       INNER JOIN TableB ON TableB.id = TableA.id
       LEFT JOIN TABLEC ON TABLEC.id = TABLEB.id 
```

我不知道您要使用哪些列，但就是这么简单

编辑：查看您的编辑，您似乎对 Joins 的实际作用感到困惑。在我上面写的示例中，您将收到以下结果。

Columns -> 您将获得 TableA、TableB 和 TableC 的所有列

行-> 您将从 tableA 中的所有行开始。接下来，您将从 TableA 中删除在表 B 中没有匹配“id”的所有行。（如果 TableA 和 TableB 之间不是 1:1 关系，您将有重复项）。

现在，如果您从上面获取结果，您将匹配 TableC 中与 TableB.id 列匹配的任何记录。上面没有匹配 TableC 记录的任何行都将为结果中 TableC 中的所有列获得空值。

建议- 我敢打赌，这对你来说只有一部分是有意义的，但我的建议是你开始写一些查询，预测结果，然后看看你的预测是否正确，看看你是否理解它在做什么。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-20T20:10:36.613

你想要的不是 JOIN 而是 UNION。

```
SELECT * FROM TableA INNER JOIN TableB ON ...
UNION
SELECT * FROM TableC INNER JOIN TableD ON ... 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-20T20:13:36.983

实际上，您可以像在数学方程式中那样为您的联接添加排序：(5 + 4) * (3 + 1)。

鉴于你问题的第二部分，试试这个：

```
SELECT
     <your columns>
FROM
     (TableA INNER JOIN Table B ON <join criteria for A to B>)
LEFT OUTER JOIN
     (TableC INNER JOIN Table D ON <join criteria for C to D>) ON
     <join criteria for AxB to CxD> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-20T20:00:12.453

```
Select * from ((((TableA a inner join TableB b on a.id = b.id) 
                left outer join TableC c on b.id = c.id)
                full outer join TableD d on c.id = d.id)
                right outer join TableE e on e.id = d.id)
                /* etc, etc... */ 
```

如果你愿意，你可以丢掉括号。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-20T20:11:33.540

您没有给出您的连接条件或解释这些表是如何关联的，因此如何简化这一点并不明显。

```
SELECT a.a_id, b1.b_id b1_id, b2_id, bc.c_id
FROM TableA a JOIN TableB b1 on a.b_id = b1.b_id
LEFT JOIN (SELECT c.c_id, b2.b_id b2_id
    FROM TableC c JOIN TableB b2 ON c.b_id = b2.b_id
  ) bc ON bc.c_id = a.c_id; 
```

查看您的最新编辑，您可以执行以下操作：

```
SELECT <columns>
FROM (SELECT <columns> FROM TableA JOIN TableB ON <A-B join conditions>)
           LEFT JOIN
           (SELECT <columns> FROM TableC JOIN TableD ON <C-D join conditions>)
           ON <AB-CD join conditions> 
```

虽然您实际上并不需要内部投影，但可以这样做：

```
SELECT <columns>
FROM (TableA a JOIN TableB b ON <A-B join conditions>)
           LEFT JOIN
           (TableC c JOIN TableD d ON <C-D join conditions>)
           ON <AB-CD join conditions> 
```

其中 AB-CD 连接条件直接用 a、b、c、d 等列编写。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-20T20:00:32.517

尝试这个..

```
SELECT *
  FROM TableA              a 
       INNER JOIN TableB   b ON a.id=b.id
       LEFT OUTER JOIN (SELECT *
                            FROM TableC            c
                                INNER JOIN TableD  d on c.id=d.id
                       ) dt on b.id=dt.id 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-05-20T20:05:19.747

假设我理解您的问题，我认为这就是您的要求：

```
SELECT * 
FROM TableA INNER JOIN TableB on TableA.JoinColumn = TableB.JoinColumn
LEFT OUTER JOIN TableC on TableB.JoinColum = TableC.JoinColumn
INNER JOIN TableD on TableC.JoinColumn = TableD.JoinColumn 
```

请注意，用于连接 A 和 B 的 JoinColumn 不一定必须与用于连接 B 和 C 的列相同，对于 C 和 D 以此类推。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-05-20T20:20:23.553

既然您使用的是 Sql Server，为什么不创建对您有帮助的视图呢？在一个巨大的 Sql 语句中填充所有内容可能会变得难以阅读。示例视图可能如下所示：

```
create view AandB
as
select *
from A
inner join B on B.aid = A.aid 
```

CandD 也是如此。然后您可以使用简单的 Sql 检索可选连接：

```
select *
from AndB
left outer join CandD on AndB.cid = CandD.cid 
```

如果您对这两个集合中的行感兴趣，则可以进行完全联接：

```
select *
from AndB
full outer join CandD on AndB.cid = CandD.cid 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-05-21T05:22:53.647

```
SELECT *
  FROM TableA A
 INNER JOIN TableB B  ON B.?? = A.??  AND ...
  LEFT JOIN TableC C  ON C.?? = B.??  AND ...
  LEFT JOIN TableB B2 ON B2.?? = C.?? AND ...
  LEFT JOIN TableD D  ON D.?? = C.??  AND ... 
```

所以事情是这样的：从逻辑上讲，连接实际上并不是在特定表之间，它们是在一个表和“集合”的其余部分（连接和表）之间。因此，虽然***您***知道 C 和 B2 之间或 C 和 D 之间存在一对一的关系，但您不能 INNER JOIN 到 C 因为 C 可能从它的 LEFT JOIN 到 B 为空，这将消除这些行，有效地撤消您的左连接。

所以基本上，任何与左外连接的表的连接也必须是左外连接。这有意义吗？

# amazon-web-services - 使用 Windows AMI 的 Amazon EC2 和 EBS

> ID：889927
> 
> 赞同：1
> 
> 时间：2009-05-20T19:57:46.517
> 
> 标签：amazon-web-services, amazon-ec2, amazon-ebs

我将我们的应用程序放在 EC2（Windows 2003 x64 服务器）上，并附加了多达 7 个 EBS 卷。该应用程序对存储的 I/O 非常密集——通常我们使用带有 NTFS 挂载点的 DAS（通常大约 32 个挂载点，每个挂载点为 1TB 驱动器）所以我尝试使用 EBS 复制它，但 I/O 速率很差，如最高 22MB/秒。我们怀疑 EBS 的 NIC 卡（如果我没看错的话是动态 SAN）正在限制管道。我们的应用程序主要使用流媒体访问磁盘（不是随机的），所以对我们来说，当我们与磁盘控制器交谈和直接处理 IO 的方式很少时，它会更好地工作。

此外，当我创建一个卷并附加它时，我看到它出现在实例中（很好），然后我把它变成一个指向我的挂载点的动态磁盘，然后快速格式化它——当我这样做时，所有数据都在音量被抹去？因为当我将它附加到另一个 AMI 时，它看起来确实如此。我肯定错过了什么。

我很好奇是否有人有将 IO 密集型应用程序放在 EC2 云上的经验，如果有的话，设置卷的最佳方法是什么？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-20T20:13:28.340

我的经验有限，但我注意到一件小事：

初始写入通常比后续写入慢。

因此，如果您将大量数据流式传输到磁盘，例如写入日志，这可能会咬到您。但是，如果你用数据填充一个大文件，并对它进行大量随机访问 I/O，那么在第二次写入任何特定位置时它会变得更好。

# encoding - 哪种编码使用 \x（反斜杠 x）前缀？

> ID：889941
> 
> 赞同：55
> 
> 时间：2009-05-20T20:01:09.003
> 
> 标签：encoding, internationalization

我正在尝试解码以**\x**为前缀的某些“特殊字符”的文本。我手工制定了以下映射：

```
\x28   (
\x29   )
\x3a   :

e.g. 12\x3a39\x3a03 AM 
```

有谁知道这种编码是什么？

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2009-05-20T20:03:19.280

它是[ASCII](http://en.wikipedia.org/wiki/ASCII)。所有出现的四个字符`\xST`都转换为 1 个字符，其 ASCII 码为`ST`（以[十六进制表示](http://en.wikipedia.org/wiki/Hexadecimal)），其中`S`和`T`为`0123456789abcdefABCDEF`.

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2009-05-20T20:10:05.210

该`'\xAB'`符号用于 C、C++、Perl 和其他从 C 中汲取灵感的语言，作为在字符串中间表示十六进制字符代码的一种方式。

`'\007'`当反斜杠后面有数字时，符号表示使用八进制表示字符代码。

在 C99 及更高版本中，您还可以使用`\uabcd`and`\U00abcdef`将 Unicode 字符编码为十六进制（需要 4 和 8 个十六进制数字；其中的前两个十六进制数字`\U`必须`0`是有效的，并且通常第三个数字`0`也是有效的 -`1`是唯一的另一个有效值）。

请注意，在 C 中，八进制转义符最多限制为 3 位，但十六进制转义符不限于 2 位或 3 位；十六进制转义在第一个不是十六进制数字的字符处结束。在问题中，序列是`"12\x3a39\x3a03"`。这是一个包含 4 个字符的字符串：`1`、`2`和。用于 4 位十六进制字符的实际值是实现定义的。为了达到预期的结果（用来表示冒号），代码必须使用字符串连接：`\x3a39``\x3a03``\x3A``:`

```
"12\x3a" "39\x3a" "03" 
```

现在包含 8 个字符：`1`, `2`, `:`, `3`, `9`, `:`, `0`, `3`.

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2020-07-11T21:50:10.120

我使用[Cyber​​Chef 来做](https://gchq.github.io/CyberChef/)这类事情。

如果您[将它放在输入字段中并将 Magic](https://gchq.github.io/CyberChef/#recipe=Magic(3,false,false,%27%27)&input=XHgyOFx4MjlceDNh)从收藏夹列表拖到配方中，它会告诉您转换并且您可以使用[From_Hex 配方和 \x 分隔符](https://gchq.github.io/CyberChef/#recipe=From_Hex(%27%5C%5Cx%27)&input=XHgyOFx4MjlceDNh)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-20T20:33:37.457

我猜你正在处理的是一个 unicode 字符串，它的编码方式与它发送到的输出流不同。IE。将 utf-16 字符串输出到 latin-1 设备。在这种情况下，某些字符将作为转义值输出，以避免向输出设备发送控制字符或错误字符。这至少发生在python中。

# sharepoint - 在 sharepoint 上共享公共数据

> ID：889951
> 
> 赞同：0
> 
> 时间：2009-05-20T20:04:13.383
> 
> 标签：sharepoint

我有大量项目列表，项目日期包括预计日期和实际日期。我想与我们的内部团队分享所有日期和所有项目，但希望将我们的外部承包商的访问权限限制为他们公司被分配完成的那些项目。我尝试使用文件夹和权限管理内容，但发现因为我的公司没有访问 2007，所以该功能没有完全启用。有没有人知道我该怎么做？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-21T21:07:37.570

几个事实

*   设置权限和文件夹在 Access 2007 中没有任何作用。
*   您不能仅将自定义列表中的文件夹与文档库和表单库一起使用

在您的场景中，最好的选择是为每个项目拥有自定义的项目级别权限：

1.  手动检查[这个](http://office.microsoft.com/en-us/sharepointserver/HA100215641033.aspx#10)
2.  要自动执行此操作，您应该使用 SharePoint Designer 创建工作流。这是一个活动[来做到这一点](http://spdactivities.codeplex.com/Wiki/View.aspx?title=Grant%20Permission%20on%20Item)。

如果您只有几个项目，请手动执行，否则配置工作流程来执行此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-22T04:08:23.370

您可以将 dataview webpart 添加到外部公司*可以*访问的任何站点。每个 webpart 都可以配置为过滤它们由元数据字段负责的信息。

# sql-server - 基于 SSRS 报告中的另一个参数动态更改参数

> ID：889954
> 
> 赞同：1
> 
> 时间：2009-05-20T20:04:18.313
> 
> 标签：sql-server, reporting-services, ssrs-2008, business-intelligence

我们有一份报告称，在 SSRS 的 2005 版中，我们可以从另一个报告参数（下拉列表）动态更新一个参数（文本框）。每次下拉列表更改时，文本框都会更新。没问题。现在在 2008 年，它只发生在我们第一次预览报告时（换句话说，文本框由下拉更新）。如果我将文本框更改为下拉菜单，它可以工作。但是如果我将它改回文本框（即我不再将可用值设置为无），文本框只会在第一次预览时更新。

以前有人遇到过这个问题吗？请帮忙。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-08-08T00:35:16.473

如果似乎没有必要，SQL Server 2008 SSRS 并不总是更新报表上的每个参数。参数Advanced-->Refresh data when the parameter changes下有一个属性。默认值为“自动确定何时刷新”。对于您的情况，您可能需要将参数属性更改为“始终刷新”。

# javascript - 在正则表达式 javascript 中转义问号

> ID：889957
> 
> 赞同：100
> 
> 时间：2009-05-20T20:04:51.557
> 
> 标签：javascript, regex, literals

我认为这是一个简单的问题。

我正在尝试使用 JavaScript 中的正则表达式在另一个字符串中搜索字符串的出现，如下所示：

```
 var content ="Hi, I like your Apartment. Could we schedule a viewing? My phone number is: ";

 var gent = new RegExp("I like your Apartment. Could we schedule a viewing? My", "g");

 if(content.search(gent) != -1){   
     alert('worked');     
 } 
```

由于角色的原因，这不起作用`?`....我尝试用 逃避它`\`，但这也不起作用。有没有另一种方式来使用`?`字面而不是作为特殊字符？

* * *

## 回答 #1

> 赞同：164
> 
> 时间：2009-05-20T20:08:09.037

你需要用两个反斜杠转义它

```
\\? 
```

有关更多详细信息，请参见：

[http://www.trans4mind.com/personal_development/JavaScript/Regular%20Expressions%20Simple%20Usage.htm](http://www.trans4mind.com/personal_development/JavaScript/Regular%20Expressions%20Simple%20Usage.htm)

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2009-05-20T20:09:50.860

您应该使用双斜杠：

```
var regex = new RegExp("\\?", "g"); 
```

为什么？因为在 JavaScript`\`中也用于转义字符串中的字符，所以："\?" 变成：`"?"`

，`"\\?"`变成 `"\?"`

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2009-05-20T20:14:08.760

您可以用斜杠而不是引号分隔正则表达式，然后用一个反斜杠来转义问号。试试这个：

```
var gent = /I like your Apartment. Could we schedule a viewing\?/g; 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2016-02-02T07:26:36.493

只要您有一个*已知*模式（即您不使用变量来构建 RegExp），请使用*文字*正则表达式表示法，您只需要使用*单个*反斜杠来转义特殊的正则表达式元字符：

```
var re = /I like your Apartment\. Could we schedule a viewing\?/g;
                               ^^                            ^^ 
```

每当您需要动态构建 RegExp 时，请使用*`RegExp`构造函数表示法*，其中您必须使用*双反斜杠来表示文字反斜杠*：

```
var questionmark_block = "\\?"; // A literal ?
var initial_subpattern = "I like your Apartment\\. Could we schedule a viewing"; // Note the dot must also be escaped to match a literal dot
var re = new RegExp(initial_subpattern + questionmark_block, "g"); 
```

如果您使用`String.raw`字符串文字，您可以`\`按原样使用（请参阅使用模板字符串文字的示例，您可以将变量放入正则表达式模式）：

```
const questionmark_block = String.raw`\?`; // A literal ?
const initial_subpattern = "I like your Apartment\\. Could we schedule a viewing";
const re = new RegExp(`${initial_subpattern}${questionmark_block}`, 'g'); // Building pattern from two variables
console.log(re); // => /I like your Apartment\. Could we schedule a viewing\?/g
```

必读：[*RegExp：*](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp) MDN 上的描述。

# algorithm - 坚持解决最小生成树问题

> ID：889961
> 
> 赞同：3
> 
> 时间：2009-05-20T20:06:11.133
> 
> 标签：algorithm, graph, minimum-spanning-tree

我已将问题简化为在图中找到最小生成树。但我想再有一个约束，即*每个顶点的总度数不应超过某个常数因子*。如何建模我的问题？MST是错误的路径吗？你知道任何可以帮助我的算法吗？

还有一个问题：我的图有重复的边权重，所以有没有办法计算唯一 MST 的数量？有没有算法可以做到这一点？

谢谢你。

编辑：按度数，我的意思是连接顶点的边的总数。重复边权重是指两条边具有相同的权重。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-20T22:43:42.827

好吧，很容易证明可能没有解决方案：只需使您的输入图成为一棵树，其顶点的度数高于您的限制..

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-21T14:55:02.097

加里约翰逊把这个问题简化为汉密尔顿:(所以这个有帮助。近似第一个：[http](http://caislab.icu.ac.kr/Lecture/data/2003/spring/ice514/project/m03.ppt) ://caislab.icu.ac.kr/Lecture/data/2003/spring/ice514/project/m03.ppt 但是，更好工作模型受到赞赏...

计数： http: [//mathworld.wolfram.com/SpanningTree.html](http://mathworld.wolfram.com/SpanningTree.html)。据此，mathematica 有一个功能。这个有什么建议吗？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-06-09T04:33:03.353

本文展示了如何在多项式时间内找到最大度数为 d + 1 的生成树，该生成树至少与*任何*最大度数为 d 的生成树一样好：[http ://www.andrew.cmu.edu/user/mohits /mbdst.pdf](http://www.andrew.cmu.edu/user/mohits/mbdst.pdf)

//Edit 原始链接当前处于非活动状态，请尝试[http://research.microsoft.com/pubs/80193/mbdst.pdf](http://research.microsoft.com/pubs/80193/mbdst.pdf)。

# jquery - jQuery .load() 调用不会在加载的 HTML 文件中执行 JavaScript

> ID：889967
> 
> 赞同：85
> 
> 时间：2009-05-20T20:07:50.723
> 
> 标签：jquery, ajax, safari

这似乎是仅与 Safari 相关的问题。我已经在 Mac 上尝试了 4，在 Windows 上尝试了 3，但仍然没有运气。

我正在尝试加载一个外部 HTML 文件并让嵌入的 JavaScript 执行。

我尝试使用的代码是这样的：

```
$("#myBtn").click(function() {
    $("#myDiv").load("trackingCode.html");
}); 
```

`trackingCode.html`看起来像这样（现在很简单，但会扩展一次/如果我得到这个工作）：

```
<html>
<head>
    <title>Tracking HTML File</title>
    <script language="javascript" type="text/javascript">
        alert("outside the jQuery ready");
        $(function() {
            alert("inside the jQuery ready");
        });
    </script>
</head>

<body>
</body>
</html> 
```

我在 IE (6 & 7) 和 Firefox (2 & 3) 中都看到了警报消息。但是，我无法在 Safari 中看到消息（我需要关注的最后一个浏览器 - 项目要求 - 请不要进行激烈的战争）。

关于为什么 Safari 忽略`trackingCode.html`文件中的 JavaScript 有什么想法吗？

最终，我希望能够将 JavaScript 对象传递给该`trackingCode.html`文件以在 jQuery 就绪调用中使用，但我想确保在我走这条路之前，这在所有浏览器中都是可能的。

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2009-05-20T20:10:42.853

您正在将整个 HTML 页面加载到您的 div 中，包括 html、head 和 body 标记。如果您执行加载并且在您加载的 HTML 中只包含打开脚本、关闭脚本和 JavaScript 代码，会发生什么情况？

这是驱动程序页面：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"> 
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <title>jQuery Load of Script</title>
        <script type="text/javascript" src="http://www.google.com/jsapi"></script>
        <script type="text/javascript">
            google.load("jquery", "1.3.2");
        </script>
        <script type="text/javascript">
            $(document).ready(function(){
                $("#myButton").click(function() {
                    $("#myDiv").load("trackingCode.html");
                });
             });
         </script>
    </head>
    <body>
        <button id="myButton">Click Me</button>
        <div id="myDiv"></div>
    </body>
</html> 
```

以下是 trackingCode.html 的内容：

```
<script type="text/javascript">
    alert("Outside the jQuery ready");
    $(function() {
        alert("Inside the jQuery ready");
    });
 </script> 
```

这在 Safari 4 中对我有用。

更新：添加了 DOCTYPE 和 html 命名空间以匹配我的测试环境中的代码。使用 Firefox 3.6.13 测试，示例代码有效。

* * *

## 回答 #2

> 赞同：42
> 
> 时间：2010-11-22T21:47:35.990

```
$("#images").load(location.href+" #images",function(){
    $.getScript("js/productHelper.js"); 
}); 
```

* * *

## 回答 #3

> 赞同：25
> 
> 时间：2011-09-07T07:11:18.317

[John Pick](https://stackoverflow.com/questions/889967/jquery-load-call-doesnt-execute-javascript-in-loaded-html-file/7251380#7251380)之前的另一个版本的解决方案，这对我来说很好：

```
jQuery.ajax({
   ....
   success: function(data, textStatus, jqXHR) {
       jQuery(selecteur).html(jqXHR.responseText);
       var reponse = jQuery(jqXHR.responseText);
       var reponseScript = reponse.filter("script");
       jQuery.each(reponseScript, function(idx, val) { eval(val.text); } );
   }
   ...
}); 
```

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2010-02-23T22:07:50.910

我意识到这是一篇较旧的帖子，但对于任何来到此页面寻找类似解决方案的人......

[http://api.jquery.com/jQuery.getScript/](http://api.jquery.com/jQuery.getScript/)

> ```
> jQuery.getScript( url, [ success(data, textStatus) ] ) 
> ```
> 
> *   *`url`*- 包含请求发送到的 URL 的字符串。
>     
>     
> *   *`success(data, textStatus)`*- 请求成功时执行的回调函数。
>     
>     
> 
> ```
> $.getScript('ajax/test.js', function() {
>   alert('Load was performed.');
> }); 
> ```

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2010-06-28T23:51:13.937

如果您将 HTML 字段加载到动态创建的元素中，这似乎不起作用。

```
$('body').append('<div id="loader"></div>');
$('#loader').load('htmlwithscript.htm'); 
```

我查看了 firebug DOM，根本没有脚本节点，只有 HTML 和我的 CSS 节点。

有人遇到过这个吗？

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2009-08-03T11:38:31.750

在 trackingCode.html 中对此进行测试：

```
<script type="text/javascript">

    $(function() {

       show_alert();

       function show_alert() {
           alert("Inside the jQuery ready");
       }

    });
 </script> 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2010-11-12T15:50:44.200

我为html加载功能编写了以下jquery插件：[http ://webtech-training.blogspot.in/2010/10/dyamic-html-loader.html](http://webcache.googleusercontent.com/search?q=cache:X2zk3N56u6YJ:webtech-training.blogspot.in/2010/10/dyamic-html-loader.html%20&cd=1&hl=hu&ct=clnk&gl=ro#!http://webtech-training.blogspot.com/2010/10/dyamic-html-loader.html)

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2011-08-31T00:38:40.637

你几乎明白了。告诉 jquery 你只想加载脚本：

```
$("#myBtn").click(function() {
    $("#myDiv").load("trackingCode.html script");
}); 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2018-08-21T18:22:47.780

我遇到了脚本会加载一次的地方，但重复调用不会运行脚本。

事实证明，使用 .html() 显示等待指示器然后在其后链接 .load() 是一个问题。

```
// Processes scripts as expected once per page load, but not for repeat calls
$("#id").html("<img src=wait.gif>").load("page.html"); 
```

当我对它们进行单独调用时，我的内联脚本每次都按预期加载。

```
// Without chaining html and load together, scripts are processed as expected every time
$("#id").html("<img src=wait.gif>");
$("#id").load("page.html"); 
```

为了进一步研究，请注意有两个版本的 .load()

一个简单的 .load() 调用（在 url 后没有选择器）只是使用 dataType:"html" 调用 $.ajax() 并获取返回内容并调用 .html() 将这些内容放入 DOM 的简写. 并且 dataType:"html" 的文档明确指出“包含的脚本标签在插入 DOM 时进行评估”。[http://api.jquery.com/jquery.ajax/](http://api.jquery.com/jquery.ajax/) 所以 .load() 正式运行内联脚本。

复杂的 .load() 调用有一个选择器，例如 load("page.html #content")。当以这种方式使用时，jQuery 会故意过滤掉脚本标签，如本文所述：[https](https://forum.jquery.com/topic/the-load-function-and-script-blocks#14737000000752785) ://forum.jquery.com/topic/the-load-function-and-script-blocks#14737000000752785 在这种情况下，脚本永远不会跑，一次也没有。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2020-11-17T15:16:00.823

如果您想同时加载 HTML 和脚本，这里有一种更自动化的方法，可以同时使用`$(selector).load()`和`jQuery.getScript()`. 此特定示例从 加载 ID 为“toLoad”的元素的 HTML 内容`content.html`，将 HTML 插入 ID 为“content”的元素中，然后加载并运行 ID 为“toLoad”的元素中的所有脚本。

```
$("#content").load("content.html #toLoad", function(data) {
    var scripts = $(data).find("script");

    if (scripts.length) {
        $(scripts).each(function() {
            if ($(this).attr("src")) {
                $.getScript($(this).attr("src"));
            }
            else {
                eval($(this).html());
            }
        });
    }

}); 
```

此代码查找正在加载的内容中的所有脚本元素，并循环遍历这些元素中的每一个。如果元素有`src`属性，也就是说它是来自外部文件的脚本，我们使用`jQuery.getScript`获取和运行脚本的方法。如果元素没有`src`属性，意味着它是一个内联脚本，我们只需使用它`eval`来运行代码。如果它没有找到脚本元素，它只会将 HTML 插入到目标元素中，并且不会尝试加载任何脚本。

我已经在 Chrome 中测试了这个方法，它可以工作。请记住在使用时要小心`eval`，因为它可能会运行潜在的不安全脚本并且通常被认为是有害的。您可能希望在使用此方法时避免使用内联脚本，以避免必须使用`eval`.

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2010-06-14T03:22:56.697

好吧，我遇到了似乎只发生在 Firefox 上的相同问题，除了 .load() 之外，我无法使用其他 JQuery 命令，因为我正在修改现有 PHP 文件的前端......

无论如何，在使用 .load() 命令之后，我将我的 JQuery 脚本嵌入到正在加载的外部 HTML 中，并且它似乎可以工作。我不明白为什么我在主文档顶部加载的 JS 不适用于新内容......

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2013-05-20T02:34:28.893

我能够通过更改`$(document).ready()`为`window.onLoad()`.

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2020-05-07T14:36:09.550

附上@efreed 的答案...

我曾经`.load('mypage.html #theSelectorIwanted')`通过选择器从页面调用内容，但这意味着它不会执行内部的内联脚本。

相反，我能够更改我的标记，使其`'#theSelectorIwanted'`成为它自己的文件，我使用

```
load('theSelectorIwanted.html`, function() {}); 
```

它运行内联脚本就好了。

不是每个人都有这个选择，但这是一个快速的解决方法，可以到达我想要的地方！

# coldfusion - 在回发时在 ColdFusion 中保留 type="file" 的输入值

> ID：889968
> 
> 赞同：2
> 
> 时间：2009-05-20T20:07:51.237
> 
> 标签：coldfusion

我在 ColdFusion 中有一个表单，最初有 5 个用于文件上传的输入字段。如果用户在附加它们的过程中意识到他们有超过 5 个文件要上传，我希望表单在提交自己以更改字段数时保留这些值。

使用`<cfform>`带有 preservedata="yes" 属性的标签应该可以实现这一点 - 但我得到的只是重新提交时存储在输入值中的临时值，该值不显示在字段中，也不适用于提交。

**编辑：** 感谢大家的精彩回答，你们都提供了帮助并且是正确的。我能够实施亚当建议的解决方案。效果很好！谢谢！

```
function changeFieldCount()  // javascript function for submit on input count change
 {
  var count = document.forms[0].numtotal.options[document.forms[0].numtotal.selectedIndex].value;
   document.forms[0].action = "me.cfm?count=" + count;
   document.forms[0].submit();
 } 
```

* * *

```
<cfparam name="url.count" default="5">

<cfform name="dispfiles" method="post" enctype="multipart/form-data" preservedata="yes">
  <!--- looping for file input fields --->
  <cfloop index="counter" from="1" to="#url.count#">
    <cfinput type="file" name="file#counter#" size="50" maxlength="60"><br>
  </cfloop>

  <br>Number of Files to Attach: 
  <!--- looping for # of input selection--->
  <cfselect name="numtotal">
    <cfloop index="cnt" from="1" to="20" step="1">
        <cfoutput>
        <option value="#cnt#" <cfif #cnt# eq #url.count#>selected</cfif>>
            #cnt#
        </option>
        </cfoutput>
    </cfloop>
  </cfselect>

   <cfinput type="button" name="op-display" value="Display" onclick="changeFieldCount()">
   <cfinput type="button" name="op-upload" value="Attach Files" onclick="submitfrm(this.form)">
   <cfinput type="button" name="cancel" value="  Cancel  " onclick="window.close()">
</cfform> 
```

* * *

这是我在查看结果提交的源代码时得到的结果：

```
<input name="file1" id="file1"  type="file" value=".../cfusion.war/neotmp8858718543274653167.tmp" maxlength="60"  size="50"  /><br> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-21T12:33:06.737

出于安全原因，这是所有浏览器的设计。您无法插入文件字段的值。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-21T17:15:46.883

要详细说明@SpliFF 的答案，您需要做的是使用 JavaScript 动态创建更多文件字段。

这是一个使用[jQuery](http://www.jquery.com/)使 JavaScript 变得更简单的示例。我还使用了一个变量来跟踪显示的文件字段的数量，以便它们的名称都附加一个唯一的数字，从而可以在服务器端循环和唯一地识别它们。

```
<script type="text/javascript" 
src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"></script>

<script type="text/javascript">
    //track the current number of file fields displayed
    var numUploadFields = 5;
    //attach an anonymous function to the button to add more fields
    $(function(){
        $("#add5").click(function(){
            for (var i = 0; i < 5; i++){
                numUploadFields += 1;
                var newHTML = "<br/><input type='file' name='upload" +
                              numUploadFields + "' />";
                $("#someSection").append(newHTML);
            }
        });
    });
</script>

<form method="post" action="">
    <div id="someSection">
        <input type="file" name="upload1" /><br/>
        <input type="file" name="upload2" /><br/>
        <input type="file" name="upload3" /><br/>
        <input type="file" name="upload4" /><br/>
        <input type="file" name="upload5" />
    </div>
    <input type="button" id="add5" value="Add 5 more file fields" />
</form> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-21T12:40:32.993

使用 JS DOM 方法构建额外的文件输入。由于您没有离开页面，因此速度很快，不会丢失任何内容。

# python - 是否可以使用 sqlite3 格式化日期？

> ID：889974
> 
> 赞同：0
> 
> 时间：2009-05-20T20:08:58.863
> 
> 标签：python, sqlite, date

一开始你有一个字符串'DDMMYYYY HHMMSS'，我想在最后将字符串插入到sqlite3数据库的日期字段中。该程序是用python制作的。我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-20T20:20:00.497

即使“.schema”表明该字段是日期或时间戳字段......该字段实际上是一个字符串。您可以随意格式化字符串。如果没记错的话……他们根本就没有验证。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-20T20:21:04.957

我相信 sqlite3 没有 DATE 类型，因此您必须在 python 代码中手动完成。要么以这种形式存储日期，要么将其转换为时间戳或其他形式。

看看[datetime 模块](http://docs.python.org/library/datetime.html)，尤其是`strptime`函数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2011-01-27T20:40:13.300

如其他答案所示，它存储为字符串。但是，如果您以下列格式之一插入它，**它将被识别为日期**

时间字符串

时间字符串可以是以下任何一种格式：

```
 1\. YYYY-MM-DD
 2\. YYYY-MM-DD HH:MM
 3\. YYYY-MM-DD HH:MM:SS
 4\. YYYY-MM-DD HH:MM:SS.SSS
 5\. YYYY-MM-DDTHH:MM
 6\. YYYY-MM-DDTHH:MM:SS
 7\. YYYY-MM-DDTHH:MM:SS.SSS
 8\. HH:MM
 9\. HH:MM:SS
10\. HH:MM:SS.SSS
11\. now
12\. DDDDDDDDDD 
```

**参考：**

* * *

[日期和时间函数](http://www.sqlite.org/lang_datefunc.html)

# c# - SWF 不会更改其通过 jQuery 和 C# 3.0 动态更改的文本

> ID：889977
> 
> 赞同：0
> 
> 时间：2009-05-20T20:09:40.393
> 
> 标签：c#, jquery, xml, flash

我在 ASP.NET MVC (C#) 和 jQuery 中有一个网页，其中有一个 SWF 文件，它从 xml 文件中读取其内容。为了渲染这个 SWF，我已经尝试过 jQuery Flash 插件、jQuery Media 和`swfobject`.

在同一页面中，有一个输入文本，我在其中写了一条消息，该文本将通过 AJAX 加载到 SWF。文本将保存到 XML 文件中，在 AJAX“成功”选项上，我清空呈现 SWF 的 div 并使用 SWF 再次加载到该 div 中，但文本已更改。

第一次，文字变了。但是当我第二次尝试更改它时，SWF 中的文本根本没有改变。SWF 会重新加载，但文本不会更改。如果我查看 XML 文件，无论我尝试插入文本多少次，它都会使用我插入的文本进行更新。

我认为这是一个缓存问题。我不知道。我试过清空渲染闪光灯的 div。我也已经尝试删除 div 并再次插入，但似乎没有任何效果。

我已经试过了`meta content=no-cache`，但也没有用。

有谁知道如何解决这个问题？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-20T20:18:46.660

当您将 XML 文件加载到 flash 中时，在文件名的末尾放置一个随机查询字符串，因此它最终会像 my_XML.xml?r=123456

尽管在 swf 中刷新数据似乎是一种稍微复杂的方式——但您不能直接用 javascript 传递它是有原因的吗？

# git - 将 git repo 升级到某个版本

> ID：889984
> 
> 赞同：8
> 
> 时间：2009-05-20T20:10:59.047
> 
> 标签：git

我有一个 git repo 和一个修订代码，我希望它可以让我的本地克隆到。我怎样才能把它带到一个特定的版本并摆脱我所做的任何更改？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-05-20T20:15:14.267

签出您想要处理的分支。在日志中找到您想要的修订，然后执行：

```
$ git reset --hard abcd93 
```

abcd93是您在日志中找到的任何版本*。*但请注意，这将更改分支指针。

通常最好生成一个新分支，因此请考虑

```
$ git checkout abcd93 -b new_branch_name 
```

# iphone - 在 cocos2d 中触摸？

> ID：889990
> 
> 赞同：0
> 
> 时间：2009-05-20T20:12:52.727
> 
> 标签：iphone, sdk, cocos2d-iphone

cocos2d的问题？？

如何更改触摸类型？往下看

```
image = [MenuItemImage itemFromNormalImage:@"image1.png" selectedImage:@"image2.png" target:self selector:@selector(step1:)];
    Menu *menu = [Menu menuWithItems:image, nil];
    image.position = cpv( -135, -185);
    [self addChild: menu z:2] 
```

step1 是定义为稍后在代码中执行某些操作的 void。我的问题不是 step1 不起作用，我的问题是当用户触摸内部按钮时 step1 会发生。当用户按下内部按钮时，我希望它能够工作。谢谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-30T18:06:17.643

MenuItem 目前无法响应“触摸开始”，并且被硬编码为仅响应“触摸结束”。

在 Menu.m 中，从第 105 行开始，您将看到 ccTouchesBegan 声明。

如果你想修改 Menu 的当前行为，你可以像这样子类化它：

```
@interface MenuDown: Menu
{
}
@end

@implementation MenuDown
-(BOOL)ccTouchesBegan:(UITouch *)touches withEvent:(UIEvent *)event {
    [self ccTouchesBegan:touches withEvent: event];
    if(item) { [item unselected]; [item activate]; }
}
@end 
```

这是未经测试的，但基本上......我刚刚从 ccTouchesEnded 中的 Menu.m 中获取了一些代码，并将其复制到新的 MenuDown 类的 ccTouchesBegan 的覆盖版本中。

然后，您将菜单定义为：

```
MenuDown *menu = [MenuDown menuWithItems: image, nil]; 
```

这 - 应该 - 给你一个来自 Cocos2D MenuItem 的 'react on touch started' 响应......

然而，这并不是真正的建议......因为我看不出你为什么希望“按钮”响应触摸，而不是“最终操作”......正如它所写的那样，当前菜单允许用户按下，然后滑下...取消菜单选择动作。

Menu/MenuItem 不打算用作“触摸反应对象”（即，实际游戏对象），如果这是您尝试做的事情的话。

# regex - 查找和替换字符串中的模式

> ID：889992
> 
> 赞同：0
> 
> 时间：2009-05-20T20:12:56.110
> 
> 标签：regex, perl

我的弦

```
(champs1 (champs6 donnee_o donnee_f) [(champs2 [] (champs3 _YOJNJeyyyyyyB (champs4 donnee_x)) (debut 144825 25345) (fin 244102 40647)), (champs2 [] (champs3 _FuGNJeyyyyyyB (champs4 donnee_z)) (debut 796443 190570) (fin 145247 42663))] [] []). 
```

（为了可读性而注释）：

```
(champs1 
     (champs6 donnee_o donnee_f) 
     [(champs2 [] 
          (champs3 _YOJNJeyyyyyyB (champs4 donnee_x)) 
          (debut 144825 25345)
          (fin 244102 40647)
       ), 
      (champs2 [] 
          (champs3 _FuGNJeyyyyyyB (champs4 donnee_z)) 
          (debut 796443 190570) 
          (fin 145247 42663)
     )] 
     [] 
     []
). 
```

在上面的字符串中，我想分别用这些值替换整数值：

```
$moyLargRectNom, $moyHautRectNom, $moyLargRectNom, 
$moyHautRectNom, $moyLargRectMat, $moyHautRectMat, 
$moyLargRectMat, $moyHautRectMat 
```

**我在字符串中有 8 个值要替换。**

这是我的正则表达式

```
$ligne =~ s{
    (.*debut) \s\d+ \s\d+
    (.*fin)   \s\d+ \s\d+
    (.*debut) \s\d+ \s\d+
    (.*fin)   \s\d+ \s\d+
    (.*)
}{
    $1 . $moyLargRectNom . 
    $2 . $moyHautRectNom . 
    $3 . $moyLargRectNom . 
    $4 . $moyHautRectNom . 
    $5 . $moyLargRectMat . 
    $6 . $moyHautRectMat . 
    $7 . $moyLargRectMat . 
    $8 . $moyHautRectMat . 
    $9
}xe; 
```

它根本不会替换值；谁能帮帮我？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-20T21:55:06.607

sprintf 进行救援：

```
#!/usr/bin/perl

use strict;
use warnings;

my $s = <<EO_TXT;
(champs1 (champs6 donnee_o donnee_f) [(champs2 [] 
(champs3 _YOJNJeyyyyyyB (champs4 donnee_x)) (debut 144825 25345) 
(fin 244102 40647)), (champs2 [] (champs3 _FuGNJeyyyyyyB 
(champs4 donnee_z)) (debut 796443 190570) (fin 145247 42663))] [] []).
EO_TXT

my ( 
    $moyLargRectNom, $moyHautRectNom, 
    $moyLargRectMat, $moyHautRectMat, 
) = map { "val$_" } qw( 1 2 3 4 );

my @replacements = (
    $moyLargRectNom, $moyHautRectNom,
    $moyLargRectNom, $moyHautRectNom,
    $moyLargRectMat, $moyHautRectMat,
    $moyLargRectMat, $moyHautRectMat,
);

$s =~ s/\b[0-9]+\b/%s/g; # replace %s with the appropriate specifier
$s = sprintf $s, @replacements;

print $s, "\n"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-20T20:35:16.410

试试这个尺寸：

```
my @numbers = ($moyLargRectNom, $moyHautRectNom, $moyLargRectNom, $moyHautRectNom, $moyLargRectMat, $moyHautRectMat, $moyLargRectMat, $moyHautRectMat);
my @temp = split / /, $ligne;
for(@temp) {
  if(/^\W*\d\W*$/) {
    my $num = shift @numbers;
    s/\d+/$num/;
  }
}
$ligne = join " ", @temp; 
```

这会`@temp`根据 中的“单词”（大约）创建一个列表`$ligne`。它创建了另一个列表 ，`@numbers`它是您要在列表中替换的数字的列表，按照您希望它们替换事物的顺序。然后它`@temp`一个接一个地遍历，如果给定的元素是一个数字（即匹配正则表达式`/^\W*\d\W*$/`，这意味着它没有单词字符（所以它不是“champs4”）并且至少有一个数字 - 这将匹配"25346)" 和 "25346")，然后将数字部分替换为 中的第一个值`@numbers`。现在我已经对其进行了测试，我可以向您保证这确实有效！

我相信使用 可以实现更短的实现`map`，但这对您来说已经足够好了。

这种方法对您的方法的优点：

首先，该解决方案是可扩展的。要用您的解决方案替换超过八个数字，您需要编写一个新的正则表达式。要用我的解决方案替换八个以上的数字，只需在`@numbers`. 这段代码可以放入一个子程序中，该子程序需要一个要更改的字符串和一个要更改的数字列表，您不必担心它们是否传递了正确数量的数字，或者它们是否具有正确的格式。

其次，粗略一看，这更容易理解。只要您使用的是正则表达式，就很难在视觉上解析。即使它有效，总有一天有人可能需要改变你的代码来做一些不同的事情。如果你使用一个巨大的正则表达式，重写者（可能是你）会简单地摇头，突出显示你的代码，然后按删除，然后编写新代码来完成它。有了这个，他们可以很容易地看到你的代码中发生了什么，如果他们需要对其进行修改，他们可以。

第三，如果你想硬编码指定数量的替换，你也可以这样做：

```
my @numbers = ($moyLargRectNom, $moyHautRectNom, $moyLargRectNom, $moyHautRectNom, $moyLargRectMat, $moyHautRectMat, $moyLargRectMat, $moyHautRectMat);
my @temp = split / /, $ligne;
my $max_replacements = 8;
for(@temp) {
  if(/^\W*\d\W*$/) {
    my $num = shift @numbers;
    s/\d+/$num/;
    last unless --$max_replacements;
  }
}
$ligne = join " ", @temp; 
```

作为旁注（较早应用，但仍然适用），这将在浮点数上失败 -`/^\W*\d\W*$/`将匹配浮点数，但`s/\d+/$num/`不会替换浮点数，仅替换整数部分。如果您发现需要浮点数，请更改此行：

```
s/\d+/$num/; 
```

对此：

```
s/\d+|(?:\d+)?\.\d+/$num/; 
```

那应该匹配浮点数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-20T20:35:29.623

你的做法似乎与我相反。即我会查找数字并替换它们，而不是你正在做的事情，即匹配数字周围的东西并将它们替换为字符串。

总是有 8 个值吗？他们会永远遵循同样的话吗？如果是这样：

```
.+?debut\s([\d]+)\s([\d]+).+?fin\s([\d]+)\s([\d]+).+?debut\s([\d]+)\s([\d]+).+?fin\s([\d]+)\s([\d]+) 
```

或者可以在任何地方首次亮相和鳍出现，并且无论何时您想要替换它们：

首次亮相 xy -> 首次亮相 $moyLargRectNom, $moyHautRectNom, fin xy -> fin $moyLargRectNom, $moyHautRectNom, (debut 144825 25345) (fin 244102 40647)

如果这是真的，只需使用两个简单的正则表达式即可：

```
debut\s([\d]+)\s([\d]+)
fin\s([\d]+)\s([\d]+) 
```

并用单词替换组..

但我不记得哪个变量存储了创建的组数，抱歉。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-21T00:44:43.567

我认为您的结构太不规则或太奇怪，不适合正则表达式，嵌套表达式很少。

所以我去寻找解析树。没有找到适合的，也没有理解任何正式的解析语法，我编写了自己的标记器/状态机。

它将您的代码转换为数据树，然后您可以使用简单的循环结构提取该数据树。

**请注意**，代码仅适用于迄今为止提供的小型数据集，不平衡的括号会给解析器带来麻烦并产生无用的树。

**浏览到底部以了解如何使用此 blob**

```
#!/usr/bin/perl 

use strict;
use warnings;
use version;
use Data::Dumper;
our $VERSION = qv('0.1');

my @stack;

my $data = <<'EOF';
(champs1 
     (champs6 donnee_o donnee_f) 
     [(champs2 [] 
          (champs3 _YOJNJeyyyyyyB (champs4 donnee_x)) 
          (debut 144825 25345)
          (fin 244102 40647)
       ), 
      (champs2 [] 
          (champs3 _FuGNJeyyyyyyB (champs4 donnee_z)) 
          (debut 796443 190570) 
          (fin 145247 42663)
     )] 
     [] 
     []
)
EOF

push @stack,
  {
    tokens  => [],
    context => 'void',
  };

my $state;

my $eaten;
my $str = $data;

sub eat
{
    my $n = shift;
    substr( $str, 0, $n, '' );
}

while ( @stack && $str )
{
    $state = $stack[-1];
    my @tokens  = @{ $stack[-1]->{tokens} };
    my $context = $stack[-1]->{context};

    if ( $str =~ m{(^[\s,]+)} )
    {
        eat length($1);
        next;
    }
    if ( $str =~ m{(^\w+)} )
    {
        eat length($1);
        push @{ $stack[-1]->{tokens} }, $1;
        next;
    }
    if (    $str =~ m{^\[}
        and $context eq 'nest'
        || $context  eq 'nestgroup'
        || $context  eq 'array' )
    {
        eat 1;
        print "\e[33m[\e[0m";
        push @stack,
          {
            tokens  => [],
            context => 'array',
          };

        next;
    }

    if ( $str =~ m{^\]} and $context eq 'array' )
    {
        eat 1;
        print "\e[33m]\e[0m";
        pop @stack;
        push @{ $stack[-1]->{tokens} }, \@tokens;
        next;
    }

    if (
        $str =~ m{^\((champs(\d)|debut|fin)\s}
        and (  $context eq 'nest'
            || $context eq 'array'
            || $context eq 'nestgroup'
            || $context eq 'void' )
      )
    {
        eat length($1) + 1;
        $stack[-1]->{nodename} = $1;
        print "\e[32m($1\e[0m";
        push @stack,
          {
            tokens  => [],
            context => 'nestgroup',
          };
        next;
    }
    if ( $str =~ m{^\)} and $context eq 'nestgroup' )
    {
        eat 1;
        print "\e[32m)\e[0m";
        pop @stack;
        my $nodename = $stack[-1]->{nodename};
        push @{ $stack[-1]->{tokens} }, { $nodename, \@tokens };
        next;
    }
    if ( $str =~ m{^\(} )
    {
        eat 1;
        print "\e[31m(\e[0m";
        push @stack,
          {
            tokens  => [],
            context => 'nest',
          };
        next;
    }
    if ( $str =~ m{^\)} and $context eq 'nest' )
    {
        eat 1;
        print "\e[31m)\e[0m";
        pop @stack;
        push @{ $stack[-1]->{tokens} }, \@tokens;
        next;
    }

    print substr( $str, 0, 1 ), "\e[34m$context\e[0m";
    eat 1;
}

$Data::Dumper::Indent = 1;
$Data::Dumper::Terse  = 1;

print "Tree:\n";
print Dumper( $state->{tokens}->[0]->{champs1}->[1] );

print "--------";
for ( @{ $state->{tokens}->[0]->{champs1}->[1] } )
{
    my @data = @{ $_->{champs2} };
    print ">", Dumper( $data[2], $data[3] );
} 
```

输出：

```
(champs1(champs6)[(champs2[](champs3(champs4))(debut)(fin))(champs2[](champs3(champs4))(debut)(fin))][][])
Tree:
[
  {
    'champs2' => [
      [],
      {
        'champs3' => [
          '_YOJNJeyyyyyyB',
          {
            'champs4' => [
              'donnee_x'
            ]
          }
        ]
      },
      {
        'debut' => [
          '144825',
          '25345'
        ]
      },
      {
        'fin' => [
          '244102',
          '40647'
        ]
      }
    ]
  },
  {
    'champs2' => [
      [],
      {
        'champs3' => [
          '_FuGNJeyyyyyyB',
          {
            'champs4' => [
              'donnee_z'
            ]
          }
        ]
      },
      {
        'debut' => [
          '796443',
          '190570'
        ]
      },
      {
        'fin' => [
          '145247',
          '42663'
        ]
      }
    ]
  }
]
--------
>{
  'debut' => [
    '144825',
    '25345'
  ]
}
{
  'fin' => [
    '244102',
    '40647'
  ]
}
>{
  'debut' => [
    '796443',
    '190570'
  ]
}
{
  'fin' => [
    '145247',
    '42663'
  ]
} 
```

# iphone - 需要/想要将 NSError** 作为参数传递给 performSelector

> ID：889998
> 
> 赞同：3
> 
> 时间：2009-05-20T20:13:54.767
> 
> 标签：iphone, objective-c, selector

我想调用具有通常 NSError** 参数的方法的选择器：

```
-(int) getItemsSince:(NSDate *)when dataSelector:(SEL)getDataSelector error:(NSError**)outError  {
    NSArray *data = nil;
    if([service respondsToSelector:getDataSelector]) {
        data = [service performSelector:getDataSelector withObject:when withObject:outError];
        // etc. 
```

...编译器不喜欢的：

```
warning: passing argument 3 of 'performSelector:withObject:withObject:' from incompatible pointer type 
```

有什么办法可以绕过将指针封装在一个对象中？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2009-05-20T20:30:32.800

查看[NSInvocation](http://developer.apple.com/DOCUMENTATION/Cocoa/Reference/Foundation/Classes/NSInvocation_Class/Reference/Reference.html#//apple_ref/occ/cl/NSInvocation)，它可以让您以更灵活的方式“执行选择器”。

这里有一些代码可以帮助您入门：

```
if ([service respondsToSelector:getDataSelector]) {
    NSArray *data;
    NSInvocation *invocation = [NSInvocation invocationWithMethodSignature:
        [service methodSignatureForSelector:getDataSelector]];
    [invocation setTarget:delegate];
    [invocation setSelector:getDataSelector];
    // Note: Indexes 0 and 1 correspond to the implicit arguments self and _cmd, 
    // which are set using setTarget and setSelector.
    [invocation setArgument:when atIndex:2]; 
    [invocation setArgument:outError atIndex:3];
    [invocation invoke];
    [invocation getReturnValue:&data];
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-20T20:29:23.037

NSError** 不是一个对象 (id)，performSelector 对每个 withObject 参数都需要它。您可以访问 NSInvocation，但如果这只是您想要使用的一条消息，那似乎需要做很多工作。尝试定义一个中间选择器方法，该方法将您包装的 NSError** 作为 arg 在一个对象中，并让该方法对其执行 performSelector （我认为这可能是您在问题结束时的意思？）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-20T20:22:20.787

我不是很肯定，但您可能想看看使用 an[`NSInvocation`](http://developer.apple.com/DOCUMENTATION/Cocoa/Reference/Foundation/Classes/NSInvocation_Class/Reference/Reference.html)而不是`-performSelector:withObject:withObject`. 由于`NSInvocation`接受 type 的参数`void*`，它可以/应该让你设置任何你想要的作为参数。

与简单的调用相比，它需要多行代码`performSelector:`，但它可能比将指针包装在对象中更方便。