# StackOverflow 问答 10134000-10134999

# php - 数组获取空集时出错

> ID：10134001
> 
> 赞同：0
> 
> 时间：2012-04-13T01:06:32.360
> 
> 标签：php, jquery, arrays, json

**更新的问题：** `print_r($_POST);`在我在框中键入内容后，在 php 文件输出中。

```
Array
(
    [q] => running
) 
```

打印`json_encode($jsonArray);`但是正在打印`[]`

为绑定参数查询兴趣表的php

```
 $interestValue = $_POST['interestVal']; //////
    $dbh->setAttribute( PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION );  
    $sth = $dbh->prepare(
'SELECT interestID, interestVal FROM Interest WHERE interestVal = ?');
    $sth->bindParam(1, $interestValue);
    $sth->execute();
    $jsonArray = array();
    while ($result = $sth->fetch(PDO::FETCH_ASSOC)) {
     $jsonArray[] = array(
      'ID' => $result['interestID'], 
          'Value' => $result['interestVal']); 
    }

    print_r($_POST);

    print json_encode($jsonArray); // json encode that array 
```

**HTML**

```
<input id="interest" name="interest" value="What are your interests?" /> 
```

**JS**

```
//Get interests
        $(document).ready(function() {
            $("input#interest").tokenInput("../../src/php/registration/interest/getInterest.php");
        }); 
```

框架的JS(http://loopj.com/jquery-tokeninput/)

```
(function ($) {
// Default settings
var DEFAULT_SETTINGS = {
    // Search settings
    method: "POST",
    contentType: "json",
    queryParam: "interestVal",
    searchDelay: 300,
    minChars: 1,
    propertyToSearch: "name",
    jsonContainer: null,

    // Display settings
    hintText: "Type in a search term",
    noResultsText: "No results",
    searchingText: "Searching...",
    deleteText: "&times;",
    animateDropdown: true,

    // Tokenization settings
    tokenLimit: null,
    tokenDelimiter: ",",
    preventDuplicates: false,

    // Output settings
    tokenValue: "name", // orig "id"
} 
```

**为什么这个数组是空的？？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T01:15:34.777

不要`mysql_real_escape_string`与准备好的语句一起使用 - 绑定参数将用户数据从 SQL 代码中取出，因此不存在 SQL 注入漏洞。更重要的是，`mysql_real_escape_string`只有在您连接到数据库之后才有效，而不是之前，这会将您的价值转化为`false`.

# c# - 从独立存储中加载大量图像时出现 OutOfMemory 异常

> ID：10134003
> 
> 赞同：4
> 
> 时间：2012-04-13T01:06:48.737
> 
> 标签：c#, silverlight, windows-phone-7

**编辑：**我不断收到 OutOfMemoryException 未处理，我认为这是我将图像保存到隔离存储的方式，我认为这是我可以解决问题的地方，如何在保存之前减小图像的大小？（在我保存图像的地方添加了代码）

我从独立存储中打开图像，有时超过 100 张图像，我想循环播放这些图像，但是`OutOfMemory Exception`当故事板中加载了大约 100 到 150 张图像时，我得到了一个。我该如何处理这个异常，我已经降低了图像的分辨率。如何处理此异常并阻止我的应用程序崩溃？

我在这里得到了这一行的例外

`image.SetSource(isStoreTwo.OpenFile(projectFolder + "\\MyImage" + i + ".jpg", FileMode.Open, FileAccess.Read));//images from isolated storage`

这是我的代码

```
private void OnLoaded(object sender, RoutedEventArgs e)
    {

        IsolatedStorageFile isStoreTwo = IsolatedStorageFile.GetUserStoreForApplication();

        try
        {
            storyboard = new Storyboard
            {
                //RepeatBehavior = RepeatBehavior.Forever
            };

            var animation = new ObjectAnimationUsingKeyFrames();

            Storyboard.SetTarget(animation, projectImage);
            Storyboard.SetTargetProperty(animation, new PropertyPath("Source"));

            storyboard.Children.Add(animation);
            for (int i = 1; i <= savedCounter; i++)
            {
                BitmapImage image = new BitmapImage();

                image.SetSource(isStoreTwo.OpenFile(projectFolder + "\\MyImage" + i + ".jpg", FileMode.Open, FileAccess.Read));//images from isolated storage

                var keyframe = new DiscreteObjectKeyFrame
                {

                    KeyTime = KeyTime.FromTimeSpan(TimeSpan.FromMilliseconds(100 * i)),
                    Value = image
                };

                animation.KeyFrames.Add(keyframe);
            }
        }
        catch (OutOfMemoryException exc)
        {

            //throw;

        }

        Resources.Add("ProjectStoryBoard", storyboard);
        storyboard.Begin();
    } 
```

> **编辑** 这就是我将图像保存到隔离存储的方式，我认为这是我可以解决问题的地方，如何在将图像保存到隔离存储时减小图像的大小？

```
 void cam_CaptureImageAvailable(object sender, Microsoft.Devices.ContentReadyEventArgs e)
    {

        string fileName = folderName+"\\MyImage" + savedCounter + ".jpg";

        try
        {  

            // Save picture to the library camera roll.
            //library.SavePictureToCameraRoll(fileName, e.ImageStream);

            // Set the position of the stream back to start
            e.ImageStream.Seek(0, SeekOrigin.Begin);

            // Save picture as JPEG to isolated storage.
            using (IsolatedStorageFile isStore = IsolatedStorageFile.GetUserStoreForApplication())
            {
                using (IsolatedStorageFileStream targetStream = isStore.OpenFile(fileName, FileMode.Create, FileAccess.Write))
                {

                    // Initialize the buffer for 4KB disk pages.
                    byte[] readBuffer = new byte[4096];
                    int bytesRead = -1;

                    // Copy the image to isolated storage. 
                    while ((bytesRead = e.ImageStream.Read(readBuffer, 0, readBuffer.Length)) > 0)
                    {
                        targetStream.Write(readBuffer, 0, bytesRead);
                    }

                }

            }

        }
        finally
        {
            // Close image stream
            e.ImageStream.Close();
        }

    } 
```

如果您能帮助我，我将不胜感激。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-13T02:36:21.027

图像在磁盘上的大小并不重要，因为当您将它们加载到内存中时，它们将被解压缩。图像所需的内存大约为`(stride * height)`. `stride`是`width * bitsPerPixel)/8`，然后向上舍入到下一个 4 字节的倍数。因此，1024x768 和每像素 24 位的图像将占用大约 2.25 MB。

您应该弄清楚未压缩的图像有多大，并使用该数字来确定内存要求。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-16T14:53:39.983

您将收到 OutOfMemory 异常，因为您同时将所有图像存储在内存中以创建 StoryBoard。我认为您无法克服图像需要在屏幕上显示的未压缩位图大小。

所以要克服这个问题，我们必须考虑你的目标，而不是试图修复错误。如果您的目标是每 X 毫秒按顺序显示一张新图像，那么您有几个选择。

1.  继续使用 StoryBoard，但使用 OnCompleted 事件链接它们。这样您就不必一次创建它们，而只需生成接下来的几个。如果您每 100 毫秒更改一次图像，它可能不够快。

2.  [使用我在此处的回答](https://stackoverflow.com/a/10125496/269608)中提到的 CompositionTarget.Rendering 。如果您只是预加载下一个（而不是像您当前的解决方案那样将它们全部预加载），这可能会占用最少的内存。不过，您需要手动检查经过的时间。

3.  重新考虑你在做什么。如果你说明你要做什么，人们可能会有更多的选择。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-17T09:54:01.933

要回答帖子顶部的编辑，请尝试[ImageResizer](http://imageresizing.net/)。有一个 NuGet 包和一个[HanselBlog](http://www.hanselman.com/blog/NuGetPackageOfWeek11ImageResizerEnablesCleanClearImageResizingInASPNET.aspx)插曲。显然，这是基于 Asp.Net 的，但我相信您可以将其用于您的场景。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-20T13:02:06.413

在设计层解决这类问题通常效果更好。

通过一些配置使应用程序对运行环境智能，使您的应用程序更加健壮。例如，您可以根据可用内存定义一些变量，如图像大小、图像计数、图像质量……并在运行时在应用程序中设置这些变量。所以你的应用程序总是有效的；在高内存机器上快，在低内存机器上慢；但永远不会崩溃。（不要相信在托管环境中工作意味着不用担心环境......设计总是很重要）

还有一些已知的设计模式，如[延迟加载](http://en.wikipedia.org/wiki/Lazy_loading)，您可以从中受益。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-18T16:10:27.037

根据您的一条评论，您正在构建一个 Time Lapse 应用程序。用于 WP7 的商业延时应用程序将图像压缩为视频，而不是静止图像。例如[延时摄影专业版](http://www.wpcentral.com/windows-phone-app-review-timelapse-pro)

视频播放的重点是将相似或与时间相关的图像减少为高度压缩的流*，不需要大量内存即可播放*。

如果您可以在您的应用程序中添加对视频进行编码的功能，您将避免尝试模拟视频播放器的问题（使用 100 多个单个全分辨率帧作为轻弹书）。

*将图像处理到视频服务器端可能是另一种选择（但不如相机内友好）。*

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-13T01:18:52.747

好的，图像 (1024x768) 的内存大小至少为 3 mb (argb)

不知道 ObjectAnimationUsingKeyFrames 如何在内部工作。也许您可以通过销毁 BitmapImage（和 KeyFrames）的实例来强制 gc，而不会丢失动画中的数据。（不可能，见评论！）

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-13T01:43:58.093

我不特别了解 windows phone，但是在 .net winforms 中，在执行长时间运行的任务时需要使用单独的线程。您使用的是 BackgroundWorker 还是等效的？终结器[线程可能会被阻塞](http://dotnetdebug.net/2005/06/22/blocked-finalizer-thread/)，这将阻止图像资源被释放。使用与 UI 线程不同的线程将允许 Dispose 方法自动运行。

# php - move_uploaded_file() 不适用于有效的 ['tmp_name']

> ID：10134005
> 
> 赞同：0
> 
> 时间：2012-04-13T01:07:22.983
> 
> 标签：php, mysql

这让我很困惑。由于某些奇怪的原因，move_uploaded_file() 不会将文件放入目录中，但它会返回有效的 tmp_name 和名称。所以在这种情况下 $file 总是 = 为假。

无论如何，任何人都可以指出这段代码的一些问题吗？这将不胜感激。

```
 <?php
include 'realtydevkit.php';
session_start();
$name = $_FILES['yourlogo']['name'];
$tmpname = $_FILES['yourlogo']['tmp_name'];

if ($name) {
    $directory = $name;
    $userid = $_SESSION['userid'];
    $type = "logo";

    $file = move_uploaded_file($tmpname, $directory);

    if ($file == true) {    
    mysql_query("INSERT INTO usercontent
    (`userid`, `type`, `url`) VALUES
    ('$userid', '$type', '$directory')");
    echo 'Uploaded';
    echo "<img src='".$directory."'/>";
    } else {
    echo 'There was an error moving the file.';
    }
}

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T01:29:37.983

你也不检查`$_FILES['yourlogo']['error']`。

这是您使用上传文件检查的内容：

1.  检查`$_FILES['yourlogo']['error']`。如果是`UPLOAD_ERR_OK`(0)，则继续。
2.  检查`is_uploaded_file($_FILES['yourlogo']['tmp_name'])`。如果失败，PHP 不知道出了什么问题，但它不信任该文件。
3.  组装目标路径。
4.  使用`move_uploaded_file()`.

如果`move_uploaded_file()`出错，则 PHP 无法在目标位置写入文件。这通常是无效路径或没有权限。

请注意，这`$_FILES['yourlogo']['name']`是文件在上传者 PC 上的名称。它不应该有任何路径信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T05:27:28.050

```
<?php
include 'realtydevkit.php';
session_start();
$name = $_FILES['yourlogo']['name'];
$tmpname = $_FILES['yourlogo']['tmp_name'];
if ($name) {
    $directory = $name;
    $userid = $_SESSION['userid'];
    $type = "logo";
    $file = move_uploaded_file($tmpname, "path of ur directore/".$directory);
    if ($file == true) {    
    mysql_query("INSERT INTO usercontent
    (`userid`, `type`, `url`) VALUES
    ('$userid', '$type', '$directory')");
    echo 'Uploaded';
    echo "<img src='".$directory."'/>";
    } 
   else 
   {
    echo 'There was an error moving the file.';
    }
}

?> 
```

# php - 特殊字符打破mysql插入

> ID：10134008
> 
> 赞同：0
> 
> 时间：2012-04-13T01:07:41.380
> 
> 标签：php, mysql, html-sanitizing, input-sanitization

我有一个这样的mysql语句：

```
mysql_query("INSERT INTO movies (comments, description, synopsis)
VALUES ('$_POST["comments"]', '$_POST["desc"]',$_POST["synopsis"])"); 
```

如您所见，非常简单明了。问题是当我在表单中输入特殊字符时，它不会将数据插入到我的表中（使用 phpmyadmin 直接检查是否已插入）。例如，如果我在评论文本区域中输入此值：“这是一个评论”，如果我输入：“你叫什么名字？：John doe 是我的名字”它会中断。我知道它是因为 mysql 使用字符......关于我应该做什么的任何建议？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-13T01:14:25.333

```
mysql_query("INSERT INTO movies (comments, description, synopsis) 
VALUES ('".mysql_real_escape_string($_POST["comments"])."', '".mysql_real_escape_string($_POST["desc"])."','".mysql_real_escape_string($_POST["synopsis"])."'"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T12:17:56.170

```
$comments = mysql_real_escape_string($_POST['comments']);
$desc = mysql_real_escape_string($_POST['desc']);
$synopsis = mysql_real_escape_string($_POST['synopsis']);

mysql_query("INSERT INTO movies (comments, description, synopsis)
VALUES ('$comments', '$desc', '$synopsis'"); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-13T01:17:10.877

```
$comments = mysql_real_escape_string($_POST['comments']);
$desc = mysql_real_escape_string($_POST['desc']);
$synopsis = mysql_real_escape_string($_POST['synopsis']);

mysql_query("INSERT INTO movies (comments, description, synopsis)
VALUES ('$comments', '$desc', '$synopsis'"); 
```

欲了解更多信息谷歌“php addlashes”，或看看这个页面看起来解释[http://www.tizag.com/mysqlTutorial/mysql-php-sql-injection.php](http://www.tizag.com/mysqlTutorial/mysql-php-sql-injection.php)

# php - 将 mysqli 连接传递给 PHP 函数 - 不同步

> ID：10134012
> 
> 赞同：0
> 
> 时间：2012-04-13T01:08:00.823
> 
> 标签：php, mysqli, arguments

当我在另一个文件中调用函数时执行 mysql 命令时出现问题。如果我在同一个文件中有代码，它工作正常。代码如下所示：

认证：

```
{
    $conn = new mysqli($dbserver, "dbuser", "pass", $dbname);
    $sql = 'SELECT userId, salt, pwd, isAdmin FROM users where username = ?';
    $stmt = $conn->stmt_init();
    $stmt->prepare($sql);
    $stmt->bind_param('s', $username);
    $stmt->bind_result($userId, $salt, $storedPwd, $isAdmin);
    $stmt->execute();
    $stmt->fetch();
} 
```

现在，如果我在 fetch 之后立即调用一个函数，它会在 bind_param 行上失败。我这样称呼它：

```
updateUserActivity ($conn, $tpcLang, 'LI', $userId); 
```

这个函数的开头是：

```
function updateUserActivity ($conn, $lang, $activityType, $userId)
{
    // check that activity is valid
    $sql = 'SELECT activityType
            FROM activityType  
            WHERE activityType = ?';
    $stmt = $conn->stmt_init();
    $stmt->prepare($sql);
    $stmt->bind_param('s', $activityType);
    $stmt->bind_result($activityTypeInDB);
    $stmt->execute();
    $stmt->fetch();

    if ($activityType == $activityTypeInDB){
        $success=1;
    } else {
       $success=0;
       $msg = $lang->get('UPDATE_USER_INVALID_ACTIVITY_ERROR_MSG') . " " . $activityType . " (" . $stmt->errno . "):  " . $stmt->error;
       error_log ($msg);
    }
    // continue on to add a row in the userActivity table
} 
```

我在 bind_param 上得到的错误是：无效的对象或资源 mysqli_stmt，而数据库错误是：命令不同步；您现在无法运行此命令。

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T01:16:43.980

尝试在获取后添加它。

```
mysqli_free_result($result); 
```

或者

```
mysqli_close($conn); 
```

# javascript - 我在哪里放置函数以进行验证

> ID：10134015
> 
> 赞同：0
> 
> 时间：2012-04-13T01:08:19.547
> 
> 标签：javascript, jquery

我有一个存储在下面的 javascript 变量中的表单：

```
var $fileImage = $("<form action='imageupload.php' method='post' enctype='multipart/form-data' target='upload_target' onsubmit='startImageUpload(this);' class='imageuploadform' >" + 
"<label> Image File: <input name='fileImage' type='file' class='fileImage' /></label><br/>" +
"<input type='submit' name='submitImageBtn' class='sbtnimage' value='Upload' /></label></form> 
```

现在您可以看到，当用户单击提交按钮时，它会提交到下面的“startImageUpload”函数：

```
function startImageUpload(imageuploadform){
  $(imageuploadform).find('.imagef1_upload_process').css('visibility','visible');
  $(imageuploadform).find('.imagef1_upload_form').css('visibility','hidden');
  sourceImageForm = imageuploadform;
      return true;
} 
```

它的作用是当用户点击提交时，它会显示一个加载栏并上传表单。

我想执行一个简单的 javascript 验证，当用户单击表单中的提交按钮时，它将检查文件是“png”还是“gif”文件类型。如果文件类型正确，则显示加载栏并上传表单。如果文件类型不正确，则显示文件类型不正确的警报，但不显示加载栏，也不上传表单。

下面是验证，但我的问题是我在哪里放置代码，以便当用户单击“上传”按钮时，如果文件类型不正确，则会出现警报并且它不会上传文件，如果文件类型正确则它显示加载栏并上传文件。

```
$(".imageFile").change(function() {

    var val = $(this).val();

    switch(val.substring(val.lastIndexOf('.') + 1).toLowerCase()){
        case 'gif': case 'jpg': case 'png':
        return true;
            break;
        default:
            $(this).val('');
            alert("not an image");
            return false;
            break;
    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T08:50:45.613

你必须找出，为什么你没有得到`alert()`.

首先，检查您的`val`：

```
var val = $(this).val();
alert(val); 
```

如果核心价值有问题，这可能已经给你一个提示。

其次，检查您是否正在输入`switch`：

```
switch(val.substring(val.lastIndexOf('.') + 1).toLowerCase()){
    alert('In the switch...');
    ...
} 
```

你能检查什么`val.substring(val.lastIndexOf('.') + 1).toLowerCase()`返回吗？

希望有帮助...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T01:14:08.467

难道你不能把验证码放在你的`startImageUpload`中，如果验证失败，设置你想要的任何错误字段，然后返回 false？

# asp.net - 压缩 CSS 的 IIS 内容类型错误

> ID：10134017
> 
> 赞同：4
> 
> 时间：2012-04-13T01:08:29.613
> 
> 标签：asp.net, css, iis-7, content-type, content-encoding

我开发了一个 ASP.NET 站点的一部分，该站点主要使用主题，但在主题文件夹中有几个 CSS 文件。这些由另一个开发人员包含在 web.config 中，如下所示：

```
<Content Include="App_Themes\SoftOrange\CMSStyles.css" />
<Content Include="App_Themes\SoftOrange\ContentStyles.css" /> 
```

在我们的内部测试服务器（IIS7、Server 2008 R2 Enterprise）上，对于大于 2700 字节的文件，静态和动态压缩的全局 IIS 管理器选项已打开。还启用了特定于站点的静态和动态压缩。

在某些时候（可能是当 CMSStyles.css 达到 2700 字节时）一些样式被塞满了 - 即。显然没有通过查看页面加载。我发现内容类型（根据 firefox 7.0.1）显示的是 text/css，当我加载 CMSStyles.css 的 URL 时，它看起来像是文本编辑器中的普通压缩垃圾：

```
‹������
```

等 IE 不直接打开 css 文件，但是当我使用开发者工具显示 css 时，它显示为空。

我仅为该站点关闭了静态内容压缩，现在 CSS 文件可以正确加载。我的问题是为什么？！是内容类型问题、内容编码问题，还是 IIS 问题，还是 Web 应用程序中使用 CSS 的方式问题？

谢谢。

编辑：

这些是 CMSStyles.css 的 GET 请求的标头： 响应标头

```
接受范围字节
内容编码 gzip
内容长度 1728
内容类型文本/css
日期 2012 年 4 月 13 日星期五 01:22:43 GMT
电子标签“80a762a82cecd1:0”
最后修改时间 2012 年 3 月 30 日星期五 04:22:03 GMT
持久验证真
服务器 Microsoft-IIS/7.5
改变接受编码
X-Powered-由 ASP.NET
```

请求标头

```
接受文本/css,*/*;q=0.1
接受字符集 ISO-8859-1,utf-8;q=0.7,*;q=0.7
接受编码 gzip，放气
接受语言 en-gb,en;q=0.5
连接保持活动
饼干-删除-
主机 - 已移除 -
推荐人-已删除-
用户代理 Mozilla/5.0 (Windows NT 6.1; WOW64; rv:7.0.1) Gecko/20100101 Firefox/7.0.1
```

所以看起来内容编码是正确的：gzip。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T03:38:20.793

这里的问题（根据我在类似问题中的经验）是`Content-Length`.

检查您是否`Content-Length`在代码的任何部分中设置了，将其删除，它将再次起作用。这是为什么 ？因为如果您设置了`Content-Length`on 标头，IIS 将无法将其更改为压缩的标头，并且 gzip 的解压缩失败。为什么IIS改不了呢？因为默认情况下，如果您在 IIS 上设置标头，则此标头将保留并且无法更改（特别是如果您提前刷新它）。有一个标志可以让 IIS 在设置后更改它，但最好避免设置它。

类似的问题： [在负载平衡的服务器上加载时，ASP.NET 站点有时会冻结和/或在页面顶部显示奇怪的文本](https://stackoverflow.com/questions/2582139/asp-net-site-sometimes-freezing-up-and-or-showing-odd-text-at-top-of-the-page-wh/2719080)

## 更新

来自@thinkOfaNumber：原来**我使用的是 devexpress 压缩和 IIS 压缩**。我在 web.config 中关闭了 devexpress 压缩，它可以工作了！

这里显示的是第一次压缩设置`Content-Length`和第二次压缩无法更改它，因为`Content-Length`在头上写入并且头在您设置后无法更改*，因此第二次压缩更改最终压缩端，结果浏览器没能正确读取，然后没能正确解压。

[*] 有一种方法可以在您在 IIS 上发送它们之后，在将它们发送到浏览器之前更改标题，这可以通过更改 IIS 的默认行为来完成，但不是那么容易，我不知道是否可以解决这个问题。

# jquery - 如果未在 jquery 中选中复选框，则禁用提交按钮

> ID：10134025
> 
> 赞同：1
> 
> 时间：2012-04-13T01:09:14.553
> 
> 标签：jquery, forms, checkbox, checked

我看过这里并尝试了所有可用的答案，但它仍然不适合我。如果未选中复选框，我正在尝试禁用提交按钮。这是我的jQuery：

```
var userTerms = $('input#agree');
     if(userTerms.is(':checked')) {
        $("#aggtxt").addClass("err");
        $("#aggtxt").removeClass("error");
        $("#aggtxt").text(" Agreed");
        $("#bookit").attr('disabled', false);
        }else{
        $("#aggtxt").removeClass("err");
        $("#aggtxt").addClass("error");
        $("#aggtxt").text(" Please check terms and conditions box");
        $("#bookit").attr('disabled', true);
        }

         if ($('#bookit').is(':disabled') == true) { 
            $("#booktxt").removeClass("err");
            $("#booktxt").addClass("error");
            $("#booktxt").text(" Before you can submit this form please check the errors in form marked in red.");
            }else{
                $("#booktxt").addClass("err");
                $("#booktxt").removeClass("error");
                $("#booktxt").text(" Your information looks good, continue to booking...");
                }   
}); 
```

和我的 HTML 表单的一部分：

```
<p><span id="aggtxt"></span><br /><input type="checkbox" name="agree" id="agree" />  I agree to <a href="http://travel.ian.com/index.jsp?pageName=userAgreement&locale=en_US&cid=379849" target="_blank">Terms and Conditions</a> and understand Cancellation Policy.<p>
<span id="booktxt"></span>
<input type="submit" name="bookit" value="" class="bookit" id="bookit" /> 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-03T12:38:17.033

我对此的看法：

[http://jsfiddle.net/bluz/peans/](http://jsfiddle.net/bluz/peans/)

希望这会有所帮助:) Paz。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T01:11:47.353

试试这个：

```
$("#bookit").attr('disabled', 'disabled'); 
```

我试过这个：

```
<input type="checkbox" name="agree" id="agree" onclick="$('#bookit').attr('disabled', !$(this).is(':checked'));" />
    I agree to <a href="http://travel.ian.com/index.jsp?pageName=userAgreement&locale=en_US&cid=379849" target="_blank">Terms and Conditions</a> and understand Cancellation Policy.<p> 
```

如果您取消选中该复选框，它会禁用该按钮。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T01:13:55.793

试试这个：

```
if($('#agree').val() == 'true') 
```

[有关 jQuery文档](http://api.jquery.com/checked-selector/)的更多信息。

**更正**：

`is(':checked')`方法仅在选中单选/复选框时返回。

# html - 如何更改 css 以仅影响 id 或 class 而不是 input[type=""]

> ID：10134036
> 
> 赞同：0
> 
> 时间：2012-04-13T01:11:51.253
> 
> 标签：html, css, button

我喜欢这些按钮，但我需要它们只影响具有唯一 ID（或类）的按钮。如何改变它们？我试图这样做，但如果它们是 div 中的 btns 和 div 上的 css 或者按钮应该有一个 id 或什么，它就不起作用？

```
<pre><code>
<html>
<head>
<style type="text/css">

input[type="submit"], input[type="button"] {
  -moz-border-radius: 10px;
  -webkit-border-radius: 10px;  
  border-radius: 10px;
}

input[type="submit"], input[type="button"] {

float: right;
  margin: 2em 1em 0 1em;
  width: 10em;
  padding: .5em;
  border: 1px solid #666;
  -moz-border-radius: 10px;
  -webkit-border-radius: 10px;  
  border-radius: 10px;
  -moz-box-shadow: 0 0 .5em rgba(0, 0, 0, .8);
  -webkit-box-shadow: 0 0 .5em rgba(0, 0, 0, .8);
  box-shadow: 0 0 .5em rgba(0, 0, 0, .8);
  color: #fff;
  background: #0a0;
  font-size: 1em;
  line-height: 1em;
  font-weight: bold;
  opacity: .7;
  -webkit-appearance: none;
  -moz-transition: opacity .5s;
  -webkit-transition: opacity .5s;
  -o-transition: opacity .5s;
  transition: opacity .5s;
}

input[type="submit"]:hover,
input[type="submit"]:active,
input[type="button"]:hover,
input[type="button"]:active {
  cursor: pointer;
  opacity: 1;
}

input[type="submit"]:active, input[type="button"]:active {
  color: #333;
  background: #eee;
  -moz-box-shadow: 0 0 .5em rgba(0, 0, 0, .8) inset;
  -webkit-box-shadow: 0 0 .5em rgba(0, 0, 0, .8) inset;
  box-shadow: 0 0 .5em rgba(0, 0, 0, .8) inset;
}

input[type="button"] {
  background: #f33;
}
</style>

</head>
<body>

  <div id="formButtons">
    <input type="submit" id="sendMessage" name="sendMessage" value="Reply" />
    <input type="button" id="cancel" name="cancel" value="Cancel" />
  </div>

</body>
</html>

</code></pre> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T02:05:03.180

如果您需要将 css 应用于所有按钮

```
input[type="button"]
{
   /* CSS property */
} 
```

如果您想将 css 应用于特定按钮，则无需提供 input[type="button"]，只需使用类或 ID

```
.special_button
{
  /* my css property */
} 
```

或者

```
#special_button
{
  /* my css property */
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T01:13:14.363

这是你要问的吗？

```
#yourIdHere{ /* impacts only ID */ }

.yourClassHere{ /* impacts only elements with class */ }

INPUT.yourClassHere{ /* impacts only inputs with class */ } 
```

CSS 提供了一组丰富的选择器（其中许多可以组合）：[http ://www.w3.org/TR/selectors/#selectors](http://www.w3.org/TR/selectors/#selectors)

# python - 这段代码中的 Python 优化？

> ID：10134038
> 
> 赞同：4
> 
> 时间：2012-04-13T01:12:02.040
> 
> 标签：python, optimization

我有两个相当简单的代码片段，而且我都运行了很多次；我正在尝试确定是否可以进行任何优化来加快执行时间。如果有什么突出的东西可以更快地完成......

在第一个中，我们有一个列表，字段。我们还有一个列表和权重列表。我们试图找出哪个权重列表乘以字段将产生最大总和。字段大约有 30k 个条目长。

```
def find_best(weights,fields):
  winner = -1
  best = -float('inf')
  for c in range(num_category):
    score = 0
    for i in range(num_fields):
      score += float(fields[i]) * weights[c][i]
    if score > best:
      best = score
      winner = c
  return winner 
```

在第二个中，我们试图更新我们的两个权重列表；一个增加一个减少。增加/减少每个元素的量等于字段中的相应元素（例如，如果字段[4] = 10.5，那么我们希望将权重[toincrease][4] 增加 10.5 并减少权重[todecrease][4 ] 由 10.5)

```
 def update_weights(weights,fields,toincrease,todecrease):
   for i in range(num_fields):
     update = float(fields[i])
     weights[toincrease][i] += update
     weights[todecrease][i] -= update
   return weights 
```

我希望这不是一个过于具体的问题。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-13T02:19:19.920

当您尝试优化时，您***要做***的就是分析和衡量！Python 提供了`timeit`使测量变得容易的模块！

这将假设您事先已将字段转换为浮点列表（在任何这些函数之外），因为字符串 → 浮点转换非常慢。您可以通过`fields = [float(f) for f in string_fields]`.

此外，对于进行数值处理，纯 python 不是很好，因为它最终会为每个操作进行大量类型检查（和其他一些东西）。使用像[numpy](http://numpy.scipy.org/)这样的 C 库将带来巨大的改进。

## find_best

我已将其他人（以及更多人）的答案纳入分析套件（例如，`test_find_best.py`）：

```
import random, operator, numpy as np, itertools, timeit

fields = [random.random() for _ in range(3000)]
fields_string = [str(field) for field in fields]
weights = [[random.random() for _ in range(3000)] for c in range(100)]

npw = np.array(weights)
npf = np.array(fields)   

num_fields = len(fields)
num_category = len(weights)

def f_original():
  winner = -1
  best = -float('inf')
  for c in range(num_category):
    score = 0
    for i in range(num_fields):
      score += float(fields_string[i]) * weights[c][i]
    if score > best:
      best = score
      winner = c

def f_original_no_string():
  winner = -1
  best = -float('inf')
  for c in range(num_category):
    score = 0
    for i in range(num_fields):
      score += fields[i] * weights[c][i]
    if score > best:
      best = score
      winner = c

def f_original_xrange():
  winner = -1
  best = -float('inf')
  for c in xrange(num_category):
    score = 0
    for i in xrange(num_fields):
      score += fields[i] * weights[c][i]
    if score > best:
      best = score
      winner = c

# Zenon  http://stackoverflow.com/a/10134298/1256624

def f_index_comprehension():
    winner = -1
    best = -float('inf')
    for c in range(num_category):
      score = sum(fields[i] * weights[c][i] for i in xrange(num_fields))
      if score > best:
        best = score
        winner = c  

# steveha  http://stackoverflow.com/a/10134247/1256624

def f_comprehension():
  winner = -1
  best = -float('inf')

  for c in xrange(num_category):
    score = sum(f * w for f, w in itertools.izip(fields, weights[c]))
    if score > best:
      best = score
      winner = c

def f_schwartz_original(): # https://en.wikipedia.org/wiki/Schwartzian_transform
    tup = max(((i, sum(t[0] * t[1] for t in itertools.izip(fields, wlist))) for i, wlist in enumerate(weights)),
              key=lambda t: t[1]
             )

def f_schwartz_opt(): # https://en.wikipedia.org/wiki/Schwartzian_transform
    tup = max(((i, sum(f * w for f,w in itertools.izip(fields, wlist))) for i, wlist in enumerate(weights)),
              key=operator.itemgetter(1)
             )

def fweight(field_float_list, wlist):
    f = iter(field_float_list)
    return sum(f.next() * w for w in wlist)

def f_schwartz_iterate():
     tup = max(
         ((i, fweight(fields, wlist)) for i, wlist in enumerate(weights)),
         key=lambda t: t[1]
      )

# Nolen Royalty  http://stackoverflow.com/a/10134147/1256624 

def f_numpy_mult_sum():
   np.argmax(np.sum(npf * npw, axis = 1))

# me

def f_imap():
  winner = -1
  best = -float('inf')

  for c in xrange(num_category):
    score = sum(itertools.imap(operator.mul, fields, weights[c]))
    if score > best:
      best = score
      winner = c

def f_numpy():
   np.argmax(npw.dot(npf))

for f in [f_original,
          f_index_comprehension,
          f_schwartz_iterate,
          f_original_no_string,
          f_schwartz_original,
          f_original_xrange,
          f_schwartz_opt,
          f_comprehension,
          f_imap]:
   print "%s: %.2f ms" % (f.__name__, timeit.timeit(f,number=10)/10 * 1000)
for f in [f_numpy_mult_sum, f_numpy]:
   print "%s: %.2f ms" % (f.__name__, timeit.timeit(f,number=100)/100 * 1000) 
```

跑步`python test_find_best.py`给了我：

```
f_original: 310.34 ms
f_index_comprehension: 102.58 ms
f_schwartz_iterate: 103.39 ms
f_original_no_string: 96.36 ms
f_schwartz_original: 90.52 ms
f_original_xrange: 89.31 ms
f_schwartz_opt: 69.48 ms
f_comprehension: 68.87 ms
f_imap: 53.33 ms
f_numpy_mult_sum: 3.57 ms
f_numpy: 0.62 ms 
```

所以使用`.dot`（对不起，我找不到 atm 的文档）的 numpy 版本是最快的。如果您正在执行大量数值运算（您似乎是这样），则可能值得在创建它们后立即将其转换`fields`为`weights`numpy 数组。

## 更新权重

Numpy 可能会为 提供类似的加速`update_weights`，例如：

```
def update_weights(weights, fields, to_increase, to_decrease):
  weights[to_increase,:] += fields
  weights[to_decrease,:] -= fields
  return weights 
```

（顺便说一句，我没有测试或分析过，你需要这样做。）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-13T01:28:35.403

[我认为您可以使用numpy](http://numpy.scipy.org/)获得相当大的速度提升。愚蠢的简单例子：

```
>>> fields = numpy.array([1, 4, 1, 3, 2, 5, 1])
>>> weights = numpy.array([[.2, .3, .4, .2, .1, .5, .9], [.3, .1, .1, .9, .2, .4, .5]])
>>> fields * weights
array([[ 0.2,  1.2,  0.4,  0.6,  0.2,  2.5,  0.9],
       [ 0.3,  0.4,  0.1,  2.7,  0.4,  2\. ,  0.5]])
>>> result = _
>>> numpy.argmax(numpy.sum(result, axis=1))
1
>>> result[1]
array([ 0.3,  0.4,  0.1,  2.7,  0.4,  2\. ,  0.5]) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-13T01:21:31.570

如果您正在运行 Python 2.x，我会使用 xrange() 而不是 range()，因为它不会生成列表，所以使用更少的内存

这是假设您要保留当前的代码结构。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-04-13T01:44:20.750

首先，如果您使用的是 Python 2.x，则可以通过使用`xrange()`而不是`range()`. 在 Python 3.x`xrange()`中没有.`range()``xrange()`

接下来，如果我们追求速度，我们需要编写更少的代码，并更多地依赖 Python 的内置功能（为了速度而用 C 语言编写的）。

您可以通过使用生成器表达式来加快速度，`sum()`如下所示：

```
from itertools import izip

def find_best(weights,fields):
    winner = -1
    best = -float('inf')
    for c in xrange(num_category):
        score = sum(float(t[0]) * t[1] for t in izip(fields, weights[c]))
        if score > best:
            best = score
            winner = c
    return winner 
```

再次应用相同的想法，让我们尝试使用`max()`以找到最佳结果。我认为这段代码看起来很难看，但是如果您对其进行基准测试并且速度足够快，那么它可能是值得的：

```
from itertools import izip

def find_best(weights, fields):
    tup = max(
        ((i, sum(float(t[0]) * t[1] for t in izip(fields, wlist))) for i, wlist in enumerate(weights)),
        key=lambda t: t[1]
    )
    return tup[0] 
```

啊! 但如果我没有犯任何错误，这也是同样的事情，它应该在很大程度上依赖于 Python 中的 C 机制。测量它，看看它是否更快。

所以，我们正在调用`max()`. 我们给它一个生成器表达式，它会找到生成器表达式返回的最大值。但是你想要最佳值的索引，所以生成器表达式返回一个元组：索引和权重值。所以我们需要将生成器表达式作为第一个参数传递，第二个参数必须是一个从元组中查看权重值并忽略索引的键函数。由于生成器表达式不是它的唯一参数，`max()`因此它需要放在括号中。然后它建立一个元组`i`和计算的权重，由`sum()`我们上面使用的相同计算。最后，一旦我们从我们的索引中取回一个元组`max()`以获取索引值，并返回它。

如果我们分解一个函数，我们可以让它变得不那么难看。这增加了函数调用的开销，但如果你测量它，我敢打赌它不会太慢。`fields`另外，现在我考虑一下，建立一个已经预先强制到的值列表是有意义的`float`；那么我们可以多次使用它。此外，与其使用`izip()`并行迭代两个列表，不如创建一个迭代器并明确地向它询问值。在 Python 2.x 中，我们使用`.next()`方法函数来请求一个值；在 Python 3.x 中，您将使用`next()`内置函数。

```
def fweight(field_float_list, wlist):
    f = iter(field_float_list)
    return sum(f.next() * w for w in wlist)

def find_best(weights, fields):
    flst = [float(x) for x in fields]
    tup = max(
        ((i, fweight(flst, wlist)) for i, wlist in enumerate(weights)),
        key=lambda t: t[1]
    )
    return tup[0] 
```

如果有 30K 字段值，那么预先计算这些`float()`值可能会在速度上取得巨大的胜利。

编辑：我错过了一个技巧。而不是`lambda`函数，我应该`operator.itemgetter()`像接受答案中的一些代码一样使用。此外，接受的答案是定时的，看起来函数调用的开销很大。但是 Numpy 的答案要快得多，以至于不再值得玩这个答案了。

至于第二部分，我认为它不能加快速度。我会尽力：

```
def update_weights(weights,fields,toincrease,todecrease):
    w_inc = weights[toincrease]
    w_dec = weights[todecrease]
    for i, f in enumerated(fields):
        f = float(f)  # see note below
        w_inc[i] += f
        w_dec[i] -= f 
```

`xrange()`所以，这里我们直接迭代字段值，而不是迭代一个。我们有一条强制浮动的线。

请注意，如果权重值已经是浮动的，我们实际上不需要强制在此处浮动，我们可以通过删除该行来节省时间。

您的代码对权重列表进行了四次索引：两次进行增量，两次进行减量。此代码只执行第一个索引（使用`toincrease`or `todecrease`）参数一次。它仍然必须索引`i`才能`+=`工作。（我的第一个版本试图用迭代器来避免这种情况，但没有奏效。我应该在发布之前进行测试。但现在已经修复了。）

最后一个尝试的版本：不要在我们进行时递增和递减值，只需使用列表推导来构建一个包含我们想要的值的新列表：

```
def update_weights(weights, field_float_list, toincrease, todecrease):
    f = iter(field_float_list)
    weights[toincrease] = [x + f.next() for x in weights[toincrease]]
    f = iter(field_float_list)
    weights[todecrease] = [x - f.next() for x in weights[todecrease]] 
```

这假设您已经强制所有字段值浮动，如上所示。

以这种方式替换整个列表是更快还是更慢？我会猜得更快，但我不确定。测量并查看！

哦，我应该补充一下：请注意，我`update_weights()`上面显示的版本不返回`weights`. 这是因为在 Python 中，不从改变数据结构的函数返回值被认为是一种很好的做法，只是为了确保没有人对哪些函数进行查询以及哪些函数改变事物感到困惑。

[http://en.wikipedia.org/wiki/Command-query_separation](http://en.wikipedia.org/wiki/Command-query_separation)

测量测量测量。看看我的建议有多快，或者不是。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-04-13T01:21:48.690

一个简单的优化是使用`xrange`而不是`range`. `xrange`是一个生成器函数，`yields`当您对其进行迭代时，它会一一生成；而`range`首先将整个（30,000 项）列表创建为临时对象，使用更多的内存和 CPU 周期。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-04-13T01:51:06.827

正如@Levon 所说，`xrange()`在 python2.x 中是必须的。此外，如果您在 python2.4+ 中，您可以使用`generator expression`(thanks @steveha) ，它有点像[列表](http://docs.python.org/tutorial/datastructures.html#list-comprehensions)推导（仅在 2.6+ 中），用于您的内部循环，如下所示：

```
for i in range(num_fields):
      score += float(fields[i]) * weights[c][i] 
```

相当于

```
score = sum(float(fields[i]) * weights[c][i]) for i in num_fields) 
```

总的来说，python wiki 上有[这个很棒的页面](http://wiki.python.org/moin/PythonSpeed/PerformanceTips#Loops)，介绍了简单但有效的优化技巧！

# php - 无法完成 Git 推送：PHP 内存耗尽？

> ID：10134039
> 
> 赞同：1
> 
> 时间：2012-04-13T01:12:08.030
> 
> 标签：php, git, memory, git-push

我试图将一个分支推送到我的远程存储库，但不能。错误信息说：

```
 git -c core.quotepath=false push -v --tags --set-upstream origin abcd:abcd 
    Pushing to https://[userid]@[repository address]/git/[projid].git
    POST git-receive-pack (567 bytes)
    remote: PHP Fatal error:  Allowed memory size of 536870912 bytes exhausted (tried to allocate 662439121 bytes) in /home1/html/[repository center name]/www/include/Snoopy.class.php on line 1156        
    remote: error: hook declined to update refs/heads/unit04        
    Completed with errors, see above 
```

536870912 字节 == 512MB。我检查了 /etc/php.ini.default 并检查了 memory_limit 但它是 128MB。

我注意到其他人遇到了[内存问题](https://stackoverflow.com/questions/8214321/git-gc-using-excessive-memory-unable-to-complete)。我的问题和这个人的一样吗？

再会，

千瓦

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T02:53:30.180

Git 不是用 PHP 编写的，因此您需要弄清楚它调用该文件的原因。您的内存问题不在 git 中，而在 Snoopy.class.php 中。

我猜这是一个[git hook](http://progit.org/book/ch7-3.html)。

# iphone - 您可以通过 iphone 插孔发送电信号来打开/关闭开关吗？

> ID：10134040
> 
> 赞同：0
> 
> 时间：2012-04-13T01:12:13.393
> 
> 标签：iphone, ios

我想知道如何使应用程序能够使用 iphone 的音频插孔使电路闭合。一个例子是快乐触发器[http://www.kickstarter.com/projects/1435018402/trigger-happy-camera-remote](http://www.kickstarter.com/projects/1435018402/trigger-happy-camera-remote)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T01:41:59.547

我相信他们所做的只是播放一些任意音频并使用生成的信号。

# asp.net-mvc - 如何从我的业务层组件中获取视图的路径？

> ID：10134042
> 
> 赞同：0
> 
> 时间：2012-04-13T01:12:21.830
> 
> 标签：asp.net-mvc, asp.net-mvc-3, io

我正在尝试将视图的内容读入一个字符串变量，如下所示 -

`string _template = File.ReadAllText(@"Views/emails/registrationconfirmation.cshtml");`

这样它就可以与[RazorEngine](https://github.com/Antaris/RazorEngine)一起使用，从模板创建电子邮件。

此代码在我的业务层程序集中。我想我需要物理路径而不是我试图使用的虚拟路径。

该文件位于`Views/emails`我的 MVC3 项目的文件夹中。如何以编程方式获取读取文件所需的正确路径？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T06:19:12.713

您的业​​务层不应该尝试获取视图的路径。如果它需要使用这样的路径，它们应该作为来自 UI 层的参数传递。

所以在你的业务层而不是这样：

```
public class MyBusiness : IMyBusiness
{
    public string RenderView()
    {
        string _template = File.ReadAllText(@"Views/emails/registrationconfirmation.cshtml");
        ...
    }
} 
```

你可以有这个：

```
public class MyBusiness
{
    public string RenderView(string viewPath)
    {
        string _template = File.ReadAllText(viewPath);
        ...
    }
} 
```

现在由位于控制器中的调用代码负责传递正确的路径（在 ASP.NET 应用程序的情况下可以使用该`Server.MapPath`函数获得，而在桌面应用程序的情况下可能是相对的路径等）。这样，您的业务层就不再与 ASP.NET 强耦合。

另一种可能性是让业务层将应用程序的基本物理路径作为构造函数参数：

```
public class MyBusiness : IMyBusiness
{
    private readonly string _basePath;
    public MyBusiness(string basePath)
    {
        _basePath = basePath;
    }

    public string RenderView()
    {
        var file = Path.Combine(_basePath, @"Views\emails\registrationconfirmation.cshtml");
        string _template = File.ReadAllText(viewPath);
        ...
    }
} 
```

然后剩下的就是配置您的 DI 框架以[`HostingEnvironment.ApplicationPhysicalPath`](http://msdn.microsoft.com/en-us/library/system.web.hosting.hostingenvironment.applicationphysicalpath.aspx)在实例化您的业务层时传递属性值。

* * *

更新：正如@jgauffin 在评论部分指出的那样，可以通过将 a`Stream`或 a传递`StreamReader`给业务层来进一步改进此代码，使其甚至不依赖于文件。这将使完全隔离的重用和单元测试变得更加容易。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T04:37:32.023

[Server.MapPath](http://msdn.microsoft.com/en-us/library/ms524632%28v=vs.90%29.aspx)是否适用于您的情况？

# mysql - mysql存储过程执行SHOW CREATE TABLE

> ID：10134044
> 
> 赞同：2
> 
> 时间：2012-04-13T01:12:49.203
> 
> 标签：mysql

我正在尝试编写一个包含 SHOW CREATE TABLE 的存储过程。我的最终目标是从 information_schema 中动态查找模式名称并运行 SHOW CREATE TABLE schema.tableName。

似乎我无法在存储过程中运行 SHOW CREATE TABLE 。

```
DELIMITER $$
DROP PROCEDURE IF EXISTS ct$$
CREATE PROCEDURE ct (tableName VARCHAR(50))
BEGIN

  SHOW CREATE TABLE tableName;

END$$
DELIMITER ;

mysql> CALL ct('users');
ERROR 1146 (42S02): Table 'adcentraldb.tableName' doesn't exist
mysql> 
```

* * *

对于那些感兴趣的人，这就是我对正在工作的 SHOW CREATE TABLE 包装器的最终结果

```
DELIMITER $$
DROP PROCEDURE IF EXISTS ct$$

-- Wraps around SHOW CREATE TABLE.  Look at other schemas other than current.
CREATE PROCEDURE ct (tableName VARCHAR(50))
BEGIN
  DECLARE dbName VARCHAR(50);

  SET dbName = (SELECT `TABLE_SCHEMA` FROM `INFORMATION_SCHEMA`.`TABLES` 
  WHERE `TABLE_NAME` = tableName LIMIT 1);

  SET @a=CONCAT("SHOW CREATE TABLE ", dbName, '.', tableName);
  PREPARE stmt1 FROM @a;
  EXECUTE stmt1; 
  DEALLOCATE PREPARE stmt1;

END$$
DELIMITER ; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T06:03:10.233

您不能像这样传递表名，但您可以为此目的使用准备语句 -

```
DELIMITER $$
DROP PROCEDURE IF EXISTS ct$$
CREATE PROCEDURE ct (tableName VARCHAR(50))
BEGIN

  set @a=concat("SHOW CREATE TABLE ",tableName);
  PREPARE stmt1 FROM @a;
  EXECUTE stmt1; 
  DEALLOCATE PREPARE stmt1;

END$$
DELIMITER ; 
```

# javascript - hasChildNodes 与 firstChild

> ID：10134045
> 
> 赞同：5
> 
> 时间：2012-04-13T01:13:04.710
> 
> 标签：javascript, dom, dom4

```
while (div.hasChildNodes()) {
    fragment.appendChild(div.firstChild)
}

while (div.firstChild) {
    fragment.appendChild(div.firstChild)
} 
```

比较上面的两段伪代码，它们都附加了`div`to的每个子级，`fragment`直到没有更多子级为止。

1.  你什么时候喜欢`hasChildNodes`或者`firstChild`它们看起来相同。
2.  如果 API 如此相似，那么为什么它们都存在。`hasChildNodes()`当我可以强制`firstChild`从`null`到时为什么存在`false`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-13T01:21:06.693

a) 微优化！

b) 尽管这似乎是一种常见的做法，但我不喜欢依赖空/非空值来代替假/真。这是一个节省空间的方法，在启用服务器压缩的情况下是不必要的（有时可以称为细微的错误）。每次都选择清晰，除非它被证明会导致瓶颈。

我会选择第一个选项，因为它完美地解释了你的意图。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-13T01:24:26.153

您的两个实现之间没有功能差异。两者在所有情况下都会产生相同的结果。

如果你想追查两者之间是否存在性能差异，则必须在所需的目标浏览器上运行性能测试，看看是否存在有意义的差异。

这是两者[的性能测试](http://jsperf.com/haschildnodes-vs-firstchild)。它似乎是特定于浏览器的，哪个更快。 `hasChildNodes()`在 Chrome 中明显更快，但`firstChild`在 IE9 和 Firefox 中稍快一些。

![在此处输入图像描述](../Images/82b604d569d9d71601a6f8aba6967e84.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T01:22:12.970

我会建议[hasChildNodes()](https://developer.mozilla.org/En/DOM/Node.childNodes)而不是[firstChild](https://developer.mozilla.org/En/DOM/Node.firstChild)只是因为`return`; 如果为空则返回，`hasChildNodes()`而返回；这允许您在检查数据是否存在时更有效地解析数据。实际上，这取决于您计划如何操作 DOM 以实现您的结果。`false``firstChild``null`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-13T01:50:04.333

除了一些（可能）可以忽略不计的速度差异之外，您的两个示例通常*表现相同。

偏爱一个优于另一个的唯一原因是清晰，特别是每个构造如何很好地代表其余代码正在实现的想法，并根据其中一个构造是否更容易在您阅读代码时进行可视化解析来调节。我建议尽可能地支持清晰而不是性能或不必要的迂腐正确性。

* 注意：我假设您正在使用现代浏览器的网页上运行此代码。如果您的代码需要在其他上下文中运行，则 .hasChildNodes() 和 .firstChild 之间可能存在显着的速度差异甚至功能（副作用）差异：一个需要设置和执行函数调用，另一个需要如果第一个子节点不可用，则构建一个符合脚本的 DOM 兼容表示。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-13T08:26:58.353

假设 DOM 调用很慢，您可以通过使用单个调用来进一步优化（以牺牲可读性为代价）`firstChild`：

```
var child;
while ( (child = div.firstChild) ) {
    fragment.appendChild(child);
} 
```

...虽然（奇怪的是，对我来说）这显然没有帮助，而且使事情变得更糟，根据这个 jsPerf：http: [//jsperf.com/haschildnodes-vs-firstchild/2](http://jsperf.com/haschildnodes-vs-firstchild/2)

至于为什么这两种方法都存在，请记住 DOM 并不是 JavaScript 独有的。例如，在 Java DOM 实现中，您必须明确比较`firstChild`（或更可能`firstChild()`）与`null`.

# iphone - iOS 单元测试通用应用程序

> ID：10134046
> 
> 赞同：0
> 
> 时间：2012-04-13T01:13:05.137
> 
> 标签：iphone, ios, ipad, ios4

我正在尝试在通用应用程序上设置一些单元测试。该应用程序在 ipad/iphone 上加载时的行为完全不同。例如，每个独立的视图和控制器都有一个单独的委托。

如何配置要在 iphone/ipad 上测试的特定测试目标或特定测试文件。例如，在 iPhone 上运行 TestsTarget1，在 iPad 上运行 TestTarget2？可以在每个文件的基础上设置这样的东西吗？例如“TestIpadMaps.m”要在 iPad 上运行，而“TestIphoneMaps.m”要在 iphone 上运行。

编辑：我问的原因是因为我想对某些引用应用程序委托的方法运行测试，这取决于正在测试的设备。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T01:28:16.747

您可以使用 if 语句来检查 NS（或者它可能是 UI，因为我在我的 iPad 上所以我没有参考）设备是否等于 iPhone，以及它是否正在运行您的测试或转到您的视图。

这是一个可以帮助的视频

[http://www.youtube.com/watch?v=meiv1ePUEnM](http://www.youtube.com/watch?v=meiv1ePUEnM)

# .htaccess - Htaccess 规则使这样的 ?page=1 看起来像 Codeigniter 中的 /page/1

> ID：10134050
> 
> 赞同：0
> 
> 时间：2012-04-13T01:13:36.567
> 
> 标签：.htaccess, codeigniter, url, mod-rewrite, friendly-url

这是我的网址目前的样子：

```
http://mysite.com/?page=1 
```

我怎样才能使这项工作？：

```
http://mysite.com/page/1 
```

StackOverflow 上有一个[帖子](https://stackoverflow.com/questions/3167741/easiest-way-to-make-pretty-urls-e-g-mysite-page1-rather-than-mysitepage-page1)问了同样的问题。但是公认的解决方案对我不起作用。因为我正在使用 Codeigniter 并且我的页面导致 404 可能是因为 CI 站点的 url 模式是：

域/控制器/方法

系统假设我正在请求一个名为“page”的控制器和一个名为“1”的方法，这两者当然都不存在。或者也许是由于与我的 htaccess 文件中的其他代码冲突（我从 CI wiki 下载的，它摆脱了 index.php 并做了一些安全事情）。这是我的整个 htaccess 文件：

```
<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteBase /

    #Removes access to the system folder by users. Additionally this will allow you to create a System.php controller, 'system' can be replaced if you have renamed your system folder.
    RewriteCond %{REQUEST_URI} ^system.*
    RewriteRule ^(.*)$ /index.php?/$1 [L]

    #When your application folder isn't in the system folder. This snippet prevents user access to the application folder. Rename 'application' to your applications folder name.
    RewriteCond %{REQUEST_URI} ^application.*
    RewriteRule ^(.*)$ /index.php?/$1 [L]

    #Checks to see if the user is attempting to access a valid file, such as an image or css document, if this isn't true it sends the request to index.php
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule ^(.*)$ index.php?/$1 [L]

#Pretty urls for pagination links
RewriteRule (.*) index.php?page=$1

</IfModule> 
```

非缩进位是我从其他对我不起作用的 SO 问题中得到的解决方案。

这个 CI 分页问题的任何解决方案？

* * *

## 更新

好的，阅读一些文档，现在我有了这个工作：

```
http://mysite.com/home/index/2 
```

将其变为的 htaccess 规则是什么？：

```
http://mysite.com/page/2 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T05:12:10.977

您应该在此处进行此配置`/application/config/routes.php`（并让`.htaccess`just for 隐藏 index.php，就像您已经在做的那样）。

```
$route['page/(:any)'] = 'home/index/$1'; 
```

或者更好，就像@zaherg 记得的那样（确保只有数字可以匹配）：

```
$route['page/(:num)'] = 'home/index/$1'; 
```

这样，所有的请求都`http://mysite.com/page/2`将在内部被处理`http://mysite.com/home/index/2`，依此类推。

我建议您查看[CodeIgniter 用户指南 - URI 路由](http://codeigniter.com/user_guide/general/routing.html)和[CodeIgniter 用户指南 - 教程 - 简介](http://codeigniter.com/user_guide/tutorial/index.html)。

祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T01:21:40.553

```
RewriteEngine on
RewriteCond $1 !^(index\.php|images|robots\.txt)
RewriteRule ^(.*)$ /index.php/$1 [L] 
```

来自[CodeIgniter 文档](http://codeigniter.com/user_guide/general/urls.html)

这将处理删除`index.php`，但之后会发生什么取决于 CodeIgniter 的查询字符串处理是如何设置的：它可以配置为使用查询字符串而不是路径。请参阅链接查看更多细节。

# oracle - 处理重载的包会引发“无法解析对象详细信息”

> ID：10134051
> 
> 赞同：2
> 
> 时间：2012-04-13T01:13:41.137
> 
> 标签：oracle, oracle10g, package, packages

我正在处理一个重载的包，想知道两件事。

1）有没有办法获得更多关于发生了什么错误的信息，比如它发生在什么行号上，因为`Failed to resolve object details`接缝有点模糊。

2) 这个陈述似乎有什么问题？

```
 CREATE OR REPLACE PACKAGE shop_query_pkg IS
     procedure shop_info 
      (p_id IN bb_shopper.idshopper%TYPE,
       p_firstname out bb_shopper.firstname%TYPE);
      procedure shop_info 
      (p_id IN bb_shopper.lastname%TYPE,
       p_firstname out bb_shopper.firstname%TYPE);
    END;
    /
    CREATE OR REPLACE PACKAGE BODY show_query_pkg IS
     procedure shop_info 
      (p_id IN bb_shopper.idshopper%TYPE,
       p_firstname out bb_shopper.firstname%TYPE);
      IS
     BEGIN
       SELECT firstname
        into p_firstname
        FROM bb_shopper
        WHERE idshopper = p_id;
     EXCEPTION
      WHEN NO_DATA_FOUND THEN
       DBMS_OUTPUT.PUT_LINE('ID does not exist');
     END;
     -- second procedure
     procedure shop_info 
      (p_id IN bb_shopper.lastname%TYPE,
       p_firstname out bb_shopper.firstname%TYPE);
      IS
     BEGIN
       SELECT firstname
        into p_firstname
        FROM bb_shopper
        WHERE lastname = p_id;
     EXCEPTION
      WHEN NO_DATA_FOUND THEN
       DBMS_OUTPUT.PUT_LINE('Last name does not exist');
     END;
    END;
    /
    show errors; 
```

错误

```
PACKAGE shop_query_pkg compiled
PACKAGE BODY show_query_pkg compiled
Warning: execution completed with warning
Failed to resolve object details 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T03:13:50.827

你不能在重载过程中使用相同名称和相同数量的相同类型的参数，并且包体名称错误，还有其他小错误

此外，第一个和第二个过程的参数 p_firstname 类型 p_firstname out bb_shopper.firstname%TYPE 和 bb_shopper.firstname%TYPE 都是 Characters 类型（EITHER BOTH CHAR 或 BOTH VARCHAR2 等），因此不算作不同的类型

请使用以下

```
CREATE OR REPLACE PACKAGE shop_query_pkg IS
      procedure shop_info(p_id1        IN bb_shopper.idshopper%TYPE,
                  p_firstname1 out bb_shopper.firstname%TYPE);
      procedure shop_info(p_id2        IN bb_shopper.lastname%TYPE,
                  p_firstname2 out bb_shopper.firstname%TYPE);
END;
/
CREATE OR REPLACE PACKAGE BODY shop_query_pkg IS
    procedure shop_info(p_id1 IN bb_shopper.idshopper%TYPE, 
                                  p_firstname1 out bb_shopper.firstname%TYPE)
               IS
        BEGIN
            SELECT firstname into p_firstname1 FROM bb_shopper WHERE idshopper = p_id1;
        EXCEPTION
        WHEN NO_DATA_FOUND 
        THEN 
            DBMS_OUTPUT.PUT_LINE('ID does not exist');
        END; -- second procedure      
    procedure shop_info(p_id2 IN bb_shopper.lastname%TYPE, 
                                  p_firstname2 out bb_shopper.firstname%TYPE)
               IS
        BEGIN
            SELECT firstname into p_firstname2 FROM bb_shopper WHERE lastname = p_id2;
        EXCEPTION
        WHEN NO_DATA_FOUND 
        THEN 
            DBMS_OUTPUT.PUT_LINE('Last name does not exist');
        END;
END;
/
show errors; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-09T22:10:28.593

检查您尝试编译的包的包规范是否有效。我建议你再次编译包规范，然后编译包体。这已经为我解决了这个问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-30T08:56:33.170

在与 APPS 不同的架构中创建包，并且不要在 APPS 中创建同义词。

如果包在编译时出现错误，如果您尝试使用“显示错误”查看错误消息，它将显示消息为“无法解析对象详细信息”，因为包或同义词在 APPS 模式中不可用。

# delphi - 代码模板 - Delphi 版本之间的单元名称冲突

> ID：10134059
> 
> 赞同：6
> 
> 时间：2012-04-13T01:14:35.760
> 
> 标签：delphi, delphi-xe2, code-templates

不同的 Delphi 版本（在我的例子中是 2007，XE 和 XE2）似乎使用相同的代码模板存储库，例如`..\Documents\RAD Studio\code_templates`. 由于 XE2 使用命名空间单元，当必须在模板中使用单元名称时，这会导致问题。

例如，我在编写时有一个模板，`winbeep`它完成并选择并停止频率等。除非我删除了uses子句中的单元部分（或者当然手动添加前缀），`windows.Beep(300, 100);`否则这不会在XE2上编译。我必须有单位名称，否则会被引用。`Winapi.``Windows``SysUtils.Beep`

我找不到指定模板位置的选项条目或注册表项或环境变量。它甚至与 无关`BDSUSERDIR`，事实上，我的计算机中什至没有目录，其路径为`BDSUSERDIR`（即`..\Documents\RAD Studio\9.0`）。这是我的疏忽吗？实际上可以选择重新定位代码模板？如果没有，是否可以让 IDE 在新表单的 uses 子句中使用单元别名？

**编辑：**
[这里](http://docwiki.embarcadero.com/RADStudio/en/Live_Templates)声明（我强调）*“您创建的模板（以及第三方插件提供的模板）**默认**保存在 \My Documents\RAD Studio\code templates\ 目录中。”* 这意味着应该有办法将它们保存在*非默认*位置。但文章没有提到如何。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-13T06:41:43.083

您可以将模板放入`"Delphi installation folder"\ObjRepos\en\Code_Templates`其中，使其仅在一个 Delphi 版本上可见。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T06:40:32.227

**编辑**

正如 Sertac 在评论中指出的那样，模板库与项目模板相关，而不是代码模板。保留此答案，因为它可能会帮助人们寻找构建/共享/拆分其项目模板存储库的方法。

* * *

在 Delphi XE2 中，“工具”菜单下有一个“模板库”选项。当你打开它时，你会得到这个对话框：

![在此处输入图像描述](../Images/cc30881c88a9c10a228820c97d26c560.png)

“添加”按钮允许您添加文件夹，“属性”按钮允许您查看和管理该存储库的内容。

所以在我看来，您可以简单地复制模板库，将其更改为 XE2 特定的内容，然后将 XE2 指向它自己的存储库。或者您可以仅对需要特定 XE2 单元处理的模板执行此操作。

# jpcap - 使用哪个 jpcap 库？

> ID：10134060
> 
> 赞同：4
> 
> 时间：2012-04-13T01:14:37.497
> 
> 标签：jpcap

我是 jpcap 的新手，一直在寻找一个最有用、最好、使用最广泛、最流行的 jpcap 库？

我遇到了这些 jpcap 库。

[http://netresearch.ics.uci.edu/kfujii/Jpcap/doc/](http://netresearch.ics.uci.edu/kfujii/Jpcap/doc/)上的那个？

，[http://jpcap.sourceforge.net/](http://jpcap.sourceforge.net/)上的那个？

，来自github的那个？，以及来自 jnetpcap.com/node 的那个

是否有更好的 jpcap 库或 Oracle 提供的标准 jpcap 库？

我想知道哪个jpcap库好用、最好、使用最广泛、最流行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-13T19:30:08.020

好吧，所有这些库都只是进行本机库调用的包装器。主库是用 C 语言编写的 libpcap。所有这些库，如 jpcap 和 jnetpcap，都只是在下面使用 libpcap。我已经使用了 jpcap 和 jnetpcap，根据个人经验，我建议您使用 jnetpcap，因为它更容易使用，有很好的示例文档，并且它有一个最近更新的版本。您可以从[http://jnetpcap.com下载它](http://jnetpcap.com)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T04:41:56.310

我使用[这个版本的 JPCAP](https://github.com/mgodave/Jpcap)。SourceForge 或 GitHub 上托管的其他版本`jpcap/jpcap`类似，但不支持发送数据包（它们只**捕获**数据包）。

# ruby-on-rails - 我如何正确放置这个红宝石代码？

> ID：10134065
> 
> 赞同：0
> 
> 时间：2012-04-13T01:15:30.113
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, erb, partial

我有一段代码显示了一个复杂的资源“列表”。复杂是指它具有名称、日期、发布时间、评论数量、图片、描述以及更多您显然只想编写一次代码块的内容。

我正在尝试考虑这将如何进入 Rails 架构，但我不知所措

我需要在不同的控制器中使用不同的变量来显示资源列表。目前它在一个名为 _resource_view.html.erb 的部分中

这对于主列表很好，但它不适用于人员资料列表，它采用相同的格式但显示不同的资源

_resources_expanded.html.erb

```
<ul class="res-list">
  <% @resources.each do |resource| %>
    ... list stuff
  <% end %>
</ul> 
```

它在索引上使用@resources，但在个人资料页面上，它使用相同的列表代码，除了它的`@user.resources.each do |resource|`

我在想可能是这样的，但这似乎是多余的..我什至不确定它是否会起作用

```
<ul class="res-list">
  <% @resources.each do |resource| %>
    <%= render 'layouts/resources_expanded' %>
  <% end %>
</ul> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T01:41:15.530

不要使用实例变量，在局部变量中使用局部变量——这让你每次通过`@resources.each`循环都传入一个变量。

```
<%= render 'layouts/resources_expanded', :resource => resource %> 
```

然后在 _resource_view.html.erb 中将 @resource 更改为 resource

# java - Java 更改按钮背景颜色

> ID：10134072
> 
> 赞同：1
> 
> 时间：2012-04-13T01:16:38.230
> 
> 标签：java, swing, background, jbutton

我正在使用 netbeans 创建桌面应用程序，我正在尝试使用代码更改 JButton、btn1 的背景颜色

> btn1.setBackground（颜色.红色）

但这不起作用。不改变按钮的填充颜色，只改变边框颜色。如何更改背景填充？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-13T01:28:25.263

请参阅[此](https://stackoverflow.com/questions/3420311/java-swing-button-colors/3420431#3420431)相关问题和答案。

> 特别是，您可以使用 setForeground() 更改按钮文本的颜色，但相应的 setBackground() 在某些平台上无法很好地阅读。使用边框是一种选择；如下所示的彩色面板是另一个。

您也可以尝试`setOpaque(true)`按下您的按钮。

# ios - iOS - 在模态视图控制器上设置 UISwitch 开/关状态

> ID：10134078
> 
> 赞同：1
> 
> 时间：2012-04-13T01:17:18.790
> 
> 标签：ios, boolean, modalviewcontroller, uiswitch

我在从 BOOL 设置 UISwitch 的状态时遇到问题。这可能很简单，所以如果有人可以提供帮助，我将不胜感激。这是我的代码，它不起作用，但它可能会更清楚。

```
 RoutingController *routingController = [[RoutingController alloc] initWithNibName:@"RoutingController" bundle:nil];

routingController.routingDelegate = self;

if (audioController->oscOneLFObool == YES) {
    routingController.oscOneLFOOneSwitch.on = YES;
} else {
    routingController.oscOneLFOOneSwitch.on = NO;
}

routingController.modalTransitionStyle = UIModalTransitionStyleCrossDissolve;

[self presentModalViewController:routingController animated:YES]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T04:31:49.703

RoutingController 的视图未加载，因此 oscOneLFOOneSwitch 为 nil。

在 [self presentModalViewController:routingController animated:YES] 中查看加载

# c# - 忍者和泛型

> ID：10134081
> 
> 赞同：3
> 
> 时间：2012-04-13T01:17:47.403
> 
> 标签：c#, entity-framework, ninject

我正在尝试使用 Ninject 重用 NopCommerce 代码进行数据访问。我的问题：如何将未指定的泛型类型注入对象？我知道 NopCommerce 使用 Autofac。

我的对象描述：我有控制器（`MyController`），它拥有存储库（`IRepository<T>`）。`EfRepository<T>`使用 ninject 命令注入此存储库： `kernel.Bind(typeof(IRepository<>)).To(typeof(EfRepository<>))`. `EfRepository`持有 typeof ，这`IDbContext`是通用的`DbContext`。 `EfRepository`不会将其泛型类型传递给`IDbContext`，但仍将其注入。使用 Ninject 是如何完成的？

编码;

```
public class MyController : Controller
{
    //a repository --> injected as EfRepository<> using generic injection using the command:
    //kernel.Bind(typeof(IRepository<>)).To(typeof(EfRepository<>));
    private readonly IRepository<Account> _repository;
}

public class EfRepository<T> : IRepository<T> where T : BaseEntity
{
    private IDbContext _context; //<<== How do I inject <T> to IDbcontext?
}

public interface IDbContext
{
    IDbSet<T> Set<T>() where T : BaseEntity;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T12:20:06.383

因为 IDbContext 不是通用的，您可以简单地将其注入存储库并在使用时将 T 传递给通用 Set 方法。

```
public class EfRepository<T> : IRepository<T> where T : BaseEntity
{
    private IDbContext context;
    public EfRepository(IDbContext dbContext)
    {
        this.context = context;
    }

    public void Do()
    {
        var dbSet = this.context.Set<T>();
    }
} 
```

# algorithm - 重新组织包含模数的公式

> ID：10134083
> 
> 赞同：2
> 
> 时间：2012-04-13T01:18:14.893
> 
> 标签：algorithm, math, puzzle, modulo

我有一个看起来像
a = (b + 1 + c)%d的公式
我想用休息来表达 c，即 LHS 上有“C”。
有什么建议么 ？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-13T01:21:29.133

```
a = (b + 1 + c)%d
a + n*d = b + 1 + c
a -1 - b + n*d = c 
```

对于任何整数`n`。

# iphone - 捕捉带有时间延迟的帧 - iPhone 相机

> ID：10134101
> 
> 赞同：2
> 
> 时间：2012-04-13T01:21:52.177
> 
> 标签：iphone, objective-c, xcode, camera

我正在尝试编写一些objective-c代码，允许在特定时间延迟后通过iPhone相机捕获帧。我在网上找到的任何示例都捕获了相机输入的“当前”帧（即实时帧捕获）。我正在寻找一种不太实时的帧捕获 - 一种捕获具有特定时间延迟的帧的方法。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T01:43:29.613

我会用`NSTimer`. 它将允许您使用捕获当前帧的代码，并在延迟后调用它。

您可以像这样创建一个非重复计时器：具体时间延迟`timer = [NSTimer scheduledTimerWithTimerInterval:delay target:self selector:@selector(capture) userInfo:nil repeats:NO];`在哪里，并且是一个方法，其中包含来自捕获当前帧的示例中的代码。`delay``capture`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T04:17:54.783

使用以下代码.....

//根据你需要的延迟调用方法.....

```
 float yourdelay;
    yourdelay = 0.7;
    [self performSelector:@selector(captureView) withObject:nil afterDelay:yourdelay]; 
```

// 或者设置调用方法的时间....

```
[NSTimer scheduledTimerWithTimeInterval:0.02 target: self selector:@selector(captureView) userInfo:nil repeats:NO]; 
```

///或者您可以在需要时直接调用方法..

```
[self captureView]; 
```

////这里是捕获实时图像的代码。

```
- (void)captureView {

UIGraphicsBeginImageContext(mapView.frame.size);
[self.view.layer renderInContext:UIGraphicsGetCurrentContext()];
UIImage *viewImage = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext();
flickerImaveView.image=viewImage;    
} 
```

希望对你有帮助....

# c - 如何在 UNIX 中为 C 程序编写 makefile

> ID：10134102
> 
> 赞同：0
> 
> 时间：2012-04-13T01:21:59.063
> 
> 标签：c, unix, makefile

我有一个程序 test.c，它需要包含一个头文件 common.h。我是编写 make 文件的新手，到目前为止，我只有 test.c 的正确 make 文件（它使用 openssl）：

```
 INC=/usr/local/ssl/include/
 LIB=/usr/local/ssl/lib/
 all:
       gcc -I$(INC) -L$(LIB) -o test test.c -lcrypto -ldl 
```

如何编辑上述文件以编译 common.h ？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T01:26:33.547

您不直接编译头文件。它们将包含`#include`在 C 文件中。如果 common.h 与 make 文件位于同一目录中，则无需添加任何内容。否则，您可能需要编辑 makefile 以添加包含头文件的其他文件夹：

```
INC=-I/usr/local/ssl/include/   \
    -I/path/to/another/folder/to/include
LIB=/usr/local/ssl/lib/
all:
       gcc $(INC) -L$(LIB) -o test test.c -lcrypto -ldl 
```

# qt - PyQt如何添加到QTextBrowser的链接

> ID：10134107
> 
> 赞同：1
> 
> 时间：2012-04-13T01:22:27.730
> 
> 标签：qt, qt4, pyqt4, pyside

我不知道为什么我很难找到这个，但是你如何添加一个超链接到`QTextEdit`or `QTextBrowser`？我正在尝试制作具有链接列表的东西，当您单击链接时，您将获得该链接所引用的对象。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-13T03:18:46.053

您需要将该`acceptRichText`属性设置为 true。然后，您可以使用`setHTML()`插槽传入 HTML。

`win.setHTML("<a href="http://foo>Bar</a>");`

# ruby-on-rails - Rails 2.3 的 EOL（生命周期结束）是什么？

> ID：10134109
> 
> 赞同：6
> 
> 时间：2012-04-13T01:22:32.363
> 
> 标签：ruby-on-rails, ruby-on-rails-2, end-of-life

Rails 2.3 的 EOL 日期是什么时候？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-05T23:25:03.860

2.3 于 2013 年 6 月 25 日达到 EOL，当时发布了 rails 4.0.0。

根据[Michael Koziarski](https://groups.google.com/forum/?fromgroups=#!topic/rubyonrails-security/G4TTUDDYbNA)的说法，只有“最后一个主要版本系列”才会收到补丁。因此，当 4.0 发布时，2.3 停止接收补丁。

Rails 团队曾希望更早地放弃对 2.3 的支持。在 2011-12-29 上，[亚伦说](https://github.com/rails/rails/pull/4202#issuecomment-3302010)：

> .. 我们没有发布另一个 2.3 版本的计划 [beyond 2.3.14]

在此之前，在 2011-06-08，[Aaron 说](http://weblog.rubyonrails.org/2011/6/8/ann-rails-2-3-12-has-been-released/)：

> 此分支 [2.3] 处于安全维护模式。我们会在出现“天塌下来”等问题或重大安全问题时发布。现在是我们专注于推动 Rails 前进的时候了！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-30T11:48:58.713

在版本达到 EOL（Rails 4 发布时）后，有一项[商业服务](http://railslts.com)将继续为 Rails 2.3 提供安全补丁。

# php - 显示 MySQL 表中的字段，但没有打印引号的字段

> ID：10134111
> 
> 赞同：0
> 
> 时间：2012-04-13T01:22:46.310
> 
> 标签：php, mysql, mysql-real-escape-string, stripslashes

我正在从 MySQL 表中获取数据以将其显示在页面上。该脚本正在显示信息，但在我的表中，我们插入了普通引号作为另一种类型的引号字符，例如。`( ’ )`并且`( “ ” )`当在 Microsoft Word 2010 中键入内容时，它们会自动以这种方式格式化，用于键入表中的大多数条目。所以我的猜测是那些是**特殊字符**。但是，每当我测试显示一个带有实际单引号的字段`( ' )`并且`( " " )`我收到一个**mysql_fetch_row 期望参数 1 是资源时，布尔给定**错误。这是我使用的代码：

```
$result = mysql_query("SELECT `question` FROM {$db_table_alt}");

while($field = mysql_fetch_row($result)) {
foreach($field as $fields) {

//build a unique section ID based on the ID that the Question belongs to
$uid = mysql_query("SELECT `id` FROM `questions` WHERE `question` LIKE '%$fields%'");
while($uidfield = mysql_fetch_row($uid)) { 
```

但是每当我使用此行时 ，将显示带有**真实引号**`$fields = mysql_real_escape_string(stripslashes($fields));` 的字段，但在引号前带有正斜杠。有人可以帮我找到解决方案吗？

 *** * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-04-13T01:41:22.730

如果`mysql_fetch_row()`正在抱怨一个布尔值，这意味着`mysql_query`要么没有返回任何行，要么 SQL 有一个错误（`mysql_error()`会告诉你哪个）。

如果您在返回数据中的引号之前收到反斜杠，那么它们将被放入数据库中。听起来像是`magic_quotes`启用了。你真的想把它关掉，因为它是一个过时的和破碎的问题解决方案。

另外，我认为您将不得不学习字符编码。恐怕默认的 MySQL 安装不会是 UTF8，它可能是 ISO-8859-15。Word 过去喜欢在 Windows-1252 中编写文本，现在不一样了。然后，无论使用何种浏览器、网站和其他与数据库通信的东西，它都会变得更加复杂。我相信 PhpMyAdmin 会尝试在 UTF8 中运行，因此如果它们不是 UTF8 ，数据*将被转换为您的表。*这也会影响您寻找“智能报价”的查询。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-13T01:44:46.400

您在这里似乎有两个明显的问题。

其中一个`$result`是对布尔值求值，这意味着生成的查询中存在错误 ( `SELECT question FROM {$db_table_alt}`)。尝试回显该查询并手动运行它。可能是由命名的表/视图`{$db_table_alt}`不存在。

第二个是字符串转义问题。我希望引号在数据库中被转义 -`mysql_real_escape_string`在查询上使用不会改变返回的结果是否被转义。

此外，如果您在数据库中的数据被斜杠转义，您应该阅读魔术引号以及如何处理它们： [PHP docs on magic quotes](http://php.net/manual/en/security.magicquotes.php)。从数据库中提取数据时，您不必进行任何字符串转义。**

# cakephp - 另一个自动日期字段，例如在 CakePHP 中创建和更新

> ID：10134112
> 
> 赞同：0
> 
> 时间：2012-04-13T01:22:53.047
> 
> 标签：cakephp

我已经知道我可以在数据库表中创建名为“created”和“updated”的字段，并且 Cake 会自动插入适当的值。

但是，我想做的是创建一个名为“跟进”的新字段，并让 Cake 在插入新记录时自动插入今天的日期加上 2 周。换句话说，它就像创建日期一样，但在未来 2 周。

我知道我可以在控制器中手动执行此操作，但我想知道是否有办法在模型/行为级别执行此操作，以便无论哪个控制器操作正在创建新记录，它都会自动发生。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T01:37:11.490

您可以简单地`beforeSave`在模型中使用回调：

```
public function beforeSave(array $options) {
    if (empty($this->data[$this->alias]['id']) && !$this->id) {
        $this->data[$this->alias]['followup'] = date('Y-m-d H:i:s', strtotime('+2 weeks'));
    }
    return true;
} 
```

这会自动将`followup`日期添加到任何新记录（不带`id`）。

# java - 如何使用 openssl 模拟 Java Signature 签名方法？

> ID：10134115
> 
> 赞同：3
> 
> 时间：2012-04-13T01:23:42.683
> 
> 标签：java, cryptography, openssl

我正在使用需要登录 URL 的那部分包括身份验证的服务器。该方案的工作方式（如手册中推荐的那样）是

*   使用 Java JDK keytool 生成公钥/私钥对（在 Java 密钥库中创建它们）
*   使用 Java JDK keytool 为密钥对生成证书
*   证书安装在服务器上。

登录客户端时（我的代码）

*   生成明文令牌字符串
*   使用 SHA1 和 DSA 使用私钥对明文令牌字符串进行签名
*   在登录 URL 中包含签名的令牌字符串。

Java keytool 不提供从密钥库中导出私钥的机制，但另外我有 Java 代码从密钥库中提取私钥并将其保存在文件中 - 基于[如何从密钥库？](https://stackoverflow.com/questions/150167/how-do-i-list-export-private-keys-from-a-keystore).

当客户端使用 Java 进行签名时，这一切都有效，代码如下。

```
String plaintext = "This is a sample plaintext token string";
Signature instance = Signature.getInstance("SHA1withDSA");
instance.initSign(privateKey);
instance.update((plaintext).getBytes());
byte[] signature = instance.sign(); 
```

当客户端使用 PHP 进行签名时，它也可以工作，代码如下。这里的私钥是从 PHP 中的 Java 密钥库文件中检索的。]

```
$privateKey = openssl_pkey_get_private("file://$keyfile", $keystorePassword);
openssl_sign($paramsEncoded, $signature, $privateKey, OPENSSL_ALGO_DSS1)) 
```

但是，我现在遇到一种情况，客户想要使用 Bash 脚本和 openssl 构建登录 URL - 这不起作用。我的该代码的最新版本如下所示，它执行 SHA1 消息摘要，然后执行 DSA 签名。但是服务器拒绝了令牌。

```
echo $tokenString | openssl dgst -sha1 > tokendigest
openssl dgst -dss1 -passin pass:$storePassword -sign $privateKeyFile > tokensigned 
```

我遇到了这篇文章（[Using SHA1 and RSA with java.security.Signature vs. MessageDigest and Cipher](https://stackoverflow.com/questions/521101/using-sha1-and-rsa-with-java-security-signature-vs-messagedigest-and-cipher)）这表明Java签名签名方法不对摘要进行签名，而是对摘要算法ID和摘要的串联进行签名. 在逐步浏览帖子中的代码后，似乎（对于 SHA1）摘要需要以 bytes 为前缀`48 33 48 9 6 5 43 14 3 2 26 5 0 4 20`。但即使在添加之后，我仍然无法让 opensll 生成服务器可以接受的签名令牌。

有谁知道如何使用 openssl 来模拟 Java Signature 签名方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T17:08:10.457

另一个帖子是红鲱鱼。DSA 的工作方式与 RSA 不同，并且不使用 MessageDigest 前缀。

但`openssl dgst -dss1`应该直接工作（它包括 SHA1 消化）。

你试过这个吗？

```
echo -n $tokenString |
  openssl dgst -dss1 -passin pass:$storePassword -sign $privateKeyFile > tokensigned 
```

# perl - 从属性中获取属性值

> ID：10134117
> 
> 赞同：0
> 
> 时间：2012-04-13T01:23:56.083
> 
> 标签：perl, metaprogramming, moose

在我正在编写的 Moose 扩展中，我试图从属性中访问属性值，而不通过访问器，但我似乎无法做到这一点。

我正在尝试编写此代码

```
{
    package Test;
    use Moose;
    use MooseX::RemoteName; #provides magic

    has attr0 => (
        isa         => 'Bool',
        is          => 'ro',
        default     => sub { 1 },
        serializer  => sub {
           my $s = shift;
           return $s->get_value( $s ) ? 'Y' : 'N';
        }, 
    );

    has attr1 => (
       isa => 'Str',
       is  => 'ro',
    )
} 
```

这样我就可以（从我的测试中）

```
my $t0 = Test->new({ attr1 => 'foo' });

isa_ok my $attr0 = $t0->meta->get_attribute('attr0'), 'Class::MOP::Attribute';
is $attr0->serialized,  'Y',    'remote_name serializes';

isa_ok my $attr1 = $t0->meta->get_attribute('attr1'), 'Class::MOP::Attribute';
is $attr1->serialized,  'foo',    'remote_name serializes'; # undef 
```

这就是我在扩展中尝试的

```
has serializer => (
    isa       => 'CodeRef',
    is        => 'ro',
    lazy      => 1,
    default   => sub {
        return sub {
            my $arg = shift;
            return $arg->get_value( $arg->associated_class );
        }
    },
);

sub serialized {
    my $self = shift;

    my $coderef = $self->serializer;

    return &$coderef( $self );
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T05:15:16.973

我的问题似乎有两个方面，我的匿名子例程没有正确完成，我需要将对象的实例传递给匿名子例程。

这似乎在我的 Moose 扩展中工作

```
has serializer => (
    predicate => 'has_serializer',
    traits    => ['Code'],
    is        => 'ro',
    default   => sub {
        return sub {
            my ( $self, $instance ) = @_;
            return $self->get_value( $instance );
        }
    },
    handles   => {
        serializing => 'execute_method',
    },
);

sub serialized {
    my ( $self, $instance ) = @_;

    return $self->serializing( $instance );
} 
```

然后允许我写以下内容（略有不同）

```
package Test;
use Moose;
use MooseX::RemoteName;

has attr0 => (
    isa        => 'Bool',
    is         => 'ro',
    lazy       => 1,
    default    => sub { 1 },
    serializer => sub {
        my ( $attr, $instance ) = @_;
        return $attr->get_value( $instance ) ? 'Y' : 'N';
    },
); 
```

它将毫无问题地通过此测试

```
subtest t0 => sub {
    my $t = Test->new;

    is $t->attr0, 1, 'attr0 is 1';

    isa_ok my $attr0 = $t->meta->get_attribute('attr0'), 'Class::MOP::Attribute';

    is $attr0->serialized( $t ),  'Y',    'attr0 serializes';
    isa_ok $t, 'Test';
}; 
```

我认为我可以将实例传递进去，尽管我不完全确定为什么`get_value`需要这样做。

# java - Java：键监听器

> ID：10134123
> 
> 赞同：1
> 
> 时间：2012-04-13T01:25:01.173
> 
> 标签：java, keylistener

我只是想知道是否可以向 Java 应用程序之外的组件添加一个关键侦听器。换句话说，当焦点不在 java 应用程序上时，我需要做什么才能检测键入的键？

提前致谢，

S。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T01:38:35.103

不幸的是，您无法检测到在 Java 应用程序之外运行的程​​序的关键事件。如果你想这样做，你必须用本地语言（C、C++ 等）编写你的程序。

# python - 使用前必须在 Python 中定义变量吗？

> ID：10134127
> 
> 赞同：4
> 
> 时间：2012-04-13T01:25:29.820
> 
> 标签：python

Python 是否很像 PHP，因为我可以调用一个变量，如果它不存在，它将被创建？或者我需要声明它们？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-13T01:27:31.360

在 PHP 中，如果你调用一个变量并且它不存在，你会得到`Notice: Undefined variable`. 这不会创建它 - 再次执行相同的操作仍会返回警告。

```
php > echo $some_uninitialized_var;
PHP Notice:  Undefined variable: some_uninitialized_var in php shell code on line 1
php > echo $some_uninitialized_var;
PHP Notice:  Undefined variable: some_uninitialized_var in php shell code on line 1 
```

在 Python 中，如果你调用一个变量并且它没有被初始化，你会得到一个`NameError`. 同样的事情 - 它不会被创建 - 在`NameError`你真正初始化它之前你会得到。

```
>>> print(some_uninitialized_var)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
NameError: name 'some_uninitialized_var' is not defined

>>> print(some_uninitialized_var)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
NameError: name 'some_uninitialized_var' is not defined 
```

### 没有声明的初始化：

但是，在 PHP 和 Python 中，与 C 不同，您不需要在首次使用变量之前*声明变量，这可能就是您的意思。*您可以只分配它们，它们将在第一次分配时创建。

```
// PHP
$a_new_var = 12345;
// All is well...

# Python
a_new_var = 12345
# All is well...

// C
a_new_var = 12345;
// Crash! Horror! Compiler complains!
int a_new_var;
a_new_var = 12345;
// ok... 
```

# python - Python：从没有图片扩展名的链接下载图片

> ID：10134128
> 
> 赞同：-3
> 
> 时间：2012-04-13T01:25:33.610
> 
> 标签：python

我将如何从以下链接下载图片：

[http://cdn.svcs.c2.uclick.com/c2/332b584051f7012f2fd300163e41dd5b](http://cdn.svcs.c2.uclick.com/c2/332b584051f7012f2fd300163e41dd5b)

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-13T01:43:44.157

python的urllib2模块。您可以检查 url 的 mime 类型。

```
In [8]: import urllib2

In [9]: img = urllib2.urlopen('http://cdn.svcs.c2.uclick.com/c2/332b584051f7012f2fd300163e41dd5b')

In [10]: img.info().type
Out[10]: 'image/jpeg' 
```

然后就可以通过 img.read() 访问内容了

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T01:39:06.817

您可以使用python 的[`urllib`](http://docs.python.org/library/urllib.html)or`urllib2`模块并将 url 的内容写入名为`test.jpg`以模式打开的文件中`write-binary`。

```
>>> import urllib
>>> f = open('test.jpg','wb')
>>> f.write(urllib.urlopen('http://cdn.svcs.c2.uclick.com/c2/332b584051f7012f2fd300163e41dd5b').read())
>>> f.close() 
```

# string - 用于解析可能引用字段的字符串的通用 shell/bash 方法？

> ID：10134129
> 
> 赞同：2
> 
> 时间：2012-04-13T01:25:39.790
> 
> 标签：string, bash, parsing, textfield

在编写 munin 脚本时，我经常需要解析配置文件以寻找一些路径。

没有强标记（即不是 XML）的配置文件的问题是这些路径可以有多种语法：

*   单引号 (') 或双引号 (") 或不带引号
*   包含空格（如果字符串未加引号，则转义）
*   包含引号（通常是单引号）

例如，我正在寻找一种方法来解析以下行以提取路径（这一次，在第一个位置）：

```
/mnt/DirWithoutSpaces/ "Dir1" cnidscheme:dbd perm:0775 options:usedots,upriv
/mnt/Dir\ With\ Space/ Dir2 cnidscheme:dbd options:usedots,upriv
"/mnt/Dir With Space And D-quote" Dir3
'/mnt/Dir With Space And S-quote' Dir4
~/ "Dir 5" cnidscheme:dbd
"/mnt/Dir'ed" "Dir 6" cnidscheme:dbd 
```

我通常会使用bash 运算符 ( ) `ERE`，但每次都让我头疼。`=~``[[ $string =~ $pattern ]]`

我很确定任何变量修饰，，，`cut`都`awk`可以`sed`非常有用并自动处理引号和其他东西，但我找不到那个特殊的神奇配方。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T02:23:19.510

您可以尝试以下`-P (--perl-regexp)`选项`grep`：

```
$ grep -oP "^(\\\\ |[^ '\"])*" input.txt
/mnt/DirWithoutSpaces/
/mnt/Dir\ With\ Space/
~/

$ grep -oP "^(['\"]).*?\1" input.txt
"/mnt/Dir With Space And D-quote"
'/mnt/Dir With Space And S-quote'
"/mnt/Dir'ed" 
```

* * *

```
$ grep -oP "^(['\"]).*?\1|^(\\\\ |[^ '\"])*" input.txt
/mnt/DirWithoutSpaces/
/mnt/Dir\ With\ Space/
"/mnt/Dir With Space And D-quote"
'/mnt/Dir With Space And S-quote'
~/
"/mnt/Dir'ed" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-26T22:48:34.867

我写了几个本机 bash 函数来做到这一点：[https ://github.com/mblais/bash_ParseFields](https://github.com/mblais/bash_ParseFields)

您可以`ParseFields`像这样使用该功能：

```
$ str='field1 field\ 2 "field 3"'
$ ParseFields -d "$str" a b c d
$ printf "|%s|\n|%s|\n|%s|\n|%s|\n" "$a" "$b" "$c" "$d"
|field1|         
|field 2|
|field 3|
|| 
```

ParseFields的`-d`选项会删除任何周围的引号并解释解析字段中的反斜杠。

还有一个更简单的`ParseField`函数（由 使用`ParseFields`）解析字符串中特定偏移量的单个字段。

请注意，这些函数无法解析*流*，只能解析字符串。IFS 变量还可用于指定除空格之外的字段分隔符。

如果您要求未转义的撇号可能出现在*未引用*的字段中，则需要稍作更改 - 让我知道。

# git - 为什么重新合并分支会忽略一些更改？

> ID：10134132
> 
> 赞同：0
> 
> 时间：2012-04-13T01:25:55.517
> 
> 标签：git, merge

场景：我们遵循 git 工作流程：

**master**分支 - 具有来自各个功能分支的可发布代码

**to-be-QAd**分支 - 具有尚未由 QA 测试的各个功能分支的代码

1.  我从**master**创建了一个分支**feature-A**
***   提交了一些更改（**提交 1**）*   做了一些更改并提交（**提交 2**）*   将分支**功能-A**合并到**to-be-QAd**分支*   **意识到该功能在to-be-QAd**分支中无法按预期工作*   切换到**feature-A**分支并将 --hard 重置为上一次提交（**commit 1**），因为最后一次提交使代码变得更糟*   进行更改并提交（**提交 3**）*   **将 feature-A**分支合并到**to-be-QAd***   具有正确代码的文件（这是**commit-1**的一部分）被错误地合并。合并保留来自**提交 2**的文件。（该文件在上次提交时未修改。）**

 **不知道这里做错了什么！根据我对git的有限知识，这似乎是一件非常微不足道的事情。

如果我做的事情根本上是错误的，那么在这种情况下正确的方法是什么，你已经合并了一次，需要回到功能分支中的先前版本并再次合并。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T01:33:11.133

`git reset --hard`只是重置`HEAD`指针。你可能想要做`git revert <commit-id>`. 这有效地撤消了提交并将其记录在历史记录中，以便撤消操作将合并到您的 QA 分支中。

这是来自`git help revert`：

> 给定一个或多个现有提交，还原相关补丁引入的更改，并记录一些记录它们的新提交。这要求您的工作树是干净的（不修改 HEAD 提交）。
> 
> 注意： git revert 用于记录一些新的提交，以扭转一些早期提交的效果（通常只是一个错误的提交）。如果您想丢弃工作目录中所有未提交的更改，您应该看到 git-reset(1)，尤其是 --hard 选项。...

相关：[Git Revert、Checkout 和 Reset 有什么区别？](https://stackoverflow.com/q/8358035/946850)以及[如何将 Git 存储库恢复到以前的提交？](https://stackoverflow.com/q/4114095/946850).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T01:37:57.427

**to-be-QAd**分支仍然有来自 commit2的更改和其他一些不正确的文件，因为您从第一次引入**feature-A**时就没有撤消合并。

在进行修复后第二次合并**feature-A之前，我会在****to-be-QAd**分支上运行 git reset --hard 在第一次合并之前提交的 id

**编辑！**

如果其他开发人员在初始合并后将功能提交为 QAd，这可能会导致问题。如果这样做，请注意您将退出的提交。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T05:20:51.157

当您在功能 A 分支上执行“git reset”时，您返回到 commit-1，然后添加了 commit-3。但是在 to-be-QAd 分支上，您仍然有 commit-1 和 commit-2。然后，当您将 feature-A 合并到 to-be-QAd 时，您会得到以下内容：commit-1、comment-2 和 commit-3-merged。因此，commit-2 中的某些东西可能仍然存在。您可以通过以下几种方式解决问题：

1.  在 feature-A 和 to-be-QAd 上执行“git reset”，将 commit-3 添加到 feature-A，合并到 to-be-QAd
2.  对功能 A 执行“git revert”以添加取消提交 2 的提交，添加提交 3 - 在此之后，您的功能 A 分支将如下所示：commit-1、commit-2、commit-2-撤消，提交-3。然后，合并到将得到 commit-2-undo 和 commit-3 的 to-be-QAd**

# javascript - 如何向现有的 jQuery 插件添加 kill 方法？

> ID：10134133
> 
> 赞同：0
> 
> 时间：2012-04-13T01:25:58.770
> 
> 标签：javascript, jquery, jquery-plugins, loops, settimeout

我正在使用发布在以下位置的插件代码：

[jQuery 提示和技巧](https://stackoverflow.com/questions/182630/jquery-tips-and-tricks/2750689#2750689)

...这本质上是一个异步计时器循环：

```
jQuery.forEach = function (in_array, in_pause_ms, in_callback)
{
    if (!in_array.length) return; // make sure array was sent

    var i = 0; // starting index

    bgEach(); // call the function

    function bgEach()
    {
        if (in_callback.call(in_array[i], i, in_array[i]) !== false)
        {
            i++; // move to next item

            if (i < in_array.length) setTimeout(bgEach, in_pause_ms);
        }
    }

    return in_array; // returns array
};

jQuery.fn.forEach = function (in_callback, in_optional_pause_ms)
{
    if (!in_optional_pause_ms) in_optional_pause_ms = 10; // default

    return jQuery.forEach(this, in_optional_pause_ms, in_callback); // run it
}; 
```

在这个伟大社区的帮助下，我了解到如果我“回归真实”；或“返回错误；” 它与继续循环的下一次迭代具有相同的效果。

我想做的是以编程方式完全杀死（销毁） $.forEach 循环调用，不允许剩余的迭代运行。

我如何向该插件添加一个方法，以允许我终止对该插件的特定调用，同时不影响同时运行的其他调用？

我考虑过将调用分配给这样的变量：

```
var foo = $.forEach(json, 1000, function(idx,item) { /* do stuff */ }); 
```

...稍后引用特定实例而不影响其他实例，但是如何添加 kill 方法并在 foo 上调用它？我需要与 ajax 调用一起使用的 foo.abort() 等效项。

可以做到吗？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T01:39:42.527

这实际上只是示例代码，所以它有一些问题。

您可以通过简单地将 expando 属性添加到 in_array 对象来缓解这种情况：

```
jQuery.forEach = function (in_array, in_pause_ms, in_callback)
{
    // Note, you should use $.isArray(), which is smarter than checking length.
    if (!$.isArray(in_array)) return false;
    in_array.valid = true;
    var i = 0; // starting index
    function bgEach()
    {
        if (!in_array.valid) return;
        if (in_callback.call(in_array[i], i, in_array[i]) !== false)
        {
            i++; // move to next item

            if (i < in_array.length) setTimeout(bgEach, in_pause_ms);
        }
    }

    // I moved this because you were calling it before it was defined.
    bgEach(); // call the function
    return in_array; // returns array
}; 
```

由于您从方法中获取原始数组对象，因此您可以在完成后将对象的“有效”属性设置为 false：

```
var foo = $.forEach(json, 1000, function(idx,item) { /* do stuff */ });
foo.valid = false; 
```

由于该`valid`属性取消了 setTimeout 递归，这将有效地终止循环。

请注意，这种代码有些危险。你会遇到竞争条件等等，但是当你开始在 JS 中执行伪线程和异步代码时就会发生这种情况。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-13T05:37:50.773

您可以将计时器传递给回调并更改

```
if (i < in_array.length) setTimeout(bgEach, in_pause_ms); 
```

至

```
if (i == in_array.length) clearTimeout(timeout); 
```

这将保证它只会循环与项目一样多的次数。

这是 jQuery forEach：

```
jQuery.forEach = function (in_array, in_pause_ms, in_callback)
{
    if (!in_array.length) return; // make sure array was sent

    var i = 0; // starting index

    bgEach(); // call the function

    function bgEach(){
        var timeout;
        if (in_callback.call(in_array[i], i, in_array[i], timeout = setTimeout(bgEach, in_pause_ms)) !== false)
        {
            i++; // move to next item
            // if end of array, stop iterating
            if (i == in_array.length) clearTimeout(timeout);
        }
    }

    return in_array; // returns array
}; 
```

如果计时器满足某些条件，您可以使用它来清除计时器，从而结束循环。例子：

```
$.forEach([1,2,3], 1000, function(idx, item, timer) {
  if(item == 2) {
    clearTimeout(timer);
  }
}); 
```

# java - 在 JPanel 中绘制时未绘制任何内容

> ID：10134137
> 
> 赞同：2
> 
> 时间：2012-04-13T01:27:19.963
> 
> 标签：java, swing, user-interface, graphics, paintcomponent

我正在尝试在 JPanel 中绘制一个矩形，但是它不会显示出来，但是它可以在框架中使用。

如果你取消注释 //frame.getContentPane().add(rect); //将绘制如果它在框架和注释 frame.getContentPane().add(panel); // 但不在面板中，矩形将绘制。

谢谢您的帮助。

```
import java.awt.Color;
import java.awt.Dimension;
import java.awt.Graphics;
import java.awt.Graphics2D;

import javax.swing.JComponent;
import javax.swing.JFrame;
import javax.swing.JPanel;

public class DrawingRect{

    public static void main(String[] args) {
        DrawingRect d = new DrawingRect();
    }

  public DrawingRect(){

     JFrame frame = new JFrame("Drawing a rect");
     frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
     frame.setPreferredSize(new Dimension (500,500));

     Rect rect = new Rect();

     JPanel panel = new JPanel();
     panel.setPreferredSize(new Dimension (500,500));
     panel.setVisible(true);

     panel.add(rect);

    //frame.getContentPane().add(rect); //Will draw if its in the frame
    frame.getContentPane().add(panel); // but not in the panel

     frame.pack();
     frame.setVisible(true);  

     panel.repaint();
     frame.repaint();

  }

  public class Rect extends JComponent{

    private static final long serialVersionUID = 1L;

        public void paint(Graphics g)
        {
            g.setColor(Color.black);
            g.drawRoundRect(10, 10, 100, 100, 20, 20);  
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-13T02:01:10.020

您的 Rect 画得很好，但它非常非常小！要明白我的意思，请在渲染后显示它的大小：

```
 Rect rect = new Rect();
  rect.setBorder(BorderFactory.createTitledBorder("rect"));

  JPanel panel = new JPanel();
  panel.setPreferredSize(new Dimension(500, 500));
  panel.setVisible(true);

  panel.add(rect);

  // frame.getContentPane().add(rect); //Will draw if its in the frame
  frame.getContentPane().add(panel); // but not in the panel

  frame.pack();
  frame.setVisible(true);

  System.out.println(rect.getSize()); 
```

你会得到类似的东西：

```
java.awt.Dimension[width=1,height=1] 
```

这意味着它只有 1 像素乘 1 像素——太小而无法看到。

解决方案是使用适当的布局并给它一个首选大小，以便它显示。例如，

```
 public class Rect extends JComponent {

      private static final long serialVersionUID = 1L;
      private static final int PREF_W = 150;
      private static final int PREF_H = 150;

      @Override
      // public void paint(Graphics g) {
      protected void paintComponent(Graphics g) {
         super.paintComponent(g);
         g.setColor(Color.black);
         g.drawRoundRect(10, 10, 100, 100, 20, 20);
      }

      @Override
      public Dimension getPreferredSize() {
         return new Dimension(PREF_W, PREF_H);
      }
   } 
```

此外，使用 JComponent 的paintComponent 方法而不是它的paint 方法进行绘制。

# jquery - 如何测试两个输入字段是否为空？

> ID：10134138
> 
> 赞同：0
> 
> 时间：2012-04-13T01:27:22.143
> 
> 标签：jquery

嗨，有人可以告诉我这条线有什么问题（出错...）

```
if ($("input[type=file]").val().length !==0) || $("#book_map_keys").val().length !==0) {
// do something
} 
```

正如您可能看到的，我正在测试这两个输入字段中的任何一个是否为空。（它们不必都是空的）

如果您能建议如何重写，我将不胜感激。

//编辑：错误指向“或”管道字符。添加这些引号并没有解决它，无论如何，谢谢大卫

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-13T01:29:34.123

你有一个不匹配的括号错误

```
// Your line
if ($("input[type=file]").val().length !==0) || $("#book_map_keys").val().length !==0)
// The corrected line
if ($("input[type=file]").val().length !==0 || $("#book_map_keys").val().length !==0) 
```

# java - 如何在android上解析XML

> ID：10134139
> 
> 赞同：0
> 
> 时间：2012-04-13T01:27:25.560
> 
> 标签：java, android, xml-parsing

我正在使用此代码用 Java 解析 xml 文件，但它不适用于 android SDK

```
 try {
        URL url = new URL("http://example.com/file.xml");
        DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
        DocumentBuilder db = dbf.newDocumentBuilder();
        Document doc = db.parse(url.openStream());

        NodeList nodeList = doc.getElementsByTagName("item");

        for (int i = 1; i < nodeList.getLength(); i++) {
            Element element = (Element)nodeList.item(i);
            System.out.println(element.getFirstChild().getNodeValue());
        }

    } catch (ParserConfigurationException parserConfigurationException) {
    } catch (SAXException sAXException) {
    } catch (IOException iOException) {
    } 
```

当我尝试将值放入字符串时`value always = null`！怎么了 ？？？

PS：该应用程序具有互联网权限

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T01:56:52.550

根据 XML 格式，有时我们可能还需要使用`getTextContent()`or `getAttribute()`。您能否尝试使用`getTextContent`而不是`getNodeValue`一次。

另一种最佳选择是调试。保留一些调试点并检查子节点是什么以及节点包含的信息是什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T01:40:09.250

您可以使用类似的东西解析 XML：

1.  通过发出 HTTP 请求获取 XML 内容
2.  解析 XML 内容并获取 xml 的 DOM 元素。
3.  通过传递元素节点名称获取每个 xml 子元素值。

# c++ - 我的 SQL 查询被切断

> ID：10134141
> 
> 赞同：1
> 
> 时间：2012-04-13T01:27:37.907
> 
> 标签：c++, qt4, mingw32

我有这堂课：

```
#include <QSqlError>
#include <QMessageBox>
#include <QCompleter>
#include <QFile>
#include <QTextStream>
#include <QSqlQueryModel>

#include "items.h"

Items::Items(Ui::Store *setui)
{
    form = setui;
}

void Items::getItem(int index, QString item)
{
    if(index == 1)
    {
        sqlQuery = "SELECT * FROM Items WHERE Name='" + item + "'";
        query.exec(sqlQuery);
        query.next();
        rec = query.record();

        form->itemNumManMod->setText(query.value(rec.indexOf("ID_I")).toString());
        form->purchaseManMod->setText(query.value(rec.indexOf("Purchase")).toString());
        form->saleManMod->setText(query.value(rec.indexOf("Sale")).toString());
        form->countityManMod->setText(query.value(rec.indexOf("Countity")).toString());
        form->totaleManMod->setText(query.value(rec.indexOf("Totale")).toString());
        form->minimumManMod->setText(query.value(rec.indexOf("Minimum")).toString());
        form->restManMod->setText(query.value(rec.indexOf("Rest")).toString());
        form->wsPriceManMod->setText(query.value(rec.indexOf("Vendor")).toString());
        form->wsNumManMod->setText(query.value(rec.indexOf("Min")).toString());
        QString x = idToCategory(3);
        QMessageBox::critical(0, "dd", x);
    }
    else if(index == 2)
    {
        sqlQuery = "SELECT * FROM Items WHERE Name='" + item + "'";
        query.exec(sqlQuery);
        query.next();
        rec = query.record();

        form->itemNumManDel->setText(query.value(rec.indexOf("ID_I")).toString());
        form->itemNameManDel->setText(query.value(rec.indexOf("Name")).toString());
        form->purchaseManDel->setText(query.value(rec.indexOf("Purchase")).toString());
        form->saleManDel->setText(query.value(rec.indexOf("Sale")).toString());
        form->countityManDel->setText(query.value(rec.indexOf("Countity")).toString());
        form->totaleManDel->setText(query.value(rec.indexOf("Totale")).toString());
        form->minimumManDel->setText(query.value(rec.indexOf("Minimum")).toString());
        form->restManDel->setText(query.value(rec.indexOf("Rest")).toString());
    }
    else if(index == 0)
    {
        sqlQuery = "SELECT ID_I, Sale FROM Items WHERE Name='" + item + "'";
        query.exec(sqlQuery);
        query.next();
        rec = query.record();
        form->numSaleAdd->setText(query.value(rec.indexOf("ID_I")).toString());
        form->priceSaleAdd->setText(query.value(rec.indexOf("Sale")).toString());
    }
}

QString Items::idToCategory(int id)
{
    sqlQuery = "SELECT Name FROM Category WHERE ID_C=" + id;
    query.exec(sqlQuery);
    query.next();
    rec = query.record();
    QString name = query.value(rec.indexOf("Name")).toString();
    return query.lastQuery();
} 
```

当我调用`idToCategory()`方法时，它返回：

```
ECT Name FROM Items WHERE ID_C= 
```

但它应该返回如下内容：

```
SELECT Name FROM Items WHERE ID_C=3 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T01:50:14.973

```
 sqlQuery = "SELECT Name FROM Category WHERE ID_C=" + id; 
```

您正在向指针添加一个整数值。试试这个：

```
sqlQuery = QString("SELECT Name FROM Category WHERE ID_C=%1").arg(id); 
```

或者更好的是，使用准备好的语句，并绑定值：

```
sqlQuery = "SELECT Name FROM Category WHERE ID_C = :id";
query.prepare(sqlQuery);
query.bindValue(":id", id);
query.exec(); // note that you should be testing the return value of exec() 
```

PS：对于您的其他查询，您应该`QDataWidgetMapper`使用`QSqlTableModel`, 将所有字段值一次性映射到每个小部件，而不是手动重新分配值。

# jquery - 在 JQuery 中查找一个 div

> ID：10134143
> 
> 赞同：1
> 
> 时间：2012-04-13T01:27:48.107
> 
> 标签：jquery, asp.net

这就是我正在做的事情，这是一个粗略的设计，现在我确定它会在我发布时出现。

```
--------------------------------------------------------------------

first name goes here.....
---------------------------------------------------------------------
datetime                                          buttons
--------------------------------------------------------------------- 
```

下面的代码在使用 with时有效，`tr`但现在我使用的`divs`是我需要放什么，`div id`？

```
 <script type="text/javascript">
        function OnSave(obj) {
        debugger
            // Find the row this button is in
            var tr = $(obj).closest("tr");
            // Get the value from the edit control
            var firstNameEdit = tr.find("[id*='firstNameEdit']").val();
            // assign value to hidden input
            tr.find("[id*='firstNameHidden']").val(firstNameEdit);
            var lastNameEdit = tr.find("[id*='lastNameEdit']").val();
            tr.find("[id*='lastNameHidden']").val(lastNameEdit);
        }
    </script> 
```

这是我带有 div 的新 html 代码：

```
<div class='columns'>
<div class='subj'> 
<div id="container">
      <asp:PlaceHolder runat="server" ID="firstNameEditPlaceholder" />
      <input type="hidden" runat="server" id="firstNameHidden" visible="false" />
<br />
 <br />
 <div id="left"></div>
 <!-- left -->
 <div id="right"></div>
 <!-- right -->
 <div class="clear">
 </div>
 </div>
 <!-- container -->
 </div>
 </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T01:34:34.347

尝试：

```
 var tr = $(obj).closest("tr");

       //change to

        var tr = $(obj).closest("div"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T01:31:46.737

你有没有尝试过

```
$('#firstNameHidden').val($('#firstNameEditPlaceholder').val()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T02:32:27.210

这是我能够得到的：

```
var _name = $("#[id*='firstNameHidden']").val(); 
```

# warnings - libpng 警告：忽略错误的自适应滤波器类型

> ID：10134150
> 
> 赞同：5
> 
> 时间：2012-04-13T01:29:10.047
> 
> 标签：warnings, kill, libpng

我的应用程序被杀死，并且日志：libpng 警告：忽略错误的自适应过滤器类型。我想知道原因和解决方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-07-08T22:12:42.380

该问题提供的信息不足，无法提供完整的答案。

“错误的自适应过滤器类型”消息意味着 PNG 文件已损坏或由错误的编码器生成。

PNG 文件的每个扫描线都以“过滤器类型”字节开头，该字节必须为 0、1、2、3 或 4。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-04-13T10:00:01.780

我之前遇到过这个问题，图像因未知原因损坏，捕获此类错误的解决方案可以使用以下代码（在 Python 中）：

```
try:
    Image.open(path).tobytes()
except IOError:
    print('detect error img %s' % path)
    continue 
```

# php - PHP Smarty money_format 和非双字符串

> ID：10134154
> 
> 赞同：0
> 
> 时间：2012-04-13T01:29:50.380
> 
> 标签：php, smarty

PHP Smarty 一直在抱怨，因为我的可变货币不是我无法使用的双精度数`money_format`，现在我正试图转换`$money`成双精度数，我该怎么做？

```
$money = 100;
$money|string_format:"01.2f"|money_format:"%(#10n" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T01:33:46.720

试试这个：

```
$money = 100.0;
$money|money_format:"%(#10n" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T01:38:12.753

您可以[将](http://php.net/manual/en/language.types.type-juggling.php#language.types.typecasting)值强制转换为双精度或添加`0.0`到它以转换类型。

```
$money = (double)$money;
// or 
$money += 0.0; // now float 
```

`sprintf`or`string_format`仍然会导致该值是一个字符串，即使它看起来是一个双精度值。

# eclipse - Eclipse 市场更新问题

> ID：10134155
> 
> 赞同：0
> 
> 时间：2012-04-13T01:29:50.473
> 
> 标签：eclipse

我无法从 Eclipse 市场安装 Eclipse 插件，我收到以下错误消息：

![在此处输入图像描述](../Images/e3e27a2f10b3050d76ee1af6ed00d2bc.png)

**编辑 ：**

我尝试了多次，每次都发现一个相似之处：安装过程的前半部分很快完成（几分钟），然后安装过程没有超过一半。（我使用的是 Windows Vista）

![在此处输入图像描述](../Images/42f953385f5c25d2e44b45e8fa760303.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T08:41:31.187

似乎是连接问题。你有代理集吗？

# javascript - 重置 Internet Explorer 9 后无法获得正确结果

> ID：10134157
> 
> 赞同：0
> 
> 时间：2012-04-13T01:30:04.420
> 
> 标签：javascript, internet-explorer-9

我做了一个上传图片的功能，但是当我当时重置IE9浏览器时，我的功能无法正常工作

```
//for internet explore browser
function checkLength_forIE(node)
{
    if(node.behaviourUrns.length > 0) //this line give me image is attached or not
  {
      if (document.getElementById) {
        if (!clicked) {
          clicked = true;
          return true;
        } else {
          return false;
        }
      } else {
        return true;
      }
  }
} 
```

请给我正确的解决方案，当我在如何获取上传文件的数组后重置 IE9 浏览器时？或者任何其他方式在 IE9 中获取上传的文件详细信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T02:58:24.473

一个问题是你拼错了**[behaviourUrns](http://msdn.microsoft.com/en-us/library/ms537439%28v=vs.85%29.aspx)**

对您的代码的一些建议：

```
//for internet explore browser 
function checkLength_forIE(node) {

  // To keep safe in other browsers, check for beahviorUrns first
  if (node && node.behaviorUrns && node.behaviorUrns.length) {

    // What is the purpose of this line? I think you need to go back to
    // IE 4 to not have getElementById. In anycase, it is a bad inference,
    // test the property you are actually looking for.
    if (document.getElementById) {

      if (!clicked) {
        clicked = true;
        return true;

      } else {
        return false;
      }

    } else {
       return true;
    }
  }
} 
```

# ember.js - EmberJS 绑定不起作用

> ID：10134158
> 
> 赞同：3
> 
> 时间：2012-04-13T01:30:30.223
> 
> 标签：ember.js

我刚开始学习 Ember.js，并在[http://emberjs.com/](http://emberjs.com/)阅读文档。在绑定部分，我只是复制并粘贴了以下代码，并在 Chrome 浏览器上执行。绑定数据 (App.husband.get('householdIncome')) 始终返回“未定义”。你知道为什么吗？我想知道为什么我的代码不起作用。

----- HTML 代码 ------

```
<html>
<body>
    <script src="js/libs/jquery-1.7.2.js"></script>
    <script src="js/libs/ember-0.9.6.js"></script>
    <script src="js/app.js"></script>
</body>
</html> 
```

----- app.js ------

```
var App = Ember.Application.create();
App.wife = Ember.Object.create({
  householdIncome: 80000
});

App.husband = Ember.Object.create({
  householdIncomeBinding: 'App.wife.householdIncome'
});

console.log(App.wife.get('householdIncome')); // 80000
console.log(App.husband.get('householdIncome'));// expected 80000 
```

------ 结果输出 ------------

```
80000
undefined 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-13T03:13:32.827

您需要放在`Em.run.sync();`.get()s 之前。原因是 Ember 的连接绑定属性的 RunLoop 还没有运行完。通过使用`Em.run.sync();`，您可以强制 RunLoop 在后面的任何代码之前运行完成。这可能看起来很不方便，但通常情况下，您不需要在声明具有绑定属性的对象后这么快调用 .get()，因为 RunLoop 将处理最终将这些属性连接到正确显示这些值的 Handlebars 模板. 但在某些情况下，您需要立即绑定这些属性，在这种情况下您使用`Em.run.sync()`.

看到这个jsfiddle：http: [//jsfiddle.net/edwG6/](http://jsfiddle.net/edwG6/)

此外，您会在[http://emberjs.com](http://emberjs.com)的第一个 Bindings 部分注意到一个非常相似的示例。注意说的评论`// Later, after Ember has resolved bindings...`

# html - 来自 html/css 中 JSON 对象的垂直排序输入

> ID：10134159
> 
> 赞同：0
> 
> 时间：2012-04-13T01:30:33.040
> 
> 标签：html, css, json, input

提前感谢任何提供帮助的人。我正在为评分系统（SAT 预备学校）开发 Web 界面。我让服务器在 JSON 对象中传递回测试。JSON 对象包含测试名称及其部分和每个部分的问题（换句话说，测试结构。）

例如，给定测试的 JSON 片段可能如下所示：

```
{"Section 1":[{"subject":"Writing","experimental":"0","manual_assign":"1","columns":"1","number":null,"difficulty":null,"answer":null}],"Section 2":[{"subject":"Critical Reading","experimental":"0","manual_assign":"0","columns":"4","number":"1","difficulty":"Easy","answer":"B"},... 
```

我需要从 JSON 对象构建一个 HTML 表单，其中给定部分中的问题是垂直排序的输入。它应该如下图所示： ![在此处输入图像描述](../Images/2499dc337980e5d2334a701f368458c7.png)

我不确定最好的方法是什么。更具体地说，我如何获得像图像中那样垂直排列的输入列（考虑到每个部分的问题数量可能会根据正在评分的测试而有所不同。）非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T04:01:10.430

您可能想查看[http://www.alistapart.com/articles/multicolumnlists/](http://www.alistapart.com/articles/multicolumnlists/)。它介绍了许多不同的方式来使用 CSS 在列中灵活地显示列表。

# c# - 在 XML 中查找字符串

> ID：10134160
> 
> 赞同：1
> 
> 时间：2012-04-13T01:30:50.167
> 
> 标签：c#, xml, string

我想知道如何在 XML 文件中查找字符串。

假设这是我拥有的 XML 文件（顺便说一句，这些是 SQL 服务器实例，无关紧要）

```
<?xml version="1.0" encoding="utf-8" ?>
<Servernames>
    <loc country="Lockheed">
        <Servername>instance1\server1</Servername>
        <Servername>instance2\server2</Servername>
        <Servername>10.90</Servername>
    </loc>
    <loc country="SouthAmerica">
        <Servername>Hide your heart</Servername>
        <Servername>Bonnie Tyler</Servername>
        <Servername>10.0</Servername>
    </loc>
    <loc country="Britian">
        <Servername>Greatest\Hits</Servername>
        <Servername>Dolly\Parton</Servername>
        <Servername>this\is</Servername>
    </loc>
</Servernames> 
```

所以会发生什么是我从用户那里以任何格式获取一个字符串，例如我只获取实例，然后我希望列表框显示所有以 server 开头的服务器名，在上述情况下它将是

instance1\server1
instance2\serve2

等等..不知道如何实现这一点，我是否必须打开流阅读器或只是通过 xml 文件获取字符串和浏览器？

更新

```
private void button1_Click(object sender, RoutedEventArgs e)
{
    textBox1.Clear();
    string fileName = "c:\\users\\xxxx\\documents\\visual studio 2010\\Projects\\WpfApplication2\\WpfApplication2\\XML.xml";

        var doc = XDocument.Load(fileName);
        var findString = "Server";

        var results = doc.Element("Servernames").Descendants("Servername").Where(d => d.Value.Contains(findString)).Select(d => d.Value);
        listBox1.Items.Add(results.ToString());
        textBox1.Text = results.ToString();
} 
```

我只是在文本框中得到这个：*System.Linq.Enumerable+WhereSelectEnumerableIterator`2[System.Xml.Linq.XElement,System.String]*

![在此处输入图像描述](../Images/3c5a26f62b112281e8dfe91f2af736ed.png)

**强文本**UPDATE2

.cs 文件代码

private void button1_Click(object sender, RoutedEventArgs e) { textBox1.Clear();

```
 string fileName = "c:\\users\\xxxxx\\documents\\visual studio 2010\\Projects\\WpfApplication2\\WpfApplication2\\XML.xml";

        var doc = XDocument.Load(fileName);
        var findString = "Server";

        var results = doc.Element("Servernames").Descendants("Servername").Where(d => d.Value.Contains(findString)).Select(d => d.Value);

        Servers = new ObservableCollection<string>(results);

        MessageBox.Show("THis is loaded");

    } 
```

XAML 看起来像这样

```
<ListBox   Height="200" HorizontalAlignment="Left" Margin="200,44,0,0" x:Name="ListBox1" VerticalAlignment="Top" Width="237"> 
```

![在此处输入图像描述](../Images/17d6b7bdc30bab564bc26a6cb93fd199.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-13T01:39:51.263

假设您将 XML 加载到 XDocument 中，您可以执行类似的操作。

```
string fileName = "c:\\users\\xxxxx\\documents\\visual studio 2010\\Projects\\WpfApplication2\\WpfApplication2\\XML.xml";

var doc = XDocument.Load(fileName);
var findString = "server";

var results = doc.Element("Servernames").Descendants("Servername").Where (d => d.Value.Contains(findString)).Select (d => d.Value); 
```

*编辑 - WPF 示例*

XAML：

```
<ListBox ItemSource="{Binding Servers}"/> 
```

数据上下文：

```
public ObservableCollection<string> Servers {get; set;}

string fileName = "c:\\users\\xxxxx\\documents\\visual studio 2010\\Projects\\WpfApplication2\\WpfApplication2\\XML.xml";

var doc = XDocument.Load(fileName);
var findString = "server";

var results = doc.Element("Servernames").Descendants("Servername").Where (d => d.Value.Contains(findString)).Select (d => d.Value);

Servers = new ObservableCollection<string>(results); 
```

**Edit2 - 没有数据上下文的 WPF 示例。您可能想阅读 MVVM 方法，因为它正在成为 WPF 开发的标准。在此期间使用它。**

XAML：

```
<ListBox x:Name="ListBox1" /> 
```

数据上下文：

```
string fileName = "c:\\users\\xxxxx\\documents\\visual studio 2010\\Projects\\WpfApplication2\\WpfApplication2\\XML.xml";

var doc = XDocument.Load(fileName);
var findString = "server";

var results = doc.Element("Servernames").Descendants("Servername").Where (d => d.Value.Contains(findString)).Select (d => d.Value);

foreach(string result in results)
{
     ListBox1.Items.Add(result);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T01:48:11.087

您可以像这样使用 XmlDocument：

```
string xml = "<your xml>";
XmlDocument doc = new XmlDocument();
doc.LoadXml(xml);
foreach (XmlNode xmlLoc in doc.DocumentElement.SelectNodes("loc"))
{
    foreach (XmlNode xmlServername in xmlLoc.SelectNodes("Servername"))
    {
        Debug.WriteLine(string.Format("Servername={0}", xmlServername.InnerText));
        // xmlServername.InnerText will be \instance1\server1, etc.
        // UPDATE: add item to listbox
        listBox1.Items.Add(xmlServername.InnerText);
    }
} 
```

# java - 无法集成 BouncyCastle Jar

> ID：10134161
> 
> 赞同：10
> 
> 时间：2012-04-13T01:30:51.173
> 
> 标签：java, jar, bouncycastle

好的，我现在要说的是，我对 Java 知之甚少。我得到了 Bouncy Castle Jar，并告诉我这将包含我完成这项任务所需的东西。Jar 文件是`bcprov-jdk15on-147.jar`. 我也在我学校维护的一台 Unix 机器上做这个，所以我不能进去玩所有的 Java 文件。

当我使用 Javac 编译我的类时（特别是我使用 command `javac -classpath bcprov-jdk15on-147.jar encrypt.java`），它编译没有错误，但是当我之后使用 command 运行程序时`java encrypt`，我收到以下错误消息：

```
Exception in thread "main" java.lang.NoClassDefFoundError: org/bouncycastle/jce/provider/BouncyCastleProvider
Caused by: java.lang.ClassNotFoundException: org.bouncycastle.jce.provider.BouncyCastleProvider
at java.net.URLClassLoader$1.run(URLClassLoader.java:200)
at java.security.AccessController.doPrivileged(Native Method)
at java.net.URLClassLoader.findClass(URLClassLoader.java:188)
at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:276)
at java.lang.ClassLoader.loadClass(ClassLoader.java:251)
at java.lang.ClassLoader.loadClassInternal(ClassLoader.java:319) 
```

我的 Jar 文件与我的所有其他文件一起位于我的主文件夹中，以防万一它必须去某个特殊的地方，而那是我没有做的。

当我这样做`java -classpath bcprov-jdk15on-147.jar encrypt`是我得到的错误：

```
 Exception in thread "main" java.lang.NoClassDefFoundError: encrypt
Caused by: java.lang.ClassNotFoundException: encrypt
    at java.net.URLClassLoader$1.run(URLClassLoader.java:200)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:188)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:276)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:251)
    at java.lang.ClassLoader.loadClassInternal(ClassLoader.java:319) 
```

为什么我无法运行已编译的程序？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-13T01:33:34.647

键入此以运行程序：

```
java -classpath bcprov-jdk15on-147.jar:. encrypt 
```

这是因为您的程序还需要在运行时将它使用的任何库作为类路径的一部分，而不仅仅是在编译时。

# ruby-on-rails - 使用 ARel 整理查询

> ID：10134167
> 
> 赞同：2
> 
> 时间：2012-04-13T01:32:02.570
> 
> 标签：ruby-on-rails, arel

我有一个现有的 Rails 2.3.x 应用程序，它使用以下代码块来总结给定数据范围的 4 列数据。

```
results = connection.execute(<<-SQL)
  SELECT sum(total_hours), sum(expected_hours), sum(total_billable), sum(expected_billable)
  FROM `timesheets`
  WHERE (`timesheets`.`week_starting` BETWEEN '#{Date.today.beginning_of_year}' AND '#{Date.today.monday}')
SQL
total_hours, expected_hours, total_billable, expected_billable = results.fetch_row.map(&:to_f).map(&:to_d) 
```

当我升级到 Rails 3 和 mysql2 时，fetch_row 方法不再存在，所以我认为这是使用 ARel 整理此查询的好机会。

有谁知道如何使用 ARel 进行此查询？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-13T03:04:21.800

以模块化“构建器”风格编写，允许重构为可重用范围：

```
Timesheet.where('week_starting >= ?', Date.today.beginning_of_year).
  where('week_starting < ?', Date.today.monday).
  select('SUM(total_hours) as total_hours').
  select('SUM(expected_hours) as expected_hours').
  select('SUM(total_billable) as total_billable').
  select('SUM(total_hours) as expected_billable') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T04:10:39.010

您可以像这样简化 where 子句：

```
date_range = Date.today.beginning_of_year..Date.today.monday
Timesheet.where(:week_starting => date_range). 
```

这变成了一个`BETWEEN`子句。

# java - 检查新版本（更新检查）

> ID：10134168
> 
> 赞同：0
> 
> 时间：2012-04-13T01:32:12.923
> 
> 标签：java

对于我的程序，我想在运行时检查是否有新更新。我不希望它自动更新。它甚至不需要提供指向新版本的链接。

我在想我应该怎么做，我应该有一个像这样的网页：

> www.website.com/checkversion

该页面将仅包含 1 件事。它将包含一个版本号。网站上的版本号将是发布的最新版本。如果版本号不等于程序的版本号，它将使用户知道有更新的版本。否则它当然不会做任何事情。

我看过这个问题： [Automatically checks for a new version of my application](https://stackoverflow.com/questions/56391/automatically-checking-for-a-new-version-of-my-application)，这让我开始思考。`Is this the way I should be doing it?`我不确定这样做是否会为我提供足够的理由，您可以说提供足够的信息。

我想知道我应该使用哪种方法以及需要使用哪种功能，因为我以前没有使用过基于 Web 的功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T01:38:42.483

一般来说，这几乎是你所拥有的，我建议你不仅返回一个数字，还返回一些字典/地图，序列化为[JSON](http://json.org/)或类似的，所以将来你可能想放置更多数据，并且仍然与旧版本兼容。例如，而不是返回：

```
1 
```

返回：

```
{"latest_version" : 5} 
```

因此，如果您以后想添加更多详细信息，您可能会返回：

```
{"latest_version" : 5, "minimal_compatible_version" : 2, "download_file_size_in_bytes" : 123456 } 
```

这个想法是让响应扩展（当您需要返回更多数据时）并且仍然向后兼容。

至于如何执行这样的请求，请看[这里](https://stackoverflow.com/questions/1359689/how-to-send-http-request-in-java)（尽管 apache commons 也有一个很棒的库）。

# python - 类方法的麻烦——Python

> ID：10134172
> 
> 赞同：-1
> 
> 时间：2012-04-13T01:33:06.173
> 
> 标签：python, class, math, methods, definitions

所以在使用类方法时遇到了一些麻烦。我会发布我拥有的所有信息。我需要为给出的问题编写相关方法。

```
import math
epsilon = 0.000001
class Point(object):
    def __init__(self, x, y):
        self._x = x
        self._y = y

    def __repr__(self):
        return "Point({0}, {1})".format(self._x, self._y) 
```

第一个问题；我需要添加一个名为 disttopoint 的方法，该方法将另一个点对象 p 作为参数并返回两点之间的欧几里德距离。我可以使用 math.sqrt。

测试用例：

```
abc = Point(1,2)
efg = Point(3,4)
abc.disttopoint(efg) ===> 2.8284271 
```

第二个问题；添加一个名为 isear 的方法，该方法将另一个点对象 p 作为参数，如果该点与 p 之间的距离小于 epsilon（在上面的类框架中定义）则返回 True，否则返回 False。使用距离点。

测试用例：

```
abc = Point(1,2)
efg = Point(1.00000000001, 2.0000000001)
abc.isnear(efg) ===> True 
```

第三个问题；添加一个名为 addpoint 的方法，该方法将另一个点对象 p 作为参数并更改此点，使其成为 oint 的旧值和 p 的值之和。

测试用例;

```
abc = Point(1,2)
efg = Point(3,4)
abc.add_point(bar)
repr(abc) ==> "Point(4,6) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T01:38:56.177

你在这里有什么问题？

您是否坚持创建方法？

```
Class Point(object):
  # make it part of the class as it will be used in it
  # and not in the module
  epsilon = 0.000001

  def __init__(self, x, y):
      self._x = x
      self._y = y

  def __repr__(self):
      return "Point({0}, {1})".format(self._x, self._y)

  def add_point(self, point):
      """ Sum the point values to the instance. """
      self._x += point._x
      self._y += point._y

  def dist_to_point(self, point):
      """ returns the euclidean distance between the instance and the point."""
      return math.sqrt(blablab)

  def is_near(self, point):
      """ returns True if the distance between this point and p is less than epsilon."""
      return self.dist_to_point(point) < self.epsilon 
```

这对你有帮助吗？

霍尔迪

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T01:38:58.527

```
class Point(object):
    # __init__ and __repr__ methods
    # ...
    def disttopoint(self, other):
        # do something using self and other to calculate distance to point
        # result = distance to point
        return result

    def isnear(self, other):
        if (self.disttopoint(other) < epsilon):
            return True
        return False 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-15T11:46:13.167

```
def dist_to_point(self, point):
      """ returns the euclidean distance between the instance and the point."""
      return math.sqrt(res) 
```

变量“res”应该包含什么？

干杯

# database - 存储来自另一个表的主键子集的表是否会提高选择性 SELECT 查询的效率？

> ID：10134178
> 
> 赞同：0
> 
> 时间：2012-04-13T01:33:49.340
> 
> 标签：database, performance, indexing

我有兴趣找到基于布尔属性从表中选择记录的最有效方法。

我的场景是我有一个包含用户评论的表格，我想选择所有标记为不合适的评论。

我必须实现的两个想法是：

1.  最合乎逻辑的一个，在评论表中有一个布尔属性“isFlagged”

    该表将有一个主索引

    我会执行：

    ```
    SELECT description FROM Comment 
    WHERE isFlagged = 1; 
    ```

2.  有一个表，其中包含已标记的 Comment 表中记录的主键

    两个表都有一个主索引

    我会执行：

    ```
    SELECT description FROM Comment 
    WHERE commentID IN (SELECT FK_commentID FROM FlaggedComment) 
    ```

哪个执行效率最高？

有一个更好的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T01:45:20.917

当且仅当您在该`isFlagged`字段上有索引时，我才会选择第一个：

```
alter table comment add index idxFlagged (isFlagged) 
```

此外，考虑到您的第二个查询只是一个联接（不需要子查询）：

```
select description from Comment c
join FlaggedComment fc on c.commentId = fc.fkCommentId 
```

我敢打赌，它的执行时间应该比遍历`isFlagged`字段上的索引要长。无论如何，我建议您对这两个解决方案进行基准测试并报告结果:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T09:45:51.413

如果您关心性能，我建议您使用具有代表性的（测试）数据量来测试这两种情况。

对于它的价值 - 大多数数据库系统不会从低基数字段的索引中受益 - 特别是[booleans](https://stackoverflow.com/questions/1844991/indexing-boolean-fields)。对于一个巨大的表，选项 1 需要进行表扫描，这可能会很慢。

选项 2*应该*更快，因为您可以索引 commentID 字段 - 但仅限于您提到的查询。尝试查找有关单个评论的详细信息需要加入，这可能会更慢。

在实践中，除非您在极端情况下工作，否则您不太可能对性能产生可衡量的影响。这就是为什么你应该建立一个测试平台并尝试一下——理论上的差异可能对现实世界没有影响。

# python - Windows 中的 PyBonjour 错误 - 无法加载库 libdns_sd.so.1

> ID：10134183
> 
> 赞同：2
> 
> 时间：2012-04-13T01:34:36.843
> 
> 标签：python, windows, ironpython, bonjour

在 IronPython 2.6 下运行 PyBonjour 时，我收到一条错误消息：

```
OSError: IronPython.Runtime.Exception.OSException: cannot load library libdns_sd.so.1 
```

这源于以下行：

```
ctypes.cdll.LoadLibrary(_libdnssd) 
```

其中 _libdnssd 是“libdns_sd.so.1” 我在系统上安装了 Apple 分发的所有 Bonjour 工具。

有谁知道如何解决这一问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T17:24:06.377

我的猜测是 PyBonjour 有一个类似于`sys.platform == 'win32'`确定要加载哪个 DLL 的检查。这可能应该改为`os.name == 'nt'`正常工作。

不过，我还没有查看 PyBonjour 是否正确（如果有办法在不安装 bzr 的情况下做到这一点，我可以看看）。

# regex - 使用 bash regexp 删除所有具有不同扩展名的文件并仅保留一个

> ID：10134187
> 
> 赞同：2
> 
> 时间：2012-04-13T01:35:21.233
> 
> 标签：regex, bash

当我写一个 Latex 文件时，有时我需要**删除**它编译生成的所有文件，**只保留`.tex`文件**。例如，我想删除以下所有文件：

```
paper-stack.log
paper-stack.blg
paper-stack.bbl
paper-stack.aux
paper-stack.pdf 
```

并保留以下文件：

```
paper-stack.tex 
```

除此之外，我想删除 using **`bash regexp`**。我记得我以前做过，但现在我对使用其他 shell 后的正则表达式模式感到困惑。有点像，`rm paper-stack.[!tex]`但我不确定元字符`[`和.`]``!`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T01:46:45.083

如果你已经完成了，`shopt extglob`那么你可以说类似

```
rm paper-stack.!(tex) 
```

（与往常一样，在使用`rm`或使用其他可能具有破坏性的命令时，最好`echo`先进行测试。）不过，我会更明确地说明要删除的内容，只是根据一般原则。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T02:08:44.767

创建 a 的好处之一`Makefile`是它可以在必要时帮助多次运行 LaTeX；这取自`Makefile`保持技术文档最新的产品：

```
techdoc.pdf: techdoc.tex
        while pdflatex $< ${BUILD_OUTPUT} || exit 1 ; \
                grep -q "Label(s) may have changed" techdoc.log; \
        do :; done 
```

这样，仅运行`make`（如果这是 中的第一个目标`Makefile`）将`techdoc.pdf`根据需要多次重建，以确保正确更新引用和标签。（这通常只是两次，有时可能是三倍，而且我听说*聪明*的人可以输入导致这样的循环永远不会终止 - 但我从未见过。）

一旦你有了这样的东西，继续前进就是小菜一碟：

```
.PHONY: clean

clean: techdoc.log techdoc.bbl techdoc.aux techdoc.blg
        rm $? 
```

请参阅[http://www.gnu.org/software/make/manual/make.html#Special-Variables](http://www.gnu.org/software/make/manual/make.html#Special-Variables)以解释 GNU Make 中可用的`$?`、`$@`和类似的速记变量。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-13T01:49:48.527

我认为您可以使用命令 find 到您想要的目录并删除它们。类似于以下内容。但是考虑一下 sarnold 的建议，将命令放在 makefile 中的某个位置。

```
find my/dir/ -name "*.log" -or -name ".aux" -exec rm '{}' \; 
```

# ios - 当我使用 nm 查看 Mac 上的符号列表时，$ld$add$os10.4$ 前缀是什么意思？

> ID：10134189
> 
> 赞同：2
> 
> 时间：2012-04-13T01:35:45.053
> 
> 标签：ios, symbols, undefined-symbol, nm

我的 iPhone 应用程序无法链接到 iPhone 模拟器时遇到一些问题。它告诉我有未定义的符号：

```
Undefined symbols for architecture i386:
  ".objc_class_name_NSRunLoop", referenced from:
      pointer-to-literal-objc-class-name in SampleBrowser.cpp.o
  ".objc_class_name_NSDate", referenced from:
      pointer-to-literal-objc-class-name in SampleBrowser.cpp.o
  ".objc_class_name_NSAutoreleasePool", referenced from:
      pointer-to-literal-objc-class-name in SampleBrowser.cpp.o
      pointer-to-literal-objc-class-name in libRenderSystem_GLES2Static.a(OgreEAGL2Window.mm.o)
  ".objc_class_name_UIApplication", referenced from:
      pointer-to-literal-objc-class-name in SampleBrowser.cpp.o
      pointer-to-literal-objc-class-name in libOIS.a(iPhoneInputManager.mm.o)
  ".objc_class_name_NSObject", referenced from:
      .objc_class_name_AppDelegate in SampleBrowser.cpp.o
  ".objc_class_name_UIView", referenced from:
      .objc_class_name_SampleBrowserGestureView in SampleBrowser.cpp.o
      .objc_class_name_InputDelegate in libOIS.a(iPhoneInputManager.mm.o)
      .objc_class_name_EAGL2View in libRenderSystem_GLES2Static.a(OgreEAGL2View.mm.o)
  ".objc_class_name_UIScreen", referenced from:
      pointer-to-literal-objc-class-name in libOIS.a(iPhoneInputManager.mm.o)
      pointer-to-literal-objc-class-name in libRenderSystem_GLES2Static.a(OgreEAGL2Support.mm.o)
  ".objc_class_name_UIAccelerometer", referenced from:
      pointer-to-literal-objc-class-name in libOIS.a(iPhoneInputManager.mm.o)
      pointer-to-literal-objc-class-name in libOIS.a(iPhoneAccelerometer.mm.o) 
```

但这些看起来像是我链接的框架中的 Objective-C 类的*名称*。我想做一些挖掘工作，所以我使用 nm 查看我链接的框架的符号列表。例如

```
josh$ nm /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.1.sdk/System/Library/Frameworks/Foundation.framework/Foundation -arch i386 -g | grep objc_class
001a4500 S $ld$add$os10.4$.objc_class_name_NSArray
001a4501 S $ld$add$os10.4$.objc_class_name_NSCalendar
001a4502 S $ld$add$os10.4$.objc_class_name_NSData
001a4503 S $ld$add$os10.4$.objc_class_name_NSDate
001a4504 S $ld$add$os10.4$.objc_class_name_NSDateComponents
001a4505 S $ld$add$os10.4$.objc_class_name_NSDictionary
001a4506 S $ld$add$os10.4$.objc_class_name_NSEnumerator
001a4507 S $ld$add$os10.4$.objc_class_name_NSException
001a4508 S $ld$add$os10.4$.objc_class_name_NSInputStream
001a4509 S $ld$add$os10.4$.objc_class_name_NSInvocation
001a450a S $ld$add$os10.4$.objc_class_name_NSLocale
001a450b S $ld$add$os10.4$.objc_class_name_NSMethodSignature
001a450c S $ld$add$os10.4$.objc_class_name_NSMutableArray
001a450d S $ld$add$os10.4$.objc_class_name_NSMutableData
001a450e S $ld$add$os10.4$.objc_class_name_NSMutableDictionary
001a450f S $ld$add$os10.4$.objc_class_name_NSMutableSet
001a4510 S $ld$add$os10.4$.objc_class_name_NSNull
001a4511 S $ld$add$os10.4$.objc_class_name_NSObject
001a4512 S $ld$add$os10.4$.objc_class_name_NSOutputStream
001a4513 S $ld$add$os10.4$.objc_class_name_NSRunLoop
001a4514 S $ld$add$os10.4$.objc_class_name_NSSet
001a4515 S $ld$add$os10.4$.objc_class_name_NSStream
001a4516 S $ld$add$os10.4$.objc_class_name_NSTimeZone
001a4517 S $ld$add$os10.4$.objc_class_name_NSTimer
001a4548 S $ld$add$os10.4$.objc_class_name_NSURL
001a4518 S $ld$add$os10.4$.objc_class_name_NSUserDefaults
001a4549 S $ld$add$os10.5$.objc_class_name_NSURL
001a454a S $ld$hide$os10.4$.objc_class_name_NSFileWrapper
001a454b S $ld$hide$os10.5$.objc_class_name_NSFileWrapper
001a454c S $ld$hide$os10.6$.objc_class_name_NSFileWrapper 
```

现在，这个符号列表让我觉得框架档案正在导出链接器正在寻找的类。唯一不同的是这个 $ld$add$os10.4$ 前缀。我想知道为什么它在那里，它意味着什么，这是否可能导致我的问题？

编辑：看起来这是我的问题： [针对 iPhoneSimulator 时 Xcode 中的链接错误](https://stackoverflow.com/questions/5010175/link-errors-in-xcode-when-targeting-iphonesimulator)

简而言之，省略编译器标志 -fobjc-abi-version=2 会导致不同的符号命名。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T03:52:24.813

`$ld$add$osXX.X$SYMBOL`是一个链接器指令，允许重定向库中的符号解析。该命令位于二进制文件的 __DATA 部分，并`ld`在链接时被解析以更改导出符号的可见性。OS X 上的链接器实际上接受了很多不同类型的命令：

`$ld$hide$osXX.X$SYMBOL`将该符号添加到忽略集中。链接器将不再将该符号导出到与库链接的任何二进制文件，即使它可能具有全局可见性。

`$ld$add$osXX.X$SYMBOL`无论是否存在定义，都会在链接时将该符号添加到二进制文件中。

`$ld$install_name$osXX.X`将特定二进制文件中的符号定义重定向到另一个二进制文件。这用于解决 OS X 中 CoreGraphics 曾经作为 ApplicationServices 的子框架存在的问题。所有符号现在都被重定向到正确的框架。

`$ld$compatibility_version`强制与早期版本的链接器兼容。

就您而言，您遇到了 Foundation 中的兼容性问题。OS X 将 NSFileWrapper 导出到 AppKit 中，直到 10.7 之后该符号从那里隐藏并移至 Foundation。通常，这意味着 AppKit 的作者会隐藏类定义的 _OBJC_CLASS_$、_OBJC_METACLASS_$ 和 _OBJC_IVAR_$ 部分，以使链接器在别处查找该符号。但是，因为您删除了该`-fobjc-abi-version`标志，所以编译器默认返回旧的 1.x ABI，它只需要隐藏和查找`.objc_class_name`您尝试链接的二进制文件中可能不存在的 a。

至于您未定义的符号，这是一个简单的文件扩展名问题。.cpp 是***仅限***c++ 的文件，（这意味着没有 NSRunloop、MSMutableArray、NSObject 等）。如果您希望访问这些对象，请将有问题的文件重命名为扩展名为 .mm，这是一个标准的 objC++ 文件。链接和导入 QuartzCore（用于 EAGL2View）和 UIKit（用于 UIScreen 和朋友以及 UIAccelerometer）也是一个好主意。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T03:12:26.240

我对 iOS SDK 并没有真正了解，但你为什么要为“i386”编译？几天前，我在玩 PhoneGap 时遇到了类似的问题。我刚刚从我的 XCode 项目设置中删除了“i386”，之后在模拟器中一切似乎都运行良好。虽然我可能是错的。

# javascript - 在javascript中计算旋转矩形的中点

> ID：10134192
> 
> 赞同：4
> 
> 时间：2012-04-13T01:36:30.913
> 
> 标签：javascript, math, trigonometry

**我试图找到一个旋转矩形的中点。**

我已经制作了一个 javascript 函数来执行此操作，但它输出的答案不正确。我不明白我的数学哪里出了问题，或者我没有将所有内容都转换为弧度？

**你能告诉我如何让我的函数正确计算旋转矩形的中点吗？**

这个 JSFiddle 演示了我如何得到不正确的中点值：http: [//jsfiddle.net/HyFrX/1/](http://jsfiddle.net/HyFrX/1/)

```
function getMidPoint( /*int*/ x, /*int*/ y, /*int*/ width, /*int*/ height, /*int(in degrees)*/ angle )
{
   width         = width/2;
   height        = height/2   
   var dist      = Math.sqrt( (Math.pow(width,2)) + (Math.pow(height,2)) );
   var degtorad  = Math.PI/180;
   x            += Math.cos(degtorad * (45+angle)) * dist;
   y            += Math.sin(degtorad * (45+angle)) * dist;
   return {px: x, py: y};
}

var p  = getMidPoint(50,90,200,300,0);
var p2 = getMidPoint(10,500,600,100,0);
alert("p1: "+p.px+","+p.py);     // Should be 150,240 right?
alert("p2: "+p2.px+","+p2.py);   // Should be 310,550 right? 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-13T09:03:05.727

如果我们从一个给定宽度 w 和高度 h 的矩形开始，那么它的顶点在：

*   (0,0)
*   (0,h)
*   (w,0)
*   (w,h)

因此，中心是所有这些的平均值

```
c = (2w,2h)/4
  = (w/2,h/2)
  = (w', h') // rename for convenience 
```

使用“绕原点逆时针”[旋转矩阵旋转](http://en.wikipedia.org/wiki/Rotation_matrix)：

```
M = [ cos a, -sin a
      sin a,  cos a ] 
```

给我们

```
Mc = (w' cos a - h' sin a, w' sin a + h' cos a)
   = (w' c' - h' s',       w' s' + h' c') // rename for convenience 
```

转换到原始坐标系（只需添加 x,y 坐标）：

```
Mc + O = (x + w' c' - h' s', y + w' s' + h' c') 
```

所以，在代码中：

```
function getMidPoint(x, y, width, height, angle_degrees) {
    var angle_rad = angle_degrees * Math.PI / 180;
    var cosa = Math.cos(angle_rad);
    var sina = Math.sin(angle_rad);
    var wp = width/2;
    var hp = height/2;
    return { px: ( x + wp * cosa - hp * sina ),
             py: ( y + wp * sina + hp * cosa ) };
} 
```

[JS小提琴](http://jsfiddle.net/d76LH/)

一个矩形的质心是圆心，顶点的4个点的质心也是圆心。所以一般来说，我们可以平均顶点的坐标。由于我们还必须计算顶点，这并不能真正加快速度，但理想情况下，您将有两个函数，一个用于计算顶点，一个用于计算中心。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T02:40:07.693

矩形中的角度不是 45 度，因此您需要找到角度。

```
function getMidPoint( /*int*/ x, /*int*/ y, /*int*/ width, /*int*/ height, /*int(in degrees)*/ angle )
{
   width         = width/2;
   height        = height/2   
   var dist      = Math.sqrt( (Math.pow(width,2)) + (Math.pow(height,2)) );
   var ang       = Math.atan(width/height);
   var degtorad  = Math.PI/180;
   x            += Math.cos(degtorad *angle+ang) * dist;
   y            += Math.sin(degtorad *angle+ang) * dist;
   return {px: x, py: y};
}

var p  = getMidPoint(50,90,200,300,0);
var p2 = getMidPoint(10,500,600,100,0);
alert("p1: "+p.px+","+p.py);     // Should be 150,240 right?
alert("p2: "+p2.px+","+p2.py);   // Should be 310,550 right? 
```

# google-chrome - 表格布局：修复了列宽问题

> ID：10134194
> 
> 赞同：7
> 
> 时间：2012-04-13T01:36:48.527
> 
> 标签：google-chrome, html-table, tablelayout

我们正在`table-layout: fixed`为我们的移动应用程序使用 CSS 属性。（我不记得全部原因，但我相信这与启用某种自动换行有关）......

我遇到了一个问题，我们需要调整两列表的两列之一的大小。没什么大不了的，通常我们这样做：

```
<table>
  <tbody>        
    <tr>
      <th width="20%">hello world</th>
      <td>hello world</td>
    </tr>
  </tbody>
</table> 
```

这很好用。

但是，如果我们需要在此之前创建一个跨越两列的行：

```
<table>
  <tbody>   
    <tr>
      <td colspan="2">hello world</th>
    </tr>     
    <tr>
      <th width="20%">hello world</th>
      <td>hello world</td>
    </tr>
  </tbody>
</table> 
```

至少在 Chrome 中发生的情况是，两列对齐到 50% 的宽度。我在这里有一个 jsbin 示例：

[http://jsbin.com/ejovut/3](http://jsbin.com/ejovut/3)

这是正常行为吗？一个 Chrome 错误？解决此问题的方法？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-11T13:13:05.697

这不是错误。 `table-layout:fixed`意味着浏览器可以通过假设只有第一行和第一列的规范来优化表格布局计算。特别是，它**不需要**检查和对以后的表格内容进行布局计算，这会对布局性能产生很大影响。

正确的解决方案是使用`<col>`and`<colgroup>`元素显式指定列宽，而不是使用第一行。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-30T11:10:04.730

第一个表格行也应该包含所有内容，Chrome 错误不允许用于此。

# c# - 如何获取 Nullable 对象的原始类型？

> ID：10134199
> 
> 赞同：1
> 
> 时间：2012-04-13T01:37:29.390
> 
> 标签：c#, object, nullable, gettype

> **可能重复：**
> [可空类型不是可空类型？](https://stackoverflow.com/questions/785358/nullable-type-is-not-a-nullable-type)
> [如何检查一个对象是否可以为空？](https://stackoverflow.com/questions/374651/how-to-check-if-an-object-is-nullable)

请参阅下面的代码。有没有办法通过传递 n 作为参数来获得类似 System.Nullable`1[System.Int32] 的东西？

```
static void Test()
{
  List<int> l = new List<int>();
  Nullable<int> n = new Nullable<int>( 1 );
  Console.WriteLine( l.GetType() ); // will output System.Collections.Generic.List`1[System.Int32]
  Console.WriteLine( n.GetType() ); // will output System.Int32\. Why won't output something like System.Nullable`1[System.Int32] ?
} 
```

# c# - 部署 asp.net Web 应用程序的问题

> ID：10134205
> 
> 赞同：5
> 
> 时间：2012-04-13T01:38:29.447
> 
> 标签：c#, asp.net, deployment

这是我第一次部署 asp.net 应用程序。

当我构建部署包时，即右键单击项目并选择“构建部署包”，我收到以下错误：

> 错误 1 ​​Web 部署任务失败。（类型为“dbFullSql”和路径“数据源”的对象=.\SQLEXPRESS;AttachDbFilename=C:\JP\ASP\eTracking\test\App_Data\aspnetdb.mdf;Integrated Security=True;用户实例=True' 无法创建。）
> 
> 无法创建“dbFullSql”类型和路径“Data Source=.\SQLEXPRESS;AttachDbFilename=C:\JP\ASP\eTracking\test\App_Data\aspnetdb.mdf;Integrated Security=True;User Instance=True”的对象。
> 
> 无法连接到数据库“C:\JP\ASP\eTracking\test\App_Data\aspnetdb.mdf”。建立与 SQL Server 的连接时发生与网络相关或特定于实例的错误。服务器未找到或无法访问。验证实例名称是否正确以及 SQL Server 是否配置为允许远程连接。（提供者：SQL 网络接口，错误：26 - 错误定位服务器/指定的实例）0 0 eTracking

任何人都可以帮助解决这个问题。我无法理解它，似乎无法在网上找到解决方案。

> 好的 设法解决了问题。
> 
> 在“打包/发布 SQL”下的属性窗口中，取消选中网格中的“从现有数据库中提取数据和/或模式”以及“自动生成的模式和数据”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-04-05T13:03:56.983

工作：“好的，已解决问题。在“打包/发布 SQL”下的属性窗口中，取消勾选“从现有数据库中提取数据和/或模式”以及网格中的“自动生成的模式和数据”。 "

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T01:52:59.150

看起来错误消息非常简单 - 您在应用程序中使用本地连接的数据库。这不适用于打包程序。您需要更改对服务器数据库的数据库访问权限，或者您需要在应用程序中包含 mdf 文件。

# jquery - 如何在鼠标悬停时创建突出显示？

> ID：10134215
> 
> 赞同：-2
> 
> 时间：2012-04-13T01:39:17.147
> 
> 标签：jquery, css

在[我的页面上](http://www.urlgone.com/d7ccf8/)，如果我将鼠标悬停在某个状态上，右侧的超链接将变为悬停样式。有人可以建议我如何使相反的事情发生..当我将鼠标悬停在右侧的一个超链接上时，状态会突出显示（就像我将鼠标悬停在状态本身上时一样）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T01:46:57.173

非常简单地使用 jQuery 的 .trigger();

例如：`$('#A0').trigger('mouseover');`将突出显示地图中的第一个元素（华盛顿）。

因此`<a class="staffs staff-A0" href="#">Washington</a>`，您可以将其添加到 mouseover 事件中：

```
var map_element_id = '#' + this.className.split('-')[1];
$(map_element_id).trigger('mouseover'); 
```

当然也需要处理 onmouseout 。有很多方法可以处理 map_element_id 变量的赋值。我建议您分配一个单独的属性来存储它而不是类名（也许是 data-map-id？）。在“-”上拆分适用于本示例，但假设您向包含“-”的元素添加更多类名，这将失败。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T01:49:54.880

获取地图区域的id并触发mouseover事件。

```
$('.staff').mouseover(function() {
    var id = $(this).attr("class").split("-")[1];
    $("#"+id).trigger('mouseover');
}); 
```

# matlab - 在 MATLAB 中使用 parfor 循环解决分段错误

> ID：10134235
> 
> 赞同：2
> 
> 时间：2012-04-13T01:42:32.113
> 
> 标签：matlab, segmentation-fault, mex

我目前正在做一个项目，我必须并行运行多次重复耗时的 MATLAB 函数。出于这个问题的目的，我们将函数称为`myfunc`.

`myfunc`使用 MEX 文件并以每 3 小时一次的随机分段违规告终。我无法诊断分段错误，因为它源自我自己没有编码的专有 API。但是，我知道它发生在 MEX 文件中，而且我也知道它与我可以更改的任何设置都没有确定性相关。

我想解决分段违规问题，理想情况下，我还想继续在 MATLAB 中使用 parfor 函数。我现在的想法是在 parfor 循环中使用 try catch 循环，如下所示：

```
 %create an output cell to store nreps of output from 'myfunc'
    output = cell(1,nreps) 

    %create a vector to keep track of how many runs finish successfully without the error
    successfulrun = zeros(1,nreps);

    % run myfunc in parallel
    parfor i = 1:nreps
       try
        output{i}
        successfulrun(i) = true
       end
    end

    %rerun experiments that did not end up successfully
    while sum(successulruns) < nreps

      %count number of experiments to rerun and initialize variables to hold those results
      reps_to_rerun = find(successfulruns == 0);
      nreps_to_rerun = sum(reps_to_rerun);
      newoutput = cell(1,nreps_to_rerun);
      newsuccessfulrun = zeros(1,nreps_to_rerun)

      %rerun experiments
      parfor i = 1:nreps_to_rerun
         try
          newoutput{i};  
          newsuccessfulrun = true;  
         end  
      end

     %transfer contents to larger loop
     for i = 1:nreps_to_rerun

        rerun_index =  reps_to_rerun(i);
        successfulrun(rerun_index) = newsuccessfulrun(i)

        if newsuccessfulrun(i)
            output{i} = newoutput{i};
        end 
    end
end 
```

我的问题是：

1.  即使 MEX 文件中存在分段违规，是否可以继续像这样继续运行更多重复？或者我应该清除内存/重新启动 matlabpool？我假设这不应该是问题，因为分段违规是在 C 中。

2.  有没有办法“打破” parfor 循环？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T04:33:47.940

你不能跳出 parfor 循环，因为它不是串行运行的。因此，parfor 循环不能嵌套。^1

如果空间不足，则应增加 JVM 内存分配限制。^2

参考文献：

1.  [https://docs.google.com/viewer?a=v&q=cache:MinlgB0S8fsJ:its2.unc.edu/divisions/rc/training/scientific/short_courses/ParallelGPUMATLAB.pptx+&hl=en&gl=us&pid=bl&srcid=ADGEEShtEaahOf7u01kO0vT- Asy8itHNzuo4xocdoM5kiAuSCWlHZlKKb-W3Lvftpd6HJJAeyp6Lt-ofaBVH1uG049DFuAzdiu4ElNCtiTeFfYYbSGsJN5JF4S-AKjmWnmIpWIRNHHnR&sig=AHIEtbRU7F2iX9rPnaZBXux3ewL42VCIZQ](https://docs.google.com/viewer?a=v&q=cache:MinlgB0S8fsJ:its2.unc.edu/divisions/rc/training/scientific/short_courses/ParallelGPUMATLAB.pptx+&hl=en&gl=us&pid=bl&srcid=ADGEEShtEaahOf7u01kO0vT-Asy8itHNzuo4xocdoM5kiAuSCWlHZlKKb-W3Lvftpd6HJJAeyp6Lt-ofaBVH1uG049DFuAzdiu4ElNCtiTeFfYYbSGsJN5JF4S-AKjmWnmIpWIRNHHnR&sig=AHIEtbRU7F2iX9rPnaZBXux3ewL42VCIZQ)
2.  [http://www.mathworks.com/help/distcomp/parfor.html](http://www.mathworks.com/help/distcomp/parfor.html)

# javascript - 两个数字之间的Javascript随机整数

> ID：10134237
> 
> 赞同：22
> 
> 时间：2012-04-13T01:43:12.650
> 
> 标签：javascript, random

我正在尝试创建一个随机数生成器，它在两个数字之间生成随机数。例如，假设我想生成一个 4 到 10 之间的随机数，我希望它能够从 4 到 10 之间的任何数字中进行选择。这是我尝试过的：

```
var randNumMin = 4;
var randNumMax = 10;
var randInt = (Math.floor(Math.random() * (randNumMax - randNumMin + 1)) + randNumMin); 
```

但是，这似乎不起作用，并生成了不在 4 到 10 之间的奇怪随机数，有些以 0 开头。正确的算法是什么？

这是我在其中实现算法的代码：

```
$(function() {
    $('#generateRandNums').click(function() {

        var numCount = document.getElementById("randNumCount").value;
        var randNumMin = document.getElementById("randNumMin").value;
        var randNumMax = document.getElementById("randNumMax").value;

        if (numCount.match(/^[\d]*$/ ) && randNumMin.match(/^[\d]*$/ ) && randNumMax.match(/^[\d]*$/ )) {       
            if (numCount == "" || randNumMin == "" || randNumMax == "")  {
                alert ("Please fill out all forms then try again.");

            } else {
                if (randNumMin>randNumMax) {
                    alert ("Please make sure your first number is smaller than the second, then try again.");
                } else {
                    if (randNumMin<0) {
                        alert ("Please make sure that you generate a positive number of random numbers, then try again.");
                    } else {

                        if (numCount>1) {
                            var randResult = ("You generated " + numCount + " random numbers between " + randNumMin + " and " + randNumMax + " and got the numbers ")
                            oneNumber = 0;
                        } else {
                            var randResult = ("You generated a random number between " + randNumMin + " and " + randNumMax + " and got the number ");
                            oneNumber = 1;
                        }
                        for (i=0;i<numCount;i++) {
                        //Get a random number between randNumMin and randNumMax
                        var randInt = (Math.floor(Math.random() * (randNumMax - randNumMin + 1)) + randNumMin);
                            if (i == numCount-1) {
                                if (oneNumber == 0) {
                                    randResult = (randResult + "and " + randInt + ".");
                                } else {
                                    randResult = (randResult + randInt + ".");
                                }
                            } else {
                                randResult = (randResult + randInt + ", ");
                            }
                        }
                        $("#randNumResults").val(randResult);
                    }
                }
            }
        } else {
            alert ("Make sure you only enter numbers and no spaces, then try again.");
        }

    });
}); 
```

我也尝试用这个替换 randInt 行：

```
var randInt = Math.floor((Math.random() * ((randNumMax + 1) - randNumMin)) + randNumMin); 
```

它仍然没有工作。我不确定算法是否错误，或者我将其错误地合并到函数中。感谢您的回答，谢谢。

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2012-04-13T01:46:06.213

[在特定范围内的 JavaScript 中生成随机整数？](https://stackoverflow.com/questions/1527803/generating-random-numbers-in-javascript)

```
/**
 * Returns a random number between min and max
 */
function getRandomArbitary (min, max) {
    return Math.random() * (max - min) + min;
}

/**
 * Returns a random integer between min and max
 * Using Math.round() will give you a non-uniform distribution!
 */
function getRandomInt (min, max) {
    return Math.floor(Math.random() * (max - min + 1)) + min;
} 
```

[http://roshanbh.com.np/2008/09/get-random-number-range-two-numbers-javascript.html](http://roshanbh.com.np/2008/09/get-random-number-range-two-numbers-javascript.html)

```
//function to get random number upto m
function randomXToY(minVal,maxVal,floatVal)
{
    var randVal = minVal+(Math.random()*(maxVal-minVal));
    return typeof floatVal=='undefined'?Math.round(randVal):randVal.toFixed(floatVal);
} 
```

或者

[在 JavaScript 中生成两个数字之间的随机数](https://stackoverflow.com/questions/4959975/random-between-two-numbers-in-javascript)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T02:59:40.500

您的问题是您从未将字符串转换为数字尝试添加此

```
if (  numCount.match(/^[\d]*$/ ) && 
    randNumMin.match(/^[\d]*$/ ) && 
    randNumMax.match(/^[\d]*$/ )){
  if (numCount === "" || randNumMin === "" || randNumMax === "")  {
    alert ("Please fill out all forms then try again.");
  } else {
    numCount=numCount-0;randNumMin=randNumMin-0;randNumMax=randNumMax-0; 
```

另一个注意事项，您需要将检查值是否为空字符串更改为严格相等。要了解我的意思，请尝试对其中一个值使用零。`0 == ""//returns true`因为两者都是虚假的`0 === ""//returns false`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-04-07T20:46:48.693

[Underscore.js](http://underscorejs.org/)对此 _.random(min,max) 有一个很好的实用程序

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-13T01:52:26.220

这个怎么样？

```
var max = 10;
var min = 4;
var random = Math.floor((Math.random() * ((max + 1) - min)) + min); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-12-02T02:44:39.913

[randojs.com](https://randojs.com)使它成为一个简单的单行：

```
rando(4, 10) 
```

您只需将其添加到您的 html 文档的头部，您就可以轻松地随心所欲地做任何您想做的事情。来自数组的随机值、随机 jquery 元素、来自对象的随机属性，甚至在需要时防止重复。

```
<script src="https://randojs.com/1.0.0.js"></script> 
```

# php - 在远程机器上守护一个 php 文件

> ID：10134246
> 
> 赞同：3
> 
> 时间：2012-04-13T01:44:20.170
> 
> 标签：php

我试图从控制服务器在远程机器上生成 beanstalk 工作人员。

我有一个函数，它需要一个主机名，将专用网络上的 SSH 连接到目标机器，然后在该机器上运行命令。

我用来生成工人的命令（当我在目标服务器的提示符下手动执行时）是：

```
nohup /path/to/php /path/to/file/worker.php & 
```

输出是：

```
nohup: ignoring input and appending output to `nohup.out' 
```

要返回提示，它需要一个 ctrl+c

当我从远程机器执行此操作时，脚本启动，并显示输出“worker started”，它坐在那里等待工作。我必须按 ctrl+c 才能返回提示。

当我在浏览器中使用 php 运行此命令时，它会生成工作程序，但浏览器只是挂起，最终达到 nginx 超时。我认为这是因为我用来运行命令的 shell_exec() 在运行命令后等待提示符，但这需要 ctrl+c，所以它认为命令没有完成执行。

自行运行该命令后，如何让它返回提示符？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T02:02:18.367

您可以通过多种方式在 PHP 中创建 dameon。有图书馆为此，

1.  [System_Daemon Pear 包](http://pear.php.net/package/System_Daemon)
2.  [PHP-Daemon github 包](https://github.com/shaneharter/PHP-Daemon)

这个想法很简单。

*   **fork 一个子进程并退出父进程**
*   **关闭所有标准输入、标准输出、标准错误，不要输出任何东西。**

# android - Android上的视频聊天

> ID：10134248
> 
> 赞同：-1
> 
> 时间：2012-04-13T01:44:24.133
> 
> 标签：android, chat

我是 Android 新手，现在我计划在 android 中创建一个简单的视频聊天。是否有任何特殊的 API 可用。谁能建议我一些开发此类应用程序的想法。现在我非常渴望学习Android。请帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T01:48:48.827

[这](http://code.google.com/p/sipdroid/)是这种实现的一个很好的例子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T01:51:23.870

试试这个：[imsdroid](http://code.google.com/p/imsdroid/)

# java - eclipse中的复制文件将文件名（字符串）而不是文件复制到剪贴板

> ID：10134251
> 
> 赞同：5
> 
> 时间：2012-04-13T01:44:44.193
> 
> 标签：java, eclipse, ide, clipboard

在这里遇到 Eclipse 的一些问题。

由于某种未知原因，当我尝试将文件从一个目录复制到另一个目录时，它没有将文件放置到剪贴板，而是复制文件名（字符串）。

当我将它粘贴到新目录时会发生什么，它会创建一个名为 Snippet.java 的文件，其中包含此类中的文件名字符串。

以前有没有其他人见过这种行为？

编辑：没关系，重新启动我的机器似乎可以解决问题。谁知道那里发生了什么。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-02T11:24:06.983

我遇到了 Jake Mackay 所描述的确切问题，并且已经与它斗争了几个小时，理由是复制文件是正确使用 Eclipse 的基础。

首先，我认为这不是 Eclipse 问题，因为我在 Eclipse Europa 和 Indigo 中有类似的问题。同样在安全模式下启动 Windows (7 service pack 1)，问题就消失了。

就我而言，我已将问题缩小到在“Google Chrome v 18.0.1025.168 m”中安装“Skype Click to Call v 5.10.0.9560”扩展。当 Google Chrome 未运行或在禁用扩展程序的情况下运行时，问题就会消失。据此，我认为 Skype Click to Call 正在拦截键盘和鼠标事件以进行“剪切/复制”并改变正常行为。

对于我安装最新版本的点击通话，此时 v 5.11.0.9874 问题也消失了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T03:36:52.563

我以前遇到过这种情况，在 Eclipse 中你是否尝试过go to`Window>Preferences>General`和 under `General`go to`Keys`

在 Command 列下找到 Copy，并将 When 列中的值更改为 In Dialogs and Windows。

# python - 使用管道传输到另一个 python 文件时，我可以将 stdin 与 argv 结合使用吗？

> ID：10134253
> 
> 赞同：0
> 
> 时间：2012-04-13T01:44:47.703
> 
> 标签：python, input, mapreduce, stdin, argv

基本上我正在运行mapreduce，所以我将通过管道进入reducer。我遇到的问题是如何指定一个目录路径，我将与 os.listdir 一起使用它来基本上访问然后单独计算该目录中的所有文件。但我知道我只想要最后一个目录中的内容，而不是同一级别的子目录。我也可以考虑使用 fileinput()。

我想我可能在这里使用了错误的标准输入，这取决于它是否必须来自命令行或者是否可以间接来自命令行。

这是我的命令行输入： "./path1/path2/path3" ./map.py | 排序 | ./red.py

做我想做的事情时我得到的错误是-bash，而不是目录./pythonfile.py

使用 Python 2.7.2

这就是我正在做的事情：

```
def func():
    path = sys.argv[0]
    return [filenames for filenames in os.listdir(path)if os.path.isfile(os.path.join(path,filenames))]

if func() is not None: 
   for file in func():
       sys.stdin.read()
       ...etc.. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T01:57:44.087

```
"./path1/path2/path3" ./map.py | sort | ./red.py 
```

这告诉使用参数`bash`执行程序。这几乎肯定不是您想要做的。`./path1/path2/path3``./map.py`

```
path = sys.argv[0] 
```

这是*脚本*的名称—— 按照惯例，第一个元素`argv[]`是正在执行的程序的名称。看到这个：

```
$ cat echo.py 
#!/usr/bin/python
import sys
print sys.argv[0]
$ chmod 755 echo.py
$ ./echo.py
./echo.py
$ 
```

也许您打算做的是`echo`脚本的字符串：

```
echo path1/path2/path3 | ./map.py | sort | ./red.py 
```

但是，您无法使用`argv[]`数组轻松获得它。事实上，从这样的自由格式输入中正确解析多个路径名是*非常*困难的，所以我会完全避免它，并将名称作为*参数*传递：

```
./map.py path1/path2/path3 /a/s/econd/pathname 
```

您可以使用以下方式遍历作为参数传递的所有路径：

```
>>> a=["nothing", "passwd", "shadow"]
>>> [f for f in a[1:]]
['passwd', 'shadow']
>>> import os
>>> [f for f in a[1:] if os.path.isfile(f)]
['passwd', 'shadow']
>>> 
```

# javascript - 在 HTML5 Canvas 上绘制拉伸弧线

> ID：10134255
> 
> 赞同：4
> 
> 时间：2012-04-13T01:45:01.067
> 
> 标签：javascript, html, canvas

我知道如何在 HTML5 Canvas 上绘制部分圆（弧），但如何在 Canvas 上绘制拉伸弧？

**如何绘制像下面这样的弧（弧被拉伸/半径变化的地方）？** ![在此处输入图像描述](../Images/ef6e3efce138cf911fd2f427c2e92951.png)

这就是我绘制普通弧线的方式，也许有一个可以拉伸这条弧线的功能？

```
context.moveTo(centerX, centerY);
context.arc(centerX, centerY, radius, startingAngle, endingAngle, false);       
context.closePath(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T02:12:01.250

您可以使用变换。就像在这个[活生生的例子](http://jsfiddle.net/3e3w8/1/)中一样。

```
context.save() ;
context.translate(150,150) ;
context.scale(2,1) ;
context.translate(-150,-150) ;
context.moveTo(150, 150);
context.arc(150, 150, 50, 0, 3*Math.PI/4, true);       
context.closePath();
context.stroke() ;
context.restore() ;
​ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T02:05:41.267

这就是你想要的：`scale()`在`<canvas>`

```
ctx.save();
ctx.scale(1,0.75);
//Do your arc here
ctx.restore();

//Viola! 
```

演示：[https ://developer.mozilla.org/samples/canvas-tutorial/5_4_canvas_scale.html](https://developer.mozilla.org/samples/canvas-tutorial/5_4_canvas_scale.html)

# apache - 强制用户在主域和子域上使用 SSL。WHMCS

> ID：10134257
> 
> 赞同：1
> 
> 时间：2012-04-13T01:45:16.817
> 
> 标签：apache, .htaccess, whmcs

我有两个具有 SSL 证书的主要链接，
www.example.com
billing.example.com
我想强制用户在这两个链接上都使用 SSL，
[https](https://www.example.com)
[://www.example.com https://billing.example .com](https://billing.example.com)

我正在使用 WHMCS，当我将其放入设置中以使用 billing.example.com 时，它就像在 www.example.com 上一样

我用 .htaccess 尝试了一些不同的东西，但都没有奏效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T14:32:50.683

您可以将以下指令添加到您的 Apache 虚拟主机配置中。

```
RewriteEngine on
RewriteCond %{HTTPS} off
RewriteRule (.*) https://%{HTTP_HOST}%{REQUEST_URI} 
```

这将始终重定向到 HTTPS 主机。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T09:25:32.757

命名虚拟主机不适用于 HTTPS，因为服务器在建立连接之前无法解释 Host 标头，并且建立连接需要完成 HTTPS 使用的 SSL 加密握手；SSL 证书（不带扩展名）只能将单个服务器主机名作为其主题，因此证书和连接仅适用于单个主机名。结果，命名的虚拟主机机制永远没有机会对传入连接进行操作，并且托管多个站点的唯一剩余方法是向主机添加多个 IP 地址并使用基于 IP 的虚拟服务器。

使用 HTTPS 和基于名称的虚拟主机支持多个站点的关键是使用通配符名称（在 RFC2818 中指定）或 x509 版本 3 证书（在 RFC3280 中指定）主题备用名称扩展。

作为替代方案，您可以将您的站点（www. 和 billing. 绑定到同一主机上的不同 IP 地址）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-13T02:00:52.437

如果您不想使用 .htaccess，也可以使用 apache 的 httpd.conf 中的虚拟主机来完成。（以下假设您在端口 80 上运行 http，在 443 上运行 https）

```
<VirtualHost *:80>
 RewriteEngine on
 RewriteCond %{SERVER_PORT} !^443$
 RewriteRule ^/(.*) https://%{HTTP_HOST}/$1 [NC,R,L]
</VirtualHost>
<VirtualHost *:443>
 ... some config
</VirtualHost> 
```

# c# - 异步图像加载到 ListBox

> ID：10134259
> 
> 赞同：2
> 
> 时间：2012-04-13T01:45:43.930
> 
> 标签：c#, wpf, asynchronous, wpf-controls

因此，我正在构建一个 WPF 控件，该控件需要从磁盘加载（并显示）400 到 600 个图像（每个图像的大小约为 200Kb）。接下来是控件的代码隐藏。

```
private List<BitmapImage> pages = new List<BitmapImage>();

        private BackgroundWorker worker;

        public PagesListBox()
        {
            InitializeComponent();
            worker = new BackgroundWorker();
            worker.WorkerSupportsCancellation = false;
            worker.WorkerReportsProgress = false;
            worker.DoWork += worker_DoWork;
            worker.RunWorkerCompleted += worker_RunWorkerCompleted;
        }

        void worker_DoWork(object sender, DoWorkEventArgs e)
        {
            List<BitmapImage> pagesList = new List<BitmapImage>();
            var files = DirectoryServices.GetFiles(Properties.Settings.Default.PagesScanDirectory, new string[] { "*.tiff", "*.jpg", "*.png", "*.bmp" });
            foreach (var file in files)
            {
                Uri uri = new Uri(file);
                pagesList.Add(new BitmapImage(uri));
            }
            e.Result = pagesList;
        }

        void worker_RunWorkerCompleted(object sender, RunWorkerCompletedEventArgs e)
        {
            Pages.ItemsSource = (List<BitmapImage>)e.Result;
        }

        internal void LoadPages()
        {
            worker.RunWorkerAsync();
        }

        internal List<BitmapImage> AttachPages()
        {
            List<BitmapImage> attachedPages = new List<BitmapImage>();

            foreach (BitmapImage eachItem in Pages.SelectedItems)
            {
                attachedPages.Add(eachItem);
                pages.Remove(eachItem);
            }
            Pages.ItemsSource = null;
            Pages.ItemsSource = pages;

            return attachedPages;
        } 
```

我尝试将页面列表分配给视图（我不能使用后台工作人员），但它失败了。

是否有任何其他方式来异步加载图像（也许更新 UI）或者我正在尝试的这种后台工作方法很好。而且，如果没问题，我该如何解决异常（在完成的事件中）：

```
Must create DependencySource on same Thread as the DependencyObject. 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T09:26:46.873

为了简化您的代码，请使用 ObservableCollection<> 而不是 List<> 并且只需分配 ItemsSource 属性一次。

线程错误是因为您正在创建位图并将其添加到后台工作线程而不是主 UI 线程的列表中。为了解决这个问题，请使用 DispatcherHelper（取自 Laurent Bugnion 的 MVVMLight Framwwork）。

如果您要进行大量 WPF 开发，而不是仅仅以“Winforms 方式”做事，我建议您将 MVVM 视为一种应用程序设计方法，尽管它是一种完全不同的思维方式。

```
...
DispatcherHelper.Initialise()
...

private ObservableCollection<BitmapImage> _Pages = new ObservableCollection<BitmapImage>();

public PagesListBox()
{
    InitializeComponent();
    BackgroundWorker worker = new BackgroundWorker();
    worker.WorkerSupportsCancellation = false;
    worker.WorkerReportsProgress = false;
    worker.DoWork += worker_DoWork;
    this.ItemSource = _Pages;
}

void worker_DoWork(object sender, DoWorkEventArgs e)
{
     var files = DirectoryServices.GetFiles(Properties.Settings.Default.PagesScanDirectory, new string[] { "*.tiff", "*.jpg", "*.png", "*.bmp" });
    foreach (var file in files)
    {
        DispatcherHelper.CheckBeginInvokeOnUI(()=>
        {
            Uri uri = new Uri(file);
            _Pages.Add(new BitmapImage(uri));
        });
    }
}

public static class DispatcherHelper
{
    public static Dispatcher UIDispatcher { get; private set; }

    public static void CheckBeginInvokeOnUI(Action action)
    {
        if (UIDispatcher.CheckAccess())
            action();
        else
            UIDispatcher.BeginInvoke(action);
    }

    public static void Initialize()
    {
        if (UIDispatcher != null)
            return;

        UIDispatcher = Dispatcher.CurrentDispatcher;
    }
} 
```

# .net - .NET Socket.BeginReceive：读取的字节数

> ID：10134265
> 
> 赞同：0
> 
> 时间：2012-04-13T01:46:37.757
> 
> 标签：.net, sockets, beginreceive

出于好奇，我一直在看[这里的数据包捕获代码。](http://www.codeproject.com/Articles/17031/A-Network-Sniffer-in-C)有这样一段：

```
private void OnReceive(IAsyncResult ar)
{
    try
    {
        int nReceived = mainSocket.EndReceive(ar);

        //Analyze the bytes received...

        ParseData (byteData, nReceived);

        if (bContinueCapturing)     
        {
            byteData = new byte[4096];

             //Another call to BeginReceive so that we continue to receive the incoming
             /packets
             mainSocket.BeginReceive(byteData, 0, byteData.Length, SocketFlags.None,
             new AsyncCallback(OnReceive), null);
        }
    }
    ...
    ...
} 
```

MSDN 文档说 EndReceive 确实返回接收到的字节数，但是在每次异步接收后简单地连续**累加 nReceived**并不会接近我期望的字节数。例如，下载一个 16 MB 的文件只达到大约 200K。

我已经查看了与此类似的其他问题，但没有找到任何东西。我尝试改变缓冲区大小以查看是否有所不同，但没有。我只是误解了代码的作用吗？

**编辑**：收到的字节是这样累积的。看起来很简单，所以希望我没有在那里犯错！

```
long totalBytes = 0;
Object byteLock = new Object();
private void ParseData(byte[] byteData, int nReceived)
{
    lock (byteLock)
    {
        totalBytes += nReceived;                
    }
} 
```

**Edit2**：这是用于接收数据的代码。如果需要更多详细信息，可以从我的问题开头的链接获得完整的源代码。该文件是 MJsnifferForm.cs。

```
private void OnReceive(IAsyncResult ar)
{
    try
    {
        int nReceived = mainSocket.EndReceive(ar);

        //Analyze the bytes received...

        ParseData (byteData, nReceived);
        if (bContinueCapturing)     
        {
            byteData = new byte[4096];

            //Another call to BeginReceive so that we continue to receive the incoming
            //packets
            mainSocket.BeginReceive(byteData, 0, byteData.Length, SocketFlags.None,
                 new AsyncCallback(OnReceive), null);
        }
    }
    catch (ObjectDisposedException)
    {
    }
    catch (Exception ex)
    {
        MessageBox.Show(ex.Message, "MJsniffer", MessageBoxButtons.OK, MessageBoxIcon.Error);
     }            
} 
```

我想知道在调用“mainSocket.EndReceive”和下一次调用“mainSocket.BeginReceive”之间接收是否会丢失，但我认为这不应该是一个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T03:35:14.547

为遇到它的任何人回答我自己的问题：我的问题是防火墙的无声阻塞。为程序添加例外（包括 VS studio 调试可执行文件，即 MJSniff.vshost.exe）允许查看传入流量。我学到的教训：它并不总是代码！

# ssrs-2008 - 如何在 tablix 中添加列分组？

> ID：10134272
> 
> 赞同：0
> 
> 时间：2012-04-13T01:47:42.730
> 
> 标签：ssrs-2008, grouping, ssrs-tablix

我正在 SSRS 2008 R2 中开发一个 tablix，并尝试添加一个动态列。此列有四个可能的值：1、2、3、4 季度。在这些列中的每一列下，我想要 2 个子列：计数和 %。

所以我在我的 tablix 中添加了一个列，并在每一行中放置了表达式。我还没有添加子列，因为它给了我错误。所以我只是想让 Quarter 列工作。所以我将这个 Quarter 列按我的 Quarter 字段值分组。我还根据这个相同的值对这一列进行了排序。列组上没有设置过滤器。然而，当我尝试查看我的 RDL 时出现此错误：

> rsinvalidtablixcellcolspan

因此，我将 ColSpan = 1（从 = 2）更改为我找到的 XML 中的每个 ColSpan。但是当我构建我的 RDL 时，我得到了这个错误：

> rscell内容必填

所以这是我遇到的最新错误。如何添加将按季度分组的动态列分组？这应该是我所知道的简单的事情，但是我所看到的微软文档在这个主题上是缺乏的。如果你能推荐任何超级棒的教程！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T02:17:35.450

在 SSRS 中与组合作可能会让人头疼。以下是我在处理比基本标题/详细信息 tablix 更复杂的东西时的成功秘诀。

**SSRS 规则**

1.  在进行其他更改之前测试您所做的每项更改。这可确保您立即明确地识别重大更改。您添加了一个列分组，然后在该组下面添加了嵌套列，您无法确定问题发生在哪里。删除嵌套列并返回到简单分组列以确保其正常工作。工作后，尝试使用嵌套列。

2.  不要直接在 RDL 中编辑 XML。更改任何属性——尤其是非自由文本属性——都可能导致混乱。某些东西显然依赖于`ColSpan`您正在更改的属性，从而导致事情中断。

3.  定期备份！您不能总是很容易地回滚到上一个工作版本。

# c# - 在图钉点击事件上显示菜单（WP7 + Bing 地图）

> ID：10134274
> 
> 赞同：0
> 
> 时间：2012-04-13T01:48:10.963
> 
> 标签：c#, windows-phone-7, bing-maps, pushpin

我已经在地图上设置了图钉，并为每个图钉设置了坐标和文本。我想要的是能够在用户点击图钉时显示某种菜单。菜单将显示访问网站的选项（每个图钉指向电影院），将显示电话号码和显示方向的选项。

我已经设置了图钉，然后像这样设置了我的点击事件：

```
void PushPin_MouseLeftButtonUp(object sender, MouseButtonEventArgs e)
        {
            //MessageBox.Show("you clicked!");

            var pushpin = sender as Pushpin;

        } 
```

我想我可以使用图钉变量来控制内容等。

但是如何显示带有可点击选项的菜单？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T11:00:23.520

您可以使用 Silverlight 工具包中的 ContextMenu，并在用户单击图钉时显示它。请参阅[http://igrali.wordpress.com/2012/01/07/show-a-tooltip-for-tapped-pushpin-on-windows-phone/](http://igrali.wordpress.com/2012/01/07/show-a-tooltip-for-tapped-pushpin-on-windows-phone/)

# regex - htaccess modrewrite 正则表达式重复

> ID：10134279
> 
> 赞同：0
> 
> 时间：2012-04-13T01:49:05.640
> 
> 标签：regex, .htaccess, mod-rewrite

所以我有

```
RewriteEngine On
RewriteBase /blog/
RewriteRule ^/blog/(.*)$ /$1 
```

我正在尝试将所有： /blog/blog/xxxxxxx 重定向到 /blog/xxxx

由于某种原因，它似乎不起作用......有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T01:51:27.713

NVM ...通过执行以下操作解决：

```
RewriteRule ^blog/(.*)$ $1 [R=301,L] 
```

# arrays - Perl 数组哈希打印

> ID：10134283
> 
> 赞同：1
> 
> 时间：2012-04-13T01:49:23.010
> 
> 标签：arrays, perl, hash

我是新手。这个我有。。

```
%categories = (
    'Announcements' => ['Auctions', 'Bands-Seeking-Members', 'Boutiques', 'Charity'],  
    'Appliances' => ['Dishwashers', 'Fireplaces/Wood-Burning-Stoves', 'Microwaves'],  
    'Auto-Parts-and-Accessories' => ['Auto-Accessories', 'Car-Audio-and-Video],  
    'Baby' => ['Baby-Clothing', 'Backpacks-and-Carriers', 'Changing', 'Cribs-and-Playpens'],  
    'Books-and-Media' => ['Blu-ray-Discs', 'Books:-Children'],  
    'Clothing-and-Apparel' => ['Boys-Clothing', 'Boys-Shoes', 'Costumes']  
); 
```

我需要它来打印这个..

```
• Announcements  
 -Auctions  
 -Bands-Seeking-Members  
 -Boutiques  
 -Charity  
•Appliances etc 
```

这是到目前为止的代码..

```
while( my ($cat,$subcat) = each %categories) {      
    print qq~• $cat
~;  
    print qq~- $subcat
~;  
} 
```

正在打印这个..

```
• Clothing-and-Apparel  
- ARRAY(0x1e959c0)  
• Announcements  
- ARRAY(0x1e95590)  
• Auto-Parts-and-Accessories  
- ARRAY(0x1e95740) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-13T01:56:59.723

我相信以下应该做你想要的：

```
while(my ($cat, $subcats) = each %categories) {
    print "• $cat\n";

    foreach my $subcat (@$subcats) {
        print "- $subcat\n";
    }
} 
```

我添加了一个 for 循环来迭代子类别数组的内容。

如果您需要按字母顺序排序的类别和子类别，请尝试以下操作：

```
foreach my $cat (sort keys %categories) {
    print "• $cat\n";

    my $subcategories = $categories{$cat};

    foreach my $subcat (sort @$subcategories) {
        print "- $subcat\n";
    }
} 
```

# python - 我的 numpy (python) 旋转矩阵不起作用

> ID：10134290
> 
> 赞同：4
> 
> 时间：2012-04-13T01:50:05.660
> 
> 标签：python, numpy

我正在制作一个程序来显示各种变换下的矩阵，除了我的旋转矩阵之外，它们都可以工作。我试过摆弄它，但似乎没有任何效果

```
y = input("how many degrees do you want to rotate the shape around the origin?:    ")
j = array([(cos(int(y)), -sin(int(y))), (sin(int(y)), cos(int(y)))])
print(j.dot(w))
input("enter to exit") 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-13T01:53:59.510

正如 python 文档所[`cos`](http://docs.python.org/library/math.html#math.cos)指出[`sin`](http://docs.python.org/library/math.html#math.sin)的那样，参数应该是*弧度*，而不是*度数*。

您可以使用该[`math.radians`](http://docs.python.org/library/math.html#math.radians)函数将度数转换为弧度。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-05T21:09:15.087

您的矩阵未正确定义。尝试

```
rotMatrix = array([[cos(angle), -sin(angle)], 
                   [sin(angle),  cos(angle)]]) 
```

如果你定义一个向量，说

```
vector = array([1, 0]) 
```

然后，您可以使用矩阵乘法方法“点”*围绕原点旋转该向量：*

```
vector = rotMatrix.dot(vector) 
```

向量应该绕原点旋转`angle`度数（辐射角，如前所述）。

# google-chrome-extension - JS 功能不再适用

> ID：10134292
> 
> 赞同：0
> 
> 时间：2012-04-13T01:50:12.947
> 
> 标签：google-chrome-extension

**大家好。**

我目前正在尝试为 Chrome 浏览器开发扩展程序，但遇到了问题。

我的扩展有效，但集成的**JS**功能仅适用于页面加载或刷新时。但是在浏览的时候，当返回页面或者文字要修改的时候，***JS***功能就不再适用了：cry:

这是一个更好地解释自己的示例；）功能是将文本替换为另一个文本：

**清单.json：**

```
{
    "content_scripts": [ {
        "js": [ "content.js", "init.js" ],
        "matches": [ "http://battlelog.battlefield.com/*" ],
        "run_at": "document_end"
    } ],
    "name": "My Extension",
    "author" : "Tesla",
    "version": "1.0",
    "description": "DESCRIPTION COMING !",
    "key": "MIICdwIBADANBgkqhkiG9w0BAQEFAASCAmEwggJdAgEAAoGBALuyMQ/qwguwISXI8lDNIyQQyuQHQIqLRTekDDomL/UlEv2pWvUKtbnj3yMvNsXu/4KGzKZvcDmCD1W2mEXjk8vrm7rEt3AqXsWooSuqRlWJ3vqiB5/mtA+Hac2whiUSqylC5FJH6LbWNjYAAcHyVxif83GRWfxwPVHFiyQTt5hDAgMBAAECgYEAqYwNRZOKNYSkbL1YJiUn2SxSGily47Nqkxhc8yoLqCYVQY352+AQyBpPNjkwARwjMoUR2EZR2aDiuUp3wqoQllRzLHR61jjUtg+0X5RSgQlIbB/GFVns9/7DqXRBcY5RTmMQZ9H53UrIIfZ9fdwZyQ4yOAc2rv14YnwjjZlU/gECQQD6cjUJv7Ps891z2e0lHE2XALIdpaRa4Q5Isx6GairJKlzv722zK2/ftECE1VV+rElwtEw+teCRI7K8Cawx60iHAkEAv9u/9Fz7ZM7j5bgYSkZx043K+PT8yqNTQKtwpwSRDShje8iQkzW9HjLjxlC6qc8uN0sE+H48TaHslCJ/pQntZQJBAM8sDG3NFASuUoGUQ5TQTerc23qk3EmFJHDFIzojttMD5S9hy0hMZVYTYM/BPeD0mifOLcguYd8OPbtI8RW2QR8CQBb9UQIKBkGtHNfQ+HAmAsuzyOeOC6CIc5hjMquAu5TVCx6xCMnq/Y9Zz7tavxNL9SDBB4ZzMeyng364p4zyJJUCQG2GRV0BiZfcxhT7/YV+E+t037pV/NisdXomDgCbSBpkN/gls0wI/6MkhlrU6YmfaZ/hG2QtGs7VCKRJ8fI36Nw=",
    "minimum_chrome_version": "14.0"
} 
```

**内容.js：**

```
var head = document.getElementsByTagName("head")[0];

var script = document.createElement('script');
script.type = 'text/javascript';
script.src = chrome.extension.getURL('main.js');
head.appendChild(script);

var css = document.createElement('link');
css.type = 'text/css';
css.rel = 'stylesheet';
css.href = chrome.extension.getURL('main.css');
head.appendChild(css); 
```

**主.js：**

```
var modif = {
  change: 'Text-Change'
};

var original = {
  change: /Leaderboards/gm,
};

$(document).ready(function() {
    $('.base-middle').each(function() {
        var $p = $(this);
        var html = $p.html();
            $p.html(html.replace(original.change, modif.change));  
    });
}); 
```

该函数必须编辑文本：

***排行榜***

在

***文本更改***

在此页面上：http: [//battlelog.battlefield.com/bf3/leaderboard/](http://battlelog.battlefield.com/bf3/leaderboard/)

无需每次都刷新页面。

如果有人可以帮助我吗？谢谢;) 特斯拉

**编辑/** 我在此消息后发布了回复

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T16:30:43.233

正如我在评论中提到的，您处理一个 AJAX 驱动的页面，这使得事情变得相当棘手（任何人关于如何处理 ajax 站点的任何建议都将不胜感激）。
我注意到该页面的一件事是在它获取页面内容并将它们呈现到它执行的页面之后，`Surface.Renderer.invokeUsedComponents`因此您可以劫持该功能，然后如果 window.location 等于您要修改的 url，则重做您的 mod。
一个关于如何劫持该函数的简单示例如下所示......

```
(function(old){
Surface.Renderer.invokeUsedComponents = function(a){
    //  Check window.location and if it matches then do something
    alert(a);
    old.apply(Surface.Renderer, arguments);
}   
})(Surface.Renderer.invokeUsedComponents) 
```

请注意，我没有进行大量测试，如果他们改变了他们的 api，它可能会破坏你的扩展......
祝你好运！

**编辑**
我忘了提到你需要将该代码注入页面并让它与扩展通信。
这是一些应该可以工作的代码（我没有测试它，只是修改了一些我已经拥有的代码）......

```
// http://code.google.com/chrome/extensions/content_scripts.html#host-page-communication
var comDiv = document.createElement('div');
comDiv.setAttribute("id", "stateChangeDiv");
document.documentElement.appendChild(comDiv);

script = function(old) {
    // Create the event that the content script listens for
    var stateChangeEvent = document.createEvent('Event');
    stateChangeEvent.initEvent('stateChangeEvent', true, true);

    // overide the function that gets called after the page is updated
    Surface.Renderer.invokeUsedComponents = function(a) {

        var hiddenDiv = document.getElementById('stateChangeDiv');
        hiddenDiv.dispatchEvent(stateChangeEvent);
        //console.debug(c);
        old.apply(Surface.Renderer, arguments);
    }

}

function override(fn) {
    var script = document.createElement('script');
    script.setAttribute("type", "application/javascript");
    script.textContent = '(' + fn + ')(Surface.Renderer.invokeUsedComponents);';
    document.documentElement.appendChild(script); // run the script
    document.documentElement.removeChild(script); // clean up
}

override(script);

document.getElementById('stateChangeDiv').addEventListener('stateChangeEvent', function() {
// This will get executed everytime Surface.Renderer.invokeUsedComponents does on the page
    alert('page updated, check your window.location and do something');

}); 
```

# .htaccess - Htaccess 规则将 /home/index/2 变成 /page/2？

> ID：10134294
> 
> 赞同：0
> 
> 时间：2012-04-13T01:50:15.800
> 
> 标签：.htaccess, mod-rewrite

现在我的网址看起来像这样：

```
http://mysite.com/home/index/2 
```

将它变成这样的 htaccess 规则是什么？：

```
http://mysite.com/page/2 
```

注意：2 可以是从 1 到无穷大的任意数字。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T02:50:10.200

每次需要重写 url 时，我都会参考这个[网站以供参考。](http://httpd.apache.org/docs/2.0/mod/mod_rewrite.html#Solutions)您可能也应该在那里阅读。以下是我的建议，请根据您的需要进行修改。

```
RewriteRule ^/home/index/(.+) /page/$1 [R] 
```

# java - 使用两个不同的标准对数组进行排序

> ID：10134303
> 
> 赞同：1
> 
> 时间：2012-04-13T01:52:03.927
> 
> 标签：java, arrays, sorting

我正在尝试使用插入排序算法对数组进行排序。该数组填充了`WordNode`包括`word`字段（从文本文件输入）和`frequency`字段（用于测量特定单词在文本文件中出现的次数）的元素。我已经实现了排序，以便单词按频率排序（从最低到最高），但如果频率相等，我也想按字母顺序排序。如何同时使用两个不同的标准进行排序？下面是我的排序代码。

```
public static void sort(ArrayUnorderedList<WordNode> array) {
    //create stacks for insertion sort
    LinkedStack<WordNode> sorted = new LinkedStack<WordNode>();
    LinkedStack<WordNode> temp = new LinkedStack<WordNode>();

    //while the array has elements to be sorted
    while(!array.isEmpty()) {
        //remove current element from array
        WordNode currentNode = array.removeFirst();

        //while the sorted stack meets sorting criteria
        while((!sorted.isEmpty()) && (sorted.peek().getFrequency() < currentNode.getFrequency())) {
            //push elements to temp stack
            temp.push(sorted.pop());
        }

        //push current element to sorted stack
        sorted.push(currentNode);

        //while the temp stack has elements to be replaced
        while(!temp.isEmpty()) {
            //push elements to sorted stack
            sorted.push(temp.pop());
        }
    }

    //replace sorted elements in array
    while(!sorted.isEmpty()) {
        array.addToRear(sorted.pop());
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T02:14:11.450

AppClay 的回答是绝对正确的，但是如果您对“整理”感兴趣，请创建一个实现[Comparator](http://docs.oracle.com/javase/6/docs/api/java/util/Comparator.html)的助手。

```
class WordNodeComparator implements Comparator<WordNode> {
    @Override
    public int compare(WordNode lhs, WordNode rhs) {
        int result = lhs.getFrequency() - rhs.getFrequency();
        if (result == 0) {
            return lhs.getWord().compareTo(rhs.getWord());
        }
        else {
            return result;
        }
    }
} 
```

然后你只需创建它的一个实例，并在你的循环中使用它：

```
while((!sorted.isEmpty()) && (nodeComparator.compare(sorted.peek(), currentNode) < 0) 
```

这不仅使代码更易于阅读和测试，而且现在可以根据需要更换不同的 Comparator 实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T01:56:42.207

将此添加到您的代码中：

```
int cmp = sorted.peek().getFrequency() - currentNode.getFrequency();
if (cmp == 0)
    cmp = sorted.peek().getWord().compareTo(currentNode.getWord());

while((!sorted.isEmpty()) && cmp < 0) {
    //push elements to temp stack
    temp.push(sorted.pop());
    cmp = sorted.peek().getFrequency() - currentNode.getFrequency();
    if (cmp == 0)
        cmp = sorted.peek().getWord().compareTo(currentNode.getWord());
} 
```

我假设`getFrequency()`返回一个整数，并且 a 中的实际单词`WordNode`由该`getWord()`方法访问。使用上面我们首先按频率比较，如果两个频率相等，那么我们按字母顺序比较

**编辑 ：**

一个更好的解决方案，定义这个辅助方法：

```
private static boolean compare(LinkedStack<WordNode> sorted, WordNode current) {
    int cmp = sorted.peek().getFrequency() - current.getFrequency();
    if (cmp == 0)
        cmp = sorted.peek().getWord().compareTo(current.getWord());
    return cmp;
} 
```

然后将代码中的第一个内部循环更改为：

```
while (!sorted.isEmpty() && compare(sorted, currentNode) < 0) {
    //push elements to temp stack
    temp.push(sorted.pop());
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T01:59:18.727

更新这一行：

```
while((!sorted.isEmpty()) && (sorted.peek().getFrequency() < currentNode.getFrequency())) { 
```

到：

```
while((!sorted.isEmpty()) && (sorted.peek().getFrequency() < currentNode.getFrequency() || (sorted.peek().getFrequency() == currentNode.getFrequency() &&  sorted.peek().getWord().compareTo(currentNode.getWord()) < 0))) { 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-13T02:36:06.193

使用[番石榴库](http://code.google.com/p/guava-libraries/)：

```
 public static List<WordNode> sort(List<WordNode> src){
       List<WordNode> result = Lists.newArrayList(src);
       Collections.sort(result, new Comparator<WordNode>(){
           @Override public int compare(WordNode w1, WordNode w2) {
             return ComparisonChain.start()  
                     .compare(w1.frequency, w2.frequency)  
                     .compare(w1.word     , w2.word) 
                     .result(); 
        }});
       return result;
     } 
```

# timer - ThreadPool 和 Threading.Timer？

> ID：10134306
> 
> 赞同：0
> 
> 时间：2012-04-13T01:52:32.320
> 
> 标签：timer, threadpool

我对线程中的计时器有疑问？

我的代码：

```
public partial class Form1 : Form
{
    public Form1()
    {
        InitializeComponent();
    }

    private void Form1_Load(object sender, EventArgs e)
    {
       Testing testing = new Testing();           
       Thread thread = new Thread(new ThreadStart(delegate
        {
            testing.Start();               
        }));
        thread.IsBackground = true;
        thread.Start();
    }

}

public class Testing
{
    System.Threading.Timer timer = null;

    public void Start()
    {
        if (timer == null)
            timer = new System.Threading.Timer(timerTick, null, 500, 500);
        List<ManualResetEvent> amanual = new List<ManualResetEvent>();
        for (int index = 0; index < 10; index++)
        {
            ManualResetEvent manual = new ManualResetEvent(false);
            ThreadPool.QueueUserWorkItem(new WaitCallback(delegate(object context)
                {
                    this.RunningThreadPool(context);
                    manual.Set();
                }
                ));
            amanual.Add(manual);
        }

        WaitHandle.WaitAll(amanual.ToArray());
        Console.WriteLine("Task complete");
    }
    void timerTick(object sender)
    {            
        Console.WriteLine("Timer running");
    }

    public void RunningThreadPool(object context)
    {            
        Console.WriteLine("Thread in Threadpool is running...");           
    }
} 
```

}

这是结果线程池中的线程正在运行...线程池中的线程正在运行...线程池中的线程正在运行...线程池中的线程正在运行...线程池中的线程正在运行...线程池中的线程正在运行。 .. 线程池中的线程正在运行... 线程池中的线程正在运行... 线程池中的线程正在运行... 线程池中的线程正在运行... 任务完成 定时器运行 定时器运行 定时器运行 定时器运行

我有一个问题，定时器如何在线程池执行之前运行。除了在线程池上设置计时器。因为我需要线程池上的计时器检查线程。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T02:01:12.760

我想说 500 毫秒是足够的时间来完成你的工作队列，甚至在 Timer 触发一次之前。10个`Console.WriteLine`电话并不意味着太多的工作。

假设您正在运行较重的工作负载：

Timer 在 ThreadPool 中运行它的回调，所以它在其他工作已经排队之后排队......即它在队列中的最后一个。因为您排队的项目多于 ThreadPool 中的线程数，并且 ThreadPool 仅在长时间负载下启动新线程，所以 ThreadPool 无法及时执行 Timer 的回调。

# c# - 如何取消等待中的任务？

> ID：10134310
> 
> 赞同：176
> 
> 时间：2012-04-13T01:53:19.503
> 
> 标签：c#, task-parallel-library, .net-4.5

我正在玩这些 Windows 8 WinRT 任务，我正在尝试使用下面的方法取消任务，并且它在某种程度上有效。确实调用了 CancelNotification 方法，这让您认为任务已取消，但在后台任务继续运行，然后在完成后，任务的状态始终为完成且从未取消。有没有办法在取消任务时完全停止任务？

```
private async void TryTask()
{
    CancellationTokenSource source = new CancellationTokenSource();
    source.Token.Register(CancelNotification);
    source.CancelAfter(TimeSpan.FromSeconds(1));
    var task = Task<int>.Factory.StartNew(() => slowFunc(1, 2), source.Token);

    await task;            

    if (task.IsCompleted)
    {
        MessageDialog md = new MessageDialog(task.Result.ToString());
        await md.ShowAsync();
    }
    else
    {
        MessageDialog md = new MessageDialog("Uncompleted");
        await md.ShowAsync();
    }
}

private int slowFunc(int a, int b)
{
    string someString = string.Empty;
    for (int i = 0; i < 200000; i++)
    {
        someString += "a";
    }

    return a + b;
}

private void CancelNotification()
{
} 
```

* * *

## 回答 #1

> 赞同：256
> 
> 时间：2012-04-13T02:43:33.940

阅读[Cancellation](https://docs.microsoft.com/en-us/dotnet/standard/threading/cancellation-in-managed-threads)（它是在 .NET 4.0 中引入的，从那时起基本上没有改变）和[基于任务的异步模式](https://web.archive.org/web/20150406071541/http://www.microsoft.com/en-us/download/details.aspx?id=19957)，它提供了有关如何使用`CancellationToken`方法`async`的指南。

总而言之，您将 a 传递给`CancellationToken`每个支持取消的方法，并且该方法必须定期检查它。

```
private async Task TryTask()
{
  CancellationTokenSource source = new CancellationTokenSource();
  source.CancelAfter(TimeSpan.FromSeconds(1));
  Task<int> task = Task.Run(() => slowFunc(1, 2, source.Token), source.Token);

  // (A canceled task will raise an exception when awaited).
  await task;
}

private int slowFunc(int a, int b, CancellationToken cancellationToken)
{
  string someString = string.Empty;
  for (int i = 0; i < 200000; i++)
  {
    someString += "a";
    if (i % 1000 == 0)
      cancellationToken.ThrowIfCancellationRequested();
  }

  return a + b;
} 
```

* * *

## 回答 #2

> 赞同：45
> 
> 时间：2015-10-09T13:49:23.660

或者，为了避免修改`slowFunc`（例如，您无权访问源代码）：

```
var source = new CancellationTokenSource(); //original code
source.Token.Register(CancelNotification); //original code
source.CancelAfter(TimeSpan.FromSeconds(1)); //original code
var completionSource = new TaskCompletionSource<object>(); //New code
source.Token.Register(() => completionSource.TrySetCanceled()); //New code
var task = Task<int>.Factory.StartNew(() => slowFunc(1, 2), source.Token); //original code

//original code: await task;  
await Task.WhenAny(task, completionSource.Task); //New code 
```

您还可以使用来自[https://github.com/StephenCleary/AsyncEx](https://github.com/StephenCleary/AsyncEx)的不错的扩展方法，让它看起来很简单：

```
await Task.WhenAny(task, source.Token.AsTask()); 
```

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2018-11-20T13:01:29.147

一种尚未涉及的情况是如何在异步方法中处理取消。以一个简单的例子为例，您需要将一些数据上传到服务，让它计算一些东西，然后返回一些结果。

```
public async Task<Results> ProcessDataAsync(MyData data)
{
    var client = await GetClientAsync();
    await client.UploadDataAsync(data);
    await client.CalculateAsync();
    return await client.GetResultsAsync();
} 
```

如果您想支持取消，那么最简单的方法是传入一个令牌并检查它是否在每个异步方法调用（或使用 ContinueWith）之间被取消。如果他们的通话时间很长，尽管您可能需要等待一段时间才能取消。我创建了一个小辅助方法，以便在取消后立即失败。

```
public static class TaskExtensions
{
    public static async Task<T> WaitOrCancel<T>(this Task<T> task, CancellationToken token)
    {
        token.ThrowIfCancellationRequested();
        await Task.WhenAny(task, token.WhenCanceled());
        token.ThrowIfCancellationRequested();

        return await task;
    }

    public static Task WhenCanceled(this CancellationToken cancellationToken)
    {
        var tcs = new TaskCompletionSource<bool>();
        cancellationToken.Register(s => ((TaskCompletionSource<bool>)s).SetResult(true), tcs);
        return tcs.Task;
    }
} 
```

因此，要使用它，只需添加`.WaitOrCancel(token)`到任何异步调用：

```
public async Task<Results> ProcessDataAsync(MyData data, CancellationToken token)
{
    Client client;
    try
    {
        client = await GetClientAsync().WaitOrCancel(token);
        await client.UploadDataAsync(data).WaitOrCancel(token);
        await client.CalculateAsync().WaitOrCancel(token);
        return await client.GetResultsAsync().WaitOrCancel(token);
    }
    catch (OperationCanceledException)
    {
        if (client != null)
            await client.CancelAsync();
        throw;
    }
} 
```

请注意，这不会停止您正在等待的任务，它将继续运行。您需要使用不同的机制来停止它，例如`CancelAsync`示例中的调用，或者最好将相同`CancellationToken`的传递给它，`Task`以便它最终可以处理取消。[不建议](https://stackoverflow.com/questions/4783865/how-do-i-abort-cancel-tpl-tasks)尝试中止线程。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-08-02T01:22:15.020

我只想添加到已经接受的答案。我被困在这一点上，但我在处理完整事件时采取了不同的方式。我没有运行 await，而是向任务添加了一个已完成的处理程序。

```
Comments.AsAsyncAction().Completed += new AsyncActionCompletedHandler(CommentLoadComplete); 
```

事件处理程序看起来像这样

```
private void CommentLoadComplete(IAsyncAction sender, AsyncStatus status )
{
    if (status == AsyncStatus.Canceled)
    {
        return;
    }
    CommentsItemsControl.ItemsSource = Comments.Result;
    CommentScrollViewer.ScrollToVerticalOffset(0);
    CommentScrollViewer.Visibility = Visibility.Visible;
    CommentProgressRing.Visibility = Visibility.Collapsed;
} 
```

使用这条路线，所有处理都已经为您完成，当任务被取消时，它只会触发事件处理程序，您可以查看它是否在那里被取消。

# algorithm - 有什么算法可以解决这个数字组序列吗？

> ID：10134311
> 
> 赞同：2
> 
> 时间：2012-04-13T01:53:31.333
> 
> 标签：algorithm, numbers, set

我有一个问题，如下所述。你有什么好的解决方案，或者这个问题只是任何“经典”或“已解决”问题的另一种形式？

问题是 ：

有一些数字组，例如

一（1 8 9）

乙(1 4 5)

C(2 4 6)

D(3 4 7)

E(2 10 11)

F(3 12 13)

有“AF”六组。我们有数字“1,2,3,4,5,6,7,8,9,10,11,12,13”。现在找到满足每个组的最小数量的数字集合必须至少在这个集合中有一个数字。例如，我们可以找到集合“1 4 2 13 12”，A 有“1”，B 有“1,4”，C 有“2,4”，D 有“4”，E 有“2”， F 有 "12,13" 。

但是集合“1 2 4”并不是我们发现的，F在集合中没有任何数字。

最好的集合是“1,2,3”，每个组在集合中都有一个数字，集合的大小是最优的。它只有三个数字。这就是我们想要的。如果有很多最好的集合，找到任何一个都可以。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-13T01:59:51.537

这个问题是 NP-hard 通过从[NP-hard](http://en.wikipedia.org/wiki/NP-hard) [顶点覆盖问题](http://en.wikipedia.org/wiki/Vertex_cover_problem)减少而来的（给定一个图，你能找到一组 k 节点，使得图中的每个顶点都与某个选定的节点相邻吗？）

减少如下。以您喜欢的任何顺序对图表 1、2、3、...、n 中的所有节点进行编号。然后，对于图中的每条边，构建仅包含两个数字的集合 - 边的端点。如果原始图中有一个 k 节点顶点覆盖，那么您可以选择一组 k 个数字（即顶点覆盖中的节点），这样您就可以从每个集合中选择一个数字。这可以在多项式时间内计算。

要了解减少工作的原因，请注意，如果有一组大小为 k，您可以选择使得构造中的每个集合至少选择一个元素，然后对应于这些数字的顶点形成 k 元素顶点覆盖原图。

这种减少可以在多项式时间内完成，因此我们从 NP-hard vertex-cover 问题到您的问题进行了多项式时间减少。因此，这个问题是 NP 难的。因此，除非[P = NP](http://en.wikipedia.org/wiki/P_versus_NP_problem) ，否则此问题没有多项式时间算法。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-13T02:00:04.517

这相当于[集覆盖问题](http://en.wikipedia.org/wiki/Set_cover_problem)。在这种情况下，您的每个集合 A、B、...、F 都是集合覆盖问题的元素，并且每个数字 1、2、...、13 都是集合。例如，在这个映射中，1 变为 {A, B}，而 11 变为集合 {E}。

套装封面是 NP-hard。链接的维基百科页面上的整数线性规划公式可能与您获得的精确解决方案一样好；贪心算法对于大问题有一个不错的近似值。

# model-view-controller - 将数据从库传递到控制器，然后在 CodeIgniter 2 中查看

> ID：10134312
> 
> 赞同：0
> 
> 时间：2012-04-13T01:53:33.957
> 
> 标签：model-view-controller, view, controller, codeigniter-2

我正在尝试将一些数据从我的自定义库传递到控制器并使其在我的视图中可用。对于我的生活，我看不出我哪里出错了。

我打算得到数据库结果；为了进行测试，我使用了一个简单的数组，但它仍然无法正常工作。

图书馆：

```
class Test{
  public function __construct(){
    $this->CI =& get_instance();
  }
  public function getStuff(){
    $test = array('one','two','three');
    return $test;
  }
} 
```

控制器：

```
function __construct(){
  parent::__construct();
  $this->load->library(array('form_validation', 'test'));
}

public function index(){
  $data['q'] = $this->test->getStuff();
  $this->load->view('index', $data);
} 
```

风景：

```
var_dump($q); // returns Message: Undefined variable: q 
```

已经晚了，所以这可能是一个愚蠢的错误/错字。这是使用 CodeIgniter 2.1.0。我已经用谷歌搜索了这个 - 似乎没有一个解决方案有效。

谢谢参观！

# c++ - 什么编译器在内部用于初始化变量并在构造对象时分配变量？

> ID：10134314
> 
> 赞同：1
> 
> 时间：2012-04-13T01:53:49.037
> 
> 标签：c++

> **可能重复：**
> [为什么我更喜欢使用成员初始化列表？](https://stackoverflow.com/questions/926752/why-should-i-prefer-to-use-member-initialization-list)

A 类有一个成员变量 i。i 可以在对象创建期间被初始化或分配。

A) 初始化

```
 class A {
         int i;
    public:
        A(int _i) : i(_i){}
    } 
```

B) 分配

```
class A {
         int i;
    public:
        A(int _i) : { i = _i}
    } 
```

我的问题是这两种方法之间的基本区别是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T02:05:30.223

`i`不同之处在于在您的类中使用哪种 C++ 机制进行初始化。案例 (A) 通过构造函数对其进行初始化，案例 (B) 使用赋值运算符（如果未定义赋值运算符，则使用复制构造函数）。

大多数 C++ 编译器会为这个特定示例生成完全相同的代码，因为您使用的是 int，它是一种“普通旧数据”类型。如果`i`是类类型，它可能会产生很大的不同。

# jquery - jquery mobile错误：对象没有方法'on'

> ID：10134316
> 
> 赞同：2
> 
> 时间：2012-04-13T01:54:07.327
> 
> 标签：jquery, jquery-mobile, cordova

我有一个列表视图点击事件：http: [//jsfiddle.net/w2JZU/260/](http://jsfiddle.net/w2JZU/260/)

```
$('#todayvalue').children('li').on('click', function () {
    var selected_index = $(this).attr('id');
    alert('Selected Index = ' + selected_index);
});​ 
```

此方法在 jquery mobile 上运行良好。但是当我将它部署到 PhoneGap javascript 文件时，会出现此错误。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-13T02:55:52.623

`on`在 2011 年 11 月的 v1.7 中引入了 JQuery。它还没有出现在 JQuery Mobile 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T01:58:04.373

尝试

```
$('#todayvalue').children('li').click(function () {
var selected_index = $(this).attr('id');
alert('Selected Index = ' + selected_index);
});​ 
```

.on 在您的 jQuery mobile 版本上可能不可用。

# c# - 除了在 c# 中使用计时器

> ID：10134319
> 
> 赞同：-1
> 
> 时间：2012-04-13T01:55:13.330
> 
> 标签：c#

我正在尝试编写一个无需使用计时器即可继续执行方法的程序。例如，我想要一个显示当前正在运行的进程列表的程序。显然，它在不断变化。我不想使用每秒获取进程列表并将它们添加到列表中的计时器，因为它对我来说看起来不是很优雅。有什么特别的方法可以做到这一点吗？我怎样才能提供可以实现这一目标的服务？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-13T02:35:01.067

就个人而言，我会为此坚持使用计时器。它真的很优雅。但是，如果你*真的*想要一些更有活力的东西，那么请继续阅读！

随着新关键字`async`和`await`关键字（将包含在 C# 5.0 中）的流行，我们可能会看到计时器变得越来越不酷¹。[这是您现在使用Async CTP](http://www.microsoft.com/download/en/details.aspx?displaylang=en&id=9983)在没有计时器的情况下如何做到这一点的方法。

```
private async void ShowProcessesButton_Click(object sender, EventArgs args)
{
  while (true)
  {
    await Task.Delay(1000);  // TaskEx.Delay in the CTP
    YourListBox.Items.Clear();
    foreach (Process p in Process.GetProcesses())
    {
      YourListBox.Items.Add(p.ProcessName);
    }
  }
} 
```

很奇怪吧？它可能不是如何`async`以及应该如何`await`使用的理想示例，但您明白了。这是未来的浪潮。

* * *

¹*不要误会我的意思。总是需要传统的计时器类。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T02:41:55.880

您可以使用无限循环（直到进程退出）生成较低优先级的线程，以定期更新您的进程列表。如果没有关于您正在使用哪种控件的更多信息，或者我无法真正帮助您使用 Control 更新委托，但您的函数的粗略骨架将是：

```
 private void processUpdater()
    {
        while (true) //not the most elegant way to implement a pseudo-infinite loop, but you can figure out how you want to signal it to end.
        {
            var runningProcesses = Process.GetProcesses().Where(p => !string.IsNullOrEmpty(p.MainWindowTitle)).Select(p => p.MainWindowTitle); //filter the running processes to get those with open windows.
            this.lstProcesses.Invoke((MethodInvoker)delegate { this.lstProcesses.Items.Clear(); }); //thread-safe invocation to clear the current items
            this.lstProcesses.Invoke((MethodInvoker)delegate { this.lstProcesses.Items.AddRange(runningProcesses.ToArray<string>()); }); //add the new set of windowed processes
            System.Threading.Thread.Sleep(5000); //update the list every 5 seconds
        }
    } 
```

在我的情况下，我只是使用窗口捕获进程，并在列表框中列出这些窗口标题（lstProcesses）

现在，产生这个线程：

```
var tUpdater = new System.Threading.Thread(processUpdater);
tUpdater.Priority = System.Threading.ThreadPriority.BelowNormal;
tUpdater.Name = "Process List Updater";
tUpdater.Start(); //start the thread running. 
```

显然这是一个非常基本的实现，但希望它能让你大致了解如何做你想做的事。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T02:07:15.930

如果您不使用计时器，您将需要执行以下操作：

1.  在您的应用启动时获取列表或正在运行的进程
2.  检测进程何时启动并将其添加到列表中
3.  检测进程何时结束并将其从列表中删除

要检测进程创建/终止，请查看此答案：

[https://stackoverflow.com/a/3556280/64290](https://stackoverflow.com/a/3556280/64290)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-13T02:22:03.380

**程序1：**

您可以开发一个持续运行的 Windows 服务。不需要计时器。如果您能给我们提供更多细节，我们可以提出更好的解决方案。但请记住，窗口服务不可能进行用户交互。

正在运行的进程被添加到 observablecollection 中。每当添加一个项目时，它都会引发 CollectionChanged 事件。

**程序2：**

您可以有一个程序，您希望将正在运行的进程列表公开为 Web 服务，该 Web 服务在 Program1 中使用。在program1的CollectionChanged事件处理程序中，您可以调用program2的webservice并通知新添加的进程。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-13T02:30:25.647

我不同意认为 Timers 是这里唯一或最佳答案的评论。当变化发生时希望得到*警报*，而不是轮询它，这是一种崇高的追求。我相信您正在寻找一个 WinAPI “Hook”，但我不知道是哪一个或它是否存在。

请参阅[http://msdn.microsoft.com/en-us/library/windows/desktop/ms644959%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644959%28v=vs.85%29.aspx)

另外： [Win API：挂钩每个窗口显示或流程执行](https://stackoverflow.com/questions/1949109/win-api-hook-every-window-show-or-process-execution)

# java - 从 11 个 ArrayLists 中选择 1 个太慢了

> ID：10134320
> 
> 赞同：0
> 
> 时间：2012-04-13T01:55:23.457
> 
> 标签：java, combinations, cartesian-product

这基本上就是我的程序正在做的事情：

如果您有 5 种不同的衬衫和 4 条不同的裤子可供选择，那么您可以穿 20 种不同的衬衫和裤子组合，我的程序将遍历所有 20 种组合以确定哪个是“最好的”穿。

除了，在我的情况下，有 11 种不同类型的服装（如头饰、手套、裤子、耳环、鞋子、斗篷等），每个类别多达 10 件。因此，可能有多达 11^10 种组合，当我尝试在每个类别中仅使用 4 个或 11^4 运行我的程序时，大约需要 5 秒才能完成。11^10 需要 DAYS 天。

目前，我正在进行的是 11 个嵌套在彼此内部的循环来遍历每个组合。这显然不是最好的方法，因为它太慢了。我怎样才能让它更快？对于上下文，我有 1 个“外部”ArrayList，其中包含 11 个 ArrayList，这 11 个 ArrayList 中的每一个都是一个对象列表（衣服）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T02:01:36.293

如果不使用蛮力搜索，确实没有办法做到这一点，但是您可以通过生成一系列可能的匹配项来减少选择区域，并且只遍历列表中在该范围内的项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T02:08:50.000

**编辑**

由于您的分数是相加的，因此每个类别中最好的衣服是 dex+str+int 总和最好的那件。这意味着您不需要考虑组合，只需选择最好的衬衫，然后是最好的裤子等。所以 11 个循环，而不是 11 个嵌套循环。

**旧答案**

在一般情况下，蛮力（你现在正在做的事情）是保证正确答案的唯一方法。

然而，在某些情况下，你可以做得更好：例如，如果我知道如果一个衬衫-裤子组合比另一个衬衫-裤子组合“更好”，那么无论我选择什么其他衣服，我都能找到最好的衬衫- 先裤子搭配，再考虑搭配什么衣服最好。这本质上是一个贪婪的搜索。

# inno-setup - 从一个文件中读取修改时间，并用它来设置整个目录中文件的时间

> ID：10134322
> 
> 赞同：2
> 
> 时间：2012-04-13T01:55:33.177
> 
> 标签：inno-setup, last-modified

在我的安装程序中，我从不存储时间/日期属性的档案中提取文件，因此当它们被提取时，最后修改日期设置为当前日期。我想将其设置为存档文件的最后修改日期，但我不知道如何。[我尝试使用此处](https://stackoverflow.com/questions/749954/get-a-files-last-updated-time-using-pascal-innosetup/1065605#1065605)和[此处](https://stackoverflow.com/questions/4658813/how-can-i-touch-a-file-from-within-an-innosetup-script)的代码片段，但虽然它没有给出任何错误，但它不适用于更改时间。需要在文件夹中更改 * .* 的上次修改日期。

~~另外，如果用户取消设置并开始回滚更改，我需要在哪里删除这些文件？我已经在 UninstallDelete 中处理了它，但如果用户取消设置则不会。~~

编辑：忽略第二部分，我实际上是在我在这里发布后不久就想出来的。将我自己的 CleanUp() 添加到 DeinitializeSetup() 并检查卸载程序注册表项。

这是我尝试将其添加到的代码部分：

```
procedure VolExtract(VWorld: String);
var
  ResultCode: Integer;
  VPath: String;
begin
  // Files are extracted to {app}\VWorld\One, {app}\VWorld\Two, etc.
  VPath := ExpandConstant('{app}\' + VWorld);
  WizardForm.FilenameLabel.Caption := DriveLetter + VWorld + '\one.vol';
  if Exec(ExpandConstant('{tmp}\volextract.exe'), '"' + DriveLetter + VWorld + '\one.vol" "' + VPath + '"', '', SW_HIDE, ewWaitUntilTerminated, ResultCode) and (ResultCode = 0) then
  begin
    // Yep, it executed successfully
    WizardForm.FilenameLabel.Caption := DriveLetter + VWorld + '\two.vol';
    if Exec(ExpandConstant('{tmp}\volextract.exe'), '"' + DriveLetter + VWorld + '\two.vol" "' + VPath + '"', '', SW_HIDE, ewWaitUntilTerminated, ResultCode) and (ResultCode = 0) then
    begin
      // Next
      WizardForm.FilenameLabel.Caption := DriveLetter + VWorld + '\three.vol';
      if Exec(ExpandConstant('{tmp}\volextract.exe'), '"' + DriveLetter + VWorld + '\three.vol" "' + VPath + '"', '', SW_HIDE, ewWaitUntilTerminated, ResultCode) and (ResultCode = 0) then
      begin
        // Next
        WizardForm.FilenameLabel.Caption := DriveLetter + VWorld + '\four.vol';
        Exec(ExpandConstant('{tmp}\volextract.exe'), '"' + DriveLetter + VWorld + '\four.vol" "' + VPath + '"', '', SW_HIDE, ewWaitUntilTerminated, ResultCode);
      end;
    end;
  end;
  if ResultCode <> 0 then
  begin
    // Handle Fail
    CDFound := False;
    MsgBox(CustomMessage('FileErr'), mbInformation, MB_OK);
    WizardForm.Close;
  end;
end; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T14:59:20.373

要通过某个文件的 LastWriteTime 更改指定目录中所有文件的最后修改时间（我们现在称之为 LastWriteTime），请在提取文件后使用以下代码。您可以按照[`commented version`](https://stackoverflow.com/revisions/10163139/1)这篇文章的先前版本，但请注意，我在那里有错误（混合时间参数和未使用的文件标志参数），但重点仍然存在。

另请注意，此代码适用于 InnoSetup 的 ANSI 版本。如果您需要将此用于 Unicode 版本，则应将`CreateFile`函数 import 定义为，`CreateFileW`而不是使用this`CreateFileA`中建议的技巧。[`kobik`](https://stackoverflow.com/users/937125/kobik)[`post`](https://stackoverflow.com/a/9670505/960757)

```
[code]
const
  OPEN_EXISTING = 3;  
  FILE_SHARE_WRITE = 2;
  GENERIC_WRITE = $40000000;
  INVALID_HANDLE_VALUE = 4294967295;

function CreateFile(lpFileName: string; dwDesiredAccess, dwShareMode,
  lpSecurityAttributes, dwCreationDisposition, dwFlagsAndAttributes: DWORD;
  hTemplateFile: THandle): THandle; 
  external 'CreateFileA@kernel32.dll stdcall';
function CloseHandle(hObject: THandle): BOOL; 
  external 'CloseHandle@kernel32.dll stdcall';
function SetFileTime(hFile: THandle; const lpCreationTime, lpLastAccessTime, 
  lpLastWriteTime: TFileTime): BOOL; 
  external 'SetFileTime@kernel32.dll stdcall';

function FileSetTime(const AFileName: string; const ACreationTime, 
  ALastAccessTime, ALastWriteTime: TFileTime): Boolean;
var
  FileHandle: THandle;
begin
  Result := False;
  FileHandle := CreateFile(AFileName, GENERIC_WRITE, FILE_SHARE_WRITE, 0,
    OPEN_EXISTING, FILE_ATTRIBUTE_NORMAL, 0);
  if FileHandle <> INVALID_HANDLE_VALUE then
  try
    Result := SetFileTime(FileHandle, ACreationTime, ALastAccessTime, 
      ALastWriteTime);
  finally
    CloseHandle(FileHandle);
  end;
end; 

procedure ModifyLastWriteTime(const ASourceFile, ATargetFolder: string);
var
  FindRec: TFindRec;
  LastWriteTime: TFileTime;
begin
  if FindFirst(ASourceFile, FindRec) then
  begin
    LastWriteTime := FindRec.LastWriteTime;
    if FindFirst(ATargetFolder + '*.*', FindRec) then
    try
      repeat
        if (FindRec.Attributes and FILE_ATTRIBUTE_DIRECTORY) = 0 then
          FileSetTime(ATargetFolder + FindRec.Name, FindRec.CreationTime, 
            FindRec.LastAccessTime, LastWriteTime);
      until
        not FindNext(FindRec);
    finally
      FindClose(FindRec);
    end;
  end;
end; 
```

以及用法。该`ModifyLastWriteTime`过程的第一个参数是从中获取 LastWriteTime 的源文件的名称。第二个参数是文件将被源文件修改其 LastWriteTime 值的目录（不要忘记在目标文件夹参数中包含尾部反斜杠）：

```
ModifyLastWriteTime('c:\SourceFile.xxx', 'c:\TargetFolder\') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T09:57:50.240

关于第二个问题，您可以在一个名为的过程中删除已提取的文件

```
Procedure CancelButtonClick(CurPageID: Integer; Var Cancel, Confirm: Boolean);
Begin
End; 
```

正如 chm 中的解释，*Pascal 脚本：事件函数部分*

关于第一个问题，我建议您使用 inno setup [files] 部分而不是从存档中提取。您可能可以将此存档解压缩到本地文件夹（因此从您这边，在编译之前，将此本地文件夹添加到 [files]。但我可能误解了您对文件修改日期的要求。

# ruby-on-rails - 如何在 ubuntu 中为 rails 3.1.3 应用程序加载 sqlite3 控制台？

> ID：10134323
> 
> 赞同：1
> 
> 时间：2012-04-13T01:55:50.757
> 
> 标签：ruby-on-rails, sqlite, ubuntu, ruby-on-rails-3.1

我们的 rails 应用程序在带有 sqlite3 数据库的 ubuntu 10.04 服务器上运行。我们如何在服务器上启动 sqlite3 控制台？在 current/db/ 下输入 sqlite3 ex1 时，有错误提示未安装 sqlite3。但是使用“gem list”，它显示已安装 sqlite3 1.3.5。

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T01:58:55.263

可以安装 SQLite gem，但没有安装 SQLite 本身

```
apt-get install sqlite3 
```

注意：不确定 Ubuntu 如何处理此问题，但如果`sqlite3`不是有效命令，请同时测试：

```
# Is any sqlite installed?
$ which sqlite

# If so, what version
$ sqlite --version 
```

# android - 如何在 Android 上实现选项卡之间的滑动？

> ID：10134332
> 
> 赞同：26
> 
> 时间：2012-04-13T01:57:18.230
> 
> 标签：android, tabs, android-viewpager

Android 4.0 中针对选项卡的关键设计建议之一是允许在适当的情况下在它们之间[滑动。](http://developer.android.com/design/patterns/swipe-views.html#between-tabs)此行为使用户能够水平滑动选定选项卡的内容以导航到相邻选项卡，而无需直接与选项卡本身交互。

如何实施？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-04-13T01:58:04.267

**注意：这是**[Android 培训](http://developer.android.com/training/index.html)课程*[实施有效导航](http://developer.android.com/training/implementing-navigation/lateral.html#swipe-tabs)*的摘录。

* * *

要实现这一点（在 Android 3.0 或更高版本中），您可以将[ViewPager](http://developer.android.com/reference/android/support/v4/view/ViewPager.html)与[ActionBar](http://developer.android.com/reference/android/app/ActionBar.html)选项卡 API 结合使用。

观察当前页面变化后，选择相应的选项卡。您可以在活动的方法中使用[ViewPager.OnPageChangeListener](http://developer.android.com/reference/android/support/v4/view/ViewPager.OnPageChangeListener.html)设置此行为`onCreate()`：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    ...
    mViewPager.setOnPageChangeListener(
            new ViewPager.SimpleOnPageChangeListener() {
                @Override
                public void onPageSelected(int position) {
                    // When swiping between pages, select the
                    // corresponding tab.
                    getActionBar().setSelectedNavigationItem(position);
                }
            });
    ...
} 
```

并在选择一个选项卡后，切换到[ViewPager](http://developer.android.com/reference/android/support/v4/view/ViewPager.html)中的相应页面。为此，请在使用以下方法创建选项卡时将[ActionBar.TabListener添加到您的选项卡：](http://developer.android.com/reference/android/app/ActionBar.TabListener.html)`newTab()`

```
actionBar.newTab()
        ...
        .setTabListener(new ActionBar.TabListener() {
            public void onTabSelected(ActionBar.Tab tab,
                    FragmentTransaction ft) {
                // When the tab is selected, switch to the
                // corresponding page in the ViewPager.
                mViewPager.setCurrentItem(tab.getPosition());
            }
            ...
        })); 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-11-14T17:15:18.603

如果您的目标是 Android 3.0 以下的 API，则不能使用上述 Roman 的解决方案。

如果有人感兴趣，我在这里写了[一篇](http://www.buzzingandroid.com/2012/11/tab-swipe-between-fragments-using-actionbarsherlock/ "使用 ActionBarSherlock 在片段之间滑动标签")关于如何使用 ActionBarSherlock 完成同样事情的博客文章。

# android - 使用 SeekBar 在 android 中控制音量？

> ID：10134338
> 
> 赞同：41
> 
> 时间：2012-04-13T01:58:31.847
> 
> 标签：android, volume, seekbar, android-audiomanager

如何在不通过 Android 设备上的音量按钮控制音量的情况下使用搜索栏准确更改应用的音量？我在我的 android 上的音量键上有单独的功能，这就是为什么我想使用搜索栏来控制音量。谁能帮帮我吗？

* * *

## 回答 #1

> 赞同：102
> 
> 时间：2012-04-13T02:34:38.180

请看下面的代码。它解决了你的问题。

```
import android.app.Activity;
import android.content.Context;
import android.media.AudioManager;
import android.os.Bundle;
import android.widget.SeekBar;
import android.widget.SeekBar.OnSeekBarChangeListener;

public class TestExample extends Activity 
{
    /** Called when the activity is first created. */

    private SeekBar volumeSeekbar = null;
    private AudioManager audioManager = null; 

    @Override
    public void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        setVolumeControlStream(AudioManager.STREAM_MUSIC);
        setContentView(R.layout.main);
        initControls();
    }

    private void initControls()
    {
        try
        {
            volumeSeekbar = (SeekBar)findViewById(R.id.seekBar1);
            audioManager = (AudioManager) getSystemService(Context.AUDIO_SERVICE);
            volumeSeekbar.setMax(audioManager
                    .getStreamMaxVolume(AudioManager.STREAM_MUSIC));
            volumeSeekbar.setProgress(audioManager
                    .getStreamVolume(AudioManager.STREAM_MUSIC));   

            volumeSeekbar.setOnSeekBarChangeListener(new OnSeekBarChangeListener() 
            {
                @Override
                public void onStopTrackingTouch(SeekBar arg0) 
                {
                }

                @Override
                public void onStartTrackingTouch(SeekBar arg0) 
                {
                }

                @Override
                public void onProgressChanged(SeekBar arg0, int progress, boolean arg2) 
                {
                    audioManager.setStreamVolume(AudioManager.STREAM_MUSIC,
                            progress, 0);
                }
            });
        }
        catch (Exception e) 
        {
            e.printStackTrace();
        }
    } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-13T02:18:58.647

这是`View`我用来调节音量的习惯。它通过向上滑动手指来工作，但您可以轻松更改它。

**滑块视图**

```
public class SliderView extends View implements OnGestureListener, OnTouchListener {

private int mHeight = 0;

private int mMaxValue = 16;
private float mDelta = 0;
private int mColor = Color.WHITE;
private GestureDetector mGestureDetector;

private OnValueChangeListener mListener;

public SliderView(Context context) {
    super(context);
    init(context);
}

public SliderView(Context context, AttributeSet attrs) {
    super(context, attrs);
    init(context);
}

public SliderView(Context context, AttributeSet attrs, int defStyle) {
    super(context, attrs, defStyle);
    init(context);
}

@Override
public boolean onDown(MotionEvent e) {
    mDelta = 0;
    return false;
}

@Override
public boolean onFling(MotionEvent e1, MotionEvent e2, float velocityX, float velocityY) {
    return false;
}

@Override
public void onLongPress(MotionEvent e) {
    mDelta = 0;
}

@Override
public boolean onScroll(MotionEvent event1, MotionEvent event2, float distanceX, float distanceY) {

    if (mDelta >= 1 || mDelta <= -1) {
        if (mListener != null) {
            mListener.onValueChanged((int) mDelta);
        }
        mDelta = 0;
    } else {
        mDelta += mMaxValue * distanceY / mHeight * 2;
    }
    return false;
}

@Override
public void onShowPress(MotionEvent e) {

}

@Override
public boolean onSingleTapUp(MotionEvent e) {
    return false;
}

@Override
public void onSizeChanged(int w, int h, int oldw, int oldh) {
    mHeight = getHeight();
}

@Override
public boolean onTouch(View v, MotionEvent event) {

    int action = event.getAction();
    if (action == MotionEvent.ACTION_DOWN) {
        v.setBackgroundColor(Color.argb(0x33, Color.red(mColor), Color.green(mColor),
                Color.blue(mColor)));
    } else if (action == MotionEvent.ACTION_UP || action == MotionEvent.ACTION_CANCEL) {
        v.setBackgroundColor(Color.TRANSPARENT);
    }
    mGestureDetector.onTouchEvent(event);
    return true;
}

public void setColor(int color) {
    mColor = color;
}

public void setMax(int max) {
    mMaxValue = max;
}

public void setOnValueChangeListener(OnValueChangeListener listener) {
    mListener = listener;
}

private void init(Context context) {
    setOnTouchListener(this);
    mGestureDetector = new GestureDetector(context, this);
    mHeight = getHeight();
}

public interface OnValueChangeListener {

    void onValueChanged(int value);
    }

} 
```

**使用它**- 确保您实施`OnValueChangeListener`.

```
SliderView mSlider;
mSlider= (SliderView) findViewById(id);
mSlider.setOnValueChangeListener(this);
mSlider.setMax(mAudioManager.getStreamMaxVolume(AudioManager.STREAM_MUSIC)); 
```

这不完全是你所要求的，但我认为它肯定会帮助你。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-12-09T13:51:34.563

**@CommonsWare在**[https://github.com/commonsguy/cw-omnibus/tree/master/SystemServices/Volume](https://github.com/commonsguy/cw-omnibus/tree/master/SystemServices/Volume)中这样做，并使用 SeekBar 设置五种类型的音量

**处理五种不同类型的卷**

```
/***
  Copyright (c) 2008-2012 CommonsWare, LLC
  Licensed under the Apache License, Version 2.0 (the "License"); you may not
  use this file except in compliance with the License. You may obtain a copy
  of the License at http://www.apache.org/licenses/LICENSE-2.0\. Unless required
  by applicable law or agreed to in writing, software distributed under the
  License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS
  OF ANY KIND, either express or implied. See the License for the specific
  language governing permissions and limitations under the License.

  From _The Busy Coder's Guide to Android Development_
    http://commonsware.com/Android
*/

package com.commonsware.android.syssvc.volume;

import android.app.Activity;
import android.content.Context;
import android.media.AudioManager;
import android.os.Bundle;
import android.widget.SeekBar;

public class Volumizer extends Activity {
  SeekBar alarm=null;
  SeekBar music=null;
  SeekBar ring=null;
  SeekBar system=null;
  SeekBar voice=null;
  AudioManager mgr=null;

  @Override
  public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    mgr=(AudioManager)getSystemService(Context.AUDIO_SERVICE);

    alarm=(SeekBar)findViewById(R.id.alarm);
    music=(SeekBar)findViewById(R.id.music);
    ring=(SeekBar)findViewById(R.id.ring);
    system=(SeekBar)findViewById(R.id.system);
    voice=(SeekBar)findViewById(R.id.voice);

    initBar(alarm, AudioManager.STREAM_ALARM);
    initBar(music, AudioManager.STREAM_MUSIC);//for Volume this is neccessary
    initBar(ring, AudioManager.STREAM_RING);
    initBar(system, AudioManager.STREAM_SYSTEM);
    initBar(voice, AudioManager.STREAM_VOICE_CALL);
  }

  private void initBar(SeekBar bar, final int stream) {
    bar.setMax(mgr.getStreamMaxVolume(stream));
    bar.setProgress(mgr.getStreamVolume(stream));

    bar.setOnSeekBarChangeListener(new SeekBar.OnSeekBarChangeListener() {
      public void onProgressChanged(SeekBar bar, int progress,
                                    boolean fromUser) {
        mgr.setStreamVolume(stream, progress,
                            AudioManager.FLAG_PLAY_SOUND);
      }

      public void onStartTrackingTouch(SeekBar bar) {
        // no-op
      }

      public void onStopTrackingTouch(SeekBar bar) {
        // no-op
      }
    });
  }
} 
```

并且仅用于控制音量仅使用
`music=(SeekBar)findViewById(R.id.music);`和 `initBar(music, AudioManager.STREAM_MUSIC);`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-05-02T08:15:39.213

```
private AudioManager audioManager;
private SeekBar seekBarSound;
@Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        seekBarSound = findViewById(R.id.seekbar_sound);
        try {
        setVolumeControlStream(AudioManager.STREAM_MUSIC);
        audioManager = (AudioManager) getSystemService(Context.AUDIO_SERVICE);

        seekBarSound.setMax(audioManager.getStreamMaxVolume(AudioManager.STREAM_MUSIC));
        seekBarSound.setProgress(audioManager.getStreamVolume(AudioManager.STREAM_MUSIC));
        seekBarSound.setOnSeekBarChangeListener(new SeekBar.OnSeekBarChangeListener() {
            @Override
            public void onProgressChanged(SeekBar seekBar, int i, boolean b) {
                audioManager.setStreamVolume(AudioManager.STREAM_MUSIC, i, 0);
            }

            @Override
            public void onStartTrackingTouch(SeekBar seekBar) {

            }

            @Override
            public void onStopTrackingTouch(SeekBar seekBar) {

            }
        });
    } catch (Exception e) {
        e.printStackTrace();
    }
 } 
```

**与音量键同步：**

```
@Override
public boolean onKeyDown(int keyCode, KeyEvent event) {
    if (keyCode == KeyEvent.KEYCODE_VOLUME_UP){
        seekBarSound.setProgress((seekBarSound.getProgress()+1>seekBarSound.getMax())?seekBarSound.getMax():seekBarSound.getProgress()+1);
    }else if (keyCode==KeyEvent.KEYCODE_VOLUME_DOWN){
        seekBarSound.setProgress((seekBarSound.getProgress()-1<0)?0:seekBarSound.getProgress()-1);
    }

    return super.onKeyDown(keyCode, event);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-03-30T23:32:23.020

我为你添加了一些清晰的注释，这样你就会明白每一行的逻辑祝你好运！

```
MediaPlayer mediaPlayer;
AudioManager audioManager;
//start the video when clicked.
public void pButton(View view){
    mediaPlayer.start();
}
//pause the audio when clicked.
public void pause(View view){
    mediaPlayer.pause();
}

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    //definning the audio manager as an audio service.
    audioManager = (AudioManager) getSystemService(AUDIO_SERVICE);
    //setting an integer with the value of the max volume of every device.
    int maxVolume= audioManager.getStreamMaxVolume(audioManager.STREAM_MUSIC);
    //getting the current volume.
    int currentVol = audioManager.getStreamVolume(audioManager.STREAM_MUSIC);
    //setting the audio at the app setup so we wont nned to write this line in every method.
    mediaPlayer = MediaPlayer.create(this,R.raw.allofme);

     SeekBar volumeC = (SeekBar) findViewById(R.id.volSeekBar);
          //setting the limit of the seek bar from its default 100 to the device max.
          volumeC.setMax(maxVolume);
          //setting the current value int to match with the seek bar.
          volumeC.setProgress(currentVol);
         //setting a listener to check the seekbar stats at all changes.
    volumeC.setOnSeekBarChangeListener(new SeekBar.OnSeekBarChangeListener() {
        @Override
    public void onProgressChanged(SeekBar seekBar, int progress, boolean fromUser) {
            Log.i("Seek Bar change:", Integer.toString(progress));
            /*setting the audio manager to stream music with the value of the current integer
            from the seek bar*/
            audioManager.setStreamVolume(audioManager.STREAM_MUSIC ,progress ,0);
        }

        @Override
        public void onStartTrackingTouch(SeekBar seekBar) {

        }

        @Override
        public void onStopTrackingTouch(SeekBar seekBar) {

        }
    });

} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-01-28T19:41:30.833

初始化时我遇到音量设置为 0 的问题

我通过使用下面的代码解决了问题

```
volumeManager.setOnSeekBarChangeListener(new SeekBar.OnSeekBarChangeListener() {
            @Override
            public void onProgressChanged(SeekBar seekBar, int i, boolean b) {
                if(b){
                    mAudioManager.setStreamVolume(AudioManager.STREAM_MUSIC, i, 0);
                }
            }

            @Override
            public void onStartTrackingTouch(SeekBar seekBar) {

            }

            @Override
            public void onStopTrackingTouch(SeekBar seekBar) {

            }
        }); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-01-29T19:19:38.623

**带有更改百分比文本的音量搜索栏 (100 % )**

创建一个java类并粘贴以下所有代码

```
public class Volume_Dialog extends AppCompatDialogFragment {
private ImageView cross;
private TextView volume_no;
private SeekBar seekBar;
AudioManager audioManager;

@SuppressLint("SetTextI18n")
@NonNull
@Override
public Dialog onCreateDialog(@Nullable Bundle savedInstanceState) {
    AlertDialog.Builder builder = new AlertDialog.Builder(getActivity());
    LayoutInflater inflater = getActivity().getLayoutInflater();
    View view = inflater.inflate(R.layout.volume_popup, null);
    builder.setView(view);
    getActivity().setVolumeControlStream(AudioManager.STREAM_MUSIC);
    cross = view.findViewById(R.id.volume_cross);
    volume_no = view.findViewById(R.id.volume_number);
    seekBar = view.findViewById(R.id.volume_seekbar);
    audioManager = (AudioManager) getContext().getSystemService(Context.AUDIO_SERVICE);
    seekBar.setMax(audioManager.getStreamMaxVolume(AudioManager.STREAM_MUSIC));
    seekBar.setProgress(audioManager.getStreamVolume(AudioManager.STREAM_MUSIC));
    int mediavolume = audioManager.getStreamVolume(AudioManager.STREAM_MUSIC);
    int maxVol = audioManager.getStreamMaxVolume(AudioManager.STREAM_MUSIC);
    double volPerc = Math.ceil((((double) mediavolume / (double) maxVol) * (double) 100));
    volume_no.setText(volPerc+" %");
    seekBar.setOnSeekBarChangeListener(new SeekBar.OnSeekBarChangeListener() {
        @Override
        public void onProgressChanged(SeekBar seekBar, int progress, boolean fromUser) {
            audioManager.setStreamVolume(AudioManager.STREAM_MUSIC, progress, 0);
            int mediavolume = audioManager.getStreamVolume(AudioManager.STREAM_MUSIC);
            int maxVol = audioManager.getStreamMaxVolume(AudioManager.STREAM_MUSIC);
            double volPerc = Math.ceil((((double) mediavolume / (double) maxVol) * (double) 100));
            volume_no.setText(volPerc+" %");
        }

        @Override
        public void onStartTrackingTouch(SeekBar seekBar) {

        }

        @Override
        public void onStopTrackingTouch(SeekBar seekBar) {

        }
    });

    cross.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View v) {
            dismiss();
        }
    });
    return builder.create();
}} 
```

现在在任何 onclick 方法中调用 MainActivity 中的这个 java 类。就是这样

```
Volume_Dialog volume_dialog = new Volume_Dialog();
                volume_dialog.show(getSupportFragmentManager(), "popup dialog"); 
```

# jquery - 如果您删除（）带有 jquery 的 img 标签，浏览器是否仍会尝试检索它？

> ID：10134343
> 
> 赞同：0
> 
> 时间：2012-04-13T01:59:45.780
> 
> 标签：jquery, browser

如果 img src 指向一个不存在的文件，那会阻止缓存中的 404 吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T02:17:27.860

当您的任何 javascript 运行以从 DOM 中删除图像时，图像标签已经被解析并且加载图像 URL 的请求至少已经排队并且可能已经发送。

如果在删除图像标签时尚未完成，浏览器是否足够智能以中止图像加载，这将是特定于浏览器的行为。它甚至可能已经完成。

您应该意识到，在 DOM 被解析之前，javascript 无法修改 DOM。这意味着在您有机会使用 javascript 修改它们之前，已经设置了图像标签之类的东西。这只是浏览器设计的事实或限制。

如果您控制 HTML 并且有时想要在该位置使用不同的图像，那么最好不要将图像标记放在 HTML 中。当您的代码运行并确定它想要哪个图像时，它可以创建适当的图像标签并将其插入 DOM。然后，浏览器不会花任何时间加载您不想要的图像。

如果您不关心是否加载了额外的图像，并且只是想在设置正确的图像之前确保它不会显示错误的图像，那么将图像标记标记为`display: none`or`visibility: hidden`直到您确定正确的 img URL就位，然后您可以使其可见。CSS 在标签被解析之前被处理，所以它在标签被创建时被应用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T02:13:03.363

为什么不测试一下？

这是一个小提琴：http: [//jsfiddle.net/atFtS/](http://jsfiddle.net/atFtS/)和来源：

```
<img src="http://www.asdfghjkl.com/qwerty.png" style="display:none" />​ 
```

打开您的浏览器检查器（我使用的是 Chrome），转到网络选项卡，看看会发生什么。

它确实尝试加载图像，即使它不会被渲染。

这是另一个小提琴： http: [//jsfiddle.net/atFtS/1/](http://jsfiddle.net/atFtS/1/)我在其中添加：

```
$('img').remove();​ 
```

它仍然加载图像并且可能缓存了 404 命中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T02:05:03.230

可能不是。在所有元素都准备好之后，Javascript 在文档加载时运行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-13T02:18:00.760

1.  我不确定你在问什么，但你会`img`在 dom 中加载，浏览器会获取它，即使它的`display:none`. （不确定每个浏览器，但它是在幻灯片中缓存图像的方式）

2.  此外，一旦你将它加载到你的 dom 上，无论你删除它，它都会在你的缓存中。

# android - 读取联系人列表时出现异常

> ID：10134346
> 
> 赞同：0
> 
> 时间：2012-04-13T02:00:06.183
> 
> 标签：android, android-contacts

大家好，我在准备联系人列表时遇到以下异常。

```
04-13 13:51:15.210: E/AndroidRuntime(7343): java.lang.IllegalStateException: get field slot from row 0 col -1 failed 
```

这是我的 getContact 函数

```
 public static ContactList getContactList(Context context){
    ContactList contactList = new ContactList(RequestStatus.CONTACT_LIST);
    Cursor people =     context.getContentResolver().query(ContactsContract.Contacts.CONTENT_URI,
            null, null, null, null);
    while(people.moveToNext()) {
       int nameFieldColumnIndex = people.getColumnIndex(PhoneLookup.DISPLAY_NAME);
       String contact = people.getString(nameFieldColumnIndex);
       int numberFieldColumnIndex = people.getColumnIndex(PhoneLookup.NUMBER);
       String number = people.getString(numberFieldColumnIndex);  
       contactList.addContact(new Contact(contact,number));
    }
    people.close();
    return contactList;
} 
```

在下一行引发异常。

```
String number = people.getString(numberFieldColumnIndex); 
```

有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T02:10:50.830

您需要先移动到第一列，以确保光标位于有效索引上：

```
if (people.moveToFirst()) {
    do {
       int nameFieldColumnIndex = people.getColumnIndex(PhoneLookup.DISPLAY_NAME);
       String contact = people.getString(nameFieldColumnIndex);
       int numberFieldColumnIndex = people.getColumnIndex(PhoneLookup.NUMBER);
       String number = people.getString(numberFieldColumnIndex);  
       contactList.addContact(new Contact(contact,number));
    }while(people.moveToNext());
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T02:11:22.000

您可以使用以下方法获取联系人列表：

```
private ContactList getDetails(){
    ContactList contactList = new ContactList(RequestStatus.CONTACT_LIST);
    Uri uri = contactsContract.CommonDataKinds.Phone.CONTENT_URI;
    ContentResolver cr = getContentResolver();
    Cursor cur = cr.query(ContactsContract.Contacts.CONTENT_URI,null, null, null, null);
    String[] projection    = new String[] {ContactsContract.CommonDataKinds.Phone.DISPLAY_NAME, ContactsContract.CommonDataKinds.Phone.NUMBER };
    Cursor names = getContentResolver().query(uri, projection, null, null, null);

    int indexName = names.getColumnIndex(ContactsContract.CommonDataKinds.Phone.DISPLAY_NAME);
    int indexNumber = names.getColumnIndex(ContactsContract.CommonDataKinds.Phone.NUMBER);
    names.moveToFirst();
    do {
        String name   = names.getString(indexName);
        Log.e("Name new:", name);
        String number = names.getString(indexNumber);
        Log.e("Number new:","::"+number);
        contactList.addContact(new Contact(name,number));
    } while (names.moveToNext());
    return contactList;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T02:12:39.237

我可以告诉你异常。这只是关于我没有转动您需要的行。您请求无效列

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-31T01:23:30.803

采用

```
public static void getContactNumbers(Context context) {
    String contactNumber = null;
    int contactNumberType = Phone.TYPE_MOBILE;
    String nameOfContact = null;
    if (ApplicationConstants.phoneContacts.size() <= 0) {
        ContentResolver cr = context.getContentResolver();
        Cursor cur = cr.query(ContactsContract.Contacts.CONTENT_URI, null,
                null, null, null);
        if (cur.getCount() > 0) {
            while (cur.moveToNext()) {
                String id = cur.getString(cur
                        .getColumnIndex(BaseColumns._ID));
                nameOfContact = cur
                        .getString(cur
                                .getColumnIndex(ContactsContract.Contacts.DISPLAY_NAME));

                if (Integer
                        .parseInt(cur.getString(cur
                                .getColumnIndex(ContactsContract.Contacts.HAS_PHONE_NUMBER))) > 0) {
                    Cursor phones = cr
                            .query(ContactsContract.CommonDataKinds.Phone.CONTENT_URI,
                                    null,
                                    ContactsContract.CommonDataKinds.Phone.CONTACT_ID
                                            + " = ?", new String[] { id },
                                    null);

                    while (phones.moveToNext()) {
                        contactNumber = phones.getString(phones
                                .getColumnIndex(Phone.NUMBER));
                        contactNumberType = phones.getInt(phones
                                .getColumnIndex(Phone.TYPE));
                        Log.i(TAG, "...Contact Name ...." + nameOfContact
                                + "...contact Number..." + contactNumber);

                    }
                    phones.close();
                }

            }
        }// end of contact name cursor
        cur.close();

    }
} 
```

当我遇到同样的问题时，这对我有什么帮助

[在这里找到](https://stackoverflow.com/questions/6107056/getting-all-phone-book-contact-details-into-an-array-in-android/6107324#6107324)

# javascript - 将 XML 名称值对动态转换为对象属性

> ID：10134347
> 
> 赞同：0
> 
> 时间：2012-04-13T02:00:47.750
> 
> 标签：javascript, xml, parsing, dynamic

**如何动态地将属性添加到 Javascript 对象/类？**

我正在解析一个 xml 文件，对于 xml 元素中的每个名称值对，我试图将该对作为属性添加到 Javascript 对象。为了清楚起见，请参阅我的示例：

```
function MyObject(nType)
{
    this.type = nType;
}

MyObject.prototype.parseXMLNode( /*XML Node*/ nodeXML )
{
   var attribs = nodeXML.attributes;
   for (var i=0; i<attribs.length; i++)
      this.(attribs[i].nodeName) = attribs[i].nodeValue;   // ERROR here
}

// Where the xml would look like
<myobject name="blah" width="100" height="100"/> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T02:17:25.550

你很亲密。要在对象上动态调用和分配属性，您需要使用括号表示法。

例如：

```
person = {}
person['first_name'] = 'John'
person['last_name'] = 'Doe'

// You can now access the values using:
// person.first_name OR person['last_name'] 
```

以下内容应该适合您：

```
MyObject.prototype.parseXMLNode( nodeXML ) {
    var attrs = nodeXML.attributes,
        length = attrs.length;

    for(var i=0; i < length; i++) {
        this[attrs[i].nodeName] = attrs[i].nodeValue;
    }
} 
```

# java - 访问自定义库时出现 NoSuchMetodError 异常

> ID：10134357
> 
> 赞同：3
> 
> 时间：2012-04-13T02:02:20.363
> 
> 标签：java, exception, nosuchmethoderror, java-compiler-api, jsr199

我有一个关于 java.lang.NoSuchMethodError 的问题。这个程序是关于编译器 API (JSR 199)。当我为此创建原型时，它运行工作，但是当我尝试使其成为库时，它会抛出 NoSuchMethodError 异常。

**这是第一个原型：**

```
public class DynaCompTest {

    public static void main(String[] args) {
        String fullName = "HelloWorld";

        StringBuilder sourceCode = new StringBuilder();
        sourceCode.append("public class HelloWorld {\n")
            .append("\tpublic static void main(String[] args) {\n")
            .append("\t\tSystem.out.println(\"Hello World\")\n")
            .append("\t}\n")
            .append("}");

        JavaCompiler compiler = ToolProvider.getSystemJavaCompiler();
        JavaFileManager fileManager = new ClassFileManager(compiler.getStandardFileManager(null, null, null));

        DiagnosticCollector<JavaFileObject> diagnostics = new DiagnosticCollector<>();
        List<JavaFileObject> jFiles = new ArrayList<>();
        jFiles.add(new CharSequenceJavaFileObject(fullName, sourceCode));

        compiler.getTask(null, fileManager, diagnostics, null, null, jFiles).call();

        for (Diagnostic diagnostic : diagnostics.getDiagnostics()) {
            System.out.format("Error on line %d in %s\n", diagnostic.getLineNumber(), diagnostic);
        }
    }
}

public class CharSequenceJavaFileObject extends SimpleJavaFileObject {

    private CharSequence content;

    public CharSequenceJavaFileObject(String className, CharSequence content) {
        super(URI.create("string:///" + className.replace('.', '/') + Kind.SOURCE.extension), Kind.SOURCE);
        this.content = content;
    }

    @Override
    public CharSequence getCharContent(boolean ignoreEncodingErrors) {
        return content;
    }

}

public class ClassFileManager extends ForwardingJavaFileManager {

    private JavaClassObject jClassObject;

    public ClassFileManager(StandardJavaFileManager standardManager) {
        super(standardManager);
    }

    @Override
    public ClassLoader getClassLoader(Location location) {
        return new SecureClassLoader() {
            @Override
            protected Class<?> findClass(String name) throws ClassNotFoundException {
                byte[] b = jClassObject.getBytes();
                return super.defineClass(name, jClassObject.getBytes(), 0, b.length);
            }
        };
    }

    @Override
    public JavaFileObject getJavaFileForOutput(Location location, String className, Kind kind, FileObject sibling) throws IOException {
        jClassObject = new JavaClassObject(className, kind);
        return jClassObject;
    }
}

public class JavaClassObject extends SimpleJavaFileObject {

    protected final ByteArrayOutputStream bos = new ByteArrayOutputStream();

    public JavaClassObject(String name, Kind kind) {
        super(URI.create("string:///" + name.replace('.', '/') + kind.extension), kind);
    }

    public byte[] getBytes() {
        return bos.toByteArray();
    }

    @Override
    public OutputStream openOutputStream() {
        return bos;
    }
} 
```

**我将 DynaCompTest 更改为库的 DynamicCompiler：**

```
public class DynamicCompiler {

    private JavaCompiler compiler;
    private JavaFileManager fileManager;
    private List<JavaFileObject> jFiles;
    private DiagnosticCollector<JavaFileObject> diagnostics;

    public DiagnosticCollector<JavaFileObject> getDiagnostics() {
        return diagnostics;
    }

    public DynamicCompiler(String className, StringBuilder sourceCode) {
        compiler = ToolProvider.getSystemJavaCompiler();
        fileManager = new ClassFileManager(compiler.getStandardFileManager(null, null, null));

        diagnostics = new DiagnosticCollector<>();
        jFiles = new ArrayList<>();
        jFiles.add(new CharSequenceJavaFileObject(className, sourceCode));
    }

    public boolean doCompilation() {
        return compiler.getTask(null, fileManager, diagnostics, null, null, jFiles).call();
    }
} 
```

**我创建了第二个原型来测试库：**

```
public class Compiler {

    private static StringBuilder sourceCode = new StringBuilder();

    public static void main(String[] args) {
        boolean status;
        sourceCode.append("public class HelloWorld {\n")
            .append("\tpublic static void main(String[] args) {\n")
            .append("\t\tSystem.out.println(\"Hello World\");\n")
            .append("\t}\n")
            .append("}");

        DynamicCompiler compiler = new DynamicCompiler("HelloWorld", sourceCode);

        status = compiler.doCompilation();

        StringBuilder messages = new StringBuilder();
        if (!status) {
            for (Diagnostic diagnostic : compiler.getDiagnostics().getDiagnostics()) {
                messages.append("Error on line ")
                    .append(diagnostic.getLineNumber())
                    .append(" in ")
                    .append(diagnostic)
                    .append("\n");
            }
        } else {
            messages.append("BUILD SUCCESSFUL ");
        }

        System.out.println(messages.toString());
    }
} 
```

当我用上面的代码进行测试时，它运行良好并打印`BUILD SUCCESSFUL`，但是当我试图让它出错时，例如我删除了`;`第一个原型一样的分号，它在访问`compiler.getDiagnostics().getDiagnostics()`循环内部时抛出 NoSuchMethodError 异常。

问题是，**为什么在第一个原型中它在尝试出错时运行良好，但当我尝试使用自己的库时它变成异常？**

**编辑**

这是堆栈跟踪：

```
/HelloWorld.java:3: error: ';' expected
    System.out.println("Hello World")
                                     ^
1 error
Exception in thread "main" java.lang.NoSuchMethodError: org.ert.lib.DynamicCompiler.getDiagnostics()Ljavax/tools/DiagnosticCollector;
at org.ert.exp.Compiler.main(Compiler.java:28)
Java Result: 1 
```

它应该是这样的：

```
Error on line 3 in /HelloWorld.java:3: error: ';' expected
    System.out.println("Hello World")
                                     ^ 
```

在尝试调试它时，它显示了一个错误：

```
public DiagnosticCollector<JavaFileObject> getDiagnostics() {
    return diagnostics; // Set Breakpoint here
} 
```

这是错误消息：

```
Not able to submit breakpoint LineBreakpoint DynamicCompiler.java : 25, reason: No executable location available at line 25 in class org.ert.lib.DynamicCompiler.
Invalid LineBreakpoint DynamicCompiler.java : 25 
```

**更新**

遇到问题了，如果我们添加整个项目而不是构建库的jar，就会出现这个问题。因此，当我构建库 jar 时，它可以工作。**但是任何人都可以解释为什么当我尝试添加整个项目而不是 jar 文件时会发生这种情况？**

## 笔记

我正在使用：

*   来自 Oracle 的 JDK 1.7
*   网豆 7.1.1

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T04:04:33.783

似乎您在两个不同的库（jar）中存在类似的类。例如

```
com.test.Example.class in a.jar
com.test.Example.class in b.jar 
```

现在类加载器将加载第一个 Example.class，看来您需要 b.jar 中的类。然后它不会抛出 NoMethodFound 等异常，而是抛出 NoSuchMethodFound 的异常，因为类仍然存在于内存中但找不到所需的方法。

此类问题可以通过更改库顺序来解决。您需要使所需库的顺序更高。你可以从日食中做到这一点

```
Project Setting -> Java Build Path -> Order and Export. 
```

希望这会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T10:13:08.693

在我尝试使用 Eclipse Indigo 之后，我发现它在添加项目或添加 jar 文件时有效。在 Netbeans 7.1.1 中，如果添加项目会出错，但如果添加 jar 文件则有效。

也许它是Netbeans的错误之一......

感谢您的关注...

# c++ - 使用两种方法覆盖 << 运算符

> ID：10134359
> 
> 赞同：2
> 
> 时间：2012-04-13T02:02:24.327
> 
> 标签：c++, operators, ostream, overriding

我必须编写这两种方法，以打印出其中包含的内容：

ex 是一个由 tokenType tk 组成的数组（对不起，试图节省空间并避免发布整个结构）

不幸的是，我收到一个编译错误，上面写着：error: no match for âoperator[]â in âex[i]â

我该如何解决这个问题，以便它将覆盖<<，以便第二种方法使用第一种？

```
ostream & operator<< ( ostream & os , const tokenType & tk)
{
    switch (tk.category)
    {
            case TKN_OPRAND:
            os << tk.operand;
            break;
            case TKN_OPRTOR:
            os << tk.symbol;
            break;              
    }
    return os;
}

ostream & operator<< ( ostream & os , const expression & ex)
{   
    tokenType tk;

    for (int i = 0; i < ex.numTokens; i++)
    {
        tk = ex[i];
        os << tk.operand << " ";  //problem line is this one
    }   
    return os;  
}

struct expression
{
    int numTokens ;
    tokenType tokens[MAX_TOKENS_IN_EXPRESSION] ;
    void print() const ;
    int  toPostfix( expression & pfx ) const ;
    int  evalPostfix( int & val ) ;
    expression() { numTokens = 0 ; } ;  // default constructor
} ; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T02:13:32.303

您非常接近 - 您忘记引用`tokens`数组，并尝试索引表达式本身。自然，编译器抱怨，因为你没有`[]`重载。

这应该有效：

```
for (int i = 0; i < ex.numTokens; i++)
{
    tk = ex.tokens[i]; // <<==== Here is the fix
    os << tk.operand << " ";
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T02:09:16.910

**补充详细信息后回答**

您需要从 ex.tokens 实际存储，因为存在类型不匹配。您需要执行以下操作

`tk = ex.tokens[i];`

**原始答案**

这似乎不是`operator<<`. 相反，您的类型`expression`似乎没有定义`operator[]`.

要了解如何重载`operator[]`，请查看[Overloading subscripting](http://publib.boulder.ibm.com/infocenter/comphelp/v8v101/index.jsp?topic=/com.ibm.xlcpp8a.doc/language/ref/cplr328.htm)

# iphone - 在不同的视图控制器中调用异步 asihttp

> ID：10134362
> 
> 赞同：0
> 
> 时间：2012-04-13T02:02:46.150
> 
> 标签：iphone

我尝试使用 UINavigationController 从一个视图控制器导航到另一个。在两个 viewController 中， viewWillAppear

我使用异步模式调用 asihttp。

但这总是会导致应用程序崩溃。

我尝试在wiewWillDisaaoear中使用asihttp '[request cancel]' 的功能，但错误依然存在

欢迎任何评论

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T04:09:10.640

我在我的应用程序中使用了以下代码，并且我也使用 UINavigationController 来回做了，但它没有给我任何崩溃。我建议你在这里展示你的代码，这样它会帮助你找到你的解决方案。

在这里，我向您展示我的代码..看看它是否对您有帮助。

```
-(void)viewWillAppear:(BOOL)animated
{

[self willAnimateRotationToInterfaceOrientation:self.interfaceOrientation  duration:1];   
NSURL *urlf = [NSURL URLWithString:@"Your url"];
ASIHTTPRequest *requestdiff = [[ASIHTTPRequest alloc]initWithURL:urlf];
[requestdiff setDelegate:self];
[requestdiff release];
[self willAnimateRotationToInterfaceOrientation:self.interfaceOrientation  duration:1];    
} 
```

# javascript - for() 中的最后一个循环？

> ID：10134368
> 
> 赞同：2
> 
> 时间：2012-04-13T02:03:54.653
> 
> 标签：javascript

我已经为此苦苦挣扎了一段时间：

```
for( var key in obj ){
    blah.blah()
    if(choice){
         doThis();
    }
} 
```

我怎样才能`doThis()`只在最后一个项目上打电话？由于我没有柜台，`i`我无法确定最后一项。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-13T02:08:29.520

首先，密钥没有任何保证的顺序。根据规范，键是无序的。如果你真的想用你得到的最后一个键做某事，你可以这样做；

```
var lastkey;
for( var key in obj ){
    lastkey = key;
    blah.blah()
}
if(choice){
    // use lastkey if you want
    doThis();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T02:18:04.997

鉴于 jfriend00 在他的回答中提到的密钥不是按保证顺序出现的警告，这里是最一般的增强转换：

*   任意 for 循环
*   任意while循环
*   一个任意的基于回调的迭代器，比如`[].forEach`

在循环块的核心，我们的变量`isLast`将是`true`最后一个，或者`false`不是：

```
var toDo = function(){};
forOrWhile(...) {
    toDo(false);
    toDo = function(isLast) {
        // blah.blah(); console.log('visited key '+key+' with value '+obj[key]+' where isLast='+isLast)
    };
}
toDo(true) 
```

（如果您需要捕获迭代器的值，则需要像往常一样在 javascript 中将其放入闭包中（Google for javascript for loopclosure）。如果它是一个数组，您将免费获得它，那么您可以使用`[].map(function(){...})`或`.forEach(function(){...})`，这就是框架的`foreach(object)`等价物有用的原因；它们通常还会使用[.hasOwnProperty](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Object/hasOwnProperty)过滤掉“原型垃圾” 。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T02:07:43.250

您提供的代码将被翻译为：

```
for( var key in obj ){
    blah.blah()
}
doThis(); 
```

如果这不起作用，请在您的问题中解释原因。

# c - 非规范（原始）模式下的异步串行通信并在 linux/osx 中生成 SIGIO

> ID：10134369
> 
> 赞同：0
> 
> 时间：2012-04-13T02:04:05.543
> 
> 标签：c, asynchronous, serial-port, signal-handling

首先，当数据准备好读取时，我无法让我的串行设备生成 SIGIO。

我正在尝试编写一个简单的串行接口，以使用 USB 到串行适配器与微型通信。我想让这个接口与你在微控制器中找到的接口相似（中断驱动，使用回调），所以我决定采用捕获 SIGIO 信号的方式，而不是使用单独的线程或恒定的非阻塞串行读。这是我的初始化代码（大部分在各种异步串行教程中看起来很熟悉）：

```
int mcs = TIOCM_RTS;
ttyDev = open(tty, O_RDWR | O_NOCTTY | O_NONBLOCK);

if (!ttyDev)
{
  printf("couldn't open serial device");
  return NULL;
}

//create signal handler
byteAction.sa_handler = byteCallback;
sigemptyset(&byteAction.sa_mask); //sa_mask = 0
byteAction.sa_flags = SA_RESTART;
sigaction(SIGPOLL, &byteAction, NULL);

//Allow process to detect SIGIO
fcntl(ttyDev, F_SETOWN, getpid());
fcntl(ttyDev, F_SETFL, FASYNC); //make async
fcntl(ttyDev, F_SETFL, FNDELAY);  //non blocking reads

tcgetattr(ttyDev, &oldtio); //backup current settings
newtio.c_cflag = getBaud(baudrate) | CS8 | CLOCAL | CREAD;
newtio.c_cflag &= ~CRTSCTS; //disable hw flow control
newtio.c_iflag &= ~(IXON | IXOFF | IXANY); //disable flow control
newtio.c_iflag |= IGNPAR; //ignore parity
newtio.c_oflag = 0;
newtio.c_lflag &= ~(ICANON | ECHO | ECHOE | ISIG); //raw mode
newtio.c_cc[VMIN] = 1; 
newtio.c_cc[VTIME] = 0;
cfsetspeed(&newtio, getBaud(baudrate));
tcflush(ttyDev, TCIFLUSH);
tcsetattr(ttyDev, TCSANOW, &newtio);

//clear RTS
ioctl(ttyDev, TIOCMBIC, &mcs); 
```

byteCallback 是我的信号处理程序。我已经通过手动向进程发送信号来验证它是否有效。我正在与之通信的 micro 不支持任何类型的流控制，因此被禁用。我已经验证我可以使用标准读/写系统调用从设备读取和写入。

问题是当数据进入时，信号处理程序不会被调用。我怀疑这是因为 SIGIO 仅在收到 CR 或行尾字符时生成。由于这完全是原始模式并且没有发送此类字符，因此不会生成 SIGIO。目前我只在 OSX 上尝试过，但理想情况下，相同的代码也可以在 linux 上运行。

任何帮助，将不胜感激。我已经搜索了很多，人们总是建议只使用 select() 或其他方法。这几乎成了一个挑战，我还没有准备好放弃。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T03:04:50.467

代的`SIGIO`绝对与CR/NL无关。您的问题是，在您设置`FASYNC`标志后，您立即清除了它：

```
fcntl(ttyDev, F_SETFL, FASYNC); //make async
fcntl(ttyDev, F_SETFL, FNDELAY);  //non blocking reads AND CLEAR FASYNC FLAG 
```

你应该做的是：

```
fcntl(ttyDev, F_SETFL, O_ASYNC|O_NONBLOCK); 
```

或者最好（避免清除可能已经设置的任何其他标志）：

```
fcntl(ttyDev, F_SETFL, O_ASYNC|O_NONBLOCK|fcntl(ttyDev, F_GETFL)); 
```

请注意，我还冒昧地将您使用的奇怪的非标准标志名称替换为相应的标准名称。:-)

# multithreading - 如何从 Sharepoint 2010 沙盒中的单独线程访问 SPSite 对象

> ID：10134370
> 
> 赞同：1
> 
> 时间：2012-04-13T02:04:05.680
> 
> 标签：multithreading, sharepoint, sandbox

我想要做的是创建一个在 Event Receiver 上启用的计时器`FeatureActivated`。我想使用此计时器每天执行一次以检查列表中的某些项目并更新项目的状态。

我可以创建并启用计时器 - 没问题。但是当我尝试访问 SPSite 对象以获取列表项时，我收到以下错误：

> 共享点子集 OM 已为当前线程禁用。

计时器在导致问题的单独线程中运行。

我的问题是：如何访问 SPSite 对象以从单独的线程访问列表项？

注意：我正在使用计时器，因为我无法在沙盒解决方案中使用计时器作业。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T20:28:44.227

恐怕您在后台运行任务的方法是不可能的。我可以确认您无法在异步委托中访问 SP OM 或在单独的线程上运行。我猜这是因为沙盒解决方案中的资源使用受到监控和限制。例如，您不得在未处理它们的情况下留下物品。

不仅不允许您`SPSite`使用`string`or创建对象`Guid`；您也不`(SPSite)properties.Feature.Parent`能将事件接收器中可用的对象传递给委托。（对象的所有属性都会抛出相同的异常。）

一般来说，我认为你的解决方案太脆弱了。在传统的解决方案中，您的代码将在`w3wp.exe`进程中运行，并且在激活您的功能后第一个应用程序池回收将终止计时器（整个应用程序域）。同样，在沙盒解决方案中，您将受到`SPUCWorkerProcess.exe`. 您需要一些能够每天可靠地执行您的代码的服务主机。

沙盒解决方案和/或 SharePoint Online 不提供后台运行服务的功能。您必须在其他地方运行您的代码，例如：

1.  如果允许您至少部署一个小型场解决方案，则可以将列表项更新代码部署为 SP 计时器作业。

2.  如果您有能力一直运行 Windows 机器，您可以使用 SP Client OM 编写列表项刷新代码，并将其安装为[Windows 服务（计时器循环）](https://stackoverflow.com/questions/503564/how-might-i-schedule-a-c-sharp-windows-service-to-perform-a-task-daily)或[Windows 计划任务（定时启动）](https://stackoverflow.com/questions/4249542/windows-scheduler-to-run-a-task-every-x-minutes)。（后者更简单。）

3.  如果您的解决方案应该在 SharePoint Online 中运行并且您不能依赖本地 Windows 计算机，您可以将其部署为[Microsoft Azure 中的托管服务（工作角色）](http://msdn.microsoft.com/en-us/library/gg432976.aspx)。

4.  您可以实现定期更新功能，以便在沙盒解决方案中按需运行 - 例如，作为 ASPX 页面。[然后，您将通过pingler](http://pingler.com/)或[webcron](http://www.webcron.org)等公共服务触发执行代码的资源的 URL 。

实际上，选项 1 - 3 可以按照与选项 4 相同的方式编写——根据调度程序的性质，在沙盒解决方案中定期执行的代码和触发代码（非常短且独立于 SP）分开——甚至可以使用由 cron 调度的 LWP 的 perl 脚本。

--- 费尔达

# javascript - 在backbone.js中使用jquerymobile对话框

> ID：10134371
> 
> 赞同：1
> 
> 时间：2012-04-13T02:04:05.947
> 
> 标签：javascript, jquery-mobile, backbone.js, requirejs

我需要在我的项目中添加一个模式对话框。所以情况是我渲染了一个登录页面。登录页面将包含两个输入文本字段和两个按钮（登录和连接）现在我需要的是，每当我单击连接（按钮）时，我需要显示一个模式对话框，该对话框将包含一个输入文本字段和一个先前输入的列表数据。这是我到目前为止所做的，但它不起作用。

```
connection.tpl.html 
<div id="connectionContainer" data-role="page" style="width:200px; height: 200px;">
<input id="serviceUrl" class="user-input"/> 
```

登录视图

```
var LoginView = Backbone.View.extend({
    events:{
    "click .login-btn" : "Login",
    "click .connection-btn" : "Connect"
    },

    initialize: function(){
    },

    Login: function(){
        Const.USERNAME = $("#username").val();
        Const.PASSWORD = $("#password").val();
        if(!Const.USERNAME || !Const.PASSWORD)
        {
            alert("Invalid Username/Password!");
            $("input").val("");
        }else{

            var auth = EncodeAuth(Const.USERNAME,Const.PASSWORD);

            var sendAuthorization = function (xhr) {
              xhr.setRequestHeader('Authorization', auth)
            };

            this.model.save(this.model, {
                beforeSend : sendAuthorization,
                success: function(model,result){
                    if(result.ErrorMessage === null)
                    {
                        alert(JSON.stringify(result.Message));
                        $("input").val("");
                    }
                    else
                    {
                        alert(JSON.stringify(result.ErrorMessage));
                        $("input").val("");
                    }
                },
                error: function(model,result){
                    alert("Remote server returned an error. Not Found");
                    $("input").val("");
                }
            });
        }
    },
    Connect:function(){
        this.connectionview = new ConnectionView({ el: $("#connectionContainer") });
        $("#wrapper").html( _.template( ConnectionTemplate ) );
    } 
```

# python - 获取以某些字母开头的名称列表

> ID：10134372
> 
> 赞同：5
> 
> 时间：2012-04-13T02:04:06.403
> 
> 标签：python, string, list, function

我需要实现一个函数，该函数将一个名称（字符串）列表作为参数，另一个参数将一个字符列表作为参数。该函数应打印出第一个列表中以第二个列表中的字母开头的名称。如果列表为空，则该函数不会打印任何内容。

这是函数调用的样子及其输出

```
>>> selectSome(["Emma", "Santana", "Cam", "Trevor", "Olivia", "Arthur"], ['A', 'B', 'C', 'D', 'E', 'F'])
Emma
Cam
Arthur
>>> selectSome(["Holly", "Bowel", "champ", 'Fun', 'Apu'], ['a', 'F', 'C'])
champ
Fun
Apu

>>> selectSome([], ['a', 'b', 'c'])

>>> selectSome(['Eva', 'Bob'], [])
>>> 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-13T02:07:47.677

这是您需要的要点：

```
>>> names = ['Alpha', 'Bravo', 'Charlie', 'Delta', 'Echo', 'Foxtrot']
>>> first_letters = ['A','B','C']
>>> output_names = [name for name in names if (name[0] in first_letters)]
>>> output_names
['Alpha', 'Bravo', 'Charlie'] 
```

我将把它作为一个函数包装给你。

测试你的理解：

1.  你如何使这个不区分大小写？
2.  你明白第 3 行是做什么的吗？（这叫做*列表推导。*）你能写出等价的`for`循环吗？

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-04-13T02:44:15.630

检查 Python 的“startswith”字符串方法的文档：http: [//docs.python.org/library/stdtypes.html#str.startswith](http://docs.python.org/library/stdtypes.html#str.startswith)

> **str.startswith(prefix[, start[, end]])** 如果字符串以前缀开头，则返回 True，否则返回 False。prefix 也可以是要查找的前缀元组。使用可选开始，测试从该位置开始的字符串。使用可选结束，停止在该位置比较字符串。
> 
> 在 2.5 版更改: 接受元组作为前缀。

# linux - 在支持大多数文件类型的 Ubuntu 上安装 ImageMagick

> ID：10134373
> 
> 赞同：1
> 
> 时间：2012-04-13T02:04:37.943
> 
> 标签：linux, ubuntu, imagemagick

我在 Ubuntu 服务器 10 上安装了 ImageMagick`apt-get install imagmagick`

但是当我执行时`identify filename`，我得到了一个错误

> 识别：没有此图像格式的解码委托`/tmp/upload/0a2ff9ddd4f0510f7b1ff5a30f975c10'@error/constitute.c/ReadImage/533。

我执行`identify -list format`，我没有在列表中看到 JPEG、PNG 这些常见格式。

此命令的完整列表

[http://notes.li/upload/im-format.txt](http://notes.li/upload/im-format.txt)

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T15:36:49.880

您是否正确安装了 libpng（例如 libpng12-0）和 libjpeg（libjpeg62）？您使用的是哪个 Ubuntu 版本？您使用的是哪个 imagemagick 版本？您确定您的文件 /tmp/upload/0a2ff9ddd4f0510f7b1ff5a30f975c10 是一个文件，应该识别哪个标识？

在您的 apt-get 命令中，软件包名称中缺少一个“e”。

# actionscript-3 - Flex drop 元素太大时

> ID：10134375
> 
> 赞同：0
> 
> 时间：2012-04-13T02:04:43.713
> 
> 标签：actionscript-3, apache-flex, layout, mobile

在 Flex Mobile 中，我在操作栏中有几个按钮。在屏幕非常小的设备（例如 HTC Wildfire）上，并非所有按钮都可以显示。有没有办法告诉 Flex 在元素不合适时隐藏它？我知道可以通过使用状态并测试屏幕的宽度，但我希望有另一种方法..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T04:39:08.103

您可以检查[ApplicationDPI](http://help.adobe.com/en_US/flex/mobileapps/WS19f279b149e7481c682e5a9412cf5976c17-8000.html)值；并在更高分辨率上隐藏明确的内容。大多数平板电脑提供 160dpi；而大多数手机提供240dpi。iPhone 4 提供 320dpi 屏幕。我不确定 iPad Retina Display 屏幕。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T03:44:51.837

这是一个*非常简单*的Spark 布局类，它水平布置对象，丢弃任何不适合的项目。

```
package
{
    import mx.core.ILayoutElement;

    import spark.layouts.supportClasses.LayoutBase;

    public class DroppableHorizontalLayout extends LayoutBase
    {
        private static const PADDING:Number = 5;

        public function DroppableHorizontalLayout()
        {
            super();
        }

        override public function updateDisplayList(width:Number, height:Number):void
        {
//          super.updateDisplayList(width,height); // super method doesn't do anything
            var currentXCoordinate:Number = 0;
            var numKids:int = target.numChildren;
            for (var i:int=0; i < numKids; i++)
            {
                var currentItem:ILayoutElement = target.getElementAt(i);
                var itemWidth:Number = currentItem.getPreferredBoundsWidth();
                if (currentXCoordinate + itemWidth < width)
                {
                    currentItem.setLayoutBoundsSize(itemWidth, currentItem.getPreferredBoundsHeight());
                    currentItem.setLayoutBoundsPosition(currentXCoordinate, 0); // or whatever the Y coordinate should be
                    currentXCoordinate = currentXCoordinate + itemWidth + PADDING;
                }
                else
                {
                    break; // no reason to keep iterating, nothing else will fit...
                }
            }
        }
    }
} 
```

编写具有典型 Flex 布局类的所有功能的布局并非易事。但是你当然可以像上面那样做简单的事情，迭代子对象，设置它们的大小/位置，在这种情况下，不用费心渲染不适合的东西。

# ruby-on-rails - globalize3 配置 I18n.locale 变量

> ID：10134380
> 
> 赞同：1
> 
> 时间：2012-04-13T02:05:25.760
> 
> 标签：ruby-on-rails, globalize3

看看我的模型和我的迁移

我只有一个属性来测试 globalize3 gem

```
class Car < ActiveRecord::Base
   attr_accessible :name
   translates :name
end 
```

我的迁移如下所示

```
class CreateCars < ActiveRecord::Migration
  def up
    create_table :cars do |t|
      t.timestamps
    end
    Car.create_translation_table! :name => :string
  end

  def down
    Car.drop_translation_table!
    drop_table :cars
  end
end 
```

在尝试使用属性名称保存新车详细信息时出现以下错误

**ActiveModel::MassAssignmentSecurity::Error: Can't mass-assign protected attributes: locale**

我想我缺少一些用于 globalize3 的声明/配置来访问 I18n.locale 变量。

顺便说一句，我正在使用 rails 3.2.3 和 ruby​​ 1.9.3p125

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-13T10:15:00.437

[刚刚通过关注此问题](https://github.com/globalize/globalize/issues/128)找到了解决我的问题的方法

```
class Car < ActiveRecord::Base
  attr_accessible :name
  translates :name
  class Translation
    attr_accessible :locale
  end
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-13T11:17:59.587

这不应该是这样的：

```
class Car < ActiveRecord::Base
  attr_accessible :name, :translations_attributes
  translates :name
end 
```

看：

[Rails 3.2.3：如何批量分配关联模型？](https://stackoverflow.com/questions/10147198/rails-3-2-3-how-to-mass-assign-associated-models)

# php - 从精灵生成 HTML 背景

> ID：10134383
> 
> 赞同：-1
> 
> 时间：2012-04-13T02:05:42.397
> 
> 标签：php, html, image, css-sprites

我有一个精灵表，我想从中创建背景，但我想从表的不同部分随机生成它。我不想每次都生成一个全尺寸的图像，因为我不想为每个会话存储一个，有人可以帮助我吗？

我希望它可以用 PHP 来完成，但我没有设置它。任何线索都非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T02:20:45.820

问题是获取精灵图像的“部分”并将它们分层。仅出于这个原因，我什至不想考虑 CSS 背景图像，而是将所有内容分层放在 htm5 画布或 svg 或其他东西上。我想你可以事先分离精灵，生成数据 uri 变体（Mime 编码）并以这种方式将其包含到你的样式表中（然后对于现代浏览器来说这件事实际上变得微不足道，因为你可以根据需要分层任意数量的背景图像，一直CSS...嗯，除了随机定位位。你必须通过 php 或 javascript 来完成。

# python - Python - 将外部变量设置为用户输入的函数作为副作用

> ID：10134385
> 
> 赞同：1
> 
> 时间：2012-04-13T02:05:48.080
> 
> 标签：python, python-3.x, user-input

我是一名休闲游戏玩家和业余程序员，懂一点 Python。我正在尝试制作一个简单的文本冒险游戏引擎，因此我需要从玩家那里获得原始输入。

这是 Python 3.2.2，所以我的行是这样的：

```
var = input("What do you want to do? ").lower() 
```

那行有效，但我不想输入整行，而是想将它变成一个函数（类似于“getinput（）”）。根据我对 input() 和函数的阅读，我正在寻找一个不返回任何内容但将另一个变量的状态（此处为“var”）更改为“副作用”的函数。

我确实有一个不带参数的工作函数“halt()”：

```
def halt():
    input("(Press Enter to continue...) ")
    print("") 
```

调用“halt()”会给出提示，等待 Enter，然后打印一个空行并继续，这是我的意图。

我试图开始工作的功能如下所示：

```
def getinput(x):
    x = input("What do you want to do? ").lower()
    print("") 
```

定义 getinput(x) 后：

```
var = ""
getinput(var)
print(var) 
```

该片段不打印用户的输入，我很困惑为什么。我需要做什么才能以预期的方式完成这项工作？

我试图用函数做的事情是不可能的，还是我对范围一无所知？我应该参加[codereview](https://codereview.stackexchange.com/ "代码审查")吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-13T02:11:56.067

你是对的，这个问题是关于范围的。此行中的 x：

```
x = input("What do you want to do? ").lower() 
```

不会更改传递给它的值 - 它会在函数的本地范围内创建一个新变量（也称为 x）。

正确的方法是：

```
def getinput():
    return input("What do you want to do? ").lower()

x = getinput()
print(x) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T02:27:47.143

注意：如果您要使用 3.x 之前的任何 Python 版本，请务必考虑使用 raw_input() 函数，因为普通的 input() 函数只接受来自用户的 SYNTACTICALLY VALID 输入，否则会引发 SyntaxError。

我不确定你到底想做什么，但我已经改变了你上面写的内容，这样它就可以工作了。这是我建议尝试的方法：

首先是函数 getinput()...

```
def getinput():
    x = raw_input("What do you want to do? ").lower() #prompts for the value of x
    print "" #prints a blank line
    return x 
```

然后第二部分...

```
var = getinput()
print(var) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-13T02:41:31.983

当您将某些内容传递给 Python 函数时，通常不可能修改它，除非它是可变的。这将您限制为 Python 类型的一小部分，例如列表或字典。

```
def getinput(x):
    x[0] = input("What do you want to do? ").lower()
    print("")

var = [""]
getinput(var)
print(var[0]) 
```

你最好让函数返回一个值。这就是 Python 的工作方式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-13T02:17:54.483

`var`是一个 python 字符串变量，它通过值传递给您的`getinput`函数，这意味着您的`getinput`函数仅修改名称“x”的本地副本，而不是调用范围内的“x”指向的值。

同样在 Python 中，字符串是不可变的，因此由于[字符串实习](http://en.wikipedia.org/wiki/String_interning)/[散列 consing](http://en.wikipedia.org/wiki/Hash_consing) ，不可能就地修改字符串的底层值- 您只需创建一个新字符串。你真的应该返回你的价值：

```
x = getinput() 
```

但是，如果您仍想坚持现有的设计，您可以通过将其包装在列表或其他引用类型中来通过引用传递此字符串变量：

```
def getinput(li):
    li.append(input("What do you want to do? ").lower())
    print("") 
```

用法：

```
x = []
getinput(x)
print x[0] 
```

# node.js - 用于通过 SSH 开发 node.js 的良好 Windows 7 IDE

> ID：10134396
> 
> 赞同：4
> 
> 时间：2012-04-13T02:08:43.743
> 
> 标签：node.js, windows-7, ide

刚开始学习 linux，我有一台运行 Ubuntu 11.10 的 Amazon EC2 服务器。我正在尝试学习 node.js 并启动并运行一个简单的游戏服务器。我的家用机器是 Windows 7，所以我使用 PuTTy 通过 SSH 连接到我的 EC2 服务器。我想知道你们会推荐什么IDE？

*   我非常喜欢 NetBeans，这是我首选的 php IDE，但没有 node.js 项目类型，也很少通过插件支持。
*   我不是 Eclipse 的忠实粉丝，因为它看起来比它需要的复杂得多 - 但如果这是最好的我会使用它 - 目前我有 Eclipse for PHP Developers (Helios) 和 Indigo - 哪个最好？版本真的重要吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T03:29:56.087

Intellij IDEA 总是值得一看。这是我个人的最爱。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T03:50:10.783

我喜欢[Sublime Text 2](http://www.sublimetext.com/2)。它有很多很棒的 Javascript 插件（JSLint 是必须的），我发现当我只是想完成工作时它不会妨碍我。它也是多平台的，因此您可以在所有机器上拥有一致的编辑环境。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-13T03:33:56.417

WebStorm 是 InteliJ 的一个配对版本，它只专注于 Javascript 而不是 Java，经历了十几个 IDE 和文本编辑器，直到我遇到它 - 与 Node 服务器集成以启用断点、调试等。个人版本只需 49 美元.

[http://www.jetbrains.com/webstorm/](http://www.jetbrains.com/webstorm/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-03T12:14:01.697

您可以尝试 Microsoft WebMatrix 一种来自 Microsoft 的工具。您可以找到更多详细信息@http [://www.microsoft.com/web/webmatrix/](http://www.microsoft.com/web/webmatrix/)

# c# - 将文本拖放到 RadEditor

> ID：10134403
> 
> 赞同：1
> 
> 时间：2012-04-13T02:09:49.733
> 
> 标签：c#, asp.net, templates, telerik

例如，我需要创建一个由文本组成的面板

```
MY PANEL

    Drag any of the items below into the editor:

    CUSTOMER
    BUSINESS_PHONE
    BUSINESS_ADDRESS 
```

因此，当将其拖入编辑器时，它将按以下方式添加

```
This is an example of how [[CUSTOMER]] has improved his business. 
You may contact them directly by dialing [[BUSINESS_PHONE]]. 
```

它就像创建一个模板。我只是不确定用什么来完成这项工作。我们正在使用 RadEditor。任何建议将不胜感激，请注意我们无法更改编辑器，因为我们在许多地方使用该解决方案，如果有任何必须与编辑器集成。

非常感谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T13:39:21.357

我已经完成了与您尝试实现的类似的操作，您必须向 radEditor 的该实例添加一些代码，特别是在 OnClientLoad 函数中添加一些 Javascript 以捕获放置事件，然后适当地处理数据。棘手的部分是保持光标定位，因为一旦 HTML 被删除，您就必须解析它。

如果可能的话，我真的建议使用插入按钮和可以从中选择的列表/对象，单击按钮并将其插入光标处，这更容易实现。

然而，这里的代码没有解析我如何将 drop 事件附加到编辑器，我使用 RadPanelBar 进行拖放。这甚至会随着任何拖放到编辑器中而触发，我还建议使用某种标记，例如`<span class="dragableItem">BusinessPhone</span>`在解析内容时可以查找的标记。

如果您可以简单地制作您的列表 [[BusinessPhone]] 并将其拖放到其中，那显然是最简单的解决方案，尽管并不优雅。

```
function OnClientLoad(editor)
{

    var element = document.all ? editor.get_document().body : editor.get_document();
    //var eventHandler  = document.all ? "drop" : "dragdrop";
    var eventHandler = "drop";
    $telerik.addExternalHandler(element, eventHandler, function(e) {
        setTimeout(function() {
            contentDropped(editor);
        }, 300);
    });
//....
}

function contentDropped(editor)
{
    var content = editor.get_html();
    //parse the content of the editor  
    editor.set_html(content);
} 
```

# javascript - Backbone.js Router 动态第一个参数

> ID：10134405
> 
> 赞同：0
> 
> 时间：2012-04-13T02:09:52.567
> 
> 标签：javascript, node.js, backbone.js, router

我目前有一个有几个常规页面的路由对象，并且还想添加一个顶级路由，其中​​第一个参数是用户名。

```
routes : {
  '/'        : 'main',
  '/login'   : 'login',
  '/about'   : 'about',
  '/create'  : 'create',
  '/:username': 'getUser' //something like this
  '*actions' : 'defaultHandler'
} 
```

1.  我将如何实现这一目标？
2.  添加用户名路由同时在没有找到页面或用户时回退操作是否是糟糕的设计？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T02:49:02.773

如果我理解正确，你就在那里。只需添加`username`作为`getUser`函数的参数：

```
getUser: function(username) { /* do stuff */ } 
```

但是，有一个问题，因为您的最后两条路线都可以匹配几乎任何东西。为了识别用户，您可以使用前缀来区分用户路由与最终 splat 匹配的所有内容。像这样的东西就足够了：

```
routes : {
  // ...
  '/users/:username': 'getUser'
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T02:52:45.217

当您有一个名为“about”或“create”的用户时会发生什么？命名您的路线并避免问题：

```
routes : {
  '/'          : 'main',
  '/a/login'   : 'login', // "a" for "application"
  '/a/about'   : 'about',
  '/a/create'  : 'create',
  '/a/*actions': 'defaultHandler',
  '/:username' : 'getUser'
} 
```

然后你只需要确保没有人有“a”作为用户名。如果您添加更多路线，这种方法还可以保护您免受未来冲突的影响。

# c# - 为什么在 asp.net MVC 控制器中需要显式的 Dispose() 方法？谁能解释它的复杂性？（特定于asp.net）

> ID：10134406
> 
> 赞同：32
> 
> 时间：2012-04-13T02:10:05.123
> 
> 标签：c#, asp.net-mvc, entity-framework, garbage-collection, idisposable

我知道 C# 可以通过其垃圾收集器很好地管理资源。但既然它有，那么它到底是为了什么，为什么需要它？

谁能解释为什么`.Dispose()`在 asp.net mvc 中需要？

另外，Dispose 连接是什么意思？为什么需要它？任何人都知道为什么像 in 那样处理数据库连接很重要的复杂性`db.Dispose()`？这是与 EF 相关还是与 SQL Server 相关？我试图确切地理解为什么。

```
protected override void Dispose(bool disposing)
{
   db.Dispose();
   base.Dispose(disposing);
} 
```

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-04-13T02:17:46.613

`Dispose`用于释放“非托管”资源（例如，套接字、文件句柄、位图句柄等），并且如果它在终结器之外被调用（这就是`disposing`标志所表示的，顺便说一句），用于处置它持有的其他 IDisposable 对象更有用。

“非托管”资源不由 CLR 管理（因此得名），GC 不会弄乱它们或自行释放它们；如果没有`Dispose`方法（以及实际使用它的代码！），它将依赖对象的终结器来清理。最终终结器将运行（如果应用程序运行良好，并且对象*具有*终结器），并且如果终结器完成了它的工作，那么一切都很好......但是这样做会花时间 - 如果你与此同时，手柄用完了，哦，好吧。对于其他线程/进程/任何需要它们的东西来说太糟糕了。

但是，如果您`Dispose`，资源会立即释放，并且周围的情况会更好。

（顺便说一下，这不限于 EF、SQL Server 或任何其他技术。Disposable 模式在整个 .net 框架中都可以找到，并且当您拥有不再存在的 IDisposable 时，利用它被认为是一种很好的做法用过的。）

As for why `IDisposable` is implemented so far up the tree, rather than you just implementing it on a case by case basis...i'm not 100% sure. But imagine you were writing a framework. Consider that if everything weren't an IDisposable, you'd have to check -- every time you wanted to get rid of something! -- whether the object is disposable, and `Dispose` it if so. If you instead implement IDisposable "just in case", though, things are simplified -- you just always dispose. (If an object doesn't have anything to clean up, it just doesn't override `Dispose` -- in which case its parent's `Dispose`被调用并执行它必须做的任何清理工作，这可能也没什么......）而且对于控制器来说，清理东西是很常见的，即使这不是真正的原因，它也很有意义无论如何要做。

# javascript - 按 Enter 提交 jQuery 论坛

> ID：10134410
> 
> 赞同：2
> 
> 时间：2012-04-13T02:10:42.973
> 
> 标签：javascript, jquery, html, webforms

我的表格有一个不寻常的问题（这里是精简版）：

```
<script>
    (function($){
        $("form").submit(function(){ 
            alert('Checkout time!'); 
        });
        $("button[name='process_order']").click(function(){ 
            alert('Button Checkout time!'); 
        });
        $("button[name='back']").click(function(){ 
            alert('Back Button'); 
        });
    })(jQuery);
</script>

<form>
    <input type="text" name="moo1" tabindex="1" />
    <input type="text" name="moo2" tabindex="2" />
    <button name="back" tabindex="4">Back</button>
    <button name="process_order" tabindex="3">Process Order</button>
</form> 
```

这些按钮工作正常，但是，如果我在其中一个具有焦点的文本框时按 Enter 键，则会触发“后退按钮”动作......即使表单的提交处理程序设置为“结帐”......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T02:18:20.120

您可能可以将 process_order 更改为：

`<input type="submit" name="process_order" value="Process Order" tabindex="3" />`

并更改为：

`<form id="myForm">`

然后，将 .submit() 处理程序绑定到它

```
$('#myForm').submit(function()
{
    alert('Button checkout time!');
    return false; //we return false so that it doesn't refresh the page
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T02:21:02.227

您的表单有两个提交按钮，表单将通过激活第一个提交按钮使用回车键提交。改变

```
<button name="back" tabindex="4">Back</button> 
```

到

```
<button type="button" name="back" tabindex="4">Back</button> 
```

避免浏览器将第一个按钮解释为提交按钮

# c - C语言，如何将“XXX.h”中的文件包含到 "，也许使用 Makefile？

> ID：10134413
> 
> 赞同：-2
> 
> 时间：2012-04-13T02:11:40.187
> 
> 标签：c, header, include, makefile

> **可能重复：**
> [#include <文件名> 和#include “文件名”有什么区别？](https://stackoverflow.com/questions/21593/what-is-the-difference-between-include-filename-and-include-filename)

我刚刚参与了一个项目。

当我在跟踪项目代码时，我发现

有些人可以通过这种方式包含头文件：

包括 <XXX.h>

XXX.h 是一个不在系统库中的头文件，由我们自己的程序员制作...

我的问题是如何使用 '<' 和 '>' 而不是 double " ？

以及如何通过这种方式在其他目录中包含标题？

例如：

标题/header_a.h 标题/header_b.h

我可以使用包含 < header_a.h > 和 < header_b.h >...

我应该使用 Makefile 来实现这个吗？谢谢..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T02:14:32.707

双引号中的文件是相对于当前目录引用的：

```
#include "../file.h" // file from parent directory 
```

您通常会将其用于您自己的标题。

尖括号中的文件相对于编译器指定的路径被引用：

```
#include <sys/bits.h> // file under, e.g.,  /usr/include
#include <thirdpartytools/somelib.h> // file under /path/to/third/party/includes 
```

您通常会将其用于系统头文件或第三方头文件，假设编译器是用类似的东西调用的

```
gcc -I/usr/include -I/path/to/third/party/includes ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T02:14:58.923

<> 通常表示系统头文件，而“”通常表示当前目录中的头文件（通常是您的头文件）。源/参考此处获取更多信息： [在 C++ 中包含头文件时尖括号 < > 和双引号“”之间的区别？](https://stackoverflow.com/questions/3162030/difference-between-angle-bracket-and-double-quotes-while-including-heade)

# jquery - 从整个文档中获取 .index() 位置？

> ID：10134416
> 
> 赞同：3
> 
> 时间：2012-04-13T02:12:08.830
> 
> 标签：jquery

目前我有

```
alert('Index: ' + $(this).index()); 
```

在单击事件上，它会提醒元素当前位置，但仅在其父元素内，对吗？我如何使用 .index() 从整个文档中找到位置？

谢谢，

史蒂夫，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T02:17:20.807

我相信您可以致电：

```
$('*').index($(this)); 
```

或查看它是哪个（例如，'img'）...

```
$('img').index($(this)); 
```

# java - Android 为蓝牙 RSSI 返回“null”

> ID：10134417
> 
> 赞同：0
> 
> 时间：2012-04-13T02:12:14.727
> 
> 标签：java, android, eclipse

我正在使用 Eclipse 开发一个 android 应用程序来返回蓝牙设备的 RSSI 值。我已经修改了 Android 蓝牙聊天示例以满足我的需要，但是我在返回 RSSI 值时遇到了问题。点击`scan`按钮以发现附近的设备后，它返回设备名称、设备地址，并且还假设返回 RSSI 值，但它`null`显示的是 RSSI。

```
if (device.getBondState() != BluetoothDevice.BOND_BONDED) {
                mNewDevicesArrayAdapter.add(device.getName() + "\n" + device.getAddress() + getRssi());

    private final BroadcastReceiver mReceiver = new BroadcastReceiver() {
    @Override
    public void onReceive(Context context, Intent intent) {
        String action = intent.getAction();
        // When discovery finds a device
        if (BluetoothDevice.ACTION_FOUND.equals(action)) {
            // Get the BluetoothDevice object from the Intent
            BluetoothDevice device = intent.getParcelableExtra(BluetoothDevice.EXTRA_DEVICE);
           // Get the Bluetooth RSSI
            short Rssi = intent.getShortExtra(BluetoothDevice.EXTRA_RSSI,Short.MIN_VALUE);
            // If it's already paired, skip it, because it's been listed already
            // Added getRssi()
            if (device.getBondState() != BluetoothDevice.BOND_BONDED) {
                mNewDevicesArrayAdapter.add(device.getName() + "\n" + device.getAddress() + getRssi());
            }
        // When discovery is finished, change the Activity title
        } else if (BluetoothAdapter.ACTION_DISCOVERY_FINISHED.equals(action)) {
            setProgressBarIndeterminateVisibility(false);
            setTitle(R.string.select_device);
            if (mNewDevicesArrayAdapter.getCount() == 0) {
                String noDevices = getResources().getText(R.string.none_found).toString();
                mNewDevicesArrayAdapter.add(noDevices);
            }
        }
    }
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T17:20:26.783

我自己没有尝试过，但也许这个 SO 答案会有所帮助：

[https://stackoverflow.com/a/2361630/831918](https://stackoverflow.com/a/2361630/831918)

据说可以使用NDK。祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T13:43:57.390

这就是我获得 RSSI 的方式

> String deviceRSSI = (intent.getExtras()).get(BluetoothDevice.EXTRA_RSSI).toString();

```
private final BroadcastReceiver ActionFoundReceiver = new BroadcastReceiver() {

        @Override
        public void onReceive(Context context, Intent intent) {
            // TODO Auto-generated method stub
            String action = intent.getAction();
            if (BluetoothDevice.ACTION_FOUND.equals(action)) {
                BluetoothDevice device = intent.getParcelableExtra(BluetoothDevice.EXTRA_DEVICE);
                String deviceRSSI = (intent.getExtras()).get(BluetoothDevice.EXTRA_RSSI).toString();

                btArrayAdapter.add(device.getName() + "\n" + device.getAddress() + "\n" + deviceRSSI);
                btArrayAdapter.notifyDataSetChanged();
            }

            if (action.equals(BluetoothAdapter.ACTION_DISCOVERY_STARTED)) {

            } else if (action.equals(BluetoothAdapter.ACTION_DISCOVERY_FINISHED)) {

            }
        }
    }; 
```

# sql - 在绑定到数据库的列表框中插入/删除项目

> ID：10134420
> 
> 赞同：0
> 
> 时间：2012-04-13T02:12:47.660
> 
> 标签：sql, wpf, sorting, binding

我希望能够通过单击向上和向下箭头按钮重新排序绑定到我的 sql ce 数据库的列表框。由于我的列表框是使用实体框架直接从我的数据库中填充的，因此如果我想将项目向上移动，我认为我必须删除该对象（从列表框中）并重新插入它（在上面的行中）。

我没有视图模型，我的列表框直接从我的数据库中的代码中填充，如下所示：

```
listBoxProperties.ItemsSource = entities.Properties.ToList(); 
```

我的问题有意义吗？

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T07:18:04.800

通常，您将在视图模型中处理列表项的移动，该视图模型将保存控件绑定到的 ObservableCollection - 然后这将通过绑定反映在您的控件中。
尝试直接在控件上完成此操作会变得混乱 - 这是您绑定到 EF 属性列表的一次性副本以来的唯一方法。
随着您的 UI 开发的继续，您只会遇到更多这样的问题。我强烈建议尽早建立视图模型。

# c++ - boost::bind 与重载函数？

> ID：10134424
> 
> 赞同：2
> 
> 时间：2012-04-13T02:13:34.963
> 
> 标签：c++, boost

我有两个具有以下签名的重载成员函数：

```
class MyClass
{
    void f(int, int, int);
    void f(int, int, int, double);
}; 
```

我正在使用 boost::bind 如下：

```
boost::bind(&MyClass::f, _1, 1, 2, 3); // _1 is a placeholder for the implicit parameter 
```

我的问题实际上是没有问题。根据 boost::bind 文档（在[http://www.boost.org/doc/libs/1_49_0/libs/bind/bind.html#err_overloaded](http://www.boost.org/doc/libs/1_49_0/libs/bind/bind.html#err_overloaded)）这应该“通常”导致错误，我应该需要强制转换为函数指针类型。但是我的代码编译没有错误，并且似乎按预期运行。

文档中给出的示例是重载函数的唯一区别是一个是 const 而另一个不是。因此，我的猜测是我没有问题，因为编译器可以分辨出两个重载函数之间的区别，因为参数的数量（和类型）不同，而在文档的示例中没有办法编译器通过传递给 boost::bind 的参数来告诉你想要哪个版本。另一方面，我对我的猜测持怀疑态度，因为我质疑编译器如何知道在我的示例中传递给 boost::bind 的最后 3 个参数链接到第一个参数中的函数指针（因此构成其签名的一部分) - 在我看来，这是提升的内部问题::

我在谷歌搜索这个问题时找不到的文档和任何其他建议都没有说明只有具有相同参数类型的重载函数存在问题。因此，如果有人能确认我的猜测是正确的（并且暗示，为什么我的怀疑是错误的），我将不胜感激，在我开始依赖我的代码之前（可能是错误的）假设它是有效的。我担心的是编译器只是根据我不打算的推理来选择要绑定的函数，例如选择它遇到的第一个函数。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T02:22:41.640

如果只有一个选择在语义上是正确的，那么你很好（就像你的例子一样）。如果有更多，不要猜测它会选择什么，选择它（就像在 boost 的例子中一样）。
由于 bind 与 c++ 中的所有其他内容一样，是强类型的，因此编译器不能只缩小函数或其他内容，因此不会像在示例中选择第一个那样做出不可能的选择。

# network-programming - 关于 telnet 的 TRANSMIT-BINARY 选项

> ID：10134428
> 
> 赞同：0
> 
> 时间：2012-04-13T02:13:59.180
> 
> 标签：network-programming, network-protocols, telnet

我现在正在编写一个 telnet 代理，它在客户端和 telnet 服务器之间转发消息，并将禁止来自客户端的一些指令。我对 telnet 中的转换模式感到困惑。如果服务器和客户端都同意 TRANSMIT-BINARY 选项，那么当客户端想向服务器发送一个 255 的字符时，它会发送什么？发送 255 255 是为了逃脱？如果是这样，那么当客户端想向服务器发送一个telnet命令时，它会发送什么？就像往常一样发送255 xx（即IAC动词选项）？谢谢你的帮助！

# c# - 无法在 OnNavigatedTo 方法之外访问 QueryString 的值

> ID：10134434
> 
> 赞同：2
> 
> 时间：2012-04-13T02:14:59.873
> 
> 标签：c#, windows-phone-7, c#-4.0

对于以下代码：

```
public string matchid;

protected override void OnNavigatedTo(System.Windows.Navigation.NavigationEventArgs e)
    {
        matchid = null;
        base.OnNavigatedTo(e);
        if (NavigationContext.QueryString.TryGetValue("matchid", out matchid))
        {
            MessageBox.Show(matchid);     //statement1           
        }
     }

 public void display()
 {
    MessageBox.Show(matchid);    //statement2
 } 
```

我正在获取 statement1 的输出，而它正在为 statement2 抛出 ArgumentNullException。变量“matchid”是为这两个函数全局定义的，但它不保留 display() 的值。

有什么方法可以在 display() 中获取 matchid 的值？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T11:54:21.090

一旦`matchid`在 OnNavigated 中设置了全局变量，它将保持设置状态，之后您应该能够在您`PhoneApplicationPage`的类中的任何实例方法中使用它。你需要研究的事情是：

1.  您是否`matchid`在调用之前分配回 null `display`，因此使用为 null 且不能与 MessageBox 一起使用的 matchid，或者，
2.  `display`在 OnNavigatedTo 中分配 matchid 后是否调用？

您应该指定有关*调用*的信息`display`。

顺便说一句，您可以在 OnNavigatedTo 之外访问 NavigationContext。您不需要将其值存储在全局变量中。

# excel - matlab使用activex接口自动保存excel文件

> ID：10134435
> 
> 赞同：4
> 
> 时间：2012-04-13T02:15:06.717
> 
> 标签：excel, matlab, activex

我在matlab中有一个代码。运行程序后，创建了一个文件“example2.xlsx”。

现在我有下面的代码，我希望 matlab 用新的 'example2.xlsx' 替换当前的 'example2.xlsx' （自动保存而不询问我是否要替换它）：

```
e = actxserver ('Excel.Application'); % # open Activex server
filename = fullfile(pwd,'example2.xlsx'); % # full path required
ewb = e.Workbooks.Open(filename); % # open the file
esh = ewb.ActiveSheet;

str = num2str(num_rows+1);
esh.Range(strcat('J',str)).Interior.Color = clr;

sheet1 = e.Worksheets.get('Item', 'Sheet1');
range1 = get(sheet1,'Range', strcat('A',str),strcat('I',str));
range1.Value = values{num_rows+1};

[num, txt, raw] = xlsread('example2.xlsx');
num_rows = length(num(:,1));

xlWorkbookDefault = 51; % # it's the Excel constant, not sure how to pass it other way
ewb.SaveAs(fullfile(pwd,'example2'), xlWorkbookDefault)
ewb.Close(false)
e.Quit
e.delete 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-13T03:26:54.727

您可以将 Excel 应用程序对象的 DisplayAlerts 属性设置为 false 以阻止这些对话框出现。

以下是您的代码的简化版本：

```
e = actxserver ('Excel.Application'); % # open Activex server
filename = fullfile(pwd,'example2.xlsx'); % # full path required
ewb = e.Workbooks.Open(filename); % # open the file
esh = ewb.ActiveSheet;

sheet1 = e.Worksheets.get('Item', 'Sheet1');
range1 = get(sheet1,'Range', 'A1');
range1.Value = 3;

set(e, 'DisplayAlerts', 0); % # Stop dialog!

xlWorkbookDefault = 51; % # it's the Excel constant, not sure how to pass it other way
ewb.SaveAs(fullfile(pwd,'example2'), xlWorkbookDefault)
ewb.Close(false)
e.Quit
e.delete 
```

# php - 在 foreach 循环结束时删除“，”

> ID：10134436
> 
> 赞同：-1
> 
> 时间：2012-04-13T02:15:34.563
> 
> 标签：php, wordpress, loops, foreach

我创建了一个循环来列出一组元值。我已经能够将一个类应用于列表中的最后一项，但我想删除最后一个值末尾的“，”。任何帮助将非常感激。

```
<?php $count = count($subcategory); $num = 0; ?>
    <?php foreach ($subcategory as $subcategory): ?>
        <p 
            <?php if($num == $count-1){ ?> 
                class="subcategory-item subcategory-last-item inline-block" 
            <?php } ?> 

            class="inline-block subcategory-item"> <?php echo $subcategory;?>,</p>
    <?php $num++ ?>
<?php endforeach; ?> 
```

我可能会因为担心在最后一项中添加一个类而采取了错误的路线。如果我可以从最后一项中删除“，”，我会很高兴。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T02:24:38.253

这是一个快速重写，可能会引导您找到解决方案：

```
<?php $count = count($subcategories); $num = 0; ?>
<?php $classes = 'inline-block subcategory-item'; ?>
<?php foreach ($subcategories as $subcategory): ?>
    <p class="<?=$classes.($num==$count-1?' subcategory-last-item':'')?>">
        <?php echo $subcategory;?>
        <?php if ($num<$count-1): ?>
            ,
        <?php endif; ?>
    </p>
    <?php $num++ ?>
<?php endforeach; ?> 
```

# android - 为列表视图中的项目设置背景

> ID：10134438
> 
> 赞同：1
> 
> 时间：2012-04-13T02:15:52.383
> 
> 标签：android, listview

我正在使用 android 中的列表视图。我想为列表视图中的每个项目设置背景颜色。

如果我使用 setbackgroudcolor 函数，它会显示不正确的颜色。似乎有应用程序背景和新颜色的混合颜色。如果我使用 setbackgroundresource fund，它会显示 ok。但是，当我单击一个项目时，颜色不会改变。

我需要为列表视图中的每个项目设置背景，当单击一个项目时，背景会更改为其他颜色或背景

我的代码：OnView

```
 // Set background
    RelativeLayout root = (RelativeLayout) vi.findViewById(R.id.p60001_layout_info);
    if (position % 2 == 0){
        root.setBackgroundResource(R.drawable.cell_g_02);
        //root.setBackgroundColor(R.color.color_fist_in_pack_view);
    }else{
        root.setBackgroundResource(R.drawable.cell_g_01);
        //root.setBackgroundColor(R.color.color_fist_in_pack_view);
    } 
```

行布局：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/p60001_layout_info"
android:layout_width="match_parent"
android:layout_height="30dp">

<TextView
    android:id="@+id/p60001_item_info"
    android:layout_width="wrap_content"
    android:layout_height="30dp"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true"
    android:textSize="15dp" android:layout_marginLeft="10dp" android:fadeScrollbars="false" android:textColor="@color/txt_normal" android:scrollHorizontally="true" android:gravity="center_vertical">
</TextView>

<ImageView
    android:id="@+id/icon"
    android:layout_width="22px"
    android:layout_height="30dp"
    android:layout_alignParentRight="true"
    android:layout_centerVertical="true"
    android:src="@drawable/arrow" android:layout_marginRight="15dp"/>

<ImageView
    android:id="@+id/p60001_image_notice_num"
    android:layout_width="wrap_content"
    android:layout_height="25dp"
    android:layout_alignParentTop="true"
    android:layout_marginRight="30dp"
    android:layout_toLeftOf="@+id/icon"
    android:layout_marginTop="5dp" android:src="@drawable/fukidashi" android:visibility="invisible" android:clickable="false" android:focusable="false" android:focusableInTouchMode="false" android:longClickable="false"/>

<TextView
    android:id="@+id/p60001_item_notices"
    android:layout_width="10dp"
    android:layout_height="wrap_content"
    android:layout_alignParentTop="true"
    android:layout_toLeftOf="@+id/icon"
    android:ems="10" android:layout_marginRight="40dp" android:background="@android:color/transparent" android:freezesText="false" android:focusableInTouchMode="false" android:focusable="false" android:clickable="false" android:selectAllOnFocus="false" android:textSize="20px" android:layout_marginTop="4dp" android:visibility="invisible">

    <requestFocus />
</TextView>

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T02:19:16.643

如果您使用的是自定义适配器概念，并且上面是您的 getView 代码。

您必须转换视图（每行的 xml 文件）更改它的背景，如下所示。

```
if (position % 2 == 0){
    converterView.setBackgroundResource(R.drawable.cell_g_02);
    //root.setBackgroundColor(R.color.color_fist_in_pack_view);
}else{
    converterView.setBackgroundResource(R.drawable.cell_g_01);
    //root.setBackgroundColor(R.color.color_fist_in_pack_view);
} 
```

如果您需要更改焦点或按下的颜色，请使用以下 xml 作为背景。

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:state_pressed="true" 
        android:drawable="@color/red" />
    <item android:state_selected="true" 
        android:drawable="@color/red" />
</selector> 
```

如果需要为点击的项目设置背景，那么一种方法是::::

在您存储每个项目的数据的 pojo(bean) 中有一个 bool 变量（=false）。因此，当您单击项目时，请将该变量设置为 true。在 getView() 中，只需检查该变量是真还是假，并相应地完成需求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T05:16:48.237

尝试这个

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <!-- When selected, use selected state color -->
    <item android:drawable="@drawable/your_drawable_when_selected"
          android:state_selected="true" />
    <!-- When not selected, use default item color-->
    <item android:drawable="@drawable/your_drawable_when_unselected" />
</selector> 
```

# sql-server - 如何使用 t-sql 选择表中一列的最大值和重复项之一

> ID：10134439
> 
> 赞同：1
> 
> 时间：2012-04-13T02:16:45.910
> 
> 标签：sql-server, tsql, select, subquery, repeat

我有一个表格，其中包含测试对具有不同合意性的不同样本执行的一些数据（P1 优于 S1，S1 优于 S3，S3 优于 S2），有时这些测试中的任何一个都可以重复。如果测试失败，则必须有人重新进行测试。

我希望我的查询仅显示最佳样本（P1>S1>S3>S2）并且仅显示重复数据（而不是原始数据）。

以下查询有效，但您可以看到它相当长且复杂。我仍然是初级 SQL 人员，所以我怎样才能用更短/更好的查询来完成同样的事情？

我正在努力学习更好的 SQL，所以我不必总是问这些类型的问题，所以解释为什么你的查询效果更好会非常有帮助！

```
 DECLARE @TempTable TABLE (Sample_ID varchar(10), TestRepeat int, TestResult varchar(1))
   --  In the end, ONLY the samples with Y should be displayed
   INSERT INTO @TempTable VALUES('61-0001-P1', 0, 'R') -- 1  Y
   INSERT INTO @TempTable VALUES('61-0002-P1', 0, 'R') -- 2  Y
   INSERT INTO @TempTable VALUES('61-0003-S1', 0, 'S') -- 3  Y
   INSERT INTO @TempTable VALUES('61-0004-S1', 0, 'R') -- 4  Y
   INSERT INTO @TempTable VALUES('61-0005-P1', 0, 'I') -- 5 
   INSERT INTO @TempTable VALUES('61-0005-P1', 1, 'S') -- 6  Y
   INSERT INTO @TempTable VALUES('61-0006-P1', 0, 'S') -- 7  Y
   INSERT INTO @TempTable VALUES('61-0006-S3', 0, 'R') -- 8
   INSERT INTO @TempTable VALUES('61-0007-P1', 0, 'S') -- 9  Y
   INSERT INTO @TempTable VALUES('61-0008-S3', 0, 'I') -- 10
   INSERT INTO @TempTable VALUES('61-0008-S3', 1, 'R') -- 11 Y
   INSERT INTO @TempTable VALUES('61-0009-P1', 0, 'R') -- 12 Y
   INSERT INTO @TempTable VALUES('61-0009-S1', 0, 'S') -- 13
   INSERT INTO @TempTable VALUES('61-0010-P1', 0, 'S') -- 14 Y
   INSERT INTO @TempTable VALUES('61-0011-S3', 0, 'S') -- 15 Y

   DECLARE @TempTable1 TABLE (Subject_ID varchar(7), Sample_ID varchar(10), SampleOrder int, TestRepeat int, TestResult varchar(1))

   INSERT @TempTable1
   SELECT  LEFT(Sample_ID,7) AS Subject_ID, 
     Sample_ID,
     SampleOrder = 
       CASE 
         WHEN RIGHT(Sample_ID,2) = 'P1' THEN 4
         WHEN RIGHT(Sample_ID,2) = 'S1' THEN 3
         WHEN RIGHT(Sample_ID,2) = 'S3' THEN 2
         WHEN RIGHT(Sample_ID,2) = 'S2' THEN 1
       END, 
     TestRepeat, 
     TestResult
   FROM @TempTable
   ORDER BY Subject_ID, SampleOrder;

   --SELECT * FROM @TempTable1;

   DECLARE @TempTable2 TABLE (Sample_ID varchar(10), TestRepeat int, TestResult varchar(1))

   INSERT @TempTable2 SELECT 
     tt1.Sample_ID,
     tt1.TestRepeat,
     tt1.TestResult
    FROM @TempTable1 tt1
    INNER JOIN (
        SELECT Subject_ID, MAX(SampleOrder) AS Max_SampleOrder
        FROM @TempTable1
        GROUP BY Subject_ID) subQ1 
        ON (tt1.Subject_ID=subQ1.Subject_ID AND tt1.SampleOrder=subQ1.Max_SampleOrder)
    ORDER BY tt1.Sample_ID;

   SELECT tt2.Sample_ID,
          tt2.TestRepeat, 
          tt2.TestResult
   FROM @TempTable2 tt2
   INNER JOIN (
        SELECT Sample_ID, MAX(TestRepeat) AS Max_TestRepeat
        FROM @TempTable2
        GROUP BY Sample_ID) subQ 
        ON (tt2.Sample_ID = subQ.Sample_ID AND tt2.TestRepeat=subq.Max_TestRepeat)
   ORDER BY tt2.Sample_ID, tt2.TestResult; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T02:55:28.863

为此，您可以在子查询中使用[row_number() 。](http://msdn.microsoft.com/en-us/library/ms186734.aspx)

```
select Sample_ID, TestRepeat, TestResult
from
  (
    select Sample_ID, TestRepeat, TestResult,
           row_number() over(partition by left(Sample_ID, 7)
                             order by case right(Sample_ID,2)
                                        when 'P1' then 1
                                        when 'S1' then 2
                                        when 'S3' then 3
                                        when 'S2' then 4
                                       end, TestRepeat desc) as rn
    from @TempTable
  ) as T
where rn  = 1
order by Sample_ID 
```

[您可以在SE-Data](https://data.stackexchange.com/stackoverflow/query/66627)上测试查询

说明：
`row_number`将从中枚举您的行`1`。该`partition by`子句控制何时重新开始编号，`1`并且该`order by`子句指定编号的顺序。上面使用的`over()`子句将为您提供您感兴趣`row_number()`的`1`行。不可能`row_number()`在查询的 where 子句中使用，因此您必须使用派生表才能根据结果过滤行`row_number()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T02:30:29.120

尝试使用公用表表达式。您不必创建所有表变量，它可能会更简洁一些。这是一个示例，我为源数据保留了示例中的原始表变量。

```
DECLARE @TempTable TABLE (Sample_ID varchar(10), TestRepeat int, TestResult varchar(1))
--  In the end, ONLY the samples with Y should be displayed
INSERT INTO @TempTable VALUES('61-0001-P1', 0, 'R') -- 1  Y
INSERT INTO @TempTable VALUES('61-0002-P1', 0, 'R') -- 2  Y
INSERT INTO @TempTable VALUES('61-0003-S1', 0, 'S') -- 3  Y
INSERT INTO @TempTable VALUES('61-0004-S1', 0, 'R') -- 4  Y
INSERT INTO @TempTable VALUES('61-0005-P1', 0, 'I') -- 5 
INSERT INTO @TempTable VALUES('61-0005-P1', 1, 'S') -- 6  Y
INSERT INTO @TempTable VALUES('61-0006-P1', 0, 'S') -- 7  Y
INSERT INTO @TempTable VALUES('61-0006-S3', 0, 'R') -- 8
INSERT INTO @TempTable VALUES('61-0007-P1', 0, 'S') -- 9  Y
INSERT INTO @TempTable VALUES('61-0008-S3', 0, 'I') -- 10
INSERT INTO @TempTable VALUES('61-0008-S3', 1, 'R') -- 11 Y
INSERT INTO @TempTable VALUES('61-0009-P1', 0, 'R') -- 12 Y
INSERT INTO @TempTable VALUES('61-0009-S1', 0, 'S') -- 13
INSERT INTO @TempTable VALUES('61-0010-P1', 0, 'S') -- 14 Y
INSERT INTO @TempTable VALUES('61-0011-S3', 0, 'S') -- 15 Y

;with CTE1 as 
(
    SELECT  LEFT(Sample_ID,7) AS Subject_ID, 
        Sample_ID,
        SampleOrder = 
        CASE 
            WHEN RIGHT(Sample_ID,2) = 'P1' THEN 4
            WHEN RIGHT(Sample_ID,2) = 'S1' THEN 3
            WHEN RIGHT(Sample_ID,2) = 'S3' THEN 2
            WHEN RIGHT(Sample_ID,2) = 'S2' THEN 1
        END, 
        TestRepeat, 
        TestResult
    FROM @TempTable
),
CTE2 as
(
SELECT 
        tt1.Sample_ID,
        tt1.TestRepeat,
        tt1.TestResult
    FROM CTE1 tt1
    INNER JOIN (
        SELECT Subject_ID, MAX(SampleOrder) AS Max_SampleOrder
        FROM CTE1
        GROUP BY Subject_ID) subQ1 
        ON (tt1.Subject_ID=subQ1.Subject_ID AND tt1.SampleOrder=subQ1.Max_SampleOrder)
    ),
CTE3 as 
(
    SELECT tt2.Sample_ID,
            tt2.TestRepeat, 
            tt2.TestResult
    FROM CTE2 tt2
    INNER JOIN (
        SELECT Sample_ID, MAX(TestRepeat) AS Max_TestRepeat
        FROM CTE2
        GROUP BY Sample_ID) subQ 
        ON (tt2.Sample_ID = subQ.Sample_ID AND tt2.TestRepeat=subq.Max_TestRepeat)
)
select * 
from CTE3; 
```

它产生与您的示例相同的结果，但没有太多表变量。它也应该比表变量更有效。

这是我的博客的链接，其中包含几个公共表表达式的示例。 [http://stevestedman.com/category/classes/cte/](http://stevestedman.com/category/classes/cte/)

希望这可以帮助。如果您有任何问题，请告诉我。

# objective-c - 在 Xcode 4 中添加多个子层？只有一个显示

> ID：10134453
> 
> 赞同：0
> 
> 时间：2012-04-13T02:18:41.790
> 
> 标签：objective-c, xcode, calayer

我正在尝试将两个 CALayers 作为子层从一个数组添加到我的视图层。下面的代码只添加了最后一个尝试的子层（它被命名为 q）。我试图让它首先与数组中的两个一起工作，这样我以后就可以使用 for 循环添加尽可能多的东西。关于让两个子层同时显示的任何建议？

ViewController.h 是

```
#import <QuartzCore/QuartzCore.h>
#import <UIKit/UIKit.h>

@interface ViewController : UIViewController{
    UIImage *beeImage;

    UIImageView *beeView;
    CALayer *beeLayer;
    CABasicAnimation *animation;

    NSMutableArray *beeArray;

    }

@property(retain,nonatomic) UIImage *beeImage;
@property(retain,nonatomic) NSArray *beeArray;
@property(retain,nonatomic) UIImageView *beeView;
@property(retain,nonatomic) CALayer *beeLayer;
@property(retain,nonatomic)CABasicAnimation *animation;
-(void) animate;
-(void) makeSwarm;

@end 
```

这是 ViewController.m

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
    [self makeSwarm];
}

-(void) makeSwarm{

    self.view.layer.backgroundColor = [UIColor orangeColor].CGColor;
    self.view.layer.cornerRadius = 20.0;
    self.view.layer.frame = CGRectInset(self.view.layer.frame, 20, 20);

    CGRect beeFrame;
    beeArray = [[NSMutableArray alloc] init];
    beeImage = [UIImage imageNamed:@"bee50x55px.png"];
    beeFrame = CGRectMake(0, 0, beeImage.size.width, beeImage.size.height);
    beeView = [[UIImageView alloc] initWithFrame:beeFrame];
    beeView.image = beeImage;    
    beeLayer = [beeView layer];

    CALayer *p = [[CALayer alloc] init];
    CALayer *q = [[CALayer alloc] init];

    [beeArray addObject: beeLayer];     
    [beeArray addObject: beeLayer];  

    p = [beeArray objectAtIndex: 0];    

    [p setPosition:CGPointMake(10, 10)];
    p.zPosition=0;
    [self.view.layer addSublayer:p];

    q = [beeArray objectAtIndex: 1];    

    [q setPosition:CGPointMake(160,240)];
    q.zPosition=1;
    [self.view.layer insertSublayer:q below:p];        

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T17:50:19.173

我还不知道如何（或是否有可能）接受评论中留下的答案。因此，为了将其标记为已回答，我将引用第一个正确答案。如果这不能正确地帮助 lnafziger 在这里代表，我很抱歉，但我不知道还能做什么。

纳夫齐格说……

“这可能是因为它是同一个对象。尝试 [beeArray addObject:[beeLayer copy]]; 代替。 – lnafziger”

这行得通。非常感谢。

# php - 如何合并依赖于 PHP 中函数的多个数组？

> ID：10134456
> 
> 赞同：0
> 
> 时间：2012-04-13T02:18:54.997
> 
> 标签：php, arrays, merge, array-merge

我在这里寻求某人的知识。

现在，我需要将几个数组合并成一个更大的数组，但是所有这些数组都依赖于一个函数。

此函数返回一个数值数组，其中包含 1 和 7 之间的不同数量的数字：

```
function Possible($i, $j, $grid)
$possible = Possible($i, $j, $grid) 
```

我正在使用网格，该函数为网格的每种情况返回一个不同的数组。我想做的是将这 7 个数组合并到另一个数组中。在这个大数组中，一些数字可能不止一次出现，但我希望这样。

我尝试使用 for 循环、while 循环和其他一些技术，但没有任何效果。在这种情况下，不可能手动定义每个数组，因为它们会根据网格中包含的内容而变化，而且数量太多。它必须自动完成，这就是我卡住的地方。

```
for ($jj=0; $j<7; $j++){
    $possRow = array_merge( ###what do I add here or what do I change in this code to make everything work### 
```

如果有人可以帮助我，谢谢！

ETPI

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T03:19:55.567

希望这有帮助：

```
 $biggerOneArray = array();
    for($k=0;$k<7;$k++) {
     $biggerOneArray[] = Possible($i,$j,$grid);
} 
```

然后你可以检查你更大的数组，可能包含循环迭代的所有数组（合并了 7 个数组）。

```
var_dump($biggerOneArray); 
```

输出应该是这样的：

```
array(
      (int) 0 => array(
           'key' => 'value',
           'key2' => 'value2'
           ),
      (int) 1 => array(
           'key3' => 'value3',
           'key4' => 'value4'
            )
) 
```

ETC...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T02:33:03.650

对不起，你的描述不是很清楚。但为了让您入门，您可能会查看此解决方案。

```
function Possible($i, $j, $grid) {
    // some code ... e.g. $array[] = "some data";

    return $array;
} 
```

通过为每个网格创建一个小数组并使用它返回它，`return $array`您可以获得一些小数组，您可以将它们放入一个`for`循环中以将其合并为一个更大的数组。但是我相信 var`$jj`在它自身的功能中也必须具有某些含义。

```
for($jj=0;$jj<7;$jj++) {
    $merged_array[$jj] = Possible($i,$j,$grid);
} 
```

也许如果您更多地描述您的问题并发布您使用的数组的示例，我可以给您一个更好的答案。

# visual-studio-2010 - Visual Studio 可以自动附加到我的 Azure 虚拟应用程序吗？

> ID：10134461
> 
> 赞同：3
> 
> 时间：2012-04-13T02:19:10.263
> 
> 标签：visual-studio-2010, azure

我有一个想在 Visual Studio 2010 中调试的 Azure 解决方案。我有两个 MVC 站点设置为单个 Web 角色中的虚拟应用程序 - 从成本和 url 的角度来看，这种结构是有意义的。虚拟应用程序工作进程不会自动启动，因此 VS 不会附加到它。在浏览器中点击虚拟应用程序 url（即 localhost/app1）后，一个新的 w3p 进程启动，我可以手动附加到它。只是想知道那里是否有人以前做过这个，并且有关于如何自动附加到进程的提示。

听起来你必须手动执行的相关帖子：http: [//social.msdn.microsoft.com/Forums/uk/windowsazuredevelopment/thread/f1c5d72b-9196-480e-ace6-3c9063be79a7](http://social.msdn.microsoft.com/Forums/uk/windowsazuredevelopment/thread/f1c5d72b-9196-480e-ace6-3c9063be79a7)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T06:29:52.300

这不是 Azure 特定的，但您可以在应用程序启动时触发断点：

```
 protected void Application_Start()
    {
        #if DEBUG
        System.Diagnostics.Debugger.Break();
        #endif

        ...
    } 
```

您可以尝试将其与仅在您在模拟器中运行的启动任务结合起来，该任务会访问两个 Web 应用程序的 url（例如使用 wget.exe）。这将创建 w3wp 进程，触发 Debugger.Break。

资源：http: [//blog.smarx.com/posts/skipping-windows-azure-startup-tasks-when-running-in-the-emulator](http://blog.smarx.com/posts/skipping-windows-azure-startup-tasks-when-running-in-the-emulator)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T11:43:58.430

为了处理多站点角色，在开发时，我为每个站点都有一个单独的云项目，并且仅将一个组合用于部署目的。这并不理想，但它比整个手动连接更容易。

（对于历史爱好者来说，这种做法最初是在 SDK 添加对 Local 和 Cloud 配置文件的支持之前开始的。我们曾经有一个 Local 项目和一个 Cloud 项目，因为否则我们总是忘记在部署前切换连接字符串。）

# cakephp-2.0 - CakePHP2 文件上传插件

> ID：10134463
> 
> 赞同：1
> 
> 时间：2012-04-13T02:19:16.660
> 
> 标签：cakephp-2.0

我为 Ruby on Rails 应用程序使用回形针插件。什么是事实上的标准文件上传插件，如 CakePHP2 的回形针？

[https://github.com/davidpersson/media](https://github.com/davidpersson/media)只支持 CakePHP1.3？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T08:12:58.077

David Persson 的媒体插件没有 2.0 兼容版本，但有人对其进行了[分叉](https://github.com/bmcclure/CakePHP-Media-Plugin)以使其在更新版本的 Cake 上运行。这个分支是积极开发的（这也意味着事情可能仍然会被破坏）并且没有官方发布，它似乎是运行媒体插件的最佳选择。

除了 Persson 的插件之外，还有[MeioUpload](https://github.com/jrbasso/MeioUpload)，它也被广泛使用并且似乎与 Cake 2.0 兼容。

有[Uploader](http://milesj.me/code/cakephp/uploader)（目前是 3.3 版），它与 Cake 2.0（可能也是 2.1）兼容。

最后， WebTechnick[的插件 FileUpload](https://github.com/webtechnick/CakePHP-FileUpload-Plugin/tree/cakephp2.0)（以他的 Cake 的 Facebook 插件而闻名）有一个尚未正式发布的 2.0 分支，因此请谨慎操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-10-09T19:23:47.160

没有定义默认插件，建议将 Uppy 插件与 ajax 请求一起使用，有关更多信息，请访问：

```
[1]: https://uppy.io/docs/plugins/ 
```

我希望这有帮助。

# ironpython - 我可以在 Linqpad 中使用 IronPython 吗？

> ID：10134464
> 
> 赞同：2
> 
> 时间：2012-04-13T02:19:18.950
> 
> 标签：ironpython, linqpad

我喜欢 Linqpad，我正在学习 IronPython。当我做一些 IronPython 练习时，我可以使用 Linqpad 作为我的“代码暂存器”吗？就是想。:)

谢谢。

* * *

**更新：**

根据 Joe Albahari 的说法，对添加其他语言的支持适度，因此可能会在某个阶段添加。

有关更多详细信息，请参阅 IronPython/IronRuby 支持请求[链接](http://linqpad.uservoice.com/forums/18302-linqpad-feature-suggestions/suggestions/359780-ironpython-ironruby-support-would-be-nice-)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T02:24:42.840

[没有。您可以尝试在linqpad 论坛](http://forum.linqpad.net/)上询问 Joe 是否有任何计划。他是个好人。

# c# - 同时 Web 服务访问测试

> ID：10134470
> 
> 赞同：1
> 
> 时间：2012-04-13T02:20:32.117
> 
> 标签：c#, web-services, .net-4.0

如果有多个客户端同时访问它，我想测试我的 Web 服务，甚至没有`0.01e-1000`毫秒的差异（如果它甚至可行的话）。

**您如何创建可以同时访问 Web 服务的测试？**如果可能，您如何知道客户端同时访问服务？

我不确定使用 a`BackgroundWorker`是否会同时执行它们。

```
bgw.DoWork += DoWorkEventHandler(AccessServiceWithMockClient1);
bgw.DoWork += DoWorkEventHandler(AccessServiceWithMockClient2);
bgw.RunWorkerAsync(); 
```

我认为它将执行第一个（`AccessServiceWithMockClient1`），我只是不确定，因为我无法检查谁在访问该服务。

当然，我认为线程不起作用，因为我可能在另一个线程方法中有这样的代码。

```
AccessServiceWithMockClient1();
AccessServiceWithMockClient2(); 
```

这显然会执行第一个。但我不太确定，我可能对线程不太了解。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T02:31:37.703

在我看来，您正在寻找一种可以模拟多个同时用户的负载测试工具。如果你安装了 apache，你可以使用 apache bench [http://httpd.apache.org/docs/2.0/programs/ab.html](http://httpd.apache.org/docs/2.0/programs/ab.html)，根据我的经验，它很容易运行测试。对于微软特定的工具，这个问题有一些答案：[https](https://serverfault.com/questions/917/what-are-good-load-testing-tools-for-iis-7-web-applications) ://serverfault.com/questions/917/what-are-good-load-testing-tools-for-iis-7-web-applications 。

# java - 如何在 Jsoup 中删除部分网页？

> ID：10134472
> 
> 赞同：0
> 
> 时间：2012-04-13T02:20:57.983
> 
> 标签：java, android, jsoup

我目前正在研究 Jsoup。我已经得到一个元素`content`看起来像

```
<p>123</p>
<p>456</p>
<p>789</p>
<p>abc</p>
<p>efg</p>
.... 
```

efg 行之后有几行，但我希望删除 efg 行之后的所有行，我希望结果是一个元素（不是元素）

我尝试了几种方法，例如

```
content.children().removeAll(content.getElementsByIndexGreaterThan(content.children().indexOf(content.select("p:contains(efg)")))); 
```

或者

```
content.getElementsByIndexGreaterThan(content.select("p:contains(efg)")).remove(); 
```

不幸的是，它们都不起作用。有没有人对此有更好的解决方案？感谢您阅读这篇文章。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-01-17T14:46:11.630

```
<div> 
 <p>123</p> 
 <p>456</p> 
 <p>789</p> 
 <p>abc</p> 
 <p>efg</p> 
 <p>111</p> 
 <p>222</p> 
 <p>333</p> 
 <p>444</p> 
</div> 
```

* * *

```
public static void main(String[] args) throws Exception {
    String html = new String(Files.readAllBytes(Paths.get("input.html")));
    Document doc = Jsoup.parse(html);
    Element content = doc.select("div").first();

    Element lastValidElement = content.select("p:contains(efg)").first();
    int lastValidElementIndex = content.children().indexOf(lastValidElement);
    content.getElementsByIndexGreaterThan(lastValidElementIndex).remove();
    System.out.println(content);
} 
```

* * *

```
<div> 
 <p>123</p> 
 <p>456</p> 
 <p>789</p> 
 <p>abc</p> 
 <p>efg</p>     
</div> 
```

# javascript - 从翻转内容演示中翻转 div 在 IE9 中不起作用

> ID：10134476
> 
> 赞同：0
> 
> 时间：2012-04-13T02:21:24.697
> 
> 标签：javascript, html, animation, css-transitions

我创建了一个基于[http://css3.bradshawenterprises.com](http://css3.bradshawenterprises.com)翻转内容演示 1 的翻转 div（过渡和 3d 变换）。

它适用于所有浏览器，但 IE 9 不支持过渡和 3D 变换。对于 IE9，我不需要 div 来翻转，但我希望图像的 .face.front 显示，而不是 .face.back 显示。我想写一个JavaScript来说如果IE9或更低，然后显示.face.front

[http://jsfiddle.net/RC7WH/](http://jsfiddle.net/RC7WH/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T06:33:40.253

我解决了我自己的问题。由于 IE9 不支持 3D 变换，它从 face front div 移动到 face back side。我希望忽略正面的一面，这样我就可以展示正面的一面。这是DIV：

```
<div class="perspective">
        <div id="f1_container">
            <div class="f1_card shadow">  
                <div class="front face">
                    <img src="images/rocks01.jpg" width="448px" height="276px" alt="rocks talk"/>
                </div>
                <div class="back face center">
                    <img src="images/rocks11.jpg" width="448px" height="276px" alt="rocks talk"/>
                </div>
            </div>
        </div>
      </div> 
```

我创建了一个放置在 html 中的 IE 条件，现在可以看到正面。这就是我想要的。

```
 <!--[if IE 9]><html>
       <style type="text/css">
        .face.back{
           visibility:hidden;
        }
       </style>
    <![endif]--> 
```

这就是我想要的。我已将我的设计嵌入到滚动视差水平代码中。感谢 Paul Irish 提出的 HTML5 标签创意。请参阅：http: [//jsfiddle.net/eJnns/113/](http://jsfiddle.net/eJnns/113/) 谢谢 [http://jsfiddle.net/Q7YU3/](http://jsfiddle.net/Q7YU3/)帮助我在 Firefox 14 中使用 3d 变换的透视/父/子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T19:33:37.357

如果你把前面的 div 放在第二个，那么它会留在 IE9 的前面

```
 <div class="front face">
          <p> front side</p>
     </div> 
     <div class="back face center">
          <p> back side</p>
     </div> 
```

改成这个...

```
 <div class="back face center">
          <p> back side</p>
     </div>
     <div class="front face">
          <p> front side</p>
     </div> 
```

在此处查看 IE9 中的示例 [http://jsfiddle.net/eiu165/vdrXZ/1/](http://jsfiddle.net/eiu165/vdrXZ/1/)

# java - MouseListener 的问题

> ID：10134477
> 
> 赞同：2
> 
> 时间：2012-04-13T02:21:44.777
> 
> 标签：java, swing, focus, keylistener

我正在用java编写游戏。这里的问题是我编写了我的游戏以在 JFrame 中运行，没想到我会想要添加菜单和结果屏幕以及所有这些好东西。游戏本身在 JFrame 中运行良好。不过，我决定将我的 JFrame 变成 JPanel，为我的 JFrame 创建一个单独的类，然后将我的 JPanel 添加到框架中。除了我的 MouseListener 不再做任何该死的事情外，一切都很顺利。有人可以告诉我如何使这项工作或如何做到这一点的不同想法吗？

/////更新所以显然我在重新创建问题时找到了答案......我只需要弄清楚我的游戏代码和测试代码之间的区别。

这是我写的尝试重现问题的示例。奇怪的是，这很有效。现在我更加困惑了。所以显然这没问题：

```
//Class for the JFrame
package mousetest;

import java.awt.Color;
import javax.swing.JFrame;

public class MouseTest extends JFrame{

public static void main(String[] args) {
    MouseTest test = new MouseTest();
}

public MouseTest(){
    //create teh board
    Board game = new Board();

    //framestuff
    setSize(406, 630);
    setLocationRelativeTo(null);
    setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    setResizable(false);
    setVisible(true);
    setBackground(Color.black);
    add(game); // add it
}

} 
```

==================================================== =======================

```
//Class for the JPanel that my game is in
package mousetest;

import java.awt.Color;
import java.awt.event.MouseEvent;
import java.awt.event.MouseListener;
import javax.swing.JLabel;
import javax.swing.JPanel;

public class Board extends JPanel{
    JLabel testlabel = new JLabel("testtext");
    //CONSTRUCTOR
    public Board(){
        setBackground(Color.WHITE);
        testlabel.addMouseListener(new Mousehandle());
        setVisible(true);
        add(testlabel);
    }

    // control ALLTHECLICKS!!!!!
    class Mousehandle implements MouseListener{

        public Mousehandle(){

        }

        public void mouseClicked(MouseEvent e) {

        }

        public void mousePressed(MouseEvent e) {
            if(e.getSource() == testlabel){
                System.out.println("mouse down");
            }
        }

        public void mouseReleased(MouseEvent e) {
            if(e.getSource() == testlabel){
                System.out.println("mouse up");
            }
        }

        public void mouseEntered(MouseEvent e) {
            if(e.getSource() == testlabel){
                System.out.println("rollover");
            }

        }

        public void mouseExited(MouseEvent e) {
           if(e.getSource() == testlabel){
                System.out.println("roll off");
            }
        }

        public void mouseDragged(MouseEvent e){

        }

    }

} 
```

# .net - 从 SQL Server 数据库中获取十进制值

> ID：10134479
> 
> 赞同：2
> 
> 时间：2012-04-13T02:21:46.720
> 
> 标签：.net, sql-server, vb.net

我有一个包含从数据库中提取的十进制值的数据集，当我尝试将其中的值分配给变量时，十进制值以某种方式四舍五入为整数。我手动运行了查询，该查询选择了一列 decimal(18,4) 数据类型并验证输出是否包含小数位。在断点期间，我还发现 (dtr(c.ColumnName)) 实际上变成了一个整数。

请指教谢谢。

```
 Dim bannerValsAmt(1) As Decimal
        Dim bannerVals(1) As String
        Dim i As Integer
        Dim ds As DataSet = LoadBanner()
        For Each dtr As DataRow In ds.Tables(0).Rows
            For Each c As DataColumn In ds.Tables(0).Columns
                If i = 0 Then
                    bannerValsAmt(0) = CType((dtr(c.ColumnName)), Decimal)
                ElseIf i = 1 Then
                    bannerVals(0) = (dtr(c.ColumnName)).ToString.Trim
                ElseIf i = 2 Then
                    bannerValsAmt(1) = CType((dtr(c.ColumnName)), Decimal)
                ElseIf i = 3 Then
                    bannerVals(1) = (dtr(c.ColumnName)).ToString.Trim
                End If
                i += 1
            Next
        Next 
```

# javascript - JavaScript 中的引用传递（调用方法）

> ID：10134485
> 
> 赞同：1
> 
> 时间：2012-04-13T02:22:58.933
> 
> 标签：javascript, prototype, pass-by-reference

我的问题是我不明白这里称为“objectchanger”的方法是如何工作的

```
function test()
{
  this.value=5;
}

test.prototype.Add=function()
{
  this.value++;
};

var obj = new test();

obj.Add();

alert(obj.value);

function objectchanger(fnc, obj)
{
  fnc.call(obj); 
  //obj.fnc(); >> without this line of code it works fine but why?????
  //why i don't need to write this code --
}

objectchanger(obj.Add, obj);
alert(obj.value); // the value is now 7 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T02:27:01.700

`call`是`Function`对象的方法。它以传入的对象作为`this`函数中的值调用函数。请参阅[MDN 文档](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function/call)待命。

所以`objectchanger`调用`fnc.call(obj)`的时候就是调用`test.prototype.Add.call(obj)`，跟调用是一样的`obj.Add()`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T02:28:28.493

当在 javascript 函数中访问“this”对象时，它会从当前执行的上下文中获取它。通过在调用方法中传递“obj”，将函数内的“this”对象设置为传入的对象。

# android - setOutputFormat 和 setAudioEncoder 之间有什么关系吗

> ID：10134488
> 
> 赞同：3
> 
> 时间：2012-04-13T02:23:37.500
> 
> 标签：android, audio, mediarecorder

在使用 MediaRecorder 时，该文件说：

使用 MediaRecorder.setOutputFormat() 设置输出文件格式。使用 MediaRecorder.setAudioEncoder() 设置音频编码器。

我的问题：这两个 API 之间是否有任何约束或关系？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T22:05:11.773

这为该主题提供了一些启示：

[http://developer.android.com/guide/appendix/media-formats.html](http://developer.android.com/guide/appendix/media-formats.html)

很遗憾，此信息未在 mediarecorder API 文档中链接。如果您尝试使用 AAC+ 进行编码，本机代码只会默默地崩溃。

# ios - 如何在IOS上删除图像的正方形比例裁剪

> ID：10134493
> 
> 赞同：12
> 
> 时间：2012-04-13T02:25:41.353
> 
> 标签：ios, uiimagepickercontroller, crop

我正在使用 IOS 标准图像裁剪功能（移动和缩放）来裁剪我的图像，然后再将其提交到服务器。

但是，我意识到提供的裁剪有一个平方比（见下面的截图）

![在此处输入图像描述](../Images/ef72254d695db28fdf277f93378f3a6e.png)

代码片段如下：

```
//set up image picker
self.imgPicker = [[[UIImagePickerController alloc] init]autorelease];
self.imgPicker.allowsEditing = YES;
self.imgPicker.delegate = self;

//Trigger get photo from library function
self.imgPicker.sourceType = UIImagePickerControllerSourceTypePhotoLibrary;
[self presentModalViewController:self.imgPicker animated:YES]; 
```

如何允许“移动和缩放”编辑，同时允许用户在没有平方比例限制的情况下进行裁剪？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2014-09-11T07:23:00.033

我认为你需要`self.imgPicker.allowsEditing = YES;`改变`self.imgPicker.allowsEditing = NO;`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-05-03T11:17:52.000

这个库可以帮助你。

[https://github.com/gekitz/GKImagePicker](https://github.com/gekitz/GKImagePicker)

它支持自定义裁剪，如果需要，它很容易与本机选择器集成。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-27T12:48:16.513

我想，这将达到你的目的。您可以根据需要更改约束

[https://github.com/kishikawakatsumi/PEPhotoCropEditor?source=cc](https://github.com/kishikawakatsumi/PEPhotoCropEditor?source=cc)

# debugging - prolog谜题，找不到错误

> ID：10134495
> 
> 赞同：0
> 
> 时间：2012-04-13T02:25:46.077
> 
> 标签：debugging, prolog, puzzle

这是我的作业代码，它无法正常工作。它应该做的是采用`family(Title,[Name/Speed|_])`如第一行代码所示的形式的家庭事实，并使用手电筒生成众所周知的桥梁拼图的所有可能结果。但是，它所说的一切都是真的还是假的，这取决于家庭事实是否存在。例如，如果所有事实都已列出，则该程序可以正常工作

`person(dad,1) person(mom,2) person(kid,5) person(granny,10)`

当 ^ 在代码中时，最后一个`assert_family`被消除，代码是好的。所以这与`assert_family`没有正确使用有关。

```
 family(original, [father/1,mother/2,child/5,granny/10]).

moveFamily(Key,Journey, TotalTime):-
      assert_family(Key),
      findall(Person+Time, person(Person, Time), Left),
      moveFamily(Left, [], Journey),
      findall(Time, member([Time|_], Journey), LTime),
      sumlist(LTime, TotalTime).

    moveFamily([P1-T1, P2-T2], _, [[T, [P1-P2]]]):-
      T is max(T1, T2).
    moveFamily(Left, Right, [[LT, [P1-P2]],[RT, [P3]]|Journey]):-
      select(P1-T1, Left, MLeft1),
      select(P2-T2, MLeft1, MLeft2),
      LT is max(T1, T2),
      select(P3-RT, [P1-T1,P2-T2|Right], MRight),
      moveFamily([P3-RT|MLeft2], MRight, Journey).

    :- dynamic person/2.
    assert_family(Key) :-
        family(Key,List),
        forall(member(N/V,List),
               assertz(person(N,V))). 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T13:37:07.293

```
% this seems to work:

% LPA WIN-PROLOG 4.010 on mac with WinOnX

family(original, [father/1,mother/2,child/5,granny/10]).

moveFamily(Key,Journey, TotalTime):-
      assert_family(Key),
      findall(Person-Time, person(Person, Time), Left), % changed+
      moveFamily(Left, [], Journey),
      findall(Time, member([Time|_], Journey), LTime),
      sumlist(LTime, TotalTime).

moveFamily([P1-T1, P2-T2], _, [[T, [P1-P2]]]):-
  T is max(T1, T2).

moveFamily(Left, Right, [[LT, [P1-P2]],[RT, [P3]]|Journey]):-
  select(P1-T1, Left, MLeft1),
  select(P2-T2, MLeft1, MLeft2),
  LT is max(T1, T2),
  select(P3-RT, [P1-T1,P2-T2|Right], MRight),
  moveFamily([P3-RT|MLeft2], MRight, Journey).

%:-dynamic(person/2).

assert_family(Key) :- dynamic(person/2),
    family(Key,List),
    forall(member(N/V,List),
           assertz(person(N,V))). 

select(H,[H|T],T).
select(X,[H|T],[H|T1]):-select(X,T,T1).

sumlist(L,Sum) :-
 sumlist(L,0,Sum).
sumlist([],Sum,Sum).
sumlist([H|T],Count,Sum) :-
 NewCount is Count + H,
 sumlist(T,NewCount,Sum). 
```

# asynchronous - Titanium - 异步回调加载时不呈现 Webview

> ID：10134498
> 
> 赞同：0
> 
> 时间：2012-04-13T02:26:01.760
> 
> 标签：asynchronous, webview, titanium-mobile

我有一个循环，对于每个调用异步请求到服务器的项目，创建一个带有 webview 的视图，以便稍后在计算位置后添加一个滚动视图。在回调中，我获取服务器数据并提供给 webview。

当加载方法需要更长的时间来执行时（例如在慢速连接中），webview 不会被渲染。

这在设备中发生了很多次，但在模拟器中却很少发生。但是，为了方便模拟，只需在 load 方法中放置一个断点，延迟执行。我怀疑在渲染已经添加的 webview 时出现问题。

为了更好地理解，我将代码简化为一个块：

```
function createView(){

    var view = Ti.UI.createView({
        //...
    });

    var webview = Ti.UI.createWebView({});
    view.add(webview);

    //Callback to process webview content after receive the server data     
    view.load = function(serverData){
        webview.setUrl(serverData.url);
        webview.addEventListener('beforeload', function(){
            webview.evalJS("var value="+serverData.value+";");
        });
    };

    return view;
};

var views = new Array();

for(i=0;i < data.length;i++){

     views[i] = createView();

     //Async request to server
     var req = Ti.Network.createHTTPClient();

     req.onload = function(){
          result = JSON.parse(this.responseText);
          views[i].load(result);
     }

     req.open("POST", "http://myserver.com.br/myservice");
     req.send({myParam: data[i].value}); 
}

var scrollView = Ti.UI.createScrollView({
    //...
});

for(i=0;i < views.length;i++){

    //Calc the positions, not relevant
    views[i].width = calculedValue; 
    views[i].height = calculedValue; 

    scrollView.add(views[i]);   
}

win.add(scrollView); 
```

我使用 Titanium SDK 1.8.2 并在装有 iOS 5.0.1 的 iPad 2 上运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T01:53:33.800

我解决了在回调而不是事件侦听器上评估 javascript 数据的问题

```
view.load = function(serverData){
    webview.setUrl(serverData.url);
    //Not on event 'beforeload'
    //webview.addEventListener('beforeload', function(){ not on 
        webview.evalJS("var value="+serverData.value+";");
    //});
}; 
```

我认为这与有时在事件侦听器上不调用 UI 线程有关

# objective-c - 如何使用 Core Plot 将一条线从两点延伸到绘图区域的边缘？

> ID：10134506
> 
> 赞同：0
> 
> 时间：2012-04-13T02:27:58.920
> 
> 标签：objective-c, ios, cocoa, core-plot

我正在使用 Core Plot 来绘制线性方程。

我希望能够提供两个不同的数据点并在它们之间绘制一条线，但也可以在这些点本身之外进行外推，以便该线一直延伸到绘图区域的边缘。

例如，给定一个 20x20 的绘图区域，原点居中并指向 -5、-5 和 5,5，这条线（下方绿色）将从 -10,10 一直延伸到 10,10（下方蓝色）。

[![](../Images/13dd1217f875614ce1209793640622b9.png)](https://i.stack.imgur.com/T6t11.gif)

这可能吗？最好的选择只是找到绘图范围（每次都会不同）并找到它之外的两个点？我不确定这是否可行；我启用了用户交互，我想确保用户不会意外平移到足够远以至于该行将结束。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T14:06:03.357

您在绘图范围之外找到两个端点的想法就是我要做的。如果您限制了滚动范围，只需在该范围的限制处选择点。如果没有，您需要使用绘图空间委托监控绘图空间范围的变化，并根据需要更新绘图。

# c++ - 在 C++ 中将字符写为字节

> ID：10134507
> 
> 赞同：0
> 
> 时间：2012-04-13T02:28:11.023
> 
> 标签：c++, compression

我正在用 C++ 编写一个霍夫曼编码程序，并使用这个网站作为参考：

[http://algs4.cs.princeton.edu/55compression/Huffman.java.html](http://algs4.cs.princeton.edu/55compression/Huffman.java.html)

我现在使用 writeTrie 方法，这是我的版本：

```
// write bitstring-encoded tree to standard output
void writeTree(struct node *tempnode){
if(isLeaf(*tempnode)){
    tempfile << "1";
    fprintf(stderr, "writing 1 to file\n");
    tempfile << tempnode->ch;
    //tempfile.write(&tempnode->ch,1);
    return;
}
else{
    tempfile << "0";
    fprintf(stderr, "writing 0 to file\n");
    writeTree(tempnode->left);
    writeTree(tempnode->right);
}   
} 
```

查看注释的行 - 假设我正在写入一个文本文件，但我想在 tempnode->ch 写入构成 char 的字节（这是一个无符号字符，顺便说一句）。有关如何执行此操作的任何建议？注释的行给出了从 unsigned char* 到 const char* 的无效转换错误。

提前致谢！

编辑：澄清一下：例如，我希望我的最终文本文件是二进制文件——只有 1 和 0。如果您查看我提供的链接的标题，他们会给出“ABRACADABRA！”的示例。以及由此产生的压缩。我想取字符（例如上面的示例中的'A'），使用它的无符号整数（A='65'），并以二进制形式写入 65，作为一个字节。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T02:41:29.160

char 等同于字节。前面的行`tempfile << tempnode->ch;`已经完全符合您的要求。

`write`for没有重载`unsigned char`，但如果你愿意，你可以做

```
tempfile.write(reinterpret_cast< char * >( &tempnode->ch ),1); 
```

这相当丑陋，但它的作用与`tempfile << tempnode->ch`.

**编辑：**哦，你想为字节中的位写一系列`1`和`0`字符。C++ 有一个晦涩的技巧：

```
#include <bitset>

tempfile << std::bitset< 8 >( tempnode->ch ); 
```

# jquery - jquery：即使是最简单的示例，我也无法让 $.get 或 $('#idOfElement').load 工作。

> ID：10134509
> 
> 赞同：1
> 
> 时间：2012-04-13T02:28:15.297
> 
> 标签：jquery, ajax

多么尴尬。我在以前的项目中进行过这项工作，但现在我无法获得最简单的负载示例，并且 $.get 可以正常工作。

我的简单小网页如下所示。当我使用 firebug 时，我可以看到正在发出 http 请求（在下面的 cnn.com 的情况下，我也尝试了 google。）但 firebug 出于某种原因将这些请求显示为红色。

id 为“容器”的 div 不会更新。而且我从来没有看到指示“这是数据”的回调。

一定是真正简单而愚蠢的东西……但修修补补了一个小时后，我已经准备好哭求帮助了。

非常感谢任何建议。谢谢 ！

```
 <!DOCTYPE html>
        <html lang="en">
        <head>

         <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>

          <script type="text/javascript">
            $(document).ready(function () {

              alert('in ready handler');
              $('#container').load('http://www.cnn.com/');
              alert('after container load');
              $.get(
                    'http://www.cnn.com/', 
                    function(data) {  
                        alert('here is the data' + data); 
                    } 
              );
              alert('after get was called');
            });

          </script>
        </head>

        <body>
        the container:
          <div id="container"></div>
        </body>
        </html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T02:29:51.623

除非您在其上托管您的代码，否则您`cnn.com`无法使用 AJAX 从另一个域加载资源。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T02:38:15.947

这是一种跨域保护机制。

最好的选择是在您的服务器上有一个简单的 php 文件，它从远程站点请求内容并将其发回，例如

AJAX.php

```
$ echo file_get_contents('http://www.cnn.com/'); 
```

你JS

```
$ ('#container').load('ajax.php'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T03:27:34.707

添加到 Dales 评论：

有时不允许来自远程服务器的 file_get_contents（在服务器上可能是 allow_url_fopen false）。所以你可以使用 curl 代替。

你的 JS 文件

```
 $ ('#container').load('curlRequest.php'); 
```

你的 curlRequest.php 文件

```
 $ch = curl_init("http://www.cnn.com/");
    curl_setopt($ch, CURLOPT_HEADER, 0);
    curl_setopt($ch, CURLOPT_POST, 1); //you can use get method also here
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
    $output = curl_exec($ch);      
    curl_close($ch);
    echo $output; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-16T01:37:35.690

答案基本上是由 Illia 和 Dale 提供的（谢谢，先生们）。

我将在他们的答案中添加以下内容，这是我的朋友 Eric 建议的。

他基本上建议我检查控制台！我应该首先做到这一点。当我在 Chrome 中启用控制台时，当我点击我的页面时看到以下错误：

```
 2XMLHttpRequest cannot load http://www.cnn.com/. Origin null is not allowed by Access-Control-Allow-Origin. 
```

如果我在第一次玩这个问题时看到了这一点，那会提示我。

唯一的问题是我在 Chrome 中启用控制台时看到该错误，但在 Firefox 中使用 Firebug 时看不到它。所以我想这个故事的寓意是如果 Firebug 没有给我足够的信息，那么在 Chrome 中尝试我的请求。[直到我弄清楚如何从 Firebug 获取此信息，我将在我这样做时发布。]

# php - 为什么添加锚点时这个正则表达式会失败？

> ID：10134512
> 
> 赞同：2
> 
> 时间：2012-04-13T02:29:02.100
> 
> 标签：php, regex, preg-match

这是一场比赛：

```
preg_match('/[a-bA-B0-9]+/', 'username') 
```

但这不是：

```
preg_match('/^[a-bA-B0-9]+$/', 'username') 
```

这是为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T02:34:03.883

你在测试实际的文字`'username'`吗？

`/[a-bA-B0-9]+/`将测试字符串中*任意位置*是否存在 a,b,A,B,0,1,2,3,4,5,6,7,8,9 。所以它会匹配`abBa854Abba32`，它会匹配`sjfsgfafnvesv`。

`/^[a-bA-B0-9]+$/`将测试*整个*字符串是否由 a,b,A,B,0,1,2,3,4,5,6,7,8,9 组成。所以会匹配`abBa854Abba32`，也不会匹配`sjfsgfafnvesv`。

也许你的意思是`/^[a-zA-Z0-9]+$/`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T02:34:06.497

第二个不匹配，因为您已告诉正则表达式匹配以字符类中的这些项目之一*开头的序列。*您的字符串的第一个字母是“u”，并且您的字符类 [a-bA-B0-9] 中没有“u”。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-13T02:37:42.467

从[这里](http://www.switchplane.com/awesome/preg-match-regular-expression-tester?pattern=/%5Ba-bA-B0-9%5D%2b/&subject=username)

你可以看到它只匹配`a`：

> 结果
> 
> 找到 1 个匹配项：
> 
> 数组 ( [0] => a )

# java - 如何创建“现代外观”的 Java 桌面应用程序？

> ID：10134516
> 
> 赞同：55
> 
> 时间：2012-04-13T02:29:55.940
> 
> 标签：java, swing, user-interface, look-and-feel, swingx

会定期提出与此类似的问题，但其中许多答案已经过时。

我需要用 Java 构建一个跨平台的桌面应用程序，其 GUI 质量与当代桌面应用程序相当。

Swing 是默认选择，但我还没有遇到过看起来至少不是很陈旧和笨重的 Swing 应用程序（我知道这是主观的，但使用 GUI 很难避免审美判断）。

我注意到新的比特币客户端现在使用 QT 和 Java 绑定，并且确实有一个吸引人的用户界面，但它的缺点是它不再是纯 Java。

当我搜索与 Swing 相关的库时，我发现的很多东西都是 5 年或更早的，尽管从那时起桌面应用程序的美学已经有了很大的发展。

如果您需要从头开始构建 Java 桌面应用程序，您会使用什么来构建它的 GUI？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-04-13T07:16:25.587

我还可以为您提供一个新的 LaF 来研究 - [WebLaF](http://weblookandfeel.com)。我目前正在努力为它带来许多 UI 功能，并通过使用 WebLaF 库的基本功能使任何人都可以更轻松地使用 Swing。

一些示例展示了一些 WebLaF 组件的外观： ![一些 WebLaF 组件](../Images/e2923bc0f5c1606491f69d60cbf73e05.png)

我瞄准的一些主要目标：

1.  外观精美且外观现代的 L&F，支持所有 Swing 组件
2.  在标准 Swing 中找不到的大量附加组件
3.  大量实用程序类来帮助您编写代码

WebLaF 库还提出了其他一些优点和独特的功能：

1.  它是一个开源项目（GPLv3 许可）
2.  使用 Painters 系统轻松设计组件（特别是 9 个补丁文件）
3.  快速轻松地自定义默认“Web”样式
4.  许多功能可加速和简化 Swing 应用程序界面的创建

您可以尝试[演示应用程序](http://weblookandfeel.com/downloads/weblookandfeel.jnlp)，看看它是否足够现代和简单:)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-04-13T02:56:20.257

你看过[JavaFX 2.0](http://javafx.com/)吗？它旨在与 Swing 轻松互操作，并具有许多现代的“好看”控件。

此外，正如 lrAndroid 所提到的，如果您使用以下方式设置系统外观和感觉，则 Swing 应用程序可以看起来像本机应用程序：

```
UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName()); 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-04-13T02:48:41.123

研究改变 Java 程序的外观。这允许您自定义程序的整体“主题”。 [这](http://docs.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html)是有关更改 LAF 的信息。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-04-13T08:22:05.917

现代 Javascript 框架（ExtJS、Dojo 等）提供相同或更多的小部件丰富性（例如 Excel 之类的网格）、更广泛的 L&F，并且通常更适合用户的操作系统。用户对他们的浏览器也很满意，嘿，“现代的东西”在网络上，而今天的现代网络是 HTML+Javascript。

将应用程序转换为“类似网络”的开销很小。嵌入式 Jetty 可以保持非常小，并且磁盘空间已不再是问题。

对于应用程序的未来发展，沿着这条路线还有其他好处。

*   突然，桌面应用程序变成了服务器应用程序，可以从另一个桌面访问。我们能够在几周内将桌面应用程序推广到“门户”。
*   根据（Ajax）Web 服务重写应用程序可以轻松过渡到创建完整的 REST（或 SOAP...）服务堆栈。然后可以将该应用程序集成到其他应用程序中，轻松地进行外部监控等......
*   仅专注于 UI 层，对其他设备（智能手机、平板电脑等）的支持变得更加容易
*   随着应用程序的增长，关注点分离更加清晰；开发 UI 的开发人员不必处理低级代码。
*   有很多优秀的 JS/HTML 设计人员和开发人员不使用 Java 编程。

**编辑**

[3 年后，多亏了Electron](https://electron.atom.io/)，这变得非常容易

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-04-13T09:00:40.787

尝试其中之一：

1.  [纹身](http://www.jtattoo.net/)
2.  [JGoodies](http://www.jgoodies.com/)
3.  [夸夸](http://www.randelshofer.ch/quaqua/)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-04-13T08:56:09.803

Nimbus 的外观和感觉如何？[Oracle Link](http://docs.oracle.com/javase/6/docs/technotes/guides/jweb/otherFeatures/nimbus_laf.html) 也看看[SO-Question](https://stackoverflow.com/questions/559559/good-looking-java-swing-lookfeel)

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2014-08-15T22:03:57.777

我知道这个问题很老，但如果你不想使用 FX 并且仍然想使用 Swing，那么试试[MacWidgets](https://code.google.com/p/macwidgets/wiki/Examples)，我已经在几个项目中使用过它。它很轻，看起来很棒。下面是我正在做的一个旧项目，随着时间的推移，我已经完善了使用 macwidgets，现在在我的公司内部使用它。

[http://www.digitalhand.net/projects/jdataanalyzer/mainGUI.png](http://www.digitalhand.net/projects/jdataanalyzer/mainGUI.png)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-04-13T03:05:55.637

QT 相当广泛，但也非常庞大（臃肿）和复杂。例如，还有开放式办公室使用的 SWT 库。SWT 对按钮、表格等使用本地 UI 小部件，而 Swing 模拟它们。

然而，趋势显然是使用 HTML 和 Javascript 为浏览器编写富客户端应用程序。在过去的几年里，这两者都取得了巨大的进步。

HTML5 专门针对具有更好的表单和本地数据库等功能的富客户端应用程序，以支持断开连接的场景（请注意，最后一个功能尚未标准化，但已由所有最新浏览器实现）。

Javascript 现在拥有强大的库，其中包含 jQuery 及其许多插件。甚至还有像 Coffeescript 这样的语言可以用来生成语法更简单、更强大的 Javascript。

此类应用程序也无需连接到外部服务器。可以在客户端上安装小型本地服务器（例如：jetty、node.js、...）和数据库（SQLite、H2、...），以构建一个完全独立的应用程序。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2021-07-12T16:04:45.130

我对[FlatLaf](https://www.formdev.com/flatlaf/)有很好的体验。

它易于安装，跨平台，没有外部依赖，它是开源的（Apache 许可证），它包括暗模式和大量[主题](https://www.formdev.com/flatlaf/themes/)。

[![光](../Images/6fe68851066f3e2488726639d9250524.png)](https://i.stack.imgur.com/E9I01.png)

[![黑暗的](../Images/28314f6d1dce696dc5d115c33ae51068.png)](https://i.stack.imgur.com/GkPaP.png)

添加后：

```
UIManager.setLookAndFeel( new FlatLightLaf() ); 
```

您的应用程序看起来像是在过去十年中编写的，而不是在上个千年中编写的。

它还有一个高对比度主题，可访问性。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-11-06T17:44:42.833

Swing 很好（稳定，有文档，支持到 2026 年）。问题是它依赖于提供非常有限数量的样板选择的 LookAndFeel 系统。单独更改每个组件的外观应该很容易，然后释放其创造力。不幸的是，这很痛苦。恕我直言，框架应该建立在 Swing 之上，而不是创建 JavaFX。

看看[https://github.com/dotxyteam/ReflectionUI](https://github.com/dotxyteam/ReflectionUI)。

前 GUI：http: [//javacollection.net/reflectionui/wp-content/uploads/2017/08/general.png](http://javacollection.net/reflectionui/wp-content/uploads/2017/08/general.png)

# iphone - Xcode: sizeWithFont:constrainedToSize:lineBreakMode: iPad 系统文本颜色问题？

> ID：10134517
> 
> 赞同：1
> 
> 时间：2012-04-13T02:30:11.070
> 
> 标签：iphone, xcode, ipad, fonts, storyboard

我`sizeWithFont:constrainedToSize:lineBreakMode:`用来计算我的 UITableViewcell 所需的高度。下面的代码在 iPhone 和 iPad 上运行良好。

在 IB（故事板）中，我已将文本颜色设置为“深灰色”（我为 iPhone 和 iPad 使用单独的故事板，并且两者都设置了颜色。）。iPhone 表现完美。然而，iPad 没有使用我的深灰色，而是显然使用了默认文本颜色（黑色），我似乎无法更改它。这可能是一个已知的错误还是我做错了什么？

`sizeWithFont:constrainedToSize:lineBreakMode:`有没有办法在我或其他地方以编程方式添加文本颜色？

非常感激。

```
if ([self.storyDescription description]) summary = [self.storyDescription description];

        if (UI_USER_INTERFACE_IDIOM() != UIUserInterfaceIdiomPad) {
            CGSize s = [summary sizeWithFont:[UIFont systemFontOfSize:15] 
                       constrainedToSize:CGSizeMake(self.view.bounds.size.width - 40, MAXFLOAT)  // - 40 For cell padding
                           lineBreakMode:UILineBreakModeWordWrap];
            return s.height + 20; // Add padding
        } else {
            CGSize s = [summary sizeWithFont:[UIFont systemFontOfSize:18] 
                           constrainedToSize:CGSizeMake(self.view.bounds.size.width - 40, MAXFLOAT)  // - 40 For cell padding
                               lineBreakMode:UILineBreakModeWordWrap];
            return s.height + 40; // Add padding
        }

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T05:39:34.557

`sizeWithFont:constrainedToSize:lineBreakMode:`简单地计算一个`NSString`. 由于`NSString`没有颜色的概念，这种方法也不关心颜色。

您应该在`UILabel`检查器的 Xcode Storyboard 编辑器中设置颜色。或者，您可以在数据源/委托方法中设置`UITableViewCell`a`textLabel`和。`detailTextLabel``UITableView`

# c - C 程序 - 错误：类型与 'char line []' [-fpermissive]\ 的先前外部 decl 不匹配

> ID：10134520
> 
> 赞同：-1
> 
> 时间：2012-04-13T02:30:19.807
> 
> 标签：c, gcc

我是c语言的新手。因此，我从 Brian Kernighan 和 Dennis Ritchie 的书（C 编程语言）中复制了代码。我正在复制 pg32 示例。当我收到此错误时：

```
pg32.c: In function ‘int main()’:
pg32.c:16:23: error: type mismatch with previous external decl of ‘char longest []’ [-fpermissive]
pg32.c:7:6: error: previous external decl of ‘char longest [1000]’ [-fpermissive]
pg32.c: In function ‘int getl()’:
pg32.c:33:20: error: type mismatch with previous external decl of ‘char line []’ [-fpermissive]
pg32.c:6:6: error: previous external decl of ‘char line [1000]’ [-fpermissive]
pg32.c: In function ‘void copy()’:
pg32.c:50:20: error: type mismatch with previous external decl of ‘char line []’ [-fpermissive]
pg32.c:6:6: error: previous external decl of ‘char line [1000]’ [-fpermissive]
pg32.c:50:31: error: type mismatch with previous external decl of ‘char longest []’ [-fpermissive]
pg32.c:7:6: error: previous external decl of ‘char longest [1000]’ [-fpermissive] 
```

我重新输入代码 4 次，同样的错误。我不确定，但我认为这是一个遗留问题。

```
#include<stdio.h>

#define MAXLINE 1000

int max;
char line[MAXLINE];
char longest[MAXLINE];

int getl(void);
void copy(void);

int main()
{
  int len;
  extern  int max;
  extern char longest[];

  max =0;
  while((len =getl()) > 0)
    if(len > max){
      max = len;
    copy();
    }

  if(max > 0)
    printf("%s", longest);
  return 0;
}

int getl(void)
{
  int c, i;
  extern char line[];

  for(i =0; i < MAXLINE-1 &&
    (c=getchar()) != EOF && c != '\n'; ++i)
    line[i] =c;

  if(c=='\n'){
    line[i] = c;
    ++i;
  }
  line[i] ='\0';
  return i;
}

void copy(void)
{
  int i;
  extern char line[], longest[];

  i=0;
  while((longest[i] = line[i]) != '\0')
    ++i;
} 
```

我很感激任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T02:50:02.370

您在文件顶部将“line”和“longest”声明为全局变量作为固定长度数组。然后你将它们重新声明为 extern （顺便说一下，不需要这个）作为不确定长度的数组。编译器不喜欢这样，所以有两种解决方案：

1.  改变每一个`extern line[]`到`extern line[MAXLINES]`和每一个`extern char longest[]`到`extern char longest[MAXLINES]`
2.  删除所有`extern`声明，只使用顶部的全局变量

# jquery - 如果可选择的日期在下个月，则在下个月打开

> ID：10134523
> 
> 赞同：1
> 
> 时间：2012-04-13T02:30:33.587
> 
> 标签：jquery

我有 jQuery 日历。我必须做到这一点，以便根据其他变量只能选择星期一或星期二等。现在，如果今天是 2012 年 4 月 27 日，可选择的日子是星期四，并且mindate 设置为 2012 年 4 月 27 日或当前日期，即使那里没有可选择的日期，默认月份仍将是 4 月。

我怎样才能做到这一点，在这种情况下，默认月份是其中有可选日期的月份。

我希望这个数字会有所帮助！

![在此处输入图像描述](../Images/62534fd392451a2c2e298777f992987d.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T04:51:33.103

您可以使用自定义函数来设置`defaultDate`/ `minDate`。在这里，我有一个定义一周中有效日期的数组。如果当前日期不是一个，它会向前移动直到找到一个。您可以为您的特定用途自定义类似的内容：

```
var validDays = [0, 1, 1, 0, 0, 1, 0];

function firstDate() {
    var valDate = new Date();
    valDate.setDate(valDate.getDate() + 14);
    var day = valDate.getDay();
    var i = 0;
    while (validDays[day] != 1 && i < 7) {
        valDate.setDate(valDate.getDate() + 1);
        day = valDate.getDay();
        i++;
    }
    return valDate;
}

function validDate(date) {
    if (validDays[date.getDay()] == 1) {
        return [true, ""];
    } else {
        return [false, ""]
    }
}

$(function() {
    $("#datepicker").datepicker({
        beforeShowDay: validDate,
        minDate: firstDate(),
        defaultDate: firstDate()
    });
}); 
```

演示：http: [//jsfiddle.net/jtbowden/LgLr9/1/](http://jsfiddle.net/jtbowden/LgLr9/1/)

# java - 安卓用户界面不更新

> ID：10134524
> 
> 赞同：1
> 
> 时间：2012-04-13T02:30:57.760
> 
> 标签：java, android

我目前正在创建一个程序，它递归地搜索安卓手机上视频的 SD 卡，然后为每个视频生成哈希。

一切正常，但是当我尝试创建一个`progress bar`时，`progress bar` **直到结束才更新**。

所以基本上进度条的进度*似乎从 0 到 max*，但我可以从日志输出中看出值正在发送到进度条以更新它，进度条只是没有更新。

我的代码如下：

```
 @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        progress = (ProgressBar) findViewById(R.id.progressBar1);
        text = (TextView) findViewById(R.id.tv1);
        Button btnStart = (Button) findViewById(R.id.btnStart);

        btnStart.setOnClickListener(new OnClickListener() {
            public void onClick(View v) {

                recursiveVideoFinder(new File("/sdcard"));
                String strDB3File = getFilesDir().getPath()
                        + "/VideoHashes.db3";
                sql3 = SQLiteDatabase.openDatabase(strDB3File, null,
                        SQLiteDatabase.CREATE_IF_NECESSARY);
                try {
                    String mysql = "CREATE TABLE videohashes (id INTEGER  NOT NULL PRIMARY KEY AUTOINCREMENT, path TEXT NOT NULL, hash TEXT NOT NULL, date TEXT NOT NULL, size INTEGER)";
                    sql3.execSQL(mysql);
                } catch (SQLiteException e) {
                    // TODO: handle exception
                }

                progress.setProgress(0);
                progress.setMax(myFiles.size());

                for (String path : myFiles) {
                    try {
                        String hash = getMD5Checksum(path);
                        ContentValues myInsertData = new ContentValues();
                        myInsertData.put("path", path);
                        myInsertData.put("hash", hash);
                        Date date = new Date();
                        myInsertData.put("date", dateFormat.format(date));
                        myInsertData.put("size", getFileSize(path));
                        sql3.insert("videohashes", null, myInsertData);
                        currVid++;
                        updateProgress();
                        Log.i("Progress", "CurrVid:" + currVid + "  Max:"
                                + progress.getMax());
                        text.append(currVid + " ");

                    } catch (Exception e) {
                        Log.i("File", "File not Found");
                    }
                }

                Cursor cur = sql3.query("videohashes", null, null, null, null,
                        null, null);
                cur.moveToFirst();
                while (!cur.isAfterLast()) {
                    /*
                     * ((TextView) findViewById(R.id.tv1)).append("\n" +
                     * cur.getString(1) + "\n" + cur.getString(2) + "\n" +
                     * cur.getString(3) + "\n" + cur.getString(4) + "\n");
                     */
                    cur.moveToNext();
                }
                cur.close();
            }
        });

    }

    public long getFileSize(String path) {
        File file = new File(path);
        return file.length();

    }

    private void recursiveVideoFinder(File _dir) {

        File[] files = _dir.listFiles();
        if (files == null) {
            return;
        }

        for (File currentFile : files) {
            if (currentFile.isDirectory()) {
                    recursiveVideoFinder(currentFile);
                continue;
            } else {
                for (String aEnd : getResources().getStringArray(
                        R.array.VideoExtensions)) {
                    if (currentFile.getName().endsWith(aEnd)) {

                        Log.d("PS:", currentFile.getPath().toString());

                        String videoFileName = currentFile.getPath().toString();
                        myFiles.add(videoFileName);

                    }
                }

            }
        }
    }

    // Code based off this example:
    // http://stackoverflow.com/questions/304268/getting-a-files-md5-checksum-in-java
    public static byte[] createCheckSum(String filename) throws Exception {
        InputStream fis = new FileInputStream(filename);

        byte[] buffer = new byte[1024];
        MessageDigest complete = MessageDigest.getInstance("MD5");
        int numRead;

        do {
            numRead = fis.read(buffer);
            if (numRead > 0) {
                complete.update(buffer, 0, numRead);
            }
        } while (numRead != -1);

        fis.close();
        // Return MD5 Hash
        return complete.digest();
    }

    public String getMD5Checksum(String filename) throws Exception {
        byte[] b = createCheckSum(filename);
        String result = "";

        for (int i = 0; i < b.length; i++) {
            result += Integer.toString((b[i] & 0xff) + 0x100, 16).substring(1);
        }
        return result;
    }

    public void updateProgress() {
        progress.setProgress(currVid);
        progress.invalidate();
        Log.i("Updating", "Updating Progress Bar");
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T04:24:57.830

为什么要把所有的处理代码都保留在 Onclick() 中。这不是一个好方法。创建一个[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)并使用 publishProgress 来更新你的进度条。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T05:17:29.477

通过覆盖 onResume() 来完成更新任务。在那里启动一个新的计时器线程并继续调用您的函数。当您单击返回时，也可以通过说 timer.cancel() 来完成该线程。因此，每当您进行该活动时，只有计时器才会启动并在回击时退出。[检查此以获取更多信息](https://stackoverflow.com/questions/6890432/onresume-update-textview)

# java - 如何在 Java 中按值复制数组？

> ID：10134525
> 
> 赞同：4
> 
> 时间：2012-04-13T02:31:24.047
> 
> 标签：java, arrays

> **可能重复：**
> [复制数组 Java](https://stackoverflow.com/questions/5785745/make-copy-of-array-java)

我是 Java 的初学者，我需要将一个数组的内容复制到另一个变量中。但是，Java 总是按引用而不是按值传递数组。

如果这令人困惑，这就是我的意思：

```
int test[]={1,2,3,4};
int test2[];
test2=test;
test2[2]=8;
for(int i=0;i<test2.length;i++)
    System.out.print(test[i]); // Prints 1284 instead of 1234 
```

在这个例子中，我不想`test`改变 的值。如果不使用 ArrayList 和 Vectors 等 Java 的任何更高级功能，这是否可能？

编辑：我尝试了 System.ArrayCopy 和 test.clone()，但它们似乎仍然不起作用。这是我的实际代码：

```
temp_image=image.clone();
for(int a=0;a<image.length;a++)
    for(int b=0;b<image[0].length;b++)
        image[a][b]=temp_image[image.length-1-a][b]; 
```

基本上我试图将“图像”颠倒过来。代码中的某处有错误吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-13T02:32:56.170

您需要克隆您的阵列。

```
test2=test.clone(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T02:39:32.813

从 Java 6 开始，您可以使用[Arrays.copyOf](http://docs.oracle.com/javase/6/docs/api/java/util/Arrays.html#copyOf%28int%5B%5D,%20int%29)：

```
test2 = Arrays.copyOf(test, test.length); 
```

对于您要执行的操作， test.clone() 很好。但是如果你想调整大小，copyOf 允许你这样做。我认为就性能而言

[如果您需要， System.arraycopy](http://docs.oracle.com/javase/6/docs/api/java/lang/System.html#arraycopy%28java.lang.Object,%20int,%20java.lang.Object,%20int,%20int%29)会提供更多选项。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T02:41:23.213

因为 test 和 test2 都是指向同一个数组的指针，所以您正在更改两者的值`test`并`test2`使用您的语句`test2[2]=8`

一种解决方案是将 test 的内容复制到 test 2 并更改 test2 的特定索引处的值。

```
 for (int i=0,i<test.length,i++)
        test2[i]=test[i]
    //Now both arrays have the same values

    test2[2]=8

    for (int j=0,j<test.length,j++)
        System.out.print(test[i])
        System.out.println()
        System.out.print(test2[i]) 
```

将输出

```
 1 2 3 4
    1 2 8 4 
```

# c# - 静态方法的空指针错误

> ID：10134530
> 
> 赞同：2
> 
> 时间：2012-04-13T02:32:12.923
> 
> 标签：c#

我从我的一个应用程序中收到了许多似乎没有任何意义的错误报告。我有一个静态类，它有许多从我的代码的其他部分调用的公共静态方法。这些方法中的大多数都在 XML 文档上创建元素。

大多数这些方法的第一行是调用同一类中的私有静态方法，该方法在 XML 文档上创建元素并返回它，如下所示：

```
private static XmlElement BuildCmd(string name)
{
  XmlElement e = OtherClass.NewElement("CMD");
  e.SetAttribute("type", name);
  return e;
}

public static uint SendFlightReport(FlightData info, AircraftInfo aInfo)
{
  XmlElement cmd = BuildCmd("pirep");
  ....
  some other stuff
  ....
} 
```

异常生成的堆栈转储都将调用 BuildCmd 的行报告为有问题的行，这没有任何意义 - 在调用静态方法？

编辑：对于那些询问的人，这里是 OtherClass.NewElement 的代码：

```
public class OtherClass {

   private readonly XmlDocument doc = new XmlDocument();

   public XmlElement NewElement(string name) {
      lock (doc)
        return doc.CreateElement(name);
   }
} 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-04-13T02:39:30.763

我怀疑您正在运行发布版本。由于编译器优化，在这种情况下，行号通常会略有偏差。尝试运行调试版本；您可能会发现异常实际上是在第一行或第二行引发的`.... some other stuff ....`

见，例如

[https://stackoverflow.com/a/114854/385844](https://stackoverflow.com/a/114854/385844)

[http://social.msdn.microsoft.com/Forums/zh/vsdebug/thread/afb7ae70-3e0c-4ea9-86ab-633fe1f9cf6a（VB.NET](http://social.msdn.microsoft.com/Forums/zh/vsdebug/thread/afb7ae70-3e0c-4ea9-86ab-633fe1f9cf6a)，但仍然......）

[http://social.msdn.microsoft.com/Forums/en-US/tfsbuild/thread/6af62159-fe6b-4554-8e46-d2b6c06fa253](http://social.msdn.microsoft.com/Forums/en-US/tfsbuild/thread/6af62159-fe6b-4554-8e46-d2b6c06fa253)

# asp.net - Windows.UserIdentity.Name 之后为空

> ID：10134531
> 
> 赞同：0
> 
> 时间：2012-04-13T02:32:23.687
> 
> 标签：asp.net, web-config, windows-authentication

我在一个嘈杂的 Intranet 应用程序中有一个虚拟目录 - 我需要从父 Web 的 web.config 继承各种 appSettings 等 - 我想解耦运行时依赖项；esp，如果将程序集添加到主站点，我不想破坏每个子应用程序

所以我在 web.config 中添加了“清除”继承的程序集（处理程序和模块），如下...

```
<compilation debug="true">
    <assemblies>
        <clear/> 
```

.. ETC

但是 HttpContext.Current.User.Identity.Name 现在为空（IsAuthenticated = false，Name = ""）。

Windows 用户似乎通过 IIS 的身份验证 OK，如下所示：

```
<system.web>
    <authentication mode="Windows"/>
    <authorization>
      <deny users="?"/>
    </authorization> 
```

有任何想法吗？？

# javascript - 从 Javascript 对象中删除属性

> ID：10134536
> 
> 赞同：3
> 
> 时间：2012-04-13T02:33:53.727
> 
> 标签：javascript

**如何从 Javascript 对象中删除所有属性？**

例如; 如果我有以下“类”，我该如何执行重置并删除其所有属性：

```
function MyObject()
{
   this.type="blah";
   this.name="kkjkj";
}

MyObject.prototype.clearAttribs = function()
{
   // I want to remove name, type etc from 'this'

   // Maybe I can do the following?
   for (var key in this)
      delete this[key];
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T02:46:28.113

你的代码看起来很好。由于[`delete`](https://developer.mozilla.org/en/JavaScript/Reference/Operators/delete#Description)不会从原型*中*删除属性，因此您甚至不需要使用`hasOwnProperty`.

# javascript - 从部分视图重定向 - PUBLISHED 不起作用，但 DEVELOPING 可以

> ID：10134541
> 
> 赞同：1
> 
> 时间：2012-04-13T02:34:23.580
> 
> 标签：javascript, ajax, asp.net-mvc

如果登录成功，我的登录控制器中有一个 javascript 重定向，它会打开我的主页： return JavaScript("window.top.location ='" + returnUrl + "';")

我的登录控制器被 Ajax.BeginForm 内的 sumbit 作为局部视图调用。

在开发（我的 vs2010 上的 F5）时，我的解决方案工作完美，但我发布的版本（我上传到服务器的版本）没有重新渲染一个全新的视图，**而是刷新了我的 targetid 中的 div。**

我的部分查看代码

```
@model Web.Models.LogOnModel
<div id="LogBox2">
@using (Ajax.BeginForm(new AjaxOptions { HttpMethod = "POST", UpdateTargetId = "LogBox2",  }))
{         
<fieldset>...'All textbox capturing data here

            <input type="submit" value="LogOn" />           
</fieldset>
@Html.ValidationSummary(true, "Login was unsuccessful")
}
 </div> 
```

我的控制器代码

```
 [HttpPost]
        public ActionResult LogOn(LogOnModel model, string returnUrl)
        {
            if (ModelState.IsValid)
            {
                if (Membership.ValidateUser(model.UserName, model.Password))
                {
                    FormsAuthentication.SetAuthCookie(model.UserName, model.RememberMe);
                    if (Url.IsLocalUrl(returnUrl) && returnUrl.Length > 1 && returnUrl.StartsWith("/")
                      && !returnUrl.StartsWith("//") && !returnUrl.StartsWith("/\\"))
                    {
                        return JavaScript("location.href ='" + returnUrl + "';");
                    }
                    else
                    {
                        return RedirectToAction("Index", "Home");
                    }
                }
                else
                {
                    ModelState.AddModelError("", "The user name or password provided is incorrect.");
                }
            }

            // If we got this far, something failed, redisplay form
            if (Request.IsAjaxRequest())
            {
                // If an ajax request was made return only the validation errors 
                // instead of the whole page
                return PartialView("LogIn2"); 
            }
            else
            {
                return View();
            }
        } 
```

我真的不明白为什么调试（F5）可以正常工作但未发布。你？提前感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T05:48:57.773

不确定我是否完全理解您的情况。我认为您的作品正在按应有的方式进行；考虑以下场景：表单正在通过 Ajax 提交，并且“returnUrl”为空/无效，然后 div“LogBox2”将使用“Home/Index”行的响应进行更新`return RedirectToAction("Index", "Home");`

如果您的意图是在登录成功时将用户重定向到路径“ *returnUrl* ”或“ *home/index* ”，那么一种解决方案可能是替换该行

```
return RedirectToAction("Index", "Home"); 
```

和

```
return JavaScript("location.href =" + HttpUtility.JavaScriptStringEncode(Url.Action("Index", "Home"), true) + ";"); 
```

您还可以考虑将[jQuery Ajax 与 ASP.NET MVC 一起](https://www.google.com/search?sourceid=chrome&ie=UTF-8&q=AjaxOptions#hl=en&sclient=psy-ab&q=Jquery%20ajax%20with%20aps.net%20mvc&oq=Jquery%20ajax%20with%20aps.net%20mvc&aq=f&aqi=&aql=&gs_l=serp.3...1168890l1178601l0l1179148l30l26l0l4l4l0l335l4209l2j20j3j1l30l0.frgbld.&pbx=1&bav=on.2,or.r_gc.r_pw.r_qf.,cf.osb&fp=9cdb98ddbd527140&biw=1538&bih=815)使用。

# html - 允许用户在 Objective C 中创建和查看 HTML 文件？

> ID：10134548
> 
> 赞同：0
> 
> 时间：2012-04-13T02:35:33.093
> 
> 标签：html, objective-c, ios

我正在尝试制作一个 iOS 应用程序，允许用户创建**无限**量的 HTML 文档并将它们保存到应用程序的文档文件夹中。这有点像一个组合问题，但我如何显示文档字典中的文件。

所以我的两个问题是：

如何显示文档字典中的 HTML 文件

和

如何允许用户创建无限的文件夹和 html 文件

对不起，双重问题...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-13T03:18:41.753

## 将 HTML 和其他文本文件保存到文档目录

首先，您需要知道文档目录的路径：

```
NSArray* paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsPath = [paths objectAtIndex:0]; 
```

您可以在那里创建文档和目录，直至设备存储的限制。但是请注意，只有根目录中的文件才会显示在 iTunes 文档共享中。

所以，如果你有一个 string`htmlContent`和一个 string `htmlFilename`，你可以保存它。请注意您使用的编码；HTML 标头和元标记（如果存在）中的编码应与此处使用的编码匹配。

```
NSString *htmlPath = [documentsPath stringByAppendingPathComponent:htmlFilename];
[htmlContent writeToFile:htmlPath atomically:NO encoding:NSUTF8StringEncoding error:nil]; 
```

## 在您的应用程序中显示 HTML 文件

您可以在`UIWebView`. 假设你有一个叫`webView`，你可以在其中显示任何`NSURL`对象：

```
NSURL *stackOverflowAddress = [NSURL URLWithString:@"http://www.stackoverflow.com"];
[[self webView] loadRequest:[NSURLRequest requestWithURL:stackOverflowAddress]]; 
```

这可以包括您刚刚编写的文件：

```
NSURL *htmlURL = [NSURL fileURLWithPath:htmlPath];
[[self webView] loadRequest:[NSURLRequest requestWithURL:htmlURL]]; 
```

或者，您可以直接将字符串放入其中：

```
[[self webView] loadHTMLString:htmlContent baseURL:nil]; 
```

如果您`UIWebView`在很多功能中使用 a，请花时间阅读[UIWebViewDelegate 协议参考](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIWebViewDelegate_Protocol/Reference/Reference.html)。

## 在 Safari 中打开 HTML

也可以告诉您的应用程序在其他地方打开 URL。这通常会导致 Safari 打开。但是，由于 Safari 无法访问您的应用程序的文档目录，因此当文档保存在本地时，它无法显示文档。

```
[[UIApplication sharedApplication] openURL:stackoverflowAddress]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T02:50:32.330

> 我正在尝试制作一个 iOS 应用程序，允许用户创建无限量的 HTML 文档并将它们保存到文档文件夹中。

HTML 文件只是文本（就像大多数与代码相关的文件一样），因此您希望将其内容作为字符串获取，请使用 NSString 的`+stringWithContentsOfFile`.

> 如何允许用户创建无限的文件夹和 html 文件

至于写作，只要你用路径扩展名.html编写你的字符串，它将是一个完全有效的HTML文件。

编辑，可以找到文档目录的路径

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES); 
NSString *documentsDirectory = [paths objectAtIndex:0]; // Get documents directory 
```

> 如何显示文档字典中的 HTML 文件

HTML 文件可能会显示在 UIWebViews 中，请参阅此[相关问题](https://stackoverflow.com/questions/992348/reading-html-content-from-a-uiwebview)以获取示例。

# php - MongoDB 中的索引如何使查询变慢？

> ID：10134551
> 
> 赞同：3
> 
> 时间：2012-04-13T02:36:07.127
> 
> 标签：php, mongodb

** 更新 **

我发布了一个答案，因为它已被确认是一个问题

** 原来的 **

首先，我很抱歉——我昨天才开始使用 MongoDB，对此我还是很陌生。我有一个非常简单的查询，使用 PHP 我的发现是这样的：

Mongo 版本是 2.0.4，在 CentOS 6.2 (Final) x64 上运行

```
$start = microtime(true);
$totalactive = $db->people->count(array('items'=> array('$gt' => 1)));
$end = microtime(true);
printf("Query lasted %.2f seconds\n", $end - $start); 
```

没有索引，它返回：

```
Query lasted 0.15 seconds 
```

我的数据库中有 280,000 条记录。所以我认为在“项目”上添加索引应该会有所帮助，因为我经常查询这些数据。但令我难以置信的是，在添加索引后，我得到了这个：

```
Query lasted 0.25 seconds 
```

我做错什么了吗？

我用 find 而不是 count 来得到解释，这是输出：

```
> db.people.find({ 'items' : { '$gte' : 1 } }).explain();
{
"cursor" : "BtreeCursor items_1",
"nscanned" : 206396,
"nscannedObjects" : 206396,
"n" : 206396,
"millis" : 269,
"nYields" : 0,
"nChunkSkips" : 0,
"isMultiKey" : false,
"indexOnly" : false,
"indexBounds" : {
    "items" : [
        [
            1,
            1.7976931348623157e+308
        ]
    ]
}
} 
```

如果我将查询更改为“$ne”0，则需要多花 10 毫秒！

以下是收集统计数据：

```
> db.people.stats()
{
"ns" : "stats.people",
"count" : 281207,
"size" : 23621416,
"avgObjSize" : 84.00009957077881,
"storageSize" : 33333248,
"numExtents" : 8,
"nindexes" : 2,
"lastExtentSize" : 12083200,
"paddingFactor" : 1,
"flags" : 0,
"totalIndexSize" : 21412944,
"indexSizes" : {
    "_id_" : 14324352,
    "items_1" : 7088592
},
"ok" : 1
} 
```

我有 1GB 的可用内存，所以我相信索引适合内存。

根据要求，这是人员索引：

```
> db.people.getIndexes()
[
{
    "v" : 1,
    "key" : {
        "_id" : 1
    },
    "ns" : "stats.people",
    "name" : "_id_"
},
{
    "v" : 1,
    "key" : {
        "items" : 1
    },
    "ns" : "stats.people",
    "name" : "items_1"
}
] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T02:53:31.103

拥有索引可能有两个好处：

1.  仅访问集合的一小部分时（因为索引可以满足限制性过滤器）。经验法则小于 10%。

2.  当根本不需要访问集合时（因为所有必要的数据都在索引中，用于过滤和结果集）。这将由“indexOnly = true”指示。

对于“查找”查询，这两种情况都不正确：您正在访问几乎整个集合（281207 中的 206396）并且需要所有字段数据。因此，您将首先浏览索引，然后再浏览几乎整个集合，从而违背了索引的目的。只是阅读整个集合会更快。

我本来希望“计数”查询执行得更好（因为只需通过索引就可以满足）。你也能解释一下吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T03:10:21.760

看这个：

[http://www.mongodb.org/display/DOCS/Indexing+Advice+and+FAQ#IndexingAdviceandFAQ-5.MongoDB%27s%24neor%24ninoperator%27saren%27tefficientwithindexes](http://www.mongodb.org/display/DOCS/Indexing+Advice+and+FAQ#IndexingAdviceandFAQ-5.MongoDB%27s%24neor%24ninoperator%27saren%27tefficientwithindexes)。

这让我考虑了这个解决方案。这个怎么样？

```
$totalactive = $db->people->count() - $db->people->count(array('items'=> array('$eq' => 1))); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-15T13:41:21.010

这被确认是一个错误或需要在 MongoDB 引擎中优化的东西。我在 mongo 邮件列表中发布了这个，并从 Eliot Horowitz 收到了回复

> 这绝对是一个错误，或者至少是可以更好地优化的路径。做了一个案例：[https ://jira.mongodb.org/browse/SERVER-5607](https://jira.mongodb.org/browse/SERVER-5607)

```
Priority:  Major
Fix Version/s: 2.3 desired
Type:  Bug 
```

感谢那些帮助确认这是一个错误的人=）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-13T13:48:43.563

你能提供一个这个集合中的对象的例子吗？“项目”字段是一个数组？如果是这样，我建议您添加一个新字段“itemCount”并在其上放置一个索引。在此字段上执行 $gt 将非常快。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-14T23:11:36.703

这是因为您的查询是近乎完整的集合扫描。查询优化器选择使用索引，而它不应该使用它来获得最佳性能。是的，这是违反直觉的，但这是因为光标正在遍历索引 b 树并获取树指向的文档，如果必须扫描几乎整个树，这比仅遍历集合要慢。

如果你真的需要做这种查询，并且你想将该索引用于其他事情，比如排序，你可以使用`.hint({$natural: 1})`, 告诉查询不要使用索引。

巧合的是，我最近在一篇博文中发布了一个类似的问题：[http ://wes.skeweredrook.com/testing-with-mongodb-part-1/](http://wes.skeweredrook.com/testing-with-mongodb-part-1/)

# php - 处理大型（数千万行）数据集

> ID：10134552
> 
> 赞同：4
> 
> 时间：2012-04-13T02:36:09.053
> 
> 标签：php, mysql, mongodb, database

对于一个简单的 Web 应用程序，主要要求是尽可能快地处理大约 30（10m * 3 个表）百万条记录。我以前没有处理过这么多的数据，所以想从有经验的人那里得到一些建议/建议。

该数据库将保存企业的详细信息。大约 25 个属性将描述一个业务；姓名、地址等。表结构如下。

```
CREATE TABLE IF NOT EXISTS `businesses` (
    `id` bigint(20) NOT NULL AUTO_INCREMENT,
    `type` int(2) NOT NULL,
    `organisation` varchar(40) NOT NULL,
    `title` varchar(12) NOT NULL,
    `given_name` varchar(40) NOT NULL,
    `other_name` varchar(40) NOT NULL,
    `family_name` varchar(40) NOT NULL,
    `suffix` varchar(5) NOT NULL,
    `reg_date` date NOT NULL,
    `main_trade_name` varchar(150) NOT NULL,
    `son_address_l1` varchar(50) NOT NULL,
    `son_address_l2` varchar(50) NOT NULL,
    `son_address_suburb` int(3) NOT NULL,
    `son_address_state` int(2) NOT NULL,
    `son_address_postcode` varchar(10) NOT NULL,
    `son_address_country` int(3) NOT NULL,
    `bus_address_l1` varchar(50) NOT NULL,
    `bus_address_l2` varchar(50) NOT NULL,
    `bus_address_suburb` int(3) NOT NULL,
    `bus_address_state` int(2) NOT NULL,
    `bus_address_postcode` varchar(10) NOT NULL,
    `bus_address_country` int(3) NOT NULL,
    `email` varchar(165) DEFAULT NULL,
    `phone` varchar(12) NOT NULL,
    `website` varchar(80) NOT NULL,
    `employee_size` int(4) NOT NULL,
    PRIMARY KEY (`id`),
    KEY `type` (`type`),
    KEY `phone` (`phone`),
    KEY `reg_date` (`reg_date`),
    KEY `son_address_state` (`son_address_state`),
    KEY `bus_address_state` (`bus_address_state`),
    KEY `son_address_country` (`son_address_country`),
    KEY `bus_address_country` (`bus_address_country`),
    FULLTEXT KEY `title` (`title`),
    FULLTEXT KEY `son_address_l1` (`son_address_l1`),
    FULLTEXT KEY `son_address_l2` (`son_address_l2`),
    FULLTEXT KEY `bus_address_l1` (`bus_address_l1`),
    FULLTEXT KEY `bus_address_l2` (`bus_address_l2`)
) ENGINE=MyISAM; 
```

还会有 2 个像这样的其他表格，原因是每个业务详细信息将在 3 个来源中显示（用于比较目的）。只有一张表会写入。

关于应用程序的使用，

1.  很少写入，大量读取。
2.  10*300万的数据不会超时插入，会先插入。
3.  应用程序不会有很多请求，每秒 <10 个请求。
4.  初始数据加载后，用户将更新这些详细信息。将一个表的数据与其他 2 个表的数据进行比较并更新第一个表中的数据。
5.  会有很多搜索，主要是通过姓名、地址、电话和州。单次搜索将遍历所有 3 个表。搜索需要快速。
6.  计划使用 PHP 构建它

我的问题是，

1.  在一个表中处理 3 个源而不是 3 个表是否值得？
2.  MySQL能提供一个好的解决方案吗？
3.  MongoDB 是否能够使用更少的硬件资源来处理相同的场景？
4.  设置示例数据库进行测试的最佳方法是什么？我购买了一个 Amazon RDS（大）并插入了 10000 条记录并将它们翻倍，直到获得 1000 万条记录。
5.  关于这个主题的任何好读物？

谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-13T02:44:47.363

我无法回答您的直接问题，但我有处理大型数据集的经验。

我要解决的第一件事是大多数用例（在您的案例搜索中）操作将是什么，然后考虑基于此的数据存储/分区。

接下来是测量，测量，再测量。一些数据库系统将与一种操作一起工作，而另一些则与其他操作一起工作。随着数据量的增加和操作复杂性的增加，运行良好的事物可能会开始退化。这就是您测量的原因 - 如果没有充分证据证明您使用的数据库系统如何在这些负载下工作，请不要尝试设计它。

然后迭代地工作以添加更多操作。

不要试图设计一个最适合所有人的方案。随着您的设计和研究得到提炼，您将看到可能需要或可用优化的地方。您可能还会发现，正如我们过去所做的那样，不同类型的缓存和索引可能会在不同的时间出现。

祝你好运 - 听起来像是一个有趣的项目。

# c++ - 尝试通过 Eclipse-AVR 使用 Arduino 的 HardwareSerial

> ID：10134559
> 
> 赞同：1
> 
> 时间：2012-04-13T02:37:18.117
> 
> 标签：c++, eclipse, arduino, avr

我正在尝试移植现在随 Arduino 1.0 IDE 一起提供的硬件串行库。我正在 ATMega2560 处理器上编译并使用简单的“Hello World”示例测试 Arduino USART 库“HardwareSerial”，但我留下了这个奇怪的听起来错误。

它告诉我我是：`attempt[ing] to use poisoned "SIG_USART0_RECV"`......我以前从未听说过这样的错误。我试图找出它的定义，eclipse给了我这个：

`#define SIG_USART0_RECV _VECTOR(25)`发现于`iomxx0_1.h`.

然后从那里`_VECTOR(n)`重定向到`__vector_25`via `#define _VECTOR(N) __vector_ ## N`。但这些都在系统路径中，我认为它们仍然有效，因为当前的 Arduino 库仍在使用它们。

他们为什么要毒害自己的定义？在尝试编译项目之前，我是否需要声明其他内容？

* * *

**编辑：**

`iomxx0_1.h`我在陈述中发现了毒药： `#pragma GCC poison SIG_USART0_RECV`。那么他们为什么要下毒呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T03:04:58.747

SIG_xx 中断向量在几年前已被弃用。您可以在以下位置查看更新的列表：

[AVR-GCC 手册在线-中断向量](http://www.nongnu.org/avr-libc/user-manual/group__avr__interrupts.html)

# drupal - 当作者在 Drupal 7 中设置为空白时，节点被删除

> ID：10134560
> 
> 赞同：1
> 
> 时间：2012-04-13T02:37:21.150
> 
> 标签：drupal, drupal-7

我目前正在使用 Joomlart 模板 JD Fashion 在 Drupal 网站上工作。我已插入使用内容类型作为故事的文章。我不想显示文章的作者姓名以及发布日期和时间。

为此，我只是简单地编辑了节点，扩展了页面底部附近的创作信息部分，并将作者姓名更改为空白。

但是，当我为提升到首页的文章保存此配置时，它在顶部显示“找不到页面”错误，并且首页上的“n/a”出现在第一篇文章的位置。

当我尝试撤消更改时，节点根本不会出现在任何类别中。它也不会出现在已发布或未发布状态。

我确定我刚刚删除了作者信息。

什么地方出了错？他们有什么方法可以解决找不到页面的错误吗？

请帮助我...在此先感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T02:51:15.730

这是您需要做的。不要删除作者，而是去这里：

结构->内容类型->文章并点击编辑

在底部，您将看到“显示设置”

单击此选项并取消选中“显示作者和日期信息”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T01:46:14.527

这是该问题的答案。要删除 Joomla 艺术主题中的作者和日期信息，您必须转到管理-> 网站建设-> 主题-> 您的主题-> 配置-> 配置-> 在这里您将找到“显示帖子信息”-> 取消选中故事或您的内容类型。

# ios - 当应用程序进入后台时，我可以通过更新位置来不断发送网络请求吗？

> ID：10134567
> 
> 赞同：0
> 
> 时间：2012-04-13T02:38:30.900
> 
> 标签：ios

我有一个应用程序需要将用户的位置信息发送到服务器。通过设置“必需的后台模式”，它可以调用didUpdateToLocation。但是我可以在 didUpdateToLocation 中发送网络请求而不被 Apple 拒绝？

感谢您的回答。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T02:45:36.910

这一切都取决于。如果用户完全理解他们的数据将被发送到您的服务器（并保存？）它不会被 Apple 拒绝。但它不能消耗大量电池，用户重新激活它也不能运行超过 24 小时。他们把它放在适当的位置，这样你就不能让人们使用你的应用程序来跟踪某人。

# android - 从列表视图中每一行的按钮获取点击

> ID：10134569
> 
> 赞同：0
> 
> 时间：2012-04-13T02:39:12.233
> 
> 标签：android, listview, hashmap

我生成了`ListView`如下所示

我没有足够的代表来发布图片，你必须破译我的网址：[图片](http://i.stack.imgur.com/iJmd9.jpg)

上图中的*蓝色*`HashMap`行使用以下内容填充：

```
private void showListView(JSONArray rows, JSONArray totals){

final ListView list = (ListView) findViewById(R.id.historylist);
ArrayList<HashMap<String, String>> mylist = new ArrayList<HashMap<String, String>>();
HashMap<String, String> map;
String[] titles = new String[]{"recordID","date","description","num1","num2"};
SimpleAdapter mSchedule = null;

try{

    for(int i=0;i<rows.length();i++){
        map = new HashMap<String, String>();
        for(int n=0;n<allRows.getJSONArray(i).length();n++){
            map.put(titles[n], allRows.getJSONArray(i).getString(n));
        }
        mylist.add(map);
    }

    mSchedule = new SimpleAdapter(
        History.this,
        mylist,
        R.layout.history_row,
        titles,
        new int[] {R.id.textView0, R.id.textView1, R.id.textView2, R.id.textView3, R.id.textView4}
    );

    list.setAdapter(mSchedule);

}catch(Exception e){
    Log.e("Creating ListView", e.toString());
} 
```

}

```
<LinearLayout >

<LinearLayout >
    <LinearLayout >
        <TextView (recordID) />
        <TextView (date) />
        <TextView (num1) />
        <TextView (num2) />
    </LinearLayout>
    <TextView (description) />
</LinearLayout>

<LinearLayout (When this one is clicked) >
    <ImageView />
</LinearLayout> 
```

单击上图中的绿色按钮时，我想获取蓝色行信息。

> （日期，描述，num1，num2）

另外，如果您认为有更好的方法来填充`ListView`，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T05:13:52.760

您将需要通过扩展来实现您自己的自定义适配器[`BaseAdapter`](http://developer.android.com/reference/android/widget/BaseAdapter.html)。在该`getView`方法中，您需要绑定到该`Button`点击事件。我建议有一个实例`OnClickListener`并使用[`AdapterView#getPositionForView`](http://developer.android.com/reference/android/widget/AdapterView.html#getPositionForView%28android.view.View%29). 一旦你有了持有被点击按钮的视图的位置，那么你就可以访问你的数据了。通过[`Adapter#getItem`](http://developer.android.com/reference/android/widget/Adapter.html#getItem%28int%29)或直接来自您的数据源。

# java - Java中的协变返回类型

> ID：10134571
> 
> 赞同：9
> 
> 时间：2012-04-13T02:39:24.243
> 
> 标签：java

以下代码使用 Java 中方法覆盖的概念。

```
package pkg;

import java.util.ArrayList;
import java.util.List;

abstract class SuperClass
{
    abstract public List<String>getList();
}

final class SubClass extends SuperClass
{
    private List<String>list=null;

    @Override
    public ArrayList<String> getList()
    {
        list=new ArrayList<String>();
        list.add("A");
        list.add("B");
        return (ArrayList<String>) list;
    }
}

final public class Main
{
    public static void main(String[] args)
    {
        SuperClass s=new SubClass();
        List<String>list=s.getList();

        for(String str:list)
        {
            System.out.println(str);
        }
    }
} 
```

按照惯例，方法覆盖在超类和子类中使用相同的签名（带有返回类型）。在上面的代码中，`getList()`方法的返回类型为`SuperClass`is `List`，在其子类中的返回类型为`ArrayList`。方法覆盖如何在这里工作？

顺便说一句，很明显这`ArrayList`是`List`接口的实现，但是编译器在覆盖`getList()`方法时如何处理这里的返回类型？

我是否应该相信这样的事情......*被覆盖方法的返回类型被允许是被覆盖方法的返回类型的子类型。*

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-04-13T02:41:57.310

是的。

在早期的 Java 中情况并非如此，但在 Java 5.0 中发生了变化。

> 同一个类中不能有两个方法，其签名仅因返回类型而异。在 J2SE 5.0 发布之前，一个类也确实不能覆盖它从超类继承的方法的返回类型。在本技巧中，您将了解 J2SE 5.0 中允许协变返回类型的新特性。这意味着子类中的方法可以返回一个对象，该对象的类型是该方法返回的类型的子类，在超类中具有相同的签名。此功能消除了对过多类型检查和强制转换的需要。

互联网上不再提供此信息的来源。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-05T08:51:27.077

在面向对象编程中，方法的协变返回类型是在子类中重写该方法时可以用“更窄”类型替换的方法。这是一个相当普遍的范例的著名语言是 C++。自 JDK5.0 发布以来，Java 语言已（部分）允许协变返回类型，因此以下示例无法在以前的版本上编译：

```
 // Classes used as return types:

 class A {
 }

 class B extends A {
 }

 // "Class B is more narrow than class A"
 // Classes demonstrating method overriding:

 class C {
     A getFoo() {
         return new A();
     }
 }

 class D extends C {
     B getFoo() {
         return new B();
     }
 } 
```

更具体地说，协变（从宽到窄）或逆变（从窄到宽）返回类型是指覆盖方法的返回类型更改为与原始覆盖方法的返回类型相关（但不同于）的类型的情况.

两种协变返回类型之间的关系通常是一种允许将一种类型替换为另一种类型的关系，遵循 Liskov 替换原则。

**这通常意味着覆盖方法的返回类型将是被覆盖方法的返回类型的子类型。**上面的例子具体说明了这种情况。如果不允许替换，则返回类型是不变的并导致编译错误。

参考：[https ://en.wikipedia.org/wiki/Covariant_return_type](https://en.wikipedia.org/wiki/Covariant_return_type)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-13T02:43:37.147

对，那是正确的。由于 ArrayList 是 List，因此当原始方法返回 List 时，您可以返回 ArrayList。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-04-27T18:29:34.300

我用 javap 命令检查了 OPs 示例的字节码，发现编译器在 SubClass 类中生成了一个附加方法：

```
//1
public java.util.List getList(); 
```

它调用

```
//2
public java.util.ArrayList getList(); 
```

方法并返回它的结果。

```
SubClass sc=new SubClass();
//the ArrayList getList() will be invoked:
sc.getList();

SuperClass s=...;
//the List getList() will be invoked:
s.getList(); 
```

# performance - 惰性序列突然减速

> ID：10134575
> 
> 赞同：0
> 
> 时间：2012-04-13T02:39:34.957
> 
> 标签：performance, clojure, lazy-sequences

我有这个代码：

```
:history
(cons [t (:latest thing)] (take n (:history thing)) ) 
```

这是为了在我的程序的每次迭代中将最近历史的滚动窗口添加到地图中。我发现，经过一定次数的迭代（约 50 次）后，我的程序会显着且渐进地减速。

而，如果我将代码更改为：

```
:history
(cons [t (:latest thing)] (take n (vec (:history thing))) ) 
```

然后程序在每次迭代中运行的时间稍长（因为正在实现惰性序列），但运行一致并且没有减慢。

作为 Clojure 的新手，我不明白……这与分块序列有关吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T04:13:51.140

我认为程序减速的意思是说“由于您的第一个代码示例执行的可能的缺点操作，随着序列变得更大，这个惰性序列的消耗会减慢”。这是因为当你使用像 cons 这样的惰性操作符构建一个惰性序列时，它会创建一个操作链（函数）来生成序列，并且每次你使用这个惰性序列时都会执行这个操作链，例如：50 个 cons 操作将创建一个 50 个链式函数调用，每次您使用序列时都会执行该函数调用，这显然比拥有 50 个元素的向量并使用它要慢。

在您的第二种情况下，惰性序列将只有 1 个操作（即缺点），其余的将从已经实现的向量（即向量调用）中进行操作

# jquery - Google Charts & JQuery Mobile：setOnLoadCallback 和 ajax 转换？

> ID：10134581
> 
> 赞同：2
> 
> 时间：2012-04-13T02:40:13.457
> 
> 标签：jquery, android, jquery-mobile, google-visualization

我有两页：

[http://dl.dropbox.com/u/7997532/Spentrax/analyze.html](http://dl.dropbox.com/u/7997532/Spentrax/analyze.html)

是一个包含许多图表的页面，使用谷歌图表 api 创建，呈现一些静态虚拟数据。

[http://dl.dropbox.com/u/7997532/Spentrax/debts.html](http://dl.dropbox.com/u/7997532/Spentrax/debts.html)

只是另一个随机页面。

我发现如果你`analyze.html`直接去，图表就会被渲染。如果我转到`debts.html`然后单击指向的链接`analyze.html`，则不会呈现图表。`setOnLoadCallback()`我得出的结论是，这是因为`render()`当 JQuery Mobile 的魔法 ajax 转换`debts.html`变为`analyze.html`. 如果我稍后使用控制台手动启动`render()`，图表确实可以完美呈现。

问题是，对此能做些什么？`render()`如果我的 Ajax 从`debts.html`to转换，我显然需要以某种方式立即触发`analyze.html`，但在我直接转到的情况下，*不要*立即触发并添加到。我可以想到许多使用 javascript 读取 URL 并基于此做出决策的 hacky 解决方案，但是做这些事情的正确方法是什么？`setOnloadCallback()``analyze.html`

# jquery - 如何在 best_in_place 编辑完成后触发事件？

> ID：10134582
> 
> 赞同：3
> 
> 时间：2012-04-13T02:40:23.603
> 
> 标签：jquery, ruby-on-rails-3.1, best-in-place

在显示页面中，我显示了一个周期性事件发生的日期列表，并计算了所有日期的统计信息，例如连续日期之间的最大、最小和平均间隔。

我使用 best_in_place gem 允许就地编辑日期。但是，每次更改日期时，都必须计算统计信息并从服务器重新呈现。

如何将回调函数挂钩到 best_in_place 编辑的完成，以便可以重新渲染统计信息？

这是我在 show.html.erb 中的 Rails 代码

```
<td id="event_date">
  <%= best_in_place @event, :occur_date %>
</td> 
```

在 html 中是

```
<td id="event_date"> 
    <span class='best_in_place' id='best_in_place_event_132_occur_date' data-url='/events/132' data-object='event' data-attribute='occur_date' data-type='input'>2012-03-23</span>
</td> 
```

我尝试了以下咖啡脚本代码：

```
jQuery ->
$("#best_in_place_event_*_occur_date").live 'ajax:complete', (evt, data, status, xhr) ->
  alert "a date has changed" 
```

这似乎不起作用，在我编辑日期（occur_date）后没有任何反应。

任何人都知道我应该如何在成功进行 best_in_place 编辑后触发事件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T01:15:13.403

好吧，看看源代码，似乎 best_in_place 正确地触发了它的 loadSuccessCallback 中的 ajax:success 事件。这意味着您应该能够使用一些 jQuery 将您自己的函数绑定到更改的事件。

```
$(".best_in_place").live 'change', (event) ->
  alert "Hello, World!" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-11T22:45:27.113

至于你的例子：

```
<td id="event_date">
  <%= best_in_place @event, :occur_date, :classes => 'bip_date' %>
</td>

$('.bip_date').bind("ajax:success", function(){
alert("a date has changed")
});
// or: $('.event_data .best_in_place').bind(...) 
```

从[官方自述文件](https://github.com/bernat/best_in_place#binding-to-ajaxsuccess)中：

> 'ajax:success' 事件在成功时触发。
> 
> 使用绑定：

```
$('.best_in_place').bind("ajax:success", function ()
{$(this).closest('tr').effect('highlight'); }); 
```

> 要绑定特定于特定字段的回调，请使用辅助方法中的“类”选项，然后绑定到该类。
> 
> ```
> <%= best_in_place @user, :name, :classes => 'highlight_on_success' %>
> <%= best_in_place @user, :mail, :classes => 'bounce_on_success' %>
> 
> $('.highlight_on_success').bind("ajax:success", function(){bip_date});
> $('.bounce_on_success').bind("ajax:success", function(){$(this).closest('tr').effect('bounce'));}); 
> ```

# java - 将 ItemizedOverlayItem 居中到屏幕中心

> ID：10134587
> 
> 赞同：0
> 
> 时间：2012-04-13T02:40:56.180
> 
> 标签：java, android, map, overlay

我有一个 MapView 并在 onCreate() 方法中实例化了一个 ItemizedOverlayItem。我的问题是，我想将它集中在屏幕上，而不是地图上的 GeoPoint。有没有办法做到这一点？另外，有没有办法检索 OverlayItem 的相对 MapPosition？

非常感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T05:21:03.263

使用下面的线移动到地图的中心。

```
mapView.animateTo(point); 
```

上述点将位于地图视图的中心。

# ruby-on-rails - 如何使用 Active Record 通过 Rails 中的关联获取这些记录？

> ID：10134588
> 
> 赞同：0
> 
> 时间：2012-04-13T02:41:18.527
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, instance-variables

我有 @user 变量，我有资源表，然后我有一个收藏夹表，它只是 user_id 和 resource_id

`@user.resources.each`显然有效

`@user.favorites.first.resource`工作正常，除了我想要所有的资源。

`@user.favorites.resources`不工作

资源.rb

```
 belongs_to :category
  belongs_to :user
  has_many :favorites
  has_many :resource_tags
  has_many :tags, :through => :resource_tags 
```

用户.rb

```
 has_many :resources
  has_many :favorites 
```

最喜欢的.rb

```
 belongs_to :resource
  belongs_to :user 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T05:44:12.517

尝试：

```
@user.favorites.includes(:resource).collect(&:resource) 
```

这应该急切地从所有用户的收藏夹中加载资源，然后收集应该将它们作为数组返回。

# algorithm - 选择算法找到中值，元素到左边和右边

> ID：10134599
> 
> 赞同：3
> 
> 时间：2012-04-13T02:42:12.250
> 
> 标签：algorithm

假设我有一个大小为 n 的未排序数组 A。

如何在线性时间内从原始未排序列表中找到第 n/2、n/2−1、n/2+1 个最小元素？

我尝试在[维基百科](http://en.wikipedia.org/wiki/Selection_algorithm#Linear_general_selection_algorithm_-_Median_of_Medians_algorithm)中使用选择算法（我正在实现基于分区的通用选择算法）。

```
function partition(list, left, right, pivotIndex)
 pivotValue := list[pivotIndex]
 swap list[pivotIndex] and list[right]  // Move pivot to end
 storeIndex := left
 for i from left to right-1 
     if list[i] < pivotValue
         swap list[storeIndex] and list[i]
         increment storeIndex
 swap list[right] and list[storeIndex]  // Move pivot to its final place
 return storeIndex

function select(list, left, right, k)
 if left = right // If the list contains only one element
     return list[left]  // Return that element
 select pivotIndex between left and right //What value of  pivotIndex shud i select??????????
 pivotNewIndex := partition(list, left, right, pivotIndex)
 pivotDist := pivotNewIndex - left + 1 
 // The pivot is in its final sorted position, 
 // so pivotDist reflects its 1-based position if list were sorted
 if pivotDist = k 
     return list[pivotNewIndex]
 else if k < pivotDist 
     return select(list, left, pivotNewIndex - 1, k)
 else
     return select(list, pivotNewIndex + 1, right, k - pivotDist) 
```

但我还没有理解 3 或 4 个步骤。我有以下疑问：

1.  我是否选择了正确的算法，它是否真的能在我的程序的线性时间内工作。我有点困惑，因为它类似于快速排序。
2.  调用函数时从主函数中*选择*，左、右和k的值是多少。考虑我的数组是列表 [1...N]。
3.  我是否必须调用 select 函数 3 次，一次查找 n/2th 最小，另一次查找 n/2+1 th 最小，再调用一次 n/2-1th 最小，还是可以一次完成打电话，如果是，怎么打？
4.  同样在函数选择（第三步）“在左右之间选择pivotIndex”中，我应该为我的程序/目的选择什么pivotIndex 值。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T03:52:26.100

它类似于快速排序，但它是线性的，因为在快速排序中，您需要同时处理枢轴的左侧和右侧，而在快速选择中，您只处理一侧。

初始调用应该是`Select(A, 0, N, (N-1)/2)`如果`N`是奇数；`N`如果是偶数，你需要准确地决定你想要做什么。

要找到中位数和左/右，你可能想调用它来找到中位数，然后只做左边数组组件的最大值和右边组件的最小值，因为你知道一旦中值选择阶段完成，中值左侧的所有元素都将小于它，而右侧的所有元素将大于（或等于）。这是 O(n) + n/2 + n/2 = O(n) 总时间。

有很多方法可以选择枢轴指数。出于偶然目的，中间元素或随机索引可能就足够了。

# sql-server-2008 - 使用具有 IS NULL 或 OR 的过滤器表达式创建唯一索引

> ID：10134601
> 
> 赞同：2
> 
> 时间：2012-04-13T02:42:35.973
> 
> 标签：sql-server-2008, tsql, indexing, non-clustered-index

我正在尝试开发一个唯一索引。

```
CREATE UNIQUE NONCLUSTERED INDEX NCI_NewUnique
ON [NewUnique]([U1])
WHERE (ISNULL([MyField], '') = '') 
```

我的错误是

```
Incorrect WHERE clause for filtered index 'NCI_NewUnique' on table 'NewUnique'. 
```

这是另一种尝试；这个我已经删除了 ISNULL(MyField, '') 部分。为什么这个不能有一个`OR`？

```
CREATE UNIQUE NONCLUSTERED INDEX NCI_NewUnique
ON [NewUnique]([U1])
WHERE (
         ([MyId] IS NULL) 
         OR 
         ([MyId] IS NOT NULL AND [MyField] IS NOT NULL)
      ) 
```

错误是：

```
Incorrect syntax near the keyword 'OR'. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T03:20:01.597

我不知道为什么，但根据[文档](http://msdn.microsoft.com/en-us/library/ms188783.aspx)功能，`or`是不允许的。

```
<filter_predicate> ::= 
    <conjunct> [ AND <conjunct> ]

<conjunct> ::=
    <disjunct> | <comparison>

<disjunct> ::=
        column_name IN (constant ,...n)

<comparison> ::=
        column_name <comparison_op> constant

<comparison_op> ::=
    { IS | IS NOT | = | <> | != | > | >= | !> | < | <= | !< } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-12-17T11:12:03.927

我发现这个问题面临一个问题*，如何在过滤器表达式中使用 ISNULL 或 OR 制作过滤后的唯一索引*。因此，虽然“那是不允许的”是一个有效的答案，但它对我的情况没有帮助。

不过，我确实找到了我的问题的答案，所以这里是为其他像我一样会找到它的人准备的。

您可以使用模式绑定创建视图，将复杂的过滤器放入其中并为视图创建唯一的聚集索引！这是一个 hack，但它可以工作，优化器甚至可以在查询表时选择这个索引。

更多细节在这里：

[https://dba.stackexchange.com/questions/116347/unable-to-create-a-filtered-index-on-a-computed-column](https://dba.stackexchange.com/questions/116347/unable-to-create-a-filtered-index-on-a-computed-column)

# mysql - 使用 mysql 查询获取字符串的最后 5 个字符

> ID：10134609
> 
> 赞同：55
> 
> 时间：2012-04-13T02:44:00.767
> 
> 标签：mysql, varchar

我必须使用 mysql 获取最后 5 个数字。

我的价值观是`YOT-A78514`，`LOP-C4521`...

我只需要最后五个 char 。如何在查询中执行此操作？

* * *

## 回答 #1

> 赞同：125
> 
> 时间：2012-04-13T02:46:14.787

您可以使用[**RIGHT(str,len)**](http://dev.mysql.com/doc/refman/5.5/en/string-functions.html#function_right)函数执行此操作。从字符串**str**返回最右边的**len 个**字符，

 **如下所示：

```
SELECT RIGHT(columnname,5) as yourvalue FROM tablename 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2014-01-11T15:20:44.277

“Right”-function 是一种方法，使用子字符串可能会导致一个不太容易注意到的问题：

```
mysql> select right('hello', 6);
+-------------------+
| right('hello', 6) |
+-------------------+
| hello             |
+-------------------+
1 row in set (0.00 sec)

mysql> select substring('hello', -6);
+------------------------+
| substring('hello', -6) |
+------------------------+
|                        |
+------------------------+
1 row in set (0.00 sec) 
```

但是，如果您不尝试越过字符串的开头，那么子字符串当然可以正常工作：

```
mysql> select substring('hello', -5);
+------------------------+
| substring('hello', -5) |
+------------------------+
| hello                  |
+------------------------+
1 row in set (0.00 sec) 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-04-13T05:53:44.157

`Right`是一个不错的选择，但您也可以`substring`像这样使用-

```
SELECT Substring(columnname,-5) as value FROM table_name 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-09-24T08:33:43.550

```
SELECT row_id
  FROM column_name
WHERE column_value LIKE '%12345'; 
```

当发现“12345”是“column_name”中“column_value”的尾部后缀时，这将返回“row_id”。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-11-26T12:36:10.200

如果你想在一个字符之后获得大量正确的字符：

```
SELECT TRIM( 
    RIGHT(
        database.table.field, 
        (LENGTH(database.table.field) - LOCATE('-',database.table.field)) 
    )
)
FROM database.table; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-07-30T19:49:44.603

**SELECT** **SUBSTR** ('Stringname', -5) **AS**提取字符串；**

# actionscript-3 - as3 Adob e Air 访问 iPad 设备摄像头

> ID：10134616
> 
> 赞同：-1
> 
> 时间：2012-04-13T02:45:13.103
> 
> 标签：actionscript-3, air

有没有办法可以使用 as3 访问 iPad 的相机？

*   我的意思是在应用程序本身内启动相机
*   有能力拍摄并将图像保存到 byteArray 并将图像应用到背景或进行一些操作

我已经做了一些研究，其中大部分只是展示了如何访问 android 设备。感谢您的任何建议或帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-13T02:51:07.883

是的，你绝对可以做到这一点。Flash 的美妙之处在于执行此操作的代码与您在 Android 或 PC 上使用的代码相同。

从字面上看，您可以这样做以将相机连接到 Video 对象：

```
var camera:Camera = Camera.getCamera();
var video=new Video();
video.attachCamera(camera);
this.addChild(video); // 'this' would be a Sprite or UIComponent, etc... 
```

如果你想做一些有用的事情，还有很多事情要做，但是一旦你开始，它就相当简单了 :)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T08:01:07.153

bluebill1049，我不确定你是否得到了你想要的东西，但我确实看到了你对整个班级的要求。我在这篇文章中找到了相同的信息（Jason Sturges 在他的回答中发布的信息）。

[使用适用于 iOS 的 Adob​​e Builder (flex) 拍照](https://stackoverflow.com/questions/11812807/take-photo-using-adobe-builder-flex-for-ios)

与他在这里的回复不同，他对该帖子的回复有一个链接，指向一个关于构建移动应用程序的精彩教程，并且正是从该教程中提取/引用了该代码。它需要包含在该项目/教程中的事件类（event.CameraEvent - 仅几行），因此能够回到源代码非常重要。该来源位于此处：

[http://devgirl.org/files/RIAUnleashed/](http://devgirl.org/files/RIAUnleashed/)

感谢杰森。只是为了让您不必挖掘，这是引用中缺少的事件类：

```
package events
{
    import flash.events.Event;
    import flash.filesystem.File;

    public class CameraEvent extends Event
    {
        public static const FILE_READY:String = "fileReady";

        public var file:File;

        public function CameraEvent(type:String, file:File=null, bubbles:Boolean = true, cancelable:Boolean = true)
        {
            super(type, bubbles, cancelable);
            this.file = file;
        }
    }
} 
```

希望有帮助！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-13T20:47:54.150

使用加载器并不是在 iOS 上访问图像字节的唯一方法。事实证明，数据一开始就已经是 JPEG 格式，因此不需要再次对其进行编码。

只需执行 a`mediaPromise.open()`即可获取字节并直接保存它们。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-13T03:04:36.997

XpenseIt 示例代码提供了这个相机实现：

类：CameraUtil：

```
package utils
{
    import events.CameraEvent;

    import flash.display.BitmapData;
    import flash.display.Loader;
    import flash.display.LoaderInfo;
    import flash.events.Event;
    import flash.events.EventDispatcher;
    import flash.events.MediaEvent;
    import flash.filesystem.File;
    import flash.filesystem.FileMode;
    import flash.filesystem.FileStream;
    import flash.media.CameraRoll;
    import flash.media.CameraUI;
    import flash.media.MediaPromise;
    import flash.media.MediaType;
    import flash.utils.ByteArray;

    import mx.events.DynamicEvent;
    import mx.graphics.codec.JPEGEncoder;

    [Event(name = "fileReady", type = "events.CameraEvent")]
    public class CameraUtil extends EventDispatcher
    {
        protected var camera:CameraUI;
        protected var loader:Loader;
        public var file:File;

        public function CameraUtil()
        {
            if (CameraUI.isSupported)
            {
                camera = new CameraUI();
                camera.addEventListener(MediaEvent.COMPLETE, mediaEventComplete);
            }
        }

        public function takePicture():void
        {
            if (camera)
                camera.launch(MediaType.IMAGE);
        }

        protected function mediaEventComplete(event:MediaEvent):void
        {
            var mediaPromise:MediaPromise = event.data;
            if (mediaPromise.file == null)
            {
                // For iOS we need to load with a Loader first
                loader = new Loader();
                loader.contentLoaderInfo.addEventListener(Event.COMPLETE, loaderCompleted);
                loader.loadFilePromise(mediaPromise);
                return;
            }
            else
            {
                // Android we can just dispatch the event that it's complete
                file = new File(mediaPromise.file.url);
                dispatchEvent(new CameraEvent(CameraEvent.FILE_READY, file));
            }
        }

        protected function loaderCompleted(event:Event):void
        {
            var loaderInfo:LoaderInfo = event.target as LoaderInfo;
            if (CameraRoll.supportsAddBitmapData)
            {
                var bitmapData:BitmapData = new BitmapData(loaderInfo.width, loaderInfo.height);
                bitmapData.draw(loaderInfo.loader);
                file = File.applicationStorageDirectory.resolvePath("receipt" + new Date().time + ".jpg");
                var stream:FileStream = new FileStream()
                stream.open(file, FileMode.WRITE);
                var j:JPEGEncoder = new JPEGEncoder();
                var bytes:ByteArray = j.encode(bitmapData);
                stream.writeBytes(bytes, 0, bytes.bytesAvailable);
                stream.close();
                trace(file.url);
                dispatchEvent(new CameraEvent(CameraEvent.FILE_READY, file));
            }
        }

    }
} 
```

# gearman - 是 PYTHON Gearman Worker 接受多任务吗

> ID：10134617
> 
> 赞同：0
> 
> 时间：2012-04-13T02:45:15.337
> 
> 标签：gearman, python-gearman

例如：我有一个名为“URLDownload”的任务，该任务的功能是从互联网上下载一个大文件。现在我有一个工作进程正在运行，但有大约 1000 个文件要下载。客户端进程很容易创建 1000 个任务，并将它们发送到 Gearman 服务器。

我的问题是工作进程会一个一个地完成任务，或者它会一次接受多个任务，

如果 Worker Process 可以接受多任务，那么如何限制 Worker Process 中的 task-pool-size。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T17:00:41.490

工作人员一次处理一个请求。你有几个选择：

1）您可以运行多个工人（这是最常见的方法）。工人在不处理时坐在 poll() 中，因此该模型运行良好。

2）围绕worker编写一个fork()实现。这样，您可以启动一定数量的工作进程，但不必监视多个进程。

# c# - PUT服务方法示例？

> ID：10134618
> 
> 赞同：0
> 
> 时间：2012-04-13T02:45:22.107
> 
> 标签：c#, wcf, web-services, rest

我觉得问起来像个白痴，但我知道如何构建客户端 PUT 请求我也知道如何为其创建操作合同，但我实际上不知道该服务该怎么做？

例如，如果我要`POST`学生信息，我会这样做：

```
 public void AddStudent(Student student)
    {
        students.Add(student);
    } 
```

但是对于更新或 PUT，当我键入学生时，我看不到任何东西，没有任何看起来可能是它的东西吗？

我知道我首先必须找到我想要更新的学生，这将由 studentID 设置，然后我想要一个字符串来表示我想要更新的任何内容。除了添加或删除，我真的不知道如何实现“更新”。有没有人有任何示例代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T02:53:16.230

您可以将学生作为参数传递

```
public void UpdateStudent(Student student)
{
   var findStudent = students.Where(s => s.studentID == student.studentID).FirstOrDefault();

   if(findStudent != null)
   {
        ///update findStudent values with student values --- like
        findStudent.Name = student.Name;  

   }

} 
```

# python - 增加尾随数字时的字符串操作怪异

> ID：10134622
> 
> 赞同：2
> 
> 时间：2012-04-13T02:46:01.417
> 
> 标签：python, regex, string

我得到了这个代码：

```
myString = 'blabla123_01_version6688_01_01Long_stringWithNumbers'
versionSplit = re.findall(r'-?\d+|[a-zA-Z!@#$%^&*()_+.,<>{}]+|\W+?', myString)

for i in reversed(versionSplit):
    id = versionSplit.index(i)
    if i.isdigit():
        digit = '%0'+str(len(i))+'d'
        i = int(i) + 1
        i = digit % i
        versionSplit[id]=str(i)
        break

final = ''
myString = final.join(versionSplit)
print myString 
```

假设只增加给定字符串的最后一位数字。但是，如果您运行该代码，您会看到如果字符串中的数字与最后一个数字相同，如果您继续运行脚本，它将一个接一个地增加它。谁能帮我找出原因？

预先感谢您的任何帮助

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-13T03:08:28.797

您是否有理由不这样做：

```
prefix, version = re.match(r"(.*[^\d]+)([\d]+)$", myString).groups()
newstring = prefix + str(int(version)+1).rjust(len(version), '0') 
```

笔记：

*   这实际上会正确地“继承”版本号： ("09" -> "10") 和 ("99" -> "100")
*   此正则表达式假定在最后的最终版本子字符串之前至少有一个非数字字符。如果这不匹配，它将抛出一个`AttributeError`. 您可以对其进行重组以引发更合适或更具体的异常（例如，如果`re.match(...)`返回`None`；请参阅下面的评论以获取更多信息）。

相应调整。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T03:05:11.037

问题在于第 5 行的函数的使用。这会返回列表中*第一次*`list.index()`出现的值的索引，从左到右，但代码正在遍历*反向*列表（从右到左）。有很多方法可以解决这个问题，但这里有一个对现有代码所做的更改最少的方法：反向迭代索引（避免反转列表）。

 **```
for idx in range(len(versionSplit)-1, -1, -1):
    i = versionSplit[idx]
    if chunk.isdigit():
        digit = '%0'+str(len(i))+'d'
        i = int(i) + 1
        i = digit % i
        versionSplit[idx]=str(i)
        break 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-13T03:13:25.283

```
myString = 'blabla123_01_version6688_01_01veryLong_stringWithNumbers01'
versionSplit = re.findall(r'-?\d+|[^\-\d]+', myString)

for i in xrange(len(versionSplit) - 1, -1, -1):
    s = versionSplit[i]
    if s.isdigit():
        n = int(s) + 1
        versionSplit[i] = "%0*d" % (len(s), n)
        break

myString = ''.join(versionSplit)
print myString 
```

笔记：

*   `.index()`使用方法来尝试查找字符串是愚蠢的。只需使用递减索引来尝试`versionSplit`. 正如上面@David Robinson 所评论的那样，这就是您的问题所在。

*   不要`id`用作变量名；您正在掩盖内置功能`id()`。

*   此代码使用`*`格式模板，它将接受整数并设置宽度。

*   我简化了模式：要么匹配数字（带有可选的前导减号），要么匹配非数字。

*   我对此进行了测试，它似乎有效。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-13T03:19:00.497

首先，三个注意事项：

1.  `id`是 Python 的保留字；
2.  对于加入，一个更 Pythonic 的习惯用法是`''.join()`，使用文字空字符串
3.  `reversed()`返回一个迭代器，而不是一个列表。这就是为什么我使用`list(reversed())`, 以便`rev.index(i)`以后做。

更正的代码：

```
import re

myString = 'blabla123_01_version6688_01_01veryLong_stringWithNumbers01'
print myString
versionSplit = re.findall(r'-?\d+|[a-zA-Z!@#$%^&*()_+.,<>{}]+|\W+?', myString)

rev = list(reversed(versionSplit))  # create a reversed list to work with from now on

for i in rev:
    idd = rev.index(i)
    if i.isdigit():
        digit = '%0'+str(len(i))+'d'
        i = int(i) + 1
        i = digit % i
        rev[idd]=str(i)
        break

myString = ''.join(reversed(rev))  # reverse again only just before joining
print myString 
```**

# android - Holo 是否有主题，全屏但带有操作栏？

> ID：10134627
> 
> 赞同：26
> 
> 时间：2012-04-13T02:46:39.220
> 
> 标签：android, android-theme

我需要显示一个活动，以使活动保持全屏（无标题栏）但存在操作栏。

应用程序使用 Holo Light 作为其界面。

有这样的风格/主题吗？

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2013-07-10T12:20:45.617

我有同样的“问题”，我所做的基本上是老方法：

```
getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, WindowManager.LayoutParams.FLAG_FULLSCREEN); 
```

这与正常`Theme.Holo`结果相结合，会产生一个带有操作栏但没有通知区域的 UI。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-04-13T02:55:20.340

不幸的是，所有没有标题栏的内置 Holo Light 主题也没有操作栏。 `Theme.Holo.Light.NoActionBar`有标题栏但没有操作栏，`Theme.Holo.Light.NoActionBar.Fullscreen`既没有操作栏也没有标题栏。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-09-16T10:53:16.740

以下是您必须设置的内容：

```
 actionBar.setDisplayHomeAsUpEnabled(false);
    actionBar.setHomeButtonEnabled(false);
    actionBar.setDisplayUseLogoEnabled(false);
    actionBar.setDisplayShowTitleEnabled(false);
    actionBar.setDisplayShowHomeEnabled(false); 
```

祝你好运

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-06-19T09:22:05.600

您可以创建一个继承 Holo Light 并移除标题栏的自定义主题。

将以下内容添加到 res/values/styles.xml

```
<style name="My.Holo.Light.FullScreen" parent="android:Theme.Holo.Light">
    <item name="android:windowFullscreen">true</item>
    <item name="android:windowContentOverlay">@null</item>
</style> 
```

然后将此样式设置为清单 xml 中应用程序的默认主题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-06-20T06:25:34.727

试试这个（有关完整教程，请参阅[http://javatechig.com/android/actionbar-with-custom-view-example-in-android ）：](http://javatechig.com/android/actionbar-with-custom-view-example-in-android)

```
private void actionBar() {
    // remove title
    //    requestWindowFeature(Window.FEATURE_NO_TITLE);
    getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,
        WindowManager.LayoutParams.FLAG_FULLSCREEN);

    ActionBar actionBar = getActionBar();
    actionBar.setBackgroundDrawable(new ColorDrawable(Color.parseColor("#bdbb35")));
    actionBar.show();

    actionBar.setDisplayShowHomeEnabled(false);
    actionBar.setDisplayShowTitleEnabled(false);
    LayoutInflater mInflater = LayoutInflater.from(this);

    View mCustomView = mInflater.inflate(R.layout.custom_actionbar, null);

    //TextView mTitleTextView = (TextView) mCustomView.findViewById(R.id.title_text);
    //  mTitleTextView.setText("My Own Title");

    actionBar.setCustomView(mCustomView);
    actionBar.setDisplayShowCustomEnabled(true);
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-11-09T08:55:16.003

只需使用 Theme.Holo 它是全屏并带有操作栏 :)

# entity-framework - 如何通过依赖注入将过滤器添加到 EF

> ID：10134628
> 
> 赞同：0
> 
> 时间：2012-04-13T02:46:47.440
> 
> 标签：entity-framework, dependency-injection

我想在 ef codefirst 中向 linq 添加一些条件（在哪里）。

```
using (var context = new Context())
{
            var u= context.Users;
            **u.where(my where condition)**
        } 
```

有什么方法可以让我进入所有选择，例如：BeforeSelected？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T05:38:30.510

最简单的方法是在 DbContext 上创建一个包装器。

```
public class EfWrapper:Context
{
 private DbContext _dbContext;

  public EfWrapper(DbContext context){
    _dbContext=context;
  }

  public IEnumerable <User> Users{
     get
     {
        return _dbContext.Users.Where(my where condition);
     }
 }

} 
```

# windows - 扩展我没有来源的现有程序的功能

> ID：10134630
> 
> 赞同：5
> 
> 时间：2012-04-13T02:46:48.077
> 
> 标签：windows, winapi, hook, reverse-engineering

我正在开发一个第三方程序，该程序从一堆不同的现有 Windows 程序中聚合数据。每个程序都有一个通过 GUI 导出数据的机制。最脑残的方法是让我使用 AutoIt 或其他一些 GUI 操作程序通过 GUI 生成提取物来生成提取物。这样做的问题是，当某些自动化程序突然接管时，人们可能正在与计算机进行交互。那不好。我真正想做的是以某种方式让一个程序每天运行一次，然后默默地（即不弹出任何 GUI）从每个程序中导出数据。

我的研究告诉我，我需要挂钩每个应用程序（假设这些应用程序一直在运行）并注入一个自定义 DLL 来触发每个导出。我是否离正确的轨道很近？我是一个相当有经验的软件开发人员，但我对逆向工程或挂钩知之甚少。任何建议或方向将不胜感激。

编辑：我正在尝试管理某种类型的专业人员的可用性。他们的日程安排存储在专有系统中。在他们的许可下，我想在他们的系统上安装一个应用程序，从他们正在使用的任何系统中提取他们的日程安排并将信息上传到中央服务器，以便我可以将该信息呈现给潜在客户。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-13T13:09:43.063

我知道提取所需信息的四种方法，各有优缺点。在你做任何事情之前，你需要知道你创建的任何解决方案都不能保证，事实上如果目标应用程序更新，它也不太可能继续工作。原因是在每种情况下，您都依赖于**实现细节**，而不是用于导出数据的预定义接口。

# 连接 GUI

第一种方法是按照您的建议挂钩 GUI。在这种情况下，您所做的只是从实际用户看到的内容中读取。这通常更容易，因为您正在挂钩明确定义的 WinAPI。一个危险是程序显示的内容与它应该表示的内部数据相比不一致或不完整。

通常，有两种常见的方式来执行 WinAPI 挂钩：

*   DLL 注入。您创建一个 DLL，将其加载到其他程序的虚拟地址空间中。这意味着您对目标的整个内存具有读/写访问权限（可以使用[VirtualProtect获得可写访问权限）。](http://msdn.microsoft.com/en-us/library/windows/desktop/aa366898%28v=vs.85%29.aspx)从这里你可以蹦床被调用来设置 UI 信息的函数。例如，要检查一个窗口是否改变了它的文本，你可能会蹦床[SetWindowText](http://msdn.microsoft.com/en-us/library/windows/desktop/ms633546%28v=vs.85%29.aspx)函数。请注意，每个[控件](http://msdn.microsoft.com/en-us/library/windows/desktop/bb773169%28v=vs.85%29.aspx)都有不同的界面，用于设置它们所显示的内容。在这种情况下，您将挂钩代码调用的函数来设置显示。
*   [设置WindowsHookEx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644990%28v=vs.85%29.aspx)。在幕后，这与 DLL 注入类似，在这种情况下，它实际上只是您扩展/破坏控件接收的消息的控制流的另一种方法。在这种情况下，您要做的是挂钩每个子控件的窗口过程。例如，当一个项目被添加到[ComboBox](http://msdn.microsoft.com/en-us/library/windows/desktop/bb775792%28v=vs.85%29.aspx)时，它会收到一条[CB_ADDSTRING](http://msdn.microsoft.com/en-us/library/windows/desktop/bb775828%28v=vs.85%29.aspx)消息。在这种情况下，您正在挂钩显示更改时收到的消息。

这种方法的一个警告是，它仅在目标使用或扩展 WinAPI 控件时才有效。

# 从 GUI 读取

除了挂钩 GUI，您还可以使用 WinAPI 直接从目标窗口读取。但是，在某些情况下，这可能是不允许的。在这种情况下没有什么可做的，只能尝试看看它是否有效。这实际上可能是最简单的方法。通常，您将发送[WM_GETTEXT](http://msdn.microsoft.com/en-us/library/windows/desktop/ms632627%28v=vs.85%29.aspx)等消息来查询目标窗口当前显示的内容。为此，您需要获取包含您感兴趣的控件的确切窗口层次结构。例如，假设您要读取一个编辑控件，您需要查看窗口层次结构中它上方的父窗口为了获得它的窗口句柄。

# 从内存中读取（高级）

这种方法是迄今为止最复杂的，但如果您能够对目标程序进行完全逆向工程，则最有可能获得一致的数据。这种方法通过您从目标进程中读取内存来工作。这种技术在游戏黑客中非常常用，以添加“功能”并观察游戏的内部状态。

考虑到除了在 GUI 中存储信息之外，程序通常还拥有自己的所有数据的内部模型。当使用的控件是[虚拟](http://msdn.microsoft.com/en-us/library/windows/desktop/bb774735%28v=vs.85%29.aspx#Virtual_ListView_Style)的并且只是查询要显示的数据的子集时尤其如此。这是前两种方法没有多大用处的情况的示例。这些数据通常保存在某种抽象数据类型中，例如列表，甚至可能是数组。诀窍是在内存中找到这个列表并直接读取值。这可以在外部使用[ReadProcessMemory](http://msdn.microsoft.com/en-us/library/windows/desktop/ms680553%28v=vs.85%29.aspx)或通过 DLL 注入在内部完成。难点主要在于两个前提：

*   首先，您必须能够可靠地定位这些数据结构。这样做的问题是代码不能保证在同一个地方，尤其是像[ASLR](http://blogs.msdn.com/b/michael_howard/archive/2006/05/26/address-space-layout-randomization-in-windows-vista.aspx)这样的特性。通俗地说，这有时被称为代码转换。[ASLR 可以通过使用模块基址的偏移量并使用GetModuleHandle](http://msdn.microsoft.com/en-us/library/windows/desktop/ms683199%28v=vs.85%29.aspx)等函数动态获取模块基址来击败。与 ASLR 一样，发生这种情况的一个原因是动态内存分配（例如通过`malloc`）。在这种情况下，您需要找到一个存储指针的堆地址（例如返回`malloc`），取消引用并找到您的列表。该指针将倾向于 ASLR，而不是指针，它可能是双指针、三指针等。
*   您面临的第二个问题是每个列表项都很少是原始类型。例如，您可能会遇到对象列表，而不是字符数组（字符串）列表。您需要进一步对每种对象类型进行逆向工程并了解内部布局（至少能够确定您感兴趣的原始值的偏移量，即它与对象基的偏移量）。更高级的方法围绕着对对象的[vtable](http://msdn.microsoft.com/en-us/magazine/cc301398.aspx)进行逆向工程并调用它们的“API”。

您可能会注意到我无法在此处提供具体的信息。原因在于，就其本质而言，使用此方法需要深入了解目标的内部结构，因此，细节仅由目标的编程方式定义。除非你有逆向工程的知识和经验，否则你不太可能想走这条路。

# 挂钩目标的内部 API（高级）

与上述解决方案一样，您无需挖掘数据结构，而是挖掘内部 API。我在前面讨论 vtables 时简要介绍了这一点。您将尝试查找在修改 GUI 时调用的内部 API，而不是这样做。通常，当修改视图/UI 时，程序将拥有自己的包装函数，而不是直接调用 WinAPI 来更新它，它会调用该函数，然后调用 WinAPI。你只需要找到这个函数并钩住它。这也是可能的，但需要逆向工程技能。您可能会发现您发现自己想调用的函数。在这种情况下，除了能够定位函数的位置外，您还必须对其采用的参数进行逆向工程，

我认为这种方法是先进的。它当然可以做到，并且是游戏黑客观察内部状态和操纵目标行为的另一种常用技术，但很难！

* * *

前两种方法非常适合从 WinAPI 程序读取数据，而且要容易得多。后两种方法允许更大的灵活性。通过足够的工作，您可以阅读目标封装的**任何内容，**但需要很多技巧。

另一个可能与您的案例相关或不相关的关注点是，如果目标都被更新，那么更新您的解决方案以使其工作有多容易。使用前两种方法，更有可能不需要进行任何更改或进行小的更改。使用后两种方法，即使源代码中的微小变化也可能导致您所依赖的偏移量的重定位。处理此问题的一种方法是使用字节签名来动态生成偏移量。前段时间我写了[另一个答案，解决了这是如何完成的。](https://stackoverflow.com/questions/9644717/find-a-function-by-it-signature-in-windows-dll/9646320#9646320)

我所写的只是对可用于您想要实现的目标的各种技术的简要总结。我可能错过了方法，但这些是我所知道并有经验的最常见的方法。由于这些本身就是大主题，因此如果您想获得有关任何特定主题的更多详细信息，我建议您提出一个新问题。请注意，在我讨论过的所有方法中，它们都不会受到外界可见的任何交互的影响，因此您不会遇到任何弹出的问题。正如您所描述的，它将是“沉默的”。

* * *

这是关于绕行/蹦床的相关信息，这是我从我[之前写的答案](https://stackoverflow.com/questions/8865423/how-to-detect-hidden-processes/8865477#8865477)中提取的：

> 如果您正在寻找程序绕道执行其他进程的方法，通常是通过以下两种方式之一：
> 
> *   动态（运行时）绕行 - 这是更常见的方法，也是[Microsoft Detours](http://research.microsoft.com/pubs/68568/huntusenixnt99.pdf)等库所使用的方法。这是一篇相关论文，其中函数的前几个字节被覆盖以无条件地分支到仪器。
> *   （静态）二进制重写 - 对于 rootkit，这是一种不太常见的方法，但被研究项目使用。它允许通过静态分析和覆盖二进制文件来执行绕行。执行此操作的旧的（非公开可用的）Windows 软件包是 Etch。[本文](http://research.microsoft.com/en-us/um/people/alecw/usenix-nt-1997.pdf)给出了它在概念上如何工作的高级视图。
> 
> 尽管 Detours 展示了一种动态迂回的方法，但业界使用的方法不计其数，尤其是在逆向工程和黑客领域。其中包括我上面提到的 IAT 和断点方法。要为这些“指明正确的方向”，您应该查看在研究项目和逆向工程领域进行的“研究”。

# c# - 远程服务器返回错误：(405) Method Not Allowed。WCF REST 服务

> ID：10134632
> 
> 赞同：8
> 
> 时间：2012-04-13T02:48:06.443
> 
> 标签：c#, .net, wcf, rest

这个问题已经在其他地方问过，但这些东西不是我的问题的解决方案。

这是我的服务

```
[WebInvoke(UriTemplate = "", Method = "POST")]
public SampleItem Create(SampleItem instance)
{
    // TODO: Add the new instance of SampleItem to the collection
    // throw new NotImplementedException();
    return new SampleItem();
} 
```

我有这个代码来调用上述服务

```
XElement data = new XElement("SampleItem",
                             new XElement("Id", "2"),
                             new XElement("StringValue", "sdddsdssd")
                           ); 

System.IO.MemoryStream dataSream1 = new MemoryStream();
data.Save(dataSream1);

HttpWebRequest request = (HttpWebRequest)WebRequest.Create("http://localhost:2517/Service1/Create");
request.Method = "POST";
request.ContentType = "application/x-www-form-urlencoded";
// You need to know length and it has to be set before you access request stream
request.ContentLength = dataSream1.Length;

using (Stream requestStream = request.GetRequestStream())
{
    dataSream1.CopyTo(requestStream);
    byte[] bytes = dataSream1.ToArray();
    requestStream.Write(bytes, 0, Convert.ToInt16(dataSream1.Length));
    requestStream.Close();
}

WebResponse response = request.GetResponse(); 
```

我在最后一行得到一个例外：

远程服务器返回错误：(405) Method Not Allowed。不知道为什么会发生这种情况，我也尝试将主机从 VS 服务器更改为 IIS，但结果没有变化。如果您需要更多信息，请告诉我

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-13T10:01:13.397

首先是了解 REST 服务的确切 URL。由于您`http://localhost:2517/Service1/Create`现在已指定，只需尝试从 IE 打开相同的 URL，您应该得到不允许的方法，因为您的`Create`方法是为 WebInvoke 定义的，而 IE 执行 WebGet。

现在确保您的客户端应用程序中的 SampleItem 定义在服务器上的相同命名空间中，或者确保您正在构建的 xml 字符串具有适当的命名空间，以便服务识别样本对象的 xml 字符串可以反序列化回来到服务器上的对象。

我在我的服务器上定义了 SampleItem，如下所示：

```
namespace SampleApp
{
    public class SampleItem
    {
        public int Id { get; set; }
        public string StringValue { get; set; }            
    }    
} 
```

我的 SampleItem 对应的 xml 字符串如下：

```
<SampleItem xmlns="http://schemas.datacontract.org/2004/07/SampleApp" xmlns:i="http://www.w3.org/2001/XMLSchema-instance"><Id>6</Id><StringValue>from client testing</StringValue></SampleItem> 
```

现在我使用以下方法对 REST 服务执行 POST：

```
private string UseHttpWebApproach<T>(string serviceUrl, string resourceUrl, string method, T requestBody)
        {
            string responseMessage = null;
            var request = WebRequest.Create(string.Concat(serviceUrl, resourceUrl)) as HttpWebRequest;
            if (request != null)
            {
                request.ContentType = "application/xml";
                request.Method = method;
            }

            //var objContent = HttpContentExtensions.CreateDataContract(requestBody);
            if(method == "POST" && requestBody != null)
            {
                byte[] requestBodyBytes = ToByteArrayUsingDataContractSer(requestBody);
                request.ContentLength = requestBodyBytes.Length;
                using (Stream postStream = request.GetRequestStream())
                    postStream.Write(requestBodyBytes, 0, requestBodyBytes.Length);                    
            }

            if (request != null)
            {
                var response = request.GetResponse() as HttpWebResponse;
                if(response.StatusCode == HttpStatusCode.OK)
                {
                    Stream responseStream = response.GetResponseStream();
                    if (responseStream != null)
                    {
                        var reader = new StreamReader(responseStream);

                        responseMessage = reader.ReadToEnd();                        
                    }
                }
                else
                {
                    responseMessage = response.StatusDescription;
                }
            }
            return responseMessage;
        }

private static byte[] ToByteArrayUsingDataContractSer<T>(T requestBody)
        {
            byte[] bytes = null;
            var serializer1 = new DataContractSerializer(typeof(T));            
            var ms1 = new MemoryStream();            
            serializer1.WriteObject(ms1, requestBody);
            ms1.Position = 0;
            var reader = new StreamReader(ms1);
            bytes = ms1.ToArray();
            return bytes;
        } 
```

现在我调用上面的方法，如图所示：

```
SampleItem objSample = new SampleItem();
objSample.Id = 7;
objSample.StringValue = "from client testing";
string serviceBaseUrl = "http://localhost:2517/Service1";
string resourceUrl = "/Create";
string method="POST";

UseHttpWebApproach<SampleItem>(serviceBaseUrl, resourceUrl, method, objSample); 
```

我在客户端也定义了 SampleItem 对象。如果要在客户端构建 xml 字符串并通过，则可以使用以下方法：

```
private string UseHttpWebApproach(string serviceUrl, string resourceUrl, string method, string xmlRequestBody)
            {
                string responseMessage = null;
                var request = WebRequest.Create(string.Concat(serviceUrl, resourceUrl)) as HttpWebRequest;
                if (request != null)
                {
                    request.ContentType = "application/xml";
                    request.Method = method;
                }

                //var objContent = HttpContentExtensions.CreateDataContract(requestBody);
                if(method == "POST" && requestBody != null)
                {
                    byte[] requestBodyBytes = ASCIIEncoding.UTF8.GetBytes(xmlRequestBody.ToString());
                    request.ContentLength = requestBodyBytes.Length;
                    using (Stream postStream = request.GetRequestStream())
                        postStream.Write(requestBodyBytes, 0, requestBodyBytes.Length);                    
                }

                if (request != null)
                {
                    var response = request.GetResponse() as HttpWebResponse;
                    if(response.StatusCode == HttpStatusCode.OK)
                    {
                        Stream responseStream = response.GetResponseStream();
                        if (responseStream != null)
                        {
                            var reader = new StreamReader(responseStream);

                            responseMessage = reader.ReadToEnd();                        
                        }
                    }
                    else
                    {
                        responseMessage = response.StatusDescription;
                    }
                }
                return responseMessage;
            } 
```

对上述方法的调用如下所示：

```
string sample = "<SampleItem xmlns=\"http://schemas.datacontract.org/2004/07/XmlRestService\" xmlns:i=\"http://www.w3.org/2001/XMLSchema-instance\"><Id>6</Id><StringValue>from client testing</StringValue></SampleItem>";   
string serviceBaseUrl = "http://localhost:2517/Service1";
string resourceUrl = "/Create";
string method="POST";             
UseHttpWebApproach<string>(serviceBaseUrl, resourceUrl, method, sample); 
```

注意：只需确保您的 URL 正确

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-13T04:06:32.767

您是第一次运行 WCF 应用程序吗？

运行下面的命令来注册 wcf。

```
"%WINDIR%\Microsoft.Net\Framework\v3.0\Windows Communication Foundation\ServiceModelReg.exe" -r 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-10T05:46:21.183

在花了 2 天时间之后，使用 VS 2010 .NET 4.0、IIS 7.5 WCF 和 REST 和 JSON ResponseWrapped，我终于通过阅读“进一步调查时......”来破解它 [https://sites.google.com/site /wcfpandu/有用的链接](https://sites.google.com/site/wcfpandu/useful-links)

Web 服务客户端代码生成的文件 Reference.cs 没有将`GET`方法归因于`[WebGet()]`，因此尝试使用`POST`它们，因此**InvalidProtocol, 405 Method Not Allowed。** 问题是，当您刷新服务引用时，该文件会重新生成，并且您还需要`System.ServiceModel.Web`对 WebGet 属性的 dll 引用。

所以我决定手动编辑 Reference.cs 文件，并保留一份副本。下次我刷新它时，我会合并我的`WebGet()s`背部。

在我看来，这是 svcutil.exe 的一个错误，它没有识别出某些服务方法是`GET`而不仅仅是`POST`，即使 WCF IIS Web 服务发布的 WSDL 和 HELP 确实了解哪些方法是`POST`和`GET`??? 我已经用 Microsoft Connect 记录了这个问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-30T15:54:42.693

当它发生在我身上时，我只是简单地将这个词添加 `post` 到函数名称中，它解决了我的问题。也许它也会对你们中的一些人有所帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-05-15T16:28:03.353

在我遇到的情况下，还有另一个原因：底层代码试图执行[WebDAV](http://www.webdav.org/) PUT。（此特定应用程序可配置为在需要时启用此功能；我不知道该功能已启用，但未设置必要的 Web 服务器环境。

希望这可以帮助其他人。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-08-19T02:43:18.550

我已解决的问题，因为您的服务受登录凭据和用户名和密码的保护，请尝试在请求中设置用户名和密码，它将起作用。祝你好运！

# php - PHP的数组类型作为数据结构有什么特点？

> ID：10134636
> 
> 赞同：9
> 
> 时间：2012-04-13T02:48:49.770
> 
> 标签：php, arrays, dictionary, data-structures

作为一名 PHP 程序员，我几乎所有事情都使用数组。我知道[SPLFixedArray](http://php.net/manual/en/class.splfixedarray.php)在某些情况下可能很有用，而且我知道[PHP 数组的内存效率不是很高](http://nikic.github.com/2011/12/12/How-big-are-PHP-arrays-really-Hint-BIG.html)，但我很少遇到他们难以满足我需要的实际情况。

这与我在 Java 中工作时形成鲜明对比的是，我发现准确了解我正在使用的数据结构以及每种数据结构的优缺点绝对至关重要。如果有人建议我对 Java 中的所有内容都使用 LinkedHashMap，他们会被笑出大楼。

那么我们如何才能在 PHP 中摆脱这种快速而松散的工程呢？PHP 数组的基本细节是什么？它通常被描述为“有序映射”，但这留下了很多实现留给猜测。

*PHP 数组特别擅长*哪些用例？PHP 数组实际上*很不擅长*的一些看似简单的用例有哪些？

例如，我假设对密集的整数键数组（例如`$arr = array('a','b','c','d','e');`）比有序哈希映射有更好的处理，但是密集和稀疏之间的边界在哪里？一旦我引入一个无序键，数组的效率是否会大大降低，比如`$arr[10] = 'f';`？怎么样`$arr[1000000] = 'g';`？我假设 PHP 不会填充大约 100 万个插槽，但如果它是一个隐藏的链表，那么`$arr[rand()] = rand();`重复调用可能必须在每次插入后进行一些重新排序？

欢迎任何探索 PHP 数组底层细节的答案，即使它没有解决我提出的具体问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T21:44:34.817

PHP 数组的基本问题是它们是两种不同数据类型的混搭：数组和映射。Javascript 或 Python 中的数组是简单的有序列表，从 0 开始按数字索引。非常易于理解和使用。地图（又名字典）是（通常是无序的）键值对的集合。同样，非常易于理解和使用。

PHP 数组既可以是两者，也可以两者兼而有之，具体取决于您对它们的处理方式，并且使用 PHP 的数组函数的某些操作可能会导致它们以意想不到的方式运行。数组键可以是（例如）字符串或整数，但字符串键不能是数字，因为无论您做什么，PHP 都会强制将其转换为整数。这可能会在（例如）将数据与 JSON 相互转换时产生问题，因为您最终可能会得到多个不同类型的相似数字键。

PHP 的开发人员应该保持这两种数据类型不同。使用数组表示法制作动态地图可能很方便，但他们不应该这样做。我不是 Python 的忠实粉丝（......但是），但列表和映射之间的正式区别是他们肯定比 PHP 做得更好的一件事。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T02:54:14.600

PHP 数组在建模任意空间坐标方面非常出色。您可以很容易地创建 perlin 噪声值的缓存 - 正值、负值等。

PHP 数组非常适合表示配置对象。灵活的键类型使这一切变得轻而易举。

PHP 数组让您对键和索引之间的区别感到困惑。非常糟糕。

PHP 数组通常比较慢——尽管它可能是 PHP 本身，而不是真正的数组——并且总是给你比你真正需要的更多的选择。它导致了像这样一个可怕的问题：

[PHP：迭代两个并行数组的最佳方法？](https://stackoverflow.com/questions/10132210/php-best-way-to-iterate-two-parallel-arrays)

看看他的阵法。他们是……他们是什么？任意参数列表？

**php数组也很擅长的另一件事！**

```
$class->call('func', Array(..params..)); 
```

# c++ - Valgrind 挂起以分析多线程程序

> ID：10134638
> 
> 赞同：4
> 
> 时间：2012-04-13T02:49:59.573
> 
> 标签：c++, multithreading, debugging, valgrind

我有一个在多核机器上运行的多线程程序（在 Linux 平台上使用 Pthreads 在 C 中实现）。我正在使用带有 --memcheck 选项的 ValGrind 来查找我的代码中存在的一些内存问题。但它挂起。为了对问题进行完整的概述，这里是背景。

代码在开始时有一些顺序部分作为初始化的一部分，后来它创建了 8 个线程（使用 Pthread API）和梯级完成。一段时间后，我的代码转储了“核心”。我使用了 GDB，它给出了以下跟踪。

```
======= Backtrace: =========  
/lib/tls/i686/cmov/libc.so.6[0xb7cd47cd]  
/lib/tls/i686/cmov/libc.so.6(cfree+0x90)[0xb7cd7e30]  
/home/kumar/CycleSim/slack_cp/sim-outorder[0x819a6c9]  
/home/kumar/CycleSim/slack_cp/sim-outorder[0x8167e3e]  
/home/kumar/CycleSim/slack_cp/sim-outorder[0x804f5e4]  
/lib/tls/i686/cmov/libpthread.so.0[0xb7f8c31b]  
/lib/tls/i686/cmov/libc.so.6(clone+0x5e)[0xb7d3c57e]  
======= Memory map: ========  
08048000-081b5000 r-xp 00000000 08:11 11813248  
/home/kumar/CycleSim/slack_cp/sim-outorder  
081b5000-081b8000 rw-p 0016c000 08:11 11813248  
/home/kumar/CycleSim/slack_cp/sim-outorder  
081b8000-08549000 rw-p 081b8000 00:00 0          [heap]  
ab9fd000-ab9fe000 ---p ab9fd000 00:00 0  
ab9fe000-ac1fe000 rw-p ab9fe000 00:00 0  
ac1fe000-ac1ff000 ---p ac1fe000 00:00 0  
ac1ff000-ac9ff000 rw-p ac1ff000 00:00 0  
ac9ff000-aca00000 ---p ac9ff000 00:00 0  
aca00000-ad2cb000 rw-p aca00000 00:00 0  
ad2cb000-ad300000 ---p ad2cb000 00:00 0  
ad3bf000-ad3c0000 ---p ad3bf000 00:00 0  
ad3c0000-adbc0000 rw-p ad3c0000 00:00 0  
adbc0000-adbc1000 ---p adbc0000 00:00 0  
adbc1000-ae3c1000 rw-p adbc1000 00:00 0  
ae3c1000-ae3c2000 ---p ae3c1000 00:00 0  
ae3c2000-aebc2000 rw-p ae3c2000 00:00 0  
aebc2000-aebc3000 ---p aebc2000 00:00 0  
aebc3000-b2e7d000 rw-p aebc3000 00:00 0  
b2e7d000-b2e7e000 ---p b2e7d000 00:00 0  
b2e7e000-b367e000 rw-p b2e7e000 00:00 0  
b367e000-b367f000 ---p b367e000 00:00 0  
b367f000-b7c6d000 rw-p b367f000 00:00 0  
b7c6d000-b7da8000 r-xp 00000000 08:01 12895490   /lib/tls/i686/cmov/libc-2.5.so  
b7da8000-b7da9000 r--p 0013b000 08:01 12895490   /lib/tls/i686/cmov/libc-2.5.so  
b7da9000-b7dab000 rw-p 0013c000 08:01 12895490   /lib/tls/i686/cmov/libc-2.5.so  
b7dab000-b7dae000 rw-p b7dab000 00:00 0  
b7dae000-b7dde000 r-xp 00000000 08:21 3828021    /usr/lib/libgslcblas.so.0.0.0  
b7dde000-b7ddf000 rw-p 0002f000 08:21 3828021    /usr/lib/libgslcblas.so.0.0.0  
b7ddf000-b7f7d000 r-xp 00000000 08:21 3828022    /usr/lib/libgsl.so.0.9.0  
b7f7d000-b7f87000 rw-p 0019d000 08:21 3828022    /usr/lib/libgsl.so.0.9.0  
b7f87000-b7f9a000 r-xp 00000000 08:01 12895516  
/lib/tls/i686/cmov/libpthread-2.5.so  
b7f9a000-b7f9c000 rw-p 00013000 08:01 12895516  
/lib/tls/i686/cmov/libpthread-2.5.so  
b7f9c000-b7f9f000 rw-p b7f9c000 00:00 0  
b7f9f000-b7fc4000 r-xp 00000000 08:01 12895498   /lib/tls/i686/cmov/libm-2.5.so  
b7fc4000-b7fc6000 rw-p 00024000 08:01 12895498   /lib/tls/i686/cmov/libm-2.5.so  
b7fc9000-b7fd4000 r-xp 00000000 08:01 12861504   /lib/libgcc_s.so.1  
b7fd4000-b7fd5000 rw-p 0000a000 08:01 12861504   /lib/libgcc_s.so.1  
b7fd5000-b7fd9000 rw-p b7fd5000 00:00 0  
b7fd9000-b7ff2000 r-xp 00000000 08:01 12861461   /lib/ld-2.5.so  
b7ff2000-b7ff4000 rw-p 00019000 08:01 12861461   /lib/ld-2.5.so  
bf8a0000-bf8b5000 rw-p bf8a0000 00:00 0          [stack]  
ffffe000-fffff000 r-xp 00000000 00:00 0          [vdso] 
```

虽然我使用了 -g 选项并且没有 O 标志，但它并没有给出问题所在的确切代码位置。我

在互联网上搜索后，我明白了，这是因为我正在破坏记忆。在数组中写入数据越界（是的，我使用的是大数组，但在访问数组中的每个元素之前我会明确检查）或访问非法堆内存。但是由于代码很大，我无法仅仅看它。所以我求助于 ValGrind 来看看内存损坏发生在哪里。我用 ValGrind 运行代码，它运行良好，直到代码的顺序部分，但是当涉及到并行部分（Pthread 创建部分）时，它什么也没做。在“top -H -p pid”的帮助下，我看到所有线程都已创建，但它们处于睡眠模式。我运行了很长时间的原始代码（没有 valgrind）没有挂起（但我不能保证它没有死锁）。

谁能指出我的文件或类似问题。它是 ValGrind 版本 2。机器是 i686，Linux 操作系统。

谢谢 DL 库马尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T23:34:42.327

也许您可以 [在多线程套接字程序 Valgrind 强制应用程序在单核上运行时检查这个 valgrind 停顿](https://stackoverflow.com/questions/8663148/valgrind-stalls-in-multithreaded-socket-program) ，不确定这是否会导致您的情况出现问题。

# javascript - 从 Rails link_to 调用 jQuery 函数

> ID：10134639
> 
> 赞同：8
> 
> 时间：2012-04-13T02:49:59.943
> 
> 标签：javascript, jquery, ruby-on-rails, link-to

我有一个创建评论列表的 ruby​​ 循环。

我想知道在这种情况下是否可以将 jQuery 函数附加到 Rails link_to 助手？

```
 <% @video.phrases.each do |phrase| %> 
    <div class = "span4" id ="comment" ><%= phrase.content %></div><a id ="ff"  ><%= image_tag("ff.png", :size=> "32x32" )%></a>
    <% end %> 
```

我希望有类似的东西

```
 <% @video.phrases.each do |phrase| %> 
    <div class = "span4" id ="comment" ><%= phrase.content %></div><%= link_to (image_tag("ff.png", :size=> "32x32" ), html => {<script>$("#video_div").html('CONTENTS OF HTML');</script>} :remote => true %>
    <% end %> 
```

我知道这行不通，但我想知道有没有一种简单的方法来实现这种功能？

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-13T03:27:28.340

你可以通过两种方式做到这一点。

首先是在 link_to 上添加一个 html 属性：

```
<% @video.phrases.each do |phrase| %> 
  <div class = "span4" id ="comment" >
    <%= phrase.content %>
  </div>
  <%= link_to (image_tag("ff.png", :size=> "32x32" ), html => {:onclick => "$('#video_div').html('CONTENTS OF HTML');"} :remote => true %>
<% end %> 
```

第二个是将Javascript与Ruby分开：

```
<% @video.phrases.each do |phrase| %> 
  <div class = "span4" id ="comment" >
    <%= phrase.content %>
  </div>
  <%= link_to (image_tag("ff.png", :size=> "32x32" ) :remote => true %>
<% end %>

<script type="text/javascript">
  $('a').click(function(){
    $("#video_div").html('CONTENTS OF HTML');
  );
</script> 
```

如果您想要链接标签的内容，请替换`'CONTENTS OF HTML'`为`$(this).html()`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-13T07:42:03.790

此外，我实际上发现了 Rails link_to_function 助手，并能够通过以下方式实现所需的行为：

```
<% @video.phrases.each do |phrase| %> 
 <div class = "span4" id ="comment" ><%= phrase.content %></div><a id ="ff">
  <%= link_to_function image_tag("ff.png", :size=> "32x32" ), "use_comment('#{phrase.comment}')"%>
 </a> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-13T03:47:08.583

您可能想要使用事件委托，因为您似乎会创建大量评论。

因此，从赠款中借用如下：

```
<% @video.phrases.each do |phrase| %> 
  <div class = "span4" id ="comment" >
    <%= phrase.content %>
  </div>
  <%= link_to (image_tag("ff.png", :size=> "32x32" ) :remote => true %>
<% end %> 
```

```
<script type="text/javascript">
  $("#comment-wrapper-name-here").on("click", "a", function() {
    $("#video_div").html('CONTENTS OF HTML');
  );
</script> 
```

# wordpress - Wordpress `wp_mail` 失败并出现 HTTP 错误 500

> ID：10134644
> 
> 赞同：0
> 
> 时间：2012-04-13T02:50:37.617
> 
> 标签：wordpress

我在 IIS6 上运行 PHP 5.x 和 fastcgi 的 Windows 2003 32 位上使用 WordPress 3.0.1。

我正在使用 WordPress 的*Contact Form 7*插件，并在提交时收到 HTTP 500 错误。*使用Configure-Smtp*插件发送测试邮件时，我也收到 HTTP 500 错误。在这两种情况下，我都将其缩小到了`wp_mail`界限。

我可以在同一个网站上创建一个 .php 页面并使用 php 邮件功能发送电子邮件，所以我很确定 PHP、IIS 和 SMTP 都可以正常工作。

Firebug 并没有给我太多有用的信息——如果有帮助的话，我可以粘贴帖子和响应标题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T14:10:19.017

尝试从全新安装的 WordPress 重新上传 wp-admin 和 wp-includes 文件夹。可能是你丢失了一些文件！

# android - 嗯？为什么 playEarcon() 不产生 onUtteranceCompleted()？

> ID：10134646
> 
> 赞同：2
> 
> 时间：2012-04-13T02:51:00.153
> 
> 标签：android, text-to-speech

我拥有的一本 Android 书籍指出，使用`TextToSpeech.playEarcon()`比播放音频文件（使用 MediaPlayer）更可取，因为：

> 我们不必确定播放声音提示的合适时机并依靠回调来获得正确的时机，而是可以将我们的耳标在我们发送到 TTS 引擎的文本中排队。然后我们知道我们的 earcons 将在适当的时间播放，我们可以使用相同的路径将我们的声音传递给用户，包括 **onUtteranceCompleted()**回调让我们知道我们在哪里。

但是我对此的简短实验表明情况**并非**如此：

```
String utteranceId = String.valueOf(utteranceNum++);
params.put(TextToSpeech.Engine.KEY_PARAM_UTTERANCE_ID, utteranceId);
params.put(TextToSpeech.Engine.KEY_PARAM_STREAM, String.valueOf(AudioManager.STREAM_MUSIC));
tts.speak("FIRST part of sentence", TextToSpeech.QUEUE_ADD, params);

utteranceId = String.valueOf(utteranceNum++);
params.put(TextToSpeech.Engine.KEY_PARAM_UTTERANCE_ID, utteranceId);
params.put(TextToSpeech.Engine.KEY_PARAM_STREAM, String.valueOf(AudioManager.STREAM_MUSIC));
tts.playEarcon("[fancyring]", TextToSpeech.QUEUE_ADD, params);

utteranceId = String.valueOf(utteranceNum++);
params.put(TextToSpeech.Engine.KEY_PARAM_UTTERANCE_ID, utteranceId);
params.put(TextToSpeech.Engine.KEY_PARAM_STREAM, String.valueOf(AudioManager.STREAM_MUSIC));
tts.speak("SECOND part of sentence", TextToSpeech.QUEUE_ADD, params); 
```

当我检查来自[onUtteranceCompleted()](http://developer.android.com/reference/android/speech/tts/TextToSpeech.OnUtteranceCompletedListener.html)的日志时，我只看到 utteranceIds 播放的`tts.speak()`，而不是播放的`tts.playEarcon()`。

为什么会出现这种差异？有解决方法吗？

**PS**冒着说明显而易见的风险：所有三个话语都以正确的顺序播放。只有[onUtteranceCompleted()](http://developer.android.com/reference/android/speech/tts/TextToSpeech.OnUtteranceCompletedListener.html)出于某种原因没有被调用`tts.playEarcon()`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T16:48:10.697

Answering myself. The incredibly long and very detailed documentation about [TextToSpeech.OnUtteranceCompletedListener](http://developer.android.com/reference/android/speech/tts/TextToSpeech.OnUtteranceCompletedListener.html) reads (the emphasis is mine):

> Called when an utterance has been **synthesized**.

An earcon is *never* a result of synthesization, so of course [onUtteranceCompleted()](http://developer.android.com/reference/android/speech/tts/TextToSpeech.OnUtteranceCompletedListener.html) will *never* be called for it. This is by design.

Which gets us back to a new question: If there is no advantage to earcons over playing .mp3 files (using MediaPlayer), why use earcons at all?

# xml - 在 NSXMLElement 的属性值中编码换行符

> ID：10134649
> 
> 赞同：1
> 
> 时间：2012-04-13T02:51:19.277
> 
> 标签：xml, cocoa, nsxmlparser, nsxmldocument, nsxmlelement

我正在读写的 XML 数据库的注释字段存储为 NSXMLElement 的属性。一个条目包含换行符 (0x0a) 字符。这些由我正在解析的文档中的非 NSXML 编码器编码，`&#xA;`并由 NSXML 正确解析。它们导致 NSString 包含内存中的 unicode 值 0x0a 0x00 （英特尔字节排序）。

例如：

```
<INFO BITRATE="192000" GENRE="Podcast" COMMENT="Test &amp; More Test &#xA;&#xA;After the Line Feeds"</INFO> 
```

当将此 NSString 作为 NSXMLElement 属性的值写回时，它不会被编码回并导致以下内容输出到 xml 文件：

```
 <INFO BITRATE="192000" GENRE="Podcast" COMMENT="Test &amp; More Test 

After the Line Feeds"</INFO> 
```

再次重新读取文件时，当然不会正确解析。

似乎节点选项像`NSXMLNodePreserveCharacterReferences`或`NSXMLNodePreserveEntities`应该是要走的路，但它似乎没有任何帮助。

我一定错过了显而易见的事情，但我整天都被困在这上面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T16:42:35.353

与 Apple 核实，这是 NSXMLDocument 的一个已知问题，现在已作为错误报告提交。

建议的解决方法包括暂时使用 libxml2。

如果我在未来的版本中看到这个问题，我会发表评论。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2018-09-21T08:08:15.333

苹果 说：

> 名称中带有“Preserve”的选项仅在解析 XML 的外部源时适用；它们对以编程方式创建的节点对象没有影响。其他选项用于 NSXMLDocument 的初始化和输出方法；有关详细信息，请参阅 NSXMLDocument 参考文档。`它对我不起作用，我认为这是一个错误。

我用 KissXML 解决了这个问题。

# java - 向LinkedList添加元素时并发修改错误

> ID：10134651
> 
> 赞同：1
> 
> 时间：2012-04-13T02:51:58.680
> 
> 标签：java

我有一个 LinkedList 对象列表。

```
 List<LinkedList<File1>> backup = new ArrayList<LinkedList<File1>>(); 
```

LinkedList 包含一些元素。我需要通过单击按钮动态添加其他元素。在执行此操作时，我遇到了并发修改错误。我真的不明白为什么会弹出这个错误。这是代码：

```
private void jButton5ActionPerformed(java.awt.event.ActionEvent evt)      
{                                         
    // When JOIN button is clicked
    int parent_node,dist_node;
    // List<File1> temp_list = new ArrayList<File1>();
    File1 f_new = new File1();
    parent_node = Integer.parseInt(jTextField4.getText());
    dist_node = Integer.parseInt(jTextField5.getText());
    LinkedList<File1> tmp_bk = backup.get(parent_node);
    System.out.println("parent node : " + parent_node);
    System.out.println("dist node : " + dist_node);
    System.out.println("no of lists : " + backup.size());
    f_new.nod = backup.size();
    f_new.dist = dist_node;
    // temp_list.add(f_new);
    tmp_bk.add(f_new);

    ListIterator itr = it_bk.get(parent_node);
    while(itr.hasNext())
    {
        File1 f = (File1)itr.next();
        System.out.println("NODE : " + f.nod + "DIST : " + f.dist);
    }

} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-13T02:55:54.017

这可能是因为您正在编辑列表，然后尝试使用原始迭代器。集合 API[不允许这样做](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/ConcurrentModificationException.html)。您需要在编辑列表后创建新的迭代器。

> 例如，通常不允许一个线程在另一个线程对其进行迭代时修改 Collection。一般来说，在这些情况下，迭代的结果是不确定的。如果检测到此行为，某些迭代器实现（包括 JRE 提供的所有通用集合实现的那些）可能会选择抛出此异常。这样做的迭代器被称为快速失败迭代器，因为它们快速而干净地失败，而不是在未来不确定的时间冒着任意的、非确定性的行为的风险。
> 
> **请注意，此异常并不总是表示对象已被不同的线程同时修改。如果单个线程发出一系列违反对象约定的方法调用，则该对象可能会抛出此异常。例如，如果线程在使用快速失败迭代器迭代集合时直接修改了集合，则迭代器将抛出此异常。**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T03:49:33.963

首先，如果你真的希望人们关注你的问题，你应该帮助他们用标准的英语清楚地提出问题。

其次，您应该提供一个指示，说明您在代码中的确切位置获得了 ConcurrentModificationError。

最后，**it_bk**是什么？它只是显示在您的代码中，没有任何解释。如果它是 ListIterators 的 ArrayList，那么它的 parent_node-th 元素肯定可能处于不确定 hasNext() 或 next() 是否安全的状态。我猜你用你的**tmp_bk.add(f_new);修改了底层集合。**所以一个预先存在的迭代器担心它的不变量可能会被违反。

**一般建议：**不要创建和保留迭代器（或它们的集合）。当你想要一个迭代器时，创建它，使用它，然后放弃它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T04:12:58.130

JDK 1.5 中的 java.lang.Colletions 未同步。在早期版本（jdk 1.4）中，你不会发现这个问题。

这些问题有多种解决方案，您需要根据您的用例明智地选择其中一种。

*   解决方案 1：可以使用 list.toArray() 将列表转换为数组并在数组上进行迭代。如果列表很大，不建议使用此方法。

*   答案 2：通过将代码包装在同步块中，可以在迭代时锁定整个列表。如果应用程序高度并发，这种方法会对应用程序的可伸缩性产生不利影响。

*   答案 3：JDK 1.5 为您提供了 ConcurrentHashMap 和 CopyOnWriteArrayList 类，它们提供了更好的可伸缩性，并且 ConcurrentHashMap.iterator() 返回的迭代器在保持线程安全的同时不会抛出 ConcurrentModificationException。

*   答案 4：通过引用基础集合“myStr”的迭代器“it”删除当前对象。Iterator 对象为此提供了 it.remove() 方法。

# android - Android：米娜客户端 ClassNotFoundException

> ID：10134652
> 
> 赞同：1
> 
> 时间：2012-04-13T02:52:27.697
> 
> 标签：android, serialization, classpath, deserialization, classnotfoundexception

我遇到了一个问题，当 android 上的 Mina 客户端尝试反序列化一个对象时，发生了 ClassNotFoundException。堆栈如下图所示：

```
04-13 01:56:21.521: 
04-13 01:56:21.521: D/RegisterTask(299): Caused by: org.apache.mina.filter.codec.ProtocolDecoderException: java.lang.ClassNotFoundException: com.geoxy.message.agent.user.RegisterResponse (Hexdump: 12 00 00 2A 00 00 00 DA 12 04 00 02 00 00 00 D2 AC ED 00 05 73 72 01 00 2D 63 6F 6D 2E 67 65 6F 78 79 2E 6D 65 73 73 61 67 65 2E 61 67 65 6E 74 2E 75 73 65 72 2E 52 65 67 69 73 74 65 72 52 65 73 70 6F 6E 73 65 78 72 01 00 1D 63 6F 6D 2E 67 65 6F 78 79 2E 63 6F 6D 6D 6F 6E 2E 52 65 73 70 6F 6E 73 65 42 61 73 65 78 72 01 00 1C 63 6F 6D 2E 67 65 6F 78 79 2E 63 6F 6D 6D 6F 6E 2E 4D 65 73 73 61 67 65 42 61 73 65 78 70 12 04 00 02 73 72 01 00 2D 63 6F 6D 2E 67 65 6F 78 79 2E 63 6F 6D 6D 6F 6E 2E 4D 65 73 73 61 67 65 42 61 73 65 24 4D 65 73 73 61 67 65 53 69 67 6E 61 74 75 72 65 78 70 00 00 00 00 00 00 00 03 00 00 00 00 00 00 00 00 71 00 7E 00 03 00 70 00 00 00 00 00 00 00 03)

04-13 01:56:21.521: D/RegisterTask(299):    at org.apache.mina.filter.codec.ProtocolCodecFilter.messageReceived(ProtocolCodecFilter.java:251)
04-13 01:56:21.521: D/RegisterTask(299):    at org.apache.mina.core.filterchain.DefaultIoFilterChain.callNextMessageReceived(DefaultIoFilterChain.java:434)
04-13 01:56:21.521: D/RegisterTask(299):    at org.apache.mina.core.filterchain.DefaultIoFilterChain.access$5(DefaultIoFilterChain.java:429)
04-13 01:56:21.521: D/RegisterTask(299):    at org.apache.mina.core.filterchain.DefaultIoFilterChain$EntryImpl$1.messageReceived(DefaultIoFilterChain.java:796)
04-13 01:56:21.521: D/RegisterTask(299):    at org.apache.mina.core.filterchain.IoFilterAdapter.messageReceived(IoFilterAdapter.java:119)
04-13 01:56:21.521: D/RegisterTask(299):    at org.apache.mina.core.filterchain.DefaultIoFilterChain.callNextMessageReceived(DefaultIoFilterChain.java:434)
04-13 01:56:21.521: D/RegisterTask(299):    at org.apache.mina.core.filterchain.DefaultIoFilterChain.fireMessageReceived(DefaultIoFilterChain.java:426)
04-13 01:56:21.521: D/RegisterTask(299):    at org.apache.mina.core.polling.AbstractPollingIoProcessor.read(AbstractPollingIoProcessor.java:715)
04-13 01:56:21.521: D/RegisterTask(299):    at org.apache.mina.core.polling.AbstractPollingIoProcessor.process(AbstractPollingIoProcessor.java:668)
04-13 01:56:21.521: D/RegisterTask(299):    at org.apache.mina.core.polling.AbstractPollingIoProcessor.process(AbstractPollingIoProcessor.java:657)
04-13 01:56:21.521: D/RegisterTask(299):    at org.apache.mina.core.polling.AbstractPollingIoProcessor.access$9(AbstractPollingIoProcessor.java:654)
04-13 01:56:21.521: D/RegisterTask(299):    at org.apache.mina.core.polling.AbstractPollingIoProcessor$Processor.run(AbstractPollingIoProcessor.java:1141)
04-13 01:56:21.521: D/RegisterTask(299):    at org.apache.mina.util.NamePreservingRunnable.run(NamePreservingRunnable.java:64) 
```

但是我不明白，缺少的类“com.geoxy.message.agent.user.RegisterResponse”实际上包含在message.jar中，我已经将message.jar放在了项目构建路径下。（并且服务器也使用相同的 message.jar 来序列化类。）

而且我还检查了项目.classpath，它包含了message.jar。

```
<?xml version="1.0" encoding="UTF-8"?>
<classpath>
    <classpathentry exported="true" kind="con" path="com.android.ide.eclipse.adt.LIBRARIES"/>
    <classpathentry kind="src" path="src"/>
    <classpathentry kind="src" path="gen"/>
    <classpathentry kind="con" path="com.android.ide.eclipse.adt.ANDROID_FRAMEWORK"/>
    <classpathentry kind="lib" path="libs/dumpcatcher.jar"/>
    <classpathentry kind="lib" path="libs/common-0.1.jar"/>
    <classpathentry kind="lib" path="libs/log4j-1.2.16.jar"/>
    <classpathentry kind="lib" path="libs/slf4j-android-1.6.1-RC1.jar"/>
    <classpathentry kind="lib" path="libs/message-0.1.jar"/>    <!---here is it.-->
    <classpathentry kind="lib" path="libs/mina-core-2.0.4.jar"/>
    <classpathentry kind="output" path="bin/classes"/>
</classpath> 
```

请帮忙，还有其他原因导致ClassNotFoundException吗？非常感谢。我还在这篇文章中放了一些信息：[Run (synchronize) mina client on Android, how to resolve ClassNotFoundException](https://stackoverflow.com/questions/10088492/run-synchronize-mina-client-on-android-how-to-resolve-classnotfoundexception)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T03:04:04.907

I think in the Message.jar the class you are trying to access ""egisterResponse" extends the activity, In these case you must add these activity in your manifeast file..like below

```
<activity android:name="com.geoxy.message.agent.user.RegisterResponse" /> 
```

Also remember that if any of our external jar has classess that extends Activity then that activity must be declared in our manifeast file too.

Try this might help you.

Or try placeing your jar file in libs folder of your project and then link it up and try.

# python - 为什么我的 Cronjob 给我这个错误？

> ID：10134656
> 
> 赞同：0
> 
> 时间：2012-04-13T02:53:00.067
> 
> 标签：python, cron, daemon

```
/bin/sh: /Users/alex/filename.py: No such file or directory 
```

我设置了一个 cronjob，它在正确的时间运行，但脚本没有被执行。当我检查邮件时，我得到了那个错误。脚本和 cronjob 文件都在：

```
/Users/alex 
```

我的 cronjob 文件如下所示：

```
45 19 * * * /Users/alex/filename.py 
```

我知道该脚本有效，因为我可以从终端手动启动它。

我在哪里搞砸了？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-13T02:56:41.603

试试这个：

```
45 19 * * * /path/to/python /Users/alex/filename.py 
```

`path/to/python`类似的东西在哪里`/usr/bin/python`（相信OS XI上的默认值）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T02:56:55.463

你确定`Users`吗`users`？你`filename.py`有 cron 的执行权限吗？

# delphi - 如何为 XE2 设置默认编译器选项？

> ID：10134658
> 
> 赞同：8
> 
> 时间：2012-04-13T02:53:07.697
> 
> 标签：delphi, delphi-xe2, build-settings

我无法弄清楚如何更改默认的构建/编译设置。项目选项对话框左下角的小*默认复选框已消失。*该[文档](http://docwiki.embarcadero.com/RADStudio/en/IDE_Changes_for_XE2#Default_Checkbox_Removed_from_Project_Options_Pages)指出：

`The **Default** checkbox that appeared at the lower edge of many Project Options pages has been removed from the product. If you want to specify options as the default for multiple projects, the suggested alternative is to use option sets instead.`

我绕着“[选项集](http://docwiki.embarcadero.com/RADStudio/en/Option_Sets_Overview)”、“[配置管理器](http://docwiki.embarcadero.com/RADStudio/en/Configuration_Manager)”等兜圈子。这甚至可能吗？*“将选项指定为多个项目的默认选项”*是什么意思？如果我有多个项目，那么这意味着这些项目及其选项存在，我如何将*默认*值设置为已设置的内容？新项目呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-13T08:38:29.790

据我所知，该功能确实已经消失了，产品中再也没有类似的东西了。我认为你能做的最好的如下：

1.  创建一个新项目。
2.  将项目设置更改为您想要的任何设置。
3.  更改默认项目中您不喜欢的任何其他内容，例如`{ Private declarations }`.
4.  将此项目添加到存储库。
5.  使用**文件 | 新 | 自定义**以将此项目模板移动到**文件 | 新**菜单，方便访问。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T03:07:12.567

`Project->Options->Target`. 您可以设置基本配置，然后为 和 提供与基本配置不同的不同`Debug`选项`Release`。您还可以创建自定义选项集，这意味着它们不同于标准`Debug`和`Release`. 您还可以根据不同的目标进行不同的配置（VCL 应用程序的调试版本与 FMX 应用程序的调试版本有不同的选项等）

要更改默认选项，首先要定义“默认”。您可以从“基本配置”开始`Project->Options->Delphi Compiler`，然后选择`All Configuration`目标。您可以通过更改`Debug`和`Release`配置的基本配置来稍微改进它。您还可以使用列表`Save`旁边的按钮定义自己的选项集。`Target`

您关于“将选项指定为多个项目的默认选项”的具体问题是指`base configuration`. 从那里，您可以优化这些基本选项，为您提供调试设置和发布设置（也可以将其保存为您的初始默认值，并在每个项目的基础上进行优化）。

因此，对于特定的答案，您可以通过修改 来更改默认值`base configuration`，或者通过修改从该基础继承的`debug`or`release`配置来更具体，具体取决于您的最终结果需要是什么以及您要完成什么。

# java - 如何在java中做一个定时器数组

> ID：10134666
> 
> 赞同：2
> 
> 时间：2012-04-13T02:55:05.277
> 
> 标签：java, timer

我知道我可能离这里很远，但我正在尝试创建一个计时器数组，以便 mytimer[0] mytimer[1]、mytimer[2] 等...都以不同的间隔触发，发送不同的事件到服务器。有任何想法吗？for 循环值 6 是一个有机数字，仅用于测试目的。这个数字稍后将根据程序的 xml 文件中的设置来确定。

```
Timer mytimers[] = new Timer[6]; 
for(int i = 0;i < 6;i++){
    final int mytime = i;
    mytimers[i].scheduleAtFixedRate(new TimerTask() {

        @Override
        public void run() {
            //do action
            sendData("Timer " + mytime + " fired");              
        }
    }, 10000, i*1000);
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-13T02:58:53.300

```
Timer mytimers[] = new Timer(); 
```

我假设这是行不通的线？你不能用一个对象来初始化一个数组；用数组初始化它：

```
Timer mytimers[] = new Timer[6]; 
```

再做一次猜测，您也没有初始化各个计时器：

```
mytimers[i].scheduleAtFixedRate(new TimerTask() { 
```

此时 mytimers[i] 没有设置任何东西，那么你怎么能调用`scheduleAtFixedRate`它呢？首先初始化它：

```
mytimers[i] = new Timer();
mytimers[i].scheduleAtFixedRate(new TimerTask() { 
```

编辑：

您的“IllegalArgumentException：非阳性期”。是因为在第一次通过循环时，`i = 0`，所以`i * 1000 = 0`，并且周期不能为 0（“每 0 零秒运行一次此事件”）。

开始，`i = 1`应该没问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T03:04:50.643

你有没有想过只做一个计时器，然后把所有不同的事件放在某种形式中`(if timeElapsed % timerinterval[1] == 0)`，然后你可以只用一个计时器来模拟不同的时间。然后你只需要一个带有计时器间隔的整数数组。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T03:06:25.357

用这个：

```
Timer mytimers[] = new Timer[6]; 
for(int i = 0;i < 6;i++){
    mytimers[i] = new Timer();
    final int mytime = i;
    mytimers[i].scheduleAtFixedRate(new TimerTask() {

        @Override
        public void run() {
            //do action
            sendData("Timer " + mytime + " fired");              
        }
    }, 10000, i*1000);
} 
```

问题是，您在数组上调用 Timer() 构造函数，而从未初始化您的各个计时器。相反，您应该将数组初始化*为数组*，将单个计时器初始化*为 timers*。

# android - “MyApps 应用程序”是什么意思？--- Android 应用内计费

> ID：10134672
> 
> 赞同：4
> 
> 时间：2012-04-13T02:56:09.447
> 
> 标签：android, in-app-purchase

我想在 android 平台上实现应用内计费功能。当我学习 Google SDK 的文档时。我找到了以下文字，但我不明白“MyApps 应用程序”的含义。这是否意味着其他Android应用商店？

*如果您的设备运行的是 Android 3.0，则应用内结算需要 5.0.12（或更高版本）的**MyApps 应用程序**。如果您的设备运行的是任何其他版本的 Android，则应用内结算需要 2.3.4 版（或更高版本）的 Google Play 应用程序。*

# matlab - 整合的限制

> ID：10134677
> 
> 赞同：0
> 
> 时间：2012-04-13T02:56:42.133
> 
> 标签：matlab, integration, scalar

如何限制积分标量？

y = 兰德（150000,1）；

x = 兰德(150000,1);

u=y.^x;

v=y;

z = quad(@(u) 1./log(v),0,u);

使用四边形的错误（第 70 行） 积分的限制必须是标量。

lnplot 中的错误（第 5 行）z = quad(@(u) 1./log(v),0,u)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T04:56:35.063

您的问题是 u 是一个长度为 150000 的向量（因为您在 u=y.^x 中进行逐个元素的乘法）。

积分限制必须是标量，但 'u' 是矩阵。您需要确定集成运行到哪个固定值。

标量值取决于您的数据集。

# java-me - 在 j2me 中播放音频文件时如何防止或处理“javax.microedition.media.MediaException: AUD”

> ID：10134678
> 
> 赞同：1
> 
> 时间：2012-04-13T02:56:51.080
> 
> 标签：java-me, midp-2.0, cldc, nokia-s40, series-40

我正在 j2me 中开发一个配置**为 cldc2.1 和 midp 2.0**的移动应用程序。

在我的应用程序中，我正在根据一些用户操作运行一些音频文件。但有时音频文件运行正常，但有时会抛出“javax.microedition.media.MediaException: AUD”异常。

我将音频文件（.wav）放在我项目的“res”文件夹中并从该文件夹中读取，然后我正在播放它。

我正在使用诺基亚 c2-01 手机 (s40) 设备进行测试。请给出你的想法来解决这个问题。

请帮我。欢迎您的所有想法。

# html - 在ajax中用jquery更新css？

> ID：10134685
> 
> 赞同：1
> 
> 时间：2012-04-13T02:58:51.113
> 
> 标签：html, css, ajax, jquery

我正在尝试更新我的主 html 文件中不存在但在我正在注入的文件中存在的 div 的 css（css 位于我的 main.css 中）。这可能吗？如果是这样怎么办？

好的，这就是我的主 html 文件中的内容

```
<div id="container">
<div id="page">
    <!placeholder>
</div></div> 
```

抱歉格式错误，我无法让标签和新行与本网站上的代码输入系统一起使用。

接下来是我的 main.css

```
#container {
position: fixed;
margin-right: 0px;
overflow-x: hidden;
overflow-y: scroll;}
#page {
position: absolute;
width: 100%;
height: 1600px;
z-index: 10;
border-left: 1px solid #CCCCCC;}
#recposts {
position: absolute;
left:0;
top:1200px;}
.child {
height: 400px;
border-top: 1px solid #CCCCCC;
border-bottom: 1px solid #CCCCCC;
z-index: 11;
background-color: #EDEDED;
width: 100%;
padding-right: 10px;} 
```

好吧，现在我正在注射什么

```
<div id ="page">    
<div id="recposts" class="child">
    <h1> Recent Posts  </h1> 
</div></div> 
```

所以我需要能够编辑#recposts 的位置顶部和.child 的高度。

我解决了我的问题，问题是我没有在 html 加载时编辑 css。我将函数放入 .load() 中，现在它可以工作了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T16:24:39.047

您的问题不清楚，据我了解，您可以使用 Jquery live() api 解决它。 [http://api.jquery.com/live/](http://api.jquery.com/live/)

您可以使用 Jquery live() api 将您想要的任何内容更改为新添加的项目。

您可以使用 jquery 的 DOM change() api 在插入后触发函数调用。 [http://api.jquery.com/change/](http://api.jquery.com/change/)

例如：

```
$('#container').change(function() {
  $('#page').css("height",200);
}); 
```

编辑：由于 change() api 不适用于 div，这里是正确的版本

```
$('#container').bind("DOMSubtreeModified", function() {
  $('#page').css("height",200);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T03:08:23.910

如果 CSS 规则位于已加载的文件中（您的`main.css`），那么稍后添加的任何新元素（例如，从您正在谈论的任何 HTML 注入）以及匹配 CSS 文件中的选择器，将自动具有应用的样式规则。这就是你所追求的吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T03:22:20.323

我不确定这是否是您要查找的内容，但这会在 div id="insertion" 中添加一个类“someClass”的跨度。

CSS：

```
.someClass{ background-color:black; } 
```

html:

```
<div id="insertion"></div> 
```

js：

```
<script>
 var toInsert = document.createElement("span");
 toInsert.className = "someClass";
 document.getElementById("insertion").append(toInsert);
</script> 
```

# java - 简单的选择方法（lambdaj）获取异常

> ID：10134686
> 
> 赞同：2
> 
> 时间：2012-04-13T02:58:52.147
> 
> 标签：java, lambdaj

我是 lambdaj 的新手。对于 Java 编程来说，这似乎是一个很棒的功能。

所以我创建了一个非常简单的评估程序。

但我对下面的代码有一个例外。你能帮我看看有什么问题吗？

**--EDITED**添加了为类 X 封装的无参数构造函数和公共变量。感谢@AVD。

```
import java.util.Arrays;
import java.util.List;

import static ch.lambdaj.Lambda.having;
import static ch.lambdaj.Lambda.on;
import static ch.lambdaj.Lambda.select;

public class Main {

    private static class X {
        private String name;
        public X(){
        }
        public X(String name) {
            this.name = name;
        }

        public String getName() {
            return name;
        }

        public void setName(String name) {
            this.name = name;
        }
    }

    public static void main(String[] args) {
        List<X> xs = Arrays.asList(
                new X("aaa"),
                new X("aaa"),
                new X("bbb")
        );

        List<X> s = select(xs, having(on(X.class).getName().equals("aaa")));

    }
} 
```

结果是：

```
Exception in thread "main" ch.lambdaj.function.argument.ArgumentConversionException: Unable to convert the placeholder false in a valid argument
    at ch.lambdaj.function.argument.ArgumentsFactory.actualArgument(ArgumentsFactory.java:92)
    at ch.lambdaj.function.matcher.HasArgumentWithValue.havingValue(HasArgumentWithValue.java:70)
    at ch.lambdaj.function.matcher.HasArgumentWithValue.havingValue(HasArgumentWithValue.java:58)
    at ch.lambdaj.Lambda.having(Lambda.java:1193)
    at Main.main(Main.java:34)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at com.intellij.rt.execution.application.AppMain.main(AppMain.java:120) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-13T12:26:19.467

用这种方式改变你的表情

```
List<X> s = select(xs, having(on(X.class).getName(), Matchers.equalTo("aaa"))); 
```

它会起作用。

只有在

```
on(X.class).getName() 
```

直接返回一个布尔值，例如

```
List<X> s = select(xs, having(on(X.class).isLowerCaseString()); 
```

如果所有名称字母都是小写，则返回 true`isLowerCaseString()`的方法在哪里。`X`

# jquery - jquery在页面加载时显示花哨的框

> ID：10134688
> 
> 赞同：0
> 
> 时间：2012-04-13T02:58:58.363
> 
> 标签：jquery, .net

我想在页面加载时启动一个 Fancybox。我可以将它绑定到隐藏的锚标记并通过 JavaScript 触发该锚标记的单击事件。bt 仅在某些条件为 true 时才打开它。我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T03:04:20.070

```
$(function() {
    if(condition) {
        $.fancybox({
            // fancybox options
        });
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T03:03:27.653

Call it on the document ready. You can check your conditions and then invoke

```
var yourConditionVariableVal =false;
$(function(){
  if(yourConditionVariableVal)
  {
     $("#yourImage").fancybox();
  }
}); 
```

The above code will bind the fancy box to an element with id yourImage.

If you want to show the fancybox on page load event, you can trigger it.

```
var yourConditionVariableVal =false;
$(function(){
  if(yourConditionVariableVal)
  {
     $("#yourImage").fancybox();
     $("#yourImage").trigger("click");
  }
}); 
```

# python - 使用 Requests python 库连接 Django 应用程序在身份验证时失败

> ID：10134690
> 
> 赞同：3
> 
> 时间：2012-04-13T02:59:26.520
> 
> 标签：python, django, authentication, python-requests

也许这里有一个愚蠢的问题： Requests(A python HTTP lib) support Django 1.4 吗？

我使用**请求**遵循官方快速入门，如下所示：

```
requests.get('http://127.0.0.1:8000/getAllTracks', auth=('myUser', 'myPass')) 
```

但我从来没有得到正确的身份验证。（当然我已经一次又一次地检查了网址、用户名、密码。）

上面的 url ' **http://127.0.0.1:8000/getAllTracks** ' 匹配 Django 项目的 url.py 的 url 模式，并且该 url 模式的回调是 Django 应用程序的 ' **getAllTracks** ' 视图。

如果我注释掉“ **getAllTracks** ”视图的身份验证代码，那么上面的代码可以正常工作，但是如果我为视图添加这些身份验证代码，那么上面的代码永远不会得到正确的身份验证。

视图的认证代码其实很简单，如下图（第二行）：

```
def getAllTracks(request):
    if request.user.is_authenticated():
        tracks = Tracks.objects.all()
        if tracks:
            # Do sth. here 
```

这意味着如果我删除上面的第二行（当然还有一些缩进调整），那么**requests.get()**操作会为我做正确的事情，但如果不是（保留第二行），那么它永远不会正确。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-15T18:29:21.857

在 Django 中，身份验证以下列方式工作：

*   有一个 SessionMiddleware 和 AuthenticationMiddleware。在调用任何视图之前调用这两个类的 process_request()。
*   SessionMiddleware 在较低级别使用 cookie。它检查一个名为的 cookie`sessionid`并尝试将此 cookie 与用户相关联。
*   AuthenticationMiddleware 检查此 cookie 是否与用户相关联，然后设置`request.user`为相应的用户。如果 cookie`sessionid`未找到或无法与任何用户关联，则`request.user`设置为`AnonymousUser()`.
*   由于 Http 是无状态协议，django 使用这两个中间件并在较低级别使用 cookie 为特定用户维护会话。

来到代码，以便`requests`可以与 django 一起使用。

您必须首先调用您验证和登录用户的视图。此视图的响应将包含`sessionid`在 cookie 中。

你应该使用这个 cookie 并在下一个请求中发送它，以便 django 可以验证这个特定的用户并让你`request.user.is_authenticated()`通过。

```
from django.contrib.auth import authenticate, login

def login_user(request):
    user = authenticate(username=request.POST.get('username'),  password=request.POST.get('password'))
    if user:
       login(request, user)
       return HttpResponse("Logged In")
    return HttpResponse("Not Logged In")

def getAllTracks(request):
    if request.user.is_authenticated():
        return HttpResponse("Authenticated user")
    return HttpResponse("Non Authenticated user") 
```

提出请求：

```
import requests

resp = requests.post('http://127.0.0.1:8000/login/', {'username': 'akshar', 'password': 'abc'})

print resp.status_code
200 #output

print resp.content
'Logged In' #output

cookies = dict(sessionid=resp.cookies.get('sessionid'))

print cookies
{'sessionid': '1fe38ea7b22b4d4f8d1b391e1ea816c0'}  #output

response_two = requests.get('http://127.0.0.1:8000/getAllTracks/', cookies=cookies) 
```

`cookies`请注意，我们使用关键字参数传递 cookie

```
print response_two.status_code
200  #output 

print response_two.content
'Authenticated user'  #output 
```

所以，我们的`request.user.is_authenticated()`工作正常。

```
response_three = requests.get('http://127.0.0.1:8000/hogwarts/getAllTracks/') 
```

请注意，我们不会在此处传递 cookie。

```
print response_three.content
'Non Authenticated user' #output 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-13T03:27:53.327

我猜，`auth`Requests 的关键字启用了[HTTP Basic 身份验证](http://en.wikipedia.org/wiki/Basic_access_authentication)，这不是 Django 中使用的。您应该使用 POST 数据中提供的用户名和密码向项目的登录 url 发出 POST 请求，之后您的 Requests 实例将收到一个包含已保存身份验证数据的会话 cookie，并且能够成功请求受身份验证保护的视图。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-15T15:44:55.587

您可能更容易在初始身份验证时设置一个 cookie，将其传递回客户端，然后对于未来的请求，期望客户端在标头中发回该令牌，如下所示：

```
r = requests.post('http://127.0.0.1:8000', auth=(UN, PW))
self.token = r.cookies['token']
self.headers = {'token': token} 
```

然后在进一步的电话中，假设你在同一个班级，你可以这样做：

```
r = requests.post('http://127.0.0.1:8000/getAllTracks', headers=self.headers) 
```

# sql - 授予特定表的数据库权限以及作为安全实践的有效性？

> ID：10134693
> 
> 赞同：0
> 
> 时间：2012-04-13T03:00:15.833
> 
> 标签：sql, database, authentication, permissions, grant

我的问题很简单。

我可以明智地授予数据库表的权限吗？行中的一些东西：

*   用户管理有权对表 Projects 进行选择、更新、插入和删除
*   用户主管有权选择、更新、插入表项目
*   用户 Colaborator 有权在表 Projects 上进行选择

如果是这样，我可以设置一个系统来根据我的应用程序的访问级别创建数据库用户，就像上面的示例一样。

使用它来保护应用程序是一种有效的机制吗？
在现实世界的应用程序中是否值得？

我已经将 PHP 与 Oracle 和 MySQL 一起使用，但我正在寻找与数据库/语言无关的答案，但任何示例都会很有用。

有点碰运气，每个记录的权限授予怎么样？另外，表模式呢，它们比基于表的权限更容易接受吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T12:13:48.323

使用数据库安全性的主要问题是您需要为每个用户单独连接，而不是能够使用“服务用户”来连接从应用程序服务器到数据库服务器。这意味着您将不再能够使用数据库连接池，必须为每个用户请求“连接”和“断开”数据库，这不是很有效，因为连接相对昂贵。

话虽如此，在数据库中使用单独的用户是有充分理由的，例如 DATA_USER（应用程序服务器连接的用户）和 DATA_OWNER（拥有所有表但仅用于数据库维护）然后只授予 DATA_USER 权限它需要，例如仅在查找表上选择。通过分离 DATA_USER 和 DATA_OWNER，您可以增加对应用程序不会发出 DDL 命令（例如删除表）的信心。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T03:24:23.287

对第 1 部分的回答：是的，只要您正确处理响应。

第 2 部分：它不如在应用程序层实现安全性，因为大多数应用程序都需要解决方案的灵活性（如果您希望用户获得更多的权限，必须编写大量的更改/拒绝/授予脚本）

第 3 部分：（从纯 MSSQL 讲）行级权限是不可能的。为此目的创建自定义视图。

# django - HTML：清理一组标签，但允许所有标签进入 blocks

> ID：10134696
> 
> 赞同：1
> 
> 时间：2012-04-13T03:01:18.370
> 
> 标签：django, markdown, html-sanitizing

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T03:09:32.593

在将输入传递给 Markdown 之前不要转义输入。如您所见，这在某些情况下会破坏用户输入。而且，它不能确保安全性：考虑例如“ `[clickme](javascript:alert%28%22xss%22%29)`”。

相反，正确的方法是在安全模式下使用 Markdown。我已经在[其他地方](https://security.stackexchange.com/a/14674/971)写过如何做到这一点，但 Django 中的简短版本是使用类似`{{ text | markdown:"safe" }}`. （或者，您可以将 HTML 净化器（如 HTML Purifier）应用于 Markdown 处理器的输出。）

# php - Multiple Labels in a single Model - Yii

> ID：10134702
> 
> 赞同：0
> 
> 时间：2012-04-13T03:03:30.463
> 
> 标签：php, model, yii

Odd question but here it goes. I would like to set up multiple arrays of labels for one model and then switch between them. What i need is:

```
public function attributeLabels_1(){
     array(
          'line_1'=>'Authentication Number'
     )
}
public function attributeLabels_2(){
     array(
          'line_1'=>'Receipt Number'
     )
} 
```

Is this possible and if so how would you change which array is used when?

Many thanks.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T05:41:51.503

我不记得返回的列表`attributeLabels()`是否缓存在某处，如果不是，那么这应该有效：

```
/** implementation */

private $_currentLabelCollection = null;

public function getCurrentLabelCollection() {
    return $this->_currentLabelCollection;
}

public function setCurrentLabelCollection($value) {
    if(!$value || array_key_exists($value, $this->_attributeLabelCollections)) {
        $this->_currentLabelCollection = $value;
    } else {
        throw new CException(Yii::t("error", "Model {model} does not have a label collection named {key}.", array(
            '{model}' => get_class($this),
            '{key}' => $value,
        )));
    }
}

private $_attributeLabelCollections = array(
    'collection1' => array(
        'line_1' => 'Authentication Number',
    ),
    'collection2' => array(
        'line_1' => 'Receipt Number',
    ),
);

public function attributeLabels() {
    if($this->_currentLabelCollection) {
        return $this->_attributeLabelCollections[$this->_currentLabelCollection];
    } else {
        return reset($this->_attributeLabelCollections);
    }
}

/** usage */

// use labels from 'collection2'
$model->currentLabelCollection = 'collection2';

// use labels from the first defined collection
$model->currentLabelCollection = null; 
```

# c++ - QDataStream 和 quint16 序列化怪异

> ID：10134707
> 
> 赞同：1
> 
> 时间：2012-04-13T03:04:20.337
> 
> 标签：c++, qt, serialization, qbytearray

我编写了一个小型 Packet 类，由一些 quint8、quint16、QByteArrays 和一个 quint32 组成，它有一个 toByteArray() 方法来返回对象的序列化版本，符合协议规范。

## 数据包规格

*   协议标识符 [4 字节]（版本 1 = 0x74697331）
*   会话 ID，一个用时间戳 + 用户 IP 加盐的 MD5 哈希。[16 字节]
*   命令 ID [1 字节]
*   参数大小 [2 字节]
*   Args [1-8,192 字节]
*   CRC-B (X-25) [2 字节]

大多数数据可以很好地序列化。例外是最后一个 quint16（我的 crc），它似乎被破坏了。

我不认为问题出在我班级的声明中。我在这个代码示例中重新创建了序列化函数，它演示了我收到的错误，没有我的数据包类。（但最终的 QByteArray 布局相同）

## (更多) 最小可重现测试用例

```
#include <iostream>

#include <QByteArray>
#include <QDebug>

using namespace std;

int main()
{
    QByteArray arr;

    quint32 m_protocolId = 0x74697331;
    QByteArray m_sessionId;
    m_sessionId.resize(16);
    m_sessionId.fill(0);
    quint8 m_commandId = 0x1;
    quint16 m_argsSize = 0x0e;
    QByteArray args;
    args.append("test").append('\0');
    args.append("1234qwer").append('\0');
    quint16 m_crc;
    m_crc = 0xB5A2;

    QDataStream out(&arr, QIODevice::WriteOnly);
    out.setByteOrder(QDataStream::LittleEndian);

    out << m_protocolId;
    out.writeRawData(m_sessionId.data(), 16);
    out << m_commandId;
    out << m_argsSize;
    out.writeRawData(args.data(), args.length());
    out << m_crc;

    foreach (char c, arr)
    {
        qDebug() << QString::number((int)c, 16).toAscii().data();
    }

    return 0;
} 
```

这是我得到的输出：

73 69 74 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 1 e 0 74 65 73 74 0 31 32 33 34 71 77 65 72 0 ffffffffffffffa2 ffffffffffffffb5

最后两个*应该*是 0xa2、0xb5。我想这是某种对齐问题。有什么方法可以纠正这个问题，同时仍然符合数据包规范？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T04:24:17.160

我认为你只需要调整你的调试输出。尝试：

```
..
foreach (unsigned char c, arr)
.. 
```

# xml - 最大默认长度 xsd 字符串

> ID：10134714
> 
> 赞同：10
> 
> 时间：2012-04-13T03:05:37.323
> 
> 标签：xml, xsd, xsd-validation

> 如果未指定最大长度，xsd 字符串的默认最大长度是多少？
> 
> [https://www.w3schools.com/xml/schema_facets.asp](https://www.w3schools.com/xml/schema_facets.asp)
> 
> maxLength - 指定允许的最大字符数或列表项数。必须等于或大于零。

如果未指定，是否为零？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-13T12:10:00.417

默认值是无限长度 - 规范说`xs:string`是“......有限长度的字符序列......”

# mongodb - 如何获得 MongoDB 计数的解释？

> ID：10134716
> 
> 赞同：16
> 
> 时间：2012-04-13T03:06:23.513
> 
> 标签：mongodb

在 MongoDB 中，您可以获得有关如何执行查询的解释，以及有趣的性能信息：

```
> db.people.find({ 'items' : { '$gte' : 1 } }).explain() 
```

我可以为“计数”（不是查询，而是命令）获得相同的结果吗？

```
> db.people.count({ 'items' : { '$gte' : 1 } }) 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2015-04-16T14:09:18.883

Mongo 3.0 引入了一种解释非游标请求的新方法：

```
db.my_collection.explain().count() 
```

请参阅：[http ://docs.mongodb.org/manual/reference/method/db.collection.explain/#db.collection.explain](http://docs.mongodb.org/manual/reference/method/db.collection.explain/#db.collection.explain)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2015-02-20T22:43:20.777

基于[https://jira.mongodb.org/browse/SERVER-14098](https://jira.mongodb.org/browse/SERVER-14098)，新的未来版本将支持此格式：

```
db.runCommand({
    explain: {
        count: 'collectionName',
        query: {
            foo: 'bar'
        }
    }
}) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-13T04:35:47.327

我很确定 count(query) 是 find(query).count() 的缩写——换句话说，解释是完全一样的。没有进行特定的*计数优化*，除了可能是完整的收集计数。例如，对范围的非索引字段运行计数与运行具有相同范围的 find.explain 所花费的时间完全相同。

我编写了一个名为 timeCount 的函数，它取 count 函数时间的平均值，然后显示解释输出以进行比较。

```
function timeCount(coll, query) {
  var n = 5;
  var total = 0;
  for(var i = 0; i < n; i++) {
    var start = new Date();
    db[coll].find(query).count();
    var end = new Date();
    total += (end - start);
    print("time[" + i + "]: " + (end - start) + "ms");
  }
  print("average time: " + (total / n));

  var explain = db[coll].find(query).explain();
  print("explain (from find): ");
  for(e in explain) {
    if(typeof explain[e] == "string" || typeof explain[e] == "number") {
      print(e + ": " + explain[e]);
    }
  }
} 
```

输出如下所示：

```
> timeCount('test',{x:{$gt:5000}});
time[0]: 1339ms
time[1]: 1280ms
time[2]: 1347ms
time[3]: 1322ms
time[4]: 1299ms
average time: 1317.4
explain (from find): 
cursor: BtreeCursor x_1_y_1
nscanned: 995062
nscannedObjects: 995062
n: 995062
millis: 1390
nYields: 0
nChunkSkips: 0 
```

# ace-editor - 根据浏览器的大小调整 ajax.org ACE 编辑器的大小

> ID：10134724
> 
> 赞同：10
> 
> 时间：2012-04-13T03:08:01.823
> 
> 标签：ace-editor

我想让 ACE 编辑器根据浏览器的大小调整大小。但是，必须明确调整编辑器元素的大小，以便由 ace 编辑器的 API 初始化。

当我设置宽度：100%/高度：400px 时，编辑器工作。具有此设置允许编辑器的宽度响应浏览器的宽度。但是，对编辑器的身高没有反应。

有没有办法通过响应浏览器的大小来使编辑器的大小更加灵活？

谢谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-04T02:04:05.487

```
function resizeAce() {
  return $('#editor').height($(window).height());
};
//listen for changes
$(window).resize(resizeAce);
//set initially
resizeAce(); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-01T13:31:57.633

设置`position:absolute;top:0; bottom:0` 为[https://github.com/ajaxorg/ace-builds/blob/master/editor.html#L14](https://github.com/ajaxorg/ace-builds/blob/master/editor.html#L14)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-03-19T06:00:58.053

扩展 jpillora 的优秀指导：

```
function resizeAce() {
    var h = window.innerHeight;
    if (h > 360) {
        $('#editor').css('height', (h - 290).toString() + 'px');
    }
};
$(window).on('resize', function () {
    resizeAce();
});
resizeAce(); 
```

`window.innerHeight`受 IE8+ 支持，并且对于获取屏幕的可用区域似乎很可靠。我最终在 IE9、FF 和 Chrome 上得到了相同的结果。我还发现我必须使用 jQuery`on`语法来可靠地捕获窗口调整大小事件。

我需要使用 jQuery `css`，因为在我的情况下，我正在调整`pre`位于代码编辑器右侧的元素（显示编码帮助）的大小，这是使两个元素的高度完全相同的唯一方法。

`360`和`290`是我需要用来说明占据页面顶部垂直空间的所有菜单和选项卡的数字。相应调整。

# suse - rc-prefix 在 SuSE 中是如何工作的？

> ID：10134725
> 
> 赞同：0
> 
> 时间：2012-04-13T03:08:18.087
> 
> 标签：suse

`SuSE version is SuSE10 SP2`

如果我想管理一些服务，例如命名，我有几个选择。

`choice 1\. /etc/init.d/named status`

`choice 2\. service named status`

`choice 3\. rcnamed status`

这 3 个命令具有完全相同的返回。我理解选项 1 和 2，但是 rc-prefix 在选项 3 中如何工作？有人知道吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T03:14:39.503

`/etc/init.d`第三个是 SuSE 主义，由于历史原因，它通常是指向相应文件的符号链接。（SuSE 最初从受 BSD 影响的 OSF/1 获取其服务管理，并且仍然保留其中一些行为。我没有检查 SuSE 10 是否仍然具有 OSF/1-ish`/sbin/init.d`符号链接以及您提到的那些。 )

# h2 - 在h2数据库中合并，如何使用？

> ID：10134729
> 
> 赞同：2
> 
> 时间：2012-04-13T03:08:27.467
> 
> 标签：h2

如何在 H2 中使用合并与指定行？欢迎任何答案，我很感激

我的意思是如何与从外部传递的值合并。

示例：我想在表 customer 中合并 name = "john" 和 id = "1" 的行。

在这种情况下的陈述是什么

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T04:59:33.447

我不确定您是否*真的*指的是[MERGE 语句](http://h2database.com/html/grammar.html#merge)，但文档在网站上。

# php - 无法让登录路由在 Symfony 2 中工作

> ID：10134734
> 
> 赞同：2
> 
> 时间：2012-04-13T03:09:09.607
> 
> 标签：php, security, login, symfony

我已经尝试了每本手册上的所有配置，但仍然无法正常工作！有人可以帮我找出错误吗？这是我的代码：

**安全.yml**

```
security:
    encoders:
        Symfony\Component\Security\Core\User\User: plaintext

role_hierarchy:
    ROLE_ADMIN:       ROLE_USER
    ROLE_SUPER_ADMIN: [ROLE_USER, ROLE_ADMIN, ROLE_ALLOWED_TO_SWITCH]

providers:
    in_memory:
        users:
            user:  { password: userpass, roles: [ 'ROLE_USER' ] }
            admin: { password: adminpass, roles: [ 'ROLE_ADMIN' ] }

firewalls:
    main:
        pattern: ^/
        provider: in_memory
        anonymous: true
        security: true
        form_login:
            login_path: default_login
            check_path: default_check
        logout:
            path: default_logout
            target: default_index
        remember_me:
            key: %secret%
            lifetime: 3600
            domain: ~
    dev:
        pattern:  ^/(_(profiler|wdt)|css|images|js)/
        security: false

access_control:
    - { path: ^/login, roles: IS_AUTHENTICATED_ANONYMOUSLY }
    #- { path: ^/afiliados, roles: ROLE_SUPER_ADMIN}
    - { path: ^/, roles: IS_AUTHENTICATED_ANONYMOUSLY }
    #- { path: ^/_internal, roles: IS_AUTHENTICATED_ANONYMOUSLY, ip: 127.0.0.1 } 
```

**DefaultController.php**

```
namespace Epika\ClubBundle\Controller;

use Symfony\Bundle\FrameworkBundle\Controller\Controller;
use Sensio\Bundle\FrameworkExtraBundle\Configuration\Route;
use Sensio\Bundle\FrameworkExtraBundle\Configuration\Template;
use Symfony\Component\Security\Core\SecurityContext;

/**
 * Default controller.
 *
 */
class DefaultController extends Controller
{

    /**
     * @Route("/login", name="default_login")
     * @Template()
     */
    public function loginAction()
    {
        $request = $this->getRequest();
        $session = $request->getSession();

        // get the login error if there is one
        if ($request->attributes->has(SecurityContext::AUTHENTICATION_ERROR)) {
                $error = $request->attributes->get(SecurityContext::AUTHENTICATION_ERROR);
        } else {
            $error = $session->get(SecurityContext::AUTHENTICATION_ERROR);
        }

        return array(
                // last username entered by the user
                'last_username' => $session->get(SecurityContext::LAST_USERNAME),
                'error'         => $error
        );
    }

    /**
     * @Route("/login_check", name="default_check")
     * 
     */
    public function loginCheckAction()
    {
        //Security Layer
    }

    /**
     * @Route("/logout", name="default_logout")
     */
    public function logoutAction()
    {
        //Security Layer
    }

} 
```

在我的表格中，我有

```
<form name="loginForm" action="{{ path('default_check') }}" method="POST" enctype="text/plain">
<input type="text" name="_username" placeholder="Nombre de Usuario" />
<input type="password" name="_password" placeholder="Tú Contraseña" />
<input type="checkbox" name="_remember_me" />
<input type="hidden" name="_target_path" value="/index" />
<a href="javascript:submit()"><img src="{{ asset('bundles/epikaclub/images/entrar.png') }}" /></a>
<script type="text/javascript">
function submit()
{
    document.loginForm.submit();
}
</script> 
```

好的伙计们非常感谢您的帮助，问题是登录表单的enctype设置为

```
<form name="loginForm" action="{{ path('login_check') }}" method="post" enctype="text/plain"> 
```

这导致请求为空：对不起，一旦我将其设置为

```
<form name="loginForm" action="{{ path('login_check') }}" method="post" enctype="application/x-www-form-urlencoded"> 
```

它工作得很好，现在我必须用 Doctrine Entity Provider 检查它，看看它是如何进行的：D

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-14T08:54:41.817

我相信你需要：

*   使用实际的 URL（就像其他人在这里所说的那样，即 '/login_check'）
*   不要为 login_check 路由创建控制器。我认为路线本身甚至没有必要。Symfony2 将看到对 '/login_check' 的请求并自动拦截它。

此处的旁注之一对此进行了解释：http: [//symfony.com/doc/current/book/security.html#using-a-traditional-login-form](http://symfony.com/doc/current/book/security.html#using-a-traditional-login-form)

“错误凭据”错误，即使输入正确的信息，也只是指出某处发生了一些错误。如果仍然无法与我上面提到的内容一起使用，请检查错误日志并告诉我们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T03:16:13.230

您可能需要将 login_path 和 check_path 值调整为实际的 URL 路径，如下所示：

```
firewalls:
    [...]
    main:
        [...]
        form_login:
            login_path: /login
            check_path: /login_check 
```

山姆

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T03:31:56.193

与其他选项不同，`check_path`不支持路由名称。将其设置为类似`/login_check`.

# .net - （有没有）VB .NET 组件绑定 SQL SERVER 中表上发生的每个事件

> ID：10134735
> 
> 赞同：1
> 
> 时间：2012-04-13T03:09:22.070
> 
> 标签：.net, sql-server, vb.net

是否有任何 VB .NET 组件可以绑定 SQL SERVER 中表上发生的每个事件？我想构建一个随时准备就绪的小型应用程序（VB .NET）。然后当 SQL SERVER 中的表（例如 tbl_tasks）上发生事件时，我的应用程序将识别它。

例如，在 tbl_tasks 上插入了一条新记录。我的应用程序会识别出 tbl_tasks 发生了一些事情，然后我可以在 vb 上做一些代码。

是否可以使用任何 .NET 组件？如果不？有什么解决方案可以尝试并给我相同的结果吗？

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-08T18:00:42.620

这不是那么容易做到的，但我有一个想法。可以监视 SQL Server 中的表以确定对其执行插入/更新/删除时的最后一个时间戳。如果您有一个 VB.NET 后台进程正在运行，您可以每 10 秒 ping 一次该表以获取上次更新日期，如果它与上次不同，那么您知道某些数据已更新，您可以运行您的处理程序。

下面是我获取最后更新日期的存储过程。

这是一个很好的实现缓存的方法，所以你只需要在数据发生变化时重新拉取数据。

祝你好运！

```
 CREATE PROCEDURE [dbo].[GetTableLastUpdatedDate]
@TableName nvarchar(100)
AS
BEGIN

SELECT max(last_user_update) as LastUpdatedDate
FROM sys.dm_db_index_usage_stats
WHERE
    database_id = DB_ID( 'MyDatabaseName') and 
    OBJECT_ID = OBJECT_ID(@TableName)

END 
```

# php - 在变量php的末尾附加一个数字

> ID：10134736
> 
> 赞同：1
> 
> 时间：2012-04-13T03:09:38.510
> 
> 标签：php, html

可能是另一个基本问题，但它已经让我烦恼了一段时间......

我有一个 php 文件，它包含在 php 网页中，用于从我的 mysql 数据库中引入动态内容。

一切正常，除非我尝试让图片正常工作，这就是问题所在。

我正在使用代码：

```
echo "<img src=fishery_images/$region/$url/$url1.jpg'/>"; 
```

所有这些都是从正确的表中选择的，依此类推。我希望解决的一个例子如下：

```
fishery_images/fife/goldenloch/goldenloch1.jpg 
```

但是因为我有代码：

```
$url1.jpg 
```

并且`$url1`没有被定义为任何东西，然后它解析如下：

```
fishery_images/fife/goldenloch/.jpg 
```

我可以拥有从goldenloch1.jpg 一直到goldenloch10.jpg 的任何内容，因此需要能够说出应该使用哪个图像。

我怎么说`$url1.jpg`没有意义`$url1`？

真的希望这是有道理的......并提前感谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-13T03:12:02.397

```
echo "<img src=fishery_images/{$region}/{$url}/{$url}1.jpg'/>"; 
```

[http://en.wikipedia.org/wiki/String_interpolation#PHP](http://en.wikipedia.org/wiki/String_interpolation#PHP)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T03:12:09.813

您需要使用花括号来包装变量：

```
echo "<img src=fishery_images/$region/$url/{$url}1.jpg'/>"; 
```

# android - Android播放录制的音频

> ID：10134737
> 
> 赞同：0
> 
> 时间：2012-04-13T03:10:21.460
> 
> 标签：android, audiorecord

我一直在看这个例子[https://stackoverflow.com/a/8974361/1191501](https://stackoverflow.com/a/8974361/1191501)它运行良好。但我的问题是如何引用录制的音频以便可以立即播放？

输出代码是：

```
recorder.setOutputFile("/sdcard/audio/"+filename); 
```

这肯定会记录音频。

然后播放音频，我正在使用：

```
player.setDataSource(); 
```

但我不知道如何引用文件名位以便播放。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T05:27:29.790

我曾经在播放 SD 卡中的音频时遇到过类似的问题。这就是为我做的：

```
private void playMedia() {
    String path = Environment.getExternalStorageDirectory() + "/audio_stuff.mp3";
    mediaPlayer = MediaPlayer.create(this, Uri.parse(path));
    mediaPlayer.start();
} 
```

确保释放您的 MediaPlayer 实例并在完成后将其设置为 null。为了以防万一，请确保在尝试播放音频文件时未安装 SD 卡。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T03:16:36.333

看[这里](http://developer.android.com/reference/android/media/MediaPlayer.html#setDataSource%28java.lang.String%29)，

```
player.setDataSource("/sdcard/audio/"+filename);
player.prepare();
player.start(); 
```

会工作我会想。

# ruby-on-rails - ActionView::MissingTemplate

> ID：10134739
> 
> 赞同：4
> 
> 时间：2012-04-13T03:10:53.683
> 
> 标签：ruby-on-rails, deployment, haml

将 mysite 部署到 VPS 后，我遇到了这个运行时错误。请注意，在我的本地机器上，一切正常。

当我尝试通过控制器路由访问任何视图时，可以说 PostsController#index

我收到了这个错误

```
Completed 500 Internal Server Error in 3ms
ActionView::MissingTemplate (Missing template posts/index, application/index with {:handlers=>[:builder, :erb], :formats=>[:html], :locale=>[:en]}. Searched in:
"/home//dev..com/releases/20120413023845/app/views"
):
app/controllers/posts_controller.rb:7:in `index' 
```

我认为haml是问题的原因，但我还不确定。

我添加了 haml gems 并捆绑了我的应用程序

```
 gem 'haml'
  gem 'haml-rails' 
```

更新：

当我将 index.html.haml 更改为 index.html.erb 并评论模板内容时它可以工作，但它忽略了 application.html.haml 布局而没有错误。

我注意到当 cap 命令运行时应用程序没有编译我的 hamls

```
RAILS_ENV=production RAILS_GROUPS=assets assets:precompile

Compiled application.js  (1ms)  (pid 15420)
Compiled application.css  (1ms)  (pid 15420)
Compiled application.js  (1ms)  (pid 15420)
Compiled application.css  (1ms)  (pid 15420) 
```

这是否意味着我对资产管道管理的 haml 转换器有问题？我如何告诉rails 在生产环境中处理haml。

这是我的生产宝石版本

```
Using rake (0.9.2.2) 
Using i18n (0.6.0) 
Using multi_json (1.2.0) 
Using activesupport (3.2.3) 
Using builder (3.0.0) 
Using activemodel (3.2.3) 
Using erubis (2.7.0) 
Using journey (1.0.3) 
Using rack (1.4.1) 
Using rack-cache (1.2) 
Using rack-test (0.6.1) 
Using hike (1.2.1) 
Using tilt (1.3.3) 
Using sprockets (2.1.2) 
Using actionpack (3.2.3) 
Using mime-types (1.18) 
Using polyglot (0.3.3) 
Using treetop (1.4.10) 
Using mail (2.4.4) 
Using actionmailer (3.2.3) 
Using arel (3.0.2) 
Using tzinfo (0.3.33) 
Using activerecord (3.2.3) 
Using activeresource (3.2.3) 
Using highline (1.6.11) 
Using net-ssh (2.3.0) 
Using net-scp (1.0.4) 
Using net-sftp (2.0.5) 
Using net-ssh-gateway (1.1.0) 
Using capistrano (2.11.2) 
Using chunky_png (1.2.5) 
Using coffee-script-source (1.3.1) 
Using execjs (1.3.0) 
Using coffee-script (2.2.0) 
Using rack-ssl (1.3.2) 
Using json (1.6.6) 
Using rdoc (3.12) 
Using thor (0.14.6) 
Using railties (3.2.3) 
Using coffee-rails (3.2.2) 
Using fssm (0.2.9) 
Using sass (3.1.15) 
Using compass (0.12.1) 
Using compass-rails (1.0.1) 
Using haml (3.1.4) 
Using haml-rails (0.3.4) 
Using hpricot (0.8.6) 
Using mysql2 (0.3.11) 
Using bundler (1.1.3) 
Using rails (3.2.3) 
Using sexp_processor (3.1.0) 
Using ruby_parser (2.3.1) 
Using sass-rails (3.2.5) 
Using uglifier (1.2.4) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-17T14:43:48.737

可能是你的

```
gem 'haml' 
```

不在生产组中（或者，不在开发组之外）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-19T09:59:02.010

检查 Gemfile 中的 gem 'haml-rails' in :production group

# javascript - 根据内部元素动态更改 CSS

> ID：10134741
> 
> 赞同：1
> 
> 时间：2012-04-13T03:11:24.767
> 
> 标签：javascript, jquery, css, jquery-ui

看看我的代码 [http://jsfiddle.net/rkumarnirmal/GXAYa/6/](http://jsfiddle.net/rkumarnirmal/GXAYa/6/)

`#box_bg`是外灰盒，`#box`是内黑盒。我在`#box`. 我需要的是`#box_bg`根据内部的大小动态放大或减小它的高度`#box`。

有人可以帮我吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T03:22:31.150

不要指定绝对高度：只需使用`height:auto`. `#box`对于框架的静态位置和一些填充，`#box_bg`将自动调整其内容的大小。

见[http://jsfiddle.net/GXAYa/18/](http://jsfiddle.net/GXAYa/18/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T03:17:30.460

更改`height:260px;`为`height:auto;`。

UPD：添加`position:relative`到`#box`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-13T03:22:43.943

我不确定你为什么需要这个职位：绝对，所以试试这个作为一个选项，看看它是否能解决你的问题：

```
#box_bg {
cursor: move;
background-color: #4f575e;
border-radius: 10px;
-moz-box-shadow: 3px 3px 5px 6px #00000;
-webkit-box-shadow: 0px 3px 5px 6px #00000;
box-shadow: 0px -3px 3px 1px #4f575e;
    overflow: hidden;
width: 245px;
    position: relative;
    padding-bottom: 2em;
margin-left: 100px;
margin-top: 150px;
}

#box {
cursor: pointer;

background-color: #24272a;
border-top-left-radius: 3px;
border-top-right-radius: 3px;
border-bottom-right-radius:10px;
border-bottom-left-radius:10px;
box-shadow: 0px 0px 3px 1px #4f575e;
width: 225px;
margin-top: 20px;
padding: 10px;
word-wrap: break-word;
} 
```

[JSFiddle 在这里](http://jsfiddle.net/GXAYa/20/)。

# graph - 如何计算源和目标相同的图中两个节点之间的最短路径？

> ID：10134742
> 
> 赞同：0
> 
> 时间：2012-04-13T03:11:33.800
> 
> 标签：graph, shortest-path, dijkstra

如何计算源和目标相同的图中两个节点之间的最短路径？

图形：

```
A->B(5)
A->D(5)
A->E(7)
B->C(4)
C->D(8)
C->E(2)
D->C(8)
D->E(6)
E->B(3) 
```

例如，B 和 B 之间的最短路径是什么？我尝试使用 dijkstra 但没有用，它总是在第一步返回 B->B 。

正确答案：B->C->E->B

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T07:57:38.360

将顶点一分为二：B1 和 B2，其中原图中所有从 B 开始的边都将从 B1 开始；所有在 B 中终止的边都将在 B2 中终止。

之后，您可以运行 Dijkstra 在修改后的图中找到从 B1 到 B2 的最短路径。

*注意：*如果要保留图中的所有路径，请添加附加边 B2->B1。这不会改变循环搜索的结果，原始图中和修改后的图中的所有路径都是等价的

# events - 如何删除多边形坐标/顶点/节点（Google Maps V3）

> ID：10134747
> 
> 赞同：2
> 
> 时间：2012-04-13T03:12:20.197
> 
> 标签：events, google-maps, polygon, editing

如何使用多边形的 insert_at、remove_at 和 set_at 事件。

有人可以提供一些关于如何使用它们以及事件参数是什么的示例。

我现在要做的是当用户绘制多边形并双击多边形的节点时，我希望从多边形中删除节点。

可以吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2015-03-20T14:02:33.473

如果您的多边形是可编辑的，您可以向多边形添加一个事件侦听器，然后处理单击或右键单击。例如：

```
poly = new google.maps.Polygon({
  editable: true
});
poly.setMap(map);
google.maps.event.addListener(poly, 'rightclick', function(event) {
  if (event.vertex == undefined) {
    return;
  } else {
    removeVertex(event.vertex);
  }
}); 
```

上面的代码将创建一个多边形并附加一个事件侦听器，该侦听器捕获对多边形顶点（节点）的右键单击，然后调用 removeVertex 函数。

```
function removeVertex(vertex) {
  var path = poly.getPath();
  path.removeAt(vertex);
} 
```

类似的解决方案也可以应用于折线。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T16:34:48.113

这里有 2 个链接可能会有所帮助：

对于事件： [https ://developers.google.com/maps/documentation/javascript/events](https://developers.google.com/maps/documentation/javascript/events)

您询问的事件： [https ://developers.google.com/maps/documentation/javascript/overlays#PolygonArrays](https://developers.google.com/maps/documentation/javascript/overlays#PolygonArrays)

我刚刚结束了使用 remove_at 事件。这是我使用它的方式：

```
google.maps.event.addListener(this, 'click', function(event) {                   
        path = this.getPath();
        for(i=0;i<path.length;i++){
            if( event.latLng == path.getAt(i)){
                 path.removeAt(i);
            }
        }
 }); 
```

确保在多边形实际路径上使用它们，而不是多边形对象。

# php - 关于苹果增强的通知格式

> ID：10134749
> 
> 赞同：0
> 
> 时间：2012-04-13T03:12:27.850
> 
> 标签：php, apple-push-notifications, apns-php

我使用 php 向 apns 发送推送消息，我使用“增强通知格式”发送..但我无法得到返回“错误响应数据包中的代码”任何人都可以帮助我吗？这是我的代码

```
<?php
header("Content-Type: text/html; charset=UTF-8");

$deviceToken = "123";

$content = "testing";

if(isset($content))

{

$newContent=substr($content,0,30)."...";

$re_content=iconv("GB2312","UTF-8",$newContent);
$pass = 'Ladder';

$body = array("aps" => array("alert" => $re_content, "badge" => 1, "sound" => 'received5.caf'));

            $ctx = stream_context_create();

            stream_context_set_option($ctx, 'ssl', 'local_cert', 'dev.pem');

            stream_context_set_option($ctx, 'ssl', 'passphrase', $pass);

            //$fp = stream_socket_client('ssl://gateway.push.apple.com:2195', $err, $errstr, 60, STREAM_CLIENT_CONNECT, $ctx);

            $fp = stream_socket_client('ssl://gateway.sandbox.push.apple.com:2195', $err, $errstr, 60, STREAM_CLIENT_CONNECT, $ctx);

            stream_set_blocking ($fp, 0);
            if (!$fp) 
            {
                print "Failed to connect $err $errstrn";
                return;
            }
            else
            {
            print "Connection OK\n<br/>";
            }

            $payload = json_encode($body);

            $msg = 
            // new: Command "1"
            chr(1)
            // new: Identifier "1111"
            . chr(1) . chr(1) . chr(1) . chr(1)
            // new: Expiry "tomorrow"
            . pack('N', time() + 86400)
            // old 
            . chr(0) . chr(32) . pack('H*', str_replace(' ', '', $deviceToken)) . chr(0) . chr(strlen($payload)) . $payload;
            //print "sending message :" . $payload . "\n";
            fwrite($fp, $msg);
            //checkAppleErrorResponse($fp);
            echo 'Done\n';

            fclose($fp);

            echo $apple_error_response = fread($fp, 6);

            /* return false;
            exit(); */
}
?> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-12T14:46:36.507

我在 fwrite 之后和关闭命令之前调用这个函数

```
function error_response($fp)
{
    $read = array($fp);
    $null = null;
    $changedStreams = stream_select($read, $null, $null, 0, 1000000);

    if ($changedStreams === false)
    {
        echo ("Error: Unabled to wait for a stream availability");
    }
    elseif ($changedStreams > 0)
    {
        $responseBinary = fread($fp, 6);
        if ($responseBinary !== false || strlen($responseBinary) == 6)
        {
            $response = unpack('Ccommand/Cstatus_code/Nidentifier', $responseBinary);
            var_dump($response);
        }
    }
} 
```

当我以增强格式发送通知时，它可以工作。但不适用于简单格式的通知。我不知道为什么...任何线索？

# android - 使用异步任务与使用异步任务在活动中完成任务 呼叫服务

> ID：10134751
> 
> 赞同：2
> 
> 时间：2012-04-13T03:12:35.160
> 
> 标签：android

当需要进行异步操作时，通常建议将其放入服务中，也许是意图服务。伟大的。但是，也不建议从服务启动活动......因此，当异步响应返回到服务内部时，用户可能在不同的屏幕上。然后它们就是绑定到服务的整个方面......人们想知道哪种方式更好，为什么？我的意思是服务很酷，但存在与服务调用的绑定，还有一个问题是服务不应该回调到活动中。那么哪种方式更好。使用 AsyncTask 与 Service 进行异步工作的标准是什么？还有 requestForResult() 选项也...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T04:57:34.237

标准基本上是，

1.  即使您的应用程序活动不再运行，您是否需要定期更新某些数据或继续某些任务（android 给出了一个音乐播放器的示例，即使没有可见的活动，音乐也会继续播放）？在这里使用服务。

2.  您是否需要多个应用程序运行您的数据或某些任务？在这种情况下，应用程序需要绑定到您的服务并访问信息。

3.  您是否有涉及 IPC 的案例？使用服务。

4.  您是否有一种情况，您需要做的就是完成一项繁重的任务，例如下载数据、一些需要时间的踢屁股算法？在后台线程中执行所有繁重的任务，并在完成后更新 UI。使用异步任务。

异步任务很简单。主要用于您的活动中，以在单独的线程中执行繁重的任务以避免 ANR。

另一方面，服务用于执行即使您的应用程序未运行也需要运行的任务，其他应用程序需要绑定以更新数据，您需要在显示活动之前更新数据。

我相信还有更多的标准，但这些只是我刚刚想到的一些。

# nosql - 有人在生产中使用 HyperDex 吗？

> ID：10134753
> 
> 赞同：19
> 
> 时间：2012-04-13T03:12:57.270
> 
> 标签：nosql, hyperdex

我刚刚注意到，相对较新的开源 noSQL 数据库“ [HyperDex](http://hyperdex.org) ”在 SO 中的问题中没有提及 - 有人在使用它吗？它与其他 noSQL 引擎相比如何？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-09T17:16:06.350

我们正在与 LinkedIn 的一些人合作，使用 HyperDex 来支持他们的一些自定义分析应用程序。我们还在与几家初创公司讨论在 HyperDex 之上构建应用程序。

我们的邮件列表是[HyperDex 讨论列表](https://groups.google.com/forum/?fromgroups#!forum/hyperdex-discuss)，最近比较活跃。其中许多人正在使用 HyperDex 并帮助我们改进它。

最后，HyperDex 在其他流行的 NoSQL 引擎中占有一席之地。HyperDex[性能基准测试](http://hyperdex.org/performance/)表明，与其他流行系统相比，HyperDex 提供了更高的吞吐量和更低的延迟。HyperDex 教程展示了部署集群是多么容易。从快速入门开始，逐步部署真正容错的集群。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-27T10:14:40.497

Emin 今天在我们公司做了一个演讲。听起来很有趣的项目，但我认为如果在生产中部署，您会遇到一些问题，例如负载平衡和最佳子空间方案。

您可以在他们的网站上找到[性能比较。](http://hyperdex.org/performance/)这篇[论文](http://hyperdex.org/papers/)也值得一读。

# google-chrome - 为什么谷歌浏览器没有显示正确的编码？

> ID：10134754
> 
> 赞同：11
> 
> 时间：2012-04-13T03:13:23.357
> 
> 标签：google-chrome

如果这不是发布此类问题的正确位置，我很抱歉，但我无法找到答案。我不知道这是编码问题还是什么，但在这么多网页上，Chrome 无法正确显示某些字符。即 en 和 em 破折号、省略号等。

这是一个例子。

[![编码示例](../Images/c73254b3dcee0adb8868a7411321d21c.png)](https://i.stack.imgur.com/PqkvX.jpg)

带有变音符号的那个 O 应该是一个省略号。我在 Firefox 上看不到问题，在另一台装有 Chrome 的计算机上也看不到问题。编码设置为自动检测和 UTF-8。如果我复制并粘贴带有变音符号的 O，它会粘贴为省略号。

知道为什么会发生这种情况以及如何解决吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-13T03:18:04.163

如果它作为预期的字符粘贴回来，那么这不是编码问题 - 而是字体问题：您的系统中可能安装了一种字体，Chrome 正在使用该字体来显示 SO（可能还有其他页面的文本）。如果此字体损坏（例如，它本身的编码声明不正确），则可能会发生这种情况。

解决方法是找出哪个是攻击性字体并将其从系统中卸载。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-18T11:56:24.617

我在使用通用类型客户端的 Mac OSX.7.5 上遇到了 Chrome 的问题。

在 Chrome 中，转到弹出侧菜单（3 个水平条）> 工具 > 编码并将页面设置为自动检测、UTF-8（如果它会降低浏览器的速度，您应该关闭自动检测）。

在 Universal Type Client 中，有 2 个 Arial 版本相互冲突。

选择 Arial 的通用副本并将其停用。

现在，所有页面都可以在 Chrome 中正确呈现。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-03T05:55:35.163

我有一个类似的问题。但问题是，网站上的文字显示很好。只是谷歌浏览器标签中的文字没有显示。它出现了正方形。为了解决这个问题，我不得不将编码更改为 Auto-Detect 和 UTF-8（我必须取消选择它然后再次选择它）。然后重新启动我的计算机以显示选项卡中的文字。

但是，我发现下次我打开电脑时，我必须经历同样的过程，这很烦人。有没有其他人遇到过这个问题，如果有，我们如何解决这个问题？

干杯，C

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-21T11:38:29.560

这也让我发疯了。我的解决方案类似于 pho3nix 的回答；但我没有创建本地样式表覆盖，而是从我的系统中删除了 Helvetica Neue Regular。称我为势利小人，但比将其映射到 Aerial 更好:-)

无需删除 Helvetica Neue Condensed、Light 或其他变体。如果您已安装，Chrome 会以某种方式选择 Helvetica Neue Regular 来渲染 Helvetica Regular。

Helvetica Neue 字体文件的映射方式（至少有一些）似乎存在问题，这使得它们不适合在浏览器中显示，但在 Photoshop 或 Illustrator 中可以。

# java - Java paint() 仅从 paintAll() 调用一次

> ID：10134756
> 
> 赞同：0
> 
> 时间：2012-04-13T03:13:25.360
> 
> 标签：java, canvas, jframe, jpanel, paint

我有以下代码被调用：

```
 while(true){
        view.onTick();

        trySleep(55);
    } 
```

onTick() 方法是这样描述的：

```
 public void onTick() {
    mainFrame.paintAll(mainFrame.getGraphics());
} 
```

这是我设置 JFrame 和 JPanels 等的地方（mainFrame 是 JFrame）：

```
 private void runProgramSetup(){
    JPanel canvas = new JPanel();
    canvas.setLayout(new BoxLayout(canvas, BoxLayout.Y_AXIS));
    mainFrame.getContentPane().add(canvas);

    //create the main game panel
    mapPanel = new MapPanel(model, this);
    mapPanel.setPreferredSize(new Dimension(TOTAL_FRAME_WIDTH, MAP_PANEL_HEIGHT));
    mapPanel.setBackground(Color.cyan);

    //create the menu panel
    menuPanel = new MenuPanel(model, this);
    menuPanel.setLayout(new BoxLayout(menuPanel, 0));
    menuPanel.setPreferredSize(new Dimension(TOTAL_FRAME_WIDTH, MENUS_PANEL_HEIGHT));

    //add the panels to the window
    canvas.add(mapPanel);
    canvas.add(menuPanel);

    //make both panels visible
    mapPanel.setVisible(true);
    menuPanel.setVisible(true);
} 
```

现在这是我的问题。调用 repaintAll() 时，所有内容都会重新绘制，除了 mapPanel 的重写 paint(Graphics g) 方法：

```
 @Override
public void paint(Graphics g) {
    transformedImages.transformAndStoreImages(model);
    paintGrid(g);
    paintScenery(g);
    paintElements(g);
    paintDraggedElement(g);
    paintUIOverlay(g);
} 
```

它只被调用一次。这就对了。但是，所有其他组件都会继续重新绘制。只有 mapPanel 绘制一次。更奇怪的是。我在 Ubuntu 上运行并遇到此问题。我团队的其他成员都在 Mac 上运行，他们没有这个问题。我能够解决这个问题的唯一方法是用两个绘制调用替换 onTick() ：

```
 public void onTick() {
    mainFrame.repaint();
    mainFrame.paintAll(mainFrame.getGraphics());
} 
```

这就是对我有用的一切。我需要两个电话。两者都不能单独工作。我不喜欢这样做，但显然是因为效率低下.. :/ 有什么想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T03:23:32.573

你应该覆盖JPanel的

```
paintComponent(Graphics g) 
```

不画画

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T15:47:19.733

`mainFrame.repaint()`强制地图刷新的原因是因为`repaint()`调用[`repaint(0, 0, 0, width, height)`](http://docs.oracle.com/javase/1.4.2/docs/api/java/awt/Component.html#repaint%28long,%20int,%20int,%20int,%20int%29)，它会将整个`mainFrame`'s 区域标记为[`RepaintManager`](http://docs.oracle.com/javase/6/docs/api/javax/swing/RepaintManager.html). 这是故意这样设计的，因为您通常不想为了更新组件而重新绘制 JFrame 中的每个像素。所以，在`onTick()`被`mainFrame.paintAll()`调用时，我的猜测是`mapPanel`' 区域没有被标记为脏，所以[`RepaintManager`](http://docs.oracle.com/javase/6/docs/api/javax/swing/RepaintManager.html)跳过它，以节省处理时间。如果您非常确定每次调用时都想重新绘制整个 mapPanel ，那么最简单的方法是在您的方法内部`onTick()`调用。这会将整体标记为脏，因此将尽快重绘。此外，如果您的`mapPanel.repaint()``onTick()``mapPanel``menuPanel`只是使用常规的swing JComponents，您不需要手动使它们重新绘制，如果您正确使用API​​​​，当它们的值更改时它们将被重新绘制。

我知道这是一个老问题，但我想我会回答，以防其他人遇到类似问题。

# java - 用户可安排的 Android GridView

> ID：10134757
> 
> 赞同：0
> 
> 时间：2012-04-13T03:13:26.407
> 
> 标签：java, android, gridview

所以事情就是这样，我想构建一个**GridView ，其中包含一些可由用户移动/重新排列的项目**。与您在 Android 主屏幕上看到的非常相似。

我调查了一些地方，但结果为零。我能找到的最接近的东西是在 developers.android.com 上找到的主屏幕应用程序示例，但它没有我正在寻找的东西（这些项目无法排列）。

请给我一个提示如何做到这一点。也欢迎代码示例。

提前致谢！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T04:23:51.270

我认为你应该实施一个`drag&drop`.

`GridView`可以处理,`OnDragListener`所以你可以做 :`myGridView.setOnDragListener`并用它做任何你想做的事情。

我还建议您检查以下[链接](http://developer.android.com/guide/topics/ui/drag-drop.html)

我希望它有帮助！

# java - 有没有办法在 Eclipse 下的 GAE Java 开发服务器上禁用对 Runtime.checkRestricted 的调用？

> ID：10134759
> 
> 赞同：4
> 
> 时间：2012-04-13T03:13:36.767
> 
> 标签：java, eclipse, google-app-engine

我是那些在开发过程中大量单步执行代码的人之一。从 GAE Java 开发服务器 1.6.4 版开始，该服务器已配备对名为`Runtime.checkRestricted`. 当我单步执行我的代码时，这会导致两个不便：

1.  每当我进入一个函数时，调试器`Runtime.checkRestricted`至少会进入函数（没有源代码）一次，通常是多次。
2.  每当我跨过一个下面有一个大调用树的函数调用时，调试器需要很长时间才能返回。（这在 Eclipse Java 调试器中一直是个问题，但现在真的很糟糕。）

对我来说，所有这些都会严重降低生产力。有什么方法可以禁用此工具，或者至少可以防止调试器进入它？我正在使用带有 GAE 插件的 Eclipse。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T13:34:27.527

添加一个步骤过滤器以过滤掉您不感兴趣的所有步骤断点。Eclipse 文档[提供了如何设置步骤过滤器的指南](http://help.eclipse.org/helios/index.jsp?topic=/org.eclipse.jdt.doc.user/reference/views/debug/ref-usestepfilters.htm)。

在您的特定情况下，您需要为 com.google.appengine.tools.development.* 添加一个包过滤器，因为此包及其子包包含 GAE 的 Runtime 类和 RuntimeHelper 类。最后，不要忘记激活“使用步进过滤器”选项（Shift + F5）。

# css - *zoom 和 zoom 有什么区别？

> ID：10134763
> 
> 赞同：5
> 
> 时间：2012-04-13T03:14:44.517
> 
> 标签：css, zooming

在引导程序的重置部分有一个

```
.clearfix {
*zoom: 1;
} 
```

请问*zoom和zoom有什么区别？

我很感激任何答案。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-13T03:16:49.923

这是一个 css hack，这意味着它只适用于 ie7 及以下。你可以在这里得到详细信息：[http ://www.webdevout.net/css-hacks#unrecommended-asterisk_prefix](http://www.webdevout.net/css-hacks#unrecommended-asterisk_prefix)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T03:16:35.220

[http://en.wikipedia.org/wiki/CSS_filter#Star_hack](http://en.wikipedia.org/wiki/CSS_filter#Star_hack)

我认为这是为了修复 IE。

# android - 在不阻塞应用程序android的情况下执行功能？

> ID：10134765
> 
> 赞同：0
> 
> 时间：2012-04-13T03:14:56.763
> 
> 标签：android, multithreading

如何在不阻塞应用程序android的情况下调用和执行一个函数（这是定位函数）。

我知道我必须使用线程，但我不知道如何，我希望准备好代码。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-13T03:16:22.153

使用以下命令在单独的（非 UI）线程上运行代码：

```
new Thread(new Runnable(){
        public void run(){
            //do stuff here
        }
    }).start(); 
```

这将创建一个新线程（以及相应的 Runnable，其中包含要在其`run()`方法中运行的代码）并启动它——调用 Runnable 中的代码。

或者，您可以查看`AsyncTask`（[更多信息here](http://developer.android.com/reference/android/os/AsyncTask.html)）避免直接使用线程。

# php - 如何为 Yii 中的每个按钮分配动作？

> ID：10134767
> 
> 赞同：1
> 
> 时间：2012-04-13T03:15:17.600
> 
> 标签：php, view, yii

我有一个包含团队组的页面，`delete team`旁边有按钮。当团队不在组中时，它具有将团队添加到组的复选框和按钮。我在 actionView 中写道，它将呈现一个包含团队的组列表。

**GroupController 中的 actionView**

```
public function actionView($id) {
    $group = $this->loadModel($id);

    $teamlst = Group::getAllTeamOfGroup($id);
    $teamnotlst = Group::getAllTeamNotInGroup($id);

    // Submit
    $preSelectedItems = array();
    if (isset($_POST['teamlist'])) {
        $preSelectedItems = array();
        foreach ($_POST['teamlist'] as $selectedItem) {
            $preSelectedItems[] = $selectedItem;
        }
    }
   // $teamNo = CHtml::listData($teamnotlst, 'id', 'name');

    //Delete       

    $this->render('view', array(
        'model' => $group,
        'teamlst' => $teamlst,
        'preSelectedItems'=> $preSelectedItems,
        'group_id'=>$id,
        'teamnotlst' => $teamnotlst,
    ));

    if(isset($_POST['btndeleteteam'])){
            TeamGroup::model()->deleteTeamGroup($team->id, $model->ID);
    }

} 
```

**在视图文件中**

```
<div class="action">    
    <input type="submit" name="btnupdateteam" value="Update Team">        
</div>
<?php echo CHtml::endForm(); ?>
<div class ="team">

<div class="column1">
    <?php foreach ($teamlst as $team): ?>

        <div class="row">
            <?php
            echo $team->name;

            ?> 
            <input type="submit" name="btndeleteteam" value="Delete  Team">
            <?php
            if(isset($_POST['btndeleteteam'])){
                TeamGroup::model()->deleteTeamGroup($team->id, $model->ID);    

            }?>
        </div>

    </div><!-- comment -->
<?php endforeach; ?>
    <?php    

    $preSelectedItems = array();
        if (isset($_POST['teamlist'])) {
            $preSelectedItems = array();
            foreach ($_POST['teamlist'] as $selectedItem) {
                $preSelectedItems[] = $selectedItem;
            }
        }

    $teamNo = CHtml::listData($teamnotlst, 'id', 'name');
    echo CHtml:: checkBoxList('teamlist', $preSelectedItems, $teamNo);
    ?>

</div>

<div class ="team available">

</div> 
```

我的想法是，当您单击`delete team`按钮时，它将从组中删除团队，我有一个方法

```
TeamGroup::model()->deleteTeamGroup($team->id, $model->ID); 
```

当团队不在组中时，它将具有复选框和更新按钮，如果选中复选框，则会将团队添加到组中。

感谢提前！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T14:43:57.130

如果我理解正确你的问题是什么，那么你需要阅读这个文档章节

[http://www.yiiframework.com/doc/guide/1.1/en/basics.controller#action](http://www.yiiframework.com/doc/guide/1.1/en/basics.controller#action)

您的所有操作，即`delete`或`add`必须驻留在控制器中而不是在视图中

而不是这个：

```
 if(isset($_POST['btndeleteteam'])){
            TeamGroup::model()->deleteTeamGroup($team->id, $model->ID);    

        }?> 
```

你必须在控制器中添加这样的东西

```
public function actionDelete($id) {
    TeamGroup::model()->deleteTeamGroup($id);    
    $this->redirect('group/view');
} 
```

而不是这个

```
<input type="submit" name="btndeleteteam" value="Delete  Team"> 
```

像这样的东西必须在视图中

```
<a href="<?php echo Yii::app()->createUrl("group/delete",array('id'=>$team->id));?>">delete</a> 
```

或者您可以修改 CGridView 以满足您的需求

# objective-c - UIButton swizzling 导致 UITableViewCellAccessoryType 出现问题

> ID：10134769
> 
> 赞同：0
> 
> 时间：2012-04-13T03:15:33.217
> 
> 标签：objective-c, uibutton, uitableview, swizzling

当is为真时，我有一堂课会调侃`UIButton`'s 。但是，在涉及和使用时也是如此。正在发生的事情是，由于某种原因，它正在对它们进行调配并在其后面添加自定义背景等。`buttonType``UIButtonTypeCustom``UITableViewCellAccessoryCheckmark``UITableViewCellAccessoryDisclosure``accessoryType`

我需要做的是检查`UIButton`我试图调配的是否是 a`UITableViewCellAccessoryType`但我不知道如何做这样的事情。

这是我用来调配`UIButton`.

```
if ([self isMemberOfClass:[UIButton class]] && self.buttonType == UIButtonTypeCustom) {

        UIImage *upImage = [theme rectButtonUp], *downImage = [theme rectButtonDown];
        UIColor *upColor = [theme rectButtonUpTextColor], *downColor = [theme rectButtonDownTextColor];

        /* If the highlighted title is set to _theme_asdf, look for a custom
         * button image called "asdf" and use that. Clear out this highlighted
         * title string. */

        NSString *hlTitle = [self titleForState:UIControlStateHighlighted];
        if ([hlTitle isEqualToString:@"_theme_add"] || [hlTitle isEqualToString:@"Add"]) {
            upImage = [theme rectButtonUpAdd];
            downImage = [theme rectButtonDownAdd];
        } else if ([hlTitle isEqualToString:@"_theme_remove"]) {
            upImage = [theme rectButtonUpRemove];
            downImage = [theme rectButtonDownRemove];
        } else {
            upImage = [theme rectButtonUp];
            downImage = [theme rectButtonDown];
        }

        [self setTitle:nil forState:UIControlStateHighlighted];
        upColor = [theme rectButtonUpTextColor];
        downColor = [theme rectButtonDownTextColor];

        [self setBackgroundImage:upImage forState:UIControlStateNormal];
        [self setBackgroundImage:downImage forState:UIControlStateHighlighted];
        [self setBackgroundImage:downImage forState:UIControlStateSelected];

        if (upColor) {
            [self setTitleColor:upColor forState:UIControlStateNormal];
            [self setTitleColor:[upColor colorByLighteningTo:0.5f] forState:UIControlStateDisabled];
        }
        if (downColor) {
            [self setTitleColor:downColor forState:UIControlStateHighlighted];
            [self setTitleColor:downColor forState:UIControlStateSelected];
        }  
} 
```

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T03:35:37.310

我所做的快速修复完成了我想要实现的目标。

代码： if ([self isMemberOfClass:[UIButton class]] && self.buttonType == UIButtonTypeCustom) {

```
 if (![[self titleLabel] text]) {

    } else {

        UIImage *upImage = [theme rectButtonUp], *downImage = [theme rectButtonDown];
        UIColor *upColor = [theme rectButtonUpTextColor], *downColor = [theme rectButtonDownTextColor];

        /* If the highlighted title is set to _theme_asdf, look for a custom
         * button image called "asdf" and use that. Clear out this highlighted
         * title string. */

        NSString *hlTitle = [self titleForState:UIControlStateHighlighted];
        if ([hlTitle isEqualToString:@"_theme_add"] || [hlTitle isEqualToString:@"Add"]) {
            upImage = [theme rectButtonUpAdd];
            downImage = [theme rectButtonDownAdd];
        } else if ([hlTitle isEqualToString:@"_theme_remove"]) {
            upImage = [theme rectButtonUpRemove];
            downImage = [theme rectButtonDownRemove];
        } else {
            upImage = [theme rectButtonUp];
            downImage = [theme rectButtonDown];
        }

        [self setTitle:nil forState:UIControlStateHighlighted];
        upColor = [theme rectButtonUpTextColor];
        downColor = [theme rectButtonDownTextColor];

        [self setBackgroundImage:upImage forState:UIControlStateNormal];
        [self setBackgroundImage:downImage forState:UIControlStateHighlighted];
        [self setBackgroundImage:downImage forState:UIControlStateSelected];

        if (upColor) {
            [self setTitleColor:upColor forState:UIControlStateNormal];
            [self setTitleColor:[upColor colorByLighteningTo:0.5f] forState:UIControlStateDisabled];
        }
        if (downColor) {
            [self setTitleColor:downColor forState:UIControlStateHighlighted];
            [self setTitleColor:downColor forState:UIControlStateSelected];
        }
    }   
} 
```

所以，基本上，所有的`UIButtons`都有一个`titleLabel`with`text`但`UITableViewCellAccessoryType`没有。因此，我们取得了成功。这可能是一个 hack，但现在它帮助我完成了我需要的东西。

# iphone - 从 WebView 触发的调用以 iPhone 结束时触发的事件/方法？

> ID：10134771
> 
> 赞同：0
> 
> 时间：2012-04-13T03:15:40.790
> 
> 标签：iphone, ios, uiwebview, call

我正在通过 UIWebView 触发电话，因此当通话结束时，用户会通过以下代码直接返回到我的应用程序：

```
UIWebView *callWebview = [[UIWebView alloc] init];
NSURL *telURL = [NSURL URLWithString:@"tel:number-to-call"];
[callWebview loadRequest:[NSURLRequest requestWithURL:telURL]]; 
```

当它将控制权返回给我的应用程序时，我想执行一些代码，但我无法确定操作系统在调用结束后返回我的应用程序时是否调用了任何方法？ViewWill、ViewDid 等在控制返回时永远不会被调用。

如果在调用结束并且控制返回到 webview/app 时调用了任何东西怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T06:37:25.457

UIWebview 类有一些委托函数。webview 在开始加载和完成加载请求等时调用这些函数。我的英语很差，希望你能理解我。如果我误读了你的问题，我的回答不是你想要的，请原谅我。

# google-chrome - webkit隐藏从边界半径溢出的内容

> ID：10134778
> 
> 赞同：0
> 
> 时间：2012-04-13T03:16:45.897
> 
> 标签：google-chrome, css, safari, webkit

[http://jsfiddle.net/Bery8/3/](http://jsfiddle.net/Bery8/3/)

我有一个具有`position: relative`和 的节点`border-radius`。我试图隐藏流出的内容`border-radius`，想知道是否有人在 webkit.xml 中对此进行了修复。我需要`relative`定位用于其他目的并且无法移除它。

似乎在 Mozilla 中运行良好。

```
<div>
    foo
    <span>content</span>
    <span>content</span>
    <span>content</span>
    <span>content</span>
    <span>content</span>
</div>

<style>
div {
    border        : 1px solid #000;
    border-radius : 20px;
    overflow      : auto;
    position      : relative;
    margin        : 10px;
    max-height    : 100px;
}

span {
    display    : block;
    background : teal;
    padding    : 10px;
}
</style> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T03:21:38.367

我不确定我是否理解这个问题，但是如果你添加`border-radius: 20px`到`span`元素中它会解决它吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T03:25:57.727

添加`border-radius`到`span`太

# model-checking - 从 Spin Modelchecker 了解错误跟踪

> ID：10134779
> 
> 赞同：2
> 
> 时间：2012-04-13T03:16:47.480
> 
> 标签：model-checking, spin

我正在尝试使用 Spin Model Checker 对两个对象（A 和 B）之间的游戏进行模型检查。对象在板上移动，每个位置由其 (x,y) 坐标定义。这两个物体应该不会碰撞。我有三个进程：init，A Model，B Model。我正在检查一个 ltl 属性的模型：（用于检查两个对象是否曾经占据相同位置的 liveness 属性）

```
ltl prop1 { [] (!(x_a == x_b) && !(y_a == y_b)) } 
```

我得到的错误线索是：init -> A Model -> B Model -> init

但是，根据显示的数据，我不应该得到错误线索（反例）：x_a=2，x_b=1，y_a=1，y_b=1。

同样，第一个 init 确实经过了 init 进程的所有行，但第二个只显示到它的最后一行。

此外，我的 A 模型和 B 模型仅由“do”块中的警卫和动作组成，如下所示。但是它们更复杂，并且在“->”右侧有 if 块

```
active proctype AModel(){
do
:: someValue == 1 -> go North
:: someValue == 2 -> go South
:: someValue == 3 -> go East
:: someValue == 4 -> go West
:: else -> skip;
od
} 
```

我需要在原子块中放入任何东西吗？我问的原因是错误跟踪显示的行甚至没有进入“do”块，它只是两个模型的第一行。

编辑： LTL 属性是错误的。我将其更改为：

```
ltl prop1 { [] (!((x_a == x_b) && (y_a == y_b))) } 
```

但是，我仍然得到完全相同的错误线索。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T03:57:24.533

您的 LTL 属性执行错误。本质上，SPIN 发现的反例是上述 LTL 的真正反例。

```
[] ( !(x_a == x_b) && !(y_z == y_b) )   =>
[] ( !(2 == 1) && !(1 == 1) )  =>
[] ( !0 && !1) =>
[] ( 1 && 0)   =>
[] 0  =>
false 
```

LTL 应该是：

```
always not (same location) =>
[] (! ((x_a == x_b) && (y_a == y_b))) =>
[] (! ((2 == 1) && (1 == 1))) =>
[] (! (0 && 1) =>
[] (! 0) =>
[] 1 =>
true 
```

关于你的初始化和任务。启动任务时，您希望确保在任务运行之前初始化已完成。我将使用以下两种方法之一：

```
init { ... atomic { run taskA(); run taskB() } where tasks are spawned once all initialization is complete` 
```

或者

```
bool init_complete = false;
init { ...;  init_complete = true }
proctype taskA () { /* init local stuff */ ...; init-complete -> /* begin real works */ ... } 
```

您的 LTL 可能在初始化期间失败。

并且根据您的问题，如果您更改 x 或 y，您最好在 atomic{} 中同时更改两者。

# maven - Maven 不会从我的存储库中下载最新的 jar

> ID：10134781
> 
> 赞同：1
> 
> 时间：2012-04-13T03:16:53.340
> 
> 标签：maven

我遇到了一个奇怪的问题，即 Maven 不会从我的存储库中下载最新的 jar。我认为maven会检查本地jar的sha1文件和存储库上的sha1文件，如果不同，它应该下载最新的jar。但在我的情况下它不会下载，有人可以帮忙吗？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-13T04:41:04.327

您可以使用 -U 标志运行 maven。这迫使 maven 也在非快照依赖项上检查新版本。

# jquery - AJAX 更新后如何运行 Greasemonkey 函数？

> ID：10134785
> 
> 赞同：13
> 
> 时间：2012-04-13T03:17:24.143
> 
> 标签：jquery, ajax, greasemonkey

我有一个 GM 脚本，可以在 Facebook 页面上的某些超链接旁边添加按钮。但是，任何 AJAX 更新都会破坏页面该部分中的按钮（即，当您单击“查看更多评论”时 - 该线程上的所有按钮都会消失）

我**想做的事：**
在某些 AJAX 操作完成后重新运行我的 GM 功能 - 主要是在查看更多评论和加载新页面时（即点击不同的组页面，这都是 AJAXed）

我**目前所做的：**
有一个 30 秒的循环，每 30 秒重新运行一次我的代码。不理想。设置较短的循环只会导致滞后
*编辑 - 它实际上会制作越来越多的按钮。*超级*不理想*！

**您如何提供帮助：**
在 AJAX 完成加载某些内容后，我应该使用什么代码来触发我的函数？我应该怎么做才能使我的代码仅在我想要的 AJAX 更新时触发，例如“新页面”和“更多评论”更新？
*编辑 - 我只需要在更新的位上重新运行我的代码（这甚至可能吗？）*

注意：
我搜索了一下，找到了一些普通 jQuery、asp.net 等的答案，但没有找到 GM-jQ 组合。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-13T03:41:19.003

这是一个常见的问题。

使用[此答案](https://stackoverflow.com/a/8283815/331508)`waitForKeyElements()`中所示的功能。

默认情况下，它将处理您通过 jQuery 选择器指定的类型的每个新元素，每次处理一次，并且在新元素出现后的几毫秒内处理一次。

~~~
链接到目标页面并准确指定您正在为更具体的应用程序做什么。

# python - 在 Dajaxice (Django) 中，如何指定 GET 与 POST？

> ID：10134787
> 
> 赞同：0
> 
> 时间：2012-04-13T03:17:56.257
> 
> 标签：python, ajax, django, dajaxice

在[Dajaxice](http://www.dajaxproject.com/)似乎一切都是 POST。我已经读过混合 GET 和 POST 不是一个好习惯，我想我知道什么时候使用哪个。

那么如何在 Dajaxice 中指定 GET 请求呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T12:42:52.153

[你可以在这里](http://django-dajaxice.readthedocs.org/en/latest/quickstart.html#how-can-i-do-a-get-request-instead-of-a-post-one)看到

GET 方法在注册装饰器中定义：

```
@dajaxice_register(method='GET') 
```

# jquery - 从 grails 和 ajax 中的 jqXhR 获取自定义错误错误消息并重定向 url

> ID：10134797
> 
> 赞同：0
> 
> 时间：2012-04-13T03:19:48.167
> 
> 标签：jquery, ajax, grails, redirect

我正在从事一个 grails 项目，但我一生都无法弄清楚如何完成这项任务。基本上我有一个向控制器触发 ajax 请求的页面。控制器然后检查资源是否有效并向客户端发送回 410，暗示资源已消失。客户端然后打开一个 jquery 对话框并告诉用户他将被重定向，因为资源无效。这是我用来执行此操作的代码：

```
response.setStatus(410, message)
   def message =message(code:'default.listing.expired.message', args:[email]).toString()
    response.setStatus(410, message)
    forward action:"list"
    return 
```

因此，当我执行 jqXHR.statusText 时，我希望看到我的客户消息，但我只是收到了普通的 HTTP“Gone”消息。另外，如何访问服务器转发到的 URL (forward action:"list") ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T04:57:21.087

您应该使用 JSON（或 XML，或您可以在客户端轻松读取的任何内容）进行响应，尝试：

```
response.setStatus(410) //set response status
def data = [
  message: message(code:'default.listing.expired.message', args:[email]).toString(),
  link: createLinkTo(action: 'list')
]
render(data as JSON) //send response data as JSON 
```

# php - Cakephp 2.1.1 的内部服务器错误经常发生

> ID：10134802
> 
> 赞同：2
> 
> 时间：2012-04-13T03:20:25.690
> 
> 标签：php, apache, cakephp, mod-rewrite

Cakephp 2.1.1 应用程序正在创建大量内部服务器错误。每当我重新启动 apache 时，它​​就会重新开始工作，但过一会儿就会停止工作。

以下是我在错误日志中得到的内容。

```
2012-04-13 13:13:52 Error: [MissingControllerException] Controller class GController could not be found.
#0 /home/commstrat2_web/html/roadconference/app/webroot/index.php(96): Dispatcher->dispatch(Object(CakeRequest), Object(CakeResponse))
#1 {main} 
```

谁能弄清楚为什么？

**更新：以下是来自该站点的错误，该错误非常相似并且已被复制，但与日志中的错误不同**

```
2012-04-13 12:57:27 Error: [MissingControllerException] Controller class AssetsController could not be found.
#0 /home/commstrat2_web/html/nbnsummit/app/webroot/index.php(96): Dispatcher->dispatch(Object(CakeRequest), Object(CakeResponse))
#1 {main}
2012-04-13 12:57:27 Error: [MissingControllerException] Controller class ImagesController could not be found.
#0 /home/commstrat2_web/html/nbnsummit/app/webroot/index.php(96): Dispatcher->dispatch(Object(CakeRequest), Object(CakeResponse))
#1 {main} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T20:45:28.640

我们对 2 项服务也有类似的问题。两个服务都写入同一个缓存。尝试更改配置文件中缓存的前缀

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T18:41:32.403

我的解决方案是将以下行添加到我的`app/Config/routes.php`文件中。它将用户重定向到我的主页。

```
Router::connect('/Assets', array('controller' => 'mainpages', 'action' => 'index')); 
```

# c - 按位向左旋转函数

> ID：10134805
> 
> 赞同：11
> 
> 时间：2012-04-13T03:21:19.313
> 
> 标签：c

我正在尝试实现一个左旋转函数，它将整数 x 左旋转 n 位

*   例如：rotateLeft(0x87654321,4) = 0x76543218
*   法律行动：~ & ^ | + << >>

到目前为止，我有这个：

```
int rotateLeft(int x, int n) {
  return ((x << n) | (x >> (32 - n)));
} 
```

我已经意识到不适用于有符号整数..有没有人知道如何解决这个问题？

所以现在我尝试了：

```
int rotateLeft(int x, int n) {
  return ((x << n) | ((x >> (32 + (~n + 1))) & 0x0f));
} 
```

并收到错误：

错误：测试 rotateLeft(-2147483648[0x80000000],1[0x1]) 失败... ...给出 15[0xf]。应该是 1[0x1]

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-13T03:31:55.133

当前编译器友好旋转的最佳实践是[这个 community-wiki Q&A](https://stackoverflow.com/questions/776508/circular-shift-rotate-operations-in-c)。来自 wikipedia 的代码不会产生非常好的带有 clang 的 asm，或者 gcc 早于 5.1。

[Wikipedia](http://en.wikipedia.org/wiki/Circular_shift)上有关于位旋转又名循环移位的非常好的详细解释。

从那里引用：

```
unsigned int _rotl(const unsigned int value, int shift) {
    if ((shift &= sizeof(value)*8 - 1) == 0)
      return value;
    return (value << shift) | (value >> (sizeof(value)*8 - shift));
}

unsigned int _rotr(const unsigned int value, int shift) {
    if ((shift &= sizeof(value)*8 - 1) == 0)
      return value;
    return (value >> shift) | (value << (sizeof(value)*8 - shift)); 
```

在您的情况下，由于您无权访问乘法运算符，因此可以替换`*8`为`<< 3`.

**编辑**您还可以删除`if`给定您不能使用的语句的语句`if`。这是一种优化，但没有它你仍然可以获得正确的值。

请注意，如果您真的打算在`signed`整数上旋转位，则旋转结果的解释将取决于平台。具体来说，这将取决于平台使用的是[Two's Complement](http://en.wikipedia.org/wiki/Two%27s_complement)还是[One's Complement](http://en.wikipedia.org/wiki/One%27s_complement)。我想不出一个有意义的应用程序来旋转有符号整数的位。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-13T09:43:06.317

```
int rotateLeft(int x, int n) {
  return (x << n) | (x >> (32 - n)) & ~((-1 >> n) << n);
} 
```

更新：（非常感谢@George）

```
int rotateLeft(int x, int n) {
  return (x << n) | (x >> (32 - n)) & ~(-1 << n);
} 
```

不使用'-'版本。

```
int rotateLeft(int x, int n) {
    return (x << n) | (x >> (0x1F & (32 + ~n + 1))) & ~(0xFFFFFFFF << n);
}

//test program
int main(void){
    printf("%x\n",rotateLeft(0x87654321,4));
    printf("%x\n",rotateLeft(0x87654321,8));
    printf("%x\n",rotateLeft(0x80000000,1));
    printf("%x\n",rotateLeft(0x78123456,4));
    printf("%x\n",rotateLeft(0xFFFFFFFF,4));
    return 0;
}
/* result : GCC 4.4.3 and Microsoft(R) 32-bit C 16.00.40219.01
76543218
65432187
1
81234567
ffffffff
*/ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-07-07T14:11:23.333

最好的方法是：

```
int rotateLeft(int x, int n)
{
    _asm
    {
        mov eax, dword ptr [x]
        mov ecx, dword ptr [n]
        rol eax, cl
    }
} 
```

如果您需要*在代码*`int`中旋转变量，那么**最快的方法是：**

 ***```
#define rotl( val, shift ) _asm mov eax, dword ptr[val] _asm mov ecx, dword ptr [shift] _asm rol eax, cl _asm mov dword ptr [val], eax 
```

`val`是你旋转的值，`shift`是旋转的长度。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-13T03:27:05.073

您可以为 a 定义“向左旋转”`signed int`吗？

我会简单地投射`x`到一个`unsigned int`并按照你现在拥有的方式执行旋转。

另一方面：您的代码是否需要在不同的架构（不仅仅是 32 位）上工作？您可能希望避免对位大小进行硬编码`int`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-09-17T19:46:53.140

在 ISO C 中（不知道这是否是您的实现语言，但它确实看起来像），负数的有符号整数的右移是实现定义的，因此应该避免。

如果你无论如何都在做 bitops，你*真的*应该首先转换为无符号整数。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-02-12T17:17:15.083

我找到了一种进行旋转的方法，当您使用一些尺寸固定并且您知道它的位时，它会很有用：

```
int rotate_bit_left(int bit_rotating){
 int LastMax = 64;
 bit_rotating = (bit_rotating>=LastMax)? ((bit_rotating << 1 ) | 0x01) : bit_rotating << 1 ;
 return bit_rotating;
 /*
  Here LastMax is 64 because in the exemple I work in the Ascii table where the max is 0111 1111 and this value can be adapted with the value of the last one bit in decimale
 */
} 
```

这个功能可以改成右旋转

```
int rotate_bit_right(int bit_rotating){
 bit_rotating = ((bit_rotating%2)==1)? ((bit_rotating >> 1)| 0x80 ): bit_rotating >> 1 ;
 return bit_rotating; 
 /*
 Because if is a odd number then the last bit is one and we have to put it in the first place
 */
} 
```

请注意，如果您在除 Ascii 表之外的其他情况下使用以下模式工作，则必须更改 0x01 和 0x80：0...0001 用于左旋转 100....0 用于右旋转***

# html - 如何从 HTML5 中的音频标签获取 FFT

> ID：10134806
> 
> 赞同：9
> 
> 时间：2012-04-13T03:21:34.327
> 
> 标签：html, audio, fft

我想从`<audio>`标签中获取 FFT 数据，但如果没有任何语法错误，它就无法工作。查看Web Audio API文档，我写了一个示例代码，这是我的代码：

```
<audio id="aud" controls="controls" src="test.mp3"></audio>

<script type="text/javascript">
var audioElement = document.getElementById("aud");
var audioContext = new webkitAudioContext();
var streamingAudioSource = audioContext.createMediaElementSource(audioElement);
var jsProcessor = audioContext.createJavaScriptNode(4096,1,1);
jsProcessor.onaudioprocess = process;
var analyser = audioContext.createAnalyser();
analyser.fftSize = 2048;

//streaming:AudioSource->jsProcessor->analyser->destination
streamingAudioSource.connect(jsProcessor);
jsProcessor.connect(analyser);
analyser.connect(audioContext.destination);
//autoplay
audioElement.play();
function process(event){
    var freqByteData = new Uint8Array(analyser.frequencyBinCount);
    analyser.getByteFrequencyData(freqByteData);
    document.getElementById("info").innerHTML=freqByteData[1];//show data in div
}
</script> 
```

我的 Chrome 版本是 20.0.1096.1 dev-m，我认为它运行良好。通过process（），我试图写下freqByteData，但它显示为0，并且它们都始终为0。它一定是我的代码有问题，我想知道如何从音频标签中获取频率数据.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T15:57:19.553

如果在 window.onload 之前调用 createMediaSourceElement，它似乎会中断。有一个关于这个问题的错误报告：[http ://code.google.com/p/chromium/issues/detail?id=112368](http://code.google.com/p/chromium/issues/detail?id=112368)

目前有两种解决方法：

**在执行整个 javascript 之前等待窗口加载事件**

```
window.addEventListener('load', function(){
  // your code
}, false); 
```

或者

**在延迟为 0 的 setTimeout 中创建 MediaElementSource**

```
setTimeout(function (){
  var streamingAudioSource = audioContext.createMediaElementSource(audioElement);
  var jsProcessor = audioContext.createJavaScriptNode(4096,1,1);
  // The rest of the code
}, 0); 
```

# r - 满足条件的值的逐行计数

> ID：10134809
> 
> 赞同：4
> 
> 时间：2012-04-13T03:21:44.977
> 
> 标签：r, sum, r-faq, rowsum

我想生成一个新变量，它的某些列满足标准的次数（如`==`, `<`, `>`）。该函数需要处理`NA`。

具有一些缺失值的样本数据：

```
x <- seq(10, 20)
y <- seq(12, 22)
y[4] <- NA
z <- seq(14, 24)
z[c(4,5)] <- NA
data <- cbind(x, y, z)
#        x  y  z
# [1,]  10 12 14
# [2,]  11 13 15
# [3,]  12 14 16
# [4,]  13 NA NA
# [5,]  14 16 NA
# [6,]  15 17 19
# [7,]  16 18 20
# [8,]  17 19 21
# [9,]  18 20 22
# [10,] 19 21 23
# [11,] 20 22 24 
```

在这个例子中，我想要的是一个变量，“less16”，它总结了每行中的值的数量`< 16`，跨列“x”、“y”和“z”。前几行的期望结果：

```
 x   y   z  less16
10  12  14       3
11  13  15       3
12  14  16       2
13  NA  NA       1
14  16  NA       1
etc 
```

我已经尝试使用and循环`rowSum`, `sum`, `which`,到目前为止都无济于事。任何建议将不胜感激。提前致谢。`for``if``else`

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-13T03:31:39.357

`rowSums`有论据`na.rm`：

```
data$less16 <- rowSums(data < 16, na.rm = TRUE) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-13T03:24:37.780

许多这些函数实际上都有一个`na.rm`用于排除`NA`值的参数：

```
apply(data,1,function(x) {sum(x < 16,na.rm = TRUE)}) 
```

# java - 替换 jar 文件中的单个类文件是否安全？

> ID：10134810
> 
> 赞同：4
> 
> 时间：2012-04-13T03:21:55.403
> 
> 标签：java, jar, patch, executable-jar

替换 jar 文件中的单个类文件是否安全？

类文件是否以不安全的方式相互引用？

格雷

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-13T03:28:10.150

是的，你可以运行`jar uf mJarFile.jar com\example\mClass.class`.

但是，请注意，如果类定义了常量`static final`基元或字符串变量，那么这些值将[内联到其他类中](https://stackoverflow.com/questions/1406616/is-java-guaranteed-to-inline-string-constants-if-they-can-be-determined-at-compi?answertab=votes#tab-top)（因此不会使用新类中包含的值）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-13T03:51:09.437

jar 命令（在 Sun JDK bin 中提供）替换类。

但是，您需要了解以下内容。

```
jar uf myJar com\test\MyClass.class 
```

在这里，您的课程位于 com.test 包中

如果你的类有任何子类，那么通常这些类也被创建为 MyClass$MySubclass.class

除了 MyClass.class 之外，您都需要替换/添加那些子 classes.class。如

```
jar uf myJar com\test\MyClass$MySubclass.class 
```

了解您的更改是否涉及任何方法原型更改也很重要，您必须重新编译那些依赖类并使用它。

最重要的是，如果您的 jar 已签名，您必须退出您的 jar。因为如果您更改 jar 中的任何内容，签名将会丢失。

# objective-c - 捆绑包中无法识别 xcode ios 文件

> ID：10134812
> 
> 赞同：9
> 
> 时间：2012-04-13T03:22:13.490
> 
> 标签：objective-c, ios, xcode, resourcebundle

我想播放视频，但我注意到我的文件没有导入到捆绑包中？？

所以我只是将文件拖放`AA.mp4`到我的项目中，

它在项目导航器上显示正常，我在查找器中显示，并确认文件存在于项目中

现在，当我尝试这个时

```
 NSString *bundleRoot = [[NSBundle mainBundle] bundlePath];
    NSFileManager *fm = [NSFileManager defaultManager];
    NSArray *dirContents = [fm contentsOfDirectoryAtPath:bundleRoot error:nil];

    NSLog(@"content of bundle ::%@", dirContents); 
```

要查看我的捆绑包的内容，我会看到所有其他文件，但不是我导入的那个？？？

所以我错过了什么？

谢谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-13T03:30:08.427

仅仅将文件拖放到 Xcode 项目中是不够的。您必须在对话框中将您的应用程序目标检查为接收文件的目标，否则它将不会被添加到“复制捆绑阶段”，因此不会复制到您的应用程序。进入构建阶段并将您的视频拖到复制捆绑资源阶段组中，然后清理并再次运行。

尽管如果您可以在文件树中看到它的红色名称，则它不存在。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-03T00:28:41.947

标记为正确的答案可能并非在所有情况下都是正确的。如果你有例如 plists，Xcode 4.5+ 出于某种原因不会将它复制到应用程序包中，即使其他一切都是正确的。一种解决方法是将您的 plist 重命名为 .png，然后稍后将其重命名。

# jar - clojure/lein：我可以为 lein 指定一个项目文件而不是 project.clj 吗？

> ID：10134813
> 
> 赞同：2
> 
> 时间：2012-04-13T03:22:14.350
> 
> 标签：jar, clojure, leiningen, ring

我想从一个项目中生成几个不同的 jar。我想我可以为每个文件制作一个 project.clj 文件，但我不能将它们全部命名为 project.clj。我如何告诉 lein 使用除 project.clj 之外的另一个项目文件？或者有没有另一种方法来生成罐子或启动

```
> lein ring server 
```

例如，对于同一目录中的许多不同的项目文件？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T03:54:34.227

我会考虑重构您的项目，以便每个 jar 都有一个子项目。有一个名为[lein-sub](https://github.com/kumarshantanu/lein-sub)的插件可以帮助您做到这一点。例如，这是[ring 的结构](https://github.com/mmcgrana/ring)：

```
/ring-core/project.clj
/ring-devel/project.clj
/ring-jetty-adapter/project.clj
/ring-servlet/project.clj
/project.clj 
```

然后在“父”project.clj 中，您可以像这样指定子项目：

```
(defproject example "0.1.0"
  :sub
    ["ring-core"
     "ring-devel"
     "ring-jetty-adapter"
     "ring-servlet"]) 
```

然后，您可以运行`lein sub jar`为所有子项目生成 jar。您也可以像处理普通的 lein 项目一样进入子项目目录并对其进行处理。

# mysql - 使用两个字段对 MySQL 进行排序/排序

> ID：10134817
> 
> 赞同：1
> 
> 时间：2012-04-13T03:22:35.830
> 
> 标签：mysql, sql, database

我有一张像这样的桌子：

```
Product   Price   Sale
------------------------
Watch     10.00    6.00
Socks      8.00
Pen        4.00
Lamp      15.00   12.00 
```

有没有一种简单的方法可以以最低价格订购产品？

如果销售列有一个值，我想使用它而不是价格列。所以按价格升序排序，我会得到：

```
Pen
Watch
Socks
Lamp 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-13T03:31:00.567

您可以使用 coalesce 来实现您正在寻找的东西。

```
select * 
  from mytable
order by  coalesce(Sale, Price) ASC 
```

Coalesce 为您提供第一个非空值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T03:27:24.440

[也许这里的](https://stackoverflow.com/a/2612960/476917)这个答案可以帮助你。我想您想知道的是我们如何按条件进行排序，对吗？

# html - 不能让 Div 影响它下面的 Div

> ID：10134819
> 
> 赞同：2
> 
> 时间：2012-04-13T03:23:23.040
> 
> 标签：html, css

我有一个菜单给我带来了很多麻烦。我要做的是使菜单链接在单击时显示一个下拉二级分区。但是，它的行为好像正在显示的菜单是浮动的，我似乎无法弄清楚为什么。

这是我想要的理想设计：http: [//jsfiddle.net/WeL6j/7/](http://jsfiddle.net/WeL6j/7/)

*   请注意灰色分割是如何受到影响并向下滑动的。

我希望包含 01、02 等的 div 和带有绿色 01 的 div 也发生同样的事情。基本上菜单下方的所有内容。我已经发布了我的代码，只是为了让您了解它在做什么，以便您可以实时编辑它。我还没有为它创建任何后备代码，所以它只能在 chrome 中真正可见。（抱歉）它也会很乱，因为我一直在移动东西以使其正常工作。无论如何，这就是我到目前为止所拥有的。

-删除-

提前感谢您的帮助，布赖恩。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T04:12:26.597

尝试这个：

[http://jsfiddle.net/ETaqa/63/](http://jsfiddle.net/ETaqa/63/)

顺便说一句，你真的应该格式化嵌套。弄清楚 div 级别令人困惑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T04:02:36.850

嗨，您可以像这样在 CSS 中定义一些属性

```
.content {
    position: relative;
    top: -7px;
    z-index: 10;
} 
```

# python - 在 Django-mssql SQLInsertCompiler 错误上运行 syncdb 时

> ID：10134822
> 
> 赞同：1
> 
> 时间：2012-04-13T03:23:45.270
> 
> 标签：python, django, sql-server-2005, django-mssql

这是在 Microsoft SQL Server 2005 上。Python 2.7。姜戈 1.4

Django-MSSQL 已安装并连接到数据库。

我可以读取表格，但不能插入或更新它们。在一个空数据库上通过 django 的教程工作，我得到了这一点：

```
# Save the object into the database. You have to call save() explicitly.
>>> p.save() 
```

调用 save() 后，我收到此[错误消息](http://code.google.com/p/django-mssql/issues/detail?id=119)（也已报告）：

```
Creating tables ...
Traceback (most recent call last):
File "manage.py", line 11, in <module>
execute_manager(settings)
File "C:\Python26\lib\site-packages\django\core\management\__init__.py", line 459, in execute_manager
utility.execute()
File "C:\Python26\lib\site-packages\django\core\management\__init__.py", line 382, in execute
self.fetch_command(subcommand).run_from_argv(self.argv)
File "C:\Python26\lib\site-packages\django\core\management\base.py", line 196, in run_from_argv
self.execute(*args, **options.__dict__)
File "C:\Python26\lib\site-packages\django\core\management\base.py", line 232, in execute
output = self.handle(*args, **options)
File "C:\Python26\lib\site-packages\django\core\management\base.py", line 371, in handle
return self.handle_noargs(**options)
File "C:\Python26\lib\site-packages\django\core\management\commands\syncdb.py", line 110, in handle_noargs
emit_post_sync_signal(created_models, verbosity, interactive, db)
File "C:\Python26\lib\site-packages\django\core\management\sql.py", line 189, in emit_post_sync_signal
interactive=interactive, db=db)
File "C:\Python26\lib\site-packages\django\dispatch\dispatcher.py", line 172, in send
response = receiver(signal=self, sender=sender, **named)
File "C:\Python26\lib\site-packages\django\contrib\auth\management\__init__.py", line 35, in create_permissions
ctype = ContentType.objects.get_for_model(klass)
File "C:\Python26\lib\site-packages\django\contrib\contenttypes\models.py", line 42, in get_for_model
defaults = {'name': smart_unicode(opts.verbose_name_raw)},
File "C:\Python26\lib\site-packages\django\db\models\manager.py", line 134, in get_or_create
return self.get_query_set().get_or_create(**kwargs)
File "C:\Python26\lib\site-packages\django\db\models\query.py", line 449, in get_or_create
obj.save(force_insert=True, using=self.db)
File "C:\Python26\lib\site-packages\django\db\models\base.py", line 463, in save
self.save_base(using=using, force_insert=force_insert, force_update=force_update)
File "C:\Python26\lib\site-packages\django\db\models\base.py", line 551, in save_base
result = manager._insert([self], fields=fields, return_id=update_pk, using=using, raw=raw)
File "C:\Python26\lib\site-packages\django\db\models\manager.py", line 203, in _insert
return insert_query(self.model, objs, fields, **kwargs)
File "C:\Python26\lib\site-packages\django\db\models\query.py", line 1576, in insert_query
return query.get_compiler(using=using).execute_sql(return_id)
File "C:\Python26\lib\site-packages\django\db\models\sql\compiler.py", line 909, in execute_sql
for sql, params in self.as_sql():
File "C:\Python26\lib\site-packages\django_mssql-1.0.1-py2.6.egg\sqlserver_ado\compiler.py", line 207, in as_sql
sql, params = super(SQLInsertCompiler, self).as_sql(*args, **kwargs)
ValueError: need more than 1 value to unpack 
```

**更新：**我回滚到 Django 1.3，这个错误消失了。我怀疑这是 Django 在 1.4 中处理用户和身份验证的方式发生了变化。当我有机会并尝试修补时，我会看看源代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T20:20:12.623

django-mssql v1.1 添加了对 Django 1.4 的支持

```
pip install django-mssql>=1.1 
```

# c# - 如何在 windows8 消费者预览版中解释 keyeventargs

> ID：10134825
> 
> 赞同：1
> 
> 时间：2012-04-13T03:24:06.933
> 
> 标签：c#, xaml, windows-8, microsoft-metro

Windows 8 消费者预览版中似乎有一些关于`KeyEventArgs`. `KeyEventArgs`解释和判断按下或释放哪个键的最佳方法是什么？我猜我需要将 Key （类型`VirtualKey`）属性映射到实际的 ascii 代码（我对 ascii 很满意，而不用担心 unicode 和其他键盘布局）。是否有更简单的方法来管理移位/控制和其他组合击键？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T17:37:05.000

对你有用`KeyboardEvent`吗？

[http://msdn.microsoft.com/en-us/library/windows/apps/hh465793.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/hh465793.aspx)

更新：

这仅适用于`Javascript`.

把这个留在那里，以防将来有任何人正在寻找这个。

# php - 为 CakePHP 2.x 安装上传插件

> ID：10134827
> 
> 赞同：1
> 
> 时间：2012-04-13T03:24:25.020
> 
> 标签：php, cakephp, plugins, web, uploader

所以我对整个 CakePHP 的事情都是新手，但我希望安装 Uploader 插件。在将文件下载/放置在正确的位置后，我被困在第一个安装步骤：http: [//milesj.me/code/cakephp/uploader](http://milesj.me/code/cakephp/uploader)。我看到这是我需要在某处添加的代码：

```
// CakePHP 2
CakePlugin::load('Uploader');
App::import('Vendor', 'Uploader.Uploader');
$this->Uploader = new Uploader(); 
```

但是不知道放哪里！我正在使用基本的“博客教程”，但我将名称从“帖子”更改为“媒体”。我将把这段代码放在哪里来包含插件？我也不确定其余的步骤，所以如果有人可以在默认的“博客教程”设置方面帮助我，那就太棒了。谢谢！

编辑：我有 CakePlugin 部分工作。我只是不确定 App:import 行。我一直试图将它添加到我的 MediaController 类中，但它只是抛出错误。这条线会去哪里？

编辑： App:import 行正在工作，现在我只需要新的 Uploader() 部分

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T04:05:28.167

我没有使用过这个特定的插件，但我使用了一个类似的插件（MeioUpload）。

进入`CakePlugin::load('Uploader')`你的引导配置文件（app/config/bootstrap.php）

App::import 和创建可能在您的“媒体”控制器中处理。

例如。我的蛋糕应用程序`App::uses('Sanitize', 'Utility');`在其 PostController 中使用。

编辑：

我想它会是这样的。

```
<?php
    App::import('Vendor', 'Uploader.Uploader');
    class MediaController extends AppController {
        $this->Uploader = new Uploader();
        /* The rest of the controller */
    } 
```

但我可能是错的。该插件的解释很奇怪。

# java - 将实例转换为某种类型有什么意义？

> ID：10134829
> 
> 赞同：2
> 
> 时间：2012-04-13T03:25:04.553
> 
> 标签：java, types

我对将实例声明为特定类型的目的有点困惑。例如，

```
Integer intOb1 = new Integer(3);
Object intOb2 = new Integer(4); 
```

我知道 is 的类型和is`intOb1`的`Integer`类型，但是声明为允许做什么？使用方法？您不能将这些方法用作吗？或者主要目的只是为了能够“对待”作为一个对象？`intOb2``Object``intOb2``Object``Object``Integer``intOb2`

如你所见，我很困惑。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T03:30:17.437

当`Object`涉及时，您永远不会得到任何有用的东西，因为它是一种在任何地方都无济于事的泛型类型。

但想想另一种情况：

```
List<String> list = new ArrayList<String>(); 
```

这意味着特定的东西：`list`is an`ArrayList`并声明它只是泛型`List`集合会强制执行这样一个事实，即在整个代码中您不会使用任何`ArrayList`特定方法。

这有效地允许您声明您不会依赖任何特定的实现，您稍后将被允许切换`ArrayList<String>()`到，例如，`LinkedList<String>()`而无需修改任何其他内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T03:43:22.087

这个实际不称为强制转换，这是*多态性*的一个例子。这允许变量根据它们与其他类的继承关系采取不同的类型。

例如，假设您正在编写一个程序来模拟动物园。您将有一个名为的类`Zoo`和一个名为`Animal`. 还有几个从该类扩展而来的`Animal`类：`Lion`、`Zebra`和`Elephant`。

将所有这些对象组合在一个列表中会非常有用，但由于它们属于不同类型，即：`Lion`、、`Zebra`和`Elephant`，您不能将它们存储在一个列表中，您必须维护一个单独的列表对于*每种*动物。这就是多态性发挥作用的地方。

由于每个类`Lion`,`Zebra`和`Elephant`所有类都扩展自`Animal`该类，我们可以简单地将它们存储在 type 列表中`Animal`。

代码示例：

```
public class Zoo
{
   private List<Animal> animals; 

   public Zoo()
   {
      this.animals = new ArrayList<>();
   }

   //notice this method takes an Animal object as a parameter
   public void add(Animal a)
   {
      this.animals.add(a);
   }
}

public abstract class Animal
{
   private String name;
   private String type;

   public Animal(String name, String type)
   {
      this.name = name;
      this.type = type;
   }

   //all subclasses must implement this method
   public abstract void speak();
}

public class Lion extends Animal
{
   private String animalType = "Lion";

   public Lion(String name)
   {
      super(name, animalType);
   }

   public void speak()
   {
      System.out.println("ROAR");
   }
}

//....etc for the other two animals

public class TestZoo
{
   public static void main(String[] args)
   {
      Zoo myZoo  = new Zoo();
      Lion l     = new Lion("Larry");
      Elephant e = new Elephant("Eli");
      Zebra    z = new Zebra("Zayne");

      myZoo.add(l);  //<-- note that here I don't pass Animal objects to the 
      myZoo.add(e);  //    add method but subclasses of Animal
      myZoo.add(z);
   }
} 
```

希望这会有所帮助，即使是一个愚蠢的例子。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T03:43:45.803

您始终可以从任何类型的类的对象中使用“Object”类的方法，因为所有类都是“Object”的子类

相反，您需要了解为什么有人会创建 Object 类型的对象：

当您想要编写一些方法/功能并且您不确定哪种类型的对象可以作为输入时，通常需要类型转换。JDK 中最常见的示例之一是比较器中的 equals 方法或 compare 方法。

```
// Object equals method - written for such generic use.
boolean     equals(Object obj) {
  //Here you might want to check which is other type of object.
  if (!obj instanceof CurrentClass) {
      return false;
  }
  //Additional logic required to check equality of object.
} 
```

早期的 Collection 库（JDK 1.4）也有类似的情况，但 JDK 1.5 引入了称为泛型的新功能。

# c++ - std::list::splice 和其他列表容器的复杂性

> ID：10134836
> 
> 赞同：29
> 
> 时间：2012-04-13T03:26:34.803
> 
> 标签：c++, qt, list, std

我有一些处理各种 std::list 对象的代码，我目前正在使用一种非常低效的方法在它们之间传输内容（我正在遍历一个列表的任意部分，并将元素一个一个移动到第二个列表）。我在知道 std::list::splice 函数之前写了这段代码，现在我打算用它替换我的代码，例如：

```
list<string> list1, list2;

list1.push_back("a");
list1.push_back("b");
list1.push_back("c"); // list1: "a", "b", "c"

list<string>::iterator iterator1 = list1.begin();
iterator1++: // points to "b"

list2.push_back("x");
list2.push_back("y");
list2.push_back("z"); // list2: "x", "y", "z"

list<string>::iterator iterator2 = list2.begin();
iterator2++; // points to "y"

list1.splice(iterator1, list2, iterator2, list2.end());

// list1: "a", "y", "z", "b", "c"
// list2: "x" 
```

我对拼接功能的复杂性有疑问。根据这个来源：

[http://www.cplusplus.com/reference/stl/list/splice/](http://www.cplusplus.com/reference/stl/list/splice/)

它应该在拼接的第一个和最后一个元素之间的范围内具有线性复杂度（在我的示例中为 iterator2 和 list2.end()），并且消息来源表明这是因为迭代器提前。我可以忍受这个，但我一直希望不断的复杂性。

我的假设（在我找到这个来源之前）是 splice 函数做这样的事情：

1.  切断“x”和“y”之间的链接
2.  切断 "z" 和 list2.end() 之间的链接
3.  在 "x" 和 list2.end() 之间形成一个链接
4.  切断“a”和“b”之间的链接
5.  在“a”和“y”之间形成链接
6.  在“y”和“b”之间形成链接

从而将两个列表恢复为完整的链。

然后，相同的原则将适用于任意大小的列表。我不确定在哪里需要 splice 函数来推进任何迭代器，因为我为它提供了完成工作所需的所有迭代器。

所以我的问题是，C++ 规范如何处理这个问题？它是仅在接头的起点和终点断开并重新形成链接，还是一个接一个地通过每个链接？如果是后者，是否有任何其他列表容器（例如来自 QT）提供前者？我的代码位于模拟程序的内部循环中，因此赋予它恒定而不是线性复杂度将非常有价值。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-04-13T03:30:49.127

这是 C++11 标准化过程中一个非常有争议的话题。问题是所有标准容器，包括列表，也有一个恒定时间的`size`操作。

Before C++11, many implementations made `size` linear time and `splice` between different lists constant time. C++11 now requires that `size` be constant and `splice` be linear.

The problem is that, if the length of the spliced range isn't counted one-by-one, then the containers cannot keep track of how many elements were removed and added, and the next call to `size` would need to recover this information in O(N) time — using the larger N of the entire sequence, not just the spliced part.

A non-standard `list` container can supply the desired operation, because so long as you don't need O(1) `size`, your argument is correct.

As for other libraries… I'm not aware of one, but Boost *should* have one. (I checked, it doesn't, so someone go get started!) Since you clearly understand how to write your own, doing so might be less effort than contending with such a large library as Qt.

If you don't need thread safety, you could implement a wrapper around `std::list` in which each container only owns a subrange of a singleton list. This would eliminate most of the programming effort in replicating the standard interface.

# php - MYSQL 代码不提取信息

> ID：10134840
> 
> 赞同：-2
> 
> 时间：2012-04-13T03:27:08.990
> 
> 标签：php, mysql, html

我正在写我的社交网络，当帖子显示在新闻源上时，个人资料图片和作者姓名将不会显示。这是我的代码：

```
$owner_id=mysql_result($result,$i,"post_owner_id"); //Post writer's user ID
$content=mysql_result($result,$i,"content"); //Content of the post
$date=mysql_result($result,$i,"date"); //Date
$time=mysql_result($result,$i,"time"); //Time
$poi_query=mysql_query("SELECT firstname, lastname, profile_picture FROM users WHERE id = '" . $owner_id . "'"); //MYSQL query to get the information of the post writer using user ID
$post_firstname=mysql_result($poi_query, 0, "firstname"); //Writer's first name
$post_lastname=mysql_result($poi_query, 0, "lastname"); //Writer's Last name
$post_profile_picture=mysql_result($poi_query, 0, "profile_picture"); //Writer's profile picture
?>

      <div class="post">
        <h1 class="post-title"><a href="profile.php?user=<?php echo $owner_id; ?>"> <?php echo $post_firstname; ?> <?php echo $post_lastname; ?></a></h1>
        <p class="content"><?php echo $content; ?></p>
        <p class="details"><?php echo $date; ?> at <?php echo $time; ?></p>
        <br/><hr/><br/>
      </div> 
```

除了名称和图片外，其他一切都很好。有什么帮助吗？我几乎肯定它与 poi_query 有关......顺便说一句，如果我手动输入用户 ID，所有代码在终端中都可以正常工作。

配置公司：

```
<?php

$hostname = 'localhost';        // Your MySQL hostname. Usualy named as 'localhost', so you're NOT necessary to change this even this script has already online on the internet.
 $dbname   = 'social-network'; // Your database name.
 $username = 'root';             // Your database username.
 $password = '********';                 // Your database password. If your database has no password, leave it empty.

// Let's connect to host
 mysql_connect($hostname, $username, $password) or DIE('Connection to host is failed, perhaps the service is down!');
 // Select the database
 mysql_select_db($dbname) or DIE('Database name is not available!');

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T03:35:05.697

我唯一能看到的可能是从 owner_id 中删除引号？

```
$poi_query=mysql_query("SELECT firstname, lastname, profile_picture FROM users WHERE id = " . $owner_id); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T03:40:08.217

更改此行：

`$poi_query=mysql_query("SELECT firstname, lastname, profile_picture FROM users WHERE id = '" . $owner_id . "'");`

到：

`$poi_query=mysql_query("SELECT firstname, lastname, profile_picture FROM users WHERE id = '" . $owner_id . "'") or die(mysql_error());`

查看您是否收到有关来自 MySQL 的查询的错误消息。

编辑：

这里的问题最终是一个`mysql_close();`干扰`$poi_query`分配的呼叫。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-13T03:42:53.133

尝试

```
$poi_query=mysql_query("SELECT firstname, lastname, profile_picture FROM users WHERE id = " . $owner_id) or die(mysql_error()); 
```

或尝试转储变量以查看它给出了什么

```
var_dump($poi_query); 
```

这将帮助您缩小问题范围

# objective-c - -[UITableView _endCellAnimationsWithContext:] 中的断言失败

> ID：10134841
> 
> 赞同：89
> 
> 时间：2012-04-13T03:27:12.660
> 
> 标签：objective-c, ios, uitableview, crash

希望这将是一个快速修复。我一直在试图找出我不断遇到的错误。下面列出了错误，appdelagate 在下面。

任何帮助表示赞赏。

谢谢

> 2012-04-12 21:11:52.669 Chanda[75100:f803] --- 中的断言失败`-[UITableView _endCellAnimationsWithContext:]`，`/SourceCache/UIKit_Sim/UIKit-1914.84/UITableView.m:1037` 2012-04-12 21:11:52.671 Chanda[75100:f803] --- 由于未捕获的异常而终止应用程序“ `NSInternalInconsistencyException`” , 原因：'无效更新：第 0 节中的行数无效。更新 (2) 后现有节中包含的行数必须等于更新前该节中包含的行数 (2)，加上或减去从该部分插入或删除的行数（1 插入，0 删除），加上或减去移入或移出该部分的行数（0 移入，0 移出）。

```
#import "AppDelegate.h"

@implementation AppDelegate

@synthesize window = _window;
@synthesize databaseName,databasePath; 

- (BOOL)application: (UIApplication *)application didFinishLaunchingWithOptions: (NSDictionary *)launchOptions {
    self.databaseName = @"Customers.db";

    NSArray *documentPaths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentDir = [documentPaths objectAtIndex:0];
    self.databasePath = [documentDir stringByAppendingPathComponent:self.databaseName];
    [self createAndCheckDatabase];

    return YES;
}

- (void)createAndCheckDatabase {
    BOOL success;

    NSFileManager *fileManager = [NSFileManager defaultManager];
    success = [fileManager fileExistsAtPath:databasePath];

    if (success) return; 

    NSString *databasePathFromApp = [[[NSBundle mainBundle] resourcePath] stringByAppendingPathComponent:self.databaseName];

    [fileManager copyItemAtPath:databasePathFromApp toPath:databasePath error:nil];
}

@end 
```

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-06-14T07:50:47.073

我看不出你向我们展示这部分代码的原因。我假设您的错误必须与您的代码中的这一部分有关

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath;

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section 
```

您可能在其中一种数据源方法中犯了错误。目前无法说出究竟出了什么问题，但我认为它可能是这样的：您告诉表格视图中的`numberOfRowsInSection`您希望保留和设置*n*`cellForRowAtIndexPath`行，然后您只处理*n - 1*行。

对不起，这个答案不能像它应该的那样精确。如果您向我们展示您的数据源的实现，那么您会更容易知道发生了什么。

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2013-04-02T12:33:31.943

正如孙子[所说](http://en.wikiquote.org/wiki/Sun_Tzu)：*不战而胜*。在我的情况下，每当我看到这种错误消息（即添加删除的行之间的差异等）..我什至不调试任何东西..我只是避免在重新加载行等的地方进行额外的调用..这是 99%发生此错误的情况。

这是发生此错误的常见情况：我有 a`UINavigationController`并且它有 a `UITableView`，当我单击一行时，它会推送一个新的`UITableView`等等。当我弹出最后一个`UITableview`并返回到它`UITableView`之前的时候，这个错误总是发生在我身上，此时我对`loadIt`基本上插入行并重新加载`UITableView`.

发生这种情况的原因是因为我错误地将 loadIt 函数放置在`viewDidAppear:animated`而不是`viewDidLoad`. `viewDidAppear:animated`每次`UITableView`显示时调用，`viewDidLoad`只调用一次。

* * *

## 回答 #3

> 赞同：25
> 
> 时间：2013-01-04T16:42:07.757

删除行时，请记住它还会在更新时检查部分，在：

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)theTableView 
```

如果要删除作为部分中最后一项的行，则需要删除整个部分（否则可能会导致部分计数错误并引发此异常）。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2014-11-12T11:44:06.063

不要忘记更新确定 numberOfRowsInSection 的数组。在制作动画和删除之前需要对其进行更新

我们检查节中的行数是否为 1，因为我们将不得不删除整个节。

如果有人能让这个答案更清楚，请纠正我。

```
[self.tableView beginUpdates];
if ([tableView numberOfRowsInSection:indexPath.section] == 1) {

   [tableView deleteSections:[NSIndexSet indexSetWithIndex:indexPath.section] withRowAnimation:UITableViewRowAnimationFade];
} else {

   [tableView deleteRowsAtIndexPaths:@[indexPath] withRowAnimation:UITableViewRowAnimationNone];
}
[self.tableView endUpdates]; 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-03-29T11:48:34.753

我将每个部分元素放在单独的数组中。然后将它们放入另一个数组（arrayWithArray）。我在这里解决这个问题的方法：

```
[quarantineMessages removeObject : message];
[_tableView beginUpdates];
if([[arrayWithArray objectAtIndex: indPath.section] count]  > 1)
{
    [_tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indPath] withRowAnimation:UITableViewRowAnimationBottom];
}
else
{
    [_tableView deleteSections:[NSIndexSet indexSetWithIndex:indPath.section]
              withRowAnimation:UITableViewRowAnimationFade];
}
[_tableView endUpdates]; 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-06-17T22:23:59.047

我有同样的错误。

我正在使用以下几行

```
UINib *myCustomCellNib = [UINib nibWithNibName:@"CustomNib" bundle:nil];
[tableView registerNib:myCustomCellNib forCellReuseIdentifier:@"CustomNib"]; 
```

在 viewDidLoad 方法中注册笔尖，因为我有一个不同的笔尖，它也与同一个类相关联。因此，线

```
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"GBFBLoadingCell"]; 
```

除非我在 viewDidLoad 中注册了笔尖，否则返回 nil。

我的问题是我忘记在属性检查器中为我的文件“CustomNib.xib”和“CustomNib~iphone.xib”设置标识符。（或者更准确地说，我在 XCode 的属性检查器中输入标识符后忘记按 Enter 键，因此新名称无法保存。）

希望这可以帮助。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2016-01-22T23:59:51.090

如果您正在使用`NSFetchedResultsController`类似我并在后台线程中更新数据，请不要忘记在委托中开始和结束更新：

```
- (void)controllerWillChangeContent:(NSFetchedResultsController *)controller {
    [self.tableView beginUpdates];
}

- (void)controllerDidChangeContent:(NSFetchedResultsController *)controller {
    [self.tableView endUpdates];
} 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2016-05-31T11:45:27.510

我有同样的错误，在尝试时`[tableView reloadData]`工作正常。错误实际上是在行中

```
[TabView insertRowsAtIndexPaths:indexPathsArray withRowAnimation:UITableViewRowAnimationRight]; 
```

当我尝试检查 indexPath 值时，它们不符合要求。

我通过更改`indexPathsArray`.

希望这可以帮助 。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2016-01-17T07:30:22.660

它可能是`UITableViewDataSource`协议方法之一

为了

```
- tableView:numberOfRowsInSection: 
```

它应该返回一个等于总和或结果的整数

`-insertRowsAtIndexPaths:withRowAnimation:`和/或`-deleteRowsAtIndexPaths:withRowAnimation`：

为了

```
- numberOfSectionsInTableView: 
```

它应该返回一个等于总和或结果的整数

`-insertRowsAtIndexPaths:withRowAnimation:`和/或 `-deleteSections:withRowAnimation:`

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-10-30T04:39:03.887

我对核心数据库有同样的问题。如果您使用许多 FRC，您只需在 numberOfSectionsInTableView 中的每个条件内重新加载 tableview。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2015-02-22T03:33:56.787

我刚刚在使用 Swift 和 FRC 支持的数据存储来管理信息时发生了这种情况。在删除操作中添加一个简单的检查来评估当前的 indexPath.section 让我避免了无关的调用。我想我明白为什么会出现这个问题......基本上，只要我的数据集为空，我就会将一条消息加载到第一行。由于存在虚假行，因此这会产生一个问题。

**我的解决方案**

```
... delete my entity, save the datastore and call reloadData on tableView
//next I add this simple check to avoid calling deleteRows when the system (wrongly) determines that there is no section.

       if indexPath.section > 0 {

        tableView.deleteRowsAtIndexPaths([indexPath], withRowAnimation: .None)

            } 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2016-04-07T14:26:45.743

只需检查您是否调用了 [yourTableView reloadData]; 修改值数组后。

# android - Android - 向 Textview 添加行

> ID：10134842
> 
> 赞同：2
> 
> 时间：2012-04-13T03:27:21.153
> 
> 标签：android, line

我有一个 TextView 和一些字符串数组。我想在每次显示下一个项目时添加一条线（通过 Java）（我有一个 for 循环，所以它循环直到每个项目都显示在 TextView 中）。有人知道该怎么做吗？

谢谢

编辑：我希望它看起来像一个 ListView。但我不想使用 listView insted，因为我只想为某些事件设置 Line。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T03:30:00.820

什么样的线？如果您只想在文本中添加一条垂直线，请添加“|” 每个单词之间。如果要换行，请使用“\n”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T03:30:19.407

您是否尝试在`\n`每次添加一个字符串时添加一个换行符 ( ) ？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T06:39:10.507

```
for(int i=0;i<lenght;i++)
{
    //textview is tv
   tv.setText(listOfString[i]);
   //view is viewWithHorizontalLine with hight = dp and width = fill_parent and background = #000000
   viewWithHorizontalLine = view;
   //LinearLayout is ll
   ll.addView(tv);
   ll.addView(viewWithHorizontalLine);
} 
```

XML

```
<LinearLayout>
  <ScrollView>
      <LinearLayout orientation=vertical/>
  </ScrollView>
</LinearLayout> 
```

# java - CPLEX Java 的最佳使用以实现高吞吐量

> ID：10134846
> 
> 赞同：5
> 
> 时间：2012-04-13T03:27:29.080
> 
> 标签：java, mathematical-optimization, linear-programming, cplex, ilog

我正在使用 CPLEX Java API 解决大型优化问题。目前我只是

```
IloCplex cplex = new IloCplex();
... add lots of variables and constraints ...
cplex.solve();
cplex.end(); 
```

这很好用，但我经常重复这个过程，我只是在改变系数。每次重复时，我都会创建一个新`cplex`对象并重新创建所有变量。

有没有更有效的方法来做到这一点？IBM 文档中有“将模型添加到模型实例”之类的语言，这听起来很奇怪，但我认为它暗示了能够重用事物。

来自更有经验的用户的任何建议都会很棒。谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-13T05:06:56.687

如果您只想更改约束系数（或目标函数的系数），您可以修改现有 IloCplex 对象上的系数。您不应该从头开始创建模型。

```
retval = cplex.solve();
// verify that the solve was successful

// change coeficients on constraints (or in the objective)
cplex.setLinearCoef(constraint, newCoef, variable);
cplex.setLinearCoef(objective, newObjCoef, variable);

// change right bounds on constraints
constraint.setBounds(newLB, newUB);

// change variable bounds
var.setBounds(newLB, newUB);

retval = cplex.solve();
// verify the solve 
```

# c++ - 继承中的boost库

> ID：10134849
> 
> 赞同：0
> 
> 时间：2012-04-13T03:27:43.030
> 
> 标签：c++, boost

最近我遇到了以下问题。我无法弄清楚原因。谁能指出我。

“Buffered”的父类是什么？你认为为什么选择它作为父类？使用这个父类的主要限制是什么？

示例代码

```
template <typename T>
class Buffered : private boost::noncopyable
{
public:
explicit Buffered (const T& value = T()) 
    : current_ (value), next_ (value) {}

virtual ~Buffered() {}

const T& get() const {
    return current_;
}

void set (const T& value) {
    next_ = value;
}

void skip() {
    this->set(this->get());
}

void force(const T& value) {
    next_ = current_ = value;
}

void flip() {
    current_ = next_;
}

private:
T current_;
T next_;
}; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T03:29:34.723

如果您不希望您的用户能够`Buffered`通过复制您从**[boost::noncopyable](http://www.boost.org/doc/libs/1_49_0/boost/noncopyable.hpp)**派生的类来创建您的类的任何实例（在这种情况下） 。
简而言之，它使您的课程不可复制。

增强文档清楚地说明了目的：

> // 私有复制构造函数和复制赋值确保从
> // 类不可复制的类派生的类不能被复制。

如果您不使用 boost，那么您可以通过以下方式使您的课程不可复制：

*   声明类复制构造函数和复制赋值运算符`private`&
*   没有为他们提供任何定义。

如果有人试图复制您的类实例，第一个会给您一个编译错误，而第二个通过给出链接错误
来防止您通过 s 间接复制。`friend`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T03:45:56.290

在 C++11 中，你也可以这样说

```
class Class {
    Class (Class const & other) = delete;
}; 
```

然后，如果您尝试使用成员函数/友元函数访问它，则会收到编译时错误，而不是链接器错误。

# design-patterns - 我该如何替换这个单例？

> ID：10134850
> 
> 赞同：2
> 
> 时间：2012-04-13T03:27:47.303
> 
> 标签：design-patterns, dependency-injection, singleton

所以我最近被添加到一个工作中的新项目中，Java 代码有大约 10-15 个 Singleton 类，它们在任何地方都在使用。这些类的目的是从服务器获取数据（当客户端应用程序启动时）并使该数据在整个程序中都可以访问，这样就不必在每次需要时都进行服务调用，这在我看来是有道理的。

然而，在阅读了许多关于单例有多糟糕的帖子后，由于紧密耦合和不可测试，我将如何替换它们？有人告诉我依赖注入，但我真的想继续将相同的数据传递给应用程序中的几乎每个对象吗？任何建议都是有用的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T05:14:44.747

在这种情况下，我使用依赖注入 (DI)，但正如您所说，您不喜欢它。

接下来我能想到的是 FACADE 模式，创建一个 ApplicationFacade 类并在需要的地方进行 DI。（如果你真的不喜欢 DI，也可以将其设为静态）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T03:33:51.507

我相信这取决于每个单身人士。例如，Singleton 可以分解成几个静态函数吗？或者它可以分解成几个更小的类。也许它只用于应用程序的一小部分；因此，重构了一个较小的类以在该模块中使用。我认为，归根结底，这取决于每个 Singleton 的使用情况。如果它使您的代码更简单、更可扩展、更简洁等，请保留它；如果没有，请重构。

编辑：补充一下，需要重构什么？代码是否简单、干净并且有效？如果是这样，那么只需向应用程序添加功能即可。始终寻求添加代码/功能，而不是修改现有代码。最后你要回答，它是可扩展的吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T05:32:49.137

看看古斯。您将构造函数定义为仅采用直接依赖项（没有工厂的工厂向下传递深层依赖项），用注释每个可注入构造函数，`@inject`然后创建“模块”类，这些类定义用于那些中使用的任何抽象类或接口的实现构造函数。

Guice 将使用反射魔法根据模块类中的指令找到实现并实例化您的对象图。它甚至足够聪明，可以自动使用无参数构造函数来处理您没有在模块中明确定义的依赖项，而无需您明确告知它。

You can let Guice get much more entwined into your architecture than that, but if all you want to avoid is a chain of factories for injecting dependencies, then a little Guice is pretty nice.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-13T17:32:31.623

The way you could design your classes is with explicit dependencies factored out. If a class uses a singleton:

```
class Client {
  public void Method() {
    SomeService.getInstance().doSomething();
  }
} 
```

It's hiding that dependency inside. To pull it out, (1) take it on construction or (2) on the involved method, if it makes sense (showing option 2):

```
class Client {
  public void Method(SomeService service) {
    service.doSomething();
  }
} 
```

This is the first step. Later, you could extract an interface from the singleton and use it. This is a slow process: refactor, retest, iterate...

# overriding - 如何覆盖 pygtk 中的删除事件？

> ID：10134854
> 
> 赞同：1
> 
> 时间：2012-04-13T03:28:51.523
> 
> 标签：overriding, pygtk

我正在编写一个简单的文本编辑器，因此我试图在关闭应用程序之前检查未保存的更改。现在我知道它必须是带有“删除事件”的东西，并且通过谷歌搜索我找到了一种方法，但它给出了一个错误。

这是我的代码：

```
__gsignals__ = {
  "delete-event" : "override"
}

def do_delete(self, widget, event):
    print 'event overriden'
    tabsNumber = self.handler.tabbar.get_n_pages()
    #self.handler.tabbar.set_current_page(0)
    for i in range(tabsNumber, 0):
        doc = self.handler.tabbar.docs[i]
        lines = self.handler.tabbar.lineNumbers[i]
        self.handler.tabbar.close_tab(doc, lines)

#        if self.handler.tabbar.get_n_pages() == 0:
#            self.destroy_app()

  def destroy_app(self):
    gtk.main_quit() 
```

这是我得到的错误：

> TypeError: Gtk.Widget.delete_event() 参数 1 必须是 gtk.Widget，而不是 gtk.gdk.Event

正确的方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-13T19:48:57.217

我找到了答案，

```
self.connect('delete-event', self.on_delete_event) 
```

和

```
__gsignals__ = {
    "delete-event" : "override"
}
def on_delete_event(event, self, widget):
    tabsNumber = self.handler.tabbar.get_n_pages()
    #self.handler.tabbar.set_current_page(0)
    for i in range(tabsNumber, 0):
        doc = self.handler.tabbar.docs[i]
        lines = self.handler.tabbar.lineNumbers[i]
            self.handler.tabbar.close_tab(doc, lines)
    self.hide()
    self.destroy_app()
    return True 
```

关键在`return True`. 它阻止了默认处理程序的发生，并且以某种方式不再出现错误。

# php - jquery php动态分配css值

> ID：10134855
> 
> 赞同：0
> 
> 时间：2012-04-13T03:29:09.717
> 
> 标签：php, jquery, css

我在无序列表中有一些图像。

```
<ul>
    <li id='chain'>
        <a href="">
            <span class='fade'></span>
            <div class='title'>TITLE</div>
            <img src="img/bike/chain.jpg" alt="" width="550" height="440" />
        </a>
    </li>
    <li id='grips'>
        <a href="">
            <span class='fade'></span>
            <div class='title'>TITLE</div>
            <img src="img/bike/grips.jpg" alt="" width="275" height="440" />
        </a>
    </li>
    <li id='tires'>
        <a href="">
            <span class='fade'></span>
            <div class='title'>TITLE</div>
            <img src="img/bike/tires.jpg" alt="" width="175" height="220" />
        </a>
    </li>
</ul> 
```

我需要css，它将使每个集合中的跨度和div具有相同的宽度，就像在循环中表示的那样，而不是手写每个项目

```
#chain .fade,   #chain .title {width:550px}
#grips .fade,   #grips .title {width:275px}
#tires .fade,   #tires .title {width:175px;} 
```

问题：我可以使用 jQuery 动态创建 css 吗？如果不是，我如何创建这个 css 并使用 PHP 分配宽度值？
列表项会经常更改，我希望使用循环或 .each 语句。

换句话说，我不想列出每个项目
是否有办法提取 li ID 和 IMG 维度并动态创建 css

伪代码：

```
var w = $('ul li').each(find img width).assign it to> .css(this .fade, this .title {width:w + "px"}); 
```

还是
我应该查看 php 来回显每个 ul li IMG 的输出？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T04:00:34.800

jQuery 允许您轻松创建内联 CSS 样式（应用于每个元素的样式）。

```
$('#chain, #grips, #tires').each(function(index, element){
  $('.fade', element).width( $('img', element).width() );
}); 
```

**这是这个脚本在做什么**

`.each()`遍历所有选定的元素。`index`，顾名思义，是被迭代的数组的索引。`element`是被迭代的当前元素。

`$('.fade', element)``fade`这在元素内查找类。

`.width()`将获取或设置元素的宽度。如果传入参数，它将被设置，例如：`.width(15)`. （这会将元素的宽度设置为 15 像素宽。）如果没有传递任何内容，它将检索元素的宽度，例如：`.width()`.

`$('img', element).width()`检索元素内 img 标签的宽度。因为这个值被传递到`$('.fade', element).width()`中，所以它会将具有淡入淡出类的元素设置为 img 的宽度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T03:38:46.633

这是使用 jQuery 的方法：

```
$('li').each(function(){
    var $li = $(this);   
    var $img = $li.find('img');
    var width = $img.attr('width');
    $li.find('.fade, .title').css('width', width + 'px');
}); 
```

**或者摆脱 jQuery，只使用 css：**

```
​li { float: left; clear: left; } 
```

[http://jsfiddle.net/u2HNx/2/](http://jsfiddle.net/u2HNx/2/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T03:40:22.110

好的，试试这个：

```
 $('li').each(function(){
       var width = $(this).find('IMG').width();
       $(this).find('.fade').width(width);
       $(this).find('.title').width(width);
    }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-13T03:42:51.943

```
$("#chain .fade,#chain .title").css('width','550px'); 
```

# java - Controller.java 文件中的 Javafx 2.0 操作方法 Application.getParameters()

> ID：10134856
> 
> 赞同：9
> 
> 时间：2012-04-13T03:29:24.103
> 
> 标签：java, javafx-2

考虑以下示例。

***如何访问控制器中应用程序的参数/参数？***

谢谢你。

* * *

*注意：我尝试将 App.java 和 MyController.java 混合在一个 Class 文件中，但没有帮助。*

* * *

**App.java（简化）：**

```
public class App extends Application {

    public static void main(String[] args) {
        Application.launch(App.class, args);
    }

    @Override
    public void start(Stage primaryStage) throws Exception {

        // output arguments in console
        System.out.println(getParameters().getNamed().toString());

        Parent root = FXMLLoader.load(getClass().getResource("MyView.fxml"));
        final Scene scene = new javafx.scene.Scene(root);
        primaryStage.setScene(scene);
        primaryStage.show();
    }

} 
```

**MyController.java（简化）：**

```
public class MyController implements Initializable {

    @Override
    public void initialize(URL url, ResourceBundle rb) {
        // HOW TO getParameters() HERE ?
    }

    @FXML
    private Button myButton;

    @FXML
    private void my_Action(ActionEvent event) {
        // HOW TO getParameters() HERE ?
    }

} 
```

**MyView.fxml（简化）：**

```
<AnchorPane fx:id="root" fx:controller="mainpackage.MyController">
    <children>
        <Button fx:id="myButton" onAction="#my_Action" text="Start" />
    </children>
</AnchorPane> 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-13T06:48:05.717

**1.**最直接的方式——将它们保存在应用程序中：

```
public class App extends Application {

  public static void main(String[] args) { launch(); }

  public static String parameters;

  @Override
  public void start(Stage primaryStage) throws Exception {

    parameters = getParameters().getNamed().toString();

    Parent root = FXMLLoader.load(getClass().getResource("MyView.fxml"));
    final Scene scene = new javafx.scene.Scene(root);
    primaryStage.setScene(scene);
    primaryStage.show();
  }

} 
```

并在控制器中读取它们：

```
public class MyController implements Initializable {

  @Override
  public void initialize(URL url, ResourceBundle rb) {
     System.out.println(App.parameters);
  } 
```

**2.**更复杂（但总体上更好）的方法将在下一个主题中描述：

*   [传递参数 JavaFX FXML](https://stackoverflow.com/questions/14187963/passing-parameters-javafx-fxml/14190310)
*   [带有控制器的多个 FXML，共享对象](https://stackoverflow.com/questions/12166786/multiple-fxml-with-controllers-share-object/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-16T08:22:15.170

```
 public static <T extends Node, P> T load(String resource, final P parameter)
            throws MoisException {
        try {
            logger.debug("resource: {}; parameter: {}", resource, parameter);
            FXMLLoader loader = new FXMLLoader(getResource(resource));
            // pass parameter into Controller,before invoke the initialize()
            loader.setControllerFactory(new Callback<Class<?>, Object>() {
                @Override
                public Object call(Class<?> param) {
                    Object controller = null;
                    try {
                        controller = ReflectUtil.newInstance(param);
                    } catch (InstantiationException e) {
                        throw new MoisException("can't new instance for: " + param.getName(), e);
                    } catch (IllegalAccessException e) {
                        throw new MoisException("can't new instance for: " + param.getName(), e);
                    }
                    if (controller instanceof ParameterAware) {
                        ((ParameterAware<P>) controller).setParameter(parameter);
                    }
                    return controller;
                }
            });
            T node = (T) loader.load();
            // pass parameter to node
            node.setUserData(parameter);
            return node;
        } catch (IOException e) {
            throw new MoisException("can't load the file: " + resource, e);
        }
    } 
```

和参数感知：

```
public interface ParameterAware<T> {
    void setParameter(T param);
} 
```

# php - 修改 Codeigniter 日历以生成每个日期的唯一 URL

> ID：10134858
> 
> 赞同：0
> 
> 时间：2012-04-13T03:29:38.727
> 
> 标签：php, codeigniter, calendar

我正在尝试创建一个日历，允许用户单击日期并安排约会或查看为该日期安排的约会。我可以使用从头开始创建的 PHP 日历来执行此操作，但现在我需要使用 Codeigniter 的日历库来执行此操作。

基本上我想要的是让日历显示带有唯一 URL 的每个日期，该 URL 可以将日、月和年传递到另一个视图。有没有人扩展或修改了 Codeigniter 日历来做这样的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T11:45:01.420

您可以使用本机日历类执行此操作：

```
$this->load->library('calendar');

$data = array(
               3  => 'http://example.com/news/article/2006/03/',
               7  => 'http://example.com/news/article/2006/07/',
               13 => 'http://example.com/news/article/2006/13/',
               26 => 'http://example.com/news/article/2006/26/'
             );

echo $this->calendar->generate(2006, 6, $data); 
```

查看文档以获取更多信息：[http ://codeigniter.com/user_guide/libraries/calendar.html](http://codeigniter.com/user_guide/libraries/calendar.html)

# c# - 当使用带有名称的 Unity RegisterType 时，拦截器不起作用

> ID：10134862
> 
> 赞同：1
> 
> 时间：2012-04-13T03:30:03.590
> 
> 标签：c#, unity-container, interception

```
container.RegisterType<IMyType, MyType>("MyType");

container.AddNewExtension<Interception>()
            .Configure<Interception>()
            .SetInterceptorFor<IMyType>(new InterfaceInterceptor()); 
```

当我用名称解析我的类型时，拦截不起作用。但是当我删除名称时，它会再次起作用。我的代码有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T06:14:38.240

您没有指定要使用的*InterceptionBehavior 。*设置拦截器不会添加任何行为。

[查看MSDN](http://msdn.microsoft.com/en-us/library/ff660911%28PandP.20%29.aspx)上的文档。

*Unity 2.0 方法*部分包含一个示例配置。

# java - ical4j 导致 Android 项目上的 Java 堆大小错误

> ID：10134867
> 
> 赞同：0
> 
> 时间：2012-04-13T03:30:19.880
> 
> 标签：java, icalendar

我正在尝试在我的 android 项目中使用新版本的 ical4j，因为旧版本不起作用。

但是当我尝试运行我的应用程序时需要花费很多时间来编译......最后我得到一个错误说

```
 "Java Heap Size" . 
```

当 eclipse 编译 ical4j 中包含的名为“groovyjarjars”的类时，就会发生这种情况。

这非常令人沮丧，因为这是解析 ics 文件（ical）的唯一库，而且自从我更新了 ADT 插件后，它就出现了问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T09:50:16.307

Remove the groovy jar,all that is necessary is backport-util.concurrent, ical4j and commons-lang this works for me.

# python - MYSQL - 服务器在脚本中途退出

> ID：10134868
> 
> 赞同：0
> 
> 时间：2012-04-13T03:30:19.983
> 
> 标签：python, mysql

我正在使用 mysqldb/python 将一些数据推送到 mysql 数据库中。

该脚本为数据解析一堆 XML 文件。

MySQL 服务器似乎退出并给我一个“#2002 - 服务器没有响应（或本地 MySQL 服务器的套接字未正确配置）”错误在事务中途 - 每次我运行它时都在不同的地方（所以我我假设它不是导致它崩溃的特定数据......）

它完美地工作，直到它达到〜12或13个文件，它给了我这个错误：

```
Error 2003: Can't connect to MySQL server on 'localhost' (10055)
Traceback (most recent call last):
File "sigFileParser.py", line 113, in <module>
 doParser(sigfile_filename)
File "sigFileParser.py", line 106, in
 doParser
  doFormatsPush(packedFormats)
File "sigFileParser.py", line 27, in
 doFormatsPush
sys.exit (1)
NameError: global name 'sys' is not defined 
```

一旦发生错误，我就无法进入 MySQL 控制台或通过 PHOPmyadmin

如果我离开一段时间，我可以回到 MySQL

MySQL 表：

```
CREATE TABLE IF NOT EXISTS patterns
 (Version int(3),
 DateCreated DATETIME,
 SigID int(4),
 SigSpecificity CHAR(10),
 ByteSeqReference CHAR(12),
 MinFragLength int(4),
 Position int(4),
 SubSeqMaxOffset int(4),
 SubSeqMinOffset int(4),
 Pattern TEXT) 
```

和

```
CREATE TABLE IF NOT EXISTS formats
(Version int(3),
DateCreated DATETIME,
FormatID int(4),
FormatName TEXT,
PUID TEXT,
FormatVersion TEXT,
FormatMIMEType TEXT,
InternalSignatureID int(4),
Extension TEXT,
HasPriorityOverFileFormatID int(4)) 
```

py代码

```
from lxml import etree
import re, os, MySQLdb
def doPatternPush(packedPatterns):
 try:
  db = MySQLdb.connect (host = "localhost", user = "root", passwd = "", db = "sigfiles")
  c = db.cursor()
  c.execute('''INSERT INTO sigfiles.patterns
  (Version,DateCreated,SigID,SigSpecificity,ByteSeqReference,MinFragLength,Position,SubSeqMaxOffset,SubSeqMinOffset,Pattern)
   VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s, %s)''', packedPatterns)
  db.commit()
  except MySQLdb.Error, e:
  print "Error %d: %s" % (e.args[0], e.args[1])
  sys.exit (1)
 return (db)
def doFormatsPush(packedFormats):
 try:
  db = MySQLdb.connect (host = "localhost", user = "root", passwd = "", db = "sigfiles")
  c = db.cursor()
  c.execute('''INSERT INTO sigfiles.formats
  (Version,DateCreated,FormatID,FormatName,PUID,FormatVersion,FormatMIMEType,InternalSignatureID,Extension,HasPriorityOverFileFormatID)
  VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s, %s)''', packedFormats)
  db.commit()
 except MySQLdb.Error, e:
  print "Error %d: %s" % (e.args[0], e.args[1])
  sys.exit (1)
 return(db)
def doParser(sigfile_filename):
 tree = etree.parse(sigfile_filename) 
 root = tree.getroot()
 attributes = root.attrib
 if 'DateCreated' in root.attrib:
  DateCreated = (attributes["DateCreated"])
 if 'Version' in root.attrib:
  Version = (attributes["Version"])
 ##--------- get internal sig details ------------------
 for a in range (len(root[0])):  #loops for sig ID
  attributes = root[0][a].attrib
  SigID=(attributes["ID"])
  SigSpecificity = (attributes["Specificity"])
  for b in range (len(root[0][a])):  # loops for sequence pattern inside each sig
   attributes = root[0][a][b].attrib
   if 'Reference' in root[0][a][b].attrib: 
    ByteSeqReference = (attributes["Reference"])
   else:
    ByteSeqReference = "NULL"  
   attributes = root[0][a][b][0].attrib
   if 'MinFragLength' in root[0][a][b][0].attrib:
    MinFragLength=(attributes["MinFragLength"])
   else: 
    MinFragLength=''
   if 'Position' in root[0][a].attrib:
    Position=(attributes["Position"])
   else:
    Position=''
   if 'SubSeqMaxOffset' in root[0][a][b][0].attrib:
    SubSeqMaxOffset=(attributes["SubSeqMaxOffset"])
   else:
    SubSeqMaxOffsee = ''  
   if 'SubSeqMinOffset' in root[0][a][b][0].attrib:
    SubSeqMinOffset=(attributes["SubSeqMinOffset"])
   else:
    SubSeqMinOffset = ''     
   Pattern = root[0][a][b][0][0].text
   packedPatterns =     [Version,DateCreated,SigID,SigSpecificity,ByteSeqReference,MinFragLength,Position,SubSeqMaxOffset,SubSeqMinOffset,Pattern]
   doPatternPush(packedPatterns)
##-------- get format ID details-------------
 for a in range (len(root[1])):
  attributes = root[1][a].attrib
  if 'ID' in root[1][a].attrib:
   FormatID = (attributes['ID'])
  else:
   FormatID = "NULL" 
  if 'Name' in root[1][a].attrib:
   FormatName = (attributes['Name'])
  else:
   FormatName = "NULL" 
  if 'PUID' in root[1][a].attrib:
   PUID = (attributes['PUID'])
  else:
   PUID = "NULL" 
  if 'Version' in root[1][a].attrib:
   FormatVersion = (attributes['Version'])
  else:
   FormatVersion = "NULL" 
  if 'MIMEType' in root[1][a].attrib:
   FormatMIMEType = (attributes['MIMEType'])
  else:
   FormatMIMEType = "NULL"  
  InternalSignatureID,Extension,HasPriorityOverFileFormatID = ('', 'NULL', '') 
  for b in range (len(root[1][a])): #extracts the tags for each format ID
   tagType = root[1][a][b].tag
   tagText = root[1][a][b].text
   tagType = re.sub('{http://www.nationalarchives.gov.uk/pronom/SignatureFile}', '', tagType)
   if tagType == 'InternalSignatureID':
    InternalSignatureID = tagText
   elif tagType == 'Extension':
    Extension = tagText
    HasPriorityOverFileFormatID = ''
   else:
    HasPriorityOverFileFormatID = tagText
    Extension = 'NULL' 
   packedFormats = [Version,DateCreated,FormatID,FormatName,PUID,FormatVersion,FormatMIMEType,InternalSignatureID,Extension,HasPriorityOverFileFormatID]
   doFormatsPush(packedFormats)
 if __name__ == "__main__":
 path = "C:\Users\NDHA\Desktop\droid sigs all"
 for (path, dirs, files) in os.walk(path):
  for file in files:
   sigfile_filename = str(path)+"\\"+str(file)
   doParser(sigfile_filename) 
   print sigfile_filename
 db.close() 
```

所有的 XML 都来自这里： http: [//www.nationalarchives.gov.uk/aboutapps/pronom/droid-signature-files.htm](http://www.nationalarchives.gov.uk/aboutapps/pronom/droid-signature-files.htm)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T03:35:11.703

你得到的错误告诉你到底出了什么问题

```
NameError: global name 'sys' is not defined 
```

你不在`import sys`你的python文件中。

至于db连接，如果你的socket没有放在`/tmp/mysql.sock`，你可以通过参数指定在尝试连接db的时候去哪里找`unix_socket`。

尝试：

```
db = MySQLdb.connect (unix_socket = 'path_to_sock', host = "localhost", 
                      user = "root", passwd = "", db = "sigfiles") 
```

将 'path_to_sock' 替换为 mysql sock 的实际路径。

如果不是问题，您应该检查的其他内容：

*   检查以确保用户名/密码组合正确
*   尝试停止并重新启动 mysqld 服务
*   检查错误日志文件以获取更具体的错误

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T03:43:29.490

这是您的第一个错误：

> 错误 2003：无法连接到“本地主机”上的 MySQL 服务器 (10055)

似乎您在某些时候断开了与 MySQL 的连接。检查您的代码，看看您是否显式或隐式地与服务器断开连接，并检查您的 MySQL 服务器是否仍在侦听连接......也许您正在从应用程序外部杀死服务器......谁知道呢？:)

# java - Java DB：找不到合适的驱动程序

> ID：10134869
> 
> 赞同：1
> 
> 时间：2012-04-13T03:30:37.227
> 
> 标签：java, derby, javadb

再会！

我知道这类问题有很多帖子，但我查看了其中一些帖子，但由于我使用的是嵌入式 Derby，因此找不到我的问题的答案。

我收到此错误：

```
##THIS IS GENERATED BY THE METHOD printSQLException shown at the code below
----- SQLException ----- 
SQL State:  08001
Error Code: 0
Message:    No suitable driver found for jdbc:derby://localhost:1527/recordbookDB

Exception in thread "AWT-EventQueue-0" java.lang.NullPointerException
    at recordbook.RecordBook.checkHasAccount(RecordBook.java:71)
    at recordbook.Login.<init>(Login.java:31)
    at recordbook.Login$1.run(Login.java:168)
    at java.awt.event.InvocationEvent.dispatch(InvocationEvent.java:226)
    at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:647)
    at java.awt.EventQueue.access$000(EventQueue.java:96)
    at java.awt.EventQueue$1.run(EventQueue.java:608)
    at java.awt.EventQueue$1.run(EventQueue.java:606)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.AccessControlContext$1.doIntersectionPrivilege(AccessControlContext.java:105)
    at java.awt.EventQueue.dispatchEvent(EventQueue.java:617)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:275)
    at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:200)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:190)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:185)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:177)
    at java.awt.EventDispatchThread.run(EventDispatchThread.java:138)
BUILD STOPPED (total time: 6 minutes 16 seconds) 
```

问题在于连接到数据库部分。这是查看问题所需的代码（和方法）的一部分：

```
public class RecordBook
{
    private String framework = "embedded";
    private String driver = "org.apache.derby.jdbc.EmbeddedDriver";
    private String protocol = "jdbc:derby:";
    private Connection conn;

    //this is where everything happens
    public RecordBook()
    {
        //Loading the Driver
        loadDriver();

        //Connecting to the database
        conn = null;
        try
        {
            Properties props = new Properties();
            props.put("user","root");
            props.put("password","root");
            String dbName = "//localhost:1527/recordbookDB"; 
            conn = DriverManager.getConnection(protocol + dbName, props);  //error is here

        }
        catch (SQLException sqle)
        {
            printSQLException(sqle);
        }
    }

   //BELOW ARE THE METHODS USED ABOVE    
   /**
     * CODE FROM http://db.apache.org/derby/papers/DerbyTut/embedded_intro.html
     */
    private void loadDriver()
    {
        try
        {
            Class.forName(driver).newInstance();
            System.out.println("Loaded the appropriate driver");
        }
        catch (ClassNotFoundException cnfe)
        {
            System.err.println("\nUnable to load the JDBC driver " + driver);
            System.err.println("Please check your CLASSPATH.");
            cnfe.printStackTrace(System.err);
        }
        catch (InstantiationException ie)
        {
            System.err.println("\nUnable to instantiate the JDBC driver " + driver);
            ie.printStackTrace(System.err);
        }
        catch (IllegalAccessException iae)
        {
            System.err.println("\nNot allowed to access the JDBC driver " + driver);
            iae.printStackTrace(System.err);
        }
    }

    /**
     * CODE FROM http://db.apache.org/derby/papers/DerbyTut/embedded_intro.html
     *
     * @param e the SQLException from which to print details.
     */
    public static void printSQLException(SQLException e)
    {
        // Unwraps the entire exception chain to unveil the real cause of the exception.
        while (e != null)
        {
            System.err.println("\n----- SQLException -----");
            System.err.println("  SQL State:  " + e.getSQLState());
            System.err.println("  Error Code: " + e.getErrorCode());
            System.err.println("  Message:    " + e.getMessage());
            // for stack traces, refer to derby.log or uncomment this:
            //e.printStackTrace(System.err);
            e = e.getNextException();
        }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T04:52:36.490

没有合适的驱动程序”通常意味着您提供的用于连接的 JDBC URL 语法不正确。

更多详细信息[请查看文档](http://db.apache.org/derby/papers/DerbyTut/embedded_intro.html)

还要检查你`derby.jar`的类路径中是否有。我建议将`derby.jar`物理位置放置在`/WEB-INF/lib`您的项目目录中。然后 Eclipse 将负责其余的工作。

# html - Internet Explorer 7 中的 z-index 问题

> ID：10134871
> 
> 赞同：0
> 
> 时间：2012-04-13T03:30:56.000
> 
> 标签：html, css, internet-explorer-7, z-index

当用户悬停主菜单时，我正在使用使用 jquery 的下拉列表，它会下拉，并且在除 IE7 及以下的所有浏览器中都能正常工作所有元素，但它不起作用。

![在此处输入图像描述](../Images/df7a2941c6008ba5720153e91d06b1e6.png)

菜单项（dummydummy）位于文本框和按钮后面

子菜单项的样式是

```
#sub-menu {

z-index: 1000;
} 
```

并且文本框和按钮被分组在一个 div 中，并且 div 的样式是

```
#grouped {
left: 100px;
position: absolute;
z-index:1;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T03:40:15.440

我会推荐尝试 CSS3 Pie。我们开始使用它，许多 IE7 古怪的错误消失了。

[http://css3pie.com/](http://css3pie.com/)

我对 css3pie 在 IE7 中修复的东西感到惊讶。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T03:41:44.910

**z-index**仅适用于 position `relative`, `absolute`& `fixed`。所以，给`position:relative`你的`#submenu`. 像这样写：

```
#sub-menu {
 position:relative;
 z-index: 1000;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T03:58:01.737

您还可以尝试将更高的 z-index 值应用于您的 #sub-menu ul 和 li 值。这适用于在 IE7 中给我同样问题的超级鱼菜单。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-13T06:36:36.217

使用下面的代码

```
#sub-menu {
 position:absolute;
 z-index: 1000;
}
#grouped {
left: 100px;
position:relative;
z-index:1;
} 
```

# javascript - 如何从图像托管网站获取相册图像并自动显示在网站中

> ID：10134874
> 
> 赞同：0
> 
> 时间：2012-04-13T03:31:15.017
> 
> 标签：javascript, jquery, html, image

我在一个免费网站托管的相册中有多个公共照片图像，并且我有一个带有画廊的网站。我想自动获取相册中上传的所有照片，并将其显示在我的网站画廊中。有没有这个的javascript？或任何可以帮助我的应用程序？我的网站是静态的，顺便说一句。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T03:40:18.740

你有几个选择：

1.  在您的网站上创建一个 iframe，并在 iframe 中显示来自免费网站的图库。
2.  了解公共网站是否有一个 API，可以让您从图库中获取图像 URL 列表。如果是这样，请编写客户端 JavaScript 以使用该 API 来获取图像 URL，然后使用这些 URL 在您的网站上创建一个新的画廊视图。
3.  使用服务器请求免费的网站图库，然后从返回的 HTML 中“抓取”图像 URL，以生成该图库中的图像 URL 列表。使用 ajax 调用从您的服务器获取该图像 URL 列表，然后在您的站点上构建您想要的图库。
4.  使用相同的服务器来抓取图像 URL，然后使用它来构建您可以从客户端请求的所需的画廊 HTML。

请记住，由于浏览器的安全性和同源策略，如果没有可以执行 JSONP 的合作服务器，您不能使用 ajax 从浏览器到与您的网页来自不同域的第三方站点。

# java - 在 Java 中为每个方法启动一个线程

> ID：10134876
> 
> 赞同：-1
> 
> 时间：2012-04-13T03:31:41.763
> 
> 标签：java, multithreading

我有兴趣在一个程序中有多个线程，我的要求是在一个新线程中启动每个方法。

假设我有以下内容：

```
public class A
{
  int val=0;

  public void foo() 
  {
    for(int j=0;j<10;j++)
    { 
      val=j;
      Thread.Sleep(1000);
    }
  }

  public int boo()
  {  
    return val;
  }
} 
```

我想在这样的单独类中在此类中创建一个对象

```
public class B
{
  A myA = new A();
  myA.foo();
  int ret=myA.boo();
} 
```

我想要的是，当你调用`foo()`and时`boo()`，这两种方法必须在不同的线程上运行。`"val"`所以我可以使用方法中的更新值`boo()`。

请好心给我一些建议来解决这个问题。提前致谢..：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T03:41:51.627

您可以使用以下命令在新线程上运行代码：

```
new Thread(new Runnable(){
        public void run(){
            //do stuff here
        }
    }).start(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T04:51:45.930

像这样的东西（最简单的例子）：

```
public static void main(String[] args) {

    final A myA = new A();

    new Thread(new Runnable() {
        public void run() {
            myA.foo();
        }).start();

    new Thread(new Runnable() {
        public void run() {
            int ret=myA.boo();
        }).start();

    Thread.sleep(9999);

} 
```

您需要 make`A` `final`因为这是处理`Runnables`访问局部变量的匿名类（如示例中的两个）。

此外，您必须添加`volatile`（`val`否则其他线程可能看不到任何更改）：

```
volatile int val = 0; 
```

# php - 有这个令人费解的 PHP 5 OOP 查询

> ID：10134879
> 
> 赞同：0
> 
> 时间：2012-04-13T03:32:06.797
> 
> 标签：php, oop

我正在阅读这本电子书，*Beginning PHP5 and Mysql: From Novice to Professional*，在 OOP 部分，我正在尝试使用此示例代码在我的计算机上与本书中重现相同的结果。

```
class Staff
{
var $name;
var $city;
protected $wage;
    function __get($propName)
    {
        echo "__get called!<br />";
        $vars = array("name","city");
        if (in_array($propName, $vars))
        {
        return $this->$propName;
        } else {
        return "No such variable!";
        }
    }
}
$employee = new Staff();
$employee->name = "Mario";
echo $employee->name."<br />";
echo $employee->age; 
```

在书中 - 结果显示为：

```
Mario
__get called!
No such variable! 
```

但在我的电脑上：

```
Mario 
```

只有第一行。另外两行被“忽略”。这是为什么？！？！

我的 php.ini 上是否有一些配置设置需要修改才能使其正常工作？有人可以帮忙解释一下吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T15:03:13.553

`__get()`*只有非公共*或*不存在的*属性才会被调用。现在，有一个名为 的属性`name`，所以你的魔法方法不会被调用。换成它会起作用的`var $name`。`private $name`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T14:57:13.333

好的，我想我找到了答案。根据 php 文档

> 所有重载方法都必须定义为公共的。

所以把魔法方法公开

```
public function __get() {} 
```

# ruby-on-rails-3.2 - “rails generate controller”没有创建控制器

> ID：10134881
> 
> 赞同：2
> 
> 时间：2012-04-13T03:33:03.457
> 
> 标签：ruby-on-rails-3.2, rails-generators

我正在尝试在终端中运行它：

```
rails generate controller welcome index 
```

但是，它不是创建控制器。该过程以退出代码 0 结束。

有任何想法吗？

**编辑**

## 我的环境

```
RUBYGEMS VERSION: 1.8.10
RUBY VERSION: 1.9.3 (2011-10-30 patchlevel 0) [i686-linux]
INSTALLATION DIRECTORY: /home/sam/.rvm/gems/ruby-1.9.3-p0@myapp
RUBY EXECUTABLE: /home/sam/.rvm/rubies/ruby-1.9.3-p0/bin/ruby
EXECUTABLE DIRECTORY: /home/sam/.rvm/gems/ruby-1.9.3-p0@myapp/bin
RUBYGEMS PLATFORMS:
  ruby
  x86-linux
GEM PATHS:
   /home/sam/.rvm/gems/ruby-1.9.3-p0@myapp
   /home/sam/.rvm/gems/ruby-1.9.3-p0@global
GEM CONFIGURATION:
   :update_sources => true
   :verbose => true
   :benchmark => false
   :backtrace => false
   :bulk_threshold => 1000
REMOTE SOURCES:
   http://rubygems.org/
----------------------
IDE: JetBrains RubyMine 4.0.3, build #RM-117.159
OS: Linux 3.0.0-17-generic[i386]
Java: 1.7.0-b147
RubyMine SDK Environment:
Sdk: RVM: ruby-1.9.3-p0 [myapp]
Sdk Version: ver.1.9.3p0 ( revision 33570) p0
Ruby Interpreter: /home/sam/.rvm/rubies/ruby-1.9.3-p0/bin/ruby
RVM Sdk: yes, gemset:myapp
RVM Home: /home/sam/.rvm
Sdk Language Level: 1.9
Sdk Load Path:
     ~/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/site_ruby/1.9.1
     ~/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/site_ruby/1.9.1/i686-linux
     ~/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/site_ruby
     ~/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/vendor_ruby/1.9.1
     ~/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/vendor_ruby/1.9.1/i686-linux
     ~/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/vendor_ruby
     ~/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1
     ~/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/i686-linux
     /opt/RubyMine-4.0.3/rubystubs19 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-17T07:08:41.563

我有同样的问题。我发现这是因为我之前禁用了活动记录。在 config/application.rb 中，确保以下行：

```
require "active_record/railtie" 
```

未注释。之后它应该可以工作（另外，请确保您有一个有效的 config/database.yml 文件）。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-26T11:23:28.147

我遇到了同样的问题。当我在另一个 Rails 应用程序中运行该命令时它起作用了，只是在这个特定的项目中它没有！

原来答案是这样的：我偶然创建了自己的名为控制器的生成器！如果您使用命令“rails g generator controller”，就会发生这种情况。

然后创建了一个自定义控制器（您可以在 lib/generators/controller/controller_generator 中找到它），然后当我使用“rails g 控制器欢迎索引”时，运行的是我自己的生成器，当然它什么也没做！

不知何故，我认为应该通过让 rails（至少默认情况下）阻止我意外创建生成器来避免这个错误！我知道这很愚蠢，但它发生在我身上。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-14T01:01:51.180

有趣的问题。我阅读了你所有的环境信息，看起来绝对没问题，你正在使用 RVM，Gemset 正在使用，Rubymine 很好，等等。

我不确定解决方案，但有几种方法可以尝试，所以我将分享这些。

也许您的 Gemset 正在使用中，但在您第一次尝试时并未使用。检查 Ribymine 的设置，如果它正确地看到您的 RVM 设置。

其他 Rubymine 任务顺利进行没有任何问题？服务器正确启动？

1.  试试 rails generate - 如果 Rails 命令有效，那么你必须看到一些关于你可以生成什么的基本帮助信息。

2.  试试简单的 rails g 控制器欢迎，以后可以添加 index 方法。

3.  从 shell 尝试简单地使用 rails -v 查看 Rails 版本以及它是否正确使用。也许第一次拍摄看起来很白痴，但是当您没有将 Gemset 设置为默认值时，您可能会遇到困难。

4.  检查 /script 文件夹，里面有 rails.rb 吗？您是否修改或删除了此文件？

5.  试试其他rails注释，先尝试生成模型举例，再试试rake tasks看看还有什么问题。

没有更多的错误信息，真的很难猜到更多，尽我所能。也许这些是新手的东西，但有助于了解可能导致问题的原因。祝你好运！

# awk - 是否有可能找到文件驻留在 awk 中的几个级别

> ID：10134884
> 
> 赞同：0
> 
> 时间：2012-04-13T03:33:36.107
> 
> 标签：awk

我可以知道有没有一种方法可以使用一个线性命令在 awk 中找到某些单词的同步，从而我找到的文件位于更深的层次上。想知道“find”cmd 是否可以在这里应用，但我尝试使用 find 它对我不起作用，可能我的用法是错误的。

我的命令如下，如果我将命令放在 *.abc 所在的同一级别，它会很漂亮。

```
awk '/hdl_file/{printf "%s",  $0}/input|output/{printf "%s",  $0}' *.abc | sed s/\.aux// | sed s/,//g | sed s/input// | sed s/output// | sed s/=// | sed s/\"//g | sed s/\.ac// | sed s/hdl_file// | awk '{print $NF $0}' | awk '{$NF="";print $0}' 
```

但是，我需要应用此命令在更深的 2 个层次结构上查找 *.abc 文件。用 find 尝试了下面的命令，但它给出了错误。

```
find . -mindepth 2 | awk '/hdl_file/{printf "%s",  $0}/input|output/{printf "%s",  $0}' *.abc | sed s/\.aux// | sed s/,//g | sed s/input// | sed s/output// | sed s/=// | sed s/\"//g | sed s/\.ac// | sed s/hdl_file// | awk '{print $NF $0}' | awk '{$NF="";print $0}' 
```

awk：不匹配。

请帮忙。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T08:14:39.803

我不确定这是否是您的意图，但`-mindepth`会在低于 2 级*以上*`find`的目录中进行搜索。如果您想要*最多*2 级的文件，则需要使用.**`-maxdepth`**

 **如果你想使用一个命令的输出（在这种情况下`find`）作为另一个命令的参数（`awk`），你可以使用`xargs`，例如：

```
find . -maxdepth 2 | xargs awk '[your awk script goes here]' 
```

或者，`-exec`如果您不关心文件的名称，您可以使用它来读取文件：

```
find . -maxdepth 2 -exec cat '{}' \; | awk '[your awk script goes here]'
# Or possibly:
find . -maxdepth 2 | xargs cat | awk '[your awk script goes here]' 
```

另请注意，您可以避免生成多个 sed 实例并将它们连接在一起，这里有两种方法可以做到这一点：

```
sed -e 's/foo/bar/' -e 's/something/somethingelse/'
sed -f sed_script  # sed_script is a text file with commands for sed 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T13:17:45.700

你也可以使用

```
awk '....' */*/*.abc 
```

如果文件正好是 2 个子目录深。对于任意深度，最近的 bash 可以做到

```
shopt -s globstar
awk '....' **/*.abc 
```

您的 awks 和 seds 管道可以减少到

```
awk '
    /hdl_file/ || /input|output/ {
        gsub(/[,"]/, "")
        sub(/\.aux|\.ac|input|output|hdl_file|=/, "")
        last = $NF
        $NF = ""
        print last, $0
    }             
' *.abc 
```**

# jquery-mobile - CSS 在动态创建的页面中不起作用

> ID：10134888
> 
> 赞同：0
> 
> 时间：2012-04-13T03:34:21.640
> 
> 标签：jquery-mobile

我是 JQuery Mobile 的新手，正在尝试构建一个简单的应用程序。部分代码如下：

```
 <script type="text/javascript">
    $(document).ready(function(){
         $(".trycss").css({
            'background': 'red' });
    $.post("http://getcheckout.php", 
        function(data){
            var CheckOutListHTML ='<p class="trycss"> HELLO</p>';
                $('.class-ItemsList').append(CheckOutListHTML);
            },"json");
    });

</script>

<div data-role="page" id="id-ItemsPage">
    <div data-role="header" data-position="fixed">
        <h1>Items</h1>
    </div><!-- /header -->
    <div data-role="content">   
        <div class="class-ItemsList">
        </div>
    </div><!-- /content -->
</div><!-- /page --> 
```

所以，我正在尝试使用“trycss”来设计我正在动态创建的东西。但它不起作用。有人可以帮忙吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T09:04:36.683

**尝试以下操作：**

```
 <style>
   .trycss { background-color: red; }
 </style>
 <script type="text/javascript">
    $(document).ready(function(){
    $.post("http://getcheckout.php", 
        function(data){
            var CheckOutListHTML ='<p class="trycss"> HELLO</p>';
                $('.class-ItemsList').append(CheckOutListHTML);
            },"json");
    });

</script>

<div data-role="page" id="id-ItemsPage">
    <div data-role="header" data-position="fixed">
        <h1>Items</h1>
    </div><!-- /header -->
    <div data-role="content">   
        <div class="class-ItemsList">
        </div>
    </div><!-- /content -->
</div><!-- /page --> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T11:28:23.163

`$(".trycss").css(...`执行一次并将样式（不是“样式表”）应用于当时存在的所有匹配元素，并且您直到稍后才创建元素。

你到底想做什么？你为什么使用`$(".trycss").css(...`而不是像@hardik 建议的样式表？

# html - 如何将任意散列转换为 html 表

> ID：10134897
> 
> 赞同：1
> 
> 时间：2012-04-13T03:36:05.903
> 
> 标签：html, perl

我看过[HTML::QuickTable](http://search.cpan.org/~nwiger/HTML-QuickTable-1.12/lib/HTML/QuickTable.pm "HTML::快速表")但 AFAIK 它只支持一级深度哈希。对于这个模块，在多级哈希的情况下，我找不到为某些标头指定`colspan`and的方法。`rowspan`有什么解决办法吗？

考虑这个哈希，它需要被转换成一个像[这里](http://jsfiddle.net/HxeK8/1/)这样的表：

```
my $persons = {
          'Person1' => {
                    'Prop1' => {
                                  'X' => '8',
                                  'Y' => '8'
                                },
                    'Prop2' => {
                                   'X' => '5',
                                   'Y' => '5'
                               },
                    'Prop3' => {
                                   'X' => '0',
                                   'Y' => '0'
                               },
                    'Prop4' => {
                                   'X' => '10',
                                   'Y' => '10'
                               },
                    'Prop5' => {
                                   'X' => '1',
                                   'Y' => '12'
                               }
                    },
          'Person2' => {
                    'Prop1' => {
                                  'X' => '12',
                                  'Y' => '12'
                                },
                    'Prop2' => {
                                  'X' => '12',
                                  'Y' => '12'
                               },
                    'Prop3' => {
                                  'X' => '12',
                                  'Y' => '12'
                               },
                    'Prop4' => {
                                  'X' => '12',
                                  'Y' => '12'
                               },
                    'Prop5' => {
                                  'X' => '12',
                                  'Y' => '12'
                               }
                    }
        }; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T08:51:03.143

你检查了[HTML:::Table](http://search.cpan.org/~ajpeacock/HTML-Table-2.08a/lib/HTML/Table.pm)吗？

# ruby-on-rails - Rails：确保一次只有一个布尔字段设置为 true

> ID：10134898
> 
> 赞同：16
> 
> 时间：2012-04-13T03:36:13.853
> 
> 标签：ruby-on-rails, ruby

我有一个徽标模型，其中包含名称：字符串，默认值：布尔值。我希望 true 值是唯一的，以便一次只能将数据库中的一项设置为 true。如何在我的控制器中设置我的更新和新操作以将我的徽标的所有其余值设置为 false？

假设我的数据库中有以下设置
模型徽标
名称：字符串 | 默认值：布尔值 |
项目1 | 真实 |
项目2 | 假 |
项目3 | 假 |

如果我将 Item2 的默认值更改为 true，我希望它遍历所有徽标并将其余徽标设置为 false，因此一次只有一个为 true，所以看起来像这样。

名称：字符串 | 默认值：布尔值 |
项目1 | 假 |
项目2 | 真实 |
项目3 | 假 |

感谢您提前提供任何帮助。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-04-13T05:46:33.480

此代码是从先前的答案中窃取的，并略有简化：

```
def falsify_all_others
  Item.where('id != ?', self.id).update_all("default = 'false'")
end 
```

您可以在模型的 before_save 回调中使用此方法。

实际上，最好只“伪造”哪些值为“真”的记录，如下所示：

```
Item.where('id != ? and default', self.id).update_all("default = 'false'") 
```

更新：为了保持代码干燥，使用`self.class`而不是`Item`：

```
self.class.where('id != ? and default', self.id).update_all("default = 'false'") 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-02-02T18:05:42.473

我认为在你伪造别人之前检查你保存的是否是真的很好。否则，当您保存不活动的记录时，您会伪造所有人。

```
def falsify_all_others
    if self.default
        self.class.where('id != ? and default', self.id).update_all("default = 'false'")
    end
end 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-13T03:40:08.787

在您的控制器代码中，您可以执行类似的操作....请注意，您可能将 Item2 作为参数 [...] 以便您可以在下面互换

```
@items_to_be_falsified = Item.where('id != ?', Item2.id)

@items_to_be_falsified.each do |item|
  item.default = false
  item.save
end 
```

请注意，当您开始工作时，将其移动到模型中，使其成为一个函数并`Item2.falsify_all_others`像下面这样调用它是一种很好的做法

```
def falsify_all_others
  Item.where('id != ?', self.id).each do |item|
    item.default = false
    item.save
  end
end 
```

享受！

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-03T08:14:00.820

我还建议您伪造所有记录，然后将其变为真实。

```
add_column :users, :name ,:boolean, default: false 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2014-08-29T15:21:49.903

好的，您还需要一些东西。

不要使用默认的字段名称，它通常为数据库保留。将默认记录保存为 false 会将所有记录设置为 false，这不是您想要的。检查我们是否将此记录设置为 true 和 falseify。

```
 before_save :falsify_all_others
  def falsify_all_others
    if is_default
      self.class.where('id != ?', self.id).where('is_default').update_all(:is_default => false)
    end
  end 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2020-03-26T09:04:07.057

如果您是最近才来到这里并使用 Rails 6，则应该在数据库级别和模型级别上对此进行介绍：

**数据库级别：**

```
add_index :items, :default, unique: true, where: '(default IS TRUE)' 
```

**型号等级：**

```
class Item < ApplicationRecord
  scope :default, -> { where(default: true) }

  validates :default, uniqueness: { conditions: -> { default } }
end 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-01-28T03:25:42.290

如果您希望它可以用于创建和更新（rails v4），请记下[rails guides中的这个花絮](http://guides.rubyonrails.org/active_record_callbacks.html#creating-an-object)

> after_save 在 create 和 update 时都运行，但总是在更具体的回调 after_create 和 after_update 之后运行，无论宏调用的执行顺序如何。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2020-09-17T15:18:10.347

```
class Model < ApplicationRecord
  before_save :ensure_single_default, if: :is_default?

  private

  def ensure_single_default
    self.class.update_all(is_default: false)
  end
end 
```

您无需检查 id，因为此回调发生在保存真实值之前。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2022-01-24T12:00:48.863

更多 ActiveRecord，更少原始 SQL 决策

```
after_commit :reset_default, if: :default?

private

def reset_default
  self.class.where.not(id: id).where(default: true).update_all(default: false)
end 
```

# bash - 为什么 sudo cat 给予 Permission denied 但 sudo vim 工作正常？

> ID：10134901
> 
> 赞同：95
> 
> 时间：2012-04-13T03:37:14.023
> 
> 标签：bash, shell, echo, cat

我正在尝试在我的 Arch 的 pacman.conf 文件中自动添加存储库源，但`echo`在我的 shell 脚本中使用该命令。但是，它会像这样失败：-

```
sudo echo "[archlinuxfr]" >> /etc/pacman.conf
sudo echo "Server = http://repo.archlinux.fr/\$arch" >> /etc/pacman.conf
sudo echo " " >> /etc/pacman.conf

-bash: /etc/pacman.conf: Permission denied 
```

如果我使用 vim 手动更改 /etc/pacman.conf，通过

```
sudo vim /etc/pacman.conf 
```

并退出 vim `:wq`，一切正常，我的 pacman.conf 已手动更新，没有“权限被拒绝”投诉。

为什么会这样？我怎么`sudo echo`去上班？（顺便说一句，我也尝试过使用，`sudo cat`但也因权限被拒绝而失败）

* * *

## 回答 #1

> 赞同：141
> 
> 时间：2012-04-13T16:57:22.277

正如@geekosaur 解释的那样，shell 在运行命令之前会进行重定向。当您键入以下内容时：

```
sudo foo >/some/file 
```

您当前的 shell 进程会创建一个自身的副本，该副本首先尝试打开`/some/file`以进行写入，然后如果成功，它将将该文件描述符作为标准输出，并且只有成功时才会执行`sudo`。这是第一步失败的。

如果您被允许（sudoer 配置通常会阻止运行 shell），您可以执行以下操作：

```
sudo bash -c 'foo >/some/file' 
```

但我发现一个好的解决方案通常是使用`| sudo tee`代替`>`和`| sudo tee -a`代替`>>`. 如果重定向是我首先需要的唯一原因，那将特别有用`sudo`；毕竟，以root身份不必要地运行进程正是`sudo`为了避免而创建的。以root身份运行`echo`只是愚蠢的。

```
echo '[archlinuxfr]' | sudo tee -a /etc/pacman.conf >/dev/null
echo 'Server = http://repo.archlinux.fr/$arch' | sudo tee -a /etc/pacman.conf >/dev/null
echo ' ' | sudo tee -a /etc/pacman.conf >/dev/null 
```

我`> /dev/null`最后添加了因为`tee`它的输出发送到*命名*文件*和*它自己的标准输出，我不需要在我的终端上看到它。（该`tee`命令就像物理管道中的“T”连接器，这就是它的名字。）我切换到单引号（`'`... `'`）而不是双引号（ `"`... ），`"`所以一切都是字面的，我不必在 in 前面加上`$`反斜杠`$arch`。（如果没有引号或反斜杠，`$arch`将被 shell 参数的值替换，该值`arch`可能不存在，在这种情况下，`$arch`将被任何内容替换并消失。）

这样就可以使用`sudo`. 现在对在 shell 脚本中输出包含换行符的文本的方法进行了冗长的题外话。:)

正如他们所说，为了 BLUF 它，我首选的解决方案是将此处的文档输入到上述`sudo tee`命令中；那么根本不需要`cat`or `echo`or `printf`or 任何其他命令。单引号已移至前哨引言`<<'EOF'`，但它们在那里具有相同的效果：正文被视为文字文本，因此`$arch`不用管：

```
sudo tee -a /etc/pacman.conf >/dev/null <<'EOF'
[archlinuxfr]
Server = http://repo.archlinux.fr/$arch

EOF 
```

但是，虽然我会这样做，但还有其他选择。这里有几个：

您可以坚持`echo`每行一个，但将它们全部组合在一个子shell中，因此您只需附加到文件一次：

```
(echo '[archlinuxfr]'
 echo 'Server = http://repo.archlinux.fr/$arch'
 echo ' ') | sudo tee -a /etc/pacman.conf >/dev/null 
```

如果您添加`-e`到`echo`（并且您使用的是支持该非 POSIX 扩展的 shell），您可以使用以下命令将换行符直接嵌入到字符串中`\n`：

```
# NON-POSIX - NOT RECOMMENDED
echo -e '[archlinuxfr]\nServer = http://repo.archlinux.fr/$arch\n ' | 
  sudo tee -a /etc/pacman.conf >/dev/null 
```

但正如上面所说，这不是 POSIX 指定的行为。您的 shell 可能只是回显一个文字`-e`，然后是一个带有一堆文字`\n`s 的字符串。这样做的 POSIX 方法是使用`printf`而不是`echo`; 它会自动处理其参数`echo -e`，但不会在末尾自动添加换行符，因此您也必须在`\n`此处添加一个额外的：

```
printf '[archlinuxfr]\nServer = http://repo.archlinux.fr/$arch\n \n' | 
  sudo tee -a /etc/pacman.conf >/dev/null 
```

对于这些解决方案中的任何一个，命令作为参数字符串得到的内容包含两个字符的序列`\n`，并且由命令程序本身（内部的代码`printf`or `echo`）将其转换为换行符。在许多现代 shell 中，您可以选择使用 ANSI 引号`$'`... ，这将在命令程序看到字符串之前`'`将序列`\n`转换为*文字换行符。*这意味着此类字符串可以与任何命令一起使用，包括普通的旧`-e`-less `echo`：

```
echo $'[archlinuxfr]\nServer = http://repo.archlinux.fr/$arch\n ' | 
  sudo tee -a /etc/pacman.conf >/dev/null 
```

但是，虽然比`echo -e`ANSI 引号更便携，但它仍然是非 POSIX 扩展。

同样，虽然这些都是选项，但我更喜欢`tee <<EOF`上面的直接解决方案。

* * *

## 回答 #2

> 赞同：58
> 
> 时间：2012-04-13T03:40:18.867

问题是重定向正在由您的原始 shell 处理，而不是由`sudo`. 贝壳不能读心，也不知道那个特定的东西`>>`是为了`sudo`而不是为了它。

你需要：

1.  引用重定向（所以它被传递给`sudo)`
2.  **并**使用`sudo -s`（以便`sudo`使用 shell 来处理引用的重定向。）

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2012-06-13T13:57:00.857

[http://www.innovationsts.com/blog/?p=2758](http://www.innovationsts.com/blog/?p=2758)

由于上面的说明不是很清楚，我正在使用该博客文章中的说明。通过示例可以更轻松地了解您需要做什么。

> $ sudo cat /root/example.txt | gzip > /root/example.gz
> -bash: /root/example.gz: 权限被拒绝

请注意，导致错误的是管道中的第二个命令（gzip 命令）。这就是我们使用带有 -c 选项的 bash 技术的用武之地。

> $ sudo bash -c 'cat /root/example.txt | gzip > /root/example.gz'
> $ sudo ls /root/example.gz
> /root/example.gz

我们可以从 ls 命令的输出中看到压缩文件创建成功。

第二种方法与第一种方法相似，因为我们将命令字符串传递给 bash，但我们是通过 sudo 在管道中进行的。

> $ sudo rm /root/example.gz
> $ echo "cat /root/example.txt | gzip > /root/example.gz" | sudo bash
> $ sudo ls /root/example.gz
> /root/example.gz

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2017-01-23T19:26:12.433

```
sudo bash -c 'echo "[archlinuxfr]" >> /etc/pacman.conf' 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-04-03T17:16:42.490

**STEP 1**在 bash 文件中创建一个函数 ( `write_pacman.sh`)

```
#!/bin/bash

function write_pacman {
 tee -a /etc/pacman.conf > /dev/null << 'EOF'
  [archlinuxfr]
  Server = http://repo.archlinux.fr/\$arch
EOF
} 
```

`'EOF'`不会解释`$arch`变量。

**STE2**源 bash 文件

```
$ source write_pacman.sh 
```

**STEP 3**执行函数

```
$ write_pacman 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-10-07T19:00:44.150

附加文件（sudo cat）：

```
cat <origin-file> | sudo tee -a <target-file> 
```

将回声附加到文件（sudo echo）：

```
echo <origin> | sudo tee -a <target-file> 
```

（额外）忽略输出：

```
echo >origin> | sudo tee -a <target-file> >/dev/null 
```

# sql - SQL - 百分比计数

> ID：10134905
> 
> 赞同：-1
> 
> 时间：2012-04-13T03:37:53.667
> 
> 标签：sql, sql-server-2008

我有一个名为 URP_PROJECT 的表**，一个名为 ts_title****的**列。**ts_title**列下有不同的记录数据。如何计算**ts_title**下的每条记录的百分比？根据下面的 SQL 查询添加**百分比列。**

 ******我开始：

选择 ts_title

COUNT (ts_title) AS 百分比

帮我继续，谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T03:50:17.303

这可能会给你你正在寻找的东西

```
 select ts_title, 
         count(1) * 100.0 / (select count(1) from upr_project)
 from upr_project
group by ts_title 
```

乘以 100.0 将其转换为浮点数以获得更准确的百分比。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T18:19:14.173

另一种解决方案是使用窗口函数：

```
select ts_title,
       100.0 * (up.cnt*1.0 / (sum(up.cnt) over (partition by 1)))
from 
(
  select ts_title, count(*) as cnt
  from upr_project
  group by ts_title
) up 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T03:53:20.840

尝试这个

```
SELECT ts_title,
(count(ts_title) * 100 / (SELECT count(*) FROM URP_PROJECT)) as percentage 
FROM URP_PROJECT Group BY ts_title 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-13T03:54:14.617

嗨，我猜您正在寻找整个表格中 ts_title 记录的百分比。如果是这种情况，这将对您有所帮助

```
DECLARE @ActualCount INT

select @ActualCount = COUNT(*) from urp_project

select ts_title
  ,(Count(ts_title)/ @ActualCount )* 100 AS Percentage       
from urp_project
group by ts_title; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-13T18:27:31.973

像这样的东西，也许：

```
SELECT
  ts_title,
  COUNT(*) * 100.0 / SUM(COUNT(*)) OVER () AS percentage
FROM URP_PROJECT
GROUP BY ts_title 
```

有用的阅读：

*   [OVER 子句 (Transact-SQL)](http://msdn.microsoft.com/en-us/library/ms189461%28v=sql.100%29.aspx)******

# ruby-on-rails - Ruby on Rails + mongoid：未找到验证器

> ID：10134906
> 
> 赞同：1
> 
> 时间：2012-04-13T03:37:56.577
> 
> 标签：ruby-on-rails, mongodb, mongoid

```
mongo => 2.0.4
rails => 3.2.2
ruby => 1.8.7 
```

我正在学习一个教程（实际上是一些教程的组合），并且我有一个相对简单的模型，并且正在研究 CRUD。我读过的所有内容都说：

```
class Foo
  include Mongoid::Document
  field :foo
  validates :foo, presence: true
end 
```

起初一切正常，但我添加了这`validates`条线。我收到此错误：

```
syntax error, unexpected ':', expecting kEND
   validates :task, presence: true 
```

我不得不假设这是由于一些旧版本的 ruby​​ 造成的。我也试过这个：

```
class Foo
  include Mongoid::Document
  field :foo
  validates :foo, presence => true
end 
```

...但后来我明白了

```
Unknown validator: 'FooValidator' 
```

在我的浏览器中，但只是`Unknown validator: 'Validator'`在运行时`guard`（使用`rspec`）。我不确定问题是什么，谷歌也没有帮助。似乎我拥有的两个块中的任何一个都应该工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T04:39:36.063

更改`...:foo, presence`为`...:foo, :presence`

# drupal - 如何将 Drupal 7 Image-Field 标题文本字段更改为 textarea？

> ID：10134908
> 
> 赞同：0
> 
> 时间：2012-04-13T03:38:02.260
> 
> 标签：drupal, drupal-7

功能是：`image_field_widget_process (image.field.inc)`我想要：

`$element['title'] = array('#type' => '**textfield**')`

到

`$element['title'] = array('#type' => '**textarea**')`

我如何在不破解 drupal 核心代码的情况下获得它？

也许：`form_alter + #process #after_build`或者`theme_textfield`？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T06:57:59.210

我找到了一个简单的方法来获得它。这是通过覆盖**theme_image_widget**函数来实现的：

```
function yourtemplatename_image_widget($vars){
    //$vars['element']['title']['#type'] = 'textarea';    // not works
    $vars['element']['title']['#theme'] = 'textarea';    // works !!
    return theme_image_widget($vars);
} 
```

就这样。但我不知道在这种情况下如何更改图像上传目录。谁能帮我 ？

# hibernate - Hibernate：如何为不是主键的复合唯一键编码映射？

> ID：10134911
> 
> 赞同：0
> 
> 时间：2012-04-13T03:38:29.867
> 
> 标签：hibernate, hibernate-mapping, hibernate3-maven-plugin

我有一个我正在计算选票的文件。我想限制每个用户对给定的比赛进行一次投票。用户可以返回和更改他/她的投票，但它会更新比赛中竞争对手的选择。

我不知道如何使用 Hibernate 映射文件来做到这一点。（编程语言是 Java。）

我已经研究过使用复合 ID，但如果我以后需要它，我想在这个东西上有一个典型的数字主键。（我也不知道怎么做！=）

这是我生成模型对象和 SQL 的映射文件：

```
<?xml version="1.0"?> 
<!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
    "http://www.hibernate.org/dtd/hibernate-mapping-3.0.dtd">
<hibernate-mapping>
    <class name="com.example.project.model.db.Vote" table="vote">

        <id name="voteId" type="int">
            <meta attribute="scope-set">protected</meta>
            <meta attribute="use-in-equals">true</meta>
            <generator class="native" />
        </id>
        <many-to-one name="user" column="userId" unique="false" not-null="true" lazy="false"
            class="com.example.project.model.db.User"
        />
        <many-to-one name="competition" column="competitionId" unique="false" not-null="true" lazy="false"
            class="com.example.project.model.db.Competition"
        />
        <many-to-one name="competitor" column="competitorId" unique="false" not-null="true" lazy="false"
            class="com.example.project.model.db.Competitor"
        />
        <property name="dateAdded" type="date" not-null="true" />
    </class>
</hibernate-mapping> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T04:06:31.893

我认为约束应该在数据库上强制执行，而不是在您的应用程序代码中。在将来的某个时候，您正在编写的应用程序可能不是针对此数据运行的唯一代码，如果另一个应用程序不强制执行相同的约束，则数据已损坏。数据和数据结构也很可能会超过您的应用程序代码。因此，我认为实施这种类型的约束的正确位置是在数据库上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T05:56:07.133

通过以下方式将映射从投票更改为用户将解决问题。在映射中添加 unique="true" 应该可以工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-26T10:14:12.887

在 Hibernate 使用嵌入式数据库（`HSQL or H2`）的情况下，数据库中的实现将无法工作。在这种情况下，当 hibernate 访问模型层以实现其 db 结构时，将在运行时抛出唯一键破坏。

`unique=true`更好地以满足.Vote up for [@Ram](https://stackoverflow.com/users/1329069/ram-reddy)的方式使用主键

# wordpress - 如何删除 wordpress 页面或帖子内容中多余的 p 标签

> ID：10134915
> 
> 赞同：0
> 
> 时间：2012-04-13T03:38:53.790
> 
> 标签：wordpress, formatting

我已经添加了 remove_filter ('the_content', 'wpautop'); 在 functions.php 中，但仍然在内容中获得额外的 p & br 标签。

请查看此页面[http://insideoutdogtraining.com/rescueseries](http://insideoutdogtraining.com/rescueseries)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T12:30:33.573

利用

```
echo get_the_content(); 
```

反而

```
the_content(); 
```

在你的主题中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T05:08:06.233

你发布的内容是否已经有这些额外的

和
标签还是在您查询它们时自动生成？

# django - Django IntegrityError signup_simplesubscriber.date_created 可能不为 NULL

> ID：10134919
> 
> 赞同：0
> 
> 时间：2012-04-13T03:39:21.683
> 
> 标签：django, django-forms

我已经阅读了每篇“InterityError”+“may no be NULL”的帖子，但仍然无法找出导致此错误的原因。

我有一个由两部分组成的注册表单。第一部分只是选择产品。这会将产品 ID 作为 URL 的一部分传递到下一页，在那里他们输入个人信息。在我开始删除字段之前，我可以让表单正常工作——我正在使用模型表单——因为不需要显示某些字段。

这是我的模型和modelForm：

```
class SimpleSubscriber(models.Model):
    name = models.CharField(max_length=255)
    address = models.CharField(max_length=200)
    city = models.CharField(max_length=100)
    state = models.CharField(max_length=2)
    zipcode = models.CharField(max_length=9)
    phone = models.CharField(max_length=10)
    email = models.EmailField()
    date_created = models.DateTimeField(null=True)
    sub_type = models.ForeignKey(Product)
    def __unicode__(self):
        return self.name

class SubscriberForm(ModelForm):
    class Meta:
        model = SimpleSubscriber
        fields = ('name', 'address', 'city', 'state', 'zipcode', 'phone', 'email', 'sub_type',)#'date_created', 
```

这是我的观点：

```
def select_product(request):
    title = "get yourself an e-edition. wurd."
    pform = Product.objects.order_by('product_active')  
    if request.method == 'POST': # If the form has been submitted...
        pform = ProductForm(request.POST) # A form bound to the POST data
        if pform.is_valid(): # All validation rules pass 
        # ...
            return HttpResponseRedirect('signup/%i' % pform.id) # Redirect after POST
    else:
        form = ProductForm() # An unbound form
    return render_to_response('signup/index.html', {'title': title, 'pform': pform}, context_instance=RequestContext(request))

def subscriber_signup(request, product_id):
    productchoice = Product.objects.get(id=product_id)
    now = datetime.datetime.now()
    title = "We need some information."  
    if request.method == 'POST': # If the form has been submitted...
        sform = SubscriberForm(request.POST) # A form bound to the POST data
        if sform.is_valid(): # All validation rules pass
            sform.date_created = now
            sform.sub_type = productchoice
            sform.save()
            return HttpResponseRedirect('thankyou/') # Redirect after POST
    else:
        sform = SubscriberForm() # An unbound form
    return render_to_response('signup/detail.html', {'title': title, 'sform': sform, 'productchoice': productchoice, 'now': now.date(),}, context_instance=RequestContext(request)) 
```

我认为它与modelForm有关，但我很新，所以我真的不知道。如果我将所有字段添加到 SubscriberForm，那么它们会被填写并且一切正常。但是我不希望用户在填写表格时必须说出来，所以我现在输入 sform.date_created = 并且我希望通过他们在上一页中选择的选项自动填写 product_id。但是如果我从表单中排除这些字段，它会抛出 IntegrityError，这对于解释要更改的内容没有多大帮助。

关于我在哪里搞砸的任何提示？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T04:27:20.140

两件事情：

1）您可能会受益于在您的表单定义中使用排除：

```
class SubscriberForm(ModelForm):
    class Meta:
        model = SimpleSubscriber
        exclude = ('date_created', ) 
```

2）对于你的问题，这里是如何解决它：

```
if sform.is_valid(): # All validation rules pass

    suscriber = sform.save(commit=False)
    suscriber.date_created = now
    suscriber.sub_type = productchoice
    suscriber.save() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T19:17:54.157

除了@fceruti 的建议之外，您还可以`null=True`在适当的情况下在模型的字段上添加更多 kwarg 标签 - 仅强制在表单中完成最少的字段集。

# templates - 如何对小胡子块进行故障排除？

> ID：10134924
> 
> 赞同：0
> 
> 时间：2012-04-13T03:39:51.690
> 
> 标签：templates, templating, handlebars.js, mustache

我正在尝试在我的项目中使用**把手**，但是在让它输出每个对象的属性时遇到了麻烦。

**数据**

```
people: [{"name":"Moe"}, {"name":"Larry"}, {"name":"Curly"}] 
```

**模板**

```
{{#people}} Name: {{name}} <br/>{{/people}} 
```

**输出**

```
Name: 
Name: 
Name: 
```

它显然会读取人员列表，因为它输出了 3 次。但我不知道为什么它看不到简单的路径`name`。

*   如果我放`{{this.name}}`，它也会呈现一个空白。
*   如果我把`{{this}}`，我看到了`[object Object]`。

如何记录或调查此对象，以便知道为什么未呈现*name属性？*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-03T13:06:42.533

您的其余代码一定有问题，在这个小提琴中它可以工作：

[http://jsfiddle.net/hDE3P/](http://jsfiddle.net/hDE3P/)

```
var context = {
   people : [{"name":"Moe"}, {"name":"Larry"}, {"name":"Curly"}] 
} 
var source   = $("#entry").text();
var template = Handlebars.compile(source);
$("#out").html( template(context) ); 
```

用这个 html

```
<script id="entry" type="text/x-handlebars-template">
    {{#people}} Name: {{name}} <br/>{{/people}}
</script>

output:  
<div id="out"></div> 
```

试试这些东西：

*   在调试器中检查您的数据模型（Firebug 或 sth.）
*   检查您的模板是否正确（如果不在脚本标签中，有时浏览器会破坏它）
*   调试 Handlebars “每个”处理程序以查看上下文的样子

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T07:26:59.597

尝试`{{#each people}} Name: {{name}} <br/>{{/each}}`

# c# - 使用 Moles 覆盖 System.Configuration，而不是作为单元测试

> ID：10134925
> 
> 赞同：3
> 
> 时间：2012-04-13T03:39:57.133
> 
> 标签：c#, moles

我正在考虑构建一个集中式服务，为经过适当身份验证的应用程序提供连接字符串。

为了使服务与正常流程兼容，我认为覆盖 app.config 或 web.config 中的 System.Configuration ConnectionStrings 将是一件好事。

我曾考虑过使用 Moles 来执行此操作，但我发现的唯一示例是 UnitTests。

我真正想要的是对 System.Configuration.ConfigurationManager 类的 Mole 覆盖，这样我就可以专门覆盖 ConnectionStringsGet 方法来查找连接字符串的自定义样式。如果未找到，则将调用传递给原始 ConfigurationManger 代码以处理正常的连接字符串。

我还没有用 Moles 编写任何代码，因为我正在为如何开始这个想法而摸不着头脑。如果有人对如何开始有指导，我会接受并继续挖掘。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T02:05:54.817

在这种情况下，Moles 似乎并不真正支持尝试覆盖 System.Configuration。

我发现一些帖子展示了定制 system.configuration 过程的有希望的方法。

首先是 Andy Pook 的博客文章[http://andypook.blogspot.com/2007/07/overriding-configurationmanager.html](http://andypook.blogspot.com/2007/07/overriding-configurationmanager.html)，其次是 CodeProject 文章扩展了 Andy [http://www.codeproject.com/给出的解决方案文章/69364/Override-Configuration-Manager](http://www.codeproject.com/Articles/69364/Override-Configuration-Manager)

这些文章对我的思考过程很有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T02:15:28.913

您最好创建一个接口来从配置文件中获取数据，以及一个只包装静态成员的类。然后，您可以执行自定义逻辑，并回退到标准静态方法。

# jquery - 在 jPlayer 中播放通过 Paperclip - Ruby on Rails - jQuery - jPlayer 上传的歌曲

> ID：10134927
> 
> 赞同：2
> 
> 时间：2012-04-13T03:40:07.733
> 
> 标签：jquery, ruby-on-rails, html, html5-audio, jplayer

感谢您提前提供任何帮助。

所以，我使用 Paperclip 将歌曲存储在文件系统中。然后我尝试用 jPlayer 播放这些歌曲。

我已按照所有指示进行操作，但似乎无法通过单击应该将音频解析到 jPlayer 的 link_to 方法来播放音频。

基本上，当单击“播放歌曲”按钮时，应该播放一首歌曲。

我的 jPlayer 函数如下所示：

```
$(document).ready(function(){
    $("#jquery_jplayer_1").jPlayer({
        ready: function () {
            $(this).jPlayer("setMedia", {
                mp3: '<source>'
            });
        },
        swfPath: "jplayerflash",
        supplied: "mp3",
    });
  }); 
```

我的观点是这样的：

```
<td><%= link_to 'Play Song', song_upload.song.url, :class => "html5" %></td> 
```

音频文件通过回形针存储在 assets/user_song_uploads... 歌曲都是 MP3 格式，我使用的是 Chrome，所以一切都应该工作。

尝试在 jPlayer 中设置媒体时出现问题。

[链接到应该如何实现 jPlayer](http://www.jplayer.org/latest/quick-start-guide/step-7-audio/) [这是我最初学习如何实现音乐聆听应用程序的地方。在“使用 HTML5 音频流式传输”部分进行到一半时，我使用了 '' - 但显然无法使用此实现。](http://net.tutsplus.com/tutorials/create-a-simple-music-streaming-app-with-ruby-on-rails/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-14T16:06:29.467

很抱歉回复晚了，但我想出了我的答案。

```
$(document).ready(function(){
$("#jquery_jplayer_1").jPlayer({
    swfPath: "/app/assets/jplayerflash",
    supplied: "mp3",
    wmode: "window"
});
$('a.play').click(function(e) {
    e.preventDefault();
    $("#jquery_jplayer_1")
        .jPlayer("setMedia", {mp3: this.href })
        .jPlayer("play"); 
```

和我的观点：

```
<td><%= link_to 'Play Song', song_upload.song.url, :class => "play" %></td> 
```

# html - 奇怪的 CSS3 过渡（闪烁）

> ID：10134935
> 
> 赞同：39
> 
> 时间：2012-04-13T03:40:28.117
> 
> 标签：html, css, css-transitions

当我将鼠标悬停在我的按钮上时，它会在开始过渡时首先发出白色闪光。为什么当我将 css3 过渡应用到我的按钮时它会闪烁？*我的浏览器是谷歌浏览器*

## [看这里](http://jsfiddle.net/hrDff/2/)

* * *

```
<button>Log In</button>​ 
```

CSS：

```
button {
    background: #ff3019;
    background: -moz-linear-gradient(top,  #ff3019 0%, #cf0404 100%);
    background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#ff3019), color-stop(100%,#cf0404));
    background: -webkit-linear-gradient(top,  #ff3019 0%,#cf0404 100%);
    background: -o-linear-gradient(top,  #ff3019 0%,#cf0404 100%);
    background: -ms-linear-gradient(top,  #ff3019 0%,#cf0404 100%);
    background: linear-gradient(top,  #ff3019 0%,#cf0404 100%);
    filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#ff3019', endColorstr='#cf0404',GradientType=0 );
    border:1px solid #890000;
    display:block;
    margin:0 auto;
    width:200px;
    padding:5px 0;
    border-radius:8px;
    color:#fff;
    font-weight:700;
    text-shadow:0 1px 1px #000+50;
    box-shadow:0 2px 3px #000+150;
    -webkit-transition:background linear .5s;
}
button:hover {
    background:#ff3019;
}
button:active {
    background:#cf0404;
} 
```

​</p>

* * *

## 回答 #1

> 赞同：116
> 
> 时间：2012-10-22T22:31:01.697

我摆脱了闪烁。将 « `-webkit-backface-visibility: hidden;`» 添加到您正在转换的元素中。瞧！

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-07-31T10:31:32.510

Miguel 关于背面可见性修复烦人的闪光灯是正确的。但是，我使用的是变换比例，并且 SVG 动画在缩放后不会很清晰。如果您不使用 backface-visibility 属性，它会很清晰。

所以要么你得到一个带有模糊图形的漂亮动画，要么是一个带有屏幕闪烁的漂亮图形。

但是，您可以将以下行添加到要转换的对象的父级，这将修复屏幕的闪烁并在缩放后仍使您的图形清晰。

```
-webkit-transform: translate3D(0, 0, 0); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-13T03:51:55.063

我相信这是目前没有修复的问题。我在玩之前也遇到过这个问题，无法让它工作。使用纯色似乎很好，或者用背景图像伪造它。

类似的问题：[Webkit support for gradient transitions](https://stackoverflow.com/questions/3790273/webkit-support-for-gradient-transitions)

更多细节：[http ://screenflicker.com/mike/code/transition-gradient/](http://screenflicker.com/mike/code/transition-gradient/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-29T14:28:18.120

您注意到的闪烁实际上是按钮的背景颜色被更改为透明（因此，按钮在您的 Fiddle 中“闪烁”或变为白色，因为主体的背景颜色为白色）。

如果您将按钮覆盖在具有完全相同大小/高度/背景颜色（包括渐变）的另一个元素上，则“闪烁”将不明显。

在此处查看使用您的小提琴的示例：http: [//jsfiddle.net/hrDff/12/](http://jsfiddle.net/hrDff/12/)

仍然绝对是一个错误...

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-09-13T15:20:52.227

我认为问题在于您正在从线性渐变背景切换到 Google Chrome 和 Microsoft Edge 网络浏览器的纯色背景色。要解决此问题，您可以为伪类添加类似的线性渐变背景，在本例中为 :hover 和 :active。我自己在你的 jsfiddle 上尝试过，当我将鼠标悬停在按钮上时，渲染中没有闪烁。

```
 background: -webkit-linear-gradient(top,  #ff3019 0%,#cf0404 100%);
        background: -o-linear-gradient(top,  #ff3019 0%,#cf0404 100%);
        background: -ms-linear-gradient(top,  #ff3019 0%,#cf0404 100%);
        background: linear-gradient(top,  #ff3019 0%,#cf0404 100%);
```

我更改了线性渐变的顶部颜色，以显着改变悬停效果。

```
 button:hover {
background: -webkit-linear-gradient(top,  #ff5e4c 0%,#cf0404 100%);
        background: -o-linear-gradient(top,  #ff5e4c 0%,#cf0404 100%);
        background: -ms-linear-gradient(top,  #ff5e4c 0%,#cf0404 100%);
        background: linear-gradient(top,  #ff5e4c 0%,#cf0404 100%);
   }
```

当我将鼠标悬停在 Chrome 或 Microsoft Edge 中的按钮上时，闪烁不再有问题。我希望这有帮助。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-08-03T19:07:12.950

对于类似的问题，Jan 的建议有助于改进除一张之外的所有背景图像。通过注意到两个相互冲突的定位规则，我摆脱了最后一个的闪烁。我有`position:static`一条规则`margin-top:-3em`（减号）和另一条`margin-top:5em`（加号）。因此，我建议您在遇到此类问题时仔细检查定位的一致性。

在你的情况下，米歇尔，我一直在测试更长的延迟 1 到 3 秒，这有助于我理解什么是更清晰的阶段，一个延迟非常短的闪光。您的渐变实际上从没有背景开始，您看到的是页面的背景。我通过将测试页正文的背景从象牙色更改为黑色来获得此信息。

当我在黑色背景上尝试你的渐变时，我得到了一个黑色舞台/闪光灯（在 3 秒时更容易看到）。也许明智的做法是测试规则的顺序，并尝试理解为什么渐变从主体或父级的背景开始，而不是从您的背景开始。

一种解决方法可能是将按钮设置在 div 中，按钮的红色背景与按钮的大小和形状完全相同。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-04-03T08:58:32.260

我解决了这样的闪烁：

html如下：

```
<div class="pswp__item" style="display: block; transform: translate3d(464px, 0px, 0px);"><div class="pswp__zoom-wrap" style="transform: translate3d(87px, 248px, 0px) scale(0.57971);"><img class="pswp__img" src="/platform/advice/feedback/downloads?attachmentIds=1304495004557536" style="opacity: 1; width: 414px; height: 414px;"></div></div> 
```

CSS如下：

```
.pswp__zoom-wrap{
transform-style: preserve-3d;
-webkit-transform-style: preserve-3d;
}
.pswp__zoom-wrap *{
-webkit-backface-visibility: hidden!important;
backface-visibility: hidden!important;
}
.pswp__item{
transform: translate3D(0, 0, 0);
-webkit-transform: translate3D(0, 0, 0);
} 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2013-09-14T07:55:26.883

这个链接为我修复了它。您只需在闪烁的元素的 css 中添加一行：

[http://nathanhoad.net/how-to-stop-css-animation-flicker-in-webkit](http://nathanhoad.net/how-to-stop-css-animation-flicker-in-webkit)

# javascript - 交换视图的模型？

> ID：10134937
> 
> 赞同：2
> 
> 时间：2012-04-13T03:40:53.857
> 
> 标签：javascript, backbone.js, coffeescript, models

基本上，我试图找出交换模型并对事件做出反应的最佳方式。

```
class View extends Backbone.View
    initialize: ()->
        #do stuff
    swapModel: (newModel)->
        @model = newModel

view = new View({model:firstModel})

view.swapModel(newModel) 
```

这就是我换出视图模型所要做的一切吗？我应该计划其他副作用吗？应对这种互换的最佳方式是什么？我应该在 swapModel 中触发交换事件吗？

谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-13T13:02:35.943

不要在视图中交换模型。您将遇到与 DOM 事件、视图中的模型事件等相关的各种问题。我已经尝试了十几次或更多次，并且在每种情况下，我都重新编写了我的代码，以便我会为每个模型创建一个新的视图实例。代码更干净、更简单、更容易理解、更容易维护和使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T04:15:44.093

一种方法的一个非常简单的例子。你为什么要尝试交换模型？

```
MyView = Backbone.View.extend({
    initialize: function() {

     this.myTrigger = {};
    _.extend(this.myTrigger, Backbone.Events);

    this.myTrigger.on("modelChange", function(msg) {
      alert("Triggered " + msg);
    },this);

    },
    swapModel: function(model) {
      // do something with model
      // then trigger listeners
      this.myTrigger.trigger("modelChange", "a model change event");
    }
});

var myview = new MyView()
myview.swapModel() 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-01-22T11:33:30.237

您可以使用只允许一个模型的集合。这样您就不会接触模型，并且可以根据需要多次调用渲染。像这样的东西：

```
var SpecialCollection = Backbone.Collection.extend({
    swap: function (model) {
        //remove all models
        this.reset();
        //add one model
        this.add(model);
    }
});

var MyView = Backbone.View.extend({
    initialize: function(){
       this.listenTo(this.collection, 'add', this.render);
    },
    render: function() {
        this.model = this.collection.first()
        //do your normal rendering here
    }
});

var c = new SpecialCollection();
var v = new MyView({collection: c});
c.swap({name: 'Sam'});
//view should render
c.swap({name: 'Dave'});
//view should render 
```

您可以进一步锁定 Collection 规则，但我认为它是一个很好的例子，可以让您继续前进。

# pdf - 如何在 pdf 中创建可填写的输入表单？

> ID：10134950
> 
> 赞同：10
> 
> 时间：2012-04-13T03:43:11.633
> 
> 标签：pdf, pdf-generation

我需要创建可用于获取用户输入的 PDF 表单。它们需要包含下拉框和文本框。请建议哪种软件或工具最适合我的目的

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T07:03:50.263

您可以使用 IText 编辑 PDF 和添加表单。我看到了他们新 XFA 功能的一个非常酷的演示 (http://lowagie.com/img/summit2012/summit2.pdf)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-04-02T21:46:47.020

首先，软件推荐同时成为堆栈溢出的话题，从那时起已经建立了不同的堆栈交换站点。

话虽如此，这个问题本身并不是很准确。实际上，PDF 中使用了*两种主要的表单技术：* **AcroForm**表单和**XFA**表单。

*   **AcroForm**表单是 PDF 规范 ISO 32000-1（即将在第 2 部分更新）中最终指定的原始 PDF 表单技术。该技术只允许静态表单，即在表单定义时字段的数量和位置已经固定的表单。（其实这个技术有一个动态的子功能，页面模板哪些字段，可以让你添加额外的页面有自己的字段，但是这个功能很少用。）

    现在可以使用多种选项、桌面应用程序（Adobe 的 Acrobat 只是其中之一）、Web 应用程序和适用于多种语言或平台的通用 PDF 库来创建和填写此类表单。在谷歌上快速搜索可以显示很多选项......

    在许多 PDF 查看器上显示这种表单是可能的，至少在其中许多上可以直观地编辑它们。

*   **XFA**（XML 表单架构）表单是 Adob​​e 引入的一种替代表单技术，它被 PDF 规范（第 1 部分）引用，但仍保留在 Adob​​e 遗留域中。该技术实际上仅使用 PDF 文件作为传输介质，XFA 表单的 XML 定义以独立于 PDF 的方式定义表单。XFA 表单可以是动态的（例如，它们可以包含具有可变列数的表格），它们的表单元素可以增长并移动以后的元素。

    仅使用少量选项（主要是 Adob​​e 桌面和服务器产品以及很少的替代解决方案）就可以创建和填写此类表单。

    仅在 Adob​​e 产品和极少数其他产品上可以显示此类表单，并且根据 Adob​​e PDF 查看器的版本，可能需要 Adob​​e 私钥的数字签名才能正常使用此类表单。

    ISO 32000-2 规范将不再支持 XFA 表单。因此，在新项目中使用它们可能不是最好的主意。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T13:18:01.817

如果您的目标是 Windows 操作系统并且您可以选择商业工具，您可以尝试使用[Amyuni PDF Creator](http://www.amyuni.com/en/developer/pdfcreator/features)（有 ActiveX 和 .Net 版本）。它将允许您使用 PDF 编辑器应用程序以图形方式设计您的 PDF 表单，并且您将能够以编程方式操作生成的文件。如果需要，您还可以通过编程方式创建新表单。

*通常的免责声明适用。*

# apache - 用户友好的 URL .htaccess

> ID：10134951
> 
> 赞同：0
> 
> 时间：2012-04-13T03:43:20.557
> 
> 标签：apache, mod-rewrite, url-rewriting, seo, rewrite

我有以下代码：

```
RewriteRule ^fishing/([^/]*)/([^/]*) fishery.php?url=$2&region=$1 [L]
RewriteRule ^fishing/([^/]*) region.php?region=$1 [L] 
```

当我输入 domain.com/fishing/fife 时，它​​会显示正确的 region.php 文件。

但是，如果我在 domain.com/fishing/fife/ 中键入末尾带有 / 的内容，则它会改为加载 fishery.php 页面。我怎样才能防止这种情况？

其次，如果它加载为 /fishing/fife 而不是 Fishing/fife.php 对 SEO 目的是否不利？毕竟它是一个页面而不是一个目录？如果没关系，那么我更希望它没有.php，因为它看起来更整洁。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T03:46:41.253

我认为应该这样做：

```
RewriteRule ^fishing/([^/]*)/([^/]+) fishery.php?url=$2&region=$1 [L]
RewriteRule ^fishing/([^/]*)/?$ region.php?region=$1 [L] 
```

拥有“目录”网址而不是页面也没有错，事实上，我认为这对 SEO 来说可能更好而不是更糟......

# c - 在简单的 gtk 按键事件示例中，GDK_SHIFT_MASK 似乎被忽略了

> ID：10134956
> 
> 赞同：18
> 
> 时间：2012-04-13T03:43:57.280
> 
> 标签：c, gtk2

有人可以编译并执行我在下面提供的小示例代码吗？请让我知道 shift 键修饰符是否适合您。这个例子是为了演示 gtk 中的按键功能。它适用于简单的按键，甚至适用于控制键修饰符，但不适用于 shift 键修饰符。

```
/*
 * 
 * compile command:
 * 
 * gcc keypress3.c -o keypress3  `pkg-config --libs --cflags gtk+-2.0`
 * 
 */

#include <gtk/gtk.h>
#include <gdk/gdkkeysyms.h>

gboolean
on_key_press (GtkWidget *widget, GdkEventKey *event, gpointer user_data);

int main (int argc, char *argv[])
{
  GtkWidget *window;

  gtk_init (&argc, &argv);

  window = gtk_window_new (GTK_WINDOW_TOPLEVEL);

  g_signal_connect (G_OBJECT (window), "destroy", G_CALLBACK (gtk_main_quit), NULL);
  g_signal_connect (G_OBJECT (window), "key_press_event", G_CALLBACK (on_key_press), NULL);

  gtk_widget_show_all (window);

  gtk_main ();

  return 0;
}

gboolean
on_key_press (GtkWidget *widget, GdkEventKey *event, gpointer user_data)
{
  switch (event->keyval)
  {
    case GDK_p:
      printf("key pressed: %s\n", "p");
      break;
    case GDK_s:
      if (event->state & GDK_SHIFT_MASK)
      {
        printf("key pressed: %s\n", "shift + s");
      }
      else if (event->state & GDK_CONTROL_MASK)
      {
        printf("key pressed: %s\n", "ctrl + s");
      }
      else
      {
        printf("key pressed: %s\n", "s");
      }
      break;
    case GDK_m:
      if (event->state & GDK_SHIFT_MASK)
      {
        printf("key pressed: %s\n", "shift + m");
      }
      else if (event->state & GDK_CONTROL_MASK)
      {
        printf("key pressed: %s\n", "ctrl + m");
      }
      else
      {
        printf("key pressed: %s\n", "m");
      }
      break;

    default:
      return FALSE; 
  }

  return FALSE; 
} 
```

我得到的输出：

```
key pressed: m
key pressed: ctrl + m
key pressed: p
key pressed: ctrl + s
key pressed: s 
```

当我按下 shift + s 或 shift + m 时，我什么也得不到，所以即使我已经阅读了文档并且我已经看到了很多其他似乎使用它的示例，我似乎还没有完全了解应该如何使用 GDK_SHIFT_MASK完全相同的方式。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-06-05T01:13:50.807

shift+s 按下时的值`event->keyval`是 GDK_S，而不是 GDK_s。换句话说，GDK 已经为你解释了键盘，给你符号'S'，而不是's'。不过，移位掩码仍然设置。您可以通过为 GDK_S 添加一个案例来看到这一点：

```
...
case GDK_S:  // add this line
case GDK_s:
  if (event->state & GDK_SHIFT_MASK)
  {
    printf("key pressed: %s\n", "shift + s");
  }
  else if (event->state & GDK_CONTROL_MASK)
  {
.... 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2016-03-02T12:52:13.713

只是提醒人们使用 Gtk3 并使用此代码作为基础。宏已更改，`GDK_s`现在是`GDK_KEY_s`. 按原样编译此代码将不起作用。更新的 Keyval 的完整列表在这里： [https ://git.gnome.org/browse/gtk+/plain/gdk/gdkkeysyms.h](https://git.gnome.org/browse/gtk+/plain/gdk/gdkkeysyms.h)

# c - 从另一个 C 文件调用函数

> ID：10134959
> 
> 赞同：1
> 
> 时间：2012-04-13T03:44:06.790
> 
> 标签：c, compiler-construction, linker

我正在使用 OpenGL 用 C/C++ 编写图形程序。我有一堆 .c 文件，现在，我正在尝试从 assignment1gui.c 中的 main.cpp 调用一个函数。老师给了我一个包含编译代码的文件。它看起来像这样：

```
OBJS   = assignment1gui.o shadertools.o main.o
TARGET = ass1

CXX = gcc

DBFLAGS  = -O0 -g3 -ggdb3 -fno-inline

WFLAGS   = -Wall -ansi
GLFLAGS  = `pkg-config --cflags gtk+-2.0`
LGLFLAGS = `pkg-config --libs gtk+-2.0` -lGL -lGLEW -lGLU -lglut

CXXFLAGS = $(WFLAGS) $(DFLAGS) $(GLFLAGS)
LDFLAGS  =  -export-dynamic -lXext -lX11 $(LGLFLAGS)

all: $(TARGET)
clean:
    rm -f $(OBJS) $(TARGET)

.SUFFIXES: .cc
.cc.o:
    $(CXX) -c $(CXXFLAGS) $<
.c.o:
    $(CXX) -c $(CXXFLAGS) $<
$(TARGET): $(OBJS)
    $(CXX) -o $(TARGET) $(OBJS) $(LDFLAGS) 
```

我试图调用的函数是“drawPloygonLine()”。我已经在“assignment1gui.h”中声明了这一点，正如我之前提到的，定义在 main.cpp 中。

从互联网上的所有帮助中，我意识到编译代码一定有问题。但我不确定。有人可以帮我吗？

抱歉，我之前遗漏了这部分。我得到的错误是：

```
assignment1gui.o: In function `on_btn_color_color_set':
assignment1gui.c:(.text+0x1c): undefined reference to `drawPolygonLine'
assignment1gui.o: In function `on_rb_tool_line_toggled':
assignment1gui.c:(.text+0x8b): undefined reference to `drawPolygonLine'
assignment1gui.o: In function `on_rb_tool_circle_toggled':
assignment1gui.c:(.text+0xfc): undefined reference to `drawPolygonLine'
assignment1gui.o: In function `on_rb_tool_rect_toggled':
assignment1gui.c:(.text+0x16d): undefined reference to `drawPolygonLine'
assignment1gui.o: In function `on_rb_tool_edit_toggled':
assignment1gui.c:(.text+0x24a): undefined reference to `drawPolygonLine'
collect2: ld returned 1 exit status
make: *** [ass1] Error 1 
```

我在文件夹中的 C/C++ 文件是 main.cpp、assignment1gui.c 和 shadertools.c。我还有两个头文件——assignment1gui.h 和 shadertools.h。如前所述，我使用 assignment1gui.h 文件来声明新函数“drawPolygonLine();”

补充：“drawPolygonLine();”的声明 现在在“main.h”中，它看起来像这样：

```
#ifndef MAIN_H
#define MAIN_H

extern void drawPolygonLine();

#endif  /* MAIN_H */ 
```

main.cpp 和 assignment1gui.c 的开头都有"#include "main.h""。drawPolygonLine() 的定义是：

```
void drawPolygonLine()
{
    if(option[opCount-1]==4 && drawn==false)
    {           
        vCount++;
        vertex[vCount].x=A;
        vertex[vCount].y=B;
        lines=lines+2;
        vCount++;
        vertex[vCount].x=polyX;
        vertex[vCount].y=polyY;   
        clicks=0;     
        drawn=true;
    }

} 
```

函数中使用的所有变量在 main.cpp 中都是全局的。

我如何调用 drawPolygonLine() 的示例；在 assignment1gui.c 中是在这个函数中：

```
void on_btn_color_color_set(GtkColorButton *colorbutton, gpointer user_data)
{
    drawPolygonLine();

    GdkColor color;
    gtk_color_button_get_color(colorbutton, &color);
    printf("Color set rgb=(%i,%i,%i)\n",color.red,color.green,color.blue);
} 
```

我希望这可以说清楚。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T11:20:47.247

问题是`main.cpp`这个 make 文件不理解，因为它只有or文件[的规则](http://theory.uwinnipeg.ca/localfiles/infofiles/make/make_103.html)。我怀疑 main.o 没有被构建 - 或者，更有可能的是，因为你正在编译失败，所以有另一个文件被称为或包含在你的程序中，但没有在其中定义. `.cc``.c``main.c``main.cc``drawPolygonLine()`

要解决这个问题：

1.  删除或重命名任何现有文件`main.c`或`main.cc`文件。

2.  如果您的程序实际上是 C 程序，则将文件名更改为`main.c`

3.  如果您的程序是 C++ 程序，您可以尝试将扩展名更改为`.cc`，但我怀疑您会遇到问题，因为您使用的是`gcc`而不是`g++`. 在这种情况下，我也会改变：

    ```
    CXX = gcc 
    ```

    到

    ```
    CXX = g++ 
    ```

请记住，尽管许多 C 代码也是有效的 C++ 代码，但存在许多细微差别——每种语言的最佳实践也大不相同。因此，**最好将 C 和 C++ 视为不同的语言。**

* * *

如果这不能解决它：

*   检查`drawPolygonLine()`头文件中声明的函数签名是否与主文件中定义的方式相同。检查这些声明是否与您调用它的方式相匹配。
*   检查调用的文件`drawPolygonLine()`是否`#include "assignment1gui.h"`位于顶部
*   检查`drawPolygonLine()`未声明为`static`（静态函数在其翻译单元之外不可见 - 因此在一起编译两个输出文件时链接器不会看到它们）

此外，最好在头文件中将函数声明与定义它的源文件相对应 - 因此，如果要在`main.c`from中调用函数`assignment.c`，通常会将声明放在`main.h`, 并将`#include`其放在`assignment.c`. 这不会是您遇到问题的原因，但习惯是一种很好的做法。

# android - Android 和另一部手机通过免提配置文件进行蓝牙连接

> ID：10134960
> 
> 赞同：11
> 
> 时间：2012-04-13T03:44:18.477
> 
> 标签：android, bluetooth, at-command

我正在尝试将我的 Android 手机用作免提套件（例如用于汽车的套件），以便连接到另一部手机（任何手机）并执行一些免提功能，例如（接听来电、拒绝等）可以使用 AT 命令进行免提配置文件。为此，我使用了著名的蓝牙聊天应用程序，并且反射工作以建立与任何设备的连接：

方法 m = device.getClass().getMethod("createRfcommSocket", new Class[] {int.class}); tmp = (BluetoothSocket) m.invoke(device,1);

但是，为了实现免提功能并理解我发送的 AT 命令，连接的电话需要通过使用 UUID 的免提配置文件：“0000111f-0000-1000-8000-00805F9B34FB”

因此，有没有办法实现与免提配置文件的连接？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T10:46:52.497

只有在别无选择时才应使用此代码。此`1`代码中的 是 RFCOMM 端口。每个服务都有自己的 RFCOMM 端口。此端口通常在 1 到 31 之间随机。您需要知道服务（此处为免提配置文件）在您要连接的设备上使用哪个端口。您必须使用对象中的`createRfcommSocketToServiceRecord`方法`BluetoothDevice`来执行此操作：

```
try {   clientSocket = bluetoothDevice.createRfcommSocketToServiceRecord( serviceUUID ); }
catch (IOException e) 
{
  // handle error
} 
```

此代码是使用蓝牙的正确方法，应该替换您正在使用的代码。

# javascript - 回发后防止页面滚动并保持位置

> ID：10134963
> 
> 赞同：16
> 
> 时间：2012-04-13T03:44:52.937
> 
> 标签：javascript, c#, asp.net, vb.net

我正在根据他们在 CheckBoxList 中的检查来添加用户的分数。每次用户选中一个框时，都会将一个值 ,`X`添加到总分中。当用户取消选中某个框时`X`，会从总分中减去一个值 。这里没有问题。

我遇到的问题是使用 CheckBoxList 属性中的 AutoPostback 选项会强制页面加载回顶部，而不是停留在用户所在的位置，这意味着他们必须在每次选中/取消选中后继续向下滚动。有没有办法防止这种情况？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-04-13T03:58:01.883

## 阿贾克斯解决方案

当然，最好的方法是使用 Ajax 调用。页面根本没有移动，数据只是更新了。更新面板是一种快速简便的启动解决方案——不是最佳解决方案，但如果您有一个简单的页面，它是一个非常好的解决方案。

## 第二种解决方案

第二种解决方案是使用锚#。您设置了您希望它显示的点：

```
<a name="PointA"></a> 
```

并且您使用该锚点将页面称为`page.aspx#PointA`.

## 第三个解决方案

第三种解决方案是使用 ASP.NET 的内部 JavaScript 代码。在页面声明（顶部第一行）`<%@ Page MaintainScrollPositionOnPostback="true" %>`。

或在 web.config 上影响所有页面，`<pages maintainScrollPositionOnPostBack="true" />`.

或以编程`System.Web.UI.Page.MaintainScrollPositionOnPostBack = true;`方式根据需要打开和关闭它。

## 使用 jQuery

只需两行 jQuery 代码，您就可以在回帖后在您想要移动的点上制作漂亮的动画：

```
var WhereToMove = jQuery("#PointA").position().top;
jQuery("html,body").animate({scrollTop: WhereToMove }, 1000); 
```

然后将页面移动到此元素：

```
<a id="PointA" name="PointA"></a> 
```

## 谷歌搜索

最后，您可以使用自定义 JavaScript 代码来做同样的事情。互联网上有很多示例：[https ://www.google.com/?q=asp.net+remain+position](https://www.google.com/?q=asp.net+remain+position)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2016-11-09T00:21:58.087

防止回发后页面滚动的两种最佳方法是： 将其放在 web.config 中。
**1)** 页面维护ScrollPositionOnPostBack="true"

很多人质疑这条线的具体位置在哪里。所以放置这条线的确切位置是

```
<system.web>
<pages maintainScrollPositionOnPostBack="true">
</system.web> 
```

> 注意：这将适用于防止每个表单滚动的整个解决方案

**2）** 实现这一点的第二种方法是将这一行放在 aspx 文件的顶部

维护ScrollPositionOnPostback=true

像这样

```
<%@ Page MaintainScrollPositionOnPostback=true Language="C#" AutoEventWireup="true" CodeBehind="xx.aspx.cs" Inherits="xx.Global" %> 
```

> 注意：这将适用于您要阻止的特定形式。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-09-29T05:28:55.750

我可以想到三种可能的方法：

1.  在应该禁用滚动的页面上，将`MaintainScrollPositionOnPostback`Page ("<%@ Page ....>") 指令中的属性设置为 true，即`<%@ Page MaintainScrollPositionOnPostback=true ...other settings... >`应该出现在 aspx 页面的顶部

2.  对于网站中的所有页面，在 web.config 中添加以下行： `<pages MaintainScrollPositionOnPostback=true>`

3.  合并 AJAX 查询

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-07-12T06:53:30.040

当你想停止滚动和页面刷新时，**MaintainScrollPositionOnPostback="true"**标签是最重要的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-10-27T13:55:40.880

借助 runat 标记，可以在 .NET 中以编程方式引用 HTML 标记。

只需在 HTML 中给 body 标记一个 runat="server" 和一个 id="body" 或任何你想在代码中引用它的东西（我将`body`用于示例）。

然后您可以在代码中添加/修改标签的属性，如下所示：

```
Body.Attributes.Add("scroll", "no") 
```

将代码放在页面加载上。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-06-22T07:08:28.520

将此行放入 webconfig 文件中：

```
<pages maintainScrollPositionOnPostBack="true"> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-09-03T22:17:29.140

您可以覆盖窗口的“scrollTo”方法并且在其中不执行任何操作，因此 updatePanel 设置页面滚动位置的尝试将失败:)

```
function scrollTo(x, y) {
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-10-26T03:45:17.793

MaintainScrollPositionOnPostback 并不总是在 chrome 中工作，有时会导致回发所需的逻辑出现问题。这是一个简单的javascript 代码，相当于MaintainScrollPositionOnPostback。

```
 window.onload = function () {
        var scrollY = parseInt('<%=Request.Form["scrollY"] %>');             
        if (!isNaN(scrollY)) {
            window.scrollTo(0, scrollY);
        }
    };
    window.onscroll = function () {
        var scrollY = document.body.scrollTop;
        if (scrollY == 0) {
            if (window.pageYOffset) {
                scrollY = window.pageYOffset;
            }
            else {
                scrollY = (document.body.parentElement) ? document.body.parentElement.scrollTop : 0;
            }
        }
        if (scrollY > 0) {
            var input = document.getElementById("scrollY");
            if (input == null) {
                input = document.createElement("input");
                input.setAttribute("type", "hidden");
                input.setAttribute("id", "scrollY");
                input.setAttribute("name", "scrollY");
                document.forms[0].appendChild(input);
            }
            input.value = scrollY;
        }
    }; 
```

# kohana - Kohana - 将变量传递给视图

> ID：10134966
> 
> 赞同：2
> 
> 时间：2012-04-13T03:45:19.270
> 
> 标签：kohana, kohana-3.2

我无法将简单的变量传递给视图，有人可以告诉我我做错了什么吗？

我有一个控制器用户：

```
class Controller_User extends Controller_Template_Login {  

     public function action_index()
    {
        $this->template = 'user/info';
        parent::before(); 
        $user = Auth::instance()->get_user();         
        $this->template->content = View::factory('user/info')
            ->bind('user', $user)
            ->bind('message', $message)
            ->bind('errors', $errors);        

        // if a user is not logged in, redirect to login page
        if (!$user)
        {
            Request::current()->redirect('user/login');
        }
    }

} 
```

在我的视图（用户/信息）中，我得到该用户未定义。

我错过了什么？

**编辑：**请注意，这可以通过添加：

```
$user = Auth::instance()->get_user(); 
```

到 Controller_Template_Login

```
 $user = Auth::instance()->get_user();
        $this->template->user = $user; 
```

我想知道的是为什么这不起作用：

```
 $user = Auth::instance()->get_user();         

    $this->template->content = View::factory('user/info')
    ->bind('user', $user)
    ->bind('message', $message)
    ->bind('errors', $errors); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-13T04:15:15.073

因为在第一种情况下

```
$this->template->user = $user; 
```

您将`$user`变量分配给 的`user`属性`$this->template`。

在第二种情况下：

```
$this->template->content = View::factory('user/info')
    ->bind('user', $user)
    ->bind('message', $message)
    ->bind('errors', $errors); 
```

您将`$user`变量绑定`user`到`$this->template->content`.

# lotus-notes - 尝试在 LotusScript 中使用多值数组并有点卡住

> ID：10134971
> 
> 赞同：2
> 
> 时间：2012-04-13T03:46:19.387
> 
> 标签：lotus-notes, lotus, lotusscript

我必须找到一种方法来存储一系列变量——MonthYear（键）和一个计数器。这样做的目的是跟踪按月和年处理的文档数量。我正在考虑一个列表，但我不确定如何保存数据，以便它可以读取并能够在以后显示在表格中。我考虑过使用多维数组 - someArray(1,0 to 1) 并在每次开始新的 MonthYear 时重新调整它，然后将其保存回文档上的一个字段，但不确定会如何播出。有谁知道我如何做到这一点？

第一个维度是 MonthYear（键），第二个维度是每次处理新文档时更新的计数器。

1.  密钥将基于正在处理的文档上的字段。如何确保我正在更新正确的键/计数器组合？

2.  如何从文档上的字段中检索现有计数器，更新计数器然后替换值？

我想过每次处理文档时只添加一个新元素（ReDim），而不是以某种方式将每个键的所有计数器相加并将其存储在一个数组中，但这看起来真的很混乱。必须有一个好的方法来做到这一点。

任何和所有的想法将不胜感激

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-13T05:24:47.273

我能想到的最简单的结构是“列表”。这是一个快速示例，它使用列表将值“往返”到文档中并返回到列表中。剪切并粘贴到代理中进行测试（不要忘记将代理属性的“运行时”目标设置为“无”）

```
Sub Initialize
    Dim session As New notesSession
    Dim counter List As String
    Dim sValue As String
    Dim doc As notesDocument
    Dim itCounters As NotesItem
    Dim db As notesDatabase
    Dim i As Integer
    Dim vResult As Variant
    Dim vValues As Variant

    Set db = session.CurrentDatabase
    Set doc = db.CreateDocument
    Set itCounters = doc.ReplaceItemValue("counters","")

    counter("201201") = 16
    counter("201202") = 1
    counter("201203") = 10
    counter("201204") = 5

    ' print the tags
    Forall k In counter
        Print Listtag(k)
    End Forall

    ' adding the values (and tags)
    Forall k In counter
        Print "[" + Listtag(k) + "]:" + counter(Listtag(k))
        sValue = Listtag(k) + "!" + counter(Listtag(k))
        itCounters.AppendToTextList(sValue)
    End Forall

    'retrieving
    Erase counter

    Set itCounters = doc.GetFirstItem("Counters")
    vValues = itCounters.Values
    For i = 0 To Ubound(vValues)
        vResult = Split(vValues(i), "!")
        counter(vResult(0)) = vResult(1)
    Next

    Forall k In counter
        Print "[" + Listtag(k) + "]:" + counter(Listtag(k))
    End Forall

End Sub 
```

方便的方面是您可以根据需要声明每个新项目（无 Dim'ing）。您可以通过有意义的键（月份和年份或其他）访问任何值。您可以使用与键匹配的字段名称来加载或仅将值保留在多值字段中并使用示例中的特定分隔符。此外，当您递增时，您不必在数组中搜索要递增的正确值，您可以根据标签引用它，然后将其递增。我认为这很简单。

Domino 设计器帮助包含有关列表的大量信息。如果需要验证列表元素是否存在，请查看“isElement”函数。

# language-agnostic - 在 O(n) 时间和 O(1) 内存中检测字符串中是否存在重复项并且没有数据结构

> ID：10134972
> 
> 赞同：0
> 
> 时间：2012-04-13T03:46:28.723
> 
> 标签：language-agnostic, duplicates, puzzle

问题是要弄清楚给定字符串中是否没有任何重复的字符。约束是字符串仅包含字符 az（仅小写）。

显而易见的解决方案是使用数组（或哈希表）来跟踪您遇到的字符。但问题是你不能使用数据结构。

以下是该问题的一种解决方案。但我不太明白它是如何工作的。我可以看到它使用整数的位来跟踪遇到的字符。

```
public boolean isUniqueChars(String str) {
    int checker = 0;
    for (int i = 0; i < str.length(); ++i) {
        int val = str.charAt(i) - 'a';
        if ((checker & (1 << val)) > 0)
            return false;
        checker |= (1 << val);
    }
    return true;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T03:50:23.453

您是正确的，因为它为每个字母设置了位。但它首先检查（使用按位与），如果它已经找到当前字母，则它知道该字符串不包含唯一字母。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T03:54:40.027

我会尽力解释。 `int checker;`是 32 位表示。因为 az 总共有 26 个字母，所以 32 位（1 个整数类型数据）足以标记使用的字符。 `checker |= (1 << val);`用于标记 az 字符已被使用。也许它可以帮助你:)

# java - 如果 Tomcat 端口从 80 更改，JSP 页面将被“丢弃”

> ID：10134974
> 
> 赞同：0
> 
> 时间：2012-04-13T03:46:59.257
> 
> 标签：java, jsp, servlets

我有一个使用三个 JSP 页面的 servlet。我正在使用 Eclipse Indigo 并在 localhost 的 80 端口上运行 Tomcat v5.5 服务器，并且应用程序运行良好。该应用程序以登录页面（JSP 第 1 页）启动。用户凭据经过身份验证，然后显示 JSP 页 2。用户单击此页面上的列表项进行选择，JSP 页面 3 将“加载”相关联的 bean 数据并显示出来。在 80 端口下运行时没有问题。

但是，如果我更改 Tomcat 端口，这会以一种奇怪的方式破坏应用程序。如果我将 Tomcat 的端口更改为 25000，则 JSP 页面 1 显示正常，我们看到 JSP 页面 2。用户单击以进行选择，关联的 bean 数据再次用于“加载”JSP 页面 3 并显示. 但是，这一次，传递给浏览器的块是 JSP 页面***2***的块。此外，传送到浏览器的块包括 JSP 页***2***块的内容，然后是 JSP 页 3 块的正确内容！也就是说，从 Tomcat 中“生成”出来的页面是来自第 2 页的块以及第 2 页和第 3 页的块的组合。

在 JSP 页面 2 中有四个项目，它们从本地服务器加载四组 JavaScript。一个是自定义脚本，一个是 Modernizr 包，最后两个是 jQuery 和 jQuery Mobile。我发现如果我删除 jQuery Mobile，问题就会消失。

总之，如果我在端口 80 上运行 Tomcat，我可以在 JSP 页 2 中包含 jQuery，并且没有问题。如果我将 Tomcat 的端口更改为 80 以外的端口，则在 JSP 页 2 中包含 jQuery Mobile 会导致 JSP 页 3 被丢弃。在这一点上，我认为 jQuery Mobile 本身并不是真正的问题——它怎么会导致 JSP 页面 3 包含页面 2？但是，Tomcat JSP 处理工具正在解析、修补和生成这些发送到浏览器的页面，因此问题似乎更可能出在此处。但我不知道为什么更改 Tomcat 端口号会影响 JSP 处理。

除了 Eclipse Tomcat v5.5 Server 窗格上的端口号之外，还有什么我必须更改的，以确保 JSP 处理继续工作吗？任何能解释世界上发生了什么的人都知道他们的东西！！！

谢谢你。

# networking - 绘制位置数据以显示平滑度

> ID：10134976
> 
> 赞同：0
> 
> 时间：2012-04-13T03:47:10.393
> 
> 标签：networking, graph, smoothing, evaluate

我编写了一个网络游戏（基本上是一个原型），它实现了不同的平滑算法，例如插值和外推等，我有可以从控制台打印出来并复制并粘贴到文本文件中的位置数据。

我想知道如何使用 Excel 等程序将其放入图表中，或者您是否可以推荐任何其他评估技术。目的是方便地将位置数据与其他数据进行比较。

在我看来，它会有一个自上而下的视图，看起来有点像对象所在位置的轨迹，我有坐标，只是不知道如何使用 Excel 等工具快速轻松地绘制图形！

非常感谢！

哦，这是一个数据示例，因为它可能会有所帮助

```
,15.751465,33.538113 
,18.151794,25.811478 
,19.495346,21.973022 
,22.628979,14.682346 
,24.365070,11.008181 
,28.246189,4.080928 
,30.273335,0.735968 
,34.930840,-5.853795 
,37.285229,-8.955721 
,42.614258,-15.034148 
,45.294456,-17.888378 
,51.419174,-23.527817 
,54.313343,-26.019697 
,60.745731,-30.817125 
,63.899082,-33.008480 
,70.894211,-37.166611 
,74.556221,-39.166740 
,81.631203,-42.427887 
,85.215569,-43.934799 
,92.895576,-46.541466 
,96.762917,-47.703796 
,104.548660,-49.463692 
,108.342720,-50.187851 
,116.485268,-51.145309 
,120.289818,-51.464588 
,129.282242,-51.511787 
,132.348267,-51.445812 
,140.325546,-50.714527 
,145.365982,-50.025780 
,152.171997,-48.671867 
,156.216812,-47.713547 
```

如果需要，我可以重新格式化数据，我在 excel 中使用逗号作为分隔符。数据基本上是 x/z 轴坐标，所以基本上是在 2D 平面上。我真的很想得到一些帮助，所以谢谢！

编辑：该数据本应以列的形式出现，跨 2 行，向下多行！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T05:36:38.413

您可以在此处以交互方式在线尝试散点图[http://www.shodor.org/interactivate/activities/ScatterPlot/](http://www.shodor.org/interactivate/activities/ScatterPlot/)

在 excel 中生成它可能会因工具或版本而异

[编辑]它似乎不支持复制和粘贴（至少在我的浏览器中），所以你必须手动输入数据（没有前逗号），你必须选择“散点图”绘图类型。至少您可以了解它的外观并查看它是否符合您的需求

# javascript - 如何防止 keyup() jQuery 事件发生 XSS？

> ID：10134977
> 
> 赞同：0
> 
> 时间：2012-04-13T03:47:24.650
> 
> 标签：javascript, jquery, xss

我正在制作一个带有 keyup() 事件的表单：用户键入的每个字符都会立即显示到同一页面上的另一个 div 中。

它容易受到 XSS 的攻击。如何使用 jQuery 保护它？

注意：在我的表格中，我只使用拉丁字母数字字符，以及逗号、分号、冒号。

我已经从 OWASP 搜索了“改革”工具，但有没有更好的方法？

提前致谢。问候

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T03:53:39.873

有了一些可用的细节：请记住，您不必对所有内容都使用 jQuery 的 HTML“解析”。代替 using `.html()`，使用 DOM 操作 and `.text()`（通常也更快）。例如，这个：

```
$('#result').html('<span class="whatever">' + someInput + '</span>'); 
```

会变成这样：

```
$('#result').text($('<span>').addClass('whatever').text(someInput)); 
```

* * *

如果这是不可能的，您还可以通过设置`.text()`并使用`.html()`. 例如，这个：

```
var data = 'This text: **is bold**';

$('#result').html(data.replace(/\*\*(.+?)\*\*/g, '<b>$1</b>')); 
```

会变成这样：

```
var data = 'This text: **is bold**';

$('#result').html(data.replace(/\*\*(.+?)\*\*/g, function(x) {
    return '<b>' + $('<div>').text(x).html() + '</b>';
})); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T03:55:22.247

我发现其中包含的 xss 清洁器`node-validator`非常全面。您感兴趣的代码可[在此处](https://github.com/chriso/node-validator/blob/master/lib/xss.js)获得。您需要对其进行一些清理以在浏览器中使用（删除 module.exports 并包装在 Javascript 闭包中），但它应该可以无缝地工作。如果您愿意，也可以将其直接制作成 JQuery 插件。

# php - 用php将当前时间戳插入mysql？

> ID：10134979
> 
> 赞同：5
> 
> 时间：2012-04-13T03:48:10.940
> 
> 标签：php, mysql, timestamp

这真让我抓狂。我在互联网上搜索过，但无法得出结论。

我的数据库中有一个日期字段。我用日期函数检索值就好了。

问题是我前段时间做过，我不记得我是如何将这些值插入该字段的。它是一个整数值（根据我读到的，自 1970 年 1 月 1 日以来的秒数，例如 1338949763。但是当我尝试插入东西时，比如使用`INSERT INTO entries (date) VALUES (NOW())`。这个`NOW`东西会存储一个格式化的日期，比如`2012-04-12 23:09:54`。我不想要那个.我想存储整数值。我该怎么做？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-04-13T03:51:24.773

使用 MySQL 的`UNIX_TIMESTAMP()`函数获取当前 epoch 时间：

```
INSERT INTO mytable SET tstamp = UNIX_TIMESTAMP(); 
```

[http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_unix-timestamp](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_unix-timestamp)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T03:51:50.110

尝试使用类似的东西`"INSERT INTO entries (date) VALUES ('".time()."')"`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-01T07:40:09.590

你可以试试这个插入

```
INSERT into Table_name (colunm_name) VALUES ('".time()."'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-08T07:36:33.137

if u want to insert timestamp i.e. some integer value into mysql field; the field type should be "timestamp" not "datetime" then I hope your integer value will be accepted by the DB

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-13T03:51:51.687

正确的功能是：

```
getdate() 
```

不是

```
NOW() 
```

# android - 无法安装适用于 Android 的 Google App Engine 工具

> ID：10134980
> 
> 赞同：1
> 
> 时间：2012-04-13T03:48:15.063
> 
> 标签：android, eclipse, google-app-engine, plugins

我尝试安装`GAE`适用于 Android 的工具和插件，但收到此错误：

```
Cannot complete the install because one or more required items could not be found.
  Software being installed: Google App Engine Tools for Android 2.5.2.v201203300216-rel-r37 (com.google.gdt.eclipse.mobile.android.feature.feature.group 2.5.2.v201203300216-rel-r37)
  Missing requirement: com.google.gdt.eclipse.mobile.android 2.5.2.v201203300216-rel-r37 requires 'bundle com.android.ide.eclipse.adt 12.0.0' but it could not be found
  Cannot satisfy dependency:
    From: Google App Engine Tools for Android 2.5.2.v201203300216-rel-r37 (com.google.gdt.eclipse.mobile.android.feature.feature.group 2.5.2.v201203300216-rel-r37)
    To: com.google.gdt.eclipse.mobile.android [2.5.2.v201203300216-rel-r37] 
```

有没有其他人收到过这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-01T00:57:51.937

它通常是由您的代理配置引起的。尝试从阻止内容的网络下载时出现此错误。

# asp.net - 如何在 aspxgridview (VB) 中使用循环添加自定义列

> ID：10134981
> 
> 赞同：0
> 
> 时间：2012-04-13T03:49:29.320
> 
> 标签：asp.net, vb.net, gridview, aspxgridview

***第一个问题***如何使用循环将自定义列添加到 aspxgridview 列以获取列的名称和值。

这是我背后的代码：

```
Protected Sub gridSubmission_Init(ByVal sender As Object, ByVal e As System.EventArgs) Handles gridSubmission.Init
        Dim colBaru As GridViewDataTextColumn = New GridViewDataTextColumn()
    For i As Integer = 1 To 6
        colBaru.Caption = i
        colBaru.FieldName = i
        colBaru.UnboundType = DevExpress.Data.UnboundColumnType.Integer
        colBaru.VisibleIndex = gridSubmission.VisibleColumns.Count
        colBaru.PropertiesTextEdit.DisplayFormatString = "c2"
        gridSubmission.Columns.Add(colBaru)
    Next
end sub 
```

我曾经在 aspxgridview 添加新列。但它得到一个错误，“已添加具有相同密钥的项目。”

***第二个问题，***我必须使用什么属性来放置该代码？我想在 page.load 之后加载该代码！如果我放入 aspxgridview.init 它是在 page.load 之前加载的。

它的输出必须是这样的：

```
1           2          3          4           5           6
row         row        row        row         row         row
row         row        row        row         row         row
row         row        row        row         row         row
row         row        row        row         row         row
row         row        row        row         row         row 
```

帮助请...

谢谢之前

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T04:58:58.230

就第一个问题而言，您正在尝试一次又一次地将相同的列对象添加到列中，因此您会收到该错误。尝试在循环中创建列对象 - 例如：

```
Protected Sub gridSubmission_Init(ByVal sender As Object, ByVal e As System.EventArgs) Handles gridSubmission.Init

    For i As Integer = 1 To 6
        Dim colBaru As GridViewDataTextColumn = New GridViewDataTextColumn()
        colBaru.Caption = i
        colBaru.FieldName = i
        ... 
```

至于第二个问题，我不确定你在这里问什么。当您的意思是在 page.load 之前/之后，您是指服务器端的 page_load 还是客户端（浏览器）端的页面加载？坦率地说，grid_init 或 page_init 是添加列的最佳位置。如果您想在页面上的某个事件中添加列，那么最好的方法是在浏览器端设置一些隐藏变量，并使用该变量来决定是否进行此类初始化。

# localization - 如何根据浏览器语言选择文件？

> ID：10134982
> 
> 赞同：0
> 
> 时间：2012-04-13T03:49:30.623
> 
> 标签：localization, sencha-touch, sencha-touch-2

如何在sencha touch 2中根据浏览器语言选择文件？我的项目下有 3 个文件 app_de.js、app_en-US.js 和 app_es.js。我正在查找浏览器语言并像这样加载文件：

```
 <script type="text/javascript" id="extlocale">

    var browserLang = window.navigator.language; // get the browsers language
    alert(browserLang);
    var locale = 'en'; // default locale

    if(browserLang == 'de' || browserLang == 'de-de')       //called when the language is german
    {
        locale = 'de';
    }
    else if(browserLang == 'en-US' || browserLang == 'en-us' || browserLang == 'en')
    {
        locale = 'en-US';                           //called when the language is english
    }
    else if(browserLang == 'es' || browserLang == 'es-es' )
    {
        locale = 'es';                              //called when the language is spanish
    }
    else
    {
        console.log("Invalid language");
        locale = 'en-US';
    }
    if(locale) {

       Ext.fly('extlocale').set({src:'app_'+locale+'.js'});

    }

</script> 
```

如果我以这种方式包含文件，这些文件将单独工作：

```
 <script type="text/javascript" src="app_en-US.js"></script> 
```

请让我知道如何根据浏览器的语言加载文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T05:49:01.377

在 Sencha Touch 2 中根据浏览器语言加载文件，最好的办法是加载一个通用文件，然后根据浏览器语言加载内容。

```
<script type="text/javascript" src="locale.js"></script><!--locale.js was the file invoked--> 
```

并在 中`locale.js`，根据浏览器的语言，加载内容。

登录表单示例：

```
var browserLang = window.navigator.language; // get the browsers language
alert(browserLang);

var Messages;

switch (browserLang) {

    case 'en-US':
    Messages = {
        username : 'EN-glish Username',
        password : 'EN-glish Password',
        login    : 'EN-glish Login' 
    };
    break;

    case 'hi':
    Messages = {
        username : 'HI-ndi Username',
        password : 'HI-ndi Password',
        login    : 'HI-ndi Login'   
    };
    break;

    ........

} 
```

由此，如果浏览器语言是`en-US`它显示英语内容，如果语言是印地语它显示印地语内容。

在这里，我使用了一个简单的开关盒，但根据您的可用性，对其进行修改以满足您的目标。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T04:59:55.177

您需要一种更跨浏览器的方式来检测浏览器语言。它没有标准，但以下是一个很好的尝试：

```
 function browserLanguage() {
   if (!navigator) { return null; }
   return navigator.language || navigator.browserLanguage ||
          navigator.systemLanguage || navigator.userLanguage || null; 
 } 
```

您还需要一种更好的方法将语言代码映射到您支持的语言代码。例如，不应该将 de-AT 识别并视为 de 吗？en-GB 呢？最简单的方法是解析语言代码，这样你就只做`split('-')`第一部分。如果您的文件需要是 en-US.js，您需要将 en 映射到 en-US。

我不知道`Ext.fly()`，但即使没有库，仅添加一个`script`元素也相当容易。只需在文档中为它找到一个位置，执行`document.createElement('script')`，为其分配`src`属性，然后将其放入文档树中。

请注意，浏览器语言是浏览器自己对自己的 UI 语言的想法，根本不需要匹配用户的偏好。它通常甚至不能由用户控制，除非他可以决定他使用哪个浏览器（及其版本）。

# php - 如何在 Ajax 将内容扩展到屏幕之外之后找到页面高度？

> ID：10134987
> 
> 赞同：0
> 
> 时间：2012-04-13T03:50:20.300
> 
> 标签：php, javascript, css, ajax, height

相对于中心列中的内容（由 Ajax 填充），我很难设置左列的适当高度和页脚的位置。

我的代码**适用**于纯粹*的客户端*布局，但它没有检测到 Ajax 对高度所做的任何更改（作为*服务器端*和所有）。那么如何获得页面的高度，**包括**Ajax 所做的更改？

我在想我可能需要从我的 PHP 文件中设置一个 JavaScript 变量来确定 Ajax 高度......或者确定是否触发了 Ajax 事件可能会很有用......

任何想法，常见的解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T03:54:50.083

在执行 AJAX 代码以确定高度后运行的页面中添加 javascript 代码。在整个过程中自由地使用 jquery。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T04:38:57.153

Ajax 不是服务器端。它是从 JavaScript 发起的 HTTP 请求和响应服务器发回的内容的 JS 事件处理程序。您可以在 ajax 请求启动后触发高度检查代码，但这对您没有任何好处，因为 JS 会立即触发，并且往返服务器至少需要几分之一秒。您必须对正在发生的事情有足够的了解，才能弄清楚处理成功 ajax 请求的函数在哪里，然后在该函数中注入 HTML 的位置，然后跟进您的高度检查/设置代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T07:13:54.553

你不需要 javascript 来做到这一点，它可以使用 css 技巧轻松完成。这是它的链接： [http](http://css-tricks.com/snippets/css/sticky-footer/) : //css-tricks.com/snippets/css/sticky-footer/ 但是，如果您真的需要 JS，请使用

```
document.getElementById("footer").style.top = window.outerHeight + "px"; 
```

在您从 http 请求加载内容之后。一方面，我建议使用 css 方法。

# sms - 需要了解多个 SIM 卡和网络支持的调制解调器

> ID：10134990
> 
> 赞同：0
> 
> 时间：2012-04-13T03:50:49.890
> 
> 标签：sms, modem

我想通过我的应用程序 [java] 使用支持多个 SIM 卡的调制解调器以编程方式为 GSM 和 CDMA 网络发送短信。需要一个支持多网络[GSM,CDMA] + 多 SIM [超过 5] 并且还支持 USB/SerilPort 连接的调制解调器。[USB 端口是首选] 我需要知道，哪种调制解调器更能满足我的要求。任何人都可以通过对MODEM的型号和公司提出建议来帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T19:14:32.277

我相信华为调制解调器似乎与 GSM 网络完美配合。我在网上搜索了很多可用的型号，但找不到任何兼容 GSM 和 CDMA 网络的调制解调器（不过，我确实坚持使用“品牌”型号）。就多卡模式而言，WaveCom 似乎正在为设备提供多达 64 个 SIM 端口。