# StackOverflow 问答 12035000-12035999

# linux - TCP 服务器中的 regd setsocketopt 和套接字内存使用情况

> ID：12035000
> 
> 赞同：0
> 
> 时间：2012-08-20T09:14:45.970
> 
> 标签：linux, sockets, tcp

我有一个侦听客户端的服务器套接字。该服务器在无限循环中运行。在处理完每个连接的客户端后，关闭“连接的套接字”。我应该在已连接套接字的文件描述符上使用 setsocketopt 以实现可重用性吗？由于服务器套接字文件描述符永远不会关闭，我希望该套接字一直存在。

另外，我假设侦听服务器套接字被阻塞，直到新客户端建立连接，因此这不会耗尽内存。不是吗？请帮忙。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T23:54:07.563

您似乎不知道 SO_REUSEADDR 的用途。它没有你赋予它的神奇属性。套接字将一直存在，直到您关闭它。在大多数情况下，任何套接字描述符都不需要 SO_REUSEADDR。如果您没有收到绑定错误，则根本不需要它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T09:28:27.360

如果您正在考虑`SO_REUSEADDR`，它不会让您重新使用相同的套接字进行新连接。另外，我认为这不会给你买太多东西。创造新事物`fd/socket`并不是一项艰巨的任务。您会发现除此之外的其他瓶颈。

但是您可以通过不关闭连接（在服务器和客户端）进行优化，以便**同一个客户端**可以通过该连接进行通信以获取下一个请求。这将减少您的连接设置时间。

是的，默认情况下侦听套接字是阻塞的，因此`accept`调用将被阻塞。此外，这不会使用太多内存。您可以使其成为非阻塞并使用`poll`或`select`确定新的传入连接。

# rabbitmq - using rabbitMQ to transfer MySQL records

> ID：12035002
> 
> 赞同：1
> 
> 时间：2012-08-20T09:14:54.990
> 
> 标签：rabbitmq

I want to use rabbitMQ to store ***new*** transactions(records) that are happening in the local database into the remote similar database. Any suggestions, ideas on this?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T09:06:45.767

Can you share the reason of wanting to use RabbitMQ as the store and forward mechanism to the remote database. I believe most databases already have mechanisms to replicate/backup to a remote database installation. These are tuned to the database and tend to work very reliably. RabbitMQ will not help you shard database operations across multiple remove database instances either.

Why RabbitMQ?

# java - RMI 上的大字节数组

> ID：12035005
> 
> 赞同：1
> 
> 时间：2012-08-20T09:15:01.400
> 
> 标签：java, serialization, rmi, data-transfer

我目前正在尝试找出通过 RMI 传输相当大的字节数组 (<50MB) 是否是个好主意。

我读到它很慢，数据需要保存在客户端和服务器的内存中。当有多个调用时，这可能会导致问题。

有没有（简单的）替代方案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T09:25:00.853

[RMIIO](http://openhms.sourceforge.net/rmiio/) 允许您以分块方式流式传输对象。

编辑：您还可以使用[KRYO](http://code.google.com/p/kryo/)序列化和压缩对象以通过网络发送。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T09:19:40.640

考虑支持压缩以发送/接收大量数据的 java 流。

例如[GZipOutputStream](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/zip/GZIPOutputStream.html)发送数据和[GZipInputStream](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/zip/GZIPInputStream.html)接收发送的数据块。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-20T09:25:24.120

RMI 旨在传输对象。如果您在服务器上有一个字节数组对象并希望它在客户端上，您必须在两个地方都拥有它，直到它成功交付（然后您可以让原始对象消失）。

更合理的方法可能是重复调用填充远程对象，一次只传输一小块。这反过来又需要多次旅行，使其变慢。

您要解决的实际（非技术）问题是什么？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-20T10:14:39.367

这是一个非常糟糕的主意。在调用远程方法之前，必须在内存中形成字节数组；然后它必须在呼叫中传输；然后它必须由服务器读取；那么它必须存在于服务器中；然后它可以由服务器处理。您永远不想在一个块中处理这么大的数据项。它既浪费时间又浪费空间。考虑一个流式 API，您可以在两端使用中等大小的缓冲区；以方便发送方的块形式发送数据；并以方便接收者的块接收它。

# jquery - ajax jquery中未定义的结果

> ID：12035009
> 
> 赞同：0
> 
> 时间：2012-08-20T09:15:11.280
> 
> 标签：jquery

我的代码是这样的，成功的结果 msg.d 是未定义的。我认为它与 formdata 作为传递给 jquery ajax 的值有关。但我不知道我能解决它。那有什么问题？！

```
 var files = event.originalEvent.dataTransfer.files;   // i get it in drop event 
  var data = new FormData();

  jQuery.each(files, function (i, file) {
    data.append('file-' + i, file);
  });

  $.ajax({
    type: "POST",
    url: parameters.Url,
    contentType: false,
    processData: false,
    data: data,
    success: function (msg) {        //my return value from webservice is just "hello"
      alert(msg.d);
    }
  });
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T09:43:31.090

```
[WebMethod] 
public string HelloWorld() 
{ 
   xmlDoc.LoadXml("<root><item>Hello World</item></root>");
   return xmlDoc.OuterXML;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T09:43:38.180

从您上面的评论可以理解，您实际上只是从服务器端返回一个字符串。在您的客户端，您正试图从 ajax 返回中提醒参数“d”。这个 d 根本不存在。

当您发出警报消息时，您会收到消息 [object XMLDocument]。如果您在 ajax 调用中指定 'dataType: "text",'，此 XML 元素可以更改为字符串。

所以请尝试这样。

```
 $.ajax({
    type: "POST",
    url: parameters.Url,
    data: data,
    dataType: "text",
    success: function (msg) {       
      alert(msg);
    }
  }); 
```

希望这对你有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T09:40:50.913

```
 //my return value from webservice is just "hello" 
```

如果`msg`== "你好"; 那么应该`msg.d`是什么？如果您只是传递一个字符串作为结果，我看不出该字符串如何`.d`附加一个属性。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-20T09:24:37.127

你能提醒 msg 或 msg.success 吗？

您从 ajax 页面返回的值是多少？

确保您的 ajax 页面有一个返回参数“d”。

# android - 如何在活动中传递回调

> ID：12035015
> 
> 赞同：0
> 
> 时间：2012-08-20T09:15:17.513
> 
> 标签：android, android-activity

我有两个 Activity：Activity1 和 Activity2 Activity1 启动 Activity2，我想将 Activity2 的结果发送到 Activity1，但我不能使用 startActivityForResult()，因为 Activity1 的 lanuchmode 是 singelInstance。有没有办法从 Activity1 向 Activity2 发送回调？（据我所知，一种是发送 BroadCaseReceiver，另一种是在 Activity2 中设置静态参数）

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T09:23:39.243

[startActivityForResult 无法与 launchMode singleInstance 一起正常工作](https://stackoverflow.com/questions/3366992/startactivityforresult-not-working-properly-with-launchmode-singleinstance)

一个类似的问题，它建议使用保存的实例状态和/或将信息保存到数据库/全局存储。

[如果活动的启动模式为 singleInstance，则不会触发 onActivityResult](https://stackoverflow.com/questions/5118525/onactivityresult-do-not-fire-if-launch-mode-of-activity-is-singleinstance)

建议您使用不同的类型，将 singleInstance 替换为 singleTask

您可以扩展您想要启动的活动并将其类型强制为该场景的不同类型，将原始类型保留为 SingleInstance。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T09:28:24.933

使用广播在两个活动之间进行通信是行不通的。一次只有一个活动会处于活动状态。例如，使用它在 Activity 和 Service 之间进行通信确实很有意义。

通常，您可以使用 Intent Extras 将信息传递给下一个 Activity。即，使用 putExtra。

(java.lang.String, android.os.Bundle)

# scala - 在ScalaCheck中生成任意线性函数？

> ID：12035017
> 
> 赞同：2
> 
> 时间：2012-08-20T09:15:31.323
> 
> 标签：scala, scalacheck

我试图在 ScalaCheck 中生成 f(x) = ax + b 形式的任意函数，其中 a 和 b 是任意整数。我该怎么做呢？

我试过：

```
def arbitraryFunction[Int] = Arbitrary { 
  for (
    a <- Arbitrary.arbInt.arbitrary;
    b <- Arbitrary.arbInt.arbitrary
  ) yield (new Function1[Int, Int] { def apply(x : Int): Int = a * x + b })
} 
```

但我收到一个错误：

```
overloaded method value * with alternatives:
[error]   (x: Double)Double <and>
[error]   (x: Float)Float <and>
[error]   (x: Long)Long <and>
[error]   (x: scala.Int)scala.Int <and>
[error]   (x: Char)scala.Int <and>
[error]   (x: Short)scala.Int <and>
[error]   (x: Byte)scala.Int
[error]  cannot be applied to (Int(in method arbitraryFunction)) 
```

为什么这不起作用？我不确定为什么会收到重载方法错误。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-20T10:26:37.830

```
def arbitraryFunction[Int] 
```

这定义了一个带有类型参数的函数，称为`Int`. 据我了解您的问题，您的函数不需要任何类型参数。编译器错误是由这种类型标识符引起的，它掩盖了“正常”`Int`标识符。只要删除它，你的代码就可以工作，除非它包含其他缺陷。

# java - Selenium webdriver 无法点击页面外的链接

> ID：12035023
> 
> 赞同：31
> 
> 时间：2012-08-20T09:16:03.240
> 
> 标签：java, selenium, scroll, click, webdriver

我遇到了 Selenium WebDriver 的问题。我尝试单击窗口页面外的链接（您需要向上滚动才能看到它）。我当前的代码是相当标准的：

```
menuItem = driver.findElement(By.id("MTP"));
menuItem.click();
// I also tried menuItem.sendKeys(Keys.RETURN); 
```

我知道我可以向上滚动，在这种情况下它会起作用。但是，如果您有很长的项目列表，您不一定知道必须向下滚动多远。

有什么方法可以点击不在页面可见部分的链接（但如果滚动则可见）？

附带说明一下，我使用的是 Firefox，但我也计划使用 IE7/8/9 和 Chrome。

任何帮助将不胜感激。

编辑：恐怕我不能给出源代码，因为我工作的公司不允许它，但我可以给出我想点击的链接的代码：

```
<div class="submenu">
  <div id="MTP">Link title</div>
</div> 
```

完全相同的代码在链接可见时有效，只有在链接不可见时才有效。

Edit2：实际上，奇怪的是，它没有引发任何异常，只是转到下一条指令。所以基本上，会发生什么：

```
menuItem = driver.findElement(By.id("MTP")); // no exception
menuItem.click();  // no exception
//... some code ensuring we got to the next page: timeout reached
driver.findElement(By.id("smLH")).click(); // NoSuchElementException, as we're on the wrong page. 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-20T17:32:13.523

实际上可以自动滚动到元素。尽管在这种情况下这不是一个好的解决方案（必须有一种方法可以让它在不滚动的情况下工作），但我会将它作为一种解决方法发布。我希望有人会想出更好的主意...

```
public void scrollAndClick(By by)
{
   WebElement element = driver.findElement(by);
   int elementPosition = element.getLocation().getY();
   String js = String.format("window.scroll(0, %s)", elementPosition);
   ((JavascriptExecutor)driver).executeScript(js);
   element.click();
} 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2014-08-11T13:16:21.417

[我在另一个问题](https://stackoverflow.com/questions/12035023/selenium-webdriver-cant-click-on-a-link-outside-the-page?lq=1)中发布了相同的答案，所以这只是一个复制和粘贴。

我曾经有一个组合框，我认为不需要扩展。我所做的是使用 Actions 构建器，因为 moveToElement() 函数会自动将对象滚动到视图中。然后就可以点击了。

```
WebElement element = panel.findElement(By.className("tabComboBoxButton"));

Actions builder = new Actions(this.driver);

builder.moveToElement(element);
builder.click();
builder.build().perform(); 
```

（面板只是我 POM 中的一个包装元素）

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2016-10-07T13:17:43.747

我没有将滚动条移动到按钮位置，有时它对我不起作用，而是将输入键发送到按钮

```
var element = driver.FindElement(By.Id("button"));
element.SendKeys(Keys.Enter); 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-12-13T15:16:04.330

最近，当 JS 对话框中有一个可选对象列表时，我遇到了类似的问题。有时 selenium 不会在列表中选择正确的对象。所以我发现了这个 javascript 建议：

```
WebElement target = driver.findElement(By.id("myId"));
((JavascriptExecutor) driver).executeScript("arguments[0].scrollIntoView(true);", target);
Thread.sleep(500); //not sure why the sleep was needed, but it was needed or it wouldnt work :(
target.click(); 
```

这解决了我的问题

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2013-09-06T09:17:26.767

嘿，你可以用这个来做红宝石

```
variable.element.location_once_scrolled_into_view 
```

将要查找的元素存储在变量中

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2017-05-23T16:33:20.720

这可能是因为您的页眉元素或页脚元素可能会阻止您要对其执行操作的元素的视图。当 Selenium 必须对元素执行某些操作时，它会尝试滚动到元素位置（我使用的是 Selenium WebDriver v3.4.0）。

这是一个解决方法 -

```
private WebElement scrollToElementByOffset(WebElement element, int offset) {
    JavascriptExecutor jse = (JavascriptExecutor) driver;
    jse.executeScript("window.scrollTo(" + element.getLocation().getX() + "," + (element.getLocation().getY()
            + offset) + ");");

    return element;
} 
```

上面的函数将视图滚动到元素，然后按您提供的偏移量进一步滚动。您可以通过执行以下操作来调用此方法 -

```
WebElement webElement = driver.findElement(By.id("element1"));
scrollToElementByOffset(webElement, -200).click(); 
```

现在，这只是一种解决方法。我很高兴欢迎更好的解决方案来解决这个问题。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2013-10-22T20:52:30.467

这个解决方案对我来说就像一个魅力：

```
public void click(By by) throws Exception{
    WebElement element = driver.findElement(by);
    ((JavascriptExecutor) driver).executeScript("arguments[0].scrollIntoView(true);", element);
    Thread.sleep(500);
    element.click();
} 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2016-09-30T15:22:10.490

这对我有用（在 c# 中）-

```
item = driver.findelement(by.....);
item.SendKeys(Keys.LeftControl);
item.Click(); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-07-21T07:50:45.367

只是一个补充：在我的情况下，按钮被另一个浮动按钮重叠。

只需调整浏览器窗口的大小即可解决问题！

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-08-08T13:19:02.510

我使用以下方法解决了 Selenium Java 的类似问题：

```
public static void scrollToElementByElement(WebElement element) {

    Coordinates coordinates = ((Locatable)element).getCoordinates();
    coordinates.inViewPort();
    coordinates.click(); //if needed

} 
```

然后在我的主测试类上调用该方法

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-07-14T16:44:14.317

我使用以下方法来解决可见区域中不存在元素的问题。代码向下滚动网页，直到可以对元素执行 selenium 操作。根据需要更改 Y 轴坐标和 i 值。

```
public void scrooling(By ele) throws InterruptedException {
        for (int i = 0; i < 10; i++) {
            try {
                driver.findElement(ele);
                break;
            } catch (ElementNotVisibleException e) {
                JavascriptExecutor js = (JavascriptExecutor) driver;
                js.executeScript("window.scrollBy(0,400)");
                System.out.println("inside ElementNotVisibleException block");
                Thread.sleep(3000);
            } catch (NoSuchElementException e) {
                JavascriptExecutor js = (JavascriptExecutor) driver;
                js.executeScript("window.scrollBy(0,400)");
                System.out.println("inside NoSuchElementException block");
                Thread.sleep(3000);
            }

        }

    } 
```

# java - android在屏幕底部对齐元素

> ID：12035024
> 
> 赞同：0
> 
> 时间：2012-08-20T09:16:14.583
> 
> 标签：java, android, android-layout

我`android:layout_alignParentBottom="true"`用来在父底部对齐，但对于这种特殊情况是无效的。Parent 是一个相对布局，它具有固定的大小和更大的屏幕高度。现在我需要在屏幕底部而不是父底部放置一个对齐的文本视图。如何到达？谢谢你。

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="600dp" >

    <RelativeLayout
        android:id="@+id/blogLayout"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent">

        <WebView
            android:id="@+id/webviewBlog"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:textColor="@android:color/black" 
            android:scrollbars="none"
            android:fitsSystemWindows="true" />

    </RelativeLayout>

    <RelativeLayout
        android:id="@+id/Volver"
        android:layout_width="fill_parent"
        android:layout_height="40dp"
        android:layout_alignParentBottom="true"
        android:layout_alignParentLeft="true">

        <TextView
            android:id="@+id/Volvertxt"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:layout_alignParentBottom="true"
            android:layout_alignParentLeft="true"
            android:text="Volver"
            android:textColor="@android:color/white"
            android:textSize="30px"
            android:gravity="center"
            android:clickable="true"
            android:onClick="onClickVolver" />
    </RelativeLayout>

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T10:08:54.687

```
I have modified your code hope it solves your problem

<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
   android:layout_height="fill_parent" >

        <WebView
            android:id="@+id/webviewBlog"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:textColor="@android:color/black" 
            android:scrollbars="none"
            android:fitsSystemWindows="true" />

        <TextView
            android:id="@+id/Volvertxt"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_alignParentBottom="true"
            android:layout_alignParentLeft="true"
            android:text="Volver"
            android:textColor="@android:color/white"
            android:textSize="30px"
            android:gravity="center"
            android:clickable="true"
            android:onClick="onClickVolver" />

</RelativeLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T09:40:21.537

那是因为，您`dp`以父布局为单位给出高度。让它`match_parent`。

**编辑**：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

        <WebView
            android:id="@+id/webviewBlog"
            android:layout_width="fill_parent"
            android:layout_height="600dp"
            android:textColor="@android:color/black" 
            android:scrollbars="none"
            android:fitsSystemWindows="true" />

    <RelativeLayout
        android:id="@+id/Volver"
        android:layout_width="fill_parent"
        android:layout_height="40dp"
        android:layout_alignParentBottom="true"
        android:layout_alignParentLeft="true">

        <TextView
            android:id="@+id/Volvertxt"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:layout_alignParentBottom="true"
            android:layout_alignParentLeft="true"
            android:text="Volver"
            android:textColor="@android:color/white"
            android:textSize="30px"
            android:gravity="center"
            android:clickable="true"
            android:onClick="onClickVolver" />
    </RelativeLayout>

</RelativeLayout> 
```

# asp.net - 获取页面加载/初始化后创建的动态创建控件的值 - ASP.NET

> ID：12035025
> 
> 赞同：0
> 
> 时间：2012-08-20T09:16:22.693
> 
> 标签：asp.net, vb.net, postback, viewstate

我有一个带有下拉列表的表单的面板，其值为 1-10。当按下面板上的按钮时，该面板将变为不可见，而第二个则变为可见。在第二个面板上，我动态生成了多行控件。行数由下拉列表中的选定项确定。

我的问题是，当我想执行验证然后存储动态创建的控件内容的值时，控件被删除。

我知道这与页面的生命周期和动态创建的控件的持久性有关，但我不知道要解决这个问题。我在这里阅读了许多其他类似的问题，并且很少有谁来解决这个问题的工作示例，所以我一点也不聪明。这包括需要在 pageload 或 pageinit 上创建动态创建的控件的建议，因为我们不知道要创建多少，这怎么可能？

回顾一下：页面加载时不会添加这些控件，这些控件仅在用户按下按钮后添加。在用户选择他们想要的数量之前，我们不知道要制作多少个控件。

到目前为止我的代码：

```
Partial Class View
Inherits SeatPlannerModuleBase
Implements IActionable
Dim valid As String = "success"

Private Sub Page_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load, Me.Load
    Try

        Dim n As Integer = 0

        ' now, create n TextBoxes, adding them to the PlaceHolder TextBoxesHere
        For i As Integer = 0 To n - 1
            res_Placeholder.Controls.Add(New Label())
            booking_Placeholder.Controls.Add(New Label())

            title_Placeholder.Controls.Add(New TextBox())
            firstname_Placeholder.Controls.Add(New TextBox())
            surname_Placeholder.Controls.Add(New TextBox())
            ticketNum_Placeholder.Controls.Add(New TextBox())

        Next

        ' now, set the Text property of each TextBox
        IterateThroughBooking(Me)
        IterateThroughReservation(Me)
        IterateThroughTitle(Me)
        IterateThroughFirstname(Me)
        IterateThroughSurname(Me)
        IterateThroughTicketNum(Me)

        If Not Page.IsPostBack Then

        End If

    Catch exc As Exception        'Module failed to load
        ProcessModuleLoadException(Me, exc)
    End Try
End Sub

Protected Sub IterateThroughTitle(ByVal parent As Control)
    Dim count As Integer = 1

    For Each c As Control In title_Placeholder.Controls
        If c.[GetType]().ToString().Equals("System.Web.UI.WebControls.TextBox") AndAlso c.ID Is Nothing Then
            'DirectCast(c, TextBox).Text = "TextBox_Title " + count.ToString()
            DirectCast(c, TextBox).ID = "TextBox_Title_" + count.ToString()
            DirectCast(c, TextBox).CssClass = "DYN_TextBox"
            count += 1
        End If

        If c.Controls.Count > 0 Then
            IterateThroughTitle(c)
        End If
    Next
End Sub

Protected Sub CreateTextBoxes()

    Dim n As Integer = number_of_tickets_Ddl.SelectedValue

    ' now, create n TextBoxes, adding them to the PlaceHolder TextBoxesHere
    For i As Integer = 0 To n - 1
        res_Placeholder.Controls.Add(New Label())
        booking_Placeholder.Controls.Add(New Label())

        title_Placeholder.Controls.Add(New TextBox())
        firstname_Placeholder.Controls.Add(New TextBox())
        surname_Placeholder.Controls.Add(New TextBox())
        ticketNum_Placeholder.Controls.Add(New TextBox())

    Next

    ' now, set the Text property of each TextBox
    IterateThroughBooking(Me)
    IterateThroughReservation(Me)
    IterateThroughTitle(Me)
    IterateThroughFirstname(Me)
    IterateThroughSurname(Me)
    IterateThroughTicketNum(Me)

    Retreive_first_row()

End Sub

Protected Sub next_submit_Btn_Click(ByVal sender As Object, ByVal e As EventArgs) Handles next_submit_Btn.Click

    Step1_Pnl.Visible = False
    Step2_Pnl.Visible = True
    CreateTextBoxes()
    Button1.Attributes.Add("OnClick", "validate_step2(); return false;")

End Sub

Protected Sub next_submit2_Btn_Click(ByVal sender As Object, ByVal e As EventArgs) Handles next_submit2_Btn.Click

    step2_error_Lbl.Text = CType(Me.FindControl("TextBox_Title_2"), TextBox).Text

End Sub

End Class 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T18:42:25.383

动态创建的控件在回发后不会持续存在，您必须每次都重新创建它们，这是一个技术限制。要知道创建了多少控件，您可以在 session/viewstate/whatever 中保存一个变量，如果您像以前的状态一样命名它们，则视图状态将被恢复。

检查这些链接以获取更多信息：

[http://weblogs.asp.net/infinitiesloop/archive/2006/08/25/TRULY-Understanding-Dynamic-Controls-_2800_Part-1_2900_.aspx](http://weblogs.asp.net/infinitiesloop/archive/2006/08/25/TRULY-Understanding-Dynamic-Controls-_2800_Part-1_2900_.aspx)

[ASP.NET 动态创建控件和回发](https://stackoverflow.com/questions/4216329/asp-net-dynamically-created-controls-and-postback)

# c++ - 如何在不实例化类型的情况下确定两种 C++ 类型？

> ID：12035026
> 
> 赞同：4
> 
> 时间：2012-08-20T09:16:23.463
> 
> 标签：c++, templates, metaprogramming

我有以下问题：

我想在不实际评估“结果”类型的情况下确定两种类型 - 因为该类型可能根本不存在 - 是无效的。（请不要使用 C++11 的东西）

例子：

```
 #include <iostream>
 #include <iterator>

template <bool B, typename T, typename F>
struct TemplateIf {
};

template <typename T, typename F>
struct TemplateIf<true, T, F> {
   typedef T Result;
};

template <typename T, typename F>
struct TemplateIf<false, T, F> {
 typedef F Result;
};

int main(int argc, char** argv)
{

// On GCC this is error as std::iterator_traits<int>::value_type doesn't exist 
typename TemplateIf<true, int, std::iterator_traits<int>::value_type >::Result a;
a = 5;

std::cout << a << std::endl;

 return 0;
} 
```

它可以以某种方式确定吗？（假设选择的类型始终有效，但未选择的类型可能无效）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-20T09:43:24.250

使用惰性求值：

```
template<class T>
using Apply = typename T::type;

template<class T>
struct identity{ using type = T; };

template<bool B, class T, class F>
struct lazy_if{ using type = Apply<T>; };

template<class T, class F>
struct lazy_if<false, T, F> : lazy_if<true, F, T>{};

template<class T>
struct lazy_iterator_value_type{
  using type = typename std::iterator_traits<T>::value_type;
}; 
```

[实时示例 (C++11)。](http://liveworkspace.org/code/8abd647cc3dc6ba91c40e557495615d8)对于 C++03，需要进行简单的重写以摆脱使用别名，[请参见此处](http://liveworkspace.org/code/f6eaff084421d54a4a40c7dc50fc4c24)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-20T09:44:42.720

与其直接传递类型，不如传递一个对类型求值的元函数。然后可以在 if 中懒惰地评估这个元函数。

```
#include <iostream>
#include <iterator>

template <bool B, typename T, typename F>
struct TemplateIf {};

template <typename T, typename F>
struct TemplateIf<true, T, F> {
    typedef typename T::type Result;
};

template <typename T, typename F>
struct TemplateIf<false, T, F> {
    typedef typename F::type Result;
};

template <typename T>
struct get_value_type {
    typedef typename std::iterator_traits<T>::value_type type;
};

template <typename T>
struct identity {
    typedef T type;
};

int main(int argc, char** argv)
{
    TemplateIf<true, identity<int>, get_value_type<int> >::Result a;
    a = 5;
    std::cout << a << std::endl;
    return 0;
} 
```

# python - 从 python 检查 .zip 存档完整性/文件路径/压缩方法？

> ID：12035027
> 
> 赞同：0
> 
> 时间：2012-08-20T09:16:38.720
> 
> 标签：python, python-2.7, zip, zipfile, web-widget

我需要验证一个基本上是 .zip 的小部件是否符合以下合规性规则：
[http ://www.w3.org/TR/widgets/#zip-archive](http://www.w3.org/TR/widgets/#zip-archive)

所以我需要的是能够签入该档案：

*   压缩方法；
*   提取文件条目所需的 Zip 版本；
*   Zip 相对路径（路径长度、字符编码、文件名）

从 python 解决这个问题的方法是什么（使用什么库，一些最小的代码示例会有所帮助）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T10:41:07.630

你应该使用这个`zipfile`库 - 试试这个[http://bip.weizmann.ac.il/course/python/PyMOTW/PyMOTW/docs/zipfile/index.html](http://bip.weizmann.ac.il/course/python/PyMOTW/PyMOTW/docs/zipfile/index.html)：

要测试文件是否为 zip 文件：

```
import zipfile

for filename in [ 'README.txt', 'example.zip', 
                  'bad_example.zip', 'notthere.zip' ]:
    print '%20s  %s' % (filename, zipfile.is_zipfile(filename)) 
```

并访问 zip 文件的信息：

```
import datetime
import zipfile

def print_info(archive_name):
    zf = zipfile.ZipFile(archive_name)
    for info in zf.infolist():
        print info.filename
        print '\tComment:\t', info.comment
        print '\tModified:\t', datetime.datetime(*info.date_time)
        print '\tSystem:\t\t', info.create_system, '(0 = Windows, 3 = Unix)'
        print '\tZIP version:\t', info.create_version
        print '\tCompressed:\t', info.compress_size, 'bytes'
        print '\tUncompressed:\t', info.file_size, 'bytes'
        print

if __name__ == '__main__':
    print_info('example.zip') 
```

# android - Android：实例化一个类扩展视图

> ID：12035030
> 
> 赞同：1
> 
> 时间：2012-08-20T09:16:46.207
> 
> 标签：android, android-manifest, instance

我有一个名为`DrawBall`扩展视图的 Android 类，但是当我尝试`DrawBall`从 Activity ( `Display`) 实例化该类时，它会使我的应用程序崩溃。

我认为它与 Manifest 文件有关，但是作为 Android 新手，我无法解决。

```
public class Display extends Activity implements SensorEventListener
{
    @Override
    public void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        setContentView(new DrawBall(this));      
    }
} 
```

该类`DrawBall`如下所示：

```
public class DrawBall extends View
{
    private Bitmap Ball;

    public DrawBall(Context context)
    {
         super(context);
         Ball = BitmapFactory.decodeResource(getResources(), R.drawable.ic_sphere);
    }

    //@Override
    public void onDraw(Canvas canvas)
    {
        super.onDraw(canvas);       
        canvas.drawColor(Color.TRANSPARENT);
        canvas.drawBitmap(Ball, 400, 400, null);
    }
} 
```

在 Manifest 文件中初始化视图的正确方法是什么（假设上面的代码是正确的）？

# asp.net - asp .Net 服务器传输、回发和会话问题

> ID：12035031
> 
> 赞同：0
> 
> 时间：2012-08-20T09:16:48.507
> 
> 标签：asp.net, .net, postback, server.transfer

在过去的 4 年里，我们一直在开发商店网络应用程序。现在，我们正在添加一项新功能，因此该应用程序将根据配置以两种不同的方式运行：

第一种方式只是一个普通的网络应用程序

第二种方式的工作方式如下：

1.  将域或子域与一个产品相关联
2.  当用户访问该域时，商店必须显示产品页面。该应用程序不允许用户访问除结帐页面之外的任何其他页面
3.  用户点击购买按钮，然后应用程序将他/她重定向到结帐页面

起初，我们想到了`Server.Transfer`，所以我们写在 Global.asax

```
protected void Application_BeginRequest(object sender, EventArgs e)
{
    if (check for conditions)
    {
        Server.Transfer("product.aspx", true);
    }
} 
```

这种方法的第一个问题是会议。当 product.aspx 加载时，它没有初始化会话，所以它失败了。

然后我们把那个代码放进去，`Application_PreRequestHandlerExecute`但是，我们遇到了回发问题。我们已经知道这`Server.Transfer`有问题，但是第二个参数是`true`，它应该被解决。我们还设置`EnableViewStateMac="False"`了，因为有一个重定向到结帐 aspx，但这也不起作用。无论我们做什么，应用程序都无法验证 ViewState 或者它不响应回发。

我们尝试的另一个解决方案是尝试以编程方式更改默认页面，但这似乎是不可能的。如果我们手动更改 web.config 中的默认页面，应用程序可以正常工作，但遗憾的是这是不允许的。

所以问题是：

我们应该使用 Server.Transfer 吗（假设可以做到）？可以以某种方式、外部配置文件或以编程方式更改默认页面吗？也许我们的方法是错误的，还有更好的方法，尽管我们无法想象它

哦！我差点忘了：我们使用的是 aspx .net framework 2.0 和 C# .net 3.5

我希望我已经解释清楚了

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T09:23:41.697

您可能会从 MSDN 帮助页面[http://support.microsoft.com/kb/316920](http://support.microsoft.com/kb/316920)中找到以下有用的`EnableViewStateMac="False"`信息（这是默认设置）当您调用时`Server.Transfer`，请从此开始：

```
Server.Transfer("product.aspx", true); 
```

对此：

```
Server.Transfer("product.aspx"); 
```

或这个：

```
Server.Transfer("product.aspx", false); 
```

# entity-framework - Task.Factory.StartNew 不执行方法

> ID：12035032
> 
> 赞同：1
> 
> 时间：2012-08-20T09:16:51.180
> 
> 标签：entity-framework, async-await

我有一个实体框架方法，它只是将 a 添加`Product`到数据库中。当我运行我的测试方法时，这一切都按预期工作。

然后我有一个`AddProductAsync`方法：

```
Task<Product> AddProductAsync(Product pToAdd)
{
    return Task<Product>.Factory.StartNew(() => AddProduct(pToAdd));
} 
```

当我使用这种方法运行测试时，测试运行但实际上没有任何反应。我的方法中的断点`AddProduct`永远不会被击中，并且没有任何内容添加到数据库中。没有错误，没有警告。

我究竟做错了什么？还是我应该等待EF6？

提前致谢

原始方法：

```
public static Product AddProduct(Product pToAdd)
    {
        using (var viralDatabase = new ViralWearContext())
        {
            if (viralDatabase.Products.Any(p => p.Name == pToAdd.Name || p.Description == pToAdd.Description))
            {
                var result = viralDatabase.Products.First(p => p.Name == pToAdd.Name || p.Description == pToAdd.Description);
                //set 0 so client knows it already exists
                result.ProductID = 0;
                return result;
            }
            else
            {
                var result = viralDatabase.Products.Add(pToAdd);
                viralDatabase.SaveChanges();
                return result;
            }
        }
    } 
```

单元测试调用的方法：

```
public async void AddProductsAsyncTest()
    {
        Stopwatch timer = new Stopwatch();

        Product testProduct = GenerateTestProduct();
        Product testProductTwo = GenerateTestProduct();
        Product testProductThree = GenerateTestProduct();
        timer.Start();

        Product_Datalayer.AddProduct(testProduct);
        Product_Datalayer.AddProduct(testProductTwo);
        Product_Datalayer.AddProduct(testProductThree);
        var time1 = timer.ElapsedMilliseconds;
        Console.WriteLine(timer.ElapsedMilliseconds.ToString());

        timer.Reset();

        Product testProductAsync = GenerateTestProduct();
        Product testProductTwoAsync = GenerateTestProduct();
        Product testProductThreeAsync = GenerateTestProduct();
        timer.Start();

        var result1 = Product_Datalayer.AddProductAsync(testProductAsync);
        var result2 = Product_Datalayer.AddProductAsync(testProductTwoAsync);
        var result3 = Product_Datalayer.AddProductAsync(testProductThreeAsync);

        await Task.WhenAll(result1, result2, result3);
        var time2 = timer.ElapsedMilliseconds;
        Console.WriteLine(timer.ElapsedMilliseconds.ToString());
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T12:22:48.890

您需要[进行单元测试`async Task`，而不是`async void`](http://nitoprograms.blogspot.com/2012/02/async-unit-tests-part-1-wrong-way.html). 请注意，`async`单元测试仅受 VS2012 支持。

如果您使用的是 VS2010，则可以使用[此处描述的异步单元测试项目](http://nitoprograms.blogspot.com/2012/02/async-unit-tests-part-2-right-way.html)。我仍然建议您使用`async Task`，因此它们可以轻松转换为 VS2012（异步单元测试项目*不*支持）。

# maven - 在 Maven 中仅使用固定版本

> ID：12035039
> 
> 赞同：0
> 
> 时间：2012-08-20T09:17:13.613
> 
> 标签：maven, maven-2, maven-release-plugin

我可以在项目的 poms 中仅使用固定版本（例如：1.1.2.4）而不是 SNAPSHOT（例如：1.1.2.3-SNAPSHOT）版本吗？这样，每日构建就可以按原样用于发布。每日构建完成后，我可以运行 maven release:update-versions 插件来增加 pom 版本。

如果我们只使用固定版本，那么每日构建将直接部署到发布存储库。

maven 发布插件的优点是：
1\. 更新到固定版本并在 SCM 中创建标签
2\. 增加版本到快照版本
3\. 将构建的代码部署到发布存储库

但是发布准备和发布执行意味着构建2次，这是早期发布的瓶颈并且需要太长时间。

有没有人有这些问题，你选择了什么解决方案？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T09:28:39.420

您可以在 POM 中自由设置您想要的版本。据我所知，只有发布插件和部署的某些方面（visavi 发布/快照存储库）关心版本字符串中的“SNAPSHOT”。

您不必在“release:prepare”上构建完整的项目。如果您确信项目处于正常状态并且所有测试都通过了，您可以将您的准备目标设置为“干净”，这通常不会花费那么长时间。

顺便说一句，我们发现使用 SSD 进行 Maven 构建和集成测试可以将构建时间缩短多达 80%。此外，在带有 maven3 的多核 boxen 上，如果它们在功能上模块化（而不是在结构上模块化），您可以在多模块项目中获得性能提升。

# android - XML Parsing 应用程序在真实设备中显示强制关闭

> ID：12035042
> 
> 赞同：1
> 
> 时间：2012-08-20T09:17:25.697
> 
> 标签：android, xml-parsing

我在 android 中构建了一个小型应用程序。我使用 XML 拉解析器从使用 url 的 xml 文件中检索数据。问题是当我在模拟器上测试应用程序时它工作正常但是当我在真实设备上测试它时它表明应用程序已意外停止。强制关闭。这可能是什么原因？请帮助我。

```
08-20 16:07:30.070 E/AndroidRuntime(10349): FATAL EXCEPTION: main
08-20 16:07:30.070 E/AndroidRuntime(10349): java.lang.IllegalArgumentException
08-20 16:07:30.070 E/AndroidRuntime(10349): at org.kxml2.io.KXmlParser.setInput(KXmlParser.java:1615)
08-20 16:07:30.070 E/AndroidRuntime(10349): at com.example.androidsample4.UNIXclass.getEventsFromAnXML(UNIXclass.java:84)
08-20 16:07:30.070 E/AndroidRuntime(10349): at com.example.androidsample4.UNIXclass$1.onClick(UNIXclass.java:54)
08-20 16:07:30.070 E/AndroidRuntime(10349): at android.view.View.performClick(View.java:3131)
08-20 16:07:30.070 E/AndroidRuntime(10349): at android.view.View$PerformClick.run(View.java:12035)
08-20 16:07:30.070 E/AndroidRuntime(10349): at android.os.Handler.handleCallback(Handler.java:587)
08-20 16:07:30.070 E/AndroidRuntime(10349): at android.os.Handler.dispatchMessage(Handler.java:92)
08-20 16:07:30.070 E/AndroidRuntime(10349): at android.os.Looper.loop(Looper.java:132)
08-20 16:07:30.070 E/AndroidRuntime(10349): at android.app.ActivityThread.main(ActivityThread.java:4123)
08-20 16:07:30.070 E/AndroidRuntime(10349): at java.lang.reflect.Method.invokeNative(Native Method)
08-20 16:07:30.070 E/AndroidRuntime(10349): at java.lang.reflect.Method.invoke(Method.java:491)
08-20 16:07:30.070 E/AndroidRuntime(10349): at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:844)
08-20 16:07:30.070 E/AndroidRuntime(10349): at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:602)
08-20 16:07:30.070 E/AndroidRuntime(10349): at dalvik.system.NativeStart.main(Native Method)
08-20 16:07:30.080 W/ActivityManager( 2900):   Force finishing activity com.example.androidsample4/.UNIXclass 
```

在 logcat 中获取这个

```
package com.example.androidsample4;
import java.io.IOException;
import java.io.InputStream;
import java.net.URI;
import org.xmlpull.v1.XmlPullParser;
import org.xmlpull.v1.XmlPullParserException;
import org.xmlpull.v1.XmlPullParserFactory;
import android.net.Uri;
import android.os.Bundle;
import android.app.Activity;
import android.content.Context;
import android.content.res.Resources;
import android.content.res.XmlResourceParser;
import android.view.Menu;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.ArrayAdapter;
import android.widget.AutoCompleteTextView;
import android.widget.Button;
import android.widget.TextView;
import android.widget.Toast;

public class UNIXclass extends Activity 
{
    String unixcommands[];

    AutoCompleteTextView actv1;
    static final String URL="http://cympac.com/apps/xmlfile.xml";
    static final String KEY_COMMAND = "command"; // parent node
    static final String KEY_WORD = "word";
    static final String KEY_EXPLANATION = "explanation";

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        TextView tv1=(TextView)findViewById(R.id.textView1);
        AutoCompleteTextView actv=(AutoCompleteTextView)findViewById(R.id.autoCompleteTextView1);
        Button b1=(Button)findViewById(R.id.button1);
        unixcommands=getResources().getStringArray(R.array.Commands);
        ArrayAdapter<String> adapter =new ArrayAdapter<String>(getBaseContext(), android.R.layout.simple_list_item_1,unixcommands);
        actv1 = (AutoCompleteTextView)findViewById(R.id.autoCompleteTextView1);
        actv1.setThreshold(1);
        actv1.setAdapter(adapter);
        b1.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) 
            {
                TextView myXmlContent = (TextView)findViewById(R.id.textView2);
                String stringXmlContent = null;
                try {
                    stringXmlContent = getEventsFromAnXML(getBaseContext());   //   54 line
                } catch (XmlPullParserException e) {
                    // TODO Auto-generated catch block
                    Toast.makeText(getBaseContext(), "error:"+e.getMessage(), Toast.LENGTH_SHORT).show();
                } catch (IOException e) {
                    // TODO Auto-generated catch block
                    Toast.makeText(getBaseContext(), "error:"+e.getMessage(), Toast.LENGTH_SHORT).show();
                }
                myXmlContent.setText(stringXmlContent);

            }
        });
    }

    public String getEventsFromAnXML(Context baseContext) throws XmlPullParserException,IOException
    {
        StringBuffer stringBuffer=new StringBuffer();

        java.net.URL url=new java.net.URL("http://cympac.com/apps/xmlfile.xml");
        XmlPullParserFactory factory=XmlPullParserFactory.newInstance();
        factory.setNamespaceAware(true);
        XmlPullParser xpp=factory.newPullParser();
        xpp.setInput(getInputStream(url),"UTF_8");         //84 line
        int eventType = xpp.getEventType();
        String word = null;

        String tag;
        while ((eventType = xpp.next()) != XmlPullParser.END_DOCUMENT)
        {
            if(XmlPullParser.START_TAG==eventType)
            {
                tag=xpp.getName();
                //stringBuffer.append("\n"+tag);
                if (tag.equals("word"))
                {
                    eventType = xpp.next();
                    word = xpp.getText();
                }
                else if (tag.equals("explanation"))
                {
                    eventType = xpp.next();
                   //if ("cancel".equals(word))
                    if(actv1.getText().toString().equals(word))

                    {
                        stringBuffer.append("\n" + xpp.getText());
                    }
                }

            }

        }
        return stringBuffer.toString();

    } 
```

这是我的代码。我收到 IllegalArgument 异常

```
 public InputStream getInputStream(java.net.URL url2) 
    {

        try
        {
            return url2.openConnection().getInputStream();
        }
        catch(Exception e)
        {
            return null;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T10:19:39.503

如果它只在您的设备上崩溃，将异常消息放在字符串值中并将其显示在警报中会很有帮助。

我遇到了同样的问题，它帮助我了解设备出了什么问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T11:19:33.827

在向解析器提供 XML 数据时，您提供了非法参数。根据来源，您传递了一个空值。

请参阅此线程：[执行“doInBackground()”显示 IllegalArgumentException](https://stackoverflow.com/questions/11170151/execute-doinbackground-showing-illegalargumentexception)

向我们展示将 XML 传递给 KXmlParser.setInput 方法的行。

**编辑：**您`getInputStream()`返回 null，因此解析器抛出 IllegalArgumentException。在使用之前记录 url2 的值，看它是否为空。您也可以尝试按照另一个问题的解决方案直接传递流。

`xpp.setInput(getInputStream(url), "UTF_8");`

到

`xpp.setInput(url.openConnection().getInputStream(), "UTF_8");`

# java - Richfaces 4 和 a4j：在 Seam 中推送

> ID：12035045
> 
> 赞同：0
> 
> 时间：2012-08-20T09:17:27.780
> 
> 标签：java, jsf, jboss, richfaces, seam

我刚刚在我的 JBoss AS 7 上从 Richfaces 3.3.3 升级到 4.2.2，从 Seam 2.2.2 升级到 Seam 2.3。目前它运行良好。

但我必须使用标签：a4j:push，我不知道如何将接缝组件绑定到这个。

是）我有的：

```
@Name(TestBeanInterface.NAME)
@JndiName(value=TestBeanInterface.JNDI_NAME)
@Scope(ScopeType.SESSION)
public class TestBean implements Serializable {

private static final String CDI_PUSH_TOPIC = "pushCdi";

private String userIdentifier;

@Inject
@Push(topic = CDI_PUSH_TOPIC, subtopic = "#{testBean.userIdentifier}")
private javax.enterprise.event.Event<String> pushEvent;

@PostConstruct
public void init() {
    System.out.println("hey");

    if (userIdentifier == null) {
        userIdentifier = UUID.randomUUID().toString().replace("-", "");
    }

    TopicsContext topicsContext = TopicsContext.lookup();
    topicsContext.getOrCreateTopic(new TopicKey(CDI_PUSH_TOPIC, userIdentifier));
}

public void sendMessage() throws Exception {
    System.out.println("Send Message");
    pushEvent.fire("a test message");
}

public String getUserIdentifier() {
    return userIdentifier;
}

public void setUserIdentifier(String userIdentifier) {
    this.userIdentifier = userIdentifier;
}
} 
```

我得到什么：

```
22:23:28,191 INFO  [org.atmosphere.cpr.AtmosphereFramework] (MSC service thread 1-2) Atmosphere is using async support: org.atmosphere.container.BlockingIOCometSupport running under container: JBoss Web/7.0.13.Final
22:23:28,193 INFO  [org.atmosphere.cpr.AtmosphereFramework] (MSC service thread 1-2) Installed WebSocketProtocol org.atmosphere.websocket.protocol.SimpleHttpProtocol 
22:23:28,201 INFO  [org.atmosphere.cpr.AtmosphereFramework] (MSC service thread 1-2) Installed Default AtmosphereInterceptor [Android Interceptor Support, SSE Interceptor Support, JSONP Interceptor Support]. Set org.atmosphere.cpr.AtmosphereInterceptor.disableDefaults in your xml to disable them.
22:23:28,203 WARN  [org.atmosphere.cpr.AtmosphereFramework] (MSC service thread 1-2) No BroadcasterCache configured. Broadcasted message between client reconnection will be LOST. It is recommended to configure the HeaderBroadcasterCache.
22:23:28,204 INFO  [org.atmosphere.cpr.AtmosphereFramework] (MSC service thread 1-2) HttpSession supported: false
22:23:28,205 INFO  [org.atmosphere.cpr.AtmosphereFramework] (MSC service thread 1-2) Using BroadcasterFactory: org.atmosphere.cpr.DefaultBroadcasterFactory
22:23:28,205 INFO  [org.atmosphere.cpr.AtmosphereFramework] (MSC service thread 1-2) Using WebSocketProcessor: org.atmosphere.websocket.DefaultWebSocketProcessor
22:23:28,206 INFO  [org.atmosphere.cpr.AtmosphereFramework] (MSC service thread 1-2) Using Broadcaster: org.atmosphere.cpr.DefaultBroadcaster
22:23:28,208 INFO  [org.atmosphere.cpr.AtmosphereFramework] (MSC service thread 1-2) Atmosphere Framework 1.0.0.beta5 started.
22:23:28,212 INFO  [org.atmosphere.cpr.MeteorServlet] (MSC service thread 1-2) Installed Filter/Meteor org.richfaces.webapp.PushHandlerFilter mapped to /*
22:23:28,234 INFO  [org.atmosphere.cpr.AtmosphereFramework] (MSC service thread 1-2) Installed AtmosphereHandler org.atmosphere.handler.ReflectorServletProcessor mapped to context-path: /*
22:23:28,236 INFO  [org.atmosphere.handler.ReflectorServletProcessor] (MSC service thread 1-2) Installing Servlet null
22:23:28,238 INFO  [org.atmosphere.handler.ReflectorServletProcessor] (MSC service thread 1-2) Installing Filter PushHandlerFilter
.....
22:23:38,101 INFO  [stdout] (http-localhost-127.0.0.1-8080-1) hey
22:23:38,538 WARN  [org.jboss.seam.mock.MockViewHandler] (http-localhost-127.0.0.1-8080-1) You should catch the exception before Seam: java.lang.IllegalArgumentException: no file extension in servlet path: /__richfaces_push
    at org.jboss.seam.mock.MockViewHandler.getActionURL(MockViewHandler.java:49) [jboss-seam.jar:2.3.0.Beta2]
    at org.jboss.seam.jsf.SeamViewHandler.getActionURL(SeamViewHandler.java:75) [jboss-seam.jar:2.3.0.Beta2]
    at org.jboss.seam.faces.FacesManager.redirect(FacesManager.java:168) [jboss-seam.jar:2.3.0.Beta2]
    at org.jboss.seam.faces.Redirect.execute(Redirect.java:154) [jboss-seam.jar:2.3.0.Beta2]
    at org.jboss.seam.exception.DebugPageHandler.handle(DebugPageHandler.java:32) [jboss-seam.jar:2.3.0.Beta2]
    at org.jboss.seam.exception.Exceptions.handle(Exceptions.java:76) [jboss-seam.jar:2.3.0.Beta2]
    at org.jboss.seam.web.ExceptionFilter.endWebRequestAfterException(ExceptionFilter.java:114) [jboss-seam.jar:2.3.0.Beta2]
    at org.jboss.seam.web.ExceptionFilter.doFilter(ExceptionFilter.java:70) [jboss-seam.jar:2.3.0.Beta2]
    at org.jboss.seam.servlet.SeamFilter$FilterChainImpl.doFilter(SeamFilter.java:69) [jboss-seam.jar:2.3.0.Beta2]
    at org.jboss.seam.web.RedirectFilter.doFilter(RedirectFilter.java:45) [jboss-seam.jar:2.3.0.Beta2]
    at org.jboss.seam.servlet.SeamFilter$FilterChainImpl.doFilter(SeamFilter.java:69) [jboss-seam.jar:2.3.0.Beta2]
    at org.jboss.seam.servlet.SeamFilter$FilterChainImpl.doFilter(SeamFilter.java:73) [jboss-seam.jar:2.3.0.Beta2]
    at org.jboss.seam.servlet.SeamFilter.doFilter(SeamFilter.java:158) [jboss-seam.jar:2.3.0.Beta2]
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:280) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:248) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:275) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:161) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:397) [jbossweb-7.0.13.Final.jar:]
    at org.jboss.as.jpa.interceptor.WebNonTxEmCloserValve.invoke(WebNonTxEmCloserValve.java:50) [jboss-as-jpa-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.as.web.security.SecurityContextAssociationValve.invoke(SecurityContextAssociationValve.java:153) [jboss-as-web-7.1.1.Final.jar:7.1.1.Final]
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:155) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:368) [jbossweb-7.0.13.Final.jar:]
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:877) [jbossweb-7.0.13.Final.jar:]
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:671) [jbossweb-7.0.13.Final.jar:]
    at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:930) [jbossweb-7.0.13.Final.jar:]
    at java.lang.Thread.run(Thread.java:679) [rt.jar:1.6.0_24] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T12:59:20.090

这些是我最终在 Push 工作后在 Richfaces 论坛上写的笔记。请浏览一下，看看这是否有帮助。

*   我正在使用 servlet v3 容器 (web.xml: web-app version="3.0")，因此不需要在 web.xml 中显式声明推送 servlet。

*   我在 web.xml 中看到了 PushFilter 的一些示例，这肯定给我带来了问题，我只是在删除它之后才让它工作。

*   我已经看到它建议在 web.xml 中使用它，但我不需要：

    ```
    <context-param>
       <param-name>org.richfaces.push.handlerMapping</param-name>
       <param-value>/__richfaces_push</param-value>
    </context-param> 
    ```

*   晚于（不包括）0.8.0-RC1 的 Atmosphere 版本似乎存在问题，导致 WebSockets 出现 NoClassDefFound 错误（无论如何都是这样）。最新版本 0.8.2 不起作用。

*   需要在 java 文件中与 topicContext 相关的行 - 这就是导致“主题 'topic-name' 未配置错误”的原因。展示示例中缺少这些，但在组件指南中引用。

pom.xml

```
<dependency>
            <groupId>org.atmosphere</groupId>
            <artifactId>atmosphere-runtime</artifactId>
            <version>0.8.0-RC1</version>
            <type>jar</type>
</dependency> 
```

域.xml

```
<jvm-options>-Dcom.sun.grizzly.http.asyncwrite.enabled=true</jvm-options>
<jvm-options>-Dcom.sun.grizzly.http.asyncwrite.maxBufferPoolSize=10000</jvm-options> 
```

web.xml

```
<context-param>
        <param-name>org.richfaces.push.jms.disable</param-name>
        <param-value>true</param-value>
    </context-param>
    <context-param>
        <param-name>org.atmosphere.useBlocking</param-name>
        <param-value>true</param-value>
</context-param>
<servlet>
        <description>AtmosphereServlet</description>
        <servlet-name>AtmosphereServlet</servlet-name>
        <servlet-class>org.atmosphere.cpr.AtmosphereServlet</servlet-class>
        <async-supported>true</async-supported>
</servlet> 
```

测试.xhtml

```
<h:outputText id="uid" value="uid: #{testBean.userIdentifier}"/>
<a4j:push address="#{testBean.userIdentifier}@pushCdi"
               onerror="alert('error: ' + event.rf.data)"
               ondataavailable="alert('data: ' + event.rf.data)">
    <a4j:ajax event="dataavailable"/>
</a4j:push> 
```

TestBean.java

```
@ViewScoped
public class TestBean implements Serializable {

    private static final String CDI_PUSH_TOPIC = "pushCdi";
    private String userIdentifier;
    @Inject
    @Push(topic = CDI_PUSH_TOPIC, subtopic = "#{testBean.userIdentifier}")
    private javax.enterprise.event.Event<String> pushEvent;

    @PostConstruct
    public void init() {

        if (userIdentifier == null) {
            userIdentifier = UUID.randomUUID().toString().replace("-", "");
        }

        TopicsContext topicsContext = TopicsContext.lookup();
        topicsContext.getOrCreateTopic(new TopicKey(CDI_PUSH_TOPIC, userIdentifier));
    }

    public void sendMessage() throws Exception {
        Log.log("sendMessage");
        pushEvent.fire("a test message");
    }

    // add getters & setters 
```

# java - 提交具有多个 commandName 或 Modellattribute 的表单

> ID：12035046
> 
> 赞同：0
> 
> 时间：2012-08-20T09:17:32.817
> 
> 标签：java, spring, hibernate, form-submit

我想通过提交以下表格来保存评论：

```
<form:form method="post" action="postNewComment.html"  commandName="comment"  >
    <table>
        <tr>
            <td><form:label path="comment">
                    COMMENT
                </form:label></td>
            <td><form:input path="comment" /></td>
        </tr>                       
        <tr>
            <td colspan="2"><input type="submit"
                value="WRITE" /></td>
        </tr>
    </table>
</form:form> 
```

在最简单的情况下，在控制器中调用 addNewComment() 方法，一切都很好。

```
@RequestMapping(value = "/postNewComment", method = RequestMethod.POST)
    public ModelAndView addNewComment(@ModelAttribute("comment") Comment comment, BindingResult result) {
        commentService.addComment(comment);
        Map<String, Object> model = new HashMap<String, Object>();
        model.put("COMMENTS", commentService.getComments());
        return new ModelAndView("showAllComments", model);
    } 
```

只要我不想记录哪个用户发表了评论，一切都很好。 **但是，如果 Comment 类包含一个像这样的 User 字段**

```
@Entity
@Table(name = "comments")
public class Comment {

    // more fields...

    @ManyToOne
    @JoinColumn(name = "user_id")
    private User user;

   //getters-setters 
```

**我在 .jsp 文件中有一个有效的用户对象，如下所示：**

```
<c:if test="${!empty LOGGED_IN_USER}">
        <spring:message code="label.welcome" /> ${LOGGED_IN_USER.userName}
    </c:if> 
```

**如何通过提交上述表格不仅发送评论，还发送 LOGGED_IN_USER？**

下面的“解决方案”不起作用：（与 org.apache.jasper.JasperException 崩溃）

```
<form:form method="post" action="postNewComment.html"  commandName="comment"  >
        <table>
            <tr>
                <td><form:label path="comment">
                        COMMENT
                    </form:label></td>
                <td><form:input path="comment" /></td>
            </tr>
            <tr>
                <td><form:label path="user">
                        USER
                    </form:label></td>
                <td><form:input path=" ${LOGGED_IN_USER}" /></td>
            </tr>   

            <tr>
                <td colspan="2"><input type="submit"
                    value="WRITE" /></td>
            </tr>
        </table>
    </form:form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T11:24:22.650

我假设您的登录用户必须在会话中正确-如果是这样，您可以简单地将用户设置为您的控制器内的评论-

```
comment.setUser(sessionUser) 
```

或者您可以在呈现评论对象时设置 sessionUser，如果是这样，您可以简单地执行以下操作：

```
<form:hidden path="user"/> 
```

# windows-8 - 验证错误：此包包含一个 StoreManifest.xml 文件，该文件不针对 StoreManifest.xsd 架构进行验证？

> ID：12035048
> 
> 赞同：2
> 
> 时间：2012-08-20T09:17:57.720
> 
> 标签：windows-8, microsoft-metro, windows-runtime, winrt-xaml

![在此处输入图像描述](../Images/9794011e303143de3caf8abb96ddeaf3.png)

我用来将包上传到 Windows 应用商店的 StoreManifest.xml 文件，我收到以下错误。？有人有同样的经历吗？知道如何解决吗？

我正在使用 Window8RTM/VS 2012RTM

验证错误：此包包含一个 StoreManifest.xml 文件，该文件不针对 StoreManifest.xsd 架构进行验证

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T09:40:09.207

这是帮助我解决您面临的问题的官方[链接。](http://msdn.microsoft.com/en-us/library/windows/apps/jj730528.aspx)希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T21:13:05.173

`xsi:noNamespaceSchemaLocation=`和部分中的蓝色波浪线`xmlns=`表示验证错误。打开错误列表窗格并确保您正在查看警告——它们应该出现在那里。

看起来 VS2012 无法找到 StoreManifest.xsd 模式文件。

查看[http://msdn.microsoft.com/en-us/library/windows/apps/br211378.aspx（Windows](http://msdn.microsoft.com/en-us/library/windows/apps/br211378.aspx) Store 应用程序的架构）我看不到 StoreManifest 架构，只有一个应用程序包清单。StoreManifest 可能是针对 Win8 的 Alpha/Beta 版本的。

如果 StoreManifest 正确，请确保 Visual Studio 正在 Windows 应用商店应用程序/WinRT 架构文件夹中查找 XML 架构（不确定这是在哪里或如何解决此问题，因为我不再有权访问 Visual Studio）。完成此操作后，任何进一步的验证错误将在其下方带有蓝色波浪线，并在错误列表窗格中显示为警告。

# javascript - Ext.data.NodeInterface 禁用属性

> ID：12035050
> 
> 赞同：3
> 
> 时间：2012-08-20T09:18:08.573
> 
> 标签：javascript, extjs4

在 ExtJs 3 中，TreeNode 有一个“禁用”属性，但在 ExtJs 4 中，没有任何方法可以禁用 Tree Node（参见 Ext.data.NodeInterface 配置）。

有没有办法在 ExtJs 4 中禁用 TreeNode？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T14:35:31.513

我发现[这个插件](https://github.com/zombeerose/NodeDisabled)对禁用节点很有用。

# google-bigquery - 提供的架构与追加的表不匹配

> ID：12035051
> 
> 赞同：0
> 
> 时间：2012-08-20T09:18:09.197
> 
> 标签：google-bigquery

我有一个带有连接的大选择，其中两个表的大小相同，所以为了处理它，我将右表上的选择限制为块（通过使用 %），然后多次运行相同的选择，每个块一个和追加到目标表。

该过程适用于块 0、1、2，但对于任何后续块，它都会失败并声称“提供的架构与表不匹配”。

一些失败的工作如下：

```
job_01eb892ab77c49f2ab5a7d24fa19ea96 (chunk 3)
job_ae450380bacd42b8aae7b7b350a8bd61 (chunk 4)
job_6f40617d0e6046e7b474dffef220ade7 (chunk 5)
job_edfbf86b95364efba3a21ae855827eb4 (chunk 6) 
```

如果我删除表并单独运行第一个失败的块 (3) (job_bbbd3c8b56594725a3d3933c79f96286)，它工作正常并且新表中的架构与预期相同。

如果我有选择地处理块 0、1、3、4，块 3 工作正常，现在它在 4（job_76c3addb316644f595988cbc393ffa8a）上失败，如果我运行块 2、3、4、5，它在块 5（job_c5d99e0fa6b0481b8e5ea6b5d6f26271）上失败。

这看起来像 BQ 的一个问题是阻止将第四个块（无论它是什么）附加到目标表，并且它给出了错误的错误描述。

有什么建议么？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T20:01:32.350

这看起来像一个错误，当我们开始将表结果写入磁盘时，我们会使用一种略有不同的模式格式。我已经签入了一个修复程序，但它可能要到下周发布才能使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T15:36:00.080

我认为这是一个已知的错误，查询结果返回不可预测的字段模式（必需与可选）。IIRC，您可以使用 AS 或 IF() 来强制设置可选标志。

# iphone - 带有设计登录的 http 请求

> ID：12035052
> 
> 赞同：0
> 
> 时间：2012-08-20T09:18:14.433
> 
> 标签：iphone, http, devise, request

这是一个非常愚蠢的问题。我想将我的 iphone 应用程序与现有网站上的设计登录链接。现有脚本不应更改，应用程序和站点之间应该有一个简单的“界面”。（php？）是否可以这样做：

[http://www.mysite.com/login.php?username=name&password=password&auth=token](http://www.mysite.com/login.php?username=name&password=password&auth=token)

这个 login.php 应该如何将我的应用程序与网站上的设备连接起来？

如果用户存在，我想返回“true”，如果用户数据错误，我想返回“false”。

有没有一种简单的方法来实现这个？

感谢您的耐心和帮助；）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T14:49:46.327

[http://zyphdesignco.com/blog/simple-auth-token-example-with-devise](http://zyphdesignco.com/blog/simple-auth-token-example-with-devise)

将 token_authentication 与设计一起使用。这允许您使用身份验证令牌访问资源。您可能需要某种授权，例如 CanCan。

# awk - awk 中列中的最大值错误

> ID：12035053
> 
> 赞同：0
> 
> 时间：2012-08-20T09:18:21.180
> 
> 标签：awk, max

我有这个数据：

```
Values  
10  
20  
30  
40  
50  
12  
15  
18 
```

我想要列的最大值，跳过第一行，所以我尝试了：

```
awk 'NR>1 || a<$1{a=$1}  END{print a}' file.txt 
```

但它`18`在我预期的时候返回`50`。我的错误在哪里？

PS：

```
awk ' a<$1{a=$1}  END{print a}' file.txt 
```

它返回`Values`也不好

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T12:22:49.807

从带有标题的单列文件中获取最小值：

```
awk 'NR > 1 && min=="" || min > $1 { min = $1 } END { print min }' file.txt 
```

从带有标题的单列文件中获取最大值：

```
awk 'NR > 1 && max < $1 { max = $1 } END { print max }' file.txt 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T14:37:02.607

您也可以通过

```
awk '{if ($1 >= a) a=$1} END {print a }' file.txt 
```

并找到最小值

```
awk '{if ($1 <= a) a=$1} END {print a }' file.txt 
```

# ruby-on-rails - 跨多个文件破坏 ruby 模块

> ID：12035057
> 
> 赞同：28
> 
> 时间：2012-08-20T09:18:37.003
> 
> 标签：ruby-on-rails, ruby, module, mixins

我有一个 ruby​​ 模块，它应该包含很多类

```
module A
  class First
    #somemethods
  end

  class Second
    #somemethods
  end

  class Third
    #somemethods
  end
end 
```

我想在 Rails 中做的是将这些类分解为几个文件，将这个巨大的模块拆分为几个相关文件可能是最佳实践？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-08-20T09:59:44.443

一种方法是提出如下目录结构：

```
(root dir)
├── a
│   ├── first.rb
│   ├── second.rb
│   └── third.rb
└── a.rb 
```

文件内容：

```
# a.rb
require_relative './a/first.rb'
require_relative './a/second.rb'
require_relative './a/third.rb'

module A
end

# a/first.rb
module A
  class First
    # ...
  end
end

# a/second.rb
module A
  class Second
    # ...
  end
end

# a/third.rb
module A
  class Third
    # ...
  end
end 
```

# google-maps - Google 地图 API 信息窗口中的 Firefox 溢出和侧边栏

> ID：12035059
> 
> 赞同：2
> 
> 时间：2012-08-20T09:18:45.130
> 
> 标签：google-maps, firefox, overflow

我使用 Google Maps API 做了一些小事情，我对使用它感到非常满意。但是发生了一个错误；如果我在 infoWindow 中显示更长的文本，Firefox 总是会显示一个带有溢出的侧边栏。其他浏览器都没有这样做。

这是我在 infoWindow 中的内容：

```
<h3>Whatever whatever</h3><span class="mark">&#9733;&#9733;&#9733;&#9733;&#9733;</span> 
```

CSS: h3#title {

```
 font-family: Arial;
    font-size: 18px;
    margin: 0;
    padding: 0;    
    color: #000000;
    display: inline;
}

span.mark {
    position: relative;
    font-family: Arial;
    font-size: 18px;
    font-weight: normal;
    width: auto;
    text-align: right;
    top: 0px;
    padding: 0;    
    margin: 0 0 0 40px;
    color: #505050;
} 
```

有人看到任何解决方案吗？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-20T16:52:57.083

将您的内容插入到 div 中。

点击事件将是：

```
var myDiv = document.createElement('div'); 
myDiv.innerHTML = '<h3>Whatever whatever</h3><span class="mark">&#9733;&#9733;&#9733;&#9733;&#9733;</span>'; 
infowindow.setContent(myDiv); 
```

如果它仍然没有帮助 - 尝试将“white-space:nowrap”添加到您的内容样式中，例如：

```
infowindow.setContent('<div style="white-space:nowrap">....</div>'); 
```

或者（甚至更好）在 CSS 类中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-22T11:50:38.213

基于 Micha 的回答，显式样式在 Firefox 和 Chrome 上运行良好。

```
infowindow.setContent('<div style="overflow:hidden">' + var + '</div>'); 
```

# java - 如何获取 java.awt.Image 的 ColorSpace？

> ID：12035060
> 
> 赞同：0
> 
> 时间：2012-08-20T09:18:49.160
> 
> 标签：java, image, colors, awt

我知道当我使用时`BufferedImage`我可以调用`BufferedImage.getColorModel()` 但是当我只有一个实例时如何获得相同的值`java.awt.Image`？

==================================================== ====================================

更新..

好吧。现在让我准确解释我想要实现的目标：

我想创建一种方法来创建图像的一些缩略图。

首先，我将其转换为`JPEG`文件格式图像并将结果写入文件，然后我发现如果这样做我会失去原始图像的透明度，所以我试图将目标图像保存为`PNG`文件格式并标记BufferedImage 是`TYPE_BYTE_INDEXED`为了减少目标文件的大小，但最后我意识到如果现在原始图像本身包含很多颜色，那么我将得到一个粗糙质量的目标图像，因为`TYPE_BYTE_INDEXED`不能包含很多颜色。

所以呃..现在我需要做一些研究，看看我是否可以`imageType`从`Image`我得到的。如果`imageType`原来是，`TYPE_BYTE_INDEXED`那么我也可以`TYPE_BYTE_INDEXED`在目标图像上使用，否则我可以使用`TYPE_BYTE_ARGB`或`TYPE_BYTE_RGB`（这取决于原始图像的原始值）来确保我将获得高质量的缩略图和较小尺寸的图像目标文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T09:51:16.157

最好的办法是使用返回 RenderedImage（可以查询其 ColorModel）的 API 来获取图像。由于 java.awt.Image 不提供任何方法来查询它的 ColorModel，任何猜谜游戏都将涉及检查具体的实现类——这很可能是依赖于实现的。

如果您只想转换为特定的 ColorModel，请*忽略*图像使用的 ColorModel。创建所需类型（和大小）的 BufferedImage，获取 Graphics2D 以渲染到其中并将图像绘制到缓冲图像中。

编辑：响应“创建缩略图”

首先，即使*原始*图像使用索引颜色模型，您仍然需要为缩略图使用直接颜色模型 - 缩放索引颜色图像会产生混合颜色（由于像素平均），这些颜色很可能*不*包含在原图的彩色图。如果你真的想加倍努力，你必须分析缩略图的像素数据来决定是否可以使用索引颜色模型。

有一种半可靠的方法来确定源图像是否具有 alpha 通道：

```
/**
 * Returns true if image has alpha channel
 */
public static boolean hasAlpha(final Image image) {
    // If buffered image, the color model is readily available
    if (image instanceof RenderedImage) {
        return ((RenderedImage) image).getColorModel().hasAlpha();
    }
    // Use a pixel grabber to retrieve the image's color model;
    // grabbing a single pixel is usually sufficient
    final PixelGrabber pixelGrabber = new PixelGrabber(image, 0, 0, 1, 1, false);
    try {
        pixelGrabber.grabPixels();
        return pixelGrabber.getColorModel().hasAlpha();
    } catch (final Exception e) {
        return true;
    }
} 
```

对于模糊的图像类型，这可能会失败，但对于生成缩略图，它通常就足够了。在确定是否有 alpha 后，只需为缩略图选择一个合适的 BufferedImage.TYPE，TYPE_INT_ARGB 或 TYPE_INT_RGB。

然后将图像渲染成缩略图（这是一个详细的示例）：

```
 final boolean hasAlpha = hasAlpha(image);
    final int imageType =  hasAlpha ? BufferedImage.TYPE_INT_ARGB : BufferedImage.TYPE_INT_RGB;
    final BufferedImage thumbnail = new BufferedImage(width, height, imageType);
    final Graphics2D g = thumbnail.createGraphics();
// set rendering hints according to desired quality
    g.setRenderingHint(RenderingHints.KEY_ALPHA_INTERPOLATION, RenderingHints.VALUE_ALPHA_INTERPOLATION_QUALITY);
    g.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);
    g.setRenderingHint(RenderingHints.KEY_COLOR_RENDERING, RenderingHints.VALUE_COLOR_RENDER_QUALITY);
    g.setRenderingHint(RenderingHints.KEY_INTERPOLATION, RenderingHints.VALUE_INTERPOLATION_BICUBIC);
    g.setRenderingHint(RenderingHints.KEY_RENDERING, RenderingHints.VALUE_RENDER_QUALITY);
    if (!hasAlpha) {
        g.drawImage(image, 0, 0, width, height, Color.WHITE, (ImageObserver) null);
    } else {
        g.drawImage(image, 0, 0, width, height, (ImageObserver) null);
    }
    g.dispose(); 
```

计算缩略图的适当宽度和高度留给读者作为练习。然后可以使用 ImageIO 以 ImageIO 支持的任何格式保存缩略图图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T09:37:04.733

我不确切知道该方法是什么，但是如果您可以在 a 上使用此方法，`BufferdImage`请尝试将您的方法转换`java.awt.Image`为`BufferedImage`.

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-20T13:52:55.870

```
protected static BufferedImage toBufferedImage(Image image) {

        if (image instanceof BufferedImage) {
            return (BufferedImage) image;
        } else {

            int w = image.getWidth(null);
            int h = image.getHeight(null);

            BufferedImage bi = new BufferedImage(w, h,
                    BufferedImage.TYPE_INT_RGB);

            Graphics graphics = bi.getGraphics();
            graphics.drawImage(image, 0, 0, w, h, Color.WHITE, null);
            graphics.dispose();

            return bi;
        }

    } 
```

# javascript - 每当创建对象时调用 javascript 函数

> ID：12035061
> 
> 赞同：0
> 
> 时间：2012-08-20T09:18:50.127
> 
> 标签：javascript, cordova, iscroll

> 每当创建对象时如何调用任何 javascript 函数。

好吧，我不确定，但是，当我创建任何对象时，有什么方法可以调用 javascript 函数。？

```
var myScroll = new iScroll("wrapper");

function objectCreated() {
    alert("yes created")
} 
```

这里我想在创建 iScroll 对象时调用函数**objectCreated函数。**我知道我可以从 iScroll 构造函数调用函数**objectCreated**，但我不想在 iscroll 中进行更改。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T09:26:03.553

您无法拦截任何对象创建，但您可以`iScroll`在这种情况下进行修补：

```
// overwrite with a patched function
iScroll = (function(old) {
  return function() {
    // call your interceptor function
    objectCreated();

    // pass everything through to the original iScroll function
    return old.apply(this, arguments);
  };
})(iScroll); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T14:35:01.633

我会添加一个新的答案。我修补了 iScroll（我稍后会为 cubiq 提出拉取请求）。演示可以在这里看到：[http](http://www.hakoniemi.net/labs/iscroll/) ://www.hakoniemi.net/labs/iscroll/和修补的 iScroll 可以在这里找到：[https ://github.com/zvona/iscroll/blob/master/src/iscroll.js](https://github.com/zvona/iscroll/blob/master/src/iscroll.js)

简而言之，代码如下所示：

```
myIScroll = new iScroll("myScroll", {
    "onCreate" : function() { alert('created'); },
    "onDestroy" : function() { alert('destroyed'); }
}); 
```

# sql - IIF(...) 不是公认的内置函数

> ID：12035062
> 
> 赞同：28
> 
> 时间：2012-08-20T09:18:51.327
> 
> 标签：sql, sql-server-2008, tsql, sql-server-2005, sql-server-2008-r2

我正在尝试在 Microsoft SQL Server 2008 R2 中使用它：

```
SET @SomeVar = @SomeOtherVar +
  IIF(@SomeBool, 'value when true', 'value when false') 
```

但我收到一个错误：

> `IIF(...)`不是公认的内置函数名

是否[`IIF()`](http://msdn.microsoft.com/en-us/library/hh213574.aspx)只与更高版本兼容？

我可以使用其他功能吗？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-08-20T09:27:42.547

`IIF`来自 SQL 2012。在此之前，您可以使用[`CASE`](http://msdn.microsoft.com/en-us/library/ms181765.aspx)：

```
SET @SomeVar = @SomeOtherVar + CASE
 WHEN @SomeBool
 THEN 'value when true'
 ELSE 'value when false'
END 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-08-20T09:26:54.990

SQL Server 2012 中的新增功能，[可编程性增强](http://msdn.microsoft.com/en-us/library/cc645577)：

> SQL Server 2012 引入了 14 个新的内置函数。这些功能通过模拟在许多桌面应用程序的表达语言中发现的功能，简化了信息工作者的迁移路径。然而，这些函数对于有经验的 SQL Server 用户也很有用。
> 
> ...
> 
> *   [IIF（事务 SQL）](http://msdn.microsoft.com/en-us/library/hh213574)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-20T09:25:12.430

`IIF`对SQL Server 2008 R2 和之前的任何版本无效**。**

[`IIF`](http://msdn.microsoft.com/en-us/library/hh213574.aspx)在 SQL Server 2012 中引入（在我链接到的文档页面上没有指向以前版本的链接）。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-12-23T05:09:15.057

如果它在选择之外，您也可以使用标准 IF 语句。

例如

```
DECLARE @Answer VARCHAR(3) = 'YES'

IF @Answer = 'Yes'
BEGIN 
--Do Something if true
END
ELSE
-- Do Soemthing if false 
```

# php - PHP上传图片替换旧

> ID：12035063
> 
> 赞同：0
> 
> 时间：2012-08-20T09:18:54.900
> 
> 标签：php, mysql, image, upload, replace

好的，所以我正在工作的后台工作。这是我对 PHP 的第一次体验，所以我的代码很可能不会那么好。

这是我正在做的事情：

客户必须能够上传产品的图片+标题+描述，它必须在主页上显示该产品。之后，他必须能够删除或修改该项目。

所以上传工作正常，我设法展示产品，删除它，修改它。

唯一的问题是：当我使用新图像进行修改时，它不会替换目录中的旧图像（图像采用 sql 输入的 id，例如 0.jpg -> 1.jpg -2.jpg 等）

所以我将在这里展示我的上传脚本并修改：

上传：

```
<?php
     include("config.php");

$dir = "../images/";
$dir = $dir . basename( $_FILES['image']['name']);
$title = $_POST['title'];
$description = $_POST['desc'];
$position = $_POST['position'];
$image = ($_FILES['image']['name']);
$uploadedfile = $_FILES['image']['tmp_name'];
$uploadedfiletype = $_FILES['image']['type']; 

if (!($uploadedfiletype =="image/pjpeg" OR $uploadedfiletype =="image/jpeg" OR $uploadedfiletype =="image/jpg")){
      echo "Image must be jpg file";
}else if (move_uploaded_file($_FILES['image']['tmp_name'], $dir)){
    $sql="INSERT INTO test (title, description, position) VALUES ('$title','$description','$position')";
    if (!mysql_query($sql,$con)){
         die('Error: ' . mysql_error());
  }
  $newname = "../images/" . mysql_insert_id() . ".jpg";
  rename ("../images/$image","$newname");    
  $orig_image = imagecreatefromjpeg("../image/$newname");
  $sm_image = imagecreatetruecolor(96,96);
  imagecopyresampled($sm_image,$orig_image,0,0,0,0,96,96,imagesx($orig_image),imagesy($orig_image));
  imagejpeg($sm_image, $newname, 100);
  echo 'Upload good <a href="connected.php">Retour</a>';
}else{
    echo "Problem";
}
?> 
```

这是我的修改脚本（基本上是一样的，但使用 UPDATE for sql）：

```
<?php

    include("config.php");

$dir = "../images/";
$dir = $dir . basename( $_FILES['image']['name']);
$title = $_POST['title'];
$description = $_POST['desc'];
$position = $_POST['position'];
    $id=$_POST['id'];
$image = ($_FILES['image']['name']);
$uploadedfile = $_FILES['image']['tmp_name'];
$uploadedfiletype = $_FILES['image']['type']; 

unlink('../images/$id');

if (!($uploadedfiletype =="image/pjpeg" OR $uploadedfiletype =="image/jpeg" OR $uploadedfiletype =="image/jpg")){
      echo "L'image doit être en .jpg ou .jpeg";
}else if (move_uploaded_file($_FILES['image']['tmp_name'], $dir)){ 
  $sql="UPDATE test SET title='$title', description='$description' WHERE id='$id'";
    if (!mysql_query($sql)){
         die('Error: ' . mysql_error());
  }
  $newname = "../images/" . mysql_insert_id() . ".jpg";
  rename ("../images/$image","$newname");    
  $orig_image = imagecreatefromjpeg("../image/$newname");
  $sm_image = imagecreatetruecolor(96,96);
  imagecopyresampled($sm_image,$orig_image,0,0,0,0,96,96,imagesx($orig_image),imagesy($orig_image));
  imagejpeg($sm_image, $newname, 100);
  echo 'Modif réussi <a href="connected.php">Retour</a>';
}else{
    echo "Un probleme est survenue";
}

 ?> 
```

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T09:31:46.497

我的意思是你似乎有一个拼写错误`unlink('../images/$id');`，PHP 没有在单引号内编译 $id 。

尝试做`unlink("../images/$id");`或`unlink('../images/'.$id);`

如果它仍然不起作用，你可能有一个正确的问题。`var_dump(unlink("../images/$id"))`如果返回false，则尝试调试它，这意味着删除失败。

如果是这样，请尝试使用 sha1 哈希创建一个新文件，例如：

`$dir = "../images/".sha1(rand())."-".basename( $_FILES['image']['name']);`

这将为每个上传的文件创建一个新的唯一名称。它将存储旧图像，但名称不同。只需将它们以不同的方式调用到您的数据库中

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T12:09:06.700

更改`unlink('../images/$id');` 分配`'../images/$id'`给一个变量，然后使用 :`unlink($variable_name);` 这对你有好处。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-04-02T17:39:04.223

```
SELECT `AUTO_INCREMENT`
FROM  INFORMATION_SCHEMA.TABLES
WHERE TABLE_SCHEMA = 'DatabaseName'
AND   TABLE_NAME   = 'TableName'; 
```

# ruby - 与 << 在红宝石中相反

> ID：12035064
> 
> 赞同：5
> 
> 时间：2012-08-20T09:19:10.557
> 
> 标签：ruby, string

我通过`<<`在循环中使用运算符准备了一个巨大的字符串。最后我想删除最后 2 个字符。

```
some_loop
  str << something
end
str = str[0..-3] 
```

我认为上面的最后一个操作也会消耗内存和时间，但我不确定。我只是想看看是否有相反效果的操作， `<<`所以我可以从同一个字符串中删除最后两个字符。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-20T09:27:09.817

事实上，字符串切片已经是一种快速且节省内存的操作，因为直到真正需要时才复制字符串内容。

[请参阅“ Seeing double: Ruby 如何共享字符串值](http://patshaughnessy.net/2012/1/18/seeing-double-how-ruby-shares-string-values)”中的详细说明。

请注意，这是对字符串操作的某种经典优化；[你在 java 中也有它，](https://stackoverflow.com/questions/10951812/java-not-garbage-collecting-memory/10951867#10951867)我们经常在 C 中使用类似的技巧。

所以，不要犹豫：

```
str = str[0..-3] 
```

这是正确、推荐和有效的方法，前提是您确实必须删除这些字符，请参阅 Sergio 的回答。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-20T09:26:29.980

您是否有机会使用分隔符连接一些数组元素？像这样的东西？

```
names = ['Mary', 'John', 'Dave']

res = ''
names.each do |n|
  res << n << ', '
end

res # => 'Mary, John, Dave, ' 
```

如果是，那么有更简单的路径。

```
names.join(', ') # => 'Mary, John, Dave' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-20T09:36:32.130

如果最后两个字符是换行符/换行符 (CR/LF)，您可以使用`String.chomp`（或者`String#chomp!`如果您想修改字符串）。

否则你可以使用：

```
2.times{ string.chop! } 
```

或者

```
string.chop!
string.chop! 
```

# eclipse-rcp - plugin_customization.ini

> ID：12035070
> 
> 赞同：-3
> 
> 时间：2012-08-20T09:19:57.380
> 
> 标签：eclipse-rcp

每当我启动 rcp 应用程序的 .product 时，我的 plugin_customization.ini 中的一些值都会被删除。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T19:30:38.377

你确定它没有被其他进程覆盖吗？

AFAIK，plugin_customization.ini 文件是只读的。

# wordpress - Wordpress - 对其他管理员隐藏主题选项

> ID：12035071
> 
> 赞同：3
> 
> 时间：2012-08-20T09:20:06.233
> 
> 标签：wordpress, wordpress-theming

我正在开发一个模板，我目前正在尝试找到一种解决方案或方法来有效地向另一个管理员用户隐藏位于外观中的主题选项？

我不想剥夺我的共同管理员的“管理员权限”并将他更改为较低级别，但是我正在寻找一种可能性来向他隐藏这个元素，以便他无法更改主题选项/设置。

一些帮助将不胜感激。

非常感谢，帕特里克

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-20T09:41:59.073

您可以在检查特定用户 ID 的函数中使用内置的 Wordpress 函数 remove_submenu_page。您可以将其连接到 admin_head。

```
<?php

function hide_menu() {
 global $current_user;
 $user_id = get_current_user_id();
 // echo "user:".$user_id;   // Use this to find your user id quickly

    if($user_id != '1') {

        // To remove the whole Appearance admin menu you would use;
        remove_menu_page( 'themes.php' );

        // To remove the theme editor and theme options submenus from
        // the Appearance admin menu, as well as the main 'Themes'
        // submenu you would use 

        remove_submenu_page( 'themes.php', 'themes.php' );
        remove_submenu_page( 'themes.php', 'theme-editor.php' );
        remove_submenu_page( 'themes.php', 'theme_options' );

    }
}

add_action('admin_head', 'hide_menu');
?> 
```

但是，应该注意（根据评论），使用它只会隐藏菜单项，并不会完全禁用它，并且可以直接从浏览器访问。如果您确实必须将此其他人保留为管理员而不是具有较低权限的用户，并且您必须确保他们根本无法访问主题选项，那么您应该考虑使用插件来创建新的用户访问级别自定义功能（我说使用插件，因为我认为自己编写代码没有任何意义，你只是在重新发明轮子）。

# ruby-on-rails - rails - 在渲染时动态更改视图文件名

> ID：12035072
> 
> 赞同：1
> 
> 时间：2012-08-20T09:20:09.207
> 
> 标签：ruby-on-rails, ruby-on-rails-3

在我的应用程序中，我大量使用了 AJAX 视图。就像用户注册页面是 AJAX 请求的弹出窗口一样。然而，这种方法对 SEO 不友好，因为 google 无法索引“弹出窗口”，而且显然您无法永久链接弹出页面。

所以我想要做的是有一个类似的回调，如果请求是基于 ajax 的`before_render`，我可以动态地附加到我的视图名称。`.xhr`保持这个 DRY 并且不必将它编码到每个控制器中会很好。

如何手动完成此操作的一个示例是：

```
def new
  render request.xhr? ? 'new.xhr' : 'new'
end 
```

知道如何在不重写我的每一个控制器的情况下实现这一点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T10:09:28.533

设法找到解决方案。在跟踪渲染调用后，我发现实现这一目标的最简单方法是将以下内容添加到您的`ApplicationController`

```
private

  def _process_options options
    options[:template] += '.xhr' if request.xhr?
    super options
  end 
```

这在 Rails 3 中运行良好，在 Rails 2 中，您可以通过覆盖以下`default_template_name`方法来实现类似的效果：

```
private

  def default_template_name
    super + if request.xhr? then '.xhr' else '' end
  end 
```

# automation - 是否有类似 Puppet 的工具来描述数据库模式和约束？

> ID：12035075
> 
> 赞同：2
> 
> 时间：2012-08-20T09:20:17.333
> 
> 标签：automation, database-schema, puppet

我们最近遇到了一个升级问题，因为我们的数据库架构中的一列被意外修改了

```
("SECURED" NUMBER(1,0) DEFAULT 0 NOT NULL); 
```

到

```
("SECURED" NUMBER(1,0) DEFAULT NULL NOT NULL); 
```

经过分析，看起来该列已被复制粘贴到 SQL 编辑器客户端中，并且我们丢失了一些约束。

我喜欢 Puppet 在主机配置方面可以做的事情：据我了解，您在清单中声明主机配置，然后 Puppet 检查主机是否满足配置要求，如果不满足，它会完成确保系统配置所需的一切如清单中所述。

我希望在数据库字段中存在类似的工具：您使用表、列名、类型、约束等声明数据库模式。每次运行该工具时，它都会确保架构定义得到尊重，如果没有，它会修复它。

该工具将“看到”约束`DEFAULT NULL`不正确，并将其更改为`DEFAULT 0`并因此通过自动化修复人为错误。

你知道这样的工具是否存在吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T17:13:43.580

[您可以使用SchemaCrawler](http://schemacrawler.sourceforge.net/)自动化数据库模式比较。SchemaCrawler 是一个免费的命令行工具，可以将数据库模式详细信息生成为文本，其格式旨在进行差异化。您可以定期自动生成数据库模式文本文件，然后将它们与预期的文本文件进行比较。在自动修复方面，我建议不要在生产模式中这样做。您可能需要提醒人们架构需要更新。

Sualeh Fatehi，SchemaCrawler。

# python - django-cron 不工作

> ID：12035076
> 
> 赞同：2
> 
> 时间：2012-08-20T09:20:18.580
> 
> 标签：python, django, django-cron

正确安装 django_cron 后，我在 django app 中编写名为 cron.py 的以下代码调用 django_cron 执行。但奇怪的是这个脚本根本不起作用！

```
from django_cron import cronScheduler, Job
from mysite.tds.models import machine_list,flavor_list,image_list
from mysite.views import *
import datetime,os

class CheckExpire(Job):
run_every = 60

def job(self):
    mac_list = machine_list.objects.filter(expire_date=datetime.date.today())
    for lst in mac_list:
        delete_vm(lst.servername)
        nagios_delete(lst.servername,lst.machine_ip)
    mac_list.delete()

cronScheduler.register(CheckExpire) 
```

如果我将上面的代码写在另一个脚本中并运行此脚本，则可以成功执行上述代码，因此这些代码没有错误。

我发布了有关如何安装 django-cron 的步骤，供大家检查我是否正确安装。

1.  将 'django_cron' 放入你的 python 路径

2.  在您的 settings.py 文件中将 'django_cron' 添加到 INSTALLED_APPS

3.  将以下代码添加到 urls.py 文件的开头（就在导入之后）： import django_cron django_cron.autodiscover()

4.  在要添加重复作业的每个已安装应用程序中创建一个名为“cron.py”的文件。

5.  更新 httpd.conf 中的 MaxRequestsPerChild 并将其设置为 100

6.  更新 django_cron 中的 base.py 并设置 polling_frequency 30（小于 run_every）

有人能弄清楚为什么 django_cron 在这种情况下不起作用吗？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T12:00:06.470

我猜你是在守护进程模式下运行 mod_wsgi。

第 4 步建议 django-cron 在重新加载整个代码库时运行作业，当 Apache 重新加载时 mod_python 或嵌入式 mod_wsgi（嵌入式）会这样做，但 mod_wsgi（守护进程）不会。

更好的解决方案是将您的脚本添加到系统 cron。

如果必须使用 django-cron，则需要在 mod_wsgi 的 DaemonProcess 配置上设置最大请求数或将其设置为运行嵌入式。出于性能和可靠性的原因，我不能推荐这两种方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T22:55:45.000

您应该在数据库中检查的一些事项：

1 - 同步数据库后，表：'django_cron_cron' 和 'django_cron_job' 应该存在。

2 - 确保**django_cron_job.queued 设置为 1**（如果您的 cron 作业崩溃，它将设置为 0 并且不再运行）

3 - 确保 django_cron_cron.executing 设置为 0（否则 cron 认为该作业仍在运行）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-02-07T19:31:09.923

有时由于日志而无法正常工作。如果你在设置中有 django 日志路径。Cron 想用它。

# javascript - 递归对象消息

> ID：12035079
> 
> 赞同：0
> 
> 时间：2012-08-20T09:20:30.547
> 
> 标签：javascript, object, recursion

我有一个结构如下的对象：

```
{
  _id: {
    $oid: 'foo',
  },
  data: {
    john: {
     _doe: {
       $oid: 'bar'
     }
    }
  }
} 
```

现在我想按摩这个物体，使它变成：

```
{
  _id: 'foo',
  data: {
    john: {
     _doe: 'bar'
    }
  }
} 
```

换句话说，每个实例都`$oid`应该将该值上移一级（或类似的东西）。它可能发生在许多层面。

我试过：

```
var loop = function(o) {
    for ( var i in o ) {
        if ( i == '$oid' ) {
            o = o[i];
        } else if ( typeof o[i] == 'object' ) {
            loop(o[i]);
        }
    }
    return o;
}
loop(obj); 
```

但它失败了，我无法理解它......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T09:37:47.730

你几乎拥有它，只需要一个小修复：

```
var loop = function(o) {
    for ( var i in o ) {
        if ( i == '$oid' ) {
            o = o[i];
        } else if ( typeof o[i] == 'object' ) {
            console.log(o[i]);
            o[i] = loop(o[i]);
        }
    }
    return o;
} 
```

您需要将循环的结果分配给原始对象。

```
o[i] = loop(o[i]); 
```

# web-crawler - 网络爬虫常用输出格式

> ID：12035083
> 
> 赞同：0
> 
> 时间：2012-08-20T09:20:57.183
> 
> 标签：web-crawler

需要将现有应用程序连接到社交媒体监控。爬虫的常见输出格式是什么。会是 XML、JSON 格式吗？还是它会根据爬虫而有所不同，例如：Python、Java？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T18:16:58.270

它会有所不同，另外，您可能不想要一个输出“文件”，因为该站点可能很大。

我用 ruby​​ 编写了一个名为 cobweb (http://github.com/stewartmckee/cobweb) 的爬虫，它使用哈希作为其数据模型。收到每一页后，您都会看到散列，以执行您希望执行的任何操作。

出于兴趣，您希望从爬网中获得什么信息？只是想一个相对简单的添加是为蜘蛛网创建一个 web api，你可以使用吗？

# jquery - 切片一个 json 数组切片将不起作用

> ID：12035084
> 
> 赞同：0
> 
> 时间：2012-08-20T09:20:58.050
> 
> 标签：jquery

当我使用 slice 删除我不断得到的第一个数组时。

```
TypeError: data.slice is not a function
http://localhost/dev/ajax/error.html 
```

我的 json 数据如下。我正在尝试删除“成功：真

```
{"success":true,"errOne":"Message One","#errTwo":"Message Two","#errThree":"Message Three"} 
```

我的 jQuery 代码

```
dataType:"json",
cache:false,
success: function(data){
$('#errors div').empty();
data.slice(1); 
```

如何纠正这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T09:24:40.407

你的意思是切片/拼接函数，这个函数只适用于数组，你这里有一个 JSON 对象，尝试使用删除操作：

`delete data['success']`

# string - Unicode 字符、C++ 和 libcurl

> ID：12035086
> 
> 赞同：2
> 
> 时间：2012-08-20T09:21:11.090
> 
> 标签：string, unicode, encoding, stringstream, stdstring

我使用 stringstream 和 libcurl 下载数据。我也有解析功能。

```
bool parse()
{
    istringstream temp(buff.str());
    buff.str("");
    string line;
    QString line_QStr, lyrics_QStr;
    while (temp.good())
    {
        getline(temp, line);
        if (QString::fromStdString(line).contains(startMarker)) break;
    }
    if (!temp.good()) return false; // something went wrong

    while (temp.good())
    {
        getline(temp, line);
        if ((line_QStr = QString::fromStdString(line)).contains(endMarker))
        {
            lyrics_QStr += line_QStr.remove(endMarker); // remove the </div>
            break;
        }
        else
        {
            lyrics_QStr += line_QStr;
        }
    }

    if (!temp.good()) return false;

    QTextDocument lyricsHtml;
    lyricsHtml.setHtml(lyrics_QStr);
    lyrics_qstr = lyricsHtml.toPlainText();
    return true;
} 
```

当文本是 ascii-only 时是可以的。但如果它是 unicode，那么我会在这个函数的某个地方丢失 unicode 字符。结果是这样的：

![Unicode 字符搞砸了](../Images/2a5d4521635c938e7545e56513c5657e.png)

我使用 string 和 getline 而不是 QTextStream 和 QString，因为我找不到 good() 函数的任何对应物，所以我无法进行任何体面的错误处理。

我在这个函数中做错了什么，unicode 字符丢失并显示为 2 个其他字符？我该如何解决？提前致谢！

编辑：我将解析函数更改为：

```
bool LyricsManiaDownloader::parse()
{
    wistringstream temp(string2wstring(buff.str()));
    buff.str("");
    wstring line;
    QString line_QStr, lyrics_QStr;
    while (temp.good())
    {
        getline(temp, line);
        if (QString::fromStdWString(line).contains(startMarker)) break;
    }
    if (!temp.good()) return false; // something went wrong

    while (temp.good())
    {
        getline(temp, line);
        if ((line_QStr = QString::fromStdWString(line)).contains(endMarker))
        {
            lyrics_QStr += line_QStr.remove(endMarker); // remove the </div>
            break;
        }
        else
        {
            lyrics_QStr += line_QStr;
        }
    }

    if (!temp.good()) return false;

    QTextDocument lyricsHtml;
    lyricsHtml.setHtml(lyrics_QStr);
    lyrics_qstr = lyricsHtml.toPlainText();
    return true;
} 
```

string2wstring 函数是

```
wstring string2wstring(const string &str)
{
    wstring wstr(str.length(), L' ');
    copy(str.begin(), str.end(), wstr.begin());
    return wstr;
} 
```

编码仍然存在一些问题。

EDIT2：我使用此功能将数据保存到字符串流中

```
size_t write_data_to_var(char *ptr, size_t size, size_t nmemb, void *userdata)
{
    ostringstream * stream = (ostringstream*) userdata;
    size_t count = size * nmemb;
    stream->write(ptr, count);
    return count;
} 
```

我把std::ostringstream buff传给curl，网页数据保存在这里。然后我使用 wistringstream，将 buff.str() 转换为 wstring 并将其用作 wistringstream 的源。从 std::string 到 std::wstring 的转换是解码，不是吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T09:55:23.240

Web 服务器返回一个字节流以及一个标头，该标头指示这些字节应该被理解为什么编码。如果你调用 QString::fromStdString 而不介意那个编码，那么 Qt 将默认使用 Latin1。在您的情况下，服务器发送 UTF-8 数据并将其解析为 Latin1 会导致您作为示例给出的那种损坏的文本。

作为一种快速解决方法，您可以使用 QTextCodec::setCodecForCStrings 全局设置正确的编码。但是，这不是线程安全的。

理想情况下，您将在尝试解析 Web 服务器返回的字节流之前对其进行解码，然后使用 fromStdWString 将其转换为 QString。根据经验，您希望尽早解码文本数据。请参阅 Joel Spolsky 关于如何处理 Unicode 的著名文章：http: [//www.joelonsoftware.com/articles/Unicode.html](http://www.joelonsoftware.com/articles/Unicode.html)

编辑：本质上，您的代码中缺少一个步骤：获取服务器返回的字节流，并将其转换为正确的、不含歧义的文本。

您可能会发现将文本流和字节流视为完全不同的动物很有用。核心区别在于文本是明确的：它是明确定义的字符串和字符标记（变音符号），以内在的方式存在，不受实现细节的约束。然而，字节流可能意味着任何东西，具体取决于您如何解释它们。

取字节 0xC2 0xA3。它们可能*表示*“字符 Â 后跟字符 Ł”。这是一个完全有效的解释。但它们也可能表示“字符£”。这是另一种完全有效的解释。

这些解释就是我们所说的*编码*。在第一种情况下，编码是 Windows-1250，而在第二种情况下，编码是 UTF-8。请允许我在此重申，这*两种编码都可能是正确的*。也许向您发送这些字节的人真的想说 ÂŁ。也许真的是英镑。也许它甚至完全是另外一回事，在不知道编码的情况下，你无法分辨那是什么。

这里的想法是：一个你不知道其编码的字节流基本上是无用的。

不幸的是，许多语言仍然允许您传递字节流并假装它们是文本。C++ 也不能幸免：std::string 类型，尽管名称具有误导性，但实际上是字节流。不要让名字欺骗你。

当您像文本一样传递字节时，最终负责显示该文本的子系统*将对*字节进行解码。（这是一条重要的经验法则：如果正在显示文本，则在*某处*对字节进行解码。）只有所说的子系统通常会使用默认编码（ASCII，Latin1），如果这不正确，那么这就是你最终的结果带有意想不到的字符。

而你的问题的核心正是：你正在获取Web服务器发送给你的字节流，*丢弃随之而来的编码信息，*并将字节盲目地传递给Qt。

当您尝试从 std::string 构建 QString 时，Qt 会尝试提供帮助并假设通常有效的通用编码。恕我直言，这不是一个好主意，因为它会导致您遇到的问题；我认为如果 QString 需要显式编码，从长远来看会更好。

所以在那之前，你必须以不同的方式解决你的问题。

值得庆幸的是，有一种已知的正确方法可以解决整个问题。

还记得我说过没有编码的字节流是没有意义的吗？好吧，Web 服务器通常*会*向您发送一个编码，作为 Content-Type HTTP 标头的一部分。类似的东西`Content-Type: text/html; charset=iso-8859-1`。

字符集是您的编码：在这里，它是 iso-8859-1，它是 Latin1 的另一个名称。

（注意：如果内容是 HTML，也可以在`http-equiv`meta header 标签中给出编码。如果该标签与 HTTP header 不一致，则假定 HTTP header 是正确的。）

您想立即使用该编码将这些字节转换为“实际”文本。

在越来越多的语言中，“实际”文本是一种特定类型，不同于字节流。然而，在 C++ 中，您只能靠自己。

管理文本的标准方法是将其从初始编码转码为 UTF-16，并将结果存储在 std::wstring 中。原因是 UTF-16 几乎可以毫无歧义地存储任何文本。（如果您改用 UTF-32，您将能够存储*任何*文本，包括使用罕见的旧亚洲字符的文本，但内存成本会增加一倍。）

老实说，我有点希望 libcurl 可以为你做这件事。其他语言的其他库确实返回正确解码的文本，而不是字节。但据我所知，这里没有这样的运气。

但！您不是在使用原始 C++，而是在使用 Qt，并且 Qt 带有用于正确处理文本的工具。

因此，您将尽早将字节转换为 QString，同时您手头还有编码，然后就可以了。QStrings 是正确的文本，而不是字节流；字节流的 Qt 类型是 QByteArray。

所以，告诉你什么，让我们完全放弃 wstrings，而只使用 QStrings。

为了解决您的问题 - 以及您将遇到的任何编码问题 - 您必须：

1/ 找出预期的编码；在您的情况下，您将解析 Content-Type 标头以找出编码。或者也许 libcurl 可以自己给你这些信息，我不知道。

2/ 立即使用它来解码内容。在您的情况下，使用 QTextCodec 将其解码为 QString。查看[QTextCodec 文档](http://qt-project.org/doc/qt-4.8/qtextcodec.html#details)以获取详细信息。

```
QTextCodec *codec = QTextCodec::codecForName( figured_out_encoding );
QString string = codec->toUnicode( byte_stream ); 
```

你完成了。`string`现在包含正确的、明确的文本。

这已经足够长了，所以我将停在那里而不涉及其他细节（如果服务器对 Content-Type 撒谎该怎么办，如果 Web 设计人员弄错了 http-equiv 标签怎么办）。上述方法已经解决了您将遇到的 95% 的编码问题，并且顺便说一下，让您领先于 95% 的编码人员。

希望这可以帮助！

# blackberry - 在 BlackBerry 的 ObjectChoiceField 中显示选项的完整文本？

> ID：12035089
> 
> 赞同：0
> 
> 时间：2012-08-20T09:21:28.597
> 
> 标签：blackberry, choicefield

![在此处输入图像描述](../Images/fcb104665625717a0282b59fd1ce7c22.png)

在我的应用程序中，我使用**ObjectChoiceField**。列表中的某些选项非常冗长，当我打开选项字段列表时，我看不到列表中选项的完整文本。此外，我将样式用作**ForceSingleLine**，以便在选择任何选项后，ObjectChoiceField 的高度不得翻倍。我知道这是列表的问题。

所以请建议我，我如何在黑莓的OCF中的任何选项列表中显示完整的文本。

# iphone - 特定市场上的新 iOS 应用程序是否会列在 App Store 的发布日期列表中？

> ID：12035092
> 
> 赞同：1
> 
> 时间：2012-08-20T09:21:36.007
> 
> 标签：iphone, ios, app-store

我有一个 iOS 应用程序，其中包含一些特定的国家内容。出于这个原因，到目前为止，我只将它提供给一个单一的国家市场。现在我正在为更多国家/地区添加内容，因此我将发布一个更新，这些更新也将在这些市场上可用。然后，该应用程序可以被视为这些额外市场上的“新”应用程序。

我的问题是这是否会反映在 App Store 上：该应用程序是否会列在之前未提供的市场的发布日期列表中？有没有人有类似情况的经验？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T11:39:32.980

不，不会的。只有在 iTunes Connect 中第一次接受捆绑 ID 时，它才会显示为新的。实际的应用商店在“新”名称中并不重要。

# android-layout - 强制 Android 模拟器在操作栏中显示溢出按钮

> ID：12035094
> 
> 赞同：4
> 
> 时间：2012-08-20T09:21:46.803
> 
> 标签：android-layout, android-emulator

我想用溢出按钮测试我的界面。溢出按钮仅在操作栏中的项目过多*且*设备没有菜单按钮时才会出现。有没有办法从 Android 模拟器中删除菜单按钮，或者强制显示溢出按钮？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-30T20:44:37.047

在 AVD 管理器中，编辑特定的 AVD>Hardware（选项列表单击添加或编辑）>Hardware Back /Home Keys =False

# c - 如何部署由 Visual C++ 2008 Express 编译的 C exe？

> ID：12035095
> 
> 赞同：0
> 
> 时间：2012-08-20T09:21:46.630
> 
> 标签：c, visual-studio-2008, deployment, dependencies

所以我已经成功编译并运行了我的应用程序。它在我的开发计算机上完美运行。

但是，当我尝试在另一台计算机上运行它时，它无法运行，我收到“应用程序无法正确启动（0xc0150002）”错误。

几个问题：

1.  我如何知道生成的 exe 是静态链接还是动态链接？
2.  我怀疑它是动态链接的。我将依赖的dll放在哪里？
3.  是否有可能将所有内容都放在一个 exe 中？

我知道我可能会在我自己和 Google 之间解决这个问题，但我真的没有时间进行这样的冒险。指出我正确的方向，我也许会投票给你的答案是最好的......

编辑：事实证明，其中一个 DLL（我自己编译的）被编译为调试，所以它缺少一些烦人的调试 DLL。我将它重新编译为 Release，一切正常。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-20T09:35:29.973

您应该获取并安装 MSVC Redistributable Package。它包含由 MSVS 编写和编译的应用程序所需的所有 DLL。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T09:36:04.660

当您在 Visual Studio 中调试|运行您的应用程序时 - 您将在`Output Window`. 然后你可以使用一个工具`Process Explorer`来查看你的应用程序在部署机器上实际加载了哪些 dll。比较两者 - 您将拥有导致问题的 dll。

您可以将您的应用程序与同一目录中的此 dll 耦合，也可以通过将其链接到相应的 .lib 文件来静态链接到它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T09:30:05.913

这似乎与某种缺失的 DLL 有关。

您可以在项目选项下确定编译器设置为链接哪些库：C++ >> 代码生成 >> 运行时库

此设置通常设置为多线程 DLL 或多线程静态以供您执行

依赖的 DLL 可以与可执行文件位于同一目录中，并且 Windows 将可靠地找到它们，尽管根据 DLL 的性质（由其他应用程序等使用）还有其他选项。

如果这是您的问题，应该可以通过喜欢等效的静态库使其作为单个 exe 运行：如果您有库的源代码，这很容易，因为您可以使用正确的设置编译它们，如果您只是使用 VC 的可再发行组件，那么应该有编译器附带的静态库，您可以通过更改上面的项目设置链接到它们。如果您有其他第三方库，则需要在相同编译器版本上找到使用相同设置编译的静态版本以使其可靠。

# algorithm - 如何从鼠标坐标接收细胞的等距索引？

> ID：12035096
> 
> 赞同：3
> 
> 时间：2012-08-20T09:21:48.097
> 
> 标签：algorithm, math, isometric

**我用瓷砖64x32**绘制等轴测图：

```
const Offset = 160;
int X, Y;

for (int a=0; a < 6; a++)
 for (int b=0; b < 6; b++) {
X = a * 32 - b * 32 + Offset;
Y = a * 16 + b * 16;
DrawTile(X, Y, tile);
 } 
```

*图片，说明此代码：http:* [//i.imgur.com/tgCxF.png](http://i.imgur.com/tgCxF.png)

亲爱的专业人士，请帮助在单元格的等距索引中转换鼠标坐标的公式。示例：(105; 100) -> [1; 4]。

谢谢。

**PS** *请原谅我的英语不好。我只是在学习...*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T09:57:19.817

你有两个基向量 p=(32,16) 和 q=(-32,16)。任何向量 r 都是 p 和 q 的线性组合：

```
r = a * p + b * q
components:
rx = a * 32 - b * 32 = (a - b) * 32
ry = a * 16 + b * 16 = (a + b) * 16
so your indexes are:
a = (2 * ry  + rx) div 64
b = (2 * ry  - rx) div 64
(div is integer division) 
```

**补充：** 请注意，我使用中间顶点作为坐标零并考虑到您的偏移量

# php - Mysql INSERT INTO 不起作用 - 语法正确

> ID：12035098
> 
> 赞同：2
> 
> 时间：2012-08-20T09:21:59.857
> 
> 标签：php, mysql, insert

我有一个简单的插入查询，它似乎输出了一个我找不到的错误，这让我抓狂:(

有人会帮助我吗？

错误是：

```
You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'WHERE `User_Id`='16'' at line 1 
```

查询是：

```
$insert = "INSERT INTO `pf_users` (`Task4`,`Task5`,`Task6`,`Task7`) VALUES ('$task4','$task5','$task6','$task7') WHERE `User_Id`='$GetUser'"; 
```

这是php代码：

```
if(empty($_POST) === false) {
    $task4 = sanitize($_POST['task4']);
    $task5 = sanitize($_POST['task5']);
    $task6 = sanitize($_POST['task6']);
    $task7 = sanitize($_POST['task7']);

    $GetUser = $_SESSION['User_Id'];

    //Query not inserting into database
    $insert = "INSERT INTO `pf_users` (`Task4`,`Task5`,`Task6`,`Task7`) VALUES ('$task4','$task5','$task6','$task7') WHERE `User_Id`='$GetUser'";

    echo "<pre>".$insert."</pre>";

    mysql_query($insert) or die(mysql_error()); 
} 
```

清理功能是`mysql_real_escape_string()`，`$task`值正在接收表单数据。

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-20T09:22:58.097

您不能`where`在插入中使用子句。

当您插入一行时，它只会添加所有内容。

如果要更新现有记录，*则*使用该`where`子句来确定要更新的记录。

```
$insert = "INSERT INTO `pf_users` (`Task4`,`Task5`,`Task6`,`Task7`) VALUES ('$task4','$task5','$task6','$task7')"; 
```

或者

```
$update = "update `pf_users` set `Task4`='$task4',`Task5`='$task5', `Task6`='$task6', `Task7`='$task7' where `User_Id`='$GetUser'"; 
```

编辑：因为我对这样一个简单的答案有太多的赞成票，所以我最好再更新一下。mySQL 中有一种语法可以让你*同时进行*插入和更新——或者更确切地说，它会选择你需要做的事情。它被称为“在重复键上插入...”，如下所示：

```
$insertOrUpdate="insert into pf_users (task4, task5, task6, task7) values ('$task4', '$task5', '$task6', '$task7')
    on duplicate key update task5='$task5', task6='$task6', task7='$task7'"; 
```

要使用它，您需要定义一个键 - 这可以是主键或复合键。该语法尝试插入一行，如果这违反了键限制，则更新它将插入的行。在上面的示例中，我假设它`task4`是主键，因此在查询的更新部分中省略了它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T09:24:31.533

`WHERE`在您的 sql 语句中删除。但是你可以`WHERE`在`INSERT...SELECT`声明中使用。

也许你想使用`UPDATE`

```
UPDATE  `pf_users`
SET `Task4` = '$task4'
    `Task5`= '$task5'
    `Task6`= '$task6'
    `Task7` = '$task7'
WHERE `User_Id`='$GetUser' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T11:54:40.467

插入查询从不包含 where 子句，如果您希望它使用。您必须使用更新查询。你也可以使用这个： -

```
$update = "UPDATE `pf_users` (`Task4`,`Task5`,`Task6`,`Task7`) VALUES ('$task4','$task5','$task6','$task7') WHERE `User_Id`='$GetUser'";
$result = mysql_query($update); 
```

或者你可以使用它。

```
$insert = "INSERT INTO `pf_users` SET `Task4` = '".mysql_real_escape_string($task4)."',`Task5`= '".mysql_real_escape_string($task5)."',`Task6`= '".mysql_real_escape_string($task6)."',`Task7`='".mysql_real_escape_string($task7)."'";
$result = mysql_query($insert); 
```

您可以根据需要对其进行编辑。希望它会帮助你。我尽量让你变得简单。此脚本中的安全功能可能不好，您必须为此做更多工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-20T09:24:43.820

你应该使用`update`而不是`insert`：

```
$insert = "UPDATE `pf_users` SET `Task4`='$task4',`Task5`='$task5'.... WHERE `User_Id`='$GetUser'"; 
```

# spring - spring security拦截url角色

> ID：12035099
> 
> 赞同：2
> 
> 时间：2012-08-20T09:22:04.697
> 
> 标签：spring, spring-mvc, spring-security

在 spring security intercept-url 配置中，如果我为特定路径定义了特定角色，比如 ROLE_USER，则只有当用户具有该权限时，该路径才应该可以访问。这是有道理的，但是如果我将角色设置为 ROLE_ANONYMOUS，`<intercept-url pattern="/resources/**" access="ROLE_ANONYMOUS"/>`即使用户经过身份验证，它是否也可以访问，比如当用户拥有 ROLE_USER 权限时？但这不会发生。

这是日志

```
Checking match of request : '/resources/js/test.js'; against '/resources/**'
Secure object: FilterInvocation: URL: /resources/js/test.js; Attributes: [ROLE_ANONYMOUS]
Previously Authenticated:   org.springframework.security.authentication.UsernamePasswordAuthenticationToken***********************************************
Voter: org.springframework.security.access.vote.RoleVoter@1712310, returned: -1 
```

然后我得到一个拒绝访问异常。我知道如果我添加`<intercept-url pattern="/resources/**" access="ROLE_ANONYMOUS,ROLE_USER"/>`我的 Http 配置它工作正常。但在上述情况下，是这样的还是我做错了什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T11:55:02.790

正确的写法是：

```
<intercept-url pattern="/resources/**" access="ROLE_ANONYMOUS,ROLE_USER"/> 
```

您可以查看[有关匿名身份验证的官方参考手册章节](http://static.springsource.org/spring-security/site/docs/3.1.x/reference/anonymous.html#anonymous-config)，您将在其中看到以下配置：

```
<bean id="filterSecurityInterceptor"
    class="org.springframework.security.web.access.intercept.FilterSecurityInterceptor">
  <property name="authenticationManager" ref="authenticationManager"/>
  <property name="accessDecisionManager" ref="httpRequestAccessDecisionManager"/>
  <property name="securityMetadata">
    <security:filter-security-metadata-source>
      <security:intercept-url pattern='/index.jsp' access='ROLE_ANONYMOUS,ROLE_USER'/>
      <security:intercept-url pattern='/hello.htm' access='ROLE_ANONYMOUS,ROLE_USER'/>
      <security:intercept-url pattern='/logoff.jsp' access='ROLE_ANONYMOUS,ROLE_USER'/>
      <security:intercept-url pattern='/login.jsp' access='ROLE_ANONYMOUS,ROLE_USER'/>
      <security:intercept-url pattern='/**' access='ROLE_USER'/>
    </security:filter-security-metadata-source>" +
  </property>
</bean> 
```

您对 ROLE_ANONYMOUS 和 ROLE_USER 的理解有点错误，请在[Spring Security 的开发人员之一 Luke Taylor 的这个答案](https://stackoverflow.com/a/3436554/708434)中阅读更多关于它们的信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-20T12:07:31.100

如果我没记错的话：不，在您的情况下，经过身份验证的用户不应访问仅受 access="ROLE_ANONYMOUS" 保护的资源。您必须明确告诉 spring 允许具有“ROLE_USER”的用户访问它。根据您使用的版本，也许您应该考虑使用[基于表达式的访问控制](http://static.springsource.org/spring-security/site/docs/3.0.x/reference/el-access.html)。这样，您只需使用 : access="permitAll()" 就可以让每个人都可以访问资源，恕我直言，这更简单。

# c++ - Com interop：为什么 tlibimp.exe 生成只读属性？

> ID：12035102
> 
> 赞同：3
> 
> 时间：2012-08-20T09:22:27.397
> 
> 标签：c++, delphi, com

我已经用 Visual Studio 创建了一个我想与 Delphi 一起使用的 COM 对象。

```
[Guid("9D0CCD2D-75E9-46AC-BC40-C4D84669FC45")]
[InterfaceType(ComInterfaceType.InterfaceIsIDispatch)]
public interface IMyComClassDispatch
{
    string PropertyString { get; set; }
    string funcGetString();
    void funcSetString(string aString);
}

[ClassInterface(ClassInterfaceType.None)]
public class MyComClassDispatch : IMyComClassDispatch
{
    public string PropertyString { get; set; }

    public string varString;

    public string funcGetString()
    {
        return varString;
    }

    public void funcSetString(string aString)
    {
        varString = aString;
    }
} 
```

然后我生成了 tlb 文件，最后生成了一个与我的 COM 对象对应的 pascal 文件，其中 tlibimp.exe 与 Delphi 5 捆绑在一起：

```
C:\>tlibimp.exe -P+ mylib.tlb 
```

这是生成的代码：

```
// *********************************************************************//
// DispIntf:  IMyComClassDispatch
// Flags:     (4096) Dispatchable
// GUID:      {9D0CCD2D-75E9-46AC-BC40-C4D84669FC45}
// *********************************************************************//
  IMyComClassDispatch = dispinterface
    ['{9D0CCD2D-75E9-46AC-BC40-C4D84669FC45}']
    property PropertyString: WideString readonly dispid 1610743808;
    function  funcGetString: WideString; dispid 1610743810;
    procedure funcSetString(const aString: WideString); dispid 1610743811;
  end; 
```

问题是我的属性被标记为只读，我真的不明白为什么会这样，因为这个工具还可以生成 C++ 代码并且可以修改属性：

```
// *********************************************************************//
// Interface   : IMyComClassDispatch
// Indicateurs : (4096) Dispatchable
// GUID        : {9D0CCD2D-75E9-46AC-BC40-C4D84669FC45}
// *********************************************************************//
interface IMyComClassDispatch : public TDispWrapper<IDispatch>
{
  BSTR __fastcall get_PropertyString()
  {
    _TDispID _dispid(/* PropertyString */ DISPID(DISPID_UNKNOWN/*[1610743808]*/));
    TAutoArgs<0> _args;
    OlePropertyGet(_dispid, _args);
    return _args.GetRetVariant();
  }

  void __fastcall set_PropertyString(BSTR Param1/*[in]*/)
  {
    _TDispID _dispid(/* PropertyString */ DISPID(1610743808));
    TAutoArgs<1> _args;
    _args[1] = Param1 /*[VT_BSTR:0]*/;
    OlePropertyPut(_dispid, _args);
  }

  BSTR __fastcall funcGetString()
  {
    _TDispID _dispid(/* funcGetString */ DISPID(DISPID_UNKNOWN/*[1610743810]*/));
    TAutoArgs<0> _args;
    OleFunction(_dispid, _args);
    return _args.GetRetVariant();
  }

  void __fastcall funcSetString(BSTR aString/*[in]*/)
  {
    _TDispID _dispid(/* funcSetString */ DISPID(DISPID_UNKNOWN/*[1610743811]*/));
    TAutoArgs<1> _args;
    _args[1] = aString /*[VT_BSTR:0]*/;
    OleProcedure(_dispid, _args);
  }

  __property   BSTR            PropertyString = {read = get_PropertyString, write = set_PropertyString};
}; 
```

这是否意味着我应该避免使用 COM 对象的属性，或者是否有任何我应该更改的选项？这是 tlibimp 的问题还是编译器的限制，无法生成在 COM 对象属性上写入的指令？

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T15:49:25.960

这是 Delphi 5 和 6 tlibimp.exe 中的已知缺陷。您应升级到 Delphi 7 或更新版本以避免它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T07:49:21.097

Tlibimp.exe 在 Delphi 5 中存在 bug，Borland/CodeGear/Embarcadero 不再提供支持...

一种解决方法是删除生成的 pas 文件上的只读标记。但是为了确保代码被正确调用，我做了一些修改以证明它可以工作：

*   在 COM 对象类中，在 setter 中写入一个文件：

    ```
    public string PropertyString
    {
        get { return varString; }
        set
        {
            varString = value;
            File.WriteAllText(@"C:\Users\elias\Documents\com.txt", varString);
        }
    } 
    ```

*   删除从 tlibimp.exe 生成的 .pas 文件中属性上的只读标记：

    ```
    // *********************************************************************//
    // DispIntf:  IMyComClassDispatch
    // Flags:     (4096) Dispatchable
    // GUID:      {9D0CCD2D-75E9-46AC-BC40-C4D84669FC45}
    // *********************************************************************//
      IMyComClassDispatch = dispinterface
        ['{9D0CCD2D-75E9-46AC-BC40-C4D84669FC45}']
        property PropertyString: WideString dispid 1610743808;
        function  funcGetString: WideString; dispid 1610743810;
        procedure funcSetString(const chaine: WideString); dispid 1610743811;
      end; 
    ```

*   然后你可以使用你的 COM 对象：

    ```
    var
      MyClass: IMyComClassDispatch;
    begin
      try
        MyClass:= CoMyComClassDispatch.Create;
        MyClass.PropertyString:= 'some value';
      finally
        MyClass._Release;
      end;
    end; 
    ```

并且文件正确写入！

现在是我项目中唯一遇到的问题，希望以后不会再有其他问题了……

# css - CSS 自适应网页布局问题

> ID：12035105
> 
> 赞同：0
> 
> 时间：2012-08-20T09:22:35.477
> 
> 标签：css

我有一个简单的问题，但我似乎找不到问题...我正在使用媒体查询来为我的网站导航栏提供自适应网络布局...现在我最小的媒体查询是最小：320px 和最大：480px ; 当视口大小为 480px 时，菜单栏宽度应从此处设置为 480px ......但是当宽度接近最后一个文本元素的长度时，最后一个文本元素被推到下一行并忽略我的固定设置宽度为 480 像素...

有什么建议么？请看我[的 JSFIDDLE](http://jsfiddle.net/wYx9u/)

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T09:46:00.340

它似乎对我来说工作正常，但尝试取出子类： .dropdown 并尝试修复高度，如下所示：

```
@media screen and (min-width: 320px) and (max-width: 480px){
    #page-wrap{
        width: 480px;
        height: 35px; /*make the height fixed as well*/
    }
} 
```

# javascript - 使用 Ajax 将 Javascript 变量提交到另一个 PHP 文件

> ID：12035108
> 
> 赞同：1
> 
> 时间：2012-08-20T09:22:37.927
> 
> 标签：javascript, jquery, ajax

```
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript">

$(document).ready( function () { //The page has been loaded...
    var ref = document.referrer; //Referrer
    var curpg = document.location.href; //Current page URL
    var dataSet = 'ref=' + ref + '&curpg=' curpg + '&shizz1e=21';

    $.ajax({
        type: "GET",
        url: "http://www.domainname.com/ajaxreceiver.php",
        data: dataSet
    });
    return false;
});
</script> 
```

我试图在页面加载后立即将“curpg”、“ref”和“shizz1e”变量提交给 ajaxreceiver.php，无需任何用户干预。我还试图避免刷新页面或将客户端重定向到 ajaxreceiver.php。我不确定为什么这段代码不起作用；dataSet 变量永远不会被发送到 ajaxreceiver.php。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T09:32:01.953

1）确保您的请求被实际发送 - 检查您的网络选项卡并添加这些处理程序以获得一些调试帮助：

```
$.ajax({/*...*/})
   .done(function()  { console.log("success"); })
   .fail(function(jqXHR, status)  { console.log("error: "+status); })
   .always(function(){ console.log("complete"); }); 
```

2）您是否不小心进行了禁止[的跨域呼叫](http://en.wikipedia.org/wiki/Same_origin_policy)？`http://www.domainname.com`并且`http://domainname.com`是导致此问题的常见示例。改用真实路径：`/ajaxreceiver.php`就足够了。

3) 提供您的 php 代码，以便我们检查其中的错误。也许你不小心使用`[POST]`了或者像这样的一些小错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T10:55:16.063

我将不得不查看您的服务器端 PHP 代码，因为您的 JavaScript 代码对我来说看起来不错。我认为它应该工作。

尝试这样重写它，虽然：

```
<script type="text/javascript" src="/path/to/jquery.js"></script>
<script type="text/javascript">
    $(document).ready( function () {
        var referrer = document.referrer;
        var current_page_url = $(location).attr('href');
        var data_object = {
            'ref':        referrer,
            'curpg':      current_page_url,
            'shizz1e':    '21'
        };

        $.ajax({
            'url':        "http://your.url.com/php_script.php",
            'data':       data_object,
            'success':    function (return_data) {
                // Do something on success.
            }
        });
    });
</script> 
```

在我看来，这只是更干净一点。请展示您的一些服务器端 PHP 代码，这样我真的可以帮助您找出问题所在。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T09:30:12.840

如果您要将 URL 作为参数发送，则必须使用[`encodeURI()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/encodeURI)or[`encodeURIComponent()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/encodeURIComponent)函数转义其中的某些字符。

# javascript - 指定 Ender 的安装路径

> ID：12035111
> 
> 赞同：0
> 
> 时间：2012-08-20T09:23:05.727
> 
> 标签：javascript, npm, ender

使用[Ender](http://ender.no.de/)时，我想指定一个安装包的目录。

完成这项工作的唯一方法似乎是`cd directory; ender build package`，但我可能错了？

理想情况下，我会有一个 package.json 文件，我可以在其中指定应放置依赖项的路径。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T07:27:36.610

现在您可以追加`--output path/to/ender`以指定路径。对于其他操作，例如添加/删除/列表，它是`--use`. 例如：

```
ender build qwery bean bonzo --output public/scripts/ender 
```

这将在 public/scripts 下创建 ender.js 和 ender.min.js 文件。

有关于使这个更好的讨论，例如，正如你提到的将路径放在 package.json 中。[您可以在github issue](https://github.com/ender-js/Ender/issues/131)上阅读相关内容。

同时，如果您使用 gruntjs，[也有一个插件](https://github.com/endium/grunt-ender)可以处理这个问题（免责声明：我编写了插件）。

# plot - Gnuplot：具有 2 个 y 轴的单个图中超过 2 个数据集

> ID：12035119
> 
> 赞同：8
> 
> 时间：2012-08-20T09:23:28.410
> 
> 标签：plot, range, gnuplot, axes

我有多个数据集要绘制在一个图中：

```
plot "data1a.txt", "data1b.txt", "data1c.txt", "data2.txt" 
```

我想要两个不同范围的 y 轴。

```
yrange=[0:10]
y2range=[-10:10] 
```

如果您只有两个数据集，这在 gnuplot 上很容易完成。第一个数据集使用`yrange`（其轴位于左侧），第二个数据集使用`y2range`（轴位于右侧）。

现在问题来了。我想绘制数据集`data1a.txt`、使用`data1b.txt`和使用。如何在具有两个 y 轴的单个图形上执行此操作？`data1c.txt``yrange``data2.txt``y2range`

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-20T09:50:59.423

如此[处所述](http://www.gnuplot.info/docs_4.2/gnuplot.html#x1-10100034)：

```
plot {<ranges>}  
      {<function> | {"<datafile>" {datafile-modifiers}}}  
      {axes <axes>} {<title-spec>} {with <style>}  
      {, {definitions,} <function> ...} 
```

您可以看到`axes`在 plot 命令中使用了 。在设置 y 轴的范围后

```
set yrange [y1min:y1max]
set y2range [y2min:y2max] 
```

您可以指定要在绘图中使用的轴

```
plot "data.txt" axes x1y1 
```

如果你想将它绘制在第一个 y 轴上，或者

```
plot "data.txt" axes x1y2 
```

如果你想将它绘制在第二个 y 轴上。

另请参阅[如何](http://folk.uio.no/hpl/scripting/doc/gnuplot/Kawano/plot1-e.html#5.2)在 gnuplot 中使用多轴的示例。

# javascript - 尝试创建事务时出现 DOM IDBDatabase 异常 11

> ID：12035125
> 
> 赞同：1
> 
> 时间：2012-08-20T09:23:41.483
> 
> 标签：javascript, html, indexeddb

我正在使用最新的 google chrome..我正在尝试实现 HTML5 indexedDB 示例。AIM 是在页面加载并在其中存储数据时创建数据库。如果有人有，请发布任何示例工作示例。我尝试了这段代码，但是`Uncaught Error: InvalidStateError: DOM IDBDatabase Exception 11`当我尝试创建交易时却得到了。这是代码片段..

```
var idbRequest;
    var idb;
$(document).ready(function(){
    //ini----------------------
     var peopleData = [
                       { name: "John Dow", email: "john@company.com" },
                       { name: "Don Dow", email: "don@company.com" }
                   ];
    window.indexedDB = window.indexedDB || window.mozIndexedDB || window.webkitIndexedDB;
    window.IDBKeyRange = window.IDBKeyRange || window.webkitIDBKeyRange;
    window.IDBTransaction = window.IDBTransaction || window.webkitIDBTransaction;
    //create database.............
    if (window.indexedDB) {
          idbRequest = window.indexedDB.open("StoreDB");
          idbRequest.onsuccess =  function(e) {
              idb = idbRequest.result || e.result;  // FF4 requires e.result. IDBRequest.request isn't set :(
          /*idbRequest.onerror = function (evt) {
                  console.log("IndexedDB error: " + evt.target.errorCode);
              };*/
              var v = '2.0';
                var setVrequest = idb.setVersion(v);
                setVrequest.onsuccess = function(e) {
                    if(idb.objectStoreNames.contains("Stores")) {
                        alert("ObjectStore is already created.");
                        return false;
                      }
                    var objectstore = idb.createObjectStore("Stores");
                    alert("Object store Created.");
                    if (!idb.objectStoreNames.contains('Stores')) {
                          alert("Object store doesn't exist.");
                        return;
                      }else{
                          alert("Object store contain 'store'");
                      }

                       // Create a transaction that locks the world.
                     var trans = idb.transaction(["Stores"],"readwrite");//getting exception on this line..
                     trans.oncomplete = function(){
                          console.log("Success transaction");
                        };
                        var objectStore = trans.objectStore("Stores");
                      var request = objectStore.put(
                          1,
                          "wsdsdsd");
                    alert("data added");
                };

            };

    }   
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T12:01:45.340

解决了..我收到错误，因为在版本更改正在进行时我们无法创建事务..这是最终的工作答案..

```
var idbRequest;
    var idb;
$(document).ready(function(){
    //ini----------------------

    window.indexedDB = window.indexedDB || window.mozIndexedDB || window.webkitIndexedDB;
    window.IDBKeyRange = window.IDBKeyRange || window.webkitIDBKeyRange;
    window.IDBTransaction = window.IDBTransaction || window.webkitIDBTransaction;
    //create database.............
    if (window.indexedDB) {
          idbRequest = window.indexedDB.open("DB");
          idbRequest.onsuccess =  function(e) {
              idb = idbRequest.result || e.result;  // FF4 requires e.result. IDBRequest.request isn't set :(
          /*idbRequest.onerror = function (evt) {
                  console.log("IndexedDB error: " + evt.target.errorCode);
              };*/
              var v = '2.0';
                var setVrequest = idb.setVersion(v);
                setVrequest.onsuccess = function(e) {
                    if(idb.objectStoreNames.contains("Stores")) {
                        alert("ObjectStore is already created.");
                        var vertrans = setVrequest.result;
                        vertrans.oncomplete = doStuff;
                        return false;
                      }
                    var objectstore = idb.createObjectStore("Stores");
                    alert("Object store Created.");
                    if (!idb.objectStoreNames.contains('Stores')) {
                          alert("Object stores doesn't exist.");
                        return;
                      }else{
                          alert("Object store contain 'stores'");
                      } 
                    var vertrans = setVrequest.result;
                    vertrans.oncomplete = doStuff;
                };

            };

    }   
});

function doStuff(){
       // Create a transaction that locks the world.
    var trans = '';

         trans = idb.transaction(['Stores'],'readwrite');

     var objectStore = trans.objectStore('Stores');
      var request = objectStore.put(
          1,
          "wsdsdsd");
    alert("data added");
     trans.oncomplete = function(){
          console.log("Success transaction");
        };
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T12:05:26.047

[您可以在我的网站](http://linq2indexeddb.kristofdegrave.be)上找到一个有效的 indexeddb 示例。我正在使用我为 indexeddb API 编写的库，名为[linq2indexeddb](http://linq2indexeddb.codeplex.com)。试一试，它将为您节省大量精力，使您的代码 crossborwser 兼容。

# android - 尝试将值从一个活动传递到另一个活动时出现 NullPointer 异常

> ID：12035129
> 
> 赞同：0
> 
> 时间：2012-08-20T09:23:59.107
> 
> 标签：android, android-intent

我正在尝试实现一个`onItemClicklister()`，当单击一个项目时，文本值会从一个活动转移到另一个活动。下面是代码片段。

```
public void onItemClick(AdapterView<?> parent, View view,
                    int position, long id) {

                String name = ((TextView) view.findViewById(R.id.title)).getText().toString();
                String cost = ((TextView) view.findViewById(R.id.artist)).getText().toString();
                String description = ((TextView) view.findViewById(R.id.duration)).getText().toString();

                // Starting new intent
                Intent in = new Intent(getApplicationContext(), SingleMenuItemActivity.class);
                in.putExtra(KEY_TITLE, name);
                in.putExtra(KEY_ARTIST, cost);
                in.putExtra(KEY_DURATION, description);
                startActivity(in);

            }
        }); 
```

下一个活动

```
public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
//        setContentView(R.layout.single_list_item);

        // getting intent data
        Intent in = getIntent();

        // Get JSON values from previous intent
        String name = in.getStringExtra(KEY_TITLE);
        String cost = in.getStringExtra(KEY_ARTIST);
        String description = in.getStringExtra(KEY_DURATION);

//         Displaying all values on the screen
        TextView lblName = (TextView) findViewById(R.id.name_label);
        TextView lblCost = (TextView) findViewById(R.id.email_label);
        TextView lblDesc = (TextView) findViewById(R.id.mobile_label);

        lblName.setText(name);
        lblCost.setText(cost);
        lblDesc.setText(description);
    } 
```

但它抛出一个

```
E/AndroidRuntime(  626): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.eve_haps/com.example.eve_haps.SingleMenuItemActivity}: java.lang.NullPointerException
E/AndroidRuntime(  626):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1956)
E/AndroidRuntime(  626):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
E/AndroidRuntime(  626):    at android.app.ActivityThread.access$600(ActivityThread.java:123)
E/AndroidRuntime(  626):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
E/AndroidRuntime(  626):    at android.os.Handler.dispatchMessage(Handler.java:99)
E/AndroidRuntime(  626):    at android.os.Looper.loop(Looper.java:137)
E/AndroidRuntime(  626):    at android.app.ActivityThread.main(ActivityThread.java:4424)
E/AndroidRuntime(  626):    at java.lang.reflect.Method.invokeNative(Native Method)
E/AndroidRuntime(  626):    at java.lang.reflect.Method.invoke(Method.java:511)
E/AndroidRuntime(  626):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
E/AndroidRuntime(  626):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
E/AndroidRuntime(  626):    at dalvik.system.NativeStart.main(Native Method)
E/AndroidRuntime(  626): Caused by: java.lang.NullPointerException
E/AndroidRuntime(  626):    at com.example.eve_haps.SingleMenuItemActivity.onCreate(SingleMenuItemActivity.java:32)
E/AndroidRuntime(  626):    at android.app.Activity.performCreate(Activity.java:4465)
E/AndroidRuntime(  626):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
E/AndroidRuntime(  626):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920) 
```

我似乎不知道问题是什么。提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T09:26:40.183

Un Comment 以下来自**SingleMenuItemActivity 的** `onCreate()`代码行。

```
setContentView(R.layout.single_list_item); 
```

我认为你`TextViews`是空的。

**NullPointerException**来自这些行，

```
lblName.setText(name);
lblCost.setText(cost);
lblDesc.setText(description); 
```

# sql - 创建数据库表

> ID：12035131
> 
> 赞同：8
> 
> 时间：2012-08-20T09:24:05.227
> 
> 标签：sql, database, normalization, database-table

我正在创建一个用于调查的数据库表，我需要记录报告事件的人，这可能是来自供应商或用户表的记录。最简单的方法是在我的调查表中同时包含一个 suppleir 和一个用户 id 列，但这似乎是错误的，有什么更好的方法来做到这一点？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T09:36:24.093

你可以有另外两个表 -`IncidentsReportedBySupplier (IncidentID, SupplierID)`和`IncidentsReportedByUser (IncidentID, UserID)`- 这将删除空列。

但这也有缺点。然后，您可能会遇到任何人都没有报告的事件。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-21T09:18:43.807

我不知道为什么您的选择“似乎是错误的”。我通常更喜欢您的方法，而不是使用带有 FK 的列而不是多个表。您的方法虽然可能需要在另一列中使用空值，但更加直接和明显。无需任何文件。没有不必要和多余的表格......只是一个额外的列。

一般的经验法则，更少的表格 = 更少的关系你必须担心 = 更少的头痛。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-08-20T09:39:32.703

如果供应商和用户表都具有互斥的唯一 ID 号，则可以有一个使用该 ID 作为“报告者”的列。

如果它们都具有可能具有重叠值的唯一 ID 号，则可以使用两列作为 ID，例如：

```
`reporter_id`,
`reporter_type` 
```

其中类型可以是类似`s`或`u`反映表名的值。这也将消除您建议的方法创建的所有那些空值。

最后，如果他们两个表都没有唯一的 ID 号，给他们一个！关于人的数据表使用主键效果更好！

# java - 在 Spring Security 中使用自定义异常

> ID：12035133
> 
> 赞同：5
> 
> 时间：2012-08-20T09:24:10.017
> 
> 标签：java, spring-security

我创建了一个自定义`AuthenticationProvider`来执行自定义安全检查。我还创建了继承自的自定义异常，`AccountStatusException`以通知用户状态问题，例如当用户在特定时间段内没有验证他的帐户时。我也是一个自定义`UserDetails`实现。

这是我执行的安全检查的代码。与案例无关的代码已被省略。

```
public class SsoAuthenticationProvider implements AuthenticationProvider {

    public Authentication authenticate(Authentication authentication) throws AuthenticationException {
        String username = (String) authentication.getPrincipal();
        User user = null;
        if (username != null) {
            user = getUserRepository().findByUserName(username);
            if (user != null) {
                if (user.getEnabled() != 0) {
                    if ((user.getUserDetail().getConfirmed() != 0)
                            || ((new Date().getTime() - user.getUserDetail().getRequestDate().getTime()) / (1000 * 60 * 60 * 24)) <= getUnconfirmedDays()) {
                        if (getPasswordEncoder().isPasswordValid(user.getPassword(),
                                (String) authentication.getCredentials(), user)) {
                            user.authenticated = true;
                            user.getAuthorities();
                        }
                    } else {
                        throw new UserNotConfirmedAndTimeExceeded(
                                "User has not been cofirmed in the established time period");
                    }
                } else {
                    throw new DisabledException("User is disabled");
                }
            } else {
                throw new BadCredentialsException("User or password incorrect");
            }
        } else {
            throw new AuthenticationCredentialsNotFoundException("No credentials found in context");
        }
        return user;
    }
} 
```

`SsoAuthenticationProvider`检查：

1.  用户名已注册（存在于数据库中）
2.  用户已确认他的电子邮件
3.  如果用户尚未确认他的电子邮件，请检查他是否仍处于宽限期（这是我们给用户确认电子邮件的几天，同时让他们访问该网站）
4.  如果用户尚未确认电子邮件并且他不在宽限期内，则抛出安全异常以指示这些状态并拒绝身份验证

问题是并非所有这些异常都被抛出堆栈到控制器，因此似乎不可能通知用户有关登录问题。

使用`UserDetails`诸如`isEnabled()`（和类似的）方法是不可能的，因为我们不同用户帐户状态的语义是完全不同的。

这是使用自定义异常构建自定义安全性的正确方法吗？我应该实施其他方法来完成这项工作吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-18T15:58:04.993

为了结束之前提出的问题，让我解释一下我们做了什么。正如我对之前的回复所评论的那样，在 UserDetails 对象中使用提供的方法是不可行的，因为您无法使用给定的方法捕获所有登录失败语义。在我们的案例中，这些语义仍然非常有限，但在其他情况下，它可以随着时间的推移无限延伸以表达不同的用户情况。异常方法最终是最好的方法。最终代码如下所示

```
 public Authentication authenticate(Authentication authentication) throws AuthenticationException {
    String username=(String)authentication.getPrincipal();
    User user=null;
    if(username!=null){
        user=getUserRepository().findByUserName(username);
        if(user!=null){
            if(user.getEnabled()!=0){
                if((user.getUserDetail().getConfirmed()!=0)||((new Date().getTime()-user.getUserDetail().getRequestDate().getTime())/(1000 * 60 * 60 * 24))<=getUnconfirmedDays()){
                    if(getPasswordEncoder().isPasswordValid(user.getPassword(), (String)authentication.getCredentials(), user)){
                        user.authenticated=true;
                        user.getAuthorities();
                    } else {
                        throw new BadCredentialsException("Password incorrect");
                    }
                }else{
                    throw new UserNotConfirmedAndTimeExceeded("User has not been cofirmed in the established time period");         
                }
            }else{
                throw new DisabledException("User is disabled");
            }
        }else{
            throw new BadCredentialsException("User does not exist");
        }
    }else{
        throw new AuthenticationCredentialsNotFoundException("No credentials found in context");
    }
    return user;
} 
```

所有异常都是 Spring Security 异常堆栈的一部分。也就是说，那些自定义异常继承自一些现有异常。然后，在您的安全控制器中，您应该检查安全异常并根据需要处理它们。例如重定向到不同的页面。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-22T08:39:27.307

我认为最好为此目的使用[用户详细信息](http://static.springsource.org/spring-security/site/docs/3.1.x/apidocs/org/springframework/security/core/userdetails/UserDetails.html)对象的其他方法/属性。像

```
isAccountNonExpired() 
isAccountNonLocked() 
isEnabled() 
```

如果您想显示自定义错误消息，请使用[本文中解释的消息属性](http://www.mkyong.com/spring-security/display-custom-error-message-in-spring-security/)

# java - 尝试使用 Hibernate 和 PostgreSQL 执行存储过程时出错

> ID：12035135
> 
> 赞同：1
> 
> 时间：2012-08-20T09:24:17.627
> 
> 标签：java, hibernate, postgresql

我正在尝试使用休眠（Java Persistence API）和 postgreSQL 执行存储过程。我的映射文件如下所示：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
"http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">
<hibernate-mapping>
<sql-query name="getnotificaciones" callable="true">
<return alias="notificacion"
class="tempranillo.entidades.sistemanotificaciones.NotificacionDB" lock-mode="read">
<return-property name="fecha" column="fecha"/>
<return-property name="notificacion" column="notificacioncolumn"/>
<return-property name="xmlnotificacion" column="xmlcolumn"/>
</return>
{call getnotificaciones(:idusuario)}
</sql-query>
</hibernate-mapping> 
```

存储过程如下图所示：

```
CREATE OR REPLACE FUNCTION getNotificaciones(idusuario  int4,
OUT fecha               date,
OUT notificacioncolumn  varchar,
OUT xmlcolumn           xml
)
RETURNS SETOF record
AS $$
SELECT 
   INFONOT.fecha, 
   INFONOT.notificacion, 
xmlelement (name notificacion, xmlattributes(current_date as "fecha",
INFONOT.xmlTipoNotificacion as "tipoNotificacion"),
   xmlelement (name infovino,
     xmlforest(
                 tvinos.idvino,
                 tvinos.nombre,
                 tvinos.tipovino,
                 tvinos.anio,
                 tvinos.variedad,
                 tvinos.zona,
                 tvinos.pais)
                 ),
     xmlelement (name infousuario,
     xmlforest(
                 tusuarios.idusuario,
                 tusuarios.ALIAS)
                 ),
     xmlelement (name infologro,
     xmlforest(
               tlogros.idlogro,
               tlogros.nombrelogro,
               tlogros.descripcion
                 )
               )
     )
FROM
public.tusuarios
INNER JOIN 
(SELECT DISTINCT(xpath('//Notificacion/usuarioOrigina
/id/text()',xmlnotificacion::xml))[1]::varchar::int4 as xmlidusuario, 
             (xpath('//Notificacion/vino/idvino/text()',xmlnotificacion::xml
[1]::varchar::int4 as XMLIDVINO, 
             (xpath('//Notificacion/tipoNotificacion/text()',xmlnotificacion::xml
[1]::varchar as xmlTipoNotificacion,
             (xpath('//Notificacion/Logro/IdLogro/text()',xmlnotificacion::xml
[1]::varchar::int4 as xmlIdLogro,
             public.tnotificacion.idnotificacion,
             public.tnotificacion.fecha,
             public.tnotificacion.notificacion
FROM  
  public.tamistad  RIGHT OUTER JOIN public.tnotificacion ON
(public.tamistad.idamigo=     public.tnotificacion.idusuario) 
WHERE  (public.tamistad.idusuario = $1 OR   public.tnotificacion.idusuario = $1) AND
public.tnotificacion.xmlnotificacion IS NOT NULL)  AS INFONOT 
ON (public.tusuarios.idusuario = INFONOT.xmlidusuario)
LEFT OUTER JOIN public.tvinos 
on (public.tvinos.idvino = INFONOT.xmlidvino)
LEFT OUTER JOIN public.tlogros
on (public.tlogros.idlogro = INFONOT.xmlIdLogro) 
ORDER BY 
INFONOT.fecha DESC;          
$$ LANGUAGE SQL; 
```

java中声明的实体如下：

```
package tempranillo.entidades.sistemanotificaciones;

public class NotificacionDB implements Serializable {

    public NotificacionDB() {
    }

    public NotificacionDB(int idusuario,
                            Date fecha,
                            String notificacion) {
        this.idusuario = idusuario;
        this.fecha = fecha;
        this.notificacion = notificacion;
    }

     public NotificacionDB(int idusuario,
                            Date fecha,
                            String notificacion,
                            String xmlnotificacion) {
        this.idusuario = idusuario;
        this.fecha = fecha;
        this.notificacion = notificacion;
        this.xmlnotificacion = xmlnotificacion;
    }

    private int idnotificacion;

    public int getIdnotificacion() {
        return idnotificacion;
    }

    private void setIdnotificacion(int idnotificacion) {
        this.idnotificacion = idnotificacion;
    }
    private int idusuario;

    public int getIdusuario() {
        return idusuario;
    }

    public void setIdusuario(int idusuario) {
        this.idusuario = idusuario;
    }
    private Date fecha;

    public Date getFecha() {
        return fecha;
    }

    public void setFecha(Date fecha) {
        this.fecha = fecha;
    }
    private String notificacion;

    public String getNotificacion() {
        return notificacion;
    }

    public void setNotificacion(String notificacion) {
        this.notificacion = notificacion;
    }

    private String xmlnotificacion;

    public String getXmlnotificacion() {
        return xmlnotificacion;
    }

    public void setXmlnotificacion(String xmlnotificacion) {
        this.xmlnotificacion = xmlnotificacion;
    }

} 
```

当我尝试执行以下代码时：

```
 Query query = sesion.getNamedQuery("getnotificaciones");
   query.setInteger("idusuario", idusuario);
   List listanotificaciones = query.list(); 
```

我总是得到同样的错误：`There is a problema with the postgreSQLDialect`。

我尝试过，`select * from getnotificaciones (:idusuario)`但在这种情况下，我收到“无法执行查询”错误消息。

谁能帮我？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T19:18:26.637

似乎 Java 不能接受您`RETURNS SETOF record`，您可以找到该部分的一些参考资料。

# java - 字符串的有序固定长度组合

> ID：12035147
> 
> 赞同：-2
> 
> 时间：2012-08-20T09:25:01.403
> 
> 标签：java, c++, c, string, combinations

我需要编写一个函数来查找字符串的可能固定长度组合。需要的是并非所有组合都是必需的。例如，如果字符串是“abcde”，我们需要长度为 3 的组合，那么函数必须返回以下内容：

```
abc
abd
abe
acd
ace
ade
bcd
bde
bce
cde 
```

没有别的。我一直在尝试使用递归，但事情并没有按预期进行。我也看到了一些类似的问题，但无法从中得到太多。算法或代码（C、C++、Java），欢迎任何帮助。谢谢。！

注意：需要订购组合。也就是说，字符应遵循与输入字符串中相同的顺序。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T09:36:53.693

在有三个输入的情况下，您有三个索引，最初设置为输入字符串的前三个索引。打印出来，然后将最后一个索引加一，然后打印出所有索引。继续直到到达输入字符串的末尾，然后增加第二个索引并在第二个之后将第三个重置为下一个。继续直到第二个索引是倒数第二个字符，然后增加第一个索引，并将第二个和第三个连续放置在第一个之后。继续...

让我试着说明一下：

```
输入：[abcde]
         ^^^
         123

输出：abc

下一次迭代：

输入：[abcde]
         ^^ ^
         12 3

输出：abd

下一次迭代：

输入：[abcde]
         ^^ ^
         12 3

输出：阿贝

下一次迭代：

输入：[abcde]
         ^^^
         1 23

输出：acd

下一次迭代：

输入：[abcde]
         ^ ^ ^
         1 2 3

输出：王牌

下一次迭代：

输入：[abcde]
          ^^^
          123

输出：bcd

下一次迭代：

输入：[abcde]
          ^^ ^
          12 3

输出：公元前

下一次迭代：

输入：[abcde]
          ^^^
          1 23

输出：bde

下一次迭代：

输入：[abcde]
           ^^^
           123

输出：cde

```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T09:32:54.497

1.  由于您的要求是 3 的特定长度，因此将您分成`String`3 块，然后应用算法。

2.  从你的 3 个字符中取出一个字符`String`，并计算剩余 2 个字符的可能排列。

3.  将该字符放在计算排列的所有可能位置上。

4.  重复上面。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T09:54:02.850

```
#include <iostream>
#include <algorithm>
#include <string>
#include <vector>

int main()
{
    char buf[6] = "abcde";
    int len = strlen(buf);
   // std::vector<std::string> char_list;
    for(int i = 0; i < len; ++i){
        for(int j = i+1; j < len;++j){
                //if (i==j)continue;
                for(int k = j+1; k < len;++k){
                        //if(i == k || j == k)
                        //      continue;
                        char temp[4]="";
                        temp[0] = buf[i];
                        temp[1] = buf[j];
                        temp[2] = buf[k];
                        temp[3] = '\0';
                        std::cout << temp << std::endl;
                        //show(temp,3);
                        //char_list.push_back(key);
                }
        }
    }

    return 0;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-20T12:05:05.500

我希望可以做得更好，但这是我可以很快想到的。

我用 a`List`来保持秩序，不得不尴尬地避免重复。使用 a`Set`可以让我们跳过`result.contains(s)`检查，但更好的算法可能会以更简洁的方式避免重复。

```
private static List<String> substrings(int i, String input) {
    List<String> result = new ArrayList<String>();
    if (i == 0)
        return result;

    String first = input.substring(0, i);
    result.add(first);

    if (input.length() == i) {
        return result;
    }

    // Recursively find substrings of next smaller length not including the first character
    List<String> tails = substrings(i-1, input.substring(1));

    // Append first char to each result of the recursive call.
    for (String sub: tails) {
        String s = input.substring(0, 1) + sub;
        if (!(result.contains(s)))
            result.add(s);
    }

    // Add all substring of current length not including first character
    result.addAll(substrings(i, input.substring(1)));
    return result;
} 
```

# objective-c - 在存在ARC的情况下初始化iVar变量的正确方法是什么

> ID：12035149
> 
> 赞同：1
> 
> 时间：2012-08-20T09:25:20.230
> 
> 标签：objective-c, ios, initialization, automatic-ref-counting, ivar

示例 iVar `foo`,

```
@property (nonatomic) NSString* foo; // inside .h 
```

**选项1**

```
@Synthesize foo; //Inside .m 

foo = [[NSString alloc] init]; // viewDidLoad method 
```

**选项 2**

```
@Synthesize foo; //Inside .m 

self.foo = [[NSString alloc] init]; // viewDidLoad method 
```

**选项 3**

```
@Synthesize foo = _foo; //Inside .m 

_foo = [[NSString alloc] init]; // viewDidLoad method 
```

### 为什么？

在很多地方，我看到代码有不同的方法在 Obj - C 中初始化一个对象，但哪一个是最好的做法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-20T09:30:18.773

在这方面，ARC 与 MRC 相同。

您已指定所有这些发生在`viewDidLoad`. 在这种情况下，请使用 setter（选项 2）。

如果您要在初始化程序中初始化/设置，那么您将使用直接访问。基本原因是在*初始化程序*（例如`-init`）中，您有一个部分初始化的对象。在初始化期间，您希望专注于初始化您的类需要或期望的变量，以便正确运行。同样，您希望避免在部分构造状态下使用访问器时可能遇到[的副作用。](https://stackoverflow.com/questions/5932677/initializing-a-property-dot-notation/5932733#5932733)

在完全构造的状态（例如`viewDidLoad`）中，您应该将实现委托给访问器以获得正确的行为，如您的对象接口所指定的那样。

* * *

补充阅读：

[初始化属性，点表示法](https://stackoverflow.com/questions/5932677/initializing-a-property-dot-notation/5932733#5932733)

[我应该在 ARC 的 init 方法中引用 self.property 吗？](https://stackoverflow.com/questions/8056188/should-i-refer-to-self-property-in-the-init-method-with-arc/8056260#8056260)

[为什么要使用 ivar？](https://stackoverflow.com/questions/9086736/why-would-you-use-an-ivar/9086811#9086811)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T09:56:48.787

我认为你应该了解这三者之间的区别，然后决定哪一个对你有好处。

选项 1：在初始化时，您没有使用合成器方法。所以在 .h 和 .m 中声明属性合成器是没有用的

选项 2：这里您使用的是属性合成器。但是访问实例和实际实例变量的方法的名称是相同的。

选项 3：这里您再次没有使用属性合成器方法。这里 foo 是方法的名称， _foo 是实际的实例。

在我看来，第三个是好的。由于您的差异，您可以决定哪一个对您有好处。

# mysql - Hibernate Criteria：从具有外键关系的两个表中选择？

> ID：12035152
> 
> 赞同：1
> 
> 时间：2012-08-20T09:25:33.243
> 
> 标签：mysql, hibernate, hibernate-criteria

我的 mysql 数据库中有 2 个表：

```
1.teacher(id(pk),name,phone,email)
2.student(id(pk),teacher'sid(FK),name,phone,email) 
```

学生表有一个外键，即teacher'sid，它引用了teacher.id。

我想选择他们的 id(teachers.id) 与 (student.teacher'sid) 相同的老师，其中 student.name = "Steven"。

我已经创建了两个具有与表相同的类名和属性的类，并且我已经配置了映射。

```
@Entity
class teacher {
@Id
int id;
String name;
String phone;
String email;
}

@Entity
class student {
@Id
int id;
int teachersid;
String name;
String phone;
String email;
} 
```

我可以通过以下方式选择他的名字是“史蒂文”的学生：

```
Criteria q = session.createCriteria(student.class).add(
                Restrictions.eq("name", "stevens")); 
```

怎样才能找回“史蒂文”的老师？就像是

```
(select * from teacher(where teacher.id = student.teachersid(where student.name="stevens"))) 
```

，但使用 Hibernate Criteria Api。

提前致谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-20T11:01:50.817

```
Criteria c = s.createCriteria(Teacher .class,"tchr");
c.createCriteria("students", "s");//Teacher class should contain students collection
c.add(Restrictions.eq("s.name", "Ashok"));
List l=c.list(); 
```

希望这会帮助你。如果您有任何问题，请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T09:57:30.763

您的 Hibernate 实体类没有正确反映表之间的关系。Student 实体看起来应该类似于

```
@Entity
class student {
@Id
int id;
teacher teach;
String name;
String phone;
String email;
} 
```

正确修改实体后，hibernate 会自动在表之间发出联接。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T09:58:18.007

我认为最简单的方法是使用教师实体作为主要实体并应用 sqlRestriction 来过滤此表。我认为您不能直接从学生类中使用标准和限制，因为您要检索的是教师实体，并且在教师-> 学生这个方向上没有映射。

我认为这对你有用：

```
Criteria q = session.createCriteria(teacher.class)
          .add( Restrictions.sqlRestriction("exists (select 1 
                from student_table s where    s.teachersid = {alias}.id 
                and s.student_name=?", "stevens", Hibernate.STRING) ) 
```

# php - 使用foreach进行复杂的多维数组处理

> ID：12035154
> 
> 赞同：0
> 
> 时间：2012-08-20T09:25:41.483
> 
> 标签：php, arrays, multidimensional-array, foreach

我在尝试处理此数组时遇到问题尝试了几种不同的方法，但都没有正确的方法，这是数组

```
Array ( 
  [search] => Array ( 
    [response] => Array ( 
      [errors] => 
      [number_of_hotels] => 1 of 1 
    ) 
    [lr_rates] => Array ( 
      [hotel] => Array  ( 
        [hotel_ref] => 3116 
        [hotel_currency] => [U] => USD 
        [hotel_rooms] => Array ( 
          [room] => Array ( 
            [ref] => 6382 
            [type] => 1 
            [type_description] => Standard 
            [sleeps] => 8 
            [rooms_available] => 
            [adults] => 8 
            [children] => 
            [breakfast] => false 
            [dinner] => false 
            [description] => 
            [alternate_description] => 
            [rack_rate] => 82.01 
            [date] => 19/08/201220/08/201221/08/2012
            [numeric_hotelcurrencyprice] => FullFullFull
            [formatted_date] => 19 August 201220 August 201221 August 2012 
            [price] => FullFullFull
            [hotelcurrencyprice] => FullFullFull 
            [numeric_price] => FullFullFull
            [requested_currency] => GBPGBPGBP 
            [numeric_hotelcurrencyprice] => FullFullFull
            [available_online] => false 
            [minimum_nights] => 1 
            [bed_type] => 
            [cancellation_policy] => 
            [cancellation_days] => 
            [cancellation_hours] => 
            [room_terms] => 
          )
          [room] => Array ( 
            [ref] => 6382 
            [type] => 1 
            [type_description] => Standard 
            [sleeps] => 8 
            [rooms_available] => 
            [adults] => 8 
            [children] => 
            [breakfast] => false 
            [dinner] => false 
            [description] => 
            [alternate_description] => 
            [rack_rate] => 82.01 
            [date] => 19/08/201220/08/201221/08/2012
            [numeric_hotelcurrencyprice] => FullFullFull
            [formatted_date] => 19 August 201220 August 201221 August 2012 
            [price] => FullFullFull
            [hotelcurrencyprice] => FullFullFull 
            [numeric_price] => FullFullFull
            [requested_currency] => GBPGBPGBP 
            [numeric_hotelcurrencyprice] => FullFullFull
            [available_online] => false 
            [minimum_nights] => 1 
            [bed_type] => 
            [cancellation_policy] => 
            [cancellation_days] => 
            [cancellation_hours] => 
            [room_terms] => 
          )
        ) 
        [cancellation_type] => First Night Stay Chargeable 
        [cancellation_policy] => 2 Days Prior to Arrival 

        [CityTax] => Array ( 
          [TypeName] => 
          [Value] => 
          [OptedIn] => 
          [IsCityTaxArea] => 
        )
      )
    )
  ) 
) 
```

好的，我需要遍历数组并创建一个循环，因此对于每个房间实例，它将重复该过程然后我需要从房间数组中提取数据并使用它来填充 MySQL 中的行，这将是多个房间实例到目前为止，我有代码打印房间数组中的名称和值，但它只获取房间数组之一我可以做些什么来设置它来阅读它们，我也认为这对于每个人来说太多了，但不要'似乎无法遍历 ['']['']['']... 或仅使用关联名称。

```
foreach($arr['search'] as $lr_rates) {
        foreach($lr_rates['hotel'] as $hotel) {
                   foreach($hotel['room'] as  $field => $value){
                     print $field;print $value;
                          }

             }
      } 
```

还值得一提的是，这些数组中的值总是在波动

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T12:03:40.057

您不必在脚本中使用太多 foreach 循环，因为它看起来不太好。这是一个关联数组。您可以使用其键简单地访问关联数组。为它做一些谷歌。你可以找到很多关于这个的脚本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-20T09:32:08.197

```
foreach($arr as $search) {
    foreach($search as $lr_rates) {
        foreach($lr_rates as $hotel) {
                 foreach($hotel as $hotel_rooms) {
                      print_r($hotel_rooms['room'])
                  }
            }
     }
} 
```

编辑：这些许多`foreach`循环只是为了了解如何到达`room`. 当然也可以直接得到结果。

`print_r($arr['search']['lr_rates']['hotel']['hotel_rooms']['room']);`

# google-places-api - 来自服务器请求的 Google 地方信息 REQUEST_DENIED - 没有任何效果

> ID：12035157
> 
> 赞同：2
> 
> 时间：2012-08-20T09:25:51.340
> 
> 标签：google-places-api, google-places

经过数小时的搜索和尝试在网络上找到的所有可能的解决方案，我无法为我的问题尝试任何其他方法，所以我真的需要帮助：

我想用地理编码结果实现一个简单的自动完成文本框，所以我在用户在文本框中键入时调用 AJAX 请求

*   我已从 Google API 控制台启用了 Google 地图和 Google 地方信息
*   我使用我的服务器 IP 为服务器应用程序创建了一个密钥
*   我在服务器上运行了一个 PHP 文件（通过 AJAX 调用），它使用 file_get_contents() 函数（启用了 SSL）将请求发送到 Google Places - 也尝试使用 cURL 函数
*   我要求的要求是

[https://maps.googleapis.com/maps/api/place/autocomplete/json?input=MY_SEARCH_STRING&language=us&types=geocode&sensor=false&key=MY_KEY](https://maps.googleapis.com/maps/api/place/autocomplete/json?input=MY_SEARCH_STRING&language=us&types=geocode&sensor=false&key=MY_KEY)

其中 MY_SEARCH_STRING 是一个简单的字符串，例如“London”，而 MY_KEY 是我创建的密钥

*   我得到的回应是

{“预测”：[]，“状态”：“REQUEST_DENIED”}

*   我也用浏览器键试过这个。还尝试创建一个新项目，重新启用服务，并创建新密钥。以任意组合多次打开/关闭服务并创建新密钥。没有任何效果。

*   奇怪的是，过去几个月我在服务器上创建的登录页面上运行了相同的代码，但是检查了很长时间，所以我不知道它什么时候停止工作。

我非常感谢任何帮助！谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-02T17:02:47.597

**SOLVED.** In Google API Console, I had declared allowed server IPs. I was assuming that if I declared an IP, I was just ensuring that requests would be allowed only from that IP. In order for this to work, you must also declare the allowed per-user limits for each IP, or else it just doesn't allow any requests. I removed all the allowed IPs, waited for 3-4 minutes, and the request was allowed.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-17T03:35:38.027

我有一个类似的问题，修复了它并发现了一些可能有助于解决这个问题的东西

*   使用 http 而不是 https 将导致 REQUEST_DENIED
*   省略 &userIp=xxxx 将导致 REQUEST_DENIED
*   需要生成和使用服务器密钥，以防请求来自 php 脚本，即使用户仅通过浏览器使用，否则将导致 REQUEST_DENIED
*   在测试允许的 IP 列表是否已更改之前需要几分钟

希望它可以帮助你们中的一些人

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-21T06:22:05.850

不确定这是否有帮助，但这里有一个简短的示例：

[https://google-developers.appspot.com/maps/documentation/javascript/examples/places-autocomplete?hl=el](https://google-developers.appspot.com/maps/documentation/javascript/examples/places-autocomplete?hl=el)

# javascript - 在 JSTL 条件标签中使用“div”类名或标题

> ID：12035168
> 
> 赞同：0
> 
> 时间：2012-08-20T09:26:31.300
> 
> 标签：javascript, css, jsp, jstl

我有一个`<div>`标签，我将`<div>`标签传递给 JavaScript 调用，基于该 JavaScript 上的结果，我设置标签的标题和类。

从 JavaScript 返回后，在 JSP 页面中，我想`<div>`在 JSTL 标记中使用修改后的标题或类（JSTL 代码在`<div>`块内）来启用或禁用该块中的几行。

无论如何我可以访问`<div>`JSTL 条件标签中的标题或类吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T09:31:19.260

不是直接的。JSP 在服务器端执行，以响应浏览器请求，而 JavaScript 在客户端执行，在页面内容发送到浏览器之后。

要将某些内容从客户端发送回服务器，您可以使用 HTML 表单发布或 AJAX 调用将修改后的类和标题数据发送/发布回服务器。

[在Mozilla Development Network](https://developer.mozilla.org/en-US/docs/DOM/XMLHttpRequest)上开始使用 JavaScript 编写 AJAX 调用的一个好地方，或者如果您希望产生少量开销，jQuery 库支持[AJAX](http://api.jquery.com/jQuery.ajax/)。

# entity-framework - Entity Framework 4.3 到 Entity Framework 5 的映射异常

> ID：12035174
> 
> 赞同：4
> 
> 时间：2012-08-20T09:26:55.507
> 
> 标签：entity-framework, entity-framework-5

我正在将项目从在 .net 4 上运行的**Entity Framework 4.3**迁移到在 .net 4.5 上运行的**Entity Framework 5 。**在不进行任何更改的情况下，当我尝试运行项目时，代码优先模型配置失败并出现**System.Data.MappingException**并显示以下消息：

> (495,10)：错误 3034：从第 495、536 行开始映射片段时出现问题：具有不同键的两个实体映射到同一行。确保这两个映射片段不会将具有不同键的两组实体映射到同一组行。
> 
> [删除了 5 个其他类似的段落]

该消息未指定导致问题的实体或关系，并且我的模型相当复杂。有什么方法可以让我获得一些更有用的信息，以便更容易诊断问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T14:36:23.480

Ladislav 提出的继承问题是正确的。看起来 Entity Framework 4.3 和 Entity Framework 5 在代码优先的 Table Per Hierarchy 配置方面的行为略有不同。

在这种情况下，我有四个派生类型，每个类型都有自己的配置类派生自`EntityTypeConfiguration<T>`. 基本的抽象类型没有向模型构建器注册的配置。这在 EF 4.3 下不是问题，它只是创建了一个以基本类型命名的表，并带有一个“鉴别器”列来区分类型。

要获得与 EF 5 相同的行为，必须创建一个空的配置类

```
public class MyBaseConfiguration : EntityTypeConfiguration<MyBase> 
{
  // Nothing happening here
} 
```

然后向模型生成器注册

```
public class MyContext : DbContext
{
    protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        modelBuilder.Configurations.Add(new MyBaseConfiguration());

        // Add configurations for derived and other types as normal
    }
} 
```

# java - Java：锁定线程时，AtomicBoolean 和静态布尔变量有什么区别？

> ID：12035176
> 
> 赞同：5
> 
> 时间：2012-08-20T09:27:00.193
> 
> 标签：java, multithreading, synchronization, thread-safety, boolean

我编写了一个名为 T 的线程类。

我的目的是确保一次只运行一个线程对象。

因此，当调用线程对象时，它会检查一个名为 BUSY 的布尔标志。

我的问题是有什么不同

```
private static AtomicBoolean BUSY = new AtomicBoolean(false); 
```

和

```
private static boolean BUSY = false; 
```

我想如果使用“静态”，所有对象只会检查一个 BUSY 布尔变量，这样可以确保只有一个线程对象在运行。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-20T09:29:12.257

您必须至少创建布尔变量`volatile`和 AtomicBoolean 变量`final`才能获得可比较的解决方案。在你这样做之后，你的用例将没有什么不同。

如果您使用`AtomicBoolean`'s`getAndSet`或`compareAndSet`方法，则会出现差异，它们将一个读取和一个写入操作组合成一个原子整体，而当针对`volatile`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-20T09:43:29.227

您可以使用`boolean`and 与适当的同步（和制作`volatile`）可以实现您所需要的。
但是通过使用，`AtomicBoolean`您可以原子地检查当前值，而无需自己编写代码进行同步

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T10:09:06.513

正如其他人所说，您必须分别将变量设为 final / volatile。

根据你的描述，我担心你有一个地方可以做这样的事情：

```
if (!BUSY){
    BUSY = true;
} 
```

请注意，这在没有公共同步的情况下会被破坏，因为两个线程可能会检查该标志，都将其视为错误并开始工作。

我建议研究处理并发的现有结构：http: [//docs.oracle.com/javase/7/docs/api/java/util/concurrent/package-summary.html](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/package-summary.html)

特别是具有单一许可证的[信号量](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Semaphore.html)可能是您正在寻找的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-20T20:54:38.677

an 的一个有用特性`AtomicBoolean`是当且仅当 BUSY 为假时允许单个线程继续，但不允许任何其他线程继续。

```
private static AtomicBoolean BUSY = new AtomicBoolean(false);

public void doWork(){
  if(BUSY.compareAndSet(false,true)){
     //do some work
     BUSY.set(false);
  }else{
     //some other thread won, return now or retry later?
  }
} 
```

因此，`doWork`在任何给定时间，这里只有一个线程。你不能用 a 来实现这一点，`volatile boolean`因为你不能确定`Thread.currentThread()`设置布尔值。

# accordion - 手风琴打开时显示 div

> ID：12035177
> 
> 赞同：0
> 
> 时间：2012-08-20T09:27:01.250
> 
> 标签：accordion

我有一个 jquery 手风琴内容。

```
$(document).ready(function() {
    $('div.question').click(function() {
        $('div.answer').slideUp(600);   
        $(this).next().slideDown(600);
    });
    $("div.answer").hide();
}); 
```

**HTML 代码：**

```
<div class="question">Question</div>
<div class="answer">Answer</div> 
```

当我的手风琴打开时，我需要显示另一个 div。我不想将 div 与答案类一起使用。我需要用不同的类制作另一个 div。我知道我可以像这样在 div 中使用 2 个不同的类：

```
class="answer anotherclass" 
```

但我不能以这种方式使我的模板变得漂亮！

**例子：**

```
<div class="question">Question</div>
<div class="hide">Hide Contents</div>
<div class="answer">Answer</div> 
```

当我的答案 div 接近时，我想隐藏第二个 div。然后点击问题后，我需要显示隐藏 div 并回答 div。我不能把我的隐藏 div 放在答案 div 中。类似于隐藏 div 的淡入淡出效果。

我希望你们能理解我的问题。

**编辑：** 我需要这样的东西：

```
$(document).ready(function() {    
$('div.question').click(function() {
$('div.another').fadeIn(600);
$(this).next().fadeOut(600);
$('div.answer').slideUp(600);   
$(this).next().slideDown(600);
});

$("div.answer").hide();
$("div.another").hide();    
}); 
```

**HTML：** 问题回答另一个，但它不起作用！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T09:33:13.717

您可以将隐藏 div 放在问题 div 中，并在单击问题时简单地显示/隐藏它。可能最好使用 jQuery 切换。

# php - 通过 php-ga 记录浏览日期

> ID：12035187
> 
> 赞同：1
> 
> 时间：2012-08-20T09:27:45.760
> 
> 标签：php, google-analytics, google-analytics-api

我使用 php-ga 将数据从 PHP 脚本记录到 Google Analytics。我必须设置网页浏览请求的某些数据。例如，我想告诉 GA 用户昨天或两天前打开了该页面，但它总是将我的 php-ga 请求的日期设置为浏览量的日期。

我试图为访问者对象设置访问时间：

```
$visitor = new GoogleAnalytics\Visitor();
$date = new DateTime($dateTime);
$visitor->setCurrentVisitTime($date);
$visitor->setFirstVisitTime($date);
$visitor->setPreviousVisitTime($date); 
```

并设置会话开始的时间：

```
$session = new GoogleAnalytics\Session();
$date = new DateTime(dateTime);
$session->setStartTime($date); 
```

但这无济于事。

你知道吗，可以设置日期吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-08T10:52:08.150

我是php-ga的作者。恐怕马丁是对的，谷歌不接受过去的日期。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-20T09:35:10.913

我想你不能追溯设置访问日期，否则我昨天可以记录一百万页浏览量，然后用我的谷歌分析数据去广告商那里，“看看我有多少访问！现在付我大钱，如果你想在我的网站上放一个横幅。”

它很容易被滥用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T19:36:37.183

您是否考虑过使用谷歌分析事件并将这些事件链接在一起？

# c++ - 在类中使用 libuv

> ID：12035200
> 
> 赞同：5
> 
> 时间：2012-08-20T09:28:44.933
> 
> 标签：c++, node.js, asynchronous, casting, libuv

我正在尝试为 C++ 库编写 nodejs 绑定，但我似乎遇到了障碍。

我正在尝试对 C++ 库的所有调用进行异步调用，这就是我使用`libuv`. 我基本上遵循[本](https://github.com/kkaefer/node-cpp-modules/blob/master/05_threadpool/modulename.cpp)教程。

我希望能够从 libuv 调用类成员函数`uv_queue_work`。看看这段代码——

```
class test {
  private:
    int data;
    void Work(uv_work_t *req);
    void After(uv_work_t *req);
  public:
    Handle<Value> Async(const Arguments& args) {
      HandleScope scope;
      Local<Function> callback = Local<Function>::Cast(args[0]);
      int status = uv_queue_work(uv_default_loop(), **something**, Work, After);
      assert(status == 0);
      return Undefined();
    }
}; 
```

基本上我希望`Work`and`After`函数`data`在类的元素上起作用。然而，这似乎不起作用。我尝试将指针从 type转换`Work`为. 但这似乎也不起作用。`After``void test::(*)(uv_work_t*)``void (*)(uv_work_t*)`

你们能给我一些关于如何解决这个问题的建议吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-21T12:33:22.993

所以你已经意识到，你不能直接调用成员函数。

第二个参数“ **something** ”是 uv_work_t 类型，它有一个成员“void* data”。

您需要做的是在您的类中为“Work”和“After”创建静态方法，创建一个 uv_work_t 结构，并将数据分配给“this”。

一旦在你的静态“Work”和“After”方法中完成，你就对“req->data”（到你的类类型）进行静态转换，然后调用你的成员函数。

例如：

```
uv_work_t* baton = new uv_work_t();
baton->data = this;
int status = uv_queue_work(uv_default_loop(), baton, StaticWork, StaticAfter); 
```

然后在静态方法中

```
test* myobj = static_cast<test>(req->data);
myobj->Work(); 
```

以及 StaticAfter 函数的类似代码

# ruby-on-rails - 如何升级到最新版本的 ruby on rails 3.2.8？

> ID：12035202
> 
> 赞同：4
> 
> 时间：2012-08-20T09:28:59.130
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.2

我已经离开编程几个月了，但我现在回来了，对已经在 3.2.8 版本的 Rails 感到惊讶。我觉得有点生疏，忘记了如何成功地将我的 ruby​​ on rails 版本升级到最新版本。

我目前使用的是 3.2.3 版

有标准的升级方式吗？我记得上次升级时，我不得不修改 gemfile 中的一些行。谷歌搜索没有帮助，所以我会很感激我最喜欢的地方的解决方案谢谢。

亲切的问候

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-20T09:36:16.410

如果您只想安装最新的 rails gem

```
gem install rails -v 3.2.8 
```

如果是 rails 3.2.3 应用程序

1.  编辑`Gemfile`，将行更改`gem 'rails', '3.2.3'`为`gem 'rails', '3.2.8'`
2.  跑`bundle update rails`

（从[这个问题](https://stackoverflow.com/questions/11898361/upgrading-rails-app-from-3-2-6-to-3-2-8)）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-20T09:40:24.523

对于您要升级的每个应用程序：

**宝石文件**

```
gem 'rails', '3.2.8'
# ... 
```

然后在命令行上：

```
$ bundle update rails 
```

# cakephp - CakePHP 301重定向获取带有爆炸原因循环的url参数

> ID：12035207
> 
> 赞同：0
> 
> 时间：2012-08-20T09:29:34.480
> 
> 标签：cakephp, loops, http-status-code-301, explode, slug

已解决：请参阅我的评论

我已将我的 id 和 slug 放在同一个 url 参数（文件夹）中以缩短我的 url。

示例：www.domain/gsm/1_samsung-galaxy-s-ii​​i-16-gb 其中“1”是 id，“samsung-galaxy-s-ii​​i-16-gb”是 slug。

这很好用，但是现在我正在尝试构建一个 301 重定向脚本，该脚本将 url 中的 slug 检查到 db 中的 slug，如果它们不匹配，则用户将 301 重定向到正确的 url。

但是由于某种原因，我最终进入了重定向循环，因为脚本不会刷新整个 url，而只是在错误的 slug 之后添加正确的 slug，当然会一直这样做，直到浏览器持有..

所以 www.domain/gsm/1_bladiebla 重定向到 www.domain/gsm/1_bladiebla_samsung-galaxy-s-ii​​i-16-gb_samsung-galaxy-s-ii​​i-16-gb_samsung-galaxy-s-ii​​i-16-gb_samsung-galaxy- s-iii-16-gb.......

这是控制器的视图功能：

```
public function view($id = null) {
    $this->Smartphone->id = $id;
    if (!$this->Smartphone->exists()) {
        throw new NotFoundException(__('Invalid smartphone'));
    }
    $this->set('smartphone', $this->Smartphone->read(null, $id));

    $pieces = explode('_', $this->params['pass'][0]);

    if ($pieces[1] != $this->Smartphone->field('slug')) {
        $this->redirect(array('action' => 'view', $id.'_'.$this->Smartphone->field('slug')), 301);
    }
} 
```

提前致谢！

# javascript - 在纯 JavaScript 中将 RGBA 渲染为 PNG？

> ID：12035209
> 
> 赞同：15
> 
> 时间：2012-08-20T09:29:40.347
> 
> 标签：javascript, canvas, html5-canvas, web-worker

假设我有一个`canvas`元素，我需要将画布上的图像转换为 PNG 或 JPEG。当然，我可以简单地使用`canvas.toDataURL`，但问题是我需要每秒执行 20 次，而且`canvas.toDataURL`速度[非常慢](http://jsperf.com/canvas-todataurl-imagetype-performance/9)- 太慢以至于捕获过程会丢失帧，因为浏览器正忙于转换为 PNG。

我的想法是调用`context.getImageData(...)`，这显然要快得多，并将返回的数据发送`CanvasPixelArray`给 Web Worker，然后它将原始图像数据处理成 PNG 或 JPEG。问题是我无法`canvas.toDataURL`从 Web Worker 中访问本机，因此我需要求助于纯 JavaScript。我尝试搜索用于 Node.js 的库，但[这些](https://github.com/pkrumins/node-png)库是用 C++ 编写的。纯 JavaScript 中是否有任何库可以将原始图像数据呈现为 PNG 或 JPEG？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-20T19:51:34.853

libpng 有几个 JavaScript 端口，包括[pnglet](http://elf.org/pnglets/)（非常旧）、[data:demo](http://code.google.com/p/data-demo/source/browse/trunk/modes/png/png.js)和[PNGlib](http://www.xarg.org/2010/03/generate-client-side-png-files-using-javascript/)。

[PNG 规范](http://www.w3.org/TR/PNG/)本身非常简单——您可能遇到的最困难的部分是自己实现一个简单的 PNG 编码器，就是让ZLIB[正确](http://www.ietf.org/rfc/rfc1950.txt)（那里也有许多独立的 JavaScript 实现）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T18:06:42.863

实际上有一个名为[Emscripten](https://github.com/kripken/emscripten)的 C++ 到 JavaScript 编译器。

有人做了一个[libpng 的端口](https://github.com/hachque-Emscripten/libpng-1.2.49)，你可能想检查一下。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T20:03:07.500

我能够编写自己的 PNG 编码器，它支持 RGB 和调色板，具体取决于有多少颜色。它旨在作为 Web Worker 运行。我已将其开源为[usain-png](https://github.com/bitsofpancake/usain-png)。

# vb.net - 如何确定 vb.net 中未使用的总物理内存

> ID：12035210
> 
> 赞同：2
> 
> 时间：2012-08-20T09:29:39.967
> 
> 标签：vb.net

我想根据可用物理内存的数量来限制创建的线程数。例如，一旦我达到只剩下 7GB 的实际内存，我就想停止创建新线程。我该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-20T09:41:43.703

您可以使用[`Devices.ComputerInfo`](http://msdn.microsoft.com/en-us/library/microsoft.visualbasic.devices.computerinfo.aspx)来获取可用物理内存的总量：

```
Dim info = New Microsoft.VisualBasic.Devices.ComputerInfo()
Dim gb = info.AvailablePhysicalMemory / 1024 / 1024 / 1024
While gb >= 7
    ' start your threads here ... '
    gb = info.AvailablePhysicalMemory / 1024 / 1024 / 1024
End While 
```

# php - 致命错误：在非对象上调用成员函数 AddUser()

> ID：12035214
> 
> 赞同：0
> 
> 时间：2012-08-20T09:29:53.810
> 
> 标签：php

所以在网上搜索了这个错误的最小细节或解决方案几个小时后，我仍然无法修复它

**错误：**

```
Notice: Undefined variable: Login in C:\xampp\htdocs\up\administration\adduser.php on line 3

Fatal error: Call to a member function AddUser() on a non-object in C:\xampp\htdocs\up\administration\adduser.php on line 3 
```

**这些错误来自 adduser.php 其中包含**

```
<?php
require_once('LoginClass.php');
$Login->AddUser('Test','test312');
?> 
```

**这是 LoginClass.php**

```
<?php

class Login {

//Username Variables
private $username;
private $password;

//MySQL Variables
private $Host;
private $MySQLUsername;
private $MySQLPassword;
private $Database;
private $Conn;

//Constructor
public function Login()
{
    session_start();
    $this->Host = "localhost";
    $this->MySQLUsername = "root";
    $this->MySQLPassword = "";
    $this->Database = "up";

    $this->Connection();

    unset($this->Host);
    unset($this->MySQLUsername);
    unset($this->MySQLPassword);
    unset($this->Database);
}
//**********************
//Mysql Functions
//********************** 
public function Connection()
{
    $this->Conn = @mysql_connect($this->Host,$this->MySQLUsername,$this->MySQLPassword);

    if($this->Conn)
    {
        mysql_select_db($this->Database) OR die('Could not select DB');
    }
    else
    {
        die(mysql_error());
    }  
}

public function Query($sql)
{
    $result = mysql_query($sql);

    if(!$result)
    {
        die(mysql_error());
    }

    return $result;
}

public function Disconnect()
{
    mysql_close($this->Conn);
}

//Escapes bad values for MySQL to prevent SQL injections.
public function EscapeString($badstring)
{
    if(!get_magic_quotes_gpc())
    {
        $goodstring = addslashes($badstring);
    }
    else
    {
        $goodstring = stripslashes($badstring);
    }

    $goodstring = mysql_real_escape_string($badstring);

    return $goodstring;
}

public function EncryptPassword($password)
{
  return sha1(md5($password));  
} 
//Check if the user can login
public function CheckLogin($username,$password)
{
    $this->username = $this->EscapeString($username); 
    $this->password = $this->EscapeString($this->EncryptPassword(($password)));

    $result = $this->Query("SELECT * FROM `users` WHERE `username` = '$this->username' AND `password` = '$this->password' LIMIT 1");

    //If we get one result we know the login is right.
    if(mysql_num_rows($result) == 1)
    {
        $this->username = $username;
        $_SESSION['username'] = $this->username;
        $_SESSION['authorized'] = 1; 

        header('location:Private.php');
    }
    else 
    {
        die('Invalid Login');
    }

}
//Add a user
public function AddUser($username,$password)
{
    //$username = $this->EscapeString($username);
    //$password = $this->EscapeString($this->EncryptPassword($password));
    $username = $this->$username;
    $password = $this->$this->EncryptPassword($password);

    $result = $this->Query("INSERT INTO `users` (username,password) VALUES ('$username','$password')");
}
//Takes the result of a query and puts the information into an array
public function Result_To_Array($result)
{
    $result_array = array();

    for ($i=0; $row = mysql_fetch_array($result); $i++) 
    {
        $result_array[$i] = $row;
    }

    return $result_array;

}
//Delete user
public function DeleteUser($username)
{
    $username = $this->EscapeString($username);

    $result = $this->Query("DELETE FROM `users` WHERE `username` = '$username' LIMIT 1");

}
//Checks if the user is authorized or not
public function IsAuth()
{
    if(isset($_SESSION['username']) && $_SESSION['authorized'] == 1)
    return true;

    else
    {
        die('You are not authorized to view this information');
        header('login.html');
    }    
}
//Shows user's IP
public function GetIP()
{
    return $_SERVER['REMOTE_ADDR'];
}
//Display all users
public function ShowUsers()
{
    $users = $this->Result_To_Array($this->Query("SELECT * FROM `users`"));

    foreach($users as $user)
    {
        echo $user['username']."<br />";
    } 
}

public function LogOut()
{

     session_destroy();

     header('location:login.html');
}
}
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T09:32:18.343

你应该创建新对象`Login()`：

```
require_once('LoginClass.php');
$Login = new Login();
$Login->AddUser('Test','test312'); 
```

或者像这样直接调用函数：

```
require_once('LoginClass.php');
Login::AddUser('Test','test312'); 
```

# java - 加载 Java JTable：为什么它不起作用？

> ID：12035215
> 
> 赞同：5
> 
> 时间：2012-08-20T09:29:57.943
> 
> 标签：java, swing, stream, load, jtable

我创建了一个包含 JTable 的简单 GUI。该表可以通过适当的对象流保存和加载。

此时，Save 函数按预期工作，在查看保存目录时，我可以看到表对象存储在文件中。

但是，当我尝试从文件加载表时，GUI 永远不会显示加载的表。调用 actionlistener 函数，因为我有一个 system.out “数据加载”，但表从不显示更新的数据。

我曾尝试调用 repaint()，但无济于事。对于任何能够阐明我可能做错了什么的人，我将不胜感激。

看一些代码

```
import javax.swing.*;
import java.awt.*;
import javax.swing.table.DefaultTableCellRenderer;
import javax.imageio.*;
import java.io.*;
import java.awt.image.BufferedImage;
import java.util.*;
import javax.swing.table.*;
import java.awt.event.*;

public class Save3 extends JFrame implements ActionListener{

public int PADDING = 10;

public JMenuItem menuNew;
public JMenuItem menuOpen;
public JMenuItem menuSave;
public JMenuItem menuExit;

public JPanel       container;

public DefaultTableModel    model;
public JScrollPane          scrollPane;
public JTable               table;

public FileInputStream      fis;
public ObjectInputStream    in;
public FileOutputStream     fos;
public ObjectOutputStream   out;
public String               filename;

public Save3(){
    fis         = null;
    in          = null;
    fos         = null;
    out         = null;
    filename    = "test.ref";
    initGUI();
}

public void initGUI(){
    setTitle("WIM Reference Data Comparison Tool");
    setSize(500, 400);
    setVisible(true);
    setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    setLocationRelativeTo(null);

    // Menu Bar and Menu Items setup
    JMenuBar    menuBar;
    JMenu       menu;
    JMenuItem   menuItem;

    menuBar = new JMenuBar();
    menu = new JMenu("Menu");
    menuBar.add(menu);

    menuNew     = new JMenuItem("New");
    menuOpen    = new JMenuItem("Open");
    menuSave    = new JMenuItem("Save");
    menuExit    = new JMenuItem("Exit");

    menuNew.addActionListener(this);
    menuOpen.addActionListener(this);
    menuSave.addActionListener(this);
    menuExit.addActionListener(this);

    menu.add(menuNew);
    menu.add(menuOpen);
    menu.add(menuSave);
    menu.add(menuExit);
    setJMenuBar(menuBar);               

    container       = new JPanel(new BorderLayout());

    String[] columnNames = {"", "MotorBike", " Car"}; 
    Object[][] data = { {"Vehicle Summary", new Integer(100), new Integer(200)},  // Header 1: Green
                        {"Axle Numbers", new Integer(100), new Integer(200)},
                        {"Axle Code", new Integer(100), new Integer(200)},
                        {"Axle Distances (cm)", new Integer(100), new Integer(200)},
                        {"Vehicle Speed (km/h)", new Integer(100), new Integer(200)},
                        {"Gross Weight", new Integer(100), new Integer(200)}, 
                        {"Axle Weight 1", new Integer(100), new Integer(200)},
                        {"Axle Weight 2", new Integer(100), new Integer(200)},
                        };

    model = new DefaultTableModel(data, columnNames);
    table = new JTable(data, columnNames);
    table.setPreferredScrollableViewportSize(new Dimension(500, 70)); 
    table.setFillsViewportHeight(true); 
    scrollPane = new JScrollPane(table); 

    container.add(scrollPane, BorderLayout.CENTER);
    add(container);
}

public void setPanel(JTable table){

    scrollPane.remove(table);
    container.remove(scrollPane);

    scrollPane  = new JScrollPane(table); 
    container.add(scrollPane, BorderLayout.CENTER);

    repaint();
}

public void actionPerformed(ActionEvent e){
    System.out.println("Clicked item!");
    // NEW
    if(e.getSource() == menuNew){
        System.out.println("New File");
    }
    // SAVE
    if(e.getSource() == menuSave){
        System.out.println("Save!");
        try{
            model.fireTableDataChanged();               
            table = new JTable(model);
            fos     = new FileOutputStream(filename);
            out     = new ObjectOutputStream(fos);
            out.writeObject(table);
        }catch(IOException e3){
            e3.printStackTrace();
        }
    }
    if(e.getSource() == menuOpen){
        System.out.println("Open!");

        JTable table = new JTable();
        try{
            fis     = new FileInputStream(filename);
            in      = new ObjectInputStream(fis);

            table   = new JTable();
            table   = (JTable) in.readObject();
            in.close(); 

            setPanel(table);

            System.out.println("data loaded");

        }catch(IOException e1){
            e1.printStackTrace();
        }catch(ClassNotFoundException e2){
            e2.printStackTrace();
        }
    }
    if(e.getSource() == menuExit){
        System.out.println("Exit!");
    }
}

   public static void main(String[] args) {

    SwingUtilities.invokeLater(new Runnable() {

        public void run() {

            try {
                UIManager.setLookAndFeel("javax.swing.plaf.nimbus.NimbusLookAndFeel");
            } catch (Exception e) {
                e.printStackTrace();
            }

            Save3 ex = new Save3();
            ex.setVisible(true);
        }
    });
} 
```

}

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-20T09:47:32.183

您的新表格未添加到任何地方，因此不会显示。尝试这样的事情：

```
public void actionPerformed(ActionEvent e){
  JTable oldTable = table;

  // your stuff, loading the table from file

  thePanelHoldingYourTable.remove(oldTable);
  thePanelHoldingYourTable.add(table);
  // if there are other components in that panel, make sure, your table is in the right spot
  // maybe refresh your layout by using invalidate()
} 
```

编辑：好的，不建议序列化表，最好只保存表模型。这是您编辑的 SSCCE（感谢**kleopatra**的帮助）：

```
import java.awt.BorderLayout;
import java.awt.Dimension;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.io.FileInputStream;
import java.io.FileOutputStream;
import java.io.IOException;
import java.io.ObjectInputStream;
import java.io.ObjectOutputStream;

import javax.swing.JFrame;
import javax.swing.JMenu;
import javax.swing.JMenuBar;
import javax.swing.JMenuItem;
import javax.swing.JPanel;
import javax.swing.JScrollPane;
import javax.swing.JTable;
import javax.swing.SwingUtilities;
import javax.swing.table.DefaultTableModel;

public class Save3 extends JFrame implements ActionListener {
    private static final long serialVersionUID = 1L;

    public int PADDING = 10;

    public JMenuItem menuNew;
    public JMenuItem menuOpen;
    public JMenuItem menuSave;
    public JMenuItem menuExit;

    public JPanel container;

    public DefaultTableModel model;
    public JScrollPane scrollPane;
    public JTable table;

    public FileInputStream fis;
    public ObjectInputStream in;
    public FileOutputStream fos;
    public ObjectOutputStream out;
    public String filename;

    String[] columnNames = {"", "MotorBike", " Car"};
    Object[][] data = { {"Vehicle Summary", new Integer(100), new Integer(200)},  // Header 1: Green
    {"Axle Numbers", new Integer(100), new Integer(200)}, {"Axle Code", new Integer(100), new Integer(200)}, {"Axle Distances (cm)", new Integer(100), new Integer(200)}, {"Vehicle Speed (km/h)", new Integer(100), new Integer(200)}, {"Gross Weight", new Integer(100), new Integer(200)}, {"Axle Weight 1", new Integer(100), new Integer(200)}, {"Axle Weight 2", new Integer(100), new Integer(200)},};

    public Save3() {
        fis = null;
        in = null;
        fos = null;
        out = null;
        filename = "test.ref";
        initGUI();
    }

    public void initGUI() {
        setTitle("WIM Reference Data Comparison Tool");
        setSize(500, 400);
        setVisible(true);
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        setLocationRelativeTo(null);

        // Menu Bar and Menu Items setup
        JMenuBar menuBar;
        JMenu menu;

        menuBar = new JMenuBar();
        menu = new JMenu("Menu");
        menuBar.add(menu);

        menuNew = new JMenuItem("New");
        menuOpen = new JMenuItem("Open");
        menuSave = new JMenuItem("Save");
        menuExit = new JMenuItem("Exit");

        menuNew.addActionListener(this);
        menuOpen.addActionListener(this);
        menuSave.addActionListener(this);
        menuExit.addActionListener(this);

        menu.add(menuNew);
        menu.add(menuOpen);
        menu.add(menuSave);
        menu.add(menuExit);
        setJMenuBar(menuBar);

        container = new JPanel(new BorderLayout());

        model = new DefaultTableModel(data, columnNames);
        table = new JTable();
        table.setModel(model);
        table.setPreferredScrollableViewportSize(new Dimension(500, 70));
        table.setFillsViewportHeight(true);
        scrollPane = new JScrollPane(table);

        container.add(scrollPane, BorderLayout.CENTER);
        add(container);
    }

    public void setModel(DefaultTableModel writeModel) {
        table.setModel(writeModel);
    }

    public void actionPerformed(ActionEvent e) {
        System.out.println("Clicked item!");
        if (e.getSource() == menuNew) {
            System.out.println("New File");
        } else if (e.getSource() == menuSave) {
            System.out.println("Save!");
            try {
                fos = new FileOutputStream(filename);
                out = new ObjectOutputStream(fos);
                table.clearSelection();
                table.setModel(new DefaultTableModel());
                out.writeObject(model);
                table.setModel(model);
            } catch (IOException e3) {
                e3.printStackTrace();
            } finally {
                try {
                    out.close();
                    fos.close();
                } catch (IOException e1) {
                    e1.printStackTrace();
                }
            }
        } else if (e.getSource() == menuOpen) {
            System.out.println("Open!");
            try {
                fis = new FileInputStream(filename);
                in = new ObjectInputStream(fis);
                DefaultTableModel modelRead = (DefaultTableModel) in.readObject();
                setModel(modelRead);
                System.out.println("data loaded");
                in.close();
                fis.close();
            } catch (IOException e1) {
                e1.printStackTrace();
            } catch (ClassNotFoundException e2) {
                e2.printStackTrace();
            }
        } else if (e.getSource() == menuExit) {
            System.out.println("Exit!");
        }
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            public void run() {
                Save3 ex = new Save3();
                ex.setVisible(true);
            }
        });
    }
} 
```

请注意，我使用以下三行来序列化模型：

```
table.setModel(new DefaultTableModel());
out.writeObject(model);
table.setModel(model); 
```

因此，模型在序列化时与表分离。不幸的是，该模型也尝试序列化其侦听器（失败）。这就是为什么这一步是必要的。保存后，模型可以再次应用于表格。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-20T09:48:13.573

*   [JTable](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html)及其[XxxTableModel](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#data)基于[Vector 或 Object[]](http://docs.oracle.com/javase/7/docs/api/javax/swing/JTable.html#JTable%28%29)

*   `FileIO`必须按原样将数据从`XxxTableModel`结构中加载`Vector`或`Object[]`

*   对 XxxTableModel 的所有更新都必须在[EventDispatchThread](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html)上完成，否则任何更改都会在屏幕上可见

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-20T09:33:23.343

在`actionPerformed`代码中，导入的表（这是一个新实例）没有添加到容器中。

# objective-c - 如何在iphone中使用相同的应用程序与其他人聊天

> ID：12035219
> 
> 赞同：-5
> 
> 时间：2012-08-20T09:30:05.477
> 
> 标签：objective-c, ios, chat

我有一个问题

与登录我的iphone应用程序的其他人聊天如何可能，是否有任何应用程序使用相同的概念，请帮助我提前谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T09:34:30.210

[http://quickblox.com/modules/chat/](http://quickblox.com/modules/chat/) 或 [http://mobile.tutsplus.com/tutorials/iphone/building-a-jabber-client-for-ios-xmpp-integration/](http://mobile.tutsplus.com/tutorials/iphone/building-a-jabber-client-for-ios-xmpp-integration/)

尝试使用它，它几乎是一个应用程序中的一个应用程序..意味着您不必编写所有代码:)

# plugins - Wordpress 插件如何自我更新？

> ID：12035232
> 
> 赞同：1
> 
> 时间：2012-08-20T09:31:32.720
> 
> 标签：plugins, wordpress

我很好奇人们如何更新 wordpress 插件。我过去曾看到点击仪表板更新插件的链接。幕后发生了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T21:51:40.103

它只是从 wordpress.org 或开发者网站下载最新的包并将其解压缩到现有文件夹中，这就是为什么您不应该编辑插件文件的原因，因为如果您更新，您的工作将被删除。

# iphone - 如何计算 iPhone 中的文件数据或记录？

> ID：12035234
> 
> 赞同：-1
> 
> 时间：2012-08-20T09:31:42.313
> 
> 标签：iphone, ios, ios5, file-upload, fwrite

当日志或数据计数高于 50 我想将数据发布到服务器时，我正在使用写入一些日志以在本地写入。然后我写下 50 个日志值。我的问题是如何获取文件计数以及如何维护这个任何人帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T09:53:26.030

**编辑**文件内的计数记录

注意添加新日志到文件时添加 \n 行字符，这样我们就可以知道添加了多少日志

```
NSString *str = [[NSString alloc]initWithContentsOfFile:yourFilePath encoding:NSUTF8StringEncoding error:nil];
NSArray *arrLogs = [str componentsSeparatedByString:@"\n"];
NSLog(@"Count of logs : %d",[arrLogs count]); 
```

* * *

检查这个如何获取这样的内容计数：

```
NSArray *dirContents = [[NSFileManager defaultManager] contentsOfDirectoryAtPath:dirPath error:nil]; 
```

现在像这样过滤内容：

```
NSPredicate *fltrtxt = [NSPredicate predicateWithFormat:@"self ENDSWITH '.txt'"];
NSArray *onlytxts = [dirContents filteredArrayUsingPredicate:fltrtxt]; 
```

现在计数是：

```
if([onlytxts count] >= 50)
{
  //save new log to doc dir
  // post data to server;
  //after posting data u can do anything
} 
```

# ruby-on-rails - 在为新客户记录创建操作时提交空记录

> ID：12035239
> 
> 赞同：2
> 
> 时间：2012-08-20T09:32:01.767
> 
> 标签：ruby-on-rails, ruby, null, posts

我是一个完全的 Rails 菜鸟，但一直在自学，我似乎能够自己解决简单的问题。但是，我目前有一个问题似乎无法解决。当我在填写表单上的所有字段后调用我的“新”或“创建”操作来创建新记录时，我得到空白记录被提交到数据库。所有字段均为“空”。

```
INSERT INTO `clients` (`accountholder`, `allergies`, `birthdate`, `cell`, `created_at`, `data1`, `data2`, `data3`, `data4`, `emailaddress`, `fax`, `middlename`, `name`, `surname`, `tel`, `text`, `updated_at`) VALUES (NULL, NULL, NULL, NULL, '2012-08-20 09:10:46', NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, '2012-08-20 09:10:46') 
```

我可以在@post = Client.update_attributes(params[:id]) 中的控制台上看到日志转储期间的数据是正确的。

客户端控制器.rb

```
def new
  @post = Client.create
end

def create
  @post = Client.new(params[:posts])

   if @post.save
    redirect_to clients_path
   else
    render "new"
   end
end 
```

index.html.erb

```
<%= form_for @post do |x| %>
    <p>
        <%= x.label :name %><br />
        <%= x.text_field :name, :cols => "30", :rows => "1" %>
    </p>

    <p>
        <%= x.label :surname %>
        <%= x.text_area :surname, :cols => "30", :rows => "1" %>
    </p>

    <p>
        <%= x.label :middlename %>
        <%= x.text_area :middlename, :cols => "30", :rows => "1" %>
    </p>

    <p>
        <%= x.label :tel %>
        <%= x.text_area :tel, :cols => "30", :rows => "1" %>
    </p>

    <p>
        <%= x.label :cell %>
        <%= x.text_area :cell, :cols => "30", :rows => "1" %>
    </p>

    <p>
        <%= x.label :allergies %>
        <%= x.text_area :allergies, :cols => "30", :rows => "10" %>
    </p>

    <p>
        <%= x.label :fax %>
        <%= x.text_area :fax, :cols => "30", :rows => "1" %>
    </p>

    <p>
        <%= x.label :birthdate %>
        <%= x.text_area :birthdate, :cols => "30", :rows => "1" %>
    </p>

    <p>
        <%= x.submit "Add a New Client" %>
    </p>
<% end %> 
```

任何意见，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T09:35:40.773

```
@post = Client.new(params[:posts]) 
```

应该：

```
@post = Client.new(params[:client]) 
```

`params[:posts]`没有定义，因此它是 nil。这就像调用 Client.new()，意味着属性默认为 NULL。

类名是 Client ，您尝试创建的客户端是单数的，因此是**client**。在 Rails 中，通常将一组客户端称为客户端，而客户端就是客户端。

这就是为什么默认情况下，您会看到`index`动作使用`@clients`（因为它是复数形式），而`show`动作使用`@client`.

# jquery - 将 jQuery 加载到 chrome 扩展中

> ID：12035242
> 
> 赞同：16
> 
> 时间：2012-08-20T09:32:16.670
> 
> 标签：jquery, google-chrome-extension, manifest

我正在尝试进入 Chrome 扩展的神奇世界。现在我已经建立了我的清单，试图加载 jquery。

```
{
    "name": "Test Extension",
    "version": "0.1",
    "manifest_version": 2,
    "description": "First try",
    "options_page": "options.html",
    "content_scripts": [{
        "matches": ["chrome-extension://*/*"],
        "js": ["jquery.js", "popup.js"],
        "run_at": "document_end"
    }],
    "browser_action": {
        "default_icon": "icon.png",
        "default_popup": "popup.html",
        "default_title": "Click me!"
    }
} 
```

实际上试图重新加载扩展告诉我“匹配”不匹配有效的模式。

但这还不是全部。为了克服它，我尝试将“匹配”值更改为`*://*/*`并重新加载。好吧，扩展似乎加载正确，但似乎 jquery 没有加载，因为我可以从 popup.js 得到的错误告诉我

> 未捕获的 ReferenceError：$ 未定义

实际上HTML只是：

```
<!doctype html>
<html>
<head>
    <title>Test Extension</title>
    <link rel="stylesheet" style="text/css" src="style.css">
</head>
<body>
    <div id="test"></div>
</body>
</html>
<script type="text/javascript" src="popup.js"></script> 
```

popup.js 代码就是这样做的：

```
$("#test").html("Foo!"); 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-20T09:43:49.243

内容脚本**永远不会**在扩展的上下文中运行。在浏览器操作弹出窗口中加载脚本的正确方法是将其包含在代码中。让您的清单文件为：

```
{
    "name": "Test Extension",
    "version": "0.1",
    "manifest_version": 2,
    "options_page": "options.html",
    "browser_action": {
        "default_icon": "icon.png",
        "default_popup": "popup.html",
        "default_title": "Click me!"
    }
} 
```

并且`popup.html`：

```
...
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="popup.js"></script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T09:37:38.260

```
$.("#test").html("Foo!"); 
```

应该

```
$("#test").html("Foo!"); 
```

您得到的错误与这部分代码不正确一致。

# java - 如何将 eclipse 将我的代码格式化为更清晰的格式。（美化或清理我的代码：java）

> ID：12035259
> 
> 赞同：0
> 
> 时间：2012-08-20T09:33:25.653
> 
> 标签：java, code-formatting

我的 Eclipse 正在格式化如下所示的代码，并导致我的代码很长，即使不是，也有更多的代码行。

```
 // Inserting Person record
if (personDTO.getInsertPerson() != null
        && personDTO
                .getInsertPerson()) {
    newPersonID = super
            .getPersonDBM()
            .insertHRPerson(
                    personDTO);
    //inserting into ADS_Person_Logs                                    
    personLogsDTO = super
            .getPersonDBM()
            .getPerson(newPersonID);
    personLogsDTO
            .setAction(PERSON_INSERT);
    super.getPersonDBM()
            .insertHRPersonLogs(
                    personLogsDTO);

    if (logDTO.getGyr().equalsIgnoreCase("Y")) {
        for (BigDecimal tempRegId : transactionLogMap
                .keySet()) {
            writeHRFeedTransactionLogEntry(personDTO,SUCCESS_MSG + 
                                    transactionLogMap
                                    .get(tempRegId).getMessage(),                                                                                
                                    transactionLogMap.get(tempRegId)
                                    .getGyr(),
                                    transactionLogRegionMap
                                    .get(tempRegId),
                                    newPersonID,tempRegId);
        }
        insertedRecordsWithWarn++;
    } else {
        for (BigDecimal tempRegId : transactionLogMap
                .keySet()) {
            writeHRFeedTransactionLogEntry(personDTO,SUCCESS_MSG+ transactionLogMap
                                    .get(tempRegId).getMessage(),
                                    transactionLogMap
                                    .get(tempRegId).getGyr(),
                                    transactionLogRegionMap
                                    .get(tempRegId),
                                    newPersonID,tempRegId);
        }
        insertedRecords++;
    }
} 
```

但是当我按 ctrl + shift + F 时，我希望代码像下面那样显示。

```
// Inserting Person record
if (personDTO.getInsertPerson() != null
        && personDTO.getInsertPerson()) {
    newPersonID = super.getPersonDBM().insertHRPerson(personDTO);
    //inserting into ADS_Person_Logs                                    
    personLogsDTO = super.getPersonDBM().getPerson(newPersonID);
    personLogsDTO.setAction(PERSON_INSERT);
    super.getPersonDBM().insertHRPersonLogs(personLogsDTO);

    if (logDTO.getGyr()    .equalsIgnoreCase("Y")) {
        for (BigDecimal tempRegId : transactionLogMap.keySet()) {
            writeHRFeedTransactionLogEntry(personDTO,SUCCESS_MSG + 
                                    transactionLogMap.get(tempRegId).getMessage(),                                                                                
                                    transactionLogMap.get(tempRegId).getGyr(),
                                    transactionLogRegionMap.get(tempRegId),
                                    newPersonID,tempRegId);
        }
        insertedRecordsWithWarn++;
    } else {
        for (BigDecimal tempRegId : transactionLogMap
                .keySet()) {
            writeHRFeedTransactionLogEntry(personDTO,SUCCESS_MSG+
                                    transactionLogMap.get(tempRegId).getMessage(),
                                    transactionLogMap.get(tempRegId).getGyr(),
                                    transactionLogRegionMap.get(tempRegId),
                                    newPersonID,tempRegId);
        }
        insertedRecords++;
    }
} 
```

即使它的格式不准确......我只需要减少代码行数，因为它使我的代码看起来很破旧。

请提供建议！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T09:39:25.043

您是否尝试更改“窗口 -> 首选项 -> Java -> 代码样式 -> 格式化程序 -> 编辑”中的设置？尤其是“新行”和“换行”选项卡中的设置。

此外，如果您愿意，您可以在项目设置中找到相同的设置对话框，它只会影响您当前的项目。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T09:35:22.850

我正在使用下面的 xml 进行格式化。这可能会帮助你

```
<?xml version="1.0" encoding="UTF-8"?>
<profiles version="11">
<profile kind="CodeFormatterProfile" name="korada [built-in]" version="11">
<setting id="org.eclipse.jdt.core.formatter.insert_space_before_closing_paren_in_if" value="do not insert"/>
<setting id="org.eclipse.jdt.core.formatter.insert_space_after_colon_in_assert" value="insert"/>
<setting id="org.eclipse.jdt.core.formatter.brace_position_for_enum_constant" value="next_line"/>
<setting id="org.eclipse.jdt.core.formatter.insert_space_before_semicolon" value="do not insert"/>
<setting id="org.eclipse.jdt.core.formatter.align_type_members_on_columns" value="false"/>
<setting id="org.eclipse.jdt.core.formatter.insert_space_before_colon_in_case" value="do not insert"/>
<setting id="org.eclipse.jdt.core.formatter.comment.format_line_comments" value="true"/>
<setting id="org.eclipse.jdt.core.formatter.number_of_empty_lines_to_preserve" value="1"/>
<setting id="org.eclipse.jdt.core.formatter.insert_space_between_brackets_in_array_type_reference" value="do not insert"/>
<setting id="org.eclipse.jdt.core.formatter.insert_space_after_opening_paren_in_switch" value="do not insert"/>
<setting id="org.eclipse.jdt.core.formatter.blank_lines_between_type_declarations" value="1"/>
<setting id="org.eclipse.jdt.core.formatter.insert_space_before_parenthesized_expression_in_return" value="insert"/>
<setting id="org.eclipse.jdt.core.formatter.insert_new_line_in_empty_method_body" value="insert"/>
<setting id="org.eclipse.jdt.core.formatter.insert_space_before_opening_brace_in_annotation_type_declaration" value="insert"/>
<setting id="org.eclipse.jdt.core.formatter.indent_statements_compare_to_body" value="true"/>
<setting id="org.eclipse.jdt.core.formatter.insert_new_line_after_opening_brace_in_array_initializer" value="do not insert"/>
<setting id="org.eclipse.jdt.core.formatter.format_guardian_clause_on_one_line" value="false"/>
<setting id="org.eclipse.jdt.core.formatter.comment.insert_new_line_before_root_tags" value="insert"/>
<setting id="org.eclipse.jdt.core.formatter.insert_space_after_colon_in_for" value="insert"/>
<setting id="org.eclipse.jdt.core.formatter.tabulation.size" value="4"/>
<setting id="org.eclipse.jdt.core.formatter.insert_space_after_opening_angle_bracket_in_type_parameters" value="do not insert"/>
<setting id="org.eclipse.jdt.core.formatter.blank_lines_before_imports" value="1"/>
<setting id="org.eclipse.jdt.core.formatter.insert_space_after_colon_in_case" value="insert"/>
<setting id="org.eclipse.jdt.core.formatter.insert_space_before_comma_in_enum_constant_arguments" value="do not insert"/>
<setting id="org.eclipse.jdt.core.formatter.blank_lines_before_new_chunk" value="1"/>
<setting id="org.eclipse.jdt.core.formatter.continuation_indentation" value="2"/>
<setting id="org.eclipse.jdt.core.formatter.insert_space_before_binary_operator" value="insert"/>
<setting id="org.eclipse.jdt.core.formatter.insert_space_after_comma_in_constructor_declaration_parameters" value="insert"/>
<setting id="org.eclipse.jdt.core.formatter.insert_space_after_opening_paren_in_for" value="do not insert"/>
<setting id="org.eclipse.jdt.core.formatter.insert_space_before_comma_in_superinterfaces" value="do not insert"/>
<setting id="org.eclipse.jdt.core.formatter.alignment_for_parameters_in_method_declaration" value="0"/>
<setting id="org.eclipse.jdt.core.formatter.alignment_for_assignment" value="0"/>
<setting id="org.eclipse.jdt.core.formatter.blank_lines_before_member_type" value="1"/>
<setting id="org.eclipse.jdt.core.formatter.insert_space_before_comma_in_constructor_declaration_throws" value="do not insert"/>
<setting id="org.eclipse.jdt.core.formatter.alignment_for_conditional_expression" value="0"/>
<setting id="org.eclipse.jdt.core.formatter.insert_space_before_opening_paren_in_while" value="insert"/>
<setting id="org.eclipse.jdt.core.formatter.comment.indent_parameter_description" value="true"/>
<setting id="org.eclipse.jdt.core.formatter.comment.format_html" value="true"/>
<setting id="org.eclipse.jdt.core.formatter.insert_space_after_comma_in_allocation_expression" value="insert"/>
<setting id="org.eclipse.jdt.core.formatter.insert_space_after_comma_in_method_declaration_throws" value="insert"/>
<setting id="org.eclipse.jdt.core.formatter.insert_space_before_closing_paren_in_enum_constant" value="do not insert"/>
<setting id="org.eclipse.jdt.core.formatter.comment.format_source_code" value="true"/>
<setting id="org.eclipse.jdt.core.formatter.insert_space_after_comma_in_enum_declarations" value="insert"/>
<setting id="org.eclipse.jdt.core.formatter.insert_space_before_closing_angle_bracket_in_parameterized_type_reference" value="do not insert"/>
<setting id="org.eclipse.jdt.core.formatter.insert_space_before_closing_paren_in_annotation" value="do not insert"/>
<setting id="org.eclipse.jdt.core.formatter.insert_space_between_empty_parens_in_method_declaration" value="do not insert"/>
<setting id="org.eclipse.jdt.core.formatter.insert_space_before_colon_in_conditional" value="insert"/>
<setting id="org.eclipse.jdt.core.formatter.insert_space_before_unary_operator" value="do not insert"/>
<setting id="org.eclipse.jdt.core.formatter.insert_space_after_question_in_conditional" value="insert"/>
<setting id="org.eclipse.jdt.core.formatter.insert_new_line_in_empty_annotation_declaration" value="insert"/>
<setting id="org.eclipse.jdt.core.formatter.indentation.size" value="4"/>
<setting id="org.eclipse.jdt.core.formatter.insert_space_after_comma_in_multiple_local_declarations" value="insert"/>
<setting id="org.eclipse.jdt.core.formatter.insert_space_after_postfix_operator" value="do not insert"/>
<setting id="org.eclipse.jdt.core.formatter.alignment_for_superinterfaces_in_enum_declaration" value="0"/>
<setting id="org.eclipse.jdt.core.formatter.insert_space_after_comma_in_enum_constant_arguments" value="insert"/>
<setting id="org.eclipse.jdt.core.formatter.insert_space_before_semicolon_in_for" value="do not insert"/>
<setting id="org.eclipse.jdt.core.formatter.insert_space_before_closing_paren_in_constructor_declaration" value="do not insert"/>
<setting id="org.eclipse.jdt.core.formatter.insert_space_after_at_in_annotation_type_declaration" value="do not insert"/>
<setting id="org.eclipse.jdt.core.formatter.insert_space_after_comma_in_explicitconstructorcall_arguments" value="insert"/>
<setting id="org.eclipse.jdt.core.formatter.brace_position_for_anonymous_type_declaration" value="next_line"/>
<setting id="org.eclipse.jdt.core.formatter.lineSplit" value="250"/>
<setting id="org.eclipse.jdt.core.formatter.insert_space_before_opening_brace_in_type_declaration" value="insert"/>
<setting id="org.eclipse.jdt.core.formatter.insert_space_before_opening_brace_in_block" value="insert"/>
<setting id="org.eclipse.jdt.core.formatter.insert_new_line_in_empty_type_declaration" value="insert"/>
<setting id="org.eclipse.jdt.core.formatter.insert_space_before_comma_in_method_invocation_arguments" value="do not insert"/>
<setting id="org.eclipse.jdt.core.formatter.insert_space_before_closing_paren_in_while" value="do not insert"/>
<setting id="org.eclipse.jdt.core.formatter.insert_space_before_opening_brace_in_enum_constant" value="insert"/>
<setting id="org.eclipse.jdt.core.formatter.comment.clear_blank_lines_in_block_comment" value="false"/>
<setting id="org.eclipse.jdt.core.formatter.insert_space_before_at_in_annotation_type_declaration" value="insert"/>
<setting id="org.eclipse.jdt.core.formatter.insert_new_line_in_empty_enum_constant" value="insert"/>
<setting id="org.eclipse.jdt.core.formatter.insert_space_after_opening_angle_bracket_in_type_arguments" value="do not insert"/>
<setting id="org.eclipse.jdt.core.formatter.insert_space_before_opening_angle_bracket_in_type_parameters" value="do not insert"/>
<setting id="org.eclipse.jdt.core.formatter.insert_new_line_before_closing_brace_in_array_initializer" value="do not insert"/>
<setting id="org.eclipse.jdt.core.formatter.brace_position_for_array_initializer" value="next_line"/>
<setting id="org.eclipse.jdt.core.formatter.alignment_for_superclass_in_type_declaration" value="16"/>
<setting id="org.eclipse.jdt.core.formatter.insert_space_after_opening_paren_in_cast" value="do not insert"/>
<setting id="org.eclipse.jdt.core.formatter.insert_new_line_in_empty_enum_declaration" value="insert"/>
<setting id="org.eclipse.jdt.core.formatter.insert_space_before_closing_paren_in_synchronized" value="do not insert"/>
<setting id="org.eclipse.jdt.core.formatter.comment.format_header" value="false"/>
<setting id="org.eclipse.jdt.core.formatter.insert_space_before_colon_in_for" value="insert"/>
<setting id="org.eclipse.jdt.core.formatter.insert_space_after_at_in_annotation" value="do not insert"/>
<setting id="org.eclipse.jdt.core.formatter.insert_new_line_before_else_in_if_statement" value="insert"/>
<setting id="org.eclipse.jdt.core.formatter.alignment_for_arguments_in_explicit_constructor_call" value="0"/>
<setting id="org.eclipse.jdt.core.formatter.insert_space_after_opening_paren_in_method_declaration" value="do not insert"/>
<setting id="org.eclipse.jdt.core.formatter.insert_space_before_comma_in_allocation_expression" value="do not insert"/>
<setting id="org.eclipse.jdt.core.formatter.alignment_for_multiple_fields" value="16"/>
<setting id="org.eclipse.jdt.core.formatter.insert_new_line_at_end_of_file_if_missing" value="do not insert"/>
<setting id="org.eclipse.jdt.core.formatter.insert_space_before_comma_in_explicitconstructorcall_arguments" value="do not insert"/>
<setting id="org.eclipse.jdt.core.formatter.insert_new_line_in_empty_block" value="insert"/>
<setting id="org.eclipse.jdt.core.formatter.insert_space_after_closing_paren_in_cast" value="insert"/>
<setting id="org.eclipse.jdt.core.formatter.insert_new_line_before_finally_in_try_statement" value="insert"/>
<setting id="org.eclipse.jdt.core.formatter.keep_then_statement_on_same_line" value="false"/>
<setting id="org.eclipse.jdt.core.formatter.insert_space_after_binary_operator" value="insert"/>
<setting id="org.eclipse.jdt.core.formatter.indent_body_declarations_compare_to_annotation_declaration_header" value="true"/>
<setting id="org.eclipse.jdt.core.formatter.insert_space_before_opening_brace_in_constructor_declaration" value="insert"/>
<setting id="org.eclipse.jdt.core.formatter.insert_space_before_closing_paren_in_method_declaration" value="do not insert"/>
<setting id="org.eclipse.jdt.core.formatter.alignment_for_expressions_in_array_initializer" value="0"/>
<setting id="org.eclipse.jdt.core.formatter.insert_space_before_comma_in_method_declaration_parameters" value="do not insert"/>
<setting id="org.eclipse.jdt.core.formatter.brace_position_for_method_declaration" value="next_line"/>
<setting id="org.eclipse.jdt.core.formatter.insert_space_after_opening_paren_in_enum_constant" value="do not insert"/>
<setting id="org.eclipse.jdt.core.formatter.insert_space_between_empty_parens_in_annotation_type_member_declaration" value="do not insert"/>
<setting id="org.eclipse.jdt.core.formatter.insert_space_before_opening_angle_bracket_in_type_arguments" value="do not insert"/>
<setting id="org.eclipse.jdt.core.formatter.insert_space_after_opening_angle_bracket_in_parameterized_type_reference" value="do not insert"/>
<setting id="org.eclipse.jdt.core.formatter.insert_space_before_opening_paren_in_annotation_type_member_declaration" value="do not insert"/>
<setting id="org.eclipse.jdt.core.formatter.blank_lines_before_field" value="0"/>
<setting id="org.eclipse.jdt.core.formatter.alignment_for_throws_clause_in_method_declaration" value="0"/>
<setting id="org.eclipse.jdt.core.formatter.insert_space_before_opening_paren_in_method_declaration" value="do not insert"/>
<setting id="org.eclipse.jdt.core.formatter.insert_space_before_comma_in_constructor_declaration_parameters" value="do not insert"/>
<setting id="org.eclipse.jdt.core.formatter.insert_space_after_comma_in_type_parameters" value="insert"/>
<setting id="org.eclipse.jdt.core.formatter.insert_space_before_opening_paren_in_switch" value="insert"/>
<setting id="org.eclipse.jdt.core.formatter.comment.format_javadoc_comments" value="true"/>
<setting id="org.eclipse.jdt.core.formatter.insert_space_after_opening_bracket_in_array_allocation_expression" value="do not insert"/>
<setting id="org.eclipse.jdt.core.formatter.insert_space_before_opening_paren_in_annotation" value="do not insert"/>
<setting id="org.eclipse.jdt.core.formatter.comment.format_block_comments" value="true"/>
<setting id="org.eclipse.jdt.core.formatter.insert_space_before_opening_brace_in_array_initializer" value="insert"/>
<setting id="org.eclipse.jdt.core.formatter.insert_new_line_in_empty_anonymous_type_declaration" value="insert"/>
<setting id="org.eclipse.jdt.core.formatter.alignment_for_binary_expression" value="0"/>
<setting id="org.eclipse.jdt.core.formatter.insert_space_between_empty_braces_in_array_initializer" value="do not insert"/>
<setting id="org.eclipse.jdt.core.formatter.wrap_before_binary_operator" value="true"/>
<setting id="org.eclipse.jdt.core.formatter.blank_lines_after_package" value="1"/>
<setting id="org.eclipse.jdt.core.formatter.insert_space_before_opening_paren_in_catch" value="insert"/>
<setting id="org.eclipse.jdt.core.formatter.alignment_for_superinterfaces_in_type_declaration" value="16"/>
<setting id="org.eclipse.jdt.core.formatter.insert_space_before_colon_in_labeled_statement" value="do not insert"/>
<setting id="org.eclipse.jdt.core.formatter.insert_space_after_semicolon_in_for" value="insert"/>
<setting id="org.eclipse.jdt.core.formatter.insert_space_after_and_in_type_parameter" value="insert"/>
<setting id="org.eclipse.jdt.core.formatter.insert_space_after_opening_paren_in_catch" value="do not insert"/>
<setting id="org.eclipse.jdt.core.formatter.insert_new_line_before_while_in_do_statement" value="insert"/>
<setting id="org.eclipse.jdt.core.formatter.blank_lines_between_import_groups" value="1"/>
<setting id="org.eclipse.jdt.core.formatter.insert_space_before_comma_in_method_declaration_throws" value="do not insert"/>
<setting id="org.eclipse.jdt.core.formatter.insert_space_after_prefix_operator" value="do not insert"/>
<setting id="org.eclipse.jdt.core.formatter.insert_space_before_ellipsis" value="do not insert"/>
<setting id="org.eclipse.jdt.core.formatter.brace_position_for_constructor_declaration" value="next_line"/>
<setting id="org.eclipse.jdt.core.formatter.insert_space_after_question_in_wildcard" value="do not insert"/>
<setting id="org.eclipse.jdt.core.formatter.comment.clear_blank_lines_in_javadoc_comment" value="false"/>
<setting id="org.eclipse.jdt.core.formatter.alignment_for_arguments_in_allocation_expression" value="0"/>
<setting id="org.eclipse.jdt.core.formatter.insert_space_before_comma_in_type_parameters" value="do not insert"/>
<setting id="org.eclipse.jdt.core.formatter.blank_lines_after_imports" value="1"/>
<setting id="org.eclipse.jdt.core.formatter.insert_space_after_colon_in_conditional" value="insert"/>
<setting id="org.eclipse.jdt.core.formatter.insert_space_before_opening_brace_in_enum_declaration" value="insert"/>
<setting id="org.eclipse.jdt.core.formatter.insert_space_after_comma_in_parameterized_type_reference" value="insert"/>
<setting id="org.eclipse.jdt.core.formatter.insert_new_line_before_catch_in_try_statement" value="insert"/>
<setting id="org.eclipse.jdt.core.compiler.problem.assertIdentifier" value="error"/>
<setting id="org.eclipse.jdt.core.formatter.alignment_for_arguments_in_enum_constant" value="0"/>
<setting id="org.eclipse.jdt.core.formatter.brace_position_for_block_in_case" value="next_line"/>
<setting id="org.eclipse.jdt.core.formatter.brace_position_for_enum_declaration" value="next_line"/>
<setting id="org.eclipse.jdt.core.formatter.insert_space_before_comma_in_for_increments" value="do not insert"/>
<setting id="org.eclipse.jdt.core.formatter.insert_space_before_opening_paren_in_for" value="insert"/>
<setting id="org.eclipse.jdt.core.formatter.blank_lines_before_first_class_body_declaration" value="0"/>
<setting id="org.eclipse.jdt.core.formatter.keep_else_statement_on_same_line" value="false"/>
<setting id="org.eclipse.jdt.core.formatter.indent_empty_lines" value="false"/>
<setting id="org.eclipse.jdt.core.formatter.comment.insert_new_line_for_parameter" value="insert"/>
<setting id="org.eclipse.jdt.core.formatter.insert_space_before_parenthesized_expression_in_throw" value="insert"/>
<setting id="org.eclipse.jdt.core.formatter.insert_space_after_opening_paren_in_while" value="do not insert"/>
<setting id="org.eclipse.jdt.core.formatter.insert_space_after_closing_brace_in_block" value="insert"/>
<setting id="org.eclipse.jdt.core.compiler.source" value="1.5"/>
<setting id="org.eclipse.jdt.core.formatter.insert_space_after_comma_in_for_increments" value="insert"/>
<setting id="org.eclipse.jdt.core.formatter.indent_body_declarations_compare_to_enum_declaration_header" value="true"/>
<setting id="org.eclipse.jdt.core.formatter.insert_space_between_empty_parens_in_constructor_declaration" value="do not insert"/>
<setting id="org.eclipse.jdt.core.formatter.comment.line_length" value="80"/>
<setting id="org.eclipse.jdt.core.formatter.insert_space_before_prefix_operator" value="do not insert"/>
<setting id="org.eclipse.jdt.core.formatter.brace_position_for_type_declaration" value="next_line"/>
<setting id="org.eclipse.jdt.core.formatter.insert_space_after_assignment_operator" value="insert"/>
<setting id="org.eclipse.jdt.core.compiler.compliance" value="1.5"/>
<setting id="org.eclipse.jdt.core.formatter.insert_space_before_opening_paren_in_method_invocation" value="do not insert"/>
<setting id="org.eclipse.jdt.core.formatter.insert_space_before_closing_angle_bracket_in_type_arguments" value="do not insert"/>
<setting id="org.eclipse.jdt.core.formatter.compact_else_if" value="true"/>
<setting id="org.eclipse.jdt.core.formatter.insert_space_before_opening_bracket_in_array_reference" value="do not insert"/>
<setting id="org.eclipse.jdt.core.formatter.insert_space_before_comma_in_enum_declarations" value="do not insert"/>
<setting id="org.eclipse.jdt.core.formatter.insert_space_before_question_in_conditional" value="insert"/>
<setting id="org.eclipse.jdt.core.formatter.insert_space_before_closing_angle_bracket_in_type_parameters" value="do not insert"/>
<setting id="org.eclipse.jdt.core.formatter.insert_space_after_opening_paren_in_method_invocation" value="do not insert"/>
<setting id="org.eclipse.jdt.core.formatter.use_tabs_only_for_leading_indentations" value="false"/>
<setting id="org.eclipse.jdt.core.formatter.insert_space_after_comma_in_type_arguments" value="insert"/>
<setting id="org.eclipse.jdt.core.formatter.brace_position_for_switch" value="next_line"/>
<setting id="org.eclipse.jdt.core.formatter.alignment_for_parameters_in_constructor_declaration" value="0"/>
<setting id="org.eclipse.jdt.core.formatter.insert_space_between_empty_brackets_in_array_allocation_expression" value="do not insert"/>
<setting id="org.eclipse.jdt.core.formatter.insert_space_before_closing_paren_in_for" value="do not insert"/>
<setting id="org.eclipse.jdt.core.formatter.insert_space_before_opening_paren_in_constructor_declaration" value="do not insert"/>
<setting id="org.eclipse.jdt.core.formatter.insert_space_before_opening_paren_in_synchronized" value="insert"/>
<setting id="org.eclipse.jdt.core.formatter.number_of_blank_lines_at_beginning_of_method_body" value="0"/>
<setting id="org.eclipse.jdt.core.formatter.insert_space_after_comma_in_annotation" value="insert"/>
<setting id="org.eclipse.jdt.core.formatter.insert_space_before_opening_angle_bracket_in_parameterized_type_reference" value="do not insert"/>
<setting id="org.eclipse.jdt.core.formatter.indent_switchstatements_compare_to_switch" value="false"/>
<setting id="org.eclipse.jdt.core.formatter.insert_space_after_opening_paren_in_constructor_declaration" value="do not insert"/>
<setting id="org.eclipse.jdt.core.formatter.insert_space_after_opening_paren_in_annotation" value="do not insert"/>
<setting id="org.eclipse.jdt.core.formatter.insert_space_after_opening_paren_in_if" value="do not insert"/>
<setting id="org.eclipse.jdt.core.formatter.insert_space_before_colon_in_default" value="do not insert"/>
<setting id="org.eclipse.jdt.core.compiler.problem.enumIdentifier" value="error"/>
<setting id="org.eclipse.jdt.core.formatter.insert_space_before_comma_in_annotation" value="do not insert"/>
<setting id="org.eclipse.jdt.core.formatter.insert_space_between_empty_parens_in_enum_constant" value="do not insert"/>
<setting id="org.eclipse.jdt.core.formatter.insert_space_after_opening_bracket_in_array_reference" value="do not insert"/>
<setting id="org.eclipse.jdt.core.formatter.insert_space_before_opening_bracket_in_array_type_reference" value="do not insert"/>
<setting id="org.eclipse.jdt.core.formatter.insert_space_after_comma_in_array_initializer" value="insert"/>
<setting id="org.eclipse.jdt.core.formatter.insert_space_before_closing_paren_in_catch" value="do not insert"/>
<setting id="org.eclipse.jdt.core.formatter.insert_space_after_opening_paren_in_synchronized" value="do not insert"/>
<setting id="org.eclipse.jdt.core.formatter.keep_empty_array_initializer_on_one_line" value="true"/>
<setting id="org.eclipse.jdt.core.compiler.codegen.targetPlatform" value="1.5"/>
<setting id="org.eclipse.jdt.core.formatter.insert_space_before_closing_bracket_in_array_reference" value="do not insert"/>
<setting id="org.eclipse.jdt.core.formatter.insert_space_before_closing_paren_in_switch" value="do not insert"/>
<setting id="org.eclipse.jdt.core.formatter.insert_space_before_closing_brace_in_array_initializer" value="insert"/>
<setting id="org.eclipse.jdt.core.formatter.alignment_for_compact_if" value="16"/>
<setting id="org.eclipse.jdt.core.formatter.insert_space_before_question_in_wildcard" value="do not insert"/>
<setting id="org.eclipse.jdt.core.formatter.insert_space_before_colon_in_assert" value="insert"/>
<setting id="org.eclipse.jdt.core.formatter.insert_space_before_opening_brace_in_method_declaration" value="insert"/>
<setting id="org.eclipse.jdt.core.formatter.insert_space_after_ellipsis" value="insert"/>
<setting id="org.eclipse.jdt.core.formatter.alignment_for_arguments_in_qualified_allocation_expression" value="0"/>
<setting id="org.eclipse.jdt.core.formatter.indent_statements_compare_to_block" value="true"/>
<setting id="org.eclipse.jdt.core.formatter.insert_space_after_opening_paren_in_parenthesized_expression" value="do not insert"/>
<setting id="org.eclipse.jdt.core.formatter.indent_body_declarations_compare_to_type_header" value="true"/>
<setting id="org.eclipse.jdt.core.formatter.insert_space_after_closing_angle_bracket_in_type_parameters" value="insert"/>
<setting id="org.eclipse.jdt.core.formatter.insert_space_before_comma_in_type_arguments" value="do not insert"/>
<setting id="org.eclipse.jdt.core.formatter.keep_imple_if_on_one_line" value="false"/>
<setting id="org.eclipse.jdt.core.formatter.insert_space_between_empty_parens_in_method_invocation" value="do not insert"/>
<setting id="org.eclipse.jdt.core.formatter.insert_space_before_comma_in_multiple_local_declarations" value="do not insert"/>
<setting id="org.eclipse.jdt.core.formatter.brace_position_for_annotation_type_declaration" value="next_line"/>
<setting id="org.eclipse.jdt.core.formatter.alignment_for_selector_in_method_invocation" value="0"/>
<setting id="org.eclipse.jdt.core.formatter.indent_body_declarations_compare_to_enum_constant_header" value="true"/>
<setting id="org.eclipse.jdt.core.formatter.insert_space_before_opening_brace_in_switch" value="insert"/>
<setting id="org.eclipse.jdt.core.formatter.insert_space_before_assignment_operator" value="insert"/>
<setting id="org.eclipse.jdt.core.formatter.never_indent_line_comments_on_first_column" value="false"/>
<setting id="org.eclipse.jdt.core.formatter.insert_space_after_unary_operator" value="do not insert"/>
<setting id="org.eclipse.jdt.core.formatter.insert_space_before_opening_paren_in_if" value="insert"/>
<setting id="org.eclipse.jdt.core.formatter.insert_space_after_colon_in_labeled_statement" value="insert"/>
<setting id="org.eclipse.jdt.core.formatter.insert_space_before_opening_bracket_in_array_allocation_expression" value="do not insert"/>
<setting id="org.eclipse.jdt.core.formatter.indent_switchstatements_compare_to_cases" value="true"/>
<setting id="org.eclipse.jdt.core.formatter.continuation_indentation_for_array_initializer" value="2"/>
<setting id="org.eclipse.jdt.core.formatter.comment.indent_root_tags" value="true"/>
<setting id="org.eclipse.jdt.core.formatter.alignment_for_enum_constants" value="0"/>
<setting id="org.eclipse.jdt.core.formatter.insert_space_before_comma_in_parameterized_type_reference" value="do not insert"/>
<setting id="org.eclipse.jdt.core.formatter.insert_space_before_closing_paren_in_parenthesized_expression" value="do not insert"/>
<setting id="org.eclipse.jdt.core.formatter.insert_space_after_comma_in_constructor_declaration_throws" value="insert"/>
<setting id="org.eclipse.jdt.core.formatter.alignment_for_throws_clause_in_constructor_declaration" value="0"/>
<setting id="org.eclipse.jdt.core.formatter.alignment_for_arguments_in_method_invocation" value="0"/>
<setting id="org.eclipse.jdt.core.formatter.tabulation.char" value="tab"/>
<setting id="org.eclipse.jdt.core.formatter.blank_lines_before_package" value="0"/>
<setting id="org.eclipse.jdt.core.formatter.insert_space_after_comma_in_method_invocation_arguments" value="insert"/>
<setting id="org.eclipse.jdt.core.formatter.indent_breaks_compare_to_cases" value="true"/>
<setting id="org.eclipse.jdt.core.formatter.insert_space_before_comma_in_for_inits" value="do not insert"/>
<setting id="org.eclipse.jdt.core.formatter.insert_space_before_comma_in_multiple_field_declarations" value="do not insert"/>
<setting id="org.eclipse.jdt.core.formatter.insert_space_after_comma_in_superinterfaces" value="insert"/>
<setting id="org.eclipse.jdt.core.formatter.put_empty_statement_on_new_line" value="true"/>
<setting id="org.eclipse.jdt.core.formatter.insert_space_after_comma_in_method_declaration_parameters" value="insert"/>
<setting id="org.eclipse.jdt.core.formatter.blank_lines_before_method" value="1"/>
<setting id="org.eclipse.jdt.core.formatter.insert_space_after_comma_in_multiple_field_declarations" value="insert"/>
<setting id="org.eclipse.jdt.core.formatter.insert_space_after_comma_in_for_inits" value="insert"/>
<setting id="org.eclipse.jdt.core.formatter.insert_space_before_opening_brace_in_anonymous_type_declaration" value="insert"/>
<setting id="org.eclipse.jdt.core.formatter.insert_new_line_after_annotation" value="insert"/>
<setting id="org.eclipse.jdt.core.formatter.insert_space_before_closing_paren_in_cast" value="do not insert"/>
<setting id="org.eclipse.jdt.core.formatter.insert_space_after_closing_angle_bracket_in_type_arguments" value="insert"/>
<setting id="org.eclipse.jdt.core.formatter.never_indent_block_comments_on_first_column" value="false"/>
<setting id="org.eclipse.jdt.core.formatter.insert_space_before_comma_in_array_initializer" value="do not insert"/>
<setting id="org.eclipse.jdt.core.formatter.insert_space_before_opening_paren_in_parenthesized_expression" value="do not insert"/>
<setting id="org.eclipse.jdt.core.formatter.insert_space_before_opening_paren_in_enum_constant" value="do not insert"/>
<setting id="org.eclipse.jdt.core.formatter.insert_space_before_closing_paren_in_method_invocation" value="do not insert"/>
<setting id="org.eclipse.jdt.core.formatter.insert_space_before_postfix_operator" value="do not insert"/>
<setting id="org.eclipse.jdt.core.formatter.brace_position_for_block" value="next_line"/>
<setting id="org.eclipse.jdt.core.formatter.insert_space_after_opening_brace_in_array_initializer" value="insert"/>
<setting id="org.eclipse.jdt.core.formatter.insert_space_before_closing_bracket_in_array_allocation_expression" value="do not insert"/>
<setting id="org.eclipse.jdt.core.formatter.insert_space_before_and_in_type_parameter" value="insert"/>
</profile>
</profiles> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-20T09:36:32.160

您可以在 Preferences 菜单中增加 Eclipse 使用的最大行长度：

```
Window -> Preferences - Java -> Code Style -> Formatter 
```

创建一个自定义格式化程序，对其进行编辑，转到`Line Wrapping`选项卡并增加第一个值。你几乎可以改变任何你想要的关于自动格式化程序的东西。

正如 adou 所指出的，您还可以编辑基于项目的首选项并定义项目特定的格式化程序。

# jpeg - 渐进式霍夫曼表

> ID：12035260
> 
> 赞同：3
> 
> 时间：2012-08-20T09:33:26.603
> 
> 标签：jpeg

你们中有人知道用于渐进式 jpeg 编码的事实上的标准霍夫曼表吗？标准中有许多实现使用的基线编码表的示例，这些示例似乎足以满足符号频率等方面的大多数用途，但我似乎无法找到包含符号`EOB1`到`EOB14`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-10-06T17:55:37.633

我不知道有这样的表。该方法是对数据进行两次遍历，并为问题中的扫描找到最佳表。

# rhodes - 找不到 rhodes，需要 3.2.0 或更高版本

> ID：12035263
> 
> 赞同：0
> 
> 时间：2012-08-20T09:33:45.820
> 
> 标签：rhodes

我刚开始使用 Rhodes 跨平台移动应用程序开发。我按照 rhostudio 教程安装 RhoStudio 并开始创建 Rhodes 应用程序。

在创建新项目向导中单击完成按钮后，我会收到一条错误消息：

找不到 Rhodes，需要 rhodes 版本等于或更高 3.0.1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T10:03:09.803

那是因为 /YOURPATH/bin/ruby 不在 PATH 中，你有两个选择：

1.  将其添加到 PATH

2.  从终端运行 Eclipse。（仅当您使用 rvm 时，因为从 shell 启动时 rvm 修改了 PATH，所以从 GUI 启动 Eclipse 将不起作用。）

# php - 如何列出当前显示的文章父类别的所有文章

> ID：12035265
> 
> 赞同：0
> 
> 时间：2012-08-20T09:33:50.283
> 
> 标签：php, joomla, joomla-template

该列表将用作文章旁边的侧边栏菜单。我该怎么做？！从文章模板中，我唯一设法检索的是当前文章类别标题，但我不知道如何获取类别对象本身：

```
$this->item->category_title 
```

是否可以通过更改或覆盖默认文章代码来实现这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T10:21:15.633

简短的回答 - 不。该模板用于定义主要内容区域和模块位置的布局。

应通过[Joomla! 定义额外的功能！扩展](http://extensions.joomla.org)，对于您正在寻找的特定功能，您将需要来自[文章列表部分](http://extensions.joomla.org/extensions/news-display/articles-display/articles-listing)的模块。

您还没有指定 Joomla 的版本！但我们之前在 Joomla 上使用过[ArtCats](http://extensions.joomla.org/extensions/news-display/articles-display/articles-listing/5204)！1.5。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T14:34:37.707

如果我理解正确，这是可能的。但是，*cppl*指出的模块可能会更好。这需要数据库查询，并且与模板/布局无关。无论如何，这可能会奏效：

在 templates/your_template/html/com_content/article/default.php 中：

```
<?php
$db = JFactory::getDBO();
$query = $db->getQuery(true);
$query->select('a.id, a.title');
$query->from('#__content AS a');
$query->where('a.catid = '.(int)$this->item->catid);
$query->where('a.state = 1');
$query->where('a.id != '.(int)$this->item->id);
$db->setQuery($query);
$articles = $db->loadObjectList();
?>
<ul>
    <?php foreach($articles as $item) : ?>
    <ul>
        <li><?php echo $item->title; ?></li>
    </ul>
    <?php endforeach; ?>
</ul> 
```

# backbone.js - Backbone.js，在遗留应用程序中拆分文件

> ID：12035266
> 
> 赞同：2
> 
> 时间：2012-08-20T09:33:51.190
> 
> 标签：backbone.js, requirejs

我在遗留应用程序中使用backbone.js 将单独的页面重写为单独的主干工作。

我没有使用任何路由，它不是一个完整的单页应用程序。

只有某些页面是单独的backbone.js 应用程序。

目前，对于使用它的每个页面，我都将所有主干 javasript 放在一个文件中，这很难处理。

在逐页的基础上使用诸如requirejs之类的东西是明智的，还是我可以做一些更好的事情来在开发中拆分页面并在生产中提供一个页面？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T19:23:17.033

这在很大程度上取决于您现有的代码库是什么样的。

RequireJS 是一个很棒的工具……如果您现有的代码设置为支持它，或者您有足够小的代码库能够在不破坏所有内容的情况下转换它。然而，并不是所有的遗留 JS 代码都是如此，特别是如果它是一个更大系统的一部分（我个人在我正在处理的一个 Backbone 项目中遇到了这个问题）。如果可以，那么一定要利用它。据我所知，使用 RequireJS 的最大优势是它实际上不会获取和加载 Javascript 文件，直到您需要它们。因此，您可以在所有页面中调用一个 RequireJS，并且只在需要时下载您需要的内容。

但是，还有其他方法可以在生产时组合您的 Javascript 代码，这在很大程度上取决于您的设置。许多内容管理系统都包含“缩小”脚本，可以自动处理所有 Javascript 文件。您也可以使用[Minify](http://code.google.com/p/minify/)、[YUI Compressor](http://developer.yahoo.com/yui/compressor/)或其他许多缩小工具之一“手动”完成。（您也可以“真正地手工”完成，并在多个文件中开发并通过复制+粘贴将它们组合起来，但这确实比必要的工作更多。）

不管你怎么做，我强烈建议你把你的项目分成多个文件（不仅是不同项目的文件，而且是项目中的多个文件，如果它们有重要的代码，则保存每个视图和模型）。它使维护变得无限容易。

# css - 防止意外事件在元素上冒泡

> ID：12035272
> 
> 赞同：1
> 
> 时间：2012-08-20T09:34:45.080
> 
> 标签：css, dom, jquery

我正在尝试在列表元素上创建一个简单的悬停效果。但是，当鼠标悬停在列表项上时，显示的元素之间存在小的间隙。这会强制`mouseleave`触发事件，这是不需要的。

这是[小提琴](http://jsfiddle.net/pvyVZ/)演示。将鼠标悬停在列表项上后尝试转到小框。

HTML：

```
<ul>
    <li>test <div class="block">Block</div></li>
    <li>test2 <div class="block">Block descriptions</div></li>
</ul>​ 
```

CSS：

```
ul { width: 50px; }
ul li { width: 50px; height: 50px; background: #c00; margin: 0 0 10px 0; }
li .block { 
    position: absolute; 
    margin: 0 0 0 70px;
    background: #ddd;
    display: none;
} 
```

JavaScript：

```
$("ul li").hover(function() {
    $(this).children(".block").stop().fadeIn();
}, function() {
    $(this).children(".block").stop().fadeOut();
});​ 
```

如何防止这种影响？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T09:38:17.387

试试**[这个演示](http://jsfiddle.net/pvyVZ/22/)**：

```
$('ul li').on("mouseenter mouseleave",function( e ){
   var $this = $(this);
   if (e.type == 'mouseenter') {
       clearTimeout( $this.data('timeout') );
       $this.find('.block').stop().fadeTo(400,1);
   }else{
       $this.data( 'timeout', setTimeout(function(){
           $this.find('.block').stop().fadeTo(200,0, function(){
             $(this).hide(); 
           });
       },200) );
   }
}); 
```

它的作用是：`data`为当前悬停`li`元素的属性设置一个超时值，该值将像*悬停意图*一样等待 200 毫秒，以等待元素上的 mouseenter`.block`保持元素可见。一旦鼠标到达您的块元素，它将重置超时。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T09:46:08.777

像这样的东西应该工作。可能需要一些调整。

[http://jsfiddle.net/G5YfR/](http://jsfiddle.net/G5YfR/)

```
var fn = function(elem) {
    $(elem).children(".block").fadeOut();
};
var timeout;
$("ul li").on("mouseenter", function() {
    var that = this;
    clearTimeout(timeout);
    $(this).children(".block").fadeIn();
}).on("mouseleave", function() {
    var that = this;

    timeout = setTimeout(function() {
        fn(that)
    }, 1000);
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T09:48:16.360

您有两个附加了鼠标事件处理程序的元素，并且它们彼此相距一小段距离，因此当鼠标在前往另一个元素的途中离开一个元素时，它会超出两个元素并再次触发事件处理程序等.

您可以将两个元素都放在一个包装元素中，并将事件处理程序附加到该元素

```
<ul>
    <li><div>test <div class="block">Block</div></div></li>
    <li><div>test2 <div class="block">Block descriptions</div></div></li>
</ul>​​​​​​​​​​​​​​​​​​​ 
```

js：

```
$("ul li").on({
    mouseenter: function() {
        $(".block", this).fadeIn();
    },
    mouseleave: function() {
        $(".block", this).fadeOut();
    }
});​ 
```

[**小提琴**](http://jsfiddle.net/pvyVZ/6/)

或者您可以尝试猜测移动鼠标所需的时间并使用一点超时来伪造它：

```
var timer;

$("ul li").on({
    mouseenter: function() {
        clearTimeout(timer);
        $(this).children(".block").fadeIn();
    },
    mouseleave: function() {
        var self = this;
        timer = setTimeout(function() {
            $(self).children(".block").fadeOut();
        }, 400);
    }
});​ 
```

[**小提琴**](http://jsfiddle.net/pvyVZ/4/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-20T10:18:19.333

该`mouseleave`事件被触发是因为当您将鼠标移到孩子身上时，您确实离开了元素。唯一的解决方案是扩展`li`元素的宽度。

保持外观不变，我建议将红色框移到自己的元素中，例如：

```
<ul>
    <li>
        <span class="icon">test</span> 
        <span class="block">Block</span>
    </li>
    <li>
        <span class="icon">test2</span> 
        <span class="block">Block descriptions</span>
    </li>
</ul>​ 
```

并将 CSS 更改为：

```
li span {
    display: inline-block;
    vertical-align: middle;
}

li .icon {
    width: 50px; 
    height: 50px; 
    background: #c00;
}

li .block { 
    margin: 0 0 0 70px;
    background: #ddd;
    display: none;
} 
```

该`li`元素延伸到两个孩子：[**DEMO**](http://jsfiddle.net/pvyVZ/10/)。~~请注意，这`display: inline-block`可能不适用于较旧的 IE 版本。~~（根据[http://caniuse.com/inline-block](http://caniuse.com/inline-block)应该没问题）。

# javascript - 在脚本标签中包含一个 javascript 文件

> ID：12035273
> 
> 赞同：2
> 
> 时间：2012-08-20T09:34:46.230
> 
> 标签：javascript, jquery, google-analytics, web-analytics

我正在研究一种在某些脚本标签中包含 JavaScript 文件的方法。我有一个 Google Analytics 跟踪代码的大型 JavaScript 文件，我需要将它包含在我的代码中的某个位置。这是我下面的代码：

```
<script type="text/javascript">
var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-123456789']);
<script type="text/javascript" src="/scripts/search_engines.js"></script>
_gaq.push(['_trackPageview']);
</script> 
```

我需要在`search_engines.js` **之前**有`_trackPageview`，但语法显然是无效的。

`search_engines.js`有 290 行：

```
_gaq.push(
['_addOrganic','advancedsearch2.virginmedia.com','SearchQuery',true],
['_addOrganic','alltheweb','q',true],
['_addOrganic','ananzi','qt',true], 
```

我正在寻找一个 jQuery 的 addScript，但这似乎没有提供我正在寻找的东西。

有没有办法在我的脚本标签中包含 JavaScript 文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T09:36:27.793

通过 AJAX 加载脚本并在回调中运行相关代码。这对于 jQuery 来说是微不足道的：

```
$.getScript('/scripts/search_engines.js').done(function() {
    _gaq.push(['_trackPageview']);
}); 
```

或者，只需将整个 GA 代码放在一个 JS 包含中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T09:49:27.887

或者你可以这样使用：

```
<script type="text/javascript">
var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-123456789']);
</script>
<script type="text/javascript">
  document.write(unescape(%3Cscript type="text/javascript" src="/scripts/search_engines.js"%3E%3C/script%3E)); 
</script>
<script type="text/javascript">
  _gaq.push(['_trackPageview']);
</script> 
```

# c++ - 如何将原始数组中的 memcpy 等效为 std::vector？

> ID：12035276
> 
> 赞同：7
> 
> 时间：2012-08-20T09:34:59.787
> 
> 标签：c++, stl, vector, memcpy

我有一个类（在许多其他事物中）有一个指向 unsigned char 的指针，该指针被删除并重新分配以存储来自另一个数组的一些数据。这是用一个函数完成的

```
 class MyClass {
  private:
      unsigned char* m_Buffer;
      int m_BufferSize;
  public:
      bool SetBuffer(int iSize, const unsigned char* pArray); 
 };

 bool MyClass::SetBuffer(int iSize, const unsigned char* pArray) {
     bool bOK = false;
     if (pArray != NULL  && iSize > 0) {
         delete [] m_Buffer;
         m_Buffer = new unsigned char[iSize];
         memcpy(m_Buffer,pArray,iSize);
         m_BufferSize = iSize;
         bOK = true;
      }
      return bOK;
  } 
```

我根本不喜欢这段代码，我真的很想用`std::vector<unsigned char>`. 我的问题是，我将如何执行 memcpy 方面？如果我将向量作为参数传递给我的函数，我可以使用迭代器复制它，但我无法控制参数参数类型，所以我坚持使用`unsigned char*`. 有没有一种方法可以使用迭代器，或者将向量调整为正确的大小，然后访问其内部数组，以便我仍然可以使用 复制数据`memcpy`？或者甚至更好的东西使用迭代器？我知道我可以使用循环，`push_back`但这对我来说似乎效率低下。任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-08-20T09:39:50.793

实际上，迭代器是从指针建模的，因此数组中的指针被认为是实现这一`RandomAccessIterator`概念。

所以：

```
m_buffer.assign(pArray, pArray + Size); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T10:00:57.820

我真的建议您以这种方式避免使用原始指针。我认为管理 std::vectors 而不是原始指针是一个更好的主意。

```
class MyClass {
private:
    std::vector<unsigned char> m_Buffer;
    // No size member is needed, it is stored in m_Buffer
public:
    // No size parameter is needed, it is stored in Array
    void SetBuffer(const std::vector<unsigned char> &Array);
};

void MyClass::SetBuffer(const std::vector<unsigned char> &Array) {
    std::copy(Array.begin(), Array.end(), m_Buffer.begin());
} 
```

假设您的设计强制为`MyClass`您管理 raw 将在复制构造函数上处理此指针，并且`operator =`（或改为摆脱它）：

```
MyClass::MyClass(const MyClass &Class) {
    m_BufferSize = Class.m_BufferSize;
    m_Buffer = new new unsigned char[m_BufferSize];
    memcpy(m_Buffer, Class.m_Buffer, m_BufferSize); 
}

MyClass::operator =(const MyClass &Class) {
    if (m_Buffer) delete [] m_Buffer;
    m_BufferSize = Class.m_BufferSize;
    m_Buffer = new new unsigned char[m_BufferSize];
    memcpy(m_Buffer, Class.m_Buffer, m_BufferSize); 
} 
```

如果您不处理`MyClass`复制构造函数中的托管指针，`operator =`那么您将以`MyClass`管理相同内存的两个实例结束。

# iphone - GCD 串行队列是否使用所有 CPU 内核？

> ID：12035277
> 
> 赞同：0
> 
> 时间：2012-08-20T09:35:03.467
> 
> 标签：iphone, ios, multithreading, grand-central-dispatch

我想渲染 30 个不同的图像。每个任务都必须将不同的图像层合并成一个最终图像——30 个最终图像。

目前我使用 GCD 串行队列。现在我想知道这种方法是否自动使用所有可用内核的 CPU 能力？

或者我可以在使用 GCD 并发队列时改善所有这些任务的渲染时间吗？谢谢你的澄清。。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-20T11:39:42.917

串行队列 = 1 个任务 = 1 个内核。但是您的用例中的真正问题是 I/O 争用。如果您生成一个并发队列以从一个资源中读取会发生什么？当 CPU 轮流读取磁盘时，您最终会在每个块上闲置。GCD 对空闲 CPU 做出反应，增加线程池。在这种情况下，会导致线程过多甚至争用更多。

解决方案是使用 dispatch_io 函数进行读取，并在不同的并发队列上进行图像处理，该队列将根据需要自由增长。

```
dispatch_queue_t imageProcessing = dispatch_queue_create("com.yourReverseDomainHere", DISPATCH_QUEUE_CONCURRENT);

for (NSURL *url in ...){
    dispatch_io_t io = dispatch_io_create_with_path(DISPATCH_IO_RANDOM,[[url path] fileSystemRepresentation], O_RDONLY, 0, NULL, NULL);
    dispatch_io_set_low_water(io, SIZE_MAX);
    dispatch_io_read(io, 0, SIZE_MAX, dispatch_get_main_queue(),^(bool done, dispatch_data_t data, int error){

        // convert the file from dispatch_data_t to NSData
        const void *buffer = NULL;
        size_t size = 0;
        dispatch_data_t tmpData = dispatch_data_create_map(data, &buffer, &size);
        NSData *nsdata = [[NSData alloc] initWithBytes:buffer length:size];
        dispatch_release(tmpData);
        free(buffer);

        // send this nsdata elsewhere for processing
        dispatch_async(imageProcessing, ^{
            // ...image processing code...
        });

    });
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T09:37:10.690

串行队列一次运行一个任务，因此每个串行队列一次只使用一个内核（尽管在任何时候使用哪个内核都没有定义并且可以更改）。

# iphone - FaceTime 和跟踪通话记录

> ID：12035280
> 
> 赞同：0
> 
> 时间：2012-08-20T09:35:15.750
> 
> 标签：iphone, objective-c, ios

是否有可能对于特定用户，应维护通话记录，包括日期、时间、被叫人、通话时长等？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T09:40:45.377

不，您不能通过官方 SDK 与手机/facetime 软件进行交互。

[Core Telephony](http://developer.apple.com/library/ios/#documentation/NetworkingInternet/Reference/CoreTelephonyFrameworkReference/_index.html)可以让您检测电话是否处于活动状态。但这仅在您的应用程序处于活动状态时才有效。你也不能得到那么多的电话信息。只是状态和呼叫 ID（不是被呼叫的号码）。

# android - 安卓网络连接检查

> ID：12035285
> 
> 赞同：2
> 
> 时间：2012-08-20T09:35:32.700
> 
> 标签：android, android-intent, android-wifi

> **可能重复：**
> [Android - 检测是否有可用的 Internet 连接](https://stackoverflow.com/questions/4238921/android-detect-whether-there-is-an-internet-connection-available)

这是检查 android 设备上的互联网可用性的代码：

```
public boolean isInternetAvailable() {
    ConnectivityManager cm = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);
    if (cm.getActiveNetworkInfo() != null)
        return cm.getActiveNetworkInfo().isConnected();
    else
        return false;
} 
```

因此，如果没有可用的 wifi 或网络，此代码可以正常工作。

但是，如果设备连接到 wifi 网络但互联网不可用，那么我应该怎么做才能检查互联网是否存在？

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T10:17:15.027

我这样做：

我尝试访问 google.com 并等待回复：

```
public static void isGoogleAvailable(final Handler handler)
{
    new Thread()
    {
        private boolean hasGoogleResponded = false;
        @Override
        public void run()
        {
            new Thread()
            {
                @Override
                public void run()
                {
                    HttpGet requestForTest = new HttpGet("https://www.google.com/");
                    try
                    {
                        new DefaultHttpClient().execute(requestForTest);
                        hasGoogleResponded = true;
                    }
                    catch (Exception e)
                    {}
                }
            }.start();

            try
            {
                int waited = 0;
                while(!hasGoogleResponded && (waited < 60000))
                {
                    sleep(100);
                    if(!hasGoogleResponded )
                    {
                        waited += 100;
                    }
                }
            }
            catch(InterruptedException e)
            {}
            finally
            {
                if (hasGoogleResponded)
                {
                    handler.sendEmptyMessage(1);
                }
                else
                {
                    handler.sendEmptyMessage(0);
                }
            }
        }
    }.start();
} 
```

然后我在我的处理程序中检索消息：

```
Handler internetHandler = new Handler()
{
    @Override
    public void handleMessage(Message msg)
    {
        if (msg.what == 1) //connected
        {

        }
        else //not connected
        {

        }
    }
}; 
```

我希望这有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T09:42:58.010

您可以尝试 ping 像 google 之类的服务器（应该始终存在）查看[此主题](https://stackoverflow.com/questions/1443166/android-how-to-check-if-the-server-is-available)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-20T09:39:19.167

你可以试试

```
 ConnectivityManager m;
            m.getAllNetworkInfo(); 
```

首先检查互联网连接，然后检查其他。但有时它取决于应用程序架构。如果应用程序需要 wifi 而你没有 - 你不能检查互联网，因为它没有必要

# java - 用于 java 的 lorem ipsum 生成器，在 Maven Central 中可用？

> ID：12035286
> 
> 赞同：14
> 
> 时间：2012-08-20T09:35:32.357
> 
> 标签：java

您是否知道 Maven Central 中可用的任何[lorem ipsum](http://en.wikipedia.org/wiki/Lorem_ipsum)文本生成器？我正在寻找Apache commons-lang的[RandomStringUtils的替代品。](http://commons.apache.org/lang/api-2.3/org/apache/commons/lang/RandomStringUtils.html)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-20T09:41:13.987

试试这个

[http://mvnrepository.com/artifact/de.sven-jacobs/loremipsum](http://mvnrepository.com/artifact/de.sven-jacobs/loremipsum)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-12T21:24:07.917

几个月前我创建了这个并将其添加到 github。它不是很大，也可以为人们生成名字

[https://github.com/mdeanda/lorem](https://github.com/mdeanda/lorem)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-20T09:41:22.940

搜索[Maven 存储库](http://mvnrepository.com/search.html?query=lorem+ipsum)。有两个版本，没试过。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-06-07T17:40:40.737

' *Java Faker ' 是*[Ruby 'faker' gem](https://github.com/stympy/faker)的 Java 端口，非常全面：

*   [主页](http://dius.github.io/java-faker/)
*   [代码](https://github.com/DiUS/java-faker)
*   [文档](http://dius.github.io/java-faker/apidocs/index.html)

**目前可用的 Fakers (2019-06-07):**

*   古老的
*   地址
*   应用程序
*   艺术家
*   阿凡达
*   啤酒
*   书
*   布尔
*   商业
*   查克·诺里斯
*   猫
*   代码
*   颜色
*   商业
*   公司
*   加密货币
*   日期和时间
*   人口统计
*   狗
*   七龙珠
*   教育家
*   电子竞技
*   文件
*   金融
*   食物
*   朋友们
*   有趣的名字
*   权力的游戏
*   黑客
*   哈利波特
*   潮人
*   银河系搭便车指南
*   霍比特人
*   老爸老妈的浪漫史
*   身份证号码
*   互联网
*   工作
*   英雄联盟
*   莱博夫斯基
*   指环王
*   洛雷姆
*   马茨
*   音乐
*   姓名
*   数字
*   选项
*   守望先锋
*   电话号码
*   口袋妖怪
*   瑞克和莫蒂
*   罗宾
*   摇滚乐队
*   莎士比亚
*   松弛表情符号
*   空间
*   星际迷航
*   库存
*   超级英雄
*   团队
*   双峰
*   大学
*   天气
*   巫师
*   尤达
*   塞尔达

# php - 使用 AJAX 填充页面

> ID：12035290
> 
> 赞同：1
> 
> 时间：2012-08-20T09:35:41.593
> 
> 标签：php, ajax

这对我来说是一个全新的领域，所以我希望有人能指出我正确的方向，希望是一个好的教程？

我有一个带有下拉列表的页面，根据我需要填充页面的列表中的用户选择。

谁能指出我做类似事情的好教程的方向？

这是我需要做的事情的顺序：

1.  页面加载
2.  用户从 HTML 下拉列表中选择一个值
3.  另一个 PHP 页面返回与该选择相关的数组。

谁能帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T09:41:24.873

使用 jQuery：

```
$('#id-of-your-select').change(function() {

  $.ajax({

    method: 'post',
    url: 'yourscript.php',
    data: '?theValue=of&your=dropdown',
    success: function(data) {
      $('#div-to-be-populated').html(data);
    }
  });
 }); 
```

在你的 php 中：

```
<?php

switch($_GET['dropdownvalue'] {

  case 'hello':
    echo '<p>Hello World<p>';
  break;
}
?> 
```

当然，您必须根据需要对其进行配置，但我希望您了解基本概念

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T10:59:00.543

看看这个，[http://www.w3schools.com/php/php_ajax_php.asp](http://www.w3schools.com/php/php_ajax_php.asp)

本教程将使您成为 AJAX 和 PHP 方面的专家。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T10:29:57.470

您可以使用 jquery 以非常简单的方式完成此操作。jquery 是此类问题的最佳解决方案。重要的链接是：http: [//jquery.com](http://jquery.com) ，您也可以从 w3schools 学习以获得更好的 jquery 知识。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-20T09:45:41.630

根据您的要求，您需要两个 PHP 页面和 AJAX 知识。

1.  PHP Page1（可能是HTML）加载正常页面
2.  在浏览器上，您需要为下拉菜单捕获“onChange”事件以调用函数。
3.  在该函数下，向您的第二个 PHP 页面发出 AJAX 请求。
4.  需要使用 PHP Page 2 返回的数据。

这是应该发生的事情的简单列表。

我假设你对第 1 步没问题。

对于第 2 步，您需要学习基本的 javascript。只需谷歌如何捕获 onChange 事件。几个快速链接是： [通过javascript将下拉onchange函数中的选定项目显示为html标签，请帮助如何](https://stackoverflow.com/questions/6315437/display-selected-item-from-dropdown-onchange-function-into-html-label-through-ja)

对于第 3 步，我建议不要走捷径，而是通过 [http://www.w3schools.com/ajax/default.asp上的完整 AJAX 教程](http://www.w3schools.com/ajax/default.asp)

完成该教程后，您将自己做事。

# drupal - 如何使用主题在 Drupal 中显示自定义 html 块？

> ID：12035291
> 
> 赞同：2
> 
> 时间：2012-08-20T09:35:46.700
> 
> 标签：drupal, themes, hook-menu

有一些模块，在 hook_menu() 中定义了一些 url，并且需要在那里显示一些主题（modules/mymodule/templates/mytheme.tpl.php）。如何在需要的 url 上显示 mytheme.tpl.php 内容？

```
function mymodule_menu(){
    $item = array();

    $item['somemenu'] = array(
     'page callback' => 'somemenu_display',
  );

    return $item;
}

function somemenu_display(){
       return WHAT_IS_THIS_FUNCTION('modules/mymodule/templates/mytheme.tpl.php');
} 
```

最好只显示这些内容，而不显示页眉/页脚。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T09:40:57.650

函数是 Theme()

```
return theme('some_theme_function_template', array('aValues' => $someArray)); 
```

然后，您需要像这样使用主题挂钩：

```
function my_module_name_theme() {
    return array(
        'some_theme_function_template' => array(
            'template' => 'mytheme',
        ),
    );
} 
```

它现在在模块的根目录中搜索 mytheme.tpl.php。

# php - 谷歌分析 PHP API 重定向 URI

> ID：12035292
> 
> 赞同：0
> 
> 时间：2012-08-20T09:35:47.540
> 
> 标签：php, oauth-2.0, google-analytics-api

我正在我的本地机器上测试 Google Analytics API（使用 oauth 2.0），我想知道是否有可能让它以这种方式工作，因为他们要求我在 Google API 控制台中插入一个重定向 URI，然后输入它在我的代码中，但我不知道这个重定向 URI 应该是什么？

我当前的重定向 URI 是`https://localhost/oauth2callback`并且我尝试过`https://gapi.local/oauth2callback`，但都不适合我。

**我收到此错误消息：**
`Fatal error: Call to undefined method apiClient::setClientRedirectUri() in C:\xampp\htdocs\webs\gapi\HelloAnalyticsApi.php on line 15`

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T13:47:43.497

[google-api-php-](https://code.google.com/p/google-api-php-client/) client`setClientRedirectUri()`库在. `apiClient`正确的方法称为[`setRedirectUri()`](https://developers.google.com/analytics/resources/tutorials/hello-analytics-api#authorize_access)：

```
$client = new apiClient();
$client->setApplicationName('Hello Analytics API Sample');

// Visit //code.google.com/apis/console?api=analytics to generate your
// client id, client secret, and to register your redirect uri.
$client->setClientId('insert_your_oauth2_client_id');
$client->setClientSecret('insert_your_oauth2_client_secret');
$client->setRedirectUri('insert_your_oauth2_redirect_uri');
$client->setDeveloperKey('insert_your_developer_key');
$client->setScopes(array('https://www.googleapis.com/auth/analytics.readonly')); 
```

# php - 未在 POST 提交的 Javascript 值

> ID：12035294
> 
> 赞同：0
> 
> 时间：2012-08-20T09:36:04.777
> 
> 标签：php, javascript, post

我有一个表单，用户单击各个单选组，这会生成一个用 javascript 计算的“分数”，并在表单顶部的一个文本框中填充一个运行总数。

提交表单时，此文本框的 POST 值为空，因此当它移动到输出表时，没有要显示的值。

所有其他手动输入的文本框都可以正常工作。所有名称/ID 等都是正确的，我是否缺少一些东西以使其在提交表单时正确保留 POST 值中的 JS 生成的值？

这（从 JS 填充）不起作用：

```
<input name="Result_AutoFail" type="text" class="ResultsBox" id="Result_AutoFail" size="2" maxlength="2" value="<?php echo htmlspecialchars($_POST['Result_AutoFail']); ?>"/> 
```

但这（手动输入）确实：

```
<input name="CustName" type="text" id="CustName" size="25" maxlength="25" value="<?php echo htmlspecialchars($_POST['CustName']); ?>"/> 
```

用于填充框的 JS 对于每个问题都是这样，当用户单击每个问题的每个单选按钮时，这工作正常并将值正确放入框中，只是不会将其发送到 POST：

```
 for (i=0;i<2;i++)
{

if (document.MonitorForm.SBI_CA027[i].checked == true)
{

    CA027Selected = document.MonitorForm.SBI_CA027[i].value

}
}

if (CA027Selected == "Yes")
{

    if (AutoFailCount == 0)
    {
        document.MonitorForm.Result_AutoFail.style.backgroundColor = "#008000";

    }
    else if (AutoFailCount >= 1)
    {

        document.MonitorForm.Result_AutoFail.style.backgroundColor = "#FF0000";
    }

}
else if( CA027Selected == "No")
{
    AutoFailCount = (AutoFailCount + 1);

    if (AutoFailCount == 0)
    {
        document.MonitorForm.Result_AutoFail.style.backgroundColor = "#008000";

    }
    else if (AutoFailCount >= 1)
    {

        document.MonitorForm.Result_AutoFail.style.backgroundColor = "#FF0000";
    }

} 
```

然后写入文本框：

```
document.MonitorForm.Result_AutoFail.value =  AutoFailCount ; 
```

干杯!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T09:39:39.430

尝试将结果写入隐藏输入。

```
<input type="hidden" value="some_value" name="result" id="result" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T09:45:40.723

如果您不从输入或文本字段之类的表单字段提交它，它将不会出现在 $_POST 数组中

如果你想在你的帖子中提交额外的数据，你必须将它们写在隐藏的输入中

# php - 显示来自 mysqli 查询的一个结果（单元格）

> ID：12035303
> 
> 赞同：0
> 
> 时间：2012-08-20T09:36:42.787
> 
> 标签：php, mysqli

一段时间以来，我一直在努力思考这个问题，而关于 MySQL 和 MySQLi 的文档让我感到困惑。有没有可能得到任何帮助？

我有一个名为 track_table 的表，它包含两行 hash 和 track

```
 hash              |  track
    sdfsdfsdfsdfsdfsd |  Azelia Banks - 1991 
```

我想显示曲目名称，但我不知道如何显示。我试过'mysqli_fetch_assoc'和其他各种功能，但没有。这是我到目前为止的查询。

```
 $hash = $_GET['sub'];

    $check_track = "SELECT track FROM track_table WHERE hash = '.$hash.' ";
    $track_res = mysqli_query($mysqli, $check_track) or die (mysqli_error($mysqli));

    $result = mysqli_fetch_assoc($track_res);
    echo $result['track']; 
```

我只想能够在网页上显示曲目名称。

我知道我没有实现任何安全功能，并且我直接从用户那里获取数据，我将在稍后解决此问题后执行此操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T09:42:03.063

`string-literal . variable . string-literal`你的脚本部分有问题。

```
if ( !isset($_GET['sub']) ) {
    die('missing paraemter sub');
}

$check_track = "
    SELECT
        track
    FROM
        track_table
    WHERE
        hash = '".mysqli_real_escape_string($mysqli, $_GET['sub'])."'
";
$track_res = mysqli_query($mysqli, $check_track) or die (mysqli_error($mysqli));

$result = mysqli_fetch_assoc($track_res);
if ( !$result ) {
    echo 'no such record';
}
else {
    echo $result['track'];
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-20T10:10:07.637

试试这个

```
$hash = mysql_real_escape_string($_GET['sub']);

$check_track = "SELECT track FROM track_table WHERE hash = '.$hash.' ";
$track_res = mysql_query($check_track) or die (mysql_error());

$result = mysql_fetch_assoc($track_res);
print_r($result); 
```

确定表、列或输入类型的名称。我希望它会帮助你。

# javascript - 如何在 Ext Js 4 中渲染面板

> ID：12035304
> 
> 赞同：0
> 
> 时间：2012-08-20T09:36:43.220
> 
> 标签：javascript, extjs

![在此处输入图像描述](../Images/7629bf49f36178999997f21724baf273.png)

面板的数量取决于来自商店的数据数量，并且应该以上面显示的形式呈现，即两列

我的代码是

```
Ext.define('ConnectionsFeed.view.Communities',{
     extend: 'Ext.container',
     requires: 'ConnectionsFeed.store.Communities',
     store: 'Communities',
     alias: 'widget.communities',
     layout: 'table',

 initComponent: function(){
  var x = this;
  this.store.each(function(item){
   x.add(new Ext.panel.Panel());
  });
 }
});

Ext.create('ConnectionsFeed.view.Communities',{
   renderTo: Ext.getBody()
}); 
```

但收到以下错误

> ```
> > Uncaught TypeError: Cannot read property 'isInstance' of undefined
> > ext-all.js:21 (anonymous function) ext-all.js:21 Ext.apply.doProcess
> > ext-all.js:21 (anonymous function) ext-all.js:21 Ext.apply.require
> > ext-all.js:21 (anonymous function) ext-all.js:21 Ext.apply.doProcess
> > ext-all.js:21 Ext.apply.doProcess ext-all.js:21 Ext.apply.process
> > ext-all.js:21 Ext.Class.c ext-all.js:21 Ext.ClassManager.create
> > ext-all.js:21 Ext.apply.define ext-all.js:21 (anonymous function) 
> ```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T10:56:26.110

您在 initComponent 末尾缺少对 this.callParent() 的调用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T09:42:49.443

[Ext.Store.each()](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.data.Store-method-each)让您为数据存储中的每个元素调用一个函数。有问题的函数应该将您的面板实例添加到具有[`table`](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.layout.container.Table)布局的容器中。

```
YourStore.each(function(item) {
  //container declared elsewhere
  container.add(new YourPanel(item));
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-20T13:20:59.100

容器也没有商店。您需要在 initComponent 中创建一个实例并加载它。

```
Ext.define('ConnectionsFeed.view.Communities', {
    extend: 'Ext.container',
    requires: 'ConnectionsFeed.store.Communities',
    store: 'Communities',
    alias: 'widget.communities',
    layout: 'table',

    initComponent: function() {
        var x = this;

        x.store = Ext.create('ConnectionsFeed.store.Communities');

        //If you override initComponent you need to call its parent
        x.callParent();
    },
    afterRender: function() {
        var x = this;

        x.store.load({
            scope: x,
            //Callback function after the store has loaded
            callback: function(records, operation, success) {
                Ext.each(records, function(record) {
                    //Your logic of add a panel here
                    x.add(Ext.create('....'));
                });
            }
        });

        x.callParent();
    }
});

Ext.create('ConnectionsFeed.view.Communities', {
    renderTo: Ext.getBody()
});​ 
```

# iphone - 强制本地化应用程序

> ID：12035306
> 
> 赞同：3
> 
> 时间：2012-08-20T09:36:53.207
> 
> 标签：iphone, ios, cocoa-touch, localization

我实际上正在开发一个需要在他自己的设置中强制本地化的应用程序（不是使用常规设置，我没有制定规范，不要问我为什么要这样做:-)）

我可以强制我的应用使用具有此类别的特定 Localizable.string 文件：

```
+(NSString*)localizedString:(NSString*)string forLanguageCode:(NSString*)languageCode {

    NSString *pathToLocalizedBundle = [[NSBundle mainBundle] pathForResource:languageCode ofType:@"lproj"];

    if(!pathToLocalizedBundle) pathToLocalizedBundle = [[NSBundle mainBundle] pathForResource:@"en" ofType:@"lproj"];
    NSBundle *aBundle = [NSBundle bundleWithPath:pathToLocalizedBundle];
    return [aBundle localizedStringForKey:string value:@"" table:nil];
} 
```

我面临的问题是本地化一些“Apple 的东西”，我的意思是像“编辑”按钮或一些默认选项卡选项卡，比如这些（特色和更多）：

![默认标签栏](../Images/d845b3bd7a85beb0c2244e2010e71b2a.png)

我试图更改`"AppleLanguages`" 中的键，`user default`但它仅在应用程序重新启动并且我不想要它时才有效。这可能吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-20T09:46:41.027

您可能想在这里访问：http: [//aggressive-mediocrity.blogspot.in/2010/03/custom-localization-system-for-your.html](http://aggressive-mediocrity.blogspot.in/2010/03/custom-localization-system-for-your.html)

# jquery - 如何获取用户使用 jQuery 在输入字段中输入的值

> ID：12035309
> 
> 赞同：1
> 
> 时间：2012-08-20T09:36:56.963
> 
> 标签：jquery

我正在使用以下功能：

```
$.each($('.update-grid'), function (i, e) {
var ID = e.id.replace('modal', 'input');
$("#" + ID).val(e.value);
}); 
```

获取表单提交后刚刚输入到诸如此类的输入字段中的值。要求是将此用户输入的值放在另一个字段中。例如，将输入到#modal-title 中的值转移到字段#input-title 中。

```
<input id="modal_Order_1" class="update-grid full-width" type="text" 
value="337" name="Content.Order" > 
```

但是，“e.value”给了我 337 的值，而不是用户在提交表单之前输入的值。

有没有办法让我输入新的值？

**更新：**

这似乎有效：

```
 $('.update-grid')
            .each(function () {
                var id = this.id.replace('modal', '');
                $('#input' + id).val(this.value)
            }) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T10:21:39.927

您使用的`.each`功能不正确。您将需要依赖该`.change`事件，这意味着它将在输入更改后触发（并且该字段失去焦点）。

因此，鉴于您的代码，我会说：

```
$('.update-grid').change(function () {

        var id = $(this).attr("id").replace('modal', 'input');

        var new_value = $(this).val();

        $('#' + id).val(new_value);

}) 
```

# android - 可垂直滚动的 TextView 的淡入淡出边缘

> ID：12035310
> 
> 赞同：4
> 
> 时间：2012-08-20T09:36:58.827
> 
> 标签：android, textview

我有一个可垂直滚动的 TextView。如何为其添加褪色边缘？

```
<TextView 
    android:layout_height="wrap_content"
    android:layout_width="match_parent"
    android:textSize="18dp"
    android:textColor="#ffffffff"
    android:fadingEdge="vertical"
    android:fadingEdgeLength="25dp"
/> 
```

此代码不起作用

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T10:06:24.617

尝试使用渐变背景？ [http://developer.android.com/guide/topics/resources/drawable-resource.html#Shape](http://developer.android.com/guide/topics/resources/drawable-resource.html#Shape)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-25T13:53:17.767

尝试添加真正使顶部边框褪色的 android:requiresFadingEdge="vertical" 。

仍在尝试找出底部...

# qt - 如何从 QT 中的另一个类访问 ui 对象

> ID：12035312
> 
> 赞同：0
> 
> 时间：2012-08-20T09:37:04.180
> 
> 标签：qt

我在 QT 设计器中创建了一个带有一些小部件的 UI 文件

```
'testScreen.ui'
'testScreen.cpp'
'testScreen.h' 
```

现在我正在另一个 ccp 文件“sstApplication.cpp”中创建 TestScreen 类的对象

```
TestScreen *obj =  new TestScreen() 
```

现在当我尝试访问 testScreen.ui 的小部件时'

```
this->ui->next_But->setEnabled(true); 
```

我做不到

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T09:52:05.757

使用 QtDesigner 时，子小部件被封装到生成的 Ui 类中。你有两种使用方式：

1) 为 ui 类编写一个 getter。这是一个不好的方法，因为它违反了封装：

```
public:
    Ui::TestScreen *ui() const { return ui; } 
```

并从您的 sstApplication.cpp 访问它：

```
TestScreen *obj =  new TestScreen()
obj->ui()->next_But->setEnabled(true); 
```

2）为下一个按钮状态设置一个设置器：

```
public:
    void enableNextButton(bool enabled = true) { this->ui->next_But->setEnabled(enabled); } 
```

并像这样使用它：

```
obj->enableNextButton(); 
```

但是，最好的解决方案是将小部件状态管理逻辑封装到`TestScreen`

# infinite-loop - 陷入无限循环解决读写器问题

> ID：12035314
> 
> 赞同：0
> 
> 时间：2012-08-20T09:37:16.933
> 
> 标签：infinite-loop, xterm

我正在研究读写器问题。算法明智，我相信解决方案是好的。我面临的唯一问题是使用 xterm 打开多个读取器/写入器窗口。当我运行程序时，它进入了一个无限循环，它使整个系统崩溃。它还打开多个 xterm 窗口。这可能很愚蠢和简单，但我似乎无法弄清楚为什么？从昨天开始我就一直在思考这个问题。我该如何解决这个问题？可疑的冲突区域以 ** 注释突出显示...

```
#include <unistd.h>     /* Symbolic Constants */
#include <sys/types.h>  /* Primitive System Data Types */ 
#include <errno.h>      /* Errors */
#include <stdio.h>      /* Input/Output */
#include <stdlib.h>     /* General Utilities */
#include <pthread.h>    /* POSIX Threads */
#include <string.h>     /* String handling */
#include <semaphore.h>  /* Semaphore */

//Global Variablels
int rc = 0;
int wc = 0;

sem_t m1, m2, m3, w, r; //Semphore

int reader() {
sem_wait(&m3);
sem_wait(&r);
sem_wait(&m1);
rc++;
if(rc == 1) sem_wait(&w);
sem_post(&m1);
sem_post(&r);
sem_post(&m3);
system("xterm -e ./read");
//execlp("xterm", "-e", "./ahor2r", NULL);
sem_wait(&m1);
rc--;
if(rc == 0) sem_post(&w);
sem_post(&m1);
return 0;
}

int writer() {
    sem_wait(&m2);
    wc++;
    if(wc == 1) sem_wait(&r);    
    sem_post(&m2); 
    sem_wait(&w);
    //system("xterm -e ./write"); //writing is performed
    execlp("xterm", "-e", "./ahor2w", NULL);    
    sem_post(&w);
    sem_wait(&m2);
    wc--;
    if(wc == 0)  sem_post(&r);
    sem_post(&m2);
    return 0;
}

int main() {
int ch;
sem_init(&m1, 0, 1); 
sem_init(&m2, 0, 1); 
sem_init(&m3, 0, 1); 
sem_init(&w, 0, 1); 
sem_init(&r, 0, 1); 
/*****************************************************************************
**********infinite loop*******************************************************/
while(1) {
    printf("\n\nEnter your option\n\n1> Create Reader\n2> Create Writer\n 3> Exit\n\t");
    scanf("%d", &ch);
    if(ch == 1)
        switch(fork()) {
        case -1:
            perror("Cannot fork a new reader process\n");
        break;
    case 0:
        reader();
    }
else if (ch == 2) 
    switch(fork()) {
    case -1:
            perror("Cannot fork a new reader process\n");
            break;
    case 0:
        writer();
    }
else if (ch == 3) {
    sem_destroy(&m1);
    sem_destroy(&m2);
    sem_destroy(&m3);
    sem_destroy(&w); 
    sem_destroy(&r); 
    return 0;
    }
else printf("INVALID OPTION - no action taken\n");
}
/*****************************************************************************
*****************************************************************************/
return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T10:50:17.820

你有两个大错误：

1.  您不会在共享内存中创建信号量。所以每个进程都有自己的信号量副本，这是没有意义的。

2.  您不会创建进程共享的信号量。`0`in`sem_init`意味着信号量不会在进程之间共享。但`fork`创造了新的流程。

> 如果 pshared 的值为 0，则信号量在进程的线程之间共享[。] 如果 pshared 不为零，则信号量在进程之间共享，并且应该位于共享内存的区域中（参见 shm_open(3) 、 mmap(2) 和 shmget(2))。

# wordpress - 自定义帖子类型永久链接发送到 404.php

> ID：12035315
> 
> 赞同：0
> 
> 时间：2012-08-20T09:37:18.383
> 
> 标签：wordpress

嗨，我创建了一个自定义帖子类型和自定义分类。自定义帖子类型页面名为 page-portfolio.php。我在其中创建了一个循环，我试图链接到每个帖子的单个页面。为此我创建了一个模板 single-portfolio.php 但由于某种原因，当我单击永久链接时，我会被发送到 404.php 页面。这是我的整个结构代码：

```
//custom post type and taxonomy declaration
<?php

add_action('init' , 'portfolio_manager');

function portfolio_manager(){
    $args = array(
            'label' => 'Portfolio Manager',
            'singular_label' => 'Portfolio Manager',
            'public' => true,
            'show_ui' => true,
            'capability_type' => 'post',
            'hierarchical' => false,
            'supports' => array('title' , 'editor' , 'thumbnail'),
            'rewrite' => array(
                'slug' => 'portfolio',
                'with_front' =>false
            )
    );
    register_post_type('portfolio' , $args);
}

add_action('init' , 'portfolio_taxonomy');

function portfolio_taxonomy(){
    register_taxonomy("portfolio-type", 
                      array("portfolio"),
                      array("hierarchical" => true, 
                                "label" => "Portfolio Types",
                                "singular_label" => "Portfolip Type", 
                                "rewrite" => true, 
                                "slug" => 'portfolio-type'
                                )
                     );
}
?>
//page-portfolio.php loop
$portfolio = new WP_Query(array(
                        'post_type'=>'portfolio',
                        'posts_per_page'=>'-1'
                    ));
                    while($portfolio->have_posts()): $portfolio->the_post();
                     global $post;
                 ?>
                 <li class ="item" data-type="<?php echo str_replace(" " , "" , strip_tags(get_the_term_list($post->ID, 'portfolio-type' , '' , '' , ''))); ?>" data-id="id-<?php the_ID(); ?>">
                            <span><a href="<?php the_permalink(); ?>">Details</a></span>
                      <?php
                        endif
                      ?> 
                 </li>

                 <?php
                     endwhile;
                 ?> 
```

如果 single-portfolio.php 不是我应该为此页面创建的页面模板，那么什么是 corect 模板？

如果 single-portfolio.php 是 corect 模板，那么我在这里做错了什么。为什么永久链接没有将我发送到 single.portfolio.php？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T10:23:20.937

尝试将其重命名为 single-portfolio.php

在这里阅读更多信息：http: [//codex.wordpress.org/Template_Hierarchy](http://codex.wordpress.org/Template_Hierarchy)

一切顺利，马丁

# java - 将整个 html 文件读入字符串？

> ID：12035316
> 
> 赞同：37
> 
> 时间：2012-08-20T09:37:19.833
> 
> 标签：java, file-io

有没有比以下更好的方法将整个 html 文件读取到单个字符串变量：

```
 String content = "";
    try {
        BufferedReader in = new BufferedReader(new FileReader("mypage.html"));
        String str;
        while ((str = in.readLine()) != null) {
            content +=str;
        }
        in.close();
    } catch (IOException e) {
    } 
```

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-08-20T09:39:25.980

有[`IOUtils.toString(..)`](http://commons.apache.org/io/apidocs/org/apache/commons/io/IOUtils.html#toString(java.io.InputStream))来自 Apache Commons 的实用程序。

如果你正在使用`Guava`还有[`Files.readLines(..)`](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/io/Files.html)and [`Files.toString(..)`](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/io/Files.html)。

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2012-08-20T09:42:16.230

您应该使用[StringBuilder](http://docs.oracle.com/javase/6/docs/api/java/lang/StringBuilder.html)：

```
StringBuilder contentBuilder = new StringBuilder();
try {
    BufferedReader in = new BufferedReader(new FileReader("mypage.html"));
    String str;
    while ((str = in.readLine()) != null) {
        contentBuilder.append(str);
    }
    in.close();
} catch (IOException e) {
}
String content = contentBuilder.toString(); 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-08-20T09:43:18.770

您可以使用[JSoup](http://jsoup.org/)。这对java
来说非常强大`HTML parser`

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-08-20T09:46:42.687

我更喜欢使用[番石榴](http://code.google.com/p/guava-libraries/)：

```
import com.google.common.base.Charsets;
import com.google.common.io.Files;
File file = new File("/path/to/file", Charsets.UTF_8);
String content = Files.toString(file); 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2018-09-03T19:15:18.327

正如 Jean 所说，使用 a`StringBuilder`而不是`+=`会更好。但如果你正在寻找更简单的东西，Guava、IOUtils 和 Jsoup 都是不错的选择。

番石榴的例子：

```
String content = Files.asCharSource(new File("/path/to/mypage.html"), StandardCharsets.UTF_8).read(); 
```

IOUtils 示例：

```
InputStream in = new URL("/path/to/mypage.html").openStream();
String content;

try {
   content = IOUtils.toString(in, StandardCharsets.UTF_8);
 } finally {
   IOUtils.closeQuietly(in);
 } 
```

Jsoup 示例：

```
String content = Jsoup.parse(new File("/path/to/mypage.html"), "UTF-8").toString(); 
```

**或者**

```
String content = Jsoup.parse(new File("/path/to/mypage.html"), "UTF-8").outerHtml(); 
```

**笔记：**

> `Files.readLines()`和`Files.toString()`

从 Guava 版本 22.0（2017 年 5 月 22 日）开始，这些现在已弃用。 **如上例所示，**`Files.asCharSource()`应改为使用。（[版本 22.0 版本差异](https://google.github.io/guava/releases/22.0/api/diffs/)）

 **> `IOUtils.toString(InputStream)`和`Charsets.UTF_8`

自 Apache Commons-IO 版本 2.5（2016 年 5 月 6 日）起已弃用。`IOUtils.toString`现在应该传递 the`InputStream` **和**the `Charset`，如上例所示。`StandardCharsets`应该使用Java 7而不是`Charsets` **如上例所示。**（[已弃用的 Charsets.UTF_8](https://commons.apache.org/proper/commons-io/javadocs/api-2.5/org/apache/commons/io/Charsets.html#UTF_8)）

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-08-20T09:42:28.680

对于字符串操作，使用 StringBuilder 或 StringBuffer 类来累积字符串数据块。不要`+=`对字符串对象使用操作。`String`类是不可变的，你会在运行时产生大量的字符串对象，它会影响性能。

请改用`.append()`StringBuilder/StringBuffer 类实例的方法。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-11-21T21:37:53.460

这是仅使用标准 java 库检索网页 html 的解决方案：

```
import java.io.*;
import java.net.*;

String urlToRead = "https://google.com";
URL url; // The URL to read
HttpURLConnection conn; // The actual connection to the web page
BufferedReader rd; // Used to read results from the web page
String line; // An individual line of the web page HTML
String result = ""; // A long string containing all the HTML
try {
 url = new URL(urlToRead);
 conn = (HttpURLConnection) url.openConnection();
 conn.setRequestMethod("GET");
 rd = new BufferedReader(new InputStreamReader(conn.getInputStream()));
 while ((line = rd.readLine()) != null) {
  result += line;
 }
 rd.close();
} catch (Exception e) {
 e.printStackTrace();
}

System.out.println(result); 
```

* * *

[SRC](https://www.breakingpar.com/bkp/home.nsf/0/87256B280015193F87256DC80053681B)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-05-25T13:40:02.170

```
 import org.apache.commons.io.IOUtils;
 import java.io.IOException;     
    try {
               var content = new String(IOUtils.toByteArray ( this.getClass().
                        getResource("/index.html")));
            } catch (IOException e) {
                e.printStackTrace();
            } 
```

//上面提到的 Java 10 代码 - 假设 index.html 在资源文件夹中可用。**

# visual-studio - SSRS 中带有复选框的下拉菜单

> ID：12035327
> 
> 赞同：1
> 
> 时间：2012-08-20T09:38:16.293
> 
> 标签：visual-studio, sql-server-2008, ssrs-2008

我在 SSRS 中有一份报告，它为大约 50-60 个项目生成。

比如说，报告在一个比例尺上显示国家名称，在另一个比例尺上显示他们的人口。生成图表时，它显示了大约 100 个国家/地区。如果我只想查看英国、美国、印度和中国的人口。然后我应该可以选择我选择的国家。

拥有一个下拉菜单并允许他们一次仅选择一个国家/地区很简单。

我不知道如何在下拉列表中有一个复选框以允许多项选择。

TIA。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T10:10:38.223

您需要搜索[Multi-valued Parameters](http://msdn.microsoft.com/en-us/library/aa337292%28v=sql.100%29.aspx)。如果您打开参数的属性，将会有一个类似“允许多个值”的选项。报告服务将处理带有复选框的 UI。

关于多值参数要了解的一件重要事情是如何在查询中使用它们。假设您的参数`@CountryId`正在填充此查询：

```
SELECT CountryId, -- This will be the value for the parameter
       CountryName, -- The label for the parameter
FROM   Country 
```

如果您将此参数设置为允许多值，则报告服务将为您生成多选 UI。在执行任何使用该参数的后续查询时，在将查询发送到您的 SQL 服务器之前，它将用逗号分隔的`CountryId`值列表替换该参数。所以这个查询：

```
SELECT  *
FROM    MyDataTable
WHERE   MyDataTable.CountryId IN (@CountryID) 
```

将像这样发送到 SQL 服务器，假设选择了 3 个国家：

```
SELECT  *
FROM    MyDataTable
WHERE   MyDataTable.CountryId IN (1001,1002,1003) 
```

# php - 带有其他变量的 jQuery“克隆”脚本不起作用

> ID：12035331
> 
> 赞同：0
> 
> 时间：2012-08-20T09:38:21.383
> 
> 标签：php, jquery

我已经“克隆”了一个脚本，除了脚本的变量与原始脚本完全相同！但这并不完全有效。它卡在：

```
if(validConnection=="")
{
   $('#UsernameConnection').css('border-color','#00ff00');
   $('.ErrorUsernameConnection').text('');
   checkUsername1 = true;
} 
```

（*其余代码如下*）

我一直在检查我是否在更改变量时犯了一些错误，但它们似乎都正确匹配。怎么了？为什么它只使用不同的变量就可以正常工作，而不是这次？？？

这是HTML：

```
<div id="Connection">   
<div class="Connection">
    Connection
    <a href="#" id="HideConnection"><strong>×</strong></a>  
</div>

<?php connection(); ?>

<div class="formConnection">
    <form method="POST" autocomplete="off" name="Connection">
        <label for="Connection">Username:</label><br/>
        <input type="text" name="UsernameConnection" id="UsernameConnection"/><br/>
        <span class="ErrorUsernameConnection"></span><br/>
        <label for="Connection">Password:</label><br/>
        <input type="password" name="PasswordConnection" id="PasswordConnection"/>
        <span class="ErrorPasswordConnection"></span><br/>
        <input type="checkbox" name="checkbox"/><label>Remember me</label><br/>
        <input type="submit" name="Connection" value="Log In" id="Connection" class="LogIn"/>       
    </form>
</div> 
```

这是php：

```
 <?php
    if(isset($_POST['UsernameConnection']))
    {
        $Username1 = $_POST['UsernameConnection'];

        if(preg_match("/^([a-zA-Z0-9àáâãäåçèéêëìíîïðòóôõöùúûüýÿ]{1,}[._-\s]?)+[a-zA-Z0-9àáâãäåçèéêëìíîïðòóôõöùúûüýÿ]{1,}$/",$Username1))
        {
            echo "";
        }else
        {
            echo "Invalid";
        }
    }       
?> 
```

和JS：

```
 $(document).ready(function(){

    var checkUsername1 = false;

    $('#UsernameConnection').keyup(function(){

        var Username1 = $('#UsernameConnection').val();

        if(Username1=="")
        {   
            $('#UsernameConnection').css('border-color','red');
            $('.ErrorUsernameConnection').text('Error message 1');
            checkUsername1 = "Username empty";
        }else
        {
            $.post('fonctions/validUsernameConnection.php',{Username1:Username1},function(validConnection)
            {
                $('.ErrorUsernameConnection').text(validConnection);

                if(validConnection=="")
                {
                    $('#UsernameConnection').css('border-color','#00ff00');
                    $('.ErrorUsernameConnection').text('');
                    checkUsername1 = true;
                }else
                {
                    $('#UsernameConnection').css('border-color','orange');
                    checkUsername1 = "Username Invalid";
                }
            });
        }
    });
}); 
```

PS：我对所有堆栈的站点都有点迷失，所以如果这不是发布这个的正确的，请原谅我=/

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T09:48:52.367

问题似乎出在这条线上

```
$.post('fonctions/validUsernameConnection.php',{Username1:Username1},
function(validConnection) 
```

在您的 PHP 中，您应该检查 $_POST['U​​sername1'] 而不是 $_POST['U​​sernameConnection']

# java - 如何使用 JavaScript 在 JSP 页面上从下拉列表中呈现选定值的属性？

> ID：12035334
> 
> 赞同：0
> 
> 时间：2012-08-20T09:38:31.380
> 
> 标签：java, javascript, jsp, drop-down-menu

我正在开发一个 java web 应用程序，我正在使用 spring mvc 和 jsp 页面。

我在做什么：在一个jsp页面上，我从一个控制器接收一个带有wave对象的arraylist，这些对象被定义为一个java类（模型）并包含属性：名称、开始日期、结束日期。

我正在使用属性填充 arraylist 中的下拉元素。波浪对象的名称。

```
<c:forEach var="wave" items="${waveList}" varStatus="iter">         
<option value="${wave.name}">${wave.name}</option>
</c:forEach> 
```

问题：对于从下拉列表中选择的波，我如何使用其他属性（开始日期、结束日期）并将它们显示在 jsp 页面上，在下拉列表下，而不刷新页面。

我知道我必须使用 javascript，但我不知道 javascript，我猜这并不是一件复杂的事情。如果你们能给我答案或指导我学习教程或其他东西......我将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T09:43:49.007

您需要使用 AJAX 查询服务器以从服务器获取额外信息。

我认为 w3c 发布了一个很棒的 AJAX 教程，你不需要对 JS 了解太多

[http://www.w3schools.com/ajax/ajax_intro.asp](http://www.w3schools.com/ajax/ajax_intro.asp)

在了解了 JS 和 AJAX 的基本原理之后，你需要一个框架来做好又简单的 JS。我建议 jQuery：[http ://docs.jquery.com/Tutorials:Getting_Started_with_jQuery](http://docs.jquery.com/Tutorials:Getting_Started_with_jQuery)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T10:07:46.727

如果您可以进行轻微的设计更改，则可以避免额外的 HTTP (AJAX) 请求。

```
<option value="${wave.name}">${wave.name}</option> 
```

而不是值属性中的“名称”，您可以将结束日期和开始日期存储为带有分隔符的字符串 (enddate::startdate)，并且在 JS 中，您可以为选择定义一个 onclick/onSelect/onChange 侦听器检索选定的值.

对于 Select (HTML) 的 Javascript 片段： [使用 JavaScript 在下拉列表中获取选定的值？](https://stackoverflow.com/questions/1085801/how-to-get-the-selected-value-of-dropdownlist-using-javascript)

# objective-c - 如果顶点数组计数 > 1000，glDrawArrays 会变慢吗？

> ID：12035336
> 
> 赞同：2
> 
> 时间：2012-08-20T09:38:50.800
> 
> 标签：objective-c, macos, opengl

我有绘画应用程序。鼠标事件坐标存储到 VertexArray。然后顶点数组被绘制到屏幕上。我的代码结构看起来像这样

```
// I get mouse event coordinates and store them to VertexArray
glPushMatrix();
//some new matrix settings
glBindFramebufferEXT(GL_FRAMEBUFFER_EXT, framebuffer);
glClear(GL_COLOR_BUFFER_BIT);
//now I draw first full size textured quad and later I draw vertexArray

glDrawArrays(.....);

//and now I draw second full size textured quad on top of first quad ant that what have been drawn from vertex array

glPopMatrix();
glBindFramebufferEXT(GL_FRAMEBUFFER_EXT, 0);

//immediately after that I draw FBO to screen:
glBindTexture(GL_TEXTURE_2D, fbTexture);
//Code for drawing textured quad
glBindTexture(GL_TEXTURE_2D, 0); 
```

因此，每次注册新的鼠标事件坐标时，都会重新绘制所有内容。如果有超过 1000 个坐标，绘图会变得非常慢。我的问题可能在哪里？我认为 OpenGL 的 1000 个顶点并不多

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T12:32:05.353

这不是顶点的数量；这就是你发送它们的方式。

首先，您从未定义过“非常慢”；很多时候人们会错误地认为从 400fps 到 300fps 的变化是“慢”的。它不是。它仅表示渲染时间从每帧 2.5 毫秒增加到 3.3 毫秒，变化不到一毫秒。不平凡，但可能不是*太*在意的事情。

根据渲染时间而不是 FPS 来衡量性能总是很重要的。

话虽如此，您的主要问题是您一次绘制一个四边形。每个都来自一个单独的`glDrawArrays`命令。这不一定是件好事，*尤其是*当您在绘图命令之间更改状态时（例如绑定纹理等）。

如果您正在这样做，那么您需要找到避免这样做的方法。您想要做的是通过一次绘制调用渲染大量四边形。这意味着您必须对所有这些都使用相同的纹理。

这个问题的常见解决方案是制作一个更大的纹理，在不同的位置有多个图像。这通常称为“纹理图集”（详细信息请参见 Google）。每个四边形将具有其渲染的特定图像的纹理坐标。文本通常以这种方式绘制，其中每个字母（字形）都存储在相同的纹理中。

# android - Put the data from sqlite into hashmap in list form

> ID：12035338
> 
> 赞同：0
> 
> 时间：2012-08-20T09:38:52.397
> 
> 标签：android, sqlite, list, hashmap

```
public class ABC extends ListActivity {
static final ArrayList<HashMap<String,String>> list = new ArrayList<HashMap<String,String>>();

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.abc_list);

    SimpleAdapter adapter = new SimpleAdapter(
            this,
            list,
            R.layout.abc_list_row,
            new String[] {"AAA","BBB","CCC"},
            new int[] {R.id.aa,R.id.bb, R.id.cc,}
            );

    add();
    setListAdapter(adapter);  
}

   private void add() {        

    DatabaseA databaseHelper = new DatabaseA(this);
    SQLiteDatabase db = databaseHelper.getReadableDatabase();

    Cursor c= db.rawQuery("select * from data", null);
    HashMap<String,String> temp = new HashMap<String,String>();  

    while(c.moveToNext()){
        Log.d("Debug", c.getString(2));
        temp.put("AAA", c.getString(1));
        temp.put("BBB", c.getString(2));
        temp.put("CCC", c.getString(3));
        list.add(temp);
    } 

    c.close();
    db.close();

    for (Map.Entry<String, String> entry : temp.entrySet()) {
        String xx= entry.getKey();
        String yy = entry.getValue();
        Log.d("data", xx+" : "+yy);
    }
} 
```

My Logcat:

```
 D/Debug(657): New york
 D/Debug(657): New moon
 D/data(657): AAA : Aug 20, 2012 3:57:02 PM
 D/data(657): BBB : New moon
 D/data(657): CCC : Title 
```

My problem is it always left out the first data from sqlite in this list. Besides, everytime i press a button to view this list, it will add those data into this list although they are already exist. I just want to view those data in sqlite in list form. Any way to solve this. Thanks.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T09:50:46.573

You need to create your `Map` inside your `while` loop

```
while(c.moveToNext()){
    Map<String,String> temp = new HashMap<String,String>();  
    Log.d("Debug", c.getString(2));
    temp.put("AAA", c.getString(1));
    temp.put("BBB", c.getString(2));
    temp.put("CCC", c.getString(3));
    list.add(temp);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T09:47:20.357

Add cursor moveToFirst() like this:

```
Cursor c= db.rawQuery("select * from data", null);
HashMap<String,String> temp = new HashMap<String,String>();  
c.moveToFirst();
while(c.moveToNext()){
    Log.d("Debug", c.getString(2));
    temp.put("AAA", c.getString(1));
    temp.put("BBB", c.getString(2));
    temp.put("CCC", c.getString(3));
    list.add(temp);
} 
```

And please post the source code when the button is clicked!

# cakephp - 在非对象上调用成员函数 create()

> ID：12035339
> 
> 赞同：1
> 
> 时间：2012-08-20T09:38:53.767
> 
> 标签：cakephp

我面临一些问题**`calling to a member function create() on a non-object`**

请帮帮我，我的代码是：-

```
 <?php
     echo $form->create('Register', array('action' => 'register'));
     echo $form->input('username');
     echo $form->input('password');
     echo $form->input('cnfrmpassword', array('type' => 'password'));
     echo $form->submit();
     echo $form->end();
  ?> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-20T09:41:53.047

像这样尝试......你在`$this->`帮助者之前失踪了。

```
<?php
     echo $this->Form->create('User', array('action' => 'register'));
     echo $this->Form->input('username');
     echo $this->Form->input('password');
     echo $this->Form->input('cnfrmpassword', array('type' => 'password'));
     echo $this->Form->end('Submit');
?> 
```

# tridion - UGC 条件语句不起作用

> ID：12035341
> 
> 赞同：7
> 
> 时间：2012-08-20T09:38:56.167
> 
> 标签：tridion, tridion-2011, ugc

我正在使用 Tridion 2011 的 UGC 功能。我几乎完成了，但卡在了一个地方。实际上，当用户输入评论时，我必须显示一个文本，如果评论大于 0，它将显示。我正在使用这个条件，但它不符合条件。

```
<ugc:ItemStats  ItemURI="@PhysicalUri" runat="server">
<ugc:Choose runat="server">
  <ugc:When test=" ugcItemStats.numberOfComments equals  0 " runat="server">
       html1
  </ugc:When>
  <ugc:Otherwise runat="server"> 
       html2
  </ugc:Otherwise> 
</ugc:Choose>
</ugc:ItemStats> 
```

谁能帮我解决他的问题

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-20T11:25:54.613

使用此代码，我希望会起作用。

```
<%
HttpContext.Current.Item["variable"] = 0;
%>

<ugc:ItemStats  ItemURI="@PhysicalUri" runat="server">
<ugc:Choose runat="server">
  <ugc:When test="ugcItemStats.numberOfComments equals  variable " runat="server">
       html1
  </ugc:When>
  <ugc:Otherwise runat="server"> 
       html2
  </ugc:Otherwise> 
</ugc:Choose>
</ugc:ItemStats> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T10:43:25.913

When 语句从`HttpContext.Current.Items collection`.

我怀疑通过在 ItemStats 控件中嵌套语句会导致该对象尚不可用。

# matlab - 使用 matlab 绘制图形

> ID：12035343
> 
> 赞同：2
> 
> 时间：2012-08-20T09:39:00.703
> 
> 标签：matlab, plot

我在使用 .dat 文件的数据绘制图表时遇到问题。有人可以帮我吗？

该文件保存为`/My Documents/filename.dat`并具有代表变量的三列数字`X`，`Y`和`Z`。

（`X`从 45 到 `Z`90，0.5 的变化是从 0.4 到 0.95，0.05 的变化 `Y`是这两个变量的结果。）

示例：（.dat 文件中的一部分数据）

```
48.000000 -0.000010 0.400000
48.500000 -0.000004 0.400000
49.000000 0.000003 0.400000
49.500000 0.000010 0.400000
50.000000 0.000016 0.400000 
```

我想绘制 和 的 2d 图`X`，`Y`颜色应根据`Z`变量而变化。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-20T10:15:37.767

使用[textscan](http://www.mathworks.nl/help/techdoc/ref/textscan.html)读取数据：

```
fid = fopen('/My Documents/filename.dat');
data = textscan(fid, '%f %f %f');
fclose(fid);
X=data{1};
Y=data{2};
Z=data{3}; 
```

## 绘图方法#1

然后，如果你用

```
plot(X,Y) 
```

你会得到一个由线条组成的普通情节。然而，这些都具有相同的颜色。除非你把它们分成不同的行，否则改变它们是不可能的。

幸运的是，还有[scatter](http://www.mathworks.nl/help/techdoc/ref/scatter.html)函数可以让你这样做：

```
scatter(X,Y,[],Z) 
```

这会绘制点，颜色基于 Z。

## 绘图方法#2

如果您希望这些点与也具有不同颜色的线连接，则必须将它们绘制为单独的线，并分别为每条线提供颜色：

```
plot([X(1:end-1)' ; X(2:end)'], [Y(1:end-1)' ; Y(2:end)']); 
```

这些线条现在具有默认颜色，但是要获得正确的颜色有点麻烦，接下来是一个示例。不幸的是，我现在没有任何方法可以在这样的单行中输入颜色，所以我们必须循环。

```
Ncolors=10;
zmin=min(Z);zmax=max(Z);
dz=max((zmax-zmin)/Ncolors,eps);
clr_map=jet(Ncolors);
clr_ids=min(floor((Z(1:end-1)-zmin)/dz)+1,Ncolors);

figure;hold on;
for ii=1:numel(X)-1
    plot([X(ii) X(ii+1)], [Y(ii) Y(ii+1)],'color',clr_map(clr_ids(ii),:))
end 
```

所有线条现在都具有基于其端点之一的颜色。

要添加[colorbar](http://www.mathworks.nl/help/techdoc/ref/colorbar.html)，请使用`colorbar`，很奇怪吧？但当然，该条的标签指的是[colororder](http://www.mathworks.nl/help/techdoc/ref/axes_props.html#ColorOrder)。幸运的是，我们可以更改它们：

```
colormap(clr_map);
h_cb=colorbar;
set(h_cb,'yticklabel',arrayfun(@num2str,linspace(zmin,zmax,numel(get(h_cb,'ytick'))),'uni',false)); 
```

更改`Ncolors`以使用更多/更少的分辨率为线条着色。
可能矫枉过正：您还可以更改颜色栏上的标签数量，以下将其更改为 10：

```
colormap(clr_map);
h_cb=colorbar;
set(h_cb,'ytick',linspace(1,Ncolors,10));
set(h_cb,'yticklabel',arrayfun(@num2str,linspace(zmin,zmax,10),'uni',false)); 
```

或者现在标签只有 2 位小数：

```
set(h_cb,'yticklabel',arrayfun(@(yi) sprintf('%.2g',yi),linspace(zmin,zmax,10),'uni',false)); 
```

## 绘图方法#3

最后一种方法是使用补丁（速度较慢），[此处](https://stackoverflow.com/questions/11855011/plot3-line-color-based-on-value/11855419#11855419)针对 3d 案例进行了说明，因此您可以根据需要从那里开始。

# asp.net - 使用 curl 提交 asp.net 表单后无法获取数据

> ID：12035352
> 
> 赞同：1
> 
> 时间：2012-08-20T09:39:28.347
> 
> 标签：asp.net, curl

我正在尝试使用 curl 请求提交一个 asp 表单，该表单可用

[http://www.fikeandfike.com/propertytax/Grundy/Inquiry.aspx](http://www.fikeandfike.com/propertytax/Grundy/Inquiry.aspx)

此表格只能通过点击“包裹查询”访问

[http://www.fikeandfike.com/propertytax/Grundy/MainMenu.aspx?c=32](http://www.fikeandfike.com/propertytax/Grundy/MainMenu.aspx?c=32)

我编写了一个 curl 脚本来访问 for 并提交表单，但输出未按预期进行。实际上 post 方法没有做任何事情。我在 firebug 上尝试了网络建模，发现中间页面重定向到显示数据的网页。执行 curl 后，我得到的只是一个空白屏幕。是否有任何问题，因为按下提交按钮后临时页面重定向到最终页面。请帮忙。

# java - 如何在 JSP/Servlet 中执行表单验证？

> ID：12035354
> 
> 赞同：2
> 
> 时间：2012-08-20T09:39:37.967
> 
> 标签：java, jsp, jakarta-ee, servlets, validation

目前我对可能显示错误消息的每个字段执行类似的操作：

```
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core"%>
<c:choose>
  <c:when test="${message == null}">
    <label>Field name</label>
    <input type="text" name="field-name">
  </c:when>
  <c:otherwise>
    <label class="error">Field name</label>
    <input type="text" name="field-name">
    <small class="error">${message}</small>
  </c:otherwise>
</c:choose> 
```

如何干燥/改进这段代码？我不想每次在另一个领域需要它时都重复所有这些东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T11:16:10.563

如果您只是使用纯 JSP（没有任何其他框架），那么我建议您创建自己的自定义 JSP 标记。一个`field`标签和一个`message`标签。这将有点重新发明轮子，因为许多框架都提供了类似的东西，如果这只是您的唯一要求，那么您可以尝试一下。

有[Sun 的](http://java.sun.com/j2ee/tutorial/1_3-fcs/doc/JSPTags.html)关于如何创建自己的标签的教程，虽然有点旧，但内部没有太大变化，而且，它可以与任何 servlet 容器一起使用，因为它是标准的一部分。

我将为您提供编写简单标签所需的线索，如果您认为需要它`message`，我想您可以自己制作一个。`field`

# 基本方法

开始创建一个扩展[`TagSupport`](http://docs.oracle.com/javaee/6/api/javax/servlet/jsp/tagext/TagSupport.html)抽象类并覆盖该`doEndTag()`方法的基类。`message`检查当前 pageContext 中是否有任何属性，如果存在，则通过标签的打印流打印该错误消息：

```
public class MessageTag extends TagSupport {

    public int doEndTag() {
        String message = pageContext.findAttribute("message");
        if (message != null) {
            StringBuilder output = new StringBuilder();
            output.append("<small class=\"error\">").append(message).append("</small>");
            JspWriter out = pageContext.getOut();
            out.println(output.toString());
        }
        return EVAL_PAGE;
    }

} 
```

然后按照上一个教程中的步骤在你的 webapp 中定义标签库并在你的 JSP 中使用它：

```
<label>Field name</label>
<input type="text" name="field-name">
<mytags:message /> 
```

# 真实世界

那将是最简单的方法。但是在现实世界的场景中，您希望根据您正在验证的字段显示不同的错误消息，因此我将向`name`标记类添加一个属性（或类似的东西）并使其能够根据以下内容查找不同的消息该属性的值：

```
public class MessageTag extends TagSupport {

    private String name;

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public void release() {
        super.release();
        name = null;
    }

    public int doEndTag() {
        String lookupAttr = (name != null ? name : "message");
        String message = pageContext.findAttribute(lookupAttr);
        if (message != null) {
            StringBuilder output = new StringBuilder();
            output.append("<small class=\"error\">").append(message).append("</small>");
            JspWriter out = pageContext.getOut();
            out.println(output.toString());
        }
        return EVAL_PAGE;
    }

} 
```

这样您就可以为每个特定字段重用您的标签：

```
<label>Field name</label>
<input type="text" name="field-name">
<mytags:message name="field-name" /> 
```

请注意，您还需要将属性定义添加到标签库中。

显然，您可以根据需要将其复杂化（即：添加一个`style`允许您显示 INFO、WARNING 或 ERROR 消息等的属性）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T00:34:21.953

只要看看你在重复什么，然后把它统一起来。您正在重复`<label>`and`<input>`元素。只显示一次。`<label>`当有消息时，您只需要向 the 添加一个类和一个附加元素。

```
<label class="${not empty message ? 'error' : ''}">Field name</label>
<input type="text" name="field-name">
<c:if test="${not empty message}"><small class="error">${message}</small></c:if> 
```

您甚至可以省略`<c:if>`altogeter，如果没有消息，则`<small>`根本不会以任何方式出现在 UI 中。

```
<label class="${not empty message ? 'error' : ''}">Field name</label>
<input type="text" name="field-name">
<small class="error">${message}</small> 
```

我只会使用 a`<span>`而不是`<small>`因为不鼓励使用后者来达到这个目的。

```
<label class="${not empty message ? 'error' : ''}">Field name</label>
<input type="text" name="field-name">
<span class="error">${message}</span> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T10:04:49.233

你必须做这样的事情`<input type="text" name="user" value="user">`现在读取你想要使用的表单中的值。你可以使用 setAttribute() 和 getAttribute() 方法来获取新表单中的值。

# c# - 创建新密码的最佳方法是什么？

> ID：12035357
> 
> 赞同：2
> 
> 时间：2012-08-20T09:39:42.563
> 
> 标签：c#, asp.net-mvc-3, forgot-password

我已经构建了 mvc 3 应用程序，我在其中尝试构建忘记密码的功能。过程如下。

*   首先将提示用户输入用户名

*   如果用户名存在，则显示安全问题

*   如果用户输入正确答案，新创建的密码将发送到注册时保存在数据库中的电子邮件

在这里，我已经完成了第二步，也完成了检查答案。我想知道的是创建将发送到电子邮件的新密码的最佳方法是什么。我搜索了创建随机字符串并找到了这个..

```
var chars = "ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";
var random = new Random();
var result = new string(
    Enumerable.Repeat(chars, 8)
              .Select(s => s[random.Next(s.Length)])
              .ToArray()); 
```

我认为但不确定是否有机会再次创建相同的随机字符串，因此可能不适合新密码。生成新密码的最佳方法是什么。任何帮助将不胜感激。谢谢你！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T09:58:07.640

使用`Membership.GeneratePassword`方法。[您可以在此处](http://msdn.microsoft.com/en-us/library/system.web.security.membership.generatepassword.aspx)找到文档。这是一种更安全的机制，因为他们将在幕后使用密码术，并且您具有一些很好的灵活性，因为它允许您确定要包含的字母数字字符的长度和数量。它会生成一些**强**密码，我用过。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T09:45:45.277

除了@Odded 提供的链接：会说考虑到 在内存中保存密码字符串时最好使用[SecureString类。](http://msdn.microsoft.com/en-us/library/system.security.securestring.aspx)

> 表示应保密的文本。文本在使用时被加密以保护隐私，并在不再需要时从计算机内存中删除。这个类不能被继承。

因为一些恶意软件可以在认证的那一刻转储你的进程内存，在简单的情况下，`string`黑客 可以访问*明文字符串。*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T09:51:54.340

我会使用 Guid.New()。但正如所说，最好发送链接以设置新密码

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-20T10:28:51.840

对于忘记密码，请使用：

```
string username = member.LogName;
                    MembershipUser user = Membership.GetUser(username);
                    string generatedPassword = user.ResetPassword();
                    mail(generatedPassword ); // create custom function to mail the new 
```

生成的密码。

# c - 在c中激活和停用USB设备？

> ID：12035358
> 
> 赞同：1
> 
> 时间：2012-08-20T09:39:43.940
> 
> 标签：c, windows

我们有一个激光扫描仪，它一直连接到某个 USB 端口。
USB设备应正常停用。
只有在某些时候，我必须在 USB 端口用一个小 c 程序激活这个 USB 设备。
那么如何在c中激活已停用的USB设备？
感谢你的信息。

更新：
我忘了提及操作系统：Windows XP、Windows Vista、Windows 7，...
激光扫描仪是 Honeywell Voyager MS 9540 产品。
在我读到的文档中，如果 USB 扫描仪连接到串行端口，您可以通过串行端口发送启用和禁用命令以启用或禁用扫描。但我认为简单地启用或禁用 USB 端口/设备会更容易。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T00:29:15.633

我多一点信息会很有用...

对于 USB 连接，您可以使用[libusb](http://libusb.org/)（另请参见：[libusb-win32](http://libusb.org/wiki/libusb-win32)）。由于它也被 CUPS（一种打印软件）使用，我想它对你来说是理想的。

# sql-server - 正确的 SSIS 作业错误消息

> ID：12035361
> 
> 赞同：0
> 
> 时间：2012-08-20T09:39:50.750
> 
> 标签：sql-server, sql-server-2008, ssis

运行 SSIS 包的作业有时会在我们的环境中失败。

在作业历史记录中查找实际的错误消息有点烦人。例如，错误：“***登录超时过期***”隐藏在所有这些词中：

```
Executed as user: ****** Microsoft (R) SQL Server Execute Package Utility  Version 10.0.2531.0 for 64-bit  Copyright (C) Microsoft Corp 1984-2005\. All rights reserved.    Started:  8:31:01  Error: 2012-07-18 08:31:20.95     Code: 0xC0202009     Source: ***** Description: SSIS Error Code DTS_E_OLEDBERROR.  An OLE DB error has occurred. Error code: 0x80004005\.  An OLE DB record is available.  Source: "Microsoft SQL Server Native Client 10.0"  Hresult: 0x80004005  Description: "Login timeout expired".  An OLE DB record is available.  Source: "Microsoft SQL Server Native Client 10.0"  Hresult: 0x80004005  Description: "Unable to complete login process due to delay in login response".  An OLE DB record is available.  Source: "Microsoft SQL Server Native Client 10.0"  Hresult: 0x80004005  Description: "TCP Provider: Timeout error [258]. ".  End Error  Error: 2012-07-18 08:31:20.98     Code: 0xC020801C     Source: **** Description: SSIS Error Code DTS_E_CANNOTACQUIRECONNECTIONFROMCONNECTIONMANAGER.  The AcquireConnection method call to the connection manager **** failed with error code 0xC0202009\.  There may be error messages posted before this with more information on why the AcquireConnection method call failed.  End Error  Error: 2012-07-18 08:31:20.99     Code: 0xC0047017     Source: Find and send notifications SSIS.Pipeline     Description: component "Duplicate contracts" (3002) failed validation and returned error code 0xC020801C.  End Error  Error: 2012-07-18 08:31:20.99     Code: 0xC004700C     Source: Find and send notifications SSIS.Pipeline     Description: One or more component failed validation.  End Error  Error: 2012-07-18 08:31:21.00     Code: 0xC0024107     Source: Find and send notifications      Description: There were errors during task validation.  End Error  DTExec: The package execution returned DTSER_FAILURE (1).  Started:  8:31:01  Finished: 8:31:21  Elapsed:  19.984 seconds.  The package execution failed.  The step faile 
```

您是否碰巧知道任何其他方式（更方便）来查看/获取/接收/检测作业历史记录中的错误消息？

在此先感谢，罗尼。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T09:46:10.440

查看 SQL 作业属性窗口中的通知选项卡。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T09:51:47.857

最后，我们创建了一个与包异步运行的作业，并将检查在最后 5 分钟内是否有作业失败。如果是这样，它将发送错误消息。

附上代码请找。您需要做的就是更改“ProfileName”和邮件本身。

```
 select
 j.name,h.step_name, message, run_status,run_date,run_time,run_duration
into
 ##tCheck
from
 msdb..sysjobhistory h
inner
 join msdb..sysjobs j
on h.job_id = j.job_id
and
 run_status=0
and
 run_date = CONVERT(varchar(10),getdate(),112)--Looking on failed job from today.
and
 run_time > cast (replace(CONVERT(varchar(10),dateadd(mi,-5,getdate()),108),':','')as int)   --Looking on failed job from the last 5 minutes.
and
 step_name<>'(Job outcome)'
order
 by h.run_date desc ,h.run_time desc 

if
 @@rowcount > 0
begin
DECLARE
 @xml NVARCHAR(MAX)
DECLARE
 @body NVARCHAR(MAX)

SET
 @xml = CAST(( SELECT name AS 'td','' 
,step_name AS 'td',''
,message AS 'td',''
,run_status AS 'td',''
,run_Date AS 'td',''
,run_time AS 'td',''
,run_duration AS 'td'
FROM
  ##tCheck ORDER BY name 
FOR
 XML PATH('tr'), ELEMENTS ) AS NVARCHAR(MAX))

SET
 @body ='<html><body><H3>Job Failed message</H3><table border = 1> <tr><th> name </th> <th> step_name Name </th> <th> message </th> <th> run_status </th><th> run_Date </th><th> run_time </th> <th> run_duration </th></tr>'     
SET
 @body = @body + @xml +'</table></body></html>'
EXEC
 msdb.dbo.sp_send_dbmail
@profile_name = '<profile_name>',
 @recipients 
= '<email>',
 @subject 
= 'Failed job details' ,
 @body 
= @body, 
@body_format 
='HTML'

end

drop

 table ##tCheck

go 
```

# ajax - 如何从 Ajax 方法将值传递给控制器 Action？

> ID：12035364
> 
> 赞同：0
> 
> 时间：2012-08-20T09:39:58.727
> 
> 标签：ajax, asp.net-mvc-3

大家好，我有ajax，我有一些数据和一个控制器操作方法......我需要将数据发送到控制器操作方法......当我这样做时，它在我的控制器方法中有空值，任何人都可以纠正我在哪里做...

```
 <script type="text/javascript">
    $(document).ready(function () {

        $("#butValidateForm").click(function () {               
            UpdateMethod();
        })
    });
    function UpdateMethod() {
        var s = document.getElementById("EmployeeID");
        var selecteditem1 = s.options[s.selectedIndex].value;

        var a = document.getElementById("FromStatusId");
        var selecteditem6 = a.options[a.selectedIndex].value;

        var data = '{"AssignTo":"' + selecteditem1 + '","Status":"' + selecteditem6 + '"}';
        alert(data);

        $.ajax({
            type: "POST",
            url: "/ViewBug/Update/",
            enctype: 'multipart/form-data',
            data: data,
            success: function () {
            }
        });
    }  

</script> 
```

我的控制器操作方法

```
 [HttpPost]
    public ActionResult Update(BugModel model, FormCollection form, string selecteditem1, string selecteditem6)
    {
        if (Session["CaptureData"] == null)
        {
        }
        else
        {
            model = (BugModel)Session["CaptureData"];
        }
        ViewBag.AssignTo = new SelectList(GetEmployee(), "EmployeeID", "EmployeeName");
        ViewBag.Status = new SelectList(GetFromStatus(), "FromStatusId", "FromStatus");
        using (SqlConnection conn = new SqlConnection(connString))
        {
            SqlCommand cmd = new SqlCommand("sp_history", conn);
            cmd.CommandType = CommandType.StoredProcedure;
            conn.Open();
            cmd.Parameters.Add("@Title", SqlDbType.VarChar).Value = model.Title;
            cmd.Parameters.Add("@FixedById", SqlDbType.VarChar).Value = model.LoginName;
            cmd.Parameters.Add("@AssignedId", SqlDbType.Int).Value = model.AssignTo;
            cmd.Parameters.Add("@Resolution", SqlDbType.VarChar).Value = model.Resolution;
            cmd.Parameters.Add("@FromStatus", SqlDbType.VarChar).Value =model.Status;
            string fileName = string.Empty;
            string StrFilePath = string.Empty;
            foreach (BugAttachment objList in model.ListFile)
            {
                if (string.IsNullOrEmpty(StrFilePath))
                {
                    fileName = objList.AttachmentName;
                    StrFilePath = objList.AttachmentUrl;
                }
                else
                {
                    fileName = fileName + "," + objList.AttachmentName;
                    StrFilePath = StrFilePath + "," + objList.AttachmentUrl;
                }
            }
            cmd.Parameters.Add("@AttachmentName", SqlDbType.VarChar).Value = fileName;
            cmd.Parameters.Add("@BugAttachmentUrl", SqlDbType.VarChar).Value = StrFilePath;
            cmd.Parameters.Add("@AttachedBy", SqlDbType.VarChar).Value = model.LoginName;
            cmd.ExecuteNonQuery();
            conn.Close();
        }
        return View("Edit");
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-20T09:53:15.507

代替

```
public ActionResult Update(BugModel model, FormCollection form, string selecteditem1, string selecteditem6) 
```

试试这个：

```
public ActionResult Update(BugModel model, FormCollection form, string AssignTo, string Status) 
```

您需要使用您在发送回的对象中使用的属性名称，因为您已将它们命名为 AssignTo 和 Status。希望这可以帮助。

编辑：

尝试像这样发送对象：

```
var data ={};
data.AssignTo = selectedvalue1;
data.Status = selectedvalue6; 
```

看看这是否有什么不同。如果您仍然有问题，您可以在萤火虫/开发人员工具中检查请求吗？

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-20T10:49:58.633

试试这个：

```
var data = { AssignTo: selecteditem1, Status: selecteditem6 }; 
```

另外，根据亨利的回答，使用签名：

```
public ActionResult Update(BugModel model, 
              FormCollection form, 
              string AssignTo, 
              string Status) 
```

tho，您当然应该能够从`form[]`集合中获取所需的值，因为您正在`HttpPost`幕后进行操作：

（即`var assignTo = form["AssignTo"];`等）。

**[编辑]** - 出于好奇，我能问一下你为什么将 jquery 语法与更传统的 javascript 对象语法混合和匹配。一个例子是你从哪里获得`EmployeeID`期权的价值？？为什么不直接使用`var selecteditem1 = $('#EmployeeID').val();`.

我还注意到 ViewBag 对象在您的`HttpPost`操作中得到更新。您是否希望能够在返回视图时使用它 - 肯定不是（无论如何都不是 ajax 请求）。对我的好奇心的快速解释会很棒。在我看来，你试图用这个动作做太多（当然，保持干燥 - 但是）我担心你最终会陷入困境，因为你似乎正在建立许多不同的入口点向上。我建议温和地倒带，只是为了让事情更加集中，每个动作都有一个单一的责任。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T12:48:33.040

我最终做了以下事情：

```
 <script type="text/javascript">
    $(document).ready(function () {

        $("#butValidateForm").click(function () {               
            UpdateMethod();
        })
    });
    function UpdateMethod() {
        var s = document.getElementById("EmployeeID");
        var selecteditem1 = s.options[s.selectedIndex].value;

        var a = document.getElementById("FromStatusId");
        var selecteditem6 = a.options[a.selectedIndex].value;

       // var data = '{AssignTo:' + selecteditem1 + '}';
       // alert(data);
        var AssignTo;
        var Title;
        Title=$("#Title").val();
        var FixedBy;
        FixedBy = $("#LoginName").val();
        var Resolution;
        Resolution = $("#Resolution").val();
        var Status;
        Status = $("#FromStatusId").val();
        $.ajax({
            type: "POST",
            url: "/ViewBug/Update/",
            enctype: 'multipart/form-data',
            data: {AssignTo:selecteditem1,Title:Title,FixedBy:FixedBy,Resolution:Resolution,Status:Status},
            success: function () {
            }
        });
    }

</script> 
```

# python - 如何在 python 中使用 create_connection 设置套接字类型和套接字协议？

> ID：12035365
> 
> 赞同：1
> 
> 时间：2012-08-20T09:40:16.573
> 
> 标签：python, sockets, types, protocols

我想用来`socket.create_connection()`在 python 的 ping 实现中设置源地址。

但是我怎样才能设置类型和协议呢？因为，之前，我做过：

```
icmp = socket.getprotobyname("icmp") 
my_socket = socket.socket(socket.AF_INET, socket.SOCK_RAW, icmp) 
```

但现在，我这样做：

```
src_addr = socket.gethostbyname(src_addr) 
dest_addr = socket.gethostbyname(dest_addr) 
my_socket = socket.create_connection(dest_addr, socket.getdefaulttimeout(), src_addr) 
```

有没有类似的东西`my_socket.setproto()`？我在文档中没有找到这样的功能。

谢谢你，纪尧姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T10:30:43.593

create_connection 将创建一个 TCP 连接，所以它不会做你想做的事。您需要使用原始套接字，就像您给自己的示例一样。为什么要切换到使用socket.create_connection？

# javascript - Stackexchange 站点页面上的动画面板

> ID：12035368
> 
> 赞同：2
> 
> 时间：2012-08-20T09:40:21.550
> 
> 标签：javascript, html, web-applications

我想在我的网站上添加一个页面，其布局带有动画面板，这些面板会根据单击的面板自动滑动，如 Stackexchange 的站点页面： [https ://stackexchange.com/sites](https://stackexchange.com/sites)

Stackexchange 的设计者使用什么语言和特定的方法来布置该页面，或者更有意义的是，你会推荐我研究什么语言和方法，以便学习创建类似的东西？也许某处有一个教程可以创建类似的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T10:01:10.090

通过查看该页面的来源（通过在 Chrome 中激活开发人员控制台并查看[脚本面板](https://developers.google.com/chrome-developer-tools/docs/scripts)来实现。）我可以看到他们正在使用[Isotope 布局引擎](http://isotope.metafizzy.co/)。

Isotope 是一个用 JavaScript 编写的 jQuery 插件，上面链接的站点包含一些可靠的文档；但是，如果您是 JavaScript 新手，那么它们可能有点难以理解。一个快速的谷歌带来了以下[同位素教程](http://www.designlunatic.com/2011/08/isotope-tutorial/)，它可以帮助您入门。

# php - 元关键字和描述显示在每个帖子上

> ID：12035370
> 
> 赞同：1
> 
> 时间：2012-08-20T09:40:32.660
> 
> 标签：php, html, wordpress, wordpress-theming, meta

下面是 WordPress 牵引主题的 PHP 代码。我想在主页上显示的每个帖子/页面上显示我的关键字和描述。我该怎么做呢？

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
"http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xml:lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
<?php if ( is_front_page() ) : ?>
<title><?php bloginfo( 'name' ); ?></title>
<meta name="description" content="<?php if ( is_single() ) {
single_post_title('', true); 
} else {
bloginfo('name'); echo " - "; bloginfo('description');
}
?>" />
<meta name="keywords" content="mediafire, free movies, download movies, movies 
mediafire, online movies, download mediafire movies, movies online, hindi movies, 
bollywood movies, english movies, small movies, high quality, small size, free 
download, download, download links" />
<meta http-equiv="author" content="M.Naeem Riaz" />
<?php elseif ( is_404() ) : ?>
<title><?php _e( 'Page Not Found |', 'traction' ); ?> | <?php bloginfo( 'name' ); 
?></title>
<?php elseif ( is_search() ) : ?>
<title><?php printf(__ ("Search results for '%s'", "traction"),  
attribute_escape(get_search_query())); ?> | <?php bloginfo( 'name' ); ?></title>
<?php else : ?>
<title><?php wp_title($sep = '' ); ?> | <?php bloginfo( 'name' );?></title>
<?php endif; ?>
<!-- Basic Meta Data -->
<meta name="Copyright" content="Design is copyright <?php echo date( 'Y' ); ?> The  
Theme Foundry" />
<meta http-equiv="imagetoolbar" content="no" />
<meta http-equiv="Content-Type" content="<?php bloginfo( 'html_type' ); ?>; 
charset=<?php bloginfo( 'charset' ); ?>" />
<?php if ((is_single() || is_category() || is_page() || is_home()) && (!is_paged())) : 
else : ?>
<meta name="robots" content="noindex,follow" />
<?php endif; ?>

<!-- Favicon -->
<link rel="shortcut icon" href="<?php bloginfo( 'stylesheet_directory' ); ?>/images
/favicon.ico" />

<!--Stylesheets-->
<?php if ( ($traction->colorScheme() != 'default' ) ) { ?>
    <link href="<?php bloginfo( 'stylesheet_directory' ); ?>/stylesheets/<?php 
echo $traction->colorScheme(); ?>.css" type="text/css" media="screen" rel="stylesheet" 
/>
<?php } ?>
<link href="<?php bloginfo( 'stylesheet_url' ); ?>" type="text/css" media="screen" 
rel="stylesheet" />
<!--[if lt IE 8]>
    <link rel="stylesheet" type="text/css" media="screen" href="<?php 
bloginfo( 'template_url' ); ?>/stylesheets/ie.css" />
<![endif]-->

<!--WordPress-->
<link rel="alternate" type="application/rss+xml" title="<?php bloginfo( 'name' ); 
?> RSS Feed" href="<?php bloginfo( 'rss2_url' ); ?>" />
<link rel="pingback" href="<?php bloginfo( 'pingback_url' ); ?>" />

<!--WP Hooks-->
<?php if ( is_singular() ) wp_enqueue_script( 'comment-reply' ); ?>
<?php wp_enqueue_script( 'jquery' ); ?>
<?php wp_head(); ?>

<!--Scripts-->
<script type="text/javascript" src="<?php bloginfo( 'template_url' ); 
 ?>/javascripts/traction.js"></script>
<?php if ( is_front_page() && ($traction->sliderState() != '' ) ) { ?>
    <!--Slider-->
    <?php
        $autoStart = 0;
        $slidespeed = 300;
        $fadespeed = 200;
        if ($traction->sliderSpeed() != '' ) $slidespeed = 
 $traction->sliderSpeed();
        if ($traction->sliderFade() != '' ) $fadespeed = 
$traction->sliderFade();
        if ($traction->sliderStart() == 'true' ) $autoStart = 
$traction->sliderDelay(); else $autoStart = 0;
    ?>
    <script type="text/javascript" charset="utf-8">
        jQuery(function(){
            jQuery("#feature").loopedSlider({
                containerClick: false,
                autoStart: <?php echo $autoStart; ?>,
                slidespeed: <?php echo $slidespeed; ?>,
                fadespeed: <?php echo $fadespeed; ?>,
                autoHeight: 1
            });
        });
    </script>
<?php } ?>

</head>

<body <?php body_class($traction->colorScheme()); ?>>
<div class="skip-content"><a href="#content"><?php _e( 'Skip to content', 
'traction' ); ?></a></div>
<div id="pg-nav-bg">
    <div class="wrapper clear">
        <div id="pg-nav">
            <ul class="nav">
                <?php if ($traction->hideHome() !== 'true' ) : ?>
                    <li class="page_item <?php if 
(is_front_page()) echo( 'current_page_item' );?>"><a href="<?php bloginfo( 'url' ); 
?>"><?php _e( 'Home', 'traction' ); ?></a></li>
                <?php endif; ?>
                <?php if ($traction->hidePages() !== 'true' ) : ?>
                    <?php wp_list_pages( 'title_li=&exclude='. 
$traction->excludedPages()); ?>
                <?php endif; ?>
            </ul>
        </div><!--end pg-nav-->
    </div><!--end wrapper-->
</div><!--end page-navigation-bg-->
<div class="wrapper big">
    <div id="header" class="clear">
        <?php if ($traction->logoState() == 'true' ) : ?>
            <div class="logo logo-img">
                <a href="<?php bloginfo( 'url' ); ?>"><img 
src="<?php bloginfo( 'stylesheet_directory' ); ?>/images/<?php echo 
$traction->logoName(); ?>" alt="<?php if ($traction->logoAlt() !== '' ) echo 
$traction->logoAlt(); else echo bloginfo( 'name' ); ?>"/></a>
                <?php if ($traction->logoTagline() == 'true' ) { ?>
                    <div id="description">
                        <?php bloginfo( 'description' ); ?>
                    </div><!--end description-->
                <?php } ?>
            </div><!--end logo-->
        <?php else : ?>
            <div class="logo">
                <?php if (is_home()) echo( '<h1 id="title">' ); 
 else echo( '<div id="title">' );?><a href="<?php bloginfo( 'url' ); ?>"><?php 
 bloginfo( 'name' ); ?></a><?php if (is_home()) echo( '</h1>' ); else echo( '</div>' 
 );?>
                    <div id="description">
                        <?php bloginfo( 'description' ); ?>
                    </div><!--end description-->
            </div><!--end logo-->
        <?php endif; ?>
        <?php if ($traction->bannerState() != '' ) { ?>
            <div class="banner">
                <a href="<?php if ($traction->bannerUrl() != '' ) 
echo $traction->bannerUrl(); else echo "#"; ?>"><img class="alignleft" src="<?php 
bloginfo( 'stylesheet_directory' ); ?>/images/ads/<?php if ($traction->bannerImage() != 
'' ) echo $traction->bannerImage(); else echo "468_ad.png"; ?>" width="468" 
height="60" alt="<?php if ($traction->bannerAlt() != '' ) echo $traction->bannerAlt(); 

else echo bloginfo( 'name' ); ?>" /></a>
            </div>
        <?php } ?>
        <div id="cat-nav" class="clear">
            <ul class="nav">
                <?php if ($traction->hideCategories() != 'true' ) 
: ?>
                    <?php wp_list_categories( 'title_li=&
exclude=' . $traction->excludedCategories()); ?>
                <?php endif; ?>
            </ul>
        </div><!--end cat-nav-->
    </div><!--end header-->
    <?php if (($traction->sliderState() != '' ) && is_front_page() && 
!is_paged() ) { ?>
        <?php if (is_file(STYLESHEETPATH . '/featured.php' )) 
include(STYLESHEETPATH . '/featured.php' ); else include(TEMPLATEPATH . '/featured.php' 
); ?>
<?php } ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T05:28:12.863

如果您想要每个帖子/页面的元标记，只需取出用于描述和全局条件关键字的元标记`is_front_page`。您`head`关于元标记部分的代码可能如下（查看每种类型元标记的注释）：

```
<!-- Title -->
<?php if ( is_front_page() ) : ?>
<title><?php bloginfo( 'name' ); ?></title>

<?php elseif ( is_404() ) : ?>
<title><?php _e( 'Page Not Found |', 'traction' ); ?> | <?php bloginfo( 'name' ); 
?></title>

<?php elseif ( is_search() ) : ?>
<title><?php printf(__ ("Search results for '%s'", "traction"),  
attribute_escape(get_search_query())); ?> | <?php bloginfo( 'name' ); ?></title>
<?php else : ?>
<title><?php wp_title($sep = '' ); ?> | <?php bloginfo( 'name' );?></title>
<?php endif; ?>

<!-- Description / Keywords -->
<meta name="description" content="<?php if ( is_single() ) {
single_post_title('', true); 
} else {
bloginfo('name'); echo " - "; bloginfo('description');
}
?>" />
<meta name="keywords" content="mediafire, free movies, download movies, movies 
mediafire, online movies, download mediafire movies, movies online, hindi movies, 
bollywood movies, english movies, small movies, high quality, small size, free 
download, download, download links" />
<meta http-equiv="author" content="M.Naeem Riaz" />

<!-- Basic Meta Data -->
<meta name="Copyright" content="Design is copyright <?php echo date( 'Y' ); ?> The  
Theme Foundry" />
<meta http-equiv="imagetoolbar" content="no" />
<meta http-equiv="Content-Type" content="<?php bloginfo( 'html_type' ); ?>; 
charset=<?php bloginfo( 'charset' ); ?>" />
<?php if ((is_single() || is_category() || is_page() || is_home()) && (!is_paged())) : 
else : ?>
<meta name="robots" content="noindex,follow" /> 
```

# jquery - jQuery - 将具有颜色属性的类添加到链接

> ID：12035379
> 
> 赞同：0
> 
> 时间：2012-08-20T09:40:55.007
> 
> 标签：jquery, css, colors, hyperlink, addclass

这是我的问题。我有一个动态生成的类的列表。每个类都有一种颜色。这是示例类：

```
.magenta {
    color: #7abbb8;
} 
```

另一方面，我在页脚中有一些链接。我想`<p>`在页脚悬停时使用这个类：

```
(function($) {
    $('footer p').hover(function() {
        $(this).find('a').addClass('magenta');
    });
})(jQuery); 
```

这段代码完美运行 - 在 p 悬停后，我的 a have class="magenta" 。但是……它没有`color: #7abbb8`。它可能很容易修复`!important`，但正如我所说，我有很多这些类，它们是动态创建的，所以我不想这样做。我怎么能以另一种方式做到这一点？

// 编辑

好的，问题出在其他地方。我没有更改类 css，我更改了具有此类的每个元素的 css。所以这种颜色不会随类添加到新元素中。不幸的是，没有简单的方法可以用 jQuery 解决这个问题，但似乎有一些插件将 CSS 规则添加到样式表中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T09:48:19.313

检查您的样式表的`a:visited`样式或尝试在您的 css 中提供此样式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T09:52:57.610

尝试更具体地使用您的 CSS：

```
footer p a.magenta {
    color: #7abbb8;
} 
```

或者你总是可以直接设置颜色：

```
(function($) {
    $('footer p').hover(function() {
        $(this).find('a').css('color', '#7abbb8');
    });
})(jQuery); 
```

并确保您定位正确的元素，那将是实际包含您要更改的文本的元素。

# database - 如何确定函数依赖和多值依赖？

> ID：12035383
> 
> 赞同：1
> 
> 时间：2012-08-20T09:41:17.540
> 
> 标签：database, functional-dependencies

我有下表

```
Case ( referenceID, startDate, endDate, caseDetail, caseType, caseTypeRate, 
    lawyerName, lawyerContact, clientID, clientName, clientAddress, clientContact,
    serviceProvided, serviceDate, serviceCost,
    otherPartyID, otherPartyName, otherPartyContact ) 
```

我的 FD 是

```
 referenceID-->caseDetail
 referenceID-->caseType
 referenceID-->ServiceProvided
 lawyerContact-->lawayerName
 clientID-->clientName 
```

我是正确的还是还有更多？在阅读了理论之后，我仍然有点不确定它是如何工作的。我需要清楚的例子。我如何确定 mvds 以及？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T05:57:55.017

Loosely speaking, a functional dependency expressed as `x -> y` means, "When I know any value of x, I know one and only one value of y." So the value of x determines one and only one value of y.

To determine whether a functional dependency exists, you ask yourself the question, "If I know any value for x, do I know one and only one value for y?", and then answer it.

In your case, I'd *guess* that *most* of these additional functional dependencies will hold. It's hard to tell for sure, since there's no sample data, and since I don't know what the columns mean. (Trying to determine functional dependencies based solely on column names is *very* risky. Here, "startDate" could mean just about anything.)

```
referenceID -> startDate
referenceID -> endDate
referenceID -> caseType
referenceID -> caseTypeRate
clientID -> clientName
clientID -> clientAddress
clientID -> clientContact
otherPartyID -> otherPartyName
otherPartyID -> otherPartyContact 
```

There are others.

Wikipedia has a [concise example of a multi-valued dependency](http://en.wikipedia.org/wiki/Multivalued_dependency#Example).

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-31T14:04:58.477

功能依赖：-如果 X 的一个值只有一个 Y 值，那么我们可以说 Y 在功能上依赖于 X，并写如下。

```
X -> Y 
```

多值依赖：-如果对于 X 的一个值有多个 Y 值，那么我们可以说 Y 是对 X 的多值依赖，它写成如下。

```
X ->-> Y 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-02-15T01:06:49.817

这是如何确定 MVD 的一个很好的示例：[https](https://web.archive.org/web/20140212170321/https://www.cs.oberlin.edu/~jdonalds/311/lecture08.html) ://web.archive.org/web/20140212170321/https://www.cs.oberlin.edu/~jdonalds/311/lecture08.html 。

基本上，遵循这个算法：

1) 判断 A 是否确定了 B 的一组值，2) 判断 A 是否确定了 C 的一组值，然后 3) 确定 B 和 C 是否相互独立。

A、B、C 是一组属性。如果满足条件，则 A -->> B 和 A -->> C 是 MVD。

# android - 操作栏菜单图标

> ID：12035384
> 
> 赞同：0
> 
> 时间：2012-08-20T09:41:20.323
> 
> 标签：android, android-actionbar, menuitem

我想知道如何将图标添加到操作栏菜单，这意味着不是操作栏本身，而是当您按下菜单按钮时，您实际上会打开一个仅包含文本的微调器。在 Galaxy SIII 中，三星以某种方式在他们的应用程序图标中实现了这个微调器。那么，这可能吗？如果可以，具体怎么做？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T10:26:25.780

您可以查看[ActionProviders](http://developer.android.com/guide/topics/ui/actionbar.html#ActionProvider)。它将允许您拥有`MenuItem`自己的`Action`.

[这里](https://gist.github.com/1460581)有一个示例（应用选择器菜单）

# javascript - 如何让newsticker在图片淡出的时候平滑滚动

> ID：12035388
> 
> 赞同：0
> 
> 时间：2012-08-20T09:41:26.340
> 
> 标签：javascript

在网站上，有一个带有褪色图片的幻灯片，底部有一个水平滚动的新贴纸。两者都是用javascript动画的。让我烦恼的是，在图片开始淡入淡出时，新贴纸会在短时间内停止滚动。这似乎在很大程度上取决于浏览器可用的资源。

如何让两个脚本顺利运行？

这是用于淡化图片的代码：

```
this.b_slidenow = function(){
    var check1,maxalpha,curralpha;
    check1=ptofade.style.MozOpacity;
    maxalpha=(100-factor*u)/100*105;
    if(check1<=maxalpha/100){u=u+1;}
    curralpha=100-factor*u;
    ptofade.style.filter="Alpha(Opacity="+curralpha+")";
    ptofade.style.MozOpacity=curralpha/100;
    ptofade.style.opacity=curralpha/100;
    if(u<steps){ //slide not finished
        if(stopit=="0"){mytimeout=setTimeout(function(){self.b_slidenow();},ftim);}
        else {this.b_slide();}
    }
    else{ //slide finished
        if(startim<emax){
            ptofade.style.visibility="hidden";
            ptofade.style.zIndex=1;
            pnext.style.zIndex=2;
            startim=startim+1;u=0;
            mytimeout=setTimeout(function(){self.b_slide();},stim);
        }
        else{
            ptofade.style.visibility="hidden";
            ptofade.style.zIndex=1;
            pnext.style.zIndex=2;
            startim=1;u=0;
            mytimeout=setTimeout(function(){self.b_slide();},stim);
        }
    }
} 
```

这是用于滚动代码的代码：

```
function TICKER_tick() {
    if(!TICKER_PAUSED) document.getElementById(ticker).scrollLeft += TICKER_SPEED * (TICKER_RIGHTTOLEFT ? -1 : 1);
    if(TICKER_RIGHTTOLEFT && document.getElementById(ticker).scrollLeft <= 0) document.getElementById(ticker).scrollLeft = document.getElementById(ticker).scrollWidth - document.getElementById(ticker).offsetWidth;
    if(!TICKER_RIGHTTOLEFT && document.getElementById(ticker).scrollLeft >= document.getElementById(ticker).scrollWidth - document.getElementById(ticker).offsetWidth) document.getElementById(ticker).scrollLeft = 0;
    window.setTimeout("TICKER_tick()", 20);
} 
```

该站点仅用于内部信息亭屏幕，将使用 chrome 呈现。

# android - 从谷歌账户获取用户的真实姓名

> ID：12035389
> 
> 赞同：3
> 
> 时间：2012-08-20T09:41:34.380
> 
> 标签：android, google-account

有没有办法获得谷歌账户中设置的用户真实姓名？

我可以使用**AccountManager.get(ctx).getAccountsByType("com.google")**来获取用户的谷歌电子邮件地址。但是我想获得真实姓名，以便在我的应用程序中很好地问候用户。

是否有一些 Android API 来获取此信息？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-20T10:22:36.400

您只能在 Android 4.0（API 级别 14 +）中执行此操作

请看一下[这篇](https://stackoverflow.com/questions/2112965/how-to-get-the-android-devices-primary-e-mail-address)文章。

# php - codeigniter 视图中的非法字符串偏移错误

> ID：12035392
> 
> 赞同：3
> 
> 时间：2012-08-20T09:41:44.050
> 
> 标签：php, codeigniter, associative-array

我正在使用 codeigniter 2.1.2 做一个 PHP 项目，在 WAMP 上使用 mySql 数据库，我偶然发现了以下问题：

这是我的模型

```
function loadUserData() {
    $sql = "SELECT username FROM user WHERE username = ?";
    $query = $this -> db -> query($sql, $this->session->userdata('username'));

    if ($query -> num_rows() > 0) {
        foreach ($query->result() as $row) {
            $data = $row;
        }
        return $data;
    }

} 
```

控制器

```
function profile_access() {
    if ($this -> session -> userdata('is_logged_in')) {
        $this->load-> model('profile_model');
        $uData['rows']=$this->profile_model->loadUserData();
        $this->load->view('profile_view',$uData);

    } else {
        echo "<script type=\"text/javascript\"> alert(\"You need to provide your credentials first.\");</script>";
        redirect('login_controller/index');
    }
} 
```

和视图

```
<?php
      foreach($rows as $r){
              echo print_r($r);
              echo $r[username]->username; //line no. 81 in my code
            }
?> 
```

从`print_r($r)`视图给我以下错误：

```
alphaomega1
A PHP Error was encountered
Severity: Notice
Message: Use of undefined constant username - assumed 'username'
Filename: views/profile_view.php
Line Number: 81

A PHP Error was encountered
Severity: Warning
Message: Illegal string offset 'username'
Filename: views/profile_view.php
Line Number: 81

A PHP Error was encountered
Severity: Notice
Message: Trying to get property of non-object
Filename: views/profile_view.php
Line Number: 81 
```

我希望上面的代码只返回数据库中的用户名“alphaomega”。但是会显示它，但我不知道为什么会出现这些错误。将不胜感激一些帮助。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T09:44:00.100

在您看来：

```
foreach($rows as $r){
     echo $r->username;
} 
```

在您的模型中：

```
function loadUserData() {
    $sql = "SELECT username FROM user WHERE username = ?";
    $query = $this->db->query($sql, $this->session->userdata('username'));

    return $query->result();
} 
```

# objective-c - MPMoviePlayerController 不会设置为我声明的尺寸框架

> ID：12035393
> 
> 赞同：4
> 
> 时间：2012-08-20T09:41:44.423
> 
> 标签：objective-c, xcode, uiview, resize, mpmovieplayercontroller

我目前正在尝试为存储在自定义类（VideoEngine）中的 MPMoviePlayerController 设置框架。电影使用 URL 设置，该 URL 由用户在应用程序期间捕获的视频提供。（我希望这一点有意义）。然后我设置 MPMoviePlayerControllers 视图如下：

```
 - (void)imagePickerController:(UIImagePickerController *)picker
didFinishPickingMediaWithInfo:(NSDictionary *)info
{
    //[self.image setImage:[info objectForKey:UIImagePickerControllerMediaURL]];
    videoURL = [info objectForKey:UIImagePickerControllerMediaURL];
    [parentView dismissModalViewControllerAnimated:NO];

    VideoEngine *ve = [[VideoEngine alloc] initWithCallbackName:@"movieFinishedPlaying"];
    [ve loadMovieURL:videoURL];
    [ve.player.view setFrame:CGRectMake((0 + self.frame.size.width * 0.2), self.frame.size.height * 0.3, self.frame.size.width * 0.6, self.frame.size.width * 0.4)];

    CGRect frame = ve.player.view.frame;

    self.video = ve;
    [self addSubview:self.video.player.view];
    [ve release];
} 
```

首先，我想指出，我知道高度值是使用宽度设置的，但这是为了保持它更宽，然后它就很高（目前不关心这样做的方式）。如您所见，我有一个指向视图框架的指针，因此我可以检查值（它不会让我直接使用 po 访问）。以下是值的屏幕截图：

![帧输出](../Images/8cb3ae7fd30296326e6e9fa0c93e02fc.png)

正如你所看到的（差不多），框架是 192 宽 x 128 高，这很好。但是，当我在手机中查看它时，它看起来如下：

![手机截图](../Images/a0b7e0c64f99cd64c610bf11b8a8c7ef.png)

手机已禁用所有旋转，因此它不应该因为旋转而尝试以奇怪的方式调整大小。我对此感到非常困惑，所以如果有人有任何想法，我将非常感激。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-08-20T15:21:01.507

好的，事实证明 MPMovieScaling 模式设置为适合方面，我不知道我是如何忽略这一点的，但如果人们遇到同样的问题，你只需要在某个地方设置它：

```
[mpMoviePlayerControllerInstance setScalingMode:MPMovieScalingModeFill]; 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-09-01T05:13:13.583

将 MPMoviePlayerController 更改为您的电影播放器​​名称

```
[yourplayername setScalingMode:MPMovieScalingModeFill]; 
```

//它适合视图的全帧

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-20T11:59:29.463

我认为这将是一个更好的选择，因为它可以避免压缩视频：

```
[self.moviePlayer setScalingMode:MPMovieScalingModeAspectFill]; 
```

# python - Python - 替换列中的随机项目

> ID：12035394
> 
> 赞同：1
> 
> 时间：2012-08-20T09:41:48.650
> 
> 标签：python, arrays, random

如果这是一个基本问题，我对 python 有点陌生，很抱歉。

我有一个类似于此的文件：

```
Zr  1   1   1
Zr  1   1   1
Zr  1   1   1
Zr  1   1   1 
```

重复了好几行。我需要用另一个指定的字符串随机替换第一列中的字符串（为清楚起见进行了编辑），同时保持第 2、3 和 4 列相同。

任何想法如何做到这一点？我知道我应该将第一列输入一个数组，索引每一列，然后随机换出，但我不知道如何继续。

谢谢。

凯瑟琳 :)

编辑：已修复。

感谢您的所有帮助，只需要 random.sample :)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T10:04:37.330

使用它来生成一个随机字符串

```
import os
random_string = os.urandom(string_length) 
```

要逐行遍历文件，请执行

```
with open('file') as fd:
    for line in fd:
        # do stuff 
```

无需关闭文件句柄

习惯使用`split`，在空格上拆分并将结果放入数组中（索引从 0 开始）在 docs.python.org 上阅读更多内容

当你走到那一步时，请用一些代码更新你的问题......祝你好运

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-20T10:05:11.443

我强烈建议阅读 python 入门，解决问题的方式可以分两步完成

1.  从文件中读取项目 -[参考](https://stackoverflow.com/questions/3277503/python-read-file-line-by-line-into-array)

2.  使用 math.random() 更改随机字符串[引用](http://effbot.org/pyfaq/how-do-i-generate-random-numbers-in-python.htm)

通过知道如何做这些点，您可以轻松实现您打算做的事情。

# javascript - html 5元素上的自定义表单验证功能

> ID：12035396
> 
> 赞同：15
> 
> 时间：2012-08-20T09:41:53.457
> 
> 标签：javascript, html, jquery, validation, jquery-events

对于自定义图像选择工具，我想创建基于 html 5 表单验证的表单验证。

例如，我的表单由以下元素组成：

```
<form class="cms-form" action="">
    <table width="800">
        <tr>
            <td width="30%">Name:</td>
            <td><input type="text" name="name" class="cms-input-text" maxlength="127" /></td>
        </tr>
        <tr>
            <td>Image:</td>
            <td><textarea name="icon" class="cms-input-file" data-file-resource="images" data-options="{&quot;min&quot;:1,&quot;max&quot;:3}">/location-to-image.png</textarea></td>
        </tr>
        <tr>
            <td></td>
            <td><input type="submit" value="Next"/></td>
        </tr>
    </table>
</form> 
```

我有一个 Javascript 将 textarea (.cms-input-file) 更改为一些 html 以添加图像并隐藏原始 textarea。它看起来像这样：

```
<textarea name="icon" class="cms-input-file" data-file-resource="images" data-options="{&quot;min&quot;:1,&quot;max&quot;:3}" style="display: none;">/location-to-image.png</textarea>
<ul class="cms-input-file-list">
    <li class="cms-input-file-item" data-image="/location-to-image.png">
        <img src="/location-to-thumb.png" alt="" class="cms-input-file-item-thumbnail"/>
        <span class="cms-input-file-item-title">location to image</span>
    </li>
    <li class="cms-input-file-add">Add</li>
</ul> 
```

由于我已经使用 html5 表单验证分配了现有表单，因此我想使用支持 html5 的浏览器中的默认表单验证来验证此元素，但使用希望存在的事件。

我正在寻找这样的东西：

```
$('.cms-input-file').on('customValidateFunction', function () {
    var options = $(this).data('options');

    if($(this).find('> li.cms-input-file-item').length < options.min)
    {
        return [false, 'Add more images.'];
    }

    if($(this).find('> li.cms-input-file-item').length > options.max)
    {
        return [false, 'Remove some images.'];
    }

    return true;
}); 
```

有谁知道使用默认的 html 5 事件是否可以实现这样的事情，或者我将如何将此**事件**添加到提交事件中？实际触发默认浏览器验证外观。

**- 编辑 -**

到目前为止，我已经尝试使用隐藏原始元素的 div 元素来获得此结果。但是现在我需要根据我的选项向元素添加一个模式来匹配。这可能吗？

当前进度：http: [//jsfiddle.net/jeffreydev/YyEVu/](http://jsfiddle.net/jeffreydev/YyEVu/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-28T01:30:45.430

如果我正确理解您的需求，我认为您可以使用任何输入元素的[模式属性来实现您想要做的事情。](http://www.w3.org/TR/2011/WD-html5-20110525/common-input-element-attributes.html#attr-input-pattern)

我[在 jsfiddle 中创建了一个非常简单的表单来](http://jsfiddle.net/jbalsas/dyAtJ/)说明这一点。

这个想法是，在添加或删除图像时，您可以使用模型中的任何数据来更新输入的值。该示例只为每个图标添加一个字母*f 。*然后，您可以创建一个正则表达式来匹配预期的有效结果。在示例中，*pattern="f{1,3}"*表示要有效，内容可以是“f”、“ff”或“fff”，但不能是其他任何内容，这意味着它只会接受来自一个要发送的三个文件。

您将只使用默认的 html5 表单验证，但您可能需要进行一些调整才能使其正常工作。

但是，如果您尝试这种方式，您应该记住以下几点：

1.  如[规范](http://www.w3.org/TR/2011/WD-html5-20110525/common-input-element-attributes.html#attr-input-pattern)中所述，该模式被*编译为 JavaScript 正则表达式，禁用了 global、ignoreCase 和 multiline 标志*
2.  设置输入的 disabled 属性，以便用户无法更改它会将其从表单中取出，因此不会被验证
3.  当验证失败并且浏览器试图获得对元素的关注时，将某些样式作为 *display:none" 应用到输入元素可能会导致错误。

我希望这对你有帮助

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-23T08:21:10.647

您可以在 上安装`submit`处理程序`<form>`，并从那里分派自定义事件。

这看起来像这样：

```
$('form.cms-form').on('submit', function(evt) {
    var frm = $(this);
    var allElements = $(this.elements);
    $('#errors').empty();   

    var errors = [];
    var arg = {
        reportValidationError : function( msg ) {
            errors.push(msg);
        },
        form : this
    };
    console.log("all elements: ", allElements);
    allElements.trigger('customValidate', [ arg ]);

    if( errors.length !== 0 ) {
        showValidationErrors(errors);
        return false;
    }
    return true;
}); 
```

然后，您可以“挂钩”`customValidate`事件，并安装自己的逻辑......

```
$('textarea[name=icon]').on('customValidate', function(evt, reporter) {
    var options = $(this).data('options');

    // ... your validation here ...

    // for example:
    var txt = $(this).val();
    if( txt.length < options.min || txt.length > options.max ) {
        reporter.reportValidationError('error: "icon" min/max exceeded!');
    }
}) 
```

[这是 jsFiddle 的一个示例](http://jsfiddle.net/CphL9/1/)。

* * *

**编辑**

您可以设置错误报告的样式，并调整代码，使其外观和行为符合您的要求。 [这是一个例子](http://jsfiddle.net/coltrane/6ZGJu/2/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T09:02:35.717

Mike Alsup 是一个非常好的验证表单的 jquery 插件。你会在这里找到它：http: [//jquery.malsup.com/form/](http://jquery.malsup.com/form/)

它已记录在案，与 ajax 兼容。

它可以对表单中的一个字段或所有字段进行序列化，因此对于您可能需要使用表单处理字段验证和错误逻辑的问题，这是一个很大的优势。

您可以添加同作者的blockUI插件来提升用户体验，并且在启用javascript时不必管理表单的双重提交。 [http://jquery.malsup.com/block/](http://jquery.malsup.com/block/)

# c# - 在 C# 中，如何查找 windows 是否重新启动？

> ID：12035397
> 
> 赞同：3
> 
> 时间：2012-08-20T09:41:56.777
> 
> 标签：c#, .net

> **可能重复：**
> [如何检测 Windows 是否正在关闭或重新启动](https://stackoverflow.com/questions/981306/how-to-detect-whether-windows-is-shutting-down-or-restarting)

在 c# 中，我只能使用下面的代码找到 Windows 是否正在注销或关闭。

```
SystemEvents.SessionEnding += new SessionEndingEventHandler(SystemEvents_SessionEnding);

static void SystemEvents_SessionEnding(object sender, SessionEndingEventArgs e)
    {

        switch (e.Reason)
        {
            case SessionEndReasons.Logoff:
                break;
            case SessionEndReasons.SystemShutdown:
                break;
            default:
                break;
        }
    } 
```

但我想知道如何在 C# 中捕获 Windows 重新启动事件。？

# javascript - 如何从 Chrome 中的文件输入中删除“未选择文件”工具提示？

> ID：12035400
> 
> 赞同：94
> 
> 时间：2012-08-20T09:42:05.310
> 
> 标签：javascript, jquery, html, css, google-chrome

我想从 Google Chrome 中的文件输入中删除“未选择文件”工具提示（我看到 Firefox 中没有显示任何工具提示）。

请注意，我说的不是输入字段中的文本，而是当您将鼠标移到输入上时出现的工具提示。

我试过这个没有运气：

```
$('#myFileInput').attr('title', ''); 
```

* * *

## 回答 #1

> 赞同：72
> 
> 时间：2015-05-27T10:26:16.437

可以使用 title 属性编辑默认工具提示

```
<input type='file' title="your text" /> 
```

但是，如果您尝试删除此工具提示

```
<input type='file' title=""/> 
```

这行不通。这是我的小技巧，尝试使用空格的标题。它会起作用的。:)

```
<input type='file' title=" "/> 
```

* * *

## 回答 #2

> 赞同：66
> 
> 时间：2013-01-30T09:47:27.473

对我来说，我只是希望文本不可见，并且仍然使用本机浏览器按钮。

```
input[type='file'] {
  color: transparent;
} 
```

我喜欢 undefined 的所有建议，但我有一个不同的用例，希望这对处于相同情况的人有所帮助。

* * *

## 回答 #3

> 赞同：65
> 
> 时间：2012-08-20T09:52:04.417

这是*webkit*浏览器的原生部分，您无法删除它。您应该考虑一个 hacky 解决方案，例如*覆盖*或*隐藏*文件输入。

一个*hacky*的解决方案：

```
input[type='file'] {
  opacity:0    
} 
```

```
<div>
    <input type='file'/>
    <span id='val'></span>
    <span id='button'>Select File</span>
</div> 
```

```
$('#button').click(function(){
   $("input[type='file']").trigger('click');
})

$("input[type='file']").change(function(){
   $('#val').text(this.value.replace(/C:\\fakepath\\/i, ''))
}) 
```

**[小提琴](http://jsfiddle.net/a8qN2/)**

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2016-06-13T18:51:35.453

很简单，忘记针对 input["type"] 的 CSS，它对我不起作用。我不知道为什么。我在我的 HTML 标签中找到了我的解决方案

```
<input type="file" style="color:transparent; width:70px;"/> 
```

问题结束

* * *

## 回答 #5

> 赞同：12
> 
> 时间：2018-03-09T14:37:24.320

我找到了一个非常简单的解决方案，只需在 title 属性中设置一个空字符串即可。

```
<input type="file" value="" title=" " /> 
```

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2014-06-06T20:44:40.540

您可以禁用工具提示，在 Chrome 等 webkit 浏览器上设置带空格的标题，在 Firefox 或 IE 上设置空字符串（在 Chrome 35、FF 29、IE 11、safari mobile 上测试）

```
$('input[type="file"]').attr('title', window.webkitURL ? ' ' : ''); 
```

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2015-07-27T20:44:49.383

这里的所有答案都完全过于复杂，或者完全错误。

html:

```
<div>
    <input type="file" />
    <button>Select File</button>
</div> 
```

CSS：

```
input {
    display: none;
} 
```

javascript:

```
$('button').on('click', function(){
   $('input').trigger('click'); 
}); 
```

[http://jsfiddle.net/odfe34n8/](http://jsfiddle.net/odfe34n8/)

我以最简单的方式创建了这个小提琴。单击“选择文件”按钮将弹出文件选择菜单。然后，您可以根据需要对按钮进行样式化。基本上，您需要做的就是隐藏文件输入，并在您单击另一个按钮时触发对它的合成单击。我在 IE 9、FF 和 Chrome 上对此进行了现场测试，它们都运行良好。

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2016-01-15T11:30:34.297

这对我有用（至少在 Chrome 和 Firefox 中）：

```
<input type="file" accept="image/*" title="&nbsp;"/> 
```

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2013-01-07T16:41:28.027

这是一个棘手的问题。我找不到选择“未选择文件”元素的方法，所以我使用 :after 伪选择器创建了一个掩码。

我的解决方案还需要使用以下伪选择器来设置按钮样式：

```
::-webkit-file-upload-button 
```

试试这个：http: [//jsfiddle.net/J8Wfx/1/](http://jsfiddle.net/J8Wfx/1/)

仅供参考：这仅适用于 webkit 浏览器。

PS，如果有人知道如何在 webkit 检查器中查看上面的 webkit 伪选择器，请告诉我

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2015-04-30T13:02:42.417

跨所有浏览器且简单。这是为我做的

```
$(function () {
     $('input[type="file"]').change(function () {
          if ($(this).val() != "") {
                 $(this).css('color', '#333');
          }else{
                 $(this).css('color', 'transparent');
          }
     });
})
```

```
input[type="file"]{
    color: transparent;
}
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>

<input type="file" name="app_cvupload" class="fullwidth input rqd">
```

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2012-08-20T10:02:12.183

您将需要大量自定义控件才能实现此目的。

请遵循以下指南：[http ://www.quirksmode.org/dom/inputfile.html](http://www.quirksmode.org/dom/inputfile.html)

* * *

## 回答 #12

> 赞同：3
> 
> 时间：2017-10-25T14:52:41.613

包裹并使其隐形。在 Chrome、Safari && FF 中工作。

```
label { 
  padding: 5px;
  background: silver;
}
label > input[type=file] {
    display: none;
}
```

```
<label>
  <input type="file">
  select file
</label>
```

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2016-04-14T19:07:27.560

最好避免使用不必要的 javascript。您可以利用标签标签来扩展输入的点击目标，如下所示：

```
<label>
  <input type="file" style="display: none;">
  <a>Open</a>
</label> 
```

即使输入被隐藏，该链接仍然可以作为它的点击目标，您可以根据需要设置它的样式。

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2018-01-23T06:03:24.770

即使您将不透明度设置为零，工具提示也会出现。试穿`visibility:hidden`元素。它对我有用。

* * *

## 回答 #15

> 赞同：2
> 
> 时间：2018-08-04T07:28:30.467

这个对我有用！

```
input[type="file"]{
  font-size: 0px;
} 
```

然后，您可以使用不同类型的样式，例如`width`,`height`或其他属性来创建您自己的输入文件。

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2012-08-20T10:04:27.580

试一试`-webkit-appearance:`。总之值得一试。

[http://css-infos.net/property/-webkit-appearance](http://css-infos.net/property/-webkit-appearance)

希望有帮助:)

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2012-08-20T10:05:24.427

直接你不能对**input[type=file] 进行太多修改。**

使输入类型文件 opacity:0 并尝试使用自定义 CSS 在其上放置一个相对元素 [div/span/button]

试试这个 [http://jsfiddle.net/gajjuthechamp/pvyVZ/8/](http://jsfiddle.net/gajjuthechamp/pvyVZ/8/)

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2018-09-04T11:20:42.827

惊讶地看到没有人提到`event.preventDefault()`

```
$("input[type=file]").mouseover(function(event) {
    event.preventDefault();
    // This will disable the default behavior of browser
 }); 
```

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2012-08-20T10:09:11.700

您可以为 yor 元素设置一个宽度，该宽度将仅显示按钮并隐藏“未选择文件”。

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2014-05-12T01:28:35.527

我为此寻找好的答案......我发现了这个：

首先删除“未选择文件”

```
input[type="file"]{
font-size: 0px;
} 
```

然后使用 按钮`-webkit-file-upload-button`，这样：

```
input[type="file"]::-webkit-file-input-button{
font-size: 16px; /*normal size*/
} 
```

希望这是您正在寻找的，它对我有用。

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2014-09-09T15:54:29.170

结合上面的一些建议，使用 jQuery，这就是我所做的：

```
input[type='file'].unused {
  color: transparent;
} 
```

和：

```
$(function() {
  $("input[type='file'].unused").click( function() {$(this).removeClass('unused')});
}; 
```

并将类“未使用”放在您的文件输入中。这很简单，而且效果很好。

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2015-08-30T14:50:19.867

对我来说，最好的解决方案是将输入 [type="file"] 包装在一个包装器中，并添加一些 jquery 代码：

```
$(function(){
	function readURL(input){
        if (input.files && input.files[0]){
            var reader = new FileReader();

            reader.onload = function (e){
                $('#uploadImage').attr('src', e.target.result);
            }
            reader.readAsDataURL(input.files[0]);
        }
    }
    $("#image").change(function(){
        readURL(this);
    });
});
```

```
#image{
	position: absolute;
	top: 0;
	left: 0;
	opacity: 0;
	width: 75px;
	height: 35px;
}
#uploadImage{
	position: relative;
	top: 30px;
	left: 70px;
}
.button{
	position: relative;
	width: 75px;
	height: 35px;
	border: 1px solid #000;
	border-radius: 5px;
	font-size: 1.5em;
	text-align: center;
	line-height: 34px;
}
```

```
<form action="#" method="post" id="form" >
	<div class="button">
		Upload<input type="file" id="image" />
     </div>
     <img id="uploadImage" src="#" alt="your image" width="350" height="300" />
 </form>
```

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2017-11-29T08:01:15.207

我想出了一个 hacky 解决方案，它完全删除了“未选择文件”以及在该文本之后添加的额外空间（在 Chrome 中我得到类似：“未选择文件”）。

这完全打乱了我的页面对齐方式，所以我真的努力寻找解决方案。在输入标签的样式属性中，将“width”设置为按钮的宽度将消除尾随文本和空格。由于按钮的宽度在所有浏览器中都不相同（例如，在 Firefox 中稍小），因此您还需要将样式的颜色设置为与页面背景相同的颜色（否则会出现“流浪”否”可能会显示出来）。我的输入文件标签如下所示：

```
<input style="float:left; **width:88px;** **color:#000000;**" type="file" id="fileInput" onclick="fileOpen()"> 
```

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2020-08-26T17:37:45.470

我知道这有点小技巧，但我只需要在样式表中将颜色设置为透明 - 内联看起来像这样 style="color:transparent;"。

* * *

## 回答 #25

> 赞同：0
> 
> 时间：2021-08-07T21:48:14.433

隐藏工具提示的最佳选择是结合以下属性：

1.  在输入上：（`color:white;`如果背景是白色以使文本颜色失明，如果是另一种颜色，则使用该颜色）。

2.  如果输入旁边有任何其他元素，请`position: absolute;`将该元素放在工具提示上方 *（小心让按钮保持可见，仅隐藏工具提示）

* * *

## 回答 #26

> 赞同：0
> 
> 时间：2021-11-13T23:41:40.747

对于 3 top 不起作用的任何人：

创建您的输入元素：

```
<input type='file' name='file' id='file' /> 
```

通过它的 Id 将输入元素的样式设置为它看起来不存在的位置：

```
#file{ color: #ffffff; width: 0px; } 
```

然后在原始输入前面创建一个新按钮，使用 onclick 函数运行单击原始输入的 javascript：

```
<button onclick='clicker()'>BROWSE</button><input type='file' name='file' id='file' /> 
// can see the new button but not the original input: 
```

Javascript：

```
function clicker(){ document.getElementById('file').click(); } 
```

结果：

```
function clicker(){
document.getElementById('file').click();
}
```

```
#file{
  color: #ffffff;
  width: 0px;
}
```

```
<html>
<head>
</head>
<body>
FILE: <button onclick='clicker()'>BROWSE</button><input type='file' id='file'/>
<br>

</body>
</html>
```

# c - getaddrinfo() 返回非零值时是否分配了 struct addrinfo **res？

> ID：12035407
> 
> 赞同：7
> 
> 时间：2012-08-20T09:42:37.883
> 
> 标签：c, getaddrinfo

我在嵌入式应用程序中遇到了一些内存泄漏问题，在查看代码时，我发现当 getaddrinfo() 返回非零时我没有 freeaddrinfo()：

```
s = getaddrinfo(hostname, port, &hints, &result);
if (s != 0) {
  log_error();
} else {
  // do stuff
  freeaddrinfo(result);
} 
```

这会导致内存泄漏吗？我试图查看手册页，但它没有明确说明。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-20T09:48:51.977

规范并没有说`result`如果失败则不分配，因此似乎符合要求的实现可以这样做。

为什么不无条件释放呢？

```
result = 0;
s = getaddrinfo(hostname, port, &hints, &result);
if (s) {
    // log error
} else {
    // success
}
if (result) {
    freeaddrinfo(result);
} 
```

理想情况下，您可以在`freeaddrinfo(result)`不检查是否`result`为 NULL 的情况下调用，但尽管标准暗示没关系，但我不会指望它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-31T09:39:19.983

虽然标准确实对此有点模糊，但唯一有意义的解释是将错误视为结果的*替代方案*。这就是其他 libc 函数的工作方式，这就是`getaddrinfo()`在示例中甚至在标准中的使用方式。

见： http: [//pubs.opengroup.org/onlinepubs/9699919799/functions/freeaddrinfo.html](http://pubs.opengroup.org/onlinepubs/9699919799/functions/freeaddrinfo.html)

我认为没有必要发明方法来解决这个问题，除非你正在处理一个已知的损坏的实现。POSIX 函数不要求您将用于输出的指针归零，除非另有说明。

从上面的链接：

> 在成功返回 getaddrinfo() 后， res 指向的位置应引用 addrinfo 结构的链接列表，每个结构都应指定一个套接字地址和用于创建使用该套接字地址的套接字的信息。

很明显，该标准是在假设在其他情况下`res`不会触及变量的情况下编写的。

# wso2 - 创建CApp项目时root-artifact.xml不会自动生成（wso2 carbon studio v2.0.1）

> ID：12035408
> 
> 赞同：2
> 
> 时间：2012-08-20T09:42:41.893
> 
> 标签：wso2, wso2carbon, wso2developerstudio

我安装了 wso2 carbon studio 2.0.1（参考：[http](http://wso2.org/project/developer-studio/2.0.1/docs/install_guide.html) : //wso2.org/project/developer-studio/2.0.1/docs/install_guide.html，https: [//wso2.org/jira/browse/TOOLS-739](https://wso2.org/jira/browse/TOOLS-739) )，但创建 CApp 项目时不会自动生成 root-artifact.xml。并且这里已经创建了一个 pom.xml 文件。我可以手动构建一个 root-artifact.xml 吗？

![在此处输入图像描述](../Images/dae35183525ee1fcba2dc68bc8795d3b.png) ![在此处输入图像描述](../Images/d534300e2b0fceab05b667d559ccd890.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T11:07:00.220

WSO2 Developer Studio 2.0.0 及更高版本不再使用 root-artifact.xml 和之前的 C-App 模型。

Dev Studio 2.xx 版本和 1.0.x 版本之间存在根本性的变化，例如删除 root-artifact.xml、引入 pom.xml 和使用 pom.xml 进行元数据管理、新的项目结构等。

所以这不是 Dev Studio 2.0.0 中的错误，而是它的设计方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T11:08:56.143

好吧，wso2 carbon studio v1.0.14 正在运行。这似乎是 v2.0.1 的一个新错误。

# c# - 保存下载文件对话框

> ID：12035410
> 
> 赞同：0
> 
> 时间：2012-08-20T09:42:56.727
> 
> 标签：c#, asp.net, pdf

我使用 iText 创建了一个 PDF 并将其存储在特定位置（在代码中指定）。我想提示一个保存对话框，让用户在他的计算机上选择保存 pdf 的位置。我检查了 iText 教程，但对我没有帮助。

这是生成PDF文件的代码：

```
Document objDoc = new Document();
PdfWriter.GetInstance(objDoc, new FileStream("C:\\HelloWorld.pdf", FileMode.Create));
objDoc.Open();
objDoc.Add(new Paragraph("welcome iText Pdf"));
objDoc.Close(); 
```

我试过这样保存：

```
string FileName ="HelloWorld.pdf";
String FilePath = @"C:\";
HttpResponse response = HttpContext.Current.Response;
response.ClearContent();
response.Clear();
response.ContentType = "application/pdf";
response.AddHeader("Content-Disposition", "attachment; filename=" + FileName + ";");
response.TransmitFile(FilePath + FileName);
response.Flush();
response.End(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T09:46:53.987

我假设您是从网页上执行此操作的，因为您标记了此 ASP.NET。您需要添加 Content-Disposition 标头。有关详细信息，请参阅以下问题：

[强制在 Web 服务器上下载文件 - ASP .NET C#](https://stackoverflow.com/questions/873207/force-download-of-a-file-on-web-server-asp-net-c-sharp)

# php - PHP页面在用户提交后存储表单输入变量

> ID：12035414
> 
> 赞同：0
> 
> 时间：2012-08-20T09:43:18.163
> 
> 标签：php, mysql, html, forms, unset

我不知道还能叫什么标题...我有一个 PHP 页面，它访问某个 MySQL 数据库，从表中提取值，并将它们放在 HTML 表单中（POST 方法 - PHP_SELF）。然后，用户可以查看这些值，根据需要更改它们并提交它们。然后页面获取这些值并更新 MySQL 数据库。一切正常，除了当用户提交并且页面显示新的更新变量时，它仍然显示旧值。在新变量出现之前，用户被强制刷新页面。我认为 PHP 可能没有删除变量，所以我在脚本结束后取消了所有存储的变量，但它仍然无法正常工作。我曾经尝试在脚本开始之前设置一个睡眠计时器，但这也不起作用。我会很感激任何建议。

```
<html>
<body>

<?php

$sql = "SELECT * FROM lease";
$result = mysql_query($sql);

?>

<form id="lease_update" method="post" action="<?php echo htmlentities($PHP_SELF); ?>">
<table>
<tr>
<th>Account</th>
<th>Car Lease</th>
<th>Radio Lease</th>
<th>Misc. Charges</th>
</tr>

<?php
    while($rows = mysql_fetch_array($result)){
 ?>

<tr>
<td><input type="text" name="account[]" value="<?php echo $rows['accnt']; ?>" /></td>
<td><input type="int" name="car_lease[]" value="<?php echo $rows['car']; ?>" /></td>
<td><input type="int" name="radio_lease[]" value="<?php echo $rows['radio']; ?>" />     </td>
<td><input type="int" name="misc_lease[]" value="<?php echo $rows['misc']; ?>" /></td>
<input type="hidden" name="lease_ID[]" value="<?php echo $rows['ID']; ?>" />
</tr>

<?php
    }
?>
</table>
<input type="submit" value="Update" name="lease_update" />

<?php

if(isset($_POST['lease_update'])){

$account = $_POST['account'];
$car_lease = $_POST['car_lease'];
$radio_lease = $_POST['radio_lease'];
$misc_lease = $_POST['misc_lease'];
$lease_ID = $_POST['lease_ID'];

//Get Array Lengths For Each Section
$A = count($lease_ID);

//Update Lease Information
$i = 0;
while($i < $A){
    if(!mysql_query('UPDATE lease SET accnt = "' .$account[$i]. '", car = "' .$car_lease[$i]. '", radio = "' .$radio_lease[$i]. '", misc = "' .$misc_lease[$i]. '"  WHERE ID = ' .$lease_ID[$i]))
        die('Error: ' .mysql_error());
    $i++;
}
unset($_POST);
    unset($rows);
    unset(result);

}
?>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-20T09:45:00.427

在更新数据库之前，您正在显示数据库中的数据。

通常在页面顶部完成所有数据库连接，然后显示结果是一种很好的做法。

在您的代码中（即使用户已提交更新），您查询数据，从数据库中提取并显示它，然后使用用户提交的内容运行更新。

将您的代码更改为此应该可以解决问题（请阅读下面的注释）：

```
<html>
<body>

<?php

if(isset($_POST['lease_update'])){

$account = $_POST['account'];
$car_lease = $_POST['car_lease'];
$radio_lease = $_POST['radio_lease'];
$misc_lease = $_POST['misc_lease'];
$lease_ID = $_POST['lease_ID'];

//Get Array Lengths For Each Section
$A = count($lease_ID);

//Update Lease Information
$i = 0;
while($i < $A){
    if(!mysql_query('UPDATE lease SET accnt = "' .$account[$i]. '", car = "' .$car_lease[$i]. '", radio = "' .$radio_lease[$i]. '", misc = "' .$misc_lease[$i]. '"  WHERE ID = ' .$lease_ID[$i]))
    die('Error: ' .mysql_error());
    $i++;
}
unset($_POST);
    unset($rows);
    unset(result);

}

$sql = "SELECT * FROM lease";
$result = mysql_query($sql);

?>

<form id="lease_update" method="post" action="<?php echo htmlentities($PHP_SELF); ?>">
<table>
<tr>
<th>Account</th>
<th>Car Lease</th>
<th>Radio Lease</th>
<th>Misc. Charges</th>
</tr>

<?php
    while($rows = mysql_fetch_array($result)){
 ?>

<tr>
<td><input type="text" name="account[]" value="<?php echo $rows['accnt']; ?>" /></td>
<td><input type="int" name="car_lease[]" value="<?php echo $rows['car']; ?>" /></td>
<td><input type="int" name="radio_lease[]" value="<?php echo $rows['radio']; ?>" />     </td>
<td><input type="int" name="misc_lease[]" value="<?php echo $rows['misc']; ?>" /></td>
<input type="hidden" name="lease_ID[]" value="<?php echo $rows['ID']; ?>" />
</tr>

<?php
    }
?>
</table>
<input type="submit" value="Update" name="lease_update" />

</body>
</html> 
```

*不好的注意*- 您的代码很容易受到注入攻击。您正在使用未经验证的表单*数据*。这是一个很大的危险信号。其次，您正在使用已弃用的`mysql_*`功能。您的代码应该使用`mysqli_*`函数或者更好的是移至[PDO](http://au.php.net/manual/en/book.pdo.php)。它更安全，您将能够用它做更多事情。

编辑2：用户提交表单后页面正在更新，但您向用户显示的页面在您更新之前正在查询数据库 - 并使用该页面向用户显示页面。

# teamcity - 如何仅在 git master 分支的更改上触发构建？

> ID：12035418
> 
> 赞同：4
> 
> 时间：2012-08-20T09:43:27.413
> 
> 标签：teamcity

需要在 TeamCity 7.1 中配置哪些内容，使其仅在 git 中的主分支发生提交时触发构建？

目前，它在对其他（功能）分支的更改被推送到远程存储库时触发。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-20T13:41:03.753

嗯，好像我们在 GitHub 上附加了一个服务挂钩到 TeamCity，它正在触发这些构建。

关闭 Github 钩子后，立即构建它按预期工作，仅在推送到 master 时构建。

（或者，可以将钩子配置为按分支过滤）

# c# - 如何在运行时获取当前类名？

> ID：12035426
> 
> 赞同：16
> 
> 时间：2012-08-20T09:43:48.697
> 
> 标签：c#, class, reflection, abstract

我正在尝试将当前类名转换为字符串。

例如：

```
public class Marker : Mark
{
    string currentclass = ???;
}

public abstract class MiniMarker : Mark
{
} 
```

我想从`Marker`类中获取字符串，所以我不必将它放在我从中创建的每个抽象类中。

我希望字符串是`MiniMarker`，或者抽象类的名称是什么。

我试过`MethodBase.GetCurrentMethod().DeclaringType`了，但没有用。

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2012-08-20T09:49:33.283

```
 this.GetType().Name 
```

应该返回一个类名

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-20T09:45:35.837

这应该这样做：

```
this.GetType().ToString() 
```

# css - HTML 中心标签的 DIV 样式是什么？

> ID：12035430
> 
> 赞同：8
> 
> 时间：2012-08-18T14:23:36.793
> 
> 标签：css, html

HTML 中心标签的 DIV 样式是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-18T14:28:03.497

的HTML：

```
<div id="something">
Content goes here.
</div> 
```

和CSS：

```
#something
{
  width: 850px;
  margin-left: auto;
  margin-right: auto;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-18T21:17:46.737

没有直接的等价物。`<center>`标签不仅居中其包含的文本，还居中任何块元素。您可以分别模仿其中的每一个，但不能同时模仿。

为了使任何内联/内联块内容（文本、图像、视频等）居中，您可以将以下内容应用于 div 或其他块元素：

```
.center {
  text-align: center;
} 
```

要使块元素本身居中，请使用以下命令：

```
.blockcenter {
  width: 200px;
  margin: 0 auto;
} 
```

显然替换`200px`为所需的块宽度，以及`0`您喜欢的顶部/底部边距的任何值。另请注意，您通常应该使用描述元素的类名，而不是其表示。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-18T22:32:15.083

你只需要用来`margin: auto;`居中 a `div`。从技术上讲，它是内部/嵌入式还是外部都无关紧要。

然而，正如下面的评论指出的那样，这**不适**用于内联元素。

如上所述，`text-align: center;`将用于在元素内居中文本。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-06-10T22:31:03.483

`margin: 0 auto;`如果您还添加`width`说明符，则只会在 CSS 中居中。没有`width`它是行不通的——它将被放在左边。但这意味着它不等同于`<center>`标签，您不需要为其指定任何宽度。如果您知道*某物*的宽度，并且不得不费心在 CSS 表中指定它，页面上的每个对象（具有不同的宽度）一行，那么您也可以只给左边距。（软件：HTML5、linux、Firefox 31）

CSS 无法居中。（演示语言？垃圾！）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-18T21:24:48.650

要在您的页面上居中 div 标签，您将使用此代码。如果您希望文本在内容 div 中居中，则添加`text-align:center;`到 #content ID 样式

```
​#wrapper{
    background:#444;
}
#content{
    width:960px;
    margin:0 auto;
    background:whitesmoke;
}​

​&lt;div id="wrapper">
<div id="content">test</div>
</div>​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-10-03T21:57:54.007

如果你有：

```
 {
        position:absolute;
    } 
```

您需要在边距样式生效之前将其删除。

# twitter - 在 bb10 级联上使用 twitcurl 上传照片

> ID：12035438
> 
> 赞同：1
> 
> 时间：2012-08-20T09:44:46.573
> 
> 标签：twitter, cascade

我想使用 bb10 级联应用程序在 Twitter 中添加上传照片功能。从论坛我知道 twitcurl 用于在级联上集成 twitter。我检查了**twitcurl**页面，但没有找到任何关于上传照片的信息（网址：[http](http://code.google.com/p/twitcurl/) ://code.google.com/p/twitcurl/ ）。我想知道我们如何使用**twitcurl**上传照片。

而且我还想知道我是否想使用 bb10 级联在 facebook 上上传照片，然后我必须使用哪个 api 或 sdk。

# java - 为什么 1.-5 = -4.0

> ID：12035442
> 
> 赞同：1
> 
> 时间：2012-08-20T09:45:10.953
> 
> 标签：java

```
public static void main(String[] args){
        System.out.println(1.-5); // -4.0

} 
```

谁能解释为什么我得到上述结果，在此先感谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-20T09:46:18.247

这是因为它相当于`1.0-5.0`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-20T09:49:52.343

这是由于隐式类型转换（[http://en.wikipedia.org/wiki/Type_conversion](http://en.wikipedia.org/wiki/Type_conversion)），其中 5 由于 1 的存在而提升为 5.0。（相当于 1.0，双精度数）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-20T09:47:39.520

`System.out.println(1.-5);`相当于`System.out.println(1.0-5.0);`

所以结果是`-4.0`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-20T09:46:30.817

从 1 中减去 5 得到结果 -4。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-20T09:49:38.073

> 您的 System.out.println() 将计算结果视为 1.00 - 5.0（一个点将参数的类型表示为“double”）。所以结果是-4.0，因此它打印相同。

# ruby - 检查 params[:x][:y] 是否存在的最短方法

> ID：12035444
> 
> 赞同：3
> 
> 时间：2012-08-20T09:45:16.743
> 
> 标签：ruby, ruby-on-rails-3

我正在尝试检查是否`params[:search][:city]`存在，但这就是我得到的：

```
do_magic if params[:search].try(:city) # undefined method `city' for {"city"=>["3"]}:ActiveSupport::HashWithIndifferentAccess 
```

如果密钥存在，则会显示此错误，但当密钥不存在时，它会出人意料地工作。

请记住，params 哈希中可能根本不存在这`:search`两者`:city`。

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-20T09:46:36.507

`try`正在尝试调用具有给定名称的方法。您需要一个`[]`带有参数的方法。

```
do_magic if params[:search].try(:[], :city) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-05T10:00:40.813

**塞尔吉奥的**解决方案不考虑情况，什么时候`:params[:search]`是`String`. 如果是这样，ruby 会产生错误：

```
can't convert Symbol into Integer 
```

因此，涵盖所有情况的正确解决方案是检查`params[:search]`是 a`Hash`然后检查`:city`密钥。

```
do_magic if params[:search].is_a?(Hash) && params[:search][:city] 
```

# javascript - 在内容脚本和主附加脚本之间传递 RegExp 对象

> ID：12035446
> 
> 赞同：0
> 
> 时间：2012-08-20T09:45:23.283
> 
> 标签：javascript, firefox-addon, firefox-addon-sdk

我遇到了一个问题，我`RegExp`在内容脚本中创建了一个对象，然后使用`self.port.emit()`. 一路走来，它似乎失去了它作为 RegExp 的身份以及它的 toString 能力。以下在主脚本中返回 false，但在内容脚本中返回 true：

```
Object.prototype.toString.call(regexp) == '[object RegExp]';
regexp instanceof RegExp; 
```

有趣的是，对于以相同方式传递的数组，以下是正确的：

```
Object.prototype.toString.call(array) == '[object Array]'; 
```

我错过了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T11:15:15.197

如果您只是发送正则表达式模式而不是整个 rexexp 对象呢？例如`encodeURIComponent(regexp.source);`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T15:08:29.757

当您发送消息时，附加 SDK 不会传递对象，仅传递字符串 - 它本质上在一侧调用[JSON.stringify()](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/JSON/stringify)，然后在另一侧调用[JSON.parse()](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/JSON/parse)。结果很容易预测：

```
console.log(JSON.stringify(new RegExp())); 
```

这给你`"{}"`。换句话说，`JSON.stringify()`将“自定义”对象视为没有任何属性的普通对象，对象原型等将被忽略。您在主代码中得到的是一个普通对象，就像您调用`new Object()`.

如果您需要将正则表达式传递给您的主代码 - send `regexp.source`，请在另一端创建一个实际的正则表达式。发送实际对象是不可能的。

# java - 如何计算java中对象列表的变量？

> ID：12035450
> 
> 赞同：1
> 
> 时间：2012-08-20T09:45:36.030
> 
> 标签：java, list, map

我有一个对象列表，`List<Human> humanList;` 其中人类对象由 5 个变量组成，分别是名字、姓氏、颜色、长度、性别。

**我如何查看变量（名字）在列表中出现/存在多少次？**

```
 List<Human> humanList = getHumanList();
    for(Human human :humanList){

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T09:51:03.640

假设这里`firstname`是 type `String`，如果不是 - 根据需要更改它。

创建一个[`Map<String,Integer>`](http://docs.oracle.com/javase/6/docs/api/java/util/Map.html)（让它成为`map`）将用作[直方图](http://en.wikipedia.org/wiki/Histogram)。
迭代列表，并为每个人：

```
Integer temp = map.get(human.firstName); //search for the current number of occurances
if (temp == null) map.put(human.firstName, 1); //first occurance of this firstname
else map.put(human.firstName,temp+1); //not first occurance, modify the map. 
```

完成后，`map`将每个`firstName`作为键，并将其出现的次数作为匹配值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-20T09:56:43.153

您可以使用 guava 多集计数方法[http://code.google.com/p/guava-libraries/wiki/NewCollectionTypesExplained](http://code.google.com/p/guava-libraries/wiki/NewCollectionTypesExplained)。

```
Multiset<Human> set = HashMultiset.create();
        set.count(Human.firstName); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-20T09:51:07.977

您需要遍历列表计数出现`O(N)`。
如果您经常需要，一个更好的选择是在您从列表中添加/删除时增加一个计数器并使用它而不是遍历

# powershell - 在powershell脚本中，测试是否安装了“psexec”

> ID：12035453
> 
> 赞同：1
> 
> 时间：2012-08-20T09:45:43.247
> 
> 标签：powershell

我正在编写一个许多人都会使用的 powershell 脚本。它使用名为“psexec”的 PSTools 可执行文件。

如何在脚本开头进行测试以查看用户是否安装了 psexec，如果没有安装则抛出错误？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-20T09:49:11.037

您可以执行以下操作：

```
$psexec = get-command psexec
if($psexec){
    #continue
} 
```

`Get-Command`如果命令不存在将抛出异常。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-20T09:54:16.203

```
$psExec = @(Get-Command psexec -ErrorAction SilentlyContinue)
$psExecExists = $psExec.Length -gt 0 
```

`ErrorAction`and 数组构造函数 ( )`@(...)`表示未找到`$psExec`空数组。`psexec`这避免了异常并使检查存在变得非常容易，

# java - BufferReader 意外行为

> ID：12035477
> 
> 赞同：1
> 
> 时间：2012-08-20T09:47:30.030
> 
> 标签：java, sockets, bufferedreader, serversocket, printwriter

我正在尝试使用线程运行方法从套接字读取数据：

```
@Override
public void run() {
    while(true){
        try{
            String o = "";
            socketServer = new ServerSocket(port);
            System.out.println("Waiting for connection on port "+port+".");
            Socket socket = new Socket();
            socket = socketServer.accept();
            System.out.println("Connection got.");
            BufferedReader input = new BufferedReader(new InputStreamReader(socket.getInputStream()));
            int c;
            while(( c = input.read()) != -1)
                o += (char)c;
            PrintWriter output = new PrintWriter(socket.getOutputStream());
            output.println("ok");
            output.flush();
            output.close();
            input.close();
            socket.close();
            socketServer.close();
            textFieldMessage.setText("Сообщение от "+socket.getInetAddress().getCanonicalHostName()+":\n"+o);
        }catch(Exception e){
            e.printStackTrace();
            System.exit(-1);
        }

    }
} 
```

但是它卡在了while循环上。调试器告诉最后没有 -1 值。这里有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T09:52:47.593

因为您正在从 Socket 读取数据，所以除非套接字或流已关闭，否则您永远不会到达流的末尾。所以while循环将阻塞，`input.read()`因为在客户端关闭流/套接字之前它不会返回-1。

不太确定您从套接字读取的是什么，但您可以尝试使用 BufferedReader 的`readLine()`方法。您可以提前知道需要阅读多少行，或者以空行结束阅读（如 HTTP）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T09:54:53.537

> InputStream 的 read() 方法阻塞，直到数据可用。

只有在检测到流结束时它才能返回-1。（虽然它不应该是套接字的情况）所以如果数据不可用，while循环将阻塞，即您的读取调用将等待数据被读取.

笔记 ：

但如果值为 -1，则您的程序应该已经退出。那你在读什么？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-20T10:07:59.713

对等方没有关闭套接字，因此您永远不会得到-1，因此您在`read()`收到最后一个字符后阻塞了调用。你的策略有缺陷。您正在阅读 EOS，然后期望能够写回复。除非对等端关闭他的套接字以进行输出然后读取，否则这永远不会起作用。您需要正确定义您的应用程序协议。目前，您期望对等方执行写入/关闭/读取。没有意义。

# eclipse - VeriSign 证书上的 Eclipse 信任证书窗口

> ID：12035479
> 
> 赞同：2
> 
> 时间：2012-08-20T09:47:32.993
> 
> 标签：eclipse, certificate, verisign

我正在开发基于 Eclipse 的产品，目前在其上安装插件时遇到问题。尽管证书由 VeriSign 颁发（并且插件在导出时使用证书正确签名），但在安装“您信任这些证书吗？”时 窗口仍然弹出。

现在，问题是，这是预期的行为吗？我希望一旦我们使用了受信任的 CA，我们就不必与面临这种对话的用户打交道。如果没有，关于我应该从哪里开始解决问题的任何提示？

[您可以在此处](http://i.stack.imgur.com/mluIg.png)找到信任证书窗口的图像，并在[此处](http://i.stack.imgur.com/N4kI1.png)找到证书的详细信息

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T14:31:09.483

简短回答：您的证书在主题中缺少电子邮件字段。

当我们从个人开发者证书转向使用软件供应商证书时，我们遇到了同样的问题。我们的证书之间的唯一区别是个人开发者证书在主题中有一个电子邮件地址（名为“E”的字段），而新软件供应商证书没有。[GlobalSign](https://www.globalsign.com/)允许您重新颁发证书，因此我们重新颁发了我们的软件供应商证书，并在主题字段中使用了通用电子邮件地址。这解决了 Eclipse 问题，客户不再看到“您信任这些证书吗？” 窗户。

顺便说一句，我们的证书没有定义组织单位，这不会导致 Eclipse 出现问题。

# html - 将 itemprop="name" 片段添加到图像的标题

> ID：12035482
> 
> 赞同：1
> 
> 时间：2012-08-20T09:47:51.623
> 
> 标签：html, web, microdata, rich-snippets

我的网站中有一个用户个人资料图像，我想将其标记为“图像”和“人”项目类型的“名称”。当用户将鼠标悬停在图像上时会出现名称，所以我考虑从图像的“标题”属性中提取它。可以这样做吗？如果没有，这种情况的正确解决方案是什么？

非常感谢，

盖瓦·塔尔。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T10:40:34.883

不，你不能那样做。元素的 itemprop 的值`img`固定为`src`属性的解析绝对 url。没有覆盖它的机制。

相反，将 包装`img`在一个[`data`元素](http://www.whatwg.org/specs/web-apps/current-work/multipage/text-level-semantics.html#the-data-element)中，将名称分配给它的`value`属性，并将`itemprop="name"`属性也添加到`data`元素中。

# asp.net - “附加到进程”时找不到 w3p3.exe

> ID：12035485
> 
> 赞同：2
> 
> 时间：2012-08-20T09:48:05.633
> 
> 标签：asp.net, visual-studio-2010

有时我尝试使用 VS2010 进行调试，但是当我尝试附加到 w3p3.exe 时没有找到 aspnet 工作进程。如果我重新启动 VS2010 它又回来了。

在不重新启动VS的情况下有任何解决方案吗？谢谢你 ！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T09:50:58.237

工作进程可能已退出 - 您需要浏览到该站点以重新启动工作进程。

此时，您将能够再次附加到它。

# php - 为什么我的'if (isset) 不与 mysql 交互'

> ID：12035487
> 
> 赞同：1
> 
> 时间：2012-08-20T09:48:14.720
> 
> 标签：php, mysql, json, isset

为什么我的 'if if (isset($_POST['submit'])) 不与 mysql 交互'请告诉我，我哪里出错了，我已经经历了一千次并检查了互联网......这是很多代码，但我想我已经监督了一些事情。我为自己发表了评论，所以我不会忘记一些愚蠢的“;”。
提前致谢

[http://appsolute.vacau.com/cms](http://appsolute.vacau.com/cms)

```
<html>
    <head>
    <title>Milan CMS</title>
    </head>

    <body>
    <?php
    mysql_connect("mysql15.000webhost.com", "a96443****tjiran", "ev****89") or die(mysql_error()); //opening database
    mysql_select_db("a9644326_app") or die(mysql_error());
    $result = mysql_query("select * from milan") or die(mysql_error()); //get msql database into $result
    $content = mysql_fetch_array ($result); // make $content represent current entry
    ?>

    <form action="<?php echo $PHP_SELF;?>" method="post" name="trainingen">
    <h3>Trainingen:</h3><p><textarea name="nametrainingen" rows="10" cols="60"><?php echo $content['value']; ?></textarea></p>
    <input type="submit" value="Verzenden"><input type="reset" value="Veld leeg maken">
    </form>

    <?php
    if (isset($_POST['submit'])) 
    { //test if submit button is clicked
        mysql_query("DELETE FROM milan WHERE tag='trainingen'") or die(mysql_error()); //delete old entry
        $input = $_POST['nametrainingen']; //set $input as current entry
        mysql_query("INSERT INTO milan (tag, value) VALUES ('trainingen', '$input')") or die(mysql_error()); //set tag, value as trainingen and $input(current entry)
        $result = mysql_query("select * from milan") or die(mysql_error()); //reset $result to new database
        $content = mysql_fetch_array ($result); //make $content represent new entry
        $myFile = "trainingen.json"; 
        $fh = fopen($myFile, 'w') or die("can't open file");
        fwrite($fh, json_encode($content));
        fclose($fh);
    }
    ?>
    <p>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-20T09:51:33.483

`$_POST`是一个超全局数组，包含与表单一起提交的所有表单元素的关联数组。你没有输入`name="submit"`，所以你`isset()`失败了。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-20T09:57:07.250

```
<form action="<?php echo $_SERVER['PHP_SELF'];?>" method="post" name="trainingen"> 
```

不是`$PHP_SELF`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-20T09:51:42.190

您的代码中没有“名称”属性为“提交”的标签。代替：

```
<input type="submit" value="Verzenden"> 
```

和：

```
<input name="submit" type="submit" value="Verzenden"> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-20T09:51:20.543

尝试

```
<input type="submit" name="submit" value="Verzenden"> 
```

但是警告-您的代码不安全。在 google 中搜索 SQL 注入。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-20T09:53:01.513

在您的提交按钮`<input type="submit" value="Verzenden">`中。你错过了`name="submit"`。

它应该是

```
<input type="submit" value="Verzenden" name="submit"> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-20T09:51:34.520

提交按钮不会将任何内容传递给表单。要确认这一点，您可以尝试`var_dump($_POST)`. 该电话的替代品是

```
if (count($_POST)) 
```

但是，您仍然可以收到通知和失败的 mysql 查询，因此您应该这样做

```
if (isset($_POST['nametrainingen'])) 
```

# php - mysql_stat 中的条目是什么意思？

> ID：12035490
> 
> 赞同：2
> 
> 时间：2012-08-20T09:48:18.690
> 
> 标签：php, mysql, statistics

`mysql_stat()`我在 PHP 中调用了该函数，结果如下：

*   正常运行时间：7733455
*   主题：1
*   问题：2218231
*   慢查询：1552
*   打开：14989
*   冲洗表：1
*   打开表：6
*   每秒平均查询次数：0.287

我在 6 天前创建了数据库，但`uptime`建议是将近 90 天前（或者这是服务器的最后一次重新启动？）

查询蜂的阈值是`slow query`多少？

我可以以某种方式检查，哪些查询慢？

`open Tables`如果我的数据库中只有 3 个表，怎么可能是 6 个？

`Threads`条目的含义是`Opens`什么`Flush tables`？

**是否可以重置统计信息？**

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-20T09:55:01.600

由于[PHP DOCS](http://ru2.php.net/manual/en/function.mysql-stat.php)不鼓励使用`mysql`扩展。改为使用`mysqli`。

字段含义：

```
 o   Uptime

       The number of seconds the MySQL server has been running.

   o   Threads

       The number of active threads (clients).

   o   Questions

       The number of questions (queries) from clients since the server was
       started.

   o   Slow queries

       The number of queries that have taken more than long_query_time
       seconds. (MySQL DOSC "The Slow Query Log" section).

   o   Opens

       The number of tables the server has opened.

   o   Flush tables

       The number of flush-*, refresh, and reload commands the server has
       executed.

   o   Open tables

       The number of tables that currently are open.

   o   Memory in use

       The amount of memory allocated directly by mysqld. This value is
       displayed only when MySQL has been compiled with safemalloc, which
       is available only before MySQL 5.5.6.

   o   Maximum memory used

       The maximum amount of memory allocated directly by mysqld. This
       value is displayed only when MySQL has been compiled with
       safemalloc, which is available only before MySQL 5.5.6. 
```

要重置此值`#> mysqladmin flush-host`，请在您的 mysql 服务器终端中使用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-10T20:03:55.883

如果您的网站托管在共享主机中，则该信息可能来自多个数据库，而不仅仅是您的！:)

# git - 避免在执行 git push 时弹出询问用户名的弹出窗口

> ID：12035491
> 
> 赞同：1
> 
> 时间：2012-08-20T09:48:22.373
> 
> 标签：git, ssh, cygwin, msysgit, tortoisegit

我的 Windows 机器上安装了 Cygwin、msysgit 和 TortoiseGit。我正在为 Cygwin 编写一个脚本，该脚本通过 ssh 将 git 推送到远程机器：

```
git push ssh://host/path/to/git master:master 
```

此时，会出现一个弹出窗口并询问我要用于 SSH 的用户。如果我键入一个用户，那么我会得到第二个弹出窗口，询问我该用户的密码。现在，我有两个问题：

1.  该用户使用密钥对进行身份验证，因此它没有密码。弹出窗口不允许我指定私钥。
2.  我编写脚本的原因是为了避免重复编写用户名和私钥位置等平凡的事情，所以我希望能够将用户名和私钥文件的路径传递给命令行（或者可能是一个配置文件）。

你知道怎么做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T10:51:24.607

尝试使用：

```
ssh://username@host/path/to/git 
```

这将避免弹出窗口询问用户名。如果您在`.ssh`文件夹中正确配置了密钥，则身份验证也应该起作用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T09:53:17.890

在使用 Windows 计算机时，我使用 pageant 设置私钥并自动将其提供给请求的应用程序。

所以我必须在每个会话中只提供一次私钥密码（给选美），而不是在每次需要时。由于 pageant 是一个身份验证代理，它适用于所有进行 ssh 连接的程序（我用 msysgit 对其进行了测试，没有问题）。

见：[http ://the.earth.li/~sgtatham/putty/0.60/htmldoc/Chapter9.html](http://the.earth.li/~sgtatham/putty/0.60/htmldoc/Chapter9.html)

# c++ - C++11 std::bind 的链式调用不起作用

> ID：12035493
> 
> 赞同：5
> 
> 时间：2012-08-20T09:48:25.120
> 
> 标签：c++, c++11, boost-bind, libc++

调用嵌套`std::bind`表达式时出现问题。下面的代码演示了这个问题。它无法使用 libc++ 编译，但可以使用 boost：

```
#define BOOST 0

#if BOOST
    #include <boost/function.hpp>
    #include <boost/bind.hpp>
    using boost::function;
    using boost::bind;
#else
    #include <functional>
    using std::function;
    using std::bind;
    using std::placeholders::_1;
#endif

int sum(int a, int b) { return a+b; }

// works
template <typename F>
int yeah(F f, int c)
{
    return f(c);
}

// breaks with libc++
template <typename F>
int nope(F f, int c)
{
    return bind(f, c)();
}

// fixes the problem
template <typename F>
int fix1(F f, int c)
{
    function<int(int)> g = f;
    return bind(g, c)();
}

template <typename F>
class protect_t
{
public:
    typedef typename F::result_type result_type;

    explicit protect_t(F f): f_(f) {}

    template <typename... Args>
    result_type operator()(Args&&... args)
    {
        return f_(std::forward<Args>(args)...);
    }

private:
    F f_;
};

template <typename F>
protect_t<F> protect(F f)
{
    return protect_t<F>(f);
}

// compilation fails with libc++
template <typename F>
int fix2(F f, int c)
{
    return bind(protect(f), c)();
    // F copy(f);    // fails due to this!
}

#include <iostream>

int main()
{    
    std::cout << yeah(bind(sum, _1, 4), 5) << std::endl;  // works
    std::cout << nope(bind(sum, _1, 4), 5) << std::endl;  // breaks
    std::cout << fix1(bind(sum, _1, 4), 5) << std::endl;  // fixes
    std::cout << fix2(bind(sum, _1, 4), 5) << std::endl;  // doesn't compile
} 
```

将绑定表达式包装在 a `std::function`（请参阅`fix1`参考资料）中可以解决问题，尽管会由于运行时多态性禁用内联而牺牲速度（尽管尚未测量）。

将绑定表达式包装在`protect_t`（参见参考资料`fix2`）中的灵感来自`boost::protect`，但是，由于绑定表达式不可复制，使用 libc++ 进行编译会失败。这让我想知道为什么`std::function`无论如何都要将它们包装在作品中。

知道如何解决这个问题吗？到底是怎么回事`std::bind`？首先，我认为问题与 C++11 标准规定的对绑定表达式的急切求值有关（请参见[此处](https://stackoverflow.com/questions/10555566)），但这不会是问题，不是吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T09:43:01.143

该标准规定任何可调用对象都可以使用 来包装[`std::bind`](http://en.cppreference.com/w/cpp/utility/functional/bind)，包括由先前调用生成的对象`std::bind`。您的问题是由于您正在使用的标准库的实现存在缺陷引起的，解决方案是升级，或者如果此错误仍未修复，则切换到不同的实现。

# ios - 将 MKMapRect 转换为 CLRegion

> ID：12035505
> 
> 赞同：0
> 
> 时间：2012-08-20T09:49:32.857
> 
> 标签：ios, gps, mkmapview, mkmaprect

如何将地图视图的可见矩形转换为 CLRegion 以与 CLGeocoder 一起使用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T10:23:40.267

哦，我刚刚在这里找到了这个答案： [https ://gist.github.com/3402711](https://gist.github.com/3402711)

# asp.net - 标有 [Authorize] 属性的方法的 User.Identity.Name 为 null

> ID：12035513
> 
> 赞同：1
> 
> 时间：2012-08-20T09:50:03.763
> 
> 标签：asp.net, asp.net-mvc-3, razor, forms-authentication

这怎么可能？使用 MVC Razor，我用 [Authorize] 属性标记了我的方法，这意味着用户必须登录才能访问视图，对吗？但是，有时我将 User.Identity.Name 值设为空（那么谁登录了？）。

我的方法没有在授权属性中定义任何角色，如下所示：

```
[Authorize]
public ActionResult PageToView(){
...
return View();
} 
```

编辑：我正在使用默认的角色和成员资格提供程序。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-20T09:56:19.763

我之前遇到过类似的问题，这是因为 HttpContext.Current.User 从未被填充。

请查看[HttpContext.Current.User.Identity.Name 返回 null](https://stackoverflow.com/questions/7246496/httpcontext-current-user-identity-name-returning-null)。

我希望这会有所帮助。

# ios - 为 CATiledLayer 创建平铺图像

> ID：12035514
> 
> 赞同：0
> 
> 时间：2012-08-20T09:50:08.537
> 
> 标签：ios, cocoa-touch, uiscrollview, uiimageview, catiledlayer

我正在我的应用程序中创建一种“地图”。这基本上只是使用 imageView/scrollView 查看图像。然而，图像是巨大的。像 20,000x15,000 像素或其他东西。如何平铺此图像以使其适合？当应用程序本身平铺时，它会占用太多内存，我希望在我启动应用程序之前完成此操作，并且只包含平铺的图像，而不是原始图像。Photoshop可以做到这一点吗？我还没有完全搜索这个，因为我不在，在网络连接有限的 iPhone 上打字。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T11:25:06.703

Apple 有一个名为 PhotoScroller 的项目。它支持大图像的平移和缩放。但是，它通过预先平铺图像来做到这一点 - 如果您查看项目，您会看到数百个不同缩放大小的平铺。然而，该项目不附带任何类型的平铺实用程序。

所以有些人所做的是创建任何人都可以用来创建这些图块的算法或代码。我支持一个开源项目[PhotoScrollerNetwork](https://github.com/dhoerl/PhotoScrollerNetwork)，它允许人们从网络上下载巨大的 jpeg，平铺它们，然后像​​ PhotoScroller 一样显示它们，在为此进行研究时，我发现有几个人发布了平铺软件。

我用谷歌搜索了“PhotoScroller 平铺实用程序”并获得了很多点击，包括[SO 上的一个](https://stackoverflow.com/questions/4403263/generate-tiles-from-large-photos-ios-photoscroller)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T15:57:56.590

CATiledLayer 是一种方法，当然最好的方法是您可以预先平铺从互联网下载它们的图像（注意要打开多少连接）或嵌入它们（增加整体应用程序大小），另一种是内存映射文件系统上的图像（但是具有该 res 的图像可能需要大约 1GB），看看这个问题它可能是一个[关于低内存场景的有趣主题 SO 问题](https://stackoverflow.com/questions/6172919/ios-memory-mapped-files-and-low-memory-scenarios)

# hibernate - 休眠读取功能显示旧数据

> ID：12035517
> 
> 赞同：9
> 
> 时间：2012-08-20T09:50:46.270
> 
> 标签：hibernate, session, caching

我在显示数据库中的数据时遇到问题。如果我更新一个对象，有时我会得到旧数据，有时会得到新数据。更新功能运行良好（我可以在数据库中看到正确的更新），而读取功能似乎获取缓存数据。我尝试禁用两个缓存，尝试在更新/保存期间打开和关闭会话，但它仍然无法正常工作。User 和 Store bean 都有 Lazy fetches。谢谢！

阅读功能：

```
 public static List<Store> getStoreByUser(User user)
        throws HibernateException {
    List<Store> result = null;
    Session session = sessionFactory.getCurrentSession();   
    Transaction transaction = null;
    try {
        transaction = session.getTransaction();
        Criteria criteria = session.createCriteria(Store.class);
        criteria.add(Restrictions.eq("userUserID", user));
        result = criteria.list();
    } catch (HibernateException he) {
        logger.error("No Store found for user: = " + user, he);
        throw he;
    }
    return result;
} 
```

更新/保存功能：

```
 public static Integer insertOrUpdateStore(Store store)
        throws HibernateException {
    Integer id = null;
    Session session = sessionFactory.getCurrentSession();   
    Transaction transaction = null;
    try {
                    transaction = session.getTransaction();
        if (store.getStoreID() != null && store.getStoreID() != 0) {

            session.merge(store);
            transaction.commit();

        } else {
                id = (Integer) session.save(store);
            transaction.commit();               
        }
    } catch (HibernateException he) {
        if (transaction != null) {
            transaction.rollback();
        }
    } finally {
    }       
    return id;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-20T12:07:56.373

通常，您具有“已提交读”的[隔离级别。](http://en.wikipedia.org/wiki/Isolation_%28database_systems%29)这使您的事务可以看到其他事务已提交的更改。隔离级别由底层 dbms 实现，而不是由 hibernate 实现。

您不能禁用一级缓存（可能通过使用不应该用于一般目的的无状态会话）。执行查询时，NH 总是在缓存中找到值时返回值，以确保您不会在内存中多次获得相同的数据库记录。

如果这对您来说是个问题，您应该切换到更高的隔离级别。例如可重复读取（这意味着它所说的：多次读取相同的数据时，您总是得到相同的结果）。仍有机会看到其他交易的变化。使用可序列化的隔离级别，您不应该再遇到此类问题。

注意：切换到另一个隔离级别是对大多数系统的重大更改，应仔细计划。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-11T12:19:36.163

我有同样的问题，我的查询选择 * 返回旧数据。我在 hibernate.cfg.xml 文件中像这样关闭了二级缓存

```
<property name="hibernate.cache.use_second_level_cache">false</property>
<property name="hibernate.cache.use_query_cache">false</property>
<property name="hibernate.c3p0.max_statements">0</property> 
```

我会尝试在 transaction.commit() 之前/之后添加 session.flush() 或 session.clear() 但它没有给出积极的结果

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-15T12:51:40.657

您可以打开一个新会话，以便从会话缓存中获取没有旧实体的“新鲜”（从数据库更新）数据。在下面的示例中，您可以看到一个实体正在从数据库中查询。您也可以使用相同的机制来返回实体而不是布尔值，或者调用`session.Refresh()`（当然是从当前会话中）来刷新数据库中的最新更改：

```
 /// <summary>
        ///  Gets an item exists on database.
        /// </summary>
        /// <param name="Id">Item ID to check if exists on database</param>
        /// <returns> True if the <paramref name="Id"/> to check exists on database, otherwise false. </returns>
        public bool Exists<T>(object Id)
        {
            using (var session = NHibernateSessionHelper.OpenSession())
            {
                using (var transaction = session.BeginTransaction())
                {
                    //get if the item is new. If is new, entity will be null and non exists
                    return session.Get<T>(Id) == null ? false : true;
                    //also you can return the entire table from database, or filter:
                    //session.CreateCriteria<T>().List<T>();
                }
            }
        }

        public void Refresh(object entity)
        {
            //get latest changes from database (other users/sessions changes, manually, etc..) 
            NHibernateSessionHelper.CurrentSession.Refresh(entity);
        } 
```

我希望这可以帮助你。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-01-06T13:25:40.603

您可以逐出旧数据，以确保从 db 而不是从 L1 和 L2 缓存中获取数据。

此外，您必须确保您不在`REPEATABLE_READ`隔离级别。在这种隔离模式下，它保证了同一事务中的两次读取将始终返回相同的结果。由于隔离级别优先于您的缓存驱逐，缓存驱逐不会有任何可见的影响。

有一种方法可以解决此问题：将您的事务隔离级别声明为`READ_UNCOMMITTED`或`READ_COMMITTED`。

# android - 如何在不使用adb的情况下在android中安装android应用程序？

> ID：12035526
> 
> 赞同：2
> 
> 时间：2012-08-20T09:51:17.963
> 
> 标签：android, apk, adb, android-install-apk

我刚刚 `android terminal`

*   我`adb`不必`install apk`。
*   我没有双击 apk 并安装该应用程序。

那么有什么可用的命令可以让我在 android shell 上安装应用程序吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-20T09:54:37.100

是的，试试这个：

```
pm install apk.apk 
```

# joomla - Joomla 2.5 -- 从 itemid 获取 sef url

> ID：12035528
> 
> 赞同：0
> 
> 时间：2012-08-20T09:51:25.083
> 
> 标签：joomla, sef

如何根据其 ID 找到 Menuitem 的正确 SEF url？

```
$link = JRoute::_( $menus->getItem( $id )->link.'&lang='.$languages[ $code ]->sef, true ); 
```

提供类似的东西：

```
http://localhost/<path>/component/content/?view=featured 
```

但我想要的是从菜单生成的 url，即：

```
http://localhost/<path>/<lang-sef-code>/<path> 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T10:50:36.847

我终于找到了解决我遇到的问题的方法。

```
$languages = JLanguageHelper::getLanguages('lang_code');
foreach ($associations as $code => $id ) {
    item = $menus->getItem( $id );
    $link = JRoute::_( 'index.php?lang='.$languages[ $code ]->sef.'&Itemid='.$item->id );
} 
```

这提供：

```
http://localhost/<lang>/<path-to-link> 
```

我注意到，在处理 SEF URL 时，将变量分配给 JRoute::_() 方法的顺序是决定性的。我希望能帮助那些也遇到这个问题的人。

问候

菲利普

# c - C sha1 实现在 Unix 上不起作用

> ID：12035529
> 
> 赞同：1
> 
> 时间：2012-08-20T09:51:30.153
> 
> 标签：c, windows, unix, sha

我在 C 中使用 SHA1 的[这种实现。在 Windows 上运行良好，但在 Unix 上不能输出正确的哈希值（在 Ubuntu 和 Mac OS 10.8 上试过）。](http://www.di-mgt.com.au/src/sha1.c.txt)此外，在 Ubuntu 上，它从同一条消息中输出不同的哈希值。

我想我可以使用另一种实现，只是好奇为什么会这样。

**编辑**

谢谢，你们是对的。将其更改为

```
typedef unsigned int UINT4; 
```

似乎工作正常。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-20T10:03:05.253

这些是 64 位的 unix 吗？

```
/* UINT4 defines a four byte word */
typedef unsigned long int UINT4; 
```

在 64 位 Linux 上实际上是 8 个字节（但在 64 位 Windows 上是 4 个字节）

[https://en.wikipedia.org/wiki/64-bit_computing#64-bit_data_models](https://en.wikipedia.org/wiki/64-bit_computing#64-bit_data_models)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-20T10:09:27.100

如果任何平台是 64 位且具有 64 位`unsigned long`，则此代码可能存在问题：

```
/* UINT4 defines a four byte word */
typedef unsigned long int UINT4; 
```

没有仔细阅读代码以查看如果`UINT4`它实际上是 8 个字节，使用的方式是否会中断，但这听起来很可疑。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-20T10:06:00.440

> typedef unsigned long int UINT4;

也许您的 Unix 实现使用 64 位无符号长整数。

尝试

```
#include <stdint.h>

/* ... */

typedef uint32_t UINT4; 
```

并使用 C99 编译器。

# php - 正则表达式匹配不包含 'b,j,m,n' 的五个字母单词

> ID：12035533
> 
> 赞同：0
> 
> 时间：2012-08-20T09:51:43.547
> 
> 标签：php

我有一个正则表达式来匹配不包含这些字母但仅适用于小写字母的单词，有没有更好的方法来做到这一点？ `"\b[ac-iklo-z]{5}\b"`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T10:13:48.893

您可以使用`/\b[^bjmn\W]{5}\b/i`对其中不包含 bjmn 的五个字母单词进行不区分大小写的匹配。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T09:55:39.160

您还需要指定要匹配大写字母，我不确定语法，但是“/b[ac-iklo-zAC-IKLO-Z]{5}/b”

# android - Android 4.0 ActivityGroup 和 FrameLayout 选项卡

> ID：12035535
> 
> 赞同：0
> 
> 时间：2012-08-20T09:51:51.030
> 
> 标签：android, tabs, activitygroup

我有一个使用 ActivityGroup 和 FrameLayout 来显示活动和选项卡的应用程序。在 android 4.0 之前的设备上一切正常。但是，当使用 4.x 的设备时，选项卡不会显示。这只是一个灰色地带。

有谁知道为什么会这样？我知道 ActivityGroup 已被弃用，但它应该仍然在 > 4.0 上工作，对吗？或者你必须以其他方式做到这一点？（该应用程序不值得将所有内容都更改为片段）

我已经包含了显示我的意思的屏幕。

谢谢！-抢！

**编辑;** 该应用为此目的使用 TabHost 和 TabWidget。我并没有真正澄清这一点。

[安卓4.0前](http://i.stack.imgur.com/ZaDxK.jpg)

[发布安卓 4.0](http://i.stack.imgur.com/crtdr.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T18:08:01.900

对于有兴趣的您，我找到了解决问题的方法。

在`TabWidget`类（扩展`LinearLayout`）中，我删除了`setDividerDrawable()`方法的覆盖。由于某种原因，在 < 4.0 的设备上运行时甚至没有调用此方法，因此对应用程序没有影响。但是当在 4.0+ 上运行应用程序时，调用了这个方法，并且基本上没有设置分隔符，整个`TabWidget`搞砸了。

为什么会发生这种情况我不知道，所以如果有人知道为什么，请随时启发我们其他人:)

希望这对其他人也有帮助。

干杯!

# java - 参数太少。预期 1 个错误 - 使用 MS Access 的 DateDiff 功能时

> ID：12035536
> 
> 赞同：0
> 
> 时间：2012-08-20T09:51:51.467
> 
> 标签：java, ms-access, servlets, datediff

```
SELECT DateDiff("n", LastDate, Now()) as datediffs FROM UserLog WHERE ID = 1 
```

当我从查询设计视图（MS Access）执行此查询时。这给了我几分钟的不同，就像这样：

```
日期差异
---------
2826

```

但是当我从 servlet 执行相同的查询（包括条件 ID = 1 中的静态值）时，如下所示：

```
strSql = "SELECT DateDiff(\"n\", LastDate, Now()) as datediffs FROM UserLog WHERE ID = 1";
recset=stmt.executeQuery(strSql); 
```

它给了我以下错误：

> [Microsoft][ODBC Microsoft Access Driver] 参数太少。预期 1。

那我怎么了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T12:22:27.063

从上面写评论。

如果

```
SELECT TOP 5 id, lastdate FROM UserLog 
```

运行，那么您需要查看语句的其他各个部分。例如，如果数据库丢失了引用，Now() 可能会导致问题。

但是，您报告

> 我执行了 SELECT DateDiff(\"n\", LastDate, '20-08-2012 5:15:10 PM') 没有执行。当我尝试这个 SELECT LastDate, NOW() FROM ... 时，它已成功执行。所以我怀疑问题出在 Datediff() 函数上。（——@hims056，OP）

这很奇怪，因为 DateDiff 通常在 MS Access 之外工作。但是，我注意到[Oracle Bugs](http://bugs.sun.com/bugdatabase/view_bug.do;jsessionid=385ad421bcdae65da641072ba3da6?bug_id=4253498)中报告了这个问题。在评论中，有人提到在他或她的情况下，问题是列名错误，因此可以使用 ACE 而不是 Jet 进行连接。或者，正如您所说，“在几分钟内从 Java 获取 datediff”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T10:57:59.930

尝试使用 PreparedStatement 代替：

```
strSql = "SELECT DateDiff(\"n\", LastDate, Now()) as datediffs FROM UserLog WHERE ID = ?";
PreparedStatement ps = conn.prepareStatement(strSql);
ps.setInt(1, 1);
recset = ps.executeQuery(); 
```

# ember.js - Ember - 在路由上绑定自定义操作

> ID：12035546
> 
> 赞同：4
> 
> 时间：2012-08-20T09:52:17.513
> 
> 标签：ember.js, ember-old-router

是否有可能向路由事件添加自定义操作（基本上是任何一段 JS 代码）？

有一个应用程序需要更改应用程序“外部”页面的某些部分。是的，页面的那部分应该在应用程序中，但不是。所以，我需要在一些路由事件上稍微改变“外部”DOM。例如，当我处于索引状态时，某处有一个空元素，当我移动到另一个状态时，该元素将其内容更改为“返回”并激活。另外，我想将 ember 路由操作绑定到该元素上的 onClick 事件。

我试图找到这样的东西，但似乎什么都没有。我找到了这个，但它根本没有解决我的问题： [如何在 Ember.js 中将事件直接绑定到现有 HTML，而不使用任何类型的视图？](https://stackoverflow.com/questions/11775735)

谢谢你的时间。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-20T14:28:23.663

`enter`了解您可以在路线内处理的事件可能会有所帮助：

```
other: Ember.Route.extend({
    route: '/other',
    connectOutlets: function(router, context) { /* ...? */ }),
    enter: function(router) {
        // ...
    }
}) 
```

不确定是否有更适合您需求的解决方案。

**更新：**如果您使用`action`帮助程序，单击事件将根据您的需要触发操作。示例 - 在模板中：`<a {{action gotoOtherState href="true"}}>Go to other state</a>`，以及您所在的路线（或祖先......在这种情况下为索引路线）：`gotoOtherState: Ember.Route.transitionTo('path.to.otherState')`。

这`href=true`是`<a>`标签的可选触摸。您还可以定义自己的转换：

```
gotoOtherState: function(router, event) {
    // Setup? Teardown?
    // ...
    router.transitionTo('path.to.otherState');
} 
```

注意：如果你在你的动作助手中传递一个上下文（例如`{{action gotoOtherState this}}`），你可以通过事件访问它：`router.transitionTo('path.to.otherState', event.context);`

**更新 2：** `enter`是一个私人钩子，`activate`而是一个新的公共钩子（见[http://emberjs.com/blog/2013/02/15/ember-1-0-rc/](http://emberjs.com/blog/2013/02/15/ember-1-0-rc/)）

# javafx-2 - 如何使用 JavaFX 2.x WebEngine 处理文件上传

> ID：12035547
> 
> 赞同：1
> 
> 时间：2012-08-20T09:52:17.277
> 
> 标签：javafx-2

如何将文件上传到以 JavaFX webview 呈现的网页？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T15:14:23.290

您必须编写一个服务器端 (servlet) 来处理来自 JavaFX 客户端的请求。

检查一下[JavaFX：文件上传到 REST 服务](https://stackoverflow.com/questions/2685970/javafx-file-upload-to-rest-service-servlet-fails-because-of-missing-boundary)

# c# - 标签的默认填充

> ID：12035548
> 
> 赞同：2
> 
> 时间：2012-08-20T09:52:21.737
> 
> 标签：c#, winforms, label

在 WinForms 中，我想知道应用于标签的空白空间：

![在此处输入图像描述](../Images/dbaef9b6ae35a7878a9d8f89b7b695e3.png)

在文本开始之前（* 标有问题）以及文本结尾，您可能也知道它会根据我们更改它的字体大小、字体系列、字体样式等属性而有所不同。

有没有c#计算空格的公式或比例？

因为当我们更改字体系列或字体样式时，我无法理解这个空间是如何增加或减少的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T10:26:19.550

将

```
Graphics.MeasureString(" ", yourFont); 
```

适合你？ [http://msdn.microsoft.com/cs-cz/library/6xe5hazb.aspx](http://msdn.microsoft.com/cs-cz/library/6xe5hazb.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T12:32:22.550

对于winforms，Padding Property是指定控件内部间距的地方。

`Label.Padding.Left` 和 `Label.Padding.Right`

# delphi - 自重启服务（不问系统）

> ID：12035550
> 
> 赞同：2
> 
> 时间：2012-08-20T09:52:38.527
> 
> 标签：delphi, windows-services

我需要重新启动我正在开发的服务。如果出现错误，我不会要求服务经理这样做。我需要以某种方式在我的代码中执行此操作。有没有可能解决我的问题？

**我需要的原因：**

如果出现某些特殊异常，我需要重新启动。如果出现异常情况，我可以关闭我的应用程序并将服务管理器设置为恢复服务。

据我了解，服务管理器将在这两种情况下重新启动服务 - 在事件查看器中生成错误和服务停止时。

如果事件查看器出现错误，如果服务将重新启动，这对我来说是不利的，因为我的应用程序在事件查看器中生成了一些我仍然无法理解的错误。这些错误对服务工作质量没有影响。我需要重新启动以防服务停止或我需要处理的异常情况。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T18:15:55.867

将您的服务的工作转移到一个线程中。然后服务可以在需要时简单地终止并重新创建线程，而无需重新启动服务本身。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T10:18:46.877

您只需要在错误标志上重新启动来设置您的服务。什么是错误？阅读： http: [//msdn.microsoft.com/en-us/library/ms685939.aspx](http://msdn.microsoft.com/en-us/library/ms685939.aspx) 您退出应用程序并向操作系统报告干净退出。如果您不这样做，则 Service Manager 会假定您已崩溃并且无法做出正确的报告。无论是否正确报告服务应用程序，都由您决定。[http://msdn.microsoft.com/en-us/library/ms685996.aspx](http://msdn.microsoft.com/en-us/library/ms685996.aspx)

以下是第一个版本的答案，假设主题启动器需要“热升级”功能。它仍然可以使用，但只是在崩溃时自动重启是多余的。

* * *

您提供两项服务。

一个是worker，另一个是monitor and restarter——比如过时的Interbase/Firebird方案，比如一些特洛伊木马病毒，等等。

或者一个是工人，第二个是后备工人，默默地跟踪变化，如果第一个崩溃，它承担主导角色并产生下一个后备工人。这就是影子数据库服务器的工作方式。

后者只需要在崩溃和恢复工作之间具有接近零的延迟，否则它太昂贵了。前者是脆弱的方案，已被标准的 win32 服务属性淘汰。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T10:04:50.870

Windows 已经提供了“重新启动服务”。在您的服务中也无需这样做。

# java - 使用 java 套接字进行文件传输：客户端错误“线程“主”java.lang.NullPointerException 中的异常”

> ID：12035556
> 
> 赞同：0
> 
> 时间：2012-08-20T09:52:49.690
> 
> 标签：java, sockets, nullpointerexception

引导我完成这个例外。我一直在尝试将文件从客户端发送到服务器 - 在客户端手动输入文件的名称。但是我在客户端收到 NullPointerException - 据我所知，可能的错误是“在打开文件之前，我传递了一个空参数，因此是 NPE”

服务器.java

```
import java.io.FileOutputStream;
import java.io.ObjectInputStream;
import java.io.ObjectOutputStream;
import java.net.ServerSocket;
import java.net.Socket;

public class Server extends Thread {
    public static final int PORT = 3333;
    public static final int BUFFER_SIZE = 100;

    @Override
    public void run() {
        try {
            ServerSocket serverSocket = new ServerSocket(PORT);

            while (true) {
                Socket s = serverSocket.accept();
                saveFile(s);
            }
        } catch (Exception e) {
            e.printStackTrace();
        }
    }

    private void saveFile(Socket socket) throws Exception {
        ObjectOutputStream oos = new ObjectOutputStream(socket.getOutputStream());
        ObjectInputStream ois = new ObjectInputStream(socket.getInputStream());
        FileOutputStream fos = null;
        byte [] buffer = new byte[BUFFER_SIZE];

        // 1\. Read file name.
        Object o = ois.readObject();

        if (o instanceof String) {
            fos = new FileOutputStream(o.toString());
        } else {
            throwException("Something is wrong");
        }

        // 2\. Read file to the end.
        Integer bytesRead = 0;

        do {
            o = ois.readObject();

            if (!(o instanceof Integer)) {
                throwException("Something is wrong");
            }

            bytesRead = (Integer)o;

            o = ois.readObject();

            if (!(o instanceof byte[])) {
                throwException("Something is wrong");
            }

            buffer = (byte[])o;

            // 3\. Write data to output file.
            fos.write(buffer, 0, bytesRead);
        } while (bytesRead == BUFFER_SIZE);

        fos.close();

        ois.close();
        oos.close();
    }

    public static void throwException(String message) throws Exception {
        throw new Exception(message);
    }

    public static void main(String[] args) {
        new Server().start();
    }
} 
```

客户端.java

```
import java.io.File;
import java.io.FileInputStream;
import java.io.ObjectInputStream;
import java.io.ObjectOutputStream;
import java.net.Socket;
import java.util.Arrays;
import java.lang.*;

public class Client {
    public static void main(String[] args) throws Exception {
        String fileName = null;

       try {
            fileName = args[0];
        } catch (Exception e) {
            System.out.println("Enter the name of the file :");
        }
        File file = new File(fileName);
        Socket socket = new Socket("localhost", 3333);
        ObjectInputStream ois = new ObjectInputStream(socket.getInputStream());
        ObjectOutputStream oos = new ObjectOutputStream(socket.getOutputStream());

        oos.writeObject(file.getName());

        FileInputStream fis = new FileInputStream(file);
        byte [] buffer = new byte[Server.BUFFER_SIZE];
        Integer bytesRead = 0;

        while ((bytesRead = fis.read(buffer)) > 0) {
            oos.writeObject(bytesRead);
            oos.writeObject(Arrays.copyOf(buffer, buffer.length));
        }

        oos.close();
        ois.close();
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T10:00:13.093

```
String fileName = null;

       try {
            fileName = args[0];
        } catch (Exception e) {
            System.out.println("Enter the name of the file :");
        }
        File file = new File(fileName); 
```

上面的代码只是检查用户是否提供了文件名。即使用户没有输入任何文件名，它也会继续进行，结果`null`将作为参数传递给`File`构造函数。因此你的`NPE`.

也将`File`实例化放在一个`try catch`块中。其次，`File`构造函数将文件的整个路径作为参数，因此请确保您正在使用的文件在当前工作目录中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T10:07:31.887

你的代码

```
String fileName = null

try {
    fileName = args[0];
 } catch (Exception e) {
    System.out.println("Enter the name of the file :");
 } 
```

有问题。假设如果用户没有输入文件名，它会忽略“输入文件名：”的异常。因此，您的文件名将始终为 NULL。

您要么尝试将其修改为

```
try {
    fileName = args[0];
 } catch (Exception e) {
    System.out.println("Usage: java Client <file_name>");
    System.exit(0);
 } 
```

或者

```
try {
 fileName = args[0];
} catch (Exception e) {
  System.out.println("Enter the name of the file :");
  Scanner scanner = new Scanner(System.in);
  String file_name = scanner.nextLine();
} 
```

无论您要使用哪种方法，请检查 NULL 之类的

```
if (fileName == null) {
  System.out.println("File name can not be NULL");
  System.exit(0);
} 
```

这应该做。干杯。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-20T10:08:32.393

**1.**首先最好使用`Scanner`随路走的`trim()`方法，这样可以防止路径中的任何意外增加空间。

```
Scanner scan = new Scanner(System.in);
String tmppath = scan.nextLine();
String path = tmppath.trim(); 
```

**2.**但如果你想走自己的路......那就试试这个..

```
File f = null;   // If its in class scope, then 
                 // no need to initialize it to null, bydefault it will be null.

 try{

     f = args[0];

 }catch(Exception ex){

     System.out.println("file object is null");
} 
```

# matlab - matlab 返回值为 1.0e+04 * 的东西，如何获得最终值？

> ID：12035559
> 
> 赞同：3
> 
> 时间：2012-08-20T09:53:01.763
> 
> 标签：matlab

Matlab 将值返回为

1.0e+04 * [此处为矩阵]

矩阵内的一些值是 0.1981、0.5765 等...

如何在此表示 1981、5765 等中得到答案...而不是 1.e+04 *

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-20T10:04:06.360

这实际上只是 MATLAB 显示输出的方式。您必须使用该[`format`](http://www.mathworks.com/help/techdoc/ref/format.html)命令来更改显示格式，如下所示：

```
format bank 
```

这应该强制 MATLAB 以小数点后两位的精度显示数字。

要恢复到默认格式，只需键入：

```
format 
```

**例子：**

```
A = 1e5 * rand(2)
A =

  1.0e+004 *

    7.4701    9.7694
    9.7517    6.7675

format bank
A

A =

  74700.70      97693.76
  97516.71      67675.22 
```

附言

如果你的矩阵只包含整数，你可以使用`uint32(A)`or`uint64(A)`太：

```
B = ceil(A);
uint32(B)

ans =
       74701       97694
       97517       67676 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-20T09:58:43.477

改变格式。尝试

```
 format long 
```

然后检查你的输出。如果这不是您想要的，您可以使用其他格式选项[http://www.mathworks.co.uk/help/techdoc/ref/format.html](http://www.mathworks.co.uk/help/techdoc/ref/format.html)

# nsnumberformatter - 货币的 NSNumberFormatter

> ID：12035563
> 
> 赞同：2
> 
> 时间：2012-08-20T09:53:23.617
> 
> 标签：nsnumberformatter

我正在使用 NSNumberFormatter 进行货币格式化。我已经明确提到了货币符号、货币组分隔符、货币小数点分隔符。它按预期工作。但是，当我在设备设置中将区域格式更改为某个特定区域时，它不起作用并且文本的格式也会受到影响。如何克服这个？我希望格式化程序根据我设置的属性进行格式化，而不是基于设备级区域设置。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T11:21:14.893

您指定哪个区域会导致此行为？

无论我设置的区域如何，此代码都适用于我：

```
NSNumberFormatter *nf = [[NSNumberFormatter alloc] init];
nf.numberStyle = NSNumberFormatterCurrencyStyle;
nf.currencySymbol = @"A";
nf.currencyDecimalSeparator = @"B";
nf.currencyGroupingSeparator = @"C";
label.text = [nf stringFromNumber:[NSNumber numberWithFloat:65123.45]]; 
```

# java - 来自浏览器的延迟/Ping 测试

> ID：12035569
> 
> 赞同：1
> 
> 时间：2012-08-20T09:53:47.083
> 
> 标签：java, php, javascript, flash

我想检查从浏览器到服务器的 ping。

Ping/延迟不应该来自服务器，而是来自客户端的机器。

我看过像 Pingtest.net 这样的网站，所以可以从浏览器中完成。

任何语言都可以。

服务器 ping 也可以通过普通 shell 命令 ping 以外的 UDP 数据包进行测试。

我该如何进行。?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T10:01:10.970

尝试对 JavaScript 使用[XMLHTTPRequest()](https://developer.mozilla.org/en-US/docs/DOM/XMLHttpRequest?redirectlocale=ja&redirectslug=XMLHttpRequest)。目标是制作大约 10 个对象并将它们放在一个数组中。然后在每一个中使用 onreadystatechange。对于其中的函数，使用状态 1 启动计时器，使用状态 3 完成计时器。使用对象 Date() 来获取时间。

这就是解决这个问题的全部想法。如果您需要更多，只需评论我的答案，我会尽力使其更完整和“恶作剧”。

* * *

假设您知道如何用 javascript 编程，这是一个可能的解决方案的想法：您首先创建一个数组，您将在每个位置插入一个 XMLHTTPRequest() 的实例。然后，您将创建一个返回函数的函数，其中：
外部函数将为“当前”请求保存某种标识，包括对实例的引用。该功能应该立即执行。
内部函数应该用于执行状态并知道何时“启动”计时器以及何时“停止”计时器。注意打开连接并将标头发送给所有人，等待得到答案，最后注册你得到的时间。做一些数学运算，你就会得到 ping。

这就是这背后的全部想法。祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-22T00:20:40.333

```
<script type="text/javascript">
try {
  netscape.security.PrivilegeManager.enablePrivilege("UniversalBrowserRead");
} catch (e) {
  alert("Permission UniversalBrowserRead denied.");
}

var req = new XMLHttpRequest();
    req.open('GET', 'http://www.mozilla.org/', false);.
    req.send();
    if(req.status == 200) {
        alert(req.responseText);
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-10-07T22:43:29.640

试试这个——我调用了一个空白页面网站，这样它就不会计算加载时间，而是作为 ping 时间。仅供参考 - 它仍然不会与通过运行 ping 命令测量的 ping 时间相同。

```
function loadXMLDoc() {  
    var xhttp = new XMLHttpRequest(); 
    var ping = new Date;
    xhttp.open("GET", "http://cors-anywhere.herokuapp.com/blank.org/", false);
    xhttp.setRequestHeader('Cache-Control', 'no-cache');
    xhttp.send();
    if(xhttp.status == 200) {
             ping = new Date - ping;
             console.log('Ping ' + ping + 'ms');
    }
  } 
```

# windows-phone-7.1 - Windows Phone 7.1 BackgroundAudioPlayer 错误代码 (0x803a000a)

> ID：12035572
> 
> 赞同：1
> 
> 时间：2012-08-20T09:54:01.733
> 
> 标签：windows-phone-7.1, windows-phone

是否有 BackgroundAudioPlayer 错误代码的资源？

调用 Play() 时收到错误代码 0x803a000a。知道这个错误代码是什么吗？

我找不到错误代码及其含义的良好列表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T00:46:16.773

```
protected override void OnError(BackgroundAudioPlayer player, AudioTrack track, Exception error, bool isFatal)
{
    if (isFatal)
    {
        player.Track = null;
        switch (error.Message)
        {
            case "-2147012889":
                //MessageBox.Show("Cannot connect to streaming server.");
                break;
            case "-2147012696":
                MessageBox.Show("No available network connection.");
                break;
            case "-1072889830":
                MessageBox.Show("Cannot find stream.");
                break;
            case "-2147467259":
                //MessageBox.Show("Error. Try again later.");
                break;
        }
        Abort();
    }
    else
    {
        player.Track = null;
        switch (error.Message)
        {
            case "-2147012889":
                //MessageBox.Show("Cannot connect to streaming server.");
                break;
            case "-2147012696":
                //MessageBox.Show("No available network connection.");
                break;
            case "-1072889830":
                //MessageBox.Show("Cannot find stream.");
                break;
            case "-2147467259":
                //MessageBox.Show("Error. Try again later.");
                break;
        }
        NotifyComplete();
    }

} 
```

*   “-2147012889” 80072EE7 找不到服务器（例如手机处于飞行模式）
*   “-2147012696” 80072FA8 没有可用的网络连接
*   "-1072889830" C00D001A 找不到媒体文件（例如您指向的 MP3 文件不再在服务器上）
*   “-2147467259” 80004005 非特定错误代码

希望有帮助。

# android - 如何在整个应用程序中保留在 android 的搜索对话框中搜索的关键字？

> ID：12035585
> 
> 赞同：0
> 
> 时间：2012-08-20T09:54:48.147
> 
> 标签：android

我有一个为每个活动提供搜索选项的应用程序，我希望搜索框显示最后一个单词搜索。如何保留搜索的最后一个单词？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T10:00:08.240

您可以使用

1 - 共享偏好

或者

2 - 在应用程序文件中保留一个可通过任何活动访问的变量

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T09:58:00.233

查看描述在 Android 中存储数据的方法的[数据存储帖子。](http://developer.android.com/guide/topics/data/data-storage.html)您应该确定最适合您的应用程序的解决方案。希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T09:58:58.507

很简单，只需考虑使用 SharedPreference。然后每次用户搜索某些内容时，将其作为字符串保存在 SharedPreferenes 中，然后在每个搜索字段中读取该字符串并将其作为默认值放在那里，如果这是第一次搜索，它将返回 null 或“” . 这是从 SharedPreferenes 读取值时必须指定默认值的行为。

# php - 如何有效地使用不使用表格的 CakePHP 模型？

> ID：12035593
> 
> 赞同：1
> 
> 时间：2012-08-20T09:55:47.983
> 
> 标签：php, cakephp, cakephp-2.0, cakephp-model

我有一个名为“Route”的模型类，我一直在努力寻找有关如何使用不基于底层数据库表的模型的文档/教程。目前，我的模型具有以下属性（注意 useTable 设置为 false）：

```
//this model does NOT use a database table - very important
public $useTable = false;

//route id
public $id;

//textual description of the route
public $desc = ''; 
```

我的主要问题是：如果我的应用程序使用多个路由（它会），我如何创建这个模型的多个实例？例如，我知道我可以在我的控制器中执行此操作：

```
$this->loadModel('Route');
$this->Route->id = 1; 
```

但显然，这不适用于多条路线。我是否需要创建另一个模型来存储这些路线？在我找到正确的方法之前，我有点犹豫要不要继续。

**编辑：这与 CakePHP 路由无关。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T11:31:41.087

找到了答案。基本上，我做错了。查看[此](https://github.com/dereuromark/tools/blob/2.0/Model/ContactForm.php)示例，了解如何正确使用没有表格的模型。

# javascript - 在Javascript中模拟按键

> ID：12035594
> 
> 赞同：1
> 
> 时间：2012-08-20T09:55:54.867
> 
> 标签：javascript, keypress, simulate

> **可能重复：**
> [我可以在 Javascript 中执行 SendKeys 吗？](https://stackoverflow.com/questions/5988230/can-i-do-sendkeys-in-javascript)

您好，有什么方法可以在 javascript 中执行以下操作：

我希望用户单击网页上的链接，当单击该链接时，它相当于按下 CONTROL + D，除非实际上没有按下任何键。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T10:08:39.173

如果你使用 jQuery，你也许可以做这样的事情。

```
$("#linkId").click(function(event) {
    event.preventDefault(); // Stop the link click from doing anything.
    var ev = jQuery.Event("keypress"); // Build an event to simulate keypress.
    ev.which = 68; // Keycode for 'd' is 68
    ev.ctrlKey = true; // Control key is down.
    $(this).trigger(ev); // Fire!
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T10:02:38.160

您只能在 jQuery 中进行**模拟**并作为事件进行跟踪，但您不能像用户按下这些按键一样进行模拟。

这是一个无法用`javascript`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T10:08:28.687

您不能在系统级别从用户输入中做出其他事情。假设您想让用户为链接添加书签（这就是这样`Control + D`做的），这可以让您到达您想要的位置：

```
function addBookmark(title,url){ 
  if(window.sidebar){ 
    window.sidebar.addPanel(title, url, ""); 
  } else if(document.all){ 
    window.external.AddFavorite(url, title); 
  } else if((window.opera && window.print) || window.chrome){ 
    // Chrome & Opera do not have an add Favorite function on window
    alert('Press Control+D to bookmark (Command+D for macs) after you click Ok');
    // or something similar
  }
} 
```

然后绑定单击处理程序以调用该函数：

```
$('#yourLink').on('click', function(e) {
  addBookmark($(this).attr('title'), $(this).attr('href'));
}); 
```

# php - 在 PHP 中根据 USER ID 生成自己的页面

> ID：12035595
> 
> 赞同：3
> 
> 时间：2012-08-20T09:56:02.680
> 
> 标签：php, mysql

对于我的这个查询，我想不出更好的标题。我正在尝试显示所有用户，然后在每一行中都有一个 VIEW 链接（基于他们的用户 ID）......例如：（`http://minquep.com/pages/23`其中 23 是一个用户的用户 ID）......

这也是我的显示功能和删除功能。

我已经使用在每一行中显示了 VIEW 链接

```
<a href="<? echo $rows['user_id']?>VIEW</a> 
```

我的问题是，VIEW 链接的每个 url 还没有在 pages 文件夹下生成。

如何根据每个用户的 user_ids 在每个用户中创建一个 view.php

当我添加用户时，是否可以创建一个自动查看页面。以及如何在我的显示功能中调用它

```
<!-- ALL MEMBERS QUERY -->
        <div id="allmembers" class="content">
            <?php
                include("connection.php"); #DATABASE CONNECTION DO NOT EDIT

                #Moderators
                $sql="SELECT user_id, special_id, login, user_type, company FROM $tbl_name";
                $result=mysql_query($sql);

                #count all mods
                $count=mysql_num_rows($result);
            ?>

        <br style="clear:both;">

        <div style="float:left;margin-left:1%;">
            <?php echo "<font size='3px'>There are $count users:</font>"; #OUTPUT COUNT MODS ?>
        </div>
        <br/><br/>

        <table width="100%" border="0" cellspacing="1" cellpadding="0">
            <tr>
                <td>
                    <form name="form1" method="post" action="" onsubmit="return confirm('Click OK or Cancel to Continue');">
            <table width="100%" border="1%" cellpadding="3" cellspacing="1">
                <tr>
                    <td align="center">#</td>
                    <td align="center"><strong>Id</strong></td>
                    <td align="center"><strong>Name</strong></td>
                    <td align="center"><strong>User Type</strong></td>
                    <td align="center"><strong>Company</strong></td>
                </tr>

        <?php
            while($rows=mysql_fetch_array($result)){
        ?>

                <tr>
                    <td align="center"><input name="checkbox[]" type="checkbox" id="checkbox[]" value="<? echo $rows['special_id']; ?>"></td>
                    <td width="10%"><? echo $rows['special_id']; ?></td>
                    <td width="25%"><? echo $rows['login']; ?></td>
                    <td width="20%"><? echo $rows['user_type']; ?></td>
                    <td><? echo $rows['company']; ?></td>
                    <td><a href="<?echo $rows['user_id']; ?>">View</a></td>
                </tr>

        <?php
        }
        ?>

                <tr>
                    <td width="10%" border="0"><input name="delete" type="submit" id="delete" value="Delete Selected User(s)"></td>
                </tr>

            </table>
                    </form>
                </td>
            </tr>

            <?php
                // Check if delete button active, start this 
                if($_POST['delete']){
                $checkbox=$_POST['checkbox'];
                for($i=0;$i<count($checkbox);$i++){
                $del_id = $checkbox[$i];
                $sql = "DELETE FROM $tbl_name WHERE special_id='$del_id'";
                $result = mysql_query($sql);}
                // if successful redirect back to manage_users.php
                if($result){
                echo "<meta http-equiv=\"refresh\" content=\"0;URL=manage_users.php\">"; #REDIRECTION ITSELF
                }
                }

            ?>
        </table> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T10:00:59.997

您应该研究[URL 重写](http://httpd.apache.org/docs/2.2/rewrite/remapping.html)。为每个用户创建一个物理页面将是疯狂的。

基本上，默认情况下，你会有这样的 URL：**http ://minquep.com/page.php?user_id=3323**

使用 URL 重写，您可以允许人们通过 URL 访问 profile.php 页面，例如： http: **//minquep.com/pages/3323**

# javascript - 将一个数组推送到另一个数组js

> ID：12035597
> 
> 赞同：0
> 
> 时间：2012-08-20T09:56:05.427
> 
> 标签：javascript, arrays

我想在 js/jquery 中执行此操作：

```
var events = new Array();
var $event1 = [id, name, starttime, startposition];
var $event2 = [id2, name2, starttime2, startposition2];
var $event3 = [id3, name3, starttime3, startposition3];
events["fistcolumn"].push($event1, $event2, $event3); 
```

这不起作用......你能告诉我怎么做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T10:02:11.153

```
var events = {}, //lets try that with an object?
    event1 = [id, name, starttime, startposition],
    event2 = [id2, name2, starttime2, startposition2],
    event3 = [id3, name3, starttime3, startposition3];

//lets join the arrays and stick them in the object
events["fistcolumn"] = event1.concat(event2).concat(event3);  

//now events.fistcolumn (kinky name) contains all the values from the arrays

if (events.fistcolumn[5] == name2) //true 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T09:58:48.147

javascript中没有关联数组，你可以使用一个对象：

```
var events = {};
events["firstcolumn"] = event1; 
```

另外，丢失变量前面的 $，即 php 语法 :)

更新：

对于您的事件，您可能还应该使用对象：

var event2 = { id: id2, name: name2, starttime: starttime2, ... };

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T10:00:00.670

这可能有效。因为如果你想像下面那样做，

```
 events["fistcolumn"] = events1; 
```

事件必须是一个对象。

```
events.push($event1);
events.push($event2);
events.push($event3); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-20T10:04:42.613

```
var events = new Array(); 
var $event1 = ['id', 'name', 'starttime', 'startposition']; 
var $event2 = ['id2', 'name2', 'starttime2', 'startposition2']; 
var $event3 = ['id3', 'name3', 'starttime3', 'startposition3']; 
events["fistcolumn"] = $event1.concat($event2).concat($event3); 
```

我将这些变量更改为字符串仅用于测试目的，您可以将其更改回来。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-20T10:40:24.330

```
var events = {};  // events object

var $event1 = [id, name, starttime, startposition];
var $event2 = [id2, name2, starttime2, startposition2];
var $event3 = [id3, name3, starttime3, startposition3]; 
```

那么你可以这样做

```
events["fistcolumn"] = [$event1, $event2, $event3]; 
```

或者像这样

```
events["fistcolumn"] = [];
events["fistcolumn"].push($event1);
events["fistcolumn"].push($event2);
events["fistcolumn"].push($event3); 
```

# javascript - 将集合传递给多个视图

> ID：12035599
> 
> 赞同：0
> 
> 时间：2012-08-20T09:56:22.247
> 
> 标签：javascript, collections, backbone.js, pagination, backbone-views

我正在尝试将分页集合（`backbone.paginator`插件）传递给多个视图，以便共享它，并且我可以使用同一个集合调用我的三个视图的函数。

但是，我的主视图（`AttendeesView`）正在调用其他视图（`PaginationBarView`以及`AttendeeView`每页）。我试图通过我的视图的构造函数通过路由器传递它。我似乎无法让它发挥作用，所以我需要一个想法，这样我才能继续努力。

**编辑：**顺便说一句，`Uncaught TypeError: Cannot call method 'on' of undefined`当我尝试将事件添加到我的集合时，我得到的错误出现在我的 PaginatedBar 上。没有找到。

`AttendeesCollection`（分页）

```
define([
    'jQuery',
    'Underscore',
    'Backbone',
    'models/AttendeeModel',
    'libs/plugins/backbone.paginator'
],function($, _, Backbone, Attendee,Paginator){
    var AttendeesCollection = Paginator.requestPager.extend({
        model: Attendee,
        ... (Works)
    return AttendeesCollection;
}); 
```

* * *

```
define([
    'jQuery',
    'Underscore',
    'Backbone',
    'libs/plugins/bootstrap-dropdown',
    'text!templates/PaginationBar.phtml'
],function($, _, Backbone, twdd, PaginationBarTPL){
    var PaginationBar = Backbone.View.extend({
        events: {
            'click a.PBNext': 'nextResultPage',
            'click a.PBPrev': 'previousResultPage',
            'click a.PBSort': 'updateSortBy',
            'click a.PBPage': 'gotoPage'
        },
        initialize: function(){
            _.bindAll(this,'render','updateSortBy','nextResultPage', 'previousResultPage', 'gotoPage');
            this.collection.on('reset', this.render, this);
            this.collection.on('change', this.render, this);
        }
            (...)
    });
    return PaginationBar;
}); 
```

* * *

```
define([
    'jQuery',
    'Underscore',
    'Backbone',
    'facade',
    'views/PaginationBarView',
    'text!templates/attendees.phtml',
    'collections/AttendeesCollection'
],function($, _, Backbone,facade,PaginationBarView,AttendeesTPL,AttendeesCollection){
    var AttendeesView = Backbone.View.extend({

        el: "#attendees",
        collection: new AttendeesCollection,
        paginationbar: new PaginationBarView({collection: this.collection}),

        initialize: function(){

            _.bindAll(this, 'render', 'onClose');

            $(this.el).find(".paginationBar").append(this.paginationbar.render().el)
            this.collection.on('change', this.addAll, this);
            this.collection.on('reset', this.addAll, this);
            this.collection.on('add', this.addOne, this);
            this.collection.pager();
        },
              (...)
    });
    return AttendeesView;
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T12:56:41.703

您正在`PagniationBarView`视图定义中创建，之前`this.collection`存在。我建议将其移至`initialize()`：

```
var AttendeesView = Backbone.View.extend({

    el: "#attendees",
    collection: new AttendeesCollection,
    paginationbar: null, // Do not create the view here

    initialize: function(){

        _.bindAll(this, 'render', 'onClose');

        // Create the view here now that this.collection exists
        this.paginationbar = new PaginationBarView({collection: this.collection});

        // ...

    }
});
return AttendeesView; 
```

# c# - 如何使用 sdocvw.dll 在 C# 中监听任何 DOM 事件

> ID：12035600
> 
> 赞同：1
> 
> 时间：2012-08-20T09:56:21.917
> 
> 标签：c#, internet-explorer, events, dom

我正在尝试连接到 Internet Explorer 并将侦听器添加到任何 DOM 事件，包括自定义事件。如何才能做到这一点？我正在尝试这个变体，但没有任何结果：

```
//...
using mshtml;
using SHDocVw;
using System.Windows.Browser;
class Test {
    public Test(){
        IWebBrowser2 browser = BrowserHelper.GetBrowserInstance();
        var a = browser.Document as HTMLDocument;

        mydelegate obj = this.somefunction;
        a.attachEvent("onclick", obj);
    }

    public delegate void mydelegate(object sender, HtmlEventArgs args);

    public void somefunction(object sender, HtmlEventArgs args)
    {
         MessageBox.Show("Clicked!");
    }
} 
```

BrowserHelper 返回正确的浏览器实例。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-20T14:44:22.213

这对我有用，无需直接使用 SHDOCVW。我不知道从 DOM 获取自定义事件的解决方案。如果您知道要侦听的自定义事件列表，则可以轻松完成。

```
 private void webBrowser1_DocumentCompleted(
                          object sender, 
                          WebBrowserDocumentCompletedEventArgs e)
        {
            // obtain HtmlDocument
            HtmlDocument htmlDoc = webBrowser1.Document;

            // loop over ALL elements in HtmlDoc
            foreach(HtmlElement element in htmlDoc.All)
            {
                // for the HtmlElements type fetch its suported Events
                // from the typeinfo
                // we use a LinqQuery to filter in the future
                var listOfEvents = from domInt in element.GetType().GetEvents()
                                   // where domInt.Name.Contains("click")
                                   select domInt;
                // iterated over the EventMembers
                foreach (var htmlevent in listOfEvents) 
                {
                    // invoke .Net managed AddEventHandler 
                    htmlevent.AddEventHandler(
                        element, 
                        new HtmlElementEventHandler(GenericDomEvent));
                }
            }
        }

        // do usefull stuff with the even raised
        private void GenericDomEvent(object sender, HtmlElementEventArgs e)
        {
            Debug.WriteLine(e.EventType);
        } 
```

# python - 手动/脚本ssh的区别

> ID：12035602
> 
> 赞同：0
> 
> 时间：2012-08-20T09:56:31.160
> 
> 标签：python, ssh

我可以使用 SSH 手动登录机器并使用 Python 脚本。两者都成功登录。

从手动尝试中，如果我运行脚本 signmes1.py，它可以工作。

从 Python 脚本中，如果我使用命令运行相同的脚本

```
os.system("python signmes1.py") 
```

它不起作用，并出现以下错误。如果我手动运行脚本，它抱怨的文件肯定存在并加载。如果我在脚本中使用完全相同的命令，为什么会有任何不同？

```
Traceback (most recent call last):
  File "signmes1.py", line 12, in <module>
    with open("result1.txt", "r") as my_file:
IOError: [Errno 2] No such file or directory: 'result1.txt' 
```

我在脚本中用于登录的代码如下：

```
import ssh
import os

s = ssh.Connection(host = 'ipaddress', username = 'server1', password = 'xxxx') 
```

其中 ipaddress 是 ipaddress，password 是我的密码。据我所知，登录效果很好，我可以将内容复制到远程服务器并将它们复制回本地计算机。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T10:19:01.407

仍然不确定。你的代码是这样的吗？

```
import ssh
import os

s = ssh.Connection(host = 'ipaddress', username = 'server1', password = 'xxxx') 
os.system("python signmes1.py") 
```

如果是的话，事情对你来说不会很好。如果不是，请编辑问题并粘贴完整代码

# numpy - 如何使用 matplotlib 控制条形图中的记录顺序？

> ID：12035603
> 
> 赞同：0
> 
> 时间：2012-08-20T09:56:40.963
> 
> 标签：numpy, matplotlib, record

我有一个包含多个数据点的数据文件，我想按特定顺序绘制。这是示例数据文件：

```
cop   94.0528    313     441
cpr   225.172    726     747
ent   444.786    926     939
fsh   256.038    743     754
fsp   43.7764    340     356
pbp   343.708    825     834
rho   426.497    858     886
sca   342.431    427     872 
```

我目前正在以我设置示例的方式将它们绘制在彼此下方。如何将我的 python 脚本中这些数据记录的顺序更改为指定的顺序？我已经尝试将它放入一个数组中。所以我会做

```
data=Numpy.genfromtxt(txt)
transformdata.append(2) # cpr to the first slot
transformdata.append(1) # cop to the second slot
outputarray.append(data[transformdata(1)]
outputarray.append(data[transformdata(2)]
pos = range(1,size(outputarray))
scatter(outputarray, pos) 
```

然而，这是混乱的，当然不是实现这一目标的最佳方式。我将如何使用 Numpy 或 Matplotlib 库来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T10:46:53.383

假设它`transformdata`是`ndarray`, like `data`，您可以使用索引技巧来获取数组的视图，而无需复制它。例如：

```
>>> x=np.array(zip("abcdef",range(5),np.random.rand(5)),dtype=[('',"|S1"),('',int),('',float)])
>>> print x
[('a', 0, 0.9818028495949546) ('b', 1, 0.08931155317859962)
 ('c', 2, 0.018796963462246796) ('d', 3, 0.275603618214155)
 ('e', 4, 0.6328806434997251)]
>>> y = x[[1,3,0,2,4]]
>>> print y
[('b', 1, 0.08931155317859962) ('d', 3, 0.275603618214155)
 ('a', 0, 0.9818028495949546) ('c', 2, 0.018796963462246796)
 ('e', 4, 0.6328806434997251)] 
```

这里的关键是`x[[1,3,0,2,4]]`，您在其中按您需要的顺序使用您想要的索引**列表进行索引。**

# android - 更改 Facebook 按钮的默认文本和图像

> ID：12035611
> 
> 赞同：0
> 
> 时间：2012-08-20T09:57:00.343
> 
> 标签：android, facebook, facebook-like, facebook-social-plugins

**我的 android 应用程序使用Graph-Api**实现 Facebook ，并使用**社交插件**(http://developers.facebook.com/docs/reference/plugins/like/)显示 Like 按钮。现在我想实现以下更改。

1.  使用**自定义 Like 按钮**而不是**Facebook 的传统(standard,button_count,box_count) Like button**。

2.  **在 Facebook 上将**Like 按钮的默认文本（**Like ）更改为 Like us。**

     **我正在使用具有**javascript的****Html**和**webview**来显示 Like 按钮。**我怎样才能实现这些变化**？**是否可以更改点**赞按钮（社交插件点赞按钮）的默认文本。如果我们更改 Facebook 的传统组件（即更改文本、更改图像等）有什么问题吗？** 

 ******* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T17:55:55.323

1) 您不能在 Facebook Like Button 部分下的[品牌权限页面中制作自己的自定义 Like 按钮：](https://www.facebook.com/brandpermissions/logos.php)

> 虽然您可以缩放大小以满足您的需要，但您不能以任何其他方式修改“赞”按钮（例如通过更改设计）。

2) 同上，不能以任何方式修改点赞按钮。

让我知道这是否回答了您的问题。******

# java - 修复 GridBagLayout 中 JTextPane 的宽度

> ID：12035615
> 
> 赞同：1
> 
> 时间：2012-08-20T09:57:14.957
> 
> 标签：java, swing, layout, jtextpane, gridbaglayout

我有这个面板：

```
public class MyPanel extends JPanel {

    public MyPanel() {
        super();
        this.setLayout(new GridBagLayout());
        GridBagConstraints gbc = new GridBagConstraints();

        JTable leftTable = new JTable();
        gbc.fill = GridBagConstraints.BOTH;
        gbc.gridx = 0;
        gbc.gridy = 0;
        gbc.weightx = 0.1;
        gbc.weighty = 1.0;
        add(leftTable, gbc);

        JTextPane textPane = new JTextPane();
        gbc.fill = GridBagConstraints.BOTH;
        gbc.gridx = 1;
        gbc.gridy = 0;
        gbc.weightx = 0.4;
        gbc.weighty = 1.0;
        add(textPane, gbc);

        JTable rightTable = new JTable();
        gbc.fill = GridBagConstraints.BOTH;
        gbc.gridx = 2;
        gbc.gridy = 0;
        gbc.weightx = 0.5;
        gbc.weighty = 1.0;
        add(rightTable, gbc);
    }
} 
```

然后，当我在 JTextPane 中输入一些字符时，它会自动调整大小。由于同一行上有 200 个字符（在文本窗格上），这 2 个 JTable 不再可见。

如何修复 JTextPane 的宽度？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T09:58:57.343

只需`gbc.fill = GridBagConstraints.NONE;`用于 JTextPane

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T15:39:25.757

最后我使用了JGoodies[的](http://www.jgoodies.com/)[FormLayout](http://www.jgoodies.com/freeware/libraries/forms/)。

```
private void initItemsPanel() {
    JPanel itemsPanel = new JPanel();
    itemsPanel.setLayout(new FormLayout("left:pref, fill:400px, pref:grow", "fill:20px, fill:4px, fill:max(20px;pref)"));
    CellConstraints cc = new CellConstraints();

    // the left table
    JTable leftTable = new JTable();
    itemsPanel.add(leftTable.getTableHeader(), cc.xywh(1, 1, 1, 2));
    itemsPanel.add(leftTable, cc.xywh(1, 3, 1, 1));

    // the text pane
    itemsPanel.add(new JTextPane(), cc.xywh(2, 2, 1, 2));

    // the right table
    JTable rightTable = new JTable();
    rightTable.setAutoResizeMode(JTable.AUTO_RESIZE_LAST_COLUMN);
    itemsPanel.add(rightTable.getTableHeader(), cc.xywh(3, 1, 1, 2));
    itemsPanel.add(rightTable, cc.xywh(3, 3, 1, 1));

    // Adding the items panel to dialog panel
    JScrollPane itemsScrollPane = new JScrollPane(itemsPanel);
    itemsScrollPane.getVerticalScrollBar().setUnitIncrement(3);

    dialogPanel.add(itemsScrollPane, BorderLayout.CENTER); // with dialogPanel previously instantiated
} 
```

对于我测试的所有情况（调整大小、清空/填充组件等），它更容易预测。

请注意，您必须`getTableHeader()`显式调用，因为 JTable 不直接在 JScrollPane 中。

谢谢。

# macos - 用 Safari 查询 MAC 地址（在 MAC OS 上）

> ID：12035616
> 
> 赞同：1
> 
> 时间：2012-08-20T09:57:15.647
> 
> 标签：macos, safari, safari-extension

我的 webapp 具有使用浏览器的 JavaScript 查询客户端 MAC 地址的功能。我已经为 Windows 的环境浏览器实现了这个，例如 Chrome、Firefox 和 IE。但我被 MacOS 的 Safari 卡住了。我也遵循了这个网站的建议，暗示 Safari 的扩展能够实现这一点。但在深入研究开发之前，可​​能有人给我一个线索，从哪里开始。

我还在这个链接中找到了一篇文章：[https ://developer.apple.com/library/archive/samplecode/GetPrimaryMACAddress/Introduction/Intro.html](https://developer.apple.com/library/archive/samplecode/GetPrimaryMACAddress/Introduction/Intro.html)

有没有办法创建一个扩展来从 Safari 访问该代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T04:38:36.757

我终于找到了 Firebreath 的解决方案。有了这个，我可以以一种可行且一致的方式为 Windows 和 MacOS X 上的所有常见浏览器创建一个插件。谢谢考虑。

# mysql - MySql Autoincrement 字段不使用下一个可用值

> ID：12035625
> 
> 赞同：0
> 
> 时间：2012-08-20T09:57:40.270
> 
> 标签：mysql, auto-increment

我定义了一个 7 位数字的自增 ID 字段`int(7) ZEROFILL`（一开始一切都很好。然后我注意到该字段会“跳过”整个范围。比如直接从 0000100 到 0000200。直接到 9999999 就变得很复杂了，这是 允许的最后一个值`int(7)`，因为下次它设置的值是“10000000”，它包含 8 个数字，而它到目前为止，只使用了 0.005% 的可用值`int(7)`。

问题是我真的需要这个字段的 7 位格式。

有没有办法真正强制该字段使用下一个可用值？

谢谢你的帮助！

编辑：仅供参考，行定义是`int(7) UNSIGNED ZEROFILL AUTO_INCREMENT`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T10:12:53.790

使用`AUTO_INCREMENT`应该工作。请参阅此[SQLFiddle 示例](http://sqlfiddle.com/#!2/f1388/1)。使用`ZEROFILL`不会影响数据，因为它仅用于数据**表示**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T10:12:41.047

尽管我不确定我是否完全理解您的问题，但这不是 AUTO_INCREMENT 应该如何工作的。它基本上是一个计数器，因此它不会查找*下一个可用值*。它只是增加计数器。

在实践中意味着什么？您可能有连续值： 1, 2, 3... 但只要您手动插入更大的值（例如`1000`），计数器就会增加，因此下一个值是`1001`。即使您删除行，计数器也将保持在`1001`. 重置的唯一方法是发出 ALTER TABLE 语句。

如果这不是所需的行为，则 AUTO_INCREMENT 不是该工作的正确工具。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-20T10:10:07.667

使用 Max(Id) 获取插入前的最大 id，然后使用**Max(Id)+1插入下一条记录**

# ruby-on-rails - 设计错误消息

> ID：12035627
> 
> 赞同：0
> 
> 时间：2012-08-20T09:57:49.483
> 
> 标签：ruby-on-rails

我有设计的问题：设计效果很好，但在设计/注册/new.html.erb 我有下一个字符串

```
<%= devise_error_messages! %> 
```

该字符串形成错误消息，例如->

```
<div id="error_explanation">
  <h2>5 errors prohibited this user from being saved:</h2>
  <ul>
    <li>Email has already been taken</li>
    <li>Password can't be blank</li>
    <li>Phone is not a number</li>
  </ul>
</div> 
```

在我的表单顶部（在我的表单元素上）形成的所有错误的味精如何在发生此错误的元素旁边创建错误消息？

像这样的东西

```
<div>Email<br />
    **<div class='email_error'>....</div>**
    <div class="field_with_errors">
        <input id="user_email".... />
    </div>
</div>

<div>Name<br />
    **<div class='name_error'>....</div>**
    <div class="field_with_errors">
        <input id="user_name".... />
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T10:22:20.500

您可以为此使用 error_message_on：http: [//apidock.com/rails/ActionView/Helpers/ActiveRecordHelper/error_message_on](http://apidock.com/rails/ActionView/Helpers/ActiveRecordHelper/error_message_on)

您可以使用访问每个字段名的错误消息

```
if @resource.errors[:field_name] 
```

# c# - XNA - .dll 游戏库在启动时崩溃

> ID：12035637
> 
> 赞同：1
> 
> 时间：2012-08-20T09:58:34.370
> 
> 标签：c#, windows-phone-7, dll, xna, xna-4.0

我正在尝试制作一个编译成 dll 文件的 XNA 游戏库。当我将此库添加到游戏解决方案并添加项目参考时，一切正常。当我尝试直接引用生成的 .dll 文件时，游戏在开始时崩溃并输出消息：

Microsoft.Xna.Framework.Game.dll 中出现了“System.InvalidOperationException”类型的第一次机会异常

（当我使用项目参考运行它时，会显示有关我的 .dll 正在加载的信息）

我无法设置任何断点或写入日志，游戏似乎在开始之前就崩溃了。

经过长时间的搜索，我发现如果没有将“复制本地”值设置为 True，可能会发生这种情况，但我确实设置了..

我很感激任何帮助，谢谢。

**编辑：**

这超出了我的理解，但似乎问题是由重命名 .dll 文件引起的。当我保留原始名称（我猜是加工项目名称或其他名称）时，它可以工作......无论如何，感谢您的帮助！

# mysql - 两个日期之间的mysql天数按月分组

> ID：12035638
> 
> 赞同：2
> 
> 时间：2012-08-20T09:58:35.300
> 
> 标签：mysql

我正在尝试按月对两个日期过滤器之间的天数进行分组。是否可以在mysql中执行此操作。

```
Example : StartDate : 2012-01-19  EndDate: 2012-03-24 
```

查询应返回按月分组的天数

```
Jan : 19
Feb  : 29
Mar :24
Apr : 0
May : 0 etc 
```

有没有办法做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T10:08:33.830

此查询将在有限的日期范围内（过去 1,00,000 天）为您工作。但更好的方法是用`WHILE`循环编写一个单独的函数或过程。

```
SELECT DATE_FORMAT(_date, '%M') AS month,
       COUNT(1) AS days
FROM (
        SELECT CURDATE() - INTERVAL (a.a + (10 * b.a) + (100 * c.a) + (1000 * d.a) + (10000 * e.a)) DAY AS _date
        FROM (SELECT 0 AS a UNION ALL SELECT 1 UNION ALL SELECT 2 UNION ALL SELECT 3 UNION ALL SELECT 4 UNION ALL SELECT 5 UNION ALL SELECT 6 UNION ALL SELECT 7 UNION ALL SELECT 8 UNION ALL SELECT 9) AS a
        CROSS JOIN (SELECT 0 AS a UNION ALL SELECT 1 UNION ALL SELECT 2 UNION ALL SELECT 3 UNION ALL SELECT 4 UNION ALL SELECT 5 UNION ALL SELECT 6 UNION ALL SELECT 7 UNION ALL SELECT 8 UNION ALL SELECT 9) AS b
        CROSS JOIN (SELECT 0 AS a UNION ALL SELECT 1 UNION ALL SELECT 2 UNION ALL SELECT 3 UNION ALL SELECT 4 UNION ALL SELECT 5 UNION ALL SELECT 6 UNION ALL SELECT 7 UNION ALL SELECT 8 UNION ALL SELECT 9) AS c
        CROSS JOIN (SELECT 0 AS a UNION ALL SELECT 1 UNION ALL SELECT 2 UNION ALL SELECT 3 UNION ALL SELECT 4 UNION ALL SELECT 5 UNION ALL SELECT 6 UNION ALL SELECT 7 UNION ALL SELECT 8 UNION ALL SELECT 9) AS d
        CROSS JOIN (SELECT 0 AS a UNION ALL SELECT 1 UNION ALL SELECT 2 UNION ALL SELECT 3 UNION ALL SELECT 4 UNION ALL SELECT 5 UNION ALL SELECT 6 UNION ALL SELECT 7 UNION ALL SELECT 8 UNION ALL SELECT 9) AS e
     ) a
WHERE _date BETWEEN '2012-01-19' AND '2012-03-24'
GROUP BY MONTH(_date)
ORDER BY MONTH(_date); 
```

评论中您的问题的新答案：刚刚有一个问题，如何使用此查询对另一个表进行 JOIN。基本思想是我有一个具有 startDate 和 endDate 的 Bookings 表，并使用这些作为 _date BETWEEN 的参数，我需要找出每个月的天数。关于我如何做到这一点的任何建议？也可以在单行而不是多行中返回结果：

在此处查看[SQL FIDDLE 演示](http://sqlfiddle.com/#!2/37004/1)：

```
CREATE TABLE Bookings (
  start_date date DEFAULT NULL,
  end_date date DEFAULT NULL
);
INSERT INTO Bookings(start_date, end_date)VALUES('2012-01-19','2012-03-24'),('2012-01-05','2012-08-21');

SELECT b.*,
(
 SELECT CONCAT(DATE_FORMAT(b.start_date, '%M:'), (DATEDIFF(LAST_DAY(b.start_date), b.start_date) + 1), ',',
               GROUP_CONCAT(CONCAT(DATE_FORMAT(first_day, '%M:'),days)), ',',
               DATE_FORMAT(b.end_date, '%M:%d')
              ) AS total_days
FROM(
             SELECT DATE_FORMAT(_date, '%Y-%m-01') AS first_day,
                    COUNT(1) AS days
             FROM (
                    SELECT CURDATE() - INTERVAL (a.a + (10 * b.a) + (100 * c.a) + (1000 * d.a) + (10000 * e.a)) DAY AS _date
                    FROM (SELECT 0 AS a UNION ALL SELECT 1 UNION ALL SELECT 2 UNION ALL SELECT 3 UNION ALL SELECT 4 UNION ALL SELECT 5 UNION ALL SELECT 6 UNION ALL SELECT 7 UNION ALL SELECT 8 UNION ALL SELECT 9) AS a
                    CROSS JOIN (SELECT 0 AS a UNION ALL SELECT 1 UNION ALL SELECT 2 UNION ALL SELECT 3 UNION ALL SELECT 4 UNION ALL SELECT 5 UNION ALL SELECT 6 UNION ALL SELECT 7 UNION ALL SELECT 8 UNION ALL SELECT 9) AS b
                    CROSS JOIN (SELECT 0 AS a UNION ALL SELECT 1 UNION ALL SELECT 2 UNION ALL SELECT 3 UNION ALL SELECT 4 UNION ALL SELECT 5 UNION ALL SELECT 6 UNION ALL SELECT 7 UNION ALL SELECT 8 UNION ALL SELECT 9) AS c
                    CROSS JOIN (SELECT 0 AS a UNION ALL SELECT 1 UNION ALL SELECT 2 UNION ALL SELECT 3 UNION ALL SELECT 4 UNION ALL SELECT 5 UNION ALL SELECT 6 UNION ALL SELECT 7 UNION ALL SELECT 8 UNION ALL SELECT 9) AS d
                    CROSS JOIN (SELECT 0 AS a UNION ALL SELECT 1 UNION ALL SELECT 2 UNION ALL SELECT 3 UNION ALL SELECT 4 UNION ALL SELECT 5 UNION ALL SELECT 6 UNION ALL SELECT 7 UNION ALL SELECT 8 UNION ALL SELECT 9) AS e
                 ) a, (SELECT @cnt := 0) b
              GROUP BY YEAR(_date), MONTH(_date)
             ) a
             WHERE first_day BETWEEN DATE_ADD(LAST_DAY(b.start_date), INTERVAL 1 DAY) AND DATE_SUB(b.end_date, INTERVAL 1 MONTH)
        ) total_days
FROM Bookings b 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-10-12T01:22:57.940

如果您遇到所选答案的问题，试试这个，它适用于 MySQL 5.7+ 默认值：

```
SELECT
 YEAR(_date) AS year,
 MONTH(_date) AS month,
       COUNT(1) AS days
FROM (
        SELECT CURDATE() - INTERVAL (a.a + (10 * b.a) + (100 * c.a) + (1000 * d.a) + (10000 * e.a)) DAY AS _date
        FROM (SELECT 0 AS a UNION ALL SELECT 1 UNION ALL SELECT 2 UNION ALL SELECT 3 UNION ALL SELECT 4 UNION ALL SELECT 5 UNION ALL SELECT 6 UNION ALL SELECT 7 UNION ALL SELECT 8 UNION ALL SELECT 9) AS a
        CROSS JOIN (SELECT 0 AS a UNION ALL SELECT 1 UNION ALL SELECT 2 UNION ALL SELECT 3 UNION ALL SELECT 4 UNION ALL SELECT 5 UNION ALL SELECT 6 UNION ALL SELECT 7 UNION ALL SELECT 8 UNION ALL SELECT 9) AS b
        CROSS JOIN (SELECT 0 AS a UNION ALL SELECT 1 UNION ALL SELECT 2 UNION ALL SELECT 3 UNION ALL SELECT 4 UNION ALL SELECT 5 UNION ALL SELECT 6 UNION ALL SELECT 7 UNION ALL SELECT 8 UNION ALL SELECT 9) AS c
        CROSS JOIN (SELECT 0 AS a UNION ALL SELECT 1 UNION ALL SELECT 2 UNION ALL SELECT 3 UNION ALL SELECT 4 UNION ALL SELECT 5 UNION ALL SELECT 6 UNION ALL SELECT 7 UNION ALL SELECT 8 UNION ALL SELECT 9) AS d
        CROSS JOIN (SELECT 0 AS a UNION ALL SELECT 1 UNION ALL SELECT 2 UNION ALL SELECT 3 UNION ALL SELECT 4 UNION ALL SELECT 5 UNION ALL SELECT 6 UNION ALL SELECT 7 UNION ALL SELECT 8 UNION ALL SELECT 9) AS e
     ) a
WHERE _date BETWEEN '2018-01-01' AND '2018-10-11'
GROUP BY YEAR(_date), MONTH(_date)
ORDER BY MONTH(_date); 
```

# objective-c - 为什么 OpenGL ES 不能正确渲染？

> ID：12035645
> 
> 赞同：0
> 
> 时间：2012-08-20T09:59:05.333
> 
> 标签：objective-c, ios, opengl-es, 3d

[链接到代码](http://pastebin.com/HkPgCzks)

我已经在这个代码上苦苦挣扎了大约两个星期了。我使用创建新 OpenGL ES 项目时生成的标准苹果样板代码创建了一个新的 OpenGL 项目。它通常由两个旋转的立方体组成。

我决定要将立方体更改为金字塔（基于三角形）。我得到了代码，除了金字塔是黑色的，因为颜色没有正确渲染。起初我以为这是我的常态，但我认为它们是正确的。如果有人可以帮助我解决这个问题，我将不胜感激。所有坐标都在我创建的头文件中。

* * *

我还发现一些正常的数学已经过时了

GLfloat 规范[36] = {

```
0, -1, 0,
0, -1, 0,
0, -1, 0,

1, 0.25, -0.5,
1, 0.25, -0.5,
1, 0.25, -0.5,

-1, 0.25, -0.5,
-1, 0.25, -0.5,
-1, 0.25, -0.5,

0, 0.5, 1,
0, 0.5, 1,
0, 0.5, 1
}; 
```

这些是正确的规范。感谢您的所有帮助 GC

![旋转的金字塔图像](../Images/6544df5f0fa6cdfa44785951eff17532.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T11:05:35.483

您不能一次绑定 2 个顶点数组 (glBindVertexArrayOES)。您只需要创建 1 个，然后将所有数据放入其中。试试这个方法：

```
glGenVertexArraysOES(1, &_vertexArray); //create vertex array
glBindVertexArrayOES(_vertexArray);

glGenBuffers(1, &_vertexBuffer);
glBindBuffer(GL_ARRAY_BUFFER, _vertexBuffer);
glBufferData(GL_ARRAY_BUFFER, sizeof(verts) + sizeof(norms), NULL, GL_STATIC_DRAW); //create vertex buffer big enough for both verts and norms and pass NULL as data..
uint8_t *ptr = (uint8_t *)glMapBufferOES(GL_ARRAY_BUFFER, GL_WRITE_ONLY_OES); //map buffer to pass data to it
memcpy(ptr, verts, sizeof(verts)); //copy verts
memcpy(ptr+sizeof(verts), norms, sizeof(norms)); //copy norms to position after verts
glUnmapBufferOES(GL_ARRAY_BUFFER);
glEnableVertexAttribArray(GLKVertexAttribPosition);
glVertexAttribPointer(GLKVertexAttribPosition, 3, GL_FLOAT, GL_FALSE, 0, BUFFER_OFFSET(0)); //tell GL where verts are in buffer
glEnableVertexAttribArray(GLKVertexAttribNormal);
glVertexAttribPointer(GLKVertexAttribNormal, 3, GL_FLOAT, GL_FALSE, 0, BUFFER_OFFSET(sizeof(verts))); //tell GL where norms are in buffer
glBindVertexArrayOES(0); 
```

至于检查或计算法线：

您可以使用叉积计算和检查法线是否有锋利的边缘（这是您的情况）。对于由位置 A、B 和 C 定义的每个三角形：

```
 s1 = B-A //s1 and s2 are just for easier reading
     s2 = C-A
     N = s1 x s2 //N is normal (not quite ready)
     (cross product:) 
     N.x = s1.y*s2.z - s2.y*s1.z
     N.y = s1.z*s2.x - s2.z*s1.x
     N.z = s1.x*s2.y - s2.x*s1.y 
```

由于 ABC 可以以任何方式定向，因此您可能需要以另一种方式转向正常。您可以使用点积来获取此信息。在您的情况下，取一个靠近形状中心且不位于其上的点定义它的任何三角形（向量 Center(0,0,0) 可能会这样做）。现在对于每个 A、B、C、N：

```
vector Average = (A+B+C)/3 //center of a triangle
if(dotProduct(N, Center-Average)  >  0) N = N * -1
(dotProduct:)
dot(M,N) = M.x*N.x + M.y*N.y + M.z*N.z 
```

之后，您应该对每个法线进行归一化（将每个分量除以法线的长度，导致每个法线的长度为 1）或者您可以将归一化标志设置为：glVertexAttribPointer(GLKVertexAttribNormal, 3, GL_FLOAT, GL_TRUE...

# sed - 如何使用“sed”命令行工具在两个字符串之间打印行？

> ID：12035650
> 
> 赞同：0
> 
> 时间：2012-08-20T09:59:41.243
> 
> 标签：sed

假设，我有以下文本文件，其中包含：

```
Non-Leaf Node:  level=1  count=27  address=52
branch 0 : rect id 1
rect:   -117.035332 -114.738449
    32.269550   32.711048
branch 1 : rect id 2
rect:   -117.037956 -114.758972
    32.245251   32.684460
branch 2 : rect id 3
rect:   -117.010262 -114.773041
    32.249630   32.674690
branch 3 : rect id 4
rect:   -117.054260 -114.791054
    32.272289   32.668911
branch 4 : rect id 5
rect:   -117.119293 -113.539886
    32.048962   32.542961
branch 5 : rect id 6
rect:   -116.345711 -114.758499
    31.519569   32.546711
branch 6 : rect id 7
rect:   -116.901352 -113.503807
    32.045238   32.549450
branch 7 : rect id 8
rect:   -117.066643 -114.961197
    31.356871   32.616192
branch 8 : rect id 9
rect:   -116.901352 -114.488243
    31.528259   32.572491
branch 9 : rect id 10
rect:   -116.915199 -113.516113
    32.046570   32.574520
branch 10 : rect id 11
rect:   -117.060387 -114.771698
    31.465639   32.532761
branch 11 : rect id 12
rect:   -117.047707 -113.531639
    32.047310   32.524540
branch 12 : rect id 13
rect:   -116.859573 -113.473984
    32.002258   32.415321
branch 13 : rect id 14
rect:   -116.876701 -113.415466
    32.000000   32.369591
branch 14 : rect id 15
rect:   -116.867813 -112.714043
    31.373249   32.358768
branch 15 : rect id 16
rect:   -116.668228 -113.651627
    31.995630   32.462391
branch 16 : rect id 17
rect:   -116.904770 -112.831932
    31.324810   32.335918
branch 17 : rect id 18
rect:   -116.682022 -113.454338
    32.000000   32.532761
branch 18 : rect id 19
rect:   -116.862717 -113.483856
    32.000000   32.473270
branch 19 : rect id 20
rect:   -116.358490 -113.359070
    32.000000   32.515930
branch 20 : rect id 21
rect:   -116.430298 -113.358810
    32.000000   32.464859
branch 21 : rect id 22
rect:   -116.663437 -113.639427
    32.000671   32.442909
branch 22 : rect id 23
rect:   -116.749977 -111.565224
    31.380131   32.152309
branch 23 : rect id 25
rect:   -116.668083 -115.258987
    31.253040   32.000671
branch 24 : rect id 66
rect:   -117.060562 -115.442619
    31.334410   32.573971
branch 25 : rect id 67
rect:   -113.639427 -110.942093
    31.297899   32.062290
branch 26 : rect id 69
rect:   -116.669258 -114.795250
    31.304890   32.131001
Leaf Node:  level=0  count=23  address=1
Non-Leaf Node:  level=1  count=31  address=53
branch 0 : rect id 42
rect:   -115.768539 -106.251556
    31.425039   31.717550
branch 1 : rect id 50
rect:   -109.559479 -106.009361
    31.296721   31.775299
branch 2 : rect id 51
rect:   -110.937401 -106.226143
    31.285870   31.771971
branch 3 : rect id 54
rect:   -109.584412 -106.069092
    31.285240   31.775230
branch 4 : rect id 56
rect:   -109.570961 -106.000954
    31.296721   31.780769
branch 5 : rect id 58
rect:   -115.806213 -106.366188
    31.400450   31.687519
branch 6 : rect id 59
rect:   -113.173859 -106.244057
    31.297440   31.627750
branch 7 : rect id 60
rect:   -115.811478 -106.278252
    31.400450   31.679470
branch 8 : rect id 61
rect:   -109.953888 -106.020111
    31.325319   31.775270
branch 9 : rect id 64
rect:   -113.070969 -106.015968
    31.331841   31.704750
branch 10 : rect id 68
rect:   -113.065689 -107.034576
    31.326300   31.770809
branch 11 : rect id 71
rect:   -112.333344 -106.059860
    31.284081   31.662920
branch 12 : rect id 73
rect:   -115.071083 -106.309677
    31.267879   31.466850
branch 13 : rect id 74
rect:   -116.094414 -106.286308
    31.236290   31.424770
branch 14 : rect id 75
rect:   -115.423264 -106.286308
    31.229691   31.415510
branch 15 : rect id 76
rect:   -116.111656 -106.313110
    31.259390   31.478300
branch 16 : rect id 77
rect:   -116.247467 -106.309677
    31.240231   31.451799
branch 17 : rect id 78
rect:   -116.170792 -106.094543
    31.156429   31.391781
branch 18 : rect id 79
rect:   -116.225723 -106.292709
    31.239960   31.442850
branch 19 : rect id 80
rect:   -116.268013 -105.769913
    31.157240   31.378111
branch 20 : rect id 82
rect:   -116.215424 -105.827202
    31.198441   31.383421
branch 21 : rect id 83
rect:   -116.095734 -105.826439
    31.197460   31.373819
branch 22 : rect id 84
rect:   -115.423264 -105.815018
    31.182640   31.368891
branch 23 : rect id 85
rect:   -116.221527 -105.776512
    31.160931   31.389830
branch 24 : rect id 86
rect:   -116.203369 -106.473831
    31.168350   31.367611
branch 25 : rect id 87
rect:   -115.727631 -106.501587
    31.189100   31.395941
branch 26 : rect id 88
rect:   -116.237289 -105.790756
    31.164780   31.358959
branch 27 : rect id 89
rect:   -115.791344 -105.990044
    31.072620   31.349529
branch 28 : rect id 90
rect:   -115.736847 -106.495079
    31.187969   31.376900
branch 29 : rect id 91
rect:   -115.721710 -106.000130
    31.160351   31.354601
branch 30 : rect id 92
rect:   -115.792236 -106.000793
    31.166620   31.378811
Leaf Node:  level=0  count=21  address=42
Non-Leaf Node:  level=1  count=31  address=81
branch 0 : rect id 24
rect:   -116.844414 -112.145180
    31.498260   32.060459
branch 1 : rect id 26
rect:   -115.951759 -106.352959
    31.681940   32.000000
branch 2 : rect id 27
rect:   -116.743240 -112.668854
    31.446930   32.000000
branch 3 : rect id 28
rect:   -116.700821 -111.622360
    31.411551   31.976200
branch 4 : rect id 29
rect:   -116.592079 -112.608749
    31.395941   32.000000
branch 5 : rect id 30
rect:   -116.657410 -105.197319
    31.693340   32.000000
branch 6 : rect id 31
rect:   -116.717651 -112.397774
    31.297131   31.934071
branch 7 : rect id 32
rect:   -116.577538 -112.635239
    31.310921   31.984739
branch 8 : rect id 33
rect:   -115.213539 -105.196251
    31.672661   32.000000
branch 9 : rect id 34
rect:   -116.605301 -111.706429
    31.455721   31.930630
branch 10 : rect id 35
rect:   -116.598053 -112.377373
    31.438101   31.998800
branch 11 : rect id 36
rect:   -116.483093 -112.499519
    31.382000   31.980379
branch 12 : rect id 37
rect:   -116.611397 -106.342651
    31.676640   31.975651
branch 13 : rect id 38
rect:   -116.729889 -111.579712
    31.384859   31.918150
branch 14 : rect id 39
rect:   -116.563179 -111.683273
    31.431530   31.937929
branch 15 : rect id 40
rect:   -116.607269 -112.358627
    31.441401   31.998569
branch 16 : rect id 41
rect:   -116.408211 -106.430351
    31.519779   31.775270
branch 17 : rect id 43
rect:   -116.382568 -111.548553
    31.449320   31.918150
branch 18 : rect id 44
rect:   -116.453720 -106.419258
    31.519550   31.775330
branch 19 : rect id 45
rect:   -116.606407 -112.181351
    31.428320   31.961201
branch 20 : rect id 46
rect:   -116.453720 -107.823608
    31.458740   31.742060
branch 21 : rect id 47
rect:   -116.643982 -106.447441
    31.483940   31.745359
branch 22 : rect id 48
rect:   -116.603752 -111.648804
    31.421570   31.862720
branch 23 : rect id 49
rect:   -116.514053 -111.551590
    31.353201   31.810820
branch 24 : rect id 55
rect:   -116.650948 -111.595901
    31.303341   31.809580
branch 25 : rect id 57
rect:   -116.700432 -111.744400
    31.416981   31.865299
branch 26 : rect id 62
rect:   -116.323624 -109.556908
    31.297440   31.638611
branch 27 : rect id 63
rect:   -116.591187 -109.210472
    31.320740   31.628071
branch 28 : rect id 65
rect:   -116.231857 -106.018204
    31.298290   31.481331
branch 29 : rect id 70
rect:   -116.246323 -107.546043
    31.279659   31.461029
branch 30 : rect id 72
rect:   -116.276016 -108.424301
    31.308680   31.519550
Leaf Node:  level=0  count=26  address=24
Non-Leaf Node:  level=1  count=31  address=113
branch 0 : rect id 125
rect:   -116.062019 -105.923248
    30.836700   31.122910
branch 1 : rect id 126
rect:   -116.057999 -105.870377
    30.824100   31.116961
branch 2 : rect id 127
rect:   -115.716652 -105.494858
    30.750620   31.033270
branch 3 : rect id 128
rect:   -114.730713 -105.870377
    30.724689   31.056841
branch 4 : rect id 129
rect:   -114.825920 -105.978859
    30.708509   31.079599
branch 5 : rect id 130
rect:   -110.970833 -105.418823
    30.683910   31.201090
branch 6 : rect id 131
rect:   -116.011887 -105.505829
    30.681511   30.994631
branch 7 : rect id 132
rect:   -116.142776 -105.322853
    30.676550   30.944139
branch 8 : rect id 133
rect:   -115.983566 -105.340584
    30.734440   31.018629
branch 9 : rect id 134
rect:   -116.005539 -105.337570
    30.742010   30.994040
branch 10 : rect id 135
rect:   -115.228737 -105.564430
    30.742500   31.047960
branch 11 : rect id 136
rect:   -116.224113 -105.292313
    30.773220   31.018539
branch 12 : rect id 137
rect:   -116.236526 -105.333473
    30.754471   31.030479
branch 13 : rect id 138
rect:   -116.211700 -105.333473
    30.683491   30.981649
branch 14 : rect id 139
rect:   -116.160454 -105.405853
    30.685789   30.986340
branch 15 : rect id 140
rect:   -114.825920 -105.275978
    30.746550   31.004930
branch 16 : rect id 141
rect:   -114.825394 -105.859383
    30.686991   31.010651
branch 17 : rect id 142
rect:   -114.726151 -105.304848
    30.689159   30.988810
branch 18 : rect id 143
rect:   -115.987747 -105.330299
    30.701000   30.969620
branch 19 : rect id 144
rect:   -114.813454 -109.000000
    30.565340   31.207520
branch 20 : rect id 146
rect:   -114.781357 -109.057899
    30.725670   31.217340
branch 21 : rect id 147
rect:   -114.798599 -108.642197
    30.586399   31.168140
branch 22 : rect id 148
rect:   -115.963821 -105.353859
    30.722370   30.998461
branch 23 : rect id 149
rect:   -116.019737 -107.013718
    30.692369   30.998461
branch 24 : rect id 150
rect:   -115.987778 -106.194839
    30.680531   30.956421
branch 25 : rect id 151
rect:   -110.962387 -105.032944
    30.512711   30.911329
branch 26 : rect id 152
rect:   -114.776154 -106.039482
    30.533449   30.943800
branch 27 : rect id 153
rect:   -114.756538 -105.767838
    30.608200   30.921181
branch 28 : rect id 154
rect:   -114.768997 -106.066727
    30.622959   30.940580
branch 29 : rect id 155
rect:   -114.727547 -106.233871
    30.437620   30.903721
branch 30 : rect id 157
rect:   -114.702766 -107.237587
    30.416451   30.915380
Leaf Node:  level=0  count=33  address=125
Non-Leaf Node:  level=1  count=31  address=145
branch 0 : rect id 93
rect:   -116.349747 -108.026497
    31.030939   31.331841
branch 1 : rect id 94
rect:   -116.304611 -106.708038
    31.131109   31.379641
branch 2 : rect id 95
rect:   -112.449677 -106.038094
    31.019670   31.370770
branch 3 : rect id 96
rect:   -115.844307 -107.371758
    30.972601   31.343229
branch 4 : rect id 97
rect:   -116.292664 -106.085373
    31.124689   31.350660
branch 5 : rect id 98
rect:   -116.367180 -106.967934
    31.047510   31.290630
branch 6 : rect id 99
rect:   -116.275307 -108.491081
    30.974831   31.327230
branch 7 : rect id 100
rect:   -116.367180 -106.957008
    31.008089   31.270849
branch 8 : rect id 101
rect:   -116.364403 -107.918480
    30.972820   31.256411
branch 9 : rect id 102
rect:   -116.272133 -107.988899
    30.976681   31.334410
branch 10 : rect id 103
rect:   -116.365402 -107.893059
    30.972601   31.277880
branch 11 : rect id 104
rect:   -116.200783 -106.824043
    30.964640   31.236290
branch 12 : rect id 105
rect:   -115.325272 -106.829910
    31.047960   31.320009
branch 13 : rect id 106
rect:   -116.192703 -106.894081
    30.961340   31.216749
branch 14 : rect id 107
rect:   -116.176559 -106.824043
    30.961340   31.202200
branch 15 : rect id 108
rect:   -116.295670 -106.038094
    30.947639   31.214199
branch 16 : rect id 109
rect:   -115.937958 -105.756721
    30.963070   31.208099
branch 17 : rect id 110
rect:   -115.595337 -105.736366
    30.998461   31.255560
branch 18 : rect id 111
rect:   -116.203499 -105.582573
    30.997290   31.216681
branch 19 : rect id 112
rect:   -115.604919 -105.745247
    31.000710   31.265800
branch 20 : rect id 114
rect:   -116.274750 -106.139961
    30.972040   31.221251
branch 21 : rect id 115
rect:   -116.293137 -105.573257
    30.998100   31.231001
branch 22 : rect id 116
rect:   -116.273071 -106.156433
    30.979561   31.224291
branch 23 : rect id 117
rect:   -116.220413 -106.046547
    30.947639   31.183411
branch 24 : rect id 118
rect:   -116.199783 -106.080406
    30.951260   31.249399
branch 25 : rect id 119
rect:   -116.236526 -106.184769
    30.939819   31.181259
branch 26 : rect id 120
rect:   -116.295197 -106.066818
    30.916910   31.142250
branch 27 : rect id 121
rect:   -116.295670 -106.065643
    30.919300   31.153290
branch 28 : rect id 122
rect:   -116.289436 -105.877930
    30.908859   31.099859
branch 29 : rect id 123
rect:   -116.276169 -106.044052
    30.897539   31.097830
branch 30 : rect id 124
rect:   -114.783638 -106.032387
    30.561710   31.156429
Leaf Node:  level=0  count=40  address=93
Non-Leaf Node:  level=1  count=31  address=177 
```

我想使用 sed 打印每行的每个坐标值。例如，它应该是这样的：

```
-117.035332 
-114.738449  
32.269550   
32.711048 
```

如果您考虑输入的第 3 行和第 4 行。
**请注意“Non-Leaf”和“Node:”之间只有一个空格，“Node:”和“level=1”之间只有2个空格，“rect:”和坐标值之间以及坐标值之间只有一个制表符。**如果 sed 无法实现，那么请告诉我如何仅打印 2 个字符串之间的行并将整个内容通过管道传输到与此相同的操作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T08:39:08.927

你也可以用`awk`这个。使用适当的记录分隔符，想要提取的元素变得微不足道：

```
awk -v RS='rect:' 'NR > 1 { print $1, $2, $3, $4 }' infile 
```

`NR > 1`跳过标题。

输出：

```
-117.035332 -114.738449 32.269550 32.711048
-117.037956 -114.758972 32.245251 32.684460
-117.010262 -114.773041 32.249630 32.674690
-117.054260 -114.791054 32.272289 32.668911
... 
```

如果您希望输出与 birei 的答案相同，请适当设置`OFS`和设置`ORS`，即`\n`和`\n\n`分别：

```
awk -v RS='rect:' -v OFS='\n' -v ORS='\n\n' 'NR > 1 { print $1, $2, $3, $4 }' infile 
```

输出：

```
-117.035332
-114.738449
32.269550
32.711048

-117.037956
-114.758972
32.245251
32.684460

-117.010262
-114.773041
32.249630
32.674690

-117.054260
-114.791054
32.272289
32.668911

... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T11:00:12.323

单程。避免使用 switch 自动打印`-n`，然后当一行与行首匹配`rect:`时，将其删除，追加下一行，删除多余的空格，在坐标之间添加换行符并打印：

```
sed -ne '/^rect:[\t]*/ { s/// ; N ; s/\n[ ]*/ / ; s/[ \t]\+/\n/g ; p }' infile 
```

假设`infile`您的问题中粘贴了内容，输出将是：

```
-117.035332
-114.738449
32.269550
32.711048

-117.037956
-114.758972
32.245251
32.684460

-117.010262
-114.773041
32.249630
32.674690

-117.054260
-114.791054
32.272289
32.668911

... 
```

* * *

**更新**`rect id`坐标后添加字符串：

`sed`命令：

```
sed -ne '
    ## In a line that matches "branch" at the beginning of the line:
    ## 1\. Remove all characters until a colon and all spaces just after it.
    ##    The result will be the "rect id" string.
    ## 2\. Save it in the "hold space".
    /^branch/ { 
        s/^[^:]*:[ \t]*//; 
        h
    }; 

    ## In a line that matches "rect" at the beginning of the line:
    ## 1\. Remove the content matched.
    ## 2\. Append next line (it will be the second pair of coordinates).
    ## 3\. Remove the newline character between coordinates.
    ## 4\. Now all coordinates will be in the same line, so sustitute the
    ##    spaces between coordinates with a newline character.
    ## 5\. Print coordinates (one per line).
    ## 6\. Get content of "hold space" (remember, the "rect id" saved before) 
    ##    and print it just after coordinaes.
    /^rect:[\t]*/ { 
        s///; 
        N; 
        s/\n[ ]*/ /; 
        s/[ \t]\+/\n/g; 
        p; 
        g; 
        p 
    }
' infile 
```

输出：

```
-117.035332
-114.738449
32.269550
32.711048
rect id 1

-117.037956
-114.758972
32.245251
32.684460
rect id 2

-117.010262
-114.773041
32.249630
32.674690
rect id 3

-117.054260
-114.791054
32.272289
32.668911
rect id 4

... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T11:39:40.030

```
sed -ne '/^rect:\t*/ { s///; N; s/\n\s*/ /; s/\s\+/\n/g; p }' inputfile 
```

# c# - C# Word 加载项 - 功能区

> ID：12035652
> 
> 赞同：0
> 
> 时间：2012-08-20T09:59:44.307
> 
> 标签：c#, ms-office

我正在尝试创建一个简单的 Word 加载项。我用这个自动生成的代码创建了一个 Word 2010 插件项目：

```
public partial class ThisAddIn
    {
        private void ThisAddIn_Startup(object sender, System.EventArgs e)
        {
        }

        private void ThisAddIn_Shutdown(object sender, System.EventArgs e)
        {
        }

protected override Microsoft.Office.Core.IRibbonExtensibility CreateRibbonExtensibilityObject() {
            OwnRibbon ribbon = new OwnRibbon();
            //ribbon.DocumentProperty = //get the document here
            return ribbon;
        }
        #region VSTO generated code

        /// <summary>
        /// Required method for Designer support - do not modify
        /// the contents of this method with the code editor.
        /// </summary>
        private void InternalStartup()
        {
            this.Startup += new System.EventHandler(ThisAddIn_Startup);
            this.Shutdown += new System.EventHandler(ThisAddIn_Shutdown);
        }

        #endregion
    } 
```

我查看了文档，并且了解如何从此类中将文本添加到文档中。但是，我拥有的是带有两个按钮的功能区（通过新项目-> 功能区（视觉设计师）创建）。

当按下按钮时，我想在文档中添加文本。但是，此功能区创建了一个单独的类：

```
public partial class OwnRibbon
    {
        private void OwnRibbon_Load(object sender, RibbonUIEventArgs e)
        {

        }

        private void btnInvoegen_Click(object sender, RibbonControlEventArgs e)
        {
        }
    } 
```

如何从单击事件处理程序访问文档？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T10:22:42.097

试试这段代码

```
Microsoft.Office.Tools.Word.Document vstoDocument =
 Globals.ThisAddIn.Application.ActiveDocument.GetVstoObject(); 
```

许多 Office 对象都可以通过像这样的静态方法访问。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T10:08:17.423

您可以在类中创建一个属性，然后在`ThisAddIn`类中设置它：

```
protected override Microsoft.Office.Core.IRibbonExtensibility CreateRibbonExtensibilityObject() {
            OwnRibbon ribbon = new OwnRibbon();
            ribbon.DocumentProperty = //get the document here
            return ribbon;
        } 
```

在`OwnRibbon`课堂上：

```
private void btnInvoegen_Click(object sender, RibbonControlEventArgs e)
{
    //use DocumentProperty which holds the document
} 
```

# python - 如何在图形matplotlib中绘制两条线

> ID：12035657
> 
> 赞同：0
> 
> 时间：2012-08-20T10:00:05.410
> 
> 标签：python, matplotlib

这是我的python代码`Matplotlib`，我想画两条线，第一条已经成功了，我想在这个图中再添加一条线，即y = x^（-0.56），所以我只是简单地添加一条（ x,y) 对在它之后，代码返回错误：

```
lines = plt.loglog(x, y,basex=10,'ro',x,x**(-0.56),basex=10)

SyntaxError: non-keyword arg after keyword arg 
```

谁能帮助如何做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-20T10:15:39.317

那是因为您使用第一个 basex=10 作为默认参数，然后您将传递非默认参数。如果您确定您的函数需要这 7 个参数，则删除第一个 basex=10。

如果您像这样格式化代码，您也可以看到错误：

```
>>> lines = matplotlib.loglog(x,<br>
... y,<br>
... basex=10,<br>
... 'ro',<br>
... x,<br>
... x**(-0.56),<br>
... 10<br>
... )<br>
  File "<stdin>", line 4<br>
SyntaxError: non-keyword arg after keyword arg 
```

The error clearly shows some problem with line 4 and the reason is that I specified above.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-20T10:13:39.343

从您的参数列表中删除第一个`basex=10`（这是您的关键字 arg，它抱怨您后面有非关键字 args）。

IE

```
lines = plt.loglog(x, y,'ro',x,x**(-0.56),basex=10) 
```

为了使其更明确，您还可以将其写为：

```
line1 = plt.loglog(x, y,'ro',basex=10)
line2 = plt.loglog(x,x**(-0.56),basex=10)
plt.show() 
```

# c++ - QT C++ 错误：未定义对“vtable for appprinter”的引用

> ID：12035662
> 
> 赞同：1
> 
> 时间：2012-08-20T10:00:34.697
> 
> 标签：c++, qt

问题：我有一个包含打印机类“apppprinter”的程序，但是在尝试编译时出现错误：

```
appprinter.cpp:(.text+0x105): undefined reference to `vtable for appprinter'
appprinter.cpp:(.text+0x10d): undefined reference to `vtable for appprinter'
appprinter.o: In function `appprinter::printIt()':
make: Leaving directory `/home/michael/projectOOI/HerkansingProjectOOI-build-desktop-Desktop_Qt_4_8_1_for_GCC__Qt_SDK__Release'
appprinter.cpp:(.text+0x17f): undefined reference to `appprinter::staticMetaObject'
appprinter.cpp:(.text+0x1e0): undefined reference to `appprinter::staticMetaObject'
appprinter.cpp:(.text+0x23d): undefined reference to `appprinter::staticMetaObject'
appprinter.cpp:(.text+0x3ab): undefined reference to `appprinter::staticMetaObject'
collect2: ld returned 1 exit status 
```

头文件：

```
#ifndef APPPRINTER_H
#define APPPRINTER_H
#include<QObject>
#include<QWidget>
#include <QMap>
#include <QComboBox>
#include <QCalendarWidget>
#include <QRadioButton>
#include <QString>
#include <QtGui>
#include "appointment.h"

class appprinter : public QWidget
{
    Q_OBJECT
public:
    appprinter(QWidget * parent = 0, int i = 0, int option = 0);
    ~appprinter(){}
    void setList(QList<appointment> param) {goTo = param; printIt();}
    void printIt();
public slots:
    void goNext() {showIter++; this->close();appprinter * help = new appprinter(this,showIter);help->setList(goTo); help->show();}
    void goPrev() {showIter--; this->close();appprinter * help = new appprinter(this,showIter);help->setList(goTo); help->show();}
private:
    int showIter;
    QList<appointment> goTo;
    bool isUnder;
    int opt;
};

#endif // appprinter_H 
```

cpp文件：

```
#include "appprinter.h"

appprinter::appprinter(QWidget * parent, int i, int option)
        : QWidget(parent)
{
    showIter = i;
    if (option == 0);//needs further building

}

void appprinter::printIt()
{
    QList<appointment> list = goTo;
    int i = showIter;
    QPushButton * showNext = new QPushButton(tr("Next"));
    connect(showNext,SIGNAL(clicked()),this,SLOT(goNext()));
    QPushButton * showPrev = new QPushButton(tr("Previous"));
    connect(showPrev,SIGNAL(clicked()),this,SLOT(goPrev()));
    QPushButton * closer = new QPushButton(tr("Close"));
    connect(closer,SIGNAL(clicked()),this,SLOT(close()));

    QGridLayout * lay = new QGridLayout;
    int counter = 0;
    QLabel * pTitle = new QLabel;
    QTextEdit * pDescription = new QTextEdit;
    QLabel * pDeadline = new QLabel;
    QLabel * pDeadlineTime = new QLabel;
    QLabel * pPriority = new QLabel;
    QLabel * pStatus = new QLabel;
    QLabel * emptyList = new QLabel(tr("No search results!"));

    if (list.count() != 0)
    {
        pTitle->setText(list[i].ShowTitle());
        pDescription->setText(list[i].ShowDescription());
        pDeadline->setText(list[i].ShowDate().toString());
        pDeadlineTime->setText(list[i].ShowStart().toString());
        if (i+1 >= list.count())
            showNext->hide();
        else
            showNext->show();
        if (i <= 0)
            showPrev->hide();
        else
            showPrev->show();
        lay->addWidget(pTitle,counter++,0);
        lay->addWidget(pDescription,counter++,0);
        lay->addWidget(pDeadline,counter++,0);
        lay->addWidget(pDeadlineTime,counter++,0);
        lay->addWidget(pPriority,counter++,0);
        lay->addWidget(pStatus,counter++,0);
        lay->addWidget(showPrev,counter,0,Qt::AlignLeft);
        lay->addWidget(showNext,counter,0,Qt::AlignRight);
        lay->addWidget(closer,++counter,0,Qt::AlignCenter);
        this->setFixedHeight(320);
    }
    else
    {
        lay->addWidget(emptyList,0,0);
        lay->addWidget(closer,1,0,Qt::AlignCenter);
        this->setFixedHeight(240);
    }
    setLayout(lay);

    if (list.count() != 0)
        setWindowTitle(list[i].ShowTitle());
} 
```

有人知道解决方案吗？？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-20T10:24:34.347

每当你遇到这种情况时，总是做一个`clean`，`qmake`然后重建。除非您遇到其他问题，例如缺少`Q_OBJECT`或未实现的纯虚拟，否则它会修复。

# grails - grails 2.0.4 + 批处理启动器插件 - 无法解析 Log4jConfigListener

> ID：12035665
> 
> 赞同：2
> 
> 时间：2012-08-20T10:00:43.380
> 
> 标签：grails, plugins

我在 Grails 论坛上问过以下问题，但没有任何答复。我想知道 Stackoverflow 是否会更成功？

我无法在 Grails 2.0.4 中安装批处理启动器插件。'Launcher' 类中 Log4jConfigListener 的导入失败，因为找不到它。

我在 Grails 文档的“升级到 2.0.4”部分看到了一条警告，它说如果您自定义了 install-templates 提供的 web.xml，则必须使用 Grails 的最新版本进行更新。

我想知道批处理启动器插件是否会发生类似的事情？

问候，约翰

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T05:41:15.510

我们正在使用带有 grails 2.1 的批处理启动器插件，一开始我们遇到了同样的问题。

我们通过下载源代码和修补插件解决了这个问题： - 调整 Log4jConfigListener 的导入包 - 调整 _BatchWar.groovy 以包含 jar 文件（grails 2.0 更改了批处理使用的一些 jar 文件的位置）

之后它工作正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T19:16:17.467

我根据 Tobias 的评论进行了更改，如果有人感兴趣，我将工作插件放在与 Grails 2 一起使用的 Gihub 上。[这里](https://github.com/alidadasb/grails-batch-launcher-plugin)

# multitasking - 阻塞时停止任务

> ID：12035670
> 
> 赞同：1
> 
> 时间：2012-08-20T10:01:04.230
> 
> 标签：multitasking, ada

让我先用代码说明这个问题：

```
with Ada.Text_IO;

procedure Test
is

   task type Serving_Task is
      entry Start;
   end Serving_Task;

   task body Serving_Task is begin
      accept Start;
      Ada.Text_IO.Put_Line ("Started");
      loop
         null; --  Blocking operation, eg. accepting on a socket.
         null; --  Processing on blocking operation's result.
      end loop;
      Ada.Text_IO.Put_Line ("Stopped");
   end Serving_Task;

   type Server is tagged limited record
      Serving : Serving_Task;
   end record;

   procedure Start
     (S : in out Server)
   is begin
      Ada.Text_IO.Put_Line ("Starting");
      S.Serving.Start;
   end Start;

   procedure Stop
     (S : in out Server)
   is begin
      Ada.Text_IO.Put_Line ("Stopping");
      -- TODO To implement.
   end Stop;

   Main_Server : Server;

begin
   Ada.Text_IO.Put_Line ("Calling Start");
   Start (Main_Server);
   delay 5.0;
   Ada.Text_IO.Put_Line ("Calling Stop");
   Stop (Main_Server);
end Test; 
```

这是典型的服务器构造 - 有一个服务器任务带有一个循环接受传入连接。我的问题是 - 实现类型`Stop`程序的最佳方法是什么`Server`。

我希望它等到服务任务阻塞接受套接字（或在阻塞调用之前，所以如果在终止任务之前完全处理每个接受的请求）并退出循环，因此任务可以在终止之前清理。

首先想到的是添加

```
select
   accept Stop;
or
   delay 0.1;
   exit;
end select; 
```

在循环结束时，但每次迭代浪费了 0.1 秒。似乎意义重大。

我在 RM、Lovelace 教程和 Wikibook 中查看了一些示例，但似乎没有什么合适的。

在 Ada 中，此类（我相信相当普遍）问题的最佳实践是什么？

**而答案是……**

基于[Marc C](https://stackoverflow.com/users/38706/marc-c)[答案](https://stackoverflow.com/a/12037736/1333261)的示例解决方案：[https ://gist.github.com/3413017](https://gist.github.com/3413017)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T11:31:09.513

你想要[其他](http://www.ada-auth.org/standards/12rm/html/RM-9-7-1.html#p19)版本：

```
loop
   -- blocking read from socket
   -- process the data received
   select
      accept Stop;
      exit;
   else
      null;
   end select;
end loop; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T12:34:51.197

我通常设置的方法是首先使用 AdaCore 的 GNAT.Sockets 包，而不是直接对套接字进行编程。由于我将使用 (socket) select() 函数（包装为 Check_Selector）在套接字上有可用数据时收到通知，因此 GNAT.Sockets 提供了一个可以从其他地方调用的 Abort_Selector() 过程。由于 Check_Selector() 上的任务被阻止，我只是等待数据到达（状态 = 已完成）或该退出的标志（状态 = 中止）。

[请参阅 TOMI_4_Ada 包TCP_Connect](http://tomi4ada.svn.sourceforge.net/viewvc/tomi4ada/trunk/src/tomi_4_ada-transport-tcp_connect.adb?revision=64&view=markup)中 Monitor_Connections 过程的开始（第 397-416 行）。Monitor_Connections 从任务 Connection_Monitoring 中调用（第 469-495 行）。

# java - 性能说明：热身后代码运行速度变慢

> ID：12035676
> 
> 赞同：19
> 
> 时间：2012-08-20T10:01:40.280
> 
> 标签：java, performance, jvm, jit

下面的代码运行完全相同的计算 3 次（它做的不多：基本上是从 1 到 100m 的所有数字相加）。前两个块的运行速度比第三个快大约 10 倍。我已经运行了这个测试程序超过 10 次，结果显示的差异很小。

如果有的话，我希望第三个块运行得更快（JIT 编译），但典型的输出是：

> 35974537
> 36368455
> 296471550

有人可以解释发生了什么吗？（为了清楚起见，我不想在这里解决任何问题，只是想更好地了解发生了什么）

笔记：

*   程序期间不运行 GC（用 监控`-XX:+PrintGC`）
*   使用 Oracle JDK 版本 1.6.0_30、1.7.0_02 和 1.7.0_05 测试
*   还使用以下参数进行了测试：`-XX:+PrintGC -Xms1000m -Xmx1000m -XX:NewSize=900m`=> 相同的结果
*   如果将块放入循环中，则所有运行都很快
*   如果将块提取到方法中，则所有运行都很快（方法是否被调用 3 次或循环调用没有区别）

```
public static void main(String... args) {
    //three identical blocks
    {
        long start = System.nanoTime();
        CountByOne c = new CountByOne();
        int sum = 0;
        for (int i = 0; i < 100000000; i++) {
            sum += c.getNext();
        }
        if (sum != c.getSum()) throw new IllegalStateException(); //use sum
        long end = System.nanoTime();
        System.out.println((end - start));
    }
    {
        long start = System.nanoTime();
        CountByOne c = new CountByOne();
        int sum = 0;
        for (int i = 0; i < 100000000; i++) {
            sum += c.getNext();
        }
        if (sum != c.getSum()) throw new IllegalStateException(); //use sum
        long end = System.nanoTime();
        System.out.println((end - start));
    }
    {
        long start = System.nanoTime();
        CountByOne c = new CountByOne();
        int sum = 0;
        for (int i = 0; i < 100000000; i++) {
            sum += c.getNext();
        }
        if (sum != c.getSum()) throw new IllegalStateException(); //use sum
        long end = System.nanoTime();
        System.out.println((end - start));
    }
}

public static class CountByOne {

    private int i = 0;
    private int sum = 0;

    public int getSum() {
        return sum;
    }

    public int getNext() {
        i += 1;
        sum += i;
        return i;
    }
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-20T16:23:53.057

简短：即时编译器是愚蠢的。

首先，您可以使用该选项`-XX:+PrintCompilation`查看 JIT 何时执行某项操作。然后你会看到这样的东西：

```
$ java -XX:+PrintCompilation weird
    168    1             weird$CountByOne::getNext (28 bytes)
    174    1 %           weird::main @ 18 (220 bytes)
    279    1 %           weird::main @ -2 (220 bytes)   made not entrant
113727636
    280    2 %           weird::main @ 91 (220 bytes)
106265475
427228826 
```

因此，您会看到 main 方法有时在第一个和第二个块期间编译。

添加选项`-XX:+PrintCompilation -XX:+UnlockDiagnosticVMOption`将为您提供有关 JIT 正在做什么的更多信息。请注意，它需要`hsdis-amd64.so`在常见的 Linux 发行版上似乎不太可用。您可能需要自己从 OpenJDK 编译它。

你得到的是 getNext 和 main 的一大块汇编代码。

对我来说，在第一次编译中，似乎只编译了 main 中的第一个块，你可以通过行号来判断。它包含这样有趣的东西：

```
 0x00007fa35505fc5b: add    $0x1,%r8           ;*ladd
                                                ; - weird$CountByOne::getNext@6 (line 12)
                                                ; - weird::main@28 (line 31)
  0x00007fa35505fc5f: mov    %r8,0x10(%rbx)     ;*putfield i
                                                ; - weird$CountByOne::getNext@7 (line 12)
                                                ; - weird::main@28 (line 31)
  0x00007fa35505fc63: add    $0x1,%r14          ;*ladd
                                                ; - weird::main@31 (line 31) 
```

（实际上它很长，由于循环的展开和内联）

显然，在重新编译 main 期间，编译了第二个和第三个块。那里的第二个块看起来与第一个版本非常相似。（再次只是摘录）

```
 0x00007fa35505f05d: add    $0x1,%r8           ;*ladd
                                                ; - weird$CountByOne::getNext@6 (line 12)
                                                ; - weird::main@101 (line 42)
  0x00007fa35505f061: mov    %r8,0x10(%rbx)     ;*putfield i
                                                ; - weird$CountByOne::getNext@7 (line 12)
                                                ; - weird::main@101 (line 42)
  0x00007fa35505f065: add    $0x1,%r13          ;*ladd 
```

但是，第三个块的编译方式不同。没有内联和展开

这次整个循环看起来像这样：

```
 0x00007fa35505f20c: xor    %r10d,%r10d
  0x00007fa35505f20f: xor    %r8d,%r8d          ;*lload
                                                ; - weird::main@171 (line 53)
  0x00007fa35505f212: mov    %r8d,0x10(%rsp)
  0x00007fa35505f217: mov    %r10,0x8(%rsp)
  0x00007fa35505f21c: mov    %rbp,%rsi
  0x00007fa35505f21f: callq  0x00007fa355037c60  ; OopMap{rbp=Oop off=580}
                                                ;*invokevirtual getNext
                                                ; - weird::main@174 (line 53)
                                                ;   {optimized virtual_call}
  0x00007fa35505f224: mov    0x8(%rsp),%r10
  0x00007fa35505f229: add    %rax,%r10          ;*ladd
                                                ; - weird::main@177 (line 53)
  0x00007fa35505f22c: mov    0x10(%rsp),%r8d
  0x00007fa35505f231: inc    %r8d               ;*iinc
                                                ; - weird::main@180 (line 52)
  0x00007fa35505f234: cmp    $0x5f5e100,%r8d
  0x00007fa35505f23b: jl     0x00007fa35505f212  ;*if_icmpge
                                                ; - weird::main@168 (line 52) 
```

我的猜测是 JIT 发现这部分代码没有被大量使用，因为它使用了来自第二个块执行的分析信息，因此没有对其进行大量优化。此外，从某种意义上说，JIT 似乎很懒惰，不会在编译完所有相关部分后重新编译一种方法。请记住，第一个编译结果根本不包含第二个/第三个块的源代码，因此 JIT 必须重新编译它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-20T19:47:09.467

您需要以不同的方法放置每个循环。您需要这样做的原因是 JIT 收集有关代码运行方式的统计信息，并用于优化代码。但是，一个方法在被调用 10000 次或循环运行 10000 次后才被优化。

在您的情况下，第一个循环触发整个方法进行优化，即使后面的循环尚未运行，因此没有收集统计​​信息。将每个循环放在自己的方法中，这不会发生。

# xml - 根据映射拆分字符串 - xslt

> ID：12035679
> 
> 赞同：0
> 
> 时间：2012-08-20T10:02:00.017
> 
> 标签：xml, xslt, xslt-1.0

正如建议的那样。我在[这里](https://stackoverflow.com/questions/12004513/bit-manipulation-and-string-message-structure-with-xslt)将问题 分解为多个部分。

我的输入 xml 表示字符串中存在字段。输入 xml 最多可以有 64 个字段元素。输入 xml 字段元素始终按升序出现。我的输入xml

```
<Root>
  <element>field2</element>
  <element>field3</element>
  <element>field21</element>
</Root> 
```

该字符串在 xslt 中定义为变量。

我的变量

```
<xsl:variable name="inputstring" select="'013112316145ABC0812345678'"/> 
```

输入 xml 表示字段 2、3 和 21 是字符串中唯一的字段，将根据映射 xml 进行提取

这是映射xml

```
<Root>
  <field no="2" charlength="2">variable</field>
  <field no="3" total="4">fixed</field>
  <field no="21" charlength="2">
    <subfield no="1" total="3">fixed</subfield>
    <subfield no="2" charlength="2" idcode="ABC">variable</subfield>
  </field>
  <field no="63" charlength="2">
    <format1>
      <subfield no="1" total="3">fixed</subfield>
    </format1>
    <format2>
      <subfield no="1" total="3">fixed</subfield>
      <subfield no="2" total="7">fixed</subfield>
    </format2>
    <format3>
      <subfield no="1" total="3">fixed</subfield>
      <subfield no="2" total="7">fixed</subfield>
      <subfield no="3" total="6">fixed</subfield>
    </format3>
  </field>
</Root> 
```

映射 xml 告诉以下内容

1.  有四种类型的字段，固定的、可变的、具有子字段的字段（具有固定和可变的）和具有子字段的字段（具有不同的格式）
2.  2号字段为可变字段（如上），前两个字符（charlength属性）表示字段的长度
3.  字段 3 为固定字段，共 4 个字符。
4.  字段 21 是具有子字段（固定和可变）的字段，其中前两个字符（charlength）表示字段的字符数
    *   所有固定的（子字段）首先出现，然后是可变子字段
    *   这里的子字段，总是以 idcode 开头（对于 21 的子，它是 ABC），然后是字符长度（charlength 属性），然后是子字段。字符的长度也可以为 0
    *   所有固定和可变字段都出现，长度为 0 表示没有子字段（上点）
5.  字段 63 是具有子字段的字段（具有不同的格式），根据字段的长度（charlength 属性），可能有不同的格式
    *   对于字段63，如果长度为03（前两个字符，charlenghth属性），则为格式1。如果为10，则为格式2，如果为16，则为格式3

我想要的输出xml

```
<Root>
  <field2>3</field2>
  <!--value is 3 as the charlength is 2(which is 01)-->
  <field3>1123</field3>
  <!--field3 value is 1123 as it is fixed, total length of 4-->
  <field21>
    <subfield1>145</subfield1>
    <!--subfield1 should be 145 as it is fixed length of total 3 chars-->
    <subfield2>12345678</subfield2>
    <!--sufield2 starts with 'ABC', has length 08 chars-->
  </field21>
</Root> 
```

* * *

肖恩编辑。

## 分解

这是输入和输出之间映射的分解。

这是我们的字符串变量 $inputstring 的图片

```
'013112316145ABC0812345678' 
```

根据字段定义，这分为 3 个字段...

```
013    -      1123  -  16145ABC0812345678
 |              |              v  
 v              v           field 21
field2        field3 
```

让我们分解字段 2：

```
 01    3
  |    v
  |   payload for field 2\. This is output
  v
Contains the length(1) of the payload, which in this case is '01' = 1
This length of this 'header' is given by mapping Root/field[@no="2"]/@charlength
The "2" in this expression comes from the input document node at Root/element . 
```

让我们分解字段 21：

```
16   145   ABC0812345678
 |    |       v
 |    |     subfield 2
 |    \ subfield 1
  \
   v
   Header for field 2\. Says that the total field 2 length (header + subfield 1 +
subfield 2 consists of 16 characters. The length for this header was derived from
the mapping node at Root/field[@no="21"]/@charlength . 
```

最后一个例子：字段 21/子字段 2 的分解。这是子字段 2 的图片

```
ABC   08   12345678
 |     |     |
 |     |     v
 |     |    This is the payload. It is output as the text node child of output
 |     |      subfield 2
 |     v
 v    Length of the following payload
 Signature. The length and value is equal to the mapping node
   Root/field[@no="21"]/subfield[@no="2"]/@idcode 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T17:59:20.927

嗯......我说我不会这样做，但我还是做了。

## 注意事项

1.  规则 5（具有多种格式的复合字段）未实施。这工作量太大了，所以我把规则 5 的完成留给你。
2.  我在 www.xmlper.com 上进行了测试，所以我使用了 msxsl:node-set()。如果不使用 MS，您可能需要针对您的 XSLT 引擎稍作调整。
3.  有了这么多的字符串处理，您应该认真考虑升级到 XSLT 2.0。

## 样式表

这个 XSLT 1.0 样式表...

```
<xsl:stylesheet version="1.0"
   exclude-result-prefixes="xsl so msxsl"
   xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
   xmlns:so="http://stackoverflow.com/questions/12035679"
   xmlns:msxsl="urn:schemas-microsoft-com:xslt">
    <xsl:output method="xml" indent="yes" />
    <xsl:strip-space elements="*" />

    <xsl:variable name="inputstring" select="'013112316145ABC0812345678'" />

    <xsl:variable name="map">
        <so:mapping>
            <field no="2" charlength="2">variable</field>
            <field no="3" total="4">fixed</field>
            <field no="21" charlength="2">
                <subfield no="1" total="3">fixed</subfield>
                <subfield no="2" charlength="2" idcode="ABC">variable</subfield>
            </field>
        </so:mapping>
    </xsl:variable>

    <xsl:template match="/*">
        <xsl:copy>
            <xsl:call-template name="process-fields">
                <xsl:with-param name="element-stack" select="element" />
                <xsl:with-param name="code" select="$inputstring" />
            </xsl:call-template>
        </xsl:copy>
    </xsl:template>

    <xsl:template name="process-fields">
        <xsl:param name="element-stack" />
        <xsl:param name="code" />
        <xsl:if test="($code != '') and $element-stack">
            <xsl:variable name="field-no" select="
              substring-after($element-stack[1],'field')" />
            <xsl:variable name="field-parse-request">
                <so:field-parse-request code="{$code}">
                    <xsl:copy-of select="msxsl:node-set($map)/so:mapping/
                       field [@no=$field-no]" />
                </so:field-parse-request>
            </xsl:variable>
            <xsl:variable name="field-parse-result">
                <xsl:apply-templates
                    select="msxsl:node-set($field-parse-request)/*"
                    mode="field-parse" />
            </xsl:variable>
            <xsl:apply-templates
                   select="msxsl:node-set($field-parse-result)/so:output/*"
                   mode="remove-namespaces" />
            <xsl:call-template name="process-fields">
                <xsl:with-param name="element-stack"
                   select="$element-stack[position() &gt; 1]" />
                <xsl:with-param name="code"
                   select="msxsl:node-set($field-parse-result)/
                           so:output[1]/@code" />
            </xsl:call-template>
        </xsl:if>
    </xsl:template>

    <xsl:template match="so:field-parse-request[field[subfield]]"
                     mode="field-parse">
        <so:output>
            <xsl:variable name="header"
                  select="substring(@code,1,field/@charlength)" />
            <xsl:attribute name="code">
                <xsl:value-of
                   select="substring(@code,1+field/@charlength+$header)" />
            </xsl:attribute>
            <xsl:element name="field{field/@no}">
                <xsl:call-template name="process-subfields">
                    <xsl:with-param name="subfield-stack" select="field/subfield" />
                    <xsl:with-param
                      name="code"
                      select="substring(@code,1+field/@charlength,$header)" />
                </xsl:call-template>
            </xsl:element>
        </so:output>
    </xsl:template>

    <xsl:template match="so:field-parse-request[field[.='variable']]"
             mode="field-parse">
        <so:output>
            <xsl:variable name="header"
                   select="substring(@code,1,field/@charlength)" />
            <xsl:attribute name="code">
                <xsl:value-of select="substring(@code,1+field/@charlength+$header)" />
            </xsl:attribute>
            <xsl:element name="field{field/@no}">
                <xsl:value-of select="substring(@code,1+field/@charlength,$header)" />
            </xsl:element>
        </so:output>
    </xsl:template>

    <xsl:template match="so:field-parse-request[subfield[.='variable']]"
            mode="field-parse">
        <so:output>
            <xsl:variable name="header"
               select="substring( @code,
                                  1 + string-length( subfield/@idcode),
                                  subfield/@charlength)" />
            <xsl:attribute name="code">
                <xsl:value-of select="substring(
                     @code,
                     1 + string-length( subfield/@idcode) +
                         subfield/@charlength + $header)" />
            </xsl:attribute>
            <xsl:element name="subfield{subfield/@no}">
                <xsl:value-of select="
                   substring( @code, 
                     1 + string-length( subfield/@idcode) +
                       subfield/@charlength, $header)" />
            </xsl:element>
        </so:output>
    </xsl:template>

    <xsl:template match="so:field-parse-request[ field[.='fixed']] | so:field-parse-request[subfield[.='fixed']]" mode="field-parse">
        <so:output>
            <xsl:attribute name="code">
                <xsl:value-of select="substring(@code, (field/@total | subfield/@total) + 1)" />
            </xsl:attribute>
            <xsl:element name="{concat( name(field|subfield) ,field/@no | subfield/@no)}">
                <xsl:value-of select="substring(@code,1,field/@total | subfield/@total)" />
            </xsl:element>
        </so:output>
    </xsl:template>

    <xsl:template name="process-subfields">
        <xsl:param name="subfield-stack" />
        <xsl:param name="code" />
        <xsl:if test="($code != '') and $subfield-stack">
            <xsl:variable name="active-subfield-index">
                <xsl:choose>
                    <xsl:when test="not( $subfield-stack[1]/@idcode)">1</xsl:when>
                    <xsl:otherwise>
                        <xsl:value-of select="
                           count($subfield-stack
                            [starts-with($code,@idcode)]/preceding-sibling::*)+1" />
                    </xsl:otherwise>
                </xsl:choose>
            </xsl:variable>
            <xsl:variable name="field-parse-request">
                <so:field-parse-request code="{$code}">
                    <xsl:copy-of select="$subfield-stack[$active-subfield-index]" />
                </so:field-parse-request>
            </xsl:variable>
            <xsl:variable name="field-parse-result">
                <xsl:apply-templates
                  select="msxsl:node-set($field-parse-request)/*"
                  mode="field-parse" />
            </xsl:variable>
            <xsl:apply-templates
                select="msxsl:node-set($field-parse-result)/so:output/*"
                mode="remove-namespaces" />
            <xsl:call-template name="process-subfields">
                <xsl:with-param name="subfield-stack"
                  select="$subfield-stack[position() != $active-subfield-index]" />
                <xsl:with-param name="code"
                   select="msxsl:node-set($field-parse-result)/ 
                           so:output[1]/@code" />
            </xsl:call-template>
        </xsl:if>
    </xsl:template>

    <xsl:template match="*" mode="remove-namespaces">
        <xsl:element name="{local-name(.)}">
            <xsl:apply-templates select="@*|node()" mode="remove-namespaces" />
        </xsl:element>
    </xsl:template>

    <xsl:template match="@*|text()" mode="remove-namespaces">
        <xsl:copy />
    </xsl:template>

</xsl:stylesheet> 
```

## 输入

...将采用此输入文档...

```
<Root>
  <element>field2</element>
  <element>field3</element>
  <element>field21</element>
</Root> 
```

## 输出

...并根据除规则 5 之外的所有规定规则对其进行转换，并产生此输出...

```
<Root>
  <field2>3</field2>
  <field3>1123</field3>
  <field21>
    <subfield1>145</subfield1>
    <subfield2>12345678</subfield2>
  </field21>
</Root> 
```

# jquery - 需要一些关于 jQuery 轮播的输入

> ID：12035680
> 
> 赞同：0
> 
> 时间：2012-08-20T10:02:06.927
> 
> 标签：jquery

我正在制作一个 jquery 轮播，我让左/右滚动按预期工作。

但我还需要一个列表导航，每张幻灯片都带有 schortcuts，但我不能让它像我喜欢的那样工作。

我的想法是使用 index() 查找元素位置，然后按宽度 * 位置滚动到元素，但它不起作用。每次点击它都会返回不同的值。

此外，我需要找到一些智能解决方案，它应该滚动到哪个方向。

作为奖励，有没有人有一个优雅的解决方案来防止用户连续多次快速点击？然后它会连续滚动。如果只有 3 张幻灯片，则会出现空白。尝试使用 stop() 没有运气：/

我的代码在这里

[http://jsfiddle.net/n8mEV/1/](http://jsfiddle.net/n8mEV/1/)

非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T10:19:29.060

您可以设置一个变量来防止垃圾点击。前任 ：

```
var inAnimation = false;
$('.thumbnail-carousel-nav li').click(function(){
    if (inAnimation) return false;
    inAnimation = true;
/* More code */
 $(current_carousel).animate({'left' : left_indent},500,function(){    
            inAnimation = false;
/* ... */ 
```

为防止向后/下一页滚动出现空白页，您必须复制第一项和最后一项，并分别将它们附加并添加到您的列表中，例如：

```
<li>4th Item</li>

<li>1st Item</li>
<li>2nd Item</li>
<li>3rd Item</li>
<li>4th Item</li>

<li>1st Item</li> 
```

这是仅显示一张图片的代码。

# c# - 如何删除重定向 URL 中的 cookie、会话 ID？

> ID：12035685
> 
> 赞同：0
> 
> 时间：2012-08-20T10:02:31.103
> 
> 标签：c#, httpwebrequest, httpwebresponse, http-redirect

我通过`HttpWebRequest()`和`HttpWebResponse()`方法传递了一个链接，我得到了最终的响应 url，其中包含一些 cookie（会话 id）。

例如，对于这个链接[http://www.1and1.com/](http://www.1and1.com/)

我收到以下响应网址： [http ://www.1and1.com/;jsessionid=D94CEA91011FDF30CCA8A8EAC8CE4971.TCpfix243a](http://www.1and1.com/;jsessionid=D94CEA91011FDF30CCA8A8EAC8CE4971.TCpfix243a)

当我在浏览器中打开[http://www.1and1.com/](http://www.1and1.com/)时，浏览器地址栏中的链接不包含此会话 id 值。

如何从上述响应 url 中删除会话 id 和 cookie 值？

请帮我搞定这个，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T10:42:47.143

您需要在 web.config 中适当地配置 section的`cookieless`属性。`sesseionState`根据[MSDN](http://msdn.microsoft.com/en-us/library/system.web.configuration.sessionstatesection.cookieless.aspx)：

> 对于允许不支持 cookie 的客户端的应用程序，例如各种移动设备，会话 ID 可能存储在 URL 中。URL 选项有几个缺点。它要求站点上的链接是相对的，并且在会话开始时使用新的查询字符串值重定向页面，并且它在查询字符串中公开会话 ID，可以在其中提取它以用于安全攻击。
> 
> 仅当您需要支持缺少 cookie 支持的客户端时，我们才鼓励您使用 cookieless 模式。
> 
> 会话状态还支持两个附加选项：UseDeviceProfile 和 AutoDetect。前者使会话状态模块能够根据浏览器功能确定每个客户端使用哪种模式（cookie 或无cookie）。AutoDetect 选项与浏览器进行握手以验证是否可以存储 cookie，因此需要额外的请求来做出确定。如果您需要支持无 cookie 客户端，强烈考虑使用 UseDeviceProfile 仅为需要它们的客户端生成无 cookie URL。

# google-app-engine - 如何在 appengine 中确定我的应用程序版本

> ID：12035686
> 
> 赞同：1
> 
> 时间：2012-08-20T10:02:30.907
> 
> 标签：google-app-engine

我有一个在 appengine 中运行的应用程序。是否有 API 以编程方式确定我的应用程序版本？具体来说，我想查询 app.yaml 文件中的 version: 属性。

汉斯然后

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T11:21:56.937

既然你提到`app.yaml`了，假设你正在使用 Python 似乎是公平的。当前版本的详细信息可作为环境变量使用：

```
os.environ['CURRENT_VERSION_ID'] 
```

请参阅[运行时环境文档](https://developers.google.com/appengine/docs/python/runtime#The_Environment)。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-20T11:06:43.140

（编辑：我不知道'app.yaml'只是PYTHON，那么你可以丢弃我的anwser，因为它是为JAVA ^^）

在**java**中，有一种方法可以获取当前应用程序的版本，那是您要找的吗？

```
com.google.gwt.core.client.GWT //or
com.google.gwt.core.shared.GWT

string version = GWT.getVersion(); 
```

# java - finally 块对于清理代码（如关闭流）真的有必要吗？

> ID：12035688
> 
> 赞同：8
> 
> 时间：2012-08-20T10:02:47.453
> 
> 标签：java, exception-handling, try-catch-finally

我很困惑为什么我需要将清理代码（如关闭流）放在一个`finally`块中。

我读过`finally`block中的代码无论如何都会运行（是否有异常）；并且在`finally`块运行之后，该方法的其余部分将继续。

我的问题是：如果该方法的其余部分必须继续，那么为什么不将清理代码放在函数中的 try/catch 块之后？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-20T10:09:27.533

> 我的问题是；如果该方法的其余部分必须继续，那么为什么我不在函数中的 try/catch 块之后放置清理代码。

基本上，像这样：

```
InputStream is = ...
try {
   // use stream
} catch (IOException ex) {
   // report / recover
}
is.close(); 
```

但是如果该`// use stream`部分抛出不同的（例如未经检查的）异常会发生什么？还是`// report / recover`代码？在任何一种情况下，`close()`呼叫都不会发生。（如果这些块中有`break`or`return`语句怎么办？）

理论上是可以这样实现的。问题是确保代码总是（即总是）运行。如果不捕获一大堆您不应该捕获的异常，就很难做到这一点......而且如果您确实捕获，将无法正确处理。

总而言之，`finally`是更好的解决方案。

*   它比您正确处理这种情况所需的卷积更简单，并且
*   它比典型的三心二意的尝试更可靠。

如果您可以使用`finally`自动处理的新 Java 7“资源尝试”形式，它会更简单/更可靠。

* * *

我要补充一点，您对何时`finally`执行该子句的描述有点不准确。实际上，`finally`无论 try 块如何终止，都会执行该块，包括：

*   当`try`方块从末端掉落时，
*   当它抛出异常时......不管异常是否在这个级别被捕获，或者
*   当它执行`return`,`continue`或`break`.

事实上，块不执行的*唯一*情况是块调用或 JVM 崩溃。（或者如果它进入一个无限循环......）`finally``try``System.exit()`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-20T10:06:59.487

如果您遇到意外的异常（未捕获和处理）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-20T10:07:40.807

如果抛出未捕获的异常，finally 块将始终运行，但方法中的其余代码将被跳过。

所以如果你把清理代码放在 finally 块之后，如果有异常就不会被调用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-20T10:07:37.200

> 在 finally 块运行后，该方法的其余部分继续

这仅在没有捕获异常时才成立。如果 try 块内发生异常，将执行 catch 块（如果有此异常），将执行 finally 块，然后如果 catch 块进一步抛出异常，则将控制权交给方法的调用者，*而无需*在此方法中运行任何进一步的代码。

编辑：澄清 catch 当然必须返回，而不仅仅是吃异常。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-20T10:08:32.373

如果`Exception`发生了，即执行了try块，那么放心，该`finally`块也会被执行。这只是一个保障选项，而不是假设该方法的其余部分将被执行。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-20T10:09:19.103

> 如果该方法的其余部分必须继续，那么为什么我不在函数中的 try/catch 块之后放置清理代码。

因为您的代码清理与您`try`执行尝试打开资源等的操作有关，所以从逻辑上讲，它应该作为`final`子句的一部分，因为它是与您的`try`.
例如，由于在返回之前必须进行一些处理，因此在 100 行之后关闭文件或连接是没有意义的。
你得到了结果。也不例外，释放资源。最好这样做，`finally`以便您的代码更干净，因为它总是被执行

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-20T10:08:50.820

> 我的问题是；如果该方法的其余部分必须继续，那么为什么不将干净的代码放在函数中的 try/catch 块之后。

您可以这样做，但您必须通过传递需要关闭的对象引用（非 java 资源）在 finally 块中再次调用此函数。因为如果这个函数不是 finally 块并且如果发生任何异常，您的整个方法将被跳过而不关闭非 Java 资源。

您也可以使用 java7 功能 -> [try-catch with resources](http://www.javacodegeeks.com/2011/07/java-7-try-with-resources-explained.html)。非java资源会自动关闭。您不需要使用 finally 块。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-08-20T10:11:05.507

可能这里有轻微的误会（或者这是我自己误会了）。无论方法是否在异常情况下退出，都会运行 finally 块，例如

```
 try {
      throw new Exception();
 }
 finally {
      // Block of code will be called before the method exits as exception is thrown
 } 
```

请注意，此规则几乎没有例外，例如：

```
 try {
      System.exit(-1);
 }
 finally {
      // Block of code will be called before the method exits as exception is thrown
 } 
```

这是一个（非常危险的）情况，程序将退出*而不*执行 finally 块。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-08-20T10:35:36.747

finally 块对人和编译器一样好。

不仅要注意编译器，还要注意将阅读您的代码的人。如果清理部分在 finally 块中，那么编辑代码会容易得多。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-08-20T11:04:31.020

最后 Block 将 100% 确定执行 try/catch 将完全执行或不执行。

因此，如果您想释放系统资源，请在 finally 块中编写代码。并返回方法的语句。

# .htaccess - htaccess 子域？

> ID：12035693
> 
> 赞同：0
> 
> 时间：2012-08-20T10:03:10.557
> 
> 标签：.htaccess, subdomain

我想知道是否可以仅使用 htaccess 代码创建子域，（没有在主机控制面板中设置一个）

我有一个名为“mobile”的文件夹，它的位置是这样的：http: [//www.domain.com/mobile](http://www.domain.com/mobile)

我希望能够进入[http://mobile.domain.com](http://mobile.domain.com)并看到移动文件夹，这是否可以仅通过在 htaccess 中编写一些代码来实现？如果是这样，我该怎么做？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T10:12:37.117

只要将其配置为处理对`*.domain.com`域的所有请求，您就可以执行此操作，然后只需确保您已将`mobile.domain.com`'DNS CNAME'ed 设置为`www.domain.com`.

如果你知道你想要什么子域，你可以像这样枚举它们（将这些规则放在文档根目录的 htaccess 文件中）：

```
RewriteEngine On
RewriteCond %{HTTP_HOST} !^(www\.) [NC]
RewriteCond %{HTTP_HOST} ^mobile\.domain\.com$ [NC]
RewriteCond %{REQUEST_URI} !^/mobile/
RewriteCond %{DOCUMENT_ROOT}/mobile%{REQUEST_URI} -f [OR]
RewriteCond %{DOCUMENT_ROOT}/mobile%{REQUEST_URI} -d
RewriteRule ^(.*)$ /mobile/$1 [L] 
```

否则，如果您想任意执行此操作，它会变得有点复杂：

```
RewriteEngine On
RewriteCond %{HTTP_HOST} !^(www\.) [NC]
RewriteCond %{HTTP_HOST} ^(.+)\.domain\.com$ [NC]
RewriteCond %1:%{REQUEST_URI} !^([^:]+):/\1/
RewriteCond %{HTTP_HOST} ^(.+)\.domain\.com$ [NC]
RewriteCond %{DOCUMENT_ROOT}/%1%{REQUEST_URI} -f [OR]
RewriteCond %{DOCUMENT_ROOT}/%1%{REQUEST_URI} -d
RewriteRule ^(.*)$ /%1/$1 [L] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T10:06:51.243

取决于您的域的配置。

如果您使用通配符设置它们`ServerAlias`，如下所示：

```
ServerName example.com
ServerAlias *.example.com

DocumentRoot /var/www/example.com/ 
```

该请求将落在文件夹中，`.htaccess`并将被评估，使您能够使用 mod_rewrite。但是，如果您不指定`ServerAlias`指令，则请求将永远不会到达该文件夹，因此您将无法对其进行任何操作。

# ios - 使所有内容变暗，但选定的行 ios

> ID：12035695
> 
> 赞同：1
> 
> 时间：2012-08-20T10:03:22.600
> 
> 标签：ios, uitableview

当一个被选中时，我怎么能轻松地使互补的一组行变暗。

现在我有选择一个单元格的代码，所以我可以在它上面调用一个方法，但我想设置所有其他行的不透明度。

```
-(void)tableView:(UITableView *)tableView
didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
    SummaryCell * selectedCell = [tableView cellForRowAtIndexPath:indexPath];
    [selectedCell manageContent];
} 
```

编辑：我不想遍历所有其他单元格（因为会有很多） - 在所有其他单元格上方添加 UIView 会不会更容易（这也会阻止用户交互）并放置选定的单元格在该视图上方（类似于在 HTML 中增加 z-index）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T10:13:40.393

这取决于您所说的“暗淡”其他行是什么意思。遍历所有可见行并在除所选行之外的所有行上设置属性的过程如下：-

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
    for (UITableViewCell *otherCell in self.tableView.visibleCells) {
        NSIndexPath *otherIndexPath = [self.tableView indexPathForCell:otherCell];
        if (![indexPath isEqual:otherIndexPath]) { // exclude the selected cell
            // Do whatever you want with otherCell here
        }
    }
} 
```

我的评论在哪里，你可以设置你喜欢的任何属性`otherCell`。例如，`otherCell.alpha`这是该单元格的 alpha（透明度）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T10:06:43.117

您可以迭代所有可见单元格，将它们配置为变暗，然后在数据源 cellForIndex 方法上检查是否有选定的单元格，如果有，检查它是否在要求的索引处，如果有，将单元格配置为选中，如果没有变暗。

# regex - 用于文件名的 IIS 7.0 重写模块

> ID：12035701
> 
> 赞同：1
> 
> 时间：2012-08-20T10:03:43.540
> 
> 标签：regex, iis, mod-rewrite, iis-7, url-rewriting

我有一个网站，其中包含许多指向 *.index.html 页面的链接，这些页面不再存在，所有默认文档现在都已更改为 index.htm，我正在尝试将 URL 重定向/重写设置为新页面但没有幸运的是，这是一个例子：

```
http://example.com/somedirectory/maybeanotherdirectory/index.html 
```

我需要将该请求重定向到：

```
http://example.com/somedirectory/maybeanotherdirectory/index.htm 
```

我在 web.config 中添加了不同的规则，但到目前为止我只能重定向到：

```
http://example.com/index.htm 
```

如何在仅将 index.html 更改为 index.htm 的同时维持确切的路径？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-12-04T16:05:07.643

这么老的问题，我偶然发现它纯粹是偶然的。如果有人在寻找答案时遇到它，您可以安装[IIS URL ReWrite](https://www.iis.net/downloads/microsoft/url-rewrite)模块，并将以下内容添加到您的 web.config：

```
 <rewrite>
        <rules>
            <rule name="Html to htm">
                <match url="(.*)\.html" />
                <action type="Rewrite" url="{R:1}.htm" />
            </rule>
        </rules>
    </rewrite> 
```

干杯!

# java - 夹在“行长于 80 个字符”和“文件包含制表符”之间

> ID：12035702
> 
> 赞同：1
> 
> 时间：2012-08-20T10:03:45.803
> 
> 标签：java, checkstyle

我已经在我的 Eclipse 中安装了最新版本的 Checkstyle。问题是这样的：如果我将 Tab 策略设置为“Tabs”，我会得到所有“文件包含制表符”错误。如果我将 Formatter 中的 Tab 策略设置为“仅限空格”，我将摆脱“文件包含制表符”检查样式错误但我得到很多“行超过 80 个字符错误”，即使它们没有意义，在我的观点。例如：

```
FulltimeEmployee a = new FulltimeEmployee(
                         parsedLine[READ_LINE_FIRST_PARAMETER],     
                         parsedLine[READ_LINE_SECOND_PARAMETER],
                         Integer.decode(parsedLine[2].trim())); 
```

现在，所有这些行实际上都有大约 40 个“有用”字符。其余的来自缩进。我不知道如何进一步分解这些行以符合 80 规则。我应该将缩进大小设置为小于 4 个空格吗？我想过简化我的代码以不那么深缩进，但我不明白如何。请参阅下面的更多代码清单，也许您可​​以建议我如何减少缩进。即使是这种情况，我原来的问题仍然存在。方法前面的第一个缩进来自类。

```
public void populateList() {
     String[] parsedLine = new String[NUMBER_OF_PARAMETERS];
     try {
          FileInputStream fstream = new FileInputStream(Company.fileName);
          DataInputStream in = new DataInputStream(fstream);
          BufferedReader br = new BufferedReader(new InputStreamReader(in));
          String readLine;
          while ((readLine = br.readLine()) != null) {
               parsedLine = readLine.split(", ");
               if (parsedLine.length != NUMBER_OF_PARAMETERS) {
                    System.out.println("Format error");
               } else {
                    switch (parsedLine[READ_LINE_THIRD_PARAMETER]) {
                    case "full-time":
                         FulltimeEmployee a = new FulltimeEmployee(
                              parsedLine[READ_LINE_FIRST_PARAMETER],
                              parsedLine[READ_LINE_SECOND_PARAMETER],
                              Integer.decode(parsedLine[2].trim()));
                         this.employeeList.add(a);
//more code here 
```

有什么建议么？我想了很久，搜索了很多，但不知所措。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T04:45:08.553

使用限制 - 一行 120 个符号。Checkstyle 应该可以帮助您的团队以更统一的方式工作，但要让您受苦，请根据您的需要进行调整！现在我们有了大屏幕，这条规则已经过时了。

为了让线条长度更加轻松，您可以尝试我们对 checkstyle 的扩展，搜索 LineLengthExtendedCheck [。](http://sevntu-checkstyle.github.com/sevntu.checkstyle/)

# android - XML 格式不正确 Android 不断出现

> ID：12035703
> 
> 赞同：0
> 
> 时间：2012-08-20T10:03:48.157
> 
> 标签：android, xml, well-formed

我刚刚下载的应用程序中有一个 XML 文件，eclipse 一直告诉我它的格式不正确。我看不出语法有任何问题（我什至用 xml 验证器 w3schools 检查了它，它也找不到任何错误。

非常感谢您，这是文件：

```
<?xml version="1.0" encoding="utf-8"?>
<!-- Copyright (C) 2010 The Android Open Source Project

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
 -->

<PreferenceScreen
xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:settings="http://schemas.android.com/apk/res/com.android.settings"
android:title="@string/dock_settings_title"
android:key="parent">

<!-- 
<PreferenceScreen
    android:key="dock_audio"
    android:title="@string/dock_audio_settings_title"
    android:summary="@string/dock_settings_summary"
   android:widgetLayout="@*android:layout /preference_dialog" />

<CheckBoxPreference
    android:key="dock_sounds"
    android:title="@string/dock_sounds_enable_title"
    android:summaryOn="@string/dock_sounds_enable_summary_on"
    android:summaryOff="@string/dock_sounds_enable_summary_off"
    android:defaultValue="false" />
    -->

</PreferenceScreen> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T10:09:37.193

在您`PreferenceScreen`之前关闭的评论代码中`CheckBoxPreference`

```
<?xml version="1.0" encoding="utf-8"?>
<PreferenceScreen xmlns:android="http://schemas.android.com/apk/res/android">
        <PreferenceCategory
                android:title="First Category">
                <CheckBoxPreference
                        android:title="Checkbox Preference"
                        android:defaultValue="false"
                        android:summary="This preference can be true or false"
                        android:key="checkboxPref" />
                <ListPreference
                        android:title="List Preference"
                        android:summary="This preference allows to select an item in a array"
                        android:key="listPref"
                        android:defaultValue="digiGreen"
                        android:entries="@array/listArray"
                        android:entryValues="@array/listValues" />
        </PreferenceCategory>

</PreferenceScreen> 
```

看看这个链接。[http://www.kaloer.com/android-preferences](http://www.kaloer.com/android-preferences)

# java - 如何将方法标记为“之后，参数 X 不能为空”？

> ID：12035715
> 
> 赞同：2
> 
> 时间：2012-08-20T10:04:23.333
> 
> 标签：java, nullable, findbugs, notnull

我有这个方法：

```
 @Override
 public void foo( @Nullable Bar bar ) {
     Validate.notNull( bar, "bar is null" );
     bar.x();
 } 
```

由于该方法是在其他地方定义的，我不能`bar`用`@NotNull`. 调用`Validate.notNull()`将确保它`bar`不为空，但当然 FindBugs 和类似工具对此约束一无所知。

有没有一种简单的方法来教 FindBugs 在调用 之后`Validate.notNull()`不能`bar`为空？

简单，我的意思是我必须在一个地方定义它的方式；当然，我可以在我的代码中撒上数百万`@SuppressWarnings`...... :-)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T23:12:16.370

更改 Validate.notNull 以返回引用，将其返回值标记为`@NotNull`：

```
@NotNull
public static <T> T notNull(@Nullable T reference, String message) {
    if (reference == null) {
        throw new NullPointerException(message);
    }
    return reference;
} 
```

然后使用 notNull 调用的结果代替原来的参数值：

```
public void foo(@Nullable Bar bar) {
    bar = Validate.notNull(bar, "bar is null");
    bar.x();
} 
```

# prestashop - prestashop 中的 ebs 或 CCavenue 支付网关集成

> ID：12035716
> 
> 赞同：0
> 
> 时间：2012-08-20T10:04:24.243
> 
> 标签：prestashop, payment-gateway, payment-processing, ccavenue

我对 PHP 很陌生。我从 prestashop 下载了软件并开发了我的网站。是否可以集成 EBS 或 CCavenue 的支付网关？因为我想在我的 prestashop 网站中使用其中的任何一个。我只找到了与 PayPal 相关的帖子。

请让我知道可能性。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T19:18:38.440

EBS 集成对于 prestashop 来说非常简单。获得 EBS 帐户后，转到下载部分，您可以在那里获得用于 prestashop 的 EBS 模块。下载它，解压缩并将名为“EBS”的文件夹复制到您的模块目录。

发布此内容，您可以在管理员中看到 EBS 作为可用模块。安装它，并在配置部分添加凭据。您几乎可以立即开始使用 TEST 模式。祝你的网站好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-17T18:21:27.860

现在有一个现成的 ccavenue prestashop 模块，可以与旧版本和最新版本的 Prestashop 一起使用。你可以在这里下载这个[http://addons.prestashop.com/en/payments-gateways-prestashop-modules/21391-ccavenue.html](http://addons.prestashop.com/en/payments-gateways-prestashop-modules/21391-ccavenue.html)

# php - 将 jquery 自动完成代码片段移动到 script.js 文件

> ID：12035717
> 
> 赞同：0
> 
> 时间：2012-08-20T10:04:25.480
> 
> 标签：php, javascript, autocomplete

我试图通过将我的 jquery 自动完成代码移动到 scripts.js 文件来保持 DRY 原则，但是当我移动它时我无法让自动完成功能正常工作。

这是它目前的设置方式。

**添加表格**

```
 <head>
    <?php
     require_once ('includes/connect-db.php');
     require_once ('includes/functions.php');
    ?>
        <link href="css/jquery-ui-1.8.21.custom.css" rel="stylesheet" type="text/css">
        <script type="text/javascript" src="includes/js/jquery-ui-1.8.21.custom.min.js"></script>
        <script type="text/javascript">

        $('document').ready(function() {
            $('#datepickerID').datepicker({
                changeYear:true,
                changeMonth:true,
                dateFormat:'yy-mm-dd'
            })

        <?php $productArray = autoComplete();?>

        $(function() {

                var js_products_array = <?php echo json_encode($productArray); ?>;

                $( "#autocompleteID" ).autocomplete({
                    source: js_products_array
                 });
            });

        });

        </script>
</head> 
```

当javascript中嵌入了php代码时，我不确定如何在addForm.php和scripts.js之间工作，如果这有意义的话。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T10:10:08.743

您将不得不保留`js_products_array`在`.js`文件之外，因为它包含来自 PHP 脚本的数据并`autocomplete()`准备好启动文档。

所以你只能保留

```
<?php $productArray = autoComplete();?>
<script type="text/javascript">
    var js_products_array = <?php echo json_encode($productArray); ?>;
</script> 
```

在你的`file.js`你可以添加

```
 $('document').ready(function() {
     $('#datepickerID').datepicker({
           changeYear:true,
           changeMonth:true,
           dateFormat:'yy-mm-dd'
     })

     $( "#autocompleteID" ).autocomplete({
           source: js_products_array
     });
 }); 
```

# c# - 加载页面后立即进行 Windows Phone 导航

> ID：12035720
> 
> 赞同：0
> 
> 时间：2012-08-20T10:04:32.977
> 
> 标签：c#, windows-phone-7, isolatedstorage, navigationservice

我有 2 页。(MainPage.xaml,second.xaml) MainPage.xaml 是登录页面。在此页面中，我发送登录名和密码，并接收结果。我将它们（结果）保存在隔离存储中并导航到 second.xaml 页面；当我下次启动此应用程序时，我从隔离存储中提取数据，我想立即导航 second.xaml，但我不知道如何

我试着写

```
public MainPage()
    {
        InitializeComponent();

       //function for Isolate storage
        InitializeSettings();
        NavigationService.Navigate(new Uri("/Conversation.xaml", UriKind.Relative));
    } 
```

但它不起作用）我知道我无法使用与 MainPage() 构造函数关联的导航代码。当然，我可能会做简单的按钮，但我希​​望快速导航

我认为可能与 App.xaml 方法有关

```
private void Application_Launching(object sender, LaunchingEventArgs e) 
```

比如写我的方法

```
 //function for Isolate storage
        InitializeSettings(); 
```

有导航吗？（导航在这个例子中不起作用）

```
private void Application_Launching(object sender, LaunchingEventArgs e)
{
InitializeSettings();
 NavigationService.Navigate(new Uri("/Conversation.xaml", UriKind.Relative));
} 
```

我可以在哪里使用导航，所以直接进入 second.xaml 页面，无需完全加载 MainPage.xaml（可能没有 MainPage.xaml）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T10:38:37.030

你可以按照 Rana Tallal 说的去做。

或者你可以用代码编写它：

```
public MainPage()
{
    InitializeComponent();

    Loaded += (s, e) =>
    {
        InitializeSettings();

        // Some login-password check condition
        if (_login && _password)
            NavigationService.Navigate(new Uri("/Conversation.xaml",
                                               UriKind.Relative));
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T10:22:26.710

好吧，创建一个新功能......并在其中执行您希望它导航的检查，如果检查正常，则调用导航服务 navigationservice.navigate(....) 代码。现在您需要告诉程序在主页面完全加载时调用此函数。为此，请在其末尾标记的 mainpage 的 xml 中写入 loaded="function_name" 现在，当页面将被加载时，将调用此函数。如果登录信息存在于隔离存储中，则将调用导航服务，否则将显示主页。

确保将 (object sender, RoutedEventArgs e) 放入函数参数中（因为它是一个事件处理程序）。

# mongodb - Mongoose - 从 DBref 数组和项目本身中删除项目

> ID：12035721
> 
> 赞同：4
> 
> 时间：2012-08-20T10:04:36.147
> 
> 标签：mongodb, express, mongoose

我有一个看起来有点像的模式：

```
var postSchema = new Schema({
   created: { type: Date, default: Date.now },
   updated: { type: Date, default: Date.now },
   comments: { type: [Schema.ObjectId], ref: 'Comment' }
}); 
```

所以我的评论集合是引用我的评论模式/集合的对象 id 的集合。

我需要在查询时删除其中一些，所以我正在尝试这个：

```
var comments = [1, 2, 4];    

Post.update({ _id: post_id}, {'$pullAll': {comments: comments }})
  .exec(function(err) {
     // How to remove documents with 1, 2, 4 ids from a Comment collection properly
}); 
```

执行上面的代码后，我从 Post.comments 中删除了评论 ID，但我还需要从“评论”集合中删除这些评论。我该怎么做？

**编辑：**我怎样才能获得实际上没有被删除的文档的 ID。简单的例子：

```
Post.comments = [1, 2, 3]; 
Post.update({ _id: post_id}, {'$pullAll': {comments: [1,2]}}); 
```

在上面的代码中 Post.comments 只有 1,2,3，但我们试图拉 [1,2]，所以我需要知道 Post.comments 中不存在 id=3 并且我不需要将其从“评论”集合中删除。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T15:44:04.980

您可以使用[findAndModify](http://www.mongodb.org/display/DOCS/findAndModify+Command)命令发出更新并在`value`命令结果的属性中返回原始文档。您应该可以毫无问题地将返回的`comments`字段与`$pullAll`查询中的 ID 进行比较，以辨别实际删除了哪些 ID。

```
$ mongo
MongoDB shell version: 2.2.0-rc1
connecting to: test
> db.posts.drop()
true
> db.posts.insert({ _id: 1, comments: [1,2,3] })
> db.runCommand({
... findAndModify: "posts",
... query: { _id: 1 },
... update: { $pullAll: { comments: [1,2,4] }},
... })
{
    "value" : {
        "_id" : 1,
        "comments" : [
            1,
            2,
            3
        ]
    },
    "lastErrorObject" : {
        "updatedExisting" : true,
        "n" : 1
    },
    "ok" : 1
} 
```

正如 JohnnyHK 在他的回答中提到的那样，最好使用`remove()`查询和`$in`运算符来删除评论文档本身。

注意：我上面的例子使用了 Mongo JS shell。看起来 Mongoose 最近获得了一个辅助方法`findAndModify`（请参阅：[PR #803](https://github.com/LearnBoost/mongoose/pull/803)），尽管如果您使用的版本中没有该数据库命令，您始终可以执行该命令。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T12:30:52.220

为此使用[`$in`](http://www.mongodb.org/display/DOCS/Advanced+Queries#AdvancedQueries-%24in)运算符：

```
var comments = [1, 2, 4];    

Post.update({ _id: post_id}, {'$pullAll': {comments: comments }})
  .exec(function(err) {
    Comment.remove({ _id: { $in: comments }}, function(err, numberRemoved) {
      // The identified comments are now removed.
    });
  });
}); 
```

# entity-framework - Linq - 通过字段的相同值限制结果数

> ID：12035726
> 
> 赞同：0
> 
> 时间：2012-08-20T10:04:49.550
> 
> 标签：entity-framework, c#-4.0, entity-framework-4, linq-to-entities, oracle11g

我在创建 Linq to Entities (Oracle 11g) 请求时遇到问题。这是我有一个三列的表 TREATMENT（简化版）：ID、STATE 和 APPLICATION。这是一个示例：

```
ID  STATE   APPLICATION
1   A       MAJ
2   A       FLUX
3   A       FLUX
4   R       REF
5   A       REF 
```

现在，我的目标是使用这些规则检索数据：

*   状态必须是 A（添加）
*   每个应用程序的行数低于最大值
*   最大值由 State = R 的行数次要（每个应用程序）

示例：如果最大值为 1，我必须检索第 1 行和第 2 行。（无法检索第 5 行，因为已经存在状态为 R 的 REF（第 4 行））

当 R 的数量等于或大于最大值时，我设法检索所有行，但我不知道如何限制我的结果数量以尊重最大值。

这是请求：

```
using (Entities bdd = new Entities())
{
    var treatments = from trt in bdd.TREATMENT
                     let app = from t in bdd.TREATMENT
                               where t.STATE == "R"
                               group t by t.APPLICATION into grouped
                               where grouped.Count() >= maxPerApplication
                               select grouped.Key
                     where trt.STATE == "A" && !app.Contains(trt.APPLICATION)
                     orderby trt.ID
                     select new TreatmentDto()
                     {
                         Id = trt.ID
                     };

    result = treatments.ToList();
} 
```

在 SQL 中，我会使用内部请求和 ROWNUM 来限制结果的数量，但我不知道该怎么做。我看到的唯一解决方案是分两部分进行请求，但我想避免这种情况以保持信息的一致性。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T16:07:09.473

我找到了一个解决方案，不确定它是否是最好的，但它有效：

```
using (Entities bdd = new Entities())
{
    from trt in bdd.TREATMENT
    where trt.STATE == "A" &&
    (from trt2 in bdd.TREATMENT
    where trt2.STATE == "A" && trt2.APPLICATION == trt.APPLICATION && trt2.ID <= trt.ID
    select trt2).Count() <= maxPerApplication - (from appp in bdd.TREATMENT
                                                 where appp.STATE == "R" 
                                                 && appp.APPLICATION.Equals(trt.APPLICATION) 
                                                 select appp).Count()
    select new TreatmentDto()
    {
     Id = trt.ID
    };

    result = treatments.ToList();
} 
```

# iphone - 无法将文件下载到 iPhone 中的应用程序目录

> ID：12035730
> 
> 赞同：0
> 
> 时间：2012-08-20T10:04:57.147
> 
> 标签：iphone, ipad, uiwebview, nsurlrequest, writetofile

我是 iPhone 新手，

我目前正在开发一个 iPhone 应用程序，并希望实现从 url 下载文件的能力。我已经创建了`UIWebView`，当我单击`download`webview 中的链接时，下载将开始，我将该文件保存到文档目录中的指定文件夹中。但我无法看到我下载的文件。

这是我的代码片段，

```
//CAPTURE USER LINK-CLICK in UIwebView.

 - (BOOL)webView:(UIWebView*)webView shouldStartLoadWithRequest:(NSURLRequest*)request navigationType:(UIWebViewNavigationType)navigationType {

         // Create the request.
            NSURLRequest *theRequest=[NSURLRequest requestWithURL:[NSURL URLWithString:DUrl]
                                                      cachePolicy:NSURLRequestUseProtocolCachePolicy
                                                  timeoutInterval:60.0];

            // create the connection with the request and start loading the data
            NSURLConnection *theConnection=[[NSURLConnection alloc] initWithRequest:theRequest delegate:self];
            if (theConnection) {
                // Create the NSMutableData to hold the received data.
                receivedData = [[NSMutableData data] retain];
            } else {
                NSLog(@"Inform the user that the connection failed."); 
            }
  return YES; 
}

- (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response
{
    [receivedData setLength:0];
}

- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data1
{
    [receivedData appendData:data1];
}

- (void)connectionDidFinishLoading:(NSURLConnection *)connection
{
    NSLog(@"Succeeded! Received %d bytes of data",[receivedData length]);

    DirPath=[self MyApplicationDocumentDirectory];
    [receivedData writeToFile:DirPath atomically:YES];

    UIAlertView* Alert = [[UIAlertView alloc] initWithTitle:@"Download Complete !"
                                                         message:nil delegate:nil 
                                               cancelButtonTitle:@"OK"
                                               otherButtonTitles:nil];
    [Alert show];
    [Alert release];

    // release the connection, and the data object
    [connection release];
    [receivedData release];
} 
```

**任何帮助都会得到帮助。**

**编辑：**

```
 BOOL success =[[NSFileManager defaultManager] fileExistsAtPath:MyDirPath];

            if (success) 
            {
                    UIAlertView* innerAlert = [[UIAlertView alloc] initWithTitle:@"Already downloaded."
                                                                         message:@"Do you want to Downlaod again ?" delegate:self 
                                                               cancelButtonTitle:nil
                                                               otherButtonTitles:@"Yes",@"No",nil];
                    [innerAlert show];
                    [innerAlert release];
            } 
```

在哪里写这个条件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T10:29:54.933

**编辑**在写入（保存）下载数据之前检查下载的文件是否已经存在于 doc 目录中，如下所示：

```
 NSArray *dirContents = [[NSFileManager defaultManager] contentsOfDirectoryAtPath:DirPath error:nil];
 BOOL fileExists = NO;
 for(NSString *fileName in dirContents)
 {
   NSString *filePath = [DirPath stringByAppendingPathComponent:fileName];
   NSData *fileData = [NSData dataWithContentsOfFile:filePath];
    if([receivedData isEqualToData:fileData]) //your receivedData here
    {
        fileExists = YES;
    }
 }
 if(fileExists)
 {
   NSLog(@"File exists");
 }
 else
 {
   NSLog(@"File  does not exists");
  } 
```

* * *

你忘记提供用于写入数据的文件名：

```
DirPath=[self MyApplicationDocumentDirectory];
  NSString *filePath = [DirPath stringByAppendingPathComponent:@"yourFileName"];
[receivedData writeToFile:filePath atomically:YES]; 
```

# jms - WSO2 ESB 超过 10 个 JMS 队列不起作用

> ID：12035731
> 
> 赞同：0
> 
> 时间：2012-08-20T10:04:58.077
> 
> 标签：jms, wso2, wso2esb

在使用代理和队列开发 WSO2 流时，我们发现 ActiveMQ 中有超过 10 个队列，一些代理不再从 JMS 获取消息。

我们找到了有关此问题的以下链接，但找不到正确的解决方案：

[http://node2.wso2.org/forum/thread/9516](http://node2.wso2.org/forum/thread/9516)

我必须把提到的参数放在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T10:04:58.077

答案可以在这里找到： [http ://wso2.org/library/articles/2012/06/wso2-esb-example-processing-long-message-backlog](http://wso2.org/library/articles/2012/06/wso2-esb-example-processing-long-message-backlog)

您必须将以下参数添加到 WSO2 的启动脚本中

```
wso2server.bat -Dsnd_t_max=600 -Dsnd_t_core=120 
```

# asp.net - Asp.net 全局输出缓存

> ID：12035734
> 
> 赞同：5
> 
> 时间：2012-08-20T10:05:06.173
> 
> 标签：asp.net, caching, httpmodule, outputcache

最近几天，我在考虑 asp.net 中的输出缓存。在我的任务中，我需要为非常大的项目实现输出缓存。经过数小时的搜索，我没有找到任何示例。

最流行的使用输出缓存的方法是声明式的，在这种情况下，您需要在要缓存的页面上编写类似这样的内容。

但是，如果您需要缓存整个站点，则必须将其写入项目的所有页面或母版页上。这是疯狂。在这种情况下，您不能将所有配置存储在一个地方。所有页面都有他自己的配置..

Global.asax 可以帮助我，但我的网站包含大约 20 个网络项目和约 20 个 global.asax 文件。而且我不想将相同的代码复制到每个项目。

由于这些原因，我决定创建 HTTPModule。在 Init 方法中，我订阅了两个事件：

```
public void Init(HttpApplication app)
{
  app.PreRequestHandlerExecute += new EventHandler(OnApplicationPreRequestHandlerExecute);
  app.PostRequestHandlerExecute += new EventHandler(OnPostRequestHandlerExecute);
} 
```

在方法“OnPostRequestHandlerExecute”中，我为每个新请求设置了输出缓存参数：

```
public void OnPostRequestHandlerExecute(object sender, EventArgs e)
{
  HttpApplication app = (HttpApplication)sender; 
  HttpCachePolicy policy = app.Response.Cache;
  policy.SetCacheability(HttpCacheability.Server);
  policy.SetExpires(app.Context.Timestamp.AddSeconds((double)600));
  policy.SetMaxAge(new TimeSpan(0, 0, 600));
  policy.SetValidUntilExpires(true);
  policy.SetLastModified(app.Context.Timestamp);
  policy.VaryByParams.IgnoreParams = true; 
} 
```

在“OnApplicationPreRequestHandlerExecute”方法中，我将回调方法设置为缓存验证：

```
public void OnApplicationPreRequestHandlerExecute(object sender, EventArgs e)
{
  HttpApplication app = (HttpApplication)sender;
  app.Context.Response.Cache.AddValidationCallback(new HttpCacheValidateHandler(Validate), app);
} 
```

最后一部分 - 回调验证方法：

```
public void Validate(HttpContext context, Object data, ref HttpValidationStatus status)
{
  if (context.Request.QueryString["id"] == "5")
  {
      status = HttpValidationStatus.IgnoreThisRequest;
      context.Response.Cache.AddValidationCallback(new HttpCacheValidateHandler(Validate), "somecustomdata");
  }
  else
  {
      status = HttpValidationStatus.Valid;
  }
} 
```

要附加我的 HttpModule，我以编程方式使用附加方法：

```
[assembly: PreApplicationStartMethod(typeof(OutputCacheModule), "RegisterModule")] 
```

这种方法效果很好，但我想知道还有其他方法可以做到这一点。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T17:31:36.140

尝试查看 IIS 缓存是否满足您的需求。

[http://www.iis.net/configreference/system.webserver/caching](http://www.iis.net/configreference/system.webserver/caching)

# windows - 停止服务不释放它的资源？

> ID：12035740
> 
> 赞同：1
> 
> 时间：2012-08-20T10:06:11.973
> 
> 标签：windows, file, service, locking

我正在尝试将补丁部署到我创建的服务并替换服务文件。出于这个原因，我需要停止服务以便释放文件。我正在使用`sc \\remote stop svcname`，然后我使用 查询服务，`sc \\remote query svcname`直到我看到它的状态为 STOPPED。此时服务文件应该已解锁，为了安全起见，我还使用`sc \\remote delete svcname`.

尽管如此，它似乎并没有释放文件，并且任何删除或更改尝试都失败了。我知道一种解决方案可能会反复轮询文件，但我想避免这种方法。

有什么建议么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-20T10:36:32.627

Windows 不确保提供服务的进程在服务停止时终止（该进程可能提供多个服务）。它只是在处理发送给它的消息时认为服务已停止。

所以如果服务进程有bug，没有正确释放资源，仍然有可能被锁定。我可能会稍等片刻，而不是简单地终止该过程。

微软还有一个名为[handle.exe](http://technet.microsoft.com/en-us/sysinternals/bb896655.aspx)的工具（这是命令行版本，他们也有一个 GUI-one），它可以列出哪些进程保持文件打开。应该可以以编程方式获取相同的信息，但我不确定要进行的确切调用（并且您需要管理员权限；您也必须将它们提供给该工具）。这样，您可以检查文件是否打开，由哪个进程打开，如果您不知道它是哪个进程，则等待它终止或强制终止它。

# php - PHP：HTML以html格式发送电子邮件

> ID：12035742
> 
> 赞同：2
> 
> 时间：2012-08-20T10:06:29.483
> 
> 标签：php, email, html-email

我正在按照教程[http://css-tricks.com/sending-nice-html-email-with-php/](http://css-tricks.com/sending-nice-html-email-with-php/)以 html 格式发送邮件。

我的字符串看起来像

```
$message = '<html><body>';
$message .= '<img src="http://css-tricks.com/examples/WebsiteChangeRequestForm/images/wcrf-header.png" alt="Website Change Request" />';
$message .= '<table rules="all" style="border-color: #666;" cellpadding="10">';
$message .= "<tr style='background: #eee;'><td><strong>Dear:</strong> </td><td>" . strip_tags($part_name). "</td></tr>";
$message .= "<tr><td><strong>.$user_name.has fixed an appointment with you on  :</strong> </td><td>" . strip_tags($time). "</td></tr>";
$message .= "<tr><td><strong>In:</strong> </td><td>" .  strip_tags($meeting_name) . "</td></tr>";
$message .= "<tr><td><strong>Please click on:</strong> </td><td><a href=" . strip_tags($approve_url). "</a> To approve</td></tr>";
$message .= "</table>";
$message .= "</body></html>";

//   CHANGE THE BELOW VARIABLES TO YOUR NEEDS

$subject = 'Appointment Request ';

$headers .= "MIME-Version: 1.0\r\n";
$headers .= "Content-Type: text/html; charset=ISO-8859-1\r\n"; 
```

但是收到的邮件不是 html 格式的，它看起来像

```
<html>
    <body>
        <img src="http://css-tricks.com/examples/WebsiteChangeRequestForm/images/wcrf-header.png" alt="Website Change Request" />
        <table rules="all" style="border-color: #666;" cellpadding="10">
            <tr style='background: #eee;'>
                <td>
                    <strong>Dear:</strong> 
                </td>
                <td>Depu</td>
            </tr>
            <tr>
                <td>
                    <strong>.pandit.has fixed an appointment with you on  :</strong> 
                </td>
                <td>
                </td>
            </tr>
            <tr>
                <td>
                    <strong>In:</strong>
                </td>
                <td>anyp</td>
            </tr>
            <tr>
                <td>
                    <strong>Please click on:</strong>
                </td>
                <td>
                    <a href=http://192.168.0.178/UI/user/approvemeeting.php?meetingid=REG_939300945&key=3107</a> To approve
                </td>
            </tr>
        </table>
    </body>
</html> 
```

请告诉我我做错了什么，为什么邮件没有以 html 格式发送

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T10:17:59.190

从：

```
$SMTPMail = new SMTPClient ($SmtpServer, $SmtpPort, $SmtpUser, $SmtpPass, 'info@myserver.com', $pr_email, $subject, $message); $SMTPChat = $SMTPMail->SendMail(); 
```

您永远不会在`$headers`var 中发送，因为电子邮件没有标头，因此另一端的邮件客户端不会读取 MIME 类型。

我不了解`SMTPClient`课程并从教程中判断我建议您不要使用它，因为它直接打开一个到 SMTP 服务器的套接字。此外，此类实际上并不支持糟糕的自定义标头。`mail()`将使用您的默认 SMTP 服务器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T10:18:04.573

请改用 PHPMailer。

它允许您发送 SMTP 和普通电子邮件（PHP 的 mail() 函数或显式所有 SMTP 参数），最重要的是它允许您指定 HTML 消息、纯文本替代消息（但不要指定它，否则某些客户端不会显示 HTML 之一，例如血腥的 Lotus Notes）。

它允许您指定标题、mime 等...

[http://phpmailer.worxware.com/](http://phpmailer.worxware.com/)

# .htaccess - lighttpd htaccess 翻译 !-d !-f 并丢失获取查询

> ID：12035743
> 
> 赞同：1
> 
> 时间：2012-08-20T10:06:42.430
> 
> 标签：.htaccess, mod-rewrite, lighttpd

我目前尝试通过模块将[chyrp](http://chyrp.net)安装例程`.htaccess`提供的文件转换为 lighttpd 。`mod_rewrite`

源`.htaccess`文件如下：

```
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase {$index}
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^.+$ index.php [L]
</IfModule> 
```

目录布局（webroot）

```
/chyrp/
/chyrp/includes/
/chyrp/admin/
/chyrp/feathers/
/chyrp/modules/
/chyrp/themes/ 
```

我目前的尝试

```
 index-file.names = ( "index.php" )
    url.access-deny = ( ".twig" )

    #taking care of the directory, check if it is one of the known ones, if so go on
    #if it is not, redirect to index
    url.rewrite-once = (
            "^/(|chyrp/)(admin|themes|feathers|modules|includes)(.*)$" => "/chyrp/$2$3",
            "^/(|chyrp/).*/$" => "/chyrp/index.php"
    )

    #check if files exists, if not rewrite to a index.php in the same directory
    url.rewrite-if-not-file = (
            "^/(|chyrp/)(admin|themes|feathers|modules|includes)(/(index.php)?(.*))?$" => "/chyrp/$2/index.php$5",
            "^/(|chyrp/)(.*)" => "/chyrp/index.php"
    ) 
```

它主要工作，除了`search`功能（可在此处测试：[srctwig.com](https://srctwig.com)），它没有正确重写（至少这是我的猜测）或查询丢失的地方。搜索例程本身工作正常（[演示搜索结果为 0](http://srctwig.com/search/I+searched+something/)） chyrp 的工作演示可以[在 apache2 上的 chyrp 演示中看到](http://chyrp.net/demo/)

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T00:04:29.007

问题的原因是，我不知道必须剖析 url 才能提取`get`我需要根据[lighttpd mod_rewrite wiki 条目保留的查询字符串](http://redmine.lighttpd.net/projects/1/wiki/Docs_ModRewrite)

```
 url.rewrite-once = (
            "^/(|chyrp/)(admin|themes|feathers|modules|includes)/(.*)$" => "/chyrp/$2/$3",
            "^/(|chyrp/).+/(([^\?]+)?(\?.+)?)$" => "/chyrp/index.php$2"
    )

    url.rewrite-if-not-file = (
        "^/(|chyrp/)(admin|themes|feathers|modules|includes)(/([^\?]+)?(\?.+)?)?$" => "/chyrp/$2/index.php$5",
        "^/(|chyrp/)(([^\?]+)?(\?.+)?)$" => "/chyrp/index.php$2",
        "^/(|chyrp/).*$" => "/chyrp/index.php"
    ) 
```

解剖：

# url.rewrite-once

```
"^/(|chyrp/)(admin|themes|feathers|modules|includes)/(.*)$" => "/chyrp/$2/$3", 
```

这些目录存在。除了确保正确的前缀（如果还没有）之外，不要更改任何内容。

```
"^/(|chyrp/).+/(([^\?]+)?(\?.+)?)$" => "/chyrp/index.php$2" 
```

检查是否请求了不存在的子目录并检查`?`，将之后的所有内容视为 php`get`查询并将其附加到重写目标。

# url.rewrite-if-not-file

```
"^/(|chyrp/)(admin|themes|feathers|modules|includes)(/([^\?]+)?(\?.+)?)?$" => "/chyrp/$2/index.php$5", 
```

如果目标不存在，只需换出文件名并保留查询（如上）

```
"^/(|chyrp/)(([^\?]+)?(\?.+)?)$" => "/chyrp/index.php$2", 
```

如果以上都不匹配，则转到基本文件夹并尝试仍然通过查询

```
"^/(|chyrp/).*$" => "/chyrp/index.php" 
```

这最后一个只是用于测试（放在`foobarfailure.php`那里断言它永远不会到达那条线）

# sql-server - 日期范围重叠检查约束

> ID：12035747
> 
> 赞同：27
> 
> 时间：2012-08-20T10:06:49.323
> 
> 标签：sql-server, database, sql-server-2005, database-design, check-constraints

我在 sql server 2005 中有一个包含 3 列的简单表：DateStart、DateEnd 和 Value。我尝试设置“表检查约束”以避免插入重叠记录。例如，如果在此类表中存在 DateStart = 2012-01-01（1 月 1 日）和 DateEnd 2012-01-15（1 月 15 日）的记录，则 Check 约束必须避免插入 DateStart=2012-01-10 的记录（ no care DateEnd)、DateEnd=2012-01-10 (no care DateStart) 的记录或 DateStart 2011-12-10 和 DateEnd 2012-02-01 的记录。

我以这种方式定义了一个UDF：

```
CREATE FUNCTION [dbo].[ufn_checkOverlappingDateRange]
(
    @DateStart AS DATETIME
    ,@DateEnd AS DATETIME
)
RETURNS BIT 
AS
BEGIN
  DECLARE @retval BIT
  /* date range at least one day */
  IF (DATEDIFF(day,@DateStart,@DateEnd) < 1)
    BEGIN
      SET @retval=0
    END
  ELSE
    BEGIN
      IF EXISTS
        (
          SELECT
              *
            FROM [dbo].[myTable]
            WHERE
            ((DateStart <= @DateStart) AND (DateEnd > @DateStart))
            OR
            ((@DateStart <= DateStart) AND (@DateEnd > DateStart))
        )
        BEGIN
          SET @retval=0
        END
    ELSE
      BEGIN
            SET @retval=1
          END
        END
  RETURN @retval
END 
```

然后认为检查可能是这样的：

```
ALTER TABLE [dbo].[myTable]  WITH CHECK ADD  CONSTRAINT [CK_OverlappingDateRange] CHECK  ([dbo].[ufn_checkOverlappingDateRange]([DateStart],[DateEnd])<>(0)) 
```

但即使 [myTable] 为空 EXISTS 运算符在我插入第一条记录时也会返回 true。我在哪里？是否可以设置这样的约束？

顺便说一句，我认为 DateStart 包括在范围内，而 DateEnd 不包括在范围内。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-08-20T19:23:12.847

插入行**后**正在执行 CHECK ，因此范围与自身重叠。

您需要修改 WHERE 以包含以下内容：`@MyTableId <> MyTableId`.

* * *

顺便说一句，您的 WHERE 表达式可以简化。

如果出现以下情况，范围*不*重叠：

*   一个范围的结束在另一个范围的开始之前
*   **或**一个范围的开始在另一个范围的结束之后。

可以用 SQL 编写，例如：

```
WHERE @DateEnd < DateStart OR DateEnd < @DateStart 
```

否定它以获得重叠的范围**......**

```
WHERE NOT (@DateEnd < DateStart OR DateEnd < @DateStart) 
```

...根据[德摩根定律](http://en.wikipedia.org/wiki/De_Morgan%27s_laws)，这与...相同

```
WHERE NOT (@DateEnd < DateStart) AND NOT (DateEnd < @DateStart) 
```

...这与：

```
WHERE @DateEnd >= DateStart AND DateEnd >= @DateStart 
```

所以你的最终 WHERE 应该是：

```
WHERE
    @MyTableId <> MyTableId
    AND @DateEnd >= DateStart
    AND DateEnd >= @DateStart 
```

[[SQL 小提琴]](http://sqlfiddle.com/#!18/a2afc/1)

*注意：要允许范围“接触”，`<=`请在起始表达式中使用，这将`>`在最终表达式中产生。*

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2016-12-08T20:58:22.540

我只想在[Branko Dimitrijevic](https://stackoverflow.com/users/533120/branko-dimitrijevic)的回答中添加DateEnd 为空的情况，因为我目前有这样的情况。

当您保持登录日志并且用户仍处于登录状态时，可能会发生这种情况。

```
WHERE
    @MyTableId <> MyTableId
    AND @DateEnd >= DateStart
    AND DateEnd >= @DateStart
    OR @DateEnd >= DateStart
    AND DateEnd is null
    OR @DateStart >= DateStart
    AND DateEnd is null 
```

我不知道这个查询在性能方面有多好，我相信有办法优化它。

# html - 关于“CSS居中无序列表”的意见

> ID：12035751
> 
> 赞同：3
> 
> 时间：2012-08-20T10:07:09.620
> 
> 标签：html, css

在这个问题中，我不会问“如何”将无序列表水平居中，因为互联网上已经有大约一万一万种资源。

相反，我想问它的“为什么”部分。

更准确地说，我们为什么[要这样做](http://jsfiddle.net/p9TbX/)

```
ul {
   position:relative;
   left:50%;
}
ul > li {
   position:relative;
   right: 50%;
} 
```

而不是这个：

```
ul {
   position:relative;
   left:25%;
} 
```

当两者似乎都可以解决问题时。有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T10:34:52.767

原因是，因为第一种方法`ul`在每种情况下都以它为中心 - 独立于它有多少个孩子`li`。

第二种解决方案将`ul`25% 放在右侧，这将在非常特殊的情况下起作用，此时 的`li`宽度恰好占据总宽度的 50%，但在任何其他情况下都会中断。

`left`在父级和子级上使用`right`是一种非常常见的做法，可以让子级以**动态**尺寸（宽度）居中，在处理动态内容时就是这种情况。

在某些情况下，`text-align:center;`它也可以工作，但是当您必须使用绝对定位时会失败。

在此处查看[示例小提琴](http://jsfiddle.net/gGF9n/4/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T10:22:55.830

我没有使用任何这些解决方案。检查这个[http://jsfiddle.net/yz7jF/](http://jsfiddle.net/yz7jF/)。

像这样写：

```
ul {
   display:inline-block;
   *display:inline;/*For IE7*/
   *zoom:1;/*For IE7*/
}
li{
    float:left;
    text-align:left;
}
.anyParent{
    text-align:center;
} 
```

# sql - 如何通过“大于”表达式使用 Oracle 分析分区？

> ID：12035757
> 
> 赞同：0
> 
> 时间：2012-08-20T10:07:35.533
> 
> 标签：sql, oracle, select

Oracle 文档说我可以使用：

```
select avg(id) over (partition by <expression>) from table1; 
```

例如，这很顺利：

```
select avg(id) over (partition by id) from table1; 
```

但如果我使用“大于”表达式，我会失败 ORA-00907：

```
select avg(id) over (partition by (id > 3)) from table1; 
```

哪里记录了表达式的语法？我可以使用“大于”表达式来划分记录集吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T10:14:23.453

我猜问题是Oracle SQL 不能正确支持布尔表达式。但是如果 id>3 则返回 1 ，否则返回 0 ，case 表达式应该可以工作。

```
case when (i >3) then 1
else 0
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T13:29:17.980

要使用这些类型的表达式，我总是将变量放在子查询中：

```
select avg(id) over (partition by whichid)
from (select t.*, (case when id > 3 then 'low' else 'high' end) as whichid
      from table1 t
     ) t 
```

# jquery - jquery手风琴菜单的自动宽度

> ID：12035759
> 
> 赞同：0
> 
> 时间：2012-08-20T10:07:38.103
> 
> 标签：jquery, jquery-ui, width, accordion

这是我为水平手风琴菜单找到的来源，但问题是我需要将内容部分宽度设为自动。尝试从内容部分中删除文本并仅添加一个单词，然后查看效果，它仍然需要一些宽度。

[http://www.ajaxshake.com/demo/EN/526/420eaebd/horizo​​ntal-accordion-with-autoplay-easy-accordion.html](http://www.ajaxshake.com/demo/EN/526/420eaebd/horizontal-accordion-with-autoplay-easy-accordion.html)

如何获得自动宽度？

# php - 将脚本从 C 迁移到 PHP

> ID：12035763
> 
> 赞同：1
> 
> 时间：2012-08-20T10:08:04.143
> 
> 标签：php, c

我正在将脚本从 C 迁移到 PHP ( [http://svn.stellman-greene.com/mgrs_to_utm/trunk/](http://svn.stellman-greene.com/mgrs_to_utm/trunk/) )，我在[mgrs_to_utm.c](http://svn.stellman-greene.com/mgrs_to_utm/trunk/mgrs_to_utm.c)中对这个概念有疑问：

```
Letters[0] = (toupper(MGRS[j]) - (long)'A');
if ((Letters[0] == LETTER_I) || (Letters[0] == LETTER_O)) 
```

`MGRS[j]`是字符串的一部分，但是 WTF 我可以`(long)'A'`将 a减去`LETTER`??

`LETTER_I`是一个整数（在[mgrs_to_utm.h](http://svn.stellman-greene.com/mgrs_to_utm/trunk/mgrs_to_utm.h)中定义）。

我想到了 PHP，但我找不到这个操作的逻辑。

非常感谢你的帮助 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T10:16:00.140

在 ASCII 中，字符“A”的值为 65，因此 Letters[0] 有效地包含了字母表中的偏移量（A 为 0）。

如果 MGRS[j] 是“I”（73），那么我们从中取“A”（65）以离开 8

```
ABCDEFGHIJ K...
0 1 2 3 4 5 6 7 8 9 10

```

代码与以下内容几乎相同：

```
如果（MGRS[j] == 'I' || MGRS[j] == 'O' || MGRS[j] == 'i' || MGRS[j] == 'o'） 

```

# javascript - 如何使用谷歌应用脚 本处理来自谷歌电子表格的日期

> ID：12035771
> 
> 赞同：1
> 
> 时间：2012-08-20T10:08:34.517
> 
> 标签：javascript, google-apps-script, google-sheets

我如何处理这样的电子表格中的日期。![在此处输入图像描述](../Images/c229be1c3cdce64cf07157a0f7ac996a.png)

我需要从第 2 列获取最后一个日期，然后找到下一个日期。我创建了这个代码来检索最后一个日期。

```
lastDateRow = sheet.getLastRow()-1;
lastDate = Date(sheet.getRange("B"+(lastDateRow)+":B"+(lastDateRow).getValue()); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T10:54:47.577

您从工作表中获得的值已经是一个日期对象（包括年份、日期、小时数等），不需要进一步的操作。

当您说“下一个日期”时，我猜您的意思是“第二天”？如果是这样，只需将 24*60*60*1000 添加到日期（以毫秒为单位），您将获得第二天 ;-)

在代码中，它变成了这样：

```
function xxx(){
var sheet = SpreadsheetApp.getActiveSheet()
var lastDateRow = sheet.getLastRow();
var lastDate = sheet.getRange(lastDateRow,2).getValue();
Logger.log(lastDate)
var nextDay = new Date(lastDate.getTime()+24*60*60*1000);
Logger.log(nextDay)
} 
```

记录仪测试结果：

```
Tue Aug 21 15:00:00 PDT 2012
Wed Aug 22 15:00:00 PDT 2012 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T11:10:28.340

实际上，这是我在 stackowerflow 上查找 js nextdate fnction 后得到的结果。

```
var lastDateRow = sheet.getLastRow();
var lastDate = sheet.getRange(lastDateRow,2).getValue();
lastDate = getTomorrow(lastDate,1);

function getTomorrow(d,offset) {
    if (!offset) { offset = 1 }
    return new Date(new Date(d.getTime()).setDate(d.getDate() + offset));
} 
```

# html - 所有浏览器的左边距都不一样？

> ID：12035772
> 
> 赞同：1
> 
> 时间：2012-08-20T10:08:35.983
> 
> 标签：html, css, xhtml

使用 CSS3 我正在尝试显示带有玻璃图像的搜索框。我基本上是通过在文本框上放置图像并设置其`left-margin`. 我的代码在这里：

```
<body>
    <form id="header-search">
        <input type="text" class="searchbox" /><input type="submit" class="button" value="" />
    </form>
</body>

#header-search{overflow:auto;}

#header-search input.searchbox 
{
    border-bottom-left-radius:5px;
    -webkit-border-bottom-left-radius:5px; 
    -moz-border-bottom-left-radius:5px;

    border-top-left-radius:5px;  
    -webkit-top-left-radius:5px; 
    -moz-left-radius:5px;

     border:1px solid #8e8e8e;

     background-color:white;
     height:16px;
     padding:4px;
     padding-left:28px;
     padding-right:10px;
     color:#4a4a4a;
     float:left;

 }

#header-search input.button{
    border:0px dashed red;
    padding:0;
    margin:0 0 0 -185px;
    width:24px;
    height:24px;
    background:transparent url(../images/SearchImage.png) center center  no-repeat;
    float:left;
} 
```

**更新**

1.  我没有使用 em 而不是 px
2.  我尝试过不同的css重置。
3.  请参阅图片了解详细差异。
4.  我已经在没有其他代码行的新 css/html 文件中完成了这段代码。 ![在此处输入图像描述](../Images/c3e53e0fa884cba490a9c6670eea7b84.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T10:15:58.270

`position:absolute`对于这种事情，使用似乎是一种更可靠的方法。

HTML

```
<form id="header-search">
    <div class='relative'>
    <input type="text" class="searchbox" /><input type="submit" class="button" value="" />
    </div>
</form> 
```

CSS

```
.relative {
  position:relative;
}
.relative .button {
  position:absolute; 
  left: 20px;
  z-index:1;
} 
```

* * *

您可能想让这个 css 更具体到这个搜索输入，而不是 all `.button`'s etc

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-20T10:17:33.930

这是因为您没有指定搜索输入框的宽度。如果你这样做，你的方法就会奏效。

否则，当然，更好的方法是使用 position:absolute 来定位您的按钮。这将确保所有浏览器的布局。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-20T10:45:22.443

1.  如果你想为搜索输入框放置图片，你可以试试这个[http://jsfiddle.net/HmKZQ/1/](http://jsfiddle.net/HmKZQ/1/)
2.  如果你需要点击按钮，那么你可以试试这个 [http://jsfiddle.net/HmKZQ/3/](http://jsfiddle.net/HmKZQ/3/)

# c# - Javascript：在鼠标移动事件上绘制一个矩形

> ID：12035775
> 
> 赞同：1
> 
> 时间：2012-08-20T10:08:46.700
> 
> 标签：c#, javascript, asp.net

如何通过在 asp.net (C#) 中使用 javascript 在已绘制的圆（孔）上绘制矩形。我在页面中将圆圈绘制为位图。应该在 mousemove 事件上绘制矩形。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T11:38:31.427

在 img 标签中写入以下代码：

```
<img name="picture" src="Images/circle.jpg" alt="My Image"    
     onmouseover="document.picture.src=image2.src" 
     onmouseout="document.picture.src=image1.src" /> 
```

所需的javascript是：

```
<script language="Javascript" type="text/javascript">
    image1 = new Image
    image1.src = "Images/circle.jpg"
    image2 = new Image
    image2.src = "Images/squre.jpg"
</script> 
```

# jquery - 使用 jquery 更改悬停 div 的不透明度

> ID：12035776
> 
> 赞同：3
> 
> 时间：2012-08-20T10:08:47.917
> 
> 标签：jquery, hover, opacity

我有动态评论列表：

```
<div class="comment">
  <div class="commentact">
    Test1
  </div>
</div>
<div class="comment">
  <div class="commentact">
    Test2
  </div>
</div>
<div class="comment">
  <div class="commentact">
    Test3
  </div>
</div>​ 
```

现在我需要当用户将每个`div` `class='comment'`节目悬停`div` `class='commentact'`在`opacity 0`.

我有这个 jquery 函数：（我将 div commentact 默认设置为 opacity 0.2）

```
$(".commentact").css('opacity','0.2');

$(document).ready(function(){

   $(".comment").hover(function() {
      $(".commentact").stop().animate({ opacity: 1 });
   }, function() {
      $(".commentact").stop().animate({ opacity: 0.2 }); 
   });

});​ 
```

现在当我悬停`comment div`显示所有`commentact div`不透明度为 0 时，有什么问题！如何解决这个问题？[演示](http://jsfiddle.net/BBKING/ZLX3L/)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-20T10:11:18.057

[jsFiddle 演示](http://jsfiddle.net/ZLX3L/124/)

`.commentact`是一个**子**元素，所以使用：`$(this).find(".commentact")`
或`$(".commentact", this)`

```
$(function(){ // DOM ready

    $(".commentact").fadeTo(0, 0.2); // initial opacity

    $(".comment").hover(function( e ) {
       $(".commentact", this).stop().fadeTo(300, e.type=="mouseenter"? 1 : 0.2 );
    });

}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-20T10:10:41.257

而不是`$(".commentact")`使用`$(this).find(".commentact")`：

```
$(".commentact").css('opacity','0.2');
$(document).ready(function(){
  $(".comment").hover(
    function() {
      $(this).find(".commentact").stop().animate({ opacity: 1 });
    },
    function() {
      $(this).find(".commentact").stop().animate({ opacity: 0.2 }); 
    });
});​ 
```

演示：http: [//jsfiddle.net/ZLX3L/2/](http://jsfiddle.net/ZLX3L/2/)

# java - ClassLoader：如何从另一个项目加载类

> ID：12035782
> 
> 赞同：4
> 
> 时间：2012-08-20T10:09:11.390
> 
> 标签：java, class

我想使用 ClassLoader 从另一个项目访问一个类。如何指定该类的路径并获取该类文件？

我希望能够通过代码来做到这一点，因为我将通过我的应用程序加载许多不同的类文件，并且不同类的路径将不断变化。

我正在使用一个 CustomClassLoader，它正在加载类文件，但前提是它们在项目中而不是在另一个项目中

```
import java.io.FileInputStream;
import java.security.AccessControlContext;
import java.security.AccessController;
import java.security.PrivilegedExceptionAction;

public class CustomClassLoader extends ClassLoader {

String repoLocation = "C:/TempBINfolder/bin/";

public CustomClassLoader() {
}

public CustomClassLoader(ClassLoader parent) {
    super(parent);
}

@Override
protected Class<?> findClass(final String name)
        throws ClassNotFoundException {

    AccessControlContext acc = AccessController.getContext();

    try {
        return (Class) AccessController.doPrivileged(
                new PrivilegedExceptionAction() {

                    public Object run() throws ClassNotFoundException {

                        FileInputStream fi = null;
                        try {

                            String path = name.replace('.', '/');
                            fi = new FileInputStream(repoLocation + path
                                    + ".class");
                            ByteArrayOutputStream baos = new ByteArrayOutputStream();
                            byte[] buffer = new byte[8192]; // a big chunk
                            int read;
                            while ((read = fi.read(buffer)) > 0)
                                baos.write(buffer, 0, read);
                            byte[] classBytes= baos.toByteArray();

                            return defineClass(name, classBytes, 0,
                                    classBytes.length);
                        } catch (Exception e) {
                            throw new ClassNotFoundException(name);
                        }
                    }
                }, acc);
    } catch (java.security.PrivilegedActionException pae) {
        return super.findClass(name);
    }
}
} 
```

打电话给班级

```
for (Class singleClass : listOfClasses) {
            try {

                ClassLoader classLoader = new CustomClassLoader(ClassLoader.getSystemClassLoader());
                Class stringClass = null;
                try {
                    stringClass = classLoader.loadClass(singleClass.getName());
                } catch (ClassNotFoundException ex) {
                    Logger.getLogger(CompilerForm.class.getName()).log(Level.SEVERE, null, ex);
                }
                try {
                    stringClass.newInstance();
                } catch (InstantiationException ex) {
                    Logger.getLogger(CompilerForm.class.getName()).log(Level.SEVERE, null, ex);
                } catch (IllegalAccessException ex) {
                    Logger.getLogger(CompilerForm.class.getName()).log(Level.SEVERE, null, ex);
                }

                Class cls = Class.forName(stringClass.getName()); 
```

如果我尝试做`Class cls = Class.forName(stringClass.getPackage()+"."+stringClass.getName());`包是`null`

**编辑：以下对我有用**

```
URL classUrl;
classUrl = new URL("file:///"+ccl.getRepoLocation());    //This is location of .class file
URL[] classUrls = {classUrl};
URLClassLoader ucl = new URLClassLoader(classUrls);
Class cls = ucl.loadClass(stringClass.getName());    // Current .class files name 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T10:17:58.257

使用[URLClassLoader](http://docs.oracle.com/javase/7/docs/api/java/net/URLClassLoader.html)为您执行此操作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-20T10:19:53.880

该代码看起来不错（我自己很久以前做过类似的事情）。虽然有一个小错误：

如果你这样做

```
byte[] classBytes = new byte[fi.available()];
fi.read(classBytes); 
```

您只读取*与没有阻塞*的可用字节一样多的字节。是的，您没有阅读整个文件。实际上，read 方法并不能保证会读取完整的字节缓冲区。

试着做：

```
ByteArrayOutputStream baos = new ByteArrayOutputStream();
byte[] buffer = new byte[8192]; // a big chunk
int read;
while ((read = fi.read(buffer)) > 0)
   baos.write(buffer, 0, read);
byte[] bytesClass = baos.toByteArray(); 
```

或使用Apache 的[Streams.copy](http://commons.apache.org/fileupload/apidocs/org/apache/commons/fileupload/util/Streams.html)。这是一种方便的方法。

**包定义**

ClassLoader 有一个`definePackage`方法。我敢打赌，您应该为您需要的每个新包调用该方法。否则 ClassLoader 无法定义包，只能从完整的类名中定义，这似乎还不够。

所以代码得到这个：

```
// being package the name of the package for the new class
// being definedPackages a Set<String> member of the classloader

if (!this.definedPackages.contains(package)) {
   definePackage(package,"","","","","","",null);
   this.definedPackages.add(package);
}
ByteArrayOutputStream baos = new ByteArrayOutputStream();
byte[] buffer = new byte[8192]; // a big chunk
int read;
while ((read = fi.read(buffer)) > 0)
   baos.write(buffer, 0, read);
byte[] bytesClass = baos.toByteArray(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T07:13:23.740

感谢上面帮助我的代码。

SUB : 在两个不同的位置调用相同的类

我在类路径 jar 文件中有一个类说 Abc，并且我在本地目录中动态生成了相同的类 Abc，并进行了一些代码更改。

我需要在本地目录中创建实例并使用类 Abc，下面是工作代码，

类 CustomClassLoader 扩展 ClassLoader {

```
String repoLocation = "./";
//C:/TempBINfolder/bin/
 CustomClassLoader() {
}

 CustomClassLoader(ClassLoader parent) {
    super(parent);
}

@Override
protected Class<?> findClass(final String name)   throws ClassNotFoundException {

    AccessControlContext acc = AccessController.getContext();

    try {
        return (Class) AccessController.doPrivileged(
                new PrivilegedExceptionAction() {

                    public Object run() throws ClassNotFoundException {

                        FileInputStream fi = null;
                        try {

                            String path = name.replace('.', '/');
                            fi = new FileInputStream(repoLocation + path+ ".class");
                            ByteArrayOutputStream baos = new ByteArrayOutputStream();
                            byte[] buffer = new byte[8192]; // a big chunk
                            int read;
                            while ((read = fi.read(buffer)) > 0)
                                baos.write(buffer, 0, read);
                            byte[] classBytes= baos.toByteArray();

                            return defineClass(name, classBytes, 0,
                                    classBytes.length);
                        } catch (Exception e) {
                            throw new ClassNotFoundException(name);
                        }
                    }
                }, acc);
    } catch (java.security.PrivilegedActionException pae) {
        return super.findClass(name);
    }
}
} 
```

调用 CustomClassLoader 类，

```
 ClassLoader classLoader = new CustomClassLoader(ClassLoader.getSystemClassLoader());
    Class stringClass = (new CustomClassLoader(ClassLoader.getSystemClassLoader())).findClass(packageName+"."+javaFileName);
    Object  t = (Object) stringClass.newInstance(); 
```

谢谢， 默瓦特

# .net - Nunit 添加自定义属性

> ID：12035784
> 
> 赞同：4
> 
> 时间：2012-08-20T10:09:21.787
> 
> 标签：.net, attributes, nunit

我已经从这个[链接](http://trishkhoo.com/2011/07/giving-tests-a-second-chance/)中获取了代码示例来实现一个新的 Nunit 属性来“失败时重复测试”。我已将此代码作为一个类添加到我的解决方案中。

`[Test]`然后我在属性旁边调用这个新类：

`[Test, RepeatOnFailureAttribute(2)]`

但是测试失败时不会重复。我想我需要将此属性添加到 Nunit 属性列表中。我在 XML 文件 nunit.framework 中看到了属性的发货列表，这里我添加了一个新项目：

`.member. name="T:NUnit.Framework.RepeatOnFailureAttribute"`

但是我不明白当我们只有 nunit.framework.dll 引用分配给我的项目时，如何调用将这个新项目添加到 XML 文件中。

任何帮助将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T06:11:47.430

nunit 中没有 RepeatOnFailureAttribute。nunit框架中只有RepeatAttribute(int count)。根据您的代码条件，特定的测试用例失败或通过。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-11-17T16:59:36.113

请参阅此自定义属性示例：

[将动态生成的值传递给 NUnit 自定义属性](https://stackoverflow.com/questions/47354926/passing-dynamically-generated-value-to-nunit-custom-attribute)

如果您以类似的方式创建了自定义属性，那么我相信您可以在“AfterTest”中确认失败。然后，如果测试失败，您可以返回一个值以重复测试。

# c# - 等待并返回给调用者

> ID：12035788
> 
> 赞同：3
> 
> 时间：2012-08-20T10:09:33.160
> 
> 标签：c#, async-await

如果我有一个异步方法：

```
public async Task MyMethodAsync()
{
   // [.. Some synchronous code here ..]

   await AnotherAsyncMethod();
} 
```

在我的代码中的某个时刻，我这样称呼它：

```
await MyMethodAsync(); 
```

此语句是否会立即返回调用方，甚至无需输入 MyMehodAsync ？我猜是这样，但不确定。

如果我希望调用`MyMethodAsync`首先立即执行该`[.. Some synchronous code here ..]`部分，我应该这样做：

```
var t = MyMethodAsync(); 
await t; 
```

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-20T12:25:49.417

当您的代码调用时

```
await MyMethodAsync(); 
```

然后执行*将*进入`MyMethodAsync`（同步）。该方法仅在/如果`MyMethodAsync`返回 uncompleted时“暂停” `Task`。

您可能会发现我的[`async`/`await`介绍帖子很有帮助](http://nitoprograms.blogspot.com/2012/02/async-and-await.html)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-20T11:07:22.337

```
[.. Some synchronous code here ..] 
```

将同步执行，直到第一个 await 产生控制。你做对了。就同​​步执行的内容而言，您的最后一个示例与您之前的示例完全相同。

# vba - 工作表上的 Listview 生成无法插入对象错误 Excel 2010

> ID：12035790
> 
> 赞同：1
> 
> 时间：2012-08-20T10:09:37.090
> 
> 标签：vba, listview, excel, excel-2010

您好我有一个 Excel 2003 应用程序，它在工作表中嵌入了一个列表视图。它不再适用于 Excel 2010。

`regsvr32 C:\Windows\System32\MSCOMCTL.OCX`我按照建议重新注册了 ocx 。

这适用于表单上的列表视图，但不适用于工作表。

Microsoft 建议，如果控件是特定于表单的并且尝试添加到工作表中，则可以生成无法插入对象。

1.  可以在工作表上的 Excel 2010 中使用列表视图吗

2.  如果有怎么办？

否则需要重写。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-12T18:38:36.900

这发生在我使用 ActiveX 或任何类型的自动化的 Excel 文件上。解决方案一开始很困惑，但以下链接将对您有所帮助。

1.  创建批处理以从 Windows 中删除缓存的控件类型库（扩展文件 *.EXD）文件
2.  打开每个项目（带有宏的 Excel）
3.  将文件切换到设计模式
4.  打开 VBA 代码 (Alt-F11) 以编辑任何模块，然后从主菜单 > 调试 > 编译 VBAProject
5.  切换回运行模式
6.  保存并关闭文件
7.  重新打开文件并测试

[表单控件在 2014 年 12 月更新后停止工作](http://blogs.technet.com/b/the_microsoft_excel_support_team_blog/archive/2014/12/11/forms-controls-stop-working-after-december-2014-updates-.aspx)

# jquery - HTML 5 jQuery 不能改变视图

> ID：12035795
> 
> 赞同：0
> 
> 时间：2012-08-20T10:10:09.327
> 
> 标签：jquery, html

我发布代码时出现错误：您的帖子似乎包含未正确格式化为代码的代码。

代码：

```
<!DOCTYPE html>  <html> 
    <head> 
    <title>test</title> 

    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.0a2/jquery.mobile-1.0a2.min.css" />
    <link rel="stylesheet" href="css/colors.css">
      <script src="http://code.jquery.com/jquery-1.4.4.min.js"></script>
      <script src="http://code.jquery.com/mobile/1.0a2/jquery.mobile-1.0a2.min.js"></script>

    <script>     
     // Global declarations - assignments made in $(document).ready() below
        var varHeaderView11 = null;

        var varContentView11 = null;
        var varContentView12 = null;

        var varFooterView11 = null;

    </script> 

</head>  <body> 

<!-- Page 1 starts here --> <div data-role="page" data-theme="b" id="page1">

    <!-- view 11-->
    <div data-role="header" id="headerView11" name="headerView11" data-nobackbtn="true">
        <h1>header</h1>
    </div>
    <div data-role="content" id="contentView11" name="contentView11">    

        <form id="formView11">
            <fieldset class="ui-grid-b"> 
                <div align="center" class="ui-block-a"><button onclick="button1View11()">btn1V11</button></div>
                <div align="center" class="ui-block-b"><button onclick="button2View11()">btn2V11</button></div>
                <div align="center" class="ui-block-c"><button onclick="button3View11()">btn3V11</button></div>

<!--
                <div align="center" class="ui-block-a"><a id="button1View11" name="button1View11" data-role="button" data-inline="true">btn1V11</a></div>
                <div align="center" class="ui-block-b"><a id="button2View11" name="button2View11" data-role="button" data-inline="true">btn2V11</a></div>
                <div align="center" class="ui-block-c"><a id="button3View11" name="button3View11" data-role="button" data-inline="true">btn3V11</a></div>

-->

            </fieldset>

            <div align="right"><img id="image1View11" name="image1View11" src="img/1.png"/></div>

            <div id="textField1View11" data-role="fieldcontain">
                <label for="inputText1View11" id="labelTextField1View11" name="labelTextField1View11">labelTextField1View11</label>        
                <input id="inputText1View11" name="inputText1View11" type="text" />
            </div>
            <div id="textField2View11" data-role="fieldcontain">
                <label for="inputText2View11" id="labelTextField2View11" name="labelTextField2View11">labelTextField2View11</label>        
                <input id="inputText2View11" name="inputText2View11" type="text" />
            </div>

            <fieldset class="ui-grid-a">
                <div class="ui-block-a"><a id="submitView11" name="submitView11" data-role="button" type="submit" value="submit" data-inline="true">submitView11</a></div>
                <div class="ui-block-b"><a id="resetView11" name="resetView11" data-role="button" type="reset" value="reset" data-inline="true">resetView11</a></div>
            </fieldset>

            </form>
    </div>
    <div data-role="footer" id="footerView11" name="footerView11">
                <fieldset class="ui-grid-b">
                    <div align="left" class="ui-block-a"><a id="buttonFooter1View11" name="buttonFooter1View11" data-role="button" data-inline="true">Footer1</a></div>
                    <div align="center" class="ui-block-b"><a id="buttonFooter2View11" name="buttonFooter2View11" data-role="button" data-inline="true">Footer2</a></div>
                    <div align="right" class="ui-block-c"><a id="buttonFooter3View11" name="buttonFooter3View11" data-role="button" data-inline="true">Footer3</a></div>
                </fieldset>

    </div>

    <!-- view 12-->
    <div data-role="content" id="contentView12" name="contentView12">    

            <div align="center"><img id="image1View12" name="image1View12" src="img/2.png"/></div>

    </div>

    <script>
        $(document).ready(function() {
            // Assign global variables
            varHeaderView11 = $('#headerView11');

            varContentView11 = $('#contentView11');
            varContentView12 = $('#contentView12');

            varFooterView11 = $('#footerView11');

            //set up the first view    
            hideView12();
        }); 

        //functions show and hide
        function showView11 {
            varHeaderView11.show();
            varContentView11.show();        
            varFooterView11.show();
        }
        function showView12 {
            varContentView12.show();
        }
        function hideView11 {
            varHeaderView11.hide();
            varContentView11.hide();        
            varFooterView11.hide();
        }
        function hideView12 {
            varContentView12.hide();
        }

    </script> </div>  <!-- Page1 ends here -->

</body> </html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T10:12:25.133

错误控制台（CTRL+MAJ+J）非常清楚：

```
SyntaxError: missing ( before formal parameters

function showView11 { 
```

函数声明可能缺少几个字符...

# java - java - 如何在录制Java声音时绘制声音图？

> ID：12035799
> 
> 赞同：1
> 
> 时间：2012-08-20T10:10:52.683
> 
> 标签：java, javasound

我成功地从我的麦克风录制了 java 声音，并且可以绘制录制的波形文件图，如附图所示。（我尝试从这里上传很多图片，但每次都失败。我也使用了tinypic但上传失败，我认为我的互联网连接有一些错误，我稍后会在这里上传。）

我还附上了我所有的代码。 [http://pastebin.com/EgW2ZcyJ](http://pastebin.com/EgW2ZcyJ)

现在，我的问题是我想在实时录制时显示声音的图表。所以如果我尝试读取用于在新线程中录制的音频输入流并让该线程休眠 1 秒钟，直到录制完成。但是在这种方法中，它给出了帧长度-1，因此无法绘制任何内容。

**所以我如何绘制图表意味着我如何在实时录制时获取录制的声音帧[来自音频输入流的字节]，所以我可以使用它在不同的线程中使用它绘制图表，这样我就可以准确地模拟什么窗口录音机提供??**

谢谢你米希尔帕雷克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T10:18:52.133

此[示例](https://stackoverflow.com/a/5048863/230513) 用于[`JFreeChart`](https://stackoverflow.com/tags/jfreechart/info)显示对基于时间的系列的最近更改。

> 对不起，但你不明白我的问题。

附录：您可以编辑您的问题以澄清；这也将有助于指导未来的答案。在此期间，您可能能够适应[`TeeOutputStream`](http://java.sun.com/developer/technicalArticles/Streams/WritingIOSC/index.html)拦截`OutputStream`from `AudioSystem.write()`。

![图片](../Images/8cf2da507d1e5e1f1ada86cd020dda43.png)

# javascript - 如何在不丢失数据且名称不同的情况下向表中添加新行？

> ID：12035800
> 
> 赞同：0
> 
> 时间：2012-08-20T10:11:01.950
> 
> 标签：javascript, html

我正在尝试向表中添加新行，但我想在这些行中放入 3 个具有不同名称的输入，例如 input_1、input_2 ...

```
<table class="tdatos" id="tabla">
<tr>
    <th>Cantidad</th>
    <th>Descripción</th>
    <th>Precio/Ud</th>                  
</tr>                               
    <td><input name="a_1"></td>
    <td><input name="b_1"></td>
    <td><input name="c_1"></td> 
```

马斯

这里是我的 javascript 函数：

```
function masFilas(){        
var texto = ""
    for (i=1;i<3;i++){
        texto= texto + "<tr><td><input class='cant' type='text' size='4'></td><td><input size='100' type='text' ></td><td><input type='text' size='6'></td></tr>"
            }           
    document.getElementById("tabla").innerHTML  = document.getElementById("tabla").innerHTML + texto ;  
    } 
```

我希望这些输入具有不同的名称，例如 a_1 、 a_2 、 a_3 另一个问题是，当我按下“mas”按钮时，我会丢失在这些输入中写入的文本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T10:29:55.817

如果您要更改表格的内部 html，您在输入类型中键入的值将不会是持久的，因此您需要在

```
tableObject.insertRow(index); 
```

详细示例开启

[http://viralpatel.net/blogs/dynamically-add-remove-rows-in-html-table-using-javascript/](http://viralpatel.net/blogs/dynamically-add-remove-rows-in-html-table-using-javascript/)

# c++ - 如何更改在 for 循环之前声明的变量值并尝试在 C++ 中更改 for 循环中的值？

> ID：12035802
> 
> 赞同：0
> 
> 时间：2012-08-20T10:11:11.670
> 
> 标签：c++, loops

以下是我的代码：

```
bool rValue = false;
for(int i=0; i < 10 ; i++)
{
  some code...
  ...
  ...
  rValue  = true

}

std::cout << "rValue is " << rValue << std::endl; 
```

上述代码的输出是`rValue is false`. 为什么？为什么 rValue 变量的值没有变化？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T10:12:48.517

我怀疑在你的循环中某处你有声明`bool rValue`。所以它改变了`rValue`循环范围。不是父范围之一。

并且如果您在到达内部赋值语句之前退出循环，它将不会生效。您可以在调试器中检查或`std::cout`在分配前放置

# hover - 悬停后如何保持div宽度？

> ID：12035805
> 
> 赞同：0
> 
> 时间：2012-08-20T10:11:32.550
> 
> 标签：hover

请问悬停后如何保持div宽度？

这是 HTML 代码

```
<div>
<a href="/kcms1/The-Plant/Refining.aspx" style="white-space:nowrap; position:relative;"> Refining</a>
<a href="/kcms1/The-Plant/Products.aspx" style="white-space:nowrap; position:relative;"> Products</a>
<a href="/kcms1/The-Plant/Process.aspx" style="white-space:nowrap; position:relative;"> Process</a>
<a href="/kcms1/The-Plant/Quality-Assurance.aspx" style="white-space:nowrap; position:relative;"> Quality Assurance</a>
<a href="/kcms1/The-Plant/Safety.aspx" style="white-space:nowrap; position:relative;"> Safety</a>
</div> 
```

========

请这是我的主菜单，宽度不固定，当鼠标悬停在（质量保证）主 div 上时，宽度会增加大约 2 个像素。

我希望悬停是粗体的。

我使用了字母间距但不好:(

你可以在这里看到我的问题 ![在此处输入图像描述](../Images/4ff84e9f7f116cfc5dacb132786c2188.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T10:18:12.360

目前，菜单的宽度由最宽的元素决定。

“Saudization and Training”是目前最宽的元素，因此，当它是粗体字时，通过扩展菜单的宽度来容纳额外的宽度。这是因为粗体文本比标准文本更宽。

是否有无法修复菜单宽度的原因？

如果您无法固定菜单的宽度 - 您可以选择另一种方式在悬停时突出显示所选元素（下划线，这是一种常见的选择）。

请参阅此处的相关讨论：

[悬停时加粗时内联元素移动](https://stackoverflow.com/questions/556153/horiz-css-menu-text-shifting-on-bold-hover)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T20:26:54.127

尝试设置 div 样式溢出：

溢出：隐藏；

所以：

```
<div style="overflow:hidden;width:250px;height:200px;">
    content here

</div> 
```

如果您使用它，您将需要设置一个宽度，我相信因此还要添加宽度（您可以将自己的宽度设置为您需要的宽度）与高度相同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-05T13:15:07.333

另一个想法是使用一些 JavaScript 来捕获菜单 div 上的 mouseenter 事件，获取 div 的 outerWidth()，然后设置菜单 div 的最大宽度。悬停不会用这个扩展框。

```
var width = $this.outerWidth();
$(this).css({"max-width": width+"px"}); 
```

只需确保菜单项上的溢出设置为可见：

```
$("menu items").css({overflow: "visible"}); 
```

最好在 mouseleave 上清除 max-width。

这对我很有用。

# java - 在 Java 中读取 XML 文件

> ID：12035811
> 
> 赞同：4
> 
> 时间：2012-08-20T10:12:28.033
> 
> 标签：java, xml, jaxb

我有一个很大的 XML 文件和几个 POJO 类来读取这个 XML。当我尝试使用一个 POJO 读取测试文件时，我使用这个：

```
 JAXBContext jaxbContext = JAXBContext.newInstance(Test.class);
Unmarshaller jaxbUnmarshaller = jaxbContext.createUnmarshaller();
Test ts = (Test)jaxbUnmarshaller.unmarshal(file);
System.out.println(ts.getName()); 
```

但是当我有 30 个 POJO 时，我该怎么办？创建这 4 行 30 次？给我建议。

**更新**

我如何从这个例子中理解[http://blog.bdoughan.com/2010/08/using-xmlanyelement-to-build-generic.html](http://blog.bdoughan.com/2010/08/using-xmlanyelement-to-build-generic.html) 使用我要使用的几个 POGO

```
JAXBContext.newInstance("message:customer:product:order"); 
```

在这个例子中，作者有 3 个 clesses，但只有其中两个他需要`@XmlRootElement`注释。为什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-20T10:18:56.557

您可以使用所有 30 个 POJO 创建 JAXBContext。您也可以将它们的名称存储在包中的 jaxb.in​​dex 索引文件中，并创建 JAXBContext.newInstance("your.package")

[这是来自javadoc](http://docs.oracle.com/javase/6/docs/api/javax/xml/bind/JAXBContext.html#newInstance%28java.lang.String,%20java.lang.ClassLoader%29)的有关 jaxb.in​​dex 的一些详细信息

> 除了在上下文路径中列出之外，程序员注释的 JAXB 映射类可以在 jaxb.in​​dex 资源文件中列出，格式如下所述。请注意，java 包可以包含模式派生类和用户注释的 JAXB 类。此外，java 包可能包含必须处理的 JAXB 包注释。（参见 JLS 第 3 版，第 7.4.1 节。“包注释”）。

您的类应该使用@XmlRootElement 或@XmlType 注释进行注释。

您还可以使用[scannotation](http://sourceforge.net/projects/scannotation/)框架找到所有注释为 @XmlRootElement 的类，并使用您拥有的所有 JAXB POJO 创建 JAXBContext。

如果您有任何问题，请发表评论，我会更新答案。希望能帮助到你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T13:52:50.770

理想情况下，您将只创建一次 JAXBContext 并将其缓存以供重复使用。现在

***但是当我有 30 个 POJO 时，我该怎么办？创建这 4 行 30 次？***

如果所有 30 个 POJO 都在同一个包中（例如 com.abc），则将上下文创建为`JAXBContext.newInstance("com.abc")`

***在这个例子中，作者有 3 个 clesses，但只有其中两个他使用 @XmlRootElement 注释。为什么？***

只有与 XSD Schema 中的全局元素声明相对应的 POJO 才有`@XmlRootElement`注释。这是因为全局元素声明是实例文档中的潜在根元素。

如果您可以发布您的 XML 模式和 XML 实例文档的示例，以便我们提供更具体的答案，那就更好了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-20T18:24:48.443

以下应该会有所帮助。

**注释**

JAXB 模型类不需要任何注释。没有注释表明在创建`JAXBContext`.

*   [http://blog.bdoughan.com/2012/07/jaxb-no-annotations-required.html](http://blog.bdoughan.com/2012/07/jaxb-no-annotations-required.html)

**创建一个`JAXBContext`**

创建一个主要有两种方法`JAXBContext`

**1 - 上课**

您传入一个域类数组。然后为这些类创建映射。映射也是为引用而创建的（请参阅下面引入的类）。

**2 - 关于上下文路径**

您引用的我的文章 ( [http://blog.bdoughan.com/2010/08/using-xmlanyelement-to-build-generic.html](http://blog.bdoughan.com/2010/08/using-xmlanyelement-to-build-generic.html) ) 使用上下文路径。上下文路径由冒号分隔的包名称组成。每个包必须包含一个`jaxb.index`文件或`ObjectFactory`类。该`jaxb.index`文件是您希望创建的类名的回车分隔列表`JAXBContext`。就像`JAXBContext`在类数组上创建 a 一样，引用类也会被处理。

**开设了哪些课程**

以下是创建`JAXBContext`.

**1 - 引用的类**

如果`JAXBContext`在类上创建了a `Foo`，那么`Bar`也将被处理，因为它被 引用`Foo`。

```
@XmlAccessorType(XmlAccessType.FIELD)
public class Foo {

    private List<Bar> bar;

} 
```

**2 - 超级班**

如果一个类被处理，那么它的超类也被处理。您可以将`@XmlTransient`注释放在一个类上以防止它被处理（参见： [http](http://blog.bdoughan.com/2011/06/ignoring-inheritance-with-xmltransient.html) ://blog.bdoughan.com/2011/06/ignoring-inheritance-with-xmltransient.html ）。

```
public class Foo extends Bar {
} 
```

**3 - 子类**

如果一个类被处理，那么它的子类不会被自动处理。您可以将`@XmlSeeAlso`注释放在一个类上以指定您希望处理的子类。

```
@XmlSeeAlso({Bar.class})
public class Foo {
} 
```

**4 - 从 JAXB 注释中引用的类**

如果一个类被处理，那么在该类中的 JAXB 注释上指定的类也会被处理

```
public class Foo {
    @XmlElements({
         @XmlElement(name="a", type=A.class),
         @XmlElement(name="b", type=B.class)
    })
    private Object bar;
} 
```

# c# - Silverlight 图像不显示

> ID：12035812
> 
> 赞同：1
> 
> 时间：2012-08-20T10:12:34.843
> 
> 标签：c#, silverlight, xaml, wcf-ria-services, ivalueconverter

我正在 Silverlight 中创建应用程序。现在只有一个 DataGrid。我正在使用 WCF RIA 服务从数据库中获取数据。一切正常，期待图像。我将图像作为字节数组获取并尝试使用 Converter 将它们转换为 BitmapImage。我想在 DataGrid 的 RowDetailsTemplate 中显示图像。

这里是：

```
 <sdk:DataGrid.RowDetailsTemplate>
        <DataTemplate>
            <StackPanel> 
                <StackPanel>
                    <Image x:Name="thumbNail"  Width="60" Height="60" VerticalAlignment="Center" ImageFailed="thumbNail_ImageFailed"
                           Source="{Binding gameImage,Converter={StaticResource byteToImageConverter}}">
                    </Image>
                </StackPanel>
            </StackPanel>
        </DataTemplate>
    </sdk:DataGrid.RowDetailsTemplate> 
```

和转换器：

```
public class ByteToImageConverter : IValueConverter
    {
        public BitmapImage ConvertByteArrayToBitMapImage(byte[] imageByteArray)
        {
            BitmapImage img = new BitmapImage();
            using (MemoryStream memStream = new MemoryStream(imageByteArray))
            {
                img.SetSource(memStream);
            }
            return img;
        }

        public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
        {
            BitmapImage img = new BitmapImage();
            if (value != null)
            {
                img = this.ConvertByteArrayToBitMapImage(value as byte[]);
            }
            return img;
        }

        public object ConvertBack(object value, Type targetType, object parameter, CultureInfo culture)
        {
            return null;
        }
    } 
```

但是没有显示图像。

我的 wcf 服务中的方法是这样的：

```
 public List<Games> GamesList()
        {
            string gmConn = ConfigurationManager.ConnectionStrings["GamesConnectionString"].ConnectionString;
            var gamesList = new List<Games>();

            using (SqlConnection conn = new SqlConnection(gmConn))
            {
                string sql = @"Select Name, Developer,Longevity,Distributor,Year,State,Type,graphics, gameplay,sound,general,photo From Games join scores on Games.G_ID=Scores.G_ID";
                conn.Open();

                using (SqlCommand cmd = new SqlCommand(sql, conn))
                {
                    SqlDataReader dr = cmd.ExecuteReader();
                    if (dr != null)
                        while (dr.Read())
                        {
                            Games game = new Games
                            {
                                Name = dr.GetString(0),
                                developer = dr.GetString(1),
                                Longevity = dr.GetInt32(2),
                                Distributor = dr.GetString(3),
                                Year = dr.GetString(4),
                                State = dr.GetString(5),
                                Type = dr.GetString(6),
                                Graphics = dr.GetDouble(7),
                                Gameplay = dr.GetDouble(8),
                                Sound = dr.GetDouble(9),
                                General = dr.GetDouble(10)
                            };
                            if (!dr.IsDBNull(11))
                            {
                                byte[] blob = new byte[(dr.GetBytes(11, 0, null, 0, int.MaxValue))];
                                dr.GetBytes(11, 0, blob, 0, blob.Length);
                                using (MemoryStream ms = new MemoryStream())
                                {
                                    ms.Write(blob, 0, blob.Length - 0);
                                    Bitmap bm = (Bitmap)Image.FromStream(ms);
                                    using (MemoryStream msJpg = new MemoryStream())
                                    {
                                        bm.Save(msJpg, ImageFormat.Jpeg);
                                        game.gameImage = msJpg.GetBuffer();
                                    }
                                }
                            }
                            gamesList.Add(game);
                        }
                    return gamesList;
                }
            }
        } 
```

在 mainPage.xaml.cs 我正在设置我的数据网格的 ItemsSource。

```
public partial class MainPage : UserControl
{
    public MainPage()
    {
        InitializeComponent();

        SampleServiceClient client = new SampleServiceClient();

        client.GamesListCompleted += new EventHandler<GamesListCompletedEventArgs>(client_GamesListCompleted);
        client.GamesListAsync();
    }

    void client_GamesListCompleted(object sender, GamesListCompletedEventArgs e)
    {
        CustomerGrid.ItemsSource = e.Result;
    }
} 
```

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T10:59:59.983

我用您的代码创建了一个简单的测试项目，但无法重现您的问题。字节数组可能已损坏？（只是猜测..）

无论如何，您可以在这里找到并下载测试项目：[https](https://skydrive.live.com/redir?resid=DEB5DDFF6A505390!278) ://skydrive.live.com/redir?resid=DEB5DDFF6A505390!278我制作了一个带有嵌入式图像的简单项目。我打开该图像并将其转换为字节数组。然后我使用绑定来显示图像。

**MainPage.xaml.cs**

```
using System;
using System.ComponentModel;
using System.IO;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Resources;

namespace SilverlightTest
{
    public partial class MainPage : UserControl, INotifyPropertyChanged
    {
        public MainPage()
        {
            InitializeComponent();

            using (var ms = new MemoryStream())
            {
                StreamResourceInfo sr = Application.GetResourceStream(new Uri("SilverlightTest;component/Koala.jpg", UriKind.Relative));
                sr.Stream.CopyTo(ms);
                _photo = ms.ToArray();
            }

            this.DataContext = this;
        }

        private byte[] _photo;
        public byte[] Photo
        {
            get
            {
                return _photo;
            }
        }

        public event PropertyChangedEventHandler PropertyChanged;
        protected void OnPropertyChanged(string prop)
        {
            if (PropertyChanged != null)
            {
                PropertyChanged(this, new PropertyChangedEventArgs(prop));
            }
        }
    }
} 
```

**主页.xaml**

```
<UserControl x:Class="SilverlightTest.MainPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:local="clr-namespace:SilverlightTest"
    mc:Ignorable="d"
    d:DesignHeight="300" d:DesignWidth="400">
    <UserControl.Resources>
        <local:ByteToImageConverter x:Name="byteToImageConverter" />
    </UserControl.Resources>

    <Grid x:Name="LayoutRoot" Background="White">
        <Image Width="320" Height="240" VerticalAlignment="Center" Source="{Binding Path=Photo, Converter={StaticResource byteToImageConverter}}" />
    </Grid>
</UserControl> 
```

并且图像作为资源包含在项目中。

**更新**

我看到您在项目中使用了以下代码：

```
byte[] blob = new byte[(dr.GetBytes(11, 0, null, 0, int.MaxValue))];
dr.GetBytes(11, 0, blob, 0, blob.Length);
using (MemoryStream ms = new MemoryStream())
{
    ms.Write(blob, 0, blob.Length - 0);
    Bitmap bm = (Bitmap)Image.FromStream(ms);
    using (MemoryStream msJpg = new MemoryStream())
    {
        bm.Save(msJpg, ImageFormat.Jpeg);
        game.gameImage = msJpg.GetBuffer();
    }
} 
```

此代码将不起作用。您使用[`GetBuffer()`](http://msdn.microsoft.com/en-us/library/system.io.memorystream.getbuffer.aspx)此代码返回（根据 msdn）：

> 创建此流的字节数组，或者如果在当前实例的构造期间未向 MemoryStream 构造函数提供字节数组，则为基础数组。

要获得正确的数组，请使用[`ToArray()`](http://msdn.microsoft.com/en-us/library/system.io.memorystream.toarray.aspx)MemoryStream 类的函数：

```
byte[] blob = new byte[(dr.GetBytes(11, 0, null, 0, int.MaxValue))];
dr.GetBytes(11, 0, blob, 0, blob.Length);
using (MemoryStream ms = new MemoryStream())
{
    ms.Write(blob, 0, blob.Length - 0);
    Bitmap bm = (Bitmap)Image.FromStream(ms);
    using (MemoryStream msJpg = new MemoryStream())
    {
        bm.Save(msJpg, ImageFormat.Jpeg);
        game.gameImage = msJpg.ToArray();
    }
} 
```

并进行一些重构：

```
byte[] blob = new byte[(dr.GetBytes(11, 0, null, 0, int.MaxValue))];
dr.GetBytes(11, 0, blob, 0, blob.Length);
using (MemoryStream ms = new MemoryStream(blob))
{
    Bitmap bm = (Bitmap)Image.FromStream(ms);
    using (MemoryStream msJpg = new MemoryStream())
    {
        bm.Save(msJpg, ImageFormat.Jpeg);
        game.gameImage = msJpg.ToArray();
    }
} 
```

**更新 2** 我写了一个小程序来测试你给我的文件（顺便说一下重命名文件）： [SilverlightTestV2.zip](https://skydrive.live.com/redir?resid=DEB5DDFF6A505390!279)

```
using System;
using System.Drawing;
using System.Drawing.Imaging;
using System.IO;

namespace ByteTransformer
{
    class Program
    {
        static void Main(string[] args)
        {
            using (var fs = File.OpenRead("byteArray.dat"))
            {
                var bm = Image.FromStream(fs);

                using (MemoryStream msJpg = new MemoryStream())
                {
                    bm.Save(msJpg, ImageFormat.Jpeg);
                    using (var ts = File.Create("out.jpg"))
                    {
                        var img = msJpg.ToArray();
                        ts.Write(img, 0, img.Length);
                    }
                }
            }
        }
    }
} 
```

这个程序在行上抛出一个 ArgumentException：`var bm = Image.FromStream(fs);`

因此，我认为或者您给我的文件不包含 sql 中的实际字节数组（也就是您保存错误），或者 sql 中的字节数组已损坏。但是由于您可以实际看到图像，因此我认为您将其保存错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T10:32:24.367

**更新：**

在您的方法中将 blob 直接分配给您的 gameImage-Property 就足够了`GamesList`。其他代码应该没用。

```
byte[] blob = new byte[(dr.GetBytes(11, 0, null, 0, int.MaxValue))];
dr.GetBytes(11, 0, blob, 0, blob.Length);
game.gameImage = blob; 
```

此外，当您在 MemoryStream 上调用[GetBuffer](http://msdn.microsoft.com/de-de/library/system.io.memorystream.getbuffer.aspx)时，您将获得在 MemoryStream 的 ctor 中传递的数组。在您的情况下，您将得到一个空数组或 null。我不知道。

**最初的：**

将方法更改`ConvertByteArrayToBitMapImage`为以下

```
 public BitmapImage ConvertByteArrayToBitMapImage(byte[] imageByteArray) {
   BitmapImage img = new BitmapImage();
   MemoryStream memStream = new MemoryStream(imageByteArray);

   img.SetSource(memStream);

   return img;
 } 
```

当您使用`using`-Statement 处理 MemoryStream 时，流将设置为关闭。所以不能从使用设置的流中读取 BitmapImage `SetSource`。

# css - 让浏览器从实时网站上的缓存刷新的最佳方法？

> ID：12035813
> 
> 赞同：0
> 
> 时间：2012-08-20T10:12:35.637
> 
> 标签：css, image, browser-cache

它是关于在已经在线和使用的网站上更改设计（css 文件和图像）。我想知道在不手动清除浏览器缓存的情况下确保访问者看到更改的最佳做法是什么。我想到的事情：

*   更改元标记 - 被解雇，因为我不希望该网站总是从服务器加载
*   在进行更改后包含带有参数（如时间戳）的 css 文件
*   更改包含图像的名称，以便重新加载它们 - 意味着还要更改包含图像的文件中的名称
*   ?

还有什么可以实现从服务器加载？我忘记了一些优点/缺点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T10:23:52.717

这篇文章可能重复：[如何控制所有浏览器的网页缓存？](https://stackoverflow.com/questions/49547/making-sure-a-web-page-is-not-cached-across-all-browsers)

我最喜欢的解决方案是在调用文件后设置一个随机数，例如

```
css/styles.ccs?628454548

images/sprite.gif?8356484894 
```

每次向浏览器调用页面时，您都可以使用 javascript/php 或其他方式设置这些随机数。

# triggers - 编写 IBM DB2 9.7 内联或编译的 sql 语句不起作用

> ID：12035817
> 
> 赞同：0
> 
> 时间：2012-08-20T10:12:51.517
> 
> 标签：triggers, db2, procedures

我想在 DB2 9.7 中编写“过程”而不定义“CREATE PROCEDURE”语句。显然这是一种叫做“编译”的 sql 语句。但是，我在获取有效语法时遇到了问题。例如，下面的语法似乎不起作用：

```
BEGIN
    DECLARE V_SQL VARCHAR(1024);
    SET V_SQL = 'BEGIN
    IF EXISTS(SELECT NAME FROM SYSIBM.SYSTRIGGERS WHERE NAME = ''TRIGGER_EMPLOYEE_FOR_DELETES'') THEN
    DROP TRIGGER TRIGGER_EMPLOYEE_FOR_DELETES;
    END IF;
    END;';

    PREPARE S1 FROM V_SQL;
    EXECUTE S1;
END 
```

我试过添加/删除“;” 和声明符号“！” 但仍然无法让它工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T12:20:02.227

复合 SQL 语句中不能有`DROP TRIGGER`语句。请参阅[DB2 文档以了解复合 SQL](http://pic.dhe.ibm.com/infocenter/db2luw/v9r7/index.jsp?topic=/com.ibm.db2.luw.sql.ref.doc/doc/r0004239.html)。

如果您能够将`IF`语句移到 之外`V_SQL`，则可以执行以下操作：

```
BEGIN
    DECLARE V_SQL VARCHAR(1024);
    IF EXISTS(SELECT NAME FROM SYSIBM.SYSTRIGGERS 
                  WHERE NAME = 'TRIGGER_EMPLOYEE_FOR_DELETES'
    ) THEN
        SET V_SQL = 'DROP TRIGGER TRIGGER_EMPLOYEE_FOR_DELETES;';
        PREPARE S1 FROM V_SQL;
        EXECUTE S1;
    END IF;
END 
```

当然，如果您需要动态设置条件，这将不起作用。

# c# - 用 c# 编写的 Facebook 照片竞赛 应用程序

> ID：12035819
> 
> 赞同：0
> 
> 时间：2012-08-20T10:12:55.213
> 
> 标签：c#, facebook-c#-sdk

刚从我的新员工那里得到我的第一个任务。

我一直在查看 facebook 应用程序 ( [https://developers.facebook.com/apps](https://developers.facebook.com/apps) )，我想在其中创建一个 facebook 应用程序，这是一个照片竞赛。

但大多数情况下，我只找到有关 html、php 和 css 的信息。

我想问一下，我是否可以制作一个 WPF 应用程序，在其中设计自己的布局和事件。然后构建项目并在我的服务器上上传项目文件并从 facebook 应用程序链接到它。

我一直在寻找一些 Csharp sdk facebook 应用程序示例，但我只能找到程序，它会打开一个窗口，您可以在其中连接到 facebook。

希望你能理解我的问题并给我一个答案:)

克里斯托弗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T10:24:07.493

实际上，您可以使用用户 facebook 登录的 WPF 创建应用程序。这使用了 facebook C# sdk。但大多数人会认为：

> 为什么我需要下载一个只能让我参加比赛的应用程序？

他们（大多数）不会信任/不这样做。另一方面，facebook 应用程序是 facebook 上的页面（就像farmville 等），他们只需点击链接即可进入。无需下载任何内容。

因为这是在 facebook 页面/网络上，所以您必须为您的“在线”应用程序使用 html 和 css。这就是网络的工作方式。

# objective-c - AFNetworking 从 iOS 上传图片到 API

> ID：12035822
> 
> 赞同：7
> 
> 时间：2012-08-20T10:13:15.103
> 
> 标签：objective-c, ios, afnetworking

我在上传带有数据的图像时遇到问题。这段代码允许我上传数据就好了：

```
 NSURL *url = [NSURL URLWithString:@"my_base_url"];
AFHTTPClient *client = [[AFHTTPClient alloc]initWithBaseURL:url];

//depending on what kind of response you expect.. change it if you expect XML
[client registerHTTPOperationClass:[AFJSONRequestOperation class]];

NSDictionary *params = [[NSDictionary alloc]initWithObjectsAndKeys:
                        _topicText.text,@"Topic",
                        @"1",@"Category",
                        @"",@"MainMedia",
                        @"1",@"Creator",
                        nil];
[client postPath:@"apidebate/debates" parameters:params success:^(AFHTTPRequestOperation *operation, id responseObject) {
    //

} failure:^(AFHTTPRequestOperation *operation, NSError *error) {
    NSLog(@"failure");
}]; 
```

但是，我尝试上传包含该数据的图像没有成功：

```
 NSURL *url = [NSURL URLWithString:@"my_base_url"];
AFHTTPClient *httpClient = [[AFHTTPClient alloc] initWithBaseURL:url];
NSData *imageData = UIImageJPEGRepresentation([UIImage imageNamed:@"MainMedia"], 0.5);
NSMutableURLRequest *request = [httpClient multipartFormRequestWithMethod:@"POST" path:@"/upload" parameters:nil constructingBodyWithBlock: ^(id <AFMultipartFormData>formData) {
    [formData appendPartWithFileData:imageData name:@"MainMedia" fileName:@"MainMedia" mimeType:@"image/jpeg"];
}];

AFHTTPRequestOperation *operation = [[AFHTTPRequestOperation alloc] initWithRequest:request];
[operation setUploadProgressBlock:^(NSInteger bytesWritten, long long totalBytesWritten, long long totalBytesExpectedToWrite) {
    NSLog(@"Sent %lld of %lld bytes", totalBytesWritten, totalBytesExpectedToWrite);
}];
[operation start]; 
```

我在工作中可能做错了什么？

**编辑**（添加服务器代码）

后端是 Codeigniter，内置了 REST 客户端 Phil Sturgeon（很棒的库，顺便说一句）。我几乎可以肯定这不是服务器代码，因为此方法的第一行向我发送了一封电子邮件。当我尝试使用上面的代码发布图像时，电子邮件永远不会出现。所以，似乎它甚至没有到达终点。

```
//CONTROLLER FROM API
function debates_post()
{
    mail('myemailaddress@gmail.com', 'Test', 'Posted');
    $tmp_dir = "images/posted/";

    if(isset($_FILES['MainMedia'])){
        $SaniFileName = preg_replace('/[^a-zA-Z0-9-_\.]/','', basename($_FILES['MainMedia']['name']));

        $file = $tmp_dir . $SaniFileName;
        move_uploaded_file($_FILES['MainMedia']['tmp_name'], $file);
    }
    else
        $SaniFileName = NULL;

    $data = array('Topic'=>$this->post('Topic'), 'MainMedia'=>$this->post('MainMedia'), 'Category'=>$this->post('Category'), 'Creator'=>$this->post('Creator'));
    $insert = $this->debate->post_debate($this->post('Topic'), $SaniFileName, $this->post('Category'), $this->post('Creator'));
    if($insert){
        $message = $this->db->insert_id();
    }
    else{
        $message = 'Insert failed';
    }

    $this->response($message, 200);
}

//MODEL
function post_debate($Topic=NULL, $MainMedia='', $Category=NULL, $Creator=NULL){
    $MainMedia = ($MainMedia)?$MainMedia:'';
    $data = array(
                    'Topic' => $Topic,
                    'MainMedia' => $MainMedia,
                    'Category' => $Category,
                    'Creator' => $Creator,
                    'Created' => date('Y-m-d h:i:s')
                );
    return $this->db->insert('debate_table', $data);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-26T06:02:41.453

好的，所以显然使用`fileName:@"MainMedia"`文件名给我留下了一个没有扩展名的上传文件，这导致了服务器端错误。添加`".jpg"`到`"MainMedia.jpg"`修复此问题。

# c# - 使用 XmlSerializer 将 xml 元素反序列化为数组不起作用

> ID：12035823
> 
> 赞同：2
> 
> 时间：2012-08-20T10:13:22.360
> 
> 标签：c#, .net, deserialization, xmlserializer

我想将以下 xml 反序列化到我的类中，我无法更改 xml，因为它来自通过 tcp/ip 的设备。

```
<?xml version="1.0" encoding="utf-8"?>
<CONTACTINFORMATION UID="1234">
 <LoginId><![CDATA[1234]]></LoginId>
<ContactId><![CDATA[2134]]></ContactId>
<ContactType>CCININTERN</ContactType>
<Status>CONVERSATION</Status>
<From><![CDATA[123]]></From>
<To><![CDATA[123]]></To>
<WaitTime><![CDATA[123]]></WaitTime>

<ContactPropertySummary>
  <ContactProperty>
    <Name><![CDATA[13]]></Name>
    <Value><![CDATA[13]]></Value>
    <Hidden>NO</Hidden>
    <Url><![CDATA[13]]></Url>
  </ContactProperty>
</ContactPropertySummary>

<SkillSummary>
  <Skill>
    <Name><![CDATA[123]]></Name>
    <Mandatory>YES</Mandatory>
  </Skill>

  <Skill>
    <Name><![CDATA[124]]></Name>
    <Mandatory>YES</Mandatory>
  </Skill>
</SkillSummary>

<ContactCodeSummary>
  <ContactCode>
    <Id>123</Id>
    <Hidden>NO</Hidden>
    <Assigned>YES</Assigned>
  </ContactCode>

</ContactCodeSummary>
<GroupSummary>
  <Group>
    <Name><![CDATA[123]]></Name>
    <Mandatory>YES</Mandatory>
  </Group>

</GroupSummary>
<PreviousAgent><![CDATA[2]]></PreviousAgent>
<ScratchPadId><![CDATA[2]]></ScratchPadId>
<ScratchPadData><![CDATA[2]]></ScratchPadData>
<FaxSpecific>
  <NbrOfPages>2</NbrOfPages>
</FaxSpecific>
 </CONTACTINFORMATION> 
```

我的课：

```
 [Serializable]
 [XmlRoot("CONTACTINFORMATION")]
 public class Contact
  {
    #region :: PROPERTIES ::
    public string LoginId { get; set; }
    public string ContactId { get; set; }
    public ContactType ContactType { get; set; }
    public ContactStatus Status { get; set; }
    [XmlElement("From")]
    public string ContactFrom { get; set; }
    [XmlElement("To")]
    public string ContactTo { get; set; }
    public int WaitTime { get; set; }

    [XmlElement("SkillSummary", Form = System.Xml.Schema.XmlSchemaForm.Unqualified)]
    [XmlArray("Skill")]
    //[XmlElement("SkillSummary",  Form = System.Xml.Schema.XmlSchemaForm.Unqualified)]
    public Skill[] Skills { get; set; }

    [XmlArray("ContactPropertySummary")]
    public ContactProperty[] Properties { get; set; }

    [XmlArray("GroupSummary", Form = System.Xml.Schema.XmlSchemaForm.Unqualified)]
    [XmlArrayItem("Group", typeof(Group), Form = System.Xml.Schema.XmlSchemaForm.Unqualified)]
    public Group[] Groups { get; set; }
 } 
```

技能数组有2个技能，反序列化后数组只有1个技能，组和属性数组为空...

我做错了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-20T10:54:00.830

1.  您应该使用 XmlArray 和 XmlArrayItem 属性正确装饰数组属性。例如，对于技能属性，您将 XmlElement 与 XmlArray 一起使用，这是不允许的。

    ```
    [XmlArrayItem("Skill", typeof(Skill), Form = System.Xml.Schema.XmlSchemaForm.Unqualified)]
    [XmlArray("SkillSummary", Form = System.Xml.Schema.XmlSchemaForm.Unqualified)]
    public Skill[] Skills
    {
      get;
      set;
    }

    [XmlArray("ContactPropertySummary")]
    [XmlArrayItem("ContactProperty", typeof(ContactProperty), Form = System.Xml.Schema.XmlSchemaForm.Unqualified)]
    public ContactProperty[] Properties
    {
      get;
      set;
    }

    [XmlArray("GroupSummary", Form = System.Xml.Schema.XmlSchemaForm.Unqualified)]
    [XmlArrayItem("Group", typeof(Group), Form = System.Xml.Schema.XmlSchemaForm.Unqualified)]
    public Group[] Groups
    {
      get;
      set;
    } 
    ```

2.  确保 xmlArrayItem 'types' 具有正确的读/写属性

    ```
    public class Skill
    {
        public string Name
        {
            get;
            set;
        }
        public string Mandatory
        {
            get;
            set;
        }
    } 
    ```

我建议您通过属性尽可能多地向 XMLSerializer 提供信息。你似乎并没有太离谱。使用上述定义，我能够成功反序列化您提供的 XML。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-20T10:52:46.313

首先定义一个类技能，然后在你的合同类中使用这个类。

```
// We're going to define a class called Skill
[Serializable()]
public class Skill
{
    [System.Xml.Serialization.XmlElement("Name")]
    public string Name { get; set; }

    [System.Xml.Serialization.XmlElement("Mandatory")]
    public string Mandatory { get; set; }
}

[Serializable]
[XmlRoot("CONTACTINFORMATION")]
public class Contact
{
   // ...... Rest of your elements
   [XmlArray("SkillSummary")]
   [XmlArrayItem("Skill", typeof(Skill))]
   public Skills[] Skill { get; set; }
} 
```

请对组和属性执行相同的操作。

# windows - 让 Edwin 使用 Cx Cf 正确打开 Scheme 文件

> ID：12035828
> 
> 赞同：1
> 
> 时间：2012-08-20T10:13:48.603
> 
> 标签：windows, scheme, sicp, edwin

我正在学习 SICP。我在我的 Windows 7（32 位）/AMD（64 位）机器上使用安装了 MIT-Scheme 的 Edwin 3.116。

在我的一生中，我一直无法发现 Edwin 无法正确打开和读取文件的原因：

*   当我打开一个现有的 .scm 文件（其中包含我的代码）时，Edwin 只会用我的文件名打开一个空白缓冲区。
*   如果我然后保存它，我的代码会被空白覆盖。很明显，埃德温并没有刻意写作。

除了无法找到任何答案外，我在以下方面没有成功：

*   Cx Cf 后跟完整路径 D:\my-schemes\filename.scm（而默认目录位于 C:.....）
*   Mx cd 后跟 d:\my-schemes 后跟 Cx Cf filename.scm
*   退出，重新启动 MIT-Scheme 并重试上述命令
*   卸载-重新安装 MIT-Scheme 并重试上述命令

有什么我没有做的 - 比如在一些配置文件中指定一些参数？（安装指南不需要任何特殊配置。对于 Windows，除了遵循安装程序。）

我现在正在从文件到缓冲区复制粘贴代码并从缓冲区到文件写入，但如果我能让 Edwin 也能阅读，我的计划可能会好得多。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-04T07:58:24.680

以防万一您可能还没有找到解决方案。我遇到了同样的问题，只是找到了一个对我有用的问题，所以我正在考虑分享我的解决方案。如果您使用默认设置安装，则所有内容都安装在“Program Files/...”中。这个问题似乎是目录名称包含空格。当我尝试保存在没有空间的其他目录中时，我可以写入文件。我可以用普通的文本编辑器打开文件，但是当我用 Edwin 打开时，我看到的只是一个空白页。我尝试安装旧版本（MIT GNU 方案 9.0），它的工作原理如本错误报告中所述：[http ://savannah.gnu.org/bugs/?35250](http://savannah.gnu.org/bugs/?35250)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-10-17T18:10:56.257

[vutha](https://stackoverflow.com/users/2349290/vutha)建议在没有空格的目录中安装对我不起作用，因为我需要访问名称中包含空格的文件夹中的文件。但它为我指明了正确的方向。版本 9.1 和 9.2 中存在一个错误，完全阻止了 Windows 中的 Edwin。

唯一可行的是卸载最新版本（安装文件夹中有一个 uninst.exe 文件），然后安装[版本 9.0](http://ftp.gnu.org/gnu/mit-scheme/stable.pkg/9.0/mit-scheme-9.0-i386-win32.exe)。

# iphone - Cocoa 错误 256，使用 initWithContentsOfURL 时：

> ID：12035830
> 
> 赞同：1
> 
> 时间：2012-08-20T10:14:01.563
> 
> 标签：iphone, objective-c, ios, cocoa-touch

我从我的网站获取数据：

```
NSString *website = [NSString stringWithFormat:@"http://www.mysite.com/fbconnect.php?email=%@&name=%@&pass=***", nameTrimmmed, [jsonObject objectForKey:@"email"]];
NSLog(@"%@", website);
NSError *error = nil;
NSString *contents = [[NSString alloc] initWithContentsOfURL:[NSURL URLWithString:website] encoding:NSUTF8StringEncoding error:&error]; 
```

内容有 Cocoa 错误 256。我错在哪里？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T10:38:48.430

问题在于希伯来字符，您应该对它们进行 html 转义，也可以尝试使用英文字符请求，看看它是否有效

```
- (void)yourMethod
{
    NSString *name = @"שימרגוליס";
    name = AFURLEncodedStringFromStringWithEncoding(name, NSUTF8StringEncoding);
    NSString *website = [NSString stringWithFormat:@"http://www.ba-cafe.com/fbconnect.php?email=%@&name=%@&pass=SwHyK17!",@"email@mail.com",name];
    NSLog(@"%@", website);
    NSError *error = nil;
    NSString *contents = [[NSString alloc] initWithContentsOfURL:[NSURL URLWithString:website] encoding:NSUTF8StringEncoding error:&error];
} 
```

[AFNetworking 框架](https://github.com/AFNetworking/AFNetworking/blob/master/AFNetworking/AFHTTPClient.m)`AFURLEncodedStringFromStringWithEncoding`的函数在哪里

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T10:23:08.420

检查控制台日志`NSLog(@"%@", website);`

你会看到这样的东西：

```
http://www.mysite.com/fbconnect.php?email=thetrimmedname&name=emailaddress&pass=*** 
```

所以这样做：

```
NSString *website = [NSString stringWithFormat:@"http://www.mysite.com/fbconnect.php?email=%@&name=%@&pass=***", [jsonObject objectForKey:@"email"], nameTrimmmed ]; 
```

而不是这个：

```
NSString *website = [NSString stringWithFormat:@"http://www.mysite.com/fbconnect.php?email=%@&name=%@&pass=***", nameTrimmmed, [jsonObject objectForKey:@"email"]]; 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-20T10:45:11.977

这是因为电子邮件地址中的点。

看这里： [尝试使用 NSURL 访问 Google 翻译时出错](https://stackoverflow.com/questions/7576103/error-while-trying-to-access-google-translate-with-nsurl)

# ios - 应用程序恢复上的错误域 NSPOSIXErrorDomain

> ID：12035831
> 
> 赞同：1
> 
> 时间：2012-08-20T10:14:05.147
> 
> 标签：ios, nsurlconnection, cfstream, nsurlerrordomain

我的应用需要刷新简历上的内容。我正在使用 CFStream API 连接到我们的服务器。

有几次，当应用程序恢复时，即使有互联网连接，我也会收到错误代码 9 的 NSPOSIXErrorDomain 错误。

我应该在简历上做些什么特别的事情，例如在尝试连接之前稍等一下？另外，在挂起时我应该做些什么特别的事情（通过屏幕锁定按钮或主页按钮）？

# c - 来自 void * 的双指针和单指针？

> ID：12035832
> 
> 赞同：4
> 
> 时间：2012-08-20T10:14:09.040
> 
> 标签：c, pointers

我正在阅读一本关于在 C 中实现 OOP 的书，并找到了以下代码：

```
void delete (void * self)
{ 
    const struct Class ** cp = self;
    if (self && * cp && (* cp) -> dtor)
        self = (* cp) -> dtor(self);
    free(self);
} 
```

我想知道为什么作者创建了一个双指针而不是像这样的单指针

```
void delete (void * self)
{ 
    const struct Class * cp = self;
    if (self && cp && cp -> dtor)
        self = cp -> dtor(self);
    free(self);
} 
```

有什么区别吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-20T10:24:29.333

在作者的对象系统中，每个对象结构都包含一个指向其类的指针作为其第一个元素：

```
typedef struct Object1 {
    Class *myclass;
    int data;
} Object1;

typedef struct Object2 {
    Class *myclass;
    double data;
} Object2; 
```

这意味着通过将`void *`指向任何对象的指针视为`Class **`指针，可以在不知道对象的实际类型的情况下跟踪类指针。这是标准允许的，因为：

> [c11](/questions/tagged/c11 "显示标记为“c11”的问题")
> 
> ### 6.7.2.1 结构和联合说明符
> 
> 15 [...] 指向结构对象的指针，经过适当转换，指向其初始成员（或者如果该成员是位域，则指向它所在的单元），反之亦然。[...]

因此，任何指针等都`Object1 *`可以`Object2 *`转换为指向其第一个元素的指针，即`Class **`（因为任何一个的第一个元素是 type `Class *`，指向第一个元素的指针是 type `Class **`）。请参阅[在 C 中，指向结构的指针是否总是指向其第一个成员？](https://stackoverflow.com/questions/7312555/in-c-does-a-pointer-to-a-structure-always-point-to-its-first-member)了解更多信息。

这是一种合法的方法，但有点难以遵循。一个等价物是写

```
typedef struct BaseObject {
    Class *myclass;
} BaseObject; 
```

并要求每个对象结构都包含一个`BaseObject`实例作为其第一个成员；然后该`delete`函数将`self`转换为`BaseObject *`并写入`((BaseObject *) self)->myclass->dtor`：

```
void delete (void * self)
{ 
    BaseObject *base = self;
    if (self && base->myclass && base->myclass—&gt;dtor)
        self = base->myclass->dtor(self);
    free(self);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T10:26:26.697

在这个系统中，每个对象在第一个字段中都包含一个指向其类的指针。实际上，`Class **c = self`从对象实例中获取类结构。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T10:25:44.143

由于结构设计：

```
*(const struct Class **)p=class; 
```

在那里： [http ://humelab.googlecode.com/svn-history/r3/trunk/ooc/new.c](http://humelab.googlecode.com/svn-history/r3/trunk/ooc/new.c)

如在

```
void * new(const void *_class,...)
{
 const struct Class *class=_class;
 void *p=calloc(1,class->size);
 assert(p);
 *(const struct Class **)p=class;  //<------look here!

 if(class->ctor)
 {
  va_list ap;
  va_start(ap,_class);
  p=class->ctor(p,&ap);
  va_end(ap);
 }
 return p;
} 
```

# javascript - 使用 Handlebars.js 时如何将模板 js 外包到不同的文件

> ID：12035839
> 
> 赞同：5
> 
> 时间：2012-08-20T10:14:53.447
> 
> 标签：javascript, jquery, html, mvvm, handlebars.js

我有这个模板脚本

```
<script id="some-template" type="text/x-handlebars-template">
   {{#users}}
     {username}
     {email}
</script> 
```

我想将它外包给一个名为“user_template.js”的文件，该文件如下所示：

```
 {{#users}}
     {username}
     {email} 
```

并在主 index.html 中创建此链接：

```
<script id="some-template" type="text/x-handlebars-template" src="user_template.js"></script> 
```

问题是 -**它不起作用**- 我该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-20T11:06:44.653

我会为此使用**RequireJS**。很适合使用模块，还有一个名为**text**的插件可以很好地与模板一起使用。

如果这听起来很有趣，这里有一些链接：

[http://requirejs.org/](http://requirejs.org/)

[http://requirejs.org/docs/download.html#text](http://requirejs.org/docs/download.html#text) -- 文本插件

RequireJS 仅适用于您想使用模块的情况，如果不是，Alon 的答案会更好。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-20T10:23:06.803

您可以使用 ajax 来加载模板文件。

使用 jQuery：

```
$.get("user_template.js", function(template_text){
    var template = Handlebars.compile(template_text);
    // more things
}); 
```

# java - 什么是 J9VMInternals，它是如何工作的？

> ID：12035844
> 
> 赞同：2
> 
> 时间：2012-08-20T10:15:14.053
> 
> 标签：java, debugging, nullpointerexception, classloader

在java中

```
class C{
   public void d(){
          ...
       E.f();
          ...
   }
} 
```

堆栈跟踪将是

```
at a.b.C.d(C.java:300)
at a.b.E.f(E.java:500) 
```

但是如果我看到这样的东西，我该怎么做'J9VMInternals'类

```
at a.b.E.f(E.java:500)
     ...
at java.lang.J9VMInternals.initializeImpl(Native Method)
at java.lang.J9VMInternals.initialize(J9VMInternals.java:200)
at a.b.c.d(c.java:300) 
```

我正在尝试调试的原始堆栈跟踪

```
java.lang.NullPointerException
    at java.lang.ClassLoader.initializeClassLoaderAssertStatus(ClassLoader.java:1215)
    at java.lang.ClassLoader.<init>(ClassLoader.java:167)
    at java.lang.ClassLoader.<init>(ClassLoader.java:126)
                   ....
    at java.lang.J9VMInternals.initializeImpl(Native Method)
    at java.lang.J9VMInternals.initialize(J9VMInternals.java:200)
    at <J2EE_listner_contextInitializedMethod> 
```

我在 java 1.6.0_24 weblogic 11

* * *

## 回答 #1

> 赞同：-5
> 
> 时间：2012-08-20T10:18:52.117

您是否希望您的类是凭空实例化的？JVM 加载并初始化它，您将看到此类堆栈跟踪以及您的类

# apache - CXF Apache WSDL2Java 设置端点

> ID：12035845
> 
> 赞同：2
> 
> 时间：2012-08-20T10:15:17.540
> 
> 标签：apache, cxf, endpoint, wsdl2java

一开始我必须警告我不熟悉 Web 服务，我想简单地生成我需要的东西，并学习使用的基础知识。

我收到了 .wsdl 和 .xsd 文件（本地存储）。我已经使用 Apache CXF WSDL2Java 工具生成了 java 代码（我已经生成了一个客户端）。我也有一个端点（作为最后没有'？WSDL'的url - 无论这个结束意味着什么）。如何设置此端点？

如果我使用：

```
Blachblach_Service ss = new Blachblach_Service(new URL(recived_url));
Blachblach port = ss.getBlachblachSOAP(); 
```

我得到一个例外。当我使用soapUI 将XML 发送到Web 服务时，一切正常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T16:03:13.343

首先，您需要初始化您的 Web 服务客户端。[在这里](https://stackoverflow.com/questions/11428849/webservice-client-should-i-keep-service-or-port-instance/11487791#11487791)查看我的答案如何使这项工作。

`?WSDL`结束意味着您可以在浏览器中看到 Web 服务 WSDL 文件，您可以通过向 Web 服务`SOAP`提供一些有效请求来通过协议访问该 Web 服务。

如果您需要使用`Spring`. [这](http://cxf.apache.org/docs/jax-ws-configuration.html)是一个很好的例子，如何做到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T12:29:54.937

是的，通常我们在服务类对象上设置端点 URL 等参数并从中检索端口。我们从端口调用 Web 服务方法。你能详细说明你得到的例外吗？

# c# - 当我在具有不同分辨率屏幕的其他设备上运行我的项目时，我的视觉组件的形状会混淆

> ID：12035846
> 
> 赞同：-2
> 
> 时间：2012-08-20T10:15:19.317
> 
> 标签：c#, winforms, visual-studio-2010

当我在另一台 PC 上运行我的应用程序时，表单上组件的位置不正确，例如，我的标签超出了面板的边缘，文本框重叠了按钮。

我的应用程序是一个 Windows 窗体应用程序。

这可能是什么原因？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T10:25:10.690

以下可能是造成这种情况的原因

```
1\. Screen Resolution
2\. System Font Size 
```

# assembly - ADD rA, rB, r0 和 ADDI rA, rB, 0 有什么区别？

> ID：12035856
> 
> 赞同：1
> 
> 时间：2012-08-20T10:16:01.153
> 
> 标签：assembly, mips

我听说这些非常不同，但为什么结果不同？

`ADD rA, rB, r0`

`r0`是包含 0的指令类型 R，因此将 0 添加到 rB 并放置在包含 rB+0 的 rA 中，对吗？

`ADDI rA, rB, 0`

这是我的指令类型，但它与第一​​个指令相同还是不会？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T13:54:06.073

您将不得不查看特定处理器的实现。如果处理器在读取 r0 时知道它可以快捷方式并将其设为零，那么它可以比去寄存器文件获取 r0 的值更快。如果有很多寄存器文件活动迫使停顿，这将发挥作用，只有在多条指令上存在寄存器文件干扰时才添加时钟。基本上，我怀疑从这个角度来看有什么不同。

就功能而言，这两条指令是等效的，因为 r0 总是读为零，因此这两个操作的结果都是。

```
ra = rb + 0. 
```

ADD 和 ADDI 信号都溢出，但是将零加到 rb 你不能得到溢出，所以不管你使用 ADD/ADDU 还是 ADDI/ADDIU

# oracle - PL/SQL 中的第一个程序

> ID：12035857
> 
> 赞同：1
> 
> 时间：2012-08-20T10:16:04.043
> 
> 标签：oracle, plsql, oracle-sqldeveloper

我正在尝试学习一些 PL/SQL，但我的第一个程序有问题：

```
declare
    v_string_tx varchar2(256):='Hello World!';
begin  
    dbms_output.put_line(v_string_tx);
end; 
```

当我在 SQL Developer 中运行它时，我只收到一条消息说“匿名块已完成”。但是我没有得到“Hello World！” 正如预期的那样。有人知道我错过了什么吗？

我尝试在此代码之前放置“set serveroutput on”行，但是当我这样做并运行它时，什么都没有发生（我什至没有收到告诉我匿名块已完成的消息）。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-20T10:26:24.200

要在 SQL/Developer 中查看输出，您必须这样做：

*   转到查看-> DBMS 输出（这将打开一个名为“DBMS 输出”的新选项卡）
*   点击绿色+号
*   从下拉框中选择您的连接（这将在“DBMS 输出”中添加一个新的子选项卡）
*   运行你的脚本

# python - Python：子类化线程的运行方法会出错

> ID：12035858
> 
> 赞同：2
> 
> 时间：2012-08-20T10:16:12.790
> 
> 标签：python, multithreading

在对 Python 2.7.3 的线程模块的线程进行子类化时，我遇到了奇怪的行为。考虑下一个名为 test.py 的代码：

```
import threading

def target_function(): print 'Everything OK'

class SpecificThread(threading.Thread):
    def run(self):
        try:
            if self.__target:
                self.__target(*self.__args, **self.__kwargs)
        finally:
            # Avoid a refcycle if the thread is running a function with
            # an argument that has a member that points to the thread.
            del self.__target, self.__args, self.__kwargs  

def check():
    thread = SpecificThread(target=target_function)
    #thread = threading.Thread(target=target_function)
    thread.run()
    print thread.name, 'is running:', thread.is_alive() 
```

运行 check() 时，此代码会引发以下错误：

```
>>> check()
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "test.py", line 18, in check
    thread.run()
  File "test.py", line 13, in run
    del self.__target, self.__args, self.__kwargs  
AttributeError: _SpecificThread__target 
```

虽然，SpecificThread 的 run() 方法与原始 threading.py 模块中的代码完全相同。如果使用 threading.Thread 或 SpecificThread 没有覆盖 run() 方法，则脚本运行完美。考虑到 Python 文档声明它是允许的，我不明白为什么覆盖不起作用。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T10:23:35.183

您遇到的事情在 Python中称为[名称修饰。](http://docs.python.org/reference/expressions.html#atom-identifiers)

这意味着所有以双下划线开头的非系统属性（属性如“__attrname__”）都会被解释器自动重命名为_Classname__attrname）。那是一种保护机制，这样的设计通常意味着你甚至不去接触那些领域（它们已经以适当的方式处理），通常被称为“私有领域”。

因此，如果您出于某种原因想要访问这些字段，请使用上面的符号：

```
self._Thread__target 
```

请注意，该字段以 开头`_Thread`，而不是以开头`_SpecificThread`，因为该属性是在`Thread`类中定义的。

# c - stat 结构错误（fstat 系统调用）

> ID：12035861
> 
> 赞同：0
> 
> 时间：2012-08-20T10:16:59.660
> 
> 标签：c, unix

我有这个代码片段：

```
struct stat *fileData;
if((fd=open("abc.txt",O_RDONLY)==-1)
      perror("file not opened");
if((fstat(fd,fileData)==-1)
      perror("stucture not filled");
printf("%d",fileData.st_size); 
```

它向我显示错误：

```
 request for member ‘st_size’ in something not a structure or union 
```

我也试过使用`stat`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T10:18:58.723

就目前而言，您正在将 ( `fstat`is) 写入一个未初始化的指针，然后尝试从中读取它，就好像它是一个`struct stat`. 您应该将代码更改为：

```
struct stat fileData;
if((fstat(fd, &fileData) == -1)
              ^ 
```

或者，您可以`malloc`记住`fileData`然后使用`fileData->st_size`. 这会不太优雅（你必须`free`等）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T10:20:30.057

你的`fileData`结构是一个指针。`fileData.st_size`必须是`fileData->st.size`或`(*fileDate).st_size`

但是， stat() 期望您为 struct stat 提供存储，您必须这样做

```
struct stat fileData; // <---change to this
if((fd=open("abc.txt",O_RDONLY)==-1)
      perror("file not opened");
if((fstat(fd,&fileData)==-1)  // <---change to this
      perror("stucture not filled");
printf("%d",fileData.st_size); 
```

# jsp - 在 JSP 中将数据类型转换为 INT 时出错

> ID：12035862
> 
> 赞同：1
> 
> 时间：2012-08-20T10:17:05.783
> 
> 标签：jsp, type-conversion

我通过页面中的 POST/GET 方法从表单接收数据。现在，默认情况下，JSP 将其作为字符串。我想将其转换为 int 并尝试过，但没有成功。

我的 JSP 代码是：

```
String editstr=request.getParameter("some_thing");
int edit;
edit=Integer.parseInt(editstr) 
```

我也尝试过类似的东西

```
int edit=Integer.parseInt(editstr) 
```

两者都不起作用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T11:33:34.770

你得到[NumberFormatException](http://docs.oracle.com/javase/7/docs/api/java/lang/NumberFormatException.html)或[NullPointerException](http://docs.oracle.com/javase/7/docs/api/java/lang/NullPointerException.html)吗？

如果不是，则寻找设置和获取参数的麻烦`some_thing`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T11:37:20.803

您*必须*测试参数是否为空。

```
String editstr=request.getParameter("some_thing");
int edit=0;
if(editstr!=null){
   try{
     edit=Integer.parseInt(editstr);
   }catch(Exception ex) { 
     out.println(ex);
   }
} 
```

PS：您应该必须学习/使用 JSTL 以[避免 JSP 中的 Java 代码](https://stackoverflow.com/questions/3177733/how-to-avoid-java-code-in-jsp-files)。

# xml - JIBX：如何使用多个目标命名空间？

> ID：12035867
> 
> 赞同：1
> 
> 时间：2012-08-20T10:17:35.527
> 
> 标签：xml, namespaces, xsd, jibx

我正在使用 JIBX 将我的 XML 数据映射到 Java 对象。这在 XML 仅包含一个目标名称空间时非常有效。不幸的是，需求发生了变化，现在我得到了包含两个不同名称空间的 XML 数据。

例子：

```
<a:foo> 
  <b:bar>Simple Example</b:bar>
</a:foo> 
```

我的问题是，如何编写一个产生两个不同目标命名空间的 xsd？

```
 <xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema"
            targetNamespace="namespace_of_a"
            xmlns:a="namespace_of_a"
            xmlns:b="namespace_of_b"
            elementFormDefault="qualified">

      <xs:element name="foo">
        <xs:complexType>
          <xs:sequence>

             <!-- this won't work, because b is part of a different namespace -->
             <xs:attribute type="xs:string" use="required" name="bar"/>

          </xs:sequence>
        </xs:complexType>
      </xs:element>

 </xs:schema> 
```

我已经尝试过：

```
 <xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema"
            targetNamespace="namespace_of_a"
            xmlns:a="namespace_of_a"
            xmlns:b="namespace_of_b"
            elementFormDefault="qualified">

      <xs:element name="foo">
        <xs:complexType>
          <xs:sequence>

             <!-- this won't work, because jibx is reporting that targetNamespace is an unknown attribute -->
             <xs:attribute targetNamespace="namespace_of_b" type="xs:string" use="required" name="bar"/>

          </xs:sequence>
        </xs:complexType>
      </xs:element>

 </xs:schema> 
```

请帮忙。我不确定这通常是否可行？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T14:46:13.810

是的，这是可能的。这是 XSD 旨在处理的核心场景之一。

(1) 为每个涉及的命名空间编写单独的模式文档，将该命名空间作为`targetNamespace`元素的`xs:schema`。

如果您的`a:foo`元素只能接受一个`b:bar`元素作为子元素，那么`a`您将需要在架构文档中导入命名空间`b`，以便内容模型`a:foo`可以引用元素`b:bar`。例如，修改您的示例模式文档以包括：

```
<xs:import namespace="namespace_of_b"/> 
```

（注意：有些人会在`schemaLocation`这里添加提示；我不会。）

然后将声明更改为`a:foo`：

```
<xs:element name="foo">
  <xs:complexType>
    <xs:sequence>
      <xs:element ref="b:bar"/>
    </xs:sequence>
  </xs:complexType>
</xs:element> 
```

如果`a:foo`可以接受任何内容，则在其内容模型中使用`xs:any`通配符，并且您不需要导入命名空间`b`（因为您没有引用其中的任何内容）。

在命名空间的模式文档中，以正常方式`b`定义元素（或属性——我认为您一定已经改变了如何呈现示例的想法）。`bar``bar`

(2) 编写一个简单的顶级“驱动程序”模式文档，导入您在步骤 1 中准备的两个特定于名称空间的模式文档。`xs:import`我将在此处的语句中提供模式位置信息。

```
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema"> 
  <xs:import namespace="namespace_of_a" schemaLocation="a.xsd"/>
  <xs:import namespace="namespace_of_b" schemaLocation="b.xsd"/>
</xs:schema> 
```

将有关架构文档的物理位置的信息分离到单个驱动程序文件中，在短期内会使事情变得复杂，因为需要另一个架构文档。但它避免了当您稍后想要稍微改变一些东西时出现的许多令人讨厌的问题。

# emacs - 评估名称存储在字符串中的变量

> ID：12035871
> 
> 赞同：3
> 
> 时间：2012-08-20T10:18:04.153
> 
> 标签：emacs, elisp

考虑一个评估名称为字符串的变量的问题：

```
(defun string-dereference ()
  (interactive)
  (let ((myStr "rst-adjust"))
  ;; (describe-function 'myStr) => Symbol's function definition is void: myStr
  ;; (funcall (format "(describe-function '%s)" myStr) => Invalid function: "(describe-function 'rst-adjust)")
  ) 
```

虽然以下工作

```
(describe-function 'rst-adjust) 
```

`rst-adjust`给定的存储在字符串中，我该怎么做？

**编辑**：

答案是：

```
(describe-function (intern myStr)) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-20T10:29:36.003

`intern`是您正在寻找的功能：

```
(let ((my-str "rst-adjust"))
  (intern my-str))
==> rst-adjust 
```

# asp.net-mvc-3 - 站点核心中的 asp.net web api

> ID：12035875
> 
> 赞同：1
> 
> 时间：2012-08-20T10:18:15.170
> 
> 标签：asp.net-mvc-3, asp.net-web-api, sitecore

我想在 sitecore 中使用 ASP.Net Web API (http://asp.net/Webapi)。当我尝试浏览 API 时，虽然我添加了

```
 <add name="ExtensionlessUrlHandler-ISAPI-4.0_32bit" path="*." verb="GET,HEAD,POST,DEBUG,PUT,DELETE,PATCH,OPTIONS" modules="IsapiModule" scriptProcessor="%windir%\Microsoft.NET\Framework\v4.0.30319\aspnet_isapi.dll" preCondition="classicMode,runtimeVersionv4.0,bitness32" responseBufferLimit="0" />
  <add name="ExtensionlessUrlHandler-ISAPI-4.0_64bit" path="*." verb="GET,HEAD,POST,DEBUG,PUT,DELETE,PATCH,OPTIONS" modules="IsapiModule" scriptProcessor="%windir%\Microsoft.NET\Framework64\v4.0.30319\aspnet_isapi.dll" preCondition="classicMode,runtimeVersionv4.0,bitness64" responseBufferLimit="0" />
  <add name="ExtensionlessUrlHandler-Integrated-4.0" path="*." verb="GET,HEAD,POST,DEBUG,PUT,DELETE,PATCH,OPTIONS" type="System.Web.Handlers.TransferRequestHandler" preCondition="integratedMode,runtimeVersionv4.0" />
</handlers> 
```

在 web.config 中。提到了必要的组件。但是，仍然无法通过.. 我正在使用 Web 应用程序项目。我在 Web 应用程序项目中做了一些示例，它们工作正常。但是，与 sitecore 集成让我很难过。

请输入任何内容..？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-20T10:57:25.790

这可能是因为 Sitecore 是个聪明人，并中断了您尝试在内容树中查找 URL 的请求。

如果您知道要调用的 URL（或它们的部分路径），则可以将它们添加到配置中的 IgnoreUrlPrefixes 设置中。

在这里看到不错的小帖子：

[http://sitecoreblog.alexshyba.com/2011/05/teach-sitecore-to-ignore-directory.html](http://sitecoreblog.alexshyba.com/2011/05/teach-sitecore-to-ignore-directory.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-20T15:00:59.677

如果您正在创建 webapi 路由，您还可以在 RequestPipeline 中执行一个步骤，如果它找到与当前 URL 匹配的路由，则中止管道

```
public override void Process(Sitecore.Pipelines.HttpRequest.HttpRequestArgs args)
    {
        RouteData routeData = RouteTable.Routes.GetRouteData(new HttpContextWrapper(args.Context));

        if (routeData != null)
        {
            HttpContext.Current.RemapHandler(routeData.RouteHandler.GetHttpHandler(HttpContext.Current.Request.RequestContext));
            args.AbortPipeline();
        }
    } 
```

有了它，您可以在解析数据库和站点后立即设置它，因此您可以使用 Sitecore.Context 来处理数据库访问等。

# jquery - 通过jQuery单击时显示鼠标位置

> ID：12035878
> 
> 赞同：0
> 
> 时间：2012-08-20T10:18:22.017
> 
> 标签：jquery, click, coordinates, mousemove, mousedown

我想在我的网站中制作一个旋转工具，在画布内的图像中。作为我的第一步，我想每次都找到鼠标坐标，以便稍后强制图像根据此旋转。我知道我可以使用 mousemove 只要我移动鼠标，它就会给我坐标。但我想要的是按住鼠标并移动它然后获取坐标。所以不仅仅是鼠标移动，而是鼠标点击并移动。有没有办法做这样的事情？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T10:31:23.257

没有真正的组合事件，但您可以设置一个变量来检查鼠标是否被按住，然后只处理坐标，如果它是真的？见：http: [//jsfiddle.net/Vrpd3/1/](http://jsfiddle.net/Vrpd3/1/)

'mouseout' 事件是在拖出元素后停止录制，释放单击然后将鼠标悬停在上面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T10:22:23.277

看看这个页面。

您可以根据需要进行更改。

[http://jqueryui.com/demos/draggable/](http://jqueryui.com/demos/draggable/)

[http://jqueryui.com/demos/draggable/#events](http://jqueryui.com/demos/draggable/#events)

它是 Jquery 的可拖动工具。

```
$('#id').draggable({
drag: function(event, ui) {
    var toppos =ui.position.top
    var leftpos = ui.position.left
}
}); 
```

因此，对于每次拖动，您都可以知道可拖动对象的位置。是的，您将从最初放置可拖动 div 的位置获得相对位置。而不是页面内的绝对值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T10:23:26.540

如果您的目标是在单击鼠标时移动鼠标时获取 X、Y 线，请查看此[JsFiddle](http://jsfiddle.net/itamarperetz/cuZLd/) *大部分代码直接取自 jQuery 文档，我只是做了一些更改。 **如果你想拖动一个对象并在拖动时得到协调，我错了，上面的例子对你的情况没有用**

# c - 如何杀死多个子进程

> ID：12035882
> 
> 赞同：1
> 
> 时间：2012-08-20T10:18:46.353
> 
> 标签：c, kill-process

在模拟读写器问题的 C 程序中，我创建了多个子进程，每个子进程在**xterm**窗口`fork()`中调用`execlp()`并运行另一个程序（读取器或写入器） 。

 **当我结束时`main()`，那些在 xterm 中运行的孩子还活着。我如何也终止它们？

下面的代码示例 -

```
main() {
    while(1) {
    scanf(choice);
    switch(choice) {
        case 1: 
            reader()
            break;
        case 2: 
            writer();
            break;
        default:
            kill(getpgid(getpid()), SIGTERM); // killing the group id
            return 0;
        }
    }

reader() {
    /*
    some semaphore manipulation
    */
    execlp("xterm", "xterm", "-e", "./read", NULL);
    /*
    some semaphore manipulation
    */
    return 0;
    }

writer() {
    /*
    some semaphore manipulation
    */
    execlp("xterm", "xterm", "-e", "./write", NULL);
    /*
    some semaphore manipulation
    */
    return 0;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T10:27:26.437

分叉后父母和孩子的组 id 应该相同，因此发送 `kill(pid,SIGTERM);` 应该照顾他们（其中 pid 是组 ID）

正如 caf 在下面的评论中指出的那样， `kill(0, SIGTERM)`将信号发送到当前进程的进程组**

# unit-testing - cakePHP 中的装置名称（测试）

> ID：12035885
> 
> 赞同：3
> 
> 时间：2012-08-20T10:18:54.433
> 
> 标签：unit-testing, postgresql, cakephp, cakephp-2.0, fixtures

我将固定装置保存在：app/test/fixture/ 目录中

而对于 ex app/test/fixture/UserRoleHistoryFixture.php 看起来是这样的

```
<?php

 class UserRoleHistoryFixture extends CakeTestFixture {
    public $import = array('model' => 'UserRoleHistory', 'records' => false, 'connection' => 'test');
} 
```

app/Test/Fixture/UserFixture.php 看起来是这样的

```
 class UserFixture extends CakeTestFixture {
    public $import = array('model' => 'User', 'records' => true, 'connection' => 'test');
} 
```

所有灯具看起来都是这样（唯一的区别是有时记录设置为真）然后在我的 UserTest.php(model) 中使用它的这种方式：

```
class UserTest extends CakeTestCase {
public $fixtures = array('app.user', 'app.user_role','app.session', 'app.users_activity', 'app.user_role_history'
    );
 public $autoFixtures = false;
 public function setUp() {
    parent::setUp();

    $this->loadFixtures('User','UserRoleHistory','Session','UserRole','UsersActivity');
)); 
```

而我在尝试做一些测试时得到了什么，我 PDO 错误和堆栈跟踪，也许我称之为错误的方式？猜猜这是我如何制作固定装置的问题，但不知道..谢谢你的想法！

编辑：我的问题改变了一点，有错误和堆栈跟踪：

```
PDOException: SQLSTATE[23503]: Foreign key violation: 7 BŁĄD: modyfikacja lub usunięcie     na tabeli "users" narusza klucz obcy "user_role_history_user_id" tabeli "user_role_history"      DETAIL: Klucz (id)=(26381) ma wciąż odwołanie w tabeli "user_role_history".
Test case: UserTest(testUserNameExists)
Stack trace:
C:\Program Files (x86)\PostgreSQL\EnterpriseDB-    ApachePHP\apache\www\soig\www\konkursy2.0\lib\Cake\Model\Datasource\DboSource.php : 436
C:\Program Files (x86)\PostgreSQL\EnterpriseDB-ApachePHP\apache\www\soig\www\konkursy2.0\lib\Cake\Model\Datasource\DboSource.php : 403
C:\Program Files (x86)\PostgreSQL\EnterpriseDB-ApachePHP\apache\www\soig\www\konkursy2.0\lib\Cake\Model\Datasource\Database\Postgres.php : 309
C:\Program Files (x86)\PostgreSQL\EnterpriseDB-ApachePHP\apache\www\soig\www\konkursy2.0\lib\Cake\TestSuite\Fixture\CakeTestFixture.php : 232
C:\Program Files (x86)\PostgreSQL\EnterpriseDB-ApachePHP\apache\www\soig\www\konkursy2.0\lib\Cake\TestSuite\Fixture\CakeFixtureManager.php : 236
C:\Program Files (x86)\PostgreSQL\EnterpriseDB-ApachePHP\apache\www\soig\www\konkursy2.0\lib\Cake\TestSuite\CakeTestCase.php : 191
C:\Program Files (x86)\PostgreSQL\EnterpriseDB-ApachePHP\apache\www\soig\www\konkursy2.0\app\Test\Case\Model\UserTest.php : 16
C:\Program Files (x86)\PostgreSQL\EnterpriseDB-ApachePHP\apache\www\soig\www\konkursy2.0\vendors\PHPUnit\Framework\TestCase.php : 801
C:\Program Files (x86)\PostgreSQL\EnterpriseDB-ApachePHP\apache\www\soig\www\konkursy2.0\app\webroot\test.php : 92 
```

我得到的是

```
 Fatal Error (256): [PDOException] You cannot serialize or unserialize PDOStatement  instances
 #0 [internal function]: PDOStatement->__sleep()
 etc ;/ 
```

我看到第一个问题是关于外键的，当测试用于删除表用户时，存在外键冲突，但它是关于如何创建数据库的问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T15:48:40.870

您从“测试”数据源导入，在您的固定装置中删除它。它从默认值中提取，或者如果您愿意，可以指定另一个提取值。它将在“测试”中创建，而不是从中导入

# git-push - git push origin master> 致命：HTTP 请求失败

> ID：12035889
> 
> 赞同：1
> 
> 时间：2012-08-20T10:19:01.140
> 
> 标签：git-push

当我执行 Git 推送时，我收到以下错误消息 -

```
 Username: 
  Password: 
  error: The requested URL returned error: 403 while accessing https://github.com/Selvam-T/hw4_rottenpotatoes.git/info/refs 
```

我的Git克隆只读地址是[https://github.com/Selvam-T/hw4_rottenpotatoes.git](https://github.com/Selvam-T/hw4_rottenpotatoes.git)

我按照建议将 repo 配置更改为 ssh 方式，如下所示 -

```
git remote set-url origin ssh://git@github.com/Selvam-T/hw4_rottenpotatoes.git 
```

然后我得到的错误信息，当我做“git push origin master”时，是这样的——

```
 ssh: Could not resolve hostname github.com:Selvam-T: Name or service not known
  fatal: The remote end hung up unexpectedly 
```

如何解决其中任何一个通信问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T12:14:17.853

您可以使用 https 或 ssh 地址进行推送。

但是对于 https，您需要一个`~/.netrc`（或`%HOME%\_netrc`在 Windows 上，假设您已经定义了一个 HOME 环境变量），其中包含您的 GitHub 凭据。
示例请参见“[与 github 同步](https://stackoverflow.com/questions/5377703/syncing-with-github/5378094#5378094)”或“[需要 github 而无需用户名和密码](https://stackoverflow.com/questions/11021803/need-github-without-username-and-password/11022181#11022181)”。

对于 ssh，您需要一个私钥 / 公钥`~/.ssh`，并将公钥发布到您的存储库和一个`~/.ssh/config`文件中。
有关更多信息，请参阅“[为什么我的 SSH 密钥不能用于连接到 github？](https://stackoverflow.com/questions/9960897/why-doesnt-my-ssh-key-work-for-connecting-to-github/9963769#9963769) ”。

# asp.net - 为本地主机显示不同的页面？

> ID：12035891
> 
> 赞同：2
> 
> 时间：2012-08-20T10:19:06.313
> 
> 标签：asp.net, wcf

我有一个 ASP.NET 托管的 WCF 应用程序。目前，它显示一个`403.14 - Forbidden: The Web server is configured to not list the contents of this directory.`错误。

我想用更友好的东西代替它。但是，我想`localhost`向其他访问者显示不同的页面。例如，该`localhost`页面应该有更多关于在哪里查看文档的信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T10:23:31.703

您可以将一个添加`Default.aspx`到您的 WCF 项目中。在后面的代码中，您可以在您的`Page_Load`

```
if (HttpContext.Current.Request.IsLocal) 
{
  // Show localhost information 
  // or use Server.Transfer to move to another aspx file.
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T10:21:37.600

你可以这样做

```
bool isLocal = HttpContext.Current.Request.IsLocal; 
```

然后根据 isLocal 显示您想要的任何内容或重定向。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T10:23:50.327

尝试在您的 webconfig 中使用重定向模式 RemoteOnly。然后您的远程连接将显示您的自定义错误页面，但在本地您将收到黄屏死机。

```
<system.web>
<customErrors defaultRedirect="SiteErrorPage.aspx" mode="RemoteOnly">
</customErrors>
<system.web> 
```

# .htaccess - 如何使用 url 变量制作 htacess RewriteRule

> ID：12035892
> 
> 赞同：1
> 
> 时间：2012-08-20T10:19:07.397
> 
> 标签：.htaccess, url, redirect, web, rewrite

我想将网址[http://www.mywebsite.com/tutos/tutos.php?q=my-tuto/tuto-1.html](http://www.mywebsite.com/tutos/tutos.php?q=my-tuto/tuto-1.html)重定向到 [http://www.mywebsite.com/tutos/tutos/my- tuto/tuto-1.html](http://www.mywebsite.com/tutos/tutos/my-tuto/tuto-1.html)，如何使用 .htaccess 做到这一点？

我试过这个，但它不工作......：

```
RewriteRule ^http://www.mywebsite.com/tutos/([^-]*)$ http://www.mywebsite.com/tutos/tutos.php?q=$1 [L,QSA] 
```

谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T10:26:14.810

你所拥有的规则似乎与你所说的你想要的*相反。*它将非查询字符串 URL 重定向**到**查询字符串 URL。但如果这是您想要的，您需要从正则表达式中删除主机和协议。只有 URI（无查询字符串）用于匹配 a `RewriteRule`：

```
RewriteRule ^tutos/([^-]*)$ /tutos/tutos.php?q=$1 [L,QSA,R=301] 
```

但是，如果您希望像您所问的那样反过来：

```
RewriteCond %{QUERY_STRING} (.*)(^|&)q=([^&]+)(.*)
RewriteRule ^tutos/tutos.php$ /tutos/%2?%1%3 [L,R=301] 
```

# html - 在 Android 2.2 Web 浏览器中使用输入进行绝对定位

> ID：12035895
> 
> 赞同：3
> 
> 时间：2012-08-20T10:19:14.387
> 
> 标签：html, css, mobile-website

当他们关注另一个输入时，android似乎决定覆盖输入......

因此，它正在破坏布局，例如，如果您查看此图像

![Android 2.2 发布问题](../Images/102f8507755dcf917ab7d09a5031333e.png)

DOM 中只有两个输入，所以我不确定 android 在何处或如何操纵此输入以将其绘制在屏幕上。

所以我想要做的是移除无缘无故在屏幕上绘制的浮动输入。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T15:50:10.827

我使用了这个问题的以下代码：

```
input[type=text]
{
    -webkit-user-modify: read-write-plaintext-only;
    -webkit-backface-visibility: hidden;
    -webkit-transform: rotateY(0deg); 
    -moz-transform: rotateY(0deg); 
    transform: rotateY(0deg);
} 
```

但是我注意到密码仍然会有覆盖，所以为了解决这个问题，我将输入字段从密码字段更改为文本字段并应用以下 css：

```
input.passwordField {
    -webkit-text-security: disc;
} 
```

[禁用 Android 浏览器的输入覆盖？](https://stackoverflow.com/questions/9423101/disable-android-browsers-input-overlays)

# jquery - 使用谷歌图表 api 显示多个图表

> ID：12035899
> 
> 赞同：0
> 
> 时间：2012-08-20T10:19:42.967
> 
> 标签：jquery, google-visualization

我正在为我的项目使用谷歌图表 api。我的项目很简单，从 url 获取 json 并显示图表。

我用这样的东西。它工作正常

```
 var jsonData = $.ajax({
      url: "/files/data.json",
      dataType:"json",
      async: false
      }).responseText;
  var data = new google.visualization.DataTable(jsonData);
  var chart = new google.visualization.PieChart(document.getElementById('chart_div'));
  chart.draw(data, {width: 400, height: 240}); 
```

“/files/data.json”处的 json 数据如下所示

```
{
  "cols": [
        {"id":"","label":"Topping","pattern":"","type":"string"},
        {"id":"","label":"Slices","pattern":"","type":"number"}
      ],
  "rows": [
        {"c":[{"v":"Mushrooms","f":null},{"v":3,"f":null}]},
        {"c":[{"v":"Onions","f":null},{"v":1,"f":null}]},
        .....
      ]
} 
```

实际上我在同一页上有三个图表。我不想发送三个单独的请求来从服务器检索数据。如何在 json 响应中嵌套三个图表的数据。**var data**会改变jsondata.nest1**对**吗？

我很感激任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T10:45:52.310

我会做这样的事情：

```
{
 nest1: [
 {
  "cols": [
        {"id":"","label":"Topping","pattern":"","type":"string"},
        {"id":"","label":"Slices","pattern":"","type":"number"}
      ],
  "rows": [
        {"c":[{"v":"Mushrooms","f":null},{"v":3,"f":null}]},
        {"c":[{"v":"Onions","f":null},{"v":1,"f":null}]},
        .....
      ]
 },

 {
  "cols": [
        {"id":"","label":"Topping","pattern":"","type":"string"},
        {"id":"","label":"Slices","pattern":"","type":"number"}
      ],
  "rows": [
        {"c":[{"v":"Mushrooms","f":null},{"v":3,"f":null}]},
        {"c":[{"v":"Onions","f":null},{"v":1,"f":null}]},
        .....
      ]
 },

 {
  "cols": [
        {"id":"","label":"Topping","pattern":"","type":"string"},
        {"id":"","label":"Slices","pattern":"","type":"number"}
      ],
  "rows": [
        {"c":[{"v":"Mushrooms","f":null},{"v":3,"f":null}]},
        {"c":[{"v":"Onions","f":null},{"v":1,"f":null}]},
        .....
      ]
 }

 ]
} 
```

然后您可以使用 jsonData.nest1[0]、jsonData.nest1[1] 和 jsonData.nest1[2] 访问数据。

一个提示：要使用 ajax JSON 的快捷方式，您可以使用 getJSON [http://api.jquery.com/jQuery.getJSON/](http://api.jquery.com/jQuery.getJSON/)

希望这可以帮助，

迈克尔

# c++ - wxSmith 和 Code::Blocks 构建错误

> ID：12035905
> 
> 赞同：2
> 
> 时间：2012-08-20T10:20:08.067
> 
> 标签：c++, windows, user-interface, wxwidgets, codeblocks

我最近开始在 Code::Blocks 10.05 上使用 wxSmith 在 GUI 上工作，当我运行项目时，我还没有编写任何代码，只是 OnClose 函数，当我构建并运行我的项目时，我得到 4错误、`cannot find -lwxmsw28d_core`、`cannot find -lwxbase28d`、`cannot find -lwxpngd`和`cannot find -lwxzlibd`。构建日志是：

```
-------------- Build: Debug in gui-test ---------------

Compiling: gui_testMain.cpp
Linking executable: bin\Debug\gui-test.exe
c:/mingw/bin/../lib/gcc/x86_64-w64-mingw32/4.7.0/../../../../x86_64-w64-mingw32/bin/ld.exe: skipping incompatible C:\SourceCode\Libraries\wxWidgets2.8\lib\gcc_lib/libwxmsw28d_core.a when searching for -lwxmsw28d_core
c:/mingw/bin/../lib/gcc/x86_64-w64-mingw32/4.7.0/../../../../x86_64-w64-mingw32/bin/ld.exe: skipping incompatible C:\SourceCode\Libraries\wxWidgets2.8\lib\gcc_lib\libwxmsw28d_core.a when searching for -lwxmsw28d_core
c:/mingw/bin/../lib/gcc/x86_64-w64-mingw32/4.7.0/../../../../x86_64-w64-mingw32/bin/ld.exe: skipping incompatible C:\SourceCode\Libraries\wxWidgets2.8\lib\gcc_lib/libwxmsw28d_core.a when searching for -lwxmsw28d_core
c:/mingw/bin/../lib/gcc/x86_64-w64-mingw32/4.7.0/../../../../x86_64-w64-mingw32/bin/ld.exe: cannot find -lwxmsw28d_core
c:/mingw/bin/../lib/gcc/x86_64-w64-mingw32/4.7.0/../../../../x86_64-w64-mingw32/bin/ld.exe: skipping incompatible C:\SourceCode\Libraries\wxWidgets2.8\lib\gcc_lib/libwxbase28d.a when searching for -lwxbase28d
c:/mingw/bin/../lib/gcc/x86_64-w64-mingw32/4.7.0/../../../../x86_64-w64-mingw32/bin/ld.exe: skipping incompatible C:\SourceCode\Libraries\wxWidgets2.8\lib\gcc_lib\libwxbase28d.a when searching for -lwxbase28d
c:/mingw/bin/../lib/gcc/x86_64-w64-mingw32/4.7.0/../../../../x86_64-w64-mingw32/bin/ld.exe: skipping incompatible C:\SourceCode\Libraries\wxWidgets2.8\lib\gcc_lib/libwxbase28d.a when searching for -lwxbase28d
c:/mingw/bin/../lib/gcc/x86_64-w64-mingw32/4.7.0/../../../../x86_64-w64-mingw32/bin/ld.exe: cannot find -lwxbase28d
c:/mingw/bin/../lib/gcc/x86_64-w64-mingw32/4.7.0/../../../../x86_64-w64-mingw32/bin/ld.exe: skipping incompatible C:\SourceCode\Libraries\wxWidgets2.8\lib\gcc_lib/libwxpngd.a when searching for -lwxpngd
c:/mingw/bin/../lib/gcc/x86_64-w64-mingw32/4.7.0/../../../../x86_64-w64-mingw32/bin/ld.exe: skipping incompatible C:\SourceCode\Libraries\wxWidgets2.8\lib\gcc_lib\libwxpngd.a when searching for -lwxpngd
c:/mingw/bin/../lib/gcc/x86_64-w64-mingw32/4.7.0/../../../../x86_64-w64-mingw32/bin/ld.exe: skipping incompatible C:\SourceCode\Libraries\wxWidgets2.8\lib\gcc_lib/libwxpngd.a when searching for -lwxpngd
c:/mingw/bin/../lib/gcc/x86_64-w64-mingw32/4.7.0/../../../../x86_64-w64-mingw32/bin/ld.exe: cannot find -lwxpngd
c:/mingw/bin/../lib/gcc/x86_64-w64-mingw32/4.7.0/../../../../x86_64-w64-mingw32/bin/ld.exe: skipping incompatible C:\SourceCode\Libraries\wxWidgets2.8\lib\gcc_lib/libwxzlibd.a when searching for -lwxzlibd
c:/mingw/bin/../lib/gcc/x86_64-w64-mingw32/4.7.0/../../../../x86_64-w64-mingw32/bin/ld.exe: skipping incompatible C:\SourceCode\Libraries\wxWidgets2.8\lib\gcc_lib\libwxzlibd.a when searching for -lwxzlibd
c:/mingw/bin/../lib/gcc/x86_64-w64-mingw32/4.7.0/../../../../x86_64-w64-mingw32/bin/ld.exe: skipping incompatible C:\SourceCode\Libraries\wxWidgets2.8\lib\gcc_lib/libwxzlibd.a when searching for -lwxzlibd
c:/mingw/bin/../lib/gcc/x86_64-w64-mingw32/4.7.0/../../../../x86_64-w64-mingw32/bin/ld.exe: cannot find -lwxzlibd
collect2.exe: error: ld returned 1 exit status
Process terminated with status 1 (0 minutes, 1 seconds)
4 errors, 0 warnings 
```

什么可能给我错误？我在 Windows 上使用 Code::Blocks。我正在做这个链接在做什么的教程[wxSmith Tutorial - Code::Blocks Wiki](http://wiki.codeblocks.org/index.php?title=WxSmith_tutorial%3a_Hello_world)

注意：如果有帮助，我从 wxPack 安装了 wxWidgets，在 Code::Blocks 中，我使用全局变量编辑器创建了一个全局变量，其中基本字段有`C:\SourceCode\Libraries\wxWidgets2.8`，包含字段有`C:\SourceCode\Libraries\wxWidgets2.8\include`，lib 字段有`C:\SourceCode\Libraries\wxWidgets2.8\lib`。其余字段为空，如 obj（我找不到 obj 文件夹）、cflags、lflags 和用户定义字段为空。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T13:10:21.770

看起来好像您没有编译正确的调试版本的 wxWidgets。

查看您的 ...\wxWidgets\build\msw 文件夹，是否有类似的文件夹

*   gc_mwsud (unicode 调试)
*   gc_mswuddll（unicode 调试共享）

在你的情况下是一个文件夹

*   gcc_mswd（调试）
*   gcc_mswddll（调试共享）

**编辑**

**仅适用于您的特殊情况**

转到 x:\wxWidgets\build\msw\ **( x == 你的驱动器)**

改变你的 x:\wxWidgets\build\msw\config.gcc 喜欢

```
....

# C compiler 
CC = gcc

# C++ compiler 
CXX = g++
....

# What type of library to build? [0,1]
SHARED = 0
....

# Compile Unicode build of wxWidgets? [0,1]
UNICODE = 0
....

# Type of compiled binaries [debug,release]
BUILD ?= debug
....

# Multiple libraries or single huge monolithic one? [0,1]
MONOLITHIC = 0 
```

**用命令制作。仅适用于您的特殊情况！**

x:\wxWidgets\build\msw>mingw32-make -f makefile.gcc

**官方支持的 Code::Blocks 的正常方式是**

清理源码：

mingw32-make -f makefile.gcc MONOLITHIC=1 SHARED=1 UNICODE=1 BUILD=debug clean

注意：确保在此步骤和下面的构建步骤中使用完全相同的选项。clean 目标使用这些变量并且只清理生成的对象和库文件的指定版本。（如果这些变量不相同，它将不会清理预期的文件。）

注意：如果清理后编译仍然有问题，可以尝试手动删除 build\msw 目录下的 gcc_mswd 目录。该目录是存储目标文件的地方。

当一切都清理干净后，您可以开始编译 wxWidgets：

mingw32-make -f makefile.gcc MONOLITHIC=1 SHARED=1 UNICODE=1 BUILD=debug

注意：这些选项是官方支持的 Code::Blocks 选项。如果您想要另一个版本的 wxWidgets（调试或非 Unicode），您仍然必须确保构建一个 MONOLITHIC 版本（一个大 DLL）来链接 Code::Blocks。

耐心。这一步需要时间。在继续之前确保没有编译错误。

[http://wiki.codeblocks.org/index.php?title=Compiling_wxWidgets_2.8.6_to_develop_Code::Blocks_%28MSW%29](http://wiki.codeblocks.org/index.php?title=Compiling_wxWidgets_2.8.6_to_develop_Code::Blocks_%28MSW%29)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T11:28:58.617

“不兼容”几乎可以肯定意味着该库是一个 32 位文件并且您使用的是 64 位编译器。在从 MinGW 命令行构建期间生成的库和目标文件之一上运行`file`以确认这一点。

如果这是正确的，解决方案是`-m32`在编译器/链接器命令行默认生成 64 位代码时添加选项。或者也许只是获得一个 32 位版本的编译器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T08:25:44.190

在创建新项目时，只需检查 wxwidget 构建为使用 wxwidget DLL 选项的单片库的选项。！如果已经创建项目，只需添加项目的链接器设置和编译器设置（属性）

# android - 防止应用程序在有根设备上被杀死

> ID：12035908
> 
> 赞同：1
> 
> 时间：2012-08-20T10:20:53.417
> 
> 标签：android, root

我正在为一家女巫工作的公司工作，该公司希望为员工提供可以使用 gps 跟踪他们的设备。我想创建一个不会在任务管理器中关闭的服务。

这可能吗 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T10:26:13.700

您最好的选择是在设备上实施系统服务。这些是在启动时启动并在关机时停止的应用程序。用户将无法阻止这些。

但是，您需要使用经过修改的 Android 操作系统软件的 root 设备。

[http://ofps.oreilly.com/titles/9781449390501/Android_System_Services.html](http://ofps.oreilly.com/titles/9781449390501/Android_System_Services.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-20T10:23:36.683

我不认为这是可能的。在 android 中运行的任何非系统进程/应用程序都可以被杀死/停止。您最好的选择是重新启动该服务，以防它被杀死。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-20T12:20:18.370

从 ICS 开始，任何实现[设备管理](http://developer.android.com/guide/topics/admin/device-admin.html)的应用程序都无法停止。这样做是为了专门为企业客户提供此选项。此外，您甚至不需要 root 访问权限。

# jquery - jquery中的.clone（）方法没有复制值

> ID：12035910
> 
> 赞同：15
> 
> 时间：2012-08-20T10:21:05.023
> 
> 标签：jquery, html

> **可能重复：**
> [没有内容的文本框的 Jquery 克隆](https://stackoverflow.com/questions/4366159/jquery-clone-of-a-textbox-without-the-content)

我`.clone`在 jQuery 中使用。当我克隆 ul 时，它也在克隆它的值。我只想复制结构而不是价值。当您在输入字段中键入一些值然后单击克隆时，它也会克隆输入值。

[这是我的代码片段](http://jsfiddle.net/vhq5p/)：

```
<div class="str">
    <ul><li><input type="text" /></li></ul>
</div>
<a href="#">clone</a>

$(function() {
    $('a').live('click', function() {
        var cln = $('ul:last').clone();
        $('.str').append(cln);
    });
}); 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-08-20T10:26:21.687

你可以试试下面的代码。顺便说一句，如果你使用最新版本的 jQuery，我建议使用[`on`](http://api.jquery.com/on/)方法而不是`live`（这里`body`你可以使用任何元素的父`a`元素）。

```
$("body").on("click", "a", function() {
    $("ul:last").clone().appendTo(".str").find("input[type='text']").val("");
});​ 
```

**演示：http:** [//jsfiddle.net/vhq5p/18/](http://jsfiddle.net/vhq5p/18/)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-08-20T10:24:44.747

你的意思是：

```
var cln= $("ul:last").clone().find("input").val("").end(); 
```

演示：[jsFiddle](http://jsfiddle.net/vhq5p/12/)

# jquery - 一键生成两个jQuery效果

> ID：12035911
> 
> 赞同：-1
> 
> 时间：2012-08-20T10:21:06.193
> 
> 标签：jquery, effects

我试图用 jQuery 手风琴制作模板。我只需要一键打开 2 个具有 2 个不同效果的 div。

**我的代码：**

**jQuery：**

```
$(document).ready(function() {
    $('div.question').click(function() {
        $('div.answer').slideUp(600);   
        $(this).next().slideDown(600);
    });
    $("div.answer").hide();
}); 
```

**HTML：**

```
<div class="question">Question</div>
<div class="answer">Answer</div> 
```

但是，我想做这样的事情，点击问题后显示 2 div 和 2 效果：

**jQuery：**

```
$(document).ready(function() {
    $('div.question').click(function() {
        $('div.answer').slideUp(600);   
        $('div.tip').fadeIn();  
        $(this).next().slideDown(600);
        $(this).next().fadeOut();
    });
    $("div.answer").hide();
    $("div.tip").hide();
}); 
```

**HTML：**

```
<div class="question">Question</div> <!--On click-->
<div class="answer">Answer</div> <!--Open with slide effect-->
<div class="tip">Tip</div> <!--Open with fade in effect--> 
```

单击问题后如何显示 2 个具有 2 个效果的 DIV？

有问题的演示：http: [//jsfiddle.net/3RtKS/](http://jsfiddle.net/3RtKS/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T10:26:49.970

不知道你的意思，试试这个：

```
$(document).ready(function() {
    $('div.question').click(function() {
        $('.answer').slideUp(600);   
        $('.tip').fadeOut(600);

        $(this).next('.answer').slideToggle(600);   
        $(this).next('.answer').next('.tip').fadeToggle(600);
    });
    $("div.answer").hide();
    $("div.tip").hide();
});​ 
```

演示：http: [//jsfiddle.net/3RtKS/7/](http://jsfiddle.net/3RtKS/7/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T10:38:04.297

我更新了一个小提琴：http: [//jsfiddle.net/3RtKS/5/](http://jsfiddle.net/3RtKS/5/)

要点是您需要两个 next 来找到提示，我将淡入和淡出交换为我认为您想要的方式：

```
$('div.question').click(function() {
    $('div.answer').slideUp(600);   
    $('div.tip').fadeOut();  
    $(this).next().slideDown(600);
    $(this).next().next().fadeIn();
}); 
```

我还创建了第二个小提琴，我认为这可能是一种更好、更包容的方式——`next`似乎有点脆弱。

[http://jsfiddle.net/3RtKS/3/](http://jsfiddle.net/3RtKS/3/)

这将答案和提示嵌套在问题元素中（尽管您可以添加新元素）。这样做的好处是您只需要在点击的问题元素中找到提示和答案即可处理。

然后脚本变为：

```
$('div.question').click(function() {
    $('div.answer').slideUp(600);   
    $('div.tip').fadeOut();  
    $('div.answer', this).slideDown(600);
    $('div.tip', this).fadeIn();
}); 
```

和 HTML：

```
<div class="question">Question 
    <div class="answer">Answer</div>
    <div class="tip">Tip</div>
</div> 
```

最后，我可能会有更多的 div（例如`questionText`div）以使其更易于管理。

# teradata - Informatica 中的 volatile 表使用情况

> ID：12035913
> 
> 赞同：0
> 
> 时间：2012-08-20T10:21:22.577
> 
> 标签：teradata, informatica, informatica-powercenter

在我的 Informatica 映射中，我需要执行以下活动：

1.  创建“A”易失性表

2.  从“B”普通表将记录插入“A”表

3.  我想再次使用“A”易失性表将记录插入“C”普通表。

如果我的问题不清楚，请发表您的评论，我会尽力澄清。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T17:10:37.063

创建易失性表后，您有什么逻辑要暗示吗？什么样的逻辑（简单/复杂）？根据我的理解，这是你可以做的。如果您正在寻找其他东西，请告诉我。

您可以通过 2 种方式做到这一点。

1.  创建一个基于其他多集表创建易失性表的存储过程，实现逻辑（如果有）然后将其推送到其他多集表（C）

2.  *   从 B 中读取，使用 SQL 转换创建 Volatile 表，然后插入到 Volatile 表中
    *   使用 volatile 表作为源并使用其余的转换，然后使用表 C。

# jquery - 专注于日期选择器更改的文本框

> ID：12035914
> 
> 赞同：0
> 
> 时间：2012-08-20T10:21:25.803
> 
> 标签：jquery, datepicker

当用户正在从日期选择器中选择日期时，我想将注意力集中在文本框之外。HTML

```
<input id="startDate" class="datepicker rounded hasDatepicker" type="text" name="startDate" readonly="">
<img class="ui-datepicker-trigger" src="images/calendar_icon.png" alt="..."> 
```

我试过的脚本。

```
$('.datepicker').datepicker({
    showOn: "button",
    buttonImage: "images/calendar_icon.png",
    buttonImageOnly: true,
    onChangeMonthYear: function(year, month, inst) {
        $("#startDate").blur();
    },
    onSelect: function(dateText, inst) {
        $("#startDate").focusin();
    }
});​ 
```

请帮忙！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T11:29:27.310

尝试在代码中添加**beforeShow**和 onClose 事件...

例子：

```
$(function() {
    $('.datepicker').datepicker({
        beforeShow:function(input, inst){$(this).css('color','white')},
        onClose:function(dateText, inst){$(this).css('color','black')}
    });
}); 
```

但请记住...**已知问题：Datepicker 不会触发创建事件。**

来源：[jQuery UI datepicker#event-beforeShow](http://jqueryui.com/demos/datepicker/#event-beforeShow)

* * *

**用新选项**编辑：****

 ****HTML 示例**

```
Date: <input type="text" id="datepicker" readonly="readonly">​ 
```

**jQuery**

```
$(function(){$('#datepicker').datepicker()}); 
```

​示例在：http: [//jsfiddle.net/nNPJS/2/](http://jsfiddle.net/nNPJS/2/)**

# java - Java本地IP范围检测

> ID：12035916
> 
> 赞同：0
> 
> 时间：2012-08-20T10:21:31.423
> 
> 标签：java, ip, range, lan

我正在开发基于 LAN 的软件，为此我需要使用 java 检测网络中系统所在的范围。该功能需要类似于windows实用软件netscan中的“检测本地IP范围”。在这方面的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T17:03:18.663

您可以尝试使用“ping”。

这篇文章有一些关于 ping 开始的代码。

[如何从 Windows 执行真正的 Java ping？](https://stackoverflow.com/questions/2448666/how-to-do-a-true-java-ping-from-windows)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T17:14:54.307

如果您想要实际的本地子网 IP 范围，而不是本地子网中的活动 IP 地址列表，则可以使用以下代码获取子网掩码大小：

```
InetAddress localHost = Inet4Address.getLocalHost();
NetworkInterface ni = NetworkInterface.getByInetAddress(localHost);
InterfaceAddress ia = ni.getInterfaceAddresses().get(0);
short mask = ia.getNetworkPrefixLength(); 
```

这将为您`short`提供一个值为 1-32，可能为 24 的原语。然后您可以使用

```
byte[] b = ia.getAddress().getAddress(); 
```

这将为您提供一个`byte[]`您将屏蔽子网`mask`的内容，以某种可用格式为您提供本地地址范围。

* * *

或者，如果您想要本地子网上的活动主机列表，我会使用使用[JPCap的 arp-scan。](http://netresearch.ics.uci.edu/kfujii/Jpcap/doc/)

# export-to-excel - 使用 npoi 创建单元格的边框

> ID：12035920
> 
> 赞同：5
> 
> 时间：2012-08-20T10:21:46.220
> 
> 标签：export-to-excel, npoi

我有一个 Excel 文件，它用作我的 Excel 工作的模板，我想以编程方式用数据填充这个模板。

当我创建一行和一个随附的单元格并为新创建的单元格设置边框时，整个工作表都分配有此边框。自然，我只希望单个单元格具有该边框。这是代码：

```
string path = Application.StartupPath + "\\" + "Excels\\myTemplate.xls";
FileStream fs = new FileStream(path, FileMode.Open, FileAccess.Read);

HSSFWorkbook templateWorkbook = new HSSFWorkbook(fs, true);
HSSFSheet sheet = templateWorkbook.GetSheet("sheet2");

int rowIndex = 3;
var row = sheet.CreateRow(rowIndex);

int i = 0;
string zoneNo;
string SubsidiaryCode = string.Empty;
foreach (DataRow r in dtBill.Rows)
{
  SubsidiaryCode = (r["SubsidiaryCode"].ToString().Trim());
  zoneNo = (r["ZoneNO"].ToString().Trim());

  HSSFCell cell = (HSSFCell)row.CreateCell(i);
  cell.SetCellValue("Zone " + zoneNo + "-code :" + SubsidiaryCode);
  cell.CellStyle.BorderBottom = HSSFCellStyle.BORDER_MEDIUM;
  i++;

  row.CreateCell(i).SetCellValue(r["Date"].ToString().Trim());
  row.CreateCell(i).CellStyle.BorderBottom = HSSFCellStyle.BORDER_MEDIUM;
  i++;

  rowIndex++;
  row = sheet.CreateRow(rowIndex);
  i = 0;
}

sheet.ForceFormulaRecalculation = true; 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-21T09:46:16.733

我找到了答案

```
var row = sheet.CreateRow(rowGlobal);

HSSFCellStyle style1 = templateWorkbook.CreateCellStyle();
        style1.BorderRight = HSSFCellStyle.BORDER_MEDIUM;
        style1.BorderBottom = HSSFCellStyle.BORDER_MEDIUM;
        style1.Alignment = HSSFCellStyle.ALIGN_CENTER;
        //style1.FillPattern = HSSFCellStyle.SOLID_FOREGROUND;
        //style1.FillForegroundColor = NPOI.HSSF.Util.HSSFColor.GREEN.index;
        HSSFFont font1 = templateWorkbook.CreateFont();
        //font1.Color = NPOI.HSSF.Util.HSSFColor.BROWN.index;
        font1.FontName = "B Nazanin";
        style1.SetFont(font1);

cell = row.CreateCell(2);
           cell.SetCellValue(0);
           cell.CellStyle = style1; 
```

# c++ - C++ 中私有成员函数的良好命名约定？

> ID：12035921
> 
> 赞同：8
> 
> 时间：2012-08-20T10:21:47.867
> 
> 标签：c++, naming-conventions, private-methods

对于会员，我使用

```
//.......vv
SomeType m_XXX;
//.......^^ 
```

我喜欢用作成员函数的前缀，但以or`_`开头的名称是保留的，不应使用。`_``__`

我的想法是，当我有：

```
SomeClass myObject;
myObject.[XXX] 
```

当（lib）用户写点（`.`）时，查看所有函数（一个接一个）只有`public`.

这有一个通用的命名约定吗？

[我知道，我可以使用`pImpl`或继承，接口和实现类]

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-08-20T10:27:08.757

最常见的做法是在没有任何公共前缀或后缀的情况下命名成员函数。就个人而言，我认为区分它们没有任何好处，如果您的动机与“编写点 (.)，查看所有功能”有关，那么听起来您应该配置或更改您的编辑器，而不是更改您的编程风格以适应它.

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-08-20T10:33:58.623

一个好的约定是结尾的下划线，`like_this_`. 前导下划线是 Python 的方式，但是，在 C++ 中，所有以下划线开头的标识符都保留用于实现。

另一种选择是始终使用前缀成员访问`this`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-20T10:29:46.763

我更喜欢使用并且我更喜欢静态成员`_member`中的成员变量否并以`_camelCase``_``Cap`

但永远不要使用`__`or`___`或两个以上的下划线，它是为间隔保留的。`m_`非常流行和古老，我第一次在 Visual C++ 中看到了它。但我个人觉得很丑。

我发现没有理由区分私有和公共实例变量。但如果它是一个类变量，那么我从一个 BigCap 开始`MyClass::MyVar`

对于局部变量，我使用`x`or `x_y`。所以当地人不会与会员发生冲突

# javascript - 如何使用 JS 用垂直线捕捉自定义图像光标？

> ID：12035923
> 
> 赞同：2
> 
> 时间：2012-08-20T10:22:04.093
> 
> 标签：javascript, css, image, cursor, timeline

效果类似于 Facebook 时间线，将鼠标移动到蓝色竖线附近，它会变成一个蓝色十字，点击后可以添加帖子。

我知道我可以使用 css 自定义光标，例如： cursor:url('cross.png'), auto; 但是有没有一种方法可以控制网页上的光标，并使其仅垂直移动？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T10:25:17.730

我认为您不能使用 JS 更改光标位置，并且据我所知，使用 png 作为光标对浏览器不友好。

所以最好的解决方案是使用 cursor:none; 在你的 CSS 中隐藏光标。因此，您可以在所需位置显示图像，并使用 mousemove 事件更改它的 y 位置。

例如在 CSS 中

```
.line{position:relative;cursor:none;}
.btn-plus{background:url('cursor.png') no-repeat;position:absolute;} 
```

在js中

```
$('.line').mousemove(function(e){
    var btn_cross = $(this).find('.btn-plus');

    if (btn_cross.length == 0)
    {

        btn_cross = $('<div class="btn-plus"></div>');

        $(this).append(btn);

        btn_cross.mouseenter(function(){

            e.stopPropagation();

        });

    }

    btn_cross.css('top', e.pageY-$(this).offset().top+'px');

}); 
```

# php - 在 Zend 框架中设置单元测试

> ID：12035924
> 
> 赞同：3
> 
> 时间：2012-08-20T10:22:07.540
> 
> 标签：php, zend-framework, phpunit

我刚刚开始在 zend 框架中进行单元测试。我已经阅读了很多文档 ZF 和 PhpUnit，但有一些我无法弄清楚。

*   我已经设置了 Zend 框架。我是否也需要安装 PHPUnit 还是在框架内全部排序？
*   Zend Framework 已在`/tests/application/controllers/ControllerNameTest.php`. 我假设我在这里创建我的测试。
*   如何运行测试？我确信这真的很简单，因为我读过的文档假设我应该知道如何做到这一点。我是从命令行执行的吗？如果是这样，怎么做？

任何帮助表示赞赏。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-20T11:17:17.583

You need to install PHPUnit, too. Zend Framework and PHPUnit are two different things. You find the installation instructions for PHPUnit here: [https://github.com/sebastianbergmann/phpunit](https://github.com/sebastianbergmann/phpunit).

Basically, You can put the tests where you want. But the tests-Folder is a good place for them.

After you have installed phpunit, you can call your unit tests from the command line. Just enter the folder where you put your tests on command line and type "phpunit", this will run all tests in the folder. You can also use the --filter option to run a single test.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-24T11:31:49.683

您需要安装 phpunit。我认为最简单的方法是使用 PEAR（[http://www.phpunit.de/manual/current/en/installation.html#installation.pear](http://www.phpunit.de/manual/current/en/installation.html#installation.pear)）。

对于测试控制器，您可以复制在 ControllerNameTest.php 文件中找到的相同代码。对于测试模型，您可以创建一个 PHPUnit 测试用例。

```
<?php 

class YourApp_Model_YourModel  extends PHPUnit_Framework_TestCase
{
    public function setUp()
    {
        $application = new Zend_Application(
            APPLICATION_ENV,
            APPLICATION_PATH . '/configs/application.ini'
        );

        $application->bootstrap('config')
                             ->bootstrap('defaultModuleAutoloader')
                             ->bootstrap('autoloader');

            // You might need to add few more bootstrap, depends on your needs
    }

    public function testSomeMethod(){} 
```

我希望这会有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T12:02:16.573

我在这里找到了使用 PHPUnit 和 Zend Framework 设置所有内容的绝佳指南：

[http://grover.open2space.com/content/unit-testing-zend-framework-111-and-phpunit](http://grover.open2space.com/content/unit-testing-zend-framework-111-and-phpunit)

# java - Java JEditorPane 超链接不会退出标记

> ID：12035925
> 
> 赞同：2
> 
> 时间：2012-08-20T10:22:11.563
> 
> 标签：java, html, swing, hyperlink, jeditorpane

我试图在 a`JEditorPane`中为某些单词使用超链接，类似于单击单词以获取其定义的想法。当单词被输入到编辑器窗格中时，程序会根据列表检查它们并用`<a href="..." >some word</a>`标签替换列出的单词。

我的问题是，用标签替换单词后，我无法让编辑器窗格停止向标签内的文本添加任何后续击键。如何打破`<a>`标签以再次开始正常输入？

是的，我知道超链接事件仅在编辑器窗格不可编辑时触发。我正在用鼠标事件解决这个问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-20T10:45:50.837

可能是这个[http://java-sl.com/tip_autocreate_links.html](http://java-sl.com/tip_autocreate_links.html)可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T10:45:17.330

我自己没有使用过 JEditorPanes，但听起来光标位置仍然在插入的标签内而不是在外面。因此，一个可能的解决方案可能是在替换单词后将光标移动到标签位置的前面。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T00:01:37.513

使用`setCaretPosition`JEditorPane 上的方法；获取标签末尾的位置；尝试这样的事情：

```
HTMLDocument document = (HTMLDocument)editor.getDocument();
 int caretPos = editor.getCaretPosition();

 Element elem = document.getParagraphElement(caretPos);

 int pos = elem.getEndOffset();
 editor.setCaretPosition(pos) 
```

小心检查文档的长度，不要将插入符号设置为错误的位置。

此外，查看所见即所得 Java 编辑器的源代码会有所帮助（例如 shef）

# java - java中值传递和引用传递的混淆

> ID：12035930
> 
> 赞同：1
> 
> 时间：2012-08-20T10:22:26.947
> 
> 标签：java, jakarta-ee

> **可能的重复：**
> [Java 是“按引用传递”吗？](https://stackoverflow.com/questions/40480/is-java-pass-by-reference)

嗨，我开发了以下代码。在交换方法中，我交换了两个对象的引用。然后它将在被调用的方法中更改（这里是 swap()），但在主方法中没有更改..为什么？

```
class Check
{

    public void swap(PassByRefDemoMain obj1,PassByRefDemoMain obj2)
    {

        PassByRefDemoMain temp;
        temp=obj1;
        obj1=obj2;
        obj2=temp;
        System.out.println(obj1.id+ " "+ obj2.id);

    }
}

public class PassByRefDemoMain {
    int id;
    PassByRefDemoMain(int id)
    {
        this.id=id;
    }
public static void main(String[] args) {
        PassByRefDemoMain obj1=new PassByRefDemoMain(10);
        PassByRefDemoMain obj2=new PassByRefDemoMain(20);

        Check obj=new Check(); 
        obj.swap(obj1,obj2);

        System.out.println(obj1.id + " " + obj2.id);

    }

} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-20T10:24:56.960

您传递给该方法的对象作为引用传递，这意味着更改其成员将在外部看到，**但引用本身是通过 value 传递的**，这意味着调用者不会看到更改引用。这是一个实验：

```
class Person {
    public String name;
}

class Test {
    public static void changePerson(Person p) {
         p.name = "Tudor";
         p = null;
    }

    public static void main(String[] args) {
        Person p = new Person();
        p.name = "John";
        changePerson(p);
        System.out.println(p.name); // prints Tudor and you don't get NPE
    }
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-20T10:25:17.440

Java 是按值传递的。

你只有两个对象。当您调用该`swap`方法时，会复制两个新引用，但它们指向相同的对象。在该方法中，您只需更改复制的引用指向的位置。但是 main 方法中的原始引用保持不变。

```
A - obj1
B - obj2

Acopy - obj1
Bcopy - obj2 
```

后方法：

```
Acopy - obj2
Bcopy - obj1 
```

但是`A`还是指向`obj1`，`B`还是指向`obj2`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T13:10:25.547

正如人们敏锐地指出的那样，java总是按值传递。

碰巧一个对象的“值”是它存储在堆上的内存地址。所以这就是发生的事情：

```
Object o = new Object(); 
```

右手边在堆上分配空间，我们会说在位置 1000 左手边在堆栈上分配一个变量，我们会说在位置 100，并且由于分配包含对象的“值”，这是1000，它在堆上的位置。你的记忆现在看起来像这样：

```
Stack
---------------------------
====== caller stack frame ==== 
100(o)    ==>     1000
==============================

Heap
------------------------------
1000   ==>   object data 1 
```

现在您进行方法调用：

```
void foo(Object x) { .... }
foo(o); 
```

为方法调用创建了一个新的堆栈帧（显然是在堆栈上）。在堆栈上创建一个新变量，例如在位置 200，并给定传递对象的“值”，即 1000，它位于堆上。

所以在方法实际运行它的代码之前，你的记忆看起来像这样

```
Stack
---------------------------
====== caller stack frame ====
100(o)    ==>     1000
==============================
====== foo stack frame =======
200(x)   ==>     1000
==============================

Heap
------------------------------
1000   ==>   object data 1 
```

因此，如果您现在在您的方法中执行此操作：

```
void foo(Object x) {
   x = new Object();
} 
```

您将在堆上分配一个新对象，假设在位置 2000，并将方法参数变量分配给它的位置，因此您的内存现在看起来像这样：

```
Stack
---------------------------
====== caller stack frame ====
100(o)    ==>     1000
==============================
====== foo stack frame =======
200(x)    ==>     2000    
==============================

Heap
------------------------------
1000   ==>   object data 1 
2000   ==>   object data 2 
```

当方法退出时，堆栈帧被丢弃，你又回到了这个：

```
Stack
---------------------------
====== caller stack frame ====
100(o)    ==>     1000
==============================

Heap
------------------------------
1000   ==>   object data 1
2000   ==>   object data 2 
```

请注意，“o”仍然指向相同的对象数据。第二个分配的对象（位置 2000）现在也可以进行垃圾回收。

# php - PDO：多次使用相同的绑定变量

> ID：12035931
> 
> 赞同：7
> 
> 时间：2012-08-20T10:22:26.570
> 
> 标签：php, mysql, pdo

我在使用 PDO Prepared 语句时遇到问题，如果您需要多次使用相同的绑定变量，查询将无法验证。

例子：

```
$params = array (
    ':status' => $status,
    ':userid' => $_SESSION['userid']
);

$stmt = $pdo->prepare ('
    INSERT INTO 
        tableName
        ( userId, status )
        VALUES
        ( :userid, ":status" )
        ON DUPLICATE KEY UPDATE
            status = ":status"
');

if ( ! $stmt->execute ( $params ))
{
    print_r( $stmt->errorInfo ());
} 
```

**编辑**：的值`$params`是：
`Array ( [:status] => PAID [:userid] => 111 )`

**编辑 2**：
我注意到插入的是*0*而不是原始值，而不是用户 ID，并且插入的是空字符串而不是状态。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-20T11:34:39.667

Problem was the quotes around the :status. Removed quotes and all is good.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-20T10:36:36.013

您的数组键不需要包含冒号。冒号纯粹是为了让 PDO 知道后面是命名参数。

```
$params = array (
    ':status' => $status,
    ':userid' => $_SESSION['userid']
); 
```

应该

```
$params = array (
    'status' => $status,
    'userid' => $_SESSION['userid']
); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-20T11:36:30.153

Works fine for me. E.g.

```
<?php
$pdo = new PDO('mysql:host=localhost;dbname=test;charset=utf8', 'localonly', 'localonly');
$pdo->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
setup($pdo);

echo 'client version: ', $pdo->getAttribute(PDO::ATTR_CLIENT_VERSION), "\n";
echo 'server version: ', $pdo->getAttribute(PDO::ATTR_SERVER_VERSION), "\n";
echo "before:\n";
foreach( $pdo->query('SELECT * FROM tmpTableName', PDO::FETCH_ASSOC) as $row ) {
    echo join(', ', $row), "\n";
}

$status = 1;
$_SESSION['userid'] = 'foo';

$params = array (
    'status' => $status,
    'userid' => $_SESSION['userid'],
);

$stmt = $pdo->prepare ('
    INSERT INTO 
        tmpTableName
        (userId, status)
    VALUES
        (:userid, :status)
    ON DUPLICATE KEY UPDATE
        status = :status
');

if ( ! $stmt->execute ( $params ))
{
    print_r( $stmt->errorInfo ());
}

echo "after:\n";
foreach( $pdo->query('SELECT * FROM tmpTableName', PDO::FETCH_ASSOC) as $row ) {
    echo join(', ', $row), "\n";
}

function setup($pdo) {
    $pdo->exec('
        CREATE TEMPORARY TABLE tmpTableName (
            userId varchar(32),
            status int,
            unique key(userId)
        )
    ');
    $pdo->exec("INSERT INTO tmpTableName (userId,status) VALUES ('foo', 0)");
    $pdo->exec("INSERT INTO tmpTableName (userId,status) VALUES ('bar', 0)");
} 
```

prints

```
client version: mysqlnd 5.0.10 - 20111026 - $Id: b0b3b15c693b7f6aeb3aa66b646fee339f175e39 $
server version: 5.5.25a
before:
foo, 0
bar, 0
after:
foo, 1
bar, 0 
```

on my machine

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-20T10:38:16.343

您没有在`bindParam`任何地方调用该方法，为什么？就在您调用之前`execute`，请尝试添加

```
$stmt->bindParam(':userid', $_SESSION['userid'], PDO::PARAM_INT);
$stmt->bindParam(':status', $status, PDO::PARAM_STR); 
```

然后打电话`$stmt->execute();`看看它对你有用。还要将您的错误消息设置为完整，并在实例化您的 PDO 实例后，添加它`$db->setAttribute(PDO::ATTR_ERRMODE,PDO::ERRMODE_EXCEPTION);`以确保始终抛出错误。

[文档很方便](http://php.net/manual/en/pdostatement.bindparam.php)

# ruby-on-rails - 如何在没有 = 的情况下获得与 <%= var %> 相同的结果？

> ID：12035941
> 
> 赞同：1
> 
> 时间：2012-08-20T10:23:19.830
> 
> 标签：ruby-on-rails, ruby

在 Rails 视图中，我经常会发现如下行：

```
<%= my_var %> 
```

如果我的情况稍微复杂一些，我需要使用纯代码而不是 <%= %> 来触发打印怎么办？

例子：

```
<% .....
puts my_var
%> 
```

我想这是一个愚蠢的问题，但请耐心等待，我是红宝石初学者。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T10:28:46.650

您可以使用更清洁的辅助方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T10:33:51.910

查看[ERB 的文档](http://ruby-doc.org/stdlib-1.9.3/libdoc/erb/rdoc/ERB.html)

在 <% %> 中放置不用于打印的表达式。

在 <%= %> 你把代码打印出来。

例子：

```
<% if @cost < 10 %>
  <b>Only <%= @cost %>!!!</b>
<% else %>
  Call for a price, today!
<% end %> 
```

# verilog - 为什么 Verilog 函数中不允许非阻塞赋值？

> ID：12035942
> 
> 赞同：6
> 
> 时间：2012-08-20T10:23:24.280
> 
> 标签：verilog, system-verilog, hdl

我读过 Verilog 函数中不允许使用非阻塞赋值。任何人都可以为此提出一个合理的解释吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-20T13:09:58.330

Verilog 的 IEEE 标准 (1364-2001)，“10.3.4 功能规则”部分指出：

> 函数不应有任何非阻塞赋值。

1800-2009 IEEE Std 对此进行了详细说明：

> 功能应无延迟地执行。因此，调用函数的进程应立即返回。函数内部应允许不阻塞的语句；具体来说，函数内部应允许非阻塞分配、事件触发器、时钟驱动和 fork-join_none 构造。

目的是让函数在 Verilog 事件队列中易于评估。如果您需要提前时间，请使用 a`task`而不是 a `function`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T17:02:02.267

尽量不要像 C 中的函数那样考虑 Verilog 中的函数：

Verilog 中的函数旨在成为一种对开发人员友好的方式，可以一次在多个位置实例化相同的组合逻辑，而不必重新编写它/为其创建一个模块。许多 Verilog 的“新手”试图将函数合理化，就像它们是 C 函数一样，虽然它们“返回”一个值，但最终将它们概念化为组合门块更容易（也更正确）。

请注意，这与“任务”不同，后者更普遍地用于“按顺序”执行事物，这在测试台情况下可能比函数更有用

当您学习 Verilog 时，尽量不要将您编写的 HDL 合理化为“代码”，因为它是一种不同的思维方式。

编辑：我拿出了一些不好的解释

# sql - 插入中的条件

> ID：12035943
> 
> 赞同：2
> 
> 时间：2012-08-20T10:23:25.480
> 
> 标签：sql

是否可以做一些事情，比如在这样的情况下`IF`发表声明`INSERT`；

```
INSERT INTO @TABLE (ID, NAME, ADDRESS)
VALUES(
    IF CONDITION (SELECT DATA)
    ELSE (SELECT DATA)
) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-20T10:25:37.253

有点...

```
INSERT INTO @TABLE (ID, NAME, ADDRESS)
SELECT 
CASE condition WHEN result then id else id2 end,
CASE condition WHEN result then name else name2 end,
... 
```

或与`UNION`

```
INSERT INTO @TABLE (ID, NAME, ADDRESS)
SELECT data FROM source WHERE condition
UNION
SELECT data FROM othersource WHERE NOT(condition) 
```

# file - Applescript，将文件中的数据读入列表以与选择一起使用

> ID：12035954
> 
> 赞同：0
> 
> 时间：2012-08-20T10:23:54.793
> 
> 标签：file, list, applescript

我有一个包含三行的文本文件

```
Line one
Line two
Line three 
```

并在文件上运行以下小程序：

```
set dbs to {read file thePath using delimiter "
"}
--set dbs to {"Line one", "Line two", "Line three"}
choose from list dbs with prompt "choose a database" 
```

给我一个错误：

```
error "Can’t make {\"Line one\", \"Line two\", \"Line three\"} into type string." 
number -1700 from {"Line one", "Line two", "Line three"} to string 
```

因此，我将注释标记 (--) 从第二行中取出，以使 dbs 与它抱怨无法转换的列表完全相同，并且选择有效。但是我不想每次文件内容更改时都重写我的代码......为什么它不能从一个列表转换而它可以从另一个列表转换？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T14:04:30.433

将 dbs 设置为（读取文件 thePath）的每一段

# php - codeigniter 中的 _remap 或 URI 路由

> ID：12035955
> 
> 赞同：1
> 
> 时间：2012-08-20T10:23:55.867
> 
> 标签：php, codeigniter, uri, url-routing, remap

我目前正在研究 PHP 框架 Codeigniter 并了解到目前为止的主要概念，直到关于 _remapping 的控制器部分。我了解 _remapping 如何通过 URI 覆盖控制器方法的行为，例如从 www.example.com/about_me 到 www.example.com/about-me。我想听的是人们对使用什么的意见-_remapping 方法或 URI Routing 方法？我只是在研究这些方法时才问这个问题，并且有人对重新映射功能感到困扰，他们被指示使用 URI 路由。

所以..

1) 主要常用方法是什么？2) PHP5 CI 版本 2 以后最好使用 URI 路由吗？

听听您的意见，我将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T10:33:15.687

如果要更改默认 CI 路由的行为，则应使用 _remap。

例如，如果您设置维护并希望阻止任何特定控制器运行，您可以使用 _remap() 函数加载您的视图，并且不会调用任何其他方法。

另一个例子是当你的 URI 中有多个方法时。例子：

```
site.com/category/PHP
site.com/category/Javascript
site.com/category/ActionScript 
```

您的控制器是`category`，但方法是无限的。在那里，您可以使用 Colin Williams 在这里调用的 _remap 方法：http: [//codeigniter.com/forums/viewthread/135187/](http://codeigniter.com/forums/viewthread/135187/)

```
 function _remap($method)
{
  $param_offset = 2;

  // Default to index
  if ( ! method_exists($this, $method))
  {
    // We need one more param
    $param_offset = 1;
    $method = 'index';
  }

  // Since all we get is $method, load up everything else in the URI
  $params = array_slice($this->uri->rsegment_array(), $param_offset);

  // Call the determined method with all params
  call_user_func_array(array($this, $method), $params);
} 
```

综上所述，如果当前 CI 的路由适合您的项目，请不要使用 _remap() 方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T12:16:56.390

假设您不想使用控制器的`index`（即[http://www.yourdomain.com/category](http://www.yourdomain.com/category)）操作`Categories`，您可以使用路由。

```
$route['category/(:any)'] = 'category/view/$1'; 
```

然后您只需要在您的类别控制器中执行一个查看操作来接收类别名称，即 PHP。

[http://www.yourdomain.com/category/PHP](http://www.yourdomain.com/category/PHP)

```
function View($Tag)
{
    var_dump($Tag);
} 
```

如果您仍想在控制器中访问索引操作，您仍然可以通过[http://www.yourdomain.com/category/index访问它](http://www.yourdomain.com/category/index)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-08-22T10:56:55.343

```
$default_controller = "Home";

$language_alias = array('gr','fr');

$controller_exceptions = array('signup');

$route['default_controller'] = $default_controller;

$route["^(".implode('|', $language_alias).")/(".implode('|', $controller_exceptions).")(.*)"] = '$2';

$route["^(".implode('|', $language_alias).")?/(.*)"] = $default_controller.'/$2';

$route["^((?!\b".implode('\b|\b', $controller_exceptions)."\b).*)$"] = $default_controller.'/$1';

foreach($language_alias as $language)

$route[$language] = $default_controller.'/index'; 
```

# oracle - 尝试使用 NVL() 时出现 Oracle java 异常

> ID：12035959
> 
> 赞同：1
> 
> 时间：2012-08-20T10:24:12.973
> 
> 标签：oracle

我在 Oracle 中有以下 SQL 语句，这让我有些头疼。如果 Oracle 表中保存的值为 null，我试图返回一个空几何，但它只是失败并出现以下错误：

**错误**

*

> ORA-29532：Java 调用因未捕获的 Java 异常终止：java.lang.NullPointerException ORA-06512：在“MDSYS.SDO_UTIL”，第 2421 行 ORA-06512：在“MDSYS.SDO_UTIL”，第 2443 行 ORA-06512：在“MDSYS” .SDO_GEOMETRY”，第 36 行

*

**编码**

```
select CLUSTER_ID, 
       NUM_POINTS, 
       FEATURE_PK, 
       A.CELL_CENTROID.SDO_POINT.X, 
       A.CELL_CENTROID.SDO_POINT.Y, 
       A.CLUSTER_CENTROID.SDO_POINT.X, 
       A.CLUSTER_CENTROID.SDO_POINT.Y,
       TO_CHAR (A.CLUSTER_EXTENT.GET_WKT ()),  
       TO_CHAR (A.CELL_GEOM.GET_WKT ()), 
       A.CLUSTER_EXTENT.SDO_SRID, 
       TPHS_PHASE_ID 
from (SELECT CLUSTER_ID, 
             NUM_POINTS, 
             FEATURE_PK, 
             SDO_CS.transform (CLUSTER_CENTROID, 4326) cluster_centroid, 
             SDO_CS.TRANSFORM(NVL(CLUSTER_EXTENT, MDSYS.SDO_GEOMETRY(2001,4326 ,MDSYS.SDO_POINT_TYPE(NULL,NULL,NULL),NULL,NULL)),4326) CLUSTER_EXTENT , 
             SDO_CS.transform (CELL_CENTROID, 4326) cell_centroid, CELL_GEOM FROM              
             V_CLUSTER_1000M) a  
 LEFT JOIN  RWOL_TMA_ROADWORKS 
 ON a.FEATURE_PK = RWOL_TMA_ROADWORKS.TPHS_PHASE_ID   
 where sdo_filter( A.CELL_GEOM, SDO_CS.transform(mdsys.sdo_geometry(2003,4326, NULL, mdsys.sdo_elem_info_array(1,1003,3),mdsys.sdo_ordinate_array(-25.43623984375,44.257784519021, 21.62918984375, 60.752403080295)),81989)) = 'TRUE' 
```

有人知道这里出了什么问题吗？我不是 Oracle 开发人员，因此感谢您提供任何帮助和解释。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T11:04:08.167

这里的问题是由线路引起的

> TO_CHAR (A.CLUSTER_EXTENT.GET_WKT ()),

这一行试图从返回的列中获取一个众所周知的文本项，因为我们没有提供有效的文本项，所以它失败了。真是奇怪的错误。

# java - 爪哇。打印 PDF。

> ID：12035962
> 
> 赞同：4
> 
> 时间：2012-08-20T10:24:32.117
> 
> 标签：java, pdf, printing

我需要使用 Java 打印 API 打印 PDF 文件。我知道如果我需要打印打印机本机不支持的格式，我需要使用 2DGraphics 等。但是如果打印机本机支持格式，所以我不需要使用 2DGraphics。我只需要发送文件即可打印：

```
Doc myDoc = new SimpleDoc(stream, myFormat, dset);
...
job.print(myDoc, aset); 
```

因此，当我使用 Java 打印 API 打印时出现异常：`sun.print.PrintJobFlavorException: invalid flavor` 但是当我使用 Adob​​e Reader 打印时，所有打印结果都很好。为什么这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-01-30T13:40:28.430

显然 PDF 不是原生格式。很可能会涵盖 PostScript，而 PDF 在 PostScript 中有其古老的根源。所以可能存在误解。

您可以让 PDF 注册应用程序（Adobe Reader?）打印（或打开）PDF 文件。这几乎是一条线。

```
public static void print(File file) {
    if (!Desktop.isDesktopSupported()) {
        throw new IllegalStateException(
                "Must not be run in headless server mode.");
    }
    try {
        Desktop.getDesktop().print(file);
    } catch (UnsupportedOperationException e) {
        throw new IllegalStateException(
                "Please install a PDF reader.");
    }
} 
```

先决条件是必须安装 PDF 应用程序。

# asp.net - 为 asp.net 应用程序设置默认代理设置

> ID：12035964
> 
> 赞同：0
> 
> 时间：2012-08-20T10:24:34.187
> 
> 标签：asp.net, proxy

在开始一份新工作后，我继承了一个完全没有记录的应用程序——该应用程序托管在一个我无法控制的环境中，而那些确实设法破坏它的人。我发现了很多：

Web 配置中的以下设置会导致应用程序的*某些部分*中断；

```
<defaultProxy enabled="false" /> 
```

通过将相同的值设置为“true”来解决的错误，但这反过来会破坏其他部分。我发现了一个“bypasslist”设置，也可以在这里应用，我很确定这是我需要使用的，但我无法让正则表达式正常工作。我基本上需要实现以下几点；

*   上面的设置应该是 false，除了对 mydomain.host.com 的任何请求

我试过这个；

```
<defaultProxy enabled="false">
    <bypasslist>
        <add address = "mydomain.host.com" />
    </bypasslist>
</defaultProxy> 
```

它不工作。我有一种感觉，我需要反过来做，但由于这个应用程序没有记录，这可能是一场持续数小时的疯狂追逐。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T20:06:52.130

您需要一个与启用 defaultProxy 时 bypasslist 所做的完全相反的逻辑。您可以实现自己的代理并修改逻辑。MSDN 链接（http://msdn.microsoft.com/en-us/library/6w93fssz(v=vs.100)）

# android - Android中的肥皂网络服务请求和响应？

> ID：12035967
> 
> 赞同：0
> 
> 时间：2012-08-20T10:24:46.693
> 
> 标签：android, web-services, soap, android-ksoap2

我是一个非常新的 Android Soap Web 服务我对使用 Ksoap2 在 Android 中使用肥皂 Web 服务有一些了解，为此我编写了以下代码：通过使用 ksoap2.jar 我从 WSDL 文件中获取了命名空间和方法名称。

```
package com.soapwebservices.pack;

import org.ksoap2.SoapEnvelope;
import org.ksoap2.serialization.SoapObject;
import org.ksoap2.serialization.SoapSerializationEnvelope;
import org.ksoap2.transport.HttpTransportSE;
import android.app.Activity;
import android.os.Bundle;
import android.util.Log;

public class SampleWSExampleActivity extends Activity {
    private static final String TAG = null;
    /** Called when the activity is first created. */
      final String NAMESPACE = "urn:sap-com:document:sap:soap:functions:mc-style";
         final String URL = "http://***************:8000/sap/bc/srt/wsdl/srvc_14DAE9C8D79F1EE196F1FC6C6518A345/wsdl11/allinone/ws_policy/document?sap-client=800&sap-user=********&sap-password=*******";
          final String METHOD_NAME = "Z_GET_CUST_GEN";
         final String SOAP_ACTION = "urn:sap-com:document:sap:soap:functions:mc-style/Z_GET_CUST_GEN";
      //    private static final String[] sampleACTV = new String[];
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);        
        SoapSerializationEnvelope envelope = 
            new SoapSerializationEnvelope(SoapEnvelope.VER11);

        envelope.setOutputSoapObject(request);
        HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);

        try {
            androidHttpTransport.call(SOAP_ACTION, envelope);
            SoapObject resultsRequestSOAP = (SoapObject) envelope.bodyIn;

            System.out.println("THE SOAP RESPONSE"+resultsRequestSOAP);

            //ACTV.setHint("Received :" + resultsRequestSOAP.toString());
        } catch (Exception e) {

            e.printStackTrace();
        }
    }
}  

when i run this program i got the following Exception but in some examples i got the success please see once and let me know where i am doing the mistake 

08-20 15:21:40.296: WARN/System.err(1668): org.xmlpull.v1.XmlPullParserException: expected: START_TAG {http://schemas.xmlsoap.org/soap/envelope/}Envelope (position:START_TAG <{http://schemas.xmlsoap.org/wsdl/}wsdl:definitions targetNamespace='urn:sap-com:document:sap:soap:functions:mc-style'>@1:686 in java.io.InputStreamReader@4052f658) 

How can handle that exc 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T02:48:53.753

也许你的代码没有问题......

在意识到我没有将我的客户指向我的服务后，我解决了我的 XMLPullParser 异常。它希望能够使用 SOAP 响应和请求，但看到的是 wsdl。很难弄清楚。我不确定您的 System.err(1668) 是什么，但我建议您这样做。

下载并附上 android-ksoap2 源代码，以便您在调试时可以单步调用 (F5) 查看 ksoap2 包中出现错误的位置。

[https://github.com/mosabua/ksoap2-android/downloads](https://github.com/mosabua/ksoap2-android/downloads)

和

[安装并运行免费的 SoapUI](http://www.soapui.org/Getting-Started/your-first-soapui-project.html)以测试 Web 服务，并准确找出正确的 Action、方法、URL 和命名空间，因为如果您的代码正常，它们很可能是它们的问题。这个介绍视频的前 2 分钟就是我测试服务所需的全部内容。

最后用不同的语言编写一个简单的客户端——一旦我为我的项目添加了一个 web 引用以用于 web 服务，我发现在[VB.NET express](http://www.microsoft.com/visualstudio/en-us/products/2010-editions/visual-basic-express)中很容易做到这一点。（这教会了我在 SoapUI 的帮助下使我的 wsdl WS-I 兼容）

祝你好运找到你的解决方案。

# c# - 有没有办法从命令行（cmd文件）运行windows窗体功能？

> ID：12035973
> 
> 赞同：-1
> 
> 时间：2012-08-20T10:25:00.283
> 
> 标签：c#, .net, winforms, command-line, scheduled-tasks

我需要能够从命令行运行 Windows 窗体函数或事件（例如单击按钮）。我怎么能这样做？

由于某些限制，我无法使用控制台或 Windows 服务。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T10:39:56.543

如果您的意思是在命令行（控制台）应用程序中重用 Windows 窗体应用程序中的方法，则只需引用包含该类的程序集并调用该方法，有点像这样

```
static void Main()
{
    Form1 form = new Form1();
    form.SomeButton_Click();
} 
```

请注意，要使其正常工作，`SomeButton_Click`方法**和**`Form1`类必须是公共的。如果这是您想要做的，那么这很好地表明`SomeButton_Click`应该将其中包含的逻辑重构为一些常见的实用程序类。

如果您想在正在运行的 Windows 窗体应用程序中模拟按钮单击，那么您有几个选择

*   [Windows 自动化](https://stackoverflow.com/questions/2052915/whats-a-good-if-any-net-windows-automation-library)（从代码模拟鼠标和键盘事件）
*   [进程间通信](https://stackoverflow.com/questions/56121/ipc-mechanisms-in-c-sharp-usage-and-best-practices)（从命令行程序向 Windows 窗体程序发送消息，要求它运行该方法）

有许多不同的方法可以实现其中任何一个，但是两者都比调用方法更复杂 - 如果您提供有关问题的更多详细信息，这将有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T10:46:28.357

您可以使用 Powershell 脚本执行此操作：[使用 Windows PowerShell 的 UI 自动化](http://msdn.microsoft.com/en-us/magazine/cc163301.aspx)

# frameworks - 将 OCMock 添加到框架

> ID：12035974
> 
> 赞同：1
> 
> 时间：2012-08-20T10:25:05.463
> 
> 标签：frameworks, linker-errors, ocunit, ocmock

先介绍一下背景，我目前正在为一个通用框架编写一些 ocunit 测试，现在需要添加 OCMock 来测试框架的一些网络方面。[我已按照此处](http://ocmock.org/)的 OCMock 说明下载示例项目作为参考。我在构建阶段将 libOCMock.a 添加到 Link Binary with Libraries 中，并将标头位置添加到标头搜索路径并将链接器标志设置为

```
-ObjC
-force_load
"$(SRCROOT)/Libraries/libOCMock.a" 
```

*   运行测试时收到的错误消息如下：

`ld: 73 duplicate symbols for architecture i386 clang: error: linker command failed with exit code 1 (use -v to see invocation)`

任何帮助将不胜感激

# wcf - WCF：在增加最大数组长度和将消息拆分为更小的包之间进行选择

> ID：12035975
> 
> 赞同：2
> 
> 时间：2012-08-20T10:25:05.653
> 
> 标签：wcf, binding, partitioning, large-data

*旁注：即使问题是几个月前发布的，我仍在寻找一个好的答案，因此欢迎任何反馈。*

在开发 WCF Web 服务时，我遇到了错误：

`The maximum array length quota (16384) has been exceeded while reading XML data.`

像许多其他人一样，并通过修改绑定配置解决了这个问题。

在互联网上寻找答案时，解决方案几乎总是更改绑定配置，将设置设置`maxArrayLength`为最大值，然后进行`Streamed`传输。在某些情况下，例如在[WCF 发送大数据](https://stackoverflow.com/questions/1674830/wcf-sending-huge-data)这个问题中，人们建议修改绑定配置，而不是以较小的块传输数据。

但是最大值和流传输将始终有效吗？即使在您可能永远不知道数据的最大大小是多少的系统中？

如何在这两个选项之间进行选择？

这取决于你转移什么？下载媒体与返回大型日志信息？

到目前为止，给我的答案围绕着流媒体的技术方面，但**我正在寻找的答案应该更多地关注所暴露情况下的指导方针，关于在两个选项之间进行选择**。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T02:22:49.487

并非所有绑定都支持流式传输。只有 basicHttpBinding、NetTcpBinding、NetNamedPipeBinding 和 WebHttpBinding。如果使用流媒体，您也无法进行可靠的会话。

那么，为什么要对大消息进行流式处理呢？好吧，如果您不使用流式传输，它将把整个消息加载到内存缓冲区中，这可能会杀死可用资源。

有关详细信息，请参阅 MSDN：[MSDN 大型消息传输](http://msdn.microsoft.com/en-us/library/ms733742.aspx)

# visual-studio-2010 - 包还原的 Nuget 版本控制问题

> ID：12035976
> 
> 赞同：59
> 
> 时间：2012-08-20T10:25:08.457
> 
> 标签：visual-studio-2010, nuget

由于 Nuget 的某种版本控制问题，我无法安装包（使用包还原）。以下是我采取的步骤：

构建项目：错误：“MagicalUnicorn.MvcErrorToolkit”的架构版本与 NuGet 的 1.6.21205.9031 版本不兼容。[请从http://go.microsoft.com/fwlink/?LinkId=213942](http://go.microsoft.com/fwlink/?LinkId=213942)将 NuGet 升级到最新版本。

扩展管理器说版本是：2.0.30619.9119。

好的，以管理员身份重启VS，扩展管理器卸载nuget。再次以管理员身份重启VS，搜索nuget并安装。

扩展管理器再次说版本是：2.0.30619.9119。

重建项目：错误：“MagicalUnicorn.MvcErrorToolkit”的架构版本与 NuGet 的 1.6.21205.9031 版本不兼容。[请从http://go.microsoft.com/fwlink/?LinkId=213942](http://go.microsoft.com/fwlink/?LinkId=213942)将 NuGet 升级到最新版本。

好的，所以以管理员身份重新启动VS，扩展管理器再次卸载nuget。这次从[http://visualstudiogallery.msdn.microsoft.com/27077b70-9dad-4c64-adcf-c7cf6bc9970c](http://visualstudiogallery.msdn.microsoft.com/27077b70-9dad-4c64-adcf-c7cf6bc9970c)下载 运行安装程序，一切正常。

扩展管理器再次说版本是：2.0.30619.9119。

重建项目：错误：“MagicalUnicorn.MvcErrorToolkit”的架构版本与 NuGet 的 1.6.21205.9031 版本不兼容。[请从http://go.microsoft.com/fwlink/?LinkId=213942](http://go.microsoft.com/fwlink/?LinkId=213942)将 NuGet 升级到最新版本。

呸！有任何想法吗？

* * *

## 回答 #1

> 赞同：117
> 
> 时间：2012-08-20T17:31:04.987

它看起来像 nuget 命令行工具中的问题。当您启用“Nuget 包还原”功能时，它会使用 nuget.exe 将 .nuget 文件夹添加到您的解决方案中。当你编译项目时，这个工具是用来下载缺失的包的，这里没有使用 VS 扩展。所以尝试从命令行更新这个工具：

```
cd .nuget
nuget.exe update -Self 
```

程序截图：

![在此处输入图像描述](../Images/b5c7f1a3acd7d8fc9853d55ec245cdc6.png)

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2014-01-27T16:12:04.187

以下在 Visual Studio 2012 中对我有用：

*   以管理员身份运行 VS 2012
*   单击工具 -- 扩展和更新
*   在左侧导航中，更新——Visual Studio 库
*   单击 NuGet 包管理器上的更新
*   安装更新
*   重新启动 Visual Studio

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-02-12T21:53:45.323

提供的解决方案都不适合我（Visual Studio 2013，Nuget Package Manager 版本 2.8.5）。

我有同样的错误，但它说我有版本 2.5.4。

我通过转到工具 > Nuget 管理器控制台 > Nuget 包控制台来修复它。这将打开一个命令行窗口。窗口顶部提示为我的项目下载丢失的包。

按下下载按钮，错误在构建时消失了。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-11-20T10:18:39.967

我面临着同样的问题。我通过选择 VS 2010 菜单上的工具 --> 库包管理器 --> 包管理器设置 --> 选中“自动检查更新”来解决它。之后我重新启动 VS 并提示安装 Nuget 更新。安装更新后，Nuget 包（在我的例子中为 HTTP 客户端）安装顺利。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-06-19T12:40:26.697

我遇到了这个问题，我检查了这个页面的所有答案，最后我的问题没有解决。在网上进行大量搜索后，我可以从原始网站更新我的 nuget

[http://docs.nuget.org/docs/start-here/installing-nuget](http://docs.nuget.org/docs/start-here/installing-nuget)

例如对于 vs2010 ：

[http://visualstudiogallery.msdn.microsoft.com/27077b70-9dad-4c64-adcf-c7cf6bc9970c](http://visualstudiogallery.msdn.microsoft.com/27077b70-9dad-4c64-adcf-c7cf6bc9970c)

在此站点上选择您的 VS 版本，然后对其进行更新。

**注意：在安装 nuget 之前，关闭所有 Visual Studio，安装之后，打开你的项目。** 谢谢

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-03-02T22:43:48.387

以上对我完全不起作用。最后一步需要注意。下载最新的 nuget 版本后，您可能会注意到在输出窗口中打印出相同的错误。原因是 .nuget 文件夹包含一个指定版本号的 NuGet.exe。

解决方案（对于我，也许对于那些没有通过上述说明解决您的问题的人）是

1.  从您的解决方案中删除 .nuget 文件夹。

2.  右键单击您的 Web 项目，然后单击启用 Nuget 还原。

3.  上面的说明应该会导致添加一个新的 .nuget 文件夹，这次 NuGet.exe 应该是您下载的最新版本的 nuget。

# python - Django 抛出 NoReverseMatch 错误

> ID：12035982
> 
> 赞同：0
> 
> 时间：2012-08-20T10:25:21.013
> 
> 标签：python, django

我是 Django 的新手。它抛出这样的错误：

```
File "/home1/monkevco/django/django_src/django/template/defaulttags.py", line 418, in render
raise e

NoReverseMatch: Reverse for '' with arguments '()' and keyword arguments '{}' not found. 
```

我的 urls.py 看起来像：

```
urlpatterns = patterns('',
    url(r'^accounts/register/$',
        register,
        { 'backend': 'lbregistration.backends.simple.SimpleBackend' },
        name='registration_register'),
    url(r'^user/(?P<user_id>\d+)/$', profile, name='user_profile'),
    url(r'^accounts/avatar/', include('simpleavatar.urls')),
    url(r'^accounts/', include('registration.backends.default.urls')),
    url(r'^attachments/', include('attachments.urls')),
    url(r'^captcha/', include('captcha.urls')),

    # Uncomment the admin/doc line below and add 'django.contrib.admindocs' 
    # to INSTALLED_APPS to enable admin documentation:
    url(r'^admin/doc/', include('django.contrib.admindocs.urls')),

    # Uncomment the next line to enable the admin:
    url(r'^admin/', include(admin.site.urls)),

    url(r'^', include('lbforum.urls')),
) 
```

更新：**Django 版本** `1.5`

输入网址：`http://monkev.com`

错误位置：

```
<div id="brd-head" class="gen-content">
    <p id="brd-access"><a href="#brd-main">Skip to forum content</a></p>
    <p id="brd-title"><a href="{% url lbforum_index %}">{{ LBFORUM_TITLE }}</a></p>
    <p id="brd-desc">{{ LBFORUM_SUB_TITLE }}</p>
</div> 
```

请帮我弄清楚。非常感谢你。

更新：

在调试页面中：

```
Request URL:    http://monkev.com/
Django Version: 1.5
Exception Type: NoReverseMatch
Exception Value:    
Reverse for '' with arguments '()' and keyword arguments '{}' not found.

...
...
 '/home1/monkevco/python/lib/python2.7/site-packages/Django-1.4.1-py2.7.egg', 
```

我在 python 路径中调用了 Django 1.4.1，但是为什么运行的版本是 Django 1.5？如何强制它到 1.4.1？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T10:41:50.507

你在运行 Django 主干吗？我建议改为运行最新版本 Django 1.4.1。

标签语法在 Django 1.5 中发生了`{% url %}`变化，这意味着任何使用它的模板都必须更新，包括来自已安装应用程序的模板。

# popup - OpenCart 1.5.3 IE 无法在结帐页面使用付款方式

> ID：12035984
> 
> 赞同：3
> 
> 时间：2012-08-20T10:25:29.390
> 
> 标签：popup, colorbox, opencart

收货详情下结帐页面上的“继续”按钮不起作用。但是“帐单详细信息”继续按钮和所有其他按钮似乎总是有效。当点击按钮时，等待的 GIF 被加载，没有任何反应。当我在脚本下面注释掉时，它似乎在所有浏览器中都很好。

```
<script type="text/javascript">
<!--
$('.colorbox').colorbox({
    width:640,
    height:480
});
//-->
</script> 
```

我想在弹出窗口中显示条款和条件。当我评论上述代码并显示在另一个页面中时，我没有弹出窗口。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T00:26:43.933

我在标签上遇到了类似的问题。我通过将调用放在文档就绪的 jquery 容器中解决了这个问题。（http://api.jquery.com/ready/）

对我来说，问题是 IE 中的 JS 试图在元素渲染之前加载。

# asp.net - 将更新的行插入 ASP .Net GridView

> ID：12035989
> 
> 赞同：0
> 
> 时间：2012-08-20T10:25:49.283
> 
> 标签：asp.net

我正在更新 GridView_RowUpdating 事件上的 GridView dataRow 并更新数据库。在 GridView_RowUpdating 事件上，我编写了 c# 代码来更新数据库，在成功更新数据库后，我正在创建该行的类对象。并尝试将此行绑定到另一个网格。

数据库正在更新，但另一个网格未更新。

有什么解决办法？？

这是我的代码

```
Grid_RowUpdating(object sender, GridViewUpdateEventArgs e)
{
  // Update Operation for First Grid  
  ...
  ...

  Class1 ObjRow = new Class1();
  ObjRow.Status = Updated.

  List<Class1> lst = GetUpdatedDetails();
  GridView1.DataSource = lst;
  GridView1.DataBind();

  lst = new List<Class1>();
  lst.add(ObjRow)

  // Here Its Failing
  GridView2.DataSource = lst;
  GridView2.DataBind();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T10:56:59.433

UpdatePanel 中的第二个 Gridview 吗？尝试添加新行，然后刷新页面。这有什么影响吗？

# java - 为 Enum 接口一个静态方法

> ID：12035992
> 
> 赞同：8
> 
> 时间：2012-08-20T10:26:01.547
> 
> 标签：java, interface, enums

`Enum.valueOf()`不能被另`valueOf`一种具体`Enum`类型的静态方法隐藏，但是由于我正在使用文本文件的反射创建对象，因此我需要一种通用的方法来调用`valueOf`.

目前我`Enum`有一个静态类`fromString()`：

```
public enum Fruits {

   APPLE, ORANGE, ...;

    public static Fruit fromString(String fruit) {
        ...
    }
} 
```

但是，当我处理枚举字段类型时，我如何接口这样的方法，我会调用适当的方法？我唯一能想到的是：

*   使用标记界面
*   为每个枚举实现这个静态方法
*   通过反射调用静态方法

是否有另一种强制执行此限制的替代方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T10:32:56.687

如果我理解正确，您将拥有许多想要通过独特`fromString`方法集成的不同枚举。我所做的是创建一个单独的类，将所有枚举成员聚集到一个单独的类中，`static final Map`并`fromString`根据它实现方法。

在我的例子中，所有枚举都实现了一个通用接口，因为我有许多自定义方法需要调用，而与所讨论的确切枚举无关。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-08-20T10:30:59.483

当然，它是内置的：使用`Enum#valueOf(Class<T> enumType, String name)`.

# core-animation - CALayer 和 drawRect

> ID：12035996
> 
> 赞同：1
> 
> 时间：2012-08-20T10:26:16.087
> 
> 标签：core-animation, calayer, nsview, drawrect, nstextfield

我对 Core Animation、CALayer 和所有这些东西完全陌生，所以请耐心等待。我有一个自定义 NSTextField 用作标签。我希望内容对其位置进行动画处理，因此如果对于标签宽度而言它太长，则整个字符串都是可见的。现在，动画本身运行良好。我已经用 CABasicAnimation 实现了这个：

```
- (void)awakeFromNib {    
    CALayer *newLayer = [CALayer layer];

    CABasicAnimation *animation = [CABasicAnimation animationWithKeyPath:@"position"];
    [animation setFromValue:[NSValue valueWithPoint:NSMakePoint(0, 0)]];
    [animation setToValue:[NSValue valueWithPoint:NSMakePoint(-self.attributedStringValue.size.width, 0)]];
    [animation setDuration:5.0];
    [animation setRepeatCount:HUGE_VAL];

    [newLayer addAnimation:animation forKey:@"position"];

    [self setLayer:newLayer];
    [self setWantsLayer:YES];

} 
```

唯一的问题是，drawRect: 方法只绘制屏幕上的内容。所以我想我会覆盖 drawRect: 方法来绘制整个属性字符串。但是，如果我这样做，则根本不会画出任何东西……谁能指出我正确的方向？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T13:12:53.733

我最终使用了 NSTimer。不是最漂亮的解决方案，但至少它有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T19:18:07.037

通常，您希望尽可能避免覆盖 drawRect，特别是对于您正在制作动画的 CALayer 对象。这往往会导致非常糟糕的表现。

你是什​​么意思“drawRect：方法只绘制屏幕上的内容？”

它只绘制当前可见的字符串部分？

# google-app-engine - 就云计算而言，“实例”是什么意思？

> ID：12035998
> 
> 赞同：8
> 
> 时间：2012-08-20T10:26:17.607
> 
> 标签：google-app-engine, cloud, cloud-hosting

在查看一些云计算托管服务（如 Google App 引擎、亚马逊等）的定价时，我看到了诸如每小时每实例 0.0 美元等条款。这到底是什么意思？是一个实例 = X 页面浏览量，还是有任何其他方法来估计我需要多少个实例？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-20T10:32:38.337

通常 1 个实例 == 1 台机器/服务器（通常是虚拟机）。

参见例如[http://aws.amazon.com/ec2/instance-types/](http://aws.amazon.com/ec2/instance-types/)和[https://developers.google.com/appengine/docs/adminconsole/instances](https://developers.google.com/appengine/docs/adminconsole/instances)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-11-26T18:16:13.960

层次结构是这样的，云->数据中心->主机->实例（虚拟机）。

考虑一个例子来理解每个术语。考虑像 AWS 或 Google App Engine 这样的公共云，每个公共云将在不同的地理位置拥有许多数据中心，其中将有许多服务器、计算机、用于存储数据的磁盘等以及提供云所需的其他硬件组件服务。

在每个数据中心中，都会有一组（集群）专用硬件提供专门的服务或流程，这些被称为主机。

实例类型决定了用于您的实例的主机的硬件。每种实例类型提供不同的计算、内存和存储能力，并根据这些能力分组为实例系列。实例是一种用于运行用户进程或应用程序的虚拟环境。

每当用户想要使用特定服务或想要在云上部署特定类型的应用程序时，用户需要创建该特定类型的实例。

有关更多信息，请参阅以下 AWS 链接：http: [//docs.aws.amazon.com/AWSEC2/latest/UserGuide/instance-types.html](http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/instance-types.html)

对于谷歌云平台：[https ://cloud.google.com/appengine/docs/java/how-instances-are-managed](https://cloud.google.com/appengine/docs/java/how-instances-are-managed)