# StackOverflow 问答 10064000-10064999

# windows - Perl：获取当前光标图标/类型

> ID：10064001
> 
> 赞同：2
> 
> 时间：2012-04-08T15:33:49.423
> 
> 标签：windows, perl, mouse-cursor

我正在用 Perl 编写一个应用程序，它要求我在运行时获取当前的游标类型。

我需要创建一个计时器来定期检查鼠标，如果鼠标是某种类型，则暂停或执行其他操作。光标可能在另一个程序中运行 - 不一定在 TK/GTK 应用程序中。我对计时器部分很好，但找不到任何可以让我获得当前光标类型的东西。

有谁知道如何做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T19:45:46.000

您必须至少指定要在其上完成此操作的操作系统。

由于鼠标光标由操作系统而不是 Perl 管理，因此您必须找到一种从操作系统获取该信息的方法。

如果应用程序在 Windows 上，我会开始查看[Win32::GUI](http://search.cpan.org/~robertmay/Win32-GUI-1.06/)。

希望这可以帮助。

**编辑：**

由于您在 Windows 上，因此您必须查看 Windows API 函数才能获取该信息，例如[http://msdn.microsoft.com/en-us/library/windows/desktop/ms648389(v=vs.85 ).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms648389(v=vs.85).aspx)

然后，找到一种从 Perl 访问该函数的方法 - [Win32::API](http://search.cpan.org/dist/Win32-API/API.pm)可能是一个有用的模块来做到这一点

# php - 整个 PHP 代码运行两次

> ID：10064006
> 
> 赞同：3
> 
> 时间：2012-04-08T15:34:39.953
> 
> 标签：php

我的网站是一个社区；我们有论坛和用户资料，每个人都有所谓的“优点”，有点像 StackOverflow 上的“声誉”。我有一个在我制作的计时器上运行的代码。这个计时器有两个脚本运行；一个脚本每天运行一次（完美运行），另一个每周运行一次。

计时器本身工作正常，但是当运行每周代码时，会发生一些非常奇怪的事情：1) 每周代码第一次运行完美，但由于某种原因，整个代码第二次运行时间，并且会发生一些日志记录错误。2) 该程序第二次运行时，忘记了上一次大家登录的时间（如果用户连续两周不活动，系统应该将其功勋状态减一），因此无论如何都会减少大家的功勋他们一直很活跃。

我已经完成了我的作业，我认为这是我的浏览器出错（Firefox 会加载每个页面两次，具体取决于您拥有的插件），但事实并非如此；每个用户都有一个绩效日志，记录影响其绩效状态的每一笔交易。每个人都有两笔系统交易，第二笔交易正好在第一笔交易之后一秒。每个人都有相同的两个时间戳。这意味着，代码贯穿始终，给每个人他们所得到的东西，然后从头开始，正好在一秒钟后。然而，这一次，它无条件地给每个人一个缺点（从他们的优点中减去）。

这一切都不应该发生，因为我的每周计时器做的第一件事是检查它是否是正确的日子，它做的第二件事（如果它*是*正确的日子）是将计时器更新到下周，所以它一天不会跑两次。

这里是：

```
<?php
mysql_connect("connect","username","password");
mysql_select_db("seriamus");
$feduby = mysql_query("SELECT day,week FROM timer WHERE name='timer'");
$timer = mysql_fetch_array($feduby);
//Daily Timer
if($timer[0]==date("M j, Y"))
{
    $tomorrow = strtotime("+1 day");
    mysql_query("UPDATE timer SET day='" . date('M j, Y', $tomorrow) . "' WHERE name='timer'");
    mysql_connect("connect","username","password") or die(mysql_error());
    mysql_select_db("agluserdatabase");
    $getsuspendinfo = mysql_query("SELECT gamertag,rank,sdate,srank FROM users");
    while($suspo = mysql_fetch_array($getsuspendinfo))
    {
        if($suspo[1]=="Suspended")
        {
            if($suspo[2]==date("M j, Y"))
            {
                mysql_query("UPDATE users SET rank='" . $suspo[3] . "', srank='', sdate='' WHERE gamertag='" . $suspo[0] . "'");
            }
        }
    }
}
//Weekly Timer
if($timer[1]==date("M j, Y"))
{
    $inaweek = strtotime("+7 days");
    mysql_query("UPDATE timer SET week='" . date('M j, Y', $inaweek) . "' WHERE name='timer'");
    mysql_connect("connect","username","password") or die(mysql_error());
    mysql_select_db("agluserdatabase");
    $getmeritinfo = mysql_query("SELECT merits,logins,lastseen,demerit,gamertag,rank,userid FROM users");
    while($meritinfo = mysql_fetch_array($getmeritinfo))
    {
        if($meritinfo[3]==0)
        {
            if($meritinfo[1]>=3)
            {
                if($meritinfo[5]!="Suspended"&&$meritinfo[5]!="Banned")
                {
                    $newmerits = $meritinfo[0] + 1;
                    mysql_query("UPDATE users SET merits='" . $newmerits . "' WHERE gamertag='" . $meritinfo[4] . "'");
                    mysql_query("INSERT INTO meritlog" . $meritinfo[6] . " VALUES ('System', 'Merit', 1, 'Active for a week without getting a demerit', '" . date('M j, Y g:i:s') . "')");
                }
            }
            else if ($meritinfo[1]==0)
            {
                $two_weeks_ago = strtotime('-14 days', strtotime(date("M j, Y")));
                $last_seen = strtotime($meritinfo[2], strtotime(date("M j, Y")));
                if($last_seen <= $two_weeks_ago)
                {
                    if($meritinfo[5]!="Suspended"&&$meritinfo[5]!="Banned")
                    {
                        $newmerits = $meritinfo[0] - 1;
                        mysql_query("UPDATE users SET merits='" . $newmerits . "' WHERE gamertag='" . $meritinfo[4] . "'");
                        mysql_query("INSERT INTO meritlog" . $meritinfo[6] . " VALUES('System', 'Demerit', 1, '2+ weeks of inactivity', '" . date('M j, Y g:i:s') . "')");
                        if($newmerits <= -10)
                        {
                            mysql_query("UPDATE users SET merits = 0 WHERE gamertag = '" . $meritinfo[4] . "'");
                            mysql_query("UPDATE users SET lastpromotion = '" . date('M j, Y') . "' WHERE gamertag = '" . $meritinfo[4] . "'");
                            if($meritinfo[5]=="Praetorian")
                            {
                                mysql_query("UPDATE users SET rank = 'Centurion' WHERE gamertag = '" . $meritinfo[4] . "'");
                            }
                            else if($meritinfo[5]=="Centurion")
                            {
                                mysql_query("UPDATE users SET rank = 'Triarius' WHERE gamertag = '" . $meritinfo[4] . "'");
                            }
                            else if($meritinfo[5]=="Triarius")
                            {
                                mysql_query("UPDATE users SET rank = 'Decanus' WHERE gamertag = '" . $meritinfo[4] . "'");
                            }
                            else if($meritinfo[5]=="Decanus")
                            {
                                mysql_query("UPDATE users SET rank = 'Prime Legionary' WHERE gamertag = '" . $meritinfo[4] . "'");
                            }
                            else if($meritinfo[5]=="Prime Legionary")
                            {
                                mysql_query("UPDATE users SET rank = 'Legionary' WHERE gamertag = '" . $meritinfo[4] . "'");
                            }
                            else if($meritinfo[5]=="Legionary")
                            {
                                mysql_query("UPDATE users SET rank = 'Banned' WHERE gamertag = '" . $meritinfo[4] . "'");
                            }
                        }
                    }
                }
            }
        }
        mysql_query("UPDATE users SET logins='0', demerit='0' WHERE gamertag='" . $meritinfo[4] . "'");
    }
}
?> 
```

在这段代码中，还有一些与用户排名有关的东西，或者他们当周被记过多少，或者他们是否被暂停或禁止等。它们应该不重要，但我包括了它们无论如何，这样您就可以获得整个代码。

如果您需要我详细说明整个代码的具体设置，请告诉我。

提前感谢您花时间阅读所有这些内容并（希望）帮助我！任何帮助都将不胜感激，即使它是一些与问题完全无关的效率方法——任何帮助都会很棒！:D

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T16:39:39.713

I think your having an issue because it loads twice.

First load

Selects table Updates daily Starts processing

Then second load happens.

Selects table Skips daily Updates weekly Starts processing

Then the first load again.

Updates weekly (again, because it doesn't check it) Starts processing

I'd recommend doing 'LOCK TABLES timer WRITE' then an 'UNLOCK TABLES' at the end. Also, you would need to clean up your database accesses with link identifiers, I.e.

$timer = mysql_connect(); mysql_query(..., $timer);

Also, push the code to a cron.php or something similar, regular checks like this are not a good idea on main pages. Another option would be to generate random number and only check 1% of time. But best bet is cron, even if you just set it up as a you load the page from your computer once a day.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T20:04:03.970

我们遇到了这个问题，因为我们使用的 jquery 小部件具有这样的模板元素：

```
<div><img src="#{icon}" /></div> 
```

其中 #{icon} 通过小部件函数替换为“path/to/icon.png”。但是，在页面加载时，“#”会导致浏览器再次加载脚本，并且会话变量会变得很糟糕。修复方法是将模板编辑为：

```
<div>#{icon}</div> 
```

其中 #{icon} 将替换为 '' 。

这可能不是您的答案，但是当我们在寻找答案时，您的问题出现了，看到这样的答案会很方便。

# java - Java - 本机库问题

> ID：10064009
> 
> 赞同：1
> 
> 时间：2012-04-08T15:34:46.840
> 
> 标签：java, native

我在使用 Windows 的本机库时遇到了麻烦。

这是我得到的错误：

```
java.lang.UnsatisfiedLinkError: C:\workspace\GameProject\src\lib\natives\jinput-dx8.dll: Can't load IA 32-bit .dll on a AMD 64-bit platform 
```

就我所见，我遇到了与 DLL 的兼容性问题`jinput-dx8.dll`。

我的游戏真的需要这个 dll，但我不知道如何解决这个问题。你可以帮帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T16:15:42.163

您需要使用 32 位 JVM 来加载 32 位本机库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T15:36:16.447

您需要获取/重新编译该库的 64 位版本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-08T16:28:05.580

JVM 的体系结构和本机库必须匹配。您需要一个 32 位 JVM 来加载 32 位共享库和一个 64 位 JVM 来加载 64 位共享库。两者混合是不可能的。

# javascript - 如何让它像在 Chrome 中那样显示？

> ID：10064012
> 
> 赞同：0
> 
> 时间：2012-04-08T15:35:00.167
> 
> 标签：javascript, javascript-events

我是新来的，来自中国。我的英语不好。我会尽力解释我的问题。谢谢您阅读此篇。这里有两个要素：

```
<input type="button" value="Click1"/>
<input type="button" value="Click2"/> 
```

我想监视那些的“onclick”事件。所以我尝试了这段代码：

```
function EventUtil(){}

EventUtil.prototype = {
constructor:EventUtil,

addHandler: function (element, type, handler) {
    if (element.addEventListener) {    //DOM2
        element.addEventListener(type, handler, false);
    } else if (element.attachEvent) {    //IE
        element.attachEvent("on" + type, handler);
    } else {      //DOM0
        element["on" + type] = handler;
    }

}};

var eventUtil = new EventUtil();
var buttons = document.getElementsByTagName("input");
for(var i = 0;i<buttons.length;++i) {

   var func = function () {
       alert(this.value);
   };
   eventUtil.addHandler(buttons[i], "click", func);
} 
```

在 Chrome 中，我可以获得“Click1”和“Click2”。但在 IE8 中，它给了我“未定义”。那么如何让它像在 Chrome 中那样显示呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T15:52:52.230

如果可能的话，我建议你使用像[jQuery](http://jquery.com/)这样的 JS-Library 。如果您在 HTML 文件中包含 jQuery-Library，您可以通过以下方式实现您的目标：

```
$("input").click(function(){
    alert($(this).val());
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T18:48:55.707

在旧的 IE 事件模型（`attachEvent`函数）中，`this`回调处理程序中的关键字不是绑定事件的元素，而是`window`对象。所以代码：

```
var func = function () {
    alert(this.value);
}; 
```

在 IE 中不起作用，因为`this`这里是窗口对象，而不是元素。

您需要执行以下操作：

```
var func = (function(elem) {
   return function() {
       alert(elem.value);
   };
}(buttons[i])); 
```

附带说明 - 如果您需要降低 IE 版本支持，我第二次使用像 jQuery 这样的框架，它使事件处理变得更加容易（除其他外）。

# linux - 用于搜索所有媒体文件（音频和视频）的 Unix Shell 脚本

> ID：10064019
> 
> 赞同：-1
> 
> 时间：2012-04-08T15:35:48.870
> 
> 标签：linux

我需要帮助我做两件事。

a) 在当前目录中搜索所有媒体文件（即歌曲和视频）并建立一个可用文件列表来播放。b) 如果没有找到媒体文件，则显示适当的消息，并为用户提供关闭程序的选项。

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T15:49:02.093

Python 将完美而轻松地完成这项工作。它是一种非常好的脚本语言，而且易于学习，您可以尝试使用它。例如：

```
#!/usr/bin/env python
import os
files = os.listdir('.')
available_files = []
for f in files:
    if f.endswith('.mp3') or f.endswith('.mkv'):
        available_files.append(f)
if not available_files:
    print 'there is no media file in current dir' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T15:51:51.347

假设您的文件具有扩展名：

```
file_pattern="*.mp3|*.mp4|*.flv"
file_count=`ls 2>/dev/null | egrep $file_pattern | wc -l`
if [ $file_count -eq 0 ]; then
   echo "No files found"
else
   echo `ls | egrep $file_pattern`
fi 
```

您可以修改`file_pattern`以包含您要搜索的任何其他文件扩展名。

# python - ZipFile.extractall 抛出 ZipFile 实例没有属性“extractall”

> ID：10064022
> 
> 赞同：2
> 
> 时间：2012-04-08T15:36:36.407
> 
> 标签：python, zipfile

以下是我的代码：

```
import zipfile
from zipfile import ZipFile

def extract(zipFilename, dm_extraction_dir) :
   zipTest = ZipFile(zipFilename)
   zipTest.extractall(dm_extraction_dir)

extract("myzip.zip", "C:/Temp") 
```

当我执行此代码时，抛出 ZipFile 实例没有属性“extractall”，我使用的是 python 2.5，解释器是 jython，不知道为什么会出现此错误。

请忽略语法，为了简化我已经修剪了很多代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T15:37:53.683

从[文档](http://docs.python.org/library/zipfile.html#zipfile.ZipFile.extractall)：

> *2.6 版中的新功能。*

# inline - 编译器内联比手动内联更好吗？

> ID：10064023
> 
> 赞同：1
> 
> 时间：2012-04-08T15:36:55.673
> 
> 标签：inline, inline-assembly

一位朋友告诉我，编译器内联比手动内联更好，但他无法解释为什么。如果可以手动执行，使用 inline 关键字有什么好处（除了一遍又一遍地编写相同的代码）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T15:45:05.090

当您的函数被过于频繁地调用并且足够小以适合缓存内存时，内联函数很有用......如果编译器处理它，它可以决定使用这些参数，但是如果您对目标硬件有更多的了解，您也可以这样做它手动..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T15:53:10.647

`Inline`工作起来就像由编译器控制的复制/粘贴，这与预处理器宏有很大不同：宏将被强制内联，会污染所有的命名空间和代码，不容易调试，即使在编译器会认为它效率低下。

通过将其标记为`inline`，您可以将函数定义放在头文件中（即它可以包含在多个编译单元中，而不会引起链接器的抱怨）。

标记某些东西`inline`并不能保证它是内联的。这只是对编译器的建议。有时这是不可能的，例如当你有一个虚函数时，或者当涉及到递归时。有时编译器只是选择不使用它。

# ios - iOS-用中心和半径绘制圆

> ID：10064025
> 
> 赞同：1
> 
> 时间：2012-04-08T15:37:12.190
> 
> 标签：ios, geometry

我想只使用中心（x，y）和半径r来画一个圆。

我用`CGRect`. 当我画独立的圆圈时它工作正常。但我想在圆的圆周上画圆。

在这种方法中，问题是：主圆没有完全移动外圆的中心，因为外圆是使用`CGRect/frame`.

所以如果我们可以使用中心和半径画一个圆，请帮助我。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-08T15:47:40.653

X,Y 和半径是你的变量。

```
CGRect r;

r.origin.y = Y-radius;
r.origin.x = X-radius;
r.size.width = 2*radius;
r.size.height 2*radius; 
```

然后在这个 CGRect 中画圆

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-05T00:42:48.610

弗朗切斯科的回答有效。我唯一要补充的是澄清 Y 和 X 是什么（中心 Y 和中心 X）。这是我最终包含绘图的内容，并且我还用与外线相同的颜色填充了圆圈。

```
CGFloat radius = self.bounds.size.height/4.0;
CGFloat centerX = self.bounds.size.width/2;
CGFloat centerY = self.bounds.size.height/2;

CGRect r;
r.origin.y = centerY-radius;
r.origin.x = centerX-radius;
r.size.width = 2*radius;
r.size.height = 2*radius;

CGContextRef context = UIGraphicsGetCurrentContext();
CGContextSetLineWidth(context, 2.0);
CGContextSetStrokeColorWithColor(context,
                                     [UIColor greenColor].CGColor);
CGContextAddEllipseInRect(context, r);
CGContextStrokePath(context);

CGContextSetFillColorWithColor(context,
                                   [UIColor greenColor].CGColor);
CGContextFillEllipseInRect(context, r); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-07-07T17:23:56.083

您可以使用如下所示的贝塞尔路径在 draw(_ rect: CGRect) 方法中绘制一个圆。

```
import UIKit
import CoreGraphics

class CircleView: UIView {
    var radius: Double = 200.0
    var lineWidth: CGFloat = 5.0
    var centre = CGPoint.zero
    override func draw(_ rect: CGRect) {
        var arrRadians = [Double]()
        let pieVal = Double.pi * 2.0
        let incrVal = pieVal / 100
        arrRadians = stride(from: 0, to: 100, by: incrVal).map{$0}
        for rad in arrRadians {
            let sinRad = (sin(rad) * radius) + Double((rect.size.width / 2))
            let cosRad = (cos(rad) * radius) + Double((rect.size.height / 2))
            let point = CGPoint(x: sinRad, y: cosRad)
            let path = UIBezierPath()
            path.move(to: centre == CGPoint.zero ? point : centre)
            path.addLine(to: point)
            centre = point
            let shapeLayer = CAShapeLayer()
            shapeLayer.path = path.cgPath
            shapeLayer.strokeColor = UIColor.red.cgColor
            shapeLayer.lineWidth = lineWidth
            self.layer.addSublayer(shapeLayer)
        }
    }
} 
```

然后使用 setNeedsDisplay() 方法更改圆的半径。

```
viewCircle.radius = 100
viewCircle.setNeedsDisplay() 
```

结果：

[![在此处输入图像描述](../Images/3630578d575a39474306e282ea87660c.png)](https://i.stack.imgur.com/ZOOS8.png)

# java - java中的/proc/uptime等虚拟文件

> ID：10064030
> 
> 赞同：1
> 
> 时间：2012-04-08T15:38:03.013
> 
> 标签：java, file, virtual

是否可以在 java 中创建虚拟文件（例如 /proc/uptime for exanple）？也就是说，文件并不真正代表硬盘上的物理实体，而是在访问时，某些进程会返回内容。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T15:42:11.967

您可以尝试使用[FUSE](http://en.wikipedia.org/wiki/Filesystem_in_Userspace)创建虚拟文件系统。挂载后，文件系统调用（例如，当您`ls`在 shell 中执行时）最终会调用您的代码。

显然，它也有一些[Java 绑定](http://code.google.com/p/javafuse/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T15:44:34.203

作为常规进程，您不能创建像 /proc/uptime 这样的文件，因为它是由内核公开的。

您可以尝试创建一个命名管道，这是与单个进程通信的好方法。但即便如此，您也必须跳入 JNA/JNI，或使用 shell。

# php - 登录后无法重定向到php页面

> ID：10064037
> 
> 赞同：0
> 
> 时间：2012-04-08T15:38:44.527
> 
> 标签：php, html, login, sqlite

刚刚注意到，在使用用户名和密码登录后，我永远不会重定向到 welcome.php 页面，但它看起来输入被接受:(

有任何想法吗？错误是：没有这样的文件或目录

那是代码 index.php：

```
<?php
session_start();
ob_start();

include "functions.php";

$database = "/mnt/www/zzz/summer.db"; // Database name
$table = "login"; // Table name
$logged = ""; // Logged status
// Open database
$opendb = new SQLite3($database);
$finduser = "SELECT * FROM $table WHERE UserName='".$username."'";
$finduserandpass = "SELECT * FROM $table WHERE UserName = '".$username."' AND Password = '".$password."'";

if($_POST['submit'])
{
  $username = protect($_POST['username']);
  $password = protect($_POST['password']);
  if(!$username || !$password)
  {
        echo "Username and password are required!";
  }
  else
  {
        $results = $opendb->query($finduser) or die("Query error");
        // numColumns() is counting table row
    $count = $results->numColumns();
    if($count == 0)
    {
      echo "The ussername does not exist!";
    }
    else
    {
            $count = $results->numColumns();
      if($num == 0)
      {
        echo "Wrong password!";
      }
      else
      {

        $results2 = $opendb->query($finduserandpass) or die("Query error");
        $row = $finduserandpass->fetchArray(SQLITE3_ASSOC);
                if($row['E_mail'] == NULL)
                {
                    echo "Your account is not yet activated!";
                }
                else
        {

                    $_SESSION['$username'] = $logged;
                    echo "Welcome!";
                    $time = date($logged)+60;
                    //redirect to the welcome page
                    header('Location: welcome.php');
        }
      }
    }
  }
}

?>

<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-type" content="text/html; charset=UTF-8">
<title>
Title of the document
</title>
<style type="text/css">
body {background-color:teal;}
</style>
</head>
<body>
<form action="login.php" method="post">
<table cellpadding="2" cellspacing="0" border="0">
<tr>
<td>Username:</td>
<td><input type="text" name="username"></td>
</tr>
<tr>
<td>Password:</td>
<td><input type="password" name="password"></td>
</tr>
<tr>
<td colspan="2" align="center"><input type="submit" name="submit" value="Login"></td>
</tr>
</table>
</form>
</body>
</html> 
```

函数.php

```
<?php

function protect($mystring)
{
    $string = trim(strip_tags(addslashes($mystring)));
    return $mystring;
}

?> 
```

欢迎.php

```
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-type" content="text/html; charset=UTF-8">
<title>
Summer Project Control Panel
</title>
<link rel="stylesheet" type="text/css" href="style.css" />
<script type="text/javascript">
</script>
</head>

<body>
<?php
session_start();
if(!$_SESSION['$username'])
{
    header("Location: index.php");
}
else
{
  $currentUser = $_SESSION['username'];
  $message = '<p>Welcome, ' . ucfirst($currentUser) . '!</p>';
  echo $message;
}
?>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-08T15:42:24.920

在发送标头之前不要回显或打印任何内容。尝试注释掉该行`echo "Welcome!";`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-08T16:12:29.077

错误的密码位是因为您正在检查一个不存在的变量`$num`- 第一次出现在您的`if`语句中

我想你也`numrows`不想`numcolumns`- [http://www.php.net/manual/en/function.sqlite-num-rows.php](http://www.php.net/manual/en/function.sqlite-num-rows.php)

最后，您需要`echo`在重定向之前删除该语句，这会给您带来问题，并且在您将它们发送到不同页面时无论如何用户都不会看到。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-07T05:05:06.717

如果要重定向用户，请不要输出任何内容，否则重定向将不起作用。只需删除 echo 语句，它应该可以正常工作。

# java - 与 jcombobox 同步哈希图

> ID：10064044
> 
> 赞同：2
> 
> 时间：2012-04-08T15:39:26.763
> 
> 标签：java, swing

有没有办法将哈希图的条目值与 JComboBox 同步。这意味着当我将更多项目添加到哈希映射时，JComboBox 会自动意识到可以选择新项目。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-08T15:42:34.527

您可以通过扩展、`AbstractListModel<E>`实现 `ComboBoxModel<E>`、、和使用 a作为模型类的核心来创建自己的组合框模型（TreeMap 而不是 HashMap，因为组合框模型的数据必须按特定顺序维护）。只要确保在 HashMap 中添加或删除数据时触发正确的数据更改方法。`ListModel<E>``MutableComboBoxModel<E>``TreeMap<T, E>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T15:45:01.060

扩展 HashMap 以实现 Observable 接口只需将 Observor 更新功能放在 HashMap 的 add 方法中并在您的 jComboBox 中侦听更新

# url - 在 Mozilla Firefox 中导致谷歌搜索的 URL

> ID：10064049
> 
> 赞同：0
> 
> 时间：2012-04-08T15:40:32.577
> 
> 标签：url, firefox

例如，我有这个 localhost 文件夹：

```
http://localhost/Online Buddy/ 
```

为什么 Firefox 不能像 Google Chrome 那样自动将空格转换为`online`和？每当我点击它时，它就会带我进入 Google 搜索。`buddy``%20`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T15:43:50.380

Firefox 只会在识别您输入地址时替换空格。显然，Firefox 不会像识别 *.com （等）一样自动将 localhost 识别为域，因此它假定您要搜索。您的基本选择是：

*   在您的网站 URL 中不要有任何空格，下划线可以手动使用
*   输入 URL 时用 %20 代替空格
*   禁用地址栏搜索

要禁用地址栏搜索，请导航到 about:config 并将 keyword.enabled 设置为 false。

# java - 用于查找两棵树的交集的数据结构

> ID：10064051
> 
> 赞同：0
> 
> 时间：2012-04-08T15:40:33.717
> 
> 标签：java, search, data-structures, hashmap, equals

我有两棵树，其中包含节点，在我创建它们之后，我将第一棵树的所有节点放入链表，将第二棵树的所有节点放入 hashmap，作为映射的键。我想从树中找到两个节点，它们具有相同的变量，称为：状态（长类型）。所以在创建之后我调用：

```
List<Node> list;
HashMap<Node, Node> hashtable;

...create nodes, take them to the collections

for(Node n : list){
    if(hashtable.containsKey(n)){
        //doSomething          
    }
} 
```

我正在使用 hashmap，因为它非常快，很艰难，我有 4000000（400 万）个节点。我已经覆盖了 Node 类的 equals 方法，但似乎 containskey 方法检查了哈希码，但据我了解，它只需要检查[指向 java 参考的 equals 方法链接](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Map.html#containsKey%28java.lang.Object%29)。所以问题是我应该使用什么数据结构来检查这个东西，或者我应该如何重写代码？

这是我的equals方法：

```
 @Override
    public boolean equals(Object obj) {
    if(obj instanceof Node){
        Node node = (Node)obj;
        return (states == node.getStates());
    }
    return false;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T15:46:37.337

覆盖时必须覆盖`hashCode()`方法，`equals()`以便相等的对象必须具有相同的哈希码。请参阅[http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html#equals(java.lang.Object](http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html#equals(java.lang.Object) )。

# django - 如何在 django 中自动填写表单字段

> ID：10064052
> 
> 赞同：2
> 
> 时间：2012-04-08T15:41:04.560
> 
> 标签：django, forms, modelform

我有一个包含四个字段的模型表单：消息、作者、房间和时间戳。时间戳设置为 auto_now，因此不会出现在表单中。Author 和 Room 都是外键，我希望它们自动填写在表单中，作者设置为 request.user 并且房间通过 url 传递给查看：/add_message/{{ room.id }}/'我希望客户填写的唯一字段是消息。这是迄今为止的观点，但我不确定如何实现这一目标：

```
@login_required(login_url="/login/")
def add_message(request, room_id):
    p = get_object_or_404(Room, pk=room_id)
    m = Message.objects.all().order_by('-timestamp')
    form = MessageForm(request.POST or None)
    if form.is_valid():
        cmodel = form.save()
        cmodel.save()
    return HttpResponseRedirect(reverse('chat.views.add_message', args=(p.id,)))

return render_to_response('chatroom.html', {'contact_form': form, 'room':p, 'latest_message_list': m}, context_instance=RequestContext(request)) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T16:05:46.447

没有测试，但应该工作

**表格.py**

```
class MessageForm(forms.ModelForm):
    def __init__(self, **kwargs):
        self.room = kwargs.pop('room', None)
        self.author = kwargs.pop('author', None)
        super(MessageForm, self).__init__(**kwargs)

    def save(self, commit=True):
        obj = super(MessageForm, self).save(commit=False)
        obj.room = self.room
        obj.author = self.author
        if commit:
            obj.save()
        return obj

    class Meta:
        model = Message 
```

**视图.py**

```
@login_required(login_url="/login/")
def add_message(request, room_id):
    room = get_object_or_404(Room, pk=room_id)
    form = MessageForm(room=room, author=request.user, data=request.POST)
    if form.is_valid():
        form.save()
    return HttpResponseRedirect(reverse('chat.views.add_message', args=(p.id,))) 
```

# javascript - 如何将东部标准时间设置为 Datepicker (jquery ui) - 使用 javascript

> ID：10064056
> 
> 赞同：0
> 
> 时间：2012-04-08T15:41:25.117
> 
> 标签：javascript, jquery, jquery-ui, datapicker

如何将东部标准时间设置为 Datepicker (jquery ui) - 使用 javascript。（我只知道服务器端而不是客户端的方式（对我来说不可能，但也许我错了））

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T15:57:53.207

你可以使用 jQuery Globalize 插件。

[https://github.com/jquery/globalize/](https://github.com/jquery/globalize/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T16:01:25.250

作为配置的一部分，您可以设置它的本地化。

[http://jqueryui.com/demos/datepicker/#localization](http://jqueryui.com/demos/datepicker/#localization)

# ruby-on-rails - Rails 邮件程序在会话持久性和发送电子邮件方面存在问题

> ID：10064057
> 
> 赞同：1
> 
> 时间：2012-04-08T15:41:46.997
> 
> 标签：ruby-on-rails, rails-activerecord

我正在研究 Ryan Bates 的 Railscast #124：Beta 邀请。我已经准备好所有代码，但我还有两个问题。

1.  会话不会在电子邮件发送过程中持续存在。出于某种原因，当登录用户向朋友发送邀请时，应用程序会注销该用户。
2.  已登录的用户无法发送电子邮件。我收到一条关于参数数量错误的错误消息。

我不认为这两个问题是相关的，但如果它们是相关的，我想我应该同时提到这两个问题。有谁知道为什么我会遇到这两个问题？

以登录用户身份发送电子邮件邀请时出现错误消息：

```
 ArgumentError in InvitationsController#create

    wrong number of arguments (0 for 2)
    Rails.root: /*********/MyApp

    Application Trace | Framework Trace | Full Trace
    app/mailers/user_mailer.rb:10:in `invitation'
    app/controllers/invitations_controller.rb:16:in `create' 
```

控制器

```
class InvitationsController < ApplicationController

  def new
    @invitation = Invitation.new
  end

  def create
    @invitation = Invitation.new(params[:invitation])
    @invitation.sender = current_user
    if @invitation.save
      if current_user?(nil) 
         flash[:notice] = "Thank you, we will notify when we are ready."
         redirect_to root_path       
      else
        UserMailer.invitation.(@invitation, signup_path(@invitation.token)).deliver
        flash[:notice] = "Thank you, invitation sent."
        redirect_to hunts_path 
      end
    else
      render :action => 'new'
    end
  end

end 
```

邮件程序/User_Mailer.rb。第 10 行是显示“definvitation(invitation, signup_path)”的行。

```
class UserMailer < ActionMailer::Base
  default :from => "********"

  def registration_confirmation(user)
    @user = user
    attachments["rails.png"] = File.read("#{Rails.root}/app/assets/images/rails.png")
    mail(:to => "#{user.name} <#{user.email}>", :subject => "Registered")
  end

  def invitation(invitation, signup_path)
    subject    'Invitation'
    recipients invitation.recipient_email
    body       :invitation => invitation, :signup_url => signup_path
    invitation.update_attribute(:sent_at, Time.now)
  end

end 
```

模型/邀请.rb

```
class Invitation < ActiveRecord::Base

  belongs_to :sender, :class_name => 'User'
  has_one :recipient, :class_name => 'User'

  validates_presence_of :recipient_email
  validate :recipient_is_not_registered
  validate :sender_has_invitations, :if => :sender

  before_create :generate_token
  before_create :decrement_sender_count, :if => :sender

  private

  def recipient_is_not_registered
    errors.add :recipient_email, 'is already registered' if User.find_by_email(recipient_email)
  end

  def sender_has_invitations
    unless sender.invitation_limit > 0
      errors.add_to_base 'You have reached your limit of invitations to send.'
    end
  end

  def generate_token
    self.token = Digest::SHA2.hexdigest([Time.now, rand].join)
  end

  def decrement_sender_count
    sender.decrement! :invitation_limit
  end

end 
```

路由.rb

```
resources :users, :invitations
resources :sessions, :only => [:new, :create, :destroy]

match '/signup/',  :to => 'users#new'
match '/signup/:invitation_token', :to => 'users#new'
match '/signin',  :to => 'sessions#new'
match '/signout', :to => 'sessions#destroy'
match '/contact', :to => 'pages#contact'
match '/about',   :to => 'pages#about' 
match '/help',    :to => 'pages#help'

root :to => "pages#home"
match ':controller(/:action(/:id(.:format)))' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T15:46:05.070

如果你直接从你的代码中复制了这个，你有一个额外的点导致你在这一行出现异常：

```
UserMailer.invitation.(@invitation, signup_path(@invitation.token)).deliver 
```

邀请和 (

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-06T09:42:24.270

好的，所以这导致了会话持久性问题：

**在invitation.rb 中的邀请模型**，相关部分

```
belongs_to :sender, :class_name => 'User'
[...]
before_create :decrement_sender_count, :if => :sender
[...]
def decrement_sender_count
  sender.decrement! :invitation_limit
end 
```

在查看日志后，我看到**减少了！**方法以某种方式认为更新数据库中的*remember_token*也很有趣。那么 cookie 中的*remember_token*就不再有效了。我想出的第一个丑陋的解决方法是：

```
def decrement_sender_count
  # sender.decrement! :invitation_limit
  limit = sender.invitation_limit
  sender.update_attributes(:invitation_limit => (limit.to_i-1))      
end 
```

我会问另一个问题，以了解 ActiveRecord 的情况。[在这里](https://stackoverflow.com/a/11360470/422656)查看更好的答案。

# linux - Linux I/O 重定向

> ID：10064062
> 
> 赞同：0
> 
> 时间：2012-04-08T15:42:27.730
> 
> 标签：linux, bash, io, redirect

此查询将标准输出和标准错误保存到同一文件（输出）：

**找到 /home -not -group root > ~/out 2>&1**

如何按字母顺序组合两个流的内容并保存到文件中？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T15:44:52.063

将它们传递给`sort`.

```
find /home -not -group root > >(sort > ~/out) 2>&1 
```

# java - 在 if 语句中使用按位 &

> ID：10064068
> 
> 赞同：11
> 
> 时间：2012-04-08T15:43:03.467
> 
> 标签：java, c, if-statement, bit-manipulation, operator-keyword

在 C 中，我可以编写一个 if 语句

```
if (firstInt & 1) 
```

但是当我尝试在 Java 中做同样的事情时，编译器告诉我“不兼容的类型”并说我需要 a`boolean`而不是`int`. 有没有办法用 Java 编写 C 代码？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-04-08T15:43:51.327

以下任何一项都应该适合您：

```
if ((firstInt & 1) != 0)
if ((firstInt & 1) > 0)
if ((firstInt & 1) == 1) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T19:22:55.433

在 C 中，整数表达式可以隐式用作布尔表达式（尽管我认为这是一个坏主意），其中零为假，任何非零值为真。

在 Java 中，这是不允许的，因此您必须通过使用比较运算符将整数结果与其他整数值或表达式进行比较，从而使表达式显式为布尔值。

# c++ - 使用 invert() 或 inv() 在 opencv 中反转矩阵时出现运行时错误

> ID：10064069
> 
> 赞同：1
> 
> 时间：2012-04-08T15:43:17.340
> 
> 标签：c++, opencv, matrix-inverse

我正在尝试反转opencv中的矩阵。没有构建错误，但我不断收到“未知函数中不支持的格式或格式组合（），文件..\..\..\..\ocv\opencv\modules\core\src\lapack.cpp，第 1469 行”，这对理解我做错了什么没有多大帮助。我正在使用以下代码：

```
Mat centerPointsMat = Mat(5, 3, CV_32SC2);
Mat centerPointsMatInv = Mat(5, 3, CV_32SC2);
for(int i=0; i<5; i++)
{
    Point p1=Point(0,i);
    centerPointsMat.at<float>(p1) = ((CvPoint*)CV_GET_SEQ_ELEM(CvPoint,centerPointsSeq,i))->x^2;
    Point p2=Point(1,i);
    centerPointsMat.at<float>(p2) = ((CvPoint*)CV_GET_SEQ_ELEM(CvPoint,centerPointsSeq,i))->x;
    Point p3=Point(2,i);
    centerPointsMat.at<float>(p3) = 1;
}
centerPointsMatInv = centerPointsMat.inv(1); 
```

同样使用 invert() 而不是 inv() 会产生相同的结果。

我错过了什么？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-08T15:48:58.177

只有非奇异、平方、正定矩阵才能有逆矩阵。

请参阅[此页面](http://en.wikipedia.org/wiki/Inverse_of_a_matrix)了解更多信息

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-10T07:08:11.873

就像 vasile 这里指出的那样， invert() 仅支持双精度或浮点矩阵类型。将我的矩阵类型从 CV_32SC2 更改为 CV_32FC1 似乎已经解决了它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-25T11:54:49.510

`invert`使用先前答案指出的简单功能必须遵循一些标准。首先，矩阵必须是 32 浮点型。

但是 invert 函数可以有第三个参数，它是一个标志，它告诉执行 invert 背后的算法类型：

`DECOMP_LU`,`DECOMP_SVD`并且`DECOMP_CHOLESKY`是使用的三种类型。

从 opencv-3.0 文档：

> 函数 invert 反转矩阵 src 并将结果存储在 dst 中。当矩阵 src 为奇异矩阵或非正方形时，该函数计算伪逆矩阵（dst 矩阵）以使 norm(src*dst - I) 最小，其中 I 是单位矩阵。
> 
> 在 DECOMP_LU 方法的情况下，如果逆计算成功，则函数返回非零值，如果 src 是奇异的，则返回 0。
> 
> 在 DECOMP_SVD 方法的情况下，该函数返回 src 的逆条件数（最小奇异值与最大奇异值之比），如果 src 是奇异值，则返回 0。如果 src 是奇异的，则 SVD 方法计算伪逆矩阵。
> 
> 与 DECOMP_LU 类似，方法 DECOMP_CHOLESKY 仅适用于也应该是对称且正定义的非奇异方阵。在这种情况下，函数将倒置矩阵存储在 dst 中并返回非零值。否则，它返回 0。

# jquery - jQuery - 扩展菜单

> ID：10064070
> 
> 赞同：2
> 
> 时间：2012-04-08T15:43:21.433
> 
> 标签：jquery, hover, mouseover

我想实现以下几点。我有几个小图像，如果鼠标在其中一个图像上，`div`应该可以看到一个或一些按钮。但是如果鼠标移动到另一个图像，`div`应该显示另一个（按钮）并且`div`应该隐藏旧的。如果未选择任何图像，则不应显示任何内容。jQuery 库中是否有任何函数可以执行此类操作？

我试图用一个`mouseover`函数和`toogle()`. 但问题是，当鼠标离开图像时，最近显示的图像又`div`被隐藏了。此外，如果我将其设置`div`为可见，`mouseover`即使选择了另一个图像，它仍然会显示。

```
<div id="Div1">This is div1</div>
<div id="Div2">This is div2</div>​ 
```

当鼠标经过“div1”时，“div2”应该会显示，直到鼠标离开“div1”或“div2”。这意味着，如果鼠标经过“div2”（鼠标向左“div1”），“div2”仍应显示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T15:53:43.400

听起来你想要[jQuery hover](http://api.jquery.com/hover/)。由于您的问题不包含代码，因此很难提供准确的答案，但这符合您的描述。

```
$(document).ready(function() {
    $("#myDiv").hover(
      function() {
        $("#otherDiv").show();
      }, 
      function() {
        $("#otherDiv").hide();
      }
    );
}); 
```

[**jsFiddle 演示**](http://jsfiddle.net/XGXJz/1/)

**编辑**

```
$(document).ready(function() {
    $("#wrapper").hover(
      function() {
        $("#otherDiv").show();
      }, 
      function() {
        $("#otherDiv").hide();
      }
    );
});​ 
```

CSS：

```
#otherDiv {
    display: none;
} 
```

HTML：

```
<div id="wrapper">
    <div id="myDiv">hover me</div>
    <div id="otherDiv">stuff</div>
</div>​ 
```

[**更新的演示**](http://jsfiddle.net/XGXJz/7/)

# forms - Dolphin 中未显示 Wordpress 提交按钮

> ID：10064071
> 
> 赞同：0
> 
> 时间：2012-04-08T15:43:36.520
> 
> 标签：forms, wordpress, plugins, contact

我使用 Easy Contact Form 插件为 Wordpress 主题创建了一个表单，该插件适用于传统浏览器，但在 Android 的 Dolphin 浏览器上，“提交”按钮未显示。

这是有原因的吗，是否有其他表单插件可以同时用于桌面和移动浏览器？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T13:25:53.347

使用的 Wordpress EZ 联系表格不起作用，所以我切换到联系表格 7 插件。提交现在显示在 Android 上。

# jquery - 通过modernizr.load 加载respond.js 异步很慢？

> ID：10064079
> 
> 赞同：0
> 
> 时间：2012-04-08T15:44:25.180
> 
> 标签：jquery, asynchronous, modernizr, respond.js

我正在使用 Modernizr.load() 方法来测试浏览器（即）是否理解媒体查询，如果没有，我会加载 respond.js 库。

但是，我看到通过modernizr.load 方法加载respond.js 给我一个FOUC，而内联脚本方法没有。

modernizr.load 方法：

```
<script>
  Modernizr.load([{
    load: 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js',
    complete: function () {
      if (!window.jQuery) {
        yepnope('js/libs/jquery.js?v=1.7.2');
      }
    }
  },
  {
    test: Modernizr.mq('only all'),
    nope: 'js/plugins/respond.js?v=v1.1'
  }])
</script> 
```

内联方法：

```
<!--[if lte IE 8]>
  <script src="js/plugins/respond.js?v=v1.1"></script>
<![endif]--> 
```

为什么呢？不应该是异步方法更快吗？还是内联方法更好，因为脚本阻塞了 DOM 并等待脚本加载...？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T19:05:12.067

这取决于您对 FOUC 的关心程度。异步方法的优点是它是非阻塞的。我会切换它，以便首先响应，这样您就不必等待 jQuery 被解析。那可能会解决FOUC。像这样打电话给`Modernizr.load`你的`<head>`（[见这里](https://stackoverflow.com/questions/8042767/is-modernizr-load-yepnope-meant-to-be-used-in-the-head)）：

```
Modernizr.load([{
    test: Modernizr.mq('only all'),
    nope: 'js/plugins/respond.js?v=v1.1'
  },{ 
    load: 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js',
    complete: function () {
        window.jQuery || Modernizr.load('js/libs/jquery.js?v=1.7.2');
    }
}]); 
```

你的 IE 条件也是很好的解决方案——可以说更好。如果你这样做，那么只要把它放在 jQuery 之前就可以了：

```
<!--[if lt IE 9]> 
    <script src="js/plugins/respond.js?v=v1.1"></script>
<![endif]-->

Modernizr.load([{
    load: 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js',
    complete: function () {
        window.jQuery || Modernizr.load('js/libs/jquery.js?v=1.7.2');
    }
}]); 
```

# r - 在 ggplot2 中用闪避的条形图绘制相对频率

> ID：10064080
> 
> 赞同：2
> 
> 时间：2012-04-08T15:44:31.520
> 
> 标签：r, ggplot2, frequency

谁能回答我如何绘制一个条形图，该条形图将数字 x 变量映射到其相对频率，按 ggplot2 中的一个因子分组？重要的是：相对频率应计算为**属于**一个因素的 x 值内的组频率。现在它们被计算为相对于 x 值**总数**的 x 值。

为了说明这一点，举个例子：

```
library(ggplot2)

data <-data.frame(x=runif(100,0:1), f=sample(1:3,100,replace=TRUE))
data$f <-factor(data$f)
p <-ggplot(data, aes(x, colour=f, fill=f, group=f)) +
    xlim(0,1) +
    scale_y_continuous('Relative Frequency', formatter='percent') # or labels=percent 
```

让我们将它们绘制成多面图。然后 y 轴显示比例是按组计算的。我使用了这段代码：

```
p + stat_bin(aes(y=..count../sum(..count..)), position='dodge', binwidth=0.2) +         facet_grid(~f) 
```

让我们密谋他们躲避。y 轴显示比例指的是整个数据集。在这里，我使用了以下代码：

```
p + stat_bin(aes(y=..count../sum(..count..)), position='dodge', binwidth=0.2) 
```

我的目标是创建一个像第二个一样的图，其中每组变量的频率在 y 轴上。

非常感谢您提前提供的帮助！亚娜

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T09:31:12.867

我遇到了和你一样的问题，我想通了： 实际上，由 bin stat 创建的变量基本上等于比例/绑定宽度，而不是`..count../sum(..count..)`plotting 。您的代码变为：`..density..*your_binwidth``..density..`

```
p + stat_bin(aes(y=..density..*0.2), position='dodge', binwidth=0.2) 
```

# java - LinkHashMap/LinkedHashSet 中的迭代排序如何导致性能比 HashMap 略低

> ID：10064091
> 
> 赞同：1
> 
> 时间：2012-04-08T15:45:50.880
> 
> 标签：java, collections, linkedhashmap, linkedhashset

由于 LinkedHashMap/Set 保持 Collection 中的条目顺序，因此会导致性能稍低。我想知道为什么会这样。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-08T15:51:45.690

`LinkedHash[Map/Set]`使用双向链表来跟踪条目的顺序。因此，无论何时添加一个元素，都必须创建一个新的 DLL 节点。分配需要时间，并且需要设置几个额外的指针。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T00:46:11.027

问题是做出了一个无效的假设，即 LinkedHash[Map/Set] 的性能总是比它们的非链接对应物差。

LinkedHash[Map/Set] 具有维护用于形成链表的指针的额外任务，这意味着在执行添加或删除时性能比 Hash[Map/Set] 稍差（尽管仍然是恒定时间）。

然而，当迭代 LinkedHash[Map/Set] 时，**性能**与集合的**大小**成正比，而非链接对应物与集合的**容量**成正比。当迭代 Hash[Map/Set] 时，最好的情况是容量刚好足以容纳所有元素（即容量=大小），并且在这种情况下它具有相同的性能。另请记住，除非您有一个非常静态的集合/地图并且您设置了容量，否则容量不太可能等于大小。

因此，如果您更关心构建地图/集的性能，那么您应该选择 HashMap 或 HashSet，但如果您更关心迭代该地图/集，请选择 LinkedHashMap 或 LinkedHashSet。

另见：[http ://docs.oracle.com/javase/6/docs/api/java/util/LinkedHashSet.html](http://docs.oracle.com/javase/6/docs/api/java/util/LinkedHashSet.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-08T15:53:35.780

`LinkedHashMap`/`Set`包含两种数据结构：哈希表和链表，因此插入和删除操作会导致对两种数据结构的修改，而简单的相同操作`HashMap`仅触及一种数据结构（哈希表）。这就是为什么`LinkedHashMap`/`Set`速度较慢并消耗更多内存的原因。

# ajax - CakePHP：JSON 与 AJAX

> ID：10064093
> 
> 赞同：6
> 
> 时间：2012-04-08T15:46:22.593
> 
> 标签：ajax, json, cakephp

我知道这个问题的标题可能有点误导；我意识到 JSON 是一种格式化数据的方式，而 AJAX 是一种无需刷新即可从/向服务器拉取/推送更新的方式。我问是因为我在这方面没有太多的经验。

鉴于我有一个 CakePHP Web 应用程序：**如果我选择它只是一个偏好问题**

*   要使用 JSON 来拉/推数据，然后在客户端使用脚本来更新页面？
*   要使用 AJAX 从服务器获取完整的 HTML 片段并将其插入页面？

我在两者之间看到的唯一区别是 JSON 意味着更少的服务器负载和带宽使用，以及开发人员可能更喜欢使用哪种语言（JSON 可能意味着更多的客户端脚本？）。

有人可以为我解释一下这件事吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-08T16:42:26.967

好问题。尤其是在 Backbone.js 之类的东西变得越来越流行的时候。

让我们一步一步看。

首先，服务器上生成 JSON 而不是 HTML 的负载可能或多或少是相同的。大多数资源不会将您的数据对象转换为 HTML 或 JSON，但它们会接受客户端请求，加载您的框架，在您的情况下为 CakePHP，路由请求，加载更多组件，建立数据库连接，向其抛出查询，接受结果，将它们转换为数组/对象，然后您才开始将该数据输出到您的视图的字符串（JSON 或 HTML）。问题是，尽管像 PHP 这样的服务器端语言并没有真正对遍历事物并将值输出到字符串中留下深刻印象，但它们可以毫无困难地做到这一点。

实际上，当您开始输出 JSON 时，性能差异不会那么大。至少，对于大多数事情来说还不够好。

当你想要使用 JSON 时，你有一个复杂的功能。例如 tweetdeck 的提要，其中有许多需要更新的小组件和数据片段；单个推文、推文列表、关注者数量等。加载这些小信息而不是每次都重新下载完整的 HTML 集是有意义的。您将使用 JSON 和客户端模板，因为您有许多可能会改变的东西。

然而，在更“正常”的应用程序中，如博客、电子商务网站、wiki 等，您实际上并不需要像这样的细粒度的东西。在这种情况下，您将使用 AJAX（使用您的定义）。

一些原因是构建 HTML 视图比首先构建返回 JSON 的视图然后构建客户端模板来呈现这些视图更容易且对开发人员更友好。在服务器端模板中检查某些条件、创建循环、在需要时获取额外数据等更容易。无论如何，它不会影响你的表现。

另一个原因是您也可以在服务器端使用静态 HTML 来呈现非 AJAX 页面，作为后备。因此，当客户端可以使用 AJAX 时，您可以通过 AJAX 加载内容，并将您的 '' 的内容替换为您获得的 HTML 中的 ''，但是当没有任何可用的 AJAX 时，您只需重定向到那个页面。所以现在您支持 javascript 和非 javascript 客户端。您也可以使用服务器端和客户端模板来实现这一点，但这需要双重工作或使用 Mustache 之类的东西。

最重要的是，使用 JSON 在客户端进行所有渲染的一个缺点是渲染页面需要一些信息，但不应该掌握在用户手中。我可以想象诸如信用卡数据、社会保险号、真实姓名等之类的东西，在您在服务器端呈现之前，您会在代码中运行某种检查。为了在客户端进行相同的检查，您必须将其全部发送给客户端，然后将其提供给用户。当然，您不能这样做并首先在服务器端处理所有数据，然后再将其发送到客户端，但这意味着您已经在做越来越多的 HTML 模板中要做的事情。

总结一下：

对我来说，服务器端或客户端 html 渲染之间的性能在现实生活中并不那么明显。我使用了很多 JSON，但通常用于与视图无关的东西。就像通过 AJAX 调用保存某些内容，然后以 JSON 格式返回状态报告。所以我可以做类似的事情`if data.status == 'awesome'`，等等。如果我完全 AJAX 一个普通的网站，我会使用像 pjax（下面）这样的东西来从服务器加载 HTML 片段。在我看来，javascript 应该与现有的 HTML 一起做事，并且不应该与它过多地耦合。也有例外，当构建需要同时跟踪大量较小数据的非常复杂和实时的应用程序时，客户端模板有它的位置，但不仅仅是无处不在。

看看 pjax，它是一个 javascript 库，用于从服务器端动态地将 html 加载到页面上的元素中。 [http://pjax.heroku.com/](http://pjax.heroku.com/)

DHH 回复了 Hacker News 上关于他们在 Basecamp 上的设置方式和内容的帖子；主要是服务器端脚本，小客户端 MVC。

[https://news.ycombinator.com/item?id=3603898](https://news.ycombinator.com/item?id=3603898)

另一个有趣的链接。LinkedIn 描述了出于性能原因他们如何使用客户端模板。 [http://engineering.linkedin.com/frontend/leaving-jsps-dust-moving-linkedin-dustjs-client-side-templates](http://engineering.linkedin.com/frontend/leaving-jsps-dust-moving-linkedin-dustjs-client-side-templates)

# checkbox - wicket：DropdownChoice 内的复选框

> ID：10064096
> 
> 赞同：0
> 
> 时间：2012-04-08T15:46:33.110
> 
> 标签：checkbox, wicket, dropdownchoice

我希望能够将复选框与来自组件模型的其他文本一起放在下拉列表中，并且用户应该能够通过选中一个或多个复选框来进行选择。

有人可以给我一个指针吗？

非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-08T16:26:29.253

这不能用标准的 html 选择组件来完成。

使用 wicket，您可以实现复选框的重复视图，并向周围的 div 添加一些样式和 javascript，以最初仅显示一个元素（定义高度和可滚动性）并在单击列表时显示更多列表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T08:03:45.667

你真的需要使用下拉菜单吗？如果您的要求是有一个可以隐藏的可选项目列表，那么您可以通过以下几种方式做到这一点：-

1.  创建一个包含复选框、文本字段等的 Wicket 片段。可以使用 Ajax 链接或 Javascript 使片段可见或不可见。

2.  如果您需要在页面之间重用组件，那么请考虑将项目放在面板中，而不是使用片段。如上所述，可以使面板可见或不可见。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-08T17:35:33.607

如果您使用的是 jQuery（或 wiQuery），您应该查看已经存在的插件。如前所述，仅凭 Wicket 无法解决此任务。

例如，请参阅[http://wiki.jqueryui.com/w/page/12138056/Selectmenu](http://wiki.jqueryui.com/w/page/12138056/Selectmenu)或[http://jquery-ui.googlecode.com/svn/branches/labs/selectmenu/index.html](http://jquery-ui.googlecode.com/svn/branches/labs/selectmenu/index.html)。请注意，我自己没有使用过任何这些。

但是，老实说，我认为无论如何你都应该重新考虑你的计划。只是阅读您对 UI 的描述（下拉列表中的可选复选框和文本）让我不寒而栗 ;-)

# c++ - 在运行递归函数时将新元素插入向量中的问题

> ID：10064102
> 
> 赞同：1
> 
> 时间：2012-04-08T15:47:20.857
> 
> 标签：c++, algorithm, recursion, vector, permutation

我有一个类，我想生成字符串“123”的所有排列

所以我想要字符串 "123","321","132" 等

在这个类中，我定义了一个向量，它将保存我以后要使用的所有这些字符串......

这是我用来查找所有排列的递归：

```
 findPermutations(char *set, int begin, int end){

     int i;
     int range = end - begin;
   if(range == 0) myvE.push_back(set); //notice how I want to update the vector
     else{

    for(i=0;i<range;i++){
        swap(set[begin],set[begin+i]);
        findPermutations(set,begin+1,end);
        swap(set[begin],set[begin+i]);
      }
     }
   } 
```

如果范围为 0，则该集合将仅具有下一个排列。我想将该排列存储在向量中，但最后我的向量充满了“123”字符串

我不明白这里发生了什么

有人可以帮帮我吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T16:49:05.293

我认为问题在于您多次将指向同一字符串的指针添加到向量中，这意味着您的向量将存储指向完全相同字符串的多个指针。由于您在递归中更改此字符串，因此输出将多次是相同的字符串。

要解决此问题，请考虑将字符串的副本存储在向量中，或者切换到类似 atd::string 的类型，以便将字符串添加到向量实际上会为您创建一个副本。

希望这可以帮助！

# model-view-controller - MVC：为什么控制器是视图的策略

> ID：10064105
> 
> 赞同：2
> 
> 时间：2012-04-08T15:47:44.903
> 
> 标签：model-view-controller, design-patterns, strategy-pattern, design-principles

这是 的定义`Strategy Pattern`：

> 策略 - 定义一系列算法，封装每个算法，并使它们可互换。策略让算法独立于使用它的客户而变化。

因此，策略将功能分为两部分：一个不会改变，另一个可以在未来某个时间改变。

而且，在 MVC 中，他们说：

> 控制器是视图的策略

这意味着控制器是变化的，并且视图将来可能不会改变。

我还不太明白。我认为他们两个都可以在未来改变。

请为我解释为什么人们这么说。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-08T16:27:18.987

[我怀疑您可能已经在Model View Controller As An Aggregate Design Pattern](http://c2.com/cgi/wiki?ModelViewControllerAsAnAggregateDesignPattern)的 C3 wiki 部分中看到“控制器是视图的策略”的注释，这很有趣，但有点简洁。

[在Design Patterns](https://rads.stackoverflow.com/amzn/click/com/0201633612)的介绍中更完整地描述了这个想法，其中关于 MVC 的部分说：

> MVC 还允许您更改视图响应用户输入的方式，而无需更改其视觉呈现。例如，您可能想要更改它对键盘的响应方式，或者让它使用弹出菜单而不是命令键。MVC 将响应机制封装在一个 Controller 对象中。控制器有一个类层次结构，可以很容易地创建一个新的控制器作为现有控制器的变体。
> 
> 视图使用 Controller 子类的实例来实现特定的响应策略；要实现不同的策略，只需用不同类型的控制器替换实例即可。甚至可以在运行时更改视图的控制器，让视图改变它响应用户输入的方式。例如，可以禁用视图，使其不接受输入，只需给它一个忽略输入事件的控制器。
> 
> 视图-控制器关系是策略设计模式的一个例子。策略是表示算法的对象。当您想要静态或动态替换算法时，当您有很多算法变体时，或者当算法具有要封装的复杂数据结构时，它很有用。

总结一下，你可以使用相同的视图和不同的控制器在系统的不同部分有不同的行为，你可以在运行时替换控制器来启用或禁用特定的功能，控制器封装了更新的复杂交互该模型。

# c# - 是否可以在 C# 中确定 JVM 版本？

> ID：10064106
> 
> 赞同：0
> 
> 时间：2012-04-08T15:47:53.780
> 
> 标签：c#, jvm, 64-bit, 32-bit

有没有办法在 C# 中确定 JVM 版本（32 位或 64 位）？我发现以下帖子有一种可能的方法：[http](http://forums.devshed.com/net-development-87/c-net-check-java-version-562395.html) ://forums.devshed.com/net-development-87/c-net-check-java-version-562395.html 它建议解析由返回的字符串java -version 命令并查找版本。假设以下内容来自 32 位版本是否安全？

java 版本 "1.6.0_24" Java(TM) SE Runtime Environment (build 1.6.0_24-b07) Java HotSpot(TM) Client VM (build 19.1-b02, 混合模式, 共享)

在运行 64 位 JVM 的设备上，我确实看到 64 位字代替了“客户端 VM”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T15:58:49.837

您找到的方法是合适的，但您需要记住，用户可能安装了多个不同的 JVM 版本，包括（在 64 位机器上）32 位和 64 位 VM。运行 Java.exe 时运行的那个只是路径上的最后一个。

如果您在字符串中没有看到 64 位，则假设是 32 位 VM 可能是安全的。有关命名约定，请参见[http://java.sun.com/j2se/versioning_naming.html](http://java.sun.com/j2se/versioning_naming.html)。

# r - R 编程返回位置

> ID：10064107
> 
> 赞同：-1
> 
> 时间：2012-04-08T15:48:02.003
> 
> 标签：r

我有一个不连续位置的值数据框，即前 100 个值是 1-100，但接下来的 100 个值是 3100-3200。我如何只返回他们的位置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T15:55:02.043

请注意，您已经定义了 201 个条目（3100:3200 的长度为 101）。

哪个位置？对于单个条目：

```
d <- data.frame(val=c(1:100,3100:3200))

which(d$val == 3199) 
```

回报：

```
[1] 200 
```

对于范围之一：

```
which(d$val >= 1 & d$val <= 100) 
```

# xcode - 将 NIB 文件转换为 XIB 文件

> ID：10064108
> 
> 赞同：8
> 
> 时间：2012-04-08T15:48:20.753
> 
> 标签：xcode, macos, interface-builder, xib, nib

有没有办法将`NIB`文件转换为`XIB`文件以便我可以在 Xcode 4 中打开它们？一旦我编辑了它们，有没有办法将它们转换回`NIB`？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-08T16:52:29.660

一旦一个 nib 文件被展平和剥离（现在这是编译过程的默认部分），那么在 IB 中打开它是一个挑战。您可能想查看[NibUnlocker](http://www.charlessoft.com/)，它在将扁平 nib 文件转换为 xib 时很有用，但它不是无损往返，甚至可能不适用于所有情况。与大多数反编译器一样，许多有用的编辑信息已被丢弃。

有关 xib 编译的更多信息，请参阅[ibtool(1)](http://developer.apple.com/library/mac/#documentation/Darwin/Reference/ManPages/man1/ibtool.1.html)。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-14T14:34:28.297

我做了一个简单的应用程序来完成这个任务，这里是链接：[NibToXibConverter](http://db.tt/Q3KOdGjr)

这是代码：[NibToXibConverter@github](https://github.com/Daemon-Devarshi/NibToXibConverter)

希望能帮助到你 ：-）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-12-04T09:28:30.220

无法打开已编译的“nib”文件。我试图在使用工具“ibtool”从 AppStore 下载的“ipa”编译的 nib 文件上实现这一点。下面是一个结果：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
    <key>com.apple.ibtool.errors</key>
    <array>
        <dict>
            <key>description</key>
            <string>Interface Builder cannot open compiled nibs.</string>
            <key>recovery-suggestion</key>
            <string>Try opening the source document instead of the compiled nib.</string>
        </dict>
    </array>
</dict>
</plist> 
```

这是 NibUnlocker App 的结果：

> 无法打开文档“MainViewController.nib”。NIB 文件“file://localhost/Users/xxx/MainViewController.nib”不包含 keyedobjects.nib 文件。也许它是 NibUnlocker 尚未识别的较晚格式。

# grails - 在 Ubuntu 上运行应用程序时出现 Grails 依赖错误

> ID：10064115
> 
> 赞同：0
> 
> 时间：2012-04-08T15:49:10.550
> 
> 标签：grails, ubuntu

尝试在 Ubuntu (8) 上运行带有 grails 2.0.3 的应用程序时遇到以下问题，该应用程序在 OSX 上运行良好：

```
:: problems summary ::
:::: WARNINGS
    ::::::::::::::::::::::::::::::::::::::::::::::
    ::          UNRESOLVED DEPENDENCIES         ::
    ::::::::::::::::::::::::::::::::::::::::::::::
    :: org.grails.plugins#resources;1.1.6: configuration not found in org.grails.plugins#resources;1.1.6: 'master'. It was required from org.grails.plugins#jquery-mobile;1.0.3 compile
    ::::::::::::::::::::::::::::::::::::::::::::::

:: problems summary ::
:::: WARNINGS
    ::::::::::::::::::::::::::::::::::::::::::::::
    ::          UNRESOLVED DEPENDENCIES         ::
    ::::::::::::::::::::::::::::::::::::::::::::::
    :: org.grails.plugins#resources;1.1.6: configuration not found in org.grails.plugins#resources;1.1.6: 'master'. It was required from org.grails.plugins#jquery-mobile;1.0.3 compile
    ::::::::::::::::::::::::::::::::::::::::::::::

| Error Failed to resolve dependencies (Set log level to 'warn' in BuildConfig.groovy for more information):

- org.grails.plugins:resources:latest.integration 
```

知道在哪里寻找问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T16:42:30.847

这可能是插件加载顺序的问题。

遇到类似问题时，我从 application.properties 中删除了所有插件，并在插件之后添加插件（每次服务器重新启动）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T17:52:35.040

所有插件和项目信息都保存在两个目录中

.grails

和

.ivy2

通常它们在您的用户主帐户下。

升级时，您应该使用 grails upgrade 命令。这将解决您的所有插件信息。

如果您遇到问题，您可以做的另一件事是删除您的 .grails 和 .ivy2 目录并从头开始重建您的项目。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T11:53:57.717

我有同样的问题，这就是我发现这个问题的原因。我只需再次运行 run-app 命令就可以正常工作。

# php - 限制包含的文件选项

> ID：10064116
> 
> 赞同：-1
> 
> 时间：2012-04-08T15:49:20.067
> 
> 标签：php, include, limit, require

我现在正在使用模板引擎，我遇到了一个我认为我自己可能找不到解决方案的问题。

作为模板引擎的一部分，我需要包含 PHP 文件。我如何限制我导入的 PHP 文件，他将无法从核心系统的特定文件运行函数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T15:52:37.270

我不确定这会有多有效，但是您可以为呈现所有内容的文件提供它自己的命名空间，与核心文件不同。

它不会 100% 停止它，但它会迫使他们查找核心名称空间等，并且它可能会停止对那些不那么深入研究核心文件的人进行一般的功能挖掘。

# javascript - 在 Object.prototype 上为 NodeList 对象实现 Array 方法是一个好习惯吗？

> ID：10064117
> 
> 赞同：0
> 
> 时间：2012-04-08T15:49:21.203
> 
> 标签：javascript, dom

为了在 NodeList 对象（类似数组）上执行数组方法，我们需要每次都对 Array.prototype 进行间接调用。

我们能做点什么让这`node_list.slice(0,1)`成为可能吗？

由于 NodeList 继承了 Object.prototype 的方法，我实现了如下所示并且完美地工作`node_list.slice(0,1)`

```
Object.prototype.slice = function(a,b){ return Array.prototype.slice.call(this,a,b);} 
```

在 Object.prototype 上实现 slice 有什么缺点吗？

调用 Array.prototype 的传统方式：

```
node_list
[<li>​ test_list1 ​&lt;/li>​, <li>​ test_list2 ​&lt;/li>​]

Object.prototype.toString.call(node_list)
"[object NodeList]"

var content = Array.prototype.slice.call(node_list,0,1)

content
[<li>​ test_list1 ​&lt;/li>​]

Object.prototype.toString.call(content)
"[object Array]" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T15:55:24.970

出于这个原因，扩展 Object 的原型是个坏主意。
即使你想扩展一个内置原型，也要把扩展减少到必要的部分：

```
HTMLCollection
NodeList 
```

没有出现在`for(.. in ..)`循环中的原型方法可以定义如下：

```
var slicer = { value: Array.prototype.slice };
Object.defineProperty(HTMLCollection.prototype, 'slice', slicer);
Object.defineProperty(NodeList.prototype, 'slice', slicer); 
```

也可以看看：

*   [`Object.defineProperty`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Object/defineProperty)

## 最短路径（不扩展原型）

```
// Equivalent to the question's code
[].slice.apply(node_list,0,1)
// A method to turn a node_list/HTMLCollection in an array (for later use?)
[].slice.call(node_list); 
```

# xml - 如何从在线 xml 货币提要解析到 wp7 应用程序

> ID：10064118
> 
> 赞同：1
> 
> 时间：2012-04-08T15:49:24.803
> 
> 标签：xml, parsing, windows-phone-7, converter, currency

所以我知道当我测试在文本块中显示数据时正在读取文件，但似乎无法将 xml 分解为我想要的部分，即货币名称和汇率，然后将它们添加到列表中以供选择和之后进行货币计算。

```
using System.Xml.Linq;

namespace Mike_sMoney
{
public partial class MainPage : PhoneApplicationPage
{
    //String curName;
    //double curRate;

    WebClient myClient;
    //public class Rate
    //{
    //    public String curName { get; set; }
    //    public double curRate { get; set; }
    //}

    // Constructor
    public MainPage()
    {
        InitializeComponent();

        myClient = new WebClient();
        myClient.DownloadStringCompleted += new DownloadStringCompletedEventHandler(myClient_DownloadStringCompleted);

        string urlRate = "http://www.ecb.int/stats/eurofxref/eurofxref-daily.xml";
        myClient.DownloadStringAsync(new Uri(urlRate));

        //XDocument rateDoc = XDocument.Load(new StringReader(urlRate));

        //var rates = from rate in rateDoc.Descendants("Cube")
        //             select new Rate
        //             {
        //                 curName = rate.Attribute("currency").Value,
        //                 curRate = double.Parse(rate.Attribute("rate").Value)

        //             };

    }

    void myClient_DownloadStringCompleted(object sender, DownloadStringCompletedEventArgs e)
    {
        if (e.Error == null)
        {
            //textBlock1.Text = e.Result;
            XElement currencyElements = XElement.Parse(e.Result);

            var curList = from mRate in currencyElements.Descendants("Cube")
                          select new ClassRates
                          {
                              currency=mRate.Element("currency").Value,
                              rate=Convert.ToDouble(mRate.Element("rate").Value)
                          };
            fromListBox.ItemsSource = curList;
        }
        else
        {
            textBlock1.Text = e.Error.ToString();
        }

    }

    private void convertButton_Click(object sender, RoutedEventArgs e)
    {
        double x;
        //string urlRate = "http://www.ecb.int/stats/eurofxref/eurofxref-daily.xml";
        //myClient.DownloadStringAsync(new Uri(urlRate));
        //x = urlRate.getElementsByTagName("rate")[0];

    }

    private void amountTextBox_TextChanged(object sender, TextChangedEventArgs e)
    {
        amountTextBox.SelectAll();
    }
} 
```

}

```
<gesmes:Envelope xmlns:gesmes="http://www.gesmes.org/xml/2002-08-01" xmlns="http://www.ecb.int/vocabulary/2002-08-01/eurofxref">
  <gesmes:subject>Reference rates</gesmes:subject>
  <gesmes:Sender>
    <gesmes:name>European Central Bank</gesmes:name>
  </gesmes:Sender>
  <Cube>
    <Cube time="2012-04-05">
      <Cube currency="USD" rate="1.3068"/>
      <Cube currency="JPY" rate="107.06"/>
      <Cube currency="BGN" rate="1.9558"/>
      <Cube currency="CZK" rate="24.704"/>
      <Cube currency="DKK" rate="7.4397"/>
      <Cube currency="GBP" rate="0.82420"/>
      <Cube currency="HUF" rate="295.95"/>
      <Cube currency="LTL" rate="3.4528"/>
      <Cube currency="LVL" rate="0.6995"/>
      <Cube currency="PLN" rate="4.1707"/>
      <Cube currency="RON" rate="4.3728"/>
      <Cube currency="SEK" rate="8.8134"/>
      <Cube currency="CHF" rate="1.2025"/>
      <Cube currency="NOK" rate="7.5692"/>
      <Cube currency="HRK" rate="7.4820"/>
      <Cube currency="RUB" rate="38.6600"/>
      <Cube currency="TRY" rate="2.3468"/>
      <Cube currency="AUD" rate="1.2710"/>
      <Cube currency="BRL" rate="2.3942"/>
      <Cube currency="CAD" rate="1.3042"/>
      <Cube currency="CNY" rate="8.2398"/>
      <Cube currency="HKD" rate="10.1478"/>
      <Cube currency="IDR" rate="11945.92"/>
      <Cube currency="ILS" rate="4.8967"/>
      <Cube currency="INR" rate="66.8750"/>
      <Cube currency="KRW" rate="1479.25"/>
      <Cube currency="MXN" rate="16.8244"/>
      <Cube currency="MYR" rate="4.0106"/>
      <Cube currency="NZD" rate="1.6026"/>
      <Cube currency="PHP" rate="55.897"/>
      <Cube currency="SGD" rate="1.6476"/>
      <Cube currency="THB" rate="40.511"/>
      <Cube currency="ZAR" rate="10.2687"/>
    </Cube>
  </Cube>
</gesmes:Envelope> 
```

非常感谢任何想法或帮助 mh

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T01:39:24.663

这应该适合你

**编辑;** 我不知道这是不是你想要的。在你的下创建全局变量`public partial class MainPage`

```
double usd,gbp, *etc*; 
```

然后，您可以使用 for each 循环遍历 var 多维数据集中的结果，为每种货币设置一个案例并将其分配给全局变量。下面的示例

```
void myClient_DownloadStringCompleted(object sender, DownloadStringCompletedEventArgs e)
    {
       if (e.Error == null)
        {

            XElement currencyElements = XElement.Parse(e.Result);

            XNamespace ns = "http://www.ecb.int/vocabulary/2002-08-01/eurofxref";

            var rates= currencyElements.Descendants(ns + "Cube")
               .Where(x => x.Attribute("currency") != null)
               .Select(x => new ClassRates
               {

                   curName = x.Attribute("currency").Value,
                   curRate = Convert.ToDouble(x.Attribute("rate").Value)

               });

            foreach (var result in rates)
            {

                switch (result.curName)
                {
                    case "USD":
                        usd = result.curRate;

                        break;

                    case "GBP":
                        gbp = result.curRate;
                        break;

                    default:
                        break;

                }
                textBlock1.Text = usd.ToString();//displaying on screen
            }

        }
        else
        {
            textBlock1.Text = e.Error.ToString();
        }

public class ClassRates
{
    public String curName { get; set; }
    public Double curRate { get; set; }
} 
```

xml应该是

```
 <!--ContentPanel - place additional content here-->
    <Grid x:Name="ContentPanel" Grid.Row="1" Margin="12,0,12,0">
        <TextBlock Height="30" HorizontalAlignment="Left" Margin="344,6,0,0" Name="textBlock1" Text="TextBlock" VerticalAlignment="Top" />
        <ListBox ItemsSource="{Binding ClassRates}"  Foreground="Yellow"  Height="478" HorizontalAlignment="Center" Margin="2,28,-13,0" Name="listBox1" VerticalAlignment="Top" Width="431"  TabIndex="10">
            <ListBox.ItemTemplate>
                <DataTemplate>
                    <Grid>
                        <TextBlock Margin="0,0,0,0" FontSize="26" HorizontalAlignment="Left" Name="tbl1" Text="{Binding curName}" VerticalAlignment="Top" />
                        <TextBlock Margin="70,0,0,0" FontSize="26" HorizontalAlignment="Left" Name="tbl2" Text="{Binding curRate}" VerticalAlignment="Top" />

                    </Grid>
                </DataTemplate>

            </ListBox.ItemTemplate>
        </ListBox>
    </Grid> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T17:54:11.763

您可能会遇到命名空间问题和我认为的“可怕定义的 XML”问题的组合。XML 具有称为“Cube”的三层节点，这使得解析变得困难。

我在下面给你的代码并不意味着是生产代码。相反，我将其呈现给您，以便您可以看到需要解析的不同元素。

```
XDocument doc = XDocument.Load(@"c:\temp\xmlfile1.xml");

XNamespace ns = XNamespace.Get("http://www.gesmes.org/xml/2002-08-01");
XNamespace masterNs = XNamespace.Get("http://www.ecb.int/vocabulary/2002-08-01/eurofxref");

var envelope = doc.Element(ns.GetName("Envelope"));

var cubeHolder = envelope.Element(masterNs.GetName("Cube"));

var cubes = cubeHolder.Elements(masterNs.GetName("Cube"));

cubes.ToList().ForEach(cube=>
{

    var cubeCurrencies = cube.Descendants(masterNs.GetName("Cube"));

    cubeCurrencies.ToList().ForEach(currency =>
    {

        var country = currency.Attribute("currency").Value;
        var rate = currency.Attribute("rate").Value;

        System.Console.WriteLine("Country: {0}, rate: {1}", country, rate);
    });

}); 
```

顺便说一句，我发现对解决这些问题非常有帮助的工具之一是[LinqPad](http://www.linqpad.com)。当你穿过它们时能够倾倒结构的各个部分是非常有帮助的。

*---编辑：根据要求，这里是简化代码---*

```
Dictionary<string, decimal> rates = new Dictionary<string, decimal>();

XNamespace ns = XNamespace.Get("http://www.gesmes.org/xml/2002-08-01");
XNamespace masterNs = XNamespace.Get("http://www.ecb.int/vocabulary/2002-08-01/eurofxref");
doc.Element(ns.GetName("Envelope"))
   .Element(masterNs.GetName("Cube"))
   .Elements(masterNs.GetName("Cube"))
   .ToList().ForEach(cube=>
    {

        var cubeCurrencies = cube.Descendants(masterNs.GetName("Cube"));

        cubeCurrencies.ToList().ForEach(currency =>
        {
            var country = currency.Attribute("currency").Value;
            var rate = currency.Attribute("rate").Value;

            rates.Add(country,decimal.Parse(rate));
        });

    }); 
```

# html - xcode - 从 html 代码中提取文本

> ID：10064122
> 
> 赞同：0
> 
> 时间：2012-04-08T15:50:17.923
> 
> 标签：html, objective-c, xcode

我正在开发一个将 SharePoint 列表中的数据读取到数组中的应用程序。我正在将这些数据作为文本字段显示在屏幕上。但是，其中一个导入的数据字段是用 html 标记代码格式化的，例如

`&lt;div class=&quot;ExternalClass7E8EC81DFF944C7BB81DA896086ABDFF&quot;&gt;&lt;p&gt; &lt;/p&gt;&#13;&#10;&lt;div&gt;&lt;span style=&quot;font-size:12pt&quot;&gt;&lt;font face=&quot;Calibri&quot;&gt;Project Completion Date (A05-A07) &lt;span&gt;  &lt;/span&gt;&lt;span&gt;  &lt;/span&gt;15&lt;sup&gt;th&lt;/sup&gt; May 2012&lt;/font&gt;&lt;/span&gt;&lt;/div&gt;&#13;&#10;​ &lt;p&gt; &lt;/p&gt;&lt;/div&gt;`

有谁知道我该如何从中提取文本内容？或者，也许我应该考虑将这些数据显示为屏幕上的网页？如果是这样，有人可以指出我正确的方向吗？

非常感谢您的帮助...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T16:27:28.143

发布的 HTML 使用“实体”代码进行编码。因此，第一个任务是解码这些内容以返回实际的 HTML。你可以使用`CFXMLCreateStringByUnescapingEntities()`它。

您可以使用 NSXMLDocumentTidyHTML 选项从结果中创建一个 NSXMLDocument。你可以请求`-stringValue`那个来获取纯文本。

或者，您可以使用`-initWithHTML:documentAttributes:`.

# html - 嵌套的垂直和水平列表？

> ID：10064125
> 
> 赞同：0
> 
> 时间：2012-04-08T15:51:02.800
> 
> 标签：html, css, nested-lists

我正在尝试一个 html/css 实验，其中所有内容和所有格式都是通过未格式化的列表 (list-style-type:none) 完成的。我想要做的是能够（在任何程度上）将垂直列表嵌入到水平列表中，反之亦然。到目前为止，我可以在垂直列表中嵌入水平列表 (li ... display:inline;) 并且它可以工作，但我似乎无法在水平列表中将垂直列表显示为真正垂直的。

到目前为止，这是我的 CSS 代码：

```
* { margin:0; padding:0; }
body {  margin: 0px;  color:#333; }
ul.mainlist {  list-style-type:none;  margin: 0px; }
.mainlist li {  margin:0px; padding:0px;  }
ul.horizontallist {  list-style-type:none; margin: 0px;  padding:0px; }
.horizontallist li { margin:0px; padding:0px; display: inline-block; }
ul.secondlist { list-style-type:none; margin: 0px; padding:0px; }
.secondlist li { margin:0px; padding:0px;} 
```

还有我的html：

```
<body>
    <ul class="mainlist">
      <li>
        <ul class="horizontallist">
          <li>
            <ul class="secondlist">
              <li>First in second vertical list.</li>
              <li>Second in second vertical list.</li>
            </ul>
          </li>
          <li>the snow in Alaska.</li>
          <li>the rain in Spain.</li>
        </ul>
      </li>
      <li>Part of Mainlist</li>
    </ul>
  </body> 
```

到目前为止，“secondlist”并未表现为水平内的垂直列表。有任何想法吗？基本上，我希望将我的大部分网页设计作为列表列表的列表，以便我可以开始考虑使用 DSL 来处理它。我知道已经有很多 DSL 用于 html/css 标记，但我想控制 css 方面的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T15:59:23.440

我会说一个`display:block`会工作

```
.secondlist li { margin:0px; padding:0px; display:block;} 
```

还有一件事，因为您在通用选择器中将边距和内边距设置为 0px，(*) 没有必要在任何其他地方执行此操作，除非您想要不同的边距/内边距。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-19T21:27:42.320

我不确定这是否是你的意思。

```
<!DOCTYPE HTML>
<html>
<head>
<meta charset="utf-8">
<title>Untitled Document</title>
<style>
* {margin:0;padding:0;}
body {color:#333;}
ul.mainlist, ul.mainlist ul {list-style-type:none;}
ul.mainlist li, ul.horizontallist {display:inline-block;vertical-align:top}
ul.secondlist li {display:block}
</style>
</head>

<body>
<body>
<ul class="mainlist">
        <li>
                <ul class="horizontallist">
                        <li>
                                <ul class="secondlist">
                                        <li>First in second vertical list.</li>
                                        <li>Second in second vertical list.</li>
                                        <li>Third in second vertical list.</li>
                                </ul>
                        </li>
                        <li>the snow in Alaska.</li>
                        <li>the rain in Spain.</li>
                </ul>
        </li>
        <li>Part of Mainlist</li>
</ul>
</body>
</html> 
```

# wordpress - 如何允许“贡献者”在 wordpress 中仅上传精选图片

> ID：10064126
> 
> 赞同：1
> 
> 时间：2012-04-08T15:51:14.140
> 
> 标签：wordpress

我的 wordpress 网站出现问题。在我的网站中，我阻止/禁止“贡献者”上传媒体文件。但我希望他们只上传特色图片。那么在这种情况下有什么诀窍？有代码吗？？或任何插件？我搜索了很多，但没有找到与它相关的东西。我非常需要那个。请帮我。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T09:43:43.393

将此代码添加到您当前主题的functions.php中

```
if ( current_user_can('contributor') && !current_user_can('upload_files') )
add_action('admin_init', 'allow_contributor_uploads');
function allow_contributor_uploads() {
$contributor = get_role('contributor');
$contributor->add_cap('upload_files');
} 
```

# iphone - iPad本地图像上的TTPhotoViewController崩溃

> ID：10064127
> 
> 赞同：0
> 
> 时间：2012-04-08T15:51:27.677
> 
> 标签：iphone, cocoa, ipad, three20

我很想弄清楚这个问题以及如何解决它。基本上我有一个 iPad 应用程序，我有时使用 TTThumbsViewController，有时使用 TTPhotoViewController，由 TTLauncherView 提供午餐。一切正常，我必须找出一些内存问题，但这是另一个故事。问题是当我使用 TTThumbsViewController 时一切正常，当我在模拟器上使用 TTPhotoViewController 时，在设备崩溃时效果很好。如果我使用示例 TTCatalog 中的代码，那么如果它们是本地崩溃，则从 Internet 获取的图像可以正常工作。我还看到底部导航箭头起作用的奇怪行为，但是当我到达开头或结尾时，我希望其中一个变成灰色，但它们仍然处于启用状态。我从示例 TTCalog 复制了确切的文件，但没有幸运。这里的代码：导入

```
 @interface PhotoBrowseViewController : TTPhotoViewController { NSMutableArray* data; NSArray    *parameter; }

@property (nonatomic, retain) NSArray parameter; @property (nonatomic, retain) NSMutableArray data;

@end;
import "PhotoBrowseViewController.h"
import "MockPhotoSource.h"
import "Utils.h"

@implementation PhotoBrowseViewController

@synthesize data,parameter;

(id)initWithData:(NSString*)level { if (self = [super init]) {
parameter = [level componentsSeparatedByString:@"-"];
data=[[NSMutableArray alloc] initWithArray:[Utils getPhotosBrowse:[[parameter objectAtIndex:0] integerValue]  andArray:nil]];

} return self; }

(void)viewDidLoad { self.photoSource = [[[MockPhotoSource alloc] initWithType:MockPhotoSourceNormal //initWithType:MockPhotoSourceDelayed // initWithType:MockPhotoSourceLoadError //initWithType:MockPhotoSourceDelayed|MockPhotoSourceLoadError title:@"test" photos:[Utils getTestPhotos]

photos2:nil ] autorelease]; 
```

}

```
(void)viewWillAppear:(BOOL)animated { [super viewWillAppear:animated]; if(parameter!=nil ) [_scrollView setCenterPageIndex:[[parameter objectAtIndex:1] integerValue]]; 
```

}

```
(void)updateChrome { self.navigationItem.rightBarButtonItem = nil; }

(void) dealloc { [super dealloc]; }

@end 
```

这里的功能：

```
+(NSArray *)getTestPhotos {
return
[NSArray arrayWithObjects:
 [[[MockPhoto alloc]
   initWithURL:@"documents://f_0000000029.jpg"
   smallURL:@"documents://thumbs/f_0000000029.jpg"
   size:CGSizeMake(0, 0)] autorelease],

 [[[MockPhoto alloc]
  initWithURL:@"documents://f_2.jpg"
  smallURL:@"documents://thumbs/f_2.jpg"
  size:CGSizeMake(0, 0)] autorelease],

 [[[MockPhoto alloc]
  initWithURL:@"documents://f_0000000003.jpg"
 smallURL:@"documents://thumbs/f_0000000003.jpg"
 size:CGSizeMake(0, 0)] autorelease],

 [[[MockPhoto alloc]
  initWithURL:@"documents://f_0000000004.jpg"
  smallURL:@"documents://thumbs/f_0000000004.jpg"
  size:CGSizeMake(0, 0)] autorelease],

     nil];

} 
```

我正在使用 iOS 5 和 xcode 4.3。三个库 1.0.11。我注意到这种情况只发生在 jpg 像 2Mb 这样大的情况下。我仍在调查，但对我来说似乎很奇怪。

谁能帮我？任何好的建议将不胜感激。

十分感谢

尼贝

EDIT2：我发现问题不在于文件的尺寸，而在于图像的分辨率，实际上它们大约是 5616 × 3744，这对我的目的来说太高了。我在一些大照片中仍然有些崩溃，有什么想法可以处理大照片吗？

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T07:51:48.027

读这个

[https://groups.google.com/forum/?fromgroups=#!topic/three20/AgD6iJmI-P0](https://groups.google.com/forum/?fromgroups=#!topic/three20/AgD6iJmI-P0)

基本上经验法则是尽可能使用 png 格式。

# php - 智能 JavaScript 上下文菜单

> ID：10064131
> 
> 赞同：0
> 
> 时间：2012-04-08T15:51:49.953
> 
> 标签：php, javascript, html, contextmenu, getelementbyid

我正在创建一个基于桌面的文件共享系统，我需要一种使用上下文菜单来删除文件并与之交互的方法。它需要能够知道点击了什么文件等。

```
 <?php if ($dirs = @opendir($path)) {
            while (($file = readdir($dirs)) !== false) {
                if ($file != "." && $file != "..") {
            ?>
            <div class="icon">
                <a href="<?php echo $path."/".$file?>" >
                    <div class="ico <?php include('includes/php/ext_check.php');?>"></div>
                    <?php echo " ".$file?>
                </a>
                <!--<a href="javascript:void(0);" onClick="deleteOption('<?php echo $path."/".$file?>');">
                    delete
                </a>-->
            </div>
<?php }}
    closedir($dirs);
    }
?> 
```

那是显示文件的代码，注释掉的行是删除文件的代码。我需要能够在上下文菜单中包含该删除行。有什么帮助吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T16:51:02.957

我猜你的意思是：http: [//luke.breuer.com/tutorial/javascript-context-menu-tutorial.htm](http://luke.breuer.com/tutorial/javascript-context-menu-tutorial.htm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T15:59:01.660

我不确定我是否在这里得到了你的意图..

但是让我们说..当用户单击上下文菜单中的某些内容时，您希望显示相应的选项，例如是否可以删除该文件上下文菜单应该显示删除选项，否则不应该..

如果以上是您需要的..您可以将自己的属性添加到您的标签中，例如

```
<div myAttribute="delete|something" ></div> 
```

选择一些唯一的属性名称，当它被点击时，您可以拥有属性值并相应地显示项目..

# nhibernate - 表和视图的相同实体类

> ID：10064133
> 
> 赞同：1
> 
> 时间：2012-04-08T15:51:56.727
> 
> 标签：nhibernate

我需要在 nhibernate 中创建视图，所以在数据库中我有表：SomeTable，并查看 SomeTableView。SomeTableView 与 SomeTable 具有相同的列。我可以以某种方式映射视图，以便可以将相同的实体类与表和视图一起使用吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T20:37:51.690

似乎您可以创建一个继承自该新实体的新实体，`SomeTable`并为该新实体创建一个新映射，而该新实体使用该视图。这至少可以避免您重新创建所有相同的属性。

# mysql - 多条件的mysql查询

> ID：10064134
> 
> 赞同：-3
> 
> 时间：2012-04-08T15:52:04.527
> 
> 标签：mysql, drop-down-menu

我需要使用多个条件进行查询，它显示来自内部搜索引擎的结果，它应该在某些列中查找某些单词，但这些“单词”分为三个类别 WOOD、PLASTIC、ALL MATERIALS。

因此，在我的搜索文本框中，有一个包含类别的下拉菜单，我所做的是：

```
$query = mysql_query("SELECT * FROM data WHERE mat1 OR mat2 OR mat3  LIKE '%$string%' ") or die(mysq_error); 
```

这在没有 DROPDOWN 值的情况下工作正常，但我需要查询中的另一个参数，即下拉菜单中的类别，我试过：

```
$query = mysql_query("SELECT * FROM data WHERE mat1 OR mat2 OR mat2 AND sex = '%$kind%' LIKE '%$string%' ") or die(mysq_error); 
```

$kind 包含下拉框的值，木材，塑料，所有材料。有什么帮助吗？谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T15:58:53.423

我相信你想要做的是：

```
$query = mysql_query("SELECT * FROM data WHERE (mat1 LIKE '%$string%' OR mat2 LIKE '%$string%' OR mat3 LIKE '%$string%') AND sex = '$kind'") or die(mysq_error); 
```

# c - C程序：在编译时知道长度与不知道长度时匹配字符串数组

> ID：10064141
> 
> 赞同：1
> 
> 时间：2012-04-08T15:53:21.420
> 
> 标签：c

我有一个工作的 C 程序，其中字符串数组的长度在编译时是已知的。这是：

```
char array_person_name[3][101];
char person_name[101] = "";
...
strncpy(person_name, "John Smith", strlen("John Smith")+1 );
for(i=0;i<3;i++)
{
    sprintf(array_person_name[i], person_name );
} 
```

当我使用 gdb 检查第一个元素时，它读取（例如“John Smith”+空字符）：

```
(gdb) p array_person_name[0]  
$1 = "John Smith", '\000' <repeats 26 times>, "\003\000\t\000p\005\240 ?", '\000' <repeats 11 times>, "@\337\377\377\377\177\000\000\260\337\377\377\377\177\000\000\001\000\000\000\000\000\000\000\300\332\377\377\377\177\000\000\000\235\230Z5\000\000\000\260\337\377\377\377" 
```

数组中的所有其他元素看起来都相似。现在我需要修改这个程序，以便在运行时不知道数组大小时它可以工作，其中结果需要与上面从 gdb 打印的结果完全相同（除了 null 之后的字符可能不同）。这是我的代码：

```
char **array_person_name;
char person_name[101] = "";
...
strncpy(person_name, "John Smith", strlen("John Smith")+1 );
array_person_name = malloc(3 * sizeof(char*)); /* allocate memory for row pointers */
for(i=0;i<3;i++)
{
  array_person_name[i] = malloc(101 * sizeof(char)); /* allocate memory for columns */
  sprintf(array_person_name[i], person_name );
} 
```

然后当我使用 gdb 检查第一个元素时，它显示：

```
(gdb) p array_person_name[0]
$1 = 0x6cff30 "John Smith" 
```

我不确定这两个程序的 gdb 输出之间的区别是什么，但是无论有什么区别，对于接受`array_person_email`作为输入的共享库来说，对于第一个代码块正确执行而对于第二个代码块执行不正确就足够了代码块。有没有办法修改我的第二个代码块，使其`array_person_email`看起来与第一个代码块的结果相同？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T16:02:55.203

在第一个示例中，调试器打印出数组的所有字符，在第二个示例中，调试器没有大小，因此仅打印以零结尾的字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T16:03:01.957

GDB 中的输出看起来不同的原因是因为在第一种情况下，它`array_person_name[0]`是一个在编译时知道其大小的数组，因此 GDB 努力显示它所知道的关于该数组的所有内容（即所有 101 个元素）。如果你这样做`p (char *)array_person_name[0]`，你只会得到数组的“相关”部分。

如果您的库函数表现出不同的行为，那么要么它已损坏，要么您没有传递它所期望的（即它所期望的不是 a `char **`）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-08T16:04:01.627

array_person_name[i] 在这两种情况下都没有初始化。

第一个版本采用堆栈，其次是堆。也许统计差异会导致不同的行为。但是，您应该在这两种情况下进行初始化

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-08T16:44:46.183

代替

```
p array_person_name[0] 
```

尝试

```
ptype array_person_name[0] 
```

并比较两个变量的类型。

你会注意到它们并不相同。

顺便说一句，我不得不说

```
strncpy(person_name, "John Smith", strlen("John Smith")+1 ); 
```

是一个错误，我认为您的意思是：

```
strncpy(person_name, "John Smith", 101); 
```

# c++ - 使用 Mat::at 迭代图像时崩溃

> ID：10064147
> 
> 赞同：1
> 
> 时间：2012-04-08T15:54:00.027
> 
> 标签：c++, opencv

我是 C++ 接口的新手，对这段代码没有什么想法：

```
//buffer : VideoCapture >> cvtColor >> Canny

for(int i=0;i<buffer.rows;i++) //search for edges
{
    for (int j=0 ;j<buffer.cols;j++)
    {
        Vec3b pixel=buffer.at<Vec3b>(i,j);
    }
} 
```

在调试模式下运行良好，但在发布中的某个时刻（i = 479，j = 448）崩溃。（哦，无法捕获任何异常......当然......）

但

```
Vec3b pixel=buffer.at<Vec3b>(1,1000); 
```

即使我的图像（缓冲区）是 640 * 480，也可以在 elease 中使用。

我想我错过了一些东西。如果您能从中有所了解，我将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-08T16:14:07.173

您正在使用`Vec3b`应该用于 3 通道图像的迭代器。您正在使用单通道图像，要迭代这样的图像，您必须`Vec3b`用`uchar`.

# c++ - 小数点后的数字 QTableView 委托

> ID：10064149
> 
> 赞同：2
> 
> 时间：2012-04-08T15:54:27.677
> 
> 标签：c++, qt, delegates, qtableview

我需要 QTableView 的项目的小数点后指定位数，所以我写了一个简单的委托。

```
class TableItemDelegate : public QStyledItemDelegate
{

   Q_OBJECT

public:

   TableItemDelegate(QObject *parent = 0) : QStyledItemDelegate(parent) {}

   QString displayText(const QVariant & value, const QLocale & locale)
   {
     QString str = QString::number(value.toDouble(), 'f', 8);
     return str;
   }
}; 
```

但它不起作用，调用了构造函数，而不是 displayText() 函数。

```
TableItemDelegate *decDelegate = new TableItemDelegate(tableView);
tableView->setItemDelegate(decDelegate); 
```

我做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-08T20:25:11.830

未调用您的方法，因为您忘记了`const`函数签名末尾的说明符：

```
QString displayText(const QVariant & value, const QLocale & locale ) const 
```

# google-app-engine - 结构化属性访问父级

> ID：10064150
> 
> 赞同：0
> 
> 时间：2012-04-08T15:54:46.800
> 
> 标签：google-app-engine, app-engine-ndb

我有一个具有结构化属性的主要属性。我在结构化属性中定义了一个属性，它需要访问父属性的值。我尝试的语法是`self.key.parent().email`，但这并没有成功。我怎样才能做到这一点？

```
class Individual(ndb.Expando):
    name = ndb.StringProperty()
    email = ndb.StringProperty()

    team_list = ndb.StructuredProperty(IndividualTeam, repeated=True)

class IndividualTeam(ndb.Model):
    team_key = ndb.KeyProperty()
    fundraise_amt = DecimalProperty()

    @property
    def donation_total(self):
        #This is my problem here
        return self.key.parent().email 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T03:49:18.340

个人不是 IndividualTeam 的父级。个人只包括个人团队。您应该使用个人对象访问电子邮件属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T17:11:52.523

您将始终加载包含实体，因此请创建需要知道该包含实体方法的属性的方法。这些方法可以询问结构化属性中的实体。很难看到您要解决的确切问题，因为您的donation_total 似乎不会返回电子邮件。

# sql - 创建表时检查约束返回错误

> ID：10064153
> 
> 赞同：1
> 
> 时间：2012-04-08T15:55:05.380
> 
> 标签：sql, postgresql, create-table

当我创建一些表时非常简单的错误，可能只是我很愚蠢，但我宁愿把它贴在这里并对其进行排序。

我正在使用 Postgresql。

（这张桌子只是众多桌子之一，但它给我带来了问题）

```
CREATE TABLE Ticket
(
    ID      INTEGER NOT NULL PRIMARY KEY,
    Problem VARCHAR(1000),
    Status  VARCHAR(20) NOT NULL DEFAULT 'open', 
    Priority    INTEGER NOT NULL,
    LoggedTime  TIMESTAMP NOT NULL,
    CustomerID  INTEGER NOT NULL,
    ProductID   INTEGER NOT NULL,
    FOREIGN KEY (ProductID) REFERENCES Product(ID),
    FOREIGN KEY (CustomerID) REFERENCES Customer(ID),
    CHECK (status='open' OR 'closed' AND priority =  1 OR 2 OR 3)
); 
```

错误：

> 错误：布尔类型的无效输入语法：“关闭”

另外，如果有人可以给我一个更好的检查方法：

```
CHECK (status='open' OR 'closed' AND priority =  1 OR 2 OR 3) 
```

那将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-08T16:11:47.090

采用

```
CHECK (Status IN ('open','closed') AND Priority IN (1,2,3)) 
```

你也可以使用

```
(Status ='open' OR  Status ='closed') AND
      (Priority =  1 OR Priority =  2 OR Priority =  3) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-10T09:42:51.153

我认为有两个约束会更好：增加粒度意味着您可以向用户提供更有意义的反馈，即他们是否需要修改`Status`值或者`Priority`问题是值？给每个约束一个有意义的名称将有助于“前端”编码器，例如

```
...
CONSTRAINT ticket_status__invalid_value
    CHECK ( Status IN ( 'open' , 'closed' ) ), 
CONSTRAINT ticket_priority__invalid_value 
    CHECK ( Priority IN ( 1 , 2 , 3 ) ), 
... 
```

# java - 在窗口中显示图像的问题

> ID：10064156
> 
> 赞同：2
> 
> 时间：2012-04-08T15:55:27.113
> 
> 标签：java, swing

我需要选择带有文件打开对话框的图像，然后在窗口中显示它。但是当我选择图像时，它不会显示在窗口中。

我创建了使用 jmenubar 和 1 个 jmenuitem 创建窗口的类。当我点击 menuitem JfileChooser 出现然后我选择一些文件。但随后什么也没有发生。我认为问题出在 JFileChooser 的 actionListener 中（ImageFilter 是来自 docs java 的过滤器）

```
public Frame(){
    //create bars and window
    mainframe = new JFrame("Window");
    mainframe.setVisible(true);
    mainframe.setSize(300, 300);
    menubar = new JMenuBar();
    mainer = new JMenu("Menu");
    menubar.add(mainer);
    //create items
    item = new JMenuItem("Open",KeyEvent.VK_T);
    item.setAccelerator(KeyStroke.getKeyStroke(KeyEvent.VK_1, ActionEvent.ALT_MASK));
    item.getAccessibleContext().setAccessibleDescription("open image");
    //action listener
    item.addActionListener(
            new ActionListener() {
                @Override
                public void actionPerformed(ActionEvent e) {
                    //open file dialog
                    choser = new JFileChooser();
                    choser.addChoosableFileFilter(new ImageFilter());
                    final int returnval = choser.showOpenDialog(menubar);
                    //action listener for JFileChooser
                    choser.addActionListener(
                            new ActionListener() {
                                @Override
                                public void actionPerformed(ActionEvent e) {
                                    if (returnval == JFileChooser.APPROVE_OPTION){
                                        fc = choser.getSelectedFile();
                                        try{
                                            Panel panel = new ShowImage(fc.getName());
                                            mainframe.getContentPane().add(panel);
                                        }catch(Exception exc){};
                                    }
                                }
                            }
                    );
                }
            }
    );
    mainer.add(item);
    mainframe.setJMenuBar(menubar);
} 
```

显示图像类

```
class ShowImage extends Panel{
    BufferedImage image;
    public ShowImage(String imagename) throws IOException {
        File input = new File(imagename);
        image = ImageIO.read(input);
    }
    public void paint(Graphics g){
        g.drawImage(image,0,0,image.getWidth(),image.getHeight(),null);
    }
} 
```

PS 另一个问题是在我更改窗口大小之前它什么都不显示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T16:17:57.933

扩展[JPanel](http://docs.oracle.com/javase/6/docs/api/javax/swing/JPanel.html)而不是`Panel`, 并覆盖[paintComponent](http://docs.oracle.com/javase/6/docs/api/javax/swing/JComponent.html#paintComponent%28java.awt.Graphics%29)方法，即：

```
class ShowImage extends JPanel{
    public void paintComponent(Graphics g){
        ...
    }
} 
```

此外，不需要`addActionListener`on `JFileChooser`，只需检查返回值并采取相应措施，即：

```
final int returnval = choser.showOpenDialog(menubar);
if (returnval == JFileChooser.APPROVE_OPTION){
    ...
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-08T16:25:59.237

我很确定这条线会导致问题：

```
Panel panel = new ShowImage(fc.getName()); 
```

getName() 将返回文件的名称。例如，如果您选择一个名为 image.jpg 的 JFileChooser 图像，getName 将返回“image.jpg”。这将使图像仅在您选择的文件存储在项目的根文件夹中时显示。我会更改`getName()`为`getAbsoultePath()`哪个将返回完整的补丁（ei c:\desktop\image.jpg），这很可能是你想要的。

同样正如 Max 指出的那样，您应该覆盖paintComponent 而不是绘制：

```
protected void paintComponent(Graphics g){     
   g.drawImage(image,0,0,image.getWidth(),image.getHeight(),null); 
} 
```

# iphone - 需要UAmodalPanel教程

> ID：10064157
> 
> 赞同：-1
> 
> 时间：2012-04-08T15:55:57.767
> 
> 标签：iphone, ios, xcode, ipad, uiviewcontroller

我在下面的链接中看到了一个非常好的[UAmodalPanel示例代码。](http://code.coneybeare.net/uamodalpanel-an-open-source-modal-panel-alter)但是在我下载代码后，我不知道它是如何工作的。有谁知道并知道是否有任何教程？

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T18:56:04.440

UAModalPanel 很容易理解。如果您不想使用块或委托，只需创建面板实例并调用 -showFromPoint: 如下所示：

```
//create panel instance
UAExampleModalPanel *modalPanel = [[[UAExampleModalPanel alloc] initWithFrame:self.view.bounds title:@"Example"] autorelease];

// Add the panel to our view
[self.view addSubview:modalPanel];

// Show the panel from the center of the screen
[modalPanel showFromPoint:self.view.center]; 
```

# ios5 - 一个 UIDatePicker 错误？

> ID：10064160
> 
> 赞同：0
> 
> 时间：2012-04-08T15:57:03.367
> 
> 标签：ios5, xcode4, uidatepicker

这是我的代码：

```
picker = [[UIDatePicker alloc] initWithFrame:CGRectMake(0,40,0,0)];
picker.datePickerMode = UIDatePickerModeDateAndTime;
picker.minuteInterval = 5;
picker.minimumDate = [NSDate date]; 
```

好的，到这里为止一切正常。（图片：http: [//img29.imageshack.us/img29/8277/snap1r.png](http://img29.imageshack.us/img29/8277/snap1r.png)）

DatePicker 中过去的日期全部显示为灰色。无法选择。分钟间隔为 5。

但是现在当我单击任何已经变灰的行时。DatePicker 的日期返回这一刻的时间。

例如：我在 DatePicker 上点击了“9”（已经过了时间） 现在系统时间是

```
22:27:57 
```

DatePicker 返回的日期：（图片：http: [//img42.imageshack.us/img42/2760/nslog.png](http://img42.imageshack.us/img42/2760/nslog.png)）

```
2012-04-08 22:27 
```

因为我的分钟间隔是5分钟，所以我不希望picker返回不能被5整除的值，这样会导致我的程序崩溃。

这是一个错误吗？或者这只是我的问题？谢谢！

------致g检查员（对不起，我的英语不是很好）

因为 Datepicker 的 minuteInterval 是 5。所以 DatePicker 的日期的返回值只返回可以除以 5 的分钟（等等 0, 5 , 10 , 15 .....）

而且我将属性 minimumDate 设置为 [NSDate date]，这样用户就无法选择过去的日期。

但是现在用户单击过去的行（灰色），DatePicker 的日期返回当时的时间。

所以日期的分钟可以是任何值（0~60），但不是我希望的（0、5、10、15....）

我已经尽力解释了>“<请原谅。

* * *

给督察 g。

感谢您的代码，我突然意识到有一种很好的方法可以解决我的问题。但我不知道为什么，如果我使用你的代码会有一些问题。（我想这是关于时区）

但是我按照你的逻辑，重新写了一段代码，分享给大家：

```
unsigned unitFlags_ = NSYearCalendarUnit | NSMonthCalendarUnit | NSDayCalendarUnit | NSHourCalendarUnit | NSMinuteCalendarUnit;
NSCalendar *gregorian = [[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar];
NSDateComponents *comps_ = [gregorian components:unitFlags_ fromDate:[jRemindPicker date]];
NSInteger remainder = [comps_ minute] % 5;

NSLog(@"%i-%i-%i %i:%i", comps_.year, comps_.month, comps_.day, comps_.hour, comps_.minute);

if ( remainder ) {
   /* My Own code /*
} else {
  /* My Own Code /*
}
[gregorian release]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-08T16:20:52.410

您对选择日期/时间问题的描述有点不清楚，所以也许您可以澄清一下？提供一个简短的截屏视频？

无论如何，听起来您无法选择今天之前的日期，因此您的错误在这一行：

```
picker.minimumDate = [NSDate date]; 
```

您正在将最小可选日期设置为当前日期和时间（因为这就是`[NSDate date]`返回的内容。

删除该行，您应该能够选择您想要的任何日期/时间。

**编辑**
如果问题是您无法选择将来的日期，请尝试设置：

```
picker.maximumDate = [NSDate distantFuture]; 
```

使用您现有的最小值和这个新的最大值，可选择日期的范围将设置在今天和今天之后*很*长一段时间之间的某个地方。

**第二次编辑**
感谢您的澄清！我现在看到了问题。当您收到用户更改日期的回调时，您必须适当地向上或向下取整。然后，您可以在该点使用四舍五入的时间，或者通过手动将选择器日期/时间设置为四舍五入的值`setDate: animated:`

例如：

```
-(IBAction) pickerValueChanged:(id)selector_
{
    UIDatePicker* picker = (UIDatePicker*) selector_;

    // get the minutes from the picker
    NSCalendar* calendar = [NSCalendar currentCalendar];
    NSDateComponents* components = [calendar components:(NSYearCalendarUnit | NSMonthCalendarUnit | NSDayCalendarUnit | NSHourCalendarUnit | NSMinuteCalendarUnit) fromDate:picker.date];
    NSInteger minutes = [components minute];

    // check if the minutes should be rounded
    NSInteger remainder = minutes % 5;
    if(remainder)
    {
        minutes += 5 - remainder;
        [components setMinute:minutes];
        picker.date = [calendar dateFromComponents:components];
    }

    // now picker.date is "safe" to use!
} 
```

# sql - VBA 更新语句 - 查询表达式中缺少运算符

> ID：10064163
> 
> 赞同：0
> 
> 时间：2012-04-08T15:57:21.617
> 
> 标签：sql, ms-access, vba, syntax-error

首先，我知道这个问题已经在这个论坛上提出过，但是之前的每个问题都与我的情况不同，并且解决方案不起作用。我的逗号都在那里，我正在使用一个非常简单的查询。继续前进：

我在 Access 中使用链接表，该表链接到 SQL Server 数据库。除此查询外，一切正常。如果我直接在 SQL Server 中运行文本，它运行良好。因此，查询的语法必须没问题。

这是我正在运行的内容：

```
CurrentDb.Execute "Update dbo_TS_Activity Set [Remarks] = ''Updated Remarks''   Where [id] = 1124 AND [Emp_Name] = ''CONFUSED''  AND [Approved] = 0" 
```

**我在查询表达式“更新备注”中收到运行时错误“3075”语法错误（缺少运算符）**

我试过的：

*   单引号
*   双引号
*   双单（两个撇号）引号
*   没有引号
*   打开链接表并手动编辑它（有效）
*   哭（开玩笑）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T18:27:47.767

这应该可以正常工作，AFAICT，根据您在上面的评论中发布的内容。

```
CurrentDb.Execute "Update dbo_TS_Activity Set [Remarks] = 'Updated Remarks'   Where [id] = 1124 AND [Emp_Name] = 'CONFUSED'  AND [Approved] = 0" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T02:42:50.123

2 事情终于解决了...我在查询设计器中运行了更新，它给了我在 WHERE 语句周围的这种奇怪的括号语法，所以它看起来像：

```
Where (((dbo_vw_TS_Activity.[id]) = 1124)) 
```

最后，它需要变量的双双引号，例如：

```
SET [Remarks] = ""The updated remarks..."" 
```

突然，很开心。因此，我也是。

# facebook - 将我的网站转换为 Facebook 图表对象

> ID：10064164
> 
> 赞同：0
> 
> 时间：2012-04-08T15:57:27.823
> 
> 标签：facebook, web, facebook-like, facebook-opengraph

我添加了 Open Graph Tags 以将我的网页转换为 Facebook 页面，这样如果我喜欢我的网页，它应该会出现在我的 Facebook 个人资料的 Likes & Interests 中。但它不起作用。

以下是我包括的开放图形标签：

```
<meta property="og:title" content="Proto"></meta>
<meta property="og:url" content="<?=SITE_URL?>"></meta>
<meta property="og:site_name" content="Proto"></meta>
<meta property="og:description" content="Lets you create prototypes for web apps." /> 
<meta property="og:image" content="<?=SITE_URL?>images/proto.jpg" />
<meta property="og:type" content="website"></meta>
<meta property="fb:app_id" content="284826761590524"/> 
```

我在我的网站上添加了 Facebook Like 按钮。当我点击喜欢时，它确实说哈里斯喜欢这个，但是这个网站没有出现在我的喜欢和兴趣部分。为什么 ？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T17:13:04.047

转换为时间轴视图后，我确实在“点赞”部分找到了“点赞”。

# php - 在 wordpress 中突出显示当前类别

> ID：10064165
> 
> 赞同：0
> 
> 时间：2012-04-08T15:57:44.113
> 
> 标签：php, wordpress, categories

我对如何突出显示我所在的类别感兴趣 - 使用模板中的“当前”类。问题是没有从数据库 WordPress 中检索到类别列表（据我所知，它们被存储在同一个地方？），也就是说 - 直接从 HTML... 如何制作以下代码：

代码：

```
<ul>
    <li class="blabla">
        <a>1</a>
    </li>
    <li class="blabla">
        <a>2</a>
    </li>
    <li class="blabla">
        <a>3</a>
    </li>
</ul> 
```

代码是动态的，例如当我进入“2”类别时，“li”将被添加到“current”类中：

代码：

```
<ul>
    <li class="blabla">
        <a>1</a>
    </li>
    <li class="blabla current">
        <a>2</a>
    </li>
    <li class="blabla">
        <a>3</a>
    </li>
</ul> 
```

我试图阅读法典，但我有两个问题 - 我不擅长 php，最重要的是很难用英语阅读

我真诚地为我问“那个”问题的蹩脚英语道歉

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T16:43:25.203

我不确定我是否理解你的问题，但根据你所说的，你可以使用 css。

例子

```
/* This will highlight your menu item gray if it has current in its class attribute*/
.current {
    background:#555;
} 
```

如果您只想要一个类别菜单，您可以使用 Wordpress 类别小部件。它创建一个包含所有类别列表的菜单。如果单击类别，它将有一个 current-cat 类。这只发生在您处于类别过滤器列表视图中时，因此如果您单击具有该类别的帖子，它不会显示“当前猫”。

如果您想要更专业的东西，那么它仍然是可能的。告诉我类别小部件是否不适合您。

* * *

如果您不想使用小部件，这是在 php 中执行此操作的方法。它基本上做同样的事情，但你有更多的自由，你想把它放在哪里。

这是参考页面：[http ://codex.wordpress.org/Template_Tags/wp_list_categories](http://codex.wordpress.org/Template_Tags/wp_list_categories)

基本上你所需要的就是那个功能。只需将这段代码放在您希望类别出现的位置：

```
<?php echo wp_list_categories() ?> 
```

这应该创建所有类别的基本 html 列表。如果您在类别存档视图中，它还将设置 current-cat 类。

如果要覆盖上面的当前类别行为，还可以强制菜单根据您选择的类别的 id 选择当前类别。所以在这个例子中，它将`current-cat`类添加到 ID 为 3 的类别中。

```
<?php echo wp_list_categories(array('current_category' => 3)) ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-06-02T17:56:07.607

```
/* this is working #747474:gray*/

.current {
    background:#747474;
} 
```

# antlr - 从 ANTLR 语法生成 AST：结构中的数组

> ID：10064169
> 
> 赞同：1
> 
> 时间：2012-04-08T15:58:09.807
> 
> 标签：antlr, interpreter, abstract-syntax-tree

我正在尝试从 ANTLR 语法解析和生成 AST。当我尝试解析结构内部的数组和结构数组时，我发现了一些问题。

这是一个声明示例：

```
TYPE MY_ARRAY : 
     ARRAY [ 0..2 ] OF INT;
END_TYPE

TYPE est :
     STRUCT
          c1 : INT;
          c : MY_ARRAY;
     END_STRUCT;
END_TYPE

TYPE MSA : 
    ARRAY [ 0..2 ] OF est; 
END_TYPE

VAR 
      MA : MY_ARRAY;
      STR : est;
      STR2 : MSA;
END_VAR 
```

我对声明没有任何问题。我无法编写语法来解析表达式，如下所示：

```
STR.c[1]
STR2[2].c[1] 
```

下一个代码显示了我的 ANTLR 语法的摘录：

```
operand
    : variable_simbolic
    | DIRECT_VAR<Localization>
    | CTE_INT<ConstantINT>
    | CTE_BOOL<ConstantBOOL>
    | CTE_REAL<ConstantREAL>
    ;

variable_simbolic
    : (ID -> ID<Identificador>) ( (('[' operand (',' operand)* ']') -> ^(ARRAY_ACCESS<ArrayAccess> ID<Identificador> operand+))
                    | (('.' operand )   -> ^(FIELD_ACCESS<FieldAccess> ID<Identificador> operand))
                    | (('#' operand )   -> ^(ENUM_ACCESS<EnumAccess> ID<Identificador> operand))
                    )?
    ; 
```

该语法允许我解析像`STR.c1`or之类的表达式`MA[1]`，但它不解析像`STR.c[1]`. 如果定义了数组访问，则它必须是父表达式。我希望下一张图有帮助：

![AST 输出](../Images/018f27e6c158f5a291c31e5ad4df6753.png)

有什么办法可以修改我的语法以接受那种表达方式吗？先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T19:16:46.650

可能是这样的：

```
operand
 : variable_simbolic
 | CTE_INT
 ;

variable_simbolic
 : (ID -> ID) (variable_simbolic_tail -> ^(ID variable_simbolic_tail))?
 ;

variable_simbolic_tail
 : array variable_simbolic_tail?  -> ^(ARRAY_ACCESS array variable_simbolic_tail?)
 | '.' ID variable_simbolic_tail? -> ^(FIELD_ACCESS ID variable_simbolic_tail?)
 | '#' ID variable_simbolic_tail? -> ^(ENUM_ACCESS ID variable_simbolic_tail?)
 ;

array
 : '[' operand (',' operand)* ']' -> ^(ARRAY_OPS operand+)
 ; 
```

?

## 编辑

我提出了一种稍微不同的方式。与其尝试构建具有许多不同级别的复杂 AST，不如简单地创建一个`LOOKUP`AST 并将*尾部*作为子节点添加到该 ast。

一个小例子语法：

```
grammar T;  

options {
  output=AST;
}

tokens {
  LOOKUP;
  ARRAY_ACCESS;
  FIELD_ACCESS;
  ENUM_ACCESS;
}

parse
 : operand EOF
 ;

operand
 : variable_simbolic
 | CTE_INT
 ;

variable_simbolic
 : ID variable_simbolic_tail* -> ^(LOOKUP ID variable_simbolic_tail*)
 ;

variable_simbolic_tail
 : '[' operand (',' operand)* ']' -> ^(ARRAY_ACCESS operand+)
 | '.' ID                         -> ^(FIELD_ACCESS ID)
 | '#' ID                         -> ^(ENUM_ACCESS ID)
 ;

CTE_INT : '0'..'9'+;
ID      : ('a'..'z' | 'A'..'Z') ('a'..'z' | 'A'..'Z'  |'0'..'9')*;
SPACE   : (' ' | '\t' | '\r' | '\n')+ {skip();}; 
```

如果您解析输入：`STR2[2].c[1]`，您将获得以下 AST：

![在此处输入图像描述](../Images/d15832070020d73bdaedd17db7abb90c.png)

孩子们从左到右走很容易评估。

# html - 如何从公共 CSS 样式中隔离 div？

> ID：10064172
> 
> 赞同：71
> 
> 时间：2012-04-08T15:58:36.707
> 
> 标签：html, css

我有一些代码，例如在 html 中

```
<html>
 <body>
  <img src='an image source'/>
  <h1>Hi it's test</h1>
  <div id='mydiv'>
    <img src='an image source'/>
    <h1>Hi it's test</h1>
  </div>
 </body>
</html> 
```

如果我使用以下 CSS 代码对其进行样式设置：

```
img{
   width:100px;
   height:100px;
}
h1{
   font-size:26px;
   color:red;
} 
```

问题是：如何防止和隔离 mydiv div 标签内的标签与公共标签样式的样式？

* * *

## 回答 #1

> 赞同：123
> 
> 时间：2013-05-29T16:08:54.153

[CSS Cascading and Inheritance Level 3](http://www.w3.org/TR/css3-cascade/)引入[了`all`速记属性](http://www.w3.org/TR/css3-cascade/#all-shorthand)和[关键字](http://www.w3.org/TR/css3-cascade/#inherit-initial)[，`unset`](http://www.w3.org/TR/css3-cascade/#inherit-initial)它们一起让您可以方便地实现这一点。

> 例如，如果作者`all: initial`在一个元素上指定，它将阻止所有继承并重置所有属性，就好像在级联的作者、用户或用户代理级别中没有出现任何规则一样。
> 
> 这对于包含在页面中的“小部件”的根元素很有用，它不希望继承外部页面的样式。但是请注意，应用于该元素的任何“默认”样式（例如，`display: block`来自块元素的 UA 样式表，例如`<div>`）也将被吹走。

您需要申请`all: initial`您的 div`all: unset`及其后代：

```
#mydiv {
  all: initial; /* blocking inheritance for all properties */
}
#mydiv * {
  all: unset; /* allowing inheritance within #mydiv */
} 
```

您可能希望在您的 div 上使用一个类而不是一个 id，这样您编写的任何为其后代设置样式的规则都不必匹配或超过此规则中使用的高特异性。

为了真正安全，您可能还希望阻止潜在伪元素后代的样式：

```
#mydiv::before,
#mydiv::after,
#mydiv *::before,
#mydiv *::after {
  all: unset;
} 
```

或者，对于更广泛的浏览器支持，您可以手动尝试`all`通过设置所有已知的 CSS 属性来执行此操作（不要忘记前缀版本）：

```
#mydiv {
  /*
   * using initial for all properties
   * to totally block inheritance
   */
  align-content: initial;
  align-items: initial;
  align-self: initial;
  alignment-baseline: initial;
  animation: initial;
  backface-visibility: initial;
  background: initial;
  ...
}

#mydiv::before,
#mydiv::after,
#mydiv *,
#mydiv *::before,
#mydiv *::after {
  /*
   * using inherit for normally heritable properties,
   * and initial for the others, as unset does
   */
  align-content: initial;
  align-items: initial;
  align-self: initial;
  ...
  color: inherit;
  ...
} 
```

您可以通过以下问题链接鼓励浏览器支持`all`速记属性并跟踪其采用情况：

*   ☑[铬](https://code.google.com/p/chromium/issues/detail?id=172051)37+
*   ☑[火狐](https://bugzilla.mozilla.org/show_bug.cgi?id=842329)27+
*   ☑ [Webkit](https://bugs.webkit.org/show_bug.cgi?id=116966) (Safari 9.1+)
*   ☐ [Internet Explorer](https://connect.microsoft.com/IE/feedback/details/788865/css3-cascade-add-support-for-all-shorthand-property)
*   ☑[边缘](https://caniuse.com/#feat=css-all)79+
*   ☑ 歌剧 24+

`all`速记属性的最新浏览器支持信息可[在此处](http://caniuse.com/#feat=css-all)获得。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2018-03-15T23:16:21.200

老问题，但自从接受答案以来，情况发生了一些变化。现在有一个名为 CSSWG 推荐的关键字[`revert`](https://developer.mozilla.org/en-US/docs/Web/CSS/revert)，它更适合[`initial`](https://developer.mozilla.org/en-US/docs/Web/CSS/initial)并[`unset`](https://developer.mozilla.org/en-US/docs/Web/CSS/unset)解决这个问题，因为它将属性重置为它们在[用户代理样式表](https://trac.webkit.org/browser/trunk/Source/WebCore/css/html.css)中定义的内容，而不是它们的[初始](https://developer.mozilla.org/en-US/docs/Web/CSS/initial_value)值（不考虑它们用于哪个元素）。因此，例如，使用`revert`，`div`内部`#mydiv`将`block`按照我们的预期设置其显示，而不是`inline`（的初始值`display`）。

你必须这样做：

```
#mydiv,
#mydiv::before,
#mydiv::after,
#mydiv *
#mydiv *::before,
#mydiv *::after {
  all: revert;
} 
```

在撰写本文时，[`revert`Edge、Firefox、Chrome 和 Safari 支持](https://caniuse.com/#feat=css-revert-value)，但不支持 IE 或 Opera。

关于接受的答案，还有其他一些事情需要考虑。如果你想在里面设置任何样式`#mydiv`，你需要使用一个至少与你用来取消设置或恢复所有内容的选择器一样具体的选择器，否则它将被该规则覆盖，即使它在它之后CSS。

所以你需要做这样的事情（注意`#mydiv`提高规则的[特异性](https://developer.mozilla.org/en-US/docs/Web/CSS/Specificity)）：

```
#mydiv p {
  margin-top: 20px;
}

#mydiv .bg-black {
  background-color: black;
}

// etc. 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-04-08T16:07:48.257

从技术上讲，你不能，这就是 CSS 的工作方式。如果在样式表中为 div 标签定义了任何样式，它将应用于所有 div 元素。

您可以尝试的几件事是**不要使用标签名称设置样式，** *而是给出类名称*并将样式声明给类。这样您就可以确定所有样式的去向。

或者。如果您希望某些特定的 Div 标签没有样式而其他 Div 有。你可以随时重置它，给它一些不同的类名或 id 并重置样式声明

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2019-08-17T22:12:02.033

如果 iframe 不会使其他业务逻辑复杂化，它也是一个不错的样式隔离解决方案。此外，这可以在纯 JavaScript 中完成，也可以在旧版浏览器中使用。

```
const HTMLToIsolate = `...` // get your div tag as HTML string
const parentContainerRef = document.body; // or something else
const newIframe = document.createElement('iframe');
// set height & width to 100% and remove borders for newIframe

parentContainerRef.appendChild(newIframe)
newIframe.contentWindow.document.open('text/html', 'replace');
newIframe.contentWindow.document.write(HTMLToIsolate);
newIframe.contentWindow.document.close();

// bonus to remove scroll bars by setting proper iframe's height
newIframe.addEventListener('load', function onIFrameLoad(e) {
    const iframeBody = this.contentDocument.querySelector("body");
    this.style.height = `${iframeBody.scrollHeight}px`;
}); 
```

当我必须将一个复杂的 HTML 文件嵌入到我的网页中时，这对我来说非常有效，没有[MixedContent](https://kb.iu.edu/d/bdny)警告并且没有覆盖嵌入 HTML 的父 HTML 样式。感谢[https://benfrain.com/sandbox-local-htmlcss-code-snippets-inside-iframe-style-guidespattern-libraries/](https://benfrain.com/sandbox-local-htmlcss-code-snippets-inside-iframe-style-guidespattern-libraries/)这个好主意！

尽管`#mydiv * { all: unset }`CSS 技巧，正如在[此处](https://stackoverflow.com/a/16818917/1585523)接受的解决方案中所建议的那样有效，但它最终成为一个复杂的浏览器操作，因为我的页面上有许多 DOM 节点。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-04-08T17:59:57.157

可能有用的一件事是**CSS 直接子选择器**，它在包括 IE7+ 在内的所有浏览器中都可用。这使您可以应用不会级联到子级的样式。例如，在您的代码中，您可以使用以下 CSS：

```
body > img {
  width:100px;
  height:100px;
}
body > h1 {
  font-size:26px;
  color:red;
} 
```

并且该 CSS 仅适用于直接在 BODY 元素上的元素。

# php - 使用 DOM 文档将数据附加到 xml 文件

> ID：10064173
> 
> 赞同：0
> 
> 时间：2012-04-08T15:58:44.867
> 
> 标签：php, xml

我正在尝试将新数据附加到现有的 xml 文件中。这是我到目前为止所拥有的：

```
 $doc = new DOMDocument();
 $doc->formatOutput = true;

 $doc->loadXml('library.xml');

 $path = new DOMXPath($doc);

 $b=$doc->createElement('book');

 $ISBN = $doc->createElement( 'isbn' );
 $ISBN->appendChild(
  $doc->createTextNode( $_GET['isbn'] )
  );
  $b->appendChild( $ISBN );

  $edition = $doc->createElement( 'edition' );
  $edition->appendChild(
  $doc->createTextNode( $_GET['ed'] )
      );
  $b->appendChild( $edition );*/

  $doc->save("library.xml"); 
```

我在如何获取要插入数据的位置时遇到问题。我看到一些使用 query() 或这个：

```
$query = sprintf('//record[./title[contains(., "%s")]]', $searchString); 
```

但我想知道是否有人可以解释路径是如何编写的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T16:05:19.147

//记录[./title[包含(., "%s")]]

是一个 xpath 查询，它意味着在 xml 中找到包含搜索字符串的标题属性的记录
节点

您需要获取对所需节点的引用，然后将其 appendChild。您似乎没有将任何地方附加到现有节点

在此处查看如何获取要附加的位置 [http://php.net/manual/en/domxpath.query.php](http://php.net/manual/en/domxpath.query.php)

# java - 如何通过 ssh 运行 Java 程序？

> ID：10064178
> 
> 赞同：3
> 
> 时间：2012-04-08T15:59:04.237
> 
> 标签：java, unix, ssh, terminal, distributed-computing

假设我在 Eclipse 中创建了一个 Java 项目，它有 3-10 个类，其中一个有一个 main(String[] args) 方法，该方法启动整个程序并在命令行接受 4 个参数。假设这个项目在 src/lib 中有 6-10 个需要运行的 .jar 文件。

如果我可以通过 ssh 访问另一台计算机（两端都是 UNIX）并且我想运行这个程序，我该怎么做呢？

我问是因为我一直在做一些分布式计算项目，我需要在多台机器上运行我的程序，但我是一个完全的命令行菜鸟，我没有物理访问所有机器的权限。

编辑：似乎我需要对文件进行 SCP 处理。有人可以告诉我使 Java 程序运行的特定命令吗？包括我应该从哪个目录运行它以及如何包含 JAR 依赖项。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-08T18:16:00.067

跑步

***java -jar thejarfile.jar “arg1” “arg2” “ectect..”***

如果你想在后台运行它***java -jar thejarfile.jar "arg1" "arg2" &***

杀死它，如果它在后台***ps -aux***获取 id 然后***杀死（id 号）***

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-08T16:03:34.177

通常，您使用 ssh 登录到远程计算机，然后使用该计算机的资源从该计算机的存储中运行程序。

因此，如果您想在另一台机器上运行您的 Java 程序，您需要将所需的文件复制到那里，然后 ssh 到该机器并从远程命令行运行该程序。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-08T16:04:22.283

您编写了一个小型引导程序，它将成为您的 MicroKernel。你 SCP 那个 MicroKernel 到远程机器。该程序将使用自定义的 ClassLoader 将您的实际应用程序的其余依赖项拉入内存或远程机器的某些存储中。查看 URL ClassLoader 以获得一些帮助，因为它可以从 HTTP 地址加载 JAR 文件。

或者你可以压缩你的整个程序，把它SCP到远程机器上，解压缩然后像往常一样运行'java'。如果您有 SSH 访问权限，您应该可以访问该机器上的 scp 文件。如果不是，您始终可以通过 SSH 连接到删除机器，然后将`scp`它们从您的机器中删除。

例子：

```
ssh myname@myremotemachine
> mkdir /location/to/program
> scp myname@mydevmachine:/location/to/program/* /location/to/program 
```

如果您正确设置了 SSH 密钥并且不必输入密码，这一切都非常有效。

# android - Android 应用程序限制功能以支持向后兼容性

> ID：10064180
> 
> 赞同：0
> 
> 时间：2012-04-08T15:59:27.683
> 
> 标签：android, android-manifest

我有一个最低 API 级别为 4（Android 1.6）的 Android 应用程序，并且我有一些用户使用这个版本的 Android。但是，我想实现一个使用 NFC 的功能，它需要 Android 3 或更高版本（API 级别 9+）。这意味着我必须更改清单文件中的最低 API 级别，这将疏远使用旧版本 Android 的用户。那么，如果设备不兼容，是否有办法以编程方式禁用使用 NFC 的功能，并且仍然允许使用其他功能，而不是锁定使用旧版本 Android 的用户？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T16:12:50.227

将 min-sdk 设置为 4 并将 target-sdk 设置为 9 并在您的代码中使用类似这样的内容：

```
if(Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB){
  //your API-9 specific code here
}else{
 // an alternative code
} 
```

这对于 java 部分，在 XML 中，较新的属性被忽略，因此可以安全地添加您需要的内容

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T16:06:48.093

阅读此[http://developer.android.com/resources/articles/backward-compatibility.html](http://developer.android.com/resources/articles/backward-compatibility.html)。您可以使用反射 API 检查方法是否存在。阅读以前的问题：[检查方法是否存在](https://stackoverflow.com/questions/6782440/check-if-method-exists)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-08T16:03:44.130

您需要将 API 级别的特定代码封装到外部类并使用反射来调用它们（例如使用接口）

# javascript - 在 chrome 中悬停在 wordpress 中的悬停问题

> ID：10064181
> 
> 赞同：0
> 
> 时间：2012-04-08T15:59:32.863
> 
> 标签：javascript, css, wordpress, google-chrome

我有一个带有下拉菜单的[菜单](http://bit.ly/Hp9AXq)。

由于某种原因，它在 Chrome 中无法按预期工作。在 FF 和 IE 中，只要我开始将鼠标悬停在红色菜单项上，下拉菜单就会出现在该红色菜单项下。但是在 Chrome 中，只有当我停止将鼠标悬停（移动鼠标）在项目上时才会出现下拉菜单，如果鼠标从未停在该项目上，则下拉菜单根本不会出现。

我需要它立即出现，你开始将鼠标悬停在它上面的毫秒，就像它已经在 FF 和 IE 中一样......

查看此[视频](http://www.mediafire.com/?m9k3407t2wa4l9q)以了解 Chrome 与 FF 的行为差异

# mysql - 如何在 MySQL 连接查询中使用 IF 语句？

> ID：10064183
> 
> 赞同：18
> 
> 时间：2012-04-08T15:59:42.620
> 
> 标签：mysql, sql

我有一个 SQL 查询，它根据条件以不同的方式连接表。

```
SELECT m.id, u.first_name AS otherUser
FROM matches AS m
IF (u.id=m.user2ID)
    LEFT JOIN users AS u ON u.id = m.user1ID
ELSE
    LEFT JOIN users AS u ON u.id = m.user2ID
ENDIF
WHERE m.user1ID=2 OR m.user2ID=2 
```

`matches`是一个具有整数列 user1ID 和 user2ID 的表。`users`是一个包含我的 Web 应用程序用户的表。`users`有一个名为 的 VARCHAR 字段`first_name`。

此查询的目的是获取与当前用户匹配的用户名。

但是，MySQL 返回此错误：

```
#1064 - You have an error in your SQL syntax; 
check the manual that corresponds to your MySQL server version for 
the right syntax to use near 'IF (u.id=m.user2ID) LEFT JOIN users 
AS u ON u.id = m.user1ID ELSE LEFT JOIN user' at line 3 
```

为什么？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-08T16:41:19.257

将条件指定为 ON 子句的一部分：

```
SELECT m.id, u.first_name AS otherUser
FROM matches AS m
LEFT JOIN users AS u ON (u.id=m.user2ID and u.id = m.user1ID) or (u.id<>m.user2ID and u.id = m.user2ID) 
WHERE m.user1ID=2 OR m.user2ID=2 
```

做同样事情的另一种方法：

```
SELECT m.id, u.first_name AS otherUser
FROM matches AS m
LEFT JOIN users AS u ON IF(u.id=m.user2ID,u.id = m.user1ID,u.id = m.user2ID) 
WHERE m.user1ID=2 OR m.user2ID=2 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-04-08T16:24:20.097

使用此查询：

> ~~SELECT m.id, u.first_name AS otherUser FROM 匹配 AS m LEFT JOIN users AS u ON u.id = m.user1ID AND u.id=m.user2ID LEFT JOIN users AS u1 ON u1.id = m.user2ID WHERE m .user1ID=2 或 m.user2ID=2~~

# 更新查询：

```
SELECT m.id, u.first_name AS otherUser
FROM matches AS m
LEFT JOIN users AS u ON u.id = (CASE WHEN u.id=m.user2ID 
                                   THEN m.user1ID
                                   ELSE m.user2ID
                               END)
WHERE m.user1ID=2 OR m.user2ID=2 
```

检查这个[来源](http://forums.devshed.com/mysql-help-4/select-with-join-in-an-if-case-statement-possible-520552.html)。

还要检查这个[MYSQL Inner Join if 语句](https://stackoverflow.com/questions/5585338/mysql-inner-join-if-statement)。它可能对你有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-08T16:07:35.463

您不能以这种方式使用`IF THEN ELSE END IF`-stuff 。`SELECT`但是，您可以在存储过程和函数中使用它。

我会`JOIN` `u.id`同时使用 and`m.user1ID`来避免重复。`m.user2ID``DISTINCT`

有一个`IF()`可以在 SELECT 中使用，但不能使用`IF()`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-12-07T09:38:53.333

谢谢，它对我有用。尝试了以下其他方法：

**

```
Create table TEMP1 (ID INT,T_MONTH INT,T_YEAR INT)
INSERT INTO TEMP1 VALUES(1,1,2001)
INSERT INTO TEMP1 VALUES(2,2,2001)
INSERT INTO TEMP1 VALUES(3,3,2001) 
```

**

```
CREATE TABLE TEMP2 (T_MONTH INT,T_YEAR INT,FREQUENCY CHAR(1),VAL FLOAT)
INSERT INTO TEMP2 VALUES(1,2001,'M',1.1)
INSERT INTO TEMP2 VALUES(3,2001,'M',1.2)
INSERT INTO TEMP2 VALUES(3,2001,'Q',1.3)
INSERT INTO TEMP2 VALUES(12,2001,'A',1.4)

SELECT * FROM TEMP1 L JOIN TEMP2 H
ON L.T_YEAR = H.T_YEAR
OR (L.T_MONTH = (CASE WHEN H.FREQUENCY='M'
                       THEN H.T_MONTH
                  END)
    OR dbo.GetQuarterFromMonth(L.T_MONTH) = (CASE WHEN H.FREQUENCY = 'Q'
                        THEN dbo.GetQuarterFromMonth(H.T_MONTH)
                        END))
WHERE H.FREQUENCY = 'Q' 
```

这里的 GetQuarterFromMonth 是一个用户定义的函数，它返回特定月份的 Quarter。

上述查询的目的是为表 1 中的所有月份增加 Quarter 的值。如果频率是每年，那么在这种情况下，应该为表 1 的所有月份 1-12 增加值，这是通过第一个连接条件实现的. 如果频率为每月，则表 1 中的每个月都应映射到表 2。唯一独特的情况是处理四分之一频率。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-08-07T09:07:39.500

你也可以`LEFT JOIN`像这样在同一张桌子上放两个......

```
LEFT JOIN users AS u ON u.id = m.user1ID
LEFT JOIN users AS u2 ON u2.id = m.user2ID 
```

这是使用 IF 语句的替代方法。

# c - waf - 构建工作，自定义构建目标失败

> ID：10064186
> 
> 赞同：1
> 
> 时间：2012-04-08T16:00:15.363
> 
> 标签：c, build, waf

waf 命令使用以下 wscript 文件（或者 wscript 文件有一些我目前不知道的其他缺点`waf build`）显示编译器错误（如果有的话），`waf debug`无论`waf release`是否*总是失败：*

```
APPNAME = 'waftest'
VERSION = '0.0.1'
def configure(ctx):
    ctx.load('compiler_c')
    ctx.define('VERSION', VERSION)
    ctx.define('GETTEXT_PACKAGE', APPNAME)

    ctx.check_cfg(atleast_pkgconfig_version='0.1.1')
    ctx.check_cfg(package='glib-2.0', uselib_store='GLIB', args=['--cflags', '--libs'], mandatory=True)
    ctx.check_cfg(package='gobject-2.0', uselib_store='GOBJECT', args=['--cflags', '--libs'], mandatory=True)
    ctx.check_cfg(package='gtk+-3.0', uselib_store='GTK3', args=['--cflags', '--libs'], mandatory=True)
    ctx.check_cfg(package='libxml-2.0', uselib_store='XML', args=['--cflags', '--libs'], mandatory=True)

    ctx.check_large_file(mandatory=False)
    ctx.check_endianness(mandatory=False)
    ctx.check_inline(mandatory=False)

    ctx.setenv('debug')
    ctx.env.CFLAGS = ['-g', '-Wall']
    ctx.define('DEBUG',1)

    ctx.setenv('release')
    ctx.env.CFLAGS = ['-O2', '-Wall']
    ctx.define('RELEASE',1)

def pre(ctx):
    print ('Building [[[' + ctx.variant + ']]] ...')

def post(ctx):
    print ('Building is complete.')

def build(ctx):
    ctx.add_pre_fun(pre)
    ctx.add_post_fun(post)

#   if not ctx.variant:
#       ctx.fatal('Do "waf debug" or "waf release"')

    exe = ctx.program(
        features = ['c', 'cprogram'],
        target = APPNAME+'.bin',
        source = ctx.path.ant_glob(['src/*.c']),
        includes = ['src/'],
        export_includes = ['src/'],
        uselib = 'GOBJECT GLIB GTK3 XML'
    )
#   for item in exe.includes:
#       print(item)

from waflib.Build import BuildContext

class release(BuildContext):
    cmd = 'release'
    variant = 'release' 

class debug(BuildContext):
    cmd = 'debug'
    variant = 'debug' 
```

产生的错误`waf debug`：

```
Build failed
 -> task in 'waftest.bin' failed (exit status -1): 
    {task 46697488: c qqq.c -> qqq.c.1.o}
[useless filepaths] 
```

我查看了 waf 演示，阅读了[第 6.2.2 节中的 wafbook，](http://docs.waf.googlecode.com/git/book_16/single.html#_custom_build_outputs)但这些并没有为我提供有价值的信息来解决这个问题。

出了什么问题，我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T17:05:44.883

您至少需要执行以下操作：

```
def configure(ctx):
  ...
  ctx.setenv('debug')
  ctx.load('compiler_c')
  ... 
```

由于该`cfg.setenv`功能会重置整个以前的环境。如果要保存以前的环境，可以执行`cfg.setenv('debug', env=cfg.env.derive())`.

Also, you don't need to explicitly specify the `features = ['c', 'cprogram']`, since, it's redundant, when you call `bld.program(...)`.

P.S. Don't forget to reconfigure after modifying wscript file.

# python - 来自 python 字典的多个赋值

> ID：10064187
> 
> 赞同：2
> 
> 时间：2012-04-08T16:00:18.110
> 
> 标签：python, dictionary, variable-assignment

是否可以使这行代码有效？

```
description, content, state, city, datetime = makeTupleRightOrder(dictionary) 
```

这个 makeTupleRightOrder 将从赋值左侧获取“参数”，将它们的名称转换为字符串并构建一个从字典中获取它们的值的列表。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-08T16:01:01.787

不。该函数不知道赋值左侧的内容，即使知道，变量的名称也可能与键不同。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-08T16:17:07.097

kindall 是对的。对于一般情况，您不能这样做。您*可以*做的是按字母顺序对键进行排序，并**始终**确保您将 dict 解包到的变量在键方面是正确的（字母顺序）：

```
city, content, datetime, description, state = [dictionary[k] for k in sorted(dictionary)] 
```

（此示例假定字典键的名称与您将它们解包到的变量相同）。

**笔记**

如果您遇到被迫这样做的情况，我会考虑以不同的方式设计您的代码。您的实施可能存在缺陷。

# android - 在android中制作图案手指GUI

> ID：10064190
> 
> 赞同：-1
> 
> 时间：2012-04-08T16:00:44.580
> 
> 标签：android, algorithm, user-interface

非常感谢。我得到了问题的答案，，，，:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T16:56:48.943

您可以使用 TabletLayout 将屏幕划分为 3x3

然后使用 onTouch() 监听器获取 X 和 Y 来检查你的手指是否到达了那些部分

前任。如果 x > 200 & x < 280 && y > 400 y < 480

现在取决于您的图形：]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T19:41:06.773

[That](https://code.google.com/p/android-lockpattern/) Android library project extracted the sources from Android framework. You can make use of it or extract it on your own from the [sources](https://github.com/android/platform_frameworks_base)

# java - 使用 CXF 拦截器处理错误 - 更改响应消息

> ID：10064191
> 
> 赞同：8
> 
> 时间：2012-04-08T16:00:58.150
> 
> 标签：java, rest, soap, error-handling, cxf

我正在尝试处理来自后端的错误。`handleMessage()`如果发生错误但内容是 XmlMessage 的实例，则调用。我想将其更改为我自己的响应 - 只需设置响应代码并添加一些消息。

我还没有找到任何适当的文档可以告诉我如何做到这一点......

这些示例用于 REST，但我也想在 SOAP 中管理这个东西。

**拦截器**

```
public class ErrorHandlerInterceptor extends AbstractPhaseInterceptor<Message> {

    public ErrorHandlerInterceptor() {
        super(Phase.POST_LOGICAL);
    }

    @Override
    public void handleMessage(Message message) throws Fault {
        Response response = Response
            .status(Response.Status.BAD_REQUEST)
            .entity("HOW TO GET A MESSAGE FROM AN EXCEPTION IN HERE???")
            .build();
        message.getExchange().put(Response.class, response);
    }

} 
```

**上下文.xml**

```
<bean id="errorHandlerInterceptor"
    class="cz.cvut.fit.wst.server.interceptor.ErrorHandlerInterceptor" />

<jaxrs:server address="/rest/">
    <jaxrs:serviceBeans>
        <ref bean="restService" />
    </jaxrs:serviceBeans>
    <jaxrs:outFaultInterceptors>
        <ref bean="errorHandlerInterceptor" />
    </jaxrs:outFaultInterceptors>
</jaxrs:server> 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-10T21:49:34.737

如果您使用的是 JAX-RS，为什么不设置一个异常映射器，然后使用该映射器来处理响应。

一个简单的例子：

```
@Provider
@Produces(MediaType.APPLICATION_JSON)
public class MyExceptionMapper implements
        ExceptionMapper<MyException> {

    @Override
    public Response toResponse(MyException e) {
        return Response.status(Status.NOT_FOUND).build();
    }

} 
```

然后，您需要通过添加以下内容在 jaxrs 服务中注册提供程序：

```
<jaxrs:providers>
    <bean class="com.blah.blah.blah.blah.MyExceptionMapper"/>  
</jaxrs:providers> 
```

在上下文中的服务器配置中。这样您就可以完全访问异常，并且可以从中获取任何您想要的东西。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-15T21:45:23.767

这[是你的另一块拼图](https://stackoverflow.com/a/10096951/517815)。您已经在使用[JAX-RS](http://en.wikipedia.org/wiki/Java_API_for_RESTful_Web_Services)，那么为什么不使用[JAX-WS](http://jax-ws.java.net/)呢？

[此线程](https://stackoverflow.com/questions/2064447/jax-ws-map-exceptions-to-faults)和[此博客文章](http://io.typepad.com/eben_hewitt_on_java/2009/07/using-soap-faults-and-exceptions-in-java-jaxws-web-services.html)涵盖将异常映射到 SOAP 错误。简短而甜蜜：

> JAX-WS 2.0 规范要求带有注释的异常[`@WebFault`](http://java.sun.com/javaee/5/docs/api/javax/xml/ws/WebFault.html)必须有两个构造函数和一个方法[获取故障信息的getter]：
> 
> ```
> WrapperException(String message, FaultBean faultInfo)
> WrapperException(String message, FaultBean faultInfo, Throwable cause)
> FaultBean getFaultInfo() 
> ```
> 
> WrapperException 被替换为异常的名称，而 FaultBean 被替换为实现故障 bean 的类名。故障 bean 是包含故障信息的 Java bean，Web 服务客户端使用它来了解故障原因。

还有你的映射。只需在 的上下文中指定上述签名的实现`@WebFault`，您的 SOAP API 就会愉快地映射它们。显然，这些链接包含更多详细信息。

# java - 通过java验证xml中节点的存在

> ID：10064193
> 
> 赞同：-1
> 
> 时间：2012-04-08T16:01:12.847
> 
> 标签：java

这是底部
私有静态字符串 getTagValue(String sTag, Element eElement) { NodeList nlList = eElement.getElementsByTagName(sTag).item(0).getChildNodes();

```
 Node nValue = (Node) nlList.item(0);

        return nValue.getNodeValue();
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T05:54:52.347

更新您的主要功能...

```
 public static void main(String[] args) 
        { 
            try 
            {     
                File fXmlFile = new File(".xml");  
                DocumentBuilderFactory dbFactory = DocumentBuilderFactory.newInstance();   
                DocumentBuilder dBuilder = dbFactory.newDocumentBuilder();   
                Document doc = dBuilder.parse(fXmlFile);        
                doc.getDocumentElement().normalize();          
                NodeList nList = doc.getElementsByTagName("user");   

                System.out.println("============================================");
                System.out.println("==========Welcome to Multiuser ATM=========="); 
                System.out.println("============================================\n\n"); 
                System.out.println("Please enter your Account Number:"); 
                int acno = sc.nextInt();       
                System.out.println("Please enter your Password:");  
                int password = sc.nextInt();        
                System.out.println("Your Account Balance is:"); 
                System.out.println("Please choose your option:"); 

    //------------You just have to insert below code---------------------

                for (int temp = 0; temp < nList.getLength(); temp++)
                {
                    Node nNode =  nList.item(temp);

                    if (nNode.getNodeType() == Node.ELEMENT_NODE)
                    {
                        Element eElement = (Element) nNode;
                        int ano = Integer.parseInt(getTagValue("acno", eElement));
                        System.out.println("ANO:  "+ano);
                        if(ano == acno)
                        {
                            System.out.println("Acno:    "+acno+"  ANO:  "+ano);
                            int pass = Integer.parseInt(getTagValue("password", eElement));
                            if(pass == password)
                                System.out.println("Password:    "+password+"  pass:  "+pass);
                        }                   
                    }
                }
            }   
            catch (Exception e)  
            {
                e.printStackTrace(); 
            } 
```

# sql - 仅使用 SQL 计算一对多关系中的子记录数

> ID：10064194
> 
> 赞同：5
> 
> 时间：2012-04-08T16:01:14.533
> 
> 标签：sql, count, distinct, one-to-many

我有一个包含两个表的数据库：`data`和`file`.

`file_id`是从`data`to的外键`file`。所以，从`data`到的关系`file`是n比一。

有没有办法只使用 SQL 来找出`data`引用的每条记录有多少条记录`file`？

例如，我可以找到有多少条数据记录引用了 id 为 13 的文件：

```
select count(*) from data where file_id = 13; 
```

我想为每个 file_id 知道这一点。我尝试了以下命令来实现这一点，但它给出了所有 file_id 记录的计数：

```
mysql> select distinct file_id, count(*) from data where file_id in (select id from file);
+---------+----------+
| file_id | count(*) |
+---------+----------+
|       9 |     3510 |
+---------+----------+ 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-08T16:08:18.163

Distinct 每行返回不同的值，而不是每个组。MySql 允许使用没有 group by 的聚合函数，这完全是误导性的。在这种情况下，您会得到一个随机的 file_id 和所有记录的计数——当然这是您不打算做的事情。

要获取组计数（或任何其他聚合函数），请使用 group by 子句：

```
select file_id, count(*)
  from data
 group by file_id 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-08T16:05:30.993

通过...分组...

```
SELECT file_id, COUNT(*)
  FROM data
 GROUP BY file_id 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-08T16:05:38.777

```
select file_id, count(*)
  from data
 group by file_id 
```

# android - android如何发送短信和彩信？

> ID：10064201
> 
> 赞同：0
> 
> 时间：2012-04-08T16:02:47.653
> 
> 标签：android, sms, send, mms

在android资源中，我找到了isms接口，它使用了SmsManager。

什么类实现了这个接口？它是如何工作的？
调用此方法时会发生什么，例如 sendText？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T16:07:09.490

使用以下链接发送短信。使用短信管理器。这是一个[示例项目](https://github.com/commonsguy/cw-advandroid/tree/master/SMS/Sender/)，展示了通过默认客户端或使用 SmsManager 发送 SMS 的基础知识。不过，我不相信有一个公共 API 可以发送彩信。

[链接1](http://mobiforge.com/developing/story/sms-messaging-android)

[链接2](https://github.com/commonsguy/cw-advandroid/tree/master/SMS/Sender/)

或者简单地使用下面的代码来启动本机消息框

```
Intent sendIntent = new Intent(Intent.ACTION_VIEW);
//use to fill the sms body
sendIntent.putExtra("sms_body", "Hi this is test sms"); 
sendIntent.setType("vnd.android-dir/mms-sms");
startActivity(sendIntent); 
```

# javascript - 在实时服务器上未定义，但在本地主机上工作

> ID：10064202
> 
> 赞同：1
> 
> 时间：2012-04-08T16:02:54.567
> 
> 标签：javascript, jquery, ajax

我在网页上有一个带有标记的谷歌地图，上面附有点击监听器。

**问题：**在**localhost**上，当我单击地图标记时，一切都按预期工作。但是，在上传到服务器并尝试**实时**版本后，单击标记会导致错误`Uncaught TypeError: Cannot read property 'listing_id' of undefined`。

两者都`console.log`表明`json`并被`i`定义...

**Console.log 输出**

> [对象，对象，对象，对象，对象，对象，对象，对象，对象，对象，对象，对象，对象，对象，对象，对象，对象，对象]
> 
> 我：48
> 
> 未捕获的类型错误：无法读取未定义的属性“listing_id”

为什么会这样？

**JS代码**

```
$.getJSON(......., function(json) {

for(var i = 0; i < json.length; i++) {
    (function(i) {
        google.maps.event.addListener(markers[json[i].listing_id], 'click', function() {
            console.log('json: ' + json);
            console.log('i: ' + i);
            console.log('json[i].listing_id :' + json[i].listing_id);

            // Mark currently opened marker
            markers[json[i].listing_id].setIcon(base_url + 'images/template/markers/listing_black.png');

            //...
         });
     })(i);
 }

}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-08T16:05:44.690

看起来您没有将数据传递给回调函数。

尝试将您的第一行改为：

```
$.getJSON(......., function(json) { 
```

# android - 编译Android应用程序时如何使最后一个警告静音？

> ID：10064206
> 
> 赞同：1
> 
> 时间：2012-04-08T16:03:06.800
> 
> 标签：android

在 eclipse 中编程时，我总是很欣赏编译器“与我一起思考”，因此我总是启用编译器提供的几乎所有警告。然后我编程这样，我没有得到任何！我启用的警告之一是编译器在遇到空块时会警告我，因为这可能表明我这边可能存在编程错误或疏忽。为了使这样的警告静音，我总是输入注释，表明这个块或类是故意空白的。

然而，对于 Android 应用程序，总是会留下一个警告，它位于自动生成的 gen/package/path/here/R.java 资源文件中，内容如下：

```
/* AUTO-GENERATED FILE.  DO NOT MODIFY.
 *
 * This class was automatically generated by the
 * aapt tool from the resource data it found.  It
 * should not be modified by hand.
 */

package foo.bar.someappname;

public final class R {
    ...
    public static final class attr {  /* <<< this empty class creates a compiler warning */
    }
    ...
} 
```

空类“attr”会导致编译器警告（顺便说一句：该类中的几乎所有标识符都违反了标准的 Java 命名约定，尤其是在标识符中使用大写字母，但这是另一回事）。

我也想消除那个“最后”警告。某处是否有此类的模板，以便我可以在那里输入一些评论？或者我可以在哪里定义一些虚拟值以使此类不再为空？这个“attr”类是用来做什么的，即什么数据会进入这个类？

迈克尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T16:21:26.463

attr 是存储在`res/values/attr.xml`文件中的资源

在 attr 中，您可以为您的 xml 组件（视图）创建自己的属性

```
<declare-styleable name="MyCustomView">
    <attr name="myattribute" format="string" />
</declare-styleable> 
```

如果您有 attr 资源并且它是空的，那么只需将其删除

[在此处](http://developer.android.com/resources/samples/ApiDemos/res/values/attrs.html)查看示例

# c# - 根级别的数据无效 - 在我正在创建的文件末尾

> ID：10064209
> 
> 赞同：0
> 
> 时间：2012-04-08T16:03:29.663
> 
> 标签：c#, xml, exception, serialization

我正在尝试序列化一个类：

```
 File.Delete("fisierXML.xml");
 using (FileStream fs = new FileStream("fisierXML.xml",FileMode.Create))
 {
     System.Xml.Serialization.XmlSerializer s = 
         new System.Xml.Serialization.XmlSerializer(typeof(MyClass));
     s.Serialize(fs, myClassInstance);
 } 
```

每当我想在 xml 文件上写入的数据量最大时，一切正常 - 当我尝试在文件上写入的数据不多时 - 似乎会发生错误：“根级别的数据无效。”

当我打开 XML 文件时 - 没有错误，并且 XML 文件似乎正常！

我试过删除文件 - 或 FileMode.Create - 或 FileMode.Truncate - 但每次都是同样的问题。

我究竟做错了什么？

# javascript - javascript 在 Firefox 中不起作用

> ID：10064211
> 
> 赞同：0
> 
> 时间：2012-04-08T16:03:33.660
> 
> 标签：javascript, jquery

JavaScript：

```
$(window).scroll(function(){
    if  ($(window).scrollTop() == $(document).height() - $(window).height()){
        $('#footer').show();
    }
}); 
```

CSS：

```
#footer {
    display: none;
} 
```

`div`当一直滚动到底部时，这应该会显示页面底部的隐藏内容。出于某种原因，隐藏的内容`div`永远不会在 Firefox 中显示。是否有另一种方法使用 jQuery 来创建相同的效果？

编辑：这是在 Firefox 中无法正常工作的页面

[http://safe.tumblr.com/theme/preview/34069](http://safe.tumblr.com/theme/preview/34069)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T16:18:49.710

你需要使用这个：

```
$(window).scroll(function() {
   if($(window).scrollTop() + $(window).height() == $(document).height()) {
       $('#footer').show();
   }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T16:33:55.780

scrollTop 的最大值与 documentHeight - windowHeight 给您的最大值之间可能存在细微差别，因此我建议减去一个小的安全系数：

```
$(window).scroll(function(){
    if ($(window).scrollTop() >= $(document).height() - $(window).height() - 3) {
        $('#footer').show();
    }
}); 
```

# text - VBScript - 如何在指定的行后追加新行

> ID：10064215
> 
> 赞同：0
> 
> 时间：2012-04-08T16:04:02.037
> 
> 标签：text, vbscript, append

我需要通过将新行附加到现有文件来编辑一些配置文件，但不是在文件的末尾，而是在中间的某个地方（在特定部分的末尾）

```
# section 1 description
foo1 = bar1
foo2 = bar2

# section 2 description
foo3 = c:\bar.cfg
my_new_line = which_needs_to_be_appended_here

# section 3 description
foo4 = bar4 
```

我应该像这里描述的那样使用搜索和替换：

[http://blogs.technet.com/b/heyscriptingguy/archive/2005/02/08/how-can-i-find-and-replace-text-in-a-text-file.aspx](http://blogs.technet.com/b/heyscriptingguy/archive/2005/02/08/how-can-i-find-and-replace-text-in-a-text-file.aspx)

找到特定部分的最后一行并将其替换为：自身 + 换行符 + my_new_line = which_needs_to_be_appended？

或者

也许有一种更简单或更聪明的方法来做同样的事情（比如找到特定部分的最后一行并使用某种方法将我的新行放在它之后）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T18:41:26.450

由于您的任务是将一行附加到一个部分，并且您的数据似乎表明部分由两个行尾分隔，因此在该分隔符上使用 Split() 看起来是一个不依赖于知道最后一个键值的好策略-该部分的对：

```
 Dim sAll : sAll = readAllFromFile("..\data\cfg00.txt")
  WScript.Echo sAll
  Dim aSects : aSects = Split(sAll, vbCrLf & vbCrLf)
  aSects(1) = aSects(1) & vbCrLf & "fooA = added"
  sAll = Join(aSects, vbCrLf & vbCrLf)
  WScript.Echo "-----------------------"
  WScript.Echo sAll 
```

输出：

```
=========================
# section 1 description
foo1 = bar1
foo2 = bar2

# section 2 description
foo3 = c:\bar.cfg

# section 3 description
foo4 = bar4

-----------------------
# section 1 description
foo1 = bar1
foo2 = bar2

# section 2 description
foo3 = c:\bar.cfg
fooA = added

# section 3 description
foo4 = bar4

========================= 
```

# mysql - mySQL - 如何查询指示错误的多个 id、状态对？

> ID：10064216
> 
> 赞同：0
> 
> 时间：2012-04-08T16:04:13.563
> 
> 标签：mysql, sql

我有一个带有字段 id、status、other_fields 的 MySQL 表

多行具有相同的 id 和状态很好，因为它们将具有不同的 other_fields。

但是，如果某个 id 有多个（不同的）状态值，则表示错误。

如何编写查询以返回指示错误的 id、状态对？我已经查看了对相关问题的答复，但是，唉，我无法跳到我的案子上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T16:33:00.400

尝试这样的事情：

```
select t1.id, t1.status, t2.status
from table t1 
inner join table t2 on t1.id = t2.id
and t1.status != t2.status
order by t1.id 
```

您也可以`group_concat(t2.status)`并`group by t1.id`获得一排 pr id..

# c++ - C ++强制堆栈在函数内部展开

> ID：10064229
> 
> 赞同：1
> 
> 时间：2012-04-08T16:06:23.800
> 
> 标签：c++, stack, stack-overflow, continuations

我正在学习 C++，目前我正在摆弄以下代码：

```
class Bar;
struct Callback {
    virtual void Continue(Bar&) = 0;
};

// ...

void Foo(Bar& _x, Callback& result)
{
    // Do stuff with _x

    if(/* some condition */) {
        // TODO: Force unwind of stack
        result.Continue(_x);
        return;
    }

    // Do more stuff with _x

    if(/* some other condition */) {
        // TODO: Force unwind of stack
        result.Continue(_x);
        return;
    }

    // TODO: Force unwind of stack
    Bar y; // allocate something on the stack
    result.Continue(y);
} 
```

主要思想是我知道在每个站点`result.Continue`被调用时，该函数`Foo`也会返回。因此，堆栈可以在调用延续之前展开。

由于用户代码将以递归方式使用它，我担心此代码可能会导致堆栈溢出。据我了解，参数`_x`和在执行`result`时保留在堆栈`result.Continue`中，因为堆栈仅在`Foo`返回时才展开。

*编辑*：该`Continue`函数可能（并且可能会）调用该`Foo`方法：导致递归。简单的尾调用优化`Continue`并不会`Foo`导致堆栈溢出。

在返回之前，我能做些什么来强制展开堆栈，`Foo`保留`result`一个临时（`register`？）变量，然后执行该继续？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-08T19:51:42.183

您可以使用我发现的解决此问题的设计。该设计假定一个事件驱动程序（但您可以创建一个假事件循环，否则）。

为了清楚起见，让我们忘记您的特定问题，而是关注两个对象之间的接口问题：*发送者*对象将数据包发送到*接收者*对象。发送方总是必须等待接收方完成对任何数据包的处理，然后再发送另一个数据包。该接口由两个调用定义：

*   Send() - 由发送方调用以开始发送数据包，由接收方实现
*   Done() - 由接收方调用以通知发送方发送操作已完成，可以发送更多数据包

这些调用都没有返回任何内容。接收方总是通过调用 Done() 报告操作完成。如您所见，此接口在概念上与您介绍的类似，并且存在相同的 Send() 和 Done() 之间的递归问题，可能导致堆栈溢出。

我的解决方案是在事件循环中引入一个**作业队列。**作业队列是等待分派的事件的**LIFO 队列（堆栈）。**事件循环将队列顶部的作业视为最高优先级事件。换句话说，当事件循环必须决定调度哪个事件时，如果队列不为空，它将*始终调度作业队列中的顶部作业，而不是任何其他事件。*

然后修改上述接口以使 Send() 和 Done() 调用都**排队**。这意味着，当发送者调用 Send() 时，所发生的只是一个作业被推送到作业队列中，而这个作业在被事件循环调度时，将调用接收者的 Send() 的真正实现。Done() 的工作方式相同 - 由接收者调用，它只是推送一个作业，该作业在分派时调用发送者的 Done() 实现。

了解队列设计如何提供三大好处。

1.  它避免了堆栈溢出，因为 Send() 和 Done() 之间没有显式递归。但是发送者仍然可以直接从其 Done() 回调中再次调用 Send()，而接收者可以直接从其 Send() 回调中调用 Done()。

2.  它模糊了立即完成的（I/O）操作和那些需要一些时间的操作之间的区别，即接收者必须等待一些系统级事件。例如，当使用非阻塞套接字时，接收器中的 Send() 实现调用 send() 系统调用，该系统调用要么设法发送某些东西，要么返回 EAGAIN/EWOULDBLOCK，在这种情况下，接收器要求事件循环通知当套接字可写时。当事件循环通知它套接字是可写的时，它会重试 send() 系统调用，这可能会成功，在这种情况下，它会通过从此事件处理程序调用 Done() 来通知发送方操作已完成。无论发生哪种情况，从发送者的角度来看都是一样的——它的 Done() 函数在发送操作完成时调用，立即或一段时间后调用。

3.  它使错误处理与实际 I/O 正交。错误处理可以通过让接收者调用一个以某种方式处理错误的 Error() 回调来实现。看看发送者和接收者如何成为**对错误一无所知**的独立可**重用模块**。如果发生错误（例如，send() 系统调用失败并显示真正的错误代码，而不是 EAGAIN/EWOULDBLOCK），发送者和接收者可以简单地从 Error() 回调中销毁，这可能是创建发送者的同一代码的一部分和接收器。

 **总之，这些功能可以在事件驱动程序中实现优雅[的基于流的编程。](http://en.wikipedia.org/wiki/Flow-based_programming)我在我的[BadVPN](http://code.google.com/p/badvpn/)软件项目中实现了队列设计和基于流的编程，并取得了巨大的成功。

最后，澄清一下为什么作业队列应该是 LIFO。LIFO 调度策略提供对作业调度顺序的粗粒度控制。例如，假设您正在调用某个对象的某个方法，并且想要在此方法执行后执行某些操作*，*并且在*它推送的所有作业*都已递归分派之后。您所要做的就是在调用此方法之前推送您自己的工作，并从该工作的事件处理程序中完成您的工作。

还有一个很好的特性是，您始终可以通过使作业出队来取消此推迟的工作。例如，如果此函数所做的某些事情（包括它推送的作业）导致错误并随后破坏我们自己的对象，我们的析构函数可以使我们推送的作业出列，避免在作业执行和访问数据时发生的崩溃不再存在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T16:13:21.553

在函数结束之前，您不能在调用它时显式强制堆栈展开（代码示例中的破坏`_x`） 。`result`如果你的递归（你没有展示它）适合尾调用优化，那么好的编译器将能够在不创建新堆栈帧的情况下处理递归。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-08T16:22:26.117

除非我误解了，否则为什么不这样做（导致堆栈溢出的单个函数是 imo 的设计缺陷，但如果您的原始 Foo() 中有很多本地人，那么调用 DoFoo() 可能会缓解问题）：

```
class Bar;
struct Callback {
    virtual void Continue(Bar&) = 0;
};

// ...

enum { use_x, use_y };

int DoFoo(Bar& _x)
{
    // Do stuff with _x

    if(/* some condition */) {
        return use_x;
    }

    // Do more stuff with _x

    if(/* some other condition */) {
        return use_x;
    }

    return use_y;
}

void Foo(Bar& _x, Callback& result)
{
    int result = DoFoo(_x);
    if (result == use_x)
    {
       result.Continue(_x);
       return;
    }

    Bar y; // allocate something on the stack
    result.Continue(y);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-09T23:08:32.797

我找到了另一种方法，但这是特定于 Windows 和 Visual C++ 的：

```
void* growstk(size_t sz, void (*ct)(void*))
{
    void* p;
    __asm
    {
        sub esp, [sz]
        mov p, esp
    }
    ct(p);
    __asm
    {
        add esp, [sz]
    }
} 
```

延续`void (*ct)(void*)`将有权访问`void* p;`堆栈分配的内存。`esp`每当继续返回时，通过将堆栈指针恢复到通常级别来释放内存。**

# umbraco - Umbraco 5 询问用户是否有节点权限

> ID：10064231
> 
> 赞同：2
> 
> 时间：2012-04-08T16:06:40.083
> 
> 标签：umbraco

我正在使用 Umbraco 5.1 beta。在互联网上（此信息来自以前的版本，找不到最近的文档）我发现我可以询问一个节点，如果用户有访问权限。这样，我想建立我的菜单。问题是，我无法让它工作，HasAccess 和 IsProtected 属性不起作用。我究竟做错了什么？或者它在新版本的 Umbraco 中的工作方式有所不同？（我也尝试了它作为方法，仍然没有结果）

这是我现在使用的代码：

```
@inherits RenderViewPage
@using Umbraco.Cms.Web;

 @{
     var Homepage = @DynamicModel;
     while (Homepage.ContentType.Alias != "homePage")
     {
         Homepage = Homepage.Parent;
     }
 }
  <ul>
      <li><a href="@Homepage.Url">Home</a></li>
  @foreach (var item in Homepage.Children) {
      if(!item.IsProtected || (item.IsProtected && item.HasAccess)) {
          if(@item.CurrentTemplate != null) {
              var childName = item.Name ?? "(No name yet)";
              <li><a href="@item.Url">@childName </a></li>
          }
      }
  }
  </ul> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T09:08:36.237

如果您只是想抑制用户无法访问的节点。然后您可以使用 WhereCanAccess() 方法。

示例：（这将隐藏用户无权访问的所有子节点）

```
@inherits RenderViewPage
@using Umbraco.Cms.Web;

 @{
     var Homepage = @DynamicModel;
     while (Homepage.ContentType.Alias != "homePage")
     {
         Homepage = Homepage.Parent;
     }
 }
  <ul>
      <li><a href="@Homepage.Url">Home</a></li>
      @foreach (var item in Homepage.Children.WhereCanAccess())
      {
          if(@item.CurrentTemplate != null)
          {
              var childName = item.Name ?? "(No name yet)";
              <li><a href="@item.Url">@childName </a></li>
          }
      }
  </ul> 
```

尝试查找节点 IsProtected 是否似乎更复杂（尽管只有几行代码。好吧，无论如何我发现找到这样做的唯一方法！）

示例：（这只是在受保护的菜单项名称旁边放了一个 *）

```
@inherits RenderViewPage
@using Umbraco.Cms.Web;

 @{
     var Homepage = @DynamicModel;
     while (Homepage.ContentType.Alias != "homePage")
     {
         Homepage = Homepage.Parent;
     }

     var appContext = DependencyResolver.Current.GetService<IUmbracoApplicationContext>();
 }
  <ul>
  <li><a href="@Homepage.Url">Home</a></li>
  @foreach (var item in Homepage.Children)
  {
      var isProtected = appContext.Security.PublicAccess.IsProtected(item.Id);

      if (@item.CurrentTemplate != null)
      {
          var childName = item.Name ?? "(No name yet)";
          childName = (isProtected) ? "* " + childName : childName; 
          <li><a href="@item.Url">@childName </a></li>
      }
  }
  </ul> 
```

# haskell - 选项库，例如用于 Haskell 的 Google GFlags

> ID：10064233
> 
> 赞同：4
> 
> 时间：2012-04-08T16:06:54.050
> 
> 标签：haskell, options, getopt, gflags

我有兴趣拥有与 Google 的 Haskell 标志库非常相似的东西。

这是 gflags 的简短介绍，说明了我为什么喜欢它： http: [//gflags.googlecode.com/svn/trunk/doc/gflags.html](http://gflags.googlecode.com/svn/trunk/doc/gflags.html)

我查看了 Hackage 上的各种 getopt 类库，但没有找到与 gflags 的简单性和灵活性相匹配的库。

也就是说，我想拥有这些功能：

*   生成 --help （使用帮助中提到的默认值），
*   除了解析用户给出的选项外，它还应该在不匹配的选项上出错，因此用户有机会注意错别字，
*   可以在任何模块中轻松声明标志（希望在顶层，如果需要，可以接受 Template Haskell 黑客），
*   不需要在 main 中调用我声明标志的所有模块，而是标志在启动/链接/任何时间以某种方式注册自己，
*   如果 main 必须调用通用初始化函数，就像在 gflags 中一样，那没关系

    ```
    google::ParseCommandLineFlags(&argc, &argv, true);
    ```

*   flags 可以纯粹使用（是的，我认为这是 unsafePerformIO 的适当用法，以使 API 更简单）。

在环顾四周但没有成功之后，我想自己做这个（当然在 Hackage 上分享它）。但是，我完全不知道注册部分的实现。我需要类似于 GCC 的 ((constructor)) 属性或 C++ 的静态初始化的东西，但在 Haskell 中。标准的顶级 unsafePerformIO 是不够的，因为那是惰性的，所以在 main 开始运行之前不会调用它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T14:16:48.847

在研究了关于 Hackage 的所有解决方案（感谢所有提示！）之后，我继续使用 Don 的类型类实现想法，并创建了一个名为 HFlags 的库。

它在黑客攻击：http: [//hackage.haskell.org/package/hflags](http://hackage.haskell.org/package/hflags)

我也有一篇博文，描述它：[http ://blog.risko.hu/2012/04/ann-hflags-0.html](http://blog.risko.hu/2012/04/ann-hflags-0.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-10T18:39:20.620

您可能会喜欢[CmdArgs](http://hackage.haskell.org/package/cmdargs)，尽管我没有充分使用它来判断它是否满足您的所有约束。

# xcode - Xcode 4.3.2 - 缺少 iOS 控件

> ID：10064236
> 
> 赞同：0
> 
> 时间：2012-04-08T16:07:26.313
> 
> 标签：xcode, ios5

我想我在 Xcode 4.3.2 的工具窗口中缺少一些控件。

我创建了一个新的 iOS 5 项目，我的控件列表如下所示：

![Xcode 4.3.2 控件列表](../Images/d77b704b4f75efc40bbcf1c3bf4b198d.png)

我注意到当我打开从 Apple 开发网站下载的示例项目时，我得到了更多的控制。

然后我试图打开我自己的项目，它开始显示一个代码文件。然后我得到了一个巨大的清单。但只要我查看故事板或 Xib 文件，它就会恢复到较短的列表。

在庞大的控件列表中，其中一些看起来不像 iOS。我怀疑它加载了 Xcode 必须跨项目类型（iOS、Mac）提供的全部内容。看起来像这样：

![庞大的控制列表](../Images/92e506eb4e61850114238f09e534b2da.png)

我是否需要手动将一些框架或类似的框架加载到我的项目中以获得更多控件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T16:38:10.803

第一个屏幕截图显示了 CocoaTouch 控件，第二个屏幕截图显示了标准 Cocoa 控件。并非所有后者都在 iOS/CocoaTouch 上可用。您可以使用列表正上方的下拉菜单更改过滤器（第一个屏幕截图中的“对象”，第二个屏幕截图中的“对象库”）

# ios - 如何确保使用 ARC 在 IOS 5 中销毁单例？

> ID：10064238
> 
> 赞同：2
> 
> 时间：2012-04-08T16:07:37.063
> 
> 标签：ios, design-patterns, ios5, singleton, automatic-ref-counting

说，我想创建一个里面有一些数据的单例。数据只动态分配一次，正如它在单例上所期望的那样。

但我现在想知道何时以及如何发布这些数据。我应该建立特殊的方法来破坏单例吗？更具体地说-何时执行此单例的方法“dealloc”？谁对此负责？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T16:32:27.993

一般来说，单例与普通对象没有什么不同。如果不再有（强）引用它，它就会被释放。通常，您只通过一个静态变量来控制一个对象。这个变量是在编译时创建的；因此它不能被释放。但是所有“真实”的对象都可以。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-08T17:46:39.427

您可以声明显式调用的方法/函数。

最简单的方法是让一个静态 C++ 类持有它，然后在其析构函数中释放它。如果您有多个单例，那么这种方法不能很好地扩展，因为销毁顺序是实现定义的。

另一种选择（和更好的设计）是避免使用单例方法，并将其用作另一个类中的常规实例，该类在您的应用程序期间存在（应用程序委托是一个众所周知的示例）。

至于“何时”，它取决于它的依赖关系以及它的使用方式。尽量减少破坏中的外部影响也很好。

# google-play - 已发布应用程序 3 天后，未在市场/游戏中显示，是 Proguard.cfg 问题吗？

> ID：10064245
> 
> 赞同：0
> 
> 时间：2012-04-08T16:08:41.673
> 
> 标签：google-play

大约 3 天前，我创建了一个 Android 应用程序并在 Android 市场上发布了它。

该应用程序在我的开发人员仪表板中报告为已发布，但它现在正在显示。当我使用 eclipse 导出签名的 APK 时，我的 Proguard.cfg 文件中有一个错误。我找不到解决方案，所以我删除了文件并编译了应用程序并将其上传到 android 市场。

删除 Proguard.cfg 文件是否会影响我的应用在 Android 市场中的可见性？关于我应该做什么的任何提示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T16:14:25.410

Proguard.cfg 在构建应用程序的发布版本时使用，但它是可选的。

请参阅：http: [//developer.android.com/guide/developing/tools/proguard.html](http://developer.android.com/guide/developing/tools/proguard.html)

所以这不太可能是问题。

我会在市场上检查你的开发者控制台，看看你是否已经发布了应用程序，或者正确激活了 apk。

# ios - 带有特殊字符的查询不获取数据（目标 C）

> ID：10064246
> 
> 赞同：1
> 
> 时间：2012-04-08T16:09:00.587
> 
> 标签：ios, objective-c, sqlite

当我尝试使用特殊字符（如 ñ、é 等）执行查询时遇到问题。

奇怪的是，我正在尝试使用来自数据库的相同数据来获取数据。

例如，我有一个表“类别”。在该表中，字段 category_name 的返回值之一是“Música”。使用这些数据，我用控制器中的值填充一个 NSArray，该控制器用这些值填充表视图。该表显示在数据右侧。

然后，当用户在我的表格视图中点击“Música”行时，我需要与 category_name 为“Música”的类别相关的所有子类别。我得到点击的值 (NSString *)[self.data objectAtIndex:[indexPath row]] 并使用这个值我尝试执行如下查询：

```
NSString *query = [NSString stringWithFormat:@"select subcategory_name from categories where category_name = '%@'", (NSString *)[self.data objectAtIndex:[indexPath row]]]; 
```

当 category_name 没有任何特殊字符时它可以正常工作，但如果 category_name 有特殊字符，它不会获取任何数据。

否则，如果我记录查询并使用 SQLite Studio 中记录的相同查询，它会获取行。

有没有人知道我的查询没有获取数据会发生什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-09-25T06:17:06.797

使用它从数据库中获取数据 -

```
[NSString stringWithUTF8String:(const char*)sqlite3_column_text(statement, 4)]; 
```

希望，这就是你要找的。任何问题都可以回复我。:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T16:24:10.457

很可能是编码问题。数据库中的任何编码都不是您在查询中传递的编码。

要检查，您需要记录提供给 SQLite 的确切查询并检查查询的实际字节。

（Core Data 可以很好地处理这类事情——现在编写原始 SQL 通常是在浪费时间。至少使用 FMDB，但我不知道它是否能更好地处理编码。）

# c# - SSMS 加载项警告

> ID：10064247
> 
> 赞同：1
> 
> 时间：2012-04-08T16:09:03.387
> 
> 标签：c#, sql-server, add-in, ssms

我在作者提到的所有内容之后为 sql server 2012 安装了这个插件，但仍然坚持这并不是一个错误，但无法弄清楚如何克服这个问题

[如何从 SQL Server Management Studio 的历史记录中删除“服务器名称”项](https://stackoverflow.com/questions/1059105/how-to-remove-server-name-items-from-history-of-sql-server-management-studio)

通过上述问题，但无法确定这是否相关（我认为不是）

我正在关注作者在这里提到的一切 [http://tsqltidy.blogspot.com/2011/08/how-to-write-sql-server-management_17.html](http://tsqltidy.blogspot.com/2011/08/how-to-write-sql-server-management_17.html) 如何摆脱这个？（错误信息） ![在此处输入图像描述](../Images/9d97bd5a0a57dc06c411013085940f33.png)

这是我的项目属性中的设置 ![](../Images/5911acf05d33d831b0a9db59f490b201.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T15:13:43.007

我遇到了同样的问题，在阅读[了这篇文章](http://satheeq.blogspot.ro/2013/01/how-to-write-sql-server-management.html)后，我发现解决方案是简单地删除`/resetaddin ...`参数。

这样做之后，它对我来说很好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T09:12:23.627

我在 Codeproject 上写了 SSMS 2012 项目，但我已经离线一段时间了。

RC 和最终版本之间发生了重大变化，Addin 文件的位置现在已经移动。我已经更新了我的网站/文档以反映这一点。它应该是`C:\ProgramData\Microsoft\MSEnvShared\AddIns`

# java - 在给定相邻节点坐标的情况下构建图形

> ID：10064248
> 
> 赞同：1
> 
> 时间：2012-04-08T16:09:12.460
> 
> 标签：java, graph

您可以这样解释：

```
节点名
nodeName 的 x 坐标，nodeName 的 y 坐标
相邻节点的 x 坐标，该相邻节点的 y 坐标

```

...其余的只是相邻节点的更多坐标。我试图弄清楚如何将其存储为图表，以便检查路径是否合法。例如，也许 nodeA-nodeB-nodeC 是合法的，但 nodeA-nodeC-nodeD 不是。

所以，我的最后一个问题是：编写 Graph 类并通过读入这些数据来填充它的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T16:35:28.637

You can split file to groups of lines. Each group describes node. And then parse all groups.

```
Map<Node, List<Node>> neighbors;
Map<String, Node> nodeByCoords;

// Get node by it's coordinates. Create new node, if it doesn't exist.
Node getNode(String coords) {
    String[] crds = coords.split(" ");
    int x = Integer.parseInt(crds[0]);
    int y = Integer.parseInt(crds[1]);
    String key = x + " " + y;
    if (!nodeByCoords.containsKey(key)) {
        Node node = new Node();
        node.setX(x);
        node.setY(y);
        nodeByCoords.put(key, node);
        neighbords.put(node, new ArrayList<Node>());
    }
    return nodeByCoords.get(key);
}

// Create node (if not exists) and add neighbors.
void List<String> readNode(List<String> description) {
    Node node = getNode(description.get(1));
    node.setName(description.get(0));

    for (int i = 2; i < description.size(); i++) {
        Node neighbor = getNode(description.get(i));
        neighbors.get(node).add(neighbor);
    }
}

// Splits lines to groups. Each group describes particular node.
List<List<String>> splitLinesByGroups (String filename) {
    BufferedReader reader = new BufferedReader(new FileReader(filename));
    List<List<String>> groups = new ArrayList<List<String>>();
    List<String> group = new ArrayList<String>();
    while (reader.ready()) {
        String line = reader.readLine();
        if (Character.isLetter(line.charAt())) {
            groups.add(group);
            group = new ArrayList<String>();
        }
        group.add(line);
    }
    groups.add(group);
    return groups;
}

// Read file, split it to groups and read nodes from groups.
void readGraph(String filename) {
    List<List<String>> groups = splitLineByGroups(filename);
    for (List<String> group: groups) {
        readNode(group);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T16:22:54.570

我认为没有必要以某种方式存储节点来确定路径是否合法：您可以在读取它们时检查下一个节点的合法性。下一个节点是合法的当且仅当它的坐标与之前的坐标相差不超过 1。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-08T16:41:35.407

您可能要考虑使用[JGraphT](http://jgrapht.org/)

您可以只创建一个实例[`SimpleGraph`](http://www.jgrapht.org/javadoc/org/jgrapht/graph/SimpleGraph.html)并用节点和边填充它：

```
// Define your node, override 'equals' and 'hashCode'
public class Node {

  public int x, y;

  Node (int _x, int _y) {
    x = _x;
    y = _y;
  }

  @Override public boolean equals (Object other) {
    if ( (other.x == x)
         && (other.y == y))
      return true;

    return false;
  }

  /* Override hashCode also */
}

// Later on, you just add edges and vertices to your graph
SimpleGraph<Node,Edge> sg;
sg.addEdge (...);
sg.addVertex (...); 
```

最后，您可以使用[`DijkstraShortestPath`](http://www.jgrapht.org/javadoc/org/jgrapht/alg/DijkstraShortestPath.html)来查找路径是否存在：

# iphone - 在 iOS iPad 应用程序中遇到 Localizable.strings 问题

> ID：10064250
> 
> 赞同：0
> 
> 时间：2012-04-08T16:09:18.753
> 
> 标签：iphone, objective-c, xcode, ipad, localization

这是我第一次尝试使用 Localizable.strings 文件将一些本地化添加到应用程序中，但我遇到了一个意想不到的问题。为了清楚起见，这些是我经历的步骤。

1.  File >> New >> New File 并添加了 Strings 类型的 Resources 文件。

2.  将文件命名为“Localizable.strings”

3.  单击 Localizable.strings 文件并通过 Localization 部分添加西班牙语。（我已经在我的项目文件夹中确认我有 en 和 es 文件夹）。

4.  开始在 Localizable.strings（英语）文件中添加我的 KEYS，然后将西班牙语翻译添加到西班牙语文件中。

例如，这是我尝试添加的本地化之一。

```
"CAMERA_ERROR" = "The device does not have a camera"; 
```

我在西班牙语 .strings 文件中添加了完全相同的字符串，但更改了文本以适应西班牙语。在我的应用程序代码中，我使用以下内容：

```
NSString *cameraError = NSLocalizedString(@"CAMERA_ERROR", nil); 
```

到目前为止一切似乎都很好，但这就是它变得奇怪的地方，我感到困惑。如果我在其中一台 iMac 上运行该应用程序，它可以正常工作，并且取决于我将模拟器设置为哪种语言，它会显示正确的英语或西班牙语字符串。

但是，当我在这台 MacBook Pro 上运行完全相同的应用程序时，它不会显示字符串，而是采用“KEY”标题并显示它。因此，不是将消息显示为“设备没有摄像头”，而是将其显示为“CAMERA_ERROR”。该代码与从 git repo 克隆的同一个项目完全相同。

任何人都可以对此有所了解吗？MacBook上的任何设置可能会有所不同？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-08T16:45:00.580

尝试在 MacBook Pro 上执行以下操作：

1.  清理项目；

2.  从模拟器/设备中删除应用程序；

3.  重建应用程序。

这应该解决它。

# c# - 文件保护

> ID：10064251
> 
> 赞同：1
> 
> 时间：2012-04-08T16:09:36.430
> 
> 标签：c#, encryption

我正在用 C# 开发一个软件。当用户单击图标时，在用户仪表板上会有我们应用程序的一些图标，应用程序（exe 文件）将从我们的服务器下载并存储在用户计算机的某个位置。我想让这个应用程序（exe文件）只能从这个软件执行，而不是通过文件系统直接访问。他们是否有任何解决方案，以便用户只能通过软件执行应用程序而不是直接访问它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-08T16:14:06.310

不，这完全不可能*。不管你的加密有多好，不管你的程序有多模糊，人们都会恢复密钥并破解它。更不用说要执行代码，计算机必须拥有未加密代码的副本。当有副本时，可以轻松制作另一个副本。不要打扰。

[* 你能得到的最接近它的可能是实现一种全新的语言并在你的虚拟机中运行它，这被严重混淆了。然而，众所周知，不存在不可逆转的混淆。此外，这会非常慢，因为您永远无法编译它，因为害怕从内存中恢复内容，并且您必须创建一个新的编译器，因为与本机代码的任何相似之处都会使其变得微不足道。]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T16:16:19.570

好问题。您可以通过包装器将程序集解密到内存，包装器在验证许可证后从服务器获取密钥，然后包装器将创建域并在其中执行该程序集。为了避免调试软件，您可以使用来自 codeplex/com 的 Confuser

# ruby-on-rails - 回形针和亚马逊 S3。样式图像无法显示，只能下载。原图为空白

> ID：10064252
> 
> 赞同：0
> 
> 时间：2012-04-08T16:09:49.027
> 
> 标签：ruby-on-rails, amazon-s3, paperclip

回形针、s3 和 imagemagick 有一些奇怪的问题。

正常大小的图像将强制下载图像。

[http://ads_honours_development.s3.amazonaws.com/assets/adverts/10/normal.jpg?1333899985](http://ads_honours_development.s3.amazonaws.com/assets/adverts/10/normal.jpg?1333899985)

同时原始图像是空白的。

[http://ads_honours_development.s3.amazonaws.com/assets/adverts/10/original.jpg?1333899985](http://ads_honours_development.s3.amazonaws.com/assets/adverts/10/original.jpg?1333899985)

这是模型。

```
class Advert < ActiveRecord::Base

belongs_to :group

 #paperclip

 has_attached_file :photo, {
:styles => { :large => "512x512", :normal => "360x360", :small => "200x200", :tiny => "64x64", :thumbnail => "32x32" },
:convert_options => { :large => "-quality 86" },
:default_url => "/images/thumbnail/blank-recipe.png",
:url => ':s3_domain_url',
:path => 'assets/:class/:id/:style.:extension',
:storage => :s3,
:s3_credentials => "#{Rails.root}/config/s3.yml",
:s3_permissions => 'public-read',
:s3_protocol => 'http'}

validates_attachment_presence :photo
end 
```

宝石文件是这样的：

```
gem 'aws-sdk'
gem 'paperclip', '~> 2.0' 
```

我无法弄清楚我在这里做错了什么。有什么帮助/建议吗？

**更新**我也在heroku上运行了这个，并且发生了完全相同的问题，所以这不取决于我的开发机器设置。我猜问题出在 Paperclip 本身、我的存储桶设置或亚马逊 aws-sdk gem 上。

**第二次更新**好的，所以所有这些图像都在 IE 中加载，但不是 Chrome。是什么赋予了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T23:08:46.467

也许你有一个在 chrome 上运行的扩展程序阻止了图像？该链接仅在禁用广告屏蔽的情况下在 Chrome 中为我显示。

# postgresql - 'service postgresql start' 无法在 Fedora 上启动 postgres 服务

> ID：10064254
> 
> 赞同：5
> 
> 时间：2012-04-08T16:10:04.673
> 
> 标签：postgresql

这里是 postgres 的新手！

[我编辑了这里](https://wiki.duraspace.org/display/DSPACE/PostgresqlConfiguration)提到的 pg_hba.conf ，但是当我尝试重新启动 postgresql 服务时，尝试失败。以下是命令行输出，其中包含我可以收集的所有信息。

```
[root@arunpc modules]# service postgresql restart
Redirecting to /bin/systemctl  restart postgresql.service
Job failed. See system logs and 'systemctl status' for details.
[root@arunpc modules]# systemctl status postgresql.service
postgresql.service - PostgreSQL database server
      Loaded: loaded (/lib/systemd/system/postgresql.service; enabled)
      Active: failed since Sun, 08 Apr 2012 21:29:06 +0530; 14s ago
     Process: 12228 ExecStop=/usr/bin/pg_ctl stop -D ${PGDATA} -s -m fast (code=exited, status=0/SUCCESS)
     Process: 12677 ExecStart=/usr/bin/pg_ctl start -D ${PGDATA} -s -o -p ${PGPORT} -w -t 300 (code=exited, status=1/FAILURE)
     Process: 12672 ExecStartPre=/usr/bin/postgresql-check-db-dir ${PGDATA} (code=exited, status=0/SUCCESS)
    Main PID: 12184 (code=exited, status=0/SUCCESS)
      CGroup: name=systemd:/system/postgresql.service
[root@arunpc modules]# tail /var/log/messages
....
Apr  8 21:29:06 arunpc systemd[1]: postgresql.service: control process exited, code=exited status=1
Apr  8 21:29:06 arunpc systemd[1]: Unit postgresql.service entered failed state.
Apr  8 21:29:06 arunpc pg_ctl[12677]: pg_ctl: could not start server
Apr  8 21:29:06 arunpc pg_ctl[12677]: Examine the log output. 
```

FWIW，这是使用的配置文件（pg_hba.conf）：

```
# TYPE  DATABASE        USER            ADDRESS                 METHOD

# "local" is for Unix domain socket connections only
local   all             postgres                                ident sameuser
local   all             all                                     ident sameuser
# IPv4 local connections:
host    all             all             127.0.0.1               password
# IPv6 local connections:
host    all             all             ::1                     password 
```

这里可能是什么错误？在我进行编辑之前它曾经工作得很好（因为这是一台开发机器，所以我没有做任何备份）。

我还想获得更详细的日志输出。/var/log/messages 文件中的日志消息确实要求我“检查日志输出” - 这是哪个日志输出？我还可以采取哪些其他故障排除步骤？

提前谢谢了！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-08T16:43:22.187

根据您的启动脚本，它可能会将 postmaster 的输出重定向到一个文件。这通常是 PGDATA 目录中的 server.log。我会尝试的事情：

*   注释掉 pg_hba.conf 中的所有内容并重试。如果问题是该文件中的语法错误，则注释掉有问题的行将允许服务器启动，然后您将能够一次取消注释一个，直到找到错误为止。

*   直接从 shell 启动 postmaster 而不将其发送到后台。只需运行`postmaster -D <pgdata dir>`，它应该会吐出一些更有帮助的日志。

# c# - 是否有任何可能的方法让一个对象和一个对象数组具有相同的名称和相同的类定义？

> ID：10064258
> 
> 赞同：0
> 
> 时间：2012-04-08T16:11:22.160
> 
> 标签：c#, c#-4.0

我正在从动态更新的 json 中检索数据。它有时包含一个 X 类型的对象，有时还包含一个 X 类型的对象数组。我需要一个可以在上述任何情况下工作的父类 Y。并且对象名称： x 保持不变。

```
class Y
{
    public X x { get; set; }
    public X[] x { get; set; }
}
class X
{
    public int a { get; set; }
} 
```

这显示了一个错误：类型 Y 已经包含 x 的定义
有没有可能的方法来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T16:30:12.933

C# 规范说，一个类型的成员必须有一个唯一的名称（我假设这是为了防止不明确的成员引用）。请参阅[http://msdn.microsoft.com/en-us/library/aa691137(v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/aa691137(v=vs.71).aspx)，具体来说：

> **因为命名空间或类型的每个成员都必须有一个唯一的名称**，所以命名空间或类型的完全限定名称始终是唯一的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T16:18:34.663

您收到错误的原因是 C# 不允许具有相同名称的两种类型的变量。

你不能声明

```
SomeMethod()
{
    int x = 0;
    string x = "something";
} 
```

如果我是你，我可能会做以下事情。

```
 class Y
{
   public List<X> listOfX{get; set;}
}
class X
{
    public int a { get; set; }
} 
```

你可以有一个清单。如果只有一个元素，则存在大小为 1 的元素的列表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-08T16:31:52.853

如果您需要名为 x 的属性一次返回 X 类型的单个值，而另一次返回 X 数组，则可以使用 dynamic 关键字。

```
class Y
{
    public dynamic x { get { return IfMonday() ? new X() : new X[100]; set; }
} 
```

# python - 在 Python 类中的装饰器函数中访问 self

> ID：10064259
> 
> 赞同：2
> 
> 时间：2012-04-08T16:11:40.067
> 
> 标签：python, scope, decorator

我有一个装饰器函数，我将其应用于类中的函数。装饰器应该对`_api`成员变量进行检查。但是，`global name 'self' is not defined`当我尝试执行此操作时出现错误。什么是正确的方法？

```
def requires_api(fn):
    def wrapped(*args, **kwargs):
        if self._api is not None:
            return fn(*args, **kwargs)
        else:
            return None
    return wrapped

@requires_api       
def do_something(self):
... 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-08T16:13:39.300

对您的实例的引用在您的包装函数中`*args`，因此该名称`self`不可用。使用`args[0]`，或将其重写为：

```
def wrapper(self, *args, **kwargs):
    # ... 
```

自然，如果您这样做，您对包装函数的调用也应该包括`self`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T16:19:08.313

改变

```
if self._api is not None: 
```

至

```
if hasattr(args[0], '_api'): 
```

`args[0]`有`self`。 [`hasattr`](http://docs.python.org/library/functions.html#hasattr)是检查属性的正确方法。

如果您尝试访问不存在的属性（如果`self._api`不存在），您将生成一个`AttributeError`.

# jquery - jQuery Sortable在拖动时获取光标坐标

> ID：10064261
> 
> 赞同：1
> 
> 时间：2012-04-08T16:11:52.883
> 
> 标签：jquery, jquery-ui-sortable

使用 jQuery Sortable 拖动时是否可以获取光标坐标？

我有一个具有精确间隔滚动的可滚动 div。当用户拖动靠近滚动 div 底部的元素时，我想向下滚动 80 像素，或者如果靠近顶部则向上滚动。

```
$(allIds).sortable({
    connectWith: ".allLists",
    zIndex: 2,
    cursorAt: function(e) {
        if(e.top < 80) {
            myScrollFunction('up');
        }
        if(e.top > 500) {
            myScrollFunction('down');
        }
    }
}).disableSelection(); 
```

上面的代码应该有希望让您了解我想要实现的目标。也许我想要实现的目标会与内置的可排序滚动功能冲突？

**编辑：**我认为 cursorAt 是错误的选择。我需要一个“移动”选项来添加一个功能。或者类似的东西......

```
$(allIds).sortable({
    connectWith: ".allLists",
    zIndex: 2
}, function(e) {
    if(e.position().top < 80) {
        myScrollFunction('up');
    }
    if(e.position().top > 500) {
        myScrollFunction('down');
    }
}).disableSelection(); 
```

但是，如果这有效，它可能只会在可排序事件完成*后触发，这是无用的。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T05:47:04.043

为了回答我自己的问题，我就是这样做的..

在可滚动的 div 上创建了一个 mousemove 事件侦听器，与可排序函数分开

在 sortable 函数中，我使用 start: 和 stop: 来切换全局变量的真或假

然后，每当鼠标在可滚动的 div 内移动时，它都会检查拖动是否为真，这会触发 myScrollFunction()。

```
var dragging = false;

var dragScroll = function() {
    $("#scrollableDiv").mousemove(function(e) {
        if(dragging) {
            if((e.pageY-$(this).offset().top)<80) {
                myScrollFunction('up');
            }
            if((e.pageY-$(this).offset().top)>500) {
                myScrollFunction('down');
            }
        }
    });
};

$(allIds).sortable({
    start: function() { dragging = true; },
    stop: function() { dragging = false; },
    connectWith: ".allLists",
    zIndex: 2
}).disableSelection(); 
```

但是，这解决了我的问题，现在在 div 滚动之后，我无法将该项目放在其他出现的列表中。无论如何，我将把它作为一个单独的问题进行检查。

# ios - 在 Iphone 中读取 XML 文件

> ID：10064262
> 
> 赞同：0
> 
> 时间：2012-04-08T16:12:05.947
> 
> 标签：ios, objective-c, xml

我是 Iphone 新手，我知道有很多可用的教程，我也搜索了很多，但仍然无法读取以下 XML 文件。希望你能帮助我。我想阅读以下内容。1\. ViewCounts 2\. Media:Thumbnail 3\. Media:Title 4\. NumRates 5\. Duration

提前致谢。

```
<?xml version="1.0" ?>
<feed xmlns="http://www.w3.org/2005/Atom" xmlns:gd="http://schemas.google.com/g/2005" xmlns:media="http://search.yahoo.com/mrss/" xmlns:openSearch="http://a9.com/-/spec/opensearchrss/1.0/" xmlns:yt="http://gdata.youtube.com/schemas/2007">
  <id>
    http://gdata.youtube.com/feeds/api/videos
  </id>
  <updated>
    2012-04-08T15:09:04.640Z
  </updated>
  <category scheme="http://schemas.google.com/g/2005#kind" term="http://gdata.youtube.com/schemas/2007#video"/>
  <title type="text">
    YouTube Videos matching query: pakistan
  </title>
  <logo>
    http://www.youtube.com/img/pic_youtubelogo_123x63.gif
  </logo>
  <link href="http://www.youtube.com" rel="alternate" type="text/html"/>
  <link href="http://gdata.youtube.com/feeds/api/videos" rel="http://schemas.google.com/g/2005#feed" type="application/atom+xml"/>
  <link href="http://gdata.youtube.com/feeds/api/videos/batch" rel="http://schemas.google.com/g/2005#batch" type="application/atom+xml"/>
  <link href="http://gdata.youtube.com/feeds/api/videos?alt=atom&start-index=1&max-results=1&vq=pakistan&orderby=relevance" rel="self" type="application/atom+xml"/>
  <link href="http://gdata.youtube.com/feeds/api/videos?alt=atom&start-index=2&max-results=1&vq=pakistan&orderby=relevance" rel="next" type="application/atom+xml"/>
  <author>
    <name>
      YouTube
    </name>
    <uri>
      http://www.youtube.com/
    </uri>
  </author>
  <generator uri="http://gdata.youtube.com" version="2.1">
    YouTube data API
  </generator>
  <openSearch:totalResults>
    1000000
  </openSearch:totalResults>
  <openSearch:startIndex>
    1
  </openSearch:startIndex>
  <openSearch:itemsPerPage>
    1
  </openSearch:itemsPerPage>
  <entry>
    <id>
      http://gdata.youtube.com/feeds/api/videos/QP9K2YeO6kE
    </id>
    <published>
      2012-04-08T05:51:35.000Z
    </published>
    <updated>
      2012-04-08T14:18:21.000Z
    </updated>
    <category scheme="http://schemas.google.com/g/2005#kind" term="http://gdata.youtube.com/schemas/2007#video"/>
    <category label="News & Politics" scheme="http://gdata.youtube.com/schemas/2007/categories.cat" term="News"/>
    <category scheme="http://gdata.youtube.com/schemas/2007/keywords.cat" term="Pakistan"/>
    <category scheme="http://gdata.youtube.com/schemas/2007/keywords.cat" term="Avalanche"/>
    <title type="text">
      Avalanche Buries More Than 100 Pakistani Troops
    </title>
    <content type="text">
      Pakistani soldiers dug into a massive avalanche in a mountain battleground close to the Indian border on Saturday, searching for at least 135 people buried when the wall of snow engulfed a military complex. (April 7)
    </content>
    <link href="http://www.youtube.com/watch?v=QP9K2YeO6kE&feature=youtube_gdata" rel="alternate" type="text/html"/>
    <link href="http://gdata.youtube.com/feeds/api/videos/QP9K2YeO6kE/responses" rel="http://gdata.youtube.com/schemas/2007#video.responses" type="application/atom+xml"/>
    <link href="http://gdata.youtube.com/feeds/api/videos/QP9K2YeO6kE/related" rel="http://gdata.youtube.com/schemas/2007#video.related" type="application/atom+xml"/>
    <link href="http://m.youtube.com/details?v=QP9K2YeO6kE" rel="http://gdata.youtube.com/schemas/2007#mobile" type="text/html"/>
    <link href="http://gdata.youtube.com/feeds/api/videos/QP9K2YeO6kE" rel="self" type="application/atom+xml"/>
    <author>
      <name>
        AssociatedPress
      </name>
      <uri>
        http://gdata.youtube.com/feeds/api/users/AssociatedPress
      </uri>
    </author>
    <gd:comments>
      <gd:feedLink countHint="55" href="http://gdata.youtube.com/feeds/api/videos/QP9K2YeO6kE/comments" rel="http://gdata.youtube.com/schemas/2007#comments"/>
    </gd:comments>
    <yt:location>
      New York, NY
    </yt:location>
    <media:group>
      <media:category label="News & Politics" scheme="http://gdata.youtube.com/schemas/2007/categories.cat">
        News
      </media:category>
      <media:content duration="53" expression="full" isDefault="true" medium="video" type="application/x-shockwave-flash" url="http://www.youtube.com/v/QP9K2YeO6kE?version=3&f=videos&app=youtube_gdata" yt:format="5"/>
      <media:content duration="53" expression="full" medium="video" type="video/3gpp" url="rtsp://v6.cache4.c.youtube.com/CiILENy73wIaGQlB6o6H2Ur_QBMYDSANFEgGUgZ2aWRlb3MM/0/0/0/video.3gp" yt:format="1"/>
      <media:content duration="53" expression="full" medium="video" type="video/3gpp" url="rtsp://v4.cache8.c.youtube.com/CiILENy73wIaGQlB6o6H2Ur_QBMYESARFEgGUgZ2aWRlb3MM/0/0/0/video.3gp" yt:format="6"/>
      <media:description type="plain">
        Pakistani soldiers dug into a massive avalanche in a mountain battleground close to the Indian border on Saturday, searching for at least 135 people buried when the wall of snow engulfed a military complex. (April 7)
      </media:description>
      <media:keywords>
        Pakistan, Avalanche
      </media:keywords>
      <media:player url="http://www.youtube.com/watch?v=QP9K2YeO6kE&feature=youtube_gdata_player"/>
      <media:thumbnail height="360" time="00:00:26.500" url="http://i.ytimg.com/vi/QP9K2YeO6kE/0.jpg" width="480"/>
      <media:thumbnail height="90" time="00:00:13.250" url="http://i.ytimg.com/vi/QP9K2YeO6kE/1.jpg" width="120"/>
      <media:thumbnail height="90" time="00:00:26.500" url="http://i.ytimg.com/vi/QP9K2YeO6kE/2.jpg" width="120"/>
      <media:thumbnail height="90" time="00:00:39.750" url="http://i.ytimg.com/vi/QP9K2YeO6kE/3.jpg" width="120"/>
      <media:title type="plain">
        Avalanche Buries More Than 100 Pakistani Troops
      </media:title>
      <yt:duration seconds="53"/>
    </media:group>
    <gd:rating average="4.7647057" max="5" min="1" numRaters="17" rel="http://schemas.google.com/g/2005#overall"/>
    <yt:recorded>
      2012-04-08
    </yt:recorded>
    <yt:statistics favoriteCount="4" viewCount="662"/>
  </entry>
</feed> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-08T16:20:16.043

你可能想要[`NSXMLParser`](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSXMLParser_Class/Reference/Reference.html)

* * *

# 使用 NSXMLParser

重要的是要记住 NSXMLParser 只是按顺序读取你给它的数据，它不使用 DOM 结构。

## 设置

主要是你需要给你的解析器一些东西来解析！在我的示例中，我从包中获取资源并将其转换为 NSData。然而，还有另一种选择`initWithContentsOfURL`。确保您不要忘记设置您的委托！

```
-(void) parse
{
    NSString *file = @"myXMLFile.xml";
    NSData *data = [NSData dataWithContentsOfFile:[[NSBundle mainBundle] pathForResource:[file stringByDeletingPathExtension] ofType:[file pathExtension]]];
    //If you already have a string:
    //NSData* data=[xmlString dataUsingEncoding:NSUTF8StringEncoding];
    if (data.length == 0)
    {
        //No data
        return nil;
    }

    ...
}

NSXMLParser *parser = [[NSXMLParser alloc] initWithData:data];
parser.delegate = self;
[parser parse]; 
```

## 解析

```
-(void) parserDidStartDocument:(NSXMLParser *)parser
{
   //Here you set up any variables you might need while parsing
}

-(void) parserDidEndDocument:(NSXMLParser *)parser
{
   //I usually don't have to do anything here but you might need to release some variables here for example.
}

-(void) parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName attributes:(NSDictionary *)attributeDict
{
    //Here is where the bulk of the parsing is done if you are using attributes. I prefer to use attributes as it looks cleaner both in the XML file and the parser.
    if ([elementName isEqualToString:@"element1"])
    {
        //Just an example of what you might want to do
        int index = [[attributeDict valueForKey:@"attribute1"] intValue];
        NSString *name = [attributeDict valueForKey:@"n"];
        [exampleDictionary setValue:name forKey:[NSString stringWithFormat:@"%d", index]];
    }
    if ([elementName isEqualToString:@"element2"])
    {
        //We need to know that the next piece of information (from foundCharacters) is for element 2
        currentElement = ELEMENT_2;
    }

}

//If you haven't used attributes you might find that you have a lot of parsing to do here instead.
-(void) parser:(NSXMLParser *)parser foundCharacters:(NSString *)string
{ 
    //Check what this info is for?
    if(currentElement == ELEMENT_2)
    {
        element2Data = [NSString stringWithString:string];
    }
}

-(void) parser:(NSXMLParser *)parser didEndElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName
{    
    if ([elementName isEqualToString:@"element2"])
    {
        myObject.somethingThatNeedsElement2 = element2;
    }
} 
```

## 精加工

完成后最好检查一下是否没有出错并释放解析器内存。因此，在您的`parse`方法中，在调用`[parser parse]`.

```
if ([parser parserError] != nil)
{
    [[[[UIAlertView alloc] initWithTitle:@"Error parsing XML" message:[[parser parserError] localizedDescription] delegate:nil cancelButtonTitle:@"Done" otherButtonTitles:nil] autorelease] show];
}
[parser release]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T16:32:11.790

另一种选择是使用**GDataXmlParser**（在谷歌上搜索，准备好的文件）。你只需要传递标签，它就会返回你的字典。

# visual-studio-lightswitch - 在 LightSwitch 中，如何从表中填充查询参数的选择列表

> ID：10064263
> 
> 赞同：3
> 
> 时间：2012-04-08T16:12:16.723
> 
> 标签：visual-studio-lightswitch

在 VS LightSwitch 中，查询可以有参数。创建屏幕时，查询参数显示在屏幕上。可以定义选择列表，在这种情况下，该字段在屏幕上显示为下拉列表。

我如何从表中读取选择列表，而不是定义静态选择列表？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-10T16:44:01.547

我在这里找到了我的问题的答案：http: [//social.msdn.microsoft.com/Forums/en-US/lightswitch/thread/c69f23bd-4ccb-4bbf-847f-dc01e0baef07](http://social.msdn.microsoft.com/Forums/en-US/lightswitch/thread/c69f23bd-4ccb-4bbf-847f-dc01e0baef07)

> 不，选择列表是数据的静态列表。如果你想要一个动态的数据列表，你应该创建一个表并从你需要的任何地方添加一个关系。例如，这将允许您通过查询动态过滤它。

# ruby-on-rails - 如何告诉 Rails 停止使用 Rspec？

> ID：10064264
> 
> 赞同：1
> 
> 时间：2012-04-08T16:12:18.507
> 
> 标签：ruby-on-rails

如何反向[创建新的 Rails 应用程序时如何告诉 Rails 使用 RSpec 而不是 test-unit？](https://stackoverflow.com/questions/6728618/how-can-i-tell-rails-to-use-rspec-instead-of-test-unit-when-creating-a-new-rails)

我将它从 Gemfile 中删除，但是当我尝试生成集成测试时，它仍会尝试调用 rspec。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T17:28:16.457

1.  确保`bundle install`从 Gemfile 中删除后运行
2.  您的 config/application.rb 中是否有类似以下内容的内容：

配置/应用程序.rb

```
config.generators do |g|
  g.view_specs false
  g.helper_specs false
  g.test_framework :rspec
end 
```

或者：

```
config.generators.test_framework :rspec 
```

如果是这样，请删除这些。

# sql - 访问 SQL：从 VBD 执行的 Nz() 函数

> ID：10064269
> 
> 赞同：2
> 
> 时间：2012-04-08T16:12:53.010
> 
> 标签：sql, vb.net, ms-access

> **可能重复：**
> [在访问数据库中将 Null 转换为零](https://stackoverflow.com/questions/4705738/convert-null-to-zero-in-access-database)

我正在使用 Microsoft Visual Web Developer 2010 Express 创建 ASP/VB.NET 页面以连接 Microsoft Office Access 07。这是我的问题：

我有这个带有三个下拉列表的页面，用于过滤 DataTable，我有这个 Access SQL Query 在 Access 中工作得非常好，但是当我尝试从 VB.net 执行 sql 时，总是出现错误. “表达式中未定义的函数‘Nz’。”

我一直认为可能存在错误，但我仍然找不到解决方案。

VB.NET 代码：

```
Shared Function SelectFilterWomen(ByVal tTypeCode As Integer, ByVal bBrandCode As Integer, ByVal sSize As Integer) As DataTable
    Dim Command As New OleDbCommand()
    Command.CommandText = "QUERY;"
    Command.Connection = DB.Conn()
    Command.Parameters.AddWithValue("@tTypeCode", tTypeCode)
    Command.Parameters.AddWithValue("@bBrandCode", bBrandCode)
    Command.Parameters.AddWithValue("@sSize", sSize)
    Dim Table As New DataTable("FilterWomen Shoes")
    Table.Load(Command.ExecuteReader())
    Return Table 
```

询问：

```
SELECT S.sShoes_ID , S.sPicture, S.sSize , S.sPrice 
FROM ((Shoes S INNER JOIN Type T ON S.tTypeCode = T.tTypeCode)
INNER JOIN Brand B ON S.bBrandCode = B.bBrandCode) 
WHERE S.tTypeCode = Nz(@tTypeCode, T.tTypeCode) 
AND S.bBrandCode = Nz(@bBrandCode, B.bBrandCode) 
AND S.sSize = Nz(@sSize, S.sSize) 
AND S.sSex = 'Female' AND S.sActive = 'Y'; 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T19:09:30.793

**当且仅当**表达式服务可用时，Access 查询才能使用 VBA 函数（和用户定义的函数） 。表达式服务只能在 Access 应用程序实例中使用。

当您使用 OleDb 从 Dot.Net 连接到 Access 数据库文件时，您没有连接到 Access 应用程序实例（仅连接到其数据库引擎），因此表达式服务不可用。因此，您不能在查询中使用 VBA 或用户定义的函数。您仅限于那些由 db 引擎实现的功能。

因此，无论您尝试什么，任何包含 VBA`Nz()`函数的查询都会触发“ *Undefined function 'Nz' in expression* ”错误。Access 的数据库引擎不知道`Nz()`没有表达式服务的帮助。

寻找`Nz()`. 在许多情况下，[IIf 函数](http://office.microsoft.com/en-us/access-help/iif-function-HA001228853.aspx)可以是一个很好的替代品。

**语法**
IIf(expr, truepart, falsepart)

在查询中，您可以执行以下操作：

```
SELECT IIf([SomeField] Is Null, "unavailable", [SomeField])
FROM YourTable; 
```

如果您知道 VBA`IIf()`功能，这听起来可能很矛盾。但是， db 引擎包含其自己的实现，`IIf()`其运行方式与 VBA 不同`IIf()`。*当truepart*为 True 时，数据库引擎的`IIf()`“短路”因此在这种情况下不会评估*falsepart*；即使*truepart*为 True ， VBA也总是计算*truepart*和*falsepart 。***`IIf()`**

 **** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T17:13:25.180

使用`isnull`而不是`Nz`. Isnull 是 SQL 标准函数，`Nz`是 Access-only。***

# java - Swing 组件在离开键盘焦点时自行调整大小

> ID：10064284
> 
> 赞同：3
> 
> 时间：2012-04-08T16:14:53.060
> 
> 标签：java, swing

我的 gui 布局有两个问题。我使用 JTabbedPane 来容纳两个 JPanel，每个面板都有一个按钮和文本区域的选择，每个面板都使用 GridBagLayout 进行布局。在我的一个面板中，我有一个使用 JTextArea 的 JScrollPane。当我将任何内容附加到此文本区域然后单击 gui 使其不再具有焦点时，或者如果我更改选项卡，所有文本字段和文本的大小都会更改为尽可能小。

为了进一步说明我的问题，这里是我在附加到文本区域后单击 gui 之前和之后的图片： ![在我点击 gui 之前](../Images/aead4dfab46c3d4034da021b8f3a0b78.png)

![在我点击 gui 之后](../Images/497ca8523b49a828eb64de3f34edf424.png)

这是我用来将 JTextArea 添加到面板的代码：

```
table = new JTextArea();
    table.setEditable(false);
    JScrollPane sp = new JScrollPane(table);
    sp.setSize(40, 10);
    c.insets = new Insets(10,10,10,10);
    c.gridx = 1;
    c.gridwidth = 4;
    c.gridy = 7;
    c.gridheight = 7;
    this.add(sp, c); 
```

这是我用来将文本区域添加到面板的代码：

```
title = new JTextField(10);
    author = new JTextField(10);
    dueDate = new JTextField(10);
    setDate = new JTextField(10);
    setWeighting = new JTextField(10);

    c.gridx = 2;
    c.gridy = 1;
    this.add(title, c);//add title field
    c.gridx = 2;
    c.gridy = 2;
    this.add(author, c);//add author field
    c.gridx = 2;
    c.gridy = 3;
    this.add(dueDate, c);//add dueDate field
    c.gridx = 2;
    c.gridy = 4;
    this.add(setDate, c);//add setDate field
    c.gridx = 2;
    c.gridy = 5;
    this.add(setWeighting, c);//add set Weighting field 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-08T17:11:43.790

我能够像这样部分重现您的问题：

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

public class Foo002 {

   private static final int ROWS = 5;

   private static void createAndShowGui() {
      JPanel assignmentsPanel = new JPanel(new GridBagLayout());
      final JTextArea textarea = new JTextArea(ROWS, 20);

      GridBagConstraints c = new GridBagConstraints();
      int insetGap = 2;
      c.insets = new Insets(insetGap, insetGap, insetGap, insetGap);
      c.fill = GridBagConstraints.HORIZONTAL;
      c.gridwidth = 1;
      c.gridheight = 1;
      c.weightx = 1.0;
      c.weighty = 1.0;
      String[] labels = { "title", "author", "date due", "date set",
            "set weighting" };
      int row = 0;
      for (int i = 0; i < labels.length; i++) {
         JLabel label = new JLabel(labels[i], SwingConstants.CENTER);
         c.gridx = 0;
         c.gridy = i;
         assignmentsPanel.add(label, c);
         c.gridx = 1;
         JTextField textfield = new JTextField(10);
         assignmentsPanel.add(textfield, c);

         label.setPreferredSize(textfield.getPreferredSize());
         row++;
      }
      c.gridx = 0;
      c.gridy = row;
      c.fill = GridBagConstraints.HORIZONTAL;
      Action myAction = new AbstractAction("Fill Area") {

         @Override
         public void actionPerformed(ActionEvent arg0) {
            StringBuilder sb = new StringBuilder();
            for (int i = 0; i < 10; i++) {
               sb.append("foo bar bif baz spam\n");
            }
            textarea.setText(sb.toString());
         }
      };
      assignmentsPanel.add(new JButton(myAction), c);
      c.gridx = 1;
      assignmentsPanel.add(new JButton("Button 2"), c);
      row++;

      c.gridx = 0;
      c.gridy = row;
      c.gridwidth = 2;
      c.gridheight = ROWS;

      JScrollPane scrollpane = new JScrollPane(textarea);

      assignmentsPanel.add(scrollpane, c);

      JTabbedPane tabbedPanel = new JTabbedPane();
      tabbedPanel.add("Assignments", assignmentsPanel);
      tabbedPanel.add("Modules", new JPanel());

      JOptionPane.showMessageDialog(null, tabbedPanel, "Foo",
            JOptionPane.PLAIN_MESSAGE);

   }

   public static void main(String[] args) {
      SwingUtilities.invokeLater(new Runnable() {
         public void run() {
            createAndShowGui();
         }
      });
   }
} 
```

在向 JTextArea 添加文本之前和之后，它看起来像：
![在此处输入图像描述](../Images/029303d38d019996d601421eee1ea6c0.png) ![在此处输入图像描述](../Images/2df9f95fbcb64affe7a9e99ff27b07be.png)

点击标签后：
![在此处输入图像描述](../Images/d55c8ac92baaff2163885f4184d6b38f.png)

但是可以通过给 JScrollPane 一个垂直滚动条来修复它：

```
 // JScrollPane scrollpane = new JScrollPane(textarea);
  JScrollPane scrollpane = new JScrollPane(textarea,
        JScrollPane.VERTICAL_SCROLLBAR_ALWAYS,
        JScrollPane.HORIZONTAL_SCROLLBAR_NEVER); 
```

运行时看起来像：
![在此处输入图像描述](../Images/ff86cb98036896b14a11c86b2e4f92c8.png)

在 Mac OS 上看起来也不错：

![在此处输入图像描述](../Images/a44a5c5f6e159e550e4d085527fd9083.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T18:27:17.627

您可以尝试避免使用 Gridbag 并改用嵌套的 JPanel。我冒昧地创建了一个简短的示例：

```
public class LilrooPanel extends JPanel
{
    private static final int GAP = 5;

    public static void main(String[] args){
        JFrame main = new JFrame("Dims");
        JTabbedPane tabbed = new JTabbedPane(); 
        JPanel myPanel = new LilrooPanel();
        tabbed.add("Assignments", myPanel);
        tabbed.add("Modules", new JPanel());
        main.setContentPane(tabbed);
        main.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        main.setSize(400, 400);
        main.setLocationRelativeTo(null);
        main.setVisible(true);
    }

    public LilrooPanel(){
        super(new BorderLayout(0, GAP));
        setBorder(BorderFactory.createEmptyBorder(GAP, GAP, GAP, GAP));
        Box north = new Box(BoxLayout.Y_AXIS);

        north.add(new BorderPanel("Assignment Title", new JTextField()));
        north.add(Box.createRigidArea(new Dimension(0, GAP)));
        north.add(new BorderPanel("Author", new JTextField()));
        north.add(Box.createRigidArea(new Dimension(0, GAP)));
        north.add(new BorderPanel("Date Due", new JTextField()));
        north.add(Box.createRigidArea(new Dimension(0, GAP)));
        north.add(new BorderPanel("Date Set", new JTextField()));
        north.add(Box.createRigidArea(new Dimension(0, GAP)));
        north.add(new BorderPanel("Set Weighting", new JTextField()));
        north.add(Box.createRigidArea(new Dimension(0, GAP)));

        JPanel buttonsPanel = new JPanel();
        buttonsPanel.add(new JButton("Add Assignment"));
        buttonsPanel.add(new JButton("Remove Assignment"));
        north.add(buttonsPanel);

        add(north, BorderLayout.NORTH);

        add(new JScrollPane(new JTable(new Object[][]{}, new Object[]{"ModTitle", "ModId", "Assignments"})));
    }

    private static class BorderPanel extends JPanel
    {
        private static final Dimension LABELS_WIDTH = new Dimension(100, 0);

        public BorderPanel(String label, JComponent right){
            super(new BorderLayout(GAP, 0));
            JLabel jLabel = new JLabel(label);
            jLabel.setPreferredSize(LABELS_WIDTH);
            add(jLabel, BorderLayout.WEST);
            add(right);
        }
    }
} 
```

# ruby-on-rails-3 - 让 FreeTDS 在 Heroku Cedar Stack 上工作

> ID：10064288
> 
> 赞同：1
> 
> 时间：2012-04-08T16:15:36.157
> 
> 标签：ruby-on-rails-3, heroku, freetds, cedar

我正在尝试将我的 Rails 应用程序部署到 Heroku。

我正在使用 Postgres，但在我的 database.yml 中，我还添加了一个定义来访问远程 sql 服务器。

在我的 Gemfile 中：

```
gem 'tiny_tds', '0.5.1' 
```

在模型中：

```
establish_connection :my_sqlserver 
```

这在开发模式下效果很好，但是当我尝试部署到 Heroku 时出现错误消息：

```
[...]
   Installing tiny_tds (0.5.1) with native extensions
   Gem::Installer::ExtensionBuildError: ERROR: Failed to build gem native extension.
   /usr/local/bin/ruby extconf.rb
   checking for iconv_open() in iconv.h... yes
   checking for sybfront.h... no
   -----
   freetds is missing.
   -----
   *** extconf.rb failed ***
   Could not create Makefile due to some reason, probably lack of
   necessary libraries and/or headers.  Check the mkmf.log file for more
   details.  You may need configuration options.
[...] 
```

我找到了一个教程来让它工作，但它有点复杂的解决方案： [https ://github.com/rails-sqlserver/tiny_tds/issues/74](https://github.com/rails-sqlserver/tiny_tds/issues/74)

有什么想法让它工作吗？

非常感谢...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-25T02:03:09.607

我有同样的问题。

尝试安装freetds-devel。freetds-devel 包含在 rpmforge yum 存储库中。

# c++ - 在窗口区域上使用 UpdateLayeredWindow

> ID：10064290
> 
> 赞同：5
> 
> 时间：2012-04-08T16:16:11.030
> 
> 标签：c++, windows, winapi

我正在使用 UpdateLayeredWindow 创建一个分层窗口，并且我已经为子控件实现了绘图逻辑。我的问题是，每次 uI 发生变化时，都需要重新绘制整个框架。我想知道是否有办法只重绘窗口的特定 CRect 或 CRgn（即，将相关的 CDC 传递到 UpdateLayeredWindow，但指定要被 invlidated 的 CRect）。

使用 UpdateLayeredWindowIndirect 并将 UPDATELAYEREDWINDOWINFO 结构中的 prcDirty CRect 设置为控件的客户区域会导致仅更新该区域吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-08T17:51:32.647

和参数让您指定要更新的窗口部分`psize`。不使用失效模型。它使用更新模型。`pptSrc``UpdateLayeredWindow`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T17:31:27.077

“UpdateLayeredWindow 总是更新整个窗口。要更新窗口的一部分，请使用传统的 WM_PAINT 并使用 SetLayeredWindowAttributes 设置混合值。” - [http://msdn.microsoft.com/en-us/library/windows/desktop/ms633556(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms633556(v=vs.85).aspx)

请阅读文档。请放心。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-24T00:55:10.817

> 使用 UpdateLayeredWindowIndirect 并将 UPDATELAYEREDWINDOWINFO 结构中的 prcDirty CRect 设置为控件的客户区域会导致仅更新该区域吗？

是的。这正是它的作用。

# sql - 如何在单个查询中选择多个名称

> ID：10064294
> 
> 赞同：4
> 
> 时间：2012-04-08T16:17:07.007
> 
> 标签：sql

我有一个类似的 sql 查询

```
 select * 
 from users 
 where uname="ali" and uname="veli" 
```

但是我想做的是得到名字叫“ali”和“veli”的人，但是如果“ali”不存在而“veli”存在，则应该返回存在的人。我怎样才能做到这一点。这很容易查询，但我很困惑。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-08T16:20:21.090

试试这个：

```
 SELECT * 
 FROM users 
 WHERE uname IN ("ali", "veli") 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-08T16:21:30.910

你可以做：

```
select * from users where uname in ("ali", "veli") 
```

按照：

[http://www.w3schools.com/sql/sql_in.asp](http://www.w3schools.com/sql/sql_in.asp)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-04-08T16:21:57.970

您可以在 sql 中使用 OR 子句或 IN 子句。

前任：

```
SELECT * FROM users WHERE uname='ali' OR uname='veli' 
```

（或者）

```
SELECT * FROM users WHERE uname IN ('ali','veli'); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-04-08T16:19:32.103

name 不能同时是 ali 和 veli。您要做的是获取名称为 ali 或 veli 的用户，查询将如下所示：

```
select * from users where (uname="ali" or uname="veli") 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-04-08T16:22:46.787

如果您需要同时满足两个条件，请使用：
`select * from users where uname="ali" and uname="veli"`

如果您想要满足*任一*条件的记录，请使用：
`select * from users where uname="ali" or uname="veli"`

希望你明白了..！

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-04-08T16:36:44.770

您需要为 where 子句提供正确的逻辑。目前，您正在询问条目 uname 既是“ali”又是“veli”的记录，因为每一行只有一个 uname 条目，这将不会返回任何内容。此查询的正确逻辑是“OR”，因为它告诉您的 SQL 引擎查找 uname = 'ali' OR 'veli' 的所有行。您的查询最终将如下所示：

```
SELECT * FROM users WHERE uname='ali' OR uname='veli'; 
```

# java - 检查是否按下了shift键

> ID：10064296
> 
> 赞同：2
> 
> 时间：2012-04-08T16:17:08.650
> 
> 标签：java, keyboard, keyboardfocusmanager

我正在编写一个应用程序，它应该在启动时检查是否按下了 shift 键。为此，我创建了一个负责此的小类：

```
import java.awt.KeyEventDispatcher;
import java.awt.KeyboardFocusManager;
import java.awt.event.KeyEvent;

public class KeyboardListener {

    private static boolean isShiftDown;

    static {
        KeyboardFocusManager.getCurrentKeyboardFocusManager().addKeyEventDispatcher(
            new KeyEventDispatcher() {
                public boolean dispatchKeyEvent(KeyEvent e) {
                    isShiftDown = e.isShiftDown();
                    return false;
                }
            });
    }

    public static boolean isShiftDown() {
        return isShiftDown;
    }

} 
```

但是，如果在应用程序启动时已经按下了 shift 键，这似乎不起作用。以下检查始终执行 else 情况。

```
if (KeyboardListener.isShiftDown()) {
    // ...
} else {
    // this always gets executed
} 
```

如果在应用程序启动时已经按下了 shift 键，有没有办法检查它是否被按下？我知道使用 WinAPI 可以做到这一点，但我更喜欢 Javaish 的方式。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T16:44:05.060

我将其描述为 hack，但它确实解决了问题（有一些缺点），所以我想我会提到它作为一种可能性。

您可以使用`Robot`该类来模拟您的应用程序不关心的某个键的击键（可能是功能键之一）。注册后立即运行此代码`KeyListener`。您将看到一个关键事件，它会告诉您是否`Shift`已关闭。

*警告：*这将出现在系统中，就好像`F24`用户实际按下和释放了（或您选择的任何键）。这可能会产生意想不到的副作用。

```
 (new Thread( )
    {
        @Override
        public void run( )
        {
            try
            {
                java.awt.Robot robot = new Robot();
                robot.delay( 100 );
                robot.keyPress( KeyEvent.VK_F24 );
                robot.keyRelease( KeyEvent.VK_F24 );
            }
            catch ( Exception e )
            {
            }
        }
    }).start( ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T16:25:19.073

这似乎是不可能的，因为它要求应用程序轮询初始状态，这与 AWT/Swing 使用的事件模型相反。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-08T16:25:29.153

清理您的编码风格可能会有所帮助，我发现您的代码难以阅读。

您的程序可能不会侦听在程序按设计启动之前发生的转变，因为这种转变是发送给父程序而不是发送给它的。

# shift - DSP 的 FMODEx 音高偏移问题

> ID：10064300
> 
> 赞同：2
> 
> 时间：2012-04-08T16:17:55.630
> 
> 标签：shift, fmod, pitch

我在用 fmod 调整 pitch 时遇到问题。我可以用 channel::setfrequency 做到这一点，但我需要在更大的 sfx 上使用它，因此需要 DSP 的准确性 [没有节奏变化]。但是我似乎无法应用过滤器。

```
FMOD::DSP* dsp;
result = m_soundSystem->createDSPByType(FMOD_DSP_TYPE_PITCHSHIFT, &dsp);      
dsp->setParameter(0, 2.0f);
result = m_soundChannels[i]->addDSP(dsp, 0); 
```

那里什么也没发生。此代码在我的自定义播放功能中，并在我播放声音之前执行（我在 true 时加载暂停，然后进行更改）。这两个函数都不会向结果变量抛出任何错误。那怎么了？:S

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T15:56:58.480

尝试这个：

```
FMOD::DSP* dsp;
result = m_soundSystem->createDSPByType(FMOD_DSP_TYPE_PITCHSHIFT, &dsp);
result = m_soundChannels[i]->addDSP(dsp, 0);
dsp->setParameter(FMOD_DSP_PITCHSHIFT_PITCH, 2.0f); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T11:40:50.483

你提到上面的代码是在你播放声音之前执行的。您必须在 System::playSound 之后调用 Channel::addDSP，否则 FMOD::Channel 将无效。

# ruby-on-rails - 与搜索表单相关的 Rails 路线

> ID：10064303
> 
> 赞同：2
> 
> 时间：2012-04-08T16:18:33.220
> 
> 标签：ruby-on-rails, rails-routing

在我最新的网站上，我有一个这样定义的搜索表单：

```
= form_tag search_path(:termen), :method => :get do
  = text_field_tag :termen, params[:termen]
  = submit_tag "Search »" 
```

还有一条路线：

```
# search
get "search(/:termen)" => "articole#cauta", :as => :search 
```

我希望当我按下搜索按钮时可以访问如下网址：

```
http://www.mysite.com/search/[the_termn_that_was_typed] 
```

因此，例如，当我搜索“吸血鬼”时，我应该得到：

```
http://www.mysite.com/search/vampire 
```

这个有什么线索吗？

十分感谢，

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-09T10:02:55.753

我认为这样做的 RESTful 方式是对已发布的请求进行重定向，以获取具有您想要的构造 url 的请求。

这里有两条路线

```
resources :articles do
  collection do 
    get :search, :action => 'search_post', :as => 'search_post'
    get 'search/:q', :action => 'search', :as => 'search'
  end
end 
```

现在在控制器中，您将发布请求重定向到获取请求

```
def search_post
  redirect_to search_articles_path(params[:q])
end 
```

作为提交表单的结果，用户最终在 url 上

```
http://www.mysite.com/articles/search/vampire 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T18:56:09.280

我认为直接使用表单时无法解决这个问题，因为这就是提交参数的方式。不过，您可以使用一些 javascript 来完成。我会提供一个我觉得有点笨拙的解决方案，你可以决定它是否值得。

首先是js（使用jQuery）：

```
$(".search_submit").click(function(){
  var button     = $(this);
  var form       = button.closest("form");
  var action     = form.attr("action");
  var text_field = form.find(".search_text");
  var value      = text_field.val();

  window.location = action + "/" + value;
  return false;
}); 
```

然后您的视图代码只需要添加适当的类：

```
= form_tag search_path(:termen), :method => :get do
  = text_field_tag :termen, params[:termen], :class => "search_text"
  = submit_tag "Search »", :class => "search_submit" 
```

希望有帮助。

# php - Zend 框架调度前端控制器或运行 Zend 应用程序？

> ID：10064309
> 
> 赞同：0
> 
> 时间：2012-04-08T16:19:26.540
> 
> 标签：php, zend-framework, frameworks, bootstrapping

最近我开始使用 Zend Framework 进行开发。我正在使用 Zend Framework 1.11，因为 2.0 仍在开发中，我可以找到有关 1.11 的更多信息。

我已经学习了多个教程，并试图将它们结合起来用于我正在从事的项目。

问题是，我只是不太明白这一点。在一个教程中，引导文件初始化`Zend_Application`，然后引导它，然后运行它。

我正在关注的另一个教程是使用`Zend_Layout`MVC 并调度`Frontcontroller`.

对此的最佳做法是什么？我需要使用`Zend_Layout`和调度它并运行`Frontcontroller`/`Zend_application`给我完全相同的结果。

我试图寻找正确的答案，但我找不到它..

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T16:25:08.437

**Zend_Application**，当然你可以很容易地从 Frontcontroller 调度，但它是`old way`调度基于 ZF 的应用程序。

Zend_Application 是后来添加的，现在它是调度你的应用程序的最佳方式'因为引导程序及其资源:) 你仍然可以使用前端控制器的插件等。

Zend_Tool 可以为您创建项目并启用布局。感谢 Zend_Application，您可以从配置文件中完成所有操作 :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T16:23:31.577

最好的选择是使用 Zend_Application。您可以在配置文件中配置布局。

```
resources.layout.layoutPath = APPLICATION_PATH "/layouts/scripts/" 
```

[这是一个很好的教程来看看](http://akrabat.com/zend-framework-tutorial/)

# objective-c - 是否可以在 Xcode 4.3 中使用 NSArray、NSDictionary 和 NSNumber“文字”？(LLVM 4.0)

> ID：10064311
> 
> 赞同：5
> 
> 时间：2012-04-08T16:20:00.663
> 
> 标签：objective-c, xcode, llvm

显然，新的 Objective-C 文字已经进入了[clang trunk](http://llvm.org/viewvc/llvm-project/cfe/trunk/lib/?view=log&pathrev=152137)，从而揭开了任何 NDA 的阴暗面纱。

**我的问题**......我怎么能，*以上帝的名义*，在 Xcode ⋜ v4.3 中使用这些构造（见下文）。如果没有，并且我一直在等待 XCode 4.4 / OSX 10.8 / LLVM 4.0 三重奏，那么相同的功能是否可以通过一些巧妙的类别等方式被随意操纵？

（对于所有不知道的人……这些新语法意味着将有非常受欢迎的[额外构造来创建](http://joris.kluivers.nl/blog/2012/03/13/new-objectivec-literal-syntax/) `NSArray, NSDictionary, and NSNumber`。）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-15T02:55:21.253

我找到了一种非官方的方法来做到这一点……使用[github 上的 Lumumba 框架](https://github.com/Tharabas/Lumumba)，有一整套语法糖类别的工具包，具有以下定义……可以达到预期的效果。

```
#define $(...)        ((NSString *)[NSString  stringWithFormat:__VA_ARGS__,nil])
#define $array(...)   ((NSArray *)[NSArray arrayWithObjects:__VA_ARGS__,nil])
#define $set(...)     ((NSSet *)[NSSet setWithObjects:__VA_ARGS__,nil])
#define $map(...)     ((NSDictionary *)[NSDictionary dictionaryWithObjectsAndKeys:__VA_ARGS__,nil])
#define $int(A)       [NSNumber numberWithInt:(A)]
#define $ints(...)    [NSArray arrayWithInts:__VA_ARGS__,NSNotFound]
#define $float(A)     [NSNumber numberWithFloat:(A)]
#define $doubles(...) [NSArray arrayWithDoubles:__VA_ARGS__,MAXFLOAT]
#define $words(...)   [[@#__VA_ARGS__ splitByComma] trimmedStrings]
#define $concat(A,...) { A = [A arrayByAddingObjectsFromArray:((NSArray *)[NSArray arrayWithObjects:__VA_ARGS__,nil])]; } 
```

所以，基本上，而不是……</p>

```
NSArray *anArray = [NSArray arrayWithObjects:
    object, @"aWord", [NSNumber numberWithInt:7], nil]; 
```

只是……</p>

```
NSArray *anArray = $array(object, @"aWord", $int(7)); 
```

啊，简洁。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-08T19:13:05.273

抱歉，这只是 Xcode 4.4。

# c# - C# 中的任务并行库和 PLINQ 替代方案

> ID：10064312
> 
> 赞同：2
> 
> 时间：2012-04-08T16:20:11.470
> 
> 标签：c#, task-parallel-library, libraries, plinq, parallel-processing

我想知道在设计用于利用 C# 中的并行性的集合库方面，TPL 和 PLINQ 有哪些替代方案。

编辑：正如我所说的，我认为这个问题令人困惑。我正在寻找 PLINQ 以外的并行集合库。可能在 PLINQ 和 TPL 之上实现。我对纯函数库特别感兴趣。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T20:41:45.993

并行性总是涉及多个线程（或计算机！那是它们未涵盖的东西:)）来运行相同的任务。将一组输入值均分并启动多个线程非常容易，每个线程处理这些块中的一个。一个好处是能够从调用线程中读取结果/异常。这在 TPL 和 PLINQ 中都是可能的。

TPL 和 PLINQ 的好处是您不必考虑这些细节来使您的任务并行运行。在您的程序运行之后，您可以调整这些库处理输入和输出的方式，而您的代码几乎不需要任何更改。例如，您可能不想为每个线程提供相同数量的输入值，而是在每次完成一个块时为它们提供部分。

我真的不知道缺少什么，除非您不是真正追求真正的并行性。

# iphone - 如何在旋转时重新定位图层

> ID：10064315
> 
> 赞同：0
> 
> 时间：2012-04-08T16:20:34.833
> 
> 标签：iphone, objective-c, xcode, cocoa-touch, uitableview

我的 tableView 单元格有一个渐变层

```
CAGradientLayer *gradient = [CAGradientLayer layer];
    gradient.frame = cell.contentView.bounds;
    gradient.colors = 
    [NSArray arrayWithObjects:
     (id)[[UIColor colorWithRed:0.85 green:0.85 blue:0.85 alpha:1] CGColor],
     (id)[[UIColor colorWithRed:0.82 green:0.82 blue:0.82 alpha:1] CGColor], nil];
    [cell.contentView.layer insertSublayer:gradient atIndex:0]; 
```

其中，当旋转时明显保持在初始尺寸，直到我打电话

`tableview.reloadData`

我想知道是否有比这更复杂的方法。

NavigationController 也是如此，它在中心有一个图像，

```
UIImage *logo = [UIImage imageNamed:@"logo.png"];
UIImageView *logoimageview = 
[[UIImageView alloc] initWithFrame:
 CGRectMake(self.navigationController.navigationBar.bounds.size.width / 2 - logo.size.width / 2, 
            self.navigationController.navigationBar.bounds.size.height / 2 - logo.size.height / 2, 
            logo.size.width, logo.size.height)];

[logoimageview setImage:logo];

[self.navigationController.navigationBar addSubview:logoimageview]; 
```

所以图像不会在旋转时重新定位，我不知道导航栏有任何“刷新”方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T18:31:07.630

I have to warn you that I didn't test this, but I would expect it should work when you set the autoresizingMask. For the table view cell:

```
cell.contentView.autoresizingMask = UIViewAutoresizingFlexibleLeftMargin  | UIViewAutoresizingFlexibleRightMargin; 
```

For the logo image view:

```
logoimageview.autoresizingMask = UIViewAutoresizingFlexibleLeftMargin  | UIViewAutoresizingFlexibleRightMargin; 
```

# rsync - Rsync限制传输速度不起作用

> ID：10064316
> 
> 赞同：21
> 
> 时间：2012-04-08T16:20:44.147
> 
> 标签：rsync

我试图通过指定 --bwlimit 选项来限制 Rsync 使用的带宽，但它似乎不起作用。我不知道我是否做错了什么......：

最大可能的上传速度 = 10mbit/sec。我想将 rsync 限制在 50% 左右：

rsync 命令 =

```
[~] # rsync --version
rsync  version 3.0.7  protocol version 30

[~] # rsync -a --verbose --partial --bwlimit=500 -e 'ssh -p 2200 -i /share/ssh/id_dsa' admin@10.0.3.10:/share/MD0_DATA/ /share/LocalData 
```

结果 =

![交通](../Images/e6165ee3c5d531e57b796a21f2a153e8.png)

==================================================== ==============================

解决方案如下：

```
[~] # ipkg install trickle
Installing trickle (1.06-3) to root...
Downloading http://ipkg.nslu2-linux.org/feeds/optware/ts509/cross/unstable/trickle_1.06-3_i686.ipk
Installing libevent (2.0.16-1) to root...
Downloading http://ipkg.nslu2-linux.org/feeds/optware/ts509/cross/unstable/libevent_2.0.16-1_i686.ipk
Configuring libevent
Configuring trickle
Successfully terminated. 
[~] # trickle -d 500 rsync -a --verbose --partial -e 'ssh -p 2200 -i /share/ssh/id_dsa' admin@10.0.3.10:/share/MD0_DATA/ /share/LocalData
trickle: Could not reach trickled, working independently: No such file or directory
receiving incremental file list 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-04-09T08:11:53.157

--bwlimit=KBytes/s 应用移动平均值来限制产生的吞吐量，因此您只会注意到它对于比您的可用带宽大得多的传输。

从[手册](http://jimmyg.org/blog/2007/rsync-basics.html)页，

> 数据块被发送，然后如果 rsync 确定传输太快，它会在发送下一个数据块之前等待。结果是等于指定限制的平均传输速率。）

看看[涓涓细流](http://monkey.org/~marius/pages/?page=trickle)，它似乎采用了更精细的算法来体现这个概念。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-08T14:59:49.910

作为替代方案，我真的很喜欢`cstream` [http://www.cons.org/cracauer/cstream.html](http://www.cons.org/cracauer/cstream.html)。

> cstream 是一个通用的流处理工具，类似于 UNIX dd，通常用于命令行构造的管道

可能可以将它与 rsync 一起使用，没有经验。这是一个如何使用它的示例`tar`。

[http://www.commandlinefu.com/commands/view/2543/throttle-bandwidth-with-cstream](http://www.commandlinefu.com/commands/view/2543/throttle-bandwidth-with-cstream)

**TL;博士**

```
tar -cj /backup | cstream -t 777k | ssh host 'tar -xj -C /backup' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-06-27T17:27:03.277

限制选项 (-l) 在 中似乎可以正常工作`scp`，它使用与 rsync 几乎相同的语法，并且可以用作替代方案。

`scp -l 200 hugefile.tgz example.org:bigstuff/`

示例取自：[http ://betabug.ch/blogs/ch-athens/934](http://betabug.ch/blogs/ch-athens/934)

# sql-server - 我需要哪种钥匙？

> ID：10064323
> 
> 赞同：0
> 
> 时间：2012-04-08T16:22:06.557
> 
> 标签：sql-server, unique-key

我有一张桌子`Page`。此表中的每条记录都有一个主 ID。

现在，我有一张照片，其中有：

*   `id`对于每条记录。
*   `idPage`它指的是一个页面。

我需要表格中的一种键`Photos`：所以，当我在表格 Photo 上添加相同的记录时，`id`并`idPage`两次，它不会添加两次。

我知道在 MySql 中是`UNIQUE`关键。SQL Server 中有什么？我该如何创建它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T16:28:30.353

如果您的 id 是主键，则它必须已经是唯一的，并且您不能在多个页面上拥有同一张照片。您可能想要一个 PK 为 (idPhoto,idPage) 的联接表 PhotosPages，而不是将 idPage 直接存储在 Photos 表中。

或者，您可以在 (idPage,id) 上创建[唯一索引。](http://msdn.microsoft.com/en-us/library/ms187019.aspx)这可能是合适的，因为 idPage 是页面的外键，拥有索引肯定会加速您将执行的任何连接。[唯一约束](http://msdn.microsoft.com/en-us/library/ms191166.aspx)是另一种可能性，但我认为索引更有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T16:28:38.003

在您的 Photos 表上，将 id 和 idPage 一起用作复合键。这将防止重复。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-08T16:29:03.393

我认为您正在寻找[`CONSTRAINT UNIQUE`](http://msdn.microsoft.com/en-us/library/ms191166.aspx)，因为默认情况下主键`id`是唯一的，所以您只需要保留这两个组合`id`并`pageid`添加到`pageid`a `CONSTRAINT UNIQUE`。这相当于将`id`and`pageid`一起设置为*Composite key*。

# javascript - 如何解决这个最大高度 Javascript 问题或使用 CSS 来获得相同的结果？

> ID：10064324
> 
> 赞同：0
> 
> 时间：2012-04-08T16:22:19.927
> 
> 标签：javascript, css, interspire-shopping-cart

我正在使用 Interspire 购物车，common.js 中有一些代码可以控制“特色产品”等产品展示框的高度。它使所有元素都处于相同的高度。这让一切看起来都很好，但这似乎在 Firefox 中不起作用。产品显示在 Chrome 和 IE 中看起来很棒，但在 Firefox 上，盒子高度扩展到 4000+ 像素！更奇怪的是，有时如果我点击刷新按钮，它会修复并正确显示。我可以再次点击刷新，它又回到了混乱状态。现场测试人员也遇到了同样的问题。

![在此处输入图像描述](../Images/46a290091c32b36625dd95b9a5a5a6dd.png)

我删除了一些代码并在 CSS 文件中设置了框的高度，但是元素的高度都不同，并且显示看起来不太好。所以我把代码放回去了，我很难过。

我想我将不得不摆脱这段代码并尝试仅通过 CSS 实现相同的结果。这可能吗？我不确定如何做到这一点，以使所有元素相对于彼此处于相同的高度。

Interpsire 编码员发表的评论是，这段代码是“黑客工作”......

```
// Ensure that all product lists are the same height
function setProductListHeights(imgName, className) {
    // hack job putting this here but it needs to be reused by search ajax pager
    if (typeof(DesignMode) != 'undefined') {
        return;
    }

    if (typeof imgName != 'undefined') {
        if (typeof loadedImages[imgName] != 'undefined') {
            return;
        }

        loadedImages[imgName] = true;
    }

    setProductThumbHeight();
    /**
     * Sets the height of the elements passed in to match that of the one that
     * has the greatest height.
     *
     * @param ele The element(s) to adjust the height for.
     * @return void
     */
    function setHeight(ele) {
        var ele       = $(ele),
            maxHeight = 0;

        ele
            // reset the height just in case it was set by the stylesheet so
            // we can detect it
            .css('height', 'auto')
            // get the one with the greatest height
            .each(function() {
                if ($(this).height() > maxHeight) {
                    maxHeight = $(this).height();
                }
            })
            // and set them all to the greatest height
            .css('height', maxHeight);
    }

    if (!className) {
        className = '.Content';
    }

    setHeight(className + ' .ProductList:not(.List) li .ProductDetails');

    if (typeof imgName != 'undefined') {
        setHeight(className + ' .ProductList:not(.List) li .ProductPriceRating:has(img[src$='+imgName+'])');
    }

    setHeight(className + ' .ProductList:not(.List) li');
 } 
```

非常感谢！我一直在尝试解决这个问题，特别是对于我创建的一些自定义销售面板。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T16:43:56.617

我能看到的唯一潜在问题是：

.css('高度', maxHeight);

未指定测量单位，请尝试将测量单位附加到 maxHeight：

.css('height', maxHeight + 'px');

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-11T17:42:00.207

我设置了一个固定高度，但还引入了设置高度功能的变体，以防止添加到购物篮的链接被推离屏幕。

可能有一种更简洁的方法可以做到这一点，但我的时间很短。

```
function setHeight(ele) {
    var ele       = $(ele),
        maxHeight = 0;

    ele
        // reset the height just in case it was set by the stylesheet so
        // we can detect it
        .css('height', 'auto')
        // get the one with the greatest height
        /*
        .each(function() {
            if ($(this).height() > maxHeight) {
                maxHeight = $(this).height();
            }
        })
        */
        // and set them all to the greatest height
        //.css('height', maxHeight);
        // edited as was causing 700+ height in firefox
        .css('height', 250);
}

function setHeightProdDetails(ele) {
    //variant function added for speed to correct firefox height issue
    var ele       = $(ele),
        maxHeight = 0;

    ele
        // reset the height just in case it was set by the stylesheet so
        // we can detect it
        .css('height', 'auto')
        .css('height', 60);
}

setHeightProdDetails('.Content .ProductList:not(.List) li .ProductDetails');

if (typeof imgName != 'undefined') {
    setHeight('.Content .ProductList:not(.List) li .ProductPriceRating:has(img[src$='+imgName+'])');
}

setHeight('.Content .ProductList:not(.List) li'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T01:21:13.107

我最终将 .css('height', 'auto') 行的 'auto' 更改为 250。这看起来不错。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-11-21T14:41:50.290

这里同样的问题。我假设 Interspire 已经修复了这个问题，而我的客户使用的是旧版本。我尝试了建议的对高度大小进行硬编码的解决方案，但后来我丢失了产品下的“添加到购物车”链接 - 我认为因为这个函数被调用了许多对象集，并且早期的集合需要比后面的小那些。

我很确定问题是时间问题，因为当我通过使用 FF Developer 工具跟踪它时（当 maxHeight 超过 300 时，有条件断点停止）我无法重现故障。我似乎持有的解决方案是在进行比较之前检查我是否有一个有效的数字，并且为了更好地衡量，对大小设置一个上限：

```
if (typeof ($(this).height()) == "number" && $(this).height() > maxHeight) {
  if ($(this).height() < 300 ) {
    maxHeight = $(this).height();
  }
} 
```

# php - 当你给一个需要字符串的 PHP 函数提供 NULL 时会发生什么？

> ID：10064329
> 
> 赞同：-3
> 
> 时间：2012-04-08T16:23:19.177
> 
> 标签：php

例如：`preg_match`或者当你使用连接时？

回复评论：

我可以测试`preg_match`或连接结果，是的。

但两者之间有区别：

带有签名的 PHP 函数：`int f(string $parameter)`

*   PHP 是否会在函数获取**之前**将 NULL 转换为空字符串`f`，或者
*   `f`即使签名需要字符串，该函数是否会变为 NULL，因此该函数可能会抛出异常或行为不像接收到空字符串那样。

（我无法对此进行测试，因为我无法`string`在函数签名处为参数编写类型。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-08T16:26:57.537

这取决于您使用的功能。有些可能支持 null 作为参数，有些则不支持。有些人可能会抛出通知，但不要忘记 null 可能会转换为“”（空字符串）

# ruby-on-rails - Rails、The Pizza、Topping 和 Order 中的数据库设计建议

> ID：10064330
> 
> 赞同：0
> 
> 时间：2012-04-08T16:23:22.860
> 
> 标签：ruby-on-rails, database, database-design, many-to-many

是的，这是另一个与比萨饼类比的数据库问题。我看到的那些似乎没有正确点击，所以这里。

我需要能够在一个订单中订购多个带有任意数量浇头的比萨饼。它是一种基本的购物车模式，但浇头使其难以实施。

基本模型是，

```
class Pizza < ActiveRecord::Base
  has_and_belongs_to_many :orders
  has_and_belongs_to_many :toppings
end

class Topping < ActiveRecord::Base
  has_and_belongs_to_many :pizzas  
end 
```

比萨饼和浇头表用作可订购的比萨饼和浇头类型信息的持有者。

```
class OrdersPizzas < ActiveRecord::Base
  belongs_to :order
  belongs_to :pizza
end

class PizzasToppings < ActiveRecord::Base
  belongs_to :topping
  belongs_to :pizza
end

class Order < ActiveRecord::Base
  has_and_belongs_to_many :pizzas
end 
```

**[添加]**

澄清一下，数据库设计是为购物应用程序设计的，因此管理员能够设置“菜单”，并且用户能够看到菜单并从中订购是必不可少的。

这个操作分为两个步骤，首先你需要通过创建比萨饼和浇头来制作菜单，并将它们关联起来，并不是所有的比萨饼都可以有所有的浇头。

> 奶酪披萨可以有额外的橄榄和额外的奶酪作为配料
> 
> 意大利辣香肠披萨只能有额外的奶酪作为配料

第二步实际上是根据输入的数据下订单，因此都是多对多。

现在的问题是，输入上面的数据后，我要下单

> 意大利辣香肠披萨加额外的奶酪
> 
> 芝士披萨加额外的橄榄

在一个订单中，它应该如何设计？

我能想到的就是添加一个

```
class OrdersPizzasToppings < ActiveRecord::Base
  belongs_to :orders_pizzas
  belongs_to :topping
end 
```

所以我可以区分哪个披萨有浇头，但这看起来不是正确的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T14:08:48.763

我认为您需要一个连接表来表示应用于一个披萨的一组配料，并分离出应用配料的标准披萨：

```
class Pizza < ActiveRecord::Base
  belongs_to :order
  belongs_to :standard_pizza
  has_one :pizza_topping
  has_many :toppings, through: :pizza_topping
end

class Order < ActiveRecord::Base
  has_many :pizzas
end

class Topping < ActiveRecord::Base
  has_many :pizza_toppings
  has_many :pizzas, through: :pizza_toppings
end

# A set of toppings applied to one pizza
class PizzaTopping < ActiveRecord::Base
  belongs_to :pizza
  belongs_to :topping
end

# Pepperoni pizza, Cheese pizza ...
class StandardPizza < ActiveRecord::Base
  has_many :pizzas
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T17:23:39.127

首先，我同意 Zabba - a`Pizza`应该属于 one `Order`。现在，我认为您可以应用一个更简单的解决方案。根据我的阅读，如果我没记错的话，您可以使用 3 个模型。

```
class Pizza < ActiveRecord::Base
  belongs_to :order
  has_many :toppings
end

class Order < ActiveRecord::Base
  has_many :pizzas
end

class Topping < ActiveRecord::Base
  belongs_to :pizza  
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T03:08:03.950

好的，已经想出了一种对我有用的方法，每个模型的解释都包含在每个模型之上。

Pizza 模型用于创建客户可以订购的披萨列表，它也与订单相关联，以指示已订购的披萨。

```
class Pizza < ActiveRecord::Base  
  has_many :pizza_orders
  has_many :orders, :through => :pizza_orders
  has_and_belongs_to_many :toppings
end 
```

Topping 模型，为了创建可以与某些比萨饼相关联的配料列表，还与每个比萨饼订单的连接表相关联，以指定哪个比萨饼订购了配料。

```
class Topping < ActiveRecord::Base
  has_and_belongs_to_many :pizzas
  has_and_belongs_to_many :pizza_orders
end 
```

披萨和浇头的连接表，这是必需的，因为没有它，您无法指定哪些浇头可以或不能与披萨一起订购。毕竟，将意大利辣香肠配料列在素食披萨上可能会冒犯某人。

```
class PizzasToppings < ActiveRecord::Base
  belongs_to :pizza
  belongs_to :topping
end 
```

订单模型，这只是将所有连接表保存在一起。

```
class Order < ActiveRecord::Base
  has_many :pizza_orders
  has_many :pizzas, :through => :item_orders
end 
```

比萨饼和订单之间的连接表，这个多对多是一个有很多通过，而不是一个拥有和属于很多，因为在 Rails 中你不能直接操作 HBATM 连接表（据我所知），你需要能够因为期权关系。

```
class PizzaOrder < ActiveRecord::Base
  belongs_to :pizza
  belongs_to :order

  has_and_belongs_to_many :options
end 
```

用于指示已为订单中的特定比萨饼选择了哪些配料的连接表。

```
class PizzaOrdersToppings < ActiveRecord::Base
  belongs_to :pizza_orders
  belongs_to :topping
end 
```

Then having an admin page to create and associate the Pizzas and toppings, and an order page to create orders, this should work. This way its easy to make sales analysis, which toppings is most popular with what pizza, and what not.

# ruby-on-rails - IE 的指南针回退

> ID：10064331
> 
> 赞同：0
> 
> 时间：2012-04-08T16:23:25.447
> 
> 标签：ruby-on-rails, internet-explorer, cross-browser, sass, compass-sass

我目前正在尝试将指南针集成到我的 Rails 项目中。一切正常，直到我尝试使用旧的 Firefox 版本（3.0.18）和不太旧的 IE 版本（8）。

例如，我的标题有一个 linear-gradient ：

```
 +background-image(linear-gradient(#8fcbef, #cee8ff)) 
```

它工作得很好。但是旧浏览器没有自动回退。类似背景颜色的东西：#8fcbef...

我错过了什么吗？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T17:07:04.373

这里有几个选项：

*   自己指定 css3 的每一位的后备，并开始使用[modernizr](http://modernizr.com)以确保仅在未解释 CSS3 时读取它们
*   尝试使用[波旁威士忌](http://github.com/thoughtbot/bourbon)，因为它在您使用 CSS3 时提供了后备功能

如果您想坚持使用 compass，请尝试使用[html5-rails](https://github.com/sporkd/html5-rails)，因为它将modernizr 嵌入到您的应用程序中，以便您可以仅在需要时选择性地提供回退

**ps现代化**后备的一个例子是：

```
// this rule is only applied if the browser is incapable of rendering css3-style gradients 
.no-cssgradients
  #header
    background-color: #8fcbef

// this rule is applied when css3 gradients are interpreted 
#header    
  +background-image(linear-gradient(#8fcbef, #cee8ff)) 
```

# ruby - 如何访问 Ruby 中的基本命名空间？

> ID：10064334
> 
> 赞同：32
> 
> 时间：2012-04-08T16:24:02.903
> 
> 标签：ruby, namespaces

我正在文件模块存在的命名空间中编写代码（在另一个模块内）

我需要访问 ruby​​ File 类。

在 php 中，可以这样做：\File

如何在红宝石中做到这一点？

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-04-08T16:25:09.683

```
::File 
```

前缀 with`::`访问命名空间树的“根”。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-08T16:26:47.740

我不确定你在问什么，但如果你在模块内部`Foo`并且你引用了 class `Bar`，那么 ruby​​ 会寻找`Foo::Bar`. 要查找`Bar`，您应该参考`::Bar`（当然，这`Bar`应该在“全局”范围内定义，在 之外`Foo`）。

# jquery - 用 ajax 加载的 iframe 内容做点什么？

> ID：10064342
> 
> 赞同：0
> 
> 时间：2012-04-08T16:25:11.387
> 
> 标签：jquery, ajax, iframe

我通过fancybox将一些内容（简单的网络表单）加载到iframe（来自我的域）。并希望将值添加到此 iframe 表单中的一个输入。

尝试这个：

```
$x("a.load_html_i").fancybox({
'type'              :'iframe',
'padding'           : 20,
'width'             : 690,
'height'            : 550,
'onComplete'        : function() {
$x('#fancybox-frame input[name=input_text_0]').val($x(this).attr('title'));
}
}); 
```

其中#fancybox-frame 是 iframe 的 id。

和这个：

```
...
$x("#fancybox-frame").contents().find("input[name=input_text_0]").val($x(this).attr('title'));
... 
```

但这是行不通的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T17:13:42.827

不要使用“this”关键字，而是通过类名引用锚点。我相信'this'是指fancybox实例化。

```
$x("a.load_html_i").fancybox({
'type'              :'iframe',
'padding'           : 20,
'width'             : 690,
'height'            : 550,
'onComplete'        : function() {
//cache the anchor
var anchor = $x(this);
//trigger the following function in 0.5s (should be long enough)
   setTimeout(function(){
      $x('#fancybox-frame input[name=input_text_0]').val(anchor.attr('title'));
   }, 500);
}
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T17:58:37.877

我发现了一个问题：jquery 在 iframe 加载之前运行。如何改进它？

```
$x("iframe#fancybox-frame").ready(function(){
                $x("iframe#fancybox-frame").contents().find("input[name=input_text_0]").val('hh');
            }); 
```

添加准备好无济于事

# algorithm - 从离散分布生成随机数的算法？

> ID：10064344
> 
> 赞同：3
> 
> 时间：2012-04-08T16:25:17.580
> 
> 标签：algorithm, math, random

> 设计一种快速算法，从离散分布中重复生成数字：给定一个数组 a[]，其中包含总和为 1 的非负实数，目标是以概率 a[i] 返回索引 i

我在一本在线算法书籍《Java 编程简介》第 4.2 章：排序和搜索 (http://introcs.cs.princeton.edu/java/42sort/) 中发现了这个问题。

提示说：

> 形成一个累加和的数组 s[]，使得 s[i] 是 a[] 的前 i 个元素的和。现在，生成一个介于 0 和 1 之间的随机实数 r，并使用二进制搜索返回 s[i] ≤ s[i+1] 的索引 i。

有些我无法理解提示，因此无法找到解决方案..

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-08T16:31:46.410

有很多方法可以回答这个问题。 **[本文](http://www.keithschwarz.com/darts-dice-coins/)**介绍了许多方法、它们的优势、劣势和运行时间。它以一个算法结束，该算法需要 O(n) 预处理时间，然后在每个 O(1) 时间内生成数字。

您正在寻找的特定方法在“轮盘赌选择”下进行了描述。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-08T19:45:59.263

这是一个实现“轮盘赌”技术的 Python 算法。没有图形很难解释。由 templatetypedef 链接的文章应该可以很好地解决这个问题。另外，请注意，该算法实际上并不需要对权重进行归一化（它们不需要总和为 1），但这仍然有效。

```
import random

trials = 50
selected_indices = []

# weights on each index
distrib = [0.1, 0.4, 0.2, 0.3]

index = random.randrange(0, len(distrib) - 1)
max_weight = max(distrib)
B = 0
# generate 'trials' random indices
for i in range (trials):

    # increase B by a factor which is
    # guaranteed to be much larger than our largest weight
    B = B + random.uniform(0, 2 * max_weight)

    # continue stepping through wheel until B lands 'within' a weight
    while(B > distrib[index]):
        B = B - distrib[index]
        index = (index + 1) % len(distrib)
    selected_indices.append(index)

print("Randomly selected indices from {0} trials".format(trials))
print(selected_indices) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-08T16:49:27.353

这是 wakkerbot/megahal 的一个片段。这里的权重是（无符号的）整数，它们的总和在 node->childsum 中。为了获得最大速度，孩子按降序（或多或少）排序。（权重预计具有类似幂律的分布，只有少数高权重和许多较小的权重）

```
 /*
     *          Choose a symbol at random from this context.
     *          weighted by ->thevalue
     */
    credit = urnd( node->childsum );
    for(cidx=0; 1; cidx = (cidx+1) % node->branch) {
        symbol = node->children[cidx].ptr->symbol;
        if (credit < node->children[cidx].ptr->thevalue) break;
        /* 20120203 if (node->children[cidx].ptr->thevalue == 0) credit--; */
        credit -= node->children[cidx].ptr->thevalue;
    }
done:
    // fprintf(stderr, "{+%u}", symbol );
    return symbol; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-08T17:35:46.317

根据粒度，您可以创建包含 100、1000 或 10000 个元素的索引。假设分布 (a,b,c,d) 且 p=(10%, 20%, 30%, 40%)，我们创建一个 Map：

```
val prob = Map ('a' -> 10, 'b' -> 20, 'c' -> 30, 'd' -> 40) 
val index = (for (e <- prob;
  i <- (1 to e._2)) yield e._1 ).toList 

index: List[Char] = List(a, a, a, a, a, a, a, a, a, a, 
b, b, b, b, b, b, b, b, b, b, b, b, b, b, b, b, b, b, b, b, 
c, c, c, c, c, c, c, c, c, c, c, c, c, c, c, c, c, c, c, c, c, c, c, c, c, c, c, c, c, c, 
d, d, d, d, d, d, d, d, d, d, d, d, d, d, d, d, d, d, d, d, d, d, d, d, d, d, d, d, d, d, d, d, d, d, d, d, d, d, d, d) 
```

我们现在可以非常快速地选择所需概率的元素：

```
val x = index (random.nextInt (100)) 
```

x 现在是 40% d，10% a，依此类推。设置短，访问速度快。

这些数字甚至不需要总和为 100，但您必须计算一次范围，然后：

```
val max = prob.map (_._2).sum 
val x = index (random.nextInt (max)) 
```

# java - Java Eclipse，导出 jar。使用导入的文件

> ID：10064348
> 
> 赞同：0
> 
> 时间：2012-04-08T16:25:41.327
> 
> 标签：java, eclipse, jar, export

我创建了应该显示文件“pattern.xml”的项目，该文件位于`/src/files/pattern.xml`.

当我在 Eclipse 中运行代码时，它工作正常。但是当我将项目导出到可执行 jar 并尝试执行它时，jar 不起作用。

也许问题就在这里？

```
 URL dir_url = this.getClass().getClassLoader()
                .getResource("files\\pattern.xml"); 
```

这是代码。有任何想法吗？

```
public class ResourseClass {

public static void main(String[] args) {
    // TODO Auto-generated method stub
    test t = new test();
    t.Go();
    }
}

class test {

void Go() {
    try {

        URL dir_url = this.getClass().getClassLoader()
                .getResource("files\\pattern.xml");
        File dir = new File(dir_url.toURI());
        if (dir.exists()) {
            System.out.println("file exists");
        }

        FileReader frI = new FileReader(dir);
        BufferedReader br = new BufferedReader(frI);
        String text;
        String textout = "";

        while ((text = br.readLine()) != null) {
            textout = textout + text + "\n";
        }

        JOptionPane.showMessageDialog(null, textout, "Information",
                JOptionPane.WARNING_MESSAGE);
        br.close();

    } catch (FileNotFoundException e2) {
        // TODO Auto-generated catch block
        e2.printStackTrace();
    } catch (IOException e1) {
        // TODO Auto-generated catch block
        e1.printStackTrace();
    } catch (URISyntaxException e3) {
        // TODO Auto-generated catch block
        e3.printStackTrace();
    }
}

    } 
```

包装窗口

![在此处输入图像描述](../Images/c445101be107d7ef81397ef553c1626d.png)

eclipse中正常执行

![在此处输入图像描述](../Images/42decef8dedeb7d535c26cc4ff16c13a.png)

在eclipse中执行代码时，它可以工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T16:38:42.250

You'll want to move the pattern.xml file to the same folder as your class files when you run it outside of eclipse.

# c# - 实现按键处理持续时间的方法

> ID：10064350
> 
> 赞同：1
> 
> 时间：2012-04-08T16:26:01.953
> 
> 标签：c#, input, xna, keypress

我正在使用 XNA (C#) 开发 2D 平台游戏。我想知道处理按住特定按钮的最佳方法。例如，您按住的越多，激光束就越大。

到目前为止，由于我已经在使用保存键盘最后两种状态的输入机制，我可以在每个更新周期进行额外检查以增加持续时间。但是，这种方法相当有限，因为它只处理一个特定的按钮（即触发按钮），它应该可以解决问题，但我想知道是否有更通用的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T21:50:09.133

```
float ElapsedSecondsPerFrame = (float) gametime.Elapsed.TotalSeconds;

KeyFirePressedTime = Keyboard.GetState().IsKeyDown(FireKey) 
                         ? (KeyFirePressedTime + ElapsedSecondsPerFrame ) 
                         : 0; 
```

通用方法

```
Dictionary<int, float> PressedKeysTime = new ...

void Update(float Elapsed)
{
      List<int> OldPressedKeys = PressedKeysTime.Keys.ToList();
      foreach (int key in Keyboard.GetState().GetPressedKeys.Cast<int>())
      {
           if (!PressedKeysTime.ContainsKey(key)) 
           {
                PressedKeysTime[key] = 0;
           } else {
               OldPressedKeys.Remove(key);
               PressedKeysTime[key] += Elapsed;
           }
      }
      foreach (int keynotpressed in OldPressedKeys) 
          PressedKeysTime.Remove(keynotpressed);

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T19:11:55.397

要检测单个按键...

```
lastKeyboardState = CurrentKeyState;
CurrentKeyState = Keyboard.GetState();

if ((CurrentKeyState.IsKeyUp(Keys.Enter)) && (lastKeyboardState.IsKeyDown(Keys.Enter))
        {
            //Enter was pressed
        } 
```

要检测一个键被按住...

```
lastKeyboardState = CurrentKeyState;
CurrentKeyState = Keyboard.GetState();
if (CurrentKeyState.IsKeyDown(Keys.Enter)
        {
            //Enter was pressed (You could do BeamSize++ here
        } 
```

这似乎是最好的方法。那是你已经在使用的方法吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-08T23:37:58.550

这是一个简单的伪代码示例：

```
// to cancel immediately
if key is pressed this frame, but was released last frame
   begin effect

else if key is pressed this frame, and also was last frame
   increase magnitude of effect

else if key is released this frame and effect is active
   end effect

// or to gradually decrease
if key is pressed this frame, and effect is inactive
   begin effect

else if key is pressed this frame, and effect is active
   increase magnitude of effect

else if key is released this frame and effect is active
   decrease magnitude of effect
   if magnitude decreased enough, end effect 
```

如您所说，具体测量持续时间将是这样的：

```
public void Update(GameTime pGameTime)
{
   private TimeSpan mKeyDuration = TimeSpan.FromSeconds(0);

   ...

   if key is pressed this frame
      mKeyDuration += pGameTime.ElapsedGameTime;

   else if key was pressed last frame
      mKeyDuration = TimeSpan.FromSeconds(0);

   ...
} 
```

# configuration - 如何从起始页的最近项目列表中删除项目？

> ID：10064351
> 
> 赞同：15
> 
> 时间：2012-04-08T16:26:05.317
> 
> 标签：configuration, preferences, netbeans-7.1

我在 Netbeans 7.1.1 中启动了一个新的企业应用程序项目，然后从 IDE 的项目窗口中删除了 3 个项目（[project]、[project]-war、[project]-ejb），方法是右键单击它们并选择删除，并检查“[删除硬盘上文件夹中的所有源文件]”，但它没有从我的“起始页”中的“最近项目”中删除项目。

我通过谷歌搜索，大多数解决方案都适用于 netbeans 6.x，不适用于我的版本。这些解决方案说`./config/Preferences/org/netbeans/modules/projectui.properties`从安装文件夹中找到文件并将其删除。我一直找不到这个或类似的文件，也无法从 IDE 本身完成。如何删除这些最近的项目？有谁知道解决方案？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-06-02T06:58:42.803

您应该能够在以下位置找到该`projectui.properties`文件：

Unix

```
 ~/.netbeans/<netbeans-version>/config/Preferences/org/netbeans/modules/projectui.propertie‌​s 
```

Mac OS X [绝对路径]

```
/Users/<username>/Library/Application Support/NetBeans/<netbeans-version>/config/Preferences/org/netbeans/modules‌​/projectui.propertie‌​s 
```

视窗

```
C:\Users\<username>\AppData\Roaming\NetBeans\<netbeans-version>\config\Preferences\org\netbeans\modules\projectui.propertie‌​s 
```

请记住，更改将仅应用于特定用户的特定 NetBeans 版本。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-01-23T14:49:59.567

在**Windows 7**中，您可以`projectui.properties`在`C:\Users\[username]\AppData\Roaming\NetBeans\7.2.1\config\Preferences\org\netbeans\modules`

我还在这样的路径中找到了我以前安装 NetBeans IDE 7.0 的`C:\Users\[username]\Documents\.netbeans\7.0\config\Preferences\org\netbeans\modules` 这个文件但是当然，这个文件不是实际的。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-06-07T11:34:59.943

右键单击项目名称以获取上下文菜单。选择“关闭项目”，这会将其从显示的项目列表中删除。

[点击这里查看更多详情](http://netbeans-org.1045718.n5.nabble.com/How-to-delete-a-project-td2857520.html)

谢谢

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-02-15T09:17:04.047

对我来说，从项目面板关闭项目不会从最近列表中删除我的项目。

在 Ubuntu 18.04 仿生海狸上使用 snap 安装版本 10.0，你应该去 `~/snap/netbeans/common/data/10.0/config/Preferences/org/netbeans/modules`

删除“RecentProjects”键的内容：

*   最近的项目显示名称
*   最近的项目图标
*   最近的项目网址

# wcf - 对不同类型的交易感到困惑

> ID：10064354
> 
> 赞同：0
> 
> 时间：2012-04-08T16:26:24.463
> 
> 标签：wcf, stored-procedures, ado.net, transactions

我正在学习事务，我没有在实际项目中使用事务的经验。我知道我们可以在 ADO.NET、存储过程和 WCF 中编写事务。我的困惑是在哪里写事务更合适？我们是否需要在多个地方编写事务？如果我们在多个地方写事务，会不会影响性能？

任何人都可以引导我走向正确的道路吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T16:35:37.137

这是一个简单的解释。

**为了获得最佳性能，我尽可能**将事务写入数据库（在存储过程中）。**这通常是管理事务的最简单方法，并且需要最少的代码。**

 **但是，在某些情况下这是不可能的。例如，可能会更新两个**不同的数据库**（或其他类型的数据存储）。在这种情况下，您需要在应用程序中管理事务（使用 ADO.Net）。

同样对于 WCF，如果您通过服务执行多个任务，如果无法在数据库中处理，您可能需要在服务中处理事务。**

# c# - 如何停止扫描 .resources.dll

> ID：10064359
> 
> 赞同：2
> 
> 时间：2012-04-08T16:27:02.623
> 
> 标签：c#, wpf, .net-assembly, satellite-assembly

我正在使用 Process Monitor 检查我的应用程序。（.NET 框架 4，WPF 应用程序）我观察到，对于我的应用程序中的每个 dll，它都在寻找“mydllname”.resources.dll 我的应用程序有超过 100 个 dll。但是它只有一种语言支持。而且我没有使用任何资源、.resx 或类似的东西。

我怎么能阻止它？还是 .NET 框架总是为每个引用的 dll 寻找 .resources.dll 。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T17:39:32.153

每个应用程序的启动时间一直是每个 NET 程序员的眼中钉。我认为对 'library'.resource.dll 的检查总是按设计执行的，所以我认为不可能停止这种行为。但在担心这一点之前，我认为人们应该质疑与启动整个项目所需的总时间相比，这些检查需要多少时间，以及是否有一些步骤可以帮助减少启动时间。

在您的情况下，我将尝试使用启动您的第一个窗口所需的最小 DLL 创建一个小型启动项目。该项目然后将根据需要调用其他部分。很难说，但您似乎不太可能需要直接从您的启动项目中引用所有 100 个程序集。

但是，我知道这可能意味着您的设计将发生重大变化。
所以也看看[这里提出的这个激进的解决方案](https://stackoverflow.com/questions/6443932/c-sharp-wpf-really-slow-startup-first-time)

编辑：当我谈论启动时间时，我的意思也是初始化代码所花费的时间。在这里，您需要一个像[EQATEQ](http://www.eqatec.com/tools/profiler)这样的分析器来检查您的方法中传递的时间并尝试优化它们或将所有内容移动到单独的线程中

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T06:24:06.293

尝试将[NeutralResourcesLanguage](http://msdn.microsoft.com/en-us/library/system.resources.neutralresourceslanguageattribute.aspx)属性应用于您的程序集。[如果CurrentUICulture](http://msdn.microsoft.com/en-us/library/system.globalization.cultureinfo.currentuiculture.aspx)与指定的中性资源语言匹配，这将停止标准[ResourceManager](http://msdn.microsoft.com/en-us/library/system.resources.resourcemanager.aspx)搜索附属程序集。

# c++ - boost 如何将类型列表实现为类的“选项”？

> ID：10064361
> 
> 赞同：1
> 
> 时间：2012-04-08T16:27:16.723
> 
> 标签：c++, templates, boost

不使用示例来表达这个问题有点困难，所以我会直截了当。

作为一个基本示例，`boost::intrusive::list`有一些有趣的模板，我很难弄清楚它们是如何工作的。类规范看起来有点像这样：

```
template<typename T, class... Options> 
class list {
   ...
}; 
```

我的重点是`Options`参数。对于初学者来说，它是可变的。这在 c++11 中是“微不足道的”，因为它受语言支持。并且在 c++03 中模拟当然很容易（最多可以有 10 个参数，所有参数都带有一些默认标记值）。

**这是我的问题**：

可以采用`Options`任意数量的“选项”类型，**以任意顺序**。例如：

```
typedef list<Foo, constant_time_size<false> > FooList; 
```

或者

```
//This option will configure "list" to use the member hook
typedef member_hook<Foo, list_member_hook<>, &Foo::hook_> MemberHookOption;

//This list will use the member hook
typedef list<Foo, MemberHookOption> FooList; 
```

这真是太酷了……他们到底是如何使这项工作适用于所有不同的组合的。如果我两次传递相同类型的选项会发生什么？对于`boost::instrusive::list`，可能的选项是：

*   `base_hook<class Hook> / member_hook<class T, class Hook, Hook T::* PtrToMember> / value_traits<class ValueTraits>`: 所有这些选项都指定了要插入到列表中的类型 T 和钩子之间的关系（因为我们可以在同一个 T 类型中有多个钩子）。member_hook 将在稍后解释，而 value_traits 将在具有自定义 ValueTraits 的容器部分中解释。如果没有指定选项，容器将被配置为使用带有默认标签的基本钩子。为钩子配置的一些选项（指针类型、链接模式等）将传播到容器。

*   `constant_time_size<bool Enabled>`: 指定容器是否需要一个恒定的时间 size() 函数。这将指示侵入式容器存储一个附加成员以跟踪容器的当前大小。默认情况下，固定时间大小被激活。

*   `size_type<bool Enabled>`：指定可以容纳容器大小的类型。此类型将是 list.size() 返回的类型，如果请求了 constant_time_size，则将是存储在侵入式容器中的类型。用户通常不需要更改此类型，但某些容器的 size_type 可能与 std::size_t 不同（例如，类似 STL 的容器使用其分配器定义的 size_type）。Boost.Intrusive 可用于实现指定大小类型的此类容器。默认情况下，类型是 std::size_t。

我喜欢这个概念，因为它允许编译类型的行为定义。但正如您可以想象的那样，各种组合可能会变得复杂。我猜想通过一些魔法，他们将选项标准化为一个简单的结构，可以用于真实的数据结构。但这只是猜测工作:-P

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T16:51:19.570

在尝试策略库设计时，我已经这样做了几次。

我使用的核心思想是策略被标记（通过一个内部 typedef，类似于`iterator_category`迭代器的），然后我定义了一个类，它将简单地遍历列表并为一个类别提取一个给定的策略，如果两项政策涉及同一类别。就像是：

```
template <typename Tag, typename Opt, typename... Options>
struct CategoryExtractorImpl {
  typedef typename if_<
            same_type<typename Opt::Tag, Tag>,
            Opt,
            void
  >::type Lhs;
  typedef typename CategoryExtractorImpl<Tag, Options...>::type Rhs;
  typedef typename Combinator<Lhs,Rhs>::type type;
}; 
```

只需根据谓词在`if_`两种类型之间进行选择，组合子就写成：

```
template <typename, typename> struct Combinator;
template <typename L> struct Combinator<L, void> { typedef L type; };
template <typename R> struct Combinator<void, R> { typedef R type; };
template <> struct Combinator<void, void> { typedef void type; }; 
```

当然，您还需要提供一个默认值，以防根本没有提供策略。

```
template <typename L, typename R> struct ForgivingCombinator { typedef L type; };
template <typename R> struct ForgivingCombinator<void, R> { typedef R type; }; 
```

最后，你得到：

```
template <typename Default, typename... Options>
struct CategoryExtractor {
  typedef typename ForgivingCombinator<
      typename CategoryExtactorImpl<typename Default::Tag, Options...>::type
      Default
  >::type type;
}; 
```

使用它，您只需轻松提取所有类别：

```
template <typename... Options>
class List {
  typedef typename CategoryExtractor<DefaultPolicyX, Options...>::type PolicyX;
  typedef typename CategoryExtractor<DefaultPolicyY, Options...>::type PolicyY;
  ...
}; 
```

当然，在典型的基于策略的设计中，它可能会变得更加冗长，因为您将从它们私有继承（以触发 EBO），然后在需要时在类中重复实际类型。

# php - 如何使用 php Http_Request2() 发出 https 请求

> ID：10064362
> 
> 赞同：4
> 
> 时间：2012-04-08T16:27:18.573
> 
> 标签：php, https, pear, http-request

我想使用 pear http_request2($url) 类发出 https 请求。我可以发出http请求，但不能发出https。并且该网站促进了http和https。服务器响应 https 没有问题。

```
 require 'HTTP/Request2.php';
    $url = 'https://collegedb2.ferryfair.com';
    $r = new Http_Request2($url);
    $r->setMethod(HTTP_Request2::METHOD_POST);
    try {
        $response = $r->send();
    } catch (Exception $exc) {
        $es = $exc->getTraceAsString();
        $ets=$exc->__toString();
        $egc=$exc->getCode();
        $egl=$exc->getLine();
        $egm=$exc->getMessage();
        $egt=$exc->getTrace();
        $response = null;
    }
    $page = $response->getBody();
    echo $page; 
```

这是错误消息：

> `$egm=(string) Unable to connect to ssl://collegedb2.ferryfair.com:443\. Error: stream_socket_client(): unable to connect to ssl://collegedb2.ferryfair.com:443 (Unknown error)`

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-23T23:57:53.810

禁用证书验证的评论对我来说是关键。

```
$request = new HTTP_Request2('https://someserver.com/somepath/something',
    HTTP_Request2::METHOD_POST);

$request->setConfig(array(
    'ssl_verify_peer'   => FALSE,
    'ssl_verify_host'   => FALSE
)); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-03-06T15:09:22.233

我遇到了这个问题。修复（对我而言）是使用“curl”作为适配器，例如：

```
$request = new Http_Request2('https://whatever');
$request->setAdapter('curl');
$response = $request->send(); 
```

另请参阅[http://pear.php.net/manual/en/package.http.http-request2.config.php](http://pear.php.net/manual/en/package.http.http-request2.config.php)上的“SSL 参数”部分，其中说

> 如果您没有明确提供 ssl_cafile 和/或 ssl_capath，对等验证可能会失败，尤其是使用 Socket 适配器。

大概 curl 知道在哪里可以找到要信任的本地 CA 文件。

（带有 curl 的 PHP 5.4.38）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T07:17:08.080

HTTP_Request2 绝对能够发出 HTTPS 请求。可能存在更深层次的错误，例如带来问题的自定义 SSL 证书。

安装[Wireshark](http://www.wireshark.org/)并检查您实际遇到的错误。把那个发回去。

# menu - 在 Awesome WM 菜单中切换用户

> ID：10064369
> 
> 赞同：4
> 
> 时间：2012-04-08T16:28:34.820
> 
> 标签：menu, switch-statement, awesome-wm

如何在 Awesome 菜单中进行切换用户条目？

如果有帮助，我会使用 kubuntu。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-06T15:26:29.317

如果您使用带有 lightdm 的 ubuntu 作为显示管理器，您可以使用“dm-tool”

键入`dm-tool -h`以列出选项，它们是自我解释

我的 rc.lua 中有这样的

```
mymainmenu = awful.menu({ items = { { "awesome", myawesomemenu, beautiful.awesome_icon },
                                    { "Debian", debian.menu.Debian_menu.Debian },
                                    { "open terminal", terminal },
                                    { "switch user", terminal .. " -e /usr/bin/dm-tool switch-to-user username" }
                                  }
                        }) 
```

dm-tool 选项`switch-to-user`将您带到登录屏幕，您添加的用户作为参数已经被选中，剩下的就是输入密码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-06-26T16:57:28.123

在我的环境中，Ben 的 rc.lua 没有运行。我不得不修改代码

```
 mymainmenu = awful.menu({ items = { { "awesome", myawesomemenu, beautiful.awesome_icon },
                                    { "Debian", debian.menu.Debian_menu.Debian },
                                    { "open terminal", terminal },
                                    { "switch user", "/usr/bin/dm-tool switch-to-greeter" }
                                  }
                        }) 
```

# c++ - 将数据并行添加到 hashmap

> ID：10064372
> 
> 赞同：0
> 
> 时间：2012-04-08T16:28:48.347
> 
> 标签：c++, thread-safety, c++11, parallel-processing

我有一个 std::unordered_map 的实例，用作某种数据库。（它基本上只是一个常规的哈希图）。
我有 4 个线程从网络中检索长字符串（我使用的是 c++11 std::threads），并且在每个线程中，我标记了它们收到的字符串。标记化本身也使用新的 Microsoft AMP 库进行并行化（因此标记化过程由 GPU 线程完成）。

我希望 4 个“主”线程中的每一个都将标记作为键添加到哈希图中，因为 GPU 线程完成了对字符串的标记（然后重复该过程）。

我将如何同步所有这些，以便我可以从每个线程安全地将新密钥添加到我的数据库中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T17:55:00.000

[在concurrent_unordered_map.h](http://msdn.microsoft.com/en-us/library/hh750089%28v=vs.110%29.aspx)中使用 concurrent_unordered_map 而不是 unordered_map

# java - 使用 swing 实现 RSA 2048

> ID：10064373
> 
> 赞同：0
> 
> 时间：2012-04-08T16:28:51.373
> 
> 标签：java, eclipse, swing, wampserver

我正在使用swings开发一个桌面应用程序，用户登录，注册和发送消息。我计划实现RSA 2048，密钥交换，发送时加密和接收邮件后解密。我不知道该怎么做用于消息加密和解密。我知道 RSA 逻辑来实现整数，甚至将字符串作为一个整体程序，但不知道在单独的模块中做

我们如何使用套接字实现邮件发送？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T16:46:53.540

签[出 JavaMail](http://www.oracle.com/technetwork/java/javamail-138606.html)。

# python - 生成器对象转换为制表符分隔的文本

> ID：10064374
> 
> 赞同：1
> 
> 时间：2012-04-08T16:28:57.123
> 
> 标签：python

我使用了一个生成器来创建 s

```
s= generator(n) 
```

对于范围（n）内的 n，生成器产生（a，b）。其中 a=[w,x] 和 b=[y,z]

打印使用

```
for i in s:
    print i 
```

这返回：

```
([0.27704232355167768, 0.44459304959240675], [0.4387731877846518, 0.38108111684466683])
([0.27704232355167768, 0.44459304959240675], [0.6362447250743466, 0.72047209074359853])
([0.27704232355167768, 0.44459304959240675], [0.65419386891877318, 0.025362727486327286])
([0.27704232355167768, 0.44459304959240675], [0.039966264334369672, 0.9662795347591735]) 
```

不过我想

```
0.27704232355167768 0.44459304959240675 0.4387731877846518 0.38108111684466683
0.27704232355167768 0.44459304959240675 0.6362447250743466 0.72047209074359853
0.27704232355167768 0.44459304959240675 0.65419386891877318 0.025362727486327286
0.27704232355167768 0.44459304959240675 0.039966264334369672 0.9662795347591735 
```

我尝试了以下想法的许多变体

```
print '\n'.join('\t'.join(x) for x in s) 
```

但是为了 n0 有用并且倾向于以相同的格式返回 s。谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T16:44:50.680

```
>>> from itertools import chain
>>> for i in s:
        print '\t'.join(map(str,chain(*i)))

0.277042323552 0.444593049592 0.438773187785 0.381081116845
0.277042323552 0.444593049592 0.636244725074 0.720472090744
0.277042323552 0.444593049592 0.654193868919 0.0253627274863
0.277042323552 0.444593049592 0.0399662643344 0.966279534759 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T16:54:02.370

```
from itertools import chain
'\n'.join('\t'.join(map(str,tuple(chain(*i)))) for i in s) 
```

`chain`展平每一行，因此您可以使用选项卡连接所有元素，然后使用换行符连接行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-08T16:41:51.427

不知道你的发电机是什么样子，但看看你的例子，如果你的发电机如下

```
>>> def generator(n):
    for i in xrange(0,n):
        yield ([0.27704232355167768, 0.44459304959240675], [0.4387731877846518, 0.38108111684466683])
    return 
```

然后你可以像

```
>>> s=generator(5)
>>> print '\n'.join('\t'.join(map(str,x))  for x in s)
[0.2770423235516777, 0.44459304959240675]   [0.4387731877846518, 0.38108111684466683]
[0.2770423235516777, 0.44459304959240675]   [0.4387731877846518, 0.38108111684466683]
[0.2770423235516777, 0.44459304959240675]   [0.4387731877846518, 0.38108111684466683]
[0.2770423235516777, 0.44459304959240675]   [0.4387731877846518, 0.38108111684466683]
[0.2770423235516777, 0.44459304959240675]   [0.4387731877846518, 0.38108111684466683]
>>> 
```

# java - 按上次使用排序

> ID：10064377
> 
> 赞同：1
> 
> 时间：2012-04-08T16:29:16.113
> 
> 标签：java, hibernate

我正在使用 Java + Hibernate。

我有几个用户和一个公司的桌子。用户可以列出所有公司并编辑任何公司。

按当前用户的最后一次使用来订购公司的最佳方式是什么？这样每个用户都会在列表顶部看到他最近编辑的公司。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T16:38:40.317

您可以使用以下列创建第三个表 EditDate：userId、companyId、lastEditDate。从用户的公司中选择时，加入 EditData 并按 lastEditDate 排序。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-08T16:35:28.133

假设您已经为公司创建了一个类，您可以简单地为上次使用日期放入一个成员变量，该日期在用户访问/更新公司时随时更新。给它一个访问器方法并使用它来排序。

# android - onActivityResult 是如何使用的？

> ID：10064381
> 
> 赞同：2
> 
> 时间：2012-04-08T16:29:27.693
> 
> 标签：android, android-intent, media

以下是我的代码：

```
 if(v.getId() == R.id.button2)
    {
        Intent wpIntent = new Intent();
        wpIntent.setType("image/*");
        wpIntent.setAction(Intent.ACTION_GET_CONTENT);
        startActivityForResult(Intent.createChooser(wpIntent, "Select Picture"), SELECT_PICTURE);
    }
}

public void onActivityResult(int resultCode, int requestCode, Intent data)
{
    if(resultCode == RESULT_OK)
    {
        if(requestCode == SELECT_PICTURE)
        {
            Uri selectedImage = data.getData();
            selectedImagePath = getPath(selectedImage);
            Toast.makeText(this, ""+selectedImagePath, Toast.LENGTH_SHORT).show();
        }
    }
}

private String getPath(Uri selectedImage)
{
    String[] proj = {MediaStore.Images.Media.DATA};
    cursor = managedQuery(selectedImage, proj, null, null, null);
    int columnIndex = cursor.getColumnIndexOrThrow(MediaStore.Images.Media.DATA);
    cursor.moveToFirst();
    return cursor.getString(columnIndex);
} 
```

这张照片有什么问题？onActivityResult 中的 Toast 没有显示，这意味着这个东西不起作用。

我在这里做错了什么？

**编辑：**我添加了更多检查，结果发现 if(resultCode == RESULT_OK) 没有返回 true。为什么呢？

**编辑 2**这很奇怪。删除两个“if”语句使程序工作得很好。生成了正确的图像 Uri 并且整个事情工作得很好。我仍然不明白为什么“if”语句返回 false。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T16:34:50.193

```
Uri selectedImage = data.getData();
selectedImagePath = getPath(selectedImage); 
```

Use the below code and try:::

```
Uri selectedImageuri = Uri.parse(data.getDataString()); 
```

you can do any thing with this uri(can set to imageview or convert it to bitmap).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T08:25:42.750

默认情况下，如果您未在返回结果代码的意图中指定，画廊不会返回结果代码。您可以通过在代码中添加此代码段来指定返回结果代码的意图，如下所示：

```
Intent wpIntent = new Intent();
wpIntent.setType("image/*");
wpIntent.setAction(Intent.ACTION_GET_CONTENT);
wpIntent.putExtra("return-data", true); //added snippet
startActivityForResult(Intent.createChooser(wpIntent, "Select Picture"),SELECT_PICTURE); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-08T17:24:07.300

每当子活动出现问题时，结果代码就是 result_cancelled。否则 result_ok 代码就在那里。

请参阅以编程方式[从 Android 的内置图库应用程序中获取/选择图像](https://stackoverflow.com/questions/2169649/open-an-image-in-androids-built-in-gallery-app-programmatically)以检查正确的工作示例...

# html - 使用 CSS，我可以在该对象之外指定背景图像吗？

> ID：10064383
> 
> 赞同：1
> 
> 时间：2012-04-08T16:29:48.393
> 
> 标签：html, css, styles

我有一个这样的对象：

```
<div class="myObject">My Object</div> 
```

我想在那个盒子***前面***`<div>`显示一个图像，我认为这样的代码可以工作：

```
.myObject {
    background-image: url(foo.png);
    background-position: 0px -20px;
} 
```

但是，不幸的是，这不起作用。

如何使用 CSS 实现这个目标？

**PS：我想要的只是在该标签的框外显示该图像，不要告诉我这样做：**

```
.myObject {
    padding-left: 10px;
    background-image: url(foo.png);
    background-position: 0px 0px;
} 
```

谢谢你。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-08T16:32:44.323

您不能在框外的元素上放置背景图像。

要将图像放置在元素的左侧，使用纯 CSS，[`:before`](https://developer.mozilla.org/en/CSS/::before)可以使用伪元素：

## 演示：http: [//jsfiddle.net/2HEpn/](http://jsfiddle.net/2HEpn/)

```
.myObject:before {
    content: " ";
    background-image: url("/favicon.ico");  /* a 16x16 image, for example */
    width: 16px;
    height: 16px;
    display: inline-block;  /* pseudo-elements are inline by default */
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T16:52:56.527

正如我从你到 div 的理解，你可能需要将它相对地放置在对象内

```
#img{
position:absolute;
top:0px;
left:-30px;
}
.myobject{
position:relative;
width:30px;
} 
```

# asp.net-mvc - ASP.NET MVC 因自定义缓存而异

> ID：10064385
> 
> 赞同：0
> 
> 时间：2012-04-08T16:30:18.987
> 
> 标签：asp.net-mvc, identity, outputcache

我的 MVC Web 应用程序中的输出缓存有困难。

我知道如何为每个经过身份验证的用户缓存，但我的用户有 N 个用于采取行动的配置文件（身份）。每个用户都可以使用每个页面上显示的简单菜单随时更改身份。我也有 3 种类型的配置文件，具有不同级别的操作。

我有 USER 表（具有密码、电子邮件和 CurrentIdentityId 等用户信息）和 IDENTITY（存储 userId 和配置文件信息）。

所以我的问题是如何为每个身份（IdentityId）输出缓存一些动作。

在哪里可以轻松地存储和更改 currentidentityid 以便我在 global.asax 中覆盖的 varybycustom 方法可以得到它？

先感谢您！

# android - Android - 光标索引超出范围异常

> ID：10064391
> 
> 赞同：0
> 
> 时间：2012-04-08T16:31:04.333
> 
> 标签：android, sqlite, exception, indexing, cursor

如果我的程序已经设置（插入）一个选项（例如音量，振动），我的程序应该检查选项表。基本上，如果未设置选项，则表中的第一列为 0。如果第一行为空，则切换到默认选项，否则，切换到选项集。我用 try catch 包围我的选项检查器并收到此错误：

> CursorIndexOutOfBoundsException：请求索引 0，大小为 0。

我对这个 sql 东西还是新手，所以我不确定我的代码是否适合我的需要。

这是我在 OnCreate() 的选项检查器：

```
options = new DBFunctions(this);

    try{
    String row = "0".toString();
    long l = Long.parseLong(row);
    options.open();
    String retId = options.getId(l);
    int id = Integer.parseInt(retId);
    options.close();
    //codes for setting the options if/if no data in option table exists will be put here
    }catch(Exception e){
    String error = e.toString();
    tv.setText(error);
} 
```

这是我的 DBFunctions 中的 getId()。爪哇：

```
public String getId(long l) {

    String[] columns = new String[]{"id", "volume", "vibrate", "theme"};
    Cursor c = db.query(table, columns, "id=" + l, null, null, null, null);
    if(c !=null){
        c.moveToFirst();
        String id = c.getString(1);
        return id;
    }
    return null;
} 
```

`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T16:55:19.290

您正在尝试从`Cursor`空（0 行）中获取数据，这会引发该异常。我看到了您的其他问题，并且看到您`id`在`options`表格中的列设置为`INTEGER PRIMARY KEY AUTOINCREMENT`. **AUTOINCREMENT**意味着每次在数据库中插入一行时，该列的值都会增加，我认为它也是从 0 以上的值开始的（不确定）。这意味着您在该`getId`方法中进行的查询将始终返回一个空`Cursor`（您查询具有`id`0 但数据库中没有的行）。

我不明白你问题的第一部分，即在数据库中插入/未插入并切换到默认值的问题，所以我可以说如何做你想做的事。

这是一些示例代码`SharedPreferences`：

```
// When you want to check the status of the options
SharedPreferences prefs = PreferenceManager
                .getDefaultSharedPreferences(this); //in an activity
    // volumeStatus, vibrateStatus and themeStatus represent the current status of the options
boolean volumeStatus = prefs.getBoolean("volume_key", false); // if volumeStatus is false it is the first app run or the user put the volume to off
boolean vibrateStatus = prefs.getBoolean("vibrate_key", false); // the same as for volumestatus
String themeStatus = prefs.getString("theme_key", null); // if themeStatus is null it is the first run of the app or the user didn't choose a theme

    // when the user modifies one of the preferences use this
        SharedPreferences.Editor editor = prefs.edit();
        editor.putBoolean("volume_key", true); // the use sets the volume to on like in the database
            editor.commit(); 
```

# vim - 在 Vim 中，LaTeX 内联方程完成

> ID：10064394
> 
> 赞同：1
> 
> 时间：2012-04-08T16:31:34.687
> 
> 标签：vim, autocomplete, latex, equation, omnicomplete

这就是 Vim 给我们一个匹配的列表“$ some maths symbles $”，当我们在输入“$”或“$ with more maths”后按下一些键时。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T03:59:02.747

我的[解决方案](https://github.com/ying17zi/LaTeX-Box)（基于乳胶盒）用于在内联环境或编号环境中完成**内**联**eq**

那是你输入了两个 eq，你想再输入一次：

```
% two inline eqs
$hello$  $world$

% completion in inline env
$[part of "hello"]<ctrl-x><ctrl-o>

% completion in numbered env, 
% it's still triggered in the same way, but will leave eq without "$"
\begin{equation}
    $[part of "world"]<ctrl-x><ctrl-o> 
```

**编辑1**

在 Latex-box 的[官方 repo](https://github.com/LaTeX-Box-Team/LaTeX-Box)中，默认禁用此功能。

开关是`let g:LatexBox_complete_inlineMath = 1`。

# c# - 将 UNIX 时间转换为正常的日期和时间 C#

> ID：10064398
> 
> 赞同：0
> 
> 时间：2012-04-08T16:31:57.357
> 
> 标签：c#, visual-studio-2010, datagridview, unix-timestamp

我正在使用下面的代码从包含日期列的 SQLite3 数据库中填充我的程序中的数据网格视图

此日期列以 Unix 时间存储，我想将其显示为正常日期

当我将数据库读入数据网格视图时，有没有办法可以做到这一点？

```
SQLiteConnectionStringBuilder csb = new SQLiteConnectionStringBuilder();
csb.DataSource = Path.Combine(connectionPath, "sms.db");

SQLiteConnection connection = new SQLiteConnection(csb.ConnectionString);
connection.Open();

// SQL query to read the data fromt he database
SQLiteCommand command = connection.CreateCommand();
//Read Everything
string query = "SELECT * FROM message";

command.CommandText = query;

SQLiteDataAdapter dataAdaptor = new SQLiteDataAdapter(command);
DataSet dataset = new DataSet();
dataAdaptor.Fill(dataset, "Messages");
// Get the table from the data set
DataTable datatable = dataset.Tables["Messages"];

dataGridSMS.DataSource = datatable; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-08T17:02:47.143

```
// This is an example of a UNIX timestamp for the date/time
double timestamp = 1116641532;

// First make a System.DateTime equivalent to the UNIX Epoch.
System.DateTime dateTime = new System.DateTime(1970, 1, 1, 0, 0, 0, 0);

// Add the number of seconds in UNIX timestamp to be converted.
dateTime = dateTime.AddSeconds(timestamp).ToLocalTime(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-02T00:06:36.457

使用[DataGridView.CellFormatting 事件](http://msdn.microsoft.com/en-us//library/system.windows.forms.datagridview.cellformatting%28v=vs.110%29.aspx)

```
private void dataGridSMS_CellFormatting(object sender, DataGridViewCellFormattingEventArgs e)
    {
        if (this.dataGridSMS.Columns[e.ColumnIndex].Name == "dateColumn")
        {
            if (e.Value != null)
            {
                try
                {
                    // Formatting
                    double timestamp = Convert.ToDouble(e.Value); // if e.Value is string you must parse
                    System.DateTime dateTime = new System.DateTime(1970, 1, 1, 0, 0, 0, 0);
                    dateTime = dateTime.AddSeconds(timestamp).ToLocalTime();
                    e.Value = dateTime.ToString();
                    e.FormattingApplied = true;
                }
                catch (Exception)
                {
                    e.FormattingApplied = false;
                }
            }
        }
    } 
```

# android - 更改 ActionBarSherlock 背景颜色

> ID：10064411
> 
> 赞同：37
> 
> 时间：2012-04-08T16:33:12.833
> 
> 标签：android, android-ui, actionbarsherlock

我正在尝试实现 ActionBarSherlock，因为有人告诉我它相对容易实现和定制。我发现它很容易实现，但我正在尝试更改 ActionBar 的背景颜色，但事实证明这很困难。

根据站点（[链接](http://actionbarsherlock.com/theming.html)），您似乎可以继承 ActionBarSherlock 的主题之一，然后覆盖您需要的属性。

这是我到目前为止所拥有的：

```
<?xml version="1.0" encoding="UTF-8"?>
<resources>
    <style name="Theme.ActionBar" parent="Theme.Sherlock.ForceOverflow">
      <item name="android:background">#000000</item>
      <item name="background">#000000</item>
    </style>
</resources> 
```

我注意到内置主题使用图像作为背景，但我祈祷我不必创建图像来更改背景颜色。

谢谢。

* * *

## 回答 #1

> 赞同：77
> 
> 时间：2012-04-08T19:36:05.207

操作栏背景颜色是在操作栏的样式中定义的，而不是在主题本身中定义的。你需要做这样的事情：

```
<style name="Theme.MyTheme" parent="Theme.Sherlock.ForceOverflow">
    <item name="actionBarStyle">@style/Widget.MyTheme.ActionBar</item>
    <item name="android:actionBarStyle">@style/Widget.MyTheme.ActionBar</item>
</style>

<style name="Widget.MyTheme.ActionBar" parent="Widget.Sherlock.ActionBar">
    <item name="android:background">#ff000000</item>
    <item name="background">#ff000000</item>
</style> 
```

小心使用 XML 中定义的颜色。`ColorDrawable`不尊重它在 pre-Honeycomb 上的视图边界，因此如果您使用带有单独背景的选项卡导航来堆叠选项卡视图，您将遇到问题。

* * *

## 回答 #2

> 赞同：54
> 
> 时间：2013-03-29T13:03:40.420

我刚用

```
getSupportActionBar().setBackgroundDrawable(new ColorDrawable(Color.parseColor("#00853c"))); 
```

它改变了背景颜色。希望能帮助到你。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-09-17T18:10:21.053

Jake Wharton 提到的代码是真的。但是，如果您有 minSDK<11，则将代码应用于 styles.xml 可能无法正常工作，因为 API-11+ 支持 android:actionBarStyle

要解决该错误：

在您的 res 文件夹中创建一个 values-v11 文件夹，并如上所述创建 XML 文件。

# java - android - 如何仅从画布上的图像中绘制精灵

> ID：10064414
> 
> 赞同：0
> 
> 时间：2012-04-08T16:33:30.300
> 
> 标签：java, android, image, sprite

这是我第一次来这里，所以我希望我做对了:)

我的问题如下：如何从画布上的图像中绘制精灵，这样我就不会显示整个（平方）图像，而只有我想要的图像部分（=精灵）。例如，我有一张白色背景上的机器人图像，我只想看到机器人，而不是白色背景。

我希望这里有人可以帮助我解决这个问题，因为它让我头疼不知道该怎么做：P

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T17:25:08.093

您需要编辑图像并使背景透明。

# java - Java On-Memory Efficient Key-Value Store

> ID：10064422
> 
> 赞同：12
> 
> 时间：2012-04-08T16:34:49.053
> 
> 标签：java, hashmap, key-value, b-tree

I have store 111 million key-value pairs (one key can have multiple values - maximum 2/3) whose key are 50 bit Integers and values are 32 bit (maximum) Integers. Now, my requirements are:

> 1.  Fast Insertion of (Key, Value) pair [allowing duplicates]
> 2.  Fast retrieving of value/values based on key.

A nice solution of it is given [here](https://stackoverflow.com/questions/10056135/java-hash-multi-map-key-with-multiple-values-implementation) based on MultiMap. However, I want to store more key-values pairs in main memory with no/little bit performance penalty. I studied from web articles that B+ Tree, R+ Tree, B Tree, Compact Multimap etc. can be a nice solution for that. Can anybody help me:

Is there any Java library which satisfies my all those needs properly (above mentioned/other ds also acceptable. no issue with that) ? Actually, I want an efficient java library data structure to store/retrieve key-value/values pairs which takes less memory footprint and must be built in-memory.

NB: I have tried with HashMultiMap (Guava with some modification with trove) as mentioned by Louis Wasserman, Kyoto/Tokyo Cabinet etc etc.My experience is not good with disk-baked solutions. So please avoid that :). Another point is that, for choosing library/ds one important point is: keys are 50 bit (so if we assign 64bit) 14 bit will lost and values are 32 bit Int (maximum)- mostly they are 10-12-14 bits. So, we can save space there also.

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-08T23:00:41.647

我认为 JDK 中没有任何东西可以做到这一点。

然而，实现这样的事情是一个简单的编程问题。这是一个带有线性探测的开放寻址哈希表，其键和值存储在并行数组中：

```
public class LongIntParallelHashMultimap {

    private static final long NULL = 0L;

    private final long[] keys;
    private final int[] values;
    private int size;

    public LongIntParallelHashMultimap(int capacity) {
        keys = new long[capacity];
        values = new int[capacity];
    }

    public void put(long key, int value) {
        if (key == NULL) throw new IllegalArgumentException("key cannot be " + NULL);
        if (size == keys.length) throw new IllegalStateException("map is full");

        int index = indexFor(key);
        while (keys[index] != NULL) {
            index = successor(index);
        }
        keys[index] = key;
        values[index] = value;
        ++size;
    }

    public int[] get(long key) {
        if (key == NULL) throw new IllegalArgumentException("key cannot be " + NULL);

        int index = indexFor(key);
        int count = countHits(key, index);

        int[] hits = new int[count];
        int hitIndex = 0;

        while (keys[index] != NULL) {
            if (keys[index] == key) {
                hits[hitIndex] = values[index];
                ++hitIndex;
            }
            index = successor(index);
        }

        return hits;
    }

    private int countHits(long key, int index) {
        int numHits = 0;
        while (keys[index] != NULL) {
            if (keys[index] == key) ++numHits;
            index = successor(index);
        }
        return numHits;
    }

    private int indexFor(long key) {
        // the hashing constant is (the golden ratio * Long.MAX_VALUE) + 1
        // see The Art of Computer Programming, section 6.4
        // the constant has two important properties:
        // (1) it is coprime with 2^64, so multiplication by it is a bijective function, and does not generate collisions in the hash
        // (2) it has a 1 in the bottom bit, so it does not add zeroes in the bottom bits of the hash, and does not generate (gratuitous) collisions in the index
        long hash = key * 5700357409661598721L;
        return Math.abs((int) (hash % keys.length));
    }

    private int successor(int index) {
        return (index + 1) % keys.length;
    }

    public int size() {
        return size;
    }

} 
```

请注意，这是一个固定大小的结构。您需要创建足够大的数据来保存所有数据——我的 1.1 亿个条目占用了 1.32 GB。你做得越大，超出存储数据所需的容量，插入和查找的速度就越快。我发现对于 1.1 亿个条目，负载因子为 0.5（2.64 GB，所需空间的两倍），查找密钥平均需要 403 纳秒，但负载因子为 0.75（1.76 GB，比所需空间多三分之一），花费了 575 纳秒。将负载因子降低到 0.5 以下通常不会产生太大的影响，实际上，在负载因子为 0.33（4.00 GB，比所需空间多三倍）的情况下，我得到的平均时间为 394 纳秒。因此，即使您有 5 GB 可用空间，也不要全部使用。

另请注意，零不允许作为键。如果这是一个问题，请将空值更改为其他值，并在创建时使用该值预填充键数组。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-08T16:47:33.330

> 是否有任何 Java 库可以正确满足我的所有这些需求。

AFAIK 没有。或者至少，没有一个可以最大限度地减少内存占用。

但是，编写一个专门满足这些要求的自定义地图类应该很容易。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-09T07:34:05.933

基于@Tom Andersons 解决方案，我消除了分配对象的需要，并添加了性能测试。

```
import java.util.Arrays;
import java.util.Random;

public class LongIntParallelHashMultimap {
    private static final long NULL = Long.MIN_VALUE;

    private final long[] keys;
    private final int[] values;
    private int size;

    public LongIntParallelHashMultimap(int capacity) {
        keys = new long[capacity];
        values = new int[capacity];
        Arrays.fill(keys, NULL);
    }

    public void put(long key, int value) {
        if (key == NULL) throw new IllegalArgumentException("key cannot be " + NULL);
        if (size == keys.length) throw new IllegalStateException("map is full");

        int index = indexFor(key);
        while (keys[index] != NULL) {
            index = successor(index);
        }
        keys[index] = key;
        values[index] = value;
        ++size;
    }

    public int get(long key, int[] hits) {
        if (key == NULL) throw new IllegalArgumentException("key cannot be " + NULL);

        int index = indexFor(key);

        int hitIndex = 0;

        while (keys[index] != NULL) {
            if (keys[index] == key) {
                hits[hitIndex] = values[index];
                ++hitIndex;
                if (hitIndex == hits.length)
                    break;
            }
            index = successor(index);
        }

        return hitIndex;
    }

    private int indexFor(long key) {
        return Math.abs((int) (key % keys.length));
    }

    private int successor(int index) {
        index++;
        return index >= keys.length ? index - keys.length : index;
    }

    public int size() {
        return size;
    }

    public static class PerfTest {
        public static void main(String... args) {
            int values = 110* 1000 * 1000;
            long start0 = System.nanoTime();
            long[] keysValues = generateKeys(values);

            LongIntParallelHashMultimap map = new LongIntParallelHashMultimap(222222227);
            long start = System.nanoTime();
            addKeyValues(values, keysValues, map);
            long mid = System.nanoTime();
            int sum = lookUpKeyValues(values, keysValues, map);
            long time = System.nanoTime();
            System.out.printf("Generated %.1f M keys/s, Added %.1f M/s and looked up %.1f M/s%n",
                    values * 1e3 / (start - start0), values * 1e3 / (mid - start), values * 1e3 / (time - mid));
            System.out.println("Expected " + values + " got " + sum);
        }

        private static long[] generateKeys(int values) {
            Random rand = new Random();
            long[] keysValues = new long[values];
            for (int i = 0; i < values; i++)
                keysValues[i] = rand.nextLong();
            return keysValues;
        }

        private static void addKeyValues(int values, long[] keysValues, LongIntParallelHashMultimap map) {
            for (int i = 0; i < values; i++) {
                map.put(keysValues[i], i);
            }
            assert map.size() == values;
        }

        private static int lookUpKeyValues(int values, long[] keysValues, LongIntParallelHashMultimap map) {
            int[] found = new int[8];
            int sum = 0;
            for (int i = 0; i < values; i++) {
                sum += map.get(keysValues[i], found);
            }
            return sum;
        }
    }
} 
```

印刷

```
Generated 34.8 M keys/s, Added 11.1 M/s and looked up 7.6 M/s 
```

在带有 Java 7 update 3 的 3.8 GHz i7 上运行。

这比之前的测试慢得多，因为您正在访问主内存，而不是随机访问缓存。这真的是对你记忆速度的考验。写入速度更快，因为它们可以异步执行到主存储器。

* * *

使用这个集合

```
final SetMultimap<Long, Integer> map = Multimaps.newSetMultimap(
        TDecorators.wrap(new TLongObjectHashMap<Collection<Integer>>()),
        new Supplier<Set<Integer>>() {
            public Set<Integer> get() {
                return TDecorators.wrap(new TIntHashSet());
            }
        }); 
```

使用 5000 万个条目（大约使用 16 GB）运行相同的测试，`-mx20g`我得到以下结果。

```
 Generated 47.2 M keys/s, Added 0.5 M/s and looked up 0.7 M/s 
```

对于 1.1 亿个条目，您将需要大约 35 GB 的内存和一台比我的 (3.8 GHz) 快 10 倍的机器来每秒执行 500 万次添加。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-08T17:01:34.027

寻找数据库是个好主意，因为像这样的问题正是它们的设计目的。近年来，Key-Value 数据库变得非常流行，例如用于 Web 服务（关键字“NoSQL”），因此您应该找到一些东西。

自定义数据结构的选择还取决于您是要使用硬盘驱动器来存储数据（以及它的安全性）还是在程序退出时完全丢失。

如果手动实现并且整个数据库很容易适应内存，我只需在 C 中实现一个哈希图。创建一个哈希函数，从一个值中给出一个（良好分布的）内存地址。如果已经分配，​​则插入那里或旁边。然后分配和检索是 O(1)。如果您在 Java 中实现它，则每个（原始）对象都会有 4 字节的开销。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-08T17:11:08.513

如果你必须使用 Java，那么实现你自己的 hashtable/hashmap。表的一个重要属性是使用链表来处理冲突。因此，当您进行查找时，您可能会返回列表中的所有元素。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-10-07T11:22:15.467

可能是我回答这个问题迟了，但弹性搜索会解决你的问题。

# java - 清除 JPanel 或 JFrame

> ID：10064425
> 
> 赞同：1
> 
> 时间：2012-04-08T16:35:10.883
> 
> 标签：java, swing, graphics, drawing

不使用`super.paintComponent(g);`我还能清除我的 Jpanel 或 Jframe 屏幕吗？我在 JPanel 上绘制了一些形状，当用户在不使用此方法的情况下单击右键时，我想清除所有绘图。或者我说是否有任何替代`super.paintCompenent(g)`方法或方法，例如`clrscr();`在 Java 中。

**编辑**

```
 public void mousePressed(MouseEvent e) {
            super.paintComponents(null); //i want to use this method here?? how can i? 
            if(e.isPopupTrigger())
            {
                s=e.getX();
                as=e.getY();
              try {
                    Thread.sleep(10L);
                } catch (InterruptedException ex) {
                    Logger.getLogger(animate.class.getName()).log(Level.SEVERE, null, ex);
                }
        p.repaint();
            }
        } 
```

我正在画这样的形状

```
public class mypanel extends JPanel {

   @Override
    public void paintComponent(Graphics g)
    {

       super.paintComponent(g);
        Graphics2D g2=(Graphics2D)g ;

        Color[] c = {Color.BLUE, Color.RED, Color.GREEN, Color.YELLOW, 
                 Color.MAGENTA, Color.WHITE, Color.ORANGE, Color.PINK};
    for(int i=0; i<8; ++i){
        g2.setColor(c[i]);
        int start_angle=i*45;
    g2.fillArc(mx-100, my-100, 200, 200, start_angle,45);

    } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-08T17:12:20.900

mre 解决方案实际上是一个好主意，但是如果另一个重绘出现，您可能会遇到问题（因为您移动了 JFrame，因为您调整了它的大小，因为另一个窗口出现在它上面然后离开，等等...）

或者，您可以使用以下方法使更改永久生效：

```
public class mypanel extends JPanel {

    private boolean draw = true;

    @Override
    public void paintComponent(Graphics g)
    {

        super.paintComponent(g);
        if (draw) {
            Graphics2D g2=(Graphics2D)g ;

            Color[] c = {Color.BLUE, Color.RED, Color.GREEN, Color.YELLOW, 
                     Color.MAGENTA, Color.WHITE, Color.ORANGE, Color.PINK};
            for(int i=0; i<8; ++i){
                g2.setColor(c[i]);
            int start_angle=i*45;
            g2.fillArc(mx-100, my-100, 200, 200, start_angle,45);
        }
    }

    public void setDraw(boolean draw) {
        this.draw = draw;
        repaint();
    }
} 
```

然后你可以通过调用 mypanel.setDraw(boolean) 在你的 JPanel simlpy 中绘制或不绘制

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-08T17:01:16.350

也许[`Graphics#clearRect`](http://docs.oracle.com/javase/7/docs/api/java/awt/Graphics.html#clearRect%28int,%20int,%20int,%20int%29)是你正在寻找的？

# wcf - NET Remoting and MarshalByRefObject is really dead?

> ID：10064431
> 
> 赞同：8
> 
> 时间：2012-04-08T16:35:43.337
> 
> 标签：wcf, add-in, remoting, .net

I'm working on a project requiring inter-AppDomain-intra-process and inter-process-intra-machine communication. Yes... I know... NET Remoting is widely considered a legacy technology but I'm facing with two very special problems and maybe in these scenario WCF is not a full replacement of NET Remoting.

1) inter-AppDomain-intra-process communication

The application I'm working on start and need to search and load one on more addins. I wish to load each addin in a separate AppDomain. I need a way to create the each Addin instance in his AppDomain and call some interface methods of this instance at some point. Here NET Remoting is the only way, right? Moreover if we wish to apply the System.Addins paradigm, apparently based only NET Remoting and not marked as obsolete...

2) inter-process-intra-machine communication

Here I can for sure expose from my application a WCF service and call this service from my client using Named Pipes.

What I really want to do is to expose an object model from my application, so that my application can be automated from some NET client, much like the OLE/COM Automation object model exposed by Excel. Any COM Client can get an object reference to Excel.Application and query open documents, open some new documents and so on.

I think WCF is good to communicate in a platform independent way. But in this case I need only to communicate from Net client to Net application on the same machine. WCF service phylosophy don't allow, I think, to expose a rich object model with objects, collection, field, static member, method overloading... Or I'm wrong?

Please excuse my bad english and my perhaps newbie question.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-04T07:17:44.530

您可以在此处阅读类似问题的答案：[.NET Remoting 真的已弃用吗？](https://stackoverflow.com/questions/1294494/is-net-remoting-really-deprecated)

我可以补充一点，我最近使用 .NET Remoting 进行了相对简单的双向进程间通信，并且几乎无缝进行，所以我可以说它在多年来没有得到 Microsoft 的积极支持之后仍然非常有用。

至于 COM，如果您对 COM 客户端可以访问您的产品有强烈要求，我建议通过 COM 互操作显式实现 COM 接口。此外，还有一篇关于同时使用 COM 和 .NET Remoting 的有趣文章，您可能会感兴趣：http: [//msdn.microsoft.com/en-us/magazine/cc164085.aspx](http://msdn.microsoft.com/en-us/magazine/cc164085.aspx)

# browser - 图像查看器的篡改图像漏洞如何工作？他们可以被托管代码和随机像素更改打败吗？

> ID：10064432
> 
> 赞同：3
> 
> 时间：2012-04-08T16:35:49.027
> 
> 标签：browser, exploit, image-formats

我读过一些图像查看器被适当篡改的图像（以特别适合的格式？不确定细节）攻击。

那么，如何才能彻底消除这种威胁呢？例如，假设我们为受影响的格式创建了一个用托管代码编写的查看器，并将图像转换为纯 BMP（或其他简单到无法破解其查看器的东西）；问题会消失吗？如何首先转换为 BMP，然后引入一些普遍的小随机像素更改以更好地破坏可能的黑客攻击？

假设这个图像清理转换器将被合并到防火墙中，因此默认情况下，只有“安全”的清理图像最终会在常规浏览期间加载。这能解决问题吗？还是由于对基于图像的漏洞利用的性质的理解有缺陷，我的推理不正确？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T19:37:08.110

我认为，您的问题归结为攻击是存在于*数据*中还是存在于*图像*中。如果它在数据中，那么只需对图像进行解码并使用已知良好的编码器重新编码即可确保安全。如果它在图像中，那么您可能需要更改像素。

著名的例子是[对长度不正确的 JPEG 注释字段的错误处理](http://www.openwall.com/articles/JPEG-COM-Marker-Vulnerability)，最初是 Netscape 中的一个错误，但后来独立引入[Windows](http://www.unital.com/research/ms_jpeg.pdf)。这在很大程度上是一个数据问题，而不是图像问题。有问题的数据部分甚至不是图像数据，而是元数据。如果您使用沙盒解码器对图像进行解码，可能会检测损坏的评论字段并从中恢复，然后使用友好的编码器对其进行重新编码，即使对于易受攻击的解码器，结果也是安全的。天真地这样做会导致质量下降；可以对 JPEG 进行无损转码，但它需要专门的代码来执行此操作。

我的直觉是图像级别的攻击是不可能的，只有数据级别的攻击。图像格式已经足够明确，而且从根本上来说也足够简单，以至于图像的内容真的不应该影响解码过程。但是，我当然无法证明这一点，甚至也无法为此争论。

# django - how to set windows-1251 in csv file generated in django

> ID：10064434
> 
> 赞同：1
> 
> 时间：2012-04-08T16:36:11.503
> 
> 标签：django

I am generating .csv file in django:

```
if request.GET.get('format', None) == 'csv':
    # Create the HttpResponse object with the appropriate CSV header.
    response = HttpResponse(content_type='text/csv; charset=windows-1251')
    response['Content-Disposition'] = 'attachment; filename=stat.csv'

    t = loader.get_template('stat/csv.djhtml')
    c = Context({
        'data': table,
        'total': total,
    })
    response.write(t.render(c))
    return response 
```

In csv.djhtml:

```
Дата/Время;Показов;Кликов;CTR;Доход/Расход
{% for item in data %}
    {{item.time}};{{item.views}};{{item.clicks}};{{item.ctr}} %;{{item.income|floatformat:2}} p.
{% endfor %} 
```

File is generated with UTF8 encoding. How can I make this file be generated with windows-1251?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T17:14:03.590

```
...
response.write(t.render(c).encode('cp1251'))
return response 
```

# c# - Updating DataGridViews source programmatically?

> ID：10064435
> 
> 赞同：0
> 
> 时间：2012-04-08T16:36:12.447
> 
> 标签：c#, winforms, datagridview

After I change the DataGridView cell's value programmatically, the source cannot be updated. What can I do?

```
datagridview1.DataSource = bindingsource1;
datagridview1.Rows[0].Cells[0].Value = "1"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T16:40:43.583

您需要在 datagridview 上调用刷新

```
datagridview1.Refresh(); 
```

如果您处于编辑模式，那么您应该使用 EndEdit

```
datagridview1.EndEdit();
datagridview1.Refresh(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T11:52:44.450

`DataSet`你需要在我的代码下面写回

```
private void button2_Click(object sender, EventArgs e)
{
    this.Validate();

    try
    {
        dgvArticles.CurrentRow.Cells[1].Value = txtSubject.Text;
        dgvArticles.CurrentRow.Cells[2].Value = rtbBodyContent.Text;
        dgvArticles.CurrentRow.Cells[3].Value = pbPrimaryPicture.Image;
        dgvArticles.CurrentRow.Cells[4].Value = pbSecondaryPicture.Image;
        dgvArticles.CurrentRow.Cells[5].Value = pbThirdPicture.Image;
    }
    catch
    {
        MessageBox.Show(e.ToString());
    }

    AccessingNetFamerDatabase anfdArticles = new AccessingNetFamerDatabase();
    if (_dsArticles!= null)
    {
        SqlCommandBuilder _sqlCBArticles = new SqlCommandBuilder(AccessingNetFamerDatabase._sqlDataAdapter);
        AccessingNetFamerDatabase._sqlDataAdapter.Update(_dsArticles.Tables[0]);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-08T20:06:42.733

我认为您需要手动执行此操作。将数据绑定到gridview。更新网格视图。选择已更新的单元格，将数据保存回数据并从数据源中提取数据并刷新网格视图。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-11T16:25:39.837

我有同样的问题，能够通过在绑定源上调用 EndEdit() 来解决它。

例如

```
bs.EndEdit();

int x1 = data.Update(dt); 
```

然后更新返回更新的行数。在添加 EndEdit 之前，它始终为零

# c# - AutoMapper 是否有比显式 CreateMap 更简洁的方法从 null 转换为空 GUID？

> ID：10064442
> 
> 赞同：1
> 
> 时间：2012-04-08T16:37:39.040
> 
> 标签：c#, .net, automapper

我的 Code First 数据模型中有几个不可为空的 GUID 属性，它们映射到`Guid?`我的视图模型中。我没有使用空 GUID（全为零），所以我使用以下映射，但我不禁想知道是否有更简洁的方法来做到这一点？AutoMapper 配置的未知深度将花费我数年时间独自探索。

```
Mapper.CreateMap<Guid, Guid?>().ConvertUsing(guid => guid == Guid.Empty ? (Guid?)null : guid);
Mapper.CreateMap<Guid?, Guid>().ConvertUsing(guid => !guid.HasValue ? Guid.Empty : guid.Value); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T18:31:44.070

创建自定义类型转换器。

[https://github.com/AutoMapper/AutoMapper/wiki/Custom-type-converters](https://github.com/AutoMapper/AutoMapper/wiki/Custom-type-converters)

```
 public class NullableByteToNullableIntConverter : ITypeConverter<Byte?, Int32?>
    {
        public Int32? Convert(ResolutionContext context)
        {
            return context.IsSourceValueNull ? (int?) null : System.Convert.ToInt32(context.SourceValue);
        }
    } 
```

然后：

```
 Mapper.CreateMap<byte?, int?>().ConvertUsing<NullableByteToNullableIntConverter>(); 
```

# c++ - 类在模板中找不到内部定义的 C++ 类

> ID：10064445
> 
> 赞同：0
> 
> 时间：2012-04-08T16:37:54.720
> 
> 标签：c++, compiler-errors

我有下面的代码，编译器错误是：为什么graph_algorithm在图类里面找不到顶点类？

```
graph_algorithms.h:26:33: error: ‘Graph::graph<T>::vertex’ is not a type
graph_algorithms.h:26:55: error: ‘Graph::graph<T>::vertex’ is not a type
graph_algorithms.h: In member function ‘bool Graph::graph_algorithm<T>::vertex_comparer::operator()(int&, int&)’:
graph_algorithms.h:28:10: error: ‘t1’ was not declared in this scope
graph_algorithms.h:28:21: error: ‘t2’ was not declared in this scope
graph_algorithms.h:28:33: error: expected primary-expression before ‘return’
graph_algorithms.h:28:33: error: expected ‘:’ before ‘return’
graph_algorithms.h:28:33: error: expected primary-expression before ‘return’
graph_algorithms.h:28:33: error: expected ‘;’ before ‘return’
graph_algorithms.h:29:7: warning: no return statement in function returning non-void [-Wreturn-type] 
```

* * *

```
#ifndef GRAPH_H_
#define GRAPH_H_

#include <list>
#include <algorithm>
#include <vector>
#include <utility>
#include <iostream>
#include <stdexcept>
#include <assert.h>

namespace Graph
{
  template <class T>
  class graph
  {
  // Forward Declarations
  private:
    class vertex;
    class edge;
    template <class U>
    friend class graph_algorithm;

  public :
    explicit graph(const std::vector<std::pair<T, T> > &vertices);
    ~graph()
    {}
    void insert_vertex_pair_by_keys(T key1, T key2);
    const std::list<vertex> &vertices() const {return m_Vertices;}

  // Private contained classes
  private:
    struct edge
    {
      edge(vertex *edge, T weight) :
        m_Edge(edge),
        m_Weight(weight)
      {}
      vertex *m_Edge;
      T m_Weight;
    }; // END EDGE

    class vertex
    {
    public:
      vertex(T key) :
        m_Key(key)
      {}
      void connect_edge(vertex *adjacent);
      const T key() const {return m_Key;}
      const std::list<edge> &edges() const {return m_Edges;}
    private:
      std::list<edge> m_Edges;
      T m_Key;
      bool contains_edge_to_vertex_with_key(const T key);
    }; // END VERTEX

   // Private methods and member variables
   private:
     std::list<vertex> m_Vertices;
     vertex *contains_vertex(const T key);
  };
}

/*!
 * Constructor of graph: Take a pair of vertices as connection, attempt 
 * to insert if not already in graph. Then connect them in edge list
 */
template <class T>
Graph::graph<T>::graph(const std::vector<std::pair<T, T> > &vertices_relation)
{

#ifndef NDEBUG
  std::cout << "Inserting pairs: " << std::endl;
#endif

  typename std::vector<std::pair<T, T> >::const_iterator insert_it = vertices_relation.begin();
  for(; insert_it != vertices_relation.end(); ++insert_it) {

#ifndef NDEBUG
    std::cout << insert_it->first << " -- > " << insert_it->second << std::endl;
#endif

    /*
     * Insert vertex by key pairs into the graph 
     */  
    insert_vertex_pair_by_keys(insert_it->first, insert_it->second);
  }

#ifndef NDEBUG
  std::cout << "Printing results: " << std::endl;
  typename std::list<vertex>::iterator print_it = m_Vertices.begin();
  for(; print_it != m_Vertices.end(); ++print_it) {
    std::cout << print_it->key() << " --| ";
    typename std::list<edge>::const_iterator edge_it = print_it->edges().begin();
    for(; edge_it != print_it->edges().end(); ++edge_it) {
      std::cout << edge_it->m_Edge->key() << " --> ";
    }
    std::cout << std::endl;
    std::cout <<  "|" << std::endl;
    std::cout <<  "V" << std::endl;
  }
#endif
}

/*!
 * Takes in a value of type T as a key and 
 * inserts it into graph data structure if 
 * key not already present
 */
template <typename T>
void Graph::graph<T>::insert_vertex_pair_by_keys(T key1, T key2)
{
  /*
   * Check if vertices already in graph
   */
  Graph::graph<T>::vertex *insert1 = contains_vertex(key1);
  Graph::graph<T>::vertex *insert2 = contains_vertex(key2);

  /*
   * If not in graph then insert it and get a pointer to it
   * to pass into edge. See () for information on how
   * to build graph
   */ 
  if (insert1 == NULL) {
    m_Vertices.push_back(vertex(key1));
    insert1 = contains_vertex(key1);
  }
  if (insert2 == NULL) {
    if (key1 != key2) {
      m_Vertices.push_back(vertex(key2));
    }
    insert2 = contains_vertex(key2);
  }

#ifndef NDEBUG
    assert(insert1 != NULL && "Failed to insert first vertex");
    assert(insert2 != NULL && "Failed to insert second vertex");
#endif

  /*!
   * At this point we should have a vertex to insert an edge on
   * if not throw an error.
   */ 
  if (insert1 != NULL && insert2 != NULL) {
    insert1->connect_edge(insert2);
    insert2->connect_edge(insert1);
  } else {
    throw std::runtime_error("Unknown");
  }
}

/*!
 * Search the std::list of vertices for key
 * if present return the vertex to indicate
 * already in graph else return NULL to indicate
 * new node
 */
template <typename T>
typename Graph::graph<T>::vertex *Graph::graph<T>::contains_vertex(T key)
{
  typename std::list<vertex >::iterator find_it = m_Vertices.begin();
  for(; find_it != m_Vertices.end(); ++find_it) {
    if (find_it->key() == key) {
      return &(*find_it);
    }
  }
  return NULL;
}

/*!
 * Take the oposing vertex from input and insert it
 * into adjacent list, you can have multiple edges
 * between vertices
 */
template <class T>
void Graph::graph<T>::vertex::connect_edge(Graph::graph<T>::vertex *adjacent)
{
  if (adjacent == NULL)
    return;

  if (!contains_edge_to_vertex_with_key(adjacent->key())) {
    Graph::graph<T>::edge e(adjacent, 1);
    m_Edges.push_back(e);
  }
}

/*!
 * Private member function that check if there is already
 * an edge between the two vertices
 */
template <class T>
bool Graph::graph<T>::vertex::contains_edge_to_vertex_with_key(const T key)
{
  typename std::list<edge>::iterator find_it = m_Edges.begin();
  for(; find_it != m_Edges.end(); ++find_it) {
    if (find_it->m_Edge->key() == key) {
      return true;
    }   
  }
  return false;
}
#endif 
```

* * *

```
#ifndef GRAPH_ALGORITHMS_H_
#define GRAPH_ALGORITHMS_H_

#include "graph.h"

namespace Graph
{ 
  template <class T>
  class graph_algorithm
  {
  // Forward declarations of 
  // internal classes
  private :
    class vertex_comparer;

  public :
    graph_algorithm(graph<T> *&graph) :
      m_Graph(graph)
    {}

  // Definition of internal classes
  private :
    class vertex_comparer
    {
    public:
      bool operator()(graph<T>::vertex &v1, graph<T>::vertex &v2)
      {
        (t1.key() < t2.key()) ? return true : return false;
      }
    };
  private :
    graph<T> *m_Graph;
  };
}

#endif 
```

* * *

```
#include "graph_algorithms.h"
#include "graph.h"
#include <cstdlib>

int main(int argc, char *argv[])
{
  std::vector<std::pair<int, int> > graph_vect;
  for (int i = 0; i < 100; i++) {
    graph_vect.push_back(std::pair<int, int>(rand()%20, rand()%20));
  }
  Graph::graph<int> my_graph(graph_vect);
  return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T16:45:27.200

通常，如果您在使用模板时看到编译错误，那么*最初*的几个疑问之一应该是您忘记`typename`为依赖类型编写，例如：

```
bool operator()(graph<T>::vertex &v1, graph<T>::vertex &v2) 
```

应该是这样的：

```
bool operator()(typename graph<T>::vertex &v1, typename graph<T>::vertex &v2) 
```

你看到了`typename`吗？同样，您也需要`typename`在代码中的任何地方编写 - 无论您使用依赖类型的任何地方。

如果您想知道什么是依赖类型、放置位置以及为什么放置`typename`依赖类型，请阅读以下内容：

*   [我必须在哪里以及为什么要放置“模板”和“类型名称”关键字？](https://stackoverflow.com/questions/610245/where-and-why-do-i-have-to-put-the-template-and-typename-keywords)

`private`除此之外，您还需要了解成员和成员之间的区别`public`——无论是*类型*还是*变量*。在您的情况下，嵌套类型是`private`，我认为应该是`public`。

# php - 在 jquery 中向 PHP 发送两个数组

> ID：10064450
> 
> 赞同：0
> 
> 时间：2012-04-08T16:38:40.630
> 
> 标签：php, jquery

我有两个数组，我需要将数组值发送到 PHP。当我打印从 PHP 返回的值时，它会打印一个空字符串。我怎么才能得到它？我的代码如下。

```
$.ajax({
    type: "POST",
    url: "test2.php",
    data: {
        price: [101, 69, 51],
        id: [1, 2, 3]
    },
    success: function(response) {
        alert(response);
    }
})​;​ 
```

在 PHP 中

```
 $id=mysql_real_escape_string($_POST['id'][0]);        
  echo $id; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T16:43:18.183

尝试运行`var_dump($_POST)`。这样你就可以准确地看到数组的结构是什么，所以你知道如何访问它。

# ruby-on-rails - Coffeescript and problems with encodings of Ruby 1.9

> ID：10064452
> 
> 赞同：1
> 
> 时间：2012-04-08T16:38:56.060
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1, coffeescript, ruby-1.9

A basic task: evaluate field's value and show warning if results are not satisfying. The actual code doesn't matter, since it works perfectly until I actually change sample warning's test to the one, which should actually be there, which throws this accursed error at me:

```
Error: Encoding::UndefinedConversionError: U+0417 from UTF-8 to ISO-8859-1 
```

In any other case I would've used i18n or magic comment, but neither seem to work here, since apparently you can't mix ruby into .coffee file. Is there any way to avoid this without resorting to putting unnecessary javascript into views?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-08T16:43:07.467

您**可以**在咖啡脚本资产中使用 ruby​​。只需将文件重命名为`.js.erb.coffee`并使用 good old `<%= ruby_code %>`。

# java - Can we create GUI for standalone application using html and javascript?

> ID：10064453
> 
> 赞同：3
> 
> 时间：2012-04-08T16:39:22.190
> 
> 标签：java, html, swing, user-interface

I have a Java program which until now used to get the input from command line and then proceed accordingly.

Now, I want to have a basic GUI for this. It will need a few buttons which will trigger the events. I am experienced in HTML and JavaScript. Is it possible to write in HTML (or similar syntax) to generate the GUI?

I don't want to go in Swing and awt solution, because I would rather concentrate on the main program than on the GUI.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-08T23:00:43.600

这是另一种选择。另请参阅[*如何在 Swing 组件中使用 HTML*](http://docs.oracle.com/javase/tutorial/uiswing/components/html.html)。

![在此处输入图像描述](../Images/c93d778d66d63b5c8b8e36d5d79804e4.png)

```
import java.awt.EventQueue;
import java.awt.FlowLayout;
import java.awt.GridLayout;
import java.awt.event.ActionEvent;
import java.io.File;
import javax.swing.AbstractAction;
import javax.swing.JButton;
import javax.swing.JFileChooser;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.JTextField;

/**
 * @see http://stackoverflow.com/a/10067256/230513
 * @see http://stackoverflow.com/a/7454691/230513
 */
public class Pathfinder extends JPanel {

    private static final int TEXT_SIZE = 32;
    private JTextField srcField = new JTextField(TEXT_SIZE);
    private JTextField dstField = new JTextField(TEXT_SIZE);
    private JTextField valueField1 = new JTextField(TEXT_SIZE);
    private JTextField valueField2 = new JTextField(TEXT_SIZE);
    private String srcPath, dstPath, value1, value2;

    public Pathfinder() {
        super(new GridLayout(0, 1));
        this.add(createPathPanel("Source Directory", srcField));
        this.add(createPathPanel("Target Directory", dstField));
        this.add(createFieldPanel("Some Value:", valueField1));
        this.add(createFieldPanel("Another Value:", valueField2));
        JPanel submitPanel = new JPanel();
        submitPanel.add(new JButton(new AbstractAction("Submit") {

            @Override
            public void actionPerformed(ActionEvent e) {
                srcPath = srcField.getText();
                dstPath = dstField.getText();
                value1 = valueField1.getText();
                value2 = valueField2.getText();
                process();
            }
        }));
        this.add(submitPanel);
    }

    private void process() {
        // see ProcessBuilder http://stackoverflow.com/questions/5740390
        System.out.println(srcPath);
        System.out.println(dstPath);
        System.out.println(value1);
        System.out.println(value2);
    }

    private JPanel createPathPanel(String name, final JTextField jtf) {
        JPanel panel = new JPanel(new FlowLayout(FlowLayout.TRAILING));
        panel.add(new JButton(new AbstractAction(name) {

            @Override
            public void actionPerformed(ActionEvent e) {
                JFileChooser jfc = new JFileChooser(
                    new File(System.getProperty("user.dir")));
                jfc.setFileSelectionMode(JFileChooser.DIRECTORIES_ONLY);
                int result = jfc.showOpenDialog(Pathfinder.this);
                if (result == JFileChooser.APPROVE_OPTION) {
                    jtf.setText(jfc.getSelectedFile().getPath());
                }
            }
        }));
        panel.add(jtf);
        return panel;
    }

    private JPanel createFieldPanel(String name, JTextField jtf) {
        JPanel panel = new JPanel(new FlowLayout(FlowLayout.TRAILING));
        panel.add(new JLabel(name));
        panel.add(jtf);
        return panel;
    }

    private void display() {
        JFrame f = new JFrame("Pathfinder");
        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        f.add(this);
        f.pack();
        f.setLocationRelativeTo(null);
        f.setVisible(true);
    }

    public static void main(final String[] args) {

        EventQueue.invokeLater(new Runnable() {

            @Override
            public void run() {
                Pathfinder pf = new Pathfinder();
                if (args.length > 0) {
                    pf.srcPath = args[0];
                    pf.dstPath = args[1];
                    pf.process();
                } else {
                    pf.display();
                }
            }
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-08T17:59:33.763

> 我想为此有一个基本的 GUI。它需要几个按钮来触发事件。

这个“基本 GUI”稍微超出了规范。添加输出区域。

![简单事件 GUI](../Images/be52986bff97d8a35403b9c52da6ce9a.png)

![在此处输入图像描述](../Images/a25c57c3ff2a53ca7a0b5e3af3f7cb29.png)

```
import java.awt.*;
import javax.swing.*;

class SimpleEventGUI {

    SimpleEventGUI() {
        JPanel gui = new JPanel(new BorderLayout());
        JToolBar toolBar = new JToolBar();
        for (int ii=1; ii<6; ii++) {
            toolBar.add(new JButton("Event " + ii));
            if (ii%2==0) {
                toolBar.addSeparator();
            }
        }
        gui.add(toolBar, BorderLayout.NORTH);
        gui.add( new JScrollPane(new JTextArea(5,30)), BorderLayout.CENTER );

        JOptionPane.showMessageDialog(null, gui);
    }

    public static void main(String[] args) {

        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                new SimpleEventGUI();
            }
        });
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-08T17:04:01.167

您可以考虑使用带有[Window Builder的](https://developers.google.com/java-dev-tools/wbpro/)[Google Web Toolkit](https://developers.google.com/web-toolkit/) ，它允许您使用 Java 构建丰富的 Internet 界面并与现有逻辑进行交互。

如果你想要快速的东西，你可以使用[Window Builder构建一个 Swing GUI](https://developers.google.com/java-dev-tools/wbpro/)

# graphviz - Can I auto-fit the width of Graphviz nodes using dot?

> ID：10064454
> 
> 赞同：4
> 
> 时间：2012-04-08T16:39:30.510
> 
> 标签：graphviz, dot

Please does anyone know if there's a way to make Graphviz's `dot` program (note: not `neato`, although I'd also be somewhat interested in answers for that) auto-fit the width of nodes to accommodate the labels I specify? At the moment I have this

```
digraph
{
    node [shape=record];
    n [label="This is a very long caption"];
} 
```

but the node ends up too small to accommodate the caption:

![Bad Graphviz output](../Images/529536d099cd8cf79991687e9ba5366f.png)

I found an option called `fixedsize`, which in theory I should be able to set to `false` in order to make the nodes expand to fit their labels:

[http://www.graphviz.org/doc/info/attrs.html#d:fixedsize](http://www.graphviz.org/doc/info/attrs.html#d:fixedsize)

Unfortunately, it doesn't work, as this gives me the same result:

```
digraph
{
    node [shape=record, fixedsize=false];
    n [label="This is a very long caption"];
} 
```

Any ideas please?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T19:47:06.197

*您的示例中*的节点标签宽度实际上在使用`dot`.

`fixedsize=false`（默认）如果输出格式是点*，*则任何给定的值都应该产生给定的宽度值：[`width`](http://www.graphviz.org/doc/info/attrs.html#d%3awidth)

> 另请注意，如果输出格式为点，则赋予宽度的值将是最终值。

您的 graphviz 版本可能存在问题 - 您是否尝试使用最新版本？

# clojure - clojure：在“if”中删除重复的惯用方式？

> ID：10064455
> 
> 赞同：5
> 
> 时间：2012-04-08T16:39:38.637
> 
> 标签：clojure, refactoring, lisp

我对clojure很陌生，而且我以前没有做过大量的lisp。我有一个包含以下内容的函数：

```
(defn chord 
    ([scale degree num_voices]
    (if 
        (keyword? degree)  
            (take num_voices (take-nth 2 (cycle (invert scale (.indexOf scale degree)))))
            (take num_voices (take-nth 2 (cycle (invert scale degree)))))) 
```

显然，这段代码很糟糕，因为这里有两个几乎相同的函数调用是次优的，唯一的区别是`(.indexOf scale degree)`vs `degree`。

删除此代码重复的 Clojure/Lisp 方式是什么？我觉得它应该涉及一个让，但我并不积极。与此代码块相关的任何其他通用指针也值得赞赏。

**编辑：**我根据安德鲁·库克的建议重构了代码，函数现在显示为：

```
(defn chord
    ([scale degree num_voices]
        (let [degree (if (keyword? degree) (.indexOf scale degree) degree)]
            (take num_voices (take-nth 2 (cycle (invert scale degree))))
        )
    ) 
```

感谢所有这么快回答的人。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-08T17:00:15.610

`if`返回一个表达式，因此反转函数的结构：

```
(defn chord 
    ([scale degree num_voices]
    (take num_voices (take-nth 2 (cycle (invert scale (if (keyword? degree)
                                                              (.indexOf scale degree)
                                                           (invert scale degree)))))))) 
```

如果您使用 let 来捕获`if`.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-08T17:00:34.223

我会写：

```
(defn chord [scale degree num_voices]
  (let [degree (if (keyword? degree) (.indexOf scale degree) degree)]
    (take num_voices (take-nth 2 (cycle (invert scale degree))))) 
```

不确定它是否有帮助 - 没有一般原则，除了使用`let`. 另外，也许其他人不喜欢我用 阴影值的方式`degree`，但在这里我认为它有助于显示意图。

编辑：与其他答案相比，我已经提取了价值。我更喜欢嵌入，因为我发现一长串嵌入评估更难阅读。ymmv。

ps想多一些[这几天后]如果您在多个地方使用这种样式（其中参数可以是一个值或从前一个值中提取数据的键），那么我可能会考虑编写一个宏来自动化该过程（即使用上述形式的自动生成的 let 生成 fn 的东西）。主要问题是决定如何指示以这种方式处理哪些参数（而且，我担心这会如何混淆您正在使用的任何 ide）。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-08T17:00:18.497

在 Clojure（和大多数其他 lisps）`if`中，就像所有其他表达式一样返回一个值。例如，

```
(if (even? 3) 1 0) 
```

评估为`0`。

您可以使用这些知识通过将代码的相同部分移到`if`语句之外来重构代码，如下所示：

```
(defn chord [scale degree num-voices]
  (take num-voices (take-nth 2
                             (cycle (invert scale 
                                            (if (keyword? degree)  
                                                (.indexOf scale degree)
                                                degree)))))) 
```

此外，在 Lisp 中，`-`不是特殊的或保留的，因此您可以并且应该在变量名中使用它。最好使用 lisp 样式来`num-voices`代替`num_voices`or `numVoices`，因为虚线选项被认为更具可读性。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-08T17:03:20.777

没有什么可以做的来简化程序，也许将`if`调用内部移动到`take num_voices`，如下所示：

```
(defn chord ([scale degree num_voices]
   (take num_voices
         (take-nth 2
                   (cycle (invert
                           scale
                           (if (keyword? degree) (.indexOf scale degree) degree))))))) 
```

# r - stat_bin() plot with logarithmic scale in ggplot2

> ID：10064457
> 
> 赞同：2
> 
> 时间：2012-04-08T16:39:40.083
> 
> 标签：r, ggplot2

I have a following plot with logarithmic y-scale that I plotted using **ggplot2** in **R**.

![enter image description here](../Images/201d821ac882e11f7192c62a51ec4d7f.png)

```
convergencePlot = ggplot(allCosts, aes(x=V2))
finalPlot = convergencePlot + stat_bin() + scal_y_log10() 
```

When I plot this I get the following warning:

```
Stacking not well defined when ymin != 0 
```

1.  I do not understand this warning. How can I remove this warning?
2.  I see that the plot starts form 1 for all values of x except some where it starts from 0 and end at 1 (red circle). Is this an error?
3.  Some x-values that I see on the extreme left (I guess 77 and 76) are not present in my original data. How can I remove those values? (green circle)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T16:59:04.243

如果不了解您的实际数据中的内容，很难回答这个问题，但至少有一个猜测：

试试`+ stat_bin(drop = TRUE)`吧。

# php - jQuery 中的轮询是否昂贵，是否有替代方案？

> ID：10064460
> 
> 赞同：1
> 
> 时间：2012-04-08T16:40:08.327
> 
> 标签：php, javascript, jquery

我有几个用户同时访问我的页面，每个客户端轮询（使用 setInverval）另一个 php 脚本，该脚本从数据库中读取一个值并打印它。

```
setInterval( "printData();", 300 ); 
```

我对 jQuery 和 javascript 比较陌生，我对不断运行这个 php 脚本和不断进行数据库查询的可行性持怀疑态度。

有人可以安抚我的神经或提供我当前方法的替代方法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-08T16:42:06.203

您每 0.3 秒更新一次 - 每秒超过 3 次。太多了。根据需要的平滑程度，最多每 5 秒 ( `5000`) 更新一次。

另外，为了让它更快一点，只需去掉引号和括号：

```
setInterval(printData,5000); 
```

# opengl - redefinition of typedef errors in unofficial opengl sdk

> ID：10064464
> 
> 赞同：1
> 
> 时间：2012-04-08T16:40:33.443
> 
> 标签：opengl, codeblocks, redefinition

using the arcsynthesis opengl tutorial and I'm trying to build the unofficial sdk that the examples use, per the instructions here: [http://glsdk.sourceforge.net/docs/html/pg_build.html#page_build_libs](http://glsdk.sourceforge.net/docs/html/pg_build.html#page_build_libs) . (I'm using code::blocks and the gnu gcc compiler, and 0.4.0 of the unofficial sdk) It's not working, I get this error:

> `C:\libs\c\glsdk_0.4.0\glload\source\wgll_ext_base.h|29|error: redefinition of typedef 'GLenum'|`
> 
> `C:\libs\c\glsdk_0.4.0\glload\source\gll_gl_ext_base.h|27|note: previous declaration of 'GLenum' was here|`

repeated several times for other sybmols, including GLBoolean, GLBitField, etc. since I'm pretty sure I'm not supposed to fix this by actually modifying the sdk I'm assuming it's a build/linker muckup on my part, but I'm only using the workspace that premake4 generated, not rolling my own or anything.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T17:47:26.623

> arcsynthesis opengl 教程，我正在尝试根据此处的说明构建示例使用的非官方 sdk：http: [//glsdk.sourceforge.net/docs/html/pg_build.html#page_build_libs](http://glsdk.sourceforge.net/docs/html/pg_build.html#page_build_libs)。

教程分发*随*SDK 一起提供；它位于名为`glsdk`. 您不应该从 SDK 站点下载 SDK。教程构建说明解释了[如何构建它](https://nicolbolas.github.io/oldtut/Building%20the%20Tutorials.html)。

此外，0.4.0 版本有些旧；Code::Blocks（可能还有其他构建）存在构建问题。最新版本是 0.4.2，应该可以工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-07T00:51:12.950

1.  按照 vs2010 的预制说明进行操作
2.  在 Code::Blocks 中，转到文件-->导入项目-->Microsoft Visual Studio 解决方案
3.  从放置 sdk 文件的目录导入 openglsdk.sln

现在 sdk 将作为 Code::Blocks 中的工作区提供。在这篇文章中，非官方的 OpenGL SDK 是 0.50 版本。我用分步说明回答了这个问题，因为我找不到任何关于 Code::Blocks 的内容，而且一些刚开始学习 OpenGL 的人可能需要一些指导。

# android - How to call setServiceInfo Dynamically in AccessibilityService

> ID：10064465
> 
> 赞同：0
> 
> 时间：2012-04-08T16:40:38.090
> 
> 标签：android, service, accessibility

How to invoke setServiceInfo method in AccessibilityService on runtime

```
@Override
protected void onServiceConnected() {
    // TODO Auto-generated method stub
    log("onServiceConnected");
    setServiceInfo();
} 
```

I need to dynamically change the serviceInfo values on runtime based on certain scenarios. I could not find a way to restart the service or call setServiceInfo from another class.

Please suggest me on this, Thanks

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T04:08:14.437

以下是 SDK 提供的 API 示例中 ClockBackService.java 中的一些代码：

```
/**
 * Sets the {@link AccessibilityServiceInfo} which informs the system how to
 * handle this {@link AccessibilityService}.
 *
 * @param feedbackType The type of feedback this service will provide.
 * <p>
 *   Note: The feedbackType parameter is an bitwise or of all
 *   feedback types this service would like to provide.
 * </p>
 */
private void setServiceInfo(int feedbackType) {
    AccessibilityServiceInfo info = new AccessibilityServiceInfo();
    // We are interested in all types of accessibility events.
    info.eventTypes = AccessibilityEvent.TYPES_ALL_MASK;
    // We want to provide specific type of feedback.
    info.feedbackType = feedbackType;
    // We want to receive events in a certain interval. (milliseconds)
    info.notificationTimeout = EVENT_NOTIFICATION_TIMEOUT_MILLIS;
    // We want to receive accessibility events only from certain packages.
    info.packageNames = PACKAGE_NAMES;
    setServiceInfo(info);
} 
```

在示例服务中，从 onServiceConnected 调用它来初始化服务并随后更改所提供的反馈类型。

# php - 有状态服务器为什么不能在 Ruby、PHP、Java、ASP.NET、...中实现？

> ID：10064470
> 
> 赞同：1
> 
> 时间：2012-04-08T16:41:45.077
> 
> 标签：php, asp.net, ruby, erlang

在[这个关于在不缓存的情况下扩展数十万用户的视频中，](http://www.infoq.com/presentations/1000000-Daily-Users-and-No-Cache)这个人正在谈论 Erlang 状态服务器。在他们使用 Ruby Stateless 之前。

有状态服务器实际上是什么意思？用户的会话和服务器上的有状态对象有什么区别？

为什么 Ruby、PHP、Java 或 ASP.NET 不能像 Erlang 那样做呢？

更新：最后那家伙说他不得不将 Erlang 和 Ruby 结合起来，所以这意味着他不能单独使用 Ruby。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T17:55:00.320

我还没有看过演示文稿，但从总结来看，它看起来像是一个游戏平台。这与您的标准业务应用程序完全不同。您的标准业务应用程序维护少量会话本地状态，并且该状态通常不需要在线程之间共享。我们的标准业务应用程序严重依赖数据库和缓存来共享业务数据。

这些多人游戏系统需要对需要由许多线程访问的状态进行近乎实时的操作。这是 Erlang 擅长的地方。并不是说你不能用其他语言做到这一点，而是你不能做到安全或高效。

*   与 Ruby 不同，Erlang 的并发模型中没有锁。Erlang 使用消息传递并发模型（称为 Actor 模型）。没有共享的可变内存，因此避免了很多难以发现的编程错误。
*   Erlang 运行时可以支持数十万个轻量级“进程”，只需很少的开销即可创建和销毁这些“进程”。
*   Erlang 的 per-process heap 使垃圾收集快速并允许近乎实时的应用程序。
*   Erlang 对分布式计算的支持非常好，因此通过添加硬件进行扩展相对容易。
*   Erlang 的异常处理和它的监督模式使管理应用程序错误变得容易，即使在网络上的节点之间也是如此。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-08T17:02:35.617

有状态的服务器/应用程序是在用户请求之间维护某种状态的服务器/应用程序。您的普通 Web 应用程序是无状态的。每个新请求都被视为全新的。如果你想持久化一些信息，你可以使用 session（通常存储在 cookie 中）。

这允许自由扩展网络工作者：您只需启动所需数量的工作者。

有状态的服务器/应用程序允许更快地执行操作（无需每次都从数据库中获取数据）并保存传输的信息（您不需要来回传递 cookie），但您付出的代价是降低了可伸缩性。现在您不能只将传入的请求扔给任何空置的工作人员，您需要将其定向到具有用户状态的工作人员。

当然，您可以使用 Ruby 以两种方式进行编程。Rails/Sinatra 用于无状态 Web 应用程序，EventMachine 用于有状态守护进程。

# node.js - Node.js 与 ZeroMQ + Socket.io + 每个客户端的范围

> ID：10064474
> 
> 赞同：3
> 
> 时间：2012-04-08T16:42:19.067
> 
> 标签：node.js, socket.io, zeromq

我正在使用 node.js 和 express 编写一个 Web 应用程序，以通过 ZeroMQ 和 socket.io 向每个用户提供实时[aprs流。](https://en.wikipedia.org/wiki/Automatic_Packet_Reporting_System)

这个概念是：node.js 应用程序通过订阅 ZeroMQ 发布者将完整的 aprs 流发送给它。当用户访问网页（全屏地图）时，socket.io 会话被建立并将地图当前可见区域的边界发送回服务器。然后，服务器可以将完整提要的范围限定为仅将地图上的新地点发送给用户。

其中大部分运行良好，但是当超过一个人加载该站点时它会中断。当前查看的地图的范围变为全局，如果您缩放/平移一张地图，它将开始向两个浏览器显示新位置上的点。

我需要每个 socket.io 会话保留自己的范围，并且只从其唯一范围的地图边界接收数据，并且对每个访问者都是唯一的。我尝试将`zmqsocket.on "message", (data) ->`回调嵌套在 socket.io 连接中，但它仍然产生相同的结果（即使在正确的回调中声明了 mapbounds 变量。）

可以在此处找到该应用程序的完整源代码：[https ://github.com/gmcintire/aprs.bz](https://github.com/gmcintire/aprs.bz)

如果你想在本地测试应用程序，你应该可以克隆我的 repo，运行`npm install`，然后`coffee app.coffee`开始。请注意，它将开始从我的 ZeroMQ 服务器流式传输完整的 APRS 提要，这可能是 ~100KBytes/sec。

## 应用程序.coffee

```
express = require("express")
routes = require("./routes")
geolib = require("geolib")
zmq = require("zmq")
zmqsocket = zmq.socket("sub")

zmqsocket.connect "tcp://stream.aprs.bz:12777"
zmqsocket.subscribe ""
app = module.exports = express.createServer()
io = require("socket.io").listen(app)

mapbounds = ""

io.sockets.on "connection", (socket) ->
  #console.log socket
  socket.on "mapmove", (mapcoords) ->
    console.log mapbounds
    mapbounds = mapcoords

zmqsocket.on "message", (data) ->
  packet = JSON.parse(data)
  #console.log packet

  if packet.latitude? and packet.longitude? and (mapbounds != "")
    insideMap = geolib.isPointInside
      latitude: packet.latitude
      longitude: packet.longitude
    , [
      latitude: mapbounds._northEast.lat
      longitude: mapbounds._southWest.lng
    ,
      latitude: mapbounds._northEast.lat
      longitude: mapbounds._northEast.lng
    ,
      latitude: mapbounds._southWest.lat
      longitude: mapbounds._northEast.lng
    ,
      latitude: mapbounds._southWest.lat
      longitude: mapbounds._southWest.lng
    ]
    if insideMap
      console.log "\n--------------------------------------------------------\n"
      io.sockets.emit "packet", packet
      console.log packet

app.configure ->
  app.set "views", __dirname + "/views"
  app.set "view engine", "jade"
  app.use express.bodyParser()
  app.use express.methodOverride()
  app.use app.router
  app.use express.static(__dirname + "/public")

app.configure "development", ->
  app.use express.errorHandler(
    dumpExceptions: true
    showStack: true
  )

app.configure "production", ->
  app.use express.errorHandler()

app.get "/", routes.index
if app.settings.env == "development"
  app.listen 3000
else
  app.listen 80

console.log "Express server listening on port %d in %s mode", app.address().port, app.settings.env 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T16:03:49.963

我也不是 CS 或 ZMQ 人，但听起来您正在向太多客户广播数据。`io.sockets.emit`将向所有连接的套接字发出事件。如果您只想将数据发送到 1 个套接字，则应使用已设置为单个套接字对象的`socket.emit`where 。`socket`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T15:20:49.303

我没有使用 Coffee 的经验，但我可以看到您正在全局存储变量。

```
var mapboudns = 10
io.sockets.on('connection', function(socket){
    socket.on("msg", function(data){
      mapbounds = data.bounds; //new value of mapbounds is altered globally
    });
}); 
```

尝试使用类似的东西：

```
socket.set("mapbounds", someNewValue); 
```

并在以后获取值：

```
socket.get("mapbounds"); 
```

或使用集合将每个套接字映射到其相关变量

# operating-system - 内核运行 ISR 例程时的限制

> ID：10064478
> 
> 赞同：5
> 
> 时间：2012-04-08T16:42:49.520
> 
> 标签：operating-system, locking, linux-kernel, interrupt, context-switch

内核模式和 ISR 例程中有哪些重要的注意事项？例如 -

*   运行中断处理程序时是否禁用上下文切换？
*   当进程在关键部分内时会发生上下文切换吗？
*   内核模式内的哪些情况值得禁用进一步的中断？

进程切换为什么会发生在页面错误上，其中进程从磁盘获取数据，但在其他中断发生期间不会发生。您如何对可执行路径是否可以中断/重新调度/抢占进行分类？

当进程处于内核模式或处理 ISR 例程时，还需要记住哪些其他事情？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-09T02:21:30.923

简而言之：**永远没有上下文切换**。

这表示：

*   无抢占
*   互斥锁上没有锁（使用自旋锁代替并确保您的非 ISR 对应方使用 spin_lock_irqsave 获取它们以禁用 IRQ）
*   不调用任何可以休眠的内核函数（检查函数的文档，一些函数也有 _cansleep 变体）。

进程切换可能发生在页面错误上，但它发生*在*相应的 ISR 已处理之后。基本上，如果路径不是 ISR 并且您没有锁定自旋锁，则可以安排路径。如果你持有一个自旋锁，你**必须**避免休眠直到它被释放。

由于 ISR 非常受限制，因此 IRQ 的处理通常分为上半部分（在 ISR 上下文中运行并完成关键工作）和下半部分（稍后作为内核线程运行并执行任何可以延迟的操作）哪个可以睡觉。有关更多信息，请参阅此页面：

[http://www.makelinux.net/ldd3/chp-10-sect-4](http://www.makelinux.net/ldd3/chp-10-sect-4)

# java - HtmlUnit 第一步

> ID：10064488
> 
> 赞同：1
> 
> 时间：2012-04-08T16:43:24.343
> 
> 标签：java, classpath, htmlunit, noclassdeffounderror

我正在尝试使用 HtmlUnit 设置我的第一个示例程序。这是代码：

```
import com.gargoylesoftware.htmlunit.html.HtmlPage;
import com.gargoylesoftware.htmlunit.WebClient;

public class test {

public static void main(String[] args) throws Exception {

    WebClient client = new WebClient();
    HtmlPage currentPage = client.getPage("http://www.oddsportal.com/matches/soccer");
    client.waitForBackgroundJavaScript(10000);
    String textSource = currentPage.asXml();
    System.out.println(textSource);

}

} 
```

然后我编译：

> javac -cp lib/htmlunit-2.9.jar test.java

但是当我尝试执行测试时，我得到了

> java -cp lib/htmlunit-2.9.jar 测试
> 
> 线程“主”java.lang.NoClassDefFoundError 中的异常：测试原因：java.lang.ClassNotFoundException：在 java.security.AccessController.doPrivileged(Native Method) 的 java.net.URLClassLoader$1.run(URLClassLoader.java:217) 测试) 在 java.net.URLClassLoader.findClass(URLClassLoader.java:205) 在 java.lang.ClassLoader.loadClass(ClassLoader.java:321) 在 sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:294) 在 java .lang.ClassLoader.loadClass(ClassLoader.java:266) 找不到主类：test。程序将会退出。

哪里有问题？我缺少一些其他的包？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-08T16:47:52.033

您可能必须将当前路径添加到类路径。

在 Unix/Linux/Mac 上：

```
java -cp .:lib/htmlunit-2.9.jar test 
```

在 Windows 上：

```
java -cp .;lib/htmlunit-2.9.jar test 
```

**编辑** 实际上 htmlunit 需要更多的 jars，而只是 htmlunit-2.9.jar。因此，考虑到所有这些必需的 jar 文件都位于 lib/ 目录中，您实际上应该调用以下命令：

在 Unix/Linux/Mac 上：

```
java -cp .:lib/* test 
```

如果从 shell 运行此命令，还需要转义通配符（使用“\”）或将整个类路径放在引号内以避免 shell 扩展。

在 Windows 上：

```
java -cp .;lib/* test 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T18:57:57.720

这有效：

> java -cp .:lib/* 测试

# c# - 扩展方法是否类似于在 c# 中具有“新”关键字方法？

> ID：10064492
> 
> 赞同：3
> 
> 时间：2012-04-08T16:43:32.593
> 
> 标签：c#, .net, inheritance, extension-methods, new-operator

我们可以在扩展方法和继承之间建立某种关系吗？

或者是类似于`new`在 C# 中使用 -keyword 的扩展方法？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-08T16:45:58.987

对这两个问题都没有。扩展方法实际上是将扩展操作的对象作为第一个参数的方法。

`new`关键字用于为类的实例分配资源。扩展方法对实例进行操作，但不能充当新替换，这仅仅是因为它需要一个实例（或`null`该类型的）作为第一个参数。

考虑：

```
public static class StringExtensions
{
    public static string Reverse(this string _this)
    {
        // logic to reverse the string
    }
} 
```

您可以通过两种方式调用此静态方法：

```
// as an extension method:
string s = "hello world";
string t = s.Reverse();

// as a static method invocation:
string t = StringExtensions.Reverse(s); 
```

在任何一种情况下，编译器都会更改 MSIL 中的调用以映射第二个调用。编译后，如果没有`this`-keyword，您将无法从静态对应的扩展方法中识别出扩展方法。

**总结**

*   扩展*不是*类的一部分
*   扩展与继承无关，实际上是静态方法，不被继承
*   扩展*不能*像`new`关键字那样实例化类（但在方法内部你当然可以实例化类）。
*   扩展*可以*对 进行操作`null`，否则该类的方法会引发`NullReferenceException`. 这是因为实例只是静态方法中的第一个参数。
*   可以扩展*密封*类（`string`如上），这是通过继承无法实现的（不能从密封类派生）。

**编辑：**
Tigran 和 Floran 暗示这个问题是关于[new modifier](http://msdn.microsoft.com/en-us/library/51y09td4%28v=vs.71%29.aspx#vclrfnew_newmodifier)的，我补充说它甚至可能是关于[new generic constraint](http://msdn.microsoft.com/en-us/library/sd2w2ew5.aspx)的。

扩展方法与关键字的任何一个含义都*没有*关系。`new`然而，这里有一些彼此相关的想法。我希望它不会使事情更加混乱。如果是这样，请坚持“编辑”上方的部分；）

*   在新的修饰符上：

    *   new 修饰符用于隐藏现有方法。扩展方法*永远不能*隐藏现有方法，因为声明是静态方法。当您这样做时，您甚至不会收到编译时警告或错误。
    *   new 修饰符要求方法（或属性）已经存在并且可以访问。*仅当具有相同签名的方法不*存在时，扩展方法才能工作。
    *   new 修饰符通过继承对类的扩展进行操作，即每个方法都已被继承。扩展方法对类的实例进行操作，与类没有继承关系。

*   关于新的通用约束：

    *   该约束将允许的泛型类型限制为具有可访问的无参数构造函数的泛型类型。扩展方法与泛型无关。
    *   扩展方法本身是泛型的，并且参数（即它所操作的允许的类）可以受到新的泛型约束的限制：

        ```
        // this ext. method will only operate on classes that inherit 
        // from ICollectible and have a public parameterless constructor
        public static int CalculateTotal<T>(this T _collectible)
            where T : ICollectible, new()
        {
            // calculate total
        } 
        ```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-08T16:48:47.400

不，扩展方法只是扩展现有类的功能。

> 扩展方法使您能够将方法“添加”到现有类型，而无需创建新的派生类型、重新编译或以其他方式修改原始类型。

请参阅[MSDN 上的扩展方法（C# 编程指南）](http://msdn.microsoft.com/en-us/library/bb383977.aspx)。

需要该`new`关键字才能允许您`override`从基类中使用非虚拟和静态方法。

```
public class A
{
   public virtual void One();
   public void Two();
}

public class B : A
{
   public override void One();
   public new void Two();
}

B b = new B();
A a = b as A;

a.One(); // Calls implementation in B
a.Two(); // Calls implementation in A
b.One(); // Calls implementation in B
b.Two(); // Calls implementation in B 
```

[在vs](http://social.msdn.microsoft.com/forums/en-US/Vsexpressvcs/thread/65e02299-300f-4b74-8f0a-679f490605f5)上查看[此链接`new``override`](http://social.msdn.microsoft.com/forums/en-US/Vsexpressvcs/thread/65e02299-300f-4b74-8f0a-679f490605f5)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-08T16:46:12.013

不。扩展方法是一个单独的静态类的语法糖，它的第一个参数是被“扩展”类型的对象。它根本与继承无关。该方法只能访问“扩展”类的公共成员，就像任何其他类一样。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-08T19:49:32.300

扩展方法与继承或`new`关键字（或构造函数）无关。如果您想向没有源代码的类添加一些功能，它们可以提供更好的代码。如果您确实有源代码，它也可以工作，但通常最好只更改源代码。

例如，您可能希望能够这样做：

```
string text = "this is my string";
int count = text.WordCount(); 
```

类中不存在此方法`String`，您需要这样做：

```
string text = "this is my string";
int count = MyCommon.WordCount(text); 
```

where`WordCount()`是您的某种通用库中的静态方法。

但是使用扩展方法，您也可以这样做：

```
public static class MyExtensions
{
    public static int WordCount(this String str)
    {
        return str.Split(new char[] { ' ', '.', '?' }, 
                         StringSplitOptions.RemoveEmptyEntries).Length;
    }
} 
```

然后`text.WordCount()`就像在`String`类中定义的普通方法一样工作。它只是让事情变得更好用。

从[这里](http://msdn.microsoft.com/en-us/library/bb383977.aspx)获取的代码我也建议阅读。

# c++ - 在 C++ 中序列化向量以通过 UDP 套接字发送？

> ID：10064493
> 
> 赞同：-1
> 
> 时间：2012-04-08T16:43:35.340
> 
> 标签：c++, sockets, vector, distributed-system

作为我们期末项目的一部分，我们需要实现一个分布式聊天系统。该系统需要具有可扩展性和鲁棒性。牢记这些标准，我对如何通过套接字发送矢量对象感到困惑。

由于向量是动态分配的，因此发送它的对象将不起作用，因为它指向的内存没有被复制。为了完成这个序列化将是最好的选择。但是，根据我们项目的要求，我们不应该使用任何第三方库，例如 Boost 和 Google Protocol Buffers。

因此，要序列化矢量对象并通过网络发送它，我似乎找不到解释如何继续的入门指南。还有其他我们可以使用的替代方法吗？

**该向量将包含聊天组中每个成员的字符串（IP 地址：端口）。**

任何帮助都会很棒。谢谢你。

注意：我们需要让聊天客户端在集群上运行，我相信为了使系统健壮和可扩展，我们还需要考虑字节序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T19:55:29.527

如果你想在这种情况下进行二进制序列化，你需要实现 2 种类型的序列化——整数和字符串。整数可以很容易地逐字节写入，通过将其转换为 char 然后移位：

```
// assuming 32 bit ints and 8 bit bytes
int integer = 1337;
unsigned char data[4];
for(int i = 0; i < 4; ++i)
    data[i] = (unsigned char) (integer >> 8*i); 
```

通过 sum 和 shift 反序列化：

```
int integer = 0;
for(int i = 3; i >= 0; ++i)
{
    integer += data[i];
    integer <<= 8;
} 
```

（我没有测试代码，所以在调试器中跟踪它并确保它做我认为它做的事情:)）

序列化的字符串将是序列化的大小，然后是流上的字符。

然后向量将是这两个的组合——向量的大小，然后是一个接一个的字符串。

您可能想要添加魔术词和校验和，以确保客户端知道会发生什么以及如何验证数据。如果您想变得真正花哨，请为 ASN.1 或其他东西实现您自己的支持。:)

# iphone - iPhone - 故事板中的全局变量

> ID：10064494
> 
> 赞同：2
> 
> 时间：2012-04-08T16:43:37.600
> 
> 标签：iphone, objective-c, cocoa-touch

我想在使用情节提要的 iPhone 应用程序中有一个全局数组/变量。有没有办法从许多不同的故事板屏幕访问这样的全局变量？

谢谢凯文

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T16:51:07.747

故事板部分有些无关紧要：在可可中实现这一点的标准方法是将*单例*对象定义为您的模型，在应用程序中定义的控制器之间共享其标题（通过故事板或其他方式）并在应用程序启动代码。

有关在 Objective C 中实现单例的信息，请阅读[此链接](http://www.johnwordsworth.com/2010/04/iphone-code-snippet-the-singleton-pattern/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T16:51:09.143

也许最简单的方法是将信息存储在 NSUserDefaults 中。它可以在应用程序的任何地方访问，所以这应该是你想要的。我正在发布一个片段，如果你不知道如何使用它:)

如何设置：

```
NSUserDefaults *settings = [NSUserDefaults standardUserDefaults];
BOOL yourVariable = YES;
[settings setBool:yourVariable forKey:@"myVariableKey"];
[settings synchronize]; 
```

如何获得它：

```
NSUserDefaults *settings = [NSUserDefaults standardUserDefaults];
BOOL yourVariable = [settings boolForKey:@"myVariableKey"]; 
```

我发布了一个带有布尔值的示例，但它可以是您需要的任何值 - 例如：

```
[settings setValue:@"Hello!" forKey:@"welcomeMessage"]; 
```

# php - PHP：规范化不存在目录的路径以防止目录遍历？

> ID：10064499
> 
> 赞同：11
> 
> 时间：2012-04-08T16:44:12.747
> 
> 标签：php, path, normalize, directory-traversal

我想规范化来自外部资源的路径以防止目录遍历攻击。我知道[realpath()](http://php.net/manual/en/function.realpath.php)函数，但遗憾的是这个函数只返回现有目录的路径。因此，如果目录不存在（尚）， realpath() 函数会切断不存在的整个路径部分。

所以我的问题是：你知道只规范化路径的 PHP 函数吗？

PS：我也不想提前创建所有可能的目录;-)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-09T01:24:36.080

没有内置的 PHP 函数。请改用以下内容：

```
function removeDots($path) {
    $root = ($path[0] === '/') ? '/' : '';

    $segments = explode('/', trim($path, '/'));
    $ret = array();
    foreach($segments as $segment){
        if (($segment == '.') || strlen($segment) === 0) {
            continue;
        }
        if ($segment == '..') {
            array_pop($ret);
        } else {
            array_push($ret, $segment);
        }
    }
    return $root . implode('/', $ret);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-20T14:44:53.037

我认为 Tamas 的解决方案会起作用，但也可以使用正则表达式来完成，这可能效率较低但看起来更整洁。Val 的解决方案不正确；但这一个有效。

```
function normalizePath($path) {
    do {
        $path = preg_replace(
            array('#//|/\./#', '#/([^/.]+)/\.\./#'),
            '/', $path, -1, $count
        );
    } while($count > 0);
    return $path;
} 
```

是的，它不能处理所有可能存在的 ./\ 等不同编码，但这不是它的目的；一个函数应该只做一件事，所以如果你也想转换`%2e%2e%2f`成`../`，首先通过一个单独的函数运行它。

Realpath 还解析符号链接，如果路径不存在，这显然是不可能的；但我们可以去掉多余的 '/./'、'/../' 和 '/' 字符。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-16T09:24:49.917

感谢 Benubird / Cragmonkey 纠正了我在某些情况下我之前的答案不起作用。因此我制作了一个新的，最初的目的是：性能好，行数更少，并且使用纯正则表达式：

> 这次我用更严格的测试用例进行了测试，如下所示。

```
$path = '/var/.////./user/./././..//.//../////../././.././test/////';

function normalizePath($path) {
    $patterns = array('~/{2,}~', '~/(\./)+~', '~([^/\.]+/(?R)*\.{2,}/)~', '~\.\./~');
    $replacements = array('/', '/', '', '');
    return preg_replace($patterns, $replacements, $path);
} 
```

正确答案是 /test/。

不是为了比赛，但性能测试是必须的：

测试用例：循环 100k 次，在 Windows 7、i5-3470 四核、3.20 GHz 上。

我的：1.746 秒。

汤姆·伊姆雷：4.548 秒。

贝努鸟：3.593 秒。

大熊座：4.334 秒。

> 这并不意味着我的版本总是更好。在几种情况下，它们执行相似。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-11-15T00:59:54.507

严格但安全的实施。如果您只使用 ASCII 作为文件名，它会是合适的：

```
/**
 * Normalise a file path string so that it can be checked safely.
 *
 * @param $path string
 *     The path to normalise.
 * @return string
 *    Normalised path or FALSE, if $path cannot be normalized (invalid).
 */
function normalisePath($path) {
  // Skip invalid input.
  if (!isset($path)) {
    return FALSE;
  }
  if ($path === '') {
    return '';
  }

  // Attempt to avoid path encoding problems.
  $path = preg_replace("/[^\x20-\x7E]/", '', $path);
  $path = str_replace('\\', '/', $path);

  // Remember path root.
  $prefix = substr($path, 0, 1) === '/' ? '/' : '';

  // Process path components
  $stack = array();
  $parts = explode('/', $path);
  foreach ($parts as $part) {
    if ($part === '' || $part === '.') {
      // No-op: skip empty part.
    } elseif ($part !== '..') {
      array_push($stack, $part);
    } elseif (!empty($stack)) {
      array_pop($stack);
    } else {
      return FALSE; // Out of the root.
    }
  }

  // Return the "clean" path
  $path = $prefix . implode('/', $stack);
  return $path;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-11-07T14:57:01.407

我的 2 美分。正则表达式仅用于空的路径块：

```
<?php 
echo path_normalize('/a/b/c/../../../d/e/file.txt');

echo path_normalize('a/b/../c');

echo path_normalize('./../../etc/passwd');

echo path_normalize('/var/user/.///////././.././.././././test/');

function path_normalize($path){
    $path   = str_replace('\\','/',$path);
    $blocks = preg_split('#/#',$path,null,PREG_SPLIT_NO_EMPTY);
    $res    = array();

    while(list($k,$block) = each($blocks)){
        switch($block){
            case '.':
                if($k == 0) 
                    $res = explode('/',path_normalize(getcwd()));
            break;
            case '..';
                if(!$res) return false;
                array_pop($res);
            break;
            default:
                $res[] = $block;
            break;
        }
    }
    return implode('/',$res);
}
?> 
```

# vb.net - 如何根据用户输入在 Visual Basic 控制台应用程序中结束程序或重新启动程序？

> ID：10064500
> 
> 赞同：0
> 
> 时间：2012-04-08T16:44:16.747
> 
> 标签：vb.net, console-application

我的控制台应用程序末尾有一个程序，要求用户按 Enter 键结束程序，或键入 s 执行另一次搜索。我遇到的问题是无论用户在程序结束时输入什么。我想要发生的是，如果用户键入 s，那么程序会重新启动并让用户执行另一次搜索。该程序是程序性的，我需要找到一种方法从程序顶部开始，要求用户键入要搜索的名称。我怎样才能做到这一点？

这是我遇到问题的程序：

```
Private Sub terminateProgram()
    Console.Write("Press the enter key to end the program or press s to search again")
    If (CStr(Console.ReadLine()) = "s") Then
        Console.WriteLine("It worked")
    Else
        Console.Read()
    End If 
```

注意：如您所见，我只是在窗口中写入“它工作”只是为了至少尝试捕获正在输入的“s”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T20:57:58.507

在循环中构造你的程序，你的方法返回一个布尔值，这样只要你的方法返回“False”，程序就会继续运行：

```
Sub Main()
   Do

   Loop While Not terminateProgram()
End Sub

Public Function terminateProgram() As Boolean
    Console.Write("Press the s key to search again or any other key to end the program")
    Return Console.ReadKey(True).KeyChar.ToLower() <> "s" 
End Function 
```

# java - 关于通知的线程

> ID：10064502
> 
> 赞同：1
> 
> 时间：2012-04-08T16:44:35.547
> 
> 标签：java

我正在处理线程，我读到了..notify() 方法用于向一个且只有一个在同一对象的等待池中等待的线程发送信号。notifyAll() 方法的工作方式与 notify() 相同，只是它将信号发送到等待对象的所有线程。

现在我的问题是，如果假设我有 5 个线程在等待并通过 Notify() ，我只想将通知发送到线程 3，那么应该有什么逻辑将通知仅发送到线程 3 ..!!

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-08T16:47:36.260

您不能直接使用`wait`and执行此操作`notify`。您必须在某处设置一个标志，让线程中的代码检查它，如果它是错误的线程，则返回等待，然后调用`notifyAll`.

请注意，如果您必须处理此问题，则可能表明您应该重组代码。如果您需要能够通知每个单独的线程，您可能应该让它们中的每一个等待不同的对象。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-08T16:54:19.053

`wait-notify`是一种低级机制，用于向其他线程指示事件（预期发生）。这方面的例子是生产者/消费者机制。

它不是线程相互通信的机制。
如果您需要类似的东西，那么您正在寻找错误的方式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-08T17:44:23.227

下面的代码启动了五个线程并将第三个线程设置为一个标志，告诉它它是唯一继续的。`lock`然后通知（唤醒）所有等待同一个锁对象的线程，但只有选定的线程继续。请注意，编写多线程应用程序一点也不容易（正确同步、处理虚假唤醒等）。您不需要只唤醒组中的一个特定线程，因为这表明问题分解不正确。无论如何，给你...

```
 package test;

public class Main {

  public static void main(String[] args) {
    Main m = new Main();
    m.start(5);
  }

  private void start(int n) {
    MyThread[] threads = new MyThread[n];
    for (int i = 0; i < n; i++) {
      threads[i] = new MyThread();
      /* set the threads as daemon ones, so that JVM could exit while they are still running */
      threads[i].setDaemon(true);
      threads[i].start();
    }
    /* wait for the threads to start */
    try {
      Thread.sleep(500);
    } catch (InterruptedException ex) {
      ex.printStackTrace();
    }
    /* tell only the third thread that it is able to continue */
    threads[2].setCanContinue(true);
    /* wake up all threads waiting on the 'lock', but only one of them is instructed to continue */
    synchronized (lock) {
      lock.notifyAll();
    }
    /* wait some time before exiting, thread two should be able to finish correctly, the others will be discarded with the end of the JVM */
    for (int i = 0; i < n; i++) {
      try {
        threads[i].join(500);
      } catch (InterruptedException ex) {
        ex.printStackTrace();
      }
    }
    System.out.println("Done!");
  }

  /** synchronization object, i.e. a lock which makes sure that only one thread can get into "Critical Section" */
  private final Object lock = new Object();

  /** A simple thread to demonstrate the issue */
  private final class MyThread extends Thread {
    private volatile boolean canContinue;
    @Override
    public void run() {
      System.out.println(Thread.currentThread().getName() + " going to wait...");
      synchronized (lock) {
        while (!canContinue) {
          try {
            lock.wait(1000); /* one second */
          } catch (InterruptedException ex) {
            ex.printStackTrace();
          }
        }
      }
      System.out.println(Thread.currentThread().getName() + " woken up!");
    }
    public void setCanContinue(boolean canContinue) {
      this.canContinue = canContinue;
    }
  };
} 

```

代码的输出是：

```
Thread-0 正在等待...
线程 2 将等待...
线程 3 将等待...
线程 1 将等待...
线程 4 将等待...
线程 2 醒了！
完毕！

```

所以你可以清楚地看到只有第三个线程（从零开始索引）被唤醒。您必须更详细地研究 Java 同步和多线程，才能理解代码的每一行（例如，[此处](http://docs.oracle.com/javase/tutorial/essential/concurrency/index.html)）。

我想为您提供更多帮助，但我几乎必须写一本关于 Java 线程的书，这就是为什么我刚刚指出这个[Java 线程教程](http://docs.oracle.com/javase/tutorial/essential/concurrency/index.html)。你是对的，这个问题一点也不简单，尤其是对于初学者。所以我建议你通读参考教程，然后你应该能够理解上面的大部分代码。没有简单的方法，或者至少我不知道。

# facebook - Facebook Open Graph 配置操作

> ID：10064503
> 
> 赞同：0
> 
> 时间：2012-04-08T16:44:36.140
> 
> 标签：facebook, facebook-opengraph

在过去/现在时预览框中，它总是显示：action is + 'a' + object ie。用户名正在烹饪教程上**的**食谱它显示为用户名正在烹饪 {object_title} ...

如何删除“a”并使其看起来像 {object_title} 示例？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T10:00:27.907

这在不同的时间有不同的表现。
简短版本（在代码中）通常显示为“用户正在烹饪鸡蛋”。
在聚合或详细视图中，较长的版本可能是“用户正在烹饪食谱：鸡蛋”。

你不需要做任何特别的事情来完成这项工作。

# windows-phone-7 - Windows Phone 文本框验证

> ID：10064506
> 
> 赞同：0
> 
> 时间：2012-04-08T16:44:55.983
> 
> 标签：windows-phone-7, textbox

有谁知道我如何检查文本框中是否有任何非字母字符？

如果文本框中有任何符号或数字等 - 我想做一个：

`MessageBox.Show("Please enter only letters");`

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T22:29:38.023

在文本框的 KeyPress 事件中，您可以检查字符是否为字母，如果不是则取消按键。这是未经测试的，但应该可以工作。

```
private void YourTextbox_KeyPress(Object sender, KeyPressEventArgs e)
{
    if(!char.IsLetter(e.KeyChar))
    {
        e.Handled = true;
        MessageBox.Show("Please enter only letters");
    }
} 
```

本质上，您正在测试字符是否是字母，如果是，则允许按键进入操作系统，否则取消按键（通过将`e.Handled`属性设置为`true`）。

现在，用户可以通过粘贴包含非字母字符的文本来绕过这一点，因此它更多的是为了更好的用户体验而不是安全性。要在用户单击提交按钮后执行验证，您可以使用遍历字符串来确定是否有任何非字母字符。所以，在你的提交事件中，你可以有这样的事情：

```
for(int i = 0; i < YourTextbox.Text.Length; i++)
{
    if(!char.IsLetter(YourTextbox.Text[i])
    {
        MessageBox.Show("Please enter only letters");
        break;
    }
} 
```

[MSDN 上的 Char.IsLetter 方法](http://msdn.microsoft.com/en-us/library/yyxz6h5w.aspx)。

# java - JSF 2.0： 的监听器没有被触发

> ID：10064510
> 
> 赞同：0
> 
> 时间：2012-04-08T16:45:04.917
> 
> 标签：java, jsf-2, primefaces, listener

在我的代码中，我有一个 PrimeFaces 向导组件，其中包含以下几个选项卡：

```
<h:form id="myForm">
    <p:wizard flowListener="#{mrBean.flowControl}" widgetVar="wiz">
        <p:tab id="tab1"></p:tab>
        <p:tab id="tab2"></p:tab>
        <p:tab id="tab3">

            <h:selectOneMenu id="couponList" value="#{mrBean.coupon}"
                             converter="#{codeToCouponConverter}" >
                <f:ajax listener="#{mrBean.doSomething}" execute="@this"/>
                <f:selectItem noSelectionOption="true" itemLabel="Choose one..." />
                <f:selectItems value="#{mrBean.coupons}" var="c" 
                               itemValue="#{c}" itemLabel="#{c.name} - $ #{c.discount}" />
            </h:selectOneMenu>

        </p:tab>
    </p:wizard>
</h:form> 
```

这是托管 bean 的代码：

```
@ManagedBean(name = "mrBean")
@ViewScoped
public class MrBean {
    private List<Coupon> coupons;
    private Coupon       coupon;

    public void doSomething() {
        System.out.println("DONE");
    }

    public String flowControl(FlowEvent event) {
        ...
    }

    // Getters and Setters
} 
```

在选项卡的 1 中，我有一个`<h:selectOneMenu>`包含`<f:ajax>`标签的组件。我不知道为什么只有在我选择`Choose one...`选项时才会触发侦听器。当我从列表中选择任何其他选项时`mrBean.coupons`，永远不会触发侦听器。换句话说，我从未`DONE`在控制台上看到任何印刷品。

*****更新*****：问题原来来自以下`Converter`：**

 **```
@RequestScoped
@ManagedBean
public class CodeToCouponConverter implements Converter {
    @EJB
    private MrsBeanInterface mrsBean;

    @Override
    public Object getAsObject(FacesContext context, UIComponent component, String value) {
        String couponCode = value;
        if (value != null) return mrsBean.getCoupon(couponCode);
        else return null;
    }

    @Override
    public String getAsString(FacesContext context, UIComponent component, Object value) {
        if (value != null) {
            Coupon c = (Coupon) value;
            return c.getId();

        } else return null;
    }

    // Getters and Setters
    public MrsBeanInterface getMrsBean() {
        return mrsBean;
    }

    public void setMrsBean(MrsBeanInterface mrsBean) {
        this.mrsBean = mrsBean;
    }
} 
```

如果我更改`<h:selectOneMenu>`如下：

```
<h:selectOneMenu id="couponList" value="#{mrBean.couponCode}" >
    <f:ajax listener="#{mrBean.doSomething}" execute="@this"/>
    <f:selectItem noSelectionOption="true" itemLabel="Choose one..." />
    <f:selectItems value="#{mrBean.coupons}" var="c" 
                   itemValue="#{c.id}" itemLabel="#{c.name} - $ #{c.discount}" />
</h:selectOneMenu> 
```

并更新`mrBean.doSomething`功能如下：

```
@EJB
private MrsBeanInterface mrsBean;
private String couponCode;
private Coupon coupon;

public void doSomething() {
    this.coupon = mrsBean.getCoupon(couponCode);
    System.out.println("DONE");
} 
```

一切正常。

如果您能解释一下我在`Converter`.

此致，

詹姆斯·特兰

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T20:31:33.800

使用带有大括号的#{mrBean.doSomething()} 或将事件参数添加到方法中。**

# jms - JMS 中的容错是什么？

> ID：10064511
> 
> 赞同：0
> 
> 时间：2012-04-08T16:45:23.307
> 
> 标签：jms

我遇到了一个问题，什么是 JMS 中的容错以及如何处理它？如何获取消费者未处理的消息？

请问有人可以指导我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T16:58:45.320

JMS 是一种规范。

容错的确切细节将取决于实现。

尝试查看 ActiveMQ 文档，它是一个实现 JMS 规范的开源产品。

# matlab - 创建符号函数

> ID：10064516
> 
> 赞同：2
> 
> 时间：2012-04-08T16:46:05.897
> 
> 标签：matlab

我正在尝试这样做：`syms f(x, y)` 但它不起作用并引发错误：不是有效的变量名。我在这里做错了什么？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-08T18:01:36.597

像这样

```
syms x y;
f = sym('3*x + 4*y');
subs(f, {x,y}, {4,5}); % returns 32 
```

[顺便说一句，这里](http://www.cs.utah.edu/~germain/PPS/Topics/Matlab/symbolic_math.html)是关于 MATLAB 中符号数学的一个很好的页面

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T16:58:42.057

[它看起来有效，因为它与http://www.mathworks.co.uk/help/toolbox/symbolic/syms.html](http://www.mathworks.co.uk/help/toolbox/symbolic/syms.html)中的示例相同。您可以检查`which x`,`which y`并`which f`确保 x、y 和 f 不是现有函数（我认为符号变量不能与函数同名）

你也可以试试：

```
x = sym('x');
y = sym('y');
f(x, y) = sym('f(x, y)'); 
```

这应该与您的原始代码相同，但我不明白为什么它会起作用`syms`。

# android - 在 Android View Pager 中使用 HTTP 连接

> ID：10064519
> 
> 赞同：1
> 
> 时间：2012-04-08T16:46:19.243
> 
> 标签：android, http, android-viewpager

我的 ViewPager 中有 7 个面板。每个都有不同的功能。对于我的新闻面板，我希望在视图中具有功能。这是我目前使用的 ViewPager 类：

```
class MyPageAdapter extends PagerAdapter {

  public int getCount() {
    //Return 7 as there will be 7 panes in the dashboard
    return 7;
  }

  public Object instantiateItem(View collection, int position) {

    LayoutInflater inflater = (LayoutInflater) collection.getContext()
            .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    View v = null;
    switch (position) {
    case 0:
        v = inflater.inflate(R.layout.dashboard_social, null);
        break;
    case 1:
        v = inflater.inflate(R.layout.dashboard_unilife, null);
        break;
    case 2:
        v = inflater.inflate(R.layout.dashboard_allcourses, null);
        break;
    case 3:
        v = inflater.inflate(R.layout.dashboard_news, null);
        //USE HTTP HERE FOR TWITTER FEED

        break;
    case 4:
        v = inflater.inflate(R.layout.dashboard_mycourse, null);
        break;
    case 5:
        v = inflater.inflate(R.layout.dashboard_media, null);
        break;
    case 6:
        v = inflater.inflate(R.layout.dashboard_extras, null);
        break;
    }

    ((ViewPager) collection).addView(v, 0);

    return v;
  }

  @Override
  public void destroyItem(View arg0, int arg1, Object arg2) {
    ((ViewPager) arg0).removeView((View) arg2);

  }

  @Override
  public boolean isViewFromObject(View arg0, Object arg1) {
    return arg0 == ((View) arg1);

  }

   @Override
   public Parcelable saveState() {
    return null;
   }
 } 
```

我知道对于一个简单的功能，比如使用一个按钮，你会有这样的东西：

```
case 3:

        v = inflater.inflate(R.layout.dashboard_news, null);
    //Functionality     
        Button btn = (Button) v.findViewById(R.id.bTutorialComplete);
        final Context context = collection.getContext();
        btn.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                context.startActivity(new Intent(context,
                        DashboardContainerActivity.class));
            }
        }); 
```

我的问题是我有一个单独的活动，可以从 Twitter 检索最新的推文并显示它。这是显示最新推文的代码：

```
public class DashboardNews extends Activity{

TextView tvFeed;
HttpClient client;
//Incomplete URL of Twitter timeline
final static String URL = "http://api.twitter.com/1/statuses/user_timeline.json?screen_name=";
//Used in AsyncTask to carry out lastTweet method
JSONObject json;

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.twitter_feed);
    tvFeed = (TextView) findViewById(R.id.tvTwitterFeedText);
    new Read().execute("text");
}

public JSONObject lastTweet(String username) throws ClientProtocolException, IOException, JSONException{
    //Used to create a string that can be appended
    StringBuilder url = new StringBuilder(URL);
    //append the username to the url
    url.append(username);

    //new HttpGet
    HttpGet get = new HttpGet(url.toString());

    //new response
    HttpResponse r = client.execute(get);

    //get status code
    int status = r.getStatusLine().getStatusCode();
    //check if status code is success (200)
    if(status == 200){
        //Get the entity from response
        HttpEntity e = r.getEntity();

        //Convert entity data to string
        String data = EntityUtils.toString(e);

        //Get JSON formatted sequence of values
        JSONArray timeline = new JSONArray(data);

        //Place the sequence in a JSONObject
        JSONObject lasttweet = timeline.getJSONObject(0);

        //return the last tweet
        return lasttweet;
    } else {
        //Display a Toast that there was an error
        Toast.makeText(getBaseContext(), "Error connecting to Twitter.", Toast.LENGTH_SHORT).show();
        //Return null
        return null;
    }
}

public class Read extends AsyncTask<String, Integer, String>{

    @Override
    protected String doInBackground(String... params) {
        // TODO Auto-generated method stub
        try {
            //Call lastTweet method and username
            json = lastTweet("kibria3");
            //return the last tweet
            return json.getString(params[0]);

        } catch (ClientProtocolException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (JSONException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        return null;
    }

    @Override
    protected void onPostExecute(String result) {
        // TODO Auto-generated method stub
        super.onPostExecute(result);
        //Set the text of view to the result
        tvFeed.setText(result);
    }

}

} 
```

我的问题是如何让这个 Activity 在 View Pager 的 switch 语句的案例 3 中工作？（用 HTTP 连接替换按钮功能）

# php - FTP 存档/版本

> ID：10064520
> 
> 赞同：0
> 
> 时间：2012-04-08T16:46:32.603
> 
> 标签：php, svn, file-upload, ftp

是否可以向 FTP 添加一个命令，以创建正在上传的文件的副本以用于备份目的？我正在尝试创建某种版本控制系统，但我不希望用户仅限于基于浏览器的上传系统或特定的 FTP 客户端。

如果 FTP 有办法在上传时运行 PHP 脚本，那就太棒了，其中包含所有版本控制脚本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T17:42:15.253

为相关文件系统添加备份系统，这将在备份驱动器上保留适当的版本。

另外，您可以在使用 inotify (WRITE & CLOSE) 完成写入时启动备份实例。

# php - FOSUserBundle 实体构造

> ID：10064521
> 
> 赞同：2
> 
> 时间：2012-04-08T16:46:39.923
> 
> 标签：php, symfony, fosuserbundle

我有扩展**FOSUserBundle的实体****User**。

 **```
class User extends BaseUser
{
...
    protected $ref_id;
    /**
     * @ORM\Column(type="float", length="11")
... 
```

**ref_id**来自 cookie 变量**ref_id**。每次新用户注册时，我如何将此值传递给实体**用户。**我是否必须覆盖**registerAction**或在实体**User**上创建构造函数并以某种方式传递**ref_id**？

另外，每次新用户注册时，我都需要验证（从数据库中检查）**ref_id 。**我怎样才能做到这一点 ？

```
 class User extends BaseUser
    {
    ...
       public function __construct()
       {
           $em = $this->getDoctrine()->getEntityManager(); 
```

这个例子不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-08T19:54:04.600

你必须修改类`onSuccess`的方法`RegistrationFormHandler`。检查[doc的](https://github.com/FriendsOfSymfony/FOSUserBundle/blob/master/Resources/doc/overriding_forms.md)*Overriding Form Handlers*部分。在您覆盖的方法中，您只需添加

```
$user->setRefId($this->request->cookies->get('ref_id')); 
```

就在调用父`onSuccess`方法之前。

至于验证，您必须创建自定义验证约束，您必须在其中注入`@request`和`@doctrine.orm.entity_manager`服务以获取 cookie 并在整个数据库中验证它。您可以查看此[食谱条目](http://symfony.com/doc/current/cookbook/validation/custom_constraint.html)。**

# c# - 使用 C# 创建 SharePoint 日历

> ID：10064523
> 
> 赞同：1
> 
> 时间：2012-04-08T16:46:52.003
> 
> 标签：c#, sharepoint, calendar, spgridview

您可以使用 SPGridView 在 SharePoint 2010 中创建日历吗？我想以编程方式使用 C# 的数据源创建日历。

# java - 检测新的 SMS/MMS 消息 Android 应用程序

> ID：10064531
> 
> 赞同：3
> 
> 时间：2012-04-08T16:48:02.123
> 
> 标签：java, android, sms, mms

谁能告诉我如何让我的应用程序知道是否有新的 SMS 或 MMS 消息进入本机收件箱消息？？？

我想让我的应用程序知道是否有新消息请任何人通知我，将不胜感激

萨米亚

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T16:51:19.870

尝试使用 SMS 广播接收器。看看[这个](http://www.androidcompetencycenter.com/2008/12/android-api-sms-handling/)和[这个](http://davanum.wordpress.com/2007/12/15/android-listen-for-incoming-sms-messages/)。

# sql-server - 没有 Order By 子句的 SQL Select 语句的顺序

> ID：10064532
> 
> 赞同：59
> 
> 时间：2012-04-08T16:48:08.113
> 
> 标签：sql-server, oracle, select, sql-order-by

据我所知，从关系数据库理论来看，`select`没有`order by`子句的语句应该被认为没有特定的顺序。但实际上在 SQL Server 和 Oracle 中（我已经在这两个平台上进行了测试），如果我`order by`多次从没有子句的表中查询，我总是以相同的顺序得到结果。这种行为可以依赖吗？任何人都可以帮忙解释一下吗？

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2012-04-08T16:55:26.873

不，不能依赖这种行为。顺序由查询计划器决定构建结果集的方式确定。像这样的简单查询`select * from foo_table`可能会按照它们存储在磁盘上的顺序返回，这可能是主键顺序或它们被创建的顺序，或者其他一些随机顺序。更复杂的查询，例如`select * from foo where bar < 10`可能会根据索引读取或表顺序以不同列的顺序返回，以进行表扫描。`where`具有多个条件、`group by`子句s 的更复杂的查询`union`将按照规划器决定最有效生成的任何顺序进行。

仅仅因为这些查询之间的数据发生了变化，两个相同查询之间的顺序甚至可能发生变化。“where”子句可能会满足一个查询中的索引扫描，但后来的插入可能会使该条件的选择性降低，并且计划程序可以决定使用表扫描执行后续查询。

* * *

把它放在一个更好的点。RDBMS 系统的任务是尽可能高效地*准确地为您提供所需的内容。*这种效率可以采取多种形式，包括最小化 IO（到磁盘以及通过网络向您发送数据）、最小化 CPU 并保持其工作集的大小较小（使用需要最少临时存储的方法）。

如果没有`ORDER BY`子句，您将不会*确切地*询问特定的顺序，因此 RDBMS 将根据 RDBMS 期望生成的任何算法，以某种顺序（可能）与查询的某些巧合方面对应的顺序为您提供那些行数据最快。

如果您关心效率而不是顺序，请跳过该`ORDER BY`子句。如果您关心顺序而不关心效率，请使用该`ORDER BY`子句。

由于您实际上关心*两者*的使用`ORDER BY`，然后仔细调整您的查询和数据库，使其高效。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-04-08T16:56:18.063

**不，您不能依赖每次都以相同的顺序返回结果。**我在处理带有分页网格的网页时发现了这一点。当我转到下一页，然后再回到上一页时，上一页包含不同的记录！我完全被迷惑了。

**那么，为了获得可预测的结果，您应该包括一个`ORDER BY`.** 即使那样，如果那里的指定列中有相同的值，您可以获得不同的结果。您可能需要`ORDER BY`填写您认为并不真正需要的字段，只是为了获得可预测的结果。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-08T17:25:46.543

Tom Kyte[对这个话题](https://asktom.oracle.com/Misc/order-in-court.html)很恼火。无论出于何种原因，人们都对此着迷，并不断尝试提出可以依赖特定订单而不指定 ORDER BY 的案例。正如其他人所说，你不能。这是AskTom 网站上关于该主题的[另一个有趣的主题。](https://asktom.oracle.com/pls/apex/f?p=100:11:0%3a%3a%3a%3aP11_QUESTION_ID:74320098178823)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-10-28T11:48:08.900

# 正确答案

这是为纠正旧答案而添加的新答案。我从 Tom Kyte 那里得到了答案，我把它贴在这里：

> 如果要对行进行排序，则必须使用订单。不，如果，并且，或但是关于它。时期。[http://tkyte.blogspot.ru/2005/08/order-in-court.html](http://tkyte.blogspot.ru/2005/08/order-in-court.html)您需要通过该物联网订购。行在叶块中排序，但叶块未排序存储。快速全扫描=未排序的行。

[https://twitter.com/oracleasktom/status/625318150590980097](https://twitter.com/oracleasktom/status/625318150590980097)

[https://twitter.com/oracleasktom/status/625316875338149888](https://twitter.com/oracleasktom/status/625316875338149888)

* * *

# 错误的答案

（***注意！****问题的原始答案放在下面只是为了历史。这是错误的答案。正确的答案放在上面）*

正如汤姆凯特在之前提到的文章中所写：

> 您应该将堆组织表视为一大无序的行集合。这些行将以看似随机的顺序出现，并且根据使用的其他选项（并行查询、不同的优化器模式等），它们可能会以不同的顺序出现在相同的查询中。除非您的查询中有 ORDER BY 语句，否则永远不要指望查询中的行顺序！

但请注意，他只谈论堆组织表。但也有索引组织表。在这种情况下，您可以依赖选择的顺序，而不是`ORDER BY`因为主键隐式定义的顺序。对于甲骨文来说确实如此。

对于默认创建的 SQL Server 聚集索引（索引组织表）。PostgreSQL 存储信息也可以按索引对齐。更多信息可以在[这里找到](http://use-the-index-luke.com/sql/clustering/index-organized-clustered-index)

**更新：** 我明白了，我的回答被否决了。所以我会试着稍微解释一下我的观点。在*索引组织表概述*部分中有一个短语：

> 在索引组织的表中，行存储在表的主键上定义的索引中......当相关的数据必须存储在一起或数据必须以特定的顺序物理存储时，索引组织的表很有用。

[http://docs.oracle.com/cd/E25054_01/server.1111/e25789/indexiot.htm#CBBJEBIH](http://docs.oracle.com/cd/E25054_01/server.1111/e25789/indexiot.htm#CBBJEBIH)

由于索引，所有数据都按特定顺序存储，我相信 Pg 也是如此。 [http://www.postgresql.org/docs/9.2/static/sql-cluster.html](http://www.postgresql.org/docs/9.2/static/sql-cluster.html)

如果您不同意我的观点，请给我一个文档链接。我很高兴知道有一些东西要学。

# ruby-on-rails - 为 Rails 的 Spree 电子商务添加路由

> ID：10064533
> 
> 赞同：17
> 
> 时间：2012-04-08T16:48:35.887
> 
> 标签：ruby-on-rails, spree

我刚刚升级到`1.0.3`，并且我的 config/routes 文件夹中的 routes.rb 文件似乎忽略了我所有的自定义路由。

我的路线.rb

```
JollyStore::Application.routes.draw do
  # Mount Spree's routes
  mount Spree::Core::Engine, :at => '/'

  root :to => 'pages#index'

  namespace :admin do
    resources :wysiwygs
  end

  match 'about_us/', :to => "pages#about_us"
  match 'services/', :to => "pages#services"
  match 'raw_resources/', :to => "pages#raw_resources"
  match 'contact_us/', :to => "pages#contact_us"

  match 'privacy_policy/', :to => "pages#privacy_policy"
  match 'return_policy/', :to => "pages#return_policy"
  match 'refund_policy/', :to => "pages#refund_policy"
  match 'cancellation_policy/', :to => "pages#cancellation_policy"
  match 'delivery_shipping_policy/', :to => "pages#delivery_shipping_policy"

end 
```

如果我运行`bundle exec rake routes`，它会返回所有适当的路线。但是当我尝试访问该特定页面时，我得到：

```
undefined local variable or method `about_us_path' 
```

或者我的自定义路由中的每个链接都出现相同的错误。不知何故，我的路线被忽略了。有谁知道绕过这个问题的方法？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-04-18T18:26:40.820

我遇到了同样的错误并找到[了这个解决方案](http://osdir.com/ml/spree-user/2012-02/msg00043.html)，它通过`main_app`在每个`my_paths/_urls`. 就我而言，这些是其中一个`/override.rb`文件中使用的链接。

所以，试试：`main_app.about_us_path`。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-08-09T12:44:42.240

您可以使用 routes.rb 文件中的以下块在 Spree 中添加新路线

```
Spree::Core::Engine.routes.prepend do
  # Your new routes
end 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2014-04-05T19:59:37.633

对我来说，前置没有用。对我来说 draw 做了工作：

```
Spree::Core::Engine.routes.draw do
   resources :orders, except: [:new, :create, :destroy] do
      post :my_order, on: :collection
   end
end 
```

# hadoop - 如何在 Hadoop 流中设置每个节点的最大减速器数量？

> ID：10064537
> 
> 赞同：1
> 
> 时间：2012-04-08T16:48:51.450
> 
> 标签：hadoop, mapreduce, hadoop-streaming

我有一个基于 C++ 的 MapReduce 作业，并且正在使用 Hadoop 流。

`7`但是，即使我`18`在命令行配置中将它们设置为;每个节点的最大减速器数量最终也是如此`mapred.tasktracker.reduce.tasks.maximum=18`；

还有什么可以阻止 reducer 发出更多的 reduce 任务吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T18:51:09.350

修改`mapred.tasktracker.reduce.tasks.maximum`属性后，是否重新启动集群中的任务跟踪器？您应该能够转到 Job Tracker web ui 页面并确认每个任务跟踪器现在配置了 18 个减速器插槽

# windows - 我应该使用什么版本的 DirectX 来制作 2D 桌面 GUI 应用程序？

> ID：10064542
> 
> 赞同：0
> 
> 时间：2012-04-08T16:50:07.590
> 
> 标签：windows, user-interface, directx, desktop-application

我想用 DirectX 制作一个 2D 桌面 GUI 应用程序，但我不知道要使用哪个版本。我最初尝试过 Direct2D，但它从未真正流行起来，因此与 DirectX 的其余部分相比，它没有很多社区支持或文档，所以它不是一个选择。

所以我有三个选择：

1.  DirectX 9.0c
2.  DirectX 10
3.  DirectX 11（不是 11.1，我没有安装 Windows 8）

我的一位知识渊博的朋友强烈鼓励 DirectX 9.0c，说这就是我所需要的，但我对使用一个已有 8 年历史的平台持谨慎态度。微软几乎是遗留支持的顶峰，但我认为他们必须有一个限制。我不知道DX10和DX11之间的区别。

请记住，我是一个新手程序员，所以这主要是一个学习项目。

任何建议表示赞赏！

编辑：我也很感激有关版本之间功能或编程范式的任何重大差异的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T17:11:47.063

Microsoft 的主要承诺是对其 Windows 客户。谁仍然使用当时使用的任何 DirectX 版本运行 15 年的游戏。IDirectDraw 活得很好。显然，作为开发人员，您将从中受益。当然，DX 9 得到了最广泛的硬件支持，因此这是一个绝佳的选择。如果您的游戏在旧硬件上表现不佳，请考虑更高的选择，DX 版本是一个自动选择器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T17:42:00.340

> 我应该使用什么版本的 DirectX 来制作 2D 桌面 GUI 应用程序？

DirectX 9，因为您将获得更多用户。

> 我的一位知识渊博的朋友强烈鼓励 DirectX 9.0c，说这就是我所需要的，但我对使用一个已有 8 年历史的平台持谨慎态度。

许多 DirectX 7 和 DirectX 5 游戏仍然可以正常运行，更不用说使用 DirectDraw 的游戏了。所以使用 8 年的平台没有问题。使用更新（比 9）的版本甚至可能对您没有好处，因此盲目地追求更高的版本号并不是一个好主意。

根据您的情况，您也可以考虑使用 OpenGL，但只有当您的应用程序必须是跨平台的时，这种选择才有意义。如果您知道该应用程序将仅适用于 Windows，那么选择 DirectX 9 是有意义的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-10T19:14:34.073

你写这篇文章是为了工作，还是为了好玩？

如果是为了工作，那么您必须遵循业务或营销人员定义的最低系统要求。如果您的最低操作系统可以是带平台更新的 Win7 或 Vista SP2，那么 Direct2D 是一个可行的选择。否则，DX9 是您必须走的路。

如果它是为了您个人时间的乐趣，那么做任何您认为最有趣的事情 :) 如果您只想制作 2D 图形，Direct2D 肯定会更容易使用。我不会太担心“它没有获得普及/社区支持”的角度，特别是因为现在所有主要的桌面应用程序（Firefox、Internet Explorer 甚至下一版本的 Paint.NET）都在使用它。此外，Win8 将使用一大堆有趣的新功能更新 Direct2D（据我了解，此更新也将适用于 Win7）。

起初使用 Direct2D 可能很笨拙，但这主要是由于所有 COM 的东西。一旦您习惯了它并建立了自己的小型实用程序库，它实际上并不比 GDI+ 复杂。事实上，我已经能够将一堆旧的 GDI+ 代码移植到使用 Direct2D/DirectWrite 并且通常只是逐行替换，例如 SolidBrush -> SolidColorBrush（这是在 Paint.NET 4.0 代码库中，顺便提一句）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-11T06:15:27.503

我使用 Direct 2D 来渲染函数图，它非常易于使用 - 我会说，就像 GDI+ 一样简单。我猜，DirectX 11 和 DirectX 9 的复杂程度（在 2D 图形方面）非常相似，所以不用担心。

DirectX 9.0 可以在（比如说）所有现代计算机上运行，​​并且 11 将您限制为 Windows Vista（带有平台包）和 Windows 7。不过，考虑到 Windows XP 最终会消失而 DirectX 会发展，所以我不是当然，值得将您的时间投入到不再开发的技术上。那么我建议使用 DirectX 11 的 Direct2D。

# algorithm - 在小于 O(N) 的时间内生成 N 个准随机数

> ID：10064550
> 
> 赞同：1
> 
> 时间：2012-04-08T16:51:19.053
> 
> 标签：algorithm, random

这是受求职面试中一个问题的启发：如何有效地生成 N 个唯一随机数？他们的安全性和分布/偏见并不重要。

我提出了一种调用 rand() N 次并通过反复试验消除欺骗的幼稚方法，从而得到低效且有缺陷的解决方案。然后我读[了这个 SO question](https://stackoverflow.com/questions/1608181/unique-random-numbers-in-an-integer-array-in-the-c-programming-language)，这些算法非常适合获得高质量的唯一数字，它们是 O(N)。

但我怀疑有办法以低于 O(N) 的时间复杂度为虚拟任务获得低质量的唯一随机数。我有一些可能的想法：

*   存储许多预先计算的列表，每个列表包含 N 个数字并随机检索一个列表。固定 N 的复杂度为 O(1)。使用的存储空间为 O(NR)，其中 R 是列表的数量。
*   生成 N/2 个唯一随机数，然后将它们除以 2 个不相等的部分（奇数的 floor/ceil，偶数的 n+1/n-1）。我知道这是有缺陷的（重复可能会弹出）并且 O(N/2) 仍然是 O(N)。这更像是一种思考。
*   生成一个大随机数，然后通过一些固定操作（如按位运算、分解、递归、MapReduce 或其他方法）从中挤出更多变体。
*   以某种方式使用[准随机序列](http://en.wikipedia.org/wiki/Low-discrepancy_sequence)（不是数学家，只是在谷歌上搜索了这个术语）。

你的想法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-08T16:55:34.833

大概这个例程有某种输出（即结果被写入某种数组）。填充大小为 N 的数组（或其他一些数据结构）至少是 O(N) 操作，所以你不能做得比 O(N) 更好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T17:02:23.697

因此，您可以生成一个随机数，如果结果数组包含它，只需将已生成数字的最大数量添加到其中。

检测已经生成的数字是否为 O(1)（使用哈希集）。所以它是 O(n) 并且只有 N`random()`次调用。

当然，这是假设我们没有溢出上限（即 BigInteger）。

# php - Composer 不会从本地存储库中获取依赖项

> ID：10064554
> 
> 赞同：6
> 
> 时间：2012-04-08T16:52:05.293
> 
> 标签：php, composer-php

我正在尝试将本地项目 A 作为依赖项添加到项目 B。使用`git daemon`我能够获取项目 A 作为依赖项，但是`require`无法识别在项目 A 中的 composer.json 中定义的依赖项。我错过了什么？

项目A：

```
{
    "name": "project/a",
    "require": {
        "monolog/monolog": "dev-master"
    }
} 
```

项目B：

```
"repositories": [
    {
        "type": "vcs",
        "url": "git://localhost/home/user/project-a"
    }
],
"require": {
    "project/a": "dev-master"
} 
```

结果（在项目 B 中）：

```
vendor/
  project/a 
```

预期的：

```
vendor/
  project/a
  monolog/monolog 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-08T20:02:54.527

最可能的解释是您忘记将更改提交到您的`composer.json`in `/home/user/project-a`。

要调试它，您可以使用`composer show project-a dev-master -v`. 它将在`-v`加载存储库时输出更多详细信息，然后您将看到有关您正在安装的版本的详细信息，如果它不包含独白要求，那么我会说我上面的猜测是正确的。如果它确实包含它，我们在 composer 中遇到了一个严重的错误，你应该在 github 上报告它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-27T19:26:00.440

我遇到了类似的问题，我的问题是我正在运行`composer update`而不是`composer install`我需要的库之一将它的一些依赖项定义为来自 GitHub 的 zipball。

# python - 如何从 ubuntu 或 windows 编译 python .app

> ID：10064560
> 
> 赞同：2
> 
> 时间：2012-04-08T16:52:53.103
> 
> 标签：python, ubuntu, osx-snow-leopard, cx-freeze

我对 Python 和任何冻结程序仍然很陌生。

最近做了一个很短的文字冒险游戏，想发给几个朋友，其中大部分人都有雪豹。我不希望他们为了玩游戏而费心下载python。

有没有办法将我的游戏从 Ubuntu 转换为可以在 Mac 上玩？也就是说，从 ubuntu 制作一个 .app 文件？或者甚至来自Windows，我想。

我尝试在 Windows 上使用 cx_freeze，但这只是编译了一个无法在 Mac 上播放的 exe。

感谢您的任何帮助和建议。

编辑：我正在使用 Python 3.2.2。我认为 Mac 是旧版本的标准配置，否则我想将游戏发送给他们是没有问题的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T09:47:09.120

如果您可以在任何机器上通过 Python 运行代码，则无需编译为本机二进制文件。

您的代码可以在 Python 2.6 中运行，这是 Snow Leaopard 附带的默认版本，除非您使用了版本 3 的特定功能。试试看吧。如果是这样，只需打包您的代码，以便运行 .py`python /path/to/code.py`

您还可以使用 shebang 第一行使您的 .py 文件自可执行，

```
#! /usr/bin/env python
# this should be the first line in your .py file 
```

并设置文件可执行标志，可能通过安装时的打包程序：

```
$ chmod +x code.py 
```

你会注意到 shebang 并没有指向特定的 python 二进制文件`/usr/bin/python`，而是指向`/env`环境路径，所以它会在运行它的任何机器上使用默认解释器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T10:48:04.767

据我记得，上次我使用 Mac OSX 时，它已经安装了 Python。这是使用 Mac OSX Snow Leopard。

# objective-c - TabController 中的 iOS MasterDetail 应用程序 - 从哪里开始？

> ID：10064563
> 
> 赞同：0
> 
> 时间：2012-04-08T16:53:51.110
> 
> 标签：objective-c, ios5, uistoryboard

这里真正的基本问题：

我想构建一个应用程序，它有一堆可以从 TabView 访问的 MasterDetail 视图。

我想从 MasterDetail 项目模板开始，但如果我这样做并将 TabController 扔到情节提要的前面，我会崩溃。

```
2012-04-08 12:51:21.205 SMToolkit[22630:fb03] -[UISplitViewController topViewController]:   unrecognized selector sent to instance 0x82491c0
2012-04-08 12:51:21.208 SMToolkit[22630:fb03] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[UISplitViewController topViewController]: unrecognized selector sent to instance 0x82491c0'
*** First throw call stack:
(0x16ad022 0x183ecd6 0x16aecbd 0x1613ed0 0x1613cb2 0x2bf9 0x16386 0x17274 0x26183 0x26c38 0x1a634 0x1597ef5 0x1681195 0x15e5ff2 0x15e48da 0x15e3d84 0x15e3c9b 0x16c65 0x18626 0x2a6d 0x29d5)
terminate called throwing an exception(lldb) 
```

到目前为止我所做的只是在情节提要中（实际上我做了一个新的 MasterDetail 项目，然后进入情节提要并在其前面放置了一个 tabcontroller）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T23:29:32.127

简单的答案是 Master Detail 中为您提供的模板包含一些您可能不想要的代码。

在 AppDelegate.m 中查找以下方法并简单地拥有它`return YES;`

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    // Override point for customization after application launch.
    return YES;
} 
```

# hibernate - 不区分大小写的限制.IN

> ID：10064567
> 
> 赞同：6
> 
> 时间：2012-04-08T16:54:12.530
> 
> 标签：hibernate, hibernate-criteria

我用谷歌搜索了一下，但没有找到像样的解决方案......

我想达到的目标，首先是来源:)

```
 List<MyStuff> result =
 session.createCriteria(MyStuff.class)
 .add(Restrictions.in("name", templates)).list(); 
```

模板是一个集合，事情是，我想获取所有 myStuffs，它们的名称列与任何模板**匹配-CASE-INSENSITIVELY 。**

可以不循环和喜欢模板的每个元素吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T20:55:30.487

不幸的是，此功能未在 Criteria API 中实现。您必须实现自己的 InExpression。[请参阅Ignorecase for In-Criterion](https://stackoverflow.com/questions/11542902/ignorecase-for-in-criterion)中的答案

# macos - 在 Mac 上更改应用程序窗口形式

> ID：10064569
> 
> 赞同：0
> 
> 时间：2012-04-08T16:54:47.663
> 
> 标签：macos, user-interface, javafx

有什么方法可以将应用程序窗口形式从圆角更改为严格的矩形形式，如 Windows 8 或 JavaFX 中 Aqua LaF 中的调色板组件或至少 Swing（通过某些系统道具）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T20:53:49.040

如果您正在谈论 JavaFX（如您的标签所述），您可以使用`StageStyle.UNDECORATED`并添加您想要的任何边框：

```
public void start(Stage primaryStage) {
    primaryStage.initStyle(StageStyle.UNDECORATED);
    StackPane root = new StackPane();
    root.getChildren().add(new Text(50,50,"Hello"));
    root.setStyle("-fx-border-color: blue;");
    primaryStage.setScene(new Scene(root, 300, 250));
    primaryStage.show();
} 
```

# javascript - 似乎无法获得示例代码来替换复选框工作

> ID：10064572
> 
> 赞同：0
> 
> 时间：2012-04-08T16:55:30.470
> 
> 标签：javascript, jquery

我使用了以下代码：

[花式复选框](http://www.htmldrive.net/items/show/311/Fancy-checkboxes-and-radio-buttons-with-jquery)

该演示似乎可以工作，但似乎并没有真正改变复选框的状态。相反，它只是让它看起来检查或未检查。

这是HTML：

```
<fieldset class="checkboxes">
            <label for="checkbox-01" class="label_check c_on"><input type="checkbox" checked="" value="1" id="checkbox-01" name="sample-checkbox-01"> I agree to the terms &amp; conditions.</label>
            <label for="checkbox-02" class="label_check"><input type="checkbox" value="1" id="checkbox-02" name="sample-checkbox-02"> Please send me regular updates.</label>
        </fieldset> 
```

这是使用的javascript：

```
<script type="text/javascript">
    function setupLabel() {
        if ($('.label_check input').length) {
            $('.label_check').each(function () {
                $(this).removeClass('c_on');
            });
            $('.label_check input:checked').each(function () {
                $(this).parent('label').addClass('c_on');
            });
        };
    };
    var linkObj;
    $(document).ready(function () {
        $('.label_check, .label_radio').click(function () {
            setupLabel();
        });
        setupLabel(); 
```

有人可以确认代码是否有问题。在我看来，作者错过了让代码更改复选框选中状态。

这是我用来检查复选框状态的代码：

```
var action = $('#htmlEdit').is(":checked") ? "Editing HTML" : "Editing"; 
```

我做错了检查还是作者的代码没有改变输入元素？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T17:05:17.377

不清楚，但有效

[http://jsfiddle.net/mplungjan/U4cLN/](http://jsfiddle.net/mplungjan/U4cLN/)

当您单击使用 的标签时 `<label for="checkboxID" />`，该框在任何浏览器中都会被选中（和未选中），而无需 JavaScript。这是纯粹的浏览器默认行为

所以

`<LABEL class="label_check" for="checkbox-02"><INPUT name="sample-checkbox-02" id="checkbox-02" value="1" type="checkbox"> Please send me regular updates.</LABEL>`

将选中该框和脚本样式标签

# macos - 如何消除 Mac OS X Lion 上 localhost/virtualhost 的缓慢解析/加载（2-3 秒延迟）？

> ID：10064581
> 
> 赞同：107
> 
> 时间：2012-04-08T16:57:00.737
> 
> 标签：macos, dns, osx-lion, localhost, virtualhost

自从在 Mac OS X Lion（2012 年 1 月购买的全新 macbook air）上设置我的开发环境以来，我注意到第一次解析到虚拟主机非常慢（大约 3 秒），但之后只要我继续定期加载它。

如果我让它保持几分钟不动，然后再次重新加载，第一次重新加载（再次）非常缓慢；似乎正在缓存某些东西。

如下所示，我没有使用 .local TLD。

我的设置：Apache 2 - MySQL - PHP installed and enabled - 添加了几个虚拟主机，其中一个是我为 localhost 创建的

我的 /etc/hosts：

```
127.0.0.1       localhost
255.255.255.255 broadcasthost
::1             localhost
fe80::1%lo0     localhost
127.0.0.1       myproject.dev
::1             myproject.dev
fe80::1%lo0     myproject.dev 
```

我在 username.conf 中的虚拟主机设置：

```
NameVirtualHost *:80

<Directory "/Users/myusername/Sites/">
    Options Indexes MultiViews
    AllowOverride None
    Order allow,deny
    Allow from all
</Directory>

<VirtualHost *:80>
    ServerName localhost
    DocumentRoot /Users/myusername/Dropbox/dev_envs/
</VirtualHost>
<VirtualHost *:80>
    ServerName myproject.dev
    DocumentRoot /Users/myusername/Dropbox/dev_envs/myprojectname
</VirtualHost> 
```

* * *

## 回答 #1

> 赞同：186
> 
> 时间：2012-04-17T22:26:01.357

我遇到了完全相同的问题，这让我发疯了！

将 localhost 的所有主机文件条目放入一行，如下所示：

```
127.0.0.1 localhost myproject.dev myotherproject.dev
::1 localhost
fe80::1%lo0 localhost 
```

对我来说就像一个魅力。似乎是狮子的一个错误。

* * *

## 回答 #2

> 赞同：93
> 
> 时间：2013-07-31T23:51:56.220

还有另一个问题 10.7.* 到 10.8.4 以`.local`导致五秒查找的站点结束。详细信息和解决方案由 Bram Van Damme 的[博文提供，可在此处找到](http://www.bram.us/2011/12/12/mamp-pro-slow-name-resolving-with-local-vhosts-in-lion-fix/)。

> “默认情况下，任何以结尾的主机名`.local`都被视为 Bonjour 主机，而不是通过查询网络首选项中的 DNS 服务器条目。”</p>
> 
> “要解决这个问题（无需重命名每个虚拟主机），您需要在`/etc/hosts`文件中为每个虚拟主机添加 IPv6 条目：”</p>

```
::1 mysite.local
fe80::1%lo0 mysite.local
127.0.0.1 mysite.local 
```

* * *

## 回答 #3

> 赞同：25
> 
> 时间：2012-07-26T17:02:22.800

我也遇到了同样的问题，Lion 也是如此。

奇怪的是，我的解决方案与杰里米的相反。我在 /etc/hosts 的一行中有一大堆 someproject.dev 条目。第一次在其中任何一个上加载一个网站都需要很长时间，比如一分钟左右。如果我在 5 秒左右内再次使用它，它会非常快，但时间会更长，并且需要一分钟。我曾怀疑过各种各样的事情，mysql 连接、Ruby 版本、Rails 错误、Apache、Phusion Passenger。直到我最终查看控制台并意识到正在尝试 DNS 查找。

所以，我把它们都放在单独的行上：

```
127.0.0.1 localhost

127.0.0.1 myproject.dev

127.0.0.1 myotherproject.dev 
```

突然间，一切又恢复了活力。我的两台机器上都一样。

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2014-11-10T18:02:41.423

为 IPv6 ::1 指定相同的主机对我有帮助。

```
127.0.0.1 something.local.mydomain.org
::1 something.local.mydomain.org 
```

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2012-08-11T09:57:48.473

确保将 IP v6 条目放在不与 localhost 对齐的行中

```
::1 localhost 
```

IPv6 条目位于单独的行中

```
fe80::1%lo0 here and_here 
```

现在有时真的很快，但很少有例外，旧的滞后又回来了。然而，它们可能基于其他原因。

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2016-04-23T03:34:33.230

在 OSX El Capitan 上，对我有用的是在 IPv4 条目的正上方创建一个重复的 IPv6 条目，就像这样

```
fe80::1%lo0 demo.test.dev
127.0.0.1   demo.test.dev 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2013-12-04T13:42:11.700

确保在文件开头定义主机名对我来说很重要。默认情况下，行 127.0.0.1 localhost 已经在开头，只需在同一行添加您的条目​​。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2014-04-08T06:32:33.827

我遇到了同样的问题，发现它是由在我的 LAN 上启用 IPv6 引起的，但在我的网络和我的 ISP 之间没有正确配置 IPv6。显然，当客户端同时获得两者时，IPv6 DNS 服务器优先于 IPv4 DNS。客户端花了几秒钟（每次尝试）发现 IPv6 DNS 无法访问或丢失，然后回退到 IPv4 DNS。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2015-08-08T09:14:05.570

注意：我使用的是 Windows 和 XAMPP，但是在研究这个问题时，许多人在 Windows 和 Mac 上遇到了同样的问题。为任何发现此问题的人提供参考答案，因为我花了数小时试图找到适合我的解决方案：

对于同一问题，我尝试了许多解决方案，包括将所有主机放在一条线上，删除冗余主机和虚拟主机，还包括 IPv6 线 -*仅*这些都没有成功。

*迄今为止*似乎对我有用的唯一解决方案是所有解决方案的组合：

*   从 mysite 更改我正在使用的域。**本地**到 mysite。**开发**者 受到[@Cleverlemming 回答的启发。](https://stackoverflow.com/a/17982964/1588706)
*   包括 IPv6 线路。
*   删除多余的虚拟主机和主机（我将它们注释掉）。

在我的主机文件中，我的主机目前位于不同的行中，到目前为止，问题似乎已得到解决。

祝任何试图解决此问题的人好运，如果有人有任何信息要添加，请这样做 - 这似乎是一个影响很多人的问题，没有单一的已知原因或解决方案。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2016-10-02T23:34:47.427

我遇到了同样的问题，最后意识到我在同一行有两次相同的主机条目：

例如

```
127.0.0.1 localhost host1 host2 host3 host4 host5 host1 host6 
```

我删除了同一主机的第二个实例（在上面的示例中 - host1） - 事情立即加速了。

当我发现这一点时感觉有点傻，但是当您在同一行上有 10 个长主机名并且您经常添加/删除时，它很容易被忽略。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2013-02-06T17:20:28.923

为我做的诀窍是添加

```
127.0.0.1 locahost 
```

在主机文件的第一行。

在我所有的虚拟主机中，只有使用数据库的主机很慢。我相信这是因为为数据库连接查找“localhost”的过程减慢了速度，因为我只添加了虚拟主机的地址，而不是“localhost”。现在一切又变得活泼起来。:)

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2014-02-11T18:00:44.007

我也遇到过这种情况。我在两行上定义了一堆虚拟主机，一个用于 IPv4，一个用于 IPv6。将我试图解决的主机移动到列表中的第一位会加快速度。

```
127.0.0.1 faster.example.dev host1.example.dev host2.example.dev host3.example.dev host4.example.dev host5.example.dev host6.example.dev
::1 faster.example.dev host1.example.dev host2.example.dev host3.example.dev host4.example.dev host5.example.dev host6.example.dev 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2020-06-26T06:49:41.200

一个愚蠢的问题导致我浪费了相当多的时间：在应用[@Cleverlemming 的答案](https://stackoverflow.com/a/17982964/1588706)后，我发现主机文件中有重复的条目。就像是：

```
::1          site1.local site2.local site1.local site3.local site4.local
fe80::1%lo0  site1.local site2.local site1.local site3.local site4.local
127.0.0.1    site1.local site2.local site1.local site3.local site4.local 
```

然后为 site3.local 和 site4.local 解析 IP 需要这 5 秒的死亡时间。

# android - 运行 Android 应用程序时出现“java.lang.InstantiationException”

> ID：10064583
> 
> 赞同：2
> 
> 时间：2012-04-08T16:57:43.707
> 
> 标签：android, android-listview

下面是我的示例应用程序的日志`TodoListItemView`。我很抱歉写了这么多代码，但我不知道为什么它不起作用。

```
04-08 16:46:23.023: D/AndroidRuntime(3167): Shutting down VM
04-08 16:46:23.023: W/dalvikvm(3167): threadid=1: thread exiting with uncaught exception (group=0x40015560)
04-08 16:46:23.134: E/AndroidRuntime(3167): FATAL EXCEPTION: main
04-08 16:46:23.134: E/AndroidRuntime(3167): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.rasi.todolist/com.rasi.todolist.TodoListItemView}: java.lang.InstantiationException: com.rasi.todolist.TodoListItemView
04-08 16:46:23.134: E/AndroidRuntime(3167):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1569)
04-08 16:46:23.134: E/AndroidRuntime(3167):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
04-08 16:46:23.134: E/AndroidRuntime(3167):     at android.app.ActivityThread.access$1500(ActivityThread.java:117)
04-08 16:46:23.134: E/AndroidRuntime(3167):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
04-08 16:46:23.134: E/AndroidRuntime(3167):     at android.os.Handler.dispatchMessage(Handler.java:99)
04-08 16:46:23.134: E/AndroidRuntime(3167):     at android.os.Looper.loop(Looper.java:123)
04-08 16:46:23.134: E/AndroidRuntime(3167):     at android.app.ActivityThread.main(ActivityThread.java:3683)
04-08 16:46:23.134: E/AndroidRuntime(3167):     at java.lang.reflect.Method.invokeNative(Native Method)
04-08 16:46:23.134: E/AndroidRuntime(3167):     at java.lang.reflect.Method.invoke(Method.java:507)
04-08 16:46:23.134: E/AndroidRuntime(3167):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
04-08 16:46:23.134: E/AndroidRuntime(3167):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
04-08 16:46:23.134: E/AndroidRuntime(3167):     at dalvik.system.NativeStart.main(Native Method)
04-08 16:46:23.134: E/AndroidRuntime(3167): Caused by: java.lang.InstantiationException: com.rasi.todolist.TodoListItemView
04-08 16:46:23.134: E/AndroidRuntime(3167):     at java.lang.Class.newInstanceImpl(Native Method)
04-08 16:46:23.134: E/AndroidRuntime(3167):     at java.lang.Class.newInstance(Class.java:1409)
04-08 16:46:23.134: E/AndroidRuntime(3167):     at android.app.Instrumentation.newActivity(Instrumentation.java:1021)
04-08 16:46:23.134: E/AndroidRuntime(3167):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1561)
04-08 16:46:23.134: E/AndroidRuntime(3167):     ... 11 more 
```

这是代码`TodoList`：

```
public class ToDoList extends Activity
{
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState)
{   
    Log.d("debug", "En TodoList");
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    ListView myListView = (ListView)findViewById(R.id.myListView);
    final EditText myEditText = (EditText)findViewById(R.id.myEditText);

    final ArrayList<String> todoItems = new ArrayList<String>();
    int resID = R.layout.todolist_item;
    final ArrayAdapter<String> aa;

    aa = new ArrayAdapter<String>(this,
                                  resID, 
                                  todoItems);
    myListView.setAdapter(aa);

    myEditText.setOnKeyListener(new OnKeyListener()
    { 
        public boolean onKey(View v, int keyCode, KeyEvent event)
        {
            if (event.getAction() == KeyEvent.ACTION_DOWN)
            {
                if(keyCode == KeyEvent.KEYCODE_ENTER)   
                {
                    todoItems.add(0, myEditText.getText().toString());
                    aa.notifyDataSetChanged();
                    return true;
                }
            }
            return false;   
        }
    }
    );
}
} 
```

这是代码`TodoListItemView`：

```
public class TodoListItemView extends TextView
{   
    public TodoListItemView(Context context, AttributeSet ats, int ds) 
    {
        super(context, ats, ds);
        Log.d("debug", "TodoListItemView 3");
        init();
    }

    public TodoListItemView(Context context)
    {
        super(context);
        Log.d("debug", "TodoListItemView 2");
        init();
    }

    public TodoListItemView(Context context, AttributeSet attrs)
    {
        super(context, attrs);
        Log.d("debug", "TodoListItemView 1");
        init();
    }

    private Paint marginPaint;
    private Paint linePaint;
    private int paperColor;
    private float margin;

    private void init()
    {   
        Log.d("debug", "init inicio");
        Resources myResources = getResources();
        marginPaint = new Paint(Paint.ANTI_ALIAS_FLAG);
        marginPaint.setColor(myResources.getColor(R.color.notepad_margin));
        linePaint = new Paint(Paint.ANTI_ALIAS_FLAG);
        linePaint.setColor(myResources.getColor(R.color.notepad_lines));

        paperColor = myResources.getColor(R.color.notepad_paper);
        margin = myResources.getDimension(R.dimen.notepad_margin);
        Log.d("debug", "init fin");
    }

    public void onDraw(Canvas canvas)
    {
        canvas.drawColor(paperColor);

        canvas.drawLine(0, 0, getMeasuredHeight(), 0, linePaint);
        canvas.drawLine(0, getMeasuredHeight(), getMeasuredWidth(), getMeasuredHeight(), 
                        linePaint);

        canvas.drawLine(margin, 0, margin, getMeasuredHeight(), marginPaint);

        canvas.save();
        canvas.translate(margin, 0);

        super.onDraw(canvas);
        canvas.restore();
    }
} 
```

这是`main.xml`：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<EditText
    android:id = "@+id/myEditText"
    android:inputType = "text"
    android:layout_width = "fill_parent"
    android:layout_height = "wrap_content"
    android:text = "@string/stringEditText"
 />

<ListView 
    android:id = "@+id/myListView"
    android:layout_width = "fill_parent"
    android:layout_height = "wrap_content"
/> 
```

`todolist_item.xml`：

```
<?xml version="1.0" encoding="UTF-8"?>
<com.rasi.todolist.TodoListItemView
    xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:padding="10dp"
android:scrollbars="vertical"
android:textColor="@color/notepad_text"
android:fadingEdge="vertical"
/> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T17:50:08.090

我已经测试了您的代码，它可以正常工作。尝试清理项目，然后再次运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-30T18:06:50.953

我从 google play 开发者控制台收到此错误的报告。该应用程序在我的设备和所有模拟器上运行良好。

到目前为止，我收到了大约 10 份报告，总安装量为 3000，所以我决定忽略它。

# c# - 使用 Castle.Windsor 3.0 问题作为 Windows 服务托管的 WCF 服务库

> ID：10064586
> 
> 赞同：1
> 
> 时间：2012-04-08T16:58:07.087
> 
> 标签：c#, wcf, windows-services, castle-windsor

我想在 Windows 服务中托管我的 WCF 服务库。尽管它将通过本地网络与另一个 wcfservice 通信。

我很难找到最近的最新文档或为此目的配置解决方案的帮助。任何人都可以建议：

a) 这种连接的首选端点是什么？（另一个 WCF 服务使用 basicHttpBinding 托管）——这本身很适合通过劫持 global.asax 来配置 Castle 容器。但是，在 Windows 服务中托管此解决方案意味着我不再可以访问 global.asax！

b) 如何配置 Castle Windsor 以在此解决方案中使用 DI？目前我已经研究了将它与 App_Code 的 AppInitilize() 方法以及其他一些不再有效的解决方案挂钩。

当前解决方案架构：

*核心（C# 类库）

*服务（C# 类库）

*WCF 服务（WCF 服务库）

*Windows 服务（Windows 服务项目）

AppInitilize() 的示例代码 [目前似乎无法正常工作]：

```
public class WindsorConfiguration
    {
        public static IWindsorContainer Container { get; private set; }

        public static void AppInitialize()
        {
            {
                Container = new WindsorContainer()
                    .AddFacility<WcfFacility>()
                    .Register(Component.For<IVirusCheckService>().ImplementedBy<VirusCheckService>()
                                  .LifeStyle.Transient
                                  .AsWcfService(new DefaultServiceModel()
                                                    .AddBaseAddresses("http://localhost:8080/MyService")
                                                    .AddEndpoints(WcfEndpoint.BoundTo(new BasicHttpBinding())
                                                                      .At("basic"))
                                                    .PublishMetadata(o => o.EnableHttpGet())))
                    .Register(Component.For<ILoggingService>().ImplementedBy<LoggingService>());
            }
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T11:48:57.803

要回答**一个**（某种）问题——我认为没有“首选”方法——这实际上只取决于您希望您的服务如何可用。我已经托管了 net.tcp（我怀疑这是 Windows 服务环境中最常见的，但我猜）、webhttp、basichttp 和 wshttp 服务都可以在 Windows 服务内部进行。上**...** _

所以我这样做的方式（也许这只是一种风格，但它适用于我）是我有一个常规的 Windows 服务，并且在程序主中我引导容器（所以你会在全局 asax 的 App_Start 中做的事情）并且我有我想要安装的应用程序的不同部分的安装程序（顺便说一下，通常在 WCF 中，我将合同拆分到他们自己的程序集中并在 Windows 服务程序集中实现它们，或者如果我需要托管在单独的程序集中在多个地方提供相同的服务）。

一旦容器被引导，我就从容器中解析 ServiceBase 并将其提供给[ServiceBase.Run](http://msdn.microsoft.com/en-us/library/tks2stkt.aspx)静态方法。这样，我的服务可以依赖于容器中注册的任何其他内容（这是我唯一会在容器上调用 Resolve 的地方，但我认为在这种情况下这是合理的）。

我不知道除了托管 WCF 服务之外您还希望您的服务做什么，也许什么都没有，但这是一个让您继续前进的框架，所以它在这里......

```
static class Program
{
    static void Main()
    {
        ServiceBase.Run(CreateContainer().Resolve<ServiceBase>());
    }

    private static IWindsorContainer CreateContainer()
    {
        var container = new WindsorContainer();
        container.Install(FromAssembly.This());
        return container;
    }
}

public class ServicesInstaller : IWindsorInstaller
{
    public void Install(IWindsorContainer container, IConfigurationStore store)
    {
        container
            .AddFacility<WcfFacility>(f =>
                                          {
                                              f.CloseTimeout = TimeSpan.Zero;
                                          })
            .Register(
                Component
                    .For<IVirusCheckService>()
                    .ImplementedBy<VirusCheckService>()
                    .LifeStyle.Transient
                    .AsWcfService(new DefaultServiceModel()
                                      .AddBaseAddresses("http://localhost:8080/MyService")
                                      .AddEndpoints(WcfEndpoint.BoundTo(new BasicHttpBinding())
                                                        .At("basic"))
                                      .PublishMetadata(o => o.EnableHttpGet())),
                Component
                    .For<ServiceBase>()
                    .ImplementedBy<MyService>());
    }
} 
```

*注意：MyService 类只是一个常规的 Windows 服务类（如果你愿意，你可以使用 Visual Studio 为你生成的文件 | new | windows 服务）——我没有展示它，因为它可能只是一个空实现.*

# git - GitHub - 开始创建 repo

> ID：10064588
> 
> 赞同：0
> 
> 时间：2012-04-08T16:58:25.253
> 
> 标签：git, bash, open-source, github

我按照 GitHub 网页上的这些说明创建了第一个 repo；

```
Global setup:
Set up git
  git config --global user.name "Your Name"
  git config --global user.email my_mail@gmail.com

Next steps:
  mkdir OpenSourceContrib  
  cd OpenSourceContrib  
  git init
  touch README
  git add README
  git commit -m 'first commit'
  git remote add origin git@github.com:dlib/OpenSourceContrib.git
  git push -u origin master 
```

现有的 Git 存储库？cd existing_git_repo git remote add origin git@github.com:dlib/OpenSourceContrib.git git push -u origin master

一切正常，直到 cd existing_git_repo ；然后，我在以下命令“git remote add origin ...”中尝试了几个路径（值得注意的是，我首先尝试了 README 文件所在的路径，从 c:/Users/... 开始）。现在，当我编写这个精确的 bash 命令时

```
 git remote add origin git@github.com:dlib/OpenSourceContrib.git 
```

我明白了

```
 fatal: remote origin already exists 
```

当我写下一个命令时，

```
 git push -u origin master 
```

我有以下错误

```
 ERROR: repository not found
  fatal: The remote ended up unexpectedly 
```

我不明白这个错误来自哪里，如何删除远程源以重新从头开始，或者如何修复它。

顺便说一句，您能否指出对 bash 的快速参考？

问候。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T17:56:37.853

您的问题、命令序列和后续评论没有加起来。您显然已经在“Hello-World”中有一个存储库 - 建议您遵循 GitHub 说明。但是现在，在创建 OpenSourceContrib 时，您似乎位于“Hello-World”源代码树（带有 .git 存储库）中——因此“起源已经存在”。

重新开始吧。创建一个新的 GitHub 存储库并使用本地 Git 存储库仔细创建源代码树）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T09:55:20.163

您还可以编辑文本文件 .git/config 并使您的`origin`遥控器指向正确的位置（此处`git@github.com:dlib/OpenSourceContrib.git`）。

# apache - Apache 忽略缺少的 DocumentRoot

> ID：10064589
> 
> 赞同：0
> 
> 时间：2012-04-08T16:58:29.330
> 
> 标签：apache, ubuntu, configuration

我想配置我的 apache 不同。现在，如果缺少 DocumentRoots 之一，则所有服务器都无法启动。这很烦人。。

有什么选择，如何忽略这个错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T19:22:31.003

基于您的 DocumentRoot 指令与 VirtualHost 同义使用的假设，您可以将 VirtualHosts 配置分离到单独的 conf 文件中，将它们单独放入其文档根目录中，然后将它们与目录范围的 include 指令一起包含在通用的服务器范围的 conf 中。请参阅下面的示例：

在下面的目录中创建一个conf：

```
/etc/apache/sites-enabled/sites.conf 
```

添加以下内容

```
Include /data/www/sites/ 
```

这将包括上述目录和任何子目录中的任何 conf 文件

对于具有以下 DocumentRoot 的主机

```
/data/www/sites/website-one 
```

创建一个 VirtualHost conf 文件并将其放在上述目录中，例如：

/data/www/sites/website-one/website-one.conf

您的 conf 文件将包含有关 VirtualHost 的所有信息，包括 DocumentRoot，例如

```
<VirtualHost *:80>
DocumentRoot /data/www/sites/website-one
ServerName www.website-one.com

# Other directives here

</VirtualHost> 
```

如果 DocumentRoot 不存在，则不会加载 conf 文件并且不会执行 DocumentRoot 指令。出于安全原因，请注意不要让您的 conf 文件变得可取消引用。这可能应该在服务器级别禁用，但需要注意。最后，上述模式意味着`/data/www/sites`目录和子目录中的任何错误 conf 文件都会导致服务器无法启动。

# php - wordpress php 帮助 - the_author_meta('display_name')

> ID：10064594
> 
> 赞同：0
> 
> 时间：2012-04-08T16:59:01.587
> 
> 标签：php, wordpress

在下面的 if 语句方面需要帮助。我不断收到我的变量的回声/打印。

```
 <?php if (the_author_meta('display_name') == 'johnwayne') { ?>
       <div>Blank</div>
    <?php } ?> 
```

当我放置此代码时，它将打印/回显“johnwayne”而不是 div ..

所以基本上如果 johnwayne 是作者，我想显示一个空白 div。如果其他人是作者，请显示一个常规 div。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T17:13:35.937

the_author_meta 显示信息，你想要 get_the_author_meta

# c++ - 是否可以通过增加编译器为数组提供的内存量来避免分段错误？

> ID：10064598
> 
> 赞同：-1
> 
> 时间：2012-04-08T17:00:03.210
> 
> 标签：c++, compiler-construction

我知道编译器为创建数组提供的内存量是有限制的。如何配置我的编译器以增加此内存。如果可能，有什么优点和缺点？我使用 linux 和 g++ 编译器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T17:24:24.433

我将尝试回答您，即使问题非常不具体（请指定您的编译器，如果您的意思是堆栈）。

现在我假设您的意思是堆栈，并且您正在使用带有 Visual Studio 的 Linux 或 Windows。

## Linux

在 linux 上，您可以使用系统调用[setrlimit](http://linux.die.net/man/2/setrlimit)。然后，您将在代码中以编程方式设置堆栈，就像在[这个](https://stackoverflow.com/questions/2279052/increase-stack-size-in-linux-with-setrlimit)Stack Overflow 线程中一样。

## 视窗

在带有 Visual Studio 的 Windows 上，您可以使用编译器选项，`/F`或者`/STACK`，有关更多信息，请访问[此 MSDN 文档页面](http://msdn.microsoft.com/en-us/library/tdkhxaks%28v=vs.100%29.aspx)。

* * *

在某些情况下，您也可以考虑使用堆而不是堆栈，[这个](https://stackoverflow.com/questions/79923/what-and-where-are-the-stack-and-heap)线程中有一些很好的比较。然后您将使用动态内存分配并且您不会关心堆栈大小（但是，您会关心数组的一些不同方法）。

如果您还有其他问题，请指定您的编译器...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T17:29:45.923

如果您在谈论堆栈大小，则取决于您使用的系统。由于您说要在 linux 上，因此您可以从程序中更改堆栈大小。但是请注意，这不能移植到其他操作系统。要更改堆栈大小，您可以使用此函数（或多或少从[此处](https://stackoverflow.com/a/2279084/991425)复制）

```
#include <sys/resource.h>

using namespace std;

//Increases the Stacksize to at least minStackSize
bool setStack(rlim_t minStackSize)
{
    struct rlimit rl;
    int result; 

    result = getrlimit(RLIMIT_STACK, &rl);

    //If we got an answer
    if (result == 0)
    {
        //Check if Stack is smaller than needed
        if (rl.rlim_cur < minStackSize)
        {
            //Increase Stacksize
            rl.rlim_cur = minStackSize;
            result = setrlimit(RLIMIT_STACK, &rl);

            if (result == 0)
                return true;
            else
                return false;
        }
        else
            return true;
    }
    else
        return false; 
} 
```

请注意，它是一个极简函数，您可能想要添加自己的错误消息，而不是仅仅返回 TRUE/FALSE。

增加堆栈大小的好处是，如果您尝试在堆栈上放置比堆栈大小允许的更多变量，您的程序不会崩溃。缺点是这个空间总是被你的程序占用，不管它是否被实际使用。（但是你的操作系统可能会有点欺骗）

# sql - 如何在 SQL Server 中填充重复记录？

> ID：10064599
> 
> 赞同：1
> 
> 时间：2012-04-08T17:00:08.877
> 
> 标签：sql, sql-server

> **可能重复：**
> [在 MS SQL Server 2005 中模拟 group_concat MySQL 函数？](https://stackoverflow.com/questions/451415/simulating-group-concat-mysql-function-in-ms-sql-server-2005)
> [聚合/连接的 SQL 查询](https://stackoverflow.com/questions/7896239/sql-query-for-aggregation-concatenation)

我正在尝试使用 SQL Server 中的 stuff 函数来填充某些信息。这是示例：

```
Money     Age    Gender
860       9          F
860       15         M
860       15         M
860       16         M
860       16         F 
```

我想填充年龄和性别列，以便只有一条记录显示如下：

```
Money   Age                 Gender
860     9, 15, 15, 16, 16   F, M, M, M, F 
```

请注意，我想分别在 Age 和 Gender 中保留两个 15 和三个 M。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T17:20:02.687

使用 FOR XML 而不是其他东西更容易做到这一点。请记住，可以欺骗 FORM XML 子句来生成逗号分隔列表 (CSV)。

下面的示例应该完全符合您的要求。

```
CREATE TABLE moneyagegender 
( 
 [Money]  INT, 
 [Age]    INT, 
 [Gender] VARCHAR(2) 
); 

INSERT INTO moneyagegender 
VALUES      (860, 9, 'F'), 
        (860, 15, 'M'), 
        (860, 15, 'M'), 
        (860, 16, 'M'), 
        (860, 16, 'F'); 

SELECT mag.money, 
   (SELECT Substring((SELECT ', ' + CAST(m2.age AS VARCHAR(1024)) 
                      FROM   moneyagegender m2 
                      WHERE  m2.money = mag.money 
                      ORDER  BY m2.age 
                      FOR XML PATH('')), 3, 10000000) AS list) AS ages, 
   (SELECT Substring((SELECT ', ' + m3.gender 
                      FROM   moneyagegender m3 
                      WHERE  m3.money = mag.money 
                      ORDER  BY m3.age 
                      FOR XML PATH('')), 3, 10000000) AS list) AS genders 
FROM   moneyagegender mag 
GROUP  BY mag.money; 
```

这是输出。

```
Money       Ages                 Genders
----------- -------------------- -----------------
860         9, 15, 15, 16, 16    F, M, M, M, F
(1 row(s) affected) 
```

我希望这有帮助。

如果您需要更多详细信息，我有一篇去年的博客文章对此进行了解释。 [http://stevestedman.com/2011/10/converting-part-of-a-result-set-to-a-comma-separated-list/](http://stevestedman.com/2011/10/converting-part-of-a-result-set-to-a-comma-separated-list/)

# c++ - 截锥体交集代码返回错误值

> ID：10064600
> 
> 赞同：0
> 
> 时间：2012-04-08T17:00:12.997
> 
> 标签：c++

我正在实现一些与截锥体相关的代码，即使有很多可见对象，剔除测试也不返回任何内容。我的数学支持库不提供平面支持或类似的东西，所以大部分代码都是从头开始编写的，几乎没有可用的测试。如果您对故障点有任何建议，请告知。幸好没有多少，所以 Little'Wall'o'Code 如下：

```
 class Plane {
    public:
        Plane() {
            r0 = Math::Vector(0,0,0);
            normal = Math::Vector(0,1,0);
        }
        Plane(Math::Vector p1, Math::Vector p2, Math::Vector p3) {
            r0 = p1;
            normal = Math::Cross(p2 - p1, p3 - p1);
        }
        Math::Vector r0;
        Math::Vector normal;
    };
    class Frustum {
    public:
        Frustum(
            const std::array<Math::Vector, 8>& points
            )
        {
            planes[0] = Plane(points[0], points[1], points[2]);
            planes[1] = Plane(points[4], points[5], points[6]);
            planes[2] = Plane(points[0], points[1], points[4]);
            planes[3] = Plane(points[2], points[3], points[6]);
            planes[4] = Plane(points[0], points[2], points[4]);
            planes[5] = Plane(points[1], points[3], points[5]);
        }
        Plane planes[6];
    };

       // http://www.cescg.org/CESCG-2002/DSykoraJJelinek/index.html
       bool Intersects(Math::AABB lhs, const Frustum& rhs) const {
            for(int i = 0; i < 6; i++) {
                Math::Vector pvertex = lhs.TopRightFurthest;
                Math::Vector nvertex = lhs.BottomLeftClosest;
                if (rhs.planes[i].normal.x <= -0.0f) {
                    std::swap(pvertex.x, nvertex.x);
                } 
                if (rhs.planes[i].normal.y <= -0.0f) {
                    std::swap(pvertex.y, nvertex.y);
                }
                if (rhs.planes[i].normal.z <= -0.0f) {
                    std::swap(pvertex.z, nvertex.z);
                }
                if (Math::Dot(nvertex - rhs.planes[i].r0, rhs.planes[i].normal) > 0.0f) {
                    return false;
                }
            }
            return true;
        } 
```

另外值得注意的是，我使用的是左手坐标系，所以我反转了叉积的结果（在 Cross 函数内）。

编辑：准确地说，我错过了顶点索引。它们被索引，以便每个位表示一个轴上的角 - 也就是说，0 表示按该顺序的右侧、顶部和背面。

另外，我为这个问题的质量普遍低下表示歉意，但我不知道还有什么要补充的。我没有收到编译器警告或错误，也没有足够的理解来理解我在调试器中可能读到的任何东西——这超出了我的正常领域。并且代码使用 和 的相对明显的实现进行`Vector`编译`AABB`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-08T18:43:33.570

我怀疑这归结为您对顶点的标记以及您指定点的顺序。您应该在指定顶点的方向上保持一致，顺时针或逆时针，具体取决于您的坐标系。这应该是关于看外面的脸（或内脸，取决于你如何看待它）。

在我看来，您的法线似乎指向同一个方向，这是错误的。

![在此处输入图像描述](../Images/dd4f651e9b2596d6087ba8a47ce35cc9.png)

因此，围绕法线逆时针指定这些表面给了我

```
 0 1 2
   5 4 7
   1 5 6
   4 0 3
   3 2 6
   1 0 4 
```

您的 0 1 2 和 4 5 6 示例会产生 2 个指向同一方向的法线，而它们应该指向相反的方向

# regex - .htaccess 重定向到语言子文件夹

> ID：10064603
> 
> 赞同：2
> 
> 时间：2012-04-08T17:00:18.887
> 
> 标签：regex, .htaccess, mod-rewrite, typo3, realurl

**我有的：**

*   安装了两种语言：德语和英语
*   语言版本通过子文件夹（www.domain.com/de/ 和 www.domain.com/en/）进行管理
*   机器：安装了 Typo3 4.5.4 / RealUrl
*   mod_rewrite 启用了一个作品

**我想做的事：**

*   将没有语言子文件夹的请求重定向到德语版本
*   例如 domain.com/any/test/folder/ 到 domain.com/ **de** /any/test/folder

**我尝试了什么：**

```
RedirectMatch permanent ^/(?!(?:(?:de|en)/))(.*)$ /de/$1 
```

**出现问题：**

*   所有请求都被定向到 domain.com/de/index.php
*   它导致错误 310 (net::ERR_TOO_MANY_REDIRECTS)
*   也许 Typo3 的 htaccess 条目失败了？

**我的洞 .htaccess 文件：**

```
# Enable URL rewriting
RewriteEngine On

# Change this path, if your TYPO3 installation is located in a subdirectory of the website root.
# RewriteBase /

# Rule for versioned static files, configured through:
# - $TYPO3_CONF_VARS['BE']['versionNumberInFilename']
# - $TYPO3_CONF_VARS['FE']['versionNumberInFilename']
# IMPORTANT: This rule has to be the very first RewriteCond in order to work!
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.+)\.(\d+)\.(php|js|css|png|jpg|gif|gzip)$ $1.$3 [L]

# Stop rewrite processing, if we are in the typo3/ directory.
RewriteRule ^(typo3/|t3lib/|fileadmin/|typo3conf/|typo3temp/|uploads/|favicon\.ico) - [L]

# Redirect http://example.com/typo3 to http://example.com/typo3/index_re.php and stop the rewrite processing.
RewriteRule ^typo3$ typo3/index_re.php [L]

#301 redirection for language mode
RedirectMatch permanent ^/(?!(?:(?:de|en)/))(.*)$ /de/$1

# If the file/symlink/directory does not exist => Redirect to index.php.
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-l

# Main URL rewriting.
RewriteRule .* index.php [L] 
```

**那么，我能做些什么呢？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-08T18:17:27.267

那这个呢：

```
RewriteRule ^/?(?!de/|en/)(.*) /de/$1 [L,R=301] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-08T18:26:16.007

你为什么不使用更简单的东西，像这样：

```
# if user didn't specify a valid language subfolder
RewriteCond %{REQUEST_URI} !^/(en|de)/
# redirect user to default language subfolder
RewriteRule ^(.*)$ /de/$1 [L,R=301] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T13:18:33.550

您实际上不需要使用 htacces，因为您可以在 realUrl 配置中配置此行为。只需在配置数组中定义这部分：

```
 'preVars' => array(
      array(
        'GETvar' => 'L',
        'valueMap' => array(
            'de' => '0',
            'en' => '1',
            'fr' => '2',
            ),
        'valueDefault' => 'de',
        ),
), 
```

这会给你一个重定向到 ../de/...

# css - 将文本和图像放在不同的行中

> ID：10064605
> 
> 赞同：0
> 
> 时间：2012-04-08T17:00:25.307
> 
> 标签：css, tabs

我有一个类似的代码

```
<span ><img src="xxx.png">Tab1</span><span ><img src="yyy.png">Tab2</span> 
```

此代码创建了两个选项卡，但唯一的问题是 tab1/tab2 和图像 xxx/yyy 在同一行。我希望它们在不同的行中，并且我希望两个 span 元素在同一行中。选项卡应如下所示

![在此处输入图像描述](../Images/48dbbe71c483a1a1181f92284d21ff2a.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T15:23:45.653

浮动：css的left属性将有助于您的工作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T17:09:04.793

我认为标记是理所当然的：

```
img { display: block; }
span { float: left; } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-08T17:03:08.980

您可能使用了错误的元素。`<span>`用于内联内容，而`<div>`可能更适合您想要做的事情。您希望它们在新行上，但 span 是专门为非换行项创建/使用的。

尝试这个：

```
<div><img src="xxx.png">Tab1</div><div><img src="yyy.png">Tab2</div> 
```

[有关HTML 标签 <div> 和 <span> 之间有什么区别的](https://stackoverflow.com/questions/183532/what-is-the-difference-between-html-tags-div-and-span)更多信息？

# sql - sql - SQL compact 上的嵌套选择

> ID：10064608
> 
> 赞同：2
> 
> 时间：2012-04-08T17:00:50.860
> 
> 标签：sql, sql-server-ce

我有以下产生解析错误的小查询。我正在尝试选择一组玩家 ID，然后选择这些玩家 ID 的数据。

我的问题是，在 SQL compact 中使用嵌套选择的正确方法是什么？

```
"SELECT FIRSTNAME, LASTNAME, GRADE, WON, LOST, SKILL 
 FROM player 
 WHERE ID = (SELECT player1 
             FROM temp_table 
             WHERE school = 0)" 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-08T17:06:46.177

尝试替换`ID =`为`ID IN`

# algorithm - 用于存储同步数据的分布式算法

> ID：10064609
> 
> 赞同：1
> 
> 时间：2012-04-08T17:01:07.693
> 
> 标签：algorithm, distributed-computing

在分布式系统中，所有代理都应该使用相同的密钥来加密信息。系统完全分布式，没有代理特权，代理可以进出。

每个代理都持有一个密钥，我希望任何代理都能够立即更换密钥。也就是说，从某个时间开始`t`，所有代理都将使用新密钥`K'`而不是以前的密钥`K`。

连接可靠（tcp），但也应考虑更通用的解决方案。

有没有标准的算法来做到这一点？

我错过了类似共识算法的教科书。

我的想法：

1.  所有代理将连接成一个圆圈。
2.  每个代理都会将新密钥发送给他的邻居，一旦他得到一个，以及密钥的创建时间。
3.  当代理收到新密钥时，它将比较两个密钥的创建日期并丢弃旧密钥。
4.  当代理人扔掉他以前的钥匙时 - 他会将他的新钥匙发送给他的邻居。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T18:25:38.087

您可以在少数通用方法中看到[这一点](http://www.gsd.inesc-id.pt/~ler/irdp/docs/consensus.ppt)，甚至对于少数著名的方法也是[如此。](http://ddg.jaist.ac.jp/pub/US04b.pdf)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T18:16:47.803

如果我猜对了，你希望有一个协议协议。根据您的假设（例如，同步、可能的故障等），有很多这样的协议。例如，在很多情况下，简单组通信协议（例如，ISIS）就足够了，对于更复杂的故障模式，您需要拜占庭协议。

# javascript - 文件是别名？

> ID：10064611
> 
> 赞同：1
> 
> 时间：2012-04-08T17:01:22.273
> 
> 标签：javascript

文档是 JavaScript 中 Sys.UI.DomElement 的别名吗？我在 msdn 中遇到过[这个例子](http://msdn.microsoft.com/en-us/library/bb397706%28v=vs.90%29.aspx)。

```
$addHandler(Sys.UI.DomElement.getElementById("Button1"), "click", toggleCssClassMethod); 
```

我以前只看到`document.getElementById(id)`。所以提出了这个问题。它可能听起来很糟糕。但我只是 JS 世界的孩子。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T17:04:21.920

不，`document`不是`Sys.UI.DomElement`. 这可以通过 IE javascript 控制台中的快速实验来演示。

```
document.name = "hello";
console.log(Sys.UI.DomElement.name);  // Prints undefined 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-08T17:13:35.033

不，两者不一样。我认为您的困惑可能来自一个普遍的误解，即`getElementById`仅属于`document`. 实际上，您可以`getElementById`在其他 DOM 元素上使用。像这样的东西很好用：

```
document.getElementById("test").getElementById("test2") 
```

[http://jsfiddle.net/CNc2s/](http://jsfiddle.net/CNc2s/)

请注意，第二次调用`getElementById`是在第一次调用返回的 DOM 元素上调用的。`test2`这将在带有和`id`测试 的元素内找到一个 id 的元素。

您不经常看到这样的事情的原因是`id`s 在文档中必须是唯一的。因此，在文档上调用它会得到与在包含元素上调用它相同的元素。

# magento - Magento：既不是前端也不是管理员开放

> ID：10064615
> 
> 赞同：0
> 
> 时间：2012-04-08T17:02:11.247
> 
> 标签：magento

我正在使用 Magento CE v1.7

在这两种情况下，这就是我所看到的：

处理您的请求时出错

出于安全原因，默认情况下禁用异常打印。

## 错误日志记录号：376160589307

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T07:57:36.797

转到您的根 magento 安装文件夹并找到 var/report 文件夹并查找名称为 376160589307 的文件。请打开它以查看确切的错误。

如果您想在浏览器本身中显示它，

转到您的根 magento 安装文件夹并找到 /errors 文件夹。在那里你会找到一个

`local.sample.xml or sample.local.xml and rename it to local.xml`在同一个位置

# iphone - 隐藏导航栏但不隐藏后退按钮

> ID：10064626
> 
> 赞同：1
> 
> 时间：2012-04-08T17:03:28.673
> 
> 标签：iphone, ios, cocoa-touch, uinavigationbar, back-button

我使用以下方法隐藏我的导航：

```
[self.navigationController setNavigationBarHidden:YES animated:YES]; 
```

但我不需要隐藏后退按钮，这可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-08T18:44:58.217

nevan king 是对的**，但**您可以简单地更改导航栏的背景图像或将其设置为 nil。如果将其设置为 nil 或提供透明的 BG 图像，您将获得所需的效果。

对于 iOS >= 5.0，您可以简单地设置外观：

```
if([navigationBar respondsToSelector:@selector(setBackgroundImage:forBarMetrics:)]) // needed if iOS older than 5.0 is also supported
    [navigationBar setBackgroundImage:nil forBarMetrics:UIBarMetricsDefault]; 
```

您可以在有指向导航栏的指针的地方执行此操作。例如，在`viewDidLoad`您的`ViewController`.

对于较旧的 iOS 版本，您需要一种解决方法，方法是创建一个类别**并**`UINavigationBar`覆盖该`drawRect`方法：

```
@implementation UINavigationBar (BackgroundImage)
- (void)drawRect:(CGRect)rect {
    UIImage *image = [UIImage imageNamed: @""];
    [image drawInRect:CGRectMake(0, 0, self.frame.size.width, self.frame.size.height)];
}
@end 
```

如果您想支持所有 iOS 版本，这两种方法都是兼容的。
因此，您应该记住，后退按钮使用相同的背景图像。所以你需要定制一个。

```
UIImage *bgImageNormal = [UIImage imageNamed:@"backButtonImage.png"];

UIButton *button = [UIButton buttonWithType:UIButtonTypeCustom];
[button setBackgroundImage: bgImageNormal forState:UIControlStateNormal];

button.frame= CGRectMake(0.0, 0.0, bgImageNormal.size.width, bgImageNormal.size.height);
[button addTarget:self action:@selector(navigationBarBackButtonTouchUpInside:) forControlEvents:UIControlEventTouchUpInside]; // your action method here

UIBarButtonItem *closeButton = [[UIBarButtonItem alloc] initWithCustomView:button];
self.navigationItem.leftBarButtonItem = closeButton;
[closeButton release]; 
```

需要为您推送到导航栏的每个 ViewController 实现此代码。它的一个好地方也在`viewDidLoad`方法内部。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T17:20:30.897

后退按钮是由导航栏创建的，并且始终是导航栏的一部分，因此这是不可能的。您可以在用户触摸屏幕时隐藏并重新显示导航栏（这是照片应用程序在您查看单张照片时所做的事情），或者创建一个按钮并将其永久放在屏幕的左上角。您还可以使导航栏部分透明，以便显示下面的内容。

# php - 如何从其他计算机访问我的本地主机服务器？

> ID：10064630
> 
> 赞同：16
> 
> 时间：2012-04-08T17:04:02.700
> 
> 标签：php, apache, wamp

我是 PHP 新手，所以我不知道如何解释它。我正在我的计算机上运行 WAMP，我希望能够从*另一台计算机访问**我的*本地主机。

 *可能吗？我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-08T17:25:01.120

> 前提是所有机器都在同一个网络上，并且您对这些机器具有管理权限（您必须编辑一些系统文件）。

你可以很容易地做到这一点，但它必须是一个手动过程。

您必须在主机文件中创建一个条目 -

*   在 Windows 机器上位于`%SystemRoot%\system32\drivers\etc\hosts`
*   在类 UNIX 系统上，它位于`/etc/hosts`

[http://en.wikipedia.org/wiki/Hosts_(file)#Location_in_the_file_system](http://en.wikipedia.org/wiki/Hosts_(file)#Location_in_the_file_system)。有关hosts 文件所在位置*的*
详细信息，请参阅链接。这取决于操作系统。

 ** * *

**必须在您希望
访问您的`localhost`机器的每台机器上完成以下操作。**

在主机文件的最后添加一行，类似于：

```
10.0.0.42       prathyash-localhost.com 
```

IP 地址（在上面的示例中是`10.0.0.42`）是*您的*本地主机的地址；您的计算机 IP 地址。域名 ( `prathyash-localhost.com`) 是*映射* 到 IP 地址的内容。

保存该文件后，只要*该*计算机指向`prathyash-localhost.com`，它将被定向到您的 IP 地址。防火墙仍然是一个障碍 - 但是其他答案涵盖了这一点，所以我不会重复他们的贡献。

* * *

根据您的情况，手动编辑数十个甚至数百个文件可能不可行。在这种情况下，您可能需要咨询网络管理员（他可能会在[Server Fault](https://serverfault.com/)上闲逛），他可能会为您提供更好的解决方案。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-02-12T17:34:35.263

这个问题可以解决如下。这适用于使用 wamp 服务器或类似本地服务器的人。首先确保你已经修改了 httpd.conf.scroll 直到你找到这一行：

```
#  onlineoffline tag - don't remove
Order Allow,Deny
Allow from all 
```

如果您有智能手机，请打开 wifi 热点以连接您的电脑和您想要连接的电脑。在您的 PC 中打开命令提示符并键入 ipconfig。在无线 LAN 适配器无线网络连接下记下您电脑的 ip4 地址（例如 192.168.43.47）。

在要连接的电脑上设置“自动获取IP地址”。在连接之前，请确保您的 wamp 服务器在线。打开客户端电脑的浏览器并输入之前记下的 IP 地址。这应该可以正常工作。在某些情况下，您可能需要关闭防病毒软件。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-08T17:08:59.247

是的，如果它们在同一个网络上，只需将计算机的 IP 地址作为目标，并确保任何一台计算机上任何会阻止访问端口 80（防火墙）的东西都已关闭

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-08T17:16:49.167

**@Shaun Hare**解释得很好，但是，如果这些计算机不在同一个网络中（我的情况，需要远程演示时），您还需要在路由器上设置**端口转发**，而远程端需要路由器的公共 IP 地址。

基本上，远程端会进入`http://123.123.123.123/index.php`他们的浏览器，路由器会将该请求（通过端口转发）指向安装在`192.168.10.10`（例如）的 WAMP 服务器。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-08T17:06:30.700

你不能。将适当的守护进程绑定到 0.0.0.0/:: 或外部接口并使用机器的 IP 地址。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-03-15T11:03:53.330

如果是用于测试，您可以使用[http://localhost.run/](http://localhost.run/)或[https://ngrok.com/](https://ngrok.com/)之类的服务来临时将 localhost 放到互联网上。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-08T17:17:27.030

在您的路由器配置上[发布转发端口 80 。](http://portforward.com/)开始沼泽。现在，当从任何外部机器访问您的 IP 地址时，它将跳转到“www”文件夹并显示索引文件。如果您不能这样做，这意味着您的防火墙正在阻止请求：禁用它并重试。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-04-10T18:36:07.107

您可以只修补防火墙。我发现入站和出站规则阻止了所有公共网络流量（也就是说，所有到我的路由器的流量都被视为公共的，即使它有密码）并继续选中该框以允许公共网络上的流量（入站和出站）用于所有带有 Apache 名称的规则。另外，我确实打开了 mySQL 服务器，但在这件事上根本不应该做任何事情（尽管生活让我感到惊讶，之前一些微不足道的事情最终变得非常重要，所以我会这样做最后的手段，但不太可能）。另外，我认为这至少应该在同一个 WiFi 网络上工作（我知道这是 LAN 的一部分，但只是为了消除任何歧义），因为我只用我的 Android 手机进行了测试（哦，我多么希望我有一个 Windows Phone ）。**

# asp.net-mvc - MVC 3 - 仅限特定用户访问

> ID：10064631
> 
> 赞同：4
> 
> 时间：2012-04-08T17:04:12.917
> 
> 标签：asp.net-mvc, asp.net-mvc-3

在我的 Web 应用程序中，注册用户可以添加新内容并稍后进行编辑。我只希望内容的作者能够编辑它。除了在所有操作方法中手动编写代码来检查登录用户是否与作者相同之外，还有什么聪明的方法可以做到这一点？我可以为整个控制器使用的任何属性？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-09T06:40:48.597

> 我可以为整个控制器使用的任何属性？

`Authorize`是的，您可以使用自定义属性扩展属性：

```
public class AuthorizeAuthorAttribute : AuthorizeAttribute
{
    protected override bool AuthorizeCore(HttpContextBase httpContext)
    {
        var isAuthorized = base.AuthorizeCore(httpContext);
        if (!isAuthorized)
        {
            // the user is either not authenticated or
            // not in roles => no need to continue any further
            return false;
        }

        // get the currently logged on user
        var username = httpContext.User.Identity.Name;

        // get the id of the article that he is trying to manipulate
        // from the route data (this assumes that the id is passed as a route
        // data parameter: /foo/edit/123). If this is not the case and you 
        // are using query string parameters you could fetch the id using the Request
        var id = httpContext.Request.RequestContext.RouteData.Values["id"] as string;

        // Now that we have the current user and the id of the article he
        // is trying to manipualte all that's left is go ahead and look in 
        // our database to see if this user is the owner of the article
        return IsUserOwnerOfArticle(username, id);
    }

    private bool IsUserOwnerOfArticle(string username, string articleId)
    {
        throw new NotImplementedException();
    }
} 
```

进而：

```
[HttpPost]
[AuthorizeAuthor]
public ActionResult Edit(int id)
{
    ... perform the edit
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T17:43:49.540

我会：

1.  根据内容记录保存 db.aspnet_Users 列 UserId (Guid)
2.  为您的内容模型编写一个扩展方法，根据保存的内容 User Guid 验证当前用户 Guid
3.  我将为您的管理员登录编写一些代码来覆盖此功能（我将创建一个管理员角色）。

# apache-flex - 为什么在 RichEditableText 控件内部单击时会失去焦点？

> ID：10064633
> 
> 赞同：0
> 
> 时间：2012-04-08T17:05:00.807
> 
> 标签：apache-flex, events, flex4, focus

我的应用程序创建一个`RichEditableText`响应按钮单击，然后将焦点设置在控件上因此，用户可以立即开始输入。

但是，似乎`focusOut`在用户单击该控件时为该控件调度了一个事件。它似乎暂时失去了焦点，然后又恢复了。对用户来说这是不可见的，但应用程序代码会看到`focusIn`并`focusOut`触发事件，这会搞砸事情，因为当控件**实际**失去焦点时需要运行一些逻辑。

那么，知道为什么`RichEditableText`会失去焦点吗？我似乎无法确定是什么触发了焦点变化。如果我在`focusOut`事件中设置断点，我看不到`focusOut`事件上方的任何内容，因此很难调查。

# android - sqlite android查询（光标）

> ID：10064634
> 
> 赞同：0
> 
> 时间：2012-04-08T17:05:09.640
> 
> 标签：android, database, sqlite, service, cursor

我开发了一个应用程序，允许用户保存他最喜欢的两个停车位。它使用一项服务从 sqlite 数据库中检索相关的停车信息。在数据库中，我有这种方法可以找到第一个条目：

```
 public Cursor firstentry(){
       String select = "SELECT PREF1, PREF2 FROM parking_table WHERE id =1";
       Cursor cursor = db.rawQuery(select, null);
   return cursor; 
```

每次我运行我的应用程序时，都会出现强制关闭错误，当服务尝试使用以下命令调用此方法时：

```
Cursor c = dh.firstentry(); 
```

当我评论它时，它给出了错误，应用程序运行良好。

这是错误的logcat：

```
04-08 18:56:38.673: E/AndroidRuntime(13166): FATAL EXCEPTION: Timer-0
04-08 18:56:38.673: E/AndroidRuntime(13166): java.lang.NullPointerException
04-08 18:56:38.673: E/AndroidRuntime(13166):    at stefan.testservice.ConnectionService$1.run(ConnectionService.java:64)
04-08 18:56:38.673: E/AndroidRuntime(13166):    at java.util.Timer$TimerImpl.run(Timer.java:284)
04-08 18:56:39.654: E/ActivityThread(13166): Activity stefan.testservice.TestserviceActivity has leaked IntentReceiver stefan.testservice.TestserviceActivity$2@40521b78 that was originally registered here. Are you missing a call to unregisterReceiver()?
04-08 18:56:39.654: E/ActivityThread(13166): android.app.IntentReceiverLeaked: Activity stefan.testservice.TestserviceActivity has leaked IntentReceiver stefan.testservice.TestserviceActivity$2@40521b78 that was originally registered here. Are you missing a call to unregisterReceiver()?
04-08 18:56:39.654: E/ActivityThread(13166):    at android.app.LoadedApk$ReceiverDispatcher.<init>(LoadedApk.java:756)
04-08 18:56:39.654: E/ActivityThread(13166):    at android.app.LoadedApk.getReceiverDispatcher(LoadedApk.java:551)
04-08 18:56:39.654: E/ActivityThread(13166):    at android.app.ContextImpl.registerReceiverInternal(ContextImpl.java:795)
04-08 18:56:39.654: E/ActivityThread(13166):    at android.app.ContextImpl.registerReceiver(ContextImpl.java:782)
04-08 18:56:39.654: E/ActivityThread(13166):    at android.app.ContextImpl.registerReceiver(ContextImpl.java:776)
04-08 18:56:39.654: E/ActivityThread(13166):    at android.content.ContextWrapper.registerReceiver(ContextWrapper.java:318)
04-08 18:56:39.654: E/ActivityThread(13166):    at stefan.testservice.TestserviceActivity$1.onServiceConnected(TestserviceActivity.java:280)
04-08 18:56:39.654: E/ActivityThread(13166):    at android.app.LoadedApk$ServiceDispatcher.doConnected(LoadedApk.java:1064)
04-08 18:56:39.654: E/ActivityThread(13166):    at android.app.LoadedApk$ServiceDispatcher$RunConnection.run(LoadedApk.java:1081)
04-08 18:56:39.654: E/ActivityThread(13166):    at android.os.Handler.handleCallback(Handler.java:587)
04-08 18:56:39.654: E/ActivityThread(13166):    at android.os.Handler.dispatchMessage(Handler.java:92)
04-08 18:56:39.654: E/ActivityThread(13166):    at android.os.Looper.loop(Looper.java:123)
04-08 18:56:39.654: E/ActivityThread(13166):    at android.app.ActivityThread.main(ActivityThread.java:3683)
04-08 18:56:39.654: E/ActivityThread(13166):    at java.lang.reflect.Method.invokeNative(Native Method)
04-08 18:56:39.654: E/ActivityThread(13166):    at java.lang.reflect.Method.invoke(Method.java:507)
04-08 18:56:39.654: E/ActivityThread(13166):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
04-08 18:56:39.654: E/ActivityThread(13166):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
04-08 18:56:39.654: E/ActivityThread(13166):    at dalvik.system.NativeStart.main(Native Method)
04-08 18:56:40.054: E/ActivityThread(13166): Activity stefan.testservice.TestserviceActivity has leaked ServiceConnection stefan.testservice.TestserviceActivity$1@40521790 that was originally bound here
04-08 18:56:40.054: E/ActivityThread(13166): android.app.ServiceConnectionLeaked: Activity stefan.testservice.TestserviceActivity has leaked ServiceConnection stefan.testservice.TestserviceActivity$1@40521790 that was originally bound here
04-08 18:56:40.054: E/ActivityThread(13166):    at android.app.LoadedApk$ServiceDispatcher.<init>(LoadedApk.java:938)
04-08 18:56:40.054: E/ActivityThread(13166):    at android.app.LoadedApk.getServiceDispatcher(LoadedApk.java:833)
04-08 18:56:40.054: E/ActivityThread(13166):    at android.app.ContextImpl.bindService(ContextImpl.java:867)
04-08 18:56:40.054: E/ActivityThread(13166):    at android.content.ContextWrapper.bindService(ContextWrapper.java:347)
04-08 18:56:40.054: E/ActivityThread(13166):    at stefan.testservice.TestserviceActivity.doBindService(TestserviceActivity.java:290)
04-08 18:56:40.054: E/ActivityThread(13166):    at stefan.testservice.TestserviceActivity$DownloadTask.onPostExecute(TestserviceActivity.java:193)
04-08 18:56:40.054: E/ActivityThread(13166):    at android.os.AsyncTask.finish(AsyncTask.java:417)
04-08 18:56:40.054: E/ActivityThread(13166):    at android.os.AsyncTask.access$300(AsyncTask.java:127)
04-08 18:56:40.054: E/ActivityThread(13166):    at android.os.AsyncTask$InternalHandler.handleMessage(AsyncTask.java:429)
04-08 18:56:40.054: E/ActivityThread(13166):    at android.os.Handler.dispatchMessage(Handler.java:99)
04-08 18:56:40.054: E/ActivityThread(13166):    at android.os.Looper.loop(Looper.java:123)
04-08 18:56:40.054: E/ActivityThread(13166):    at android.app.ActivityThread.main(ActivityThread.java:3683)
04-08 18:56:40.054: E/ActivityThread(13166):    at java.lang.reflect.Method.invokeNative(Native Method)
04-08 18:56:40.054: E/ActivityThread(13166):    at java.lang.reflect.Method.invoke(Method.java:507)
04-08 18:56:40.054: E/ActivityThread(13166):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
04-08 18:56:40.054: E/ActivityThread(13166):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
04-08 18:56:40.054: E/ActivityThread(13166):    at dalvik.system.NativeStart.main(Native Method) 
```

非常感谢任何帮助，因为我尝试了一切，但似乎没有任何效果。提前致谢！

编辑：

停车位代码：

```
 public void onCreate(SQLiteDatabase db) {
     db.execSQL("CREATE TABLE " + TABLE_NAME + "(id INTEGER PRIMARY KEY, PREF1 TEXT, PREF2 TEXT)");
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T17:52:18.010

如果您没有 SQLite 浏览器软件，请在此处获取： [SQLite Browser](http://sqlitebrowser.sourceforge.net/)

当我使用 SQLite 时，它​​会有所帮助。我之前遇到过这个问题，我通过将`id`参数添加到查询中来解决它。本质上，您需要将查询更改为：

```
public Cursor firstentry(){
   String select = "SELECT id, PREF1, PREF2 FROM parking_table WHERE id =1";
   Cursor cursor = db.rawQuery(select, null);
return cursor; 
```

不要忘记调用`c.moveToFirst()`if`c`是光标的名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T17:15:17.993

它的`nullpointerexception`意思是当时数据库中可能没有任何内容。如果光标为空，您需要处理

单步执行代码实际上是准确查看 null 的唯一方法。尽管很难用您发布的内容来判断，但肯定需要更多代码

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-08T17:29:02.413

您正在运行 rawsql，因此请检查确切的查询是否对您的数据库有效，`SELECT PREF1, PREF2 FROM parking_table WHERE id =1`

PREF1 完全是（带大小写）列的名称吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-11T10:49:32.060

我设法解决了它，一切都很好，我只需要初始化类对象。这是所需的代码行：

```
this.yourobject = new class(this); 
```

就我而言，它是：

```
this.dh = new SQLHelper(this); 
```

希望能帮助到你 ：）

# facebook - 为什么我在 fb 中戳我朋友的普通 http 请求失败了？

> ID：10064637
> 
> 赞同：0
> 
> 时间：2012-04-08T17:05:20.590
> 
> 标签：facebook

当我登录时，向我的朋友发送一个普通的 http poke 请求，但每次都失败。为什么？状态码是 302 Found。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T17:17:41.487

HTTP 状态[302](http://httpstatus.es/302)表示重定向。

> 临时 URI 应该由响应中的 Location 字段给出。除非请求方法是 HEAD，否则响应的实体应该包含一个简短的超文本注释，其中包含指向新 URI 的超链接。

所以这并不意味着请求失败。您只需查看另一个 url（在 Location 标头中给出）即可找到响应。

# c# - C# 2D 动画 - 从慢到快

> ID：10064642
> 
> 赞同：0
> 
> 时间：2012-04-08T17:06:15.840
> 
> 标签：c#, animation

我不擅长动画，我没有一个好的公式来做一些好的动画。

我想问您是否可以共享任何可以移动对象的代码，开始缓慢然后变得更快？（加速）

我今天想用 Google 的关于“Eadweard Muybridge”的涂鸦做一些类似的事情

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T17:11:42.103

尝试像这样的公式

```
Position.X = TimeSinceStart ^ 2 
```

并尝试改变指数。（例如 1/2 或 1.5）

# javascript - 如何使用键/值格式构建 javascript 对象

> ID：10064646
> 
> 赞同：-1
> 
> 时间：2012-04-08T17:06:34.723
> 
> 标签：javascript, object, formatting

我有一个系列输入标签，如

```
<input id="t1" value="1">
<input id="t2" value="2">
<input id="t3" value="3"> 
```

然后我想以 id/value 格式构建一个 javascript 对象，例如：

```
input:
{
   ["t1",1]
   ["t2",2]
   ["t3",3]
} 
```

我怎样才能做到这一点？用哪个函数或方法？用数组？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-08T17:10:46.480

您描述的对象无效。假设你的意思是：

```
{
   "t1":1,
   "t2":2,
   "t3":3
} 
```

只需遍历元素，并检查 id 和 value 属性即可获取数据。

```
var inputs = document.getElementsByTagName('input');
var ob = {};
for (var i = 0; i < inputs.length; i++) {
  var input = inputs[i];
  ob[input.id] = input.value;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-08T17:13:43.143

您的输出对象没有意义，它是一个没有键的对象。假设你真正想要的是：

```
{
    "t1": 1,
    "t2": 2,
    "t3": 3
} 
```

你可以做这样的事情，`inputVals`并将包含上面的对象：

```
var inputs = document.getElementsByTagName('input'),
    inputVals = {};

for (var i = 0, il = inputs.length; i < il; i++) {
    inputVals[inputs[i].id] = inputs[i].value;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-08T17:46:53.920

jQuery serializeArray 在获得你想要的东西方面有很长的路要走。

[http://api.jquery.com/serializeArray/](http://api.jquery.com/serializeArray/)

它不会准确返回您在问题中提出的数组格式，但它应该为您提供一些可以使用的东西。

# multithreading - 哪种方法更健壮和可扩展？

> ID：10064648
> 
> 赞同：0
> 
> 时间：2012-04-08T17:06:59.423
> 
> 标签：multithreading, chat, fork, distributed-system

我正在实现一个分布式聊天系统，在这个系统中我们有以下选项：

1.  使在每个节点上运行的客户端和服务器作为单独的线程运行。充当接收者的服务器将作为守护线程运行，而客户端将用户输入作为普通线程运行。

2.  fork 两个进程，一个用于客户端，一个用于服务器。

我无法推理出要继续使用哪一个。任何见解都会很棒！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T19:49:17.797

您可以通过在接收数据并将它们放入正确队列的线程中创建 n 个工作人员，将数据推送到客户端的 m 个工作人员和处理来自队列的数据的 k 个工作人员，以“可扩展”的方式来做到这一点。

n 工作人员获取数据 m 工作人员推送数据 k 工作人员处理数据并跟踪状态 传入消息队列 传出消息队列

这样您就可以找到最适合您的 (n, m, k)。这里唯一的问题是，在没有任何错误的情况下实现它并非易事。您可能会将工作人员类型的数量减少到两种，即传入消息和进程 + 推送并使用 redis (redis.io) 中的列表作为队列。但这仍然需要大量的测试覆盖:) 祝你好运

实际上，您可以为此使用 websockets。像 socket.io [http://socket.io/](http://socket.io/)或 faye [http://faye.jcoglan.com/这样的东西](http://faye.jcoglan.com/)

只需为聊天创建前台 :) 这将以真正可扩展和可用的方式解决您的大部分问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T23:27:48.527

他们两个同样糟糕。您实际上想要在 I/O 上进行多路复用。在 Erlang 中这是微不足道的，这是在 Erlang 中编程的唯一方法。在 Python 中，您可以使用 Twisted 或 gevent 或类似的。Ruby 有 EventMachine。Java有NIO。C有libev。等等。

# android - 短信唤醒应用程序无法正常工作

> ID：10064651
> 
> 赞同：0
> 
> 时间：2012-04-08T17:07:30.240
> 
> 标签：android, android-activity, sms, broadcastreceiver

我正在尝试制作一个应用程序，以便我的手机在收到短信时唤醒。我试着做了这个。这是代码：

```
package com.atiffarrukh.wakemeup;

import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.os.Bundle;
import android.telephony.SmsMessage;

import android.widget.Toast;

public class SmsReceiver extends BroadcastReceiver
{
    boolean received = false;
    @Override
    public void onReceive(Context context, Intent intent) 
    {
        //---get the SMS message passed in---
        Bundle bundle = intent.getExtras();        
        SmsMessage[] msgs = null;
        String str = "";            
        if (bundle != null)
        {
            //---retrieve the SMS message received---
            Object[] pdus = (Object[]) bundle.get("pdus");
            msgs = new SmsMessage[pdus.length];            
            for (int i=0; i<msgs.length; i++){
                msgs[i] = SmsMessage.createFromPdu((byte[])pdus[i]);                
                str += "SMS from " + msgs[i].getOriginatingAddress();                     
                str += " :";
                str += msgs[i].getMessageBody().toString();
                str += "\n";     
                received = true;
            }
            //---display the new SMS message---
            Toast.makeText(context, str, Toast.LENGTH_SHORT).show();
            Intent i = new Intent(context,WakeUp.class); //for starting activity from broadcast
            i.putExtra("ReceivedCheck", received);//put value of received
            i.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);//flags the intent to start activity
            context.startActivity(i);
        }                         
    }
} 
```

活动是：

```
package com.atiffarrukh.wakemeup;

import android.app.Activity;
import android.content.Context;
import android.content.Intent;
import android.os.Bundle;
import android.os.PowerManager;

public class WakeUp extends Activity {
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);

        Intent intent = getIntent();
        boolean check = intent.getBooleanExtra("ReceivedCheck", false);
        PowerManager pm = (PowerManager) getSystemService(Context.POWER_SERVICE);
        //Toast.makeText(getBaseContext(), "This is WAKEUP Act", Toast.LENGTH_SHORT).show();
        boolean isScreenOn = pm.isScreenOn();
        if(check && !isScreenOn ){
        /*getWindow().setFlags(WindowManager.LayoutParams.FLAG_TURN_SCREEN_ON,
                WindowManager.LayoutParams.FLAG_TURN_SCREEN_ON);
        Toast.makeText(getBaseContext(), "This is WAKEUP SCREEN", Toast.LENGTH_SHORT).show();
        */
            //Toast.makeText(getBaseContext(), "This is WAKEUP SCREEN", Toast.LENGTH_SHORT).show();

            final PowerManager.WakeLock wl = pm.newWakeLock(PowerManager.SCREEN_DIM_WAKE_LOCK, "My tag");
            wl.acquire();
            Thread timer = new Thread(){
                public void run(){
                    try {
                        sleep(5000);
                    } catch (InterruptedException e) {
                        // TODO: handle exception
                    }finally{
                        wl.release();
                    }
                }
            };
            timer.start();
        }
    }
} 
```

这个应用程序有什么作用？

1.  在消息音前几秒钟唤醒我的手机。
2.  打开以“WakeMeUp”为标题的空白黑屏。

现在，我想要的是：

1.  用消息音唤醒手机，但几乎同时。
2.  我不希望在调用活动时打开那个空白屏幕。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T05:21:06.477

1.  延迟可能是由于您自己的代码。尝试从广播接收器中删除耗时的代码，看看延迟是否减少。

2.  如果您不想要空白屏幕，请不要使用活动。如果要在后台运行某些内容，请使用服务。

# php - Codeigniter db 类在插入时截断文本

> ID：10064652
> 
> 赞同：1
> 
> 时间：2012-04-08T17:07:45.723
> 
> 标签：php, mysql, codeigniter

我有一个 codeigniter 控制器，它从 API 接收 json 内容并将其插入到 mysql longtext 字段中。一切都顺利运行了一段时间，但最近我注意到一些内容被截断了。这里有两个例子。

插入的表有三个字段

```
id int 
data longtext 
date_added datetime 
```

我正在接收数据并使用活动记录插入功能直接将其添加到数据库中。看起来像这样

```
$this->db->insert('received', array('data' => $data, 'date_added' => date('Y-m-d H:i:s'))); 
```

使用分析器，我监视了查询并发现了两个错误的：

```
INSERT INTO `received` (`data`, `date_added`) VALUES ('{\"status\":{\"lastMaintenanceAt\":0000,\"code\":304,\"period\":900},\"items\":[{\"permalinkUrl\":\"http://example.com\",\"updated\":0000,\"postedTime\":0000,\"summary\":\"Man\'s guarantees are like his words.\",\"title\":\"By: John\",\"content\":\"<p>Man&#8217;s guarantees are like his words.</p>\",\"id\":\"http://example.com\",\"actor\":{\"permalinkUrl\":\"\",\"displayName\":\"John\"}}],\"title\":\"Comments on: Banker refuses to give ‘Written Guarantee’\"}', '2012-04-08 00:28:29') 
```

和

```
INSERT INTO `received` (`data`, `date_added`) VALUES ('{\"status\":{\"code\":304,\"period\":900,\"feed\":\"http://example.com\"},\"items\":[],\"title\":\"Comments on: Making her cry…\"}', '2012-04-08 00:49:35') 
```

查询似乎没问题。但在第一种情况下，只有部分 JSON 进入表格，它在 after`"[...] refuses to give"`和第二个 after 中被截断`making her cry`。

查询未返回错误，并且日期已正确插入。此外，如果我复制查询并在 mysql 命令提示符下执行它们，它们将插入全文。这些查询是其他数百个成功查询中的一个。

知道可能是什么问题吗？

谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T21:46:03.637

# ios - 如何强制 ViewController 卸载？

> ID：10064654
> 
> 赞同：2
> 
> 时间：2012-04-08T17:08:22.633
> 
> 标签：ios

我有一个在后台运行的应用程序，因为它需要使用位置更新。但是，因为我不想消耗电池。我想确保当应用程序切换到后台运行时所有视图控制器都已卸载。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-08T17:49:01.443

强制您的视图控制器卸载不会节省任何电池寿命。最好让操作系统在需要时担心您的应用程序内存不足。如果您使用后台模式在用户旅行大量时通知您的应用程序，则您无需担心这一点，因为您的应用程序实际上并未在后台运行，而只是有机会响应位置变化。如果您使用的是恒定位置背景模式（用于 GPS 应用程序等），这会有点问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-08T17:51:08.543

您不需要卸载视图控制器，但您确实需要关闭位置更新。如果您在 App Delegate 中开始位置更新，请输入以下内容：

```
- (void)applicationWillResignActive:(UIApplication *)application
{
    [myLocationManager stopUpdatingLocation];
} 
```

`viewWillDisappear:`如果您的位置管理器在与 App Delegate 不同的位置启动，您也可以在该方法中执行此操作。

# mysql - 限制结果的最有效方法是 JOIN？

> ID：10064655
> 
> 赞同：1
> 
> 时间：2012-04-08T17:08:33.677
> 
> 标签：mysql, optimization, select

我在 MySQL 查询中有一个相当简单的一对多类型连接。在这种情况下，我想通过左表限制我的结果。

例如，假设我有一个`accounts`表和一个`comments`表，我想从中提取 100 行`accounts`以及每个表的所有关联`comments`行。

我能想到的唯一方法是在 FROM 子句中使用子选择，而不是简单地选择 FROM `accounts`。这是我目前的想法：

```
SELECT a.*, c.* FROM 
    (SELECT * FROM accounts LIMIT 100) a
    LEFT JOIN `comments` c on c.account_id = a.id
    ORDER BY a.id 
```

但是，每当我需要进行某种子选择时，我的中级 SQL 知识就会感觉它做错了什么。

有没有更有效或更快的方法来做到这一点，或者这很好吗？

**顺便一提...**

这可能是最简单的方法，我可以作为答案。我只是想弄清楚是否有另一种方法可以在速度方面与上述陈述竞争。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T17:20:54.640

不，查询很好，就是这样。您可能希望过滤字段而不是过滤`a.*`字段`c.*`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T17:26:27.563

对我来说看起来很完美。

只是想知道您是否可以从上述查询中接收少于或多于 100 行。因为如果对于表格的特定行，`accounts`表格中没有行，`comments`那么您将获得少于 100 行。`comments`同样，如果表中的一行有多个匹配的行，`accounts`那么您可能会得到超过 100 行。

请参阅：[如何优化此查询，执行时间超过一分钟](https://stackoverflow.com/questions/9924643/how-can-i-optimize-this-query-takes-more-than-a-min-to-execute/9924939#9924939)

# jquery - jQuery 显示/隐藏重复舞蹈

> ID：10064662
> 
> 赞同：0
> 
> 时间：2012-04-08T17:09:38.510
> 
> 标签：jquery

我有一个带有寻呼机的 jQuery Cycle，它创建了一个无序列表，点击后会更改幻灯片。我正在尝试使用无序列表来显示/隐藏每张幻灯片的关联文本。并且，为了使该过程进一步复杂化，当没有与幻灯片关联的文本时，有一组默认文本。

html 看起来像这样：

```
<div class="slideshow">
  <img src="img1.png" />
  <img src="img2.png" />
  <img src="img3.png" />
</div>
<div class="slidetxt slide-3-text" style="display:none;">Text to appear with slide 3</div>
<div class="slidetxt slide-1-text">Text to appear with slide 1</div>
<div class="slidetxt defaultcontent" style="display:none;">This is the default text for the page.</div> 
```

jQuery 看起来像这样：

```
jQuery(document).ready(function() {
    jQuery('.slideshow')
    .after('<ul id="slidenav" />')
    .cycle({
        fx: 'fade',
        timeout: 0,
        pager: '#slidenav',
        pagerAnchorBuilder: function(idx, slide) {
            return '<li><a href="#"></a></li>';
        }
    });
    jQuery('#slidenav li a').click(function(){
        var index = jQuery(this).parent('li').index();
        index = index + 1;
        var slidetxt = ".slide-"+index+"-text";
        jQuery(".slidetxt").hide("slow", function(){
            if(jQuery(slidetxt).length){
                jQuery(slidetxt).show("slow");
            }else{
                jQuery(".defaultcontent").show("slow");
            }           
        });
    });
}); 
```

出于某种原因，单击第三个导航按钮总是可以正常工作，但单击第二个总是显示默认文本，然后立即隐藏它，然后再次显示它，单击第一个导航按钮有时可以正常工作，有时会显示/隐藏/表演舞蹈。

我猜这与 jQuery 有关，认为它在真正完成之前已经完成了操作，但也许这只是我的草率代码！:-) 所有帮助将不胜感激！谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T19:26:16.043

舞蹈是由每个`.slidetxt`元素运行一次的隐藏回调引起的。

这可以通过使用来克服，`jQuery.when(jQuery('.slidetxt').hide('slow').done(function(){...})`当所有隐藏完成时，它会运行一次回调。

您还可以利用 Cycle 的`before`和`after`选项，而不是在导航链接上附加一个额外的点击处理程序。

整个事情对您的原始代码来说是一个相当轻的模型，看起来像这样：

```
jQuery(document).ready(function() {
    $slidetxt = jQuery(".slidetxt");
    $defaultcontent = jQuery(".defaultcontent");
    jQuery('.slideshow').after('<ul id="slidenav" />').cycle({
        fx: 'fade',
        timeout: 0,
        pager: '#slidenav',
        pagerAnchorBuilder: function(idx, slide) {
            return '<li><a href="#">' + (idx + 1) + '</a></li>';
        },
        before: function() {
            $slidetxt.hide("slow");
        },
        after: function(currSlideElement, nextSlideElement) {
            var index = 1 + jQuery(nextSlideElement).index();
            var $s = jQuery(".slide-" + index + "-text"); 
            jQuery.when($slidetxt.hide("slow")).done(function() {
                if ($s.length) {
                    $s.show("slow");
                }
                else {
                    $defaultcontent.show("slow");
                }
            });
        }
    });
}); 
```

见工作[小提琴](http://jsfiddle.net/qzwGh/2/)

# c# - MVC 强类型 IQueryable > 型号

> ID：10064665
> 
> 赞同：2
> 
> 时间：2012-04-08T17:10:01.867
> 
> 标签：c#, asp.net-mvc, linq, razor

我正在尝试为我在 MVC 中的一个视图创建一个强类型模型。该模型是 LINQ GroupBy 查询的结果，因此它是如下所示的类型（按姓氏的第一个字母对员工进行分组）。

```
@model IQueryable<IGrouping<string, Employee>> 
```

我不确定为什么，但它不允许我拥有这种类型的模型。我收到的错误消息是：开头的“<”缺少相应的结尾“>”。这是不正确的。

我知道我可以创建一个特定于视图的模型并填充它，但我想知道为什么这个模型似乎不起作用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-08T17:21:01.380

默认情况下，可在剃刀视图中直接使用的命名空间非常有限。尝试将其扩展为完全限定名称并查看问题是否仍然存在：

```
@model System.Linq.IQueryable<System.Linq.IGrouping<string, Name.Space.Employee>> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T17:23:01.520

我不知道您为什么会收到此错误，因为您似乎使用了正确的 Razor 代码。页面中的其他地方实际上可能存在一个错误，该错误通过这个不正确的错误消息被显示出来。

可以帮助您确定错误的真正来源的解决方法是创建您自己的强类型模型类，它可以将此数据作为其属性：

```
public class EmployeeListViewModel
{
    public IQueryable<IGrouping<string, Employee>> EmployeesByCompanyTitle {get;set;}
} 
```

（有些人会认为这是一种更好的方法，因为您现在可以更轻松地向视图模型添加信息。）

# mysql - 在 MySQL 中使用带有 PREPARE 的 LIMIT 变量时出现未声明的变量错误

> ID：10064666
> 
> 赞同：1
> 
> 时间：2012-04-08T17:10:03.210
> 
> 标签：mysql, sql, limit, prepared-statement

我正在编写一个存储过程。我在将变量与 LIMIT 和准备好的语句结合使用时遇到了一些问题。（见下面的代码）

该过程是正常创建的，但是当我调用它时，我收到一个错误，即变量`a`未声明。有什么建议么？

```
delimiter //
drop procedure if exists shop1;
create procedure shop1()
begin 
    declare a varchar(255) default null;
    declare counter int(4) default 0;
    declare row_numbers int(4); 
    declare s varchar(255) default null;

    select count(*) into row_numbers from salesmen;
    WHILE counter< row_numbers+1 DO
        set @s='select fio from salesmen into a Limit ? 1';
        set @counter=counter;
        prepare stmt from @s;
        execute stmt using @counter;

        SET counter=counter+1;
        insert into warehouse.place (shop, fio) values (1, a);
    END WHILE;

    SET counter=0;
    select count(*) into row_numbers from products;
    WHILE counter< row_numbers+1 DO
        SET counter=counter+1;
    END WHILE;
end; 
// 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T19:12:51.730

您可以使用 INSERT ... SELECT 来做同样的事情 -

```
INSERT INTO warehouse.place (shop, fio)
SELECT 1, fio FROM salesmen 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T17:21:21.170

你的意思？

```
set @s='select fio from salesmen into a Limit ?,1'; 
```

# javascript - 过早触发 javascript setTimeOut 事件

> ID：10064668
> 
> 赞同：2
> 
> 时间：2012-04-08T17:10:22.423
> 
> 标签：javascript, jquery

我正在使用 setTimeOut 来控制自动幻灯片。

（你可以在这里看到它：http: [//thingist.com/labs/ipad.shtml——](http://thingist.com/labs/ipad.shtml)基本上是我工作时可以看到的漂亮东西。图片来自 reddit 的 API）

代码大致如下所示：

```
next() {
   image_url = images[key]["url"]
   $("#image").html(vsprintf("<img src='%s'>", [image_url]));
   key++;
   setTimeOut(function() { next(); }, 30000); 
```

问题是，如果我以另一种方式触发“下一个”函数（例如使用 div onclick），setTimeOut 回调函数仍在排队。所以我会“下一个”图像，但是当回调触发时，它会再次“下一个”图像。如果您连续多次“下一个”，则会有大约 30 秒的延迟爆发跟随您。（一旦所有排队的超时触发）。

有没有办法过早触发 setTimeOut 的回调？还是完全出队？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-08T17:12:49.110

您可以使用[`clearTimeout()`](https://developer.mozilla.org/en/DOM/window.clearTimeout)清除先前设置的超时。

```
var timeout;
function next() {
   image_url = images[key]["url"]
   $("#image").html(vsprintf("<img src='%s'>", [image_url]));
   key++;
   timeout = setTimeout(function() { next(); }, 30000);
}

// Clear the timeout by calling clearTimeout()
window.clearTimeout(timeout); 
```

# iphone - 在 AFNetworking 中使用 AFXMLRequestOperation 发出请求

> ID：10064669
> 
> 赞同：0
> 
> 时间：2012-04-08T17:10:23.117
> 
> 标签：iphone, ios

将服务器更改为 ssl ( http --> https ) 后，我正在执行失败块并生成错误，例如

> 请求超时

我知道 AFXMLRequestOperation 是 AFHTTPRequestOperation 的子类，它是 AFURLConnectionOperation 的子类，用于使用 HTTP 或 HTTPS 协议的请求。因此，我认为我可以从服务器获得一些响应，而不是上述错误。

有没有人经历过，请帮忙。欢迎任何意见。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T18:02:14.260

您在服务器上使用的 ssl 证书可能是自签名的，或者不是由合适的证书颁发机构签名的。我将首先对此进行调查，然后采取措施强制您的应用程序连接到服务器，即使证书签名异常。

# sql - SQL Server 中的预插入/更新触发器

> ID：10064670
> 
> 赞同：0
> 
> 时间：2012-04-08T17:10:30.060
> 
> 标签：sql, sql-server-2008, triggers

我们只需要在 SQL Server 2008 R2 中创建几个预插入/更新触发器，它们会执行一些操作`select *`，或者`select count(*)`如果它为空或非空，则会显式失败。

请问，如何实现？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T17:21:22.610

创建`INSTEAD OF INSERT, UPDATE`触发器。现在要防止 DML，您有 2 个选项。在触发器主体中执行`RAISERROR`，以便您的应用程序可以捕获错误。另一种方法是不在触发器中执行实际操作`insert/update`，因此不会插入/更新任何记录，但用户不会知道 DML 是否成功。

# android - ActionbarSherlock 和 android:targetSdkVersion>13

> ID：10064671
> 
> 赞同：0
> 
> 时间：2012-04-08T17:10:45.457
> 
> 标签：android, android-actionbar, actionbarsherlock

我正在使用 ActionbarSherlock 4.0 - 问题是当我将 targetSdkVersion 设置为 14 或 15 时，主页按钮停止工作 - 一旦我将其设置回 13，一切都很好，我正在使用 3.1 的平板电脑和 2.3 的手机进行测试。 6

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T17:16:21.140

如果您指的是 ActionBar 中的“向上”按钮，则在针对 API14+ 时必须调用[ActionBar.setDisplayHomeAsUpEnabled(true) 。](http://developer.android.com/reference/android/app/ActionBar.html#setDisplayHomeAsUpEnabled(boolean))

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T14:34:05.170

我发现出了什么问题 - 当目标 13+ 时必须明确调用

`getSupportActionBar().setHomeButtonEnabled(true);`

# c# - 压缩小字符串

> ID：10064673
> 
> 赞同：1
> 
> 时间：2012-04-08T17:10:48.123
> 
> 标签：c#, string, compression

也许有任何方法可以将小字符串（86 个字符）压缩成更小的东西？

```
@a@1\s\215\c\6\-0.55955,-0.766462,0.315342\s\1\x\-3421.-4006,3519.-4994,3847.1744,sbs 
```

我看到的唯一方法是替换唯一字符上的重复字符。但我在谷歌中找不到关于那个的东西。感谢您的回复。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T17:19:50.963

[http://en.wikipedia.org/wiki/Huffman_coding](http://en.wikipedia.org/wiki/Huffman_coding) 霍夫曼编码可能是一个不错的开始。一般来说，这个想法是用复制原始字符串或数据集所需的最小位模式替换单个字符。

您需要对各种“小字符串”进行统计分析，以找到最常见的字符，以便用最小的唯一位模式表示更常见的字符。并且可能用需要表示的每个字符组成一个“示例”小字符串（如 a-z0-9@.0-）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T22:03:42.770

我拿了你的 85 个字节的示例字符串（不是 83，因为它是从帖子中逐字复制的，可能没有处理一些预期的转义）。我使用 raw deflate 压缩它，即没有 zlib 或 gzip 头和尾，它被压缩到 69 字节。这主要是通过霍夫曼编码完成的，尽管也有四个三字节的反向字符串引用。

压缩这种东西的最好方法是使用你所知道的关于数据的一切。它似乎有某种结构，并且其中编码了数字。您可以开发更短的预期数据表示。您可以将其编码为比特流，如果您获得的数据不是预期的，则第一位可以指示后面是直接字节。

另一种方法是利用以前的消息。如果此消息是消息流中的一个，并且它们看起来都彼此相似，那么您可以制作一个先前消息的字典作为压缩的基础，可以在另一端通过接收到的先前消息重建. 如果它们的消息确实相似，这可能会显着改善压缩。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-08T17:33:29.937

你应该查一下`RUN-LENGTH ENCODING.`这是一个演示

```
rrrrrunnnnnn    BECOMES    5r1u6n     WHAT? truncate repetitions: for x consecutive r use xr 
```

现在如果某些字符是数字怎么办？然后不使用 x，而是使用 ASCII 值为 x 的字符。例如，如果你有 43 个连续的 P，那么写`+P`是因为“+”的 ASCII 码是 43。如果你有 49 个连续的 y，那么写`1y`是因为“1”的 ASCII 码是 49。

现在，您会在所有压缩算法中发现的问题是，如果您有一个重复很少或没有重复的字符串。那么在这种情况下，您的代码可能比原始单词长。但这适用于所有压缩算法。

笔记：

我不鼓励使用 Huffman 编码，因为即使您使用 Ziv-Lempel 实现，仍然需要大量工作才能使其正确。

# objective-c - stringsByAppendingPaths 有什么用

> ID：10064675
> 
> 赞同：0
> 
> 时间：2012-04-08T17:11:40.187
> 
> 标签：objective-c, nsstring

```
#import <Foundation/Foundation.h>

int main(int argc, const char * argv[])
{

    @autoreleasepool {

        NSArray *array = [[NSArray alloc] initWithObjects:@"/tmp/1.txt" ,@"/tmp/2.txt", nil];
        NSLog(@"%@", array);
        NSString *result = [[NSString alloc] init];
        NSArray *array2 = [[NSArray alloc]initWithArray:[result stringsByAppendingPaths:array]];
        NSLog(@"%@", array2);
    }
    return 0;
    } 
```

我们提供给 stringsByAppendingPaths: 的参数是一个数组，返回类型也是如此。那么这个 NSString 方法有什么用呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T17:15:40.030

好吧，您正在附加空字符串 ( `result`)，所以它没有多大意义。但是，如果您的接收器包含 say`/tmp`并且数组包含`1.txt`and `2.txt`，那么获取数组`/tmp/1.txt`and`/tmp/2.txt`是有意义的。

# javascript - 在 Javascript 中按大写字母拆分

> ID：10064683
> 
> 赞同：50
> 
> 时间：2012-04-08T17:12:20.863
> 
> 标签：javascript, regex, split

我正在尝试使用 Javascript 通过大写拆分字符串，

我试图做的例子：

```
"HiMyNameIsBob"  ->   "Hi My Name Is Bob"
"GreetingsFriends" -> "Greetings Friends" 
```

我知道该`str.split()`方法，但是我不确定如何使此功能与大写字母一起使用。

我试过了：

```
str.split("(?=\\p{Upper})") 
```

不幸的是，这不起作用，任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：112
> 
> 时间：2012-04-08T17:13:43.867

使用 RegExp-literals、前瞻和`[A-Z]`：

```
console.log(
  // -> "Hi My Name Is Bob"
  window.prompt('input string:', "HiMyNameIsBob").split(/(?=[A-Z])/).join(" ")  
)
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-04-08T17:17:44.307

您可以使用 String.match 来拆分它。

```
"HiMyNameIsBob".match(/[A-Z]*[^A-Z]+/g) 
// output 
// ["Hi", "My", "Name", "Is", "Bob"] 
```

如果开头有小写字母，它也可以拆分。如果您不想要这种行为，只需在模式中使用`+`而不是。`*`

```
"helloHiMyNameIsBob".match(/[A-Z]*[^A-Z]+/g) 
// Output
["hello", "Hi", "My", "Name", "Is", "Bob"] 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2019-07-12T00:44:28.077

扩展 Rob W 的答案。

这通过添加检查前面的小写字符来处理任何带有缩写的句子`[a-z]`，因此，它不会溢出任何大写字符串。

```
// Enter your code description here
 var str = "THISSentenceHasSomeFunkyStuffGoingOn. ABBREVIATIONSAlsoWork.".split(/(?=[A-Z][a-z])/).join(" ");  // -> "THIS Sentence Has Some Funky Stuff Going On. ABBREVIATIONS Also Work."
 console.log(str);
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-05-10T05:37:57.787

以小写字母开头的文本的解决方案 -

```
let value = "getMeSomeText";
let newStr = '';
    for (var i = 0; i < value.length; i++) {
      if (value.charAt(i) === value.charAt(i).toUpperCase()) {
        newStr = newStr + ' ' + value.charAt(i)
      } else {
        (i == 0) ? (newStr += value.charAt(i).toUpperCase()) : (newStr += value.charAt(i));
      }
    }
    return newStr; 
```

# xaml - 如何在 Metro 应用程序中使用 DataTemplateKey

> ID：10064686
> 
> 赞同：2
> 
> 时间：2012-04-08T17:12:51.587
> 
> 标签：xaml, microsoft-metro

新的 Windows 8 Metro API 仍定义类 DataTemplateKey。

但是，我可以弄清楚如何使用它。

您是否有 XAML 中的示例来说明如何使用它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T13:33:01.267

这是一个关于如何使用 DataTemplateKey 的示例。只是一个注释和提醒：**x:Key 属性将优先于基于 DataType 生成的自动 DataTemplateKey**

```
<Window.Resources>
<DataTemplate x:Key="ItemTemplate">
    <TextBlock Text="{Binding}" Foreground="Red" />
</DataTemplate>

<DataTemplate x:Key="SelectedTemplate">
    <TextBlock Text="{Binding}" Foreground="White" />
</DataTemplate>

<Style TargetType="{x:Type ListBoxItem}" x:Key="ContainerStyle">
    <Setter Property="ContentTemplate" Value="{StaticResource ItemTemplate}" />
    <Style.Triggers>
        <Trigger Property="IsSelected" Value="True">
            <Setter Property="ContentTemplate" Value="{StaticResource SelectedTemplate}" />
        </Trigger>
    </Style.Triggers>
</Style>

</Window.Resources>
<ListBox x:Name="lstItems" ItemContainerStyle="{StaticResource ContainerStyle}" /> 
```

# excel - 我想通过 VBA 在我的工作表中创建一系列协方差矩阵

> ID：10064687
> 
> 赞同：2
> 
> 时间：2012-04-08T17:12:54.230
> 
> 标签：excel, matrix, covariance, vba

我是新来的。:) 我先尝试搜索，但找不到我要找的确切内容，所以就到这里。

我的 Excel 工作表中有一组包含 N 资产的日期列和 T 每日回报。我想要做的是根据过去 x 天所有资产的收益为每个月初创建一个 N*N 协方差矩阵。

我这里有这段代码用于创建协方差矩阵，但我不知道如何让 excel/vba 在每个月初自动创建其中的几个。如果你们中的任何人可以帮助我，那就太棒了。:)

```
Function VarCovar(Rng As range) As Variant
Dim i As Integer
Dim j As Integer
Dim numcols As Integer

numcols = Rng.Columns.Count
Dim matrix() As Double
ReDim matrix(numcols - 1, numcols - 1)
For i = 1 To numcols
    For j = 1 To numcols
        matrix(i - 1, j - 1) = Application.WorksheetFunction.Covar(Rng.Columns(i), Rng.Columns(j))
    Next j
Next i

VarCovar = matrix

End Function 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T22:43:51.030

试试这个：

```
Sub VarCovar(rng as Range, target as Range)

    Dim i As Integer
    Dim j As Integer
    Dim numcols As Integer

    numcols = Rng.Columns.Count
    Dim matrix() As Variant
    ReDim matrix(1 to numcols, 1 to numcols)
    For i = 1 To numcols
        For j = 1 To numcols
            matrix(i, j) = Application.WorksheetFunction.Covar(Rng.Columns(i), Rng.Columns(j))
        Next j
    Next i

    Set target = target.Resize(numcols,numcols)
    target.Value = matrix
End Sub 
```

现在，当您希望完成此操作时，请使用数据的参考范围（如前所述）和显示 covar 的目标位置的参考范围来调用该函数。

# python - 无法在 Python 中访问父成员变量

> ID：10064688
> 
> 赞同：32
> 
> 时间：2012-04-08T17:12:58.407
> 
> 标签：python, inheritance, scope

我正在尝试从扩展类访问父成员变量。但是运行以下代码...

```
class Mother(object):
    def __init__(self):
        self._haircolor = "Brown"

class Child(Mother):
    def __init__(self): 
        Mother.__init__(self)   
    def print_haircolor(self):
        print Mother._haircolor

c = Child()
c.print_haircolor() 
```

给我这个错误：

```
AttributeError: type object 'Mother' has no attribute '_haircolor' 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-04-08T17:15:00.857

您正在混淆类和实例属性。

```
print self._haircolor 
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-04-08T17:17:20.770

您需要实例属性，而不是类属性，因此您应该使用`self._haircolor`.

此外，如果您决定将继承更改为或其他内容，您确实应该使用`super`。`__init__``Father`

```
class Child(Mother):
    def __init__(self): 
        super(Child, self).__init__()
    def print_haircolor(self):
        print self._haircolor 
```

# drupal - Drupal CCK-Views 类似于另一个支持 MSSQL (SQL Server) 的 CMS 中的功能

> ID：10064689
> 
> 赞同：0
> 
> 时间：2012-04-08T17:13:02.333
> 
> 标签：drupal, content-management-system, views, cck

我一直在寻找可以提供 Drupal 的两个最重要功能（即 CCK 和 Views）并且还支持 MSSQL（SQL Server，我的公司运行其应用程序）的 CMS。

任何人都可以提供一些建议（基于网络、开源或闭源，以及 php 或非 php）？虽然我更喜欢开源 PHP CMS。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T22:08:52.067

如果您只是在寻找对您的 mssql 数据的数据访问，但愿意在另一个数据库上运行您的 cms，请尝试使用 drupal 的 forena 报告编写模块。

完全披露：我是 forena 的作者。

# javafx-2 - 在 JavaFX 2 应用程序中键入重音字符不起作用？

> ID：10064690
> 
> 赞同：1
> 
> 时间：2012-04-08T17:13:06.233
> 
> 标签：javafx-2

我正在开发一个 javafx-2 应用程序，我希望用户能够使用“死键”在文本字段中键入希腊重音字符。不幸的是，重音被忽略了。oracle 提供的 javafx-2 示例的行为方式相同。

我只检查了运行 Lion 的 mac。Java Swing 应用程序没有这个问题。我已经安装了苹果提供的最新 JRE (1.6.0_31-b04-414)。

谢谢， 尼科斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T20:46:56.037

您可能想尝试 JavaFX 2.1（开发预览：[http](http://www.oracle.com/technetwork/java/javafx/downloads/index.html) ://www.oracle.com/technetwork/java/javafx/downloads/index.html ）

我对那里的希腊重音字符没有任何问题：

![在此处输入图像描述](../Images/6b66cf3c7b06661bf5dc0a06028b5c8d.png)

**UPD**：键入这些字符在 2.1 中也可以正常工作，请参阅使用希腊多调键盘的死键从键盘输入字符的屏幕截图：

![在此处输入图像描述](../Images/7090fc8016ffbc56065c4281f270037a.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-03T16:23:43.087

FX8也有同样的问题。一种解决方案是编写一个 textproperty 监听器来处理它，除非它稍后被修复。来自 Swing 确实我也没有这个问题。我正在使用Windows7。

# wordpress - 限制 WP Carrington JAM 框架中的帖子数量

> ID：10064698
> 
> 赞同：0
> 
> 时间：2012-04-08T17:13:59.773
> 
> 标签：wordpress, carrington

**在使用 Wordpress Carrington JAM 框架时，我的搜索结果、存档**和**类别**页面中显示的帖子数量与我在设置 > 阅读中输入的值不一致。

在我的设置中，我在*“博客页面最多显示”*字段中输入了数字 2，但每当我查看这 3 个页面时，它会显示所有结果，而不仅仅是 2 个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T20:23:39.223

由于某种原因，该设置未包含在 Carrington JAM 的主题选项页面中。但我还是在函数的文件*主题/carrington-core/ajax-load.php*`cfct_posts_per_archive_page_setting()`中找到了它。

默认值为 25，这就是显示这么多结果的原因。我把它改成了更低的。

# gwt - 不透明度 FadeIn/FadeOut GWT 查询 Internet Explorer

> ID：10064702
> 
> 赞同：0
> 
> 时间：2012-04-08T17:14:41.593
> 
> 标签：gwt, gquery, gwtquery

我在用

```
$("div.content").fadeOut(300, new Function() {
    public void f(Element e) {
        absolutePanel.clear();
        show(comp);
    }
}); 
```

隐藏/显示内容。它在 Chrome 和 FF 中运行良好，但在 IE 7、8、9 中，Opacity 不起作用。我知道 IE 存在很多问题，但我没有找到任何为 GQuery 指定的如何解决这个问题。

有什么解决方法吗？或者也许我在 IE 上使用错了？

提前致谢

**编辑：**

这适用于 IE：

```
Style style = absolutePanel.getElement().getStyle();
style.setOpacity(0.0d); 
```

这不会：

```
$("div.content").animate("opacity:0.4"); 
```

# objective-c - UITableViewCell 曲线异常-左侧。这是什么原因造成的？包含图片

> ID：10064706
> 
> 赞同：0
> 
> 时间：2012-04-08T17:15:32.707
> 
> 标签：objective-c, xcode, ios5, uitableview

我在这个表格视图中每个单元格的左上角绘制了这个奇怪的半圆。我似乎无法摆脱它。我没有在我的单元格中进行任何自定义绘图，尽管这些单元格都是 UITableViewCell 的子类。

弯曲的工件仅出现在每个部分的第一个单元格中，并且无论表格视图背景如何，它仍然是持久的。

![在此处输入图像描述](../Images/3e739139b420517469735413e2af1eea.png)

这是单元格中的所有自定义代码，其余在 IB 中

```
- (void)layoutSubviews {
  // NSLog(@"DataEntryCell layoutSubviews");
  UILabel *topLabel = [self parameterLabel];
  UILabel *bottomLabel = [self dataLabel];

  topLabel.font = [UIFont boldSystemFontOfSize:18.0];
  topLabel.textAlignment = UITextAlignmentCenter;
  topLabel.textColor = [UIColor darkGrayColor];
  topLabel.shadowColor = [UIColor lightGrayColor];
  topLabel.shadowOffset = CGSizeMake(0.0, 1.0);

  bottomLabel.font = [UIFont systemFontOfSize:16.0];
  bottomLabel.textAlignment = UITextAlignmentLeft;
  bottomLabel.textColor = [UIColor darkGrayColor];
  bottomLabel.numberOfLines = 0;
  bottomLabel.lineBreakMode = UILineBreakModeWordWrap;

  self.accessoryType = UITableViewCellAccessoryDisclosureIndicator;
  self.selectionStyle = UITableViewCellSelectionStyleGray;
  self.autoresizesSubviews = YES;
} 
```

知道是什么原因造成的吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T03:34:46.113

我没有看到任何`layoutSubviews`真正属于那里的东西。标签上的所有这些属性都应在创建标签时设置。self 的属性也是如此。特别`selectionStyle`是它似乎很可疑，因为它提到了灰色并且您有一条杂散的灰线。等到`layoutSubviews`调用的时候，设置已经太晚了`autoresizesSubviews`；自动调整大小发生在您收到`layoutSubviews`.

尝试将这些东西放在更接近单元格的初始化位置 -`awakeFromNib`如果您从笔尖加载单元格（及其子视图），或者使用创建和添加子视图的代码。

# antlr - parsec 是 ANTLR 的替代品吗？

> ID：10064708
> 
> 赞同：0
> 
> 时间：2012-04-08T17:15:37.280
> 
> 标签：antlr, parsec

我正计划为我的特定目的创建一种小型编程语言。我读过 ANTLR3 非常适合这样的目标。让我问一下 Parsec 是 ANTLR3 的可能替代品还是属于不同的类别。

非常感谢。

# iphone - 在 iphone 上生成密钥对并打印为 NSString

> ID：10064710
> 
> 赞同：6
> 
> 时间：2012-04-08T17:16:14.370
> 
> 标签：iphone, security, keychain

遵循 Apple 示例代码：http: [//developer.apple.com/library/ios/#documentation/Security/Conceptual/CertKeyTrustProgGuide/iPhone_Tasks/iPhone_Tasks.html](http://developer.apple.com/library/ios/#documentation/Security/Conceptual/CertKeyTrustProgGuide/iPhone_Tasks/iPhone_Tasks.html)

我能够使用下面的代码片段成功生成密钥对，但无法打印密钥...

函数 SecKeyGeneratePair() - 将密钥作为 SecKeyRef 类型返回。

我不知道如何处理这种类型，我知道这是钥匙串表示，但我如何才能真正将钥匙对视为 NSString？更具体地说，如何将 SecKeyRef 转换为 NSString？

```
static const UInt8 publicKeyIdentifier[] = "com.apple.sample.publickey\0";
static const UInt8 privateKeyIdentifier[] = "com.apple.sample.privatekey\0";
                                                            // 1

- (void)generateKeyPairPlease
{
    OSStatus status = noErr;
    NSMutableDictionary *privateKeyAttr = [[NSMutableDictionary alloc] init];
    NSMutableDictionary *publicKeyAttr = [[NSMutableDictionary alloc] init];
    NSMutableDictionary *keyPairAttr = [[NSMutableDictionary alloc] init];
                                                                // 2

    NSData * publicTag = [NSData dataWithBytes:publicKeyIdentifier
                                length:strlen((const char *)publicKeyIdentifier)];
    NSData * privateTag = [NSData dataWithBytes:privateKeyIdentifier
                               length:strlen((const char *)privateKeyIdentifier)];
                                                                // 3

    SecKeyRef publicKey = NULL;
    SecKeyRef privateKey = NULL;                                // 4

    [keyPairAttr setObject:(id)kSecAttrKeyTypeRSA
                                   forKey:(id)kSecAttrKeyType]; // 5
    [keyPairAttr setObject:[NSNumber numberWithInt:1024]
                             forKey:(id)kSecAttrKeySizeInBits]; // 6

    [privateKeyAttr setObject:[NSNumber numberWithBool:YES]
                               forKey:(id)kSecAttrIsPermanent]; // 7
    [privateKeyAttr setObject:privateTag
                            forKey:(id)kSecAttrApplicationTag]; // 8

    [publicKeyAttr setObject:[NSNumber numberWithBool:YES]
                               forKey:(id)kSecAttrIsPermanent]; // 9
    [publicKeyAttr setObject:publicTag
                            forKey:(id)kSecAttrApplicationTag]; // 10

    [keyPairAttr setObject:privateKeyAttr
                               forKey:(id)kSecPrivateKeyAttrs]; // 11
    [keyPairAttr setObject:publicKeyAttr
                                forKey:(id)kSecPublicKeyAttrs]; // 12

    status = SecKeyGeneratePair((CFDictionaryRef)keyPairAttr,
                                      &publicKey, &privateKey); // 13
//    error handling...

    if(privateKeyAttr) [privateKeyAttr release];
    if(publicKeyAttr) [publicKeyAttr release];
    if(keyPairAttr) [keyPairAttr release];
    if(publicKey) CFRelease(publicKey);
    if(privateKey) CFRelease(privateKey);                       // 14
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-08T18:49:42.393

您可以使用[SecItemCopyMatching](http://developer.apple.com/library/ios/#DOCUMENTATION/Security/Reference/keychainservices/Reference/reference.html#//apple_ref/c/func/SecItemCopyMatching)来获取密钥的 NSData。检查[Apple 的 CryptoExercise](http://developer.apple.com/library/ios/#samplecode/CryptoExercise/Listings/Classes_SecKeyWrapper_m.html#//apple_ref/doc/uid/DTS40008019-Classes_SecKeyWrapper_m-DontLinkElementID_17)`getPublicKeyBits`中的方法，它完全实现了您所需要的。

然后，您可以转换`NSData`为字符串。也许，`Base64`编码将满足您的需求。[在这里](http://cocoawithlove.com/2009/06/base64-encoding-options-on-mac-and.html)您可以找到`Base64`iPhone 的编码/解码示例。或者，这个[答案](https://stackoverflow.com/a/788627/1048330)也可能对`Base64`编码有用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-07-07T11:14:41.663

您可以使用[https://github.com/henrinormak/Heimdall](https://github.com/henrinormak/Heimdall)

```
let localHeimdall = Heimdall(tagPrefix: "com.example")

if let heimdall = localHeimdall {
    let publicKeyData = heimdall.X509PublicKey()
    var publicKeyString = publicKeyData.base64EncodedStringWithOptions(.allZeros)

    // If you want to make this string URL safe,
    // you have to remember to do the reverse on the other side later
    publicKeyString = publicKeyString.stringByReplacingOccurrencesOfString("/", withString: "_")
    publicKeyString = publicKeyString.stringByReplacingOccurrencesOfString("+", withString: "-")

    println(publicKeyString) // Something along the lines of "MIGfMA0GCSqGSIb3DQEBAQUAA..."

    // Data transmission of public key to the other party
} 
```

迅速3：

```
let localHeimdall = Heimdall(tagPrefix: "com.example")
if let heimdall = localHeimdall, publicKeyData = heimdall.publicKeyDataX509() {

    var publicKeyString = publicKeyData.base64EncodedString()

    // If you want to make this string URL safe,
    // you have to remember to do the reverse on the other side later
    publicKeyString = publicKeyString.replacingOccurrences(of: "/", with: "_")
    publicKeyString = publicKeyString.replacingOccurrences(of: "+", with: "-")

    println(publicKeyString) // Something along the lines of "MIGfMA0GCSqGSIb3DQEBAQUAA..."

    // Data transmission of public key to the other party
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-10T09:21:47.060

```
-(void)writePublicKeyModAndExp
{
  KeyHelper* keyHelper =[[KeyHelper alloc]init];
  NSData* pubkeyData=  [keyHelper getPublicKeyBitsWithtag:publicTag];

  NSLog(@"pubKey :%@",[pubkeyData base64Encoding]);

  NSData *modData=  [keyHelper getPublicKeyModFromKeyData:pubkeyData];
  NSLog(@"modulus :%@",[modData base64Encoding]);

  NSData *expoData=  [keyHelper getPublicKeyExpFromKeyData:pubkeyData];
  NSLog(@"exponent :%@",[expoData base64Encoding]);
} 
```

你可以在这里找到整个代码[https://github.com/ozgurshn/EncryptionForiOS](https://github.com/ozgurshn/EncryptionForiOS)

# ruby-on-rails - 如何显示来自不同表的当前视图的数据

> ID：10064712
> 
> 赞同：0
> 
> 时间：2012-04-08T17:16:22.817
> 
> 标签：ruby-on-rails, ruby

我有两张桌子：

```
Chords -     |id|chord|name|rating|artist_id|
Artists -    |id|artist| 
```

An`Artist`有许多`Chord`s，因此 a`Chord`属于 a `Artist`。

在“和弦”的索引页面中，我想显示和弦表中的和弦、名称和评分以及艺术家表中的艺术家

这是`Chord`index.html.erb 的代码：

```
<table border="1">
  <% @chords.each do |chord| %>
    <tr>
       <td><%= chord.artist.artist %></td>
       <td><%= link_to chord.name, chord %></td>
       <td><%= chord.rating %></td>
       <td><%= chord.created_at %></td>
    </tr>
  <% end %>
</table> 
```

错误信息是：

> nil:NilClass 的未定义方法“艺术家”

实际上，起初它可以工作，但是当我开始创建“new.html.erb”页面以及创建和新操作时，它停止工作，这就是为什么这让我如此困惑！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T17:52:48.767

由于`chort.artist`可以为空，因此您应该更改`chord.artist.artist`为`chord.artist.try(:artist)`which 的简写

```
if chord.artist.nil?
  nil
else
  chord.artist.artist
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T17:58:59.563

你可以使用 `<td><%= chord.artist.artist unless chord.artist.artist.nil? %></td>`

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-08T17:37:46.097

在视图中没有合适的位置，但您需要做的是找到具有 CHORDS 中给出的 ID 的艺术家，如下所示

```
 @currentArtist = Artist.find(:all, :conditions => {:protectora => Chord.artist_id}) 
```

然后，当您通过 CHORD 中给出的 ID 找到它并将其保存到变量中时，您可以像访问任何其他变量一样访问它，因此：

```
 @currentArtist.artist 
```

希望能帮助到你。

# git - 恢复远程合并

> ID：10064713
> 
> 赞同：2
> 
> 时间：2012-04-08T17:16:29.927
> 
> 标签：git

我正在一个名为 Lion 的分支上工作，我错误地这样做了：

```
git push origin lion:master 
```

代替

```
git push eng lion:master 
```

基本上第二行是将狮子分支推送到登台 Heroku 应用程序，但我错误地将我的所有代码合并到 origin master 中。

我怎样才能恢复比？我的分支中有大约 200 个提交。

格雷格

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T17:28:06.320

假设没有其他人已经离开并获得了新的变化：

1) 如果您可以直接访问`origin`存储库，则可以`git reset --hard <commit ID>`在`origin`.

2）或者，您可以`git push -f`使用旧的提交 ID 进行操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T20:33:41.143

命令 'git reset' 带有一个可选的提交参数。因此，如果您有权访问原始存储库，则可以尝试：

```
git reset [--soft | --mixed] <last-good-commit>           # in the remote/origin repository 
```

如果您无权访问存储库，您应该能够：

```
git checkout -b rework <last-good-commit>
git push origin rework:master                                   # The push merge will produce a commit that works back to <last-good-commit> 
```

# database - 数据库应用的故障转移策略

> ID：10064718
> 
> 赞同：0
> 
> 时间：2012-04-08T17:17:20.507
> 
> 标签：database, backup, communication, failover

我有一个持有本地缓存​​的读写数据库应用程序。如果应用服务器出现故障，备份服务器将开始工作。

由于其本地缓存和数据库上的一些低隔离级别，主应用程序和备份应用程序只能以独占方式运行。

就我的通信知识而言，不可能让两台服务器始终弄清楚谁可以独占运行。

我可以通过将数据库用作第三方实体以某种方式解决这种通信冲突吗？我认为这是一个非常典型的问题，可能没有 100% 安全的方法，但我很高兴知道其他人建议如何解决此类问题？或者，如果有一些最佳实践。

如果两个应用程序都没有工作 30 分钟左右，这没关系，但是没有足够的时间让人们起床并让他们找出问题所在。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T21:13:20.337

您可以设置第三台服务器来监控两个应用程序服务器的运行状况吗？然后，该服务器可以适当地决定以防其中一台服务器似乎已消失：指示热备用开始处理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T21:19:34.297

如果我得到正确的图片，您的备份服务器会不断轮询主服务器以获取数据更新，不难检查轮询是否失败，30 秒后再次安排它 3 次，并在第三次失败时动态更新 DNS 条目到数据库服务器以反映活动服务器的变化。Windows DNS 和绑定都接受签名和未签名的动态更新。

# python - 在嵌入式 IPython 实例中运行配置文件启动文件

> ID：10064720
> 
> 赞同：8
> 
> 时间：2012-04-08T17:17:23.013
> 
> 标签：python, django, ipython

我想使用带有 user_ns 字典和我的配置文件配置（ipython_config.py 和启动文件）的嵌入式 IPython shell。目的是在启动时使用导入的模型运行 Django shell。django-extensions 实现了一个名为 shell_plus 的命令来执行此操作：

[https://github.com/django-extensions/django-extensions/blob/master/django_extensions/management/commands/shell_plus.py](https://github.com/django-extensions/django-extensions/blob/master/django_extensions/management/commands/shell_plus.py)

```
from IPython import embed
embed(user_ns=imported_objects) 
```

问题是这不会加载我的启动文件。embed() 调用 load_default_config()，我认为它会加载 ipython_config.py。

如何让嵌入式 IPython 实例运行我的配置文件启动文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T21:49:30.677

我使用以下解决方法来运行我自己的 IPython 启动脚本，但仍然利用 shell_plus：

1.  `shell_plus_startup.py`在同一目录中创建一个名为`manage.py`. 例如：

    ```
    # File: shell_plus_startup.py
    # Extra python code to run after shell_plus starts an embedded IPython shell.
    # Run this file from IPython using '%run shell_plus_startup.py'

    # Common imports
    from datetime import date

    # Common variables
    tod = date.today() 
    ```

2.  启动 shell plus（启动嵌入式 IPython shell）。

    `python manage.py shell_plus`

3.  手动运行启动脚本。

    ```
    In [1]: %run shell_plus_startup.py 
    ```

4.  然后你可以使用你定义的变量、你导入的模块等等。

    ```
    In [2]: tod
    Out[2]: datetime.date(2012, 7, 14) 
    ```

另请参阅此答案：[scripting ipython through django's shell_plus](https://stackoverflow.com/questions/1266702/scripting-ipython-through-djangos-shell-plus?rq=1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T10:37:33.107

如果您使用 django-extensions-shell_plus，我找到了一种可行的方法。这有点 hacky，但是通过这种方式，您的启动文件会完全自动加载，您不必在 ipython-session 开始时键入任何运行命令。

因此，我`shells.py`从 django_extensions 目录编辑了文件，在我的情况下，该目录位于`/usr/local/lib/python2.7/dist-packages/django_extensions/management/shells.py`. 我在函数中添加了这些行`import_objects(options, style):`，因此它导入了`startup.py`由环境参数定义的文件的内容`PYTHONSTARTUP`。

```
def import_objects(options, style):
    # (...)
    import os, sys, pkgutil
    if 'PYTHONSTARTUP' in os.environ:
        try:
            sys.path.append(os.environ['PYTHONSTARTUP'])
            import startup
            content = [element for element in dir(startup) if not element.startswith('__')]
            for element in content:
                imported_objects[element] = getattr(startup, element)
        except Exception, ex:
            sys.exit("Could not import startup module content, Error:\n%s" % ex) 
```

现在，当我启动 shell_plus-shell 时，我将环境变量提供给我的启动 python 脚本。我启动 shell 的 bash 脚本如下所示：

```
#!/bin/bash
export PYTHONSTARTUP=/home/ifischer/src/myproject/startup.py # tells shell_plus to load this file
python /home/ifischer/src/myproject/manage.py shell_plus --ipython 
```

现在我可以访问从 ipython 会话开始时在 startup.py 中定义的所有方法和变量。

因此，您可以重用它并为每个项目自定义启动文件，预加载不同的方面。

也许有一种更简洁的方法来包含我添加到 shells.py 的行？但是这种方法目前对我来说很好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-07T21:23:46.720

它会自动从`django-extensions==1.5.6`. 您还可以`ipython`通过 IPYTHON_ARGUMENTS 传递其他参数。文档： [http ://django-extensions.readthedocs.org/en/latest/shell_plus.html#configuration](http://django-extensions.readthedocs.org/en/latest/shell_plus.html#configuration)

# php - 在 MySql 的一个单元格中插入多个具有相同名称的文本输入

> ID：10064721
> 
> 赞同：-1
> 
> 时间：2012-04-08T17:17:25.017
> 
> 标签：php, javascript, jquery, mysql

我有多个输入

```
<input size="32" class="mixtapetrack" type="text" id="track[]" name="track[]" >
<input size="32" class="mixtapetrack" type="text" id="track[]" name="track[]" >
<input size="32" class="mixtapetrack" type="text" id="track[]" name="track[]" >
<input size="32" class="mixtapetrack" type="text" id="track[]" name="track[]" >
...and so on (depending on how many they want) 
```

在表单提交时（使用 $_POST），我想获取所有输入（顺便说一下，我们现在永远不会有多少 [动态 jquery 添加/删除输入表单]）并将它们组合成一个变量，全部由^^^很好地分开。

顺便说一句，我正在使用这种格式插入 mysql

```
 $sql = mysql_query("INSERT INTO mixtapes (title, songs, posted_by_id, description, date) 
     VALUES('$mixtapetitle','$allmixtapetracks','$posted_by_id','$mixtapedescription', now())")  
     or die (mysql_error()); 
```

* * *

所以最后我想把所有的动态输入打包成一个变量，每个变量用^^^分隔。下面的示例是我希望变量 $allmixtapetracks 的外观，所以当我插入它时，它看起来就像那样。

**输入1的值^^^输入2的值^^^输入3的值^^^输入4的值^^^**

* * *

# 编辑：

此编码导致我的错误。当输入被动态创建时，php $_POST 会忽略它们。为什么？我不确定。

## JavaScript：

```
<script type="text/javascript">

$(document).ready(function(){

    var counter = 3;

    $("#addButton").click(function () {

    if(counter>40){
            alert("The maximum allowed tracks is 40");
            return false;
    }   

    var newTextBoxDiv = $(document.createElement('div'))
         .attr("id", 'TextBoxDiv' + counter);

    newTextBoxDiv.html('<table><tr><td width="88"><label>Track #'+ counter + ' : </label></td><td><input size="32" class="mixtapetrack" type="text" id="track[]" name="track[]" ></td></tr></table>');

    newTextBoxDiv.appendTo("#TextBoxesGroup").hide().show(50);

    counter++;
     });

     $("#removeButton").click(function () {
    if(counter==3){
          alert("Your mixtape must contain at least two tracks!");
          return false;
       }   

    counter--;

        $("#TextBoxDiv" + counter).remove().show().hide(40);

     });

  });
</script> 
```

## HTML：

```
 <form action="add-mixtape.php" name="addmixtapeForm" class="addmixtapeForm" id="addmixtapeForm" autocomplete="off" method="post" enctype="multipart/form-data">
<div id='TextBoxesGroup'>
             <div id="TextBoxDiv1">
             <table>
              <tr>
               <td width="88"><label>Track #1: </label></td>
               <td><input size="32" class="mixtapetrack" type="text" id="track[]" name="track[]" ></td>
              </tr>
             </table>
             <table>
              <tr>
               <td width="88"><label>Track #2: </label></td>
               <td><input size="32" class="mixtapetrack" type="text" id="track[]" name="track[]" ></td>
              </tr>
             </table>
             </div>
            </div>
            <input type="button" value="Add Track" id="addButton" class="addREMOVEmixtapetrack">
            <input type="button" value="Remove Track" id="removeButton" class="addREMOVEmixtapetrack">
</form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T17:21:33.063

```
$alltracks = implode('^^^', $_POST['track']) . '^^^'; 
```

测试代码：

```
<?php
$alltracks = implode('^^^', $_POST['track']) . '^^^';
echo $alltracks;
?>

<form action="test.php" method="post">
<input size="32" class="mixtapetrack" type="text" id="track[]" name="track[]" >
<input size="32" class="mixtapetrack" type="text" id="track[]" name="track[]" >
<input size="32" class="mixtapetrack" type="text" id="track[]" name="track[]" >
<input size="32" class="mixtapetrack" type="text" id="track[]" name="track[]" >
<input type="submit">
</form> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-08T17:21:34.443

我*强烈*建议不要在一列中存储多个值。正确的策略是创建一个将混音带链接到轨道的规范化表：

```
CREATE TABLE tapetracks (
  mixtapeid INT NOT NULL,
  trackname VARCHAR(256) NOT NULL
); 
```

然后循环输入值并将每个值插入表中：

```
$mixtapeid = <the current tape you are adding to>;
foreach ($_POST['track'] AS $track) {
  $track = mysql_real_escape_string($track);
  $result = mysql_query("INSERT INTO tapetracks (mixtapeid, trackname) VALUES ($mixtapeid, '$track')");
  if (!$result) {
    echo mysql_error();
    break;
  }
} 
```

当在一列中存储多个值时，您将无法在查询时使用列索引，并且查询单个值变得很麻烦，需要调用，`REPLACE()`如果`FIND_IN_SET()`轨道名称包含逗号，则可能会失败。这确实是错误的策略。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-08T17:21:40.880

是的，您当然可以：

```
$combined = "";
foreach ( $_POST['track'] as $t ){
    $combined .= $t . "^^^";
}
$combined = substr(0,-3, combined) // only if you want to strip last 3 "^^^" symbols 
```

这个应该可以的......

# hibernate - 休眠范围查询

> ID：10064723
> 
> 赞同：2
> 
> 时间：2012-04-08T17:17:33.777
> 
> 标签：hibernate, range

我想做范围查询，例如，

从用户 u 中选择 u.age，其中年龄在 10 到 20 之间。这 10 和 20 将是​​动态值。

我试过参数为，

```
a=10;
b=20; 
Query q = session.createQuery("select u.age from user u where age between a and b");
q.setInteger("a",a);
q.setInteger("b",b); 
```

这给了我错误。我在单词之间丢失了一些东西。谁能告诉我这是如何实现的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-09T13:31:10.680

更优化的解决方案是使用休眠标准，而不是硬编码的 SQL 查询。您应该为您的 User 类声明一个 @Entity 注释，并创建与您的表的列相对应的私有字段。

假设您有一个带有 id、name 和 age 的 User 表。User 类将如下所示：

```
@Entity
@Table(name = "User")
public class User{

    private long id;
    private String userName;
    private int age;

    @Id
    @GeneratedValue(strategy=GenerationType.IDENTITY)
    @Column(unique = true, nullable = false)
    public Long getId() {
        return this.id;
    }

    public void setId(Long id) {
        this.id = id;
    }

    @Column(name = "userName", nullable = false)
    public String getUserName() {
        return this.userName;
    }

    @Column(name = "age")
    public void setAge(int age) {
        this.age = age;
    }

    public int getAge() {
    return this.age;
} 
```

注意：如果数据库表中的列与您的字段具有**完全相同**的名称，则不需要 @Column (name = "..") 注释。

然后，检索年龄将是：

```
int userAge = session.createCriteria(User.class)
                         .add(Restrictions.ge("age", a))
                         .add(Restrictions.le("age", b))
                         .setProjection(Property.forName("age"))
                         .uniqueResult(); 
```

通过 User 类创建条件告诉 hibernate**从 User**表中进行选择。然后，这些限制分别意味着**age >= a**和**age <= b**。uniqueResult **()**告诉 hibernate 我们期望一个结果，而需要投影来检索某个列（那里的投影意味着**从 User 中选择年龄**）。如果未指定投影，则标准将默认返回整个类，即**select * from User**。

我知道这对于您需要的东西来说似乎有点太复杂了，但是使用与您的表和标准匹配的实体是正确的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T17:19:23.020

您需要制作命名参数。

```
a=10;
b=20; 
Query q = session.createQuery("select u.age from user u where age between :a and :b");
q.setInteger("a",a);
q.setInteger("b",b); 
```

# c - 扩展 Maple 代码生成中的变量名

> ID：10064729
> 
> 赞同：0
> 
> 时间：2012-04-08T17:18:14.737
> 
> 标签：c, maple

我想通过分段函数的处理程序扩展 Maple CodeGeneration[C]（不知道为什么不包含它）。为此我做了：

```
with(CodeGeneration):
with(LanguageDefinition):

LanguageDefinition:-Define("NewC", extend="C",
    AddFunction("piecewise", anything::numeric,
        proc()
            local i;
            Printer:-Print("if(",_passed[1],"){",_passed[2],"}");
            for i from 3 to _npassed-2 by 2 do
                Printer:-Print("else if(",_passed[i],"){",_passed[i+1],"}");
            end do;
            Printer:-Print("else{",_passed[_npassed],"}");
        end proc,
    numeric=double)
); 
```

请注意，我使用 if else 语句来支持 case 语句。这是要翻译的示例代码：

```
myp:=proc(x::numeric)
    piecewise(x>1,1*x,x>2,2*x,x>3,3*x,0);
end proc:
Translate(myp, language="NewC"); 
```

输出是

```
void myp (double x)
{
    if(0.1e1 < x){x}else if(0.2e1 < x){0.2e1 * x}else if(0.3e1 < x){0.3e1 * x}else{0};
    ;
} 
```

对于有效的 C 例程，我显然需要替换大括号，例如

```
{x} 
```

通过类似的东西

```
{result=x;} 
```

和其他类似的。我可以通过修改上述 AddFunction 语句中的字符串来手动完成此操作。但是随后代码生成器不知道变量名 result，因此不会有任何声明，也不会根据需要返回 result 的值以匹配例程 myp 或更复杂的过程，其中可能会分配分段的结果到一些其他变量或用于计算。那么如何在 CodeGeneration 例程中正确处理这个问题呢？即我怎样才能得到一个有效的变量名等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T05:41:09.330

这样的事情怎么样？

```
restart:

with(CodeGeneration):
with(LanguageDefinition):

LanguageDefinition:-Define("NewC", extend="C",
    AddFunction("piecewise", anything::numeric,
        proc()
            local i;
            Printer:-Print("( (",_passed[1],") ? ",_passed[2]);
            for i from 3 to _npassed-2 by 2 do
                Printer:-Print(" : (",_passed[i],") ? ",_passed[i+1]);
            end do;
            Printer:-Print(" : ",_passed[_npassed]," ) ");
        end proc,
    numeric=double)
);

myp:=proc(x::numeric) local result::numeric;
    result := piecewise(x>3,3*x,x>2,2*x,x>1,1*x,0);
end proc:

Translate(myp, language="NewC");

double myp (double x)
{
  double result;
  result = ( (0.3e1 < x) ? 0.3e1 * x : (0.2e1 < x) ? 0.2e1 * x : (0.1e1 < x) ? x : 0 ) ;
  return(result);
} 
```

[编辑，添加以下材料]

事实证明 CodeGeneration[C] 确实处理`piecewise`，但前提`optimize`是提供了该选项。（我将提交一个错误报告，它应该默认处理。）

```
restart:

with(CodeGeneration):
with(LanguageDefinition):
myp:=proc(x::numeric) local result::numeric;
     result:=piecewise(x>3,3*x,x>2,2*x,x>1,1*x,0);
end proc;

         myp := proc(x::numeric)
         local result::numeric;
           result := piecewise(3 < x, 3*x, 2 < x, 2*x, 1 < x, x, 0)
         end proc;

Translate(myp, language="C", optimize);

double myp (double x)
{
  double result;
  double s1;
  if (0.3e1 < x)
    s1 = 0.3e1 * x;
  else if (0.2e1 < x)
    s1 = 0.2e1 * x;
  else if (0.1e1 < x)
    s1 = x;
  else
    s1 = 0.0e0;
  result = s1;
  return(result);
} 
```

如您所见，`piecewise`上面通过转换到单独的`if(){..}`块来处理，并分配给引入的临时变量。该临时文件随后`piecewise`在 Maple 过程中存在调用的任何地方使用。并且临时声明。漂亮和自动。因此，这可能足以满足您使用`piecewise`.

您还询问了如何在自己的扩展中引入和声明此类临时变量（如果我理解正确的话）。从上面继续在同一个 Maple 会话中，这里有一些沿着这些思路的想法。生成一个未分配的全局名称。该`myp`过程被放入惰性形式，其中添加了新的局部变量。然后，改变后的惰性形式又变成了实际的程序。作为说明，我使用了您原始扩展的修改版本来处理`piecewise`. 这一切都产生了接近可接受的东西。唯一的障碍是赋值语句，

```
result = temporary_variable; 
```

不合适！它位于`piecewise`翻译块之前。我还没有看到如何在该方法中修复它。

```
LanguageDefinition:-Define("NewC", extend="C",
    AddFunction("piecewise", anything::numeric,
        proc()
            global T;
            local i, t;
            t:=convert(T,string);
            Printer:-Print(t,";\n");
            Printer:-Print("  if (",_passed[1],
                           ")\n    { ",t," = ",_passed[2],"; }\n");
            for i from 3 to _npassed-2 by 2 do
                Printer:-Print("  else if (",_passed[i],")\n    { ",
                               t," = ",_passed[i+1],"; }\n");
            end do;
            Printer:-Print("  else { ",t," = ",_passed[_npassed],"; }");
        end proc,
    numeric=double)
):

T:=`tools/genglobal`('s'):

newmyp := FromInert(subsindets(ToInert(eval(myp)),'specfunc(anything,_Inert_LOCALSEQ)',
           z->_Inert_LOCALSEQ(op(z),
                              _Inert_DCOLON(_Inert_NAME(convert(T,string)),
                                            _Inert_NAME("numeric",
                                               _Inert_ATTRIBUTE(_Inert_NAME("protected",
                                               _Inert_ATTRIBUTE(_Inert_NAME("protected")
          ))))))));

             newmyp := proc(x::numeric)
             local result::numeric, s::numeric;
               result := piecewise(3 < x, 3*x, 2 < x, 2*x, 1 < x, x, 0)
             end proc;

Translate(newmyp, language="NewC");

double newmyp (double x)
{
  double result;
  double s;
  result = s;
  if (0.3e1 < x)
    { s = 0.3e1 * x; }
  else if (0.2e1 < x)
    { s = 0.2e1 * x; }
  else if (0.1e1 < x)
    { s = x; }
  else { s = 0; };
  return(result);
} 
```

如果您重新运行上面的最后三个语句（从对 的赋值`T`，到`Translate`调用），那么您应该会看到使用了一个新的临时变量，例如 s0。然后 s1 如果再次重复。等等。

也许这会给你更多的想法。干杯。

# asp.net-mvc - DropDownList 和 ViewData

> ID：10064732
> 
> 赞同：1
> 
> 时间：2012-04-08T17:18:45.930
> 
> 标签：asp.net-mvc

在我的控制器中，我有：

```
 Category x = new Category(1, "one", 0);
        Category y = new Category(2, "two", 1);
        Category z = new Category(3, "three", 1);
        List<Category> categories = new List<Category>();
        categories.Add(x);
        categories.Add(y);
        categories.Add(z);
        ViewData["categories"] = categories; 
```

在我看来，我有：

```
 <%= Html.DropDownList("categories")%> 
```

但我有一个错误：

> 具有键 'categories' 的 ViewData 项的类型为 'System.Collections.Generic.List`1[[Category, MvcApplication1, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]' 但必须是类型'IEnumerable'。

Uggggghhh如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-08T17:25:49.693

你也许可以试试

```
ViewData["categories"] = new SelectList(categories, "Id", "Name"); 
```

（假设 Category 有一个 Name 和 Id 字段）

然后您可以添加逻辑以保留所选值。

编辑：如果我没记错的话，导致您的错误消息不完整：它要求提供`IEnumerable<SelectListItem>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T22:19:42.807

使用 Jquery Ajax + JSON 是填充下拉列表。这将导致更好的响应网页。

就是这么简单。您所要做的就是添加一个返回类型 JSONResult 的新操作并将下拉加载代码移动到那里。

**在控制器类中：** 创建一个新动作：

```
public JsonResult FillDropDown()
        {
            Category x = new Category(1, "one", 0);
            Category y = new Category(2, "two", 1);
            Category z = new Category(3, "three", 1);
            List<Category> categories = new List<Category>();
            categories.Add(x);
            categories.Add(y);
            categories.Add(z);

            return Json(categories,JsonRequestBehavior.AllowGet);
        } 
```

**在视图页面中：**添加用于从服务器加载数据的 Jquery 代码。

```
<script type="text/javascript">
    $(document).ready(function () 
    {
        var _selbxTest = $('#selbxTest'); //Get dropdownlistbox 
        $.getJSON(
            '@Url.Action("FillDropDown","Home")', //Provide JsonResultActionName, ControllerName
             {},
                function (_recdData) {
                    //Update dropdownListBox here
                    _selbxTest.append($('<option></option>').val(0).html('Select')); 
                    $.each(_recdData, function (key, value) {
                        _selbxTest.append($('<option></option>').val(value.value).html(value.text));
                    });
                });
    });
</script> 
```

最后在您的视图页面中添加一个简单的选择框而不是 Html.DropDownList()

```
<div>
        <select id="selbxTest"></select>
</div> 
```

希望这会帮助你。谢谢。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-08T18:24:45.437

更好的方法是为每个视图/页面创建一个视图模型，用数据填充它（如果需要）并将其返回到视图/页面。永远不要将您的域模型返回到视图/页面。

下面提供的代码适用于 ASP.NET MVC3，但很容易与您的情况相关，请不要对我的回答投反对票 :)

假设您正在创建一个需要属于某个类别的新产品（显示在选择列表中），因此您将需要一个创建视图/页面和操作方法。我将创建以下视图模型：

```
public class ProductCreateViewModel
{
     // Include other properties if needed, these are just for demo purposes

     public string Name { get; set; }
     public string SKU { get; set; }
     public string LongDescription { get; set; }

     // This is the unique identifier of your category,
     // i.e. foreign key in your product table
     public int CategoryId { get; set; }
     // This is a list of all your categories populated from your category table
     public IEnumerable<Category> Categories { get; set; }
} 
```

分类类：

```
public class Category
{
     public int Id { get; set; }
     public string Name { get; set; }
} 
```

在您的创建视图中，您将拥有以下内容：

```
@model MyProject.ViewModels.ProductCreateViewModel

@using (Html.BeginForm())
{
     <table>
          <tr>
               <td><b>Category:</b></td>
               <td>
                    @Html.DropDownListFor(x => x.CategoryId,
                         new SelectList(Model.Categories, "Id", "Name", Model.CategoryId),
                         "-- Select --"
                    )
                    @Html.ValidationMessageFor(x => x.CategoryId)
               </td>
          </tr>
     </table>

     <!-- Add other HTML controls if required and your submit button -->
} 
```

您的 Create 操作方法：

```
public ActionResult Create()
{
     ProductCreateViewModel viewModel = new ProductCreateViewModel
     {
          // Here you do a database call to populate your dropdown
          Categories = categoryService.GetAllCategories()
     };

     return View(viewModel);
} 
```

我希望这有帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-08T17:31:01.430

在创建`ViewData`项目之前的行中，您可以`List<T>`将`IEnumerable<T>`

```
IEnumerable<Category> cat = categories;
ViewData["categories"] = cat; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-03-08T02:34:07.210

我知道这很旧，但万一有人正在寻找答案

假设Category有和Id，并且Name和当前CategoryId在模型中

```
@Html.DropDownListFor(m => m.CategoryId, new SelectList((IEnumerable)ViewData["categories"], "Id", "Name")) 
```

# c++ - fstream 的 getline() 工作了一点...然后中断

> ID：10064735
> 
> 赞同：0
> 
> 时间：2012-04-08T17:19:43.533
> 
> 标签：c++

我有一个文本文件，其中包含一堆由换行符分隔的数字，如下所示：123.25 95.12 114.12 等...

问题是，当我的程序读取它时，它只将数字复制到数组中，直到第二个数字，然后用零填充其余元素。我试过使用分隔符和忽略语句，但没有任何效果。这是代码。

编辑（这是整个程序：）

```
#include <iostream>
#include <string.h>
#include <iomanip>
#include <fstream>

using namespace std;

struct utilityInfo
{
    char utility[20];
    double monthlyExpenses[12];
};

int main(){

utilityInfo Utility[3];

char charray[100];

fstream inFile;  
inFile.open("expenses.txt");
inFile.getline(charray, 7);
cout<<charray<<endl;
if(inFile.fail()) cout<<"it didnt work";

for(int i=0; i<12; i++)
{
    inFile.getline(charray,20);
    Utility[0].monthlyExpenses[i]=atof(charray);
}

for(int z=0; z<12; z++)
{
cout<<Utility[0].monthlyExpenses[z]<<endl;
}

inFile.close();

return 0;
} 
```

这是文本文件的样子：

```
207.14 
177.34
150.55
104.22
86.36
53.97
52.55
58.77
64.66
120.32
153.45
170.90 
```

这是输出的样子：

```
207.14
177.34
0
0
0
0
0
0
0
0
0
0 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T18:14:19.450

您文件中的第一个条目“207.14”实际上是“207.14”——（那里有一个空格）。你读了 7 个字符但留下了“”，这意味着 istream::getline 在 inFile 上设置了失败位，这意味着你的连续 getlines 失败。

要解决此问题，请在第一个 getline 后删除空格和/或清除 inFiles failbit。

您还应该在 for 循环中添加一个检查，以处理可能与失败/坏/eof 位有关的任何错误。

# php - PHP代码执行顺序

> ID：10064738
> 
> 赞同：0
> 
> 时间：2012-04-08T17:20:03.050
> 
> 标签：php

我正在尝试执行一些 php 代码行，但似乎 tey 没有按要求的顺序执行。这是一个代码片段：-

```
if( !empty($_POST['val']) )
               {
                    $val = Get_Val($sid, $_POST['val'], $lnk);
                    if($val)
                    { 
                        echo "<br />Here Value : " . $val;
                    }
                    else
                    {
                        echo "Invalid Value.";
                    }
              } 
```

当我在返回函数 Get_Val() 之前回显该值时，它会为某些有效参数集显示一个正数，这意味着 If 条件为真，但是当我执行代码时，正在执行 Else 部分。尽管输出按顺序显示，但它们并不一致。我希望我已经把问题说清楚了。感谢您提供任何帮助。谢谢！这是 Get_Val() 函数：-

```
函数 Get_Val($sid, $a, $link)
{
    //检查名称是否已经存在于表中
    $query = "SELECT val FROM store WHERE name = \"" . $a . "\""; //val在sql中自动递增
    $result = mysql_query( $query ,$link) or die( mysql_error());
    如果（$结果）
    {   
        $count = mysql_num_rows($result);
        if( $count == 0 ) //插入名称和返回值
        {
            $query_x = "INSERT INTO store(name) VALUES('" . $a . "')";
            $result = mysql_query( $query_x ,$link) 或死(mysql_error());
            if($result)//如果插入了新名称则返回'val'
            {
            Get_Val($sid, $a,$link);
            }
        }
        别的
        {
            $row = mysql_fetch_assoc($result);
            echo "Get_Val 中的 Val："。$row['val'];
            返回 $row['val'];
        }
    }
    别的
    {
        echo "发生意外错误...!!!";
        退出（0）；
    }
}
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T17:46:08.543

这是怎么回事：

```
if( $count  Val in Get_Val : " . $row['val'];
    return $row['val'];
} 
```

您确定 $_POST['val'] 是存储在数据库中的有效值吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-29T13:49:45.860

如果 $count == 0，Get_Val 不返回值。在递归调用之前添加 return 语句。像这样：

```
...
if( $count == 0 ) //insert name and the return val
{
    $query_x = "INSERT INTO store(name) VALUES('" . $a . "')";
    $result = mysql_query( $query_x ,$link ) or die( mysql_error());
    if($result)//If new name inserted then return the 'val'
    {
       return Get_Val($sid, $a,$link);
    }
}
... 
```

# asp.net - 我需要在按钮单击时弹出一个窗口

> ID：10064752
> 
> 赞同：-3
> 
> 时间：2012-04-08T17:21:40.477
> 
> 标签：asp.net

> **可能重复：**
> [asp.net 中的弹出窗口？](https://stackoverflow.com/questions/3625669/pop-up-window-in-asp-net)

我需要在单击按钮时弹出一个窗口，以便弹出的窗口包含一个复选框列表，并且我还需要获取在弹出窗口中存在的复选框列表中选中的值。

如果是这样，有什么办法可以做到这一点，请帮助我？else 建议任何其他方式

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T06:46:04.663

您可以使用 AjaxToolKit 控件的 ModalPopup：

```
<ajaxToolkit:ModalPopupExtender ID="MPE" runat="server"
TargetControlID="LinkButton1"
PopupControlID="Panel1"
BackgroundCssClass="modalBackground" 
DropShadow="true" 
OkControlID="OkButton" 
OnOkScript="onOk()"
CancelControlID="CancelButton" 
PopupDragHandleControlID="Panel3" >
    <Animations>
        <OnShowing> ..  </OnShowing>
        <OnShown>   ..  </OnShown>    
        <OnHiding>  ..  </OnHiding>            
        <OnHidden>  ..  </OnHidden>            
    </Animations>
</ajaxToolkit:ModalPopupExtender> 
```

如果您对此不熟悉，请访问此链接：[ModalPopup 演示](http://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/ModalPopup/ModalPopup.aspx)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-08T17:30:20.673

好的，首先我要解释的是 Javascript（这就是您需要的），然后使用 Javascript 变量，您对 Javascript 中收集的数据所做的事情就是您的 ASP.net 业务。

您正在寻找[AJAX](http://www.w3schools.com/ajax/default.asp)请求，如果您不知道，我建议您参加 w3schools 介绍教程之一。

因此，在您的 javascript 中，您必须保存变量，将其发送到当前页面（使用 AJAX）并从 ASP.net 中的 URL 收集数据

# haskell - 枚举值的计数频率

> ID：10064758
> 
> 赞同：2
> 
> 时间：2012-04-08T17:22:41.697
> 
> 标签：haskell, enums

假设我有一个像

```
data T = A | B | C deriving (Enum) 
```

和枚举值列表作为输入：

```
[B, C, C, A, C, A, C] 
```

我正在寻找的是一个函数，给定这个输入，返回每个元素在输入中出现的频率。输出的简单形式是频率列表（`[2, 1, 4]`在这种情况下），但这不是必需的。我目前的方法如下所示：

```
countEnum :: Enum a => [a] -> [a] -> [Word]

countEnum elems =
  let f x = map (fromIntegral . fromEnum . (fromEnum x ==)) [0 .. length elems - 1]
  in foldr (zipWith (+)) (replicate (length elems) 0) . map f 
```

这可行，但我至少看到两个问题：

1.  它使用该`length`功能。
2.  它要求调用者在第一个参数中指定所有可能的值。

有没有办法改善这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-08T18:30:23.810

通常比使用 a 排序列表要快一些`Map`，

```
enumFreq :: Enum a => [a] -> Map Int Word
enumFreq = foldl' (\mp e -> Map.insertWith' (+) (fromEnum e) 1 mp) Map.empty 
```

你可以得到

*   频率只有每`Map.elems $ enumFreq list`
*   `(value,frequency)`每对`[(toEnum i, f) | (i,f) <- Map.assocs $ enumFreq list]`

如果您的类型本身是 in `Ord`，则可以跳过`fromEnum`and `toEnum`。

如果你有`Ix`and`Bounded`实例并且类型没有太多元素，

```
import Data.Array.Unboxed

enumFreq :: (Ix a, Bounded a) => [a] -> UArray a Word
enumFreq = accumArray (+) 0 (minBound,maxBound) . (`zip` repeat 1) 
```

具有更好的渐近行为，使用更少的内存并且对于相当短的列表已经更快。（但这取决于列表中存在的类型元素的高比例。）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-08T18:11:53.073

也许是这样的？

```
import Control.Arrow ((&&&))
import Data.Function (on)
import Data.List (groupBy, sortBy)

data T = A | B | C deriving Enum

countEnum :: Enum a => [a] -> [Int]
countEnum = map length . groupBy ((==) `on` snd) . sortBy (compare `on` snd) . map (id &&& fromEnum) 
```

例如：

```
> countEnum [B, C, C, A, C, A, C]
[2,1,4] 
```

如果您可以定义一个`Bounded`实例，`T`则有可能将出现次数为零：

```
countEnum' :: (Bounded a, Enum a) => [a] -> [Int]
countEnum' = map pred . countEnum . (++ enumFromTo minBound maxBound)

> countEnum' [C, C, A, C, A, C]
[2,0,4] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-08T20:37:10.007

如果你有`Ord`，你可以使用键值对

```
import Control.List
import Control.Arrow

map (head &&& length) $ group $ sort elems 
```

# iphone - 在 ad-hoc 模式下应用程序崩溃抛出测试飞行 - 工作得很好

> ID：10064759
> 
> 赞同：0
> 
> 时间：2012-04-08T17:22:52.240
> 
> 标签：iphone, objective-c, crash, adhoc, crash-reports

我正在构建这个应用程序，我的客户在过去 3 周内进行了试飞，一切都很棒......直到今天。我刚刚完成了应用程序的工作并像往常一样将其发送给他。但是它崩溃了，当我尝试安装它时，它对我来说也崩溃了。

当我在我的设备上运行应用程序时，它会完美地运行 xcode。所以我从设备下载了崩溃日志 - 有人可以帮我弄清楚吗？

```
Incident Identifier: 56C4BF08-4F22-4501-957D-F8C9920B99D0
CrashReporter Key:   463d6c316ad4d18e634919c404611f9dcda0565b
Hardware Model:      iPhone3,1
Process:         Alkolombre [22095]
Path:            /var/mobile/Applications/E8FB2CA8-85EC-47D0-8891-3FA4A9762151/Alkolombre.app/Alkolombre
Identifier:      Alkolombre
Version:         ??? (???)
Code Type:       ARM (Native)
Parent Process:  launchd [1]

Date/Time:       2012-04-08 19:39:20.195 +0300
OS Version:      iPhone OS 5.1 (9B176)
Report Version:  104

Exception Type:  EXC_CRASH (SIGABRT)
Exception Codes: 0x00000000, 0x00000000
Crashed Thread:  0

Last Exception Backtrace:
0   CoreFoundation                  0x34e8a88f __exceptionPreprocess + 163
1   libobjc.A.dylib                 0x362b1259 objc_exception_throw + 33
2   CoreFoundation                  0x34e8a789 +[NSException raise:format:] + 1
3   CoreFoundation                  0x34e8a7ab +[NSException raise:format:] + 35
4   Foundation                      0x30cae05f -[NSURL(NSURL) initFileURLWithPath:] + 79
5   Foundation                      0x30cadffb +[NSURL(NSURL) fileURLWithPath:] + 43
6   Alkolombre                      0x00020047 -[AlarmManager initialize] (AlarmManager.m:73)
7   Alkolombre                      0x0001728f -[AppDelegate application:didFinishLaunchingWithOptions:] (AppDelegate.m:55)
8   UIKit                           0x31ee0e53 -[UIApplication _callInitializationDelegatesForURL:payload:suspended:] + 1183
9   UIKit                           0x31eda985 -[UIApplication _runWithURL:payload:launchOrientation:statusBarStyle:statusBarHidden:] + 409
10  UIKit                           0x31ea8c6b -[UIApplication handleEvent:withNewEvent:] + 1011
11  UIKit                           0x31ea870f -[UIApplication sendEvent:] + 55
12  UIKit                           0x31ea80e3 _UIApplicationHandleEvent + 5827
13  GraphicsServices                0x360dd22b PurpleEventCallback + 883
14  CoreFoundation                  0x34e5e523 __CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE1_PERFORM_FUNCTION__ + 39
15  CoreFoundation                  0x34e5e4c5 __CFRunLoopDoSource1 + 141
16  CoreFoundation                  0x34e5d313 __CFRunLoopRun + 1371
17  CoreFoundation                  0x34de04a5 CFRunLoopRunSpecific + 301
18  CoreFoundation                  0x34de036d CFRunLoopRunInMode + 105
19  UIKit                           0x31ed9a13 -[UIApplication _run] + 551
20  UIKit                           0x31ed6e7d UIApplicationMain + 1081
21  Alkolombre                      0x00016f37 main (main.m:16)
22  Alkolombre                      0x000169d0 0x15000 + 6608

Thread 0 name:  Dispatch queue: com.apple.main-thread
Thread 0 Crashed:
0   libsystem_kernel.dylib          0x34c7e32c __pthread_kill + 8
1   libsystem_c.dylib               0x36b7a208 pthread_kill + 48
2   libsystem_c.dylib               0x36b73298 abort + 88
3   libc++abi.dylib                 0x3083ff64 abort_message + 40
4   libc++abi.dylib                 0x3083d346 _ZL17default_terminatev + 18
5   libobjc.A.dylib                 0x362b1350 _objc_terminate + 140
6   libc++abi.dylib                 0x3083d3be _ZL19safe_handler_callerPFvvE + 70
7   libc++abi.dylib                 0x3083d44a std::terminate() + 14
8   libc++abi.dylib                 0x3083e81e __cxa_rethrow + 82
9   libobjc.A.dylib                 0x362b12a2 objc_exception_rethrow + 6
10  CoreFoundation                  0x34de0506 CFRunLoopRunSpecific + 398
11  CoreFoundation                  0x34de0366 CFRunLoopRunInMode + 98
12  UIKit                           0x31ed9a0c -[UIApplication _run] + 544
13  UIKit                           0x31ed6e76 UIApplicationMain + 1074
14  Alkolombre                      0x00016f30 main (main.m:16)
15  Alkolombre                      0x000169c8 0x15000 + 6600

Thread 1 name:  Dispatch queue: com.apple.libdispatch-manager
Thread 1:
0   libsystem_kernel.dylib          0x34c6e3a8 kevent + 24
1   libdispatch.dylib               0x30ebbea4 _dispatch_mgr_invoke + 708
2   libdispatch.dylib               0x30ebbbc2 _dispatch_mgr_thread + 30

Thread 2:
0   libsystem_kernel.dylib          0x34c7ecd4 __workq_kernreturn + 8
1   libsystem_c.dylib               0x36b35f36 _pthread_wqthread + 610
2   libsystem_c.dylib               0x36b35cc8 start_wqthread + 0

Thread 3:
0   libsystem_kernel.dylib          0x34c7ecd4 __workq_kernreturn + 8
1   libsystem_c.dylib               0x36b35f36 _pthread_wqthread + 610
2   libsystem_c.dylib               0x36b35cc8 start_wqthread + 0

Thread 4 name:  WebThread
Thread 4:
0   libsystem_kernel.dylib          0x34c7e0d8 __psynch_mutexwait + 24
1   libsystem_c.dylib               0x36b2f674 pthread_mutex_lock + 376
2   WebCore                         0x36bbfa2c _ZL17_WebTryThreadLockb + 208
3   WebCore                         0x36bbfd30 _ZL14WebRunLoopLockP19__CFRunLoopObservermPv + 24
4   CoreFoundation                  0x34e5eb14 __CFRUNLOOP_IS_CALLING_OUT_TO_AN_OBSERVER_CALLBACK_FUNCTION__ + 12
5   CoreFoundation                  0x34e5cd50 __CFRunLoopDoObservers + 252
6   CoreFoundation                  0x34e5d16a __CFRunLoopRun + 946
7   CoreFoundation                  0x34de049e CFRunLoopRunSpecific + 294
8   CoreFoundation                  0x34de0366 CFRunLoopRunInMode + 98
9   WebCore                         0x36c630f0 _ZL12RunWebThreadPv + 396
10  libsystem_c.dylib               0x36b3b72e _pthread_start + 314
11  libsystem_c.dylib               0x36b3b5e8 thread_start + 0

Thread 0 crashed with ARM Thread State:
    r0: 0x00000000    r1: 0x00000000      r2: 0x00000001      r3: 0x00000000
    r4: 0x00000006    r5: 0x3f586d98      r6: 0x00000002      r7: 0x2fe13a5c
    r8: 0x00192320    r9: 0x30840a4a     r10: 0x00000000     r11: 0x0018c560
    ip: 0x00000148    sp: 0x2fe13a50      lr: 0x36b7a20f      pc: 0x34c7e32c
  cpsr: 0x000f0010

Binary Images:
   0x15000 -    0x35fff +Alkolombre armv7  <b270034dc4c93b4398c2b352cf391ef2> /var/mobile/Applications/E8FB2CA8-85EC-47D0-8891-3FA4A9762151/Alkolombre.app/Alkolombre
0x2fe14000 - 0x2fe35fff  dyld armv7  <4a817f3e0def30d5ae2032157d889c1d> /usr/lib/dyld
0x300f9000 - 0x300fdfff  IOMobileFramebuffer armv7  <42dbc26828e934acabb4f3b0a35d8250> /System/Library/PrivateFrameworks/IOMobileFramebuffer.framework/IOMobileFramebuffer
0x300fe000 - 0x300fefff  liblangid.dylib armv7  <644ff4bcfbf337b5b5859e3f0fc0a9a8> /usr/lib/liblangid.dylib
0x3015e000 - 0x306a2fff  FaceCoreLight armv7  <f326d88709683520b251dc53cb847c11> /System/Library/PrivateFrameworks/FaceCoreLight.framework/FaceCoreLight
0x306a3000 - 0x30722fff  libsqlite3.dylib armv7  <bf01f5ed47b033d8bde30d735ff44416> /usr/lib/libsqlite3.dylib
0x3074a000 - 0x30822fff  vImage armv7  <caf3648be2933384b6aa1ae7408ab4f0> /System/Library/Frameworks/Accelerate.framework/Frameworks/vImage.framework/vImage
0x30839000 - 0x30840fff  libc++abi.dylib armv7  <bab4dcbfc5943d3fbb637342d35e8045> /usr/lib/libc++abi.dylib
0x30841000 - 0x30892fff  CoreText armv7  <5bfac4ee88d03d5b87a1f105abb7756c> /System/Library/Frameworks/CoreText.framework/CoreText
0x30924000 - 0x30924fff  libkeymgr.dylib armv7  <ebd2dddf55d83cf48a18913968775960> /usr/lib/system/libkeymgr.dylib
0x30925000 - 0x30995fff  CoreImage armv7  <86ac6f5a267637b6b7f8a831dfc7c64b> /System/Library/Frameworks/CoreImage.framework/CoreImage
0x309cb000 - 0x30a07fff  iCalendar armv7  <f2836083051132d3aa40ad82d7f73aea> /System/Library/PrivateFrameworks/iCalendar.framework/iCalendar
0x30a08000 - 0x30a13fff  AccountSettings armv7  <373e59421d983c93931cfbad87b1ae35> /System/Library/PrivateFrameworks/AccountSettings.framework/AccountSettings
0x30a14000 - 0x30a14fff  Accelerate armv7  <55b24cf91a8b3532bde6733c96f14c08> /System/Library/Frameworks/Accelerate.framework/Accelerate
0x30a38000 - 0x30a81fff  libc++.1.dylib armv7  <5b690e5dd5a43a7fb166ade9fe58a7a4> /usr/lib/libc++.1.dylib
0x30a82000 - 0x30a85fff  libmacho.dylib armv7  <e52b77623bd031bc807e77029566c777> /usr/lib/system/libmacho.dylib
0x30a86000 - 0x30b0cfff  CoreMotion armv7  <6a9355d5a8e238b5b8f193605d509e15> /System/Library/Frameworks/CoreMotion.framework/CoreMotion
0x30b46000 - 0x30b47fff  DataMigration armv7  <d77f0e8f39ee37f5a2ac713a3fd9e693> /System/Library/PrivateFrameworks/DataMigration.framework/DataMigration
0x30b5a000 - 0x30b9afff  libGLImage.dylib armv7  <40448706190031f6b0d9636cc11ee81d> /System/Library/Frameworks/OpenGLES.framework/libGLImage.dylib
0x30b9b000 - 0x30b9cfff  libsystem_blocks.dylib armv7  <9fdc27af7350323bbc7d98e14e027907> /usr/lib/system/libsystem_blocks.dylib
0x30bb5000 - 0x30bd4fff  libSystem.B.dylib armv7  <0c55744b6f7335eebba4ca2c3d10b43c> /usr/lib/libSystem.B.dylib
0x30bd5000 - 0x30c0dfff  VideoToolbox armv7  <9f25f38d1cd13a1daff99cfde8884410> /System/Library/PrivateFrameworks/VideoToolbox.framework/VideoToolbox
0x30c94000 - 0x30c9bfff  StoreKit armv7  <1bc0c05f99a8309d90476b42263e3487> /System/Library/Frameworks/StoreKit.framework/StoreKit
0x30c9c000 - 0x30e1afff  Foundation armv7  <c40ddb073142315bb4ebb214343d0b7f> /System/Library/Frameworks/Foundation.framework/Foundation
0x30e26000 - 0x30e27fff  libdyld.dylib armv7  <977b0ad6f2f433108b4a0324a57cd2ab> /usr/lib/system/libdyld.dylib
0x30e28000 - 0x30e3dfff  libresolv.9.dylib armv7  <66f7557fa4b43979b186e00271839fdb> /usr/lib/libresolv.9.dylib
0x30e3e000 - 0x30e63fff  OpenCL armv7  <ec915bfc3f7633dda61b5fc87459119b> /System/Library/PrivateFrameworks/OpenCL.framework/OpenCL
0x30ea8000 - 0x30eaefff  MobileIcons armv7  <ed1b46f917903c9b9baaa2be4392dafe> /System/Library/PrivateFrameworks/MobileIcons.framework/MobileIcons
0x30eaf000 - 0x30ec5fff  libdispatch.dylib armv7  <9ecfaef4110a3bf9a92d12f0fe8d1d78> /usr/lib/system/libdispatch.dylib
0x30ec6000 - 0x30ed0fff  libbz2.1.0.dylib armv7  <40e4045fb79e382b8833707746cf28b1> /usr/lib/libbz2.1.0.dylib
0x30ed7000 - 0x30edcfff  ApplePushService armv7  <f424c0340de637c08bbeb4f3bd8c6eaf> /System/Library/PrivateFrameworks/ApplePushService.framework/ApplePushService
0x30f1c000 - 0x30f2dfff  DataAccessExpress armv7  <e6144ba265da3bb7b9a263aa1a29b054> /System/Library/PrivateFrameworks/DataAccessExpress.framework/DataAccessExpress
0x30f2e000 - 0x30f2efff  vecLib armv7  <a2cfe25e77aa36bfb4a30b2d0d2dd465> /System/Library/Frameworks/Accelerate.framework/Frameworks/vecLib.framework/vecLib
0x30f34000 - 0x30f71fff  FTServices armv7  <28ed78e01a77388cb4c0f2f6ec33482c> /System/Library/PrivateFrameworks/FTServices.framework/FTServices
0x30f91000 - 0x31005fff  MediaControlSender armv7  <87315c54b2293ab589950341ff91b45d> /System/Library/PrivateFrameworks/MediaControlSender.framework/MediaControlSender
0x31006000 - 0x31042fff  AppSupport armv7  <311eac85b2a433a884dacba77217b49e> /System/Library/PrivateFrameworks/AppSupport.framework/AppSupport
0x311dd000 - 0x31201fff  PrintKit armv7  <08509c7bc915358b953de6f5cbef5c56> /System/Library/PrivateFrameworks/PrintKit.framework/PrintKit
0x31205000 - 0x31239fff  MIME armv7  <d30292ea8f7e360fa5f5d5b1b62b602d> /System/Library/PrivateFrameworks/MIME.framework/MIME
0x31261000 - 0x31265fff  libGFXShared.dylib armv7  <998fccc16cf735dbb62324202995e193> /System/Library/Frameworks/OpenGLES.framework/libGFXShared.dylib
0x31270000 - 0x31316fff  AddressBookUI armv7  <da424fecc66e3628ab03378ae80b38fc> /System/Library/Frameworks/AddressBookUI.framework/AddressBookUI
0x3133b000 - 0x31379fff  IOKit armv7  <fcda71d29d6136dfbd84c1725f4998e5> /System/Library/Frameworks/IOKit.framework/Versions/A/IOKit
0x313e4000 - 0x313e5fff  libdnsinfo.dylib armv7  <9aede8d6579d3430ac39ae5f95cce498> /usr/lib/system/libdnsinfo.dylib
0x314e3000 - 0x314eafff  AssetsLibraryServices armv7  <0703f561f9a038b6850d6e93bba7e5f4> /System/Library/PrivateFrameworks/AssetsLibraryServices.framework/AssetsLibraryServices
0x314eb000 - 0x314ecfff  libremovefile.dylib armv7  <402f8956975d3b6fb86ab9b31a43242c> /usr/lib/system/libremovefile.dylib
0x31552000 - 0x3159cfff  libvDSP.dylib armv7  <441b42aca07b3da39feab25f8349918f> /System/Library/Frameworks/Accelerate.framework/Frameworks/vecLib.framework/libvDSP.dylib
0x315cf000 - 0x3162cfff  StoreServices armv7  <628fbbc73ed93730962c53bfbfde6794> /System/Library/PrivateFrameworks/StoreServices.framework/StoreServices
0x31818000 - 0x3195dfff  CoreGraphics armv7  <903545b89a7f311d95100ac7d1d44709> /System/Library/Frameworks/CoreGraphics.framework/CoreGraphics
0x31983000 - 0x31992fff  GenerationalStorage armv7  <d84c3fd0e7bd36e78c256f2f4c5a4e91> /System/Library/PrivateFrameworks/GenerationalStorage.framework/GenerationalStorage
0x31993000 - 0x31a49fff  AVFoundation armv7  <35cb7a0eb1dc3554a777c1cc11cb0415> /System/Library/Frameworks/AVFoundation.framework/AVFoundation
0x31a98000 - 0x31af0fff  CoreAudio armv7  <be335e8eb6f93594b028a6ddd503a183> /System/Library/Frameworks/CoreAudio.framework/CoreAudio
0x31af1000 - 0x31afdfff  libCRFSuite.dylib armv7  <bdb2b4d1a78c39c1ba60d791207aed2a> /usr/lib/libCRFSuite.dylib
0x31b04000 - 0x31b0afff  liblaunch.dylib armv7  <aa2bcba6fc7a36a191958fef2e995475> /usr/lib/system/liblaunch.dylib
0x31b0b000 - 0x31b0ffff  IOSurface armv7  <6ae77a40f8e93f28bc466ca93f5675d4> /System/Library/PrivateFrameworks/IOSurface.framework/IOSurface
0x31b26000 - 0x31b49fff  Bom armv7  <c3435ecd2e5839f89de51edad0e1bb00> /System/Library/PrivateFrameworks/Bom.framework/Bom
0x31c17000 - 0x31c1bfff  AggregateDictionary armv7  <3a3a33f3a05538988c6e2bb363dc46a8> /System/Library/PrivateFrameworks/AggregateDictionary.framework/AggregateDictionary
0x31c2e000 - 0x31c3bfff  libbsm.0.dylib armv7  <750a0de73a733019a77144b805d4d2f8> /usr/lib/libbsm.0.dylib
0x31e24000 - 0x31e30fff  libz.1.dylib armv7  <36ce86a3dc8c344596c8c325615f374b> /usr/lib/libz.1.dylib
0x31e7d000 - 0x31e8efff  libxpc.dylib armv7  <ccf25b1e49ce3b2fa58d8c8546755505> /usr/lib/system/libxpc.dylib
0x31ea1000 - 0x31ea4fff  NetworkStatistics armv7  <7848d8ebad99367cb4f7f4e3fe88e5d6> /System/Library/PrivateFrameworks/NetworkStatistics.framework/NetworkStatistics
0x31ea5000 - 0x32347fff  UIKit armv7  <d72bcc68e76a3a55a963590cdcffe8cd> /System/Library/Frameworks/UIKit.framework/UIKit
0x32351000 - 0x324f7fff  CoreData armv7  <b0215b6d4d143859a2b313ecade095ec> /System/Library/Frameworks/CoreData.framework/CoreData
0x32574000 - 0x327a1fff  MediaToolbox armv7  <ec9bc89489763c6c93f86c5c490b2d69> /System/Library/PrivateFrameworks/MediaToolbox.framework/MediaToolbox
0x32b41000 - 0x32b45fff  CertUI armv7  <f503892ef60e36108d28d8f9d6144d2a> /System/Library/PrivateFrameworks/CertUI.framework/CertUI
0x32b6c000 - 0x32b7bfff  OpenGLES armv7  <e80acc691001301e96101bb89d940033> /System/Library/Frameworks/OpenGLES.framework/OpenGLES
0x32b7c000 - 0x32b86fff  libvMisc.dylib armv7  <e8248c797b9b363594bb652ddf7ce16d> /System/Library/Frameworks/Accelerate.framework/Frameworks/vecLib.framework/libvMisc.dylib
0x32b93000 - 0x32bf7fff  MessageUI armv7  <b74d79ea691a35ada276f063b7217a20> /System/Library/Frameworks/MessageUI.framework/MessageUI
0x33416000 - 0x33455fff  QuickLook armv7  <802b1092542a3017a0380632502610d4> /System/Library/Frameworks/QuickLook.framework/QuickLook
0x33456000 - 0x3345afff  libcache.dylib armv7  <d6a7436ed8dc33d795c9b42baf864882> /usr/lib/system/libcache.dylib
0x33461000 - 0x33531fff  WebKit armv7  <6ff2796c2f933050ac6ecdee9fc6a216> /System/Library/PrivateFrameworks/WebKit.framework/WebKit
0x3360d000 - 0x33659fff  CoreTelephony armv7  <e8eb52ca5fe33c7488a33efd222e7804> /System/Library/Frameworks/CoreTelephony.framework/CoreTelephony
0x3367b000 - 0x336c3fff  CoreMedia armv7  <eb1f503312be3c93b07b2d0d25177000> /System/Library/Frameworks/CoreMedia.framework/CoreMedia
0x33768000 - 0x33856fff  libiconv.2.dylib armv7  <2cfefe2ad1d335dd9549562910e7a2e2> /usr/lib/libiconv.2.dylib
0x33857000 - 0x3392efff  CFNetwork armv7  <765a472c824830eea91b8f02d12867e4> /System/Library/Frameworks/CFNetwork.framework/CFNetwork
0x33a67000 - 0x33aa3fff  IMFoundation armv7  <77bb4365a65b32a49523b03da0340dbc> /System/Library/PrivateFrameworks/IMCore.framework/Frameworks/IMFoundation.framework/IMFoundation
0x33aa4000 - 0x33bc9fff  JavaScriptCore armv7  <2ffc6c87b94434288366bd53765ee267> /System/Library/PrivateFrameworks/JavaScriptCore.framework/JavaScriptCore
0x33c39000 - 0x33c62fff  AppleAccount armv7  <2ba44023410231fcb3f72f762ea3ce6e> /System/Library/PrivateFrameworks/AppleAccount.framework/AppleAccount
0x33c7c000 - 0x33c88fff  CoreVideo armv7  <364fa32d513f3c11b50970120545f1a8> /System/Library/Frameworks/CoreVideo.framework/CoreVideo
0x33df0000 - 0x33e06fff  DictionaryServices armv7  <6ed2e967136f37d4a4b9b318d6c43b83> /System/Library/PrivateFrameworks/DictionaryServices.framework/DictionaryServices
0x3419b000 - 0x3445cfff  libLAPACK.dylib armv7  <0e94e9a7e7a334649afaccae0f1215a2> /System/Library/Frameworks/Accelerate.framework/Frameworks/vecLib.framework/libLAPACK.dylib
0x3445d000 - 0x34473fff  libmis.dylib armv7  <258bc92be5823b239b4412dd42cb4807> /usr/lib/libmis.dylib
0x34495000 - 0x344e6fff  libstdc++.6.dylib armv7  <c352af5a742e3c7a8d4d7e5f6f454793> /usr/lib/libstdc++.6.dylib
0x344e7000 - 0x3451efff  Security armv7  <eea56f71fde83c2981f9281dc7823725> /System/Library/Frameworks/Security.framework/Security
0x34538000 - 0x34568fff  ContentIndex armv7  <7a64670bb2ff3ee39ddee1dc1c72f92d> /System/Library/PrivateFrameworks/ContentIndex.framework/ContentIndex
0x345cd000 - 0x34608fff  libCGFreetype.A.dylib armv7  <55941c96cf1f3b048e72a148c4496c16> /System/Library/Frameworks/CoreGraphics.framework/Resources/libCGFreetype.A.dylib
0x34628000 - 0x3462dfff  libcopyfile.dylib armv7  <52e874396c393ed29099789ce702cfe2> /usr/lib/system/libcopyfile.dylib
0x34708000 - 0x3470efff  MobileKeyBag armv7  <e1f06241ef0e3f0aae00f15df572077e> /System/Library/PrivateFrameworks/MobileKeyBag.framework/MobileKeyBag
0x34807000 - 0x34851fff  ManagedConfiguration armv7  <5e0a131bbfec305ea01f9e01f486da63> /System/Library/PrivateFrameworks/ManagedConfiguration.framework/ManagedConfiguration
0x34852000 - 0x3487efff  libtidy.A.dylib armv7  <3aacc5b650e037c086a8ff6657d154bf> /usr/lib/libtidy.A.dylib
0x3487f000 - 0x34888fff  libMobileGestalt.dylib armv7  <4a15e845dc6f3a4a980de66c1cc44c42> /usr/lib/libMobileGestalt.dylib
0x349c1000 - 0x349d8fff  WebBookmarks armv7  <bd20a05587783a8e9596eef1d3615ea7> /System/Library/PrivateFrameworks/WebBookmarks.framework/WebBookmarks
0x349d9000 - 0x349f1fff  Notes armv7  <724966ed5cd4395cb70f9c996b123f53> /System/Library/PrivateFrameworks/Notes.framework/Notes
0x349f2000 - 0x34a75fff  MapKit armv7  <e39706ac199134a497954e1f1d6d7245> /System/Library/Frameworks/MapKit.framework/MapKit
0x34a84000 - 0x34a98fff  PersistentConnection armv7  <65682d21486836a3aa3e17b9461e7b3a> /System/Library/PrivateFrameworks/PersistentConnection.framework/PersistentConnection
0x34aa3000 - 0x34ad8fff  DataAccess armv7  <89fd0c22338b37538cf61803a0bca9e2> /System/Library/PrivateFrameworks/DataAccess.framework/DataAccess
0x34adc000 - 0x34b55fff  ProofReader armv7  <6db611d8df6530d480f97a40bc519f70> /System/Library/PrivateFrameworks/ProofReader.framework/ProofReader
0x34c63000 - 0x34c66fff  CaptiveNetwork armv7  <f5cc4b97ce9432da9426f12621453325> /System/Library/PrivateFrameworks/CaptiveNetwork.framework/CaptiveNetwork
0x34c6d000 - 0x34c83fff  libsystem_kernel.dylib armv7  <7ac5560851ce3cb3981068092074b409> /usr/lib/system/libsystem_kernel.dylib
0x34dd1000 - 0x34ee8fff  CoreFoundation armv7  <6d450fe923d7387f8b01845e0edd713d> /System/Library/Frameworks/CoreFoundation.framework/CoreFoundation
0x3506c000 - 0x350b1fff  GeoServices armv7  <a26be2e76e8730ab91a16502aba376be> /System/Library/PrivateFrameworks/GeoServices.framework/GeoServices
0x351fd000 - 0x35232fff  SystemConfiguration armv7  <4464a4e3bb3f32f7abaa35ebf31fda49> /System/Library/Frameworks/SystemConfiguration.framework/SystemConfiguration
0x35233000 - 0x3537cfff  libicucore.A.dylib armv7  <b70646b63f1f3b33896dd8cb91b8dab1> /usr/lib/libicucore.A.dylib
0x35384000 - 0x353cdfff  AddressBook armv7  <b17a2962e9043e0385c3c2c652155f2b> /System/Library/Frameworks/AddressBook.framework/AddressBook
0x356d3000 - 0x356d9fff  liblockdown.dylib armv7  <9e45ce468a6f31e5b8263f2c224aa800> /usr/lib/liblockdown.dylib
0x356da000 - 0x35897fff  ImageIO armv7  <02e3578171fa3b6a969b244275fd2bab> /System/Library/Frameworks/ImageIO.framework/ImageIO
0x358c2000 - 0x358c4fff  MobileInstallation armv7  <215d93dbb0f63cbf828f9126eb7b5349> /System/Library/PrivateFrameworks/MobileInstallation.framework/MobileInstallation
0x358d2000 - 0x35928fff  GMM armv7  <6b2f7e1aa6be3d69b4c4cf54ed960602> /System/Library/PrivateFrameworks/GMM.framework/GMM
0x35929000 - 0x3594cfff  MobileSync armv7  <e42604c550283f4aa517ae8f108b340f> /System/Library/PrivateFrameworks/MobileSync.framework/MobileSync
0x3599a000 - 0x359e8fff  CoreLocation armv7  <44550ebedf23334d85441d9743b74e03> /System/Library/Frameworks/CoreLocation.framework/CoreLocation
0x359f2000 - 0x35aa0fff  Message armv7  <b8221d43401d315fb84398b7aa570fc1> /System/Library/PrivateFrameworks/Message.framework/Message
0x35ba5000 - 0x35ba8fff  libsystem_network.dylib armv7  <356cb66612e836968ef24e6e5c3364cc> /usr/lib/system/libsystem_network.dylib
0x35d61000 - 0x35f45fff  AudioToolbox armv7  <c91e27850452330ea804db6408840fd2> /System/Library/Frameworks/AudioToolbox.framework/AudioToolbox
0x35f46000 - 0x35f46fff  libunwind.dylib armv7  <e0a73a57795f3e1698a52ebe6fc07005> /usr/lib/system/libunwind.dylib
0x36084000 - 0x3608afff  libnotify.dylib armv7  <9406297de3e43742887890662a87ab53> /usr/lib/system/libnotify.dylib
0x360bf000 - 0x360cefff  MobileDeviceLink armv7  <70ac33720f513f0f97ea2279260678ca> /System/Library/PrivateFrameworks/MobileDeviceLink.framework/MobileDeviceLink
0x360cf000 - 0x360d7fff  ProtocolBuffer armv7  <0e846afacf823d2b8c029cc3010a8253> /System/Library/PrivateFrameworks/ProtocolBuffer.framework/ProtocolBuffer
0x360d8000 - 0x360e2fff  GraphicsServices armv7  <e21a6e61bdd136b6805a9e3abe2e3d1f> /System/Library/PrivateFrameworks/GraphicsServices.framework/GraphicsServices
0x360e3000 - 0x360eafff  MailServices armv7  <ab2388ce733e38b7a261273a401bbbf1> /System/Library/PrivateFrameworks/MailServices.framework/MailServices
0x360f8000 - 0x3610efff  EAP8021X armv7  <fffe86a22bc434a6ae84f23bfecef9d6> /System/Library/PrivateFrameworks/EAP8021X.framework/EAP8021X
0x36115000 - 0x361d7fff  Celestial armv7  <2a59586b0ae937c3b25fe526924aa885> /System/Library/PrivateFrameworks/Celestial.framework/Celestial
0x362a2000 - 0x362a6fff  libAccessibility.dylib armv7  <9a17d07b5a3b38cfafdf16f78c99b572> /usr/lib/libAccessibility.dylib
0x362a8000 - 0x3636efff  libobjc.A.dylib armv7  <90014d1bc583366d85622e43097df416> /usr/lib/libobjc.A.dylib
0x3636f000 - 0x3636ffff  libgcc_s.1.dylib armv7  <eb82984fa36c329387aa518aa5205f3d> /usr/lib/libgcc_s.1.dylib
0x3638a000 - 0x3638dfff  ActorKit armv7  <434c756a6b053f4ba3c954cfccddbf59> /System/Library/PrivateFrameworks/ActorKit.framework/ActorKit
0x3641c000 - 0x36421fff  CrashReporterSupport armv7  <2bb524b3bb3c3eb2932ce13b655b7c7c> /System/Library/PrivateFrameworks/CrashReporterSupport.framework/CrashReporterSupport
0x36523000 - 0x36543fff  libxslt.1.dylib armv7  <39348471007e39dab80af68b08390456> /usr/lib/libxslt.1.dylib
0x366a7000 - 0x366c4fff  libsystem_info.dylib armv7  <50863bcbf478323e96a8e5b1a83ea6f9> /usr/lib/system/libsystem_info.dylib
0x366c5000 - 0x366d4fff  SpringBoardServices armv7  <ca5b10014b473d2eaec5c48d89ee1b54> /System/Library/PrivateFrameworks/SpringBoardServices.framework/SpringBoardServices
0x36715000 - 0x36715fff  libCVMSPluginSupport.dylib armv7  <a80aaa9989483ce3a496a061fd1e9e0a> /System/Library/Frameworks/OpenGLES.framework/libCVMSPluginSupport.dylib
0x36843000 - 0x36844fff  CoreSurface armv7  <7850befd26b630f183ee326aaadd7b34> /System/Library/PrivateFrameworks/CoreSurface.framework/CoreSurface
0x36932000 - 0x36935fff  libcompiler_rt.dylib armv7  <b2c05d8601c13be884097192dca4e187> /usr/lib/system/libcompiler_rt.dylib
0x36939000 - 0x36951fff  iAd armv7  <9e9184ed0077317a97b879c3df950316> /System/Library/Frameworks/iAd.framework/iAd
0x3696f000 - 0x36a60fff  QuartzCore armv7  <a2afbe6483683d05ad51b106f98776e2> /System/Library/Frameworks/QuartzCore.framework/QuartzCore
0x36ae5000 - 0x36ae6fff  libsystem_sandbox.dylib armv7  <66e985f3eea03ef08afb7cf4c153f76e> /usr/lib/system/libsystem_sandbox.dylib
0x36b28000 - 0x36b2cfff  FTClientServices armv7  <21de970d7ebb3e7fb502a0a5451b0806> /System/Library/PrivateFrameworks/FTClientServices.framework/FTClientServices
0x36b2d000 - 0x36bb9fff  libsystem_c.dylib armv7  <f859ce1ad1773f0ba98d7c6e135b7697> /usr/lib/system/libsystem_c.dylib
0x36bba000 - 0x37378fff  WebCore armv7  <814351ff217e3425a8e532c2e2251f73> /System/Library/PrivateFrameworks/WebCore.framework/WebCore
0x3772c000 - 0x37745fff  libRIP.A.dylib armv7  <1828cddc5dd93c61afbefb59587d7f8a> /System/Library/Frameworks/CoreGraphics.framework/Resources/libRIP.A.dylib
0x37746000 - 0x3774afff  Marco armv7  <8dea3e558fe534ff868fc92e215ce53b> /System/Library/PrivateFrameworks/Marco.framework/Marco
0x37787000 - 0x37831fff  libBLAS.dylib armv7  <bf822cc1a3243ae7b104cf73ca22d352> /System/Library/Frameworks/Accelerate.framework/Frameworks/vecLib.framework/libBLAS.dylib
0x37848000 - 0x3788bfff  libcommonCrypto.dylib armv7  <95b49daf4cf038b6bea8010bba3a1e26> /usr/lib/system/libcommonCrypto.dylib
0x378b6000 - 0x37963fff  libxml2.2.dylib armv7  <58d47f064e0232119f4b838ad659f9c1> /usr/lib/libxml2.2.dylib
0x379a3000 - 0x379abfff  MobileWiFi armv7  <b76c3e9fb78234c392058250d4620e72> /System/Library/PrivateFrameworks/MobileWiFi.framework/MobileWiFi
0x379ae000 - 0x379b3fff  libsystem_dnssd.dylib armv7  <27bb5462450732e380f5a2c170546e93> /usr/lib/system/libsystem_dnssd.dylib
0x37a57000 - 0x37a9bfff  MobileCoreServices armv7  <757226927a873d5492be721908077b48> /System/Library/Frameworks/MobileCoreServices.framework/MobileCoreServices
0x37b12000 - 0x37b75fff  IMCore armv7  <6e26e99b9b5f3829a8486ffd8c64f0d2> /System/Library/PrivateFrameworks/IMCore.framework/IMCore
0x37b90000 - 0x37c29fff  EventKit armv7  <d67aa1508ee7306b8e2a45c76ffddff0> /System/Library/Frameworks/EventKit.framework/EventKit
0x37cea000 - 0x37cecfff  libCoreVMClient.dylib armv7  <d4d4aa3090c83e87bcb15ed00b93fd5c> /System/Library/Frameworks/OpenGLES.framework/libCoreVMClient.dylib
0x37d07000 - 0x37d0afff  CoreTime armv7  <a398de5ba1e43a11b7008e9bb5a7f6fe> /System/Library/PrivateFrameworks/CoreTime.framework/CoreTime 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T17:31:13.153

好吧，它抛出了一个异常`NSURL fileUrlWithPath`，它是从您的应用程序委托中调用的。如果您查看该方法的[文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSURL_Class/Reference/Reference.html)，它们列出了调用成功必须满足的几个条件：路径必须是有效的，而不是零。也许您客户的设备上不存在该路径。在调用该方法之前，您应该检查我提到的条件。

# line - 如何设置画线的最大长度？（Corona SDK）

> ID：10064760
> 
> 赞同：0
> 
> 时间：2012-04-08T17:22:58.500
> 
> 标签：line, draw, max, coronasdk

我目前正在做一些项目，它包含要绘制的线的选项。但我通常无法设置最大行长。我怎样才能做到这一点？

这是距离公式的代码（我认为）：

```
local function distanceBetween( e, prev ) 
        local distanceBetween = 0
    local dist_x = e.x - prevX ; local dist_y = e.y - prevY;
    local distanceBetween = math.sqrt((dist_x*dist_x) + (dist_y*dist_y))
    return distanceBetween
end 
```

这是一行代码：

```
local lines = {}
    local myLines = {}      
    local prevX,prevY

    local i = 1

    --prevX = x1, prevY = y1, e.x = x2, e.y = y2

    local function drawLine(e)
        distanceBetween = false
      if(e.phase == "began") then
        myLines[i] = {}
        prevX = e.x
        prevY = e.y
           elseif(e.phase == "moved")then
                if prevX then
                    myLines[i][#myLines[i] + 1] = display.newLine(prevX,prevY,e.x,e.y)
                    myLines[i][#myLines[i]]:setColor(255,255,0)
                    myLines[i][#myLines[i]].width = 5
                    myLines[i][#myLines[i]].alpha=1
                    myLines[i][#myLines[i]].myName = "Line"
                    dist_x = e.x - prevX
                    dist_y = e.y - prevY
                    physics.addBody(myLines[i][#myLines[i]], "static", { density = 1, friction = 0.5, bounce = 1.6, shape = {0, 0, dist_x, dist_y, 0, 0} } )
                    lineGroup:insert(myLines[i][#myLines[i]])

                    distanceBetween = true
                        if (distanceBetween > 50) then
                        drawLine("ended")
                        end
                    end -- this is how i think line should be maximized

                    prevX = e.x
                    prevY = e.y
           elseif(e.phase == "ended")then
              prevX = nil
              prevY = nil
              i = i + 1
              removeLine(myLines[#myLines-1])
           end
       end
       Runtime:addEventListener("touch",drawLine); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T13:44:42.213

编辑：这在我的 Corona 应用程序中运行良好。这是你想要做的吗？

```
local physics = require "physics"
physics.start()

local lines = {}
local lineGroup = display.newGroup()
local prevX,prevY
local isDrawing = false
local i = 0

local function distanceBetween(x1, y1, x2, y2)
    local dist_x = x2 - x1
    local dist_y = y2 - y1
    local distanceBetween = math.sqrt((dist_x*dist_x) + (dist_y*dist_y))
    return distanceBetween
end

local function drawLine(e)
    if(e.phase == "began") then
        prevX = e.x
        prevY = e.y
        isDrawing = true
        i = i + 1
    elseif(e.phase == "moved") then
        local distance = distanceBetween(prevX, prevY, e.x, e.y)
        if(isDrawing and distance < 100) then
            if(lines[i]) then lineGroup:remove(i) end
            lines[i] = display.newLine(prevX, prevY, e.x, e.y)
            lines[i]:setColor(255, 255, 0)
            lines[i].width = 5

            local dist_x = e.x - prevX
            local dist_y = e.y - prevY
            physics.addBody(lines[i], "static", { density = 1, friction = 0.5, bounce = 1.6, shape = {0, 0, dist_x, dist_y, 0, 0} } )
            lineGroup:insert(lines[i])
        end
    elseif(e.phase == "ended") then
        isDrawing = false
    end
end

Runtime:addEventListener("touch",drawLine) 
```

# git - 多个詹金斯/格里特项目

> ID：10064763
> 
> 赞同：2
> 
> 时间：2012-04-08T17:23:27.203
> 
> 标签：git, jenkins, gerrit

我们正在完成新 CI 系统的设置，包括用于自动化测试和代码审查的 git、gerrit 和 jenkins，我们发现了一个奇怪的情况：

我们有三个不同的 gerrit 项目，每个项目都有自己的 Jenkins 工作。我们使用[本](http://unethicalblogger.com/2009/12/07/code-review-with-gerrit-a-mostly-visual-guide.html)指南作为设置参考，一切都已安装并且工作正常。

我们的第一个项目已经设置好，并使用示例更改补丁进行了测试。Jenkins 被正确触发，通过了测试并按预期对构建进行了“验证”投票。到目前为止，一切都很好！

但是：当我们尝试设置第二个项目时，我们发现其中一个项目中的更改补丁会触发每个 jenkins 作业中的更改。例如：

假设我们有 GerritProjectA 和 GerritProjectB，每个都有 JenkinsProjectA 和 JenkinsProjectB。当向 GerritProjectA 提交更改时，JenkinsProjectA 和 JenkinsProjectB 都会被触发。此外，在构建之后的 gerrit 投票中有些东西混淆了：这是 sshd_log 在其中一个构建之后的信息（一个在 JenkinsProjectB 中）：

```
gerrit approve 10,3 --message '\''Build Failed 
    http://jenkins-server:8080/job/projectA/6/ : FAILURE

    http://jenkins-server:8080/job/projectB/59/ : Correcto'\!''\'' --
        verified -2 --code-review 0' 14ms 6ms 1 
```

如您所见，gerrit 批准命令与两个不同 jenkins 作业的信息混合在一起......

任何詹金斯工作的示例设置：

```
Repository URL: ssh://jenkins@gerrit-server:29418/projectA.git
Banches to build: $GERRIT_PATCHSET_REVISION
Build triggered by Gerrit event:
Project Type: Plain
Branches: Path ** 
```

软件版本：

```
Jenkins: 1.458
Gerrit plugin: 2.5.1
Gerrit: 2-3 rc0 
```

有任何想法吗？提前致谢！

多明戈

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T19:19:42.197

发现问题：

其中一个 Jenkins 作业（我们称之为 JenkinsJobB）在配置的“Gerrit Trigger”部分中没有模式中 git 存储库的名称。

如果你有多个 gerrit 项目的 jenkins 工作，你需要像这样设置 gerrit 触发器（至少在我的情况下）：

```
Type: Plain
Pattern: (repository name)

Branches
Type: Path
Pattern: ** (or the branch name if you just want to watch one). 
```

# asp.net-mvc-3 - MVC 应用程序无法加载程序集

> ID：10064767
> 
> 赞同：0
> 
> 时间：2012-04-08T17:23:48.600
> 
> 标签：asp.net-mvc-3

我有一个解决方案，它有一个引用一些第三方 .Net 程序集的类库。这些第三方程序集依赖于非 .Net 程序集。非 .Net 程序集不会复制到 bin 文件夹，这会导致错误“无法加载 xxx 程序集或其依赖项之一”。所以我创建了一个预构建事件将它们复制到 bin 文件夹中，这解决了问题。

然后，当我从同一个解决方案中的控制台项目引用我的项目时，我得到了同样的错误，所以我对控制台项目中的预构建事件做了同样的事情。再次，这解决了问题。

现在，当我在同一解决方案中从 MVC 应用程序引用类库项目时，我得到了同样的错误。但是使用在其他两种情况下工作的相同预构建事件并不能解决 Web 应用程序的问题。我试过同时使用开发服务器和 IIS，但得到了同样的错误。我还尝试在 Global.asax 的 Application_Start() 中向 AssemblyResolve 添加一个处理程序，以查看发生了什么，但它没有触发。

我是否需要将文件放在 web 应用程序的 bin 目录以外的地方？

赢 7、IIS 7、VS 2010、.Net 4、MVC 3

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T07:01:31.787

这在 ASP.NET 中不起作用的原因是因为在 ASP.NET 中托管程序集[将影子复制](http://msdn.microsoft.com/en-us/library/ms366723.aspx)到临时文件夹中，因此在运行时无法找到非托管库。要找到它们，它们需要存在于作为 PATH 环境变量一部分的文件夹中。或者将它们放在`c:\windows\System32\Inetsrv`文件夹中。

# python - 识别 IMAP 邮件文件夹（垃圾邮件、已发送...），文件夹名称因服务器而异

> ID：10064769
> 
> 赞同：1
> 
> 时间：2012-04-08T17:24:16.253
> 
> 标签：python, email, imap

我正在尝试使用 python 和 IMAPClient 构建一个简单的电子邮件客户端。问题是所有服务器的文件夹名称并不统一。

如果我将电子邮件标记为垃圾邮件，则必须将其从收件箱文件夹（？）移至垃圾邮件/垃圾文件夹。但我无法这样做，因为我不知道文件夹名称是什么（ Spam 或 INBOX.junk 或 [Gmail]/Spam )

其他电子邮件客户端如何使用不同的文件夹名称？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T17:28:43.210

我相信对于常见的电子邮件提供商，他们有一个关于该提供商默认使用的内容（gmail、hotmail、exchange 等）的映射。

另一种方法是让用户第一次决定，保留该帐户的设置，不再询问。

混合方法是尝试检测所有常见的变体，并使用您遇到的第一个有效变体。如果有更多那么一个简单地允许用户选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T20:18:25.880

首先是用于 Gmail 的**XLIST**命令（注意 Gmail 文件夹名称已本地化）： [http ://www.limilabs.com/blog/localized-gmail-imap-folders](http://www.limilabs.com/blog/localized-gmail-imap-folders)

其次，有一个名为**SPECIAL-USE**的 LIST 扩展，其工作方式类似： [https ://www.rfc-editor.org/rfc/rfc6154](https://www.rfc-editor.org/rfc/rfc6154)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-08T17:28:01.183

他们尝试了很多可能性，让您选择一种和/或创造一种；）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-08T17:28:28.647

Roundcube 在服务器和用户配置中都有这个。我不知道其他邮件客户端，但我猜他们要么使用启发式，要么只查看有哪些文件夹，要么使用有关特定 IMAP 服务器的知识。

# php - PHP包含不起作用

> ID：10064770
> 
> 赞同：4
> 
> 时间：2012-04-08T17:24:23.960
> 
> 标签：php

我不确定这解决起来有多简单，但我认为我做错了什么。我是 PHP 新手，请多多包涵。

当我开始学习 PHP 时，我总是将我所有的项目文件放在同一个文件夹中`index.php`，因此包括这样的所有内容：

```
<?php
include('./translation.php');
?> 
```

后来在学习的过程中，随着经验的积累和技能的提高，我不得不开始使用文件夹并将我的文件放入子文件夹中。我最终成功地将我的文件包含在以下内容中：

```
<?php
include('../translation.php');
?> 
```

当我决定开始使用子文件夹时，我的无故障编码发生了意想不到的转变。在将所有文件更深入地放入文件结构后，我震惊地发现我不能再包含它们了，使用：

```
<?php
include('.../translation.php');
?> 
```

现在我迷路了。我做错了什么？我是否理解我不能在项目中包含比 2 个目录更深的文件？我应该开始使用不同的文件系统吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-08T17:26:06.867

你的概念不正确。

*   `.`代表当前目录
*   `..`表示父目录

这些是文件系统跟踪文件和浏览深度的方式。

但是你不能`...`用来改变目录。随着你的深入，你必须使用

例如：

```
include('../../translation.php'); 
```

包括文件，在当前目录之外的两个级别。这可能是你想要做的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-08T17:26:26.027

包括应该是：

```
<?php
include('../../translation.php');
?> 
```

每个“升级”级别都需要自己的`../`.

例如，如果您有以下目录：

```
a
   a1
      filex.php
   a2
b
   b1
      filey.php 
```

如果在 filex.php 中，您想包含 filey.php，您将执行以下操作：

```
<?php
include('../../b/b1/filey.php');
?> 
```

*上/下两次，下/下两次*

基本上，任何时候你想“降低”一个级别/进入一个文件夹，你给出文件夹的名称，后跟一个正斜杠。但是要“向上”或离开当前文件夹（到当前文件夹的父文件夹），您给出`..`后跟正斜杠

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-08T17:32:50.983

如果你想更深入（子文件夹的子文件夹），只需使用`../../`

```
include("../../translation.php"); 
```

但是，如果您的项目是中型或大型，我宁愿建议您定义绝对路径。在您的 index.php 或您包含的任何文件中，定义类似`SITE_ROOT`or的内容`INCLUDES_ROOT`。

```
define("SITE_ROOT", dirname(__FILE__)); 
```

然后按需使用它。

```
include(SITE_ROOT."/../../translation.php"); 
```

如果您包含来自不同文件夹的文件，这非常有用

也就是说，假设你有这个文件夹结构

*   根
    *   包括/
        *   引导.php
    *   翻译
        *   en.php
    *   阿贾克斯/

        *   ajax2/
            *   ajaxfile.php
    *   索引.php

* * *

案例1：（失败）

index.php 包括

```
<?php
include("includes/boot.php"); 
```

ajax/ajax2/ajaxfile.php 包括

```
<?php
include("../../includes/boot.php"); 
```

包括/boot.php 包括

```
<?php 
include("translations/en.php"); // from index.php it works but from ajax/ajax2/ajaxfile.php it searches for wrong file 
```

CASE2：（通过）

ajax/ajax2/ajaxfile.php 和 index.php 与 CASE1 内容相同

包括/boot.php 包括

```
<?php
define("INCLUDES_ROOT", dirname(__FILE__));
include(INCLUDES_ROOT."/../translations/en.php"); 
```

它通过了，因为`INCLUDES_ROOT`确保整个包含指向正确的目录！

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-04-08T17:28:47.927

让我们假设这个文件夹树。

```
-> site
      -> public_html (Inside the site folder)
            ->  index.php (Inside the public_html folder)
      -> translation.php (Inside the site folder) 
```

在你的 index.php 中你只需要使用`include "../translation.php";`

如果 translation.php 与站点文件夹位于同一文件夹中，则使用`include "../../translation.php";`

如果你的 translation.php 和 index.php 在同一个文件夹中，你只需要像这样包含：`include "translation.php";`

# xslt - 在 xslt 中增加一个整数

> ID：10064772
> 
> 赞同：2
> 
> 时间：2012-04-08T17:24:31.683
> 
> 标签：xslt, arithmetic-expressions

有一个标题相似但问题主体完全不同的问题：[How to increment a XSL integer variable](https://stackoverflow.com/q/7952572/430766)

我得到一个`$level`传递给模板的参数并希望在 上应用模板`$level + 1`，同时`$level`保证始终是严格的正整数。我现在有这个计算，但它看起来很糟糕。必须有更好的方法：

```
<xsl:with-param name="level" select="ceiling(number(concat($level,'.9')))" /> 
```

这行得通，但我想知道你是否可以直接使用[xpath:sum](http://www.w3.org/TR/xpath/#function-sum)，但我很挣扎，因为文字`1`本身不是一个节点。

那么，有没有更好的表达方式`ceiling(number(concat($level,'.9')))`呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T18:47:36.933

> ```
> <xsl:with-param name="level" select="ceiling(number(concat($level,'.9')))" /> 
> ```

**只需使用**：

```
<xsl:with-param name="level" select="$level+1"/> 
```

# javascript - innerhtml 在博客上不起作用

> ID：10064773
> 
> 赞同：0
> 
> 时间：2012-04-08T17:24:48.647
> 
> 标签：javascript, ajax, innerhtml, blogger

我正在研究一个简单的投票系统。当两个文件在一起（本地）时，它工作正常。

但是，当我在博客上发布它时，它无法输出结果。（点击投票在虚拟主机上注册，但结果不显示！）

这是我的代码：

```
<script type="text/javascript">
function getVote(int)
{
if (window.XMLHttpRequest)
  {// code for IE7+, Firefox, Chrome, Opera, Safari
  xmlhttp=new XMLHttpRequest();
  }
else
  {// code for IE6, IE5
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }
xmlhttp.onreadystatechange=function()
  {
  if (xmlhttp.readyState==4 && xmlhttp.status==200)
    {
    document.getElementById("poll").innerHTML=xmlhttp.responseText;
    }
  }
xmlhttp.open("GET","http://pacontest.eu.pn/poll_vote.php?vote="+int,true);
xmlhttp.send();
}
</script>
<div id="poll">
<h3>Do you like this?</h3>
<form>
Yes:
<input type="radio" name="vote" value="0" onclick="getVote(this.value)" />
No:
<input type="radio" name="vote" value="1" onclick="getVote(this.value)" />
</form>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T17:37:23.913

这不是`innerHTML`不工作。这是您对外部站点的调用。您不能使用 XMLHttpRequest 从域外获取资源：这称为*跨域限制*，并且内置于浏览器规范中。

当 PHP 托管在与它的代码相同的域上时，`GET`它就可以工作，因为那不是跨域的。

*您可以通过在您的域上使用代理脚本*来绕过限制：页面从该服务器端脚本请求结果，该脚本从真实位置获取结果，将该结果返回给浏览器。

这不太可能成为 Blogger 的选项，因此 Blogger 提供[了他们自己的投票小部件](http://support.google.com/blogger/bin/answer.py?hl=en&answer=42077)。

# java - android系统类编译

> ID：10064774
> 
> 赞同：3
> 
> 时间：2012-04-08T17:24:53.830
> 
> 标签：java, android, compiler-construction, dalvik

类似系统类的字节码`android.os.Looper`只是一个存根。例如，`android.os.Looper.loop()`from`android.jar`包含以下字节码：

```
public static final void loop();
  Code:
   0:   new     #2; //class java/lang/RuntimeException
   3:   dup
   4:   ldc     #3; //String Stub!
   6:   invokespecial   #4; //Method java/lang/RuntimeException."<init>":(Ljava/lang/String;)V
   9:   athrow 
```

但在 AOSP 中，我可以看到执行消息分发的真实源代码（请参阅 参考资料`AOSP_ROOT/frameworks/base/core/java/android/os/Looper.java`）。那么这个类究竟是如何被android系统处理的呢？真正的代码是在将系统编译`android.jar`成 dex 文件时修补的，还是在 Dalvik VM 的运行时发生的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-08T17:50:55.330

`android.jar`您编译代码的对象仅包含具有公共（常量）字段和公共方法的公共类，但所有这些方法都不包含任何实现。所有具有其他返回类型的方法都会`void`抛出“存根！” `RuntimeException`.

具有实际实现的运行时库仅在电话设备或模拟器中与您的应用程序链接。

# html - 将 MS 访问表单嵌入到在线网站

> ID：10064779
> 
> 赞同：1
> 
> 时间：2012-04-08T17:25:25.753
> 
> 标签：html, database, ms-access

我有一个只有 HTML 的在线网站，我不愿意使用除 Javascript 之外的任何其他编程语言。我需要做的就是将我计算机上的 Microsoft Access 数据库连接到在线托管的表单，这样当在线提交信息时，它会在我下次打开文件时在 MS 访问中更新。这可能吗？怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T20:09:40.153

我认为你正在尝试做的事情是非常不切实际的。您需要使用服务器端 Javascript 将数据插入数据库，最好是 SQL Server，然后您必须编写某种代码将 SQL Server 数据库同步到 Access 数据库。

或者，您可以设置您的 Access 数据库，使其使用 ODBC 链接表或 ADO 连接到与您的网站相同的 SQL Server 实例。我不能真正推荐这个，特别是如果您在 Access 数据库中拥有的数据是您不想公开的任何数据。此外，确实不建议使用 MS Access 通过 WAN/Internet 访问数据库，尽管它当然可以做到，只要您不处理大量数据、大量记录等。

> 我不愿意使用除 Javascript 之外的任何其他编程语言。

为什么你不愿意使用别的东西？如果您不敞开心扉使用正确的工具来完成正确的工作，我认为您将一事无成。

下面的内容可能会帮助您从 Javascript 连接到 SQL： [如何在浏览器中从 JavaScript 连接到 SQL Server 数据库？](https://stackoverflow.com/questions/857670/how-to-connect-to-sql-server-database-from-javascript)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T22:52:30.523

事实证明，你可以用零代码做到这一点。如果您使用 Office 365，并发布 Access Web 表单。

输入 Access Web 表单的任何信息都将自动出现在您的本地数据库中。从网站同步数据并将记录下拉到本地副本可以自动进行，无需编写任何代码。事实上，当您启动客户端应用程序时，同步会自动开始。（它在断开模式下运行）。您在客户端应用程序中输入的任何记录也将同步并出现在网站上。

因此，您可以使用 Access 并编写零代码，并且内置了这种双向同步功能。

您需要 Access 2010 和 SharePoint 2010（企业版），或者您可以使用 Office 365 和每月 6 美元的 p1 计划，该计划也支持 Access Web 发布。

但是，我怀疑用户登录和安全问题在这里可能是一个更大的问题，因此从用户登录的角度来看，Office 365 可能不正确。您可以以每月 6 美元的基本费用邀请最多 50 位用户访问该站点，但该站点的所有用户都需要登录（这可能是由于被邀请访问该站点）。

我的两个视频在这里展示了这个设置：

[http://www.youtube.com/playlist?list=PL27E956A1537FE1C5&feature=plcp](http://www.youtube.com/playlist?list=PL27E956A1537FE1C5&feature=plcp)

# html - HTML 中带有导航栏的行文本

> ID：10064780
> 
> 赞同：0
> 
> 时间：2012-04-08T17:25:32.463
> 
> 标签：html, css

我在网站标题下方有一个导航栏，但我想将导航栏中的第一个和最后一个项目与标题的开头和结尾对齐。我没有实时预览，但我附上了一张图片。我可以让它在一个浏览器中排列，但是当我在另一个浏览器中打开它时，它又关闭了。有没有一种简单的方法来排列文本以便它适用于所有内容？谢谢你

![截屏](../Images/d8b44e37745763c812ccb6f43ac25f53.png)

HTML：

```
<body onload="play()">
    <div class="heading">UPRISING</div>
    <div class="container_12"> 
       <div id="topnav" align="center">
         <ul id="list-nav">
           <li><a href="home.html">HOME</a></li>
           <li><a href="about.html">ABOUT</a></li>
           <li><a href="trailer.html">TRAILER</a></li>
           <li><a href="stills.html">STILLS</a></li>
           <li><a href="news.html">NEWS</a></li>
           <li><a href="contact.html">CONTACT</a></li>
           <!-- <li><a href="distribution.html">DISTRIBUTION</a></li> -->
         </ul>
       </div>

<!-- START OF CONTAINER -->

  <div class="trailer">
    <img id="imgHolder" />    
  </div>
 </div> <!-- END OF CONTAINER 12 --> 
```

CSS：

```
#topnav li {
  margin-right: 110px;
}

#topnav li:nth-last-child(1) {
  margin-right: 0px;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T17:45:05.353

您可以与`text-align: justify`

查看[演示](http://jsfiddle.net/SjHY5/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T17:51:26.293

这是一种需要好的旧表的问题。

```
<table id="list-nav">
     <tr>
           <td><a href="home.html">HOME</a></td>
           <td><a href="about.html">ABOUT</a></td>
           <td><a href="trailer.html">TRAILER</a></td>
           <td><a href="stills.html">STILLS</a></td>
           <td><a href="news.html">NEWS</a></td>
           <td><a href="contact.html">CONTACT</a></td>          
     </tr>
</table> 
```

宽度将被均匀分布的问题解决。

或者...

```
#list-nav li:last-child { text-align: right; } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-08T17:27:26.587

为列表项设置固定宽度。将第一个向左对齐，最后一个向右对齐，中间的所有应该居中对齐。这样，您就不会任由字体渲染器摆布。

使用 CSS 更新：

```
#topnav li {
    text-align: center;
    width: Xpx; /* X is total width divided by number of list items */
}
#topnav li:first-child {
    text-align: left;
}
#topnav li:last-child {
    text-align: right;
} 
```

# javascript - 使用页面跳转（单页网站）时如何更改css class="current"？

> ID：10064788
> 
> 赞同：1
> 
> 时间：2012-04-08T17:26:11.370
> 
> 标签：javascript, jquery, css

早晨，

我一定是在问谷歌所有错误的问题，因为我找不到类似的东西。

我有一个标准的导航列表，但我正在使用**页面跳转**，因为我想要一个网页。

```
<ul>
<li><a href="#livestream">Livestream</a></li>
<li><a href="#media">Media</a></li>
<li><a href="#crew">Crew</a></li>
<li><a href="#services">Services</a></li>
<li><a href="#contact">Contact</a></li>
</ul> 
```

但是我一生都无法弄清楚在使用页面跳转时**如何使 class="current" 。**我已经尝试过[这个 jquery](http://wiki.shopify.com/How_to_Style_Active_link_%28link_to_current_page%29_with_JavaScript_and_CSS)，因为它似乎是我正在寻找的东西，但它什么也没做。我认为它不适用于#links。

有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-08T17:31:40.630

如果要将当前类添加到`a`已单击的类中，可以这样完成：

```
// Wait for the DOM to be ready
$(function(){
   // Add click-event listener
   $("li a").click(function(){
      // Remove the current class from all a tags
      $("li a").removeClass("current");
      // Add the current class to the clicked a
      $(this).addClass("current");
   });
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-08T17:30:43.093

你想把 class=current 放在什么上面？

单击时将其应用于 A 并从所有其他链接中删除的逻辑：

```
$('a').click(function(){
  //remove from other links, they're no longer current
  $('a').removeClass('current'); 
  //this is now the current active link.
  $(this).addClass('current');
}); 
```

这就是你要问的，我相信。如果您有任何问题，请告诉我。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-08T18:05:49.573

当我们谈论锚点时，您应该`.preventDefault()`确保不会触发锚点默认操作。

## *[jsBin 演示](http://jsbin.com/ubedar/2/edit)*

```
$('ul#nav li:eq(0) a').addClass('current');

$('ul li a').on('click',function(e){ // assign 'e' event
  e.preventDefault(); // prevent default anchor action

  $('.current').toggleClass();
  $(this).addClass('current');

  var goToPage = $(this).attr('href'); // get the link href 
  var pagePos = $(goToPage).position().top; 
  $('body').stop().animate({scrollTop: pagePos}, 2000);  
}); 
```

# java - Java中的原始类型十进制 - 用户输入

> ID：10064791
> 
> 赞同：2
> 
> 时间：2012-04-08T17:26:26.737
> 
> 标签：java

我正在做一个练习，用户必须使用 Java 编程语言输入带符号的四位十进制数，例如`+3364`, `-1293`,等。`+0007`

据我所知，Java 不支持原始类型小数。
我的问题是：

1.  如何输入上述数字？
2.  如何为上述数字提供 +、- 号？

更新

下面的代码显示了一个片段，它要求用户输入一个有效的数字（无字符） - 一元 + 使用下面的代码不起作用！有没有办法解决它。

```
public int readInt() {
    boolean continueLoop = true;
    int number = 0;
    do {
        try {
            number = input.nextInt();
            continueLoop = false;
        } // end try
        catch (InputMismatchException inputMismatchException) {
            input.nextLine();
            /** discard input so user can try again */
            System.out.printf("Invalid Entry ?: ");
        } // end of catch
    } while (continueLoop); // end of do...while loop

    return number;
} // end of method readInt() 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-08T17:32:25.187

Java 有 8 种原始（非对象/非引用）类型：

*   `boolean`
*   `char`
*   `byte`
*   `short`
*   `int`
*   `long`
*   `float`
*   `double`

如果“十进制”是指“以 10 为底的有符号整数”，那么是的，Java 支持通过`byte`、`short`和. 您使用哪一个取决于输入范围，但根据我所见，这是最常见的。`int``long``int`

如果用“十进制”表示“具有绝对精度的以 10 为基数的有符号浮点数”，类似于 C# 的`Decimal`类型，那么不，Java 没有。

如果`Scanner.nextInt`像我一样为您抛出错误，那么以下应该可以工作：

```
/* Create a scanner for the system in. */
Scanner scan = new Scanner(System.in);
/*
 * Create a regex that looks for numbers formatted like:
 * 
 * A an optional '+' sign followed by 1 or more digits; OR A '-'
 * followed by 1 or mored digits.
 * 
 * If you want to make the '+' sign mandatory, remove the question mark.
 */
Pattern p = Pattern.compile("(\\+?(\\d+))|(\\-\\d+)");

/* Get the next token from the input. */
String input = scan.next();
/* Match the input against the regular expression. */
Matcher matcher = p.matcher(input);
/* Does it match the regular expression? */
if (matcher.matches()) {
    /* Declare an integer. */
int i = -1;
/*
 * A regular expression group is defined as follows:
 * 
 * 0 : references the entire regular expression. n, n != 0 :
 * references the specified group, identified by the nth left
 * parenthesis to its matching right parenthesis. In this case there
 * are 3 left parenthesis, so there are 3 more groups besides the 0
 * group:
 * 
 * 1: "(\\+?(\\d+))"; 2: "(\\d+)"; 3: "(\\-\\d+)"
 * 
 * What this next code does is check to see if the positive integer
 * matching capturing group didn't match. If it didn't, then we know
 * that the input matched number 3, which refers to the negative
 * sign, so we parse that group, accordingly.
 */
if (matcher.group(2) == null) {
    i = Integer.parseInt(matcher.group(3));
} else {
    /*
     * Otherwise, the positive group matched, and so we parse the
     * second group, which refers to the postive integer, less its
     * '+' sign.
     */
        i = Integer.parseInt(matcher.group(2));
    }
    System.out.println(i);
} else {
    /* Error handling code here. */
} 
```

或者，您可以这样做：

```
 Scanner scan = new Scanner(System.in);
    String input = scan.next();
    if (input.charAt(0) == '+') {
        input = input.substring(1);
    }
    int i = Integer.parseInt(input);
    System.out.println(i); 
```

基本上只要删除“+”号（如果有的话）然后解析它。如果您要进行编程，学习正则表达式非常有用，这就是我给您的原因。但是如果这是家庭作业，你担心如果你使用超出课程范围的东西会引起老师的怀疑，那么千万不要使用正则表达式的方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-08T17:28:47.637

使用[扫描仪](http://docs.oracle.com/javase/6/docs/api/java/util/Scanner.html)：

```
Scanner scan = new Scanner(System.in);
System.out.print("Enter 3 integer numbers: ");
int a = scan.nextInt();
int b = scan.nextInt();
int c = scan.nextInt();
System.out.print("You have entered: " + a + " | " + b + " | " + c); 
```

**输出：**

> 输入 3 个整数：+3364 -1293 +0007
> 您已输入：3364 | -1293 | 7

* * *

**附注：**当您使用前导 0 和整数（如 ）时要小心`0007`，因为它在 Java 中被解释为八进制数而不是十进制数。所以，`010`实际上`8`是十进制的，而不是`10`.

```
System.out.print(010); 
```

**输出：**

```
8 
```

* * *

**更新：**

请注意，`Scanner`要求符号`+`and`-`必须与数字类似`+5432`and `-5432`，而不是 as `+ 5432`nor `- 5432`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-08T17:36:48.697

您可以使用[`Scanner`](http://docs.oracle.com/javase/7/docs/api/java/util/Scanner.html)该类来读取值。您将不得不做更多的工作以确保 + 不是您转换为 Integer 的一部分（检查[`Integer`](http://docs.oracle.com/javase/7/docs/api/java/lang/Integer.html)包装类），因为`Scanner`不会接受 + 作为一元运算符（它适用于负数）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-08T17:34:45.290

看一下定点数。[DecimalFormat](http://docs.oracle.com/javase/6/docs/api/java/text/DecimalFormat.html)类可以为您设置格式。

# java - 内存泄漏 - 调试器和内存分析器不一致

> ID：10064794
> 
> 赞同：2
> 
> 时间：2012-04-08T17:27:19.280
> 
> 标签：java, android, eclipse, memory-management, memory-leaks

我的 android 游戏中存在内存泄漏 - 我已设法将其缩小到某个对象，该对象具有要在纹理上渲染的对象列表。这个对象每次绘制时都会清除列表 - 所以我无法弄清楚它是如何设法获取列表中的数千个元素的。

我检查了调试器，它没有所有这数千个元素——通常是我所期望的大约 2-20 个……只有当我启用渲染到纹理时，游戏才会逐渐变慢。

这是 Memory Analyzer 的图片，显示了 6,111 个项目：

[内存分析器](http://i1135.photobucket.com/albums/m632/hanvyj/memoryleak.png)

这是显示 2 的调试器的图片：

[调试器](http://i1135.photobucket.com/albums/m632/hanvyj/memoryleak2.png)

谁能帮我找出问题所在？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T19:01:16.487

看起来你可以调用 System.gc(); 试图让垃圾收集器发挥它的魔力。搏一搏。

# python - 你能让python脚本在导入时的行为与直接运行时不同吗？

> ID：10064796
> 
> 赞同：2
> 
> 时间：2012-04-08T17:27:23.273
> 
> 标签：python

我经常需要编写数据解析脚本，并且我希望能够以两种不同的方式运行它们：作为模块和作为独立脚本。因此，例如：

```
def parseData(filename):
    # data parsing code here
    return data

def HypotheticalCommandLineOnlyHappyMagicFunction():
    print json.dumps(parseData(sys.argv[1]), indent=4) 
```

这里的想法是在另一个python脚本中我可以调用`import dataparser`并可以`dataParser.parseData`在我的脚本中访问，或者在命令行上我可以运行`python dataparser.py`它会运行我`HypotheticalCommandLineOnlyHappyMagicFunction`并将数据作为json分流到stdout。有没有办法在python中做到这一点？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-08T17:28:47.657

执行此操作的标准方法是保护仅应在脚本被独立调用时运行的代码

```
if __name__ == "__main__":
    # Your main script code 
```

如果模块被导入，之后的代码`if`将不会运行。

特殊变量包含当前模块的`__name__`名称作为字符串。如果您的文件被调用`glonk.py`，那么`__name__`如果`"glonk"`文件作为模块导入，并且`"__main__"`文件作为独立脚本运行，则将是。

# facebook - Facebook iFrame APP 无法在 IE 中运行，可在所有其他浏览器上运行

> ID：10064798
> 
> 赞同：0
> 
> 时间：2012-04-08T17:27:23.803
> 
> 标签：facebook, internet-explorer, iframe

因此，在 Internet Explorer 的 iFrame 中加载此页面时，我得到一个空白页面，其他所有浏览器都可以正常工作。

我也尝试过使用其他人建议的 p3p 标头，但无济于事。

```
<?php
require ("connect.php");
require ("config.php");
require ("fb_config.php");
?>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
  <head>
  <title>Login handler</title>
  <meta http-equiv="content-type" content="text/html; charset=iso-8859-1">
  <link rel="stylesheet" href="css/login.css" type="text/css">
  </head>
  <body>

  <?//=$user?>
  <?php

if($user == 0) {
echo "You are not logged into facebook. Nice try.";
}else{

$query = "SELECT id,fb_id,login_ip,login_count,activated,sitestate FROM login WHERE fb_id='".mysql_real_escape_string($user)."'"; 
$result = mysql_query($query) or die(mysql_error());
$row = mysql_fetch_array($result);

        if (mysql_num_rows($result) == 0) {
    $sql = "INSERT INTO login SET id = '', fb_id ='" .mysql_real_escape_string($user). "', name = '" .rand(10000000000000000,99999999999999999999). "', signup =NOW() , password = '" .mysql_real_escape_string($pass). "', state = '0', mail = '" .mysql_real_escape_string($_POST['mail']). "',location='".mysql_real_escape_string($randomlocation)."',location_start='".mysql_real_escape_string($randomlocation)."', signup_ip='".mysql_real_escape_string($_SERVER['REMOTE_ADDR'])."',ref='".mysql_real_escape_string($_POST['ref'])."', activation_id = '" .mysql_real_escape_string($activation_link). "',activated='2', killprotection = '$twodayprot',gender='" .mysql_real_escape_string($_POST["gender"]). "'";
    $res = mysql_query($sql);
    }

        //if($row['fb_id']  != $user){
        //echo "Your facebook ID: $user is NOT in the MW DB.";
        //exit();
        //}else{

        if(empty($row['login_ip'])){
        $row['login_ip'] = $_SERVER['REMOTE_ADDR'];
        }else{

        $ip_information = explode("-", $row['login_ip']);

        if (in_array($_SERVER['REMOTE_ADDR'], $ip_information)) {   
        $row['login_ip'] = $row['login_ip'];
        }else{  
        $row['login_ip'] = $row['login_ip']."-".$_SERVER['REMOTE_ADDR'];
        }
        }

$update_login = mysql_query("UPDATE login SET login_count=login_count+'1' WHERE name='".mysql_real_escape_string($_POST['username'])."'")
or die(mysql_error());

$_SESSION['user_id'] = $row['id'];

$result = mysql_query("UPDATE login SET userip='".mysql_real_escape_string($_SERVER['REMOTE_ADDR'])."',login_ip='".mysql_real_escape_string($row['login_ip'])."',login_count='0' WHERE id='".mysql_real_escape_string($_SESSION['user_id'])."'")
or die(mysql_error());

if ($row['sitestate'] == 0){
header("location: home.php");
} elseif ($row['sitestate'] == 2) {
header("location: killed.php?id={$row['id']}&encrypted={$row['password']}");
} else {
header("location: banned.php?id={$row['id']}&encrypted={$row['password']}");
}

}// id check.

?>
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T16:52:15.417

您可能缺少 p3p 标头，导致您的浏览器不接受您网站上来自 Facebook 的 cookie。

请参阅[http://www.hanselman.com/blog/TheImportanceOfP3PAndACompactPrivacyPolicy.aspx](http://www.hanselman.com/blog/TheImportanceOfP3PAndACompactPrivacyPolicy.aspx)

或[http://www.admon.org/how-to-implement-p3p-http-headers-for-cross-site-cookies/](http://www.admon.org/how-to-implement-p3p-http-headers-for-cross-site-cookies/)了解更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T17:57:04.410

尝试删除引用您的外部 css 文件的行并查看您的页面是否加载？

我刚刚解决了我遇到的类似问题。我设置了正确的 p3p 标头，并将问题缩小到 css。

有问题的 css 样式是`position:relative;`html,body 元素上的 - 删除它解决了 Facebook 将我的 iframe 显示为空白页面的问题。

如果删除所有 CSS 会在您的页面上显示某些内容，那么您可能需要逐步添加 CSS 以找出罪魁祸首，因为其他类型的 CSS 样式可能会破坏页面。

# git - Git无法清除干净

> ID：10064801
> 
> 赞同：8
> 
> 时间：2012-04-08T17:27:45.387
> 
> 标签：git, repository

当我输入时，`git clean -f`我收到以下错误消息：

```
>     Removing .__afs043
>     warning: failed to remove .__afs043
>     Removing .__afs0F7D
>     warning: failed to remove .__afs0F7D
>     Removing .__afs1359
>     warning: failed to remove .__afs1359
>     Removing .__afs1421
>     warning: failed to remove .__afs1421
>     Removing .__afs243A
>     warning: failed to remove .__afs243A
>     Removing .__afs2745
>     warning: failed to remove .__afs2745
>     Removing .__afs3454
>     warning: failed to remove .__afs3454
>     Removing .__afs3D12
>     warning: failed to remove .__afs3D12
>     Removing .__afs4A5E
>     warning: failed to remove .__afs4A5E
>     Removing .__afs4FB8
>     warning: failed to remove .__afs4FB8
>     Removing .__afs5D5B
>     warning: failed to remove .__afs5D5B
>     Removing .__afs5E1D
>     warning: failed to remove .__afs5E1D
>     Removing .__afs6086
>     warning: failed to remove .__afs6086
>     Removing .__afs6328
>     warning: failed to remove .__afs6328
>     Removing .__afs6D97
>     warning: failed to remove .__afs6D97
>     Removing .__afs7562
>     warning: failed to remove .__afs7562
>     Removing .__afs7C22
>     warning: failed to remove .__afs7C22
>     Removing .__afs8148
>     warning: failed to remove .__afs8148
>     Removing .__afs865F
>     warning: failed to remove .__afs865F
>     Removing .__afs8CE5
>     warning: failed to remove .__afs8CE5
>     Removing .__afs9295
>     warning: failed to remove .__afs9295
>     Removing .__afs938C
>     warning: failed to remove .__afs938C
>     Removing .__afs9439
>     warning: failed to remove .__afs9439
>     Removing .__afsA5EC
>     warning: failed to remove .__afsA5EC
>     Removing .__afsA859
>     warning: failed to remove .__afsA859
>     Removing .__afsB044
>     warning: failed to remove .__afsB044
>     Removing .__afsB9EF
>     warning: failed to remove .__afsB9EF
>     Removing .__afsC47E
>     warning: failed to remove .__afsC47E
>     Removing .__afsCF6E
>     warning: failed to remove .__afsCF6E
>     Removing .__afsD42
>     warning: failed to remove .__afsD42
>     Removing .__afsD50F
>     warning: failed to remove .__afsD50F
>     Removing .__afsE6B9
>     warning: failed to remove .__afsE6B9
>     Removing .__afsE9F3
>     warning: failed to remove .__afsE9F3
>     Removing .__afsF0DA
>     warning: failed to remove .__afsF0DA
>     Removing .__afsF9EA
>     warning: failed to remove .__afsF9EA 
```

从命令。但是我需要删除这些文件才能签出我的分支，因为我收到以下消息：

```
Error: The following untracked working tree files would be overwritten
by checkout:
          .__afs4FB8
          .__afs6D97
          .__afs865F
          .__afs9439
          .__afsF9EA Please move or remove them before you can switch branches. 

Aborting 
```

我该怎么办？？！我需要能够快速结帐和更新这个分支！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2016-05-04T14:18:36.233

试试`sudo git clean -f`。您可能需要提升权限。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-08T17:35:47.223

由于`git clean`拒绝删除这些未跟踪的文件，请尝试通过执行手动删除它们

```
rm -f ._afs4FB8 ._afs6D97 ._afs865F ._afs9439 .__afsF9E 
```

这应该删除文件或为您提供更有用的错误消息。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-02-11T02:35:33.303

您需要检查文件和包含文件夹的权限。如果文件具有写权限，则文件夹很可能没有。

`chmod u+w .`在文件夹内。然后`git clean --force -d`应该工作。

> -d
> 通常，当`<path>`指定 no 时， git clean 不会递归到未跟踪的目录，以避免删除太多。指定 -d 使其也递归到此类目录中...
> 
> 来源：`git help clean` 块引用

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-08T17:56:35.507

*   转到另一个（空）文件夹
*   运行 git init 。
*   在那里结帐您的分支机构

# java - Java LWJGL Slick UnicodeFont 起作用了

> ID：10064804
> 
> 赞同：4
> 
> 时间：2012-04-08T17:28:06.097
> 
> 标签：java, lwjgl

我在屏幕上显示文本时遇到了一些问题，过去我只是使用基于精灵的文本，但是这次我想使用 UnicodeFont。TrueTypeFonts 绘制完美，但已弃用。

当我尝试绘制 UnicodeFont 时，它似乎受到我使用的字符的影响。例如，如果我绘制字符串“stackoverflow”文本和框将绘制，如果我尝试“stackoverflowcom”框将不会绘制。

我的源代码的准系统版本如下。在 ~74 行，我调用 uniFont.drawString(0, 0,"stackoverflow"); ，如果 com（或其他任何东西）将不会绘制该框。

编辑。> 您可以使用布尔 tryUnicode 在 true 和 unicode 之间进行交换。

我尝试将它们粘贴到单独的显示列表中，但没有任何区别。

任何人都可以提供有关为什么会发生这种情况的见解吗？

谢谢

 `````
import java.awt.Font;

import org.lwjgl.LWJGLException;

import org.lwjgl.opengl.Display;
import org.lwjgl.opengl.DisplayMode;
import org.lwjgl.opengl.GL11;

import org.newdawn.slick.SlickException;
import org.newdawn.slick.TrueTypeFont;
import org.newdawn.slick.UnicodeFont;
import org.newdawn.slick.font.effects.ColorEffect;

import static org.lwjgl.opengl.GL11.*;

public class Game {

    private UnicodeFont uniFont;
    private TrueTypeFont truFont;

    public static void main(String[] argv) {    

        Game game = new Game();
        game.start(); 
    }

    public void start()
    {

        initGL(600, 600);
        initFonts();
        while(!Display.isCloseRequested()) //display not closed
        {
            render();
            Display.update();
            Display.sync(60);
        }
        Display.destroy();
        System.exit(0);

    }

    private void render()
    {

        GL11.glClear(GL11.GL_COLOR_BUFFER_BIT);
        GL11.glClear(GL11.GL_DEPTH_BUFFER_BIT);

        glPushMatrix(); 
            glTranslatef(-0.25f,0.7f,0);
                glScalef(0.001f,-0.001f,0.001f);
                glEnable(GL_BLEND);
                boolean tryUnicode = false;
                if(tryUnicode)
                {
                    uniFont.drawString(0, 0,"stackoverflow");
                                            //EDIT.. glDisable texture is required here.
                }else
                {
                    glScalef(1.1f,1.1f,1f);
                    truFont.drawString(0, 0, "stackoverflow truFont");
                }
                glDisable(GL_BLEND);                    
        glPopMatrix();

        glPushMatrix();
            glTranslatef(-0.25f,0,0);
                glColor3f(0.5f, 0f, 0f);
                    glBegin(GL_TRIANGLE_STRIP); 
                        glVertex3f(0, 0,0.0f);
                        glVertex3f(0.5f, 0,0f);
                        glVertex3f(0f,0.5f,0f);
                        glVertex3f(0.5f, 0.5f,0f);
                    glEnd();
        glPopMatrix();
    }

    private void initGL(int width, int height) {
        try {
            Display.setDisplayMode(new DisplayMode(width,height));
            Display.create();
            //Display.setVSyncEnabled(true);
        } catch (LWJGLException e) {
            e.printStackTrace();
            System.exit(0);
        }

        glEnable(GL11.GL_TEXTURE_2D);
        glShadeModel(GL11.GL_SMOOTH);        
        glEnable(GL11.GL_DEPTH_TEST);
        glDisable(GL11.GL_LIGHTING);                    

        glClearColor(0.0f, 0.0f, 0.0f, 0.0f);                
        glClearDepth(1);                                       

        glEnable(GL_BLEND);
        glBlendFunc(GL11.GL_SRC_ALPHA, GL11.GL_ONE_MINUS_SRC_ALPHA);
        glDisable(GL_BLEND);
        glMatrixMode(GL11.GL_PROJECTION);
        glLoadIdentity();
        glOrtho(-1, 1, -1, 1, -1, 1);
        glMatrixMode(GL11.GL_MODELVIEW);

    }

    private void initFonts() {

        Font awtFont = new Font("", Font.PLAIN,55);
        truFont = new TrueTypeFont(awtFont, true); 

        uniFont = new UnicodeFont(awtFont, 128, false, false);
        uniFont.addAsciiGlyphs();
        uniFont.addGlyphs(400,600);           // Setting the unicode Range
        uniFont.getEffects().add(new ColorEffect(java.awt.Color.white));
        try {
            uniFont.loadGlyphs();
        } catch (SlickException e) {};

    }

} 
````  `* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-16T15:46:25.370

看来我现在有这个错误，它只会在使用字体之前绘制轮廓矩形。这似乎是一个**Slick 错误**，并且是一个主要问题，因此他们应该在添加新功能之前修复它。唯一的解决方法是在框架**上最后渲染字体。**

**编辑：**问题解决了！

在渲染字体后添加这一行：

```
GL11.glDisable(GL11.GL_TEXTURE_2D); 
```

Slick 的人真的应该添加该行，因为它会导致很多错误！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-14T20:08:21.090

这就是我创建字体的方式：

```
Font font = ...; //Your loaded font
float size = 20.0F;
UnicodeFont f = new UnicodeFont(font.deriveFont(0 /*normal*/, size));
f.addAsciiGlyphs();
ColorEffect e = new ColorEffect();
e.setColor(java.awt.Color.white);
f.getEffects().add(e);
try {
    f.loadGlyphs();
} catch (SlickException e1) {
    e1.printStackTrace();
}
return f; 
```

希望这有帮助！``

# c# - 对象引用未设置为对象的实例，无法弄清楚原因

> ID：10064808
> 
> 赞同：0
> 
> 时间：2012-04-08T17:28:17.787
> 
> 标签：c#, asp.net, object

我对 c# 和 asp.net 很陌生，所以请告诉我，如果我给你一些关于我的问题的信息。

当用户登录时，我创建我的用户对象的一个​​实例，调用我的 getcategories 方法并将用户重定向到另一个页面。像这样：

```
if (dt.Rows.Count > 0){

    user apa = new user();

    apa.namn = dt.Rows[0]["FirstName"].ToString() + " " + dt.Rows[0]["LastName"].ToString();
    apa.mail = dt.Rows[0]["Email"].ToString();
    apa.id = dt.Rows[0]["ID"].ToString();
    apa.firstname = dt.Rows[0]["FirstName"].ToString();
    apa.lastnamn = dt.Rows[0]["LastName"].ToString();
    apa.password = dt.Rows[0]["Password"].ToString();

    Session["user"] = apa;
    apa.getcategories();

    Response.Redirect("visainlagg.aspx");
} 
```

问题是我在“kategorier[i].Name = dt.Rows[i]["Name"].ToString();”上得到“对象引用未设置为对象的实例”-错误 （在 User 类的 for 循环中发生的第一件事）。我不明白为什么 ：（

这是 User 类的样子：

```
public string namn;
public string mail;
public string id;
public string firstname;
public string lastname;
public string password;
public string constr = "secret";

public Post[] poster;

public anvcateg[] kategorier;
public int antalKategorier;

public void getcategories() { 
    SqlConnection conn = new SqlConnection();
    conn.ConnectionString = constr;

    SqlCommand com = new SqlCommand();
    com.Connection = conn;
    com.CommandText = "SELECT * FROM Category WHERE Author= '" + id + "'";

    SqlDataAdapter adp = new SqlDataAdapter();
    adp.SelectCommand = com;

    DataTable dt = new DataTable();
    adp.Fill(dt);

    antalKategorier = dt.Rows.Count;

    kategorier = new anvcateg[dt.Rows.Count];

    for (int i = 0; i < dt.Rows.Count; i++)
    {
        kategorier[i].Name = dt.Rows[i]["Name"].ToString();
        kategorier[i].ID = dt.Rows[i]["ID"].ToString();
        kategorier[i].Description = dt.Rows[i]["Description"].ToString();
        kategorier[i].Author = dt.Rows[i]["Author"].ToString();

    } 
} 
```

getcategories() 使用的 anvcateg 类如下所示：

```
public class anvcateg
{
    public string ID;
    public string Name;
    public string Description;
    public string Author; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T17:51:53.750

kategoier 是 anvcateg 的数组

您在这里初始化了数组：

```
kategorier = new anvcateg[dt.Rows.Count]; 
```

但是你必须创建一个 anvcateg 的实例才能添加到你的数组中）

```
for (int i = 0; i < dt.Rows.Count; i++)
    {
        kategorier[i] = new anvcateg()
            {
                ID = dt.Rows[i]["ID"].ToString(),
                Author = dt.Rows[i]["Author"].ToString(),
                Description = dt.Rows[i]["Description"].ToString(),
                Name = dt.Rows[i]["Name"].ToString()
            };

    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T17:48:33.380

您的数组包含所有空值 - 您尚未创建任何对象。您已经创建了一个空数组。一个快速的解决方法是：

```
kategorier[i] = new anvcateg(); 
```

在每次迭代开始时。

对于信息，您当前的代码是有风险的（SQL 注入），不会自行清理，并且不必要地复杂。这是通过“dapper”相同的：

```
using(var conn = new SqlConnection(constr)) {
    conn.Open();
    var data = conn.Query<anvcateg>(
        "SELECT * FROM Category WHERE Author=@id",
        new { id }).ToList();
} 
```

（或 ToArray() 如果您愿意）

这会在内部完成所有映射，清理连接，并安全地参数化“id”以避免注入攻击。并且看不到数据表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-08T17:40:33.977

你的问题不是很清楚，试着找到代码“kategorier[i].Name = dt.Rows[i]["Name"].ToString();” 但找不到它。如果您可以发布包含这些行的代码，那么很容易回答您。

无论如何，这个错误可能有以下原因：

1.  dt.Rows[i]["Name"] 为 null 并且您尝试使用 .ToString() 将其转换为字符串，将其更改为 Convert.ToString(dt.Rows[i]["Name"])

2.  检查您是否已将“kategorier”定义为一个数组，或者您可以使用 List kategorier = new List kategoriers();

否则你的代码看起来不错

# java - 将从文本文件中读取的字符串传递给java中的writeObject（）？

> ID：10064810
> 
> 赞同：0
> 
> 时间：2012-04-08T17:28:42.553
> 
> 标签：java, string, methods, objectoutputstream

我是 JAVA 的初学者。这是我在这个论坛上的第一个问题。我正在为一个项目开发一个十六进制编辑器工具。作为其中的一部分，我必须制作一个小应用程序，它应该打开一个文本文件并读取它的内容并将其显示在编辑器区域中。然后它还应该使用 SHA-256 等制图算法为文本文件中的文本生成哈希值。我在互联网上找到了一个非常有用的代码。我正在尝试重用它。我被困在将文本文件的内容显示到编辑器中。代码是这样的。

```
 public Test() throws IOException {

    // passes the number of array elements to the 
    // editor.

    byte[] ar;
    ar = new byte[16 * 16 * 100];
    Arrays.fill(ar, (byte) 0);

    ByteArrayOutputStream bos=new ByteArrayOutputStream();
    ObjectOutputStream oos=new ObjectOutputStream(bos);

    win = new JFrame("Hex Editor");
    win.setSize(654, 473);

    JButton btnOpenFile = new JButton("Open File");
    btnOpenFile.setBounds(67, 38, 91, 23);
    win.getContentPane().add(btnOpenFile);
    btnOpenFile.addActionListener(new ActionListener() {
        public void actionPerformed(ActionEvent e) {

            Fileopener opener = new Fileopener();
            //returns the string value through getpause() method.
                            System.out.println(opener.getPause());
        }
    });

oos.writeObject("kirandfasnvcxnz.,mvnmc,xznvmcxzmnvcmxzcccbnxz cz hajk vc jbcvj xbnzvc sbj cvxz,bcxjnzbcvjhs avcjz cxmzncvxz ");
ar=bos.toByteArray(); 
```

我为 fileopener 定义了另一个类文件的方法。在执行期间返回文本文件的内容。我的问题是如何将从文本文件中读取的字符串值传递给此方法。以便它显示在编辑器中。

```
oos.writeObject("kirandfasnvcxnz.,mvnmc,xznvmcxzmnvcmxzcccbnxz cz hajk vc jbcvj xbnzvc sbj cvxz,bcxjnzbcvjhs avcjz cxmzncvxz "); 
```

编辑器正在使用上面的代码行显示内容。我试图通过调用返回读取文本的字符串值的 getter 方法来做到这一点。我用于此的方法是

```
oos.writeObject("Fileopener.getPause()"); 
```

它没有显示文本文件的所需内容。相反，编辑器在编辑器的大括号内显示函数（我猜它已被读取为字符串）。提前感谢您的帮助。@sgmorrison 下面是Fileopener()的代码`

```
 package hexeditor;

import java.io.BufferedReader;
import java.io.File;
import java.io.FileNotFoundException;
import java.io.FileReader;
import java.io.IOException;

import javax.swing.JFileChooser;

public class Fileopener {

    static String pause;

    /**
     * 
     */
    public Fileopener() {
        super();
        // TODO Auto-generated constructor stub

        JFileChooser chooser = new JFileChooser();
        int returnVal = chooser.showOpenDialog(null);

        StringBuffer contents = new StringBuffer();

        BufferedReader inFile = null;

        if (returnVal == JFileChooser.APPROVE_OPTION) {

            File f = chooser.getSelectedFile();

            try {

                inFile = new BufferedReader(new FileReader(f));

                String text = null;

                while ((text = inFile.readLine()) != null) {

                    contents.append(text)

                    .append(System.getProperty(

                    "line.separator"));

                }

            }

            catch (FileNotFoundException e1) {

                e1.printStackTrace();

            } catch (IOException e1) {

                e1.printStackTrace();

            } finally {

                try {

                    if (inFile != null) {

                        inFile.close();

                    }

                } catch (IOException e1) {

                    e1.printStackTrace();

                }

            }

            // show file contents here
            pause = contents.toString();
            setPause(pause);
                   }

    }
         public static String getPause() {
        return pause;
    }

    public void setPause(String pause) {
        this.pause = pause;
    }

} 
```

`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T20:38:50.343

如果您的代码与编写的 () 完全相同，`oos.writeObject("Fileopener.getPause()");`那么您将 String 传递给`writeObject`with value `"Fileopener.getPause()"`。您不是在调用 on 方法`fileopener`，而是创建一个看起来有点像方法调用的新 String 对象。要查看这种情况，请尝试将行替换为`oos.writeObject("Fileopener.getNonExistentMethod()");`并查看会发生什么。

要更正此问题，请从您的通话中删除引号：

`oos.writeObject( Fileopener.getPause() );`

**更新**看到 Fileopener 的代码后，我现在看到了可能是另一个问题。Fileopener 的 pause 字段声明为`static`，这意味着该属性的相同值可用于该类的所有实例，也可用作该类本身的属性。`getPause`也被声明为静态的，因此适用相同的规则。

在您的评论中，您提到了以下代码：

```
 Fileopener opener = new Fileopener(); 
    System.out.println(opener.getPause()); 
```

创建一个新的 Fileopener 会导致`pause`设置为包含文件内容。不调用`new Fileopener()`，`pause`永远不会设置，但您仍然可以使用`getPause`.

由于只有在读取文件后读取 的值才有意义`pause`，所以我建议`static`从`pause`and中删除`getPause`。然后，您必须将麻烦的代码更改为：

```
 Fileopener opener = new Fileopener(); 
    oos.writeObject(opener.getPause()); 
```

# java - 在 Java EE 6 中注释 REST Web 服务

> ID：10064817
> 
> 赞同：1
> 
> 时间：2012-04-08T17:29:19.357
> 
> 标签：java, jakarta-ee

我正在使用 Java EE 6 制作 Web 服务。据我了解，您可以使用 @Path/@GET 等注释或无接口 bean 来注释本地接口。不知道做两个接口是不是很常见；一个用于带有注释的 Web 服务，另一个用于本地界面？或者你只是在本地界面上添加它们？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T17:47:02.973

如果我理解您的问题，您会问您是否应该定义一个仅用于指定注释的接口。我不确定这样做有什么好处，除非您有一个非常复杂的项目，并且预见自己会用另一个库替换 Web 服务注释。就未来的支持而言，这个库必须处于虚拟的临终前，或者需要有明确的证据表明我们的 CTO 将改变技术，以便我考虑这个策略。

对于大多数项目来说，这似乎有点矫枉过正，特别是如果您已经为控制器定义了一个可以添加这些注释的接口。作为您项目的同事，我不想检查 3 个不同文件中的 1 个类的注释，除非有非常令人信服的理由这样做。

话虽如此，如果您想将注释添加到您的接口或子类[中，此示例支持此功能](http://fusesource.com/docs/framework/2.4/rest/RESTAnnotateInherit.html)。但是，我认为您希望确保创建一个明确的标准，或者您的所有 REST 注释都在接口上，或者所有注释都在子类上。混合和匹配它们可能会让项目新手感到困惑。

如果没有真正看到您的代码及其复杂程度，我无法告诉您哪种方法最适合您的项目。重要的是平衡一致性和灵活性。总而言之，Java 给了你很多绳子，这等于灵活性，但如果你不小心，你也可以用那根绳子吊死自己。:)

# php - 从 PHP 调试回溯中删除二进制数据

> ID：10064819
> 
> 赞同：2
> 
> 时间：2012-04-08T17:29:44.837
> 
> 标签：php, debugging, binary, trace

我们喜欢在出现问题时打印堆栈跟踪。我们可以通过使用 debug_backtrace 的 PHP 轻松做到这一点。然而问题是，当文件上传或图像上传出错时，我们会得到一个巨大的二进制文件作为跟踪的一部分。像这样：（截断）

```
 #webgloo_ajax_error_handler() called at :0
1175 array (
1176   0 => 256,
1177   1 => 'Image_upload_error',
1178   2 => '/home/rjha/code/github/sc/webgloo/lib/com/indigloo/media/ImageUpload.php',
1179   3 => 95,
1180   4 =>
1181   array (
1182     'prefix' => 'test/2012/04/08/',
1183     'fieldName' => '120444-LM_menu_button.png',
1184     'sBlobData' => '<89>PNG^M
1185 ^Z
1186 ' . "\0" . '' . "\0" . '' . "\0" . '^MIHDR' . "\0" . '' . "\0" . '' . "\0" . 'P' . "\0" . '' . "\0" . '' . "\0"      . '^^^H^F' . "\0" . '' . "\0" . '' . "\0" . '»C<99>±' . "\0" . '' . "\0" . '' . "\0" . '^AsRGB' . "\0" . '®Î^\é'      . "\0" . '' . "\0" . '' . "\0" . '^FbKGD' . "\0" . 'ÿ' . "\0" . 'ÿ' . "\0" . 'ÿ ½§<93>' . "\0" . '' . "\0" . ''      . "\0" . ' pHYs' . "\0" . '' . "\0" . '^K<88>' . "\0" . '' . "\0" . '^K<88>^Aå<8e>)I' . "\0" . '' . "\0" . '' .      "\0" . '^GtIME^GÚ^B^R^V 5$=fÞ' . "\0" . '' . "\0" . '^PEIDAThÞÝ<9a>û<8f>]WuÇ?k<9f>sgl<8f>Ç<89>íøAH^P8<89>±<9d>8 
```

理想情况下，我想从我的回溯中删除这样的二进制 blob。有没有办法可靠地检测 PHP 中的二进制字符串？

以下对我**不起作用**。主要是因为我希望解决方案是详尽的。

1.  基于名称过滤（如排除 .PNG）
2.  在每个数据块中寻找神奇的“数字”

这是我当前的回溯生成器

```
function backtrace() {
            fwrite($this->fhandle," ---- __backtrace__  ----- \n" );
            $trace = debug_backtrace();
            $message = '' ;

            foreach ($trace as $i=>$t) {
                $message = sprintf("#%d %s%s%s() called at %s:%d \n", 
                    $i,$t['class'], $t['type'],$t['function'],$t['file'],$t['line']);
                fwrite($this->fhandle,$message);

                $args = $t['args'];

                if(!empty($args)) {
                    //remove blob strings from Argument
                    Util::unsetInArray($args,array('sBlobData','tBlobData'));
                    $this->dump($args);
                }
            }

        } 
```

# html - 混合画布和 CSS3 元素

> ID：10064821
> 
> 赞同：12
> 
> 时间：2012-04-08T17:29:46.010
> 
> 标签：html, css, canvas

我正在使用画布实现 HTML5 游戏。现在我正在考虑使用在画布上具有绝对位置的 HTML 元素来制作所有文本覆盖，如工具提示、语音气泡、信息窗口等。所以我可以使用 CSS3 提供的许多效果和过渡。

但我不确定性能。这些覆盖层必须经常添加和删除（就像 MMORPG 一样，所以会有很多气泡等等）。

关于性能可能有两个问题：

1.  DOM 遍历以添加/删除。也许缓存可以提供帮助？

2.  HTML 和 CSS3 本身。

另一种选择是在画布本身中管理这些元素，在每一帧中绘制它们。但也许我又一次受到了性能损失，因为我必须添加额外的代码、超时和其他东西，才能实现与 CSS3 中类似的效果。无论如何都需要遍历一些数据结构。

有什么建议、意见、经验吗？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T08:50:44.660

考虑只使用上述两种技术中的一种。也许您可以在手机或平板电脑上发布该应用程序。我认为在这些设备上同时处理两者会出现问题。还有一件事：如果你留在画布上，就不用担心兼容性。这不是一个技术问题，而是一个发人深省的答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T08:50:20.087

在 HTML5 游戏中为 UI 元素使用 DOM 的唯一最佳理由是事件处理。

如果您在画布上绘制所有内容，您将需要编写自己的逻辑来处理点击并确定点击了什么，这很快就会变得非常复杂，特别是如果您有多层界面。

使用 DOM 元素（尤其是使用 jQuery 之类的库时）这很简单，您可以轻松创建丰富的交互式 UI。

我能想到的唯一缺点是您可能会遇到浏览器不一致的问题，尤其是在使用 CSS3 的情况下，但 jQuery 再次对此有所帮助。

我想另一个缺点是，一旦你走 DOM 路线，你的游戏总是一个浏览器游戏，而如果它是 100% 画布，总是有可能将代码移植到另一种语言并使其成为原生的，但我想这对某些人来说只是一个缺点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T10:11:33.923

解决此问题的一种方法是在画布对象后面使用“动态”图像映射。然后就可以根据需要使用dom了。请注意，您需要将画布上的点击传递到图像映射。

# java - Webapp中的默认数据？

> ID：10064823
> 
> 赞同：2
> 
> 时间：2012-04-08T17:29:57.523
> 
> 标签：java, hibernate, jsf

如何在 webapp 中设置默认数据？例如默认用户：admin、test 等。

我首先想到在我的会话 bean 中定义一个静态部分，但这仍然会导致为每个会话创建新的用户。哪个不合适。

我还能怎么做？

泰！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T17:45:11.470

最好的方法是放入您的 webapp 的配置部分，它将通过以下步骤加载并只读一次：
数据的 xml 文件，只需将其放在您的类路径中并使用 java 属性读取它，这将得到类加载器路径的输入流

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T22:28:19.990

如果您使用的是休眠（我假设您来自问题标签），那么您只需要在类路径中有一个名为*import.sql*的文件，如果您有*hibernate.hbm2ddl.auto* ，休眠将自动执行它属性设置为*create*或*create-drop*。看看这个链接：

[http://relation.to/Bloggers/RotterdamJBugAndHibernatesImportsql#H-ImportsqlEasilyImportDataInYourUnitTests](http://relation.to/Bloggers/RotterdamJBugAndHibernatesImportsql#H-ImportsqlEasilyImportDataInYourUnitTests)

# haskell - 如何在 Haskell 中使用 IO 制作随机列表

> ID：10064827
> 
> 赞同：4
> 
> 时间：2012-04-08T17:30:26.483
> 
> 标签：haskell, io, monads

我正在尝试进行植绒模拟，以便更好地自学haskell。我在尝试为需要随机性的模拟生成初始状态时遇到了麻烦。我正在尝试生成所有具有随机初始位置和方向的 Boid 列表。

在主函数中，我使用

```
let numBoids = 10
rBoids <- randomBoids numBoids 
```

而且`rBoids`我打算存储在一个 IORef 中，然后我可以更新每一帧，我认为这是正确的做事方式吗？

这是失败的代码：

```
-- Type for the flocking algorithm
data Boid = Boid {
    boidPosition  :: Vector2(GLfloat)
  , boidDirection :: Vector2(GLfloat)
  } deriving Show

randomBoids :: Int -> IO ([Boid])
randomBoids 0 = do
  return []
randomBoids n = do
  b <- randomBoid 
  bs <- (randomBoids (n-1))
  return b : bs

randomBoid = do
  pos <- randomVector
  vel <- randomVector
  return (Boid pos vel)

randomVector = do
  x <- randomRIO(-1.0, 1.0)
  y <- randomRIO(-1.0, 1.0)
  return (Vector2 x y) 
```

实际上失败的是`return b : bs`. 如果我把它改成`return [b]`它编译。给出的错误是：

```
Couldn't match expected type `IO [Boid]' with actual type `[a0]'
In the expression: return b : bs
In the expression:
  do { b <- randomBoid;
       bs <- (randomBoids (n - 1));
         return b : bs }
In an equation for `randomBoids':
    randomBoids n
      = do { b <- randomBoid;
             bs <- (randomBoids (n - 1));
               return b : bs } 
```

我在这里很迷茫，至少可以说我对整个命令式代码在功能语言（和单子）的理解是不稳定的。非常感激任何的帮助！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-08T22:29:36.950

甘达达尔是正确的。我只想提一下，您可以大大缩短代码：

```
import Control.Applicative
import Control.Monad

randomBoids n = replicateM n randomBoid

randomBoid = Boid <$> randomVector <*> randomVector

randomVector = Vector2 <$> randomRIO (-1, 1) <*> randomRIO (-1, 1) 
```

第一个函数利用`replicateM`，当您想要重复一个单子动作并收集结果时，这是一个非常有用的函数。后两个函数使用`Applicative`样式，这非常有用。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-08T17:51:04.917

您收到错误的原因是因为`return b : bs`会使编译器将其解释为`(return b): bs`要解决此问题，您可以将语句更改为`return (b:bs)`. 这将使语句返回一个`IO[Boid]`

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-08T17:46:28.887

类型检查器读取`return x : xs`为`(return x) : xs`. 如果您编写`return (x:xs)`它将进行类型检查。

# php - 如何在 PHP 类中创建最终属性？

> ID：10064828
> 
> 赞同：3
> 
> 时间：2012-04-08T17:30:37.227
> 
> 标签：php

我想阻止子类重新声明某些父类的属性。我怎样才能做到这一点？

编辑：如果我的父类有一个“标题”属性，我不希望孩子可以（重新）声明这个名称的属性

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-08T17:49:52.427

我不确定这是否可行，但您可以尝试使用 Reflection 类并检测是否有任何孩子重新声明了该属性，然后触发异常或其他东西

更新：

检查此链接：

[http://www.php.net/manual/en/reflectionproperty.getdeclaringclass.php](http://www.php.net/manual/en/reflectionproperty.getdeclaringclass.php)

和

[http://www.php.net/manual/en/reflectionproperty.setaccessible.php](http://www.php.net/manual/en/reflectionproperty.setaccessible.php)

它应该有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T17:34:28.913

将类变量定义为私有。

```
private $_var = 'would not be changed by a child class'; 
```

# c# - 如何使用 .INF 配置文件加载 OCX

> ID：10064832
> 
> 赞同：0
> 
> 时间：2012-04-08T17:31:13.190
> 
> 标签：c#, winforms, ocx, inf

这是我的第一篇文章，所以如果我发布错误或其他什么，请告诉我！

我正在用 C# 开发一个应用程序，我必须从 IP 摄像机流式传输图像和声音。

我从 IP 摄像机制造商那里找到了一个 SDK，它应该可以将流式处理过程集成到应用程序中。

网络摄像机为`LevelOne FCS-0010`.OCX 文件、.INF 文件和 PDF 文件，其中描述了 .INF 文件的不同配置参数。

这是我的问题：如何在我的应用程序中使用 OCX 文件？

根据一些论坛，OCX 可以直接拖放到 VS 的工具栏中，然后拖放到 WinForms 表单上。这实际上进行得很好！

但后来我只是在我的应用程序中获得了一个干净的 ActiveX 对象，几乎只是空白。可能需要配置 OCX 组件，但是如何配置呢？

我想我必须在我的应用程序中以某种方式使用 -INF 文件，因此可以配置 OCX 组件。但是，我真的不知道怎么做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T18:02:08.083

它必须先注册，使用供应商推荐的安装程序。然后，您需要为控件生成一个 AxHost 包装器，以便将其放置在 Winforms 表单或 WPF ElementHost 上。

有两种方法可以做到这一点。右键单击工具箱，选择项目，COM 选项卡，然后从列表中选择控件。如果您不知道控件的名称，这可能很难做到或根本不起作用。第二种方法是运行 Visual Studio 命令提示符并键入[aximp foo.ocx](http://msdn.microsoft.com/en-us/library/8ccdh774.aspx)。这会生成一个 AxFoo.Interop.dll，您可以通过选择项目、浏览选项卡将其放在工具箱中。

并非每个 ActiveX 控件都与 .NET 兼容，不支持无窗口控件。

# java - 从组合框中删除项目

> ID：10064834
> 
> 赞同：0
> 
> 时间：2012-04-08T17:31:22.533
> 
> 标签：java, swing, combobox

我有一个从数据库填充组合框的方法。它使用医生 ID 来填充它。问题是，当我将 ID 更改为另一个人而不是清除组合框然后再次填充它时，它只会添加到列表的末尾。

```
public void FillTimings() {
    theapptTime.removeAllItems();
    theapptTime.repaint();

    String strDate = theTdate.getText().trim();

    String strDoctor = (String) theTstaffname.getSelectedItem();
    System.out.println(strDoctor);

    try {
        db.dbConnect();
        String docId = db.getdociD(strDoctor);
        ResultSet rs = db.getTimings(strDate, docId);

        while (rs.next()) {
            theapptTime.addItem(rs.getString(1));
            rs.close();
        }
    } catch (SQLException e1) {
        System.out.println("fail");
        e1.printStackTrace();
    }
} 
```

那就是代码。

有人能帮我吗。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-04T04:51:59.953

尝试这个 ：

```
DefaultComboBoxModel dt = (DefaultComboBoxModel) theapptTime.getModel();
dt.addElement("item 1"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T10:17:14.123

你必须首先声明一个 DefaultComboBoxModel

```
 DefaultComboBoxModel dt=new DefaultComboBoxModel(); 
```

将您的组合框模型设置为此模型

```
 theapptTime.setModel(dt); 
```

代码中的下一步将其更新为

```
 db.dbConnect();
    String docId = db.getdociD(strDoctor);
    ResultSet rs = db.getTimings(strDate, docId);
    dt.removeAllElements();
    while (rs.next()) {
        dt.addElement(rs.getString(1));
        rs.close();
    } 
```

它会工作的！干杯！！

# android - android核心库编译

> ID：10064837
> 
> 赞同：0
> 
> 时间：2012-04-08T17:31:33.940
> 
> 标签：android, compiler-construction, dalvik, android-source

AOSP 如何编译核心库？是否有任何特殊处理使其与底层操作系统通信？是否有任何存根代码生成为标记，并留给 Dalvik VM 运行时处理？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T19:16:42.900

我无法确定您是在谈论本机库还是 java 的框架库，尽管听起来您在谈论框架库。

这些库几乎没有特殊处理。我能想到的唯一例外是任何包含 java.* 类的框架库都必须具有用于 dx 的 --core-library 选项。

总的来说，dalvik 字节码确实存储了一些可选的调试信息，行号，局部变量名等，这些通常存在于核心库中。但这并不是特定于框架库的——大多数应用程序也会有这些信息，除非他们另有说明。

# mysql - 搜索一个点周围的距离（使用 MBRcontains）

> ID：10064840
> 
> 赞同：0
> 
> 时间：2012-04-08T17:31:45.117
> 
> 标签：mysql, sql, google-maps, google-maps-api-3, gis

我有一个现有的 SQL 查询，它使用`lat, lng`更大的圆形公式来计算特定列表周围 1 公里半径内的所有列表。

它运行良好，但我正在尝试使用 MySQL 地理空间扩展并使用 MBR 矩形而不是圆形来加速它，这对我来说很好。

**问题：**使用的新代码`MBRcontains`返回零结果！我错过了 SQL 查询中的某些内容吗？

`Lat: 42.353443` `Lng: -71.076584`

**旧 SQL 查询**

```
SELECT `price`, `city`, `state` FROM (`listings`) 
WHERE `bedroom` = '1' 
AND `post_timestamp` BETWEEN DATE_SUB( NOW(), INTERVAL 10 DAY) AND DATE_SUB( NOW(), INTERVAL 0 DAY) 
AND (6371 * acos( cos( radians(listings.lat) ) * cos( radians( 42.353443 ) ) * cos( radians( -71.076584 ) - radians(listings.lng) ) + sin( radians(listings.lat) ) * sin( radians( 42.353443 ) ) ) ) < 1 
LIMIT 100 
```

**新 SQL 查询**（[公式](https://stackoverflow.com/questions/1006654/fastest-distance-lookup-given-latitude-longitude)）

```
SELECT `price`, `city`, `state` FROM (`listings`) 
WHERE `bedroom` = '1' 
AND `post_timestamp` BETWEEN DATE_SUB( NOW(), INTERVAL 10 DAY) AND DATE_SUB( NOW(), INTERVAL 0 DAY) 
AND MBRContains( 
    LineString( Point(42.353443 + 1 / ( 111.1 / COS(RADIANS(-71.076584))), 42.353443 + 1 / 111.1), 
                            Point(-71.076584 - 1 / ( 111.1 / COS(RADIANS(42.353443))), 42.353443 - 1 / 111.1) )
                            , p) 
) 
LIMIT 100 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T09:11:28.700

我想你可以试试这个sql：

```
SELECT `price`, `city`, `state` FROM (`listings`) 
    WHERE `bedroom` = '1' 
    AND `post_timestamp` BETWEEN DATE_SUB( NOW(), INTERVAL 10 DAY) AND DATE_SUB( NOW(), INTERVAL 0 DAY) 
    AND MBRContains( 
            LineString( 
                        Point(
                            42.353443 + 1 / ( 111.1 / COS(RADIANS(-71.076584))), 
                            -71.076584 + 1 / 111.1), 
                        Point(
                            42.353443 - 1 / ( 111.1 / COS(RADIANS(-71.076584))), 
                            -71.076584 - 1 / 111.1)
                            )
            , p) 
    ) 
    LIMIT 100 
```

我已经改变了经纬度的位置。

# ruby - 如何更改 Ruby 的默认纪元时间？

> ID：10064841
> 
> 赞同：0
> 
> 时间：2012-04-08T17:31:52.753
> 
> 标签：ruby, time, epoch

我想将 Ruby 使用的默认纪元时间更改为 1-1-2001 UTC，因为它是默认的 OS X 纪元时间。这可能吗？

[我从对我的问题](https://stackoverflow.com/questions/10052298/how-to-convert-array-into-64bit-double-mac-absolute-time-using-ruby)的回答中得到了一些提示，但我仍然无法得到正确的输出，有时由于我用于解包的转换类型而导致时间超出范围我尝试过解包所有格式，包括 D、E、G ,Q,V,v,q,e,L,l 等。

但在某些时候，我的价值观超出了范围。有什么方法可以强制 ruby​​ 按照用户定义的方式启动 epoch？很多时候我得到这个错误：

```
fileread.rb:48:in `at': 822752480099018910000000000000000000000000000000000000000000000.000000 out of Time range (RangeError) 
```

# objective-c - 在数组对象中查找数组对象的索引

> ID：10064844
> 
> 赞同：0
> 
> 时间：2012-04-08T17:32:16.850
> 
> 标签：objective-c, xcode, cocoa-touch, nsarray

例如，如果我有这个数组：

```
_mode = [NSArray arrayWithObjects:
                      [NSArray arrayWithObjects:@"1", @"One", nil],
                      [NSArray arrayWithObjects:@"2", @"Two", nil],
                      [NSArray arrayWithObjects:@"3", @"Three", nil],
                      [NSArray arrayWithObjects:@"4", @"Four", nil],
                      [NSArray arrayWithObjects:@"5", @"Five", nil],
                      nil]; 
```

我需要找到数组 _mode 的哪个对象包含`@"3"`我该怎么做？我已经尝试过`selectedIndex = [_mode indexOfObject:@"3"];`，`selectedIndex = [[_mode objectAtIndex:0] indexOfObject:@"sta"];`但都没有工作。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-08T17:46:04.037

```
[_mode indexOfObjectPassingTest:^(id obj, NSUInteger idx, BOOL *stop){
    return [[obj objectAtIndex:0] isEqualToString:@"3"];
}]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-08T17:50:37.120

这与 Jonas Schnelli 的回答基本相同 :)

```
for (NSArray *subarray in _mode){
    NSInteger index = [subarray indexOfObject:@"3"];
    if (index != NSNotFound) return subarray;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-11-22T11:01:27.530

这给出了数组中字典的索引。

```
for (NSDictionary *dict in self.yourArray ) {
    if ([anotherArray containsObject:[dict valueForKey:@"Key"]]) {
        NSIndexPath *indexPath = [NSIndexPath indexPathForRow:[self.yourArray indexOfObject:dict] inSection:section];
        NSLog(@"IndexPath is %@",indexPath);
    }    
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-08T17:38:35.950

像这样？

```
for(NSArray *subarray in _mode) {
  for(NSString *str in subarray) {
   if([str isEqualToString:@"3"]) {
     return subarray; // returns the array within _mode that contains "3"
   }
  }
} 
```

如果您需要索引：

```
for(NSArray *subarray in _mode) {
  for(NSString *str in subarray) {
   if([str isEqualToString:@"3"]) {
     return [mode indexOfObject:subarray];
   }
  }
} 
```

# django - django.test.TestCase vs unittest vs django.utils.unittest.TestCase 之间的区别

> ID：10064846
> 
> 赞同：21
> 
> 时间：2012-04-08T17:32:27.067
> 
> 标签：django, django-testing

我仍在使用 Django 1.2.1，我认为对于较新的 Django，我们不使用`import unittest`，然后使用`unittest.TestCase`.

**插图**

```
import unittest
class TestThis(unittest.TestCase):

from django.utils.unittest import TestCase
class TestThis(TestCase):

from django.test import TestCase
class TestThis(TestCase): 
```

根据[PyCon2011 talk](http://pycon-2012-notes.readthedocs.org/en/latest/testing_and_django.html)，第二个效率**稍高一些。**

这是显示关系的[图表](https://docs.djangoproject.com/en/dev/topics/testing/#testcase)：

![在此处输入图像描述](../Images/80fdb5699c556debbd96906ca934feaf.png)

所以`django.utils.unittest`并`django.test`继承自`unittest`or `unittest2`。

我不确定以下内容是否正确。请帮忙编辑。

```
 ________________________________________________________________
|  Name                   |  Django Version  |  Python Version  |
-----------------------------------------------------------------
|  unittest               |     >= 1.0       |      >= 2.6      |
-----------------------------------------------------------------
|  django.utils.unittest  |     >= 1.3       |       ??         |
-----------------------------------------------------------------
|  django.test            |     >= 1.0       |      >= 2.6      |
|   - SimpleTestCase            >= 1.4              >= 2.7      |
|   - LiveServerTestCase        >= 1.4              >= 2.7      |
----------------------------------------------------------------- 
```

在效率方面，三者中哪一个更好？许多 Django 开发人员在测试时进行模拟，因此有时甚至不需要数据库。有没有办法在我们运行时不创建表`manage.py test myapp.MyClass`？对于旧版本（1.3 之前），哪个更好？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-17T15:27:04.983

Django`TestCase`增强`unittest.TestCase`了一些额外的功能：

*   自动加载夹具。
*   将每个测试包装在事务中。
*   创建一个 TestClient 实例。
*   用于测试重定向和表单错误之类的特定于 Django 的断言。

一般来说，您应该很可能使用 Django 的 TestCase 子类之一。通常这将是`django.test.TestCase`，为了提高效率，它将测试包装在数据库事务中并使用回滚来“撤消”数据库中的测试。如果您需要在测试中手动管理事务，则需要使用`django.test.TransactionTestCase`，因为您无法在事务中启动/回滚事务。

使用时有一些小注意事项`django.test.TestCase`，请参阅[此处](https://docs.djangoproject.com/en/stable/topics/testing/tools/#transactiontestcase)的注释以获取更多信息。

还：

如果您只是在寻找一种更快地运行测试的方法，请查看[在内存中运行测试](https://stackoverflow.com/questions/3096148/how-to-run-djangos-test-database-only-in-memory)，并且（如果您使用 South），设置告诉 South在创建测试时`SOUTH_TESTS_MIGRATE = False`使用（更快）`syncdb`DB，而不是运行迁移。

# android - 如何在 Android 应用程序中使用 fb connect？

> ID：10064847
> 
> 赞同：0
> 
> 时间：2012-04-08T17:32:49.370
> 
> 标签：android, facebook

```
public class FacebookConnect extends Activity {

    Facebook facebook = new Facebook("");
    String FILENAME = "AndroidSSO_data";
    private SharedPreferences mPrefs;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        /*
         * Get existing access_token if any
         */
        mPrefs = getPreferences(MODE_PRIVATE);
        String access_token = mPrefs.getString("access_token", null);
        long expires = mPrefs.getLong("access_expires", 0);
        if(access_token != null) {
            facebook.setAccessToken(access_token);
        }
        if(expires != 0) {
            facebook.setAccessExpires(expires);
        }

        /*
         * Only call authorize if the access_token has expired.
         */
        if(!facebook.isSessionValid()) {

            facebook.authorize(this, new String[] {}, new DialogListener() {
                public void onComplete(Bundle values) {
                    SharedPreferences.Editor editor = mPrefs.edit();
                    editor.putString("access_token", facebook.getAccessToken());
                    editor.putLong("access_expires", facebook.getAccessExpires());
                    editor.commit();
                }

                public void onFacebookError(FacebookError error) {}

                public void onError(DialogError e) {}

                public void onCancel() {}
            });
        }
    }

    @Override
    public void onActivityResult(int requestCode, int resultCode, Intent data) {
        super.onActivityResult(requestCode, resultCode, data);

        facebook.authorizeCallback(requestCode, resultCode, data);
        AsyncFacebookRunner asyncRunner = new AsyncFacebookRunner(this.facebook);
        asyncRunner.request("me", new meRequestListener());
    }
} 
```

那是我连接FB登录的代码。我有两个疑问：1.我如何获取用户信息？（FB 名称） 2\. 我如何将它存储在数据库中。这里的问题是，即使我允许用户通过 facebook 登录，也可能有其他同名用户。那么，fb 是否允许我获取他们的电子邮件地址以在数据库中创建唯一条目？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T17:51:03.657

如果您想要用户的唯一标识符，请使用他的 facebook id。要做到这一点 - 您可以使用 FB 提供的图形 API。有关此内容的更多信息：[https](https://developers.facebook.com/docs/reference/api/) ://developers.facebook.com/docs/reference/api/ 要获取当前登录用户的基本信息（带有 facebook id），您可以使用此 api：[https://graph.facebook。 com/me](https://graph.facebook.com/me)（仅当用户拥有有效的访问令牌时才有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T18:32:51.643

您需要安装一个扩展，类似于核心 Android SDK，但不，这是您需要做的：

1.) 访问 github.com/facebook/facebook-android-sdk

2.) 只下载 facebook 目录！其他目录只是示例。

3.) 将 src 中的文件（如果需要，您也可以复制可绘制对象）放入您当前正在使用的包中

4.) 你很好，你可以使用 facebook "SDK"

另请参阅此示例[https://github.com/facebook/facebook-android-sdk/tree/master/examples/Hackbook](https://github.com/facebook/facebook-android-sdk/tree/master/examples/Hackbook)下载它，它是 facebook 提供的工作示例

# file - 将文本文件读入 Applescript 中的列表

> ID：10064849
> 
> 赞同：5
> 
> 时间：2012-04-08T17:32:56.310
> 
> 标签：file, text, applescript

我试图创建一个读取文本文件并将内容放入列表的 AppleScript。该文件是一个简单的文本文件，其中每一行如下所示：`example-"example"`

第一个是文件名，另一个是文件夹名。

这是我现在的代码：

```
set listOfShows to {}
set theFile to readFile("/Users/anders/Desktop/test.txt")
set Shows to read theFile using delimiter return
repeat with nextLine in Shows
    if length of nextLine is greater than 0 then
        copy nextLine to the end of listOfShows
    end if
end repeat
choose from list listOfShows

on readFile(unixPath)
    set foo to (open for access (POSIX file unixPath))
    set txt to (read foo for (get eof foo))
    close access foo
    return txt
end readFile 
```

当我运行输出时，我得到了这个：

```
error "Can not change \"Game.of.Thrones-\\\"Game Of \" to type file." number -1700 from "Game.of.Thrones-\"Game Of " to file" 
```

我的列表如下所示：Game.of.Thrones-“权力的游戏”和另外两行类似的行。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-08T18:05:04.963

错误是您试图将文件的*内容*（您读取的第一个文件）*作为*文件读取。获取文本**段落**将在返回/换行边界处将其分开，这通常比尝试猜测文件中使用的行尾字符更好。

仅在读取文件时，您也不需要全部**打开以供访问**，因此您的脚本可以简化为

```
set listOfShows to {}
set Shows to paragraphs of (read POSIX file "/Users/anders/Desktop/test.txt")
repeat with nextLine in Shows
    if length of nextLine is greater than 0 then
        copy nextLine to the end of listOfShows
    end if
end repeat
choose from list listOfShows 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-01T22:03:47.817

`read`默认情况下使用 MacRoman，因此它会混淆 UTF-8 文件中的非 ASCII 字符，除非您添加`as «class utf8»`. （`as Unicode text`是 UTF-16。）

```
paragraphs of (read POSIX file "/tmp/test.txt") as «class utf8» 
```

`paragraphs of`也适用于 CRLF 和 CR 行尾。这不是，但如果它是空的，它会忽略最后一行：

```
read POSIX file "/tmp/test.txt" as «class utf8» using delimiter linefeed 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-04-27T09:34:50.147

```
set milefile to ((path to desktop as text) & "Alert.txt")
set theFileContents to (read file milefile)
display dialog theFileContents 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-26T09:02:51.100

AppleScript 的语言参考在第 120 页指出：

紧接在上一段结尾后的第一个字符或文本开头之后并以回车符 (\r)、换行符 (\n)、回车符/换行符对结尾的一系列字符(\r\n)，或文本的结尾。不支持 Unicode“段落分隔符”字符 (U+2029)。

因此，U+8232 被忽略，AppleScript 从文件中返回整个文本……</p>

U+8232 在 TextEdit 中用作 CR 字符...</p>

# c++ - C ++中的并发无序映射

> ID：10064850
> 
> 赞同：1
> 
> 时间：2012-04-08T17:32:57.350
> 
> 标签：c++, parallel-processing, tbb

我有一个串行运行的算法，我要并行化它。现在，该算法`unordered_map`在 C++11 中使用。我可以用`concurrent_unordered_map`直接代替它吗？

我只想指出，我已经尝试过这样做，但它似乎会产生难以理解的错误。像这个：

```
(.text._ZN3tbb13tbb_allocatorINS_10interface58internal18split_ordered_listISt4pairIKSsSt6vectorIjSaIjEEENS0_IS9_EEE4nodeEE8allocateEjPKv[tbb::tbb_allocator<tbb::interface5::internal::split_ordered_list<std::pair<std::basic_string<char, std::char_traits<char>, std::allocator<char> > const, std::vector<unsigned int, std::allocator<unsigned int> > >, tbb::tbb_allocator<std::pair<std::basic_string<char, std::char_traits<char>, std::allocator<char> > const, std::vector<unsigned int, std::allocator<unsigned int> > > > >::node>::allocate(unsigned int, void const*)]+0x16): undefined reference to `tbb::internal::allocate_via_handler_v3(unsigned int)' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T17:50:27.410

concurrent_unordered_map 允许并发插入和并发读取，但不允许并发删除。因此，只要您在添加/迭代时不删除就可以了。

*   评论中提到的链接问题。

# php - 活动提要结构

> ID：10064852
> 
> 赞同：2
> 
> 时间：2012-04-08T17:33:26.840
> 
> 标签：php, mysql

我正在构建一个函数，它将我的用户所做的事情的日志添加到我的数据库中，这样我就可以为其他用户的活动提要构建一个活动提要。

到目前为止我想象它的样子。

**活动表**

```
id | user_id | source | source_id | timestamp 
```

**示例输入**

```
1 | 1 | photo_upload | 54 | 1333906150 //54 being the ID of the photo in my DB
2 | 1 | follow | 2 | 1333906159 // 2 being the id of a user 
```

通过这种方式，我可以轻松地从数据库中提取用户活动的信息，`"user_id = {$followers}`然后根据他们的来源显示它们，例如显示 photo_upload 的图像。

**编辑** 显示不同类型的提要的最佳方式是什么。这是我目前拥有的，但似乎有点多。

```
<?php
$grab = mysql_query("SELECT * FROM `activity` WHERE `user_id` IN (".$following.") ORDER BY `id` DESC");

while($row = mysql_fetch_array($grab)){

    switch ($row['source']) {
        case "photoupload":
            // Display photo upload layout
            break;
        case "follow":
            // Display follow layout
            break;
    }

}
?> 
```

有没有人看到任何改进的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T18:59:54.513

创建一个描述 feeditem 类型的抽象类：

```
abstract class Application_Feed_Item_Abstract {
    protected $_item;

    public function __construct($itemData) {
        $this->_item = $itemData;
    }

    abstract public function render();
} 
```

为不同类型的内容实现这个类：

```
class Application_Feed_Item_Photo extends Application_Feed_Item_Abstract {
    public function render() {
        //Custom rendering logic for a Photo
        return '<div>Watch my <a href="photo.php?id=' . $this->_item['source_id'] . '">photo</a></div>';
    }
}

class Application_Feed_Item_Follow extends Application_Feed_Item_Abstract {
    public function render() {
        //Custom rendering logic for a Follower
        return '<div>I got a new <a href="photo.php?id=' . $this->_item['source_id'] . '">follower</a></div>';
    }
} 
```

因此，当您提取记录时，您可以根据 feeditem 的类型动态创建渲染器对象：

```
//Pull items from database and store them as an Array or other iterable object.
//Here i assume we call this collection of rows from the database $feeditems

//Mapping of source to renderer classes
$types = array(
    "photoupload" => "Application_Feed_Item_Photo",
    "follow" => "Application_Feed_Item_Request",
    "somethingelse" => "Application_Feed_Item_Somethingelse"
);

//Process every item
foreach($feeditems as $item) {
    $type = $item['source'];
    if(!array_key_exists($type, $types)) {
        throw new Exception("Unsupported feeditem type.");
    }
    $type = $types[$type];

    $renderer = new $type($item);
    echo $renderer->render();
} 
```

对于实现它的方法只是一个松散的想法。但正如另一位用户所说，有许多不同的方法可以做到这一点，具体取决于您的要求。您在问题中使用的方法可以正常工作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T18:22:46.587

给猫剥皮的方法有很多种。同样，有许多方法可以达到您需要的相同结果。

“改进” IMO 的一些建议是——

**1\. 使用 AJAX 调用将此数据作为预生成的 HTML 获取。**

加载页面后使用 AJAX 调用，您可以让服务器构建用户活动提要的 HTML 段。这将使您的页面加载速度更快，并且您的内容将在不久之后加载。

您甚至不必在服务器上构建 HTML - 您也可以从 AJAX 调用传回 JSON 对象并使用 JavaScript 构建您的 HTML。

**2\. 创建用户提要的缓存静态 HTML 文件，该文件简单地包含在标记中。**

您可以让您的服务器以特定的时间间隔（例如每 30 分钟）生成用户提要所需的所有 HTML，然后将该 HTML 保存到一个文件中以包含在现有 HTML 中。您可以使用 PHP 的`include()`函数来执行此操作。

使用此方法，活动提要在刷新时会有延迟，因此它可能不是最佳选择 - 但如果您将间隔缩短 - 例如每 5 分钟一次，您将节省大量对数据库的调用。

查看[cron 作业](http://en.wikipedia.org/wiki/Cron)- 您可以使用它们来安排更新。

**3\. 在您的数据库中放置一个`index`字段`user_id`，因为您正在使用它来按用户搜索。**

这是非常重要的，特别是如果您希望数据库中存在许多条目。在用于搜索表的字段上放置索引将大大提高查询的性能。

* * *

我敢肯定这里还有很多可以建议的东西。

# java - PreferenceActivity 上的 onItemClickListener

> ID：10064856
> 
> 赞同：0
> 
> 时间：2012-04-08T17:34:29.487
> 
> 标签：java, android, listview, preferenceactivity, preferencescreen

我试图检索按下按钮的位置，在`Preference`. 我的课扩展了`PreferenceActivity`。这是我的代码：

```
ListView listView = getListView();
    listView.setOnItemClickListener(new AdapterView.OnItemClickListener() {
        public void onItemClick(AdapterView<?> av, View view, int i, long l) {
            Toast.makeText(Activity.this, "myPos "+i, Toast.LENGTH_LONG).show();
        }
    }); 
```

我的 XML 是这样的

```
<PreferenceScreen xmlns:android="http://schemas.android.com/apk/res/android">
        <Preference
        android:key="key1"
        android:title="string1"
        android:summary="summary1"
        android:icon="@drawable/someicon"/>
        <Preference
        android:key="key2"
        android:title="string2"
        android:summary="summary2"
        android:icon="@drawable/someicon2"/>
        ...
</PreferenceScreen> 
```

我在吐司上一无所获，所以没有调用 onItemClickListener。

提前致谢。

编辑：感谢您不回答，我这样回答自己：D

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T00:18:53.047

顺便说一句，我无法解决这个`OnItemClickListener`问题，所以我进行了一个循环以分配给每个首选项`onPreferenceClick`

# sql - sqlzoo joinII 练习 - 电影数据库 4a

> ID：10064859
> 
> 赞同：0
> 
> 时间：2012-04-08T17:35:09.157
> 
> 标签：sql

这是问题是[sqlzoo](http://sqlzoo.net/)，我写了以下代码，但我觉得它太多余了

```
SELECT year, freq 
FROM (SELECT yr AS year,count(title) AS freq
FROM movie, actor, casting
WHERE name= 'John Travolta'
AND movie.id=movieid
AND actor.id=actorid
GROUP BY yr) AS a
WHERE freq=(
SELECT MAX(freq)
FROM (SELECT yr AS year,count(title) AS freq
FROM movie, actor, casting
WHERE name= 'John Travolta'
AND movie.id=movieid
AND actor.id=actorid
GROUP BY yr) AS b
) 
```

为什么不能这样？

```
SELECT year, freq 
FROM (SELECT yr AS year,count(title) AS freq
FROM movie, actor, casting
WHERE name= 'John Travolta'
AND movie.id=movieid
AND actor.id=actorid
GROUP BY yr) AS a
WHERE freq=(
SELECT MAX(freq)
FROM a
) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T19:26:00.197

在这种情况下，使用 CTE（通用表表达式）可能会有所帮助。这是您可以重用子查询的唯一方法。看看如何使用`ROW_NUMBER`来找到最大频率。我还将旧学校更新为`FROM A, B, C WHERE ...`新学校`FROM A INNER JOIN B ...`（虽然我不能 100% 确定 JOIN 标准是否正确。）

```
WITH a AS
(
    SELECT 
        yr AS year, 
        COUNT(title) AS freq
    FROM 
        movie
    INNER JOIN 
        casting ON movie.id = casting.movieid
    INNER JOIN 
        actor ON actor.id = casting.actorid
    WHERE 
        name = 'John Travolta'
    GROUP BY 
        yr),
b AS
(
     SELECT 
         year, freq,
         ROW_NUMBER() OVER (ORDER BY freq DESC) as RowNum
     FROM a
)
SELECT year, freq 
FROM  b
WHERE RowNum = 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T17:47:12.303

每当您编写子查询时，首先评估内部查询，然后评估外部查询。在您的第二个查询中，您使用的别名“a”实际上并不存在。这就是您在第二个查询中会出错的原因你不能使用它。第一个查询在语法上是正确的。

# java - java.sql.SQLSyntaxErrorException：ORA-01745：托管 bean 中的主机/绑定变量名无效

> ID：10064860
> 
> 赞同：2
> 
> 时间：2012-04-08T17:35:29.517
> 
> 标签：java, sql, oracle

我有这个基于本[教程](http://balusc.blogspot.com/2008/10/effective-datatable-paging-and-sorting.html)的托管 bean 。

```
import java.io.Serializable;
import javax.enterprise.context.SessionScoped;
// or import javax.faces.bean.SessionScoped;
import javax.inject.Named;
/* include SQL Packages */
import java.sql.Connection;
import java.sql.PreparedStatement;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.util.ArrayList;
import java.util.Date;
import java.util.HashMap;
import java.util.List;
import java.util.Map;
import javax.annotation.PostConstruct;
import javax.sql.DataSource;
import javax.annotation.Resource;
import javax.faces.component.UICommand;
import javax.faces.context.FacesContext;
import javax.inject.Inject;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpSession;
// or import javax.faces.bean.ManagedBean; 
import javax.faces.event.ActionEvent;

import org.glassfish.osgicdi.OSGiService;

// source http://balusc.blogspot.com/2008/10/effective-datatable-paging-and-sorting.html

@Named("SessionsController")
@SessionScoped
public class Sessions implements Serializable {

    /* Call the Oracle JDBC Connection driver */
    @Resource(name = "jdbc/Oracle")
    private DataSource ds;
    // Data.
    private List<ActiveSessionObj> dataList;
    private int totalRows;
    // Paging.
    private int firstRow;
    private int rowsPerPage;
    private int totalPages;
    private int pageRange;
    private Integer[] pages;
    private int currentPage;
    // Sorting.
    private String sortField;
    private boolean sortAscending;

    private static class ActiveSessionObj {

        /* Oracle table structure
        CREATE TABLE ACTIVESESSIONSLOG(
        ASESSIONID VARCHAR2(30 ) NOT NULL,
        USERID VARCHAR2(30 ),
        ACTIVITYSTART TIMESTAMP(6),
        ACTIVITYEND TIMESTAMP(6),
        ACTIVITY CLOB
        )
         */
        private String aSessionID;
        private String userID;
        private Date activityStart;
        private Date activityEnd;
        private String activity;

        public ActiveSessionObj(String aSessionID, String userID, Date activityStart, Date activityEnd, String activity) {
            this.aSessionID = aSessionID;
            this.userID = userID;
            this.activityStart = activityStart;
            this.activityEnd = activityEnd;
            this.activity = activity;
        }

        public String getaSessionID() {
            return aSessionID;
        }

        public void setaSessionID(String aSessionID) {
            this.aSessionID = aSessionID;
        }

        public String getActivity() {
            return activity;
        }

        public void setActivity(String activity) {
            this.activity = activity;
        }

        public Date getActivityEnd() {
            return activityEnd;
        }

        public void setActivityEnd(Date activityEnd) {
            this.activityEnd = activityEnd;
        }

        public Date getActivityStart() {
            return activityStart;
        }

        public void setActivityStart(Date activityStart) {
            this.activityStart = activityStart;
        }

        public String getUserID() {
            return userID;
        }

        public void setUserID(String userID) {
            this.userID = userID;
        }

        private ActiveSessionObj() {
            throw new UnsupportedOperationException("Not yet implemented");
        }
    }

    // Constructors -------------------------------------------------------------------------------
    public Sessions() {
        // Set default values somehow (properties files?).
        rowsPerPage = 10; // Default rows per page (max amount of rows to be displayed at once).
        pageRange = 10; // Default page range (max amount of page links to be displayed at once).
        sortField = "ASESSIONID"; // Default sort field.
        sortAscending = true; // Default sort direction.
    }

    // Paging actions -----------------------------------------------------------------------------
    public void pageFirst() {
        page(0);
    }

    public void pageNext() {
        page(firstRow + rowsPerPage);
    }

    public void pagePrevious() {
        page(firstRow - rowsPerPage);
    }

    public void pageLast() {
        page(totalRows - ((totalRows % rowsPerPage != 0) ? totalRows % rowsPerPage : rowsPerPage));
    }

    public void page(ActionEvent event) {
        page(((Integer) ((UICommand) event.getComponent()).getValue() - 1) * rowsPerPage);
    }

    private void page(int firstRow) {
        this.firstRow = firstRow;
        loadDataList(); // Load requested page.
    }

    // Sorting actions ----------------------------------------------------------------------------
    public void sort(ActionEvent event) {
        String sortFieldAttribute = (String) event.getComponent().getAttributes().get("sortField");

        // If the same field is sorted, then reverse order, else sort the new field ascending.
        if (sortField.equals(sortFieldAttribute)) {
            sortAscending = !sortAscending;
        } else {
            sortField = sortFieldAttribute;
            sortAscending = true;
        }

        pageFirst(); // Go to first page and load requested page.
    }

    // Loaders ------------------------------------------------------------------------------------
    private void loadDataList() {

        // Load list and totalCount.
        try {
            dataList = list(firstRow, rowsPerPage, sortField, sortAscending);
            totalRows = count(); //count the tablerows
        } catch (Exception e) {
            throw new RuntimeException(e); // Handle it yourself.
        }

        // Set currentPage, totalPages and pages.
        currentPage = (totalRows / rowsPerPage) - ((totalRows - firstRow) / rowsPerPage) + 1;
        totalPages = (totalRows / rowsPerPage) + ((totalRows % rowsPerPage != 0) ? 1 : 0);
        int pagesLength = Math.min(pageRange, totalPages);
        pages = new Integer[pagesLength];

        // firstPage must be greater than 0 and lesser than totalPages-pageLength.
        int firstPage = Math.min(Math.max(0, currentPage - (pageRange / 2)), totalPages - pagesLength);

        // Create pages (page numbers for page links).
        for (int i = 0; i < pagesLength; i++) {
            pages[i] = ++firstPage;
        }
    }

    // Getters ------------------------------------------------------------------------------------
    public List<ActiveSessionObj> getDataList() {
        if (dataList == null) {
            loadDataList(); // Preload page for the 1st view.
        }
        return dataList;
    }

    public int getTotalRows() {
        return totalRows;
    }

    public int getFirstRow() {
        return firstRow;
    }

    public int getRowsPerPage() {
        return rowsPerPage;
    }

    public Integer[] getPages() {
        return pages;
    }

    public int getCurrentPage() {
        return currentPage;
    }

    public int getTotalPages() {
        return totalPages;
    }

    // Setters ------------------------------------------------------------------------------------
    public void setRowsPerPage(int rowsPerPage) {
        this.rowsPerPage = rowsPerPage;
    }

    // Actions ------------------------------------------------------------------------------------
    /**
     * Returns list of ActiveSessionObj items starting at the given first index with the given row count,
     * sorted by the given sort field and sort order.
     * @param firstRow First index of rows to be returned.
     * @param rowCount Amount of rows to be returned.
     * @param sortField Field to sort the data on.
     * @param sortAscending Whether to sort data ascending or not.
     * @return list of ActiveSessionObj items starting at the given first index with the given row count,
     * sorted by the given sort field and sort order.
     * @throws DAOException If something fails at DAO level.
     */
    public List<ActiveSessionObj> list(int firstRow, int rowCount, String sortField, boolean sortAscending) throws SQLException {

        String SQL_LIST_BY_ORDER_AND_LIMIT = "SELECT * FROM ACTIVESESSIONSLOG WHERE ROWNUM >= ? AND ROWNUM <= ? ORDER BY ? ?";     

        if (ds == null) {
            throw new SQLException();
        }

        String sortDirection = sortAscending ? "ASC" : "DESC";
        String sql = String.format(SQL_LIST_BY_ORDER_AND_LIMIT, sortField, sortDirection);
        Connection conn = ds.getConnection();
        PreparedStatement preparedStatement = null;
        ResultSet resultSet = null;
        List<ActiveSessionObj> dataList = new ArrayList<ActiveSessionObj>();

        try {
            conn.setAutoCommit(false);
            boolean committed = false;
            preparedStatement = conn.prepareStatement(sql);
            preparedStatement.setInt(1, firstRow);
            preparedStatement.setInt(2, rowCount);
            preparedStatement.setString(3, sortField);
            preparedStatement.setString(4, sortDirection);                   

            resultSet = preparedStatement.executeQuery();
            /* take the result from the SQL query and insert it into Array List collection */
            dataList = ActiveSessionsArrayList(resultSet);

        } catch (SQLException e) {
            throw new SQLException(e);
        } finally {
            conn.close();
        }

        return dataList;
    }

    /**
     * Returns total amount of rows in table.
     * @return Total amount of rows in table.
     * @throws DAOException If something fails at DAO level.
     */
    public int count() throws Exception {

        String SQL_COUNT = "SELECT count(*) FROM ACTIVESESSIONSLOG";

        PreparedStatement preparedStatement = null;
        ResultSet resultSet = null;
        int count = 0;

        try {
            Connection conn = ds.getConnection();
            preparedStatement = conn.prepareStatement(SQL_COUNT);
            resultSet = preparedStatement.executeQuery();
            if (resultSet.next()) {
                count = resultSet.getInt(1);
            }
        } catch (SQLException e) {
            throw new Exception(e);
        } finally {
            //close the connection
        }

        return count;
    }

    /**
     * Map the current row of the given ResultSet to ActiveSessionObj.
     * @param resultSet The ResultSet of which the current row is to be mapped to ActiveSessionObj.
     * @return The mapped ActiveSessionObj from the current row of the given ResultSet.
     * @throws SQLException If something fails at database level.
     */
    private static ArrayList<ActiveSessionObj> ActiveSessionsArrayList(ResultSet rs) throws SQLException 
    {
        ArrayList<ActiveSessionObj> al = null;

        try
        {
            while(rs.next())
            {
                al.add(new ActiveSessionObj(
                rs.getString("ASESSIONID"),
                rs.getString("USERID"),
                timestampToDate(rs.getTimestamp("ACTIVITYSTART")),
                timestampToDate(rs.getTimestamp("ACTIVITYEND")),
                rs.getString("ACTIVITY")

                ));
            }
        }
        catch(Exception x) {x.printStackTrace();}

        return al;

        /*
        CREATE TABLE ACTIVESESSIONSLOG(
        ASESSIONID VARCHAR2(30 ) NOT NULL,
        USERID VARCHAR2(30 ),
        ACTIVITYSTART TIMESTAMP(6),
        ACTIVITYEND TIMESTAMP(6),
        ACTIVITY CLOB
        )
         */
    }
    // select all button handle
    private Map<Long, Boolean> selectedIds = new HashMap<Long, Boolean>();

    // get the list from the JSF page
    public Map<Long, Boolean> getSelectedIds() {
        return selectedIds;
    }

    // call this method from the JSF page to delete the selected rows
    public String deleteAction() {

        // do something with the selected rows
        return null;
    }

    private static Date timestampToDate(java.sql.Timestamp ts)
    {
        Date d = null;
        try
        {
            d = new Date(ts.getTime());
        }
        catch (Exception e) { e.printStackTrace(); }

        return d;
    }
} 
```

在 Glassfish 中运行代码时出现此错误堆栈：

```
java.lang.RuntimeException: java.sql.SQLException: java.sql.SQLSyntaxErrorException: ORA-01745: invalid host/bind variable name

    at com.DX_57.HM_57.Sessions.loadDataList(Sessions.java:193)
    at com.DX_57.HM_57.Sessions.getDataList(Sessions.java:214)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at javax.el.BeanELResolver.getValue(BeanELResolver.java:363)
    at com.sun.faces.el.DemuxCompositeELResolver._getValue(DemuxCompositeELResolver.java:176)
    at com.sun.faces.el.DemuxCompositeELResolver.getValue(DemuxCompositeELResolver.java:203)
    at com.sun.el.parser.AstValue.getValue(AstValue.java:138)
    at com.sun.el.parser.AstValue.getValue(AstValue.java:183)
    at com.sun.el.ValueExpressionImpl.getValue(ValueExpressionImpl.java:224)
    at com.sun.faces.facelets.el.TagValueExpression.getValue(TagValueExpression.java:109)
    at javax.faces.component.ComponentStateHelper.eval(ComponentStateHelper.java:194)
    at javax.faces.component.ComponentStateHelper.eval(ComponentStateHelper.java:182)
    at javax.faces.component.UIData.getValue(UIData.java:731)
    at javax.faces.component.UIData.getDataModel(UIData.java:1798)
    at javax.faces.component.UIData.setRowIndexWithoutRowStatePreserved(UIData.java:484)
    at javax.faces.component.UIData.setRowIndex(UIData.java:473)
    at com.sun.faces.renderkit.html_basic.TableRenderer.encodeBegin(TableRenderer.java:81)
    at javax.faces.component.UIComponentBase.encodeBegin(UIComponentBase.java:820)
    at javax.faces.component.UIData.encodeBegin(UIData.java:1118)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1755)
    at javax.faces.render.Renderer.encodeChildren(Renderer.java:168)
    at javax.faces.component.UIComponentBase.encodeChildren(UIComponentBase.java:845)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1757)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1760)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1760)
    at com.sun.faces.application.view.FaceletViewHandlingStrategy.renderView(FaceletViewHandlingStrategy.java:402)
    at com.sun.faces.application.view.MultiViewHandler.renderView(MultiViewHandler.java:131)
    at com.sun.faces.lifecycle.RenderResponsePhase.execute(RenderResponsePhase.java:121)
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
    at com.sun.faces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:139)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:594)
    at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1542)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:281)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
    at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:655)
    at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:595)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:161)
    at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:331)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:231)
    at com.sun.enterprise.v3.services.impl.ContainerMapper$AdapterCallable.call(ContainerMapper.java:317)
    at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
    at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:849)
    at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:746)
    at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1045)
    at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:228)
    at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
    at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
    at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
    at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
    at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
    at java.lang.Thread.run(Thread.java:722)
Caused by: java.sql.SQLException: java.sql.SQLSyntaxErrorException: ORA-01745: invalid host/bind variable name

    at com.DX_57.HM_57.Sessions.list(Sessions.java:289)
    at com.DX_57.HM_57.Sessions.loadDataList(Sessions.java:190)
    ... 57 more
Caused by: java.sql.SQLSyntaxErrorException: ORA-01745: invalid host/bind variable name

    at oracle.jdbc.driver.T4CTTIoer.processError(T4CTTIoer.java:445)
    at oracle.jdbc.driver.T4CTTIoer.processError(T4CTTIoer.java:396)
    at oracle.jdbc.driver.T4C8Oall.processError(T4C8Oall.java:879)
    at oracle.jdbc.driver.T4CTTIfun.receive(T4CTTIfun.java:450)
    at oracle.jdbc.driver.T4CTTIfun.doRPC(T4CTTIfun.java:192)
    at oracle.jdbc.driver.T4C8Oall.doOALL(T4C8Oall.java:531)
    at oracle.jdbc.driver.T4CPreparedStatement.doOall8(T4CPreparedStatement.java:207)
    at oracle.jdbc.driver.T4CPreparedStatement.executeForDescribe(T4CPreparedStatement.java:884)
    at oracle.jdbc.driver.OracleStatement.executeMaybeDescribe(OracleStatement.java:1167)
    at oracle.jdbc.driver.OracleStatement.doExecuteWithTimeout(OracleStatement.java:1289)
    at oracle.jdbc.driver.OraclePreparedStatement.executeInternal(OraclePreparedStatement.java:3584)
    at oracle.jdbc.driver.OraclePreparedStatement.executeQuery(OraclePreparedStatement.java:3628)
    at oracle.jdbc.driver.OraclePreparedStatementWrapper.executeQuery(OraclePreparedStatementWrapper.java:1493)
    at com.sun.gjc.spi.jdbc40.PreparedStatementWrapper40.executeQuery(PreparedStatementWrapper40.java:642)
    at com.DX_57.HM_57.Sessions.list(Sessions.java:284)
    ... 58 more 
```

我认为 SQL 查询不正确或准备好的语句有问题。这个查询的正确方法是什么？

最良好的祝愿

**编辑**这是 Oracle 表：

```
-- TABLE ACTIVESESSIONSLOG

CREATE TABLE ACTIVESESSIONSLOG(
  ASESSIONID VARCHAR2(30 ) NOT NULL,
  USERID VARCHAR2(30 ),
  ACTIVITYSTART TIMESTAMP(6),
  ACTIVITYEND TIMESTAMP(6),
  ACTIVITY CLOB
)
/

-- ADD KEYS FOR TABLE ACTIVESESSIONSLOG

ALTER TABLE ACTIVESESSIONSLOG ADD CONSTRAINT ASESSIONID PRIMARY KEY (ASESSIONID)
/ 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-08T17:56:43.933

查询是问题，或者更确切地说是查询参数。您只能绑定值，不能绑定列名或 SQL 关键字。所以最后两个参数（在 ORDER BY 之后）必须更改。您可能已经为此做好了计划。否则`String.format`就没有意义了。

```
String SQL_LIST_BY_ORDER_AND_LIMIT = "SELECT * FROM ACTIVESESSIONSLOG WHERE ROWNUM >= ? AND ROWNUM <= ? ORDER BY %s %s";

....

String sql = String.format(SQL_LIST_BY_ORDER_AND_LIMIT, sortField, sortDirection); 
```

然后需要删除以下两行：

```
preparedStatement.setString(3, sortField);
preparedStatement.setString(4, sortDirection); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-07-02T07:25:22.283

在查询中查找预定义的关键字，即使您没有解决它。确保查询中的所有值都用逗号正确分隔。

我错过了一个逗号，我花了一个小时才弄明白。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T11:46:54.800

似乎我没有在 Codo 的回答中发表评论的声誉。

他的回答对我有帮助，但如果**sortField**和**sortDirection**是用户可以更改的参数，请注意**SQL Injection**。

在这种情况下如何防止sql注入？什么是最好的方法？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-05-21T13:57:09.587

查询部分有问题

1.  在查询 (IN) 或 (NOT IN) 条件值中的值不应超过 1000 个。
2.  如果您累积到 6(SIX) IN 条件（即）所有条件中的值不应超过 6635

# php - 如何在 jQuery 和 PHP 中验证表单

> ID：10064865
> 
> 赞同：2
> 
> 时间：2012-04-08T17:35:48.180
> 
> 标签：php, jquery

我有一个注册表单，我想使用 jQuery 进行验证，如果所有详细信息都正确，则将其传递给 PHP 以登录。

我正在尝试使用 Yendesigns 表单 - [http://yensdesign.com/2009/01/how-validate-forms-both-sides-using-php-jquery/](http://yensdesign.com/2009/01/how-validate-forms-both-sides-using-php-jquery/)

我的表单代码是：

```
<?php

require_once("includes/initialise.php");

if (isset($_POST['resetpassword']) && $_POST['resetpassword'] == 'resetnow') {
    $required = array('first_name','last_name','username','email','password','password2');
    $missing = array();
    $validation = array(
        'first_name'    => 'Please provide your first name',
        'last_name'     => 'Please provide your last name',
        'username'      => 'Please provide your username',
        'email'         => 'Please provide your valid email address',
        'password'      => 'Please provide your password',
        'password2'     => 'Please confirm your password',
        'userdup'       => 'Username already registered',
        'emaildup'      => 'Email address already registered',
        'mismatch'      => 'Passwords do not match'
    );

//Sanitise and clean function
$first_name = escape($_POST['first_name']);
$last_name = escape($_POST['last_name']);
$username = escape($_POST['username']);
$email = escape($_POST['email']);
$password = escape($_POST['password']);
$password2 = escape($_POST['password2']);

    foreach($_POST as $key => $value) {
        $value = trim($value);
        if(empty($value) && in_array($key,$required)) {
            array_push($missing,$key);
        } else {
            ${$key} = escape($value);
        }
    }

    if($_POST['email'] !="" && getDuplicate(1,'email','clients','email',$email)) {
        array_push($missing,'emaildup');
    }

    if($_POST['username'] !="" && getDuplicate(1,'username','clients','username',$username)) {
        array_push($missing,'userdup');
    }

    // Check User Passwords
    if( strcmp($_POST['password'], $_POST['password2']) != 0 ) {
        array_push($missing,'mismatch');
    }

    //validate email address
    if(!empty($_POST['email']) && !isEmail($_POST['email'])) {
        array_push($missing,'email');       
    }

    if(!empty($missing)) {
        $before = " <span class=\"errorred\">";
        $after = "</span>";
        foreach($missing as $item)
            ${"valid_".$item} = $before.$validation[$item].$after;
    } else {    
// stores MD5 of password
$passmd5 = md5($_POST['password']);

// stores clients IP addresss   
$user_ip = $_SERVER['REMOTE_ADDR'];
// Automatically collects the hostname or domain  like example.com) 
$host  = $_SERVER['HTTP_HOST'];
$host_upper = strtoupper($host);
$path   = rtrim(dirname($_SERVER['PHP_SELF']), '/\\');

$date = date('Y-m-d');
$time = date('H:i:s');

// Generates activation code simple 4 digit number
$hash = mt_rand().date('YmdHis').mt_rand();

//Insert Data
$sql = "INSERT INTO clients(first_name, last_name, username, email, password, date, time, `hash`)
        VALUES ('{$first_name}','{$last_name}','{$username}','{$email}','$passmd5','$date', '$time','$hash')";

$result = mysql_query($sql, $conndb) or die(mysql_error());

if($result)  {

        $to = $_POST['email'];
        $subject = 'Activate your account';
        $from = 'dummy@emailaddress.co.uk';

        $headers = "MIME-Version: 1.0\r\n";
        $headers .= "Content-type:text/html;charset=UTF-8\r\n";
        $headers .= "From: My Website Name <".$from.">\r\n";
        $headers .= "Reply-to: My Website Name <".$from.">\r\n";

        $message = '<div style="font-family:Arial, Verdana, Sans-serif; color:#333; font-size:12px">
        <p>Thank you for registering on our website</p>
        <p>Please click on the following link to activate your account: 

        <a href="http://'.$host.''.$path.'/activate.php?id='.$hash.'">http://'.$host.''.$path.'/activate.php?id='.$hash.'</a></p>

        <p>Here are your login details...</p>
        <p>User Name: '.$username.'</p>
        <p>Email: '.$email.' </p>
        <p>Passwd: '.$password.' </p>

        </p></div>';

        if (mail($to, $subject, $message, $headers)) {

            $confirmation = '<p>Thank you.<br />You have successfully registered.</p>';

        } else {

            $confirmation = '<p>Error.<br />Your activation link could not be sent.<br />Please contact administrator.</p>';
            }
        }
    }
}

require_once("includes/header.php");
?>

        <div class="block">
            <div class="block_head">
                    <div class="bheadl"></div>
                    <div class="bheadr"></div>

                    <h5>Register</h5>

                    <ul>
                        <li><a href="login.php">Login</a></li>
                    </ul>

        </div>      <!-- .block_head ends -->

        <div class="block_content">

      <?php echo isset($confirmation) ? $confirmation : NULL; ?>

    <form name="register" id="customForm" action="" method="post">

        <div>
            <label for="first_name">First Name: * <?php echo isset($valid_first_name) ? $valid_first_name : NULL; ?></label>
            <input id="first_name" name="first_name" type="text" class="fld" value="" />
            <span id="first_nameInfo"></span>
        </div>
        <div>
            <label for="last_name">Last Name: * <?php echo isset($valid_last_name) ? $valid_last_name : NULL; ?></label>
            <input id="last_name" name="last_name" type="text" class="fld" value="" />
            <span id="last_nameInfo"></span>
        </div>
        <div>
            <label for="username">Username: * <?php echo isset($valid_username) ? $valid_username : NULL; ?> <?php if(isset($valid_userdup)) { echo $valid_userdup; } ?></label>
            <input id="username" name="username" type="text" class="fld" value="" />
            <span id="usernameInfo"></span><span id="status"></span>
        </div>
        <div>
            <label for="email">E-mail: * <?php if(isset($valid_email)) { echo $valid_email; } ?> <?php if(isset($valid_emaildup)) { echo $valid_emaildup; } ?></label>
            <input id="email" name="email" type="text" class="fld" value="" />
            <span id="emailInfo"></span>
        </div>
        <div>
            <label for="pass1">Password: * <?php if(isset($valid_password)) { echo $valid_password; } ?></label>
            <input id="pass1" name="pass1" type="password" class="fld" value="" />
            <span id="pass1Info"></span>
        </div>
        <div>
            <label for="pass2">Confirm Password: * <?php if(isset($valid_password2)) { echo $valid_password2; } ?> <?php if(isset($valid_mismatch)) { echo $valid_mismatch; } ?></label>
            <input id="pass2" name="pass2" type="password" class="fld" value="" />
            <span id="pass2Info"></span>
        </div>
        <div>
            <input id="send" name="send" type="submit" value="Send" />
        </div>

        </table>
        <input type="hidden" name="resetpassword" value="resetnow" />
    </form>
</div>  

                <!-- .block_content ends -->

                <div class="bendl"></div>
                <div class="bendr"></div>

                    </div>

<?php
require_once("includes/footer.php");
?> 
```

jquery是：

```
/***************************/
//@Author: Adrian "yEnS" Mato Gondelle & Ivan Guardado Castro
//@website: www.yensdesign.com
//@email: yensamg@gmail.com
//@license: Feel free to use it, but keep this credits please!                  
/***************************/

$(document).ready(function(){
    //global vars
    var form = $("#customForm");
    var first_name = $("#first_name");
    var first_nameInfo = $("#first_nameInfo");
    var last_name = $("#last_name");
    var last_nameInfo = $("#last_nameInfo");
    var email = $("#email");
    var emailInfo = $("#emailInfo");
    var pass1 = $("#pass1");
    var pass1Info = $("#pass1Info");
    var pass2 = $("#pass2");
    var pass2Info = $("#pass2Info");
    var message = $("#message");

    //On blur
    first_name.blur(validateName);
    last_name.blur(validateLastName);
    email.blur(validateEmail);
    pass1.blur(validatePass1);
    pass2.blur(validatePass2);
    //On key press
    first_name.keyup(validateName);
    last_name.keyup(validateLastName);
    pass1.keyup(validatePass1);
    pass2.keyup(validatePass2);
    message.keyup(validateMessage);
    //On Submitting
    form.submit(function(){
        if(validateName() & validateLastName() & validateEmail() & validatePass1() & validatePass2() & validateMessage())
            return true
        else
            return false;
    });

    //validation functions
    function validateEmail(){
        //testing regular expression
        var a = $("#email").val();
        var filter = /^[a-zA-Z0-9]+[a-zA-Z0-9_.-]+[a-zA-Z0-9_-]+@[a-zA-Z0-9]+[a-zA-Z0-9.-]+[a-zA-Z0-9]+.[a-z]{2,4}$/;
        //if it's valid email
        if(filter.test(a)){
            email.removeClass("error");
            emailInfo.text("");
            emailInfo.removeClass("error");
            return true;
        }
        //if it's NOT valid
        else{
            email.addClass("error");
            emailInfo.text("Please provide a valid email address");
            emailInfo.addClass("error");
            return false;
        }
    }
    function validateName(){
        //if it's NOT valid
        if(first_name.val().length < 4){
            first_name.addClass("error");
            first_nameInfo.text("Please provide your first name (more than 3 letters)");
            first_nameInfo.addClass("error");
            return false;
        }
        //if it's valid
        else{
            first_name.removeClass("error");
            first_nameInfo.text("");
            first_nameInfo.removeClass("error");
            return true;
        }
    }

    function validateLastName(){
        //if it's NOT valid
        if(last_name.val().length < 4){
            last_name.addClass("error");
            last_nameInfo.text("Please provide your first name (more than 3 letters)");
            last_nameInfo.addClass("error");
            return false;
        }
        //if it's valid
        else{
            last_name.removeClass("error");
            last_nameInfo.text("");
            last_nameInfo.removeClass("error");
            return true;
        }
    }
    function validatePass1(){
        var a = $("#password1");
        var b = $("#password2");

        //it's NOT valid
        if(pass1.val().length <5){
            pass1.addClass("error");
            pass1Info.text("Please provide your password (at least 5 characters)");
            pass1Info.addClass("error");
            return false;
        }
        //it's valid
        else{           
            pass1.removeClass("error");
            pass1Info.text("");
            pass1Info.removeClass("error");
            validatePass2();
            return true;
        }
    }
    function validatePass2(){
        var a = $("#password1");
        var b = $("#password2");
        //are NOT valid
        if( pass1.val() != pass2.val() ){
            pass2.addClass("error");
            pass2Info.text("Passwords doesn't match!");
            pass2Info.addClass("error");
            return false;
        }
        //are valid
        else{
            pass2.removeClass("error");
            pass2Info.text("");
            pass2Info.removeClass("error");
            return true;
        }
    }
    function validateMessage(){
        //it's NOT valid
        if(message.val().length < 10){
            message.addClass("error");
            return false;
        }
        //it's valid
        else{           
            message.removeClass("error");
            return true;
        }
    }
}); 
```

当我单击提交按钮时，表单通过 php 传递并停止 jquery。如果未按下提交按钮，则它将通过 jQuery 进行验证。

如果所有细节都正确通过 PHP 验证，我怎么能得到它。如果错误或用户禁用了 jQuery 以通过 PHP 进行验证？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T17:43:02.597

方法 1：在您的 jQuery 中（未经测试）：

```
$("#send").click(function(e) {
    e.preventDefault();
    // call javascript validation functions here
    // if valid then submit form:
    $("#customForm").submit();
}); 
```

编辑：如果用户没有 javascript，那么表单将像往常一样提交并仅在单击提交按钮时由 php 验证。但是如果启用了javascript，那么默认的提交操作将被阻止，您可以在提交表单之前先在客户端检查您想要检查的任何内容。

方法 2：代替上面的 jQuery 代码，您可以使用`onSubmit="return validate();"`表单属性调用您的 javascript 验证函数，如果有错误， `validate()`javascript 函数将返回。`false`这也将阻止表单直接提交 - 除非用户没有 javascript。

针对 ZAFER 评论的更新：

在方法 1 中，使用它可能会更好：

```
$("#customForm").submit(function(e) {
    e.preventDefault();
    // call javascript validation functions here
    // if valid then submit form:
    $(this).submit();
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T17:43:14.973

一个好的 Web 应用程序有两层验证：

*   输入通过javascript（例如jquery）在客户端进行验证。如果在不联系服务器的情况下立即完成验证，它将为用户提供更好的反馈。
*   输入在服务器端进行验证，以防止恶意用户绕过客户端验证（或只是禁用了 javascript 的用户）。也有验证规则难以在客户端实现的情况。

如果你想测试你的服务器端验证，最简单的可能是在浏览器中临时禁用 javascript。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-12T15:15:23.253

要插入数据库，我使用此功能。

```
/**
     * Takes an array or string and takes out malicous code.
     * @param array|string $var
     * @param string $key
     * @return string
     */
    function aspam($var, $returnZero = false, $key = '') {
        if (is_array($var) && !empty($key)) {
            /*
             * if var is array and key is set, use aspam on the array[key]
             * if not set, return 0 or ''
             */
            if (isset($var[$key])) {
                return general::aspam($var[$key], $returnZero);
            } else {
                return ($returnZero) ? 0 : '';
            }
        } elseif (is_array($var) && empty($key)) {
            /*
             * if var is array and key is empty iterate through all the members
             * of the array and aspam the arrays and take out malicous code of the
             * strings or integers.
             */
            $newVar = array();
            $newVal = '';
            foreach ($var as $key => $val) {
                if (is_array($val)) {
                    $newVal = general::aspam($val, $returnZero);
                } elseif (!empty($val)) {
                    $newVal = trim(htmlspecialchars($val, ENT_QUOTES));
                } else {
                    $newVal = ($returnZero) ? 0 : '';
                }
                $newVar[$key] = $newVal;
            }
            return $newVar;
        } elseif (!empty($var)) {
            /*
             * Strip malicous code
             */
            return trim(htmlspecialchars($var, ENT_QUOTES));
        } else {
            /*
             * return default 0 | '' if string was empty
             */
            return ($returnZero) ? 0 : '';
        }
    } 
```

要使用您放入数组中的此函数，然后告诉它是否要返回空或 0。

```
$product_id = aspam($_REQUEST, true, 'product_id'); 
```

带有 jquery 的 javascript 您可以遍历一个类并一次验证所有内容。

```
/*variable to check if it is valid*/
        var returnVar = true;
        $('.required').each(function () {
            if ($(this).is("select")) {
                if ($(this).val() > '0') {
                    /*Code for is valid*/
                    $(this).parent().removeClass("alert-danger");
                } else {
                    /*Code for is not valid*/
                    $(this).parent().addClass("alert-danger");
                    returnVar = false;
                }
            } else {
                if (!$(this).val()) {
                    /*Code for is valid*/
                    $(this).parent().addClass("alert-danger");
                    returnVar = false;
                } else {
                    /*Code for is not valid*/
                    $(this).parent().removeClass("alert-danger");
                }
            }
        });
        if(returnVar){
            /*submit form*/
        } 
```

# iphone - 向使用字母部分的 iPhone 应用程序添加搜索栏？

> ID：10064869
> 
> 赞同：0
> 
> 时间：2012-04-08T17:36:18.117
> 
> 标签：iphone, objective-c, ios, uitableview, uisearchbar

我有一个使用包含产品名称的 UITableView 的应用程序，这些产品也根据它们的第一个字母分成各自的部分。

这是我的代码：

```
- (void)viewDidLoad
{
    [super viewDidLoad];

        //Initialize alphabet array
        m_Alphabet = [[NSArray alloc]initWithObjects:@"A",@"B",@"C",@"D",@"E",@"F",@"G",@"H",@"I",@"J",@"K", @"L",@"M",@"N",@"O",@"P",@"Q",@"R",@"S",@"T",@"U",@"V",@"W",@"X",@"Y",@"Z",@"Other", nil];

        //Initialize alphabet distionary of arrays
        m_AlphabetDictionary = [[NSMutableArray alloc]init];

        //Populate distionary with a mutable array for each character
        //in the alphabet (plus one "Other" category)
        for (int i = 0; i < 27; i++)
            [m_AlphabetDictionary insertObject:[[NSMutableArray alloc] init] atIndex: i];

        // The number of products in the database
        appDelegate = (AppDelegate *)[[UIApplication sharedApplication] delegate];

        NSMutableArray *tempArray = [[NSMutableArray alloc] init];

        //For each product in the appDelgates products
        for (Product *product in appDelegate.m_Products){
            if ([product.category isEqualToString:productType]){

                [tempArray addObject:product];

                //firstLetter is equal to the first letter of the products name
                NSString * l_FirstLetter = [product.name substringToIndex:1];
                //convert firstString to uppercase
                l_FirstLetter = [l_FirstLetter uppercaseString];

                //The added flag ensures objects whose first letter isn't a letter
                //are added to array 26
                bool added = NO;

                for(int i=0; i<[m_Alphabet count]; i++){
                    //If the first letter of product name is equal to the letter at index i in theAlphabet
                    if ([l_FirstLetter isEqualToString:[m_Alphabet objectAtIndex:i]]) {
                        //Add product to section array for that letter
                        [[m_AlphabetDictionary objectAtIndex:i] addObject:product];

                        added = YES;
                    }

                }
                //If product hasn't been added to array, add it to "Others" category
                if(!added)
                    [[m_AlphabetDictionary objectAtIndex:26] addObject:product];

            }
        }

    //Set navigation controller title
    self.title = productType;

}

//Number of sections is equal to the length of the m_Alphabet array
//Letters A-Z plus "Other"
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView 
{
        return [m_Alphabet count]; 
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section 
{
        return [[m_AlphabetDictionary objectAtIndex:section] count]; 
}

- (NSArray *)sectionIndexTitlesForTableView:(UITableView *)tableView 
{
    return m_Alphabet; 
}

- (NSInteger)tableView:(UITableView *)tableView sectionForSectionIndexTitle:(NSString *)title atIndex:(NSInteger)index 
{
    return [m_Alphabet indexOfObject:title]; 
}

- (NSString *)tableView:(UITableView *)aTableView titleForHeaderInSection:(NSInteger)section
{
    if ([[m_AlphabetDictionary objectAtIndex:section] count]==0) 
        return nil;

    return [m_Alphabet objectAtIndex:section]; 
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    NSLog(@"Cell for row");
        static NSString *CellIdentifier = @"Cell";

        UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
        if (cell == nil) {
            cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
        }

    if([self.productType isEqualToString:@"All"]){
        Product *product = (Product *) [appDelegate.m_Products objectAtIndex:indexPath.row];

        cell.textLabel.text = product.name;

        // Configure the cell.
        return cell;
    }
    else {

            //Instead of using appDelegate.products use the new array that will be filled
            //by the numberOfReowsInSection method
            Product *product = (Product *)[[m_AlphabetDictionary objectAtIndex:indexPath.section] objectAtIndex:indexPath.row];

            cell.textLabel.text = product.name;
            // Configure the cell.
            return cell;
    }
} 
```

我要做的是在我的表格视图顶部添加一个搜索栏，其行为就像 iPhone 联系人应用程序中“所有联系人”部分中的搜索栏一样。IE 当我搜索时，所有部分都消失了，只显示搜索结果，直到搜索栏再次空白。

谁能指出我正确的方向？

谢谢，

杰克

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-08T18:42:08.143

看起来您需要使用 [UISearchDisplayController](http://developer.apple.com/library/ios/#documentation/uikit/reference/UISearchDisplayController_Class/Reference/Reference.html)，这很可能是联系人应用程序使用的（以及邮件、地图、safari 和音乐）。它以表格视图覆盖的形式呈现，可能包含也可能不包含范围栏（您的选择），并根据搜索栏的文本过滤结果。[可以在这里](http://developer.apple.com/library/ios/#samplecode/TableSearch/Introduction/Intro.html)找到一个涉及界面构建器的简单教程，可以在[这里](http://ygamretuta.me/2011/08/10/ios-implementing-a-basic-search-uisearchdisplaycontroller-and-interface-builder/)找到一个苹果示例 sans-IB 。

# liferay - 如何向 Liferay 默认登录页面提交有效的用户请求

> ID：10064872
> 
> 赞同：1
> 
> 时间：2012-04-08T17:36:52.840
> 
> 标签：liferay

```
I am using Liferay 6 . 
```

我创建了一个页面并向其中添加了 6 个 portlet，并在 portal-ext.properties 文件中配置为 **auth.forward.by.last.path=true default.landing.page.path=/user/test/home**

只有当我使用 Liferay 的登录 Portlet（Liferay 的默认登录页面）时，才会显示这个包含我所有 6 个 portlet 的私有页面

同样，我的自定义 Portlet 由 struts2 制成，在输入 http:localhost:8086 时显示，如下所示

![在此处输入图像描述](../Images/7db706b86678601e84259f3801a10779.png)

```
<s:form action="helloForm" method="POST" theme="simple">
    Enter Your Name:<s:textfield name="namer" />
    Enter Your Name:<s:textfield name="passer" />
    <s:submit/>
</s:form> 
```

目前，当用户点击提交 Struts2 Action 类时，如图所示

```
public String execute() throws Exception {
    HttpServletRequest request = ServletActionContext.getRequest();
    String name = ParamUtil.getString(request, "namer");
    //  does Database check and decides the return page 
    return ActionSupport.SUCCESS;         
} 
```

现在我的要求是，如果他是有效用户，我想将他/她重定向到配置的登录页面

请告诉我如何做到这一点？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T21:58:45.890

```
HttpServletResponse response = ServletActionContext.getResponse();
String targetUrl = "/user/test/home";
response.sendRedirect(targetUrl); 
```

# web-services - 如何创建一个监听 tfs 2010 事件警报的网络服务？

> ID：10064873
> 
> 赞同：3
> 
> 时间：2012-04-08T17:36:59.027
> 
> 标签：web-services

我需要一个监听 tfs (2010) 的网络服务。当构建质量发生变化时，tfs 将触发警报。我想使用 Web 服务处理该 SOAP 消息。我如何创建它？有模板吗？我是 c# &.net 的菜鸟...如果有人给我一个模板会很有帮助...谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-09T02:52:31.650

我实际上将使用新的[ISubscriber](http://colinsalmcorner.blogspot.com/2011/12/isubscriber-getting-tfs-url-for-client.html)方法，而不是使用此方法来使用 WCF 事件处理程序。我们在Wrox 的[Professional Team Foundation Server 2010一书的第 25 章中还讨论了它的工作原理。](http://bit.ly/TFS2010Book)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-08T17:44:15.747

Web 服务通常发出请求，得到响应，然后离开。他们不会四处倾听。

**TFS 能够发送通知**。这是一个相当简单的过程。对于初学者，这是一篇[操作方法文章](https://social.technet.microsoft.com/wiki/contents/articles/how-to-configure-tfs-notifications-in-team-foundation-server-2010.aspx)，内容如下：

> TFS 通知在工作项更改、构建完成、构建属性更改等时发送警报很有用。

**编辑**：TFS 提供了几种类型的警报，包括电子邮件和 SOAP，正如这篇关于[如何订阅 TFS 警报](http://development.meritsolutions.com/matters/how-to-subscribe-to-tfs-alerts/)的帖子中所解释的那样：

> Microsoft Team Foundation Server (TFS) 包含一系列服务，包括版本控制、工作项跟踪和 EventService 服务。EventService 公开了一组事件，这些事件执行诸如发送电子邮件或基于**SOAP 的 Web 服务调用之类的**操作。

还有更多

> 如果您想收到所有新工作项的通知，无论它们被分配给谁，您都需要自定义订阅...第一个选项是使用 BisSubscribe 工具创建警报...首选消息传递类型：EmailHtml、EmailPlaintext ，或 SOAP。默认为 SOAP。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-08T21:25:38.013

开源项目[TFS Global Alerts](http://tfsalerts.codeplex.com/)正是实现了这一点。您可以[浏览](http://tfsalerts.codeplex.com/SourceControl/BrowseLatest)代码并将其用作模板。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-08T21:28:29.790

您可以创建 WCF 服务来接收这些警报。请参阅[“如何使用 WCF 订阅 TFS 2010 事件服务 [汇总小时数]”](http://www.ewaldhofman.nl/post/2010/08/02/How-to-use-WCF-to-subscribe-to-the-TFS-2010-Event-Service-rolling-up-hours.aspx)。

# c++ - WTL vista/7 原生外观中的 CreateSimpleReBar

> ID：10064874
> 
> 赞同：1
> 
> 时间：2012-04-08T17:37:20.633
> 
> 标签：c++, menubar, wtl

在 WTL 中使用 CreateSimpleReBar 时，主菜单栏在鼠标悬停时具有这种蓝色，而不是原生 vista/7 圆形和透明形状。同样出于某种原因，菜单栏似乎比通常的本地菜单栏高。

CreateSimpleReBar 是自己绘制菜单还是我遗漏了什么？

[http://imageshack.us/photo/my-images/259/wtlmainmenu.png/](http://imageshack.us/photo/my-images/259/wtlmainmenu.png/)

```
HWND hWndCmdBar = m_CmdBar.Create(m_hWnd, rcDefault, NULL, ATL_SIMPLE_CMDBAR_PANE_STYLE);
// attach menu
m_CmdBar.AttachMenu(GetMenu());

// load command bar images
m_CmdBar.LoadImages(IDR_MAINFRAME);
// remove old menu
SetMenu(NULL);

// Set m_hWndToolBar member
CreateSimpleReBar(ATL_SIMPLE_REBAR_NOBORDER_STYLE);

// Add a band to the rebar represented by m_hWndToolBar
AddSimpleReBarBand(hWndCmdBar); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T07:54:16.843

`CreateSimpleReBar`创建一个钢筋控件，菜单是钢筋带之一，由`m_CmdBar.Create`- WTL 的`CCommandBarCtrl`类创建。后者自定义绘制菜单以模仿操作系统行为，包括使用`COLOR_MENUHILIGHT`(atlctrlw.h) 突出显示蓝色。

# scheme - 方案：十进制数的精度

> ID：10064881
> 
> 赞同：1
> 
> 时间：2012-04-08T17:39:20.597
> 
> 标签：scheme, decimal, precision

我怎样才能转换`42.0`成`42.00`Scheme？
例如（在方案中）：
当我这样做时`(/ 20.00 2)`，我得到`10.0`. 我想要`10.00`作为上面的结果而不是`10.0`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-08T19:01:26.207

Óscar 的解决方案效果很好，但更简单的解决方案是使用[SRFI-48](http://srfi.schemers.org/srfi-48/srfi-48.html)，它提供了额外的格式指令。

`(display (format "~0,2F" (/ 20.00 2)))`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-08T18:03:19.143

`10.0`和所代表的对象`10.00`是相同的。R5RS 方案中没有固定精度的十进制数。您需要固定精度做什么？如果它与输出相关，则需要进行某种格式化打印。检查您的 Scheme 实现文档中有关 a `printf`or`format`函数的信息。另一方面，如果您确实需要十进制算术，则需要使用精确的比率并根据要使用的规则显式舍入，或者使用整数并将它们视为大小为 1/100 的单位。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-08T18:31:04.983

The numbers `10.0` and `10.00` are exactly the same. Maybe you want to format your output to a string with a fixed number of decimals to the right of the dot? try this:

```
(define (right-pad number len)
  (let* ((nstr (number->string number))
         (diff (- len (string-length nstr)))
         (pads (if (> diff 0) (make-string diff #\0) "")))
    (string-append nstr pads))) 
```

Use it like this:

```
(display (right-pad (/ 20.00 2) 5))
> 10.00 
```

Notice that the `len` parameter indicates the total amount of chars desired in the resulting string, *including* the dot. This solution has the advantage of being independent from external libraries.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-04-07T07:03:44.460

如果你使用球拍，我认为这会有所帮助。

[https://docs.racket-lang.org/reference/strings.html#%28def._%28%28lib。*球拍%2Fformat..rkt%29。*~7er%29%29](https://docs.racket-lang.org/reference/strings.html#%28def._%28%28lib._racket%2Fformat..rkt%29._~7er%29%29)

> (~r pi #:精度 4)
> 
> “3.1416”

# c# - C# 方法名称预期错误，使用 ParameterizedThreadStart

> ID：10064882
> 
> 赞同：0
> 
> 时间：2012-04-08T17:39:23.593
> 
> 标签：c#

我正在尝试线程并且相对较新。

我想要做的只是在传递参数的不同类上调用一个 void 。

```
 for (int i = 0; i < 1; i++)
        {
            foreach (DataRow dtRow in urlTable.Rows)
            {
                Thread thread = new Thread(new ParameterizedThreadStart(MasterCrawlerClass.MasterCrawlBegin(dtRow)));
            }
        }

 public static void MasterCrawlBegin(DataRow dtRow)
    {
        if (dtRow.ItemArray[0].ToString().Contains("$"))
        {
            linkGrabberwDates(dtRow.ItemArray[0].ToString(), "www");
        }
        else
        {
            NoDatesCarCrawler(dtRow.ItemArray[0].ToString(), "www");
        }

    } 
```

此外，我的意图是让 4 个线程运行，而每个线程只传递 1 个数据行。我不认为我现在拥有它是如何做到这一点的。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T17:47:37.757

这样的代码也应该工作：

```
for (int i = 0; i < 1; i++)
        {
            foreach (DataRow dtRow in urlTable.Rows)
            {
                Thread thread = new Thread(MasterCrawlerClass.MasterCrawlBegin);
                thread.Start(dtRow);
            }
        }

 public static void MasterCrawlBegin(object data)
    {
        var dtRow = (DataRow)data;

        if (dtRow.ItemArray[0].ToString().Contains("$"))
        {
            linkGrabberwDates(dtRow.ItemArray[0].ToString(), "www");
        }
        else
        {
            NoDatesCarCrawler(dtRow.ItemArray[0].ToString(), "www");
        }

    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T17:42:39.030

如果您希望这项工作以您尝试的方式工作，您必须让您的`MasterCrawlBegin`方法将 an`object`作为其参数，然后传入对该方法本身的引用：

```
Thread thread = new Thread(new ParameterizedThreadStart(MasterCrawlerClass.MasterCrawlBegin)); 
```

但是利用闭包和 lambda 函数比使用 ParameterizedThreadStart 类更容易。

```
Thread thread = new Thread(() => MasterCrawlerClass.MasterCrawlBegin(dtRow)); 
```

### 更新

在阅读了您对另一个答案的评论后，我认为您可能会从了解 .NET 4 的[Task Parallel Library](http://msdn.microsoft.com/en-us/library/dd460717.aspx)和[PLINQ](http://msdn.microsoft.com/en-us/library/dd460688.aspx)中受益。您可以像这样以非常优化的方式并行化整个集合：

```
urlTable.Rows.Cast<DataRow>().AsParallel()
    .ForAll(MasterCrawlerClass.MasterCrawlBegin); 
```

这将让框架计算出它认为应该使用多少线程。如果你想要更多的控制，有一些微调的方法，比如确保使用四个并发线程：

```
urlTable.Rows.Cast<DataRow>().AsParallel().WithDegreeOfParallelism(4)
    .ForAll(MasterCrawlerClass.MasterCrawlBegin); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-08T17:44:29.717

为了轻松实现这一点，还可以使用与数据行解析相关的内容，您可以只访问一个全局变量并避免像参数一样传递它。如果通过*解析*您的意思是从**读取**数据`DataRow`，那么您是安全的。如果您需要写入，最好实现一些锁定/同步机制，即使您现在完全确定**一个**线程*总是*访问自己的行。

希望这可以帮助。

# mapreduce - 使用 Map Reduce 计算唯一登录

> ID：10064883
> 
> 赞同：1
> 
> 时间：2012-04-08T17:39:31.370
> 
> 标签：mapreduce

假设我有一个非常大的具有这种格式的日志文件（基于用户登录的位置）

```
UserId1 , New York
UserId1 , New Jersey
UserId2 , Oklahoma
UserId3 , Washington DC
....
userId999999999, London 
```

请注意，UserId1 首先登录纽约，然后他飞往新泽西并从那里再次登录。

如果我需要获取多少个唯一用户登录（意味着 2 次登录将与 1 次登录相同的用户 ID），我应该如何映射和减少它？

我最初的计划是我想先把它映射成这种格式：

```
UserId1, 1
UserId1, 1
UserId2, 1
UserId3, 1 
```

然后将其减少到

```
UserId1, 2
UserId2, 1
UserId3, 1 
```

但这会导致输出数量仍然很大（特别是如果用户的常见行为是每天登录 1 或 2 次）。还是有更好的方法来实现这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T09:02:31.943

我建议在映射阶段使用自定义键。你可以参考[这里](http://developer.yahoo.com/hadoop/tutorial/module5.html#keytypes)的教程来编写和使用自定义键。自定义键应该有两部分 1) userid 2)placeid。所以基本上在映射器阶段你正在这样做。

```
emit(<userid, place>, 1) 
```

在 reduce 阶段，您只需要访问密钥并分别发出密钥的两个部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-11-04T23:26:56.863

做map-reduce。

例如，您有 10000 行数据，但一次只能处理 1000 行数据。

然后，处理 1000 行数据 10 次。

如果 10 次处理结果的总行数 > 1000：

再次执行上述步骤。

别的：

直接使用set。

# php - 正则表达式按字符拆分并捕获

> ID：10064885
> 
> 赞同：0
> 
> 时间：2012-04-08T17:39:33.353
> 
> 标签：php, regex, zend-framework

我正在寻找一个正则表达式来拆分和捕获 URL 路径，例如使用 example.com/param1/param2/param3 我希望捕获 param1、param2 和 param3。可能有未知数量的参数。这将与 PHP 的 preg_match 一起使用。这可以做到吗？

编辑：这将与 PHP 的 preg_match 一起使用，因为我将它用作 Zend 路由器规则。这可以做到吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-08T17:41:20.857

如果它总是 a ，则不需要正则表达式`/`，您可以将其分解为数组：

```
$array = explode('/', $url); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T17:52:22.923

取决于是否允许

```
(/[^/]*)+ 
```

这将给出多个匹配 /param1、/param2、/param3

然后去掉斜线

# php - Php Mailer 报错系统空间不足（错误代码：4.3.1）

> ID：10064886
> 
> 赞同：0
> 
> 时间：2012-04-08T17:40:11.753
> 
> 标签：php, linux, email, phpmailer, swiftmailer

我正在使用 phpmailer_5.2.1。当我尝试发送邮件时，我收到一个错误“SMTP 服务器错误：4.3.1 系统存储不足。”。我检查了我的磁盘空间，发现 /dev/sda 已满。我需要释放 /dev/sda/ 吗？我在正确的道路上吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T17:44:59.217

好吧，如果由于存储而出现错误，`/dev/sda/`您似乎必须在那里腾出一点空间..

# c# - 在 CLR 中如何创建和管理字符串？

> ID：10064890
> 
> 赞同：1
> 
> 时间：2012-04-08T17:40:37.993
> 
> 标签：c#, string, clr

我和我的朋友正在讨论 Dotnet 框架中的字符串，它们如何是引用类型但行为却像值类型（不可变）。我们都知道字符串是 CLR 内部的，但是在简短的讨论中我们并没有真正得出结论，字符串是如何由 CLR/Framework 创建和管理的。

例如，在下面的代码中，显然`s1`和`s2`是不同的实例，但是正如您所看到的，当我`s2.ToUpper()`执行结果时，请参考`s1`.

```
 public static void Main (string[] args)
    {
        string s1 = "HELLO";
        string s2 = "hello";

        Console.WriteLine (s1.GetHashCode()); //Prints 68624562
        Console.WriteLine (s2.GetHashCode()); //Prints 99162322
        Console.WriteLine (s2.ToUpper().GetHashCode()); //Prints 68624562 too!
    } 
```

所以，问题是调用`s2.ToUpper()`CLR 是否创建了新字符串`"HELLO"`并检查它是否已经存在，如果是，那么丢弃新创建的字符串？有人可以解释这里的魔法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-08T17:46:00.137

String.GetHashCode() 生成基于字符串*内容的哈希值。*因此，相同的字符串生成相同的哈希是完全自然的。这意味着您不能断定 ToUpper() 返回的字符串引用必须与 s1 引用匹配。事实并非如此，实施起来太昂贵了。

您可以通过测试此代码来验证：

```
 static void Main(string[] args) {
        var s1 = "hello";
        var s2 = "HELLO";
        var s3 = s1.ToUpper();
        bool eq = object.ReferenceEquals(s2, s3);
        System.Diagnostics.Debug.Assert(!eq);
    } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-08T17:47:16.070

`GetHashCode()`对于相同的输入，两个调用给出相同的结果并不奇怪，这就是散列的意义......

相反，当你这样做时：

```
Console.WriteLine(Object.ReferenceEquals(s2.ToUpper(), s1)); 
```

它只是返回`false`。因此，您确实有两个`string`实例，它们都具有相同的内容。

我认为您需要复习有关散列、散列码和相等性的知识。

还是您来自Java？也许您得到的印象是哈希码与对象引用值有关，因为`Object.getHashCode()`的文档指出：

> 在合理可行的情况下，由 Object 类定义的 hashCode 方法确实为不同的对象返回不同的整数。**（这通常通过将对象的内部地址转换为整数来实现，但 JavaTM 编程语言不需要这种实现技术。）**

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-08T17:45:39.277

您不能用于`GetHashCode()`唯一标识实例。对于具有相同值的两个不同对象，哈希码*必须相同。*否则它不能作为哈希码工作。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-08T17:57:34.967

s2.ToUpper() 只是方法调用，不会改变 s2 对象的值（s2 是 String 类型的对象）。它采用 s2 的值并返回具有“HELLO”值的 String 类的新实例（ToUpper() 方法的结果）。在 Main 函数的范围内仍然有两个对象 s1 和 s2，它们的值保持不变。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-08T18:03:48.360

要添加，请回答您的另一部分...

如果你也检查这个`Object.ReferenceEquals(s2.ToUpper(), s2)`，你会发现它也是错误的。

字符串是`immutable`- 在这种情况下意味着`ToUpper()`返回一个新实例。

所以答案是肯定的，“HELLO”是新字符串。

但是，正如其他人所说，`GetHashCode()`它只是一个“散列值”——它主要用于在处理散列和字典时有一个多样化的算法来“填充桶”。

或查看此链接[What is the best algorithm for a override System.Object.GetHashCode?](https://stackoverflow.com/questions/263400/what-is-the-best-algorithm-for-an-overridden-system-object-gethashcode) - 答案 - 让您很好地了解散列算法的工作原理 - 以及为什么它不是唯一的 - 以及为什么对于具有相同内容的字符串来说它可能是相同的。

或者这个[http://ericlippert.com/2011/02/28/guidelines-and-rules-for-getashcode/](http://ericlippert.com/2011/02/28/guidelines-and-rules-for-gethashcode/)

# visual-studio-2010 - 如何查看 EntityFramework 为我创建的数据库？

> ID：10064891
> 
> 赞同：0
> 
> 时间：2012-04-08T17:40:38.577
> 
> 标签：visual-studio-2010, entity-framework

刚从 MVC 4 和 Entity Framework 5（.net 4 的 4.4）开始。我已经定义了几个模型并将一些东西保存到数据库中。我想看看幕后发生了什么，但我不知道如何连接到这个数据库。我该怎么做？

我假设我可以[通过服务器资源管理器](http://i.imgur.com/OXxwz.png)以某种方式连接到它，但我不确定要选择哪些选项。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T04:04:03.523

您可以使用 DbContext.Database.Connection.ConnectionString 获取连接字符串 - 它会告诉您一切，因为它用于连接到数据库。然后在服务器资源管理器中，您应该知道是选择 SqlExpress 还是选择 SqlCompact 选项之一。

# c# - “无法将‘System.String’类型的对象转换为‘Payroll.EIR’类型”

> ID：10064893
> 
> 赞同：0
> 
> 时间：2012-04-08T17:41:03.767
> 
> 标签：c#

好吧，我有一个类“EIR”，它是一个基于其基类“ExpenseReport”的列表，如下所示：

```
 using System;
using System.Collections.Generic;
using System.Runtime.Serialization.Formatters.Binary;
using System.Runtime.Serialization;
using System.IO;
using System.Linq;
using System.Text;

namespace Payroll
{
    [Serializable]
    public class EIR : List<ExpenseItem>
    {   

    public void WriteToFile(string filename)
        {
            try
            {
                BinaryFormatter formatter = new BinaryFormatter();
                FileStream stream = new FileStream("D:\\myExpensesUpdated.bin", FileMode.Create, FileAccess.Write, FileShare.None);
                formatter.Serialize(stream, filename);
                stream.Close();
            }
            catch (Exception ex)
            {
                Console.WriteLine("Unable to serialize Expenses: {0}", ex.Message);
            }
        }

        public static EIR ReadFromFile(string filename)
    {
        EIR iRost = new EIR();
        try
        {
            BinaryFormatter formatter = new BinaryFormatter();
            FileStream stream = new FileStream("D:\\myExpensesUpdated.bin", FileMode.Open, FileAccess.Read, FileShare.Read);
            iRost = (EIR)formatter.Deserialize(stream);

        }
        catch (Exception ex)
        {
            Console.WriteLine("Unable to deserialize Expenses: {0}", ex.Message);
        }

        return iRost;            
    }            
        }
    }
} 
```

这个 ReadFromFile 部分是我遇到问题的地方：

在主程序中，这部分尝试调用 ReadFromFile 并显示新更新的项目，但我收到错误“无法将 'System.String' 类型的对象转换为 'Payroll.EIR' 类型”。

```
try
        {
            EIR expensesUpdated = EIR.ReadFromFile("D:\\myExpensesUpdated.bin");
            foreach (var e in expensesUpdated) Console.WriteLine("Updated: {0}", e.ToString());
        }
        catch (Exception ex)
        {
            Console.WriteLine(ex.Message);
        }
    } 
```

如何让 iRost 转换为 Payroll.EIR 类？有没有办法将序列化的字符串转换为类？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T18:01:13.590

您的问题已经在`WriteToFile`您实际序列化文件名而不是类的功能中。我没有尝试过，但这应该可以：

```
public void WriteToFile(string filename)
{
    try
    {
        BinaryFormatter formatter = new BinaryFormatter();
        FileStream stream = new FileStream(filename, FileMode.Create, FileAccess.Write, FileShare.None); // filename parameter instead of fixed path
        formatter.Serialize(stream, this); // class instance instead of filename parameter
        stream.Close();
    }
    catch (Exception ex)
    {
        Console.WriteLine("Unable to serialize Expenses: {0}", ex.Message);
    }
}

public static EIR ReadFromFile(string filename)
{
    EIR iRost = new EIR();
    try
    {
        BinaryFormatter formatter = new BinaryFormatter();
        FileStream stream = new FileStream(filename, FileMode.Open, FileAccess.Read, FileShare.Read); // filename parameter instead of fixed path
        iRost = (EIR)formatter.Deserialize(stream);
    }
    catch (Exception ex)
    {
        Console.WriteLine("Unable to deserialize Expenses: {0}", ex.Message);
    }

    return iRost;            
} 
```

您确定静默捕获所有异常并仅向控制台写入消息是个好主意吗？

# python - 如何“索引”作为主键和关系的 SQLAlchemy 模型属性

> ID：10064896
> 
> 赞同：1
> 
> 时间：2012-04-08T17:41:09.553
> 
> 标签：python, sqlalchemy

所以说我有一些类 X、Y 和 Z 使用 SQLAlchemy 声明性语法来定义一些简单的列和关系

要求：

1.  在类级别，`(X|Y|Z).primary_keys`返回
    各个类的'主键'（`InstrumentedAttribute` 对象）的集合我也想`(X|Y|Z).relations`以相同的方式引用类的关系

2.  在实例级别，我希望相同的属性引用这些属性的实例化值，无论它们是使用我自己的构造函数、单独的属性
    设置器还是 SQLAlchemy 在从数据库中检索行时所做的任何填充。

到目前为止，我有以下内容。

```
import collections 
import sqlalchemy
import sqlalchemy.ext.declarative
from sqlalchemy import MetaData, Column, Table, ForeignKey, Integer, String, Date, Text
from sqlalchemy.orm import relationship, backref

class IndexedMeta(sqlalchemy.ext.declarative.DeclarativeMeta):
        """Metaclass to initialize some class-level collections on models"""
    def __new__(cls, name, bases, defaultdict):
        cls.pk_columns = set()
        cls.relations = collections.namedtuple('RelationshipItem', 'one many')( set(), set())
        return super().__new__(cls, name, bases, defaultdict)

Base = sqlalchemy.ext.declarative.declarative_base(metaclass=IndexedMeta)

def build_class_lens(cls, key, inst):
    """Populates the 'indexes' of primary key and relationship attributes with the attributes' names. Additionally, separates "x to many" relationships from "x to one" relationships and associates "x to one" relathionships with the local-side foreign key column"""
    if isinstance(inst.property, sqlalchemy.orm.properties.ColumnProperty):
        if inst.property.columns[0].primary_key:
            cls.pk_columns.add(inst.key)

    elif isinstance(inst.property, sqlalchemy.orm.properties.RelationshipProperty):
        if inst.property.direction.name == ('MANYTOONE' or 'ONETOONE'):
            local_column = cls.__mapper__.get_property_by_column(inst.property.local_side[0]).key
            cls.relations.one.add( (local_column, inst.key) )
        else:
            cls.relations.many.add(inst.key)

sqlalchemy.event.listen(Base, 'attribute_instrument', build_class_lens)

class Meeting(Base):
    __tablename__ = 'meetings'
    def __init__(self, memo):
        self.memo = memo
    id = Column(Integer, primary_key=True)
    date = Column(Date)
    memo = Column('note', String(60), nullable=True)
    category_name = Column('category', String(60), ForeignKey('categories.name'))
    category = relationship("Category", backref=backref('meetings'))
    topics = relationship("Topic",
        secondary=meetings_topics,
        backref="meetings")

...
... 
```

好的，所以这让我在课堂上有所收获，尽管我觉得我在用元类做一些愚蠢的事情，并且我遇到了一些奇怪的间歇性错误，其中据称“sqlalchemy”模块未被识别`build_class_lens`并且评估为 Nonetype。

我不太确定我应该如何在实例级别进行。我查看了事件界面。我看到了 ORM 事件`init`，但它似乎`__init__`在我的模型上定义的函数之前运行，这意味着当时尚未填充实例属性，所以我无法在它们上构建我的“镜头”。我还想知道 Attribute 事件`set`是否有帮助。那是我的下一次尝试，尽管我仍然想知道这是否是最合适的方式。

总而言之，我真的想知道我是否错过了一些非常优雅的方法来解决这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T01:06:39.577

我认为带有声明性的元类事物遵循旧的 XML 说法，“如果你有问题，使用 XML，现在你有两个问题”。Python 中的元类非常有用，可以作为检测新类构造的钩子，仅此而已。我们现在有足够的事件，除了声明性已经做的事情之外，不需要使用元类。

在这种情况下，我会进一步说，尝试积极构建这些集合的方法并不值得 - 懒惰地生成它们要容易得多，如下所示：

```
from sqlalchemy import *
from sqlalchemy.orm import *
from sqlalchemy.ext.declarative import declarative_base
import collections
from sqlalchemy.orm.properties import RelationshipProperty

class memoized_classproperty(object):
    """A decorator that evaluates once at the class level, 
       assigns the new value to the class.
    """

    def __init__(self, fget, doc=None):
        self.fget = fget
        self.__doc__ = doc or fget.__doc__
        self.__name__ = fget.__name__

    def __get__(desc, self, cls):
        result = desc.fget(cls)
        setattr(cls, desc.__name__, result)
        return result

class Lens(object):
    @memoized_classproperty
    def pk_columns(cls):
        return class_mapper(cls).primary_key

    @memoized_classproperty
    def relations(cls):
        props = collections.namedtuple('RelationshipItem', 'one many')(set(), set())
        # 0.8 will have "inspect(cls).relationships" here
        mapper = class_mapper(cls)
        for item in mapper.iterate_properties:
            if isinstance(item, RelationshipProperty):
                if item.direction.name == ('MANYTOONE' or 'ONETOONE'):
                    local_column = mapper.get_property_by_column(item.local_side[0]).key
                    props.one.add((local_column, item.key))
                else:
                    props.many.add(item.key)
        return props

Base= declarative_base(cls=Lens)

meetings_topics = Table("meetings_topics", Base.metadata,
    Column('topic_id', Integer, ForeignKey('topic.id')),
    Column('meetings_id', Integer, ForeignKey('meetings.id')),
)
class Meeting(Base):
    __tablename__ = 'meetings'
    def __init__(self, memo):
        self.memo = memo
    id = Column(Integer, primary_key=True)
    date = Column(Date)
    memo = Column('note', String(60), nullable=True)
    category_name = Column('category', String(60), ForeignKey('categories.name'))
    category = relationship("Category", backref=backref('meetings'))
    topics = relationship("Topic",
        secondary=meetings_topics,
        backref="meetings")

class Category(Base):
    __tablename__ = 'categories'
    name = Column(String(50), primary_key=True)

class Topic(Base):
    __tablename__ = 'topic'
    id = Column(Integer, primary_key=True)

print Meeting.pk_columns
print Meeting.relations.one

# assignment is OK, since prop is memoized
Meeting.relations.one.add("FOO")

print Meeting.relations.one 
```

# c# - 给定字符串数组中第一次出现一个项目

> ID：10064897
> 
> 赞同：0
> 
> 时间：2012-04-08T17:41:19.517
> 
> 标签：c#, string

我正在寻找从给定字符串数组中获取**一个项目第一次出现的索引的方法：**

例如：

我有以下数组：

```
 string[] dlimiterArray =  { ":", ".", ",", " ", "-", ";" }; 
```

并且还有以下字符串：

```
string data = "hi hi bla bla bla user:myusername. bla bla bla"; 
```

我想第一次看到**其中一个**dlimiterArray 项目出现

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-08T17:43:56.440

使用[`String.IndexOfAny`](http://msdn.microsoft.com/en-us/library/11w09h50.aspx)：

```
int index = data.IndexOfAny(dlimiterArray); 
```

但是，您还需要更改`dlimiterArray`为 a `char[]`，而不是 a `string[]`：

```
char[] dlimiterArray =  { ':', '.', ',', ' ', '-', ';' }; 
```

# c# - c#如何make datagridview.selectRow = bindingsource.position？

> ID：10064900
> 
> 赞同：-1
> 
> 时间：2012-04-08T17:42:07.907
> 
> 标签：c#, winforms, datagridview, bindingsource

如何制作datagridview.selectRow = bindingsource.position？？

```
sorry, i have no idea.
the datagridview' rowindex is not equals to the bindingsource' position. 
it is because i have set a relation of the bindingsource. 
```

有人有建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T16:48:01.627

尝试使用正确的语法 datagridview.selectedRow = datagridview.rows(bindingsource.position) 我相信 bindingsource.position 返回一个您试图用作索引的整数。

# objective-c - 带有来自服务器的多维数组数据的 UITableView

> ID：10064904
> 
> 赞同：0
> 
> 时间：2012-04-08T17:42:38.653
> 
> 标签：objective-c, ios, xcode, json

我想从我的网络服务器获取数据，并将其放入 UITableView。此数据包括每行的三个值（电子邮件、用户 ID 和状态（在线或不在线））。现在，在 Web 服务器上打印出这些数据的最佳方法是什么，我可以将其转换为应用程序中的数组之类的东西？这如何与我知道的一个简单字符串一起工作，并且我在互联网上找到了 JSON-Tutorials，但是您可以下载适用于 iOS SDK 的 JSON 的链接不可用。还是有更好的方法从服务器获取数组？服务器必须“打印”出一个多维数组，其中包含每个联系人的电子邮件、用户 ID 和状态。

非常感谢您的帮助！

`#import <JSON/JSON.h>`不起作用，找不到文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T17:46:07.873

您需要使用[NSJSONSerialization](http://developer.apple.com/library/ios/#documentation/Foundation/Reference/NSJSONSerialization_Class/Reference/Reference.html)（仅在 iOS 5 中可用）

这是一个演示如何使用它的教程链接：[http ://www.raywenderlich.com/5492/working-with-json-in-ios-5](http://www.raywenderlich.com/5492/working-with-json-in-ios-5)

对于 iOS 4 及更低版本，您应该查看[SBJSON 库](http://stig.github.com/json-framework/)。

使用上述方法，您可以将数据转换为 a `NSArray`，其中可以在 a 中使用`UITableView`。

# c - C - 修改堆栈基指针地址

> ID：10064911
> 
> 赞同：2
> 
> 时间：2012-04-08T17:43:38.593
> 
> 标签：c, linux, pointers, stack

我想在堆上为每个函数调用分配一个堆栈帧，但为此我需要修改每个函数的堆栈基指针。

有没有办法在 Linux 下获取该指针并在 C 中修改它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-24T01:39:08.557

手动修改 ebp 的唯一（实用）方法是内联汇编或仅在汇编中编写函数。如果你有一个汇编函数，你可以做这样的事情（我对 x86 汇编没有什么经验，仅供参考）

```
; void function(void* heapPtr)

function:
    push ebp
    mov  reg, esp
    mov  esp, [esp+4]
    mov  ebp, esp
    ...
    mov  esp, reg
    pop  ebp
    ret 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-08T17:49:04.293

看看功能`alloca()`。不推荐使用它，但大多数编译器都有它的实现。

# ruby - Rails 应用中复杂数据结构的遍历

> ID：10064914
> 
> 赞同：2
> 
> 时间：2012-04-08T17:43:55.593
> 
> 标签：ruby, ruby-on-rails-3, database-design, iteration, tree-traversal

我有一个数据结构，其中主题具有子主题，子主题又具有子主题，从原始主题继续向下大约六个级别。这些主题中的每一个都有多个子主题。我正在寻找一种方法来遍历这些数据并带回与每个子主题相关的数据……就好像将我想要的数据拉到“下游”一样。

```
For example Given a topic structure:
Harry_Potter > Characters > Slitherin_House.videos 
```

（假设slitherin house 有每个成员的子主题，Malfoy、Crabbe 等。）我希望每个成员的视频出现在 Slitherin_House、Characters 和 Harry_Potter（每个祖先）的视频列表中。

我一直在环顾四周，偶然发现了[Ancestry](https://github.com/stefankroes/ancestry/%22Ancestry%22)和[Acts As Tree](https://github.com/amerine/acts_as_tree/%22Acts%20as%20Tree%22)并通读了代码并尝试使用它们，但它们似乎更多地面向事物的祖先方面，而不是访问和从孩子那里提取数据。

我也尝试过使用关联

```
 has_many :through, and has_and_belongs_to_many 
```

但在我尝试创建一个有效的遍历系统时没有成功。而且似乎无法完全理解如何做到这一点。

有没有人对这种困境有什么想法或建议？或者知道提供任何此类功能的宝石？

关系类和模型：（因为它应该像流一样流动）

```
class CreateStreams < ActiveRecord::Migration
  def change
    create_table :streams do |t|
      t.integer :downstream_id
      t.integer :upstream_id

      t.timestamps
    end

    add_index :streams, :downstream_id
    add_index :streams, :upstream_id
    add_index :streams, [:downstream_id, :upstream_id], unique: true
  end
end

# == Schema Information
#
# Table name: streams
#
#  id            :integer         not null, primary key
#  downstream_id :integer
#  upstream_id   :integer
#  created_at    :datetime        not null
#  updated_at    :datetime        not null
#

class Stream < ActiveRecord::Base
  attr_accessible :downstream_id

  belongs_to :subsidiary, class_name: "Topic"
  belongs_to :tributary, class_name: "Topic"

  validates :downstream_id, presence: true
  validates :upstream_id, presence: true

end 
```

主题模型

```
# == Schema Information
#
# Table name: topics
#
#  id         :integer         not null, primary key
#  name       :string(255)
#  created_at :datetime        not null
#  updated_at :datetime        not null
#  slug       :string(255)
#  wiki       :string(255)
#  summary    :string(255)

class Topic < ActiveRecord::Base
  extend FriendlyId
  attr_accessible :name, :wiki, :summary

  has_many :streams, foreign_key: "downstream_id", dependent: :destroy
  has_many :tributaries, through: :streams, source: :tributary
  has_many :reverse_streams, foreign_key: "upstream_id",
                             class_name:  "Stream", 
                             dependent:   :destroy
  has_many :subsidiaries, :through => :reverse_streams, source: :subsidiary

  friendly_id :name, use: :slugged

  validates :name, presence: true, length: { maximum: 50 },
                   uniqueness: { case_sensitive: false }

  def downstream?(other_topic)
    streams.find_by_downstream_id(other_topic.id)
  end

  def flow!(other_topic)
    streams.create!(downstream_id: other_topic.id)
  end

  def dam!(other_topic)
    streams.find_by_downstream_id(other_topic.id).destroy
  end
end 
```

注意：我还希望能够分配一个子主题，多个父母。例如，角色也有可能被置于“演员”之下。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T18:27:57.867

如果您想以一种简单的方式进行设置，我会选择递归关系。这意味着一个主题可以属于另一个主题（嵌套）

该主题的数据库模型如下所示：

话题

*   ID
*   topic_id
*   标题

那么模型将是：

```
class Topic < ActiveRecord::Base
  belongs_to :topic
  has_many :topics
end 
```

现在，如果你有一个话题。您可以通过做访问其父母，`.topic`并通过`.topics`. 没有父级的主题是顶级的，没有子级的主题是结束节点。

# git - 在 git push 中指定 'origin/master' 部分

> ID：10064918
> 
> 赞同：2
> 
> 时间：2012-04-08T17:44:22.383
> 
> 标签：git, push, git-branch, remote-branch

如果我执行 git push，我会看到涉及 3 个分支。1) 我正在处理的本地分支，比如'foo1' 2) 本地远程跟踪分支'origin/foo2'（在推/拉之后总是与远程 foo3 在同一个提交上） 3) 'foo3' in远程仓库。自然通常它们都被称为 foo，但我想要不同的名称，以便我可以正确理解 git 并在这里提出这个问题。我不明白在哪里可以指定 foo2。当我做

```
git push origin foo1:foo3 
```

并在我的 .git/config

```
[branch "master"]
remote = origin
merge = refs/remotes/origin/foo2 
```

第 1 点和第 3 点没问题，但我的本地仓库中没有 origin/foo2。我错过了什么？或者答案是我的远程跟踪分支*总是*以与遥控器完全相同的方式命名 - 这对我来说很好 - 我只是想正确理解 git。

在我的示例中，git-push 手册也只讨论了两个参考（refspec src 和 dst），第 1 点和第 3 点。更新远程仓库上的 dst 分支后，手册在哪里谈到了本地远程跟踪 ref 也更新了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T19:46:48.903

您在 git push 上看不到三个分支。只有两个

您所描述的`foo2`是 git pull (git fetch + git merge) 或`git rebase`:
(from [`git config`](http://schacon.github.com/git/git-config.html))

```
branch.<name>.merge 
```

> 与 一起定义`branch.<name>.remote`给定分支的上游分支。
> 它告诉`git fetch/git pull/git rebase`合并哪个分支并且还可以影响 git push（请参阅 参考资料`push.default`）。
> 在分支中时`<name>`，它告诉 git fetch 标记为合并的默认 refspec `FETCH_HEAD`。该值的处理方式类似于 refspec 的远程部分，并且必须与从“ `branch.<name>.remote`”给出的远程获取的 ref 匹配。
> 
> **合并信息被`git pull`（最初调用`git fetch`）用于查找默认分支以进行合并**。
> 如果没有这个选项，`git pull`默认合并第一个获取的 refspec。
> 指定多个值以获得章鱼合并。

请注意，*在*git1.7.10 之后，默认推送策略可能会更改为`matching`（`upstream`请参阅“[什么是结果`git push origin`？](https://stackoverflow.com/questions/4586687/what-is-the-result-of-git-push-origin/9749477#9749477) ”），这意味着，`branch.<name>.merge`定义一个*上游*分支（在没有 的情况下`branch.<name>.remote`），它可以默认用于一个`git push`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T19:50:05.253

没错，远程跟踪分支与远程仓库上的分支同名。否则会有些混乱！

所以，简单地代表远程中的`origin/foo3`分支。运行后将与遥控器正确同步。请注意，在运行时，您实际上是在运行。`foo3``origin``git fetch``git pull``git fetch ; git merge`

运行时`git push origin foo1:foo3`，您将本地分支推`foo1`送到远程分支`origin/foo3`。所以在你的情况下，指定一个分支是没有意义的`foo2`。

# python - 如何在pygtk中运行无限while循环？

> ID：10064925
> 
> 赞同：1
> 
> 时间：2012-04-08T17:45:10.557
> 
> 标签：python, loops, while-loop, pygtk

我正在 pygtk 中创建一个涉及运行无限循环的应用程序。我认为，循环会干扰 witk gtk.main()，因此应用程序没有响应。实际上，我正在构建一个服务器类型的应用程序，它不断地监听客户端连接。Plzzz 帮助....我是这方面的新手。

这是我最初尝试做的一个示例。（对于那些想要代码的人）

```
while 1:
  s=socket.socket(socket.AF_INET,socket.SOCK_STREAM)
  s.bind(('',2727))
  s.listen(1)
  c,d=s.accept()
  print d
  x=c.recv(1024) 
```

我最终将 gtk.main() 替换为：

```
while 1:
  s=socket.socket(socket.AF_INET,socket.SOCK_STREAM)
  s.bind(('',2727))
  s.listen(1)
  s.accept()
  gtk.main_iteration_do(False) 
```

它会起作用，但 s.accept() 会导致与之前相同的问题....有人可以帮忙吗

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T18:03:29.527

您可以通过以下方式强制您的应用程序处理挂起的 gtk 事件：

```
while True:
    #your code 

    while gtk.events_pending():
        gtk.main_iteration() 
```

但是，如果“您的代码”需要一段时间才能执行，您应该考虑在后台进程中实现它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T18:06:29.330

您可以使用第二个线程（docs.python.org/library/threading.html）。还有一种方法将 gtk 合并到您的循环中（通过使用 pygtk.org/docs/pygtk/...），但是由于您提到网络，我猜您正在使用阻塞调用，它也会阻塞循环，直到网络上发生某些事情。但是，在您向我们展示一些实际代码之前，我只能猜测。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-08T18:04:02.100

即使没有看到任何代码，我也很确定我知道这个问题的去向。pygtk 可能与其他 GUI 框架没有什么不同，因为它的主循环是一个事件循环。应用程序中的所有小部件都将它们的事件注册到此循环中，以便您的应用程序运行。在这些事件驱动的 GUI 框架中，您永远不应该阻塞主线程。主线程中的所有操作都应该相对较快地返回。

当您需要执行将要阻塞或执行大量处理的操作时，应将此功能移至单独的线程。如果您的网络循环将在其自己的事件循环中永远阻塞，则需要这样做。如果是这种情况，您将别无选择，只能使用线程。

我对 pygtk 不是特别熟悉，但是 PyQt/PySide 提供了一个函数，可以让你告诉事件循环进行处理。您可以将其粘贴在您在主线程中执行的循环中，以定期刷新事件。这将是在另一个线程中运行您的进程的替代方法。但同样，只有当你的其他代码没有阻塞，并且只是一遍又一遍地循环。

# java - 从 GUI 检索值

> ID：10064931
> 
> 赞同：0
> 
> 时间：2012-04-08T17:46:04.050
> 
> 标签：java, swing, user-interface

作为作业的一部分，我试图从 JTextField 中检索一个值。我想要得到的是一个账户的利率。它应该大于零，并且应该询问用户，直到他/她给出大于零的东西。此外，如果输入不是数字，比如一串文本，也应该有错误，它应该再次询问用户。

我已经完成了一些部分，但我在完成任务时遇到了问题。

以下是调用 GUI 的方法：

```
//getting the interest rate
protected void getInterest() {

    if( this instanceof flexibleAccount ) {

    }

    else {

        GetInterest getInterest = new GetInterest();
        getInterest.setDefaultCloseOperation( JFrame.EXIT_ON_CLOSE );
        getInterest.setSize( 350, 100 );
        getInterest.setVisible(true);
    }//end else

}//end getInterest 
```

它到这里：

```
import java.awt.FlowLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

import javax.swing.JFrame;
import javax.swing.JOptionPane;
import javax.swing.JTextField;

import java.util.InputMismatchException;

public class GetInterest extends JFrame {

private JTextField textField;
private double interestRate;

public GetInterest() {

    super("Banking Application");
    setLayout( new FlowLayout() );

    textField = new JTextField("Enter interest rate",10);
    add(textField);

    TextFieldHandler handler = new TextFieldHandler();
    textField.addActionListener( handler );

}//end GetInterest

private class TextFieldHandler implements ActionListener {

    @Override
    public void actionPerformed( ActionEvent event ) {

        try {

            String string;

            string = textField.getText();

            //string = String.format("%s", event.getActionCommand());

            interestRate = Double.parseDouble(string);

            if( interestRate <= 0 )
                JOptionPane.showMessageDialog( null, "Interest rate should be greater than zero" );
            else if( interestRate > 0 ) {
                JOptionPane.showMessageDialog( null, interestRate );
            }
            //else
                //throw new InputMismatchException;

        }

        catch(InputMismatchException  exception) {

            System.out.println(accountTest.getStackTrace(exception));

        }

    }//end actionPerformed

}//end TextFieldHandler

}//end GetInterest 
```

如您所见，我得到了值，并且再次询问用户他/她是否输入了小于或等于零的值。

但缺少以下内容：

*   将其返回到 getInterest 方法，
*   完成后窗口消失，
*   如果用户输入文本，则显示错误。

我怎样才能实现这些。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T18:12:50.907

**如果用户输入文本，则显示错误。k 值将是 JTextField 文本**

我用 try catch 解决了这个问题

```
public static void main(String[] args) {
    String k = "a";

    try{
    System.out.println(Integer.parseInt(k));
    }catch(NumberFormatException ex){
        JOptionPane.showConfirmDialog(this, "Is not required data");
    } 
```

**完成后窗口消失**

方法执行后`int value = JOptionPane.showMessageDialog( null, interestRate );`，它返回一个*整数*。例如，如果您的对话框有 ok，no，cancel，您将得到 as`ok value = 0; ok value = 1;` `cancel value =2;`并且您将检查 ，`if value==2`然后关闭框架；

第一个没看懂

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T10:35:10.417

为什么不简单地将键盘上的字母和符号键静音？

试试这个代码，它更优雅更好，只需在你的 JTextField 上注册一个 keyTyped 监听器

```
private void jTextField1KeyTyped(KeyEvent evt)
{
    int x = evt.getKeyChar();
    if (x != KeyEvent.VK_BACK_SPACE && x !=KeyEvent.VK_PERIOD) {

        if(x ==KeyEvent.VK_PERIOD)
        {
            if(jTextField7.getText().contains("."))
            {
                evt.consume();
            }
        }

       if (x < 48 || x > 57) {
            evt.consume();
        }
    } 
```

}

这照顾到用户应该只输入数字，它应该只包含 1 个小数点

接下来，您将拥有提交按钮，用户将在其中输入利率后单击该按钮

查看

```
 if(jTextField7.getText().trim().isEmpty())
    {
        JOptionPane.showMessageDialog(this,"Cannot be left empty","Error",JOptionPane.ERROR_MESSAGE);
        return;
    }
   else
   {
      Double db= new Double(jTextField7.getText());
      {
           if(db==0.0)
           {
              JOptionPane.showMessageDialog(this,"Cannot be Zero","Error",JOptionPane.ERROR_MESSAGE);
              return;
           }
    }

   getInterest(jTextField1.getText()); 
```

干杯！！

# linux - EXPECT脚本，如何处理多页输出

> ID：10064936
> 
> 赞同：2
> 
> 时间：2012-04-08T17:46:33.567
> 
> 标签：linux, expect

我有一个期望脚本在文件中放入一个列表，其中包含与交换机关联的所有 mac 地址。

```
#!/usr/bin/expect -f
spawn telnet 192.168.20.222
match_max 10000
expect "*?to continue*"
send -- "\r"
send -- "show mac \r"
expect -- "*?2626#*"
send -- "exit \r"
expect -- "*?2626>*"
send -- "exit \r"
expect "*?y/n*"
send -- "y \r" 
```

一切正常，但如果地址太多，开关会说这样的事情：

> -- MORE --，下一页：空格，下一行：Enter，退出：Control-C

当然可以有 N 个页面，其中 N 个是未知的。
我该怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-09T10:05:59.190

```
send -- "show mac \r"
expect {
    "MORE --, next page" {send -- " "; exp_continue}
    "*?2626#*" {send -- "exit \r"}
} 
```

# maven - 获取不在 pom.xml 中的 jar

> ID：10064939
> 
> 赞同：0
> 
> 时间：2012-04-08T17:46:51.507
> 
> 标签：maven, objectify

我很困惑为什么我的 web 应用程序在它`Maven Dependencie`的 s 中得到一个 Jar，即使我认为它不在 pom.xml 文件中。

这是应用程序获得的完整[pom.xml](http://pastebin.com/YteJVe0D)`objectify-2.2.3.jar`

但是我需要放置这个 jar 的新版本，但我不确定我的应用程序为什么会得到这个 jar。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T20:49:39.280

只做一个

```
mvn dependency:tree 
```

在控制台上并检查输出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T18:02:39.940

我想这个 jar 是由您的直接依赖项之一引用的。

一些 IDE 可以显示完整的依赖关系树。我知道这可以通过 IntelliJ IDEAs maven 视图来完成。我认为 Eclipse 也有类似的看法。

为此还有一个[Maven 插件](http://maven.apache.org/plugins/maven-dependency-plugin/tree-mojo.html)。

# magento - 如何确保我的 Magento 网站从第三方开发人员那里完全移交

> ID：10064947
> 
> 赞同：0
> 
> 时间：2012-04-08T17:47:27.217
> 
> 标签：magento

我已经让第三方开发人员为我安装了一个 magento 站点并自定义了代码。为了确保我可以独立于他运行网站，我必须注意哪些事项。我了解让我的电子邮件成为管理员用户、获取加密密钥等很重要。

这里还有什么重要的？

谢谢。-TM值

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T20:00:47.497

您只需要访问您的托管帐户，因为它可以让您访问您的文件和数据库。

# c# - 是否有存储和解析日历日期重复字符串的标准？

> ID：10064951
> 
> 赞同：7
> 
> 时间：2012-04-08T17:48:27.693
> 
> 标签：c#, sql-server, datetime, recurrence, rfc5545

我正在尝试将重复事件信息存储到数据库中。我想将记录器存储到具有以下字段的数据库表中。

*   开始日期 - 日期时间
*   结束日期 - 日期时间
*   RecurrencePattern - 字符串

我想看看是否已经有一些标准格式来存储 RecurrencePattern 和一个关联的库来解析这个字符串 recurrenPattern 和一个开始/结束日期并转换成一组日期。我看到[这](https://github.com/skyporter/rrule_parser/blob/master/rrecur-parser-tests.js)适用于 javascript，所以可能是 C# 的端口或类似的东西？

要将事件序列化到数据库，我真的必须创建一个新的 iCalendar 并为每个事件序列化一个日历吗？有没有办法使用这个库简单地将事件本身序列化到数据库？

## 根据 Jon Skeet 的回答更新了关于 DDay.iCal 的问题：

根据 jon skeet 的建议，我开始查看 DDay.iCal，它看起来非常好。我的一个后续问题是，在示例中，它似乎一次只能从磁盘读取一个完整的 ical (ics)。就我而言，我只是将事件独立存储在数据库表中。最好的方法是什么：

1.  从数据库中读取这些事件
2.  将独立事件保存到数据库（每个事件都是数据库表中的一行）

使用这个库？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-08T17:55:35.393

有[DDay.iCal](http://www.ddaysoftware.com/Pages/Projects/DDay.iCal/)库。不能说我用过它，但这是快速搜索 iCalendar 和 C# 后发现的...（iCalendar 或[RFC 5545](https://www.rfc-editor.org/rfc/rfc5545)是 Javascript 格式的来源。）

In my experience with these things on other platforms, recurrences get complicated *really* quickly. If you can limit your scope from the start, you'll have a much better change of success IMO.

# prolog - 每次加一个。初学者

> ID：10064956
> 
> 赞同：1
> 
> 时间：2012-04-08T17:49:08.770
> 
> 标签：prolog

需要运行此递归 5 次。并每次增加 Row 。

```
calculateSum([],List,Row,5,L) :- nl.
calculateSum([M|Rest],List,Row,Col,[Y|Tail]):-
    calcHeu(Rest,L),sum(L,S),index(List, Row, Col, V),Y is V + S,inc(Row),
    calculateSum(M,List,Row,Z,Tail). 
```

换句话说，我想像 while(Row < Col) ...

如果 Col == Row 则跳过该步骤。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T18:23:45.757

我按照简单 Prolog 程序中通常需要的方式订购了参数。如果没有规范，我只能猜测您的代码，注意我交换了 M 和 Rest。验证第一个参数的含义...

```
calculateSum(_, _List, _Row, 5, []).
calculateSum([M|Rest], List, Row, Col, Result):-
    Col < 5,
    (  Col \= Row
    -> calcHeu(M, L),
       sum(L, S),
       index(List, Row, Col, V),
       Y is V + S,
       Result = [Y|Tail]
    ;  Result = Tail
    ),
    Row1 is Row + 1,
    Col1 is Col + 1,
    calculateSum(Rest, List, Row1, Col1, Tail). 
```

**编辑**：添加`if Col \= Row ... else ...`条件，注意这个结构有点不寻常，例如参见[文档](http://www.swi-prolog.org/pldoc/man?predicate=send_arrow/2)。请注意第一个参数无论如何都会被“读取”。如果必须保持不变，最好添加另一个 calculateSum/5：

```
calculateSum(_, _List, _Row, 5, []).
calculateSum(Input, List, Num, Num, Result):-
    Row is Num + 1,
    Col is Num,
    calculateSum(Input, List, Row, Col, Result).
calculateSum([M|Rest], List, Row, Col, Result):-
    Col < 5,
    .... 
```

高温高压

# javascript - Jquery Mouse Over Movement 与其他动画功能冲突

> ID：10064958
> 
> 赞同：0
> 
> 时间：2012-04-08T17:49:26.843
> 
> 标签：javascript, jquery, jquery-animate, mouseover, slide

我目前在我的第一个网站上工作-但是我对这段 jquery 遇到了一个小问题...该页面是：

[http://beelinetest.site50.net/the_arts_and_culture_in_worcester.html](http://beelinetest.site50.net/the_arts_and_culture_in_worcester.html)

我在我网站上已完成的页面中都有翻转效果（当您将鼠标悬停在链接上时，单词会稍微向右移动），这可以在活动计划页面上更好地看到。

但是在这个页面上，我有很多 jquery 正在进行......当点击这个词时，这个词会移到页面的左边。但是由于鼠标悬停，（在释放时将单词移回右侧）该单词会在屏幕上弹回其原始位置。

请随时查看我的代码，我真的很感激 - 我知道你们很棒，所以提前谢谢！汤姆

这是两个冲突的代码-

```
$("#exploretext").click(function(){ 
$(".moveeverythingleft").animate({"left":"-220px"}, 400);
return false;
});

$("#exploretext").hover(function(){ 
$("#exploretext").animate({"left":"227px"}, 50);
}, function(){
$("#exploretext").animate({"left":"217px"}, 150);
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T18:44:57.043

这将在单击事件后解除悬停效果：

```
$("#exploretext").on("click",function() 
{ 
    $(this).off("hover", "**");
    $(".moveeverythingleft").animate({"left":"-220px"}, 400); return false; 
});

$("#exploretext").on('hover',function()
{ 
    $("#exploretext").animate({"left":"227px"}, 50); }, function()
    { 
        $("#exploretext").animate({"left":"217px"}, 150); 
    });
}); 
```

您可能需要稍后重新绑定它，或者绑定另一个，这取决于您想要实现的目标。

使用 += 使用另一个动画函数可能更容易：

```
$("#exploretext").animate({"left":"+=10px"}, 50, 'linear'); 
```

**编辑 ：**

我正在阅读您的代码，标记和 css 有点乱，我认为它使您的工作比应有的更难。

我建议您先尝试清理 HTML 和 CSS，然后处理 JS 部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T18:53:54.720

你可以做的是将按钮的状态存储在一些变量中，比如..

```
var position = "LEFT OR RIGHT"; 
```

然后当您将按钮发送到左侧时，将变量更改为左侧。并在悬停事件中检查值，然后如果位置在左侧，则不执行整个事件，如果位置正确，则执行事件。

```
function OnExploreClick(){
position = 'left';
//ur code
}

function OnUnExploreClick()
{
//put the button to right side// ur code
then position = 'right';
}
function OnHover()
{
if (position == 'right')
{
//execute ur code
}
} 
```

# jquery - Jquery中验证失败的方法

> ID：10064960
> 
> 赞同：0
> 
> 时间：2012-04-08T17:49:58.683
> 
> 标签：jquery, jquery-validate

我正在使用验证插件，我们使用 jquery [http://bassistance.de/jquery-plugins/jquery-plugin-validation/的验证插件验证整个表单](http://bassistance.de/jquery-plugins/jquery-plugin-validation/)

通过这个我们可以设置**当表单验证正确时调用什么**

```
$('#frmForgetPassword')
.validate(
{
    submitHandler : function(form) {
        alert('true');
        }
} 
```

当**表单以正确的方式验证**时会触发此**submitHandler()**但我想在表单填写不正确时触发此操作。**该事件**的正确代码在哪里

 ***** * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T18:02:44.753

例如，您可以调用 jquery.validation 插件的 valid() 方法，该方法返回布尔值

```
$("#myform").validate();
$("#btnSubmit").click(function() {
   alert($("#myform").valid());
  //Here you can check if valid() method is true proceed or else you can return false;
  if($("#myform").valid())
 {
  // your task
  }
else
{
 return false;
 }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-31T15:11:38.280

我相信你正在寻找`invalidHandler`

[如文档中所述](http://jqueryvalidation.org/validate/#invalidhandler)，这是“提交无效表单时自定义代码的回调”。****

# ruby - 正则表达式中的变量

> ID：10064964
> 
> 赞同：0
> 
> 时间：2012-04-08T17:50:18.213
> 
> 标签：ruby, regex

可以说我有代码：

```
str = "foobar"
print "Enter in the letters you would like to match: "
match = gets
# Pseudocode:
str =~ /[match]/ 
```

我不想匹配整个字符串：**match**，我只想匹配每个字母，例如：

```
str =~ /[aeiou]/ 
```

会产生元音。我该如何做才能匹配用户输入的字母？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T17:51:44.640

试试这个：

```
match = gets.chomp # cut off that trailing \n
str =~ /[#{match}]/ 
```

# linux - 在引用linux中打印输出

> ID：10064966
> 
> 赞同：-1
> 
> 时间：2012-04-08T17:50:31.613
> 
> 标签：linux

如何在 linux 中创建 shell 脚本以将输出重定向到文本文件并在引用示例“john brown”之间打印输出

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T17:55:22.663

```
some_command | sed 's/.*/"&"/' > output_file 
```

这将执行`some_command`并将输出发送到`sed`.

该`sed`命令将匹配每一行上的所有内容（`.*`表示“任何字符，重复零次或多次”），并将其括在双引号中（`&`表示“整个匹配文本”）。

操作员将`>`输出重定向到`output_file`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T17:58:58.397

```
echo \"Hi there\" > file 
```

您可以在脚本中执行相同的操作，例如：

```
#!/bin/bash
echo \"

# your commands and stuff here

echo \" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-08T17:53:50.843

使用`tee`.

```
echo "John Brown" | tee /tmp/file 
```

# php - PHP 依赖注入

> ID：10064970
> 
> 赞同：10
> 
> 时间：2012-04-08T17:50:46.193
> 
> 标签：php, dependency-injection

我正在努力解决依赖注入问题，并且我理解它，在大多数情况下。

但是，如果由于某种原因，我的一个类依赖于几个类，而不是将所有这些传递给构造函数中的这个类，是否有更好、更明智的方法？

我听说过 DI Containers，这就是我要解决这个问题的方法吗？我应该从哪里开始使用这个解决方案？我是否将依赖项传递给我的 DIC，然后将其传递给需要这些依赖项的类？

任何可以为我指明正确方向的帮助都会很棒。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-04-08T20:44:45.167

## 依赖注入！== DIC

人们真的应该停止混淆他们。[依赖注入](http://martinfowler.com/articles/injection.html)是来自[依赖倒置原则](http://en.wikipedia.org/wiki/Dependency_inversion_principle)的想法。

DIC 是*“灵丹妙药”*，它承诺让您使用依赖注入，但在 PHP 中通常是通过打破面向对象编程的所有其他原则来实现的。最糟糕的实现也倾向于通过静态`Registry`或`Singleton`.

无论如何，如果你的类依赖于太多其他类，那么一般来说，这意味着类本身存在设计缺陷。你基本上有一个类有太多改变的理由，因此，打破了[单一责任原则](http://en.wikipedia.org/wiki/Single_responsibility_principle)。

在这种情况下，依赖注入容器只会隐藏底层设计问题。

如果您想了解有关依赖注入的更多信息，我建议您观看 youtube 上的“清洁代码讲座”：

*   [干净的代码说话 - 不要寻找东西！](http://www.youtube.com/watch?v=RlfLCWKxHJ0)
*   [清洁代码会谈 - “全球状态和单身人士”](http://www.youtube.com/watch?v=-FRm3VPhseI)

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-04-08T17:59:51.387

如果您有多个依赖项要处理，那么可以使用 DI 容器作为解决方案。

DI 容器可以是由您需要的各种依赖对象构成的对象或数组，这些对象被传递给构造函数并解包。

假设您需要一个配置对象、一个数据库连接和一个传递给每个类的客户端信息对象。您可以创建一个包含它们的数组：

```
// Assume each is created or accessed as a singleton, however needed...
// This may be created globally at the top of your script, and passed into each newly
// instantiated class
$di_container = array(
  'config' = new Config(),
  'db' = new DB($user, $pass, $db, $whatever),
  'client' = new ClientInfo($clientid)
); 
```

并且您的类构造函数接受 DI 容器作为参数：

```
class SomeClass {
  private $config;
  private $db;
  private $client;

  public function __construct(&$di_container) {
    $this->config = $di_container['config'];
    $this->db = $di_container['db'];
    $this->client = $di_container['client'];
  }
} 
```

除了我上面所做的数组（这很简单），您还可以将 DI 容器创建为一个类本身，并使用单独注入其中的组件类来实例化它。使用对象而不是数组的一个好处是，默认情况下，它将通过引用传递给使用它的类，而数组则通过值传递（尽管数组中的对象仍然是引用）。

### 编辑

在某些方面，对象比数组更灵活，尽管最初的代码更复杂。

容器对象也可以在其构造函数中创建/实例化包含的类（而不是在外部创建它们并将它们传入）。这可以为使用它的每个脚本节省一些编码，因为您只需要实例化一个对象（它本身会实例化其他几个对象）。

```
Class DIContainer {
  public $config;
  public $db;
  public $client;

  // The DI container can build its own member objects
  public function __construct($params....) {
    $this->config = new Config();

    // These vars might be passed in the constructor, or could be constants, or something else
    $this->db = new DB($user, $pass, $db, $whatever);

    // Same here -  the var may come from the constructor, $_SESSION, or somewhere else
    $this->client = new ClientInfo($clientid);
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-05T08:08:03.743

我写了[一篇](https://github.com/xprt64/abstract-factory/blob/master/README.md)关于这个问题的文章。想法是使用抽象工厂和依赖注入的组合来实现（可能嵌套的）依赖的透明依赖解析。我将在此处复制/粘贴主要代码片段：

```
namespace Gica\Interfaces\Dependency;

interface AbstractFactory
{
    public function createObject($objectClass, $constructorArguments = []);
} 
```

抽象工厂实现是：

```
namespace Gica\Dependency;

class AbstractFactory implements \Gica\Interfaces\Dependency\AbstractFactory, \Gica\Interfaces\Dependency\WithDependencyInjector
{
    use WithDependencyInjector;

    /**
     * @param string $objectClass
     * @param array $constructorArguments
     * @return object instanceof $class
     */
    public function createObject($objectClass, $constructorArguments =     [])
    {
        $instance = new $objectClass(...$constructorArguments);

        $this->getDependencyInjector()->resolveDependencies($instance);

        return $instance;
    }
} 
```

依赖注入器是这样的： namespace Gica\Dependency;

```
class DependencyInjector implements \Gica\Interfaces\Dependency\DependencyInjector
{
    use \Gica\Traits\WithDependencyContainer;

    public function resolveDependencies($instance)
    {
        $sm = $this->getDependencyInjectionContainer();

        if ($instance instanceof \Gica\Interfaces\WithAuthenticator) {
            $instance->setAuthenticator($sm->get(\Gica\Interfaces\Authentication\Authenticator::class));
        }
        if ($instance instanceof \Gica\Interfaces\WithPdo) {
            $instance->setPdo($sm->get(\Gica\SqlQuery\Connection::class));
        }

        if ($instance instanceof \Gica\Interfaces\Dependency\WithAbstractFactory) {
            $instance->setAbstractFactory($sm->get(\Gica\Interfaces\Dependency\AbstractFactory::class));
        }
        //... all the dependency declaring interfaces go below
    }
} 
```

[依赖容器](https://github.com/container-interop/container-interop/blob/master/src/Interop/Container/ContainerInterface.php)是标准容器。客户端代码可能如下所示：

```
$abstractFactory = $container->get(\Gica\Interfaces\Dependency\AbstractFactory::class);

$someHelper = $abstractFactory->createObject(\Web\Helper\SomeHelper::class);

echo $someHelper->helpAction(); 
```

注意依赖是隐藏的，我们可以专注于主要业务。我的客户端代码不关心也不知道 $someHelper 需要 an`Authenticator`或 helpAction 需要 an`SomeObject`来完成它的工作；

在后台发生了很多事情，检测、解决和注入了很多依赖项。请注意，我不使用`new`运算符来创建`$someObject`. 实际创建对象的责任被传递给`AbstractFactory`

PS *Gica*是我的昵称 :)

* * *

## 回答 #4

> 赞同：-6
> 
> 时间：2012-04-08T18:15:34.677

我建议您使用单音或多音。在这些情况下，您将始终能够通过静态类的方法获取对象。

另一种方法（找不到正确的模式名称，但可能是`Registry`）是使用一个全局静态对象来存储多个对象的实例。例如（简化代码，没有任何检查）：

```
class Registry {
    private static $instances = array();

    public static function add($k, $v) {
        $this->instances[$k] = $v;
    }

    public static function get($k) {
        return $this->instances[$k];
    }
}

class MyClass {
    public function __construct() {
        Registry::add('myclass', $this);
    }
} 
```

# string - mustache.js 日期格式

> ID：10064975
> 
> 赞同：9
> 
> 时间：2012-04-08T17:51:16.840
> 
> 标签：string, json, mustache, date-parsing

我已经开始使用 mustache.js，到目前为止我印象非常深刻。虽然有两件事让我感到困惑。第一个导致第二个，所以请耐心等待。

**我的 JSON**

```
{"goalsCollection": [
    {
        "Id": "d5dce10e-513c-449d-8e34-8fe771fa464a",
        "Description": "Multum",
        "TargetAmount": 2935.9,
        "TargetDate": "/Date(1558998000000)/"
    },
    {
        "Id": "eac65501-21f5-f831-fb07-dcfead50d1d9",
        "Description": "quad nomen",
        "TargetAmount": 6976.12,
        "TargetDate": "/Date(1606953600000)/"
    }
]}; 
```

**我的处理函数**

```
function renderInvestmentGoals(collection) {
    var tpl = '{{#goalsCollection}}<tr><td>{{Description}}</td><td>{{TargetAmount}}</td><td>{{TargetDate}}</td></tr>{{/goalsCollection}}';
    $('#tblGoals tbody').html('').html(Mustache.to_html(tpl, collection));
} 
```

**Q1** 如您所见，我的“TargetDate”需要解析，但我不确定如何在当前函数中执行此操作。

**Q2** 假设我想在渲染之前对我的一个或多个对象执行一些功能或格式化，那么最好的方法是什么？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-04-08T18:00:15.580

您可以使用[“lambda”](http://mustache.github.com/mustache.5.html)

```
"TargetDate": "/Date(1606953600000)/",
"FormatDate": function() {
    return function(rawDate) {
        return rawDate.toString();
    }
}, ... 
```

然后在标记中：

```
<td>
{{#FormatDate}}
    {{TargetDate}}
{{/FormatDate}}
</td> 
```

从链接：

> 当值是可调用对象时，例如函数或 lambda，该对象将被调用并传递文本块。传递的文本是未渲染的文字块。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2015-01-06T09:12:53.437

我为 Mustache.js 创建了一个小扩展，它可以在表达式中使用格式化程序，例如 {{expression | 格式化程序}}

无论如何，您都需要创建一个函数来解析您的日期值，如下所示：

```
 Mustache.Formatters = {
        date: function( str) {
          var dt = new Date( parseInt( str.substr(6, str.length-8), 10));
          return (dt.getDate() + "/" + (dt.getMonth() + 1) + "/" + dt.getFullYear());
        }
      }; 
```

然后只需将格式化程序添加到您的表达式中：

```
{{TargetDate | date}} 
```

你可以从这里获取代码：http: [//jvitela.github.io/mustache-wax/](http://jvitela.github.io/mustache-wax/)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2014-05-17T13:04:42.357

这是很久以前的事了，但一直在寻找完全相同的东西。Mustachejs（现在）允许您调用传递数据的函数，不仅如此；在函数中，值`this`是一个部分中的任何值。

如果我的模板是这样的：

```
{{#names}}
    <p>Name is:{{name}}</p>
    <!-- Comment will be removed by compileTemplates.sh
         #lastLogin is an if statement if lastLogin it'll do this 
         ^lastLogin will execute if there is not lastLogin      
    -->
    {{#lastLogin}}
    <!-- 
      formatLogin is a method to format last Login 
      the function has to be part of the data sent 
      to the template
    -->
    <p>Last Login:{{formatLogin}}</p>
    {{/lastLogin}}
    {{^lastLogin}}
    not logged in yet
    {{/lastLogin}}
    {{#name}}
     passing name to it now:{{formatLogin}}
    {{/name}}
{{/names}} 
```

和这样的数据：

```
var data={
    names:[
        {name:"Willy",lastLogin:new Date()}
    ],
    formatLogin:function(){
          //this is the lastDate used or name based on the block
                  //{{#name}}{{formatLogin}}{{/name}}:this is name
                  //{{#lastLogin}}{{formatLogin}}{{/lastLogin}}:this is lastLogin
          if(!/Date\]$/.test(Object.prototype.toString.call(this))){
              return "Invalid Date:"+this;
          }
          return this.getFullYear()
            +"-"+this.getMonth()+1
            +"-"+this.getDate();
    }
};
var output = Mustache.render(templates.test, data);
console.log(output); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-08T17:59:27.743

您可以使用简单的 String 方法获取时间戳：

```
goalsCollection.targetDate = goalsCollection.targetDate.substring(6,18); 
```

当然，这取决于您的时间戳每次都具有相同的长度。另一种选择是：

```
goalsCollection.targetDate = 
  goalsCollection.targetDate.substring(6, goalsCollection.targetDate.length - 1); 
```

这些技术并非特定于 Mustache，可用于操作任何库的数据。有关更多详细信息，请参阅[有关子字符串的 Mozilla 开发人员中心文档。](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/substring)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-19T23:52:49.843

要在 json 中声明函数，您始终可以这样做。

```
var json = '{"RESULTS": true, "count": 1, "targetdate" : "/Date(1606953600000)/"}'

var obj = JSON.parse(json);
obj.newFunc = function (x) {
  return x;
}

//OUTPUT
alert(obj.newFunc(123)); 
```

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2012-04-08T17:59:05.490

我也一直在我的项目中使用 Mustache，因为它能够在客户端/服务器之间共享。我最终做的是将所有值（日期、货币）格式化为服务器端的字符串，所以我不必依赖辅助 Javascript 函数。但是，如果您在客户端对这些值进行逻辑处理，这可能对您不起作用。

您可能还想考虑使用[handlebars.js](http://handlebarsjs.com/)，它本质上是 Mustache，但带有可能有助于客户端格式化（以及更多）的扩展。这里的损失是，如果这对您很重要，您可能无法找到车把的服务器端实现。

# sas - SAS BI 内容 - 提示

> ID：10064981
> 
> 赞同：0
> 
> 时间：2012-04-08T17:51:54.243
> 
> 标签：sas

有人可以解释关于 SAS 提示框架的“标准组”和“选择组”之间的区别吗？

标准组 - 用于将提示组织成更有用的提示屏幕

选择组 - 为用户提供选择要输入的提示组的能力

有兴趣知道这两组的应用方式和位置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T13:07:44.667

我相信标准组可以包含任意数量和类型的提示或组（标准、透明或选择）。这只是一个基本的分组。

选择组包含选择相关组，每个组都有任意数量和种类的提示。这是顶部提示可以引导用户使用不同的可用提示路径的地方。我认为这是为了帮助简化用户界面，只显示基于早期选择的相关提示。

# iphone - 使用未声明的标识符“FlurryAPI”

> ID：10064982
> 
> 赞同：0
> 
> 时间：2012-04-08T17:52:07.880
> 
> 标签：iphone, xcode, api, import, flurry

我已经启用了分析并且正在工作

我已经添加了：

```
#import "FlurryAdDelegate.h"
#import "FlurryAppCircle.h"
#import "FlurryOffer.h"
#import "FlurryAnalytics.h" 
```

此行引发此错误 - 使用未声明的标识符“FlurryAPI”：

> ```
> [FlurryAPI setAppCircleEnabled:YES]; 
> ```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T18:02:46.330

你确定你导入了有 FlurryAPI 的类吗？您是否按照 flurryAPI 的所有说明进行操作？如果这就是您需要导入的全部内容，那么您很可能需要创建一个字符串（或任何乱舞使用的东西！）

另一件事是，您可能忘记导入框架！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T18:04:13.007

正确的呼吁是`[FlurryAppCircle setAppCircleEnabled:YES];`

我认为根本没有`FlurryAPI`课程。

请参阅Flurry 文档站点上的[示例代码](http://support.flurry.com/sdkdocs/iOS/interface_flurry_app_circle.html#a239d70786e6a62e5cedde85fcb37b8b6)。

# android - 使用 AsyncTask 进行片段切换

> ID：10064987
> 
> 赞同：0
> 
> 时间：2012-04-08T17:52:42.640
> 
> 标签：android, android-asynctask, android-fragments

我的应用程序使用片段以纵向模式显示 ListView 或以横向模式并排显示 ListView 和“详细信息”视图。我在 ActionBar 中还有一个启动 AsyncTask 的菜单项。问题是，如果用户在 AsyncTask 运行时将其显示从纵向旋转到横向（反之亦然），则 AsyncTask 将被终止。为了修复 AsyncTask 停止，我将 configChanges 属性添加到 AndroidManifest：

```
 <activity android:name="ListingFragment" android:configChanges="keyboardHidden|orientation" /> 
```

但是，添加该属性会阻止片段自动切换到横向/纵向视图。有没有办法让片段自动切换视图而不杀死 AsyncTask？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T18:36:36.357

您需要在活动被终止之前保存 asynctask 的实例。您可以使用[onRetainCustomNonConfigurationInstance()](http://developer.android.com/reference/android/support/v4/app/FragmentActivity.html#onRetainNonConfigurationInstance%28%29)来保存它。然后在您的 oncreate 中，您可以使用`getLastCustomNonConfigurationInstance()`. 然后在您的 onCreate 中，您可以再次将您的活动“附加”到异步任务。

# heroku - 如何使用 MongoLab 和 Heroku 管理多个数据库？

> ID：10064991
> 
> 赞同：0
> 
> 时间：2012-04-08T17:53:49.927
> 
> 标签：heroku, mlab

我有一个项目托管在 Heroku 上，使用 Mongolab 存储数据（MongoDB）。我需要创建 2 个不同的数据库实例：一个用于 prod，一个用于 dev。

知道我该怎么做以及如何告诉我的代码使用哪一个吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T18:46:42.993

您应该使用配置变量 (https://devcenter.heroku.com/articles/config-vars) 来设置数据库 url，然后在 mongo 初始化程序中使用环境变量。将一个应用设置为使用生产 url，将一个开发应用设置为使用开发者数据库 url。

# spring - ContextLoader：上下文初始化失败

> ID：10064998
> 
> 赞同：3
> 
> 时间：2012-04-08T17:54:16.277
> 
> 标签：spring, weblogic

我试图找出我的应用程序的一部分突然停止工作的原因。我正在使用 Weblogic 8.1.4.0 和 Hibernate 运行 Spring 1。报告生成器是失败的部分，首先在我们的生产服务器上，然后在周五我进行试验时在开发和质量检查服务器上。我没有对代码进行任何更改，但我现在在映射查询的编译语句中遇到了 Missing Data Source 异常。唯一改变的是数据库中的几条记录，但它们是相当简单的更改，我怀疑它们会产生影响。在这两个开发应用程序可能失败的时候，我还从星期五收到了以下错误：

这是来自开发服务器的日志中的错误：

```
04-06 14:31:34 ERROR [main] org.springframework.web.context.ContextLoader: Context initialization failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'myDataSource' defined in ServletContext resource [/WEB-INF/applicationContext.xml]: Initialization of bean failed; nested exception is javax.naming.LinkException: 
```

大约 10 分钟后，当我部署到 QA 服务器时，也出现了类似的情况。

它指的是在 WebLogic 中定义的数据源和连接池。我已经检查并测试了连接，似乎没有任何问题。

什么可能会导致这种情况？我什至恢复到上周的构建以确保它不是代码更改，但发生了相同的数据源所需的异常：

```
04-07 16:15:04 DEBUG [ExecuteThread: '14' for queue: 'default'] org.eei.survey.data.RegionDataDAO$NERCRegionMappingQuery: RdbmsOperation with SQL [{call prc_NERCRegions_get}] compiled
04-07 16:15:04 ERROR [ExecuteThread: '14' for queue: 'default'] error.jsp: Error page displayed to user due to unhandled exception
org.springframework.dao.InvalidDataAccessApiUsageException: dataSource is required
    at org.springframework.jdbc.object.RdbmsOperation.compile(RdbmsOperation.java:300)
    at org.eei.survey.data.ReportDAO$NCRMappingQuery.<init>(ReportDAO.java:535)
    at org.eei.survey.data.ReportDAO.executePrcNCR(ReportDAO.java:548)
    at org.eei.survey.data.ReportDAO.getNCR(ReportDAO.java:59)
    at jsp_servlet._reliability._charts.__barncr._jspService(__barncr.java:235) 
```

任何帮助，将不胜感激。

更新：这是错误的完整堆栈跟踪：

```
04-08 14:56:19 WARN  [ExecuteThread: '14' for queue: 'default'] org.apache.shale.faces.ShaleViewHandler: No ViewController for viewId /reliability/support/reportgen.faces found under name reliability$support$reportgen
04-08 14:56:19 DEBUG [ExecuteThread: '14' for queue: 'default'] org.eei.survey.data.ReportDAO: java.lang.IllegalArgumentException: No DataSource specified
04-08 14:56:19 ERROR [ExecuteThread: '14' for queue: 'default'] error.jsp: Error page displayed to user due to unhandled exception
java.lang.NullPointerException
    at jsp_servlet._reliability._support.__reportgen._jspService(__reportgen.java:156)
    at weblogic.servlet.jsp.JspBase.service(JspBase.java:33)
    at weblogic.servlet.internal.ServletStubImpl$ServletInvocationAction.run(ServletStubImpl.java:1006)
    at weblogic.servlet.internal.ServletStubImpl.invokeServlet(ServletStubImpl.java:419)
    at weblogic.servlet.internal.ServletStubImpl.invokeServlet(ServletStubImpl.java:315)
    at weblogic.servlet.internal.RequestDispatcherImpl.forward(RequestDispatcherImpl.java:322)
    at com.sun.faces.context.ExternalContextImpl.dispatch(ExternalContextImpl.java:322)
    at com.sun.faces.application.ViewHandlerImpl.renderView(ViewHandlerImpl.java:130)
    at org.apache.shale.faces.ShaleViewHandler.renderView(ShaleViewHandler.java:142)
    at com.sun.faces.lifecycle.RenderResponsePhase.execute(RenderResponsePhase.java:87)
    at com.sun.faces.lifecycle.LifecycleImpl.phase(LifecycleImpl.java:200)
    at com.sun.faces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:117)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:198)
    at weblogic.servlet.internal.ServletStubImpl$ServletInvocationAction.run(ServletStubImpl.java:1006)
    at weblogic.servlet.internal.ServletStubImpl.invokeServlet(ServletStubImpl.java:419)
    at weblogic.servlet.internal.TailFilter.doFilter(TailFilter.java:28)
    at weblogic.servlet.internal.FilterChainImpl.doFilter(FilterChainImpl.java:27)
    at org.apache.shale.faces.InvokeCommand.execute(InvokeCommand.java:40)
    at org.apache.commons.chain.impl.ChainBase.execute(ChainBase.java:166)
    at org.apache.shale.faces.ShaleApplicationFilter.doFilter(ShaleApplicationFilter.java:218)
    at weblogic.servlet.internal.FilterChainImpl.doFilter(FilterChainImpl.java:27)
    at org.eei.survey.web.UserFilter.doFilterInternal(UserFilter.java:30)
    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)
    at weblogic.servlet.internal.FilterChainImpl.doFilter(FilterChainImpl.java:27)
    at weblogic.servlet.internal.WebAppServletContext$ServletInvocationAction.run(WebAppServletContext.java:6724)
    at weblogic.security.acl.internal.AuthenticatedSubject.doAs(AuthenticatedSubject.java:321)
    at weblogic.security.service.SecurityManager.runAs(SecurityManager.java:121)
    at weblogic.servlet.internal.WebAppServletContext.invokeServlet(WebAppServletContext.java:3764)
    at weblogic.servlet.internal.ServletRequestImpl.execute(ServletRequestImpl.java:2644)
    at weblogic.kernel.ExecuteThread.execute(ExecuteThread.java:219)
    at weblogic.kernel.ExecuteThread.run(ExecuteThread.java:178) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T19:22:57.210

您的数据源的 jdni 分辨率有问题。查看 weblogic jdni 池并确保您使用正确的 jdni 名称。java:comp/env/jdbc/reliabilityDS 不工作。

这可能会有所帮助：

[http://books.google.com/books?id=TiAKHpPHpHIC&pg=PA159&lpg=PA159&dq=weblogic+8.1+jndi+tree&source=bl&ots=cjKNXJZl4o&sig=FHs0YL6hqslNOYjuWpjyRTlCpYY&hl=en&sa=X&ei=veWBT5aVNoTMtgeJ8fC9Bg&ved=0CC0Q6AEwAQ#v=onepage&q=weblogic%208.1% 20jndi%20tree&f=false](http://books.google.com/books?id=TiAKHpPHpHIC&pg=PA159&lpg=PA159&dq=weblogic+8.1+jndi+tree&source=bl&ots=cjKNXJZl4o&sig=FHs0YL6hqslNOYjuWpjyRTlCpYY&hl=en&sa=X&ei=veWBT5aVNoTMtgeJ8fC9Bg&ved=0CC0Q6AEwAQ#v=onepage&q=weblogic%208.1%20jndi%20tree&f=false)

这也是

[http://docs.oracle.com/cd/E13222_01/wls/docs81/jndi/jndi.html](http://docs.oracle.com/cd/E13222_01/wls/docs81/jndi/jndi.html)

这也是

[Tomcat 与 Weblogic JNDI 查找](https://stackoverflow.com/questions/47676/tomcat-vs-weblogic-jndi-lookup)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T17:40:48.653

对于为什么会发生这种情况，我仍然没有一个可靠的答案，但我现在确实想出了如何解决它。我基本上不得不停止我部署的应用程序，然后重置连接池，然后再次重新启动。我会假设重新启动整个服务器会完成同样的事情，但我尝试了几次都没有结果。我目前没有几个小时来追查问题的根源，但是如果有人遇到这种情况，您至少可以快速解决。

# javascript - chrome 扩展的 popup.html 中没有出现警报

> ID：10064999
> 
> 赞同：9
> 
> 时间：2012-04-08T17:54:19.907 元素
> 
> 标签：javascript, google-chrome, google-chrome-extension

我对 chrome 扩展还是很陌生，只是在测试。现在我有一个 popup.html，它有一个简短的表单，我想在单击提交时创建一个警报。我一生都无法弄清楚为什么它不起作用。

```
<!doctype html>
<html>
<head>
<title>Test</title>
<script type="text/javascript" src="popup.js">

</script>
</head>
<body onload="alert('open')">
<form>
Username: <input type='text' id="username" name='username'></input>
Password: <input type='password' id='password' />
          <button onclick="alert('test');return false;">Login</button>
</form>
</body>
</html> 
```

有什么建议么？

编辑：我什至在body标签中做了一个onload，看看是否会在那里打开警报，但它没有。在 popup.js 中，我在 window.onload 上打开了一个警报，但是它可以工作。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-08T18:02:00.310

返回 false 后函数停止。将 return false 放在语句的末尾，那么您的警报应该会起作用。或者你可以把它拿出来。

```
 <button onclick="alert('test')">Login</button> 
```

*更新* 经过一番研究，我发现了以下...

> 内联 JavaScript 不会被执行
> 
> 内联 JavaScript 以及危险的字符串到 JavaScript 方法（如 eval）不会 > 被执行。此限制禁止内联块和内联事件处理程序>（例如）。

[来源在这里](http://code.google.com/chrome/extensions/trunk/contentSecurityPolicy.html#H3-1)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-09T10:45:10.573

这也可能是您的问题：[内联脚本不适用于“manifest_version”：2](https://stackoverflow.com/a/9973209/1306083)

因此，我进行了测试，并使用以下清单，您的代码**可以正常工作**！

```
{
  "name": "test",
  "version": "1.0",
  "description": "test",
  "manifest_version":1,
  "browser_action": {
    "default_icon": "images/padlock.png",
    "default_popup":"html/popup.html"
  },
  "permissions": [
    "tabs", 
    "http://*/*"
  ]
} 
```

无论如何.. 最好在 popup.js 中处理操作，但首先，将 popup.html 中的按钮属性更改为以下内容：`<button type="button">Login</button>`

*popup.js：*

```
$(document).ready(function(){
    $(":button").click(function(){
        alert("test");
        //more code here...
    });
}); 
```

请记住将 jquery.js 插入到您的`<head>`标签中，在*popup.html*中，就在*popup.js*的上方：

```
<head>
<title>Test</title>
<script type="text/javascript" src="../js/jquery.js"></script> 
<script type="text/javascript" src="../js/popup.js"></script>
</head> 
```

我希望，它很有用。问候吉姆..