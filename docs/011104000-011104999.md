# StackOverflow 问答 11104000-11104999

# sql - 来自 2 个表的 SQL 计数

> ID：11104003
> 
> 赞同：1
> 
> 时间：2012-06-19T15:12:17.057
> 
> 标签：sql

背景：有多个 DBPArentProductKEy 与 POG.ID 关联。

我需要计算发生的 Pog.DBKEY 的数量。现在结果在总数据库中为 value4 计算总 POG.ID，但我想要与 DBparentproductkey 关联的计数。

```
select distinct 
    Count(pog.DBKey) as Total,
    pos.DBParentProductKey 
from
    ix_spc_planogram as pog with (nolock), ix_spc_position as pos with (nolock), 
    ix_spc_product as pro with (nolock) 
where 
    pog.dbkey = pos.dbparentplanogramkey
    and pog.Value4 = 358 
group by 
    pog.DBKey, pos.DBParentProductKey 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T15:15:00.393

拿出`pog.DBKey`来`GROUP BY`。

另外，我认为您缺少连接条件。您没有针对 table 的连接条件`pro`。

最后，`DISTINCT`应该不需要。

# locking - RabbitMQ RPC：排他队列锁定 @ PHP

> ID：11104004
> 
> 赞同：1
> 
> 时间：2012-06-19T15:12:19.423
> 
> 标签：locking, rabbitmq, task-queue

我正在尝试使用类似于此示例的 RabbitMQ 在 PHP 上构建 RPC 服务： [http](http://www.rabbitmq.com/tutorials/tutorial-six-java.html) ://www.rabbitmq.com/tutorials/tutorial-six-java.html 我正在使用此 PECL 扩展：[http://pecl。 php.net/package/amqp](http://pecl.php.net/package/amqp)（版本 1.0.3）

问题是当我向服务器添加标志 AMQP_EXCLUSIVE 时，我的回调队列（在客户端脚本中声明）被**锁定**。

这是我的服务器

```
// connect to server
$cnn = new AMQPConnection('...');
$cnn->connect();
$channel = new AMQPChannel($cnn);
// create exchange
$exchangeName = 'k-exchange';
$exchange = new AMQPExchange($channel);
$exchange->setName($exchangeName);
$exchange->setType(AMQP_EX_TYPE_DIRECT);
$exchange->declare();

// declare queue to consume messages from
$queue = new \AMQPQueue($channel);
$queue->setName('tempQueue');
$queue->declare();

// start consuming messages
$queue->consume(function($envelope, $queue)
    use ($channel, $exchange) {

    // create callback queue
    $callbackQueue = new \AMQPQueue($channel);
    $callbackQueue->setName($envelope->getReplyTo());
    $callbackQueue->setFlags(AMQP_EXCLUSIVE); // set EXCLUSIVE flag

    /* WARNING: Following code line causes error. See rabbit logs below:
     *  connection <0.1224.10>, channel 1 - error:
     *  {amqp_error,resource_locked,
     *  "cannot obtain exclusive access to locked queue 'amq.gen-Q6J...' in vhost '/'",
     *  'queue.bind'}
     */
    $callbackQueue->bind($exchange->getName(), 'rpc_reply');

    // trying to publish response back to client's callback queue
    $exchange->publish(
        json_encode(array('processed by remote service!')),
        'rpc_reply',
        AMQP_MANDATORY & AMQP_IMMEDIATE
    );

    $queue->ack($envelope->getDeliveryTag());
}); 
```

这是我的 Client.php

```
// connect to server
$cnn = new AMQPConnection('...');
$cnn->connect();
$channel = new AMQPChannel($cnn);
// create exchange
$exchangeName = 'k-exchange';
$exchange = new AMQPExchange($channel);
$exchange->setName($exchangeName);
$exchange->setType(AMQP_EX_TYPE_DIRECT);
$exchange->declare();

// create a queue which we send messages to server via
$queue = new \AMQPQueue($channel);
$queue->setName('tempQueue');
$queue->declare();

// binding exchange to queue
$queue->bind($exchangeName, 'temp_action');

// create correlation_id
$correlationId = sha1(time() . rand(0, 1000000));

// create anonymous callback queue to get server response response via
$callbackQueue = new \AMQPQueue($channel);
$callbackQueue->setFlags(AMQP_EXCLUSIVE); // set EXCLUSIVE flag
$callbackQueue->declare();

// publishing message to exchange (passing it to server)
$exchange->publish(
    json_encode(array('process me!')),
    'temp_action',
    AMQP_MANDATORY,
    array(
        'reply_to' => $callbackQueue->getName(), // pass callback queue name
        'correlation_id' => $correlationId
    )
);

// going to wait for remote service complete tasks. tick once a second
$attempts = 0;
while ($attempts < 5)
{
    echo 'Attempt ' . $attempts . PHP_EOL;
    $envelope = $callbackQueue->get();
    if ($envelope) {
        echo 'Got response! ';
        print_r($envelope->getBody());
        echo PHP_EOL;
        exit;
    }

    sleep(1);
    $attempts++;
} 
```

所以最后我只是在 RabbitMQ 的日志中看到错误：

```
connection <0.1224.10>, channel 1 - error:
{amqp_error,resource_locked,
    "cannot obtain exclusive access to locked queue 'amq.gen-Q6J...' in vhost '/'", 
    'queue.bind'} 
```

问题：在 Server.php 中创建 callbackQueue 对象的正确方法是什么？看来我的 Server.php 与 Client.php 到 RabbitMQ 服务器的连接不同。我应该在这里做什么？我应该如何在 Server.php 端“共享”相同的（到 Client.php 的）连接。

**更新** 这里还有一些 RabbitMQ 日志

我的 Server.php 连接（ID 为：<0.22322.27>）

```
=INFO REPORT==== 20-Jun-2012::13:30:22 ===
    accepting AMQP connection <0.22322.27> (127.0.0.1:58457 -> 127.0.0.1:5672) 
```

我的 Client.php 连接（ID 是：<0.22465.27>）

```
=INFO REPORT==== 20-Jun-2012::13:30:38 ===
    accepting AMQP connection <0.22465.27> (127.0.0.1:58458 -> 127.0.0.1:5672) 
```

现在我看到 Server.php 导致错误：

```
=ERROR REPORT==== 20-Jun-2012::13:30:38 ===
    connection <0.22322.27>, channel 1 - error:
{amqp_error,resource_locked,
"cannot obtain exclusive access to locked queue 'amq.gen-g6Q...' in vhost '/'",
'queue.bind'} 
```

**我的假设** 我怀疑因为 Client.php 和 Server.php 不与相同的 Id 共享连接，所以他们不可能使用在 Client.php 中声明的独占队列

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-05-29T16:23:45.397

您的实施存在一些问题：

1.  换货申报
2.  手动设置回复队列而不是使用临时队列
3.  双向使用 AMQP_EXCLUSIVE

# 换货申报

您无需声明交换 (AMQPExchange) 即可发布消息。在这个 RPC 示例中，您需要将其用作广播消息的一种方式（例如临时队列或临时交换）。所有通信都将直接发生在 QUEUE 上，理论上绕过了交换。

```
$exchange = new AMQPExchange($channel);
$exchange->publish(...); 
```

# 排队和回复：

当您使用 AMQPQueue::setName() 和 AMQPQueue::declare() 时，您将绑定到具有用户定义名称的队列。如果您声明没有名称的队列，这称为临时队列。当您需要从特定路由键接收广播消息时，这很有用。为此，RabbitMQ / AMQP 会生成一个随机的临时名称。由于队列名称是为给定实例创建的，以独占方式使用信息，因此，为了它自己，它在连接关闭时被处理掉。

当 RPC 客户端想要发布消息 (AMQPExchange::publish()) 时，它必须指定一个回复作为发布参数之一。这样，RPC 服务器在收到请求时就可以获取随机生成的名称。它使用回复名称作为 QUEUE 的名称，服务器将在该队列上回复给定的客户端。与临时队列名称一起，实例必须发送一个correlationId，以确保它收到的回复消息对于请求实例是唯一的。

![RabbitMQ教程六图](../Images/0d9a0b25ba2ac45dca42ac3a0c196787.png)

***客户***

```
$exchange = new AMQPExchange($channel);

$rpcServerQueueName = 'rpc_queue';

$client_queue = new AMQPQueue($this->channel);
$client_queue->setFlags(AMQP_EXCLUSIVE);
$client_queue->declareQueue();   
$callbackQueueName = $client_queue->getName(); //e.g. amq.gen-JzTY20BRgKO-HjmUJj0wLg

//Set Publish Attributes
$corrId = uniqid();
$attributes = array(
    'correlation_id' => $corrId,
    'reply_to'       => $this->callbackQueueName
);  

$exchange->publish(
    json_encode(['request message']),
    $rpcServerQueueName,
    AMQP_NOPARAM,
    $attributes
);  

//listen for response
$callback = function(AMQPEnvelope $message, AMQPQueue $q) {
    if($message->getCorrelationId() == $this->corrId) {
        $this->response = $message->getBody();
        $q->nack($message->getDeliveryTag());
        return false; //return false to signal to consume that you're done. other wise it continues to block
    }   
};  

$client_queue->consume($callback); 
```

***服务器***

```
$exchange = new AMQPExchange($channel);

$rpcServerQueueName = 'rpc_queue';

$srvr_queue = new AMQPQueue($channel);
$srvr_queue->setName($rpcServerQueueName); //intentionally declares the rpc_server queue name
$srvr_queue->declareQueue();
...
$srvr_queue->consume(function(AMQPEnvelope $message, AMQPQueue $q) use (&$exchange) {

    //publish with the exchange instance to the reply to queue
    $exchange->publish(
        json_encode(['response message']),  //reponse message
        $message->getReplyTo(),             //get the reply to queue from the message
        AMQP_NOPARAM,                       //disable all other params
        $message->getCorrelationId()        //obtain and respond with correlation id
    );

    //acknowledge receipt of the message
    $q->ack($message->getDeliveryTag());
}); 
```

# AMQP_EXCLUSIVE

在这种情况下，EXCLUSIVE 仅用于每个实例的 Rpc 客户端的临时队列，以便它可以发布消息。换句话说，客户端为自己创建了一个一次性的临时队列，以专门从 RPC 服务器接收答案。这确保没有其他通道线程可以在该队列上发布。它仅对客户端及其响应者锁定。重要的是要注意 AQMP_EXCLUSIVE 不会阻止 RPC 服务器响应客户端的回复队列。AMQP_EXCLUSIVE 与尝试发布到同一队列资源的两个单独线程（通道实例）有关。发生这种情况时，队列基本上被锁定以供后续连接。交换声明也会发生相同的行为。

@Denis：在这种情况下，您的实现在某种程度上是正确的

*不好 - 不要在服务器中重新声明队列。这是客户的工作*

```
$callbackQueue = new \AMQPQueue($channel);
$callbackQueue->setName($envelope->getReplyTo());
$callbackQueue->setFlags(AMQP_EXCLUSIVE); // set EXCLUSIVE flag 
...
$callbackQueue->bind($exchange->getName(), 'rpc_reply'); 
```

您正在尝试绑定到名为 tempQueue 的 QUEUE。但是您已经在 client.php 中创建了一个名为 tempQueue 的队列。根据先启动哪个服务，另一个会抛出错误。所以你可以删掉所有这些，只保留最后一部分：

```
// trying to publish response back to client's callback queue
$exchange->publish(
    json_encode(array('processed by remote service!')),
    'rpc_reply', //<--BAD Should be: $envelope->getReplyTo()
    AMQP_MANDATORY & AMQP_IMMEDIATE
); 
```

然后通过替换修改上述内容：

```
'rpc_reply'

 with

 $envelope->getReplyTo() 
```

*不要在客户端声明队列名称*

```
// create a queue which we send messages to server via
$queue = new \AMQPQueue($channel);
//$queue->setName('tempQueue'); //remove this line
//add exclusivity
$queue->setFlags(AMQP_EXCLUSIVE);
$queue->declare();

//no need for binding... we're communicating on the queue directly
//there is no one listening to 'temp_action' so this implementation will send your message into limbo
//$queue->bind($exchangeName, 'temp_action'); //remove this line 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T08:38:07.347

我对这个问题的回答在 RabbitMQ 官方邮件列表上回复

虽然这里没有使用相同的库，但您已将官方教程移植到 PHP

[https://github.com/rabbitmq/rabbitmq-tutorials/tree/master/php](https://github.com/rabbitmq/rabbitmq-tutorials/tree/master/php)

您的代码中的问题是您声明了具有不同选项的队列。

因此，正如一个回复所说，如果您将队列 A 声明为持久的，那么该队列的所有其他声明都必须是持久的。独占标志也是如此。

此外，您无需重新声明队列即可向其发布消息。作为 RPC 服务器，您假设在“reply_to”属性中发送的地址已经存在。我认为 RpcClient 有责任确保它正在等待回复的队列已经存在。

附录：

队列中的排他性意味着只有声明队列的通道才能访问它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T03:58:56.937

在您的服务器上，您还应该将您的队列声明为独占。请记住，RabbitMQ 队列应该具有相同的标志。例如，如果您声明设置为“持久”的队列，另一端也应该将队列声明为“持久”所以在您的服务器上放置一个`$callbackQueue->setFlags(AMQP_EXCLUSIVE);`类似于客户端的标志。

# parsing - Play 2.0 框架，使用带有经过身份验证的请求的 BodyParser

> ID：11104005
> 
> 赞同：6
> 
> 时间：2012-06-19T15:12:19.677
> 
> 标签：parsing, scala, playframework

我希望能够在经过身份验证的请求上使用 BodyParser，如果我的身份验证设置为 ZenTasks 示例，我无法弄清楚如何做到这一点。

我的认证方法，

```
def IsAuthenticated(f: => String => Request[AnyContent] => Result) = {
  Security.Authenticated(username, onUnauthorized) { user =>
    Action(request => f(user)(request))
  }
}

def HasRole(role: List[String])
  (f: => String => Request[AnyContent] => Result) = IsAuthenticated {
  user => request => if (role.contains(getRole(user))) {
    f(user)(request) // This function returns the result.
  } else {
    Results.Forbidden
  }
} 
```

我的控制器方法，

```
def controller = HasRole(List("admin")) { user => _ => { 
  Action(parse.temporaryFile){ implicit request =>
    request.body.moveTo(new File("/tmp/filepath"))
    Redirect(routes.home)
  }
} 
```

这是我看到的错误，

```
[error]  found   : play.api.mvc.Action[play.api.libs.Files.TemporaryFile]
[error]  required: play.api.mvc.Result
[error]       Action(parse.temporaryFile){ implicit request =>
[error]                                  ^ 
```

这是一个相关的问题：[parse.json of authenticated play request](https://stackoverflow.com/questions/10054619/parse-json-of-authenticated-play-request)

这个人找到了一种解决方法，我相信临时文件示例也有一个，但我想知道我正在做什么（或为什么）不起作用。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-20T13:41:32.910

我相信我已经弄清楚了，主要是因为我在原始问题中遗漏了一些我没有意识到重要的细节。

问题是我包装了一个，`Action { Action { } }`因为该`IsAuthenticated`方法已经调用了其中的`Action`函数。我最终做的是`IsAuthenticated`用一个`BodyParser`作为参数的方法重载函数。因为我使用的`TemporaryFile`方法不是 的子类`AnyContent`，所以我还必须更改请求类型。

现在，这就是我的`Secured`特质：

```
def IsAuthenticated(f: => String => Request[Any] => Result) = {
  Security.Authenticated(username, onUnauthorized) { user =>
    Action(request => f(user)(request))
  }
}

def IsAuthenticated(b: BodyParser[Any] = parse.anyContent)
  (f: => String => Request[Any] => Result) = {
  Security.Authenticated(username, onUnauthorized) { user =>
    Action(b)(request => f(user)(request))
  }
}

def HasRole(role: List[String])(b: BodyParser[Any] = parse.anyContent)
  (f: => String => Request[Any] => Result) = IsAuthenticated(b) {
  user => request => getRole(user) match {
    case Some(r) if role.contains(r) => f(user)(request)
    case _ => Results.Forbidden
  }
} 
```

这就是我的控制器的样子：

```
def controller = HasRole(List("admin"))(parse.temporaryFile) { user => request =>
  request.body match {
    case b:TemporaryFile => b.moveTo(new File("/tmp/file"))
    case _ => Status(404)
  }
} 
```

希望这对其他人有帮助！

# installation - 如何取消 NSIS 设置而不显示确认消息框？

> ID：11104010
> 
> 赞同：2
> 
> 时间：2012-06-19T15:12:33.027
> 
> 标签：installation, nsis, messagebox, modern-ui

[使用Modern UI 2](http://nsis.sourceforge.net/Docs/Modern%20UI%202/Readme.html)进行 NSIS 设置后，用户在单击`Cancel`安装向导中的按钮时会收到一个消息框以进行确认。

我希望用户能够退出安装向导*，而无需*确认额外的“您确定吗？” 对话框消息框。

在 MUI 来源中，我发现了这个片段：

```
!macro MUI_FUNCTION_ABORTWARNING

  Function .onUserAbort

    !ifdef MUI_PAGE_FUNCTION_ABORTWARNING
      Call ${MUI_PAGE_FUNCTION_ABORTWARNING}
    !endif

    !ifdef MUI_ABORTWARNING
      !insertmacro MUI_ABORTWARNING
    !endif

    !ifdef MUI_CUSTOMFUNCTION_ABORT
      Call "${MUI_CUSTOMFUNCTION_ABORT}"
    !endif
  FunctionEnd

!macroend 
```

我都能够定义`MUI_PAGE_FUNCTION_ABORTWARNING`函数和`MUI_CUSTOMFUNCTION_ABORT`函数。

由于实际的消息框是在对`MUI_ABORTWARNING`宏的中间调用中定义的，因此我看不到阻止宏被调用的方法。

**我的问题是：**

有没有办法阻止 MUI`Cancel`在设置过程中单击按钮时向用户显示确认消息框？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T17:41:12.337

此警告由`!define MUI_ABORTWARNING`（包含 mui.nsh 之前）控制：

```
Name "Test"
Outfile "Test.exe"
RequestExecutionLevel user

#Comment/uncomment this to toggle the messagebox: !define MUI_ABORTWARNING

!include MUI2.nsh

!insertmacro MUI_PAGE_WELCOME
!insertmacro MUI_PAGE_INSTFILES
!insertmacro MUI_PAGE_FINISH
!insertmacro MUI_LANGUAGE English

Section
SectionEnd 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T15:41:33.297

（未经测试）您可以尝试取消定义相应的功能吗？

```
!undef MUI_ABORTWARNING
//or
!undef MUI_FUNCTION_ABORTWARNING 
```

# objective-c - 关于何时释放对象的更明确的答案

> ID：11104013
> 
> 赞同：0
> 
> 时间：2012-06-19T15:12:47.720
> 
> 标签：objective-c

我知道这已经被回答过（有点），但我一直在阅读关于何时或何时不释放尚未通过分配专门子类化的对象的相互矛盾的答案。

例如，如果我执行以下操作：

```
@property (..., retain) NSMutableArray *myArray; 
```

或者一般来说，

```
@property (some retain attribute - strong, weak, retain) type myObject; 
```

综合后，如果我对 myObject 什么都不做（不分配甚至忘记使用它），在任何情况下我仍然负责释放它吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T15:40:59.247

根据您是否使用ARC，有两个完全不同的答案。由于 ARC 环境非常简单，我将仅从 pre-ARC 的角度回答。要理解的主要内容是，所有关于属性保留语义的讨论只是分散了主要观点：**如果您拥有所有权，则必须放弃它**。放弃所有权是通过`-release`. 因此，您需要了解的是“什么才算拥有所有权？”

按照惯例，每当您向包含任何 [ `new`, `alloc`, `retain`, `copy`] 的类发送消息时，您现在就拥有该对象。编译器根据您指定的所有权策略为 Objective C 属性生成 setter 方法。例如...

```
@property (..., retain) NSMutableArray *myArray;
@synthesize myArray = _myArray; 
```

这会生成一个看起来像这样的方法¹：

```
- (void)setMyArray:(NSMutableArray *)myArray
{
    // This is oversimplified, just to illustrate the important point.
    // Again, this is NOT the way a setter would actually be synthesized.
    [_myArray release];
    _myArray = [myArray retain];
} 
```

所以现在，当你说类似的话时`self.myArray = someArray`，你就知道你已经向 发送​​了一条保留消息`someArray`，并且你有责任稍后发布它。这样做的理想方法是说`self.myArray = nil`，因为它在保留之前释放旧值`nil`。请注意，即使您从未对`myArray`属性设置任何内容，发送该消息也是非常安全的，因为发送消息`nil`是可以的。这就是为什么*总是*将拥有的属性设置为使用完它们的时间是很常见的`nil`，无论它们是如何使用的。

* * *

¹有关访问器应该如何实际工作的研究，请参阅[这篇文章](http://cocoawithlove.com/2010/06/assign-retain-copy-pitfalls-in-obj-c.html)。

# javascript - IE 固定站点任务列表中的 javascript url

> ID：11104014
> 
> 赞同：0
> 
> 时间：2012-06-19T15:12:53.000
> 
> 标签：javascript, internet-explorer, pinned-site

我正在尝试为我的项目设置固定站点功能。问题是我想让任务成为 javascript 操作而不是加载新页面。这样做的原因是该站点被设计为只能在一个窗口中工作。

我尝试添加以下 META 标签：

```
<meta name="msapplication-task" content="name=Test Action;
        action-uri=javascript:ui('test',8);icon-uri=/img/icons/test.ico" /> 
```

但是，这会导致任务根本不出现。（使用正常的 URL 使其显示得很好）

有没有办法做到这一点？我能想到的最好的方法是哈希并检查`hashchange`事件，但这不起作用，因为它会在窗口的新选项卡中打开......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T18:20:38.307

恐怕这是不支持的，因为操作列表是为启动应用程序而设计的，而不是用于在其中导航。

如果你真的想实现它，你可以打开一个新窗口，通过 Web 套接字向服务器发送消息，并让服务器也通过 Web 套接字将该消息转发到应用程序窗口。但这是一种非常 hacky 的方法，仅适用于 IE10。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T19:01:11.440

这个问题可以通过使用哈希来解决。通过将 设置为`action-uri`JavaScript 可读的东西，JS 就可以读取它，处理指令，然后清除散列以准备下一个任务。

这样做的好处是即使窗口还没有打开它也能工作，因为 JS 也会在第一次加载时读取哈希值。

关键是要添加`window-type=self`到内容中。

# javascript - 你画整个物体吗？

> ID：11104021
> 
> 赞同：0
> 
> 时间：2012-06-19T15:13:02.717
> 
> 标签：javascript, html

嗨，我正在学习 3d 游戏开发，我从 JavaScript 和 html5 画布开始，我想知道我是否有一个 3d 模型，我是否绘制整个模型（正面、背面等）并让网络浏览器决定渲染什么，还是我应该尝试只绘制相机视野中的侧面？我问这个是因为我可以看到执行 2 中的后者会更快，但这可能会变得非常复杂，我需要做更多的研究才能找到如何做到这一点。

谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T15:22:36.173

这取决于您，但至少部分取决于花时间剪裁模型或只是愚蠢地渲染整个事物是否更昂贵。

现代 GPU 在绘制大量几何图形方面非常快，因此您通常不会优化发送到卡的几何图形。但是，听起来您正在使用 2D 画布并编写自己的光栅化器，因此进行一些快速优化可能会更快。分析和实验将为您的特定项目找到正确的答案。

如果你只是在学习，我现在不会过分担心性能，而是确保你掌握了基本的想法和数学。

# php - 带有训练正斜杠的 Mod_rewrite 和重定向不起作用

> ID：11104024
> 
> 赞同：0
> 
> 时间：2012-06-19T15:13:09.547
> 
> 标签：php, .htaccess, mod-rewrite

我在 .htaccess 文件中使用以下代码行来创建重定向。问题是，每当我访问 example.com/register/ 时，它都找不到 css 文件，因为它正在寻找 example.com/register/mycss.css 而不是 example.com/mycss.css。

```
Redirect 301 register.php http://example.com/register
RewriteRule ^register/?$ register.php 
```

我该如何纠正？我是任何类型的 htaccess/mod_rewrite 函数的新手，所以如果有任何其他缺陷，请随时指出我正确的方向。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T15:19:27.020

在您的 HTML 中，使用所有外部资源的绝对路径，例如：

```
<link rel="stylesheet" type="text/css" href="/mycss.css"> 
```

注意最初的斜线。

# jquery - 如何通过 jquery 在 Ruby on rails 中实现 ajax

> ID：11104025
> 
> 赞同：1
> 
> 时间：2012-06-19T15:13:12.213
> 
> 标签：jquery, ruby-on-rails, ajax

如何将一些表单字段值传递给控制器​​ usnig ajax/jquery？例如，在 php/jquery 我做这样的事情：

```
 $("#test-btn").click(function(){
     var name=$("#name").val();
     var age=$("#age").val();
     $.post("insert.php",{name: name,age: age},
      function(data){
       $("#respone").html(data).hide().fadeIn(500);
      });
    });

//insert.php
<?php
 //insert values to database!
?> 
```

如何使用 ajax/jquery 在 Rails 中实现类似的功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T15:23:47.760

依靠。

您可以以完全相同的方式执行此操作，如果您需要操作任何数据，这很合适。

你可以使用 Rails 的 UJS 的`:remote => true`标志而不做任何事情；[这是一篇关于它的快速博客文章](http://tech.thereq.com/post/18910961502/rails-3-using-form-remote-true-with-jquery-ujs)。这适用于除了提交之外不需要做任何事情的情况，例如，无需操作。

# javascript - 为什么 process.env.NODE_ENV 未定义？

> ID：11104028
> 
> 赞同：234
> 
> 时间：2012-06-19T15:13:18.593
> 
> 标签：javascript, node.js

我正在尝试遵循有关 NodeJS 的教程。我不认为我错过了任何东西，但每当我打电话时，`process.env.NODE_ENV`我得到的唯一价值是`undefined`. 根据我的研究，默认值应该是`development`. 这个值是如何动态设置的，最初是在哪里设置的？

* * *

## 回答 #1

> 赞同：262
> 
> 时间：2012-06-19T15:19:53.230

`process.env`是对您的环境的引用，因此您必须在此处设置变量。

[在 Windows 中](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682653(v=vs.85).aspx)设置环境变量：

```
SET NODE_ENV=development 
```

在 macOS / OS X 或[Linux 上](http://www.codecoffee.com/tipsforlinux/articles/030.html)：

```
export NODE_ENV=development 
```

* * *

## 回答 #2

> 赞同：88
> 
> 时间：2016-08-15T02:58:10.307

**尖端**

在`package.json`：

```
"scripts": {
  "start": "set NODE_ENV=dev && node app.js"
 } 
```

在`app.js`：

```
console.log(process.env.NODE_ENV) // dev
console.log(process.env.NODE_ENV === 'dev') // false
console.log(process.env.NODE_ENV.length) // 4 (including a space at the end) 
```

所以，这可能会更好：

```
"start": "set NODE_ENV=dev&& node app.js" 
```

或者

```
console.log(process.env.NODE_ENV.trim() === 'dev') // true 
```

* * *

## 回答 #3

> 赞同：62
> 
> 时间：2014-06-15T18:08:17.193

对于使用 *nix（Linux、OS X 等）的人，没有理由通过第二个导出命令来执行此操作，您可以将其链接为调用命令的一部分：

```
NODE_ENV=development node server.js 
```

更容易，不是吗？:)

* * *

## 回答 #4

> 赞同：47
> 
> 时间：2015-07-24T13:10:29.123

我们在 Windows 上使用 node 时遇到了这个问题。

我们没有要求任何尝试运行应用程序的人设置这些变量，而是在应用程序中提供了一个备用方案。

```
var environment = process.env.NODE_ENV || 'development'; 
```

在生产环境中，我们将按照常用方法（SET/export）定义它。

* * *

## 回答 #5

> 赞同：19
> 
> 时间：2018-12-29T22:35:49.803

您可以使用[跨](https://www.npmjs.com/package/cross-env)环境 npm 包。它将负责修剪环境变量，并确保它在不同平台上工作。

在项目根目录中，运行：

```
npm install cross-env 
```

然后在你的 package.json 中，在脚本下，添加：

```
"start": "cross-env NODE_ENV=dev node your-app-name.js" 
```

然后在您的终端中，在项目根目录中，通过运行以下命令启动您的应用程序：

```
npm start 
```

然后，环境变量将在您的应用程序中作为 可用`process.env.NODE_ENV`，因此您可以执行以下操作：

```
if (process.env.NODE_ENV === 'dev') {
  // Your dev-only logic goes here
} 
```

* * *

## 回答 #6

> 赞同：14
> 
> 时间：2018-12-08T18:21:09.797

在**macOS**中，对于使用 express 版本`4.x.x`并使用`DOTENV`插件的用户，需要像这样使用：

1.  在您初始化应用程序的文件中安装插件导入后，如下所示： `require('dotenv').config({path: path.resolve(__dirname+'/.env')});`

2.  在根目录中创建一个文件 '.env' 并添加如下变量：

    `NODE_ENV=development` 或者 `NODE_ENV = development`

* * *

## 回答 #7

> 赞同：14
> 
> 时间：2019-02-13T08:11:33.513

在 package.json 我们必须像下面这样配置（适用于 Linux 和 Mac OS）

重要的是在您的构建命令之后“导出 NODE_ENV=production”是一个示例：

```
 "scripts": {
     "start": "export NODE_ENV=production && npm run build && npm run start-server",
     "dev": "export NODE_ENV=dev && npm run build && npm run start-server",
  } 
```

*   对于开发环境，我们必须点击“npm run dev”命令

*   对于生产环境，我们必须点击“npm run start”命令

* * *

## 回答 #8

> 赞同：7
> 
> 时间：2020-07-03T10:58:13.053

尽早在您的应用程序中要求并配置 dotenv。

`require('dotenv').config()`

* * *

## 回答 #9

> 赞同：6
> 
> 时间：2014-02-14T17:56:30.313

在 UBUNTU 中使用：

$ 出口 NODE_ENV=测试

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2020-05-06T11:03:54.310

这是由于操作系统

在您的 package.json 中，确保有您的脚本（其中 app.js 是您要执行的主 js 文件，并且 NODE_ENV 在 .env 文件中声明）。例如：

```
"scripts": {
    "start": "node app.js",
    "dev": "nodemon server.js",
    "prod": "NODE_ENV=production & nodemon app.js"
  } 
```

对于窗户

还要设置你的 .env 文件变量 NODE_ENV=development

如果您的 .env 文件位于 eg.config 文件夹的文件夹中，请确保在 app.js（您的主 js 文件）中指定

常量 dotenv = 要求（'dotenv'）；dotenv.config({ path: './config/config.env' });

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2021-05-28T15:35:27.077

你可以使用`dotenv`来自 npm 的包，这里是链接：[https ://www.npmjs.com/package/dotenv](https://www.npmjs.com/package/dotenv)

它允许您将所有配置放在一个`.env`文件中

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2022-01-13T07:18:06.510

安装 dotenv 模块（**npm i dotenv --save**）

***require('dotenv').config()*** //写在你将使用变量的文件中

**console.log(process.env.NODE_ENV)** // 返回存储在 .env 文件中的值

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2020-04-11T15:00:58.663

如果你在 React 中遇到过这个问题，你需要 react-scripts@0.2.3 及更高版本。此外，对于在 React 中工作以外的其他环境变量`NODE_ENV`，它们需要以`REACT_APP_`.

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2020-11-20T18:58:41.243

对我来说，问题在于我正在使用[pkg 库](https://github.com/vercel/pkg)将我的应用程序转换为可执行的二进制文件。在这种情况下，公认的解决方案不起作用。但是，使用以下代码解决了我的问题：

```
const NODE_ENV = (<any>process).pkg ? 'production' : process.env.NODE_ENV; 
```

我在 GitHub 上找到[了这个解决方案。](https://github.com/vercel/pkg/issues/358#issuecomment-415706989)

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2021-03-15T05:17:47.337

在电子 Js 中

```
"scripts": {
    "start": "NODE_ENV=development electron index.js",
}, 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2021-05-05T06:23:46.067

如果您使用名称**process**定义任何函数，那么这也可能导致此问题。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2021-10-28T00:17:34.707

**在 Windows/Mac/Linux 的 package.json 中定义 process.env.NODE_ENV：**

以下是在我的 Mac（MacBook Pro 2019，16 英寸，Big Sur）上对我有用的方法：

```
"scripts": {
    "build": "export NODE_ENV=prod || set NODE_ENV=prod&& npx eslint . && node --experimental-json-modules ./backend/app.js && gulp",
}, 
```

使用该`export NODE_ENV=prod || set NODE_ENV=prod&&` 字符串可能适用于 Windows 和 Linux，但我尚未对此进行测试。

如果有人可以确认那将是很棒的。

不幸的是，在我的**package.json文件中使用**[**cross-env** npm 包](https://www.npmjs.com/package/cross-env)对我来说根本**不起作用**，我在Mac 上花了很长时间试图完成这项工作。

 *** * *

## 回答 #18

> 赞同：0
> 
> 时间：2021-12-03T22:29:53.673

我也遇到过这个问题。我将 .env 文件移动到根文件夹（不是项目文件夹，更高级别）并且它成功了。

核实。它也可能对您有所帮助

* * *

## 回答 #19

> 赞同：-5
> 
> 时间：2014-02-06T09:25:09.810

也可以通过代码设置，例如：

`process.env.NODE_ENV = 'test';`**

# ipad - 在 Ipad (iOS5) 和 Mobile safari (v5.1) 上隐藏 Xpages 移动 Web 应用程序的地址栏

> ID：11104029
> 
> 赞同：0
> 
> 时间：2012-06-19T15:13:25.057
> 
> 标签：ipad, mobile, mobile-safari, xpages, lotus

关于我几天前提出的[问题](https://stackoverflow.com/a/11070091/1329052)，在我看来，当从 href 链接启动时，地址栏无法从 xpages 移动 Web 应用程序中隐藏。选择仅限于 href 作为“location.assign”，否则任何 javascript 都无法处理 lotus traveller 访问的邮件。我尝试了其他专家发布的近 20 种不同的变体来隐藏地址栏，但似乎都不起作用。我说“当不是从主屏幕启动时，不能在 ipad 上的 Xpages 移动 Web 应用程序中隐藏地址栏”时我错了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T17:58:21.657

以下适用于 iPhone 和 iPod Touch（并且类似于我在回答您提到的另一个问题时链接到的解决方案）。

使用以下逻辑创建客户端 JavaScript 库：

```
function hideAddressBar(){ window.scrollTo(0, 1)}

window.addEventListener("load", hideAddressBar, false); 
```

将以下内容添加到布局自定义控件或类似控件中，以便在要隐藏地址栏的所有 XPage 上运行（这里我假设客户端 JavaScript 库称为 addressbar.js：

```
<xp:script clientSide="true" type="text/javascript" src="/addressbar.js"></xp:script> 
```

查看 OpenNTF 上的[ITANA Tasks 项目，](http://www.openntf.org/internal/home.nsf/project.xsp?action=openDocument&name=ITANA%20Tasks)它使用此解决方案隐藏地址栏。

对于 iPad，在 Safari 中运行时无法隐藏地址栏。要在 iPad 上隐藏地址栏，您需要从主屏幕启动应用程序（并设置通常所需的元标记）。

# c# - c# 项目中的 Resources.resx

> ID：11104034
> 
> 赞同：0
> 
> 时间：2012-06-19T15:13:34.420
> 
> 标签：c#, wpf

我在 C#/WPF 项目中使用 -- 组合时`Resources.resx`遇到问题。`Resources.de.resx`整个解决方案包含几个项目，一些项目包含资源文件。

启动主项目时，我可以成功地将语言从英语切换到德语。但是来自子项目的 GUI 元素仍然显示英文文本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T15:21:15.443

您需要关注两个不同的属性：`Culture`和`UICulture`.

如果您将该`Culture`属性设置为`en-US`，则所有小数位、时间格式等都将是美国的方式。

设置`UICulture`to`en-US`告诉 ASP.NET 控件呈现货币、时间等，就像它们在美国一样。

所以，要么你设置了一个，而不是另一个......或者你需要一些代码在你的子项目中递归地设置它们。

# ajax - 检查是否没有标签，标签未声明，没有哈希

> ID：11104040
> 
> 赞同：0
> 
> 时间：2012-06-19T15:13:57.253
> 
> 标签：ajax, onload, hashchange

我正在开发这个网站： http: [//parkoura.tk/a/sandbox/](http://parkoura.tk/a/sandbox/)

我正在使用 ajax 导航。我有一个名为 ajax() 的函数，它应该在加载时执行。当它出现时，我希望它首先检查是否存在主题标签。如果没有主题标签，则该函数应该只是中断而不做任何事情。如果声明了主题标签，它会将 ajax 发送到另一个 php 并替换 div 内的内容。

除了 onload 哈希标签检查部分外，它还可以完美运行。当网站加载时，您可以看到一个滑块被渲染了一会儿。尽管没有声明主题标签，但它仍然会继续替换内容。

我有警报来显示逻辑应该如何工作。我的实际检查逻辑是这样的：

```
 <script>
    if (typeof location.hash != 'undefined' || location.hash != '' || location.hash != '#' || location.hash != '#carousel')
    { no hash,things stay the same the function is not executed. 
```

完整的js代码： [https ://pastee.org/v8cxp](https://pastee.org/v8cxp)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T15:23:47.580

试试这个 ：

```
if(window.location.hash) {
    // Process your ajax call
} else {
    // "no hash,things stay the same the function is not executed. "
} 
```

可能重复：[如何使用 JavaScript 检查 URL 中的#hash？](https://stackoverflow.com/questions/298503/how-can-you-check-for-a-hash-in-a-url-using-javascript)

# iphone - 如何以全分辨率从 UIImageView 获取旋转、缩放和平移的图像？

> ID：11104042
> 
> 赞同：15
> 
> 时间：2012-06-19T15:14:02.493
> 
> 标签：iphone, cocoa-touch, uiimageview, uigesturerecognizer

我有一个 UIImageView 可以使用手势识别器进行旋转、平移和缩放。结果，它在其封闭视图中被**裁剪。**一切正常，但我不知道如何以**全分辨率**保存图片的**可见部分**。这不是屏幕抓取。

 **我知道我直接从 UIImageView 的可见内容获得 UIImage ，但它仅限于屏幕的分辨率。

我假设我必须对 UIImage 进行相同的转换并裁剪它。有没有简单的方法可以做到这一点？

**更新**：例如，我有一个带有高分辨率图像的 UIImageView，比如说一张 8MP iPhone 4s 相机照片，它通过手势进行转换，因此它在其封闭视图中被缩放、旋转和移动。显然有一些裁剪正在进行，所以只显示了图像的一部分。显示的屏幕分辨率和下划线图像分辨率之间存在巨大差异，我需要图像分辨率中的图像。UIImageView 位于**UIViewContentModeScaleAspectFit**中，但使用 UIViewContentModeScaleAspectFill 的解决方案也可以。

这是我的代码：

```
- (void)rotatePiece:(UIRotationGestureRecognizer *)gestureRecognizer {

    if ([gestureRecognizer state] == UIGestureRecognizerStateBegan || [gestureRecognizer state] == UIGestureRecognizerStateChanged) {
        [gestureRecognizer view].transform = CGAffineTransformRotate([[gestureRecognizer view] transform], [gestureRecognizer rotation]);
        [gestureRecognizer setRotation:0];
    }
}

- (void)scalePiece:(UIPinchGestureRecognizer *)gestureRecognizer {

    if ([gestureRecognizer state] == UIGestureRecognizerStateBegan || [gestureRecognizer state] == UIGestureRecognizerStateChanged) {
        [gestureRecognizer view].transform = CGAffineTransformScale([[gestureRecognizer view] transform], [gestureRecognizer scale], [gestureRecognizer scale]);
        [gestureRecognizer setScale:1];
    }
}

-(void)panGestureMoveAround:(UIPanGestureRecognizer *)gestureRecognizer;
{
    UIView *piece = [gestureRecognizer view];

    //We pass in the gesture to a method that will help us align our touches so that the pan and pinch will seems to originate between the fingers instead of other points or center point of the UIView    
    if ([gestureRecognizer state] == UIGestureRecognizerStateBegan || [gestureRecognizer state] == UIGestureRecognizerStateChanged) {

        CGPoint translation = [gestureRecognizer translationInView:[piece superview]];
        [piece setCenter:CGPointMake([piece center].x + translation.x, [piece center].y+translation.y)];
        [gestureRecognizer setTranslation:CGPointZero inView:[piece superview]];
    } else if([gestureRecognizer state] == UIGestureRecognizerStateEnded) {
        //Put the code that you may want to execute when the UIView became larger than certain value or just to reset them back to their original transform scale
    }
}

- (BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldRecognizeSimultaneouslyWithGestureRecognizer:(UIGestureRecognizer *)otherGestureRecognizer {
    // if the gesture recognizers are on different views, don't allow simultaneous recognition
    if (gestureRecognizer.view != otherGestureRecognizer.view)
        return NO;

    // if either of the gesture recognizers is the long press, don't allow simultaneous recognition
    if ([gestureRecognizer isKindOfClass:[UILongPressGestureRecognizer class]] || [otherGestureRecognizer isKindOfClass:[UILongPressGestureRecognizer class]])
        return NO;

    return YES;
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view from its nib.
    appDelegate = (AppDelegate *)[[UIApplication sharedApplication] delegate];    
    faceImageView.image = appDelegate.faceImage;

    UIRotationGestureRecognizer *rotationGesture = [[UIRotationGestureRecognizer alloc] initWithTarget:self action:@selector(rotatePiece:)];
    [faceImageView addGestureRecognizer:rotationGesture];
    [rotationGesture setDelegate:self];

    UIPinchGestureRecognizer *pinchGesture = [[UIPinchGestureRecognizer alloc] initWithTarget:self action:@selector(scalePiece:)];
    [pinchGesture setDelegate:self];
    [faceImageView addGestureRecognizer:pinchGesture];

    UIPanGestureRecognizer *panRecognizer = [[UIPanGestureRecognizer alloc] initWithTarget:self action:@selector(panGestureMoveAround:)];
    [panRecognizer setMinimumNumberOfTouches:1];
    [panRecognizer setMaximumNumberOfTouches:2];
    [panRecognizer setDelegate:self];
    [faceImageView addGestureRecognizer:panRecognizer];

    [[UIApplication sharedApplication] setStatusBarHidden:YES withAnimation:UIStatusBarAnimationNone];

    [appDelegate fadeObject:moveIcons StartAlpha:0 FinishAlpha:1 Duration:2];
    currentTimer = [NSTimer timerWithTimeInterval:4.0f target:self selector:@selector(fadeoutMoveicons) userInfo:nil repeats:NO];

    [[NSRunLoop mainRunLoop] addTimer: currentTimer forMode: NSDefaultRunLoopMode];

} 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-24T12:09:06.680

以下代码使用计算的比例因子创建封闭视图（设置为`faceImageView`的父视图）的快照。`clipsToBounds``YES`

它假设 faceImageView 的内容模式是`UIViewContentModeScaleAspectFit`，并且 faceImageView 的框架设置为 enclosureView 的边界。

```
- (UIImage *)captureView {

    float imageScale = sqrtf(powf(faceImageView.transform.a, 2.f) + powf(faceImageView.transform.c, 2.f));    
    CGFloat widthScale = faceImageView.bounds.size.width / faceImageView.image.size.width;
    CGFloat heightScale = faceImageView.bounds.size.height / faceImageView.image.size.height;
    float contentScale = MIN(widthScale, heightScale);
    float effectiveScale = imageScale * contentScale;

    CGSize captureSize = CGSizeMake(enclosingView.bounds.size.width / effectiveScale, enclosingView.bounds.size.height / effectiveScale);

    NSLog(@"effectiveScale = %0.2f, captureSize = %@", effectiveScale, NSStringFromCGSize(captureSize));

    UIGraphicsBeginImageContextWithOptions(captureSize, YES, 0.0);        
    CGContextRef context = UIGraphicsGetCurrentContext();
    CGContextScaleCTM(context, 1/effectiveScale, 1/effectiveScale);
    [enclosingView.layer renderInContext:context];   
    UIImage *img = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();

    return img;
} 
```

根据当前变换，生成的图像将具有不同的大小。例如，当您放大时，尺寸会变小。您还可以设置`effectiveScale`为恒定值，以获得具有恒定大小的图像。

您的手势识别器代码不限制比例因子，即您可以不受限制地缩小/缩小。这可能非常危险！当您缩小很多时，我的捕获方法可以输出非常大的图像。

如果您已缩小拍摄图像的背景将是黑色的。如果希望它是透明的，则必须将 opaque-parameter 设置`UIGraphicsBeginImageContextWithOptions`为`NO`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-25T10:38:02.077

如果您有原始图像，为什么要捕获视图？只需将转换应用于它。这样的事情可能是一个开始：

```
UIImage *image = [UIImage imageNamed:@"<# original #>"];

CIImage *cimage = [CIImage imageWithCGImage:image.CGImage];

// build the transform you want
CGAffineTransform t = CGAffineTransformIdentity;
CGFloat angle = [(NSNumber *)[self.faceImageView valueForKeyPath:@"layer.transform.rotation.z"] floatValue];
CGFloat scale = [(NSNumber *)[self.faceImageView valueForKeyPath:@"layer.transform.scale"] floatValue];    
t = CGAffineTransformConcat(t, CGAffineTransformMakeScale(scale, scale));
t = CGAffineTransformConcat(t, CGAffineTransformMakeRotation(-angle));

// create a new CIImage using the transform, crop, filters, etc.
CIImage *timage = [cimage imageByApplyingTransform:t];

// draw the result
CIContext *context = [CIContext contextWithOptions:nil];
CGImageRef imageRef = [context createCGImage:timage fromRect:[timage extent]];
UIImage *result = [UIImage imageWithCGImage:imageRef];

// save to disk
NSData *png = UIImagePNGRepresentation(result);
NSString *path = [NSHomeDirectory() stringByAppendingPathComponent:@"Documents/result.png"];
if (png && [png writeToFile:path atomically:NO]) {
    NSLog(@"\n%@", path);
}
CGImageRelease(imageRef); 
```

如果这是您想要的，您可以轻松裁剪输出（查看`-[CIImage imageByCroppingToRect]` 或考虑翻译，应用核心图像过滤器等，具体取决于您的确切需求。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T17:42:39.347

我认为 Bellow Code 捕获了您当前的视图...

```
- (UIImage *)captureView {

    CGRect rect = [self.view bounds];

    UIGraphicsBeginImageContext(rect.size);
    CGContextRef context = UIGraphicsGetCurrentContext();
    [self.yourImage.layer renderInContext:context];   
    UIImage *img = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();

    return img;

} 
```

我想你想保存显示屏幕并使用它，所以我发布了这段代码......希望，这对你有帮助...... :)**

# jquery-mobile - 在jquery mobile中滚动结束时加载数据

> ID：11104046
> 
> 赞同：1
> 
> 时间：2012-06-19T15:14:05.177
> 
> 标签：jquery-mobile, yii

我正在使用 dataprovider 对象一次显示包含 25 条记录的列表，而不是分页，我想使用以下代码在滚动结束时显示下一页。但是有没有更好的方法，`window.location.href` 如果没有，是否有任何选项可以显示加载消息，直到页面加载。

```
$(document).ready(function()
{
    $('#content').bind('scroll', function () 
    {   
        totalDivHeight = eval($('#content')[0].scrollHeight) - eval($('#content').height());
        scrollPosition =eval($('#content').scrollTop())+25;// + eval($('#content').height());

        if (scrollPosition >= totalDivHeight)
        {   
            nextPageID = eval("<?= $nextPageID; ?>");
            prevPageID = eval("<?= $prevPageID; ?>");
            totalPages = eval("<?= $totalPages; ?>");
            if (nextPageID < totalPages)
                window.location.href='<?php echo $url;?>'+'&Store_page='+nextPageID;

        }
    });

}); 
```

编辑：我尝试了 ajax 函数而不是 window.location.href 但我不知道如何将 pagenumber 变量发送给提供者？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T17:19:42.937

您可能希望延迟加载内容并附加到表格的末尾，您可以通过 ajax 来实现。

您不应该重新发明轮子，其他人已经这样做了，这里只有一个实现：

[http://dcarrith.github.com/jquery.mobile.lazyloader/](http://dcarrith.github.com/jquery.mobile.lazyloader/)

# c++ - OpenGL、FreeGlut 和 Glew 因 glGenVertexArrays 调用而崩溃

> ID：11104047
> 
> 赞同：4
> 
> 时间：2012-06-19T15:14:13.073
> 
> 标签：c++, c, opengl, visual-studio-2008

我有一个如下程序：

```
#include <iostream>
#include <fstream>
#include <sstream>

#include <gl/glew.h>
#include <gl/freeglut.h>

#include <glm/glm.hpp>
#include <glm/gtc/matrix_transform.hpp>
#include <glm/gtc/type_ptr.hpp>

using namespace std;

#define WINDOW_WIDTH 640
#define WINDOW_HEIGHT 480

GLuint prog, verShader, fragShader;

GLint attrPos, attrNor;
GLint uniModelView, uniProjection, uniModelViewTransposeInverse;

glm::mat4 modelMatrix, viewMatrix, projectionMatrix, MV, MVP;
glm::mat3 MVI;

const string loadFile(string name)
{
    ifstream in(name.c_str(), ios::in);
    if (in.fail()) {
        cout << "File: '" << name << "' could not exist!!" << endl;
        return "";
    }

    stringstream data;
    data << in.rdbuf();
    in.close();

    return data.str();
}

GLuint createShader(GLenum type, const string name)
{
    GLint isCompileOk;
    GLuint shader;
    string shaderText, shaderType;
    const char *shaderSource;

    switch(type)
    {
    case GL_VERTEX_SHADER:
        shaderType = "GL_VERTEX_SHADER";
        break;
    case GL_FRAGMENT_SHADER:
        shaderType = "GL_FRAGMENT_SHADER";
        break;
    }

    shaderText = loadFile(name);
    shaderSource = shaderText.c_str();

    shader = glCreateShader(type);
    glShaderSource(shader, 1, &shaderSource, NULL);
    glCompileShader(shader);
    glGetShaderiv(shader, GL_COMPILE_STATUS, &isCompileOk);
    if (isCompileOk == GL_FALSE) {
        char *shaderErr;
        int errLength, errRetrieve;

        glGetShaderiv(shader, GL_INFO_LOG_LENGTH, &errLength);
        shaderErr = new char [errLength + 1];
        glGetShaderInfoLog(shader, errLength, &errRetrieve, shaderErr);

        cout << "Compile '" << shaderType << "' error:" << endl;
        cout << shaderErr << endl;

        delete [] shaderErr;
        return 0;
    } else {
        cout << "Compile '" << shaderType << "' ok!" << endl;
    }

    return shader;
}

bool makeShader()
{
    GLint isLinkOk;

    verShader = createShader(GL_VERTEX_SHADER, "vert.glsl");
    fragShader = createShader(GL_FRAGMENT_SHADER, "frag.glsl");

    prog = glCreateProgram();
    glAttachShader(prog, verShader);
    glAttachShader(prog, fragShader);
    glLinkProgram(prog);
    glGetProgramiv(prog, GL_LINK_STATUS, &isLinkOk);
    if (isLinkOk == GL_FALSE) {
        char *progErr;
        int errLenght, errRetrieve;

        glGetProgramiv(prog, GL_INFO_LOG_LENGTH, &errLenght);
        progErr = new char[errLenght + 1];

        glGetProgramInfoLog(prog, errLenght, &errRetrieve, progErr);
        cout << "Link program error:" << endl;
        cout << progErr << endl;

        delete [] progErr;

        return false;
    } else {
        cout << "Link program Ok!" << endl;
    }

    attrPos = glGetAttribLocation(prog, "position");

    uniModelView = glGetUniformLocation(prog, "ModelViewMatrix");
    uniProjection = glGetUniformLocation(prog, "ProjectionMatrix");
    uniModelViewTransposeInverse = glGetUniformLocation(prog, "ModelViewTransposeInverseMatrix");

    return true;
}

float vertexs[] = {
    -1.0f, 1.0f, 1.0f,
     1.0f, 1.0f, 1.0f,
     1.0f, -1.0f, 1.0f,
    -1.0f, -1.0f, 1.0f
};

unsigned short indicates[] = {
    0, 1, 2,
    2, 3, 0
};

GLuint vao, vbo, ibo;
void display()
{
    MV = viewMatrix * modelMatrix;
    MVP = projectionMatrix * MV;
    MVI = glm::transpose(glm::inverse(glm::mat3(MV)));

    glUseProgram(prog);
    glUniformMatrix4fv(uniModelView, 1, GL_FALSE, glm::value_ptr(MV));
    glUniformMatrix3fv(uniModelViewTransposeInverse, 1, GL_FALSE, glm::value_ptr(MVI));

    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);
    glBindVertexArray(vao);
    glDrawElements(GL_TRIANGLES, sizeof(indicates)/sizeof(unsigned short), GL_UNSIGNED_SHORT, 0);

    glutSwapBuffers();
}

void reshape(int w, int h)
{
    glViewport(0, 0, w, h);
    projectionMatrix = glm::perspective(45.0f, float(w)/h, 0.1f, 1000.0f);

    glUseProgram(prog);
    glUniformMatrix4fv(uniProjection, 1, GL_FALSE, glm::value_ptr(projectionMatrix));
}

void idle()
{
    glutPostRedisplay();
}

void Init()
{
    glClearColor(0.0f, 0.0f, 0.0f, 1.0f);

    glClearDepth(1.0);
    glDepthFunc(GL_LEQUAL);
    glEnable(GL_DEPTH_TEST);

    modelMatrix = glm::mat4(1.0f);
    viewMatrix = glm::lookAt(
        glm::vec3(0.0f, 5.0f, 10.0f),
        glm::vec3(0.0f, 0.0f, 0.0f),
        glm::vec3(0.0f, 1.0f, 0.0f)
    );
    projectionMatrix = glm::mat4(1.0f); 

    glGenVertexArrays(1, &vao);
    glBindVertexArray(vao);

    glGenBuffers(1, &vbo);
    glBindBuffer(GL_ARRAY_BUFFER, vbo);
    glBufferData(GL_ARRAY_BUFFER, sizeof(vertexs), vertexs, GL_STATIC_DRAW);
    glVertexAttribPointer(attrPos, 3, GL_FLOAT, GL_FALSE, sizeof(float) * 3, 0);
    glEnableVertexAttribArray(attrPos);

    glGenBuffers(1, &ibo);
    glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, ibo);
    glBufferData(GL_ELEMENT_ARRAY_BUFFER, sizeof(indicates), indicates, GL_STATIC_DRAW);

    glBindVertexArray(0);
}

int main(int argc, char *argv[])
{
    glutInit(&argc, argv);
    glutInitDisplayMode(GLUT_RGBA | GLUT_DOUBLE | GLUT_DEPTH);
    glutInitWindowSize(WINDOW_WIDTH, WINDOW_HEIGHT);
    glutCreateWindow("Rectangle!");

    if (glewInit() != GLEW_OK) {
        cout << "glewInit() fail!" << endl;
        return -1;
    }

    if (!makeShader()) {
        cout << "makeShader() error!!" << endl;
        return -1;
    }

    Init();

    reshape(WINDOW_WIDTH, WINDOW_HEIGHT);
    glutDisplayFunc(display);
    glutReshapeFunc(reshape);
    glutIdleFunc(idle);

    glutMainLoop();

    return 0;
} 
```

当我添加`VAO`缓冲区时，`freeglut`会崩溃`glutMainLoop()`，如果我删除`glGenVertexArrays`呼叫（当然，也删除了 VAO 的亲戚），它运行正常，所以我的猜测是 freeglut 的问题`glGenVertexArrays`。

**问题：**我的问题是什么？ps：我的显卡支持opengl 2.1，我用的是Visual Studio 2008。

**更新：**使用 VAO，上述程序运行良好，但只有在我关闭 freeglut 窗口时才会崩溃。

**更新着色器：**我的着色器非常简单：

顶点着色器：

```
#version 120

attribute vec3 position;
// attribute vec3 normal;

uniform mat4 ModelViewMatrix;
uniform mat3 ModelViewTransposeInverseMatrix;
uniform mat4 ProjectionMatrix;

void main(void)
{
    gl_Position = ProjectionMatrix * ModelViewMatrix * vec4(position, 1.0);
} 
```

片段着色器：

```
#version 120

void main()
{
    gl_FragColor = vec4(1.0, 0.0, 0.0, 1.0);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T22:51:41.200

```
glVertexAttribPointer(attrPos, 3, GL_FLOAT, GL_FALSE, sizeof(float) * 3, 0); 
```

您的顶点数据非常紧凑。使用 stride of`0`代替`sizeof(float) * 3`.

> 我的图形校准支持 opengl 2.1

此外，VAO 仅[在 3.0 中成为核心](http://www.opengl.org/wiki/Vertex_Array_Object)。`ARB_vertex_array_object`在使用该功能之前，您应该检查支持。

# ios - 将 SQLite3 数据库转换为 JSON iOS

> ID：11104048
> 
> 赞同：2
> 
> 时间：2012-06-19T15:14:13.370
> 
> 标签：ios, json, web-services, sqlite, etl

我已经在谷歌上搜索了一个教程来帮助解决这个问题，但还没有找到任何全面的东西。

我想通过以 JSON 格式发送数据库中包含的数据来单向同步 SQLite3 数据库与 Web 服务，但我无法找到有关如何将数据库转换为 JSON 的信息。如果有人可以向我指出涵盖此内容的教程的方向，或者展示一个如何转换简单 SQLite 表的简短示例，那就太好了！

该数据库包含大约十个可能包含大量数据的表，因此除了一个简单的示例之外，我们将不胜感激一些一般性的指导。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-19T15:30:51.777

答案很简单：您必须将 SQL 数据库中的所有信息转换为某种抽象数据类型，然后将该数据序列化为 JSON。我假设您正在使用 Objective-C 进行开发，因为它是 iOS 编程的主要语言。我已经为这两个目的编写了库，因此使用我的[SQL 助手类](https://github.com/H2CO3/SQLHelper)和我的[JSON 库](https://github.com/H2CO3/CarbonateJSON/)，您可以执行以下操作：

```
SQLHelper *db = [[SQLHelper alloc] initWithFile:@"/User/Library/large_db.sqlite3"]; // specify full file path

// repeat these 3 steps for every table
NSArray *allContents = [db executeQuery:@"SELECT * FROM first_table"];
NSString *json = [allContents generateJson];
// now send `json' to the web service

// cleanup once we finished
[db release]; 
```

我希望这有帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T16:52:33.577

我制作了一个 ios 应用程序，并尝试了这两个库 -

1.  数据库库 - [https://github.com/ccgus/fmdb](https://github.com/ccgus/fmdb)
2.  json 库 - [https://github.com/stig/json-framework](https://github.com/stig/json-framework)

我认为从 db 制作 json 文本很容易，首先将所有数据读取到 NSDictionary，然后将其转换为 json 文本。您可以检查这两个库。

# c - 指向 char[] 的双指针

> ID：11104051
> 
> 赞同：2
> 
> 时间：2012-06-19T15:14:26.010
> 
> 标签：c, pointers, casting

好的，所以我有以下代码：

```
char** args = (char**)malloc(10*sizeof(char*));
memset(args, 0, sizeof(char*)*10);

char* curToken = strtok(string, ";");

for (int z = 0; curToken != NULL; z++) {
    args[z] = strdup(curToken);
    curToken = strtok(NULL, ";")
} 
```

我希望每个都`arg[z]`转​​换成一个字符数组——char string[100]——然后在我遵循的算法中进行处理。每个都`arg[z]`需要在某个时候强制转换为变量字符串。我对指针感到困惑，但我正在慢慢变得更好。

编辑：

```
char string[100] = "ls ; date ; ls"; 
```

`arg[0]`将是 ls，`arg[1]`将是日期，并且`arg[2]`将是上述代码之后的 ls。

我想将每个参数放回 char string[100] 并通过算法处理它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T06:45:33.190

一种最简单的方法是将原始字符串的备份保留在某个临时变量中。

```
char string[100] = "ls ; date ; ls"; 
char temp_str[100] = {0};
strcpy (temp_str, string); 
```

另一种方法是通过`strcat`. `z`有agruments的数量。

```
memset(string, '\0', 100);
for (i = 0; i < z; i++)
{
    strcat(string, args[i]);
    if (i != (z - 1))
    {
        //if it is last string dont append semicolon
        strcat(string, ";");
    }
} 
```

注意：注意边界条件检查

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T15:19:36.950

如果要将字符串的部分复制到固定长度的 string[100] 中，则需要为循环内的每个 args[] 分配 100 个字符，并将 strncpy() 的结果 strtok 放入其中。strdup 只会为提供的字符串的实际长度分配足够的内存（加上 \0）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T15:25:02.463

这个：

```
char** args = (char**)malloc(10*sizeof(char*));
memset(args, 0, sizeof(char*)*10); 
```

是损坏的代码。首先，您不应该强制转换`malloc()`的返回值。其次，`args`是一个指向十个指针的指针`char`。您不能将它们设置为`NULL`using `memset()`，不能保证“所有字节为零”与`NULL`. 您需要使用循环。

# c# - XDocument.ToString(SaveOptions.DisableFormatting) 工具提示

> ID：11104054
> 
> 赞同：4
> 
> 时间：2012-06-19T15:14:37.850
> 
> 标签：c#, linq-to-xml

![在此处输入图像描述](../Images/b8932924ebdc707ccaf4bcabfaba8fdc.png)

这可能是一个幼稚的问题。但是，我只是想了解为什么工具提示说“保留”[实际上它丢弃了不必要的空白](http://msdn.microsoft.com/en-us/library/system.xml.linq.saveoptions.aspx)。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T15:20:16.413

这里有一个误导性的双重否定。您链接到的文档说（强调我的）：

> 如果您*不禁*用格式化，则 XML 树中所有无关紧要的空白都将*被丢弃*，并且 XML 在序列化时被格式化（缩进）。

这意味着如果`DisableFormatting` *指定，则**不会*丢弃无关紧要的空白，即它将保留在序列化输出中。所以，工具提示是正确的。

# iphone - 使用 NSUserDefaults xcode iphone 的问题

> ID：11104058
> 
> 赞同：0
> 
> 时间：2012-06-19T15:14:50.490
> 
> 标签：iphone, ios, xcode

嗨，这里是有问题的代码和我遇到的问题，它会编译但附有警告，我已经突出显示。

```
-(void)viewdidloader
{   
highscore = [[[NSUserDefaults standardUserDefaults] objectForKey:@"HIGHSCORE"]integerValue];
}

(void) differnt void
if (score>=highscore) 
    {
    highscore = score; 
```

//问题从这条线开始

```
 [[NSUserDefaults standardUserDefaults] setObject:[NSNumber numberWithInt:highscore forKey:@"HIGHSCORE"]];
    highscorelabel.text = [NSString stringWithFormat:@"%i",highscore ];

            UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"NEW HIGH SCORE" message:[NSString stringWithFormat: @"Well done you got a new high score          Level : %d and scored %i points" ,fred,score ] delegate:nil cancelButtonTitle:@"Dismiss" otherButtonTitles:nil];
            [alert show];
            [alert release];
        }

        else 
        {
        UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"You Lose" message:[NSString stringWithFormat: @"Unlucky you only made it to          Level : %d and scored %i points" ,fred,score ] delegate:nil cancelButtonTitle:@"Dismiss" otherButtonTitles:nil];
        [alert show];
        [alert release];
        }

Issues

NSNumber may not respond to +number:forkey
(message without a matching method signature will be assumed to return "ID" and accept '' as an argument)
NSUserdefaukts may not respond to -setobject 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T15:19:40.253

你的问题在这里：

```
[[NSUserDefaults standardUserDefaults] setObject:[NSNumber numberWithInt:highscore forKey:@"HIGHSCORE"]]; 
```

没有方法签名`NSNumber`也需要一个 forKey 参数，你缺少一个括号来关闭 NSNumber numberwithint，改成这个来解决问题：

```
[[NSUserDefaults standardUserDefaults] setObject:[NSNumber numberWithInt:highscore] forKey:@"HIGHSCORE"]; 
```

# php - 在 PHP 中将 ISO 8601 格式转换为 d MY

> ID：11104068
> 
> 赞同：2
> 
> 时间：2012-06-19T15:15:15.590
> 
> 标签：php

PHP代码：

```
echo date("c");  //out put like this 2012-06-19T20:37:44+05:30   
echo date("d M, Y");  //out put "Jun 19,2012"

$time=date("c");
echo date("d M, Y",$time);// This is not working. What could the reason be? 
```

我的要求是将 ISO8601 格式转换为“d M,Y”。我需要它以这种格式与[timeago jQuery 插件](http://timeago.yarp.com/)一起使用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T15:17:18.650

您需要使用[strtotime()](http://php.net/manual/en/function.strtotime.php)函数。

```
echo date("d M, Y",strtotime(date("c"))); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-19T15:35:12.927

或者，您可以使用 PHP 的[DateTime](http://www.php.net/datetime)对象来执行转换：-

```
$dateTime = DateTime::createFromFormat(DateTime::ISO8601, date('c'));
echo $dateTime->format('d M Y'); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-19T15:17:42.780

问题是 date 的第二个参数应该是时间戳，你正在传递一个字符串。使用[strtotime](http://php.net/strtotime)将您的日期转换为时间戳：

```
$time = date("c");
echo date("d M, Y", strtotime($time)); 
```

# nested - NSJSONSerialization 与嵌套的 NSMutableDictionary

> ID：11104070
> 
> 赞同：2
> 
> 时间：2012-06-19T15:15:18.753
> 
> 标签：nested, nsmutabledictionary, nsjsonserialization

我在这里得到了一些东西，我需要用另一双眼睛看过去。我有一个 NSMutableDictionary，我需要将其转换为 JSON 对象，然后发送到我的服务器。字典是这样的...

```
{
    data = (
        {
            184 = 3;
            185 = "";
            186 = "";
            187 = "";
            188 = "";
            latitude = "";
            longitude = "";
            recorded = "2012-06-19 12:53:16 +0000";
        }, {
            184 = 0;
            185 = Is;
            186 = This;
            187 = "Working?";
            188 = "I think so.";
            latitude = "";
            longitude = "";
            recorded = "2012-06-19 12:54:26 +0000";
        }
    );

    deviceID = b1c96c4467a8bcca97a826ad9941a10a;
    key = 6puwX3v2;
    method = putSurveyData;
    responses = 2;
    surveyID = 84;
} 
```

到目前为止，没有问题，但是一旦我使用 NSJSONSerialization 将该字典转换为 JSON 对象，它就会使我的应用程序崩溃。上面的字典称为 mainDictionary，我使用以下行转换为 JSON。

```
NSData *jsonData = [NSJSONSerialization dataWithJSONObject:mainDicitionary options:kNilOptions error:nil]; 
```

如果我从“数据”键中删除嵌套字典，它就可以正常工作。我什至尝试在“数据”键中放置一个公共数组，这也有效。只要我将 NSMutableDictionary 放在那里，它似乎就会爆炸。我缺少一些简单的东西吗？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T18:25:16.390

我找到了答案。上面的“记录”字段实际上是一个 [NSDate date] 而不是日期戳的字符串表示形式。我把它转换成一个字符串，一切都很好。

# localization - 欧洲人如何写出带小数的数字列表？

> ID：11104071
> 
> 赞同：6
> 
> 时间：2012-06-19T15:15:27.867
> 
> 标签：localization, number-formatting

据我了解，欧洲人（*）用逗号作为小数分隔符写数字，所以四分之一写为`1,25`

欧洲人也用逗号分隔列表，那么十进制数的列表怎么写呢？我，作为一个英国人，会这样写四分之一、四分之一、四分之一和四分之三：

```
1.25, 1.5, 1.75 
```

你在欧洲是怎么做到的？

（为什么这是一个编程问题？因为我正在编写一个程序，它会向欧洲用户询问数字列表！）

[* 就本问题而言，欧洲没有说英语的国家。:-)]

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-19T15:35:12.303

我是欧洲人（法国人），在这里几乎所有程序中，我们都必须使用分号`';'`作为分隔符，即使数字只是整数，因为逗号对我们来说看起来不像分隔符。在数学中，分号是分隔数字列表的唯一正确方法。

最常见的例子是当我们必须输入要在 PDF 上打印的页码时，所有程序都要求使用分号分隔的列表，我显然发现它很直观。我认为如果某些人感到不舒服，他们会改变它。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-19T17:13:36.070

这因文化和文化而异。CLDR 数据包含指定列表分隔符的[“](http://unicode.org/reports/tr35/#Number_Symbols) list”元素，它是大多数文化的分号，参见[数字符号图表](http://unicode.org/repos/cldr-tmp/trunk/diff/by_type/number.symbol.html)（元素“list”）。不过，该定义非常隐含，并且在语言环境中存在差异。有些人认为 1,25、1,5、1,75 可以接受，而另一些人则更喜欢 1,25；1,5; 1,75。也有人认真地认为，在强烈的数学或数字上下文中，应该偏离语言环境的做法，使用带小数点的盎格鲁-撒克逊符号，因此使用逗号作为分隔符。

在实际方面，我认为使用“;”不会是很错误的。当使用十进制逗号时，甚至在使用小数点时，作为数字列表分隔符。所以你甚至可以考虑使用“;” 在所有语言环境中。

但是当涉及到*用户输入*时，就比较棘手了。原则上，您接受的内容是自由的，但由于逗号可以是十进制逗号、千位分隔符或列表项分隔符，因此存在过于自由的情况。

如果可能，请分别提示每个数字，避免分隔符问题。如果这是不可能的，关键是要非常非常清楚地知道使用哪种分隔符。我什至会说需要分号“;” 是最可靠的事情。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-19T15:43:16.277

为什么要问一般的欧洲人？我不认为有一种欧洲的方式可以做到这一点，如果碰巧是这种情况，那将是纯粹的运气。欧洲由不同的文化组成，每种文化都有自己的规则。

您没有提及您使用的是什么平台，但您可能可以依靠您的平台来获取此信息。对于 .NET，您可以通过[Textinfo.ListSeparator](http://msdn.microsoft.com/en-us/library/system.globalization.textinfo.listseparator.aspx)获取此信息。例如，这会给你法语（结果：分号）：

```
string listSeparator = new CultureInfo("fr-FR").TextInfo.ListSeparator; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-19T15:19:05.040

我不认为有一种方法可以做到这一点。分隔数字的空格也一样，或者您可以使用分号 ( `';'`) 分隔数字

# select - break 语句是否从 switch/select 中断？

> ID：11104085
> 
> 赞同：178
> 
> 时间：2012-06-19T15:16:10.830
> 
> 标签：select, switch-statement, go, break

我知道`switch`/`select`语句在每种情况下都会自动中断。我想知道，在以下代码中：

```
for {
    switch sometest() {
    case 0:
        dosomething()
    case 1:
        break
    default:
        dosomethingelse()
    }
} 
```

该`break`语句是退出`for`循环还是仅退出`switch`块？

* * *

## 回答 #1

> 赞同：240
> 
> 时间：2012-06-19T16:41:11.240

> [Break 语句，Go 编程语言规范。](http://golang.org/ref/spec#Break_statements)
> 
> “break”语句终止最里面的“for”、“switch”或“select”语句的执行。
> 
> ```
> BreakStmt = "break" [ Label ] . 
> ```
> 
> 如果有标签，它必须是封闭的“for”、“switch”或“select”语句的标签，这是执行终止的标签（§For 语句、§Switch 语句、§Select 语句）。
> 
> ```
> L:
>   for i < n {
>       switch i {
>       case 5:
>           break L
>       }
>   } 
> ```

因此，`break`您示例中的语句终止了`switch`语句，即“最内层”语句。

* * *

## 回答 #2

> 赞同：70
> 
> 时间：2012-06-19T15:38:42.330

一个有希望的说明性示例：

```
loop:
for {
        switch expr {
        case foo:
                if condA {
                        doA()
                        break // like 'goto A'
                }

                if condB {
                        doB()
                        break loop // like 'goto B'                        
                }

                doC()
        case bar:
                // ...
        }
A:
        doX()
        // ...
}

B:
doY()
// .... 
```

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2016-09-04T17:54:31.170

是的，`break`打破了内在`switch`。

[https://play.golang.org/p/SZdDuVjic4](https://play.golang.org/p/SZdDuVjic4)

```
package main

import "fmt"

func main() {

myloop:
    for x := 0; x < 7; x++ {
        fmt.Printf("%d", x)
        switch {
        case x == 1:
            fmt.Println("start")
        case x == 5:
            fmt.Println("stop")
            break myloop
        case x > 2:
            fmt.Println("crunching..")
            break
        default:
            fmt.Println("idling..")
        }
    }
} 
```

> ```
> 0idling..
> 1start
> 2idling..
> 3crunching..
> 4crunching..
> 5stop
> 
> Program exited. 
> ```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2012-06-19T15:21:57.403

只是从一个开关块。您可以检查 Golang 自己的代码中的大量示例（比较[内部 break](https://github.com/golang/tools/blob/6185cb1f3105899cd34484c59407846bec0acc06/cmd/goyacc/yacc.go#L1397)和[outer break](https://github.com/golang/tools/blob/6185cb1f3105899cd34484c59407846bec0acc06/cmd/goyacc/yacc.go#L406)）。

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2020-10-12T16:39:21.093

这个问题可能已经太老了，但我仍然认为标签会使我们的代码变得更难阅读。而不是打破 for inside select，只需为循环设置一个标志并在调用 break 之前在 select-case 内处理它。例如：

```
loop := true
for loop {
    select {
    case <-msg:
        // do your task here
    case <-ctx.Done():
        loop = false
        break
    }
} 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2014-05-02T03:56:50.980

这应该解释它。

```
for{
    x := 1
    switch {
    case x >0:
        fmt.Println("sjus")
    case x == 1:
        fmt.Println("GFVjk")
    default:
        fmt.Println("daslkjh")
    }
}
} 
```

永远运行

```
for{
    x := 1
    switch {
    case x >0:
        fmt.Println("sjus")
        break
    case x == 1:
        fmt.Println("GFVjk")
    default:
        fmt.Println("daslkjh")
    }
}
} 
```

再次，永远运行

但

```
package main

import "fmt"

func main() {
d:
for{
x := 1
    switch {
    case x >0:
        fmt.Println("sjus")
        break d
    case x == 1:
        fmt.Println("GFVjk")
    default:
        fmt.Println("daslkjh")
    }
}
} 
```

将打印 sjus ... 清楚吗？

[http://play.golang.org/p/GOvnfI67ih](http://play.golang.org/p/GOvnfI67ih)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-19T15:19:08.660

它只退出 switch 块。

# iphone - 为文本字段显示 uipicker 而不是键盘

> ID：11104096
> 
> 赞同：0
> 
> 时间：2012-06-19T15:16:59.157
> 
> 标签：iphone, objective-c, ios, xcode, uipicker

我正在尝试隐藏键盘并显示 uipicker 而不是文本字段。

但似乎我走错了方向，或者我的编码有问题，因为键盘仍然持续显示（在另一个视图出现后可以看到 uipicker）。我认为我的 uipicker 方法没有任何问题，因为 uipicker 正确显示只是键盘仍在阻止它。谁能指出代码的哪一部分出错或引导我走向正确的方向？

这是我在 textFieldDidBeginEditing 方法中的代码：

```
[textField resignFirstResponder];

[pickerView setHidden:NO];

pickerView = [[UIPickerView alloc] initWithFrame:CGRectMake(0, 180, 300, 180)];

pickerView.delegate = self;

pickerView.showsSelectionIndicator = YES;

[self.view addSubview:pickerView]; 
```

如果需要更多代码，请告诉我。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T15:19:55.537

最简单的方法是将选取器视图设置为文本字段的输入视图：

```
textField.inputView = pickerView; 
```

# c# - Linq To SQL DefaultIfEmpty

> ID：11104097
> 
> 赞同：1
> 
> 时间：2012-06-19T15:17:13.403
> 
> 标签：c#, linq-to-sql

我有两张表，一张有 450 行，另一张是排序表，它的行数要少得多。我希望能够使用左连接对表的集合进行排序，并且我希望第二个表中的项目按名为“SortOrder”的 Int 列排序。像这样：

```
var g_getFragments = (from c in context.Fragments
                                          join fso in context.FragmentSortOrders
                                          on c.ID equals fso.ID into sr
                                          from x in sr.DefaultIfEmpty()
                                         select new { c.ID_Section, c.ID, c.Title, c.IsManagementFragment, SortOrder = x.SortOrder ?? Int32.MaxValue})
                                         .OrderBy(o => o.SortOrder)
                                         .OrderBy(f => f.Title)
                                         .ToList(); 
```

这将按预期返回所有 450 行，但我的顺序不正确。我希望顺序在第二个表中的 SortOrder 值中排在第一位，如果它为空，则将其设置为 Int32.MaxValue 以便排在最后。因此，如果我在第一个表中有 1 个项目，第二个表中的 SortOrder 值为 1，它应该是列表中的第一个，但它不是。但是，它是按标题排序的。

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T15:21:03.727

将您的第二个更改`OrderBy`为`ThenBy`.

# symfony - Symfony2 Translatable 选择语言/跳过翻译

> ID：11104105
> 
> 赞同：0
> 
> 时间：2012-06-19T15:17:47.023
> 
> 标签：symfony, translation, twig

是否可以在 twig 中获得特定的翻译或跳过翻译？我想获得与当前语言环境无关的特定字段的英文翻译

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T16:09:32.303

是的，您可以强制使用这样的语言环境：

```
{% trans with {'%name%': 'Fabien'} from "app" into "fr" %}Hello %name%{% endtrans %} 
```

在[文档](http://symfony.com/doc/current/book/translation.html#twig-templates)中找到。

# symbian - 在 symbian60 中下载监听器

> ID：11104109
> 
> 赞同：0
> 
> 时间：2012-06-19T15:17:49.020
> 
> 标签：symbian

是否可以在 symbian 中监控 HTTP 下载操作。我的意思是有可能知道在symbian中成功下载。我是一个新极客。请帮我。提供一些建议。我正在使用塞班 60。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T11:29:55.877

查看 RConnectionMonitor 类。

（PS 开始学习 Symbian 没有意义——它是死平台）

# c# - 在 OnPaint 中调用 OnPaintBackground

> ID：11104112
> 
> 赞同：0
> 
> 时间：2012-06-19T15:18:07.107
> 
> 标签：c#, .net, winforms

在我们的 UI 项目中，我们使用了一组自定义控件。自定义控件是几年前编写的。所有控件都会覆盖 OnPaint 方法，如下所示。在 OnPaint 方法中调用 OnPaintBackground 是否正确？

```
protected override void OnPaint(PaintEventArgs e)
    {
        base.OnPaintBackground(e);
        base.OnPaint(e);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T12:16:36.790

摘自[https://sites.google.com/site/craigandera/craigs-stuff/windows-forms/flicker-free-control-drawing](https://sites.google.com/site/craigandera/craigs-stuff/windows-forms/flicker-free-control-drawing) 每次您的控件绘制时，都会触发 2 个事件。OnPaintBackground，然后是 OnPaint。他们总是一个接一个地开火。因此，作为用户类型，它们会像这样触发：OnPaintBackground、OnPaint、OnPaintBackground、OnPaint 等。

这可能有助于您理解底层的思考过程，但它仍然证明调用 OnPaintBackground 方法是合理的。

# c# - C# 任何以

> ID：11104113
> 
> 赞同：-2
> 
> 时间：2012-06-19T15:18:09.907
> 
> 标签：c#

假设我们有一个文本框和一个按钮。用户编写表格并单击按钮。

我希望我的程序接受任何以“ta”开头的文本。所以它会接受这个输入。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-19T15:19:09.983

要检查字符串是否以指定字符串开头，您可以使用[StartsWith](http://msdn.microsoft.com/en-us/library/ms131452.aspx)方法：

```
if(stringVariable.StartsWith("ta")) {
    // starts with ta
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T15:27:05.487

让我们正确地做到这一点...... :)

```
 /// <summary>
    /// Determines whether the supplied string begins with "ta".
    /// </summary>
    /// <param name="value">The string to test.</param>
    /// <returns>True if the supplied string starts with "ta"; false, otherwise.</returns>
    /// <remarks>The comparison is case-insensitive.</remarks>
    private static bool StartsWithTa(string value)
    {
        const string prefix = "ta";
        if (value == null)
            return false;

        return value.StartsWith(prefix, StringComparison.CurrentCultureIgnoreCase);
    } 
```

# java - javax.sound.sampled.UnsupportedAudioFileException：加载 wav 文件时无法从输入文件获取音频输入流

> ID：11104118
> 
> 赞同：6
> 
> 时间：2012-06-19T15:18:20.827
> 
> 标签：java, audio, wav, javasound

我正在使用**java 6**，并且我正在尝试加载**wav**文件，以获取其持续时间如下：

```
public static double getAudioFileDuration(File file) {
        try {
            AudioInputStream stream = AudioSystem.getAudioInputStream(file);

            // At present, ALAW and ULAW encodings must be converted
            // to PCM_SIGNED before it can be played
            AudioFormat format = stream.getFormat();
            if (format.getEncoding() != AudioFormat.Encoding.PCM_SIGNED) {
                format = new AudioFormat(AudioFormat.Encoding.PCM_SIGNED,
                        format.getSampleRate(), format.getSampleSizeInBits(),
                        format.getChannels(), format.getFrameSize(),
                        format.getFrameRate(), true); // big endian
                stream = AudioSystem.getAudioInputStream(format, stream);
            }
            DataLine.Info info = new DataLine.Info(Clip.class,
                    stream.getFormat(),
                    ((int) stream.getFrameLength() * format.getFrameSize()));
            Clip clip = (Clip) AudioSystem.getLine(info);
            // clip.open(stream);
            double durationInSecs = clip.getBufferSize()
                    / (clip.getFormat().getFrameSize() * clip.getFormat()
                            .getFrameRate());
            double minTemp = Math.round(Math.round(durationInSecs) / 60.0);
            double durationInMin = minTemp
                    + (((Math.round(durationInSecs) / 60.0) - minTemp) * 60)
                    / 100;
            return durationInMin;

        } catch (Exception e) {
            e.printStackTrace();
            return 0;
        }

    } 
```

但对于某些**WAV**文件，我无法获得持续时间，并且出现以下异常：

```
javax.sound.sampled.UnsupportedAudioFileException: could not get audio input stream from input file
    at javax.sound.sampled.AudioSystem.getAudioInputStream(AudioSystem.java:1170)
    at com.xeno.advertisingsuite.web.utils.GeneralUtils.getAudioFileDuration(GeneralUtils.java:163)
    at com.xeno.advertisingsuite.web.beans.AdPageBean.saveAudioFileRef(AdPageBean.java:183)
    at com.xeno.advertisingsuite.web.beans.AdPageBean.fileListener(AdPageBean.java:149)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.apache.el.parser.AstValue.invoke(AstValue.java:262)
    at org.apache.el.MethodExpressionImpl.invoke(MethodExpressionImpl.java:278)
    at com.sun.faces.facelets.el.TagMethodExpression.invoke(TagMethodExpression.java:105)
    at org.icefaces.ace.component.fileentry.FileEntry.broadcast(FileEntry.java:306)
    at org.icefaces.ace.component.fileentry.FileEntryPhaseListener$1.visit(FileEntryPhaseListener.java:97)
    at com.sun.faces.component.visit.PartialVisitContext.invokeVisitCallback(PartialVisitContext.java:183)
    at javax.faces.component.UIComponent.visitTree(UIComponent.java:1589)
    at javax.faces.component.UIComponent.visitTree(UIComponent.java:1600)
    at javax.faces.component.UIForm.visitTree(UIForm.java:344)
    at javax.faces.component.UIComponent.visitTree(UIComponent.java:1600)
    at javax.faces.component.UIComponent.visitTree(UIComponent.java:1600)
    at org.icefaces.ace.component.fileentry.FileEntryPhaseListener.beforePhase(FileEntryPhaseListener.java:102)
    at com.sun.faces.lifecycle.Phase.handleBeforePhase(Phase.java:228)
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:99)
    at com.sun.faces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:139)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:594)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:304)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at com.ocpsoft.pretty.PrettyFilter.doFilter(PrettyFilter.java:118)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:368)
    at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:99)
    at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:83)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:97)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:60)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:78)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    at org.springframework.security.web.authentication.rememberme.RememberMeAuthenticationFilter.doFilter(RememberMeAuthenticationFilter.java:119)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:54)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:35)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilter(BasicAuthenticationFilter.java:177)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:187)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:105)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:57)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:169)
    at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:237)
    at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:167)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:70)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:684)
    at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:471)
    at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:402)
    at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:329)
    at com.ocpsoft.pretty.PrettyFilter.doFilter(PrettyFilter.java:110)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:368)
    at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:109)
    at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:83)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:97)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:100)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:78)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    at org.springframework.security.web.authentication.rememberme.RememberMeAuthenticationFilter.doFilter(RememberMeAuthenticationFilter.java:119)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:54)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:35)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilter(BasicAuthenticationFilter.java:177)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:187)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:105)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:79)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:169)
    at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:237)
    at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:167)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.springframework.orm.hibernate3.support.OpenSessionInViewFilter.doFilterInternal(OpenSessionInViewFilter.java:198)
    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:224)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:100)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:929)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:405)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:964)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:515)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:302)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:619) 
```

任何想法如何解决此异常，或者是否有另一种获取文件持续时间的方法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-20T14:11:07.657

> ..任何想法如何解决这个异常，..

由于[WAV 是一种容器格式](http://en.wikipedia.org/wiki/WAV#WAV_file_compression_codecs_compared)，它可能在内部包含任意数量的编码。

> ..`wav`文件可以使用各种编解码器进行编码以减小文件大小（例如 GSM 或 MP3 编解码器）。

请参阅[Java 声音信息。有关详细信息的页面](https://stackoverflow.com/tags/javasound/info)没有如何添加对额外编码（使用 SPI）的支持，以及 MP3 SPI 的领先优势。

> ..或者如果有另一种方法来获取文件持续时间？

并不真地。对于压缩格式，比特率是可变的，并且无法确定轨道需要多长时间才能将其转换为 PCM 或类似格式，其中比特率是恒定的并且轨道时间完全解决。

# android - Android 主页按钮禁用返回

> ID：11104119
> 
> 赞同：1
> 
> 时间：2012-06-19T15:18:21.440
> 
> 标签：android

如果用户点击主页按钮并在此之后打开应用程序，如何不允许返回？例如，不允许用户返回他们在点击主页按钮之前看到的屏幕。它应该被视为一个新的会话

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T15:26:59.033

这听起来是个坏主意，因为它公然违反了 Android 任务/导航指南。

用户希望在恢复任务后能够返回到上一个屏幕......并且阻止它可能会激怒很多用户。

拜托，拜托，在您冒着破坏用户体验的风险之前，**请阅读这些文件。**

*   [应用结构](http://developer.android.com/design/patterns/app-structure.html)
*   [导航](http://developer.android.com/design/patterns/navigation.html)
*   [任务和回栈](http://developer.android.com/guide/topics/fundamentals/tasks-and-back-stack.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T15:29:11.717

主页按钮也不能被覆盖，如果您不希望用户返回单击主页按钮时离开的活动，那么在活动暂停时只需将后台堆栈弹出到您想要的位置。

[看到这个答案](https://stackoverflow.com/questions/5794506/android-clear-the-back-stack)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T16:00:41.283

如果您想在活动不再可见时结束活动，请在对 onStop() 的活动调用中完成活动。

```
@Override
    protected void onStop() {
        super.onStop();

    this.finish();
} 
```

这将完成您的活动，而不会调用 onRestart()。请谨慎使用此方法，因为用户希望恢复应用程序而不是重新开始，但在某些情况下这将是可接受的协议。查看更多关于[Navigation](http://developer.android.com/design/patterns/navigation.html)和[Activity LifeCycle](http://developer.android.com/reference/android/app/Activity.html#ActivityLifecycle)的信息。

**编辑：** 另请参阅问题[Android-Quittings an application - 这是不受欢迎的吗？](https://stackoverflow.com/questions/2033914/quitting-an-application-is-that-frowned-upon/2034238#2034238)具体[这个答案](https://stackoverflow.com/a/2034238/1167780)。

# vbscript - 将类数组传递给 QTP/VBScript 中的动作参数

> ID：11104120
> 
> 赞同：3
> 
> 时间：2012-06-19T15:18:23.340
> 
> 标签：vbscript, action, qtp

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-20T04:36:30.123

据我所知，QTP**不允许**这样做。没有可用于表示数组的参数类型。这可能是 QuickTest Professional 的限制。

您可以将 Array 元素作为用分隔符分隔的字符串传递，而不是传递数组。

示例：“Item1^Item2^............” 其中“^”是分隔符，然后您可以使用 vb 脚本的 split 函数来获取您的数组。

再次对对象做同样的事情，我们必须为此尝试

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T17:43:01.290

```
Lib soluction
''######################################LIB"
'lib Passsagem de valores entre array
Dim arrayyy()
Sub setArrayyy(strvalores,redimencionaArray)
  On error resume next 
  tamanho=UBound(arrayyy,1)
  If Err.Number=9 then 
   ReDim arrayyy(0)
   redimencionaArray=false
  end if
   err.Clear   
 On error goto 0
 If redimencionaArray Then 
  tamanho=tamanho+1
  ReDim  preserve arrayyy(tamanho)
 end if
 arrayyy(tamanho)=strvalores
 'arrayyy=arrayyy
End Sub

function getArrayyy()   getArrayyy=arrayyy End function

''######################################"'Action X

call setArrayyy("X",false)
call setArrayyy("A",true)
call setArrayyy("D",true)
call setArrayyy("B",true)
''######################################'Action y

x=getArrayyy()

for countx=0 to ubound(x)
msgbox x(countx)
next 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T10:15:54.333

在您的操作中使用 lib 文件...在 lib 中创建公共数组，但最终用于任何情况下的测试或交互 vararray=null rodrigonw。建议...使用函数将您的库包含在您的操作中（库路径）

# svn - Tortoise SVN 客户端并从 .svn 文件夹获取 repo-browser url

> ID：11104123
> 
> 赞同：3
> 
> 时间：2012-06-19T15:18:25.797
> 
> 标签：svn, tortoisesvn, svn-client

我有这个文件结构化的 svn 目录和文件： ![在此处输入图像描述](../Images/bb60a13e7ffb7d029db67b21fc8b9a05.png)

当我尝试查看回购浏览器时：

![在此处输入图像描述](../Images/7c97f2b51e70378ca7325f86110efe97.png)

Tortoise 可以轻松找到该文件夹​​的 url： ![在此处输入图像描述](../Images/594b5285168603d76aa22427da50a029.png)

我想知道乌龟是如何获得我在 Repo Browser 中单击查看的文件夹的 url 的？

**编辑：**

```
Tortoise SVN 1.8+ 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-20T08:42:00.650

我刚刚跑了`c:\DirectoryOfMyProjectWhicHasHiddenSvnFolder>svn info` 结果：

![在此处输入图像描述](../Images/65313936cfbadd7ddc2082b9fbd92419.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-08-26T10:40:58.827

在包含所有信息的 .SVN 文件夹`ws.db`文件中，它是 Sqlite 格式的。

您可以使用任何 SQLite 工具打开它。我用过 Sqlite firefox 插件。

转到表`Repository`并阅读“ROOT”。

![在此处输入图像描述](../Images/29d78cf44cb6e994627a46e116813249.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-19T15:24:38.360

该信息存储在工作副本的`.svn`文件夹中（对于 SVN 1.6，`.svn`工作副本的每个文件夹中都有文件夹；对于 SVN 1.7，它仅位于顶层）。

# javascript - JavaScript 用错误的上下文捕获块

> ID：11104126
> 
> 赞同：3
> 
> 时间：2012-06-19T15:18:29.267
> 
> 标签：javascript, pyqt, try-catch, qtwebkit

我有以下代码：

```
try {
    ...

    try {
        // This is *never* called
        alert('TRY');
    } catch (e) {
        // But this *is* called
        alert('CATCH');
    }

} catch (e2) {
    ...
} 
```

问题是，来自内部`catch`块的警报被执行，而*不是*来自内部块的警报`try`。

这是否完全符合规范，或者有人知道这里发生了什么吗？
例如，异步代码的异常可以运行到另一个 catch 块的上下文中吗？

请注意，这是我放在那里的真实代码，内部`try`/没有遗漏`catch`！一些异步代码可能会在进入块之前运行。

这是取自在 PyQt 4.9.0 和 Qt 4.8.0 中运行在 WebKit / QtWebKit 中的 Web 应用程序的代码。

* * *

好的，所以在内部 try/catch （第一个省略号所在的位置）之前还有一些代码：

```
DoSomething(function () {
    var updatePromises = [];
    var p;

    for (...) {
        p = new Promise();
        updatePromises.push(p);

        // Run asynchronous code to fulfill promise.
        // Calls are chained using an array and a "setTimeout()" mechanism.
        tasks.chain(function (promise) { ... }, this, p);
    }

    (function () {
         ...
    }).future().apply(this, updatePromises);
}.bind(this)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T15:50:34.237

[ES5 规范](http://es5.github.com/#x12.14)说明了以下内容（添加了重点）：

> try 语句包含一个代码块，其中可能发生异常情况，例如运行时错误或 throw 语句。catch 子句提供异常处理代码。
> 
> ...
> 
> 产生*式 TryStatement* : `try` *Block Catch*评估如下：
> 
> 1.  **令*B*为评估*Block***的结果。
> 2.  如果*B* .type 没有抛出，则返回*B*。
> 3.  返回使用参数*B*评估*Catch*的结果。

 *我对此的理解是，根据规范，如果不先评估 try 块，就无法执行 catch 块。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T15:38:48.137

根据[Mozilla 参考资料](https://developer.mozilla.org/en/JavaScript/Reference/Statements/try...catch)，我*认为*答案是否定的。我建议您每次进入和退出一个块时都记录一下，看看是否有任何您错过的奇怪事情发生。也许也用。`debugger;`

或者试试这个：

```
var foo = false;
try {
    try {
        foo = true;
        throw true;
    } catch (e) {
        if(foo) {
            alert('CATCH');
        } else {
            alert('HUH?');
        }
    }
} catch (e2) {
    alert('CATCH2');
} 
```*

# java - 在捕获异常时继续 Java 代码

> ID：11104129
> 
> 赞同：2
> 
> 时间：2012-06-19T15:18:41.007
> 
> 标签：java

我正在编写一个用于解析`XML`文件并检测其`UTF-8`是否兼容的 java 程序。我已经让那部分工作了，但是当它捕获到第一个异常（语法错误）时，它会停止执行。我希望它找到所有错误，而不仅仅是第一个错误。有什么办法可以记录错误而不是在第一个错误时停止它？这是我的代码。

```
 import java.io.IOException;
 import javax.xml.parsers.DocumentBuilder;
 import javax.xml.parsers.DocumentBuilderFactory;
 import javax.xml.parsers.ParserConfigurationException;
 import org.xml.sax.InputSource;
 import org.xml.sax.SAXException;

  //import com.edankert.SimpleErrorHandler;
 public abstract class Wellformed extends DocumentBuilder {

   public static void main(String[] args) {
         try {
            DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();
             factory.setValidating(false);
             factory.setNamespaceAware(true);

               DocumentBuilder builder = factory.newDocumentBuilder();
               builder.setErrorHandler(new SimpleErrorHandler());

               builder.parse(new InputSource("contacts.xml"));
            } catch (ParserConfigurationException e) {
               e.printStackTrace();
            } catch (SAXException e) {
               e.printStackTrace();
             } catch (IOException e) {
                 e.printStackTrace();
          }

        }
      }

    import org.xml.sax.ErrorHandler;
    import org.xml.sax.SAXParseException;

      public class SimpleErrorHandler implements ErrorHandler {

       public void warning(SAXParseException e) {
      }

          public void error(SAXParseException e) {
           System.out.println(e.getMessage());
         }

          public void fatalError(SAXParseException e) {
           System.out.println(e.getMessage());
         }
     } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T15:28:42.277

您可以编写自己的不会抛出的[ErrorHandler](http://docs.oracle.com/javase/7/docs/api/org/xml/sax/ErrorHandler.html)`builder`并将其附加到（而不是`SimpleErrorHandler`）

# javascript - 图像上的 3D 效果

> ID：11104133
> 
> 赞同：1
> 
> 时间：2012-06-19T15:18:57.333
> 
> 标签：javascript, jquery, html, jquery-plugins, css

这就是我想通过一些网络技术实现的目标：

[例如 http://img171.imageshack.us/img171/2585/decacb00845442de800a5c5.png](http://img171.imageshack.us/img171/2585/decacb00845442de800a5c5.png)

我需要为 2d 图像添加 3d 效果，以显示图像的“深度”，就像它是真实的 3d 对象一样。但我不知道用什么来制作这样的东西（jquery插件，其他一些js库......）？有人可以给我一些基本的指示吗？我在poster.com和simialr网站上看到这是可能的，但不知道该怎么做。

Ofc，我不想从那些网站窃取脚本 :)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T17:36:37.267

HTML：

```
<img src="http://lorempixel.com/400/200" alt /><div class="cubus"></div>​ 
```

CSS：

```
div.cubus
{
    height:200px;
    width: 17px;
    margin-top:-5px;
    box-shadow: inset -10px -8px 16px -9px #CCC;
transform:skew(0, -30deg);
-ms-transform:skew(0, -30deg); /* IE 9 */
-moz-transform:skew(0, -30deg); /* Firefox */
-webkit-transform:skew(0, -30deg); /* Safari and Chrome */
-o-transform:skew(0, -30deg); /* Opera */
    float:left;
}

img{float:left;} 
```

演示：http:
[//jsfiddle.net/ewz3E/](http://jsfiddle.net/ewz3E/)

# php - 不会重定向的php重定向

> ID：11104134
> 
> 赞同：1
> 
> 时间：2012-06-19T15:18:59.073
> 
> 标签：php, redirect, http-headers, http-redirect

由于PHP，我正在进行重定向，但它根本不重定向（但会进行其他重定向）。

这是我实现的代码：

```
<?php 
session_start();    // pour pouvoir récupérer /creer desvariables de session

try
{
    $bdd = new PDO('mysql:host=localhost;dbname=youf', 'root', 'root');
}
catch(Exception $e)
{
        die('Erreur : '.$e->getMessage());
}

$redirection="command.php";
if (!isset($_SESSION['Login'])){ header('Location: connect.php'); } // Si pas de sessionactives, redirect
    if (!isset($_SESSION['CommandId'])){
        $long = strlen($_SESSION['Login']);
        $table = $_SESSION['Login'][$long-2].$_SESSION['Login'][$long-1];
        $zone = $_SESSION['Login'][$long-4].$_SESSION['Login'][$long-3];
        $createCommand="INSERT INTO `youfood`.`command` (`Number`, `Date`, `isPaid`, `Table`, `Zone`, `Server`, `State`) VALUES (NULL, current_date, '0', '".$table."', '".$zone."', '".$_SESSION['NumberEmployee']."', '5');";
        $bdd->query($createCommand);

        $sqlCommandNumber=$bdd->query("SELECT * FROM  `command` WHERE  `Table` =".$table." AND  `Zone` =".$zone." AND  `State` =0 LIMIT 0 , 1");
        $commandNumber="";
        while ($data=$sqlCommandNumber->fetch()){
            $commandNumber = $data['Number'];
        }
        $_SESSION['CommandId'] = $commandNumber ;
        header('Location: actionValidateCommand.php');
        $redirection="actionValidatedCommand.php";
    } else {
        foreach ( $_SESSION['cart'] as $key => $value ) {
            if($value != 0){
                $sql = "INSERT INTO  `youfood`.`commanddishe` (`Number` ,`command` ,`Dishe` ,`Quantity`)VALUES (NULL, '".$_SESSION['CommandId']."', '".$key."', '".$value."')";
                $bdd->query($sql);
                $messagee = $messagee."<br />".$sql."<br />";
                $_SESSION['cart'][$key] = 0 ;
            }
        }
    header('Location: command.php');
    $redirection="command.php";
}
?>
<!DOCTYPE html> 
<html> 
```

当我检查未重定向页面的 html 结果时，我看到标签前有一个空格。我不知道空间在哪里，我知道这是错误的！

感谢帮助我:-)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T15:24:39.590

在标题启动之前，您正在输出内容。

IE：`$messagee = $messagee."<br />".$sql."<br />";`

为了使重定向正常工作，您应该避免在标题行之前输出任何内容。

也试试这个：`error_reporting(E_ALL);`在文件的开头。查看它是否返回错误或警告。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T15:23:50.473

您看到的空格可能是 UTF**字节顺序标记**(BOM)。使用 Notepad++ 之类的程序甚至十六进制编辑器来删除它。这是一个参考：[http ://www.sunfinedata.com/tips/remove-bom-from-utf-8-files/](http://www.sunfinedata.com/tips/remove-bom-from-utf-8-files/)

如果有 BOM，PHP 会告诉 Apache 发送响应标头，之后就不能设置额外的标头。

如果您在 php.ini 中启用 display_errors，您将看到如下内容：

**警告：**无法修改标头信息 - 标头已由第**1**行/blah/blah.php 中的（输出开始于**/blah/blah.php:1 ）发送**

 **`session_start()`也会产生错误。

参考：[http ://en.wikipedia.org/wiki/Byte_order_mark](http://en.wikipedia.org/wiki/Byte_order_mark)

PS我不知道为什么有些人会否决可能正确的答案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T15:37:10.280

在发送标头之前始终删除输出：

```
// at the beginning of your script
ob_start();

// clean output before sending headers
ob_clean();
header( /* … */ ); 
```

标头未执行的原因可能在于第一个`if`-construct。您是否检查过该条件在任何时候都/可以为真？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-19T15:37:23.630

有时我会在开始标记之前找到一个空格`<?php`，无论是在相关的 php 文件中还是在包含的文件中，但这里似乎并非如此。或关闭后`?>`**

# c# - ORA-01008: 并非所有变量都绑定（在 ASP.net Gridview 上删除事件）

> ID：11104135
> 
> 赞同：0
> 
> 时间：2012-06-19T15:19:02.340
> 
> 标签：c#, asp.net, oracle, command, sql-delete

我目前在从 GridView 中删除一行时遇到了一个非常奇怪的问题。我有以下代码，它会引发以下异常：

ORA-01008: 并非所有变量都绑定

```
 <asp:TemplateField HeaderText="Delete">
                <ItemTemplate>
                    <asp:LinkButton ID="DeleteBTN" runat="server" OnClientClick="return confirm('Are you sure you want to delete this move request?')" CommandName="Delete" Text="Delete"></asp:LinkButton>
                </ItemTemplate>
            </asp:TemplateField>

   <asp:BoundField DataField="UNIQUEKEY" HeaderText="Unique Key"
                SortExpression="UNIQUEKEY" />

 <asp:SqlDataSource ID="GridViewDataSource" runat="server" 
        ConnectionString="<%$ ConnectionStrings:Oracle1ConnectionString %>" 
        ProviderName="<%$ ConnectionStrings:Oracle1ConnectionString.ProviderName %>" 

        SelectCommand="SELECT ORIGINATOR, TO_CHAR(REQUESTDATE, 'MM/DD/YYYY') as REQUESTDATE, PARTNUMBER, REQUESTQTY, MOVEFROM, MOVETO, COMPLETEDBY, TO_CHAR(COMPLETION_DATE, 'MM/DD/YYYY') as COMPLETION_DATE, COMMENTS, RESPONSETIME, PROCESS_FLAG, UNIQUEKEY FROM MATERIALMOVEREQUEST WHERE RTRIM(PROCESS_FLAG) = :ProcessFlag ORDER BY REQUESTDATE DESC"
        DeleteCommand="DELETE FROM MATERIALMOVEREQUEST WHERE UNIQUEKEY = :UNIQUEKEY">
        <SelectParameters>
            <asp:ControlParameter ControlID="RequestTypeLabel" DefaultValue="" Name="ProcessFlag" PropertyName="Text" Type="String" />
        </SelectParameters>
        <DeleteParameters>
            <asp:Parameter Name="UNIQUEKEY" Type="Decimal" />
        </DeleteParameters> 
```

UNIQUEKEY 是我的 Oracle 表中的一个“数字”字段，我尝试了所有类型的数据类型，目前它是一个“十进制”类型。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T13:05:54.583

使用 SqlDataSource 的删除事件并尝试编写以下代码：

```
e.InputParameters["UNIQUEKEY"] = value; 
```

value 是您要发送到数据库的内容

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T19:45:54.680

自己修复了它，必须将主键添加到 GridView 参数（DATAKEYNAMES）。这是我的代码片段：

```
 <asp:GridView ID="MMRGrid" runat="server" AutoGenerateColumns="False" DataKeyNames="UNIQUEKEY" 
        DataSourceID="GridViewDataSource" Width="980px" OnRowDataBound="GridViewRowEventHandler" 
        EmptyDataText="No Data Found" AllowSorting="True">
        <Columns>
            <asp:TemplateField HeaderText="Delete" Visible = "true">
                <ItemTemplate>
                    <asp:LinkButton ID="DeleteBTN" runat="server" OnClientClick="return confirm('Are you sure you want to delete this move request?')" CommandName="Delete" Text="Delete"></asp:LinkButton>
                </ItemTemplate>
            </asp:TemplateField> 
```

# qt - Qt - 如何为多部分下载器保存下载的数据

> ID：11104140
> 
> 赞同：2
> 
> 时间：2012-06-19T15:19:22.200
> 
> 标签：qt, multipart, download-manager, qfile

我正在 Qt 中编写一个多部分下载器。多个`QNetWorkRequest`带有 http 标头“范围”的文件用于下载文件。现在我将每个部分（`QNetworkReply`）中收到的数据写入 file.part1、file.part2 等。

是否可以同时将数据写入同一个文件？我是否必须为它实施锁定？在我的应用程序中保存数据的最佳方式是什么？

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T00:43:21.133

为什么不在完成后合并文件部分？您可以轻松地将这些部分写入`QFile`。也许有关方法或数据的某些东西使您无法这样做，但是如果可以的话，这可能是我在处理将 a`QFile`视为共享资源之前会采用的方法。

如果您希望多个并发回复能够写入和访问`QFile`，那么是的，`QFile`成为共享资源。据我所知，您将需要锁定它。那时，您有多种选择。您可以让插槽处理尝试获取的回复，如果您希望锁定互斥锁，则`QSemaphore`可以使用。如果您想走这条路，您可以将其视为多生产者（各种 QNetworkReplys）单一消费者（无论写入文件的内容）问题（[这是提供一些有用链接的 Stack Overflow 帖子）。](https://stackoverflow.com/questions/5193951/semaphore-on-multiple-producer-single-consumer-problem)简而言之，这里有很多方法，如果你能走那条路，我认为所有这些方法都比简单地在最后合并 's 更麻烦。`QMutex``QMutexLocker``file.part`

在合并到单个`QFile`并发方面，可能有一种更简单的 Qt 方法，但我从未找到它。如果存在这样的方法，也许其他人可以插话。

我不确定您所说的“在我的应用程序中保存数据的最佳方式是什么？” 您是指以持久方式保存应用程序特定设置吗？如果是这样，请查看[`QSettings`](http://qt-project.org/doc/qt-4.8/qsettings.html). 如果您指的是保存正在下载的数据，我可能会将其写入 a `QFile`，就像您正在做的那样。尽管如果不了解您正在下载的内容就很难确定。

# r - 将函数应用于多个 data.frames 中的行

> ID：11104141
> 
> 赞同：1
> 
> 时间：2012-06-19T15:19:26.177
> 
> 标签：r, lapply

不知道怎么问这个，但我会试一试：

我有 20 个从 MS Access 导入的数据帧（例如 2006_1、2006_2、2007_1、2007_2...）。

每个 data.frame 有 10 列和大约 300 万行。

每个 data.frame 中的第一列名为`secuityName`，它是一个股票代码列表，后面跟着一些标签。

我想`SecurityName`在 20 个 data.frames 中的每一个中对列中的每一行进行大写。

结构如下：

```
2006_1

> **SecurityName**   **...**
> AAPL abcdef        **...**
> MSFT abcdef        **...**

2006_2

> **SecurityName**   **...**
> AAPL abcdef        **...**
> MSFT abcdef        **...** 
```

我希望每个人看起来像这样：

```
2006_1

> **SecurityName**   **...**
> AAPL ABCDEF        **...**
> MSFT ABCDEF        **...** 
```

我有一个名为 *Raw_data_vector* 的向量，其中包含所有 data.frame 名称

原始数据向量

```
> 2006_1
> 2006_2
> 2007_1
> 2007_2
> ... 
```

我尝试使用*lapply*但无法正常工作：

```
lapply(1:length(Raw_data_vector), function(x) toupper(get(x)[,1]),Raw_data_vector) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T15:32:52.210

这应该让你开始。我使用`data.frames`了以他们的名字开头的字符，所以我不会做任何有趣的事情。

```
oh6_1 <- data.frame(SecurityName=letters[1:20], v=1:20)
oh6_2 <- oh6_1

out <- lapply(ls(pattern = 'oh[0-9]_*'), 
              function(x) {
                df <- get(x)
                df[, 1] <- toupper(df[, 1])  
                return(df)
              }) 
```

根据评论：

根据 data.frames 的名称，您需要将`pattern`参数更改为`ls`. 此外，R 并不会（在大多数情况下）原地改变事物，而是创建一个新事物。

您将其视为控制台的输出，因为它没有分配给任何东西！而是使用类似`out <- llply(ls(...)...)`. 然后检查 `out`。它将是您提供的附加列的数据框列表。您可以使用 . 检查`R`对象`?str`。

最后，这个对象列表概念是处理许多相似（或相同）事物时的常见结果。从这里很容易继续执行您想要的任何过程，接受而不是调用`function(data.frame)`类似 for 循环的东西，您可以调用`lapply(list of data frames, function)`

... 可以肯定的是，像泥一样清澈。

如果一定要对已有的data.frame做小写操作，可以使用always很吓人的`assign`函数：

```
myfun <- function(X) {
  df <- get(x)
  df[, 1] <- toupper(df[, 1])
  assign(x, df, .GlobalEnv)
  return(NULL)
}

lapply(ls(), myfun) 
```

现在看看你的data.frames。

```
> oh6_1
   SecurityName  v
1             A  1
2             B  2
3             C  3
4             D  4
5             E  5
6             F  6
7             G  7
8             H  8
9             I  9
10            J 10
11            K 11
12            L 12
13            M 13
14            N 14
15            O 15
16            P 16
17            Q 17
18            R 18
19            S 19
20            T 20
> 
```

# php - CodeIgniter - 无法设置路由

> ID：11104145
> 
> 赞同：1
> 
> 时间：2012-06-19T15:19:32.223
> 
> 标签：php, codeigniter, routing, controller

我的 CI 有问题。我有一个模型：

```
public function Game($id) {
    $id = (int)$id;

    $q = $this -> db -> get_where('games', array('id' => $id));
    return $q -> row_array();
} 
```

它的控制器：

```
public function index($gameID) {
    $data['game'] = $this->games_model->Game($gameID);
    $this -> load -> view('games/game', $data);
} 
```

还有一个问题；）我将路由设置如下：

```
$route['games/(:num)'] = 'games/game/$1';
$route['games'] = 'games/game/game'; 
```

但它根本不起作用。我的控制器目录是`games/game.php`（里面有函数`Game`）。我的问题是 - 我怎样才能通过`$id`它？我对 CI 很陌生，但我在文档中找不到解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T15:25:38.033

您可以使用[重新映射](http://codeigniter.com/user_guide/general/controllers.html#remapping)，否则您将不得不再次修改您的路线路径。看看[这个](https://stackoverflow.com/questions/5545507/how-to-pass-paramaters-in-index-function-in-codeigniter)问题，这里已经问过了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T17:14:54.090

```
$route['games'] = 'games/game/index'; // Folder/Controller/Function
$route['games/(:num)'] = 'games/game/index/$1'; // Folder/Controller/Function/Method
$route['games/(:num)/(:any)'] = 'games/game/index/$1/$2'; 
```

如果你想使用 slug，[url_title($title, 'underscore', TRUE)](http://codeigniter.com/user_guide/helpers/url_helper.html)它可以帮助你

# sql - 连接三个表的 SQL 报告

> ID：11104146
> 
> 赞同：0
> 
> 时间：2012-06-19T15:19:33.060
> 
> 标签：sql, postgresql

首先，我的 SQL 知识有点生疏。我正在尝试生成每个患者在一段时间内经历的评论报告。审查是作为医生轮次的一部分进行的。以下是具有相关列的相应表格：

```
Patients: (id, name)

Rounds: (id, patient_id, date)

Reviews: (id, round_id, review) 
```

报告应如下所示：

```
Patient     |     Reviews
_________________________

Patient 1   |   2
_________________________ 
Patient 2   |   1
_________________________ 
Patient 3   |   0
_________________________ 
```

我尝试了以下 SQL 语句：

```
SELECT 
    p.name as patient, 
    COUNT(r.round_id) as reviews
FROM 
    patients as p
    JOIN rounds as ro ON p.id = ro.patient_id
    JOIN reviews as r ON ro.id = r.round_id
WHERE 
    r.review_date between '2012-02-01' AND '2012-02-29'
GROUP BY 
    p.name 
```

但是，上面的查询只返回评论数大于 1 的行。即使计数为 0，我也希望它返回。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T15:38:03.990

加入表并在其中一个表中包含不匹配的实例的最简单方法是使用 LEFT OUTER JOIN。这将匹配左侧的所有记录，无论是否在 JOIN 的右侧找到匹配项。

由于您的 r.review_date 在您的 WHERE 子句中，因此除非在这些日期之间进行审核，否则不会发生匹配。因此，要包含没有审查的实例，您必须在 WHERE 子句中添加“OR r.review_date IS NULL”，如下所示。您可能还需要考虑对 round.date 字段进行过滤，以便您只查看在该时间范围内执行了有效回合的实例。IE。“'2012-02-01' 和 '2012-02-29' 之间的日期在哪里”

例如。

```
SELECT
    p.name as patient, 
COUNT(r.round_id) as reviews
FROM 
    patients as p
    JOIN rounds as ro ON p.id = ro.patient_id
    LEFT OUTER JOIN reviews as r ON ro.id = r.round_id
WHERE 
    r.review_date between '2012-02-01' AND '2012-02-29' OR r.review_date IS NULL
GROUP BY 
    p.name 
```

注意：如果您想报告没有任何轮次的记录，您还必须将第一个 JOIN 也设为 LEFT OUTER JOIN。

```
FROM 
    patients as p
    LEFT OUTER JOIN rounds as ro ON p.id = ro.patient_id
    LEFT OUTER JOIN reviews as r ON ro.id = r.round_id 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T15:37:07.560

```
SELECT  p.name AS patient
      , COUNT(r.ID) AS reviews
FROM    patients AS p
        LEFT JOIN rounds AS ro ON p.id = ro.patient_id
        LEFT JOIN reviews AS r ON ro.id = r.round_id
                                  AND r.review_date BETWEEN '2012-02-01'
                                                    AND     '2012-02-29'
GROUP BY p.name 
```

将为您提供所有患者的名单，包括在您的特定日期之间没有进行过检查或复查的患者。没有查房或复查的患者得分为 0。

# java - ImageIcon 不为动画渲染

> ID：11104149
> 
> 赞同：3
> 
> 时间：2012-06-19T15:19:37.083
> 
> 标签：java, image, swing, animation, imageicon

我试图查看与我类似的问题的其他主题，并且大多数这些解决方案似乎都指向修复图像的类路径......所以，我通过将类路径更改为绝对并使用类获取资源来尝试这些解决方案，但它仍然不会渲染图像。我怀疑它与主要方法有关。我不完全理解该方法是如何工作的，因为我在网上某处复制了源代码。我正在使用 Eclipse 编辑器，并且我已经将图像文件放在了 Flap 类文件旁边。

```
package wing;

import java.awt.*;
import javax.swing.*;

public class Flap extends JComponent implements Runnable {
Image[] images = new Image[2];
int frame = 0;

public void paint(Graphics g) {
    Image image = images[frame];
    if (image != null) {
        // Draw the current image
        int x = 0;
        int y = 0;
        g.drawImage(image, x, y, this);
    }
}

public void run() {
    // Load the array of images
    images[0] = new ImageIcon(this.getClass().getResource("/Wing/src/wing/wing1.png"));
    images[1] = new ImageIcon(this.getClass().getResource("/Wing/src/wing/wing2.png"));

    // Display each image for 1 second
    int delay = 10000;    // 1 second

    try {
        while (true) {
            // Move to the next image
            frame = (frame+1)%images.length;

            // Causes the paint() method to be called
            repaint();

            // Wait
            Thread.sleep(delay);
        }
    } catch (Exception e) {
    }
}

public static void main(String[] args) {
    Flap app = new Flap();

    // Display the animation in a frame
    JFrame frame = new JFrame();
    frame.getContentPane().add(app);
    frame.setSize(800, 700);
    frame.setVisible(true);

    (new Thread(app)).start();
}

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T15:32:21.527

*   如果没有其他`JComponent(s)`添加到`public class Flap extends JComponent implements Runnable {`

    1.  将图像作为[图标放入](http://docs.oracle.com/javase/tutorial/uiswing/components/icon.html)[JLabel](http://docs.oracle.com/javase/tutorial/uiswing/components/label.html)

    2.  使用[Swing Timer](http://docs.oracle.com/javase/tutorial/uiswing/misc/timer.html)代替`Runnable#Thread`（也需要有关 Java 和线程的基本知识）

*   如果有/还有另一个`JComponent(s)`添加到`public class Flap extends JComponent implements Runnable {`

    1.  不要`paint()`用于`paintComponent()`Swing`JComponents`

    2.  使用[Swing Timer](http://docs.oracle.com/javase/tutorial/uiswing/misc/timer.html)代替`Runnable#Thread`（也需要有关 Java 和线程的基本知识）

*   在这两种情况下都将图像加载为局部变量，不要永远重新加载图像

*   [在这两种情况下，您都从InitialThread](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/initial.html)调用 Swing GUI

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T15:33:59.780

资源名称`"/Wing/src/wing/wing1.png"`看起来很可疑：这意味着在“/Wing/src/wing/”目录中找到一个资源，该目录很可能不是资源实际所在的位置。尝试`"/wing/wing1.png"`（其他类似）

原因是该`src`文件夹包含将转换为类的源。所以“src/wing/Flap.java”会有类路径“/wing/Flap.class”；对于资源也是如此（取决于您如何打包它们）。

此外，确保资源确实在您期望的位置（例如，在输出目录中的 Flap.class 文件旁边），否则类加载器将找不到它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-19T15:55:45.973

ImageIcon 不是 Image ：

```
images[0] = new ImageIcon(this.getClass().getResource("/Wing/src/wing/wing1.png")).getImage(); 
```

应用程序永远不会结束，在 main ：

```
frame.addWindowListener(new WindowAdapter() {
    @Override
    public void windowClosing(WindowEvent e) {
        System.exit(0);
    }
}); 
```

# android - ListView OnItemClickListener 异常

> ID：11104152
> 
> 赞同：0
> 
> 时间：2012-06-19T15:19:40.350
> 
> 标签：android, android-listview

我有`ListView`一个`onItemonClick`听众：

```
 @Override
public void onItemClick(AdapterView<?> arg0, View arg1, int arg2, long arg3) {      

    TextView rowName = (TextView)arg1.findViewById(R.id.list_friends_friends_tab_name);
    ImageView rowProfilePicture = (ImageView) arg1.findViewById(R.id.list_profile_picture);
    CharSequence userName = rowName.getText();
    Drawable userProfilePicture = rowProfilePicture.getDrawable();

    AlertDialog.Builder menuBuilder = new AlertDialog.Builder(this);        
    View menuView = getLayoutInflater().inflate(R.layout.menu_friend, (ViewGroup) getCurrentFocus());
    menuBuilder.setView(menuView);
    menuBuilder.setCancelable(true);                
    TextView name = (TextView) menuView.findViewById(R.id.menu_user_name);
    ImageView profilePicture = (ImageView) menuView.findViewById(R.id.menu_profile_picture);            
    name.setText(userName);
    profilePicture.setImageDrawable(userProfilePicture);        
    AlertDialog menu = menuBuilder.create();
    menu.setCanceledOnTouchOutside(true);
    menu.show();        
} 
```

当用户单击一个项目时，它应该向他显示一个`AlertDialog`具有自定义布局的（菜单），从单击项目的视图中获取一些详细信息并在菜单布局中更改它。我得到一个：

```
java.lang.UnsupportedOperationException: addView(View, LayoutParams) is not supported in AdapterView 
```

关于如何解决这个问题的任何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T15:27:11.730

我认为这是因为这条线：

```
View menuView = getLayoutInflater().inflate(R.layout.menu_friend, (ViewGroup) getCurrentFocus()); 
```

因为您将充气视图设置为对话框的布局，所以在充气时无需添加它。尝试扩充布局文件并且不要传递任何父级`ViewGroup`：

```
View menuView = getLayoutInflater().inflate(R.layout.menu_friend, null); 
```

# android - GoogleMaps - Actual Map not showing

> ID：11104155
> 
> 赞同：0
> 
> 时间：2012-06-19T15:19:49.547
> 
> 标签：android, android-emulator, android-maps

I was following this tutorial: [http://www.vogella.com/articles/AndroidLocationAPI/article.html](http://www.vogella.com/articles/AndroidLocationAPI/article.html) --> Paragraph 6.0

Problem: My emulator runs perfectly fine and everything works good (it zooms and everything), however, the actual map is nothing but a grid. It states that I should be able to send coordinates via the emulator, but how?

Possible Solutions? - Is my API key not correct? Am I not sending the correct coordinates? (I click random numbers and letters)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T15:20:50.657

You are using de debug.keystore, yo need to use other keystore, with other api key to run maps in a terminal.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T15:25:28.310

You're correct. Normally that is a problem with your API key.

[https://developers.google.com/android/maps-api-signup](https://developers.google.com/android/maps-api-signup)

It is getting the coordinates but if it is not generating the map it is a definite api key problem. You did request a key from google right using your java sdk keytool?

# git - git使用本地协议

> ID：11104164
> 
> 赞同：2
> 
> 时间：2012-06-19T15:20:05.583
> 
> 标签：git, windows-server

如果我想在一个已经存在的文件服务器上使用 Git，只使用文件共享并绕过对 ssh 的需要，我是否只需要在所有将要推送和拉取的计算机上将网络共享设置为远程？

从我所做的浏览来看，这似乎是正确的。我的一些困惑来自于在 unix 系统中看到这一切的例子。我在想也许 msysgit bash 窗口可能有助于为您翻译所有内容？如果这是真的，那么我可以通过执行来添加一个遥控器：`git remote add myrepo //server/share`？

提前致谢。

# android - Android：解析大型 JSON 文件

> ID：11104171
> 
> 赞同：0
> 
> 时间：2012-06-19T15:20:26.680
> 
> 标签：android, json, parsing, jackson

我正在创建一个 android 应用程序，它应该将 Json 从文件或 url 解析为 jsonarray 和 jsonobjects。问题是我的 json 是 3.3 mb，当我使用简单的代码时，如下所示：（现在无法访问我的真实代码，因为我在工作，从教程中复制了一些代码；所以可能有一些错误）

（假设我已经有我的输入流内容）

```
InputStream content = entity.getContent();
                BufferedReader reader = new BufferedReader(new InputStreamReader(content));
                String line;
                while ((line = reader.readLine()) != null) {
                    builder.append(line);
String twitterfeed = builder.toString();
}

JSONArray jsonArray = new JSONArray(twittefeed);
            Log.i(ParseJSON.class.getName(),
                    "Number of entries " + jsonArray.length());
            for (int i = 0; i < jsonArray.length(); i++) {
                JSONObject jsonObject = jsonArray.getJSONObject(i);
                Log.i(ParseJSON.class.getName(), jsonObject.getString("text")); 
```

当我在我的 android 设备上运行此代码时，将字符串解析为 jsonArray 时出现 OutOfMemory 错误。我记录了一些东西，我发现我的总字符串是 17 mb（一个 3.3 mb 的 json 文件？！）当我使用一个小的 json 文件，比如 twitterfeed 左右时，代码工作正常。当我在我的记忆中得到这个 17 mb 的字符串时，我无法解析 json，因为那时我的内存不足。

经过大量研究后，我发现杰克逊可能是我的解决方案，因为我知道可以解析输入流。这应该会有所帮助，因为我不需要记忆中的 17 mb 字符串；这不是我认为最有效的方式....但我无法弄清楚这真的会起作用，而且我自己也没有让它运行。有谁知道这真的会起作用，我在哪里可以找到教程？

我找到了[“createJsonParser -- public JsonParser createJsonParser(InputStream in)”](http://fasterxml.github.com/jackson-core/javadoc/2.0.0/index.html?com/fasterxml/jackson/core/JsonFactory.html)并认为这是我要走的路……但我不知道如何在我的代码中实现它，也找不到示例。有谁知道这是如何工作的？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-19T18:08:58.020

您应该使用带有 gson 或 jackson 的 json 流。对于 Jackson，您也可以使用混合方法。这将显着减少您的内存消耗，因为只有被解析的部分 json 被加载到内存中。

[https://sites.google.com/site/gson/gson-user-guide](https://sites.google.com/site/gson/gson-user-guide) http://jackson.codehaus.org/

杰克逊示例[http://www.mkyong.com/java/jackson-streaming-api-to-read-and-write-json/](http://www.mkyong.com/java/jackson-streaming-api-to-read-and-write-json/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-05T19:42:21.430

Jackson的[混合流媒体方法](http://www.ngdata.com/parsing-a-large-json-file-efficiently-and-easily/)是一个不错的选择。这样，您可以通过原始 JSON 输入推进一个指针（随时验证它），当您检测到需要处理的输入块时，您可以将其读入树层次结构，以便您可以拉出任何你想要的数据。

# php - 如何输出精确的字符串“ 我是 php 新手，我无法弄清楚如何将确切的字符串“

> ID：11104174
> 
> 赞同：2
> 
> 时间：2012-06-19T15:20:40.733
> 
> 标签：php, html-parsing

我是 php 新手，我无法弄清楚如何将确切的字符串“ `<?php`”输出为 HTML 字符串、从文件（即`file_get_contents(blah);`）输出或`echo "<?php";`在代码段内输出。我认为它被解释为 php 代码段的开头，因为没有输出数据。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T15:22:08.657

应该可以正常工作：

```
<?php

print "<?php"; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-19T15:22:56.177

更有可能将其解释为 HTML 标记，请使用

```
header("Content-type: text/plain"); 
```

或将 替换`<`为`&lt;`。

# objective-c - 扩展单个对象功能

> ID：11104178
> 
> 赞同：0
> 
> 时间：2012-06-19T15:21:00.483
> 
> 标签：objective-c, ios

我是 Objective-C 的新手，我想知道它是否正确：我有一堂课

```
@interface BaseClass : NSObject 
```

然后我创建了该类的对象：

```
BaseClass *baseClassObject = [[BaseClass alloc] initWith...]; 
```

之后我有另一堂课：

```
@interface AdvancedClass : BaseClass 
```

取决于我在 BaseClass 中获得的数据（对象初始化器，稍后的方法）我可能想要扩展对象的功能。所以我想 baseClassObject 成为 AdvancedClass 类的对象。

1）这是正确的吗？2）这有可能像那样“提升”对象吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T15:33:55.207

这是可能的并且是正确的——这就是所谓的多态性，它是面向对象编程的主要原则之一。您只需根据需要的功能类型在方法中创建基类或子类的实例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T19:01:08.650

不，如果你有一个实例，`BaseClass`你不能把它当作一个实例，你`AdvanceClass`也不能神奇地将它“提升”为`AdvancedClass`. 但是，您*可以*`AdvanceClass`做的是使用实例`BaseClass`作为初始化程序创建一个新的。

例如：

```
BaseClass* baseInstance = [[BaseClass alloc] init];
...
AdvancedClass* advancedInstance = [[AdvancedClass alloc] initWithBaseClass:baseInstance]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T15:29:37.470

创建一个作为另一个类的子类的类是完全可以接受的。或者，您可能想要使用类别：

[http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/objectivec/chapters/occategories.html](http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/objectivec/chapters/occategories.html)

# python - 当有人找到我要找的东西时停止所有搜索线程？（Python）

> ID：11104180
> 
> 赞同：1
> 
> 时间：2012-06-19T15:21:03.340
> 
> 标签：python, multithreading

这些线程中的每一个都在不同的数据对象列表中搜索序列号。如果找到它，它会将对象放入队列中。序列号是唯一的。

```
q = Queue.Queue(10)
thread_list = []
for i in range(0, 10):
   t = Thread(serial)
   thread_list.append(t)
   t.start() 
```

而不是等待所有线程完成：

```
for t in thread_list:
    t.join() 
```

当找到它正在寻找的序列号时，有什么方法可以停止所有线程？并考虑到它可能找不到序列号并且队列将保持为空的可能性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T15:32:29.297

简单的方法是使用队列...在您的线程运行器类中（我假设串行是）

```
class FindSerial(Thread):
    def __init__(self, serial, queue):
         this.serial = serial
         this.queue  = queue
         super(FindSerial, self).__init__()

    def run(self):
        .... 
        while LOOKING_FOR_SERIAL:
            if not self.queue.empty():
                  return
        ....

 ...
 for i in range(0, 10):
     t = FindSerial(serial, q)
 ... 
```

现在通过检查队列是否通过循环，您可以检查另一个线程是否找到了您正在寻找的对象，如果找到了，那么您只需从 run 方法返回，这将允许 join() 获得线。

注意：我可能只会通过循环检查空的 N 次迭代，以避免大量的锁争用。

# haskell - Haskell中的矩阵除法

> ID：11104182
> 
> 赞同：-2
> 
> 时间：2012-06-19T15:21:06.407
> 
> 标签：haskell

怎么了？此代码应该通过查找`a`时间`b`倒数来进行矩阵除法。我试图了解它的错误是什么，但我看不到如何链接它。

```
import List
import Ratio

inverse :: [[Rational]] -> [[Rational]]
inverse mat = sweep ([], zipWith (++) mat unit) where
    unit = map (take (length mat)) $ iterate (0 :) (1 : [0,0..])
    sweep (xss, []) = xss
    sweep (xss, yss) = sweep (xss' ++ [ws], filter (any (/= 0)) yss') where
        Just (x : xs) = find ((/= 0) . head) yss
        ws = map (/ x) xs
        [xss', yss'] = map (map f) [xss, yss]
        f (y : ys) = zipWith (\d e -> e - d * y) ws ys 
```

我怎样才能将它与

```
import Data.Array

mmult :: (Ix i, Num a) => Array (i, i) a -> Array (i, i) a -> Array (i, i) a 
mmult x y 
    | x1 /= y0 || x1' /= y0'  = error "range mismatch"
    | otherwise               = array ((x0, y1), (x0', y1')) l where
        ((x0, x1), (x0', x1')) = bounds x
        ((y0, y1), (y0', y1')) = bounds y
        ir = range (x0, x0')
        jr = range (y1, y1')
        kr = range (x1, x1')
        l  = [((i, j), sum [x ! (i, k) * y ! (k, j) | k <- kr 
```

通过乘以`a`和`b`的逆来进行矩阵除法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T20:17:50.267

这里似乎有几个问题。首先，`l`in的定义`mmult`似乎不完整。您开始一个列表并开始一对，但永远不要关闭它们。也许你的意思是：

```
l = [((i, j), sum [x ! (i, k) * y ! (k, j) | k <- kr]) | i <- ir, j <- jr] 
```

正如您所说，链接这两个模块所固有的另一个问题是您在两个模块中使用不同类型的矩阵。第一个，您反转矩阵，将其视为列表列表。第二个，将两个矩阵相乘，使用数组。要将两者结合起来，您需要能够在表示之间进行转换。本质上，您需要两个操作：

```
fromListMatrix :: [[Rational]] -> Array (Int, Int) Rational
toListMatrix :: Array (Int, Int) Rational -> [[Rational]] 
```

一旦你有了这些，你就可以很容易地实现矩阵除法。

```
divideMatrix :: Array (Int, Int) Rational -> Array (Int, Int) Rational -> Array (Int, Int) Rational
divideMatrix a b = mmult a (fromListMatrix (invert (toListMatrix b))) 
```

在实现方面，让我们从 开始`toListMatrix`，因为它更容易。

```
toListMatrix mat = 
```

现在，我们需要数组的边界，所以

```
toListMatrix mat = let ((x0, x1), (x0', x1')) = bounds mat in 
```

我们将逐行构造它：

```
toListMatrix mat = let ((x0, x1), (x0', x1')) = bounds mat in
    [row | rowNum <- range (x1, x1')] 
```

每行只是具有固定行号的矩阵元素：

```
toListMatrix mat = let ((x0, x1), (x0', x1')) = bounds mat in
    [[mat ! (pos, rowNum) | pos <- range (x0, x0')] | rowNum <- range (x1, x1')] 
```

继续`fromlistMatrix`：

```
fromListMatrix mat = 
```

我们希望将每个元素与一个位置相关联，然后将结果提供给`array`，因此：

```
fromListMatrix mat = array ((1, 1), (length (head mat), length mat)) indexedElems where
    indexedElems = 
```

首先，我们需要获取行号，所以：

```
fromListMatrix mat = array (length (head mat), length mat) indexedElems where
    indexedElems = someFunction (zip [1..] mat) 
```

然后我们输入位置编号：

```
fromListMatrix mat = array (length (head mat), length mat) indexedElems where
    indexedElems = someFunction (map addPositions (zip [1..] mat))
    addPositions (rowNum, elems) = zip [(pos, rowNum) | pos <- [1..]] elems 
```

现在我们有了索引元素的行列表。我们需要将其连接到一个列表中：

```
fromListMatrix mat = array (length (head mat), length mat) indexedElems where
    indexedElems = concat (map addPositions (zip [1..] mat))
    addPositions (rowNum, elems) = zip [(pos, rowNum) | pos <- [1..]] elems 
```

`map addPositions (zip [1..] mat)`最后，我们通过更改为更简单的形式来清理代码`zipWith`：

```
fromListMatrix mat = array (length (head mat), length mat) indexedElems where
    indexedElems = concat (zipWith addPositions [1..] mat)
    addPositions rowNum elems = zip [(pos, rowNum) | pos <- [1..]] elems 
```

你完成了！

# c# - 继承和共享静态字段

> ID：11104185
> 
> 赞同：8
> 
> 时间：2012-06-19T15:21:11.670
> 
> 标签：c#, generics, inheritance, static

假设我有一个提供一些默认构造函数功能的通用抽象类，因此您不必在继承的类中重复代码：

```
public abstract class Base<TKey, TValue>
{
    private static readonly IDictionary<TKey, Base<TKey, TValue>> Values = new Dictionary<TKey, Base<TKey, TValue>>();

    public TKey Key { get; private set; }
    public TValue Value { get; private set; }

    protected Base(TKey key, TValue value)
    {
        this.Key = key;
        this.Value = value;

        Values.Add(key, this);
    }
} 
```

现在的问题是，当我编写两个继承的类时：

```
public sealed class One : Base<string, string>
{
    public static readonly One Default = new One("DEF", "Default value");
    public static readonly One Invalid = new One("", "Invalid value");

    private One(string key, string value) : base(key, value) {}
}

public sealed class Two : Base<string, string>
{
    public static readonly Two EU = new Two("EU", "European Union");
    public static readonly Two USA = new Two("", "United States of America");

    private Two(string key, string value) : base(key, value) {}
} 
```

如您所见，这两个确实是类型安全的枚举。它们只提供预定义的值，不能为任何其他目的实例化。

## 问题

问题是因为这两个继承的类都使用与基类相同的泛型类型，即`Base<string, string>`. 泛型类和静态字段的工作方式是为每个泛型类型（或多个泛型类型的组合）创建一个新的静态字段。

在我的情况下，`string, string`这就是为什么只有**一个基类静态字段**并且它包含 4 个值而不是**两个静态字段**，每个字段都有 2 个值的原因。

**我如何克服这个问题**并将它们分开，同时**仍然将此功能保留在基类中**，这样我就不会重复我的代码？

将字段从静态更改为实例是行不通的，因为我最终会得到 4 个实例，每个实例只包含一个值......

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-19T15:30:11.447

这将起作用。我相信它被称为奇怪的重复模板模式，但不要引用我的话

```
public abstract class Base<TSelf, TKey, TValue>
{
    private static readonly IDictionary<TKey, Base<TSelf, TKey, TValue>> Values = 
        new Dictionary<TKey, Base<TSelf, TKey, TValue>>();

    public TKey Key { get; private set; }
    public TValue Value { get; private set; }

    protected Base(TKey key, TValue value)
    {
        this.Key = key;
        this.Value = value;

        Values.Add(key, this);
    }
}

public sealed class One : Base<One, string, string>
{
    public static readonly One Default = new One("DEF", "Default value");
    public static readonly One Invalid = new One("", "Invalid value");

    private One(string key, string value) : base(key, value) { }
}

public sealed class Two : Base<Two, string, string>
{
    public static readonly Two EU = new Two("EU", "European Union");
    public static readonly Two USA = new Two("", "United States of America");

    private Two(string key, string value) : base(key, value) { }
} 
```

'好奇'的部分是 和 的定义`One`被`Two`允许将自己用作自己的类型参数！

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-19T15:33:36.203

当然，问题的出现是因为您的两个类使用相同的泛型类型参数共享相同的基类。这意味着它们共享相同的静态成员。

> 我如何克服这个问题并将它们分开，同时仍然将此功能保留在基类中，这样我就不会重复我的代码？

一种方法是根据当前运行时类型在字典中构建您的字典：

```
private static readonly IDictionary<Type, IDictionary<TKey, Base<TKey, TValue>>> Values = new Dictionary<Type, IDictionary<TKey, Base<TKey, TValue>>()>;

protected Base(TKey key, TValue value)
{
    this.Key = key;
    this.Value = value;

    IDictionary<TKey, Base<TKey, TValue>> dict;
    if (!Values.TryGetValue(this.GetType(), out dict)
    { 
        dict = new Dictionary<TKey, Base<TKey, TValue>>();
        Values[this.GetType()] = dict;
    }

    dict.Add(key, this);
} 
```

这确实会导致所有查找成为 2 个阶段，因为您必须查找当前类型*然后*在该字典中查找值，但它根本不依赖于更改您的子类 API。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-19T15:43:55.260

[这并没有直接回答这个问题，而是提供了一种替代设计，希望能够实现相同的目标。]

在我看来，您似乎正在尝试将基类用于不是基本行为的东西，或者至少不是静态行为。

将作为查找列表*项*和提供查找列表引用的关注点分开。

如果您尝试提供已知的查找，我会将查找列表引用与查找项分开（如，不是静态成员）：

```
public static class MyLookups
{
    public static IDictionary<string, string> Acronyms = new Dictionary<string, string>();
    public static IDictionary<string, string> DefaultValues = new Dictionary<string, string>();
} 
```

然后每种类型都可以简单地指向相关的字典，或者命名它并通过反射访问它，或者提供一个 Func 给它：

```
public class One : Base<string, string>
{
    public One(string key, string value)
        : base(key, value, () => MyLookups.DefaultValues)
    {
    }
}

public class Two : Base<string, string>
{
    public Two(string key, string value)
        : base(key, value, () => MyLookups.Acronyms)
    {
    }
}

public abstract class Base<TKey, TValue>
{
    private IDictionary<TKey, TValue> _dictionaryReference;

    protected Base(TKey key, TValue value, Func<IDictionary<TKey, TValue>> getDictionary) 
    {
        _dictionaryReference = getDictionary();
        _dictionaryReference.Add(key, value);
    }
} 
```

这也将让您将列表本身与列表中的项目分开（也许通过注入）。

另请注意，如果基类实例保留对相同字典的引用，则无需将成员设为静态。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-19T15:32:59.010

让你的基地与众不同。

```
public abstract class Base<T, TKey, TValue> where T : Base<T, TKey, TValue>
{ 
    private static readonly IDictionary<TKey, T> Values = 
        new Dictionary<TKey, T>(); 

    public TKey Key { get; private set; } 
    public TValue Value { get; private set; } 

    protected Base(TKey key, TValue value) 
    { 
        this.Key = key; 
        this.Value = value; 

        Values.Add(key, (T)this); 
    } 
} 
```

更新：发布后，我注意到已经给出了或多或少相同的答案，但请注意区别：对类型 T 的约束，以及在字典定义中使用 T。这不是万无一失的，但它有帮助。

需要转换为 T 才能将对象添加到字典中。请注意，我使用的是显式转换，而不是`as`运算符。如果使用不正确，`as`运算符会在字典中插入一个空值，而强制转换会破坏它（应该如此）。

但另请参阅：http: [//blogs.msdn.com/b/ericlippert/archive/2011/02/03/curiouser-and-curiouser.aspx](http://blogs.msdn.com/b/ericlippert/archive/2011/02/03/curiouser-and-curiouser.aspx)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-19T15:34:44.860

这是设计使然。静态成员在所有实例中只有一个副本，而基类中的静态成员在其所有子类的所有实例中只有一个副本。

你为什么是静态的？您真的希望 One 的所有实例共享一个通用字典吗？

如果您希望 One 在 One 之间共享，但不与 Two 共享，那么您将需要更改您的设计。要么使其不是静态的（这将导致不共享），要么在每个子类的级别使其成为静态的。

如果您想在它们之间保持 API 相同，请在基类中创建一个抽象方法/属性并在子类中覆盖

# android-location - Android-gps 监听器

> ID：11104192
> 
> 赞同：2
> 
> 时间：2012-06-19T15:21:31.823
> 
> 标签：android-location

我使用此代码获取 gps 传感器数据。

```
mlocManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
mlocListener = new MyLocationListener();
mlocManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 2000, 1, mlocListener); 
```

为什么我的 gps 图标会不停地打开和关闭？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T13:30:36.453

2000 milliseconds is approximatley 0.0333333 seconds. In your code, you have requested for location updates every 0.0333333 seconds.

```
mlocManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 2000, 1, mlocListener); 
```

This means for that the GPS doesn't always have to be updating itself. Thats why the GPS icon continuously turns on and off.

# java - 无法确定相等时的Java等于

> ID：11104195
> 
> 赞同：12
> 
> 时间：2012-06-19T15:21:34.603
> 
> 标签：java, equals

我想知道在（a）没有足够的信息来确定 C 的两个实例是否相等或（b）调用方法的情况下，覆盖 C 类对象的`equals`(and ) 方法的正确 Java 编程范式是什么`hashCode`应该无法确定 C 的两个实例是否相等。

例如，在我的项目中，我有一`PlayingCard`堂课。在我看来，如果 a`PlayingCard`面朝上，那么调用方法应该可以访问它的属性，但如果它面朝下，那么这些属性应该保持未知：

```
class PlayingCard {
    private Rank rank;
    private Suit suit;
    private boolean isFaceDown;

    public PlayingCard(Rank rank, Suit suit, boolean isFaceDown) {
        this.rank = rank;
        this.suit = suit;
        this.isFaceDown = isFaceDown;
    }

    public Rank getRank() { return isFaceDown ? null : rank; }

    public Suit getSuit() { return isFaceDown ? null : suit; } 
```

看起来，为了 Java 集合框架，如果两张牌具有相同的点数和花色，它们应该是相等的：

```
 public boolean equals(Object obj) {       // attempt #1
        if(this == obj) return true;
        if(obj == null) return false;
        if(!(obj instanceof PlayingCard)) return false;
        PlayingCard other = (PlayingCard) obj;
        if(rank != other.rank) return false;
        if(suit != other.suit) return false;
        return true;
    }
 } 
```

但这透露了太多信息：

```
class Malicious {

    public Rank determineRankOfFaceDownCard(PlayingCard faceDownCard) {
        Set<PlayingCard> allCards = /* a set of all 52 PlayingCards face up */;
        for(PlayingCard c : allCards) {
            if(c.equals(faceDownCard)) {
                return c.getRank();
            }
        }
        return null;
    }
} 
```

使用`getRank`and getSuit` 方法似乎也不起作用：

```
 public boolean equals(Object obj) {       // attempt #1
        if(this == obj) return true;
        if(obj == null) return false;
        if(!(obj instanceof PlayingCard)) return false;
        PlayingCard other = (PlayingCard) obj;
        if(getRank() != other.getRank()) return false;
        if(getSuit() != other.getSuit()) return false;
        return true;
    }
}

/* outside the PlayingCard class */

Set<PlayingCard> s = new HashSet<PlayingCard>();
s.add(new PlayingCard(Rank.ACE, Suit.SPADES, true));
s.contains(new PlayingCard(Rank.TWO, Rank.HEARTS, true)); // returns true 
```

其他开发人员是如何处理这种情况的？在这种情况下投掷某种东西`RuntimeException`是合适的吗？感谢您的任何意见和想法。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-19T15:25:38.123

您可以在 equals 方法中添加此条件：

```
if(this.isFaceDown || other.isFaceDown) return false; 
```

我认为如果卡片面朝下，这是完全隐藏卡片的唯一方法。问题是，当您将其添加到一组时，如果您添加的卡片面朝下，您可能会有重复。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-19T15:36:07.547

我不相信多态性是最好的答案。一张牌是正面朝上还是正面朝下都不会改变这张牌，它是一张牌的*状态*。这是逻辑的位置问题。如果您的应用程序知道卡片面朝下，为什么还要费心检查是否相等，因此无需区分面朝上`equals()`和面朝下`equals().`

为了在此处详细说明其他答案中的一些建议，可能有一些方法可以识别不同的集合，其中一个是面朝下（如平局）或面朝上（如弃牌堆），但在许多情况下 OP 没有指定堆栈的想法在哪里不太有用。在标准纸牌中，您可以有以下三种组合中的任何一种：全部面朝下（假设玩家将要翻转最上面的牌），全部面朝上，或底部面朝下与一个或多个面朝上的混合卡在上面。在二十一点中，一叠（游戏中的牌）的大小始终为一，玩家通常拥有所有面朝上的牌，而庄家则拥有一张面朝下和一张或多张面朝上的牌。

专注于`.equals()`方法有点像过早的优化。后退一步，想想域。你有一个和`Card`的属性。A只是(s) 的集合，所有复杂性确实属于使用 Deck 的任何游戏。也许您会定义 a具有多个属性，首先是s 的集合，您可以在其中具有确定手牌点值的逻辑，无论它是“软”还是“破”等。比较两只手时，您不要比较单张牌，而是比较手牌的最终价值，在庄家的情况下，即使在他们有一张面朝下的牌的时候也是有效的。`Suite``Rank``Deck``Card``Blackjack``Hand``Card`

问题中的恶意场景似乎令人怀疑，因为我不得不问，谁的系统在运行游戏？如果它是一个多客户端系统，这可能是一个有效的问题，但答案是不给每个客户端每个人的卡片状态。防止这种作弊的典型架构是让中立的虚拟机/服务器负责游戏状态并评估输赢。如果游戏不是多客户端，那么即使运行游戏的 CPU 可以完全访问游戏数据，也只有一个玩家（CPU 的所有者）受到影响，并且试图防止恶意篡改的历史由来已久。失败 - 阅读过去 30 年来用于游戏的复制保护方案 - 恶意场景再次似乎太罕见/偏执，无法尝试复杂的设计解决方案。

无论如何，这就是我解决问题的方式。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-19T15:29:44.027

我不确定我是否遗漏了什么，但也许应该在类之外有一些逻辑持有你的比较器，当不可见时不会比较卡片？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-19T15:48:04.213

对象只需要彼此相等。当人们认为可以在类层次结构的不同级别查看对象时

因此`Deck`，不支持卡片面朝上或朝下的 a 可能等于另一个`Deck`支持卡片面朝上或朝下的子类，前提是它`equal`符合`Deck`的确定相等性的政策。

但是，支持卡面朝上或朝下的 a`PlayableDeck`永远不会是不支持卡位置的 a；因为如果确实如此，那么两者将是等效的（可替换），从而有效地破坏了' 知道卡片位置的能力。`equal``Deck``PlayableDeck`

只要记住在考虑子类和超类的情况下应用相等规则即可。

1.  A = A
2.  如果 A = B，则 B 必须 = A。
3.  如果 A = B 且 B = C，则 A 必须 = C。

起初，规则 2 似乎暗示 a`Deck`和 a`PlayableDeck`在任何情况下都不能相等，但事实并非如此。如果您决定将 a`PlayableDeck`视为 a `Deck`then，

```
if Deck.equals((Deck)PlayableDeck); then ((Deck)PlayableDeck).equals(Deck) 
```

仍然会很好。但是，如果没有常量转换，肯定会失败的 equals 方法是 PlayableDeck 的方法。

```
PlayableDeck.equals(PlayableDeck) // might fail, depending on state
PlayableDeck.equals(Deck) // always fails 
```

为什么它如此有效与多态性有关，它确保在尝试超类实现之前检查基类实现这一事实。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-19T15:28:54.180

这个问题似乎有几个不同的层次......

但我觉得你正在沸腾的是，卡可能需要两个类别，具体取决于它们是面朝上还是面朝下。

在设计 OO 类时，从逻辑上思考是有益的，即我们是否以不同方式对待一张牌是正面朝上还是正面朝下。

我认为一个设计良好的类系统中的约定是这样的：两张面朝下的牌不应该有一个 equals 方法，因为你可以从其他游戏逻辑中决定是否应该比较它们。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-19T16:04:52.003

我会使用不同的相等方法，也许叫它`matches`，来实现“未知属性”的游戏逻辑，但`equals`以正常的方式实现该方法，以便让集合等其他类仍然正常运行。通过这种方式，您可以拥有一组 PlayingCard 对象，并且可以保证您没有两张黑桃 A，例如，无论*玩家*是否知道这些牌的价值。

因此，例如：

```
abstract class PlayingCard {
    protected Rank rank;
    protected Suit suit;

    public PlayingCard(Rank rank, Suit suit) {
        this.rank = rank;
        this.suit = suit;
    }

    public abstract Rank getRank();
    public abstract Suit getSuit();
    public abstract boolean isComparableWith(PlayingCard other);
    public abstract boolean matches(PlayingCard other);

    @Override public boolean equals(Object obj) {
        boolean isEqual = false;
        if (obj == null || !(obj instanceof PlayingCard)) {
            isEqual = false;
        } else if (obj == this) {
            isEqual = true;
        } else {
            PlayingCard other = (PlayingCard) obj;
            isEqual = (other.rank.equals(rank)) && (other.suit.equals(suit));
        }
        return isEqual;
    }
}

class FaceUpPlayingCard extends PlayingCard {
    public FaceUpPlayingCard(Rank rank, Suit suit) {
        super(rank, suit);
    }
    public boolean isComparableWith(PlayingCard other)  {
        return other instanceof FaceUpPlayingCard;
    }
    public boolean matches(PlayingCard other) {
        return isComparableWith(other) && equals(other);
    }
    public Rank getRank() { return rank; }
    public Suit getSuit() { return suit; }
}

class FaceDownPlayingCard extends PlayingCard {
    public FaceDownPlayingCard(Rank rank, Suit suit) {
        super(rank, suit);
    }
    public boolean isComparableWith(PlayingCard other)  {
        return false;
    }
    public boolean matches(PlayingCard other) {
        return false;
    }
    public Rank getRand() { return null; }
    public Suit getSuit() { return null; }
} 
```

这样，当您有一个集合时，它可以基于该方法进行排序和其他内置检查`equals`，无论卡片的状态如何（正面朝上或朝下）都会检查属性。当您需要实现游戏逻辑时，您将使用该`matches`方法 - 这会检查两张牌是否正面朝上，如果是，则检查等级和花色。

# shell - PowerShell 命令行上的链式命令（如 POSIX sh &&）

> ID：11104197
> 
> 赞同：18
> 
> 时间：2012-06-19T15:21:42.980
> 
> 标签：shell, powershell, conditional, powershell-2.0

PowerShell 是否具有与以下命令构造等效的`sh`（及其衍生工具）：

```
$ cmd1 && cmd2 
```

成功退出`cmd2`时只在哪里运行？`cmd1`

我知道您可以将命令与分号结合使用。但是，这忽略了命令的退出状态。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-10-08T17:26:38.613

试试这个：

```
$errorActionPreference='Stop'; cmd1; cmd2 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-19T15:27:28.393

&& 或 || 没有直接的类比。不过，有几个关于替代品的讨论。这是一个例子：

[powershell 中的条件执行（&& 和 ||）](https://stackoverflow.com/questions/2251622/conditional-execution-and-in-powershell)

# php - php，如何检测会话ID是死的还是活的？

> ID：11104205
> 
> 赞同：5
> 
> 时间：2012-06-19T15:22:11.350
> 
> 标签：php, session

> **可能重复：**
> [如何在 30 分钟后使 PHP 会话过期？](https://stackoverflow.com/questions/520237/how-do-i-expire-a-php-session-after-30-minutes)

如何检测会话 ID 是死的还是活的？让我们假设有人登录 - 创建了一个新会话，我保存了会话 ID。如果他从另一个浏览器登录，我可以确定他登录了两次。但是如何检测他是否退出？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-19T15:26:16.427

您需要做的是，当他在新浏览器上登录他的帐户时，找到与他的帐户关联的旧 sessionID 并将其过期。当他单击注销按钮时，您可以退出该 sessionID。

编辑：

对不起，我读错了你的问题。您要做的是设置会话超时，因此如果达到超时，您将假定会话已死并使其过期。在每个页面请求上，您都将更新过期时间以使其生效。如果他们从另一个浏览器登录，您可以假设旧浏览器中的会话是旧的，并立即将其过期或让它随着超时而过期。

然后，您可以在页面加载时检查会话超时，或运行将在会话数据库中运行并使所有旧会话过期的 cron 脚本。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-19T15:26:31.947

当用户登录时，您应该设置一个会话变量来表示他们已登录。

如果用户注销，您应该使用`session_destroy()`来结束会话。

这样变量就被破坏了，所以如果你检查会话变量，它就不会是真的。我个人使用`$_SESSION['isLoggedIn'] = TRUE`.

编辑添加：如果您希望它在多个浏览器或计算机上工作，您需要将登录或会话 ID 保存到数据库，以便您可以检查用户是否在其他地方登录。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-19T15:42:38.740

一般来说，“登录”的动作通常与某种*持久层*相关联，通常是数据库服务器中用户的表/集合。

在登录时使用此保存的数据创建会话，并以某种方式将保存的数据序列化到`$_SESSION`超全局中。

如果您想全局跟踪登录/注销，则需要保存与两个单调递增整数相关联的用户 ID（通常是电子邮件或登录凭据），这些整数表示他们从任何地方登录/注销的次数。

没有硬性规定必须在数据库中进行，只是可以更好地扩展。对于小型或测试用例，您可以轻松保存分页文件。

主要思想是，要让任何类型的数据持续超过`session_id`引用服务器上会话的 cookie 的过期时间，您需要实现某种形式的持久性。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-06-19T15:55:29.200

当用户登录并将变量设置为 true 时使用 $_SESSION[]。如果需要，您也可以在会话变量中保存一些数据。一旦用户单击注销，将会话变量设置为 false。代码如下：

```
 function Login()
    {
        if(!isset($_SESSION)){ session_start(); }
        if(!$this->CheckLoginInDB($email,$password))
        {
            return false;
        }

        $_SESSION[$this->GetLoginSessionVar()] = $email;

        return true;
    }

function GetLoginSessionVar()
    {
        $retvar = md5($this->rand_key);
        $retvar = 'usr_'.substr($retvar,0,10);
        return $retvar;
    }

    function LogOut()
        {
            session_start();

            $sessionvar = $this->GetLoginSessionVar();

            $_SESSION[$sessionvar]=NULL;

            unset($_SESSION[$sessionvar]);
        } 
```

这是一种简单的方法。如果你想休息一下。您可以为 $_SESSION[] 变量使用开始时间，然后设置超时时间。检查在那之前的任何活动，然后像这样退出：

```
function LogOut(){
session_start();
// set timeout period. This will be in seconds.
$inactive = 1000;
// check to see if $_SESSION['timeout'] is set
if(isset($_SESSION['timeout']) ) {
    $session_life = time() - $_SESSION['start'];
    if($session_life > $inactive)
        { session_destroy(); header("Location: logoutpage.php"); }
}
$_SESSION['timeout'] = time();

} 
```

There could be more better ways of doing this. I am looking for a better way to do it myself . Hope it helps.

So if he closes his browser he will be logged out after inactivity anyway. But if you want logout after browser is closed check [ini.session.cookie-lifetime](http://www.php.net/manual/en/session.configuration.php#ini.session.cookie-lifetime)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-06-19T15:25:52.433

为此，您将需要登录您的用户表，或切换到将会话存储在数据库中，然后您可以针对用户检查会话（如果您以这种方式进行设置）。

# delphi - 如何在不使用 VCL 的情况下使用自定义 Delphi 类创建窗口？

> ID：11104206
> 
> 赞同：4
> 
> 时间：2012-06-19T15:22:14.830
> 
> 标签：delphi, winapi, delphi-2007

我正在尝试编写一个包含类的简单单元，`TMainWindow`以提高我对本机 Windows API 的了解。

我想像这样使用这个类：

```
var
  MainWindow: TMainWindow;
begin
  MainWindow := TMainWindow.Create;
  try
    MainWindow.ShowModal;
  finally
    MainWindow.Free;
  end;
end. 
```

我得到了一个几乎可以工作的原型，但我找不到问题，这是我到目前为止编写的代码：

```
unit NT.Window;

interface

uses
  Windows, Messages, Classes, SysUtils;

type
  PObject = ^TObject;

  TMainWindow = class(TObject)
  private
    FChild  : HWND;                          { Optional child window }
    FHandle : HWND;
    procedure WMCreate      (var Msg: TWMCreate);      message WM_CREATE;
    procedure WMDestroy     (var Msg: TWMDestroy);     message WM_DESTROY;
    procedure WMNcCreate    (var Msg: TWMNCCreate);    message WM_NCCREATE;
    procedure WMPaint       (var Msg: TWMPaint);       message WM_PAINT;
    procedure WMPrintClient (var Msg: TWMPrintClient); message WM_PRINTCLIENT;
    procedure WMSize        (var Msg: TWMSize);        message WM_SIZE;
    procedure PaintContent(const APaintStruct: TPaintStruct);
    function HandleMessage(var Msg: TMessage): Integer;
  public
    constructor Create;
    procedure DefaultHandler(var Message); override;
    function ShowModal: Boolean;
  end;

implementation

var
  WindowByHwnd: TStringList;

function PointerToStr(APointer: Pointer): string;
begin
  Result := IntToStr(NativeInt(APointer));
end;

function StrToPointerDef(AString: string; ADefault: Pointer): Pointer;
begin
  Result := Pointer(StrToIntDef(AString, Integer(ADefault)));
end;

function GetWindowByHwnd(hwnd: HWND): TMainWindow;
begin
  Result := TMainWindow(StrToPointerDef(WindowByHwnd.Values[IntToStr(hwnd)], nil));
end;

procedure StoreWindowByHwnd(hwnd: HWND; AWindow: TMainWindow);
begin
  AWindow.FHandle := hwnd;
  WindowByHwnd.Add(IntToStr(hwnd) + '=' + PointerToStr(Pointer(AWindow)));
end;

function WndProc(hwnd: HWND; uiMsg: UINT; wParam: WPARAM; lParam: LPARAM): LRESULT; stdcall;
var
  Msg    : TMessage;
  Window : TMainWindow;
begin
  Msg.Msg    := uiMsg;
  Msg.WParam := wParam;
  Msg.LParam := lParam;
  Msg.Result := 0;
  if uiMsg = WM_NCCREATE then begin
    StoreWindowByHwnd(hwnd, TMainWindow(TWMNCCreate(Msg).CreateStruct.lpCreateParams))
  end;
  Window := GetWindowByHwnd(hwnd);
  if Window = nil then begin
    Result := DefWindowProc(hwnd, Msg.Msg, Msg.WParam, Msg.LParam);
  end else begin
    Result := Window.HandleMessage(Msg);
  end;
end;

{ TMainWindow }

constructor TMainWindow.Create;
var
  wc: WNDCLASS;
begin
  inherited Create;
  wc.style         := 0;
  wc.lpfnWndProc   := @WndProc;
  wc.cbClsExtra    := 0;
  wc.cbWndExtra    := 0;
  wc.hInstance     := HInstance;
  wc.hIcon         := 0;
  wc.hCursor       := LoadCursor(0, IDC_ARROW);
  wc.hbrBackground := HBRUSH(COLOR_WINDOW + 1);
  wc.lpszMenuName  := nil;
  wc.lpszClassName := 'Scratch';
  if Windows.RegisterClass(wc) = 0 then begin
    raise Exception.Create('RegisterClass failed: ' + SysErrorMessage(GetLastError));
  end;
  if CreateWindow(
    'Scratch',                   { Class Name }
    'Scratch',                   { Title }
    WS_OVERLAPPEDWINDOW,         { Style }
    Integer(CW_USEDEFAULT),
    Integer(CW_USEDEFAULT),      { Position }
    Integer(CW_USEDEFAULT),
    Integer(CW_USEDEFAULT),      { Size }
    0,                           { Parent }
    0,                           { No menu }
    HInstance,                   { Instance }
    @Self                        { No special parameters }
  ) = 0 then begin
    raise Exception.Create('CreateWindow failed: ' + SysErrorMessage(GetLastError));
  end;
end;

procedure TMainWindow.DefaultHandler(var Message);
var
  Msg: TMessage;
begin
  Msg := TMessage(Message);
  Msg.Result := DefWindowProc(FHandle, Msg.Msg, Msg.WParam, Msg.LParam);
end;

function TMainWindow.HandleMessage(var Msg: TMessage): Integer;
begin
  // Dispatch(Msg);
  case Msg.Msg of
    WM_CREATE      : WMCreate(     TWMCreate(Msg));
    WM_DESTROY     : WMDestroy(    TWMDestroy(Msg));
    WM_NCCREATE    : WMNcCreate(   TWMNCCreate(Msg));
    WM_PAINT       : WMPaint(      TWMPaint(Msg));
    WM_PRINTCLIENT : WMPrintClient(TWMPrintClient(Msg));
    WM_SIZE        : WMSize(       TWMSize(Msg));
  else
    // DefaultHandler(Msg);
    Msg.Result := DefWindowProc(FHandle, Msg.Msg, Msg.WParam, Msg.LParam);
  end;

  Result := Msg.Result;
end;

procedure TMainWindow.PaintContent(const APaintStruct: TPaintStruct);
begin

end;

function TMainWindow.ShowModal: Boolean;
var
  msg_  : MSG;
begin
  ShowWindow(FHandle, CmdShow);
  while GetMessage(msg_, 0, 0, 0) do begin
    TranslateMessage(msg_);
    DispatchMessage(msg_);
  end;
  Result := True;
end;

procedure TMainWindow.WMCreate(var Msg: TWMCreate);
begin
  Msg.Result := 0;
end;

procedure TMainWindow.WMDestroy(var Msg: TWMDestroy);
begin
  PostQuitMessage(0);
end;

procedure TMainWindow.WMNcCreate(var Msg: TWMNCCreate);
begin
  Msg.Result := Ord(True);
end;

procedure TMainWindow.WMPaint(var Msg: TWMPaint);
var
  ps: PAINTSTRUCT;
begin
  BeginPaint(FHandle, ps);
  PaintContent(ps);
  EndPaint(FHandle, ps);
end;

procedure TMainWindow.WMPrintClient(var Msg: TWMPrintClient);
var
  ps: PAINTSTRUCT;
begin
  ps.hdc := Msg.DC;
  GetClientRect(FHandle, ps.rcPaint);
  PaintContent(ps);
end;

procedure TMainWindow.WMSize(var Msg: TWMSize);
begin
  if FChild <> 0 then begin
    MoveWindow(FChild, 0, 0, Msg.Width, Msg.Height, True);
  end;
end;

initialization
  WindowByHwnd := TStringList.Create;

finalization
  WindowByHwnd.Free;

end. 
```

代码部分基于 Raymond Chen 的临时程序：http: [//blogs.msdn.com/b/oldnewthing/archive/2003/07/23/54576.aspx](http://blogs.msdn.com/b/oldnewthing/archive/2003/07/23/54576.aspx)

我正在使用 a`TStringList`在 WndProc 函数中查找 TMainWindow 的实例，这非常低效，但应该可以工作。

程序按原样崩溃，当我`Dispatch`在`HandleMessage`函数中使用时也会崩溃。

为什么它在离开构造函数或在`Dispatch`调用中的修改版本后立即崩溃？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-19T16:33:07.917

You call `CreateWindow` like this:

```
CreateWindow(
  'Scratch',                   { Class Name }
  'Scratch',                   { Title }
  WS_OVERLAPPEDWINDOW,         { Style }
  Integer(CW_USEDEFAULT),
  Integer(CW_USEDEFAULT),      { Position }
  Integer(CW_USEDEFAULT),
  Integer(CW_USEDEFAULT),      { Size }
  0,                           { Parent }
  0,                           { No menu }
  HInstance,                   { Instance }
  @Self                        { No special parameters }
) 
```

In addition to the comment on the final parameter being wrong, the *value* is wrong. The expression `@Self` is a pointer to the local `Self` variable. A *pointer to a local variable*. That's bound to turn out badly. You thought you were passing a pointer to the object being created, but that's given by the value of `Self` directly. **Remove the `@`.**

* * *

There are a few more direct ways of associating an object reference with a window handle instead of converting both the handle and the reference to strings and doing name=value lookups.

*   For starters, you could use a more type-safe associative container, like a [`TDictionary<HWnd, TMainWindow>`](http://docwiki.embarcadero.com/Libraries/en/System.Generics.Collections.TDictionary). That at least gets you away from all the string conversions.

*   You can associate the object reference directly with the window handle using `SetWindowLongPtr` and `GetWindowLongPtr`. You could modify your code as follows:

    ```
    constructor TMainWindow.Create;
      // ...
      wc.cbWndExtra := SizeOf(Self);

    function GetWindowByHwnd(hwnd: HWnd): TMainWindow;
    begin
      Result := TMainWindow(GetWindowLongPtr(hwnd, 0));
    end;

    procedure StoreWindowByHwnd(hwnd: HWND; AWindow: TMainWindow);
    begin
      AWindow.FHandle := hwnd;
      SetWindowLongPtr(hwnd, 0, IntPtr(AWindow));
    end; 
    ```

    Since you're use the "extra window bytes," you need to make sure that descendants of your window class don't try to use the same space for something else. You'd want to provide some sort of mechanism for descendants to "register" that they want space, add up all the descendants' requests, and put the total in the `cbWndExtra` field. Then have a way for descendants to load and store data at the slots they reserved.

*   You can use [window properties](http://msdn.microsoft.com/en-us/library/windows/desktop/ms632594.aspx). Store the object reference in a property value with [`SetProp`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms633568.aspx) in the `wm_NCCreate` message, and remove it with [`RemoveProp`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms633567.aspx) in the `wm_NCDestroy` message.

    Pick a property name unlikely to be used by descendant classes.

*   Finally, you could do what the VCL does, which is to allocate a new "stub" window procedure for every object. It has a template procedure jumps to the address of the regular window procedure; it allocates memory for a new stub, fills in the template with the current object reference, and then uses that stub pointer when it calls `RegisterClassEx`.

# c# - 为什么 \b 不匹配使用 .net 正则表达式的单词

> ID：11104207
> 
> 赞同：6
> 
> 时间：2012-06-19T15:22:15.330
> 
> 标签：c#, .net, regex

要查看常规表达式，我阅读[了本教程](http://www.codeproject.com/Articles/9099/The-30-Minute-Regex-Tutorial)。无论如何，该教程提到`\b`匹配单词边界（在 \w 和 \W 字符之间）。该教程还提供了一个链接，您可以在其中安装 expresso（有助于创建正则表达式的程序）。

所以我在 expresso 中创建了我的正则表达式，我确实得到了匹配。现在，当我将相同的正则表达式复制到 Visual Studio 时，我没有得到匹配。看一看：

* * *

![在此处输入图像描述](../Images/9cbc8b2214c8b9ecaaa7caa5ecfcead8.png)

* * *

![在此处输入图像描述](../Images/e337325deaac3b4aee1d8c4019b1f381.png)

为什么我没有得到匹配？在即时窗口中，我正在显示变量输出的内容。在 expresso 中我确实得到了匹配，而在视觉工作室中我没有。为什么？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-06-19T15:27:01.810

**C# 语言**和.NET正则**表达式**都有自己独特的反斜杠转义序列集，但 C# 编译器会拦截`"\b"`字符串中的 并将其转换为 ASCII 退格字符，因此`RegEx`类永远不会看到它。您需要逐字制作字符串（带有 at 符号的前缀）或双重转义“b”，以便将反斜杠传递给 RegEx，如下所示：

```
@"\bCOMPILATION UNIT"; 
```

或者

```
"\\bCOMPILATION UNIT" 
```

我会说.NET RegEx 文档并没有说明这一点。起初我也花了一段时间才弄清楚这一点。

有趣的事实：`\r`and`\n`字符（分别是回车和换行符）和其他一些字符被 RegEx 和 C# 语言识别*，*所以最终结果是相同的，即使编译的字符串不同。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-19T15:27:47.967

你应该使用`@"\bCOMPILATION UNIT"`. 这是逐字逐句。相反，当您这样做时`"\b"`，它会解析`\b`为一个特殊字符。你也可以这样做`"\\b"`，它的双反斜杠被解析成一个真正的反斜杠，但在处理正则表达式时通常更容易使用逐字逐句。

# ruby-on-rails - Rails 3.2.3 中的嵌套路由

> ID：11104208
> 
> 赞同：1
> 
> 时间：2012-06-19T15:22:28.950
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1

我正在尝试为具有许多板的项目创建嵌套路由。

首先，我正在创建一个指向新版块的链接：

```
<%= link_to 'New Board', new_project_board_path(@project) %> 
```

在 routes.rb 我只是嵌套了宁静的路线：

```
resources :projects do
  resources :boards
end 
```

在板控制器中，我调整了新的和创建操作，如下所示：

```
 def new
        @project = Project.find(params[:project_id])
        @board = @project.boards.new

        respond_to do |format|
          format.html # new.html.erb
          format.json { render json: @board }
        end
  end

 def create
    @project = Project.find(params[:project_id])
    @board = @project.boards.new(params[:board])

    respond_to do |format|
      if @board.save
        format.html { redirect_to @board, notice: 'Board was successfully created.' }
        format.json { render json: @board, status: :created, location: @board }
      else
        format.html { render action: "new" }
        format.json { render json: @board.errors, status: :unprocessable_entity }
      end
    end
  end 
```

至少我还将 _form.html.erb 更改为：

```
<%= form_for([@project, @board]) do |f| %> 
```

等等

当我单击按钮创建板（因此执行新操作）时，我的问题就开始了，它说没有路线匹配。我想这与创建操作有关，因为它不再获得项目的 ID？我真的不知道还有什么可以改变的以及在哪里改变。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T15:35:44.737

似乎你的错误在这里

```
format.html { redirect_to @board, notice: 'Board was successfully created.' } 
```

你没有非嵌套的 :boards 资源，是吗？尝试将此行更改为

```
format.html { redirect_to [@project, @board], notice: 'Board was successfully created.' } 
```

# javascript - 使用 jQuery 更改 css 样式（在容器内）

> ID：11104213
> 
> 赞同：0
> 
> 时间：2012-06-19T15:22:44.280
> 
> 标签：javascript, jquery, html, css

这是 jsFiddle：http: [//jsfiddle.net/JFwDw/2/](http://jsfiddle.net/JFwDw/2/)

我想要做的是使用链接来更改段落的字体大小和行高，仅在一个部门标识的“内容”内。我已经建立了另一个部门，以确保它不会在其他任何地方发生变化......在玩了一段时间后无法让它工作。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T15:28:12.697

您想更改正在使用的选择器。而不是对所有`p`标签做，你只想要下面的标签`#content`

```
$("#content p, #content ul").css() 
```

[演示](http://jsfiddle.net/JFwDw/30/)

您的链接还链接到`<a href=""...`导致页面重新加载的链接。我把它改成`href="#"`这样就不会发生了。您还可以[防止默认事件](http://api.jquery.com/event.preventDefault/)在函数内部发生。

```
function origText() {
    event.preventDefault()
    ... 
```

在旁注中，我无法弄清楚为什么这些函数在小提琴的 JS 部分中不起作用......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T15:28:31.263

好吧，一方面，您的链接正在被激活并重新加载页面。

通常，当您编写 jQuery 时，您将使用选择器附加事件，而不是使用内联代码。这让您可以将 JavaScript 和 HTML 保存在单独的文件中，并允许 jQuery 在需要时删除事件。

```
<a href="#" id="bigText">big text</a>

$('#bigText').click( function(event) {
   // code here
} ); 
```

然后要防止默认动作（如下链接），可以使用jQuery方法，防止默认动作。

```
$('#bigText').click( function(event) {
   event.preventDefaultAction();
   // code here
} ); 
```

您还可以使用文档就绪事件来包装事件绑定代码，以确保在尝试将事件附加到它之前加载 DOM。

```
$(document).ready( function() {
   $('#bigText').click( function(event) {
      event.preventDefaultAction();
      // code here
   } );
} ); 
```

此外，您通常希望添加一个类来更改元素的样式，而不是使用 jQuery 来更改样式。它的性能更高。此外，如果您只想影响容器中的元素，您可以使用 jQuery“查找”方法来执行此操作。

```
$('#someContainer').find('p').addClass('someClass'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-19T15:29:01.653

[http://jsfiddle.net/JFwDw/34/](http://jsfiddle.net/JFwDw/34/)

这对我有用。

**编辑：**我认为这就是你想要实现的目标！

# sql - 带有字符串参数的 NHibernate SQL 查询问题

> ID：11104218
> 
> 赞同：0
> 
> 时间：2012-06-19T15:23:09.933
> 
> 标签：sql, nhibernate, parameters

我遇到了这段代码的问题：

```
string sql = "select distinct ruoli.c_tip_usr"
                                    + " from vneczx_ute_app_trn ruoli"
                                    + " join vnecyd_ent_prf ind"
                                    + " on ruoli.c_ent = ind.c_ent"
                                    + " where ruoli.c_app = :appCode"
                                    + " and ruoli.c_ute_mat = :matricola"
                                    + " and ind.t_des_ent = :indirizzo";                                               
var ruoli = session.CreateSQLQuery(sql)
                   .SetString("appCode", Config.Configurator.Istance.ApplicationCode)
                   .SetString("matricola", user.Matricola)
                   .SetString("indirizzo", indirizzoCasella)                                            
                   .List<string>(); 
```

此代码正确执行，记录的查询正确，并且传递的参数正确评估......但它根本不返回任何结果。从调试控制台复制查询并直接在 Oracle 客户端应用程序（SQL Developer）中执行，它得到 2 个结果（我期望的结果是正确的）。

我发现问题出在最后一个参数`indirizzo`中，并且应该取决于它包含一个特殊字符`@`（`indirizzo`是一个电子邮件地址）的事实。

所以我最终使用了这个解决方案：

```
string sql = "select distinct ruoli.c_tip_usr"
                                    + " from vneczx_ute_app_trn ruoli"
                                    + " join vnecyd_ent_prf ind"
                                    + " on ruoli.c_ent = ind.c_ent"
                                    + " where ruoli.c_app = :appCode"
                                    + " and ruoli.c_ute_mat = :matricola"
                                    + " and ind.t_des_ent = '" + indirizzoCasella + "'";                                               
var ruoli = session.CreateSQLQuery(sql)
                   .SetString("appCode", Config.Configurator.Istance.ApplicationCode)
                   .SetString("matricola", user.Matricola)                                                                 
                   .List<string>(); 
```

但它让我兴奋！查询中的参数是否应该专门处理这种情况，从而使用特殊字符处理自己的情况等等？为什么这里的字符串连接比参数查询效果更好？有没有办法强制 NHibernate 引擎转义一些特殊字符？

**更新：**

我发现了如何解决这个特定问题：`trim`在提出问题的字段上使用命令，问题就消失了。所以我的 sql 字符串的最后一行现在是：

```
+ " and trim(ind.t_des_ent) = :indirizzo"; 
```

我不明白为什么它解决了这个问题。不是字段，也不是变量包含空字符，并且在 SQL Developer 上复制查询以两种方式工作。所以我们有一些运气解决了这个问题，但我们不知道为什么现在它可以工作了？有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T14:22:06.637

即使我也面临同样的问题，但是您使用 TRIM 作为列的提示挽救了我的一天。因为找了很久，还是没弄明白。

除此之外，我还可以通过进行以下更改来解决我的问题：

我们使用了 CHAR 数据类型，其中一些列在查询 where 子句中使用。这导致问题从 NHibernate 获取数据。我们将该列的数据类型从 CHAR 更改为 VARCHAR2，甚至更新了实际大小的数据，并从 Where 子句中删除了 TRIM，TRICK WORKED！！！！:)

因此，任何人都面临这种问题，首先检查您是否有任何带有 CHAR 的列，然后更改为 VARCHAR2。

但是您必须记住的另一件事是：如果您正在从 ASP.Net 开发服务器运行您的应用程序，请关闭它并重新运行您的应用程序。因为如果打开 Asp.Net 开发服务器并且如果您对数据类型进行任何更改，这些更改将**不会**在您的 oracle 连接中刷新。因此，最好关闭 ASP.Net 开发服务器，然后重新运行应用程序。

希望我的观点能对未来的人有所帮助！！

问候，

斯里哈沙瓦达纳

* * *

## 回答 #2

> 赞同：-4
> 
> 时间：2012-06-20T00:14:30.273

如果您希望 SQL 参数使用 SQL 存储过程，则您没有在 SQL 查询中使用参数

# ruby-on-rails - 集合选择多个表涉及 Rails 3.2.1，PostgreSQl

> ID：11104220
> 
> 赞同：0
> 
> 时间：2012-06-19T15:23:17.067
> 
> 标签：ruby-on-rails, ruby-on-rails-3, drop-down-menu

我正在尝试为我的 collection_select 列表获取数据。

细节

涉及4张表

```
 volunteers 
            has_many :signed_posts
            has_many :posts, :through=>:signed_posts

       signed_posts
            belongs_to :volunteer
            belongs_to :post

       posts
            belongs_to :organization
            has_many :signed_posts
            has_many :volunteers, :through=>:signed_posts

       organizations
            has_many :post 
```

如果我必须用纯 SQL 编写，它会像下面这样。这个 sql 是用于 postgreSQL 的。我想用 rails 3.2.1 语法写。

```
 Select sp.id,p.title ||'-'|| o.name AS project from signed_posts sp 
           inner join volunteers v on v.id=sp.volunteer_id
           inner join posts p on p.id=sp.post_id
           inner join organizations o on o.id=p.organization_id
           where v.id=1 
```

结果，我想为志愿者 id 1获取**signed_posts.id**和**posts.title - organizations.name**

我想在下拉列表中使用它。

非常感谢您的帮助

## 我的解决方案

我使用像这样的哈希表解决了这个问题

```
 @signed_projects=Volunteer.find(1).signed_posts.joins(:post)

        @ddl_test=Hash.new
            @signed_projects.each do |signed_project|
                   ddl_test[signed_project.post.title+"-"+signed_project.post.organization.name]=signed_project.id

           end 
```

在视图中

```
 <%=select_tag 'ddl_test',options_for_select(@ddl_test.to_a),:prompt => 'Please select the project'%> 
```

## 我并不完全满意。我认为必须有一些优雅的解决方案。如果有人有更好的主意，请告诉我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T16:05:27.297

有几种方法可以做到这一点。在您的控制器中，您需要如下语句：

```
@signed_posts = Volunteer.find(1).signed_posts.includes({:post => :organization}) 
```

之后，一种方法是在`SignedPost`模型中创建一个方法来返回您需要的数据，如下所示

```
def post_name_with_organization
  "#{id} #{post.title} - #{post.organization.name}"
end 
```

然后，在您的 collection_select 中，您可以使用（这是部分猜测，因为我不知道您的表单的细节）：

```
form.collection_select(:signed_post_id, @signed_posts, :id, :post_name_with_organization) 
```

**根据问题更新进行编辑**

如果您想像在解决方案中那样使用`select_tag`，`options_for_select`更优雅的方法是在控制器中创建此变量：

```
@signed_posts_options = @signed_posts.map {|sp| [sp.post_name_with_organization, sp.id]} 
```

那么在你看来：

```
<%=select_tag 'ddl_test',options_for_select(@signed_posts_options),:prompt => 'Please select the project'%> 
```

# python - 无法删除使用“with”打开（和关闭？）的文件

> ID：11104227
> 
> 赞同：-2
> 
> 时间：2012-06-19T15:23:46.333
> 
> 标签：python, python-3.x, with-statement

如何关闭此文件。任何的想法？

```
 with open('output.txt','w', encoding='UTF-8') as output:
       output.writelines(str(i)+'\n' for i in range(5)) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-19T15:24:46.257

当您离开“ `with`-block”或遇到异常时，文件会自动关闭。这就是为什么它是打开文件的首选方式。

有关该声明的更多信息，请参阅此[PEP 343——“with”声明](http://www.python.org/dev/peps/pep-0343/)`with`。[Python “with” 示例语句](http://preshing.com/20110920/the-python-with-statement-by-example)提供了更多信息。

更新：

您无法删除打开的文件`with`是因为该文件之前一直处于打开状态（未使用`with`且未明确使用`close`它时）。作为使用不同文件的测试`with`并没有产生问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-19T15:25:59.280

[http://effbot.org/zone/python-with-statement.htm](http://effbot.org/zone/python-with-statement.htm)

转述：

在 Python 2.5 中，文件对象已经配备了**进入**和**退出**方法；前者简单地返回文件对象本身，后者关闭文件。

所以 with 语句的“拆卸”动作实际上是自动关闭文件。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-19T15:25:02.610

`with`语句会自动为您关闭文件。

在这里阅读更多：http: [//preshing.com/20110920/the-python-with-statement-by-example](http://preshing.com/20110920/the-python-with-statement-by-example)

# mysql - 插入忽略重复但没有键

> ID：11104233
> 
> 赞同：0
> 
> 时间：2012-06-19T15:24:12.973
> 
> 标签：mysql, insert, duplication

我有一个不是键的字段（它是文本），我想将行插入表中，但前提是没有这样的字段。

是否可以在一个查询上执行此操作而无需先调用 select 来检查表中是否存在此字段的行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T15:33:30.120

两种变体：

1.  您可以向 TEXT 字段添加唯一键，您只需指定索引的键长度。
2.  创建一个 BEFORE INSERT 触发器，但在这种情况下，您必须在触发器中调用 SELECT 语句。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T15:31:54.207

您可以使用 INSERT IGNORE INTO ...，它将所有 INSERT 错误转换为警告

# python - 使用rpy2时glm计算慢

> ID：11104241
> 
> 赞同：0
> 
> 时间：2012-06-19T15:24:42.813
> 
> 标签：python, r, rpy2, glm

我想使用 R 的 glm 包计算逻辑回归参数。我正在使用 python 并为此使用 rpy2。出于某种原因，当我使用 RI 运行 glm 函数时，得到的结果比使用 rpy2 快得多。你知道为什么使用 rpy2 的计算要慢得多吗？我正在使用 R - V2.13.1 和 rpy2 - V2.0.8 这是我正在使用的代码：

```
import numpy
from rpy2 import robjects as ro
import rpy2.rlike.container as rlc

def train(self, x_values, y_values, weights):
        x_float_vector = [ro.FloatVector(x) for x in numpy.array(x_values).transpose()]
        y_float_vector = ro.FloatVector(y_values)   
        weights_float_vector = ro.FloatVector(weights)
        names = ['v' + str(i) for i in xrange(len(x_float_vector))]
        d = rlc.TaggedList(x_float_vector + [y_float_vector], names + ['y'])
        data = ro.RDataFrame(d)
        formula = 'y ~ '
        for x in names:
            formula += x + '+'
        formula = formula[:-1]
        fit_res = ro.r.glm(formula=ro.r(formula), data=data, weights=weights_float_vector,  family=ro.r('binomial(link="logit")')) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T10:52:32.740

如果没有完整的 R 代码进行基准测试，就很难准确指出问题可能出在哪里。

您可能希望通过 Python 分析器运行它以查看瓶颈在哪里。

最后，rpy2 的当前版本是 2.2.6。除了 API 更改之外，它的运行速度更快，并且（可能）比 2.0.8 更少的错误。

**编辑：**根据您的评论，我现在怀疑您正在循环调用您的函数，并且大部分时间都花在构建 R 向量上（可能只需要构建一次）。

# jquery - Fancybox 直接 url 重定向

> ID：11104244
> 
> 赞同：-1
> 
> 时间：2012-06-19T15:24:51.757
> 
> 标签：jquery, fancybox

我有一个主页，它在模式窗口中打开一系列 iframe 和外部文件。

我的结构与此类似

```
<a href="page1.html" class="fancybox inframe">Page 1</a>
<a href="page2.html" class="fancybox inframe">Page 2</a>
<a href="page3.html#2" class="fancybox inframe">EXAMPLE PAGE</a>
<a href="page3.html#6" class="fancybox inframe">Page 4</a> 
```

另请注意，某些链接可能直接指向指定的面板。

Fancybox 以这种形式生成一个 url [http://domain.com/page3.html#2](http://domain.com/page3.html#2) 如果我通过在浏览器中输入直接访问该页面，我想重定向到我的 homepage.html 并打开相应的 fancybox。

我怎样才能做到这一点？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T17:04:42.977

同一个URL不可能从服务器返回不同的响应：一个是fancybox的内容，另一个是打开fancybox的整个窗口。

您必须至少添加一个查询字符串参数来区分它们。例如，如果用户没有添加任何查询字符串参数而只是输入 URL，您可以实现逻辑以在文档就绪事件时打开 fancybox。

另一方面，当您以编程方式显示窗口时，您可以提供一个参数并仅显示内容。

# silverlight - Prism - 初始加载时未调用具有 IActiveAware 的区域

> ID：11104245
> 
> 赞同：0
> 
> 时间：2012-06-19T15:24:59.217
> 
> 标签：silverlight, prism

当我单击选项卡标题时，我在 TabControl 中有可以正常加载的区域，但是当页面最初加载时我无法设置默认视图。

例如：如果我有 3 个标签，我希望默认加载第一个。最简单的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T11:35:17.977

在构造函数中 InitializeComponent() 之后

TabControl.SelectedItem = TabControl.Items[0];

虽然没有测试

# c# - 如何在 C# 中使用 WMI

> ID：11104255
> 
> 赞同：1
> 
> 时间：2012-06-19T15:25:34.847
> 
> 标签：c#, wmi

编译器无法识别 SelectQuery api 和 ManagementObjectSearcher。根据我在网上的例子中看到的，我需要做的就是添加

使用 System.Management

作为命名空间

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T15:26:29.497

您还需要在项目中添加对 `System.Management.dll`.

您可以通过查看[MSDN 上的文档](http://msdn.microsoft.com/en-us/library/system.management.managementobjectsearcher.aspx)来查看任何课程的这一点。请注意：

```
Namespace:  System.Management
Assembly:  System.Management (in System.Management.dll) 
```

这意味着您需要添加 a`using System.Management;`以导入命名空间，但它还需要引用`System.Management.dll`.

# sql - SQL Server 2008 - 你能索引一个持久的列吗

> ID：11104259
> 
> 赞同：1
> 
> 时间：2012-06-19T15:25:49.557
> 
> 标签：sql, sql-server-2008, indexing, persisted-column

是否可以索引持久字段？

当尝试将主键更改为持久字段或将主键添加到我已创建持久字段的字段时，我得到以下信息：

> 无法对表 'tblOpportunityRecords' 中的可为空列定义 PRIMARY KEY 约束。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T15:34:49.870

为了使您的计算字段不为空，您需要帮助 SQL Server 确定不可能有空值。通常，这是使用`ISNULL`可用于确保结果表达式不可为空的函数来完成的。

```
ISNULL(my_computation, 0) --the second arg should have the same type as the first one 
```

请注意，您不能使用该`COALESCE`功能（出于我不知道的原因 - 它只是不起作用）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T15:28:25.720

根据定义，主键**必须**是`NOT NULL`唯一的。

但是您*可以*使用常规非聚集索引来索引持久计算列 - 绝对！

# c# - sql 是否正在缓存我的程序？

> ID：11104260
> 
> 赞同：0
> 
> 时间：2012-06-19T15:25:51.080
> 
> 标签：c#, asp.net, sql, stored-procedures

第 1 步（工作）

//asp.net

```
public DataSet RepairList()
    {
        DataSet ds = new DataSet();
        try
        {
            openConnection();
            komut.CommandText = "RepairList";
            da.Fill(ds);
        }
        catch (Exception ex)
        {
            LogClass MyLog = new LogClass();
            MyLog.LogInsert("", "221", ex.ToString(), "0");
        }
        finally
        {
            closeConnection();
        }

        return ds;
    } 
```

//sql

```
CREATE PROCEDURE [dbo].[RepairList]
AS
BEGIN
    SET NOCOUNT ON;
    Select Id, ProductId from Repairs Order By Id Desc
END

// result  
 1   3,
 2   4,
 4   9 
```

第 2 步（不工作）我改变我的程序，它在 sql 中工作，但 asp.net 得到不同的结果

//asp.net

```
public DataSet RepairList()
    {
        DataSet ds = new DataSet();
        try
        {
            openConnection();
            komut.CommandText = "RepairList";
            da.Fill(ds);
        }
        catch (Exception ex)
        {
            LogClass MyLog = new LogClass();
            MyLog.LogInsert("", "221", ex.ToString(), "0");
        }
        finally
        {
            closeConnection();
        }

        return ds;
    } 
```

//sql

```
ALTER PROCEDURE [dbo].[RepairList]
AS
BEGIN
    SET NOCOUNT ON;
    Select Id, ProductId, ImageUrl from Repairs Order By Id Desc
END

//sql result 

         1   3   asdf.jpg,
         2   4   df.jpg,
         4   9   sfkas.jpg

//asp.net result(wrong)  

         1   3,
         2   4,
         4   9 
```

第 3 步（工作）我创建了相同的程序但名称不同（RepairList -> RepairsList）然后结果相同且正确

//asp.net

```
public DataSet RepairList()
    {
        DataSet ds = new DataSet();
        try
        {
            openConnection();
            komut.CommandText = "RepairsList";
            da.Fill(ds);
        }
        catch (Exception ex)
        {
            LogClass MyLog = new LogClass();
            MyLog.LogInsert("", "221", ex.ToString(), "0");
        }
        finally
        {
            closeConnection();
        }

        return ds;
    }

//sql

CREATE PROCEDURE [dbo].[RepairsList]
AS
BEGIN
    SET NOCOUNT ON;
    Select Id, ProductId, ImageUrl from Repairs Order By Id Desc
END
//sql result 
         1   3   asdf.jpg,
         2   4   df.jpg,
         4   9   sfkas.jpg

//asp.net result 
         1   3   asdf.jpg,
         2   4   df.jpg,
         4   9   sfkas.jpg 
```

第2步我的问题是什么谢谢...

# animation - 如何在 SequentialAnimation 中使用 AnchorAnimation？

> ID：11104262
> 
> 赞同：-1
> 
> 时间：2012-06-19T15:25:56.017
> 
> 标签：animation, qml

我想在顺序动画中将小部件移动到容器的中心，但它不起作用：

```
SequentialAnimation {
    PauseAnimation { duration: 1000 }
    AnchorAnimation {
        duration: 1000
        //  ERROR: Cannot assign to non-existent default property 
        AnchorChanges {
            target: widget1
            anchors.horizontalCenter: container.horizontalCenter
        }
    }
.... 
```

两者都不：

```
SequentialAnimation {
    PauseAnimation { duration: 1000 }
    // ERROR: Cannot assign object to list
    AnchorChanges {
        target: widget1
        anchors.horizontalCenter: container.horizontalCenter
    }
    AnchorAnimation {
        duration: 1000
    }
.... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T15:56:29.950

您不能将`AnchorChanges`项目放入动画中。您已将其放入状态定义中。

有关更多详细信息，请参阅[文档](http://qt-project.org/doc/qt-4.8/qml-anchoranimation.html)。

# javascript - iPad 上的 Safari 在纵向模式下不适合 980 像素宽度的站点

> ID：11104266
> 
> 赞同：0
> 
> 时间：2012-06-19T15:26:05.147
> 
> 标签：javascript, css, ipad, safari, orientation

我的网页是 980 像素。iPad 上的 Safari 不适合纵向模式。

根据 Apple 的说法，您无需做任何事情来使您的网站适合 iPad 上的所有方向。但是在纵向模式下，我的网页根本不适合。它大约是视口的 20%。

我尝试了所有可用的修复程序均未成功：

```
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"> 
```

或者

```
<meta name="viewport" content="width=980"> 
```

和

```
<style type="text/css">
@media only screen and (min-device-width: 481px) and (max-device-width: 1024px) {
    body, #wrap{
        width:980px;
    }
} 
```

我的模板不容易展示——它有点复杂，但我向你保证，body 有一个宽度为：980px 的包装器。其他隐藏元素也以 100% 的宽度添加到包装器旁边。但它们不太可能引起问题。

有什么想法可以尝试吗？有什么防弹方法吗？我没主意了。

这是文本案例代码：

```
<!doctype html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=980, initial-scale=1, maximum-scale=1"><style type="text/css">body{background-color:grey;}#wrap{width:980px;background-color:red;margin:0 auto;}</style></head><body> <div id="wrap">My content does not fit!</div></body></html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T17:39:55.283

查看您的视口设置。在纵向模式下，iPad 的宽度为 768 像素。通过设置`initial-scale=1`，iPad 会自动缩放到 768px。通过设置`maximum-scale=1`，iPad 将无法像您想要的那样缩小到 980 像素。当然不适合！

现在尝试根本不设置视口！*iPad 将以网站*宽度的 100% 呈现页面，而不是 iPad 的宽度，我猜这就是你想要的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-17T14:18:39.570

我一直在我正在研究的一个固定宽度的网站上玩这个：

```
<meta name="viewport" content="width=device-width, initial-scale=-100%" /> 
```

似乎还可以。

# sql - 现有 DB2 列报告为不是表的列

> ID：11104267
> 
> 赞同：3
> 
> 时间：2012-06-19T15:26:06.097
> 
> 标签：sql, db2, moodle, db2-luw

在 DB2 上运行的 Moodle 2 安装中，删除用户不成功，返回*从数据库读取的错误*：

> 调试信息：[IBM][CLI Driver][DB2/LINUXX8664] SQL0206N“USERIDFROM”在使用它的上下文中无效。SQLSTATE=42703 SQLCODE=-206 SELECT * FROM mdl_message WHERE useridfrom = ? ORDER BY timecreated
> [array ( 0 => '28521', )]

[SQL0206N](http://publib.boulder.ibm.com/infocenter/db2luw/v9r5/index.jsp?topic=/com.ibm.db2.luw.messages.sql.doc/doc/msql00206n.html)的错误描述很清楚，但是`useridfrom`是一列`mdl_message`：

```
$ db2 describe table mdl_message

                          Data type                     Column
Column name               schema    Data type name      Length     Scale Nulls
------------------------- --------- ------------------- ---------- ----- ------
 ID                       SYSIBM    BIGINT                       8     0 No    
 USERIDFROM               SYSIBM    BIGINT                       8     0 No    
 USERIDTO                 SYSIBM    BIGINT                       8     0 No    
 SUBJECT                  SYSIBM    VARCHAR                    200     0 Yes   
 FULLMESSAGE              SYSIBM    VARCHAR                    200     0 Yes   
 FULLMESSAGEFORMAT        SYSIBM    SMALLINT                     2     0 Yes   
 FULLMESSAGEHTML          SYSIBM    VARCHAR                    100     0 Yes   
 SMALLMESSAGE             SYSIBM    VARCHAR                    200     0 Yes   
 NOTIFICATION             SYSIBM    SMALLINT                     2     0 Yes   
 CONTEXTURL               SYSIBM    VARCHAR                    200     0 Yes   
 CONTEXTURLNAME           SYSIBM    VARCHAR                    200     0 Yes   
 TIMECREATED              SYSIBM    BIGINT                       8     0 No    

  12 record(s) selected. 
```

还有什么可能导致此错误？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-19T17:29:03.013

列名可能以某种方式在其中包含空格。您可以使用此查询来确定是否有任何尾随空格：

```
db2 "select '<' || name || '>' from sysibm.syscolumns where tbname = 'MDL_MESSAGE'" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T18:15:42.830

您确定您从命令行和 CLI 以同一用户身份连接。可能存在同一个表存在于不同模式中的情况，您看到的是不同表的描述，但访问的是另一个表。

# sql - InstallShield SQL .bak

> ID：11104270
> 
> 赞同：1
> 
> 时间：2012-06-19T15:26:14.243
> 
> 标签：sql, installation, windows-installer

问题是最近在我的公司，我们需要制作一个安装程序，因为没有人使用 InstallShield 在我们有很多关于它的问题之前。

所以这里有问题：

1.  我可以使用 InstallShield 恢复数据库吗？我的意思是，给它 .bak 文件的路径，然后运行脚本并在 mssql 上恢复数据库？

2.  Install Shield 是否有配置文件，因此我可以根据客户端和我们正在安装的软件版本更改将要使用的文件？现在我们使用自己的设置，但我们必须手动选择文件，所以当客户想要安装软件时，我们必须与他们一起去做，因为真的很复杂。现在我们需要通过制作一个可以由 IT 成员在我们公司配置的安装程序来改变这一点，然后将文件和安装程序发送给客户，他只需按“下一步，下一步...”

对不起，我的英语不好

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T18:53:14.797

您可能会发现将前端软件和数据库视为两个独立的项目对您和您的客户来说更容易。虽然许多供应商提供了在安装过程中针对 SQL Server（和其他数据库）运行脚本的能力，但您会发现需要解决各种问题（是否需要先安装 SQL Server、用户是否有权访问 SQL Server，如果他们在新电脑上安装软件但不需要再次创建数据库等）。这些都不是最引人注目的，但它们确实会造成您需要处理的头疼问题。

通过将数据库和前端分开处理，您可以构建一个安装包，将您的前端软件和相关组件安装在目标机器上。这本身可能很难处理，具体取决于您的软件的复杂程度以及您需要管理的引用和先决条件的数量。

当需要管理程序的数据库方面时，您可能会发现您的大多数客户端都能够将 .bak 文件恢复到他们的 SQL Server，而那些不能始终得到帮助的客户端（可能是远程的）由您的员工。

如果您发现情况并非如此，您始终可以创建一个单独的“服务器”安装包来管理安装的数据库方面。

关于您关于 InstallShield 的问题，您可能会从他们的网站和\或销售人员那里找到更好的信息，但这里是[他们当前功能的列表](http://www.flexerasoftware.com/products/installshield/features.htm)。

该领域还有其他供应商，因此请查看所有供应商，包括[InstallAware](http://www.installaware.com/)和我个人最喜欢的[Advanced Installer](http://www.advancedinstaller.com)。在您的预算中选择一个提供您需要的功能的产品。他们都应该提供试验。在购买之前下载并使用它们，以找到最适合您的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T21:36:24.673

是的 installshield 可以调用一个脚本来恢复一个数据库，你只需要在静默模式下这样做。是的，有一个用于安装屏蔽的 cfg 文件。文档将详细说明这一点

这是版本 12 [http://kb.flexerasoftware.com/doc/Helpnet/installs](http://kb.flexerasoftware.com/doc/Helpnet/installs) hield12helplib/IHelpContents.htm的一些文档

它们目前使用的是 2012 版，但是如果您正在执行此跨平台操作，请不要使用 installshield，而是使用 installanywhere。它是跨平台的。

# jquery - AJAX表单如何显示加载gif

> ID：11104276
> 
> 赞同：2
> 
> 时间：2012-06-19T15:26:34.317
> 
> 标签：jquery, ajax, forms, validation, loading

我有这个用 jQuery 验证插件编写的 AJAX 提交表单。这一切都很完美，但我注意到人们在脚本完成之前重新提交表单，这导致我们的数据库中出现重复记录。这是我到目前为止的代码：

```
$(document).ready(function(){
$("#myform").validate({
    debug: false,
    rules: {
        fname: {required: true}, 
        sname: {required: true}, 
        sex: {required: true}, 
    },
    messages: {
        fname: {required: "- Field required."},
        sname: {required: "- Field required."},
        sex: {required: "- Field required."},
    },
    errorPlacement: function(error, element) {
        if ( element.is(":radio") ) {
        error.appendTo('.radioError');
        }
        else {
        error.insertAfter( element );
        }
    },
    submitHandler: function(form) {
        $.post('process_participant.php', $("#myform").serialize(), function(data) {
            $('#results').html(data);
        });
        }
    });
}); 
```

谁能向我解释如何扩充此代码以将加载 gif 放入我的结果 div 直到我的脚本完成并且加载 gif 被我的实际结果替换？我认为这会阻止人们双击提交按钮。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T15:30:28.933

像这样的东西可以解决问题。我还在帖子完成之前禁用了提交按钮，这样您就可以避免重复提交。

```
$('#mySubmitButton').prop('disabled',true); // Disable submit button
$('#myAjaxIndicator').show(); // Show ajax indicator

$.post('process_participant.php', $("#myform").serialize(), function(data) {
   $('#results').html(data);
})
.complete(function() { 
   $('#mySubmitButton').prop('disabled',false); // Enable submit button
   $('#myAjaxIndicator').hide(); // Hide ajax indicator
}); 
```

`complete`在成功或错误的情况下执行回调，因此您可以在任何情况下启用按钮并隐藏指示器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T15:34:20.010

在您的`submitHandler`函数中，您可以在处理调用之前隐藏您的表单`$.post`，然后在 的回调函数中`$.post`，重新显示您的表单，并做所有您想做的事情。

```
submitHandler: function(form) {
    $("#myform").hide(); // Hide the form
    // Here you can insert a loading pic
    $.post('process_participant.php', $("#myform").serialize(), function(data) {
        // Here you can remove the loading pic
        $("#myform").show(); // Show the form
        $('#results').html(data);
    });
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-19T15:33:18.853

```
$("#myform").submit(function(){
    $('#results').html('<img src="gifUrl" />');
}); 
```

或者正是在这种情况下

```
submitHandler: function(form) {
    $('#results').html('<img src="gifUrl" />');
    $.post('process_participant.php', $("#myform").serialize(), function(data) {
        $('#results').html(data);
    });
    } 
```

# c++ - 在 Netbeans 7.1 调试/测试会话中提升线程链接失败

> ID：11104280
> 
> 赞同：0
> 
> 时间：2012-06-19T15:26:40.200
> 
> 标签：c++, linux, boost, netbeans, boost-thread

我正在 Netbeans 上开发一个应用程序，而我可以运行它。我无法调试或重新运行测试文件。当我尝试这样做时，我得到：

```
./build/Debug/GNU-Linux-x86/tests/TestFiles/f1: error while loading shared libraries: libboost_thread.so.1.49.0: cannot open shared object file: No such file or directory 
```

它尝试在调试或测试会话中包含库或特定文件，但我继续得到它。会不会与 Netbeans 不一致？

任何想法将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T18:47:53.657

我假设您的操作系统是 Linux。从您的电子邮件中可以看出，您可以访问 libboost_thread.so.1.49.0 文件的副本。让 DIR 成为该库所在的目录。

如果您在这台计算机上没有超级用户，请使用方法 A。如果您有超级用户，请使用方法 A 或方法 B。

方法 A. 适用于非超级用户或超级用户。

令 DIR 为库 libboost_thread.so.1.49.0 所在的目录。

我假设您可以从 shell 命令行启动 NetBeans，而不是从 GUI 图标。

*   退出 NetBeans。在 bash 中执行以下命令：

    ```
    export LD_LIBRARY_PATH=DIR:$LD_LIBRARY_PATH 
    ```

*   从命令行启动 netbeans

最后，您需要将导出命令放入 ~/.bashrc 文件中。

方法 B。仅适用于超级用户。

如果您有超级用户，请使用以下方法之一将缺少的库放入 /usr/lib 或 /lib：

(1) 从 rpm 或 apt 或您的 linux 系统具有的任何软件包安装 boost，或

(2) 使用--prefix=/usr 从源安装boost，或者

(3) 将提到的库复制到/usr/lib。如果您必须使用 #3，请注意符号链接。使用“cp -a”复制并复制以 libboost_thread.so* 开头的所有文件，例如

```
 cp -a DIR/libboost_thread.so* /usr/lib 
```

# wordpress - Wordpress - 自定义分类法分页

> ID：11104284
> 
> 赞同：4
> 
> 时间：2012-06-19T15:26:56.800
> 
> 标签：wordpress, pagination, taxonomy

我在用着：

*   WordPress 3.4
*   WP-PageNavi 2.82

我注册了自定义分类（*目录*）

```
<?php

add_action('init', 'pca_register_taxonomy', 0);

function pca_register_taxonomy()
{
    register_taxonomy('catalog', null,
       array(
            'label' => __('Catalogs', __),
            'labels' => array(
                'name' => __('Catalogs', __),
                'singular_name' => __('Catalog', __),
                'search_items' => __('Search Catalogs', __),
                'popular_items' => __('Popular Catalogs', __),
                'all_items' => __('All Catalogs', __),
                'parent_item' => __('Parent Catalog', __),
                'parent_item_colon' => __('Parent Catalog', __),
                'edit_item' => __('Edit Catalog', __),
                'update_item' => __('Update Catalog', __),
                'add_new_item' => __('Add New Catalog', __),
                'new_item_name' => __('New Catalog Name', __),
                'separate_items_with_commas' => __('Separate catalogs with commas', __),
                'add_or_remove_items' => __('Add or remove catalogs', __),
                'choose_from_most_used' => __('Choose from the most used catalogs', __),
                'menu_name' => __('Catalogs', __)
            ),
            'public' => true,
            'show_in_nav_menus' => true,
            'show_ui' => true,
            'show_tagcloud' => false,
            'hierarchical' => true,
            'query_var' => true,
            'rewrite' => array(
                'slug' => 'catalog',
                'with_front' => true,
                'hierarchical' => true
            ),
            'capabilities' => array(
                'manage_terms',
                'edit_terms',
                'delete_terms',
                'assign_terms'
            )
        )
    );
}

?> 
```

我注册自定义帖子类型（*产品*）

```
<?php

add_action('init', 'pca_register_post_type');

function pca_register_post_type()
{
    register_post_type('product',
        array(
            'label' => __('Products', __),
            'labels' => array(
                'name' => __('Products', __),
                'singular_name' => __('Product', __),
                'add_new' => __('Add New', __),
                'add_new_item' => __('Add New Product', __),
                'edit_item' => __('Edit Product', __),
                'new_item' => __('New Product', __),
                'all_items' => __('All Products', __),
                'view_item' => __('View Product', __),
                'search_items' => __('Search Products', __),
                'not_found' =>  __('No products found', __),
                'not_found_in_trash' => __('No products found in Trash', __), 
                'parent_item_colon' => '',
                'menu_name' => __('Products', __)
            ),
            'description' => '',
            'public' => true,
            'exclude_from_search' => false,
            'publicly_queryable' => true,
            'show_ui' => true,
            'show_in_nav_menus' => true,
            'show_in_menu' => true,
            'show_in_admin_bar' => true,
            'menu_position' => 20,
            'capability_type' => 'post',
            'meta_cap' => true,
            'hierarchical' => false,
            'supports' => array(
                'title',
                'editor',
                'thumbnail',
                'page-attributes',
                'post-formats'
            ),
            'taxonomies' => array('catalog'),
            'has_archive' => false,
            'rewrite' => array(
                'slug' => 'products',
                'with_front' => true,
                'feeds' => false,
                'pages' => true
            ),
            'query_var' => true,
            'can_export' => true
        )
    );
}

?> 
```

然后我为税收创建一个新文件 - > **taxonomy-catalog.php**

在此文件中，我从指定目录（*tax ）中查询所有产品（**自定义帖子类型*）：

 *```
<?php

$paged = get_query_var('paged');
$paged = ($paged) ? $paged : 1;

$products = new WP_Query(array(
    'catalog' => $catalog_data->slug, // $catalog_data is the current taxonomy (woman)
    'post_type' => 'product',
    'posts_per_page' => 12,
    'paged' => $paged
));

?>

<?php while ($products->have_posts()) : $products->the_post(); ?>
// Show title, content ... everything ok
<?php endwhile; ?>

<?php if (function_exists('wp_pagenavi')) wp_pagenavi(array('query' => $products)); ?>
<?php wp_reset_postdata(); ?> 
```

分页显示正确，但是当我单击第 2 页或更多页面时，出现 404 错误。

*   作品 -> mywebsite.com/catalog/woman
*   不工作-> mywebsite.com/catalog/woman/page/2

我已经刷新了永久链接。

有什么办法解决这个问题吗？谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2015-07-06T07:41:21.093

将其放入您的“functions.php”中，然后重新生成永久链接。它对我有用！

```
function taxonomy_rewrite_fix($wp_rewrite) {
    $r = array();
    foreach($wp_rewrite->rules as $k=>$v){
        $r[$k] = str_replace('catalog=$matches[1]&paged=','catalog=$matches[1]&page=',$v);
    }
    $wp_rewrite->rules = $r;
}
add_filter('generate_rewrite_rules', 'taxonomy_rewrite_fix'); 
```

关键是将“paged”替换为“page”到自定义分类的重写规则中。

这是我在这里的第一个贡献。希望我能帮助你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-02-01T12:55:26.490

Once I have faced problem about this and passed hard times hrs to hrs by pulling hair. I googled and didn't found any specific solution about the topics. I found several talents' article but they weren't satisfying my problems. Actually custom taxonomy archive page pagination is depends on some settings of arguments of related functions. So I am actually going here sharing my thoughts of solving the taxonomy archive pagination problem.

Five things you need for custom taxonomy archive page pagination working perfectly :

( 1 ) Don't put `exclude_from_search` parameter key as `register_post_type` argument parameter or if mention set it `'exclude_from_search' => false`. By default it is set `false` if not mentioned.

( 2 ) The taxonomy that will be use with the custom post type set `'taxonomies' => 'custom_taxonomy_name'` as `register_post_type` argument parameter or
use `register_taxonomy_for_object_type()` directly. Custom taxonomies still need to be registered with `register_taxonomy()`.

( 3 ) While querying within `new WP_Query ($args)`

```
i ) If not set in admin `static front page` use before `new WP_Query($args)` 

$paged = ( get_query_var('paged') ) ? get_query_var('paged') : 1;
 and use $query = new WP_Query( array( 'paged' => $paged ) );

ii ) If set in admin static front page use before 'new WP_Query($args)'
  $paged = ( get_query_var('page') ) ? get_query_var('page') : 1;
  and use $query = new WP_Query( array( 'page' => $paged ) ); 
```

Remember to use `posts_per_page` and `paged` parameter in `new WP_Query($arg)` argument array. If not set `static front page` then you should use `page` parameter in `new WP_Query ($arg)` argument array

( 4 ) Use Wordpress `paginate_links( $args )` function like the example below to render pagination in archive template file.

```
<?php $big = 999999999; // need an unlikely integer
echo paginate_links( array(
                  'base' => str_replace( $big, '%#%', esc_url( get_pagenum_link( $big ) ) ),
                  'format' => '?paged=%#%',  or   '/paged=%#%',  // if using pretty permalink
                   'current' => max( 1, get_query_var('paged') ),
                   'total' => $query->max_num_pages ) ); // Here $max_num_pages is the properties of  new WP_Query() object . It is total number of pages. Is the result of $found_posts / $posts_per_page
 ?> 
```

( 5 ) The `paginate_links()` function output the `ul li` listing with `page-numbers` class. If you use bootstrap inject `pagination` class to the `ul` with the help of javascript or jquery and a nice fancy pagination will be output.

Hope you can now enjoy pagination in the taxonomy archive template without any 404 problem :-)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-09-23T18:27:25.610

**帮助我的是在阅读设置中将“博客页面最多显示”设置为 1。然后它就可以工作了。**

使用默认值 10，它会在第 2 页引发 404 错误。在第 1 页，一切都很完美。

因此，鉴于此工作，解决方案是仅针对您需要的那些分类法或类别将**“博客页面最多显示”设置为 1。**您应该在**functions.php**中放置的代码在这里：[https ://forums.envato.com/t/wordpress-custom-page-type-taxonomy-pagination/76549/12](https://forums.envato.com/t/wordpress-custom-page-type-taxonomy-pagination/76549/12)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-19T17:34:10.047

基本上就是这样

```
get_query_var('page') 
```

保存页码

从工作代码：

```
global $query_string;

$page_index = max(1, get_query_var('page'));

parse_str($query_string, $queryParams);
$queryParams['paged'] = $page_index;
$queryParams['posts_per_page'] = $posts_per_page;
query_posts($queryParams); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-06-21T09:02:04.123

使用 query_posts 而不是 wp_query。它应该工作。

这是我的代码。

```
 <?php             

$paged = (get_query_var('paged')) ? get_query_var('paged') : 1;

             $args = array(

            'paged' => $paged,

            'orderby' => 'asc',

                'tax_query' => array(

                    array(

                        'taxonomy' => "$term->taxonomy",

                        'terms' => "$term->name",

                        'field' => 'slug'  

                    )

                )

            );

            $query = new WP_Query( $args );
            if($query->have_posts() ) :   
// your code
?>  

<?php endwhile; endif; 
             wp_pagenavi();?> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-07-06T08:04:30.007

当您创建任何 CPT 时，您需要添加此功能。

```
flush_rewrite_rules();
```

它将管理/调整/重新分配您的记忆。
因此，请添加此行，您的代码将起作用。
预防。

```
1: Add this function : flush_rewrite_rules();
2:Your pagination function (wp_pagenavi()) will call just below the endwhile;
```

我敢肯定，您的分页会起作用，如果不起作用，请告诉我。
感谢您。*

# mapping - 将平面字段映射到顺序记录

> ID：11104285
> 
> 赞同：0
> 
> 时间：2012-06-19T15:26:58.123
> 
> 标签：mapping, biztalk, edi

我有一个定义“ShippingCharge”和“DiscountAmount”的源架构。我的目标架构是 EDI X12 850 消息。

![在此处输入图像描述](../Images/f2f172d59cdd729018a3c7d27418a8c1.png)

我需要为 SAC 循环创建两个“假”迭代。我需要一种方法来定义第一次迭代，使用 ShippingCharge，第二次使用 DiscountAmount。我需要将一些额外的“默认值”设置为 SAC01，这也取决于迭代（1 或 2）。

我应该使用什么 functoid？有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T02:24:53.783

您是否尝试过 Table Looping functoid？您可以使用表循环 functoid 使用输入链接（ShippingCharge 和 DiscountAmount）和常量（SAC01 值）定义多行。然后输出将遍历这些行并创建两个 SACLoop1 元素。

您还需要使用表提取器功能来处理表中的每个数据值。

可以在此处找到有关使用表循环和表提取器的完整说明：http: [//msdn.microsoft.com/en-us/library/aa559310%28v=bts.20%29.aspx](http://msdn.microsoft.com/en-us/library/aa559310%28v=bts.20%29.aspx)

# javascript - 检测视频点击

> ID：11104290
> 
> 赞同：1
> 
> 时间：2012-06-19T15:27:05.770
> 
> 标签：javascript, jquery

我嵌入了来自`youtube`. 我的代码是：

```
 <div id="video"><iframe width="100%" height="100%" 
   src="http://www.youtube.com/embed/Vv2RRaC9dC8?wmode=transparent" 
   frameborder="0" allowfullscreen></iframe></div> 
```

`onclick`附带一个事件`div#video`。但是因为这个视频，我不能开火。当我点击它时，视频开始播放。如何检测点击事件？

# bash - shell 脚本：如何验证函数是否返回 1 个文本行？

> ID：11104294
> 
> 赞同：1
> 
> 时间：2012-06-19T15:27:35.977
> 
> 标签：bash, shell, ksh

我尝试通过很多这样的函数生成一个 csv 文件：

```
function get_sudo_version {
  sudo -V 2>/dev/null|grep -i "sudo version"
}
sudo_version=$(get_sudo_version) 
```

上面的函数是一个简单的例子，但在某些情况下我不能确定输出是否正确。我想知道验证函数仅返回一个文本行的最佳方法是什么。

我想过类似的事情

```
function validate_output {  
  output=$1; 
  echo $1|grep -q "\n"; 
  echo $?; 
}

mytest="val1
err2
err3" 
```

但这显然不起作用，因为变量不保留重新运行的行字符：

```
echo $mytest
val1 err2 err3 
```

因此，如果有人对我如何编写通用检查功能有很好的了解，我会很高兴。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T19:40:49.330

如果你有 GNU grep，你*可以*简单地确保 grep 首先通过`grep -m 1`. 或者，使用`sed '/sudo version/!d;q'`而不是`grep`.

一个在传递输入行时简单地检查输入行的函数可能如下所示：

```
shopt -s lastpipe # if bash

# ksh or bash
validate_output() { 
    (( $(tee >(wc -l) >&2) == 1 ))
} 2>&1

# bash
validate_output2() {
    local lines
    tee /dev/fd/2 | mapfile -tc1 -C '((++lines < 2)) || return; :'
    ((lines))
} 2>&1

get_sudo_version | validate_output || echo failed 
```

当然，这可能有很多变化。IMO 这是毫无意义的，不应该用于这样的事情。只需设计您的`get_sudo_version`，以保证正确的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T15:38:27.533

您可以计算行数`wc -l`：

```
$ LINES="$(echo -n | wc -l)"; [[ "$LINES" -gt 0 ]] && echo 'at least one line'

$ LINES="$(echo -e 'a\nb\nc' | wc -l)"; [[ "$LINES" -gt 0 ]] && echo 'at least one line'
at least one line 
```

# php - 黑客后门脚本？

> ID：11104295
> 
> 赞同：3
> 
> 时间：2012-06-19T15:27:39.920
> 
> 标签：php

我发现此脚本附加到修改后的索引页面。这看起来像是某种后门。这个 SAPE 是谁？

```
<?php

class SAPE_base {

    var $_version = '1.0.8';

    var $_verbose = false;

    var $_charset = '';

    var $_sape_charset = '';

    var $_server_list = array('dispenser-01.sape.ru', 'dispenser-02.sape.ru');

    var $_cache_lifetime = 3600;

    var $_cache_reloadtime = 600;

    var $_error = '';

    var $_host = '';

    var $_request_uri = '';

    var $_multi_site = false;

    var $_fetch_remote_type = '';

    var $_socket_timeout = 6;

    var $_force_show_code = false;

    var $_is_our_bot = false;

    var $_debug = false;

    var $_ignore_case = false;

    var $_db_file = '';

    var $_use_server_array = false;

    var $_force_update_db = false;

    function SAPE_base($options = null) {

        $host = '';

        if (is_array($options)) {
            if (isset($options['host'])) {
                $host = $options['host'];
            }
        }
        elseif (strlen($options)) {
            $host    = $options;
            $options = array();
        }
        else {
            $options = array();
        }

        if (isset($options['use_server_array']) && $options['use_server_array'] == true) {
            $this->_use_server_array = true;
        }

        if (strlen($host)) {
            $this->_host = $host;
        }
        else {
            $this->_host = $_SERVER['HTTP_HOST'];
        }

        $this->_host = preg_replace('/^http:\/\//', '', $this->_host);
        $this->_host = preg_replace('/^www\./', '', $this->_host);

        if (isset($options['request_uri']) && strlen($options['request_uri'])) {
            $this->_request_uri = $options['request_uri'];
        }
        elseif ($this->_use_server_array === false) {
            $this->_request_uri = getenv('REQUEST_URI');
        }

        if (strlen($this->_request_uri) == 0) {
            $this->_request_uri = $_SERVER['REQUEST_URI'];
        }

        if (isset($options['multi_site']) && $options['multi_site'] == true) {
            $this->_multi_site = true;
        }

        if (isset($options['debug']) && $options['debug'] == true) {
            $this->_debug = true;
        }

        if (isset($_COOKIE['sape_cookie']) && ($_COOKIE['sape_cookie'] == _SAPE_USER)) {
            $this->_is_our_bot = true;
            if (isset($_COOKIE['sape_debug']) && ($_COOKIE['sape_debug'] == 1)) {
                $this->_debug              = true;
                $this->_options            = $options;
                $this->_server_request_uri = $this->_request_uri = $_SERVER['REQUEST_URI'];
                $this->_getenv_request_uri = getenv('REQUEST_URI');
                $this->_SAPE_USER          = _SAPE_USER;
            }
            if (isset($_COOKIE['sape_updatedb']) && ($_COOKIE['sape_updatedb'] == 1)) {
                $this->_force_update_db = true;
            }
        }
        else {
            $this->_is_our_bot = false;
        }

        if (isset($options['verbose']) && $options['verbose'] == true || $this->_debug) {
            $this->_verbose = true;
        }

        if (isset($options['charset']) && strlen($options['charset'])) {
            $this->_charset = $options['charset'];
        }
        else {
            $this->_charset = 'windows-1251';
        }

        if (isset($options['fetch_remote_type']) && strlen($options['fetch_remote_type'])) {
            $this->_fetch_remote_type = $options['fetch_remote_type'];
        }

        if (isset($options['socket_timeout']) && is_numeric($options['socket_timeout']) && $options['socket_timeout'] > 0) {
            $this->_socket_timeout = $options['socket_timeout'];
        }

        if (isset($options['force_show_code']) && $options['force_show_code'] == true) {
            $this->_force_show_code = true;
        }

        if (!defined('_SAPE_USER')) {
            return $this->raise_error('Не задана константа _SAPE_USER');
        }

        if (isset($options['ignore_case']) && $options['ignore_case'] == true) {
            $this->_ignore_case = true;
            $this->_request_uri = strtolower($this->_request_uri);
        }
    }

    function fetch_remote_file($host, $path) {

        $user_agent = $this->_user_agent . ' ' . $this->_version;

        @ini_set('allow_url_fopen', 1);
        @ini_set('default_socket_timeout', $this->_socket_timeout);
        @ini_set('user_agent', $user_agent);
        if (
            $this->_fetch_remote_type == 'file_get_contents'
            ||
            (
                $this->_fetch_remote_type == ''
                &&
                function_exists('file_get_contents')
                &&
                ini_get('allow_url_fopen') == 1
            )
        ) {
            $this->_fetch_remote_type = 'file_get_contents';
            if ($data = @file_get_contents('http://' . $host . $path)) {
                return $data;
            }

        }
        elseif (
            $this->_fetch_remote_type == 'curl'
            ||
            (
                $this->_fetch_remote_type == ''
                &&
                function_exists('curl_init')
            )
        ) {
            $this->_fetch_remote_type = 'curl';
            if ($ch = @curl_init()) {

                @curl_setopt($ch, CURLOPT_URL, 'http://' . $host . $path);
                @curl_setopt($ch, CURLOPT_HEADER, false);
                @curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
                @curl_setopt($ch, CURLOPT_CONNECTTIMEOUT, $this->_socket_timeout);
                @curl_setopt($ch, CURLOPT_USERAGENT, $user_agent);

                if ($data = @curl_exec($ch)) {
                    return $data;
                }

                @curl_close($ch);
            }

        }
        else {
            $this->_fetch_remote_type = 'socket';
            $buff                     = '';
            $fp                       = @fsockopen($host, 80, $errno, $errstr, $this->_socket_timeout);
            if ($fp) {
                @fputs($fp, "GET {$path} HTTP/1.0\r\nHost: {$host}\r\n");
                @fputs($fp, "User-Agent: {$user_agent}\r\n\r\n");
                while (!@feof($fp)) {
                    $buff .= @fgets($fp, 128);
                }
                @fclose($fp);

                $page = explode("\r\n\r\n", $buff);

                return $page[1];
            }

        }

        return $this->raise_error('Не могу подключиться к серверу: ' . $host . $path . ', type: ' . $this->_fetch_remote_type);
    }

    function _read($filename) {

        $fp = @fopen($filename, 'rb');
        @flock($fp, LOCK_SH);
        if ($fp) {
            clearstatcache();
            $length = @filesize($filename);
            $mqr    = @get_magic_quotes_runtime();
            @set_magic_quotes_runtime(0);
            if ($length) {
                $data = @fread($fp, $length);
            }
            else {
                $data = '';
            }
            @set_magic_quotes_runtime($mqr);
            @flock($fp, LOCK_UN);
            @fclose($fp);

            return $data;
        }

        return $this->raise_error('Не могу считать данные из файла: ' . $filename);
    }

    function _write($filename, $data) {

        $fp = @fopen($filename, 'ab');
        if ($fp) {
            if (flock($fp, LOCK_EX | LOCK_NB)) {
                $length = strlen($data);
                ftruncate($fp, 0);
                @fwrite($fp, $data, $length);
                @flock($fp, LOCK_UN);
                @fclose($fp);

                if (md5($this->_read($filename)) != md5($data)) {
                    @unlink($filename);
                    return $this->raise_error('Нарушена целостность данных при записи в файл: ' . $filename);
                }
            }
            else {
                return false;
            }

            return true;
        }

        return $this->raise_error('Не могу записать данные в файл: ' . $filename);
    }

    function raise_error($e) {

        $this->_error = '<p style="color: red; font-weight: bold;">SAPE ERROR: ' . $e . '</p>';

        if ($this->_verbose == true) {
            print $this->_error;
        }

        return false;
    }

    function load_data() {
        $this->_db_file = $this->_get_db_file();

        if (!is_file($this->_db_file)) {
            if (@touch($this->_db_file)) {
                @chmod($this->_db_file, 0666);
            }
            else {
                return $this->raise_error('Нет файла ' . $this->_db_file . '. Создать не удалось. Выставите права 777 на папку.');
            }
        }

        if (!is_writable($this->_db_file)) {
            return $this->raise_error('Нет доступа на запись к файлу: ' . $this->_db_file . '! Выставите права 777 на папку.');
        }

        @clearstatcache();

        $data = $this->_read($this->_db_file);
        if (
            $this->_force_update_db
            || (
                !$this->_is_our_bot
                &&
                (
                    filemtime($this->_db_file) < (time() - $this->_cache_lifetime)
                    ||
                    filesize($this->_db_file) == 0
                    ||
                    @unserialize($data) == false
                )
            )
        ) {
            @touch($this->_db_file, (time() - $this->_cache_lifetime + $this->_cache_reloadtime));

            $path = $this->_get_dispenser_path();
            if (strlen($this->_charset)) {
                $path .= '&charset=' . $this->_charset;
            }

            foreach ($this->_server_list as $i => $server) {
                if ($data = $this->fetch_remote_file($server, $path)) {
                    if (substr($data, 0, 12) == 'FATAL ERROR:') {
                        $this->raise_error($data);
                    }
                    else {

                        $hash = @unserialize($data);
                        if ($hash != false) {

                            $hash['__sape_charset__']      = $this->_charset;
                            $hash['__last_update__']       = time();
                            $hash['__multi_site__']        = $this->_multi_site;
                            $hash['__fetch_remote_type__'] = $this->_fetch_remote_type;
                            $hash['__ignore_case__']       = $this->_ignore_case;
                            $hash['__php_version__']       = phpversion();
                            $hash['__server_software__']   = $_SERVER['SERVER_SOFTWARE'];

                            $data_new = @serialize($hash);
                            if ($data_new) {
                                $data = $data_new;
                            }

                            $this->_write($this->_db_file, $data);
                            break;
                        }
                    }
                }
            }
        }

        if (strlen(session_id())) {
            $session            = session_name() . '=' . session_id();
            $this->_request_uri = str_replace(array('?' . $session, '&' . $session), '', $this->_request_uri);
        }

        $this->set_data(@unserialize($data));
    }
}

class SAPE_client extends SAPE_base {

    var $_links_delimiter = '';
    var $_links = array();
    var $_links_page = array();
    var $_user_agent = 'SAPE_Client PHP';

    function SAPE_client($options = null) {
        parent::SAPE_base($options);
        $this->load_data();
    }

    function return_links($n = null, $offset = 0) {

        if (is_array($this->_links_page)) {

            $total_page_links = count($this->_links_page);

            if (!is_numeric($n) || $n > $total_page_links) {
                $n = $total_page_links;
            }

            $links = array();

            for ($i = 1; $i <= $n; $i++) {
                if ($offset > 0 && $i <= $offset) {
                    array_shift($this->_links_page);
                }
                else {
                    $links[] = array_shift($this->_links_page);
                }
            }

            $html = join($this->_links_delimiter, $links);

            if (
                strlen($this->_charset) > 0
                &&
                strlen($this->_sape_charset) > 0
                &&
                $this->_sape_charset != $this->_charset
                &&
                function_exists('iconv')
            ) {
                $new_html = @iconv($this->_sape_charset, $this->_charset, $html);
                if ($new_html) {
                    $html = $new_html;
                }
            }

            if ($this->_is_our_bot) {
                $html = '<sape_noindex>' . $html . '</sape_noindex>';
            }
        }
        else {
            $html = $this->_links_page;
        }

        if ($this->_debug) {
            $html .= print_r($this, true);
        }

        return $html;
    }

    function _get_db_file() {
        if ($this->_multi_site) {
            return dirname(__FILE__) . '/' . $this->_host . '.links.db';
        }
        else {
            return dirname(__FILE__) . '/links.db';
        }
    }

    function _get_dispenser_path() {
        return '/code.php?user=' . _SAPE_USER . '&host=' . $this->_host;
    }

    function set_data($data) {
        if ($this->_ignore_case) {
            $this->_links = array_change_key_case($data);
        }
        else {
            $this->_links = $data;
        }
        if (isset($this->_links['__sape_delimiter__'])) {
            $this->_links_delimiter = $this->_links['__sape_delimiter__'];
        }
        if (isset($this->_links['__sape_charset__'])) {
            $this->_sape_charset = $this->_links['__sape_charset__'];
        }
        else {
            $this->_sape_charset = '';
        }
        if (@array_key_exists($this->_request_uri, $this->_links) && is_array($this->_links[$this->_request_uri])) {
            $this->_links_page = $this->_links[$this->_request_uri];
        }
        else {
            if (isset($this->_links['__sape_new_url__']) && strlen($this->_links['__sape_new_url__'])) {
                if ($this->_is_our_bot || $this->_force_show_code) {
                    $this->_links_page = $this->_links['__sape_new_url__'];
                }
            }
        }
    }
}

class SAPE_context extends SAPE_base {

    var $_words = array();
    var $_words_page = array();
    var $_user_agent = 'SAPE_Context PHP';
    var $_filter_tags = array('a', 'textarea', 'select', 'script', 'style', 'label', 'noscript', 'noindex', 'button');

    function SAPE_context($options = null) {
        parent::SAPE_base($options);
        $this->load_data();
    }

    function replace_in_text_segment($text) {
        $debug = '';
        if ($this->_debug) {
            $debug .= "<!-- argument for replace_in_text_segment: \r\n" . base64_encode($text) . "\r\n -->";
        }
        if (count($this->_words_page) > 0) {

            $source_sentence = array();
            if ($this->_debug) {
                $debug .= '<!-- sentences for replace: ';
            }
            foreach ($this->_words_page as $n => $sentence) {
                //Заменяем все сущности на символы
                $special_chars = array(
                    '&amp;'  => '&',
                    '&quot;' => '"',
                    '&#039;' => '\'',
                    '&lt;'   => '<',
                    '&gt;'   => '>'
                );
                $sentence      = strip_tags($sentence);
                foreach ($special_chars as $from => $to) {
                    str_replace($from, $to, $sentence);
                }
                $sentence      = htmlspecialchars($sentence);
                $sentence      = preg_quote($sentence, '/');
                $replace_array = array();
                if (preg_match_all('/(&[#a-zA-Z0-9]{2,6};)/isU', $sentence, $out)) {
                    for ($i = 0; $i < count($out[1]); $i++) {
                        $unspec                 = $special_chars[$out[1][$i]];
                        $real                   = $out[1][$i];
                        $replace_array[$unspec] = $real;
                    }
                }
                foreach ($replace_array as $unspec => $real) {
                    $sentence = str_replace($real, '((' . $real . ')|(' . $unspec . '))', $sentence);
                }
                $source_sentences[$n] = str_replace(' ', '((\s)|(&nbsp;))+', $sentence);

                if ($this->_debug) {
                    $debug .= $source_sentences[$n] . "\r\n\r\n";
                }
            }

            if ($this->_debug) {
                $debug .= '-->';
            }

            $first_part = true;

            if (count($source_sentences) > 0) {

                $content   = '';
                $open_tags = array();
                $close_tag = '';

                $part = strtok(' ' . $text, '<');

                while ($part !== false) {

                    if (preg_match('/(?si)^(\/?[a-z0-9]+)/', $part, $matches)) {

                        $tag_name = strtolower($matches[1]);

                        if (substr($tag_name, 0, 1) == '/') {
                            $close_tag = substr($tag_name, 1);
                            if ($this->_debug) {
                                $debug .= '<!-- close_tag: ' . $close_tag . ' -->';
                            }
                        }
                        else {
                            $close_tag = '';
                            if ($this->_debug) {
                                $debug .= '<!-- open_tag: ' . $tag_name . ' -->';
                            }
                        }
                        $cnt_tags = count($open_tags);

                        if (($cnt_tags > 0) && ($open_tags[$cnt_tags - 1] == $close_tag)) {
                            array_pop($open_tags);
                            if ($this->_debug) {
                                $debug .= '<!-- ' . $tag_name . ' - deleted from open_tags -->';
                            }
                            if ($cnt_tags - 1 == 0) {
                                if ($this->_debug) {
                                    $debug .= '<!-- start replacement -->';
                                }
                            }
                        }

                        if (count($open_tags) == 0) {

                            if (!in_array($tag_name, $this->_filter_tags)) {
                                $split_parts = explode('>', $part, 2);

                                if (count($split_parts) == 2) {

                                    foreach ($source_sentences as $n => $sentence) {
                                        if (preg_match('/' . $sentence . '/', $split_parts[1]) == 1) {
                                            $split_parts[1] = preg_replace('/' . $sentence . '/', str_replace('$', '\$', $this->_words_page[$n]), $split_parts[1], 1);
                                            if ($this->_debug) {
                                                $debug .= '<!-- ' . $sentence . ' --- ' . $this->_words_page[$n] . ' replaced -->';
                                            }

                                            unset($source_sentences[$n]);
                                            unset($this->_words_page[$n]);
                                        }
                                    }
                                    $part = $split_parts[0] . '>' . $split_parts[1];
                                    unset($split_parts);
                                }
                            }
                            else {

                                $open_tags[] = $tag_name;
                                if ($this->_debug) {
                                    $debug .= '<!-- ' . $tag_name . ' - added to open_tags, stop replacement -->';
                                }
                            }
                        }
                    }
                    else {

                        foreach ($source_sentences as $n => $sentence) {
                            if (preg_match('/' . $sentence . '/', $part) == 1) {
                                $part = preg_replace('/' . $sentence . '/', str_replace('$', '\$', $this->_words_page[$n]), $part, 1);

                                if ($this->_debug) {
                                    $debug .= '<!-- ' . $sentence . ' --- ' . $this->_words_page[$n] . ' replaced -->';
                                }

                                unset($source_sentences[$n]);
                                unset($this->_words_page[$n]);
                            }
                        }
                    }

                    if ($this->_debug) {
                        $content .= $debug;
                        $debug = '';
                    }

                    if ($first_part) {
                        $content .= $part;
                        $first_part = false;
                    }
                    else {
                        $content .= $debug . '<' . $part;
                    }

                    unset($part);
                    $part = strtok('<');
                }
                $text = ltrim($content);
                unset($content);
            }
        }
        else {
            if ($this->_debug) {
                $debug .= '<!-- No word`s for page -->';
            }
        }

        if ($this->_debug) {
            $debug .= '<!-- END: work of replace_in_text_segment() -->';
        }

        if ($this->_is_our_bot || $this->_force_show_code || $this->_debug) {
            $text = '<sape_index>' . $text . '</sape_index>';
            if (isset($this->_words['__sape_new_url__']) && strlen($this->_words['__sape_new_url__'])) {
                $text .= $this->_words['__sape_new_url__'];
            }
        }

        if ($this->_debug) {
            if (count($this->_words_page) > 0) {
                $text .= '<!-- Not replaced: ' . "\r\n";
                foreach ($this->_words_page as $n => $value) {
                    $text .= $value . "\r\n\r\n";
                }
                $text .= '-->';
            }

            $text .= $debug;
        }
        return $text;
    }

    function replace_in_page(&$buffer) {

        if (count($this->_words_page) > 0) {

            $split_content = preg_split('/(?smi)(<\/?sape_index>)/', $buffer, -1);
            $cnt_parts     = count($split_content);
            if ($cnt_parts > 1) {
                //Если есть хоть одна пара sape_index, то начинаем работу
                if ($cnt_parts >= 3) {
                    for ($i = 1; $i < $cnt_parts; $i = $i + 2) {
                        $split_content[$i] = $this->replace_in_text_segment($split_content[$i]);
                    }
                }
                $buffer = implode('', $split_content);
                if ($this->_debug) {
                    $buffer .= '<!-- Split by Sape_index cnt_parts=' . $cnt_parts . '-->';
                }
            }
            else {

                $split_content = preg_split('/(?smi)(<\/?body[^>]*>)/', $buffer, -1, PREG_SPLIT_DELIM_CAPTURE);

                if (count($split_content) == 5) {
                    $split_content[0] = $split_content[0] . $split_content[1];
                    $split_content[1] = $this->replace_in_text_segment($split_content[2]);
                    $split_content[2] = $split_content[3] . $split_content[4];
                    unset($split_content[3]);
                    unset($split_content[4]);
                    $buffer = $split_content[0] . $split_content[1] . $split_content[2];
                    if ($this->_debug) {
                        $buffer .= '<!-- Split by BODY -->';
                    }
                }
                else {

                    if ($this->_debug) {
                        $buffer .= '<!-- Can`t split by BODY -->';
                    }
                }
            }

        }
        else {
            if (!$this->_is_our_bot && !$this->_force_show_code && !$this->_debug) {
                $buffer = preg_replace('/(?smi)(<\/?sape_index>)/', '', $buffer);
            }
            else {
                if (isset($this->_words['__sape_new_url__']) && strlen($this->_words['__sape_new_url__'])) {
                    $buffer .= $this->_words['__sape_new_url__'];
                }
            }
            if ($this->_debug) {
                $buffer .= '<!-- No word`s for page -->';
            }
        }
        return $buffer;
    }

    function _get_db_file() {
        if ($this->_multi_site) {
            return dirname(__FILE__) . '/' . $this->_host . '.words.db';
        }
        else {
            return dirname(__FILE__) . '/words.db';
        }
    }

    function _get_dispenser_path() {
        return '/code_context.php?user=' . _SAPE_USER . '&host=' . $this->_host;
    }

    function set_data($data) {
        $this->_words = $data;
        if (@array_key_exists($this->_request_uri, $this->_words) && is_array($this->_words[$this->_request_uri])) {
            $this->_words_page = $this->_words[$this->_request_uri];
        }
    }
}

?> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-19T15:32:36.380

Sape 显然是说俄语的僵尸网络所有者使用的链接交换服务。

该后门似乎使用 sape API 下载 XML 并使用机器人创建一个“上下文”，该“上下文”可能会单击链接以产生非法收入。

从 sape.ru 的糟糕谷歌过渡：

> Sape 系统增加了收入并减少了站长优化器的消耗。场馆开始出售这个地方，不仅从主页，而且从内部。网站上有多少页？让每一笔收入。优化人员正在购买廉价的内部页面并节省移动项目。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T15:34:26.310

我的俄语不是很好，但 sape.ru 看起来像是某种链接交换服务。并回答您的问题“谁是 SAPE”：

```
[david@archtower ~]$ whois sape.ru
% By submitting a query to RIPN's Whois Service
% you agree to abide by the following terms of use:
% http://www.ripn.net/about/servpol.html#3.2 (in Russian) 
% http://www.ripn.net/about/en/servpol.html#3.2 (in English).

domain:        SAPE.RU
nserver:       ns1.q0.ru.
nserver:       ns2.q0.ru.
nserver:       ns3.q0.ru.
state:         REGISTERED, DELEGATED, VERIFIED
org:           LTD Sape
registrar:     R01-REG-RIPN
admin-contact: https://partner.r01.ru/contact_admin.khtml
created:       2006.06.20
paid-till:     2013.06.20
free-date:     2013.07.21
source:        TCI

Last updated on 2012.06.19 19:28:42 MSK

[david@archtower ~]$ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T15:31:33.883

乍一看似乎是自动访问广告推荐链接的东西。

# php - php cookie 帮助

> ID：11104297
> 
> 赞同：0
> 
> 时间：2012-06-19T15:27:48.077
> 
> 标签：php, setcookie

也许我错过了一些东西，但我不确定。我所做的只是设置cookies，以便我以后可以检索它们的值。我试图实现这样的事情，但无济于事......不知道为什么它不工作，因为它并不那么困难。

1.  我有一个简单的登录表格，你知道，用户名/密码等......没什么特别的。

2.  成功登录后，我有这样的事情：

    //这里有饼干的详细信息

    ```
    setcookie('username4pc',$userName);
    setcookie('userpass4pc',$userPass);

    header("Location:testCookie.php"); 
    ```

我确保这是在 HTML 标记之前以及在任何内容输出到页面之前进行的。如此之多，我从我正在处理的程序中取出上述内容并将其放在一个空白的 html 页面上进行测试，现在它看起来像这样......

点击索引页上的“登录”后，它进入我的新测试页面，只有这个：

```
<?php
setcookie('username4pc',$userName);
setcookie('userpass4pc',$userPass);
header("Location:testCookie.php");
?>
<html></html> 
```

在上述运行之后，标题将它扔到`testCookie.php`只有这个的页面

```
<?php
//test cookie

if(isset($_COOKIE['first_name'])){
    echo " cookies set";

} else {
    echo "cookie not set";  
} 
?>
<html></html> 
```

不管我做什么，我总是得到“cookie not set”

关于为什么以及出了什么问题的任何想法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-19T15:29:32.273

您访问的 cookie 错误，应该是：

```
if(isset($_COOKIE['username4pc'])){
or
if(isset($_COOKIE['userpass4pc'])){ 
```

一个简单的`var_dump($_COOKIE)`将向您显示 cookie 数组中的确切内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T15:37:55.147

我看到的第一件事是你正在设置和检查两个不同的东西。

您正在检查的内容：

```
isset($_COOKIE['first_name']) 
```

你在设置什么

```
setcookie('username4pc',$userName);
setcookie('userpass4pc',$userPass); 
```

# android - 用于 TableRow 内多个 TextView 的 onTouchListener

> ID：11104301
> 
> 赞同：3
> 
> 时间：2012-06-19T15:28:05.143
> 
> 标签：android, textview, ontouchlistener

到目前为止，我已经连续搜索了几个小时，但没有找到任何适合我的问题的解决方案。

我正在摆弄我的 android 应用程序并尝试制作数独游戏。

TableLayout 由 9 个 TableRows 组成，每个 TableRows 包含 9 个 TextView。因此 9*9 网格包含 81 个 TextView，每个都有一个 OnTouchListener：

```
final OnTouchListener cellTouch = new OnTouchListener() {
    public boolean onTouch(View v, MotionEvent e) {
        Log.d("TOUCH", "id: "+v.getId() + " "+e.toString());

        final int action = e.getAction();

        switch (action) {
            case MotionEvent.ACTION_DOWN: {
                // set background to different colour
                // set background back if this is different TextView

                break;
            }
            case MotionEvent.ACTION_MOVE: {

                break;
            }               
        }

        return true;
    }       
}; 
```

OnTouch 会在每个单独的 TextView 上触发，但在触摸一个并移动轨迹球后会发生以下情况：

*   ACTION_DOWN
*   ACTION_MOVE 的数量
*   ACTION_UP

但是，我想要 OnTouch 触发其他 TextView 并使它们突出显示。我创建单元格的方式如下所示：

```
 TextView cellLabel = (TextView) inflater.inflate(R.layout.sudoku_cell, tr, false);
            cellLabel.setId(curCellId);
            cellLabel.setText(""+ curCellId);

            cellLabel.setOnTouchListener(cellTouch);
            cellLabel.setOnFocusChangeListener(cellFocus);
            cellLabel.setOnClickListener(cellClick);
            cellLabel.setFocusable(true);
            cellLabel.setClickable(true);
            cellLabel.setFocusableInTouchMode(true); 
```

每个单独的单元格：

```
<TextView xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_height="35dp"
android:layout_weight="1"
android:textSize="18dp"
android:textColor="#FFFFFF"
android:gravity="center"
android:background="@layout/border"
/> 
```

我一直在尝试很多不同的东西。比如确定TextView的指针在上面，但没有任何运气。

希望你们中的任何人都有一个想法。感谢您的时间。

亲切的问候。

**编辑**

搜索函数循环遍历 TextView[][] 并找到相应的单元格。但是，只能在行的基础上工作。如果我从一排切换到另一排，它不起作用。

```
private TextView getCell (View v, MotionEvent e) {
    float x = e.getX();
    float y = e.getY();

    for (int i = 0; i < GRID_HEIGHT; i++) {
        for (int j = 0; j < GRID_WIDTH; j++) {
            TextView tv = tvGrid[i][j];

            Rect rectView = new Rect(tv.getLeft(), tv.getTop(), tv.getRight(), tv.getBottom());         

            if(rectView.contains((int)x, (int)y)) {
                return tv;
            }
        }
    }

    return null;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T07:21:51.310

这是我自己尝试的代码：

布局只是一个带有 3 个 TableRows 的 TableLayout，每个 TableRow 包含 3 个 TextView，其 id 为 t1、t2、..、t9

和活动：

```
public class ImgActivity extends Activity {

protected Map<View, Rect> cells = new HashMap<View, Rect>();

protected boolean hasCoordinatesPopulated;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    final TableLayout table = (TableLayout) findViewById(R.id.table);
    table.getViewTreeObserver().addOnGlobalLayoutListener(new OnGlobalLayoutListener() {
        @Override
        public void onGlobalLayout() {
            if (!hasCoordinatesPopulated) {
                View view = table.findViewById(R.id.t1);
                Rect rect = getRawCoordinatesRect(view);
                cells.put(view, rect);

                view = table.findViewById(R.id.t2);
                rect = getRawCoordinatesRect(view);
                cells.put(view, rect);

                view = table.findViewById(R.id.t3);
                rect = getRawCoordinatesRect(view);
                cells.put(view, rect);

                view = table.findViewById(R.id.t4);
                rect = getRawCoordinatesRect(view);
                cells.put(view, rect);

                view = table.findViewById(R.id.t5);
                rect = getRawCoordinatesRect(view);
                cells.put(view, rect);

                view = table.findViewById(R.id.t6);
                rect = getRawCoordinatesRect(view);
                cells.put(view, rect);

                view = table.findViewById(R.id.t7);
                rect = getRawCoordinatesRect(view);
                cells.put(view, rect);

                view = table.findViewById(R.id.t8);
                rect = getRawCoordinatesRect(view);
                cells.put(view, rect);

                view = table.findViewById(R.id.t9);
                rect = getRawCoordinatesRect(view);
                cells.put(view, rect);

                hasCoordinatesPopulated = true;
            }
        }

        private Rect getRawCoordinatesRect(final View view) {
            int[] coords = new int[2];
            view.getLocationOnScreen(coords);
            Rect rect = new Rect();
            rect.left = coords[0];
            rect.top = coords[1];
            rect.right = rect.left + view.getWidth();
            rect.bottom = rect.top + view.getHeight();
            return rect;
        }
    });
    table.setOnTouchListener(new OnTouchListener() {
        @Override
        public boolean onTouch(final View v, final MotionEvent event) {
            if (event.getAction() == MotionEvent.ACTION_DOWN || event.getAction() == MotionEvent.ACTION_MOVE) {
                final int x = (int) event.getRawX();
                final int y = (int) event.getRawY();
                for (final Entry<View, Rect> entry : cells.entrySet()) {
                    final View view = entry.getKey();
                    final Rect rect = entry.getValue();
                    if (rect.contains(x, y)) {
                        view.setBackgroundColor(Color.CYAN);
                    } else {
                        view.setBackgroundColor(Color.TRANSPARENT);
                    }
                }
                return true;
            }
            return false;
        }
    });
} 
```

}

当然，这是一个快速示例变体。您可以将最后选择的视图存储在单独的字段中（以在移动时取消选择），当找到指针下方的元素时，只需`break`循环节省一些时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T15:35:05.737

您是否尝试过以下方法：

1.  获取所有文本视图的原始坐标并将它们存储在地图中，键是您的 TextView（或 id），值是它的坐标和所需空间的 Rect。

2.  在您的 tableview 上设置一个 ontouchlistener，然后，当用户移动或触摸某物时，您可以获得指针的原始坐标，遍历您的地图条目并找到当前下方的 TextView

?

PS这是我脑海中浮现的第一个想法。我很确定 android 可以提供更优雅的解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T09:38:26.160

现在就像一个魅力。非常感谢：>

**编辑：添加了 handleCell()**

```
// Initialization
grid.getViewTreeObserver().addOnGlobalLayoutListener(new OnGlobalLayoutListener() {
        public void onGlobalLayout() {
            if (!populatedCells) {
                handlePopulate();
                populatedCells = true;  
            }
        }
    });

private void handlePopulate () {
    int curCellId = 0;

    for (int i = 0; i < GRID_HEIGHT; i++) {
        for (int j = 0; j < GRID_WIDTH; j++) {
            TextView tv = (TextView) findViewById(curCellId);
            Rect rect = getRawCoordinatesRect(tv);
            Log.d("RECT", "id: "+tv.getId()+" "+rect.toString());

            cells.put(tv, rect);

            curCellId++;
        }
    }
}

// Listener
final OnTouchListener cellTouch = new OnTouchListener() {
    public boolean onTouch(View v, MotionEvent e) {

        final int action = e.getAction();

        switch (action) {
            case MotionEvent.ACTION_DOWN:               
            case MotionEvent.ACTION_MOVE: {
                handleCell(v,e);

                break;
            }               
        }

        return true;
    }       
};

private TextView getCell (View v, MotionEvent e) {
    int x = (int) e.getRawX();
    int y = (int) e.getRawY();

    for (final Entry<View, Rect> entry : cells.entrySet()) {
        final View view = entry.getKey();
        final Rect rect = entry.getValue();

        if(rect.contains(x, y)) {
            return (TextView) view;
        }
    }

    return null;
}

private void handleCell (View v, MotionEvent e) {
    TextView cell = getCell(v, e);

    if (cell != null) {         
        cell.setBackgroundResource(R.layout.border_cell_current);

        curCell = (TextView) cell;

        // do something
    }
} 
```

# c# - 有没有办法将组合成单个字符串的多个路径转换为单独的 href 链接？

> ID：11104302
> 
> 赞同：0
> 
> 时间：2012-06-19T15:28:05.853
> 
> 标签：c#, winforms, string

有没有办法将数据库字段中的多个路径转换为单独的 href 链接？例如：

```
c:\MyPath\SomeFile.pdf;c:\MyPath\AnotherFile.pdf;c:\MyPath\LastFile.pdf 
```

我可以将上面的单个路径编程到链接中，但我使用的 SQL DB 最多可以有 3 个单独的路径指向其中的文件。

所以例如我可以把这个：

```
c:\MyPath\SomeFile.pdf 
```

进入此链接（并使其可点击）：

```
\\1.1.1.1\c$\MyPath\SomeFile.pdf 
```

我目前可以通过创建一些变量来保存路径和字段中的数据来做到这一点：

```
string UNCPath = "\\\\1.1.1.1\\c$\\";
string PathToFile = (dgv[e.ColumnIndex, e.RowIndex].Value.ToString());
System.Diagnostics.Process.Start(temp1 + temp2); 
```

关于上述内容的一些补充说明：

*   我还将冒号更改为美元
*   当然IP和路径等都是假的

问题是如果该字段有多个字段，我不确定该怎么做。

我正在考虑一个右键菜单，它显示所有 3 个（或 2 个或 1 个）路径并使它们可点击。

或者我必须打开另一个列出它们的表单页面......类似于上面的行。

这些方法对我来说似乎不是一个很好的方法。

有没有其他体面的方法来做到这一点？

# android - 如何通过 sqlite.exe 访问我的 sqlite 数据库？

> ID：11104304
> 
> 赞同：-1
> 
> 时间：2012-06-19T15:28:14.707
> 
> 标签：android, sqlite

我在调试期间发现我的数据库位于：/data/data/package-name/databases/... 我如何从 sqlite.exe（或使用其他工具）访问此数据库以运行查询/检查我的表以确保所有字段都正确？

非常感谢！乌迪

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T15:30:18.327

您可以从 shell 到模拟器使用 sqlite3 util。

这里的说明：

[http://developer.android.com/guide/developing/tools/sqlite3.html](http://developer.android.com/guide/developing/tools/sqlite3.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T16:05:36.657

**SQLite 数据库浏览器**是一个免费软件、公共领域、开源可视化工具，用于创建、设计和编辑与 SQLite 兼容的数据库文件。[你可以在这里找到它](http://sourceforge.net/projects/sqlitebrowser/)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-19T16:12:15.050

正如 Ran 建议的那样，您可以使用上述链接中的步骤，您需要使用命令提示符。

如果您使用的是 Eclipse IDE，请尝试打开 DDMS 并转到 /data/data/package-name/databases/ 那里您可以看到您的数据库，选择数据库并将其拉到您的计算机上。

使用 SQLLite3 数据库浏览器打开数据库文件。您可以使用 IDE 更改表并将其推回设备。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-19T16:32:08.937

如果数据库在模拟器中，您也可以从 PC 命令行执行此操作：“adb shell”，然后 cd 到数据库位置（/data/data/package_name/databases/）并运行“sqlite3 database.db”。我有时会使用这种方法来快速检查表，而不是将数据库从模拟器复制回我的 PC。

# signalr - SignalR - 与来自多个部分视图的寄存器的连接？

> ID：11104308
> 
> 赞同：3
> 
> 时间：2012-06-19T15:28:28.673
> 
> 标签：signalr

我在使用 SignalR 的页面中有多个部分视图。

为了正确执行，所有部分视图都需要使用 ID 向集线器注册。

我已经使用以下方法实现了这个：

```
$.connection.hub.start(function () { <hubname>.register(<id>); }); 
```

当页面上只有一个局部视图时，它按设计工作。但是一旦有 2 个或更多，只有一个寄存器命令被执行。因此，只有一个部分视图有效。

如果我可以保持部分视图自包含，我会更喜欢它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T08:23:37.450

dfowler 在 JabbR 上回答了我的问题：

```
// --- outside of the user controls, e.g. on the container page ---
$(function() {
  window.hubReady = $.connection.hub.start();
});

// --- in your other pages ---
$(function() {
    window.hubReady.done(function() {
        // call hub method
    });
}); 
```

# cuda - CUDA 需要 root 访问权限？

> ID：11104320
> 
> 赞同：9
> 
> 时间：2012-06-19T15:29:06.500
> 
> 标签：cuda, root

我在 Ubuntu 10.04 上使用 GeForce 8400M GS，并且正在学习 CUDA 编程。我正在编写和运行一些基本程序。我正在使用 cudaMalloc，它一直给我一个错误，直到我以 root 身份运行代码。但是，我只需要以 root 身份运行代码一次。之后，即使我以普通用户身份运行代码，我也不会在 malloc 上收到错误。这是怎么回事？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-20T17:10:23.713

这可能是由于您的 GPU 在启动时未正确初始化。在使用 Ubuntu Server 和其他 X 服务器未自动启动的安装时，我遇到了这个问题。尝试以下方法来修复它：

为脚本创建一个目录以初始化您的 GPU。我通常使用`/root/bin`. 在此目录中，创建一个文件`cudainit.sh`，其中包含以下代码（此脚本来自 Nvidia 论坛）。

```
#!/bin/bash

/sbin/modprobe nvidia

if [ "$?" -eq 0 ]; then

    # Count the number of NVIDIA controllers found.
    N3D=`/usr/bin/lspci | grep -i NVIDIA | grep "3D controller" | wc -l`
    NVGA=`/usr/bin/lspci | grep -i NVIDIA | grep "VGA compatible controller" | wc -l`

    N=`expr $N3D + $NVGA - 1`
    for i in `seq 0 $N`; do
        mknod -m 666 /dev/nvidia$i c 195 $i;
    done    

    mknod -m 666 /dev/nvidiactl c 195 255

else
    exit 1
fi 
```

现在我们需要让这个脚本在启动时自动运行。编辑`/etc/rc.local`为如下所示。

```
#!/bin/sh -e
#   
# rc.local
#   
# This script is executed at the end of each multiuser runlevel.
# Make sure that the script will "exit 0" on success or any other
# value on error.
#   
# In order to enable or disable this script just change the execution
# bits.
#   
# By default this script does nothing.

#
# Init CUDA for all users
#   
/root/bin/cudainit.sh

exit 0 
```

重新启动计算机并尝试以普通用户身份运行 CUDA 程序。如果我对问题的看法是正确的，那么它应该被修复。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-03-20T17:01:24.100

为了使用 Ubuntu 14.04，我按照[https://devtalk.nvidia.com/default/topic/699610/linux/334-21-driver-returns-999-on-cuinit-cuda-/](https://devtalk.nvidia.com/default/topic/699610/linux/334-21-driver-returns-999-on-cuinit-cuda-/)添加`nvidia-uvm`到`etc/modules`，并添加行到自定义 udev 规则。`/etc/udev/rules.d/70-nvidia-uvm.rules`使用此行创建：

```
KERNEL=="nvidia_uvm", RUN+="/bin/bash -c '/bin/mknod -m 666 /dev/nvidia-uvm c $(grep nvidia-uvm /proc/devices | cut -d \  -f 1) 0;'" 
```

我不明白为什么`sudo modprobe nvidia-uvm`可以创建一个正确的`/dev/nvidia-uvm`（就像那样`sudo cuda_program`），但`/etc/modules`列表需要 udev 规则。

# c - 如何在C中将char数组转换为整数？

> ID：11104323
> 
> 赞同：2
> 
> 时间：2012-06-19T15:29:12.713
> 
> 标签：c, string, char, type-conversion

如何在下面的代码中将**char**`x`数组转换为整数8​​9？谢谢

 **```
int main(int argc,char *argv[]){
    char y[13] = "0123456789012";
    char x[3];
    int integer_value;

    x[0] = y[8];
    x[1] = y[9];
    x[3] = '\0';

    integer_value=atoi(x);
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-19T15:32:10.073

你完成了; `atoi()`是一种将字符串转换为整数的方法。您也可以使用`strtol()`或`sscanf()`。

**更新：**当然，假设您修复了终止，即 set`x[2] = '\0';`而不是`x[3]`.**

# xml - SVG图像标签不起作用

> ID：11104324
> 
> 赞同：33
> 
> 时间：2012-06-19T15:29:14.867
> 
> 标签：xml, svg, xampp

[我在这里](https://developer.mozilla.org/en/SVG/Tutorial/SVG_Image_Tag)玩 SVG 教程，但无法加载图像。XAMPP 给我一个错误，上面写着

> 此 XML 文件似乎没有任何与之关联的样式信息。文档树如下所示。

我已经从文档中复制粘贴，但它仍然不起作用。下面的代码：

```
<?xml version="1.0" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" 
  "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg width="5cm" height="4cm" version="1.1"
     xmlns="localhost" xmlns:xlink= "localhost/svgtest">
    <image xlink:href="My_Image.jpg" x="0" y="0" height="50px" width="50px"/>
</svg> 
```

谷歌搜索错误消息告诉我 XML 以某种方式损坏，但除了语言环境和图像标题外，我没有更改任何内容。

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-06-19T15:30:52.413

你弄错了命名空间。

改变

```
xmlns="localhost" xmlns:xlink= "localhost/svgtest" 
```

至

```
xmlns="http://www.w3.org/2000/svg" xmlns:xlink= "http://www.w3.org/1999/xlink" 
```

也许你应该看看 MDN 的这个[Namespaces Crash Course](https://developer.mozilla.org/en/SVG/Namespaces_Crash_Course)。

# html - 固定表格布局的宽度

> ID：11104327
> 
> 赞同：2
> 
> 时间：2012-06-19T15:29:29.903
> 
> 标签：html, tablelayout

有人可以帮助我，这让我发疯。我在这个网站上看到了其他问题的答案，但我似乎无法应用它们。

基本上我正在尝试在 html dreamweaver 中修复我的表格的宽度。但是，它似乎不起作用。

我当前的代码如下所示：

```
table align="center" style='table-layout:fixed'  width="910" height="627" border="0" 
```

但它仍会扩展至指定宽度以上。

我也尝试过这样做：

```
.fixed { table-layout: fixed; }

 <td width="18" class="fixed"></td> 
```

但这也不起作用！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T15:36:03.613

你可以尝试把你需要的所有样式放在一个类中，

```
.fixed { table-layout: fixed; width: 910px; height: 627px; border: none; text-align: center;} 
```

然后只需将类应用于表：

```
<table class="fixed"> 
```

另外，您能否澄清一下“尝试修复表格中的宽度”是什么意思？您能否在表格周围或整个表格本身发布更多代码？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T10:09:59.303

感谢您的回复.....我对此很陌生，但我会尝试扩展

基本上，下面是我的样式表和代码的开始。我希望表格的主体和顶部的最大宽度为 910。我正在其中创建其他表格，当信息输入到单元格中时，它不会环绕，它只会使页面成为更大的宽度........我不希望这成为可能

```
<style type="text/css"> 
body {  background-color: #000;font-family: Comic Sans MS, cursive;font-size:    12px;color: #000;text-align:left 
    width="910" height="627" border="0" } 

.mainbody {background-color: #fff;width="844px" table-layout: fixed;} 
.background {background-color: #000;} 

.banner_f { color: #FFFFFF;font-weight: bold;font-size: 36px;font-family: Verdana, Arial, Helvetica, sans-serif; 
        width="910" height="203" table-layout: fixed;} 

</style> 
```

'/Images/Buttons/Fixtures_Top.jpg','/Images/Buttons/Scorers_Top.jpg','/Images/Buttons/Reports_Top.jpg','/Images/Buttons/Contact_Top.jpg')">width="844 " 高度="68"> `

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T16:01:14.380

要做的第一件事：摆脱 HTML4 属性，例如`align`，`width`或者`border`单独使用 CSS 来完成。为表格设置绝对宽度应该没有问题。

其次，您不需要`table-layout: fixed;`为表格设置固定宽度。`<table style="width: 910px;">`应该足够了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-19T15:33:51.730

也许你可以尝试这样的事情。

```
<div style="overflow:hidden;width:910px">
<table>
<tr>
    <td>...</td>
</tr>
</table>
</div> 
```

或者如果你需要滚动条，你可以给溢出：滚动。

# java - 使用 JOGL 绘制基本纹理，使用 Texture 对象

> ID：11104332
> 
> 赞同：2
> 
> 时间：2012-06-19T15:29:38.637
> 
> 标签：java, opengl, textures, jogl

我试图让我的应用程序的用户能够加载他们选择的图像来制作背景。通过 Java 加载图像没有问题，但我无法将图像转换为纹理……我的 GLCanvas 上只有一个灰色的大框。这是我到目前为止的代码：

```
 //if there's an image to overlay, render it
    if (renderImage) {

        gl.glClear(GL.GL_COLOR_BUFFER_BIT | GL.GL_DEPTH_BUFFER_BIT);

        if (texture == null && img != null) {

            texture = TextureIO.newTexture(img, true);
            texture.enable();
            texture.bind();
        }

        gl.glBegin(GL.GL_POLYGON);
        gl.glNormal3f(0,0,1);
            gl.glTexCoord2d(-texture.getWidth(), -texture.getHeight());
            gl.glVertex2d(-25, -25);
            gl.glTexCoord2d(-texture.getWidth(), texture.getHeight());
            gl.glVertex2d(canvas.getWidth(),0);
            gl.glTexCoord2d(texture.getWidth(), texture.getHeight());
            gl.glVertex2d(canvas.getWidth(), canvas.getHeight());
            gl.glTexCoord2d(texture.getWidth(), -texture.getHeight());
            gl.glVertex2d(0, canvas.getHeight());
        gl.glEnd();
        gl.glFlush();
    }
    //otherwise, render "grass"
    else {

        gl.glClearColor(0.0f, 0.65f, 0.0f, 0.0f);

        //Clear buffer and set background color to green (the "grass" on the sides of the intersection)
        gl.glClear(GL.GL_COLOR_BUFFER_BIT | GL.GL_DEPTH_BUFFER_BIT);
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T15:58:41.760

试试这个：

```
gl.glBegin(GL.GL_QUADS);
gl.glNormal3f(0,0,1);
gl.glTexCoord2d(0.0, 0.0);
gl.glVertex2d(0.0, 0.0);
gl.glTexCoord2d(1.0, 0.0);
gl.glVertex2d(canvas.getWidth(), 0.0);
gl.glTexCoord2d(1.0, 1.0);
gl.glVertex2d(canvas.getWidth(), canvas.getHeight());
gl.glTexCoord2d(0.0, 1.0);
gl.glVertex2d(0.0, canvas.getHeight());
gl.glEnd(); 
```

默认情况下，非重复纹理坐标在 0.0 到 1.0 范围内。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-29T17:29:41.283

我放

```
 if (texture == null && img != null) {

        texture = TextureIO.newTexture(img, true);
        texture.enable();
        texture.bind();
    } 
```

在 try, catch 语句中。

# eclipse - eclipse创建的项目中缺少META-INF目录和jdoconfig.xml

> ID：11104333
> 
> 赞同：0
> 
> 时间：2012-06-19T15:29:39.200
> 
> 标签：eclipse, google-app-engine, gwt

我正在学习在 Eclipse 中将 GWT 与 App Engine 一起使用。我在构建路径中包含了 App-Engine SDK。我正在阅读这里给出的教程。[https://developers.google.com/web-toolkit/doc/latest/tutorial/appengine](https://developers.google.com/web-toolkit/doc/latest/tutorial/appengine) 它说要在 META-INF 目录中创建一个文件 jdoconfig.xml，但我在我的项目结构中找不到 META-INF 目录。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T15:34:15.000

从教程`create a file StockWatcher/src/META-INF/jdoconfig.xml`。您应该在下创建 META-INF 目录`src`

# c++ - 将对象引用存储在一个简单的容器中

> ID：11104337
> 
> 赞同：0
> 
> 时间：2012-06-19T15:29:52.290
> 
> 标签：c++, pointers, stl, reference, containers

我正在寻找一种`A`在容器对象中插入多个类型对象的方法，而无需`A`在插入过程中复制每个对象。一种方法是通过`A`对容器的引用来传递对象，但不幸的是，据我所知，STL 容器只接受按值传递对象以进行插入（有很多充分的理由）。通常，这不是问题，但在我的情况下，我不希望调用复制构造函数并破坏原始对象，因为`A`它是 C 库的包装器，其中包含一些指向内部结构的 C 样式指针，它将与原始对象一起被删除...

我只需要一个容器，它可以返回其中一个对象，给定一个特定的索引，并存储在运行时确定的一定数量的项目，所以我想也许我可以编写自己的容器类，但我不知道如何正确地做到这一点。

另一种方法是存储指向`A`容器内部的指针，但由于我对这个主题没有太多了解，那么在 STL 容器中插入指向对象的指针的正确方法是什么？例如这个：

```
std::vector<A *> myVector;
for (unsigned int i = 0; i < n; ++i)
{
    A *myObj = new myObj();
    myVector.pushBack(myObj);
} 
```

可能有效，但我不确定如何正确处理它以及如何以干净的方式处理它。我应该仅仅依靠包含 myVector 作为成员的类的析构函数来处理它吗？如果这个析构函数在删除其中一个包含的对象时抛出异常会发生什么？

`shared_ptr`另外，有些人建议使用or `auto_ptr`or之类的东西`unique_ptr`，但我对这么多选项感到困惑。哪一个是我的方案的最佳选择？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-19T15:35:05.803

您可以使用`boost`或`std` `reference_wrapper`。

```
#include <boost/ref.hpp>
#include <vector>

struct A {};

int main()
{
  A a, b, c, d;
  std::vector< boost::reference_wrapper<A> > v;
  v.push_back(boost::ref(a)); v.push_back(boost::ref(b)); 
  v.push_back(boost::ref(c)); v.push_back(boost::ref(d));
  return 0;
} 
```

使用时需要注意对象的生命周期 `reference_wrapper`，以免获得悬空引用。

```
int main()
{
  std::vector< boost::reference_wrapper<A> > v;
  {
    A a, b, c, d;
    v.push_back(boost::ref(a)); v.push_back(boost::ref(b)); 
    v.push_back(boost::ref(c)); v.push_back(boost::ref(d));
    // a, b, c, d get destroyed by the end of the scope
  }
  // now you have a vector full of dangling references, which is a very bad situation
  return 0;
} 
```

如果你需要处理这种情况，你需要一个智能指针。

智能指针也是一种选择，但知道使用哪个是至关重要的。如果您的数据实际上是共享的，`shared_ptr`请在容器拥有数据时使用 use `unique_ptr`。

无论如何，我看不出包装部分`A`会发生什么变化。如果它在内部包含指针并遵守[三规则](http://en.wikipedia.org/wiki/Rule_of_three_%28C++_programming%29)，则不会出错。析构函数将负责清理。这是在 C++ 中处理资源的典型方式：在对象初始化时获取它们，在对象的生命周期结束时删除它们。

如果您纯粹想避免构建和删除的开销，您可能需要使用`vector::emplace_back`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-19T15:52:01.780

在 C++11 中，您可以使用函数就地构造容器元素`emplace`，从而避免管理指向已分配对象的指针容器的成本和麻烦：

```
std::vector<A> myVector;
for (unsigned int i = 0; i < n; ++i)
{
    myVector.emplace_back();
} 
```

如果对象的构造函数接受参数，则将它们传递给`emplace`函数，该函数将转发它们。

但是，对象只能在可复制或可移动的情况下存储在向量中，因为在重新分配向量的存储空间时必须移动它们。您可能会考虑使您的对象可移动，转移托管资源的所有权，或使用类似容器`deque`或`list`不会随着对象的增长而移动的容器。

**更新：**由于这不适用于您的编译器，因此最好的选择可能是`std::unique_ptr`- 与普通指针相比没有开销，从向量中擦除时会自动删除对象，并允许您将所有权移出向量，如果你要。

如果那不可用，那么`std::shared_ptr`（或`std::tr1::shared_ptr`或`boost::shared_ptr`，如果那不可用）也会给你自动删除，以（可能很小）效率成本。

无论您做什么，**都不要**试图存放`std::auto_ptr`在标准容器中。它的破坏性复制行为很容易在您不期望的时候意外删除对象。

如果这些都不可用，则使用示例中的指针，并确保在完成对象后记得删除它们。

# java - 在java中的super调用之前创建一个对象

> ID：11104339
> 
> 赞同：6
> 
> 时间：2012-06-19T15:30:05.987
> 
> 标签：java, superclass, flow

考虑到那个不起作用的简单java代码：

```
public class Bar extends AbstractBar{

    private final Foo foo = new Foo(bar);

    public Bar(){
        super(foo);
    }
} 
```

我需要在调用之前创建一个对象，`super()`因为我需要在母类中推送它。

我不想使用初始化块，也不想做类似的事情：

`super(new Foo(bar))`在我的构造函数中..

如何在超级呼叫之前将数据发送到母班？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-19T15:38:16.390

如果`Foo`必须存储在字段中，您可以这样做：

```
public class Bar extends AbstractBar{    
    private final Foo foo;

    private Bar(Foo foo) {
        super(foo);
        this.foo = foo;
    }

    public Bar(){
        this(new Foo(bar));
    }
} 
```

否则`super(new Foo(bar))`对我来说看起来很合法，如果你愿意，你可以包装`new Foo(bar)`成一个`static`方法。

另请注意，字段初始化程序（如您的示例中所示）和初始化程序块也无济于事，因为它们在超类构造函数之后运行。如果将字段声明为`final`您的示例将无法编译，否则您将进入`null`超类构造函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T15:37:43.493

这在java中是不可能的。唯一可能的解决方案是超级构造函数中的新调用。

如果 foo 对象可以在实例之间共享，您可以将其声明为静态

```
public class Bar extends AbstractBar{

    private static final Foo foo = new Foo(bar);

    public Bar(){
        super(foo);
    }
} 
```

如果超类在您的控制之下，您可以重构它并使用模板方法模式将对象拉入构造函数，而不是从子类中提取它。这适用于好莱坞原则：不要打电话给我们，我们会打电话给你；）

```
public abstract class AbstractBar{

    private Object thing;

    public AbstractBar(){
         this.thing = this.createThatThing();            
    }

    protected abstract Object createThatThing();
}

public class Bar extends AbstractBar {

     // no constructor needed

     protected Object createThatThing(){
          return new Thing();
     }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-19T15:44:15.450

```
class AbstractBar{
    public AbstractBar() {
    }
    public AbstractBar(Foo t) {
    }
}
class Bar extends AbstractBar{
    static Foo t=null;
    public Bar() {
        super(t=new Foo());
    }
}
class Foo{...} 
```

# cygwin - Cygwin 仅在文件已存在时复制

> ID：11104341
> 
> 赞同：0
> 
> 时间：2012-06-19T15:30:11.493
> 
> 标签：cygwin

我想将一个 xml 文件从一个远程框复制到一堆其他远程框，但我只希望它复制该文件，它当前已经存在一个现有文件。我怎样才能做到这一点？

还有一个问题，有没有一种方法可以仅在文件存在时导出列表？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T15:36:06.873

我不确定是否使用 cygwin，但因为它是 windows，你可以使用`xcopy`.

```
xcopy \\remotebox1\file.xml \\remotebox2\file.xml /U /Y 
```

仅当文件已存在于目标中时才会复制该文件，并且将在不提示的情况下覆盖。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T15:33:29.590

您可以使用常规 DOS 命令执行此操作，无需求助`cygwin`：

```
IF EXIST filename_on_remote_server COPY /Y filename_on_local_server filename_on_remote_server 
```

或者，如果您正在为 编写`BASH`脚本 `cygwin`，那么您可以参考[这个答案](https://stackoverflow.com/questions/638975/how-do-i-tell-if-a-file-does-not-exist-in-bash)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-16T17:31:20.940

这将在 bash 文件中从内部工作：

```
if [ -f /path/to/file.xml ]; then
  cp /path/to/file.xml /path/to/other/file.xml
fi 
```

命令行的单行代码可能是：

```
[ -f /path/to/file.xml ] && cp /path/to/file.xml /path/to/other/file.xml 
```

# javascript - 在查看 div 时尝试将菜单项设为粉红色

> ID：11104346
> 
> 赞同：0
> 
> 时间：2012-06-19T15:30:18.830
> 
> 标签：javascript, jquery, css

我有一个链接列表，可以让 div 在它们上方滑动，这是我使用在这里找到的脚本制作的：http: [//flesler.blogspot.ca/2007/10/jqueryscrollto.html](http://flesler.blogspot.ca/2007/10/jqueryscrollto.html)。

我希望链接在单击时更改颜色，以便用户可以清楚地看到它们的位置。我想做类似的事情：

```
<li><a href="#promo" onclick="this.style.color='green'; return false;">Promo Package</a></li> 
```

除非单击另一个链接时将颜色更改回其原始颜色。当然，外部会更好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T15:46:58.613

我会在列表中使用点击监听器：

```
$('ul').on('click', 'a', function() {
    $('ul a').css('color', '#000000'); // set all links to black;
    $(this).css('color', '#00FF00'); // set curent link to green;
    return false;
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T15:47:34.743

为什么不使用 CSS 样式呢？

如果你有 jQuery：

```
<li><a href="#promo" class="link_black">Promo Package</a></li>

jQuery(document).ready(function(){
    jQuery('.link_black').click(function(){
        jQuery(".link_green").removeClass('link_green');
        jQuery(this).addClass('link_green');
    });
});

<style>
.link_black{
    color : black;
}
a.link_black{
    color : green;
}
</style> 
```

如果你不使用 jQuery：

```
<li><a href="#promo" class="link_black" onclick="clickedGreenLink(this)">Promo Package</a></li>

<script>
function clickedGreenLink(obj){
   if (window.currentGreenLink!=undefined){
      window.currentGreenLink.class=window.currentGreenLink.class.replace('link_green','');
   }
   window.currentGreenLink=obj;
   window.currentGreenLink.class+='link_green';
}
</script> 
```

那应该工作

# jquery - 如何添加到元素的位置

> ID：11104348
> 
> 赞同：0
> 
> 时间：2012-06-19T15:30:27.970
> 
> 标签：jquery

我想在元素的位置添加一个动态量，例如右侧 40px。

例如，下面的代码获取元素相对于相应父元素的右偏移量：

```
$('#example').css('right') 
```

但它返回一个字符串，例如'12px'，我想要一个可以添加数字的方法。

作为一个类比，我可以将给定的数量添加到元素的宽度，如下所示：

```
$('#example').width($('#example').width()+355) 
```

我希望能够做与该职位类似的事情。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T15:34:49.557

```
$('#example').css('right' , '+=355'); 
```

我们`+=`会为您解决这个问题。

jQuery 1.6+

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T15:31:34.160

```
var val = parseInt($('#example').css('right')); 
```

parseInt 将读取它遇到的第一个数字，直到它遇到一个非数字。

这是一篇关于该主题的 MDN 文章，其中更详细地介绍了：[https ://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/parseInt](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/parseInt)

但是你想知道的是，如果你得到一个值，比如'12px'，在这个值上使用 parseInt 会给你（在这种情况下）12。

如果你传入“123x123”，你会得到 123。

传入“x123”会得到 NaN。

# c# - TabItem 被永久阻止

> ID：11104354
> 
> 赞同：0
> 
> 时间：2012-06-19T15:30:48.533
> 
> 标签：c#, wpf, tabcontrol, tabitem

我遇到了一个非常奇怪的问题：在 WPF 中，我有一个包含 3 个 tabItems 的 tabControl。我已经在“OneWayToSource”模式下将 tabControl 的 SelectedIndex 绑定到我的 viewModel 类中的一个属性。

这是 XAML 代码：

```
<TabControl Name="mainTabControl" SelectedIndex="{Binding SelectedTabIndex, Mode=OneWayToSource}"  >
        <TabItem Header="Tab 01" Name="tab01"> ... </TabItem>
        <TabItem Header="Tab 02" Name="tab02"> ... </TabItem>
        <TabItem Header="Tab 03" Name="tab03"> ... </TabItem>
</TabControl> 
```

在我的 viewModel 中：

```
 private int m_selectedTabIndex;
    public int SelectedTabIndex
    {
        get
        { return m_selectedTabIndex; }
        set
        {
            SetAndNotify(ref m_selectedTabIndex, value, () => SelectedTabIndex);
            SelectedTabChanged();
        }
    }

private void SelectedTabChanged()
    {
        // Some code
    } 
```

如您所见，每次我的 viewModel 的`SelectedTabIndex`属性发生更改时，`SelectedTabChanged()`都会执行该方法，这非常有效。

我奇怪的问题是：**当我使用例如`System.Windows.MessageBox.Show("Some Text")`在我的`SelectedTabChanged()`方法中显示一条消息时，我选择了另一个 tabItem 并且之前选择的选项卡被阻止，它看起来像被选中，但它仍然被永久选中，我再也看不到它的内容了。**

**澄清一下：正如我之前所说，这个奇怪的问题只在显示模式窗口时发生**

为什么会发生？我该如何解决这个问题？

我希望我能清楚地解释自己。

先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T17:22:22.157

我已经解决了我的问题。由于我是 WPF 的新手，我真的不明白为什么模式窗口会阻止选项卡。但是我正在搜索，发现 Dispatcher 类允许异步执行一种方法，该方法可以防止任何控制被阻塞。

我改变了我的viewModel代码如下：

```
public int SelectedTabIndex
    {
        get
        { return m_selectedTabIndex; }
        set
        {
            SetAndNotify(ref m_selectedTabIndex, value, () => SelectedTabIndex);
            Dispatcher.CurrentDispatcher.BeginInvoke(new Action(SelectedTabChanged), null);
        }
    } 
```

真正帮助我的线路如下：

```
Dispatcher.CurrentDispatcher.BeginInvoke(new Action(SelectedTabChanged), null); 
```

希望这可以帮助其他人遇到类似的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T15:44:35.683

我不是 100% 确定我理解你的问题，但是`MessageBox.Show`会产生一个嵌套的消息泵并阻止 main `Dispatcher`，从而“冻结”主窗口（这就是它是模态的原因）。如果您需要在`MessageBox`不显示模式的情况下显示样式警报，那么我的建议是创建一个面板，其中包含您的消息，该面板以`TabItem`隐藏的可见性存在，然后在需要显示消息时使其可见。您的选项卡选择在这种情况下仍应有效

# javascript - 骨干.js：防止消失

> ID：11104359
> 
> 赞同：1
> 
> 时间：2012-06-19T15:30:56.220
> 
> 标签：javascript, jquery, backbone.js, underscore.js

我刚开始使用backbone.js。我有一个视图，可以在调用`ListingListView`时用新内容刷新表。`fetch()`

**问题：**此表包含一些`<th>`元素。如果我要在更新表格内容的过程中进行操作，则`$(this.el).empty();`元素将被删除。我怎样才能防止这种情况？我希望元素保留。谢谢！`this.render()``<th>``<th>`

**JS代码**

```
// Views

window.ListingListView = Backbone.View.extend({
    el: '#listing_list table',

    initialize: function() {
        this.model.bind('reset', this.refreshList, this);
        this.model.bind('add', function(listing) {
            $(this.el).append(new ListingListItemView({ model: listing }).render().el);
        }, this);
    },

    render: function() {
        _.each(this.model.models, function(listing) {
            $(this.el).append(new ListingListItemView({ model: listing }).render().el);
        }, this);
        return this;
    },

    close: function() {
        $(this.el).unbind();
        $(this.el).empty();
    },

    refreshList: function() {
        $(this.el).empty();
        this.render();
    }
}); 
```

**HTML 代码**

```
<div id="listing_list">
    <table class="table table-bordered table table-striped">
        <th>Address</th>
        <th>Beds</th>
        <th>Baths</th>
        <th>Price</th>
    </table>
</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T16:35:22.087

您可以使用`thead`and向表中添加一些结构`tbody`：

```
<div id="listing_list">
    <table class="table table-bordered table table-striped">
    <thead>
    <tr>
        <th>Address</th>
        <th>Beds</th>
        <th>Baths</th>
        <th>Price</th>
    </tr>
    </thead>
    <tbody>

    </tbody>
    </table>
</div> 
```

并针对`tbody`您的`render`和`refreshList`功能：

```
render: function() {
        var $tbody=this.$("tbody"); // or $(this.el).find("tbody")

        _.each(this.model.models, function(listing) {
               $tbody.append(new ListingListItemView({ model: listing }).render().el);
        }, this);

        return this;
},

refreshList: function() {
    this.$("tbody").empty();
    // or $(this.el).find("tbody").empty() if you prefer
    this.render();
} 
```

笔记：

*   不要忘记您可以将集合用作特殊选项而不是模型：[http](http://backbonejs.org/#View-constructor) ://backbonejs.org/#View-constructor最后可能会更清楚一些。
*   骨干代理集合上的下划线函数，`_.each(this.model.models...`可以写成`this.model.each`（`this.collection.each`如果你应用上面的注释）

# c# - 是什么导致 svcutil 在代理远程服务器时建议使用 netNamedPipeBinding？

> ID：11104360
> 
> 赞同：2
> 
> 时间：2012-06-19T15:31:01.960
> 
> 标签：c#, wcf, wsdl, svcutil.exe, remote-server

我正在尝试在远程服务器上使用 WCF 服务。我可以浏览到服务（它的位置格式为`http://IntranetServerName:40000/VirtualDirectoryName/ServiceName.svc`），所以我可以很好地浏览到远程位置。

然后我（按照页面的指示）`http://IntranetServerName:40000/VirtualDirectoryName/ServiceName.svc?wsdl`在命令行中运行 svcutil.exe。

生成了一个客户端，但配置文件似乎已将端点从远程位置转换为 localhost，并假定它是一个命名管道（它不是）。

我认为网络中的某个地方（防火墙等）存在问题，但我与之交谈的网络人员说他们可以看到流量，这是一个应用程序问题。

所以首先，我想了解是什么原因导致 svcutil 在代理远程服务器时建议使用 netNamedPipeBinding？如果我理解它可能会为我遇到的后续问题提供线索。

我无权访问远程服务器的文件系统。我在 Windows 7 64 位上使用 VS2010。这是配置文件：

```
<configuration>
    <system.serviceModel>
        <bindings>
            <netNamedPipeBinding>
                <binding name="ServiceNameNamedPipeEndPoint" closeTimeout="00:01:00"
                    openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00"
                    transactionFlow="false" transferMode="Buffered" transactionProtocol="OleTransactions"
                    hostNameComparisonMode="StrongWildcard" maxBufferPoolSize="524288"
                    maxBufferSize="65536" maxConnections="10" maxReceivedMessageSize="65536">
                    <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384"
                        maxBytesPerRead="4096" maxNameTableCharCount="16384" />
                    <security mode="None">
                        <transport protectionLevel="EncryptAndSign" />
                    </security>
                </binding>
            </netNamedPipeBinding>
        </bindings>
        <client>
            <endpoint address="net.pipe://localhost/VirtualDirectoryName/ServiceName.svc"
                binding="netNamedPipeBinding" bindingConfiguration="ServiceNameNamedPipeEndPoint"
                contract="ServiceNameContract" name="ServiceNameNamedPipeEndPoint" />
        </client>
    </system.serviceModel>
</configuration> 
```

谢谢。

更新

我一直在查看 WSDL，我发现了这一点：

```
<wsdl:service name="ServiceName">
 <wsdl:port name="ServiceNameNamedPipeEndPoint" binding="i0:ServiceNameNamedPipeEndPoint">
  <soap12:address location="net.pipe://localhost/VirtualDirectoryName/ServiceName.svc"/>
   <wsa10:EndpointReference>
    <wsa10:Address>
net.pipe://localhost/VirtualDirectoryName/ServiceName.svc
   </wsa10:Address>
  </wsa10:EndpointReference>
 </wsdl:port>
</wsdl:service> 
```

在我看来，指定命名管道是要使用的绑定。这听起来合理吗？如果是这样，有人可以建议是什么操作或设置导致将其添加到 WSDL 中吗？

更新 (2)

这是服务的配置：

```
<?xml version="1.0" encoding="utf-8"?>
<configuration>
  <configSections>
    <sectionGroup name="system.web.extensions" type="System.Web.Configuration.SystemWebExtensionsSectionGroup, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35">
      <sectionGroup name="scripting" type="System.Web.Configuration.ScriptingSectionGroup, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35">
        <section name="scriptResourceHandler" type="System.Web.Configuration.ScriptingScriptResourceHandlerSection, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" requirePermission="false" allowDefinition="MachineToApplication" />
        <sectionGroup name="webServices" type="System.Web.Configuration.ScriptingWebServicesSectionGroup, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35">
          <section name="jsonSerialization" type="System.Web.Configuration.ScriptingJsonSerializationSection, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" requirePermission="false" allowDefinition="Everywhere" />
          <section name="profileService" type="System.Web.Configuration.ScriptingProfileServiceSection, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" requirePermission="false" allowDefinition="MachineToApplication" />
          <section name="authenticationService" type="System.Web.Configuration.ScriptingAuthenticationServiceSection, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" requirePermission="false" allowDefinition="MachineToApplication" />
          <section name="roleService" type="System.Web.Configuration.ScriptingRoleServiceSection, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" requirePermission="false" allowDefinition="MachineToApplication" />
        </sectionGroup>
      </sectionGroup>
    </sectionGroup>
  </configSections>
  <appSettings>
    <add key="Logging" value="True" />
    <add key="LogPath" value="c:\Temp\" />
  </appSettings>
  <connectionStrings>
    <add name="MyAppConnectionString" connectionString="Data Source=ReportingServerName\MyApp_UAT;Initial Catalog=MyApp;Integrated Security=True" providerName="System.Data.SqlClient" />
  </connectionStrings>
  <system.serviceModel>
    <extensions>
      <behaviorExtensions>
        <add name="UnityBehaviorExtension" type="MyDomain.MyApp.Business.Services.Implementations.UnityEndPointBehaviour, MyDomain.MyApp.Business.Services.Libs, Version=1.0.0.0, Culture=neutral, PublicKeyToken=cf929a8c65660387" />
      </behaviorExtensions>
    </extensions>
    <bindings>
      <netNamedPipeBinding>
        <binding name="NamedPipeBinding" openTimeout="00:05:00" sendTimeout="00:05:00" receiveTimeout="02:00:00">
          <security mode="None">
            <transport protectionLevel="None" />
          </security>
        </binding>
      </netNamedPipeBinding>
      <netTcpBinding>
        <binding name="NetTcpBinding_MyReportsService" closeTimeout="00:05:00" openTimeout="00:05:00" receiveTimeout="00:10:00" sendTimeout="00:05:00" transactionFlow="false" transferMode="Buffered" transactionProtocol="OleTransactions" hostNameComparisonMode="StrongWildcard" listenBacklog="10" maxBufferPoolSize="524288" maxBufferSize="6553600" maxConnections="10" maxReceivedMessageSize="6553600">
          <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384" maxBytesPerRead="4096" maxNameTableCharCount="16384" />
          <reliableSession ordered="true" inactivityTimeout="00:10:00" enabled="false" />
          <security mode="None">
            <transport clientCredentialType="Windows" protectionLevel="EncryptAndSign" />
            <message clientCredentialType="Windows" />
          </security>
        </binding>
      </netTcpBinding>
      <basicHttpBinding>
        <binding name="BasicHttpBinding_IReportGeneratorService" closeTimeout="00:05:00" openTimeout="00:05:00" receiveTimeout="00:10:00" sendTimeout="00:05:00" allowCookies="false" bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard" maxBufferSize="65536" maxBufferPoolSize="524288" maxReceivedMessageSize="65536" messageEncoding="Text" textEncoding="utf-8" transferMode="Buffered" useDefaultWebProxy="true">
          <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384" maxBytesPerRead="4096" maxNameTableCharCount="16384" />
          <security mode="None">
            <transport clientCredentialType="None" proxyCredentialType="None" realm="">
              <extendedProtectionPolicy policyEnforcement="Never" />
            </transport>
            <message clientCredentialType="UserName" algorithmSuite="Default" />
          </security>
        </binding>
        <binding name="BasicHttpBinding_PackageTriggerServiceContract" closeTimeout="00:05:00" openTimeout="00:05:00" receiveTimeout="00:10:00" sendTimeout="00:05:00" allowCookies="false" bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard" maxBufferSize="65536" maxBufferPoolSize="524288" maxReceivedMessageSize="65536" messageEncoding="Text" textEncoding="utf-8" transferMode="Buffered" useDefaultWebProxy="true">
          <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384" maxBytesPerRead="4096" maxNameTableCharCount="16384" />
          <security mode="None">
            <transport clientCredentialType="None" proxyCredentialType="None" realm="">
              <extendedProtectionPolicy policyEnforcement="Never" />
            </transport>
            <message clientCredentialType="UserName" algorithmSuite="Default" />
          </security>
        </binding>
      </basicHttpBinding>
      <wsHttpBinding>
        <binding name="WSHttpBinding_IReportGeneratorService" closeTimeout="00:01:00" openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00" bypassProxyOnLocal="false" transactionFlow="false" hostNameComparisonMode="StrongWildcard" maxBufferPoolSize="524288" maxReceivedMessageSize="65536" messageEncoding="Text" textEncoding="utf-8" useDefaultWebProxy="true" allowCookies="false">
          <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384" maxBytesPerRead="4096" maxNameTableCharCount="16384" />
          <reliableSession ordered="true" inactivityTimeout="00:10:00" enabled="false" />
          <security mode="Message">
            <transport clientCredentialType="Windows" proxyCredentialType="None" realm="">
              <extendedProtectionPolicy policyEnforcement="Never" />
            </transport>
            <message clientCredentialType="Windows" negotiateServiceCredential="true" algorithmSuite="Default" establishSecurityContext="true" />
          </security>
        </binding>
        <binding name="MetadataExchangeHttpBinding_IReportGeneratorService" closeTimeout="00:01:00" openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00" bypassProxyOnLocal="false" transactionFlow="false" hostNameComparisonMode="StrongWildcard" maxBufferPoolSize="524288" maxReceivedMessageSize="65536" messageEncoding="Text" textEncoding="utf-8" useDefaultWebProxy="true" allowCookies="false">
          <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384" maxBytesPerRead="4096" maxNameTableCharCount="16384" />
          <reliableSession ordered="true" inactivityTimeout="00:10:00" enabled="false" />
          <security mode="None">
            <transport clientCredentialType="Windows" proxyCredentialType="None" realm="">
              <extendedProtectionPolicy policyEnforcement="Never" />
            </transport>
            <message clientCredentialType="Windows" negotiateServiceCredential="true" establishSecurityContext="true" />
          </security>
        </binding>
      </wsHttpBinding>
    </bindings>
    <client>
      <endpoint address="http://IntranetServerName:41000/MyDomain.MyApp.Reports.Services.WebHost/MyDomain.MyApp.Reports.Services.Hosts.ReportGeneratorServiceHost.svc/mex" binding="wsHttpBinding" bindingConfiguration="MetadataExchangeHttpBinding_IReportGeneratorService" contract="SvcReference.IReportGeneratorService" name="MetadataExchangeHttpBinding_IReportGeneratorService" />
      <endpoint address="http://IntranetServerName:41000/MyDomain.MyApp.Reports.Services.WebHost/MyDomain.MyApp.Reports.Services.Hosts.ReportGeneratorServiceHost.svc/basic" binding="basicHttpBinding" bindingConfiguration="BasicHttpBinding_IReportGeneratorService" contract="SvcReference.IReportGeneratorService" name="BasicHttpBinding_IReportGeneratorService" />
      <endpoint address="http://ReportingServerName:42500/MyDomain.MyApp.Integration.Services.PackageTriggerService" binding="basicHttpBinding" bindingConfiguration="BasicHttpBinding_PackageTriggerServiceContract" contract="PackageTriggerService.PackageTriggerServiceContract" name="BasicHttpBinding_PackageTriggerServiceContract" />
    </client>
    <behaviors>
      <endpointBehaviors>
        <behavior name="UnityBehaviorExtension">
          <UnityBehaviorExtension />
        </behavior>
      </endpointBehaviors>
      <serviceBehaviors>
        <behavior name="MyDomain.MyApp.Business.Services.Implementations.REPS_Behavior">
          <serviceDebug includeExceptionDetailInFaults="true" />
          <serviceMetadata httpGetEnabled="true" />
        </behavior>
        <behavior name="MyDomain.MyApp.Business.Services.Implementations.SRefS_Behavior">
          <serviceDebug includeExceptionDetailInFaults="true" />
          <serviceMetadata httpGetEnabled="true" />
        </behavior>
        <behavior name="MyDomain.MyApp.Business.Services.Implementations.MyReportsInterfaceService_behaviour">
          <serviceMetadata httpGetEnabled="true" />
          <serviceDebug includeExceptionDetailInFaults="true" />
        </behavior>
        <behavior name="MyDomain.MyApp.Business.Services.Implementations.DFS_Behavior">
          <serviceDebug includeExceptionDetailInFaults="true" />
          <serviceMetadata httpGetEnabled="true" />
        </behavior>
        <behavior name="MyDomain.MyApp.Business.Services.Implementations.ServiceName_Behavior">
          <serviceDebug includeExceptionDetailInFaults="true" />
          <serviceMetadata httpGetEnabled="true" />
        </behavior>
        <behavior name="MyDomain.MyApp.Business.Services.Implementation.FCS_Behaviour">
          <serviceDebug includeExceptionDetailInFaults="true" />
          <serviceMetadata httpGetEnabled="true" httpsGetEnabled="false" />
        </behavior>
        <behavior name="MyDomain.MyApp.Business.Services.Implementation.FCS2_Behaviour">
          <serviceDebug includeExceptionDetailInFaults="true" />
          <serviceMetadata httpGetEnabled="true" httpsGetEnabled="false" />
        </behavior>
        <behavior name="MyDomain.MyApp.Business.Services.Implementations.BIS_Behavior">
          <serviceDebug includeExceptionDetailInFaults="true" />
          <serviceMetadata httpGetEnabled="true" httpsGetEnabled="false" />
        </behavior>
        <behavior name="MyDomain.MyApp.Business.Services.Implementations.CS_Behavior">
          <serviceDebug includeExceptionDetailInFaults="true" />
          <serviceMetadata />
        </behavior>
        <behavior name="MyDomain.MyApp.Business.Services.Implementations.W2CS_Behavior">
          <serviceDebug includeExceptionDetailInFaults="true" />
          <serviceMetadata httpGetEnabled="true" httpsGetEnabled="false" />
        </behavior>
        <behavior name="MyDomain.MyApp.Business.Services.Implementations.TrS_Behavior">
          <serviceDebug includeExceptionDetailInFaults="true" />
          <serviceMetadata httpGetEnabled="true" />
        </behavior>
      </serviceBehaviors>
    </behaviors>
    <services>
      <service behaviorConfiguration="MyDomain.MyApp.Business.Services.Implementations.REPS_Behavior" name="MyDomain.MyApp.Business.Services.Implementations.REPS">
        <clear />
        <endpoint address="mex" binding="mexNamedPipeBinding" bindingConfiguration="" name="REPSMexEndPoint" contract="IMetadataExchange" listenUriMode="Explicit" />
        <endpoint address="net.pipe://localhost/MyDomain.MyApp.Business.Services.WebHost/REPS.svc" behaviorConfiguration="UnityBehaviorExtension" binding="netNamedPipeBinding" bindingConfiguration="NamedPipeBinding" name="REPSNamedPipeEndPoint" contract="MyDomain.MyApp.Business.Services.Contracts.IREPSContract" listenUriMode="Explicit" />
      </service>
      <service behaviorConfiguration="MyDomain.MyApp.Business.Services.Implementations.W2CS_Behavior" name="MyDomain.MyApp.Business.Services.Implementations.W2CS">
        <clear />
        <endpoint address="mex" binding="mexNamedPipeBinding" bindingConfiguration="" name="W2CSMexEndPoint" contract="IMetadataExchange" listenUriMode="Explicit" />
        <endpoint address="net.pipe://localhost/MyDomain.MyApp.Business.Services.WebHost/W2CS.svc" behaviorConfiguration="UnityBehaviorExtension" binding="netNamedPipeBinding" bindingConfiguration="NamedPipeBinding" name="W2CSNamedPipeEndPoint" contract="MyDomain.MyApp.Business.Services.Contracts.IW2CSContract" listenUriMode="Explicit" />
      </service>
      <service behaviorConfiguration="MyDomain.MyApp.Business.Services.Implementations.SRefS_Behavior" name="MyDomain.MyApp.Business.Services.Implementations.SRefS">
        <endpoint address="mex" binding="mexNamedPipeBinding" bindingConfiguration="" name="SRefSMexEndPoint" contract="IMetadataExchange" />
        <endpoint address="net.pipe://localhost/MyDomain.MyApp.Business.Services.WebHost/SRefS.svc" behaviorConfiguration="UnityBehaviorExtension" binding="netNamedPipeBinding" bindingConfiguration="NamedPipeBinding" name="SRefSNamedPipeEndPoint" contract="MyDomain.MyApp.Business.Services.Contracts.ISRefSContract" listenUriMode="Explicit" />
      </service>
      <service behaviorConfiguration="MyDomain.MyApp.Business.Services.Implementations.MyReportsInterfaceService_behaviour" name="MyDomain.MyApp.Business.Services.Implementations.MyReportsService">
        <endpoint address="" binding="netTcpBinding" bindingConfiguration="NetTcpBinding_MyReportsService" name="MyReportsServiceNetTcpEndPoint" contract="MyDomain.MyApp.Business.Services.Contracts.IMyReportsServiceContract" />
        <endpoint address="mex" binding="mexTcpBinding" bindingConfiguration="" name="MyReportsServiceMexTcpBindingEndpoint" contract="IMetadataExchange" />
        <host>
          <baseAddresses>
            <add baseAddress="net.tcp://localhost:50000/" />
          </baseAddresses>
        </host>
      </service>
      <service behaviorConfiguration="MyDomain.MyApp.Business.Services.Implementations.DFS_Behavior" name="MyDomain.MyApp.Business.Services.Implementations.DFS">
        <endpoint address="mex" binding="mexNamedPipeBinding" bindingConfiguration="" name="DFSMexEndPoint" contract="IMetadataExchange" />
        <endpoint address="net.pipe://localhost/MyDomain.MyApp.Business.Services.WebHost/DFS.svc" behaviorConfiguration="UnityBehaviorExtension" binding="netNamedPipeBinding" bindingConfiguration="NamedPipeBinding" name="DFSNamedPipeEndPoint" contract="MyDomain.MyApp.Business.Services.Contracts.IDFSContract" />
      </service>
      <service behaviorConfiguration="MyDomain.MyApp.Business.Services.Implementations.ServiceName_Behavior" name="MyDomain.MyApp.Business.Services.Implementations.ServiceName">
        <endpoint address="mex" binding="mexNamedPipeBinding" bindingConfiguration="" name="ServiceNameMexEndPoint" contract="IMetadataExchange" />
        <endpoint address="net.pipe://localhost/MyDomain.MyApp.Business.Services.WebHost/ServiceName.svc" behaviorConfiguration="UnityBehaviorExtension" binding="netNamedPipeBinding" bindingConfiguration="NamedPipeBinding" name="ServiceNameNamedPipeEndPoint" contract="MyDomain.MyApp.Business.Services.Contracts.IServiceNameContract" />
      </service>
      <service behaviorConfiguration="MyDomain.MyApp.Business.Services.Implementation.FCS_Behaviour" name="MyDomain.MyApp.Business.Services.Implementations.FCS">
        <endpoint address="net.pipe://localhost/MyDomain.MyApp.Business.Services.WebHost/FCS.svc" behaviorConfiguration="UnityBehaviorExtension" binding="netNamedPipeBinding" bindingConfiguration="NamedPipeBinding" name="FCSNamedPipeEndPoint" contract="MyDomain.MyApp.Business.Services.Contracts.IFCSContract" />
        <endpoint address="mex" binding="mexNamedPipeBinding" bindingConfiguration="" name="FixedContractMexEndPoint" contract="IMetadataExchange" />
      </service>
      <service behaviorConfiguration="MyDomain.MyApp.Business.Services.Implementation.FCS2_Behaviour" name="MyDomain.MyApp.Business.Services.Implementations.FCS2">
        <endpoint address="net.pipe://localhost/MyDomain.MyApp.Business.Services.WebHost/FCS2.svc" behaviorConfiguration="UnityBehaviorExtension" binding="netNamedPipeBinding" bindingConfiguration="NamedPipeBinding" name="FCS2NamedPipeEndPoint" contract="MyDomain.MyApp.Business.Services.Contracts.IFCS2Contract" />
        <endpoint address="mex" binding="mexNamedPipeBinding" bindingConfiguration="" name="FlexContractMexEndPoint" contract="IMetadataExchange" />
      </service>
      <service behaviorConfiguration="MyDomain.MyApp.Business.Services.Implementations.BIS_Behavior" name="MyDomain.MyApp.Business.Services.Implementations.BIS">
        <endpoint address="net.pipe://localhost/MyDomain.MyApp.Business.Services.WebHost/BIS.svc" behaviorConfiguration="UnityBehaviorExtension" binding="netNamedPipeBinding" bindingConfiguration="NamedPipeBinding" name="BISNamedPipeEndPoint" contract="MyDomain.MyApp.Business.Services.Contracts.IBISContract" />
        <endpoint address="mex" binding="mexNamedPipeBinding" bindingConfiguration="" name="BISMexEndPoint" contract="IMetadataExchange" />
      </service>
      <service behaviorConfiguration="MyDomain.MyApp.Business.Services.Implementations.CS_Behavior" name="MyDomain.MyApp.Business.Services.Implementations.CS">
        <endpoint address="net.pipe://localhost/MyDomain.MyApp.Business.Services.WebHost/CS.svc" behaviorConfiguration="UnityBehaviorExtension" binding="netNamedPipeBinding" bindingConfiguration="NamedPipeBinding" name="CSNamedPipeEndPoint" contract="MyDomain.MyApp.Business.Services.Contracts.ICSContract" />
        <endpoint address="mex" binding="mexNamedPipeBinding" bindingConfiguration="" name="CSMexEndPoint" contract="IMetadataExchange" />
      </service>
      <service behaviorConfiguration="MyDomain.MyApp.Business.Services.Implementations.TrS_Behavior" name="MyDomain.MyApp.Business.Services.Implementations.TrS">
        <endpoint address="net.pipe://localhost/MyDomain.MyApp.Business.Services.WebHost/TrS.svc" behaviorConfiguration="UnityBehaviorExtension" binding="netNamedPipeBinding" bindingConfiguration="NamedPipeBinding" name="TrSNamedPipeEndPoint" contract="MyDomain.MyApp.Business.Services.Contracts.ContractA" />
        <endpoint address="mex" binding="mexNamedPipeBinding" bindingConfiguration="" name="TrSMexEndPoint" contract="IMetadataExchange" />
      </service>
    </services>
  </system.serviceModel>
  <system.codedom>
    <compilers>
      <compiler language="c#;cs;csharp" extension=".cs" type="Microsoft.CSharp.CSharpCodeProvider,System, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" warningLevel="4">
        <providerOption name="CompilerVersion" value="v3.5" />
        <providerOption name="WarnAsError" value="false" />
      </compiler>
      <compiler language="vb;vbs;visualbasic;vbscript" extension=".vb" type="Microsoft.VisualBasic.VBCodeProvider, System, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" warningLevel="4">
        <providerOption name="CompilerVersion" value="v3.5" />
        <providerOption name="OptionInfer" value="true" />
        <providerOption name="WarnAsError" value="false" />
      </compiler>
    </compilers>
  </system.codedom>
  <system.web>
    <compilation debug="true">
      <assemblies>
        <add assembly="System.Core, Version=3.5.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089" />
        <add assembly="System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
        <add assembly="System.Xml.Linq, Version=3.5.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089" />
        <add assembly="System.Data.DataSetExtensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089" />
      </assemblies>
    </compilation>
    <pages>
      <controls>
        <add tagPrefix="asp" namespace="System.Web.UI" assembly="System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
        <add tagPrefix="asp" namespace="System.Web.UI.WebControls" assembly="System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
      </controls>
    </pages>
    <httpHandlers>
      <remove verb="*" path="*.asmx" />
      <add verb="*" path="*.asmx" validate="false" type="System.Web.Script.Services.ScriptHandlerFactory, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
      <add verb="*" path="*_AppService.axd" validate="false" type="System.Web.Script.Services.ScriptHandlerFactory, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
      <add verb="GET,HEAD" path="ScriptResource.axd" validate="false" type="System.Web.Handlers.ScriptResourceHandler, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
    </httpHandlers>
    <httpModules>
      <add name="ScriptModule" type="System.Web.Handlers.ScriptModule, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
    </httpModules>
  </system.web>
  <system.webServer>
    <validation validateIntegratedModeConfiguration="false" />
    <modules>
      <remove name="ScriptModule" />
      <add name="ScriptModule" preCondition="managedHandler" type="System.Web.Handlers.ScriptModule, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
    </modules>
    <handlers>
      <remove name="WebServiceHandlerFactory-Integrated" />
      <remove name="ScriptHandlerFactory" />
      <remove name="ScriptHandlerFactoryAppServices" />
      <remove name="ScriptResource" />
      <add name="ScriptHandlerFactory" verb="*" path="*.asmx" preCondition="integratedMode" type="System.Web.Script.Services.ScriptHandlerFactory, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
      <add name="ScriptHandlerFactoryAppServices" verb="*" path="*_AppService.axd" preCondition="integratedMode" type="System.Web.Script.Services.ScriptHandlerFactory, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
      <add name="ScriptResource" verb="GET,HEAD" path="ScriptResource.axd" preCondition="integratedMode" type="System.Web.Handlers.ScriptResourceHandler, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
    </handlers>
  </system.webServer>
  <runtime>
    <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
      <dependentAssembly>
        <assemblyIdentity name="System.Web.Extensions" publicKeyToken="31bf3856ad364e35" />
        <bindingRedirect oldVersion="1.0.0.0-1.1.0.0" newVersion="3.5.0.0" />
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="System.Web.Extensions.Design" publicKeyToken="31bf3856ad364e35" />
        <bindingRedirect oldVersion="1.0.0.0-1.1.0.0" newVersion="3.5.0.0" />
      </dependentAssembly>
    </assemblyBinding>
  </runtime>
  <system.diagnostics>
    <sources>
      <source name="System.ServiceModel" switchValue="Information, ActivityTracing, Verbose" propagateActivity="true">
        <listeners>
          <add name="traceListener" type="System.Diagnostics.XmlWriterTraceListener" initializeData="c:\log\Traces.svclog" />
        </listeners>
      </source>
    </sources>
  </system.diagnostics>
</configuration> 
```

我现在还可以访问托管该服务的服务器。它是 IIS 6.1。

在网站的高级设置中，启用的协议设置为“http,net.pipe,net.tcp,net.msmq”。我没想到会在该列表中看到“http”，所以我仍然对为什么 svcutil 只会生成命名管道绑定感到困惑。我想要的是一个可以远程使用的绑定。你能看到我应该改变什么来允许这个吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T15:17:31.727

我现在已经弄清楚了。

在`<services>`服务配置的元素中，我添加了一个新`endpoint`元素：

```
 <service>
    <endpoint address="mex" binding="mexNamedPipeBinding" bindingConfiguration="" name="ServiceNameMexEndPoint" contract="IMetadataExchange" />
    <endpoint address="net.pipe://localhost/VirtualDirectoryName/ServiceName.svc" behaviorConfiguration="UnityBehaviorExtension" binding="netNamedPipeBinding" bindingConfiguration="NamedPipeBinding" name="ServiceNameNamedPipeEndPoint" contract="MyDomain.MyApp.Business.Services.Contracts.IServiceNameContract" />
    <!-- 20/06/2012 added this to let svcutil benerate a non-named pipe binding START-->
        <endpoint address="http://sluat01lonuk.gazpromuk.intra:40000/VirtualDirectoryName/ServiceName.svc" behaviorConfiguration="UnityBehaviorExtension" binding="basicHttpBinding" bindingConfiguration="BasicHttpBinding_IServiceName" name="ServiceNameNamedPipeEndPoint" contract="MyDomain.MyApp.Business.Services.Contracts.IServiceNameContract" />
        <!-- 20/06/2012 added this to let svcutil benerate a non-named pipe binding END-->
  </service> 
```

svcutil 仅生成命名管道连接的原因是没有公开的替代端点。

一旦我对服务进行了此更改，WSDL 就会更新以保存新的端点。然后重新运行 svcutil 导致 basicHttpBinding 绑定被添加到 output.config。

所以要完整而明确地回答我的问题：是什么导致 svcutil 在代理远程服务器时建议使用 netNamedPipeBinding 是因为`<services>`服务配置中的元素仅包含 net.pipe`endpoint`而不是 http（或者，我猜是 net.tcp）端点。

希望这可以帮助某人。

谢谢。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T16:19:32.110

ABC 的 WCF 服务有 3 件事

A - 地址 - 在 wsdl:service 部分中表示，并将 wsdl:binding 链接到具体的服务端点地址

B - 绑定 - 如 wsdl:binding 部分所述，并将 wsdl:portType 合同描述绑定到具体传输、信封格式和相关策略

C - 契约 - 在 wsdl:portType、wsdl:message 和 wsdl:type 部分中表达，并描述类型、消息、消息交换模式和操作

您发布的 WSDL 中的服务部分清楚地指出，该服务已暴露给 netNamedPipeBinding。

但我不明白，为什么它可以通过 HTTP 协议访问（http://IntranetServerName:40000/VirtualDirectoryName/ServiceName.svc?wsdl）

你有没有机会看看你的服务的配置文件？

# vector - 使用 gnuplot 绘制与边缘链接的点

> ID：11104378
> 
> 赞同：0
> 
> 时间：2012-06-19T15:31:57.660
> 
> 标签：vector, gnuplot

我有一个使用 gnuplot 绘制的点 (x, y) 文件。如果我有另一个文件显示哪个点与哪个其他点通过边缘链接（例如（3.8, 6）链接到（4,7）），是否可以在点之间可视化/绘制这些边缘？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T17:52:55.750

根据您的数据的组织方式，您可能需要研究 plotting `with vectors`。例如，如果您的数据文件如下所示：

```
#x1 y1 x2 y2
 1  1  3   3 
```

您可以使用以下方法绘制此图：

```
set style arrow 1 nohead
plot "my_arrows.dat" using 1:2:($3-$1):($4-$2) with vectors arrowstyle 1 
```

**编辑**

假设数据文件中的所有点都重复，您可以执行以下操作：

```
set style arrow 1 nohead
plot "my_arrows.dat" using 1:2:($3-$1):($4-$2) with vectors arrowstyle 1,\
     "my_arrows.dat" using 1:2 w points 
```

如果它们没有重复，您可以执行以下操作：

```
set style arrow 1 nohead
plot "my_arrows.dat" using 1:2:($3-$1):($4-$2) with vectors arrowstyle 1,\
     "my_arrows.dat" using 1:2 w points ls 1 lc rgb "red" pt 1,\
     "my_arrows.dat" using 3:4 w points ls 1 lc rgb "red" pt 1 
```

请注意，您可以使用线条样式（`linecolor`或`lc`，`pointtype`或`pt`，`linewidth`或`lw`等，以使点看起来相同。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T16:38:08.077

如果不使用单独的实用程序生成绘图脚本，您可能无法读取线位置，但是从点到点绘制线的命令是

```
set arrow [X] from first x1,y1 to first x2,y2 nohead 
```

其中 X 是箭头的可选标记号， (x1,y1) 和 (x2,y2) 是图形坐标系中的点。

# xml - 从打印不同 xml 输出的多个 perl 脚本打印一个 xml 输出

> ID：11104389
> 
> 赞同：0
> 
> 时间：2012-06-19T15:32:30.013
> 
> 标签：xml, perl

我之前曾问过这个问题，但没有得到满意的答案，因为我没有包含要查看的正确示例。

我有多个使用 xsl 打印这些脚本的 xml 输出的脚本。我想编写一个调用这些脚本并结合输出和打印一个输出的主脚本。有人可以帮我吗？

```
#Example Script 1

use strict;
use warnings;
use Data::Dumper;
use XML::Simple;
use Getopt::Long;

my $output = '';
my $debug = 0;
my $path;
GetOptions('path=s' => \$path,'output=s' => \$output, 'debug=i' => \$d
+ebug);

if($output eq ''){
    die ("parameter --output=s is missing");
}     
open my $xmloutput, ">", $outputFile or die "can not open $outputFile 
+";
 print $xmloutput "<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<?xml-s
+tylesheet type=\"text/xsl\" href=\"book.xsl\"?>\n<Books>\n";

my $parser = new XML::Simple;
my $data = $parser->XMLin("$path");
print $xmloutput " <bookDetails> \n";
print $xmloutput "  <bookName>$data</bookName> \n";
print $xmloutput " </bookDetails> \n";
print $xmloutput " </Books> \n";
close $xmloutput; 
```

例 2

```
EXAMPLE 2
use strict;
use warnings;
use Data::Dumper;
use XML::Simple;
use Getopt::Long;

my $output = '';
my $debug = 0;
my $path;
GetOptions('path=s' => \$path,'output=s' => \$output, 'debug=i' => \$d
+ebug);

if($output eq ''){
    die ("parameter --output=s is missing");
}     
open my $xmloutput, ">", $outputFile or die "can not open $outputFile 
+";
 print $xmloutput "<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<?xml-s
+tylesheet type=\"text/xsl\" href=\"Piano.xsl\"?>\n<Piano>\n";

my $parser = new XML::Simple;
my $data = $parser->XMLin("$path");
print $xmloutput " <PianoDetails> \n";
print $xmloutput "  <PianoName>$data</PianoName> \n";
print $xmloutput " </PianoDetails> \n";
print $xmloutput " </Piano> \n";
close $xmloutput; 
```

这就是我正在尝试的。

```
 my $output = '';

   my $example1 = `perl script1.pl --path=c:/cygwin/home/username/directory --debug=1`;
    my $example2 = `perl script2.pl --path=c:/cygwin/home/username/directory --debug=1`;

 open my $finaloutput, ">" $output or die "cant open the file";
  print $finaloutput "<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<?xml-stylesheet     
          type=\"text/xsl\" href=\"final.xsl\"?>\n<OutputDestination>\n";

   my @attachscript  = ($example1, $example2);

   for my $attached (@attachscript) {
     print $finaloutput "<outputgoes_here_from_script> $attached   
                         </outputgoes_here_from_script>
    }

     PRINT $finaloutput "</OutputDestination>"
     close $finaloutput; 
```

有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T17:32:03.073

如果 script1 和 script2 不能转换为 Perl 模块并在包装器中直接调用（作为函数）（或者甚至只是重写为单个新脚本），我会考虑在包装器中这样做：

```
open (STDOUT, ">$output") or die "Can't open STDOUT: $!";
print "<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<?xml-stylesheet type=\"text/xsl\" href=\"final.xsl\"?>\n<OutputDestination>\n";
print "<outputgoes_here_from_script>";
`perl script1.pl --path=c:/cygwin/home/username/directory --debug=1`;
print "</outputgoes_here_from_script>";
print "<outputgoes_here_from_script>";
`perl script2.pl --path=c:/cygwin/home/username/directory --debug=1`;
print "</outputgoes_here_from_script>";
print "</OutputDestination>";
close(STDOUT); 
```

您可能需要在反引号系统调用之前进行“打印”，但请先尝试这种方式。但是，它与您的方法没有太大区别，只是跳过了保存每个脚本的输出的需要。

# java - “get”与“getProperty”之间的区别

> ID：11104395
> 
> 赞同：19
> 
> 时间：2012-06-19T15:32:41.620
> 
> 标签：java, properties-file

```
Properties myProp = new Properties();
myProp.put("material", "steel");

Properties prop1 = new Properties(myProp);

System.out.println(prop1.get("material") + ", " + prop1.getProperty("material"));
// outputs "null, steel" 
```

从返回对象的条目/属性的意义上说，它与 getProperty 不相似吗？为什么使用 get 时不返回“钢”？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-06-19T15:34:32.820

`get`继承自`Hashtable`，并声明为 return `Object`。

`getProperty`由 引入`Properties`，并被声明为 return `String`。

请注意，这`getProperty`将参考您可以传递给构造函数的“默认”属性`Properties`；`get`惯于。在大多数情况下，它们会返回相同的值。在您给出的示例中，您*使用*的是默认支持属性：

*   `prop1`不*直接*包含 的条目`"material"`，因此为什么`get`返回 null。
*   `myProp` *确实*包含一个条目`"material"`，所以当你调用它时`prop1.getProperty("material")`，它会发现它没有直接它，`myProp`而是签入，然后在`"steel"`那里找到。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-19T15:38:12.240

查看[文档](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Properties.html)显示它`get`是继承的，并返回`Object`，而`getProperty`它是的成员`Properties`并返回`String`.

似乎他们应该返回相同的结果，但是再次从[文档](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Properties.html#getProperty%28java.lang.String%29)中返回：

> 如果在该属性列表中未找到该键，则递归地检查默认属性列表及其默认值。

所以最好使用`getProperty`它，因为如果找不到它会返回默认值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T15:45:39.143

您的第二个`Properties`对象（`props`或`prop1`？）没有直接添加任何属性。它仅用`myProp`作默认值。所以这些值永远不会被添加到 backing`HashMap`中。 `Properties.getProperty()`在支持的 HashMap 中找不到“材料”，因此它可以查看默认值。但是继承的`HashMap.get()` *仅*查看支持的 HashMap 而不是您传递给构造函数的默认值。

# matlab - 如何运行从 Matlab 工作区传递变量的 .exe 程序？

> ID：11104405
> 
> 赞同：1
> 
> 时间：2012-06-19T15:33:20.527
> 
> 标签：matlab, variables, exe, workspace, mex

我正在研究一个需要大量数据处理的 Matlab 项目，并且某些部分代码需要比 Matlab 函数运行得更快。为此，我需要在其他脚本中调用 .exe，从工作区传递变量。为了了解我如何解决这个问题，我创建了一个小型加法程序。

我有以下代码

```
function test(a,b)
if ischar(a)
  a2=str2num(a);
else
  a2=a;
end
if ischar(b)
  b2=str2num(b);
else
  b2=b;
end
res=a2+b2;
disp(res) 
```

我使用部署工具使其可执行。如果我使用 !test.exe 5 3 通过 matlab 运行 test.exe，它可以工作，如果我创建两个变量 a=5 和 b=3 并尝试 !test.exe ab 它不起作用。

我知道我可以将变量传递给 .txt 或 .dat 文件，然后通过程序关闭并重新打开（我需要使用的变量是动态的）但我不相信它比运行 mfile 更有效从工作区加载变量。

我还搜索了有关使用 varargin、nargin 等的信息，但这些命令没有使用 C 的 argc[]、argv[]。类似的东西可以解决我的问题。

然后我搜索 mex 文件并编写以下代码：

```
#include "mex.h"

void mexFunction(int nlhs, mxArray *plhs[], int nrhs, const mxArray *prhs[])
{
   mxArray *mexGetVariable(const char *workspace, const char *varname);

   const mxArray *mex_a;
   const mxArray *mex_b;

   //http://www.mathworks.com/help/techdoc/apiref/mexgetvariable.html
   if ((mex_a = mexGetVariable("a", "global"))==NULL)
   {
        mexErrMsgTxt("Variable 'a' not in workspace.");
   }
   else if ((mex_b = mexGetVariable("b", "global"))==NULL)
   {
        mexErrMsgTxt("Variable 'b' not in workspace.");
   }
   else
   {
        mexEvalString("!test.exe mex_a mex_b"); 
   }
} 
```

（我也传递了变量 a=5 b=3）但是没有任何效果，因为我有提示说变量 a 不在工作区中。

谁能为我提供一个代码解决方案，说明如何让 .exe 程序在不打开 .txt 或 .dat 文件的情况下从 matlab 工作区读取变量？

预先感谢您阅读我的主题的好意。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T16:22:24.967

该命令`!test.exe a b`试图`test.exe`在字符串`'a'`and上运行`'b'`，而不是 and 的`a`值`b`。无论您是从命令行还是通过 mex 文件运行它，都会出现这种情况。

如果您执行以下操作：

```
>> a=5; b=3;
>> cmdstr = sprintf('!test.exe %f %f',a,b)
cmdstr =
!test.exe 5.000000 3.000000
>> eval(cmdstr) 
```

那会以我认为您打算的方式调用它。

您的真实 .exe（不是 test.exe）是使用 MATLAB 编译器从 MATLAB 创建的吗？如果是这样，以上仍然可能无法实现您想要的。使用 MATLAB Compiler 创建的可执行文件的运行速度与实时 MATLAB 相同。

# python - 重新解析文件或取消腌制

> ID：11104422
> 
> 赞同：0
> 
> 时间：2012-06-19T15:34:34.787
> 
> 标签：python, file, pickle

我有一个 100Mb 的文件，其中包含大约 1000 万行，每次运行代码时都需要将其解析为字典。这个过程非常缓慢，我正在寻找加快速度的方法。想到的一个想法是解析文件一次，然后使用 pickle 将其保存到磁盘。我不确定这会导致加速。

任何建议表示赞赏。

编辑：做了一些测试后，我担心创建字典时会出现减速。酸洗似乎确实要快得多，尽管我不介意做得更好。

拉利特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T15:52:53.257

[根据我的经验， MessagePack](http://msgpack.org/ "消息包")在 python 中转储/加载数据比 cPickle 快得多，即使使用最高协议也是如此。

但是，如果您有一本包含 1000 万个条目的字典，您可能需要检查您是否没有达到计算机内存的上限。如果您用完内存并且必须使用交换，该过程会发生得更慢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T20:14:17.957

根据您使用数据的方式，您可以

*   将其分成许多较小的文件并仅加载需要的文件
*   在文件中创建索引并延迟加载
*   将其存储到数据库中，然后查询数据库

您能否更好地了解您的数据是什么样的（结构）？

你是如何使用数据的？你真的在每次执行时都使用每一行吗？如果每次运行只使用一个子集，数据可以预先排序吗？

# windows - 在批处理文件中，如何从文件路径中获取文件名？

> ID：11104433
> 
> 赞同：2
> 
> 时间：2012-06-19T15:35:06.797
> 
> 标签：windows, batch-file, dos

我有一个批处理文件，要求用户输入文件路径。稍后在文件中，我只想从路径中隔离文件名和扩展名，即最后一个“\”之后的任何内容。

```
set FILEPATH=\\srv-01\My Docs\Templates\My SpreadSheet.xls
...
set FILENAME=??? 
```

我需要将 FILENAME 设置为什么才能使其等于“My SpreadSheet.xls”？

希望这很容易做到。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T15:42:36.993

```
@echo off
set FILEPATH=\\srv-01\My Docs\Templates\My SpreadSheet.xls
for /F "delims=" %%A in ("%FILEPATH%") do set "FILEPATH=%%~nxA"
echo.%FILEPATH% 
```

# javascript - 如何以最短的方式将角度变量移向目标角度

> ID：11104436
> 
> 赞同：1
> 
> 时间：2012-06-19T15:35:10.213
> 
> 标签：javascript, angle, degrees

我的游戏单位有一个角度变量和一个 targetAngle 变量。这些变量的范围从 1 到 360 度。

角度变量应始终向目标角度变量移动。

问题是，它不会以最短的方式发生。当 targetAngle 是 350 度，而当前角度只有 10 度时，变量应该只移动 20 度，而不是像我现在那样增加 340 度。

**如何使角度变量以最短的方式向 targetAngle 变量移动？**

现场演示：http: [//jsfiddle.net/zNsbc/](http://jsfiddle.net/zNsbc/)

```
var angle = 10;
var targetAngle = 350;

setInterval(function() {

    if ( angle > targetAngle ) {
        angle--;
    }
    else if ( angle < targetAngle ) {
        angle++;
    }    

    $("#angle").text(angle);

}, 10); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T15:40:39.327

您应该意识到 360 与 0 相同，因此您可以将角度与 targetAngle 以及 targetAngle+360 进行比较，并将其移动到最接近的方向（考虑 -360 以及接近 0 的角度和接近的 targetAngle 360)

所以你的例子：

```
angle:            10
targetAngle:      350 (diff 340)
targetAngle+360:  710 (diff 700)
targetAngle-360: - 10 (diff  20) 
```

角度最接近 targetAngle-360，所以你会减少它，而不是增加它

*注意*：确保取差值的绝对值

# javascript - 如何使用javascript检查输入是否包含isbn

> ID：11104439
> 
> 赞同：1
> 
> 时间：2012-06-19T15:35:19.593
> 
> 标签：javascript, search, isbn

我需要一个脚本来测试输入字段的内容以查看它是否包含 ISBN。我发现了一些这样的例子，但没有一个会去掉破折号。我需要这样做，否则我的搜索结果不起作用。如果该字段没有 ISBN，但无法使 ISBN 测试正常工作，我可以让脚本的 else 部分正常工作。预先感谢您的任何帮助！

```
function search() {
    var textboxdata = $('#search').val();
        if (textboxdata contains an ISBN number, strip it of dashes and) {
            // perform ISBN search
            document.location.href = "http://myurl?search=" + textboxdata;
        }
        else { //perform other search
        }
 } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-04-18T20:04:12.730

根据 Wikipedia 文章中给出的算法，这里有一个简单的 JavaScript 函数，用于验证 10 位和 13 位 ISBN：

```
var isValidIsbn = function(str) {

    var sum,
        weight,
        digit,
        check,
        i;

    str = str.replace(/[^0-9X]/gi, '');

    if (str.length != 10 && str.length != 13) {
        return false;
    }

    if (str.length == 13) {
        sum = 0;
        for (i = 0; i < 12; i++) {
            digit = parseInt(str[i]);
            if (i % 2 == 1) {
                sum += 3*digit;
            } else {
                sum += digit;
            }
        }
        check = (10 - (sum % 10)) % 10;
        return (check == str[str.length-1]);
    }

    if (str.length == 10) {
        weight = 10;
        sum = 0;
        for (i = 0; i < 9; i++) {
            digit = parseInt(str[i]);
            sum += weight*digit;
            weight--;
        }
        check = (11 - (sum % 11)) % 11
        if (check == 10) {
            check = 'X';
        }
        return (check == str[str.length-1].toUpperCase());
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-10-15T00:16:46.793

还有一个 js 库可用于检查 ISBN10 和 ISBN13 格式：[isbnjs](https://code.google.com/p/isbnjs/)和[isbn-verify](https://www.npmjs.com/package/isbn-verify)

* * *

编辑 2/2/17 - 以前的链接是 Google 代码，一些更新的当前链接： - [npm for isbn-verify](https://www.npmjs.com/package/isbn-verify) - [npm for isbnjs](https://www.npmjs.com/package/isbnjs) - [Github project](https://github.com/yieme/isbnjs)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-19T15:48:25.830

看看这篇维基百科文章：

[http://en.wikipedia.org/wiki/International_Standard_Book_Number](http://en.wikipedia.org/wiki/International_Standard_Book_Number)

应该让您深入了解如何验证 ISBN 号。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-06-22T04:13:49.260

此 ISBN 的 Derek 代码失败 ==> “0756603390”

这是因为校验位最终会是 11。

不正确 == > 检查 = 11 - (sum % 11); 正确 ==> 检查 = (11 - (sum % 11)) %11;

我针对 500 个 ISBN10 测试了新代码。

# eclipse - Eclipse Indigo：我可以使用/修补 m2e 与 NTLM 吗？

> ID：11104443
> 
> 赞同：4
> 
> 时间：2012-06-19T15:35:36.250
> 
> 标签：eclipse, maven, m2eclipse, ntlm, m2e

我们遇到了 Eclipse Indigo 和用于 Maven 支持的新 M2E 插件的问题。

我安装在同一台机器上：Maven 3.04 命令行，带有 NTLM 代理补丁。这完美无缺。

然后我用 M2E 安装了 Eclipse Indigo。我可以选择一个替代的 Maven 安装（嵌入式是 3.02），但是对于分辨率和插件管理，m2e 不使用代理，而不是选择的 maven 安装。我发现的其他网络结果也证实了这一点。

内部 Maven 安装不起作用，即使我使用系统范围的代理 (CNTLM) 也是如此。我怀疑是因为它使用自己的代理设置，而我没有为 NTLM 修补它。

我的问题是如何使用相同的 NTLM 补丁修补嵌入式 Maven，我曾经使 Maven 3.04 无缝工作？

我的 Maven 3.04 补丁：将 wagon-http-lightweight-2.2.jar 放在 maven lib 目录下的 ext 目录中。

# php - 通过 jQuery 将 PHP 变量发送到登录页面，同时跳过第三方提交脚本？

> ID：11104445
> 
> 赞同：2
> 
> 时间：2012-06-19T15:35:45.690
> 
> 标签：php, jquery, wordpress, session, jquery-tools

我的目标是从 WordPress 中定义的自定义字段设置 Google Conversion 值。转换脚本位于登陆页面上，因此我需要将我的自定义字段数据从我的表单中获取到登陆页面。我不能使用 GET 或 POST，因为表单提交是由第三方处理的，并且没有数据返回到实际的登录页面。

所以我尝试使用 PHP 会话，但是这个第三方阻碍了使用 PHP，因为它为自己保留了所有数据。

这是我希望我能开始工作的方法：

*   表单的验证是使用 jQuery 工具完成的。
*   然后，我需要在通过 jQuery/AJAX 验证成功后将变量提交到单独的 php 文件。
*   然后随着登录页面开始加载，我必须从提到的 PHP 文件中获取该变量并将其回显到相关位置。

我想我实际上不需要使用表单在页面上启动会话，因为 jquery 直接从输入中获取数据，而不是任何会话数据。所以这是我的转化价值输入：

```
<input type="hidden" id="conv" name="conv" value="90"> 
```

然后我的表单验证：

```
 $("#course-form-modal").validator().submit(function(e)  {
           // when data is valid
           if (!e.isDefaultPrevented()) {

                    // this grabs the value from my form
            var con_val = $("#conv").val();
            // and this sends it...
            $.post(
                "../../usersession.php", 
                { data: con_val } 
            );

           }

    }); 
```

然后我在 usersession.php 中得到了代码......我发送数据的地方：

```
// As I'm just trying to echo what was sent to this page, via ajax, I shouldn't need to worry about starting/retrieving a SESSION yet... right?
<?php $var_value = $_POST['data']; ?>
<div id="results">
<?php echo $var_value ?>    
</div> 
```

// 我可以稍后再担心。现在我只想在 USERSESSION.PHP 上回应我的结果 //

最后，我在登录页面上有了从 usersession.php 检索数据的代码：

```
session_start();
$var_value =  $_SESSION['conv']; 
echo $var_value; 
```

我不完全确定所有这些代码都适合初学者，我更像是一个前端人员......

-编辑-

是的，我很确定代码至少现在是正确的。出于某种原因，它仍然无法正常工作。目前我想知道WordPress是否会阻止我从我的javascript文件中写入usersessions.php（作为参考，该文件路径是在我的工作（不工作）示例中绝对设置的）？我知道当您尝试直接访问文件时，WordPress 有时会抛出 404。另一个潜在问题可能与第三方软件 vanillasoft 有关。我在表单的操作标签中有一个指向他们脚本的链接，这是否可以绕过/杀死表单 > usersession.php > 然后登录页面之间的数据发送/接收？

附带说明一下，如果有人对我如何测试 usersession.php 是否正在接收数据有很好的了解，请告诉我？我最初确实有这段代码，但它什么也不返回，如果我在发送某些东西后直接链接到文件（就像只是将文件 url 粘贴到我的浏览器中），它会返回一个“0”......

```
if(isset($_POST['conv'])) {
    session_start();
    $_SESSION['conv'] = $_POST[''conv''];
    echo "1";
} else {
    echo "0";
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T16:09:27.093

在输入上设置您的 ID。jQuery 正在寻找 ID，但您只设置了名称。

```
<input type="hidden" name="conv" value="90"> 
```

应该：

```
<input type="hidden" name="conv" id="conv" value="90"> 
```

* * *

* * *

编辑：

不敢相信我没有早点发现这个。您的问题在以下行的 usersession.php 中。

```
$_SESSION['conv'] = $_POST[''conv'']; 
```

您引用的 POST 错误。它应该是：

```
$_SESSION['conv'] = $_POST['conv']; 
```

* * *

* * *

编辑（重新：新的 js 编辑）

在你的java脚本中，你的post vars应该这样格式化：

```
{ name: "John", time: "2pm" } 
```

所以你的行应该是这样的：

```
$.post(
        '../../usersession.php', 
        {
            conv: $("#conv").val()
        }, 
        function(data) 
        {
            alert("Data Loaded: " + $("#conv").val());
        }
); 
```

# java - Hippo CMS - 在每次重新加载页面时显示随机新闻提要

> ID：11104447
> 
> 赞同：3
> 
> 时间：2012-06-19T15:35:51.680
> 
> 标签：java, content-management-system, feed, hippocms

如果我有一个类似 : 的列表`List<NewsItems>`，并且该列表中有 10 个新闻项目，有没有什么方法可以让我每次都获得一组 4 个不同的新闻项目，例如，说第 1、4、8 和 10 个项目列表。

我目前正在使用 Pageable Collections 并将新闻项目的显示分解为每页显示 4 个新闻项目（最大）。因此，通过这种方式，我可以随机更改要显示的页面（从而最终在每次刷新时更改新闻），但每个新闻项并不是随机的（例如：1-4 项总是在一起，5-8 项也是如此）。

```
final HippoResultSetBean resultSet = featurednewsBean.getResultSet();
  if (resultSet != null && resultSet.getCount() > 0) {

    final HippoDocumentIterator<NewsDocument> facetIt = resultSet.getDocumentIterator(NewsDocument.class);
    final int facetCount = featurednewsBean.getCount().intValue();
    /*
     * @ Javadoc - Show news items(max 4) randomly at every page refresh.
     * FacetCount - No. of news items.
     * pageRandom - A randomly generated number for the current page, so that we display a different page containing news each time.
     */
    int pageRandom = (int) (Math.random() * facetCount);
    //if(pageRandom<(facetCount/4)+1) {
    featurednews = new PageableCollection<NewsDocument>(facetIt, facetCount, DEFAULT_HEADLINES_MAX,pageRandom); 
```

有没有办法我仍然可以使用 Pageable Collections 并随机获取新闻提要？或者其他方式？任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T16:15:35.533

河马刻面总是有序的。在您定义的属性或（Lucene）分数上。A`PageableCollection`给你一个给定页面大小和偏移量的文档列表。如果您的页面大小为 5 并且您将偏移量设置为 0，您将获得前 5 个项目。使用随机偏移量仍会按照它们从构面选择中出来的顺序为您提供结果集。

`featuredNews.getItems()`当您将页面大小增加到 10 个项目并从中选择 4 个“随机” （这是 a `java.util.List`）时，您可以使其更加随机。不要将页面大小设置得太高，这会降低性能。

`PageableCollection`如果您想从更大的结果集中进行选择，另一种选择是创建 4的页面大小为 1 和 4 个不同的偏移量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T16:47:07.213

谢谢你的回答亚莎！[Solr 集成](https://wiki.onehippo.com/display/CMS7/Random+sort)使随机排序变得更加容易。

我最终做的（同时，工作正常）是，我获取新闻项目列表，随机排序它们并选择 4 个唯一的本地化列表，并将其呈现给 JSP。

# javascript - 如何在文本框上应用输入掩码

> ID：11104450
> 
> 赞同：2
> 
> 时间：2012-06-19T15:36:02.630
> 
> 标签：javascript, jquery, mask

我有一个在其上应用输入掩码的文本框。

我已经从这里下载了 JS 库[链接到带有位文档的 js 库](http://digitalbush.com/projects/masked-input-plugin/)

我需要做的是我需要这样的格式

```
any length integer/any length characters/CONSTANT lets say = hello/
current year lets   say = 2012

that is 6666/Edward/thanks SO/2012 
```

如果 var lenght 不可能，则至少 1 个整数或 1 个字符，最多 15 个整数或字符

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T16:17:19.180

也许这个 - [http://jsfiddle.net/ZYH9f/](http://jsfiddle.net/ZYH9f/)

它是一个强制性整数/字符和 5 个可选的其他：

```
$("input").mask("*?*****/*?*****/*?*****/9999"); 
```

# css - 如何为部分隐藏的图像添加边框？

> ID：11104458
> 
> 赞同：0
> 
> 时间：2012-06-19T15:36:27.687
> 
> 标签：css

这是我的代码（如果图像的高度高于 100 像素，则仅显示图像的前 100 像素并隐藏其余部分）：

HTML：

```
<div>
    <img>
</div> 
```

CSS：

```
div{
    max-height:100px;
    overflow:hidden;
} 
```

现在，我需要添加一个 5px 的边框：

```
img{
    border:solid 5px #555555;
} 
```

但如果图像的高度高于 100 像素，则不会出现**底部边框。**我该如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T15:39:20.883

那是因为 div 的溢出是隐藏的。相反，您应该在 div 上设置边框。这样，div 只会占据图像的高度，但在 100px 之后，它将保留边框，但图像不会显示超过该高度。不过，您需要调整 div 的宽度以适合图像。

```
<span><img src="" /></span>

span{
    max-height:100px;
    border:solid 5px #555;
    overflow: hidden;
    display: inline-block
}

img {
    width: 200px; /* image width */
    height: 200px; /* image height */
} 
```

与您一起使用跨度`display: inline-block`不再需要设置外部容器的宽度。

**问题：**当图像尺寸小于 时`100px`，图像底部和外部容器之间有一个小间隙。

[演示](http://jsfiddle.net/kWJ8G/13/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T15:51:23.417

如果这是您需要的，请查看：

*   （第一次尝试）[http://jsfiddle.net/Vn4PM/](http://jsfiddle.net/Vn4PM/)
*   （最后一次尝试）[http://jsfiddle.net/Vn4PM/11/](http://jsfiddle.net/Vn4PM/11/)

HTML（带有示例图形）：

```
<div>
    <img src="http://www.dummyimage.com/100x150/ffff00/fff" />
</div>​
<div>
    <img src="http://www.dummyimage.com/100x50/ffff00/fff" />
</div>​ 
```

CSS：

```
div {
    max-height: 100px;
    border: solid 5px #555555;
    overflow: hidden;
    display: inline-block;
}

img { margin-bottom: -5px; }​ 
```

--

*   **display: inline-block**和**边框**添加到 div 所以边框将*环绕*图像
*   **边距底部**添加到 img，因此隐藏了额外的间隙

# python - l.strip() 在这个语句中的作用是什么

> ID：11104459
> 
> 赞同：1
> 
> 时间：2012-06-19T15:36:28.590
> 
> 标签：python

```
lines = [l.split() for l in inpf.readlines() if l.strip()] 
```

在上面的语句中，做了`l.strip()`什么？

```
lines = [l.split() for l in inpf.readlines()]. 
```

难道上面的说法还不够吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-19T15:37:11.600

[`strip()`](http://docs.python.org/library/stdtypes.html#str.strip)删除任何前导/尾随空格。所以它会跳过任何只包含空格或为空的行。

在旁注中，没有必要使用`.readlines()`- 您可以迭代这些行，从而避免创建第二个列表，该列表在列表理解完成后立即被丢弃：

```
lines = [l.split() for l in inpf if l.strip()] 
```

# rest - 通过不同字段获取资源的 RESTful url

> ID：11104466
> 
> 赞同：7
> 
> 时间：2012-06-19T15:37:02.550
> 
> 标签：rest

简单的问题，我很难找到答案..

如果我有一个 REST Web 服务，并且我的设计没有使用 url 参数，我如何指定两个不同的键来返回相同的资源？

我想要的示例（并且已经实现）

```
/Person/{ID} 
```

它按预期返回一个人。

现在我也想要

```
/Person/{Name} 
```

它按姓名返回一个人。

这是正确的 RESTful 格式吗？或者是这样的：

```
/Person/Name/{Name} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-19T18:21:11.223

您应该只使用一个 URI 来引用单个资源。拥有多个 URI 只会造成混乱。在您的示例中，由于两个人的名字相同，会引起混淆。他们指的是哪个人员资源？

也就是说，您可以让多个 URI 引用单个资源，但对于“真实”URI 以外的任何内容，您都应该使用`301 - Moved Permanently`.

就个人而言，我永远不会实现多 ID 方案或重定向来支持它。选择一个单一的识别方案并坚持下去。您的 API 的用户会感谢您。

您真正需要构建的是查询 API，因此请关注如何实现资源之类的东西，该`/personFinder`资源可以将名称作为参数并`/person/{ID}`在响应中返回潜在的多个匹配 URI。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T16:03:45.477

我想从技术上讲，你可以让两个 URI 指向同一个资源（也许其中一个作为规范资源），但我认为你不想从实现的角度这样做。如果 ID 和名称之间存在重叠怎么办？

它确实看起来是一个使用查询参数的好地方，但如果你坚持不这样做，也许你可以这样做

```
person/{ID} 
```

和

```
personByName/{Name} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-11-24T11:34:41.860

我通常同意[这个答案](https://stackoverflow.com/a/11106978)，为了清晰和一致，最好避免多个 id 指向同一个实体。

然而，有时这种情况自然会出现。我使用的一个例子是波兰公司，可以通过他们的税号（'NIP' 号）或他们的国家商业登记号（'KRS' 号）来识别。

在这种情况下，我认为应该首先将辅助 id 作为标准添加到搜索端点。因此，用户将能够在辅助 ID 和主 ID 之间“转换”。

However, if users still keep insisting on being able to retrieve an entity directly by the secondary id (as we experienced), **one other possibility is to provide a "secret" URL, not described in the documentation, performing such an operation**. This can be given to users who made the effort to ask for it, and the potential ambiguity and confusion is then on them, if they decide to use it, not on everyone reading the documentation.

In terms of ambiguity and confusion for the API maintainer, I think this can be kept reasonably minimal with a helper function to immediately detect and translate the secondary id to primary id at the beginning of each relevant API endpoint.

It obviously matters much less than normal what scheme is chosen for the secret URL.

# ruby-on-rails - 没有 activerecord 的后台作业中的回形针内存较少

> ID：11104477
> 
> 赞同：0
> 
> 时间：2012-06-19T15:37:34.627
> 
> 标签：ruby-on-rails, paperclip, beanstalkd

我使用resque处理图片并在后台使用回形针上传到s3。但是每个工作人员都会加载大约 120MB~150MB 的整个 rails 实例。

我发现本教程可以在不加载导轨的情况下处理后台作业。 [http://railscasts.com/episodes/243-beanstalkd-and-stalker](http://railscasts.com/episodes/243-beanstalkd-and-stalker)

我如何使用 stalker 或其他更好的解决方案来操作回形针？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-05T15:20:16.627

我制作了一个可用于 Paperclip 的轻量级类。

看看这里：[要点](https://gist.github.com/basgys/5712426)

# android - 从网站中提取单词

> ID：11104492
> 
> 赞同：0
> 
> 时间：2012-06-19T15:38:05.263
> 
> 标签：android

嗨，我想尝试为需要字典的 android 手机制作一个简单的应用程序。我想用 urbandictionary.com 作为参考网站。有没有什么技术可以提取词库中所有带有定义的词及其各自的词？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T15:45:33.217

我正在查看在以下位置找到的 Google 示例

[http://developer.android.com/resources/samples/SearchableDictionary/index.html](http://developer.android.com/resources/samples/SearchableDictionary/index.html)

看来他们只是在这个例子中添加了他们的话

```
 private void loadWords() throws IOException {
        Log.d(TAG, "Loading words...");
        final Resources resources = mHelperContext.getResources();
        InputStream inputStream = resources.openRawResource(R.raw.definitions);
        BufferedReader reader = new BufferedReader(new InputStreamReader(inputStream));

        try {
            String line;
            while ((line = reader.readLine()) != null) {
                String[] strings = TextUtils.split(line, "-");
                if (strings.length < 2) continue;
                long id = addWord(strings[0].trim(), strings[1].trim());
                if (id < 0) {
                    Log.e(TAG, "unable to add word: " + strings[0].trim());
                }
            }
        } finally {
            reader.close();
        }
        Log.d(TAG, "DONE loading words.");
    } 
```

但是，当我查找 R.raw.definitions 时，该目录为空。

[http://developer.android.com/resources/samples/SearchableDictionary/res/raw/index.html](http://developer.android.com/resources/samples/SearchableDictionary/res/raw/index.html)

# php - 用 PHP 查询 MySQL 但数据库列有 $

> ID：11104494
> 
> 赞同：0
> 
> 时间：2012-06-19T15:38:06.747
> 
> 标签：php, mysql, sql

我正在围绕数据库构建一个应用程序（它是由其他人构建的，因此不能更改它）。我正在查询数据库中工作正常的值，直到我遇到数据库中包含 $ 的列。

我试图开始工作的代码是......

```
$avgprice=mysql_result($result1,$i,"avg$cwt"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T15:39:18.123

使用单引号`'`而不是双引号`"`来防止 PHP 尝试替换假定的变量。

```
$avgprice=mysql_result($result1,$i,'avg$cwt' ); 
```

PS：也许考虑使用[PDO](http://www.php.net/manual/en/book.pdo.php)或[mysqli](http://www.php.net/manual/en/book.mysqli.php)代替普通`mysql_X`函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T15:39:34.483

尝试转义`$`符号或使用`'`而不是`"`：

```
$avgprice=mysql_result($result1,$i, "avg\$cwt");
// or imho better way to do it:
$avgprice=mysql_result($result1,$i, 'avg$cwt'); 
```

[PHP 字符串](http://php.net/manual/en/language.types.string.php)：

> 当用双引号或 heredoc 指定字符串时，会在其中解析变量。

和

> 注意：与双引号和heredoc 语法不同，特殊字符的变量和转义序列在出现在单引号字符串中时不会被扩展。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-19T15:39:35.827

使用单引号。

```
$avgprice=mysql_result($result1,$i,'avg$cwt'); 
```

双引号插入（扩展）变量。单引号没有。如果您想在字符串中插入变量，PHP 中的良好做法是仅使用双引号。单引号字符串的处理速度更快，因为解释器不必查找变量。

# c# - MVC 3 EF 模型第一个项目上的交互式世界地图

> ID：11104495
> 
> 赞同：0
> 
> 时间：2012-06-19T15:38:09.807
> 
> 标签：c#, javascript, asp.net-mvc, google-maps, google-maps-api-3

我正在尝试首先使用 MVC 3 EF 模型执行此操作

我想制作一个交互式世界地图网络应用程序，用户可以点击红点并获得红点的简要描述，然后用户应该能够在弹出窗口内点击并获得更详细的信息，如图片和详细的文字等。

我还需要以我作为网站管理员可以创建这些红点并键入信息和创建图片的方式创建它。

例子：

瑞典有 2 个红点，一个在斯德哥尔摩，一个在哥德堡。

斯德哥尔摩的红点是关于摇滚活动的，哥德堡的红点是关于电子音乐节的。

红点也需要位于它发生的街道上。

我正在寻找的是一种首先使用 MVC 3 EF 模型创建此功能的简单方法。

可能有任何工具、教程、库或开源

感谢任何形式的帮助，所以我可以迈出第一步:)

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T15:44:05.583

看看 Google Maps API，这将解决您的世界地图问题，并允许您放置标记以及您可能希望提供的任何其他标记信息。

[https://developers.google.com/maps/visualize](https://developers.google.com/maps/visualize) https://developers.google.com/maps/

您的问题非常笼统，因此很难“回答”，但是，几周前我正在查看谷歌地图 API，并设法很快启动并运行。

您的“模型优先”方法并没有真正影响我的回答，因为您切蛋糕完全取决于您，但是我会认真考虑长期认真研究谷歌为您提供开箱即用的功能，用于构建非常相似的应用程序你描述的那个！

# c++ - 如何使用 Visual Studio 2012 和 Windows SDK 7.1 编译 VC++ 2010 项目

> ID：11104502
> 
> 赞同：14
> 
> 时间：2012-06-19T15:38:22.027
> 
> 标签：c++, visual-studio-2010, visual-c++, mfc, visual-studio-2012

我在 C++ 中使用 VS2010 完成了很多项目。现在我们已经切换到 VS2012，但我们想继续使用 VS2010 运行时构建项目（我们需要支持 Windows XP）。

据我们了解，这可以使用 Windows SDK 7.1 作为 VC 编译器，因此我们安装了它。VS2012 识别了 SDK，现在我们有了一个`Platform Toolset`名为`Windows7.1SDK`.

构建项目时出现问题，因为某些项目返回：

> 错误 MSB6006：“CL.exe”退出，代码为 -1073741515。

此外，依赖于 MFC 的项目也失败了。MFC 不适用于 Windows SDK？这是否意味着我们需要购买 VS2010 许可证才能将它们安装在具有 VS2012 的机器上，才能使用 VS2010 编译器进行构建？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T08:53:05.740

看起来这根本不可能，主要是因为除了 VS2010 之外什么都没有部署 MFC 库，而且我们有很多项目使用它们。

我们必须购买 VS2010 和 VS2012 的许可证：S

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T06:18:19.370

我会尝试提高 msbuild 详细级别（它位于 Tools->Options->Project and Solution-> MSBuild 中）并使用完整参数检查 CL.exe 的命令。然后检查它是否与您在 VS2010 上看到的不同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T16:28:08.333

微软将在秋季发布更新以在 Visual Studio 2012 中支持 Windows XP，您可以在此 MSDN 博客中阅读更多内容：http: [//blogs.msdn.com/b/vcblog/archive/2012/06/15/10320645.aspx](http://blogs.msdn.com/b/vcblog/archive/2012/06/15/10320645.aspx)

# node.js - 是否有在 node.js 中实现 pusher.com 的库？

> ID：11104505
> 
> 赞同：1
> 
> 时间：2012-06-19T15:38:26.593
> 
> 标签：node.js, pusher

我使用 pusher.com 并想迁移到我自己的主机。是否有在 Node.js 中实现 Pusher.com 协议的库？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T16:31:19.420

[Slanger](https://github.com/stevegraham/slanger)是用 Ruby 编写的 Pusher 协议的开源实现；我不熟悉用 Node.js 编写的。请注意，该协议[是有据可查](http://pusher.com/docs/pusher_protocol)的，因此如果您真的需要它来用于 Node，您可能会编写一个。

# java - 如何进行以下休眠映射？

> ID：11104513
> 
> 赞同：0
> 
> 时间：2012-06-19T15:38:53.007
> 
> 标签：java, hibernate

我有以下数据库架构：

```
table a {
    id,
    state
}

table b {
    id,
    a_id,
    is_valid,
    amount
} 
```

我想要一个休眠映射，只有当 a.state 具有某个值时，我才从表 b 中获取值。这是我拥有的休眠映射（使用[jBoss 文档](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/inheritance.html)中的示例）

```
<discriminator column="state" type="string"/>
<subclass name="ClassB" discriminator-value="VALUE1">
    <join table="b">
        <key column="a_id"/>
        <property name="amount" column="amount"/>
    </join>
</subclass> 
```

当我这样做时，我的 xml 显示一个语法错误，指出必须遵循层次结构。

我所做的是否正确，如果不是，如果有人能告诉我前进的方向，那就太好了。谢谢。

PS - 表 b 中的多个条目将具有 a_id 列。但是 b 中只有一行将设置 is_valid 值，如果我在我的 POJO 中获得这一行就足够了

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T16:18:59.100

在我看来，您正在使用鉴别器策略为每个子类映射一个表。这意味着表 a 和表 b 之间存在 1 - 1 行相关性，其中表 b（子类）的主键也将是表 a 的外键。

但是，您的映射有点奇怪，因为您有

```
<key column="a_id" /> 
```

通常这应该是

```
<key column="id" /> 
```

并且不会有“a_id”列。

但是，您的数据库设计看起来像是一对多关系而不是子类关系。

如果没有您的对象本身，我真的无法说出您想要做什么。

看看关于继承的休眠文档。

[http://docs.jboss.org/hibernate/core/3.6/reference/en-US/html/inheritance.html](http://docs.jboss.org/hibernate/core/3.6/reference/en-US/html/inheritance.html)

# java - 如何在黑莓 JDE 中添加新的模拟器？

> ID：11104516
> 
> 赞同：1
> 
> 时间：2012-06-19T15:39:05.753
> 
> 标签：java, blackberry, blackberry-simulator, blackberry-jde

我正在为 OS 6.0 使用来自黑莓（不是 Eclipse）的标准黑莓编辑器。随附的模拟器适用于型号 9800 Torch，但我想将它用于 Bold 9650。我已经从网上下载了 Bold 9650 模拟器并安装在机器上但我不知道如何将它添加到 JDE 6 中使用。所以请提供任何帮助。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T15:57:39.390

新安装的模拟器应该会自动出现在 BlackBerry JDE 中。如果您有多个版本的 BlackBerry JDE，安装程序只会为其中一个配置模拟器。有关将配置文件复制到 BlackBerry JDE 的其他安装的步骤，请参阅本文。

[BlackBerry JDE 无法识别以前安装的模拟器](http://supportforums.blackberry.com/t5/Testing-and-Deployment/BlackBerry-JDE-does-not-recognize-previously-installed/ta-p/446083)

# c# - 如何在不延迟处理的情况下处理大量 filewatcher 事件

> ID：11104517
> 
> 赞同：1
> 
> 时间：2012-06-19T15:39:07.637
> 
> 标签：c#

为了处理大量的文件观察器事件，我在我的文件观察器中实现了以下代码。

我已将文件夹复制到监视位置该文件夹中有大约 40K 文件和文件夹。问题是队列项目没有立即得到处理。在一段时间内发生的处理。即文件夹复制大约需要 40 分钟。但处理队列从文件复制开始大约需要 4-5 小时

我希望在复制文件夹后立即处理这些事件。

这是我的 FileProcessor 类：

```
class FileProcessor
{
    private Queue<string> workQueue;
    private Thread workerThread;
    private EventWaitHandle waitHandle;

    public FileProcessor()
    {
        workQueue = new Queue<string>();
        waitHandle = new AutoResetEvent(true);
    }

    public void QueueInput(string filepath)
    {
        workQueue.Enqueue(filepath);

        // Initialize and start thread when first file is added
        if (workerThread == null)
        {
            workerThread = new Thread(new ThreadStart(Work));
            workerThread.Start();
        }

        // If thread is waiting then start it
        else if (workerThread.ThreadState == ThreadState.WaitSleepJoin)
        {
            waitHandle.Set();
        }
    }

    private void Work()
    {
        while (true)
        {
            string filepath = RetrieveFile();

            if (filepath != null)
                ProcessFile(filepath);
            else
                waitHandle.WaitOne();
        }
    }

    private string RetrieveFile()
    {
        if (workQueue.Count > 0)
            return workQueue.Dequeue();
        else
            return null;
    }

    private void ProcessFile(string filepath)
    {
        // Some processing done on the file

    }
} 
```

每当引发 FileSystemWatcher.Created 事件时都会使用它：

```
FileProcessor fileprocessor = new FileProcessor()

void onCreated(object source, FileSystemEventArgs e)
{
    try
    {
        fileprocessor.QueueInput(e.FullPath);
    }
    catch (Exception ex)
    {

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T18:45:20.757

由于您仍然有一个线程处理您的`Work`函数，因此您的瓶颈可能就在那里。该线程将只能以`ProcessFile`通过队列的速度进行处理。如果`ProcessFile`需要一段时间才能完成，那肯定会造成瓶颈。

在您的情况下，您提到这`ProcessFile`只是将事件发送到另一个应用程序。您应该检查该应用程序如何处理这些事件。我猜它在返回之前正在执行这些事件的所有处理。

您可能希望考虑让您的其他应用程序将其接收到的事件排队，以便它可以快速返回给调用者。除此之外，您还需要考虑使其以多线程方式处理这些事件，或者找到最大化处理这些事件的效率的方法，否则您只需将瓶颈转移到一个新队列。

# c# - DomainService 删除方法不起作用。为什么？

> ID：11104523
> 
> 赞同：0
> 
> 时间：2012-06-19T15:39:23.037
> 
> 标签：c#, visual-studio-2010, relational-database

我的问题是这样的：

```
 Inspections
            InspectionItems 
```

在我的关系数据库中，我需要“级联”删除，以便周围没有多余的数据。例如，如果我删除一个检查，它还需要删除所有相关项目。

我已将代码写入域服务类：

```
 public void IDInspectionDelete(string id)
        {
            var inspections = from a in ObjectContext.Inspections
                              where a.ID == new Guid(id)
                              select a;
            foreach (Inspection inspection in inspections)
            {
                var items = from a in ObjectContext.InspectionItems
                            where a.InspectionID == inspection.ID
                            select a;
                foreach (InspectionItem item in items)
                {
                    DeleteInspectionItem(item);
                }
                DeleteInspection(inspection);
            }
        } 
```

然后在我的视图模型中调用该函数：

```
 context.IDInspectionDelete(id_string); 
```

...什么都不做。完全没有。不是窥视。代码将逐步执行，没有错误等，但不会删除。我将把它重新写入我的视图模型并调用

```
context.Remove(item) 
```

这应该工作。但我想在 DomainService 类中使用它。

除非，当然，这是一个很大的禁忌。如果是，请解释原因。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T11:20:22.150

**这个问题的解决方案**是使用 ObjectContext 在域服务类中完成这一切；

**域服务类**

```
[Invoke]
public bool DeleteInspection(Guid ID)
{
    bool bResult = false;

    // get the inspection to delete
    Inspection inspection = this.ObjectContext.Inspections.Where(a=>a.ID == ID).FirstOrDefualt();

    // first delete all attached entities
    foreach (InspectionItem item in inspection.Items)
    {
        this.ObjectContext.DeleteObject(item);
    }

    // save changes
    this.ObjectContext.SaveChanges(SaveOptions.AcceptAllChangesAfterSave);

    // then delete item itself
    this.ObjectContext.DeleteObject(inspection);

    // set result to true only if at least one record has been effected
    if (this.ObjectContext.SaveChanges(SaveOptions.AcceptAllChangesAfterSave) >0)
        bResult = true;

    return bResult;        
} 
```

**查看模型**

```
context.DeleteInspection(InspectionID, io =>
{
    if (io.Value)
        MessageBox.Show("Inspection successfully deleted");
}, null); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-20T15:59:52.300

**一种选择**是对数据库表使用 SQL 触发，以便级联删除与应用程序完全无关。这意味着我可以调用`context.Remove(item)`并且数据库将通过删除级联。

以防万一它对人们有用，我也会把我的 SQL：

**SQL**

```
 ALTER TRIGGER [dbo].[InspectionDeleteTrigger] 
   ON  [dbo].[Inspection] 
   INSTEAD OF DELETE
AS 
BEGIN
    -- SET NOCOUNT ON added to prevent extra result sets from
    -- interfering with SELECT statements.
    SET NOCOUNT ON;

    -- Delete ALL Items Linked to deleted Inspection --
    DELETE FROM InspectionItem
    FROM InspectionItem AS tbl JOIN deleted AS d ON tbl.InspectionID = d.ID

    -- Delete current Inspection --   
    DELETE FROM Inspection  
    FROM Inspection AS tbl JOIN deleted AS d ON tbl.ID = d.ID

END 
```

# cookies - 遵守英国 Cookie 法的最佳选择？

> ID：11104524
> 
> 赞同：6
> 
> 时间：2012-06-19T15:39:28.543
> 
> 标签：cookies

需要明确的是，我不是在寻求法律建议，而是在询问哪些技术实现最适合允许用户关闭我网站上的所有或某些 cookie？

理想情况下，用户应该能够选择退出可选 cookie，那么如何实现呢？例如，如果不是在 cookie 本身中，我如何关闭每个用户的 Google Analytics cookie - 以及如何存储这些用户的偏好？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T15:48:34.143

除非用户同意（如 BBC 所做的那样），否则您不会存储*任何cookie。*

这意味着除非您拥有告诉您用户同意的 cookie，否则您不会发出 Google Analytics javascript 或任何其他第三方（或您自己的）代码来存储 cookie（无论是在 javascript 中还是在服务器端完成） ）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T15:53:51.953

看看[唐宁街 10 号](http://www.number10.gov.uk/)的网站。对我来说，他们的合规性在让用户了解网站上的 cookie 方面非常不稳定，但单击右上角的 cookie 链接，您将获得大量关于存储哪些 cookie 的信息。

法律并不意味着您不能使用 cookie，更多的是用户如果不想被跟踪就应该离开网站。[他们隐私政策](http://www.number10.gov.uk/privacy-policy/)上的这段特定文本非常有趣，可能足以涵盖您正在谈论的功能：

> 要选择退出第三方收集有关您在我们网站上的互动的任何数据，请参阅他们的网站以获取更多信息。

如果这种方法对总理来说足够好——他们肯定需要*最*合规的网站来保证安全、隐私和可访问性——它应该对任何人都足够好。

# javascript - 在 jQuery 之前加载 jQuery 插件

> ID：11104531
> 
> 赞同：2
> 
> 时间：2012-06-19T15:40:03.937
> 
> 标签：javascript, jquery, jquery-plugins

我在一个**我没有服务器端访问权限**的平台中工作。这意味着我不能将 javascript 文件直接加载到头部，只能加载到正文中。

这是我的负载方式：

```
function loadjscssfile(filename, filetype){
//http://www.javascriptkit.com/javatutors/loadjavascriptcss.shtml
    if (filetype=="js"){ //if filename is a external JavaScript file
        var fileref=document.createElement('script')
        fileref.setAttribute("type","text/javascript")
        fileref.setAttribute("src", filename)
    }
    else if (filetype=="css"){ //if filename is an external CSS file
        var fileref=document.createElement("link")
        fileref.setAttribute("rel", "stylesheet")
        fileref.setAttribute("type", "text/css")
        fileref.setAttribute("href", filename)
    }
    if (typeof fileref!="undefined")
        document.getElementsByTagName("head")[0].appendChild(fileref)
    }
}

loadjscssfile('https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js','js');
loadjscssfile('http://redacted.com/data.php?rand='+Math.random(),'js');
loadjscssfile('https://raw.github.com/aakilfernandes/jquery.inject/master/jquery.inject.js?rand='+Math.random(),'js'); 
```

但是，我加载的第三个 javascript 文件（一个 jQuery 插件）需要 jQuery。

当我加载页面时出现此错误（在 Chrome 中）

```
Uncaught ReferenceError: jQuery is not defined 
```

我的倾向是我的插件在 jQuery 之前加载。因为如果我刷新页面（当 jQuery 被缓存时），错误就会消失。但是，即使没有缓存 jQuery，我也需要它来工作。想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T15:48:12.277

这不是一个优雅的解决方案，但它总是对我有用：将 jquery.min.js 文件的内容直接复制/粘贴到您的 html 页面

```
 <script> ... </script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T15:43:29.790

我做的是这个

```
if (typeof $ === 'undefined') {
    document.write("<script src='//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js'><\/script>");
    var timeout = 0;
    while (typeof $ === 'undefined' && timeout++ < 100);
} 
```

这将等到 jquery 被加载，然后再继续执行其他任何操作。然后加载你的插件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-03T02:43:08.557

当您尝试时，您必须加载 jQuery 并在加载后运行其他脚本。为此，您可以使用加载程序库，例如[yepnope](http://yepnopejs.com)或[headjs](http://headjs.com/)，请记住，由于您不能将脚本放在头上，因此您必须将加载程序代码放在脚本中。

您的代码将是这样的：

```
yepnope( // or head.js
    'https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js',
    'http://redacted.com/data.php?rand='+Math.random(),
    'https://raw.github.com/aakilfernandes/jquery.inject/master/jquery.inject.js?rand='+Math.random()
); 
```

您可以做的另一件事是将 jquery 脚本放在主体上并在其后加载其他脚本：

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script>
    $.getScript('http://redacted.com/data.php?rand='+Math.random());
    $.getScript('https://raw.github.com/aakilfernandes/jquery.inject/master/jquery.inject.js?rand='+Math.random());
</script> 
```

# asp.net-mvc - Visual Web Developer 2010 Express 中未命中断点

> ID：11104535
> 
> 赞同：2
> 
> 时间：2012-06-19T15:40:36.437
> 
> 标签：asp.net-mvc, web, asp.net-mvc-routing

我正在尝试在我的路由文件中使用域名，并设法找到了一个有用的链接。但是，我无法在 Global.asax.cs 中调试和设置断点，因为它们没有被命中。

我在服务器上使用 Web Developer 2010 Express 和 SQL Server Express。

有任何想法吗 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T19:30:19.723

我还不能发表评论，但您是使用 IIS 还是 Visual Studio 开发服务器托管？如果您无法在应用程序移过您要调试的代码部分之前将调试器附加到托管进程，那么您可能会使用[Debugger.Break()](http://msdn.microsoft.com/en-us/library/system.diagnostics.debugger.break.aspx)方法获得一些运气。

例如：

```
protected void Application_Start()
{
    System.Diagnostics.Debugger.Break();    
    ...app startup code here...
} 
```

然后，一旦您附加了调试器，您应该能够像往常一样越过断点。

# haskell - 如何使用 GADT 将字符串解析为语法树

> ID：11104536
> 
> 赞同：8
> 
> 时间：2012-06-19T15:40:38.797
> 
> 标签：haskell, gadt

[我在这里](http://en.wikibooks.org/wiki/Haskell/GADT)阅读 GADT 介绍，我发现限制程序员只创建正确类型的语法树的想法很棒，我把这个想法放到我的简单 lambda 演算解释器中，但后来我意识到我无法将字符串解析为这个语法树，因为一个解析函数需要根据输入返回不同类型的语法树。这是一个例子：

```
{-# LANGUAGE GADTs #-}
data Ident
data Lambda
data Application

data Expr a where
    Ident :: String -> Expr Ident
    Lambda :: Expr Ident -> Expr a -> Expr Lambda
    Application :: Expr a -> Expr a -> Expr Application 
```

在使用 GADT 之前，我使用的是这个：

```
data Expr = Lambda Expr Expr
          | Ident String
          | Application Expr Expr 
```

GADT 在这里有很大的优势，因为现在我不能创建像`Lambda (Application ..) ..`.

但是使用 GADT，我无法解析字符串并创建解析树。以下是 Lambda、Ident 和 Application 表达式的解析器：

```
ident :: Parser (Expr Ident)
ident = ...

lambda :: Parser (Expr Lambda)
lambda = ...

application :: Parser (Expr Application)
application = ... 
```

现在的问题是：

```
expr = choice [ident, application, lambda] 
```

这显然是行不通的，因为每个解析器都返回不同的类型。

那么，有没有办法使用 GADT 解析字符串并创建语法树？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-19T15:45:35.760

您可以使用 GADT 来创建包含`Expr a`某些未知的类型`a`。

```
data AnyExpr where AnyExpr :: Expr a -> AnyExpr 
```

在您不想限制为特定类型的情况下*，*请`Expr`使用`AnyExpr`.

```
anyExpr :: Parser (Expr a) -> Parser AnyExpr
anyExpr p = fmap AnyExpr p

expr :: Parser AnyExpr
expr = choice [anyExpr ident, anyExpr application, anyExpr lambda] 
```

# cmake - CMake source_group 函数中的 FILES 是什么意思？

> ID：11104538
> 
> 赞同：1
> 
> 时间：2012-06-19T15:40:44.610
> 
> 标签：cmake

```
SOURCE_GROUP(Test FILES ${Test_files}) 
```

检查文档，`FILES`应该是正则表达式。但`FILES`这里的意思是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T18:05:56.173

不确定您正在查看哪些文档，但[v2.8.8](http://www.cmake.org/cmake/help/v2.8.8/cmake.html#command%3asource_group)的文档显示签名为：

> ```
> source_group(name [REGULAR_EXPRESSION regex] [FILES src1 src2 ...]) 
> ```

因此，在这种情况下，“FILES”表示 中指定的文件列表`${Test_files}`应放在名为“Test”的组（或 MSVC 的文件选项卡）中。

# fonts - truetype字体优化

> ID：11104540
> 
> 赞同：1
> 
> 时间：2012-06-19T15:40:47.063
> 
> 标签：fonts, truetype

我在我的 iPhone 应用程序中使用嵌入式字体来管理拉丁文、中文和韩文字符。它太重了，因为它包含许多其他类型的字符（印度、阿拉伯、俄罗斯……）。有什么工具可以删除 ttf 文件中未使用的字符吗？不是一一而是通过选择想要的语言？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T16:51:07.380

您可以使用[http://www.fontsquirrel.com/fontface/generator](http://www.fontsquirrel.com/fontface/generator) 选择*EXPERT...*选项，然后选择*Custom Subsetting...*。现在您可以选择所需的语言。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-13T10:42:14.967

Fontsquirrel 对许可的东西非常敏感。某些字体可能会被列入黑名单。您也可以使用 FontForge 并在弹出菜单中简单地进行多选和“清除”。如果您使用 Windows，则有[windows build](http://www.mpetroff.net/software/fontforge-windows/)。

# c# - 母版页标签的值未更新表单内容页

> ID：11104545
> 
> 赞同：6
> 
> 时间：2012-06-19T15:40:59.320
> 
> 标签：c#, asp.net, master-pages

我有一个内容页面，我正在更新 asp:Label of Master page from content page 的值。值会更新，但更新后的值不可见。我尝试了两种使用方法

1）。定义一个属性（在母版页上）以设置和获取标签值。例如

```
public string setErrorMsg
{        
    get { return lbl1.Text; }
    set { lbl1.Text = value; }
} 
```

2）通过从内容页面中找到控件（母版页的标签）并设置其文本。例如

```
 Label lblMasterError = this.Page.Master.FindControl("lbl1") as Label;
 lblMasterError.Text="text is updated form content page"; 
```

如果我在调试模式下看到它，两者都在更新值，但更新的标签值在内容页面上不可见。这种行为的可能原因是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T21:42:36.573

我不知道为什么找不到您的标签，但我以前也遇到过同样的情况。这对我有用：

在母版页cs中：

```
public void SetErrorMsg(string ErrorMsg)
{
    this.lbl1.Text = ErrorMsg;
} 
```

从后面的 aspx 页面代码（用你的替换 myMasterPage 名称）：

```
 ((myMasterPage)Master).SetErrorMsg("Some error text"); 
```

# java - Logback appender 和 Postfix

> ID：11104546
> 
> 赞同：1
> 
> 时间：2012-06-19T15:41:03.827
> 
> 标签：java, email, postfix-mta, logback, appender

我正在尝试创建一个附加程序来过滤低于错误级别的任何日志并使用这些日志发送电子邮件。这就是我的 logback.xml 文件的样子（只是 appender 部分）：

```
<appender name="EMAIL" class="ch.qos.logback.classic.net.SMTPAppender">
    <filter class="ch.qos.logback.classic.filter.ThresholdFilter">
        <!-- deny all events with a level below ERROR -->
        <level>ERROR</level>
    </filter>
    <smtpHost>${smtpHost}</smtpHost>
    <smtpPort>${smtpPort}</smtpPort>
    <STARTTLS>true</STARTTLS>
    <username>${username}</username>
    <password>${password}</password>
    <to>${mailingList}</to>

    <from>${username}</from>
    <subject>%logger{20} - %m</subject>
    <layout class="ch.qos.logback.classic.html.HTMLLayout"/>
    <cyclicBufferTracker class="ch.qos.logback.core.spi.CyclicBufferTrackerImpl">
          <bufferSize>1</bufferSize>
    </cyclicBufferTracker>
</appender> 
```

`smtpHost`localhost在哪里`username`，`password`属于我在运行应用程序的服务器上创建的用户。它似乎不起作用 - 没有发送电子邮件。

但是，当我为另一台服务器（即 ）设置参数时`smtpHost = smtp.gmail.com`，我会按预期收到电子邮件。

我想这意味着我在服务器上配置后缀的方式有问题。我很乐意在此处发布`main.cf`文件中的任何信息（我只是不想全部发布）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T19:38:30.393

这是一个很长的镜头，但这里有一个想法。Posfix 通常被配置为拒绝来自未发出有效 helo_hostname 的发件人的电子邮件。postfix 的 main.ch 是否有类似于以下的指令？

```
smtpd_helo_restrictions =
        reject_non_fqdn_helo_hostname,
        reject_invalid_helo_hostname

smtpd_sender_restrictions = 
        reject_non_fqdn_sender,
        reject_unknown_sender_domain 
```

如果是这样，您可能希望将[SMTPAppender](http://logback.qos.ch/manual/appenders.html#SMTPAppender)`localhost`的属性设置为合理的值。顺便说一句，可能不应该用于设置和用于后缀。`${username}``<from>``<username>`

BYW，将element的`debug`属性设置为在控制台上查看 logback 的内部消息几乎总是一个好主意。如：`<configuration>``true`

```
<configuration debug="true">...</configuration> 
```

# objective-c - UISlider 只滑动一小段距离

> ID：11104549
> 
> 赞同：0
> 
> 时间：2012-06-19T15:41:11.567
> 
> 标签：objective-c, ios, cocoa-touch

因此，我使用以下代码将 UISlider 放入视图中，但它一次只能滑动大约 10 个点的距离。只能在20点左右的范围内来回拖动。为什么？

```
v = [[UIView alloc] initWithFrame:someFrame];
UISlider *slider = [[UISlider alloc] initWithFrame:CGRectMake(10, 10, 200, 30)];
[v addSubview:slider];
[self.view addSubview:v]; 
```

我已将此代码放入另一个测试项目中，它确实有效。所以它可能是其他一些代码。我想知道以前是否有人遇到过同样的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T15:53:42.133

```
- (BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldReceiveTouch:(UITouch *)touch {
    if([[touch view] isKindOfClass:[UISlider class]])
    {
        return NO;
    }
} 
```

我正在使用`IIViewDeckController`，所以我将这段代码添加到`IIViewDeckController.m`代码中，它解决了问题！

# python - python中的图像注册

> ID：11104551
> 
> 赞同：0
> 
> 时间：2012-06-19T15:41:19.850
> 
> 标签：python, image-processing

我正在做一个项目，该项目需要找出新图像相对于旧图像移动和旋转了多少。我正在尝试使用 fft 来实现它。但是，它适用于某些情况，但适用于其他情况。我遵循的步骤是：

1.  取两张图片，实现canny边缘检测
2.  使用 fft 找出班次并删除班次
3.  将图像转换为极域并找到偏移并将答案转换为弧度

在某些情况下，我得到了正确的答案，但在其他情况下，我得到了（0,0）的移位和 0 弧度的旋转。请提出可能发生这种情况的原因。

这是代码：

```
class Register:
    '''
        Class for registering images based on FFT. The usage is as follows:
        >>> im0 = imread('image0.jpg', flatten = True)
        >>> im1 = imread('image1.jpg', flatten = True)
        >>> reg = Register(im0, im1)
        >>> shift = reg.shift
        >>> rotation = reg.theta

        Note:
            1\. This image registration technique is not very reliable and
               is valid only for small rotation
            2\. The class is very slow, since it depends on canny edge detection
               module for finding edges.
    '''
    def __init__(self,imin0, imin1, PROCESSED = False):
        '''
            This method is used to execute all the routines required to get the
            shift and the rotation
        '''
        # find edges to remove low frequency signals and suppress information
        if PROCESSED:
            im0 = imin0
            im1 = imin1
        else:
            im0 = Canny(imin0, 0.85, 5).grad
            im1 = Canny(imin1, 0.85, 5).grad

        # A major drawback of this method is that it can operate only on square
        # images. Hence we will make square image of any input image

        im0 = self.createsquareim(self.clearBorder(im0))
        im1 = self.createsquareim(self.clearBorder(im1))

        self.shift = self.findShift(im0,im1)
        imtrans = shift(im1, self.shift)
        # Remove the shift in the image. This is mandatory before we find theta
        impolar0 = self.makePolar(im0)
        impolar1 = self.makePolar(imtrans)
        self.index = self.findShift(impolar0, impolar1)[1]
        self.theta = ((self.index*90.0)/impolar1.shape[0])

    def clearBorder(self,im,width = 50, color = 255):
        '''
            A little house keeping to clear any border noise
        '''
        im[:,:width] = color
        im[:,-width:] = color
        im[:width,:] = color
        im[-width:,:] = color

        return im

    def createsquareim(self, im):
        """
        function createsquareim
        input:numpy ndarray
        output:numpy ndarray

        The function takes in an image array and converts it into square
        image by creating empty columns and rows.
        """
        lenmax = max(im.shape[0],im.shape[1])
        imout = zeros((lenmax,lenmax))
        imout[:,:] = 255
        imout[:im.shape[0],:im.shape[1]] = im
        return imout

    def findShift(self, im0, im1):
        '''
            This method is based on fft method of registering images.
        '''
        IM0 = fft2(im0)
        IM1 = fft2(im1)

        numer = IM0*conj(IM1)
        denom = abs(IM0*IM1)

        pulse_im = ifft2(numer/denom)
        mag = abs(pulse_im)
        x, y = where(mag == mag.max())

        x = array(x.tolist())   # Issues with read only arrays
        y = array(y.tolist())

        X, Y = im0.shape

        if x > X/2:
            x -= X
        if y > Y/2:
            y -= Y

        return [x[0], y[0]]

    def makePolar(self, im):
        '''
            This method will convert the cartesian coordinates image
            to polar coordinates image. The relation between the two
            domains is
              F(r,theta) = f(r*cos(theta),r*sin(theta))
            To make the process fast, we are using map_coordinates function
        '''
        m, n = im.shape
        r_max = hypot(m, n)

        r_mat = zeros_like(im)
        t_mat = zeros_like(im)

        r_mat.T[:] = linspace(0, r_max, m)
        t_mat[:] = linspace(0, pi/2, n)

        x = r_mat*cos(t_mat)
        y = r_mat*sin(t_mat)

        imout = zeros_like(im)
        imout = map_coordinates(im, [x, y], cval = 255)

        return imout 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T17:05:43.607

我已经使用 SIFT 和 RANSAC 算法编写了一个用于图像配准的 python 脚本，您可以在[http://github.com/vishwa91/pyimreg](http://github.com/vishwa91/pyimreg)找到代码。此外，可以在[http://cyroforge.wordpress.com/2012/07/05/image-registration-using-python/找到相同的小介绍](http://cyroforge.wordpress.com/2012/07/05/image-registration-using-python/)

# php - 数据库行上的 PHP array_push 不适用于所有行（使用 WHILE 循环）

> ID：11104552
> 
> 赞同：-1
> 
> 时间：2012-06-19T15:41:22.830
> 
> 标签：php, mysql, database, arrays

我希望在 Array 变量中为数据库中的每一行添加一个*__ 。*
在我的 testTable 中，我目前有 2 行，尽管在运行此代码时只有一个被“推送”到数组中。

```
$result = mysql_query("SELECT * FROM testTable ORDER BY dateAdded DESC");
while($row = mysql_fetch_array($result)) {
    $Array = array();
    array_push($Array, array('id' => $row['id'], 'title' => $row['title'], 'desc' => $row['desc'],  'image' => $row['image'], 'dateAdded' => $row['dateAdded']);
}

print_r($Array); 
```

输出：

```
Array ( [0] => Array ( [id] => 2 [title] => test test test [desc] => text text text [image] => http://domain.com/sampleImg.png [dateAdded] => 2012-06-13 15:58:43 ) ) 
```

例如，当我试图呼应标题时，它起作用了……像这样：

```
while($row = mysql_fetch_array($result)) {
    echo $row['title'];
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-19T15:43:05.407

`$Array`应该`$productsArray`并且应该在你的循环之外

```
$result = mysql_query("SELECT * FROM testTable ORDER BY dateAdded DESC");
$productsArray= array();
while($row = mysql_fetch_array($result)) {
    array_push($productsArray, array('id' => $row['id'], 'title' => $row['title'], 'desc' => $row['desc'],  'image' => $row['image'], 'dateAdded' => $row['dateAdded']);
}

print_r($productsArray); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T15:47:35.363

虽然@JohnConde 的答案会起作用，但如果您像这样构建代码会更好：

```
$result = mysql_query("SELECT id, title, `desc`, image, dateAdded FROM testTable ORDER BY dateAdded DESC");
$productsArray = array();
while ($row = mysql_fetch_array($result)) {
    $productsArray[] = $row;
}

print_r($productsArray); 
```

`SELECT *`如果您只打算使用某个字段子集，那就太浪费了。重构一个要添加到的数组也是浪费的`$productsArray`，它本质上等于返回的数组`mysql_fetch_array()`。

**编辑：** 还值得注意的是，`mysql`不再建议在新应用程序中使用该驱动程序。我建议您改用[PDO](http://us3.php.net/manual/en/book.pdo.php)或[MySQL Native Driver](http://php.net/manual/en/book.mysqlnd.php)。

# mysql - 使用连接在我的 sql 中显示空行

> ID：11104554
> 
> 赞同：0
> 
> 时间：2012-06-19T15:41:23.563
> 
> 标签：mysql

在以下查询的帮助下，我只能获取 15 行，但实际行为 16，其中一行为空

那么我如何才能获取该行也总共我应该得到 16 行请帮助我....

```
select p.partnerid,p.name,count(*) as accounts,sum(c.amount) as amount,sum(c.netamt) as netamt,
sum(c.netamt - c.amount) as interest,
sum(case when c.installment = 20 then c.amount else 0 end) as Twenty,
sum(case when c.installment = 10 then c.amount else 0 end) as Ten,
sum(case when c.installment = 5 then c.amount else 0 end) as Five,
sum(case when c.installment = 2 then c.amount else 0 end) as Two
from partnerinfo p left outer join customerinfo c on p.partnerid = c.partnerid
where c.startdate >= '2011-3-15' and c.startdate <= '2012-12-30' and p.manager=1 group by p.partnerid 
```

即使我将日期从 2011-3-15 更改为 2012-3-15 空行也应该显示。我尽力了我的水平，但无法达到。

请帮我.....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T15:49:04.977

尝试这个：

```
select p.partnerid,p.name,count(*) as accounts,sum(c.amount) as amount,sum(c.netamt) as netamt,
sum(c.netamt - c.amount) as interest,
sum(case when c.installment = 20 then c.amount else 0 end) as Twenty,
sum(case when c.installment = 10 then c.amount else 0 end) as Ten,
sum(case when c.installment = 5 then c.amount else 0 end) as Five,
sum(case when c.installment = 2 then c.amount else 0 end) as Two
from partnerinfo p left outer join customerinfo c on p.partnerid = c.partnerid
where (c.startdate is null OR (c.startdate >= '2011-3-15' and c.startdate <= '2012-12-30')) 
and (p.manager is null OR p.manager=1)
group by p.partnerid 
```

# iis - 在 IIS 7.0 httpmodule 中设置 ServerVariable

> ID：11104560
> 
> 赞同：1
> 
> 时间：2012-06-19T15:41:39.193
> 
> 标签：iis, iis-7, iis-7.5, httpmodule, server-variables

我正在尝试在 IIS 7.0 的 httpmodulle 中设置服务器变量（“LOGON_USER”），但我没有归档它。

到目前为止，我的 BeginRequest 函数...

```
 BindingFlags temp = BindingFlags.NonPublic | BindingFlags.Instance | BindingFlags.Static;

        MethodInfo addStatic = null;
        MethodInfo makeReadOnly = null;
        MethodInfo makeReadWrite = null;

        Type type = application.Request.ServerVariables.GetType();
        MethodInfo[] methods = type.GetMethods(temp);
        foreach (MethodInfo method in methods)
        {
            switch (method.Name)
            {
                case "MakeReadWrite": makeReadWrite = method;
                    break;
                case "MakeReadOnly": makeReadOnly = method;
                    break;
                case "AddStatic": addStatic = method;
                    break;
            }
        }

        makeReadWrite.Invoke(application.Request.ServerVariables, null);
        string[] values = { "LOGON_USER", "test" };
        addStatic.Invoke(application.Request.ServerVariables, values);
        makeReadOnly.Invoke(application.Request.ServerVariables, null); 
```

在我的搜索过程中，我了解到该解决方案适用于较旧的 IIS，但不适用于 IIS 7.0 或 7.5。

关于如何在 IIS 7.0 中完成的任何想法？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T15:04:16.460

解决了：

```
 HttpApplication application = (HttpApplication)source;
    HttpContext context = application.Context;

    context.User = new GenericPrincipal(new GenericIdentity("test"), null); 
```

`new GenericPrincipal(new GenericIdentity("test"), null)`将“测试”放在**LOGON_USER**变量中

更多信息在这里：[http ://learn.iis.net/page.aspx/170/developing-a-module-using-net/](http://learn.iis.net/page.aspx/170/developing-a-module-using-net/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T11:42:18.973

使用 IIS 的 URL 重写模块设置服务器变量时，您必须明确指定允许设置的服务器变量。这对于您自己的代码也可能是必需的。请参阅：[http](http://learn.iis.net/page.aspx/686/setting-http-request-headers-and-iis-server-variables/) ://learn.iis.net/page.aspx/686/setting-http-request-headers-and-iis-server-variables/ （并搜索“允许更改服务器变量”）

# sql - 获取与查询不匹配的连接行

> ID：11104561
> 
> 赞同：0
> 
> 时间：2012-06-19T15:41:40.670
> 
> 标签：sql

我有一个实习生的申请，他们可以申请实习。我们有一个脚本可以自动使实习生合格。我想招收所有没有实习资格的实习生。

数据库是这样的：

```
 Intern (Id,...)
 Application (Id, status, intern_id, internship_id,...)
 Internship (Id,...) 
```

对于状态，我们有“已申请”、“合格”、“当前”和“完成”基本上我需要为没有“合格”状态的应用程序的实习生提出加入请求，但我的 sql 技能非常基本.

**编辑**

忘了说一个实习生可以申请多个实习生，一个实习生只能有一个实习的资格，但他仍然可以申请另一个，所以这行不通

```
SELECT *
FROM Intern i
INNER JOIN Application a ON i.Id = a.intern_id
WHERE a.status <> 'qualified' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T15:43:51.863

```
SELECT *
  FROM Intern i
 WHERE NOT EXISTS
    (SELECT *
       FROM Intern j
          , Application a
      WHERE j.id = a.intern_id
        AND i.id = j.id
        AND a.status = 'qualified') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T15:43:52.633

在 a 中包含状态`LEFT JOIN`，并过滤不匹配的内容，如下所示：

```
SELECT  ....
FROM    Intern i
        LEFT JOIN
                Application a
                ON i.Id = a.intern_id
                AND a.status = 'qualified'
WHERE   a.Id IS NULL 
```

显然，替换您的列列表！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T15:44:32.073

```
SELECT * FROM Intern
WHERE Id IN ( SELECT Intern_id FROM Application WHERE status <> 'qualified' ); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-19T15:46:10.760

此查询应返回您要查找的内容：

```
SELECT *
FROM Intern i
INNER JOIN Application a ON i.Id = a.intern_id
WHERE a.status <> 'qualified' 
```

显然，您可以将 * 替换为您要查找的字段。如果您正在寻找没有资格的实习生，我认为您不需要实习表。这确实假设每个实习生只有一个应用程序......如果不是这种情况，您可以使用此查询：

```
SELECT *
FROM Intern i
WHERE i.Id IN
(
 SELECT intern_id
 FROM Application a
 WHERE a.status <> 'qualified'
) 
```

# css - Chrome 中的 100% 宽度问题

> ID：11104563
> 
> 赞同：0
> 
> 时间：2012-06-19T15:41:51.883
> 
> 标签：css, layout

我正在尝试创建液体布局，以便站点的左侧根据屏幕尺寸扩展，而右侧保持固定宽度。这在 IE 中运行良好，但在 Chrome 中，左侧只是扩展内容的长度，而不是空间的全部长度。

```
#bbContent{width:100%; min-width:829px;}
#leftActivity
{
float:left;
margin-right:334px;
min-width:421px;
margin-top:18px;
padding-left:14px;
padding-right:60px;
overflow:hidden;
}
#rightActivity
{
float:right;
width:320px;
margin:18px 14px 0 -334px;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T16:07:41.380

这是你想要的？

[http://jsfiddle.net/KnVrA/1/](http://jsfiddle.net/KnVrA/1/)

leftActivity 不展开是有意义的，因为它是浮动的，如果内容不是那么长，那么它就不会展开

编辑：使用 Kyomu 的小提琴并取出一些东西并重新排列一些东西

更新：使用基于百分比的[http://jsfiddle.net/KnVrA/2/](http://jsfiddle.net/KnVrA/2/)

您可以在左侧添加包装器以在右侧创建填充

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T17:30:32.840

我通过在左侧添加一个包装器并从#leftActivity 中删除浮动来更正了解决方案。在包装上添加负边距，并从右侧删除负边距。

```
#leftWrap{float:left; width:100%; min-width:421px; margin-right:-334px;}
#leftActivity
{
margin-right:334px;
margin-top:18px;
padding-left:14px;
padding-right:60px;
overflow:hidden;
}
#rightActivity
{
float:left;
width:320px;
margin:18px 14px 0 0px;
} 
```

# gwt - 胖/胖客户端与瘦客户端

> ID：11104568
> 
> 赞同：1
> 
> 时间：2012-06-19T15:42:07.370
> 
> 标签：gwt, servlets, thin-client, thick-client

我有一个问题，我正在使用 Servlet 和 JSP 开发基于 Java 中的 REST API 的桌面 Web 应用程序，但是我的老板说这不是创建 Web 应用程序的最佳方式，因为 servlet 和 JSP 工作得像胖/厚客户端（对服务器的请求使应用程序下载所有数据内容，而不是像 GWT 那样的部分），他建议使用 GWT，因为它作为瘦客户端工作。

当我在 Internet 上查找时，我没有看到 servlet 作为胖客户端工作，所以我的问题是为什么 GWT 比 servlet 更好？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T16:48:02.600

GWT 解决了与 servlet 不同的问题。GWT 是创建客户端的工具，而 servlet/JSP 是用于告诉服务器向客户端发送什么的工具。

例如，我的服务器使用 JSP 为 GWT 客户端提供服务，并使用 servlet 将客户端连接到我的数据库。我一次性全部使用！你可以只用一个。

您可以使您的 GWT 客户端任意粗细。您甚至可以在根本没有服务器的情况下运行 GWT 应用程序。

如果您想要一个用 Java 制作复杂的跨浏览器 Web 应用程序的好工具，请使用 GWT。应该单独做出使用 JSP 或 servlet 的决定。

# ios5 - 如何在 iPhone 应用程序的 GMGridView 中结合移动单元格 + 删除选项

> ID：11104574
> 
> 赞同：2
> 
> 时间：2012-06-19T15:42:28.070
> 
> 标签：ios5, edit, gmgridview

我想结合移动单元格和选项来删除特定单元格，如 GMGridView 中的 iOS 跳板。我不明白如何组合这些功能，以便用户可以选择移动单元格，如果用户想删除他有交叉按钮的单元格。

有人知道这件事吗？

# json - json格式化字符串到数字

> ID：11104577
> 
> 赞同：0
> 
> 时间：2012-06-19T15:42:35.777
> 
> 标签：json, visualization

我的 Json 输出生成；

```
[ 
  {
    "a1_id":"7847TK10", 
    "output2":"7847TK10", 
    "output4":"something", 
    "output5":"3stars.gif", 
    "output9": "269000", 
... 
```

等等等等

谷歌可视化 api 要求 output9 元素的数字格式，例如： `"output9": 269000`而不是`"output9": "269000"`. 我怎样才能为这个元素实现这一点？

我的 json.php 生成这样的 json 输出：

```
 ?>
 {
 "total": <?php echo $total ?>,
 "success": true,
 "rows": [ 
```

```
 // Iterate over the rows
    $nextRow= $result->nextRow();
    $r      = 1;
    $info   = array();

    while ( $nextRow ) {

        $nextColumn = $result->nextColumn();

        // Has this column been printed already
        if ( $unique )
        {
            $d = $result->getDataForField($unique);
            if ( array_key_exists($d, $already) )
            {
                $nextRow= $result->nextRow();
                continue;
            }
            $already[$d] = true;
        }

        echo '{';
        // Iterate over the columns in each row

        while ( $nextColumn )
        {

            // Get the variable
            $variable       = $result->getOutputVariable();
            $name           = $variable->getName(true);
            $data           = $result->getDataForField();

            if ( !isset($info[$name]) ) {
                $info[$name]['translate']   = $variable->shouldTranslate();
                $info[$name]['type']        = $variable->getDataType();
                $info[$name]['linkable']    = $variable->isLinkable();
            }

            // Translate the data if requested
            if ( $info[$name]['translate'] ) {
                $data   = LQMTemplate::_($data);
            }

            $data   = $variable->format($data, false);

            $type   = $info[$name]['type'];
            if ( ($type == 'bool') or ($type == 'boolean') )
            {
                $data = $data ? '1' : '0';
                echo "'$name':$data";
            } elseif ( $encode ) {
                // Can we use json_encode ?
                // str_replace because some versions of PHP have a bug that will over escape forward slashes
                echo "\"$name\":".str_replace('\\/', '/', json_encode($data));
            } else {
                $data   = LQMUtility::jsonEscape($data, '"');
                //echo "'$name':\"$data\"";
                echo "\"$name\":\"$data\"";

            }

            // Conditionally print the next column
            $nextColumn = $result->nextColumn();
            if ( $nextColumn ) echo ",\n ";

        }

        // Conditionally print the next column
        $nextRow = $result->nextRow();

        echo $nextRow ? "},\n" : "}\n";
        $r++;

    }

unset($result);
echo ']}';
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T15:46:37.680

这取决于您如何生成 JSON。

例如，如果您使用的是 Ruby 后端，您可以调用：

```
"output9" => output9.to_i 
```

不同语言（例如 Java 和 Javascript 具有函数）中有各种帮助方法`parseInt()`可以将字符串更改为整数。

**编辑：**

如果您的 JSON 是由 PHP 生成的，请将字符串转换为整数：

```
$json['output9'] = int($output9_value); 
```

那应该去掉引号。

# forms - 尝试向销售人员发布潜在客户并获取电子邮件副本

> ID：11104580
> 
> 赞同：0
> 
> 时间：2012-06-19T15:42:39.380
> 
> 标签：forms, asp-classic, salesforce

我们网站上的 web 表单已经有很长时间了，结果被发布到一个 ASP 页面，该页面通过电子邮件将结果发送给我们。最近我们与 SalesForce 签约，并希望使用该功能将这些数据直接提交给 SalesForce。我可以通过直接发布到他们的 URL 来成功设置，但我仍然希望能够收到正在提交的数据的电子邮件副本，以防万一 SalesForce 出现问题并且数据没有进入销售队伍系统——我们会有备份。

有没有办法以简单的方式完成此任务？我不是一个程序员，但可以理解大量的经典asp。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T07:40:38.050

好吧，对我来说，将旧帖子保留到 ASP 页面然后再将帖子发布到 SalesForce（反之亦然）对我来说似乎是合乎逻辑的。像这样发送两封电子邮件。对我来说，这种工作方式似乎是一种方式，你也可以从你的表单中发送电子邮件。如果您发布该表单和 ASP 页面，我们可以看看它。

# c# - 为一个对象使用 300 多个属性

> ID：11104584
> 
> 赞同：0
> 
> 时间：2012-06-19T15:43:09.137
> 
> 标签：c#, .net, visual-studio, object, attributes

只是想问一下在 .NET Framewok (C#) 中使用具有 300 多个属性的对象的缺点（我的意思是内存或响应时间）。

我正在考虑将不同类中的属性分开，但我的问题是属性之间没有很大的关系。

我不会做任何复杂的计算，我只会填充 instatiaded 对象的属性并将他发送到另一个程序，该程序将把他送回去。

你觉得怎么样

`EDIT`

在运行我的程序时，我将只有一个对象。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-19T15:45:39.713

最大的缺点：**可读性**。

具有 300 个属性的类（我假设您的意思是属性，因为 .NET 属性具有特定的技术含义）太大而无法阅读和理解。如果，如您所说，您*应该*`the attributes don't have a big relation between them`寻找如何将它们分解为更小的相关项目类别。

 *您的描述：

> 我不打算做任何复杂的计算，我只会填充 instatiaded 对象的属性并将他发送到另一个程序，该程序将把他送回去。

这似乎表明需要在系统之间传递一个 DTO（数据传输对象） - 我再次认为，您应该考虑将对象分解为几个（因此，如果相关项目发生变化，您不必更改*整个*界面）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T16:05:39.637

不，我认为不会。Infragistics ultragrid 拥有大约（我的近似）不到一千种属性和方法。并且运行正常。现在，如果您将其中的 10 个控件放在您的程序中会怎样。也没什么区别。我认为可以安全地假设您可以添加任意数量的内容，因为如果您至少有未使用的 1GB 内存空间，

这只是我的近似值，您也可以拥有自己的：1 个属性，平均 250 个字节（1 个字符 = 2 个字节）所以，

1 073 741 824/250 字节 = 4 294 967.3 属性

此外，您还拥有 HD 的虚拟内存作为备份。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T16:19:13.420

一个词：**抽象**

如果你有一个包含 300 个属性的大类，那么在整个项目中你只有一个大的抽象抽象。

您可能是唯一使用它的人，但可能几年后，当您必须返回并更改某些内容时，您可能会对您所做的事情感到困惑。

下面的这个类很好，但它可能会遗漏一些功能。

```
public class Person
{
    public string FirstName { get; set; }
    public string LastName { get; set; }
    public string FullName { get; set; }
    public char Gender { get; set; }
    public string Social { get; private set; }
} 
```

所有这些属性都可以在函数式程序中使用，但您可以为自己提供更多功能。

下面的示例被重构为将 Social 抽象为它自己的类`SSN`：

```
public class Person
{
    public string FirstName { get; set; }
    public string LastName { get; set; }
    public string FullName { get; set; }
    public char Gender { get; set; }
    public SSN Social { get; private set; }
}

public class SSN
{
    public const int SSN_LENGTH = 9;

    public string FirstThree { get; set; }
    public string MiddleTwo { get; set; }
    public string LastFour { get; set; }

    public SSN(string ssn)
    {
        FirstThree = ssn.Substring(0, 3); 
        MiddleTwo = ssn.Substring(2, 2);
        LastFour = ssn.Substring(5, 4);
    }

    public string ToString(bool format = false)
    {
        string formatDelimiter = "";
        if (format)
        {
            formatDelimiter = "-";
        }

        return FirstThree + formatDelimiter + MiddleTwo + formatDelimiter + LastFour;
    }
} 
```

通过将 Social 抽象为一个`SSN`类，我现在可以对社会安全号码进行更多控制并添加功能。当我通过他们社交的最后四个人寻找一个人时，我可以轻松地使用以下代码：

```
string lastFour = "0000";
List<Person> Persons = new List<Person>();
Person foundPerson = Persons.Where(x => x.Social.LastFour == lastFour).First(); 
```

这只是一个小例子，它可以扩展到更复杂的部分。这将为系统提供更好的功能，并且也更容易理解。*

# perl - FormMail.pl 1.93 多 URL 联系表格

> ID：11104588
> 
> 赞同：-4
> 
> 时间：2012-06-19T15:43:29.560
> 
> 标签：perl, url, formmail

我正在使用 FormMail.pl 1.93 版进行表单提交。我之前曾针对 FormMail 3.14m1 提出过这个问题，但现在我使用的是 FormMail.pl 1.93 版

我有一个单一的联系我们表格，我想做的是在我的网站上随处使用这个单一的表格，例如contactus.html（不是这个表格的多个副本），因为我的网站根据部门有不同的联系我们部分.

假设营销的联系我们表格应该通过电子邮件发送至technical@mydomain.com，销售联系我们的表格应该通过电子邮件发送给sales@mydomain.com，人力资源的联系我们表格应该通过电子邮件发送给hr@mydomain.com。

如何在将提交重定向到相应部门的电子邮件地址时使用单一表单？

我正在使用 FormMail.pl 1.93 版进行电子邮件提交

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T08:56:08.400

FormMail 1.93 似乎是来自[Matt's Script Archive](http://en.wikipedia.org/wiki/Matt%27s_Script_Archive)的版本。该站点上的程序编写得很糟糕，可能存在错误，并且（毫无疑问，您自己发现了）不受支持。甚至马特赖特本人[也不再推荐](http://www.scriptarchive.com/nms.html)使用它们。

最好建议您使用[nms 项目](http://nms-cgi.sourceforge.net/)中的版本。听起来您使用的是 nms 的 3.14m1 版本，但由于某种原因停止了。这是为什么？

无论您使用哪个版本，您的问题基本相同。在几乎任何版本的 FormMail 中，电子邮件收件人要么在程序中进行硬编码，要么从 HTML 页面上的表单输入（通常是隐藏的表单输入）派生而来。如果您对不同的电子邮件地址使用相同的程序安装，则无法在程序中对地址进行硬编码（希望是显而易见的原因）。因此，您只能从 HTML 页面获取地址。

但是你说你想对不同的联系地址使用相同的表格。我不确定你认为这将如何运作。表单如何知道它是如何被使用的？您是否可能使用 iframe 将表单嵌入到各个页面中？我想可能会根据表单的访问方式来更改收件人表单输入的值。您需要使用 Javascript 来执行此操作。

解决此问题的推荐方法是拥有从几个不同 HTML 表单调用的 FormMail 程序的单个副本。

# gps - 有没有办法将实际的街道地图坐标转换为一组 GPS 坐标？

> ID：11104597
> 
> 赞同：1
> 
> 时间：2012-06-19T15:43:58.897
> 
> 标签：gps, gis

我想知道有没有办法将实际的街道地图坐标转换为一组[GPS 坐标](http://en.wikipedia.org/wiki/World_Geodetic_System)。我在想，如果我在矩形街道地图的拐角处有一组 GPS 坐标，我实际上可以将 GPS 坐标放在该区域的任何点上。这是合乎逻辑的，但我不知道该怎么做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T15:53:06.960

[Geotools](http://docs.geotools.org/latest/userguide) Java 项目拥有从一个坐标系转换到另一个坐标系所需的所有工具。尽管我很害怕，但我不知道 C++ 中有任何类似的东西。

那里有绝对丰富的坐标系（请参阅：[http](http://en.wikipedia.org/wiki/Geographic_coordinate_system) ://en.wikipedia.org/wiki/Geographic_coordinate_system ），因此您需要更具体地了解您的街道地图坐标格式提供更多细节。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T15:53:37.413

> 我想我明白了这个概念。为此，您需要两种成分：1\. 规模和.. 2\. 角落样品。
> 
> 制作一个程序来偏移地图上的标记点很容易，但这需要“比例”（例如 1 英寸：121001 米）和四个角中至少一个角的“坐标”样本（ top-left,top-right,bottom-left,bottom-right) 用于偏移和获取。
> 
> 从需要的这些变量中，我们可以轻松提取以获取在地图上标记的坐标。

主要编辑：（
注意：忽略我之前写的）
变量：

```
mw = 2d mapwidth       
mh = 2d mapheight     
x = your 2d x coordinate             
y = your 2d y coordinate          
lat = latitude (our N or ?)          
lon = longitude (our N or ?) 
```

公式：

```
lat = 180 + ( (x / mw) * 360) )          
long = 90 + ( (y / mh) * 360) ) 
```

解释：
遵循使用的公式：

```
x = (mw) * (180 + latitude) / 360                   
y = (mh) * (90 + longitude) / 180 
```

我个人将上面的公式转置来找到我们的纬度和经度。
我希望这可以解决您的问题，这是您问题的适当答案。
不要忘记提高我的回答，以挽救我的荣誉免于早些时候的屈辱。jk。:)

# r - 查找大于矩阵或向量中指定值的矩阵行（按列）

> ID：11104598
> 
> 赞同：2
> 
> 时间：2012-06-19T15:44:01.690
> 
> 标签：r, matrix

我有以下矩阵：

```
m = matrix(c(1:12), nrow=4)
p = matrix(c(2,7,11), nrow=1) 
```

`m`对于and的每一列`p`，我想找到列中`m`的值小于列中的值`p`

```
p = 1 6 11 

m = 1 5 9
    2 6 10
    3 7 11
    4 8 12 
```

这样我就可以得到这样的东西：

```
ans = m[,] > p[,]

ans = 
    F F F
    T F F
    T T F
    T T T 
```

（或类似的东西）

我已经尝试过`m[,] > p[,]` 并且也设置`p`为向量，但都不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T15:49:36.707

```
m > p[rep(1, 4,),] 
```

将 p 的第 1 行复制 4 次，以便它们现在大小相同，并且可以进行 > 比较。

可以使用以下方法使其更通用：

```
m > p[rep(1, nrow(m),),] 
```

这样，p 单行复制的次数与 m 行一样多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T15:53:29.857

`mapply(function(x,y) x > max(y), as.data.frame(m), as.data.frame(p))`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T15:50:23.053

```
lapply(1:length(p), function(x) m[p[x] > m[,x],x])
[[1]]
[1] 1

[[2]]
[1] 5 6

[[3]]
[1]  9 10 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-19T15:53:57.020

您还可以`apply`对每一行进行相等性测试`m`

```
> t(apply(m, 1, function(x) x > p))
      [,1]  [,2]  [,3]
[1,] FALSE FALSE FALSE
[2,] FALSE FALSE FALSE
[3,]  TRUE FALSE FALSE
[4,]  TRUE  TRUE  TRUE
> 
```

如果我使用你的第二个，我会得到你的答案`p`

```
p <- c(1, 6, 11)

> t(apply(m, 1, function(x) x > p))
      [,1]  [,2]  [,3]
[1,] FALSE FALSE FALSE
[2,]  TRUE FALSE FALSE
[3,]  TRUE  TRUE FALSE
[4,]  TRUE  TRUE  TRUE
> 
```

# specflow - 单独汇编中的规范流步骤定义

> ID：11104604
> 
> 赞同：0
> 
> 时间：2012-06-19T15:44:28.397
> 
> 标签：specflow

我有两个项目 - 包含 Specflow 功能的“功能”和包含 Specflow 步骤定义的“步骤”。我在“功能”项目 app.config 中有以下设置

```
<specFlow>
<!-- For additional details on SpecFlow configuration options see https://github.com/techtalk/SpecFlow/wiki/Configuration -->
<stepAssemblies>
  <stepAssembly assembly="Steps" /> 
</stepAssemblies></specFlow> 
```

但是当我尝试调试我的功能文件时出现此错误：无法加载文件或程序集“步骤”或其依赖项之一。该系统找不到指定的文件。

我错过了什么？不能在两个单独的程序集中指定功能和步骤吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T15:47:16.803

对不起，我明白了！忘记在“功能”项目中添加对项目“步骤”的引用

# linux - 如何覆盖 Linux 下 elf 可执行文件的 .interp 标头中指定的链接器？

> ID：11104609
> 
> 赞同：5
> 
> 时间：2012-06-19T15:44:39.600
> 
> 标签：linux, cross-compiling, elf, dynamic-linking

我有一个交叉编译器，它在其 .interp 标头中指定了一个自定义加载器：

```
objdump -s beaglebone/x86_64-angstromsdk-linux/usr/bin/armv7a-angstrom-linux-gnueabi/arm-angstrom-linux-gnueabi-g++ | head

beaglebone/x86_64-angstromsdk-linux/usr/bin/armv7a-angstrom-linux-gnueabi/arm-angstrom-linux-gnueabi-g++:     file format elf64-x86-64

Contents of section .interp:
 400200 2f757372 2f6c6f63 616c2f6f 65636f72  /usr/local/oecor
 400210 652d7838 365f3634 2f737973 726f6f74  e-x86_64/sysroot
 400220 732f7838 365f3634 2d616e67 7374726f  s/x86_64-angstro
 400230 6d73646b 2d6c696e 75782f6c 69622f6c  msdk-linux/lib/l
 400240 642d6c69 6e75782d 7838362d 36342e73  d-linux-x86-64.s
 400250 6f2e3200                             o.2\. 
```

我希望能够在不将其安装到系统位置的情况下使用此二进制文件。是否可以覆盖 .interp 标头中指定的加载程序并指示 Linux 使用系统加载程序（`/lib/x86_64-linux-gnu/ld-linux-x86-64.so.2`）？尽管无法执行支持程序，但手动运行在一定程度上有效`arm-angstrom-linux-gnueabi-g++`。`/lib/x86_64-linux-gnu/ld-linux-x86-64.so.2`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T17:18:05.510

[http://nixos.org/patchelf.html](http://nixos.org/patchelf.html)

# apache - Apache 重写规则类似于 Nginx try_files

> ID：11104610
> 
> 赞同：5
> 
> 时间：2012-06-19T15:44:51.767
> 
> 标签：apache

在 Nginx 中，我使用了 try_files，它基本上接受对域上文件的任何请求，并通过一个名为 file_parse.php 的自定义 php 脚本传递它。在 Nginx 中它看起来像这样：try_files $url /file_parse.php

如果该文件确实存在于文档根目录中，则它不使用 try_files。Nginx 中的此规则不会重定向用户，例如，如果用户键入[http://www.domain.com/123456.html](http://www.domain.com/123456.html)该地址会显示在他们的浏览器中，但 file_parse.php 需要 123456.html 并回显 html 代码基于数字（123456）。如果 file_parse.php 没有任何要回显的内容，则 file_parse.php 为客户端设置 404 标头。

Apache中是否存在类似的东西？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T21:15:52.937

找到了答案，似乎有效，error.log 中没有错误：

```
<Directory /this/is/the/directory/>
RewriteEngine on
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . file_parse.php [L]
</Directory> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T18:06:36.237

> Apache中是否存在类似的东西？

查看 mod_rewrite 的[RewriteMap](http://httpd.apache.org/docs/current/mod/mod_rewrite.html#rewritemap)指令，特别是`prg`允许您运行脚本并传递请求信息的映射类型。

# android - C2DM 中的 SERVICE_NOT_AVAILABLE

> ID：11104611
> 
> 赞同：0
> 
> 时间：2012-06-19T15:44:58.077
> 
> 标签：android, android-c2dm, service-not-available

有时当我尝试注册 C2DM 时，我会收到`SERVICE_NOT_AVAILABLE`错误消息。发生此错误时，我使用了 googletochrome 应用程序中提供的代码。我只想问它重试了多少次，重试后它注册的可能性有多大。有更好的选择吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T20:45:06.987

它不会进行任何重试，这留给开发人员实现。谷歌推荐使用指数退避，算法可以在这里看到：[http ://en.wikipedia.org/wiki/Exponential_backoff](http://en.wikipedia.org/wiki/Exponential_backoff)

我发现当意图在新启动时运行时，模拟器会收到 SERVICE_NOT_FOUND 响应，所有后续请求似乎对我来说都能正常工作

# objective-c - 用户点击下个月和上个月时未选择 kalview 当前日期

> ID：11104614
> 
> 赞同：1
> 
> 时间：2012-06-19T15:45:17.947
> 
> 标签：objective-c, ios, ios4

我在 iPhone 原生应用程序中使用 KalView，就像 ical 一样。但是当用户点击下个月和上个月时未选择当前日期。请告诉我如何实现这一点。

# php - PHP 文件/类名冲突

> ID：11104615
> 
> 赞同：1
> 
> 时间：2012-06-19T15:45:21.767
> 
> 标签：php, class, namespaces

我有这样的文件结构：

```
Class (folder):
 - User.php
 - Rule.php
Scripts (folder):
 - user.php (in lowercase)
 - otherscript.php

index.php 
```

## 规则类（Class/Rule.php）：

```
namespace My\Namespace;
require_once 'Gender.php';
require_once 'User.php';

class Rule
{
... 
```

## 用户类（Class/User.php）：

```
namespace My\Namespace;
require_once 'Gender.php';
class User {
... 
```

在 Rule 类中，我使用包含 User 类（require_once 'User.php'）的 'require_once'，问题是当我在 'otherscript.php' 中包含 de Rule 类时，它包括我两者（script/user.php和类/User.php）。我怎样才能避免这种情况？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T15:51:02.653

您可以`require_once`选择相对于自身的元素，而不是相对于当前工作目录的元素：

```
 require_once __DIR__.'/Gender.php';
   require_once __DIR__.'/User.php'; 
```

...但最好只定义一个自动加载器（使用 SPL 自动加载器而不是旧`__autoload`函数），它会为您处理这个问题，从而消除对类的大多数包含/要求语句的需要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T15:47:55.693

我通常包括从我的项目根目录向上的完整路径以避免这种情况。为什么不这样做：

```
require_once('Class/User.php'); 
```

这更加具体，并且绕过了 PHP 需要做的猜测工作来弄清楚你的意思。

# android - 如何使用 Compound Drawables 在 TextView 中设置文本位置？

> ID：11104616
> 
> 赞同：2
> 
> 时间：2012-06-19T15:45:28.083
> 
> 标签：android

我有一个 textview。我设置了 textview 的 setCompoundDrawablesWithIntrinsicBounds。之后，当我将文本设置到文本字段时，文本向右移动。如何将文本带到中间。请帮助我。

提前感谢您的帮助。

```
Drawable d =new BitmapDrawable(resizedbitmap);   
description.setCompoundDrawablesWithIntrinsicBounds(d,null,null,null);
description.setText("hello");
description.setTypeface(Typeface.DEFAULT_BOLD);
description.setGravity(Gravity.CENTER); 
```

# ios - 在任何地方都找不到 UI_APPEARANCE_SELECTOR

> ID：11104622
> 
> 赞同：1
> 
> 时间：2012-06-19T15:45:45.010
> 
> 标签：ios, uiappearance

`UIAppearanceContainer`协议参考的 iOS 文档说：

> “要参与外观代理 API，请在标头中使用 UI_APPEARANCE_SELECTOR 标记外观属性访问器方法。”

但是，例如，当我打开 UIButton.h 时，我在任何地方都找不到`UI_APPEARANCE_SELECTOR`，尽管我可以使用类似这样的东西而不会出现问题：

```
 [[UIButton appearance] setBackgroundImage:[[UIImage imageNamed:@"UIButton"] resizableImageWithCapInsets:UIEdgeInsetsMake(5.0, 5.0, 5.0, 5.0)] forState:UIControlStateNormal]; 
```

谁能告诉我发生了什么：D？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T15:54:28.690

`-[UIButton setBackgroundImage:resizableImageWithCapInsets:]`不是属性而是方法。因此，Apple 文档中的引用仍然有效。

UI_APPEARANCE_SELECTOR 是一个简单的#define，我想只是提示编译器使用@property 做一些特殊的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T16:11:37.403

您找不到它，因为访问器继承自`UIView`（`UIButton`继承自；`UIControl`: `UIView`: `UIResponder`:）`NSObject`。所以当你这样做时，你会`[UIButton appearance]`得到传递类的外观代理，只是因为`UIView`采用了`UIAppearance`and`UIAppearanceContainer`协议。我希望这是有道理的。

PS。如果你查看 example`UIBarButtonItem`的头文件，你会看到`UI_APPEARANCE_SELECTOR`那里有。

# php - Vista上的PHP setcookie（）过期问题

> ID：11104625
> 
> 赞同：1
> 
> 时间：2012-06-19T15:45:52.520
> 
> 标签：php, windows-vista

仅在一个特定的系统配置上（Win Vista，所有浏览器 - 所有浏览器都允许 cookie）我发现 PHP setcookie 存在问题。我创建了两个简单的脚本来简化问题识别：

**script_1.php**设置 cookie

```
setcookie("name", "value", time()+3600);    
header("Location: script_2.php");
exit(); 
```

**script_2.php**检查结果

```
var_dump($_COOKIE); 
```

使用上述语法和提到的配置，不会创建 cookie“名称”。当我删除“过期”参数并离开时

```
setcookie("name", "value"); 
```

cookie“名称”设置正确。

在 Win XP、Win 7、Mac OSX 10.6、Androids、iPad、iPhone + 任何特定系统兼容的浏览器中，一切都非常适合完整的 cookie 定义，例如

```
setcookie("name", "value", time()+3600, "/", "domain.com", 0, 1); 
```

只是 Vista 在任何浏览器上都有问题。服务器上的时间设置没问题。

感谢您提供任何建议、提示或解决方案。我在这里真的很累很无助。

# ruby-on-rails - RnR：长时间运行的过程

> ID：11104626
> 
> 赞同：0
> 
> 时间：2012-06-19T15:45:52.727
> 
> 标签：ruby-on-rails, statusbar, background-process

我的应用程序的一部分创建了一个导出文件。对于绝大多数用户来说，导出文件过程相当快，但是有些用户会生成 10,000 条或更多记录。这使事情复杂化。首先，导入文件的工具会炸毁大于约 4,000 条记录的文件。其次，处理 10,000 条记录大约需要 20 分钟。用户倾向于开始做其他事情，然后出于某种原因，该过程似乎超时并且他们永远不会得到他们的文件。但是，如果您单击进程按钮，然后不理会您的机器，20 分钟后您将获得该文件。

我需要使它更加用户友好和健壮。这是我的想法：1）自动创建 4,000 个单独的文件 2）为文件生成提供状态栏 3）后台处理，以便用户可以单击按钮并在一个小时后返回并下载他们的文件

所以我一直在研究后台插件和宝石。大多数似乎都已经过时了，这让我很紧张，而且对于我需要的东西来说似乎有点过头了。所以 Spawn 似乎很简单直接，但我不清楚如何为这种类型的产品制作状态栏。

然后我们有类似Delayed_job 的东西。这似乎可行，但似乎有点重，但它确实提供了生成某种状态更新的钩子。有人有这方面的例子吗？自述文件有点轻。

另一个问题是文件生成，如何下载多个文件？无论如何，我可以为用户会话的实时存储生成的文件吗？

最后，大多数解决方案看起来像是一个重大变化，这个问题很痛苦，但在技术上是可行的。所以我被分配解决它的时间很短，所以我试图亲吻。感谢您提供的任何帮助和/或指导。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T19:08:22.077

如果您正在寻找后台处理工作，我想您必须寻找[resque它在](https://github.com/defunkt/resque)[redis](http://redis.io/)上超级容易运行，而不是延迟_job，它会轮询您的数据库更改

根据收集进度信息，我猜这里有一堆 resque 插件可以帮助你完成[任务](https://github.com/idris/resque-progress)

最后

`Another issue is the file generation, how do I get this multiple files to download? Anyway, I can store the generated file for the live of the user session?`

不确定您的实际意思，但如果您想下载多个文件，可以压缩成一个文件可以提供帮助

# c# - 如何忽略组

> ID：11104628
> 
> 赞同：0
> 
> 时间：2012-06-19T15:45:59.973
> 
> 标签：c#, regex

我有以下节点，我在流阅读器中检索它们。可能有很多这样的。例如，我只对检索此节点中的几个组感兴趣`REPLICATE_ID, ASSAY_NUMBER,FEW DATES FIELDS`。

节点内字段的顺序可能不同，有时也会出现新字段，但我要提取的字段不会改变。

到目前为止，我拥有的正则表达式与整个节点匹配，因此如果节点有新字段或顺序不同，它就会中断。是否可以匹配我只感兴趣的组？

```
 TEST_REPLICATE
    {
        REPLICATE_ID            453w
        ASSAY_NUMBER            334
        ASSAY_VERSION           4
        ASSAY_STATUS            test
        DILUTION_ID         1
        SAMPLE_ID           "NC_dede"
        SAMPLE_TYPE         Specimen
        TEST_ORDER_DATE         05.23.2012
        TEST_ORDER_TIME         04:25:07
        TEST_INITIATION_DATE        05.23.2012
        TEST_INITIATION_TIME        05:19:43
        TEST_COMPLETION_DATE        05.23.2012
        TEST_COMPLETION_TIME        05:48:01
        ASSAY_CALIBRATION_DATE      NA
        ASSAY_CALIBRATION_TIME      NA
        TRACK           1
        PROCESSING_LANE     1
        MODULE_SN       "EP004"
        LOAD_LIST_NAME          C:\BwedwQwedw_SCC\edwLoadlist2RACKSB.json
        OPERATOR_ID         "Q_dwe"
        DARK_SUBREADS           16 23 19 20 16 18 21 16 17 18 19 19 20 22 19 20 19 20 18 20 17 20 21 16 19 23 20 22 19 20
        SIGNAL_SUBREADS         18 17 20 21 42 61 41 31 30 30 26 26 25 22 24        DARK_COUNT          577
        SIGNAL_COUNT            781
        CORRECTED_COUNT         204
        STD_BAK             1.95965044971226
        AVG_BAK             19.2333333333333
        STD_FOR             8.67212471810898
        AVG_FOR             26.0333333333333
        SHAPE               NA
        EXCEPTION_STRING        TestException - Parameters:Unable to process test, background read failure.
        RESULT              NA
        REPORTED_RESULT         NA
        REPORTED_RESULT_UNITS       NA
        REAGENT_MASTER_LOT      13600LI02
        REAGENT_SERIAL_NUMBER       25022
        RESULT_FLAGS            RUO
        RESULT_INTERPRETATION       NA
        DILUTION_PROTOCOL       UNDILUTED
        RESULT_COMMENT          frer 1 LANE A
        DATA_MANAGEMENT_FIELD_1     NA
        DATA_MANAGEMENT_FIELD_2     NA
        DATA_MANAGEMENT_FIELD_3     NA
        DATA_MANAGEMENT_FIELD_4     NA
    }

    string pat = @"TEST_REPLICATE\s*{\s*REPLICATE_ID\s*([^}]*?)\s+ASSAY_NUMBER\s*([^}]*?)\s+ASSAY_VERSION\s*([^}]*?)\s+DILUTION_ID\s*([^}]*?)\s+SAMPLE_ID\s*([^}]*?)\s+SAMPLE_TYPE\s*([^}]*?)\s+TEST_ORDER_DATE\s*([^}]*?)\s+TEST_ORDER_TIME\s*([^}]*?)\s+TEST_INITIATION_DATE\s*([^}]*?)\s+TEST_INITIATION_TIME\s*([^}]*?)\s+TEST_COMPLETION_DATE\s*([^}]*?)\s+TEST_COMPLETION_TIME\s*([^}]*?)\s+ASSAY_CALIBRATION_DATE\s*([^}]*?)\s+ASSAY_CALIBRATION_TIME\s*([^}]*?)\s+TRACK\s*([^}]*?)\s+PROCESSING_LANE\s*([^}]*?)\s+MODULE_SN\s*([^}]*?)\s+LOAD_LIST_NAME\s*([^}]*?)\s+OPERATOR_ID\s*([^}]*?)\s+DARK_SUBREADS\s*([^}]*?)\s+SIGNAL_SUBREADS\s*([^}]*?)\s+DARK_COUNT\s*([^}]*?)\s+SIGNAL_COUNT\s*([^}]*?)\s+CORRECTED_COUNT\s*([^}]*?)\s+STD_BAK\s*([^}]*?)\s+AVG_BAK\s*([^}]*?)\s+STD_FOR\s*([^}]*?)\s+AVG_FOR\s*([^}]*?)\s+SHAPE\s*([^}]*?)\s+EXCEPTION_STRING\s*([^}]*?)\s+RESULT\s*([^}]*?)\s+REPORTED_RESULT\s*([^}]*?)\s+REPORTED_RESULT_UNITS\s*([^}]*?)\s+REAGENT_MASTER_LOT\s*([^}]*?)\s+REAGENT_SERIAL_NUMBER\s*([^}]*?)\s+RESULT_FLAGS\s*([^}]*?)\s+RESULT_INTERPRETATION\s*([^}]*?)\s+DILUTION_PROTOCOL\s*([^}]*?)\s+RESULT_COMMENT\s*([^}]*?)\s+DATA_MANAGEMENT_FIELD_1\s*([^}]*?)\s+DATA_MANAGEMENT_FIELD_2\s*([^}]*?)\s+DATA_MANAGEMENT_FIELD_3\s*([^}]*?)\s+DATA_MANAGEMENT_FIELD_4\s*([^}]*?)\s*}"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T20:13:17.903

是的，您可能应该只解析键值对的记录。

如果您想从记录中提取键值对，这是一个代码示例。
找到匹配项后，可以针对捕获集合中的密钥对您要查找的密钥进行测试。

您还可以更改正则表达式，了解如何允许记录的开始/结束。
但是不要改变核心，它可以防止灾难性的回溯。

正则表达式替代品：

```
# Record starts on a new line, closing brace can be anywhere

^ [^\S\n]*TEST_REPLICATE\s*\{
 (?>
      \s* (?<key> [^\s{}]+ ) [^\S\n]* (?<val> [^\n{}]*? ) [^\S\n]* (?:$|(?=\}))
 )*
 \s*\}

# Record starts anywhere, closing brace is on a new line 

TEST_REPLICATE\s*\{
 (?>
      \s* (?<key> [^\s{}]+ ) [^\S\n]* (?<val> [^\n{}]*? ) [^\S\n]* $
 )*
 \s*\} 
```

C#测试代码：

```
Regex testRx = new Regex(
 @"
  ^ [^\S\n]* TEST_REPLICATE     # Record, starts on a newline
    \s*                         # Optional whitespaces (trims blank lines)
    \{                          # Record opening brace
      (?>                           # Atomic group
         \s*                           # Optional many whitespace (trims blank lines)
         # Line in record to be recorded
         (?<key> [^\s{}]+)                # required <key>, not whitespacs nor braces
         [^\S\n]*                         # trim whitespaces (don't include newline)
         (?<val> [^\n{}]*?)               # optional <value>, not newlines nor braces
         [^\S\n]*                         # trim whitespaces (don't include newline)
         (?:$|(?=\}))                   # End of line, or next char is a closing brace
      )*                            # End atomic group, do many times (optional)
    \s*                         # Optional whitespaces (trims blank lines)
  \}                            # Record closing brace
 ", RegexOptions.IgnorePatternWhitespace | RegexOptions.Multiline);

string testdata = @"
 TEST_REPLICATE{}
 TEST_REPLICATE{
     REPLICATE_ID            1asdf985
     ASSAY_NUMBER            123sdg
     ASSAY_VERSION           4sdgn
     ASSAY_TYPE            unknown
 }

 TEST_REPLICATE
 {
     REPLICATE_ID            
     ASSAY_NUMBER            123    
     ASSAY_VERSION           4   
     ASSAY_TYPE            unknown   
     DILUTION_ID         1
     SAMPLE_ID           ""NC_HIV1""
     SAMPLE_TYPE         Specimen
     TEST_ORDER_DATE         05.21.2012
     TEST_ORDER_TIME         03:44:01
     TEST_INITIATION_DATE        05.21.2012
     TEST_INITIATION_TIME        04:03:36

 TEST_COMPLETION_DATE        05.21.2012
 TEST_COMPLETION_TIME        04:29:32
     ASSAY_CALIBRATION_DATE              NA
     ASSAY_CALIBRATION_TIME      NA
     TRACK           1
     PROCESSING_LANE     1
     MODULE_SN       ""EP004""
     LOAD_LIST_NAME          C:\sdddd
     OPERATOR_ID         ""Q_SI""
     DARK_SUBREADS           NA
     SIGNAL_SUBREADS         NA
     DARK_COUNT          NA
     SIGNAL_COUNT            NA
     CORRECTED_COUNT         NA
     STD_BAK             NA
     AVG_BAK             NA
     STD_FOR             NA
     AVG_FOR             NA
     SHAPE               NA
     EXCEPTION_STRING        Test execution was stopped.
     RESULT              NA
     REPORTED_RESULT         NA
     REPORTED_RESULT_UNITS       NA
     REAGENT_MASTER_LOT      2345
     REAGENT_SERIAL_NUMBER       25022
     RESULT_FLAGS            NA
     RESULT_INTERPRETATION       NA
     DILUTION_PROTOCOL       UNDILUTED
     RESULT_COMMENT          HIV NC 1
     DATA_MANAGEMENT_FIELD_1     NA
     DATA_MANAGEMENT_FIELD_2     NA
     DATA_MANAGEMENT_FIELD_3     NA
     DATA_MANAGEMENT_FIELD_4     NA
 }
    ";

Match m_testrec = testRx.Match(testdata);

// Each match contains a single record
//
while (m_testrec.Success)
{
    Console.WriteLine("New Record\n------------------------");

    CaptureCollection cc_key = m_testrec.Groups["key"].Captures;
    CaptureCollection cc_val = m_testrec.Groups["val"].Captures;

    for (int i = 0; i < cc_key.Count; i++)
    {
        Console.WriteLine("'{0}' = '{1}'", cc_key[i].Value, cc_val[i].Value);                                                                                                 
        // 
        // Test specific keys here
        //  if (cc_key[i].Value == "REAGENT_SERIAL_NUMBER") ...

    }
    Console.WriteLine("------------------------");

    // Get next record
    m_testrec = m_testrec.NextMatch();
} 
```

# php - 如何在 Codeigniter 中创建小部件系统

> ID：11104630
> 
> 赞同：13
> 
> 时间：2012-06-19T15:46:13.920
> 
> 标签：php, codeigniter, hmvc

我正在 Codeigniter 中创建一个自定义 CMS，我希望有一个类似于 Wordpress 中使用的小部件系统。

例如，我想要一个小部件，显示侧边栏上显示的最后 5 个帖子。我还希望能够控制此小部件逐页显示的页面。

我正在使用[Phil Sturgeon 的模板库](http://philsturgeon.co.uk/demos/codeigniter-template/user_guide/)，因此示例控制器如下所示：

```
$this->template->set_partial('header', 'layouts/header');
$this->template->set_partial('footer', 'layouts/footer');
$this->template->set_partial('sidebar', 'layouts/sidebar');

$this->data['title'] = "Create Post";
$this->template->build('create', $this->data); 
```

我想坚持 MVC 模式，所以我不想将逻辑放在侧边栏视图中，这是我现在唯一能想到的。

我应该为此使用 HMVC 吗？

如何告诉侧边栏显示哪些小部件？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-19T16:55:05.260

[这是来自Wiredesignz](https://github.com/wiredesignz)的 Widget 库

[阅读更多信息](http://codeigniter.com/forums/viewthread/109584)

```
/**
 * Widget Plugin 
 * 
 * Install this file as application/plugins/widget_pi.php
 * 
 * @version:     0.21
 * $copyright     Copyright (c) Wiredesignz 2009-09-07
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 * 
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */
class Widget
{
    public $module_path;

    function run($file) {        
        $args = func_get_args();

        $module = '';

        /* is module in filename? */
        if (($pos = strrpos($file, '/')) !== FALSE) {
            $module = substr($file, 0, $pos);
            $file = substr($file, $pos + 1);
        }

        list($path, $file) = Modules::find($file, $module, 'widgets/');

        if ($path === FALSE) {
            $path = APPPATH.'widgets/';
        }

        Modules::load_file($file, $path);

        $file = ucfirst($file);
        $widget = new $file();

        $widget->module_path = $path;

        return call_user_func_array(array($widget, 'run'), array_slice($args, 1));    
    }

    function render($view, $data = array()) {
        extract($data);
        include $this->module_path.'views/'.$view.EXT;
    }

    function load($object) {
        $this->$object = load_class(ucfirst($object));
    }

    function __get($var) {
        global $CI;
        return $CI->$var;
    }
} 
```

* * *

## 例子

```
// application/widgets/Hello_world.php
class Hello_world extends Widget
{
    function run() {
        $this->render('hello_world');
    }
} 
```

在您的视图中调用小部件类上的静态“运行”方法：

```
widget::run('hello_world'); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-19T17:11:31.973

如果您想在某些控制器中查看一些小部件怎么办？在我看来，一些基本而简单的事情是将 CMS 的小部件保存在数据库中，其**名称**和**布尔值**是活动和非活动的。

最后，在查询中，您会得到一组小部件。我们可以扩展主控制器并显示所有默认小部件（使用数组和全局变量）

```
<?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');

public $cms_widget = array();

class CMS_Controller extends CI_Controller {

    function __construct()
    {
        parent::__construct();

        $this->cms_widget = array(
        'msg'   => TRUE,
        'chat'  => TRUE,
        'video' => TRUE,
        'games' => TRUE
        );  
    }

} 
```

当您调用 CMS 的模板时，您应该有条件地让所有小部件出现在所需的位置。例如在列视图模板中：

```
if($this->cms_widget['msg']) $this->load->view('widget/msg_view');
if($this->cms_widget['chat']) $this->load->view('widget/chat_view');
if($this->cms_widget['video']) $this->load->view('widget/video_view');
if($this->cms_widget['games']) $this->load->view('widget/games_view'); 
```

现在，例如。如果您在视线中的“游戏”，将只显示相应的小部件。假设我想查看小部件“游戏”和“视频”。我们只需要禁用剩余的小部件

```
<?php
class Game extends CMS_Controller {

                function __construct()
            {
                parent::__construct();
            }

                function index()
            {
                // Hidden widgets, replacing the values ​​in the array
                $this->cms_widget = array_merge($this->cms_widget, array(

                                'msg'   => FALSE,
                                'chat'  => FALSE
                                                                    ));

                $this->load->view('game_view');
            }
        }

    } 
```

# java - 我想显示一条消息，显示我选择的内容（Java）

> ID：11104631
> 
> 赞同：1
> 
> 时间：2012-06-19T15:46:17.960
> 
> 标签：java, swing, joptionpane, jcheckbox, jradiobutton

我正在为拼贴做一个项目（比如餐厅），而且我的 Java 不是很好（他们并没有真正尝试教我们）。该项目的原理是显示一条消息，说明我选择了哪些单选按钮和复选框。

我有 5 个单选按钮，它们用于选择一餐，以及 5 个用于选择配菜的复选框。我已经设法让单选按钮工作，但我不知道如何使复选框工作......

这是单选按钮的代码（这适用于所有 5 个）：

```
 private void jRadioButton1ItemStateChanged(java.awt.event.ItemEvent evt) {

        if (evt.getSource().equals(jRadioButton1))
        {
            Meal= jRadioButton1.getText(); //Meal is a String
        } 
```

我为复选框尝试了相同的代码，但它只在消息中显示一个配菜，即使我选择了多个......

显示消息的按钮代码：

```
 private void jButton1ActionPerformed(java.awt.event.ActionEvent evt) {

        JOptionPane.showMessageDialog(rootPane, "You have chosen:\n" + String.valueOf(Meal) + "\n" + String.valueOf(SideDish));
    } 
```

`So basically, if anyone is willing to help, please tell me how to make the check boxes work... that every selected check box is shown in the message, like this:`

```
You have chosen:
Pizza //meal
Ketchup //selected side dish #1
Chilli peppers //selected side dish #2
Feta cheese //selected side dish #3 
```

我希望我的问题很清楚...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T15:49:32.983

由于您想为零个或多个复选框显示文本，因此您需要检查每个复选框是否被选中，并连接生成的文本，而不是只保留一个选项。此外，由于复选框可以独立地选中和取消选中，因此最好只在按下按钮时检查它们的状态，而不是一直尝试跟踪它们。例如：

```
private void jButton1ActionPerformed(java.awt.event.ActionEvent evt) {

  SideDish = "";
  if (jCheckBox1.getState()))
  {
    SideDish += jCheckBox1.getText();
  }
  ...
  if (jCheckBox5.getState()))
  {
    SideDish += ", " + jCheckBox5.getText();
  }

  JOptionPane.showMessageDialog(rootPane, "You have chosen:\n" + Meal + "\n" + SideDish);
} 
```

这只是一个插图，它不会总是正确显示分隔逗号 - 我将把修复留给你作为练习:-)

一个更优雅的解决方案是使用字符串集合来收集配菜 - 同样，您可以尝试改进代码。

顺便说一句，您不需要`String.valueOf()`打印`String`s 所以我从上面的代码中删除了它。Java 编码约定是以小写开头的变量/字段名称。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T15:49:56.127

由于您可以同时选择多个复选框，因此您应该将选中的值收集到一个集合中。 `Set<String>`想到你只能选择一个配菜一次。

此外，您没有遇到此问题，因为单选按钮的每个选择都会覆盖前一个，但是如果未选中相应的复选框，您将需要从集合中删除项目。

*注意*：`Set<>`是一个接口，你需要一个实现类来实际使用它。在您的情况下 a会起作用（有关[Set](http://docs.oracle.com/javase/6/docs/api/java/util/Set.html)和[HashSet](http://docs.oracle.com/javase/6/docs/api/java/util/HashSet.html)`HashSet<>`的可用方法，请参阅文档）

当您显示配菜的选择时，您可以枚举集合中的元素，然后将它们一个接一个地打印出来，或者通过连接元素将结果收集到一个字符串中。

*注意*：如果您可以直接访问复选框，则可能不需要该设置：在显示选择了哪个配菜时，只需检查每个复选框的状态并累积上述选择字符串

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-19T15:58:58.180

这是一个例子

假设你有 4 个侧边菜

```
Vector<JCheckBox> boxes = new Vector<JCheckBox>
boxes.add(checkbox1) .... .add(checkbox4); 
```

并单击按钮

```
Vector<String> sideDishes = new Vector<String>();
for(int i=0; i<boxes.size(); i++){
   if(boxes.elementAt(i).isSelected(){
      sideDishes.add(boxes.elementAt(i).getText();
   }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-19T15:51:04.400

我认为首先你应该学习的是如何分析问题以及如何使用谷歌或其他搜索引擎网站，所以尝试阅读[这个](http://docs.oracle.com/javase/tutorial/uiswing/components/button.html)文档并查看示例

# ios - 使用 NSOperationQueue 更好地理解 NSURLConnection

> ID：11104636
> 
> 赞同：1
> 
> 时间：2012-06-19T15:46:37.927
> 
> 标签：ios, nsurlconnection, nsoperationqueue, sendasynchronousrequest

我排队

```
NSOperationQueue *operationQueue = [[NSOperationQueue alloc] init]; 
```

我将队列发送到我的异步请求

```
[NSURLConnection sendAsynchronousRequest:req queue:operationQueue completionHandler:^(NSURLResponse *response, NSData *data, NSError *error) {
    dispatch_async(dispatch_get_main_queue(), ^{
        // ... do stuff here
    });
}]; 
```

我提前取消了我的操作

```
[operationQueue cancelAllOperations]; 
```

但是，我可以看到我的异步“完成”代码仍在运行。为什么这种情况不像我预期的那样工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T15:52:19.680

`cancelAllOperations`遍历队列中的项目并调用`cancel`每个项目。如果您查看以下文档`completionBlock`：

> 当 isFinished 方法返回的值变为 YES 时，就会执行您提供的完成块。因此，该块由操作对象在操作的主要任务完成或取消后执行。

可以在[这里看到](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/NSOperation_class/Reference/Reference.html)

编辑：

文档中的另一个片段`setCompletionBlock:`

> 已完成的操作可能会因为它被取消或成功完成其任务而完成。在编写块代码时，您应该考虑到这一事实。同样，您不应该对相关操作的成功完成做出任何假设，这些操作本身可能已被取消。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T15:59:18.640

如果它在中途被取消，难道不是你的责任`isCancelled`在你的操作任务期间检查吗？

NSOperationQueue 不仅会杀死任务，还会将它们设置为已取消并让它们自己完成。这使您可以在退出之前清理您可能已分配和整理的所有资源。

尚未开始的任务将不会开始。

# asp.net - SqlDataSource SelectCommand 使用 2 个参数和 LIKE 不起作用

> ID：11104638
> 
> 赞同：2
> 
> 时间：2012-06-19T15:46:39.910
> 
> 标签：asp.net, sql, sqldatasource

我在 SqlDataSource 中有以下 selectcommand，我的问题是它仅在我有两个参数的值时才返回数据。当只有 1 有值时，我还需要它来返回数据。

```
SelectCommand="SELECT user.UserId, UserProfiles.Company, UserProfiles.Address, UserProfiles.JV2, UserProfiles.DB1, aspnet_Membership.Email, user.UserName
FROM user INNER JOIN UserProfiles ON user.UserId = UserProfiles.UserId  WHERE        (@UserName  IS NULL OR @UserName = ''  OR user.UserName LIKE '%'+@UserName+'%' ) AND
                     (@Email IS NULL  OR @Email = '' OR user.Email LIKE '%'+@Email+'%') 
```

具有以下参数

```
 <SelectParameters>  
    <asp:ControlParameter Name="Email" ControlID="eMail"  PropertyName="Text" Type="String"  />
<asp:ControlParameter Name="UserName" ControlID="userName"  PropertyName="Text" Type="String"  /> 
```

当我在 SQL Server Management Studio 中运行查询时，它会在我只输入 1 个值或两者时返回数据。当我运行表单时，只有在两个字段中输入值时才会返回数据。

我发现这篇文章：[SqlDataSource SelectCommand using LIKE does not work](https://stackoverflow.com/questions/687677/sqldatasource-selectcommand-using-like-does-not-work)这是相似的，但解决方案没有帮助。

显然我做错了什么，我只是看不出是什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T16:15:06.950

我有一个类似的问题并将其添加到 sqldatasource 修复它：

```
<asp:SqlDataSource CancelSelectOnNullParameter="false"> 
```

# python - 如何在 Windows 7 上安装 python 2.6.8？

> ID：11104639
> 
> 赞同：3
> 
> 时间：2012-06-19T15:46:45.403
> 
> 标签：python, windows-7

我已经从这里[http://www.python.org/getit/releases/2.6.8/](http://www.python.org/getit/releases/2.6.8/)下载了 python 2.6.8 的两个版本，但我不知道如何在我的 Windows 7 64 位操作系统上安装它。请有人帮助我。我搜索了但我找不到好的教程。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T15:49:25.160

2.6.8 是仅源版本。根据您的要求下载 2.6.6 或 2.7.3，它们随 Windows 安装程序一起提供。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-22T10:49:10.373

如果要在 Windows 机器上安装 Python 2.6.8，可以执行以下操作：

如果您没有 Microsoft Visual Studio，请安装它：Express 版本可在此处获得：http: [//www.microsoft.com/visualstudio/eng/products/visual-studio-express-products](http://www.microsoft.com/visualstudio/eng/products/visual-studio-express-products)

将源代码解压缩到一个文件夹（我们称之为 E:\Python）并在 Visual Studio 中打开 E:\Python\PCbuild\pcbuild.sln。

将构建配置设置为 Debug for Win32（在 Build => Configuration Manager 下可用。

构建您的解决方案。您应该会看到错误，这些错误与发布补丁的模块有关，例如 zlib 和 sqlite。修复这些问题超出了我在 Python Windows 安装方面的专业知识，但有可用的补丁，因为我已经在我的 Unix 版本中解决了其中的一些问题。

无论如何，现在您的 E:\Python\PCbuild 文件夹中应该有一个 python_d.exe 文件。这是您的 Python 可执行文件。

# javascript - 通过域名保护代码/内容

> ID：11104640
> 
> 赞同：0
> 
> 时间：2012-06-19T15:46:54.097
> 
> 标签：javascript

我正在编写一个 javascript 产品，但它将被许可给单个域名。因此，为了保护它免受从演示或从一个站点到另一个站点的复制和粘贴，代码应该只允许自己在正确的域上正常运行。

当用户在他想要使用的域中购买项目和密钥时，可以通过 php 在服务器端完成加密。所以它是这样的：

```
var encryptedtext = "My text here";
function decrypt(){
    //decrypt using domain name.
}
print( decrypt(encryptedtext) ); 
```

我不需要它很强大。该产品只需几美元，保护应该足以抑制任何开裂。

我发现最大的弱点是它以域名作为解密密钥非常明显。减轻这种情况的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T16:01:02.890

您可以对用户注册的域进行哈希处理并将其包含在您提供给他们的 JavaScript 脚本中，然后在运行时使用 JavaScript 对实际域进行哈希处理并比较它以查看它是否与脚本中包含的内容匹配。您还可以使用 xor 对内容进行编码。最终，所有客户端代码在运行时都是可见的，不会被混淆。

# mysql - 从依赖于联接表的子查询中选择求和值

> ID：11104641
> 
> 赞同：0
> 
> 时间：2012-06-19T15:46:54.950
> 
> 标签：mysql, sql, optimization, join, subquery

因此，我是幸运的人，能够为我们的应用程序优化查询，这对于我们获取的数据来说花费的时间太长了。我们正在寻找的数据并不复杂，但是糟糕的数据库设计使它变得比它应该的要困难得多（这很棒，因为我是大约一年前设计它的人）。

一般的想法是我们试图计算每个客户的总销售额（他们购买的东西增加了他们的余额）和总付款（他们根据余额支付了钱）。

表格：

**顾客**

*   ID
*   公司

**销售（发票）**：

*   ID
*   客户ID

**付款（account_payments）**

*   ID
*   客户ID
*   transaction_id（链接到 invoice_transactions）

**交易（invoice_transactions）**

*   ID
*   invoice_id（发票链接，如果付款则为空）
*   数量

如果用户进行**销售**，则信息将记录在`invoices`和`invoice_transactions`中，其中 invoice_transactions 的 invoice_id 包含包含 customer_id 的发票记录。

如果用户**付款**，则信息记录在`account_payments`和`invoice_transactions`中，其中 invoice_transaction 的 invoice_id 为 NULL，account_payments 包含 transaction_id 和 customer_id。

我知道，这太可怕了……我以为我很聪明！好吧，我仔细考虑了这个问题，并提出了一个不错的解决方案：

```
SELECT SQL_NO_CACHE
    c.company,
    (SELECT SUM(amount) FROM sales),
    (SELECT SUM(amount) FROM payments)
FROM customers c
JOIN invoices i ON i.customer_id = c.id
JOIN invoice_transactions sales ON i.invoice_id = sales.id
JOIN account_payments ap ON ap.customer_id = c.id
JOIN invoice_transactions payments ON ap.transaction_id = payments.id 
```

除了给我一个错误“#1146 - 表 'db.sales' 不存在”之外，它什么都不做。我猜这与连接之前读取的子查询有关，但老实说我不知道​​。不幸的是，我不知道解决这个问题的另一种方法......如果有人能帮帮我，我将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T16:09:38.493

我认为最好的方法是将元素销售和付款分成子查询，您当前的方法是在进行聚合之前将所有付款与所有发票交叉连接。

```
SELECT  c.ID, 
        c.Company, 
        COALESCE(Sales.Amount, 0) AS Sales, 
        COALESCE(Payments.Amount, 0) AS Payments
FROM    Customers c
        LEFT JOIN
        (   SELECT  Customer_ID, SUM(Amount) AS Amount
            FROM    Invoices
                    INNER JOIN invoice_transactions
                        ON Invoice_ID = Invoices.ID
            GROUP BY Customer_ID
        ) As Sales
            ON Sales.Customer_ID = c.ID
        LEFT JOIN
        (   SELECT  Customer_ID, SUM(Amount) AS Amount
            FROM    Account_Payments 
                    INNER JOIN invoice_transactions tr
                        ON tr.ID = Transaction_ID
            GROUP BY Customer_ID
        ) AS Payments
            ON Payments.Customer_ID = c.ID; 
```

这将包括没有发票和没有付款的客户。您可以将左连接更改为内连接以进行操作。

**[SQL Fiddle 上的工作示例](http://sqlfiddle.com/#!2/3f833/3)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T15:54:41.570

您的查询没有意义。

完成所有连接后，为什么不直接使用“from”子句中的表：

```
SELECT c.company, SUM(sales.amount),  SUM(payments.amount)
FROM customers c JOIN invoices i ON i.customer_id = c.id JOIN
     invoice_transactions sales ON i.invoice_id = sales.id JOIN
     account_payments ap ON ap.customer_id = c.id JOIN
     invoice_transactions payments ON ap.transaction_id = payments.id
group by c.company 
```

仅仅在“from”子句中给表一个别名并不能使它在查询的其他地方的子查询中可用。

我还添加了一个 GROUP BY 子句，因为您的查询似乎是按公司汇总的。

# c# - 如何在 C# 中的 Message 中取回 DeliveryNotificationOptions？

> ID：11104642
> 
> 赞同：1
> 
> 时间：2012-06-19T15:46:56.153
> 
> 标签：c#, email, send

我创建了一个发送邮件但想知道某些邮件是否失败的应用程序。我怎么会知道呢？我尝试使用代码

```
mail.DeliveryNotificationOptions = DeliveryNotificationOptions.OnFailure; 
```

但它只是通过我的在线邮件传递发送，我想通过`Message.Show`. 有什么简单的方法可以做到这一点吗？

# installation - 使用 jenkins 构建 RPM 包

> ID：11104645
> 
> 赞同：4
> 
> 时间：2012-06-19T15:47:09.443
> 
> 标签：installation, jenkins, rpm

我想使用 Jenkins 创建 RPM 包以将代码和脚本部署到 Linux redhat 机器上所以应用程序是技术的混合体（不需要编译）我只需要打包应用程序将它们部署到正确的位置重新启动阿帕奇

是否有人对如何为新手执行这些步骤提供一些说明：

一些问题：

1.  如果我要创建将部署到 linux redhat 机器上的 RPM，我是否需要在本地 linux 机器上安装 jenkins（我希望在 windows 上安装 jenkins）

2.  有没有人有一个从本地文件夹创建包的示例（目前没有源代码控制）我只想指定从哪里获取代码的目录并指定将代码部署到 rpm 的机器上安装在

3.  在目标机器上，我想运行类似 yum -install mypackage-version12.rpm 的东西，它会将代码/脚本安装到指定的目录并重新启动 apache，我也需要一个这样的例子。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T15:54:12.167

*   您可以在不同的机器上安装 Jenkins，但通常必须在可以生成 RPM 包的机器上安装 Jenkins“节点”、“从属”、“代理”。

*   运行 RPM 包设置的每一步都是在 Jenkins 中构建所有步骤。如果您扩展构建系统以构建 RPM，并让 Jenkins 做它最擅长的事情，管理构建（计划等），而不是微观管理构建（执行步骤），它会更好地工作。

根据您当前的构建系统，这可能包括用于设置 rpm 构建树、复制`.spec`文件以及对 rpmbuild 的可执行调用的 ant 指令。

*   Jenkins 可以轻松调用构建后任务来执行此操作，或者您可能想要配置一个迷你“假”项目来进行更新，具体取决于口味。

顺便说一句，要让 yum 命令在不使用 --localinstall 选项的情况下工作，您需要设置 Web 服务器，将新的 RPM 复制到 Web 服务器上的正确文件夹，并重建索引文件（repobuild 是这样做的脚本，如果我没记错的话）。

在客户端机器（将安装软件包）上，您需要有一个 yum 配置，该配置指示客户端机器将 Web 服务器包含为已知的 yum 存储库之一。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-02-08T12:20:40.540

为什么不使用 Docker 映像通过专用阶段在其中构建 RPM？您的代码需要提供 /rpm/SPEC 文件，并且在 Docker (Jenkins) 中，您可以拥有一个 Jenkinsfile，例如：

```
mkdir -p ./rpm/BUILD && cd ./rpm/ && for f in ./SPECS/*; do rpmbuild --define \"_topdir \$(pwd)/\" --define \"_builddir \$(pwd)/BUILD\" -bb \$f; 
```

你完成了。

# ruby-on-rails - 我可以在单个列 x 行位置有多个值的黄瓜示例吗

> ID：11104649
> 
> 赞同：1
> 
> 时间：2012-06-19T15:47:32.467
> 
> 标签：ruby-on-rails, cucumber

嗨，这是我所拥有的：

```
Scenario Outline: Seatching for stuff
Given that the following simple things exists:
  | id  | title                 | description                           | temp      |
  | 1   | First title           | First description                     | low       |
  | 2   | Second title          | Second description with öl            | Medium    |
  | 3   | Third title           | Third description                     | High      |
  | 11  | A title with number 2 | can searching numbers find this 2     | Exreme    |
When I search for <criteria> 
Then I should get <result>
And I should not get <excluded>

Examples
|criteria|results   | excluded  |
| 1      | 1        | 2,3,11    |
| 11     | 11       | 1,2,3     |
| title  | 1,2,3    | 11        |
| öl     | 2        | 1,3,11    |
| Fir*   | 1        | 2,3,11    |
| third  | 3        | 1,2,11    |
| High   | 3        | 1,2,11    | 
```

如您所见，我正在尝试使用 cucumber 和场景大纲结构测试 Web 应用程序的搜索字段，以测试多个搜索条件。我不确定如何处理我将获得的输入并在我的步骤中排除。

也许这根本不起作用？有解决方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T18:08:06.830

你在做什么没有错。Cucumber 只会把它当作一个字符串。它实际上是逗号分隔的值这一事实对 Cucumber 没有任何意义。

您的步骤定义仍将如下所示：

```
Then /^I should not get ([^"]*)$/ do |excluded|
    # excluded will be a string, "2,3,11"
    values = excluded.split(",")

    # Do whatever you want with the values
end 
```

# .net - Microsoft Surface 平板电脑：为两种设备编写应用程序？

> ID：11104657
> 
> 赞同：3
> 
> 时间：2012-06-19T15:47:55.677
> 
> 标签：.net, wpf, windows-rt

我现在找不到信息；现在可能还为时过早。但我很好奇开发人员是否能够轻松编写一个可以同时针对 ARM 和 Intel 版本的平板电脑的应用程序。

我猜想 Windows 的 ARM 版本将提供几乎完整的 .NET 支持，并且 VS2012 将具有可以针对这两种设备类型的新模板，不是吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T15:52:01.287

这是你想要的？

[http://blogs.msdn.com/b/b8/archive/2012/02/09/building-windows-for-the-arm-processor-architecture.aspx](http://blogs.msdn.com/b/b8/archive/2012/02/09/building-windows-for-the-arm-processor-architecture.aspx)

Windows 应用商店中的 Metro 风格应用程序可以支持 x86/64 上的 WOA 和 Windows 8。希望以 WOA 为目标的开发人员通过使用各种语言（包括 C#/VB/XAML 和 Jscript/HTML5）的新 Visual Studio 11 工具为 WinRT（用于构建 Metro 风格应用程序的 Windows API）编写应用程序来实现这一目标。使用 C 和 C++ 还支持针对 WinRT 的本机代码，这些代码可以跨架构定位并通过 Windows 应用商店分发。WOA 不支持运行、模拟或移植现有的 x86/64 桌面应用程序。仅使用来自 WinRT 的系统或操作系统服务的代码可以在应用程序中使用，并通过 WOA 和 x86/64 的 Windows 应用商店分发。消费者通过 Windows Store 和 Microsoft Update 或 Windows Update 获取所有软件，包括设备驱动程序。

# php - 在 wordpress 多站点上同时注册用户和博客

> ID：11104658
> 
> 赞同：1
> 
> 时间：2012-06-19T15:48:01.387
> 
> 标签：php, wordpress, wpmu

我正在使用 wordpress 多站点在我的主站点中创建博客。Wordpress 多站点允许我们注册用户或博客，但我需要同时创建博客和用户，并且创建的用户需要分配为创建的博客的管理员。`wp_capabilities`好吧，我创建了一个用户并通过更改其元数据（ ， ）将其设置为管理员，`wp_user_level`但是当我尝试登录创建的博客的管理员时，它说您没有足够的权限。有谁知道我错过了什么？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T12:28:42.647

您必须创建自定义注册。创建一个新页面：`registration`。在主题文件夹中创建一个`page-registration.php`文件，并在该文件中创建您的表单和注册功能，应该是这样的：

```
if($_POST)
    {

    $data=$_POST;

    $validateuser=wpmu_validate_user_signup($data['user_name'],$data['user_email']);
    $validateblog=wpmu_validate_blog_signup($data['user_name'],$data['blog_title']);

    $usererrors=$validateuser['errors']->errors;
    $blogerrors=$validateblog['errors']->errors;

    if(!$usererrors && !$blogerrors)
    {
        $meta = array ('lang_id' => 1,'public' => 1);
        $meta = apply_filters( 'add_signup_meta', $meta );
        $path='/'.$data['user_name'].'/';
        wpmu_signup_blog($domain,$path,$data['blog_title'],$data['user_name'],$data['user_email'], $meta);
    }
} 
```

注意：这只是新博客名称与您的用户名相同的示例

如果您需要更详细的说明或有任何其他问题，请发表评论

# drools - 使用 AD 配置的 Guvnor 作为端点时，Guvnor 执行服务器得到 401

> ID：11104661
> 
> 赞同：0
> 
> 时间：2012-06-19T15:48:05.260
> 
> 标签：drools

我们正在使用：

• Drools 5.0.x 附带的 Drools 执行服务器 • Drools Guvnor 5.2 配置了活动目录

执行服务器和 guvnor 运行在同一个 Tomcat 上，使用同一个端口。

使用执行服务器，您可以为配置文件中的每个包设置一个侦听器。我有两个这样的文件，from-file-system.properties 指向手动部署drools 二进制包的本地目录。这工作正常。

但我尝试使用指向 5.3 Guvnor 上的包二进制文件的 with-guvnor.properties。这是文件：

```
name=ndipiazza
newInstance=true
# Absolute path of the directory containing pc.drl: placeholder replaced by Ant.
url=http://localhost:9109/drools-guvnor/rest/packages/NDD_Test/binary
poll=10 
```

我收到以下错误：

```
RuleAgent(ndipiazza) INFO (Mon Jun 18 18:11:32 EDT 2012): Configuring package provider : URLScanner monitoring URLs:  http://localhost:9109/drools-guvnor/rest/packages/NDD_Test/binary
RuleAgent(ndipiazza) WARNING (Mon Jun 18 18:11:34 EDT 2012): Was an error contacting http://localhost:9109/drools-guvnor/rest/packages/NDD_Test/binary. Reponse header: {null=[HTTP/1.1 401 Unauthorized] 
```

某种授权错误很可能与 Guvnor 5.2 中的活动目录配置有关。这曾经对我们使用早期版本的 Guvnor 很好。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T00:36:09.287

所以我们今天隔离了这个问题。当具有任何类型的身份验证时，Drools Server 5.0.x 不支持 URL 端点。

我报告了一个错误：[https ://issues.jboss.org/browse/JBRULES-3554](https://issues.jboss.org/browse/JBRULES-3554)

如果没有这些更改，这将不起作用。

流口水核心的`org/drools/agent/HttpClientImpl.java`

这两种方法需要添加身份验证（由 START 和 END NDD 标记），并且显然使用您的用户名/密码切换。

```
public LastUpdatedPing checkLastUpdated(URL url) throws IOException {
        URLConnection con = url.openConnection();
        HttpURLConnection httpCon = (HttpURLConnection) con;
        try {
// **** START NDD ***** 
            BASE64Encoder enc = new sun.misc.BASE64Encoder();
            String userpassword = "ad-user" + ":" + "ad-password";
            String encodedAuthorization = enc.encode( userpassword.getBytes() );
            httpCon.setRequestProperty("Authorization", "Basic "+
                  encodedAuthorization);
            // **** END NDD *****             

            httpCon.setRequestMethod( "HEAD" );            

            String lm = httpCon.getHeaderField( "lastModified" );
            LastUpdatedPing ping = new LastUpdatedPing();

            ping.responseMessage = httpCon.getHeaderFields().toString();

            if ( lm != null ) {
                ping.lastUpdated = Long.parseLong( lm );
            } else {
                long httpLM = httpCon.getLastModified();
                if ( httpLM > 0 ) {
                    ping.lastUpdated = httpLM;
                }
            }

            return ping;
        } finally {
            httpCon.disconnect();
        }

    }

    public Package fetchPackage(URL url) throws IOException,
                                        ClassNotFoundException {
        URLConnection con = url.openConnection();
        HttpURLConnection httpCon = (HttpURLConnection) con;
        try {

            // **** START NDD ***** 
            BASE64Encoder enc = new sun.misc.BASE64Encoder();
            String userpassword = "ad-user" + ":" + "ad-password";
            String encodedAuthorization = enc.encode( userpassword.getBytes() );
            httpCon.setRequestProperty("Authorization", "Basic "+
                  encodedAuthorization);
            // **** END NDD *****             

            httpCon.setRequestMethod( "GET" );

            Object o = DroolsStreamUtils.streamIn( httpCon.getInputStream() );

            if ( o instanceof KnowledgePackageImp ) {
                return ((KnowledgePackageImp) o).pkg;
            } else {
                return (Package) o;
            }
        } finally {
            httpCon.disconnect();
        }
    } 
```

谜团已揭开。

# dapper - Dapper 无法将位列映射到布尔字段

> ID：11104662
> 
> 赞同：6
> 
> 时间：2012-06-19T15:48:11.063
> 
> 标签：dapper

我在 SQL Server 2008 数据库中有一个位列，我正在尝试使用 Dapper 将其映射到我的对象，该对象具有与位列匹配的布尔字段。当 Dapper 试图说这些列是整数时，我得到了无效的强制转换异常。我如何让它映射到一个布尔值？另外，这个 ORM 会有像样的文档吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T13:14:32.513

我发现了问题。存储过程在将其转换为 int 的列上使用合并。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T15:52:40.747

该列是否可以为空？如果是这种情况，请尝试使用 type 属性`bool?`而不是 just来构造 dto `bool`，以正确处理 DbNull 值。更好的文档是代码本身[和项目主页](http://code.google.com/p/dapper-dot-net/)。

# java - 使用 findbugs 的 java 编译错误。com.sun.tools.javac.code.Symbol$CompletionFailure：javax.annotation.meta.When not found 的类文件

> ID：11104667
> 
> 赞同：8
> 
> 时间：2012-06-19T15:48:15.087
> 
> 标签：java, findbugs

我正在尝试使用 findbugs 1.3.2 的注释。

我`edu.umd.cs.findbugs.annotations.NonNull`在一个简单的测试中使用了注释，它工作正常。

但是，现在我有一个大型项目，由子模块组成，使用 maven，并且通过在一些 java 文件中导入该注释，我得到以下编译错误：

```
com.sun.tools.javac.code.Symbol$CompletionFailure: class file for javax.annotation.meta.When not found 
```

可能是什么问题？我尝试在所有子模块中添加 findbugs 依赖项。也许它与jsr305冲突？我看到我们的依赖项之一使用 jsr305 1.3.9。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-19T12:54:36.783

以我的经验，当您使用`@NonNull`并且 jsr305.jar 不在类路径上时，总是会发生此错误。为了使用 findbugs 注释，您必须将 annotations.jar 和 jsr305.jar 添加到类路径中。
一些注释（我在想`@SuppressWarnings`）可以在没有 jsr305.jar 的情况下使用，但`@NonNull`肯定需要它。

（您在问题中提到了jsr305.jar，但您没有明确表示您已经检查过。另外，人们在搜索错误消息时会登陆这里，他们需要添加jsr305.jar。）只有jsr305.jar 的一个版本应该在类路径中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-05-14T18:23:22.303

你也可以使用这个依赖

```
 <dependency>
        <groupId>com.google.code.findbugs</groupId>
        <artifactId>annotations</artifactId>
        <version>3.0.1</version>
    </dependency> 
```

# oop - 使用 nhibernate 进行域设计

> ID：11104668
> 
> 赞同：0
> 
> 时间：2012-06-19T15:48:17.193
> 
> 标签：oop, nhibernate, orm, class-design

在我的领域中，我有一个叫做的东西`Project`，它基本上包含许多简单的配置属性，这些属性描述了项目获取时应该发生的事情`executed`。当项目被执行时，它会产生大量的`LogEntries`. 在我的应用程序中，我需要分析给定项目的这些日志条目，因此我需要能够从数据库 (Oracle)*部分*连续加载一部分（时间范围）日志条目。您如何将这种关系建模为数据库表和对象？

我可以有一个`Project`表和一个表，`ProjectLog`并有一个主键的外键，`Project`并在对象级别做“相同”的事情有类`Project`和一个属性

`IEnumerable<LogEntry> LogEntries { get; }`

并让 NHibernate 完成所有映射。但是在这种情况下我将如何设计我的 ProjectRepository 呢？我可以有一个方法

`void FillLog(Project projectToFill, DateTime start, DateTime end);`

我如何告诉 NHibernate 在有人调用此方法之前它不应该加载 LogEntries，我如何让 NHibernate 在该方法中加载特定的时间范围？

我对 ORM 很陌生，也许这种设计对于 NHibernate 或一般来说不是最佳的？也许我应该以不同的方式设计它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T16:06:44.707

与其将 Project 实体作为[聚合根](https://stackoverflow.com/questions/1958621/whats-an-aggregate-root)，不如移动引用并让其`LogEntry`拥有一个`Product`属性并充当[聚合根](https://stackoverflow.com/questions/1958621/whats-an-aggregate-root)。

```
public class LogEntry
{
    public virtual Product Product { get; set; }
    // ...other properties
}

public class Product
{
    // remove the LogEntries property from Product
    // public virtual IList<LogEntry> LogEntries { get; set; }
} 
```

现在，由于这两个实体都是聚合根，因此您将拥有两个不同的存储库：`ProductRepository`和`LogEntryRepository`. `LogEntryRepository`可以有一个方法`GetByProductAndTime`：

```
IEnumerable<LogEntry> GetByProductAndTime(Project project, DateTime start, DateTime end); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T12:33:11.807

在 NHibernate 下加载部分/过滤/基于标准的列表的“正确”方式是使用查询。有，`lazy="extra"`但它不做你想要的。

正如您已经注意到的那样，这打破了根聚合 -> 子级的 DDD 模型。我一直在为这个问题苦苦挣扎，因为首先我讨厌持久性问题污染我的域模型，而且我永远无法让 API 表面看起来“正确”。拥有实体类的过滤器方法工作但远非漂亮。

最后，我决定扩展我的实体基类（我的所有实体都继承自它，我知道这些天有点不合时宜，但它至少让我可以始终如一地做这种事情）使用一个名为`Query<T>()`LINQ的受保护方法定义关系的表达式，并在存储库的底层调用 LINQ-to-NH 并返回一个`IQueryable<T>`您可以根据需要查询的值。然后，我可以在常规属性下方调用该调用。

基类这样做：

```
protected virtual IQueryable<TCollection> Query<TCollection>(Expression<Func<TCollection, bool>> selector)
        where TCollection : class, IPersistent
    {
        return Repository.For<TCollection>().Where(selector);
    } 
```

（我应该在这里注意到我的 Repository 实现`IQueryable<T>`直接实现，然后将工作委托给 NH `Session.Query<T>()`）

外墙的工作方式是这样的：

```
public virtual IQueryable<Form> Forms 
{ 
    get 
    { 
         return Query<Form>(x => x.Account == this); 
    } 
} 
```

这将 Account 和 Form 之间的列表关系定义为实际映射关系的逆（Form -> Account）。

对于“无限”集合 - 集合中可能存在无限数量的对象 - 这可以正常工作，但这意味着您不能直接在 NHibernate 中映射关系，因此不能直接在 NH 查询中使用该属性，只有间接地。

我们真正需要的是替代 NHibernate 的通用包、列表和集合实现，这些实现知道如何使用 LINQ 提供程序直接查询列表。一个已被提议作为补丁（参见[https://nhibernate.jira.com/browse/NH-2319](https://nhibernate.jira.com/browse/NH-2319)）。正如您所看到的，补丁尚未完成或被接受，并且从我所看到的提议者没有将其重新打包为扩展 - Diego Mijelshon 是这里的用户所以也许他会插话......我有将他提议的代码作为 POC 进行了测试，它确实像宣传的那样工作，但显然它没有经过测试或保证或不一定完整，它可能有副作用，并且未经许可使用或发布它，你无论如何都不能使用它。

直到并且除非 NH 团队开始编写/接受使这种情况发生的补丁，否则我们将不得不继续诉诸变通方法。NH 和 DDD 只是对世界的看法相互矛盾，在这里。

# c# - Windows 资源管理器集成，如 tortoisesvn

> ID：11104674
> 
> 赞同：3
> 
> 时间：2012-06-19T15:48:54.243
> 
> 标签：c#, windows-shell

我的公司使用一种 GIT 将源代码从本地系统移动到所需位置的存储库（稍后部署和填充，它基本上是一个服务器），并且对该工具的支持很糟糕。它使用命令行，使用起来非常繁琐。我想为此目的构建类似于 tortoiseSVN / tortoiseGIT 的东西，我正在寻找一个起点。

我将如何获得文件夹中的覆盖图标？我如何能够以“正确”的方式进行 Windows 资源管理器集成？

我将使用 .Net C# 来构建这个工具。

在此先感谢您的帮助！

干杯。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T15:57:30.607

你可以写一个[外壳扩展](http://www.codeproject.com/Articles/830/The-Complete-Idiot-s-Guide-to-Writing-Shell-Extens)！不过，还有[很多东西要学](http://msdn.microsoft.com/en-us/library/windows/desktop/bb774328%28v=vs.85%29.aspx)。 [完整的 idiot 的 shell 扩展指南系列的第 IX 部分](http://www.codeproject.com/Articles/797/The-Complete-Idiot-s-Guide-to-Writing-Shell-Extens)解释了如何处理图标。

[通常不支持](http://blogs.msdn.com/b/oldnewthing/archive/2006/12/18/1317290.aspx)在 C# 中编写 IE 和 Shell 扩展。当然，较新版本的运行时确实允许您在 SxS 支持方面更加灵活。但是您在编写 COM 互操作方面是靠自己的，您需要非常仔细地考虑这将如何影响其他应用程序，例如使用文件打开对话框。

# asp.net - 在 MVC3 中缓存 FileResult 动作

> ID：11104676
> 
> 赞同：5
> 
> 时间：2012-06-19T15:49:01.250
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3

我有一个返回 FileResult 的操作（这是一个 png 图像）。我非常希望浏览器缓存结果，因为对于给定的请求 uri，它不会改变。

我使用路由使 uri 看起来像这样-

```
http://localhost:6094/Map/Tiles/1.0.0/none/2/5/5.png 
```

在操作方法中，我调用：-

```
Response.Cache.SetCacheability(HttpCacheability.Public); 
```

在 Fiddler 中，我可以观察到响应具有：-

```
Cache-control: public 
```

标题。然而，对同一地图图块的后续请求如下所示：-

```
 GET http://localhost:6094/Map/Tiles/1.0.0/none/2/5/5.png HTTP/1.1
Host: localhost:6094
Connection: keep-alive
User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/536.11 (KHTML, like Gecko) Chrome/20.0.1132.34 Safari/536.11
Accept: */*
Referer: http://localhost:6094/
Accept-Encoding: gzip,deflate,sdch
Accept-Language: en-GB,en-US;q=0.8,en;q=0.6
Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.3 
```

因此导致 200 响应，以及数据传输。

知道为什么 Chrome 不费心缓存我的数据吗？

谢谢

滑

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-19T16:29:01.833

您是否尝试过 OutputCache 属性？这对您来说应该可以正常工作，但请指定它的生命周期。

[http://www.asp.net/mvc/tutorials/older-versions/controllers-and-routing/improving-performance-with-output-caching-cs](http://www.asp.net/mvc/tutorials/older-versions/controllers-and-routing/improving-performance-with-output-caching-cs)

前任

```
[OutputCache(Duration=84600)] 
```

# r - 从数据框中选择偶数天

> ID：11104679
> 
> 赞同：2
> 
> 时间：2012-06-19T15:49:01.953
> 
> 标签：r, dataframe

我有一个时间序列数据的 data.frame，我想通过仅保留在每个偶数天数上测量的条目来精简数据。例如：

```
set.seed(1)
RandData <- rnorm(100,sd=20)
Locations <- rep(c('England','Wales'),each=50)
today <- Sys.Date()
dseq <- (seq(today, by = "1 days", length = 100))

Date <- as.POSIXct(dseq, format = "%Y-%m-%d")

Final <- data.frame(Loc = Locations,
                    Doy = as.numeric(format(Date,format = "%j")),
                    Temp = RandData) 
```

那么，我将如何将此数据框减少为仅包含在偶数天测量的每个条目，例如第 172 天、第 174 天的 Lloc、day 和 temp 等等......

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-19T15:53:35.660

关于什么：

```
Final[Final$Doy%%2==0,] 
```

# makefile - GNU make：执行目标但从文件中获取依赖项

> ID：11104681
> 
> 赞同：0
> 
> 时间：2012-06-19T15:49:05.723
> 
> 标签：makefile, gnu-make

我希望执行目标的规则，但所有依赖目标都应认为该目标已满足。

我怎样才能做到这一点？

例子：

```
$(NETWORK_SHARE)/foo.log:
    @echo Warning: server offline, still continue ...
    @exit 0

foo.csv: $(NETWORK_SHARE)/foo.log
    @echo Long export from a (different) server
    @echo sleep 20
    @echo foo > $@ 
```

如果 $(NETWORK_SHARE)/foo.log 存在：如果 $(NETWORK_SHARE)/foo.log 比 foo.csv 更新，则应重建 foo.csv；否则**什么**都不会发生（默认）

如果 $(NETWORK_SHARE)/foo.log 不存在（例如，服务器脱机、故障等），则只应打印指示问题的消息，但仅当 foo.csv 不存在时才应构建 foo.csv。

我玩弄 .PHONY 并返回不同的返回值，但对于案例 2，一旦我在 $(NETWORK_SHARE)/foo.log 上执行某些操作，就会发生昂贵的“导出”...

问候 divB

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-10T01:53:10.180

看起来您可以使用仅限订单的先决条件，而不是使用一些旧文件（有人可能会意外触摸）。这是 GNU makefile 手册（第 4.3 章）的引述

> 但是，有时您会遇到这样的情况，即您希望对要调用的规则施加特定的顺序，而不是在执行这些规则之一时强制更新目标。在这种情况下，您想要定义仅订单的先决条件。可以通过在先决条件列表中放置管道符号 (|) 来指定仅订单先决条件：管道符号左侧的任何先决条件都是正常的；右侧的任何先决条件都是仅订购的：
> 
> ```
>  targets : normal-prerequisites | order-only-prerequisites 
> ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T14:43:25.750

太好了，感谢[Thiton](https://stackoverflow.com/users/847601/thiton)在我的相关问题（[Force make to find out-of-date condition from file](https://stackoverflow.com/questions/11121000/force-make-to-find-out-of-date-condition-from-file)）中的回答，我现在可以提供一个技巧来解决这个问题：

```
.PHONY: always-remake

NETWORK_SHARE = //server/dfs/common/logs

.PHONY: all
all: foo.csv

# file does not exist ...
ifeq "$(wildcard $(NETWORK_SHARE)/foo.log)" ""

old_file: always-remake
    @echo Warning: network is not available ....

foo.csv: old_file
    @echo Expensive export
    @sleep 10
    @echo $@ > $@
else
foo.csv: $(NETWORK_SHARE)/foo.log
    @echo Doing expensive export since log file changed ...
    @sleep 10
    @echo $@ > $@
endif 
```

“old_file”是一个虚拟文件，它**必须**存在并且永远不会比任何其他文件更新（例如 1/1/1971, 00:00）

问候 divB

# android - 获取 Android 日历事件的唯一 ID

> ID：11104687
> 
> 赞同：5
> 
> 时间：2012-06-19T15:49:38.880
> 
> 标签：android, icalendar, android-calendar

我已经做了很多研究，但找不到如何为 Android 中的日历事件访问真正唯一的 ID。我查询以下内容`URI`：

```
Context.getContentResolver().query(Events.CONTENT_URI, null, null, null, null); 
```

在我的 Galaxy Nexus 上查看结果`Cursor`时，没有任何类似于`iCalGUID`我正在寻找的表格（见下文）。但是，当在 HTC One S 上执行相同的查询时，我注意到 HTC 包含`iCalGUID`了一个额外的列字段，它准确地返回了我正在寻找的 ID 类型。它看起来像这样：

```
9ced5c2c-6ed9-481f-9f69-9a064810ac0f 
```

不过，这个字段看起来不是`iCalGUID`Android SDK 标准，所以我无法在其他 Android 手机上获取此 ID。我的问题是，有什么方法可以让我以标准 Android 的方式获得这种类型的 ID？我现在以 ICS 为目标，但希望灵活地在未来将其扩展到以前的版本。

如果我应该使用其他类型的 ID，那也很好。**注意**：我*不是*在寻找`Events._ID`专栏。我需要我的 ID 在所有设备和所有类型`Account`（Google、Exchange、Hotmail 等）中都是唯一的

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-06-17T13:54:48.033

Field [UID_2445](http://developer.android.com/reference/android/provider/CalendarContract.EventsColumns.html#UID_2445)是为此目的而设计的，但不幸的是，它几乎从未填充过，也[从未使用实际的 UID](https://stackoverflow.com/questions/20312725/unique-calendar-event-uid-2445-getting-null)。

同步器可以访问在我的测试中始终保存事件原始 ID 的各种同步字段。问题是填充的字段取决于特定的同步器，没有标准。您需要同步器读取权限才能查看这些字段。

它不受支持，我不推荐它，但您可以查看帐户类型（例如 com.android.exchange）以找出同步器，然后查看通常填充有 UID 的字段。在我的测试中，除了谷歌之外，它是同步数据 2，即同步数据 1。

# android - Android Phonegap 中的 JSON 操作

> ID：11104688
> 
> 赞同：0
> 
> 时间：2012-06-19T15:49:40.680
> 
> 标签：android, json

我正在尝试从我的应用程序（登录表单）发送 getJson 调用，以从 PHP 文件中获取外部 JSON。如果登录名和密码都可以的话。我的应用程序将从 login.html 重定向到 home.html。

这是我位于 login.html 中的脚本，如下所示

```
 <script>
   function testlogin() {  

var login = $('#login').val();  
var password = $('#password').val();  
$.ajax({          
    url: "http://http://10.0.2.2/YasmineMarket.php",          
    data: { login: JSON.stringify(login), password: JSON.stringify(password) },  
    dataType: "jsonp",  
    success: function(json, textstatus) {              
        if (json.d == 'Login Success') {                  
            var url = "acceuil.html";  
            $(location).attr('href', url);  
        }  
        else {  
            alert("Wrong Username or password");  
            var url = "index.html";  
            $(location).attr('href', url);                  
        }  
    },  
    error: function(xmlHttpRequest, textStatus, errorThrown) {  
        if (xmlHttpRequest.readyState == 0 || xmlHttpRequest.status == 0)  
            return;  
        else  
            alert(errorThrown);  
    }  
});  
}
</script>

<!DOCTYPE HTML>

<html >

        <form  id="loginForm" method="GET" >

       <table border="0" align="center">
           <tr><td></td></tr>
       <tr><td align="center"><input type="text" name="login" id="login" /></td></tr>
       <br>
   <tr><td align="center"><input type="password" name="password"  id="password" /></td></tr>
   <tr><td align="center"><input type="submit" value="Connexion" onlick="testlogin();"   class="button"   /></td></tr>
   </table>
   </form>

</body> 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-19T17:28:15.897

此代码不足以在这里找到实际问题。但是此链接可能会帮助您编写服务器身份验证。请浏览[我](https://stackoverflow.com/questions/11054319/ajax-on-phonegap/11062464#11062464)关于使用 jquery mobile 和 phonegap 向 Web 服务器发出 jsonp ajax 请求的旧帖子。

# django - Django：如何在 ajax 中返回模型表单集并在模板中使用

> ID：11104690
> 
> 赞同：2
> 
> 时间：2012-06-19T15:49:48.910
> 
> 标签：django, http, jquery, django-templates

我需要在运行时使用 ajax 动态地将表单添加到我的表单集，为此我指的是[使用 Ajax 将表单动态添加到 Django 表单集](https://stackoverflow.com/questions/501719/dynamically-adding-a-form-to-a-django-formset-with-ajax)

我在同一页面上有多个具有不同前缀的表单集。

我的模型是这样设计的：一个用户可以有很多部手机。电话可以有许多线路（如果需要详细信息） [访问表单集中的多对多“通过”关系字段](https://stackoverflow.com/questions/11021242/accessing-many-to-many-through-relation-fields-in-formsets)

用户添加新手机后，我会使用 ajax 保存手机。视图如下

```
def addUserPhone(request, customer_id, location_id, user_id, **kwargs):
error_msg = u"No POST data sent."
context = {}
if request.is_ajax():
            if request.method == "POST":
                user = End_User.objects.get(id=user_id)
                phone_client = PartialPhone_ClientForm(request.POST, prefix='new_client')
                instance = phone_client.save()
                #associate user to a phone
                instance.end_user.add(user)

                #Creating an empty lineFormset for a phone
                LineFormSet = modelformset_factory(Line, form=Line_Form, can_delete=True)
                client_lines  = LineFormSet(queryset=Line.objects.none(), prefix='phone_client_'+str(instance.id))

                # how to return the two objects instance and client_lines back to the template?? 
                #format = 'json'
                #mimetype = 'application/javascript'
                #data = serializers.serialize(format, [instance])
                #return HttpResponse(data)

                #can we return as a context?? this gives me only a string "phoneline_set" in the template   
                context['phone'] = instance
                context['line_set'] = client_lines
                return HttpResponse(context)
            else:
                error_msg = u"Insufficient POST data (need 'Name ' and 'Telephone Number'!)"

else:
        error_msg = "Non Ajax"
return HttpResponseServerError(error_msg) 
```

现在返回电话实例的最佳方法是什么，并将 LineFormSet 返回到视图以在模板中呈现？

如果我只返回一个上下文，我的视图只会得到字符串“phoneline_set”。但我想做类似的事情

```
 $.post("addUserPhone/",phoneData,function(data){
            $('.scroll').append("<h2> {{ line_set }} </h2>")

            }); 
```

如果我使用 Json 进行序列化并通过我如何传递 LineFormSet 并在模板中使用它？目前，如果我尝试序列化我的 client_lines 表单集，则会收到错误 AttributeError: 'LineFormFormSet' object has no attribute '_meta'

任何帮助表示赞赏，谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T20:48:26.887

只是按照评论中的要求详细说明丹尼尔的回答。

Django 是一个 MVC 风格的框架。模型用于存储和访问数据。在 Django 中，控制器被称为视图，它的工作是从具有特定 URL 的用户那里获取请求，获取一些可能与 url 相关联的数据，然后将这些数据推送到一些模板，该模板将使用给它的数据视图为了填写模板内部的占位符。

这是一个解释所有方面的简单示例。想象一下，有一个网站有一个书籍数据库。因此，您的模型将存储与每本书相关的信息——标题、作者、ISBN 号等。

```
# models.py
class Book(models.Model):
    title = models.CharField(max_length=64)
    author = models.CharField(max_length=64)
    isbn = models.CharField(max_length=64) 
```

现在您要添加一个 URL ，该 URL`example.com/book/<id>/`将显示有关具有指定 id 的图书的所有信息。为此，需要发生几件事。首先 Django 控制器必须使用这种模式捕获 url。您在 urls.py 文件中指定 url 模式。

```
# urls.py
urlpattern('',
    url(r'^book/(?P<id>\d+)/$', views.book),
) 
```

由于`urls.py`指定了 url 模式和视图之间的映射，这告诉 Django 每当用户访问具有指定模式的 URL 时，Django 必须将请求发送给`book`知道要做什么的视图。此外，Django 会将书籍 ID 传递给视图。

```
# views.py
def book(request, id):
    # get the book
    book = get_object_or_404(Book, pk=id)
    context = {
        'book': book
    }
    return render_to_response('book_template.html', context) 
```

所以在视图内部，给定书籍的 ID，它使用模型从数据库中查找书籍，如果找不到，它会向用户返回 404 错误。然后它填充一个字典，我`context`用一些值调用它，它将传递给模板。模板的工作是获取这个`context`字典并使用其中的值来填充模板内的一些占位符。

```
# book_template.html
<html>
<head>...</head>
<body>
   <h1>{{ book.title }}</h1>
   <p>Author: {{ book.author }}</p>
   <p>ISBN: {{ book.isbn }}</p>
</body>
</html> 
```

因此模板将从视图中获取上下文，然后使用`book`上下文的内部来填充内部的值`{{ }}`。

在您的情况下，您试图向用户返回一个没有多大意义的上下文。您要做的是创建一个模板，该模板将采用该上下文`{ 'phone': instance, 'line_set': client_lines }`并根据它呈现一些将返回给用户的 HTML。您可以使用 AJAX 提取 HTML，然后根据需要使用它。

希望这可以为您澄清一些概念。

Django 文档非常好，所以我建议也阅读介绍。它将解释我在此答案中使用的所有语法和一些快捷方式（[render_to_response](https://docs.djangoproject.com/en/dev/topics/http/shortcuts/#render-to-response)等）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T16:00:36.090

您不会将上下文作为 Ajax 响应发送，而是使用该上下文发送呈现的模板片段。模板应该只是包含要插入到 div 中的表单的 HTML。

# javascript - 为国家分配价值 或 .val()

> ID：11104693
> 
> 赞同：2
> 
> 时间：2012-06-19T15:49:57.163
> 
> 标签：javascript, jquery

我正在开发一个费率模块，计算他们使用电话卡获得的分钟数。例如，拨打南非的费用为每分钟 0.015。我想执行以下数学运算：

南非 * 分钟。或者在这种情况下：0.015*200 并因此获得 3 美元。

我的问题是：我是否将以下值放入：

代码版本 1：HTML：

```
 <option value="0.015">South Africa</option> 
```

JS：

```
 var inputCountries =$('#CountryName').val();
   var inputMinutes = $('#minutes').val();
   var result = parseInt(inputMinutes)*parseFloat(inputCountries); 
```

代码版本 2：HTML：

```
 <option value="SouthAfrica">South Africa</option> 
```

JS：

```
 var SouthAfrica = 0.015;
    var inputCountries =$('#CountryName').val();
    var inputMinutes = $('#minutes').val();
    var result = parseInt(inputMinutes)*parseFloat(inputCountries); 
```

代码版本 3：HTML：

```
 <option value="SouthAfrica">South Africa</option> 
```

JS：

```
 var inputCountries =$('#CountryName').val(
           SouthAfrica = 0.015;
      );
    var inputMinutes = $('#minutes').val();
    var result = parseInt(inputMinutes)*parseFloat(inputCountries); 
```

这是我的第一个 JavaScript 项目，我边走边学，所以我会很感激任何资源来解释为什么上面的代码工作/不工作。这是我的其余代码供参考。

注意：请不要更正我的代码的其余部分，我仍在研究和学习。但是，非常感谢您提供任何用于找出其余代码的提示或资源。我这个话题的重点是分配每个国家的价值。我试图弄清楚如何使用几种不同的资源来解决这个问题，但是却一无所获。感谢您的时间！

HTML：

```
 <form name="calculator">
    <!--
    Countries
    -->
    <label><span><!--[Write as something else]-->Where do you want to call?</span>
    </label>

    <select id="CountryName" class="rates">
    <option>Select...</option>
    <option value=" ?? ">South Africa</option <!--This list is truncated to keep the post short-->
    </select>
    <label>Minutes to call</label>
    <input id="minutes" type="text" class="rates" /><br />

    <input type="button" name="submit" id="submit" value="Submit" />

    <input type="button" name="clear" id="clear" value="Clear" />
    <br />
    </form>
    <div id="RatesResult">
    <p>
    <span id="total"></span> for 
    <span id="afterMin"></span> minutes. <!--This section, #afterMin, is still being worked on, any hint/resources on how to print what user wrote in #minutes into this section would be appreciated -->

    </p><br />
    </div>
    </div> 
```

JS：

```
 $(document).ready(function() {
    $('#submit').submit(function() {
 var total = 0;
     var SouthAfrica = 0.015, Canada = 0.015 ; //truncated list             
    var inputCountries =$('#CountryName').val();
var inputMinutes = $('#minutes').val();
var result = parseInt(inputMinutes)*parseFloat(inputCountries);
$('#total').html(formatCurrency(result));
        });
   }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T15:54:09.033

对您来说，最简单的答案是创建一个像这样的对象：（请注意，javascript 中的所有对象实际上都是 hashmaps/`dictionary<string,value>`类型。

```
var rates = {
  'SouthAfrica': 0.0015,
  'USA' : 0.0001,
  .....
  'France' : 0.0005
}

//HTML
<option value="SouthAfrica">South Africa</option>
<option value="USA">United States of America</option> 
```

然后，当您从选择中获取 val 时，就像`$('#CountryName').val();`您可以对 rates 对象进行查找一样，如下所示：

```
var countrySelected = $('#CountryName').val();
var rate = rates[countrySelected]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T15:55:31.750

我建议您将汇率（所以 0.015）作为下拉列表中的值：

```
<select id="CountryName" class="rates">
    <option value="-1">Select...</option>
    <option value="0.015">South Africa</option 
</select> 
```

然后，您将使用下拉列表中的选定值执行简单的计算（如您所述）。我建议像在我的示例中那样添加 -1 值，然后您可以测试以确保他们选择了大于或等于零的值（您可能有一个免费的国家/地区，即 0）。

# php - 在 while 循环中使用 array_push() 插入两个值时遇到问题

> ID：11104695
> 
> 赞同：0
> 
> 时间：2012-06-19T15:50:03.867
> 
> 标签：php, mysql, arrays

我正在尝试使用 PHP`while`循环计算我的 MySQL 表中某些日期的出现次数，并将日期和重复次数放在`array`. 我能够正确地将日期添加到数组中，但我似乎无法添加重复次数。

例子：

```
function counter() {
//The 'timestamp' column uses the MySQL timestamp type
$query = mysql_query("SELECT timestamp FROM table1 ORDER BY timestamp DESC");

$date_c;
$counter = 0;
$date_array();

while($row = mysql_fetch_array($query)) {
    //gets the year, month, and day from the timestamp
    $year = substr($row['timestamp'], 0, 4);
    $month = substr($row['timestamp'], 5, 2);
    $day = substr($row['timestamp'], 8, 2);
    $date = $month.'/'.$day.'/'.$year;

    if($date == $date_c) {
        $counter += 1;
    } else {
        array_push($date_array, $date, $counter);
        $counter = 0;
    }

    $date_c = $date; 
```

但是，当我`echo`成为数组的一部分时，计数器不会更新。这是一个使用第一个重复日期的示例`table1`：

```
>>> echo $date;
06/15/2012
>>> echo $counter;
25
>>> echo $date_array[0];
06/15/2012
>>> echo $date_array[1];
0 
```

我已经玩了一段时间了，但我似乎找不到我的错误。有谁知道我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T15:54:56.833

您还想对这些行做些什么吗？因为这对我来说似乎更容易：

```
 SELECT DATE_FORMAT(timestamp,'%m/%d/%Y') as 'date', COUNT(*) as 'count'
 FROM table1 
 GROUP BY DATE_FORMAT(timestamp,'%m/%d/%Y')
 ORDER BY timestamp DESC 
```

...并且 php 代码中的问题可能是最后一个日期/计数未推送到（如果最后一次迭代没有在数组上推送计数器，则 array_push 在 while 循环完成*后*`$date_array`必须再次运行.....)

 ** * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T17:25:08.747

同意 Wrikken，您可以在 SQL 中获取唯一日期的计数，而不需要在 PHP 中进行。

但是，如果您确实想计算每个日期的实例，我会使用 PHP 中数组的关联数组功能。所以像：

```
$query = mysql_query("SELECT timestamp FROM table1");
$date_array = array();

while($row = mysql_fetch_array($query)) {
    $year = substr($row['timestamp'], 0, 4);
    $month = substr($row['timestamp'], 5, 2);
    $day = substr($row['timestamp'], 8, 2);

    $date = $month.'/'.$day.'/'.$year;

    // Using the @ symbol to suppress warnings for missing index
    @ $date_array[$date]++;
}

print_r($date_array); 
```

在该循环结束时， $date_array 是一个关联数组，其中日期为键，出现次数为值。*

# perl - 如何制作perl“转义”字符串？

> ID：11104696
> 
> 赞同：1
> 
> 时间：2012-06-19T15:50:16.833
> 
> 标签：perl

我正在使用从 perl 脚本嵌套的 perl 系统调用：

```
$file1 = shift @ARGV;
system("cat file.txt | perl -pi -e 's/OUTPUT/$file1/'"); 
```

问题在于，如果 $file1 包含诸如 @ 之类的字符，那么以这种方式使用它就会产生问题。有没有办法告诉 perl 它应该“转义”任何 $file1 包含的内容，而不是将 @... 视为一个数组？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T16:10:49.590

[引用元](http://perldoc.perl.org/functions/quotemeta.html)。

但是你为什么要产生第二个 Perl 进程呢？您可以在同一个脚本中执行此操作。

```
my $file = shift;
{
    local $^I = '';
    local @ARGV = ('file.txt');
    while (<>) {
        s/OUTPUT/$file1/;
        print;
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-19T16:08:42.270

不需要从 perl 内部调用 perl。像这样的东西应该工作：

```
my $file1 = shift;
my @data;
open(my $fh, '<+', 'file.txt') or die $!;
while (<$fh>) {
   $_ =~ s/OUTPUT/$file1/;
   push(@data, $_);
}

seek($fh, 0, 0);
truncate($fh, 0);

for my line (@data) {
   print ${fh} $line;
}
close($fh); 
```

# java - JAXB 是否总是忽略 @XmlType/propOrder 中未指定的“额外”元素？

> ID：11104697
> 
> 赞同：17
> 
> 时间：2012-06-19T15:50:20.577
> 
> 标签：java, xml, jaxb

如果我有一个带有注释的类

`@XmlType(name = "someDTO", propOrder = { "firstField", "secondField", })`

但是 XML（例如来自 SOAP 响应）看起来像

`<return><firstField>a</firstField><secondField>b</secondField><thirdField>c</thirdField></return>`

我的对象仍将填充 firstField 和 secondField，并忽略 thirdField。

为什么是这样？会一直这样吗？如果存在额外的字段，有没有办法防止创建对象？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-06-19T16:09:40.607

如果有[**映射**](http://jcp.org/en/jsr/detail?id=222)到 XML 元素的属性未包含在`propOrder`. `propOder`on`@XmlType`不用于控制包含/排除哪些元素。

**排除属性的选项**

1.  如果您想排除不到一半的属性，那么我建议您使用 标记您希望排除的属性`@XmlTransient`。
2.  如果您希望排除一半以上的属性，那么我建议您使用`@XmlAccessorType(XmlAccessType.NONE)`并注释您希望包含的属性。

**了解更多信息**

*   [http://blog.bdoughan.com/2012/04/jaxb-and-unmapped-properties.html](http://blog.bdoughan.com/2012/04/jaxb-and-unmapped-properties.html)

# c# - 为什么 HtmlEncode 不对这个字符进行编码？

> ID：11104699
> 
> 赞同：4
> 
> 时间：2012-06-19T15:50:23.600
> 
> 标签：c#, html, encoding, html-entities

这是代码：

```
Response.Write("asd1 X : " + HttpUtility.HtmlEncode("×"));
Response.Write("asd2 X : " + HttpUtility.HtmlEncode("✖")); 
```

第一个是：

```
asd1 X : &#215; // OK, ENCODED AS HTML ENTITIES 
```

第二个不，只是✖：

```
asd2 X : ✖ 
```

那是哪种字符？[另外，如果我在这里](http://htmlentities.net/)尝试，结果是：

```
asd1 X : &times;
asd2 X : &amp;#10006; 
```

什么？？为什么会有这种差异？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-19T16:06:25.500

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T16:06:58.143

My best guest is that not all strings has a entity representation. The [Heavy multiplication X](http://www.danshort.com/HTMLentities/index.php?w=dingb) is just one of the many that don't.

To elaborate Oded's link, `HttpUtility.HtmlEncode` only encodes characters in [ISO 8859-1 (Latin-1)](http://www.w3.org/TR/html4/sgml/entities.html#iso-88591). Since the Heavy Multiplication X is out of this range, the function doesn't handle it.

If you try `Microsoft.Security.Application.AntiXss.HtmlEncode("✖");`, you'll get the HTML entity in `&#10006;`.

# perl - 使用 perl 使单元格空白和 Excel 工作表

> ID：11104702
> 
> 赞同：0
> 
> 时间：2012-06-19T15:50:39.113
> 
> 标签：perl, excel, parsing

我有一张 Excel 表，我需要清空一些单元格

到目前为止，这是它的样子：

我打开工作表，检查 M 列中的单元格是否为空。我将这些单元格添加到我的数组错误中，然后我想将所有这些单元格设为黑色并保存文件（此步骤不起作用），因为该文件需要成为另一个程序的输入/谢谢！

```
$infile = $ARGV[0];

 $columns = ReadData($infile) or die "cannot open excel table\n\n";
 print "xls sheet contains $columns->[1]{maxrow} rows\n";

 my $xlsstartrow;
 if ( getExcel( A . 1 ) ne "text" ) {

$xlsstartrow = 2;   
 }
 else 
 {
$xlsstartrow = 4;
 }

 check_templates();
 print "done";
 sub check_templates {

for ( $row = $xlsstartrow ; $row < ( $columns->[1]{maxrow} + 1 ) ; $row++ ) {

    if (getExcel(M . $row) ne ""  ){ 

        $cell = "M" . $row ;

        push(@mistakes,$cell);

    }

}
 rewritesheet(@mistakes);

 }

 sub rewritesheet {

my $FileName = $infile;
 my $parser   = Spreadsheet::ParseExcel::SaveParser->new();
 my $template = $parser->Parse($FileName);
my $worksheet = $template->worksheet(0);

my $row      = 0;
my $col      = 0;
# Get the format from the cell

my $format   = $template->{Worksheet}[$sheet]
                       ->{Cells}[$row][$col]
                        ->{FormatNo};

    foreach (@mistakes){

$worksheet->AddCell( $_, "" ); 
}          

 $template->SaveAs($infile2);` 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T18:28:38.257

### 在 Excel 工作表中清空列值并保存结果？

如果您的程序的全部目的是从 .xls 文件中删除所有列 M 值，那么以下程序（从您的程序中采用）将完全做到这一点：

```
 use strict;
  use warnings;
  use Spreadsheet::ParseExcel;
  use Spreadsheet::ParseExcel::SaveParser;

   my $infile  = $ARGV[0];
  (my $infile2 = $infile) =~ s/(\.xls)$/_2$1/;
   my $parser  = Spreadsheet::ParseExcel::SaveParser->new();
   my $workbook = $parser->Parse($infile);

   my $sheet = $workbook->worksheet(0);
   print "xls sheet contains rows \[0 .. $sheet->{MaxRow}\]\n";
   my $startrow = $sheet->get_cell(0, 0) eq 'text' ? 4-1 : 2-1;

   my $col_M = ord('M') - ord('A');
   for my $row ($startrow .. $sheet->{MaxRow}) {
      my $c = $sheet->get_cell($row, $col_M);
      if(defined $c && length($c->value) > 0) { # why check?
         $sheet->AddCell($row, $col_M, undef) # delete value
      }
   }
   $workbook->SaveAs($infile2);
   print "done"; 
```

但是，如果您真的只想清除列 M，为什么要测试值？您可以直接覆盖它们而无需测试。也许这不是您的所有程序都需要执行的吗？我不知道。

问候

rbo

# regex - 期望中的正则表达式

> ID：11104704
> 
> 赞同：0
> 
> 时间：2012-06-19T15:50:59.190
> 
> 标签：regex, tcl, expect

我对 TCL/EXPECT 中的以下代码有疑问：

```
expect { 
    timeout { 
        puts "timeout error"
    }
    -re "Please enter the play name" {
        exp_send $common1
        exp_continue
    }
    -re "Please enter the play name_type" {
        exp_send $common2
        exp_continue
    }
    -re "Now you can get the information of the play" {
        expect {
        -re "\r"
            }
    }
    } 
```

如果我运行上面的代码，它将卡在第二个代码块（-re“请输入播放名称_类型”）。为什么会发生这种情况？如果我移动顶部的第二个代码块（-re“请输入播放名称_类型”），前两个将通过。是什么原因？

并且似乎第三个代码块从未执行过，我在其中添加了一些跟踪，如下所示：`puts "executed!!!!"`，消息从未显示，并且似乎它忽略了第三个代码块并执行了整个期望块下的代码，如何修复它?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T20:26:29.900

由于第一个模式是第二个模式的子字符串，第一个模式将匹配两次。使用`expect -re`时通常建议匹配到行尾，所以

```
expect { 
    timeout { 
        puts "timeout error"
    }
    -re "Please enter the play name: $" {
        exp_send $common1
        exp_continue
    }
    -re "Please enter the play name_type: $" {
        exp_send $common2
        exp_continue
    }
    -re "Now you can get the information of the play.*\r" 
}
# continue processing here 
```

我假设问题以冒号、空格和行尾结尾。相应调整。

我通常期望的建议：当您调试或开发程序时，添加`exp_internal 1`到脚本的顶部。

# android - 三星 Galaxy S3 上的蓝牙 4.0 / 智能 / 低功耗

> ID：11104708
> 
> 赞同：14
> 
> 时间：2012-06-19T15:51:09.407
> 
> 标签：android, bluetooth, galaxy, bluetooth-lowenergy, broadcom

我正在尝试为 S3 开发蓝牙 4.0 应用程序。问题是，手机的行为就像它甚至没有蓝牙 4.0。它不会发现 4.0 设备，也无法发现 4.0 设备。[我使用Broadcom-ble API](http://code.google.com/p/broadcom-ble)在手机和应用程序的设置中都进行了尝试。Broadcom API 没有任何用于查找/发现 4.0 设备的额外功能，而是使用常规的蓝牙适配器功能，并声称将在 4.0 手机中增强它以发现 4.0 设备。

有人试过在 S3 上使用蓝牙 4.0 吗？有没有人成功使用过 Broadcom API？

提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-27T13:30:15.173

现在这是一个已确认的错误，将在“未来版本”中修复。

请参阅[三星的此论坛主题](http://developer.samsung.com/forum/board/thread/view.do?boardName=GeneralB&messageId=157757)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-29T09:57:32.653

三星 BLE SDK 的测试版已在[此处](http://developer.samsung.com/ble)发布。我将研究这个 SDK，希望它能解决我的一些问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-10-18T16:24:09.287

[据 XDA 高级开发人员 Andrew Dodd 报道，](https://plus.google.com/+AndrewDodd/posts/aoAGK5yo13Y) Galaxy S3 实际上并不支持低功耗蓝牙

> Galaxy S3 自发布以来一直以蓝牙 4.0 低功耗（又名蓝牙智能）的形式销售 - 但它实际上不支持 BTLE - [http://developer.samsung.com/forum/board/thread/view.do?boardName= GeneralB&messageId=157757](http://developer.samsung.com/forum/board/thread/view.do?boardName=GeneralB&messageId=157757) - 三星仍在宣传该设备具有 BTLE 功能，但事实上他们已经意识到这种虚假广告几个月了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-02T08:30:01.847

三星有一个页面：

[http://developer.samsung.com/ble](http://developer.samsung.com/ble)

您可以在其中下载蓝牙 LE SDK 和示例代码（需要注册，否则它是自动的）。

对于它的价值，有一个 HTC 页面：

[http://www.htcdev.com/devcenter/opensense-sdk/partner-apis/bluetooth-low-energy/](http://www.htcdev.com/devcenter/opensense-sdk/partner-apis/bluetooth-low-energy/)

您可以在其中请求访问他们的“合作伙伴 API”。这需要签署许可协议（这对我来说意味着大量的律师工作）所以我实际上还没有从他们那里得到代码..

伊恩

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-23T06:15:44.867

将您的手机更新为*Jelly Bean ，然后从*[Play Store](https://play.google.com/store/apps)下载`nRf`Utility ，它可以扫描您周围的*BLE*设备！

 ** * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-06-05T08:53:14.327

请参阅此链接 [http://e2e.ti.com/support/low_power_rf/f/538/p/240097/879328.aspx](http://e2e.ti.com/support/low_power_rf/f/538/p/240097/879328.aspx)

[http://e2e.ti.com/cfs-file.ashx/__key/communityserver-discussions-components-files/538/8880.S3-BLE.zip，](http://e2e.ti.com/cfs-file.ashx/__key/communityserver-discussions-components-files/538/8880.S3-BLE.zip,)

附件包可以在三星 S3 上运行，现在它受限于发现 BLE 设备和配对。最近几天，我试图找出如何发送/接收数据。但仍然没有任何运气。

我希望它可以帮助。*

# iphone - 如何将带有 NavigationBar（导航控制器）的 TableView 添加到视图

> ID：11104709
> 
> 赞同：0
> 
> 时间：2012-06-19T15:51:11.573
> 
> 标签：iphone, objective-c, uitableview, uinavigationcontroller, uitabbarcontroller

我有一个这样的选项卡式应用程序：

![截屏](../Images/2f444842917b1f74ef7bcca15253c696.png)

并且已经设置了它应该看起来的所有东西，但它还不能运行。我已经用谷歌搜索了我的问题，他们说你首先需要设置一个 NavigationController，其表视图为 rootView，然后是 NavigationBar，但我真的想不通。希望你们中的某个人可以帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T21:57:15.603

如果不使用故事板，假设这将在代码中完成，您需要按照层次结构的相反顺序创建事物 - 如下所示：

*   使用 initWithNibName 创建 Einstellungen 选项卡的 TableViewController 实例：
*   使用 initWithRootViewController: 创建一个 UINavigationController: 并将 Einstellungen 设置为根
*   创建一个 UITabBarController 并将您的导航控制器设置为此选项卡栏控制器的视图控制器之一
*   将标签栏控制器作为子视图添加到应用程序委托中的主窗口

这将创建此层次结构：

标签栏控制器 -> 视图控制器：导航控制器 -> 根视图控制器：Einstellungen

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T17:20:43.797

如果您使用 Storyboard，请选择您的视图控制器，转到“编辑”菜单并选择“嵌入导航控制器”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T20:44:10.763

根据您对我对您问题的评论的回复，您应该这样做：

首先，为了使它看起来像设置应用程序表，您需要将您的样式更改`UITableView`为`UITableViewStyleGrouped`.

您的层次结构将包括以下内容：

实际添加到您的`UITabBarController`viewControllers 数组中的视图控制器（因为我看到您有一个标签栏作为您的最低导航级别）应该是`UINavigationController`. 导航控制器的根视图控制器应该是您创建的包含表视图的 uiviewcontroller 子类。（假设它被称为`SettingsViewController`）

`SettingsViewController *settingsViewController = [[SettingsViewController alloc] init];`

`UINavigationController *settingsNavController = [[UINavigationController alloc] initWithRootViewController:settingsViewController];`

您可能需要为您想要的每种类型的详细信息窗格创建一个不同的 UIViewController 子类（如果它们具有不同的功能）。

在该`didSelectRowAtIndexPath` `UITableViewDelegate`函数中，您将创建适当的细节视图控制器并将其推送到您的导航堆栈中。

假设您有一个音量设置视图控制器作为示例。以下是我刚才提到的函数中的代码。请记住，您还需要实际检查所选行的索引和/或部分，以确定应该显示哪个详细视图。

`VolumeSettingsViewController *volumeSettings = [[VolumeSettingsViewController alloc] init];`

`[self.navigationController pushViewController:volumeSettings animated:YES];`

默认情况下，它的功能与 Apple 设置应用导航非常相似。导航栏将自动有一个“返回”按钮，带您返回设置视图。

# android - Android 日历实例 url 问题

> ID：11104711
> 
> 赞同：0
> 
> 时间：2012-06-19T15:51:22.387
> 
> 标签：android, android-calendar

好的，我已经搜索和搜索，找不到一个和我有同样问题的人。

我使用“content://com.android.calendar/instances/where”根据值之间的开始日期取回实例。我有一个安装了 CM9 的 Nexus S，效果很好。我朋友的安装了 CM7 2.3.7 的 Evo 4G 不能。他说这是一个糟糕的网址。

我不得不求助于使用事件 url，这很好。但是，他的手机没有“可用性”列。此外，可能已更改开始/结束时间的事件似乎仍然出现在我的查询中，仅针对那些在接下来的 15 分钟内开始的事件，例如，当它们在第二天或更晚开始时。我想使用实例，但似乎我不能。

我在这里错过了什么吗？我知道它们是无证的 api，但这并不能阻止其他人也尝试使用它们。我只是希望有一些方法可以获得我需要的详细程度。

有任何想法吗？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T12:25:57.477

So I found out by loading up CM7 on my second Nexus S that "instances" are indeed present. Possibly a RC or earlier then stable revision of CM7 had a bug in it. My friend loaded the latest and was able to get instances without issue.

Hopefully anyone else who might run into this issue will find this question helpful in their situation.

# mysql - 使用字符串作为逗号分隔的查询

> ID：11104715
> 
> 赞同：0
> 
> 时间：2012-06-19T15:51:27.830
> 
> 标签：mysql, stored-procedures, cursor

我正在尝试使用逗号分隔的字符串作为存储过程中查询的一部分，但无法使其正常工作。我希望字符串是：

`'db1'`, `'db2'`,`'db3'`

这是该过程的一个示例（为了便于阅读，我省略了很多代码）：

```
CREATE PROCEDURE test(taskId int)
begin

declare done int default false;
declare ignore_db varchar(1024);

declare cur1 cursor for select schema_name from information_schema.schemata where schema_name not in (ignore_db);
declare continue handler for not found set done = true;

select value into ignore_db from dbw_parameters where upper(name)=upper('ignore db') and task_id = taskID;

select schema_name from information_schema.schemata where schema_name not in (ignore_db);
end; 
```

**我试过了：**

```
set ignore_db=concat('\'',replace(ignore_db,',','\',\''),'\''); 
```

但它只是将结果`('db1','db2','db3')`视为一个字符串。我需要它将字符串视为多个数据库。

**有任何想法吗？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T16:44:21.833

您无需在列表中添加引号。只需使用[**LOCATE**](http://dev.mysql.com/doc/refman/5.5/en/string-functions.html#function_locate)功能

```
CREATE PROCEDURE test(taskId int)
begin

declare done int default false;
declare ignore_db varchar(1024);

declare cur1 cursor for select schema_name from information_schema.schemata where schema_name not in (ignore_db);
declare continue handler for not found set done = true;

select value into ignore_db from dbw_parameters where upper(name)=upper('ignore db') and task_id = taskID;

select schema_name from information_schema.schemata
where LOCATE(CONCAT(',',schema_name,','),CONCAT(',',ignore_db,',')) > 0;

end; 
```

这是以这种方式使用 LOCATE 函数的原始示例：

```
mysql> select LOCATE(',db1,',',db1,db2,db3,');
+---------------------------------+
| LOCATE(',db1,',',db1,db2,db3,') |
+---------------------------------+
|                               1 |
+---------------------------------+
1 row in set (0.00 sec)

mysql> select LOCATE(',db2,',',db1,db2,db3,');
+---------------------------------+
| LOCATE(',db2,',',db1,db2,db3,') |
+---------------------------------+
|                               5 |
+---------------------------------+
1 row in set (0.00 sec)

mysql> select LOCATE(',db3,',',db1,db2,db3,');
+---------------------------------+
| LOCATE(',db3,',',db1,db2,db3,') |
+---------------------------------+
|                               9 |
+---------------------------------+
1 row in set (0.00 sec)

mysql> select LOCATE(',db4,',',db1,db2,db3,');
+---------------------------------+
| LOCATE(',db4,',',db1,db2,db3,') |
+---------------------------------+
|                               0 |
+---------------------------------+
1 row in set (0.00 sec)

mysql> 
```

顺便说一句，我用附加逗号包围 ignore_db 的原因与数据库名称本身有关

如果您有具有公共前缀的数据库，则可能会出现您不希望出现的重复数据库。例如，如果 ignore_db 是 db1,db2 而您有数据库 db1,db11,db2,db22,db111，那么所有 5 个数据库都会作为结果出现。因此，我在 WHERE 子句中为 ignore_db 和 schema_name 添加了额外的逗号

# django - 自定义插件中的 Django-cms PlaceholderField，用于占位符，不可前端编辑

> ID：11104716
> 
> 赞同：4
> 
> 时间：2012-06-19T15:51:32.020
> 
> 标签：django, django-templates, django-cms

我在 django 1.3 上使用 2.2 django-cms，在 django 1.4 上使用 2.3 django-cms git repo，我注意到如果我在我的模型中包含一个 PlaceholderField，例如：

```
##books/models.py
class Book(models.Model):
    ...
    description = cmsmodels.PlaceholderField('book_description', null=True, blank=True)

class BookCMSPluginModelItem(models.Model):
    t_book = models.ForeignKey(Book)
    ...

class BookCMSPluginModel(CMSPlugin):
    featured_books = models.ManyToManyField(BookCMSPluginModelItem)
    template = models.CharField(max_length=256, choices= settings.BOOKS_TEMPLATES, default=settings.BOOKS_TEMPLATES[0]); 
```

并使我的 CMS 插件像这样：

```
##books/cms_plugins.py
class BookCMSPlugin(CMSPluginBase):
    model = BookCMSPluginModel
    name = _("Books Plugin")

    def render(self, context, instance, placeholder):
        self.render_template = instance.template;
        context['instance'] = instance;
        return context 
```

然后在我的模板中，我发现我可以执行以下操作：

```
{% for mitem in instance.featured_books.all %}
    <!-- ...... -->
<div>{% render_placeholder mitem.t_book.description %}</div>
{% endfor %} 
```

但是，在前端编辑器中，我添加了我的新插件，并且描述字段确实显示为占位符，**但是当我将鼠标悬停在它上面时，我放置插件的外部占位符是活动的，我不能直接选择内部占位符**。它在管理站点中运行良好，因为我可以使用 SemanticEditor 以及我希望使用的任何其他内容添加内容。 **然而，在前端，javascript 存在一个令人沮丧的问题，它似乎阻止用户添加或编辑内部占位符。**

我应该注意到我在这里遵循了精彩的 django-cms 文档：http: [//docs.django-cms.org/en/latest/extending_cms/placeholders.html](http://docs.django-cms.org/en/latest/extending_cms/placeholders.html)，但该站点仅在显示模型的上下文中解决了该问题在专门设计的页面中，不幸的是没有使用自定义 django-cms 插件的模板。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-04-10T11:18:01.330

在[GitHub 上](https://github.com/divio/django-cms/issues/2244#issuecomment-39678256)的这个线程中，一位 django-cms 开发人员说 Django CMS 2.2 中没有插件式插件架构。

我已经使用最新的开发分支进行了尝试，它现在正在运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-06-01T15:18:10.027

同样的问题

```
Django==3.1.6
django-cms==3.8.0
python_version = 3.6.9 
```

一种不推荐的解决方法是在 1 处更改 cms 源代码

去`virtualenvs/your-project-vitualenv/lib/python3.6/site-packages/cms/models`

然后编辑文件`placeholdermodel`

到第 123 行`Placeholder.has_change_permission`并注释第一个 if-return。

=> 注释行 #132 `if not attached_models:` => 和行 #136`return user.is_superuser`

保存并重新启动服务器。

```
def has_change_permission(self, user):
    """
    Returns True if user has permission
    to change all models attached to this placeholder.
    """
    from cms.utils.permissions import get_model_permission_codename

    attached_models = self._get_attached_models()

    # Comment this part!
    # if not attached_models:
    #     # technically if placeholder is not attached to anything,
    #     # user should not be able to change it but if is superuser
    #     # then we "should" allow it.
    #     return user.is_superuser

    attached_objects = self._get_attached_objects()

    for obj in attached_objects:
        try:
            perm = obj.has_placeholder_change_permission(user)
        except AttributeError:
            model = type(obj)
            change_perm = get_model_permission_codename(model, 'change')
            perm = user.has_perm(change_perm)

        if not perm:
            return False
    return True 
```

# bash - bash：将子shell重定向到读取

> ID：11104717
> 
> 赞同：0
> 
> 时间：2012-06-19T15:51:31.890
> 
> 标签：bash, sh, nagios

这背后的一点历史 - 我正在尝试编写一个 nagios 插件来检测是否已卸载 nfs 挂载以及挂载是否过时，这就是我遇到问题的地方。

我想要实现的是检测安装是否过时。我要解决的问题是陈旧的 nfs 句柄会导致对该目录的任何操作在 3-4 分钟后挂起并超时。通过使用读取强制在 nfs 挂载目录中的 stat 命令超时，我应该能够解决该问题。

所以我在某个地方找到了这个片段，当从 nfs 客户端上的 cli 手动运行时，它可以完美运行（其中 /www/logs/foo 是一个陈旧的 nfs 挂载）

```
$ read -t 2 < <(stat -t /www/logs/foo/*); echo $?
1 
```

当我尝试将此代码段合并到这样的脚本中时，问题就来了（附加了代码段，最后附加了完整的脚本）：

```
list_of_mounts=$(grep nfs /etc/fstab | grep -v ^# | awk '{print $2'} | xargs)
exitstatus $LINENO

for X in $list_of_mounts; do
    AM_I_EXCLUDED=`echo " $* " | grep " $X " -q; echo $?`
    if [ "$AM_I_EXCLUDED" -eq "0" ]; then
    echo "" >> /dev/null
    #check to see if mount is mounted according to /proc/mounts
    elif [ ! `grep --quiet "$X " /proc/mounts; echo $?` -eq 0 ]; then
        #mount is not mounted at all, add to list to remount
        remount_list=`echo $remount_list $X`;
    #now make sure its not stale
    elif [ ! "`read -t 2  < <(stat -t $X/*) ; echo $?`" -eq "0" ]; then
        stalemount_list=`echo $stalemount_list $X`
    fi 
```

给我这个错误：

```
/usr/lib64/nagios/plugins/check_nfs_mounts.sh: command substitution: line 46: syntax error near unexpected token `<'
/usr/lib64/nagios/plugins/check_nfs_mounts.sh: command substitution: line 46: `read -t 2  < <( '
/usr/lib64/nagios/plugins/check_nfs_mounts.sh: command substitution: line 46: syntax error near unexpected token `)'
/usr/lib64/nagios/plugins/check_nfs_mounts.sh: command substitution: line 46: ` ) ; echo $?'
/usr/lib64/nagios/plugins/check_nfs_mounts.sh: line 46: [: stat -t /www/logs/foo/*: integer expression expected 
```

*我能够通过使用“read -t 2<<< $(stat -t $X/ )”而不是“read -t 2<<(stat -t $X* /)”来解决语法错误，但是 stat不再受益于读取​​超时，这让我回到了原来的问题。

虽然我对新的解决方案持开放态度，但我也很好奇什么行为可能导致这种 shell 与脚本的差异。

完整的 nagios 检查：

```
#!/bin/bash

usage() {
    echo "
    Usage:
    check_nfs_mounts.sh
    It just works.
    Optional: include an argument to exclude that mount point
"
}
ok() {
        echo "OK - $*"; exit 0
        exit
}
warning() {
        echo "WARNING - $*"; exit 1
        exit
}
critical() {
        echo "CRITICAL - $*"; exit 2
        exit
}
unknown() {
        echo "UNKNOWN - $*"; exit 3
        exit
}
exitstatus() {
        if [ ! "$?" -eq "0" ] ;
        then unknown "Plugin failure - exit code not OK - error line $*"
        fi
}
# Get Mounts
list_of_mounts=$(grep nfs /etc/fstab | grep -v ^# | awk '{print $2'} | xargs)
exitstatus $LINENO

for X in $list_of_mounts; do
    AM_I_EXCLUDED=`echo " $* " | grep " $X " -q; echo $?`
    if [ "$AM_I_EXCLUDED" -eq "0" ]; then
    echo "" >> /dev/null
    #check to see if mount is mounted according to /proc/mounts
    elif [ ! `grep --quiet "$X " /proc/mounts; echo $?` -eq 0 ]; then
        #mount is not mounted at all, add to list to remount
        remount_list=`echo $remount_list $X`;
    #now make sure its not stale
    elif [ ! "`read -t 2  <<< $(stat -t $X/*) ; echo $?`" -eq "0" ]; then
        stalemount_list=`echo $stalemount_list $X`
    fi
done
#Make sure result is a number
if [ -n "$remount_list" ] && [ -n "$stalemount_list" ];  then
    critical "Not mounted: $remount_list , Stale mounts: $stalemount_list"
elif [ -n "$remount_list" ] && [ -z "$stalemount_list"]; then
    critical "Not mounted: $remount_list"
elif [ -n "$stalemount_list" ] && [ -n "$remount_list" ]; then
    critical "Stale mount: $stalemount_list"
elif [ -z "$stalemount_list" ] && [ -z "$remount_list" ]; then
    ok "All mounts mounted"
fi 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T11:36:57.313

您需要确保您的 shebang 指定 Bash：

```
#!/bin/bash 
```

错误消息的原因是在您的系统上，`/bin/sh`当没有 shebang 或它是`#!/bin/sh`.

在这种情况下，Bash 就像您启动它一样运行，`bash --posix`它禁用*了一些*非 POSIX 功能，例如进程替换 ( `<()`)，但令人困惑的是，这里的字符串 ( `<<<`) 等其他功能却没有。

改变你的shebang，你应该没问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T17:17:05.840

您可以通过这种方式保存子外壳的输出：

```
$ read a < <(echo one)
$ echo $a
one 
```

或者以这种方式（如果您只想处理 $a 并忘记它：

```
$ ( echo one; echo two) | (read a; echo $a)
one 
```

第一个变体仅适用于`bash`. Bourne Shell ( `/bin/sh`) 不支持此语法。可能这就是您收到错误消息的原因。可能是你的脚本`/bin/sh`不是由`/bin/bash`

# git - 如何在 git reset --hard 之后避免“可以快速转发”消息 ?

> ID：11104722
> 
> 赞同：3
> 
> 时间：2012-06-19T15:52:02.223
> 
> 标签：git

我已经搜索了很多帖子，`git reset --hard <commit>`并将一个过早合并的分支重置为状态，并在历史记录中重新提交了一点。“master”的当前状态看起来不错，但`git status`表示我的本地分支落后于 origin/master 24 次提交，并且可以快进。如果不先再次合并原点/主控，我就无法推动。有没有办法跳过这些提交并说“我不想要它们”？

这是一个中央仓库设置，我的一位同事意外地将他长期运行的开发分支与 master 合并，无法弄清楚如何回溯，所以我试图为他做这件事。

重述命令（根据记忆，这是两天的磨难）

当我取来并检查主人时发现了错误，并通知了同事。他无法将其重置，所以...我做到了

```
git merge master origin/master
git reset --hard <commit_I_wanted>
git push # is rejected
git status # gives me the "behind by x commits, can be fast-forwarded" message 
```

谢谢，汉斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T15:57:20.820

如果您***确定***您的 git 历史记录是***正确的***版本并且您的同事没有进行任何更改，那么您可以使用以下命令：

```
git push --force 
```

将来，请使用`git revert`instead 进行新的提交，以撤消更改而不是重写历史记录。

同样， git push --force 将重写远程端的历史记录。你被警告了。

# android - 那么，为什么我的日志信息显示 Activity-Fragment 关系之间的行为完全错误？

> ID：11104727
> 
> 赞同：0
> 
> 时间：2012-06-19T15:52:14.260
> 
> 标签：android, android-fragments, android-activity, lifecycle

我只是将日志标签放在大多数活动和片段方法上，结果如下：

```
06-19 16:33:11.934: I/Fragment Activity:MainMenuPager(15820): onCreate - BEGIN
06-19 16:33:11.958: I/Fragment Activity:MainMenuPager(15820): onCreate - END
06-19 16:33:11.958: I/Fragment Activity:MainMenuPager(15820): onStart - BEGIN
06-19 16:33:11.958: I/Fragment Activity:MainMenuPager(15820): onStart - END
06-19 16:33:11.958: I/Fragment Activity:MainMenuPager(15820): onResume - BEGIN
06-19 16:33:11.958: I/Fragment Activity:MainMenuPager(15820): onResume - END
06-19 16:33:11.973: I/HomeFragment(15820): onAttach- BEGIN
06-19 16:33:11.973: I/HomeFragment(15820): onAttach- BEGIN
06-19 16:33:11.973: I/HomeFragment(15820): onCreate- BEGIN
06-19 16:33:11.973: I/HomeFragment(15820): onCreate- END
06-19 16:33:11.973: I/HomeFragment(15820): onCreateView- BEGIN
06-19 16:33:11.981: I/HomeFragment(15820): onCreateView- END
06-19 16:33:11.989: I/HomeFragment(15820): onActivityCreated- BEGIN
06-19 16:33:11.989: I/HomeFragment(15820): onActivityCreated- END
06-19 16:33:11.989: I/HomeFragment(15820): onStart- BEGIN
06-19 16:33:11.989: I/HomeFragment(15820): onStart- END
06-19 16:33:11.989: I/MyProcessListFragment(15820): onAttach- BEGIN
06-19 16:33:11.989: I/MyProcessListFragment(15820): onAttach- BEGIN
06-19 16:33:11.989: I/MyProcessListFragment(15820): onCreate- BEGIN
06-19 16:33:11.989: I/MyProcessListFragment(15820): onCreate- END
06-19 16:33:11.989: I/MyProcessListFragment(15820): onCreateView- BEGIN
06-19 16:33:12.012: I/MyProcessListFragment(15820): onCreateView- END
06-19 16:33:12.012: I/MyProcessListFragment(15820): onActivityCreated- BEGIN
06-19 16:33:12.012: I/MyProcessListFragment(15820): onActivityCreated- END
06-19 16:33:12.012: I/MyProcessListFragment(15820): onStart- BEGIN
06-19 16:33:12.012: I/MyProcessListFragment(15820): onStart- END 
```

那么为什么所有记录的活动方法都首先运行，然后是所有 Fragment 的？片段应该在各种活动状态之间运行吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T15:50:29.087

抱歉，我在这里没有看到问题。首先，你有一个寻呼机，我们不知道你设置了适配器。您是否将其设置在 onResume 中？B/c 我猜这将与您的输出相匹配。

`<fragment />`如果您在布局中嵌入 a，您会看到什么样的输出？`FragmentTransaction`如果您通过onClick 侦听器中的 with-in添加片段，您会看到什么样的输出？这些都会有不同的日志记录结果，所以这里的问题更像是“猜猜我是如何编写代码”的游戏。

# ms-access - 使用 QueryDefs 返回 Recordset 时出错

> ID：11104728
> 
> 赞同：4
> 
> 时间：2012-06-19T15:52:15.103
> 
> 标签：ms-access, ms-access-2007, vba

我正在尝试使用 VBA 代码访问查询。我想我已经这样做了 100 次了。我的代码（在命令按钮上）是这样开始的：

```
Dim rstDocCount As Recordset

Set rstDocCount = CurrentDb.QueryDefs("DocCount").OpenRecordset

rst.MoveFirst 
```

我收到此错误消息：

> 运行时错误“3061”：参数太少。预期 1。

该`Set rstDocCount`行以黄色突出显示。

我究竟做错了什么？唯一的参数应该是查询的名称，我清楚地知道了。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-19T17:25:58.693

你需要：

```
Dim rstDocCount As Recordset
Dim qdf As QueryDef

    Set qdf = CurrentDb.QueryDefs("DocCount")

    qdf.Parameters("Forms!Boxing!BoxID") = Forms!Boxing!BoxID 
    Set rstDocCount = qdf.OpenRecordset

    rstDocCount.MoveFirst 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T16:40:10.477

"*唯一的参数应该是查询的名称，我清楚地知道。* "

该`OpenRecordset`方法接受 3 个参数：`Type`; `Options`; 和`LockEdit`。但是，所有 3 个参数都是可选的，因此“*参数太少*”错误与`OpenRecordset`参数无关。

相反，正如 Remou 指出的那样，您`QueryDef`包含数据库引擎在查询的源表中找不到的内容（通常是字段表达式）。在这种情况下，它将丢失的*东西*视为参数，并需要该参数的值。

# php - 为什么在导入我的 CSV 文件时会添加额外的空行？

> ID：11104731
> 
> 赞同：1
> 
> 时间：2012-06-19T15:52:24.103
> 
> 标签：php, mysql, csv

我有一个脚本可以为我的网站下载和上传 csv 文件（用于库存）。当我手动下载文件并上传时，一切都很好。当脚本运行以下载和上传文件时，在 csv 文件中的每一行之后都会添加额外的空行。

我通过直接从原始源下载文件并将其与我的脚本上传的文件进行比较来发现这一点。

从那里，文件被导入到 mysql 数据库。

任何人都知道如何防止将这些空行添加到 csv 文件中？将行上传到我的数据库并且没有向我的表中添加任何新内容时，它会导致问题。

编辑：将 csv 信息发送到 mysql db 的代码：

```
$file = "./file.csv";

$handle = fopen($file, r);

$firstentry = 0;

while($csv = fgetcsv($handle))
{
if($firstentry == 0)
{
    $firstentry++;
}
else
{
    $csv[7] = strtotime($csv[7]);

    $csv[7] = date("Y-m-d H:i:s",$csv[7]);

    if($csv[18] == 217 || $csv[18] == 38)
    {
            if(!mysql_query("INSERT IGNORE INTO TABLE_NAME 
                (Col1, Col2, Col3, Col4, Col5,
                     Col6, Col7, Col8, Col9, Col10,                
                Col11, Col12, Col13, Col14, Col15,
                     Col16, Col17, Col18, Col19, Col20,
                Col21, Col22, Col23) VALUES
                ('".md5($csv[0].$csv[2])."','".addslashes($csv[0])."','".addslashes($csv[1])."','".addslashes($csv[2])."','".addslashes($csv[3])."','".addslashes($csv[4])."',
                    '".addslashes($csv[5])."','".addslashes($csv[6])."','".addslashes($csv[7])."','".addslashes($csv[8])."','".addslashes($csv[9])."',
                '".addslashes($csv[10])."','".addslashes($csv[11])."','".addslashes($csv[12])."','".addslashes($csv[13])."','".addslashes($csv[14])."',
                    '".addslashes($csv[15])."','".addslashes($csv[16])."','".addslashes($csv[17])."','".addslashes($csv[18])."','".addslashes($csv[19])."',
                '".addslashes($csv[20])."','".addslashes($csv[21])."')"))
            {                    
                exit("<br>" . mysql_error());
            }
            else
            {
                print_r($csv);
                echo " insert complete<br><br>";
            } 

    }        
}
} 
```

下载/上传 CSV 文件的代码：

```
<?php
set_time_limit(0);
ini_set('memory_limit','512M');
ini_set('upload_max_filesize', '64M');
include('Net/SFTP.php');

//Original Location (SFTP)
$sftp2 = new Net_SFTP('example.com');
if (!$sftp2->login('username', 'password')) {
exit('Login Failed');
}

//echo $sftp2->pwd() . "\r\n";
$sftp2->get('file.csv', 'file.csv');
//print_r($sftp2->nlist());

echo "Success!";
?> 
```

我为此使用 Source Forge ( [http://phpseclib.sourceforge.net/](http://phpseclib.sourceforge.net/) )。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T13:43:59.417

您可以在下载后对文件内容进行尝试：

```
$contents=preg_replace('/(\r\n|\r|\n)/s',"\n",$contents); 
```

# jquery - div浮动时jquery可排序给出问题

> ID：11104732
> 
> 赞同：0
> 
> 时间：2012-06-19T15:52:25.397
> 
> 标签：jquery, html, css-float, jquery-ui-sortable

我有以下标记，我试图在其上启用 jquery 可排序：

```
<div>
    <div id="sortable">
        <div style="height:200px;width:400px;border:1px solid black;float:left;">Item 1</div>
        <div style="height:200px;width:400px;border:1px solid black;float:right;">Item 2</div>
    </div>
</div> 
```

以下是我的javascript：

```
$(function () {
        $("#sortable").sortable({
            placeholder: "ui-state-highlight"
        });
        $("#sortable").disableSelection();
    }); 
```

如果我删除浮动并允许 div 堆叠，它工作正常。包括浮动和屏幕每一侧的 1 个 div，排序不起作用。事实上，在指定占位符样式后，占位符似乎跨越了 2 个 div 所在的“行”的整个长度。

任何帮助是极大的赞赏。

请参阅以下不工作的代表性示例：http: [//jsfiddle.net/5kx5C/2](http://jsfiddle.net/5kx5C/2)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T16:28:03.290

我认为您需要澄清 #sortable div 的 css（此示例假设您将 item 1 和 item 2 div 缩小到 300 px 宽度，您可能需要调整这些值以满足您的需要）

```
#sortable { width: 700px; height: 150px; padding: 0.5em; }

#item1 { width: 300px; height: 100px; border: 1px solid #444; }
#item2 { width: 300px; height: 100px; border: 1px solid #444; }

#sortable > div { float: left; } 
```

​</p>

这个例子似乎正在工作......

[http://jsfiddle.net/gefZm/5/](http://jsfiddle.net/gefZm/5/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-17T18:03:59.933

尝试放入`overflow:hidden;`你的 div

# svn - 有修复 RCS/CVS ,v 文件的工具吗？

> ID：11104733
> 
> 赞同：7
> 
> 时间：2012-06-19T15:52:26.483
> 
> 标签：svn, cvs, rcs

我正在将 CVS 和 RCS 存储库转换为 Subversion。我不时遇到损坏的 .v 文件。我已经想出了如何手动修复这些，但它变得乏味，而且我最新的项目有许多损坏的文件，比我更关心手动修复。

所以我想要一个工具来解析RCS文件并修复它们。这很可能意味着一些旧版本将不完整。例如，我已经看到缺少 1.1 版的情况，因此添加一个带有注释的空修订版，表明它已丢失就可以了。

我做了很多搜索试图找到这样的工具，但一无所获。我正要开始编写自己的工具，但我想我应该先在这里问问。

我知道我可以获取代码快照并导入它们，如果必须的话，我会求助于它（只是为了阻止这些建议:)

++谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T07:23:24.277

我个人不建议手动迁移，因为该过程非常耗时，并且无法在生成的 repo 中使用完整的数据/元数据集。

有一个用于将 CVS 迁移到 SVN 的工具，它被称为[cvs2svn](http://cvs2svn.tigris.org/)。它“是将 CVS 存储库迁移到 Subversion、git 或 Bazaar 的工具”。您可以参考[此操作指南以](http://sam.zoy.org/writings/programming/svn2cvs.html)获取快速入门建议。

看看[这个](https://stackoverflow.com/questions/2267966/recovering-files-from-archive-of-cvs-v-files)：

> CVS 只是 RCS 的前端，而 *.v 文件实际上是 RCS 文件。只需检查一下即可。例如，如果你有 foo,v 只需执行：
> 
> ```
> co foo 
> ```
> 
> 它将从 ,v 文件中检出 foo 。

还有一个[RCS 到 SVN 转换器](http://www.cri.ensmp.fr/%7Ecoelho/rcs2svn.html)，你也可以试试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-10-12T15:15:14.010

我编写了一个 Python 库[editrcs](https://github.com/ben-cohen/editrcs)，它将 RCS 文件解析为可以修改的树，然后作为新的 RCS 文件写出。它不是为处理无效的 RCS 文件而设计的，但如果损坏仅在数据部分中，或者您修改库以解决任何损坏的元数据，它可能是一个合理的起点。

也与您的特定问题相关：

1.  RCS 文件[存储](https://www.gnu.org/software/rcs/manual/html_node/comma_002dv-particulars.html)主干的最新版本，并在主干上向后追溯。因此，如果历史修订的差异是不可挽回的损坏，那么在它之前的任何东西都可能无法使用，或者至少是错误的，除非你能猜出更改是什么或者它不冲突。（分支存储为其分支点的*前向*差异，因此从损坏点开始的整个分支可能会出现问题。）

2.  如果已使用“rcs -o”从 RCS 文件中[删除](https://www.gnu.org/software/rcs/manual/html_node/rcs.html)了修订，则修订编号中的空白*可能是有效的。*一堆空值如果你有一堆空值应该在哪里进行修订，那么这是例如：

    ```
    # Setup
    echo 1 > test
    echo "initial commit" | ci -l test
    echo 2 >> test
    echo "2" | ci -l test
    echo 3 >> test
    echo "3" | ci -l test

    # RCS file contains revisions 1.1, 1.2, 1.3
    rlog test

    # Remove revision 1.2
    rcs -o1.2 test

    # RCS file now contains revisions 1.1, 1.3
    rlog test 
    ```

# android - 缓存 SharedPreferences 布尔值：性能是否可以证明增加的复杂性？

> ID：11104736
> 
> 赞同：3
> 
> 时间：2012-06-19T15:52:39.237
> 
> 标签：android, sharedpreferences, performance

在我的一个 onTouch() 侦听器中，我目前在决定如何处理触摸事件之前检查布尔用户设置：

```
boolean shouldCue = preferences.getBoolean(v.getContext().getString(R.string.should_cue), true); 
```

观察 LogCat 可以看到，当用户触摸屏幕时，这个语句被调用了无数次！

`shouldCue`因此，我正在考虑通过实现[onSharedPreferenceChanged()](https://stackoverflow.com/questions/9719541/preferenceactivity-using-onsharedpreferencechanged)侦听器来“缓存”该布尔值。

我当然可以继续实现这一点，然后……在我的超快 Android 设备上观察到*可以忽略不计的差异。*我不可能在“大多数安卓设备”上测试这个，因为有太多的变化。

所以我的问题是：

1.  即使未通过 UI 更改首选项，是否会调用onSharedPreferenceChanged [() ？](http://developer.android.com/reference/android/content/SharedPreferences.OnSharedPreferenceChangeListener.html)（即通过编程方式`editor.commit();`）
2.  如果 SharedPreferences boolean 可以从 UI 或以编程方式修改（但不能同时进行），缓存它会[强制 @Synchronized](http://projectlombok.org/features/Synchronized.html)处理吗？
3.  关于缓存与非缓存方法之间的性能差异的任何估计？（为了简化问题，假设我们指的是像 Droid 1 A855 这样的旧手机）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T16:45:16.573

在我看来，最好避免在 onTouch() 方法中读取首选项：它触发得非常快，从首选项中读取意味着解析 xml（这不完全是你应该每秒做这么多次的事情）。您可以在模拟器上尝试一下，看看它的反应是否足够快，但最好在其他地方阅读或找到另一种存储/获取此布尔值的方法。

**编辑：**关于问题：

1) 是的，即使偏好完全没有改变

2）是的，它可以以这种方式实现，但这可能会导致很多问题，特别是如果您打算重用视图

3) 由于许多因素（硬件、操作系统版本、启用 jit 等），我无法准确估计对其他设备的影响，但如果没有基准测试，缓存方法似乎是最有效的。

您真的必须在 onTouch() 方法中操作该布尔值吗？在这种情况下，为什么不定义 hooks 或 listeners 呢？

# ms-word - MSWord If 语句语法

> ID：11104737
> 
> 赞同：1
> 
> 时间：2012-06-19T15:52:40.030
> 
> 标签：ms-word

```
Column A = qty
Column F = Unit Price
Column G = Total Amount 
```

单元格 G7 包含 =A7*F7。这个公式很好用。但是，如果您将公式复制下来，那么您会在没有数据的行上获得 0.00 美元。我尝试输入 IF(A7>0,A7*F7)。即使单元格 A7 和单元格 F7 中有信息，它也不返回任何内容。有人可以帮助我使用正确的语法在需要时获取值并在没有项目时让单元格为空白吗？

# html - 添加了多个空白链接的 CSS

> ID：11104740
> 
> 赞同：0
> 
> 时间：2012-06-19T15:52:46.240
> 
> 标签：html, css

我是一个完整的 CSS 新手，并在 Youtube 上使用 HTML 和 CSS 浏览了一些示例。我的问题是出现多个空白链接。（这里有一个链接让你知道我的意思[。http://cly.site90.net/images/Error.png](http://cly.site90.net/images/Error.png)。）

HTML 很简单：

```
<body>
<div id="divWall">
 <div id="divLinks">
    <div id="divNav">
       <ul>
           <li><a href="Index.html">Main</li>
           <li><a href="About.html">About</li>
           <li><a href="Log-in.html">Log-in</li>
           <li><a href="Register.html">Register</li>
       </ul/
    </div>
 </div>
</div>
</body> 
```

这是CSS代码：

```
 body, h1, h2, h3, h4, h5, h6, p, div, ul, li {
 margin:0;
 padding:0;
 }
 body{
 font-family: Verdana, Geneva, asns-serif;
 background-color: #FFF;
 }
 #divWall {
 width:700px;
 margin:20px auto;
 }
 #divLinks {
   width:700px;
   background:#666;
 }
 #divNav {
  width:384px;
  background:#666;
  height:36px;
  margin:0 auto;
 }
 #divNav ul {
    list-style-type:none;
 }
 #divNav ul li {
   float:left;
 }
 #divNav ul li a {
   display:block;
   height:20px;
   background:#000;
   width:80px;
   font-size:0.8em;
   color:#FFF;
   text-align:center;
   text-decoration:none;
   margin:7px;
 } 
```

3个空白链接没有文字，将链接到Index、About & Log-in.html。当我取出`height:20px;`或`display:block;`取出时，`#divNav ul li a{}`它们会消失[http://cly.site90.net/images/Error1.png](http://cly.site90.net/images/Error1.png)。但我根本无法重新调整链接的大小（我真的很想这样做）。

我想知道这些额外的链接来自哪里，并希望有一个解决方案？请记住，我是 CSS 新手，任何帮助将不胜感激。
谢谢你的时间。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T15:56:33.463

您需要关闭`<a>`标签：

改变：

```
<li><a href="Index.html">Main</li> 
```

至：

```
<li><a href="Index.html">Main</a></li> 
```

* * *

您还需要修正一个错字：

改变：

```
</ul/ 
```

至：

```
</ul> 
```

* * *

[**查看示例**](http://jsfiddle.net/Curt/EgR3U/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T16:00:27.203

您的标签没有关闭，您需要`</a>`在文本之后，

例如...

```
<li><a href="Index.html">Main</a></li> 
```

您的最终 UL 标记也有一个错字，您已经写`</ul/`了应该是`</ul>`.

我不确定这些是否能解决您的问题，但 html 和 css 可能会很奇怪！:)

# wpf - 价值强制的原因

> ID：11104741
> 
> 赞同：1
> 
> 时间：2012-06-19T15:52:47.437
> 
> 标签：wpf, bind

值强制的原因是通过导致相关值更新而不触发它们的绑定或 OnUpdate 方法来避免无限递归吗？

没有什么能真正解释这一点，因为我正在处理的有大量标志可以跳过回调更新，所以我打破了这样的递归。

# algorithm - 2个节点之间的简单路径

> ID：11104744
> 
> 赞同：1
> 
> 时间：2012-06-19T15:52:55.067
> 
> 标签：algorithm, graph

我知道我自己和许多其他人可能都在这里，

好吧，根据**CLRS(3 edition,22.4.2)**，有一个 O(n) 算法可以在有向无环图中找到 2 个节点之间的所有简单路径。我经历了类似的问题，[DAG 中两个节点之间的路径数](https://stackoverflow.com/questions/5164719/number-of-paths-between-two-nodes-in-a-dag?lq=1)和[图中 2 个节点之间的所有路径](https://stackoverflow.com/questions/9802755/all-the-paths-between-2-nodes-in-graph)，但是在这两种情况下，都没有提到正确的解释或伪代码，或者如果是，我怀疑这是最有效的（`O(n)`）。

如果有人真的可以发布一个确切的代码或伪代码来解决交易，因为当我浏览所有上述链接时，我并没有真正找到一个高大上的单一答案。

如果代码也处理**循环**图会更好，即**如果图中存在循环**，但**如果**两个节点之间的路径不包含**循环**，则路径的数量应该是**有限的，否则是无限的。**

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-19T17:08:59.967

[Jeremiah Willcock](https://stackoverflow.com/users/319906/jeremiah-willcock)的[回答](https://stackoverflow.com/a/5164820/1465287)是正确的，但细节不多。这是 DAG 的线性时间算法。

```
for each node v, initialize num_paths[v] = 0
let t be the destination and set num_paths[t] = 1
for each node v in reverse topological order (sinks before sources):
    for each successor w of v:
        set num_paths[v] = num_paths[v] + num_paths[w]
let s be the origin and return num_paths[s] 
```

~~我很确定一般有向图的问题是[#P-complete](http://en.wikipedia.org/wiki/Sharp-P-complete)，但我在几分钟的搜索中找不到任何东西，除了一个关于 cstheory 的[无源问题](https://cstheory.stackexchange.com/questions/6400/approximation-for-counting-the-number-of-simple-s-t-paths-in-a-general-graph)。~~

好的，这是一些伪代码。我已经将之前算法的内容与拓扑排序进行了整合，并添加了一些循环检测逻辑。在`s`和之间的循环的情况下`t`， 的值`num_paths`可能不准确，但将是零非零，具体取决于是否`t`可达。不是循环中的每个节点都`in_cycle`设置为真，但每个 SCC 根（在 Tarjan 的 SCC 算法的意义上）都会设置为真，当且仅当 s 和 t 之间存在循环时，这足以触发提前退出。

```
REVISED ALGORITHM

let the origin be s
let the destination be t
for each node v, initialize
    color[v] = WHITE
    num_paths[v] = 0
    in_cycle[v] = FALSE
num_paths[t] = 1
let P be an empty stack
push (ENTER, s) onto P
while P is not empty:
    pop (op, v) from P
    if op == ENTER:
        if color[v] == WHITE:
            color[v] = GRAY
            push (LEAVE, v) onto P
            for each successor w of v:
                push (ENTER, w) onto P
        else if color[v] == GRAY:
            in_cycle[v] = TRUE
    else:  # op == LEAVE
        color[v] = BLACK
        for each successor w of v:
            set num_paths[v] = num_paths[v] + num_paths[w]
        if num_paths[v] > 0 and in_cycle[v]:
            return infinity
return num_paths[s] 
```

# iphone - 从另一个 NSArray 中的值过滤 NSDictionaries 的 NSArray，同时保留顺序

> ID：11104745
> 
> 赞同：1
> 
> 时间：2012-06-19T15:52:58.963
> 
> 标签：iphone, objective-c, ios, nsarray

我有两个数组。

第一个数组只是一个国家名称列表，按非常特定的顺序排列。

```
countryNames = ["Canada", "USA", "Mexico"]; 
```

第二个数组是国家对象的集合。

```
countries = [ {name: "USA", foo: "bar"}, {name: "Italy", foo: "bar"}, {name: "Canada", foo: "bar"}, {name: "Mexico", foo: "bar"} ] 
```

我需要`countries`使用`countryNames`数组进行过滤，同时保留`countryNames`.

我的第一次尝试正确过滤，但不保留顺序：

```
NSPredicate *predicate = [NSPredicate predicateWithFormat:@"name in %@", countryNames];
NSArray *filteredCountries = [countries filteredArrayUsingPredicate:predicate]; 
```

我认为正在发生的事情是保留了国家/地区的顺序，减去未在`countryNames`.

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T16:08:54.767

字典是无序的集合。里面没有顺序。您应该维护一个数组中的键，该数组将保持顺序，然后使用数组对象进行排序。请查看[此链接](http://www.iphonedevsdk.com/forum/iphone-sdk-development/103122-prevent-nsmutabledictionary-being-sorted.html)以供参考。

谢谢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T15:59:08.213

国家应该保持项目被发现的顺序。最简单的做法是将国家重新排序为正确的顺序，然后过滤它们，或者在谓词过滤它们之后简单地对它们进行排序。您还可以向国家/地区添加订单字段，然后使用 sortedArrayUsingSelector：

请参阅此处的文档：http: [//developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Collections/Articles/Arrays.html#//apple_ref/doc/uid/20000132-SW5](http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Collections/Articles/Arrays.html#//apple_ref/doc/uid/20000132-SW5)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T16:56:53.637

我试图避免这种情况，但到目前为止，这是我知道的唯一方法：

```
NSMutableArray *filteredCountries = [[[NSMutableArray alloc] init] autorelease];
NSArray *countryNames = ... // list of country names. this order matters
NSArray *countries = ...    // array of country objects
for (NSString *name in countryNames) {
    for (NSDictionary *dict in countries) {
        if ([[dict objectForKey:@"name"] isEqualToString:name]) {
            [filteredCountries addObject:dict];
        }
    }
} 
```

它很糟糕，但它会发货。仍然欢迎更好、更优雅的解决方案。

# jsf-2 - 使用 jsf 替代 web 中的树？

> ID：11104747
> 
> 赞同：0
> 
> 时间：2012-06-19T15:53:02.653
> 
> 标签：jsf-2, richfaces

我有一个包含“Test”类对象的列表；

```
List<Test> testList; 
```

Test 类本身也包含一个列表：

```
public class Test {
   private List<Test> children;
   ...
} 
```

现在我想显示 testList 并能够选择对象。当我单击（选择）一个对象时，它的子对象也应该显示出来。

到目前为止，我正在处理一棵树。但我想使用另一种选择。有没有更适合和更好看的网络？

# c# - 在 C# 中保持大小写不变的同时替换文本

> ID：11104750
> 
> 赞同：9
> 
> 时间：2012-06-19T15:53:18.670
> 
> 标签：c#, string, replace, case

我有一组句子需要用来进行替换，例如：

```
abc => cde
ab df => de
... 
```

我有一个文本可以在哪里进行更改。但是我无法事先知道所述文本的情况。因此，例如，如果我有：

```
A bgt abc hyi. Abc Ab df h 
```

我必须更换并获得：

```
A bgt cde nyi. Cde De h 
```

或尽可能接近，即保持大小写

**编辑：**当我看到对此有很多困惑时，我将尝试澄清一下：

我正在询问一种在更换后保持大写字母的方法，我认为这并没有很好地通过（没有很好地解释 thaat 的含义）所以我将使用真实的单词给出一个更现实的例子。

把它想象成一个八卦，可以说用他们的中义词代替表达，所以如果我映射：

```
didn't achieve success => failled miserably 
```

然后我得到作为输入的setence：

```
As he didn't achieve success, he was fired 
```

我会得到

```
As he failled miserably, he was fired 
```

但是如果没有大写，那么会失败，如果成就或成功被大写，那么悲惨地也会如此

我的主要可能性是（我真正想考虑的可能性）

*   只有第一个单词的第一个字母大写
*   只有每个单词的首字母大写
*   所有字母大写

如果我可以处理这三个我想已经可以接受的问题 - 这是更容易的 - 当然，如果可用，更深入的解决方案会更好

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T16:18:54.123

不确定这将如何运作，但这是我想出的：

```
 string input = "A bgt abc hyi. Abc Ab df h";
        Dictionary<string, string> map = new Dictionary<string, string>();
        map.Add("abc", "cde");
        map.Add("ab df", "de");

        string temp = input;
        foreach (var entry in map)
        {
            string key = entry.Key;
            string value = entry.Value;
            temp = Regex.Replace(temp, key, match =>
            {
                bool isUpper = char.IsUpper(match.Value[0]);

                char[] result = value.ToCharArray();
                result[0] = isUpper
                    ? char.ToUpper(result[0])
                    : char.ToLower(result[0]);
                return new string(result);
            }, RegexOptions.IgnoreCase);
        }
        label1.Text = temp; // output is A bgt cde hyi. Cde De h 
```

**编辑** 阅读修改后的问题后，这是我修改后的代码（结果与@Sephallia 的代码类似的步骤......以及类似的变量名 lol ）

现在的代码有点复杂..但我认为没关系

```
 string input = 
        @"As he didn't achieve success, he was fired.
        As he DIDN'T ACHIEVE SUCCESS, he was fired.
        As he Didn't Achieve Success, he was fired.
        As he Didn't achieve success, he was fired.";
        Dictionary<string, string> map = new Dictionary<string, string>();
        map.Add("didn't achieve success", "failed miserably");

        string temp = input;
        foreach (var entry in map)
        {
            string key = entry.Key;
            string value = entry.Value;
            temp = Regex.Replace(temp, key, match =>
            {
                bool isFirstUpper, isEachUpper, isAllUpper;

                string sentence = match.Value;
                char[] sentenceArray = sentence.ToCharArray();

                string[] words = sentence.Split(' ');

                isFirstUpper = char.IsUpper(sentenceArray[0]);

                isEachUpper = words.All(w => char.IsUpper(w[0]) || !char.IsLetter(w[0]));

                isAllUpper = sentenceArray.All(c => char.IsUpper(c) || !char.IsLetter(c));

                if (isAllUpper)
                    return value.ToUpper();

                if (isEachUpper)
                {
                    // capitalize first of each word... use regex again :P
                    string capitalized = Regex.Replace(value, @"\b\w", charMatch => charMatch.Value.ToUpper());
                    return capitalized;
                }

                char[] result = value.ToCharArray();
                result[0] = isFirstUpper
                    ? char.ToUpper(result[0])
                    : char.ToLower(result[0]);
                return new string(result);
            }, RegexOptions.IgnoreCase);
        }
        textBox1.Text = temp; 
        /* output is :
        As he failed miserably, he was fired.
        As he FAILED MISERABLY, he was fired.
        As he Failed Miserably, he was fired.
        As he Failed miserably, he was fired.
        */ 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-19T15:57:02.150

您可以使用[String.IndexOf](http://msdn.microsoft.com/en-us/library/ms224424) with `StringComparison.CurrentCultureIgnoreCase`specified 来查找匹配项。那时，一个字符一个字符的替换就可以进行交换了。可以通过检查[`Char.IsUpper`](http://msdn.microsoft.com/en-us/library/system.char.isupper.aspx)源字符来处理大写，然后根据需要在目标上使用[Char.ToUpper](http://msdn.microsoft.com/en-us/library/system.char.toupper)或[Char.ToLower](http://msdn.microsoft.com/en-us/library/system.char.tolower)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-19T16:07:42.980

您可以将字符串作为字符数组循环并使用[Char.IsUpper(char 参数)](http://msdn.microsoft.com/en-us/library/system.char.isupper%28v=vs.71%29.aspx)

1.  实例化一个空字符串
2.  设置一个循环来循环遍历字符
3.  检查是否需要将角色更改为其他角色
    1.  是：检查字符是大写还是小写，根据结果，在新字符串中放入适当的字母。
    2.  否：只需将该字符放入新字符串中
4.  将原始字符串设置为新字符串。

可能不是最有效或最壮观的做事方式，但它很简单，而且很有效。

附带说明：我不确定你是如何转换字符的，但是如果你说，将字符向下移动（当你确实想要转换它们时）一个恒定的量，假设你移动了 3 . 所以 a -> d 和 E -> G 或类似的东西，然后你可以从字符中获取 ASCII 值，添加 3（如果你想转换它），然后从 ASCII 值中获取字符。[如此处](http://forums.devx.com/showpost.php?s=57bc9183228905df688a7b4a8037589c&p=64365&postcount=4)所述。不过，您必须进行检查以确保从字母表的末尾循环回来。（或开始，如果你向左移动）。

编辑＃1：（将上述内容保留在那里）

真正的大代码块......对不起！这是我能看到的最好的方式来做你所要求的。希望有人可能想出一个更优雅的方式。如果您需要澄清，请发表评论或任何事情！

```
 // (to be clear) This is Elias' (original) code modified.
    static void Main(string[] args)
    {
        string input = "As he DIDN'T ACHIEVE Success, he was fired";
        Dictionary<string, string> map = new Dictionary<string, string>();
        map.Add("didn't achieve success", "failed miserably");

        string temp = input;
        foreach (var entry in map)
        {
            string key = entry.Key;
            string value = entry.Value;
            temp = Regex.Replace(temp, key, match =>
            {
                string[] matchSplit = match.Value.Split(' ');
                string[] valueSplit = value.Split(' ');

                // Set the number of words to the lower one.
                // If they're the same, it doesn't matter.
                int numWords = (matchSplit.Length <= valueSplit.Length) 
                    ? matchSplit.Length
                    : valueSplit.Length;

                // only first letter of first word capitalized
                // only first letter of every word capitalized
                // all letters capitalized
                char[] result = value.ToCharArray(); ;
                for (int i = 0; i < numWords; i++)
                {
                    if (char.IsUpper(matchSplit[i][0]))
                    {
                        bool allIsUpper = true;
                        int c = 1;
                        while (allIsUpper && c < matchSplit[i].Length)
                        {
                            if (!char.IsUpper(matchSplit[i][c]) && char.IsLetter(matchSplit[i][c]))
                            {
                                allIsUpper = false;
                            }
                            c++;
                        }
                        // if all the letters of the current word are true, allIsUpper will be true.
                        int arrayPosition = ArrayPosition(i, valueSplit);
                        Console.WriteLine(arrayPosition);
                        if (allIsUpper)
                        {
                            for (int j = 0; j < valueSplit[i].Length; j++)
                            {
                                result[j + arrayPosition] = char.ToUpper(result[j + arrayPosition]);
                            }
                        }
                        else
                        {
                            // The first letter.
                            result[arrayPosition] = char.ToUpper(result[arrayPosition]);
                        }
                    }
                }

                return new string(result);
            }, RegexOptions.IgnoreCase);
        }
        Console.WriteLine(temp); 
    }

    public static int ArrayPosition(int i, string[] valueSplit)
    {
        if (i > 0)
        {
            return valueSplit[i-1].Length + 1 + ArrayPosition(i - 1, valueSplit);
        }
        else
        {
            return 0;
        }

        return 0;
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-19T16:04:12.507

一次替换一个字符并使用

```
if(currentChar.ToString() == currentChar.ToUpper(currentChar).ToString())
{
   //replace with upper case variant 
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-19T16:23:37.443

这几乎就是里德所说的。唯一的技巧是我不确定当`Find`和`Replace`字符串的长度不同时应该做什么。所以我选择最小长度并使用它......

```
static string ReplaceCaseInsensitive(string Text, string Find, string Replace)
{
    char[] NewText = Text.ToCharArray();
    int ReplaceLength = Math.Min(Find.Length, Replace.Length);

    int LastIndex = -1;
    while (true)
    {
        LastIndex = Text.IndexOf(Find, LastIndex + 1, StringComparison.CurrentCultureIgnoreCase);

        if (LastIndex == -1)
        {
            break;
        }
        else
        {
            for (int i = 0; i < ReplaceLength; i++)
            {
                if (char.IsUpper(Text[i + LastIndex])) 
                    NewText[i + LastIndex] = char.ToUpper(Replace[i]);
                else
                    NewText[i + LastIndex] = char.ToLower(Replace[i]);
            }
        }
    }

    return new string(NewText);
} 
```

# ruby-on-rails - 正则表达式忽略以单词开头的路径或以下划线开头的文件

> ID：11104751
> 
> 赞同：2
> 
> 时间：2012-06-19T15:53:27.427
> 
> 标签：ruby-on-rails, ruby, regex, rails-admin

我一直在研究一个 Ruby on Rails 项目，该项目具有贪婪的资产预编译正则表达式（在我的情况下这是可取的，因为我不包括）：

```
# in config/application.rb
# this excludes all files which start with an '_' character (sass)
config.assets.precompile << /(?<!rails_admin)(^[^_\/]|\/[^_])([^\/])*.s?css$/ 
```

在同一个项目中，我使用的是[rails_admin](https://github.com/sferik/rails_admin)插件。我需要我贪婪的正则表达式来忽略`rails_admin`资产。我开始[在 Rubular 上使用一些正则表达式，](http://rubular.com/r/4oStq1phP6)但无法丢弃最后三个示例（以 开头的*任何内容***`rails_admin`**）。

如何使用忽略**所有**rails_admin 资产和文件名以 开头`_`但仍获取其他所有内容的正则表达式？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T15:57:41.880

```
%r{               # Use %r{} instead of /…/ so we don't have to escape slashes
  \A              # Make sure we start at the front of the string
  (?!rails_admin) # NOW ensure we can't see rails_admin from here 
  ([^_/]|/[^_])   # (I have no idea what your logic is here)
  ([^/]*)         # the file name
  \.s?css         # the extension
  \z              # Finish with the very end of the string
}x                # Extended mode allows us to put spaces and comments in here 
```

请注意，在 Ruby 正则表达式中`^`并`$`匹配行的开始/结束*，*而不是字符串，因此通常最好使用`\A`and`\z`来代替。

* * *

**编辑**：这是一个允许任何路径的修改版本：

```
%r{               # Use %r{} instead of /…/ so we don't have to escape slashes
  \A              # Make sure we start at the front of the string
  (?!rails_admin) # NOW ensure we can't see rails_admin from here 
  (.+/)?          # Anything up to and including a slash, optionally
  ([^/]*)         # the file name
  \.s?css         # the extension
  \z              # Finish with the very end of the string
}x                # Extended mode allows us to put spaces and comments in here 
```

* * *

根据您的编辑和评论，这是一个匹配的正则表达式：

*   任何以 .css 或 .scss 结尾的文件
*   但如果路径以`rails_admin`
*   而不是如果文件名以下划线开头

## 演示：[http ://rubular.com/r/Y3Mn3c9Ioc](http://rubular.com/r/Y3Mn3c9Ioc)

```
%r{               # Use %r{} instead of /…/ so we don't have to escape slashes
  \A              # Make sure we start at the front of the string
  (?!rails_admin) # NOW ensure we can't see rails_admin from here 
  (?:.+/)?        # Anything up to and including a slash, optionally (not saved)
  (?!_)           # Make sure that we can't see an underscore immediately ahead
  ([^/]*)         # the file name, captured
  \.s?css         # the extension
  \z              # Finish with the very end of the string
}x                # Extended mode allows us to put spaces and comments in here 
```

# android - playn android 问题 - Netbeans 找不到设备

> ID：11104752
> 
> 赞同：1
> 
> 时间：2012-06-19T15:53:29.780
> 
> 标签：android, netbeans, playn

正如标题所述，我在运行我的 playn 项目的 android 版本时遇到了麻烦。我发现设置非常困难，但现在正在运行 html 和 java 版本。

我现在有 eclipse 工作，但更喜欢 netbeans。请注意，我能够使用 netbeans 成功部署*常规*android 项目。

我对 maven 没有任何经验，所以我试图避免使用命令行。

* * *

**网豆**

我遵循了本教程： [http ://www.gamefromscratch.com/post/2012/05/24/Using-Netbeans-712-with-PlayN-13.aspx](http://www.gamefromscratch.com/post/2012/05/24/Using-Netbeans-712-with-PlayN-13.aspx)

此时有一些问题：

> 在操作列表中，选择运行项目。在执行目标下：输入 android:deploy android:run，在设置属性下：输入 skipTests=True 和 android.device=usb。最后点击确定。

当我输入所有信息时，“运行”在 android 项目上仍然是灰色的。当我回到操作列表时，一切又是空白。好像设置没有保存。但是，我可以通过右键选择项目 -> 自定义来运行项目，然后在此处输入详细信息。每次我想运行项目时都填写所有内容非常烦人，但我想这是以后要担心的问题。

运行项目时，它总是抛出以下错误之一：

```
Device not found
Device is offline
ADB not connected 
```

当我使用 adb devices 时，它会很好地列出我的设备。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T15:54:15.180

这似乎是您的 Maven 设置中的问题（在此问题中添加标签）。尝试从命令行运行提到的目标，看看 NetBeans IDE 是否有任何特定的操作。

# asp.net - 如何使用 App_Code 文件夹禁用 Asp.Net bahavior？

> ID：11104761
> 
> 赞同：1
> 
> 时间：2012-06-19T15:53:54.930
> 
> 标签：asp.net, visual-studio-2010

我将一个网站转换为一个网络应用程序，我遇到了 app_code 文件夹问题：

*   在我的开发环境中，生成了 App_Code.dll 程序集，因为 App_Code 文件夹中有代码文件。
*   在我的生产环境中，我的一些类没有包含在程序集中，因为在 .csproj 中它们被标记为“内容”而不是“编译”。

所以我的猜测是，对于 Visual Studio / .net，如果 App_Code 文件夹中有代码文件，它们总是会创建 n 个程序集，并且当您在此文件夹中创建类文件时，Visual Studio 将类的文件设置为“内容”。

我知道，我可以重命名这个文件夹，但这将是一个带有我们的源代码控制的 PITA。另一种解决方案是在我们创建文件时更改文件的属性，但仍然是 PITA。

我以为添加

```
<Compile Include="App_Code\**\*.cs"/> 
```

在应用程序中 .csproj 会帮助我，但它不会，当我使用 App_Code 中的每个文件加载解决方案时，Visual Studio 会覆盖它（因此不会编译新文件）。我真的很想知道是否有任何方法可以摆脱这个，这不能硬编码！

# .net - .net 和 matlab 集成

> ID：11104763
> 
> 赞同：3
> 
> 时间：2012-06-19T15:54:07.093
> 
> 标签：.net, matlab, matlab-deployment, matlab-compiler

我只是好奇。集成 matlab 和 .net 的最便宜和最现代的选择是什么。我相信除此之外还有其他选择：

[matlab网络构建器](http://www.mathworks.co.uk/products/netbuilder/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-19T16:31:01.473

如果您从 MATLAB 调用 .NET，则可以使用命令将 .NET 程序集直接导入 MATLAB（在命令行或程序中）`NET.addAssembly`。有关详细信息，请参阅[文档](http://www.mathworks.com/help/techdoc/matlab_external/brpb5k6.html)。

如果您想从 .NET 调用实时安装的 MATLAB 副本，您可以通过其 COM 接口实例化 MATLAB 并执行代码。有关详细信息，请参阅[文档](http://www.mathworks.com/help/techdoc/matlab_external/brd0v3w.html)。

如果您想将 MATLAB 代码编译为可以从 .NET 调用的独立 .NET 程序集，而不需要实时安装的 MATLAB 副本，则需要[MATLAB Builder for .NET](http://www.mathworks.com/products/netbuilder/)。

# c# - C# 使用 Shutdown.exe 只是 Shutdown

> ID：11104765
> 
> 赞同：1
> 
> 时间：2012-06-19T15:54:12.130
> 
> 标签：c#, shutdown

我在我的应用程序中使用 Shutdown.exe，因为它提供了一些不错的功能，例如它可以延迟关机并添加注释为什么需要关机。

应用程序规范可以关闭、重新启动、注销、休眠、混合关闭内容、添加评论、延迟关闭以及中止预定的关闭。

该应用程序很好而且很漂亮，我已经制作了一个安装文件。我现在尝试在本地安装并使用它。但是当我尝试点击休眠时，它只是关闭了......我点击了重新启动，它关闭了，和其他人一样。

我很确定我使用了正确的参数组合

这是我使用的参数

```
void PowerButtonsClick(object sender, RoutedEventArgs e)
{
    string p = string.Empty;

    if (sender == btnShutdown)
    {
        p += "-s";
    }
    else if (sender == btnRestart)
    {
        p += "-r";
    }
    else if (sender == btnSignoff)
    {
        p += "-l";
    }
    else if (sender == btnHibernate)
    {
        p += "-h";
    }
    else if (sender == btnHybridShutdown)
    {
        p += "-hybrid -s";
    }
    else if (sender == btnAbortShutdown)
    {
        p += "-a";
    }

    if (sender != btnAbortShutdown)
    {
        if (sender != btnSignoff || sender != btnHibernate)
        {
            if (isForced) { p += " -f"; }

            double seconds = TimeSpan.FromTicks(timePicker.Value.Value.Subtract(DateTime.Now).Ticks).TotalSeconds;

            p += " -t " + Convert.ToInt32(seconds);

            if (hasComment)
            {
                p += string.Format(" -c \"{0}\"", borderComment_txComment.Text);
            }
        }
    }

    System.Diagnostics.Debug.WriteLine("param: " + p);

    System.Diagnostics.Process.Start(new System.Diagnostics.ProcessStartInfo()
    {
        Arguments = p,
        FileName = "shutdown.exe"
    });
} 
```

这是我 3 天前创建的应用程序。[它适用于 Windows 8，现在，由于http://wall.jaysonragasa.net/wall/post/2012/06/17/Windows-8-System-Power-Shortcuts](http://wall.jaysonragasa.net/wall/post/2012/06/17/Windows-8-System-Power-Shortcuts.aspx)的问题，我关闭了下载链接 。 [aspx](http://wall.jaysonragasa.net/wall/post/2012/06/17/Windows-8-System-Power-Shortcuts.aspx)

老实说，从 IDE 运行时一切正常。但是安装时 .. 我遇到了问题。我什至尝试使用 ILSpy 反汇编已部署的应用程序，它看起来不错，没有任何问题..

-- 更新 -- 只是为了更新我的代码

```
if (sender != btnSignoff || sender != btnHibernate) { ~~ } 
```

一定是

```
if (sender != btnSignoff && sender != btnHibernate) { ~~ } 
```

您要求的日志结果

```
param: -s -f -t 0
param: -l
param: -r -f -t 0
param: -h
param: -a
param: -hybrid -s -f -t 0
param: -s -f -t 0 -c "my comment"
param: -s -f -t 5 -c "my comment"
param: -s -f -t 12118 -c "my comment"
param: -s -t 12110 -c "my comment" 
```

- 更新 -

我决定使用 API 调用，但我失去了非常重要的 Abort 功能。如果您可以分享如何中止计划关闭，即使使用 WMI 或 API，请分享。

问候所有人

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T16:17:53.177

我以前用过这个，它可能对你有用：

```
 private void ShutdownComputer(bool restart)
    {
        ManagementBaseObject mboShutdown = null;
        ManagementClass mcWin32 = new ManagementClass("Win32_OperatingSystem");
        mcWin32.Get();        // You can't shutdown without security privileges
        mcWin32.Scope.Options.EnablePrivileges = true;
        ManagementBaseObject mboShutdownParams = mcWin32.GetMethodParameters("Win32Shutdown");

        // Flag 1 means we want to shut down the system. Use "2" to reboot.
        mboShutdownParams["Flags"] = restart ? "2" : "1";
        mboShutdownParams["Reserved"] = "0";
        foreach (ManagementObject manObj in mcWin32.GetInstances())
        {
            mboShutdown = manObj.InvokeMethod("Win32Shutdown", mboShutdownParams, null);
        }
    } 
```

# android - 制作个性化 Android UI 的教程

> ID：11104768
> 
> 赞同：0
> 
> 时间：2012-06-19T15:54:22.410
> 
> 标签：android

我对 Android 比较陌生。并有意制作精美的应用程序

所有这些应用程序，如 IMDB、News-Applications，甚至 google-play 的应用程序都拥有出色而轻巧的 UI。

我想知道像我这样的新手可以从哪里学习构建这种 UI。我用谷歌搜索，但主要是找到基本布局的教程。

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-19T16:43:26.590

您需要考虑的几件事

1.  正如 tyczj 所提到的，您需要完整地阅读 android 文档以获取 UI，至少一次。
2.  这些应用程序的设计不仅仅是为了好看，而是从可用性的角度设计的。看看这个链接：[40个漂亮的android应用程序](http://android.appstorm.net/roundups/40-beautiful-android-application-interfaces-and-icons/) 你会看到从应用程序业务的角度来看一个UI看起来是多么的贴切。这一般称为 UX - 用户体验。试着围绕这些思路思考。

为了让你开始，让我们说你想在食谱上构建一个简单的应用程序，你需要做的第一件事是想你想展示什么，让我们说一个动画启动屏幕（就像一盘面条碰到屏幕和屏幕上的面条由于重力而向下滑动，然后您的应用程序徽标/名称进入），启动应用程序，然后您移动到实际屏幕。一旦你在脑海中想出这样的画面，就会有很多帮助。只需谷歌启动画面，然后是动画启动画面，编写您自己的自定义动画等。

“需要是一切美好事物的上帝之母”！！所以开始破解，获得一个想法，谷歌如何实现它！

资源

*   UI 工具包——http: [//speckyboy.com/2010/05/10/android-app-developers-gui-kits-icons-fonts-and-tools/ ?mobify=0](http://speckyboy.com/2010/05/10/android-app-developers-gui-kits-icons-fonts-and-tools/?mobify=0)

*   请参阅上述链接中的 Droid Draw

*   查看适用于 Android 的链接应用程序以获得非常酷的灵感。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T15:57:46.673

[在这里](http://developer.android.com/design/index.html)给出了制作应用程序的 android UI 指南

# javascript - 在javascript中的单个数字日期之前添加零

> ID：11104770
> 
> 赞同：2
> 
> 时间：2012-06-19T15:54:27.130
> 
> 标签：javascript, jquery

我正在使用 javascript 验证日期字段，我需要验证 DD/MM/YY

如果用户输入日期为 10/06/2012，它将有效

如果用户输入日期为 3/06/2012 意味着我们需要在日期之前添加一个零作为 03/06/2012。

我的 JavaScript 代码是

```
$('#date').blur(function () {
            var collector = $('#date').val();
            collector = collector.split("/");
            if (collector[0].length != 2) {
                if (collector[0].length == 1) {
                    //here code for make it as two digit
                }
            }
            else
            {
             alert('Date is not entered properly');
            }
}); 
```

我的 html

```
Date: <input type="text" id="date" name="date" /> 
```

如何用javascript做到这一点

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-19T15:58:34.007

试试这个 ：

```
collector[0] = "0" + collector[0]; 
```

使用您的代码：

```
$('#date').blur(function() {
    var collector = $('#date').val();
    collector = collector.split("/");
    if (collector[0].length != 2) {
        if (collector[0].length == 1) {
            collector[0] = "0" + collector[0];
        }
    }
    else {
        alert('Date is not entered properly');
    }
    // set the val again
    $('#date').val(collector.join('/'));
});​ 
```

[这里的工作示例](http://jsfiddle.net/manseuk/qpdVU/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-19T15:59:26.317

将字符串解析为真实日期然后使用[Javascript 日期格式](http://blog.stevenlevithan.com/archives/date-time-format)可能更容易，这已经提供了一种在日期和月份保留前导零的方法：

```
var date = Date.parse($('#date').val());
var strDate = date.format('dd/mm/yyyy'); 
```

*注意：'d' 不会保留前导零，但 'dd' 会。对于“m”和“mm”也是如此。*

# facebook - 使用 facebook、gmail、twitter 登录应用程序

> ID：11104772
> 
> 赞同：0
> 
> 时间：2012-06-19T15:54:29.937
> 
> 标签：facebook, api

我正在制作一款可在 Windows（桌面）、Linux（桌面）、iOS 和 Android 上播放的视频游戏。它不是基于网络的游戏。与其让人们专门为我的游戏创建 ID/PW，我更愿意让他们使用现有的 FB、G+、twitter 等来登录/创建帐户。我对社交网络方面不太感兴趣，所以这是一个好的做法，如果是这样，我什至从哪里开始使用 FB、G+ 和 twitter API 来弄清楚如何做到这一点？

我正在阅读 OAuth 是客户端应用程序的方式。OAuth 是位于 OpenID 之上还是根本不相关？试图阅读它，但还没有得到答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T15:56:24.500

这就是您要寻找的：[OpenID](http://openid.net/)。是的，我认为事实上很多人会说这是最佳实践。

# python - 格式化从网站抓取的数据 (BeautifulSoup)

> ID：11104774
> 
> 赞同：0
> 
> 时间：2012-06-19T15:54:35.143
> 
> 标签：python, html-parsing, web-scraping, beautifulsoup

我正在使用 BeautifulSoup 和 Requests 创建一个刮板，它刮取网站页面以获取比赛时间表（和结果，如果可用）。这是我到目前为止所拥有的：

```
 def getMatches(self):
        url = 'http://icc-cricket.yahoo.net/match_zone/series/fixtures.php?seriesCode=ENG_WI_2012' # change seriesCode in URL for different series.
        page = requests.get(url)
        page_content = page.content
        soup = BeautifulSoup(page_content)

    result = soup.find('div', attrs={'class':'bElementBox'})
    tags = result.findChildren('tr')

    for elem in tags:
        x = elem.getText()
        print x 
```

这些是我得到的结果：

```
Date &amp; Time (GMT)fixture
Thu, May 17, 2012 10:00 AMEngland&nbsp; vs &nbsp;West Indies
3rd&nbsp;TESTA full scorecard will be available shortly.Venue: Edgbaston,    BirminghamResult: England won by 5 wickets
Fri, May 25, 2012 11:00 AMEngland&nbsp; vs &nbsp;West Indies
2nd&nbsp;TESTClick here for the full scorecardVenue: Trent Bridge, NottinghamResult:     England won by 9 wickets
Thu, Jun 7, 2012 10:00 AMEngland&nbsp; vs &nbsp;West Indies
1st&nbsp;TESTClick here for the full scorecardVenue: Lord'sResult: Match Drawn
Sat, Jun 16, 2012 9:45 AMEngland&nbsp; vs &nbsp;West Indies
1st&nbsp;ODIClick here for the full scorecardVenue: The Rose Bowl, SouthamptonResult:     England won by 114 runs (D/L Method)
Tue, Jun 19, 2012 9:45 AMEngland&nbsp; vs &nbsp;West Indies
2nd&nbsp;ODIVenue: KIA Oval
Fri, Jun 22, 2012 9:45 AMEngland&nbsp; vs &nbsp;West Indies
3rd&nbsp;ODIVenue: Headingley Carnegie
Sun, Jun 24, 2012 12:00 AMEngland&nbsp; vs &nbsp;West Indies
1st&nbsp;T20Venue: Trent Bridge, Nottingham 
```

现在，我想以某种结构化格式对数据进行分类。一个字典列表，每个都包含
有关单个匹配的信息是理想的。但我坚持如何实现这一目标。结果中的输出字符串有类似的字符`&nbsp`，时间排列很奇怪`AMEngland`。还有一个问题，如果我使用空格字符作为分隔符来分割字符串，像西印度群岛这样的国家，只有两个单词，将被分割，并且不会有任何统一的方法来解析它。

那么有没有一种方法可以统一解析这些数据，这样我就可以进入表单了。有点像：

```
[ {'date': match_date, 'home_team': team1, 'away_team': team2, 'venue': venue},{ same for match 2}, { match 3 }...] 
```

我会很感激任何帮助。:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T16:05:35.657

区分日期/时间和国家并不难。您可以对“地点”和“结果”执行相同的操作。

```
>>> import re
>>> s = "Sun, Jun 24, 2012 12:00 AMEngland&nbsp; vs &nbsp;West Indies"
>>> match = re.search(r"\b[AP]M", s)
>>> s[0:match.end()]
'Sun, Jun 24, 2012 12:00 AM'
>>> s[match.end():]
'England&nbsp; vs &nbsp;West Indies' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T16:06:14.350

看看[scrapy吧](http://scrapy.org/)；这将使这项任务变得容易得多。

您定义要从该站点抓取的[项目：](http://doc.scrapy.org/en/latest/topics/items.html)

```
from scrapy.item import Item, Field

class CricketMatch(Item):
    date = Field()
    home_team = Field()
    away_team = Field()
    venue = Field() 
```

然后用 XPath 表达式定义一个[加载器](http://doc.scrapy.org/en/latest/topics/loaders.html)来填充这些项目。之后您可以直接使用这些项目，或者[生成 JSON 输出或类似](http://doc.scrapy.org/en/latest/topics/feed-exports.html)的。

# salesforce - 删除两个字符串中的常用词

> ID：11104776
> 
> 赞同：0
> 
> 时间：2012-06-19T15:54:39.920
> 
> 标签：salesforce, apex-code

使用 APEX 我有两个字符串，想从每个字符串中删除两个字符串中的常用词。

```
String s1 = 'this and1 this is a string1';
String s2 = 'this and2 this is a string2'; 
```

所以结果将是：

```
s1 = 'and1 string1';
s2 = 'and2 string2'; 
```

我首先将每个字符串放在一个列表中：

```
List<String> strList1 = s1.split(' ');
List<String> strList2 = s2.split(' '); 
```

不幸的是 removeAll() 不是 apex 中的列表方法，所以我无法执行：

```
strList1.removeAll(strList2);
strList2.removeAll(strList1); 
```

有任何想法吗？使用集合会解决我的问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T04:15:09.393

您的想法是正确的，但只需要将列表转换为集合，以便您可以使用 apex removeAll() 函数。

```
Set<String> stringSet1 = new Set<String>();
stringSet1.addAll(stringList1);
Set<String> stringSet2 = new Set<String>();
stringSet2.addAll(stringList2); 
```

然后您可以使用 remove all 函数（保留 stringSet1 的副本，因为您正在修改它并希望使用原始字符串从字符串集 2 中删除）

```
Set<String> originalStringSet1 = stringSet1.clone();
stringSet1.removeAll(stringSet2);
stringSet2.removeAll(originalStringSet1); 
```

完成后，您可以遍历字符串列表并使用字符串之间不常见的所有单词构建字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T16:13:49.137

尝试使用此代码

String s1 = "this and1 this is a string1"; String s2 = "this and2 this is a string2";

```
 List<String> strList1 = s1.Split(' ').ToList();
        List<String> strList2 = s2.Split(' ').ToList();

        var intersection = strList1.Intersect(strList2);
        foreach (var item in intersection.ToList())
        {
            strList1.RemoveAll(p => p.Equals(item));
            strList2.RemoveAll(p => p.Equals(item));
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T15:59:08.343

你可以重写你的字符串：

遍历单词，如果您有不同的单词，只需将它们添加到新字符串的末尾

```
 // inside loop
    if (!word1.equals(word2)) {
        str1new += word1;
        str2new += word2;
    }

// outside of loop
s1 = str1new;
s2 = str2new; 
```

当然，您需要在单词之间添加空格。您希望您的程序如何处理不同长度的字符串？

# perl - 如何从 Perl 中的 sub 传递和返回哈希？

> ID：11104779
> 
> 赞同：1
> 
> 时间：2012-06-19T15:54:52.430
> 
> 标签：perl, hash, reference, subroutine

我一直在玩 Perl 中的哈希。以下按预期工作：

```
use strict;
use warnings;

sub cat {
        my $statsRef = shift;
        my %stats = %$statsRef;

        print $stats{"dd"};
        $stats{"dd"} = "DDD\n";
        print $stats{"dd"};
        return ("dd",%stats);
}

my %test;
$test{"dd"} = "OMG OMG\n";

my ($testStr,%output) = cat (\%test);
print $test{"dd"};

print "RETURN IS ".$output{"dd"} . " ORIG IS ". $test{"dd"}; 
```

输出是：

```
OMG OMG
DDD
OMG OMG
RETURN IS DDD
 ORIG IS OMG OMG 
```

当我将一个数组添加到混合中时，它会出错。

```
use strict;
use warnings;  sub cat {
        my $statsRef = shift;
        my %stats = %$statsRef;

        print $stats{"dd"};
        $stats{"dd"} = "DDD\n";
        print $stats{"dd"};         return ("dd",("AAA","AAA"),%stats); }
 my %test; $test{"dd"} = "OMG OMG\n";

my ($testStr,@testArr,%output) = cat (\%test);
print $test{"dd"};

print "RETURN IS ".$output{"dd"} . " ORIG IS ". $test{"dd"}. " TESTARR IS ". $testArr[0]; 
```

输出是：

```
OMG OMG
DDD
OMG OMG
Use of uninitialized value in concatenation (.) or string at omg.pl line 20.
RETURN IS  ORIG IS OMG OMG
 TESTARR IS AAA 
```

为什么显示数组但不显示哈希？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-19T15:59:06.543

所有列表都在 Perl 中自动展平。因此，赋值运算符将无法神奇地区分子例程返回的列表之间的边界。在您的情况下，这意味着 @testArr 将使用由 给出的结果列表`cat`，而 %output 将一无所获-因此`Use of unitialized value...`发出警告。

如果您需要专门返回哈希或数组，请使用引用：

```
return ("dd", ["AAA", "AAA"], \%stats); 
```

...后来，在作业中：

```
my ($testStr, $testArrayRef, $testHashRef) = cat(...);
my @testArray = @$testArrayRef;
my %testHash  = %$testHashRef; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-19T16:07:49.173

除了raina77ow 的答案，我强烈建议只传递参考，而不是从类型转换为参考然后再返回。它更容易阅读并且编码的麻烦更少（恕我直言）

```
use Data::Dumper;
use strict;
use warnings;
sub cat {
    my $statsRef = shift;
    print $statsRef->{"dd"} ;
    $statsRef->{"dd"} = "DDD\n";
    print $statsRef->{"dd"} ;
    return ("dd",["AAA","AAA"],$statsRef); 
}

my $test = {} ;
$test->{"dd"} = "OMG OMG\n";

my ( $var, $arrRef, $hashRef ) = cat($test) ;

print "var " . Dumper($var) . "\n" ;
print "arrRef " . Dumper($arrRef) . "\n";
print "hashRef " . Dumper($hashRef) . "\n"; 
```

# jquery - 动画画布的鼠标悬停完整性

> ID：11104782
> 
> 赞同：1
> 
> 时间：2012-06-19T15:54:59.573
> 
> 标签：jquery, html, canvas, dom-events, jcanvas

我的事件处理程序在与画布交互时遇到问题。基本上发生的事情是带有事件处理程序的画布下方的画布以某种方式影响其上方的画布，并且有时会破坏事件。

我正在使用 onmouseover 事件来隐藏上部画布和 onmouseout 以重新显示元素。请注意，我使用 onmousemove 获得了相同的效果。

我已将我的代码转换为 jsfiddle： http: [//jsfiddle.net/morgaman/zPuH8/](http://jsfiddle.net/morgaman/zPuH8/) `...但令人沮丧的是它没有运行。[因此，工作版本本身就在这里托管： http](http://chrismorga.com/rainnav/rbowtester.html) ://chrismorga.com/rainnav/rbowtester.html 。`

 `我听说“jCanvas”（[http://calebevans.me/projects/jcanvas/index.php](http://calebevans.me/projects/jcanvas/index.php)）是我的问题的 jQuery 答案，但我不知道如何对其进行编程或制作递归动画。帮助？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T16:00:50.803

给你的 div 保持`myCanvasL2`与画布相同的高度和宽度。否则它将调整其大小以适应画布，并且当其设置为不显示时，它将调用，`mouseout`因为它的高度本质上将是 0。

**[工作版本](http://jsfiddle.net/loktar/zPuH8/1/)**

```
<div style="z-index:1; position: absolute; left: 18%; top:50px;width:800px;height:50px;" 
    onmouseover="document.getElementById('myCanvasL2').style.display = 'none';"
    onmouseout="document.getElementById('myCanvasL2').style.display = 'block';">
        <canvas id="myCanvasL2" width="800" height="50"></canvas>
</div>​ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T16:18:38.540

Loktar 在这里得到了很好的答案，但我真的很好奇你在做什么。

如果您保持两个画布始终具有相同的大小和顺序，并且只将事件处理程序放在顶部画布上，那么您的生活会变得容易得多。

如果您需要“隐藏”两个画布之一，请完全清除它（`clearRect`，yada yada）。

当该画布被清除时，如果您需要与其下方的画布进行交互，请保留一个标志`topCanvasCleared`或其他东西，虽然这是`true`您在顶部画布上获得的任何事件，但您可以将其传递给作用于第二个画布的函数，就好像事件由此而来。由于它们的尺寸相同，它应该可以完美地工作。

...但是你*真的*需要两张画布吗？最终目标是什么？为什么你不能有一个画布在不同的时间显示两种截然不同的状态呢？如果您从一开始就只需要担心一个 DOM 元素，那么生活会轻松得多。在一张画布上拥有迄今为止所拥有的所有功能当然不难。

我认为这里的解决方案是重新组织你到目前为止只有一个画布或最多两个永远不会改变形状、大小或可见性的画布，事件处理程序只在最上面的一个。我敦促您考虑一下这两个想法。`

# java - 这仍然是多态性吗？

> ID：11104785
> 
> 赞同：2
> 
> 时间：2012-06-19T15:55:27.810
> 
> 标签：java, inheritance, polymorphism

在编码时，我对多态性产生了一个有趣的疑问，我无法理解解决方案。

```
public class Animal {
  public void getLegs() {
    SOP("4 legs"); 
  }
}

public class Kangaroo extends Animal {
  public void getLegs() {
    SOP("2 legs"); 
  }
  public static void main(String[] args) {
    Animal a = new Kangaroo(); // without changing this how can I get Animal getLegs
    SOP(a.getLegs()); // Important Line
  }
} 
```

现在如果我想调用 的`getLegs`方法`Animal`，我该怎么做？是否可以？还是多态吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T15:57:51.743

是的，它是演示多态性的最基本形式。

基本上你正在处理一个`Animal`命名的`a`. 当您调用`a.getLegs()`您的代码时，它不会绑定到`getLegs()`in的实现`Animal`，而是绑定到最低的子类实现`getLegs()`in `Kangraoo()`。

如果`Animal`有一个实现，就说它被子类实现*隐藏*了。如果`Animal`没有实现，那么就不可能构造独立的类，`Animal`因为它们缺少所有必需方法的实现，在这种情况下，`Animal`被称为*抽象*类（不能直接构造，但是只能由它的子类构造）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T16:15:38.353

如果您真的想为 Animal 调用您的方法，并且可以使用静态方法，则可以使用**隐藏**而不是覆盖。

它的工作原理如下：仅对于静态方法，被调用的方法是与*声明的类型*相关的方法，而不是对象实例。换句话说，它遵循类，因为该方法是类方法，而不是实例方法。

一个例子，改编自[这个页面](http://docs.oracle.com/javase/tutorial/java/IandI/override.html)：

```
public class Animal {
  public static void testClassMethod() {
      System.out.println("The class" + " method in Animal.");
  }
  public void testInstanceMethod() {
      System.out.println("The instance " + " method in Animal.");
  }
}

public class Kangaroo extends Animal {
  public static void testClassMethod() {
      System.out.println("The class method" + " in Kangaroo.");
  }
  public void testInstanceMethod() {
      System.out.println("The instance method" + " in Kangaroo.");
  }

  public static void main(String[] args) {
      Kangaroo myRoo = new Kangaroo();
      Animal myAnimal = myRoo;
      myRoo.testInstanceMethod();
      myAnimal.testInstanceMethod();
      Kangaroo.testClassMethod();
      Animal.testClassMethod();
  }
} 
```

结果将是（注意第 3 行和第 4 行，而不是第 1 行和第 2 行）：

```
The instance method in Kangaroo.
The instance method in Kangaroo.
The class method in Kangaroo.
The class method in Animal. 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-19T16:01:43.030

在 Java 中，无法访问 Animal 的实现。它总是会返回袋鼠的版本。

（请注意，在 C#*中*，可以通过使用“new”标记覆盖方法，但这是一个相当专业的用例）。

访问看似是 Animal 的对象，但获得 Kangaroo 指定的行为，这正是多态性的本质——在期望其父对象的任何地方都可以替换子对象的能力。

通常，您不希望调用代码知道继承层次结构，因为这会将您的代码紧密耦合在一起。如果您真的需要访问 Animal 的此方法的实现，则表明您的设计可能是错误的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-19T16:04:00.220

> 现在如果我想调用 Animal 的 getLegs 方法，我该怎么做？是否可以？

如果你想访问被覆盖的方法——这与多态性相矛盾——你可以使用反射。从 的类中获取`getLegs`方法`Animal`，然后在您的袋鼠对象上调用它。然而，这是一个 hack，而不是你在常规程序中会做的事情。

```
SOP( Animal.class.getMethod("getLegs").invoke(a) ); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-19T16:18:33.827

多态性的精神是执行在运行时决定的不同代码。为了更清楚，我将稍微修改您的代码。

```
 public class Animal {

    public void getLegs(){
      SOP('4 legs'); 
     }

}
public class Kangaroo extends Animal{
 public void  getLegs(){
      SOP('2 legs'); 
  }
public static void main(String[] args){
  Animal a = new Kangaroo(); //without changing this how can I get Animal getLegs
  Kangaroo kng= new Kangaroo ();
  Animal an = new Animal();

  SOP(a.getLegs());  // Kangaroo's version is called
  SOP(kng.getLegs()); //Again, Kangaroo's version is called
  SOP(an.getLegs());   //Animal version is called

  }
} 
```

是的，正如所有人所说，您不能从您的线路中调用 Animal `Animal a = new Kangaroo();`..因为没有人愿意这样做。而是他会直接写。`Animal a = new Animal();`..

所以最终决定调用哪个方法的是对象而不是引用

# ios - 带有隐藏顶部灰线的自定义 IOS UITabbarController

> ID：11104796
> 
> 赞同：0
> 
> 时间：2012-06-19T15:55:58.903
> 
> 标签：ios, uitabbarcontroller, uitabbar

我想用 uitabbar 制作一个具有独特颜色的视图，即我不想将视图分成 UITabbar 和其余部分，所以我以编程方式创建了一个自定义 UITabbar 自定义颜色。UITabbar 和“视图的其余部分”具有相同的颜色，但在 UITabbar 顶部有一条灰线将 to 部分分开。我怎么能隐藏它？

这是一个示例图片，我想删除那条黑线： [https ://picasaweb.google.com/felixdl/20Giugno2012#5756005463317234882](https://picasaweb.google.com/felixdl/20Giugno2012#5756005463317234882)

解决方案

谢谢！这完美！我添加的行是：

[[UITabBar 外观] setBackgroundImage:[UIImage imageNamed:@"myImage.jpg"]];

我以前从未使用过“外观”标签

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T02:42:35.303

如果您正在为 iOS 5 构建，您可以将背景设置为图像，这将消除您正在谈论的灰线。

```
[uiTabBarController setBackgroundImage:[UIImage imageNames:@"my_background.png"]]; 
```

不过，这确实需要您拥有与您以编程方式创建的颜色相匹配的图像。

在 iOS4 中，您可以覆盖 drawRect 函数（这要复杂得多，但如果您正在制作 iOS 5 之前的应用程序，我很乐意回答）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-11T10:00:44.407

试试这个，** Objective-C **

```
//Remove shadow image by assigning nil value.
[[UITabBar appearance] setShadowImage: nil];

// or 

// Assing UIImage instance without image reference
[[UITabBar appearance] setShadowImage: [[UIImage alloc] init]]; 
```

** 斯威夫特 **

```
//Remove shadow image by assigning nil value.
UITabBar.appearance().shadowImage = nil

// or 

// Assing UIImage instance without image reference
UITabBar.appearance().shadowImage = UIImage() 
```

这是[shadowImage](https://developer.apple.com/documentation/uikit/uitabbar/1623452-shadowimage)的苹果文档。

```
@available(iOS 6.0, *)
open var shadowImage: UIImage? 
```

> 默认为零。当非零时，显示自定义阴影图像而不是默认阴影图像。要显示自定义阴影，还必须使用 -setBackgroundImage 设置自定义背景图像：（如果使用默认背景图像，将使用默认阴影图像）。

# java - Android在文本视图中设置字体

> ID：11104807
> 
> 赞同：1
> 
> 时间：2012-06-19T15:56:37.563
> 
> 标签：java, android

嗨，我正在尝试更改 a 的字体样式`TextView`。我知道如何更改它，在使用以下代码之前我已经这样做了。

```
public class Main_Activity extends ListActivity {
    Typeface myNewFace = Typeface.createFromAsset(getAssets(),
            "fonts/bediz__.ttf");
    private CustomListAdapter adap;

    public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    adap = new CustomListAdapter(this);
    setListAdapter(adap);
}
    public static class CustomListAdapter extends BaseAdapter implements
        Filterable {
           public View getView(final int position, View convertView,
            ViewGroup parent) {
        textView.setText(prayers[position]);
        holder.textLine.setTypeface(myNewFace);
           }
} 
```

我跳过了一些代码，因为没有必要，顺便说一下，当我访问`myNewFace`它时，我`getView()`要求我制作它`static`，当我这样制作`static`时

```
static Typeface myNewFace = Typeface.createFromAsset(getAssets(),"fonts/bediz__.ttf"); 
```

它给了我以下错误

```
Cannot make a static reference to the non-static method getAssets() from the type ContextWrapper 
```

我不知道该怎么办，我以前做过几次这项工作，但现在我不知道为什么它不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T16:00:03.537

你必须这样做

```
static Typeface myNewFace = Typeface.createFromAsset(context.getAssets(),"fonts/bediz__.ttf"); 
```

其中 context 应该是调用适配器的类的上下文。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T17:04:17.427

这是因为您已将您声明`inner class`为`static;`使您`inner class`的顶级嵌套类不再是成员，因此，如果不首先通过对实例化对象的引用`nested class;`，您将无法再访问其中的任何`non-static member`内容。`outer class`

对于 a ，在创建for an`non-static inner class`时始终传递对外部对象的（隐藏）引用；因此可以访问外部的所有成员。对于 a ，此引用未通过。`object``inner class``object/class``static inner class`

As to your sample, you could use the reference to the outer object that you are explicitly passing along when creating a new CustomListAdapter object: "`adap = new CustomListAdapter(this);`" but a better solution is probably to drop this static keyword from the inner class definition. You won't need to pass a reference to the outer object anymore either.

# c# - 找不到对 System.Runtime.Serialization.Formatters.Binary 的引用

> ID：11104808
> 
> 赞同：4
> 
> 时间：2012-06-19T15:56:46.083
> 
> 标签：c#, silverlight, windows-phone-7, serialization

```
using System.Runtime.Serialization;
using System.Runtime.Serialization.Formatters.Binary; 
```

VS 说，**命名空间 'System.Runtime.Serialization' 中不存在类型或命名空间名称 'Formatters'**。好吧，我应该添加这个参考。单击项目 > 添加引用 > .NET，在那里我只能看到 System.Runtime.Serialization，没有像 Formatters 这样的东西。

System.Runtime.Serialization.dll 似乎在`c:\Program Files (x86)\Reference Assemblies\Microsoft\Framework\Silverlight\v4.0\Profile\WindowsPhone71\`- 那里没有 Formatters，也没有 Formatters.Binary。

如何找到这个参考？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T15:59:35.440

（或 Windows Phone）`BinaryFormatter`不支持。`Silverlight`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-19T15:59:37.500

所以显然 Silverlight 没有`BinaryFormatter`. 但是，存在一个开源项目，它可能能够为您提供类似的功能。它被称为[SharpSerializer](http://www.sharpserializer.com/en/index.html)。**它将与 Silverlight 和 WP7 一起使用**。

我将另一半的答案保留在下面，虽然不适合 Silverlight，但可能对那些在其他项目中仍然缺少上述参考的人有所帮助，因为它应该更正它。

* * *

对于不使用 Silverlight 并且可以访问的其他项目，`BinaryFormatter`您的目标框架设置可能不正确。

确保您使用的是完整的`.NET Framework 4 Profile`而不是`.NET Framework 4 Client Profile`项目中的作为目标框架。请参见下图，您可以在项目的属性中找到这些设置。

![设置目标框架](../Images/9c202bd5afd43f0c277e7f753defb395.png)

# r - R：map2SpatialPolygons 中的 ID

> ID：11104809
> 
> 赞同：5
> 
> 时间：2012-06-19T15:56:49.087
> 
> 标签：r, geospatial

我正在尝试`map2SpatialPolygons`在显示美国各州子集的地图中创建内核密度图。我不断收到一条错误消息，说“地图和 ID 的长度不同”。

我知道这段代码有效（来自 map2SpatialPolygons 的帮助）：

```
nor_coast_poly <- map("world", "norway", fill=TRUE, col="transparent", plot=FALSE, ylim=c(58,72))
IDs <- sapply(strsplit(nor_coast_poly$names, ":"), function(x) x[1])
nor_coast_poly_sp <- map2SpatialPolygons(nor_coast_poly, IDs=IDs, proj4string=CRS("+proj=longlat +datum=wgs84")) 
```

此代码也有效（在映射整个美国时）：

```
usmap <- map('usa', fill=TRUE, col="transparent", resolution=0, plot=FALSE)
uspoly <- map2SpatialPolygons(usmap, IDs=usmap$names, proj4string=CRS("+proj=longlat +datum=WGS84")) 
```

但这段代码没有：

```
states.to.plot=c("illinois", "indiana", "ohio")
dmap<-map("state", regions=states.to.plot, col="transparent", plot=FALSE)
dpoly <- map2SpatialPolygons(dmap, IDs=dmap$names, proj4string=CRS("+proj=longlat +datum=WGS84")) 
```

它抛出错误：

```
Error in map2SpatialPolygons(dmap, IDs = dmap$names, proj4string = CRS("+proj=longlat +datum=WGS84")) :
    map and IDs differ in length 
```

使用 map("state"...) 时如何获取正确的 ID？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-21T08:12:10.330

来自`?map`：

> 返回值是一个包含 x、y、范围和名称组件的列表。... 如果 fill 为 FALSE，则 x 和 y 向量是连续折线的坐标，由 NA 分隔。如果 fill 为 TRUE，则 x 和 y 向量具有连续多边形的坐标，再次由 NA 分隔。

因此，使用默认值`fill = FALSE`，您会得到一堆折线，“一堆”比您要绘制的三个状态多，这就是您收到上述错误的原因。但是，即使使用正确数量的 ID，您仍然会收到错误消息，因为`map`返回的是折线而不是多边形。

使用`fill = TRUE`，您将获得您所追求的多边形：

```
dmap<-map("state", regions=states.to.plot, col="transparent", plot=FALSE, fill = TRUE)

dpoly <- map2SpatialPolygons(dmap, IDs = dmap$names,
  proj4string=CRS("+proj=longlat +datum=WGS84")) 
```

# iphone - 如何测量 UIImageView 的绘制时间？

> ID：11104811
> 
> 赞同：3
> 
> 时间：2012-06-19T15:56:51.747
> 
> 标签：iphone, ios, ipad, uiimageview, nsrunloop

我一直在努力追踪我们其中一个应用程序中的性能问题。似乎发生的情况是，有时 UIImageView 需要几秒钟来渲染图像，并且由于代码的编写方式，这会阻塞主线程。

我已经将问题归结为慢速图像是视网膜分辨率下的渐进 JPEG。无论出于何种原因，当文件达到一定大小时，解码 JPEG 就成为一项非常昂贵的操作。

无论如何，在编写一个[简单的测试应用程序](https://github.com/sujal/Image-Tester "简单的测试应用")的过程中，我意识到我不知道如何计算绘制事件需要多长时间。它显然阻塞了主线程，所以我决定尝试计算运行循环迭代的时间。不幸的是，它最终有点骇人听闻。以下是相关代码：

```
///////////////
//
// This bit is used to time the runloop. I don't know a better way to do this
// but I assume there is... for now... HACK HACK HACK. :-)

buttonTriggeredDate_ = [NSDate date];
[[NSRunLoop mainRunLoop] performSelector:@selector(fire:) target:self argument:[NSNumber numberWithInt:0] order:1 modes:[NSArray arrayWithObject:NSDefaultRunLoopMode]];

///////////////

NSString* path = [[NSBundle mainBundle] pathForResource:imageName ofType:type];
self.imageView.image = [UIImage imageWithContentsOfFile:path]; 
```

回调如下（更多hackiness！）：

```
- (void)fire:(NSNumber*)counter {
    int iterCount = [counter intValue];
    NSLog(@"mark %d", iterCount);
    NSTimeInterval interv = [[NSDate date] timeIntervalSinceDate:buttonTriggeredDate_];

    // We really need the second pass through - if it's less than X, assume
    // it's just that first runloop iteration before the draw happens. Just wait
    // for the next one.
    if (iterCount < 1) {
        iterCount++;
        [[NSRunLoop mainRunLoop] performSelector:@selector(fire:) 
                                          target:self 
                                        argument:[NSNumber numberWithInt:iterCount] 
                                           order:1 
                                           modes:[NSArray arrayWithObject:NSDefaultRunLoopMode]];
    } else {
        self.statusDisplay.text = [NSString stringWithFormat:@"%@ - Took %f Seconds",
                                   self.statusDisplay.text,
                                   interv];
    }
} 
```

所以，我的问题是，基本上，你会怎么做？我希望能够放入不同的图像并运行基准测试，以确保我大致了解运行它需要多长时间。我也希望它合理一致且没有抖动。

嗯，也许我应该只继承 UIImageView 并记录时间`[super drawRect:frame]`？

你会怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T01:34:03.613

您可能试图计算问题的错误部分。正如您所怀疑的，问题很可能出在解码中（也可能出在内存分配和复制中）。问题不太可能出在最后的“绘图”步骤本身。

这就是 Instruments 专为解决的问题。启动 Instruments 并寻找您的热点。

作为一种可能的解决方案，如果 Instruments 告诉您解码是阻碍您的原因，您可以考虑在将图像`CALayer`放入视图之前将图像渲染到后台线程上。

# asp.net-mvc - 显示编辑器中的 nbsp

> ID：11104812
> 
> 赞同：0
> 
> 时间：2012-06-19T15:56:57.130
> 
> 标签：asp.net-mvc

我需要分开数字。

```
@model string
@{
    @String.Format("{0:### ### ###}", Int32.Parse(Model))
} 
```

如何将空格更改为nbsp？编码阻碍了我。与号更改为`& a m p ;`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T16:06:24.470

您可以使用 Html.Raw 函数防止 Razor 自动对字符串进行编码：

```
@model string
@{
    @Html.Raw(string.Format("{0:###&nbsp;###&nbsp;###}", Int32.Parse(Model)))
} 
```

显然你在使用这个函数时应该小心，但如果你只是输出一个整数，你应该没问题。

# android - RE: Live Wallpaper Screen Rotation

> ID：11104815
> 
> 赞同：0
> 
> 时间：2012-06-19T15:57:11.677
> 
> 标签：android, live-wallpaper, screen-rotation

I recently posted a question about screen rotation in my live wallpaper. To test why I was having these problems, I created the simple program below:

```
package com.live.waller;

import android.graphics.Canvas;
import android.graphics.Color;
import android.os.Handler;
import android.service.wallpaper.WallpaperService;
import android.view.MotionEvent;
import android.view.SurfaceHolder;

public class LiveWallpaperService extends WallpaperService {

/** Called when the activity is first created. */

@Override
public Engine onCreateEngine() {
    // TODO Auto-generated method stub
    return new LiveWallerEngine();
}

class LiveWallerEngine extends Engine {

    SurfaceHolder holder;
    private Handler mHandle;

    LiveWallerEngine() {
        mHandle = new Handler();
        holder = getSurfaceHolder();
    }

    private Runnable runner = new Runnable() {

        public void run() {
            // TODO Auto-generated method stub
            drawFrame();
        }

    };

    public void drawFrame() {
        while(isVisible()) {
            if(!holder.getSurface().isValid())
                continue;

            Canvas c = null;

            try{
                c = holder.lockCanvas();

                drawSurface(c);
            } finally {
                if(c != null) holder.unlockCanvasAndPost(c);
            }
        }
    }

    public void drawSurface(Canvas c) {

        c.save();

        c.drawColor(Color.argb(255, 100, 200, 124));

        c.restore();

    }

    @Override
    public void onCreate(SurfaceHolder surfaceHolder) {
        // TODO Auto-generated method stub
        super.onCreate(surfaceHolder);

        setTouchEventsEnabled(true);
        mHandle.post(runner);

    }

    @Override
    public void onOffsetsChanged(float xOffset, float yOffset,
            float xOffsetStep, float yOffsetStep, int xPixelOffset,
            int yPixelOffset) {
        // TODO Auto-generated method stub
        super.onOffsetsChanged(xOffset, yOffset, xOffsetStep, yOffsetStep,
                xPixelOffset, yPixelOffset);
    }

    @Override
    public void onSurfaceChanged(SurfaceHolder holder, int format,
            int width, int height) {
        // TODO Auto-generated method stub
        super.onSurfaceChanged(holder, format, width, height);

        mHandle.post(runner);
    }

    @Override
    public void onTouchEvent(MotionEvent event) {
        // TODO Auto-generated method stub
        super.onTouchEvent(event);
    }

    @Override
    public void onVisibilityChanged(boolean visible) {
        // TODO Auto-generated method stub
        super.onVisibilityChanged(visible);

    }

    @Override
    public void setTouchEventsEnabled(boolean enabled) {
        // TODO Auto-generated method stub
        super.setTouchEventsEnabled(enabled);
    }   
} 
```

}

And when I rotate my wallpaper, I am greeted with a blank screen. Does anyone know what is wrong with my code?

When I run the wallpaper, I get these errors in logcat:

```
ActivityManager: force stopping package com.live.waller uid=10046
PackageManager: Not granting permission android.permission.BIND_WALLPAPER to package com.live.waller (protectionLevel=3 flags=0xbe46)
dalvikvm: GC_CONCURRENT freed 609K, 43% free 4604K/8071K, external 904K/1222K, paused 6ms+7ms
dalvikvm: GC_EXPLICIT freed 320K, 44% free 4561K/8071K, external 904K/1222K, paused 138ms
dalvikvm: GC_EXTERNAL_ALLOC freed 197K, 51% free 2955K/6023K, external 1736K/1742K, paused 78ms 
```

What's strange is that I get a force stop message in logcat but not on the emulator when I set my wallpaper.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T18:44:31.973

Your drawFrame()-method will be stuck in an infinite loop, as long as isVisible() returns true. There is no need for a while-statement to loop through the locking and posting of your freshly painted Canvas, when you got a Runnable with a Handler.

A better implementation of drawFrame() can be found in the [Cube Live Wallpaper](http://developer.android.com/resources/samples/CubeLiveWallpaper/index.html) example in the SDK.

```
private void drawFrame() {
    Canvas c = null;

    try {
        // Get a Canvas from the surfaceHolder, so we got something to paint on
        c = holder.lockCanvas();

        // Make sure we got a valid (non-null) canvas.
        if(c != null) {
            // Draw something onto the canvas
            drawSurface(c);
        }
    } finally {
        if(c != null) 
            // Notify the SurfaceHolder that we are done painting the canvas,
            // and we want it shown on the screen
            holder.unlockCanvasAndPost(c);
    }

    // If your wallpaper is going to have animated objects, you will have to tell
    // the handler to schedule new runs on your Runnable object.

    // First we remove any pending task in the Handlers message queue
    mHandle.removeCallbacks(runner);

    // Then we tell the Handler to schedule a new run some time in the future. The 
    // time we specify here will decide how often the screen updates, or in other words
    // the FPS of your wallpaper. If the wallpaper is not visible, there is no reason to update wallpaper. So we only schedule a new run, if mIsVisible is true.    
    if(mIsVisible) { 
        mHandle.postDelayed(runner, 1000 / desiredFPS);
    }
} 
```

Now, we use Engine.onVisibilityChanged() to decide whether or not the wallpaper is visible.

```
@Override
public void onVisibilityChanged(boolean visible) {
    // Set mIsVisible equal to visible, so that drawFrame() can decide wheter to reschedule run or not.
    mIsVisible = visible;

    if (visible) {
        // Since drawFrame() tells the handler to schedule new runs, we only need to call drawFrame() once. In drawFrame(), mHandle.postDelayed() will then continuously update the screen, as long as its visible.
        drawFrame();
    } else {
        // If not, remove any pending posts, since we no longer need to update the wallpaper.
        mHandle.removeCallbacks(runner);
    }
} 
```

If the Surface we paint to somehow gets destroyed (Ex.: If the user sets a new background), we also want to remove any pending posts. So in Engine.onSurfaceDestroyed(), we do

```
@Override
public void onSurfaceDestroyed(SurfaceHolder holder) {
    super.onSurfaceDestroyed(holder);
    mHandle.removeCallbacks(runner);
} 
```

Regarding the force close issue: What API-level are your trying to run the Wallpaper on?

# delphi - 序列化 TdwsProgram

> ID：11104816
> 
> 赞同：8
> 
> 时间：2012-06-19T15:57:12.277
> 
> 标签：delphi, dwscript

据我了解，`DWScript`不会将脚本编译成中间字节码。
但是，我希望能够存储“已*编译*”脚本，以便能够通过流发送它或将其保存到文件中。

我想知道：*有没有办法序列化一个`TdwsProgram`对象？*

我没有设法在任何地方找到任何答案。我查看了代码，似乎不可能，但我想我还是应该问这个问题......

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-19T16:59:00.607

据我记得，它的实际维护者既没有实现也没有想要它（因为执行 AST 是一个对象树）。

请参阅这篇关于[为什么没有字节码格式](http://delphitools.info/2010/10/26/why-no-bytecode-format/)的参考文章。

最简单的方法是首先流式传输源代码，然后再次编译。

*DWS 编译速度非常快，比 Delphi 更快，Eric 一直在努力改进它，即使添加了新功能。*

# date - 仅当两个日期不匹配时才返回结果

> ID：11104817
> 
> 赞同：0
> 
> 时间：2012-06-19T15:57:12.290
> 
> 标签：date

我有一张桌子`notes`。带有字段`service_date`和`create_date`. 我只想看到一个结果，如果`service_date`是`>='01-JAN-2012`并且如果`service_date`和`create_date`不匹配。

我试过了

```
select applicant_id, service_date, create_date
from notes
where service_date!=create_date 
```

但是我得到了这两个日期匹配的结果，所以它不起作用。

对不起，我正在使用 Oracle

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T15:18:12.000

尝试：

```
select applicant_id, service_date, create_date
  from notes
 where trunc(service_date) != trunc(create_date)
   and service_date >= to_date('01/01/2012', 'dd/mm/yyyy') 
```

（oracle DB 中的日期总是有一个时间部分——即使你不显示它）

# sql - sql查询：通过合并现有表中的行来创建表，如下所示：

> ID：11104819
> 
> 赞同：0
> 
> 时间：2012-06-19T15:57:20.140
> 
> 标签：sql, sqlite

我有一个表示加权有向图的 sqlite 表。列如下：

节点1 | 节点2 | 重量（节点1，节点2）

相反，我需要这张表：

节点1 | 节点2 | 重量（节点1，节点2）| 重量（节点2，节点1）

（node2 | node1 | weight(node2,node1) | weight (node1, node2) 不应该存在于表中）

我对SQL不太熟悉，所以我不知道如何从sqlite3中的原始表制作新表。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T16:08:31.650

我假设您的 node1 和 node2 是链接到节点表的整数外键，而您提到的表是边缘表？

假设边缘表是用类似的东西创建的：

```
CREATE TABLE edges( node1 INTEGER, node2 INTEGER, weight REAL ); 
```

怎么样（假设没有自弧，并且对于来自 a->b 的每个链接，也有来自 b->a 的链接）：

```
CREATE TABLE newedges( node1 INTEGER, node2 INTEGER, weight1 REAL, weight2 REAL );

INSERT INTO newedges
    SELECT e1.node1, e1.node2, e1.weight, e2.weight
    FROM edges AS e1 INNER JOIN edges AS e2
    ON e1.node1=e2.node2 AND e1.node2=e2.node1
    WHERE e1.node1 < e1.node2; 
```

自连接会整理前向和后向边，并且 e1.node1 小于 e1.node2 的要求确保您只能看到每个已整理的边一次。

**编辑以响应为缺少的向后边缘填充零的请求：**

对于缺少的向后边缘，您可以执行 LEFT JOIN 并使用 CASE 语句用零填充间隙：

```
INSERT INTO newedges
    SELECT
        e1.node1,
        e1.node2,
        e1.weight,
        CASE WHEN e2.weight IS NULL THEN 0.0 ELSE e2.weight END
    FROM edges AS e1 LEFT JOIN edges AS e2
    ON e1.node1=e2.node2 AND e1.node2=e2.node1
    WHERE e1.node1 < e1.node2; 
```

希望有帮助！

# c# - 使用向下箭头键滚动的 WPF DataGrid 行为奇怪

> ID：11104828
> 
> 赞同：4
> 
> 时间：2012-06-19T15:57:46.517
> 
> 标签：c#, wpf, .net-4.0, datagrid, wpfdatagrid

我有一个使用了一段时间的 WPF DataGrid，它工作得很好。与这里的其他海报不同，我还没有遇到滚动条或鼠标滚轮的问题。我已经`CTRL``END`编程到 DataGrid 的末尾，然后它会跟踪最近添加的项目。我可以用 键向上滚动浏览`DataGrid`内容`up`。

但是，我对`down`钥匙的行为真的很奇怪！如果我从顶部开始`DataGrid`并按住`down`键，它会滚动一点，然后最终在相邻的两行之间来回弹跳。如果 I `pgdn`，它将向下滚动更多，然后跳回到它会在其之间跳转的前两行的最顶部，然后向下滚动到我想要的位置`pgdn`。如果我再向下翻页，`down`键将滚动到最后。如果我走到顶部`DataGrid`并重新开始，我会一遍又一遍地得到完全相同的行为。

我还没有找到解决这个问题的帖子，而且我在`DataGrid`文档中也没有看到任何有帮助的东西。

它只是一个三列`DataGrid`，每列显示`TextBlock`s。谁能解释为什么只有这一种滚动模式有问题？这是 XAML：

```
<DataGrid ItemsSource="{Binding MainLog}" AutoGenerateColumns="False" 
     Name="log_datagrid" SelectedCellsChanged="log_datagrid_SelectedCellsChanged"   
     KeyUp="datagrid_KeyUp" LoadingRow="log_datagrid_LoadingRow">
    <DataGrid.Columns>
        <!-- timestamp -->
        <DataGridTemplateColumn Header="Timestamp">
            <DataGridTemplateColumn.CellTemplate>
                <DataTemplate>
                    <TextBlock Text="{Binding Timestamp}" />
                </DataTemplate>
            </DataGridTemplateColumn.CellTemplate>
        </DataGridTemplateColumn>
        <!-- level -->
        <DataGridTemplateColumn Header="Level">
            <DataGridTemplateColumn.CellTemplate>
                <DataTemplate>
                    <TextBlock Text="{Binding Level}" />
                </DataTemplate>
            </DataGridTemplateColumn.CellTemplate>
        </DataGridTemplateColumn>
        <!-- error message -->
        <DataGridTemplateColumn Header="Message">
            <DataGridTemplateColumn.CellTemplate>
                <DataTemplate>
                    <TextBlock Text="{Binding Message}" />
                </DataTemplate>
            </DataGridTemplateColumn.CellTemplate>
        </DataGridTemplateColumn>
    </DataGrid.Columns>
</DataGrid> 
```

顺便说一句，即使我的所有事件处理程序的代码隐藏都被注释掉了，这种行为也会发生。

这是我的 MainLog 集合包含的结构的定义：

```
public struct MainLogData
{
    public string Timestamp { get; set; }
    public string Level { get; set; }
    public string Message { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-05T11:45:54.333

好的...我用字符串（绑定到数据网格的简单字符串列表）重现了该行为。当我在列表中引入重复字符串时，这种行为开始发生。似乎数据网格在“选定索引”和“选定值”之间混淆了。当我尝试选择另一个可见行上存在的值（在我的测试中是一个字符串）时，也会发生同样的事情：选择被搞砸了：有一半的时间，没有选择正确的行。

您的问题是您使用的是“结构”。解决您的问题的简单方法是使您的**结构**成为一个**类**：

```
public class MainLogData 
{ 
    public string Timestamp { get; set; } 
    public string Level { get; set; } 
    public string Message { get; set; } 
} 
```

只需将**struct**单词更改为**class**即可解决您的问题。

您必须了解结构和类并不相同，**结构**根据其中的值确定它们与另一个变量（具有相同类型）的“相等性”（包含相同数据的特定结构类型的两个变量将被视为相等）。在**classes**的情况下，除非另有说明，否则相等性由其内存地址确定；这确保了默认情况下，即使它们包含相同的数据，对象的任何 2 个实例都不会被视为相等，因为它们不位于相同的内存地址（此行为可以通过覆盖 "GetHashCode" 和 "Equals" 方法来覆盖在任何类定义中）。

因此，总而言之，DataGrid 在确定您正在选择哪个项目（或使用箭头键移动）时​​存在问题，因为列表中的许多对象被认为是“相同的”或“相等的”。这就是为什么它会感到困惑。诚然，我认为这是一个数据网格错误（或者至少是设计使然的奇怪行为），但是将数据类型从结构更改为类应该可以帮助您重回正轨！

干杯

# ssis - 如何在 2012 年引用来自 SSIS 的 dll？

> ID：11104830
> 
> 赞同：2
> 
> 时间：2012-06-19T15:57:50.947
> 
> 标签：ssis, dll-reference

我正在尝试使用脚本组件向我的 SSIS 包（2012）添加 dll 引用。IntelliSense 为我工作，我在编码时看不到错误。但是，我收到以下错误：

无法加载文件或程序集“XYZ，版本=1.0.0.0，文化=中性，PublicKeyToken=XYZ”或其依赖项之一。该系统找不到指定的文件。

请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T18:52:18.390

如果这是一个自定义 DLL，那么您需要将它安装到 GAC（全局程序集缓存）中，以便它在 SSDT 之外运行。

[除非经过强签名](http://msdn.microsoft.com/en-us/library/xc31ft41.aspx)，否则无法将程序集安装到 GAC 中。签名后，从 Visual Studio 命令提示符下，注册看起来像`gacutil -if MyRadAssembly.dll`

# objective-c - 无论设备方向如何，在 SplitView 中隐藏主视图控制器

> ID：11104835
> 
> 赞同：3
> 
> 时间：2012-06-19T15:57:59.603
> 
> 标签：objective-c, ios, ipad, uisplitviewcontroller

我发现很多人询问有关如何以横向和纵向显示主视图的信息，但我想要做的是隐藏正确的主视图，无论设备方向如何并从通过使用导航栏按钮。

如果有人可以告诉我在设备重新定向时隐藏主视图的逻辑位于/执行的位置，那么对我有很大帮助。我一直在查看 Xcode 附带的模板，iOS 的主/详细视图，我注意到以下两个方法是在 AppDelegate.m 文件中声明的，但我似乎无法找出它们是从哪里执行的：

```
//Called when a button should be added to the nav bar for a view that is hidden
- (void)splitViewController:(UISplitViewController *)splitController willHideViewController: (UIViewController *)viewController withBarButtonItem:(UIBarButtonItem *)barButtonItem forPopoverController:(UIPopoverController *)popoverController
{
   barButtonItem.title = NSLocalizedString(@"Master", @"Master");
   [self.navigationItem setLeftBarButtonItem:barButtonItem animated:YES];
   self.masterPopoverController = popoverController;
}

- (void)splitViewController:(UISplitViewController *)splitController willShowViewController:(UIViewController *)viewController invalidatingBarButtonItem:(UIBarButtonItem *)barButtonItem
{
    // Called when the view is shown again in the split view, invalidating the button and popover controller.
    [self.navigationItem setLeftBarButtonItem:nil animated:YES];
    self.masterPopoverController = nil;
} 
```

所有帮助将不胜感激。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-19T20:36:13.033

您实际上无法控制 UISplitViewController。主视图始终存在于横向视图中，并且无法更改它。

然而，“Matt Gemmell 创建了一个名为 'MGSplitViewController' 的出色的自定义 splitViewController。它非常容易实现，大量评论，并包含许多普通 splitViewController 所没有的优秀功能（在横向视图上隐藏主视图，更改拆分的位置在横向视图中，允许用户在运行时流畅地更改拆分大小等）。”

信息和演示： http: [//mattgemmell.com/2010/08/03/mgsplitviewcontroller-updated/](http://mattgemmell.com/2010/08/03/mgsplitviewcontroller-updated/)

直奔源头：[https ://github.com/mattgemmell/MGSplitViewController/](https://github.com/mattgemmell/MGSplitViewController/)

-=-=-=-=-=-=-=-=-=-=-=-

我之前在一个类似（但不同）的问题中发布了这个，这里有相同的答案：

[如何在 ipad 的 UiSplitviewcontroller 中隐藏主视图](https://stackoverflow.com/questions/2700453/how-to-hide-master-view-in-uisplitviewcontroller-in-ipad/9829558#9829558)

-=-=-=-=-=-=-=-=-=-=-=-

更新：

在 iOS 5.0 及更高版本中，他们终于添加了在横向中隐藏主视图的功能！

```
-(BOOL)splitViewController:(UISplitViewController *)svc shouldHideViewController:(UIViewController *)vc inOrientation:(UIInterfaceOrientation)orientation 
{ 
    return YES; 
} 
```

参考： [Ipad 中的 splitViewController 不隐藏在纵向中](https://stackoverflow.com/questions/5246248/splitviewcontroller-in-ipad-that-doesnt-hide-in-portrait)

# input - 在 ColdFusion 中是否必须转义隐藏的输入字段？

> ID：11104837
> 
> 赞同：1
> 
> 时间：2012-06-19T15:58:03.257
> 
> 标签：input, coldfusion, hidden, html-escape-characters

使用 ColdFusion 8，我通常会像这样转义所有表单输入：

```
<input id="foo" value="#XMLFormat(trim( form_name.param_name ))#" /> 
```

那么隐藏输入呢？这些也应该逃脱吗？我没试过，但我可以很好地在 Firebug 中拉出一个隐藏的输入，输入任何内容并尝试提交，可以吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T16:05:41.990

在这种情况下转义的目标是保持 HTML 格式正确，所以是的 - 隐藏的变量也需要转义（或编码）。我通常为此使用 urlencodedformat()。考虑一下如果您放置在隐藏变量中的值是这样的变量会发生什么：

```
<cfset form.fullname= 'Bob "the tiger" Johnson'/>

<input type="hidden" name="fullname" value="#form.fullname#"/> 
```

输出实际上如下所示：

```
<input type="hidden" name="fullname" value="Bob "the Tiger" Johnson"/> 
```

这意味着您隐藏的 var 将以“Bob”的形式出现……而其余的将丢失。如果字符串的任何部分包含 HTML 或斜线或尖括号，情况可能会变得更糟。

# c - 运行 openmpi 时出现段错误

> ID：11104838
> 
> 赞同：2
> 
> 时间：2012-06-19T15:58:05.233
> 
> 标签：c, segmentation-fault, openmpi

我目前正在做一个项目，我需要使用 openmpi 实现并行 fft 算法。我有一段正在编译的代码，但是当我在集群上运行它时，我遇到了分段错误。

我对哪里出了问题有预感，但我认为我对指针和引用的理解还不够，无法进行有效的修复。

第一个可能出错的块是将数组传递给辅助函数。我相信要么我的循环不一致，要么我不明白如何传递这些指针并取回我需要的东西。

第二个可能的位置是在实际的 mpi_Send/Recv 命令中。我正在发送 openmpi c 数据类型不支持的类型，因此我使用 mpi_byte 类型来发送原始数据。这是一个可行的选择吗？或者我应该寻找这种方法的替代方法。

```
/* function declarations */
double complex get_block(double complex c[], int start, int stop);

double complex put_block(double complex from[], double complex to[], 
            int start, int stop);

void main(int argc, char **argv)
{
  /* Initialize MPI */
  MPI_Init(&argc, &argv);

  double complex c[N/p];
  int myid;
  MPI_Comm_rank(MPI_COMM_WORLD, &myid);
  //printf("My id is %d\n",myid);

  MPI_Status status;

  int i;
  for(i=0;i<N/p;i++){
    c[i] = 1.0 + 1.0*I;
  }

  int j = log(p)/log(2) + 1;
  double q;
  double complex z;
  double complex w = exp(-2*PI*I/N);
  double complex block[N/(2*p)]; // half the size of chunk c
  int e,l,t,k,m,rank,plus,minus;
  int temp = (log(N)-log(p))/log(2);
  //printf("temp = %d", temp);

  for(e = 0; e < (log(p)/log(2)); e++){
    /* loop constants */
    t = pow(2,e); l = pow(2,e+temp);
    q = n/2*l; z = cpow(w,(complex)q); 
    j = j-1; int v = pow(2,j);

    if(e != 0){
      plus = (myid + p/v)%p;
      minus = (myid - p/v)%p;
    } else {
      plus = myid + p/v;
      minus = myid - p/v;
    }

    if(myid%t == myid%(2*t)){
      MPI_Recv((char*)&c, 
           sizeof(c),
           MPI_BYTE,
           plus,
           MPI_ANY_TAG,
           MPI_COMM_WORLD,
           &status);

      /* transform */
      for(k = 0; k < N/p; k++){
    m = (myid * N/p + k)%l;
    c[k] = c[k] + c[k+N/v] * cpow(z,m);
    c[k+N/v] = c[k] - c[k + N/v] * cpow(z,m); 
    printf("(k,k+N/v) = (%d,%d)\n",k,k+N/v);
    }*/
      printf("\n\n");
      /* end transform */

      *block = get_block(c, N/v, N/v + N/p + 1);
      MPI_Send((char*)&block,
           sizeof(block),
           MPI_BYTE, 
           plus,
           1, 
           MPI_COMM_WORLD);
    } else {
      // send data of this PE to the (i- p/v)th PE
      MPI_Send((char*)&c,
           sizeof(c),
           MPI_BYTE,
           minus,
           1, 
           MPI_COMM_WORLD);
      // after the transformation, receive data from (i-p/v)th PE
      //      and store them in c:
      MPI_Recv((char*)&block,
           sizeof(block),
           MPI_BYTE,
           minus, 
           MPI_ANY_TAG, 
           MPI_COMM_WORLD,
              &status);

      *c = put_block(block, c, N/v, N/v + N/p - 1);
      //printf("Process %d send/receive %d\n",myid, plus);
    }
  }
  /* shut down MPI */
  MPI_Finalize();
}

/* helper functions */
double complex get_block(double complex *c, int start, int stop)
{
  double complex block[stop - start + 1];
  //printf("%d = %d\n",sizeof(block)/sizeof(double complex), sizeof(&c)/sizeof(double  complex));
  int j = 0;
  int i;
  for(i = start; i < stop+1; i++){
    block[j] = c[i];
    j = j+1;
  }
  return *block;
}

double complex put_block(double complex from[], double complex to[], int start, int stop)
{  
  int j = 0;
  int i;
  for(i = start; i<stop+1; i++){
    to[i] = from[j];
    j = j+1;
  }
  return *to;
} 
```

我非常感谢您的反馈！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T17:22:48.130

您以错误的方式使用数组/指向数组的指针。例如，您将数组声明为双复数块 [N]，这很好（虽然不常见，但在大多数情况下最好使用 malloc），然后您通过 MPI_Recv(&block) 接收到它。但是“block”已经是指向该数组的指针，因此通过编写“&block”，您将指针的指针传递给 MPI_Recv。这不是它所期望的。如果你想使用“&”符号，你必须写 &block[0]，它会给你指向块数组第一个元素的指针。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T16:44:53.753

你试过调试你的代码吗？这在并行设置中可能会很痛苦，但它可以准确地告诉您失败的位置，通常还会告诉您失败的*原因*。

如果您使用的是 Linux 或 OS X，则可以在命令行上按如下方式运行代码：

```
mpirun -np 4 xterm -e gdb -ex run --args ./yourprog yourargs 
```

我假设`yourprog`是您的程序的名称，并且`yourargs`是您要传递的任何命令行参数。

该命令将启动四个`xterm`窗口。每个都`xterm`将依次`gdb`按照 option 的指定启动`-e`。然后将执行选项指定`gdb`的命令，并使用给定的选项启动可执行文件，如.`run``-ex``--args`

你得到的是四个`xterm`与 MPI 并行运行程序的四个实例的窗口。如果任何实例崩溃，`gdb`将告诉您在哪里以及为什么。

# controls - SWT：在给定复合控件的部分上绘制，例如表头或组合按钮

> ID：11104844
> 
> 赞同：0
> 
> 时间：2012-06-19T15:58:18.920
> 
> 标签：controls, swt, paint

标题是不言自明的，我目前正在`PaintListener`为我想绘制的控件的所有子项、孙子项等添加 s。目前我有`Table`s 和`Combo`s 的图形错误，PaintListener 显然不适用于组合中的标题或按钮。

我怎样才能做到这一点？

这是我用来添加侦听器的代码：

```
List<Control> controls = Lists.newArrayList();
controls.add(composite);

while (! controls.isEmpty()) {

    Control c = controls.remove(0); 
    if (c instanceof Composite) {
        controls.addAll(Arrays.asList(((Composite) c).getChildren()));
    }

    c.addPaintListener(new ControlPaintListener());
} 
```

# agile - 检查敏捷资格标准列表

> ID：11104849
> 
> 赞同：0
> 
> 时间：2012-06-19T15:58:39.903
> 
> 标签：agile, scrum

有没有人有任何关于项目敏捷资格标准的好文件？也许是在项目开始之前识别机会和风险的清单。

谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T15:35:52.597

简短的回答是：如果您的项目是以下所有内容：

*   短期（根据经验，不超过一个月）
*   简单（关于该项目的所有信息目前都是已知的）
*   直截了当（交付后，将没有未来的开发/维护）

那你*可以*考虑**不做**敏捷了！

在所有其他情况下，以敏捷的方式开发项目将为您提供很好的服务。

从小型初创公司到大型跨国公司（例如微软），越来越多的公司正在实施敏捷思维和方法。

从小客户到中型金融机构再到大型金融机构（例如美国国防部），越来越多的客户正在接受、鼓励甚至**要求**灵活、渐进的交付和开放可见的开发项目。

不过，要理解的重要一点是，对敏捷是什么和不是什么的看法通常是错误的。例如，不计划或不记录是，尽管普遍认为**不敏捷**。

我的建议是首先**确保您了解敏捷的真正含义**。这里有一些很好的资源：

*   敏捷[宣言](http://www.agilemanifesto.org)（重要提示：虽然*左边*的东西更重要，但我们**仍然重视***右边*的东西）。
*   Scrum.org 的[Scrum 指南](http://www.scrum.org/storage/scrumguides/Scrum_Guide.pdf)
*   丽莎·阿德金斯的[博客](http://www.coachingagileteams.com/what-is-agile/)
*   如果您原谅我自己的无耻插件，您也可以阅读我的[博客](http://www.softwareandi.com)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T01:46:25.060

他们是这样的：

*   [http://pm.versionone.com/AgileChecklist.html](http://pm.versionone.com/AgileChecklist.html)

*   [http://standard-data-systems.net/Project_Checklist/Agile%20Audit.pdf](http://standard-data-systems.net/Project_Checklist/Agile%20Audit.pdf)

此外，您可以在 Google 上搜索：敏捷项目清单。

祝你好运。

# scala - Lift 中记录字段的临时验证

> ID：11104850
> 
> 赞同：5
> 
> 时间：2012-06-19T15:58:40.637
> 
> 标签：scala, mongodb, lift

我正在我的电梯应用程序中开发我的用户类，并开发了两种形式，一种用于用户注册，一种用于用户登录。

我有以下用户类：

```
class MongoUser private () extends MongoRecord[MongoUser]
  with MongoId[MongoUser] {

    def meta = MongoUser

    object firstname extends StringField(this, "")
    object lastname extends StringField(this, "")
    object password extends PasswordField(this, "")
    object email extends EmailField(this, 90)
    object business extends StringField(this, "")

    /*
    * validation method for checking email is unique
    */
    protected def emailUnique(emailVal:String) = {
      meta.findAll("email", emailVal) match {
        case Nil => Nil
        case _ => List(FieldError(email, "Email should be unique"))
      }
    }
} 
```

以及以下两个屏幕：

```
object SignupWizard extends Wizard {
  object user extends WizardVar(MongoUser.createRecord)

  val person = new Screen {

    addFields(() => user.is.firstname)
    addFields(() => user.is.lastname)
    addFields(() => user.is.password)
    addFields(() => user.is.email)

    override def nextScreen = {
      //user.is.save 
      business
    }
  }

  val business = new Screen {
    addFields(() => user.is.business)
  }

  def finish() {
    user.is.save
  }

}

/*
 *Screen for user login
 */

object LoginScreen extends LiftScreen {
  object user extends ScreenVar(MongoUser)

  addFields(() => user.is.email)
  addFields(() => user.is.password)

  def finish() {
    S.notice(
      user.is.login(
        user.email.toString,
        user.password.toString).toString)
    }

} 
```

我需要确保在 SignupWizard 屏幕中，电子邮件地址是唯一的。我可以通过更改 MongoUser 类中的电子邮件字段来做到这一点，如下所示：

```
object email extends EmailField(this, 90) {
      override def validations = {
        emailUnique _ ::
        super.validations
      }
 } 
```

但这现在意味着验证规则也适用于登录，这显然不是我想要的。

问题：在不同屏幕中向我的 MongoUser 字段添加临时验证规则的最有效方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-10T01:06:11.070

根本不要将验证放在记录中，并在向导中使用自定义字段：

```
object wizard extends Wizard {
   // don't add the email field with addField()
   val email = field("Email", user.is.email.is, trim, emailUnique _, ...)
} 
```

# jquery-ui - jquery ui可拖动禁止在元素上

> ID：11104862
> 
> 赞同：1
> 
> 时间：2012-06-19T15:59:24.440
> 
> 标签：jquery-ui, draggable

我正在使用 jquery ui 可拖动，我不想让用户将助手拖到另一个元素上，我该怎么做？我不能使用 snapMode:outer。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T16:36:59.213

为此，您可以使用[revert draggable 选项。](http://jqueryui.com/demos/draggable/#option-revert)

如果您将其设置为`"valid"`，则如果助手被放置在可放置的小部件上，则拖动操作将被恢复。这意味着您只需围绕其他元素创建这样的小部件：

```
$("#yourDraggableElement").draggable({
    revert: "valid"
});

$("#yourOtherElement").droppable(); 
```

# facebook - 2 个相同的类似按钮——1 个计数器增量，第 2 个计数器不增加

> ID：11104864
> 
> 赞同：2
> 
> 时间：2012-06-19T15:59:27.190
> 
> 标签：facebook, facebook-like

我在下面的 2 个 URL 上运行了[http://developers.facebook.com/tools/debug 。](http://developers.facebook.com/tools/debug)两个调试测试结果都返回了相同的结果。

当您单击`Share This Story`下面第一个链接上的按钮时，它会增加并保持正常。

当您单击`Share This Video`下面第二个链接上的按钮时，它会增加但不会粘住。

两页后面的代码是相同的。

有谁知道为什么第二个喜欢按钮不会保留其增量计数器？

```
http://www.robertlanza.com/does-death-exist-new-theory-says-no-2/  (Like incrementing works)

http://www.robertlanzabiocentrism.com/video/wormhole/  (Like incrementing doesn't work) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T16:54:09.317

尝试将链接创建从 更改`video/wormhole/`为`video-wormhole/`。`video/`我敢打赌，当 facebook没有在服务器上查找时，存在路径解析问题。我注意到您的所有其他链接都不遵循此`/`约定，因此为了保持一致性，我将路径更改为`-`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T16:59:06.460

“不起作用”是什么意思？当我测试它们时，它们似乎都能正常工作。

# php - 在 PHP mvc 中路由 url 的最有效方法？

> ID：11104865
> 
> 赞同：4
> 
> 时间：2012-06-19T15:59:27.377
> 
> 标签：php, model-view-controller, oop, .htaccess

我正在开发一个**简单**的php mvc，它可以做最少的工作，但也可以按照我的需要工作，这是我第一次在程序上使用 mvc 方法，所以我边走边学..

在开发过程中，我不小心以一种奇怪的风格创建了它，目前主要`.htaccess`包含几乎所有的物理重写，例如论坛是：

```
RewriteRule ^forum/([a-zA-Z0-9_]+)_([0-9]+)/$                    index.php?controller=forum&method=showThread&urlTitle=$1&threadId=$2 [L] 
RewriteRule ^forum/([a-zA-Z0-9_]+)_([0-9]+)/all/([0-9]+)$        index.php?controller=forum&action=showThread&urlTitle=$1&threadId=$2&page=$3 [L] 
```

目前它的工作原理是所有 url 都被定向到 index.php，然后它从 url 中获取要使用的控制器和方法，使用：

**索引.php**

```
$actionName = $_GET['action'];
$controllerName = ucfirst(strtolower($_GET['type'])).'controller';

$controller = new $controllerName;
$controller->$actionName(); 
```

**控制器/论坛控制器.php**

```
class forumcontroller{

    function showThread() {

        $thread = new Thread($_GET['threadId'], $_GET['uriTitle']); 
        require "templates/thread.php";
    } 
```

但这意味着用户有可能去我不希望他们也有访问权限的位置，例如：

```
/public_html/templates/index.php 
```

**我认为我需要什么？**

我认为主要的 .htaccess 应该看起来像这样？

```
RewriteEngine on

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d

RewriteRule ^(.*)$ index.php?url=$1 [L,QSA] 
```

然后在 index.php 你会使用类似的东西：

```
$url = explode("/", `$_SERVER['QUERY_STRING']);`

$controller = $url[0];   //Returns "forum"
$data = $url[1];         //Returns the forum title and id 
```

但是使用这种方法，我不明白您如何仅使用数据调用控制器内部的操作？

您是否不必执行以下操作：

```
 if(!$data)
     $controller->loadForum();
 elseif($data)
     $controller->loadForumThread($data); 
```

**结论**

我只是不明白如何最好地为一个有很多不同格式的 seo 友好 url 的站点进行路由，我了解 mvc 应该如何工作，但我正在努力掌握路由部分和我来的所有示例对面似乎极其复杂！

我真的很难看到如何编写`.htaccess`和控制器来处理大量不同格式的 url，如下所示：

```
domain.com
domain.com/uploads
domain.com/profiles/username
domain.com/messages/inbox
domain.com/messages/createnew/userId
domain.com/forum/all/2
domain.com/forum/title_1/
domain.com/forum/title_1/all/3 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T16:14:06.590

这是一种类似于您的第二个 .htaccess 示例的方法。

```
$request = explode('/', substr($_SERVER['REQUEST_URI'], 1));
// Clean request array of empty elements
foreach($request as $k => $v)
    // Clear any empty elements
    if(!$v) unset($request[$k]);
$request = array_values($request);  // Renumber array keys 
```

这给出了一个数字索引数组，表示请求的 URI。应用程序可以假设请求中的第一个值是控制器的名称：

```
if(count($this->request) == 0) 
    $request[] = 'DefaultController';  // Responsible for homepage
$this->controller = new $request[0]( $request ); 
```

我还将一个`$context`变量传递给控制器​​构造函数，但这超出了这个问题的范围（它负责数据库连接、当前用户数据和会话数据）。

之后，它只是发送请求：`$this->controller->dispatch()`

在 dispatch 方法内部，控制器自己知道请求数组。例如，在您的 URL 列表中，让我们看一下第三个示例`domain.com/profiles/username`：

控制器将被命名为“配置文件”：

```
class Profiles {
    private $request, $context;
    public function __construct($request, $context) {
        $this->request = $request;
        $this->context = $context;
    }

    public function dispatch() {
        if(count($this->request) == 2 && $this->request[1] == 'username') {
            // Load data from model for the requested username ($this->request[1])

            // Show View
        }
    }
} 
```

有更好的方法可以将请求向量映射到操作，但希望你能明白这一点。

# html - li 内的 CSS 垂直对齐锚点 - IE8/IE9 问题

> ID：11104866
> 
> 赞同：1
> 
> 时间：2012-06-19T15:59:32.360
> 
> 标签：html, css, internet-explorer, internet-explorer-8, internet-explorer-9

我最近在 IE8/IE9 中遇到了一个令人讨厌的问题（令人惊讶的是，它应该在 IE7 中对齐）。请查看[http://targettedmedia.co.uk/httpdocs](http://targettedmedia.co.uk/httpdocs)

正如您在 Firefox/Chrome 或其他现代浏览器中看到的那样，将鼠标悬停在顶部菜单上时，子菜单项应垂直居中（无论是一行还是两行）。然而，在 IE8 和 IE9 中它只是不想工作。我尝试编辑代码但无济于事。

你能帮我么？处理它太令人沮丧了。我真诚地提前感谢您！

这是一个示例 HTML 子菜单结构：

```
<ul id="nav" class="dropdown dropdown-horizontal">
    <li><a href="#">Health &#038; Safety Courses</a>
        <ul class="sub-menu">
            <li><a href="#">NEBOSH National Diploma</a></li>
            <li><a href="#">NEBOSH Construction Certificate</a></li>
            <li><a href="#">NEBOSH Fire Certificate</a></li>
            <li><a href="#">NEBOSH Distance Learning Couse</a></li>
            <li><a href="#">IOSH Managing Safely</a></li>
            <li><a href="#">IOSH Working Safely</a></li>
            <li><a href="#">Site Managers Safety Training Scheme</a></li>
            <li><a href="#">Health &#038; Safety Awareness for Employees</a></li>
            <li><a href="#">Health &#038; Safety Awareness for Managers</a></li>
        </ul>
    </li>
</ul> 
```

以下是处理垂直对齐的特定 CSS 位：

```
ul.dropdown ul {
 width:400px;
 padding:20px 0 25px 7px;
 background:#6c6c6c;
 font-size:14px;
 font-weight:normal;
}

    ul.dropdown ul li {
     font-weight: normal;
     height:42px;
     line-height:42px;
     float:left;
     margin:0 0 0 15px;
     border-top:1px solid #484848;
    }

    ul.dropdown ul li a:link {
        display:inline-block;
        width:165px;
        padding:0;
        color:#fff;
        text-align:left;
        line-height:normal;
        vertical-align:middle;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T16:56:28.643

避免依赖vertical-align: middle，因为许多浏览器不支持它。相反，删除所有的填充和边距，并为其本身`ul.dropdown ul li a:link`添加填充。`<li>`如果您在顶部和底部添加相等的填充（我也会在 em 中进行填充，这样无论您的用户将文本设置为什么大小，填充率看起来都是一样的）它将在周围相等。

```
ul.dropdown ul li {
    border-top: 1px solid #484848;
    float: left;
    font-weight: normal;
    height: 2em;
    margin: 0 0 0 15px;
    padding: 1em 0;
}

ul.dropdown ul li a {
    color: #FFFFFF;
    padding: 0;
    text-align: left;
    width: 165px;
} 
```

# version-control - 在源代码控制中存储自动化测试的位置

> ID：11104870
> 
> 赞同：4
> 
> 时间：2012-06-19T15:59:51.307
> 
> 标签：version-control, tfs, automated-tests

我的公司最近开始了解 TFS、源代码控制和分支策略的使用情况。我们当前的分支策略是基本的“Dev > Main > Release”方法，这对我们的小团队很有效。但是，问题在于我们的自动化测试。我们所有的集成测试和 UI 测试都是用 C# 编写的，并在每晚的构建过程中执行。为了保持源代码的清洁和保存完好，我们应该将自动化测试代码放在哪里？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-19T17:18:44.747

您可以将自动化测试放在每个分支内。您的自动化测试可以像常规代码一样被合并和处理，因为它会随着新的开发而改变。

另一个选项可能是您将其放置在您的项目构建类型和构建文件所在的位置。

确保将其签入源代码管理非常重要。

# iphone - 我想更改在运行时创建的 uilabel 的文本

> ID：11104874
> 
> 赞同：0
> 
> 时间：2012-06-19T16:00:00.307
> 
> 标签：iphone, xcode

**请我想更改**我在单击方法中的 for 循环中创建的任何 lbl 的文本，例如我想更改第二个 lbl 的文本。如果有任何方法可以通过标签值访问 uilabel。

```
for(int i=1,i<5,i++){
UILabel *lbl=[[UILabel alloc]initWithframe:GCrectMake(0,0,50,50)];
lbl.tag=i;
lbl.text=@"Quan:0";
[self.view addSubview:lbl];
}
-(void)click:(id)sender{
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T16:06:08.233

您只需拨打电话，它就会返回您的标签。

```
UILabel *lbl = (UILabel *)[self.view viewWithTag:(int)]; 
```

# sql - SQL 结果为单行

> ID：11104876
> 
> 赞同：0
> 
> 时间：2012-06-19T16:00:14.490
> 
> 标签：sql, database, oracle10g

下面是我的表格脚本和记录。

```
create table prods
(prod_no varchar2(12));

insert into prods
values('MOBILE');

insert into prods
values('LAPTOP'); 
```

`select prod_no from prods;`给我

```
MOBILE
LAPTOP. 
```

我怎样才能得到如下结果？

`MOBILE LAPTOP`. 我希望将两条记录放在一行中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T16:57:29.143

```
create table prods
(prod_no varchar2(12));

insert into prods
values('MOBILE');

insert into prods
values('LAPTOP');

select 
   rtrim (xmlagg (xmlelement (e, prod_no || ' ')).extract ('//text()'), ' ') list
from 
prods;

LIST                                                                            
---------------------------------------------------------
MOBILE LAPTOP                                                                   
1 row selected. 
```

SQLFIDDLE：[链接](http://www.sqlfiddle.com/#!4/24337/7)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T16:33:49.023

我认为您需要旋转表格。浏览以下网址

访问：http: [//blogs.msdn.com/b/spike/archive/2009/03/03/pivot-tables-in-sql-server-a-simple-sample.aspx](http://blogs.msdn.com/b/spike/archive/2009/03/03/pivot-tables-in-sql-server-a-simple-sample.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T17:08:52.087

试试这个：

```
--Transact-SQL
--In this case, store in the variable varchar values
declare @result varchar(max) = '';

select @result = @result + prod_no + ' ' from prods;

select @result; 
```

# java - Java第一个GUI，两个类

> ID：11104877
> 
> 赞同：2
> 
> 时间：2012-06-19T16:00:14.953
> 
> 标签：java, swing, user-interface, jtextfield, jcheckbox

我正在尝试使用 Window Builder 用 Ja​​va 编写我的第一个 GUI 类。好的，GUI 已经准备好，但还没有任何功能（它包含 10 个复选框（是的，它们都是必需的）和 2 个按钮和一个 JTextField，所以没什么特别的）。所以我只是将复选框和按钮拖放到窗口中，我还没有编写任何代码。

我有两个类： GUI.java -> 仅用于布局 Main.java -> 应该从 GUI.java 获取“输入”

现在用户应该选中或取消选中复选框，然后最后按下按钮。

但是，如果复选框被选中，我如何“读出” - 我有两个班级？

我必须补充一点，我是 Java 的初学者，尤其是 GUI 编程的初学者，但我只想学习它。我很乐意收到一些帮助，但不是完整的代码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T16:05:13.793

基本上，您从 Main.java 实例化您的 GUI 对象。然后您可以访问此 GUI（假设您有 setter/getter-methods 或 GUI 中的组件是公共的）。在 GUI 构造器中，您调用所有构建器方法，因此当您`new GUI()`从 Main.java 调用时，您将 a) GUI 运行，b) 从 Main.java 访问它

对于您对复选框的具体问题，您可以致电

```
nameOfCheckbox.isSelected() 
```

无论复选框是否被选中，它都会返回一个布尔值。

反之亦然：由于您的 Main.java 具有（或应该具有）静态方法（如 main-method），因此您可以简单地`Main.anyMethodName()`从 GUI.java 调用（假设 this anyMethod 是`static`）并将数据从“可视区域”传递到“逻辑区域”（建议尽可能将这两个组件分开）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T16:11:45.253

我知道你说你不想要完整的代码，但这不是真的，只是你想做的一个非常基本的工作演示

![在此处输入图像描述](../Images/c52f1cb1d0c95d3799c93fa47879d3c8.png)

**桂.java**

```
import java.awt.event.ActionListener;
import javax.swing.JButton;
import javax.swing.JCheckBox;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;

public class Gui {
JFrame frame;
JButton button;
JCheckBox checkBox;
JLabel label;

public Gui() {
    frame = new JFrame("demo");
    button = new JButton("is it checked?");
    checkBox = new JCheckBox();
    label = new JLabel("no");
    JPanel panel = new JPanel();
    panel.add(checkBox);
    panel.add(button);
    panel.add(label);
    frame.add(panel);
    frame.pack();
    //frame.setSize(200, 60);
    frame.setResizable(false);
    frame.setLocation(400, 400);
    frame.setVisible(true);
}

// method to add an action listener to the gui's
// private button
public void setButtonActionListener(ActionListener al) {
    button.addActionListener(al);
}

// gui method to check if box is checked
public boolean isBoxChecked() {
    return checkBox.isSelected();
}

// method to set lable
public void setText(String text) {
    label.setText(text);
}

} 
```

**主.java**

```
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

public class Main {

public static void main(String[] args) {

    // create an instance of your gui class
    final Gui gui = new Gui();

    // add the action listener to the button
            // notice how we reference the gui here by running the methods in the
            // gui class
            // this action listener could be created in the gui
            // class but in general you don't want to do that because actions will 
            // involve multiple classes
    gui.setButtonActionListener(new ActionListener() {
        @Override
        public void actionPerformed(ActionEvent arg0) {
            gui.setText((gui.isBoxChecked() ? "yes" : "no"));
        }
    });
} 
```

}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T16:10:07.127

假设您的复选框是一个名为“myCheckBox”的对象，您可以使用以下方法检查它是否被选中：

```
myCheckBox.isSelected() 
```

如果复选框被选中，则返回 true。

我建议您查看有关如何使用各种 GUI 组件的 Java 教程，例如： [http ://docs.oracle.com/javase/tutorial/uiswing/components/button.html](http://docs.oracle.com/javase/tutorial/uiswing/components/button.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-19T16:06:09.323

附上一个`ItemListener`.

您可以使用以下行来确定该框是上升（未选中到选中）还是下降（选中到未选中）`itemStateChanged(ItemEvent e)`

```
boolean selected = e.getStateChange() == ItemEvent.SELECTED; 
```

要确定是否在不更改时检查它，只需使用`isSelected()`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-19T16:06:14.753

要么这样：

```
checkbox.isSelected(); 
```

或者这将是 Itemlistener 的一种方式，如果有变化，它将被调用：

```
checkbox.addItemListener(new ItemListener() {

        @Override
        public void itemStateChanged(ItemEvent e) {
            if (e.getStateChange() == ItemEvent.DESELECTED) {
                foo = false;

            } else {
                foo = true;
            }
        }
    }); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-19T16:07:07.763

You could expose all of your gui objects as fields in your gui class

```
public JTextField getNameTextField() {
    return nameTextField;
}

public JCheckBox getCheckBox1() {
    return checkBox1;
} 
```

and then in main:

```
if (gui.getCheckBox1().isSelected())
    // do stuff 
```

# asp.net-mvc-4 - mvc4 捆绑强类型捆绑包

> ID：11104879
> 
> 赞同：5
> 
> 时间：2012-06-19T16:00:16.207
> 
> 标签：asp.net-mvc-4, strong-typing, bundling-and-minification, asp.net-optimization

所以 MVC 4 引入了脚本和样式捆绑。这允许这样做：

```
public static void RegisterBundles(BundleCollection bundles)
    {
    bundles.Add(new ScriptBundle("~/bundles/mobile").Include(
                    "~/Scripts/jquery.mobile-*")); 
```

然后在像这样的剃刀视图中使用：

```
@Scripts.Render("~/bundles/mobile") 
```

我的问题是为什么我必须输入`"~/bundles/mobile"`？有没有办法获得智能以获取强类型对象？否则我必须去查一下以确保我称它为同一个东西。

我想做这样的事情：（我知道这不会编译，这只是一个例子）

```
public static void RegisterBundles(BundleCollection bundles)
    {
    Bundle mobile = new Bundle("mobile");
    mobile.AddFile("w/e")
    bundles.Add(mobile);

//in page:
 @Scripts.Render(BundleConfig.mobile) 
```

或有影响的东西。

**编辑**：答案很简单。正如所`@Hao Kung`指出的，`@Styles.Render`只需要一个 url 字符串路径。我创建了一个类来保存路径。

```
public class bundles
{
    #region Javascript
    public static string scripts = "~/bundles/scripts";
    ...
    #endregion

    #region CSS

    public static string css = "~/Content/css";
    public static string jqueryUi = "~/Content/themes/base/css";
    ...
    #endregion
} 
```

在任何页面中，您只需执行

```
@Styles.Render(bundles.jqueryUi) 
```

你有它。您需要付出一些额外的努力，但至少现在它是强类型的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T22:10:19.983

Render Scripts/Styles Render helper 不限于渲染对包的引用，它们解析任何 url，因此帮助器检测您的意思是引用包的唯一方法是传入包的虚拟路径。

# javascript - JQuery if 语句根据在文本中包含特定字符串将数据附加到相应的 DIV

> ID：11104880
> 
> 赞同：0
> 
> 时间：2012-06-19T16:00:17.330
> 
> 标签：javascript, jquery, html

当我提交表单时，根据数据中的文本，我希望 JQuery 将数据附加到正确的 DIV。我在 blah.php 页面上进行了一系列验证检查。如果验证失败，则返回一条消息。如果验证成功，则返回包含“img src”（即）的文本。

因此，如果“数据”中返回的文本包含“img src”，我希望将数据附加到 blahupdate div。如果“数据”在其文本中不包含“img src”，我希望将数据附加到 blaherror div。

下面是我到目前为止的代码

```
<form id="blahform" method="post" enctype="multipart/form-data" action="blah.php">
<input type="file" name="blahfile" />
<button id="blahbutton">Upload</button>
</form>

<div id="blaherror"></div>

<div id="blahupdate"></div>

$('#blahbutton').click(function(){
    $('#blaherror').empty();

    $('#blahform').ajaxForm(function(data, textStatus){

        if ($('data:contains("img src")')){
            $('#blahupdate').append(data);
        }else{
            $('#blaherror').append(data);
        }

     });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T16:04:29.877

我假设这`data`是一个字符串，但我认为以下应该有效：

```
if (data.indexOf('img src') > -1){
    $('#blahupdate').append(data);
}
else {
    $('#blaherror').append(data);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T16:04:47.327

如果 data 只是一个字符串（不是 JSON 对象），请使用正则表达式对其进行测试：

```
$('#blahform').ajaxForm(function(data, textStatus){
    if (/img src/.test(data)){
        $('#blahupdate').append(data);
    }else{
        $('#blaherror').append(data);
    }
}); 
```

# java - 如何创建具有最大文件大小限制的 java zip 存档

> ID：11104889
> 
> 赞同：3
> 
> 时间：2012-06-19T16:01:10.013
> 
> 标签：java, zip

我需要在java中编写一个算法（对于一个android应用程序）来读取一个包含更多文件夹的文件夹以及每个包含图像和音频文件的文件夹，所以结构是这样的：`mainDir/categorySubfolder/myFile1.jpg`

我的问题是我需要将存档的大小限制为 16mb，并在运行时根据需要创建尽可能多的存档以包含我的主`mainDir`文件夹中的所有文件。

我从网上尝试了几个示例，并阅读了 java 文档，但我无法理解并按照我需要的方式将它们组合在一起。以前有人这样做过，或者有一个链接或一个例子给我吗？

我用递归方法解决了文件的读取问题，但我无法编写 zip 创建的逻辑。

我愿意提供建议或更好的工作示例。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-09-16T23:22:09.957

[zip4j](http://www.lingala.net/zip4j/)是一个很棒的库，可以创建多部分的 zip 文件。

```
net.lingala.zip4j.core.ZipFile zipFile = new ZipFile("out.zip");
ZipParameters parameters = new ZipParameters();
parameters.setCompressionMethod(Zip4jConstants.COMP_DEFLATE);
parameters.setCompressionLevel(Zip4jConstants.DEFLATE_LEVEL_NORMAL);
zipFile.createZipFileFromFolder("path/to/source/dir", parameters, true, maximum size); 
```

您可以在他们的网站上找到更多示例。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-11-06T11:01:29.397

我正在使用下面的代码/类来拆分和压缩大量/大小的文件。我已经在下面测试了这个类

*   未压缩文件数：116
*   总大小（未压缩）：29.1 GB
*   **ZIP 文件大小限制（每个）：3 GB** [MAX_ZIP_SIZE]
*   总大小（压缩）：7.85 GB
*   ZIP 文件数（拆分为**MAX_ZIP_SIZE**）：3

您必须将**MAX_ZIP_SIZE**的值更改为 16(MB) *1024* 1024=16777216-22(zip header size)= **16777194**。
在我的代码中，MAX_ZIP_SIZE 设置为 3 GB（[ZIP 对各种事物的限制为 4GB](https://en.wikipedia.org/wiki/Zip_(file_format)#ZIP64)）。

> 最终长 MAX_ZIP_SIZE = 3221225472L；//3 GB

```
package com.company;

import java.io.FileInputStream;
import java.io.FileNotFoundException;
import java.io.FileOutputStream;
import java.io.IOException;
import java.util.zip.ZipEntry;
import java.util.zip.ZipOutputStream;

public class QdeZip {

    public static String createZIP(String directoryPath, String zipFileName, String filesToZip) {
        try {
            final int BUFFER = 104857600; // 100MB
            final long MAX_ZIP_SIZE = 3221225472L; //3 GB
            long currentSize = 0;
            int zipSplitCount = 0;
            String files[] = filesToZip.split(",");
            if (!directoryPath.endsWith("/")) {
                directoryPath = directoryPath + "/";
            }
            byte fileRAW[] = new byte[BUFFER];
            ZipOutputStream zipOut = new ZipOutputStream(new FileOutputStream(directoryPath + zipFileName.toUpperCase()));
            ZipEntry zipEntry;
            FileInputStream entryFile;
            for (String aFile : files) {
                zipEntry = new ZipEntry(aFile);
                if (currentSize >= MAX_ZIP_SIZE) {
                    zipSplitCount++;
                    //zipOut.closeEntry();
                    zipOut.close();
                    zipOut = new ZipOutputStream(new FileOutputStream(directoryPath + zipFileName.toLowerCase().replace(".zip", "_" + zipSplitCount + ".zip").toUpperCase()));
                    currentSize = 0;
                }
                zipOut.putNextEntry(zipEntry);
                entryFile = new FileInputStream(directoryPath + aFile);

                int count;
                while ((count = entryFile.read(fileRAW, 0, BUFFER)) != -1) {
                    zipOut.write(fileRAW, 0, count);

                    //System.out.println("number of Bytes read = " + count);
                }
                entryFile.close();
                zipOut.closeEntry();
                currentSize += zipEntry.getCompressedSize();
            }

            zipOut.close();
            //System.out.println(directory + " -" + zipFileName + " -Number of Files = " + files.length);
        } catch (FileNotFoundException e) {
            return "FileNotFoundException = " + e.getMessage();
        } catch (IOException e) {
            return "IOException = " + e.getMessage();
        } catch (Exception e) {
            return "Exception = " + e.getMessage();
        }

        return "1";
    }
} 
```

> 我已将所有*异常消息*作为字符串返回以使用它。这是我自己与项目有关的案例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T12:38:17.200

As far as I can see [How to split a huge zip file into multiple volumes?](https://stackoverflow.com/questions/243992/how-to-split-a-huge-zip-file-into-multiple-volumes) just suggests keeping track of the archive size so far, and when it approaches some arbitrary value (which should be lower than your max), it'll decide to start a new file. So for a 16MB limit, you could set the value to 10MB and start a new zip whenever this is reached, but if you reach 9MB and your next file zips down to 8MB, you'll end up with a zip bigger than your limit.

The code given in that post didn't seem to work for me because 1) it got the size before the ZipEntry was created, so it was always 0 and 2) it didn't write out any zip :-) If I've got that wrong - let me know.

The following works for me. For simplicity, I've taken it out of the Wrapper and just have it all in main(String args[]). There are many, many ways this code could be improved :-)

```
import java.io.FileInputStream;
import java.io.FileOutputStream;
import java.io.IOException;
import java.util.zip.Deflater;
import java.util.zip.ZipEntry;
import java.util.zip.ZipOutputStream;

public class ChunkedZipTwo {

    static final long MAX_LIMIT = 10 * 1000 * 1024; //10MB limit - hopefully this 

    public static void main(String[] args) throws Exception {
        String[] files = {"file1", "file2", "file3"};
        int i = 0;
        boolean needNewFile = false;
        long overallSize = 0;
        ZipOutputStream out = getOutputStream(i);
        byte[] buffer = new byte[1024];

        for (String thisFileName : files) {
            if (overallSize > MAX_LIMIT) {
                out.close();
                i++;
                out = getOutputStream(i);
                overallSize = 0;
            }

            FileInputStream in = new FileInputStream(thisFileName);
            ZipEntry ze = new ZipEntry(thisFileName);
            out.putNextEntry(ze);
            int len;
            while ((len = in.read(buffer)) > 0) {
                out.write(buffer, 0, len);
            }
            out.closeEntry();
            in.close();
            overallSize += ze.getCompressedSize();
        }
        out.close();
    }

    public static ZipOutputStream getOutputStream(int i) throws IOException {
        ZipOutputStream out = new ZipOutputStream(new FileOutputStream("bigfile" + i + ".zip"));
        out.setLevel(Deflater.DEFAULT_COMPRESSION);
        return out;
    }
} 
```

# c# - 使用结构而不是类的 EntityFramework SqlQuery 失败并出现 ArgumentException

> ID：11104892
> 
> 赞同：2
> 
> 时间：2012-06-19T16:01:15.487
> 
> 标签：c#, entity-framework

我正在开发一个 EntityFramework 应用程序，并且在使用结构而不是带有 Database.SqlQuery 的类时遇到了问题。

该结构如下所示：

```
internal struct Column
{
    public int object_id { get; set; }
    public string name { get; set; }
} 
```

对 SqlQuery 的调用如下所示：

```
using (var db = new DbContext("ConnectionString"))
{
    var columns = db.Database.SqlQuery<Column>(query);
    DoSomething(columns.ToList()); // Exception thrown here
} 
```

当 Column 是结构时，我收到带有消息“'MyService.Column' 类型的表达式不能用于返回类型'System.Object'”的 ArgumentException。我把它改成了一个类，它工作正常。

我很高兴在这里使用一个类，但我想知道为什么以这种方式使用结构会失败。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T16:14:57.980

EntityFramework 为您的数据提供面向对象的表示。因此，结果需要是一个对象，因为它必须保持状态。如果使用结构，则每次在方法之间传递列时都会复制数据，这是没有意义的，因为它代表数据库中的相同值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T16:09:57.620

结构不是对象，EF 希望将列作为 Object 基类型返回。

# jquery - 从电子邮件中单击时如何触发fancybox在网页上打开？

> ID：11104894
> 
> 赞同：0
> 
> 时间：2012-06-19T16:01:21.307
> 
> 标签：jquery, fancybox

我正在使用花哨的框来弹出 youtube 视频。它现在的工作方式是有一个图形，您可以单击它来播放视频，它会打开 youtube 视频的弹出框。它工作正常，但我的问题是我正在创建一个将发送的 html 电子邮件，它将具有相同的图形“点击我观看视频”。

我希望它转到网页并在用户从电子邮件中单击该图形时弹出视频的精美框。

有没有办法设置链接的 href 以便它启动花哨的框来打开和加载 youtube 视频？

我不希望在此页面的页面加载时弹出这个花哨的框，我只是希望它在您从电子邮件中单击它时触发打开。

这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T16:13:47.573

您必须在 url 中放置一个特殊的参数，并且仅当参数存在时才在您的 javascript 中触发 fancybox。

链接网址：

```
http://yoururl.com/#showfancybox 
```

Javascript：

```
if(window.location.hash == '#showfancybox') {
  // trigger the fancybox
} 
```

# sql - 带有 xmlagg 函数的 SQL 多 SELECT 查询 - 未以所需方式提取数据

> ID：11104896
> 
> 赞同：3
> 
> 时间：2012-06-19T16:01:33.037
> 
> 标签：sql, oracle, select, grouping, sqlxml

我在 Oracle 中的数据是这样的

```
NAME | DEP_VALUE | ID_DEP

Amy     1         AA1234
Bob     2         BB4321
Clara   1         CC5678
Clara   2         CC7890
John    1         JJ6543
John    2         JJ7865
John    3         JJ7654
Tom     1         TT0987
Tom     2         TT6541
Tom     3         TT4087
Tom     4         TT3409 
```

**我需要以这种方式提取数据**

```
NAME  | DEP_VALUE |  ID_DEP

Amy     1         AA1234
Bob     2         BB4321
Clara   1;2       CC5678;CC7890
John    1;2;3     JJ6543;JJ7865;JJ7654
Tom     1;2;3;4   TT0987;TT6541;TT4087;TT3409 
```

我的查询如下

```
SELECT name,
   Rtrim(Xmlagg (Xmlelement (e, dep_value
                                || ';')).extract  ( '//text()' ), ','),
   Rtrim(Xmlagg (Xmlelement (e, id_dep
                                || ';')).extract  ( '//text()' ), ',')
FROM   (SELECT emp_name,
           dep.dep_value,
           dep.id_dep
    FROM   emp
           inner join dep
                   ON emp.name = dep.name
    WHERE  id_name IN (SELECT name
                       FROM   altname
                       WHERE  id_emp IN (SELECT id_emp
                                         FROM   cnames
                                         WHERE  emp_lvl LIKE '%GGG%')))
    GROUP  BY name,
      dep_value 
```

**显示的结果是**

```
NAME  | DEP_VALUE |  ID_DEP

Amy     1;         AA1234;
Bob     2;         BB4321;
Clara   1;         CC5678;
Clara   2;         CC7890;
John    1;         JJ6543;
John    2;         JJ7865;
John    3;         JJ7654;
Tom     1;         TT0987;
Tom     2;         TT6541;
Tom     3;         TT4087;
Tom     4;         TT3409; 
```

如何提取第二张表中的数据？我的 sql 查询中的错误是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-19T16:41:23.653

听起来你想要`GROUP BY name`而不是`GROUP BY name, dep_value`

```
SELECT name,
   Rtrim(Xmlagg (Xmlelement (e, dep_value
                                || ';')).extract  ( '//text()' ), ';'),
   Rtrim(Xmlagg (Xmlelement (e, id_dep
                                || ';')).extract  ( '//text()' ), ';')
FROM   (SELECT emp_name,
           dep.dep_value,
           dep.id_dep
    FROM   emp
           inner join dep
                   ON emp.name = dep.name
    WHERE  id_name IN (SELECT name
                       FROM   altname
                       WHERE  id_emp IN (SELECT id_emp
                                         FROM   cnames
                                         WHERE  emp_lvl LIKE '%GGG%')))
    GROUP  BY name 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-08-19T21:41:24.863

只是为了提供有关 xmlagg 的进一步解释，并在 Oracle 11g 中添加另一个选项。

[http://www.dba-oracle.com/t_display_multiple_column_values_same_rows.htm](http://www.dba-oracle.com/t_display_multiple_column_values_same_rows.htm)

```
select
  deptno,
  listagg (ename, ',') 
WITHIN GROUP 
(ORDER BY ename) enames
FROM 
  emp
GROUP BY 
   deptno
/ 
```

输出：

```
DEPTNO ENAMES                                            
---------- --------------------------------------------------
    10 CLARK,KING,MILLER                                 
    20 ADAMS,FORD,JONES,SCOTT,SMITH                
    30 ALLEN,BLAKE,JAMES,MARTIN,TURNER,WARD 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-22T15:22:54.907

像这样尝试更简单

```
select NAME,replace(wm_concat(DEP_VALUE),',',';') as DEP_VALUE, replace(wm_concat(ID_DEP),',',';') as ID_DEP from yourtable 
where dep_value<2000 group by NAME 
```

注意：你需要限制你的 dep_value 长度并且你可以做出你的假设，因为你不能让你的字符串结果变长，希望这对你的工作有帮助

# hibernate - Hibernate：试图从 null 一对一属性分配 id：员工

> ID：11104897
> 
> 赞同：39
> 
> 时间：2012-06-19T16:01:38.170
> 
> 标签：hibernate, exception, one-to-one

这是我的数据库结构，MySQL 中的一对一映射：

![数据库架构](../Images/251f4b0eed88ba92a282875434ab6cbd.png)

这是我的java文件：

```
public class Employee {

private EmployeeDetail empdetail;
private String firstname;
private String lastname;

// getters and setters 

}

public class EmployeeDetail {
    private Employee employee ;
    private int employee_id;
    private String street;
    private String city;
    private String state;
    private String country;

// getters and setters 

} 
```

这是我的映射文件：

```
<hibernate-mapping>

     <class name="Employee" table="employee">
        <id name="employee_id"  type="java.lang.Integer"  column="employee_id">
            <generator class="assigned" />
        </id>
        <one-to-one name="empdetail" class="EmployeeDetail"
            cascade="all"></one-to-one>

        <property name="firstname" type="java.lang.String" column="firstname" />
        <property name="lastname" type="java.lang.String" column="lastname" />

    </class>

 <class name="EmployeeDetail" table="employeedetail">
        <id name="employee_id" type="java.lang.Integer"  column="employee_id">
       <generator class="foreign">
                <param name="property">employee</param>
            </generator>
        </id>
        <one-to-one name="employee" class="Employee"
            cascade="save-update"></one-to-one>

        <property name="street"  type="java.lang.String" column="street" />
        <property name="city" type="java.lang.String" column="city" />
        <property name="state" type="java.lang.String" column="state" />
        <property name="country" type="java.lang.String" column="country" />

 </class>

</hibernate-mapping> 
```

这是我的客户程序：

```
Session session = factory.openSession();
        Transaction tx = session.beginTransaction();

        EmployeeDetail edetail = new EmployeeDetail();
        edetail.setCity("Hyd");
        edetail.setCountry("India");
        edetail.setEmployee_id(222);
        edetail.setState("Andhra Pradesh");

        Employee employee = new Employee();

        employee.setEmployee_id(222);
        employee.setFirstname("Pavan");
        employee.setLastname("Jaooi");
        employee.setEmpdetail(edetail);

        session.merge(employee);
        tx.commit();
        session.close();
        factory.close(); 
```

这是我得到的例外：

```
INFO: Not binding factory to JNDI, no JNDI name configured
Hibernate: select employee0_.employee_id as employee1_0_1_, employee0_.firstname as firstname0_1_, employee0_.lastname as lastname0_1_, employeede1_.employee_id as employee1_1_0_, employeede1_.street as street1_0_, employeede1_.city as city1_0_, employeede1_.state as state1_0_, employeede1_.country as country1_0_ from employee employee0_ left outer join employeedetail employeede1_ on employee0_.employee_id=employeede1_.employee_id where employee0_.employee_id=?
Hibernate: select employeede0_.employee_id as employee1_1_0_, employeede0_.street as street1_0_, employeede0_.city as city1_0_, employeede0_.state as state1_0_, employeede0_.country as country1_0_ from employeedetail employeede0_ where employeede0_.employee_id=?
Exception in thread "main" org.hibernate.id.IdentifierGenerationException: attempted to assign id from null one-to-one property: employee
    at org.hibernate.id.ForeignGenerator.generate(ForeignGenerator.java:44)
    at org.hibernate.event.def.AbstractSaveEventListener.saveWithGeneratedId(AbstractSaveEventListener.java:99)
    at org.hibernate.event.def.DefaultMergeEventListener.entityIsTransient(DefaultMergeEventListener.java:186)
    at org.hibernate.event.def.DefaultMergeEventListener.entityIsDetached(DefaultMergeEventListener.java:240)
    at org.hibernate.event.def.DefaultMergeEventListener.onMerge(DefaultMergeEventListener.java:120)
    at org.hibernate.impl.SessionImpl.fireMerge(SessionImpl.java:687)
    at org.hibernate.impl.SessionImpl.merge(SessionImpl.java:669)
    at org.hibernate.engine.CascadingAction$6.cascade(CascadingAction.java:245)
    at org.hibernate.engine.Cascade.cascadeToOne(Cascade.java:268)
    at org.hibernate.engine.Cascade.cascadeAssociation(Cascade.java:216)
    at org.hibernate.engine.Cascade.cascadeProperty(Cascade.java:169)
    at org.hibernate.engine.Cascade.cascade(Cascade.java:130)
    at org.hibernate.event.def.AbstractSaveEventListener.cascadeAfterSave(AbstractSaveEventListener.java:456)
    at org.hibernate.event.def.DefaultMergeEventListener.entityIsTransient(DefaultMergeEventListener.java:194)
    at org.hibernate.event.def.DefaultMergeEventListener.entityIsDetached(DefaultMergeEventListener.java:240)
    at org.hibernate.event.def.DefaultMergeEventListener.onMerge(DefaultMergeEventListener.java:120)
    at org.hibernate.event.def.DefaultMergeEventListener.onMerge(DefaultMergeEventListener.java:53)
    at org.hibernate.impl.SessionImpl.fireMerge(SessionImpl.java:677)
    at org.hibernate.impl.SessionImpl.merge(SessionImpl.java:661)
    at org.hibernate.impl.SessionImpl.merge(SessionImpl.java:665)
    at CustomerClient.main(CustomerClient.java:31) 
```

* * *

## 回答 #1

> 赞同：74
> 
> 时间：2012-06-19T17:07:10.040

您告诉 Hibernate 从其`employee`属性的 ID 生成 EmployeeDetail ID，但您从未初始化此属性。

添加`edetail.setEmployee(employee);`到您的代码中。

# excel - 在 SUMIFS 中使用公式

> ID：11104898
> 
> 赞同：0
> 
> 时间：2012-06-19T16:01:41.963
> 
> 标签：excel, excel-2007

我有一个包含以下数据的三列工作簿：

Col A：名称
Col B：数字
Col C：日期

我目前正在使用以下公式从例如一月份的所有“约翰”中获取数字的总和。

```
=SUMIFS(B:B; A:A; "John"; C:C; ">="&DATE(2012;1;1); C:C; "<"&DATE(2012;2;1)) 
```

有没有更优雅的方法来找到正确的月份。

我确实尝试过：

```
=SUMIFS(B:B; A:A;"John"; MONTH(C:C);1)) 
```

但这没有用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T16:17:42.343

尝试这个：

```
=SUMPRODUCT(--((A1:A100)="John"),B1:B100,--(MONTH(C1:C100)=1)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T16:12:30.370

不确定是否优雅，但您可以使用此公式添加新列**月份**`mm`（根据需要格式化数字）：

```
=DATE(YEAR(C2); MONTH(C2); 1) 
```

或`=MONTH(C2)`为不同年份返回相同的数字

并得到结果：

```
=SUMIFS(B:B; A:A; "John"; D:D; "2012-01-01") 
```

# xpages - 如何使计算字段同时计算和数据绑定到字段？

> ID：11104900
> 
> 赞同：1
> 
> 时间：2012-06-19T16:01:46.560
> 
> 标签：xpages, xpages-ssjs

我知道如何将计算字段绑定到文档字段。而且我知道如何使用 javascript 来计算计算域。但我该怎么做呢？

假设我在计算字段中的 javascript 是：

```
 @Name("[ABBREVIATE]" ,@UserName()); 
```

如何将其绑定到 document1.ReqName 字段？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T18:09:08.890

我使用两个字段：

1.  计算所需值的隐藏输入字段（使用 xp:inputHidden 控件）。我在组合时使用“默认值”来模拟 Computed - 并使用转换器来模拟 Computed（[受 Tommy Valand 的启发](http://dontpanic82.blogspot.dk/2010/02/xpages-use-converters-to-emulate-domino.html)）。
2.  一个可见的计算域或一个可见的输入域设置为只读，执行相同的计算。也许这可以更改为使用 getComponent("").getValue() 显示隐藏输入字段的值？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-01T11:20:27.967

也许我错过了重点，但您为什么不简单地执行以下操作？

```
<xp:inputText id="inputText1" value="#{document1.Reader}">
    <xp:this.defaultValue>
        <![CDATA[#{javascript:@Name("[ABBREVIATE]",@UserName());}]]>
    </xp:this.defaultValue>
</xp:inputText> 
```

这是每个 EL 绑定到 DocumentField 的 Textfield。如果该字段为空，则按默认值计算。

伟大的！- 我错过了重点。但是你可以试试这个：

```
<xp:text escape="true" id="computedField3">
    <xp:this.value>
        <![CDATA[#{javascript: 
                    if(@IsNewDoc()){
                          document1.replaceItemValue("Reader",@Name("[ABBREVIATE]",@UserName()));
                    }
                    return document1.getItemValue("Reader");}]]>
    </xp:this.value>
</xp:text> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-16T15:17:18.910

```
<xp:text escape="true" id="computedFieldTest1">
[CDATA[#{javascript:
  var userName = "Username: "+("Reader",@Name("[ABBREVIATE]",@UserName()));
  currentDocument.replaceItemValue("computedFieldTest1",userName);
  return userName;
  }]]></xp:this.value>
</xp:text> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-19T18:52:29.883

在这种情况下我不会绑定。我将绑定所有其他控件，在这种情况下，在保存操作之前直接使用脚本将其手动添加到文档字段中。

就像这样：（请原谅不在我工作中的代码）

```
<eventhandler>
   <actionGroup>
      <script><![CDATA[#{javascript:
         doc.replaceItemValue("ReqName", @Name("[ABBREVIATE]" ,@UserName()));
      }]]><script>

      <saveDocument></saveDocument>
   </actionGroup>
</eventhandler> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-19T17:27:52.437

对于计算域的值，使用高级数据绑定并选择表达式语言 (EL)。要使用的表达式只是“document1.ReqName”（没有引号）。

# jquery - 可编辑的动态元素

> ID：11104901
> 
> 赞同：2
> 
> 时间：2012-06-19T16:01:47.190
> 
> 标签：jquery, jeditable

我正在使用 Jeditable JQuery 插件对列表进行就地编辑。这适用于页面上的现有列表项。

```
$('.edit').editable('http://localhost:8080/EditInPlace/Editable', {
    event     : "dblclick",
    callback : function(value, settings) {
        $(".dropdown dt a span").html(value);
        $("#result").html("Selected value is: " + getSelectedValue());
    }
}); 
```

但是，我在页面上动态添加列表项，这些项不响应事件处理程序。我假设我需要使用委托事件，就像我用于点击事件一样。

```
$(document).on("click",".edit",function(e){
    alert("click!");
}); 
```

我无法弄清楚如何将 Jeditable 处理程序添加到委托事件。有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T16:18:45.577

委托方法适用于事件。您可以创建一个自定义事件，但现在为了简单起见，只需在每次添加需要它的新元素时调用您的插件。

这可以在 ajax 成功回调中，或者在您调用任何插入方法（如代码`append()`或`html()`代码中）之后。

您可以做几件事来保持代码精简，将插件的选项对象存储在一个变量中，这样您就不必每次都创建它们，或者创建包含大量插件调用的函数。

例子：

```
var edit={ 
       url: 'http://localhost:8080/EditInPlace/Editable',
       opts:{
            event     : "dblclick",
            callback : function(value, settings) {
                 $(".dropdown dt a span").html(value);
                $("#result").html("Selected value is: " + getSelectedValue());
        }
    }
};

$(selector).append( newContentString).find('.editClass').pluginName(edit.url, edit.opts) 
```

# winforms - 将 Telerik DockingManager 转换为 RadDock

> ID：11104903
> 
> 赞同：0
> 
> 时间：2012-06-19T16:01:59.327
> 
> 标签：winforms, telerik, raddocking

DockingManager 控件已在 2011 年第一季度从他们的套件中删除，所以现在我希望用他们的新控件 RadDock 替换它。[我在这里](http://www.telerik.com/products/winforms/whats-new/dock-q2-2009-beta.aspx)遵循了更新说明（“更新您的项目”部分），但在完成转换后，我留下了一个新的空白 RadDock 对象和原来的 DockingManager 对象（连同它包含的元素）卡在它后面。

然后我尝试将不同的元素拖到新的 RadDock 上，但它们都不会停靠。

升级此控件时是否有其他人遇到过类似问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T08:33:33.587

我已经测试了这种情况，并且在我的 DockingManager 上已成功转换为 RadDock，并且窗口的内容是正确的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T10:45:32.390

Telerik 支持向我发送了一个逐步解释如何进行转换的视频。不知道链接可以工作多长时间，但在[这里](http://www.telerik.com/ClientsFiles/367570_Untitled.zip)。

# asp.net - LINQ to SQL - 字段包含在已知字符串中

> ID：11104904
> 
> 赞同：3
> 
> 时间：2012-06-19T16:02:00.200
> 
> 标签：asp.net, linq, linq-to-sql

我正在根据用户输入动态构建 LINQ 查询，并且我想处理用户基于字符串 str 和字段 foo 搜索记录 r 的情况，其中 str.Contains(r.foo)。现在，相反的 (r.foo.Contains(str)) 很简单，但是 LINQ 让我对以另一种方式做它感到悲伤。

这是我到目前为止所拥有的：

```
private Expression SqlNotIn(Expression left, Expression right)
{
    return Expression.Equal(
        Expression.Call(
            null,
            typeof(SqlFunctions).GetMethod("CharIndex", BindingFlags.Static | BindingFlags.Public, null, new[] { typeof(string), typeof(string) }, null),
            new[] { right, left }
        ),
        Expression.Constant(0)
    );
} 
```

这应该采用一个`Expression` `left`，它是属性访问器，和`Expression` `right`，它是要搜索的字符串的常量，并返回一个`Expression`表示（基本上）`(SqlFunctions.CharIndex(right, left) == 0)`。`1[System.Int32]' and 'System.Int32'." Explicitly casting the`当我运行它时，我得到“没有为类型‘System.Nullable 0 int?’定义二进制运算符 Equal `to`，带有 as 表达式似乎导致 LINQ 提前运行查询。

有没有一种简单的方法可以做到这一点？

* * *

编辑：

```
private Expression SqlNotIn(Expression left, Expression right)
{
    return Expression.Equal(
        Expression.Call(
            right,
            typeof(string).GetMethod("IndexOf", new[] { typeof(string) }),
            new[] { left }
        ),
        Expression.Constant(-1)
    );
} 
```

这可行，但它生成的 SQL 如下所示：

```
(CASE 
    WHEN DATALENGTH([t0].[Destination]) = 0 THEN 0
    ELSE CHARINDEX([t0].[Destination], @p0) - 1
 END) = @p1 
```

如果可以的话，我很乐意使用 CharIndex。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T16:43:04.080

您可以尝试使用[http://msdn.microsoft.com/en-us/library/bb292051.aspx](http://msdn.microsoft.com/en-us/library/bb292051.aspx)`int`将第一部分转换为，或将第二部分转换为`int?``Expression.Convert`

例如。未经测试。

```
private Expression SqlNotIn(Expression left, Expression right) {
            return Expression.Equal(
                Expression.Convert(Expression.Call(
                    null,
                    typeof(SqlFunctions).GetMethod("CharIndex", BindingFlags.Static | BindingFlags.Public, null, new[] { typeof(string), typeof(string) }, null),
                    new[] { right, left }
                ), typeof(int)),
                Expression.Constant(-1)
            );
        } 
```

顺便说一句，您可以将其`string inputValue`用作第二个参数，并将其与`Expression.Constant(inputValue)`

**编辑**：

```
public static Expression SqlNotIn(Expression left, string right) {
            var method = typeof(string).GetMethod("IndexOf",
                new[] { typeof(string)});

            var call = Expression.Call(Expression.Constant(right), method, new []{left});

            var result =  Expression.Equal(call, Expression.Constant(0));
            return result;
        } 
```

**编辑2：**

```
private Expression SqlNotIn2(Expression left, Expression right) {
            return Expression.Equal(
                Expression.Call(
                    null,
                    typeof(SqlFunctions).GetMethod("PatIndex", BindingFlags.Static | BindingFlags.Public, null, new[] { typeof(string), typeof(string) }, null),
                    new[] { right, left }
                ),
                Expression.Convert(Expression.Constant(0), typeof(int ?))
            );
        } 
```

# wordpress - 将博客从 Wordpress.com 迁移到自托管：如何安装 CORE 小部件/插件

> ID：11104906
> 
> 赞同：0
> 
> 时间：2012-06-19T16:02:19.247
> 
> 标签：wordpress, self-hosting

我能够将博客从 wordpress.com 站点导出到自托管站点。

但是，我在安装“CORE 小部件”(http://en.support.wordpress.com/topic/widgets-sidebars/) 时遇到问题。这些是否仅限于 wordpress.com？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T17:07:37.000

好的，所以你这样做：automattic 是 wordpress 背后的公司，他们经常开源他们的额外内容，看看他们的个人资料：[http ://profiles.wordpress.org/automattic/](http://profiles.wordpress.org/automattic/)

所以：

推特 - [http://wordpress.org/extend/plugins/wickett-twitter-widget/](http://wordpress.org/extend/plugins/wickett-twitter-widget/) http://wordpress.org/extend/plugins/authors/

对于其他搜索：[http ://wordpress.org/extend/plugins/](http://wordpress.org/extend/plugins/)

# web-services - 尝试使用 Ironpython 和肥皂调用 Web 服务

> ID：11104908
> 
> 赞同：1
> 
> 时间：2012-06-19T16:02:30.683
> 
> 标签：web-services, soap, wsdl, ironpython

我正在尝试使用 wsdl 文件向网络服务器发送同步肥皂消息。我根据 IronPython 中的说明为 wsdl 文件创建了一个 cs 文件和 dll 以在 IronPython 中加载。我已经创建了我的肥皂消息（网络服务需要），但我认为我没有正确构建我的 webRequest。

这是我的代码：

```
 import clr
clr.AddReference("System")
clr.AddReferenceToFileAndPath("C:\\Temp\MeetingSpaceService.dll")
clr.AddReference("System.Xml")
clr.AddReference("System.Web.Services")

from MeetingSpaceService import MeetingSpaceService
service = MeetingSpaceService()
from System.Net import WebClient
from System.IO import StreamWriter
from System.IO import StreamReader
from  System.IO import StringWriter
import System.Xml
import System.Text
from System import Uri
from System.Xml import XmlTextWriter
from System.Xml import Formatting
from System.Web.Services import *
from System.Net import HttpWebRequest
import System.Object
import System.Array
import System.Byte
from System.Xml import XmlDocument
from System.IO import File
from System.Object import ToString
#from System.ServiceModel.Description import WsdlImporter as wsdl 
from System.Web.Services.Description import (ServiceDescription,     ServiceDescriptionImporter)
from System.Web.Services.Protocols import SoapHttpClientProtocol
from System.IO import MemoryStream
from System.Net import WebClient

readerboard = ''' <?xml version="1.0" encoding="utf-8"?>
</soap:Envelope> <soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"     xmlns:wsa="http://schemas.xmlsoap.org/ws/2004/08/addressing" xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
 <soap:Header>
  <wsa:Action>http://htng.org/PWSWG/2007/01/DigitalSignage#MeetingSpaceRequest</wsa:Action>
  <wsa:MessageID>urn:uuid:44088898-6926-4537-b1a3-4acc8e9f71d0</wsa:MessageID>
  <wsa:ReplyTo>
     <wsa:Address>http://schemas.xmlsoap.org/ws/2004/08/addressing/role/anonymous</wsa:Address>
  </wsa:ReplyTo>
  <wsa:To>http://localhost:2025/MeetingSpaceProviderService/Request.asmx</wsa:To>
  <wsse:Security soap:mustUnderstand="1">
     <wsu:Timestamp wsu:Id="Timestamp-e157d58f-6589-4b3e-b2a9-5510dd9f270f">
        <wsu:Created>2011-04-17T15:35:25Z</wsu:Created>
        <wsu:Expires>2012-07-17T15:40:25Z</wsu:Expires>
     </wsu:Timestamp>"
     <wsse:UsernameToken wsu:Id="SecurityToken-843aeb4f-07de-4c78-a438-e051d3baa764">
        <wsse:Username>isacrb</wsse:Username>
        <wsse:Password Type="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-username-token-profile-1.0#PasswordText">is@cr6_662</wsse:Password>
     </wsse:UsernameToken>
  </wsse:Security> 
```

"'''

```
uriString = "https://ice-services.starwoodhotels.com/readerboard‏"
uri = Uri(uriString)

try: 
webRequest = HttpWebRequest.Create(uri)
webRequest.ContentType = "text/xml;charset=\"utf-8\""
webRequest.Accept = "text/xml"
webRequest.ContentLength = readerboard.Length
webRequest.Timeout = 1000000000
webRequest.Method = "POST"
webRequest.GetRequestStream()
webRequest.Write(readerboard)
webRequest.GetResponse()
except Exception, e:
    print (9) 
```

我在这里进行了更改，现在这就是我得到的。Web 服务是同步的，所以我相信正在发生的是，当您发送请求时，响应会自动返回。在点

> > > rqt = webRequest.GetRequestStream() 在读取下一行之前大约有 1.5 到 2.5 秒的延迟。这模仿了 SOAPUi 中的行为，其中在发送消息后通常会有一秒左右的延迟，然后返回的 XML 数据显示在响应框中。我在想，在 rqt= webRequest 之后，我需要以某种方式读取流而不要求响应。我可以将我创建的用于导入 WSDL 的 cs 文件和 dll 发送给您，看看您的想法。那时您应该能够访问服务器并在 IDE 中看到我在说什么。我感谢您的帮助。太感谢了。

以下是上述操作之后发生的情况：

```
>>> rqt = webRequest.GetRequestStream()
>>> rqt.Write(byte1,0,byte1.Length)
>>>
>>>     #get the response here
>>> rsp = webRequest.GetResponse()
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
SystemError: The remote server returned an error: (500) Internal Server Error.
>>>     #create a stream reader to convert the raw response into UTF8 for text
>>> readStream = StreamReader(rsp.GetResponseStream(), System.Text.Encoding.UTF8
)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
NameError: name 'rsp' is not defined
>>>     #read the data from the stream into a string
>>> data = readStream.ReadToEnd()
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
NameError: name 'readStream' is not defined
>>> readStream.Close()
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
NameError: name 'readStream' is not defined
>>> rsp.Close()
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
NameError: name 'rsp' is not defined
>>>     #Do stuff with the data here
>>> print data
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
NameError: name 'data' is not defined
>>> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T20:51:05.240

当您发出请求以表示 SOAPAction 时，您需要添加一个标头。

所以像：

```
webRequest.Headers.Add('SOAPAction', '"http://myservice.com/1/poll"') 
```

调用 Web 服务的完整代码如下。在这种情况下[http://wsf.cdyne.com/WeatherWS/Weather.asmx?WSDL](http://wsf.cdyne.com/WeatherWS/Weather.asmx?WSDL)

```
import clr

from System.Net import WebClient
from System.IO import StreamReader
import System.Text
from System import Uri
from System.Net import HttpWebRequest

#This is the SOAP Payload 
#Just build it with basic concats
readerboard = """<?xml version="1.0" encoding="utf-8"?>
<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  <soap:Body>
    <GetCityWeatherByZIP xmlns="http://ws.cdyne.com/WeatherWS/">
      <ZIP>10011</ZIP>
    </GetCityWeatherByZIP>
  </soap:Body>
</soap:Envelope>"""

uriString = "http://wsf.cdyne.com/WeatherWS/Weather.asmx"
uri = Uri(uriString)

try: 
    webRequest = HttpWebRequest.Create(uri)
    webRequest.ContentType = "text/xml;charset=\"utf-8\""
    webRequest.Accept = "text/xml"
    webRequest.Timeout = 1000000000
    webRequest.Method = "POST"
    #We set the SOAPAction Header - this tells the end point what service to run
    webRequest.Headers.Add('SOAPAction', '"http://ws.cdyne.com/WeatherWS/GetCityWeatherByZIP"') 

    #we turn the payload into a byte array to allow us to write it to the request stream
    encoding = System.Text.UTF8Encoding();
    byte1 = encoding.GetBytes(readerboard);
    #write the bytes above to the request
    rqt = webRequest.GetRequestStream()
    rqt.Write(byte1,0,byte1.Length)
    #get the response here
    rsp = webRequest.GetResponse()
    #create a stream reader to convert the raw response into UTF8 for text
    readStream = StreamReader(rsp.GetResponseStream(), System.Text.Encoding.UTF8)
    #read the data from the stream into a string
    data = readStream.ReadToEnd()
    readStream.Close()
    rsp.Close()
    #Do stuff with the data here
    print data
except System.Net.WebException, we:
    print "Web Exception:", we.Message
    if we.Status == System.Net.WebExceptionStatus.ProtocolError: 
        print int(we.Response.StatusCode), we.Response.StatusDescription
        print (StreamReader(we.Response.GetResponseStream(), System.Text.Encoding.UTF8)).ReadToEnd()
except Exception, e:
    print e 
```

# asp.net - Visual Studio 2010 的 Crystal Reports 运行时在 Server 2008 中不起作用

> ID：11104909
> 
> 赞同：1
> 
> 时间：2012-06-19T16:02:32.757
> 
> 标签：asp.net, crystal-reports

我们的 Web 应用程序使用旧的 Crystal Reports XI Rel 2 activeX 来呈现从经典 ASP 调用的报表。我们现在希望它与新的 Crystal Reports 13 运行时一起运行，以呈现从 ASP.NET 调用的报表。

[我们安装了http://scn.sap.com/docs/DOC-7824](http://scn.sap.com/docs/DOC-7824)（支持包 3）中的 exe 。在我们的开发机器（Windows XP）上一切正常，我们能够使用这两种技术设计和呈现报告。我们今天尝试将它部署到客户端的服务器（Windows Server 2008 64 位），但它显然不起作用。

如果我们首先尝试打开新报告然后打开旧报告，~~它们都会失败，但会出现完全通用且因此无用的错误消息，例如“创建报告时出错”。~~新的没问题，但旧的失败并显示“无效的 TLV 记录”消息。

相反，如果在重新启动 iis 后，我们首先尝试打开旧报告（来自经典 ASP 的 CR XI R2），它会正确显示，但新报告（CR 13）会出现以下错误：

> 由于以下错误，检索具有 CLSID {F734A321-8381-4FFD-A614-139E8906DC83} 的组件的 COM 类工厂失败：80000003 一个或多个参数无效（来自 HRESULT 的异常：0x80000003）。

我们试图用谷歌搜索这个错误；唯一有意义的结果是[这个线程](http://scn.sap.com/thread/2135647)，但它对我们没有帮助。

谢谢

**编辑**：好的，第一个错误只是 .rpt 文件被排除在部署文件夹之外。所以它真的归结为 CR 运行时的不兼容，也许？

**编辑2**：是的，绝对是这样。我们将新报告移动到另一个应用程序池下运行的另一个虚拟目录中，现在它们都可以工作，无论首先实例化什么。那么有没有什么办法可以逐步迁移我们现有的记录，即有一个运行时间共存并被同一个虚拟目录使用的时期？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T20:28:44.020

我有这个问题。由于我刚刚安装了 CR 13 而没有重新启动，我想我会尝试重新启动服务器。重新启动后，问题就消失了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-01-22T10:31:14.940

我有同样的错误 - 重新启动没有帮助。在 Win7 上安装了 SAP Crystal Reports 运行时 13.0.0.99，但在安装过程中注册组件时出现了几个错误 - 认为这是问题的原因。

[从https://wiki.scn.sap.com/wiki/display/BOBJ/Crystal+Reports%2C+Developer+for+Visual+Studio+Downloads](https://wiki.scn.sap.com/wiki/display/BOBJ/Crystal+Reports%2C+Developer+for+Visual+Studio+Downloads) [http://downloads](http://downloads.businessobjects.com/akdlm/crnetruntime/clickonce/CRRuntime_32bit_13_0_21.msi)下载并安装 CR Runtime 13.0.21.2533 (32bit) [.businessobjects.com/akdlm/crnetruntime/clickonce/CRRuntime_32bit_13_0_21.msi](http://downloads.businessobjects.com/akdlm/crnetruntime/clickonce/CRRuntime_32bit_13_0_21.msi) 安装没有错误但也没有工作:-(

# c# - 用于验证文件名的正则表达式

> ID：11104910
> 
> 赞同：2
> 
> 时间：2012-06-19T16:02:40.197
> 
> 标签：c#, .net, regex

我有一些以特定语法命名的 MP3 文件，例如：

> 1 - Sebastian Ingrosso - Calling (Feat. Ryan Tedder)

我用 C# 编写了一个小程序，它从 ID3 标签中读取曲目、艺术家和标题。我想做的是编写一个正则表达式，它可以验证文件实际上是用上面列出的语法命名的。

所以我有一个名为歌曲的课程：

```
 //Properties
public string Filename
{
    get { return _filename;  }
    set { _filename = value; }
}

public string Title
{
    get { return _title;  }
    set { _title = value; }
}

public string Artist
{
    get { return _artist;  }
    set { _artist = value; }
}

//Methods

public bool Parse(string strfile)
{
    bool CheckFile;

    Tags.ID3.ID3v1 Song = new Tags.ID3.ID3v1(strfile, true);
    Filename = Song.FileName;
    Title = Song.Title;
    Artist = Song.Artist;

    //Check File Name Formatting
    string RegexBuilder = @"\d\s-\s" + Artist + @"\s-\s" + Title;
    if (Regex.IsMatch(Filename, RegexBuilder))
    {
        CheckFile = true;
    }
    else
    {
        CheckFile = false;
    }
    return CheckFile;
 } 
```

所以它在大多数情况下都有效。我在标题中有 (Feat. ) 的那一刻失败了。我能想到的最接近的是：

> \d\s-\s\艺术家\s-\s.*

这显然行不通，因为任何文本都可以通过测试，我已经尽了最大努力，但我只编程了两个星期。

* * *

**tl;dr**希望歌曲通过正则表达式测试，无论它是否包含特色艺术家，例如：

> 1 - Sebastian Ingrosso - Calling (Feat. Ryan Tedder)

和

> 1 - Flo Rida - 口哨

应该都通过测试。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T16:19:56.557

问题是正则表达式中的“（”和“）”对正则表达式引擎有意义。您应该使用以下代码：

```
string RegexBuilder = @"\d\s-\s" + Regex.Escape(Artist) + @"\s-\s" + Regex.Escape(Title); 
```

Escape 函数会将“(Feat. )”更改为“\(Feat.\)”，这将确保您匹配括号而不是分组“Feat.”。

[http://msdn.microsoft.com/en-us/library/system.text.regularexpressions.regex.escape.aspx](http://msdn.microsoft.com/en-us/library/system.text.regularexpressions.regex.escape.aspx)

# gwt - 重用的 GWT Widget 变得不可见

> ID：11104911
> 
> 赞同：0
> 
> 时间：2012-06-19T16:02:39.967
> 
> 标签：gwt, reusability

我有`Widget`一个`TabBar`.

```
<g:DockLayoutPanel unit="EM">
  <g:north size="2.5">
    <g:TabBar height="2.5em" ui:field="tabBar" />
  </g:north>
  <g:center>
    <g:SimpleLayoutPanel ui:field="contentWidget" />
  </g:center>
</g:DockLayoutPanel> 
```

如果用户选择一个选项卡，我将小部件设置为`contentWidget`.

```
@UiHandler("tabBar")
void onTabsSelection(final SelectionEvent<Integer> event) {
  // ...
} 
```

这完美！

几个选项卡有一个共同的小部件，所以我想使用这个小部件的单个实例（用于同步）。

```
<g:LayoutPanel>
  <!-- query -->
  <g:layer top="0" height="3em">
    <g:HorizontalPanel width="100%" height="3em" verticalAlignment="ALIGN_MIDDLE">
      <g:SimpleLayoutPanel ui:field="queryNode" />
      <g:cell horizontalAlignment="ALIGN_RIGHT">
        <my:StepPager ui:field="pager" />
      </g:cell>
    </g:HorizontalPanel>
  </g:layer>
  <!-- map -->
  <g:layer left="0" right="17em" top="3em" bottom="0">
    <g:SimpleLayoutPanel ui:field="mapNode" />
  </g:layer>
</g:LayoutPanel> 
```

当然，一个小部件只能附加到一个父级。所以我重写了`onAttach`所有选项卡小部件的方法来读取我的查询小部件。

```
@Override
protected void onAttach() {
  queryNode.setWidget(queryBar);
  super.onAttach();
} 
```

该方法将被调用，并且小部件位于 DOM 中，但它不可见。我认为问题在于`SimpleLayoutPanel` `queryNode`大小为 3x35 像素的单元格。

# azure - Azure：在云中部署 Ruby on Rails 应用程序

> ID：11104912
> 
> 赞同：0
> 
> 时间：2012-06-19T16:03:00.010
> 
> 标签：azure, azure-sql-database, azure-storage, azure-blob-storage, azure-worker-roles

我刚刚完成了一个自动化脚本：

*   将项目构建下载到本地存储（工作者角色）
*   安装 ruby​​、apache 和其他依赖项
*   配置 apache 和 RoR 应用程序以通过端口 81 服务请求

这一切都在本地工作。我正在与视觉工作室合作；成功运行应用程序会将本地计算机从“空白板”拉到“服务请求”。

我现在正试图将其推送到 Azure - 不再使用本地机器，而是使用实际的工作角色。

我已打包项目并通过我的 Azure 订阅门户将其上传到生产环境，但导航到站点 URL 并没有给我任何信息（未找到站点）。

我对 Azure 有点陌生。我需要采取哪些步骤来确保此应用程序能够在云中运行？我觉得我忘了配置一些东西，比如端点端口（81）。任何建议或推荐阅读都会非常有帮助；非常感谢您的参与！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T16:23:20.257

如果您需要一些真正的帮助来解决问题，最好查看以下 3 件事：

1.  您的自动化脚本（启动任务）
2.  您的工作者角色 OnStart() 函数
3.  您的 ServiceDefinition 和 ServieConfiguration

您是在使用 ProgramEntryPoint 来启动您的 RoR 应用程序，还是在启动任务中执行所有这些操作？基于以上信息，很容易理解应用架构，并可以提出一些建议。

但是，解决此问题的最佳方法是[启用对 Azure Worker Role VM 的 RDP 访问](http://blogs.msdn.com/b/avkashchauhan/archive/2011/04/03/setting-rdp-access-in-windows-azure-application-with-windows-azure-sdk-1-3-1-4.aspx)，然后登录到 Azure VM 以了解发生了什么。对 Azure VM 的 RDP 访问将验证您的安装脚本是否正确运行并且所有模块都已启动。

由于您是 Windows Azure 的新手，因此可能会缺少一些东西，如果您提供更多信息，您将获得准确的帮助，而不是一些猜测工作。

# c# - 如何在 lambda 表达式期间使 IList 与 IEnumerable 兼容？

> ID：11104913
> 
> 赞同：2
> 
> 时间：2012-06-19T16:03:03.427
> 
> 标签：c#, reflection, lambda

我正在尝试将其转换为：

```
ISession.Query<Question>()
    .Where(x => x.QuestionId == q.QuestionId)
    .FetchMany(x => x.Answers)
    .ToFuture(); 
```

反射类型：

```
IQueryable<Question> query = ISession.Query<Question>().Where(string.Format("{0} = @0", "QuestionId"), q.QuestionId);
Type emType = typeof(NHibernate.Linq.EagerFetchingExtensionMethods);
MethodInfo mi = emType.GetMethod("FetchMany");

ParameterExpression paramEx = Expression.Parameter(typeof(Question), "x");
MemberExpression me = Expression.Property(paramEx, "Answers");         
LambdaExpression lambdaEx = Expression.Lambda (me, paramEx);            

// runtime error here
mi.MakeGenericMethod(typeof(Question), typeof(Answer)).Invoke(emType, new object[] { query, lambdaEx }); 
```

运行时错误：

```
System.ArgumentException: Object of type 
'System.Linq.Expressions.Expression`1
[System.Func`2[TestXXX.TheModels.Question,
System.Collections.Generic.IList`1[TestXXX.TheModels.Answer]]]' 

cannot be converted to type

'System.Linq.Expressions.Expression`1
[System.Func`2[TestXXX.TheModels.Question,
System.Collections.Generic.IEnumerable`1[TestXXX.TheModels.Answer]]]'. 
```

POCO 样本：

问题的答案是 IList，请不要建议将 IList 更改为 IEnumerable ;-)

```
public class Question
{
    public virtual int QuestionId { get; set; }
    public virtual string QuestionText { get; set; }

    public virtual IList<Answer> Answers { get; set; }
} 
```

这是 FetchMany 的方法签名：

```
namespace NHibernate.Linq
{
    public static class EagerFetchingExtensionMethods
    {
        public static INhFetchRequest<TOriginating, TRelated> Fetch<TOriginating, TRelated>(this IQueryable<TOriginating> query, Expression<Func<TOriginating, TRelated>> relatedObjectSelector);
        public static INhFetchRequest<TOriginating, TRelated> FetchMany<TOriginating, TRelated>(this IQueryable<TOriginating> query, Expression<Func<TOriginating, IEnumerable<TRelated>>> relatedObjectSelector);
        public static INhFetchRequest<TQueried, TRelated> ThenFetch<TQueried, TFetch, TRelated>(this INhFetchRequest<TQueried, TFetch> query, Expression<Func<TFetch, TRelated>> relatedObjectSelector);
        public static INhFetchRequest<TQueried, TRelated> ThenFetchMany<TQueried, TFetch, TRelated>(this INhFetchRequest<TQueried, TFetch> query, Expression<Func<TFetch, IEnumerable<TRelated>>> relatedObjectSelector);
    }
} 
```

应该怎么做才能在反射期间将 IList 传递给 NHibernate 的 FetchMany 的 IEnumerable？

注意：如果我们不使用反射，可以将 IList 传递给 IEnumerable

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T16:11:19.077

改变这个

```
MemberExpression me = Expression.Property(paramEx, "Answers"); 
```

对此：

```
Expression me = Expression.Convert(Expression.Property(paramEx, "Answers"), typeof(IEnumerable<Answer>)); 
```

您收到错误的原因是您的 lambda 的委托类型不同意。`IList<T>`我们需要通过人为地将 a视为来使类型兼容`IEnumerable<T>`。

正如任何动态语言的支持者都会说的那样，这是一种 hack ;-) 无论如何，它可靠地工作。

# php - 将 sql 变量返回给 PHP

> ID：11104914
> 
> 赞同：1
> 
> 时间：2012-06-19T16:03:10.573
> 
> 标签：php, mysql, pdo

我有以下查询：

```
 SET @q = 12;  
    UPDATE `table` 
    SET qty = CONCAT(GREATEST(qty - @q, 0), LEFT(@q := @q - LEAST(qty, @q), 0)) 
    ORDER BY id; 
```

（在这里为伟大的查询投票：[Removing a quantity from multiple rows in a database](https://stackoverflow.com/questions/10557492/removing-a-quantity-from-multiple-rows-in-a-database)）

我正在通过 OOP PDO / MySQL 运行查询（在这种情况下没有准备）。

如果@q 没有达到0，我想将@q 的值传递回PHP 或任何标志。我不知道如何实现这一点。如果有人能够指出我正确的方向，我将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T16:09:56.127

这不起作用：

```
$res = mysql_fetch_array( mysql_query( "SELECT @q" ) );
print_r( $res ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T16:10:30.147

只需选择它，就像您选择其他任何东西一样：

```
$res = mysql_query("SELECT @q AS q") or die(mysql_error());
$row = mysql_fetch_assoc($res);
echo $row['q']; 
```

# java - 在 Windows 中，如何判断哪些进程正在使用 Java 下的文件？

> ID：11104916
> 
> 赞同：11
> 
> 时间：2012-06-19T16:03:26.797
> 
> 标签：java, windows, file, process

我们有一个用 Java 编写的计划任务在 Windows 平台上失败，因为有时它需要删除的文件仍在使用中。有没有办法从 Java 中查看哪些进程正在使用文件并获取有关它们的信息？

我想我会补充一点，如果有必要，我愿意使用 JNA 或 JNI，而且我认为它会是。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-08-27T22:14:10.727

我在 Github 上为 JNA 项目提出了一个类似的问题，**@matthiasblaesing**编写了一个代码来完成这个问题。

代码在[**这里**](https://github.com/java-native-access/jna/issues/657#issuecomment-242941713)。

它以以下格式打印包含所有正在运行的进程的列表：`<exe>: <type>: <path>`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T16:53:21.813

一种肮脏的方法是使用管理权限运行您的应用程序，并使用[ProcessBuilder](http://docs.oracle.com/javase/7/docs/api/java/lang/ProcessBuilder.html)调用命令实用程序，例如[Handle](http://technet.microsoft.com/en-us/sysinternals/bb896655.aspx)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-19T17:03:35.613

我自己的初步答案（请有人做得更好！）：

理想情况下，我想学习如何以编程方式执行 Process Explorer、unlocker、handler 等工具执行的操作，然后使用 JNA 或类似工具从 Java 调用它。但看起来这涉及到每个 Windows 版本都会发生变化的数据结构，所以听起来很脆弱。涉及的系统调用似乎名为 NtQuerySystemInformation。

看起来在我们正在处理的情况下，Windows Vista 以后的首选方法是使用“重启管理器 API”，它会触发系统重启，清除所有打开的文件句柄。（来源：[http](http://social.msdn.microsoft.com/Forums/sv/netfxbcl/thread/37dc9843-2583-41fc-8260-b78183aa4bed) ://social.msdn.microsoft.com/Forums/sv/netfxbcl/thread/37dc9843-2583-41fc-8260-b78183aa4bed ）如果我们能提供帮助，我们当然不想这样做。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-19T16:10:08.900

您可以使用出色的[Sysinternals Process Explorer](http://technet.microsoft.com/en-us/sysinternals/bb896653.aspx)来执行此操作，并且不仅限于 Java 进程。

有关详细信息，请参阅[此帖子](http://support.microsoft.com/kb/232830)。但是，我不知道如何从 java 调用此功能。

# xsd - 使用 Rally 的 REST API 检索项目的用户故事

> ID：11104922
> 
> 赞同：0
> 
> 时间：2012-06-19T16:04:03.473
> 
> 标签：xsd, rally

我很想检索特定项目的所有用户故事的详细信息。我正在使用 REST URL： [https](https://rally1.rallydev.com/slm/webservice/1.34/hierarchicalrequirement?project=) ://rally1.rallydev.com/slm/webservice/1.34/hierarchicalrequirement?project= {Rally_REST_URL_for_the_project}&fetch=true

我正在使用 JAXB 来解组 XML 响应。但是，结果由 DomainObjectType 类型的对象组成，因此我无法将它们转换为 HierarchicalRequirementType - 事实上，与用户故事有关的数据是不可检索的。

有没有其他方法可以做到这一点？我从 Rally 帮助页面获得了 XML Schema，除了发出 N+1 请求之外，我看不到任何其他方法——我想避免这种情况。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T14:48:45.440

我已联系 Rally 支持以验证他们的 XML 模式。一旦他们回复我，将再次发布。

- 几天后 -

感谢大家的努力。

显然，XML Schema 用于 SOAP 而不是 REST，尽管在某些情况下它也可以用于 REST。

我必须根据我的要求修改 Schema - 我现在正在做的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T14:39:40.887

一种迂回的答案 - 我们有一个 beta/labs Java REST 工具包，您可以在这里尝试：http: [//developer.rallydev.com/help/java-toolkit-rally-rest-api](http://developer.rallydev.com/help/java-toolkit-rally-rest-api)

这可能值得一试，以帮助推动其中的一些发展。

# windows - 在批处理文件中，如何将文件名和文件扩展名与文件路径分开？

> ID：11104925
> 
> 赞同：1
> 
> 时间：2012-06-19T16:04:15.253
> 
> 标签：windows, batch-file

我有一个接受文件路径的批处理文件。然后我需要分别隔离文件名和文件扩展名。例如，如果我的文件路径是“\svr-01\My Docs\My Spreadsheet.xls”，那么我需要两个单独的变量；一个包含“我的电子表格”，一个包含“.xls”。

继承人我到目前为止。我已经能够将文件名和扩展名与路径分开：

```
set FILEPATH=\\SVR-01\My Docs\My Spreadsheet.xls
for /F "delims=" %%A in ("%FILEPATH%") do set "FILENAME=%%~nxA"
echo.%FILENAME% 
```

然后我如何将文件名和扩展名与这个变量分开？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T16:08:49.293

```
set FILEPATH=\\SVR-01\My Docs\My Spreadsheet.xls
for /F "delims=" %%A in ("%FILEPATH%") do (
  set "FILEFULLNAME=%%~nxA"
  set "FILENAME=%%~nA"
  set "FILEEXT=%%~xA"
)
set file 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T16:05:42.817

您可以使用`%~n`文件名和`%~x`扩展名。

您已经拥有的只是将两者结合起来。每个部分分别使用它们。

```
rem Filename
for /F "delims=" %%A in ("%FILEPATH%") do set "FILENAME=%%~nA"

rem Extension
for /F "delims=" %%A in ("%FILEPATH%") do set "FILENAME=%%~xA" 
```

有关更多选项，请参见[此处](http://blogs.msdn.com/b/ben/archive/2007/03/09/path-manipulation-in-a-batch-file.aspx)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-02-28T15:14:01.370

我觉得你应该看看

%~1 - 扩展 %1 删除任何周围的引号 (")
%~f1 - 将 %1 扩展为完全限定的路径名
​​ %~d1 - 将 %1 扩展为仅驱动器号
%~p1 - 将 %1 扩展为仅路径
%~n1 - 仅将 %1 扩展为文件名
%~x1 - 仅将 %1 扩展为文件扩展名
%~s1 - 扩展路径仅包含短名称
%~a1 - 将 %1 扩展为文件属性
%~t1 - 扩展 % 1 到文件
%~z1 的日期/时间 - 将 %1 扩展到文件的大小

特别是

> %~p1 - 仅将 %1 扩展为路径

# javascript - javascript日期不同的日子等于毫秒

> ID：11104927
> 
> 赞同：1
> 
> 时间：2012-06-19T16:04:26.610
> 
> 标签：javascript

[http://jsfiddle.net/skowron_line/zPCBc/1/](http://jsfiddle.net/skowron_line/zPCBc/1/)

```
var d1 = '31.05.2012';
var d2 = '01.06.2012';

var s1 = d1.split('.');
var s2 = d2.split('.');

var nd1 = new Date(s1[2], s1[1], s1[0]);
var nd2 = new Date(s2[2], s2[1], s2[0]);

$('#a').html(s1 + ' - '+ s2 +' = '+ nd2.getTime() +' - '+ nd1.getTime());

$('#b').html(
nd1.getFullYear() +'-'+ nd1.getMonth() +'-'+ nd1.getDate() +'<br />'+ nd2.getFullYear() +'-'+ nd2.getMonth() +'-'+ nd2.getDate()
); 
```

有人能解释一下我这段代码有什么问题吗？？？。为什么`31.05.2012`我等于`01.06.2012`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-19T16:08:27.497

Javascript 月份是从 0 开始的，所以 05 月份实际上是 6 月。由于没有 6 月 31 日，JS 将日期调整为 7 月（js 月​​ 06）1 日。

新的日期代码应为：

```
var nd1 = new Date(s1[2], parseInt(s1[1])-1, s1[0]); 
```

# asp.net - Visual Studio 2010 中的 ASP.NET Web 应用程序生产力

> ID：11104929
> 
> 赞同：1
> 
> 时间：2012-06-19T16:04:33.273
> 
> 标签：asp.net, visual-studio

我正在开发一个相当大的 ASP.NET Web 应用程序，当我在界面中工作时，我的工作效率受到了很大的影响。我可以通过向数据库和 API 添加功能来压缩，然后我点击界面并且不得不重新编译和运行占用了我很多时间。

例如，如果我正在处理一个行为不太正确并且需要进行一些调整的棘手位，我将不得不经历多个 [停止/调整/构建/运行/登录/导航回页面] 周期，这真的扼杀了我的流量，让我每次都盯着屏幕，手指悬停在hackernews书签上。

我一直在想办法解决这个问题，但我的情况并没有太大改善。这是我到目前为止发现的：

*   当您更改静态文件 (js/css/etc) 时，Visual Studio 会频繁重启应用程序，这不需要重启。如果你用 IIS express 运行 VS，这个问题就会消失。
*   如果我知道我有一堆乱七八糟的事情要做，我会将我的代码剪切/粘贴到标记页面上的服务器脚本标签中，运行产品，然后调整直到它很好，然后剪切/粘贴回来。这很烦人，因为它通常需要在 ASP.NET 文件中设置许多 Imports 页面声明和代码编辑功能，虽然在 VS2010 中比以往任何时候都好，但不如在 C# 文件中好。此外，一旦进行了足够的更改，它仍会偶尔重新启动应用程序。
*   我可以从 Web 应用程序项目中排除代码隐藏文件，将 aspx 页面声明中的“代码隐藏”属性更改为“src”属性，然后在应用程序运行时从那里编辑代码（直到我做出足够的更改以触发重启.) 但是现在智能感知在代码隐藏中不起作用，除其他外。

我是否遗漏了一些非常明显的东西，或者 ASP.NET Web 应用程序的开发真的应该这么慢？感谢您提供的任何解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T16:10:51.350

我从不通过 Visual Studio 运行我的应用程序。使用 IIS 设置自己，然后配置一个站点以指向您的应用程序的位置以及一个人造域。编辑您的主机文件以将域指向 localhost。

然后，当您想查看您的网站时，只需访问您选择的域。如果您需要修改 CSS 或脚本，只需进行更改并刷新页面即可。如果您进行了代码更改，请编译您的应用程序，然后刷新页面。

如果您需要实际使用 Visual Studio 调试器，那么只需附加到 IIS 进程（应用程序池名称），您的断点就会被命中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T13:41:32.417

我发现了一种技术组合，可以提高我的工作效率。

*   使用 Chrome 等替代浏览器。当您停止 VS 调试器并使用 IE 时，VS 将关闭浏览器，但它不会在 Chrome（或 Firefox 或其他任何东西）上执行此操作。
*   将 web.config 切换为在 Windows 身份验证模式下运行，并编写了一个包含在条件编译标签中的快速透明登录例程（仅限调试，此功能对于我们的生产产品并不完美。）

现在，当我开始使用它时，我可以停止调试器（不再关闭浏览器）进行代码更改、构建，可选择再次启动调试器，然后在 Chrome 中按 F5 以加载最新版本。刷新显然需要更长的时间，因为应用程序必须启动，但不再有“运行浏览器/登录/导航回页面”任务。

希望这会帮助其他处于类似情况的人。

# jquery - jQuery 日期选择器输入日期格式

> ID：11104933
> 
> 赞同：5
> 
> 时间：2012-06-19T16:04:52.147
> 
> 标签：jquery, jquery-ui, datepicker

我目前正在为酒店预订小部件编写一些编码，并且正在使用 jQuery UI 日期选择器。

问题是客户正在使用的外部预订系统处理日期格式，`yyyy-mm-dd`并且客户认为这会混淆人们`2012-06-19`在输入框中看到的内容，并希望`dd-mm-yyyy`在他们的网站上以欧洲格式显示日期。

所以基本上表单需要显示`dd-mm-yyyy`何时选择日期，然后当提交按钮单击表单时，日期需要`yyyy-mm-dd`在发送值之前重新排列。

这家预订系统公司表示，他们有很多客户已经做到了这一点，但他们表示他们不是 100% 确定这是如何做到的。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-19T17:09:36.373

DatePicker 可以使用选项[`altField`](http://api.jqueryui.com/datepicker/#option-altField)和[`altFormat`](http://api.jqueryui.com/datepicker/#option-altFormat).

> [`altField`](http://api.jqueryui.com/datepicker/#option-altField)：要使用日期选择器中选定的日期更新的输入元素。使用该[`altFormat`](http://api.jqueryui.com/datepicker/#option-altFormat)选项更改此字段中日期的格式。如果没有备用字段，请留空。

```
$('#thedate').datepicker({
  dateFormat: 'dd-mm-yy',
  altField: '#thealtdate',
  altFormat: 'yy-mm-dd'
});
```

```
<link rel="stylesheet" href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.11.4/themes/smoothness/jquery-ui.css">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.11.4/jquery-ui.min.js"></script>
Shown Field: <input id="thedate" type="text" /><br />
Hidden Field : <input id="thealtdate" type="text" />
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-19T16:19:32.973

有很多方法可以解决这个问题，但这可能是我乍一看的处理方式。

1.  添加一个隐藏字段来存储新的日期值。
2.  为提交按钮的提交功能创建一个事件处理程序。

3.  在该函数中创建格式正确的新日期：

    var d = new Date($("oldDateFormatPicker").val()); $("hiddenField").val(d); 返回真；

类似的东西至少语法可能有点偏离，但它很接近。在我们的服务器端代码中，只需指向隐藏字段而不是日期选择器。

# sweave - Sublime Text 的 Sweave 语法高亮显示

> ID：11104934
> 
> 赞同：4
> 
> 时间：2012-06-19T16:04:57.177
> 
> 标签：sweave, sublimetext2

目前安装了`LaTeXTools`捆绑包的 Sublime Text 2 在 Sweave/knitr 代码块上遇到问题。我如何告诉 ST 要么忽略表格中的所有内容

```
<<arguments here>>=

@ 
```

或者，甚至更好，将其视为 R 源代码？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T17:41:23.443

Sweave Textmate 捆绑包（或至少是基本部分）也可以与 Sublime Text 2 一起使用。只需从[https://github.com/textmate/sweave.tmbundle](https://github.com/textmate/sweave.tmbundle)下载捆绑包并将其移动到`Packages`目录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-06T19:14:34.910

现在有专为 Sublime Text 制作的[SublimeKnitr包。](https://github.com/andrewheiss/SublimeKnitr)从 GitHub 源代码或通过 Package Control 安装。

# c# - 挣扎于 List 和 ArrayList 的使用

> ID：11104935
> 
> 赞同：2
> 
> 时间：2012-06-19T16:05:02.383
> 
> 标签：c#, list, arraylist

我正在尝试以下代码来混杂`ArrayList`-的元素`questionsAndSeperators`。我有两种方法。
**方法1：-**

```
List<Question> questionList = this.questionsAndSeperators.Cast<Question>().ToList();

Random rng = new Random();
int questionCount = questionList.Count;
while (questionCount > 1)
{
   questionCount--;
   int index = rng.Next(questionCount + 1);
   Question value = questionList[index];
   questionList[index] = questionList[questionCount];
   questionList[questionCount] = value;
} 
```

**方法2：-**

```
ArrayList questionList = this.questionsAndSeperators;

Random rng = new Random();
int questionCount = questionList.Count;
while (questionCount > 1)
{
   questionCount--;
   int index = rng.Next(questionCount + 1);
   object value = questionList[index];
   questionList[index] = questionList[questionCount];
   questionList[questionCount] = value;
} 
```

这里`Question`有一堂课。
**方法 2**工作正常并混杂 的元素`questionsAndSeperators`，但**方法 1**无法混杂 的元素`questionsAndSeperators`。**方法1**有什么问题？？我在方法1中做错了吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T16:08:27.017

在方法 1 中，您创建一个`new List<Question>`包含所有元素的`this.questionsAndSeperators`. 然后你洗牌所有的元素`new List<Question>`。但是您不会`this.questionsAndSeperators`因为它是另一个数组而对元素进行洗牌。

在方法 2 中，您可以`ArrayList`直接访问 并打乱`ArrayList`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T16:09:20.403

在版本一中，您被分配给一个名为“list”的变量，但随后您正在一个名为“questionList”的变量中进行改组。我想知道这是否可以编译。

# recursion - tcl深度递归文件搜索，搜索带有*.c扩展名的文件

> ID：11104940
> 
> 赞同：4
> 
> 时间：2012-06-19T16:05:33.413
> 
> 标签：recursion, tcl, file-search

使用旧答案在 tcl 中搜索文件： [https ://stackoverflow.com/a/435094/984975](https://stackoverflow.com/a/435094/984975)

首先让我们讨论一下我现在在做什么：使用此功能：（感谢 Jacson）

```
# findFiles
# basedir - the directory to start looking in
# pattern - A pattern, as defined by the glob command, that the files must match
proc findFiles { basedir pattern } {

    # Fix the directory name, this ensures the directory name is in the
    # native format for the platform and contains a final directory seperator
    set basedir [string trimright [file join [file normalize $basedir] { }]]
    set fileList {}

    # Look in the current directory for matching files, -type {f r}
    # means ony readable normal files are looked at, -nocomplain stops
    # an error being thrown if the returned list is empty
    foreach fileName [glob -nocomplain -type {f r} -path $basedir $pattern] {
        lappend fileList $fileName
    }

    # Now look for any sub direcories in the current directory
    foreach dirName [glob -nocomplain -type {d  r} -path $basedir *] {
        # Recusively call the routine on the sub directory and append any
        # new files to the results
        set subDirList [findFiles $dirName $pattern]
        if { [llength $subDirList] > 0 } {
            foreach subDirFile $subDirList {
                lappend fileList $subDirFile
            }
        }
    }
    return $fileList
 } 
```

并调用以下命令：

```
findFiles some_dir_name *.c 
```

当前结果：

```
bad option "normalize": must be atime, attributes, channels, copy, delete, dirname, executable, exists, extension, isdirectory, isfile, join, lstat, mtime, mkdir, nativename, owned, pathtype, readable, readlink, rename, rootname, size, split, stat, tail, type, volumes, or writable 
```

现在，如果我们运行：

```
glob *.c 
```

我们得到很多文件，但它们都在当前目录中。

目标是获取机器上*所有*子文件夹中的*所有文件及其路径。*有谁能帮忙吗？

我真正想做的是找到 *.c 文件数量最多的目录。但是，如果我可以列出所有文件及其路径，我就可以计算每个目录中有多少文件，并获得数量最多的文件。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T19:20:56.883

您使用的是旧版本的 Tcl。`[file normalize]`大约在 2002 年左右在 Tcl 8.4 中引入。已经升级了。

如果你不能 - 那么你使用 glob 但只为文件调用一次，然后遍历目录。查看`glob -types`选项。

这是一个演示：

```
proc on_visit {path} {
    puts $path
}

proc visit {base glob func} {
    foreach f [glob -nocomplain -types f -directory $base $glob] {
        if {[catch {eval $func [list [file join $base $f]]} err]} {
            puts stderr "error: $err"
        }
    }
    foreach d [glob -nocomplain -types d -directory $base *] {
        visit [file join $base $d] $glob $func
    }
}

proc main {base} {
    visit $base *.c [list on_visit]
}

main [lindex $argv 0] 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-19T19:30:52.233

我会使用[::fileutil::traverse](http://tcllib.sourceforge.net/doc/traverse.html)函数来做到这一点。

就像是：

```
package require ::fileutil::traverse

proc check_path {path} {
     string equal [file extension $path] ".c"
}

set obj [::fileutil::traverse %AUTO% -filter check_path]
array set pathes {}
$obj foreach file {
     if {[info exists pathes([file dirname $file])]} {
        incr pathes([file dirname $file])
     } else {
        set pathes([file dirname $file]) 1
     }
}

# print pathes and find the biggest
foreach {name value} [array get pathes] {
     puts "$name : $value"
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-12T03:55:35.137

对于快速（1 级）文件模式匹配，请使用：

```
glob **/*.c 
```

如果要递归搜索，请使用：

```
proc ::findFiles { baseDir pattern } {
  set dirs [ glob -nocomplain -type d [ file join $baseDir * ] ]
  set files {}
  foreach dir $dirs { 
    lappend files {*}[ findFiles $dir $pattern ] 
  }
  lappend files {*}[ glob -nocomplain -type f [ file join $baseDir $pattern ] ] 
  return $files
}

puts [ join [ findFiles $basepath "*.tcl" ] \n ] 
```

# javascript - 将检查列表导出到字段标签

> ID：11104949
> 
> 赞同：0
> 
> 时间：2012-06-19T16:06:07.660
> 
> 标签：javascript, extjs, checkbox

我为我最后一年的项目建立了一个系统。在一个部分，我有一个联系人表列表，其中包含用于选择联系人号码的复选框，我计划将这些选定的电话号码添加到收件人列表中，而无需将选定的号码输入到列表中。

我的问题是我不知道如何将它们转移到列表中；我正在使用 EXTJ，并且我已经构建了一个按钮来添加到“添加到收件人”列表中。

很抱歉有任何语法错误。:)

我的复选框代码

```
var check = new Ext.grid.CheckboxSelectionModel();

var grid = new Ext.grid.GridPanel({
    store: myStore, 
    autoScroll:true,
    sm:check,
    listeners:{
        'rowdblclick': onRowDoubleClick,
        'rowclick': onRowClick
    },
    columns: [

        {id:'sub',header: "Course", width: 30,  dataIndex: 'Course'},
        {header: "Matrix No", width: 30, dataIndex: 'MatrixNo'},
         check,
        {header: "Phone No", width : 30, dataIndex: 'PhoneNo'},

    ],
      .
      .
      . 
```

收件人部分代码

```
Ext.onReady(function(){
    Ext.QuickTips.init();
            .
            .
            .
            .

    Ext.form.Field.prototype.msgTarget = 'side';
    var bd = Ext.getBody();
    var tabs = new Ext.FormPanel({
        labelWidth: 75,
        border:false,
        method: 'post', 
        width: 600,
    url: './php/send.php',
        items: {
            xtype:'tabpanel',
            activeTab: 0,
            defaults:{autoHeight:true, bodyStyle:'padding:15px'}, 
            items:[{
                layout:'form',
                defaults: {width: 475},
                defaultType: 'textfield',
                items: [{
                             .
                             .
                             .

            },{
                            fieldLabel: 'Recipient',
                    name: 'recipient',
                    layout:'column',
                    height:20,
                    allowBlank:false,
                    id:'recipient',
                    }]
            }]
             .
             .
             .

 buttons: [{
            text: 'Add to Recipient',
            handler: function (){
            .
                        .
                        .
                 );
              }
           })
        }
        }] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T19:52:24.637

您可以通过CheckBoxSelectionModel`check.getSelected()`在哪里获取选定记录的数组。`check`

如果我理解正确，您想生成一个简单的收件人电子邮件字符串来向他们发送消息。如果是这种情况（例如`'recipient'`，在您的示例中是纯文本字段），那么它将类似于：

```
var recs = check.getSelected(),  // gives you an array of checked records in grid
    recipients = []; 

for(var i = 0, len = check.length; i < len; i++) {
    // build recipient string array
    recipients.push(recs[i].get('email')); // get all necessary fields from the record
}

recipientField.setValue(recipients.join(','));
// the field will contain a string like "amy@mail.org,john@mail.org,lucy@mail.org..." 
```

# bing-maps - 是否可以将行车路线所需的数据传递到 Bing 地图网站？

> ID：11104956
> 
> 赞同：2
> 
> 时间：2012-06-19T16:06:19.517
> 
> 标签：bing-maps

我有一个应用程序，它当前链接到谷歌地图，向它传递所需的 URL 参数，以显示一组点（通常为 3+）的行车路线。这种方法很有效，并且允许我们不使用他们的 API，这很好。

在谷歌的帮助下，他们通过使用“saddr”作为起始地址、“to”作为航路点以及“daddr”作为目的地的参数，使其变得非常简单明了。如果我想将地图置于打印模式，我什至可以传入“pw”。简单，容易，效果很好！

我正在尝试确定 Bing 地图是否支持相同的功能。到目前为止，我无法找到任何示例来说明如何做到这一点，也无法在使用 Bing 地图创建自己的行车路线后轻松解码 URL。

同样，我想避免使用 API，并在单击我的链接时将用户发送到 Bing 的网站。

这可能吗？如果是，怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-12-12T12:46:53.633

如果您通过链接访问博客文章，Alastair 的答案将包含完整的详细信息。

但是，如果您想要快速回答（再次感谢 Alastair），请使用此根：

`http://www.bing.com/maps/default.aspx?where1=`

并把你的搜索目的地放在最后。例如。这可以让您使用其邮政编码前往伦敦的 Atwood Rd：

[http://www.bing.com/maps/default.aspx?where1=W6%200HX](http://www.bing.com/maps/default.aspx?where1=W6%200HX)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T18:56:21.113

对的，这是可能的。

我刚刚写了一篇小博文来演示如何：[http ://alastaira.wordpress.com/2012/06/19/url-parameters-for-the-bing-maps-website/](http://alastaira.wordpress.com/2012/06/19/url-parameters-for-the-bing-maps-website/)

# php - PHP Session not persisting

> ID：11104963
> 
> 赞同：0
> 
> 时间：2012-06-19T16:06:50.710
> 
> 标签：php, wordpress, session, session-cookies

I am trying to use PHP session to store a state that is passed through 1 time via the querystring from a referring website. The trouble is locally I can maintain this state in the session scope but it is not working the same on the production server.

Im trying to do this in Wordpress in wp-config.php at the foot of the file:

```
session_set_cookie_params(0);
session_start(); 
```

Starting a session that expires with the browser. Then checking & setting for the querystring param:

```
if (!isset($_SESSION['isEUStore']) && isset($_GET['store']) && strtolower($_GET['store'])=='eu') $_SESSION['isEUStore']=true;
elseif (!isset($_SESSION['isUSStore']) && isset($_GET['store']) && strtolower($_GET['store'])=='us') $_SESSION['isUSStore']=true; 
```

However, $_SESSION['isEUStore'] or $_SESSION['isUSStore'] returns NULL on any other Wordpress page in the site.

Any advice? Some configuration setting that is different perhaps?

Thanks,

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T12:14:03.963

我没有解决会话被遗忘的问题，但我发现使用 cookie 可以代替。如：

```
if (!empty($_GET['store']) && strtolower($_GET['store'])=='eu') {
    setcookie('isEUStore', true, 0, '/', $faco_domain);
    setcookie('isUSStore', true, time()-3600, '/', $faco_domain);
} elseif (!empty($_GET['store']) && strtolower($_GET['store'])=='us') {
    setcookie('isUSStore', true, 0, '/', $faco_domain);
    setcookie('isEUStore', true, time()-3600, '/', $faco_domain);
} 
```

cookie 不会在 Wordpress 页面之间被遗忘，但会在浏览会话结束时过期。

# php - Return JSON data from PHP

> ID：11104964
> 
> 赞同：0
> 
> 时间：2012-06-19T16:06:52.527
> 
> 标签：php, jquery, json

**edit/operacoes.php**

```
header('Content-Type: application/json');
include('../../lib/mysql.class.php');

$db = new MySQL();
if($db->Error()) $db->Kill();

//VARIÁVEIS DA FORM
$id = intval($_POST['id']);

$sql = "SELECT * FROM operacoes WHERE id=$id";
if(!$db->Query($sql)) $db->Kill();

$db->MoveFirst();
$row = $db->Row();
$data['nome'] = $row->nome;
$data['produto'] = $row->produto;
$data['componente'] = $row->componente;
$data['materiaprima'] = $row->materiaprima;

echo json_encode($data); 
```

**jQuery:**

```
$.post('edit/operacoes.php',{id:id},function(data){
    $('div.form-container h1.title').text("Editar Existente");
    $('input#idbd').empty().val(id);
    $('input#nome').empty().val(data.nome);
    $('input#produto').attr('checked', (data.produto==1)?true:false);
    $('input#componente').attr('checked', (data.componente==1)?true:false);
    $('input#materiaprima').attr('checked', (data.materiaprima==1)?true:false);
    $('div#addbuttons').css('display','none');
    $('div#editbuttons').css('display','block');
    showPopup();
}); 
```

**HTML:**

```
<tr>
    <td colspan="3" class="input listas">
        <select multiple="multiple" name="escolha_ferramentas" id="escolha_ferramentas" size="15" class="list">
            <option value="3">Ferramenta 3</option>
            <option value="4">Ferramenta 4</option>
            <option value="5">Ferramenta 5</option>
            <option value="6">Ferramenta 6</option>
        </select>
        <div class="list-controls">
            <input type="button" value=">" id="next-ferramentas"><br><br>
            <input type="button" value="<" id="prev-ferramentas">
        </div>
        <select multiple="multiple" name="ferramentas[]" id="ferramentas" size="15" class="list">
        </select>
        <div style="clear:both;"></div>
    </td>
</tr> 
```

This works great, except for the selects.

The logic is, the ids that are in the BD (a different one), are the options that need to be in the right select and removed from the left select (append to the right select and remove from the left select).

My question is, how, using json, can I achieve this? Get the ids to the jquery and then loop them to move the options from one select to another?

**Edit** I created another php file just to give the ids I need. PHP returns `["2","3","4"]`. How do I loop through that in jQuery.post `function(data){loophere}`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T16:12:48.413

我会从 PHP 传递一个字符串数组（json 看起来像`['string','string','string']`，然后在其上使用一个循环来指示将哪些字符串放在“另一边”。

我还没有看到你从服务器返回的那些，所以也许传递元素的语言翻译让我失望，但很明显你正在制作其中之一：

```
 A           B
[       ]   [       ]
[       ] > [       ]
[       ] < [       ]
[       ]   [       ] 
```

只需将需要从 A 中删除的元素作为字符串数组传递到 B 中，然后循环遍历数组元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T16:25:15.897

好吧，有几种选择可以实现您想要的。

在您的 ajax 调用中，我会将左侧选择中的选定 ID 和右侧选择中的 id 数组传递给 php，然后在返回 php 时，您将获得一个对象，其中包含要在左侧选择中填充的数据正确的选择再次首先清空它们，因此您永远不会感到困惑，并且可以控制每个选择上的元素。

# spring-mvc - Toggle language on the current page with JSTL or Spring MVC tag

> ID：11104966
> 
> 赞同：3
> 
> 时间：2012-06-19T16:06:56.547
> 
> 标签：spring-mvc, jstl

I'm using Spring MVC LocaleChangeInterceptor to handle change of locale. I need 2 simple links to switch the current page between English and French while keeping any existing parameter of the current URL.

The solution I've came up with looks rather ugly. A c:url tag with an empty value to link to the current page and a loop to append any existing parameter except for the language parameter that I don't want to see twice. So the code is as follow.

```
<c:url value="" var="englishURL">
    <c:forEach items="${param}" var="currentParam">
        <c:if test="${currentParam.key != 'siteLanguage'}">
            <c:param name="${currentParam.key}" value="${currentParam.value}"/>
        </c:if>
    </c:forEach>
    <c:param name="siteLanguage" value="en"/>
</c:url>
<c:url value="" var="frenchURL">
    <c:forEach items="${param}" var="currentParam">
        <c:if test="${currentParam.key != 'siteLanguage'}">
            <c:param name="${currentParam.key}" value="${currentParam.value}"/>
        </c:if>
    </c:forEach>
    <c:param name="siteLanguage" value="fr"/>
</c:url>
<a href="${englishURL}">English</a> / <a href="${frenchURL}">Français</a> 
```

Does someone have a less ugly way to create these links? I know I can create a custom tag to avoid the duplication but I feel that's a very small improvement since I need to declare the tag and all.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T08:40:11.607

不是真的不那么难看，但至少代码重复更少

```
<c:forEach var="tuple" items="${fn:split('en,English|fr,Français|nl,Nederlands', '|')}" varStatus="status">
  <c:set var="locale" value="${fn:split(tuple, ',')[0]}"/>
  <c:set var="name" value="${fn:split(tuple, ',')[1]}"/>
  <c:url value="" var="url">
    <c:forEach items="${param}" var="currentParam">
      <c:if test="${currentParam.key != 'changeLocale'}">
        <c:param name="${currentParam.key}" value="${currentParam.value}"/>
      </c:if>
    </c:forEach>
    <c:param name="changeLocale" value="${locale}"/>
  </c:url>
  <a href="${url}">${name}</a>
  <c:if test="${not status.last}"> / </c:if>
</c:forEach> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T06:11:38.767

从您的问题来看，您似乎每次都在您的网址中附加了 siteLanguage 参数。这是对的吗？为什么你需要这样做？您可以将此语言更改保存在会话或 cookie 中，然后每次不需要指定 siteLanguage 参数。选择语言后，语言参数将存储在会话或 cookie 中。Spring 将自己管理其余的事情。

只需指定 SessionLocaleResolver 或 CookieLocaleResolver 以及您的 LocaleChangeInterceptor。它会为你做到这一点。

希望这对您有所帮助。干杯。

# ios - MonoTouch Build: ld: symbol(s) not found for architecture armv7

> ID：11104969
> 
> 赞同：6
> 
> 时间：2012-06-19T16:07:02.787
> 
> 标签：ios, xamarin.ios, armv7

我有一个在 i386/iOS 模拟器上构建和运行良好的 MonoTouch 项目。该项目引用了一个本机 (Obj-C) 库，我使用 Xamarin 的 BindingSample 中描述的 btouch 过程将其转换为 MonoTouch DLL：

[https://github.com/xamarin/monotouch-samples/tree/eb640165f0485ff59b2f80e73ccff382bf4f2083/BindingSample/src/binding](https://github.com/xamarin/monotouch-samples/tree/eb640165f0485ff59b2f80e73ccff382bf4f2083/BindingSample/src/binding)

因此，我的 makefile 构建了所有三种架构（i386、armv6 和 armv7），然后将三个输出组合到一个“通用”库，最后使用 btouch 生成 MonoTouch DLL。

为了确保我的通用库包含所有三种体系结构，我检查了`lipo -info`，确实，它包含 i386、armv6 和 armv7。

但是，当我在实际的 iOS 设备上进行部署时，我收到以下错误：

```
Undefined symbols for architecture armv7:
  "_ABAddressBookCreate", referenced from:
      -[ContactsTokenField setupSms] in libContactsTokenFieldViewUniversal.a(ContactsTokenField.o)
      -[TITokenFieldView setupWithAddressType:prompt:] in libContactsTokenFieldViewUniversal.a(TITokenField.o)
  "_ABAddressBookCopyArrayOfAllPeople", referenced from:
      -[ContactsTokenField setupSms] in libContactsTokenFieldViewUniversal.a(ContactsTokenField.o)
      -[TITokenFieldView setupWithAddressType:prompt:] in libContactsTokenFieldViewUniversal.a(TITokenField.o)
  "_ABAddressBookGetPersonCount", referenced from:
      -[ContactsTokenField setupSms] in libContactsTokenFieldViewUniversal.a(ContactsTokenField.o)
      -[TITokenFieldView setupWithAddressType:prompt:] in libContactsTokenFieldViewUniversal.a(TITokenField.o)
  "_ABRecordCopyValue", referenced from:
      -[ContactsTokenField setupSms] in libContactsTokenFieldViewUniversal.a(ContactsTokenField.o)
      -[TITokenFieldView setupWithAddressType:prompt:] in libContactsTokenFieldViewUniversal.a(TITokenField.o)
  "_kABPersonFirstNameProperty", referenced from:
      -[ContactsTokenField setupSms] in libContactsTokenFieldViewUniversal.a(ContactsTokenField.o)
      -[TITokenFieldView setupWithAddressType:prompt:] in libContactsTokenFieldViewUniversal.a(TITokenField.o)
      -[ContactsTokenField setupSms] in libContactsTokenFieldViewUniversal.a(ContactsTokenField.o)
      -[TITokenFieldView setupWithAddressType:prompt:] in libContactsTokenFieldViewUniversal.a(TITokenField.o)
  "_kABPersonLastNameProperty", referenced from:
      -[ContactsTokenField setupSms] in libContactsTokenFieldViewUniversal.a(ContactsTokenField.o)
      -[TITokenFieldView setupWithAddressType:prompt:] in libContactsTokenFieldViewUniversal.a(TITokenField.o)
      -[ContactsTokenField setupSms] in libContactsTokenFieldViewUniversal.a(ContactsTokenField.o)
      -[TITokenFieldView setupWithAddressType:prompt:] in libContactsTokenFieldViewUniversal.a(TITokenField.o)
  "_ABMultiValueGetCount", referenced from:
      -[TITokenFieldView setupWithAddressType:prompt:] in libContactsTokenFieldViewUniversal.a(TITokenField.o)
  "_ABMultiValueCopyLabelAtIndex", referenced from:
      -[TITokenFieldView setupWithAddressType:prompt:] in libContactsTokenFieldViewUniversal.a(TITokenField.o)
  "_ABMultiValueCopyValueAtIndex", referenced from:
      -[TITokenFieldView setupWithAddressType:prompt:] in libContactsTokenFieldViewUniversal.a(TITokenField.o)
  "_kABPersonEmailProperty", referenced from:
      -[TITokenFieldView setupWithAddressType:prompt:] in libContactsTokenFieldViewUniversal.a(TITokenField.o)
  "_kABPersonPhoneProperty", referenced from:
      -[TITokenFieldView setupWithAddressType:prompt:] in libContactsTokenFieldViewUniversal.a(TITokenField.o)
ld: symbol(s) not found for architecture armv7
collect2: ld returned 1 exit status

mtouch exited with code 1 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-19T16:40:26.170

发现问题：原生库依赖于AddressBook框架，忘记在API定义项目的AssemblyInfo.cs中包含：

```
[assembly: LinkWith ("libContactsTokenFieldViewUniversal.a", LinkTarget.Simulator | LinkTarget.ArmV6 | LinkTarget.ArmV7, ForceLoad = true, Frameworks="AddressBook Foundation")] 
```

# ruby-on-rails - Netbeans Ruby/Rails project, Can't run, Bundler output window blank empty

> ID：11104971
> 
> 赞同：0
> 
> 时间：2012-06-19T16:07:09.250
> 
> 标签：ruby-on-rails, ruby-on-rails-3, netbeans, netbeans-7

I setup a new rail application in Netbeans 7.1\. Without writing any code, I wanted to see if it just runs but

When clicking run I get errors:

```
C:/Ruby193/lib/ruby/gems/1.9.1/gems/mysql2-0.3.11-x86-mingw32/lib/mysql2/mysql2.rb:2:in `require': 126: The specified module could not be found.   - C:/Ruby193/lib/ruby/gems/1.9.1/gems/mysql2-0.3.11-x86-mingw32/lib/mysql2/1.9/mysql2.so (LoadError)
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/mysql2-0.3.11-x86-mingw32/lib/mysql2/mysql2.rb:2:in `<top (required)>'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/mysql2-0.3.11-x86-mingw32/lib/mysql2.rb:9:in `require'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/mysql2-0.3.11-x86-mingw32/lib/mysql2.rb:9:in `<top (required)>'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/bundler-1.1.4/lib/bundler/runtime.rb:68:in `require'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/bundler-1.1.4/lib/bundler/runtime.rb:68:in `block (2 levels) in require'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/bundler-1.1.4/lib/bundler/runtime.rb:66:in `each'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/bundler-1.1.4/lib/bundler/runtime.rb:66:in `block in require'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/bundler-1.1.4/lib/bundler/runtime.rb:55:in `each'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/bundler-1.1.4/lib/bundler/runtime.rb:55:in `require'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/bundler-1.1.4/lib/bundler.rb:119:in `require'
    from C:/_PROJECTS/active/Callisto2.0/config/application.rb:7:in `<top (required)>'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/railties-3.2.6/lib/rails/commands.rb:53:in `require'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/railties-3.2.6/lib/rails/commands.rb:53:in `block in <top (required)>'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/railties-3.2.6/lib/rails/commands.rb:50:in `tap'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/railties-3.2.6/lib/rails/commands.rb:50:in `<top (required)>'
    from script/rails:6:in `require'
    from script/rails:6:in `<main>' 
```

I've installed a few gems it was complaining about through netbeans gem manager but I got stuck at mysql2\. Even though I installed mysql and mysql2 gems, it still won't find it.

With little research, it seems i have to do a `bundle install`, for WEBrick to run/ check dependencies or whatever. Netbeans project has a Bundler context menu with options for check, init, install, show etc.

None of those produce any output in the Output: Bundler window. The Bundler process starts in netbeans processes but then quits after a second. No errors, info or anything.

What do I need to do to get this working. This is a blank Ruby/Rails Application through Netbeans 7.1\.

**EDIT 1:** The error in file: `C:/Ruby193/lib/ruby/gems/1.9.1/gems/mysql2-0.3.11-x86-mingw32/lib/mysql2/mysql2.rb:2` contains the following lines:

```
RUBY_VERSION =~ /(\d+.\d+)/
require "mysql2/#{$1}/mysql2" 
```

Nothing Special. I tried changing that to mysql, or just "mysql2", it doesn't work. Errors that client is not initialized when I comment the whole line.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T16:33:12.960

Netbeans 停止支持 Rails。看 ：

> [Ruby 在 Netbeans 7 中掉线了，如何在 Netbeans7 中使用它？](https://stackoverflow.com/questions/5736417/ruby-dropped-in-netbeans-7-how-to-use-it-in-netbeans7)

和：

> [http://noteslog.com/post/netbeans-6-9-1-ruby-1-9-2-rails-3-0-0-mysql-gem-2-8-1/](http://noteslog.com/post/netbeans-6-9-1-ruby-1-9-2-rails-3-0-0-mysql-gem-2-8-1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-07T13:33:10.387

您是否收到您的用户不允许安装 gems 的消息？

然后你应该在你的 Rails 应用程序根文件夹中尝试以下命令

```
bundle install --path vendor/bundle 
```

确保在运行上一个命令之前`database.yml`在`config`文件夹中配置好，或者在创建文件后再次运行它。

# iphone - IOS：使用从 web 服务收到的公钥解密消息

> ID：11104973
> 
> 赞同：0
> 
> 时间：2012-06-19T16:07:17.140
> 
> 标签：iphone, encryption, public-key-encryption

我是这个话题的新手，如果这是一个愚蠢的问题，我很抱歉：\

我正在尝试使用给定的公钥解密消息。消息和公钥都是从 Web 服务提供的。

请参阅以下代码了解我目前如何进行解密：

```
 for (NSValue *refVal in keyRefs) {
    SecKeyRef p_key = NULL;
    [refVal getValue:&p_key];
    if (p_key == NULL) continue;

    size_t dataLength = encryptedData.length;
    size_t outPutLength = MAX(dataLength, SecKeyGetBlockSize(p_key));

    void *outPutBuf = malloc(outPutLength);
    if (outPutBuf) {

        //  Error handling
        OSStatus status = SecKeyDecrypt(p_key,
                                        kSecPaddingNone,
                                        encryptedData.bytes,
                                        encryptedData.length,
                                        outPutBuf,
                                        &outPutLength
                                        );

        NSLog(@"decryption result code: %ld (size: %lu)", status, outPutLength);
        NSLog(@"FINAL decrypted text: %s", outPutBuf);

        if (status == errSecSuccess) {
            break;
        }
    } else {

        //Error handling
    }
} 
```

我没有收到任何错误，但解密后的字符串显示如下（正确的输出应该是 JSON 数组）：

```
decryption result code: 0 size:511)  
FINAL decrypted text: ÀáÀáÀáÀáÀáÀáÀáÀáÀáÀáÀáÀáÀáÀáÀáÀáÀáÀáÀáÀáÀáÀáÀáÀáÀáÀáÀáÀáÀáÀáÀáÀáÀáÀáÀáÀáÀáÀáÀáÀáÀáÀáÀáÀáÀáÀáÀáÀáÀáÀáÀáÀáÀáÀáÀáÀáÀáÀáÀáÀáÀáÀáÀáÀáÀáÀáÀáÀáÀáÀáÀáÀáÀáÀáÀáÀáÀáÀáÀáÀáÀáÀáÀáÀáÀáÀáÀáÀáÀáÀáÀáÀáÀáÀáÀáÀáÀáÀáÀáÀáÀáÀáÀáÀáÀáÀáÀáÀáÀáÀáÀáÀáÀáÀáÀáÀáÀáÀáÀáÀáÀáÀáÀá 
```

是因为我使用带有“公钥”而不是“私钥”的“SecKeyDecrypt”吗？在那种情况下，我应该用什么来解密？

感谢您对此的任何帮助！

编辑：我正在使用来自：[http](http://blog.flirble.org/2011/01/05/rsa-public-key-openssl-ios/) ://blog.flirble.org/2011/01/05/rsa-public-key-openssl-ios/ 的代码来使用我从服务器获得的公钥（这是“代码片段中的 keyRefs" 来自）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T16:25:44.717

当然，公钥是别人用来加密数据的东西，只有拥有私钥的人才能解密它。

公钥的定义是您可以将其提供给任何人。您不希望任何人能够解密其他任何人的加密消息，对吗？

无法从您的代码片段中分辨出您的私钥存储在哪里，或者 keyRefs 的内容（甚至类）是什么。

编辑：针对上述 OP 的评论。并澄清。

*“公钥本身是存储在服务器上的 RSA 密钥对的公共部分。加密消息是在服务器上创建的，首先对对象进行 JSON 编码，然后使用 OPENSSL_PKCS1_PADDING 的私钥加密，然后使用 base64 -编码，然后作为最终消息的一部分再次进行 JSON 编码。消息和公钥存储在客户端上。我想要的是使用公钥在客户端上解密消息。正如我所说，我在这个主题上不太好，所以我可能试图以错误的方式做到这一点“*

这不是公钥密码学的工作原理。服务器和客户端交换公钥。然后他们每个人都使用对方的公钥来加密发送给对方的数据。接收方总是使用自己的私钥来解密消息。

如果您希望服务器生成加密响应，请让客户端在请求中传递其公钥，使用该公钥加密响应，然后使用客户端的私钥解密客户端上的响应。

# maven - Maven Ant 部署 - OutOfMemoryError：Java 堆空间

> ID：11104978
> 
> 赞同：2
> 
> 时间：2012-06-19T16:07:41.287
> 
> 标签：maven, ant, out-of-memory, heap-memory, pom.xml

# 设想

在使用*Maven Ant Task* `artifact:deploy`时，我遇到了错误`java.lang.OutOfMemoryError: Java heap space`。

如果正在部署的文件的大小大于 25 MB，我只会收到错误消息。我的工件大小不超过 50 MB。

> 可能是什么原因？而且，我能做些什么来解决它？

* * *

## 代码片段

```
 <artifact:deploy file="@{app.name}.jar">
            <pom file="@{pom.file}"/>               

            <remoteRepository url="http://xxx.com:xxx/xxx-webapp/content/repositories/xxx-releases/">
                <authentication username="xxx" password="xxx" />
            </remoteRepository>
        </artifact:deploy> 
```

* * *

## 现有解决方案

大多数在线结果表明它与**JVM 默认堆大小**有关，可以通过设置适当的**环境变量**来修复它。

但是，我希望 Ant 脚本可以在任何计算机上运行，​​而**不是依赖**于环境变量。

> 有没有办法在 Ant 脚本或 `POM`文件中配置这些设置？

### 编辑

该`install-provider`任务（http://maven.apache.org/ant-tasks/examples/install-deploy.html）似乎对某些人有用。我在使用它时不断收到下载错误。

* * *

## 回答

事实证明，当我在另一台机器上运行我的 Maven Ant 任务时（这可能有更多的内存分配给 JVM 堆） ，我**没有收到Java 堆错误。**因此，我没有尝试过@Attila 提到的解决方案，尽管它似乎朝着正确的方向发展。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T16:12:25.907

ant 运行后，您无法更改运行 ant 的 JVM 的堆大小。因此，您唯一的选择是在单独的 JVM 中运行消耗大量内存的任务，并指定足够的堆空间。请注意，这依赖于允许您*派生*新的 JVM 来执行任务的任务

*更新*：我找不到指定 fork maven (deploy) 任务的方法，但是[这个页面](http://maven.apache.org/ant-tasks/examples/mvn.html)指定了如何定义一个宏来使用*java*任务运行 maven（请注意，这依赖于安装和正确配置的 maven beeing机器）（参见“使用 Java 任务”部分）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T16:13:52.410

请尝试增加 VM 内存，例如：-Xmx512m 如果您使用的是 ANT，您可以将其添加到 ANT_OPTS 环境变量中：ANT_OPTS="-Xmx512m"

# actionscript - Actionscript if statement to include file if variable is true

> ID：11104982
> 
> 赞同：0
> 
> 时间：2012-06-19T16:08:02.880
> 
> 标签：actionscript, if-statement, actionscript-2

I am creating a script to include hard code and click tags for web advertising. Basically I'm trying to make the process easier by having all of my html links in one file, but controlled with if statements.

So far it works fine, but I get kick backs from google/aol/yahoo because when they go through the swf they see these other html links, even though they are not being used, and kick back the banner.

I'm trying now to include two files, one with hard codes, and another with just click tags. And if a variable is true, include the hardcode file, if not ignore it. The syntax makes sense to me, but is throwing an error in flash still. Is there a better way of going about this?

Here is my code:

```
on(release){    
    var video = "false";
    var hardclicktags = "false"

    #include "_clicktags.as"

    if( hardclicktags == "true" ){
        #include "_hardtags.as"
    };

} 
```

This works fine if _hardtags.as is present in the file, but because of google/yahoo/aol still reading the other if statements I can't have any other html links inside of the file. So I would remove my _hardtags.as from the folder before I publish. But this is throwing an error saying it can't find the file. To me though, because hardclicktags = "false" it should ignore this line all together.

Is there a way around this, or am I kind of stuck going about this a different way?

Thanks in advance!

# iphone - 没有 NavigationController 的 iAd 多视图

> ID：11104986
> 
> 赞同：0
> 
> 时间：2012-06-19T16:08:28.047
> 
> 标签：iphone, xcode, view, iad

今天我完成了我的项目，想把它上传到 AppStore。现在我想实施 iAd。我的应用程序中有 4 个视图并通过

```
 [self presentModalViewController:eas animated:YES]; 
```

它们之间。我想在所有这些中显示 iAd 横幅。我在互联网上找到了共享 iAd，但它只适用于导航控制器或标签栏。我是否还有其他选择可以在每个视图中实施 iAd？

干杯诉利茨。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T16:14:29.227

您可以创建 UIViewController 的子类来设置 iAd 并将其用于您的视图控制器。

更好的方法（避免子类化会锁定您使用该子类）可能是为设置 iAd 的 UIViewController创建一个[类别并使用它。](https://developer.apple.com/library/ios/#documentation/cocoa/conceptual/objectivec/Chapters/ocCategories.html#//apple_ref/doc/uid/TP30001163-CH20-SW1)

# javascript - 准备在 d3.js 中使用动态饼图

> ID：11104995
> 
> 赞同：2
> 
> 时间：2012-06-19T16:09:01.287
> 
> 标签：javascript, d3.js

我正在评估将到目前为止使用 highcharts.js 生成的图形更改为 d3.js

只是为了好玩，我想了解 d3.js 的工作原理。

我想知道是否有类似于下面的 url 的东西（看看你是否点击了一个饼图，它会给你新的数据），一些动态的并且可以使用（或者不从零开始实现）。

我想要达到的，或多或少...

[http://lully.snv.jussieu.fr/gbif/mapping/graphs/examples/pie-legend.htm](http://lully.snv.jussieu.fr/gbif/mapping/graphs/examples/pie-legend.htm)

提前致谢

佩雷

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-19T21:14:55.623

如果你想替换 H​​ighcharts，我认为目前唯一可用的开源替代品是 Bob Monteverde 的 Novus 图表库： http: [//novus.github.com/nvd3/](http://novus.github.com/nvd3/)。NVD3 有一个漂亮的饼图，也有很好的图例。看看这个库中的所有图表，你就会明白我的意思。您还可以在 Stephen Boak 的教程中找到一个不错的饼图：http: [//blog.stephenboak.com/2011/08/07/easy-as-a-pie.html](http://blog.stephenboak.com/2011/08/07/easy-as-a-pie.html)。另一个有趣的选择是在 D3 js google 组中查找 Frank Guerino 的问题。如果我是你，我会使用 NVD3。它可能需要一些调整，但它似乎是目前最好的选择。祝你好运！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-01T18:31:30.323

使用 d3.js 生成饼图的简单功能。这个函数是[http://xhprof.io/](http://xhprof.io/)项目的一部分。它能够处理任意大小的数据集。它有几个允许自定义的选项，例如标签边距、圆半径和百分比数据的可见性（请参阅源代码）。

![在此处输入图像描述](../Images/ff2b3a70acd3f9e8db06344b1159a454.png)

该演示可在[https://dev.anuary.com/858b33b7-bd66-507b-a9f1-533e4de79ba3/](https://dev.anuary.com/858b33b7-bd66-507b-a9f1-533e4de79ba3/)获得。源代码可在[https://github.com/gajus/pie-chart](https://github.com/gajus/pie-chart)获得。

# xcode - 带有 WCF 的 XCode 4.3

> ID：11104999
> 
> 赞同：0
> 
> 时间：2012-06-19T16:09:10.973
> 
> 标签：xcode, ios4

我试图弄清楚如何设计一个可以连接到 WCF 服务的 iOS 应用程序。我环顾四周，WSMakeStubs 看起来好像可以正常工作，但我在 XCode 4.3 中的任何地方都找不到它，也找不到下载它的地方。我已经下载了命令行工具，然后下载了更多命令行工具，但似乎没有包含在内。

我已经尝试过[如何在 xcode 中解析 wsdl，](https://stackoverflow.com/questions/5013489/how-to-parse-the-wsdl-in-xcode)但该应用程序似乎无法正常工作。我浏览 URL，选择一个文件夹并单击 Parse。它说完成但不生成任何 .h 文件，所以我不确定我做错了什么......

有人可以指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T20:03:57.857

终于找到了。转到我的 Apple Developer 登录并转到旧下载。然后安装了 XCode 3，它包含在其中。希望现在我可以继续使用 WCF 应用程序。

[https://developer.apple.com/downloads/index.action?name=Xcode](https://developer.apple.com/downloads/index.action?name=Xcode)