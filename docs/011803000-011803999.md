# StackOverflow 问答 11803000-11803999

# image - CodeIgniter 和显示图片/上传图片

> ID：11803002
> 
> 赞同：0
> 
> 时间：2012-08-03T20:41:59.177
> 
> 标签：image, codeigniter

如果文件夹中没有图像，我正在处理一个应该说“请上传图像”的画廊，但旁边还显示上传的图像，但这些东西不能正常工作。

没有显示错误。

上传图像并将它们更改为缩略图工作并且它们进入正确的文件夹，但将它们拉出是另一回事，我检查了这些值并且它们进入了正确的目的地：

```
 $this->gallery_path = realpath(APPPATH . '../images');
    $this->gallery_path_url = base_url() . 'images/'; 
```

这是我的自动加载：

```
$autoload['helper'] = array('url', 'form', 'file'); 
```

这是我怀疑 $data 空出来的视图？：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>

<title>Gallery</title>

</head>

<body>
<div id="gallery">
    <?php if (isset($data) && count($data)) : ;?>

        <?php foreach($images as $image): ?>
            <div class="thumb">
                <a href="<?php echo $image['url']; ?>">
                    <img src="<?php echo $image['thumb_url']; ?>" />
                </div>
        <?php endforeach; else: ?>

        <div id="blank_gallery">Please upload an image</div>
    <?php endif; ?>

</div>

<div id="upload">

<?php

echo form_open_multipart('gallery');
echo form_upload('userfile');
echo form_submit('upload', 'Upload');
echo form_close();
?>

</div>

</body>
</html> 
```

这是我的控制器：

```
<?php
class Gallery extends CI_Controller
{
function index()
{
    $this->load->model('Gallery_model');
    if($this->input->post('upload'))
    {
        //handle upload
        $this->Gallery_model->do_upload();
    }

    $data['images'] = $this->Gallery_model->get_images();

    $this->load->view('gallery', $data);
}

}

?> 
```

这是模型：

```
<?php
class Gallery_model extends CI_Model{

var $gallery_path;
var $gallery_path_url;

function __construct()
{
    parent::__construct();

    $this->gallery_path = realpath(APPPATH . '../images');
    $this->gallery_path_url = base_url() . 'images/';
}

function do_upload()
{

    //handle userfile
    $config = array(
        'allowed_types' => 'jpg|jpeg|gif|png',
        'upload_path' => $this->gallery_path,
        'max_size' => 2000
    );

    $this->load->library('upload', $config);
    if(!$this->upload->do_upload()) 
    {
        die($this->upload->display_errors());
    }
    $image_data = $this->upload->data();

    $config = array(
        'source_image' => $image_data['full_path'],
        'new_image' => $this->gallery_path . '/thumbs',
        'maintain_ratio' => true,
        'width' => 150,
        'height' => 100
    );

    $this->load->library('image_lib', $config);
    $this->image_lib->resize();
        if(!$this->image_lib->resize()) 
        {
            die($this->image_lib->display_errors());
        }
}

function get_images(){
    $files = scandir($this->gallery_path);
    $files = array_diff($files, array('.', '..', 'thumbs'));

    $images = array();

    foreach ($files as $file){
        $images[] = array(
            'url' => $this->gallery_path_url . $file,
            'thumb_url' => $this->gallery_path_url . 'thumbs/' . $file,
        );

    }

}

}

?> 
```

非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T11:10:43.327

```
function get_images(){
    /* all the stuff you already have... */

    /* return the array! */
    return $images;
} 
```

# c# - 发送/接收 WiFi 流量数据

> ID：11803003
> 
> 赞同：1
> 
> 时间：2012-08-03T20:42:01.533
> 
> 标签：c#, .net, wifi

是否可以自己监控 WiFi 流量并发送数据？我的目标是学习如何监控探测请求、发送 deauth 数据包和其他类似于 AirCrack 和 BackTrack 操作系统风格中的其他库的操作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T20:54:13.620

您可能很难在 Windows 环境中做您想做的事情。如果您浏览一下 Aircrack 站点，您会发现 Windows 版本与其 Linux 版本相比毫无用处，这在很大程度上是由于 Linux 中的开源驱动程序的可用性以及 Windows 中的缺乏。您绝对可以进行数据包嗅探等（[http://www.codeproject.com/Articles/12458/SharpPcap-A-Packet-Capture-Framework-for-NET](http://www.codeproject.com/Articles/12458/SharpPcap-A-Packet-Capture-Framework-for-NET)），但您不会获得可以摆脱的稳健性Linux 中的类似应用程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T20:49:53.927

我不知道只发送随机无线电信号，但您当然可以监控流量和数据。这是[一篇描述如何做到这](http://www.codeproject.com/Articles/4217/Packet-Sniffing-with-Winpcap-Functions-Ported-to-a)一点的文章。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-11T02:19:45.230

来自 Riverbed 的 AirPcap。USB 适配器可以在监控模式下运行，并具有用于通道切换等的 API，如果您购买了正确的适配器，您可以发送 Wi-Fi 帧。Wireshark 也有内置支持。Alfa 卡是一个不错的选择，但仅适用于 'nix

# ruby-on-rails - rails 3 不会为字符串呈现格式 xml

> ID：11803009
> 
> 赞同：0
> 
> 时间：2012-08-03T20:42:54.973
> 
> 标签：ruby-on-rails

所以我试图从我的控制器发回 xml ..

```
render xml: ['hello world'] 
```

正确地给了我：

```
<?xml version="1.0" encoding="UTF-8"?>
<strings type="array">
  <string>hello world</string>
</strings> 
```

然而

```
render xml: 'hello world' 
```

给出 xml 标头，但正文只是：

```
hello world 
```

这不是xml格式。

漏洞？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T21:24:49.227

从 API 文档：

> 当一个请求进来时，例如一个 XML 响应，会发生三个步骤：
> 
> 1) 响应者在 people/index.xml 中搜索模板；
> 
> 2) 如果模板不可用，它将 `#to_xml`在给定资源上调用；
> 
> 3）如果响应者没有`respond_to :to_xml`，请调用 `#to_format`它。

见： [http ://api.rubyonrails.org/classes/ActionController/Responder.html](http://api.rubyonrails.org/classes/ActionController/Responder.html)

在 Rails 中，数组响应 to_xml 而字符串不响应。

# ios - iOS applicationWillEnterBackground 在哪里定义？什么时候叫？

> ID：11803011
> 
> 赞同：0
> 
> 时间：2012-08-03T20:43:06.670
> 
> 标签：ios, xcode, protocols, lifecycle

可能是一个新手问题：我正在使用一些具有实现的遗留代码

```
- (void)applicationWillEnterBackground:(UIApplication *)application 
```

标头中没有明确定义此方法，因此我认为它是采用的协议（UIApplicationDelegate）的一部分，但它不包含在苹果的文档中。

此方法是否作为应用程序生命周期的一部分调用？（毕竟该方法的名称与列为 UIApplicationDelegate 方法的 applicationDidEnterBackground 非常相似）

如果它是生命周期的一部分，它什么时候被调用？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-03T20:49:54.700

该字符串`applicationWillEnterBackground`不会出现在`UIKit`动态库中。我很确定系统永远不会发送该消息。

```
:; strings - /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS5.1.sdk/System/Library/Frameworks/UIKit.framework/UIKit | grep applicationWillEnterBackground 
```

为了比较，库确实包含字符串`applicationDidEnterBackground`：

```
:; strings - /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS5.1.sdk/System/Library/Frameworks/UIKit.framework/UIKit | grep applicationDidEnterBackground
applicationDidEnterBackground:
_applicationDidEnterBackground:
-[UIActivityIndicatorView _applicationDidEnterBackground:] 
```

# c++ - 如何确保在 C++ 编译期间参数将被视为常量？

> ID：11803017
> 
> 赞同：1
> 
> 时间：2012-08-03T20:43:28.077
> 
> 标签：c++, templates, optimization, compilation, loop-unrolling

我想知道以下两个实现是否会产生完全相同的东西并具有相同的性能，无论我使用什么编译器：

```
template<class T, unsigned int TSIZE> MyClass1
{
    static const unsigned int size_const = 0;
    public:
        inline void Loop()
        {
            for(unsigned int i = 0; i < TSIZE; ++i) {
                /* DO SOMETHING ON DATA */
            }
        }
        T _data[TSIZE];
};

template<class T, unsigned int TSIZE> MyClass2
{
    static const unsigned int size_const = TSIZE;
    public:
        inline void Loop()
        {
            for(unsigned int i = 0; i < size_const; ++i) {
                /* DO SOMETHING ON DATA */
            }
        }
        T _data[size_const];
}; 
```

在第一个中，由于循环中使用的 TSIZE 是一个模板参数，因此几乎可以保证编译器会在需要时展开循环。如果循环在第一种情况下展开，是否会在第二种情况下展开（唯一的区别是 TSIZE 存储在静态常量中）？

非常感谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-03T20:50:08.010

Whether the compiler will perform the optimization or not is different from whether it will treat the value as a compile time constant. In your particular example, and because the static const has not been *defined* anywhere, if the linker did not complain it means that the compiler only used it as a const-expression (compile time constant). Also note that if the compiler was not considering `size_const` as a const-expression, then the line `T _data[size_const]` (I am assuming you lost the `T` on the copy) would not compile.

Any *odr-use* (use other than as a compile time constant) of the static member would require a *definition*.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T20:46:47.997

从逻辑上讲，编译器确实有足够的信息来进行您所描述的优化，但是它是否真的*会这样做*是非常依赖于实现的，我不希望它得到普遍支持

# android - clock_gettime 的 Ubuntu 到 Android 交叉编译链接

> ID：11803018
> 
> 赞同：0
> 
> 时间：2012-08-03T20:43:29.853
> 
> 标签：android, c, linux, gcc, makefile

我最近用 C 语言开发了一个项目，它利用了 linux 中的函数 clock_gettime()。我的 Ubuntu 桌面上的链接是使用链接器标志实现的：

```
gcc -lrt foo.c 
```

我很高兴在下面的帖子中看到我可以为 Android 交叉编译我的项目。

[http://benno.id.au/blog/2007/11/13/android-native-apps](http://benno.id.au/blog/2007/11/13/android-native-apps)

尽管使用以下命令，我已经在琐碎的项目上尝试过这个：

```
arm-linux-gnueabi-gcc -static foo.c -o foo 
```

而不是命令：

```
arm-none-linux-gnueabi-gcc -static foo.c -o foo 
```

在链接中提到，它们确实可以很好地编译和链接，但是当我尝试使用需要clock_gettime（）和链接的项目时：

```
-ltr 
```

它失败了：

```
undefined reference to `clock_gettime' 
```

我读过 -lrt 指定的库在 Android 上不存在，我发现其他地方的帖子声称人们在 Android 项目上使用 clock_gettime() ，但我找不到合适的库链接到这个。谁能告诉我我需要链接到什么才能让 ARM 完成这项工作？

或者对适用于 Android 的替代方案提出任何其他建议。

我非常有兴趣从我的桌面 linux 项目中充分利用现有的 makefile，但如果可能的话，重新配置它们以使用交叉编译工具链，所以任何允许这样做的建议都将非常感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T20:54:37.937

`clock_gettime()`Android 的“仿生”C 库有一个系统调用的包装器。如果您使用 Android NDK 构建，您将自动获得它。否则，您需要以某种方式将仿生库添加到您的工具链中。

或者，您可以直接通过程序集调用系统调用（从内存中，第一个参数进入 R0，第二个参数进入 R1，您将系统调用编号放入 R7，发出“SWI $0”并在 R0 中找到结果代码）。

或者：你为什么要打扰clock_gettime？有什么理由不能简单地使用 gettimeofday()？

# sql-server - XQuery 将节点值与 Group By 逻辑结合起来

> ID：11803020
> 
> 赞同：1
> 
> 时间：2012-08-03T20:43:33.297
> 
> 标签：sql-server, xquery-sql

我正在寻找一个 XQuery 将需要：

```
<root>
    <entity>
        <entityid>1</entityid>
        <sometext>this is some text</sometext>
    </entity>
    <entity>
        <entityid>1</entityid>
        <sometext>this is some more text</sometext>
    </entity>
</root> 
```

并产生一个像这样的记录集：

```
Entityid    sometext
1           this is some textthis is some more text 
```

本质上，在按 entityid 分组的同时组合“sometext”节点中的值。我想我可能可以通过循环来完成此操作，但不确定是否有更好的方法，可能通过 join/group by

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T04:56:59.990

```
declare @XML xml =
'<root>
    <entity>
        <entityid>1</entityid>
        <sometext>this is some text</sometext>
    </entity>
    <entity>
        <entityid>1</entityid>
        <sometext>this is some more text</sometext>
    </entity>
    <entity>
        <entityid>2</entityid>
        <sometext>Another entity</sometext>
    </entity>
</root>';

select T.entityid,
       @XML.query('/root/entity[entityid = sql:column("T.entityid")]/sometext').value('.', 'nvarchar(max)') as sometext
from (
     select distinct T.N.value('entityid[1]', 'int') as entityid
     from @XML.nodes('/root/entity') as T(N)
     ) as T; 
```

结果：

```
entityid    sometext
----------- -----------------------------------------
1           this is some textthis is some more text
2           Another entity 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T14:20:33.873

您也可以使用更基于 XQuery 的解决方案来做到这一点，例如

```
DECLARE @xml XML = '<root> 
    <entity> 
        <entityid>1</entityid> 
        <sometext>this is some text</sometext> 
    </entity> 
    <entity> 
        <entityid>1</entityid> 
        <sometext>this is some more text</sometext> 
    </entity> 
    <entity> 
        <entityid>2</entityid> 
        <sometext>Another entity</sometext> 
    </entity> 
</root>'

select 
    x.c.value('@entityId', 'int') entityId,
    x.c.value('.', 'varchar(max)') someText
from
    (
    select @xml.query('for $e in distinct-values(root/entity/entityid)
return <m entityId = "{$e}">{data(root/entity[entityid = $e]/sometext)}</m>')
    ) r(c)
    cross apply r.c.nodes('m') x(c) 
```

感谢 Mikael 提供 xml / 额外场景。

# javascript - Node.js 类递归发射

> ID：11803021
> 
> 赞同：1
> 
> 时间：2012-08-03T20:43:36.487
> 
> 标签：javascript, node.js, timer

所以，我正在尝试 Node.js 上的 Ticker，Event Emitter 练习

我有这个代码：

```
var EventEmitter = require('events').EventEmitter,
    util = require('util');

// Ticker Constructor
var Ticker = function (interval) {
    this.interval = interval;
    this.pulse = null;
}

util.inherits(Ticker, EventEmitter);

Ticker.prototype.start = function() {
    this.emit('start');
    this.tick();
}

Ticker.prototype.stop = function() {
    if (this.pulse != null) clearTimeout(this.pulse);
    this.emit('stop');
}

Ticker.prototype.tick = function() {
    this.emit('tick');
    this.pulse = setTimeout(this.tick, this.interval);
}

var ticker = new Ticker(1000);
ticker.on('start', function() { console.log('Ticker: Start'); });
ticker.on('tick', function() { console.log('Ticker: Tick'); });
ticker.on('stop', function() { console.log('Ticker: Stop'); });

ticker.start(); 
```

运行时输出以下内容：

代码：开始 代码：勾选

```
timers.js:103
            if (!process.listeners('uncaughtException').length) throw e;
                                                                      ^
TypeError: Object #<Object> has no method 'emit'
    at Object.Ticker.tick [as _onTimeout] (/Users/twilson/Projects/tutorials/node/ticker-01.js:23:8)
    at Timer.list.ontimeout (timers.js:101:19) 
```

其中线`ticker-01.js:23`是功能`this.emit('tick');`。`Ticker.prototype.tick`

帮助，因为我真的看不出到底出了什么问题，毫无疑问，这肯定是一个范围界定的事情？:(

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T20:54:03.040

调用`setTimeout(this.tick, this.interval)`该`tick`方法时，将在默认上下文中执行，而不是在那里`this`引用的内容。你需要要么...

将 的值绑定`this`到代码实例：

```
setTimeout(this.tick.bind(this), this.interval) 
```

或者保存对代码实例的引用：

```
var self = this;
setTimeout(function() {
    self.tick();
}, this.interval); 
```

# actionscript-3 - 在 MovieClip ActionScript 3 中绘制 Rentangle

> ID：11803023
> 
> 赞同：2
> 
> 时间：2012-08-03T20:43:45.720
> 
> 标签：actionscript-3, movieclip

我有一张由里面的 MovieClip 城市组成的地图，我在地图 MovieClip 的顶层有一个点击功能。如果我单击一个城市，我会尝试这样做，将绘制一个矩形。这是代码：

```
function rpress(a)
{
trace( "trying" );

    var b:MovieClip = new MovieClip();
    b.graphics.beginFill(0xFF0000);
    b.graphics.drawRect(0,0,100,80);
    b.graphics.endFill();
    b.x = 150;
    b.y = 150;
    addChild( b );
trace("done")
} 
```

执行跟踪命令但不绘制矩形。我试过`MovieClip( root ).addChild..., stage.addChild..., MovieClip( parent ).addChild...`了，其他人...

你有什么主意吗？谢谢！

完整代码：

双击地图MovieClip->84层欢迎我们->选择名为“Action Layer”的层ACTIONS-FRAME：

```
function rbtxt(a)
{
    var _loc2 = a;
    var _loc3 = this;
    balon._visible = true;
    arbtxt = ilad.split(",");
    balon.txt.text = arbtxt[_loc2];
    _loc3["x" + _loc2].play();
    balon._x = _loc3["x" + _loc2]._x;
    balon._y = _loc3["x" + _loc2]._y - _loc3["x" + _loc2]._height / 2 + 5;
}
//End of the function
function rbalon(a)
{
    balon._visible = false;
    this["x" + a].gotoAndStop(1);
}
//End of the function
function rpress(a)
{
trace( "trying" );

    var b:MovieClip = new MovieClip();
    b.graphics.beginFill(0xFF0000);
    b.graphics.drawRect(0,0,100,80);
    b.graphics.endFill();
    b.x = 150;
    b.y = 150;
    addChild(b );
trace("done")
}

ilad = "CITY NAMES....."
ilurl = "CITY URLS....." 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T22:26:51.170

您没有显示足够的代码，所以我们只能猜测。通过查看您提供的信息，您可以尝试：

```
this["x" + a].addChild( b ); 
```

或者

```
balon.addChild( b ); 
```

但这只是猜测...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T11:58:27.067

嗨尝试将影片剪辑添加到舞台，然后像这样执行绘图camamnd

```
 var b:MovieClip = new MovieClip();
    addChild(b );
    b.graphics.beginFill(0xFF0000);
    b.graphics.drawRect(0,0,100,80);
    b.graphics.endFill();
    b.x = 150;
    b.y = 150; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T22:34:26.447

Sprite 可以访问图形，尝试仅将 Movieclip 用于复杂对象，例如加载的 SWF 和具有基于时间轴的动画和变量等的 Flash 库资源

```
function drawRect()
{
    trace( "trying" );

    //var b:MovieClip = new MovieClip();
    var b:Sprite = new Sprite();
    b.graphics.beginFill(0xFF0000);
    b.graphics.drawRect(0,0,100,80);
    b.graphics.endFill();
    b.x = 150;
    b.y = 150;
    addChild( b );
    trace("done")
} 
```

# ruby-on-rails - 如何在不刷新页面的情况下触发并显示一闪信息？

> ID：11803025
> 
> 赞同：2
> 
> 时间：2012-08-03T20:43:47.873
> 
> 标签：ruby-on-rails, ruby, ajax

我的应用程序控制器中有一个辅助方法，用于检查对象的创建时间。基本上，如果对象总数发生变化，它会在页面加载时通过一条消息提醒您。这段代码工作正常，但我想做的是消除重新加载的需要。

这将如何完成？我知道该解决方案可能涉及 AJAX，但我是 AJAX 和 rails 的新手，所以我不知道该怎么做。谢谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T08:15:19.500

```
<script type="text/javascript">
  var i = setInterval( "checkObjectCount()", 10000 );

  function checkObjectCount() {
    count = <%= @object_count %>;

    $.ajax({
      url: 'ajax/request_object_count',
      success: function(data) {
        if (data > count) {
          $('#alert_container').show();
          clearInterval(i);
        }
      }
    });
  }
</script> 
```

# c# - C#同时使用2个sqldatareader？

> ID：11803039
> 
> 赞同：5
> 
> 时间：2012-08-03T20:44:56.953
> 
> 标签：c#, sql

你好有没有办法同时使用两个sqldatareader？

我正在编写程序

我得到了错误，因为我同时使用了 2 个阅读器

代码示例

```
SqlCommand LoadSilk = new SqlCommand("SELECT silk_own FROM SK_Silk WHERE JID = (SELECT JID FROM TB_User WHERE StrUserID = '"+ comboBox1.Text +"')", Connection);
SqlDataReader SilkReader = LoadSilk.ExecuteReader();
SqlCommand LoadCharacter = new SqlCommand("SELECT * FROM SRO_VT_SHARD.DBO._Char WHERE CharID IN (SELECT CharID FROM SRO_VT_SHARD.DBO._User WHERE UserJID = "+ JID +")", Connection);
SqlDataReader CharacterReader = LoadCharacter.ExecuteReader();

try
{
    SilkReader.Read();
    textBox5.Text = SilkReader[0].ToString();
    Silk = SilkReader[0].ToString();
    dataGridView1.Enabled = true;
    button2.Enabled = true;
    while (CharacterReader.Read()) {
        dataGridView1.Rows.Add(CharacterReader["CharID"].ToString(), CharacterReader["CharName16"].ToString(), CharacterReader["CurLevel"].ToString());
    }
    log(comboBox1.Text + " account data loaded");
}
catch (Exception ex) {
    log(ex.Message);
    MessageBox.Show("Error");
} finally {
    SilkReader.Close();
    CharacterReader.Close();
} 
```

它给了我那个错误

> 已经有一个与此命令关联的打开的 DataReader，必须先关闭它。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-03T20:48:32.293

错误消息具有误导性。您必须`MultipleActiveResultSets=True`在连接字符串中进行设置，才能使用两个不同的阅读器发送两个单独的命令。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-03T20:47:20.367

当您使用称为多个活动结果集或 MARS 时，这是可能的。查看[这篇有用的文章](http://blogs.msdn.com/b/angelsb/archive/2004/09/07/226597.aspx)，其中详细介绍了所有可能的陷阱。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-03T20:47:38.283

您必须在连接上启用多个活动记录集 (MARS)。

[http://msdn.microsoft.com/en-us/library/h32h3abf%28v=vs.80%29.aspx](http://msdn.microsoft.com/en-us/library/h32h3abf%28v=vs.80%29.aspx)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-02-04T18:42:47.297

1.只需将 MultipleActiveResultSets=True 添加到您的连接字符串中：

```
private string _ConnectionString = @"Data Source=(LocalDB)\v11.0;AttachDbFilename=yourdbpath\Database.mdf;Integrated Security=True;MultipleActiveResultSets=True;Connect Timeout=30"; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-11-15T09:09:15.213

`public partial class Form1 : Form`在块示例中声明那些 DataReader ：

```
namespace GoodFood_1_
{
    public partial class Autentificare_client : Form
   {
        SqlConnection con = new SqlConnection(@"Data Source=(LocalDB)\v11.0;AttachDbFilename=C:\Users\edi_b\Documents\visual studio 2013\Projects\GoodFood(1)\GoodFood(1)\GOOD_FOOD.mdf;
        Integrated Security=True;MultipleActiveResultSets=True");
        SqlConnection con2 = new SqlConnection(@"Data Source=(LocalDB)\v11.0;AttachDbFilename=c:\users\edi_b\documents\visual studio 2013\Projects\GoodFood(1)\GoodFood(1)\GOOD_FOOD.mdf;
        Integrated Security=True;MultipleActiveResultSets=True");

        SqlDataReader dr;
        SqlDataReader cc;

        public Autentificare_client()
        {
            InitializeComponent();
        } 
```

# jquery - YOXView 在 iPhone 上不工作

> ID：11803040
> 
> 赞同：0
> 
> 时间：2012-08-03T20:45:09.113
> 
> 标签：jquery, iphone, yoxview

我在我的网站上使用了 YOXView 图像库，在桌面和 ipad 上都可以正常工作，但是在我的 iPhone 上它不起作用，当我单击图像时，它没有触发画廊，它只是转到一个新页面大图的图，有大佬知道是什么问题吗？到处找了也没找到答案，谢谢！下面是我文件中的 YOXView 相关代码。

```
<script type="text/javascript">
        $(document).ready(function(){
            $("#multiGallery1").yoxview({
                images: [
                    { media: { src: '../img/pf_2.jpg' }},
                    { media: { src: '../img/pf_3.jpg' }}
                ]
            });
        });

        $(document).ready(function(){
            $("#multiGallery2").yoxview({
                images: [
                    { media: { src: '../img/pf_6.jpg'}},
                    { media: { src: '../img/pf_7.jpg'}}
                ]
            });
        });
</script>
</head>

<body>
<a href="../img/pf_1.jpg" id="multiGallery1" ><img src="../img/holder_i2.png"/></a> &nbsp;
</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T21:04:56.810

我想通了，只需要与桌面和 ipad 不同的图片库 ID。

# sharepoint-2010 - 子网站的 SharePoint 2010 审批工作流？

> ID：11803043
> 
> 赞同：2
> 
> 时间：2012-08-03T20:45:15.547
> 
> 标签：sharepoint-2010, sharepoint-workflow

我是 SharePOint 工作流程的新手。我可以看到以下工作流程当前处于活动状态。我继续创建了一个子站点。在该子站点中，我想将批准 (OOTB) 附加到我的文档库中。但我在我的子站点中没有看到任何 OOTB 工作流程。

```
http://myServer/mySubSite/_layouts/wrksetng.aspx 
```

它说目前没有与此站点关联的工作流。我单击了添加新工作流程。它向我展示了这个链接

```
http://myServer/mySubSite/_layouts/AddWrkfl.aspx 
```

但是，只有 2 个工作流程 - 安排 Web 分析警报和安排 Web 分析报告。

我希望能够将 OOTB SharePOint Approval 工作流程添加到我的子站点。我怎么做？当我单击子站点的站点设置-->站点管理-->工作流时，我想在子站点下看到“工作流”链接。TIA。

这些是此链接下我的网站集中的所有工作流

```
http://myServer/_layouts/wrkmng.aspx 
```

1.  赞同
2.  收集反馈
3.  收集签名
4.  处置批准
5.  安排网络分析警报
6.  安排网络分析报告
7.  三态翻译管理
8.  收集签名 - SharePoint 2010
9.  收集反馈 - SharePoint
10.  2010年出版批准
11.  批准 - SharePoint 2010

有什么想法吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-05T21:04:14.417

您可能会进入共享点设计器，单击左侧的工作流选项卡，然后在标有“全局可重用工作流”的部分中单击批准工作流以创建它的副本，然后尝试添加副本。此外，您可能正在尝试将批准工作流添加到无效的内容类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-15T18:37:58.420

我正在尝试了解您的确切问题，但听起来您希望将 OOTB 批准工作流程添加到您的文档库中。

您说您正在查看子站点的“站点设置”，但您是否查看了该文档库的列表设置？OOTB 审批工作流将添加到图书馆而不是站点级别。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-05T10:30:16.043

我遇到了同样的问题，然后用谷歌搜索，我发现的解决方法是共享点对我创建的每个站点都停用了该功能，我必须激活它{站点操作->站点集合功能}希望它对你有用

# iphone - iphone - 通过 IP 地址获取主机名

> ID：11803048
> 
> 赞同：3
> 
> 时间：2012-08-03T20:45:34.590
> 
> 标签：iphone, objective-c, ios, network-programming, hostname

我的本地 wifi 网络 (192.168.1.100-105) 中有一个 IP 地址列表。如何获取设备名称？例如“我的台式电脑”。像 Fing 这样的应用程序可以做到。

我找到了一些例子：

[iPhone 提示：没有 NSHost](http://www.bdunagan.com/2009/11/28/iphone-tip-no-nshost/)

和

[如何在objective-c中从域名中获取ipAddress和ipAddress的域名](https://stackoverflow.com/questions/3572697/how-to-get-domain-name-of-ipaddress-and-ipaddress-from-domain-name-in-objective)

但看起来它们只适用于来自互联网的收件人，而不是来自本地网络的收件人。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T01:33:42.257

您可以使用三种主要协议来获取有关本地网络上设备的信息：Bonjour、NetBIOS 和 UPnP。其中只有第一个在 iOS 中具有内置支持。因此，您将不得不搜索库或编写自己的其他两个实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T21:02:48.307

如果通过设备名称，您的意思是 iOS 设备的 UDID（唯一设备标识符），访问它违反了美国互联网隐私法。如果您的应用尝试获取 UDID，它可能会被应用商店拒绝。如果您想跟踪运行您的应用程序的设备，您可以使用一些虚拟 UDID 生成器，如下所示：[SecureUDID](http://www.secureudid.org)

如果您只是想要一些唯一标识符来识别网络上的某些设备，您可以尝试读取 iDevice 上网络接口的 mac 地址。但这样做可能/可能不会违反 Apple 的指导方针。

无论哪种方式，Apple 都严重反对尝试识别用户设备的应用程序（除非它们是链接中的虚拟 UDID）。所以要非常确定你的目标是什么。

但是有一个免责声明..如果您的应用程序不是针对在美国销售的，则访问 UDID 位于 Apple 指南的灰色（阅读不清楚）区域。

# python - 如何从选择菜单获取数据到后端/服务器

> ID：11803056
> 
> 赞同：2
> 
> 时间：2012-08-03T20:46:18.280
> 
> 标签：python, html, django, forms, views

我创建了一个包含 5 个选项的下拉菜单。当用户选择一个选项并按下提交按钮时，如何将该“选择”传输到 Django 中的后端/服务器？

After that, when the value of the selection reaches the backend, I intend to use the value to create another form. 有 5 种形式可供选择（每种选择一种），出现的形式类型将取决于原始选择的值。

这是我到目前为止所拥有的，但我收到错误消息“在 QueryDict 中找不到键‘选择’：{}”

这是 HTML 文件：

```
<div id = "f1" style="display:none">
  <form name= "form1" action='/products/{{ action }}/' method='get'>
    <p class="choice-header"> Product: </p>
    <select id = "g1" title="selection" onchange = "showForm()">
      <option value = "0">--</option>
      <option value = "1">Form 1</option>
      <option value = "2">Form 2</option>
      <option value = "3">Form 3</option>
      <option value = "4">Form 4</option>
      <option value = "5">Form 5</option>
    </select>
    <div id= "b1" style="display:none">
      <input class="button" type=submit value="{{ button }}">
    </div>
  </form>
</div> 
```

这是 Django views.py 文件

```
def new2(request):
  form_no = request.GET["selection"]

  if form_no == 1:
    form_to = Form1()
  c = RequestContext(request, {
    'action': 'add/2',
    'button': 'Add', 
    'form': form_to,
  })
  return render_to_response('links/add.html', c) 
```

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T20:58:35.953

这应该可以帮助您：[django - 从 HTML <select> 收集数据](https://stackoverflow.com/questions/4786564/django-collecting-data-from-a-html-select)。

基本上，您需要在 HTML 中的 select 元素上命名，然后您可以通过以下方式访问它：

```
request.GET["nameOfYourAwesomeSelectList"] 
```

编辑：刚刚注意到您正在使用 GET 方法。您使用 GET 将表单数据发送到服务器是否有原因？纯粹的好奇。

编辑 2：对于您关于 form_to 的错误，请注意您仅在所选项目为 1 时才对其进行初始化？因此，当您选择一个值不是 1 的项目时，form_to 永远不会初始化，因此当您创建 RequestContext 时，它会生气。您需要始终初始化它，form_to，或者在 form_to 为空时更改创建 RequestContext 的方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T20:58:59.610

这不是真正的 Django 问题。你只是没有给你的`select`元素一个`name`属性。

```
<select id="g1" name="selection"> 
```

# sql - 访问SQL查询优化，添加GROUP BY时速度慢

> ID：11803061
> 
> 赞同：1
> 
> 时间：2012-08-03T20:46:32.787
> 
> 标签：sql, ms-access, group-by, query-optimization

所以，我有两个问题。一，是我是否真的在为提高效率而采取正确的方法？我正在尝试创建一个名为 Type 的新列，根据两个表的字段是否匹配，吐出不同的名称。这是一个嵌套的 IF 语句。查询很容易在 2-3 秒内完成，但我希望先按 ItemName 和 Type 进行分组，因为有很多重复项。这样做之后，查询没有完成，超时，并且在尝试 10 分钟后声称太复杂。我也尝试过使用 DISTINCT 和 FIRST，但运气不佳。总体而言，我希望将此查询与其他查询结合起来，并创建按类型分组的运行总和。因此，重要的是我可以在此查询中执行 GROUP BY 以使我的最终查询正常工作。以下是查询：

```
SELECT Inventory_All.ItemName, 

IIF(Inventory_All.[ItemName]=Products.[QB Assembly Name], "Assembly Part",
IIF(Inventory_All.[ItemName]=Products.[QB Service Part Name],"Service Part",
IIF(Inventory_All.[ItemName]=Components.[QB Component Name],Components.Type,"Other") )) AS Type

FROM 
(Inventory_All LEFT JOIN Products ON Inventory_All.ItemName=Products.[QB Assembly Name] OR Inventory_All.ItemName=Products.[QB Service Part Name]) LEFT JOIN Components ON Inventory_All.ItemName=Components.[QB Component Name]; 
```

我阅读了其他有类似问题的人，并尝试建立索引，但似乎没有帮助。看来我需要重新创建这个查询，其中 GROUP BY 函数几乎不需要处理那么多。我不确定这种形式的 SQL 和 GROUP BY 的行为如何。关于简化查询以让 GROUP BY（或类似功能）工作的任何提示？

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T20:55:46.130

也许在这些方面有一些东西：

```
SELECT Inventory_All.ItemName, Type
FROM (
   SELECT "Assembly Part" As TYPE 
   FROM Inventory_All 
   LEFT JOIN Products ON Inventory_All.ItemName=Products.[QB Assembly Name]
   UNION
   SELECT "Service Part" As TYPE 
   FROM Inventory_All 
   LEFT JOIN Products ON Inventory_All.ItemName=Products.[QB Service Part Name]
   UNION
   SELECT "Other" As TYPE 
   FROM Inventory_All.ItemName=Components.[QB Component Name]) As x 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T23:39:03.867

我想你想重组你的查询。做三个单独的连接，每个部分一个。然后，按项目对每种零件类型进行计数——一列用于装配，一列用于服务，一列用于组件。

您将获得一个结果集，其中包含每种类型的名称和出现次数。然后用它做你想做的事。

我在移动设备上，所以无法键入 SQL。

# android - 无法从静态处理程序调用 finish()

> ID：11803064
> 
> 赞同：0
> 
> 时间：2012-08-03T20:46:44.767
> 
> 标签：android

如果用户已登录服务，我有一个主要活动。如果没有用户登录，它会打开一个新活动：

```
if (userName == null) {
    Intent myIntent = new Intent(MainActivity.this, Login.class);
    MainActivity.this.startActivity(myIntent);
} 
```

此活动包含用户名和密码字段以及登录按钮。用户填写那里的信息，然后单击登录。我在一个新线程中完成网络：

```
new Thread( new Runnable() {
    public void run() {
    try {                   
            Auth myAuth = new Auth(getApplicationContext());
    Boolean isAuth = false;
    isAuth=myAuth.getAuthToken(tUserName.getText().toString(), tPassword.getText().toString());
            Bundle b = new Bundle();
    b.putBoolean("isAuth", isAuth);
    Message msg = new Message();
    msg.setData(b);
    loginHandler.dispatchMessage(msg);
        }
        catch (InterruptedException ex) { ex.printStackTrace(); }
        catch (Exception ex) { ex.printStackTrace();}
        finally { }         }
    }).start(); 
```

这会将消息发送回处理程序：

```
private static Handler loginHandler = new Handler () {
    @Override 
    public void handleMessage(Message msg) {
        mProgress.setVisibility(View.GONE);         

        if(msg.getData().getBoolean("isAuth")){
            // UNABLE TO CALL FINISH
        }
        else
        {
            CharSequence msg2 = "Login Failed";         
            Toast.makeText(context, msg2, Toast.LENGTH_SHORT).show();
        }
    }
}; 
```

如果 isAuth 为真，我想自动关闭登录活动。

我实施登录屏幕的计划可能走错路了。就是这样让我知道，我会研究你建议的另一种方式。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T20:53:53.443

`finish()`不是静态方法，这使得它与其类的特定实例相关联 - 使其无法从静态方法中使用（根据定义，它与类的实例不相关）。如果您可以在静态方法中获取对您的活动的引用，那么您可以`finish()`调用而不是调用。`myActivity.finish()`

也许，更好的解决方案是在登录活动上简单地调用 startActivityForResult()，如果不需要登录，则让该活动在没有用户交互的情况下返回。

# iphone - 尝试使用 QuartzCore 动画时收到错误消息

> ID：11803065
> 
> 赞同：0
> 
> 时间：2012-08-03T20:46:46.373
> 
> 标签：iphone, ios, quartz-core

我有一个重播级别按钮。当用户按下此重播级别按钮时，我会重置所有游戏属性以重置级别。但是，这还不够。我还想让关卡看起来是全新的，所以我想将动画添加到视图控制器，就像模态 segue 的交叉溶解动画一样。为此，我将此代码添加到我的 replayLevel 方法中。

```
-(IBAction)replayLevel:(id)sender
{
//reset my levels properties
[self resetGameProperties];

//add the cool modal cross dissolve animation

CATransition *transition =[CATransition animation];
transition.duration=.5;
transition.type=kCATransitionFade;
transition.delegate=self;
[self.view.layer addAnimation:transition forKey:nil];
self.view.hidden=YES;
self.view.hidden=NO;

} 
```

我还记得在我的界面文件中添加

```
#import <QuartzCore/QuartzCore.h> 
```

一切似乎都很好，除非我构建和运行时收到此错误消息

```
Undefined symbols for architecture i386:
  "_OBJC_CLASS_$_CATransition", referenced from:
      objc-class-ref in ViewController.o
  "_kCATransitionFade", referenced from:
      -[ViewController replayButton:] in ViewController.o
ld: symbol(s) not found for architecture i386
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

如果我复制模态交叉溶解segue的代码很糟糕，我很乐意接受关于我应该如何去做的任何不同意见，但除此之外，任何人都可以帮我解决这个错误吗？

任何帮助都非常有帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T20:51:35.357

您需要将`QuartzCore`框架添加到您的目标。

[如何在 Xcode 4 中“添加现有框架”？](https://stackoverflow.com/questions/3352664/how-to-add-existing-frameworks-in-xcode-4)

# nginx - 为什么 gzip_disable 会使 nginx 崩溃？

> ID：11803067
> 
> 赞同：4
> 
> 时间：2012-08-03T20:46:57.177
> 
> 标签：nginx, gzip

我从[defunkt 的独角兽 conf 文件中](https://github.com/defunkt/unicorn/blob/master/examples/nginx.conf)启发了我的 nginx 配置文件，但似乎该行使`gzip_disable "MSIE [1-6]\.";`一切都崩溃了。我收到此站点暂时不可用的错误（从 提供`nginx/html/50x.html`）。注释掉该行会使一切再次正常工作，摆弄正则表达式不会改变任何事情。

我正在运行 nginx v.1.0.10 和 ubuntu 11.10。

任何的想法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-04T10:47:50.117

Nginx API 为此指令更改已经有几年了，它应该是：

```
gzip_disable              "msie6"; 
```

全栈 Nginx+Unicorn 优化配置可以[在 gist](https://gist.github.com/3052776)上找到。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-06-11T20:50:02.927

只是想让这个在这里

`gzip_disable "msie6";`在官方 nginx 文档中提到[http://nginx.org/en/docs/http/ngx_http_gzip_module.html#gzip_disable](http://nginx.org/en/docs/http/ngx_http_gzip_module.html#gzip_disable)作为 regex 的特殊掩码`MSIE [4-6]\`，但工作速度更快。

# xpath - Selenium：在 searchContext 中查找元素

> ID：11803068
> 
> 赞同：2
> 
> 时间：2012-08-03T20:47:04.017
> 
> 标签：xpath, selenium, webdriver

每个人！我遇到了以下问题：有一些

```
SearchContext searchContext;
By by; 
```

可以是 WebDriver 或 WebElement。假设它们都已经初始化（我们不知道如何）；现在我们想用这样的 xpath 找到元素，似乎做以下

```
List<WebElement> elements = searchContext.findElements(by); 
```

但是，如果 searchContext 是 WebElement 并且

```
by = By.xpath("//div"); 
```

它行不通！（找不到元素），因为我们需要做

```
by = By.xpath("./div"); 
```

（请参阅[在 selenium 中定位 WebElements 的子节点](https://stackoverflow.com/questions/10520294/locating-child-nodes-of-webelements-in-selenium)）但是，正如我所提到的，我们对 by 的初始化方式一无所知；

所以，我的问题是：尽管存在上述问题，有没有办法正确找到元素？我有两个变量：by 和 searchContext，我应该在 searchContext 中找到指定的元素。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T13:26:28.743

您可以在一些辅助方法中执行此操作，如果发生这种情况将抛出异常

```
public List<WebElement> returnSearchContext(By by, SearchContext searchContext){
  List<WebElement> elements = searchContext.findElements(by);
  if (elements.getSize()>0){
     return elements;}
   else{
     throw new ElementNotFoundException();
   }
} 
```

我在没有访问任何 IDE 的情况下编写此代码，因此我的示例代码中可能会出现一些错误。例如，我认为异常需要一些参数。但我希望你能明白。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T06:58:39.243

据我了解，现在有办法做到这一点。唯一的方法是手动正确指定 By.xpath：

```
By child = By.xpath("/div");
By descendant = By.xpath("//div"); 
```

在 WebDriver.isAssignableFrom(searchCONtext.getCLass()) 的情况下，以及

```
By child = By.xpath("div");
By descendant = By.xpath(".//div"); 
```

在 WebElement.isAssignableFrom(searchCONtext.getCLass()) 的情况下。恕我直言，这很糟糕。

# php - Zend引擎调用父方法

> ID：11803069
> 
> 赞同：0
> 
> 时间：2012-08-03T20:47:04.190
> 
> 标签：php, c, php-internals

我现在正在尝试创建一个自定义 php 扩展，我面临的一个问题是我不知道如何调用父方法。

就好比在类的构造函数中，调用父类的构造函数：

```
zval *object,
     fname;

object = getThis();
ZVAL_STRING(&fname, "parent::__construct", 0);

if(SUCCESS != call_user_function_ex(NULL, &object, &fname, NULL, 0, NULL, 1, NULL TSRMLS_CC))
{
    RETURN_NULL();
} 
```

如何正确执行此操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T21:09:36.707

如果它所做的只是初始化某些对象属性，则不应显式调用父构造函数。如果你这样做了，你最终会遇到一些讨厌的事情，比如错误的引用计数和 memleaks。例如，看看[ASTTree 如何扩展 ASTNodeList](https://github.com/flavius/phpmeta/blob/master/parser.c#L617)。

那里的关键部分是`zend_object_handlers`，例如`create_object_tree`。那里是你应该做这些事情的地方。

如果您想了解如何调用其他对象的方法，请从[meta_parser.h中](https://github.com/flavius/phpmeta/blob/master/meta_parser.h#L33)*便利宏*的链接开始。[obj_call_method_internal_ex()](https://github.com/flavius/phpmeta/blob/master/meta.c#L137)真的是可重用的。（我已经付出了很多努力来制作它们）

# java - 表达式语言中的 renderRequest

> ID：11803071
> 
> 赞同：3
> 
> 时间：2012-08-03T20:47:22.537
> 
> 标签：java, jsp, el, portlet, websphere-portal

我们可以使用表达式语言`renderRequest.getPreferences().getValue().`目前，我在 jsp 页面中使用 scriplet，我想避免使用 scriptlet。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T21:46:28.500

如果您使用的是 EL 2.2 或更高版本，这种形式的表达式应该可以工作：

```
${request.getPreferences().getValue('foo', 'some default')} 
```

通常，这仅在 Java EE 6 平台上可用。

在早期版本中，您应该能够使用如下表达式：

```
${request.preferences.map['foo']} 
```

请注意，这将返回[一个数组](http://portals.apache.org/pluto/portlet-2.0-apidocs/javax/portlet/PortletPreferences.html#getMap%28%29)。如果你想要一个单一的值，你可能需要使用一个间接层。

*警告：此代码均未经过测试。*

# selenium - 在 Selenium Webdriver 中选择单选按钮的问题

> ID：11803075
> 
> 赞同：3
> 
> 时间：2012-08-03T20:47:56.663
> 
> 标签：selenium

```
<table id="Content_Content_Content_ctlCaseInfo_rdochldplcm" class="fltLeft">
        <tr>
            <td><input type="radio" id="Content_Content_Content_ctlCaseInfo_rdochldplcm_0" name="ctl00$ctl00$ctl00$Content$Content$Content$ctlCaseInfo$rdochldplcm" value="0" /><label for="Content_Content_Content_ctlCaseInfo_rdochldplcm_0">No</label></td><td><input type="radio" id="Content_Content_Content_ctlCaseInfo_rdochldplcm_1" name="ctl00$ctl00$ctl00$Content$Content$Content$ctlCaseInfo$rdochldplcm" value="1" /><label for="Content_Content_Content_ctlCaseInfo_rdochldplcm_1">Yes</label></td>
        </tr>
    </table> 
```

当我尝试 driver.FindElement(By.Id("Content_Content_Content_ctlCaseInfo_rdochldplcm")).Click(); 当我尝试 driver.FindElement(By.Id("Content_Content_Content_ctlCaseInfo_rdochldplcm_0")).Click(); 或 driver.FindElement(By.Id("Content_Content_Content_ctlCaseInfo_rdochldplcm_1")).Click(); 没有任何反应，也没有选择单选按钮。

请提出处理这种情况的方法..非常感谢！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T19:48:15.967

通过 XPath 单击单选按钮可能会更好。
在您的特定情况下，XPath 用于：

是 - 单选按钮：

```
"//input[contains(@id, 'rdochldplcm') and contains(@value, 1)]" 
```

* * *

否 - 单选按钮：

```
"//input[contains(@id, 'rdochldplcm') and contains(@value, 0)]" 
```

* * *

在这种情况下，如果您想单击“是”单选按钮，您可以这样做：

```
string yesRadioButtonXPath = "//input[contains(@id, 'rdochldplcm') and contains(@value, 1)]"
IWebElement yesRadioButton = driver.FindElement(By.XPath(yesRadioButtonXPath));
yesRadioButton.Click(); 
```

对于“否”单选按钮，您可以使用：

```
string noRadioButtonXPath = "//input[contains(@id, 'rdochldplcm') and contains(@value, 0)]"
IWebElement noRadioButton = driver.FindElement(By.XPath(noRadioButtonXPath));
yesRadioButton.Click(); 
```

* * *

由于您使用的是表，因此 XPath 可能会返回多个元素。在这种情况下，您需要使用不同的方法来整理元素，但是对于您要查找的内容，此方法应该有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-06T07:12:39.803

用这个 ：

```
//First get the list of values from the radio button

List < WebElement > elements = driver.findElements(By.cssSelector("table[id='Content_Content_Content_ctlCaseInfo_rdochldplcm'] > td"));

WebElement value;

//use loop for searching the particular element

for(WebElement element : elements){

//Getting the value of the element
value = element.findElement(By.cssSelector("label")).getText();

//condition to click on the element
  if(value.trim().equals("No")){ //Here value is hard coded. You can take from excel sheet also

    // If condition satisfies, it will click on the element

    element.findElement(By.cssSelector("input").click();
}

} 
```

这也可以用作通用功能。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-21T09:54:47.937

这完美地解决了我的问题

我有一个页面，有 6 个组中的 18 个单选按钮，分别代表“是”、“否”和“否”我试图通过 ID 获取它们，但它是由应用程序随机化的，但使用名称和值标签使其工作。

收音机基本上是这样定义的：

> input value="2" class=" x-form-radio x-form-field" autocomplete="off" id="randID_13578" name="emailNotifiyOptionAllow" type="radio">

每次我打开这个页面 id 都是不同的所以使用

> "//输入[包含(@name, 'emailNotifyOptionAllow') 和包含(@value, 1)]"

解决了。

谢谢

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-03T22:53:55.210

尝试 [0] 和 [1] 而不是下划线。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-04-02T05:46:23.087

使用下面给出的代码尝试您的代码`CSS`：

第 1 步：通过提供的 HTML 片段，我们可以导出单选按钮的 CSS

```
css=#Content_Content_Content_ctlCaseInfo_rdochldplcm input 
```

第2步：

使用 Web 驱动程序代码单击单选按钮

```
driver.findElement
   (By.cssSelector("#Content_Content_Content_ctlCaseInfo_rdochldplcm input"))
      .click(); 
```

# .net - 你会在线程池线程上使用 await 关键字吗

> ID：11803076
> 
> 赞同：3
> 
> 时间：2012-08-03T20:48:02.023
> 
> 标签：.net, asynchronous, async-await

如果您决定通过将一些 CPU 密集型代码放入任务中并在线程池中运行来从 UI 线程中卸载一些 CPU 密集型代码，那么该代码本身是否会从使用“await”关键字中受益？

答案似乎是“不”..

我的意思是，在 UI 线程中等待任务的主要原因之一是释放 UI 线程以执行它之前所做的事情。如果您在线程池上运行时作为任务等待，那么您要释放该线程来做什么？

我错过了一些非常明显的东西吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T20:52:34.660

> 如果您决定通过将一些 CPU 密集型代码放入任务中并在线程池中运行来从 UI 线程中卸载一些 CPU 密集型代码，那么该代码本身是否会从使用“await”关键字中受益？

*仅*用于 CPU 密集型任务？也许不吧。

但这不是在线程池线程中运行代码的唯一原因。

考虑一个 Web 服务器 - 所有请求都将在线程池线程中处理......并且通过`await`在处理这些请求时使用（例如，在等待数据库或其他 Web 服务响应时），您可以在很少的线程上处理数百万个请求。

此外，即使在丰富的 GUI 场景中，您可能希望将一些长时间运行的任务放到线程池线程中，但仍会从该线程启动多个异步请求。async/await 鼓励异步操作组合的方式使得以异步方式编写代码完全合理，无论它碰巧在哪个线程上运行。

# perl - CentOS 上的预分叉 Dancer 应用程序

> ID：11803077
> 
> 赞同：0
> 
> 时间：2012-08-03T20:48:09.517
> 
> 标签：perl, centos, dancer

我有一个使用 Dancer 编写的原型应用程序（RESTful Web 服务数据库前端）。作为一个原型，它在带有 mod_proxy 的 Apache 下运行良好，并且 Dancer 的路线工作得非常好。

我的下一步是看看我是否可以让它扩展一点，因为一些查询可能非常慢，我不希望慢查询阻塞其他请求。

我想使用 rpms 来管理所需的 perl 模块。对于 Dancer 来说，这不是问题，因为 CentOS-6 加上 EPEL 提供了足够的 rpm 让我可以构建/安装 Dancer 和[`Dancer::Plugin::Database`](https://metacpan.org/module/Dancer%3a%3aPlugin%3a%3aDatabase)rpm。尝试构建 Plack rpms 几乎没有效果，但是由于多种原因，其中一个是某些系统模块的版本号太低（不，用更高版本的本地构建覆盖系统 rpms 是不被视为一种选择）。

EPEL 确实提供了 rpm [`CGI::Emulate::PSGI`](https://metacpan.org/module/CGI%3a%3aEmulate%3a%3aPSGI)，[`HTTP::Server::Simple::PSGI`](https://metacpan.org/module/HTTP%3a%3aServer%3a%3aSimple%3a%3aPSGI)但我没有看到如何将其中任何一个变成所需的解决方案。

所以，我的问题是：有没有一种干净/可维护的方法让 Dancer 在 CentOS-6 上运行并进行预分叉？除此之外，如何让 Apache 与本地 perl 安装（我可以使用 cpanm 之类的工具来安装东西）很好地配合？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T14:44:52.100

如果你想限制自己使用 CentOS 附带的软件包，那么你可以在 mod_perl 下运行你的 Dancer 应用程序。mod_perl 有一个 Plack 适配器，所以它相当简单。

例如

```
<Location /myapp>
  SetHandler perl-script
  PerlHandler Plack::Handler::Apache2
  PerlSetVar psgi_app /var/www/html/myapp.example.com/app.psgi
</Location> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T08:41:23.930

我强烈推荐你使用[perlbrew](http://search.cpan.org/~gugod/App-perlbrew-0.50/lib/App/perlbrew.pm)，忘记系统 perl。

# php - 加速生成N个唯一随机数代码

> ID：11803080
> 
> 赞同：0
> 
> 时间：2012-08-03T20:48:18.940
> 
> 标签：php

我被要求生成 AA0000-ZZ9999 范围内的所有可能组合（我们称之为`folio`），对于每个组合我还需要一个 8 位唯一随机数（我们称之为`attcode`），不能连续，我知道有有很多组合，过程会很慢，但是当我使用该`rand`函数时，我必须验证每个`attcode`都必须是唯一的，这会使我的代码变慢，所以如果可能的话（我知道是，只是不知道如何），给我建议'关于如何在我的代码中改进它

```
$alph = str_split("ABCDEFGHIJKLMNOPQRSTUVWXYZ", 1);
$code_cache = array();
foreach ($alph as $value1) {
  foreach ($alph as $value2) {
    for ($i = 0; $i <= 9; $i++) {
        $n=$i;
        if($i<10){
            $n="000".$i;
        }
        elseif($i<100){
            $n="00".$i;
        }
        elseif($i<1000){
            $n="0".$i;
        }
        $code = rand(10000000, 99999999);
        while(in_array($code, $code_cache)){
            $code = rand(10000000, 99999999);
        }
        $code_cache[]=$code;
        echo $value1.$value2.$n.'-'.$code.'<br/>';
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T21:19:27.307

好吧，这次我彻底破解了。我实际上对自己有点满意：

```
// An array of 10000 0's
$attcodes1 = array_fill(0, 9999, 0);

// An array of 10000 from 0 - 9999
$attcodes2 = range(0, 9999);
// Not actually necessary but makes $attcodes appear more random
shuffle($attcodes2);

// Loop until the alphas roll over to 3 characters
for ($alpha = "AA", $num = 0; $alpha != 'AAA'; $num++) {
  if ($num == 1001) {
    $num = 0; // At 1000 reset the counter to 0
    $alpha++; // Roll over to next alpha sequence
  }
  $folio = sprintf("$alpha%04s", $num); // Generate folio

  // Here's the clever bit, if I do say so myself...
  // Loop while we are hitting 4 digit sequences that have used every other
  // possible 4 digit sequence and remove them from the options.
  // This is *very* unlikely to loop more than twice, if ever
  while ($attcodes1[$part1 = array_rand($attcodes1)] >= 9999) {
    array_splice($attcodes1, $part1, 1);
  }
  // Get a 4 digit sequence not used with $part1 before and make sure we never
  // get it again (increment counter)
  $part2 = $attcodes2[$attcodes1[$part1]++];
  // Now it just needs stitching together and left-padding with 0s
  $attcode = sprintf("%04s%04s", $part1, $part2);

  // Job done
  echo $folio.'-'.$attcode."\n";

} 
```

...并且所有这些都没有我早期尝试产生的疯狂内存使用。说真的，在 PHP中存储一个 32 位（*4 字节！* ）整数需要**24 个字节。**

 *查看我（相当低规格）笔记本电脑的进度，我估计从开始到结束需要 10 分钟的运行时间。如果您不即时回应结果，这将大大减少。我认为。虽然我不确定你会用它们做什么而不是烧毁内存或卡在磁盘 I/O 上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T17:57:57.837

我做了一个功能，请过一下

```
function fnGetRandomNumber($intLength = 6) 
{
  $arrAlphNumeric = array("c","d"); 
  $arrCharacters = array("a", "b", "c", "d", "e", "f", "g", "h", "i", "j", "k", "l", "m", "n", "o", "p", "q", "r", "s", "t", "u", "v", "w", "x", "y", "z"); 
  $arrNumbers = array("0", "1", "2", "3", "4", "5", "6", "7", "8", "9"); 
  $strNewNumber = ""; 
  $intCountNumberLength = 1; 
  do { 
     $strValue = $arrAlphNumeric[rand(0,1)]; 
     if($strValue == "c") { 
        $strNewNumber .= $arrCharacters[rand(0,25)]; 
      } else { 
        $strNewNumber .= $arrNumbers[rand(0,9)]; 
      } 
        $intCountPasswordLength++; 
    } while($intNumberLength >= $intCountNumberLength); 

    return $strNewNumber; 
} 
```*

# java - Java Console Menu library - 有没有一种简单的方法来创建命令行菜单？

> ID：11803081
> 
> 赞同：8
> 
> 时间：2012-08-03T20:48:19.243
> 
> 标签：java, console-application

## 背景

在 Java 中，我想制作一个***简单、快速***的控制台应用程序，它提供一系列菜单并接受用户输入，然后调用某些方法并输出其他菜单。基本上，我需要创建一个循环：

```
menu > user selection > action > menu > ... 
```

最终，我在使用 Apache Camel 的集成服务器上使用它。我有一个“快速而肮脏”的应用程序，我用它来练习一些服务器路由作为开发工具。我不想花太多时间在这么简单的事情上。

必须有一个简单的方法来做到这一点。命令行上的控制台和菜单已经存在了几十年！必须有一个Java库可以很好地做到这一点。我只是没找到...

## 问题

是否有一个库或一些 Apache 实用程序，或者任何可以让创建***超级快速、超级简单***的控制台菜单变得轻而易举的东西？

## 例子

使用适当的工具，制作一个功能如下的菜单应该不到 30 分钟
`git add -i`

也就是说，我需要做一些功能类似于[git Interactive commands](http://git-scm.com/book/en/Git-Tools-Interactive-Staging)或任何其他控制台应用程序的东西，并且我想**快速**完成。

* * *

编辑：

下面的建议使用“陈词滥调”效果很好，允许我只注释一些方法并自动构建一个菜单。如果它对某人有帮助，我想包括一些关于让 Cliche 工作的重要说明：

1.  该项目已移至[谷歌代码](http://code.google.com/p/cliche/)
2.  它似乎没有得到维护，但在[问题部分](http://code.google.com/p/cliche/issues/detail?id=1)，*jbachorik* mavenized 项目！
3.  以下是我需要对我的 POM 进行的唯一调整：

添加一个回购：

```
 <repository>
       <id>sonatype-nexus-snapshots</id>
       <url>https://oss.sonatype.org/content/repositories/snapshots</url>
    </repository> 
```

添加依赖：

```
 <dependency>
        <groupId>com.googlecode.cliche</groupId>
        <artifactId>cliche</artifactId>
        <version>1.0-SNAPSHOT</version>
    </dependency> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-06T05:51:40.290

看看[陈词滥调](http://cliche.sourceforge.net)

它使用`@Command`方法注释来快速创建基于控制台的交互式应用程序。它的类型转换器是基本的，但可以配置 Camel 自己的扩展类型转换器来代替使用。它还提供额外的功能，例如列出可用命令和约定驱动的输入缩写。

# javascript - JavaScript 更改 this 的所有权

> ID：11803089
> 
> 赞同：0
> 
> 时间：2012-08-03T20:48:47.280
> 
> 标签：javascript, oop, this

我有一个对象，像这样

```
var Egg = function(){

   this.test = $(.slider .label);

    $('.slider').slider({
       min: 1,
       value: 2,
       step: 1,
       value: 10,
       slide: function(){
         this.test.html(ui.value)
       }
    });

} 
```

我想在滑块对象中使用我的变量测试。但是，在其当前形式中，它`this`指的是滑块而不是我的 egg 对象，因此在滑块移动时尝试使用 this.test 会导致未定义。

我怎样才能`this`引用我的对象而不是滑块。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T20:50:13.227

this 具有动态范围，因此在 slide 函数内部 this 指的是调用该函数的任何对象。这不等于定义函数时所等于的值（我不知道我是否说得很清楚……阅读此[http://hoolihan.net/blog-tim/2009/02/17/static- vs-动态范围/](http://hoolihan.net/blog-tim/2009/02/17/static-vs-dynamic-scope/)）。但是，您可以将其保存在另一个变量中并以这种方式访问​​它

```
var Egg = function(){

   var self = this;

   this.test = $(.slider .label);

    $('.slider').slider({
       min: 1,
       value: 2,
       step: 1,
       value: 10,
       slide: function(){
         self.test.html(ui.value)
       }
    });

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T21:04:18.353

这是 jQuery 吗？使用`$.proxy`...

```
$('.slider').slider({
   min: 1,
   value: 2,
   step: 1,
   value: 10,
   slide: $.proxy(function(){
     this.test.html(ui.value)
   }, this)
}); 
```

* * *

如果没有 jQuery，您可以使用`Function.prototype.bind`...

```
$('.slider').slider({
   min: 1,
   value: 2,
   step: 1,
   value: 10,
   slide: function(){
     this.test.html(ui.value)
   }.bind(this)
}); 
```

*   [MDN 文档和兼容性](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/bind)垫片`Function.prototype.bind`

# asp.net - Asp.net 防止 HTTP 重放攻击

> ID：11803091
> 
> 赞同：2
> 
> 时间：2012-08-03T20:49:06.310
> 
> 标签：asp.net, security

我有一个 asp.net 网络表单项目。在那里，“管理员”能够进入屏幕以提交将创建新用户 (CreateUser.aspx) 的表单。

如果该用户的权限稍后更改为低于管理员权限，他们将无法再访问该屏幕来创建新用户。但是，如果他们保存了作为管理员时创建新用户的确切 Web 请求，他们可以重播此请求并仍然创建新用户。

一个随机的人不可能提交这个表单，除非他们猜到一个活动的会话 id（这是每个表单提交时唯一检查的东西）。

CreateUser 是管理功能的众多示例之一。验证用户是否是每个这些不同表单提交的管理员的正确解决方案（不确定在 asp.net 中执行此操作的干净方法）？或者只是在注销时使会话过期并且从不重复使用会话 ID 是否可以接受？asp.net 是否有任何其他内置的安全功能来防止这种类型的攻击？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T21:06:43.493

一种方法是拥有一个基类（它又继承了类-“页面”），并且您的所有 aspx 页面都应该继承这个基类。这样每当加载一个 aspx 页面时，就会调用您的基本 pageLoad 方法。在这种方法中，您可以检查身份验证和授权。

```
 public class BasePage : System.Web.UI.Page
    {

        public BasePage()
        {
            this.Load += new EventHandler(BasePage_Load);
        }

     void BasePage_Load(object sender, EventArgs e)
        {
     //Check authentication/authorized
    //if authenticated/authorized leave it.. If not redirect to error page
        }
    }

    public partial class Forms_CreateUser : BasePage
    {
        protected void Page_Load(object sender, EventArgs e)
        {
        }
    }

    public partial class Forms_CreateRole : BasePage
    {
        protected void Page_Load(object sender, EventArgs e)
        {
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T11:51:10.087

用户 web.config 的授权设置，将 CreateUser.aspx 的访问权限限制为管理员角色的用户：http: [//support.microsoft.com/kb/316871](http://support.microsoft.com/kb/316871)（属性名称`roles`而不是`users`）。

# jquery - 使用 jQuery 访问远程 Web 服务

> ID：11803095
> 
> 赞同：2
> 
> 时间：2012-08-03T20:49:18.003
> 
> 标签：jquery, web-services, jsonp

我正在开发一个需要访问某个远程 Web 服务的移动应用程序。我正在使用 jQuery.ajax()，并且由于相同的来源策略，我被迫使用 JSONP 来完成我的请求。我的客户要求是这样的：

```
$.ajax({
    type: "GET",
    url: "http://www.foo.jws/bar",
    contentType: "application/json; charset=utf-8",
    data: {},
    dataType: 'jsonp', 

    success: function(msg) {
       console.log(msg);
    },
    error: function() {
      console.log('error');
    }

}); 
```

我一直收到的错误是“Uncaught SyntaxError: Unexpected identifier”

我做错了什么？

**编辑：** WS 中的数据是 XML

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T20:51:28.527

你在这里缺少一个功能。

```
error: function() {
    console.log('error');
} 
```

另外，去掉结尾的逗号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T20:54:55.410

您的错误回调代码不正确。我不确定这是否只是因为您在这里输入了代码，或者复制/粘贴了它。应该：

```
error: function (jqXHR, textStatus, errorThrown) {
    console.log('error');
} 
```

然后，您可以从进入错误回调的参数中获取有关您的调用发生了什么的更多信息。

编辑：好的，因为您从服务器获取 XML，您需要将 dataType 从 jsonp 更改为 xml。dataType 选项告诉 jQuery 期望返回的数据类型。

```
$.ajax({
    type: "GET",
    url: "http://www.foo.jws/bar",
    contentType: "application/json; charset=utf-8",
    data: {},
    dataType: 'xml', 
    success: function(msg) {
       console.log(msg);
    },
    error: function() {
      console.log('error');
    }
}); 
```

# ruby-on-rails - AcitveRecord 不会接受_nested_attributes_for 具有嵌套现有记录的新关联记录

> ID：11803100
> 
> 赞同：11
> 
> 时间：2012-08-03T20:49:32.137
> 
> 标签：ruby-on-rails, activerecord, nested-attributes

ActiveRecord 似乎不明白，给定具有嵌套属性的现有记录的一组参数，它可以创建一个新的嵌套记录，该记录本身具有嵌套*的现有*记录。（关系树`Existing -> New -> Existing`：）

这是一个错误，还是我错过了什么？

让我给你看一个简单的例子。

这是我的模型：

```
class User < ActiveRecord::Base
  has_many :posts
  attr_accessible :name, :posts_attributes
  accepts_nested_attributes_for :posts
end

class Post < ActiveRecord::Base
  belongs_to :group
  belongs_to :user
  attr_accessible :content, :title, :group_attributes
  accepts_nested_attributes_for :group
end

class Group < ActiveRecord::Base
  has_many :posts
  attr_accessible :name
end 
```

我在每个表中创建了一条记录，并相应地将它们关联起来，因此每个表中都有一条记录，并带有`id=1`--this 是已知的。现在，如果我有一个现有的用户、一个新的帖子和一个现有的组，并尝试使用 更新该记录`accepts_nested_attributes_for`，它不喜欢它：

```
1.9.3-p125 :044 > params
{
                  :id => 1,
                :name => "Billy",
    :posts_attributes => [
        [0] {
                          :title => "Title",
                        :content => "Some magnificent content for you!",
            :group_attributes => {
                  :id => 1,
                :name => "Group 1"
            }
        }
    ]
}
1.9.3-p125 :045 > u
#<User:0x00000002f7f380> {
            :id => 1,
          :name => "Billy",
    :created_at => Fri, 03 Aug 2012 20:21:37 UTC +00:00,
    :updated_at => Fri, 03 Aug 2012 20:21:37 UTC +00:00
}
1.9.3-p125 :046 > u.update_attributes params
   (0.1ms)  begin transaction
   (0.1ms)  rollback transaction
ActiveRecord::RecordNotFound: Couldn't find Group with ID=1 for Post with ID=
  from /home/trevor/.rvm/gems/ruby-1.9.3-p125/gems/activerecord-3.2.7/lib/active_record/nested_attributes.rb:462:in `raise_nested_attributes_record_not_found'
  from /home/trevor/.rvm/gems/ruby-1.9.3-p125/gems/activerecord-3.2.7/lib/active_record/nested_attributes.rb:332:in `assign_nested_attributes_for_one_to_one_association'
  from /home/trevor/.rvm/gems/ruby-1.9.3-p125/gems/activerecord-3.2.7/lib/active_record/nested_attributes.rb:288:in `group_attributes='
  from /home/trevor/.rvm/gems/ruby-1.9.3-p125/gems/activerecord-3.2.7/lib/active_record/attribute_assignment.rb:94:in `block in assign_attributes'
  from /home/trevor/.rvm/gems/ruby-1.9.3-p125/gems/activerecord-3.2.7/lib/active_record/attribute_assignment.rb:93:in `each'
  from /home/trevor/.rvm/gems/ruby-1.9.3-p125/gems/activerecord-3.2.7/lib/active_record/attribute_assignment.rb:93:in `assign_attributes'
  from /home/trevor/.rvm/gems/ruby-1.9.3-p125/gems/activerecord-3.2.7/lib/active_record/base.rb:498:in `initialize'
  from /home/trevor/.rvm/gems/ruby-1.9.3-p125/gems/activerecord-3.2.7/lib/active_record/reflection.rb:183:in `new'
  from /home/trevor/.rvm/gems/ruby-1.9.3-p125/gems/activerecord-3.2.7/lib/active_record/reflection.rb:183:in `build_association'
  from /home/trevor/.rvm/gems/ruby-1.9.3-p125/gems/activerecord-3.2.7/lib/active_record/associations/association.rb:233:in `build_record'
  from /home/trevor/.rvm/gems/ruby-1.9.3-p125/gems/activerecord-3.2.7/lib/active_record/associations/collection_association.rb:112:in `build'
  from /home/trevor/.rvm/gems/ruby-1.9.3-p125/gems/activerecord-3.2.7/lib/active_record/nested_attributes.rb:405:in `block in assign_nested_attributes_for_collection_association'
  from /home/trevor/.rvm/gems/ruby-1.9.3-p125/gems/activerecord-3.2.7/lib/active_record/nested_attributes.rb:400:in `each'
  from /home/trevor/.rvm/gems/ruby-1.9.3-p125/gems/activerecord-3.2.7/lib/active_record/nested_attributes.rb:400:in `assign_nested_attributes_for_collection_association'
  from /home/trevor/.rvm/gems/ruby-1.9.3-p125/gems/activerecord-3.2.7/lib/active_record/nested_attributes.rb:288:in `posts_attributes='
  from /home/trevor/.rvm/gems/ruby-1.9.3-p125/gems/activerecord-3.2.7/lib/active_record/attribute_assignment.rb:85:in `block in assign_attributes'
  from /home/trevor/.rvm/gems/ruby-1.9.3-p125/gems/activerecord-3.2.7/lib/active_record/attribute_assignment.rb:78:in `each'
  from /home/trevor/.rvm/gems/ruby-1.9.3-p125/gems/activerecord-3.2.7/lib/active_record/attribute_assignment.rb:78:in `assign_attributes'
  from /home/trevor/.rvm/gems/ruby-1.9.3-p125/gems/activerecord-3.2.7/lib/active_record/persistence.rb:216:in `block in update_attributes'
  from /home/trevor/.rvm/gems/ruby-1.9.3-p125/gems/activerecord-3.2.7/lib/active_record/transactions.rb:295:in `block in with_transaction_returning_status'
  from /home/trevor/.rvm/gems/ruby-1.9.3-p125/gems/activerecord-3.2.7/lib/active_record/connection_adapters/abstract/database_statements.rb:192:in `transaction'
  from /home/trevor/.rvm/gems/ruby-1.9.3-p125/gems/activerecord-3.2.7/lib/active_record/transactions.rb:208:in `transaction'
  from /home/trevor/.rvm/gems/ruby-1.9.3-p125/gems/activerecord-3.2.7/lib/active_record/transactions.rb:293:in `with_transaction_returning_status'
  from /home/trevor/.rvm/gems/ruby-1.9.3-p125/gems/activerecord-3.2.7/lib/active_record/persistence.rb:215:in `update_attributes'
  from (irb):15
  from /home/trevor/.rvm/gems/ruby-1.9.3-p125/gems/railties-3.2.7/lib/rails/commands/console.rb:47:in `start'
  from /home/trevor/.rvm/gems/ruby-1.9.3-p125/gems/railties-3.2.7/lib/rails/commands/console.rb:8:in `start'
  from /home/trevor/.rvm/gems/ruby-1.9.3-p125/gems/railties-3.2.7/lib/rails/commands.rb:41:in `<top (required)>'
  from script/rails:6:in `require'
  from script/rails:6:in `<main>'1.9.3-p125 :047 > 
```

它认为它找不到与新帖子相关的组（具有已知 ID）。当我从`group_attributes`（但它创建一个新的组记录）中删除 ID 时它可以工作。当我给出`posts_attributes`一个 ID 并从 id 中删除`group_attributes`（并再次创建一个新组）时，它会起作用。当他们都有 ID 时，它也可以工作。

关系有效：

```
1.9.3-p125 :059 > p = Post.new( { group_attributes: { name: 'Testing' } } )
#<Post:0x00000004212380> {
            :id => nil,
         :title => nil,
       :content => nil,
      :group_id => nil,
       :user_id => nil,
    :created_at => nil,
    :updated_at => nil
}
1.9.3-p125 :060 > p.group
[
    [0] #<Group:0x00000004211868> {
                :id => nil,
              :name => "Testing",
        :created_at => nil,
        :updated_at => nil
    }
] 
```

如果所有记录都是新的，它在使用`posts_attributes`和创建`group_attributes`过程中也完全有效。`User`

它不应该在第一个示例中仍然有效吗？ActiveRecord 应该足够聪明来解决这个问题......！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-11-14T15:11:58.870

这是我认为正在发生的事情：您正在传递一个组的 ID，向 ActiveRecord 指示该组存在。ActiveRecord 正在尝试查找该组以使用您在**group_attributes**中的其他数据对其进行更新。由于您在 post_attributes 中执行此*操作***，因此**ActiveRecord正在尝试通过*帖子*和组之间**的关联来查找该***组***. 也就是说，ActiveRecord 首先查找关联的组 - 其中 id = post.group_id - 然后从该结果中查找 ID = 1 的组。对于父关系，这可能看起来有点奇怪和笨拙，就像你的情况一样，但是我敢肯定，当您朝另一个方向前进时，您会看到这是一种有用的行为，其中嵌套属性代表一个或多个潜在的多个子级。**

 **但是，从 post_attributes 中的数据创建的帖子对象尚未与组关联 - post.group_id 为 nil。因此，当 ActiveRecord 进行第一次搜索以获取关联的组时，它是空的。相应地，它在（空）结果中找不到 ID = 1 的组。从技术上讲，记录是存在的，但就*与帖子的关联而言，*它不存在。

您可以通过在 post_attributes 中包含 group_id => 1 来证明这一点。我相信如果你这样做，ActiveRecord 会通过关联找到组，然后从结果中选择 ID = 1 的组，成功，然后使用 group_attributes 中的附加数据更新该组。

另请注意，像您所做的那样在帖子中包含组的嵌套属性的**唯一原因是，如果您允许用户在创建新帖子的同时更新组名称。**如果您只想将新帖子链接到现有组，那么您只需在 post_attributes 中包含 group_id 即可摆脱 group_attributes。**

# java - 如何让 WindowBuilder 创建不嵌套在 Eclipse、Java 中的字段

> ID：11803107
> 
> 赞同：5
> 
> 时间：2012-08-03T20:49:56.577
> 
> 标签：java, eclipse, user-interface, windowbuilder

我正在为 Eclipse Java 使用 WindowBuilder。

当我制作按钮或菜单（或任何东西）时，它会创建嵌套在构造函数内的字段。有没有办法让它们成为字段，然后在构造函数中初始化，以便我可以在构造函数之外使用它们？谢谢你。

即：从

```
public GUIFrame() {
    JMenuBar menuBar = new JMenuBar();
} 
```

到

```
public JMenuBar menubar; 
public GUIFrame() {
    menuBar = new JMenuBar();
} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-07T18:07:54.357

有一个按钮可以将元素从“本地到字段”转换。

![转变](../Images/6eee678b03542a89d3aac427b1b57259.png)

如果您希望所有组件默认为字段：Windows -> Preferences -> WindowBuilder -> Swing -> Code Generation -> 找到“Variable generation”并选择“Field”选项卡。

# javascript - 如何切片文本块，使其不会以拆分词结尾？

> ID：11803108
> 
> 赞同：0
> 
> 时间：2012-08-03T20:49:58.980
> 
> 标签：javascript

我编写的代码需要一大块文本，将其拆分为 995 个字符块并将每个块推入一个数组。但是，当单词落在 995 个字符的行时，这通常会导致拆分单词 - 我如何编辑我的代码，使每个文本块的长度尽可能接近 995 个字符（必须在下面），但在最后一个可用空间结束?

```
function cutUp() {
var PAname = prompt("Determine PA type and PA Name (e.g. 5=mexican food=");
var chunks = [];
var OGstring = document.getElementById('PATypes').value;
var my_long_string = OGstring.split('1').join('').split('2').join('').split('3').join('').split('4').join('').split('5').join('').split('6').join('').split('7').join('').split('8').join('').split('9').join('').split('0').join('').split('[edit]').join('').split('[citation needed]').join('').split('[').join('').split(']').join('').split('(').join('').split(')').join('');

var i = 0;
var n = 0;
while (n < my_long_string.length) {
    chunks.push(my_long_string.slice(n, n += 995));

}
if (chunks[0] != null) {
    $('PAType=Name=Value8').innerHTML = PAname + chunks[0];
}
if (chunks[1] != null) {
    $('PAType=Name=Value9').innerHTML = PAname + chunks[1];
}
if (chunks[2] != null) {
    $('PAType=Name=Value10').innerHTML = PAname + chunks[2];
}
if (chunks[3] != null) {
    $('PAType=Name=Value11').innerHTML = PAname + chunks[3];
}
if (chunks[4] != null) {
    $('PAType=Name=Value12').innerHTML = PAname + chunks[4];
}
if (chunks[5] != null) {
    $('PAType=Name=Value13').innerHTML = PAname + chunks[5];
}
if (chunks[6] != null) {
    $('PAType=Name=Value14').innerHTML = PAname + chunks[6];
}
if (chunks[7] != null) {
    $('PAType=Name=Value15').innerHTML = PAname + chunks[7];
}
if (chunks[8] != null) {
    $('PAType=Name=Value16').innerHTML = PAname + chunks[8];
}
if (chunks[9] != null) {
    $('PAType=Name=Value17').innerHTML = PAname + chunks[9];
}

////this is to create new exportable table
$('exportTable').innerHTML += $('tableContents').innerHTML;
$("exportTable").removeClass('hidden');
///this resets to default
defaultReset(); 
```

}​</p>

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T21:05:24.773

如果没有任何特定的 Javascript 知识，我会说向前看 995 个字符，如果该字符本身不是空格，则开始向后看，直到找到一个空格，然后在此处截断。

在类似 C 的伪代码中，`chars`作为你的大字符数组：

```
for(truncOffset = 995; truncOffset > 0; truncOffset--):
{  
    if chars[currentLoc + truncOffset] = ' ': /* a space character */ break;  
} 
```

冲洗干净，重复品尝。记得在找到那个空间后移动`currentLoc`到。`currentLoc + truncOffset`

# android - Android 错误：使用 android-json-rpc 时出现 NoClassDefFound 错误

> ID：11803112
> 
> 赞同：0
> 
> 时间：2012-08-03T20:50:15.090
> 
> 标签：android, macos, json-rpc

我正在使用 android-json-rpc 库。我将 android-json-rpc-0.3.4.jar 库添加到我的构建路径中。只需遵循一些基本教程。

这是我的代码：

```
public class MainActivity extends Activity {

  public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    TextView tv = (TextView) findViewById(R.id.text_view);
    tv.setText(testMethod());
  }

  private String testMethod() {
    // Crashes here on this line
    JSONRPCClient client = JSONRPCClient.create("10.1.2.3/json", JSONRPCParams.Versions.VERSION_2);
    String string = "";
    try {
        string = client.callString("cf.test");
    } catch (JSONRPCException e) {
        Log.i("JSON-RPC Client", e.toString());
    }
    return string;
  }
} 
```

* * *

错误：

```
 *AndroidRuntime(1528): java.lang.NoClassDefFoundError: org.alexd.jsonrpc.JSONRPCParams$Versions* 
```

在解决这个错误时，我发现有些人在 Mac Lion（和我的一样）上有一篇关于同样问题的博文，但在 Ubuntu 上运行良好。[http://www.1771.in/android-jsonrpc-not-working-on-mac.html](http://www.1771.in/android-jsonrpc-not-working-on-mac.html)

谁能帮我解决这个问题？

谢谢，德克斯特

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T21:08:02.340

我有两个选择。1\. 项目根目录下有“libs”文件夹，将lib复制到那里，无需添加到构建路径。这是android团队的新要求。2.增加使用类的导入。

刚刚编译并工作。

# asp.net - 无法访问本地 SQL 进行修改

> ID：11803115
> 
> 赞同：1
> 
> 时间：2012-08-03T20:50:24.127
> 
> 标签：asp.net, sql-server, iis

我已经获得了生产 SQL 数据库的备份，以便开始编写应用程序。
我已经让它作为本地实例运行并使用 Windows 身份验证，我可以阅读信息，但是我无法弄清楚如何让 IIS 在运行本地 ASP.Net 网站时使用我的 Windows 身份验证登录到 SQL 服务器。

我没有在数据库上添加用户的权限，`System.Data.SqlClient.SqlException: Login failed for user 'NT AUTHORITY\NETWORK SERVICE'.`当我尝试访问读取数据库的页面时出现错误。

我认为我暂时无法与数据库管理员沟通，让他为我解决这个问题。有什么我可以在这里做的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T20:58:11.480

您的 asp 代码使用与运行 IIS 相同的身份 - 网络服务帐户。要让它使用您的凭据，您可以将它们硬编码到连接字符串中，也可以使用模拟（请参阅此链接：http: [//msdn.microsoft.com/en-us/library/aa292118%28VS.71 %29.aspx](http://msdn.microsoft.com/en-us/library/aa292118%28VS.71%29.aspx) )

链接的要点：将其放入您的 web.config 文件中： `<identity impersonate="true" />`

-t。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T02:52:52.587

您需要在 SQL Server 中为网络服务帐户创建一个帐户，例如通过 SSMS 通过“安全”部分，右键单击“登录”并选择添加。您将添加一个 Windows 帐户，然后您可以查找并验证名称“NETWORK SERVICE”。然后切换到“用户映射”部分并授予查看数据库的权限。

参考：http: [//msdn.microsoft.com/en-us/library/ms998320.aspx#paght000015%5Fsqlserver](http://msdn.microsoft.com/en-us/library/ms998320.aspx#paght000015%5Fsqlserver)

第二种选择如果您的连接字符串中有“integrated security=sspi”，那么您应该：

1.  在 IIS 中打开集成身份验证
2.  在asp.net中开启windows auth
3.  在 asp.net 中打开模拟

希望它会有所帮助。

# javascript - 在 nodejs 中存储数据库查询（使用 socket.io）

> ID：11803118
> 
> 赞同：0
> 
> 时间：2012-08-03T20:50:34.897
> 
> 标签：javascript, node.js, mongodb

我的代码有一个（可能是愚蠢的）问题。我有这样的事情：

```
io.sockets.on('connection', function(socket)
{
    var list = {};

    socket.on('event', function(data){
        if(!list[data.field_name]){
            list[data.field_name] = [];
            // db and collection already defined
            var collection = new mongodb.Collection(db, coll);
            collection.find({
                field: data.field_name,
            }).toArray(function(err, results){
                list[data.field_name] = results[results.length-1];
                socket.emit('another-event',{
                    list:list[data.field_name];
                });
            });
        } else {
            socket.emit('another-event',{
                list:list[data.field_name];
            });
        }

    });
} 
```

我基本上是在尝试将数据库结果缓存在列表中，然后直接发送（没有数据库查询），如果之前已经从数据库中检索过它。

我遇到的问题是任务`list[data.field_name] = results[results.length-1]`不起作用。因此，如果它之前尝试检索数据，`list[data.field_name]`则已初始化为`[]`但不包含之后分配给它的数据。

需要明确的是，它确实从数据库中检索数据，并在第一次从数据库中检索数据时将其正确发送到客户端。当我尝试发送缓存副本时，问题就出现了——没有缓存副本。

我知道这与 nodejs （和 mongodb 查询）是异步的有关，但我似乎无法弄清楚如何使它工作。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T21:17:32.860

您`another-event`在对集合的查询完成之前发出。`another-event`如果发出时尚未检索到数据，则`list[data.field_name]`仍然为空。尝试类似：

```
io.sockets.on('connection', function(socket)
{
    var list = {};

    socket.on('event', function(data){
        var anotherEvent = function() {
            socket.emit('another-event',{
                list:list[data.field_name];
            });
        };

        if(!list[data.field_name]){
            list[data.field_name] = [];
            // db and collection already defined
            var collection = new mongodb.Collection(db, coll);
            collection.find({
                field: data.field_name,
            }).toArray(function(err, results){
                list[data.field_name] = results[results.length-1];
                anotherEvent();
            });
        } else {
            anotherEvent();
        }
    });
} 
```

# c# - 我的机器上的 Stopwatch.IsHighResolution == false。为什么？

> ID：11803119
> 
> 赞同：5
> 
> 时间：2012-08-03T20:50:35.160
> 
> 标签：c#, timer, stopwatch

对不起，这永远是真的！已编辑...

* * *

我刚刚意识到 Stopwatch.IsHighResolution 在我的机器中返回 false。为什么？它需要什么才能返回true？什么样的硬件？MSDN对此不多说。

机器配置：Win 7 x64；i7 930; 3x2 GB（三通道）；高清 500 GB 7200 转；能源配置 CPU @ 100%

* * *

根据要求：VS 2010；.NET 4.0；赢单申请；调试模式（我现在将在发布中测试）

* * *

在发布模式下，它返回 true！:) 好吧，对不起伙计们，实际上它总是正确的（调试和发布）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T20:53:04.193

可能是您没有高分辨率性能计数器的权限，或者您的硬件没有支持高分辨率性能计数器的功能。

# python - 从 Python 调用的 C 函数发出返回值

> ID：11803121
> 
> 赞同：9
> 
> 时间：2012-08-03T20:50:37.650
> 
> 标签：python, ctypes

我在一个看似简单的问题上遇到了困难。我需要从 Python 代码中调用各种 C 函数。目前，我正在尝试通过 ctypes 来做到这一点。我在使用一个简单的示例实现时遇到问题，我使用它来确保在更改大量现有代码之前一切都按预期工作。C 函数接受一些参数，进行各种数学计算，然后返回一个双精度值。这是我用作测试的 C 文件。

```
#include "Python.h"

double eval(double* args, int length, double* rands, int randLength, int debug)
{
    double val1 = args[0];
    double val2 = rands[0];
    double ret = val1 + val2;
    return ret;
} 
```

在我的实际测试功能中，我正在打印*val1*和*val2*以确保它们接收到值。在那方面一切都很好。调用此函数的 Python 如下。

```
test = ctypes.CDLL("/home/mjjoyce/Dev/C2M2L/AquaticWavesModel.so")
rand = Random();

args = [2]
argsArr = (ctypes.c_double * len(args))()
argsArr[:] = args

argsRand = [rand.random()]
argsRandArr = (ctypes.c_double * len(argsRand))()
rgsRandArr[:] = argsRand

result = test.eval(argsArr, len(argsArr), argsRandArr, len(argsRandArr), 0)
print "result", result 
```

当这打印返回的结果时，它通常会转储一个很大的负数。我的假设是我需要在 Python 处理该值之前进行一些转换，但我一生都找不到答案。我一直在搜索，但我不确定我是否遗漏了明显的信息，或者搜索了错误的信息。

此外，如果我将函数的返回类型更改为 int，则计算结果正确，并且返回并按预期打印一个 int。如果我将其设置为双倍，则 C 代码中的计算是正确的（我打印它们以检查），但 Python 不喜欢返回的结果。

有什么我想念的想法吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-03T21:04:44.573

`argtypes`您应该使用and`restype`成员在 Python 中设置函数的参数类型和返回类型：

```
test.eval.argtypes = [ctypes.POINTER(ctypes.c_double),
                      ctypes.c_int,
                      ctypes.POINTER(ctypes.c_double),
                      ctypes.c_int,
                      ctypes.c_int]
test.eval.restype = ctypes.c_double 
```

然后你可以像你正在做的那样调用它：构造`(ctypes.c_double * length)`用你的值初始化的类型数组，并且`result`将是一个`double`.

另请参阅此[ctypes 教程](http://python.net/crew/theller/ctypes/tutorial.html#arrays)，它有很多有用的信息。

# styling - 导航页面时如何实现稳定的导航栏？

> ID：11803122
> 
> 赞同：0
> 
> 时间：2012-08-03T20:50:44.803
> 
> 标签：styling, navbar

如何使导航栏像 Twitter 或 Facebook 一样稳定？在这些网站上，导航栏甚至没有退缩。它总是可见的，只有页面内容发生变化？我怎么能做这样的事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T21:02:38.060

使用 CSS`position: fixed`属性，以便导航栏始终相对于浏览器窗口而不是内容定位。

# sharepoint-2010 - sharepoint 2010 bcs 外部列表列类型为下拉列表，如何添加默认值？

> ID：11803123
> 
> 赞同：1
> 
> 时间：2012-08-03T20:50:46.690
> 
> 标签：sharepoint-2010

我通过BCS通过VS2010开发了sharepoint 2010外部列表，外部列表除了一列之外正确显示数据。我希望此列包含来自外部源的一些字符串作为其默认的多项选择值，任何帮助将不胜感激！

我注意到在 VS2010 BCS 中，您可以将类型描述符添加为 Collection，但是如何将其转换为列表的默认值？

# java - 为什么我们不能在 Java 中编写类 Child 实现 AnyInterface 扩展 Base？

> ID：11803124
> 
> 赞同：0
> 
> 时间：2012-08-03T20:50:48.100
> 
> 标签：java, class, inheritance, interface

当我们扩展一个类并实现一个接口时，我们把它写成——

```
public interface AnyInterface{ ---- }

public class Base{  -- }

public class Child extends Base implements AnyInterface{ ---- } 
```

现在我的问题是为什么我们不能把它写成 -

```
public class child implements AnyInterface extends Base{ --- } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-03T20:54:56.440

因为那不是语言选择的语法。

你所提议的只会增加语言的复杂性，更不用说降低它的可读性了。当一个人工作时，为什么有更多的语法？

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-03T20:56:04.633

我们可以只扩展一个类，但可以实现一对多的接口。在这种情况下，在实现内容之前先进行扩展会更便于读者阅读。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-08T11:45:24.980

因为类用于单独操作，而接口用于多种操作，因为我们在子类中定义服务。所以没有歧义的机会。单一责任原则规定类应该只做一件事。多重继承与多重责任的概率高度相关。

# java - 定义一个独立方法以供两个不相关的类重用的最佳方法是什么？

> ID：11803132
> 
> 赞同：3
> 
> 时间：2012-08-03T20:51:23.790
> 
> 标签：java

我有两个类需要使用相同的方法，我相信继承是多余的，因为这是唯一的共同点：没有关系并且操作非常具体。要重用的方法只需要两个参数并用它们计算一个操作。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-03T20:53:46.323

这听起来像是一种实用方法。所以，我认为包含该方法作为静态方法的单独类可以解决问题

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T20:53:35.643

组合在这里是一个可能的解决方案。这两个类可以通过您的操作传递给“帮助”类的一个实例。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-03T20:54:38.667

一般来说，我会为这种事情创建一个实用程序类——很可能使用静态方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-03T20:54:12.947

如果该方法不使用任何实例字段：将其设为静态并将其移动到某个实用程序类中。

# c++ - SHLD+BSR解码器？

> ID：11803137
> 
> 赞同：1
> 
> 时间：2012-08-03T20:51:37.563
> 
> 标签：c++, c, assembly, decoding, huffman-code

阅读以下[博客文章](http://www.virtualdub.org/blog/pivot/entry.php?id=205)。提到了一个所谓的“SHLD+BSR”霍夫曼解码器，然后将其进一步扩展为`MOV, MOV, SHLD, OR, BSR, MOV, SHR, MOV, OR, ADD, ADC`，但是我没有找到任何描述这种解码的参考或源代码。有谁知道是指什么解码方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T22:26:29.667

我还没有真正成功地理解这种解码霍夫曼代码的方法，但是这里的相关“内循环”包含这样的内容（稍微编辑以使 SHDL 和 BSR 明显）：

```
uint32 posidx = pos >> 5;
uint32 code = src32[posidx];
uint32 extrabits = src32[posidx + 1];
SHLD(code, extrabits, pos);
code |= 1;
uint32 idx = BSR(code);
uint8 *p = (const uint8 *)(table->mBsrLenTable[idx] + 
                           2*(code >> table->mBsrShiftTable[idx]));
result = p[0];
pos += p[1]; 
```

这占了，`MOV, MOV, SHLD, OR, BSR, MOV, SHR, MOV`但后来我不确定了。我*认为*是`ADD`指乘以 2，`ADC`实际上是添加的技巧，`p[1]`并且`pos`连接`OR`条目`mBsrLenTable`和其余代码，但这似乎顺序错误，然后`OR`将对应于源中的加法. 也许我不应该在午夜之后做这种事情..

您可能最好自己看一下来源，因为老实说，我的回答是无用的。我在这里得到它：[sourceforge.net/projects/virtualdub/files/virtualdub-win/1.9.11.32842/VirtualDub-1.9.11-src.7z](http://sourceforge.net/projects/virtualdub/files/virtualdub-win/1.9.11.32842/VirtualDub-1.9.11-src.7z/download)查找文件`src\Meia\source\decode_huffyuv.cpp`，它从表初始化开始，实际解码在宏调用`DECODE`，大约 200 行下来。

# jquery - 如何在 nivo-slider.js v.3.0 中获得“boxRain”效果？

> ID：11803140
> 
> 赞同：3
> 
> 时间：2012-08-03T20:51:55.487
> 
> 标签：jquery, css, slideshow, nivo-slider

Nivo Slider v.3.01 现在默认是响应式的，这似乎禁用了许多效果，例如“boxRain”。有谁知道如何让“boxRain”效果再次出现？

我发现这个解决方案可以让一些效果再次起作用，例如“sliceUp”等，但找不到“boxRain”或其他“box”效果的解决方案：

在 Nivo Slider v.3.01 中修复“切片”效果的解决方案：

`.nivoSlider img { vertical-align: baseline !important; max-width: none !important; }`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T18:59:27.317

我也有同样的问题。只有左/右切片效果和淡入淡出效果有效。所有盒子效果， sliceUp 等都不起作用。

我正在使用带有 jquery 1.9 的 nivo-slider 3.2。

# .net - RhinoMocks：如何使用提供给方法的参数运行自定义委托？

> ID：11803142
> 
> 赞同：0
> 
> 时间：2012-08-03T20:52:01.647
> 
> 标签：.net, vb.net, mocking, rhino-mocks

我有一个具有创建方法的类，将 POCO 实体传递给它。我想要发生的是我将一个委托附加到方法调用，如下所示：

```
stubObject.Stub(Function(i) i.Create(Arg(of MyObject).Is().Anything))) _
   .Return(True) 
```

我想要做的是获取传递给 Create 的参数实例并运行自定义操作。我认为带委托的 Do() 可以解决问题，但我无法让 RhinoMocks 3.6 (.NET 4) 允许我输入参数。

我在哪里做错了？我不能这样做：

```
stubObject.Stub(Function(i) i.Create(Arg(of MyObject).Is().Anything))) _
   .Return(True) _
   .Do(Sub(i) ...) 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T17:37:08.057

我认为您想要的是“WhenCalled”选项。有关如何使用它来获取传递给模拟调用的参数的示例，请参阅[此 SO 问题。](https://stackoverflow.com/questions/4387299/set-a-property-of-an-object-in-a-expect-call)

# safari - Safari 6 边框在设置边框半径后悬停

> ID：11803144
> 
> 赞同：1
> 
> 时间：2012-08-03T20:52:25.660
> 
> 标签：safari, rendering, css

我在页面上有一个典型的链接。悬停时，链接接收边框颜色和边框半径。在 Safari 6 中，我注意到当鼠标离开链接时，会留下非常微弱的边框颜色。如果您再次将鼠标悬停在链接上，在某些情况下边框会变得越来越暗，即使没有设置边框颜色。如果没有设置边界半径，则不会出现此问题。

我无法在 Firefox 或 Chrome（适用于 Mac）中重复该问题。我发现的最简单的解决方法是为基本锚样式指定纯色或透明边框颜色。这可能只是一个 Safari 渲染错误吗？

渲染问题的链接：http: [//jsfiddle.net/zafer/msnak/4/](http://jsfiddle.net/zafer/msnak/4/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T09:00:00.013

尝试使边界半径值等于锚元素上的填充，看看是否没有帮助。我在 Safari 6 中也遇到了同样的问题，这似乎已经解决了。

所以你的 CSS 代码看起来像这样：

```
a {
  display: inline-block;
  padding: 15px;
  border-radius: 15px;
}

a:hover {
  background: #004184;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T12:57:34.600

背景剪辑解决方案确实为我解决了问题，请查看[https://stackoverflow.com/a/3447130/1200097](https://stackoverflow.com/a/3447130/1200097)上的详细信息，您的属性可能需要重新排序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T21:40:58.803

刚刚遇到同样的问题，发现使用偶数（2,4,6,..）作为半径为我修复了它，如下所示：

```
a{
    color: white;
    padding-right: 9px;
    padding-left: 9px;
}
a:hover{
    background-color: green;
    border-radius: 4px;
} 
```

不管不同的填充值。

# c# - 写入一系列单元格时，您可以将公式从 C# 写入 Excel 吗？

> ID：11803145
> 
> 赞同：0
> 
> 时间：2012-08-03T20:52:25.240
> 
> 标签：c#, excel, interop

我有一个自制的实用程序，可以将数据从 DataSet 传输到 Excel 电子表格。我想在其中一列中放置一个公式（例如“=+RC[-2]-RC[-1]”）。但是，Excel 将其视为字符串，而不是将其解释为公式。该实用程序创建对象数组并将其传输到 Excel 中的范围。这是问题吗？我过去曾将公式写入 Excel，但仅在写入单个单元格时。

```
for (int r = 0; r < nr; r++)
   {
      r = dt.Rows[r];
      nOut++;

      aRng = new object[nc];
      for (int c = 0; c < nc; c++) else aRng[c] = dr[c];

      oRng = oSheet.get_Range(CellAddress(nOut, 1), CellAddress(nOut, nc));
      oRng.Value2 = aRng;
   } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T20:57:11.743

您必须使用 .Formula 属性才能强制 excel 将其视为公式。

```
((Range)worksheet.Cells[row, col]).Formula = myFormula 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T20:54:56.050

您必须使用对象的`.Formula`or`FormulaR1C1`属性`Range`。

```
string s = "=+RC[-2]-RC[-1]";
...
oRng.FormulaR1C1 = s; 
```

# sdk - Sipek sdk 关闭回声消除

> ID：11803147
> 
> 赞同：0
> 
> 时间：2012-08-03T20:52:54.233
> 
> 标签：sdk, echo, sip, voip

在通话过程中，如果我没有主动对着麦克风讲话，就好像没有发送音频数据包一样。这会导致问题，因为我正在尝试在服务器级别混合音频。它似乎是 pjsip 堆栈中的某种回声消除。有人知道是否有办法关闭它吗？

我已经用 Zoiper 进行了测试，并且我已经将问题隔离到了这个 sdk。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T05:34:23.610

这通常不是因为 AEC。您应该寻找一种叫做“VAD”（语音活动检测）的东西。如果您发现它，请尝试更改其设置或禁用它。

# python - 使用 mandrill 和 django 进行电子邮件转发和跟踪

> ID：11803149
> 
> 赞同：2
> 
> 时间：2012-08-03T20:53:19.030
> 
> 标签：python, django, smtp, mailchimp

[Mandrill](http://mandrill.com/)是[MailChimp](http://mailchimp.com/)制造商推出的一项相当新的事务性电子邮件服务。我想使用这项服务来跟踪客户的电子邮件。

与[这个关于跟踪和转发的 rails 实现的问题](https://stackoverflow.com/questions/6078885/email-forwarding-like-craigslist-rails)类似，我的 Django 应用程序将为每个用户提供一个唯一的电子邮件地址，并且任何发送到该地址的电子邮件都将由 Mandrill 自动跟踪，然后将跟踪数据提供给用户在一个漂亮的界面。

我知道 Mandrill[可以充当 SMTP 服务器](http://help.mandrill.com/forums/20689696-smtp-integration)。我对此了解不多，但我知道这意味着至少可以阅读电子邮件和撰写电子邮件。由于 Mandrill 可以跟踪收到的电子邮件，这几乎可以处理我需要的一切。

有一个更好的方法吗？理想情况下，我只想简单地转发消息并进行跟踪。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T17:29:57.843

您是否查看过[https://mandrillapp.com/](https://mandrillapp.com/)，它为您提供了跟踪每封电子邮件发生的事情所需的一切。此外，[https:](https://mandrillapp.com/api/docs/) //mandrillapp.com/api/docs/ Api 具有所有各种功能，可让您从应用程序中检索数据。对我有用的只是玩这个并检查可用的选项。此外，Mandrill 客户支持非常好，可以回复各种查询，因此也可以尝试。 [http://help.mandrill.com/anonymous_requests/new](http://help.mandrill.com/anonymous_requests/new)

您有什么特别想追踪的吗？

# java - Android WebView后退按钮导致强制关闭

> ID：11803152
> 
> 赞同：-1
> 
> 时间：2012-08-03T20:53:36.987
> 
> 标签：java, android, android-webview

这是我的程序代码。我是 Android 和 Java 的新手，所以它可能看起来很乱。当我在添加此代码后按下后退按钮时，我得到一个强制关闭。

```
 package com.alexriggs.android.gansterstreetwars;

import android.app.Activity;
import android.content.Intent;
import android.net.Uri;
import android.os.Bundle;
import android.view.KeyEvent;
import android.webkit.WebView;
import android.webkit.WebViewClient;

public class GangsterStreetWarsActivity extends Activity {
    /** Called when the activity is first created. */
    final Activity activity = this;
    WebView myWebView;
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        WebView myWebView = (WebView) findViewById(R.id.webview);
        myWebView.getSettings().setJavaScriptEnabled(true);
        myWebView.setWebViewClient(new MyWebViewClient());
        myWebView.getSettings().setBuiltInZoomControls(true);
        myWebView.getSettings().setLoadWithOverviewMode(true);
        myWebView.getSettings().setUseWideViewPort(true);
        myWebView.loadUrl("http://mafia.itwontwork.net/?pk_campaign=Android&pk_kwd=MainApp");
    }
    private class MyWebViewClient extends WebViewClient {

        public boolean shouldOverrideUrlLoading(WebView view, String url) {
            if (Uri.parse(url).getHost().equals("mafia.itwontwork.net")) {
                // Designate Urls that you want to load in WebView still.
                return false;
            }           
            // Otherwise, give the default behavior (open in browser)
            Intent intent = new Intent(Intent.ACTION_VIEW, Uri.parse(url));
            startActivity(intent);
            return true;
        }
        }
    @Override
    public boolean onKeyDown(int keyCode, KeyEvent event) {
    if ((keyCode == KeyEvent.KEYCODE_BACK) && myWebView.canGoBack()) {
        myWebView.goBack();
        return true;
    }
    return super.onKeyDown(keyCode, event);
    }
} 
```

错误的 logcat 在这里：http: [//itwontwork.net/logcat/1.txt](http://itwontwork.net/logcat/1.txt)

我已将其缩小到“myWebView.goBack();”这一行。即使我取出所有 Ifs 并离开那条线，它仍然不起作用。

我从[这里](https://stackoverflow.com/questions/6077141/android-webview-how-to-code-the-back-button)获得了返回按钮代码，它适用于 18 人。但不是我:(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T10:44:00.517

问题是您实际上并没有`WebView`在`myWebView` *成员变量*中获得 的实例，而只是在方法中的*局部变量*中`onCreate`。（这就是为什么你`NullPointerException`在代码运行时有一个 -`myWebView`从来没有被初始化过。）

您可以通过更改线路来修复它

```
WebView myWebView = (WebView) findViewById(R.id.webview); 
```

至

```
myWebView = (WebView) findViewById(R.id.webview); 
```

在`onCreate`. （我没有检查其他错误，但这应该可以解决您的问题。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-04T13:40:13.623

将下面的行写入您的代码

```
1)  myWebView = (WebView) findViewById(R.id.webview);

2)  @Override
    public boolean onKeyDown(int keyCode, KeyEvent event) {
        if (keyCode == KeyEvent.KEYCODE_BACK) {
            myWebView.goBack();
            return true;
        }
        return super.onKeyDown(keyCode, event);
    } 
```

代替

```
1)  WebView myWebView = (WebView) findViewById(R.id.webview);

2)  @Override
    public boolean onKeyDown(int keyCode, KeyEvent event) {
        if ((keyCode == KeyEvent.KEYCODE_BACK) && myWebView.canGoBack()) {
            myWebView.goBack();
            return true;
        }
        return super.onKeyDown(keyCode, event);
    } 
```

# javascript - 向 Selenium IDE 添加函数

> ID：11803153
> 
> 赞同：1
> 
> 时间：2012-08-03T20:53:38.610
> 
> 标签：javascript, selenium

我将此代码测试到一个静态 HTML 页面，它工作正常。我尝试将以下内容添加到 Selenium 并得到“[error] Unexpected Exception: fileName -> chrome://selenium-ide/content/selenium-core/scripts/selenium-api.js, lineNumber -> 2531”。我认为它没有存储值：

```
runScript | {codebelow}
echo | javascript{storedVars['dropdowns']} 
```

在 Selenium 中，我去掉了“函数”之前的空格（这是上面的 {codebelow}）：

```
 function loop_dropdown(label){

        regions = window.document.getElementsByName(label)[0].children;
        idx=0;
        for (var i=0; i<regions.length;i++) {
            option = regions[i];
            if (option.value != -1)  //Don't Use the All Option
            {   var entry = {};
                entry.value_num = option.value;
                entry.value_txt = option.innerHTML;
                dropdowns[idx]=entry;
                idx++;
            }
        }
    storedVars['dropdowns'] = dropdowns;
    //document.write(storedVars['dropdowns'][0].value_num);
    //document.write(storedVars['dropdowns'][0].value_txt);
}
loop_dropdown('region'); 
```

在静态 HTML 页面中：

```
<head>

            <script type="text/javascript">
                //if (test)
                                var storedVars = [];
                    var dropdowns = [];
            </script>

            <script type="text/javascript">
                function loop_dropdown(label){

                    regions = window.document.getElementsByName(label)[0].children;
                    idx=0;
                    for (var i=0; i<regions.length;i++) {
                        option = regions[i];
                        if (option.value != -1)  //Don't Use the All Option
                        {   var entry = {};
                            entry.value_num = option.value;
                            entry.value_txt = option.innerHTML;
                            dropdowns[idx]=entry;
                            idx++;
                        }
                    }
                storedVars['dropdowns'] = dropdowns;
                //document.write(storedVars['dropdowns'][0].value_num);
                //document.write(storedVars['dropdowns'][0].value_txt);
            }
            </script>
...<body>...
        <script type="text/javascript">loop_dropdown('region');</script> 
```

# javascript - 为什么 cgi POST 数据会出现乱码和截断

> ID：11803154
> 
> 赞同：0
> 
> 时间：2012-08-03T20:53:41.073
> 
> 标签：javascript, post, xmlhttprequest, cgi

POST 的 JavaScript 是

```
file = document.getElementById("upfName").files[0];
xhrObj = new XMLHttpRequest();
xhrObj.open("POST", llm.serverExe + '?dataUpload', true);
xhrObj.setRequestHeader("Content-type", file.type);
xhrObj.setRequestHeader("X_FILE_NAME", file.name);
xhrObj.send(file); 
```

C++ 中的 cgi 方面是

```
int iLen = atoi(getenv("HTTP_CONTENT_LENGTH"));
char* pBuff = <<allocates iLen bytes>>
read(0, pBuff, iLen); 
```

如果我发送大约 100k 的文本（大约 10k 短行），iLen 是正确的，但只有大约 10k 的数据并且它的最后一部分是乱码（大约 1000 行之后它再次开始显示在大约 900 行，显示 100 行然后90k什么都没有）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T17:03:00.167

这是一次愚蠢的攻击。

1）您需要在循环中读取以获取所有数据，读取并返回“部分”数据。

2）如果数据是文本，您需要将 Windows 上的 stdin 文件模式更改为二进制，以便计数正确。否则，读取会删除回车符，从而使数据大小更小。然后由于数据少于您的预期，读取最终将不会返回（stdin 不会返回 EOF，它只是挂起）。

现在一切都好起来了。

# android - 将 onClick 添加到对话框布局中的按钮，没有类

> ID：11803156
> 
> 赞同：1
> 
> 时间：2012-08-03T20:53:48.017
> 
> 标签：android, button, dialog, listener

我有存储按钮的对话框布局 xml 文件，并且我已经设置`android:onClick="doSomething"`，但我没有任何类文件附加到该对话框。所以实际上 dialog_layout.xml 是我项目中唯一的文件。我能够显示它并能够与之交互，但我无法为对话框中的按钮制作 onClick 侦听器。我尝试让启动我的对话框的 Activity 成为该对话框的所有者，然后在该 Activity 中创建 public void doSomething(View view) 但它似乎仍然不起作用。我收到此错误：

```
08-03 23:39:23.085: E/AndroidRuntime(6757): java.lang.IllegalStateException: Could not find a method doSomething(View) in the activity class android.view.ContextThemeWrapper for onClick handler on view class android.widget.Button with id 'button2' 
```

知道我在做什么错吗？

编辑这里是代码：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    addPreferencesFromResource(R.xml.settings);

    findViewById(R.id.button2).setOnClickListener(new OnClickListener() {
        public void onClick(View v) {
        //Do something.
        } 
    });

    Preference keyP = (Preference) findPreference("keyP");
    keyP.setOnPreferenceClickListener(new OnPreferenceClickListener() {
        public boolean onPreferenceClick(Preference preference) {

            Dialog dialog = new Dialog(SettingsActivity.this);
            dialog.setContentView(R.layout.draws_dialog);
            dialog.setTitle("Title");
            dialog.show();

            return true;
        }
    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T14:05:15.300

您的代码看起来不错，除非您需要按照建议从代码中添加按钮。加载对话框布局后，需要添加以下代码。请注意，您需要摆脱 xml 布局中的按钮，在这种情况下，android 将创建具有当前主题样式的按钮。

```
dialog.setButton(Dialog.BUTTON_POSITIVE, "Do something", 
                 new DialogInterface.OnClickListener() {

    @Override
    public void onClick(DialogInterface dialog, int which) {
        // TODO do something here
    }
});
return dialog; 
```

如果您希望您的按钮具有特定的设计或功能，那么您可以使用以下内容：

```
dialog.setContentView(R.layout.draws_dialog);
Button myDialogButton = (Button)dialog.findViewById(R.id.my_button);
myDialogButton.setOnClickListener(new View.OnClickListener() {

    @Override
    public void onClick(View v) {
    // TODO Auto-generated method stub
    }
}); 
```

单击侦听器可以移出对话生成主体。

```
private DialogInterface.OnClickListener myButtonClickListener = new
    DialogInterface.OnClickListener(DialogInterface dialog, int which) {
    // TODO: do something here with click
}); 
```

对话生成主体将如下所示：

```
dialog.setButton(Dialog.BUTTON_POSITIVE, "Do something", myButtonClickListener); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T21:02:11.040

也许您可以拥有一个带有对话框主题的活动，例如清单中的

```
<activity android:name="MyDialog" android:theme="@android:style/Theme.Dialog"></activity> 
```

然后那个 Activity 看起来就像一个对话框

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T21:05:33.683

在`Dialog`类中，有一个方法叫做[`findViewById(int id)`](http://developer.android.com/reference/android/app/Dialog.html#findViewById%28int%29). 所以，如果你给你的按钮一个 id，你应该用这个方法获取它的实例。然后，您可以使用方法将 OnClickListener 添加到 Button [`setOnClickListener (View.OnClickListener l)`](http://developer.android.com/reference/android/view/View.html#setOnClickListener%28android.view.View.OnClickListener%29)。

# xpages - 如何从 XPages FileUpload 控件中获取文件名

> ID：11803158
> 
> 赞同：1
> 
> 时间：2012-08-03T20:53:55.317
> 
> 标签：xpages, xpages-ssjs

在 XPages 中，在文件上传控件中，在用户选择文件之后但在保存之前如何获取文件名？我对路径不感兴趣，因为我认为由于安全问题而无法获取，但如果可能的话，我想获取文件名和扩展名。

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-04T00:19:50.117

实际上，您可以获取该文件并对其进行完全操作，读取它，对它做任何您想做的事情，它存储在服务器上的 xsp 文件夹中，您可以对其进行读/写访问......这是一个与交互的代码片段该文件，我通常从 beforeRenderResponse 调用...

```
var fileData:com.ibm.xsp.http.UploadedFile = facesContext.getExternalContext().getRequest().getParameterMap().get(getClientId('<INSERT ID OF UPLOAD CONTROL HERE (ie. fileUpload1)>'));

if (fileData != null) {
    var tempFile:java.io.File = fileData.getServerFile();
    // Get the path
    var filePath:String = tempFile.getParentFile().getAbsolutePath();
    // Get file Name
    var fileName:String = tempFile.getParentFile().getName();
    // Get the Name of the file as it appeared on the client machine - the name on the server will NOT be the same
    var clientFileName:String = fileData.getClientFileName();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T13:41:52.040

听起来您指的是需要通过 CSJS 获取数据，您可以使用以下代码执行此操作：

```
var filename = dojo.byId('#{id:fileUpload1}').value.split('\\').pop(); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-04T13:46:01.010

这些链接应该能够为您提供帮助。

[http://www.bleedyellow.com/blogs/andyc/entry/intercepting_a_file_upload4?lang=en](http://www.bleedyellow.com/blogs/andyc/entry/intercepting_a_file_upload4?lang=en)

[http://www.bleedyellow.com/blogs/m.leusink/entry/processing_files_uploaded_to_an_xpage?lang=en](http://www.bleedyellow.com/blogs/m.leusink/entry/processing_files_uploaded_to_an_xpage?lang=en)

# qt - QDir 信息已更改

> ID：11803165
> 
> 赞同：2
> 
> 时间：2012-08-03T20:54:13.617
> 
> 标签：qt, qt4, qtreeview, qdir

我有一个 Qt 应用程序，它根据 QDir 的信息创建一个 qtreeview。有没有办法，如果目录信息发生变化（比如我添加一个新文件或删除一个现有文件），qtreeview 会更新吗？

谢谢！=)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T20:58:26.720

要监视文件系统更改，您可以使用[QFileSystemWatcher](http://doc.qt.nokia.com/4.7-snapshot/qfilesystemwatcher.html)

# ajax - 阿贾克斯使用 在圣杯

> ID：11803166
> 
> 赞同：3
> 
> 时间：2012-08-03T20:54:22.420
> 
> 标签：ajax, grails, gsp

阅读 Grails 文档（参见此处[http://grails.org/doc/latest/guide/theWebLayer.html#ajax](http://grails.org/doc/latest/guide/theWebLayer.html#ajax)），我被引导相信我可以使用 Ajax 使用以下语法更新 div：

我的观点 (Ajax/index.gsp)

```
<!doctype html>
<head>
        <meta name="layout" content="main"/>
</head>
<body>
        <div id="error"></div>
        <div id="message"></div>
        <g:remoteLink action="retrievePets" update="message">Ajax magic... Click here</g:remoteLink>
</body>
</html> 
```

我的控制器（AjaxController）：

```
package genericsite 

class AjaxController { 

    def index() { } 

        def retrieveMessage() { 
                render "Weeee! Ajax!" 
        } 
  } 
```

但是，当我选择链接时，它只是将我发送到一个带有“Weeee！Ajax！”的页面。我知道如何以典型的 jQuery 方式做到这一点。这个稍微方便点...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T22:14:00.317

默认情况下，默认的“主”布局不包含 javascript 库，因此如果您想使用`remoteLink`或使用它的任何关联，则需要添加

```
<r:require module="jquery"/> 
```

或（如果您使用的是 2.0 之前的 Grails 版本或未使用资源插件）

```
<g:javascript library="jquery"/> 
```

到`<head>`您的 GSP 部分。

# c# - 用于检查项目文件中的项目变量和引用路径的 api

> ID：11803167
> 
> 赞同：1
> 
> 时间：2012-08-03T20:54:26.433
> 
> 标签：c#, .net, xml, visual-studio-2010, msbuild

我正在`.net application (VS2010)`使用 x no。解决方案和变量编号。这些解决方案中的项目。我需要检查项目属性（特定于一定数量的项目）是否同质，并在构建期间**检查/验证参考路径。**是否有执行此操作的**API**？如果没有，我该如何建造一个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T23:58:52.703

您可以使用 MSBuild 框架对项目文件进行解析和评估。您需要使用的主要类是[ProjectCollection](http://msdn.microsoft.com/en-us/library/microsoft.build.evaluation.projectcollection)和[Project](http://msdn.microsoft.com/en-us/library/microsoft.build.evaluation.project)。

但首先你需要处理你的 .sln 文件。由于 API 无法直接加载 .sln 文件，因此您需要先将 .sln 文件转换为项目文件，以便 API 可以加载。该方法在[此处](http://www.codeproject.com/Tips/177770/Creating-MSBuild-projects-from-sln-files)描述。转换后您将获得一个 .sln.metaproj 文件，它们是 .sln 的等效表示，但具有 MSBuild 格式。之后，您可以解析 .sln.metaproj 文件和引用的项目并评估您需要的属性。此示例打印出解决方案中所有项目的 Debug|AnyCPU 配置的 OutputPath 属性评估：

```
 Dictionary<string, string> globalProperties = new Dictionary<string, string>();

    globalProperties.Add("Configuraion", "Debug");
    globalProperties.Add("Platform", "AnyCPU");

    ProjectCollection pc = new ProjectCollection(globalProperties);

    Project sln = pc.LoadProject(@"my_directory\My_solution_name.sln.metaproj", "4.0");

    foreach (ProjectItem pi in sln.Items)
    {
        if (pi.ItemType == "ProjectReference")
        {
            Project p = pc.LoadProject(pi.EvaluatedInclude);
            ProjectProperty pp = p.GetProperty("OutputPath");
            if (pp != null)
            {
                Console.WriteLine("Project=" + pi.EvaluatedInclude + " OutputPath=" + pp.EvaluatedValue);
            }
        }
    } 
```

# grammar - 为什么会出现这种语法冲突？

> ID：11803171
> 
> 赞同：4
> 
> 时间：2012-08-03T20:54:44.967
> 
> 标签：grammar, lalr, lemon

它是用 Lemon 编译的，它是一个 LALR(1) 解析器生成器：

```
program ::= statement.

statement ::= ifstatement Newline.
statement ::= returnstatement Newline.

ifstatement ::= If Number A statement B.
ifstatement ::= If Number A statement B Newline Else A statement B.

returnstatement ::= Return Number. 
```

错误信息是：

```
user@/tmp > lemon test.lm
test.lm:6: This rule can not be reduced.

1 parsing conflicts. 
```

调试输出是：

```
State 0:
          program ::= * statement
          statement ::= * ifstatement Newline
          statement ::= * returnstatement Newline
          ifstatement ::= * If Number A statement B
          ifstatement ::= * If Number A statement B Newline Else A statement B
          returnstatement ::= * Return Number

                            If shift  10
                        Return shift  3
                       program accept
                     statement shift  13
                   ifstatement shift  12
               returnstatement shift  11

State 1:
          statement ::= * ifstatement Newline
          statement ::= * returnstatement Newline
          ifstatement ::= * If Number A statement B
          ifstatement ::= * If Number A statement B Newline Else A statement B
          ifstatement ::= If Number A statement B Newline Else A * statement B
          returnstatement ::= * Return Number

                            If shift  10
                        Return shift  3
                     statement shift  4
                   ifstatement shift  12
               returnstatement shift  11

State 2:
          statement ::= * ifstatement Newline
          statement ::= * returnstatement Newline
          ifstatement ::= * If Number A statement B
          ifstatement ::= If Number A * statement B
          ifstatement ::= * If Number A statement B Newline Else A statement B
          ifstatement ::= If Number A * statement B Newline Else A statement B
          returnstatement ::= * Return Number

                            If shift  10
                        Return shift  3
                     statement shift  8
                   ifstatement shift  12
               returnstatement shift  11

State 3:
          returnstatement ::= Return * Number

                        Number shift  14

State 4:
          ifstatement ::= If Number A statement B Newline Else A statement * B

                             B shift  15

State 5:
          ifstatement ::= If Number A statement B Newline Else * A statement B

                             A shift  1

State 6:
          ifstatement ::= If Number A statement B Newline * Else A statement B

                          Else shift  5

State 7:
      (3) ifstatement ::= If Number A statement B *
          ifstatement ::= If Number A statement B * Newline Else A statement B

                       Newline shift  6
                       Newline reduce 3   ** Parsing conflict **

State 8:
          ifstatement ::= If Number A statement * B
          ifstatement ::= If Number A statement * B Newline Else A statement B

                             B shift  7

State 9:
          ifstatement ::= If Number * A statement B
          ifstatement ::= If Number * A statement B Newline Else A statement B

                             A shift  2

State 10:
          ifstatement ::= If * Number A statement B
          ifstatement ::= If * Number A statement B Newline Else A statement B

                        Number shift  9

State 11:
          statement ::= returnstatement * Newline

                       Newline shift  16

State 12:
          statement ::= ifstatement * Newline

                       Newline shift  17

State 13:
      (0) program ::= statement *

                             $ reduce 0

State 14:
      (5) returnstatement ::= Return Number *

                     {default} reduce 5

State 15:
      (4) ifstatement ::= If Number A statement B Newline Else A statement B *

                     {default} reduce 4

State 16:
      (2) statement ::= returnstatement Newline *

                     {default} reduce 2

State 17:
      (1) statement ::= ifstatement Newline *

                     {default} reduce 1

----------------------------------------------------
Symbols:
    0: $:
    1: Newline
    2: If
    3: Number
    4: A
    5: B
    6: Else
    7: Return
    8: error:
    9: program: If Return
   10: statement: If Return
   11: ifstatement: If
   12: returnstatement: Return 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T12:35:27.237

查看调试输出中的状态 7。它描述了解析器已经接受了下一组标记的情况：

```
 ifstatement ::= If Number A statement B * 
```

在这种情况下，当出现换行符时，解析器可以选择以下两个选项：

1.  记住它并切换到状态 6。这种转变由语法中的下一条规则规定：

    ```
    ifstatement ::= If Number A statement B Newline Else A statement B. 
    ```

2.  认为当前规则已完成并返回上一级规则。此归约是由您的语法中的此规则规定的：

    ```
    ifstatement ::= If Number A statement B. 
    ```

在这种情况下，LALR(1) 解析器没有其他选择会失败，因为它无法提前查看流中的下一个标记。它无法预测 Else 会在 Newline 之后出现。

修改你的语法以避免这种冲突的情况。我只能补充一点，换行符通常不包含在语言语法中。Tokenizer 通常将它们视为类似于其他空白字符的标记边界。

# jaxb - JAXB 解组失败

> ID：11803173
> 
> 赞同：1
> 
> 时间：2012-08-03T20:54:51.980
> 
> 标签：jaxb, unmarshalling

解组响应字符串（xml 格式）时出现以下错误。最初它抱怨 and ，所以我从响应中删除了肥皂部分。现在它出现了这个错误。

类是使用 JAXB 2 从提供的 WSDL 创建的

```
**javax.xml.bind.UnmarshalException: unexpected element (uri:"http://ws.taxwareenterprise.com", local:"calculateDocumentResponse"). Expected elements are (none)
    at com.sun.xml.bind.v2.runtime.unmarshaller.UnmarshallingContext.handleEvent(UnmarshallingContext.java:662)
    at com.sun.xml.bind.v2.runtime.unmarshaller.Loader.reportError(Loader.java:258)
    at com.sun.xml.bind.v2.runtime.unmarshaller.Loader.reportError(Loader.java:253)** 
```

这是我的响应字符串（其中一部分）

```
**<calculateDocumentResponse xmlns="http://ws.taxwareenterprise.com">
            <txDocRslt>
                <jurSumRslts>
                    <jurSumRslt>
                        <xmptAmt>5.0</xmptAmt>
                        <txableAmt>15.0</txableAmt>
                        <txAmt>0.04</txAmt>
                        <txJurUID>...** 
```

这是我的 xsd 的“CalculationResponse”（其中一部分）

```
<xs:complexType name="CalculationResponse">
        <xs:sequence>
            <xs:element name="txDocRslt" type="tns:TxDocRslt"/>
        </xs:sequence>
    </xs:complexType> 
```

这是我的解组代码：

```
**final JAXBContext context = JAXBContext.newInstance(CalculationResponse.class);
            final Unmarshaller unmarshaller = context.createUnmarshaller();
            response = processResponse(response);//for removing soap headers
            responseObj = (CalculationResponse) unmarshaller.unmarshal(new StringReader(response));//Fails here...
            final TxDocRslt txDocRslt = responseObj.getTxDocRslt();** 
```

# java - 如何递归使用比较器？

> ID：11803178
> 
> 赞同：4
> 
> 时间：2012-08-03T20:55:08.510
> 
> 标签：java, sorting, comparator

我必须按照谁赢得最多比赛的顺序对数组“名称”（如下）中的球队进行排名。如果两支球队赢得了相同数量的比赛，那么我必须比较击败他们的球队的胜利。我到目前为止的代码如下。

完整的问题陈述在这里给出：[http ://www.cs.duke.edu/csed/newapt/tournamentrank.html](http://www.cs.duke.edu/csed/newapt/tournamentrank.html)

所以我想递归地使用比较器。比较器如何访问原始数据？我尝试创建一个 Team 类，该类为击败它的团队获取同一类的变量，但这显然不起作用。卡在这里，请帮助！

```
public class TournamentRanker implements Comparator<String>{

public class Team {
    String name;
    Integer wins;
    Team beatEm;
}

        //HOW TO make maps visible to comparator?
         public String[] rankTeams(String[] names, String[] lostTo) { 

             //map all teams to number of wins & to team that beat them
             ArrayList<String> teams = new ArrayList<String>();
             HashMap<String, Integer> Teamwins = new HashMap<String, Integer>();
                HashMap<String, String> Whobeat = new HashMap<String, String>();

             for(int x=0; x<names.length; x++)
             {
                 if(!teams.contains(names[x]))
                     teams.add(names[x]);

                 if(!Teamwins.containsKey(names[x]))
                     Teamwins.put(names[x], 0);
                 Whobeat.put(names[x],  lostTo[x]);
                 if(!Teamwins.containsKey(lostTo[x]) && !lostTo[x].equals(""))
                     Teamwins.put(lostTo[x], 0);
                 if(!lostTo[x].equals(""))
                     Teamwins.put(lostTo[x], (Teamwins.get(lostTo[x])+1));
             }
             for(String s: names)
             {
                 Integer wins = Teamwins.get(s);
                 Team beatEm = new Team(Whobeat.get(s), Teamwins.get(Whobeat.get(s)), ????)
             }
             //SORT list & turn into ARRAY
             Comparator<String> comp = new TournamentRanker();
             Collections.sort(teams, comp);
             String [] sortedTeams = new String[teams.size()];
             return teams.toArray(sortedTeams);

         }
        //NEED to use compareTo***?? OTHER strategy????

        //USE COMPARTOR - how to access all the data?

        public int compare(String team1, String team2){

        }       

 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T21:04:29.760

为了使地图可见，我建议创建`Comparator`一个内部类`TournamentRanker`，并将地图实例`TournamentRanker`化为该类的成员，如下所示：

```
public class TournamentRanker {

    public class Team {
        String name;
        Integer wins;
        Team beatEm;
    }

    // Map all teams to number of wins & to team that beat them
    ArrayList<String> teams = new ArrayList<String>();
    HashMap<String, Integer> Teamwins = new HashMap<String, Integer>();
    HashMap<String, String> Whobeat = new HashMap<String, String>();

    public String[] rankTeams(String[] names, String[] lostTo) { 
        TeamComparator teamComparator = new TeamComparator();

        // Use teamComparator to sort teams.
        ...
    }

    private TeamComparator implements Comparator<String> {
        public int compare(String team1, String team2){
            // This function can now access the maps.

            // Perform the comparison here.
            ...
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T21:43:45.690

如果您的目标是编写一个面向对象的程序，我将其结构如下：

1.  `Game`包含对参加比赛的两支球队的引用以及每支球队的得分的类 。
2.  一个`Team`包含由对方球队 ID 索引`Map`的游戏（对象）的类。`Game`如果两个团队可以多次见面，那么您将需要一个“多图”，每个键允许多个值对象。
3.  包含实例（可能由团队名称索引）和`Tournament`对象（另一个由您选择的某个唯一键索引）的对象。`Team``Map``Game``Map`

在您的比较器中，您可以比较两支球队的输赢记录，如果出现平局，请查看每支球队的个人比赛。

# gmail - Gmail 自定义下拉菜单

> ID：11803179
> 
> 赞同：0
> 
> 时间：2012-08-03T20:55:11.113
> 
> 标签：gmail

我想知道是否可以在 Gmail 中使用预定义的答案编写下拉菜单。我知道您有预设回复并且我使用它们，但我不想为我们的 Google Apps 域中的所有用户配置所有预设回复..

我只是想知道这是否可能，我不是在编码我只是在研究这个主题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T03:51:03.607

看看[GMailr](https://github.com/jamesyu/gmailr/) - 它可以为您提供一个起点。

# javascript - 在 ASPxClientGridView.ApplyFilter 执行其工作后触发的客户端事件

> ID：11803186
> 
> 赞同：2
> 
> 时间：2012-08-03T20:55:45.987
> 
> 标签：javascript, asp.net, c#-4.0, devexpress, client-side

此链接解释了如何通过 ASPxGridView.AfterPerformCallback 事件在服务器端处理它：

[http://www.devexpress.com/Support/Center/p/Q274366.aspx](http://www.devexpress.com/Support/Center/p/Q274366.aspx)

我该如何在客户端处理它？

我正在开发一个自定义服务器控件，并且我的控件上有这个客户端功能：

```
 applyFilterToGridView: function () {
        this.theGridView.ApplyFilter(this.filterCondition); 
        this.filterAppliedEvent();
    } 
```

因为 ApplyFilter 会进行回调，所以 this.filterAppliedEvent() 不会在正确的时间被调用，这应该是在过滤完成之后。this.filterAppliedEvent() 是一个客户端函数。

应用过滤器后会触发此事件：

```
protected void theGridView_AfterPerformCallback(object sender, DevExpress.Web.ASPxGridView.ASPxGridViewAfterPerformCallbackEventArgs e)
        {
            if (e.CallbackName == "APPLYFILTER")
            {
            }
        } 
```

有什么方法可以告诉客户端从 AfterPerformCallback 事件中调用 filterAppliedEvent 吗？

如果可能的话，我希望能够在 AfterPerformCallback 之后在客户端运行 this.filterAppliedEvent() 。

提前致谢。

**编辑（感谢 Filip 的解决方案）：**

C＃：

```
 protected void theGridView_AfterPerformCallback(object sender, DevExpress.Web.ASPxGridView.ASPxGridViewAfterPerformCallbackEventArgs e)
        {
            if (e.CallbackName == "APPLYFILTER")
            {
                ASPxGridView gv = sender as ASPxGridView;
                gv.JSProperties["cp_FilterApplied"] = "true";
                gv.JSProperties["cp_VisibleRowCount"] = gv.VisibleRowCount;
            }
        }

theGridView.ClientSideEvents.EndCallback = "function(s,e){"theGridView.theGridView_OnEndCallback(s, e);}"; 
```

JS：

```
theGridView_OnEndCallback: function (s, e) {
    if (s.cp_FilterApplied) {
        if (s.cp_FilterApplied.indexOf('true') != -1) {
            this.adjustGridViewSize();/*Uses visible row count.*/
            delete s.cp_FilterApplied;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-04T09:55:45.290

1.  在集合中`theGridView_AfterPerformCallback`添加条目，例如。`JSProperties``cp_FilterApplied`
2.  添加`EndCallback`客户端事件处理程序。
3.  如果存在， 则在`EndCallback`处理程序中执行。`this.filterAppliedEvent()``cp_FilterApplied`
4.  删除该属性，以便后续回调不执行`filterAppliedEvent`方法。

查看我对[这个问题](https://stackoverflow.com/questions/9743294/how-to-show-a-message-box-from-edit-add-new-button-click-of-a-devexpress-gridvie/9748367#9748367)的回答以获取代码示例。这实际上是同样的问题，只需设置 js 属性`theGridView_AfterPerformCallback`而不是`ASPxGridView1_RowUpdated`并根据需要调整名称/js 代码。

# objective-c - 添加到主页功能

> ID：11803189
> 
> 赞同：1
> 
> 时间：2012-08-03T20:56:14.010
> 
> 标签：objective-c, ios, sdk, webpage, homescreen

> **可能重复：**
> [如何通过应用程序在 iOS 桌面上创建快捷方式](https://stackoverflow.com/questions/7577889/how-could-i-create-a-shortcut-on-desktop-in-ios-through-an-app)

我想知道iOS API是否可以将网页放在主屏幕上（在Objective-C中）。要捕捉的特定事件？一个“神奇”的功能？:)

谢谢 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T21:02:05.783

不，应用程序无法在其沙盒之外执行任何操作。

正如对[这个问题](https://stackoverflow.com/questions/10836925/iphone-sdk-add-a-add-to-home-screen-button-in-a-uiwebview)的回答所解释的那样，您可以启动要在 Safari 中保存的页面，并为用户提供从那里保存页面的说明，然后使用 url 将应用程序从 Safari 切换回您的应用程序，但您可以t 将 webapp 从您的应用程序本身添加到跳板

# oracle - 我可以在 oracle express 版本上有多个数据库吗

> ID：11803190
> 
> 赞同：12
> 
> 时间：2012-08-03T20:56:18.293
> 
> 标签：oracle, oracle-xe

我可以在 oracle express 版本上有多个数据库吗？请告诉我设置的步骤是什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-03T20:58:04.517

不可以。每台服务器只能有一个 XE 数据库。您可以在该数据库中拥有任意数量的模式。如果您来自其他数据库的背景，那么大多数数据库所称的数据库最等同于 Oracle 所称的架构。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-12-07T14:45:40.457

我们使用安装了 Windows XP 的单独虚拟机实例来创建多个 oracle xe 数据库。然而，虚拟机为这个简单的任务消耗了太多的内存。

现在我正在使用码头工人。您可以在下面找到我目前正在使用的 docker 镜像：

[https://github.com/MaksymBilenko/docker-oracle-xe-11g](https://github.com/MaksymBilenko/docker-oracle-xe-11g)

将 docker 安装到计算机后，可以使用以下命令创建数据库：

```
# Create a folder for data in your home folder or somewhere else
mkdir /home/sedran/mydb1

# Download the docker image
docker pull sath89/oracle-xe-11g

# Create and start a new container with oracle-xe running on it
docker run --name oracle11g_mydb1 -d -p 1522:1521 -p 49163:8080 -v /home/sedran/mydb1:/u01/app/oracle sath89/oracle-xe-11g 
```

然后你可以从 localhost:1522/XE 连接到这个数据库

要创建第二个数据库，请执行以下命令：

```
mkdir /home/sedran/mydb2
docker run --name oracle11g_mydb2 -d -p 1523:1521 -p 49164:8080 -v /home/sedran/mydb2:/u01/app/oracle sath89/oracle-xe-11g 
```

新数据库将侦听 localhost 上的端口 1523。

不要忘记为每个容器分配不同的端口、名称和数据文件夹（卷）。

# css - 分别为每个图像使用 css3 过渡制作不透明度

> ID：11803192
> 
> 赞同：0
> 
> 时间：2012-08-03T20:56:28.643
> 
> 标签：css, css-transitions

我想使用 CSS3 转换分别更改每个图像的鼠标悬停不透明度。

这是代码：

```
<div id="gallary">
     <img src="images/1.jpg"/>
     <img src="images/1.jpg"/>
     <img src="images/1.jpg"/>
     <img src="images/1.jpg"/>
     <img src="images/1.jpg"/>
     <img src="images/1.jpg"/>
     <img src="images/1.jpg"/>
</div> 
```

这是CSS：

```
#gallary img{
    opacity:1;
    transition:all 1s ease-in-out;
    -webkit-transition:all 1s ease-in;
}

#gallary:hover img{
    opacity:.5;
} 
```

选择器适用于 id 为“gallary”的 div 内的所有图像。如何在鼠标悬停时分别更改每个图像的不透明度？

这是一个示例：http: [//jsfiddle.net/TJeHX/](http://jsfiddle.net/TJeHX/)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-03T20:57:50.873

```
#gallary:hover img { 
```

->

```
#gallary img:hover { 
```

您当前的定义更改了整个“图库”容器的不透明度，因此更改了所有图像。

# mootools - 在这一点上，Mootorial 的相关性或过时程度如何？

> ID：11803201
> 
> 赞同：3
> 
> 时间：2012-08-03T20:57:25.223
> 
> 标签：mootools, javascript

我正在寻找学习 MooTools，而[Mootorial](http://mootorial.com/wiki/)似乎是最完整、最全面的起点。但它说它是专门为 MT v. 1.2 设计的，而且我们现在似乎在使用 1.4.5。所以，我想知道，从 MooTorial 中学习是否会对自己造成伤害，还是值得？

或者，随时回答这个问题*对于来自浅 jquery 背景的人来说，从头开始学习 mootools 的最佳教程是什么？*

* * *

附带说明一下，如果有人尝试过 nettutsplus 高级教程，它有什么好处吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T00:02:32.990

mootorial 仍然非常相关。自 1.2.5 天以来，api 的变化并没有那么显着。值得注意的是：事件委托现在是核心的一部分。名称中包含 $ 的所有方法均已弃用。其余的几乎相同......一些最佳实践可能已经改变，但对于一个新的初学者来说，这已经足够了，请在此处查看重大更改的完整列表：[https ://github.com/mootools/mootools-core /wiki/Update-from-1.2-to-1.3](https://github.com/mootools/mootools-core/wiki/Update-from-1.2-to-1.3)

如果你熟悉 js，我非常推荐阅读 Mark Obcena 写的一本书 - Pro Javascript with MooTools，在 Amazon 上查找。它可能不适合绝对的初学者，但它写得非常好，并解释了幕后发生的事情。

# objective-c - 如何检查 UIManagedDocument 是否为空

> ID：11803202
> 
> 赞同：0
> 
> 时间：2012-08-03T20:57:27.513
> 
> 标签：objective-c, ios

打开 UIManagedDocument 实例时（文档状态正常？），如何检查 UIManagedDocument 是否为空？这里的“空”是指文档中根本没有实体。

或者我可以在它仍然关闭时检查空虚吗？

```
if (self.photoDatabase.documentState == UIDocumentStateClosed) 
{ 
    [self.photoDatabase openWithCompletionHandler:^(BOOL success) {}];
    [self setupFetchedResultsController];  

    if ( // check if document is empty  )
        {  
            [self fetchFlickrDatatoDocument:self.photoDatabase]; 
        }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T21:43:17.877

这里有几个答案...

首先，当您创建文档时，文档肯定是空的。您可以只查询文件系统以查看文件是否存在。

如果它仍然是空的，你为什么首先创建它？

如果您有打开空数据库文件的习惯，那么您可以通过多种方式判断它是否为“空”，具体取决于“空”的含义。

执行 fetch 以获取记录数。如果返回 0，则数据库为空。

为保存有关数据库的元数据的“特殊”实体执行提取。如果不存在，则数据库为空。

**编辑**

要检查是否没有实体，只需询问计数...

```
NSFetchRequest fetchRequest = [NSFetchRequest fetchRequestWithEntityName:@"MyEntity"];
NSError *error = nil;
NSUInteger count = [managedObjectContext countForFetchRequest:fetchRequest error:&error];
if (count == NSNotFound) {
    // Handle error
} else if (count == 0) {
    // The document is empty, i.e., has no entities of this type
} else {
    // The document contains <count> entities.
} 
```

或者，您可以只获取一个实体...

```
NSFetchRequest fetchRequest = [NSFetchRequest fetchRequestWithEntityName:@"MyEntity"];
fetchRequest.fetchLimit = 1;
NSError *error = nil;
NSArray *objects = [managedObjectContext executeFetchRequest:fetchRequest error:&error];
if (objects == nil) {
    // Handle error
} else if (objects.count == 0) {
    // The document is empty, i.e., has no entities of this type
} else {
    // The document contains at least one entity.
} 
```

**编辑**

对不起，菲利普，但最后的评论对我来说没有意义。假设它有任何实体类型，如何要求数据库告诉我它有多少项目。

这就像孩子的纸牌游戏：

我：哟，数据库，你有四肢吗？CoreData：去钓鱼。

现在，我对您的评论的最佳猜测是您将数据库模型与数据库记录混淆了。

当你创建数据库时，你给了它一个模型。您是使用 GUI 还是在代码中创建模型？无论哪种方式，您已经告诉数据库它将包含的实体类型以及它们之间的关系。

当您最初创建数据库时，它已经知道所有实体（这就是托管对象模型的全部内容）。核心数据托管对象上下文需要一个持久存储，它需要一个托管对象模型。

因此，当核心数据堆栈完全实例化时，它就拥有了关于数据库中将包含哪些类型的实体所需的所有知识。

# python - PyQt 应用程序挂起的可能原因？

> ID：11803209
> 
> 赞同：0
> 
> 时间：2012-08-03T20:58:03.407
> 
> 标签：python, multithreading, pyqt, freeze

我有一个挂起的 PyQt 应用程序。

Qt 4.7.4（64 位） Python 2.6.1 GCC 4.2.1 OSX 10.6.8

挂起的位置不同。如果我禁用/重写一个挂起位置，那么挂起不久就会发生在其他地方。

该应用程序执行可能返回数千个自定义数据对象的搜索，每个对象可能包含五十个子对象。

日志显示挂起往往发生在创建这些自定义对象的循环中。

还

该应用程序使用线程，但是即使我禁用这些线程也会发生挂起。（我正在使用[Laszlo Nagy 的堆栈跟踪工具](http://code.activestate.com/recipes/577334-how-to-debug-deadlocked-multi-threaded-programs/)来验证这一点。即使只有主线程和堆栈跟踪线程正在运行，也会发生挂起。）

应用程序读取并创建图像文件。I/O 锁似乎不太可能是罪魁祸首，但我还没有排除它。

我想知道

我可以创建的 python 对象的数量是否有限制？

我可能会达到其他限制吗？

我没有为垃圾收集做任何明确的对象删除。我是不是该？

还有其他常见的嫌疑人吗？

编辑（8/13）：

*   QTimer.singleShot 是一个很好的了解和热门线索——但是这个应用程序不使用singleShot。

*   当应用程序挂起时，它会占用 100% 的 CPU（以及大约 140 MB 的内存。）

*   我会尽快尝试 strace 看看它会显示什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T00:08:20.910

我尝试了 dtruss（大致相当于 OSX 上的 strace），但没有从结果中获得太多帮助。

最后，我采纳了一位同事的建议，将我的源代码回滚到最后一个已知的非挂起状态。然后我逐类重新引入更改。

罪魁祸首是**一个继承自两个不同 QWidget 类的类**，例如：

```
class undoableWidget(QWidget) :
...

class tearableWidget(QTabWidget) :
...

class culpritWidget(undoableWidget, tearableWidget):

    def __init__(self, parentWidget, tabName):

        undoableWidget.__init__(self, parentWidget)
        tearableWidget.__init__(self, parentWidget, tabName) 
```

我很惊讶该应用程序完全有效。

进一步调查显示 undoableWidget 首先不需要从 QWidget 继承。

应用程序不再挂起，我松了一口气。

谢谢你的建议。你帮助改善了我的调试习惯。

# java - .listFiles() 可以在不同的系统上以不同的顺序返回文件

> ID：11803211
> 
> 赞同：3
> 
> 时间：2012-08-03T20:58:06.977
> 
> 标签：java

作为处理的结果，一些数据文件被写入磁盘。

*   2 个服务器（MAC 和 Linux）之间的文件计数匹配
*   系统之间的文件名相同
*   系统之间的文件内容相同，由 md5sum 衡量

然后根据从所述文件中读取的内容计算报告，使用

```
 for (File f : contentDirectory.listFiles()) {
               // magic 
```

`.listFiles()`javadoc 说：

> 无法保证结果数组中的名称字符串会以任何特定顺序出现；特别是，它们不能保证按字母顺序出现。

虽然这是真的，但我想知道......列出文件的顺序不是随机的，对吧？我的意思是，列出相同的文件 2 次会产生相同的结果，这是正确的吗？

这是否意味着当文件在 2 个不同的系统上列出时，顺序可能不一样？

**最终更大的问题是，如何以相同的顺序列出目录中的文件，而不管 OS 文件是否存储在其中？**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-03T21:02:04.793

他们不对订单提供任何保证。所以不要依赖它。即使您可以验证它今天可以工作，它明天也可能无法工作。或者在超过 4K 文件的列表中。或者您不知道的其他一些随机标准。

如果你想订购，那很容易。在迭代列表之前对列表进行排序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T21:02:38.590

我希望订单取决于本地 JVM 和/或本地文件系统的实现细节。最有可能的是，这些文件的列出顺序与该文件夹的文件系统目录的顺序相同，这可能取决于文件添加到文件夹的顺序或其他此类详细信息。

如果您的程序依赖于按特定顺序排列的文件，最好的办法是获取文件名列表，按您喜欢的方式对它们进行排序，然后打开文件。这样，您就不会依赖于本地实施细节。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-03T21:07:26.583

只需对文件进行排序。`File`具有可比性，因此我们甚至不需要比较器：

```
File[] files = File.listRoots()[0].listFiles();
Arrays.sort(files);
System.out.println(Arrays.asList(files)); 
```

（这个例子只是从第一个根目录中获取文件，每台计算机上都应该有一些内容；））

*选择*

文件对象应该是唯一的，因此我们可以创建一个树集：

```
for (File file : new TreeSet<File>(Arrays.asList(contentDirectory.listFiles()))) {
    System.out.println(file.getName());  // replace with magic ;)
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-03T21:06:43.323

```
public class File  implements Serializable, Comparable<File> 
```

`java.util.Collections.sort()`因此，如果您将文件转储到列表中，它将很好地工作。

阅读 Java 7 的发行说明，您会看到许多“不保证”更改的情况，以及“非公共”api 被删除或更改的其他地方。如果医生说你不能依赖它，你就不能依赖它。它可能会在任何主要或次要版本中发生变化。

# mysql - 如何在 Iron python 上安装和使用 sqlobject+mysql？

> ID：11803214
> 
> 赞同：7
> 
> 时间：2012-08-03T20:58:11.213
> 
> 标签：mysql, ironpython, sqlobject

是否可以使用[sqlobject](http://sqlobject.org/)从 Iron python 连接到 mysql 数据库？如果是这样，怎么做？我必须安装什么？

我为 cpython 安装了 sqlobject，它工作正常，但是如果我在 ironpython 中使用相同的包，我会得到“ImportError：没有名为 _mysql 的模块”。我理解这意味着 Ironpython 无法加载访问 mysql API 所需的基于 C 的 .dll。解决方法是什么，或者有什么解决方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-23T22:14:36.797

查看源代码sqlobject是纯python，代码依赖于仅限cpython的MySQLdb。

但是，如果您修改代码以使用用纯 python 编写的 mysql.connector ( [http://dev.mysql.com/doc/connector-python/en/index.html](http://dev.mysql.com/doc/connector-python/en/index.html) ) 库，您应该能够建立与mysql

注意：mysql.connector 不遵循与 MySQLdb 相同的 api，并且需要对[源代码进行大量重写](http://svn.colorstudy.com/SQLObject/trunk/sqlobject/mysql/mysqlconnection.py)

我相信这可能是您最好的解决方法

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-24T04:52:55.993

您必须在 python 中安装“_mysql”模块。我不知道您使用的是哪个版本的python。

以下是为 python 2.x 或 python 3.x 安装“_mysql”模块的一些链接

[http://www.lfd.uci.edu/~gohlke/pythonlibs/#mysql-python](http://www.lfd.uci.edu/~gohlke/pythonlibs/#mysql-python)

[http://www.technicalbard.com/files/MySQL-python-1.2.2.win32-py2.6.exe](http://www.technicalbard.com/files/MySQL-python-1.2.2.win32-py2.6.exe)

[http://www.codegood.com/archives/129](http://www.codegood.com/archives/129)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-30T00:06:04.377

如果你看到这个，很可能你在安装 MySQLdb 时做错了；重新阅读（或阅读）自述文件。_mysql 是与 MySQL 客户端库接口的低级 C 模块。

过去各种版本的 MySQLdb 在“奇怪”平台上都存在构建问题；在这种情况下，“奇怪”意味着“不是 Linux”，尽管通常在 Unix/POSIX 平台上没有问题，包括 BSD 和 Mac OS X。Windows 的问题更大，部分原因是 Windows 安装中没有 mysql_config 可用MySQL的。1.2.1 解决了大部分（如果不是全部）这些问题，但您仍然需要编辑配置文件，以便安装程序知道在哪里可以找到 MySQL 以及要包含哪些库。

```
ImportError: libmysqlclient_r.so.14: cannot open shared object file: No such file or directory 
```

.so 后面的数字可能会有所不同，但这意味着您有一个 MySQLdb 版本针对一个版本的 MySQL 编译，现在正尝试针对不同的版本运行它。共享库版本往往会在主要版本之间发生变化。

解决方法：重建MySQLdb，或者获取匹配版本的MySQL。

可能导致此问题的另一件事：MySQL 库可能不在您的系统路径上。

解决方案：

```
set the LD_LIBRARY_PATH environment variable so that it includes the path to the MySQL libraries.

set static=True in site.cfg for static linking

reconfigure your system so that the MySQL libraries are on the default loader path. In Linux, you edit /etc/ld.so.conf and run ldconfig. For Solaris, see Linker and Libraries Guide.

ImportError: ld.so.1: python: fatal: libmtmalloc.so.1: DF_1_NOOPEN tagged object may not be dlopen()'ed 
```

这是来自 Solaris 的一个奇怪的问题。这是什么意思？我不知道。但是，如果 Python 和 MySQL 之间存在某种编译器或环境不匹配，则可能会发生这种情况。例如，在某些商业系统上，您可能使用自己的编译器编译了一些代码，而使用 GCC 编译了其他东西。它们并不总是啮合在一起。遇到这种情况的一种方法是从不同的供应商处获取二进制包。

解决方案：从源代码重建 Python 或 MySQL（或两者）。

```
ImportError: dlopen(./_mysql.so, 2): Symbol not found: _sprintf$LDBLStub Referenced from: ./_mysql.so Expected in: dynamic lookup 
```

这是来自 Mac OS X 的一个。似乎是编译器不匹配，但这次是在两个不同版本的 GCC 之间。似乎 GCC 的每个主要版本都在某些方面更改了 ABI，因此链接使用 GCC-3.3 和 GCC-4.0 编译的代码可能会出现问题。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-30T00:20:18.290

[http://mysql-python.sourceforge.net/FAQ.html](http://mysql-python.sourceforge.net/FAQ.html)

[http://dakrauth.com/blog/entry/python-and-django-setup-mac-os-x-leopard/](http://dakrauth.com/blog/entry/python-and-django-setup-mac-os-x-leopard/)

[获取“加载 MySQLdb 模块时出错：没有名为 MySQLdb 的模块” - 尝试过以前发布的解决方案](https://stackoverflow.com/questions/2952187/getting-error-loading-mysqldb-module-no-module-named-mysqldb-have-tried-pre)

# javascript - 如何使用 jQuery $.getScript() 方法包含多个 js 文件

> ID：11803215
> 
> 赞同：139
> 
> 时间：2012-08-03T20:58:13.630
> 
> 标签：javascript, jquery, html, promise

我正在尝试将 javascript 文件动态包含到我的 js 文件中。我对此进行了一些研究，发现 jQuery $.getScript() 方法将是一种理想的方式。

```
// jQuery
$.getScript('/path/to/imported/script.js', function()
{
    // script is now loaded and executed.
    // put your dependent JS here.
    // what if the JS code is dependent on multiple JS files? 
}); 
```

但我想知道这种方法是否可以一次加载多个脚本？为什么我问这个是因为有时我的 javascript 文件依赖于多个 js 文件。

先感谢您。

* * *

## 回答 #1

> 赞同：332
> 
> 时间：2012-08-03T21:18:14.873

### 答案是

您可以使用 Promise`getScript()`并等待所有脚本加载完毕，例如：

```
$.when(
    $.getScript( "/mypath/myscript1.js" ),
    $.getScript( "/mypath/myscript2.js" ),
    $.getScript( "/mypath/myscript3.js" ),
    $.Deferred(function( deferred ){
        $( deferred.resolve );
    })
).done(function(){

    //place your code here, the scripts are all loaded

}); 
```

[**小提琴**](http://jsfiddle.net/9whzy/)

[**另一个小提琴**](http://jsfiddle.net/9whzy/1/)</p>

在上面的代码中，添加一个 Deferred 并在里面解析它`$()`就像在一个 jQuery 调用中放置任何其他函数一样`$(func)`，它与

```
$(function() { func(); }); 
```

即它等待DOM 准备好，因此在上面的示例中`$.when`等待所有脚本被加载**并且**DOM 准备好，因为`$.Deferred`调用在DOM 就绪回调中解析。

* * *

### 对于更通用的使用，一个方便的功能

可以像这样创建一个接受任何脚本数组的实用程序函数：

```
$.getMultiScripts = function(arr, path) {
    var _arr = $.map(arr, function(scr) {
        return $.getScript( (path||"") + scr );
    });

    _arr.push($.Deferred(function( deferred ){
        $( deferred.resolve );
    }));

    return $.when.apply($, _arr);
} 
```

可以这样使用

```
var script_arr = [
    'myscript1.js', 
    'myscript2.js', 
    'myscript3.js'
];

$.getMultiScripts(script_arr, '/mypath/').done(function() {
    // all scripts loaded
}); 
```

其中路径将被添加到所有脚本，并且也是可选的，这意味着如果数组包含完整的 URL 也可以这样做，并且将路径全部省略

```
$.getMultiScripts(script_arr).done(function() { ... 
```

* * *

### 参数、错误等

顺便说一句，请注意`done`回调将包含许多与传入脚本匹配的参数，每个参数代表一个包含响应的数组

```
$.getMultiScripts(script_arr).done(function(response1, response2, response3) { ... 
```

其中每个数组将包含类似`[content_of_file_loaded, status, xhr_object]`. 我们通常不需要访问这些参数，因为无论如何脚本都会自动加载，并且大多数时候`done`回调是我们真正想要知道所有脚本都已加载的全部，我只是为了完整性添加它，并且在极少数情况下需要访问加载文件中的实际文本，或者需要访问每个 XHR 对象或类似的东西。

此外，如果任何脚本加载失败，将调用失败处理程序，并且不会加载后续脚本

```
$.getMultiScripts(script_arr).done(function() {
     // all done
}).fail(function(error) {
     // one or more scripts failed to load
}).always(function() {
     // always called, both on success and error
}); 
```

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2014-04-14T11:08:34.743

I implemented a simple function to load multiple scripts in parallel:

## Function

```
function getScripts(scripts, callback) {
    var progress = 0;
    scripts.forEach(function(script) { 
        $.getScript(script, function () {
            if (++progress == scripts.length) callback();
        }); 
    });
} 
```

## Usage

```
getScripts(["script1.js", "script2.js"], function () {
    // do something...
}); 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2013-05-20T19:38:18.970

在前一个的回调中加载后续所需的脚本，例如：

```
$.getScript('scripta.js', function()
{
   $.getScript('scriptb.js', function()
   {
       // run script that depends on scripta.js and scriptb.js
   });
}); 
```

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2015-10-23T23:03:20.763

有时需要按特定顺序加载脚本。例如 jQuery 必须在 jQuery UI 之前加载。此页面上的大多数示例并行（异步）加载脚本，这意味着无法保证执行顺序。如果没有排序，如果两者都成功加载但顺序错误，则`y`依赖的脚本可能会中断。`x`

我提出了一种混合方法，它允许顺序加载依赖脚本+可选的并行加载+[延迟对象](https://api.jquery.com/category/deferred-object/)：

```
/*
 * loads scripts one-by-one using recursion
 * returns jQuery.Deferred
 */
function loadScripts(scripts) {
  var deferred = jQuery.Deferred();

  function loadScript(i) {
    if (i < scripts.length) {
      jQuery.ajax({
        url: scripts[i],
        dataType: "script",
        cache: true,
        success: function() {
          loadScript(i + 1);
        }
      });
    } else {
      deferred.resolve();
    }
  }
  loadScript(0);

  return deferred;
}

/*
 * example using serial and parallel download together
 */

// queue #1 - jquery ui and jquery ui i18n files
var d1 = loadScripts([
  "https://ajax.googleapis.com/ajax/libs/jqueryui/1.11.1/jquery-ui.min.js",
  "https://ajax.googleapis.com/ajax/libs/jqueryui/1.11.1/i18n/jquery-ui-i18n.min.js"
]).done(function() {
  jQuery("#datepicker1").datepicker(jQuery.datepicker.regional.fr);
});

// queue #2 - jquery cycle2 plugin and tile effect plugin
var d2 = loadScripts([
  "https://cdn.rawgit.com/malsup/cycle2/2.1.6/build/jquery.cycle2.min.js",
  "https://cdn.rawgit.com/malsup/cycle2/2.1.6/build/plugin/jquery.cycle2.tile.min.js"

]).done(function() {
  jQuery("#slideshow1").cycle({
    fx: "tileBlind",
    log: false
  });
});

// trigger a callback when all queues are complete
jQuery.when(d1, d2).done(function() {
  console.log("All scripts loaded");
});
```

```
@import url("https://ajax.googleapis.com/ajax/libs/jqueryui/1.11.4/themes/blitzer/jquery-ui.min.css");

#slideshow1 {
  position: relative;
  z-index: 1;
}
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>

<p><input id="datepicker1"></p>

<div id="slideshow1">
  <img src="https://dummyimage.com/300x100/FC0/000">
  <img src="https://dummyimage.com/300x100/0CF/000">
  <img src="https://dummyimage.com/300x100/CF0/000">
</div>
```

两个队列中的脚本将并行下载，但是，每个队列中的脚本将按顺序下载，确保有序执行。瀑布图：

[![脚本的瀑布图](../Images/2212b28fe0d8663f079144d41eae1f6e.png)](https://i.stack.imgur.com/TuGLp.png)

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-08-03T21:02:09.443

使用[yepnope.js](http://yepnopejs.com/)或[Modernizr](http://modernizr.com/)（其中包括 yepnope.js 作为`Modernizr.load`）。

**更新**

只是为了跟进，这与您当前使用 yepnope 的功能相当，显示了对多个脚本的依赖关系：

```
yepnope({
  load: ['script1.js', 'script2.js', 'script3.js'],
  complete: function () {
      // all the scripts have loaded, do whatever you want here
  }
}); 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2014-02-16T22:24:09.737

我遇到了多个脚本加载问题，其中一个问题是（至少在 Chrome 中）相同域的脚本热加载在被 Ajax 成功加载后实际上并没有运行，因为跨域工作得非常好！:(

原始问题的选定答案不能可靠地工作。

经过多次迭代，这里是我对 getScript(s) 的最终答案，并以特定严格的顺序异步加载多个脚本，每个脚本加载回调选项和完成时的整体回调，在 jQuery 2.1+ 和现代版本的 Chrome、Firefox 以及被抛弃的 Internet Explorer。

我的测试用例是为 THREE.JS webGL 渲染加载文件，然后在 THREE 全局可用时使用传递给 onComplete 的匿名函数调用的间隔检查启动渲染脚本。

**原型函数 ( getScripts )**

```
function getScripts( scripts, onScript, onComplete )
{
    this.async = true;
    this.cache = false;
    this.data = null;
    this.complete = function () { $.scriptHandler.loaded(); };
    this.scripts = scripts;
    this.onScript = onScript;
    this.onComplete = onComplete;
    this.total = scripts.length;
    this.progress = 0;
};

getScripts.prototype.fetch = function() {
    $.scriptHandler = this;
    var src = this.scripts[ this.progress ];
    console.log('%cFetching %s','color:#ffbc2e;', src);

    $.ajax({
        crossDomain:true,
        async:this.async,
        cache:this.cache,
        type:'GET',
        url: src,
        data:this.data,
        statusCode: {
            200: this.complete
        },
        dataType:'script'
    });
};

getScripts.prototype.loaded = function () {
    this.progress++;
    if( this.progress >= this.total ) {
        if(this.onComplete) this.onComplete();
    } else {
        this.fetch();
    };
    if(this.onScript) this.onScript();
}; 
```

**如何使用**

```
var scripts = new getScripts(
    ['script1.js','script2.js','script.js'],
    function() {
        /* Optional - Executed each time a script has loaded (Use for Progress updates?) */
    },
    function () {
        /* Optional - Executed when the entire list of scripts has been loaded */
    }
);
scripts.fetch(); 
```

该功能与我发现使用 Deferred （现在已弃用？），何时，Success & Complete 在我的试验中不是 100% 可靠的一样！

如果您愿意，您可能想要添加错误/失败处理行为。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2015-04-16T00:19:33.207

很好的答案，adeno。

我花了一点时间才弄清楚如何让你的答案更通用（这样我就可以加载一组代码定义的脚本）。当所有脚本都加载并执行时，回调被调用。这是我的解决方案：

```
 function loadMultipleScripts(scripts, callback){
        var array = [];

        scripts.forEach(function(script){
            array.push($.getScript( script ))
        });

        array.push($.Deferred(function( deferred ){
                    $( deferred.resolve );
                }));

        $.when.apply($, array).done(function(){
                if (callback){
                    callback();
                }
            });
    } 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2014-05-06T12:30:35.383

您可以`$.when`通过尝试以下功能来使用 - 方法：

```
function loadScripts(scripts) {
  scripts.forEach(function (item, i) {
    item = $.getScript(item);
  });
  return $.when.apply($, scripts);
} 
```

这个函数将像这样使用：

```
loadScripts(['path/to/script-a.js', 'path/to/script-b.js']).done(function (respA, respB) {
    // both scripts are loaded; do something funny
}); 
```

这是使用 Promises 的方式，并且开销最小。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2018-05-11T12:45:14.160

这是使用 Maciej Sawicki 的答案并`Promise`作为回调实现的答案：

```
function loadScripts(urls, path) {
    return new Promise(function(resolve) {
        urls.forEach(function(src, i) {

            let script = document.createElement('script');        
            script.type = 'text/javascript';
            script.src = (path || "") + src;
            script.async = false;

            // If last script, bind the callback event to resolve
            if(i == urls.length-1) {                    
                // Multiple binding for browser compatibility
                script.onreadystatechange = resolve;
                script.onload = resolve;
            }

            // Fire the loading
            document.body.appendChild(script);
        });
    });
} 
```

利用：

```
let JSDependencies = ["jquery.js",
                      "LibraryNeedingJquery.js",
                      "ParametersNeedingLibrary.js"];

loadScripts(JSDependencies,'JavaScript/').then(taskNeedingParameters); 
```

所有 Javascript 文件都会尽快下载并按给定顺序执行。然后`taskNeedingParameters`被调用。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2017-01-25T07:57:00.877

# 使用 async=false 附加脚本

这是一种不同但超级简单的方法。要加载多个脚本，您只需将它们附加到正文。

*   异步加载它们，因为这是浏览器优化页面加载的方式
*   按顺序执行脚本，因为这是浏览器解析 HTML 标签的方式
*   不需要回调，因为脚本是按顺序执行的。只需添加另一个脚本，它将在其他脚本之后执行

## 更多信息：[https ://www.html5rocks.com/en/tutorials/speed/script-loading/](https://www.html5rocks.com/en/tutorials/speed/script-loading/)

```
var scriptsToLoad = [
   "script1.js", 
   "script2.js",
   "script3.js",
]; 

scriptsToLoad.forEach(function(src) {
  var script = document.createElement('script');
  script.src = src;
  script.async = false;
  document.body.appendChild(script);
}); 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2015-03-25T08:44:37.303

此函数将确保在完全加载依赖文件后加载文件。您只需要按顺序提供文件，同时牢记对其他文件的依赖关系。

```
function loadFiles(files, fn) {
    if (!files.length) {
        files = [];
    }
    var head = document.head || document.getElementsByTagName('head')[0];

    function loadFile(index) {
        if (files.length > index) {
            var fileref = document.createElement('script');
            fileref.setAttribute("type", "text/javascript");
            fileref.setAttribute("src", files[index]);
            head.appendChild(fileref);
            index = index + 1;
            // Used to call a callback function
            fileref.onload = function () {
                loadFile(index);
            }
        } else if(fn){
            fn();
        }
    }
    loadFile(0);
} 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2012-08-03T21:04:23.177

您正在寻找的是兼容 AMD 的加载程序（如 require.js）。

[http://requirejs.org/](http://requirejs.org/)

[http://requirejs.org/docs/whyamd.html](http://requirejs.org/docs/whyamd.html)

如果你查一下，有很多很好的开源软件。基本上，这允许您定义一个代码模块，如果它依赖于其他代码模块，它将等到这些模块完成下载后再继续运行。这样，您可以异步加载 10 个模块，即使其中一个依赖于其他几个模块来运行，也应该没有问题。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2016-11-27T01:48:46.970

这对我有用：

```
function getScripts(scripts) {
    var prArr = [];
    scripts.forEach(function(script) { 
        (function(script){
            prArr .push(new Promise(function(resolve){
                $.getScript(script, function () {
                    resolve();
                });
            }));
        })(script);
    });
    return Promise.all(prArr, function(){
        return true;
    });
} 
```

并使用它：

```
var jsarr = ['script1.js','script2.js'];
getScripts(jsarr).then(function(){
...
}); 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2014-03-24T11:41:06.703

有一个插件可以扩展 jQuery 的 getScript 方法。允许异步和同步加载并使用 jQuery 的缓存机制。完全公开，我写了这个。如果您找到更好的方法，请随时贡献。

[https://github.com/hudsonfoo/jquery-getscripts](https://github.com/hudsonfoo/jquery-getscripts)

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2014-03-17T11:56:15.080

上述 Andrew Marc Newton 综合答案的较短版本。这个不检查状态码是否成功，您应该这样做以避免未定义的 UI 行为。

这是一个烦人的系统，我可以保证 jQuery 但没有其他包含，所以我想要一种足够短的技术，如果被迫进入外部脚本，就不会被移植到外部脚本中。（您可以通过将索引 0 传递给第一个“递归”调用来使其更短，但风格习惯的力量让我加了糖）。

我还将依赖项列表分配给模块名称，因此该块可以包含在您需要“module1”的任何地方，并且脚本和依赖初始化只会包含/运行一次（您可以登录`index`回调并查看单个排序一组 AJAX 请求正在运行）

```
if(typeof(__loaders) == 'undefined') __loaders = {};

if(typeof(__loaders.module1) == 'undefined')
{
    __loaders.module1 = false;

    var dependencies = [];

    dependencies.push('/scripts/loadmefirst.js');
    dependencies.push('/scripts/loadmenext.js');
    dependencies.push('/scripts/loadmelast.js');

    var getScriptChain  = function(chain, index)        
    {
        if(typeof(index) == 'undefined')
            index = 0;

        $.getScript(chain[index], 
            function()
            {
                if(index == chain.length - 1)
                {
                    __loaders.module1 = true;

                    /* !!!
                        Do your initialization of dependent stuff here 
                    !!! */
                }
                else 
                    getScriptChain(chain, index + 1);
            }
        );
    };

    getScriptChain(dependencies);       
} 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2014-08-15T15:01:30.090

一个一个地加载*n 个*脚本（例如，如果第二个文件需要第一个文件，则很有用）：

```
(function self(a,cb,i){
    i = i || 0; 
    cb = cb || function(){};    
    if(i==a.length)return cb();
    $.getScript(a[i++],self.bind(0,a,cb,i));                    
})(['list','of','script','urls'],function(){console.log('done')}); 
```

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2019-05-25T20:41:41.840

您可以尝试使用递归。这将一个接一个地同步下载它们，直到完成整个列表的下载。

```
var queue = ['url/links/go/here'];

ProcessScripts(function() { // All done do what ever you want

}, 0);

function ProcessScripts(cb, index) {
    getScript(queue[index], function() {
        index++;
        if (index === queue.length) { // Reached the end
            cb();
        } else {
            return ProcessScripts(cb, index);
        }
    });
}

function getScript(script, callback) {
    $.getScript(script, function() {
        callback();
    });
} 
```

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2016-06-15T13:15:27.903

基于上面@adeneo 的回答：结合加载 css 和 js 文件

**有什么改进建议吗？？**

```
// Usage
//$.getMultiResources(['script-1.js','style-1.css'], 'assets/somePath/')
//  .done(function () {})
//  .fail(function (error) {})
//  .always(function () {});

(function ($) {
  $.getMultiResources = function (arr, pathOptional, cache) {
    cache = (typeof cache === 'undefined') ? true : cache;
    var _arr = $.map(arr, function (src) {
      var srcpath = (pathOptional || '') + src;
      if (/.css$/i.test(srcpath)) {
        return $.ajax({
          type: 'GET',
          url: srcpath,
          dataType: 'text',
          cache: cache,
          success: function () {
            $('<link>', {
              rel: 'stylesheet',
              type: 'text/css',
              'href': srcpath
            }).appendTo('head');
          }
        });

      } else {
        return $.ajax({
          type: 'GET',
          url: srcpath,
          dataType: 'script',
          cache: cache
        });
      }
    });
    //
    _arr.push($.Deferred(function (deferred) {
      $(deferred.resolve);
    }));
    //
    return $.when.apply($, _arr);
  };
})(jQuery); 
```

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2020-11-05T15:21:34.773

我改进了@adeneo 脚本，因此它会按指定顺序加载所有脚本。它不进行链式加载，因此非常快，但如果您想要更快，请更改 50 毫秒的等待时间。

```
$.getMultiScripts = function(arr, path) {

    function executeInOrder(scr, code, resolve) {
        // if its the first script that should be executed
        if (scr == arr[0]) {
            arr.shift();
            eval(code);
            resolve();
            console.log('executed', scr);
        } else {
            // waiting
            setTimeout(function(){
                executeInOrder(scr, code, resolve);
            }, 50);
        }
    }

    var _arr = $.map(arr, function(scr) {

        return new Promise((resolve) => {
            jQuery.ajax({
                type: "GET",
                url: (path || '') + scr,
                dataType: "text",
                success: function(code) {
                    console.log('loaded  ', scr);
                    executeInOrder(scr, code, resolve);
                },
                cache: true
            });
        });

    });

    _arr.push($.Deferred(function( deferred ){
        $( deferred.resolve );
    }));

    return $.when.apply($, _arr);
} 
```

用法是一样的：

```
var script_arr = [
    'myscript1.js', 
    'myscript2.js', 
    'myscript3.js'
];

$.getMultiScripts(script_arr, '/mypath/').done(function() {
    // all scripts loaded
}); 
```

# sql-server-2008 - 许多连接，这里有一个表值函数

> ID：11803218
> 
> 赞同：0
> 
> 时间：2012-08-03T20:58:32.370
> 
> 标签：sql-server-2008, group-by, grouping

我有很多连接（旧学校数据库架构）和返回值的限制，例如 Name、BookCreditsAwarded、BookCreditsAppliedThisTime、BookCreditsAvailable、DonorTrip、DonorName、DonorCreditTotal、DonorCreditAppliedThisTrip

在 BookCreditsAppliedThisTime 等于 SUM(DonorCreditAppliedThisTrip) 的情况下，通过 Name_ID 和另一个链接表喜欢所有内容；捐助者之旅。

该报告带有一行，其中从 DonorTrip 到 DonorCreditAppliedThisTrip 的列为空，接下来的 X 行填充信息。

我将 Visual Studio 用于其显示额外 X 行的报告服务，但是在使用 SQL Server studio 时，它始终将这些额外行显示为空，因此很难确定是否有值！

最重要的是，我已经向它添加了一个表值函数，但是 group by 限制了我，因为如果不包括 group by 子句中的列，我就无法显示该值。所以我得到以下结果： MrX, 0, 4000, 0, 320 as NewGuestCredit, GuestName, null, null, null.. MrX, 0, 4000, 0, 320 as NewGuestCredit, GuestName2, null, null, null.. [ ...]

而不是：MrX, 0, 4000, 0, null, null, null, null, null.. [...]

任何想法？还是我太不清楚了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-02T21:31:12.523

我很幸运只需要一个 DISTINC 子句并正确地加入。

# javascript - 如何从 SQL API 代码迁移到 Google Fusion Table API v1

> ID：11803226
> 
> 赞同：0
> 
> 时间：2012-08-03T20:59:11.643
> 
> 标签：javascript, api, google-fusion-tables

我有一个使用最近已弃用的以前的 SQL API 构建的 javascript Web 地图应用程序代码。我还使用 JSON 来返回结果。现在我想迁移到新的融合表 API。我已经阅读了迁移指南，但这没有意义。我不知道具体要改变什么。我在一张地图上有两个表，所以 2 个 API 密钥和 2 个表密钥。放置它们后没有显示地图。我还打开了控制台中的 API。

```
var map;
var queryUrlHead = 'http://www.google.com/fusiontables/api/query?sql=';
var queryUrlTail = '&jsonCallback=?';

//url.push('&key=AIzaSyDbZCuKQMgxAMYUatCsohcJkVSXYKhrKAU');
//url.push('&key=AIzaSyBC6PHfBV6HogU1bGaC5edvM_EPvGpT56c');

var layer_1;
var layer_2;
//var tableid_1 = 3775630;
//var tableid_2 = 4313734;
var tableid_1 = 18nnNfr7P_eelXCCOsK-uOFnIWcR2ofIUGLUk4nk;
var tableid_2 = 1mm0HGszLM3_flfblLnddnmvmQr02W-RwEGQxl2w;

function initialize() {
var latlng = new google.maps.LatLng(33.7071,-111.3024);

map = new google.maps.Map(document.getElementById('map_canvas'), {
   center: latlng,
   zoom: 7,
   mapTypeId: google.maps.MapTypeId.TERRAIN,
   mapTypeControl: true,
   mapTypeControlOptions: {
   style: google.maps.MapTypeControlStyle.HORIZONTAL_BAR,
   position: google.maps.ControlPosition.TOP_LEFT
},
   scaleControl: true,
   scaleControlOptions: {
   position: google.maps.ControlPosition.BOTTOM_LEFT
},

});
....
....
....
var layer_1 = new google.maps.FusionTablesLayer(tableid_1);
....
....
var col_list = 'Name';

if(order_list && order_list !== 'Name') {
    query += " ORDER BY " + order_list;
}

var queryurl = encodeURI(queryUrlHead + qry + queryUrlTail);

$.ajax({
   type : "GET",
   url : queryurl,
   dataType : "jsonp",
   success : dataHandlerCallback,
   error : function() {
       alert("AJAX ERROR for " + queryurl);
   }
});
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T16:31:28.937

有几点不同：

*   不同的 URL ( `https://www.google.com/fusiontables/api/` vs `https://www.googleapis.com/fusiontables/v1`)
*   JSONP 与 JSON
*   返回的 JSON 对象的结构
*   API v1.0 需要在 URL 中附加一个 ApiKey
*   API v1.0 可能有一些错误需要解决（例如 NaN 与结果中的数字）

**SQL API 示例**

[https://www.google.com/fusiontables/api/query?sql=SELECT%20ETHUN,%20COUNT%28%29%20FROM%204579147%20GROUP%20BY%20ETHUN&alt=json-in-script&jsonCallback=onResponse](https://www.googleapis.com/fusiontables/v1/query?sql=SELECT%20ETHUN,%20COUNT%28%29%20%20FROM%201Nynh5pPrj1q8JqbalppAm-qzAsgKvL0ZRala7VI%20GROUP%20BY%20ETHUN)

返回此 JSON：

```
onResponse({
   "table":{"cols":["ETHUN","count()"],
   "rows":[
       ["1",3308],
       ["2",18702],
       ["-9",10768]

    ]}
}) 
```

**Google Fusion Table API v1.0 示例**

[https://www.googleapis.com/fusiontables/v1/query?sql=SELECT%20ETHUN%2C%20COUNT()%20%20FROM%201Nynh5pPrj1q8JqbalppAm-qzAsgKvL0ZRala7VI%20GROUP%20BY%20ETHUN&key=MyEncryptedAPIKey](https://www.googleapis.com/fusiontables/v1/query?sql=SELECT%20ETHUN,%20COUNT%28%29%20%20FROM%201Nynh5pPrj1q8JqbalppAm-qzAsgKvL0ZRala7VI%20GROUP%20BY%20ETHUN)

注意我没有在上面的查询中包含我的 API 密钥，假设公开发布它不是一个好主意。因此，上面的链接可能会返回密钥丢失的投诉。但是使用有效的 API 密钥查询它会返回以下 JSON：

返回此对象：

```
{
 "kind": "fusiontables#sqlresponse",
 "columns": [ "ETHUN",  "count()"  ],
 "rows": [
  [  NaN,  "3308" ],
  [  NaN, "18702" ],
  [  NaN, "10768" ]
 ]
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T21:13:20.750

queryUrlHead 需要是 'https://www.googleapis.com/fusiontables/v1/query?sql='

此外，您不需要在 queryUrlTail 中使用 json 回调，因为新 API 默认会返回 json。

# c++ - 生成一定长度的 powerset

> ID：11803227
> 
> 赞同：1
> 
> 时间：2012-08-03T20:59:15.207
> 
> 标签：c++, string, permutation

我正在使用位移来生成给定数字字符串的幂集。我怎样才能将它限制在一定的长度，比如 4，从而通过不找到不需要长度的子序列来提高执行时间。

例如：如果给定的数字字符串是`10292`，则只需要以下子序列：1029、102、109、029、0292 等（仅限数字 4、3、2、1）。

以下是我的代码：

```
scanf("%s", &str); //read numeric string
int n = strlen(str); //find size of string

// loop to find subsequences or powerset
for ( i = 1; i < ( 1 << n ); ++i ) {
    string subseq;
    for ( j = 0; j < n; ++j ) {
        if ( i & ( 1 << j ) ) {
            subseq+=str[j];
        }          
    }

    cout << subseq << endl; //print the subsequence
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T21:08:09.187

只需在 print 语句前面放置一个过滤器。

```
if (subseq.length() <= 4) cout<<subseq<<endl; 
```

# c++ - 使用 C++ 的 Stroustrup PPP 的伪随机数生成器，第 8 章，练习 8 和 9

> ID：11803231
> 
> 赞同：0
> 
> 时间：2012-08-03T20:59:37.830
> 
> 标签：c++

我正在尝试解决 B. Stoustrup 的书“编程——使用 C++ 的原理和实践”第 8 章中的练习 8 和 9。

练习 8 涉及编写一个名为的函数，该函数`randint()`在 range 中生成一个随机整数`[0;MAXINT]`。MAXINT 应该是什么？是否有可能存储在 int 中的数量更多？它是函数的参数吗？作者没有说明。给出的唯一提示是：“ *The Art of Programming* , Knuth, vol. 2”。那本书描述了一种称为[线性同余方法](http://en.wikipedia.org/wiki/Linear_congruential_method)的算法，它涉及 4 个参数（请参阅链接的 Wikipedia 文章）。

练习 9 涉及使用`randint(int a, int b)`练习 8 中的函数生成范围内的随机整数`[a;b]`。

现在我可以用 4 个参数编写一个实现线性同余方法的函数，但这不是作者想要的。我试图了解他想要什么，并想知道是否有人解决了这些练习。不幸的是，作者的网站上没有这些练习的解决方案。

感谢您的建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T21:12:43.997

标准 C++ 中没有称为`MAXINT`.

有一个宏`INT_MAX`，定义在`<climits>`（`<limits.h>`C）中；它扩展为一个常量表达式，其值为 type 的最大值`int`。`int`例如，如果是 32 位，`INT_MAX`则可能是`2147483647`.

要么`MAXINT`在本书的其他地方进行了描述（检查索引和/或练习前的几页），要么这是一个错误，Stroustrup 打算参考`INT_MAX`.

如果您找不到它`MAXINT`的定义位置，您可能只需替换`INT_MAX`.

# c# - 用户选择子项后 TreeView 自动选择父项

> ID：11803233
> 
> 赞同：2
> 
> 时间：2012-08-03T20:59:45.043
> 
> 标签：c#, wpf, textbox, treeview, selecteditemchanged

在我的窗口中，我有一个 TreeView 和 TextBox。假设 TextBox 用于编写自定义脚本，而 TreeView 是一种选择要插入的函数的方法；想想 Crystal Report 脚本编辑器。

我的目标是让用户单击 TreeView 的其中一个子项，然后该子项插入到 TextBox 中。子节点是一个函数签名，位于父节点下。然后用户可以导航到文本框，选择一个函数参数并将其替换为另一个函数签名。为此，我处理 TreeView 的 SelectedItemChanged 事件，设置 TextBox 的 SelectedText，然后尝试在文本更改后突出显示该文本。

TextBox 的 SelectedText 已正确交换。但是，文本没有被突出显示，滚动条也没有滚动到选定的文本。

**这是我为重现该行为而编写的测试项目中的 XAML：**

```
 <Window x:Class="SelectedTextWeirdness.MainWindow"
          xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
          xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" xmlns:System="clr-namespace:System;assembly=mscorlib"
          xmlns:SelectedTextWeirdness="clr-namespace:SelectedTextWeirdness" Title="MainWindow" Width="600" Height="600"
          x:Name="Me">
     <Grid>
        <Grid.RowDefinitions>
           <RowDefinition Height="Auto" />
           <RowDefinition Height="Auto" />
        </Grid.RowDefinitions>
        <TreeView Grid.Row="0" x:Name="treeView" ItemsSource="{Binding ElementName=Me, Path=TreeViewItems, Mode=TwoWay}" 
                  SelectedItemChanged="treeView_SelectedItemChanged" Margin="10">
           <TreeView.Resources>
              <HierarchicalDataTemplate DataType="{x:Type SelectedTextWeirdness:Parent}" ItemsSource="{Binding Children}">
                 <TextBlock Text="{Binding Name}" />
              </HierarchicalDataTemplate>
              <DataTemplate DataType="{x:Type SelectedTextWeirdness:Child}">
                 <TextBlock Text="{Binding Name}" />
              </DataTemplate>
           </TreeView.Resources>
        </TreeView>
        <TextBox Grid.Row="1" x:Name="scriptTextBox" Margin="10" Height="200" Width="Auto" FontFamily="Consolas, Courier New" 
                 HorizontalScrollBarVisibility="Visible" VerticalScrollBarVisibility="Auto"
                 MaxLines="9999" AcceptsReturn="True" AcceptsTab="True" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" 
                 Text="{Binding Path=Script, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                 />
     </Grid>
  </Window> 
```

**这是代码隐藏：**

```
 using System;
  using System.Collections.Generic;
  using System.Linq;
  using System.Text;
  using System.Windows;
  using System.Windows.Controls;
  using System.Windows.Data;
  using System.Windows.Documents;
  using System.Windows.Input;
  using System.Windows.Media;
  using System.Windows.Media.Imaging;
  using System.Windows.Navigation;
  using System.Windows.Shapes;

  namespace SelectedTextWeirdness
  {
     public class Child
     {
        public string Name
        {
           get;
           set;
        }
     }

     public class Parent
     {
        public string Name
        {
           get;
           set;
        }

        public List<Child> Children
        {
           get;
           set;
        }   
     }

     /// <summary>
     /// Interaction logic for MainWindow.xaml
     /// </summary>
     public partial class MainWindow : Window
     {
        public List<Parent> TreeViewItems
        {
           get;
           set;
        }

        public MainWindow()
        {
           BuildTreeViewItems();

           InitializeComponent();
        }

        private void BuildTreeViewItems()
        {
           TreeViewItems = new List<Parent>()
                              {
                                 new Parent()
                                    {
                                       Name = "Parent1",
                                       Children =
                                          new List<Child>()
                                             {
                                                new Child() {Name = "ReallyLongFunctionNameNumber1(ReallyLongLeft1, ReallyLongRight1)"},
                                                new Child() {Name = "ReallyLongFunctionNameNumber2(ReallyLongLeft2, ReallyLongRight2)"},
                                                new Child() {Name = "ReallyLongFunctionNameNumber3(ReallyLongLeft3, ReallyLongRight3)"},
                                                new Child() {Name = "ReallyLongFunctionNameNumber4(ReallyLongLeft4, ReallyLongRight4)"},
                                                new Child() {Name = "ReallyLongFunctionNameNumber5(ReallyLongLeft5, ReallyLongRight5)"}
                                             }
                                    },
                                 new Parent()
                                    {
                                       Name = "Parent2",
                                       Children =
                                          new List<Child>()
                                             {
                                                new Child() {Name = "ReallyLongFunctionNameNumber1(ReallyLongLeft1, ReallyLongRight1)"},
                                                new Child() {Name = "ReallyLongFunctionNameNumber2(ReallyLongLeft2, ReallyLongRight2)"},
                                                new Child() {Name = "ReallyLongFunctionNameNumber3(ReallyLongLeft3, ReallyLongRight3)"},
                                                new Child() {Name = "ReallyLongFunctionNameNumber4(ReallyLongLeft4, ReallyLongRight4)"},
                                                new Child() {Name = "ReallyLongFunctionNameNumber5(ReallyLongLeft5, ReallyLongRight5)"}
                                             }
                                    }
                              };
        }

        private void treeView_SelectedItemChanged(object sender, RoutedPropertyChangedEventArgs<object> e)
        {
           var tree = (TreeView)sender;
           var selectedItem = tree.SelectedItem as Child;
           if (selectedItem != null)
           {
              int selectionStart = scriptTextBox.SelectionStart;
              string selectedText = selectedItem.Name;
              scriptTextBox.SelectedText = selectedText;
              scriptTextBox.Focus();            
              scriptTextBox.Select(selectionStart, selectedText.Length);
           }
        }
     }
  } 
```

我尝试设置 SelectedItemChanged e.Handled = true。那没有用。我已经尝试处理 TextBox 的 LostFocus 并设置 e.Handled = true 并且没有奏效。这似乎只在我使用 HierarchicalDateTemplate 时发生。如果我将数据更改为仅一级，则此设置可以正常工作。

有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-04T12:27:18.130

核心问题是`Focus()`在事件处理程序中进行更改。通过在`BeginInvoke`.

就像是：

```
delegate void voidDelegate();

private void treeView_SelectedItemChanged(object sender, RoutedPropertyChangedEventArgs<object> e)
{
    var tree = (TreeView)sender;
    var selectedItem = tree.SelectedItem as Child;
    if (selectedItem != null)
    {
        int selectionStart = scriptTextBox.SelectionStart;
        string selectedText = selectedItem.Name;
        voidDelegate giveFocusDelegate = new  voidDelegate(giveFocus);  
        Dispatcher.BeginInvoke(giveFocusDelegate, new object[] { });
        scriptTextBox.SelectedText = selectedText;         
    }
}

private void giveFocus()
{
    scriptTextBox.Focus();
} 
```

应该让你离你的目标更近。

编辑：我们怎么知道这会起作用？

正如[文档`Dispatcher.BeginInvoke`](https://msdn.microsoft.com/en-gb/library/system.windows.threading.dispatcher.begininvoke(v=vs.110).aspx)所说：

> 操作被添加到指定 DispatcherPriority 的 Dispatcher 的事件队列中。

因此，无论您调用 beginInvoke 的任务的优先级如何，调用发生的最近时间是在当前操作的执行结束之后：beginInvoked 操作被“推送”到调度程序队列中的某处，该调度程序在单个线。

# function - 如何在 Opa 中使用模块？

> ID：11803234
> 
> 赞同：0
> 
> 时间：2012-08-03T21:00:02.640
> 
> 标签：function, module, call, opa

好的，这是一个非常基本的问题，但我无法弄清楚......从模块调用函数的正确方法是什么？我这样做的方式是：

主.opa：

```
function start(){
    Page.page();
}

Server.start(
    Server.http, 
    [
        {title: "Calculator", page: start}
    ]
); 
```

在另一个 page.opa 文件中，我有：

```
module Page {
    function page(){
         <p>Consider this as html block...</p>
    }
} 
```

现在，我得到的错误是 Page 变量未绑定（它根本不是变量！）。两个文件都在同一个位置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T23:41:59.693

你如何编译你的应用程序？以下命令应该很好用

```
opa page.opa main.opa 
```

然后将生成的 JavaScript 文件作为可执行文件运行

```
./main.js 
```

或者使用Opa编译器的“--”选项编译运行

```
opa page.opa main.opa -- 
```

# c++ - 简单的函数命名

> ID：11803236
> 
> 赞同：-3
> 
> 时间：2012-08-03T21:00:23.613
> 
> 标签：c++, coding-style, naming

我有一个在派生类中定义的带有**虚拟 init()**函数的类，以及初始化这个类并调用**init函数的***其他*函数。如何命名这个*其他*功能？

 ***我尝试了类似**doInit 的**东西，但它看起来像私有函数。**init**函数名称不能更改。

```
public:
bool myclass::this_other_function_init( params )
{
    systemInit(this);
    init();
    ...
    return true;
}
virtual init() = 0; 
```

[私有方法命名约定](https://stackoverflow.com/questions/383850/private-method-naming-convention)- 这个主题展示了如何命名私有方法，但现在我必须使用相反的名称公共方法。

**编辑：**你如何命名你的*初始化*函数？初始化，初始化，启动....等？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-04T10:35:48.983

使用一个可以解释功能的名称而不是功能的名称，当您在 1 年后查看此内容时，您就会理解。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T03:46:18.553

命名很重要。正确的名称很重要，但连贯性也很重要。创建您的命名约定样式并使用它。我建议你阅读[干净的代码](https://rads.stackoverflow.com/amzn/click/com/0132350882)。它很好地解释了如何命名你的类和许多其他东西来创建自我解释的代码。

关于你的具体问题，两个初始化很难理解作为我们类的用户，我不明白为什么我必须调用两个不同的初始化，因为一个必须足够，通常是。我建议你只在派生的虚拟成员中实现所有初始化代码。我建议您进行一些重构，或者更好地解释这些函数的作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T21:21:39.913

*您喜欢的*任何不冲突的函数名称都可以。*这不是你应该担心的事情。*

 ** * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-03T21:21:29.073

使您的**公共**功能最易读和易于理解。希望在您的情况下您甚至根本不需要它，因为您的构造函数应该执行“初始化”工作。

然后命名你的（希望）**受保护**的虚函数它的用途，如果可以的话，可能比 Init() 更具体。

您正在考虑 2 个可以具有可互换名称但用于不同目的的函数这一事实暗示您可能需要重新考虑类结构。****

# ios - 将 UIBarButtonItem 与图像或系统预设一起用于 SplitView/Popover 控件

> ID：11803237
> 
> 赞同：0
> 
> 时间：2012-08-03T21:00:25.083
> 
> 标签：ios, ipad, ios-simulator

我目前正在为 iPad 优化应用程序，并希望使用带有图像的 UIBarButtonItem 来呈现弹出框。如果我使用带有标题的按钮，我目前拥有的代码效果很好，但我更喜欢使用我自己的图像或 UIBarButtonSystemItem 提供的图像之一。如果我根本不设置按钮的标题，它根本不会出现。如果我设置标题和图像，我会在真实硬件上获得标题，但图像会显示在模拟器上。使用 UIBarButtonSystemItem，我得到了我想要的按钮，但它也出现在横向模式下（它不应该这样做，因为我对横向使用了拆分视图）。

使用 setImage、setTitle 的任意组合或将按钮初始化为系统预设均无效。当检测到旋转到横向时，我还尝试将系统预设的按钮设置为 nil，但它仍保留在屏幕上。我不确定如何从这里开始，但我真的很想避免在这个按钮上使用字符串，而且我很想知道为什么会这样。

这是代码：

```
#pragma mark Split view handling
-(void)splitViewController:(UISplitViewController *)svc 
    willHideViewController:(UIViewController *)aViewController 
         withBarButtonItem:(UIBarButtonItem *)barButtonItem 
      forPopoverController:(UIPopoverController *)pc
{
    //If this bar button item doesn't have a title, it won't appear at all.
    [barButtonItem setTitle:@"-"];
    //barButtonItem = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemOrganize target:[barButtonItem target] action:[barButtonItem action]];
    [barButtonItem setImage:[UIImage imageNamed:@"listing.png"]];

    //Take this bar button item and put it on the left side of our nav item
    [[self navigationItem] setLeftBarButtonItem:barButtonItem];
    self.popoverController = pc;
}

-(void)splitViewController:(UISplitViewController *)svc 
    willShowViewController:(UIViewController *)aViewController 
 invalidatingBarButtonItem:(UIBarButtonItem *)barButtonItem
{
    //Remove the bar button item from our navigation item.
    //We'll double check that it's the correct button, even though we know it is.
    if(barButtonItem == [[self navigationItem] leftBarButtonItem]){
        [[self navigationItem] setLeftBarButtonItem:nil];
    }
    self.popoverController = nil;
} 
```

* * *

更新：

我将此添加到我的 viewDidLoad 中：

```
customButtonItem = [[UIBarButtonItem alloc] initWithCustomView:[[UIImageView alloc] initWithImage:[UIImage imageNamed:@"listing.PNG"]]];
customButtonItem.style = UIBarButtonItemStyleBordered; 
```

并将 willHideViewController 更新为：

```
-(void)splitViewController:(UISplitViewController *)svc 
    willHideViewController:(UIViewController *)aViewController 
         withBarButtonItem:(UIBarButtonItem *)barButtonItem 
      forPopoverController:(UIPopoverController *)pc
{
    //If this bar button item doesn't have a title, it won't appear at all
    customButtonItem.target = barButtonItem.target;
    customButtonItem.action = barButtonItem.action;
    barButtonItem = customButtonItem;
    [barButtonItem setTitle:@""];

    //barButtonItem = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemOrganize target:[barButtonItem target] action:[barButtonItem action]];
    //[barButtonItem setImage:[UIImage imageNamed:@"listing.png"]];

    //Take this bar button item and put it on the left side of our nav item
    [[self navigationItem] setLeftBarButtonItem:barButtonItem];
    self.popoverController = pc;
} 
```

这导致图像在我想要的时间/位置显示，但按钮没有边框（尽管我将其设置为）并且不显示弹出框。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-03T23:33:43.900

编辑：我错过了这是 splitView 委托，而您正在从 iOS 接收 UIBarButtonItem。所以我建议你做的是尝试以下。

创建自己的 buttonItem，并从系统提供的目标和选择器中复制目标和选择器。像这样创建新的按钮项：

```
UIBarButtonItem *newBut = [[UIBarButtonItem alloc] initWithImage:image style:UIBarButtonItemStyleBordered target: barButtonItem.target action: barButtonItem.action];
[[self navigationItem] setLeftBarButtonItem:newBut]; 
```

# sql-server-2008 - 在 SQL Server 中查找超过一个值的记录

> ID：11803244
> 
> 赞同：0
> 
> 时间：2012-08-03T21:01:08.303
> 
> 标签：sql-server-2008

我正在尝试编写一个 sql 语句，它允许我按顺序检查 sql server 表中的每一行。如果字段的值相隔不止一个，我想返回该字段的值和大于 1 的字段。例如，我的字段如下所示：

**值域**

```
V100819493
V100819492
V100819491
V100819232 
```

在这种情况下，唯一大于 1 的值是：

```
V100819232
V100819491 
```

关于如何在 select 语句中执行此操作的任何想法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-03T21:28:22.313

如果您不进行基于字符的数学运算，这会变得容易一些；我假设此表中的每个值都由一个字母字符后跟数字组成。

```
/* Create sample data */

declare @table Table (ValueField varchar(40))

insert into @table (ValueField)
select 'V100819493'
UNION SELECT 'V100819492'
UNION SELECT 'V100819491'
UNION SELECT 'V100819232'

/* Join table against itself, using a 'staggered' join to join each record to the previous one. */

select * from 

(
    select 
        ValueField as High_Value, 
        CONVERT(BIGINT,SUBSTRING(valuefield, 2, 800)) as Numeric_Value,
        ROW_NUMBER()  over (order by Valuefield) as line 
    from @table 
) t1

left outer join 
(
    select 
        ValueField as Low_Value, 
        CONVERT(BIGINT,SUBSTRING(valuefield, 2, 800)) as Numeric_Value,
        ROW_NUMBER()  over (order by Valuefield) as line 

    from @table 
)t2 on t1.line -1 = t2.line 

where t1.Numeric_Value - t2.Numeric_Value <> 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T21:06:30.460

您不能直接在 select 语句中执行此操作。最好的办法是使用 ORDER BY 语句选择值，然后遍历它们。对照其前身检查每个值，并查看差异是否 > 1。

理论上，您可以通过编写一个函数将通过检查的每个值插入到辅助（可能是临时的）表中来在 SQL 中完成这一切，但如果可以，请在 C#、Visual Basic 中实现检查，您有什么明显的性能原因。

# linux - 在linux中回显路径有什么作用？

> ID：11803247
> 
> 赞同：2
> 
> 时间：2012-08-03T21:01:52.117
> 
> 标签：linux, bash, echo

我有一个带有以下 if 语句的 bash 脚本：

```
if [ "$(PATH)/$(FILE)" != "`echo $(PATH)/$(FILE)`" ]; then [code omitted] fi 
```

将文件路径与回显的相同文件路径进行比较的目的是什么？

bash 脚本嵌入在 Makefile 的规则中。因此，变量的符号不同于普通的 bash 脚本。例如，$(PATH) 将被 PATH 变量替换，该变量在 Makefile 中定义。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T21:22:49.677

看起来 Makefile 的作者期望`PATH`和/或`FILE`包含变量引用，例如

```
PATH='/$foo/bar' 
```

所以这`$PATH`不一定与 的展开相同`$(echo $PATH)`。

# javascript - scrollTop 在滚动之前返回顶部

> ID：11803248
> 
> 赞同：1
> 
> 时间：2012-08-03T21:01:53.257
> 
> 标签：javascript, jquery

我有一个将页面滚动到给定偏移量的功能。我正在使用视差效果，所以我的所有元素（和页面，或“幻灯片”）都根据滚动条的位置定位。

我的小问题是，当我单击指向另一张幻灯片的链接时，它会将页面滚动到所需的偏移量，但会触发绑定的事件。应该没问题，保持流畅的效果。但是有一个小故障，似乎该`scrollTop`函数在正确执行之前会回到顶部一毫秒。因此，每次我在滚动到正确位置之前单击链接时，似乎都会显示另一个页面一毫秒。

这是我的代码：

```
 for(var i=1;i<8;i++)
    {
        (function(slideNum) {
            var tempName = 'slide'+slideNum;
            //console.log(defaultPositions["slide"+i].top);
            $('a.slide'+i).bind('click', function() {
                $.scrollTo((defaultPositions[tempName].top/slidesScrollSpeed)+1+'px', 800);
            });
        })(i);
    } 
```

我知道在这段代码中可能很难找到问题，但我只能找到与此相关的所有内容。你知道出了什么问题吗？

谢谢！

PS:`scrollTo`是一个 jQuery 插件，但有相同的故障`scrollTop`...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-03T21:13:27.397

您需要阻止链接的默认操作。我假设你`href="#"`的链接上有类似的东西？将您的点击绑定更改为：

```
$('a.slide'+slideNum).bind('click', function(event) {
    event.preventDefault();
    $.scrollTo((defaultPositions[tempName].top/slidesScrollSpeed)+1+'px', 800);
}); 
```

编辑：我注意到你传入`i`as`slideNum`但随后使用`i`，所以我更改了我的代码以使用存储在中的传入值`slideNum`

# c# - 如何使用正则表达式 c# 仅替换文本中的确切单词

> ID：11803249
> 
> 赞同：1
> 
> 时间：2012-08-03T21:01:53.280
> 
> 标签：c#, winforms, visual-studio-2010

我目前正在使用此代码来替换完全匹配。但是，这不起作用，它还删除了单词出现的位置。

例子：

```
string pattern = "(?i)(flo)";
jobTitle = Regex.Replace("Florist of Vinyl Flowers of flo abc", pattern, string.Empty); 
```

这是制作字符串：

> 乙烯基花朵的理论家

这是错误的，它应该只从字符串中删除 flo，如果我使用：

```
string pattern = "(?i)\b(flo)\b"; 
```

它不匹配但是即使那里有一个完整的单词它也不会匹配，没有匹配/

更新 ：

完整的代码运行如下：

```
splitter = wordToremoveTitle.Split('|');
if (splitter.Length > 0)
 {

  for (int t = 0; t < splitter.Length ; t++)
  {
  String pattern = @"(?i)\b(" + splitter[t] + ")\b";
  jobTitle = Regex.Replace(jobTitle, pattern, string.Empty);
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T21:07:29.967

你是如此接近，正则表达式：`(?i)\bflo\b`

```
string pattern = @"(?i)\bflo\b";
jobTitle = Regex.Replace("Florist of Vinyl Flowers", pattern, string.Empty); 
```

如果这个词的意思是“花店”和“鲜花”而不是“弗洛”，请使用这个`(?i)\b[^ ]*flo[^ ]*\b`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T21:07:15.007

您需要弄清楚“单词”对您意味着什么，而不是使用正则表达式来定义它。

如果边界与“\b”类别不匹配（即@“[\s,.-$]+”“空白字符、字符串开头/结尾、标点符号”），您可能需要定义边界。如果需要，您可能需要使用 @\w+" - "单词字符" 类别在前缀之后包含单词的剩余部分。

参考[字符类](http://msdn.microsoft.com/en-us/library/20bw873z.aspx)。

示例 taht 应匹配以“flo”开头的单词：

```
 string pattern = @"(?i)\b(flo\w+)\b"; 
```

# jquery - 无法让网络服务识别我的参数

> ID：11803256
> 
> 赞同：0
> 
> 时间：2012-08-03T21:02:24.743
> 
> 标签：jquery, ajax, webmethod, pagemethods

看起来这应该很简单，但我无法调用我的 Web 服务调用。这是我的代码：

```
var data = '{"deviceId":"e9b3f993-7ca1-442b-a5c2-001ab86e1af4","opid":202,"remarks":"fefawef"}';

$.ajax({
    url: 'MyPage.aspx/MyMethod',
    data: data,
    type: 'GET',
    contentType: "application/json; charset=utf-8",
    dataType: "json", 
    success: function(response) {
        // Do stuff                                                      
    },
    error: function(xhr) {                          
        alert(xhr.responseText);
    }
}); // end $.ajax 
```

乍一看，您可能会问使用 POST 代替 GET 是否更合适。可能会，但我使用 GET 来避免讨厌的 Internet Explorer 12030 错误问题。

我的 Web 方法的签名如下所示：

```
[WebMethod]
[ScriptMethod(UseHttpGet = true)] 
public static string MyMethod(string deviceId, int opid, string remarks) 
```

最后，我看到的错误是`Invalid web service call, missing value for parameter: deviceId`. 我不明白问题可能是什么。 `deviceId`在传入的 JSON 字符串文字中明确表示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T21:08:09.517

这可能不是唯一的问题，但您的*数据*Javascript 无效。根据[JQuery docs](http://api.jquery.com/jQuery.ajax/)，这应该是查询字符串或 JSON 对象（不是 JSON 字符串）。尝试这个：

```
var data = { deviceId: "e9b3f993-7ca1-442b-a5c2-001ab86e1af4", 
    opid: 202, 
    remarks: "fefawef" 
}; 
```

**编辑**

这个怎么样：

```
var data = { d: '{"deviceId":"e9b3f993-7ca1-442b-a5c2-001ab86e1af4","opid":202,"remarks":"fefawef"}' }; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T21:04:23.730

由于您对参数使用了双引号，因此您应该使用单引号：

```
data = '{"deviceId":"e9b3f993-7ca1-442b-a5c2-001ab86e1af4","opid":202,"remarks":"fefawef"}' 
```

# qt - QToolButton autoRaise 不适用于 Mac OSX

> ID：11803260
> 
> 赞同：2
> 
> 时间：2012-08-03T21:02:39.993
> 
> 标签：qt

我已经设置了 QToolButton::autoRaise = true - 这适用于 Windows 但不适用于 Mac OSX 这将使平面按钮在鼠标悬停时看起来会升高...

我知道 Mac OSX 上的 QToolButton 存在限制。 [http://doc.qt.io/qt-5/qtoolbutton.html#autoRaise-prop](http://doc.qt.io/qt-5/qtoolbutton.html#autoRaise-prop)

有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T18:41:55.293

我找到了答案..您需要将这些添加到样式表中，以便 Mac OSX 工作和行为类似于 Windows：

```
QToolButton:checked
{
    background-color: rgb(175,175,175);
}

QToolButton
{
    background-color: transparent;
}

QToolButton:hover
{
        background-color: rgb(175,175,175);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T21:18:19.870

因为该属性依赖于样式，并且 MacStyle 使用在这种情况下忽略 autoRaise 属性的本机属性，所以您唯一的选择是使用样式表为按钮做所有事情：

```
button = QtGui.QPushButton("FOO")
button.setFlat(True)
button.setStyleSheet("""
    QPushButton {
         border: 2px solid #8f8f91;
         border-radius: 6px;
         background-color: #dadbde;
         min-width: 80px;
     }

    QPushButton:pressed {
        background-color: qlineargradient(
            x1: 0, y1: 0, x2: 0, y2: 1,
            stop: 0 #dadbde, stop: 1 #f6f7fa
        );
    }

    QPushButton:hover {
        border: 2px solid blue;
        border-radius: 6px;
    }
""") 
```

# apache - Automating Apache Virtual Hosts

> ID：11803263
> 
> 赞同：0
> 
> 时间：2012-08-03T21:03:09.790
> 
> 标签：apache, dns, virtualhost

I plan to implement a feature on my website where users can point their domain to sub domain provided by my service.

> Sub Domain provided to John by my service is **john.myservice.com**
> 
> John bought this domain **www.john.com** and wants to map it to **john.myservice.com**

I know this can be done with Virtual Hosts if I am using Apache server but what am I interested to know is if is there an easy way to achieve this without me writing PHP stuff to update **vhosts** file every time user register with my service?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T21:12:10.963

You could use wildcard/dynamic subdomains so you would just have one virtual host entry and it would work with any subdomain. Take a look at [http://joshduck.com/blog/2010/07/13/dynamically-define-subdomains-with-apache/](http://joshduck.com/blog/2010/07/13/dynamically-define-subdomains-with-apache/) to see how to set it up.

# .net - 向新手解释 Lambda 表达式语法的好资源？

> ID：11803264
> 
> 赞同：1
> 
> 时间：2012-08-03T21:03:10.553
> 
> 标签：.net, linq, lambda

对于 .NET 新手来说，Lambda 表达式似乎是一个常见的绊脚石。有没有人有很好的资源来向新手解释它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T21:13:56.720

lambda 只是一个匿名方法，如下所示：

```
delegate(string parm1, int parm2)
{
    // ...
} 
```

lambda 的第一部分用于方法参数。如果没有参数，或者有多个参数，则需要括号：

```
// no parameters
() => null

// one parameter
x => null

// multiple parameters
(x, y, z) => null 
```

对应于上述匿名方法的 lambda 表达式会写成：

```
(string parm1, int parm2) => ... 
```

根据 lambda 的使用方式，编译器实际上可以推断参数的类型和返回值，因此它们并不总是必需的。

lambda 的最后一部分用于方法体。

```
delegate(string parm1, int parm2)
{
    return string.Format("{0}{1}", parm1, parm2);
} 
```

是相同的

```
(parm1, parm2) =>
{
    return string.Format("{0}{1}", parm1, parm2);
} 
```

如果方法的主体是单行，则 lambda 不需要 return 关键字，也不需要花括号：

```
(parm1, parm2) => string.Format("{0}{1}", parm1, parm2); 
```

这些是基础。我希望这有帮助。

# javascript - EXT4.1 鼠标悬停在 GridPanel

> ID：11803277
> 
> 赞同：0
> 
> 时间：2012-08-03T21:04:28.230
> 
> 标签：javascript, extjs, mouseover, gridpanel

我正在尝试将鼠标悬停在网格中的所有项目上。我该怎么走。我对这些东西很陌生。如果有人能举例说明就好了:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T16:51:51.127

`itemmouseenter`您可以使用网格面板的配置在网格面板的事件上附加一个事件侦听器，`listeners`如下所示：

```
Ext.create('Ext.grid.Panel', {
    //... other grid configs
    listeners: {
        itemmouseenter: function(gridview, record) {
            console.log('Mouse over on record:');
            console.log(record);
        }
    }
}); 
```

您应该熟悉在 ExtJS API 中查找内容，以了解哪些 ExtJS 类具有您可以使用的配置、方法和事件。例如，`itemmouseenter`可以[**在**](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.grid.Panel-event-itemmouseenter)API 中找到该事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T22:47:41.193

看看这个文档。[http://docs.sencha.com/ext-js/4-1/#!/api/Ext.grid.Panel](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.grid.Panel) 在事件下，您有各种事件，例如 containermouseover 和 containermouseout，当您进入网格面板或离开网格面板时会触发这些事件。还有其他事件，如 itemmouseenter 和 itemmouseleave。检查此链接[Extjs 4 Grid hover effect](https://stackoverflow.com/questions/7107119/extjs-4-grid-hover-effect)。

# c# - 使用 c# 和 mono 关闭 linux

> ID：11803283
> 
> 赞同：4
> 
> 时间：2012-08-03T21:05:19.010
> 
> 标签：c#, soap, mono, shutdown

我正在使用 c#/soap 和 php 在 Windows 和 Linux 上开发一个跨平台项目。

这个想法是，当用户按下 Web 界面上的按钮时，它会发送一个肥皂请求，该请求将关闭服务器。

这在 Windows 上运行良好，但在 Linux 上无法正常运行，我看不出有任何原因，因为当我在服务器上手动运行关机命令时它运行良好。

下面是我正在使用的代码

```
public bool shutdownServer()
{
    Process process = new Process();
    if (CommonTasks.getOperatingSystem() == CommonTasks.OperatingSystemType.Windows)
    {
        process.StartInfo.FileName = "shutdown";
        process.StartInfo.Arguments = "-s -t 0";
    }
    else if (CommonTasks.getOperatingSystem() == CommonTasks.OperatingSystemType.Linux)
    {
        process.StartInfo.FileName = "shutdown";
        process.StartInfo.Arguments = "-h now";
    }
    else
    {
        return false;
    }
    library.logging(classDetails + MethodInfo.GetCurrentMethod().Name, string.Format("Shutting down with the following {0} {1}", process.StartInfo.FileName, process.StartInfo.Arguments));
    process.Start();
    return true;
} 
```

我看不出 linux 部分不会执行关机但 windows 版本工作正常的任何原因。我究竟做错了什么。

为了清楚起见，我试图关闭整个服务器，而不是应用程序。

感谢您的任何帮助，您可以提供

**更新 ** 感谢您的建议，我想我到了某个地方。我发现单声道正在使用 janis 方法在 wwwrun 下运行。

我已经将 wwwrun:www 组添加到 /etc/groups 中`wwwrun:x:0`，我不确定这是否正确，我不知道 :x:0 的用途。

我已添加`%wheel ALL = (ALL) NOPASSWD: /sbin/shutdown`到 sudoers 文件并重新启动 apache。

当我运行soap服务执行关机时，出现以下错误`/var/log/messages`

> 8 月 3 日 23:28:01 开发服务器 sudo：pam_unix2(sudo:auth)：对话失败 8 月 3 日 23:20:27 开发服务器 sudo：wwwrun：pam_authenticate：对话错误；TTY=未知；密码=/ ; 用户=根；COMMAND=/sbin/shutdown -h now

我现在不知道从哪里开始，对不起，如果我问了一个菜鸟问题，我对soap/linux/mono还很陌生。

**更新 2** 刚刚发现了其他东西，只有当浏览器在正在关闭的本地 PC 上运行时，它才能在 Windows 上运行。我已经尝试重定向命令的输出以查看它是否返回错误并且什么都没有，所以我无法找出它失败的原因。

**更新 3** 我刚刚发现了别的东西，我有两台 Windows PC、笔记本电脑和台式机，都是 Windows 7 x64，从桌面浏览器我可以执行肥皂请求来关闭笔记本电脑，反之亦然，但是，我遇到的问题与 Windows Server 和 Linux 一起使用，即使是本地的 Windows 服务器浏览器也不会让我通过肥皂请求自行关闭。有没有一种方法可以让 Windows 服务器允许我通过肥皂请求、本地和远程浏览器进行关机，以及如何解决 Linux 的问题。

**更新 4** 刚刚修复了 Windows 问题，我需要将 IIS 用户帐户添加为管理员以允许它执行关机，所以它只是 Linux 我现在有问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T21:22:26.590

我会更换

```
process.StartInfo.FileName = "shutdown";
process.StartInfo.Arguments = "-h now"; 
```

和

```
process.StartInfo.FileName = "/usr/bin/sudo";
process.StartInfo.Arguments = "/sbin/shutdown -h now"; 
```

并在 sudoers 文件中设置执行关闭脚本的帐户，并有权在没有密码的情况下执行 /sbin/shutdown。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-04T15:28:16.993

我已经解决了，但是您的所有建议确实有所帮助，尤其是@janisz 和@David Harris。

为了让 Windows 正常工作，我必须将 IIS 用户 (IUSR) 添加到 Windows Server 2008 的管理员组中。

对于 linux，我需要像@janisz 所说的那样以 sudoer 运行命令。为此，我需要运行命令 visudo 以添加编辑 sudoers 文件，然后将以下内容添加到 sudoers 文件中。

```
User_Alias APACHE = wwwrun  
Cmnd_Alias SHUTDOWN = /sbin/shutdown APACHE
APACHE ALL = (ALL) NOPASSWD: SHUTDOWN 
```

然后重新启动服务器。

在 Windows 上执行关机命令与以前没有任何不同，但在 Linux 上，正如@David Harris 指出的那样运行命令`/sbin/sudo`和争论`/sbin/shutdown -h now`

谢谢你的帮助。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-03T21:19:44.950

可能单声道用户没有关闭计算机的权限，因此有以下选项：

1.  将单用户添加到电源组（或任何其他可以关闭机器的组）`useradd -G power monouser`

2.  将单用户添加到 sudoers 文件，允许在没有密码的情况下运行关机命令。在关机前更改代码以调用 sudo。运行`visudo`并输入 `monouser ALL=NOPASSWD: /sbin/shutdown`

3.  更改单用户可以执行的文件权限

**编辑** 我刚刚意识到它`shutdown`不受保护，但在普通用户 $PATH 中没有条目，`/sbin/`因此添加完整路径关闭可能会有所帮助。所以`process.StartInfo.FileName = "shutdown";`改为`process.StartInfo.FileName = "/sbin/shutdown";`

# visual-studio-2010 - 通过 ActiveSync 从 Windows Mobile 设备中提取文件

> ID：11803291
> 
> 赞同：0
> 
> 时间：2012-08-03T21:05:53.720
> 
> 标签：visual-studio-2010, visual-c++, mobile, windows-mobile

我想知道如何通过 USB Sync 将文件从我的手持设备移动到某个 Windows 文件夹。ej。

从 \MyDevice\some.txt 复制到 C#、VB 或 C++ 中的 C:\Temp\some.txt。

我是这个设备的新手。有人可以帮我弄这个吗。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T21:20:05.190

我假设它是 Windows Mobile 设备；没有其他移动设备（目前）可以使用 Visual C++。

您无法从设备端执行此操作；允许移动设备干扰主机的文件系统将是一个巨大的安全风险。

在 Windows 端，您可以使用 RAPI 功能，`CeCopyFile()`或者`CeCreateFile()/CeReadFile()`当设备通过 ActiveSync 连接到 PC 时。您也可以通过 Core Connectivity API 拉取文件，但这要复杂得多；你必须使用 CoreCon 接口`ICcConnection`。

RAPI 标头和库随 Windows Mobile SDK 一起提供，几乎任何版本。

编辑：所以你需要从设备端。没有内置的 API。考虑 ActiveSync。它有一个用于自动将主机文件夹与设备文件夹同步的界面；如果设备上的文件发生更改，更改将自动拉取到 PC。如果您实现自定义项接口，您可以在发生更改时通知 ActiveSync。

这样想吧。在没有主机PC主动配合的情况下推送文件是不可能的；你必须意识到否则会有多大的灾难；任何拥有设备和 USB 电缆的人都可以通过插入设备来接管任意 PC。但是，如果您正在努力获得主机 PC 的合作，您不妨为 Windows 编写一个 RAPI 程序轮询设备上的某个文件夹并提取文件。

或者，您可以像 ctacke 建议的那样在主机 PC 上设置 FTP 服务器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T03:41:28.397

如果您需要从设备推送到 PC，则必须在 PC 上运行一个服务来接受请求和数据，例如 FTP 服务器。连接后，您将获得一个本地虚拟网络，解析“ppp_peer”将为您提供连接的 PC。那时，您可以推送到本地 Web 服务、FTP 或其他任何东西。但是，如果没有一些明确的服务，就无法将其直接传输到文件系统，因为这将是一个巨大的安全漏洞。

# objective-c - iOS 5 - 有没有办法在 UITextView 中禁用自动填充但保留拼写检查（红色下划线）？

> ID：11803292
> 
> 赞同：6
> 
> 时间：2012-08-03T21:05:54.727
> 
> 标签：objective-c, ios, ipad, autocorrect

似乎设置**autocorrectionType**会启用或禁用（1）您键入时的单词自动填充和（2）您拼错单词时的红色下划线。

在设置应用程序中，“自动更正”和“检查拼写”有单独的滑块。

我想知道是否有任何方法（可能通过解决方法）在 UITextView 中为拼写错误的单词加下划线，但不使用 Objective-C 以编程方式自动填充？

任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-03T21:12:56.613

还有一个“spellCheckingType”属性：

```
[textView setAutocorrectionType:UITextAutocorrectionTypeNo];
[textView setSpellCheckingType:UITextSpellCheckingTypeYes]; 
```

我试过了，它不会自动更正，但会留下红线和建议。

# javascript - 重新分配 window.orientation？

> ID：11803293
> 
> 赞同：1
> 
> 时间：2012-08-03T21:05:56.880
> 
> 标签：javascript, html, css, orientation

我正在使用页面内的 iframe，并且页面和 iframe 位于不同的域中。该站点适用于移动设备，因此我通过 html 发布消息将页面的 window.orientation 属性传递给 iframe。这是可行的，但现在我需要一种方法来将 iframe 的 window.orientation 属性分配给从发布消息接收到的值。是否可以重新分配诸如 .orientation 之类的窗口属性，如果可以，如何重新分配？

感谢所有帮助。

编辑：这样做的目的是让 css 媒体查询到设备的方向，以便在 iframe 中工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T21:07:13.920

也许这可以解决您的问题。

**JS**

```
var currentWidth = 0;

function updateLayout() {
    if (window.innerWidth != currentWidth) {
        currentWidth = window.innerWidth;

        var orient = currentWidth == 320 ? "profile" : "landscape";
        document.body.setAttribute("class", orient);
    }
}

setInterval(updateLayout, 400);
window.addEventListener("resize", updateLayout, false);
window.addEventListener("orientationchange", updateLayout, false);​ 
```

**CSS**

```
.profile{background:#f00}
.landscape{background:#00f}​ 
```

**[演示](http://jsfiddle.net/GQd3x/)**

# image-processing - 如何计算连续图像的距离

> ID：11803294
> 
> 赞同：1
> 
> 时间：2012-08-03T21:06:09.393
> 
> 标签：image-processing, distance

假设我在一个位置拍摄了一张图像，并且在将相机移动了固定距离后我拍摄了另一张照片。有没有办法确定使用这两张图像移动的距离。？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T21:32:11.663

并非不知道您正在查看的场景。画一些物体。现在将对象移动到离您两倍远的位置，并将其大小加倍。它看起来和你一模一样。如果您现在向左移动，对象将向右移动，但它看起来移动的距离取决于您将它移离您的距离。这种效果称为视差，如果您确切知道移动了多远，您就可以确定物体的相对深度。不幸的是，这也意味着如果不知道你所看到的东西的深度，你就无法知道你移动了多远。

如果您可以定义世界空间中某些点的位置，那么它就成为可能。

# objective-c - sortUsingSelector: 方法没有循环遍历我的数组中的所有元素

> ID：11803295
> 
> 赞同：0
> 
> 时间：2012-08-03T21:06:29.423
> 
> 标签：objective-c, arrays, nsmutablearray, sorting

当我`myArray`使用`[myArray sortArrayUsingSelector: @selector(comparison:)];` `fracC`不与比较进行排序时`fracA`，所以现在(1/2)按从最大值到最小值的顺序`fracA`放在(1/4) 之后。`fracC`有没有办法让所有元素正确地相互比较，如果我想添加更多值，它仍然可以工作？

**比较：**

```
-(NSComparisonResult) comparison:(Fraction *)myFrac {
    NSLog(@"self: %@", self);
    NSLog(@"argument: %@", myFrac);

    if ([self compare: myFrac] == 1) {
        NSLog(@"ascending");
        NSLog(@" ");
        return NSOrderedAscending;
    }
    else if ([self compare: myFrac] == -1) {
        NSLog(@"descending");
        NSLog(@" ");
        return NSOrderedDescending;
    }
    else {
        NSLog(@"same");
        NSLog(@" ");
        return NSOrderedSame;
    }
} 
```

**比较：输出**

```
2012-08-03 16:25:43.459 prog[1083:707] self: 1/3
2012-08-03 16:25:43.462 prog[1083:707] argument: 1/2
2012-08-03 16:25:43.463 prog[1083:707] descending
2012-08-03 16:25:43.463 prog[1083:707]  
2012-08-03 16:25:43.464 prog[1083:707] self: 1/3
2012-08-03 16:25:43.464 prog[1083:707] argument: 1/4
2012-08-03 16:25:43.465 prog[1083:707] ascending 
```

**主文件**

```
 Fraction *fracA = [[Fraction alloc] initWithValues:1 over:2];
        Fraction *fracB = [[Fraction alloc] initWithValues:1 over:3];
        Fraction *fracC = [[Fraction alloc] initWithValues:1 over:4];

        NSMutableArray *myArray = [NSMutableArray arrayWithObjects:fracB, fracA, fracC, nil];

        [myArray sortArrayUsingSelector: @selector(comparison:)];

        for (Fraction *myFrac in myArray) {
            NSLog(@"%@", myFrac);
        } 
```

**main.m 的输出**

```
2012-08-03 16:25:43.467 prog[1083:707] 1/3
2012-08-03 16:25:43.467 prog[1083:707] 1/2
2012-08-03 16:25:43.468 prog[1083:707] 1/4 
```

**比较：**

```
-(int) compare:(Fraction *)f {
    Fraction *selfTester = [[Fraction alloc] init];
    Fraction *fTester = [[Fraction alloc] init];

    selfTester.denominator = self.denominator * f.denominator;
    selfTester.numerator = f.denominator * self.numerator;

    fTester.denominator = self.denominator * f.denominator;
    fTester.numerator = f.numerator * self.denominator;

    if (selfTester.numerator < fTester.numerator)
        return -1;
    else if (selfTester.numerator == fTester.numerator)
        return 0;
    else
        return 1;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T21:33:28.183

`sortedArrayUsingSelector:`返回一个**新**的排序数组（您丢弃）。

您可能想要使用`sortUsingSelector:`which 对数组的元素进行适当的排序。

# ms-access - 如何在 Access 2007 中将报表放入表单

> ID：11803297
> 
> 赞同：2
> 
> 时间：2012-08-03T21:06:32.847
> 
> 标签：ms-access, ms-access-2007

在 Access 2007 中，如何将报表放入表单？换句话说，我有一个表格，我希望在其中可以看到一个报告。我以前做过，但我忘记了怎么做；当我用谷歌搜索它时，我也一无所获。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T02:59:30.550

据我所知，Access 2010 中提供了此功能和特性，而您在 a2007 中没有将报表嵌入到表单中的功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T22:36:05.220

我能够弄清楚这一点；虽然是的，不可能将报告放入表格中，但可以使表格模仿报告（这是我过去所做的）。当我说模仿报告时，我的意思是它的行为就像一个包括分页的报告。为此，我使用了表单向导，并以链接表为基础浏览了它；然后，我将表单的数据源更改为基于查询。最后，当然表单可以很容易地嵌入到表单中。

# neo4j - Neo4j 需要多少内存来存储关系？

> ID：11803301
> 
> 赞同：1
> 
> 时间：2012-08-03T21:06:46.263
> 
> 标签：neo4j

我有很多节点和关系要存储到 Neo4J。我有 300k 个节点和 10k 个不同的关系类型。因此，假设两个节点由 10k 个不同的关系链接，我将存储 30 亿个关系。

我想知道在 Neo4J 中有多少内存使用一个关系。该关系没有属性，其名称只是一个最多 6 位数字的数字。

任何的想法？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T11:18:53.590

查看[http://docs.neo4j.org/chunked/milestone/configuration-caches.html#_object_cache](http://docs.neo4j.org/chunked/milestone/configuration-caches.html#_object_cache)，更具体地说，在“堆内存使用”下

# algorithm - 2-3-4-树和红黑树有什么关系

> ID：11803305
> 
> 赞同：4
> 
> 时间：2012-08-03T21:06:57.837
> 
> 标签：algorithm

这两种类型的树如何等效？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-03T21:14:03.433

[维基百科](http://en.wikipedia.org/wiki/2-3-4_tree)对这个问题有这样的说法。

> 2-3-4 树是红黑树的等距，这意味着它们是等效的数据结构。换句话说，对于每棵2-3-4树，至少存在一棵数据元素顺序相同的红黑树。而且，对2-3-4树的插入和删除操作会导致节点扩展、分裂和合并，相当于红黑树中的颜色翻转和旋转。红黑树的介绍通常首先介绍 2-3-4 树，因为它们在概念上更简单。

如果您想要更具体的答案，欢迎您提出更具体的问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T21:13:48.613

您可以将 2-3-4 树转换为红黑树，方法是为 3 个子 1 引入一个红色节点，为 4 个子 1 引入 2 个红色节点。结果树将是二叉树。所以这样 2-3-4 树就相当于红黑树。

# c++ - 移动语义和常量引用

> ID：11803306
> 
> 赞同：7
> 
> 时间：2012-08-03T21:07:03.073
> 
> 标签：c++, c++11

我花了很多时间为我的班级实现移动语义，但现在我正在处理使用它的函数。

好的，所以我有这个对象，它在堆上有很多数据：`CLargeOb`为此我实现了移动语义（构造函数和运算符 =）。理想情况下是这样使用的：

```
void OtherOb::Func(CLargeOb&& largeOb1, CLargeOb&& largeOb2)
{
    SomeOtherFunc(largeOb1); // use objects
    SomeOtherFunc(largeOb2); 
    m_largeOb1 = (CLargeOb&&)largeOb1; // save as members and trash the originals
    m_largeOb2 = (CLargeOb&&)largeOb2;
} 
```

但是，并不总是允许移动/丢弃对象，所以我添加了这两个函数：

```
void OtherOb::Func(const CLargeOb& largeOb1, CLargeOb&& largeOb2)
{
    SomeOtherFunc(largeOb1);
    SomeOtherFunc(largeOb2); 
    m_largeOb1 = largeOb1;
    m_largeOb2 = (CLargeOb&&)largeOb2;
}

void OtherOb::Func(CLargeOb&& largeOb1, const CLargeOb& largeOb2)
{
    SomeOtherFunc(largeOb1);
    SomeOtherFunc(largeOb2); 
    m_largeOb1 = (CLargeOb&&)largeOb1;
    m_largeOb2 = largeOb2;
} 
```

尽管它有效，但您已经可以猜到，当我有一个将 3 个或更多这些对象作为参数的函数时，它会成为 *ss 的主要痛苦......没有使用模板解决这个问题的聪明方法吗？ “完美转发”？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-03T21:27:35.660

与 C++03 中的情况一样，指导原则是：**如果您想要一个副本，请将其放在参数列表中**。

这让调用者可以处理您如何获取对象，您只需获取一个对象即可：

```
void OtherOb::Func(CLargeOb largeOb1, CLargeOb largeOb2) 
{ 
    SomeOtherFunc(largeOb1); // use objects 
    SomeOtherFunc(largeOb2);  
    m_largeOb1 = std::move(largeOb1); // save as members and trash the originals 
    m_largeOb2 = std::move(largeOb2); // (you should use std::move, not cast)
} 
```

呼叫者，召集者：

```
OtherOb o;

CLargeOb x, y;
const CLargeOb z;

o.Func(x, std::move(y)); // need x for later, done with y so move it
o.Func(std::move(x), z); // done with x, necessarily copy z 
```

这与几个专门的重载一样有效。为什么？*因为那些已经作为构造函数存在于类中*。让编译器为您确定在调用点调用哪个，它已经知道要做什么。

# objective-c - 应用强制退出或崩溃时如何执行注销功能

> ID：11803307
> 
> 赞同：1
> 
> 时间：2012-08-03T21:07:08.557
> 
> 标签：objective-c, ios, web-applications

我想在应用强制退出或意外崩溃时执行注销功能。要执行此任务，我需要调用 Web 服务以从服务器端数据库中删除我的信息。但是当应用程序强制退出或崩溃时，我无法调用 Web 服务。所以请帮我解决这个问题。

> `applicationWillTerminate`

和

> applicationWillResignActive

委托方法对我不起作用！

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T21:24:58.603

应用程序可以通过多种方式退出难以（可能不可能）拦截并导致代码执行的地方。您最好让主机系统检测到断开连接或超时并从该端自动注销用户。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T22:16:25.720

两种解决方法可能有效：

1.  加入超时功能。如果用户在特定时间范围内未处理信息或触发活动代码进行注册，请自动向 Web 服务请求删除他/她/您的信息。

2.  在您的应用程序后台不断运行一个小的重复代码。尽可能减少内存占用。让代码每隔一段时间向您的服务器发送一点或字节的信息。如果您愿意，服务器可以自动删除它。如果此“信号”停止，请自动向 Web 服务请求删除他/她/您的信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-03T21:33:16.707

通过“强制退出”，我假设您的意思是系统杀死了该应用程序。在这种情况下，`applicationWillTerminate`将调用该方法。来自苹果文档：

> ...在应用程序在后台运行（未挂起）并且系统出于某种原因需要终止它的情况下，可能会调用此方法

我假设当用户从任务切换器中终止应用程序时也会发生同样的情况（您需要测试）。

如果应用程序崩溃，那么由于故障的性质，不会调用任何 appDelegate 方法。

# ruby-on-rails - 狂欢只在不同页面的侧边栏上显示选定的分类单元

> ID：11803309
> 
> 赞同：2
> 
> 时间：2012-08-03T21:07:17.113
> 
> 标签：ruby-on-rails, ruby-on-rails-3, taxonomy, spree

嗨，我也是 spree 和 rails 的新手。请在这件事上给予我帮助。

我想在页面的侧边栏上显示选定的分类单元。假设我的分类单元结构是这样的

> ```
> Dresses
>    -Party
>       -sub category
>    -Casual
>       -sub category
>       -sub category
>    -Formal
> 
> Pants
>    -Party
>    -Casual
>    -Formal
> Shirts
>    -Party
>    -Casual
>    -Formal 
> ```

所以当我在`*www.host.com/t/pants*`

我只想显示

> ```
> Pants
>    -Party
>    -Casual
>    -Formal 
> ```

在侧边栏中并隐藏所有其他分类树。

请帮帮我。

部分代码在这里显示所有分类法

```
<nav id="taxonomies" class="sidebar-item" data-hook>

  <% get_taxonomies.each do |taxonomy| %>

    <h6 class='taxonomy-root'><%= t(taxonomy.name.singularize) %></h6>

    <%= taxons_tree(taxonomy.root, @taxon, Spree::Config[:max_level_in_taxons_menu] || 1) %>

  <% end %>

</nav> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T20:09:00.737

当前选择的分类单元（例如 www.host.com/t/pants）可从

```
@searcher.properties[:taxon] 
```

这是裤子分类对象，您可以比较它来过滤 get_taxonomies 结果。

所以我想你可以做类似的事情：

```
<% get_taxonomies.select{|t| @searcher.properties[:taxon].nil? or t.id == @searcher.properties[:taxon].id }.each do |taxonomy| %> 
```

但是当您在子类别中时，这将不起作用（例如/t/pants/party）

似乎在早期的 Spree 版本中有一个 .ancestors 方法，但现在它已经消失了，所以我想仍然有一种快速的方法来检查分类单元的祖先，但我还没有找到确切的方法。

完整的解决方案是这样的：

```
<% get_taxonomies.select{|t| @searcher.properties[:taxon].nil? or t.ancestors.includes( @searcher.properties[:taxon].id) }.each do |taxonomy| %> 
```

希望这可以帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T21:09:59.903

感谢@jpdoyle 的帮助。

比较

```
taxonomy.root 
```

每个实例

```
(@searcher.properties[:taxon]).ancestors.collect { |ancestor| seo_url(ancestor)} 
```

解决了我的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-09-06T11:08:03.237

从 Spree 3.7 开始，原始方法如下，我们可以覆盖`@taxonomies`变量值：

```
def show
  @taxon = Taxon.friendly.find(params[:id])
  return unless @taxon

  @searcher = build_searcher(params.merge(taxon: @taxon.id, include_images: true))
  @products = @searcher.retrieve_products
  taxonomies = Spree::Taxonomy.includes(root: :children)
  @taxonomies = taxonomies.select { |t| t.id == @taxon.taxonomy_id }
end 
```

所以我们只能选择那些实际上与所选分类单元相关的分类。

# c# - .net System.Collections.Generic.List .sort 可为空的 int

> ID：11803310
> 
> 赞同：0
> 
> 时间：2012-08-03T21:07:17.697
> 
> 标签：c#, .net

如何使用可为空的 int 属性对列表进行排序`System.Collections.Generic.List<T>.Sort`？

还是我必须进行手动排序，因为那是不可能的？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-03T21:18:11.520

首先，您需要确定空值如何与具有值的项目进行比较。然后就可以进行比较了。例如，如果您决定 null 始终“小于”非 null：

```
list.Sort((x,y) => {
  if(!x.Nullable.HasValue) {
     if(!y.Nullable.HasValue) return 0; // equal
     else return -1; // y is greater
  }
  else
  {
    if(!y.Nullable.HasValue) return 1; // x is greater
    if(x == y) return 0; // equal
    if(x < y) return -1; // y is greater
    else return 1;
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T21:30:28.247

由于新手开发者想要 null first，他们可以使用默认的排序实现：

```
List<int?> myList = new List<int?>() { 2, -3, null, 9 };

myList.Sort();

for (int i = 0; i < myList.Count; i++)
    Console.WriteLine(myList[i]);  //null, -3, 2, 9 
```

如果您确实需要不同的订单，请使用 Peter Ritchie 的解决方案。

编辑：刚刚意识到，这可能是针对列表中类的可为空属性，在这种情况下使用 LINQ 的默认`OrderBy`实现：

```
public class MyClass
{
    public int? Value;
}

List<MyClass> myList = new List<MyClass>()
{
    new MyClass() { Value = 2},
    new MyClass() { Value = -3},
    new MyClass() { Value = null},
    new MyClass() { Value = 9},
};

var sorted = myList.OrderBy(entry => entry.Value).ToList();

for (int i = 0; i < sorted.Count; i++)
    Console.WriteLine(sorted[i].Value); //null, -3, 2, 9 
```

另一种情况，如果您不想使用 LINQ，则将默认比较器与`List.Sort`方法一起使用：

```
myList.Sort((x, y) =>
    {
        return System.Collections.Generic.Comparer<int?>.Default.Compare(x.Value, y.Value);
    }); 
```

# java - 静态方法或setter或getter？

> ID：11803325
> 
> 赞同：-1
> 
> 时间：2012-08-03T21:08:23.027
> 
> 标签：java

```
public class Operations {

    private int add;
    private int sub;
    private int mul;
    private int div;
    private double sqrt;

    public void setadd(int a, int b) {
        add = a + b;
    }

    public void setsub(int a, int b) {
        sub = a - b;
    }

    public void setmul(int a, int b) {
        mul = a * b;
    }

    public void setdiv(int a, int b) {
        div = a / b;
    }

    public void setsqrt(double sqt) {
        sqrt = Math.sqrt(sqt);
    }

    public int getadd() {
        return add;
    }

    public int getsub() {
        return sub;
    }

    public int getmul() {
        return mul;
    }

    public int getdiv() {
        return div;
    }

    public double getsqrt() {
        return sqrt;
    }

} 
```

我是否必须为此或在 Java 中做一个不必要的原型，以及如何在这里使用静态方法而不是 setter 和 getter.. 我正在尝试做一个计算器.. 我的方法可以吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T21:11:02.113

我真的不明白设置和获取的意义，为什么不让你的计算器像这样：

```
public class Calculator {
public int add(int a, int b){
    return a + b;
}
public int sub(int a , int b){
    return a - b;
}
public int mul(int a, int b){
    return a * b;
}
public int div(int a, int b){
    return a/b;
}
public double sqrt(double sqt){
    return Math.sqrt(sqt);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T21:11:22.557

使 Calculator 类的所有操作（加法、乘法、除法等）静态方法：

```
 class Calculator{

     public static int add(int a, int b){
           return a+b;
     }
     ... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-03T21:12:05.253

您的方法都是错误的，因为您对操作的建模不正确。它不应该包含它的结果，它应该只做一个操作，而不是全部。操作对象应该是不可变的，并且它应该对给定两个操作数的特定操作产生答案。您也应该将二元运算与一元运算分开。

```
interface BinaryOp {
    double calculate(double left, double right);
}
interface UnaryOp {
    double calculate(double operand);
}
private static final BinaryOp ADD = new BinaryOp() {
    double calculate(double left, double right) {
        return left + right;
    }
};
private static final BinaryOp SUB = new BinaryOp() {
    double calculate(double left, double right) {
        return left - right;
    }
};
private static final BinaryOp MUL = new BinaryOp() {
    double calculate(double left, double right) {
        return left * right;
    }
};
private static final BinaryOp DIV = new BinaryOp() {
    double calculate(double left, double right) {
        return left / right;
    }
};
private static final UnaryOp SQRT = new UnaryOp() {
    double calculate(double operand) {
        return Math.sqrt(operand);
    }
}; 
```

现在您可以按名称组织您的运算符：

```
private static final Map<String,BinaryOp> opByName = new HashMap<String,BinaryOp>();
static {
    opByName.put("+", ADD);
    opByName.put("-", SUB);
    opByName.put("*", MUL);
    opByName.put("/", DIV);
} 
```

使用此地图，您可以使用您的操作为您执行计算：

```
String op = "+";
double left = 123;
double right = 456;
double res = opByName.get(op).calculate(left, right); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-03T21:11:54.380

只是为了回答尚未回答的问题部分：

你不需要java中的原型。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-03T21:19:09.223

这看起来对一两个枚举很有用：

```
enum BinOp {
    ADD {
        @Override
        public int eval(int leftArg, int rightArg) {
            return leftArg + rightArg;
        }
        @Override
        public String symbol() {
            return "+";
        }
    },
    SUBTRACT {
        @Override
        public int eval(int leftArg, int rightArg) {
            return leftArg - rightArg;
        }
        @Override
        public String symbol() {
            return "-";
        }
    }
    // etc.
    ;
    public abstract int eval(int leftArg, int rightArg);
    public abstract String symbol();
} 
```

还有一个类似的一元运算符枚举（目前只有`SQRT`）。

您可以按如下方式使用它们：

```
int left = 3;
int right = 2;
for (BinOp op : BinOp.values()) {
    System.out.println("The value of "
        + left + " " + op.symbol() + " " + right " is "
        + op.eval(left, right)
    );
} 
```

# c# - 为多个 Outlook 版本的插件制作单个安装程序

> ID：11803326
> 
> 赞同：2
> 
> 时间：2012-08-03T21:08:27.007
> 
> 标签：c#, vsto, add-in, outlook-addin, office-addins

我正在为 Outlook 2003、2007、2010 分别制作 Outlook 插件。我想编写一个安装程序，可以根据正在使用的 Outlook 版本安装插件。怎么做？因为 WebEx 似乎正在这样做，而没有询问它安装在我的 word、excel、outlook 中的哪个版本。如果有办法请提供参考。

如果您知道，也请分享任何替代方法。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T13:37:15.643

我没有给你详细的答案，但这里有一个可能的路径供你遵循：

1.  使用[NSIS](http://nsis.sourceforge.net)创建您的安装程序。这会给你很大的灵活性。
2.  使用安装程序打包所有 VSTO（2003、2007、2010）。
3.  在 .nsi 文件的“安装”部分确定安装了哪个版本的 Outlook。一种简单的方法（虽然我不确定它的可靠性）是检查 HKLM\SOFTWARE\Microsoft\Office 下是否存在适当的注册表项。例如，一个名为“14.0”的键的存在应该意味着安装了 Office 2010。
4.  既然您知道所安装的 Outlook 版本，请安装相应的 VSTO。

# javascript - Jquery/CSS：全尺寸背景图片

> ID：11803328
> 
> 赞同：3
> 
> 时间：2012-08-03T21:08:35.560
> 
> 标签：javascript, jquery, css

我目前正在使用一个 jquery 插件来设置我的背景图像。我遇到的问题是 CSS/JQuery 使页面不成比例。我的内容位于`#container`div 内，因此我将其位置设置为绝对（最初是相对的）。如何让页面内容居中对齐并保持 100% 高度的属性？[例子](http://google.com)

这是在 jquery 插件之前 - CSS 100% 高度 -[示例](http://google.com)

**Jquery后台插件**

```
<script>
(function($) {
  $.fn.fullBg = function(){
    var bgImg = $(this);        

    function resizeImg() {
      var imgwidth = bgImg.width();
      var imgheight = bgImg.height();

      var winwidth = $(window).width();
      var winheight = $(window).height();

      var widthratio = winwidth / imgwidth;
      var heightratio = winheight / imgheight;

      var widthdiff = heightratio * imgwidth;
      var heightdiff = widthratio * imgheight;

      if(heightdiff>winheight) {
        bgImg.css({
          width: winwidth+'px',
          height: heightdiff+'px'
        });
      } else {
        bgImg.css({
          width: widthdiff+'px',
          height: winheight+'px'
        });     
      }
    } 
    resizeImg();
    $(window).resize(function() {
      resizeImg();
    }); 
  };
})(jQuery)
</script> 
```

**与问题相关的 CSS**

```
#container {
    position: relative;
    margin: 0 auto;
    width: 945px;
    background: #f0f0f0;
    height: auto!important;
    height: 100%;
    min-height: 100%;
    border-right: 15px solid #000;
    border-left: 15px solid #000;
}

.fullBg {
  position: absolute;
  top: 0;
  left: 0;
  overflow: hidden;
} 
```

**HTML/Inline JS 调用函数**

```
<img src="images/raven_bg.jpg" alt="" id="background" />
<div id="container">
</div>
<script>
$(window).load(function() {
    $("#background").fullBg();
});///this comes right before the closing body tag
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T21:27:54.787

这以它为中心-

```
#container { 
    margin-left: 50%;
    left: -488px;
} 
```

这有点hacky，但它有效。

50% 移位（根据宽度保持居中）

宽度的一半，加上边框 = 478.5（或 488）以使其在框架中居中。当然，"left" 只有效，因为它有 position: relative; 附在它上面

# android - Android 照片库未更新新照片

> ID：11803329
> 
> 赞同：2
> 
> 时间：2012-08-03T21:08:37.080
> 
> 标签：android

我有一个带有两个主要按钮的应用程序。一个打开一个包含设备上每张照片的画廊，另一个弹出相机。两者都工作正常，但问题是：当我用相机按钮拍照时，它不会显示在图库中！即使我关闭应用程序并再次打开它（强制库的代码再次运行）也不会。我可以显示图片的唯一方法是通过 USB 将设备连接到我的计算机，然后断开连接（我认为强制进行媒体搜索、更新等。）

这是相机意图的代码：

```
 if (getApplicationContext().getPackageManager().hasSystemFeature(PackageManager.FEATURE_CAMERA)){
                            Intent intent = new Intent("android.media.action.IMAGE_CAPTURE");
                             String timeStamp = new SimpleDateFormat("yyyyMMdd_HHmmss").format(new Date());
                            File photo = new File(Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_DCIM),  "IMG_" + timeStamp  + ".jpg");
                            intent.putExtra(MediaStore.EXTRA_OUTPUT,
                                    Uri.fromFile(photo));
                            imageUri = Uri.fromFile(photo);
                            startActivityForResult(intent, 1);

                        } else {

                            Toast.makeText(getApplicationContext(), "Seu dispositivo Android não possui uma câmera funcional.", Toast.LENGTH_LONG).show();
                        } 
```

这是画廊的代码：

```
final String[] columns = { MediaStore.Images.Media.DATA, MediaStore.Images.Media._ID };
        final String orderBy = MediaStore.Images.Media._ID;
        Cursor imagecursor = managedQuery(MediaStore.Images.Media.EXTERNAL_CONTENT_URI, columns, null,null, orderBy);
        int image_column_index = imagecursor.getColumnIndex(MediaStore.Images.Media._ID);
        int dataColumnIndex = imagecursor.getColumnIndex(MediaStore.Images.Media.DATA);
        this.count = imagecursor.getCount();
        this.thumbnails = new Bitmap[this.count];
        this.arrPath = new String[this.count];
        this.thumbnailsselection = new boolean[this.count];
        for (int i = 0; i < this.count; i++) {
            imagecursor.moveToPosition(i);
            int id = imagecursor.getInt(image_column_index);
            thumbnails[i] = MediaStore.Images.Thumbnails.getThumbnail(
                    getApplicationContext().getContentResolver(), id,
                    MediaStore.Images.Thumbnails.MICRO_KIND, null);
            arrPath[i]= imagecursor.getString(dataColumnIndex); 
```

PS：我知道 managedQuery 已被弃用，但这是我知道该怎么做的唯一方法......谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T21:20:59.750

您可以尝试在写入文件后通知内容 URI 发生更改：

```
getContentResolver().notifyChange(MediaStore.Images.Media.EXTERNAL_CONTENT_URI, null); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-12-19T08:23:11.693

保存文件后输入此代码后，我解决了我的问题

```
 // to tell system update data
 sendBroadcast(new Intent(Intent.ACTION_MEDIA_SCANNER_SCAN_FILE, Uri.fromFile(file))); 
```

# c# - 使用 C# 从文本文件中提取字段名称和最大长度

> ID：11803331
> 
> 赞同：0
> 
> 时间：2012-08-03T21:08:56.957
> 
> 标签：c#, c#-3.0

我有一个保存为文本文件的 SQL Server 结果集文件。

以下是该文件的示例：

```
RWS_DMP_ID      RV1_DMP_NUM      CUS_NAME
3192            3957             THE ACME COMPANY                          
3192            3957             THE ACME COMPANY                          
3192            3957             THE ACME COMPANY 
```

我想创建一个读取此文件并创建以下数据表的 C# 程序：

```
 Field       MaxSize
     -----       -------
 RWS_DMP_ID  17 
RV1_DMP_NUM 17 
CUS_NAME    42 
```

这是字段名称及其最大长度的列表。最大长度是字段的开始到下一个字段开始之前的空间。

顺便说一句，我不关心代码性能。这是很少使用的文件处理实用程序。

我用以下代码解决了这个问题：

```
objFile = new StreamReader(strPath + strFileName);
            strLine = objFile.ReadLine();
            intLineCnt = 0;
            while (strLine != null)
            {
                intLineCnt++;

                if (intLineCnt <= 3)
                {                       
                    if (intLineCnt == 1)
                    {
                        strWords = SplitWords(strLine);
                        intNumberOfFields = strWords.Length;
                        foreach (char c in strLine)
                        {
                            if (bolNewField == true)
                            {
                                bolFieldEnd = false;
                                bolNewField = false;
                            }
                            if (bolFieldEnd == false)
                            {
                                if (c == ' ')
                                {
                                    bolFieldEnd = true;
                                }
                            }
                            else
                            {
                                if (c != ' ')
                                {
                                    if (intFieldCnt < strWords.Length)
                                    {
                                        strProcessedData[intFieldCnt, 0] = strWords[intFieldCnt];
                                        strProcessedData[intFieldCnt, 1] = (intCharCnt - 1).ToString();
                                    }
                                    intFieldCnt++;
                                    intCharCnt = 1;
                                    bolNewField = true;
                                }
                            }
                            if (bolNewField == false)
                            {
                                intCharCnt++;
                            }
                        }
                        strProcessedData[intFieldCnt, 0] = strWords[intFieldCnt];
                        strProcessedData[intFieldCnt, 1] = intCharCnt.ToString();                               
                    }
                    else if (intLineCnt == 3)
                    {
                        intLine2Cnt= 0;
                        intTotalLength = 0;
                        while(intLine2Cnt < intNumberOfFields)
                        {
                            intSize = Convert.ToInt32(strProcessedData[intLine2Cnt, 1]);
                            if (intSize + intTotalLength > strLine.Length)
                            {
                                intSize = strLine.Length - intTotalLength;
                            }
                            strField = strLine.Substring(intTotalLength, intSize);
                            strField = strField.Trim();
                            strProcessedData[intLine2Cnt, intLineCnt - 1] = strField;
                            intTotalLength = intTotalLength + intSize + 1;                                

                            intLine2Cnt++;
                        }
                    }                       
                }
                strLine = objFile.ReadLine();
            }`enter code here` 
```

我知道这段代码是一个完整的黑客工作。我正在寻找更好的方法来解决这个问题。

有没有更好的方法来解决这个问题？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T21:26:04.360

我不确定它的内存效率如何，但我认为它更干净（假设你的字段是制表符分隔的）：

```
var COL_DELIMITER = new[] { '\t' };
string[] lines = File.ReadAllLines(strPath + strFileName);

// read the field names from the first line
var fields = lines[0].Split(COL_DELIMITER, StringSplitOptions.RemoveEmptyEntries).ToList();

// get a 2-D array of the columns (excluding the header row)
string[][] columnsArray = lines.Skip(1).Select(l => l.Split(COL_DELIMITER)).ToArray();

// dictionary of columns with max length
var max = new Dictionary<string, int>(); 

// for each field, select all columns, and take the max string length
foreach (var field in fields)
{
    max.Add(field, columnsArray.Select(row => row[fields.IndexOf(field)]).Max(col => col.Trim().Length));
}

// output per requirment
Console.WriteLine(string.Join(Environment.NewLine,
        max.Keys.Select(field => field + " " + max[field])
    )); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T22:56:03.340

```
 void MaximumWidth(StreamReader reader)
    {
        string[] columns = null;
        int[]   maxWidth = null;

        string line;

        while ((line = reader.ReadLine()) != null)
        {
            string[] cols = line.Split('\t');

            if (columns == null)
            {
                columns = cols;
                maxWidth = new int[cols.Length];
            }
            else
            {
                for (int i = 0; i < columns.Length; i++)
                {
                    int width = cols[i].Length;

                    if (maxWidth[i] < width)
                    {
                        maxWidth[i] = width;
                    }
                }
            }
        }

        // ...
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T21:24:07.903

这是我想出的。最大的收获是使用 IndexOf 字符串函数。

```
 class Program
    {
        static void Main(string[] args)
        {
            String strFilePath;
            String strLine;
            Int32 intMaxLineSize;

            strFilePath = [File path and name];                            
            StreamReader objFile= null;

            objFile = new StreamReader(strFilePath);

            intMaxLineSize = File.ReadAllLines(strFilePath).Max(line => line.Length);

            //Get the first line
            strLine = objFile.ReadLine();

            GetFieldNameAndFieldLengh(strLine, intMaxLineSize);

            Console.WriteLine("Press <enter> to continue.");
            Console.ReadLine();
        }
        public static void GetFieldNameAndFieldLengh(String strLine, Int32 intMaxSize)
        {            
            Int32 x;            
            string[] fields = null;
            string[,] strFieldSizes = null;
            Int32 intFieldSize;

            fields = SplitWords(strLine);

            strFieldSizes = new String[fields.Length, 2];
            x = 0;

            foreach (string strField in fields)
            {
                if (x < fields.Length - 1)
                {
                    intFieldSize = strLine.IndexOf(fields[x + 1]) - strLine.IndexOf(fields[x]);                    
                }
                else
                {
                    intFieldSize = intMaxSize - strLine.IndexOf(fields[x]);
                }
                strFieldSizes[x, 0] = fields[x];
                strFieldSizes[x, 1] = intFieldSize.ToString();
                x++;
            }
            Console.ReadLine();

        }

        static string[] SplitWords(string s)
        {
            return Regex.Split(s, @"\W+");
        }
    } 
```

# php - 为什么我的 multipart/form-data 文件上传不能在新服务器上工作？

> ID：11803332
> 
> 赞同：2
> 
> 时间：2012-08-03T21:09:01.067
> 
> 标签：php, apache

我有一个多部分表单，我刚刚移动到一个上传图像的新服务器。它在一个上完美运行，但在另一个上却不行。常规表单数据有效，但我处理上传的 php 脚本不承认有任何文件。

IE：

```
if($_FILES['product_image'][name] != '') {

    // store the image

} 
```

它基本上忽略了这个`$_FILES`变量，就好像它不存在一样。

我隐约记得过去发生过这个问题，但我不记得是什么解决了它。是否有一些用于 apache 设置的配置，或者我缺少的东西？

这是`var_dump($_FILES)`上传的一个：

> array(2) { ["product_image"]=> array(5) { ["name"]=> string(11) "TEST.png" ["type"]=> string(9) "image/png" [ "tmp_name"]=> 字符串(14) "/tmp/phpYP9AKA" ["error"]=> int(0) ["size"]=> int(38652) }

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T21:17:28.847

这是关键部分：

```
["error"]=> int(4) 
```

上传失败，[错误代码为 4](http://php.net/manual/en/features.file-upload.errors.php) - “没有上传文件”。

没有看到您的表格，就无法诊断。

# actionscript-3 - 重置 LineChart y 轴

> ID：11803334
> 
> 赞同：2
> 
> 时间：2012-08-03T21:09:16.697
> 
> 标签：actionscript-3, apache-flex

我有一个 LineChart，通过将 dataprovider 设置为 null 来尝试和“重置”。现在，如果在图表的第一个实例中我有负值，y 轴会“扩展”以显示负值，这太棒了。重置后，我得到一个没有数据点的图表，但 y 轴仍保持在旧的“扩展”状态。我想知道是否有任何方法可以让 y 轴也恢复到默认状态？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T22:38:21.523

尝试：

```
yourLineChart.validateNow(); 
```

# java - 在动态更新时在java中增量访问文件？

> ID：11803335
> 
> 赞同：1
> 
> 时间：2012-08-03T21:09:35.757
> 
> 标签：java, file-io, random-access

我想在文件被其他进程修改/写入时在java中增量读取文件。因此，假设进程“A”正在写入/记录文件“X”，而另一个进程“B”想要增量读取文件“X”，例如每 1 秒（甚至连续）以查找特定模式。在java中执行此操作的最佳方法是什么？我知道我可以使用 RandomAccessFile 的 'seek' 方法，但这会干扰文件的写入吗？有一个更好的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T22:32:25.657

如果您能够使用 Java 7，则可以利用[WatchService](http://docs.oracle.com/javase/tutorial/essential/io/notification.html) ...但它不能解决必须解析整个文件的问题。

我唯一能想到的就是保持某种“标记”，它会指示你最后的位置。下次您来阅读文件时，您可以跳到这一点并从那里阅读（完成后更新标记）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T21:12:14.157

轮询文件修改的数据。打开它进行读取可以防止其他程序同时写入该文件。

# javascript - 在 KoGrid 中使用 knockoutjs 不能在 Chrome 或 FF 中工作，但在 IE8 中工作

> ID：11803337
> 
> 赞同：1
> 
> 时间：2012-08-03T21:09:49.010
> 
> 标签：javascript, knockout.js

我是 KnockOutJs 的新手，我正在实施它以及 KoGrid。我有一个网格设置，它从 IE8 中的数据填充数据，但在 Chrome 或 FF 中不起作用。

Javascript -

```
function FillViewModel(data) {
    var vm = {
        MyResults: ko.observableArray(data)
    };

    return vm;
}

$(function () {
    $.post("/Controller/Search", function (returnedData) {

        ko.applyBindings(FillViewModel(JSON.parse(returnedData)));
    })
}); 
```

控制器中的方法。

```
 [HttpPost]
    public string Search()
    {
        List<myData> resultList;
        resultList= _context.SelectAll();

        JavaScriptSerializer s = new JavaScriptSerializer();
        string json = s.Serialize(resultList);

        return json;
    } 
```

然后我在我的视图中填充它。

```
 <div id="myTable" data-bind="koGrid: { data: MyResults}">
    </div> 
```

正如我所说，它在 IE 中很好地填充了所有 200 行，但是当我尝试在 FF 或 Chrome 中运行它时，它似乎都被调用了，但网格从不显示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T18:14:11.943

我有一个显示：没有一个正在接管。它归结为我有一些在 IE8 中被忽略的 html 5 内容（因此显示：对象上没有被忽略”但 Chrome 和 FF 会识别 html5 元素，因此网格不会显示，因为显示就可以了。愚蠢的错误。

# ios - 在 xcode 中的 SQLite 中执行查询

> ID：11803340
> 
> 赞同：-1
> 
> 时间：2012-08-03T21:09:52.813
> 
> 标签：ios, database, xcode, sqlite, nsarray

我这样做对吗，因为数组返回的计数为 0。

```
-(NSArray *)getAllFavourites{
NSMutableArray *arrFavourites = [[NSMutableArray alloc] init];
NSString *query = @"SELECT * FROM  tbl_favourites;";
sqlite3_stmt *statement;
if (sqlite3_prepare_v2(database, [query UTF8String], -1, &statement, nil) == SQLITE_OK){
    while (sqlite3_step(statement) == SQLITE_ROW ){
        char *charSymbols = (char *) sqlite3_column_text(statement, 0);
        NSString *strFetchedSymbol = [[NSString alloc] initWithUTF8String:charSymbols];
        DBClassFavourites *dbClassFav = [[DBClassFavourites alloc] initWithString:strFetchedSymbol];
        [arrFavourites addObject:dbClassFav];
    }
    sqlite3_finalize(statement);
}
NSLog(@"%i",[arrFavourites count]);
return arrFavourites;
} 
```

我也有这个类来初始化所需的变量。

```
 @implementation DBClassFavourites
 -(id) initWithString:(NSString *)symbol
{
self = [super init];

if (self) {
    self.strSymbol = symbol;
}
return self;
}

-(void) dealloc
{
[strSymbol release];
[super dealloc];
} 
```

这是从我的 firstviewcontroller init 函数调用它的地方

```
 @implementation FirstViewController

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{

 arrFavourites = [[DatabaseManager database] getAllFavourites];

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T21:15:33.807

您应该尝试使用[FMDB 包装器](http://www.highoncoding.com/Articles/836_Persisting_iOS_Application_Data_in_SQLite_Database_Using_FMDB.aspx)

要在代码中找到错误，您需要发布整个数据库初始化方法

# batch-file - 将所有奇数文件移动到文件夹

> ID：11803341
> 
> 赞同：2
> 
> 时间：2012-08-03T21:10:15.700
> 
> 标签：batch-file

我有一组来自名为“IMG0001”、“IMG0002”的相机的图像......我想将所有奇数图像移动到另一个文件夹。

如何使用批处理脚本来实现这一点？

是否可以编写一个脚本来接受不共享公共前缀或相同数字填充的文件名？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T22:25:38.183

如果文件名符合 8.3 约定（基本名称 <=8 个字符，无空格），则以下内容将从命令行运行（如果在批处理文件中使用，则将百分比加倍）。

```
for %F in (*1.jpg *3.jpg *5.jpg *7.jpg *9.jpg) do move "%%F" "newLocation\" 
```

但是，如果名称很长或包含空格，上述方法可能不起作用，因为长名称可能有一个以奇数或偶数结尾的短名称对应物。DIR 和 FOR 在执行模式匹配时会同时查看长名称和短名称。

这样就留下了[kirilloid 解决方案的](https://stackoverflow.com/a/11803514/1012053)改进版本，可以适应不使用临时文件。这种改编也适用于名称中的空格、大小写混合、文件名中的 .jpg 以及扩展名等。

```
for /f "eol=: delims=" %F in ('dir /b /a-d *.jpg^|findstr /irc:"[13579]\.jpg$"') do move "%F" "newLocation" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T21:25:20.460

[示例](http://www.computing.net/answers/windows-xp/counters-with-for-in-batch-files/165116.html)+ findstr/正则表达式：

```
DIR /B -D *.jpg | findstr "[02468][.]jpg" > %TEMP%\DIR.LST
FOR /F %%f IN (%TEMP%\DIR.LST) DO (
move %%f new_dir
)
DEL DIR.LST 
```

如果有人能告诉我，我会很高兴，如何在没有 tmp 文件的情况下做到这一点。在 linux 上，我习惯使用`xargs`反引号。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T21:12:59.673

假设您只想获取标题字符串的整数部分，您必须对其进行正则表达式并仅保留数字，然后检查模数 2 是否返回真或假，然后您可以移动它

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-06-04T14:49:22.770

Here's the very non-tech method:

Arrange your files in window, sorted by name, with thumbnails.

Size your window so the the thumbnails fall into two columns.

Use your mouse to window-select only one column.

I have done exactly this with Windows 7.

There is a YouTube video someone made showing this for an older Windows version: [http://www.youtube.com/watch?v=3Kr2sTzpFY4](http://www.youtube.com/watch?v=3Kr2sTzpFY4)

# c++ - C ++编译器忽略具有模板化类型的类专业化

> ID：11803342
> 
> 赞同：0
> 
> 时间：2012-08-03T21:10:17.523
> 
> 标签：c++, templates

我有一个帮助类，用于向另一个类提供部分专用的方法版本。我有主要模板和两个专业：

```
template<typename BASE, typename ACCESS_METHOD, int MODULE>
struct BaseHelper
{
    void f1()
    {
      ....
    }
 }

template<typename BASE, int MODULE>
template<typename DEVICE>
struct BaseHelper< BASE, StrangeAccessMethod< DEVICE >, MODULE >
{
    void f1()
    {
      ....
    }
 }

template<typename BASE, int MODULE>
struct BaseHelper< BASE, uint32_t, MODULE >
{
    void f1()
    {
      ....
    }
 } 
```

如果执行以下操作：

```
FpgaBaseHelper< SomeBaseClass, AccessMethod, 1 > helper1;
FpgaBaseHelper< SomeBaseClass, StrangeAccessMethod<MyDevice>, 2> helper2;
FpgaBaseHelper< SomeBaseClass, uint32_t, 3 > helper3; 
```

然后结果是为 helper1 和 helper2 实例化了主模板，第三个实例化了 uint32_t 特化。

我需要 helper2 来使用 StrangeAccessMethod<> 专业化。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T21:31:50.140

符号：

```
template<typename BASE, int MODULE>
template<typename DEVICE>
struct BaseHelper< BASE, StrangeAccessMethod< DEVICE >, MODULE >
{
} 
```

是不正确的。它指的是未在主模板中定义的嵌套模板。很可能编译器没有像在许多其他情况下使用模板那样说任何话。

多个模板头只能在以下情况下使用：

```
template<typename BASE, int MODULE> struct BaseHelper
{
  template<typename DEVICE> struct InnerTemplate;   // This is forward declaration.
}

template<typename BASE, int MODULE>
template<typename DEVICE>
struct BaseHelper<BASE, MODULE>::InnerTemplate
{
    // Definition.
} 
```

你可以试试：

```
template<typename BASE, int MODULE, typename DEVICE>
struct BaseHelper< BASE, StrangeAccessMethod< DEVICE >, MODULE >
{
} 
```

也许它会起作用。

# php - 如何通过 php 标头重定向传递 GET 字符串中收到的变量？

> ID：11803343
> 
> 赞同：13
> 
> 时间：2012-08-03T21:10:35.267
> 
> 标签：php, variables, header, get

在用户提交表单后，我从 Aweber 接收 GET 字符串中的值。我获取他们发送的变量并将它们提交到 SMS 网关，以通过短信通知第 3 方提交。

这是我的问题。我需要将在 php 标头中执行传出 SMS 命令的页面重定向到另一个页面，该页面最终显示从 Aweber 发送的 GET 变量。

我可以在第一页检索变量及其值。如何将它们传递到第二页？

这是我在第一页 (sms.php) 上用来收集 Aweber 发送的变量的代码：

```
 $fname   = $_GET['name'];
   $femail  = $_GET['email'];
   $fphone  = $_GET['telephone'];
   ....etc

   header('Location: confirmed.php');
   exit; 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-04-19T22:05:06.743

首先使用将`$_GET`HTTP 变量转换为查询字符串

```
$query = http_build_query($_GET); 
```

然后将查询字符串变量附加到您的重定向标头

```
header('location: domain.com'."?".$query); 
```

完毕。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-08-03T21:15:27.600

```
session_start();
$_SESSION['fname']   = $_GET['name'];
$_SESSION['femail']  = $_GET['email'];
$_SESSION['fphone']  = $_GET['telephone'];
....etc

header('Location: confirmed.php'); 
```

并在下一页上获取它，例如：

```
session_start();
$fname   = $_SESSION['fname'];
$femail  = $_SESSION['femail'];
$fphone  = $_SESSION['fphone']; 
```

....ETC

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-08-03T21:30:06.017

您不需要将它们存储在会话中，您可以轻松地将它们与您的位置标头一起传递：

```
$fname   = $_GET['name'];
$femail  = $_GET['email'];
$fphone  = $_GET['telephone'];
//now a header with these var's:
header("Location: confirmed.php?name=".$fname."&email=".$femail."&telephone=".$fphone); 
```

在 Confirmed.php 中，您可以使用 $_GET 方法获取这些变量。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-06-15T21:13:43.043

请对于将来阅读本文的任何人，使用会话进行这种变量值传输，因为如果您主要依赖于向标题添加变量，那么如果用户仍在该表单上并执行更改标题值的操作，那么您的自己的变量值会发生变化，因为它取决于标题......简单地说，使用会话。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-08-03T21:12:29.433

将它们存储在[会话中](http://php.net/manual/en/features.sessions.php)：

```
 $_SESSION['fname'] = $_GET['name']; 
```

`session_start`在每个文件的开头使用。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2017-06-13T11:19:26.143

尝试这个。它对我来说非常有效。

```
if ($_GET)
{
    $query = str_replace("%3D", "=", str_replace("%26", "&", strval(urlencode(http_build_query($_GET)))));

    header('location: https://www.example.com'.'?'.$query);
}
else
{
    header('location: https://www.example.com');
}; 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-01-09T03:51:14.653

你能做的最好的就是把你所有的 POST 变量放到一个这样的会话中：

**在 page1.php 上放：**

```
//Start the session
session_start();
//Dump your POST variables
$_SESSION['post-data'] = $_POST; 
```

**在 page2.php 上放：（*如果在 page1.php 上我们使用普通的 POST 表单提交表单`action="page2.php`“*）**

```
//Start the session
session_start();
//Access your POST variables
foreach ($_POST as $key => $value) {
    ${$key} = $value;
    $_SESSION[$key] = $value;
}
//Unset the useless session variable
unset($_SESSION['post-data']); 
```

**或者在 page2.php 上放置：（*如果在 page1.php 上我们使用带有表单的自我提交，`action="<?php echo htmlspecialchars($_SERVER['PHP_SELF']); ?>`然后使用 a`header("Location: page2.php");`移动到 page2.php 并通过会话传递我们的 POST 变量*）**

```
//Start the session
session_start();
//Access your POST variables
$_POST = $_SESSION['post-data'];
foreach ($_POST as $key => $value) {
    ${$key} = $value;
    $_SESSION[$key] = $value;
}
unset($_SESSION['post-data']); 
```

我确实花了几个小时来弄清楚这一点，因为所有论坛都把它错误或不完整。

现在就像调用从 page1.php 传递的变量一样简单，例如：`<b>Points: </b><?php echo $points; ?>`就是这样！

在`header('Location: page2.php');`设置`if`条件等时，请确保它将位于页面的第一个 PHP 脚本中并且位于任何 HTML 输出之上。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-05-04T10:27:57.963

这个作品使用这个sentex

header('location:member_dashboard.php?id='.$id);

# list - 组成所有对的列表

> ID：11803349
> 
> 赞同：11
> 
> 时间：2012-08-03T21:11:06.683
> 
> 标签：list, scala, functional-programming

我是 Scala 的新手，通过 Haskell 进行函数式编程的经验非常有限。

我想尝试编写从单个输入列表构造的所有可能对的列表。例子：

```
val nums = List[Int](1, 2, 3, 4, 5)   // Create an input list
val pairs = composePairs(nums)        // Function I'd like to create

// pairs == List[Int, Int]((1, 1), (1, 2), (1, 3), (1, 4), (1, 5), (2, 1) ... etc) 
```

我尝试`zip`在每个元素上使用整个列表，希望它会在整个列表中复制一个项目。它不起作用（仅匹配第一个可能的对）。我不确定如何重复一个元素（Haskell 会这样做`cycle`，`take`我相信），而且我在遵循 Scala 上的文档时遇到了麻烦。

这让我想，可能有一种更简洁、更实用的方式来获得我想要的结果。有人有好的解决方案吗？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-08-03T21:17:07.470

这个怎么样：

```
val pairs = for(x <- nums; y <- nums) yield (x, y) 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2017-08-17T01:24:28.123

对于那些不想重复的人：

```
val uniquePairs = for {
      (x, idxX) <- nums.zipWithIndex
      (y, idxY) <- nums.zipWithIndex
      if idxX < idxY
    } yield (x, y)

val nums = List(1,2,3,4,5)
uniquePairs: List[(Int, Int)] = List((1, 2), (1, 3), (1, 4), (1, 5), (2, 3), (2, 4), (2, 5), (3, 4), (3, 5), (4, 5)) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-03T21:52:38.720

这是另一个使用 map 和 flatten 的版本

`val pairs = nums.flatMap(x => nums.map(y => (x,y)))`

`List[(Int, Int)] = List((1,1), (1,2), (1,3), (1,4), (1,5), (2,1), (2,2), (2,3), (2,4), (2,5), (3,1), (3,2), (3,3), (3,4), (3,5), (4,1), (4,2), (4,3), (4,4), (4,5), (5,1), (5,2) (5,3), (5,4), (5,5))`

如果您愿意，可以轻松地将其包装到 composePairs 函数中：

```
def composePairs(nums: Seq[Int]) =
    nums.flatMap(x => nums.map(y => (x,y))) 
```

# ruby - 在 ActiveRecord 中计数关联

> ID：11803354
> 
> 赞同：0
> 
> 时间：2012-08-03T21:11:57.867
> 
> 标签：ruby, activerecord, associations, aggregate-functions

我有两个模型，`User`和`Group`，其中组包含许多用户。如果我想使用单个查询计算每个组中的用户数，我可以使用以下 SQL：

```
select id, (select count(1) from users where group_id = groups.id) from groups 
```

是否可以使用 ActiveRecord 有效地做到这一点？

需要明确的是，此查询将列出所有组 ID，以及每个组中的用户数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T21:35:47.873

您可以使用其中任何一个来获取计数

1.  使用关联

    ```
    group = Group.find(1) #find group with id = 1
    group.users.count    # count users whose group_id = 1 calls db everytime
     or  
    group.users.size  # get size from cache if group.users loaded 
    ```

2.  或直接

    ```
    User.where(:group_id=>1).count 
    ```

计数助手在具有指定条件的数据库上触发计数（*）查询在 [http://apidock.com/rails/ActiveRecord/Calculations/count检查更多选项](http://apidock.com/rails/ActiveRecord/Calculations/count)

我也建议你通过[rails guides](http://guides.rubyonrails.org/association_basics.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T03:26:55.420

我找到了一个使用连接的有效解决方案：

```
Group.all(
  :select => "groups.id, count(u.group_id) as users_count",
  :joins  => "LEFT OUTER JOIN users u ON u.group_id = groups.id",
  :group  => "groups.id"
) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-10-17T12:21:36.857

第一个解决方案是简单地将您的查询转换为 ActiveRecord 并使用子查询：

```
subquery = User.where("users.group_id = groups.id").select('count(1)')
groups_with_count = Group.select(:id, "(#{subquery.to_sql}) as users_count") 
```

或者对相同的结果使用 sql 分组

```
groups_with_count = Group.joins(:users).select(:id, 'count(users.id) as users_count').group(:id) 
```

在这两种情况下，您现在都可以使用 MINIMAL 原始 sql 在一个查询中获得结果：

```
groups_with_count.each { |group| puts "#{group.id} => #{group.users_count}" } 
```

* * *

### 附加说明

您可以使用以下帮助程序将第一个子查询编写`subquery = User.via(:group).select('count(1)')`为更简单和可维护的 imo。

为了编写更好的子查询，我在几个项目中使用了这段代码：

```
class ApplicationRecord < ActiveRecord::Base
    # transform Raw sql that references an association such as: Shift.where('shifts.id = checkins.shift_id')
    # into a simpler version Shift.via(:checkin) if shift have the checkin relationship
    # No support for polymorphic association
    # Basic support for "through" reflection (using join)
    def via(name)
        association = reflect_on_association(name)

        raise ArgumentError, "#{name} is not a valid association of #{self.class.name}" unless association
        raise NotImplementedError if association.polymorphic?

        join_keys = association.join_keys
        table_column = arel_table[join_keys.foreign_key]
        association_column = Arel::Table.new(association.table_name)[join_keys.key]

        if association.through_reflection?
            through_association = association.through_reflection
            table_column = Arel::Table.new(through_association.table_name)[join_keys.foreign_key]

            joins(through_association.name).where(table_column.eq(association_column))
        else
            where(table_column.eq(association_column))
        end
    end
end 
```

# jquery - 将代码添加到将通过 jQuery 调整 DIV 的 URL

> ID：11803358
> 
> 赞同：1
> 
> 时间：2012-08-03T21:12:14.137
> 
> 标签：jquery, url, html, hide, show

我以这段代码为例：

```
<html>
<head>

<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.4.4/jquery.min.js"></script>

<script type="text/javascript">
function showonlyone(thechosenone) {
     $('.newboxes').each(function(index) {
          if ($(this).attr("id") == thechosenone) {
               $(this).show(200);
          }
          else {
               $(this).hide(600);
          }
     });
}
</script>

</head>

<body>

             <div style="border: 1px solid blue; background-color: #99CCFF; padding: 5px; width: 150px;">
                <a id="myHeader1" href="javascript:showonlyone('newboxes1');" >show this one only</a>
             </div>
             <div class="newboxes" id="newboxes1" style="border: 1px solid black; background-color: #CCCCCC; display: block;padding: 5px; width: 150px;">Div #1</div>

             <div style="border: 1px solid blue; background-color: #99CCFF; padding: 5px; width: 150px;">
                <a id="myHeader2" href="javascript:showonlyone('newboxes2');" >show this one only</a>
             </div>
             <div class="newboxes" id="newboxes2" style="border: 1px solid black; background-color: #CCCCCC; display: none;padding: 5px; width: 150px;">Div #2</div>

             <div style="border: 1px solid blue; background-color: #99CCFF; padding: 5px; width: 150px;">
                <a id="myHeader3" href="javascript:showonlyone('newboxes3');" >show this one only</a>
             </div>
             <div class="newboxes" id="newboxes3" style="border: 1px solid black; background-color: #CCCCCC; display: none;padding: 5px; width: 150px;">Div #3</div>

</body>
</html> 
```

在另一个页面上，我希望有一个链接，当用户通过单击该外部链接加载页面时，该链接将显示**Div #2 。**我希望通过向 URL 添加一个哈希变量来实现这一点，例如：domain.com/page.html#newboxes2

有人告诉我，这样的功能可以通过玩这个来实现：

```
$(function(){

  switch( window.location.hash ){
    case '#showcontainer1':
      $('#container1').fadeIn();
      break;
    default:
      $('#container2').fadeIn()
      break;
  }

}); 
```

但是，在尝试围绕如何将该代码添加到我自己的代码中之后，我无法使其工作。这是如何运作的？

感谢您提供任何帮助，我的编码知识非常有限，因此如果您选择提供帮助，请详细说明。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T21:22:45.547

使用您当前的 html 结构，您需要做的就是这个。导航到`domain.com/page.html#newboxes2`将导致`<div>`带有 id 的结果，`#newboxes2`如下所示。和以前一样，将它们全部设置为`display:none;`默认值。您应该考虑将样式从 html 中提取出来，而是将它们全部放在`<style>`页面顶部的标签之间。您可以使用类选择器（例如`.newboxes`）将相同的样式应用于特定类的所有元素。

演示：http: [//jsfiddle.net/eqPGW/4/](http://jsfiddle.net/eqPGW/4/)

Javascript：

```
$(function() {
    var showBox = window.location.hash.indexOf('#newboxes') != -1;
    if(showBox) {
        $(window.location.hash).prev('.cover').hide();
        $(window.location.hash).show();
    }
    else {
        $('.cover').first().hide();
        $('.newboxes').first().show();   
    }

    $('.cover a').click(function(e) {
        e.preventDefault();
        var $cover = $(this).closest('.cover');
        $cover.hide();
        $('.cover').not($cover).show();
        $('.newboxes').hide();
        $cover.next('.newboxes').show();            
    });
}); 
```

HTML/CSS：

```
<html>
<head>
    <script type="text/javascript">
        // PUT SCRIPT HERE
    </script>
    <style>
        .newboxes {
            border: 1px solid black;
            background-color: #CCCCCC;
            display: none;
            padding: 5px;
            width: 150px;
        }
        .cover {
        border: 1px solid blue; background-color: #99CCFF; padding: 5px; width: 150px;
        }
    </style>
</head>

<body>
     <div class="cover">
        <a id="myHeader1" href="#" >show this one only</a>
     </div>
     <div class="newboxes" id="newboxes1">Div #1</div>

     <div class="cover" >
        <a id="myHeader2" href="#" >show this one only</a>
     </div>
     <div class="newboxes" id="newboxes2">Div #2</div>

     <div class='cover' >
        <a id="myHeader3" href="#" >show this one only</a>
     </div>
     <div class="newboxes" id="newboxes2">Div #3</div>        

</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T21:23:17.070

这实际上非常简单。URL 中的“哈希”是`#foo`位；`window.location.hash`仅从 URL 返回此位。不过，您收到的代码有点荒谬。哈希的默认功能是让浏览器跳转到页面中的特定 id。如果 javascript 被禁用，你仍然希望它跳转，所以你不应该像`#showcontainer1`在 URL 中那样使用任意散列，而是使用实际的 id 本身，`#container1`. 那么，就不需要switch语句了，直接显示这个div就好了。

```
if (window.location.hash) {
    $(window.location.hash).show();
} 
```

# php - .htaccess mod_rewrite 对于漂亮的 url 不起作用

> ID：11803367
> 
> 赞同：2
> 
> 时间：2012-08-03T21:13:18.343
> 
> 标签：php, .htaccess, mod-rewrite

试图让 www.example.com/test.php?archives=testing 到 www.example.com/archives/testing

根据godaddy的说法，他们默认启用了mod_rewrite

这是我的 .htaccess 文件：

```
rewriteengine on
rewritecond %{HTTP_HOST} ^example.com$
rewriterule ^example\/(.*)$ "http\:\/\/www\.example\.com\/$1" [R=301]
RewriteCond  %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^archives/(\w+)$ test.php?archives=$1 [L] 
```

然而这不起作用，当我去 www.example.com/archives/test 我得到一个 404，建议

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T21:39:34.090

我只是在评论中留下了这个，但我不妨把它放在这里，这样看起来更容易。我为随着时间的推移帮助他人的人写了一个答案，最后这并不完全是您所要求的答案，但它更像是朝着这个方向发展的垫脚石。最初的问题是如何使用短 url 字符串并使它们以您正在寻找的方式工作，而是在此处复制并粘贴该答案。我会让你去那里读一读。

不言而喻，您需要根据您的特定需求稍微更改规则，但它最终会达到将您带到您想去的地方的目的。

[PHP 动态数据库页面重写 URL](https://stackoverflow.com/questions/11022509/php-dynamic-db-page-rewrite-url/11022705#11022705)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T21:25:40.403

您需要一些重写条件来指定何时使用此规则。没有它们，您将无限期地运行相同的重写规则，给您一个错误。尝试：

```
RewriteCond  %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d

RewriteRule ^archives/(\w+)$ test.php?archives=$1 [L] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T22:03:21.393

这个怎么样：

```
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^archives/(.+)$ /test.php?archives=$1 [L]
</IfModule> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-03T22:14:57.723

如果没有非常清楚你想从你的重写中得到什么，我建议：

```
Options -MultiViews
ErrorDocument 404 default
RewriteBase / 
```

# c# - 在 void 方法中使用异步等待

> ID：11803370
> 
> 赞同：11
> 
> 时间：2012-08-03T21:13:22.130
> 
> 标签：c#, xaml, asynchronous, windows-8, async-await

我有无法更改的签名方法。它应该是

```
protected override void OnInitialize() 
```

使用 Windows 8 Metro API，我需要在这个 NoSignatureChange 方法中检查文件是否存在并读取它。使用 PlainOldCSharp，我会写类似

```
protected override void OnInitialize()
{
  ...
  try
  {
    var file = folder.OpenFile(fileName);
    fileExists=true;
  }
  catch(FileNotFoundException)
  {
    fileExists=false
  }
} 
```

请记住，在[Windows 8 API 中，检查文件是否存在的唯一方法是处理 FileNotFoundException](https://stackoverflow.com/questions/8626018/how-to-check-if-file-exists-in-metro) 此外，在 Windows 8 API 中，所有 FileIO API 都是异步的，所以我只有 file.OpenFileAsync 方法。

所以，问题是：**我应该如何在 Windows 8 API 中使用 folder.OpenFileAsync 方法编写这段代码而不改变包含方法的签名**

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-08-03T21:15:29.307

您仍然可以使`void`方法异步：

```
protected async void CannotChangeSignature()
{
    ...
} 
```

异步方法的有效返回类型是：

*   `void`
*   `Task`
*   `Task<T>`

但是，如果你想让它*真正*阻塞，那么你基本上是在与平台作斗争——关键是要*避免*阻塞。

你说你不能改变签名——但是如果你依赖这个阻塞，那么你必须*改变*你处理编码的方式。

理想情况下，您应该将签名更改为`Task<bool>`：

```
protected async Task<bool> CannotChangeSignature()
{
  ...
  try
  {
    await ApplicationData.Current.LocalFolder.GetFileAsync(fileName);
    return true;
  }
  catch(FileNotFoundException)
  {
    return false;
  }
} 
```

编辑：如果你*真的*需要一个阻塞的，你只需要调用`AsTask().Wait()`，捕获`AggregateException`并检查它是否包含一个`FileNotFoundException`. 不过，这真的很可怕……你能不能围绕它进行设计，这样它就*不需要*被阻塞了？例如，开始检查文件，并在发现文件不存在时显示错误（或其他）。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2021-08-12T17:53:09.463

```
 public async void CalculateData()
    {
        await ProcessData();
    }

    private async Task ProcessData()
    {
        await Task.Run(() =>
        {
            //time taking process
        });
    } 
```

或者你可以使用

```
public void CalculateData()
{
    ProcessData();
}

private async void ProcessData()
{
    await Task.Run(() =>
    {
        //time taking process
    });
} 
```

# .net - 我可以在不附加 VS 调试器的情况下从 CLR 异常中获取堆栈跟踪吗？

> ID：11803373
> 
> 赞同：10
> 
> 时间：2012-08-03T21:13:31.137
> 
> 标签：.net, debugging, iis-6, windbg

我有一个在远程服务器上运行的网站，并希望从正在发生的异常中获取一些信息。我无法安装VS或使用远程调试，并且一直在尝试使用各种版本的WinDbg，但收效甚微。在我的本地测试中，我可以让 WinDbg 中断 C++ 异常或我抛出的 CLR 异常，但无法获得比“抛出某些东西”更多的信息。

WinDbg 是要走的路，还是有另一种方法，或者我因为没有足够的日志记录而搞砸了？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-08-03T21:43:04.103

将 WinDbg 附加到进程，然后输入以下命令：

```
.symfix
sxe clr
sxd av
.loadby sos clr
g 
```

执行将继续（在 go 命令之后），并且只要抛出 CLR 异常（或任何其他未处理的异常）就会中断。每当它在 CLR 异常上中断时，您都会看到：

```
(xxxx.xxxx): CLR exception - code e0434352 (first chance) 
```

然后您可以使用 SOS 命令`!pe`，例如打印异常类型、`!ClrStack`转储堆栈、转储堆栈`!dso`中的托管对象等。

编辑：我有错别字`sxe`和`sxd`命令。感谢@MStodd 注意到这一点。

# javascript - jPlayer - 通过 Javascript 实现倒带功能

> ID：11803377
> 
> 赞同：2
> 
> 时间：2012-08-03T21:13:46.213
> 
> 标签：javascript, jquery, audio, keypress, jplayer

我在使用**[jPlayer 时](http://jplayer.org/)**遇到了一个问题，我在搜索了几个地方后认为它在这里会很常用，而且肯定有人会遇到类似的问题。

我正在使用 jPlayer 播放音频文件，我的用户希望能够通过特定的热键快进和快退。我注意到 jPlayer 不提供开箱即用的此功能（*它仅通过单击当前进度条来处理快进和快退*）

理想情况下 - 只需一次按键即可切换快进（或倒带）。当再次按下相同的键时，音频文件将根据当前位置开始播放。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T14:21:53.163

我决定实施我自己的解决方案，目前似乎工作得很好。我想我会分享它以防其他人遇到这样的问题。

原谅粗暴的执行。这只是一个概念证明：

**必要的Javascript：**

```
//Handles the key down event (so the user can hold a key down to continue)
$(document).keydown(function (e) {
    //Rewind
    if (e.keyCode == 37 && (!rewinding)) {
        rewinding = true;
        //Pause the player
        $("#player").jPlayer("pause");
        RewindTrack();
        rwaction = window.setInterval(function () { RewindTrack() }, 500);
    }
    else if (e.keyCode == 39 && (!fastforward)) {
        fastforward = true;
        //Pause the player
        $("#player").jPlayer("pause");
        FastforwardTrack();
        ffaction = window.setInterval(function () { FastforwardTrack() }, 500);
    }
});
//Ends the action
$(document).keyup(function (e) {
    //Rewind
    if (e.keyCode == 37) {
        rewinding = false;
        window.clearInterval(rwaction);
        $("#player").jPlayer("pause");
    }
    else if (e.keyCode == 39) {
        fastforward = false;
        window.clearInterval(ffaction);
        $("#player").jPlayer("pause");
    }
});

//Related function
function GetPlayerProgress() {
    return ($('.jp-play-bar').width() / $('.jp-seek-bar').width() * 100);
}

//Handles rewinding
function RewindTrack() {
    //Get current progress and decrement
    var currentProgress = GetPlayerProgress();
    //Rewinds 10% of track length
    var futureProgress = currentProgress - 10;
    //If it goes past the starting point - stop rewinding and pause
    if (futureProgress <= 0) {
        rewinding = false;
        window.clearInterval(rwaction);
        $("#player").jPlayer("pause", 0);
    }
    //Continue rewinding
    else {
        $("#player").jPlayer("playHead", parseInt(futureProgress, 10));
    }
}

//Fast forwards the track
function FastforwardTrack() {
    //Get current progress and increment
    var currentProgress = GetPlayerProgress();
    //Fast forwards 10%
    var futureProgress = currentProgress + 10;
    //If the percentage exceeds the max - stop fast forwarding at the end.
    if (futureProgress >= 100) {
        fastforward = false;
        window.clearInterval(ffaction);
        $("#player").jPlayer("playHead", parseInt($('.jp-duration').text().replace(':', '')));
    }
    else {
        $("#player").jPlayer("playHead", parseInt(futureProgress, 10));
    }
} 
```

**[工作演示](http://jsfiddle.net/FMZfF/)**（使用左箭头快退，右箭头快进）

# delphi-7 - VirtualStringTree如何释放多个节点

> ID：11803379
> 
> 赞同：2
> 
> 时间：2012-08-03T21:13:52.007
> 
> 标签：delphi-7, virtualtreeview, delphi, tvirtualstringtree

我有一个带有 X 根和 X 子节点的 VirtualStringTree。

每个根都分配了一个特殊的 NodeData。每个子节点都分配了另一个 NodeData。我怎么知道 OnFreeNode 哪个是哪个？因为我无法在不知道分配给它的记录的情况下释放数据。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T21:37:00.410

要确定节点级别，请使用该`GetNodeLevel`函数。它返回基于 0 的级别索引，其中 0 表示根节点，1 表示根的孩子，2 表示根的孙等。

所以，`OnFreeNode`如果你可以使用这样的东西：

```
procedure TForm1.VirtualTreeFreeNode(Sender: TBaseVirtualTree;
  Node: PVirtualNode);
begin
  case VirtualTree.GetNodeLevel(Node) of
    0: // free your root node data
    1: // free your root's child node data
  end;
end; 
```

# asp.net-mvc - EF Code First 4.3.1 迁移：始终播种数据，即使没有任何变化

> ID：11803380
> 
> 赞同：0
> 
> 时间：2012-08-03T21:13:54.143
> 
> 标签：asp.net-mvc, entity-framework-4, ef-code-first, entity-framework-migrations

我在我的 ASP.NET MVC 4 项目和迁移/配置文件中使用新的迁移，我有以下内容：

```
public Configuration()
        {
            AutomaticMigrationsEnabled = false;
            AutomaticMigrationDataLossAllowed = false;
        } 
```

在同一个文件文件中，我还有一个用于填充我的数据库的 Seed 方法。我注意到每次我运行我的应用程序时，即使模型没有改变，它也会为数据库重新设定种子。在我的 global.asax 文件中，我在 Application_Start 中有以下数据库初始化程序

```
Database.SetInitializer(new MigrateDatabaseToLatestVersion<UtilitiesContext, Migrations.Configuration>()); 
```

如果模型更改或我运行 Update-Database 命令，我只希望它为数据库播种。我该怎么做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T00:26:05.810

DropCreateDatabaseIfModelChanges 呢？请参阅此[MSDN 文章](http://msdn.microsoft.com/en-us/library/gg679604%28v=vs.103%29.aspx)。仅当数据库与模型不同时，才会重新设置种子。

用法：

```
 Database.SetInitializer(new DropCreateDatabaseIfModelChanges<UtilitiesContext>()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T14:57:06.180

实际上，我只是一起删除了初始化语句并且它起作用了。

# c# - 如何使用 sql 查询更改列的标识规范？

> ID：11803384
> 
> 赞同：0
> 
> 时间：2012-08-03T21:14:04.753
> 
> 标签：c#, sql, sql-server-2008

*如何使用 sql 查询更改列的标识规范？仅使用 c# 编码。请帮忙。* **在这里，我想在以下代码中创建新表时再添加一列作为 PaperId。我需要将 columns 属性分配为标识规范 yes 和标识增量 1。**

```
if (rbtnEng.Checked == true)
{
    con.Open();
    char[] arr = new char[] { 'n', 'g', 'l', 'i', 's', 'h' };
    string str = "CREATE TABLE " + Label1.Text.Trim() + txtpaperset.Text.Trim() 
    + rbtnEng.Text.TrimEnd(arr) + "(" + "quesNo int NOT NULL PRIMARY KEY, " 
    + "question varchar(1000) NOT NULL," + "ansA varchar(500) NOT NULL, " 
    + "ansB varchar(500) NOT NULL, " + "ansC varchar(500) NOT NULL, " 
    + "ansD varchar(500) NOT NULL, " + "rightAns varchar(50) NOT NULL " + ")";
    SqlCommand cmd = new SqlCommand(str, con);
    cmd.ExecuteNonQuery();
    Label2.Text = Label1.Text + txtpaperset.Text + rbtnEng.Text.TrimEnd(arr);
    lblerrormsg.Text = "PaperSet Created Sucessfully!";
    txtpaperset.ReadOnly = true;
    btnpaper.Enabled = false;
    rbtnEng.Enabled = false;
    rbtnMar.Enabled = false;
    UpdatePanel2.Visible = true;
    txtQuestNo.Text = Convert.ToString(1);
    con.Close();
}

else if.... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T21:24:07.293

首先，这很糟糕。不要像这样添加这么多字符串；使用`string.Format()`.

```
string str = string.Format("CREATE TABLE {0}{1}{2} (" 
+ "quesNo int NOT NULL PRIMARY KEY, question varchar(1000) NOT NULL, " 
+ "ansA varchar(500) NOT NULL, ansB varchar(500) NOT NULL, " 
+ "ansC varchar(500) NOT NULL, ansD varchar(500) NOT NULL, " + 
+ "rightAns varchar(50) NOT NULL )",
Label1.Text.Trim(),
txtpaperset.Text.Trim(),
rbtnEng.Text.TrimEnd(arr)); 
```

但那只是我的个人意见。

[以下是创建标识列的方法](http://msdn.microsoft.com/en-us/library/ms186775.aspx)。

```
PaperId int identity(1,1) 
```

只需将其添加到您的`str`字符串中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T21:23:07.073

如果您只需要在创建表脚本中添加一个标识列，那么这里是一个示例：

```
create table Data
(
Id int identity(1,1) NOT NULL
) 
```

# c# - 图像质量模糊

> ID：11803386
> 
> 赞同：0
> 
> 时间：2012-08-03T21:14:06.833
> 
> 标签：c#, wpf

我有一种情况，我想将一些 XAML 转换为图像，所以我创建了一个 RichTextBox，然后拍摄了它的图像。现在的问题是图像中的文字模糊不清，知道我该如何解决吗？

```
public System.Drawing.Bitmap ConvertXamltoImage(string XamlString, int Width, int Height)
{

    RichTextBox AdContentRichTextBox = new RichTextBox() { Width = Width, Height = Height };
    AdContentRichTextBox.BorderThickness = new Thickness(0);
    XmlReader _XmlReader = XmlReader.Create(new StringReader(XamlString));

    AdContentRichTextBox.Document = XamlString;          

    var size = new Size(Width, Height);
    AdContentRichTextBox.Measure(size);
    AdContentRichTextBox.Arrange(new Rect(size));
    RenderTargetBitmap bmp = new RenderTargetBitmap(Width, Height, 300, 300, PixelFormats.Pbgra32);

    bmp.Render(AdContentRichTextBox);

    DrawingVisual _drawingVisual = new DrawingVisual();

    using (DrawingContext _drwaingContext = _drawingVisual.RenderOpen())
    {
        VisualBrush _visualBrush = new VisualBrush(AdContentRichTextBox);
    }

    PngBitmapEncoder _png = new PngBitmapEncoder();

    _png.Frames.Add(BitmapFrame.Create(bmp));
    System.Drawing.Bitmap _tempBitmap = null;
    using (Stream _fileStream = new MemoryStream())
    {
        _png.Save(_fileStream);
        _tempBitmap = new System.Drawing.Bitmap(_fileStream);

        _fileStream.Flush();
    }
    return _tempBitmap;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T22:05:07.093

嗯..这里可能有很多东西都在相互作用：

第一

“灰度回退 - 如果 ClearType 被禁用或在某些情况下无法运行 ClearType 算法呈现文本，WPF 将使用灰度呈现算法对呈现的文本进行抗锯齿处理。”

将文本渲染到 RenderTargetBitmap 似乎是其中一种情况......（渲染器从硬件切换到软件路径）。

第二

此外，NET 4 将默认缩放算法从高质量 (Fant) 切换为低质量 (Bi-Linear)……现在这不应该在这里发挥作用，因为它看起来不像是在缩放任何方式的位图......但你永远不知道里面发生了什么。可以将缩放器切换回更高质量的缩放器。

*   [http://www.olsonsoft.com/blogs/stefanolson/post/Workaround-for-low-quality-bitmap-resizing-in-WPF-4.aspx](http://www.olsonsoft.com/blogs/stefanolson/post/Workaround-for-low-quality-bitmap-resizing-in-WPF-4.aspx)

第三

您可能需要考虑 RichTextBox 的父容器...请参阅下面的最后一个链接，提到它会扭曲字体渲染。

*   [使用 WPF 将文本呈现为位图的问题](https://stackoverflow.com/questions/1614397/problems-with-rendering-text-as-bitmaps-using-wpf)

* * *

关于如何解决这个问题的一些想法是：

1.  以更高的分辨率渲染 RichTextBox，例如 600dpi，然后按比例缩小位图（可能没有区别）

2.  捕获屏幕....如果您的视觉在屏幕外/被遮挡等，困难或不实用。

* * *

查看相关链接：

*   [http://windowsclient.net/wpf/white-papers/wpftextclarity.aspx](http://windowsclient.net/wpf/white-papers/wpftextclarity.aspx)

*   [WPF RenderTargetBitmap 将文本 ClearType 缩小为 GreyScale](https://stackoverflow.com/questions/5291670/wpf-rendertargetbitmap-downscaling-text-cleartype-to-greyscale)

*   [WPF RenderTargetBitmap 将 TextRenderMode 缩小为 GreyScale](https://stackoverflow.com/questions/5292321/wpf-rendertargetbitmap-downscaling-textrendermode-to-greyscale)

*   [WPF 文本呈现不一致](https://stackoverflow.com/questions/3444031/wpf-text-rendering-inconsistencies)

# python - 根据参数将视图路由到另一个 URL

> ID：11803387
> 
> 赞同：1
> 
> 时间：2012-08-03T21:14:14.470
> 
> 标签：python, flask

我有一个简单的 Flask 应用程序，其中包含一些基本视图。这些视图之一称为结果。它所做的是使用 GET 获取 URL 参数，然后使用参数执行一系列操作，最后使用渲染模板`render_template()`并将计算值传递给它。

在呈现时，结果 URL 如下所示：

```
http://127.0.0.1:5000/result?s=abcd&t=wxyz 
```

我想要做的不是在结果视图下渲染模板，而是重定向到一个新视图（我们称之为最终视图），将计算值与重定向一起传递，然后从那里渲染模板。为什么要做这一切？因为我希望最终 URL 看起来像这样：

```
http://127.0.0.1:5000/final/abcd 
```

如果标题有点含糊，我很抱歉。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T01:53:17.040

最简单的解决方案是最终 URL 中的“abcd”可以是实际结果：

```
@app.route("/result")
def calculate_result():
    s, t = request.args.get("s"), request.args.get("t")
    # Calculate result with s and t
    return redirect(url_for(".display_results", result=result))

@app.route("/final/<result>")
def display_results(result):
    return render_template("results.html", result=result) 
```

如果不能，那么您可以[`session`](http://flask.pocoo.org/docs/quickstart/#sessions)改用：

```
@app.route("/result")
def calculate_result():
    s, t = request.args.get("s"), request.args.get("t")
    # Calculate result with s and t
    session["result"] = result
    return redirect(url_for(".display_results", result=result))

@app.route("/final/abcd")
def display_results():
    result = session.get("result")
    return render_template("results.html", result=result) 
```

# objective-c - 从视图控制器到其每个顶级视图的强引用

> ID：11803388
> 
> 赞同：0
> 
> 时间：2012-08-03T21:14:18.137
> 
> 标签：objective-c, ios

是否有从视图控制器到其每个顶级视图的强指针？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T21:18:38.790

根据`UIViewController`文档，是的。它说：

```
@property(nonatomic, retain) UIView *view 
```

# c# - 如何通过 EnterpriseLibrary 以编程方式读取错误日志？

> ID：11803389
> 
> 赞同：0
> 
> 时间：2012-08-03T21:14:24.837
> 
> 标签：c#, asp.net, error-handling, enterprise-library

我正在使用一个利用企业库记录错误的 C# 应用程序。如何以编程方式读取错误？我想用它填充一个网格。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T00:05:21.307

你可以看看[Microsoft Log Parser](http://www.microsoft.com/en-us/download/details.aspx?id=24659)；根据您的 LogEntry 的输出格式，它可能会有所帮助。它基本上允许您使用类似 SQL 的语法查询各种数据格式。

另一种选择是查看[EntlibContrib 项目中的](http://entlibcontrib.codeplex.com)[LogParser](http://entlibcontrib.codeplex.com/wikipage?title=LogParser41&referringTitle=Home)功能，它更适合企业库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T09:18:32.653

企业库处理将日志条目写入日志，可以将其写入许多不同类型的日志（事件日志、文件等）。因此，这取决于*您*将日志条目写入的位置。

如果您正在写入事件日志， http: [//msdn.microsoft.com/en-us/library/k6b9a7h8 (v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/k6b9a7h8(v=vs.80).aspx)

# asp.net-mvc - 依赖关系中断后，outputcached 操作结果是否*立即*过期？

> ID：11803390
> 
> 赞同：0
> 
> 时间：2012-08-03T21:14:32.613
> 
> 标签：asp.net-mvc, asp.net-cache

我希望设置依赖于缓存对象的视图，以便当它们*过期或从缓存*中显式删除时，缓存的结果会立即过期，这样就不会呈现过时的 HTML。

为此，我将使用：

[this.Response.AddCacheItemDependencies(myCacheKeysArray);](http://msdn.microsoft.com/en-us/library/h3ee2kh2.aspx)

是否保证永远不会返回过时的操作结果？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T13:41:01.653

答案是不。操作结果 outputcached 过期之前需要很长时间。在我的电脑上 15 秒，但这可能会因机器和可用资源等某些因素而异。

# javascript - 悬停选择以显示隐藏的项目

> ID：11803391
> 
> 赞同：0
> 
> 时间：2012-08-03T21:14:32.477
> 
> 标签：javascript, jquery, show-hide

我正在尝试设置一个菜单选择，类似于加拿大梅赛德斯-奔驰在您选择汽车时的菜单选择，并且有多个车身选项。（http://www.mercedes-benz.ca/content/canada/mpc/mpc_canada_website/en/home_mpc/passengercars.flash.skipintro.html）。

我在这里创建了它[http://jsfiddle.net/sofew/db2BF/3/](http://jsfiddle.net/sofew/db2BF/3/) 我想将鼠标悬停在轿跑车标题上，信息和图片将更改为轿跑车列表项。

我尝试了各种形式的 jquery，但我似乎无法让它按我希望的方式工作。有人可以指出我正确的方向。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T22:05:12.763

如果您希望根据您悬停的元素显示菜单，则需要使用 AJAX。您可以使用 jQuery 中的 load() 方法用 AJAX 查询的返回值填充选定元素。

这意味着您只需要一个隐藏元素，当触发 onhover 事件时，div 被清除，填充 AJAX 数据，然后显示。您只需将车辆的 ID 或名称传递给接受 AJAX 查询的方法，以便它可以返回相关数据。

如果您指定服务器端语言，如果您不熟悉 AJAX 调用，我可能会给您一个更具体的示例。

编辑：

Ajax 真的很容易做到！Ajax 所做的只是调用 Web 服务器上的一个函数，然后获取该调用的结果并将其放在页面的某个位置，而无需重新加载页面本身。如果您在 Linux 上使用 PHP，那么假设您想在页面上显示当前服务器时间。你可以做一个这样的功能......

```
public function WhatTimeIsIt()
{
    return time();
} 
```

然后在您的页面上创建一个 id 为“时间”的 div。然后你需要做的就是在你的 jQuery 中，使用下面的调用：

```
[event handler] {
    $('#time').load([path to the WhatTimeIsIt() function]);
} 
```

并且当该给定事件处理程序被触发时，您的时间 div 将更新以包含当前服务器时间。一个简单的例子，但是如果你创建了一个以汽车 ID 作为参数的函数，获取关于汽车的所有信息并将其格式化为漂亮的 HTML 并返回，你就会得到你的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T23:00:37.773

我做了一个你可以使用的演示：http: [//jsfiddle.net/DFXZn/22/](http://jsfiddle.net/DFXZn/22/)。

我建议使用 $.ajax 来获取内容。访问此处了解 ajax 调用：[http](http://api.jquery.com/category/ajax/) ://api.jquery.com/category/ajax/ 。让我知道这是否有帮助。快乐编码！

# sql-server - 访问前端 SQL 后端安全连接

> ID：11803394
> 
> 赞同：1
> 
> 时间：2012-08-03T21:14:43.990
> 
> 标签：sql-server, sql-server-2005, ms-access

我需要一个客户端的 Access 前端和 SQL 2005 后端。我想要求他们拥有一个静态 IP，然后我会为该 IP 打开一个端口。但他们也想要移动，所以当他们不在办公室时，他们的 IP 会发生变化。

还有其他方法可以保护连接吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T16:31:46.893

我看不出这个问题有任何问题或问题。请注意，您可以记住，根据您请求的设置，移动设备的 IP 地址无关紧要。

最重要的是设备可以连接到相关 SQL 服务器的 IP 地址（并​​且该地址不太可能更改 - 或者至少不会经常更改）。

> 所以当他们不在办公室时，他们的 IP 会改变。

这个问题更有意义。用于连接 SQL 服务器的内部 IP 地址可以是服务器的 unc 路径名（上面带有 SQL）。但是，通常只使用本地网络上服务器的 IP 地址也可以。所以一个典型的地址是 192.168.1.100。

因此，您的 Access 前端可以链接到上述 IP 地址（我假设您在启动时有一些 SQL 重新链接代码）。

当您走出办公室和本地网络时，您当然有多种选择。

您可以按照您的建议在 SQL 服务上打开一个端口以允许传入连接。这可能不是一个好主意。最好从该设备设置某种类型的 VPN 回到您的办公室网络。设置好 VPN 连接后，链接到固定内部 IP 地址的前端应该继续工作（并且您可以使用相同的内部地址）。

但是，如果没有 VPN，那么您当然可以让 Access 前端“重新链接”到您办公室网络的外部公开 IP 地址。这将要求您打开一个端口并将路由器上的一个端口转发到运行 SQL Server 的机器上。而且您必须打开 sql server 的默认端口。默认值为 1433 - 但如前所述，将 SQL 服务器开放到狂野的互联网并不是一个好主意。上次我这样做时，在几分钟之内，互联网上的自动“机器人”已经尝试登录（并且机器人正在测试所有最常见的 sql 登录 + 最常见的密码）。因此，以这种方式打开 sql server 端口是高风险的冒险。

因此，这里最好的方法是某种类型的 SSL 隧道，或连接到您的办公室网络的 VPN，而且额外的部分是您可能不必将前端重新链接到不同的 IP 地址，因为一旦设置了“隧道”到您的办公室，然后网络设置的结果，包括从您的笔记本电脑使用打印机等，因此应该适用于您连接到互联网的任何地方。

# bash - 在 sed 或 awk 中将字符串大写

> ID：11803395
> 
> 赞同：20
> 
> 时间：2012-08-03T21:14:57.547
> 
> 标签：bash, sed, awk

我想在 bash 脚本中大写三种类型的字符串。我认为 sed/awk 是我最好的选择，但我不确定。考虑到以下要求，最好的方法是什么？

1.  单个词，
    例如 `taco -> Taco`

2.  由连字符分隔的多个单词，
    例如 `my-fish-tacos -> My-Fish-Tacos`

3.  多个单词用下划线分隔，
    例如 `my_fish_tacos -> My_Fish_Tacos`

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-08-03T21:36:55.550

无需使用捕获组（尽管`&`在某种程度上是一个）：

```
echo "taco my-fish-tacos my_fish_tacos" | sed 's/[^ _-]*/\u&/g' 
```

输出：

```
Taco My-Fish-Tacos My_Fish_Tacos 
```

转义的小写“u”将匹配子字符串中的下一个字符大写。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-03T21:33:40.133

使用 awk：

```
echo 'test' | awk '{
     for ( i=1; i <= NF; i++) {
         sub(".", substr(toupper($i), 1,1) , $i);
         print $i;
         # or
         # print substr(toupper($i), 1,1) substr($i, 2);
     }
}' 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-08-03T21:23:28.953

尝试以下操作：

```
sed 's/\([a-z]\)\([a-z]*\)/\U\1\L\2/g' 
```

它适用于我使用 GNU sed，但我认为 BSD sed 不支持`\U`和`\L`.

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-03T23:41:34.850

这是一个不使用 的解决方案，并非`\u`所有 seds 都通用。

将此文件保存到`capitalize.sed`中，然后运行`sed -i -f capitalize.sed FILE`

```
s:^:.:
h
y/qwertyuiopasdfghjklzxcvbnm/QWERTYUIOPASDFGHJKLZXCVBNM/ 
G 
s:$:\n:
:r
/^.\n.\n/{s:::;p;d}
/^[^[:alpha:]][[:alpha:]]/ {
    s:.\(.\)\(.*\):x\2\1: 
    s:\n\(..\):\nx: 
    tr
}

/^[[:alpha:]][[:alpha:]]/ {
    s:\n.\(.\)\(.*\)$:\nx\2\1:
    s:..:x:
    tr
}
/^[^\n]/ {
    s:^.\(.\)\(.*\)$:.\2\1:
    s:\n..:\n.:
    tr
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-02-06T17:32:37.030

alinsoar 令人兴奋的解决方案在 Plan9 sed 中根本不起作用，或者在busybox sed 中正确。但是您仍然应该尝试弄清楚它应该如何做它的事情：您将学到很多关于 sed 的知识。

这是一个不那么聪明但更容易理解的版本，它至少可以在 Plan9、busybox 和 GNU sed（可能还有 BSD 和 MacOS）中运行。Plan9 sed 需要在命令的匹配部分删除反斜杠`s`。

```
#! /bin/sed -f

y/PYFGCRLAOEUIDHTNSQJKXBMWVZ/pyfgcrlaoeuidhtnsqjkxbmwvz/

s/\(^\|[^A-Za-z]\)a/\1A/g
s/\(^\|[^A-Za-z]\)b/\1B/g
s/\(^\|[^A-Za-z]\)c/\1C/g
s/\(^\|[^A-Za-z]\)d/\1D/g
s/\(^\|[^A-Za-z]\)e/\1E/g
s/\(^\|[^A-Za-z]\)f/\1F/g
s/\(^\|[^A-Za-z]\)g/\1G/g
s/\(^\|[^A-Za-z]\)h/\1H/g
s/\(^\|[^A-Za-z]\)i/\1I/g
s/\(^\|[^A-Za-z]\)j/\1J/g
s/\(^\|[^A-Za-z]\)k/\1K/g
s/\(^\|[^A-Za-z]\)l/\1L/g
s/\(^\|[^A-Za-z]\)m/\1M/g
s/\(^\|[^A-Za-z]\)n/\1N/g
s/\(^\|[^A-Za-z]\)o/\1O/g
s/\(^\|[^A-Za-z]\)p/\1P/g
s/\(^\|[^A-Za-z]\)q/\1Q/g
s/\(^\|[^A-Za-z]\)r/\1R/g
s/\(^\|[^A-Za-z]\)s/\1S/g
s/\(^\|[^A-Za-z]\)t/\1T/g
s/\(^\|[^A-Za-z]\)u/\1U/g
s/\(^\|[^A-Za-z]\)v/\1V/g
s/\(^\|[^A-Za-z]\)w/\1W/g
s/\(^\|[^A-Za-z]\)x/\1X/g
s/\(^\|[^A-Za-z]\)y/\1Y/g
s/\(^\|[^A-Za-z]\)z/\1Z/g 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-04T07:05:52.790

这可能对您有用（GNU sed）：

```
echo "aaa bbb ccc aaa-bbb-ccc aaa_bbb_ccc aaa-bbb_ccc"  | sed 's/\<.\|_./\U&/g'
Aaa Bbb Ccc Aaa-Bbb-Ccc Aaa_Bbb_Ccc Aaa-Bbb_Ccc 
```

# c++ - 源文件和头文件

> ID：11803398
> 
> 赞同：0
> 
> 时间：2012-08-03T21:15:16.730
> 
> 标签：c++, c

我在理解源文件和头文件方面遇到了困难。认为

1）我有一个源文件（`functions.cpp`），它在位置包含名为“int add（int x，int y）”的函数`/Users/xyz/Desktop/functions.cpp`。

2）`functions.h`包含源文件（functions.cpp）中函数**声明**的头文件（）放在`/Users/xyz/Documents/function.h`

3)其他`main.cpp`包含'main()'函数的源文件()需要调用'functions.cpp'中定义的'add()'函数。源文件'main.cpp'位于`/Users/xyz/Downloads/main.cpp`

我将这些文件放在不同的位置，以便更好地理解这些概念。

那么，我如何链接`function.cpp`到`main.cpp`使用`functions.h`.

```
 #include "   " 
```

我应该在上面使用什么路径`include`？

另外，据我了解，.h 文件提供了在其他地方**定义**的函数的**声明**，并且编译器需要声明才能调用在其他一些文件中**定义的函数或尚未****定义**的函数。是对的吗？如果我错了，请纠正我。

 ******* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-03T21:21:24.563

```
#include "functions.h" 
```

您的代码不应该**知道**您选择如何排列源代码树。硬编码路径是为了赢得任何必须维护此代码的人的仇恨（包括六个月后的你）。

你的构建系统——不管它是什么——可以处理这些路径。这可能很简单：

```
g++ -I/Users/xyz/Documents -c functions.cpp 
```

您对声明/定义如何工作的陈述基本上是正确的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-03T21:20:30.503

你的第一个问题没有答案。C++ 没有定义如何找到头文件，这取决于编译器，它们的做法都略有不同。如果您想要答案，您必须在编译器的文档中查找详细信息。我建议您将所有内容都放在同一个目录中，不要再担心了。

在你问题的第二部分，你的理解对我来说似乎很好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T21:19:30.650

您应该在 main 中包含头文件的确切路径：

```
#include "/Users/xyz/Documents/function.h" 
```

希望这有帮助。

问候。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-03T21:20:43.513

您包含`functions.h`in`functions.cpp`并`main.cpp`使用，`#include`然后编译两者`main.cpp`和`functions.cpp`。然后链接器链接两个生成的目标文件。您在 main.cpp 中包含 functions.h 将允许您从 main.cpp 文件中的 functions.h 调用函数

至于文件的路径，只要您向编译器指定查找代码所需的路径就可以了。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-03T21:21:38.307

您可以使用完整路径

```
#include "/Users/xyz/Documents/function.h" 
```

或相对路径（通常更可取）

```
#include "../Documents/function.h" 
```

`.obj`当您链接最终可执行文件时，不要忘记指定文件的完整或相对路径；）******

# c# - 如何检查协议缓冲区消息中是否指定了值（或消息）？

> ID：11803400
> 
> 赞同：1
> 
> 时间：2012-08-03T21:15:27.543
> 
> 标签：c#, protocol-buffers

如果 IMessage 中的某些字段或子消息的 IsOptional 属性设置为 true，如何检查它是否已指定？

```
pbMsg.DescriptorForType.FindFieldByName("some_field_name").IsOptional == true 
```

因为如果不是，那么访问它或其子字段（或子消息）会导致异常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T00:39:34.130

使用`pbMsg.HasField(...)`. 以下是对象浏览器文档中`IMessage.HasField(...)`关于此方法的说明：

> 如果设置了给定字段，则返回 true。这完全等同于调用该字段对应的生成的“Has”属性。

请注意，这是使用 protobuf-csharp 库。

# matrix - 给定一个 3x3 矩阵，我怎样才能只穿过最长的对角线？

> ID：11803404
> 
> 赞同：0
> 
> 时间：2012-08-03T21:16:37.330
> 
> 标签：matrix, 2d, traversal, diagonal

给定一个 3x3 矩阵，我怎样才能只穿过最长的对角线？

举个例子：

```
1 2 3
4 5 6
7 8 9 
```

我要穿越1,5,9

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T21:22:37.207

假设您的矩阵是一个二维数组，称为`matrix`：

```
for (int i = 0; i < matrix.length; i++) {
    // do something with entry matrix[i][i]
} 
```

应该是你要找的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-14T11:48:54.217

创建一个函数，其中参数为：数组、行数和列数。因此，我们可能会收到对角线的持续值。对角线存在的值是行索引和列索引相同的值。

```
X . . . .
. X . . . 
. . X . .
. . . X .
. . . . X

void diagonalPrint(int a[100][100], int noOfRows, int noOfCols)
{
    for(int i=0; i<noOfRows && i<noOfCols ; i++)
    {
        printf("%d", a[i][i]);
    }
} 
```

此外，要打印反向对角线，即

```
. . . . . X
. . . . X .
. . . X . .
. . X . . .
. X . . . .
X . . . . .
void diagonalPrint(int a[100][100], int noOfRows, int noOfCols)
{
    for(int i=0; i<noOfRows && noOfCols==0 ; i++)
    {
        printf("%d", a[i][noOfCols--]);
    }
} 
```

# plone - collective.tabr kupu 修改

> ID：11803405
> 
> 赞同：0
> 
> 时间：2012-08-03T21:16:39.723
> 
> 标签：plone

我正在使用collective.kuputabs 模块并添加了collective.tabr 插件，这样我就可以创建一个包含多个选项卡的页面。它工作正常。但是，我在选项卡旁边看到了项目符号，我想删除它们。这是它的外观快照：

![快照](../Images/50e7ec7bda3e90f02b260437e656a395.png)

此代码将存储在哪里？Tabs 是 Kupu 可视化编辑器中的一个库。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T21:31:47.280

使用 Firebug 探索 CSS，然后在 ploneCustom.css (ZMI>portal_skins>custom) 或您自己的自定义主题产品中覆盖它。

# arrays - 计算反转？

> ID：11803406
> 
> 赞同：0
> 
> 时间：2012-08-03T21:16:47.553
> 
> 标签：arrays, algorithm

我有这段代码可以计算数组中的反转次数。它适用于小型阵列。

但是对于大小超过 500 的数组，该值与正确值相差 20 -50

```
def merge(left,right):
    result=[]
    i,j,inv=0,0,0
    while i<len(left) and j<len(right):
        if left[i]<right[j]:
            result.append(left[i])
            i=i+1
        else:
            result.append(right[j])
            j=j+1
            inv=inv+len(left)-i 
    result+=left[i:]    
    result+=right[j:]
    return result,inv

def mergesort(li):
    if len(li)<2:
        return li,0
    middle=len(li)//2
    left,invl=mergesort(li[:middle])     
    right,invr=mergesort(li[middle:])
    result,invs= merge(left,right)
    inv=invl+invr+invs
    return result,inv

 if __name__ == '__main__':
    n=int(raw_input())
    ans=[]
    for i in range(n):
        m=int(raw_input())
        li=raw_input().split(' ')
        print len(li)
        result,inversions=mergesort(li) 
        ans.append(inversions)
    for i in range(n):
        print ans[i] 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-04T23:36:56.077

您不需要大型数组来获得错误的反转计数：

```
>>> mergesort([1,1,1,1])
([1, 1, 1, 1], 6) 
```

您的错误是您将所有相等元素对都视为反转，

```
if left[i]<right[j]:
    result.append(left[i])
    i=i+1 
```

应该

```
if left[i] <= right[j]:
    result.append(left[i])
    i=i+1 
```

这样相等的元素就不会被交换并计为倒置。

您收到的短数组不包含重复项，但较大的数组包含。

# .htaccess - 使用 htaccess 从基本 URL 中删除变量

> ID：11803411
> 
> 赞同：2
> 
> 时间：2012-08-03T21:17:38.100
> 
> 标签：.htaccess, url, variables

我一直在尝试重写一个 URL，例如

> www.somesite.com/?x=372

进入一个网址

> www.somesite.com/

我当前的代码似乎不起作用

> 重写引擎开启
> 
> RewriteCond %{QUERY_STRING} x=(.*)
> 
> RewriteRule [http://www.somesite.com/](http://www.somesite.com/) [R=301,L]

我已经查找了无数种尝试使用 htaccess 进行操作的方法，但仍然没有成功。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-04T02:14:06.247

如果您只是想重定向客户端以删除查询字符串（**`?`**URL 中的所有内容），那么您可以尝试以下操作：

```
RewriteEngine On
RewriteCond %{QUERY_STRING} x=(.*)
RewriteRule ^ http://www.somesite.com/? [R=301,L] 
```

看起来，您的大部分内容都是正确的，但是您的规则需要匹配，并且您的目标（`http://www.somesite.com/`）最后需要 a **`?`**，这样重写之前的任何查询字符串都不会被附加。

在 Apache 2.4 或更高版本中，您可以使用 QSD[查询字符串丢弃标志](http://httpd.apache.org/docs/current/rewrite/flags.html#flag_qsd)：

```
RewriteEngine On
RewriteCond %{QUERY_STRING} x=(.*)
RewriteRule .* http://www.somesite.com/ [R=301,L,QSD] 
```

# java - 在java中将“\”替换为“”

> ID：11803414
> 
> 赞同：7
> 
> 时间：2012-08-03T21:17:47.710
> 
> 标签：java, regex, string

我的问题很简单：

如何将**“\”**替换为**“”**？？？

我试过这个：

```
str.replaceAll("\\", ""); 
```

但我得到了例外

```
08-04 01:14:50.146: I/LOG(7091): java.util.regex.PatternSyntaxException: Syntax error U_REGEX_BAD_ESCAPE_SEQUENCE near index 1: 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-08-03T21:21:16.963

如果你*不*为此使用`replaceAll`（它需要一个正则表达式），它会更简单 - 只需使用`replace`（它需要一个纯字符串）。*除非你真的需要*正则表达式，否则不要使用正则表达式形式。它只会让事情变得更复杂。

不要忘记*调用* `replace`or`replaceAll`是没有意义的，因为字符串是不可变的——你需要使用返回结果：

```
String replaced = str.replace("\\", ""); 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-08-03T21:20:20.757

`\\`是`\`在字符串转义之后，这也是正则表达式中的转义字符尝试

```
String newStr = str.replaceAll("\\\\", ""); 
```

（不要忘记分配结果）

此外，如果您使用一些字符串作为需要正则表达式的输入，则使用 IMO 会更安全[`Pattern#quote`](http://docs.oracle.com/javase/6/docs/api/java/util/regex/Pattern.html#quote%28java.lang.String%29)：

```
String newStr = str.replaceAll(Pattern.quote("\\"), ""); 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-08-03T21:19:00.393

你应该试试这个：

```
str.replaceAll("\\\\", ""); 
```

`\`必须在正则表达式中转义=>你应该写，`\\`每个`\`都必须在java中转义=>这就是为什么我们有4`\`

# jasper-reports - 如何将动态 Jasper 4.0 与 Struts2 集成

> ID：11803420
> 
> 赞同：1
> 
> 时间：2012-08-03T21:18:19.397
> 
> 标签：jasper-reports, dynamic-jasper

我在将动态 jasper 4.0 与 struts2 集成时遇到问题。

我在动态碧玉网站上看到了他们给出的例子

它指出

```
<result-type name="dynamic-jasper" class="ar.com.fdvs.dj.struts2.DJStruts2Result"/> 
```

但DynamicJasper4.jar中没有上面的类

任何解决方案或帮助都非常感谢提前感谢

感谢帮助的朋友。

添加 jar 后，我尝试将其与 struts2 集成，但出现错误

没有为“dynamic-jasper”类型定义结果类型

```
<package name="report" extends="struts-default,jasperreports-default">

        <result-types>
            <result-type name="tiles" class="org.apache.struts2.views.tiles.TilesResult"></result-type>
            <result-type name="dynamic-jasper" class="ar.com.fdvs.dj.struts2.DJStruts2Result"/>
        </result-types>

<action name="ShowReport" class="hris.report.action.GetReportAction">
              <result name="success" type="dynamic-jasper">
                <param name="dynamicReport">dr</param>
                <param name="layoutManager">classic</param>
                <param name="format">PDF</param>
            </result>
        </action>
   </package> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T03:42:10.813

struts 2 兼容性有一个额外的依赖项。它没有捆绑在主 jar 中。

[http://archiva.fdvs.com.ar/repository/public1/ar/com/fdvs/DynamicJasper-Struts2/1.3/](http://archiva.fdvs.com.ar/repository/public1/ar/com/fdvs/DynamicJasper-Struts2/1.3/)

# javascript - 变量保持旧值

> ID：11803421
> 
> 赞同：1
> 
> 时间：2012-08-03T21:18:36.407
> 
> 标签：javascript, jquery

每当我第二次单击“#print”按钮时，第一次单击的值会在实际值之前打印出来。

例如：我第一次点击按钮。警报框打印出正确的值（'test1'）。

我第二次点击按钮。警报框打印出第一个值（'test1'），然后我按 OK，然后，警报框打印出第二个值（'test2'）。

任何想法我做错了什么？

```
$(".ipdate").focus(function() {

    /*$('.dateBox').hide();*/

    var tit = $(this).attr('id');
    /*var full = '#'+tit+'B';*/

    $('#dateBox').show();

    $('#print').on('click', function(){

       var bottle = $('.sday').val()+' '+$('.smon').val()+' '+$('.syear').val();
       $('#'+tit).val(bottle);
       alert(tit);

    });

    $('#close').on('click',function() {

         $('#dateBox').hide(); 

    });    
}); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-03T21:21:38.600

您正在注册多个事件，这就是您看到多个操作的原因！你看见了吗？:) 我也有类似的情况，我花了一段时间才把它们找出来。您可以在发布新事件之前取消注册旧事件。

```
 $(".ipdate").focus(function() {

        /*$('.dateBox').hide();*/

        var tit = $(this).attr('id');
        /*var full = '#'+tit+'B';*/

        $('#dateBox').show();

        $('#print').off('click');
        $('#print').on('click', function(){

            var bottle = $('.sday').val()+' '+$('.smon').val()+' '+$('.syear').val();
            $('#'+tit).val(bottle);
            alert(tit);

        });

        $('#close').off('click');
        $('#close').on('click',function() {

           $('#dateBox').hide(); 

        });

    }); 
```

这应该可以解决您的问题。使用`off`将注销旧事件。

# php - 通过 .js 包含或调用 php 或 html 文件

> ID：11803427
> 
> 赞同：-3
> 
> 时间：2012-08-03T21:19:14.240
> 
> 标签：php, javascript, html

我有一个 js 文件，其中包含用于大约 600 页的网站的导航代码。现在我想更改菜单（颜色、背景、链接等），我不想将 JS 文件编辑为此处的代码就像在菜单中使用图像..所以我在想我将创建一个 php 文件或 html 文件，然后在该 js 文件中调用它。这有可能吗？

请指教。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T21:26:15.137

您可以让 js 呈现 iframe 而不是 img 并将 url 传递给 php/html.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T21:31:58.813

您需要了解 PHP、HTML 和 JS 之间的区别。它们各自在网络编程中占据不同的领域。PHP 用于服务器端逻辑，HTML 是一种结构语言，而 JS 是一种面向动作的语言，旨在在页面中存在的 HTML 之上运行（并且可以在 JS 中呈现）。

所有程序员都曾试图像你一样“破解”代码，试图找到一种创可贴来解决复杂的解决方案。这是不值得的。在最好的情况下，您将失去性能，并且在绝大多数情况下要么彻底失败，要么失去浏览器兼容性和用户界面质量。

简而言之，花点时间编辑 JS。您始终可以对图像进行查找/替换以将其剥离并在其位置插入 CSS 类声明。做对了，以后你会省去一个大麻烦。

# css - 同一html元素上的CSS3转换延迟

> ID：11803428
> 
> 赞同：0
> 
> 时间：2012-08-03T21:19:14.660
> 
> 标签：css, transition

如何在同一元素上从一个 css 属性到另一个 css 属性的转换延迟，我想让它先转换宽度，然后转换 div 元素的高度

```
<div  class="rect"id="box2"></div>​ 
```

这是CSS

```
.rect{
        margin-top:50px;
        width:10px;
        height:80px;
        background-color:black;

  }
    #box2{

         transition:all 1s ease-in-out ;
        -webkit-transition:all 1s ease-in-out ;
        -moz-transition:all 1s ease-in-out ;

    }

    #box2:hover{
          width:300px;
           height:200px;
    }​ 
```

此代码使高度和宽度一起工作，#box2 中的转换延迟使整个转换延迟！我应该怎么办？

这是示例[http://jsfiddle.net/bBnQW/](http://jsfiddle.net/bBnQW/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T21:56:59.943

据我所知，你没有。你有 CSS3 转换延迟属性，我想你已经尝试过了。如果您找不到解决方案，我的建议是使用 jQuery 解决方案来实现该效果。您只需几行代码就可以做到这一点（甚至可能比 CSS 中的代码更少）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T08:27:33.383

```
#box2{

             transition:width 1s ease-in-out, height 1s ease-in-out 1s ;
            -webkit-transition:width 1s ease-in-out, height 1s ease-in-out 1s ;
            -moz-transition:width 1s ease-in-out, height 1s ease-in-out 1s ;

        } 
```

如果这是你想要的...

# git - 在 github 上分叉一个存储库

> ID：11803430
> 
> 赞同：2
> 
> 时间：2012-08-03T21:19:25.080
> 
> 标签：git, github

我有权访问雇主的 Github 帐户下的私有 Github 存储库，用于我的个人 github 登录。我分叉了存储库，以便我可以在我的个人 github 帐户中处理它，然后在那里提交。一切都按预期工作，但是当有人提交并推送到雇主的私有 github 存储库时，它不会出现在我的分叉 github 存储库中。从源到分叉的 repo 没有合并选项。人们如何保持同步？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T21:23:20.500

GitHub 分叉不会自动同步。您必须将更改合并到您的个人存储库，然后将它们推送到您的存储库和 GitHub。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T21:39:10.413

当您派生一个存储库时，它会创建一个重复的存储库，您可以将更改推送到该存储库。但是，它独立于原始存储库，因此不会自动更新自身。如果您想从雇主的存储库中获取最新更改，您首先必须将雇主的存储库添加为远程存储库

```
git remote add [name] [url to repository] 
```

您选择要提供的名称，但这`upstream`是一个常见的选择。现在，要获取更改，请运行

```
git pull upstream [branch] 
```

通常，您将拉动`master`分支。此时，git 将尝试自动将您雇主存储库中的更改与您的工作版本合并。您可能需要处理一些冲突。一旦合并成功并且冲突已经解决（如果有的话），您可以将更改推送到您的分叉存储库

```
git push origin 
```

# c# - C#从数据表中删除所有值都为零的列

> ID：11803434
> 
> 赞同：-2
> 
> 时间：2012-08-03T21:19:38.450
> 
> 标签：c#, asp.net

我需要从数据表中删除所有行的值为 0 的列。或者换句话说，其中 sum 为 0。

```
1 2  5   99.9 442.25 221 0
1 2 77.7 889  898     55 0
9 0 66   42    55      0 0 
```

在此示例中，应删除最后一列。

这该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T21:46:15.760

```
DataTable dt;
int dataWidth = 5;  //use a loop or something to determine how many columns will have data
bool[] emptyCols = new bool[datawidth];  //initialize all values to true
foreach(Row r in dt)
{
    for(int i = 0; i < dataWidth; i++)
    {
        if(r[i].Contents != 0))
           emptyCols[i] = false;
    }
}

for(int i = 0; i < emptyCols.Length; i++)
{
     if(emptyCols[i])
        dt.Columns.RemoveAt(i);
} 
```

我还没有测试过，但我用 excel 列做了类似的事情。基本逻辑就在那里，我不知道我所有的增量或行编号是否完全正确。我相信我使用的大多数功能也是可用的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T22:29:59.587

第一的：

```
protected Boolean IsColumnZero(DataTable dt, string columnName)
{
    foreach (DataRow row in dt.Rows) 
        if ((int)row[columnName] != 0) return false;        
    return true;
} 
```

然后你可以：

```
 //create table
    DataTable table = new DataTable();
    table.Columns.Add("caliber", typeof(int));
    table.Columns.Add("barrel", typeof(int));

    table.Rows.Add(762, 0);
    table.Rows.Add(556, 0);
    table.Rows.Add(900, 0);

    //delete zero value columns
    List<string> columnsToDelete = new List<string>();

    foreach (DataColumn column in table.Columns) 
        if (IsColumnZero(table, column.ColumnName)) 
            columnsToDelete.Add(column.ColumnName);

    foreach (string ctd in columnsToDelete) table.Columns.Remove(ctd);

    //show results
    GridView1.DataSource = table;
    GridView1.DataBind(); 
```

# c++ - LD_PRELOAD 应该加载模块还是只使用模块来替换符号

> ID：11803439
> 
> 赞同：0
> 
> 时间：2012-08-03T21:20:05.887
> 
> 标签：c++, linux, ld-preload

我们有一个用 g++ 编译的多线程 c++ 应用程序，在嵌入式 powerpc 上运行。为了在持续集成测试中对此进行内存泄漏测试，我们创建了一个堆分析器，它加载了`ld_preload`.

我们希望保证`ld_preloaded`模块中的函数在其他任何事情发生之前被调用（包括创建静态对象等......）。更重要的是，我们希望在进程退出之前调用另一个函数，以便堆分析器可以输出其结果。`ld_preloaded`我们看到的问题是，在我们的模块中发生任何事情之前，我们的应用程序中的向量是在全局文件范围内创建的。向量的大小在 main 中增长。在关闭时`destructor`，我们预加载模块中的函数在向量被销毁之前被调用。

有什么方法可以编写一个预加载的模块来在其他任何事情之前和之后运行一个函数？我们尝试过使用`__attribute__((constructor))`但`destructor`没有成功。

回到问题标题，我开始怀疑`ld`在解析后续模块加载的符号时只查看预加载的模块。它实际上并没有首先加载预加载的模块。任何人都可以为我们阐明这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T00:08:14.873

最初，您无法控制来自不同翻译单元的构造函数的顺序。因此，这也扩展到共享库。

但是，较新版本的`GCC`支持将优先级参数应用于`constructor`属性，这应该允许您控制指定函数何时相对于其他全局构造函数运行。未指定时的默认优先级是最大优先级值。因此，您在下面设置的任何优先级都应该使您的构造函数在它们之前运行，而您的析构函数在它们之后运行。

```
static int initialize () __attribute__((constructor(101)));
static int deinitialize () __attribute__((destructor(101)));

static int initialize () {
    puts("initialized");
}

static int deinitialize () {
    puts("deinitialized");
} 
```

`101`似乎是允许指定的最低优先级。`65535`是最高的。较低的数字首先执行。

# c++ - 如何将 Delphi Stream 传递给 ac/c++ DLL

> ID：11803444
> 
> 赞同：5
> 
> 时间：2012-08-03T21:20:28.180
> 
> 标签：c++, delphi, stream

是否可以将 Delphi 流（TStream 后代）传递给用 c/c++ 编写的 DLL？DLL 将使用 Microsoft c/c++ 编写。如果这不可能，我们使用 C++ Builder 来创建 DLL 怎么样？或者，是否有任何可以在 Microsoft C/C++ 和 Delphi 之间共享的 Stream (FIFO) 类？

谢谢！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-03T23:32:02.230

您可以使用[IStream](http://docwiki.embarcadero.com/Libraries/en/System.Types.IStream)和[TStreamAdapter](http://docwiki.embarcadero.com/Libraries/en/System.Classes.TStreamAdapter)来做到这一点。这是一个简单的示例（在 D2007 和 XE2 中测试）：

```
uses
  ActiveX;

procedure TForm1.DoSomething;
var
  MemStream: TMemoryStream;
  ExchangeStream: IStream;
begin
  MemStream := TMemoryFile.Create;
  try
    MemStream.LoadFromFile('C:\Test\SomeFile.txt');
    MemStream.Position := 0;
    ExchangeStream := TStreamAdapter.Create(MemStream) as IStream;
    // Pass ExchangeStream to C++ DLL here, and do whatever else
  finally
    MemStream.Free;
  end;
end; 
```

以防万一，如果您需要另辟蹊径（`IStream`从 C/C++ 接收），您可以使用[TOleStream](http://docwiki.embarcadero.com/Libraries/en/Vcl.AxCtrls.TOleStream)从中获取`IStream`Delphi `TStream`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-03T22:31:56.603

*   Microsoft C/C++ 编译的代码不能直接在 Delphi 对象上调用方法。例如，您必须将方法包装起来并呈现给 C++ 代码`interface`。
*   由 C++ Builder 编译的代码可以直接在 Delphi 对象上调用方法。

一般而言，包装一个 Delphi 类并将其呈现为一个类`interface`并不是一件容易的事。不能只通过接口公开原始方法的一个原因是 Delphi 方法使用了`register`Embarcadero 编译器专有的调用约定。您需要使用 Microsoft 编译器可以理解的[调用约定](http://docwiki.embarcadero.com/RADStudio/en/Procedures_and_Functions#Calling_Conventions)，例如`stdcall`.

另一个并发症伴随着例外。您需要确保您的接口方法没有抛出异常，因为您的 C++ 代码无法捕获它们。一种选择是使用 Delphi 的[`safecall`](http://docwiki.embarcadero.com/RADStudio/en/Procedures_and_Functions#Calling_Conventions)调用约定。`safecall`调用约定`stdcall`只是增加了将异常转换为`HRESULT`值的扭曲。

所有这些在概念上都相当直截了当，但可能需要一定数量的乏味样板代码。

值得庆幸的是，在 的情况下`TStream`，您可以使用`TStreamAdapter`将 Delphi 流公开为 COM `IStream`。事实上，这个小类的源代码展示了如何处理我上面描述的问题。

# hadoop - 在 Mapreduce/Hadoop 中加入两个数据集

> ID：11803450
> 
> 赞同：10
> 
> 时间：2012-08-03T21:20:56.823
> 
> 标签：hadoop, join, mapreduce, distributed

有谁知道如何在 Hadoop 中实现两个数据集之间的 Natural-Join 操作？

更具体地说，这就是我真正需要做的：

我有两组数据：

1.  点信息存储为 (tile_number, point_id:point_info) ，这是一个 1:n 键值对。这意味着对于每个 tile_number，可能有几个 point_id:point_info

2.  存储为 (tile_number, line_id:line_info) 的行信息，这又是一个 1:m 键值对，对于每个 tile_number，可能有多个 line_id:line_info

如您所见，两个数据集之间的 tile_numbers 相同。现在我真正需要的是根据每个 tile_number 加入这两个数据集。换句话说，对于每个 tile_number，我们有 n point_id:point_info 和 m line_id:line_info。我想要做的是将所有 point_id:point_info 对与每个 tile_number 的所有 line_id:line_info 对连接起来

* * *

为了澄清，这里有一个例子：

对于点对：

```
(tile0, point0)
(tile0, point1)
(tile1, point1)
(tile1, point2) 
```

对于线对：

```
(tile0, line0)
(tile0, line1)
(tile1, line2)
(tile1, line3) 
```

我想要的是如下：

对于瓷砖 0：

```
 (tile0, point0:line0)
 (tile0, point0:line1)
 (tile0, point1:line0)
 (tile0, point1:line1) 
```

对于瓷砖 1：

```
 (tile1, point1:line2)
 (tile1, point1:line3)
 (tile1, point2:line2)
 (tile1, point2:line3) 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-03T21:42:46.800

使用将标题作为键和点/线作为值输出的映射器。您必须区分点输出值和线输出值。例如，您可以使用特殊字符（即使二进制方法会更好）。

所以地图输出将是这样的：

```
 tile0, _point0
 tile1, _point0
 tile2, _point1 
 ...
 tileX, *lineL
 tileY, *lineK
 ... 
```

然后，在 reducer 中，您的输入将具有以下结构：

```
 tileX, [*lineK, ... , _pointP, ...., *lineM, ..., _pointR] 
```

并且您必须将值分开点和线，进行叉积并输出每对叉积，如下所示：

```
tileX (lineK, pointP)
tileX (lineK, pointR)
... 
```

如果您已经可以轻松区分点值和线值（取决于您的应用程序规范），则不需要特殊字符 (*,_)

关于你必须在减速器中做的交叉产品：你首先遍历整个值列表，将它们分成 2 个列表：

```
 List<String> points;
 List<String> lines; 
```

然后使用 2 个嵌套的 for 循环进行叉积。然后遍历结果列表并为每个元素输出：

```
tile(current key), element_of_the_resulting_cross_product_list 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T23:30:01.797

所以基本上你在这里有两个选择。Reduce side join 或 Map Side Join 。

在这里，您的组键是“平铺”。在单个减速器中，您将获得点对和线对的所有输出。但是您必须在阵列中缓存点对或线对。如果任何一对（点或线）都非常大，无法放入单个组键（每个唯一的瓦片）的临时数组内存中，那么此方法对您不起作用。请记住**，您不必在内存中保存单个组密钥（“tile”）的两个密钥对，一个就足够了**。

如果单个组密钥的两个密钥对都很大，那么您将不得不尝试 map-side join。但是它有一些特殊的要求。但是，您可以通过一些 map/reduce 作业对两个数据运行相同数量的 reducer 来对数据进行一些预处理，从而满足这些要求。

# javascript - Django 设计模式 - 在加载时填充客户端 JavaScript 变量的方法

> ID：11803452
> 
> 赞同：0
> 
> 时间：2012-08-03T21:21:03.010
> 
> 标签：javascript, python, ajax, django, web-applications

假设我有一个要使用 JavaScript 以某种方式呈现的书籍列表，而不是仅仅执行以下操作；

```
{% for book in books %}
  <div class="book-container">
    <div class="title">{{ book.title }}</div>
    <div class="author">{{ book.author }}</div>
  </div>
{% endfor %} 
```

我想将书籍的 json 表示加载到 JavaScript 变量中（可能是我在客户端代码中定义的 Book 对象列表），并使用 JavaScript 以更“花哨”的方式呈现它。

无论如何，我正在考虑在页面加载时发送一个发布请求以获取数据并将其加载到变量中。有一个更好的方法吗？这些是我最初的幼稚猜测。

**编辑**：本质上，我想了解一种合法/推荐的方式来获取上下文服务器端并将其加载到页面加载时的 JavaScript 变量客户端。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T21:24:39.523

为什么不直接在模板中将其输出为 JSON 呢？这将节省额外的 POST 请求。

```
<script type="text/javascript">
    var books = {{ my_json_data }}
</script> 
```

Now`books`是一个全局 JS 变量，可以从您的其他脚本中访问。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T21:25:02.463

看看提供 REST 框架的 django-tastypie。您可能还想查看backbone.js 和一般的AJAX

[https://github.com/toastdriven/django-tastypie](https://github.com/toastdriven/django-tastypie)

[http://backbonejs.org/](http://backbonejs.org/)

# javascript - 在流星应用程序上使用 twitter 进行身份验证

> ID：11803454
> 
> 赞同：0
> 
> 时间：2012-08-03T21:21:11.773
> 
> 标签：javascript, node.js, twitter-oauth, meteor

流星 js 的路线图上是否有 Twitter 身份验证？如果没有，我该如何实施？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T02:54:19.093

Mike Bannister (@possibilities) 一直在针对 auth 分支开发这个 oauth1 拉取请求：[https ://github.com/meteor/meteor/pull/251](https://github.com/meteor/meteor/pull/251)

我相信进展顺利。所以它应该很快就会到来，我猜可能当 auth 被释放到 master 时。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T13:51:48.140

Auth 分支合并到 devel 分支。

可以直接从 Meteor devel 分支签出。

```
cd ~
git clone git://github.com/meteor/meteor.git
cd meteor
git checkout -t origin/devel
./admin/generate-dev-bundle.sh
./install.sh 
```

这些链接可以帮助您使用 twitter（和 facebook 等）实现身份验证代码。

[Accounts API](http://auth-docs.meteor.com/#accounts_api "帐户 API") 和 [Auth 入门](https://github.com/meteor/meteor/wiki/Getting-Started-with-Auth "开始使用身份验证")（已弃用但仍然有效）

# java - 通过javascript用java处理excel文件

> ID：11803459
> 
> 赞同：0
> 
> 时间：2012-08-03T21:21:34.450
> 
> 标签：java, javascript, web-services, excel

我正在开发一个带有 html/javascript/ajax 客户端的 Java 网络服务。用户是否可以通过任何方式在输入时提供本地 excel 文件并将其发送到服务器端？

我知道由于安全问题（C：/fakepath）我无法获取文件的路径，并且通过 ajax 请求传递 excel 文件的内容似乎不起作用。

我的问题有解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T21:38:37.210

您可以使用普通的 html 上传机制上传文件：

您的 HTML 将如下所示：

```
<html>
...
Select a file to upload: <br />
<form action="UploadServlet" method="post"
                    enctype="multipart/form-data">
<input type="file" name="file" size="200" />
<br />
<input type="submit" value="Upload File" />
</form>
...
</body>
</html> 
```

以及相应的jsp代码来处理上传。[您可以在此处](http://www.tutorialspoint.com/jsp/jsp_file_uploading.htm)查看示例。

在服务器上拥有 excel 文件后，您可以随意处理它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T21:44:17.120

我想你知道如何通过HTML 中的`<form>`and标签上传文件，例如：`<input>`

```
<form method="post" enctype="multipart/form-data" action="upload_script.php">
<input type="file" name="myfile" />
<input type="submit" value="Upload" />
</form> 
```

异步执行此操作的技巧是在标签中使用`<iframe>`and`target`属性，例如：`<form>`

```
<form method="post" enctype="multipart/form-data" action="upload_script.php" target="myiframe">
<input type="file" name="myfile" />
<input type="submit" value="Upload" />
</form>

<iframe name="myiframe"></iframe> 
```

可以将帧的大小设置为 0x0 像素，因此用户不知道它的存在。提交表单时会`iframe`加载脚本页面。JavaScript 可以用来回调父框架（即原始窗口）来指示上传是成功还是失败等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T13:29:47.940

实际上，我确实用新的 XMLHttpRequest 版本 2 找到了解决这个问题的方法。

有关更多信息，请参阅[**此**](http://www.technicaladvices.com/2011/12/10/ajax-file-upload-to-a-java-servlet-in-html5/)

# makefile - 用于将 ROOT 文件与“hadd”合并的 Makefile

> ID：11803461
> 
> 赞同：1
> 
> 时间：2012-08-03T21:21:36.163
> 
> 标签：makefile, root-framework

我目前正在编写一个 Makefile，它有几个几乎相同的规则/食谱来`.root`使用`hadd`. 有没有一种好方法可以将这些压缩成更少的规则？我不确定`%`这些案例有多大用处，`data[4-6].done`因为数字 4-6 与目录路径中的 1-4 不匹配。

非常感谢

```
[Makefile]

DIR=/hdfs/store/user/$(USER)

DATA.root : data1.done data2.done data3.done data4.done data5.done data6.done
    hadd DATA.root $(addsuffix .root,$(basename $^))
    rm $(addsuffix .root,$(basename $^))
    rm $^

data1.done :
    hadd data1.root $(DIR)/de2012A_loose2Aug-DATA/1/*.root
    touch data1.done

data2.done :
    hadd data2.root $(DIR)/de2012A_loose2Aug-DATA/2/*.root
    touch data2.done

data3.done :
    hadd data3.root $(DIR)/de2012B_loose2Aug-DATA/1/*.root
    touch data3.done

data4.done :
    hadd data4.root $(DIR)/de2012B_loose2Aug-DATA/2/*.root
    touch data4.done

data5.done :
    hadd data5.root $(DIR)/de2012B_loose2Aug-DATA/3/*.root
    touch data5.done

data6.done :
    hadd data6.root $(DIR)/de2012B_loose2Aug-DATA/4/*.root
    touch data6.done 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T21:48:51.320

我会尝试一下，但你可能会重新考虑你的设计。

```
DIR=/hdfs/store/user/$(USER)

DATA.root : data[1-6].done
    hadd DATA.root $(^:.done=.root)
    rm $(^:.done=.root)
    rm $^

data1.done data2.done : PATHLEFT=A
data3.done data4.done data5.done data6.done : PATHLEFT=B
data1.done : PATHRIGHT=1
data2.done : PATHRIGHT=2
data3.done : PATHRIGHT=1
data4.done : PATHRIGHT=2
data5.done : PATHRIGHT=3
data6.done : PATHRIGHT=4

data%.done : 
    hadd data1.root $(DIR)/de2012$(PATHLEFT)_loose2Aug-DATA/$(PATHRIGHT)/*.root
    touch $@ 
```

（是的，我知道，我可以再挤出两三行，但我不想让它太神秘。）

# magento - magento https 链接

> ID：11803464
> 
> 赞同：1
> 
> 时间：2012-08-03T21:21:38.770
> 
> 标签：magento, https

Magento 具有内置功能，可将 https 用于我的帐户页面、登录页面和结帐页面。但是，我们发现只有图像和脚本链接动态更改为 https。所有页面链接在这些安全区域中都没有改变，而是有 http 链接。我们正在使用 Magento 1.7

我们正在这里寻找可能的答案或一些实际帮助，并愿意为此付费。

有什么建议么？

# backbone.js - 如何将模型绑定到视图？

> ID：11803479
> 
> 赞同：0
> 
> 时间：2012-08-03T21:23:03.617
> 
> 标签：backbone.js

初始化视图时，如何将模型绑定到创建的特定视图？视图当前在应用程序启动时初始化。另外，如何将模型绑定到集合？(function ($) { //在 dom 中加载所有内容

```
//Creation, Edit, Deletion, Date
var Note = Backbone.Model.extend({
    defaults: {
        text: "write here...",
        done: false
    },

    initialize: function (){
        if(!this.get("text")){
            this.set({"text": this.default.text});
        }
    },

    edit: function (){
        this.save({done: !this.get("done")});
    },

    clear: function (){
        this.destroy();
    }
});

var NoteList = Backbone.Collection.extend({
    model:Note
});

var NoteView = Backbone.View.extend ({
    el: "body",

    initialize: function(){
        alert("initialized");
        var list = new NoteList;    
        return list;
    },

    events: {
        "click #lol" : "createNote"
    },

    createNote : function(){
        var note = new Note;
        this.push(note);
        alert("noted");
    }
});

var ninja = new NoteView; 
```

})(jQuery);

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T22:26:24.563

# 更新

我刚刚看了@James Woodruff 的回答，这促使我再看一下你的代码。我第一次看的不够仔细，但我仍然不确定你在问什么。如果您要问如何让模型或视图侦听并处理另一个触发的事件，请查看 James 的调用示例，`bind()`让视图侦听模型上的`change`（或`change:attr`）事件（尽管我建议`on()`使用的`bind()`，取决于您使用的 Backbone 版本）。

但是基于再次查看您的代码，我修改了我的答案，因为我看到您尝试以没有意义的方式做一些事情，所以也许这就是您要问的。

# 新答案

这是您问题中的代码，我添加了评论：

```
var NoteView = Backbone.View.extend ({

    // JMM: This doesn't make sense. You wouldn't normally pass `el`
    // to extend(). I think what you really mean here is
    // passing el : $( "body" )[0] to your constructor when you
    // instantiate the view, as there can only be one BODY element.

    el: "body",

    initialize: function(){
        alert("initialized");

        // JMM: the next 2 lines of code won't accomplish anything.
        // Your NoteList object will just disappear into thin air.
        // Probably what you want is one of the following:
        // this.collection = new NoteList;
        // this.list = new NoteList;
        // this.options.list = new NoteList;

        var list = new NoteList;    

        // Returning something from initialize() won't normally
        // have any effect.        

        return list;
    },

    events: {
        "click #lol" : "createNote"
    },

    createNote : function(){
        var note = new Note;

        // JMM: the way you have your code setup, `this` will be
        // your view object when createNote() is called. Depending
        // what variable you store the NoteList object in (see above),
        // you want something here like:
        // this.collection.push( note ).

        this.push(note);
        alert("noted");
    }
}); 
```

这是您的代码的修订版本，其中包含对我评论的内容的更改：

```
var NoteView = Backbone.View.extend( {

  initialize : function () {

    this.collection = new NoteList;    

  },
  // initialize

  events : {

    "click #lol" : "createNote"

  },
  // events

  createNote : function () {

    this.collection.push( new Note );

    // Or, because you've set the `model` property of your
    // collection class, you can just pass in attrs.

    this.collection.push( {} );

  }
  // createNote

} );

var note = new NoteView( { el : $( "body" )[0] } ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T03:07:33.120

您必须将视图绑定到模型，因此当模型更新 [触发事件] 时，绑定到模型的所有相应视图也会更新。集合是类似模型的容器......例如：`Comments Collection`包含类型的模型`Comment`。

为了将视图绑定到模型，它们都必须被实例化。例子：

```
var Note = Backbone.Model.extend({

    defaults: {
       text: "write here..."
    },

    initialize: function(){

    },

    // More code here...

});

var NoteView = Backbone.View.extend({

    initialize: function(){
       // Listen for a change in the model's text attribute
       // and render the change in the DOM.
       this.model.bind("change:text", this.render, this);
    },

    render: function(){
       // Render the note in the DOM
       // This is called anytime a 'Change' event
       // from the model is fired.
       return this;
    },

    // More code here...

}); 
```

现在是集合。

```
var NoteList = Backbone.Collection.extend({

    model: Note,

    // More code here...

}); 
```

现在是实例化所有内容的时候了。

```
var Collection_NoteList = new NoteList();
var Model_Note = new Note();
var View_Note = new NoteView({el: $("Some Element"), model: Model_Note});

// Now add the model to the collection
Collection_NoteList.add(Model_Note); 
```

我希望这能回答你的问题，或者引导你走向正确的方向。

# paypal - Payflow Advanced：安全令牌？

> ID：11803481
> 
> 赞同：4
> 
> 时间：2012-08-03T21:23:10.250
> 
> 标签：paypal, payflowlink

我正在尝试将 PayPal Payflow Advanced 集成到我的网站中，我很困惑......我在管理界面中启用了安全令牌，但我不清楚这是从他们身边还是我的身边生成的？

我以前从来没有这样做过，真的，开发人员指南和 sdks 甚至论坛帖子都感觉非常难以捉摸......我只是不确定这个过程......

似乎我可以嵌入一个 iframe，然后他们处理其余的，但其中一个参数是 SECURETOKEN 和 SECURETOKENID。我不知道我从哪里得到这些值？我在我的帐户的任何贝宝设置中都没有看到它，所以我认为这可能是我需要生成的东西？但是，如果是，那么我不知道我应该发送什么样的令牌？只是任何旧的随机字符串？

抱歉……但是，尽管我已经用谷歌搜索并浏览了贝宝文档，但我真的不清楚这一点……另外，我认为我的 PMDD 出现问题了，所以我希望在使用这台电脑之前得到一个解决方案然后把它吹出窗外……

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-15T03:49:08.077

这是一篇旧文章，但答案是您必须使用服务器端代码执行令牌请求。这篇文章中有一个安全令牌请求的 PHP 示例：

[https://go.developer.ebay.com/developers/community/blogs/ppintegrationsnate/new-payflow-gateway-tutorial](https://go.developer.ebay.com/developers/community/blogs/ppintegrationsnate/new-payflow-gateway-tutorial)

这是为了 PayFlow Pro 集成。有关请求的语法，另请参阅[https://www.paypalobjects.com/webstatic/en_US/developer/docs/pdf/payflowgateway_guide.pdf](https://www.paypalobjects.com/webstatic/en_US/developer/docs/pdf/payflowgateway_guide.pdf)的第 2 章。您可能需要查看产品令牌请求中所需内容的详细信息。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-06T18:32:50.873

如果您还没有，请尝试在“PayPal Payments Advanced 和 PayPal Payments Pro (Payflow Pro/Link)”部分下查看此处</p>

[https://www.x.com/developers/community/blogs/ppintegrationsnate/nates-blog-home-page](https://www.x.com/developers/community/blogs/ppintegrationsnate/nates-blog-home-page)

和

[https://www.x.com/developers/community/blogs/pp_integrations_preston/testing-paypal-payflow-gateway](https://www.x.com/developers/community/blogs/pp_integrations_preston/testing-paypal-payflow-gateway)

谢谢

# windows - 如何自动 FTP 我正在编辑的文件

> ID：11803482
> 
> 赞同：41
> 
> 时间：2012-08-03T21:23:13.347
> 
> 标签：windows, ftp, filezilla

我试图弄清楚如何使用 Filezilla 进行 autoftp。是否有任何其他程序可以立即执行此操作？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2013-07-11T12:36:40.173

我使用[WinSCP](http://winscp.net/eng/index.php)是因为它有一些惊人的好处。我用 WinSCP 连接到我的 FTP 服务器并让它监视我的本地文件夹`/website/public_html`。

我在本地文件夹中所做的任何更改都会由 WinSCP 自动上传到我的 FTP 服务器。该功能称为*保持远程目录最新*：
[http ://winscp.net/eng/docs/task_keep_up_to_date](http://winscp.net/eng/docs/task_keep_up_to_date)

至于 SCSS，我也使用它：
我有一个脚本可以打开一个控制台窗口来查看我的`/website/scss`文件并将它们编译为`/website/public_html/styles/`. WinSCP 看到 CSS 文件已更改（或为新文件）并自动上传。

注意：唯一的缺点是您无法访问您的`error_log`，因为它是由 PHP 在服务器上自动生成的。为此，您可以轻松地实例化另一个 WinSCP 以连接到您的网站。现在您有 1 个 WinSCP 监控您的本地文件夹和 1 个 WinSCP，您可以在其中访问您的站点地图。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-08-03T21:27:45.170

如果“autoftp”的意思是“每当我保存它时更新服务器上的文件”并且您正在使用代码，那么我会推荐精彩的[Notepad++](http://notepad-plus-plus.org/)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-11-07T18:15:25.767

Notepad++ 对于这个特定的功能来说当然很棒，它甚至可以保存从远程服务器访问和修改的任何内容的缓存。

然而（对我来说）缺点是 Notepad++ 不会自动上传预处理的 CSS 文件，如 .scss 或 .less。我实际上尝试在 Notepad++ 中打开生成的 .css 文件以模仿编辑它们的行为，但这仍然在此过程中增加了一个额外的步骤。我必须单击选项卡并手动保存它们（在“您的文件已更改提示”之后）。

目前，在我进行更改后，我点击到 FZ 并手动上传文件。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2016-06-03T08:29:19.063

此响应较晚，但希望它对那些希望在每次保存本地编辑的文件时通过 Filezilla 的“您要覆盖”提示的人有所帮助。不幸的是，Filezilla 开发人员坚决反对将此行为设为可选。这对许多人来说是个问题，尤其是在桌面空间有限的情况下，因为每次出现提示时，都必须打开隐藏的 filezilla 窗口才能单击确定。

无论如何，答案是 WinSCP。它也是免费的，并且与 filezilla 非常相似，我无需学习即可立即使用它。

干杯!

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2017-08-01T18:36:37.507

**使用NetBeans IDE**有一种更简单的方法，可以选择在保存、手动或运行时使用**FTP**或**SFTP**上传文件

* * *

1.  右键单击您的项目，然后单击**属性**
2.  点击第二类**运行配置**
3.  运行方式：选择**远程网站（FTP、SFTP）**
4.  项目网址：放置您的网站**实时链接**，例如 www.example.com
5.  上传文件：选择**保存**
6.  **远程连接**> 管理 > 添加 > 连接名称（放一个） > FTP

* * *

现在添加您的 ftp 详细信息。**确保您的初始目录路径正确**，（您的网站路径），这样您就不会意外替换文件管理器中其他网站的任何文件

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-09-17T14:15:40.153

不幸的是，filezilla 上没有选项可以在文件更改时自动同意上传。

Mobaxtern 可以做到这一点。当文件已更改时，您可以选择“始终上传”。

您可以使用任何编辑器编辑文件，无论何时保存，它都会上传。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2017-09-08T08:36:13.810

我喜欢使用[WebDrive](https://southrivertech.com/products/webdrive/)（40 美元），它将远程服务器 (S)FTP/SSH/Cloud 安装到本地驱动器（例如 X：在 Windows 上）。然后你可以做任何事情来驱动 X：就好像它是一个本地驱动器一样，WebDrive 会自动将更改上传到远程服务器。

# c# - 如何使用 RestSharp 解析 JSON？

> ID：11803485
> 
> 赞同：12
> 
> 时间：2012-08-03T21:23:17.700
> 
> 标签：c#, xamarin.android, restsharp

```
var client = new RestClient("http://10.0.2.2:50670/api");

var request = new RestRequest("Inventory", Method.GET);

request.OnBeforeDeserialization = resp => { resp.ContentType = "application/json"; };

// execute the request to return a list of InventoryItem
RestResponse<JavaList<InventoryItem>> response = (RestResponse<JavaList<InventoryItem>>)client.Execute<JavaList<InventoryItem>>(request); 
```

返回的内容是一个 JSON 字符串，一个对象数组。以下是它的简短摘录：

```
[{"Id":1,"Upc":"1234567890","Quantity":100,"Created":"2012-01-01T00:00:00","Category":"Tequila","TransactionType":"Audit","MetaData":"PATRON 750ML"},{"Id":2,"Upc":"2345678901","Quantity":110,"Created":"2012-01-01T00:00:00","Category":"Whiskey","TransactionType":"Audit","MetaData":"JACK DANIELS 750ML"},{"Id":3,"Upc":"3456789012","Quantity":150,"Created":"2012-01-01T00:00:00","Category":"Vodka","TransactionType":"Audit","MetaData":"ABSOLUT 750ml"}] 
```

错误信息：

> 由于对象的当前状态，操作无效

这里有什么问题？My`InventoryItem`具有与 JSON 字符串中的每个对象相同的属性。我错过了一步吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-04T19:13:50.207

我怀疑在 RestSharp 中使用的 SimpleJson 无法反序列化为 JavaList。

首先我会尝试反序列化为：

```
List<InventoryItem> 
```

如果做不到这一点，我推荐[ServiceStack.Text](https://github.com/ServiceStack/ServiceStack.Text) - .Net 最快的 JSON 库；并做：

```
var response = client.Execute(request);
var thingYouWant = JsonSerializer.DeserializeFromString<List<InventoryItem>>(response.Content); 
```

这实际上是我自己做的。

**编辑（感谢评论员）：** 在较新的版本中，现在是：

```
var deserializer = new JsonDeserializer();
deserializer.Deserialize<List<InventoryItem>>(response); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-08-26T22:23:26.387

使用自动魔法施法失败，我在紧要关头使用它：

```
var rc = new RestClient("https://api-ssl.bitly.com");
var rr = new RestRequest("/v3/link/clicks?access_token={access_token}&link={bitlyUrl}", Method.GET);

rr.AddUrlSegment("bitlyUrl", bitlyUrl);
rr.AddUrlSegment("access_token", BityAccessToken);

var response = rc.Execute(rr);
dynamic json = Newtonsoft.Json.Linq.JObject.Parse(response.Content);
var clicks = Convert.ToInt32(json.data.link_clicks.Value); 
```

# c++ - C++中的假想误差函数

> ID：11803487
> 
> 赞同：4
> 
> 时间：2012-08-03T21:23:27.340
> 
> 标签：c++, math

是否有一个 GPL 库或一段免费可用的代码来实现想象的错误函数：

```
erfi(x)=-i*erf(i*x) 
```

`x`任何复数（或至少是实数）在哪里`i`，虚数单位是哪里？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-23T03:43:09.140

实数和复数参数的所有常用误差函数的免费/开源 C++ 实现，包括 erfi 和缩放 erfi（以消除 erfi 的指数增长）（Dawson 函数），包括对实数参数的 erfi 的优化，是可在[http://ab-initio.mit.edu/Faddeeva获得](http://ab-initio.mit.edu/Faddeeva)

（请注意，此实现实际上用于即将发布的 SciPy 0.12 版本，替换早期版本中存在准确性问题的 complex-erf 代码：[http](http://projects.scipy.org/scipy/ticket/1207) ://projects.scipy.org/scipy/ticket/1207 ）

（不幸的是，评估复杂参数的特殊函数并不像将复数插入实参数的代码那样简单，这就是为什么 Boost 的实值 erf 中的模板在这里没有帮助。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-03T22:24:19.970

在发现 Boost 不支持 erf 函数的复数后，我进行了更多搜索。我发现了几个每年 100 美元的 C++ 数学软件包，它们不能满足您的需求。然后我查看了其他语言，发现 Python 中的 SciPy 包在它的 erf 函数中确实支持复数。

```
>>> from scipy.special import erf
>>> from numpy import complex
>>> erfi = lambda z: complex(0.0, -1.0)*erf(complex(0.0, 1.0)*z)
>>> z_in = complex(0.75, 1.25)
>>> erfi(z_in)
(0.09511238... + 1.0828473...j) 
```

与 wolphramalpha 中的 erfi(0.75+1.25*i) 完全匹配。

因此，要在 C++ 中使用它，您可以通过 Boost.Python、Cython 或各种其他包来集成它。有关在 C++中包装 Python 的一些代码示例，请参阅[在 C++ 中嵌入 Python 。](http://wangqiang8511.com/2012/07/18/embedding-python-in-c-application/)请注意，这确实增加了在您的系统上安装 Python 和 SciPy 的要求，但我没有看到许多不基于订阅并采用复杂参数的实现，因此您可能会受限于其他语言包而没有自己实现它。

**!EDIT**下面显示的答案不扩展到复数**编辑！**

如果您使用 C++，请尝试查看 Boost 的数学库（[此处](http://www.boost.org/doc/libs/1_37_0/libs/math/doc/sf_and_dist/html/math_toolkit/special/sf_erf/error_function.html)定义了 erf，并且 boost 支持复数，因此您应该能够直接将其与复数一起使用以执行 erfi 计算的右侧：i*erf( i*x)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-02T18:11:52.563

对于 的实际值`x`，您可以使用实现[Dawson 函数](https://www.gnu.org/software/gsl/doc/html/specfunc.html#dawson-function)的 GNU Scientific Library (GSL) 。将此函数的值乘以 2π ^(-1/2) exp( *x* ² )，得到 erfi( *x* )。

# java - 这是我的代码，它仍然显示 gprs 可用，我使用模拟器为什么它显示？

> ID：11803490
> 
> 赞同：-1
> 
> 时间：2012-08-03T21:23:31.817
> 
> 标签：java, android

嗨，我正在使用模拟器来测试应用程序，但是当我运行应用程序时，它仍然显示 gprs 可用，知道为什么吗？在模拟器中没有 gprs 那么为什么它的显示 gprs 可用？ConnectivityManager.TYPE_MOBILE 是什么意思？是指只有gprs？？

```
adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
 adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
  sp.setAdapter(adapter);

sp.setOnItemSelectedListener(new OnItemSelectedListener() {

  public void onItemSelected(AdapterView<?> parent, View view, int position, long 
 id) {

    if (position == 0) 

    {
        final ConnectivityManager connMgr = (ConnectivityManager) 
                getSystemService(Context.CONNECTIVITY_SERVICE);

         android.net.NetworkInfo mobile =

connMgr.getNetworkInfo(ConnectivityManager.TYPE_MOBILE);
         if( mobile.isAvailable() ){
            Toast.makeText(LoginScreen.this, " GPRS Connection Found "
 , Toast.LENGTH_LONG).show();
            }
         else if( !mobile.isAvailable() ){

                Toast.makeText(LoginScreen.this, "No GPRS 
Connection Found " , Toast.LENGTH_LONG).show();
                }

    }

    if (position == 1) 
    {
        final ConnectivityManager connMgr = (ConnectivityManager)
                getSystemService(Context.CONNECTIVITY_SERVICE);

        final android.net.NetworkInfo wifi =
        connMgr.getNetworkInfo(ConnectivityManager.TYPE_WIFI);
        if( wifi.isAvailable() ){
            Toast.makeText(LoginScreen.this, " Wifi Found" ,   
 Toast.LENGTH_LONG).show();
            }
        else if( !wifi.isAvailable() ){
            Toast.makeText(LoginScreen.this, "No Wifi found " ,
  Toast.LENGTH_LONG).show();
            }

  }

    if (position == 3) 

    {
        final ConnectivityManager connMgr = (ConnectivityManager) 
    getSystemService(Context.CONNECTIVITY_SERVICE);

         BluetoothAdapter mBluetoothAdapter = 
    BluetoothAdapter.getDefaultAdapter();    
            if (mBluetoothAdapter.isEnabled()) {
                Toast.makeText(LoginScreen.this, " BlueTooth Found" , 
   Toast.LENGTH_LONG).show();

            }else if( !mBluetoothAdapter.isEnabled() ){
                Toast.makeText(LoginScreen.this, "No BlueTooth found " 
   , Toast.LENGTH_LONG).show();
                }

    }

   }
   public void onNothingSelected(AdapterView<?> arg0) {

   }

 }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T21:37:32.723

`ConnectionManager`不检查提供类型 ( `TYPE_MOBILE`)的类型。它只报告存在数据连接，而不管底层协议如何。

[NetworkInfo.getSubTypeName()](http://developer.android.com/reference/android/net/NetworkInfo.html#getSubtypeName())将具有网络的子类型。

还有一个类似问题的[现有](https://stackoverflow.com/a/6784395/681040)答案。

# ruby-on-rails - Rails 2缓存视图助手不保存到memcached

> ID：11803491
> 
> 赞同：0
> 
> 时间：2012-08-03T21:23:38.043
> 
> 标签：ruby-on-rails, caching, memcached

我有块

```
<% cache 'unique_key', 60.minutes.from_now do %>
  ...
  <% begin %>
    ...
  <% rescue %>
    ...
  <%end>
<% end %> 
```

如果缓存中没有先前的值，我试图通过仅缓存（从而允许用户查看）救援消息来使实现更加健壮。目前，如果开始块中的响应由于任何原因发回错误，我正在缓存用户查看的错误消息。我宁愿回退到旧的缓存数据。我无法克服的问题是-

`cache`数据存储在哪里？

每次我尝试`Rails.cache.read 'unique_key'`，我都会`nil`回来。不是`cache`将值存储在 memcached 中吗？有没有办法可以将缓存转储到屏幕上？

我无法遵循 Rails 源。在我看来，`fragment_for`方法中的方法`cache`是 rails 3 的东西，因此，我没有进一步调试。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T22:59:57.153

视图助手根据`cache`您给它的参数构造一个缓存键。它至少会在键中添加前缀“views/”。

您可以使用`fragment_cache_key`帮助程序找出您对`cache`. 如果您只想获取当前存储的内容，请`read_fragment`执行此操作。当然，对于您的特定用法，如果您的块再次执行，那是因为 60 分钟已到：缓存的值已从 memcache 中删除。

使用 memcache 存储，您无法列出当前存储中的所有键 - 这只是您的 memcached 本身不支持的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T22:23:43.503

我通过使用 fetch 方法解决了这个问题。我用了

```
<% Rails.cache.fetch('unique_key', :expires_in => 60.minutes){  
   begin
     ...
   rescue
     ...
   end
} %> 
```

当我这样做时，我可以成功找到密钥。我仍然不确定为什么在添加`fragment_cache_key`我找到的数据后找不到缓存的数据，但使用`Rails.cache.fetch`似乎可以解决问题。

# mysql - 使用 OR 时的 SQL 性能问题

> ID：11803493
> 
> 赞同：2
> 
> 时间：2012-08-03T21:23:40.630
> 
> 标签：mysql, sql, performance

我有这个查询：

```
SELECT stringa FROM table WHERE stringb = 'x' OR stringb = 'y' OR stringb = 'z' 
```

这只是一个缩短版本，实际查询在一个查询中有超过 1,000 个“OR”子句。

执行需要几分钟，这是不好的。

我试过一次做一个查询，如下所示：

```
SELECT stringa FROM table WHERE stringb = 'x'
SELECT stringa FROM table WHERE stringb = 'y'
SELECT stringa FROM table WHERE stringb = 'z' 
```

但这需要更长的时间。我还尝试了一个大查询，如下所示：

```
SELECT stringa FROM table WHERE stringb = 'x'
UNION
SELECT stringa FROM table WHERE stringb = 'y'
UNION
SELECT stringa FROM table WHERE stringb = 'z' 
```

但这又花了更长的时间。

如果有人对提高性能有任何建议，将不胜感激。我的桌子是 MyISAM，如果它很重要的话。

编辑：

这是表的结构：

列：

```
key (CHAR PRIMARY), stringa (CHAR), stringb (CHAR) 
```

行看起来像这样：（key - stringa - stringb）

```
key - a - b
key - a - c
key - a - d
key - a - e
key - a - f
key - b - b
key - b - c
key - b - d
key - c - c
key - c - d
key - c - f
key - d - f 
```

等等等等..有将近一百万行。

我需要选择所有“stringa”，其中“stringb”等于 a OR b OR c 等。

当然 stringa 和 stringb 不仅仅是 'a' 和 'b'，它们包含长度在 3 到 80 个字符之间变化的 CHAR。

我希望在某种程度上有所帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T21:35:00.747

首先，将列数据类型更改为`varchar`. 尽管您可能听说过`char`所谓的速度更快，但代价是节省一点 CPU 来大幅增加 I/O（一个非常糟糕的交易）。

其次，`stringb`如果列上还没有索引，则需要一个索引。索引不必是唯一的。

第三，许多 DBMS 对数千个 OR 条件都没有问题，尽管通常这样的事情表示为`WHERE stringb IN ('a', 'b', 'c', 'd', 'e' ...)`.

最后，在许多情况下，如果不能提供卓越的性能（尽管在某些 DBMS 或情况下可能），JOIN 至少会提供更高的清晰度和重用性。例如，许多人做的一件事是创建一个字符串拆分函数，当以格式传递一个字符串时，它会`'a,b,c,d,e'`返回一个包含单独行中的每个项目的行集。加入这个行集就很容易了，只要客户端可以构造要拆分的字符串，您就可以使您的查询能够被动态驱动。

这是进行 JOIN 的一种可能方法：

```
CREATE TEMPORARY TABLE Keys (
   Value varchar(30)
);

INSERT Keys VALUES ('x');
INSERT Keys VALUES ('y');
INSERT Keys VALUES ('z');

SELECT T.SomeColumns
FROM
   YourTable T
   INNER JOIN Keys K
      ON T.stringb = K.Value 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T01:44:16.190

首先，正如其他人所建议的那样，对于此数据，VARCHAR 比 CHAR 更好。CHAR 不会更快。

考虑按 KEY(stringb) PARTITIONS 8 对表进行分区（这只是任意的）并在 (stringb,stringa) 上添加索引。这将减少 IO，并且覆盖索引将使返回数据更快。

并行运行相等查找。跑步：

```
SELECT stringa FROM table WHERE stringb  in('x',...)
SELECT stringa FROM table WHERE stringb  in('y',...)
SELECT stringa FROM table WHERE stringb  in('z',...) 
```

在三个线程中会带来显着的性能提升。

您只需要将结果重新组合在一起，这并不困难。如果您想查看 Shard-Query 可以使用 IN() 列表自动并行化查询：

[http://code.google.com/p/shard-query](http://code.google.com/p/shard-query)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-03T22:02:20.257

您需要在 stringb 列上创建索引。

您的问题更多的是您正在执行全表扫描，而不是“或”的效率。在“in”语句中路由值列表是传统的做法。但是，在某些数据库中，这对性能没有影响。

另外，您的字段是用 char 还是 varchar 声明的？如果它们是 char，那么这可能是性能问题的根源。这些将用空格填充，大大增加了存储空间并延长了比较。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-03T22:12:00.563

尝试

```
SELECT stringa FROM table WHERE stringb = 'x' 
UNION ALL
SELECT stringa FROM table WHERE stringb = 'y' 
UNION ALL
SELECT stringa FROM table WHERE stringb = 'z' 
```

或者

```
SELECT stringa FROM table WHERE stringb in ( 'x', 'y', 'z') 
```

如果你真的有一千个 OR 条件，或者@ErikE 的解决方案。

UNION ALL 应该比 UNON 快得多，因为您的选择是互斥的，您不需要像 union 那样删除查询。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-03T23:09:42.517

虽然我认为@HLGEM 第二个答案最好，但您也可以尝试在查询中使用正则表达式来查询列 stringb。

# mysql - 将 sql 文件转储到 Heroku 中的 ClearDB

> ID：11803496
> 
> 赞同：17
> 
> 时间：2012-08-03T21:24:02.503
> 
> 标签：mysql, ruby-on-rails, ruby, heroku

我有一个 sql 文件，我想使用 ClearDB 插件将其转储到我在 Heroku 中的 MySQL 数据库中。在本地倾倒时，我会执行以下操作：

```
mysql -u my_user -p mydatabasename < my_dump_file.sql 
```

但是，我不知道如何将其转储到 Heroku MySQL 数据库。我只知道这个地址：

```
mysql://b5xxxxx7:37xxxad@us-cdbr-east.cleardb.com/heroku_xxxxxx?reconnect=true 
```

但如果我尝试这样做：

```
mysql://b5xxxxx7:37d8faad@us-cdbr-east.cleardb.com/heroku_xxxxxx?reconnect=true < my_dump_file.sql 
```

我明白了`No such file or directory`。

我该怎么做？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-08-03T21:41:10.187

你也许可以做这样的事情

```
mysql --host=us-cdbr-east.cleardb.com --user=b5xxxxx7 --password=37d8faad --reconnect heroku_xxxxxx < my_dump_file.sql 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-09-09T23:19:47.700

它不适用于新版本的mysql。所以我尝试了以下代码：

```
mysql -h us-cdbr-east.cleardb.com -u b5xxxxx7 -p heroku_xxxxxx < my_dump_file.sql 
```

然后它会询问您的密码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-07-22T13:49:10.683

当我一次输入所有内容时出现错误，所以我首先将其分解为小步骤，我输入了我的 MySQL 详细信息，如下所示：

```
mysql --host=us-cdbr-iron-east-02.cleardb.net --user=xxxxxxxxxxxxxx --password=xxxxxxxx --reconnect 
```

然后，一旦我进入，我就更改为数据库，如下所示：

mysql> `use heroku_xxxxxxxxxx;`

然后我现在像这样导入 SQL 文件：

mysql>`source path/to/file.sql;`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-12-12T13:43:03.453

我尝试了上面所有的答案，但没有一个工作。

然后我读[了这篇](https://bugs.mysql.com/bug.php?id=73672)文章，我得出结论，我需要在 CMD 上尝试一下（以前我使用 Windows PowerShell 管理员）。

代码中不再有错误。

我使用了这段代码（在前面的评论中提供）

```
mysql -h us-xxxxxx.cleardb.com -u b7xxxxxxx -p heroku_df32xxxxxxx < dbname.sql 
```

# ironworker - 在 IronWorker 上，如何远程构建 Gemfile 中的所有 gem？

> ID：11803497
> 
> 赞同：0
> 
> 时间：2012-08-03T21:24:02.393
> 
> 标签：ironworker, iron.io

这是我的 Gemfile：

```
runtime 'ruby'
file 'Gemfile'
file 'config/database.yml', 'config/'                                                                                                                                         
file 'lib/models.rb', 'lib/'
remote_build_command 'bundle install --standalone'
exec 'my_worker.rb' 
```

remote_build_command`bundle install --standalone`安装了 gem，但它们似乎没有正确加载。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-11T19:59:45.843

根据[文档](http://dev.iron.io/worker/reference/builds/#remote_build)，您现在可以在工作文件中指定一个 gemfile。当被问到这个问题时，我认为这不可用。

```
# example.worker

runtime "ruby"

gemfile "Gemfile"

file "lib/model.rb", "lib"

full_remote_build true

# You can also add gems individually if you don't want to use a separate file.
gem "pg"
gem "aws-sdk" 
```

您无需指定 remote_build_command，而是指定`full_remote_build true`或只是`remote`让 IronWorker 为您设置环境。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T21:24:02.393

`bundle install --standalone`将 gem 安装到`bundle/bundler/setup`目录。因此，在 的顶部`my_worker.rb`，添加以下行：

```
require_relative 'bundle/bundler/setup' 
```

这应该加载你所有的宝石。

# java - 调试时找不到源消息

> ID：11803498
> 
> 赞同：0
> 
> 时间：2012-08-03T21:24:03.410
> 
> 标签：java, eclipse, debugging, singleton, factory-pattern

有人在我的代码中看到什么奇怪的东西吗？这是存储解析器实例的解析器工厂类。我在文本文件中保存了数据库中通常格式的信息对象

```
/table/something/something
nameoftablecolumn/info/info/...

etc. 
```

我有解析这个文本文件的类，解析器可以解析不同的行。例如，如果行开始 /table/ 我将选择调用 getParser("table") 的表解析器。当我想解析视图时，我遇到了一些问题。我试图通过在 Eclipse 中调试来找到它，但它说我**找不到源**并在调试中的操作列表中显示类未找到异常..但程序中没有异常..

当我按 F5 跳转到 ParserFactory 的构造函数时会发生这种情况。
有这个类的代码：

```
/**
 * 
 */
package appInspector.input.parser;

import java.util.HashMap;

import appInspector.input.parser.database.SourceParser;
import appInspector.input.parser.database.TableParser;
import appInspector.input.parser.database.ViewParser;
import appInspector.input.parser.filesystem.DirectoryParser;
import appInspector.input.parser.filesystem.FileParser;

/**
 *     
 */
public class ParserFactory {

    private HashMap<String, IParser> parsers = new HashMap<String, IParser>();

    private ParserFactory() {
        //filesystem
        parsers.put("directory", new DirectoryParser());
        parsers.put("file", new FileParser());
        //table
        parsers.put("table", new TableParser());
        //view
        parsers.put("view", new ViewParser());
        //source
        parsers.put("source", new SourceParser());
    }

    public static ParserFactory newInstance(){
        return new ParserFactory();
    }

    public IParser getParser(String key) {
        IParser parser = parsers.get(key);
        if(parser == null ){
            System.out.println("Nepodporovaný objekt");

        }
        return parser;
    }
} 
```

**编辑：** 我有类似的问题（类似的输出 - 意味着找不到源）。 [Eclipse 调试“找不到源”](https://stackoverflow.com/questions/1960158/eclipse-debugging-source-not-found)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T22:14:04.480

我尝试在我的 Eclipse 版本上复制该问题，但无法复制。我在 Eclipse JUNO，OSX 山狮。

我修改了你的代码来测试它：

```
package com.aj.spring;

import java.util.HashMap;

/**
 *  *  
 */
public class ParserFactory {

    private HashMap<String, IParser> parsers = new HashMap<String, IParser>();

    private ParserFactory() {
        parsers.put("directory", new FileParser());
        parsers.put("file", new FileParser());
        parsers.put("table", new FileParser());
        parsers.put("view", new FileParser());
        parsers.put("source", new FileParser());
    }

    public static ParserFactory newInstance() {
        return new ParserFactory();
    }

    public IParser getParser(String key) {
        IParser parser = parsers.get(key);
        if (parser == null) {
            System.out.println("Nepodporovan objekt");

        }
        return parser;
    }

    public static void main(String[] args) {
        ParserFactory.newInstance();
    }
} 
```

# asp.net-mvc-3 - 使用流行帐户登录

> ID：11803502
> 
> 赞同：0
> 
> 时间：2012-08-03T21:24:17.527
> 
> 标签：asp.net-mvc-3, login, helpers

我想使用其中一个用户帐户（Facebook 或 Google 或其他）轻松注册。最受欢迎的帐户是否存在“LoginHelpers”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T21:35:44.027

你想知道的东西叫做 Oauth。

已经有很多关于如何执行此操作的信息，我很确定 nuget 包可以为您将其包含在您的 mvc 项目中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T22:02:40.353

您可以搜索所谓的 OAuth 身份验证。有许多不同的端点，由您决定要提供哪些端点。

这是一篇文章，其中包含一个有据可查的示例，展示了 MVC3 和 Facebook OAuth 身份验证。

[http://www.codeproject.com/Articles/206707/Simple-net-MVC-3-web-application-with-integrated-f](http://www.codeproject.com/Articles/206707/Simple-net-MVC-3-web-application-with-integrated-f)

* * *

还有许多预打包的库为许多流行的服务提供简单的 OAuth。一种“小工具”。

该博客列出了几个以及一些优点和缺点。

[http://blog.marcmezzacca.com/2012/03/social-authentication-for-net-a-library-comparison/](http://blog.marcmezzacca.com/2012/03/social-authentication-for-net-a-library-comparison/)

# entity-framework-4 - 使用 Code First 从 Entity Framework 4.1 升级到 4.3 时与 Fluent-API 不兼容

> ID：11803503
> 
> 赞同：0
> 
> 时间：2012-08-03T21:24:31.957
> 
> 标签：entity-framework-4

从 EF 4.1 升级到 4.3 后，我突然开始收到以下错误。

> 内部异常：System.Data.SqlClient.SqlException (0x80131904)：操作失败，因为表 'User' 上已存在名称为 'IX_AccountId' 的索引或统计信息。

以下是创建此错误的相关代码。

```
public class Account {

    public Account() {
        Users = new HashSet<User>();
    }

    [Key]
    public int AccountId { get; set; }

    public virtual ICollection<User> Users { get; private set; }

}

public class User {

    [Key]
    public int UserId { get; set; }

    public int AccountId { get; set; }

    public virtual Account Account { get; set; }
}

protected override void OnModelCreating(DbModelBuilder modelBuilder) {

        modelBuilder.Entity<Account>()
            .HasMany<User>(a => a.Users)
            .WithRequired()
            .HasForeignKey(u => u.AccountId);

        modelBuilder.Entity<User>()
            .HasRequired(u => u.Account)
            .WithMany()
            .HasForeignKey(u => u.AccountId);

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T21:24:31.957

事实证明，我现在需要在 `WithMany`上面显式声明导航属性。

这解决了我的问题：

```
 modelBuilder.Entity<User>()
            .HasRequired(u => u.Account)
            .WithMany(a => a.Users)
            .HasForeignKey(u => u.AccountId); 
```

# cocoa - 在 Objective C++ 中传递 C++ 对象

> ID：11803504
> 
> 赞同：0
> 
> 时间：2012-08-03T21:24:33.110
> 
> 标签：cocoa, opencv, xcode4, objective-c++

我看到了一个类似的[问题](https://stackoverflow.com/questions/2262011/adding-c-object-to-objective-c-class)，涉及使用不透明类型，但我不太了解示例代码。

我有一些有效的代码......我有几个 C++ 数据对象作为实例变量存储在我的控制器中。我想符合 MVC，并将所有这些推送到模型对象中，而不是我的控制器中。

所以我现在的作品看起来像：

```
@interface WinController : NSWindowController <NSWindowDelegate>
{
    cv::Mat object;
}
- (void)setObject:(const cv::Mat&)newObject;
@end

@implementation

- (void)setObject:(const cv::Mat&)newObject
{
    object = newObject;
}
@end 
```

这个`setObject:`方法被另一个类的方法调用：

```
- (void)constructObject
{
    cv::Mat object = cv::Mat::zeros(3,3,CV_64F);
    [myController setObject:object];
} 
```

因此，我将 C++ 对象移出控制器并移入模型类。和`@interface`完全`@implementation`一样。只是复制并粘贴到不同的类中。

该`constructObject:`方法更改为：

```
- (void)constructObject
{
    cv::Mat object = cv::Mat::zeros(3,3,CV_64F);
    [myController.myModel setObject:object];
} 
```

现在当我编译时，我收到一个新警告： `Instance method '-setObject:' not found. (return type defaults to 'id')`

很明显，我错过了为什么方法＃1有效而＃2无效的一些微妙之处。

# linux - 在 linux 上卸载

> ID：11803506
> 
> 赞同：3
> 
> 时间：2012-08-03T21:24:35.107
> 
> 标签：linux, installation

我是在 linux 上编译和安装程序的新手。我理解常见的流程是做 `./configure`

`make`

`make install`

我想知道如果我在某处犯错或出现问题，是否有某种方法可以“回滚”。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T21:34:31.283

同意其他答案，我想澄清一下。如果我的理解是正确的，通常`./configure`是一个脚本，可以确保/设置您的系统，以便编译能够正确进行。然后`make`运行一个实际编译的 Makefile。然后`make install`运行 ​​makefile`install`作为参数，它实际上将二进制文件和配置文件复制到适当的（由脚本作者确定）系统目录，这就是为什么经常`make install`必须以提升的权限运行的原因。

通常，make 脚本采用一个`uninstall`参数，该参数实际上会擦除复制到系统目录的所有内容。根据我的经验，这并不总是一个干净的过程。如果不确保自己完美跟踪所有更改并自己编写回滚脚本，就没有防火的回滚方式。

简而言之，尝试`make uninstall`如果这不起作用并且您自己无法弄清楚，请尝试在与特定产品相关的邮件列表或论坛上发帖。

编辑以获取更多信息：`make`只要您保持工作目录与您从哪里运行一样，只需运行即可获得运行程序所需的一切`make`。也就是说，`make`将创建您所有的二进制文件和配置文件等，您可以从该目录中使用该软件。但是，如果您不将内容复制到系统目录（例如使用`make install`. 因此，如果您只是想运行一个独立的二进制文件，而不是其他软件所依赖的软件，那么您实际上不需要运行`make install`，也不必担心回滚。一切都将包含在您的原始工作目录中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T21:31:07.973

如果`make unistall`没有成功，那么您必须自己删除文件（除非有 unistall 脚本。

避免所有混乱的一种好方法是`checkinstall`从源代码安装后使用。这样，它还将为您的系统创建一个包文件，这意味着您将能够从包管理器中卸载软件，例如`apt-get remove my_software`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-03T21:27:10.777

检查 Makefile 脚本是否有

```
make uninstall 
```

目标。找到这些并不罕见。

否则，您可能需要检查东西的安装位置并拥有自己的退出脚本。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-03T21:30:14.410

通常`./configure`接受各种参数。

所以假设你做了一个`make`然后`make install`意识到你想重新配置你的软件，你必须首先使用`uninstall`软件提供的脚本卸载它。

`make uninstall`也可以工作。

# google-apps-script - 自定义函数在电子表格中不起作用

> ID：11803511
> 
> 赞同：7
> 
> 时间：2012-08-03T21:25:13.923
> 
> 标签：google-apps-script, google-sheets, custom-function

我已按照以下说明操作：[https](https://developers.google.com/apps-script/execution_custom_functions) ://developers.google.com/apps-script/execution_custom_functions创建自定义函数。

我的函数甚至教程中的剪切和粘贴都不起作用：这些函数不适用于我的电子表格。我尝试保存版本并发布为网络应用程序 - 没有任何变化。我尝试了 Google Chrome 和 Firefox，结果相同。我在这里错过了一些非常明显的东西吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2017-04-20T00:18:30.627

您需要在自定义函数上方添加带有 @customfunction 的注释。然后，Google 表格会将您的自定义功能添加到自动完成菜单中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-01-31T02:04:14.787

不确定这是否是您遇到的……但发生在我身上的是，我没有在自动完成中看到我的自定义功能，我认为它不起作用。但是如果你只是在一个单元格中输入 =double(A1) （使用官方示例，假设 A1 中有东西......），它会计算！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-10-08T19:26:41.007

您的 Chrome 弹出窗口设置是否确定`customFunction`您在单元格中输入时是否自动完成？如果是这样，您将如何将其添加为设置中的允许例外？在电子表格的工具菜单下选中启用自动完成。

`=myCustomFunction`如果从脚本编辑器运行，我的函数可以正常工作，但在单元格中输入或 `=myCustomFunction(`输入时不会自动完成。

# c# - 提取sql连接字符串的属性

> ID：11803518
> 
> 赞同：11
> 
> 时间：2012-08-03T21:25:36.653
> 
> 标签：c#, substring

我想从连接字符串（字符串变量）中提取服务器和数据库名称。当我们从 DEV 移动到 STAGE 再到 PROD 时，服务器和数据库的名称会发生​​变化。

这是一个例子：

```
Data Source=SERVER_XYZ;Initial Catalog=DATABASE_XYZ;User ID=us;Password=pass

Data Source=SERVER_XYZPQR;Initial Catalog=DATABASE_XYZPQR;User ID=us;Password=pass 
```

注意名称的变化（以及整个字符串的长度）。

如何在不知道长度的情况下捕获数据源和初始目录？这样在表单加载时，它将获取服务器和数据库名称以显示给用户（以便他/她可以看到他/她连接到哪个服务器和数据库？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-08-03T21:38:12.507

您可以使用连接字符串构建器类，该构建器类一旦构建就具有数据源和初始目录属性

[http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlconnectionstringbuilder.aspx](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlconnectionstringbuilder.aspx)

```
string connStr = "Data Source=SERVERx;Initial Catalog=DBx;User ID=u;Password=p"; 

var csb = new SqlConnectionStringBuilder(connStr);

string dataSource = csb.DataSource;
string initialCatalog = csb.InitialCatalog; 
```

让 .net 框架为您完成工作；）不要搞乱子字符串或正则表达式

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-03T21:35:13.867

AC#正则表达式解决方案：

```
String input = "Data Source=SERVER_XYZ;Initial Catalog=DATABASE_XYZ;User ID=us;Password=pass";

// Match the server:
Match serverMatch = Regex.Match(input, @"Source=([A-Za-z0-9_.]+)", RegexOptions.IgnoreCase);

// Match the database:
Match databaseMatch = Regex.Match(input, @"Catalog=([A-Za-z0-9_]+)", RegexOptions.IgnoreCase);

// Get the string
if (serverMatch.Success)
{
  String server = serverMatch.Groups[1].Value;
} 
```

请记住 URL 的有效字符：

```
ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~:/?#[]@!$&'()*+,;= 
```

# javascript - 根据javascript中的时间戳排序

> ID：11803520
> 
> 赞同：1
> 
> 时间：2012-08-03T21:25:47.743
> 
> 标签：javascript, sorting

我的 javascript 中有两个变量。消息函数：`var message` 时间戳函数：（`var date`它是时间戳类型）..

现在我有一个数组，它根据那里的时间戳存储消息。就像是

```
 var input = []; //dynamic array to store both message and date
    var date = new Date(update.data.history[i].timestamp * 1000); //Getting from Json object
    var date_input = date.toLocaleTimeString();
    var message = update.data.history[i].message;
        for (i to length)
    {
        input.push({ key: date_input, value: message });     //Key refers to date, and value to message
    }
   input.sort(sort_by(key,true,parseInt)); 
```

我的功能 sort_by

```
var sort_by = function(field, reverse, primer){

   var key = function (x) {return primer ? primer(x[field]) : x[field]};

   return function (a,b) {
       var A = key(a), B = key(b);
       return (A < B ? -1 : (A > B ? 1 : 0)) * [1, -1][+!!reverse];                  
   }
} 
```

现在，我尝试使用 firebug 进行调试，发现我的排序功能不起作用。我使用时间戳作为键，但仍然没有运气。无论如何我可以根据时间戳对其进行排序然后显示它。**我在 SO 上尝试了其他排序解决方案，但我想当有像时间戳这样的数据类型时还有另一种排序方法？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T22:23:12.967

在对象文字中，您不必引用键：

```
input.push({ key: date_input, value: message }); 
```

但是，您的函数需要三个参数，这些参数不是以类似对象的表示法给出的，因此其含义`key`是未知的，并且会导致 ReferenceError：

```
input.sort(sort_by(key,true,parseInt));
                   ^
ReferenceError：未定义键
```

改为使用字符串作为参数，它应该可以工作：

```
input.sort(sort_by("key",true,parseInt)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T14:33:37.300

排序功能完美运行。当我用 firebug 调试它时，我在控制台上看到即使 date-input 是“6-29-07 am”，它也只将 6 作为“key”，因此那天的每个条目都被分配了同一把钥匙。因此，排序无法提供所需的输出。因此，我在第二行中避开了 new date() 函数，直接将时间戳作为键，进行相应的排序，然后将其转换为日期格式。愚蠢的错误，但需要一些时间。

# svn - SVN 使用批处理文件获取今天的日志。

> ID：11803522
> 
> 赞同：3
> 
> 时间：2012-08-03T21:25:58.110
> 
> 标签：svn, logging, batch-file

我正在尝试编写一个批处理文件，该文件将运行一个计划，它将在 xml 中获取一个日志文件。现在，只要批处理文件运行，它就会在今天得到它。

这是我写的非常基本的内容，也许是我弄错的原因。

```
svn log -v -r {%date%} --xml http://repositorylocation.com > op7.xml 
```

现在，当我这样做时，我不仅得到了我需要的日期，而且得到了当天的三个字母 ancrnom。我需要删除它，但不知道如何。有什么建议吗？

我在 Windows XP 上运行它。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T21:47:41.197

[http://subversion.tigris.org/issues/show_bug.cgi?id=2849](http://subversion.tigris.org/issues/show_bug.cgi?id=2849)

以上似乎表明您可以通过调整您的语言环境来影响日期格式，但这是一个非常糟糕的技巧......如果您获得的日期格式可靠地在月份和日期前面添加 0，那么 hatbyzero 可能会起作用

痛苦但非常可靠的方法是解析 xml，解析日期，然后重新格式化日期，在 xml 中设置值，然后将固定的 xml 写入文件这在 groovy 中使用 xml slurper 可能是可行的。

[http://groovy.codehaus.org/Reading+XML+using+Groovy%27s+XmlSlurper](http://groovy.codehaus.org/Reading+XML+using+Groovy%27s+XmlSlurper)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T21:33:49.490

尝试以下操作：

```
set MONTH=%date:~4,2%
set DAY=%date:~7,2%
set YEAR=%date:~10,4% 
```

这应该分别给你月、日和年。然后你可以在你的日志文件中以任何你想要的方式处理它，即

```
svn log -v -r {%MONTH%-%DAY%-%YEAR%} --xml http://repositorylocation.com > op7.xml 
```

# javascript - BlackBerry 上的 Phonegap/Cordova getDirectory 失败

> ID：11803528
> 
> 赞同：1
> 
> 时间：2012-08-03T21:26:29.337
> 
> 标签：javascript, blackberry, cordova, blackberry-webworks

我有一个可以在 Android 和 iOS 上正常运行的应用程序，但目前在 BlackBerry (OS 6.0+) 上失败。该应用程序过去适用于所有 3 种风格，但由于将应用程序转换为动态下载更新（而不是每次对某些 Javascript 进行微小更改时重新发布应用程序），该应用程序无法通过 getDirectory 函数。我正在使用 Cordova 1.8.1。

这是设备准备就绪时执行的 JavaScript 代码的开头部分：

```
function onDeviceReady(){
    // get the filesystem setup and run the pre-loader (follow the callback road)
    window.requestFileSystem(LocalFileSystem.PERSISTENT, 0, gotFS, fail_FS);
}

function gotFS(fileSystem) {
   fileSystem.root.getDirectory("data", {create: true}, gotDir, fail_GD);   
}

function gotDir(dir) {
    console.log("got dir");
    DATADIR = dir;
    // code for downloading/updating files goes here
    // left out for brevity and lack of relevance at this point
}

function fail_FS(error){
    fail(error,'requestFileSystem');
}

function fail_GD(error){
    fail(error,'getDirectory');
}

function fail(error,call){
    console.log("ERROR: "+call);
    console.log(JSON.stringify(error));
} 
```

我从 getDirectory 调用（GotFS 函数）中得到错误代码 1。我添加了额外的评论来测试。这是我所知道的：

fileSystem = '持久' fileSystem.root.name = "" fileSystem.root.fullPath = 'file:///store'

我在[这里](http://docs.phonegap.com/en/1.8.1/cordova_file_file.md.html#File_permissions)和[这里](http://docs.phonegap.com/en/1.8.1/cordova_file_file.md.html#DirectoryEntry_getdirectory)检查了关于 Cordova 的文档，这里是我在 config.xml 中的内容

```
<feature id="blackberry.system" required="true" version="1.0.0.0" />
<feature id="org.apache.cordova" required="true" version="1.0.0" />
<feature id="blackberry.find" required="true" version="1.0.0.0" />
<feature id="blackberry.identity" required="true" version="1.0.0.0" />
<feature id="blackberry.pim.Address" required="true" version="1.0.0.0" />
<feature id="blackberry.pim.Contact" required="true" version="1.0.0.0" />
<feature id="blackberry.io.file" required="true" version="1.0.0.0" />
<feature id="blackberry.utils" required="true" version="1.0.0.0" />
<feature id="blackberry.io.dir" required="true" version="1.0.0.0" />
<feature id="blackberry.app" required="true" version="1.0.0.0" />
<feature id="blackberry.app.event" required="true" version="1.0.0.0" />
<feature id="blackberry.system.event" required="true" version="1.0.0.0"/>
<feature id="blackberry.widgetcache" required="true" version="1.0.0.0"/>
<feature id="blackberry.media.camera" />
<feature id="blackberry.invoke" />
<feature id="blackberry.invoke.BrowserArguments" />
<feature id="blackberry.identity" />
<feature id="blackberry.ui.dialog" />
<feature id="blackberry.system" />

<access subdomains="true" uri="file:///store" />
<access subdomains="true" uri="file:///store/data" />
<access subdomains="true" uri="file:///SDCard" />
<access subdomains="true" uri="*" />
<rim:permissions>
    <rim:permit>use_camera</rim:permit>
    <rim:permit>read_device_identifying_information</rim:permit>
    <rim:permit>access_shared</rim:permit>
    <rim:permit>read_geolocation</rim:permit>
</rim:permissions> 
```

在其他信息中......这是我的 plugins.xml 中的内容：

```
<plugins>
  <plugin name="App"            value="org.apache.cordova.app.App"/>
  <plugin name="Device"         value="org.apache.cordova.device.Device"/>
  <plugin name="Camera"         value="org.apache.cordova.camera.Camera"/>
  <plugin name="NetworkStatus"  value="org.apache.cordova.network.Network"/>
  <plugin name="Notification"   value="org.apache.cordova.notification.Notification"/>
  <plugin name="Accelerometer"  value="org.apache.cordova.accelerometer.Accelerometer"/>
  <plugin name="Geolocation"    value="org.apache.cordova.geolocation.Geolocation"/>
  <plugin name="File"           value="org.apache.cordova.file.FileManager"/>
  <plugin name="FileTransfer"   value="org.apache.cordova.http.FileTransfer"/>
  <plugin name="Contacts"       value="org.apache.cordova.pim.Contact"/>
  <plugin name="Capture"        value="org.apache.cordova.capture.MediaCapture"/>
  <plugin name="Battery"        value="org.apache.cordova.battery.Battery"/>
  <plugin name="Media"          value="org.apache.cordova.media.Media"/>
  <plugin name="ChildBrowser"   value="org.apache.cordova.plugins.childbrowser.ChildBrowser"/>
</plugins> 
```

我怀疑这只是一个简单的问题（就像我在 xml 中的访问权限做错了什么），但是在尝试了各种不同的事情并在整个互联网上搜索之后，我被难住了......

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-05T15:52:19.123

我也玩得很开心。我确信发生此错误的原因有很多。

然而，对我来说，当连接 USB 电缆时，黑莓剥夺了对本地存储和 SD 卡的访问权限。开发时不太有用，一些有意义的错误代码会对 BB 有所帮助！

希望这可以帮助其他人。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T17:36:53.123

你的代码对我来说看起来是正确的。

如果您将 BlackBerry 连接到 USB 并在“USB 驱动器”屏幕提示时输入设备密码，则您将启用“大众媒体/存储模式”。这会将文件系统锁定到 USB 并阻止您的应用程序访问它。我希望您在尝试调用 fileSystem.root.getDirectory 时会看到错误。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-12-19T07:08:47.820

对于 blackberry10，Cordova / WebWorks 可以试试这个：

```
window.webkitRequestFileSystem(window.PERSISTENT, 5*1024*1024, onSuccess, null); 
```

而不是 Cordova 的实现：

```
window.requestFileSystem(LocalFileSystem.PERSISTENT, 5*1024*1024, onSuccess, null); 
```

这对我有用，现在我有条件为黑莓/其他触发上述任何一个。希望它对你们有用，就像对我一样。

干杯

# python - Django KeyError {% 如果在 %}

> ID：11803535
> 
> 赞同：1
> 
> 时间：2012-08-03T21:27:37.043
> 
> 标签：python, django

我正在自学 Django，并且我正在尝试做一个测试，这样一个预先存在的用户会得到一个列出他或她的“东西”的页面，一个新用户会得到一个页面，通知他或她他们'不在系统中，可以生成用户列表。问题是我不断为不在预先存在的用户字典中的任何用户获取 KeyErrors（如果用户在字典中，它工作正常）。我不确定问题是出在我在views.py 中构建相关函数的方式上，还是出在我使用templateTags 的方式上，或者是什么。Django 的错误页面指向我的views.py 页面的上下文行，但我不知道这是否真的是问题所在。

任何帮助将不胜感激。

我的代码：

视图.py：

```
def hiUser(request,uname):
    t = get_template("samplate1.html")
    ds,ti = getTime()
    user_stuff = {"sam":["a","b","c"],"kathy":["foo","bar"],"rob":[]}
    c = Context({"date":ds,"time":ti,"user":uname,"user_stuff":user_stuff[uname],"users":user_stuff.keys()})
    return HttpResponse(t.render(c)) 
```

样本1.html：

```
<html>
{% ifequal user "list" %}
<head><title>List of Users</title></head>
<body><h1>List of users</h1>
<ul>
{% for user in users %}
    <li>{{ user }}</li>
{% empty %}
    <p>No users listed!</p>
{% endfor %}
</ul>
{% endifequal %}
{% if user in users %}
<head><title>Greetings, {{ user }}</title></head>
<body>
<h1>Hello</h1>
<p>Greetings, {{ user }}</p>
<p>The date is {{ date }}</p>
<p>The time is {{ time }}</p>
<p>Here is a list of your stuff:</p>
<ul>
    {% for item in user_stuff %}
        <li>{{ item }}</li>
    {% empty %}
        <p>You don't have any stuff!</p>    
    {% endfor %}
    </ul>
{% else %}
<head><title>You're new here, huh?</title></head>
<body>
<h1>Hello</h1>
<p>Your username is not in our database.</p>
<p>You should probably fix that.</p>
{% endif %} 
```

最后：

网址.py：

```
...
urlpatterns = ('',
   (r'^user/name/(.*)/$',hiUser),
) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T21:34:32.830

问题出在您的`views.py`- 这部分，特别是：

```
c = Context({"date":ds,"time":ti,"user":uname,"user_stuff":user_stuff[uname],"users":user_stuff.keys()}) 
```

为了解决这个问题，您需要弄清楚如果用户不在`user_stuff`. 你要提高404吗？显示错误？填写虚拟内容？

如果你想提高 404，你可以这样做：

```
from django.http import Http404

def hiUser(request,uname):
    t = get_template("samplate1.html")
    ds,ti = getTime()
    user_stuff = {"sam":["a","b","c"],"kathy":["foo","bar"],"rob":[]}

    if uname not in user_stuff:
        raise Http404

    c = Context({"date":ds,"time":ti,"user":uname,"user_stuff":user_stuff[uname],"users":user_stuff.keys()})
    return HttpResponse(t.render(c)) 
```

如果要填写虚拟内容，可以使用[dict.get](http://docs.python.org/library/stdtypes.html#dict.get)，如下所示：

```
def hiUser(request,uname):
    t = get_template("samplate1.html")
    ds,ti = getTime()
    user_stuff = {"sam":["a","b","c"],"kathy":["foo","bar"],"rob":[]}

    stuff_for_user = user_stuff.get(uaname, [])
    c = Context({"date":ds,"time":ti,"user":uname,"user_stuff":stuff_for_user,"users":user_stuff.keys()})

    return HttpResponse(t.render(c)) 
```

如果要显示错误页面，则需要修改引发 404 的代码示例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T21:36:19.973

而不是`user_stuff[uname]`使用`user_stuff.get(uname)`. 如果`uname`键不存在，则值为`None`. 或者您可以使用`user_stuff.get(uname, [])`，如果它不存在，它将使其成为一个空列表。

# bash - 仅复制名称与 JSON 或 CSV 文件中的值匹配的输入文件夹文件

> ID：11803539
> 
> 赞同：-3
> 
> 时间：2012-08-03T21:27:53.937
> 
> 标签：bash

## 输入：

*   包含大量文件的文件夹（具有复杂的文件层次结构）
*   包含文件名的 JSON/CSV 文件

## 输出：

*   一个新文件夹，其中包含从输入文件夹复制的文件和 CSV/JSON 文件中的匹配文件名

我对批处理/sed/awk 的了解有限，因此欢迎提出任何想法/建议。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T22:43:42.183

正如上面评论中提到的，bash/sed/awk 不是解析 JSON 的理想选择。既然您暗示 CSV 是一种选择，我会说这是您最好的选择。

由于我不知道这是否是一项任务，并且您还没有提及您尝试过的内容，因此我将避免为您编写完整的脚本。相反，这里是核心位的快速浏览，希望能帮助您前进。

而且由于您没有提供示例输入文件，我将补上一个。假设您有一个这样的输入 CSV 文件：

```
$ cat in.csv
john,hello/world/domination.txt,10
ruth,some_file.txt,20
sarah,jessica/parker.jpg,80 
```

### 循环浏览 CSV 文件的内容

最简单的方法是使用`while`循环和[`read`](http://ss64.com/bash/read.html)：

```
$ while IFS=',' read -r NAME FILENAME AGE; do echo "$FILENAME"; done < in.csv
hello/world/domination.txt
some_file.txt
jessica/parker.jpg
in/my documents/empty.file 
```

请注意，我们已将`IFS`（内部文件分隔符）临时更改为逗号，以将输入 CSV 行拆分为字段。

### 复制命令

假设在您的脚本中，您有一个基本路径（您的*“...文件夹包含很多文件（具有复杂的文件层次结构）”*）和一个目标目录，如下所示：

```
BASE_PATH="/some/source/"
DEST_PATH="/the/destination/" 
```

对于 CSV 文件中的每个文件名——比如说`hello/world/domination.txt`——你想最终从`/some/source/hello/world/domination.txt`to复制`/the/destination/hello/world/domination.txt`，则涉及 3 个步骤：

1.  通过附加字符串来创建`FROM`和路径：`TO`

    ```
    FROM="${BASE_PATH}/${FILENAME}"
    TO="${DEST_PATH}/${FILENAME}" 
    ```

2.  确保目标目录存在。我们`dirname`用来提取目录的名称，并`mkdir -p`在目录不存在时递归地创建目录：

    ```
    mkdir -p "$(dirname $TO)" 
    ```

3.  执行实际复制

    ```
    cp "$FROM" "$TO" 
    ```

`mkdir`参数周围的引号`cp`确保带有空格的路径不被视为单独的参数。

请注意，为简洁起见，我省略了错误检查。在生产脚本中，您通常希望包含检查以确保源文件存在且可读，并且目标路径可写。

### 把它们放在一起

假设您已经分配了`BASE_PATH`and `DEST_PATH`：

```
while IFS=',' read -r NAME FILENAME AGE
do
    FROM="${BASE_PATH}/${FILENAME}"
    TO="${DEST_PATH}/${FILENAME}"
    mkdir "$(dirname $TO)"
    cp "$FROM" "$TO"
done < in.csv 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T22:40:49.007

你没有给我们太多让我们继续下去，所以我会假设

*   您使用 CSV 文件

*   位于源目录的根目录

*   被格式化为`file1,file2,...`

*   这`file1`只是一个文件名，而不是*该*文件的完整路径。

在这种情况下（这是最简单的情况），您可以尝试类似

```
#!/bin/bash

# some renaming for easier read
srccsv="$(basename "$1")"
srcdir="$(dirname "$1")"
trgtdir="$2"

# perform the copy
set +o posix
cp <(IFS=,; \
    while read filename; do \
        find "$srcdir" -type f -name "$filename" -print0; \
    done < "$srccsv") "$trgtdir" 
```

然后通过运行它

```
./cp_csv.sh path/to/your/csv path/to/your/targetdir 
```

假设您已将此脚本命名为`cp_csv.sh`。

注意：它是特定于 bash 的（因为进程替换），我没有对此进行测试（这里已经很晚了..），但我不明白为什么会失败。

如果您使用的是 JSON 输入文件，那么在 bash 中解析会更加痛苦。正如@jordanm 所指出的， bash/sed/awk 不是正确的工具。

# c# - Pub/Sub 和基于内容的订阅

> ID：11803542
> 
> 赞同：2
> 
> 时间：2012-08-03T21:28:14.547
> 
> 标签：c#, .net, publish-subscribe

我正处于设计将是事件驱动架构（基本发布/订阅）的系统的开始阶段。尚未选择实际的工具和框架，因此这个问题比技术特定更概念化（尽管它将在 .Net 中完成）。

这种情况的一个近乎完美的类比是金融交易系统。想象一个服务器不断接收市场数据（实时或间隔——没关系）。服务器将发布特定证券的定价更新。就这个问题而言，假设有 1000 种证券被服务器“观察”并发布。

有 100 个客户端应用程序是此服务的订阅者。每个客户只会对正在发布的证券的一小部分感兴趣。

如果客户端收到所有 1000 种证券的消息，则必须对其进行解析，这显然会产生更多的网络流量和客户端的更多负载。

另一方面，必须在服务器端解析消息内容似乎会在发布/路由时增加负载。

在这种类型的架构中，这通常是如何处理的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T21:34:12.807

看看 RabbitMQ 提供的一些教程

[关联](http://www.rabbitmq.com/getstarted.html)

请特别注意，您可以使用路由和主题将消息传递给适用的客户端。这里的“服务器”“可以简单地将消息放到队列中，客户端可以简单地根据他们订阅的路由/主题监听某些消息。可能还有很多其他选项，但这似乎是一个好方法。RabbitMQ 有一些可用的 .Net 客户端，我对他们的产品非常满意。

我也使用过 IBM MQ 和 MSMQ，但我更喜欢 Rabbit。主要是因为它基于 AMQP，它是一个开放协议，让我可以使用 .Net、Python、Java 等进行连接，而不是专有驱动程序或尝试将所有内容包装在 JMS 中。绝不是专家，所以也许其他人对您的问题有更好的了解。

祝你好运。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T21:36:32.033

通常，服务器是能够执行繁重任务的更强大的机器。由于客户端只需要信息的子集，我认为服务器应该解析信息并只向客户端发送他们需要的信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-05T23:44:59.493

分发股票报价正是导致发布/订阅地址申请专利的用例，我们现在知道并喜欢 JMS 和其他消息传递技术中的“主题”（专利 EP0412232）。

在这种情况下，服务器将发布包含股票代码的主题的股票报价（“ticks”）......通常您会使用一个主题名称空间，该名称空间提供有关该代码的一些分层信息 - 例如 NASDAQ.TECHNOLOGY.HARDWARE.AAPL。

客户将使用主题通配符订阅一个符号或一组符号。发布/订阅机制将确保仅分发给正确的订阅者。使用多播网络可以使这非常有效。

因此，为了回答您的问题，在这种情况下，发布者（服务器）正在执行对消息进行分类所需的任何逻辑，然后在相关主题上发布。订阅者无需做太多工作即可获取相关消息。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-03T23:49:49.640

From the short description you give, your scenario looks like a good fit for an OMG DDS (Data Distribution Service) implementation. This is a language neutral specification, and there are several products available that offer a C# API.

See [this Wikipedia entry](http://en.wikipedia.org/wiki/Data_distribution_service) for a very brief introduction and a list of references.

DDS supports many advanced data management features like a strong-typed and content aware databus, distributed state management and historical data access. Its rich set of Quality of Service settings allows to off-load a lot of the complexity from your applications to the middleware.

In particular, the content filtering requirement that you describe is an important feature. Some of the available products have implemented sophisticated filtering mechanisms that scale well and have smart trade-offs between the amount of traffic on the network versus the CPU load required to evaluate the filters. Those filters are expressed in SQL syntax, like the `WHERE` clause of a `SELECT`.

DDS implementations typically are highly scalable and decentralized in nature. Components participating in a DDS infrastructure are decoupled, both in space and in time. Some DDS products are deployed in numerous mission- and business-critical systems.

If you are interested, then I can give you much more information. I have specialized in DDS for more than 10 years, I still like it and I think it is one of the most useful technologies around.

# valgrind - 如何将 valgrind 与无锁数据结构一起使用？

> ID：11803545
> 
> 赞同：0
> 
> 时间：2012-08-03T21:28:39.363
> 
> 标签：valgrind, lock-free

我正在 liblfds 库 (http://www.liblfds.org/) 中尝试使用无锁结构，着眼于在还包含 valgrind 进行各种错误检查的工具链中使用它们，这给我带来了一些麻烦。我构建了该库的调试版本并使用它来编译以下程序：

```
#include <liblfds.h>
#include <stdio.h>
#include <pthread.h>

static void *
handler(void *arg)
{
  struct queue_state *queue = (struct queue_state *)arg;
  const char *message;
  int result = queue_dequeue(queue, (void **)&message);
  assert(0 != result);
  printf("%s\n", message);
  return NULL;
}

int
main(int argc, const char *argv[])
{
  struct queue_state *queue;
  int result = queue_new(&queue, 1);
  assert(0 != result);
  pthread_t thread;
  result = pthread_create(&thread, NULL, handler, queue);
  assert(0 == result);
  result = queue_guaranteed_enqueue(queue, (void *)"Hello lock free queue!");
  assert(0 != result);
  result = pthread_join(thread, NULL);
  assert(0 == result);
} 
```

该程序从命令行执行时运行良好，但在 valgrind 下运行时出现问题。memcheck 报告依赖于未初始化值的跳转，当子线程尝试使值出列时，DRD 和 helgrind 都会导致程序失败（queue_dequeue 返回 0，使断言跳闸）。我可以解决 memcheck 报告，但 DRD 和 helgrind 崩溃是一个阻碍。

我确信要使这项工作正常工作将需要我插入一些客户端请求宏，但是线程错误检查器宏的文档面向互斥结构，而不是 pthread 提供的互斥结构以及来自自定义分配器的内存处理。在我深入研究 valgrind 的核心以弄清楚如何/是否可以使其工作之前，我希望能获得一个由从事过（并可能解决）这个问题的人提供的信息的指针。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T23:42:31.843

You could always ask the library author on the site forum :-)

Last I knew, valgrind passed release 6 with no warnings, so your experience is unexpected.

Drop me an email - admim at liblfds dot org.

# ruby - rspec 使用 rspec 存根复杂的链式方法

> ID：11803546
> 
> 赞同：0
> 
> 时间：2012-08-03T21:28:49.597
> 
> 标签：ruby, ruby-on-rails-3, rspec, stub

我有以下链接数据：

```
Data::Universal.find("501c2599dc1c82704e000037").data.last.foo
 => [#<Data::Universal::Foo::ErrorMessage _id: 501c24f1dc1c82704e000014, _type: "Data::Universal::Foo::ErrorMessage", created_at: nil, updated_at: nil, is_enabled: true, left_px: 1, top_px: 1, width_px: 420, height_px: 198, inner_width: nil, inner_height: nil, z_index: 1000, position: nil, name: nil, custom_css: "", element_label: "Error Message ", can_be_deleted: true, sticky: false, sticky_eigenscreen: "top", sticky_screens: [], audience_id: "", can_be_spatially_edited: false, editable_left_px_setting: true, editable_top_px_setting: true, editable_width_px_setting: true, editable_height_px_setting: true, version: nil, modifier_id: nil, primary_color: "#6D84B4", primary_border_color: "#29447E", secondary_color: "#F2F2F2", screen_id: "4f9058772774e2279200004d">] 
```

如何使用 rspec 存根？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T21:30:38.663

自然地使用[stub_chain](https://www.relishapp.com/rspec/rspec-mocks/v/2-2/docs/stubs/stub-a-chain-of-methods) :)

```
 subject.stub_chain(:one, :two, :three).and_return(:four)
  subject.one.two.three.should eq(:four) 
```

对于带参数的存根链，请参阅[此答案](https://stackoverflow.com/questions/8003445/rspec-stub-chains-with-arguments)。

# haskell - Haskell：函数组合刚刚损坏了我的大脑

> ID：11803550
> 
> 赞同：7
> 
> 时间：2012-08-03T21:29:24.053
> 
> 标签：haskell

如果

```
*Main> :t concatMap
concatMap :: (a -> [b]) -> [a] -> [b] 
```

和

```
*Main> :t replicate
replicate :: Int -> a -> [a] 
```

那么这是如何工作的

```
*Main> :t concatMap . replicate
concatMap . replicate :: Int -> [b] -> [b] 
```

给定：

```
*Main> :t (.)
(.) :: (b -> c) -> (a -> b) -> a -> c 
```

?

我的意思是，我对函数组合的理解是，它`replicate`应该返回任何`concatMap`期望的参数才能`(.)`工作。但事实并非如此。那么问题是什么？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-08-03T21:37:32.753

如果您在签名中添加括号然后将它们排列起来，它可能会帮助您了解发生了什么：

```
replicate :: Int -> (a -> [a])
concatMap ::        (a -> [b]) -> ([a] -> [b]) 
```

现在应该很明显了，如果我们统一和，则输出`replicate`适合输入，在这种情况下，组合的输出类型是。`concatMap``b``a``[b] -> [b]`

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-08-03T22:19:21.400

困难可能来自混淆类型变量以及您如何推理类型统一。正如其他人所说，诀窍是考虑 (->) 是右关联的，这意味着您可以像这样排列事物（为每个签名创建新的类型变量以避免混淆）：

```
(.)       :: (b         ->  c         ) -> (a    -> b        )  -> a -> c
concatMap :: (q -> [r]) -> ([q] -> [r])
replicate ::                               (Int  -> (s -> [s]) 
```

这实质上给了我们一些需要解决的限制。假设“a ~ b”表示“a 与 b 的类型相同”或等效地“a 可以替换为 b”。

从以上内容，我们可以推断出以下事实：

```
a ~ Int
b ~ (q -> [r]) ~ (s -> [s])
c ~ ([q] -> [r]) 
```

但是 b 的两个等式告诉我们

```
(q -> [r]) ~ (s -> [s]) 
```

这意味着

```
q ~ s and [r] ~ [s] 
```

那么我们将 c 重写为：

```
c ~ ([q] -> [r]) ==> ([s] -> [s])) 
```

将 a 和 c 的替换插入到 (.) 的原始类型中，并应用两个函数产生

```
a -> c ~ Int -> ([s] -> [s]) 
```

当然现在是 ghci 报告的形式：`Int -> [b] -> [b]`.

# java - 调用哪种方法？(整数... a) 与 (int a, int b)

> ID：11803553
> 
> 赞同：22
> 
> 时间：2012-08-03T21:29:50.397
> 
> 标签：java, methods, overloading, variadic-functions

我刚刚发现了一个非常有趣的 Java 技巧：

```
void method1(Integer... a){
} 
```

所以你可以给这个方法任意数量的整数。

现在，如果我有类似的（重载）方法，如下所示：

```
void method1(int a, int b){

} 
```

当我执行以下行时运行哪个方法：

```
method1(1, 2); 
```

好吧，我可以很容易地通过使用不同的方法指令对其进行测试来发现这一点，但是当我考虑“重载”方法中的“规则”时，我必须确保每个重载的方法必须相同，以便编译器知道究竟要使用哪一个。

在我看来，上面的代码不应该工作，因为编译器应该被混淆。但是当我尝试它时，它可以工作。

那么..有人知道更多关于此的背景信息吗？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-08-03T21:33:34.657

为了确定应该调用哪个方法，编译器会检查以下列表，如[JLS #5.3](http://docs.oracle.com/javase/specs/jls/se7/html/jls-5.html#jls-5.3)和[JLS #15.12.2](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.12.2)中所述：

*   身份转换（§5.1.1）**=>`method1(int a, int b)`**
*   扩大的原始转换（§5.1.2）
*   扩大参考转换（§5.1.5）
*   拳击转换（第 5.1.7 节）可选地后跟扩大参考转换 **==>`method1(Integer... a)`**
*   一个拆箱转换（第 5.1.8 节）可选地后跟一个扩大的原始转换。

在您的情况下，第一点适用并被`method1(int, int)`调用。

*（更准确地说，您的方法使用 varags 并且优先级低于简单的装箱转换。换句话说，如果有 a`method1(Integer a, Integer b)`它会`method1(Integer... a)`在层次结构中出现）*

为什么会这样？15.12.2 中的评论给出了提示：

> 这保证了在 Java SE 5.0 之前在 Java 编程语言中有效的任何调用都不会因为引入可变参数方法、隐式装箱和/或拆箱而被认为是模棱两可的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-03T21:35:59.180

第二种方法获胜。根据[Java 语言规范 (pdf)](http://docs.oracle.com/javase/specs/jls/se7/jls7.pdf)，

> 第一阶段（第 15.12.2.2 节）执行重载决议，不允许装箱或拆箱转换，或使用变量 arity 方法调用。

如果在此阶段找到适用的方法，则该方法获胜；不再进行搜索。在您的情况下，它恰好是第二种方法，因为第一种方法是一种变量 arity 方法，也需要装箱。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-03T21:40:51.973

我猜了一半，但就像 thinksteep 所说，`Integer...`实际上被视为一个`Integer`数组，这意味着您的方法调用必须执行两次强制以使其与第一个方法匹配（将`int`s 装箱为`Integers`，并将您的参数列表视为数组而不是简单的两个不同的参数）。然而，*不需要*强制来使其与第二种方法相匹配。

好的，我可以看到其他几个人已经引用了比我提供的更具体的 JLS，而我正在输入这个。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-03T21:39:46.420

将对 method1(int a, int b) 进行调用。刚刚检查了这个字节码 - 这里`Integer... a`实际上是`Integer[] a` 一个详细的转换检查这些[分配转换](http://docs.oracle.com/javase/specs/jls/se5.0/html/conversions.html#184225)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-05-27T04:21:14.023

可变参数的**优先级最低**。如果没有找到其他匹配的方法，则只调用它。这就像*SWITCH*案例的默认案例。

# java - java.lang.NumberFormatException 在尝试加载文件时

> ID：11803554
> 
> 赞同：0
> 
> 时间：2012-08-03T21:29:50.537
> 
> 标签：java, numberformatexception

我在尝试从 txt 文件加载某些数据时遇到此错误。

```
public static boolean initalize(String FileName) {
    String line = "";

    String token = "";

    String token2 = "";

    String token2_2 = "";

    String[] token3 = new String[10];

    boolean EndOfFile = false;

    BufferedReader characterfile = null;

    try {

            characterfile = new BufferedReader(new FileReader("./Data/data/"

                            + FileName));

    } catch (FileNotFoundException fileex) {
        Misc.println("File not loaded");

            return false;

    }

    try {

            line = characterfile.readLine();

    } catch (IOException ioexception) {

            return false;

    }

    while ((EndOfFile == false) && (line != null)) {

            **line = line.trim();
            int spot = line.indexOf("=");
            if (spot > -1) {
                    token = line.substring(0, spot);
                    token = token.trim();
                    token2 = line.substring(spot + 1);
                    token2 = token2.trim();
                    token2_2 = token2.replaceAll("\t\t", "\t");
                    token2_2 = token2_2.replaceAll("\t\t", "\t");
                    token2_2 = token2_2.replaceAll("\t\t", "\t");
                    token2_2 = token2_2.replaceAll("\t\t", "\t");
                    token2_2 = token2_2.replaceAll("\t\t", "\t");
                    token3 = token2_2.split("\t");**

                    if (token.equals("drop")) {

                            int id = Integer.parseInt(token3[0]);

                            int x = Integer.parseInt(token3[1]);

                            int y = Integer.parseInt(token3[2]);

                            int amount = Integer.parseInt(token3[3]);

                            int height = Integer.parseInt(token3[4]);
                            globalDrops.add(new GlobalDrop(id,amount,x,y,height));  

                    }

            } else {

                    if (line.equals("[ENDOFDROPLIST]")) {

                            try {

                                    characterfile.close();

                            } catch (IOException ioexception) {

                            }

                            return true;

                    }

            }

            try {

                    line = characterfile.readLine();

            } catch (IOException ioexception1) {

                    EndOfFile = true;

            }

    }

    try {

            characterfile.close();

    } catch (IOException ioexception) {

    }

    return false;

} 
```

但是，它一直给我这个错误：

```
[8/3/12 5:24 PM]: Exception in thread "main" [8/3/12 5:24 PM]: java.lang.NumberFormatException: For input string: "1923     3208    3214    1       0       2       " 
```

这是文本文件的格式：

```
sque = 1923     3208    3214    1       0       2       Square 
```

为什么这会给我错误？它与 /t/ 分裂有关吗？

谢谢

这是工作的：

```
sque = 1923 3208    3214    1   0   2       Square 
```

但是，我正在尝试加载其中的 400 多个，并且一次更改所有这些会很痛苦

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T22:04:53.310

替换这一切

```
 token = line.substring(0, spot);
                token = token.trim();
                token2 = line.substring(spot + 1);
                token2 = token2.trim();
                token2_2 = token2.replaceAll("\t\t", "\t");
                token2_2 = token2_2.replaceAll("\t\t", "\t");
                token2_2 = token2_2.replaceAll("\t\t", "\t");
                token2_2 = token2_2.replaceAll("\t\t", "\t");
                token2_2 = token2_2.replaceAll("\t\t", "\t");
                token3 = token2_2.split("\t");** 
```

和

```
String[] cmd = line.split("=");
token = cmd[0].trim;
String[] numbers = cmd[1].split("\\s+"); 
```

该数组`numbers`将包含数字字符串标记，已修剪并准备好由`Integer.parseInt()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T21:33:21.240

从异常中可以看出，传递给 int 转换例程的任何内容都不是可解析的整数。

实际上，您的程序似乎没有正确解析输入字符串，而将数字序列留在其中，可能是因为您使用了“\t”。在转换为整数之前，我会使用正则表达式检查您是否真的可以找到这些选项卡并正确拆分此文件。

作为一名防御性程序员，您还可以在实际将其转换为 int 之前检查 string 是否可转换为 int。

```
public static boolean isNumeric(String aStringValue) {
   Pattern pattern = Pattern.compile( "\\d+" );
   Matcher matcher = pattern.matcher(aStringValue);
   return matcher.matches(); 
```

}

另外，仅用于调试尝试：

```
s = s.replaceAll("\\t","|"); 
```

看看它的样子。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T21:34:19.800

对，因为：

```
"1923     3208    3214    1       0       2       " 
```

不是一个数字。异常似乎很明显 - 您需要将该行标记为数字部分，然后单独解析每个部分。

# java - JFrame 鼠标单击停止键盘按钮

> ID：11803557
> 
> 赞同：2
> 
> 时间：2012-08-03T21:30:22.770
> 
> 标签：java, swing, awt, keylistener

我的问题是当我单击框架屏幕的空间时，它会停止注册键盘键，因此我的播放器停止移动。

在此先感谢您的帮助。

编码：

```
private Component comp;
....

public InputManager(Component comp) {
    this.comp = comp;
    mouseLocation = new Point();
    centerLocation = new Point();

    // register key and mouse listeners
    comp.addKeyListener(this);
    comp.addMouseListener(this);
    comp.addMouseMotionListener(this);
    comp.addMouseWheelListener(this);

    // allow input of the TAB key and other keys normally
    // used for focus traversal
    comp.setFocusTraversalKeysEnabled(false);
} 
```

图形用户界面代码：

```
Game game = new Game();
    game.setMinimumSize(new Dimension(WIDTH * 2, HEIGHT * 2));
    game.setPreferredSize(new Dimension(WIDTH * 2, HEIGHT * 2));
    game.setMaximumSize(new Dimension(WIDTH * 2, HEIGHT * 2));

    frame = new JFrame(Game.NAME);
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    frame.setLayout(new BorderLayout());
    frame.add(game);
    frame.pack();
    frame.setResizable(false);
    frame.setLocationRelativeTo(null);
    frame.setVisible(true);
    game.start(); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-03T21:54:33.630

我假设您正在使用 KeyListener 来监听键输入。请注意，这仅在被侦听的组件具有焦点时才有效，并且可能当您在 JFrame 上按下鼠标时，您被侦听的组件失去焦点。

解决方案不是使用 KeyListener，而是使用比 KeyListener 和更高级别概念更健壮的[键绑定。](http://docs.oracle.com/javase/tutorial/uiswing/misc/keybinding.html)

此外，您将希望停止使用*它*作为您的侦听器。如果您的程序变得不仅仅是一个玩具程序，那么维护一个将自己用作自己的侦听器的 GUI 类将变得非常困难。

此外，关于：“哦，是的 Game.java 扩展 Canvas”：您不想不必要地混合 AWT 和 Swing 组件，因为这会导致副作用。相反，只需使用所有 Swing 组件，例如 JPanel，而不是 Canvases。

# ios - 根据 UIButton 控件事件更改 UILabel

> ID：11803563
> 
> 赞同：1
> 
> 时间：2012-08-03T21:30:44.700
> 
> 标签：ios, uikit, uibutton, uilabel, uicontrolevents

我有一个`UIButton`具有默认图像的图像，以及另一个用于突出显示/选定图像的图像。按下按钮时，按钮的图像变为突出显示，如果 touchUp 在内部，则变为选中。通常的东西.. IB 内的所有设置。

但是，我试图在按钮上设置一个标签，在一个非常棘手的地方（未对齐，硬编码）。

我尝试在 IB 中的按钮上添加标签。问题：我需要标签的文本颜色随着按钮控制状态的变化而变化。

因此，我创建了一个`UIButton`子类，添加了一个`UILabel`Outlet，并通过覆盖以下方法：

```
- (void)touchesBegan/Moved/Cancelled/Ended:...;
- (void)setSelected:... 
```

我能够实现我想要的……但是！当我快速单击按钮时，不会反映更改。有时它不能正常工作......我什至使用了异步调用......没用。

于是，我去了`UIButton`'s `titleLabel`。我尝试使用它没有运气。

所以，我试过`UIButton setTitle: forState:`了，没用……救命？

* * *

额外细节：

```
- (id)initWithCoder:(NSCoder *)aDecoder {
    self = [super initWithCoder:aDecoder];
    如果（自我）{
        [self.titleLabel setFrame:CGRectMake(0, 0, 100, 100)];
        [self.titleLabel setText:@"标题标签"];
        [self.titleLabel setHidden:NO];

        [self.imageView setAlpha:0.2f];
        NSLog(@"%@", self.subviews);

        [自我设置标题：@“默认！！” forState:UIControlStateNormal];
    }
    回归自我；
}

- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {
    [超级 touchesBegan:touches withEvent:event];
    [self performSelector:@selector(check) withObject:nil afterDelay:0.1];
}

- (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event {
    [超级 touchesMoved:touches withEvent:event];
    [self performSelector:@selector(check) withObject:nil afterDelay:0.1];

}

- (void)touchesCancelled:(NSSet *)touches withEvent:(UIEvent *)event {
    [超级 touchesCancelled:touches withEvent:event];
    [self performSelector:@selector(check) withObject:nil afterDelay:0.1];

}

- (void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event {
    [超级 touchesEnded:touches withEvent:event];
    [self performSelector:@selector(check) withObject:nil afterDelay:0.1];

}

- (void)setSelected:(BOOL)selected {
    [超级setSelected:selected];
    [self performSelector:@selector(check) withObject:nil afterDelay:0.1];
}

-（无效）检查{
    if (self.isSelected || self.state == UIControlStateHighlighted || self.state == UIControlStateSelected) {
        [_label setHighlighted:YES];
    } 别的 {
        [_label setHighlighted:NO];
    }
}

```

**输出：**

```
(
    "<UIImageView: 0x8b24930; frame = (0 0; 243 39); clipsToBounds = YES; alpha = 0.2; opaque = NO; userInteractionEnabled = NO; layer = <CALayer: 0x8b248e0>>",
    "<UIButtonLabel: 0x8b247a0; frame = (0 0; 100 100); text = 'THE TITLE LABEL'; clipsToBounds = YES; opaque = NO; userInteractionEnabled = NO; layer = <CALayer: 0x8b25000>>"
) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T05:43:40.957

您需要为 UIButton 设置背景图像...可能是您正在设置按钮的图像属性...这就是为什么您的标签与图像重叠...。

```
[optionButtonOutlet  setTitleColor:[UIColor whiteColor] forState:UIControlStateNormal];

 [optionButtonOutlet setBackgroundImage:[UIImage imageNamed:@"predict_match_btn_blue_pressed@2x.png" ]forState:UIControlStateNormal]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T11:36:44.620

经过这几个月，我发现的最佳答案是覆盖：

```
- (CGRect)titleRectForContentRect:(CGRect)contentRect; 
```

以我想要的方式定位标签。这使我能够利用：

```
[self setTitleColor:[UIColor offWhiteColor] forState:UIControlStateNormal];
[self setTitleColor:[UIColor burntCarbonColor] forState:UIControlStateSelected];
[self setTitleColor:[UIColor burntCarbonColor] forState:UIControlStateHighlighted]; 
```

* * *

对于更好奇的：

```
- (CGRect)titleRectForContentRect:(CGRect)contentRect {
    CGSize margin = CGSizeMake(15.f, 5.f);
    CGRect clay = contentRect;
    clay = CGRectInset(clay, margin.width, 0.f);
    clay.origin.x += margin.width;
    clay.origin.y += margin.height;

    return clay;
} 
```

# objective-c - iAd for Landscape only 应用程序抛出错误

> ID：11803564
> 
> 赞同：2
> 
> 时间：2012-08-03T21:30:50.180
> 
> 标签：objective-c, ios, orientation, iad

嗨，我只有风景应用程序。我正在向其中添加 iAd，然后单击测试添加我的应用程序崩溃并出现此错误

```
*** Terminating app due to uncaught exception 'UIApplicationInvalidInterfaceOrientation', reason: 'Supported orientations has no common orientation with the application, and shouldAutorotate is returning YES' 
```

在我的应用程序委托中，我有

```
_bannerView.requiredContentSizeIdentifiers = [NSSet setWithObjects: ADBannerContentSizeIdentifierLandscape, nil]; 
```

在我的 VC 中，我再次设置

```
[_bannerView setCurrentContentSizeIdentifier:ADBannerContentSizeIdentifierLandscape]; 
```

只保留我的应用程序 Landspace

```
-(BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {
    // Return YES for supported orientations
    return (interfaceOrientation == UIInterfaceOrientationLandscapeRight);
} 
```

请提出这里有什么问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-12-31T08:45:01.857

通过使用最新的 SDK 更改更新我的代码来修复

# objective-c - 在 NSObjects 数组中分配和初始化 UIImageViews

> ID：11803568
> 
> 赞同：0
> 
> 时间：2012-08-03T21:31:08.193
> 
> 标签：objective-c, xcode

我正在尝试分配和初始化作为 NSObject (Circle) 一部分的 UIImageViews，并且我有一个由这些 Circles 组成的数组。但是，XCode 不喜欢我分配和初始化 UIImageViews。

这是代码：

```
//allocate and set circleArray
circleArray = [[NSMutableArray alloc] init];
for (int i = 0; i < 16; i++) {
    [circleArray addObject:[Circle alloc]];
    [[circleArray objectAtIndex:i] setTouched:0];
    [[circleArray objectAtIndex:i] imageView] = [[UIImageView alloc] init]; //Problem Here: "Expression is not assignable"
}

//some code setting up the columns and beats shown below

for (int i = 0; i < 16; i++) {
    [[[circleArray objectAtIndex:i] imageView] setFrame:CGRectMake([[circleArray objectAtIndex:i] column]*80-75, [[circleArray objectAtIndex:i] beat]*80+5, 70, 70)];

    [self.view addSubview:[[circleArray objectAtIndex:i] imageView]];

    if ([[circleArray objectAtIndex:i] beatMod] == 0) {
        [[[circleArray objectAtIndex:i] imageView] setImage:redCircle];
    }
    else if ([[circleArray objectAtIndex:i] beatMod] == 0.5) {
        [[[circleArray objectAtIndex:i] imageView] setImage:blueCircle];
    }
    else if ([[circleArray objectAtIndex:i] beatMod] == 0.25 || [[circleArray objectAtIndex:i] beatMod] == 0.75) {
        [[[circleArray objectAtIndex:i] imageView] setImage:yellowCircle];
    }
    else {
        [[[circleArray objectAtIndex:i] imageView] setImage:greenCircle];
    }
} 
```

如果我取出有错误的行，则屏幕上不会显示任何内容。我应该分配和初始化 UIImageViews 以使其显示，还是在分配和初始化 NSObject 时已经为我完成？我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T21:58:08.377

1.  您不需要for 循环第一行中`init`的对象吗？`Circle`

2.  语法对我来说有点奇怪。导致您出现问题的行，它的 LHS 正在**返回**一个对象。你不应该**把**它设置成什么。你可能应该使用 cast like

    `((Circle *)[circleArray objectAtIndex:i]).imageView = [[UIImageView alloc] init];`

3.  您可能需要`Circle`在将其添加到阵列之前进行设置。所以就

    `Circle *c = [[Circle alloc] init];`

    `c.imageView = blablabla;`

    `[array addObject:c];`

或类似的东西。

（嗯..不知道为什么块代码不起作用..）

# ruby-on-rails - 您如何在 Heroku 上提交支持请求？

> ID：11803576
> 
> 赞同：3
> 
> 时间：2012-08-03T21:32:06.977
> 
> 标签：ruby-on-rails, heroku

我曾经提交票务请求，但找不到提交链接。他们删除了吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-03T21:51:52.253

1.  [在https://help.heroku.com/](https://help.heroku.com/)上搜索您的问题
2.  如果搜索结果没有帮助，结果页面底部有一个链接可以打开工单。

# objective-c - 无法识别的选择器发送到实例 UIViewController

> ID：11803579
> 
> 赞同：6
> 
> 时间：2012-08-03T21:32:14.707
> 
> 标签：objective-c, xcode, uiviewcontroller, uitableview, segue

我不断收到错误：

> NSInvalidArgumentException'，原因：'-[UIViewController setPhotoCellName:]：无法识别的选择器发送到实例

当我进入我的 segue 呼叫准备时。目前我有

> TabBarController->NavigationController->TableViewController->TableViewController->ViewController

上面有一个 UI 图像。

当我尝试从第二个 TableView 控制器转移到 ViewController 时，就会出现问题。我有从 Prototype Cell 到实际 ViewController 的 segue 设置。它进入segue并崩溃。我正在尝试将`NSArray`属性传递给 ，`viewController`以便能够在其中使用 URL 并显示`UIImage`. PhotoInPlace 包含我试图传递的数组。这是代码。

myTableViewControllerPhotoLocation.m 代码

```
#import "myTableViewControllerPhotoLocation.h"
#import "FlickrImageViewController.h"

@interface myTableViewControllerPhotoLocation ()
@end

@implementation myTableViewControllerPhotoLocation
@synthesize photoInPlace = _photoInPlace; //Contains NSArray to pass

-(void) prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender{
    if([segue.identifier isEqualToString:@"Photo Display"]){
        NSIndexPath* indexPath = [self.tableView indexPathForCell:sender];
        NSLog(@" Dicitonary = %@", [self.photoInPlace objectAtIndex:indexPath.row]); //Returns the picked cell
        NSLog(@"%@", [self.photoInPlace class]); //returns NSArray
        NSLog(@"%@", [self photoInPlace]); //Returns the array

        [segue.destinationViewController setPhotoCellName:[self.photoInPlace objectAtIndex:indexPath.row]]; 
        //Crashes HERE!
    }
} 
```

FlickrImageViewController.h 代码

```
@property (nonatomic, strong) NSArray* photoCellName; 
```

FlickrImageViewController.m 代码

```
#import "FlickrImageViewController.h"

@interface FlickrImageViewController ()
@end

@implementation FlickrImageViewController
@synthesize photoCellName = _photoCellName; //property declared in header

-(void) setPhotoCellName:(NSArray *)photoCellName{
    if(!_photoCellName)
        _photoCellName = [[NSArray alloc] initWithArray:photoCellName];
    else {
        _photoCellName = photoCellName;
    }
} 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-03T21:37:38.243

您认为您的目的地是来自应用程序的对象，`FlickrImageViewController`但应用程序不是。查看您在情节提要中分配该控制器的类；根据错误，它是一个裸露的`UIViewController`.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-03T21:37:28.683

听起来您不小心得到了一个普通的 UIViewController 而不是 FlickrImageViewController。也许您忘记分配控制器的类？

# sql-server - 修改 SQL Server 数据格式

> ID：11803584
> 
> 赞同：0
> 
> 时间：2012-08-03T21:32:48.057
> 
> 标签：sql-server, union, inner-join

我的调查数据存储在 SQL Server 数据库中，我正在使用 tableau 对其进行分析。Tableaus 的一个怪癖是它需要特定格式的数据，如此链接所示

[Tableau 数据样式](http://kb.tableausoftware.com/articles/knowledgebase/survey-data-grid-questions)

他们使用联合的方法有效，但是我的数据分布在 100 多个问题中，其中一些有 10 个选项。`UNION`这会创建一个几乎无法编辑的巨大 SQL语句。

我的计划是对需要更改的每个问题执行联合，然后与不需要修改的其他数据进行内部连接，但是连接只返回第一个选择语句字段。

这是工会声明供参考

```
 select
    [Survey].[SurveyId] AS [SurveyId],
    [HumanCapital_Issues].[DisclosureResponsibility_Importance] AS  [importance],
    'Disclosure Responsibility' as [HCI_Importance]
FROM [Survey].[Survey] [Survey] 
INNER JOIN [Survey].[HumanCapital_Issues] [HumanCapital_Issues] ON ([survey].[SurveyId] = [HumanCapital_Issues].[SurveyId])

union

select
    [Survey].[SurveyId] AS [SurveyId],
    [HumanCapital_Issues].[DevelopingSkills_Importance] AS  [importance],
    'Developing skills' as [HCI_Importance]
FROM [Survey].[Survey] [Survey]
INNER JOIN [Survey].[HumanCapital_Issues] [HumanCapital_Issues] ON ([Survey].[SurveyId] = [HumanCapital_Issues].[SurveyId])

SELECT [Survey].[SurveyId] AS [Survey_SurveyId],
    [Survey].[Year] AS [Year],
    [Survey].[FinancialInstitutionCode] AS [FinancialInstitutionCode],
    [Survey].[DeletionCode] AS [DeletionCode],
    [Survey].[SalaryOnly] AS [SalaryOnly],
    [FinancialInstitution].[FinancialInstitutionCode] AS [FinancialInstitution_FinancialInstitutionCode],
    [FinancialInstitution].[Name] AS [Name],
    [FinancialInstitution].[FDIC] AS [FDIC],
    [FinancialInstitution].[Address_Street1] AS [Address_Street1],
    [FinancialInstitution].[Address_Street2] AS [Address_Street2],
    [FinancialInstitution].[Address_City] AS [Address_City],
    [FinancialInstitution].[Address_State] AS [Address_State],
    [FinancialInstitution].[Address_Zip] AS [Address_Zip],
    [FinancialInstitution].[Address_County] AS [Address_County],
    [FinancialInstitution].[ParentCompany] AS [ParentCompany],
    [FinancialInstitution].[FDICBHC] AS [FDICBHC],
    [FinancialInstitution].[OwnershipStructureCode] AS [OwnershipStructureCode],
    [FinancialInstitution].[Employees_FullTimeEquivalent] AS [Employees_FullTimeEquivalent],
    [FinancialInstitution].[Employees_FullTime] AS [Employees_FullTime],
    [FinancialInstitution].[Employees_PartTime] AS [Employees_PartTime],
    [FinancialInstitution].[Branches_FullService] AS [Branches_FullService],
    [FinancialInstitution].[Branches_InStore] AS [Branches_InStore],
    [FinancialInstitution].[Brances_LimitedService] AS [Brances_LimitedService],
    [FinancialInstitution].[Headquarters_Population] AS [Headquarters_Population],
    [FinancialInstitution].[LargestCity_Population] AS [LargestCity_Population],
    [FinancialInstitution].[Assets] AS [Assets],
    [FinancialInstitution].[Deposits] AS [Deposits],
    [FinancialInstitution].[TARP_Participated] AS [TARP_Participated],
    [FinancialInstitution].[TARP_CausedConcern] AS [TARP_CausedConcern],
    [FinancialInstitution].[TARP_RequiredChanges] AS [TARP_RequiredChanges],
    [FinancialInstitution].[RegionCode] AS [RegionCode],
    [HumanCapital_Issues].[SurveyId] AS [HumanCapital_Issues_SurveyId],
    [HumanCapital_Issues].[DisclosureResponsibility_Concern] AS [DisclosureResponsibility_Concern],
    [HumanCapital_Issues].[DevelopingSkills_Concern] AS [DevelopingSkills_Concern],
    [HumanCapital_Issues].[MotivatingPerformance_Concern] AS [MotivatingPerformance_Concern],
    [HumanCapital_Issues].[Reorganizations_Concern] AS [Reorganizations_Concern],
    [HumanCapital_Issues].[Hiring_Concern] AS [Hiring_Concern],
    [HumanCapital_Issues].[Retention_Concern] AS [Retention_Concern],
    [HumanCapital_Issues].[ContainingCosts_Concern] AS [ContainingCosts_Concern],
    [HumanCapital_Issues].[ManagingRetirements_Concern] AS [ManagingRetirements_Concern],
    [HumanCapital_Issues].[SalesCulture_Concern] AS [SalesCulture_Concern],
    [HumanCapital_Issues].[DevelopingLeaders_Concern] AS [DevelopingLeaders_Concern],
    [HumanCapital_Issues].[Other_Description] AS [Other_Description],
    [HumanCapital_Issues].[Other_Concern] AS [Other_Concern]
FROM 
    [Survey].[Survey] [Survey]
INNER JOIN 
    [Profile].[FinancialInstitution] [FinancialInstitution] ON ([Survey].[SurveyId] = [FinancialInstitution].[FinancialInstitutionCode])
INNER JOIN 
    [Survey].[HumanCapital_Issues] [HumanCapital_Issues] ON ([Survey].[SurveyId] = [HumanCapital_Issues].[SurveyId]) 
```

有没有一种“简单的方法”来执行联合，然后将它与另一个选择语句连接起来？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T22:17:17.357

如果我最终理解了这个问题，你想加入获取大部分数据的单个查询和获取特定部分的联合查询。希望 SurveyID 是连接元素。将现有查询用作派生表：

```
select *
  from
  (
     { union query here }
  ) q1
 inner join
  (
     { query with all the data here }
  ) q2
    on q1.SurveyID = q2.SurveyID 
```

# android - 同一个APK中的两个包可能吗？

> ID：11803585
> 
> 赞同：2
> 
> 时间：2012-08-03T21:32:55.283
> 
> 标签：android, android-manifest, apk, android-package-managers

我正在尝试实现这种在两个不同应用程序之间共享首选项的[伟大技术，同时仍然是 MODE_PRIVATE。](https://stackoverflow.com/a/3553599/722603)

我的问题是第一个应用程序不能假设第一个应用程序已安装（反之亦然），因此：

```
 Context c = createPackageContext("com.app.first", MODE_PRIVATE); 
```

必须替换为：

```
 Context c = createPackageContext("com.app.shared", MODE_PRIVATE); 
```

但这要求`com.app.shared`真正添加它，这会转化为第二个 APK？

换句话说，每个 APK**只有** **一个**，每个清单文件只有一个。因此每个 APK 只有一个实际包？`AndroidManifest.xml` **`<manifest package= >`**

 **我不希望每个应用程序有 2 个 APK，我只希望每个应用程序有一个 APK。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T22:39:19.520

> 我正在尝试实现这种在两个不同应用程序之间共享首选项的伟大技术，同时仍然是 MODE_PRIVATE。

实际上，这是一种反伟大的技术，我刚刚删除了我的答案。使用`android:sharedUserId`是有风险的，对于已经部署的应用程序来说是完全不可能的。自从我在那里发布答案以来的两年里，我发现了我的方式的错误。

此外，该技术不能可靠地工作，因为您无法控制用户安装和卸载哪些应用程序。如果 App A 和 App B 都通过使用 App A 的副本来共享偏好，那么当用户卸载 App A 时，App B 就会被冲洗掉。

> 因此每个 APK 只有一个实际包？

正确的。

> 我不希望每个应用程序有 2 个 APK，我只希望每个应用程序有一个 APK。

对于两个应用程序，您有两个 APK 文件，每个文件都有自己的包名称。**

# java - How does one get the DispatchContext in Ofbiz from a Java program

> ID：11803591
> 
> 赞同：3
> 
> 时间：2012-08-03T21:33:20.803
> 
> 标签：java, ofbiz

I've spent the last few hours trying to find the answer in the "Apache Ofbiz Cookbook" and "Apache Ofbiz Development: The Beginner's Tutorial" how to get the DispatchContext in Ofbiz from a Java method. Ruth Hoffman's Cookbook doesn't include this code she just says "prepare any context parameters" p.43\. I can understand how you get the DispatchContext when you register a service or an event but how does one do it from Java? Thanks.

I'm trying to populate Ofbiz entities/tables that I've defined in Ofbiz from the server end of a REST web service in Tomcat.

```
 GenericDelegator delegator = ctx.getDelegator();
    GenericValue myTable = delegator.makeValue("MyTable");
    myTable.set("name", myTableAsJson.getString("name"));

    try {
        delegator.store(offering);
    } catch(Exception e) {

    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-12T18:24:30.087

In Java method/event, dispatach context can be fetched using the following code snippet:

```
GenericDispatcher dispatcher = (GenericDispatcher) request.getAttribute("dispatcher");
DispatchContext dctx =  dispatcher.getDispatchContext(); 
```

In Java method/event, any service can be invoked using the following code snippet:

```
GenericDispatcher dispatcher = (GenericDispatcher) request.getAttribute("dispatcher");
dispatcher.runSync("SERVICE_NAME", context); 
```

where context is map of required IN/IN-OUT parameters to service.

To invoke service from Java method/event, there is no need to paas dispatch context. Only the service name and context is required.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-09-24T19:17:41.063

This method doesn't work anymore. The HttpServletRequest coming from the controller will still have an attribute "dispatcher" but you have to cast it to a LocalDispatcher class now and then use that to get the DispatchContext.

This is from the OFBiz service engine documentation[1]: **"Internal Usage of the Services Framework is quite simple. In a Web Application the LocalDispatcher is stored in the ServletContext which can be accessed via the Session object in an Event."**

This worked for me:

```
Delegator delegator = (Delegator) request.getAttribute("delegator");
LocalDispatcher ld = (LocalDispatcher) request.getAttribute("dispatcher");
DispatchContext dctx = ld.getDispatchContext(); 
```

[1] [https://cwiki.apache.org/confluence/display/OFBIZ/Service+Engine+Guide](https://cwiki.apache.org/confluence/display/OFBIZ/Service+Engine+Guide)

# algorithm - 未排序数组中的局部最小值

> ID：11803597
> 
> 赞同：8
> 
> 时间：2012-08-03T21:33:47.373
> 
> 标签：algorithm

假设我有一个 0<=i<=n-1 的数组 a[i]。我可以使用复杂度为 O(log n) 的算法找到 i 满足 1<=i<=n-2, a[i]<=a[i+1] 和 a[i]<=a[i -1]？也就是说，我可以在对数时间内找到局部最小值吗？

[**注意**：我将问题（已更改多次）编辑为可以合理回答的问题。我删除了早期版本中出现的奇怪的结束条件，因为这个版本更简单，但不失一般性。]

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-03T21:53:49.633

首先，我们需要考虑如何定义局部最小值：

```
a[i] < a[i-1] and a[i] < a[i+1] 
```

从这种情况下，我们看到如果我们在 X/Y 图上绘制数组（X=index，Y=value），局部最小值将位于谷底。因此，为了确保存在局部最小值，我们必须保证存在斜率符号的变化（从减小到增大）。

如果您知道某个范围的端点斜率行为，您就知道其中是否存在局部最小值。此外，您的数组必须具有从 a[0] 到 a[1] 减小斜率符号并将斜率符号从 a[n-1] 增加到 a[n] 的行为，否则问题很简单。考虑：

```
a = [1,2,3,4,5] (increasing, increasing) a[0] is an LM
a = [5,4,3,2,1] (decreasing, decreasing) a[n] is an LM
a = [1,2,2,2,1] (increasing, decreasing) a[0] and a[n] are LMs 
```

我想这对你完成方法应该是足够的启发。

请注意，扩展此方法仅适用于唯一值，例如全为 1 的数组，除非您进行一些边缘情况检测，否则它不会有 O(log n) 运行时间。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-03T21:41:05.543

除非您的数组有其他约束，否则如果没有（至少）线性时间预处理，您将无法在 O(log n) 中找到局部最小值，因为在最坏的情况下，您需要检查数组中的每个元素。不难正式证明这个陈述，其思想是构造这样的数组，对于每种扫描方法，该方法将在构造数组上以线性时间起作用。

例如，假设您正在`n`从头到尾对大小数组进行简单扫描：如果您的最小值位于`n-1`第 -th 位置，那么您只会在`n-1`迭代后发现它，即`O(n)`

[http://www.careercup.com/question?id=8223978](http://www.careercup.com/question?id=8223978)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-03T21:53:53.453

它通过类似于 O(log n) 中的二进制搜索方法来解决，但仅在数组中有一个局部最小值和不同数字的情况下。您的数组必须类似于以下内容：

```
8 5 4 3 [1] 2 6 9 
```

一是这里的局部最小值。

检查界限。如果 a[0] < a[1]，则 a[1] 是局部最小值。如果 a[n-1] > a[n]，a[n] 是局部最小值。如果这些条件都不成立 - 开始划分：

检查 a[n/2]，如果 a[n/2] > a[n/2 + 1] 则在数组右侧的局部最小值，否则在左侧。之后递归解决问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-15T06:39:06.587

我无法反驳这个解决方案的工作原理，所以如果有人可以，我会很高兴。

考虑从 1 到 n 索引的数组“a”。

```
low = 1
high = n
mid = (low + high)/2 
```

在不失一般性的情况下，我将假设数组值是不同的。所以，在中间， a[mid - 1], a[mid], a[mid + 1] 可以是：

```
Case 1:

/\

Case 2:

\/

Case 3:

 / 
/

Case 4:

 \
  \

Case 5(boundary):
/

Case 6(boundary):
\ 
```

&m = 中

可以使用 if 条件检查每种情况，如下所示：

```
1: a[m] > a[m-1] && a[m] > a[m+1]
2: a[m] < a[m-1] && a[m] < a[m+1]
3: a[m] > a[m-1] && a[m] < a[m+1]
4: a[m] < a[m-1] && a[m] > a[m+1] 
```

我也将忽略解释边界情况：

第二种情况是 a[m] 是局部最小值的理想情况

第三种情况：

总是有一个局部最小值在左边，所以，设置 h = m - 1 并继续

第四种情况：

右边总是有一个局部最小值，所以，l = m + 1 并继续

对于第一种情况，我可以朝任何一个方向前进：我相信这是可行的，因为您减少正在考虑的段的唯一时间是当您确定减少的段中有局部最小值时，因此您搜索的段将始终具有一些局部最小值。

注意：这仅适用于找到单个局部最小值，而不是每个局部最小值。后一种情况需要 O(n) ，因为您肯定必须至少查看整个数组一次。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-10-04T05:25:43.223

这个问题可以`O(logn)`通过使用一种二分搜索来解决。

[这个技巧在http://www.dsalgo.com/2013/03/find-local-minima-in-array.html](http://www.dsalgo.com/2013/03/find-local-minima-in-array.html)中有很好的解释。该网站提供了递归实现。

我实际上想出了另一个迭代实现，如下所示。

```
#include <cstdio>
#include <vector>
using std::vector;

int SearchLocalMinima(const vector<int>& sspace) {
        if (sspace.size() < 2)
                return -1;
        if (sspace.size() == 2)
                return 0;
        int L = 0, U = sspace.size() - 1;
        while (L<U) {
                int M = L + (U - L) / 2;
                if (M - 1 == L) {
                        if (sspace[M] <= sspace[M + 1])
                                return M;
                        else
                                return M + 1;
                } else {
                        if (sspace[M] <= sspace[M + 1])
                                U = M + 1;
                        else
                                L = M;
                }

        }
        return -1;
}

int main() {
        vector<int> values{64, 14, 52, 27, 71, 19, 63, 1, 16, 57};
        printf("Local minima: %d\n", SearchLocalMinima(values));
        return 0;
} 
```

输出：`Local minima: 7`

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-08-03T22:00:19.567

**编辑：**仅当局部最小值由“<=”定义时才有效，而不是“<”。但是，使用“<”没有解决方案。因此，我将把它保留在这里，并注意它不能解决 OP 的（无法解决的）问题。

* * *

如果至少存在一个局部最小值，则以下分治法应该在 O(log n) 中找到一个局部最小值。

1.  考虑第一个、最后一个和中间元素（我们称它们为 A、B、C）。
2.  如果 A 是三个中最小的，则继续数组的前半部分。
3.  否则，如果 C 是三个中最小的，则继续数组的后半部分。
4.  否则，（即 B 是三个中最小的一个），检查前半部分 (D) 的中间元素是否低于 B，在这种情况下使用左半部分。
5.  否则，检查右半部分 (E) 的中间元素是否低于 B，在这种情况下使用后半部分。
6.  否则，继续从 D 到 E 的元素（其中 B 位于中间）。

在每种情况下 2\. - 6\. 您继续使用在左侧和右侧具有较高元素的元素（尽管不一定直接），或者在边界处。每次要考虑的元素数量减半，所以它是 O(log n)。最后，您只考虑 3 个或更少的元素，其中的最小数量是局部最小值。

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2012-08-03T21:39:15.983

我假设这是一个家庭作业问题，所以我回答得当。如果您正在搜索局部最小值，则必须给您一个起始位置，因为您需要参考什么是“局部”。如果左边的元素小于该元素，则转到该元素并重试。否则，如果右侧的元素小于当前元素，则向右移动并重试。否则，当前元素是局部最小值。

编辑：在我阅读问题后添加了对 O(log n) 时间的要求。我将考虑满足此要求的解决方案。

另一个编辑：我认为这在未排序数组的 O(log n) 时间要求中是不可能的，因为没有办法将问题分成两半。另一方面，排序数组有一个简单的 O(1) 解决方案:)

# php - 使用数组数组会影响性能吗

> ID：11803600
> 
> 赞同：0
> 
> 时间：2012-08-03T21:34:11.203
> 
> 标签：php, arrays

我试图在允许我的一个函数接受一个数组数组还是只接受一个标准数组之间下定决心。

带有数组的数组将允许我验证每个数组键，但如果我能够看到使用标准数组的改进性能，则没有必要。

两者之间是否有任何性能差异（性能方面）？

例如

**数组数组**

```
$arr2 = array(
   array('isbn' => '1846031249'),
   array('isbn' => '0340912081'),
   array('isbn' => '0435446576'),
   array('isbn' => '1741845467'),
   array('isbn' => '0750924721'),
   array('isbn' => '1843286432'),
   array('isbn' => '011331079X'),
   array('isbn' => '9063325819')
); 
```

**普通数组**

```
$arr2 = array(
   '1846031249',
   '0340912081',
   '0435446576',
   '1741845467',
   '0750924721',
   '1843286432',
   '011331079X',
   '9063325819'
); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T21:38:54.457

不要做数组数组！您不必要地增加了需要存储在内存/进程中的信息量。在您的情况下，当每个值都只是一个 ISBN 时，请跟踪数组，以便您记住其中的内容并废弃重复的标签。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T21:42:36.283

在你需要之前不要增加复杂性，而不是之前。当事情发生变化时，返回并编辑您的函数以使用新的输入格式并没有错。（我假设这不是公共 API 或其他东西。）

再加上数组的数组使得排序变得非常困难，但更糟糕的是，如果不迭代整个数组就不可能检查数组值的存在。

常规数组有很多函数可以实现这一点。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-03T21:47:06.977

将您拥有的每个 ISBN 代码存储为只有一个键的关联数组是没有用的。想一想，哪个需要更长的时间？：

1.  我们正在搜索 ISBN = xxxxxxxxx。打开 $array[0]->打开 $innerarray[0] -> 未找到 -> 关闭 $innerarray -> 打开 $array[1] -> 打开 $innerarray[0] -> 未找到等...
2.  我们正在搜索 ISBN = xxxxxxxxx。打开 $array[0]-> 未找到 -> 打开 $array[1] -> 未找到 -> 打开 $array[2] 等...

当您在其中存储 10.000 个值时，第二种方法要快得多。打开 10.000 个数组来搜索 $innerarray[0] 上的值比只打开一个数组需要更多的操作。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-03T21:37:38.013

是的，第一个选项需要更长的时间来初始化并且需要更多的内存。

但是除非他/她循环处理它们数千次或创建非常大的数组，否则不会注意到差异。

# python - 尝试连接时出现 SMTP python 回溯错误

> ID：11803601
> 
> 赞同：1
> 
> 时间：2012-08-03T21:34:11.913
> 
> 标签：python, smtp

所以我收到了这个错误：

```
import smtplib
server = smtplib.SMTP()
server.connect()
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/usr/lib/python2.7/smtplib.py", line 309, in connect
    self.sock = self._get_socket(host, port, self.timeout)
  File "/usr/lib/python2.7/smtplib.py", line 284, in _get_socket
   return socket.create_connection((port, host), timeout)
  File "/usr/lib/python2.7/socket.py", line 571, in create_connection
    raise err
socket.error: [Errno 111] Connection refused 
```

不完全确定为什么 :s 有人可以帮帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T21:36:12.173

您正在尝试连接 'localhost'、端口 25（的默认值[`.connect()`](http://docs.python.org/library/smtplib.html#smtplib.SMTP.connect)），并且那里没有服务器正在侦听。因此连接被拒绝。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-28T13:38:57.920

[这有一个很好的例子，说明如何在 python 中使用 smtp](http://www.pythonforbeginners.com/code-snippets-source-code/using-python-to-send-email "这有一个很好的例子，说明如何在 python 中使用 smtp")

链接： http: [//www.pythonforbeginners.com/code-snippets-source-code/using-python-to-send-email](http://www.pythonforbeginners.com/code-snippets-source-code/using-python-to-send-email)

# c# - 在 C# 中访问异步 Web 服务方法

> ID：11803603
> 
> 赞同：0
> 
> 时间：2012-08-03T21:34:12.423
> 
> 标签：c#, web-services, windows-phone-7

我正在尝试非常简单地对 Web 服务方法进行异步调用并获取返回值。我在 Visual Studio 2010 中使用它的服务引用代理类功能来执行此操作。奇怪的是，这方面的资源很少而且相差甚远，而且大部分都是过时的，使用 Begin[Method] 和 End[Method] 而不是 [Method]Async 和 [Method]Completed。

我试图遵循这个： http: [//msdn.microsoft.com/en-us/library/55xs7d7f](http://msdn.microsoft.com/en-us/library/55xs7d7f(v=vs.80).aspx) (v=vs.80).aspx 。当引发表示方法已返回的事件时，我总是得到 null 结果。

```
MyWebServiceClient client = new MyWebServiceClient();
client.webMethodCompleted += 
    new System.EventHandler<webMethodCompletedArgs>(Callback);
client.webMethodAsync(); 
```

稍后在代码中，`Callback`方法：

```
void Callback(object sender, webMethodCompletedArgs args)
{
    string data = args.Result;
} 
```

问题是，如果我运行这段代码，`args.Result`将永远是`null`. 我已经使用同步接口测试了 Web 服务，它工作得很好，所以我知道它不是 Web 服务。我对这些东西很陌生，所以我可能做错了一些非常简单的事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T21:53:47.167

如果 args.Result 为 null，则 args.Error 属性应填充发生的异常。

# c++ - Zlib 充气和放气错误

> ID：11803606
> 
> 赞同：0
> 
> 时间：2012-08-03T21:34:25.917
> 
> 标签：c++, zlib, compression

大家好，我基本上是在尝试使用 zlib 库，但是当我尝试为自放气文件充气时遇到了麻烦，尽管当我为其他 zlib'd 文件充气时它工作正常。

压缩代码：

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
typedef unsigned char BYTE;
typedef unsigned int  UINT; 
#include "zlib.h"
#define HEADERSIZE (1024)
#define CHUNKSIZE 4096
#define SWAPINT(x) (((x)&0xFF) << 24)|(((x)&0xFF00) << 8) | (((x)&0xFF0000) >> 8) | (((x)&0xFF000000) >> 24)
#define DEFLATESIZE 65536
const char *mz_error(int err)
{
  static struct { int m_err; const char *m_pDesc; } s_error_descs[] =
  {
    { Z_OK, "" }, { Z_STREAM_END, "stream end" }, { Z_NEED_DICT, "need dictionary" }, { Z_ERRNO, "file error" }, { Z_STREAM_ERROR, "stream error" },
    { Z_DATA_ERROR, "data error" }, { Z_MEM_ERROR, "out of memory" }, { Z_BUF_ERROR, "buf error" }, { Z_VERSION_ERROR, "version error" }
  };
  UINT i; for (i = 0; i < sizeof(s_error_descs) / sizeof(s_error_descs[0]); ++i) if (s_error_descs[i].m_err == err) return s_error_descs[i].m_pDesc;
  return NULL;
}

char* myinflate(char* buffer, int bufsize, int* inflatedSize)
{
    BYTE tmpinf[DEFLATESIZE];
    char* inflated=(char*)malloc(DEFLATESIZE);
    int ret,have;
    z_stream strm;
    strm.zalloc = Z_NULL;
    strm.zfree = Z_NULL;
    strm.opaque = Z_NULL;
    strm.avail_in = bufsize;
    strm.next_in = (Bytef*)buffer;
    strm.avail_out = sizeof(tmpinf);
    strm.next_out = tmpinf;
    ret = inflateInit(&strm);
    printf("%s",mz_error(ret));
    ret = inflate(&strm, Z_FINISH);
    printf("%s",mz_error(ret));
    if(ret == Z_DATA_ERROR)
        printf(strm.msg);
    inflateEnd(&strm);
    have = strm.total_out;
    printf("%d\n",have);
    memcpy(inflated,tmpinf,have);
    *inflatedSize = have;
    return inflated;
}
char* mydeflate(char* buffer, int bufsize, int* deflatedSize)
{
    BYTE tmpdef[CHUNKSIZE*4];
    char* deflated=(char*)malloc(DEFLATESIZE);
    int have,ret;
    z_stream strm;
    strm.zalloc = Z_NULL;
    strm.zfree = Z_NULL;
    strm.opaque = Z_NULL;
    strm.avail_in = bufsize;
    strm.next_in = (Bytef*)buffer;
    strm.avail_out = sizeof(tmpdef);
    strm.next_out = tmpdef;
    ret = deflateInit(&strm,Z_DEFAULT_COMPRESSION);
    printf("%s",mz_error(ret));
    ret = deflate(&strm, Z_FINISH);
    printf("%s",mz_error(ret));
    ret = deflateEnd(&strm);
    printf("%s",mz_error(ret));
    have = strm.total_out;
    printf("%d\n",have);
    memcpy(deflated,tmpdef,have);
    *deflatedSize = have;
    return deflated;
}
int main()
{
    FILE* fptr = fopen("test.in","rb");
    fseek (fptr, 0, SEEK_END);
    int size  = ftell(fptr);
    fseek (fptr, 0, SEEK_SET);
    char* buffer = (char*)malloc(size);
    fread(buffer,1,size,fptr);
    int infsize,defsize;
    char* buf = myinflate(buffer,size,&infsize);
    FILE* out = fopen("testinf.hex","wb");
    fwrite(buf,1,infsize,out);
    fclose(out);
    char* buf2 = mydeflate(buf,infsize,&defsize);
    out  = fopen("testdef.hex","wb");
    fwrite(buf2,1,defsize,out);
    fclose(out);
    int buf3size;
    char* buf3 = myinflate(buf2,defsize,&buf3size);
    out  = fopen("testinfdef.hex","wb");
    fwrite(buf3,1,buf3size,out);
} 
```

[http://www.filehosting.org/file/details/364574/eEyzAbMuCp93MmGk/test.in](http://www.filehosting.org/file/details/364574/eEyzAbMuCp93MmGk/test.in)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-04T00:52:58.883

您没有检查*任何*返回码。你怎么可能期望知道发生了什么？ *检查所有可能返回错误的函数的返回码！*

可能根本没有为压缩和/或解压缩提供足够的空间。`inflate()`和的返回代码`compress()`指示是否是这种情况。

顺便说一句，你`malloc()` `inflated`两次覆盖第一个导致大量内存泄漏。

您还可以轻松地将 int 指针转换为无符号长指针。如果它们的长度不同，那么您将遇到问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T21:43:24.137

实际上，我必须定义 ZLIB_WINAPI 才能使用[http://www.winimage.com/zLibDll/zlib125dll.zip](http://www.winimage.com/zLibDll/zlib125dll.zip)。现在它可以工作了

# php - 在 MAMP 上安装 ffmpeg

> ID：11803608
> 
> 赞同：0
> 
> 时间：2012-08-03T21:34:32.770
> 
> 标签：php, ffmpeg, mamp, pecl, ln

我正在尝试遵循本教程：[http](http://drupal.org/node/1464236) : //drupal.org/node/1464236 on installation ffmpeg on MAMP（用于 Drupal，这是偶然的）

我被困在这里：

*您还应该在终端中执行*

```
which php pecl phpize 
```

*这应该指向您的 MAMP 安装：*

```
/Applications/MAMP/bin/php/php5.x.x/bin 
```

...但是当我这样做时，`which php pecl phpize`说它指向`/usr/bin/php`（分别是 pecl 和 phpize ）。如果我这样做`ln /usr/bin/php /Applications/MAMP/bin/php/php5.3.6/bin/php`，它会说“文件已经存在”。如何指向正确的文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T21:46:23.243

你`$PATH`错了，这意味着该教程的第一步出现了问题：

> 首先将您的 php 和 phpize 指向您的 MAMP 环境
> 在 ~/.profile 或 ~/.bashrc （对于 bash）中添加/更改以下行：
> 
> ```
>  export PATH=/Applications/MAMP/Library/bin:/Applications/MAMP/bin/php/php5.2.17/bin:/usr/local/bin:$PATH:/opt/local/bin 
> ```
> 
> 然后请重新登录（或只执行例如/bin/bash）。

你记得重新登录吗？

* * *

让我还要补充一点，做类似你尝试修复的事情`ln`通常不是一个好主意。 `/usr/bin`通常包含系统安装的软件，并且可能取决于该软件在正确位置的正确版本。如果您想为某事使用不同版本的 PHP，标准做法是将其安装在其他位置，例如`/usr/local/bin`.，然后将该目录列在之前`/usr/bin`的`$PATH`. 这样，您将使用您的版本，而系统仍将使用其版本。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-08-03T21:41:07.427

尝试

```
ls -l /usr/bin 
```

如果它`/usr/bin/php -> /Applications/MAMP/bin/php/php5.x.x/bin`在最后一列中显示类似的内容，那么一切都很好。否则，您可能必须卸载非 MAMP php 安装。

编辑：您还可以将 MAMP php 路径放在 $PATH 中的 /usr/bin 之前。链接教程中的第一步告诉您如何做到这一点。

# entity-framework - 从实体框架代码优先中的子导航属性或父导航属性

> ID：11803612
> 
> 赞同：0
> 
> 时间：2012-08-03T21:34:49.273
> 
> 标签：entity-framework, relationship, one-to-one

鉴于我有两个实体：`Deputy`和`DeputyProfile`：

```
public class Deputy : IdableEntity
{
    [Required]
    public string FirstName { get; set; }

    public string Patronimic { get; set; }

    [Required]
    public string LastName { get; set; }
}

public class DeputyProfile : IdableEntity
{
    [Required]
    public string Dosieur { get; set; }
} 
```

在它们之间建立一对一关系的最佳方法是将导航属性从代理配置文件放置到代理（子到父）或签证诗？

应该是这样吗：

```
public class DeputyProfile : IdableEntity
{
    [Required]
    public virtual Deputy Deputy{ get; set; }

    [Required]
    public string Dosieur { get; set; }
} 
```

做出该决定的最佳逻辑规则是什么？

PS作为一个孩子`IdableEntity`给一个班级自己的Guid Id字段。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T22:11:21.840

您必须为任何关系选择主（父）端和从属（子）端。你可以自由选择你最喜欢的。对我来说，代理似乎是明确的校长，因为随着您的模型的增长，它可能会拥有更多的关系。

一对一关系由共享主键实现；代理配置文件必须以代理 ID 作为其主键。这将使您的代码如下所示：

```
public class Deputy
{

   public int ID {get;set;}

   public int ProfileID {get;set;}
   public virtual DeputyProfile Profile {get;set;}

    [Required]
    public string FirstName { get; set; }

    public string Patronimic { get; set; }

    [Required]
    public string LastName { get; set; }
}

public class DeputyProfile
{
    public int DeputyID {get;set}
    public virtual Deputy Deputy {get;set}

    [Required]
    public string Dosieur { get; set; }
} 
```

注意：由于现在实施，每个代理都必须有一个配置文件。如果配置文件是可选的，则将 ProfileID 设为“int？”。

我衷心推荐这个关于在 Entity Framework 4.1 及更高版本中实现关系的[优秀系列博客](http://weblogs.asp.net/manavi/archive/2011/03/27/associations-in-ef-4-1-code-first-part-1-introduction-and-basic-concepts.aspx)

# jquery - 使用 $.ajax 和 jQuery 1.7.2 进行跨域请求

> ID：11803613
> 
> 赞同：2
> 
> 时间：2012-08-03T21:34:53.280
> 
> 标签：jquery, ajax, jsonp

我一直这样做，使用 jsonp：

```
$.ajax({
    url         : 'http://domain.local/api/3/authentication/get-token',
    type        : 'POST',
    dataType    : 'jsonp',
    data        : 'username=user&secret=pass',
    success     : function(data) {
        console.log(data);
    }
}); 
```

它适用于旧的 jQuery 版本（1.3、1.4），但似乎不适用于最新版本（从 1.5.x 开始，它会发出奇怪的 GET 或 OPTION 请求）

关于如何解决这个问题的任何想法？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T21:43:42.627

新版本的 jQuery 一直在为我工作。我认为问题在于您使用的是 POST 请求，而 JSONP 不允许这样做：

> 您不能使用 JSONP 发布……它根本无法以这种方式工作，它创建一个元素来获取数据……这必须是一个 GET 请求。除了发布到您自己的域作为代理发布到另一个域之外，您无能为力……但是用户将无法直接执行此操作并看到响应。

从[如何使用类型：jsonp ajax 调用中的“POST”](https://stackoverflow.com/questions/4508198/how-to-use-type-post-in-jsonp-ajax-call)

您的通话应如下所示：

```
$.ajax({
    url         : 'http://domain.local/api/3/authentication/get-token',
    type        : 'GET',
    dataType    : 'jsonp',
    data        : 'username=user&secret=pass',
    success     : function(data) {
        console.log(data);
    }
}); 
```

* * *

如果上述方法不起作用，请尝试查看使用 Firebug 发送的参数。jQuery 应该发送一个“回调”参数，其值类似于“jQuery1710013558088336139917_1344030860953”。

还要查看服务器的响应。服务器应该返回返回数据，如下所示：

```
jQuery1710013558088336139917_1344030860953({"data":"goes here"}) 
```

# python - 使用 cx_Freeze 将所有 DLL 和 PYD 移动到子文件夹

> ID：11803616
> 
> 赞同：12
> 
> 时间：2012-08-03T21:35:36.783
> 
> 标签：python, cx-freeze

这在 cx_Freeze 邮件列表中出现了很多次

（看

[cx_Freeze 和移动文件](https://stackoverflow.com/questions/4381470/cx-freeze-and-moving-files-around)

[冻结 Python 应用程序时创建的文件更少](https://stackoverflow.com/questions/3241325/creating-fewer-files-when-freezing-a-python-application)

[cx_freeze python 单个文件？](https://stackoverflow.com/questions/4999567/cx-freeze-python-single-file?rq=1) )

在我看来，这应该是一个简单的修复，但我不知道如何开始。

我有一个 python 应用程序，它依赖于 scipy、wxpython、numpy 和一堆其他包，每个包都有很多动态链接库。主要的可执行文件夹被 PYD 和 DLL 文件弄得非常混乱，甚至很难在所有文件中找到可执行文件。我的用户不是特别精通计算机，因此清晰度非常重要。

我不需要像理论上可以由 bbfreeze 生成的单个可执行文件。我喜欢 distutils setup.py 文件如何与 cx_Freeze 一起工作，并且在其他方​​面 cx_Freeze 非常出色。

我想要的只是一种清理主可执行文件夹的方法。如果可能的话，我会非常高兴手动将 DLL 文件移动到 freeze_libs 文件夹或其他东西，然后修改共享库加载路径以帮助它找到动态库。或类似的东西。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-03-08T07:44:21.640

“手动”做到了，但这是正确的方法吗？我在 win7 x64 cx_freeze 4.3.2

我的 init_script，结合自`Console.py`和`ConsoleSetLibPath.py`

```
import encodings
import os
import sys
import warnings
import zipimport

paths = os.environ.get("LD_LIBRARY_PATH", "").split(os.pathsep)
if DIR_NAME not in paths:
    paths.insert(0, DIR_NAME)
    os.environ["LD_LIBRARY_PATH"] = os.pathsep.join(paths)
    os.execv(sys.executable, sys.argv)

sys.frozen = True
sys.path = sys.path[:4]

# i added this line
sys.path.append(r'lib')

os.environ["TCL_LIBRARY"] = os.path.join(DIR_NAME, "tcl")
os.environ["TK_LIBRARY"] = os.path.join(DIR_NAME, "tk")

m = __import__("__main__")
importer = zipimport.zipimporter(INITSCRIPT_ZIP_FILE_NAME)

# The following if/else is copied from ConsoleSetLibPath.py
if INITSCRIPT_ZIP_FILE_NAME != SHARED_ZIP_FILE_NAME:
    moduleName = m.__name__
else:
    name, ext = os.path.splitext(os.path.basename(os.path.normcase(FILE_NAME)))
    moduleName = "%s__main__" % name

code = importer.get_code(moduleName)
exec code in m.__dict__

versionInfo = sys.version_info[:3]
if versionInfo >= (2, 5, 0) and versionInfo <= (2, 6, 4):
    module = sys.modules.get("threading")
    if module is not None:
        module._shutdown() 
```

然后我将此文件保存在我`C:\Python27\Lib\site-packages\cx_Freeze\initscripts`的`ConsoleSetLibPathx.py`setup.py 中

```
setup(
    name = 'xxx',
    version = '0.1',
    options = {'build_exe': {'includes':includes,
                             'excludes':excludes,
                             'packages':packages,
                             'include_files':includefiles,
                             'create_shared_zip':True,
                             'include_in_shared_zip':True,
                              # use the "hacked" init_script ?
                             'init_script':'ConsoleSetLibPathx',
                             'include_msvcr':True,
                             }

                             }, 
    executables = [exe]
)

# Am i supposed to do the mkdir lib , and copy *.pyd *.dll into it in the end of this setup.py here? 
# I verified this is working by manually creating lib dir and copy all files inside, it works. 
```

我觉得我应该在选项中或某个地方这样做，但现在不太了解 cx_freeze 文档。也许 --target-dir 或 --default-path 或 --replace-paths ？不知道如何使用它们

编辑：抱歉，这需要改进，当我在 vmware 中的另一个干净的 win7 中测试它时，它正在工作，但它的行为很奇怪，我的非阻塞读取按键代码不起作用。不确定哪个部分是错误的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-01-07T20:59:20.933

我理解你的沮丧。假设您使用的是 Windows 机器，我倾向于将整个构建文件夹移动到程序文件目录中。然后在桌面上创建可执行文件的快捷方式。然后，我通常将图标更改为令人赏心悦目的东西。换句话说，所有系统文件都被隐藏了，剩下的只是桌面上一个漂亮的图标。

# ios - 搜索字符串为空时显示 UISearchDisplayTableView

> ID：11803619
> 
> 赞同：6
> 
> 时间：2012-08-03T21:35:51.000
> 
> 标签：ios, uitableview, uisearchdisplaycontroller

这非常令人沮丧：即使搜索字符串为空，我也试图在 UISearchDisplayController 中显示未过滤的结果。

添加调试代码`numberOfSectionsInTableView:`并`numberOfRowsInSection:`显示当我的搜索字符串为空时，将返回非零整数，但从`cellForRowAtIndexPath:`不调用！表格视图似乎被隐藏了。

我尝试设置无济于事`tableview.hidden=NO;`。`searchDisplayController:(UISearchDisplayController *)controller didHideSearchResultsTableView:(UITableView *)tableView`

这并不难实现，我想这是一件很常见的事情！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-10-15T17:43:16.727

我知道这是一篇旧帖子，但我在使用新的 iOS8 UISearchController 时遇到了同样的问题。解决方法是检查字符串是否为空并设置结果tableview的属性`HIDDEN = NO`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-01-25T00:29:32.533

您可以做的是当用户单击搜索并且字符串为空时，将 searchBartext 更改为“\n”回车

```
self.searchDisplayController.searchBar.text = @"\n"; 
```

回车不会显示在搜索栏中，也不会是相同的字符串，就像用户键入“\n”一样。所以它工作正常。在里面

```
-(BOOL)searchDisplayController:(UISearchDisplayController *)controller shouldReloadTableForSearchString:(NSString *)searchString 
```

方法您可以将搜索栏文本设置回@""。如果搜索字符串是 @"\n"

```
self.searchDisplayController.searchBar.text = @""; 
```

这对我有用！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-23T23:25:28.237

这个问题的解决方案是不使用 UISearchDisplayController。它根本不提供执行此类操作所需的灵活性。使用 UISegmentedControl、UISearchBar 和 UITableView 构建您自己的自定义搜索界面，以获得最大的灵活性。

# magento - 如何禁用 Magento 定期配置文件和计费协议？

> ID：11803624
> 
> 赞同：6
> 
> 时间：2012-08-03T21:36:28.093
> 
> 标签：magento

有没有一种简单的方法（例如：使用 local.xml）来完全禁用 Magento（v 1.7+）中的重复配置文件和计费协议？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-08-04T21:13:47.680

创建块并添加链接：

`app/design/frontend/base/default/layout/sales/billing_agreement.xml`

`app/design/frontend/base/default/layout/sales/recurring_profile.xml`

通常我会建议之后删除链接，但`Mage_Customer_Block_Account_Navigation`没有 removeLink 方法，所以我认为唯一的方法是复制主题中的两个 xml 文件并删除内容。如果仅删除 addLink 节点，则用户在其登录区域的导航中没有链接。

有很多扩展可以做到这一点。

我实现了自己的一个： [https ://github.com/ikonoshirt/ExtendedAccountNavigation](https://github.com/ikonoshirt/ExtendedAccountNavigation)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-25T13:39:04.413

还有另一种方法可以使这项工作。在其中创建一个 blank.xml 文件，并将以下配置添加到 app/etc/local.xml 文件中。此方法不需要更改或布局文件覆盖。

```
<config>
        <frontend>
        <layout>
            <updates>
                <sales_billing_agreement>
                    <file>blank.xml</file>
                </sales_billing_agreement>
                <sales_recurring_profile>
                    <file>blank.xml</file>
                </sales_recurring_profile>
            </updates>
        </layout>
    </frontend>
</config> 
```

# python - 为什么 xvfb 下的文字会变大？

> ID：11803628
> 
> 赞同：5
> 
> 时间：2012-08-03T21:36:58.850
> 
> 标签：python, fonts, xvfb

我正在尝试使用 Xvfb 测试 GUI 应用程序。我遇到的问题是应用程序对其文本的大小很敏感，这在使用 Xvfb 时显然不同。两种情况下的默认字体和屏幕分辨率相同。

具体来说，我有以下 Python/PyGtk 代码，在 Ubuntu 12.04 上运行：

```
## fontsize_gtk.py

import gtk

e = gtk.Entry()
l = e.create_pango_layout("S")
print l.get_context().get_font_description().to_string()
print l.get_pixel_size() 
```

所以我使用我的真实显示器和相同大小的虚拟显示器运行它：

```
$ python fontsize_gtk.py 
Sans 10
(8, 17)
$ Xvfb -ac -screen 0 1366x768x24 :2 > /dev/null 2>&1
$ env DISPLAY=:2 python fontsize_gtk.py
Sans 10
(9, 17) 
```

关于为什么它更大或如何调试它的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T21:42:29.037

字体分辨率（以 DPI 为单位）不同。

# javascript - 无法填充表单内的输入字段

> ID：11803630
> 
> 赞同：2
> 
> 时间：2012-08-03T21:37:02.413
> 
> 标签：javascript, jquery, forms, html

我无法填充表单内的输入字段。这是什么原因？我花了很多时间在互联网上寻找正确的答案，但不幸的是还没有。

为了更好地理解我的问题，我将提供网站链接：http: [//flyingcowproduction.com/pls/](http://flyingcowproduction.com/pls/)并单击注册按钮。

我很确定 CSS 不是问题，而是 jquery。我不知道如何解决这个问题以解决它。

非常感谢您提前帮助我解决了这个问题。这几天一直困扰着我。

最好的祝福，

-达沃林

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T22:36:50.243

您的问题似乎出在您的`desktop.js`文件中，其中包含函数 mousedownhandler 和 mouseuphandler，这两个函数`e.preventDefault()`当然都用于阻止鼠标的默认行为。这些函数应用于附加到`div`id的事件侦听器`singleContentContainer`，其中包含所有内容，包括您的表单。

我相当肯定，如果您注释掉以下两行：

第 194 行：

```
e.preventDefault(); 
```

和 238：

```
e.preventDefault(); 
```

您将能够再次选择表单元素。如果这不起作用，我将在您完成后继续调试。

**编辑**

至于您的表单未提交的原因，这似乎是`jquery.mobile-1.0a2.js`脚本中某个选项的原因；您启用了“尽可能使用 ajax 表单”；在该文件的线上`3094`，是`event.preventDefault();`，如果启用了该选项，则会发生这种情况，因为它是......好吧，你可以猜到其余的。

该选项在线配置`2934`。

至于为什么提交不起作用，您的相对 url 显示为 a [`404 not found error`，表示它不存在](http://flyingcowproduction.com/process.php)。您的表单提交正常，只是没有得到处理，因为您用来指向它的相对路径中不存在流程文件。

# javascript - 使用 HTML5 和 Javascript 修改现有文件

> ID：11803631
> 
> 赞同：0
> 
> 时间：2012-08-03T21:37:02.950
> 
> 标签：javascript, html

我正在尝试使用 HTML5 和 Javascript 编写一个简单的客户端文本编辑器。是否可以使用 HTML5 覆盖现有文本文件的内容？我知道 HTML File API 可以读取文件的内容，但我还没有找到修改或覆盖现有文件的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T21:48:32.603

### 提示打开

要读取文件，请使用[`FileReader`](https://developer.mozilla.org/en-US/docs/DOM/FileReader)API（[示例](https://developer.mozilla.org/en-US/docs/Using_files_from_web_applications)）：

### 提示保存

要保存文件，请使用[`URL.createObjectURL`](https://developer.mozilla.org/en/DOM/window.URL.createObjectURL)（通过`FileReader`API 构建 blob，使用`type` `application/octet-stream`）或使用数据 URI（[示例](https://stackoverflow.com/a/10473992/938089)）创建一个 URL。

# iphone - 如何更新 CoreData 中对象的值？

> ID：11803633
> 
> 赞同：0
> 
> 时间：2012-08-03T21:37:13.747
> 
> 标签：iphone, ios, xcode, core-data

我对使用 CoreData 进行编程有点陌生，所以我不知道如何去做。我正在尝试更新存储在 CoreData 对象中的字符串，但我对如何执行此操作一无所知。这是我的代码：

这是我制作新对象的地方：

```
- (void)insertNewObject:(id)sender
{
     self.steakName = @"No Name";
     NSManagedObjectContext *context = [self.fetchedResultsController managedObjectContext];
     NSEntityDescription *entity = [[self.fetchedResultsController fetchRequest] entity];
     NSManagedObject *newManagedObject = [NSEntityDescription      insertNewObjectForEntityForName:[entity name] inManagedObjectContext:context];

     [newManagedObject setValue:self.steakName forKey:@"steakName"];

     // Save the context.
     NSError *error = nil;
     if (![context save:&error]) {
         NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
         abort();
     }
} 
```

这是我要更新它的地方：（它正在与制作它的地方不同的类中更新。）

```
- (IBAction)update:(id)sender {
    MasterViewController *masterViewController = [[MasterViewController alloc] init];
    masterViewController.steakName = [self.steakNameTextField text];
    self.detailDescriptionLabel.text = masterViewController.steakName;
    NSLog(masterViewController.steakName);
} 
```

谢谢您的帮助！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T21:43:01.923

你做这件事的方式**几乎**与没有 Core Data 的情况相同。将对象的引用作为属性保存在创建对象的类中，并进行您想要的任何更改。唯一的区别是，当您希望更改持续存在时，您需要再次保存上下文。

# antlr - 具有通配符运算符的 ANTLR 嵌套语义谓词

> ID：11803642
> 
> 赞同：1
> 
> 时间：2012-08-03T21:38:02.483
> 
> 标签：antlr, antlr3, abstract-syntax-tree, antlrworks

我为类似 Scheme 的语言解释器创建了一个语法。最初，我有一个用于 if-then-else 语句的语义谓词来控制评估，即当条件为真时，仅评估“then”；当它为假时，仅评估“其他”。为了添加类型检查功能，我添加了第二个包含第一个语义谓词的语义谓词。不过，这是一个 hack，因为要进行类型检查或评估，我必须手动将全局布尔值更改`typeCheck`为 true 或 false。

IF 语句的 AST 现在有两个分支。第一个（IFT）用于对 IF 语句的参数进行类型检查。[这就是为什么有两个谓词；要进行类型检查，必须评估所有参数] 第二个分支 (IFE) 用于评估短路 if-then-else。当我添加包含第一个语义谓词的第二个语义谓词时，问题就开始了，得到了臭名昭著的“输入时没有可行的替代方案”错误。在慢慢无处可去之后，我只用基本要素创建了新语法。同样的问题。这是精简的 AST：

![如果AST](../Images/cb38da52af0259c1b41ff1d7a969e5b2.png)

虽然我从未经历过，但我已经看到在 Eclipse 中使用 ANTLR IDE 报告的 SO 问题。所以我启动了 ANTLRWorks，调试了解析器语法，然后尝试调试树语法。版本 1.4.3 和 1.4.2 都弹出这个框，“*警告：远程解析器使用的语法不一样*”。我单击 OK，然后在调试器中单击 Step Forward 一次，java.exe*32 进程终止。作为最后的测试，我用 antlr-3.3 和 antlr-3.4 完整的 jar 从命令行手动编译，没有变化。

解析器：

```
grammar NestedSemPreds;

options {
    output = AST;
    ASTLabelType = CommonTree;
}

tokens {
    IF;
    IFT;
    IFE;
}   

/** parser rules **/
ifstmt  : '(' 'if' COND THEN ELSE ')' NEWLN
            -> ^(IF ^(IFT COND THEN ELSE)
                    ^(IFE COND THEN ELSE)
                )
        ;

/** lexer rules **/
COND    : 'true' ; 
THEN    : 'then' ;
ELSE    : 'else' ;
COMMENT :   ('//' .* NEWLN) { skip(); } ; //for lines in datafile I don't want processed
NEWLN   :   '\r'? '\n' ;
WS      :   (' '|'\t')+ { skip(); } ; 
```

树语法：

```
tree grammar treeEval;

options {
    tokenVocab = NestedSemPreds;
    ASTLabelType = CommonTree;
}

@members {
    boolean typeCheck = false;
}

ifstmt 
@init {
    boolean condition = true;
}
 : ^(IF (  
           {typeCheck}? => //{System.out.println("typeCheck is true");}
                            ^(IFT COND THEN ELSE) {System.out.println("IFT COND THEN ELSE");}
                            ^(IFE . . .) {System.out.println("    SKIP IFE WITH . WILDCARD");}
        | {!typeCheck}? => //{System.out.println("typeCheck is false");} 
                            ^(IFT . . .) {System.out.println("skip ift with . wildcard");}
                            ^(IFE COND
                                    (  {condition}? => ({System.out.println("    condition is true");}
                                                       THEN . {System.out.println("        evaluate THEN");})
                                    | {!condition}? => ({System.out.println("    condition is false");}
                                                      . ELSE {System.out.println("        evaluate else");})
                                    )//close inner predicate
                             )//close ^IFE
        )//close outer predicate
    )//close ^IF
 ; 
```

我找不到关于嵌套语义谓词的任何特定问题，但我也没有找到任何示例。为什么这段代码失败了？关于 ANTLRWorks 调试器问题的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T20:35:16.937

使用 Bart 关于不需要“在第二种选择之前添加谓词”的评论，我做了一些额外的测试。所有测试的选项都是有效的语法，所以我认为这是一个 ANTLR 错误。切入正题，以下是有效的：

```
ifstmt 
@init {
    boolean condition = true;
}
 : ^(IF (  
           {typeCheck}? => ^(IFT COND THEN ELSE) {System.out.println("IFT COND THEN ELSE");}
                           . //MUST use only one dot
        | {!typeCheck}? => . //also works with ^(IFT . . .) here
                            ^(IFE COND
                                    (  {condition}? => ({System.out.println("    condition is true");}
                                                       THEN . {System.out.println("        evaluate THEN");})
                                    | {!condition}? => //this inner 2nd predicate not required
                                                      . ELSE {System.out.println("        evaluate else");})
                                    )//close inner predicates
                             )//close ^IFE
        )//close outer predicates
    )//close ^IF
 ; 
```

这两个步骤是**必需**的：

1.  外部谓词`{typeCheck}?`和`{!typeCheck}?`都是必需的。
2.  第一个外部谓词，单个`.`运算符跳过整个子树

如代码示例中所述，它仍然适用于以下两种语法更改中的任何一种：

1.  第二个*外部*谓词 ,`{!typeCheck}?`可以使用单个语法`.`或原始`^(IFT . . .)`语法。
2.  正如 Bart 提到的，第二个*内部*谓词*是可选的。*

另一个可行的解决方案是手动处理节点流并添加适当的代码，但这并不像让 ANTLR 做它的那样干净。

# c++ - 在 C 浮点数的 base-2 表示中获取“个”数字的位置

> ID：11803644
> 
> 赞同：2
> 
> 时间：2012-08-03T21:38:08.650
> 
> 标签：c++, c, floating-point, bit-manipulation

假设我有一个浮点数。我想提取数字的基数 2 表示中所有个位的位置。

例如，10.25 = 2^-2 + 2^1 + 2^3，所以它的 base-2 个位置是 {-2, 1, 3}。

一旦我有了一个 number 的 base-2 powers 列表`n`，下面的内容应该总是返回 true （在伪代码中）。

```
sum = 0
for power in powers:
    sum += 2.0 ** power
return n == sum 
```

但是，在 C 和 C++ 中对浮点数执行位逻辑有些困难，更难移植。

使用少量 CPU 指令的任何一种语言如何实现这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T21:50:39.357

放弃可移植性，假设 IEEE`float`和 32-bit `int`。

```
// Doesn't check for NaN or denormalized.
// Left as an exercise for the reader.
void pbits(float x)
{
    union {
        float f;
        unsigned i;
    } u;
    int sign, mantissa, exponent, i;
    u.f = x;
    sign = u.i >> 31;
    exponent = ((u.i >> 23) & 255) - 127;
    mantissa = (u.i & ((1 << 23) - 1)) | (1 << 23);
    for (i = 0; i < 24; ++i) {
        if (mantissa & (1 << (23 - i)))
            printf("2^%d\n", exponent - i);
    }
} 
```

这将打印出与给定浮点数相加的 2 的幂。例如，

```
$ ./a.out 156
2^7
2^4
2^3
2^2
$ ./a.out 0.3333333333333333333333333
2^-2
2^-4
2^-6
2^-8
2^-10
2^-12
2^-14
2^-16
2^-18
2^-20
2^-22
2^-24
2^-25

```

你可以看到 1/3 是如何四舍五入的，这并不直观，因为无论我们使用多少个小数位，我们总是会以十进制向下舍入它。

**脚注：**请勿执行以下操作：

```
float x = ...;
unsigned i = *(unsigned *) &x; // no 
```

的技巧`union`不太可能产生警告或混淆编译器。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-04T01:39:40.963

无需处理浮点数的编码。C 提供了以可移植方式处理浮点值的例程。以下作品。

```
#include <math.h>
#include <stdio.h>
#include <stdlib.h>

int main(int argc, char *argv[])
{
    /*  This should be replaced with proper allocation for the floating-point
        type.
    */
    int powers[53];
    double x = atof(argv[1]);

    if (x <= 0)
    {
        fprintf(stderr, "Error, input must be positive.\n");
        return 1;
    }

    // Find value of highest bit.
    int e;
    double f = frexp(x, &e) - .5;
    powers[0] = --e;
    int p = 1;

    // Find remaining bits.
    for (; 0 != f; --e)
    {
        printf("e = %d, f = %g.\n", e, f);
        if (.5 <= f)
        {
            powers[p++] = e;
            f -= .5;
        }
        f *= 2;
    }

    // Display.
    printf("%.19g =", x);
    for (int i = 0; i < p; ++i)
        printf(" + 2**%d", powers[i]);
    printf(".\n");

    // Test.
    double y = 0;
    for (int i = 0; i < p; ++i)
        y += ldexp(1, powers[i]);

    if (x == y)
        printf("Reconstructed number equals original.\n");
    else
        printf("Reconstructed number is %.19g, but original is %.19g.\n", y, x);

    return 0;
} 
```

# android - iOS 的多方等效项

> ID：11803648
> 
> 赞同：0
> 
> 时间：2012-08-03T21:38:21.290
> 
> 标签：android, ios, post, multipartentity

似乎没有可以导入的objective-c 库与android 的apache 库android 等效。

那么，如果我想使用相同的 php POST 脚本，从 iOS 应用程序向服务器发送视频文件的最佳方式是什么？

如果我使用`NSMutableRequest`，我如何模拟多方？以下代码块是否等效？

```
multipartentity.addpart("file", new FileBody(file));
mulitpartentity.addpart("form_submitted", new StringBody("true")); 
```

&

```
NSMutableData *body = [NSMutableData data];
NSMutableString *str = [[NSMutableString alloc] init];   
[str appendFormat:@"file=%@", self.fileData];
[str appendFormat:@"&form_submitted=%@", @"true"];

[body appendData:[postString dataUsingEncoding:NSUTF8StringEncoding]];

[theRequest setHTTPBody:body]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T13:16:57.793

如果你想在 iOS 中使用多部分实体类型功能，你必须使用第三方库 --- ASIHttpRequest 库！

从[这里下载](https://github.com/pokeb/asi-http-request)

您必须使用 ASIFormDataRequest 类来实现多部分实体类型功能，该功能包含在 ASIHttpRequest 库中...

另请参阅以下[帖子](https://stackoverflow.com/questions/15779755/unable-to-upload-video-using-asihttpformdatarequest-iphone)

另外，如果您需要，可以参考此[博客](http://nathanmock.com/archives/posting-form-data-from-ios#comment-3914)

希望能帮助到你 ！！

# c - 为动态数组的元素赋值

> ID：11803649
> 
> 赞同：1
> 
> 时间：2012-08-03T21:38:36.380
> 
> 标签：c, arrays, dynamic

我有两个数组：

`char line[128]`使用以下方式填充：

```
fgets(line,sizeof line, file) 
```

和

```
char* array;
  array=(char*) malloc(j*sizeof(char)); 
```

其中 j 是某个整数。

我想将“line”的元素分配给“array”的相应元素。

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T21:44:23.807

由于这些是 char 数组，您可以只使用 strcpy

```
 strcpy(array,line); 
```

注意您的动态阵列足够大以容纳线阵列。这将复制整个数组，或仅复制单个元素，

```
 array[i] = line[i]; 
```

注意 i 在数组的范围内。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T21:44:15.560

```
 array[N] = line[N]; // N is the corresponding element's index 
```

但是你必须确保它`N`是一个有效的索引 wrt`array`和`line`.

# gwt - 覆盖 GWT 主题正文边距 css 属性？

> ID：11803654
> 
> 赞同：3
> 
> 时间：2012-08-03T21:39:06.037
> 
> 标签：gwt

我正在使用 GWT。我看到 gwt "clean" 主题（默认主题？）使我们的 body 元素有 10px 的边距：

```
body {
  color: black;
  margin: 10px;  <------
  border: 0px;
  padding: 0px;
  background: #fff;
  direction: ltr;
} 
```

在我自己的 css 文件中，我将边距设置为 0px，但似乎 GWT 一直在获胜（可能是因为它最后加载？）。

覆盖其设置的正确方法是什么？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-04T14:55:22.510

有几种可能性：

*   您可以使用`margin: 0px !important`（这是“蛮力”方法）。
*   或者你可以给你的身体一个类，比如`<body class="myApp">...</body>`，然后在你的 CSS 中，使用`body.myApp { ... }`. 这将优先，因为`body.myApp`它是一个比 . 更具体的选择器`body`。
*   或者你可以根本不使用任何主题（如果你想创建一个新的布局而不担心你必须覆盖哪些属性，这通常是一个好主意）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-05T08:51:07.153

另一种选择是使用 clientbundle 加载您的 css 文件。（假设 playground.css 是你的 css 文件）

```
public interface Resources extends ClientBundle {
    public static Resources INSTANCE = GWT.create(Resources.class);

    @Source("playground.css")
    CssResource getPlaygroundCSS();
} 
```

***注意：playground.css 与 Resources 接口位于同一个包中。***

* * *

在 onmoduleload 中：

```
public class Playground implements EntryPoint {

    @Override
    public void onModuleLoad() {
        Resources.INSTANCE.getPlaygroundCSS().ensureInjected();

        Label lblHelloWorld = new Label("Hello World");
        RootPanel.get().add(lblHelloWorld);
    }   
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-24T18:30:58.563

在 CSS 中：

> 身体{背景颜色：#FFFFD2！重要；}

可以很好地更改背景颜色。

# android - 我真的不应该在 Android 中使用 px over dp 吗？

> ID：11803655
> 
> 赞同：2
> 
> 时间：2012-08-03T21:39:06.670
> 
> 标签：android, gridview

这里有很多关于这个的问题，但没有一个能回答我的具体问题。当我使用`px`时，eclipse告诉我要避免它。所以我做了。但是当我使用 时`dp`，我在细胞周围制作的网格/边框`GridView`似乎太胖了。我想要它更薄。当使用 1`px`而不是 1`dp`时，我得到了想要的结果。我理解避免它的警告，但在这种情况下我真的应该避免它吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T21:44:46.393

是的你应该。“dp”在所有设备上都会给出几乎相同的外观，但像素不是。

[http://developer.android.com/guide/practices/screens_support.html](http://developer.android.com/guide/practices/screens_support.html)

长话短说：

与密度无关的像素相当于 160 dpi 屏幕上的一个物理像素，这是系统为“中等”密度屏幕假定的基线密度。在运行时，系统会根据使用中屏幕的实际密度，根据需要透明地处理 dp 单位的任何缩放。dp 单位到屏幕像素的转换很简单：px = dp * (dpi / 160)。例如，在 240 dpi 的屏幕上，1 dp 等于 1.5 个物理像素。在定义应用程序的 UI 时，您应该始终使用 dp 单位，以确保您的 UI 在不同密度的屏幕上正确显示。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T21:44:26.777

px 不适用于所有设备我认为它在 android 2.2 中停止工作我建议坚持使用 dp。

# python - Django：保存用户配置文件

> ID：11803658
> 
> 赞同：0
> 
> 时间：2012-08-03T21:39:10.167
> 
> 标签：python, django, python-2.x, user-profile

这是非常基本的，但我找不到任何东西。我有一个按以下方式定义的用户配置文件：

```
def create_user_info(sender, instance, created, **kwargs):
    if created:
        UserInfo.objects.create(user=instance)

User.profile = property(lambda u: UserProfile.objects.get_or_create(user=u)[0]) 
```

现在如何设置属性？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T21:47:40.433

首先关。猴子修补`User`不是正确的方法。在settings.py中设置`AUTH_PROFILE_MODULE = 'yourapp.UserInfo'`，然后就可以使用`user_instance.get_profile()`自动获取配置文件了。

所以，然后修改你刚刚做的配置文件：

```
profile = user.get_profile()
profile.some_field = 'some value'
profile.save() 
```

# jquery - 使用 jsonp 从 flickr 获取所有值

> ID：11803662
> 
> 赞同：0
> 
> 时间：2012-08-03T21:39:33.817
> 
> 标签：jquery

我有以下 flickr 查询，我想打印所有值，但特别显示图像、图像标题、图像 url 和图像经纬度。所以我可以将经纬度插入谷歌地图。

我该怎么做呢？

这是我下面的代码

谢谢

```
<!DOCTYPE html>
<html>
<head>

  <script src="http://code.jquery.com/jquery-latest.js"></script>
</head>
<body>
  <div id="images">

</div>
<script>            
var url = "http://api.flickr.com/services/rest/?method=flickr.photos.search&per_page=100&nojsoncallback=1&format=json&tags=paris&media=photos&api_key=00af42177056c5b71bda9bd49938c1df&has_geo=1&text=paris&&extras=geo";
var src;
$.getJSON(url + "&format=json&jsoncallback=?", function(data){
    $.each(data.photos.photo, function(i,item){
        src = "http://farm"+ item.farm +".static.flickr.com/"+ item.server +"/"+ item.id +"_"+ item.secret +"_m.jpg";
        $("<img/>").attr("src", src).appendTo("#images");               
    });
});
</script>

</body>
</html> 
```

JSONP

```
{ "photos" : { "page" : 1,
      "pages" : 17601,
      "perpage" : 100,
      "photo" : [ { "accuracy" : "15",
            "context" : 0,
            "farm" : 9,
            "geo_is_contact" : 0,
            "geo_is_family" : 0,
            "geo_is_friend" : 0,
            "geo_is_public" : 1,
            "id" : "7700340476",
            "isfamily" : 0,
            "isfriend" : 0,
            "ispublic" : 1,
            "latitude" : 48.782974000000003,
            "longitude" : 2.4095240000000002,
            "owner" : "12542184@N03",
            "place_id" : "bu5MqeZUV7LtyGRx1A",
            "secret" : "307b2660e2",
            "server" : "8027",
            "title" : "Rebase entre RER's",
            "woeid" : "55863622"
          },
          { "accuracy" : "11",
            "context" : 0,
            "farm" : 8,
            "geo_is_contact" : 0,
            "geo_is_family" : 0,
            "geo_is_friend" : 0,
            "geo_is_public" : 1,
            "id" : "7706302634",
            "isfamily" : 0,
            "isfriend" : 0,
            "ispublic" : 1,
            "latitude" : 48.856918,
            "longitude" : 2.3412090000000001,
            "owner" : "31450016@N06",
            "place_id" : "EsIQUYZXU79_kEA",
            "secret" : "4a05d533be",
            "server" : "7259",
            "title" : "París 031 Museo del Louvre",
            "woeid" : "615702"
          },
          { "accuracy" : "11",
            "context" : 0,
            "farm" : 8,
            "geo_is_contact" : 0,
            "geo_is_family" : 0,
            "geo_is_friend" : 0,
            "geo_is_public" : 1,
            "id" : "7706304774",
            "isfamily" : 0,
            "isfriend" : 0,
            "ispublic" : 1,
            "latitude" : 48.856918,
            "longitude" : 2.3412090000000001,
            "owner" : "31450016@N06",
            "place_id" : "EsIQUYZXU79_kEA",
            "secret" : "76b651f4ff",
            "server" : "7253",
            "title" : "París 024 Torre Eiffel",
            "woeid" : "615702"
          },
          { "accuracy" : "11",
            "context" : 0,
            "farm" : 8,
            "geo_is_contact" : 0,
            "geo_is_family" : 0,
            "geo_is_friend" : 0,
            "geo_is_public" : 1,
            "id" : "7706300720",
            "isfamily" : 0,
            "isfriend" : 0,
            "ispublic" : 1,
            "latitude" : 48.856918,
            "longitude" : 2.3412090000000001,
            "owner" : "31450016@N06",
            "place_id" : "EsIQUYZXU79_kEA",
            "secret" : "5ce48df86a",
            "server" : "7268",
            "title" : "París 035 Reloj Orsay",
            "woeid" : "615702"
          },
          { "accuracy" : "16",
            "context" : 0,
            "farm" : 9,
            "geo_is_contact" : 0,
            "geo_is_family" : 0,
            "geo_is_friend" : 0,
            "geo_is_public" : 1,
            "id" : "7706223818",
            "isfamily" : 0,
            "isfriend" : 0,
            "ispublic" : 1,
            "latitude" : 48.866321999999997,
            "longitude" : 2.3141690000000001,
            "owner" : "23733615@N07",
            "place_id" : "WU8qo85UV7J7dLZuCw",
            "secret" : "69255ed956",
            "server" : "8012",
            "title" : "Paris",
            "woeid" : "55843784"
          },
          { "accuracy" : "16",
            "context" : 0,
            "farm" : 9,
            "geo_is_contact" : 0,
            "geo_is_family" : 0,
            "geo_is_friend" : 0,
            "geo_is_public" : 1,
            "id" : "7706186726",
            "isfamily" : 0,
            "isfriend" : 0,
            "ispublic" : 1,
            "latitude" : 48.869444000000001,
            "longitude" : 2.307922,
            "owner" : "23733615@N07",
            "place_id" : "WU8qo85UV7J7dLZuCw",
            "secret" : "168b7316e0",
            "server" : "8142",
            "title" : "Paris",
            "woeid" : "55843784"
          },
          { "accuracy" : "16",
            "context" : 0,
            "farm" : 8,
            "geo_is_contact" : 0,
            "geo_is_family" : 0,
            "geo_is_friend" : 0,
            "geo_is_public" : 1,
            "id" : "7706196346",
            "isfamily" : 0,
            "isfriend" : 0,
            "ispublic" : 1,
            "latitude" : 48.866052000000003,
            "longitude" : 2.3139989999999999,
            "owner" : "23733615@N07",
            "place_id" : "WU8qo85UV7J7dLZuCw",
            "secret" : "e347aed0cb",
            "server" : "7123",
            "title" : "Paris",
            "woeid" : "55843784"
          },
          { "accuracy" : "16",
            "context" : 0,
            "farm" : 9,
            "geo_is_contact" : 0,
            "geo_is_family" : 0,
            "geo_is_friend" : 0,
            "geo_is_public" : 1,
            "id" : "7706211062",
            "isfamily" : 0,
            "isfriend" : 0,
            "ispublic" : 1,
            "latitude" : 48.866540999999998,
            "longitude" : 2.3136999999999999,
            "owner" : "23733615@N07",
            "place_id" : "WU8qo85UV7J7dLZuCw",
            "secret" : "10413bf052",
            "server" : "8164",
            "title" : "Paris",
            "woeid" : "55843784"
          },

          { "accuracy" : "16",
            "context" : 0,
            "farm" : 8,
            "geo_is_contact" : 0,
            "geo_is_family" : 0,
            "geo_is_friend" : 0,
            "geo_is_public" : 1,
            "id" : "7705462234",
            "isfamily" : 0,
            "isfriend" : 0,
            "ispublic" : 1,
            "latitude" : 48.922527000000002,
            "longitude" : 2.2818299999999998,
            "owner" : "41583834@N03",
            "place_id" : "8wSB0PdUV7KBx1hi.A",
            "secret" : "147d569a64",
            "server" : "7264",
            "title" : "Asnières sur Seine, Paris, France",
            "woeid" : "55863481"
          },
          { "accuracy" : "16",
            "context" : 0,
            "farm" : 8,
            "geo_is_contact" : 0,
            "geo_is_family" : 0,
            "geo_is_friend" : 0,
            "geo_is_public" : 1,
            "id" : "7705492248",
            "isfamily" : 0,
            "isfriend" : 0,
            "ispublic" : 1,
            "latitude" : 48.922527000000002,
            "longitude" : 2.2818299999999998,
            "owner" : "41583834@N03",
            "place_id" : "8wSB0PdUV7KBx1hi.A",
            "secret" : "4cf313b4e5",
            "server" : "7110",
            "title" : "Asnières sur Seine, Paris, France",
            "woeid" : "55863481"
          },
          { "accuracy" : "16",
            "context" : 0,
            "farm" : 8,
            "geo_is_contact" : 0,
            "geo_is_family" : 0,
            "geo_is_friend" : 0,
            "geo_is_public" : 1,
            "id" : "7705465586",
            "isfamily" : 0,
            "isfriend" : 0,
            "ispublic" : 1,
            "latitude" : 48.922527000000002,
            "longitude" : 2.2818299999999998,
            "owner" : "41583834@N03",
            "place_id" : "8wSB0PdUV7KBx1hi.A",
            "secret" : "c2f1747c51",
            "server" : "7266",
            "title" : "Asnières sur Seine, Paris, France",
            "woeid" : "55863481"
          },
          { "accuracy" : "16",
            "context" : 0,
            "farm" : 8,
            "geo_is_contact" : 0,
            "geo_is_family" : 0,
            "geo_is_friend" : 0,
            "geo_is_public" : 1,
            "id" : "7705463942",
            "isfamily" : 0,
            "isfriend" : 0,
            "ispublic" : 1,
            "latitude" : 48.922527000000002,
            "longitude" : 2.2818299999999998,
            "owner" : "41583834@N03",
            "place_id" : "8wSB0PdUV7KBx1hi.A",
            "secret" : "ce8586f5a8",
            "server" : "7129",
            "title" : "Asnières sur Seine, Paris, France",
            "woeid" : "55863481"
          },
          { "accuracy" : "16",
            "context" : 0,
            "farm" : 9,
            "geo_is_contact" : 0,
            "geo_is_family" : 0,
            "geo_is_friend" : 0,
            "geo_is_public" : 1,
            "id" : "7705467020",
            "isfamily" : 0,
            "isfriend" : 0,
            "ispublic" : 1,
            "latitude" : 48.922527000000002,
            "longitude" : 2.2818299999999998,
            "owner" : "41583834@N03",
            "place_id" : "8wSB0PdUV7KBx1hi.A",
            "secret" : "70d16fc4d4",
            "server" : "8286",
            "title" : "Asnières sur Seine, Paris, France",
            "woeid" : "55863481"
          },
          { "accuracy" : "16",
            "context" : 0,
            "farm" : 9,
            "geo_is_contact" : 0,
            "geo_is_family" : 0,
            "geo_is_friend" : 0,
            "geo_is_public" : 1,
            "id" : "7705481944",
            "isfamily" : 0,
            "isfriend" : 0,
            "ispublic" : 1,
            "latitude" : 48.922527000000002,
            "longitude" : 2.2818299999999998,
            "owner" : "41583834@N03",
            "place_id" : "8wSB0PdUV7KBx1hi.A",
            "secret" : "e86709d9a5",
            "server" : "8011",
            "title" : "Asnières sur Seine, Paris, France",
            "woeid" : "55863481"
          },
          { "accuracy" : "16",
            "context" : 0,
            "farm" : 9,
            "geo_is_contact" : 0,
            "geo_is_family" : 0,
            "geo_is_friend" : 0,
            "geo_is_public" : 1,
            "id" : "7705494846",
            "isfamily" : 0,
            "isfriend" : 0,
            "ispublic" : 1,
            "latitude" : 48.922527000000002,
            "longitude" : 2.2818299999999998,
            "owner" : "41583834@N03",
            "place_id" : "8wSB0PdUV7KBx1hi.A",
            "secret" : "32991e9f52",
            "server" : "8026",
            "title" : "Asnières sur Seine, Paris, France",
            "woeid" : "55863481"
          },
          { "accuracy" : "16",
            "context" : 0,
            "farm" : 9,
            "geo_is_contact" : 0,
            "geo_is_family" : 0,
            "geo_is_friend" : 0,
            "geo_is_public" : 1,
            "id" : "7705456730",
            "isfamily" : 0,
            "isfriend" : 0,
            "ispublic" : 1,
            "latitude" : 48.922527000000002,
            "longitude" : 2.2818299999999998,
            "owner" : "41583834@N03",
            "place_id" : "8wSB0PdUV7KBx1hi.A",
            "secret" : "cbec88b40d",
            "server" : "8158",
            "title" : "Asnières sur Seine, Paris, France",
            "woeid" : "55863481"
          },
          { "accuracy" : "16",
            "context" : 0,
            "farm" : 9,
            "geo_is_contact" : 0,
            "geo_is_family" : 0,
            "geo_is_friend" : 0,
            "geo_is_public" : 1,
            "id" : "7705476904",
            "isfamily" : 0,
            "isfriend" : 0,
            "ispublic" : 1,
            "latitude" : 48.922527000000002,
            "longitude" : 2.2818299999999998,
            "owner" : "41583834@N03",
            "place_id" : "8wSB0PdUV7KBx1hi.A",
            "secret" : "4511920f26",
            "server" : "8016",
            "title" : "Asnières sur Seine, Paris, France",
            "woeid" : "55863481"
          },
          { "accuracy" : "16",
            "context" : 0,
            "farm" : 9,
            "geo_is_contact" : 0,
            "geo_is_family" : 0,
            "geo_is_friend" : 0,
            "geo_is_public" : 1,
            "id" : "7705485932",
            "isfamily" : 0,
            "isfriend" : 0,
            "ispublic" : 1,
            "latitude" : 48.922527000000002,
            "longitude" : 2.2818299999999998,
            "owner" : "41583834@N03",
            "place_id" : "8wSB0PdUV7KBx1hi.A",
            "secret" : "67b83351db",
            "server" : "8150",
            "title" : "Columbarium. Asnières sur Seine, Paris, France",
            "woeid" : "55863481"
          },

          { "accuracy" : "16",
            "context" : 0,
            "farm" : 9,
            "geo_is_contact" : 0,
            "geo_is_family" : 0,
            "geo_is_friend" : 0,
            "geo_is_public" : 1,
            "id" : "7705493494",
            "isfamily" : 0,
            "isfriend" : 0,
            "ispublic" : 1,
            "latitude" : 48.922527000000002,
            "longitude" : 2.2818299999999998,
            "owner" : "41583834@N03",
            "place_id" : "8wSB0PdUV7KBx1hi.A",
            "secret" : "3dcf1d9fa6",
            "server" : "8142",
            "title" : "Asnières sur Seine, Paris, France",
            "woeid" : "55863481"
          },
          { "accuracy" : "16",
            "context" : 0,
            "farm" : 9,
            "geo_is_contact" : 0,
            "geo_is_family" : 0,
            "geo_is_friend" : 0,
            "geo_is_public" : 1,
            "id" : "7705487256",
            "isfamily" : 0,
            "isfriend" : 0,
            "ispublic" : 1,
            "latitude" : 48.922527000000002,
            "longitude" : 2.2818299999999998,
            "owner" : "41583834@N03",
            "place_id" : "8wSB0PdUV7KBx1hi.A",
            "secret" : "7e943318b2",
            "server" : "8285",
            "title" : "Asnières sur Seine, Paris, France",
            "woeid" : "55863481"
          },
          { "accuracy" : "16",
            "context" : 0,
            "farm" : 9,
            "geo_is_contact" : 0,
            "geo_is_family" : 0,
            "geo_is_friend" : 0,
            "geo_is_public" : 1,
            "id" : "7705480418",
            "isfamily" : 0,
            "isfriend" : 0,
            "ispublic" : 1,
            "latitude" : 48.922527000000002,
            "longitude" : 2.2818299999999998,
            "owner" : "41583834@N03",
            "place_id" : "8wSB0PdUV7KBx1hi.A",
            "secret" : "d24d3e52dd",
            "server" : "8294",
            "title" : "Asnières sur Seine, Paris, France",
            "woeid" : "55863481"
          },
          { "accuracy" : "16",
            "context" : 0,
            "farm" : 9,
            "geo_is_contact" : 0,
            "geo_is_family" : 0,
            "geo_is_friend" : 0,
            "geo_is_public" : 1,
            "id" : "7705454360",
            "isfamily" : 0,
            "isfriend" : 0,
            "ispublic" : 1,
            "latitude" : 48.922527000000002,
            "longitude" : 2.2818299999999998,
            "owner" : "41583834@N03",
            "place_id" : "8wSB0PdUV7KBx1hi.A",
            "secret" : "01488a2416",
            "server" : "8148",
            "title" : "Asnières sur Seine, Paris, France",
            "woeid" : "55863481"
          },
          { "accuracy" : "16",
            "context" : 0,
            "farm" : 9,
            "geo_is_contact" : 0,
            "geo_is_family" : 0,
            "geo_is_friend" : 0,
            "geo_is_public" : 1,
            "id" : "7705440852",
            "isfamily" : 0,
            "isfriend" : 0,
            "ispublic" : 1,
            "latitude" : 48.922527000000002,
            "longitude" : 2.2818299999999998,
            "owner" : "41583834@N03",
            "place_id" : "8wSB0PdUV7KBx1hi.A",
            "secret" : "e87f0d530d",
            "server" : "8005",
            "title" : "Asnières sur Seine, Paris, France",
            "woeid" : "55863481"
          },
          { "accuracy" : "16",
            "context" : 0,
            "farm" : 8,
            "geo_is_contact" : 0,
            "geo_is_family" : 0,
            "geo_is_friend" : 0,
            "geo_is_public" : 1,
            "id" : "7705439844",
            "isfamily" : 0,
            "isfriend" : 0,
            "ispublic" : 1,
            "latitude" : 48.922527000000002,
            "longitude" : 2.2818299999999998,
            "owner" : "41583834@N03",
            "place_id" : "8wSB0PdUV7KBx1hi.A",
            "secret" : "0e1d800781",
            "server" : "7124",
            "title" : "Asnières sur Seine, Paris, France",
            "woeid" : "55863481"
          },
          { "accuracy" : "16",
            "context" : 0,
            "farm" : 8,
            "geo_is_contact" : 0,
            "geo_is_family" : 0,
            "geo_is_friend" : 0,
            "geo_is_public" : 1,
            "id" : "7705430268",
            "isfamily" : 0,
            "isfriend" : 0,
            "ispublic" : 1,
            "latitude" : 48.922527000000002,
            "longitude" : 2.2818299999999998,
            "owner" : "41583834@N03",
            "place_id" : "8wSB0PdUV7KBx1hi.A",
            "secret" : "06e8d1fee7",
            "server" : "7248",
            "title" : "Asnières sur Seine, Paris, France",
            "woeid" : "55863481"
          },
          { "accuracy" : "16",
            "context" : 0,
            "farm" : 9,
            "geo_is_contact" : 0,
            "geo_is_family" : 0,
            "geo_is_friend" : 0,
            "geo_is_public" : 1,
            "id" : "7705347074",
            "isfamily" : 0,
            "isfriend" : 0,
            "ispublic" : 1,
            "latitude" : 48.858333000000002,
            "longitude" : 2.3421660000000002,
            "owner" : "31029248@N00",
            "place_id" : "36CFHdZUV7KNOKK4LQ",
            "secret" : "655a601535",
            "server" : "8159",
            "title" : "Paris plages",
            "woeid" : "55843752"
          }
        ],
      "total" : "1760053"
    },
  "stat" : "ok"
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T21:54:22.623

您可以通过以下方式访问纬度和经度：

```
$.getJSON(url + "&format=json&jsoncallback=?", function(data){
    $.each(data.photos.photo, function(i,item){
        src = "http://farm"+ item.farm +".static.flickr.com/"+ item.server +"/"+ item.id +"_"+ item.secret +"_m.jpg";
        $("<img/>").attr("src", src).appendTo("#images");
        console.log(item.latitude); //gives latitude in console
        console.log(item.longitude); //gives longitude in console
    });
}); 
```

[**小提琴**](http://jsfiddle.net/9whzy/2/)

# ruby-on-rails - 救援 STI 中的 SubclassNotFound 错误

> ID：11803665
> 
> 赞同：2
> 
> 时间：2012-08-03T21:39:42.607
> 
> 标签：ruby-on-rails, ruby, single-table-inheritance, rescue

是否有最佳实践或惯用方法来挽救`ActiveRecord::SubclassNotFound`基类模型内部的错误（Rails 2.3.8）？我真的很希望能够`BaseClass.all`在数据库中有已知的损坏类型时执行诸如调用之类的操作，并且能够始终进行救援，而不必在`begin...rescue...end`每次查找完成时都编写一个。

# wcf - 在 Azure 上对基于房间的发布/订阅应用程序进行负载平衡

> ID：11803669
> 
> 赞同：1
> 
> 时间：2012-08-03T21:39:55.043
> 
> 标签：wcf, azure

我有一个正在工作的 Silverlight/WCF 应用程序，我需要开始考虑缩放。当然，扩展的一个明显目标是 Azure。

该应用程序的关键架构特性是 2-10 个 Silverlight 客户端将加入给定的“房间”（使用双工 Net.TCP 连接），然后这些客户端中的任何一个都可以发送消息（例如，聊天消息），然后需要使用底层双工 WCF 连接将其实时推送到连接到同一房间的每个其他客户端。

现在，WCF 服务的工作方式基本上是在内存中保存会话列表和它们关联的房间，以便当来自一个会话的消息进入时，它可以自动将消息发送给每个会话会议室。

这适用于单个 WCF 服务器实例，但如果您需要扩展它以使多个 WCF 实例都在运行，它会变得复杂。当然，如果您使用网络层负载平衡，您通常会发现房间中只有一些成员在您所在的同一台服务器上，这意味着当需要向所有这些成员推送消息时，实际上只有其中一些会收到通知。

除了 Azure，我一直在想我会通过某种应用层负载平衡来处理它。例如，每个客户端下载 Silverlight 应用程序的 Web 服务器可能会执行原始的循环排序负载平衡，即“好的，房间 x 中的每个人，您使用 WCF 实例 1。房间 y 中的每个人，您使用WCF 实例 2。” 之类的东西。

所以我有两个问题：

(1) 有没有其他更好的方法来构建它，以便能够使用网络层负载平衡，而不需要让应用程序了解底层基础设施？

(2) 如果我必须进行应用层负载均衡，那么在 Azure 中处理此问题的最佳方法是什么？我是否必须使用 IAAS（完整的 VM），或者有没有办法使用 PAAS（工作角色）来做到这一点？我的理解是，不可能独立处理工人角色，这将使基于角色的方法变得困难，如果不是不可能的话。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T01:31:23.013

由 Azure 服务总线提供支持的 SignalR 可能适合您。 [http://vasters.com/clemensv/2012/02/13/SignalR+Powered+By+Service+Bus.aspx](http://vasters.com/clemensv/2012/02/13/SignalR+Powered+By+Service+Bus.aspx)

# iphone - 目标 C 错误 3840 - 显然 JSON 错误，但它通过 JSlint 验证

> ID：11803671
> 
> 赞同：2
> 
> 时间：2012-08-03T21:40:04.763
> 
> 标签：iphone, objective-c, json

我已经阅读过，这个错误似乎来自错误的 JSON。很简单，这是我的 JSON

{"year":"2012","wheels":"标准","trans":"未知"}

我的问题是，这似乎是正确的，当我通过 JSON lint 运行它时，它返回有效。我还使用 cURL 来下载此页面并使用 json_decode() 来阅读它......工作正常。

这是一个示例页面：[http ://drivingthenation.com/app/carlist/getVinDtn.php?v=JA3215H1](http://drivingthenation.com/app/carlist/getVinDtn.php?v=JA3215H1) *C* ***** *M&f=v

我通过 HTTPScoop 运行它，唯一返回的响应文本是

{"year":"2012","wheels":"标准","trans":"未知"}

在 Objective-C 端，我使用 NSURL 和 NSData 来获取 URL，然后使用 NSJSONSerialization。我可以在 NSJSONSerialization 之前打印出来，并看到它实际上正在获取数据，但是只有当我尝试将其格式化为 JSON 时才会出现此错误。有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T21:43:24.117

默认情况下，NSJSONSerialization 类期望输入不仅是有效的 JSON，而且是有效的 JSON*对象*。如果你想读取不是对象的东西，你需要为 reader 指定[NSJSONReadingAllowFragments](http://developer.apple.com/library/ios/#documentation/Foundation/Reference/NSJSONSerialization_Class/Reference/Reference.html#//apple_ref/c/tdef/NSJSONReadingOptions)选项。

# java - 为什么我的角色要么在地板上盘旋，要么从地板上掉下来？

> ID：11803674
> 
> 赞同：4
> 
> 时间：2012-08-03T21:40:16.433
> 
> 标签：java, graphics, 3d, ogre, jmonkeyengine

我正在制作一个带有角色和地板的简单 3D 场景，但如果我将 y 坐标设置为负值，角色会悬停或从场景中坠落。

```
private void createCharacters() {
    CapsuleCollisionShape capsule = new CapsuleCollisionShape(3f, 4f);
    character = new CharacterControl(capsule, 0.01f);
    model = (Node) assetManager.loadModel("Models/Ninja/Ninja.mesh.xml");
    float scale = 0.25f;
    model.scale(0.05f, 0.05f, 0.05f);
    model.addControl(character);
    character.setPhysicsLocation(new Vector3f(0, -0.15f, 0));
    model.setShadowMode(ShadowMode.CastAndReceive);
    character.setViewDirection(new Vector3f(1, 0, 0));
    rootNode.attachChild(model);
    getPhysicsSpace().add(character);

} 
```

上面的代码使角色跌落到场景中。稍微改变一下就可以让角色悬停：

`character.setPhysicsLocation(new Vector3f(0, -0.09f, 0));`

![在此处输入图像描述](../Images/13772b29df307cd1fc67ec8d1cf54109.png)

如果您想检查所有代码，请点击此处

```
package adventure;

import java.applet.Applet;
import com.jme3.math.Quaternion;
import com.jme3.math.FastMath;
import java.applet.AudioClip;
import java.awt.BorderLayout;
import java.awt.Dimension;
import java.awt.Image;
import java.awt.TextArea;
import java.net.MalformedURLException;
import java.net.URL;
import java.util.ArrayList;
import java.util.List;
import com.jme3.material.RenderState.FaceCullMode;
import javax.swing.JFrame;
import javax.swing.JPanel;
import com.jme3.renderer.queue.RenderQueue.ShadowMode;
import com.jme3.animation.AnimChannel;
import com.jme3.animation.AnimControl;
import com.jme3.animation.AnimEventListener;
import com.jme3.animation.LoopMode;
import com.jme3.app.SimpleApplication;
import com.jme3.asset.BlenderKey;
import com.jme3.asset.TextureKey;
import com.jme3.asset.plugins.ZipLocator;
import com.jme3.bullet.BulletAppState;
import com.jme3.bullet.PhysicsSpace;
import com.jme3.bullet.collision.PhysicsCollisionEvent;
import com.jme3.bullet.collision.PhysicsCollisionListener;
import com.jme3.bullet.collision.shapes.CapsuleCollisionShape;
import com.jme3.bullet.collision.shapes.CollisionShape;
import com.jme3.bullet.collision.shapes.SphereCollisionShape;
import com.jme3.bullet.control.CharacterControl;
import com.jme3.bullet.control.RigidBodyControl;
import com.jme3.bullet.util.CollisionShapeFactory;
import com.jme3.effect.ParticleEmitter;
import com.jme3.effect.ParticleMesh.Type;
import com.jme3.effect.shapes.EmitterSphereShape;
import com.jme3.input.ChaseCamera;
import com.jme3.input.KeyInput;
import com.jme3.input.controls.ActionListener;
import com.jme3.input.controls.KeyTrigger;
import com.jme3.light.DirectionalLight;
import com.jme3.material.Material;
import com.jme3.math.ColorRGBA;
import com.jme3.math.Vector2f;
import com.jme3.math.Vector3f;
import com.jme3.post.FilterPostProcessor;
import com.jme3.post.filters.BloomFilter;
import com.jme3.renderer.Camera;
import com.jme3.renderer.queue.RenderQueue.ShadowMode;
import com.jme3.scene.Geometry;
import com.jme3.scene.Node;
import com.jme3.scene.Spatial;
import com.jme3.scene.shape.Box;
import com.jme3.scene.shape.Sphere;
import com.jme3.scene.shape.Sphere.TextureMode;
import com.jme3.system.AppSettings;
import com.jme3.system.JmeCanvasContext;
import com.jme3.terrain.geomipmap.TerrainLodControl;
import com.jme3.terrain.geomipmap.TerrainQuad;
import com.jme3.terrain.heightmap.AbstractHeightMap;
import com.jme3.terrain.heightmap.ImageBasedHeightMap;
import com.jme3.texture.Texture;
import com.jme3.texture.Texture.WrapMode;
import com.jme3.util.SkyFactory;

public class MountainWorld extends SimpleApplication implements ActionListener,
        PhysicsCollisionListener, AnimEventListener, Playable {

      /** Prepare Materials */
      Material wall_mat;
      Material stone_mat;
      Material floor_mat;

      /** Prepare geometries and physical nodes for bricks and cannon balls. */
      private RigidBodyControl    brick_phy;
      private static final Box    box;
      private RigidBodyControl    ball_phy;
      private static final Sphere sphere;
      private RigidBodyControl    floor_phy;
      private static final Box    floor;

      /** dimensions used for bricks and wall */
      private static final float brickLength = 0.48f;
      private static final float brickWidth  = 0.24f;
      private static final float brickHeight = 0.12f;

      static {
        /** Initialize the cannon ball geometry */
        sphere = new Sphere(32, 32, 0.4f, true, false);
        sphere.setTextureMode(TextureMode.Projected);
        /** Initialize the brick geometry */
        box = new Box(Vector3f.ZERO, brickLength, brickHeight, brickWidth);
        box.scaleTextureCoordinates(new Vector2f(1f, .5f));
        /** Initialize the floor geometry */
        floor = new Box(Vector3f.ZERO, 10f, 0.1f, 5f);
        floor.scaleTextureCoordinates(new Vector2f(3, 6));
      }

    private static World world;
    private static Person person;
    private static Player dplayer;
    private static TextArea textarea;
    private BulletAppState bulletAppState;
    private AnimChannel channel;
    private AnimControl control;
    // character
    CharacterControl character;
    Node model;
    // temp vectors
    Vector3f walkDirection = new Vector3f();
    // terrain
    TerrainQuad terrain;
    RigidBodyControl terrainPhysicsNode;
    // Materials
    Material matRock;
    Material matBullet;
    // animation
    AnimChannel animationChannel;
    AnimChannel shootingChannel;
    AnimControl animationControl;
    float airTime = 0;
    // camera
    boolean left = false, right = false, up = false, down = false;
    ChaseCamera chaseCam;
    // bullet
    Sphere bullet;
    SphereCollisionShape bulletCollisionShape;
    // explosion
    ParticleEmitter effect;
    // brick wall
    Box brick;
    float bLength = 0.8f;
    float bWidth = 0.4f;
    float bHeight = 0.4f;
    FilterPostProcessor fpp;
    private Spatial sceneModel;

    private RigidBodyControl landscape;
    public static void main(String[] args) {
        java.awt.EventQueue.invokeLater(new Runnable() {
            public void run() {
                AppSettings settings = new AppSettings(true);
                settings.setWidth(850);
                settings.setHeight(440);

                MountainWorld canvasApplication = new MountainWorld();
                canvasApplication.setSettings(settings);
                canvasApplication.createCanvas(); // create canvas!
                JmeCanvasContext ctx = (JmeCanvasContext) canvasApplication
                        .getContext();
                ctx.setSystemListener(canvasApplication);
                Dimension dim = new Dimension(640, 480);
                ctx.getCanvas().setPreferredSize(dim);

                JFrame window = new JFrame("Mountain World");
                window.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

                JPanel panel = new JPanel(new BorderLayout()); // a panel
                world = new DungeonWorld(canvasApplication);
                person = new Person(world, "You", null);
                dplayer = new Player(world, person);
                Commands commands = new Commands(person);
                textarea = new TextArea("", 10, 60,
                        TextArea.SCROLLBARS_VERTICAL_ONLY);
                textarea.append("You are in a mountain. The trolls live here.\n");
                textarea.setEditable(false);
                panel.add("West", ctx.getCanvas());
                panel.add("East", commands);
                panel.add("South", textarea);
                window.add(panel);
                window.pack();
                window.setVisible(true);
                canvasApplication.startCanvas();

            }
        });
    }

    @Override
    public void simpleInitApp() {
        bulletAppState = new BulletAppState();
        bulletAppState.setThreadingType(BulletAppState.ThreadingType.PARALLEL);
        stateManager.attach(bulletAppState);
        setupKeys();
        //prepareBullet();
        //prepareEffect();
        createLight();
        //createSky();
        initMaterials();
        initFloor();
        //createTerrain();
        //createWall();
        createCharacters();
        setupChaseCamera();
        setupAnimationController();
        setupFilter();
    }
     /** Make a solid floor and add it to the scene. */
      public void initFloor() {
        Geometry floor_geo = new Geometry("Floor", floor);
        floor_geo.setMaterial(floor_mat);
        floor_geo.setLocalTranslation(0, -0.1f, 0);
        this.rootNode.attachChild(floor_geo);
        /* Make the floor physical with mass 0.0f! */
        floor_phy = new RigidBodyControl(0.0f);
        floor_geo.addControl(floor_phy);
        bulletAppState.getPhysicsSpace().add(floor_phy);
      }

      /** Initialize the materials used in this scene. */
      public void initMaterials() {
        wall_mat = new Material(assetManager, "Common/MatDefs/Misc/Unshaded.j3md");
        TextureKey key = new TextureKey("Textures/Terrain/BrickWall/BrickWall.jpg");
        key.setGenerateMips(true);
        Texture tex = assetManager.loadTexture(key);
        wall_mat.setTexture("ColorMap", tex);

        stone_mat = new Material(assetManager, "Common/MatDefs/Misc/Unshaded.j3md");
        TextureKey key2 = new TextureKey("Textures/Terrain/Rock/Rock.PNG");
        key2.setGenerateMips(true);
        Texture tex2 = assetManager.loadTexture(key2);
        stone_mat.setTexture("ColorMap", tex2);

        floor_mat = new Material(assetManager, "Common/MatDefs/Misc/Unshaded.j3md");
        TextureKey key3 = new TextureKey("Textures/Terrain/Pond/Pond.jpg");
        key3.setGenerateMips(true);
        Texture tex3 = assetManager.loadTexture(key3);
        tex3.setWrap(WrapMode.Repeat);
        floor_mat.setTexture("ColorMap", tex3);
      }

    private void setupFilter() {
        FilterPostProcessor fpp = new FilterPostProcessor(assetManager);
        BloomFilter bloom = new BloomFilter(BloomFilter.GlowMode.Objects);
        fpp.addFilter(bloom);
        viewPort.addProcessor(fpp);
    }

    private PhysicsSpace getPhysicsSpace() {
        return bulletAppState.getPhysicsSpace();
    }

    private void setupKeys() {
        inputManager.addMapping("wireframe", new KeyTrigger(KeyInput.KEY_T));
        inputManager.addListener(this, "wireframe");
        inputManager.addMapping("CharLeft", new KeyTrigger(KeyInput.KEY_A));
        inputManager.addMapping("CharRight", new KeyTrigger(KeyInput.KEY_D));
        inputManager.addMapping("CharUp", new KeyTrigger(KeyInput.KEY_W));
        inputManager.addMapping("CharDown", new KeyTrigger(KeyInput.KEY_S));
        inputManager.addMapping("CharSpace",
                new KeyTrigger(KeyInput.KEY_RETURN));
        inputManager
                .addMapping("CharShoot", new KeyTrigger(KeyInput.KEY_SPACE));
        inputManager.addListener(this, "CharLeft");
        inputManager.addListener(this, "CharRight");
        inputManager.addListener(this, "CharUp");
        inputManager.addListener(this, "CharDown");
        inputManager.addListener(this, "CharSpace");
        inputManager.addListener(this, "CharShoot");
    }

    private void createWall() {
        float xOff = -144;
        float zOff = -40;
        float startpt = bLength / 4 - xOff;
        float height = 6.1f;
        brick = new Box(Vector3f.ZERO, bLength, bHeight, bWidth);
        brick.scaleTextureCoordinates(new Vector2f(1f, .5f));
        for (int j = 0; j < 15; j++) {
            for (int i = 0; i < 4; i++) {
                Vector3f vt = new Vector3f(i * bLength * 2 + startpt, bHeight
                        + height, zOff);
                addBrick(vt);
            }
            startpt = -startpt;
            height += 1.01f * bHeight;
        }
    }

    private void addBrick(Vector3f ori) {
        Geometry reBoxg = new Geometry("brick", brick);
        reBoxg.setMaterial(matBullet);
        reBoxg.setLocalTranslation(ori);
        reBoxg.addControl(new RigidBodyControl(1.5f));
        reBoxg.setShadowMode(ShadowMode.CastAndReceive);
        this.rootNode.attachChild(reBoxg);
        this.getPhysicsSpace().add(reBoxg);
    }

    private void prepareBullet() {
        bullet = new Sphere(32, 32, 0.4f, true, false);
        bullet.setTextureMode(TextureMode.Projected);
        bulletCollisionShape = new SphereCollisionShape(0.4f);
        matBullet = new Material(getAssetManager(),
                "Common/MatDefs/Misc/Unshaded.j3md");
        matBullet.setColor("Color", ColorRGBA.Green);
        // matBullet.setColor("m_GlowColor", ColorRGBA.Green);
        getPhysicsSpace().addCollisionListener(this);
    }

    private void prepareEffect() {
        int COUNT_FACTOR = 1;
        float COUNT_FACTOR_F = 1f;
        effect = new ParticleEmitter("Flame", Type.Triangle, 32 * COUNT_FACTOR);
        effect.setSelectRandomImage(true);
        effect.setStartColor(new ColorRGBA(1f, 0.4f, 0.05f,
                (float) (1f / COUNT_FACTOR_F)));
        effect.setEndColor(new ColorRGBA(.4f, .22f, .12f, 0f));
        effect.setStartSize(1.3f);
        effect.setEndSize(2f);
        effect.setShape(new EmitterSphereShape(Vector3f.ZERO, 1f));
        effect.setParticlesPerSec(0);
        effect.setGravity(0, -5, 0);
        effect.setLowLife(.4f);
        effect.setHighLife(.5f);
        effect.setInitialVelocity(new Vector3f(0, 7, 0));
        effect.setVelocityVariation(1f);
        effect.setImagesX(2);
        effect.setImagesY(2);
        Material mat = new Material(assetManager,
                "Common/MatDefs/Misc/Particle.j3md");
        mat.setTexture("Texture",
                assetManager.loadTexture("Effects/Explosion/flame.png"));
        effect.setMaterial(mat);
        // effect.setLocalScale(100);
        rootNode.attachChild(effect);
    }

    private void createLight() {
        Vector3f direction = new Vector3f(-0.1f, -0.7f, -1).normalizeLocal();
        DirectionalLight dl = new DirectionalLight();
        dl.setDirection(direction);
        dl.setColor(new ColorRGBA(1f, 1f, 1f, 1.0f));
        rootNode.addLight(dl);
    }

    private void createSky() {
        rootNode.attachChild(SkyFactory.createSky(assetManager,
                "Textures/Sky/Bright/BrightSky.dds", false));
    }

    private void createTerrain2() {
        matRock = new Material(assetManager,
                "Common/MatDefs/Terrain/TerrainLighting.j3md");
        matRock.setBoolean("useTriPlanarMapping", false);
        matRock.setBoolean("WardIso", true);
        matRock.setTexture("AlphaMap",
                assetManager.loadTexture("Textures/Terrain/splat/alphamap.png"));
        Texture heightMapImage = assetManager
                .loadTexture("Textures/Terrain/splat/mountains512.png");
        Texture grass = assetManager
                .loadTexture("Textures/Terrain/splat/grass.jpg");
        grass.setWrap(WrapMode.Repeat);
        matRock.setTexture("DiffuseMap", grass);
        matRock.setFloat("DiffuseMap_0_scale", 64);
        Texture dirt = assetManager
                .loadTexture("Textures/Terrain/splat/dirt.jpg");
        dirt.setWrap(WrapMode.Repeat);
        matRock.setTexture("DiffuseMap_1", dirt);
        matRock.setFloat("DiffuseMap_1_scale", 16);
        Texture rock = assetManager
                .loadTexture("Textures/Terrain/splat/road.jpg");
        rock.setWrap(WrapMode.Repeat);
        matRock.setTexture("DiffuseMap_2", rock);
        matRock.setFloat("DiffuseMap_2_scale", 128);
        Texture normalMap0 = assetManager
                .loadTexture("Textures/Terrain/splat/grass_normal.jpg");
        normalMap0.setWrap(WrapMode.Repeat);
        Texture normalMap1 = assetManager
                .loadTexture("Textures/Terrain/splat/dirt_normal.png");
        normalMap1.setWrap(WrapMode.Repeat);
        Texture normalMap2 = assetManager
                .loadTexture("Textures/Terrain/splat/road_normal.png");
        normalMap2.setWrap(WrapMode.Repeat);
        matRock.setTexture("NormalMap", normalMap0);
        matRock.setTexture("NormalMap_1", normalMap2);
        matRock.setTexture("NormalMap_2", normalMap2);

        AbstractHeightMap heightmap = null;
        try {
            heightmap = new ImageBasedHeightMap(heightMapImage.getImage(),
                    0.25f);
            heightmap.load();

        } catch (Exception e) {
            e.printStackTrace();
        }

        terrain = new TerrainQuad("terrain", 65, 513, heightmap.getHeightMap());
        List<Camera> cameras = new ArrayList<Camera>();
        cameras.add(getCamera());
        TerrainLodControl control = new TerrainLodControl(terrain, cameras);
        terrain.addControl(control);
        terrain.setMaterial(matRock);
        terrain.setLocalScale(new Vector3f(2, 2, 2));

        terrainPhysicsNode = new RigidBodyControl(
                CollisionShapeFactory.createMeshShape(terrain), 0);
        terrain.addControl(terrainPhysicsNode);
        rootNode.attachChild(terrain);
        getPhysicsSpace().add(terrainPhysicsNode);
    }

    private void createTerrain() {

         assetManager.registerLocator("town.zip", ZipLocator.class);
         sceneModel = assetManager.loadModel("main.scene");
        //sceneModel = assetManager.loadModel("Scenes/ManyLights/Main.scene");
        sceneModel.setLocalScale(2f);
        //initFloor();
        // We set up collision detection for the scene by creating a
        // compound collision shape and a static RigidBodyControl with mass
        // zero.
        CollisionShape sceneShape = CollisionShapeFactory
                .createMeshShape((Node) sceneModel);
        landscape = new RigidBodyControl(sceneShape, 0);
        sceneModel.addControl(landscape);
        List<Camera> cameras = new ArrayList<Camera>();
        cameras.add(getCamera());
        rootNode.attachChild(sceneModel);
    }

    private void createCharacters() {
        CapsuleCollisionShape capsule = new CapsuleCollisionShape(3f, 4f);
        character = new CharacterControl(capsule, 0.01f);
        model = (Node) assetManager.loadModel("Models/Ninja/Ninja.mesh.xml");
        float scale = 0.25f;
        model.scale(0.05f, 0.05f, 0.05f);
        model.addControl(character);
        character.setPhysicsLocation(new Vector3f(0, -0.09f, 0));
        model.setShadowMode(ShadowMode.CastAndReceive);
        character.setViewDirection(new Vector3f(1, 0, 0));
        rootNode.attachChild(model);
        getPhysicsSpace().add(character);

        //BlenderKey blenderKey = new BlenderKey("Models/Oto/Oto.mesh.xml");

        //Spatial man = (Spatial) assetManager.loadModel(blenderKey);
        //man.setLocalTranslation(new Vector3f(-140, 12.5f, -10));

        // man.setShadowMode(ShadowMode.CastAndReceive);
        //rootNode.attachChild(man);

    }

    private void setupChaseCamera() {
        flyCam.setEnabled(false);
        chaseCam = new ChaseCamera(cam, model, inputManager);
    }

    private void setupAnimationController() {
        animationControl = model.getControl(AnimControl.class);
        animationControl.addListener(this);
        animationChannel = animationControl.createChannel();
        // shootingChannel = animationControl.createChannel();
        // shootingChannel.addBone(animationControl.getSkeleton().getBone(
        // "uparm.right"));
        // shootingChannel.addBone(animationControl.getSkeleton().getBone(
        // "arm.right"));
        // shootingChannel.addBone(animationControl.getSkeleton().getBone(
        // "hand.right"));
    }

    @Override
    public void simpleUpdate(float tpf) {
        Vector3f camDir = cam.getDirection().clone().multLocal(0.1f);
        Vector3f camLeft = cam.getLeft().clone().multLocal(0.1f);
        camDir.y = 0;
        camLeft.y = 0;
        walkDirection.set(0, 0, 0);
        if (left) {
            walkDirection.addLocal(camLeft);
        }
        if (right) {
            walkDirection.addLocal(camLeft.negate());
        }
        if (up) {
            walkDirection.addLocal(camDir);
        }
        if (down) {
            walkDirection.addLocal(camDir.negate());
        }
        if (!character.onGround()) {
            airTime = airTime + tpf;
        } else {
            airTime = 0;
        }
        if (walkDirection.length() == 0) {
            if (!"Idle1".equals(animationChannel.getAnimationName())) {
                animationChannel.setAnim("Idle1", 1f);
            }
        } else {
            character.setViewDirection(walkDirection);
            if (airTime > .3f) {
                if (!"stand".equals(animationChannel.getAnimationName())) {
                    animationChannel.setAnim("stand");
                }
            } else if (!"Walk".equals(animationChannel.getAnimationName())) {
                animationChannel.setAnim("Walk", 0.7f);
            }
        }
        character.setWalkDirection(walkDirection);
    }

    public void onAction(String binding, boolean value, float tpf) {
        if (binding.equals("CharLeft")) {
            if (value) {
                left = true;
            } else {
                left = false;
            }
        } else if (binding.equals("CharRight")) {
            if (value) {
                right = true;
            } else {
                right = false;
            }
        } else if (binding.equals("CharUp")) {
            if (value) {
                up = true;
            } else {
                up = false;
            }
        } else if (binding.equals("CharDown")) {
            if (value) {
                down = true;
            } else {
                down = false;
            }
        } else if (binding.equals("CharSpace")) {
            character.jump();
        } else if (binding.equals("CharShoot") && !value) {
            bulletControl();
        }
    }

    private void bulletControl() {
        shootingChannel.setAnim("Dodge", 0.1f);
        shootingChannel.setLoopMode(LoopMode.DontLoop);
        Geometry bulletg = new Geometry("bullet", bullet);
        bulletg.setMaterial(matBullet);
        bulletg.setShadowMode(ShadowMode.CastAndReceive);
        bulletg.setLocalTranslation(character.getPhysicsLocation().add(
                cam.getDirection().mult(5)));
        RigidBodyControl bulletControl = new BombControl(bulletCollisionShape,
                1);
        bulletControl.setCcdMotionThreshold(0.1f);
        bulletControl.setLinearVelocity(cam.getDirection().mult(80));
        bulletg.addControl(bulletControl);
        rootNode.attachChild(bulletg);
        getPhysicsSpace().add(bulletControl);
    }

    public void collision(PhysicsCollisionEvent event) {
        if (event.getObjectA() instanceof BombControl) {
            final Spatial node = event.getNodeA();
            effect.killAllParticles();
            effect.setLocalTranslation(node.getLocalTranslation());
            effect.emitAllParticles();
        } else if (event.getObjectB() instanceof BombControl) {
            final Spatial node = event.getNodeB();
            effect.killAllParticles();
            effect.setLocalTranslation(node.getLocalTranslation());
            effect.emitAllParticles();
        }
    }

    public void onAnimCycleDone(AnimControl control, AnimChannel channel,
            String animName) {
        if (channel == shootingChannel) {
            channel.setAnim("stand");
        }
    }

    public void onAnimChange(AnimControl control, AnimChannel channel,
            String animName) {
    }

    // Load an image from the net, making sure it has already been
    // loaded when the method returns
    public Image loadPicture(String imageName) {
        return null;
    }

    // Load and play a sound from /usr/local/hacks/sounds/

    public void playSound(String name) {
        URL u = null;

        try {
            u = new URL("file:" + "/usr/local/hacks/sounds/" + name + ".au");
        } catch (MalformedURLException e) {
        }

        AudioClip a = Applet.newAudioClip(u);
        a.play();
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T21:50:44.113

看来这是由于这行代码：

```
CapsuleCollisionShape capsule = new CapsuleCollisionShape(3f, 4f); 
```

然后你正在缩小模型。我不知道传入的值是什么，但我想一个是半径，另一个是高度，尝试将 3f 和 4f 向下移动到更低的值，例如 1.0f 和 2.0f。

似乎碰撞检测正在推动你的角色向上，因为它的碰撞形状是一个胶囊，它与模型的大小不同，并且模型被放置在胶囊的中间。

# c# - 为什么 MSFT C# 以不同方式编译固定的“数组到指针衰减”和“第一个元素的地址”？

> ID：11803678
> 
> 赞同：25
> 
> 时间：2012-08-03T21:40:49.557
> 
> 标签：c#, .net, compiler-construction, il

.NET c# 编译器 (.NET 4.0)`fixed`以一种相当特殊的方式编译语句。

这是一个简短但完整的程序，向您展示我在说什么。

```
using System;

public static class FixedExample {

    public static void Main() {
        byte [] nonempty = new byte[1] {42};
        byte [] empty = new byte[0];

        Good(nonempty);
        Bad(nonempty);

        try {
            Good(empty);
        } catch (Exception e){
            Console.WriteLine(e.ToString());
            /* continue with next example */
        }
        Console.WriteLine();
        try {
            Bad(empty);
        } catch (Exception e){
            Console.WriteLine(e.ToString());
            /* continue with next example */
        }
     }

    public static void Good(byte[] buffer) {
        unsafe {
            fixed (byte * p = &buffer[0]) {
                Console.WriteLine(*p);
            }
        }
    }

    public static void Bad(byte[] buffer) {
        unsafe {
            fixed (byte * p = buffer) {
                Console.WriteLine(*p);
            }
        }
    }
} 
```

如果您想继续，请使用“csc.exe FixedExample.cs /unsafe /o+”编译它。

这是该方法生成的 IL `Good`：

**好的（）**

```
 .maxstack  2
  .locals init (uint8& pinned V_0)
  IL_0000:  ldarg.0
  IL_0001:  ldc.i4.0
  IL_0002:  ldelema    [mscorlib]System.Byte
  IL_0007:  stloc.0
  IL_0008:  ldloc.0
  IL_0009:  conv.i
  IL_000a:  ldind.u1
  IL_000b:  call       void [mscorlib]System.Console::WriteLine(int32)
  IL_0010:  ldc.i4.0
  IL_0011:  conv.u
  IL_0012:  stloc.0
  IL_0013:  ret 
```

这是该方法生成的 IL `Bad`：

**坏的（）**

```
 .locals init (uint8& pinned V_0, uint8[] V_1)
  IL_0000:  ldarg.0
  IL_0001:  dup
  IL_0002:  stloc.1
  IL_0003:  brfalse.s  IL_000a
  IL_0005:  ldloc.1
  IL_0006:  ldlen
  IL_0007:  conv.i4
  IL_0008:  brtrue.s   IL_000f
  IL_000a:  ldc.i4.0
  IL_000b:  conv.u
  IL_000c:  stloc.0
  IL_000d:  br.s       IL_0017
  IL_000f:  ldloc.1
  IL_0010:  ldc.i4.0
  IL_0011:  ldelema    [mscorlib]System.Byte
  IL_0016:  stloc.0
  IL_0017:  ldloc.0
  IL_0018:  conv.i
  IL_0019:  ldind.u1
  IL_001a:  call       void [mscorlib]System.Console::WriteLine(int32)
  IL_001f:  ldc.i4.0
  IL_0020:  conv.u
  IL_0021:  stloc.0
  IL_0022:  ret 
```

这是做什么的`Good`：

1.  获取缓冲区[0]的地址。
2.  取消引用该地址。
3.  使用该取消引用的值调用 WriteLine。

这是“坏”的作用：

1.  如果缓冲区为空，则转到 3。
2.  如果 buffer.Length != 0，转到 5。
3.  将值 0 存储在本地插槽 0 中，
4.  转到 6。
5.  获取缓冲区[0]的地址。
6.  尊重该地址（在本地插槽 0 中，现在可能是 0 或缓冲区）。
7.  使用该取消引用的值调用 WriteLine。

当`buffer`既非空又非空时，这两个函数做同样的事情。请注意，在进行函数调用`Bad`之前，它只是跳过了几圈。`WriteLine`

当`buffer`为 null 时，在*固定指针声明符*( )中`Good`抛出 a 。大概这是修复托管数组所需的行为，因为通常*固定语句*内的任何操作都将取决于被修复对象的有效性。否则为什么该代码会在块内？当传递一个空引用时，它会在块的开头立即失败，提供相关且信息丰富的堆栈跟踪。开发人员会看到这一点并意识到他应该在使用它之前进行验证，或者他的逻辑可能被错误地分配给. 无论哪种方式，清楚地进入一个带有`NullReferenceException`*`byte * p = &buffer[0]`*`fixed``Good``fixed``buffer``null``buffer``fixed``null`托管数组是不可取的。**

 **`Bad`以不同的方式处理这种情况，甚至是不受欢迎的。您可以看到在取消引用`Bad`之前实际上不会引发异常。`p`它以迂回的方式*将 null 分配给*持有的同一个本地槽`p`，然后在`fixed`块语句取消引用时抛出异常`p`。

以这种方式处理`null`的优点是保持 C# 中的对象模型一致。也就是说，在`fixed`块内部，在`p`语义上仍然被视为一种“指向托管数组的指针”，当它为 null 时，不会导致问题，直到（或除非）它被取消引用。一致性很好，但问题是**p 不是指向托管数组的指针**。它是指向 的第一个元素的指针`buffer`，任何编写此代码 ( `Bad`) 的人都会将其语义解释为这样。你不能得到`buffer`from的大小`p`，也不能 call `p.ToString()`，那么为什么要把它当作一个对象来对待呢？在为空的情况下`buffer`，显然存在编码错误，我相信如果`Bad`*将在固定指针声明*符处抛出异常，而不是在方法内部。

所以看起来`Good`处理起来`null`比做的好`Bad`。空缓冲区呢？

当`buffer`长度为 0 时，抛出`Good`固定*指针声明符*。这似乎是一种处理越界数组访问的完全合理的方法。毕竟，代码应该被以同样的方式对待，显然应该抛出。`IndexOutOfRangeException`*`&buffer[0]``&(buffer[0])``IndexOutOfRangeException`*

 *`Bad`以不同的方式处理这种情况，并且再次不受欢迎。就像 if `buffer`were `null`, when `buffer.Length == 0`,在被取消引用`Bad`之前不会抛出异常的情况一样`p`，那时它会抛出**NullReferenceException，而不是 IndexOutOfRangeException！** 如果`p`从不取消引用，那么代码甚至不会抛出异常。同样，这里的想法似乎是赋予`p`“指向托管数组的指针”的语义含义。再一次，我认为编写此代码的任何人都不会这么想`p`。`IndexOutOfRangeException`如果将代码放入*固定指针声明器*中，代码会更有帮助，从而通知开发人员传入的数组是空的，而不是`null`.

看起来`fixed(byte * p = buffer)`应该已经编译为与 was 相同的代码`fixed (byte * p = &buffer[0])`。 **另请注意，即使`buffer`可能是任意表达式，它的类型 ( `byte[]`) 在编译时是已知的，因此其中的代码`Good`适用于任意表达式。**

**编辑**

事实上，请注意， 的实现`Bad`实际上对`buffer[0]` *两次*进行了错误检查。它在方法开始时显式执行，然后在`ldelema`指令处再次隐式执行。

* * *

所以我们看到`Good`and`Bad`在语义上是不同的。 `Bad`更长，可能更慢，并且当我们的代码中有错误时，当然不会给我们想要的异常，甚至在某些情况下失败的时间比它应该的要晚得多。

对于那些好奇的人，规范的第 18.6 节（C# 4.0）说在这两种失败情况下行为是“实现定义的”：

> 固定指针初始化器可以是以下之一：
> 
> • 代币“&” 后跟对非托管类型 T 的可移动变量（第 18.3 节）的变量引用（第 5.3.3 节），前提是类型 T* 可隐式转换为固定语句中给出的指针类型。在这种情况下，初始化程序计算给定变量的地址，并保证该变量在固定语句的持续时间内保持在固定地址。
> 
> • 具有非托管类型 T 元素的数组类型表达式，前提是类型 T* 可隐式转换为固定语句中给定的指针类型。在这种情况下，初始化程序计算数组中第一个元素的地址，并保证整个数组在固定语句的持续时间内保持在固定地址。**如果数组表达式为空或数组有零个元素，则固定语句的行为是实现定义的。**
> 
> ...其他情况...

最后一点，[MSDN 文档](http://msdn.microsoft.com/en-us/library/f58wzh21%28v=vs.110%29.aspx)表明两者是“等价的”：

> // 下面的两个赋值是等价的...
> 
> 固定（双* p = arr）{ / *...* / }
> 
> 固定 (double* p = &arr[0]) { / *...* / }

如果两者应该是“等价的”，那么为什么对前一个语句使用不同的错误处理语义呢？

似乎还花费了*额外的精力*来编写`Bad`. 编译后的代码在所有失败情况下都可以正常工作，并且与非失败情况下`Good`的代码相同。`Bad`为什么要实现新的代码路径，而不是只使用为 生成的更简单的代码`Good`？

**为什么以这种方式实施？**

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-03T22:14:16.370

您可能会注意到，您包含的 IL 代码几乎逐行实现了规范。这包括在相关的情况下显式实现规范中列出的两个异常情况，在不相关的情况下*不*包括代码。因此，编译器行为方式的最简单原因是“因为规范是这样说的”。

当然，这只会导致我们可能会问的另外两个问题：

*   为什么 C# 语言组选择这样编写规范？
*   为什么编译器团队选择了*特定*的实现定义的行为？

如果没有合适团队的人出现，我们真的不能完全回答这些问题中的任何一个。但是，我们可以通过尝试遵循他们的推理来尝试回答第二个问题。

回想一下，规范说，在将数组提供给*fixed-pointer-initializer*的情况下，

> **如果数组表达式为空或数组有零个元素，则固定语句的行为是实现定义的。**

由于在这种情况下实现可以自由选择做它想做的任何事情，我们可以假设编译器团队做任何合理的行为是最容易和最便宜的。

在这种情况下，编译器团队选择做的是“**在代码出错的地方抛出异常**”。考虑如果代码不在*固定指针初始化器*中，它会做什么，并考虑还会发生什么。在您的“好”示例中，您试图获取一个不存在的对象的地址：空/空数组中的第一个元素。这不是您实际上可以做的事情，因此会产生异常。在您的“坏”示例中，您只是将参数的地址分配给指针变量；`byte * p = null`是一个完全合法的声明。只有当您尝试时才会`WriteLine(*p)`发生错误。由于*固定指针初始化器*在这种异常情况下允许为所欲为，最简单的做法就是允许分配发生，尽管它毫无意义。

显然，这两种说法*并不*完全等价。我们可以通过标准对它们的不同对待来说明这一点：

*   `&arr[0]`是：“令牌“&” 后跟一个变量引用”，因此编译器计算 arr[0] 的地址
*   `arr`是：“数组类型的表达式”，因此编译器计算数组第一个元素的地址，但需要注意的是，空数组或 0 长度数组会产生您所看到的实现定义的行为。

只要数组中有一个元素，这两者就会产生等效的*结果，这是 MSDN 文档试图解决的问题。*询问为什么明确未定义或实现定义的行为会以它的方式行事的问题并不能真正帮助您解决任何特定问题，因为您不能依赖它在未来成为真的。（话虽如此，我当然很想知道思考过程是什么，因为您显然无法“修复”内存中的空值......）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T22:10:55.513

> 所以我们看到Good和Bad在语义上是不同的。为什么？

因为好的是案例1，坏的是案例2。

Good 没有分配“数组类型的表达式”。它分配“令牌“&” 后跟一个变量引用”，所以它是案例 1。Bad 分配“数组类型的表达式”使其成为案例 2。如果这是真的，则 MSDN 文档是错误的。

无论如何，这解释了为什么 C# 编译器会创建两种不同的（在第二种情况下是专门的）代码模式。

为什么案例 1 会生成如此简单的代码？我在这里推测：获取数组元素的地址可能与`array[index]`在`ref`-expression 中使用的方式相同。在 CLR 级别，`ref`参数和表达式只是托管指针。表达式也是如此`&array[index]`：它被编译为不是固定而是“内部”的托管指针（我认为这个术语来自托管 C++）。GC 会自动修复它。它的行为就像一个普通的对象引用。

因此，案例 1 获得了通常的托管指针处理，而案例 2 获得了特殊的、实现定义的（不是未定义的）行为。

这并不能回答你所有的问题，但至少它为你的观察提供了一些理由。我有点希望 Eric Lippert 作为内部人士添加他的答案。***

# c# - 如果我有参数要传递给产品类生成器，如何使用设计模式？

> ID：11803679
> 
> 赞同：0
> 
> 时间：2012-08-03T21:40:49.487
> 
> 标签：c#, design-patterns

我对设计模式比较陌生，在我看来，设计模式是最难的部分，也是整个软件设计的顶层（如果我错了，请纠正我）。

我现在有一个包含几个嵌入式功能的大类，我想将一些功能重构为子类。但是这些子类中的大多数将使用其前面代码输出的输出作为构造函数输入。这让我很困惑。我应该如何在我的设计模式中实现这种情况？或者我应该避免这种依赖情况？

以下是我的班级示例：

```
 public  class Edit 
    {
         private List<Graphic> _listGraphic;
         public Initialization()
         {
             _listGraphic= SomeFunctionHere();
             BatchEdit batchEdit= new BatchEdit(_listGraphic);
          }

     }

     public class BatchEdit
    {

         public BatchEdit(List<Graphic> listGra)
         {
         }
    } 
```

谢谢，

魏

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T21:52:28.937

在我看来，好像您想将某些行为[*委托*](http://en.wikipedia.org/wiki/Delegation_pattern)给其他类，这些类通常不是“子类”（就继承而言）。

一个委托可能依赖于它的调用者——如果委托需要使用它的一些调用者，你可以将调用者的引用传递给构造函数。

请不要将“设计”与“设计模式”混淆。您为您的应用程序开发了一个*设计*，该设计应该建立在通用*设计模式*之上。设计模式指导最常见问题的解决方案。

# ruby-on-rails-3 - rails active admin中的自定义销毁/编辑功能

> ID：11803681
> 
> 赞同：1
> 
> 时间：2012-08-03T21:40:52.053
> 
> 标签：ruby-on-rails-3, activeadmin, inherited-resources

我想在活动管理员中为销毁和编辑默认操作添加一些自定义代码。本质上，当我编辑或删除成员时，我想将该操作与外部数据库上的副本同步。

我可以重定向到自定义方法来执行此操作，然后重定向回索引，或者创建自己的操作来代替我可以调用的默认操作。

有一个更好的方法吗？最好只修改活动的管理员销毁和编辑功能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T20:14:39.370

[在 Stack Overflow 上自定义控制器答案](https://stackoverflow.com/a/11818159/349423)

该示例覆盖了 create，但您可以使用`update`and执行相同的操作`destroy`。

# ios - 将非常简单的 MusicSequence 保存到 MIDI 中不会重现声音

> ID：11803691
> 
> 赞同：5
> 
> 时间：2012-08-03T21:41:59.083
> 
> 标签：ios, iphone, ios5, midi, musicsequence

我正在尝试将一个非常基本的单音符 MusicSequence ( [MusicSequence Reference](http://developer.apple.com/library/mac/#documentation/AudioToolbox/Reference/MusicSequence_Reference/Reference/reference.html "MusicSequence 参考") ) 保存到 MIDI 文件中。该文件现在正在写入，并且音符的持续时间也（如果我输入持续时间 4，则 MIDI 文件持续 2 秒，如果我将其更改为 2，那么它应该持续 1 秒）但是没有声音被再现和如果我在 Logic 中查看 MIDI 文件，也没有任何信息。似乎笔记持续时间被写了，但笔记的笔记没有。

会发生什么？

```
+ (MusicSequence)getSequence
{
    MusicSequence mySequence;
    MusicTrack myTrack;
    NewMusicSequence(&mySequence);
    MusicSequenceNewTrack(mySequence, &myTrack);

    MIDINoteMessage noteMessage;
    MusicTimeStamp timestamp = 0;
    noteMessage.channel = 0;
    noteMessage.note = 4;
    noteMessage.velocity = 90;
    noteMessage.releaseVelocity = 0;
    noteMessage.duration = 4;

    if (MusicTrackNewMIDINoteEvent(myTrack, timestamp, &noteMessage) != noErr) NSLog(@"ERROR creating the note");
    else NSLog(@"Note added");

    return mySequence;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-04T17:28:41.187

尝试写一个大于 20 且 < 109 的[音符（中音范围](http://www.phys.unsw.edu.au/jw/notes.html)）。虽然 4 在技术上可能是有效的，但它超出了正常 MIDI 音符的范围。

此外，与 Core Audio/MusicPlayer 等一起使用的有用函数是 CAShow() - 因此请尝试`CAShow(sequence)`查看序列数据。

# php - 如何在 PHP 中隐藏文件名和扩展名？

> ID：11803693
> 
> 赞同：-4
> 
> 时间：2012-08-03T21:42:20.997
> 
> 标签：php, .htaccess

我有一个这种格式的网址：“sitename.com/folder/file.php”。如何使其成为“sitename.com/randomhash”或“sitename.com/folder/randomhash”格式？

我知道我可以使用 GET & Switch 系统，但我需要名称是唯一的，并且我需要能够即时更改它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T22:25:18.707

我真的不明白你的意思是什么，但如果你不希望你的访问者知道你的 php 文件存储在哪里，我建议你阅读这个：

[PHP 中的 URL 处理教程](http://w3schools.invisionzone.com/index.php?showtopic=17250)

如果您有一个人们可以下载东西的网站，并且您不希望人们热链接您的文件，您可以执行以下步骤（我不是在编写代码，我只是给您一个大致的想法） ：

1.  人们访问您的网站。
2.  人们单击链接是因为他们想下载该特定文件。
3.  Person 出现在页面上，您可以在其中设置带有随机散列的 cookie。
4.  同时，您将一个值放入数据库中，具有相同的哈希值和他们想要下载的文件的文件路径。
5.  在此页面上，他们必须单击“立即下载！”，然后重定向到 download.php。
6.  在 download.php 中读取 cookie，然后将其与数据库匹配并获取文件路径。
7.  使用正确的 php-headers，您可以强制 download.php 下载文件。

在这种情况下，重要的是您将 Apache（或您拥有的任何服务器）的设置设置为不允许下载，除非“localhost”请求它。

# mysql - Mysql查询GROUP BY where条件LIMIT 1

> ID：11803700
> 
> 赞同：3
> 
> 时间：2012-08-03T21:43:13.730
> 
> 标签：mysql

我在数据库上有一个名为“文章”的表

文章：

```
id +++   writer_id    +++     title     ++++    text
----------------------------------------------------
1           1              some title        article for writer 1 
2           1              some title        article for writer 1 
3           2              some title        article for writer 2 
4           2              some title        article for writer 2 
5           2              some title        article for writer 2
6           3              some title        article for writer 3 
```

我需要一个查询来从表中获取最新文章，但每个作家只有一篇文章

取决于查询上方的行应该只有 3 行：每篇文章由一位作者拥有

```
2           1              some title        article for writer 1 
5           2              some title        article for writer 2
6           3              some title        article for writer 3 
```

php

```
SELECT * 
FROM articles
WHERE writer_id = ???? ;
order by id desc limit 10 
```

提前致谢 ： ）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T21:54:18.993

简短而甜蜜：

```
SELECT MAX(id), writer_id, title, text FROM articles GROUP BY writer_id; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T21:49:07.333

使用`GROUP BY`和的组合`HAVING`将允许您获得每位作者撰写的最后一篇文章，并正确排序：

```
SELECT * 
FROM articles
WHERE writer_id = ????
GROUP BY writer_id
HAVING id = MAX(id)
ORDER BY id DESC
LIMIT 10 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T21:49:54.333

使用子查询获取每个作者的最新*文章 ID*：

```
SELECT * FROM articles
WHERE id in
(
    SELECT MAX(id) id, writer_id
    FROM articles
    GROUP BY writer_id
) 
```

# c++ - C/C++ - 共享内存中的环形缓冲区（POSIX 兼容）

> ID：11803706
> 
> 赞同：3
> 
> 时间：2012-08-03T21:43:54.593
> 
> 标签：c++, c, ipc, shared-memory, condition-variable

我有一个应用程序，生产者和消费者（“客户”）想要相互发送广播消息，即`n:m`关系。所有这些都可能是不同的程序，因此它们是不同的**进程**而不是线程。

为了减少`n:m`到更易于维护的东西，我正在考虑一个设置，比如引入一个小的中央服务器。该服务器将提供一个套接字，每个客户端都可以连接到该套接字。
每个客户端都会通过该套接字向服务器发送一条新消息 - 导致`1:n`.

服务器还将提供对客户端**只读的****共享内存**。它将被组织为一个**环形缓冲区**，新消息将由服务器添加并覆盖旧消息。 这会给客户一些时间来处理消息 - 但如果它太慢，那就是运气不好，无论如何它都不再相关了......

 ****我看到这种方法的优点是我避免了同步以及不必要的数据复制和缓冲区层次结构，中央一个应该就足够了，不是吗？

到目前为止，这就是架构 - 我希望它有意义......

现在到了实现它的更有趣的方面：
​​环形缓冲区中最新元素的索引是共享内存中的一个变量，客户端只需等待它发生变化。而不是愚蠢的`while( central_index == my_last_processed_index ) { /* do nothing */ }`我想释放 CPU 资源，例如通过使用`pthread_cond_wait()`.

但这需要一个我认为我不需要的互斥锁——另一方面，[为什么 pthreads 的条件变量函数需要一个互斥锁？](https://stackoverflow.com/questions/2763714/why-do-pthreads-condition-variable-functions-require-a-mutex)给我的印象是我最好问问我的架构是否有意义并且可以这样实现......

如果所有这些都有意义并且可行，你能给我一个提示吗？

（旁注：客户端程序也可以用 Perl 和 Python 等通用脚本语言编写。因此与服务器的通信必须在那里重新创建，因此不应该太复杂甚至专有）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T23:05:01.973

如果内存服务，互斥锁伴随条件变量的原因是在 POSIX 下，向条件变量发出信号会导致内核唤醒条件变量上的*所有*等待者。在这些情况下，消费者线程需要做的第一件事就是检查是否有东西要消费——通过访问生产者和消费者线程之间共享的变量。互斥锁防止并发访问用于此目的的变量。这当然意味着如果有很多消费者，其中 n-1 个是不必要的唤醒。

已经精确地实现了上述安排，要使用的 IPC 对象的选择并不明显。我们在不同进程中的高优先级实时线程之间缓冲音频，并且不想阻塞消费者。由于音频是实时制作和消费的，我们已经在两端定期安排，如果没有消费（或制作空间），我们就会丢弃数据，因为我们已经错过了最后期限。

在您描述的安排中，您将需要一个互斥锁来防止消费者同时消费排队的项目（相信我，在轻负载的 SMP 系统上，他们会）。但是，您也不需要让制作人对此进行争论。

我不明白您对消费者对共享内存具有只读访问权限的评论。在经典的无锁环形缓冲区实现中，生产者写入队列尾部指针，消费者写入头部 - 而所有各方都需要能够读取两者。您当然可以将队列头和尾安排在与队列数据本身不同的共享内存区域中。

另请注意，在实现诸如此类的环形缓冲区时，SMP 系统存在理论上的数据一致性风险 - 即相对于头或尾指针的队列内容回写到内存可能会发生乱序（它们在缓存 - 通常是每个 CPU 内核）。这个主题还有其他变体与 CPU 之间的缓存同步有关。为了防止这些，你需要一个内存、加载和存储屏障来强制排序。请参阅[Wikipedia 上的内存屏障](http://en.wikipedia.org/wiki/Memory_barrier)。您可以通过使用互斥锁和条件变量等内核同步原语来显式避免这种危险。

C11 原子操作可以帮助解决这个问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-04T03:30:46.347

据我所知，您确实需要 pthread_cond_wait() 上的互斥锁。原因是 pthread_cond_wait() 不是原子的。条件变量在调用过程中可能会发生变化，除非它受到互斥锁的保护。

您可以忽略这种情况 - 客户端可能会在消息 1 之后休眠，但是当发送后续消息时，客户端将醒来并找到两条要处理的消息。如果这是不可接受的，则使用互斥锁。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-03T22:07:07.380

`sem_t`如果您的系统有它们，您可能可以通过使用它们来进行一些不同的设计；一些 POSIX 系统仍然停留在 2001 版本的 POSIX 上。

您可能并不强制**需要**互斥锁/条件对。这就是很久以前为 POSIX 设计的方式。

现代 C、C11 和 C++、C++11 现在为您带来（或将为您带来）原子操作，这是在所有现代处理器中实现的功能，但缺乏大多数高级语言的支持。原子操作是解决您想要实现的环形缓冲区竞争条件的答案的一部分。但它们还不够，因为使用它们你只能通过轮询进行主动等待，这可能不是你想要的。

作为 POSIX 的扩展，Linux 的**futex**解决了这两个问题：通过使用原子操作避免更新竞争以及通过系统调用使服务员进入睡眠状态。Futex 通常被认为对于日常编程来说太低级了，但我认为使用它们实际上并不太难。我在[这里](https://gustedt.wordpress.com/2011/01/28/linux-futexes-non-blocking-integer-valued-condition-variables/)写了一些东西。****

# iphone - 模态视图控制器如何与堆栈一起工作？

> ID：11803710
> 
> 赞同：0
> 
> 时间：2012-08-03T21:44:22.953
> 
> 标签：iphone, ios, modal-dialog, segue

我是 iPhone 编程新手。而且，我正在尝试制作一个有 200 个关卡的游戏。我想使用模态搜索，因为我不希望导航栏位于顶部，而且我想要交叉溶解动画。说我有vc之一。然后我有vc 2

好的，所以 vc 1 模态地转到 vc 2

然后我在 vc 2 上有一个按钮可以切换回 vc 1

那么，程序是否知道将 vc 2 从堆栈中弹出？还是我只是创建了内存泄漏，以便现在 vc1、vc2 和 vc1 在堆栈上，而不仅仅是 vc1。

然后如果我有 vc1 到 vc2，vc2 到 vc3，并且在 vc3 中我有一个返回到 vc 1 的按钮，程序是否会将 vc 2 和 vc 3 从堆栈中弹出？还是 4 会在堆栈上？无论如何，由于模态转场没有真正的后退按钮（就像在导航推送转场中导航栏上总是有一个后退按钮），模态转场甚至有堆栈吗？

我的意思是，还是独立的？比如，说 vc 与 vc2 相连，而 vc2 与 vc3 相连。现在，vc 2 和 1 甚至在堆栈上吗？还是只是vc3？

对不起，我只是对这一切有点困惑，我不知道如何制作我的游戏。因为如果我有 100 个不同级别的视图控制器，那么肯定为了进行模态搜索，每次我正确搜索时，我都需要编写一些从堆栈中弹出的 vcs 代码，这样我就不会在堆栈上得到 100 个控制器? 而且我什至不知道如何告诉我的程序如何弹出视图控制器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T22:04:23.390

因此，模态转场主要用于呈现中断应用程序通常流程的内容。它真的不适合顺序呈现多个视图控制器，因为正如您所说，如果您有一个可以返回到第一个视图控制器的 segue，它不会从堆栈中弹出任何内容。

您想查找 Apple 提供的 View Controller 容器之一，以查看哪个最适合通过视图控制器的顺序列表。

页面视图控制器很有用，因为它一次只加载一个或两个视图控制器，并且从 iOS 5 开始，您可以将`transitionStyle`属性设置为 'UIPageViewControllerTransitionStyleScroll' 以在视图控制器之间左右（或上下）滚动。

如果您不喜欢苹果为此提供的视图控制器，请查看 UIViewController 的文档，了解如何编写您自己的自定义容器视图控制器。通过这种方式，您可以定义自己的堆栈，根据需要弹出堆栈并进行溶解过渡。

[http://developer.apple.com/library/ios/#documentation/uikit/reference/UIViewController_Class/Reference/Reference.html%23//apple_ref/doc/uid/TP40006926-CH3-SW81](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIViewController_Class/Reference/Reference.html%23//apple_ref/doc/uid/TP40006926-CH3-SW81)

# xcode - 在 Xcode Organizer 中重置设备

> ID：11803712
> 
> 赞同：1
> 
> 时间：2012-08-03T21:44:29.567
> 
> 标签：xcode, ios5, deployment, xcode4.4, xcode-organizer

在将设备添加到管理器以部署到它的过程中，我犯了很多错误。

我想完全重新开始，但是每次我删除设备，从我的电脑上拔下它，然后重新添加它，它已经识别了它，意味着“用于开发”选项不可用，并且错误“Xcode找不到安装此版本的软件映像”总是弹出。

我如何从头开始？

任何建议将不胜感激。谢谢。

这是非常紧急的，谢谢！

更新:: 不断弹出这些错误 -

1.  配置文件 - 未找到有效的签名身份

2.无法使用该团队中的身份进行代码设计：没有可用的证明密钥

3.软件版本 - XCode 找不到安装此版本的软件镜像 (5.1.1 (9B206) )

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-06T19:08:56.143

我想到了。

您可以通过转到“钥匙串访问”从头开始。转到密码，然后删除您的 appleID。然后，它会再次提示您输入您的 Apple ID。

要解决指定的问题，您需要一个开发证书，只有当您使用您的帐户登录时才会自动请求该证书。然后管理员将登录到他的帐户并批准您的请求。一旦创建了证书，它仍然无法工作。

您需要下载证书以添加到钥匙串中的证书，还需要下载配置文件。

# c++ - 是否有适用于 Windows 的优秀 C++ XML DOM 教程？

> ID：11803716
> 
> 赞同：2
> 
> 时间：2012-08-03T21:44:49.390
> 
> 标签：c++, xml, dom, msxml

我需要使用 Windows API 将数据保存为 XML。有没有可以推荐的好的 XML DOM 教程——它不必非常简陋，因为我之前在 C# 中使用过 XML。

或者，有没有比使用 XML DOM 更好的方法？我不能使用 Windows 自带的 3rd-party 或 OSS 库。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T21:47:57.350

除了 MSXML，我不知道任何其他 Microsoft C++ API。我个人对这个图书馆的印象是负面的。C++ 本身或作为 C++ 标准库的一部分没有正式的 XML DOM。同时有大量不同的 XML 阅读器/编写器，包括我自己的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T22:40:11.750

有大量的 XML 库——从 Apache Xerces 到[TinyXML](http://sourceforge.net/projects/tinyxml/)（我最喜欢的）。

您可以使用 OSS 库，您只需要仔细选择许可证 - [Apache 许可证](http://www.apache.org/licenses/)对您来说应该足够宽松，而 TinyXML 使用基本上是公共领域的[zlib 库。](http://www.zlib.net/zlib_license.html)TinyXML 可以直接包含在您的程序中（如果您喜欢 - 一个 cpp 和 .h 文件，可以像您自己编写一样编译）

事实上，MSXML 没问题，但如果您重用存储在 CComPTR 智能指针类中的 MSXML 对象，您真的必须记住删除现有指针，否则您会泄漏内存。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-24T17:36:15.143

最终，我最终使用了[MSDN 上](http://msdn.microsoft.com/en-us/library/windows/desktop/ms759192%28v=vs.85%29.aspx)的一系列示例。虽然有几种替代品可能更可取，但我受到公司政策的限制，只能使用包装盒上已有的东西。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-04T01:00:25.390

如前所述 TinyXML 是 C++ 的事实标准，有很多但我看到它使用最多，我相信它的网站也有教程

# ruby-on-rails-3 - Rails 动态查找器返回 nil

> ID：11803717
> 
> 赞同：1
> 
> 时间：2012-08-03T21:44:59.047
> 
> 标签：ruby-on-rails-3, null, dynamic-finders

使用 Ruby on Rails - sqlite3、rails 3.2.2、ruby 1.9.3p125（在 Windows XP 上）

在数据库中有记录：

```
Shop.find(123) - returns the shop
Shop.where(:id => 123) - returns the shop 
```

但

```
Shop.find_by_id(123) returns nil
Shop.find_by_name("some_name") returns nil 
```

所有的动态查找器也是如此（注意它对于整数值和字符串值返回 nil）

为什么不定义它们？

# c++ - 类头定义中的 decltype 和 auto 是一些可能的特定情况

> ID：11803719
> 
> 赞同：3
> 
> 时间：2012-08-03T21:45:02.087
> 
> 标签：c++, visual-c++, c++11, visual-studio-2012

是否可以编写以下代码？我想做的是 do_vector_action 可以自动推断出函数的正确返回类型（我实际上拥有的代码在 cpp 文件中定义了函数，而不是在此处的标头中）。

```
class some_class
{
    public:
        std::vector<int> int_vector;
        auto do_vector_action() -> decltype(int_vector_.size())
        {
            decltype(int_vector.size()) something + 1;
            return something;
        }
} 
```

此外，我还想知道，是否可以替换 typedef，例如

```
class some_class
{
    public:
        typedef std::vector<int> int_vector_type;
        int_vector_type int_vector;
        int_vector_type::size_type size;
} 
```

使用 decltype 或其他一些构造，例如

```
 class some_class
  {
       public:
           std::vector<int> int_vector;
           decltype(int_vector)::size_type size;
  } 
```

因为最后一个带有 decltype 的代码段不能用 Visual Studio 2012 RC 编译。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-03T21:57:41.453

```
decltype(int_vector.size()) something + 1; 
```

这相当于：

```
std::vector<int>::size_type something + 1; 
```

这是格式错误的（您正在声明一个名为`something`then 的变量......向它添加一个？

你的第二个例子，使用`decltype(int_vector)::size_type`是有效的。由于编译器错误^((*)) ，Visual C++ 2010 和 2012 拒绝它。作为一种解决方法，您应该能够声明`size`为：

```
identity<decltype(int_vector)>::type::size_type size; 
```

假设存在`identity`声明为的标准模板：

```
template <typename T>
struct identity { typedef T type; }; 
```

* * *

(*)`decltype`在 C++11 标准化过程即将结束时添加了在嵌套名称说明符中使用的功能（请参阅[N3031](http://www.open-std.org/JTC1/SC22/WG21/docs/papers/2010/n3031.pdf) [PDF]）。这是在 Visual C++ 2010 完成之后，并且在 Visual C++ 2012 中没有添加对此添加的支持。

# ember.js - Ember 路由器构建 - App.Router.create undefined (with ember-rails)

> ID：11803721
> 
> 赞同：0
> 
> 时间：2012-08-03T21:45:34.817
> 
> 标签：ember.js

我试图让 Ember 在现有的 Rails 应用程序中工作，所以安装`ember-rails`gem。它给了我一个`app.js`基于[这个生成器模板](https://github.com/emberjs/ember-rails/blob/master/lib/generators/templates/app.js)，其中包含

```
var router = App.router = App.Router.create({
  enableLogging: true,
  location: 'hash'
});

App.initialize(router); 
```

我也想用`ember-data`，看到一些帖子说 edge 是唯一的方法。因此，两者都更新`ember-data`为`ember.js`边缘。

所以当我运行这个时，我就`Uncaught TypeError: Cannot call method 'create' of undefined`上`App.Router.create`线了。

我猜 API 已经改变并且已经过时了，但是找不到创建这个路由器对象的当前规范方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T21:55:40.717

这里的例子是规范的 AFAIK：[http ://emberjs.com/guides/outlets/](http://emberjs.com/guides/outlets/)

...除了`Ember.State`应该是`Ember.Route`现在。但这就是你想要做的：

```
App.Router = Ember.Router.extend({
  enableLogging: true,
  location: 'hash'
});

App.initialize(); 
```

# c# - 正则表达式匹配包含括号的字符串

> ID：11803722
> 
> 赞同：0
> 
> 时间：2012-08-03T21:45:36.860
> 
> 标签：c#, regex

我正在读取文件并通过检查每一行来验证文件的内容。字符串行如下所示：

`CMD: [THIS_IS_THE_CMD]`
`DELAY: [5]`
`FLAGS: [ANY]`

我需要检查的是该行是否遵循该确切形式，括号之间的内容是文本（我尝试过 [A-Z_] 但它不起作用）或取决于该行的数字。
到目前为止我所拥有的：

```
string line = "CMD: [THIS_IS_THE_CMD]";
if(!VerifyLine(@"^CMD: \[", line))
{
     // No match, set error    
}  

private static bool VerifyLine(string regExp, string line)
{
    Regex reg = new Regex(regExp);
    return reg.IsMatch(line);
} 
```

但这不会检查括号之间的内容，也不会检查右括号。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T21:49:02.667

这应该为你做：

```
([A-Z_]*):\s*\[(\w*)\] 
```

第一组匹配冒号前的部分，第二组匹配 []s 内的部分。

第一部分可以是任何大写字母或下划线，第二部分可以是任何大小写的任何字母数字字符或下划线。

此外，您可能会使用以下附加功能，这需要使 ^$ 匹配 EOL 而不仅仅是 BOF 和 EOF 的选项：

```
^([A-Z_]*):\s*\[(\w*)\]$       // will only match whole lines
^\s*([A-Z_]*):\s*\[(\w*)\]\s*$ // same as above but ignores extra whitespace 
                               // on the beginning and end of lines 
```

根据您的文件格式，您可能会使用不同的方法来捕获组：

```
[A-Z]       // matches any capital letter
[A-Za-z]    // matches any letter
[A-Za-z0-9] // matches any alphanumeric character
\w          // matches any "word character", which is any alnum character or _ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T21:55:20.340

试试这个: `^\w+:\s*\[(\w+)\]`，`\w`将匹配字母、数字和下划线
，另一个模式将只匹配大写：`^[A-Z\d_]+:\s*\[([A-Z\d_]+)\]`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-04T08:20:32.647

你试过`^CMD: \[`了，但你`Regex`包含**Space**。请注意，在正则表达式中，您必须使用`\s`匹配空格。尝试您的正则表达式，但使用`\s`：

```
if(!VerifyLine(@"^CMD:\s*\[", line))
    ... 
```

解释：

```
\s    Matches any white-space character.
*     Matches the previous element zero or more times. 
```

# wordpress - 在 wordpress 中刷新重写规则

> ID：11803723
> 
> 赞同：0
> 
> 时间：2012-08-03T21:45:50.237
> 
> 标签：wordpress, rewrite

我正在尝试使用它们的重写功能以编程方式在 wordpress 中添加重写规则。通常，它看起来像与插件初始化或激活函数一起使用，以便重写规则刷新只被调用一次。

我不会与新插件安装一起执行此操作，那么我应该将这些函数和调用放在哪里以便我可以调用它们一次？

我将添加一个重写规则，如下所述：http: [//codex.wordpress.org/Custom_Queries#Permalinks_for_Custom_Archives](http://codex.wordpress.org/Custom_Queries#Permalinks_for_Custom_Archives)

只是不知道把这段代码放在哪里。

任何帮助都会很棒。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T16:57:58.450

如果您正在编写自定义主题，您可以将所有代码放入`functions.php`. 然而，是什么阻止您创建供自己使用的插件？

# javascript - 在没有 $routeProvider 和 $location 的情况下使用 angularjs？

> ID：11803726
> 
> 赞同：2
> 
> 时间：2012-08-03T21:46:13.117
> 
> 标签：javascript, google-chrome-extension, angularjs

我已经玩了 angularjs 几天了，到目前为止很喜欢。我正在尝试构建一个 chrome 扩展，当用户在 gmail.com 上时，它会在每条 gmail 消息下方附加一个小部件。到目前为止，一切都很好。作为身份验证代码的一部分，我以这种方式处理 401 错误。每当出现 401 错误时，我都会使用 $location.path("/login") 将用户重定向到登录屏幕/模板。这会更改浏览器地址栏，这似乎是默认行为。因此，如果当前地址是[https://mail.google.com/mail/u/0/](https://mail.google.com/mail/u/0/)，则它变为[https://mail.google.com/mail/u/0/#/login](https://mail.google.com/mail/u/0/#/login). 但我的不是独立应用程序，它更像是在 gmail.com 网站上附加到 div 的小部件。我的应用程序不应该与浏览器地址栏混淆。我现在开始考虑是否真的可以在我的应用程序中使用 angularjs，因为我违背了默认行为。我应该使用 angularjs 吗？

我也在这里发布了它 [https://groups.google.com/forum/?fromgroups#!topic/angular/TrT54r_IYmg](https://groups.google.com/forum/?fromgroups#!topic/angular/TrT54r_IYmg)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T02:27:37.570

您可以在 rootScope 上发出/广播事件并在您的登录指令中订阅它们。

这是一点线索[http://www.espeo.pl/2012/02/26/authentication-in-angularjs-application](http://www.espeo.pl/2012/02/26/authentication-in-angularjs-application)

它使用拦截器来捕获 401

```
myapp.config(function($httpProvider) {
  var interceptor = ['$rootScope','$q', function(scope, $q) {

    function success(response) {
      return response;
    }

    function error(response) {
      var status = response.status;

      if (status == 401) {
        var deferred = $q.defer();
        var req = {
          config: response.config,
          deferred: deferred
        }
        scope.requests401.push(req);
        scope.$broadcast('event:loginRequired');
        return deferred.promise;
      }
      // otherwise
      return $q.reject(response);

    }

    return function(promise) {
      return promise.then(success, error);
    }

  }];
  $httpProvider.responseInterceptors.push(interceptor);
}); 
```

最简单的指令可能是这个

```
myapp.directive("loginForm",function($http){
  return function(scope,element,attrs){
    element.hide();

    scope.$root.$on('event:loginRequired', function(event) {
      element.show();
    });

    scope.login=function(){
      // You can set controller for this directive, but I skiped that part for sake of simplicity
      var payload = $.param({username: scope.username, password: scope.password});
      var config = {
        headers: {'Content-Type':'application/x-www-form-urlencoded; charset=UTF-8'}
      }
      $http.post('/some/login/url', payload, config).success(function(data) {
        if (data === 'AUTHENTICATION_SUCCESS') {
          element.hide();
        }else{
          alert("username or password was wrong, please try again");
          elements.find("form").reset(); // reset form, or you coud reset just password field
        }
      });
    };

  };
}); 
```

现在，指令在行动

```
<div login-form>
   <form ng-submit="login()">
      <label for="username">Username</label>
      <input type="text" id="username" ng-model="username"/>
      <br />
      <label for="password">Password</label>
      <input type="password" id="password" ng-model="password" />
      <hr/>
      <input type="submit" value="Login" />
   </form>
</div> 
```

请**注意**上面的代码未经测试，可能有一些拼写错误或什么的。但是，如果您在执行此操作时遇到困难，请告诉我，我会尝试花费一些时间和精力使其工作。

# session - 如何在有或没有 authcache 的情况下将经过身份验证的用户缓存在 drupal 上

> ID：11803727
> 
> 赞同：0
> 
> 时间：2012-08-03T21:46:14.443
> 
> 标签：session, drupal, caching, memcached, apc

可以使用一些帮助。我有一个 drupal6 安装，我在为经过身份验证的用户缓存方面遇到了麻烦。Boost 很好地处理了未经身份验证的缓存。使用我当前的设置，根本无法创建会话，尝试登录时结果是“您无权查看此页面”。Memcache 和 apc 安装在服务器上，并根据 phpinfo 工作。这是我当前的设置（没有缓存路由器）：

```
include_once('./sites/all/modules/memcache/memcache.inc');
$conf['cache_default_class'] = 'MemCacheDrupal';
$conf['session_inc'] =  './sites/all/modules/memcache/memcache-session.inc';
$conf['memcache_servers'] = array(
'127.0.0.1:11211' => 'default',
'127.0.0.1:11212' => 'block',
'127.0.0.1:11213' => 'content',
'127.0.0.1:11214' => 'filter',
'127.0.0.1:11215' => 'form',
'127.0.0.1:11216' => 'menu',
'127.0.0.1:11217' => 'page',
'127.0.0.1:11218' => 'update',
'127.0.0.1:11219' => 'views',
'127.0.0.1:11221' => 'session',
'127.0.0.1:11222' => 'users'
);

$conf['memcache_bins'] = array(
'cache' => 'default',
'cache_block' => 'block',
'cache_content' => 'content',
'cache_filter' => 'filter',
'cache_form' => 'form',
'cache_menu' => 'menu',
'cache_page' => 'page',
'cache_update' => 'update',
'cache_views' => 'views',
'session' => 'session',
'users' => 'users'
); 
```

在此设置之前，我使用带有 authcache 的 cacherouter 并以 apc 作为引擎。用户可以登录，但对经过身份验证的用户没有实际的缓存。我一直在阅读我能找到的所有内容以使其继续进行，进行各种测试和更改配置，但没有成功。这是以前的设置：

```
$conf['cacherouter'] = array(
'default' => array(
'engine' => 'apc',
'server' => array('127.0.0.1:11211'),
'shared' => TRUE,
'prefix' => '',
'path' => 'storage_bin/filecache',
'static' => FALSE
),
);

$conf['cache_inc'] = './sites/all/modules/authcache/authcache.inc';

$conf['memcache_servers'] = array(
'127.0.0.1:11211' => 'default',
'127.0.0.1:11212' => 'block',
'127.0.0.1:11213' => 'content',
'127.0.0.1:11214' => 'filter',
'127.0.0.1:11215' => 'form',
'127.0.0.1:11216' => 'menu',
'127.0.0.1:11217' => 'page',
'127.0.0.1:11218' => 'update',
'127.0.0.1:11219' => 'views'
);

$conf['memcache_bins'] = array(
'cache' => 'default',
'cache_block' => 'block',
'cache_content' => 'content',
'cache_filter' => 'filter',
'cache_form' => 'form',
'cache_menu' => 'menu',
'cache_page' => 'page',
'cache_update' => 'update',
'cache_views' => 'views'
); 
```

该网站在 www.thewildside.com 上可见。对此的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T17:20:53.260

如果其他人遇到这种情况，我的解决方案是放弃 cacherouter（没有按预期执行）、authcache（太 beta）和 boost（只是为了避免在缓存页面上完全访问 apache）……继续使用 Memcache API（drupal 模块)、memcache（缓存系统）、apc 和 varnish (3.0)。Memcache API 允许我通过 memcache 缓存到 RAM 和作为备份的 drupal db，以防 memcache 不可用（通过 memcache.db.inc）。基准测试以确定每个缓存组件使用多少 RAM。我也可以将会话信息保存在 memcache 中，但我没有注意到这样做有很大的性能提升，因此您可以选择不包含 memcache-session.inc。为每个 drupal 缓存数据库创建 memcache 实例（或使用一个默认实例）。为您创建的每个实例设置一个缓存箱，并输入反向代理设置和默认 ttl。

```
$conf = array(
'cache_inc'        => './sites/all/modules/memcache/memcache.db.inc',
'memcache_key_prefix' => 'ws',
'session_inc'      => './sites/all/modules/memcache/memcache-session.inc',
'memcache_servers' => array(
'unix:///var/run/memcached/memcached_wildside.sock' => 'default',
'unix:///var/run/memcached/memcached_wildside_apachesolr.sock' => 'apachesolr',
'unix:///var/run/memcached/memcached_wildside_block.sock' => 'block',
'unix:///var/run/memcached/memcached_wildside_content.sock' => 'content',
'unix:///var/run/memcached/memcached_wildside_filter.sock' => 'filter',
'unix:///var/run/memcached/memcached_wildside_form.sock' => 'form',
'unix:///var/run/memcached/memcached_wildside_media_youtube_status.sock' => 'media_youtube_status',
'unix:///var/run/memcached/memcached_wildside_menu.sock' => 'menu',
'unix:///var/run/memcached/memcached_wildside_objects.sock' => 'objects',
'unix:///var/run/memcached/memcached_wildside_page.sock' => 'page',
'unix:///var/run/memcached/memcached_wildside_path.sock' => 'path',
'unix:///var/run/memcached/memcached_wildside_rules.sock' => 'rules',
'unix:///var/run/memcached/memcached_wildside_update.sock' => 'update',
'unix:///var/run/memcached/memcached_wildside_views.sock' => 'views',
'unix:///var/run/memcached/memcached_wildside_views_data.sock' => 'views_data',
'unix:///var/run/memcached/memcached_wildside_session.sock' => 'session',
'unix:///var/run/memcached/memcached_wildside_users.sock' => 'users'),
'memcache_bins' => array(
'cache' => 'default',
'cache_apachesolr' => 'apachesolr',
'cache_block' => 'block',
'cache_content' => 'content',
'cache_filter' => 'filter',
'cache_form' => 'form',
'cache_media_youtube_status' => 'media_youtube_status',
'cache_menu' => 'menu',
'cache_objects' => 'objects',
'cache_page' => 'page',
'cache_path' => 'path',
'cache_rules' => 'rules',
'cache_update' => 'update',
'cache_views' => 'views',
'cache_views_data' => 'views_data',
'session' => 'session',
'users' => 'users'),
);

$conf['https'] = TRUE;
$conf['mimedetect_magic'] = '/usr/share/file/magic';
$conf['reverse_proxy'] = TRUE;
$conf['reverse_proxy_addresses'] = array('127.0.0.1');

if (isset($_SERVER['HTTP_X_FORWARDED_PROTO'])){
    if ($_SERVER['HTTP_X_FORWARDED_PROTO'] == 'https') {
        $_SERVER['HTTPS']='on';
    }else{
        $_SERVER['HTTPS']='';
    }
}

/* 1 day cache lifetime = 86400 */
$conf['cache_lifetime'] = 86400;
$conf['page_cache_maximum_age'] = 86400; 
```

设置 Varnish 的配置文件 (.vcl) 时，请确保您使用的语法与您安装的 varnish 版本相对应。

# visibility - 如何正确恢复状态栏？

> ID：11803732
> 
> 赞同：0
> 
> 时间：2012-08-03T21:46:25.643
> 
> 标签：visibility, statusbar, uiapplication

我正在制作一个需要将状态栏隐藏在一个屏幕上的应用程序，但是我希望它在用户返回上一个屏幕时重新打开。我正在使用`[[UIApplication sharedApplication] setStatusBarHidden:NO];`，它可以工作，但是当我打开它时，它会与导航栏重叠并将应用程序减慢到崩溃的程度。还有什么我可以使用的，还是我没有正确使用代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-07T10:33:11.373

在从 DetailView 移动到 FlipView 时，我遇到了类似的问题 - 我希望隐藏状态栏以在黑色背景下显示照片 - 然后返回 DetailView。关键似乎是让代码在 FlipView 的 viewWillDisappearAnimated 方法中恢复隐藏，而不是在其 ViewDidUnload 方法或 DetailView 控制器中的方法中。我想这会在您返回之前的视图*之前重置所有内容。*所以我在 FlipViewController 中的代码是：

```
- (void)viewDidLoad 
{
   [[UIApplication sharedApplication] setStatusBarHidden:YES];
   // other application-specific code
} 
```

和

```
- (void)viewWillDisappear:(BOOL)animated
{   
    [[UIApplication sharedApplication] setStatusBarHidden:NO];
} 
```

希望这可以帮助。

# mysql - MySQL 在值更改时增加用户变量

> ID：11803736
> 
> 赞同：3
> 
> 时间：2012-08-03T21:46:43.023
> 
> 标签：mysql, statistics, increment, intervals, user-variables

我有一个表，由一组组组成，例如每组五行。每个组中的每一行都具有`date`该组唯一的值。

我想在查询中做的是遍历表，并在该`date`值更改时增加用户变量（@count）。也就是说，@count 应该等于组数，而不是行数。

如果您想知道，我当前的查询如下所示：

```
SELECT @row := @row +1 AS rownum, date
FROM ( SELECT @row := 0 ) r, stats 
```

非常感谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-03T21:54:35.303

这样的事情呢？

```
SELECT 
    (CASE WHEN @date <> date THEN @row := @row +1 ELSE @row END) AS rownum, 
    @date:= date, 
    date
FROM ( SELECT @row := 0, @date := NOW() ) r, stats 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T22:03:08.000

您不需要用户变量来回答您正在执行的查询。您是否有理由要使用用户变量（例如，模拟排名函数？）

如果不：

```
-- how many groups are there?
select count(distinct date) distinct_groups from table;

-- each group and count of rows in the group
select date, count(*) from table group by date;

-- if you want the Nth row from each group, assuming you have an auto_increment called id:
select *
  from table
  join ( select date, max(id) id
           from table
          group by date
  ) sq
  on table.id = sq.id 
```

# php - 使用 pgrep 的 PHP exec 命令返回值不正确

> ID：11803738
> 
> 赞同：3
> 
> 时间：2012-08-03T21:46:54.263
> 
> 标签：php, exec, grep

我有一个 php 脚本，我正在运行以下命令：

```
exec("pgrep -fl ./build-dh", $output, $return); 
```

如果 pgrep 没有找到正在运行的“./build-dh”进程，它通常会返回“1”，但是，即使我确定进程没有运行，它也总是返回“0”。

这是我从 $output 得到的：

```
Array ( [0] => 28560 sh -c pgrep -fl ./build-dh ) 
```

这意味着它正在输出自己的 pid，我猜无论如何都会强制返回“0”代码。当我在 shell 中运行以下命令时，它工作正常：

```
$pgrep -fl ./build-dh
$echo $?
1 
```

所以返回值工作正常......当我运行它时：

```
 $pgrep -f nginx
11192
11193
11194
11195
11196
$echo $?
0 
```

我怎样才能让它在 PHP 中正常工作？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T22:35:08.897

`$output`幸运的是，修复并`$result`从 exec 到更类似于您在 CLI 中获得的内容并不需要太多：

```
foreach($output as $oi=>$o) if(strpos($o,'pgrep')!==false) unset($output[$oi]);
$return = !count($output); 
```

# java - 用 Java 打印到标签打印机

> ID：11803741
> 
> 赞同：13
> 
> 时间：2012-08-03T21:47:11.430
> 
> 标签：java, printing, label

我无法打印到标签打印机。下面的代码在一个上打印 4 个“标签”（附加标签的图片）。

下面的代码打印到兄弟 QL-500 标签打印机。它打印在 3.5" x 1.1" 标签上。

如果有人可以帮助我更好地理解代码，那也很棒。

```
import java.awt.Font;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.print.PageFormat;
import java.awt.print.Paper;
import java.awt.print.Printable;
import java.awt.print.PrinterException;
import java.awt.print.PrinterJob;
import java.text.DateFormat;
import java.util.Date;
import java.util.Locale;
import javax.print.PrintService;

public class DYMOLabelPrintConnector implements Printable {

public static final String PRINTERNAME = "DYMO LabelWriter 400";

public static final boolean PRINTMENU = false;

public static void main(String[] args) {
PrinterJob printerJob = PrinterJob.getPrinterJob();
PageFormat pageFormat = printerJob.defaultPage();
Paper paper = new Paper();

final double widthPaper = (1.2 * 72);
final double heightPaper = (1.5 * 72);

paper.setSize(widthPaper, heightPaper);
paper.setImageableArea(0, 0, widthPaper, heightPaper);

pageFormat.setPaper(paper);

pageFormat.setOrientation(PageFormat.LANDSCAPE);

if (PRINTMENU) {
  if (printerJob.printDialog()) {
    printerJob.setPrintable(new DYMOLabelPrintConnector(), pageFormat); 

    try {
      printerJob.print();
    } catch (PrinterException e) {
      e.printStackTrace();
    }
  }
} else {
  PrintService[] printService = PrinterJob.lookupPrintServices();

  for (int i = 0; i < printService.length; i++) {
    System.out.println(printService[i].getName());

    if (printService[i].getName().compareTo(PRINTERNAME) == 0) {
      try {
        printerJob.setPrintService(printService[i]);
        printerJob.setPrintable(new DYMOLabelPrintConnector(), pageFormat); 
        printerJob.print();
      } catch (PrinterException e) {
        e.printStackTrace();
      }
    }
  }
}

System.exit(0);
 }

  public String getValue(final int elementOnLabel, final int labelCounter) {
  String value = "";

switch (elementOnLabel) {
case 0:
  // what ever you want to have in this line
  value = "SetupX";

  break;

case 1:
    // what ever you want to have in this line
  value = "fiehnlab.ucd";

  break;

case 2:
    // what ever you want to have in this line
  value = "id: " + labelCounter;

  break;

case 3:
    // what ever you want to have in this line
  // TODO - add DB connection
  value = "label:" + elementOnLabel;

  break;

case 4:
    // what ever you want to have in this line
  value = DateFormat.getDateInstance(DateFormat.SHORT, Locale.US).format(new Date());

  break;

default:
  break;
}

return value;
}

public int print(Graphics graphics, PageFormat pageFormat, int pageIndex)
throws PrinterException {
System.out.println("printing page: " + pageIndex);

   if (pageIndex < getPageNumbers()) {
    Graphics2D g = (Graphics2D) graphics;

  // g.translate(pageFormat.getImageableX(), pageFormat.getImageableY());
  g.translate(20, 10);

  String value = "";
  pageIndex = pageIndex + 1;

  // specific for four circular labels per page
  for (int x = 0; x < 80; x = x + 50) {
    for (int y = 0; y < 80; y = y + 36) {
      int posOnPage = 4; // BottomRight, TopRight, BottomLeft, TopLeft 

      if (x > 0) {
        posOnPage = posOnPage - 2;
      }

      if (y > 0) {
        posOnPage = posOnPage - 1;
      }

      // current counter for the label.
      int id = (posOnPage - 1) + ((pageIndex - 1) * 4);

      // setupx
      g.setFont(new Font(g.getFont().getFontName(), g.getFont().getStyle(), 3));
      value = this.getValue(0, id);
      g.drawString("      " + value, x, y);

      // fiehnlab
      g.setFont(new Font(g.getFont().getFontName(), g.getFont().getStyle(), 3));
      value = this.getValue(1, id);
      g.drawString("    " + value, x, y + 4);

      // ID
      g.setFont(new Font(g.getFont().getFontName(), Font.BOLD, 7));
      value = this.getValue(2, id);
      g.drawString("" + value, x, y + 10);

      // label
      g.setFont(new Font(g.getFont().getFontName(), g.getFont().getStyle(), 5));
      value = this.getValue(3, id);
      g.drawString(" " + value, x, y + 16);

      // date
      g.setFont(new Font(g.getFont().getFontName(), Font.PLAIN, 3));
      value = this.getValue(4, id);
      g.drawString("      " + value, x, y + 20);
    }
  }

  return PAGE_EXISTS;
} else {
  return NO_SUCH_PAGE;
}
}

public int getPageNumbers() {
return 5;
 }
 }

enter code here 
```

这是它打印的内容：

![](../Images/80cfbd041edd118379e409b20770c8dc.png)

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-08-04T01:38:29.687

哇，我无法告诉你我有多喜欢用 Java 打印，当它工作时，它很棒......

.

```
public class PrinterTest {

    public static void main(String[] args) {

        PrinterJob pj = PrinterJob.getPrinterJob();
        if (pj.printDialog()) {
            PageFormat pf = pj.defaultPage();
            Paper paper = pf.getPaper();    
            double width = fromCMToPPI(3.5);
            double height = fromCMToPPI(8.8);    
            paper.setSize(width, height);
            paper.setImageableArea(
                            fromCMToPPI(0.25), 
                            fromCMToPPI(0.5), 
                            width - fromCMToPPI(0.35), 
                            height - fromCMToPPI(1));                
            System.out.println("Before- " + dump(paper));    
            pf.setOrientation(PageFormat.PORTRAIT);
            pf.setPaper(paper);    
            System.out.println("After- " + dump(paper));
            System.out.println("After- " + dump(pf));                
            dump(pf);    
            PageFormat validatePage = pj.validatePage(pf);
            System.out.println("Valid- " + dump(validatePage));                
            //Book book = new Book();
            //book.append(new MyPrintable(), pf);
            //pj.setPageable(book);    
            pj.setPrintable(new MyPrintable(), pf);
            try {
                pj.print();
            } catch (PrinterException ex) {
                ex.printStackTrace();
            }    
        }    
    }

    protected static double fromCMToPPI(double cm) {            
        return toPPI(cm * 0.393700787);            
    }

    protected static double toPPI(double inch) {            
        return inch * 72d;            
    }

    protected static String dump(Paper paper) {            
        StringBuilder sb = new StringBuilder(64);
        sb.append(paper.getWidth()).append("x").append(paper.getHeight())
           .append("/").append(paper.getImageableX()).append("x").
           append(paper.getImageableY()).append(" - ").append(paper
       .getImageableWidth()).append("x").append(paper.getImageableHeight());            
        return sb.toString();            
    }

    protected static String dump(PageFormat pf) {    
        Paper paper = pf.getPaper();            
        return dump(paper);    
    }

    public static class MyPrintable implements Printable {

        @Override
        public int print(Graphics graphics, PageFormat pageFormat, 
            int pageIndex) throws PrinterException {    
            System.out.println(pageIndex);                
            int result = NO_SUCH_PAGE;    
            if (pageIndex < 2) {                    
                Graphics2D g2d = (Graphics2D) graphics;                    
                System.out.println("[Print] " + dump(pageFormat));                    
                double width = pageFormat.getImageableWidth();
                double height = pageFormat.getImageableHeight();    
                g2d.translate((int) pageFormat.getImageableX(), 
                    (int) pageFormat.getImageableY());                    
                g2d.draw(new Rectangle2D.Double(1, 1, width - 1, height - 1));                    
                FontMetrics fm = g2d.getFontMetrics();
                g2d.drawString("0x0", 0, fm.getAscent());    
                result = PAGE_EXISTS;    
            }    
            return result;    
        }
    }
} 
```

如果您尝试指定纸张尺寸和边距，我知道 PrintDialog 会出现许多奇怪而奇妙的事情，但老实说，这是另一天的问题。

我发布的代码能够在我的 Dymo LabelWriter 400 Turbo 上一个接一个地打印两个标签而不会出现问题

**更新** 的还应该提到，我认为你基本上是失踪的`PageFormat.setPaper`

**使用 Barbaque 条码更新**

从文件示例打印...

```
Barcode b = BarcodeFactory.createCode128("Hello");
b.setResolution(72);

File f = new File("mybarcode.png");
// Let the barcode image handler do the hard work
BarcodeImageHandler.savePNG(b, f);

.
.
.

public static class PrintFromFile implements Printable {

    @Override
    public int print(Graphics graphics, PageFormat pageFormat, int pageIndex) throws PrinterException {

        int result = NO_SUCH_PAGE;
        if (pageIndex == 0) {

            graphics.translate((int)pageFormat.getImageableX(), (int)pageFormat.getImageableY());

            result = PAGE_EXISTS;

            try {

                // You may want to rescale the image to better fit the label??
                BufferedImage read = ImageIO.read(new File("mybarcode.png"));
                graphics.drawImage(read, 0, 0, null);

            } catch (IOException ex) {

                ex.printStackTrace();

            }

        }

        return result;

    }

} 
```

直接打印到图形上下文

```
Barcode b = BarcodeFactory.createCode128("Hello");
b.setResolution(72);

.
.
.

public static class PrintToGraphics implements Printable {

    private Barcode b;

    private PrintToGraphics(Barcode b) {

        this.b = b;

    }

    @Override
    public int print(Graphics graphics, PageFormat pageFormat, int pageIndex) throws PrinterException {

        int result = NO_SUCH_PAGE;
        if (pageIndex == 0) {

            result = PAGE_EXISTS;

            int x = (int)pageFormat.getImageableX();
            int y = (int)pageFormat.getImageableY();

            int width = (int)pageFormat.getImageableWidth();
            int height = (int)pageFormat.getImageableHeight();

            graphics.translate(x, y);
            try {
                b.draw((Graphics2D)graphics, 0, 0);
            } catch (OutputException ex) {

                ex.printStackTrace();

            }

        }

        return result;

    }

} 
```

最后但同样重要的是，直接从下载的“示例”目录

```
public class PrintingExample
{

    public static void main(String[] args)
    {
        try
        {
            Barcode b = BarcodeFactory.createCode128("Hello");
            PrinterJob job = PrinterJob.getPrinterJob();
            job.setPrintable(b);
            if (job.printDialog())
            {
                job.print();
            }
        }
        catch (Exception e)
        {
            e.printStackTrace();
        }

    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-02-10T23:30:32.837

我有一个类似的代码，但不能让东芝便携式打印机在 TPCL 模式下打印，我的代码工作正常，但只有当打印机处于 ESC/POS 模式时。我的打印机是东芝 B-EP4-DL

这是我的主要活动：

```
 package com.example.warehousev3;

 import android.app.Activity;
 import android.content.Intent;
 import android.database.Cursor;
 import android.os.Bundle;
 import android.text.Editable;
 import android.text.TextWatcher;
 import android.view.View;
 import android.widget.Button;
 import android.widget.EditText;
 import android.widget.Toast;

 import androidx.annotation.Nullable;
 import androidx.appcompat.app.AlertDialog;
 import androidx.appcompat.app.AppCompatActivity;

 import com.mazenrashed.printooth.Printooth;
 import com.mazenrashed.printooth.data.printable.Printable;
 import com.mazenrashed.printooth.data.printable.RawPrintable;
 import com.mazenrashed.printooth.data.printable.TextPrintable;
 import com.mazenrashed.printooth.data.printer.DefaultPrinter;
 import com.mazenrashed.printooth.ui.ScanningActivity;
 import com.mazenrashed.printooth.utilities.Printing;
 import com.mazenrashed.printooth.utilities.PrintingCallback;

 import java.text.SimpleDateFormat;
 import java.util.ArrayList;
 import java.util.Calendar;

 public class MainActivity extends AppCompatActivity implements PrintingCallback {
 DatabaseHelper myDb;
 Button btnPrint, btn_unpair_pair;
 EditText barcodefield = null;

 Printing printing;

 private Calendar calendar;
 private SimpleDateFormat dateFormat;
 private String date;

 private final static char ESC_CHAR = 0x1B; // to be used on esc/pos commands

 @Override
 protected void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.activity_main);

calendar = Calendar.getInstance();
dateFormat = new SimpleDateFormat("dd/MM/yyyy");
date = dateFormat.format(calendar.getTime());

myDb = new DatabaseHelper(this);
btnPrint = findViewById(R.id.cmd_print);
barcodefield = findViewById(R.id.txt_barcode);
btn_unpair_pair = findViewById(R.id.btnPiarUnpair);

btnPrint.setVisibility(View.GONE); //Set Print Button Invisible

viewAll();
}

public void viewAll() {
if (printing != null)
    printing.setPrintingCallback(this);

btn_unpair_pair.setOnClickListener(view -> {
    if (Printooth.INSTANCE.hasPairedPrinter())
        Printooth.INSTANCE.removeCurrentPrinter();
    else {
        startActivityForResult(new Intent(MainActivity.this, ScanningActivity.class), ScanningActivity.SCANNING_FOR_PRINTER);
        changePairAndUpair();
    }
});

/*      //Print Button function
btnPrint.setOnClickListener(view -> {
    if (!Printooth.INSTANCE.hasPairedPrinter())
        startActivityForResult(new Intent(MainActivity.this, 
ScanningActivity.class), ScanningActivity.SCANNING_FOR_PRINTER);
    else
        printText();
        barcodefield.setText("");
});
*/

barcodefield.addTextChangedListener(new TextWatcher() {
    @Override
    public void beforeTextChanged(CharSequence s, int start, int count, int after) {
    }
    @Override
    public void onTextChanged(CharSequence s, int start, int before, int count) {
    }
    @Override
    public void afterTextChanged(Editable s) {
        for (int i = 0; i < s.length(); i++) {
            if(barcodefield.getText().toString().length() == 13) {
                if (!Printooth.INSTANCE.hasPairedPrinter())
                    startActivityForResult(new Intent(MainActivity.this, ScanningActivity.class), ScanningActivity.SCANNING_FOR_PRINTER);
                else
                    printText();
                    barcodefield.setText("");
            }
        }
    }
});
changePairAndUpair();
 }

 private void changePairAndUpair() {
 if (Printooth.INSTANCE.hasPairedPrinter())
    btn_unpair_pair.setText(new StringBuilder("Unpair           
 ").append(Printooth.INSTANCE.getPairedPrinter().getName()).toString());
 else
     btn_unpair_pair.setText("Pair with Printer");
 }

 @Override
 public void connectingWithPrinter() {
 Toast.makeText(this, "Connectiong to printer", Toast.LENGTH_SHORT).show();
 }

 @Override
 public void connectionFailed(String s) {
 Toast.makeText(this, "Failed: "+s, Toast.LENGTH_SHORT).show();
 }

 @Override
 public void onError(String s) {
 Toast.makeText(this, "Error: "+s, Toast.LENGTH_SHORT).show();

 }

 @Override
 public void onMessage(String s) {
 Toast.makeText(this, s, Toast.LENGTH_SHORT).show();
 }

 @Override
 public void printingOrderSentSuccessfully() {
 Toast.makeText(this, "Order sent to printer", Toast.LENGTH_SHORT).show();
 }

 private void printText() {
 ArrayList<Printable> printables = new ArrayList<>();
 printables.add(new RawPrintable.Builder(new byte[]{27, 100, 4}).build());       

 //Original Code
 //printables.add(new RawPrintable.Builder(new byte[]{0x1B,'d', 5}).build()); //     
 FEED 5 LINES WORKING!!!!!!!!
 //printables.add(new RawPrintable.Builder(new byte[]{'L','H', 0x56}).build()); // 
 FEED 10 LINES WORKING!!!!!!!!
 //printables.add(new RawPrintable.Builder(new byte[]{}).build()); // lane for  
 test

myDb.setBarcodcheck(String.valueOf(barcodefield.getText()));
Cursor res = myDb.getAllData();
if (res.getCount() == 0) {
    showMessage("Error", "Nothing Found");
    return;
}
StringBuffer buffer = new StringBuffer();
while (res.moveToNext()) {
    buffer.append(res.getString(0)+"\n");
    buffer.append(res.getString(1)+"\n");
    buffer.append(res.getString(2)+"\n");
    buffer.append(date+"\n");
    buffer.append("\n");
}
printables.add(new TextPrintable.Builder()
        .setText(buffer.toString()) // Original code
        //.setText(String.valueOf(buffer))
        .setCharacterCode(DefaultPrinter.Companion.getCHARCODE_PC1252())
        .setLineSpacing(DefaultPrinter.Companion.getLINE_SPACING_60())
        .setEmphasizedMode(DefaultPrinter.Companion.getEMPHASIZED_MODE_BOLD())
        .setFontSize(DefaultPrinter.Companion.getFONT_SIZE_LARGE())
        //.setNewLinesAfter(1)
        .build());
//printables.add(new RawPrintable.Builder(new byte[]{0x1B,'d', 5}).build()); // FEED 5 LINES WORKING!!!!!!!!
//printables.add(new RawPrintable.Builder(new byte[]{}).build()); // Line for test
Printooth.INSTANCE.printer().print(printables); 
```

}

```
 public void showMessage(String title, String Message) {
 AlertDialog.Builder builder = new AlertDialog.Builder(this);
 builder.setCancelable(true);
 builder.setTitle(title);
 builder.setMessage(Message);
 builder.show();
 }

 @Override
 protected void onActivityResult(int requestCode, int resultCode, @Nullable Intent  
 data) {
 super.onActivityResult(requestCode, resultCode, data);
 if (requestCode == ScanningActivity.SCANNING_FOR_PRINTER && resultCode ==    
 Activity.RESULT_OK)
    initPrinting();
    changePairAndUpair();
 }

 private void initPrinting() {
 if (!Printooth.INSTANCE.hasPairedPrinter())
    printing = Printooth.INSTANCE.printer();
 if (printing != null)
    printing.setPrintingCallback(this);
 } 
```

}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-08-20T09:29:24.883

[![在此处输入图像描述](../Images/927f1a47e7d5b80dd4e1bd3fcb67c888.png)](https://i.stack.imgur.com/EF9NE.png)

```
 #After a long hour of analysis found 100% solution     

    import java.io.FileInputStream;
    import java.io.FileNotFoundException;
    import java.io.FileOutputStream;
    import java.io.IOException;
    import java.math.BigInteger;

    import org.apache.poi.openxml4j.exceptions.InvalidFormatException;
    import org.apache.poi.util.Units;
    import org.apache.poi.xwpf.usermodel.XWPFDocument;
    import org.apache.poi.xwpf.usermodel.XWPFParagraph;
    import org.apache.poi.xwpf.usermodel.XWPFRun;
    import org.openxmlformats.schemas.wordprocessingml.x2006.main.CTBody;
    import org.openxmlformats.schemas.wordprocessingml.x2006.main.CTDocument1;
    import org.openxmlformats.schemas.wordprocessingml.x2006.main.CTPageMar;
    import org.openxmlformats.schemas.wordprocessingml.x2006.main.CTPageSz;
    import org.openxmlformats.schemas.wordprocessingml.x2006.main.CTSectPr;
    import org.openxmlformats.schemas.wordprocessingml.x2006.main.STPageOrientation;

    public class CreateWord {
        public static void main(String[] args) throws FileNotFoundException, IOException {
            XWPFDocument doc = new XWPFDocument();

            CTDocument1 document = doc.getDocument();
            CTBody body = document.getBody();

            if (!body.isSetSectPr()) {
                body.addNewSectPr();
            }
            CTSectPr section = body.getSectPr();

            if (!section.isSetPgSz()) {
                section.addNewPgSz();
            }

            if (!section.isSetPgMar()) {
                CTPageMar margin = section.addNewPgMar();
                margin.setTop(BigInteger.valueOf(500));
                margin.setBottom(BigInteger.valueOf(100));
                margin.setLeft(BigInteger.valueOf(0));
                margin.setRight(BigInteger.valueOf(0));
            }
            CTPageSz pageSize = section.getPgSz();

            pageSize.setOrient(STPageOrientation.LANDSCAPE);
            pageSize.setW(BigInteger.valueOf(6000));
            pageSize.setH(BigInteger.valueOf(2000));

            XWPFParagraph title = doc.createParagraph();
            XWPFRun run = title.createRun();
            // run.setText("Fig.1 A Natural Scene");
            // run.setBold(true);
            // title.setAlignment(ParagraphAlignment.CENTER);

            String imgFile = "E:\\barcode.png";
            FileInputStream is = new FileInputStream(imgFile);
            // run.addBreak();
            try {
                run.addPicture(is, XWPFDocument.PICTURE_TYPE_JPEG, imgFile, Units.toEMU(300), Units.toEMU(70));
            } catch (InvalidFormatException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } // 200x200
                // pixels
            is.close();

            FileOutputStream fos = new FileOutputStream("E:\\test4.docx");
            doc.write(fos);
            fos.close();
        }
    }

  [1]: https://i.stack.imgur.com/VA0IL.png
  [2]: https://i.stack.imgur.com/9aSv4.png 
```

# windows - 在 Windows 上编译：为什么 cygwin 无法识别 gettext？

> ID：11803744
> 
> 赞同：1
> 
> 时间：2012-08-03T21:47:28.420
> 
> 标签：windows, cygwin, gettext, core-foundation, libc

我正在尝试使用 cygwin 在 Windows 上编译 enc2ly ( [http://enc2ly.sourceforge.net/en/](http://enc2ly.sourceforge.net/en/) )，但它会出错。当我输入`./configure`时，结果如下：

```
checking for a BSD-compatible install... /usr/bin/install -c  
checking whether build environment is sane... yes  
checking for a thread-safe mkdir -p... /usr/bin/mkdir -p  
checking for gawk... gawk  
checking whether make sets $(MAKE)... yes  
checking build system type... i686-pc-cygwin  
checking host system type... i686-pc-cygwin  
checking for gcc... gcc  
checking whether the C compiler works... yes  
checking for C compiler default output file name... a.exe  
checking for suffix of executables... .exe  
checking whether we are cross compiling... no  
checking for suffix of object files... o  
checking whether we are using the GNU C compiler... yes  
checking whether gcc accepts -g... yes  
checking for gcc option to accept ISO C89... none needed  
checking for style of include used by make... GNU  
checking dependency style of gcc... gcc3  
checking whether NLS is requested... yes  
checking for msgfmt... /usr/bin/msgfmt  
checking for gmsgfmt... /usr/bin/msgfmt  
checking for xgettext... /usr/bin/xgettext  
checking for msgmerge... /usr/bin/msgmerge  
checking for ld used by GCC... /usr/i686-pc-cygwin/bin/ld.exe  
checking if the linker (/usr/i686-pc-cygwin/bin/ld.exe) is GNU ld... yes  
checking for shared library run path origin... done  
checking how to run the C preprocessor... gcc -E  
checking for grep that handles long lines and -e... /usr/bin/grep  
checking for egrep... /usr/bin/grep -E  
checking for CFPreferencesCopyAppValue... no  
checking for CFLocaleCopyCurrent... no  
checking for GNU gettext in libc... no  
checking for iconv... yes  
checking for working iconv... yes  
checking how to link with libiconv... -liconv  
checking for GNU gettext in libintl... yes  
checking whether to use NLS... yes  
checking where the gettext function comes from... external libintl  
checking how to link with libintl... -lintl  
checking for ANSI C header files... yes  
checking for sys/types.h... yes  
checking for sys/stat.h... yes  
checking for stdlib.h... yes  
checking for string.h... yes  
checking for memory.h... yes  
checking for strings.h... yes  
checking for inttypes.h... yes  
checking for stdint.h... yes  
checking for unistd.h... yes  
checking for stdlib.h... (cached) yes  
checking for string.h... (cached) yes  
checking for error_at_line... yes  
checking for memset... yes  
checking for strstr... yes  
configure: creating ./config.status  
config.status: creating Makefile  
config.status: creating dok/Makefile  
config.status: creating iloj/Makefile  
config.status: creating kod/Makefile  
config.status: creating enc2ly.spec  
config.status: creating enc2ly.lsm  
config.status: creating po/Makefile.in  
config.status: creating config.h  
config.status: executing depfiles commands  
config.status: executing po-directories commands  
config.status: creating po/POTFILES  
config.status: creating po/Makefile 
```

当我输入`make`时，它失败了。我怀疑问题出在这里：

```
checking for CFPreferencesCopyAppValue... no  
checking for CFLocaleCopyCurrent... no  
checking for GNU gettext in libc... no 
```

那么，缺少哪些包呢？或者是另一回事？不管怎么说，还是要谢谢你。

- - - - - - - - - - - 编辑 - - - - - - - - - - - - -

我用过`./configure --disable-nls`，效果很好。所以问题真的是gettext。

```
checking for GNU gettext in libc... no 
```

我已经安装了 gettext 包。缺少什么？我必须解决这个问题，因为程序的主要语言是世界语！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T05:01:51.220

我花了一些时间（可能太多）玩这个，我已经设法让它建立起来。

在 Ubuntu 12.04 上，它可以毫无问题地构建开箱即~~用的文件，查找和使用 GNU gettext。~~ `.tar.gz`在 Cygwin 上，我遇到与您相同的错误。

一个区别是在 Cygwin 上，使用的程序`gettext`需要与`-lintl`;链接。在 Ubuntu 上，它没有（显然`gettext`在标准 C 库中）。

在弄乱了`configure`脚本之后，我想出了以下解决方法：

`$LIBS`首先，在调用`"-lintl"`之前设置环境变量`./configure`。

其次，似乎是 Ubuntu 库而不是 Cygwin 库提供了一个未记录的符号`_nl_domain_bindings`，并且生成的小测试程序`configure`依赖于该符号。所以我修改了脚本，在生成的 C 测试程序中`configure`注释掉了对的引用。`_nl_domain_bindings`

黑客攻击`configure`不是解决这个问题的正确方法*；*该`configure`脚本由其他工具生成（在发布源之前）。您需要熟悉 GNU autoconf 的人来提出更好的解决方案。并且`configure` *应该*能够自行检测对`-lintl`选项的需求。

这里有一些非常奇怪的东西：`-lintl`源代码树中唯一出现的是以下行`enc2ly-0.2/m4/gettext.m4`：

```
 LIBS=`echo " $LIBS " | sed -e 's/ -lintl / /' -e 's/^ //' -e 's/ $//'` 
```

它`$LIBS`通过*删除*任何出现的`-lintl`. 如果有一些评论可以解释这一点，那可能是世界语。（从没想过我会这么说，除非是开玩笑。）

所以我注释掉了那行，它起作用了，生成一个`enc2ly.exe`文件，如果我不带参数调用它，至少会打印一条使用消息：

```
$ /usr/local/apps/enc2ly-0.2/bin/enc2ly.exe 
Dosieroj sukcese procezitaj: 0 (domaĝe!)
$ 
```

是的，那是世界语；谷歌翻译将它翻译成，但并不完全成功，

```
Files successfully procezitaj: 0 (domaĝe!) 
```

我在本地 Git 存储库中保存了我的~~修改丑陋的 hack。~~这是输出`git diff`：

```
diff --git a/configure b/configure
index 1605a50..8d1a1b7 100755
--- a/configure
+++ b/configure
@@ -5162,12 +5162,12 @@ else
 #include <libintl.h>
 $gt_revision_test_code
 extern int _nl_msg_cat_cntr;
-extern int *_nl_domain_bindings;
+/* extern int *_nl_domain_bindings; */
 int
 main ()
 {
 bindtextdomain ("", "");
-return * gettext ("")$gt_expression_test_code + _nl_msg_cat_cntr + *_nl_domain_bindings
+return * gettext ("")$gt_expression_test_code + _nl_msg_cat_cntr /* + *_nl_domain_bindings */
   ;
   return 0;
 }
diff --git a/m4/gettext.m4 b/m4/gettext.m4
index f84e6a5..6c77c3a 100644
--- a/m4/gettext.m4
+++ b/m4/gettext.m4
@@ -247,7 +247,7 @@ return * gettext ("")$gt_expression_test_code + _nl_msg_cat_cntr + *_nl_expand_a
         USE_INCLUDED_LIBINTL=yes
         LIBINTL="ifelse([$3],[],\${top_builddir}/intl,[$3])/libintl.[]gt_libtool_suffix_prefix[]a $LIBICONV $LIBTHREAD"
         LTLIBINTL="ifelse([$3],[],\${top_builddir}/intl,[$3])/libintl.[]gt_libtool_suffix_prefix[]a $LTLIBICONV $LTLIBTHREAD"
-        LIBS=`echo " $LIBS " | sed -e 's/ -lintl / /' -e 's/^ //' -e 's/ $//'`
+#       LIBS=`echo " $LIBS " | sed -e 's/ -lintl / /' -e 's/^ //' -e 's/ $//'`
       fi

       CATOBJEXT= 
```

抓取`enc2ly-0.2.tar.gz`，解压，应用上述更改（手动操作很容易），将环境变量设置`$LIBS`为`-lintl`，正常构建和安装，您应该一切顺利。

你可能想就这个问题联系维护人员；我确信他们想要实施比这更清洁的解决方案。

# android - 结束电话时更改活动

> ID：11803745
> 
> 赞同：0
> 
> 时间：2012-08-03T21:47:38.210
> 
> 标签：android, eclipse, telephonymanager

我想知道如何使用 Android 中的 TelephonyManager 在电话结束时更改活动。有人有教程或可以提供代码吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T21:50:34.993

要更改活动，您将在 TelephonyManager 上注册为侦听器，或收听更改的广播。在那一刻，您将通过执行 context.startActivity(inent) 来更改活动，其中意图针对下一个活动。

第一步：

向 TelephonyManager 注册一个 PhoneStateListener 以捕获状态更改为断开连接的时间。

```
 PhoneStateListener myPhoneStateListener = new PhoneStateListener() {
     @Override
    void onCallStateChanged(int state, String incomingNumber){
       // Check state here.
       if (changed to disconnected){  // Check status change here. Might need to save previous?
          Intent i = new Intent(NextActivity.class);
          startActivity(i);
       }
      }
}

 telephonyManager.listen(myPhoneStateListener); 
```

先编码，然后测试。

第二步：

在 goto next 活动中创建一个意图。

```
 Intent intent = new Intent(NextActivity.class)
  startActivity(intent); 
```

# php - MySQL选择问题

> ID：11803749
> 
> 赞同：1
> 
> 时间：2012-08-03T21:47:56.627
> 
> 标签：php, mysql

我正在建立一个网站来学习编码。我有一个 claim.php，它是一个声明您的业务页面（它只是一个您可以搜索业务然后单击指向 addclaimedbiz.php 的链接的地方）和一个 addclaimedbiz.php 页面，它将声明的业务添加到数据库中。

首先，这是我的用户的 sql 代码，其中业务 id 将添加到行**biz**：

```
`id` int(15) NOT NULL AUTO_INCREMENT,
`firstname` varchar(50) NOT NULL,
`lastname` varchar(50) NOT NULL,
`email` varchar(75) NOT NULL,
`password` varchar(50) NOT NULL,
`biz` int(1) NOT NULL,
`verifiedbiz` int(1) NOT NULL, 
```

这是我的企业 sql 代码：

```
`id` int(15) NOT NULL AUTO_INCREMENT,
`name` varchar(50) NOT NULL,
`phone` varchar(14) NOT NULL,
`claimed` int(1) NOT NULL, 
```

现在是将公司 ID 发送到 addclaimedbiz.php 的 claim.php 的代码。（我只发了一点，如果你需要可以发更多！）

```
 while($row = mysql_fetch_array($result))
            {
            $id=$row['id'];
            $company_name=$row['name'];
            $company_phone=$row['phone'];
            $company_address=$row['address'];
            $address2=$row['address2'];
            $company_city=$row['city'];
            $company_zip=$row['zipcode'];
            $cat1=$row['cat1'];
            $cat2=$row['cat2'];
            $cat3=$row['cat3'];
            $subcat1=$row['subcat1'];
            $subcat2=$row['subcat2'];
            $subcat3=$row['subcat3'];
            $claimed=$row['claimed'];
            //Start While Loop
            echo"
            <div class='listing'>
                                    <li>
                                        <span class='bphone'>$company_phone</span>
                                        <span class='bname'>$company_name</span>
                                        <br/>
                                        <div class='blocation'>$company_address, $company_city, CO $company_zip ";if($address2 != ""){echo"(".$address2.")";}echo"</div>
                                        <br/>
                                        ";if($claimed != 1){echo "<a href='addclaimedbiz.php?id=".$id."'><button>Claim Business</button></a>";}else{echo "Already Claimed";}echo"
                                    </li>

                                <!--/Listing-->

                </div>";

            } 
```

然后是我的 addclaimedbiz.php 代码：

```
 <?
 $biz_id = $_REQUEST['id'];

 //This next select from db is to take the id of the company and get the name for the corresponding id

 include("./config.php");
 $result = mysql_query("SELECT * FROM company WHERE id = '$biz_id'") or die(mysql_error());
 while($row = mysql_fetch_array($result))
 {
    $business_name = $row['name'];
 }

 ?> 
```

然后回显出我使用的 $business_name（这在 addclaimedbiz.php 上以及页面下方）

```
<?php if($biz == "0"){

            echo "You are claiming:"$business_name " as your business";

            }
            else{"You are already have a claimed business"}
            ?> 
```

应该发生的是它应该回显您声称：$business_name 是您的企业，但现在它忽略了 $business_name。为什么是这样？

非常感谢所有帮助！

哦，我在我的数据库中遗漏了一些对我认为的问题来说不必要的行，但如果你需要它们，我绝对可以发布！

* * *

编辑

* * *

我的新代码如下所示：

```
<?
error_reporting(E_ALL);
$auth = $_COOKIE["auth"];
if ($auth != "1"){
header("Location: ./signin.php");
}
$firstname = $_COOKIE['firstname'];
$id = $_COOKIE['id'];
$fname = ucwords($_COOKIE['firstname']);
$lname = ucwords($_COOKIE['lastname']);
$email = $_COOKIE['email'];
$city = ucwords($_COOKIE['city']);
$biz = ucwords($_COOKIE['biz']);

$biz_id = $_REQUEST['id'];

include("./config.php");
$result = mysql_query("SELECT * FROM company WHERE id = '$biz_id'") or die(mysql_error());
if(mysql_num_rows($result)){
    while($row = mysql_fetch_assoc($result)){
        $business_name = $row['name'];
    }
}
echo count($result);
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T21:50:18.653

您没有在字符串中使用正确的变量插值，放在`$business_name`引号内：

```
echo "You are claiming:$business_name as your business"; 
```

啊，看起来也像你想要`mysql_fetch_assoc`的，而不是`mysql_fetch_array`：

```
while($row = mysql_fetch_assoc($result)){
    $business_name = $row['name'];
} 
```

[文档在这里](http://www.php.net/manual/en/function.mysql-fetch-assoc.php)。

嗯...我有一种预感，尝试用以下方式包装你的`while`块：

```
if(mysql_num_rows($result)){
   ...   
} 
```

我会让其他人做关于 mysql_* 函数的讲座。:)

干杯

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T21:49:50.340

您需要使用句点连接字符串，如下所示：

```
 echo "You are claiming:" . $business_name . " as your business"; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-03T21:50:05.423

我相信你需要`.`在你的`echo`陈述中加入一对。

像这样：

`echo "You are claiming: " . $business_name . " as your business";`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-03T21:52:09.587

你需要使用 . 在php中连接字符串

```
 echo "You are claiming:".$business_name ". as your business" 
```

# php - 如何使用 Zend DB 为表中的现有值添加值

> ID：11803751
> 
> 赞同：3
> 
> 时间：2012-08-03T21:47:59.433
> 
> 标签：php, zend-framework, zend-db

我想以 Zend DB 风格进行以下查询。基本上我想将 1000 添加到表中 id = 1 的值。

```
mysql_query("UPDATE `some_table` SET `value` = `value` + 1000 WHERE `id` = 1"); 
```

这是我的 Zend 查询，但它不起作用

```
$data= array('value' => 'value'+1000);
$this->dbo->update('some_table', $data, $this->dbo->quoteInto('id = ?','1')); 
```

建议表示赞赏。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-03T21:54:52.253

试试这个：

```
$data = array('value' => new Zend_Db_Expr('value + 1000'));
$this->dbo->update('some_table', $data, $this->dbo->quoteInto('id = ?', 1); 
```

您需要使用[`Zend_Db_Expr`](http://framework.zend.com/manual/en/zend.db.select.html#zend.db.select.building.columns-expr)它`Zend_Db`，以免尝试引用该值或对其应用任何转换。

# c++ - C++ 内存编辑 - 编辑程序集/写入字节

> ID：11803752
> 
> 赞同：3
> 
> 时间：2012-08-03T21:48:22.883
> 
> 标签：c++, memory-management, assembly, byte

在地址 10134CE0 我有

```
10134CE0 - 40 - inc eax 
```

我怎么能改变它（希望使用 C++ `WriteProcessMemory`）来实现它

```
dec eax 
```

我知道 40 的意思`inc eax`和 48 的意思`dec eax`，但我怎么能把 40 变成 48？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T22:00:13.133

首先，如果这是代码并且是您程序的一部分，您应该确保该段对您是可写的。否则，您无法动态修补您的代码。

如果是这样，那么以下将在 C 中解决问题（C++ 可能会受益于使用更漂亮的`static_cast<>`）：

```
uint8_t *code = (uint8_t*)0x10134ce0;
*code = 0x48; 
```

第一行声明了一个指针，并为它分配了代码的地址。然后在第二行中，您使用此指针覆盖原始指令。

如果您正在考虑修补 x86 代码，请注意，仅仅这样做是不够的。x86 是压缩指令集，操作可能有不同的长度。在这种情况下，用另一条指令覆盖一条指令可能很困难，因为新指令可能更长，因此您将覆盖一条或多条您不想修补的指令。

对于这种情况，您需要反汇编原始代码并重新组装您使用的新实例，而不是旧代码。为此，我喜欢使用[udis86](http://udis86.sourceforge.net/)作为反汇编程序，并使用[AsmJit 动态](http://code.google.com/p/asmjit/)创建新代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T22:05:48.903

使用`WriteProcessMemory`（如果适用）：

```
uint8_t buffer;
BOOL ok

buffer = 0x48;
ok = WriteProcessMemory(<handle of the process>, 0x10134CE0, &buffer, 1, NULL); 
```

但是问题是你是否应该写入另一个进程的内存，如果这是你正在做的事情，即使你有权限。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-04T00:53:53.503

如果您要问的只是“我如何在内存位置 0x10134CE0 写入字节 0x48”，那就是：

```
*(char *)0x10134CE0 = 0x48 
```

在另一个进程的内存空间中做同样的事情看起来像这样：

```
char val = 0x48;
BOOL success = WriteProcessMemory(target, 0x10134CE0, &val, 1, NULL); 
```

大概你想做的不仅仅是这个，但你还没有解释“更多”是什么，这会让任何人都很难回答。BjoemD 在读懂你的思想方面做了一些勇敢的尝试。如果他成功了，那就太好了。如果没有，请告诉我们您还需要什么。

# android - Android CursorLoader 和 LoaderManager 错误

> ID：11803754
> 
> 赞同：1
> 
> 时间：2012-08-03T21:48:34.260
> 
> 标签：android, sqlite, illegalargumentexception, android-loadermanager, android-cursorloader

我正在尝试在 10 的最小 API 上实现 CursorLoader 和 LoaderManager。

但是，我在 AsyncTaskLoader.class 的第 63 行不断收到 IllegalArgument 异常（发生异常的 AsyncTaskLoader.class 的源代码在下方和此[**链接**](http://grepcode.com/file/repo1.maven.org/maven2/com.google.android/support-v4/r7/android/support/v4/content/AsyncTaskLoader.java#AsyncTaskLoader.LoadTask.onPostExecute%28java.lang.Object%29)处。

```
/* Runs on the UI thread */
@Override
protected void onPostExecute(D data) {
    if (DEBUG) Log.v(TAG, this + " onPostExecute");
    try {
        AsyncTaskLoader.this.dispatchOnLoadComplete(this, data);
    } finally {
        done.countDown();
    }
} 
```

以下是错误时的堆栈：

```
AsyncTaskLoader$LoadTask.onPostExecute(Object) line: 63 
AsyncTaskLoader$LoadTask(ModernAsyncTask).finish(Object) line: 461  
ModernAsyncTask.access$500(ModernAsyncTask, Object) line: 47    
ModernAsyncTask$InternalHandler.handleMessage(Message) line: 474    
ModernAsyncTask$InternalHandler(Handler).dispatchMessage(Message) line: 99  
Looper.loop() line: 137 
ActivityThread.main(String[]) line: 4424    
Method.invokeNative(Object, Object[], Class, Class[], Class, int, boolean) line: not available [native method]  
Method.invoke(Object, Object...) line: 511  
ZygoteInit$MethodAndArgsCaller.run() line: 784  
ZygoteInit.main(String[]) line: 551 
NativeStart.main(String[]) line: not available [native method] 
```

我测试了我的内容提供程序，并验证了查询方法从我的 Sqlite 数据库返回了一个有效的游标。下面是我尝试实现 CursorLoader 和 LoaderManager 的活动的源代码：

```
import android.database.Cursor;
import android.os.Bundle;
import android.support.v4.app.FragmentActivity;
import android.support.v4.app.LoaderManager;
import android.support.v4.content.CursorLoader;
import android.support.v4.content.Loader;
import android.support.v4.widget.SimpleCursorAdapter;
import android.widget.ListView;

public class Screen1_MainData extends FragmentActivity implements LoaderManager.LoaderCallbacks<Cursor> {

    SimpleCursorAdapter adapter;
    ListView lv;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.screen1_maindata);
        initLoader();
    }

    void initLoader() {
        String[] uiBindFrom = { Useful_Info_TableMetaData.USEFUL_INFO_COLUMN_NAME };
        int[] uiBindTo = { R.id.name };
        lv = (ListView) findViewById(R.id.screen1_MainListView);
        getSupportLoaderManager().initLoader(0, null, this);

        adapter = new SimpleCursorAdapter(this, R.layout.row, null, uiBindFrom,
                uiBindTo, 0);
        lv.setAdapter(adapter);    
    }

@Override
public Loader<Cursor> onCreateLoader(int arg0, Bundle arg1) {

    String[] projection = { Useful_Info_TableMetaData.USEFUL_INFO_COLUMN_NAME };

    return new CursorLoader(
            this, // The Activity context
            Useful_Info_TableMetaData.CONTENT_URI, projection, null, null,
            null);
}

    @Override
    public void onLoadFinished(Loader<Cursor> loader, Cursor data) {
        adapter.swapCursor(data);
    }

    @Override
    public void onLoaderReset(Loader<Cursor> loader) {
        adapter.swapCursor(null);
    }
} 
```

有人在这里看到我做错了什么吗？

谢谢。

* * *

该应用程序似乎可以做到

```
@Override
public void onLoadFinished(Loader<Cursor> loader, Cursor data) {
    adapter.swapCursor(data);
} 
```

然后它在那里抛出异常。

下面是logcat：

```
08-03 23:33:20.736: E/AndroidRuntime(17256): FATAL EXCEPTION: main 
08-03 23:33:20.736: E/AndroidRuntime(17256): java.lang.IllegalArgumentException: column '_id' does not exist 
08-03 23:33:20.736: E/AndroidRuntime(17256): at android.database.AbstractCursor.getColumnIndexOrThrow(AbstractCursor.java:267) 
08-03 23:33:20.736: E/AndroidRuntime(17256): at android.database.CursorWrapper.getColumnIndexOrThrow(CursorWrapper.java:78) 
08-03 23:33:20.736: E/AndroidRuntime(17256): at android.support.v4.widget.CursorAdapter.swapCursor(CursorAdapter.java:344) 
08-03 23:33:20.736: E/AndroidRuntime(17256): at android.support.v4.widget.SimpleCursorAdapter.swapCursor(SimpleCursorAdapter.java:326) 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-03T22:51:25.443

`initLoader`在您致电 后尝试移动`lv.setAdapter`。这将确保`onLoadFinished`（因此`adapter.swapCursor(data)`）将在与关联*之后*被调用。`SimpleCursorAdapter``ListView`

此外，请确保您的数据库有一个以`_id`您的主键命名的列，`CursorAdapter`否则将无法正常工作。`_id` 需要作为`CursorLoader`'s 结果的一部分返回。否则会抛出异常。

# signals - 在信号 ocaml 上转储线程堆栈

> ID：11803755
> 
> 赞同：4
> 
> 时间：2012-08-03T21:48:35.457
> 
> 标签：signals, ocaml, stack-trace

我有一个不会停止的 OUnit 测试，我希望能够获得堆栈跟踪。

我正在编译，`-g`当测试异常完成时我得到一个堆栈跟踪。

我尝试捕获信号，但不知道如何为活动线程转储堆栈

```
let () = begin
  (* Report stacktraces in test failures *)
  Printexc.record_backtrace true;

  (* Exit on Ctrl-C. *)
  let flush_and_abort _ =
    prerr_string "aborted by signal\n";
    (***** What do I do here to dump stacks for live threads? ****)
    flush stderr;
    flush stdout;
    exit ~-1 in
  Sys.set_signal Sys.sigint  (Sys.Signal_handle flush_and_abort);
  Sys.set_signal Sys.sigquit (Sys.Signal_handle flush_and_abort);
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T12:08:18.600

我不认为信号处理程序是在可以获得回溯的上下文中执行的。自然的选择是使用`Printexc.print_backtrace stderr`，但是（至少在我的机器上）它不起作用。

我的建议是改用运行时分析：用`ocamlopt -p`（或`.p.native`ocamlbuild 的目标）编译，运行你的程序，中断它，然后用它`gprof <executable>`来查看分析信息。它应该突出显示大部分时间花费在哪个函数上，并且使用[gprof2dot](http://code.google.com/p/jrfonseca/wiki/Gprof2Dot)等可视化工具可以获得合理的调用图。不是最佳的，但仍然可以解决您的问题。

PS：我认为你仍然需要你的信号捕获例程来进行分析工作：如果程序被杀死而不是中断自己，它可能不会吐出分析信息。

# python - 我想在一个类中装饰一个方法但不编辑 class.py -- 里面的细节

> ID：11803760
> 
> 赞同：2
> 
> 时间：2012-08-03T21:49:00.247
> 
> 标签：python, class, decorator, wrapper, python-decorators

Twython 模块在内部使用 requests 模块。

我想包装/装饰请求的`requests.post(*k, **kw)`方法，以便 Twython`request.post(...)`调用的所有内容都将被透明地装饰/包装，而不会干扰 Twython 模块。

如果我编辑了请求代码库，那将很容易，但我很好奇如何解决将装饰器添加到**已定义**的函数/方法的一般问题。

```
import requests
def magic_wrapper_doodad(...)
...
...
requests.post = magic_wrapper_doodad(my_function, requests.post) # plz?

import Twython

# thanks to the above magic, requests.post is wrapped just as if it was defined like:
@decorator
def trace(f, *args, **kw):
    print("calling %s with args %s, %s" % (f.__name__, args, kw))
    return f(*args, **kw)

...
... #inside requests.py now:
@trace
def post(self, *args, **kw):
... 
```

我该如何编写`magic_wrapper_doodad()`- 或一些替代代码 - 所以我可以像这样装饰代码？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-03T21:51:20.440

装饰器`@`符号只是用于调用装饰器可调用装饰器并用结果替换装饰器的语法糖。

换句话说，以下两个示例是完全相同的：

```
@yourdecorator
def a_function():
    pass

def b_function():
    pass
b_function = yourdecorator(b_function) 
```

这同样适用于类定义中的方法。

因此，您可以通过将类方法替换为可调用装饰器的结果来简单地装饰类方法：

```
requests.post = my_function(requests.post) 
```

这就像你写的一样：

```
class requests(object):
    @my_function
    def post(self, *args):
        pass 
```

请注意，在您的情况下`requests`实际上是一个模块，而不是一个类，但同样的原则适用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T22:00:31.787

如果您需要装饰 requests 功能，[Martijn Pieters 的回答是您的最佳选择。](https://stackoverflow.com/a/11803786/624900)我只是想我会提到 requests 实际上有[一种 hooks 机制](http://docs.python-requests.org/en/latest/user/advanced/#event-hooks)。

如果你可以用钩子做你需要做的事情，你应该这样做。它比猴子补丁更干净。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-03T21:53:04.623

您正在寻找的内容可能通过面向方面的编程来完成。

查看 Stackoverflow 上的这篇文章，如果有帮助，请告诉我：

[您在生产软件中使用 AOP（面向方面​​编程）吗？](https://stackoverflow.com/questions/20663/do-you-use-aop-aspect-oriented-programming-in-production-software#20758)

# sql-server-2008 - 从 SQL 批量插入中排除内容

> ID：11803765
> 
> 赞同：1
> 
> 时间：2012-08-03T21:49:20.203
> 
> 标签：sql-server-2008, bulkinsert

我想将我的 IIS 日志导入 SQL 以使用 Bulk Insert 进行报告，但注释行 - 以 # 开头的注释行 - 会导致问题，因为这些行与数据行的编号 f 字段不同。

如果我手动删除了评论，我可以执行批量插入。

有没有办法执行批量插入，同时根据匹配排除行，例如：任何带有“#”的行。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T21:58:35.437

我通常对`BULK INSERT`不规则数据使用的方法是将传入数据推送到具有单列的临时临时表中`VARCHAR(MAX)`。

一旦它在那里，我可以使用更灵活的决策工具，如 SQL 查询和字符串函数来决定我想从暂存表中选择哪些行并将其带入我的主表。这也很有帮助，因为`BULK INSERT`对于在特定文件上失败的原因和方式可能非常神秘。

我能想到的唯一其他选择是在批量插入之前使用预上传脚本来修剪不符合表格标准的评论和其他行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T07:20:08.260

我建议改用[logparser.exe](http://www.microsoft.com/en-us/download/details.aspx?id=24659)。LogParser 本身有一些非常[简洁的功能](http://mlichtenberg.wordpress.com/2011/02/03/log-parser-rocks-more-than-50-examples/)，但它也可用于格式化 IIS 日志以由 SQL Server 正确导入。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T04:24:19.120

Microsoft 有一个名为“PrepWebLog”的工具[http://support.microsoft.com/kb/296093](http://support.microsoft.com/kb/296093) - 它会去除这些哈希/磅字符，但是我现在正在运行它（对多个文件使用 PowerShell 脚本）并且我发现它的性能慢得令人无法忍受。

我认为如果我编写一个 C# 程序（甚至可能是一个宏）会更快。

* * *

更新： PrepWebLog 刚刚在我身上崩溃了。我会避免它。

* * *

更新 #2，我查看了 PowerShell 的 Get-Content 和 Set-Content 命令，但不喜欢语法和可能的性能。所以我写了这个小 C# 控制台应用程序：

```
 if (args.Length == 2)
        {
            string path = args[0];
            string outPath = args[1];

            Regex hashString = new Regex("^#.+\r\n", RegexOptions.Multiline | RegexOptions.Compiled);
            foreach (string file in Directory.GetFiles(path, "*.log"))
            {
                string data;
                using (StreamReader sr = new StreamReader(file))
                {
                    data = sr.ReadToEnd();
                }

                string output = hashString.Replace(data, string.Empty);
                using (StreamWriter sw = new StreamWriter(Path.Combine(outPath, new FileInfo(file).Name), false))
                {
                    sw.Write(output);
                }
            }
        }
        else
        {
            Console.WriteLine("Source and Destination Log Path required or too many arguments");
        } 
```

它很快。

* * *

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-03-31T20:57:01.570

跟进 PeterX 所写的内容，我修改了应用程序以处理大型日志文件，因为任何足够大的文件都会导致内存不足异常。此外，由于我们只关心行的第一个字符是否以散列开头，我们可以在读取操作上使用 StartsWith() 方法。

```
class Program
{
    static void Main(string[] args)
    {
        if (args.Length == 2)
        {
            string path = args[0];
            string outPath = args[1];
            string line;

            foreach (string file in Directory.GetFiles(path, "*.log"))
            {
                using (StreamReader sr = new StreamReader(file))
                {
                    using (StreamWriter sw = new StreamWriter(Path.Combine(outPath, new FileInfo(file).Name), false))
                    {
                        while ((line = sr.ReadLine()) != null)
                        {
                            if(!line.StartsWith("#"))
                            {
                                sw.WriteLine(line);
                            }
                        }                          
                    }
                }

            }
        }
        else
        {
            Console.WriteLine("Source and Destination Log Path required or too many arguments");
        }
    }
} 
```

# javascript - 使用 Javascript 对文本框和文本区域进行表单验证

> ID：11803766
> 
> 赞同：0
> 
> 时间：2012-08-03T21:49:27.063
> 
> 标签：javascript, html, validation

我正在做一项任务，我已经为此工作了很长时间，但我什至无法就如何做到这一点做出头脑或故事。

文本框编辑

> 应编辑该字段以删除任何出现的三个字符：/、\ 或 *。确定用户在字段中输入的字符数以及编辑后剩余的字符数。

文本区

> 所有空格都应替换为 + 字符。删除所有回车符和换行符。确定编辑前后输入文本区域的字符数。

这是我的 HTML

```
Put something in the textbox please
<br>
<form name = "TB">
<input type = "text" name = "tb" size = 30 maxlength = 30 value = " "> 
</form>
<br>
<span id="tx1">textbox value</span> <br>
<span id="tx2">texbox length</span> <br>
<span id="tx3">textbox replace value</span> <br>
<span id="tx4">texbox replace length</span> <br>
<br>
<br>
<form name = "TA">
<textarea name = "TA" rows = "5" cols =40>Default Value</textarea>
</form>
<br>
<br>

<input type = "button" value = "Edit and Report" onClick = "valthisform();"> 
```

我想通了一切。

```
var txbox = document.TX.tb.value;

tx1.innerHTML = txbox;
tx2.innerHTML = txbox.length;

var txbax = document.TX.tb.value;
var rep = txbax.replace(/\u002a|\u002c|\u005c|\u002f/gi, "");

tx3.innerHTML = rep;
tx4.innerHTML = rep.length;

var txar = document.TA.txx.value;

ta1.innerHTML = txar;
ta2.innerHTML = txar.length;

var txarr = document.TA.txx.value;
var repp = txarr.replace(/\u0020/gi, "+");

ta3.innerHTML = repp.replace(/\u000d|\u000a/gi, "");
ta4.innerHTML = ta3.innerHTML.length; 
```

# wcf - WCF-Service 在 SOAP 或 RESTful 服务之间做出决定

> ID：11803771
> 
> 赞同：0
> 
> 时间：2012-08-03T21:50:04.880
> 
> 标签：wcf, rest, soap

开发基于 SOAP 和 RESTful 服务的 Web 服务的正确决策点是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T21:56:15.437

这完全取决于您的消费者以及他们可以使用的技术。例如，使用您的服务的 Ruby-on-Rails 应用程序可能更喜欢 REST，而 Java 客户端可能更喜欢 SOAP。

# r - 如何在 R 中读取多个 HTML 表格

> ID：11803774
> 
> 赞同：2
> 
> 时间：2012-08-03T21:50:33.167
> 
> 标签：r

我正在尝试自动拉入并保存到这个 readHTML 函数的数据框；我是一个 R 新手，并且无法弄清楚如何编写一个循环来自动化这个函数，如果你一个一个地做这个函数就可以工作。

```
library('XML')

urls<-c("http://www.basketball-reference.com/teams/ATL/","http://www.basketball-reference.com/teams/BOS/")
theurl<-urls[2] #Pick second link (celtics)

tables <- readHTMLTable(theurl)
n.rows <- unlist(lapply(tables, function(t) dim(t)[1]))
BOS <-tables[[which.max(n.rows)]] 
Team.History<-write.csv(BOS,"Bos.csv") 
```

任何和所有的帮助将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T01:22:00.227

我认为这结合了两个答案中最好的（并整理了一下）。

```
library(RCurl)
library(XML)

stem <- "http://www.basketball-reference.com/teams/"
teams <- htmlParse(getURL(stem), asText=T)
teams <- xpathSApply(teams,"//*/a[contains(@href,'/teams/')]", xmlAttrs)[-1]
teams <- gsub("/teams/(.*)/", "\\1", teams)
urls <- paste0(stem, teams)

names(teams) <- NULL   # get rid of the "href" labels
names(urls) <- teams

results <- data.frame()
for(team in teams){
   tables <- readHTMLTable(urls[team])
   n.rows <- unlist(lapply(tables, function(t) dim(t)[1]))
   team.results <- tables[[which.max(n.rows)]] 
   write.csv(team.results, file=paste0(team, ".csv"))
   team.results$TeamCode <- team
   results <- rbind(results, team.results)
   rm(team.results, n.rows, tables)
}
rm(stem, team)

write.csv(results, file="AllTeams.csv") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T22:09:55.733

我假设你想遍历你的 urls 向量？我会尝试这样的事情：

```
library('XML')

url_base <- "http://www.basketball-reference.com/teams/"
teams <- c("ATL", "BOS")

# better still, get the full list of teams as in
# http://stackoverflow.com/a/11804014/1543437

results <- data.frame()
for(team in teams){
   theurl <- paste(url_base, team , sep="/")
   tables <- readHTMLTable(theurl)
   n.rows <- unlist(lapply(tables, function(t) dim(t)[1]))
   team.results <-tables[[which.max(n.rows)]] 
   write.csv(team.results, file=paste0(team, ".csv"))
   team.results$TeamCode <- team
   results <- rbind(results, team.results)
}
write.csv(results, file="AllTeams.csv") 
```

# ember.js - 如何在路由器中指定动作处理程序？

> ID：11803782
> 
> 赞同：0
> 
> 时间：2012-08-03T21:50:51.417
> 
> 标签：ember.js, ember-old-router

[http://jsfiddle.net/pauldechov/u4naE/](http://jsfiddle.net/pauldechov/u4naE/)

```
App.Router = Em.Router.extend({
enableLogging: true,

root: Em.Route.extend({

    index: Em.Route.extend({
        route: '/',
        connectOutlets: function(router) {
            router.get('applicationController').connectOutlet('application');
        }
    }),

    // why does this work?
    goHome: Em.Route.transitionTo('home'),

    // ...but not this? Am I missing something?
    goHome2: function(router, context) {
        router.transitionTo('home', context);
    },
    home: Em.Route.extend({
        route: 'home'
    })
})
}); 
```

我收到一条错误消息：“您必须为事件 'goHome2' 指定目标状态，以便在当前状态 'root.index' 中链接到它。”

例如，如何在此处定义处理程序，以便可以返回 false 并停止传播？我真的应该在视图中执行此操作吗？该怎么做？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T00:09:48.290

好的，我想我找到了。当使用 href="true" 时，你必须指定你的函数 goHome2 是一个 eventTransition。见[http://jsfiddle.net/Sly7/u4naE/2/](http://jsfiddle.net/Sly7/u4naE/2/)

# c - C 代码在 Windows 中崩溃，但在 Linux 中没有

> ID：11803784
> 
> 赞同：2
> 
> 时间：2012-08-03T21:51:09.597
> 
> 标签：c, windows, linux

我是 C 的新手，我一直在 Fedora 中测试我的程序，使用 gcc 和 gdb 进行调试。我有一个接受用户输入的程序。如果输入的第一个字符串是“create”，那么我看一下第二个命令，如果那是“object”，那么我继续执行 createObject 函数。

希望我的代码能让这更清楚一点：

```
static void parseCmd(char **input) {
    if(!strcmp(input[0], "create")) {
        if(!strcmp(input[1], "object")) {
            if(input[2] && strcmp(input[2], ""))
                createObject(input[2]);
            else
                printf("Object needs a name\n");
        }
        else
            printf("Command needs more parameters\n");
    }
    else
        printf("Command not recognized\n");
} 
```

当我测试输入只是“创建对象”（对象后没有空格，只有 ENTER 键）

在 Linux 中它打印“对象需要一个名称”

但是在 Windows 中，程序崩溃了，它只是挂起。如何更改代码以使其行为方式与在 Linux 中的行为方式相同？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T21:55:49.000

你有代码说：

```
if(input[2] && strcmp(input[2], "")) 
```

显然试图检测是否`input[2]`存在而不是空的。

但是，这行不通。没有保证缺少第三个参数将使`input[2]`NULL 或`""`.

`input[2]`那时可能会有一个垃圾值，但**垃圾仍然会通过你的测试！**

您有几个选项可以修复它。
要么，此函数的调用者需要保证未设置为有效数据的元素将改为设置为零/nil。

或者，我更喜欢的方法，您将函数签名更改为如下所示：

```
static void parseCmd(char **input, int num_inputs); 
```

并将输入的数量与输入数组一起传递。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T21:55:27.637

你在这一行有问题：

```
if(input[2] && strcmp(input[2], "")) 
```

**您测试中的input[2]**不存在“创建对象”，这就是它崩溃的原因。

希望这有帮助。

问候。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-03T21:55:14.653

您已经进入了潜在的访问违规或未定义行为（嗯，未定义值）的领域：

```
input[2] && strcmp(input[2], "") 
```

如果 的长度`input`仅为 2，那么这是超过了可接受的阅读点。最坏的情况会导致段错误（就像 Windows 那样），最好的情况是操作系统会让它发生，你会得到一个随机值。（Linux 似乎将它或 *input[2] 视为 0。）

无论如何，不​​要读取您不允许访问的内容，而是传递输入的长度并检查它。

```
static void parseCmd( char **input, size_t num) { //or just int if size_t isn't already defined
    //compare num
} 
```

- 编辑 -

正如 Daniel Fischer 所指出的，显然`argv[argc]`确实是一个有效的读取，并且它保证是一个空指针。

假设您确实传递`argv`给该函数，这意味着您可以依赖此行为。不过，您的另外两个 if 语句并未对此进行检查，并且为了概括该函数，最好传递长度（或者，正如 paulsm4 所说，您应该查看 getopt 函数-它使解析参数很多比滚动你自己的解析方法更容易）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-03T22:13:56.667

先生，您正在击中您无法访问的内存。

我推荐你

[如何检查指针是否有效？](https://stackoverflow.com/questions/993324/how-to-check-if-a-pointer-is-valid)

任何想知道他如何传递东西的人：

```
int main(void) 
{ 
    char* values[] = {"1", "2", "3"};
    parseCmd(values);
} 
```

当您尝试访问输入时会发生这种情况[2]，但如果您不知道自己在接受什么，它可能随时发生。我建议您在获取输入时进行健全性检查。如果他们没有在 values[2] 中添加任何内容，请让您的函数意识到这一点或改变它处理它的方式。使用指针和指向指针的指针，您在分配值时不能忽略完整性检查。

# html - href 链接将不起作用 标签

> ID：11803785
> 
> 赞同：-3
> 
> 时间：2012-08-03T21:51:17.810
> 
> 标签：html, css, xhtml, hyperlink, paragraph

a href 链接在 p 标签中停止工作？当我将它们放在 H3 标记中时它们可以工作，但是布局/样式表格式似乎消失了。这让我想知道它是否与网站 css 或 xhtml 有关。

**代码片段 - 链接不起作用：**

```
<div id="written_content">
<div id="header_image"></div>
         <h1>How we do it</h1>
         <div id="casestudies">                       
              <p><a href="pdf/3Rivers FCU Case Study.pdf" target="_blank">3Rivers Federal Credit Union</a>
<br />
<br />
Momentum developed a three-pronged, integrated approach with 3Rivers to maximize market potential and increase existing branch productivity.</p> 
```

**此代码段允许链接工作，但格式混乱：**

```
 <div id="written_content">
<div id="header_image"></div>
         <h1>How we do it</h1>
         <div id="casestudies">                       
              <h2><p><a href="pdf/3Rivers FCU Case Study.pdf" target="_blank">3Rivers Federal Credit Union</a></p><h2>

<p>Momentum developed a three-pronged, integrated approach with 3Rivers to maximize market potential and increase existing branch productivity.</p> 
```

**这是我的CSS：**

```
 #written_content {
width: 500px;
float: left;
height: auto;
margin-top: 85px;
margin-left: 47px;
 }

h1 {
font-family: Arial, Helvetica, sans-serif;
font-size: 18px;
font-weight: bold;
color: #333;
float: left;
margin-top: 0px;
margin-right: 8px;
margin-bottom: 0px;
margin-left: 0px;
 }
 h2 {
font-family: Arial, Helvetica, sans-serif;
font-size: 18px;
font-weight: lighter;
float: left;
margin-right: 0px;
margin-left: 0px;
color: #999;
margin-top: 0px;
margin-bottom: 0px;
font-style: normal;
}

#written_content p {
font-family: Arial, Helvetica, sans-serif;
font-size: 12px;
font-weight: normal;
width: 465px;
margin-top: 60px;
margin-right: 0px;
margin-bottom: 0px;
margin-left: 0px;
text-align: justify;
color: #999;
line-height: 17px;
}

 #casestudies{

font-family: Arial, Helvetica, sans-serif;
font-size: 12px;
font-weight: normal;
width: 500px;
margin-top: 25px;
margin-right: 0px;
margin-bottom: 0px;
margin-left: 0px;
text-align: justify;
color: #999;
line-height: 17px; 
```

这是我认为我会遇到的最后一个问题。有谁知道为什么会出现这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T23:04:11.010

我只用你的代码为你设置了一个小小提琴，它似乎工作得很好。[http://jsfiddle.net/TGVWv/](http://jsfiddle.net/TGVWv/)

您的代码片段中缺少一些结束标签，但我怀疑这是一个复制错误。

一定要去你的第一个 html 样本，因为第二个是产生无效的 html。`<p>`在 > 中是不允许的`<h2`，并且在语义上也是不正确的。它可能适用于大多数浏览器，但对于 SEO 来说完全没有必要。

同样，我在您的链接中没有发现任何错误，没有任何东西可以解释为什么它对您不起作用。也许您可以提供一个链接到它所在的实际页面？...

**编辑：** 您提供的页面有问题，与实际链接无关。上面有一个 div，它是透明的。这会导致您无法访问该链接。尝试使用类似这样的方式更新您的 CSS（您可能需要稍微调整一下数字）：

```
.sidebar {
height: 150px;
width: 400px;
text-align: right;
position: absolute;
top: 230px;
right: 0;
} 
```

这会导致您的侧边栏缩小并且不再位于您的链接顶部。

# google-apps - 我购买了一个之前为您的域注册过 Google Apps 的域名。有什么方法可以为这个新帐户使用 Google Apps？

> ID：11803789
> 
> 赞同：0
> 
> 时间：2012-08-03T21:51:35.380
> 
> 标签：google-apps, domain-name

我购买了一个域名，却没有意识到它是从 2010 年放弃的企业那里获得的。当我尝试为您的域注册 Google Apps 时，它不会让我，因为他们之前已经注册了。是否有程序可以让 Google 为我提供服务？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T21:56:42.367

根据 Google 的说法，您可以为以前使用过 Google Apps 的已购买域重置管理员密码：

[http://support.google.com/a/bin/answer.py?hl=en&answer=80610](http://support.google.com/a/bin/answer.py?hl=en&answer=80610)

# asp.net - 从模型中排除项目 - MVC/ASP.Net

> ID：11803791
> 
> 赞同：1
> 
> 时间：2012-08-03T21:51:52.443
> 
> 标签：asp.net, asp.net-mvc, linq, entity-framework-4

[这是这篇文章](https://stackoverflow.com/questions/11797814/using-viewmodels-and-linq-in-asp-net-mvc-4)的后续问题

我有两个模型：

```
CarType.cs

//
// Holds types of car - this has a one to many relationship with Car class
//
[Table("tType")]
public class CarType
{
    [Key]
    public int type_id { get; set; }
    public int dealer_id { get; set; }
    public string type_name { get; set; }
    public string type_desc { get; set; }
    public virtual ICollection<Car> Cars { get; set; }
}  

Car.cs

//
// Holds actual Cars
//

[Table("tCar")]
public class Car
{
    [Key]
    public int car_id { get; set; }
    public int dealer_id { get; set; }
    public int type_id { get; set; }
    public int car_order { get; set; }
    public string car_name { get; set; }
    public virtual ICollection<Rental> Rentals { get; set; }
    public virtual CarType CarType { get; set; }
} 
```

我想要一个视图模型，我可以在其中查看汽车类型，以及每个汽车类型类中每种汽车类型的数量，所以我创建了一个视图模型：

```
public class SearchViewModel
{
    [Required]
    public DateTime From { get; set; }
    public int Nights { get; set; }
    public int dealer_id { get; set; }
    public IQueryable<CarType> CarTypes { get; set; }
    // CarTypes as above, has a one to many relationship with the class Car
} 
```

给定一个预先确定的实际汽车列表（比如 preBookedCars），我想从 ViewObject 中删除汽车列表，例如，如果 CarType 的模型（包括一个 2 多个汽车）看起来像这样：

```
Mercedes (count = 3)
....Car 1
....Car 2
....Car 3
Ford (count = 3)
....Car 4
....Car 5
....Car 6
Citroen (count = 3)
....Car 7
....Car 8
....Car 9 
```

给定汽车列表，我将如何从 CarType 模型中排除汽车列表 - 例如。

我有一个列表：汽车 1、汽车 4、汽车 8、汽车 9 - 所以我希望上面的模型显示：

```
Mercedes (count = 2)
....Car 2
....Car 3
Ford (count = 2)
....Car 5
....Car 6
Citroen (count = 1)
....Car 7 
```

我知道它类似于（伪 LINQ）：

```
var freeCars = (db context).CarTypes
                        .Cars
                        .Except(preBookedCars) 
```

感谢您的任何帮助，

标记

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T22:02:09.357

我不确定这是否是您要查找的内容，但如果您只是尝试过滤 CarType 对象中的 Cars 集合，则可以使用以下内容：

```
var preBookedCars = new List<int> { 1, 5, 9 };
var myCarType = new CarType();
var filteredCars = myCarType.Cars.Where(c => !preBookedCars.Contains(c.car_id)); 
```

此代码可以调整以在您需要的任何地方使用。

# php - POSTFIX/sendmail 突然添加了额外的换行符

> ID：11803793
> 
> 赞同：1
> 
> 时间：2012-08-03T21:52:25.163
> 
> 标签：php, email, sendmail, postfix-mta, line-endings

在周末，我们的 MTA (POSTFIX) 突然开始在我们的消息边界前添加换行符。我们有几个 PHP 模板，它们定义了多部分/替代消息并定义了标题。这是 PHP 邮件格式，它在星期五工作，然后在星期一突然停止。

```
$headers = "From: name <our@example.com>\r\n" .
   "Reply-To: name <our@example.com>\r\n" .
   "MIME-Version: 1.0\r\n" .
   "Content-Type: multipart/alternative; boundary=\"09127kjhd821\"";

$txt = "\r\n\r\n--09127kjhd821\r\n" .
   "Content-Type: text/plain; charset=UTF-8\r\n" .
   "Content-Transfer-Encoding: quoted-printable\r\n\r\n" .
   "Text Message";

$html = "\r\n\r\n--09127kjhd821\r\n".
   "Content-Type: text/html; charset=UTF-8\r\n" .
   "Content-Transfer-Encoding: base64\r\n\r\n" .
   chunk_split( base64_encode( "HTML Message") );

$body = $txt . $html . "\r\n\r\n--09127kjhd821--";

mail(
   "someone@example.com",
   "=?UTF-8?B?" . base64_encode( "Subject" ) . "?=",
   $body,
   $headers
); 
```

将原始邮件与损坏的邮件进行比较，我看到以下损坏：

```
Date: Fri,  3 Aug 2012 16:52:39 -0400 (EDT)

--09127kjhd821

Content-Type: text/plain; charset=UTF-8

Content-Transfer-Encoding: quoted-printable 
```

原始（工作）

```
Date: Tue, 31 Jul 2012 12:36:45 -0400 (EDT)

--09127kjhd821
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable 
```

正如您所看到的，每个 \r 和 \n 的换行符几乎翻了一番，据我所知，没有任何改变会导致这种情况。

非常感谢任何建议或帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T17:18:55.490

我唯一能想到的是将 LF 转换为 CRLF 的 POSTFIX 和 PHP 问题，因此当在消息正文中为边界和标头定义 CRLF 时，它将被转换为 CRCRLF。但是，保存消息源仅在十六进制编辑器中显示为 CRLF，这可能是我使用的编辑器或电子邮件客户端下载过程中的转换。

我仍然不明白为什么它突然改变了，因为它以前工作正常。我能想到的唯一区别可能是由于脚本行尾可能已从 CRLF 更改为 LF 导致发生转换，从而破坏了正文中包含 CRLF 的电子邮件。

我最终通过将 php.ini 中的 sendmail_path 更改为

```
sendmail_path="/usr/bin/dos2unix|/usr/sbin/sendmail -t -i" 
```

# html - IE9：并非所有边框都显示

> ID：11803795
> 
> 赞同：1
> 
> 时间：2012-08-03T21:52:30.837
> 
> 标签：html, css, html-table, internet-explorer-9, border

我正在尝试为不同的页面创建一些表格。现在边框适用于 IE8、FF、Chrome、Safari，但不适用于 IE9。只是为了让你知道，我首先在表格中创建了边框，然后放入了背景颜色。

现在这是我的代码有什么问题的视觉示例。我将 Google Chrome 和 IE 9 并排放置，这样您就可以看到边框在浏览器中完美运行以及它在 IE9 中的反应。（左边是Chrome，右边是IE9）：

![](../Images/b9fbe55e49cda8cba3e66abdccfb1756.png)

我将查看浏览器开发工具，两种浏览器的边框样式都存在，但 IE9 的反应方式在我看来非常奇怪，特别是因为相同的代码适用于 IE8。

**我为我的代码做了什么：**

对于边界，我有这个：

```
table.policy_table td {
   border-top: 1px solid #A9B0B6;
} 
```

所以我在行中着色是在 PHP 文件中为带有表格的页面所做的。这样做的原因是因为我必须确保浏览器兼容 IE8 及更高版本：

```
jQuery("tr:even").addClass("even"); 
```

在css文件中是这样的：

```
.even {
   background: #F4F4F4;
} 
```

我没有使用 nth-child 的原因是因为 IE8 可以访问这些页面，而 IE8 不支持 nth-child。当我删除背景颜色代码时，所有边框再次正常。

**我的问题：**

你认为这是我试图在弄乱边界的行的背景中着色的方式吗？有谁知道IE9这样做的原因？我已经研究了一段时间，没有发现为什么会发生这种情况。

# android - Android VideoView - 在某些设备上更改路径后出现空白视频

> ID：11803797
> 
> 赞同：1
> 
> 时间：2012-08-03T21:52:44.587
> 
> 标签：android, android-videoview

我对 android 开发很陌生，我目前正在开发一个非常简单的应用程序，其中还包括一些视频。为了演示我的问题，我的 res/raw/ 目录中有 2 个视频（例如 video1.mp4 和 video2.mp4）。我想在第一个视频结束后立即开始播放第二个视频。这就是我所说的视频：

```
public void showVideo1() {
    VideoView vd = (VideoView)findViewById(R.id.videoview);
    vd.setVideoPath("android.resource://com.myapp.hello/" + R.raw.video1);
    vd.setOnCompletionListener(new MediaPlayer.OnCompletionListener() 
    {           
        public void onCompletion(MediaPlayer mp) 
        {
            Log.d("VideoComplete", "Video 1 is complete");
            showVideo2(); // start playing the second video...
        }           
    }); 
    vd.start();
}

public void showVideo2() {
    VideoView vd = (VideoView)findViewById(R.id.videoview);
    vd.setVideoPath("android.resource://com.myapp.hello/" + R.raw.video2);
    vd.setOnCompletionListener(new MediaPlayer.OnCompletionListener() 
    {           
        public void onCompletion(MediaPlayer mp) 
        {
            Log.d("VideoComplete", "Video 2 is complete");
        }           
    }); 
    vd.start();
} 
```

此示例适用于大多数设备 - 我调用 showVideo1() 来调用 showVideo2，两个视频都已播放，仅此而已。但我发现有些设备无法播放第二个视频（？？？）。例如，我的旧三星 Galaxy 5 i5500 在完成第一个视频后只显示一个空白屏幕 - 我可以在调试中看到第二个视频已加载并启动但它不显示 - 第一个视频播放没有问题。这款手机使用 Android v2.2，我还尝试在另一台使用相同操作系统版本（Galaxy Tab GT-P1000）的设备上播放两个视频。

我尝试重新编码视频（认为这是一个编解码器错误），但仍然没有运气。我还玩过 setZOrderOnTop(true), seekTo(0), ... 这让我发疯。

有什么建议吗？我未来的应用程序依赖于所有设备上的这个功能（能够一个接一个地播放一个视频），所以我真的很绝望。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T10:50:45.787

您可以在 Video1 的 onCompleteListener 中创建一个处理程序，并在一段时间后检查您的视频是否正在播放。您可以进一步尝试停止 Video2 并在可运行文件中再次播放它并尝试不同的事情，以了解其他设备是否绝对不可能支持您的逻辑。跟踪从 LogCat 发生的事件。祝你好运

# tsql - TSQL PIVOT 中的聚合函数

> ID：11803798
> 
> 赞同：0
> 
> 时间：2012-08-03T21:52:46.347
> 
> 标签：tsql, pivot

[http://technet.microsoft.com/en-us/library/ms177410(SQL.105).aspx](http://technet.microsoft.com/en-us/library/ms177410(SQL.105).aspx)

在某些情况下，我将聚合函数视为 sum、Max 或 avg。如何确定在 PIVOT 语句中使用哪个聚合函数？谢谢你，史密斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T21:56:49.253

您可以在 中使用任何聚合函数，`PIVOT`但这取决于您对查询的要求。

[聚合函数](http://msdn.microsoft.com/en-us/library/ms173454.aspx)包括：

```
SUM()
MIN()
MAX()
COUNT()
AVG() 
```

# algorithm - 使用邻接矩阵的深度优先搜索

> ID：11803800
> 
> 赞同：3
> 
> 时间：2012-08-03T21:52:56.707
> 
> 标签：algorithm, data-structures, depth-first-search

谁能解释使用邻接矩阵进行深度优先搜索的算法？我知道使用递归的深度优先搜索算法，我尝试使用邻接矩阵来实现它，但它不是很成功。

到目前为止我所拥有的是

```
 dfs(G,i){

  mark i as visited;

  for(traverse through the edges of i vertex){

     if(vertex of edge is unseen){

       DFS(G,newVerted)
     }
   }

} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2015-06-22T13:24:00.787

```
 void DFS(int i)
    {
        int j;
        printf("\n%d",i);
        visited[i]=1;
        for(j=0;j<n;j++)
            if(!visited[j]&&G[i][j]==1)
                DFS(j);
    } 
```

哪里`n`是顶点数，`G`是图形，`G[i][j]`表示顶点`i`连接到顶点`j`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-06-05T17:06:02.337

您错过了打印功能`dfs(G,i)`

代码如下

```
dfs(G,i){
int j;
printf("%d ",i);
visited[i]=1;
for(j=0;j<n;j++){
    if(visited[j]==0&&G[i][j]==1)
        dfs(G,j);
} 
```

这里我们使用变量 n 作为 Graph 中的顶点数。G 是成本邻接矩阵。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T22:05:13.747

我认为最简单的方法是，就像在迷宫中你总是向左走。如果您来自 n 个节点，则按递增顺序循环进入下一个节点。

我只是不知道你怎么知道你来了 :D 但很酷的是你不需要额外的空间和标记。

**编辑**
示例

```
 5
   / \
  7   3
 /\   /\
4  1 6  2 
```

那时是

```
......1
..1....
.1..11.
1.....1
..1...1
..1....
1..11.. 
```

所以从 5 开始的顺序是 3 6 3 2 3 5 7 1 7 4 7 5 3# 因为你从 5->3

正如我所说，如果你在节点上，你会根据你来自的节点继续下一个节点。您要访问的下一个节点是前一个节点（不是您从当前节点）的下一个数字。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-03T22:49:47.423

我想你可以通过维护一个堆栈和一个访问列表并使用一个while循环来做到这一点：Visited is a bool[]，初始化为在所有位置都保持假，我假设调用 G[node,neighbour]以某种方式返回一个布尔值，说明从节点到邻居是否存在边。（隐式比较 1 或简单地使邻接矩阵保持布尔值）
堆栈保存节点的索引：

```
dfs(G,i){
    Initialize Stack
    Current = i
    PossibleEdge = 0
    Visited[Current] = true  //You have visited the starting node
    Do {
        While (PossibleEdge < count) {
            if (G[Current,PossibleEdge] && NOT Visited[PossibleEdge]){
                Stack.Push(Current)      //Save state
                Current = PossibleEdge   //Continue with the child node
                Visited[Current] = true 
                PossibleEdge = -1        //So that it will be incremented to 0
            }
            PossibleEdge++
        }
        PossibleEdge = Current           //Continue to next row of "parent node"
        Current = Stack.Pop()            //Get parent node back
    } While (Stack contains nodes)
} 
```

我确信它可以优化（并且看到我累死了，可能存在一些逻辑错误），但如果基本过程有意义，那就是一个开始！
**编辑：**澄清，并添加这个提示：递归可能更容易；）

# asp.net-mvc - 如何从 MVC Razor 视图中的模型获取 ID

> ID：11803802
> 
> 赞同：0
> 
> 时间：2012-08-03T21:53:22.613
> 
> 标签：asp.net-mvc, razor

我有一个带有 ViewModel 的 Razor 视图，我需要从模型中提取 ID 值，以便动态创建一个 ActionLink。ID 也是用于获取视图的参数。这似乎应该很容易，但我找不到一个例子。

编辑：

我正在使用 MVC 3

我希望能够使用模型的 ID 创建一个 ActionLink。所以我想做的是这样的：

```
$(document).ready(function () {
**var id = @Model.ID;**  //here is where I need help
var link = $("#PackingList");
var href = link.attr("href");
href = href.substring(0, href.length - 1);
href = href + id;
link.attr("href", href);
}

 @Html.ActionLink("Print Shipping Report", "ShippingPackingList", new { id = 0 }, new { id = "PackingList" }) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T22:26:15.133

获取该 ID 的最简单方法是将其放入 HTML 中的隐藏输入元素中，然后在 javascript 中获取该值。

HTML：

```
@Html.HiddenFor(x => x.ID, new { id = "coolIdForThisHiddenElement" }) 
```

关于 Html.HiddenFor 的文档：http: [//msdn.microsoft.com/en-us/library/ee703622.aspx](http://msdn.microsoft.com/en-us/library/ee703622.aspx)

然后在您的 javascript 中获取该值：

```
var id = $('#coolIdForThisHiddenElement').val(); 
```

编辑：看起来你在你的 javascript 中太努力了。您应该能够在 Html.ActionLink 代码中包含模型的 ID。你应该能够做到这一点：

```
@Html.ActionLink("Print Shipping Report", "ShippingPackingList", new { id = Model.ID }, new { id = "PackingList" }) 
```

注意 id = Model.ID 而不是 id = 0？这会将模型中的 ID 放在生成的链接中。

# html - 开发现代 J2ME 应用程序的最佳方式是什么？

> ID：11803804
> 
> 赞同：5
> 
> 时间：2012-08-03T21:53:44.903
> 
> 标签：html, user-interface, java-me

在决定如何继续设计 J2ME 应用程序的 UI 时，我一直很困惑。基本上我已经完成了算法、函数和数据库的工作，但我无法为它带来一个好的 UI。我有两个想法：

1.  让它成为一个 j2me 应用程序，它可以轻松地帮助我利用 Web 压缩技术实现快速和廉价的互联网访问（核心需求）。

2.  让它成为一个网络应用程序，让它成为一种浏览器应用程序，只会加载在线应用程序。这个选项显然可以轻松地不用担心升级和 UI 功能，但是互联网成本和速度是限制因素。

我正在尝试使用第一个选项，而我的第一个方法是 LWUIT，但沿着这条线它变得很重，我什至在调试应用程序时遇到了麻烦，更不用说在小型手机上部署它了。事实上，在线搜索使问题变得更糟。似乎对 J2ME 应用程序的兴趣急剧下降，而且大多数*关于*它的讨论已经过时。事实上，很多人确实问过我同样的问题，我在网上看到了极具视觉吸引力的 J2ME 应用程序，但我似乎无法弄清楚它们*的“秘密”*。

***所以*** 我想听听有人开发了一个*漂亮的*J2ME 应用程序吗？**开发一个外观漂亮的小应用程序的最佳方法是什么？** *具体来说*，我想链接到有用的工具和文章。谢谢！！

* * *

## 编辑：当前的发展...

[在对如何最好地开发标准的*现代*J2ME 应用程序](https://stackoverflow.com/questions/11803804/)进行了长时间的思考和研究之后，我突然意识到最好的选择是一个统一的平台，也许这将使我能够轻松地将 HTML5 应用程序移植到 J2ME。然而，到目前为止我的搜索是徒劳的。我发现的唯一有趣的东西是[CodeNameOne](http://www.codenameone.com)和[Java 的 Avatar One](http://www.theserverside.com/feature/Project-Avatar-One-HTML5-Strategy-to-Rule-Them-All)。然而，CodeNameOne 并没有真正提供我一直在寻找的解决方案，而 Oracle 似乎仍然忙于 Avatar One*一年多*。我想知道我是否遗漏了什么。看到了[开源 LWUIT的功能](http://lwuit.java.net/)，我认为开发一个 HTML5 渲染器不会太难，这将有助于将基于 HTML5 的应用程序移植到对 HTML5 有很好理解的 J2ME。**那么我有什么遗漏吗？我可以参与的任何正在进行的开源项目还是什么？**

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-04T12:58:46.103

已经经历了我之前在这里的建议，我不一定推荐它，但你问了。

* * *

如果您想要一个看起来与使用 LWUIT 开发的一样好的应用程序，但在一个较小的 jar 文件中并且更容易为您调试，一种解决方案是根据在 LCDUI 上绘制的基本几何形状和图像开发 GUI `Canvas`。

为了实现这 3 个目标，您将牺牲可扩展性和开发时间。

GUI 将变得更容易为您调试，因为您将在编写代码时学习代码，而不必学习 LWUIT。

您要么花时间尽早设计 GUI 引擎，要么花更多时间在以后重写代码。

与使用 LWUIT 相比，将应用程序移植到不同的屏幕尺寸需要更多的工作。

如果其他人在您的代码上工作，您将不得不教他们如何工作。

任何 GUI 修改都可能意味着必须更新底层代码以添加或删除组件。

GUI 的通用性越低，应用程序 jar 就越小。您可能最终放弃了面向对象编程的一些好处，只是为了减小应用程序的大小。

* * *

就现代方法而言，JavaME 并不真正适用于测试驱动开发方法，但有一种近似它的方法可能会带来一些好处。

编写许多微小的测试 MIDlet。它们中的每一个都与最多一个可能的用户交互。它们都为您的算法、多线程、存储、网络共享通用引擎代码......

通用代码将用于最终产品。

完成所有“单元测试”后，开始组合它们。每种组合仅用于测试 2 个较小的功能集之间的交互。

制作一个由更大的 MIDlet 组成的金字塔，并在此过程中对其进行测试。

金字塔的顶端是您一直想要生产的 MIDlet。

* * *

不幸的是，大多数 JavaME 测试都是手动完成的。

有两种方法可以对 MIDlet 执行一些自动化测试。

*   使用 Keynote Device Anywhere 脚本工具。设置这将非常耗时，并且使用该服务不是免费的，但测试会尽可能接近真实世界的条件，而无需购买手机及其 SIM 卡。

*   使用 Microemulator 的源代码并对其进行修改，以便自动运行您的测试 MIDlet 并报告测试结果，大概是作为 Jenkins 实例的一部分。使 Microemulator 适应您的需求可能不是一项简单的开发任务，您需要先测试新的自动化系统，然后才能在 MIDlet 上运行第一个测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T09:10:32.417

我终于决定用 HTML5 编写一个移动网络应用程序。启用 HTML5 缓存后，您可以为大多数手机进行开发，但会牺牲原生功能。如果没有任何变化，我计划在未来为每种类型的移动操作系统开发不同的应用程序。

# javascript - 子转换继承什么？

> ID：11803807
> 
> 赞同：1
> 
> 时间：2012-08-03T21:53:50.143
> 
> 标签：javascript, svg, d3.js, transitions

在关于过渡的 d3 文档中，它说这`transition.select(selector)`大约相当于`selection.select(selector).transition()`说子过渡版本从当前过渡继承缓动、持续时间和延迟。

我使用这两种方法的观察结果是，子转换与父转换的关系实际上必须比文档所暗示的要深一些。我所看到的是，如果我有 2 个彼此非常密切相关的过渡，我*必须*使用子过渡来让两个过渡完美地一起运行。

这是一个人为的例子来说明这一点（尽管这很简单，它可能不会在现实中显示问题）。假设我的 DOM 中有这个：

```
 <g>
        <circle></circle>
    </g> 
```

过渡 1 继续运行`<g>`并应用“transform=translate(100,0)”来水平移动它。

过渡 2 继续运行，`<circle>`并通过应用“transform=translate(-100, 0)”将其以另一种方式水平向后移动来简单地反转这一点。

预期的结果是圆圈根本不动。但我实际看到的取决于过渡是如何设置的。如果我使用配置了相同属性的 2 个单独的过渡持续时间等，我会看到圆圈似乎略有抖动。这大概是因为传递到转换插值器的中间值稍微不同步。

但是，如果我使用子转换来设置 2 个转换，它看起来很完美。

我的问题是关于过渡和子过渡之间的关系。使用单独的转换与使用子转换在时序和插值方面有什么区别？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T23:19:37.993

子转换继承：

*   过渡 id（允许它们与父过渡同时进行）
*   参考时间（将它们与父转换同步）
*   缓动函数
*   每个节点计算的延迟
*   每个节点计算的持续时间

查看[transition-select.js](https://github.com/mbostock/d3/blob/master/src/core/transition-select.js)和[transition-selectAll.js](https://github.com/mbostock/d3/blob/master/src/core/transition-selectAll.js)以供参考。在您的情况下，这是同步 g 和 circle 元素上的转换所需的参考时间。

~~这是一个公共属性 ( `transition.time`)，因此如果您想同步两个转换而不通过[transition.transition](https://github.com/mbostock/d3/wiki/Transitions#wiki-transition)或[transition.select](https://github.com/mbostock/d3/wiki/Transitions#wiki-select)创建它们，您可以显式设置它。但我看不出有任何理由不在这里使用子转换。~~

编辑：从 D3 3.0 开始，您可以使用[transition.each(callback)](https://github.com/mbostock/d3/wiki/Transitions#wiki-each)创建继承过渡参数的过渡。这类似于transition.select 和transition.selectAll，不同之处在于您可以更灵活地选择元素来创建过渡。

# jquery - 带有堆叠 div 的流动布局

> ID：11803810
> 
> 赞同：-1
> 
> 时间：2012-08-03T21:53:57.513
> 
> 标签：jquery, html, css

我正在尝试建立一个包含两列的网站。左列有两个 div，右列有四个 div。每个 div 可以有任何高度。垂直滚动条不应该出现在主体上；仅在任一列中的单个 div 上。每个 div 都应该尽可能小而不滚动，直到它们占据了列中的所有垂直空间。在这种情况下，内容最多的 div 首先开始滚动，内容第二多的 div 开始第二次滚动，依此类推。

CSS 布局将是理想的，但 jQuery 也很好用。

**编辑**

我正在寻找它来做这样的事情：http: [//jsfiddle.net/CkgxD/](http://jsfiddle.net/CkgxD/)。（垂直调整窗口大小以获得一个想法。）我现在有一个 Javascript 解决方案，它......比我希望的更复杂。随意指出任何不良做法、代码异味等——我还是 Web 开发的新手。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T22:04:20.110

```
body {
  overflow: hidden;
}

div.columns {
  width: 50%;
  float: left;
  overflow: hidden;
}

div.inside {
} 
```

# sql-server - 使用无线网卡但连接到 LAN 的电缆工作正常时，ADO 连接到 SQL Server 失败。使用 lpc:?

> ID：11803814
> 
> 赞同：2
> 
> 时间：2012-08-03T21:54:13.687
> 
> 标签：sql-server, sql-server-2008, ado.net, ado, wireless

使用 ADO 连接到 SQL Server 的默认实例的 C++ 销售点应用程序在使用无线网卡进行联网的平板电脑上使用该应用程序时失败。

连接 LAN 电缆后，该应用程序在平板电脑上运行良好。

测试人员发现另一个使用 SQL Server 的服务器应用程序也有类似的问题，直到他们将设置更改为使用与 SQL Server 实例的共享内存连接而不是 TCP 连接。

我们使用的连接字符串如下：

```
"Provider=MSDASQL;DRIVER={SQL Server};SERVER=(local);DATABASE=%s;UID=; Password=;" 
```

阅读此网页，似乎为了使用共享内存连接，`SERVER=(local)`需要指定关键字，`SERVER=lpc:(local)`但我不确定。

该网页是[Microsoft MSDN 中的 SqlConnection.ConnectionString 属性](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlconnection.connectionstring.aspx)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T12:44:05.633

在更改销售点应用程序和库存应用程序的连接字符串以使用`SERVER=lpc:(local)`关键字/值后，测试团队在使用无线蜂窝卡时不再发现问题。

所以 lpc: 强制使用共享内存。

另请参阅有关[ADO 错误 16389](https://stackoverflow.com/questions/11810133/ado-error-16389-with-local-access-sql-server-database-connection-failing-when-u)的此问题。

**解决方案另一个组件的附录**（2016 年 10 月 24 日）

在使用我们销售点的现场站点中，我们还使用 Datacap Systems NETePay 服务器来处理电子支付交易。

由于客户在销售点配置错误，经过纠正，我们最近发现NETePay服务器也遇到了类似的问题。DSI Client-X 控件的 XML 响应是“错误”，错误代码为 001501，错误文本以“ScratchWrite 期间的数据库错误”开头。

记住这个问题和解决方案，我们修改了 Datacap Systems SQL Server 实例的设置，通过将 TCP/IP 从“启用”更改为“禁用”来更改“DATCAPINSTANCE 的协议”。进行此更改后，客户不再看到错误。

# iphone - 内存管理数组

> ID：11803815
> 
> 赞同：0
> 
> 时间：2012-08-03T21:54:15.460
> 
> 标签：iphone, objective-c, ipad

我在应用程序中创建了几个数组，例如：

```
NSString *ItemsA[91];
 int GroupRep[11];
 double TaxR[16];
 short InputT[200];
 BOOL tmpEx[20]; 
```

并且需要这些结构通过应用程序可用，直到应用程序结束。我的问题是：我。我需要明确分配 NSString 的数组还是可以以这种方式初始化每个数组单元格：例如 ItemsA[10] = @"use option1"。

ii. 我需要释放或解除分配上述任何数组吗

iii. 我知道如果我没有专门使用 alloc，那么 iOS 将自动执行保留/释放操作。如果是这样呢：

```
UITapGestureRecognizer *gestur1 = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(dispR)]; 
```

同样，我正在创建一个类：

```
 myClass=[[PieClass alloc]initWithFrame:CGRectMake(1+ipX, ipY, 320, rView.frame.size.height)];
    ...
    [myClass release] 
```

这个班级分配他自己的东西。我需要像上面那样释放每个班级还是只释放整个班级就足够了。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T22:32:15.013

一般来说，不要使用语言数组来存储对象。使用`NSMutableArray`实例；它们的开销相对较小（可能无法衡量），而且更自然。

您还需要将任何值存储在可本地化的文件中以供显示。因此，您需要加载所述文件，并且再次将它们存储在 NSArray 中要容易得多。developer.apple.com 上有大量关于该主题的文档。

最后，这看起来像您的应用数据。因此，您可能真的希望有一个适当的模型层来管理所述数据。有一天，您可能希望重构应用程序以从服务器中提取所述数据，并且拥有适当的模型层将帮助您做到这一点。

请注意，您通常可以将模型（数据管理的东西）从应用程序委托中挂起。或者您可以通过某个地方的单例访问它。

这是一个高级别的答案，其目标是尝试将您引导到一条更符合预期模式的路径。

# c - 将shell参数传递给mac osx上的c程序

> ID：11803818
> 
> 赞同：0
> 
> 时间：2012-08-03T21:54:24.423
> 
> 标签：c, macos, shell

出于教育目的，我正在尝试运行一个使用缓冲区溢出来覆盖函数指针地址的程序。我已经确定了要使用 nm 覆盖的函数指针的位置。然后我想将新函数指针的地址传递给 argv。我正在尝试使用

perl -e '打印 "aa\xc0\x0c\x00\x00\x01\x00\x00\x00\"'| ./a.out

其中 \xc0\x0c\x00\x00\x01\x00\x00\x00\ 是新函数指针地址的小端序，而 aa 只是填充字符缓冲区。问题是这似乎没有将输出通过管道传输到 a.out，因为 argc 始终为 1。我也尝试过

perl -e '打印 "aa\xc0\x0c\x00\x00\x01\x00\x00\x00\n"' > a.bin cat a.bin - | ./a.out

并且 argc 仍然是 1。

我附上了我的程序的副本，以便于跟踪。还有一种更简单的方法可以将格式化的字节直接传递给 ac 程序而不是使用 perl，而不改变我程序的当前结构？

那么我可以做 ./a.out 并让它运行吗？

谢谢

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

typedef struct user_s{
    char name[2];
    void (*print_name)();
}user;

user a;

void print_name1(){
    printf("hello\n");
}

void print_name2(){
    printf("hi\n");
}

void usage(char * msg){
    printf("usage: %s <name>\n", msg);
}

void fill_name (char * name_to_fill, char *filler){
    int i, len;
    len = strlen(filler);
    printf("length of filler is %d\n", len);
    for (i = 0 ; i < len; i ++){
        *(name_to_fill + i) = *(filler+i);
    }
}

int main(int argc, char * argv[]){
    printf("argc = %d",argc);
    if (argc != 2){
        usage(argv[0]);
        return 0;
    }
    a.print_name = print_name1;
    a.print_name();
    fill_name(a.name, argv[1]);
    a.print_name();
    return 1;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T22:12:09.750

您将命令行参数与标准输入混淆了。你的命令：

`perl -e 'print "aa\xc0\x0c\x00\x00\x01\x00\x00\x00\"'| ./a.out`

将写入程序的标准输入。如果您想做与命令行参数相同的事情，请尝试：

`perl -e 'print "aa\xc0\x0c\x00\x00\x01\x00\x00\x00\"'| xargs ./a.out`

见：[http ://ss64.com/bash/xargs.html](http://ss64.com/bash/xargs.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T22:31:29.480

就像约翰说的那样，您将参数与标准输入混淆了。要将程序的输出作为参数传递，您可以通过将其包装在中来使用命令替换`$(command)`，因此对于您的示例，您应该这样做

```
./a.out $(perl -e 'print "aa\xc0\x0c\x00\x00\x01\x00\x00\x00\"') 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-03T22:49:47.270

使用 bash 你可以这样做：

```
./a.out $'aa\xc0\x0c\x00\x00\x01\x00\x00\x00' 
```

# ios - 使用 DPI 更改的 Flex 移动尺寸和定位

> ID：11803819
> 
> 赞同：0
> 
> 时间：2012-08-03T21:54:31.053
> 
> 标签：ios, actionscript-3, apache-flex, air, dpi

好的，我现在正在为 iOS 构建一个 Flex Mobile 项目。它是使用 ANE（本机扩展）的原型视频播放器。稍后将在更大的项目中使用视频播放器。

现在，我遇到的问题是大小和定位，我相信问题是因为我为项目设置了 160 的 applicationDPI。

这是正在发生的事情。ANE 本质上是一个美化的 StageWebView，它内置了大量的额外功能，并且不提供 GUI（主要使用 StageWebView）。该项目位于 StageWebView 等全局空间中，无论我尝试什么，我都无法正确定位和调整大小。从本质上讲，这是决定播放器大小和位置的原因

```
this.height = 50% of stage
this.width = 50% of stage
this.globalPoint:Point = this.localToGlobal(new Point(0,0));

this.viewPort = new Rectangle (this.globalPoint.x,this.globalPoint.y,this.width,this.height - 35); //35 = height of controls
this.videoPlayer = new VideoPlayer(this.stage,this.viewPort); //VideoPlayer(stage:Stage,viewPort:Rectangle) 
```

现在，在我看来，这看起来很完美。它不在显示列表中，但对最终用户来说，它看起来就像是。它会一直粘在父类的 0,0 上（当然，在 Resize 函数的帮助下），视频将是适当区域的大小。

我错了。在我的 Retina iPad 上，它的位置很远，而且尺寸要大得多。在收集了大量数据并进行数学运算后，我发现了一个常数 4/3，一切似乎都偏离了。iPad 的 DPI 变化是 3/2 (160 -> 240)，所以我认为这不是问题。

我还想出了这个简单的方程式来补偿 DPI 偏移。

```
newValue = (oldValue / (DeviceManager.applicationDPI / FlexGlobals.topLevelApplication.applicationDPI) ); //DeviceManager.applicationDPI is a static getter that returns either 160, 240, or 320 based on Adobe's predefined ranges 
```

我还没有在 iPad 1/2 或 iPhone 上测试过这个，但我担心我的魔法常数实际上只是被考虑的纵横比。

有谁知道为什么定位都搞砸了？这不是 localToGlobal，因为即使手动输入本应有效的值也会导致灾难。

# jquery - jQuery - 我将如何替换

> ID：11803822
> 
> 赞同：0
> 
> 时间：2012-08-03T21:54:36.690
> 
> 标签：jquery, class, replace

希望这是一个快速的问题，因为我知道每个人都很忙，我很感激此刻我能得到的任何建议。

我正在尝试使用 jQuery 用前面的嵌套类名替换正在进行的类名。我的第一个问题是我要捕获的类（class2random_number）嵌套在“class1”中，而前面的不是（class3）。

第二个问题是嵌套在“class1”中的嵌套类名（class2random_number）具有预定的类名，但以随机数结尾。我想用完整的随机数查找并捕获 class2random_number 的名称，并将“class3”替换为“class2random_number”。

例如以下几行：

```
<p class="class1"><span class="class2random_number">content_stays_the_same</span></p>
some content goes here
<span class="class3">content_stays_the_same</span> 
```

如果这看起来和听起来很复杂，我很抱歉，但确实如此。至少对我来说。如果有人能给我任何建议，那就太好了。我的 jQuery 技能非常新手，但我正在尝试尽可能多地掌握。感谢您的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T22:00:30.630

像这样的东西？

```
var cls = $('.class1 span').attr('class').replace('class2', "")
$('.class3').attr('class', cls) 
```

[http://jsfiddle.net/ZRze3/1/](http://jsfiddle.net/ZRze3/1/)

# jquery - jQuery 适用于 jsFiddle 但不适用于 localhost

> ID：11803827
> 
> 赞同：0
> 
> 时间：2012-08-03T21:55:00.087
> 
> 标签：jquery, jquery-ui, jquery-plugins, jquery-animate

我不明白发生了什么。我创建的最后一个代码在 jsFiddle 的控制台中运行良好，但是当我在 localhost 上测试它时在 Firefox 中不起作用。

这是一些示例代码：它在 localhost 上不起作用，而在 jsFiddle 上起作用，我看到了代码，但没有看到任何不好的地方。

```
<html>
<head>
<script src="http://code.jquery.com/jquery-latest.js"></script>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.4/jquery.min.js"></script>
<script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/jquery-ui.min.js"></script>

<style>
#boton
{
width:200px;
height:30px;
border:1px solid;
background-color:#cccccc;
}

.botonclass
{
width:250px;
height:300px;
border:1px solid;
background-color:#FF0000;
}
</style>

<script>
$(document).ready(function() {

$("#boton").mouseover(function(){
$(this).addClass("botonclass",1000);
});

});
</script>

</head>

<body>

<div id="boton">Hello</div>

</body>
</html> 
```

有人可以在他们的计算机上测试这个并告诉我你是否得到相同的结果（代码在本地主机上不起作用）？感谢和问候

编辑：应该运行的代码是这样的：`$(this).addClass("botonclass",1000);`--我在提供的原始代码中添加了一个警报，以检查鼠标悬停处理程序是否正在运行，但是这行似乎没有运行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T22:02:03.647

本地主机是什么意思？您是否正在运行 Apache，或者您只是将其保存为 HTML 文件并且您是否使用 Firefox 打开它？

如果库是本地存储的，而不是从 Google Api 或 jQuery.com 下载的，也许会有所帮助。也许您的防火墙正在阻止来自本地存储文件的外部请求。运行本地服务器（例如 WAMPserver 的 XAMPP）将解决此问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T22:00:52.607

对我有用，将鼠标悬停在框上后，我收到了警报。

将所有 JavaScript 下载到磁盘并使用它而不是远程位置来检查它是否对您有帮助。

# jquery - 使用 jquery 查找选定项目的 mvc 列表框

> ID：11803832
> 
> 赞同：3
> 
> 时间：2012-08-03T21:55:16.280
> 
> 标签：jquery

我有一个视图和一个循环，在其中呈现部分视图。使用局部视图，我有一个多选列表框。因此，根据循环中项目的计数，可能有 (n) 个列表框。

我的目标是从第一个列表框中获取所有选定的项目（如果有），并在剩余的列表框中预先选择它们。我不是要附加到剩余的列表框，而是在第一个中选择的任何内容，我都会在剩余的列表框中选择。所有列表框都将包含相同的项目。

我面临着仅从第一个中找到所选索引或项目的困难，然后我将在剩余的部分中进行预选，如果我可以在第一个中获取所选项目的索引会有所帮助。它提供所有列表框中的选定项目。请帮忙：

局部视图中的列表框删除

```
 @Html.ListBoxFor(model => model.ServiceTypes,
           new MultiSelectList(RunLog.Domain.Lists.GlobalList.PartsServiceTypes(), "ID", "Name"),
           new {
               style = "width: 200px; height: 80px;",
               id = "lstbox",
               name = "listbox"
           }) 
```

呈现功能的按钮

```
<input id="button" type="button" class="art" onclick="dosomething()" name="broadcast"  value="+" /> 
```

JS功能：

```
function broadcast() {
    //var element = $('select[multiple]'); This gives me access of all listboxes
    // var firstListBoxSelected = $('select[multiple][1] option:selected').text(); t
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-03T22:04:33.513

在您的示例中，您为列表框提供了“lstbox”的 ID。您可以使用它来使用 jQuery 查找“列表框”：

```
var box = $('#lstbox'); // or $('select[multiple]:first') for just the first one 
```

从那里，您可以修改代码以过滤到仅选定的选项：

```
var selected = $('#lstbox option:selected'); 
```

最后，为了获取索引，我们再次更改它并添加几行代码：

```
var selectedIndices = []; // create an empty array
$.each($('#lstbox option:selected'), function(index, value) { // loop over each option
    selectedIndices.push(index); // add the index to the array
}); 
```

或者稍微不同的方法，去掉`:selected`你的选择器，而是手动检查是否选择了元素（在性能方面可能会更好）：

```
var selectedIndices = [];
$.each($('#lstbox option'), function(index, value) {
    if (this.selected) { // 'this' is the current DOM element, same as 'value'
        selectedIndices.push(index);
    }
}); 
```

然后您可以使用`selectedIndices`预选剩余的，但首先我们必须找到它们：

```
var otherBoxes = $('select[multiple]:not(:first)'); // not the first one
// or
var otherBoxes = $('select[multiple]:gt(0)'); // greater than the 0th one 
```

然后更改他们选择的选项：

```
var numSelected = selectedIndices.length;
$.each(otherBoxes, function() {
    for (int i = 0; i < numSelected; i++) {
        this.options[selectedIndices[i]].selected = true;
    }
}); 
```

**编辑：[工作 jsFiddle 示例](http://jsfiddle.net/consultcory/5gMCh/6/)**

我的 jsFiddle 解决方案如下所示（我组合了循环，因此您只需迭代一次选择元素）：

```
$(function() {
    var selectedIndices = [];
    $.each($('select[multiple]'), function(sIndex, sValue) {
        if (sIndex == 0) {
            $.each(this.options, function (oIndex, oValue) {
                if (this.selected)
                    selectedIndices.push(oIndex);
            });
        } else {
            for (var i = 0; i < selectedIndices.length; i++) {
                this.options[selectedIndices[i]].selected = true;
            }    
        } 
    });
}); 
```

# struts2 - 在 Glassfish 中部署 Struts 2 和 Jersey

> ID：11803837
> 
> 赞同：2
> 
> 时间：2012-08-03T21:55:28.930
> 
> 标签：struts2, glassfish, jersey

我试图在 Glassfish 上的同一个 WAR 文件中部署 Jersey 1.13 和 Struts 2。

我正在使用一个非常旧的 Glassfish 版本，不幸的是我被困在这个版本上（版本 = Sun Java System Application Server 9.1_02）

Struts 2 配置按照文档。问题是过滤器将拦截所有 url 并尝试通过 Struts 2 配置处理它们。我的问题是如何在与 Struts 2 应用程序相同的战争中部署 Jersey（或任何 servlet）？

下面是我正在使用的 web.xml 文件。

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app version="2.5" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd">

<servlet>
    <servlet-name>JerseyServletAdaptor</servlet-name>
    <servlet-class>com.sun.jersey.spi.container.servlet.ServletContainer</servlet-class>
    <init-param>
        <param-name>com.sun.jersey.config.property.packages</param-name>
        <param-value>com.example.portal.api</param-value>
    </init-param>
</servlet>

<servlet-mapping>
    <servlet-name>JerseyServletAdaptor</servlet-name>
    <url-pattern>/helloworld</url-pattern>
</servlet-mapping>
<listener>
    <listener-class>org.apache.struts2.tiles.StrutsTilesListener</listener-class>
</listener>

<context-param>
    <param-name>org.apache.tiles.impl.BasicTilesConatiner.DEFINITIONS_CONFIG</param-name>
    <param-value>tiles.xml</param-value>
</context-param>

<filter>
    <filter-name>struts2</filter-name>
    <filter-class>com.example.portal.web.actions.WLSessionFilterDispatcher</filter-class>
</filter>

<filter-mapping>
    <filter-name>struts2</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping>

<welcome-file-list>
    <welcome-file>/jsp/index.html</welcome-file>
</welcome-file-list>

</web-app> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T00:21:54.807

我能够按如下方式解决此问题：

在 web.xml 中

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app version="2.5" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd">

<servlet>
    <servlet-name>JerseyServletAdaptor</servlet-name>
    <servlet-class>com.sun.jersey.spi.container.servlet.ServletContainer</servlet-class>
    <init-param>
        <param-name>com.sun.jersey.config.property.packages</param-name>
        <param-value>com.example.portal.api</param-value>
    </init-param>
</servlet>

<servlet-mapping>
    <servlet-name>JerseyServletAdaptor</servlet-name>
    <url-pattern>/api/*</url-pattern>
</servlet-mapping>

<filter>
    <filter-name>struts2</filter-name>
    <filter-class>com.example.portal.web.actions.WLSessionFilterDispatcher</filter-class>
</filter>

<filter-mapping>
    <filter-name>struts2</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping>

</web-app> 
```

在 struts.xml 我在元素下添加了这个

```
<constant name="struts.action.excludePattern" value="/api/.*" /> 
```

URL 仍然首先发送到 struts 框架，但由于上述 excludePattern 而被忽略。然后，这允许我的 servlet 映射处理 URL 并将其传递给 Jersey 框架。

这种方法确实意味着您必须使用 api（或您定义的任何内容）为您的 Jersey URL 添加前缀，例如

`http://<domain-name>/api/resource/id`

这一直有效，直到您将安全性添加到组合中。问题来自希望对 Struts 使用基于 FORM 的身份验证，对 Jersey 使用基本身份验证。不幸的是，web.xml 只允许您为应用程序定义一个登录配置，这意味着我被困在 Struts 和 Jersey 中使用基于 FORM 的身份验证或基本身份验证。

鉴于此，我决定将 Jersey 应用程序部署在它自己的 WAR 中，这意味着我最终没有使用上述解决方案。好消息是，如果您不想使用不同的身份验证方法（或任何身份验证），上述方法确实适用于在同一个 WAR 中部署 Jersey 和 Struts 2。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-04T21:41:35.280

我有一个使用 Struts2 和 Jersey 的应用程序，我成功使用的方法是将 Struts2 过滤器映射到`struts.action.extension`：

网页.xml：

```
<filter-mapping>
    <filter-name>struts2</filter-name>
    <url-pattern>*.action</url-pattern>
</filter-mapping> 
```

struts.xml：

```
<constant name="struts.action.extension" value="action" /> 
```

或者，你可以给你的根 Struts2 命名空间一个像“/ui”这样的值，并给你的 Jersey 服务一个像“resources”这样的根路径，然后像这样映射到你的那些`web.xml`：

```
<filter-mapping>
    <filter-name>struts2</filter-name>
    <url-pattern>/ui/*</url-pattern>
</filter-mapping>

<servlet-mapping>
    <servlet-name>jersey</servlet-name>
    <url-pattern>/resources/*</url-pattern>
</servlet-mapping> 
```

# keymando - 如何使用 Keymando 配置文本替换？

> ID：11803839
> 
> 赞同：0
> 
> 时间：2012-08-03T21:55:38.157
> 
> 标签：keymando

我想使用 Keymando 进行简单的文本替换/拼写更正，例如。当我输入“js”时，我希望它扩展为“John Smith”。

Keymando 主页有一段简短的视频展示了这种功能——他们称之为缩写词——但我不知道如何配置它。我确实下载了 abbrev.rb 文件并将其放在我的 Keymando /plugins 目录中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T21:04:33.410

下载 abbrev 插件后，您是否设置了任何缩写？

```
abbrev 'nname', 'John Smith' 
```

# mysql - mysql，从一个字段复制到另一个字段

> ID：11803843
> 
> 赞同：0
> 
> 时间：2012-08-03T21:56:13.120
> 
> 标签：mysql, copy

我有一个 MySql 数据库，如果“phpbb_topics”字段为空，我想将“topic_last_post_subject”字段中的所有内容复制到“phpbb_topics”字段中。我想使用 phpMyAdmin SQL 查询工具来执行此操作。我对正确的语法不是很熟悉，这是正确的吗？

```
UPDATE `phpbb_topics` SET `topic_title`=`topic_last_post_subject`; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T21:58:03.420

您的查询将更新所有行。您只想更新空白的：

```
UPDATE phpbb_topics SET topic_title = topic_last_post_subject
WHERE topic_title IS NULL OR
      topic_title = ''; 
```

# ruby-on-rails - 为了欧洲的荣耀，禁止在 RoR 中自动创建会话

> ID：11803846
> 
> 赞同：8
> 
> 时间：2012-08-03T21:56:19.757
> 
> 标签：ruby-on-rails, session, cookies, session-cookies

我是 Ruby on Rails 的新手，但似乎每次新用户访问该网站时它都会创建一个新会话。问题是，创建会话涉及在用户的浏览器上放置一个 cookie，而问题是***cookie 在欧洲是非法的！！！***

一个对技术非常无知的指令要求用户必须事先同意放置在他们计算机上的任何 cookie，如果 Ruby on Rails 立即设置 cookie，我就没有机会获得同意。在第一次访问我的应用程序时，从网站功能的角度来看，cookie 可能没有任何用途，因此“默示同意”的借口在法庭上也将无效。

那么，是否可以将 RoR 应用程序配置为不自动创建会话？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T23:35:56.327

有一个库可以为您处理大部分内容：[rack-policy](https://github.com/peter-murach/rack-policy)

除非存在名为的 cookie，否则它将杀死您/rails 尝试设置的任何 cookie `rack.policy`。它还提供视图助手来告诉您当前是否启用了 cookie，以便您可以根据需要隐藏/调整横幅或功能。

您可能要注意，许多网站（例如英国广播公司）已采取正常使用 cookie 的方法，但会显示带有“继续使用本网站即表示您同意我们使用 cookie”字样的警告。 （带有更多信息的链接和不再显示警告的选项）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T22:51:18.983

在此处查看有关使用 Rack Middleware 删除会话和/或所有 cookie 的答案，因为它们正在出门：[Rails 3 disable session cookies](https://stackoverflow.com/questions/5435494/rails-3-disabling-session-cookies)

# ruby-on-rails-3 - 如何通过ActiveRecord告诉DataTable如何处理关联的数据表？

> ID：11803848
> 
> 赞同：2
> 
> 时间：2012-08-03T21:56:34.580
> 
> 标签：ruby-on-rails-3, datatables

我似乎找不到这个简单需求的答案：如何告诉 Rails 以及 DataTables 相关的数据表？这是基于[Railscast 340](http://railscasts.com/episodes/340-datatables?view=asciicast)的。（Ryan Bates 警告说服务器端处理更复杂；确实如此！）

我在 Rails 方面还没有太多经验，所以我还在学习各种 find() 方法，用于使用 Active Record 告诉 ROR 相关数据；但我的任务的本质是在 index.html.erb 视图文件中显示基因型，其中视图中的棘手部分是：

```
 def index
     respond_to do |format|
      format.html
      format.json { render json: GenotypesDatatable.new(view_context) }
    end
  end 
```

完整的 GenotypesDatatables 类见下文；这直接在 /app 文件夹下的一个新类中。

我需要显示/编辑来自三个模型的数据：基因型、gmarkers 和 gvision。我还需要显示来自 gsamples 和 gmarkers 的与基因型相关的两个模型的数据。

模型的构造如下：

```
class Gmarker < ActiveRecord::Base
attr_accessible :marker
has_many :genotypes, :dependent => :delete_all

...
class Genotype < ActiveRecord::Base
attr_accessible :allele1, :allele2, :run_date
belongs_to :gmarkers
belongs_to :gsamples
...
class Gsample < ActiveRecord::Base
belongs_to :gupload
has_many :genotypes, :dependent => :delete_all
attr_accessible :box, :labid, :subjectid, :well 
```

从网络服务器的此错误消息输出中可以看出，问题在于没有获得正确的数据关联：...

```
CACHE (0.0ms) SELECT COUNT(*) FROM "genotypes"
Genotype Load (10.5ms) SELECT "genotypes".* FROM "genotypes" ORDER BY allele1 asc LIMIT 10 OFFSET 0
Completed 500 Internal Server Error in 255ms

NameError (undefined local variable or method `f' for #<GenotypesDatatable:0x9833ad4>):
app/datatables/genotypes_datatable.rb:24:in `block in data'
app/datatables/genotypes_datatable.rb:21:in `data'
app/datatables/genotypes_datatable.rb:14:in `as_json'
app/controllers/genotypes_controller.rb:7:in `block (2 levels) in index'
app/controllers/genotypes_controller.rb:5:in `index'
... 
```

数据应该使用服务器端处理来准备，但这会导致一个 JSON 数组传递给 DataTables 中的 jQuery。JSON 数组在 DataTables 类中准备好：

```
class GenotypesDatatable
  delegate :params, :h, :link_to, to: :@view

  def initialize(view)
    @view = view
  end

  def as_json(options = {})
    # This is what feeds directly into DataTables
    {
      sEcho: params[:sEcho].to_i,
      iTotalRecords: Genotype.count,
      iTotalDisplayRecords: genotypes.total_entries,
      aaData: data
    }
  end

private

  def data
    genotypes.map do |genotype|
      [
        # Note: h is shorthand for html_escape
        h(Gmarker.find(f.gmarkers_id).marker),
        h(Gsample.find(f.gsamples_id).labid),
        h(Gsample.find(f.gsamples_id).subjectid),
        h(Gsample.find(f.gsamples_id).box),
        h(Gsample.find(f.gsamples_id).well),
        h(genotype.allele1),
        h(genotype.allele2),
        h(genotype.run_date)
      ]
    end
  end

  def genotypes
    @genotypes ||= fetch_genotypes
  end

  def fetch_genotypes
    genotypes = Genotype.order("#{sort_column} #{sort_direction}")
    genotypes = genotypes.page(page).per_page(per_page)
    if params[:sSearch].present?
      genotypes = genotypes.where("labid like :search or category like :search", search: "%#{params[:sSearch]}%")
    end
    genotypes
  end
... 
```

肯定会感谢这里的任何指示；感觉就像我在没有地图或手电筒的情况下迷失在丛林中！

谢谢，里克凯西

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T09:42:10.040

如你所知，我正在做类似的事情。我不会尝试更改可能会混淆问题的代码，而是将我的代码作为示例发布。我的表邻居包含关联。

```
class Neighbour < ActiveRecord::Base

  belongs_to :locality, :class_name => "Locality"
  belongs_to :neighbour, :class_name => "Locality"
  belongs_to :highway,  :class_name => "Highway"

  default_scope joins(:locality, :highway).order('localities.name')

end 
```

我认为 default_scope 在这个讨论中是无关紧要的。

我认为是 NeighborsDatatable 类中的相关代码：

```
def data
  neighbours.map do |neighbour|
    [
     neighbour.locality.name,
     neighbour.neighbour.name,        
     neighbour.highway.name, 
     neighbour.distance,
     neighbour.id
    ]
 end 
```

结尾

所以我不确定你需要做明确的发现。我的表格使用 DataTables 正确显示。希望这对另一个 ROR 新手有所帮助。

约翰

# html - 大型背景图片网站的移动网站

> ID：11803861
> 
> 赞同：1
> 
> 时间：2012-08-03T21:57:51.450
> 
> 标签：html, css, mobile, responsive-design

我有一个大的图像背景潜在客户生成页面[http://minkstock.com](http://minkstock.com)

我想让它与移动设备兼容，但不想加载我在桌面和平板电脑网站上用作背景的巨大图像。

这是防止它在手机上加载的最佳方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T22:03:22.263

您可以使用 css 媒体查询。

例子：

```
// this background will apply only for screen sizes between 320 and 480px
@media only screen 
   and (min-device-width : 320px) 
   and (max-device-width : 480px) {
     background-image: none; // or another image...
} 
```

更多信息： [http ://css-tricks.com/snippets/css/media-queries-for-standard-devices/](http://css-tricks.com/snippets/css/media-queries-for-standard-devices/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T22:06:04.730

正如@devundef 建议的那样，您可以利用媒体查询。但是，您的基本实现应该是用于媒体查询的移动体验，以使用全尺寸图像覆盖背景。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-03T22:46:49.240

@devundef 是对的。我们通常从 CSS 中调用背景图像。在这种情况下，CSS3 媒体查询就足够了。我也建议遵循这个规则。

可选（如果您不想采用 css 背景）：您是否检查过**Foresight.js**插件？它检测浏览器以及数据网络：[https ://github.com/adamdbradley/foresight.js](https://github.com/adamdbradley/foresight.js)

它为您提供了根据用户的浏览器和连接类型进行自适应图像替换的选项。好消息是您也不必删除背景，并且能够保持 UI 的一致性。

# ios - 尝试在 Titanium (iOS) 上注册本地通知时应用程序冻结并崩溃

> ID：11803874
> 
> 赞同：1
> 
> 时间：2012-08-03T21:58:51.877
> 
> 标签：ios, notifications, titanium, push

我正在尝试注册一个`scheduleLocalNotification`（钛上的 IOS），但是当我这样做时，应用程序崩溃了。

我在函数中使用 Kitchen Sink 示例。我不是在后台做的。

```
var notification = Ti.App.iOS.scheduleLocalNotification({
    alertBody:"Kitchen Sink was put in background",
    alertAction:"Re-Launch!",
    userInfo:{"hello":"world"},
    sound:"pop.caf",
    date:new Date(new Date().getTime() + 3000) // 3 seconds after backgrounding
}); 
```

我不知道发生了什么，因为 Kitchen Sink 示例运行良好。

通知有效，但应用程序在注册时关闭。

# jquery - Magento - Ajax 请求 - 返回空响应

> ID：11803876
> 
> 赞同：0
> 
> 时间：2012-08-03T21:59:05.227
> 
> 标签：jquery, ajax, magento

我正在一个客户网站上调试一些东西，这些东西有一个由别人开发的模块。它无法正常工作。

我对控制器有一个简单的 Ajax 调用：

```
jQuery.ajax({
    url : "http://www.site.com/quickview/index/cart",
    complete : function(data){
                    // data.responseText is empty here.
                    jQuery('span.topLinks').replaceWith(data.responseText);
                    // This returns the data object with statusText = "error"
                    console.log(data);
    }
}) 
```

在控制器中调用一个简单的动作：

```
 public function cartAction()
    {
        // This log call never fires
        Mage::log('foobar',null,'temp.log');
        $this->loadLayout();
        $Top = $this->getLayout()->getBlock('top.links')->toHtml();
        $this->getResponse()->setBody($Top);
    } 
```

问题是 Ajax 调用永远不会到达控制器。我在 cartAction() 中放置了一个 Mage::log 调用，但它永远不会被触发。

控制器确实设置正确，因为我可以直接浏览到 cartAction()，这将呈现我试图返回到 Ajax 调用的块（如果我回显它，它不会在这里回显）。

如果我放置在 Ajax 调用中：

```
console.log(data); 
```

它返回带有状态文本的对象：“错误”。

我已经尝试了我能想到的 Ajax URL 的每一种排列方式，绝对的、相对的、带有 index.php 的、不带 index.php 的等等。每次，data.responseText 只是一个空字符串。

有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T16:05:45.620

这终于解决了。该模块还为 Adminhtml 设置了一个控制器，该控制器使用相同的前端名称，因此可以直接浏览到控制器操作，但是当通过 Ajax 通过模板文件调用时，它不喜欢 http 到 https 的切换。

为管理控制器分配了一个不同的名称，一切都很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T10:36:47.257

首先，尝试将 URL 更改为标准的 Magento URL 并检查是否收到响应。至少你会知道问题是来自你的 jQuery 请求还是你的控制器本身。如果您可以直接在浏览器中访问控制器操作，那么您的模块就可以了。

# grails - javax.naming.NameNotFoundException 试图在 OC4J 中部署 Grails

> ID：11803877
> 
> 赞同：1
> 
> 时间：2012-08-03T21:59:18.317
> 
> 标签：grails, deployment, jndi, oc4j

### 环境

*   圣杯 2.0.4
*   OC4j 10.1.3

### 问题

当我的配置使用 jndi 时，我无法部署 grails 战争文件。我可以确保在“JNDI 浏览器”（oc4j 的管理）中查看的 OC4J 中创建了数据源并且可用。

我尝试将“setParentDataSources”设置为 true，以使 grails 应用程序继承默认应用程序的数据源，但没有成功。

例外是：

> 设置构造函数参数时无法解析对 bean 'dataSourceUnproxied' 的引用；嵌套异常是 org.springframework.beans.factory.BeanCreationException：创建名为“dataSourceUnproxied”的 bean 时出错：调用 init 方法失败；嵌套异常是 javax.naming.NameNotFoundException: java:comp/env/jdbc/pontomoduloweb not found in

所以我的问题是：我错过了什么吗？我可以以某种方式更深入地调试它吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T22:25:29.887

经过一番斗争，我在 OC4J 中找到了一个配置，它使数据源对所有部署的应用程序全局可用。

在`$OC4J_HOME\j2ee\home\config\server.xml`中，更改应用程序服务器标签添加选项`global-jndi-lookup-enabled`：

```
<application-server  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="http://xmlns.oracle.com/oracleas/schema/application-server-10_1.xsd"  application-directory="../applications"
 check-for-updates="adminClientOnly"
 deployment-directory="../application-deployments"
 connector-directory="../connectors"
 global-jndi-lookup-enabled="true"
 schema-major-version="10" schema-minor-version="0" > 
```

并且不要忘记标记在本地类路径中查找类的选项。

# javascript - typeof（未定义的变量）导致错误...？

> ID：11803880
> 
> 赞同：0
> 
> 时间：2012-08-03T21:59:42.510
> 
> 标签：javascript

```
alert(typeof QuizParser.Parser.otherdata['response_set']['answers']["slide_" + _index]['trt']);​ 
```

为什么？这不应该简单地提醒字符串`undefined`吗？如果这是错误的，我应该如何检查该变量是否已定义？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T22:05:21.580

该错误与 无关`typeof`，这是因为您试图访问未定义变量的属性：`QuizParser.Parser`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T22:06:42.507

当您使用`typeof`时，它将返回`"undefined"`未定义的变量，但在您的情况下，您实际上是在调用`typeof`. `QuizParser.Parser.otherdata`必须定义，以免`typeof`导致错误。例如，如果`x`未定义，`typeof(x)`则可以，但`typeof(x.something)`会导致错误，因为您尝试访问`x`未定义的内容（为了访问某些内容）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T22:12:48.830

好吧，如果您选择直接方式，这并不容易：您必须编写类似...

```
if (typeof QuizParser !== 'undefined' // to check whether the variable defined or not
    && QuizParser.Whatever            // if variable IS defined, we can check its property directly
    && QuizParser.Whatever.Property... 
) 
```

请注意，我们不能跳过“中间”链：如果属性不存在，它将被评估为未定义，下一步将抛出 TypeError: `Cannot read property ... of undefined`。

但是还有另一种方法（这在许多跨浏览器库中很常见） - 使用异常来捕获“丢失的链接”：

```
try {
  var flag = QuizParser.Whatever.Property.You.Like['equal']['to']['something'] !== undefined;
} catch(e) {}
if (flag) { ... }​ // processing goes here 
```

有了这个，您可以更多地模拟`isset`PHP 的行为：当且仅当设置了目标对象的端点属性（= not ）时，您的`flag`变量才会设置为。并且通过异常机制，您可以保证不会在您的客户端引发任何错误（完全停止 JS 解析），否则......`true``undefined`

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-08-03T22:07:05.173

这不是`typeof`问题所在。事实上，在`typeof`实际执行“typeof”部分之前，您正在尝试访问空对象的成员。例如，考虑这种情况（并注意它不是 javascript，但这是我试图理解的想法，而不是语言语法）

```
public class Test
{
    public string teststring;
} 
```

然后你做这样的事情：

```
Test nullTest; // null

if(typeof(test.teststring) != null) 
```

解析器在测试后看到点的第二秒，就会引发空引用错误，因为您实际上是在尝试调用 null.teststring。相反，您必须执行以下操作：

```
if(object != null && object.property != null && object.property.propertyOfTheProperty != null) 
//... 
```

以便在任何危险发生之前中断 if 语句的执行。如果了解`object`' 或`property`' 的空性对您很重要，您也可以这样做：

```
if(object != null)
{
    if(object.property != null)
    {
        if(object.property.propertyOfTheProperty != null)
        {
           //...
        }
    }
} 
```

# image - 如何从 pdf 文件中提取图像“集群”？

> ID：11803884
> 
> 赞同：2
> 
> 时间：2012-08-03T21:59:51.937
> 
> 标签：image, pdf, metadata, grouping

我的目标是从 pdf 中提取图像的“集群”。因此，如果两个或更多图像都相互接触，或者在 1-2 像素内，我希望将它们提取为具有透明背景的一张图像。理想情况下，Linux 解决方案将是最佳的。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T23:07:39.793

### 恕我直言，这对于一般情况是不可能的......

*从 PDF 页面中提取图像通常会将它们恢复为原始大小。但是，在 PDF 页面内，它们可能已嵌入应用了缩放或缩放因子。因此，每个图像在页面上可能具有不同的分辨率。*

*尽管**看起来**好像图像彼此“接触”以填充另一个矩形（或任何形状），但一旦提取它们，它们可能不再“适合”在一起。此外，图像的一部分可能会覆盖其他部分，并且在提取后，每个图像将再次以其完整尺寸可见。*

### ...除非您只是截取 PDF 页面的屏幕截图。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T07:30:06.343

我认为[Docotic.Pdf 库](https://bitmiracle.com/pdf-library/)可能是适合您情况的正确工具。

该库可以“按绘制”提取图像，即保留缩放/旋转。并且还检索每个绘制的图像位置和大小。

因此，您可以使用该库来检索在页面上绘制的图像并分析每个图像的坐标以查找/分组图像集群。

下面是一个示例代码，展示了如何提取“如画”的图像及其坐标。

```
public static void extractImagesAndCoordinates(string file)
{
    int imageIndex = 0;
    using (PdfDocument pdf = new PdfDocument(file))
    {
        foreach (PdfPage page in pdf.Pages)
        {
            PdfCollection<PdfPaintedImage> paintedImages = page.GetPaintedImages();
            foreach (PdfPaintedImage image in paintedImages)
            {
                Console.Out.WriteLine("Position {0}, {1}. Size {2}x{3}",
                    image.Position.X, image.Position.Y, image.Size.Width, image.Size.Height);

                string outImagePath = string.Format("image{0}.png", imageIndex++);
                image.SaveAsPainted(outImagePath, PdfExtractedImageFormat.Png);
            }
        }
    }
} 
```

免责声明：我为图书馆的供应商工作。

# android - 将字符串从 TextSwitcher 添加到数组

> ID：11803889
> 
> 赞同：2
> 
> 时间：2012-08-03T22:00:25.400
> 
> 标签：android, arrays, string

我想将当前显示的字符串从[`TextSwitcher`](https://developer.android.com/reference/android/widget/TextSwitcher.html)（字符串放在一个字符串数组中）放到另一个字符串数组中，我不知道我应该使用哪种方法，因为它`.getText`不适用于 textSwitcher。

如何在此 Activity 字符串数组中加载和添加现有但未使用的字符串？

我在网上找到了这个方法，为什么它不起作用？

```
Resources res = getResources();
String[] favorites = res.getStringArray(R.array.favorites);
String[] planets = res.getStringArray(R.array.planets_array);
String[] temp = new String[favorites.length+1];
System.arraycopy(favorites,0,temp,0,favorites.length);
temp[favorites.length] = planets[mCounter];
favorites = temp; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-04T01:36:34.557

`TextSwitcher`被实现为具有两个`TextViews`. 当您调用`TextSwitcher.setText()`时，它将调用`TextView.setText()`未显示的 TextView，然后使用可选动画在它们之间切换。

尽管 TextSwitcher 没有公开`getText()`方法，但可以检索当前显示的`TextView`子项，然后调用`getText()`它以获取显示的文本：

```
TextSwitcher textSwitcher = findViewById(...);
TextView currentlyShownTextView = (TextView) textSwitcher.getCurrentView();
String currentlyShownText = textSwitcher.getText().toString(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T22:18:32.510

[`TextSwitcher`](https://developer.android.com/reference/android/widget/TextSwitcher.html)没有提供`getText`方法。所以每次调用时都必须记住私有字段中的当前字符串`setText`。

```
class MyActivity extends Activity {
    String currentlyDisplayedText;
    String[] yourArray = new String[5];

    public void someMethod() {
        currentlyDisplayedText = "The new text";
        theTextSwitcher.setText(currentlyDisplayedText);
    }

    public void someOtherMethod() {
        yourArray[0] = currentlyDisplayedText;
    }
} 
```

# heroku - Heroku + Clojure（webnoir），如何做 lein clean？

> ID：11803895
> 
> 赞同：2
> 
> 时间：2012-08-03T22:01:13.217
> 
> 标签：heroku, clojure, leiningen, cloud9-ide, noir

我在 heroku 上托管了一个 webnoir 网站，在重命名命名空间和文件后，我在日志中收到以下错误：

> 警告：*强制*未声明为动态的，因此不可动态重新绑定，但它的名称暗示了其他情况。请注明 ^:dynamic *coercions*或更改名称。

我在网上找到了一些东西，说我应该尝试一个`lein clean`命令。有谁知道如何实现这一目标？Heroku 帮助没有为此指明命令。

如果我可以通过它做一些事情，我将使用 cloud9 作为我的 ide / heroku 集成。否则我也有 heroku 工具带。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T09:41:32.877

这个错误可能不是问题：这是因为用星号括起来的名称`*coercions*`应该是动态的，但`^:dynamic`如果您想动态重新绑定它，则没有所需的元数据标记。

除非您真的想动态重新绑定它，否则不会有任何问题。

由于这是一个编译器警告，我认为`lein clean`不会有任何区别 - 无论您是否使用干净的构建，您都会收到相同的警告。

# android - Android - 将图像保存到卡片会引发错误

> ID：11803896
> 
> 赞同：0
> 
> 时间：2012-08-03T22:01:38.300
> 
> 标签：android, file

我正在尝试将图像保存到卡中，但我收到错误“<文件路径>（是目录）”，尽管文件的绝对路径是正确的并且文件是图像而不是目录。我在这里做错了什么？我需要提到的是，我在将图像保存到磁盘之前创建了所有必要的目录，并且我拥有所有权限。

```
file.getAbsolutePath() //returns something like this:

/mnt/sdcard/app_name/folder/image.jpg 
```

..我这样构造图片文件：`File img = new File(dir, image.jpg);`

```
public static void saveImg(File pic, Bitmap picture) {
    try {
        FileOutputStream out = new FileOutputStream(pic);
        picture.compress(Bitmap.CompressFormat.JPEG, 100, out);
    } catch (Exception e) {
        e.printStackTrace();
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T22:13:56.203

第一步是检查你的 sd 卡，看看你是否真的有一个同名的目录（如果你在创建流之前在图像文件上调用 mkdirs()）。

然后，您可以尝试使用此代码来创建您的流：

```
String fileName = "image.jpg";
File path = Environment.getExternalStorageDirectory();
File file = new File(path, fileName);
path.mkdirs();
OutputStream os = new FileOutputStream(file); 
```

# ruby-on-rails-3 - RoR：在日志中禁用数据库查询

> ID：11803900
> 
> 赞同：1
> 
> 时间：2012-08-03T22:02:19.490
> 
> 标签：ruby-on-rails-3, mongodb, logging

有没有办法在 rails development.log 文件中禁用 MONGODB 日志？

目前以 Mongoid 作为驱动程序运行 rails 3.2.7。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T22:34:18.490

在 mongoid 2.2+ 中，您可以像这样在 mongoid.yml 文件中设置它：

```
development:
  ...
  logger: false 
```

不确定这是否仍然适用于 mongoid 3。您可能需要指定您的 mongoid 版本。

# video - 跟踪用户的视频带宽？

> ID：11803903
> 
> 赞同：1
> 
> 时间：2012-08-03T22:02:34.890
> 
> 标签：video, embed

我正在亚马逊 s3 中启动我的视频库。我将免费提供在任何网站中嵌入视频的权限。我只会为每个用户的带宽使用付费。如何计算每个用户使用的带宽？

如果亚马逊 s3 不适合。请告诉我。什么是最好的解决方案。

谢谢，努万T。

# jquery - 在href标签内查询访问img

> ID：11803908
> 
> 赞同：0
> 
> 时间：2012-08-03T22:03:09.527
> 
> 标签：jquery

嗨，我想用下面的“高级链接”类获取 a href 标记内图像的高度

```
<div id="gallery" class="content" style="display: block;">
  <div class="slideshow-container">
    <div id="slideshow" class="slideshow">
      <span class="image-wrapper current" style="opacity: 1;">
        <a class="advance-link" title="undefined" href="#2" rel="history">
          <img alt="undefined" src="images/experiments/large/experiments.jpg">
        </a>
      </span>
    </div>
  </div>
</div> 
```

请帮忙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T22:04:54.247

最简单的，我建议：

```
$('a.advance-link img').height(); 
```

这应该放在 a`$(window).load()`中，而不是`$(document).ready()`，因为`load()`等待图像加载，而`ready()`只是等待 DOM 构建并准备好：

```
$(window).load(
    function(){
        var heightOfImage = $('a.advance-link img').height();
    }); 
```

参考：

*   [`$(document).ready()`和`$(window).load()`区别](http://forum.jquery.com/topic/document-ready-and-window-onload-difference)。
*   [`height()`](http://api.jquery.com/height/).

# jquery - JQuery日期验证检查每个月的第一天

> ID：11803910
> 
> 赞同：0
> 
> 时间：2012-08-03T22:03:12.310
> 
> 标签：jquery, jquery-plugins

我正在使用 Jquery 验证，我正在尝试进行日期验证，以便用户只能输入每个月的第一天作为有效日期，例如 08/01/2012 将是有效日期，但不是 08/02/2012 .

现在我有以下代码，它只是做基本的日期检查是否有我可以添加的规则，所以它检查日期是每个月的第一天？先感谢您！

```
 <script>
       $(document).ready(function(){
        $("#formID").validate({
                         rules: {

                             CurrentEligibleEmployees: {
                                  required: true,
                                  number: true},

                            EstimatedEnrolledEmployees: {
                                  required: true,
                                  number: true},

                                DesiredEffectiveDate: {
                                      required: true,
                                      date: true},

                                PlanAnniversaryStartDate: {
                                      required: true,
                                      date: true},

                                      PlanAnniversaryEndDate:{
                                           required: true,
                                            date: true}
                              }     

                         });
    });
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T22:31:26.660

我不会让用户输入日期，而只输入月份和年份。您可以从 jquery ui datepicker 制作月份选择器。这是我曾经做过的事情：

月份选择器.js：

```
$.fn.monthpicker = function()
{
  var element = $(this);

  element.datepicker(
  {
    changeMonth: true,
    changeYear: true,
    dateFormat: 'yy-mm',
    onClose: function()
    {
      var widget = get_widget();

      var month = widget.find(".ui-datepicker-month :selected").val();
      var year = widget.find(".ui-datepicker-year :selected").val();

      element.datepicker('setDate', new Date(year, month, 1));

      widget.hide().removeClass("monthpicker");
    },
    beforeShow : function()
    {
      get_widget().addClass("monthpicker");

      var datestr = element.val();

      if (datestr.length > 0)
      {
        var date = datestr.split('-');

        year = date[0];
        month = date[1] - 1;

        element.datepicker('option', 'defaultDate', new Date(year, month));
        element.datepicker('setDate', new Date(year, month));
      }
    }
  });

  function get_widget()
  { return element.datepicker("widget"); }
}; 
```

月份选择器.css

```
.monthpicker .ui-datepicker-calendar{
        display: none;
} 
```

所以现在你有一个

```
<input type="text" id="themonth"> 
```

在脚本中你这样做：

```
$('#themonth').monthpicker(); 
```

但是日期格式可能需要更改，因为我使用了 YYYY-MM

# clojure - 宏时的clojure

> ID：11803911
> 
> 赞同：32
> 
> 时间：2012-08-03T22:03:14.967
> 
> 标签：clojure

我正在浏览 clojure 源代码，我对 when 宏的定义方式感到惊讶：

```
user=> (source when)
(defmacro when
  "Evaluates test. If logical true, evaluates body in an implicit do."
  {:added "1.0"}
  [test & body]
  (list 'if test (cons 'do body)))
nil
user=> 
```

我原以为它会写成这样：

```
(defmacro when [test & body] `(if ~test (do ~@body))) 
```

为什么实际的宏是以这种不太常见的方式编写的？

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2012-08-03T23:21:07.137

core.clj 是从上到下构建的，从 Java 提供的内容开始，并逐步构建 Clojure 的所有要求。何时`when`定义语法引用尚不存在。
该`when`宏在core.clj 的[第 456 行](https://github.com/clojure/clojure/blob/3bd1bb3c8d01f268eb780e87f4f5d1af911734e5/src/clj/clojure/core.clj#L456)定义，语法引用的要求直到[第 682 行才可用。when](https://github.com/clojure/clojure/blob/3bd1bb3c8d01f268eb780e87f4f5d1af911734e5/src/clj/clojure/core.clj#L682) **宏用于定义语法引用**

# perl - DBM::Deep 不使用 perl 哈希引用

> ID：11803912
> 
> 赞同：1
> 
> 时间：2012-08-03T22:03:16.430
> 
> 标签：perl, hash, reference, copy, dbm

我正在使用[DBM::Deep](https://metacpan.org/module/DBM::Deep)哈希对象，如下所示：

```
my $dbm = DBM::Deep->new(
        file      => "dbm.db",
        locking   => 1,
        autoflush => 1,
        type      => "DBM::Deep->TYPE_HASH",
        );
#code..
$dbm = $hash_reference; 
```

但是，这不起作用。$dbm 在程序期间保存正确的值，但是在它退出后 dbm.db 是空的，当我启动另一个尝试使用 dbm.db 的程序时，里面什么都没有。但是每当我像这样复制哈希引用时（它是一个两级深度哈希）：

```
 for my $id (keys %$hash_reference) {
        for(keys %{$hash_reference->{$id}}) {
            $todo->{$id}->{$_} = $hash_reference->{$id}->{$_};
        }
    } 
```

然后它将正确复制所有内容，并且在程序执行后这些值仍然存在。DBM 作者似乎强调，尽管他的 DBM::Deep 对象就像常规哈希一样工作，所以有谁知道是否有更简单的方法来做到这一点？谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-03T22:33:11.407

你正在扔掉这个物体。试试这个：

```
%$dbm = %$hash_reference; 
```

# javascript - 使用 Javascript、jQuery 和 jqPlot 在 Android WebVew 中制作图表

> ID：11803914
> 
> 赞同：0
> 
> 时间：2012-08-03T22:03:20.987
> 
> 标签：javascript, android, jquery, webview, jqplot

我试图通过 WebView 在 Android 中使用[jqPlot](http://www.jqplot.com/docs/files/usage-txt.html)，但我得到一个没有错误的空白 WebView。我正在从我的应用程序的资产目录中将一个简单的 HTML 文件加载到 WebView 中，然后尝试运行所需的 javascript 来创建图表。任何帮助/建议将不胜感激！

这是加载 WebView 的代码

```
private View getSimpleChartView() {
    View chartView = getLayoutInflater().inflate(R.layout.test_chart, null);

    TextView chartTitle = (TextView) chartView.findViewById(R.id.txtChartTitle);
    chartTitle.setText("Simple Chart");

    WebView webView = (WebView) chartView.findViewById(R.id.webView);
    webView.getSettings().setJavaScriptEnabled(true);
    webView.setWebViewClient(new ChartWebViewClient());
    webView.loadUrl("file:///android_asset/jqplot_template.html");
    webView.loadUrl("javascript:" + getJqPlotJavascript());

    return chartView;
}

private String getJqPlotJavascript() {
    StringBuilder js = new StringBuilder();

    js.append("<script language=\"javascript\" type=\"text/javascript\" src=\"file:///android_asset/jqplot/jquery.min.js\"></script>\n");
    js.append("<script language=\"javascript\" type=\"text/javascript\" src=\"file:///android_asset/jqplot/jquery.jqplot.min.js\"></script>\n");
    js.append("<link rel=\"stylesheet\" type=\"text/css\" href=\"file:///android_asset/jqplot/jquery.jqplot.css\" />\n");
    js.append("<script type=\"text/javascript\">");
    js.append("$.jqplot('chartdiv',  [[[1, 2],[3,5.12],[5,13.1],[7,33.6],[9,85.9],[11,219.9]]]);\n");
    js.append("</script>");

    return js.toString();
} 
```

jqplot_template.html

```
<html>
    <body>
        <div id="chartdiv" style="height:400px;width:300px;"></div>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-12T17:19:47.800

1.  将 jqplot 脚本和 css 引用放入 HTML。
2.  按照 Jayesh 的建议调用 javascript onPageFinished（并将 webView 标记为 final）
3.  从 javascript 字符串中删除包含的脚本标签
4.  繁荣！

HTML

```
<html>
     <script language="javascript" type="text/javascript" src="file:///android_asset/jqplot/jquery.min.js"></script>
     <script language="javascript" type="text/javascript" src="file:///android_asset/jqplot/jquery.jqplot.min.js"></script>
     <link rel="stylesheet" type="text/css" href="file:///android_asset/jqplot/jquery.jqplot.css" />
    <body>
        <div id="chartdiv" style="height:400px;width:300px;"></div>
    </body>
</html> 
```

爪哇

```
private View getSimpleChartView() {
    View chartView = getLayoutInflater().inflate(R.layout.test_chart, null);

    TextView chartTitle = (TextView) chartView.findViewById(R.id.txtChartTitle);
    chartTitle.setText("Simple Chart");

    final WebView webView = (WebView) chartView.findViewById(R.id.webView);
    webView.getSettings().setJavaScriptEnabled(true);
    webView.setWebViewClient(new WebViewClient(){
        @Override
        public void onPageFinished(WebView view, String url) {
            webView.loadUrl("javascript:" + getJqPlotJavascript());
            super.onPageFinished(view, url);
        }
    });
    webView.loadUrl("file:///android_asset/jqplot_template.html");

    return chartView;
}

private String getJqPlotJavascript() {
    StringBuilder js = new StringBuilder();
    // Just this line
    js.append("$.jqplot('chartdiv',  [[[1, 2],[3,5.12],[5,13.1],[7,33.6],[9,85.9],[11,219.9]]]);\n");
    return js.toString();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-19T16:51:59.630

当您使用加载 web 视图 `webView.loadUrl("file:///android_asset/jqplot_template.html");` 时，加载页面需要一些时间。

由于页面可能未正确加载，因此无法立即调用 javascript 函数。

而是这样做：

```
webView.setWebViewClient(new WebViewClient(){`
    @Override
    public void onPageFinished(WebView view, String url) {
        webView.loadUrl("javascript:" + getJqPlotJavascript());

        super.onPageFinished(view, url);
    }
}); 
```

我希望这有帮助。

# weblogic - 在 Weblogic 10g 中访问嵌入式 Derby 数据库

> ID：11803923
> 
> 赞同：0
> 
> 时间：2012-08-03T22:04:39.007
> 
> 标签：weblogic, derby

我有一个名为 Derby 的项目，其中有我的嵌入式 Derby 数据库。

我的部署涉及多个项目，所有项目都打包在一个 EAR 中以供 Weblogic 使用。在这个 EAR 中，我将我的 Derby 项目配置为嵌入式访问。

我的问题是我用来访问 Derby 数据库的字符串引用了磁盘中的路径。这显然是错误的，因为 EAR 在 weblogic 中部署时位于内存中。

做了一些研究，我知道有一种方法可以创建数据源以在“网络模式”下访问 derby 数据库。但这脱离了我需要做的事情，即通过嵌入式模式访问。

部署由 ANT 脚本构建。它在两个 jars（访问 Derby 数据库和数据库本身的 Java 类）中编译和分离 Derby 项目。

问题是……如何访问部署在我的 Weblogic 中的 EAR 中的 Derby 数据库？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T16:59:27.193

EAR 可能在内存中，但您的数据库通常仍位于磁盘上的某个位置。可以使用内存中的 Derby 数据库，但您所做的任何更改都不会持久，因此大多数应用程序使用磁盘驻留的 Derby 数据库。

所有这些细节都由您在连接到 Derby 引擎时传递的 URL 控制，因此请阅读以下内容以开始使用： http: [//db.apache.org/derby/docs/10.9/devguide/cdevdvlp17453.html](http://db.apache.org/derby/docs/10.9/devguide/cdevdvlp17453.html)

# java - 使用 JNI 在 C 中访问 Java 对象中的 Java 对象

> ID：11803927
> 
> 赞同：5
> 
> 时间：2012-08-03T22:04:53.693
> 
> 标签：java, c++, c, java-native-interface

我对 JNI 比较陌生，并且已经掌握了使用 JNI 处理 Java 对象中的整数和数组的基础知识。现在我正在尝试修改/访问 Java 对象中的 Java 对象。

我一直在互联网和 Stack Overflow 上搜索，但还没有找到如何做到这一点。

这是示例。

在 Java 中：

```
public class ObjectOne
{
    private byte[] buff;
    ...
    ...
}

public class ObjectTwo
{
    private ObjectOne obj;
    ...
    ...
} 
```

在 JNI 中，如何通过 ObjectTwo 从 ObjectOne 访问“buff”？我尝试过这样的事情......

```
JNIEXPORT void JNICALL Java_accessBuffThroughObjectTwo(JNIEnv *env, jobject obj, jobject objectTwo)
{
    jclass clazz;
    jclass bufferClazz;
    jobject bufferJObject;

    clazz = (*env)->GetObjectClass(env, objectTwo);
    fid = (*env)->GetFieldID(env, clazz, "obj", "Ljava/lang/Object;");
    bufferJObject = (*env)->GetObjectField(env, javascsicommand, fid);
    bufferClazz = (*env)->GetObjectClass(env, bufferJObject);  <-- Fails here for Access Violation
    fid = (*env)->GetFieldID(env, bufferClazz, "buff", "[B");
} 
```

对我做错了什么有帮助吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-06T08:57:02.043

在尝试您的代码时，您可以轻松添加一些断言，如下所示：

```
JNIEXPORT void JNICALL Java_accessBuffThroughObjectTwo(JNIEnv *env, jobject obj,  jobject objectTwo) {
    jclass clazz;
    jclass bufferClazz;
    jobject bufferJObject;
    jfieldID fid;

    clazz = (*env)->GetObjectClass(env, objectTwo);
    assert(clazz != NULL);
    fid = (*env)->GetFieldID(env, clazz, "obj", "Ljava/lang/Object;");
    assert(fid != NULL);
    bufferJObject = (*env)->GetObjectField(env, javascsicommand, fid);
    assert(bufferJObject != NULL);
    bufferClazz = (*env)->GetObjectClass(env, bufferJObject);
    assert(bufferClazz != NULL);
    fid = (*env)->GetFieldID(env, bufferClazz, "buff", "[B");
    assert(fid != NULL);
} 
```

这样做你会首先看到第一个`fid`将是 NULL。那是因为`ObjectTwo`该类没有任何类型的字段`java.lang.Object`。您应该将行更改为如下所示（但添加正确的包而不是`com/package`）：

```
fid = (*env)->GetFieldID(env, clazz, "obj", "Lcom/package/ObjectOne;"); 
```

如果再次运行，您会发现fid 不再为null，并且断言将通过。

正如其他人所建议的那样，我认为`javascsicommand`应该是`objectTwo`.

现在断言将失败的下一个地方是 on `bufferJObject`。这是因为该字段存在但对象为 NULL，如果您检查您的 java 代码，您会注意到该`obj`字段从未实例化并且是`null`.

将您的 java 代码更改为以下内容：

```
public class ObjectTwo
{
    private ObjectOne obj = new ObjectOne();
    ...
    ...
} 
```

您现在将传递断言，甚至传递所有其他断言。

总而言之，您正在访问一个`null`对象并尝试对其调用反射：

```
bufferClazz = (*env)->GetObjectClass(env, bufferJObject); <-- The bufferJObject was NULL 
```

# jquery - 将对话框影响应用于内联相对 Div（无悬停影响）

> ID：11803933
> 
> 赞同：2
> 
> 时间：2012-08-03T22:05:08.247
> 
> 标签：jquery, dialog, modal-dialog, jquery-ui-dialog

我正在尝试将 jquery 对话框放入相对于另一个 div 容器的 div 容器中。换句话说，我正在寻找它以内联方式出现并让它的外观影响它周围的元素（例如：如果它在它下面的 div 中滑动，它会被强制容纳）。

我知道它不再是一个传统的对话框，但考虑到我想保留提供给 jQuery 对话框的功能，我不确定还能叫它什么。

你怎么看？任何变通的黑客或解决方案？

我想不惜一切代价避免将位置设置为绝对。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-11T22:32:59.757

我确定您现在已经解决了这个问题，但这是我为后代提供的解决方案：

```
.dialog({
    appendTo: "#placeholderSpan",
    draggable: false,
    resizable: false
})
.parent()
.css({ position: "relative" })
.position({ my: "left top", at: "left top", of: "#placeholderSpan"}); 
```

我使用新的（从 1.10.0 开始）appendTo 属性，但也可以在打开时附加或预先添加对话框：

```
.dialog({
    open: function() {
        $(this).parent().prependTo("#placeholderSpan");
    }
}); 
```

这只对我有用，如果位置函数最后出现，我不能使用对话框选项中的位置函数或在设置 css 位置之前定位对话框。

[jsFiddle](http://jsfiddle.net/Qpj3x/2/ "jsFiddle")

# jquery - 允许 SPAN 溢出其包含的 DIV

> ID：11803943
> 
> 赞同：0
> 
> 时间：2012-08-03T22:06:08.270
> 
> 标签：jquery, css, html, twitter-bootstrap

我正在尝试使用以下代码在图像上放置示例水印（并旋转它），但是当文本大小过大或过长时，文字将换行并创建两行。如果我禁用空格换行：nowrap，如果跨度变得太大，文本现在将围绕不同的点旋转。

```
<div class="customize-preview">
    <img src="{{ sample_image }}" id="sample-image" class="customize-image" />
    <div class="customize-overlay">
        <div style="display: table;" class="customize-overlay">
            <div style="display: table-row;">
                <div style="display: table-cell;" class="customize-watermark" id="watermark">
                    <span>Sample Watermark</span>
                </div>
            </div>
        </div>
    </div>
</div> 
```

CSS是

```
.customize-overlay {
position: absolute;
top: 0;
left: 0;
width: 100%;
height: 100%;
overflow: hidden;
}

.customize-watermark {
    vertical-align: middle;
    text-align: center;
    background-color:transparent;
} 
```

用户可以更改示例水印文本，但如果它变得太长或太大，文字将开始换行。如果我输入一个非常长的单词，它将扩展包含的 div，如果我尝试旋转该文本，则枢轴点将不再正确。另外，我希望它只是隐藏溢出的文本，这样就不会发生。

我在这里创建了一个演示：http: [//jsfiddle.net/yu9Mu/](http://jsfiddle.net/yu9Mu/)

您可以看到它换成了两行，但我希望它保持在一行并溢出。另外，如果我加上 white-space: nowrap，单词不会换行，但跨度会不断扩大。然后，如果我尝试运行 -webkit-transform:rotate(90deg)，它现在似乎围绕不同的点旋转。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T22:12:44.140

如果我很好地回答了您的问题，我认为您只需要设置好的空白

```
.customize-watermark {
    vertical-align: middle;
    text-align: center;
    background-color:transparent;
    white-space: nowrap;
} 
```

[看这个小提琴](http://jsfiddle.net/yu9Mu/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T22:15:59.783

[http://jsfiddle.net/demchak_alex/yu9Mu/3/](http://jsfiddle.net/demchak_alex/yu9Mu/3/)

添加

```
 white-space: nowrap; 
```

到水印

# mongodb - MongoDB Hadoop 流式适配器

> ID：11803945
> 
> 赞同：3
> 
> 时间：2012-08-03T22:06:24.027
> 
> 标签：mongodb, hadoop

尝试利用您的帖子： [https ://gist.github.com/2884606](https://gist.github.com/2884606)

我尝试运行命令：

hadoop jar mongo-hadoop-streaming-assembly*.jar -mapper mapper.rb -reducer reducer.rb -inputURI mongodb://127.0.0.1/twitter.in -outputURI mongodb://127.0.0.1/twitter.out

得到以下错误：线程“main”中的异常 java.lang.ClassNotFoundException: com.mongodb.hadoop.streaming.MongoStreamJob

我编译了 jar mongo-hadoop-streaming-assembly*.jar 但它不包含上述类。

我尝试使用 -libjar 来包含类存档，但 hadoop 无法识别它。

还尝试导出 CLASS_PATH 以包含在上面。

用于构建 Hadoop Streaming [https://github.com/mongodb/mongo-hadoop/tree/master/streaming](https://github.com/mongodb/mongo-hadoop/tree/master/streaming)

./sbt mongo-hadoop-streaming/组装

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T06:34:10.393

Apache Hadoop 1.0.3 不支持流式传输。Apache Hadoop 版本控制方案相当混乱，因为 1.0.x 实际上基于旧版本 (0.20)，而不是当前的开发分支 (0.23)，后者将成为 Apache Hadoop 2.0 (!)。

有关支持的 Hadoop 版本和限制的更多信息，请参阅[构建适配器：流支持](http://api.mongodb.org/hadoop/Building+the+Adapter.html#Streaming+Support)。

一个更容易上手的 Hadoop 版本是[Cloudera Release 3](https://ccp.cloudera.com/display/SUPPORT/CDH+Downloads)，它具有包下载以及可用的预构建 VM。

# javascript - 如何将 24 格式时间的用户输入限制到输入字段中？

> ID：11803946
> 
> 赞同：6
> 
> 时间：2012-08-03T22:06:23.823
> 
> 标签：javascript, jquery, regex, input, mask

我有一个输入字段，时间为 HH:MM。而且我需要管理用户只能输入正确的时间，以防止他们输入错误的时间。

24 小时格式正则表达式模式中的时间是

```
([01]?[0-9]|2[0-3]):[0-5][0-9] 
```

而且我找到了掩码输入插件[https://github.com/RobinHerbots/jquery.inputmask](https://github.com/RobinHerbots/jquery.inputmask)

但我不知道如何做我想做的事。多谢。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-03T22:20:41.873

像[那样](http://jsfiddle.net/YFMev/)？

```
$(document).ready(function(){
  $("#time").inputmask("h:s",{ "placeholder": "hh/mm" });
});​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T22:20:42.627

不确定您引用的插件，因为我没有看到它的演示页面。我发现如果您需要用户以某种方式输入时间或日期，您不能让他们输入任何内容。所以我们使用日历日期选择器作为日期，这是我发现的最好的时间选择器：http: [//haineault.com/media/jquery/ui-timepickr/page/](http://haineault.com/media/jquery/ui-timepickr/page/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-27T17:00:10.803

```
$(selector).inputmask("h:s",{ autoUnmask:true }); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2017-10-24T11:02:02.063

也可以使用此代码

```
var selector = document.getElementById("aaa");
Inputmask("(09|19|20|21|22|23):(09|19|29|39|49|59)").mask(selector); 
```

# java - Lombok 没有生成 getter 和 setter

> ID：11803948
> 
> 赞同：134
> 
> 时间：2012-08-03T22:06:44.270
> 
> 标签：java, eclipse, maven, lombok

我只是尝试将一个基于 Maven 的项目发送到另一台计算机和 HORROR，到处都是红色标记！

但是，`mvn clean install`建设得很好。

很快，我注意到 Lombok 并没有为我的类生成 getter 和 setter，尽管Eclipse 可以正确识别`@Getter`and 。`@Setter`

两台计算机使用相同的 Maven 版本 (3.0.4) 但不同的 JDK（1.6_23 和 1.6_33）。他们都使用 Eclipse Indigo 32 位。你知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：200
> 
> 时间：2012-08-04T08:12:33.713

事实上，从全新的 Eclipse 安装开始，您需要先“安装”Lombok，然后才能使用它。

1.  转到 Lombok jar 所在的位置（例如（例如，您可以在 中找到`~/.m2/repository/org/projectlombok/lombok/1.16.10/lombok-1.16.10.jar`），运行它（示例：）`java -jar lombok-1.16.10.jar`。应该会出现一个窗口，浏览到您的`eclipse.exe`位置。
2.  点击安装。
3.  启动 Eclipse，更新所有项目的项目配置，瞧。

* * *

## 回答 #2

> 赞同：103
> 
> 时间：2017-07-20T14:11:38.527

*   如果您使用**STS**。您必须通过运行 lombok-xyz.jar 在 Eclipse 中安装 Lombok

*   请尝试以下步骤：

    1.  在 Maven 中包含 pom 。
    2.  退出/关闭 STS
    3.  在 ~/.m2/repository/org/projectlombok/lombok/version.x 中找到 lombok Jar
    4.  从命令提示符/Shell`java -jar lombok-1.x.y.jar` [![龙目岛项目安装程序](../Images/f70d6a7320f07974000f04c4e9db1d2a.png)](https://i.stack.imgur.com/pDcGm.png)

    5.  启动 STS

就这样。

**编辑**：我这样做了，但仍然显示错误，如评论中所述。所以我更新了项目：*右键单击项目 -> Maven -> 更新项目*，错误消失了。

* * *

## 回答 #3

> 赞同：56
> 
> 时间：2018-03-08T18:42:28.163

请注意，如果您使用 IntelliJ，则需要安装 Lombok 插件（可从 IDE 设置中获得）并启用注释处理。

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2019-10-09T10:13:21.810

下载 Lombok Jar，让 maven 代我们下载：

```
 <dependency>
        <groupId>org.projectlombok</groupId>
        <artifactId>lombok</artifactId>
        <version>1.16.18</version>
    </dependency> 
```

现在...在新创建的项目上执行 mvn clean install 命令，以将此 jar 下载到本地存储库中。转到jar位置，执行命令提示符，运行命令：java -jar lombok-1.16.18.jar

[![在此处输入图像描述](../Images/b93c39caa8ad46a8456937f3e0d85640.png)](https://i.stack.imgur.com/XzPhE.png)

单击“指定位置”按钮并找到 eclipse.exe 路径 LIKE ： [![在此处输入图像描述](../Images/bd113746f4c834c9239b1af2fdfad3ef.png)](https://i.stack.imgur.com/6pCtu.png)

最后通过单击“安装/更新”来安装它</p>

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2014-04-09T12:46:56.323

如果你使用日食。您必须通过运行 lombok-xyz.jar 在 Eclipse 中安装 lombok（例如，您可以在 中找到`~/.m2/repository/org/projectlombok/lombok/1.12.6/lombok-1.12.6.jar`）。

当安装窗口打开时，您必须选择 Eclipse 的位置。并让它在里面安装lombok。之后您必须重新启动 Eclipse。

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2017-12-28T00:13:32.727

这些是命令行指令，上面的图形版本不可用，或者您无法通过双击打开 Lombok jar 文件，如在 Ubuntu 中。

在撰写本文时，使用 Lombok 并不简单，只需在 POM xml 文件中添加依赖项并添加注释即可。这些是接下来的步骤：

1）找到maven下载Lombok jar文件的位置；通常它位于主目录内的 .m2 文件夹中。然后执行以下命令。

```
java -jar lombok-1.16.18.jar install <path of where your IDE is installed> 
```

示例用法：

```
java -jar lombok-x.xx.xx.jar install ~/Downloads/spring-tool-suite-3.9.1.RELEASE-e4.7.1a-linux-gtk-x86_64/sts-bundle/sts-3.9.1.RELEASE/ 
```

`.ini`上面的命令基本上会在您的 IDE或`configuration`文件中进行配置更新，如下所示：

```
-javaagent:/home/neshant/Downloads/spring-tool-suite-3.9.1.RELEASE-e4.7.1a-linux-gtk-x86_64/sts-bundle/sts-3.9.1.RELEASE/lombok.jar 
```

这确保了 IDE 可以理解`@Data`or `@Getter`or`@Setter`注释。奇怪的是它必须如此复杂。

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2020-05-18T17:43:50.833

如果你使用maven和Eclipse，必须手动安装。

1.  验证 pom

```
 <dependency>
            <groupId>org.projectlombok</groupId>
            <artifactId>lombok</artifactId>
            <version>1.18.10</version>
            <type>jar</type>
        </dependency>
```

2.  转到 Maven 依赖项

[![在此处输入图像描述](../Images/64fd08592217f943b30ef73b3001a827.png)](https://i.stack.imgur.com/oJ2r3.png)

3.  右键单击库并作为 Java 应用程序运行

[![在此处输入图像描述](../Images/33bea105fb4ee52ce53196ef3224e370.png)](https://i.stack.imgur.com/u7GqD.png)

4.  指定位置 IDE，安装并关闭 IDE (Eclipse)。 [![在此处输入图像描述](../Images/873a3611538a8456608e777274268d44.png)](https://i.stack.imgur.com/aAlWh.png)

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2020-05-16T05:53:38.703

仅仅添加 Lombok 的依赖是不够的。您还必须安装 Lombok 的插件。

您可以通过导航来获取您的 Lombok jar 文件（仅当您在任何 POM 中添加了依赖项时。）

m2\repository\org\projectlombok\lombok\1.18.12\lombok-1.18.12

此外，如果 Lombok 找不到 IDE，请手动指定 IDE 的 .exe 并单击安装。

重新启动您的 IDE。

就是这样。

如果您遇到任何问题，

下面是一个关于如何安装龙目岛插件的美丽而简短的视频。

为了节省您的时间，您可以从 1:40 开始。

[https://www.youtube.com/watch?v=5K6NNX-GGDI](https://www.youtube.com/watch?v=5K6NNX-GGDI)

如果还是不行，

验证 lombok.jar 是否存在于您的 sts.ini 文件中（sts 配置文件，存在于 sts 文件夹中。）

-javaagent:lombok.jar

执行 Alt+F5。这将更新您的 Maven。

关闭您的 IDE 并重新启动它。

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2020-05-25T06:58:36.983

如果您使用 STS。您必须通过运行 lombok-abc.jar 在 Eclipse 中安装 Lombok

请按照以下步骤操作：

- 在 Maven 中包含 pom。-退出/关闭 STS（必须） -在 ~.m2\repository\org\projectlombok\lombok\1.18.12 中查找 lombok Jar -来自命令 [![在此处输入图像描述](../Images/0e86289494bd6fb88fb06d1ab9a4ff55.png)](https://i.stack.imgur.com/JXGv7.png)

然后 [![在此处输入图像描述](../Images/3b4c82d12c2154e8e0ed83615c3ade93.png)](https://i.stack.imgur.com/82X5c.png)

然后选择 STS.exe [![在此处输入图像描述](../Images/4a2cbf316da2e4a7f875c516ad41b67b.png)](https://i.stack.imgur.com/wGUYl.png)

然后点击更新/更新

[![在此处输入图像描述](../Images/fe2dedda0952030a1efe6bf0fa405824.png)](https://i.stack.imgur.com/XOjlX.png)

然后退出安装程序

快乐编码

> 块引用

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2018-04-26T14:50:19.913

对于 Sprint STS - 将 lombok.jar 文件放在 eclipse/sts exe 文件夹中，并将以下条目添加到 STS.ini。

```
-javaagent:lombok.jar 
```

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2021-03-08T09:02:45.760

Eclipse IDE 的解决方案：

**1\. pom.xml中的Maven依赖**

```
<dependency>
    <groupId>org.projectlombok</groupId>
    <artifactId>lombok</artifactId>
    <optional>true</optional>
</dependency> 
```

**2.转到Maven依赖jar>>右键单击>>运行方式>>Java应用程序**

**3.选择***Socket Server***并点击OK**

```
ch.qos.logback.classic.net.SimpleSSLSocketServer
ch.qos.logback.classic.net.SimpleSocketServer 
```

**4\. 在控制台上显示消息，例如：**

参数数量错误。用法：java ch.qos.logback.classic.net.SimpleSocketServer 端口配置文件

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2021-04-30T13:55:27.040

我花了一整天，你可以这样做：

1.  添加到 Maven 龙目岛
2.  安装日食
3.  下载龙目岛
4.  复制到eclipse文件夹
5.  添加到文件 eclipse.ini 下一个文本 -javaagent:lombok.jar
6.  选择项目（不是父项目）中的活动注释处理
    -> 属性 -> Java 编译器 -> 注释处理 选择启用项目特定设置 全选启用复选框
7.  重新启动，它应该工作。测试 ubuntu 20.04 和 eclipse 2021 年

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2017-10-20T15:18:14.337

在全新安装的 Eclipse 或 STS 上使用 lombok 时，您必须：

1.  安装可以在[https://projectlombok.org/download](https://projectlombok.org/download)获得的 lombok jar 。运行 jar（如果使用 Windows，则以管理员身份）并指定 Eclipse/STS 安装的路径。

2.  重新启动 IDE（Eclipse 或 STS）

3.  给 Eclipse 一些时间来为 lombok 生成类文件（在某些情况下可能需要 4 分钟）

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2018-03-23T17:24:09.447

对于 Mac 上的 Spring ToolSuite 4，他们将 ini 重命名为 SpringToolSuite4.ini。

您可以将其重命名或复制到 STS.ini 以被 lombok 识别。然后将其复制回原始名称以供 IDE 读取。（虽然符号链接有效，但还没有尝试过。）

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2018-04-23T13:51:17.373

下载 Lombok Jar 文件[https://projectlombok.org/downloads/lombok.jar](https://projectlombok.org/downloads/lombok.jar)

添加maven依赖：

```
 <dependency>
      <groupId>org.projectlombok</groupId>
      <artifactId>lombok</artifactId>
      <version>1.16.18</version>
   </dependency> 
```

开始龙目岛安装`java -jar lombok-1.16.18.jar`

在此链接中找到完整的示例：
[https ://howtodoinjava.com/automation/lombok-eclipse-installation-examples/](https://howtodoinjava.com/automation/lombok-eclipse-installation-examples/)

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2018-08-21T19:54:58.097

我正在使用红帽 Jboss 开发者工作室。我通过以下方式解决了这个问题：

1.  该项目具有`lombok`依赖性。首先查看您的`.m2` 存储库并找到`lombok`jar

2.  双击 jar，您将看到安装程序在那里指定 IDE 的路径，例如`C:\Users\xxx\devstudio\studio\devstudio.exe`

3.  重新启动IDE并更新maven项目，错误将消失

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2019-06-14T09:59:08.327

1）运行命令`java -jar lombok-1.16.10.jar`。这需要从您的 lombok.jar 文件的目录中运行。

**2）通过选择eclipse.ini**文件（安装的eclipse目录）手动添加位置。通过“<strong>指定位置”</p>

**注意：**不要添加**eclipse.exe**，因为它会使 eclipse 编辑器损坏。

[如何添加 eclipse.ini 文件](https://i.stack.imgur.com/ZCC2y.png)

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2019-06-21T02:37:27.990

我也遇到了这个问题，就我而言，这是因为我在没有升级 Lombok 插件的情况下升级了 IntelliJ IDEA。所以它们是不相容的。

* * *

## 回答 #19

> 赞同：1
> 
> 时间：2020-02-18T22:50:16.700

我所要做的就是安装`lombok`在eclipse安装目录中。

`lombok.jar`从[这里](https://projectlombok.org/downloads/lombok.jar)下载，然后使用以下命令安装它：

```
java -jar lombok.jar 
```

之后确保将其`lombok.jar`添加到您的构建路径中。但请确保不要通过在 Eclipse 路径中添加一次`maven`或`gradle`再次添加它来添加它两次。

之后，再次`clean`进行`build`项目，看到所有错误都消失了。

* * *

## 回答 #20

> 赞同：1
> 
> 时间：2020-07-31T16:54:24.537

Intellij 用户，确保你有 3 样东西，

1.  龙目岛依赖

```
 <dependency>
            <groupId>org.projectlombok</groupId>
            <artifactId>lombok</artifactId>
            <version>1.18.8</version>
            <scope>provided</scope>
        </dependency> 
```

2.  Lombok 的 IntelliJ 插件

3.  Lombok 注释，例如`@Getter @Setter`（确保它来自 lombok 而不是来自其他地方）

它应该可以工作。

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2021-01-27T09:48:26.050

在 mac os lombok 中将无法找到 eclipse 位置。请单击指定位置并转到 eclipse 安装文件夹，您可以找到 eclipse.ini 文件选择那个

[![在此处输入图像描述](../Images/852d9594195f502644e7e5e8b1b44c24.png)](https://i.stack.imgur.com/mLSBR.jpg)

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2022-01-25T04:39:50.893

似乎上面的答案在某些情况下是可以的，但我的情况不知何故运作良好。

所以，在这里我做了什么（对我有用）：

1.  我使用弹簧套装 4 (SpringToolSuite4.exe)
2.  项目必须是 maven-project
3.  我直接安装 lombok 我放入 pom.xml 的版本（1.18.12）不起作用
4.  我改通过 Market Place 安装 lombok 最新版本，使用 site: `https://projectlombok.org/p2`，版本为 1.18.22
5.  我现在在我的`SpringToolSuite4.ini`, 这一行看到：`-javaagent:D:\xxx\eclipse\sts-4.13.0.RELEASE\plugins\org.projectlombok.agent_1.18.22/lombok.jar`
6.  重新打开我的 STS 并按：（`ALT+F5`打开你的 maven 项目），单击 OK 并等待所有项目被构建

他们正在工作。

**讨论**

可能最重要的是所有解决方案都在工作，但由于我们一直认为的版本，我们需要使用与 pom.xml 中相同的版本，但它也可以与最新版本一起使用（如果有人有评论，请纠正我）。

Point 2\. maven 项目，我从上述其他解决方案开始，但仍然出现错误；我们必须以某种方式确保这一点。

**再补充一点**：*当您在 About Spring Tool（或 About Eclipse）中没有看到一行消息时，意味着您的 lombok 安装不正确*，可以再次尝试我的上述解决方案。

希望这个讨论对其他人有所帮助。

* * *

## 回答 #23

> 赞同：-1
> 
> 时间：2018-06-29T20:21:29.160

从私有静态字段中删除 @Getter。

[https://github.com/rzwitserloot/lombok/issues/1493](https://github.com/rzwitserloot/lombok/issues/1493)

* * *

## 回答 #24

> 赞同：-1
> 
> 时间：2019-03-20T05:18:46.510

如果您使用的是 maven，请转到项目结构中的 maven 依赖项，然后将 lombok jar 作为 java 项目运行，它将安装它然后退出并启动 eclipse

# sql-server - 在sql server中查找包含逗号的字符串中的子字符串

> ID：11803949
> 
> 赞同：0
> 
> 时间：2012-08-03T22:06:45.417
> 
> 标签：sql-server

我有如下字符串：

```
string s; //reading from front end like s='color'  
string s1; //reading from front end like s1='prototype'

string str=s+","+s1; 
```

所以`str="color,prototype"`

并且字符串`str`可以包含许多字符串，例如`str="color,prototype,niranjan,cloud";`

我想将它发送到数据库并根据以下行将其插入表中：

```
 id         value  
   1         color  
   2         prototye    
   3         niranjan   
   4         cloud 
```

于是一个存储过程或查询就找到了上面的要求。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T03:04:36.913

如果您的 sql server > 2000，请按照此操作

```
DECLARE @S varchar(max),
  @Split char(1),
  @X xml

SELECT @S = '1,2,3,4,5',
  @Split = ','

SELECT @X = CONVERT(xml,'<root><s>' + REPLACE(@S,@Split,'</s><s>') + '</s></root>')

SELECT [Value] = T.c.value('.','varchar(20)')
FROM @X.nodes('/root/s') T(c) 
```

参考：[http ://social.msdn.microsoft.com/forums/en-US/transactsql/thread/4126a010-6885-4eb0-b79c-c798c90edb85](http://social.msdn.microsoft.com/forums/en-US/transactsql/thread/4126a010-6885-4eb0-b79c-c798c90edb85)

否则，请在以下位置创建一个简单的拆分函数：http: [//blog.logiclabz.com/sql-server/split-function-in-sql-server-to-break-comma-separated-strings-into-table.aspx](http://blog.logiclabz.com/sql-server/split-function-in-sql-server-to-break-comma-separated-strings-into-table.aspx)

# apache-camel - 在 Apache Camel 路由中使用推土机映射器

> ID：11803951
> 
> 赞同：4
> 
> 时间：2012-08-03T22:06:52.710
> 
> 标签：apache-camel, dozer

任何人都可以为我提供在 Apache 骆驼路线中使用 Dozer 映射器的端到端示例。谢谢，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-04T16:02:04.857

可以在组件单元测试中找到一个基本示例...

[https://svn.apache.org/repos/asf/camel/trunk/components/camel-dozer/src/test/](https://svn.apache.org/repos/asf/camel/trunk/components/camel-dozer/src/test/)

# vb.net - 删除 vb 2010 express 中的列标题

> ID：11803956
> 
> 赞同：1
> 
> 时间：2012-08-03T22:07:12.047
> 
> 标签：vb.net

我有一个带有列表框的应用程序。单击按钮时，应该显示我的数据库中的某些内容。与显示一起出现列标题！！！它以“{itemID = SW934, quantity = 10...”等形式出现。如何摆脱“{”和列标题？？？这是我当前的代码：

公开课形式1

```
Private Sub Form1_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load
    'TODO: This line of code loads data into the 'MICROLANDDataSet.Orders' table. You can move, or remove it, as needed.
    Me.OrdersTableAdapter.Fill(Me.MICROLANDDataSet.Orders)
    'TODO: This line of code loads data into the 'MICROLANDDataSet.Inventory' table. You can move, or remove it, as needed.
    Me.InventoryTableAdapter.Fill(Me.MICROLANDDataSet.Inventory)
    'TODO: This line of code loads data into the 'MICROLANDDataSet.Customers' table. You can move, or remove it, as needed.
    Me.CustomersTableAdapter.Fill(Me.MICROLANDDataSet.Customers)

End Sub

Private Sub btnOut_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles btnOut.Click
    Dim query1 = From OUT In MICROLANDDataSet.Inventory
                 Where OUT.quantity <= 10
                 Order By OUT.description Descending
                 Select OUT.itemID, OUT.quantity, OUT.description

    lstOutput.DataSource = query1.ToList
    lstOutput.SelectedItem = Nothing

End Sub 
```

结束类

多谢你们。非常欢迎任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T00:04:08.283

问题是这`query1`是一个匿名的内存队列。换句话说，它是未定义类型的对象的枚举。解决此问题的一种方法是将结果连接到一个字符串中。

```
 Select OUT.itemID & OUT.quantity & OUT.description 
```

并使 query1 a `List(Of String)`（您可以按照自己的方式格式化字符串。）

另一种选择是将其中一个字段指定为显示字段。

```
lstOutput.DisplayMember="Description" 
```

# apache - 在服务器 / SSH 现场工作

> ID：11803958
> 
> 赞同：0
> 
> 时间：2012-08-03T22:07:21.657
> 
> 标签：apache, ssh, hosting

我继承了一个要建立的网站。我刚刚意识到该网站的服务器并不是我一直使用的典型服务器；**EG - 我通常使用托管帐户创建一个 FTP，并在http://www.mycoolclients.com/dev/index.html**现场工作

 **我发现我必须使用连接；SSH。我几乎没有直接的服务器经验。我被告知我需要使用 linux 或下载类似“putty”的东西。在这种情况下，我如何连接到工作现场？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T22:10:26.117

**使用`sftp`而不是`ftp`.**

学习如何使用 ssh 肯定会很有价值，因为它被广泛使用并且非常有用，但是您可以立即将 sftp 用于以前使用 ftp 的任何东西。sftp 将为您提供与 ftp 相同的界面，但通过 ssh 连接。

你没有提到你使用的是什么 ftp 软件，但是很多还支持通过 sftp 连接。**

# c# - 引用 Websphere-MQ .dll 的 CLR 存储过程

> ID：11803960
> 
> 赞同：0
> 
> 时间：2012-08-03T22:08:16.397
> 
> 标签：c#, sql-server, ibm-mq, clrstoredprocedure

我正在尝试在 Visual Studio 2010 C# SQL CLR 数据库项目中编写 CLR 存储过程。不幸的是，我创建了一个需要引用外部 Webshpere MQ 程序集的类，而 SQL 项目无法做到这一点。我尝试在项目中创建一个包含必要引用的单独类库，但是当我尝试添加对 THIS 项目的引用时，我被告知“SQL Server 项目只能引用其他 SQL Server 项目”。任何人都可以帮助我解决问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T15:24:49.930

看起来这在技术上是不可能的。使用 Visual Studio 2010 创建的 SQL 项目不能引用任何外部程序集或 SQL 项目以外的任何其他 Visual Studio 项目。

# asp.net - HTTP 304 未修改响应需要几秒钟

> ID：11803965
> 
> 赞同：3
> 
> 时间：2012-08-03T22:09:21.193
> 
> 标签：asp.net, http, iis, windows-server-2008, http-status-code-304

我正在构建一个 ASP.NET 应用程序。我遇到了一些缓慢的加载时间，所以我使用 Fiddler 检查了流量。页面本身似乎在大约 3 秒内加载。

好吧，这有点慢，但让我感到困惑的是 js、css 和图像资产需要多长时间才能加载，即使它们正在被缓存。它在响应 304 之前需要 3 秒的 HTTP 请求。现在，我已经完成了 Web 开发的分享，我的理解是 304 响应不应该花费 3 秒。

我的怀疑是托管应用程序的服务器太弱了。它是一个运行 Windows Server 2K8 SP2 的虚拟机，内存约 2GB，物理机上至少有一个其他虚拟机同时运行。在我去给自己买一台新服务器之前，机器中的电源不足听起来可能是导致此问题的原因吗？

注意：延迟应该不是问题；我正在通过 Intranet 访问它。

# haskell - 如何 - 使用 emacs - haskell 模式将一个程序的输出传输到另一个（capslocker）的输入？

> ID：11803968
> 
> 赞同：3
> 
> 时间：2012-08-03T22:10:04.683
> 
> 标签：haskell, emacs, haskell-platform, haskell-mode

capslocker.hs 有以下代码：

```
import Control.Monad  
import Data.Char  
main = forever $ do  
    putStr "Give me some input: "  
    l <- getLine  
    putStrLn $ map toUpper l 
```

haiku.txt 有以下内容：

```
I'm a lil' teapot  
What's with that airplane food, huh?  
It's so small, tasteless 
```

在终端中，我能够做到：

```
optimight@optimight:~$ cat haiku.txt  
I'm a lil' teapot  
What's with that airplane food, huh?  
It's so small, tasteless 
```

还有这个：

```
optimight@optimight:~$ cat haiku.txt | ./capslocker  
Give me some input: I'M A LIL' TEAPOT  
Give me some input: WHAT'S WITH THAT AIRPLANE FOOD, HUH?  
Give me some input: IT'S SO SMALL, TASTELESS  
Give me some input: capslocker: <stdin>: hGetLine: end of file 
```

**如何在 emacs23 - haskell 模式下测试相同的（如在终端中所做的）？请指导。**

请注意，在 emacs - haskell 模式下，我尝试了以下操作：

```
GHCi, version 7.4.1: http://www.haskell.org/ghc/  :? for help  
Loading package ghc-prim ... linking ... done.  
Loading package integer-gmp ... linking ... done.  
Loading package base ... linking ... done.  
Prelude> :load "/home/optimight/capslocker.hs"  
[1 of 1] Compiling Main      ( /home/optimight/capslocker.hs, interpreted )  
Ok, modules loaded: Main.  
*Main> cat haiku.txt | ./capslocker  
<interactive>:3:15: parse error on input `|'   
*Main> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T22:17:52.750

在 ghci 提示符下，您可以通过添加前缀来调用 shell 命令`:!`。

```
*Main> :! cat haiku.txt | ./capslocker 
```

它应该在 emacs 中同样工作。

# javascript - Winston 日志的默认位置是什么？

> ID：11803970
> 
> 赞同：4
> 
> 时间：2012-08-03T22:10:36.257
> 
> 标签：javascript, node.js, logging, logfiles, winston

我正在使用这样的东西：

```
var winston = require('winston'), logger = new (winston.Logger)({
  transports: [
    new (winston.transports.Console) (),
    new (winston.transports.File) ({filename: 'test.log'})
  ]
});

logger.log('Hello world'); 
```

我在系统上的任何地方都找不到日志文件`test.log`，控制台中也没有异常或信息。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-05T01:40:33.963

没关系，我找到了答案。如果不指定目录，则与代码在同一目录下。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-01-17T06:58:48.977

将以下代码段粘贴到您的`winston.helper.js`

```
// create directory for logs first
if (!fs.existsSync("logs")) {
    fs.mkdirSync("logs");
} 
```

*或者*

您可以在`package.json`脚本中编写命令例如

```
"dev": "mkdir logs | ..." 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-12-12T13:22:33.820

像这样设置文件名的路径 '${__dirname}/filename' 如果这不起作用将冒号更改为反引号

# ruby-on-rails - NilClass 的未定义方法“model_name”：创建部分时的类

> ID：11803971
> 
> 赞同：0
> 
> 时间：2012-08-03T22:10:36.957
> 
> 标签：ruby-on-rails, ruby, partial

我正在尝试使用 <%= render "/shopping/coupons/cou" %> 创建部分模板。不太确定哪里出错了。谢谢！

这是错误信息。

```
undefined method `model_name' for NilClass:Class

Extracted source (around line #3):
1: <h4> Coupon </h4>
2: 
3: <%= form_for(@coupon, :url => shopping_coupon_path(@coupon)) do |f| %>
4:   <div class="field">
5:     <%= f.label :code %>
6:     <%= f.text_field :code %> 
```

这是我的优惠券控制器

```
class Shopping::CouponsController < Shopping::BaseController
  def cou
    form_info
  end

  def create
    @coupon = Coupon.find_by_code(params[:coupon][:code])

    if @coupon && @coupon.eligible?(session_order) && update_order_coupon_id(@coupon.id)
      flash[:notice] = "Successfully added coupon code #{@coupon.code}."
      redirect_to shopping_orders_url
    else
      form_info
      flash[:notice] = "Sorry coupon code: #{params[:coupon][:code]} is not valid."
      render :action => 'show'
    end
  end

  private

  def form_info
    @coupon = Coupon.new
  end

  def update_order_coupon_id(id)
    session_order.update_attributes( :coupon_id => id ）                                      
  end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T23:04:34.973

渲染视图时，@coupon 为 nil。问题可能是`<%= render "/shopping/coupons/cou" %>`没有通过`cou`控制器中的操作，因此`form_info`方法没有执行并且@coupon 没有被分配一个值。

您必须在呈现主视图的操作中设置@coupon（其中包含主视图`<%= render "/shopping/coupons/cou" %>`）。

# macos - 使用自定义资源和脚本创建平面 .pkg 文件的脚本化方式

> ID：11803972
> 
> 赞同：0
> 
> 时间：2012-08-03T22:10:54.430
> 
> 标签：macos, packagemaker, xar

我使用 PackageMaker 3.0.6 在 10.7 上创建了一个带有以下选项的平面 .pkg 文件：

```
/Applications/PackageMaker.app/Contents/MacOS/Package --root ./myroot \
 --id com.myroot.pkg --title "My Root" --scripts ./scripts --target 10.5 \
 --verbose --resources ./resources --root-volume-only --domain system \
 --no-relocate --versio 1.0 --certificate "My Cert Name" 
```

在我拥有的`resources`文件夹中，在我拥有的文件夹中`background.png`，`Welcome.rtf`以及这些脚本的各种支持文件。生成的 .pkg 似乎功能齐全，只是安装程序不显示我的背景、欢迎或许可证。`License.rtf``scripts``preflight``postflight`

**如何为平面包添加自定义背景、欢迎和许可？**

据我所知，`Distribution`.pkg 中的文件缺少对背景、欢迎和许可文件的引用。

作为一种解决方法，我尝试使用`xar`. 如果我像这样用 xar 解包：

```
xar -xf ./myroot.pkg -C work 
```

并为这些文件添加 3 个标签，然后用 xar 再次打包：

```
cd work && xar -cf ../myroot2.pkg * 
```

我得到一个包，可以在我的背景等情况下开始安装，但是当安装我的 .app 时，我得到了这些错误（来自`/var/log/install.log`）：

```
 run preupgrade script for myroot
Could not create task for action: run preupgrade script for myroot2
Install failed: The Installer could not extract files from the package for myroot2\. Contact the software manufacturer for assistance.
IFDInstallController 863170 state = 7 
```

我也试过 Flat Package Editor：打开 myroot.pkg，拖出 Distribution，编辑，拖回来，删除旧的 Distribution，保存。与 xar 相同的问题。

我宁愿拥有一个完全可编写脚本的解决方案，而不是使用 GUI。

**编辑：**我还尝试使用`pkgutil`扩展、编辑分发和重新扁平化包。这会在安装程序中获取图标和自述文件，但安装程序随后无法解压缩有效负载。如果我用`Flat Package Editor`. 我还尝试创建一个没有 PackageMaker 的扩展包（它可以工作，除了 10.8），但是当我尝试使用 pkgutil 将其展平时，结果又是一个损坏的包。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T08:49:24.557

PackageMaker 总是有问题，并且在 Mac OS X 10.6 Snow Leopard 中被弃用。

您应该将[pkgbuild 与 productbuild 一起使用](https://stackoverflow.com/questions/11487596/making-os-x-installer-packages-like-a-pro-xcode4-developer-id-mountain-lion-re/11487658#11487658)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T06:35:17.983

这个[Mac 安装程序博客](http://macinstallers.blogspot.in/)有一些关于 Packagemaker 的有用帖子，包括有关使用的详细信息和常见问题的解决方案。希望它会有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-26T17:20:40.770

查看[Luggage](https://github.com/unixorn/luggage "行李") - 它是一个 Makefile 帮助文件，可让您使用健全的 Makefile 创建 OS X 包。免责声明：我是它的原作者，虽然现在有很多其他人的贡献。

# jquery - event.preventDefault() 不适用于两个输入框中的第二个

> ID：11803976
> 
> 赞同：0
> 
> 时间：2012-08-03T22:11:17.240
> 
> 标签：jquery, html, input

/我在 html 中有两个输入框，每个输入框都有一个单独的表单元素集：

```
<input id="RecommendationDaysInputTextBox" class="NumberOfDaysInputTextBox" name="RecommendationDaysInputTextBox" type="text" value="90" />
<input id="ReviewDaysInputTextBox" class="NumberOfDaysInputTextBox" name="ReviewDaysInputTextBox" type="text" value="360" /> 
```

我想在用户输入数据后按回车键时停止默认传播（我用“更改”和“键升”更正）。

我正在使用这个：

```
$(".NumberOfDaysInputTextBox").keyup(function(e) {
    if (e.which == 13) {
        e.preventDefault();
        /* e.stopPropagation(); */
        $(this).trigger("change");
    }
});​ 
```

它正在第一个盒子上工作，但不是第二个盒子。在第二个上按 Enter 会导致发布和刷新（所有浏览器）。无论我将数据输入框中并按 Enter 键的顺序如何，都会发生这种情况。

有没有人解释我做错了什么以及如何正确做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T22:18:05.497

我猜，问题在于提交是在 keydown 时立即触发的。如果您改为将函数设置为在 keydown 上执行...

```
$(".NumberOfDaysInputTextBox").keydown(function(e)
{
    if (e.which == 13)
    {
        e.preventDefault();
        e.stopPropagation();
        $(this).trigger("change");
    }
});​ 
```

...问题似乎得到了解决。

这是一个小提琴[http://jsfiddle.net/jthGY/](http://jsfiddle.net/jthGY/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T22:21:24.933

您不想使用 keyup，因为此时它已经触发了默认操作。参考：[http](http://www.quirksmode.org/dom/events/keys.html) ://www.quirksmode.org/dom/events/keys.html 。研究使用keydown。

# php - PHP 会话和 session_start()

> ID：11803978
> 
> 赞同：1
> 
> 时间：2012-08-03T22:11:42.513
> 
> 标签：php, session

对不起，如果这是一个愚蠢的问题，但最近我一直在为客户设计一个网站，我的会话发生了一些奇怪的事情。

该网站有一个 PayPal 按钮，可将用户重定向到 PayPal，以便他们在再次重定向到该网站之前确认付款。

在重定向用户之前，会保存大量会话变量。其中一些与 PayPal 有关，另一些与我网站上的内容有关，例如确定哪个用户登录的变量、他们的购物车项目等。

现在，这就是事情出错的地方......

用户从 checkout.php 重定向到 PayPal。在它们被重定向之前，站点的所有会话变量都存在（由 var_dump 和 print_r 显示）。这可以。

用户从 PayPal 返回到 orderreview.php，但 var_dump 和 print_r 现在显示站点会话变量丢失，但所有 PayPal 变量都在那里。

我通过删除“session_start();”解决了这个问题 从 orderreview.php 的顶部。

所以我的问题是，为什么删除该行可以解决问题？为什么以前不能用？

我以为我理解 PHP 会话，但显然我并不像我想象的那样理解它们。

我在某处读过这个：

“从 PHP 4.3.3 开始，在会话已经启动时调用 session_start() 将导致 E_NOTICE 级别的错误。此外，第二次会话启动将被忽略。”

所以我假设在脚本顶部调用 session_start 不会影响任何会话，如果会话已经更早启动。

感谢您的任何回答，如果这是一个愚蠢的问题，我再次道歉。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T22:16:18.847

这可能是因为在此过程中您已被重定向到另一个站点。当您从 Paypal 返回您的网站时，`session_start()`会生成一个新的会话 ID，您之前存储的会话变量未链接到该 ID。

当你删除时`session_start()`（我不认为会话应该在没有这个的情况下工作），它使用旧的会话 ID 并且永远不会重新生成。因此，旧的会话数据又回来了！

这只是我的假设。

# c# - 如何锁定成员变量？

> ID：11803981
> 
> 赞同：0
> 
> 时间：2012-08-03T22:12:00.607
> 
> 标签：c#, multithreading, locking

出于示例目的，我已简化此代码：

```
class TextLogger : IDisposable
{
    private FileStream m_FileStream;
    private StreamWriter m_StreamWriter;

    void CreateNewLogFile()
    {
          //Open the File
       m_FileStream = File.Open(
           m_CurrentFileName,
           FileMode.OpenOrCreate,
           FileAccess.Write,
           FileShare.Read );

       m_StreamWriter = new StreamWriter( m_FileStream );
       ....
    }
} 
```

我`InvalidArgumentException`在尝试更新 StreamWriter 时得到一个，因为`m_FileStream`已经被另一个线程处理并且为空（`m_StreamWriter`也是空的）。如何在成员变量周围加锁？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T22:20:01.987

你应该做这样的事情

```
class TextLogger : IDisposable
{
    private FileStream m_FileStream;
    private StreamWriter m_StreamWriter;
    private object m_Lock = new object();

    void CreateNewLogFile()
    {
        lock (m_Lock)
        {
            if ( m_FileStream != null )
                m_StreamWriter = new StreamWriter(m_FileStream);
        };
    }

    void CalledFromOtherThread()
    {
        //Do stuff

        lock (m_Lock)
        {
            if (m_FileStream != null)
                m_FileStream.Dispose();
            m_FileStream = null;
        }
    }
} 
```

当`CalledFromOtherThread`从另一个线程调用时，它应该获取锁，然后释放 m_FileStream。这样，`CreateNewLogFile`您将永远不会有处置的 FileStream

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T22:23:11.353

[ThreadLocal](http://msdn.microsoft.com/en-us/library/dd642243.aspx)更好_

```
 static void Main()
    {
        // Thread-Local variable that yields a name for a thread
        ThreadLocal<string> ThreadName = new ThreadLocal<string>(() =>
        {
            return "Thread" + Thread.CurrentThread.ManagedThreadId;
        });

        // Action that prints out ThreadName for the current thread
        Action action = () =>
        {
            // If ThreadName.IsValueCreated is true, it means that we are not the
            // first action to run on this thread.
            bool repeat = ThreadName.IsValueCreated;

            Console.WriteLine("ThreadName = {0} {1}", ThreadName.Value, repeat ? "(repeat)" : "");
        };

        // Launch eight of them.  On 4 cores or less, you should see some repeat ThreadNames
        Parallel.Invoke(action, action, action, action, action, action, action, action);

        // Dispose when you are done
        ThreadName.Dispose();
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-03T23:22:12.553

如果您的`IDisposable`对象实例已被其`Dispose()`调用的方法处理掉，则该对象引用是 - 或者应该是 - 不再可用，因为它的内部状态已被销毁等待垃圾回收。

您应该实例化一个新的对象实例，而不是尝试重用现有的对象实例。

当对已处置的对象执行任何操作时，精心设计的对象应抛出[InvalidOperationException的特定子类型：](http://msdn.microsoft.com/en-us/library/system.invalidoperationexception.aspx) [ObjectDisposedException](http://msdn.microsoft.com/en-us/library/system.objectdisposedexception.aspx)（可能的处置后调用例外`Dispose()`。）

[IDisposable](http://msdn.microsoft.com/en-us/library/system.idisposable.aspx)的文档在社区内容部分中有一个很好的[IDisposable](http://msdn.microsoft.com/en-us/library/system.idisposable.aspx)线程安全实现的示例。

# frameworks - 实体框架 ExecuteStoreCommand

> ID：11803986
> 
> 赞同：1
> 
> 时间：2012-08-03T22:12:16.193
> 
> 标签：frameworks, entity

我正在尝试使用实体框架。我还需要查询我尝试使用 ExecuteStoreCommand 的目录表 - 但它没有填充记录。

这是代码

```
[Table("INFORMATION_SCHEMA.COLUMNS")]
public class CatalogColumnDef
{
    private string tableCatalog;

    [Column("TABLE_CATALOG")]
    public string TableCatalog
    {
        get { return tableCatalog; }
        set { tableCatalog = value; }
    }

    public override string ToString()
    {
        return ToStringBuilder.ReflectionToString(this);
    }
} 
```

}

ObjectContext objectContext = ((IObjectContextAdapter)this).ObjectContext; objectContext.ExecuteStoreCommand("使用 AdventureWorks"); var result = objectContext.ExecuteStoreQuery("select * from INFORMATION_SCHEMA.COLUMNS WHERE TABLE_NAME = 'Personn'");

它获取记录，但字段值 tableCatalog 设置为空。为什么它无法正确填充值？

# objective-c - 在另一种方法中添加活动指示器以避免挂起

> ID：11803987
> 
> 赞同：0
> 
> 时间：2012-08-03T22:12:22.773
> 
> 标签：objective-c, ios, xcode, reachability

我已将 Apple 的 Reachability.h 实施到我的演示应用程序中。问题是我注意到我的应用程序在检查连接时停止了。

所以，我添加了一个活动指示器（来自[MBProgressHUD](https://github.com/jdg/MBProgressHUD)）。但指标没有动画。它也与应用程序一起停止。

所以，我想把活动指示器放在与主线程不同的另一个线程中，但它仍然没有动画。

注意：我不是很有经验

更新：另外，我尝试了本地活动指示器，但没有运气。

```
- (void)anotherThread
{
    NSAutoreleasePool *pool = [[NSAutoreleasePool alloc] init]; 

    HUD = [[MBProgressHUD alloc] initWithView:self.navigationController.view];
    [self.navigationController.view addSubview:HUD];

    // Set determinate mode
    HUD.mode = MBProgressHUDModeDeterminate;

    HUD.delegate = self;
    HUD.labelText = @"loading";

    // myProgressTask uses the HUD instance to update progress
    [HUD showWhileExecuting:@selector(crazyCounter) onTarget:self withObject:nil animated:YES];

    [pool release];  
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T22:19:29.727

UI 代码应该保存在主线程中。因此，您可能希望使用 GCD（大型中央调度）将检查连接代码放入另一个线程，而不是将活动指示器放入另一个线程。完成后，您可以删除或隐藏活动指示器。

PS。我不太确定是什么`MBProgressHUD`，但你确实想确保你有类似`[activityIndicator startAnimating]`. 至少对于正常的活动指示器，您需要手动将其打开。

# smtp - 使用 JavamailAPI 发送电子邮件时设置 IMAP 主机名

> ID：11803988
> 
> 赞同：0
> 
> 时间：2012-08-03T22:12:42.127
> 
> 标签：smtp, imap, jakarta-mail, hostname

我有一个 IMAP 服务器主机名：xyz.com。我的 SMTP 主机名是：comcast.net。

现在，当我通过 Outlook 发送电子邮件时，它会自动将我的 ID [发件人 ID] 显示为：myusername@xyz.com 而不是 myusername@comcast.net。

我想使用 JavaMail API 来实现同样的目的。

当我使用 JavaMail API 时，它会将发件人显示为 myusername@comcast.net。我明白这是它的工作方式。用于接收电子邮件的 IMAP 和用于发送电子邮件的 SMTP。

但是，我想开发类似于 Outlook 的行为，它在发件人 ID 中设置 IMAP 服务器主机名，而不是 SMTP 的服务器主机名。

谢谢和问候， Ravikiran Mane。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T23:06:32.460

我认为您正在谈论您在邮件的 From 标头中放入的内容（使用 setFrom 方法）与登录到邮件服务器以发送邮件时使用的用户名（使用 connect 方法）之间的区别. 通常它们是相同的。您的邮件服务器可能允许也可能不允许您在 From 标头中设置不同的地址。一些邮件服务器会要求您验证备用发件人地址实际上是**您的**地址，然后它们才会允许您发送带有发件人标头的邮件。

# c# - ASP.NET、MySQL 和 sql 查询来自

> ID：11803991
> 
> 赞同：0
> 
> 时间：2012-08-03T22:12:46.340
> 
> 标签：c#, asp.net, mysql, sql, select

使用 ASP.net。我可以很好地连接到 MySQL 数据库。但是，似乎我不能使用自动配置选择语句，因为它在语句中添加了 []。

```
SELECT [main_id], 
       [main_user],  
       [main_regional], 
       [main_desc],
       [main_status],
       [main_ts] 
FROM [main] 
```

我怎样才能解决这个问题？我总是可以使用自定义 sql 语句，但我真的很想使用 GUI；它是如此简单和快速。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T16:00:53.027

找到了这个。 [http://forums.asp.net/t/1747752.aspx/1](http://forums.asp.net/t/1747752.aspx/1)

# excel - Excel：合并多行并添加相似的列

> ID：11803993
> 
> 赞同：-1
> 
> 时间：2012-08-03T22:12:57.040
> 
> 标签：excel

希望这是一个简单的问题：我需要在电子表格中组合一些相似的行，但我需要在其中一列中添加值。例如，数据如下所示：

```
Result  Count  ID
100     75     xxx
100     10     xxx
100      5     xxx
95      35     yyy
95      40     yyy
95      10     yyy 
```

我想合并所有行，以便 ID xxx 只有一行，yyy 有一行，这样最终的电子表格将如下所示：

```
Result     Count     ID
100        114       xxx
95         75        yyy 
```

我知道我可能可以使用 sum，但我正在处理数千行数据，并且想知道是否有办法更快地做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T22:41:36.240

你的例子没有意义，数字不加起来。你也可以有类似的东西：

```
Result     Count     ID
100        114       xxx
95         75        xxx
80         70        yyy 
```

我想你可以用数据透视表走得很远。还有许多其他方法，但数据透视表更直观且易于定制。

选择您的数据，转到数据菜单并单击数据透视表。将弹出数据透视表构建器。将 ID 列拖到 Row Labels 列表中，将 Count 拖到 Values 列表中，然后再次将 Result 拖到 Row 标签列表中。

实际上，您可以使用数据透视表以任何方式对数据集进行切片和切块。要了解更多信息，只需弹出数据透视表的帮助 (F1) 并遵循一些示例。

# ms-access - 关于 access 2007 查询

> ID：11803996
> 
> 赞同：1
> 
> 时间：2012-08-03T22:13:12.717
> 
> 标签：ms-access

我在 access 2007 中构建了一个名为 projects 的表单和一个 employees 表。表单上的一个字段称为 installers sent。我希望安装程序发送框根据员工表中员工的名字自动填充。如何才能做到这一点？如果我需要进一步澄清，我会的。这是我第一次使用访问权限，所以我不确定我在做什么

编辑：我不确定你所说的代码是什么意思。但基本上，我有一个记录员工信息的表格和另一个记录项目细节的表格。两者都有一个关联的表格，便于数据输入。在项目表上，我有一个字段，安装程序已发送到项目站点。显然，所有这些人也是雇员。我想做的是让员工信息在用户输入员工名字时自动填充。我假设我可以设置一个查询来执行此操作，但我不确定如何

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T08:53:34.743

您的问题仍然让我有些困惑，因为您只提到了两个表但有多个安装程序（员工）。这表明您需要三个表：

```
Projects
ProjectID

Employees
EmployeeID

ProjectsEmployees
ProjectID
EmployeeID 
```

然后可以将其设置为主表单和子表单：[Binding a combobox in subform Access](https://stackoverflow.com/questions/11793726/binding-a-combobox-in-subform-access/11794018#11794018) (prettier subform [Difficult cross-tab query](https://stackoverflow.com/questions/11781547/difficult-cross-tab-query/11783796#11783796) )

另一种选择是将行源设置为的列表框：

```
SELECT EmployeeName FROM Employees 
INNER JOIN ProjectsEmployees
ON Employees.EmployeeID = ProjectsEmployees.EmployeeID
WHERE ProjectsEmployees.ProjectID = Forms!TheCurrentFormName!ProjectID 
```

# objective-c - 为什么 UIViewController 在旋转时不填充窗口，而 UINavigationController 呢？

> ID：11803999
> 
> 赞同：2
> 
> 时间：2012-08-03T22:13:26.527
> 
> 标签：objective-c, ios, uiviewcontroller, uinavigationcontroller, autorotate

我刚刚注意到，当 UIViewController 是窗口上的根控制器时，自动旋转会使窗口在旋转时流血。

![UIViewController 作为根控制器](../Images/95a0f1f0fb6b6d24a8a7d562c0d4abd7.png)

但是，当您使用 UINavigationController 作为根控制器时，情况并非如此。UINavigationController 有什么不同的做法来避免渗透？

![UINavigationController 作为根控制器](../Images/196369e83dcca28b665a2058a007d554.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T21:19:02.577

我的猜测（不幸的是我目前没有一个好的 Xcode 来测试），它与 UIViewController 的`wantsFullScreenLayout`属性有关。我怀疑 UINavigationController 返回`YES`，默认 VC 返回`NO`。