# StackOverflow 问答 10251000-10251999

# android - 如何在android中的onTouchEvent（MotionEvent事件）中获取imageView

> ID：10251002
> 
> 赞同：2
> 
> 时间：2012-04-20T17:45:36.750
> 
> 标签：android, touch, imageview

我定义了 onTouchEvent(MotionEvent event) 来接收 imageview 的触摸事件。我正在使用多个图像视图，我必须找到接收到触摸事件的图像视图。是否可以在 onTouchEvent 中获取 imageview？

```
public void createImageViews()
{
  int i = 0;

  imageArray[0] = (ImageView)findViewById(R.id.image1);
  imageArray[1] = (ImageView)findViewById(R.id.image2);
  imageArray[2] = (ImageView)findViewById(R.id.image3);
  imageArray[3] = (ImageView)findViewById(R.id.image4);
  imageArray[4] = (ImageView)findViewById(R.id.image5);
  imageArray[5] = (ImageView)findViewById(R.id.image6);

  for (i = 0; i < count; i++)
  {
    imageArray[i].setOnTouchListener(this);
  } 
}
 public class Touch extends Activity implements OnTouchListener, AnimationListener { } 
```

我试过使用

```
 public boolean onTouch(View v, MotionEvent event) { } but not receiving the touch events. 
```

在 imageview 上启动动画后，我没有在 onTouch() 中观察到触摸事件，也没有在 onTouchEvent() 中获得触摸事件。imgArray[g_animCount].startAnimation(movArray[g_animCount]);

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T17:48:32.363

您可以覆盖 onTouchListener。onTouchListener 的代码是

```
@Override
public boolean onTouch(View v, MotionEvent event) {
/// your stuff
} 
```

使用 View v 知道被触摸的视图

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-20T17:56:31.403

```
use the below sample code snippet::::

    public class MyImageView extends Activity implements OnTouchListener{
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.lay_name);        
        int i = 0;
        imageArray[0] = (ImageView)findViewById(R.id.image1);
        imageArray[1] = (ImageView)findViewById(R.id.image2);
        imageArray[2] = (ImageView)findViewById(R.id.image3);
        imageArray[3] = (ImageView)findViewById(R.id.image4);
        imageArray[4] = (ImageView)findViewById(R.id.image5);
        imageArray[5] = (ImageView)findViewById(R.id.image6);

        for (i = 0; i < count; i++)  {
            imageArray[i].setOnTouchListener(this);
         } 

    }

    @Override
    public boolean onTouch(View v, MotionEvent event) {
        // TODO Auto-generated method stub
        switch(v.getId()){
        case R.id.image1:
        //your stuff
        break;
        case R.id.image2:
        //your stuff        
        break;
        case R.id.image3:
        //your stuff
        break;
        case R.id.image4:
         //your stuff
        break;
        case R.id.image5:
         //your stuff
        break;
        case R.id.image6:
         //your stuff
        break;
        }
    } 
```

}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T18:21:01.873

您可以在布局 xml 中`android:onClick="clickHandler"`为每个设置并在您的中定义一个方法来处理触摸/单击事件。`View``public void clickHandler(View view)``Activity`

这是在 1.6 中引入的。检查此[链接](http://android-developers.blogspot.co.uk/2009/10/ui-framework-changes-in-android-16.html)以获取更多详细信息。

# shell - 修改脚本以将先前输入的先前进程应用于任何可能数量的输入

> ID：10251004
> 
> 赞同：0
> 
> 时间：2012-04-20T17:45:44.893
> 
> 标签：shell, unix, sed, csh

我目前将此脚本设置为 $1 $2，它接受两个输入，一个是扩展名，一个是文件名，并在相对路径中搜索文件名，如果找到，则用新扩展名替换文件（或者如果相同的扩展名），如果未找到，则打印错误消息。

```
#!/bin/csh                                                                      
set ext="$1"
set oldName="$2"
if (-r "$oldName") then
set newName=`echo "$oldName" | sed 's/\.[A-Za-z0-9]*$/'".$ext"'/g'`
if ( "$oldName" == "$newName" ) then
:
else
mv "$oldName" "$newName"
endif
else
echo "$oldName": No such file
endif 
```

我需要修改此脚本，以便 $1 始终是扩展名，但 $2 可以是任意数量的可能输入，例如：

```
./chExt.sh 'bat' 'bool.com' 'nofilefound.biz' 'james.bro' 
```

并且基本上会使

```
bool.bat
nofilefound.biz: No such file
james.bat 
```

所以它总是将 $1 读取为扩展名，并且总是将 $2-$n 视为需要与原始脚本应用相同的进程。

我必须专门使用“foreach”和“shifts”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-21T19:43:38.867

在 C-Shell 中，您可以`$argv[2-]`获取参数 2 的数组，依此类推。只需将该数组`foreach` 与修饰符一起放入循环中`:q`以处理文件名中的空格即可。

```
#!/bin/csh
set ext="$1"

foreach oldName ( $argv[2-]:q )

   if (-r "$oldName") then
       set newName=`echo "$oldName" | sed 's/\.[A-Za-z0-9]*$/'".$ext"'/g'`
       if ( "$oldName" == "$newName" ) then
           :
      else
          mv "$oldName" "$newName"
      endif
  else
      echo "$oldName": No such file
  endif

end 
```

如果您想使用`shift`and `foreach`，只需使用 将`shift`第一个参数从参数列表中剔除并循环遍历其余参数：

```
#!/bin/csh
set ext="$1"

shift
foreach oldName ( $argv )

    set oldName = $1
    if (-r "$oldName") then
        set newName=`echo "$oldName" | sed 's/\.[A-Za-z0-9]*$/'".$ext"'/g'`
        if ( "$oldName" == "$newName" ) then
            :
        else
            mv "$oldName" "$newName"
        endif
    else
        echo "$oldName": No such file
    endif

end 
```

# perl - perl - 一个循环遍历并杀死 pid 的衬垫

> ID：10251006
> 
> 赞同：1
> 
> 时间：2012-04-20T17:45:57.677
> 
> 标签：perl

如何`kill -9`在这个 perl 单行中执行？我已经找到了列出 pid 的位置，并且可以将其打印到文件中，如下所示：

```
ps -ef | grep -v grep |grep /back/mysql | perl -lane '{print "kill -9 $F[1]"}' 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-20T17:52:52.113

您是否考虑过[pkill 或 pgrep](http://linux.die.net/man/1/pkill)？

```
pkill /back/mysql 
```

或者

```
pgrep /back/mysql | xargs kill -9 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-20T17:48:46.863

好的，根据我的原始答案进行了大量编辑。

首先，直截了当的答案：

```
ps -ef | grep -v grep |grep /back/mysql | perl -lane 'kill 9, $F[1]' 
```

完毕。

但`grep | grep | perl`这样做是一种愚蠢的方式。我最初的反应是“为什么需要 Perl？” 我通常会用`awk | kill`.

```
ps -ef | awk '/\/back\/mysql/ {print $2}' | xargs kill -9 
```

（请注意，awk 不会找到自己，因为字符串“\/back\/mysql”与模式 /\/back\/mysql/ 不匹配）

您当然可以使用 Perl 代替 awk：

```
ps -ef | perl -lane 'print $F[1] if /\/back\/mysql/' | xargs kill -9 
```

（我故意使用倾斜的牙签而不是不同的分隔符，这样进程就不会发现自己，就像 awk 的情况一样。）

然后问题从“为什么需要 perl？”切换。到“为什么需要 grep/awk/kill？”：

```
ps -ef | perl -lane 'kill 9, $F[1] if /\/back\/mysql/' 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-20T18:07:54.243

`ps`对于初学者，让我们使用更合适的命令。

```
ps -e -o pid,cmd --no-headers |
   perl -lane'kill(KILL => $F[0]) if $F[1] eq "/back/mysql";' 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-20T17:53:06.757

```
ps -ef | grep -v grep |grep /back/mysql | perl -lane 'kill(9, $F[1])' 
```

该[`kill`](http://perldoc.perl.org/functions/kill.html)函数在 Perl 中可用。

您也可以省略这两个`grep`命令：

```
ps -ef | perl -lane 'kill(9, $F[1]) if m%/back/mysql\b%' 
```

（*未经测试*）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-20T17:53:31.843

为什么不使用更多的 Perl？

```
ps -ef | perl -ane 'kill 9,$F[1] if m{/back/mysql}' 
```

# linux - centos LiveCD 是什么？

> ID：10251013
> 
> 赞同：0
> 
> 时间：2012-04-20T17:46:16.207
> 
> 标签：linux, centos

参考：[https ://projects.centos.org/trac/livecd/wiki](https://projects.centos.org/trac/livecd/wiki)

我无法找到 LiveCD 的含义？

这是否意味着我可以在 CD 上运行操作系统而无需在本地机器上进行任何安装？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-20T17:47:40.943

Live CD、Live DVD 或 Live 光盘是一个完整的可启动计算机操作系统，它在计算机内存中运行，而不是从硬盘驱动器加载

[http://en.wikipedia.org/wiki/Live_CD](http://en.wikipedia.org/wiki/Live_CD)

这使您能够尝试操作系统而无需安装它

# ruby-on-rails - Ruby on Rails - 多个表中的 Where 子句

> ID：10251014
> 
> 赞同：3
> 
> 时间：2012-04-20T17:46:21.137
> 
> 标签：ruby-on-rails, where-clause, where, multiple-tables

使用导轨 3.2.3。

这真让我抓狂。我知道活动记录应该简化这些类型的操作，但我无法理解它。

我有一个酒店和设施模型。两者都有 has_and_belongs_to_many 关系。一家酒店可以有很多设施，我的目标是根据酒店的名称/位置、评级和设施来搜索酒店。

我可以按前两个搜索，但不能按设施搜索（它们是搜索表单上的复选框）。

查看代码：

```
<%= form_tag hotels_path, :method =>'get' do%>
        <p>
            <b>Location:</b>
            <%= text_field_tag :search, params[:search]%><br /><br />

            <b>Rating:</b><br />
            <%= radio_button_tag :ranking, '5'%>5 Stars<br />
            <%= radio_button_tag :ranking, '4'%>4 Stars<br />
            <%= radio_button_tag :ranking, '3'%>3 Stars<br />
            <%= radio_button_tag :ranking, '10'%>Hostels<br /><br />

            <b>Facilities:</b><br />
            <% for facility in Facility.find(:all) %>
                <div class="field">
                    <%= check_box_tag "fc[]", facility.id%>
                    <%= facility.description %>
                </div>
            <% end %>

            <%= submit_tag "Search", :name => nil%>
        </p>
        <%end%> 
```

酒店管制员：

```
 def index
    @hotels= Hotel.search(params)

    respond_to do |format|
      format.html
      format.json { render :json => @hotels }
    end
  end 
```

酒店型号：

```
 def self.search(params)

     if params

      arel = where('city LIKE ? OR name LIKE ?', "%#{params[:search]}%", "%#{params[:search]}%")
      arel = arel.where('ranking = ?', params[:ranking]) if params[:ranking].present?
      #arel = arel.where (' = ?', params([:fc])) -> i dont know what to put here

      arel
     else
       all
     end
    end 
```

基本上它需要获取名称/位置，通过排名缩小范围，然后通过选中的复选框进一步缩小范围。我拿不到最后一个。名称/位置和评级在酒店表中，但每家酒店的设施都在设施_酒店联合表中（该表具有酒店 ID 和设施 ID 的键）顺便说一句，我可以创建一个拥有所有我想要的设施的酒店，所以两者的关系是正确的。

非常感谢任何帮助

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-20T17:54:00.773

您需要添加一个连接子句以使其连接到另一个表。

```
.joins(:facilities_hotels).where('facilities_hotels.facility_id = ?', params[:fc]) 
```

# ruby-on-rails-3 - Rails 3 - 在记录创建时比较日期

> ID：10251017
> 
> 赞同：0
> 
> 时间：2012-04-20T17:46:31.780
> 
> 标签：ruby-on-rails-3

我有一个带有 date_received、created_at 和 received_state 的发票模型。

创建记录后，我想比较 date_received 和 created_at 来更新 received_state。具体来说，如果 created_at 比 date_received 超过 2 天，received_state 应该等于 red。所以，像这样：

```
if created_at > date_received + 2 days
  @invoice.update_attribute(:received_state, red)
else
  @invoice.update_attribute(:received_state, green)
end 
```

我知道有 date-in-words 辅助方法，但不确定如何在这种情况下使用它们。感谢您的任何帮助。

更新：我尝试了以下方法。没有错误，但记录不会在以下任何一种情况下更新：

```
if (:date_received - :created_at).to_i > 2
  @invoice.update_attribute(:received_state, red)
else
  @invoice.update_attribute(:received_state, green)
end 
```

更新 2：我尝试了以下方法，即使满足绿色条件，记录也会更新为红色：

```
if :date_received.to_i - :created_at.to_i > 2
  @invoice.update_attribute(:received_state, red)
else
  @invoice.update_attribute(:received_state, green)
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T20:05:19.380

我会写：

```
if Date.current - 2.days > date_received
  self.received_state = red
else
  self.received_state = green
end 
```

在创建之前的钩子上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T18:38:57.560

首先，如果您想在创建对象之前更新它，您应该使用[回调方法](http://guides.rubyonrails.org/active_record_validations_callbacks.html#callbacks-overview)（`before_create`如果您的情况），您可以在其中使用`self.received_state = ...`而不是`update_attributes`

对于日期比较，我不确定，也许这样的事情可能有效：

```
d = self.date_received.clone
d.advance({:days => 2})
if self.created_at > d
   ... 
```

# android - 如果（当前屏幕== R.layout.main）

> ID：10251035
> 
> 赞同：1
> 
> 时间：2012-04-20T17:47:52.787
> 
> 标签：android, xml, view

我有 3 个布局；main.xml 、 secondscreen.xml 、thidrscreen.xml。

我想覆盖后退按钮，如当前屏幕（哪个屏幕打开）。

```
if( currentscreen == R.layout.main)
{
  do something
}
   else ( currentscreen == R.layout.secondscreen )
   {
     do something
   } 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T17:55:36.703

我不知道您为什么要这样做，确切地说，但是如果您在布局中的顶级视图上有一个 ID，您可能会这样做：

```
 if ( getContentView().getId() == R.id.myTopLevelViewFromMain ){
      // do stuff
 } else if ( getContentView().getId() == R.id.myTopLevelViewFromSecondScreen ){
      // do other stuff
 } 
```

等等

或者，正如对您问题的评论所建议的那样（这可能是更好的设计选择），您可以使用多个活动。

第三种方法是在布局中使用 3 个顶级视图，并根据需要操纵它们的可见性。

# linux - doxygen 可以对其创建的文件设置自定义权限吗？

> ID：10251037
> 
> 赞同：1
> 
> 时间：2012-04-20T17:48:03.563
> 
> 标签：linux, doxygen

有一个我不时通过 doxygen 运行的源存储库，它在我的 public_html 目录中生成 html。发现自己必须像这样更改 umask 并破解 bash 中的主要组，这很有效：

```
echo "umask $UMASK; doxygen include_config.conf" | newgrp $GROUP 
```

但它看起来很笨重，我不禁想知道是否有一些配置设置或选项开关让 doxygen 直接在它生成的所有文件/目录上设置 UID/组和权限？它经常用于在网站上生成 HTML，以至于几乎每个人都需要例如具有世界可读的输出。搜索了网页，配置文件和手册页无济于事。

**更新**：希望找到一些内置功能，但看起来没有。经过一些迭代后，这个包装器似乎可以完成这项工作：

```
#!/bin/bash
OUTPUT_PATH=/path/to/output
CONFIG_PATH=/path/to/include_config.conf
GROUP=somegroup
PERM=750
UMASK=027 

if [[ ! -e $OUTPUT_PATH ]]; then mkdir $OUTPUT_PATH; fi
chmod $PERM $OUTPUT_PATH
chmod g+s $OUTPUT_PATH
chgrp $GROUP $OUTPUT_PATH
umask $UMASK
doxygen $CONFIG_PATH 
```

它比原始脚本更健壮、便携且不那么笨重，同时仍然可以一次通过并且没有竞争条件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T20:35:12.310

据我所知，没有办法告诉 Doxygen 设置生成文件的所有权详细信息。考虑到 Doxygen 在没有任何 Linux 风格文件系统权限概念的系统上运行，如果这种东西被内置到应用程序中，我会感到惊讶。不过，编写一个构建文档并自动调整权限的简单脚​​本应该是微不足道的：

```
#!/bin/bash

doxygen include_config.conf
chgrp -R $GROUP $PATH_TO_OUTPUT_FOLDER
chmod -R $UMASK $PATH_TO_OUTPUT_FOLDER 
```

**更新：** 回应您的评论（我承认这有点离题）：我建议不要使用`newgrp`这样做。这是一个过时的命令，可以追溯到旧的 UNIX 时代，那时您一次只能在一个组中。在现代系统上使用它时可能会遇到一些奇怪的问题。如果您在调用之前添加以下内容，则`doxygen`在目录中创建的任何内容都将继承父文件夹的组（这基本上是您想要的）：

```
mkdir $PATH_TO_OUTPUT_FOLDER
chgrp $GROUP $PATH_TO_OUTPUT_FOLDER
chmod g+s $PATH_TO_OUTPUT_FOLDER 
```

将`chgrp`不再需要运行后的 Doxygen。作为奖励，它不会改变您当前登录会话或正在运行的进程的组 ID，也不会派生子 shell（`newgrp`通常会执行这两者之一）。

# asp.net - 使用单页程序集的 Asp.Net 网站部署

> ID：10251043
> 
> 赞同：1
> 
> 时间：2012-04-20T17:48:36.873
> 
> 标签：asp.net, deployment, web, assemblies

我们有一个 asp.net 网站项目，即我们正在发布具有以下选项的网站项目。

1.  允许此预编译站点可更新
2.  使用固定命名和单页程序集

请阅读这篇[预编译文章](http://msdn.microsoft.com/en-us/library/bb398860.aspx)以获得概述。

Asp.net 状态管理是进程内的，即我们不使用状态服务或 sql 服务器来进行状态。

为避免丢失会话状态等问题，我们通常在营业时间后进行生产部署（营业时间后不使用网站）。

我想知道以下文件部署对会话状态的影响：

1.  网络配置更新：应用程序池重新启动，会话状态丢失。所以网络配置更新必须在工作时间之后完成。
2.  单个页面 dll 更新：我不确定。这如何影响会话状态？我知道页面的 ViewStates 不会受到影响。**更新：我在本地测试，页面 dll 更新时会话状态丢失。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T18:14:44.313

你的问题不清楚你能否更具体一点我假设你问我部署我的网站时会话会发生什么，如果你更新任何 dll，如果用户连接到你的网站，会话将过期，同时你部署的会话将过期。例如，您在会话中保存用户 ID，那么它将不可用

# playframework-2.0 - 在 Play 框架中填充输入

> ID：10251046
> 
> 赞同：6
> 
> 时间：2012-04-20T17:48:47.097
> 
> 标签：playframework-2.0

尝试为表单中的输入传递一个值似乎不会产生任何结果。[帮助器 inputText](https://github.com/playframework/Play20/blob/master/framework/src/play/src/main/scala/views/helper/inputText.scala.html)的文档显示了一个 value 选项作为输入创建的一部分，但我不确定如何将所需的参数传递给构造函数。

我传入的参数如下：

```
@inputText(accountForm("accountName"), args = '_label -> "Account Name: ", '_value -> "Test") 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-10-09T23:08:22.860

您可以按照 Li-o 的建议填写`Form`类，也可以像这样覆盖模板本身中的表单值。这会将其设置为“测试”或“变量”的值。

```
@inputText(accountForm("accountName").copy(value=Some("Test")), args = '_label -> "Account Name: ")
@inputText(accountForm("accountName").copy(value=Some(variable)), args = '_label -> "Account Name: ") 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-20T19:31:34.287

`value`您在帮助程序中看到的参数`inputText`来自[`Field`](https://github.com/playframework/Play20/blob/master/framework/src/play/src/main/java/play/data/Form.java#L509)该类。如果你想给你的字段一个默认值，你必须在你的控制器中设置这个值。[`fill`](https://github.com/playframework/Play20/blob/master/framework/src/play/src/main/java/play/data/Form.java#L268)您可以使用类中的方法设置默认值`Form`。

注意：还有[HTML5 占位符属性](http://www.w3schools.com/html5/att_input_placeholder.asp)。您可以使用 inputText 帮助器传递此属性：`@inputText(accountForm("accountName"), 'placeholder -> "Test")`

# visual-studio - 如何使用 Visual Studio 2010 for C#？

> ID：10251054
> 
> 赞同：2
> 
> 时间：2012-04-20T17:49:38.517
> 
> 标签：visual-studio

我不久前购买了 Visual Studio 2010 用于 C++ 桌面开发（主要是学习，不是认真的开发）。现在我想从 C++ 迁移到 C#。

我尝试导入和导出设置并将默认设置更改为 C#，但它不存在。C# 是不同的产品还是应该存在？在尝试创建新的 C# 项目时，那里没有 C# 项目模板。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T17:52:12.623

前几天我也遇到了同样的问题。我刚刚在同一个问题上关注了这篇文章，它对我有用：

[如何将 Visual Studio 默认为 C# 项目而不是 VB.NET？](https://stackoverflow.com/questions/4927551/how-do-i-default-visual-studio-to-c-sharp-projects-instead-of-vb-net)

麦克风

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T17:51:57.560

转到命令行并执行

```
devenv.exe /resetuserdata 
```

（或者您可能需要向下遍历到 Visual Studio 目录）

下次启动 Visual Studio 时，您应该能够选择 C# Developer 推荐的设置。

# iphone - iPad 和 iPhone 不允许测试

> ID：10251058
> 
> 赞同：0
> 
> 时间：2012-04-20T17:49:59.637
> 
> 标签：iphone, ios, ipad

因此，我确实意识到，根据我的要求，有很多类似的问题，是的，我已经查看了它们并尝试了所有修复方法，但没有任何效果。

我当前的 Xcode 版本是 4.2

我没有用 XCode 或我的设备更新或更改任何东西，上次我使用 Xcode 时它们还在工作。现在，当我尝试任何 Xcode 项目时，它都不会在设备上运行它。当我尝试运行它时，它给我的唯一选项是 iOS 设备（它不会像往常那样在那里显示他们的名字）。当我运行它时，我会收到这样的消息：

> Xcode 无法使用所选设备运行。
> 
> 没有提供兼容 iOS 版本的预置 iOS 设备。将 iOS 设备与最新版本的 iOS 连接以运行您的应用程序或选择 iOS 模拟器作为目标。

当我在任一设备（一个是 iPad 2，另一个是旧的 iPhone 3G）上打开管理器时，它们都会显示一个黄点。在 iPad 上，它说我的软件版本是 5.1，但它不起作用。在这两种设备上，它都说明了以下内容：

> “iPad”上的 iOS 版本与使用此 iOS SDK 安装支持开发的任何 iOS 版本不匹配。

在我尝试过但没有看到结果的其他线程上提供的修复是：

- 单击管理器中“设备”部分中的“用于开发”（或类似内容）......它不存在。

- 我已尝试为我尝试运行的特定应用程序重新下载和安装配置证书......它不起作用，也没有说它已过期。

- 由于错误，我已尝试按照建议更改部署目标...仍然无法正常工作。

- 我已经尝试退出 Xcode 并重新启动它......不起作用。

-我已经尝试为我的计算机安装更新并重新启动...不起作用。

-我尝试过运行其他 Xcode 项目......不起作用并导致同样的问题。

有没有人有任何其他的建议。这一切都非常令人沮丧，我将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T17:52:42.633

1.  更新到 XCode 4.3.1，这是与 iOS 5 一起使用的版本。
2.  确保您的证书没有过期。他们只持续一年。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T17:56:18.460

如果您不想升级到 Lion 并使用 Xcode 4.2 保留 Snow Leopard，您可以使用[此处列出的说明](https://stackoverflow.com/questions/9613565/is-is-possible-to-get-the-ios-5-1-sdk-for-use-with-xcode-4-2-on-snow-leopard)

> 如果您有另一台 Mac 运行 Lion + XCode 4.3.1，您可以从以下位置复制文件：
> 
> “/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/DeviceSupport/5.1 (9B176)”
> 
> 到您的 SL Mac 上的等效位置：可能是“/Developer/Platforms/iPhoneOS.platform/DeviceSupport”
> 
> 并从 iPhoneOS.platform 的 Lion 机器中复制“version.plist”
> 
> 文件夹到 SL 机器。
> 
> 在 SL 机器上重新启动 XCode 并重新连接设备，看起来很开心。
> 
> [如果您无法访问具有 Lion+4.3.1 的机器，您可以从 4.3.1 DMG 中获取文件，该文件可以从 Apple 下载：http: [//adcdownload.apple.com/Developer_Tools/xcode_4 .3.1_for_lion/xcode_4.3.1_for_lion.dmg](http://adcdownload.apple.com/Developer_Tools/xcode_4.3.1_for_lion/xcode_4.3.1_for_lion.dmg)
> 
> 然后安装 DMG，在 XCode 图标上显示包内容并向下钻取
> 
> /Volumes/Xcode/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/DeviceSupport 到
> 
> 找到上面提到的文件。]
> 
> 您可能会发现在终端窗口中使用 Apple 专有的“同上”方法 (sudo ditto src dest) 来复制文件夹更方便。

# delphi - 使用 MSBuild 构建 EXE 时如何指定文件版本？

> ID：10251061
> 
> 赞同：1
> 
> 时间：2012-04-20T17:50:11.647
> 
> 标签：delphi, msbuild, delphi-2010

我正在尝试使用 MSBuild/Delphi 2010 编译 EXE，我试过这个：

MSBuild.exe /t:Clean;Build /p:config=Release;ExtraDefines="CodeTest" /property:FileVersion=1.0.0.15 "D:\MyProject\MyFile.dproj"

文件已构建但未设置版本

到底怎么了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T18:39:26.053

您的属性“FileVersion”在 MSBuild 会话中可用，但除非您有任务或目标以某种方式使用它，否则它不会用于任何事情。您要么需要（如 DHeffernan 所说）创建代码使用的版本资源，要么使用后编译工具将版本信息应用于您的 exe 或 dll。

这篇[StackOverflow 文章](https://stackoverflow.com/questions/284258/how-do-i-set-the-version-information-for-an-existing-exe-dll)列出了许多用于执行后编译操作的工具。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-29T08:22:43.907

这里的主要问题是`FileVersion`“属性”是 CSV 属性列表的一部分，`VerInfo_Keys`而不是属性本身。

所以，我看到的解决方案是：

1.  获取`VersInfo_Keys`财产（CSV 列表）
2.  将其拆分为 Key=Value 对
3.  更改 FileVersion=... 对的值
4.  加入列表返回 CSV 列表。

我已经使用[MSBuild 内联任务](https://msdn.microsoft.com/en-us/library/dd722601.aspx)[实现](https://gist.github.com/57b034e232be07452e9c4b865bc2896a)了这一点（注意：必须使用 .NET Framework 4.0 及更高版本）：

1.  将要点（如上所述）放入`lib\MSBuildTasks\Delphi.VersionInfo.targets`文件（在我的情况下为 git 子模块）

2.  添加到 Delphi 项目文件（比如`delphi-project.dproj`）：

    `<Import Project="lib\MSBuildTasks\Delphi.VersionInfo.targets" Condition="$(FileVersion)!='' and Exists('lib\MSBuildTasks\Delphi.VersionInfo.targets')"/>`

    条件“FileVersion 已设置”是为了避免 Delphi 失败，因为后者使用不支持内联任务的 .NET 3.5（因此，仅在使用 MSBuild 运行时才设置 FileVersion）。

3.  跑

    `msbuild delphi-project.dproj /t:build /p:FileVersion=A.B.C.D`

我用于 Android 应用程序的相同（使用 Delphi XE7/10 Seattle）。使用Just`VersionName`和`VersionCode`“属性”而不是`FileVersion`（NB`Import`的条件已适当更改）。

`msbuild delphi-project.dproj /t:build /p:VersionName=A.B.C.D`

# asp.net-web-api - ASP.NET Web API 消息处理程序

> ID：10251062
> 
> 赞同：5
> 
> 时间：2012-04-20T17:50:12.243
> 
> 标签：asp.net-web-api, dotnet-httpclient

是否可以控制自定义消息处理程序的执行顺序？

例如，我可能希望首先执行一个日志处理程序，所以我总是记录一个请求。

除了最后添加日志处理程序之外，我没有看到如何实现这一点。

```
config.MessageHandlers.Add(new CustomHandlerOne()); 
config.MessageHandlers.Add(new CustomHandlerTwo());
config.MessageHandlers.Add(new LoggingHandler()); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-21T13:38:10.513

您注册处理程序的顺序决定了它们何时被调用，但正如 Aliostad 指出的那样，它们在俄罗斯娃娃模型中工作，因此第一个 in 也称为最后一个 out，依此类推。

注册的处理程序在传入路径中以自下而上的方式调用，在传出路径中以自上而下的方式调用。也就是说，对于传入的请求消息，首先调用最后一个条目，但对于传出的响应消息，最后调用最后一个条目。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-17T23:06:50.160

> 我在这里基于 Codeplex ASP.NET Web Stack repo 上可用的最新位进行讨论。

顺序由用户控制，这里没有任意顺序。让我解释：

假设我们有两个消息处理程序：`MyMessageHandler`和`MyMessageHandler2`. 假设我们将它们注册如下：

```
protected void Application_Start(object sender, EventArgs e) {

    RouteConfig.RegisterRoutes(GlobalConfiguration.Configuration.Routes);
    GlobalConfiguration.Configuration.MessageHandlers.Add(new MyMessageHandler());
    GlobalConfiguration.Configuration.MessageHandlers.Add(new MyMessageHandler2());
} 
```

您在这里期望的是`MyMessageHandler`第一个和`MyMessageHandler2`第二个运行，换句话说，FIFO。

如果我们稍微深入了解一下框架内部，我们会看到实例的`Initialize`方法`HttpServer`正在调用`CreatePipeline`方法的方法`System.Net.Http.HttpClientFactory`（以前称为`HttpPipelineFactory.Create`方法，如阿里所说。）`CreatePipeline`方法接受两个参数：`HttpMessageHandler`和`IEnumerable<DelegatingHandler>`。`HttpServer.Initialize`方法将参数作为链中的最后一个传递`System.Web.Http.Dispatcher.HttpControllerDispatcher`，并将 HttpConfiguration.MessageHandlers 传递给参数。`HttpMessageHandler``HttpMessageHandler``IEnumerable<DelegatingHandler>`

该方法内部发生的事情`CreatePipeline`是非常聪明的IMO：

```
public static HttpMessageHandler CreatePipeline(HttpMessageHandler innerHandler, IEnumerable<DelegatingHandler> handlers)
{
    if (innerHandler == null)
    {
        throw Error.ArgumentNull("innerHandler");
    }

    if (handlers == null)
    {
        return innerHandler;
    }

    // Wire handlers up in reverse order starting with the inner handler
    HttpMessageHandler pipeline = innerHandler;
    IEnumerable<DelegatingHandler> reversedHandlers = handlers.Reverse();
    foreach (DelegatingHandler handler in reversedHandlers)
    {
        if (handler == null)
        {
            throw Error.Argument("handlers", Properties.Resources.DelegatingHandlerArrayContainsNullItem, typeof(DelegatingHandler).Name);
        }

        if (handler.InnerHandler != null)
        {
            throw Error.Argument("handlers", Properties.Resources.DelegatingHandlerArrayHasNonNullInnerHandler, typeof(DelegatingHandler).Name, "InnerHandler", handler.GetType().Name);
        }

        handler.InnerHandler = pipeline;
        pipeline = handler;
    }

    return pipeline;
} 
```

如您所见，消息处理程序的顺序颠倒了，并创建了[俄罗斯套娃](http://en.wikipedia.org/wiki/Matryoshka_doll)，但在这里要小心：确保这`HttpControllerDispatcher`是在链中运行的最后一个消息处理程序。

至于调用两次的问题，实际上并不完全正确。消息处理程序不会被调用两次，另一方面，您将提供的延续方法将被调用。由你来实现它。如果您提供回调（换句话说，延续），您的消息处理程序将在返回客户端的途中被调用，并生成您可以使用的响应消息。

例如，我们假设以下两个是我们上面注册的消息处理程序：

```
public class MyMessageHandler : DelegatingHandler {

    protected override Task<HttpResponseMessage> SendAsync(HttpRequestMessage request, System.Threading.CancellationToken cancellationToken) {

        //inspect request here

        return base.SendAsync(request, cancellationToken).ContinueWith(task => {

            //inspect the generated response
            var response = task.Result;

            return response;
        });
    }
} 
```

这是另一个：

```
public class MyMessageHandler2 : DelegatingHandler {

    protected override Task<HttpResponseMessage> SendAsync(HttpRequestMessage request, System.Threading.CancellationToken cancellationToken) {

        //inspect request here

        return base.SendAsync(request, cancellationToken).ContinueWith(task => {

            //inspect the generated response
            var response = task.Result;

            return response;
        });
    }
} 
```

正如我们提供的延续，我们的消息处理程序将在返回客户端的途中以 FILO 顺序被回调。因此，内部的延续方法`MyMessageHandler2`将是第一个在返回途中被调用的方法，而内部的延续方法`MyMessageHandler`将是第二个。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-20T18:10:47.033

不 - AFAIK。

这是俄罗斯娃娃模型，一个处理程序在另一个处理程序中，直到最后一个处理工作。这是内置在内部类中`HttpPipelineFactory`（您可以在发布时查看源代码）：

```
 public static HttpMessageHandler Create(IEnumerable<DelegatingHandler> handlers, HttpMessageHandler innerChannel)
    {
        if (innerChannel == null)
        {
            throw Error.ArgumentNull("innerChannel");
        }

        if (handlers == null)
        {
            return innerChannel;
        }

        // Wire handlers up
        HttpMessageHandler pipeline = innerChannel;
        foreach (DelegatingHandler handler in handlers)
        {
            if (handler == null)
            {
                throw Error.Argument("handlers", SRResources.DelegatingHandlerArrayContainsNullItem, typeof(DelegatingHandler).Name);
            }

            if (handler.InnerHandler != null)
            {
                throw Error.Argument("handlers", SRResources.DelegatingHandlerArrayHasNonNullInnerHandler, typeof(DelegatingHandler).Name, "InnerHandler", handler.GetType().Name);
            }

            handler.InnerHandler = pipeline;
            pipeline = handler;
        }

        return pipeline;
    } 
```

所以代码所做的就是得到一个列表，然后把它变成一个**俄罗斯娃娃**。

# iphone - EXC_BAD_ACCESS 在打开 WEPopover 时崩溃 glDrawArrays

> ID：10251063
> 
> 赞同：0
> 
> 时间：2012-04-20T17:50:23.190
> 
> 标签：iphone, opengl-es, crash, exc-bad-access

关于应用程序：由瓷砖构建的自定义openGL地图，具有在底图顶部绘制叠加层的功能。该应用程序适用于 iPad 和 iPhone。一些覆盖是基于图块的，它们工作得很好。有些是由圆圈组成的，在地图上的特定坐标处绘制。单击一个圆圈会打开一个弹出视图，其中包含有关地图上该特定点的信息。在 iphone 库 WEPopover 上用于实现类似于 UIPopoverViewController 的功能。

该问题仅出现在 iphone 和设备上。当覆盖包含大量圆圈时，打开带有信息的弹出视图有时会导致覆盖闪烁并最终导致 EXC_BAD_ACCESS 在线崩溃：glDrawArrays(GL_LINE_LOOP, 0, 360); 这只发生在 iphone 上，永远不会发生在 ipad 或模拟器上。

一点点代码：

用白色轮廓绘制黑色圆圈：

```
 for (int i = [pointsArray count]-1; i >= 0; i--) {
       int pinColor = 0xffff0000;

       static GLfloat vertices[720];

         for (int i = 0; i < 720; i += 2) {
         vertices[i]   = (cos(DEGREES_TO_RADIANS(i)) * scale * 1.5);
         vertices[i+1] = (sin(DEGREES_TO_RADIANS(i)) * scale * 1.5);
         }

        glVertexPointer(2, GL_FLOAT, 0, vertices);

        glEnableClientState(GL_VERTEX_ARRAY);
        glEnableClientState(GL_TEXTURE_COORD_ARRAY);
        glEnable(GL_BLEND);
        glBlendFunc (GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA);

        for (int dx = x0; dx <= x1; dx++)
        {
            glPushMatrix();

            GLubyte a = (pinColor >> 24) & 0xff;
            a = MIN((GLubyte) (opacity * 255), a);
            glColor4ub(0, 0, 0, a);

            GLfloat xx = point.x - centerX + dx * mapWidth;
            xx *= zoom;
            glTranslatef(xx, yy, 0);

            glDrawArrays(GL_TRIANGLE_FAN, 0, 360); <-----sometimes crash here

            int color = 0xffffffff;

            GLubyte n = (color >> 24) & 0xff;
            GLubyte r = (color >> 16) & 0xff;
            GLubyte g = (color >> 8) & 0xff;
            GLubyte b = (color >> 0) & 0xff;
            n = MIN((GLubyte) (opacity * 255), n);
            glColor4ub(r,g,b,n);

            glLineWidth(1);
            glDrawArrays(GL_LINE_LOOP, 0, 360); <------crash here
            glLineWidth(1);

            glPopMatrix();

        }

        glDisable(GL_BLEND);
        glDisableClientState(GL_VERTEX_ARRAY);
        glDisableClientState(GL_TEXTURE_COORD_ARRAY);

        glVertexPointer(2, GL_FLOAT, 0, 0);
  } 
```

在 iphone 上打开弹出窗口：

```
 WEPopoverController *_popover = [[WEPopoverController alloc] initWithContentViewController:pointDetails];
            _popover.popoverContentSize = pointDetails.view.frame.size;

            if ([[UIDevice currentDevice] orientation] == UIDeviceOrientationLandscapeLeft || [[UIDevice currentDevice] orientation] ==  UIDeviceOrientationLandscapeRight) 
            {

                CGRect myrect2 = CGRectMake(xx,yy, 1, 1);
                [_popover presentPopoverFromRect:myrect2 inView:self.view permittedArrowDirections:UIPopoverArrowDirectionAny animated:YES];

            } else {

                CGRect myrect2 = CGRectMake(xx, yy, 1, 1);
                [_popover presentPopoverFromRect:myrect2 inView:self.view permittedArrowDirections:UIPopoverArrowDirectionAny animated:YES];
            }
            self.detailsPopIphone = _popover;
            [_popover release]; 
```

每次触摸屏幕（移动缩放地图，打开弹出框）时，openGL 地图都会重新渲染。

我很乐意提供任何其他信息或代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T18:33:38.930

修复了这个问题。问题是openGL覆盖的渲染和WEPopover的动画同时发生，是什么导致了冲突。以渲染和动画依次发生的方式组织代码解决了问题。

# c# - 从列表中创建查询字符串

> ID：10251064
> 
> 赞同：0
> 
> 时间：2012-04-20T17:50:23.627
> 
> 标签：c#, asp.net, database

我在会话列表中有一些保存的文本，我想保存在数据库中。目前，结果包含 4 个不同的字符串。

```
List<string> result = (List<string>)HttpContext.Current.Session["Application"];

foreach (string element in result)
{
    //produce a query string?        
} 
```

我正在使用 oracle 数据库和其他插入的查询字符串，例如：

```
string sql = "insert into JOBQUESTIONS (JOBAPPLICATIONID, QUESTIONTEXT, TYPEID, HASCORRECTANSWER, CORRECTANSWER, ISREQUIRED) VALUES (" + JobID + ", \'" + QuestionText + "\', " + TypeID + ", " + HasCorrectAnswer + ", \'" + CorrectAnswer + "\', " + IsRequired + ")";
RunQuery(sql); 
```

所以，我需要创建一组值。但是请记住，这些都是字符串，所以我需要有 \' \' 像：\'" + CorrectAnswer + "\' 用于所有字符串条目，否则它不会添加到数据库中。

我可以使用字符串生成器吗？如果有怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T17:53:25.593

你为什么要构建一个 SQL 字符串（这会打开你的[SQL 注入](http://en.wikipedia.org/wiki/SQL_injection)）？我建议要么使用 ORM（[实体框架是 MSDN ORM](http://msdn.microsoft.com/en-us/library/aa697427%28v=vs.80%29.aspx)，要么使用 sproc 来执行此操作（并使用[SqlParameters](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlparameter.aspx)）。或者，至少您应该使用参数化字符串而不是直接推入值

```
var parameterizedQuery = new SqlCommand(
    "INSERT INTO JOBQUESTIONS (JOBAPPLICATIONID, 
        QUESTIONTEXT, TYPEID, HASCORRECTANSWER, CORRECTANSWER, ISREQUIRED) 
    VALUES (@JobId, '@QuestionText', @TypeID , @HasCorrectAnswer , '@CorrectAnswer',
        @IsRequired)");

parameterizedQuery.Parameters.Add("@JobId", SqlDbType.Int).Value = 123; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-20T18:10:55.867

尝试这样的事情：

```
var parms = string.Join(",", lst.Select(str => string.Format("'{0}'", str)));

var values = string.Format("VALUES({0})", parms); 
```

正如其他人所建议的那样，使用参数化查询会更好更安全，所以如果你选择走那条路，我会考虑切换到 a`Dictionary`而不是 a `List`。

```
var dict = new Dictionary<string, string>();

dict.Add("Foo", "Bar"); //parameter name, value
dict.Add("Bar", "Foo"); //...

dict.Select(d => cmd.Parameters.AddWithValue(string.Format("@{0}", d.Key), d.Value)); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-20T17:56:02.357

使用参数化查询。这意味着您只在 sql 查询中插入一些临时名称，例如

```
"INSERT INTO tablename VALUEs(@param1, @param2, ...)"; 
```

然后定义参数：

```
cmd.Parameters.Add("@param1", SqlDbType.Int).Value = your actual value"; 
```

# sql-server - SQL CLR在哪个场景下会提供更好更好的性能？？我们观察了字符串和数学运算。

> ID：10251065
> 
> 赞同：0
> 
> 时间：2012-04-20T17:50:27.767
> 
> 标签：sql-server, performance, sqlclr

我们最近需要验证 SQL Server 中的大量地址（字符串），t-sql 代码显示延迟，我们尝试了 SQL CLR，哇！700% 的性能提升。我们正在研究我们可以在哪些其他地方使用它？？？我想并不是所有的逻辑都应该在 SQL CLR 中完成，因为我们将无法进行基于 SET 的操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T04:46:54.727

在进行了大量的点击和运行之后，我们得出结论，对于字符串和数学函数，CLR (C#/VB) 具有比 T-SQL 更大的库（优化/测试），因此利用更大的库我们可以获得优势在 T-sql 中完成的字符串和数学运算。

# c# - 设计指南：在哪里定义变量

> ID：10251069
> 
> 赞同：0
> 
> 时间：2012-04-20T17:51:00.033
> 
> 标签：c#, variables

在内部范围内声明变量是我随处可见的！但我有一个问题：假设我们有一个 for 循环，我们想在该循环的主体内使用一个变量。好吧，如果我在循环内部的内部范围内声明和初始化变量，它不会有更多的开销，因为每次循环运行时都应该再次声明该变量？我正在使用 C#，所以如果对此有编译器优化，那就更好了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T17:57:01.523

好吧，这取决于编译器。在 C# 编译器会优化它，你不会看到任何显着的差异。在循环内声明变量的好处是，当它离开循环（超出范围）时，它可用于垃圾收集。另请查看此线程[在循环之前或循环中声明变量的区别？](https://stackoverflow.com/questions/407255/difference-between-declaring-variables-before-or-in-loop)

# json - 使用 JSON 填充 ComboBox。Dojo 1.7 打破了它。:-(

> ID：10251073
> 
> 赞同：1
> 
> 时间：2012-04-20T17:51:15.223
> 
> 标签：json, combobox, dojo

我有一个使用 JSON 源填充组合框的应用程序。HTML 如下......

```
<label for="user">User: </label>
<input dojoType="dijit.form.ComboBox" class="selectionNav tableData" value="" name="user" id="sample/user"> 
```

来自样本/用户的 JSON”在这里......

```
{
"identifier": "user",
"label": "label",
"items": [
    {
        "user": null,
        "label": null
    },
    {
        "user": "Joe Wilkie",
        "label": "Joe Wilkie"
    }
  ]
} 
```

在 dojo 1.7 之前，这就像一个冠军！升级道场后，我在萤火虫中注意到 JSON 仍然可以正常获取并且有效，但它不再填充组合框。

任何人都知道如何解决这个问题？提前谢谢了。珍妮

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T18:50:09.630

ComboBox 上的默认搜索属性是名称，它不在商店中。添加`searchAttr`到组合框中。

```
<input dojoType="dijit.form.ComboBox" searchAttr="label" ... 
```

这是我的完整测试代码：

```
<!DOCTYPE html>
<html >
<head>

    <link rel="stylesheet" type="text/css" href="dojo/1.7.2/dijit/themes/claro/claro.css" />
    <style type="text/css">html, body {
        width: 100%;
        height: 100%;
        margin: 0;
    }</style>
    <script src="dojo/1.7.2/dojo/dojo.js" data-dojo-config="parseOnLoad: true"></script>
    <script>require(["dojo/ready", "dojo/data/ItemFileReadStore", "dijit/form/ComboBox"], 

    function(ready, Store, ComboBox) {
      ready(function() {
        var store = new Store({data: {
          "identifier": "user",
          "label": "label",
          "items": [
              {
                  "user": null,
                  "label": null
              },
              {
                  "user": "Joe Wilkie",
                  "label": "Joe Wilkie"
              }
            ]
        }});

    dijit.byId('user').set('store', store);
  });
});
</script>
</head>
<body class="claro">
    <label for="user">User: </label>
    <input dojoType="dijit.form.ComboBox" searchAttr="label" class="selectionNav tableData" value="" name="user" id="user" />        
</body>
</html> 
```

# javascript - 将 XML 数据解析为动态 HTML 选择语句

> ID：10251074
> 
> 赞同：2
> 
> 时间：2012-04-20T17:51:16.533
> 
> 标签：javascript, html, xslt

我想做的是创建2个select语句，当第一个选择了一个选项以使用“onChange”事件来更改第二个select语句的选项时。

这是我想要的一个很好的演示：http: [//www.w3.org/TR/WCAG20-TECHS/working-examples/SCR19/dynselect.html](http://www.w3.org/TR/WCAG20-TECHS/working-examples/SCR19/dynselect.html)

以及对应的代码： [http ://www.w3.org/TR/WCAG20-TECHS/SCR19.html](http://www.w3.org/TR/WCAG20-TECHS/SCR19.html)

但是，与其使用数组来填充 select 语句中的选项，我更愿意解析 XML 文档中的数据。

XML Doc 类似于：

```
<inventory>
  <shoes>
    <item>
      <name>Chuck Taylor Converse</name>
      <size>11</size>
      <quantity>2</quantity>
    </item>
  </shoes>
</inventory> 
```

我一直在想的是使用 XSL for-each 语句和 Javascript 函数来更改第二个 select 语句的选项。

```
//  Shows the name of each type of product from the XML doc
<select id="type" onchange="showProducts(this);">
  <xsl:for-each select="inventory/*">
    <option><xsl:value-of select="name(.)"/></option>
  </xsl:for-each>    
</select>

<select id="product">
</select> 
```

我坚持的是试图弄清楚如何在 Javascript 中实现这一点。我需要将 XML 解析为数组吗？我的另一个想法是尝试使用 XSL 语句执行 document.write，但我无法让它工作。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T11:47:22.380

您可以应用 XSLT 服务器端 - 这意味着 JavaScript 将接收可以直接插入页面的 HTML 片段 - 使用 jQuery：

```
$('#product').load('mysever/url_returning_the_html'); 
```

或者服务器可以提供原始 XML，然后您使用 JavaScript 应用 XSLT - 如何执行此操作取决于浏览器，请参阅[http://www.w3schools.com/xsl/xsl_client.asp](http://www.w3schools.com/xsl/xsl_client.asp)示例。

我的建议是尽可能多地在服务器端进行转换，并向 JavaAcript 代码提供 HTML（可以直接使用）或 JSON（更紧凑且易于在 JavaScript 中解析）。

# javascript - Javascript 中 String.concat() 的目的是什么？

> ID：10251075
> 
> 赞同：2
> 
> 时间：2012-04-20T17:51:31.350
> 
> 标签：javascript, string, concatenation

我知道你可以在 Javascript 中连接这样的字符串：

```
str1 + str2; 
```

或者像这样：

```
[str1, str2].join(''); 
```

为什么也有这样做的功能？

```
str1.concat(str2) 
```

是不是更快了？对我来说，这似乎更像是打字。我的猜测是，这是在`str1 + str2`优化之前使用的。那会是正确的吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-20T17:57:59.040

> 是不是更快了？

相反，它似乎可以明显变慢。

[http://jsperf.com/concat-operator-vs-concat](http://jsperf.com/concat-operator-vs-concat)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-20T18:11:15.313

该`String.prototype.concat`方法非常通用（[ECMA 标准 5.1 版/2011 年 6 月](http://www.ecma-international.org/publications/files/ECMA-ST/Ecma-262.pdf)，pp.143-144）：

> 1.  调用 CheckObjectCoercible 并传递*this*值作为其参数。
> 2.  让*S*成为调用*ToString*的结果，并将*this*值作为参数。
> 3.  让*args*是一个内部列表，它是传递给此函数的参数列表的副本。
> 4.  令*R*为*S*。
> 5.  重复，而*args*不为空
>     
>     
>     
>     一个。*从args*中删除第一个元素，并让*next*成为该元素的值。
>     
>     
>     
>     湾。令*R为由**R*的前一个值中的字符后跟 ToString( *next* ) 的字符组成的 String 值。
>     
>     
> 6.  返回*R*。

因为它非常通用，所以几乎可以在每个具有`ToString()`方法的对象上使用。另请参阅以下注释：

> **注意：** concat 函数是故意通用的；它不要求它的*this*值是一个 String 对象。因此，它可以转移到其他类型的对象中用作方法。

所以你可以使用`String.prototype.concat.call(myObject,....);`. 请注意，还有一种`Array.prototype.concat`方法也非常通用（第 125 页）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-20T17:55:11.390

似乎存在显着的性能差异，尤其是对于 IE：

[http://www.sitepen.com/blog/2008/05/09/string-performance-an-analysis/](http://www.sitepen.com/blog/2008/05/09/string-performance-an-analysis/)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-04-20T17:54:07.810

它不会比运算符重载更快或更慢。

# javascript - 内部api/websockets的实现

> ID：10251076
> 
> 赞同：0
> 
> 时间：2012-04-20T17:51:32.757
> 
> 标签：javascript, api, websocket

将数据加载到 iGoogle 等不同模块的最佳方式是什么？我有三个想法，但哪一个更受欢迎？

1.  使用数据库中的最新数据动态生成 html 页面。
2.  提供一个几乎静态的 html 页面，然后客户端使用 JavaScript 从 api 获取数据
3.  提供一个几乎静态的 html 页面，然后客户端连接到一个 websocket，该 websocket 将为客户端提供来自数据库的历史数据，然后再推送直播。

在这三种情况之一之后，客户端连接（当然第三种选择永远不会断开连接）到推送实时数据的 websocket。

哪个替代方案是最受青睐的（最快、最轻量级）并以他们想要的方式使用这些技术？我有一种感觉，第三种选择以错误的方式使用 websockets？

### 我经过一番研究和思考后得出的结论；

1号：

*   即使关闭 JavaScript 也可以使用
*   我们需要使用磁盘 io 提供动态页面

2号：

*   提供快速的 html 页面
*   最大连接数（html页面、api、websocket）

3号：

*   提供快速的 html 页面
*   我们的连接数量最少，因为即使之前获取了数据（html 页面，websocket），我们也会连接到 websocket

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T09:33:35.613

如果性能（尤其是延迟）对您很重要，那么使用解决方案 3 似乎完全可以。1 号非常适合优雅降级（正如您自己已经注意到的那样），也许 2 号在概念上最干净，但我认为所有解决方案都很好。

# protocol-buffers - 使用 ProtoContract 属性在所有类型上自动化 GetProto 的方法

> ID：10251082
> 
> 赞同：3
> 
> 时间：2012-04-20T17:52:04.440
> 
> 标签：protocol-buffers, protobuf-net

我想使用反射来查看 .dll 中的所有类型，并为具有 ProtoContract 属性的任何类型生成 .proto 文件。我将使用 .proto 文件生成 C++ 类，以便我的 C# 代码可以与某些 C++ 互操作。此代码将通过 .dll 查找具有 ProtoContract 属性的类型，但我不知道如何将类型动态传递给 GetProto()。

```
//get assemblies in directory.
string file = @"C:\bungie\networking\shared\online\output\bin\Test\Xetrov\Xetrov.Core\Xetrov.Core.dll";
var assembly = Assembly.LoadFile(file);
foreach (var type in assembly.GetTypes())
{
    if (!type.IsClass || type.IsNotPublic) 
    {
        continue;
    }
    //Get all the attribute for the type
    object[] attributes = type.GetCustomAttributes(true);
    //Look for the ProtoContract attribute
    if(attributes.Where(att => att is ProtoBuf.ProtoContractAttribute).Any())
    {
        // We have a type that protobuf can use, generate the .proto file
            // How to tell it what type T is??  can't use variable type
        string protoDefinition = ProtoBuf.Serializer.GetProto<T>();
    }
} 
```

有什么想法可以做到这一点吗？还是为所有类型生成 .proto 文件的更好方法？

谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T09:24:14.097

首先，请注意 GetProto 尚未在 v2 中重新实现，但会在一段时间内出现。所以我假设我们正在谈论 v1。因此，我怀疑`MakeGenericMethod`这是你最好的选择：

```
// outside loop
var method = typeof(ProtoBuf.Serializer).GetMethod("GetProto");
...
// inside loop
var proto = untyped.MakeGenericMethod(type).Invoke(null, null); 
```

当我在 v2 中重新实现它时，它也将在非泛型 API 上可用（v2 使用非泛型作为核心）。

# android - 使用 Apache HTTP 客户端将流数据发布到 WCF

> ID：10251083
> 
> 赞同：0
> 
> 时间：2012-04-20T17:52:05.493
> 
> 标签：android, json, wcf, httpclient

我正在尝试将 json 字符串发布到我的 wcf 服务。问题是我的 WCF 方法需要一个 Stream 对象，而不仅仅是一个 JSON。

这是 WCF 中的方法头：

```
 [WebInvoke(Method = "POST", UriTemplate = "person/delete", RequestFormat = WebMessageFormat.Json, ResponseFormat = WebMessageFormat.Json)]
    Person DeletePerson(Stream streamdata) 
```

这是我一直在尝试的：

```
 HttpPost request = new HttpPost(SERVICE_URI + uri);
    InputStream is = new ByteArrayInputStream(data.getBytes());
    InputStreamEntity ise = new InputStreamEntity(is, data.getBytes().length);
    ise.setContentType("application/x-www-form-urlencoded");
    ise.setContentEncoding(HTTP.UTF_8);
    request.setEntity(ise);
    HttpResponse response = null;
    try {
        response = client.execute(request);
    } catch (ClientProtocolException e) 
    {
        e.printStackTrace();
    } catch (IOException e) 
    {
        e.printStackTrace();
    } 
```

我收到了 400 个错误的请求，以及我尝试过的所有其他内容。有人可以帮我完成这个工作吗！？此外，它必须使用 HttpClient 完成，因为我有使用它的自定义身份验证代码。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T20:38:29.037

```
HttpPost request = new HttpPost(SERVICE_URI + uri);
    AbstractHttpEntity entity = new AbstractHttpEntity() {
        public boolean isRepeatable() { return true; }
        public long getContentLength() { return -1; }
        public boolean isStreaming() { return false; }
        public InputStream getContent() throws IOException { throw new     UnsupportedOperationException(); }
        public void writeTo(final OutputStream outstream) throws IOException {
            Writer writer = new OutputStreamWriter(outstream, "UTF-8");
            writer.write(arr, 0, arr.length);
            writer.flush();
        }
    };

    entity.setContentType("application/x-www-form-urlencoded");
    entity.setContentEncoding(HTTP.UTF_8);
    request.setEntity(entity);
    HttpResponse response = null;
    InputStream bais = null;
    String result = null;
    try {
        response = client.execute(request);
        HttpEntity he = response.getEntity();
        bais = he.getContent();
        result = convertStreamToString(bais);
    } catch (ClientProtocolException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    } catch (IllegalStateException e) {
        e.printStackTrace();
    } 
```

# azure - 如何解决在 Windows 手机 Azure 应用程序上部署失败的问题？

> ID：10251085
> 
> 赞同：0
> 
> 时间：2012-04-20T17:52:11.333
> 
> 标签：azure, windows-phone

我的 windows phone azure 应用程序有问题。

我已完全完成所有步骤，但在发布步骤中出现**部署失败**错误。

错误详细信息是：

> 上午 7:49:13 - 验证存储帐户“volstorage”...
> 上午 7:49:15 - 上传包...
> 上午 7:49:17 - 服务器无法验证请求。确保 Authorization 标头的值正确形成，包括签名。
> 上午 7:49:18 - 部署失败

我能做些什么来解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T18:34:20.890

A common reason is because the time on your machine isn't configured correctly. Could you monitor the traffic (incl. HTTPS) using Fiddler?

The detail of the error should say something like this: **Request date header too old**. This can be solved by setting your time correctly.

If this isn't the issue, please use Fiddler to find the detail and update your question.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T09:15:15.760

看起来它无法部署到 Windows Azure。您能否确保已将管理证书上传到门户，并在发布应用程序时在 Visual Studio 中选择相同的证书？我建议您查看[http://msdn.microsoft.com/en-us/library/azure/gg981929.aspx](http://msdn.microsoft.com/en-us/library/azure/gg981929.aspx)了解更多信息。

此致，

明旭。

# android - 将文本与 RadioGroup/RadioButton 对齐

> ID：10251088
> 
> 赞同：4
> 
> 时间：2012-04-20T17:52:19.443
> 
> 标签：android, user-interface

我想在 RadioGroup 旁边放一个文本，作为它的一种标签。所以 RadioGroup 中有两个带有文本的按钮，目前，我只能让顶部对齐，但这看起来很尴尬。我可以尝试将 TextView 排成一行，但这并不理想或容易。RadioGroup 和 TextView 位于 RelativeLayout 中，我尝试`android:layout_alignBaseline`使用 RadioGroup 和其中一个 RadioButton 来设置 TextView，但 RadioGroup 似乎没有基线，而且我似乎无法获得基线来自 TextView 的 RadioButton。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T19:13:30.360

这几天我遇到了同样的问题，我终于解决了。我尝试了所有想到的组合，最后我发现诀窍在于将 android:layout_weight 与 TextViews 上的值相同。这将它们对齐在 RadioButtons 的中心。

```
<LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_marginBottom="20dip"
        android:layout_marginLeft="15dip"
        android:orientation="horizontal" >

        <RadioGroup
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" >
                <RadioButton
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:button="@drawable/radio_button"
                    android:paddingRight="15dip"
                    />
                <RadioButton
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:button="@drawable/radio_button"
                    android:paddingRight="15dip"
                    />
        </RadioGroup>

        <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:orientation="vertical">
            <TextView
                    android:layout_width="fill_parent"
                    android:layout_height="fill_parent"
                    android:text="@string/cop_radiobutton_label"
                    android:layout_weight="1"
                    android:gravity="center_vertical"/>

            <TextView
                    android:layout_width="fill_parent"
                    android:layout_height="fill_parent"
                    android:text="@string/thief_radiobutton_label"
                    android:layout_weight="1"
                    android:gravity="center_vertical"/>
        </LinearLayout>
    </LinearLayout> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T18:02:02.850

```
<LinearLayout
           android:id="@+id/linearLayout5" 
           android:layout_width= "fill_parent"
           android:layout_height= "50dip"
           android:orientation="horizontal"
           android:layout_gravity="center"
           android:background="@drawable/squareback">

           <RadioGroup
               android:id="@+id/radioGroup1"
               android:layout_width="wrap_content"
               android:layout_height="wrap_content"
               android:orientation="horizontal" >

               <RadioButton
                   android:id="@+id/meleeRadio"
                   android:layout_width="150dip"
                   android:layout_height="40dip"
                   android:checked="false"
                   android:text="Melee Attack" android:textColor="@color/black" android:gravity="center" android:layout_gravity="center" android:layout_margin="5dip"/>

           <RadioButton
               android:id="@+id/rangeRadio"
               android:layout_width="150dip"
               android:layout_height="40dip"
               android:text="Range Attack" android:textColor="@color/black" android:gravity="center" android:layout_gravity="center" android:layout_margin="5dip" android:checked="false"/>

           </RadioGroup>

        </LinearLayout> 
```

为了对齐它们，我将它们放在我为其设置大小的 LinearLayout 中。然后我 android:layout_gravity="center" 将对齐项目的中心。因此，即使按钮和文本的大小不同，它们看起来也不错。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-01-11T12:20:52.733

我有一个类似的问题：我需要将一些文本对齐到 RadioGroup 的中心，这将作为 3 个 RadioButtons 的标签。我通过将 textView 上的 android:layout_gravity 属性设置为中心来实现它。下面是代码片段：

```
<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal">

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Experience Level:"
        android:layout_gravity="center"/>

   <RadioGroup
       android:layout_width="wrap_content"
       android:layout_height="wrap_content">
       <RadioButton
           android:layout_width="wrap_content"
           android:layout_height="wrap_content"
           android:text="Novice"/>
       <RadioButton
           android:layout_width="wrap_content"
           android:layout_height="wrap_content"
           android:text="Intermidiate"/>
       <RadioButton
           android:layout_width="wrap_content"
           android:layout_height="wrap_content"
           android:text="Advanced"/>
   </RadioGroup>
</LinearLayout> 
```

# asp.net-mvc - ASP.NET MVC 中单元测试的“大小”

> ID：10251089
> 
> 赞同：2
> 
> 时间：2012-04-20T17:52:26.120
> 
> 标签：asp.net-mvc, unit-testing

我同意 Osherove 的观点，即单元测试应该有一个断言，而不是很多。但是，当我将该主体应用于 ASP.NET MVC 单元测试时，我想知道它是否过于复杂。考虑这些测试：

```
 [TestMethod] 
    public void RedirectTest() {     
        // Arrange - create the controller   
        ExampleController target = new ExampleController();     

        // Act - call the action method     
        RedirectResult result = target.Redirect();   

        // Assert - check the result
        Assert.IsFalse(result.Permanent);     
        Assert.AreEqual("/Example/Index", result.Url); 
    }

    [TestMethod]
    public void RedirectValueTest() {     
        // Arrange - create the controller     
        ExampleController target = new ExampleController();     
        // Act - call the action method     
        RedirectToRouteResult result = target.Redirect();     
        // Assert - check the result     
        Assert.IsFalse(result.Permanent);     
        Assert.AreEqual("Example", result.RouteValues["controller"]);    
        Assert.AreEqual("Index", result.RouteValues["action"]);    
        Assert.AreEqual("MyID", result.RouteValues["ID"]); 
    } 
```

当然，上面的两个测试可以分成六个测试（每个断言一个），但感觉有点过分了。有没有围绕这个的最佳实践？你做什么工作？如果这是测试专家共识的所在，我肯定会沿着每个断言进行一次测试的路径...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T18:32:12.337

The first issue I see is your test names ... they don't say what the unit test is really supposed to be testing. I would break some of those tests up. This first test would remove the `Assert.IsFalse(result.Permanent)` from both your tests:

```
[TestMethod] 
public void Redirect_result_should_set_Permanent_to_false() {     
    // Arrange - create the controller   
    ExampleController target = new ExampleController();     

    // Act - call the action method     
    RedirectResult result = target.Redirect();   

    // Assert - check the result
    Assert.IsFalse(result.Permanent);     
} 
```

Why should you do this? If `result.Permanent == true`, both your tests will fail, but you won't know why. In this case, you will know why.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-20T20:10:29.890

**断言**
你的单元测试应该只测试一个集中的场景。这可能是也可能不超过一个实际的物理断言。最好它只是一个物理断言，但这并不总是可能的。它的要点是，每个测试只涵盖一个特定的重点场景。

**命名和组织**
命名你的单元测试是非常重要的。你的名字应该反映你正在测试的场景。

例如，您可以让多个测试类测试一个物理类。这也是一种很好的做法，因此您可以将测试分解为相关的组，并且不会用太多行代码填充单个测试类，从而变得不可读。

我之前看到的是开发人员使用正在测试的类的名称创建一个测试文件夹。该文件夹包含每个逻辑测试组的测试类。在每个课程中，您都有几乎听起来像句子的方法。

假设您要测试的类被调用`MyCalculator`，因此您创建了一个名为`MyCalculator.Tests`. 在该文件夹中，您现在可以为每组逻辑测试创建一个测试类。比如一个名为`MultiplicationTests`or `DivisionTests`or的类`AdditionTests`等等。每个类都可以包含与该逻辑组相关的测试方法。

例如，对于添加测试，您可能有测试方法，例如

*   When_adding_any_2_numbers_then_result_is_correct
*   When_adding_small_negative_and_large_positive_numbers_then_result_is_correct_positive
*   When_adding_large_negative_and_small_positive_numbers_then_result_is_correct_negative

每个测试只测试一个给定的场景，测试的名称也很好地描述了它。

你为什么要把你的场景分解成这么多的测试？通过这样做，您可以确保您很可能只在每个单独的测试中测试一个重点场景。您还可以确保将来发生错误时，只有直接影响的测试才会中断。

例如，如果您在某个阶段有一个错误导致您的 add 方法在添加的结果为负数时抛出异常，那么只有与测试负结​​果有关的测试或测试会受到影响。

此外，如果您的测试断言了如此多的场景，您实际上并不知道究竟是什么导致了测试失败，那么您花在编写重点单元测试上的时间远远超过了后期所涉及的成本和时间。

组织测试的方法有很多，但总体目标应该始终相同，即每个测试只测试一个特定的重点场景。

**您的场景**
在您的场景中，例如在您`RedirectTest`的测试中，如果失败，则将`Assert.IsFalse(result.Permanent);`失败。这并不一定意味着您的重定向失败。只有当您没有被重定向到预期的 URL 时，您的测试才会失败。如果页面内容未按预期呈现或数据丢失，则与该特定测试无关。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T19:29:35.680

就我个人而言，我倾向于在每个测试中保留一个断言。当我测试 Asp .Net MVC 控制器时，我有时会在单个测试中保留多达四个（我个人的经验法则）断言。

每个测试有多个断言的问题是，当第一个断言失败时，您将不知道其余断言是否有任何问题，因此很可能会发生您修复代码以便首先断言通过只是为了发现第二个失败的原因不同。

有时，即使您在控制器中测试一些非常具体的东西，如果结果包含正确的视图名称，并且关联的模型包含预期的数据，那么在我看来，不止一个断言是有意义的。在这种情况下，您可以在一个测试上放置多个断言，充分了解该方法的缺点，或者您可以在一个方法中提取测试的排列和操作部分，并创建几个调用该方法的测试，获取结果并断言特定的数据。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-20T17:56:08.790

只要测试一个离散的代码路径，它就可以有尽可能多的断言。每个测试只有一个断言似乎在维护测试方面有点过分了。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-04-20T18:48:11.303

一些人说你应该只有一个断言的主要原因（？）是因为你一次只能从一个断言中获得失败反馈。也就是说，如果您将断言放在不同的测试中，您将获得更多反馈。

我认为每个测试可以有几个断言。还有其他更重要的方面，例如可读性。如果你有更多的测试，你会得到更多的代码来阅读，并且更难获得你的测试套件的概览。

但是，我认为所有*重要的*断言都应该放在测试中，这样您就不必去其他地方找到它，从而使其更难掌握。重要的是我的意思是测试旨在验证的东西。例如，您可以对必须为测试有意义的事情以及其他测试更清楚地验证的事情隐藏断言。

# c# - 如何通过 C# 读取 Powerpoint 文件中的文本转换

> ID：10251092
> 
> 赞同：0
> 
> 时间：2012-04-20T17:52:42.800
> 
> 标签：c#, .net, powerpoint

我正在使用 C# 和 VS2008。如果我在 C# 中打开一个预先存在的 Powerpoint 文件，我需要做什么才能阅读每张幻灯片的文本动画？我想我可以使用 Office Primary Interop Assemblies 来处理 PowerPoint，但是文本动画会使用什么属性呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T14:30:29.120

我在动画编码方面真的很没用，但这应该给你一个开始：

每张幻灯片都有一个时间线

TimeLine 有一个 MainSequence，其中包含幻灯片上的大部分动画（也有任意数量的交互式序列，但我们不要把事情复杂化）。

MainSequence 的每个成员（.Item）都具有各种属性，例如 .EffectType 和 .Shape（它指向应用动画的形状。

```
With ActivePresentation.Slides(1).TimeLine.MainSequence

  ' how many animations are there in the main sequence?
  Debug.Print .Count

  For x = 1 to .Count
    ' What kind of effect is it?
    Debug.Print .Item(x).EffectType
    ' What shape is this animation applied to?
    Debug.Print .Item(x).Shape.Name
  Next
End With 
```

# ruby-on-rails - 从字符串中删除“www”、“http://”

> ID：10251094
> 
> 赞同：12
> 
> 时间：2012-04-20T17:52:46.140
> 
> 标签：ruby-on-rails, ruby

如何使用 Ruby 从字符串中删除“www”、“http://”、“https://”？

我试过了，但没有用：

```
s.gsub('/(?:http?:\/\/)?(?:www\.)?(.*)\/?$/i', '') 
```

这是我在 Rails 中所做的事情：

```
<%= auto_link(job.description) do |url| url.truncate(25).gsub('http://', '') end %> 
```

网址被截断，但我的目标是删除链接的开头，例如“www”或“http://”，因此链接看起来像“google.com/somepage/d ...”，而不是“ http://google.com/some..."

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-04-20T18:30:13.000

```
s = s.sub(/^https?\:\/\//, '').sub(/^www./,'') 
```

如果您不想使用`s =`，则应使用`sub!`s 而不是全部`sub`s。

您的代码的问题是：

1.  问号总是跟在可选字符之后
2.  始终替换子中的一个模式。您可以“链接”多个操作。
3.  在 Regexp 的开头使用`sub`而不是`gsub`和`^`，因此它仅替换`http://`开头的，但将中间的保留。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-20T19:11:50.127

此方法应捕获所有 3 种变体：

```
def strip_url(url)
  url.sub!(/https\:\/\/www./, '') if url.include? "https://www."

  url.sub!(/http\:\/\/www./, '')  if url.include? "http://www."

  url.sub!(/www./, '')            if url.include? "www."

  return url
end

strip_url("http://www.google.com")
   => "google.com" 
strip_url("https://www.facebook.com")
   => "facebook.com" 
strip_url("www.stackoverflow.com")
  => "stackoverflow.com" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-11-13T10:05:56.547

```
def strip_url(target_url)
  target_url.gsub("http://", "")
            .gsub("https://", "")
            .gsub("www.", "")
end

strip_url("http://www.google.com")
 => "google.com" 
strip_url("https://www.google.com")
 => "google.com" 
strip_url("http://google.com")
 => "google.com"
strip_url("https://google.com")
 => "google.com" 
strip_url("www.google.com")
 => "google.com" 
```

# android - 将 ListView choiceMode 从 singleChoice 更改为 multipleChoiceModal

> ID：10251095
> 
> 赞同：11
> 
> 时间：2012-04-20T17:52:47.437
> 
> 标签：android, android-3.0-honeycomb, android-4.0-ice-cream-sandwich

我有一个通常是`singleChoice` `choiceMode`. 当用户长按一个项目时，我想进入一个允许选择多个项目的操作模式，以便他们可以对任何选定的项目执行操作。

我可以将其配置`ListView`为处于`singleChoice`模式，并且用户可以选择列表项以在其旁边显示详细信息片段，并使列表项本身显示为激活状态。

我还可以配置`ListView`它，使其处于`multipleChoiceModal` `choiceMode`并在项目上执行长按启动操作模式并允许多项选择，但现在 ListView 将不允许在正常模式下进行单次选择（无操作模式）。

如何让 ListView 处于`singleChoice`模式，然后`multipleChoiceModal`在长按项目时将其转换为模式？

这是我能想到的最接近的：

1.  将 ListView 设置为`singleChoice`模式
2.  设置 ListView`OnItemLongClickListener`并在该侦听器中：
    1.  将 ListView 设置`OnItemLongClickListener`为`null`
    2.  将 ListView 设置`choiceMode`为`multipleChoiceModal`
    3.  调用`view.performClick()`长按的项目。

这种方法有几个问题。

1.  直到我第二次长按某个项目时才会启动动作模式。
2.  当我调用`getListView().setChoiceMode(ListView.CHOICE_MODE_SINGLE);`时，`onDestroyActionMode`我得到一个`java.lang.StackOverflowError`，因为该方法最终也试图破坏动作模式（但我们还没有从破坏中返回）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-05T15:39:08.047

这个选择模式切换看起来真的很尴尬，因为我没有可以谷歌搜索的干净简单的解决方案。HFM（有信仰的人）和 KISS（保持简单愚蠢）有帮助；）

1.以单一模式选择开始并设置所有侦听器（这是在您设置列表适配器的地方完成的）

```
listView.setChoiceMode(ListView.CHOICE_MODE_SINGLE); 
listView.setOnItemLongClickListener(liListener);
listView.setMultiChoiceModeListener(mcListener); 
```

2.实现界面切换选择模式。使它起作用的技巧是在实现之外切换回单选模式，这意味着在您破坏动作模式之后！所以只需使用一个简单的标志来标记 CAB 的破坏。另一个 TRICK 是返回 false onItemLongClick 以便选择模式有时间生效。

```
private OnItemLongClickListener liListener = new OnItemLongClickListener() {
        @Override
        public boolean onItemLongClick(AdapterView<?> parent, View view,
                int position, long id) {                
            listView.setChoiceMode(ListView.CHOICE_MODE_MULTIPLE_MODAL);
            isCABDestroyed = false;                 
            return false; // so this action does not consume the event!!!
        }
    };

private MultiChoiceModeListener mcListener = new MultiChoiceModeListener() {
    @Override
    public void onItemCheckedStateChanged(ActionMode mode, int position,
                                          long id, boolean checked) {
        final int checkedCount = listView.getCheckedItemCount();
        switch (checkedCount) {
            case 0:
                mode.setSubtitle(null);
                break;
            case 1:
                mode.setSubtitle("One item selected");
                break;
            default:
                mode.setSubtitle("" + checkedCount + " items selected");
                break;
        }
    }

    @Override
    public boolean onActionItemClicked(ActionMode mode, MenuItem item) {
        switch (item.getItemId()) {
            case R.id.delete:
                //do your action command here
                mode.finish();
                return true;
            default:
                return false;
        }
    }

    @Override
    public boolean onCreateActionMode(ActionMode mode, Menu menu) {
        MenuInflater inflater = mode.getMenuInflater();
        inflater.inflate(R.menu.context_menu, menu);
        return true;
    }

    @Override
    public void onDestroyActionMode(ActionMode mode) {
        isCABDestroyed = true; // mark readiness to switch back to SINGLE CHOICE after the CABis destroyed  

    }

    @Override
    public boolean onPrepareActionMode(ActionMode mode, Menu menu) {
        return false;
    }
}; 
```

3.这里是切换回来

```
 @Override
    public void onListItemClick(ListView l, View v, int position, long id) {
        super.onListItemClick(l, v, position, id);  
        if(isCABDestroyed) {
            listView.setChoiceMode(ListView.CHOICE_MODE_SINGLE);
            //do your action command  here
        }
        l.setItemChecked(position, true);

    } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-20T18:24:18.660

我在我的一个程序中使用了它

我们`ListView.CHOICE_MODE_MULTIPLE_MODAL`当时`lv.setMultiChoiceModeListener(new ModeCallBack());`

```
 public class ModeCallBack implements ListView.MultiChoiceModeListener{

    View mSelectView;
    TextView mSelectedCount;
    ArrayList<Long> mCheckedItems;

    @Override
    public boolean onActionItemClicked(ActionMode mode, MenuItem item) {
        SharedPreferences pref = PreferenceManager.getDefaultSharedPreferences(getActivity());
        SharedPreferences.Editor edit = pref.edit();

        if(item.getItemId() == R.id.bowler_delete){

            for(int i=0; i<mCheckedItems.size(); i++){
                long id = mCheckedItems.get(i);

                getActivity().getContentResolver().delete(BowlersDB.CONTENT_URI,BowlersDB.ID+"="+id,null);
            }
        }else if(item.getItemId() == R.id.bowler_add_ball){
            if(mCheckedItems.size() > 1){
                Toast.makeText(getActivity(),"Can only add bowling balls to one bowler at a time",Toast.LENGTH_SHORT).show();
            }else{
                edit.putLong(Preferences.BOWLER_SELECTED_FOR_BALL,mCheckedItems.get(0)).commit();

                ListFragment lf = new ManufacturersList();
                FragmentTransaction ft;
                ft = getFragmentManager().beginTransaction();
                ft.replace(R.id.frameOne, lf).addToBackStack(null).commit();
                //mRemover.rFragment();
            }
        }else if(item.getItemId() == R.id.add_bowler_to_team){
            for(int i=0; i<mCheckedItems.size(); i++){

                long id = mCheckedItems.get(i);
                ContentValues values = new ContentValues();
                values.put(TeamBowlers.BOWLER_ID,id);
                values.put(TeamBowlers.TEAM_ID,pref.getLong(Preferences.TEAM_SELECTED,1));
                getActivity().getContentResolver().insert(TeamBowlers.CONTENT_URI, values);

            }
            FragmentManager fm = getFragmentManager();
            fm.popBackStack();
        }
        mode.finish();
        return true;
    }

    @Override
    public boolean onCreateActionMode(ActionMode mode, Menu menu) {
        MenuInflater inflate = getActivity().getMenuInflater();
        if(fromTeam){
            inflate.inflate(R.menu.bowlers_team_action_menu, menu);
        }else{
            inflate.inflate(R.menu.bowler_action_menu, menu);
        }
        if(mSelectView == null){
            mSelectView = (ViewGroup)LayoutInflater.from(getActivity()).inflate(R.layout.select_count_layout,null);

            mSelectedCount = (TextView)mSelectView.findViewById(R.id.count_tv);

        }
        if(mCheckedItems == null){
            mCheckedItems = new ArrayList<Long>();
        }
        mode.setCustomView(mSelectView);
        return true;
    }

    @Override
    public void onDestroyActionMode(ActionMode mode) {
        mCheckedItems = null;

    }

    @Override
    public boolean onPrepareActionMode(ActionMode mode, Menu menu) {
        if(mSelectView == null){
            mSelectView = (ViewGroup)LayoutInflater.from(getActivity()).inflate(R.layout.select_count_layout,null);

            mSelectedCount = (TextView)mSelectView.findViewById(R.id.count_tv);
        }

        if(mCheckedItems == null){
            mCheckedItems = new ArrayList<Long>();
        }
        return true;
    }

    @Override
    public void onItemCheckedStateChanged(ActionMode mode, int position,long id, boolean checked) {         

        final int count = lv.getCheckedItemCount();
        mSelectedCount.setText(String.valueOf(count));
        if(checked){
            mCheckedItems.add(id);
        }else{
            mCheckedItems.remove(id);
        }
    }

} 
```

这允许单选单列表视图单击和长按多选。这都是从 ICS 消息应用程序中提取的，因此您也可以浏览它

# c++ - 将 C++ 类的实例转换为 NSObject，然后添加到 NSMutableArray

> ID：10251104
> 
> 赞同：1
> 
> 时间：2012-04-20T17:53:12.767
> 
> 标签：c++, objective-c, cocoa-touch, nsmutablearray, objective-c++

这是一个简单的类，我用 C++ 为一个音乐应用程序创建，它是为一个 iOS 设备创建的，它将存储一些音符的值和它们的时间：

```
class info {
public:
    float attackTime;
    Note noteStriked;

    void setData(float timeOfAttack, Note nameOfStrikeNote){
        attackTime = timeOfAttack;
        noteStriked = nameOfStrikeNote;
    }
}; 
```

上面... 注意是一个结构，它只能包含默认值，例如 {SNARE, DRUM, HIHAT} 等。这个想法是创建一个 Note 对象并将这些对象存储在 NSMutableArray 中以供以后访问。

然后在我的主 .h 文件中，我有一个 NSMutableArray sequenceOfNotes; 在我的 .m 文件中，我试图将一个对象添加到我的可变数组中......但我不知道该怎么做。我尝试了各种方法，但失败了，它不起作用！

```
//Create one instance of the class
NoteData *currentNoteData;

// Update the instance of the class.. its two variables: attackTime and noteStriked
currentNoteData->attackTime = timeHit;
currentNoteData->noteStriked = SNARE;

//Then im trying to add the above instance to my mutableArray below
[sequenceOfNotes addObject:currentNoteData]; 
```

该行产生的错误是无法使用“NoteData *”类型的左值初始化“id”类型的参数

修复错误后 id 想要做的是能够在我选择的数组的任何位置检索我的对象，然后能够在该特定索引处从该对象中选择一个属性变量。

```
//PsuedoCode
array {
  position 0: NoteData object {
                attackTime = 45.34,
                noteStriked = HIHAT
              }
  position 1: NoteData object {
                attackTime = 65.32,
                noteStriked = SNARE
              }
  position 2: NoteData object {
                attackTime = 78.53,
                noteStriked = HIHAT
              }
  position 3: NoteData object {
                attackTime = 98.44,
                noteStriked = KICK
              }
  etc etc

}

//and then convert NSObject to normal c++ object something like this... 
NoteData temp = [noteSequence objectAtIndex:0];

//so that i can then do this:
float currentTime = temp.attackTime;
Note currentNote = temp.noteStriked; 
```

显然有一个转换问题..如果有人可以帮助我，那就太棒了

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-20T17:59:23.943

您必须将 C++ 对象指针包装到 NSValue 中：

```
[MyArray addObject:[NSValue valueWithPointer:new MyCPPObject()]];

...

MyCPPObject *obj = [[MyArray objectAtIndex:index] pointerValue]; 
```

或者，你为什么不只使用 a`vector<MyCPPObject>`或 a `list<MyCPPObject>`？

# ios - 麻烦的导航栏，tabbar里面的工具栏

> ID：10251105
> 
> 赞同：0
> 
> 时间：2012-04-20T17:53:13.473
> 
> 标签：ios

如果我使用导航栏，工具栏正常工作没有任何问题，但如果我尝试在侧 tabbarcontroller 中使用相同或尝试以模态方式显示（从底部滑动），工具栏，导航栏则不显示。表格视图工作正常，其他控件工作正常。任何朋友都可以帮我找出导致这种奇怪行为的问题所在。我尝试了几次也在互联网上搜索但问题仍然存在。

```
- (void)viewWillAppear:(BOOL)animated
{
    [super viewWillAppear:animated];

    UILabel *titleLabel = [[UILabel alloc] initWithFrame:CGRectMake(0, 0, 400, 44)];
    titleLabel.backgroundColor = [UIColor clearColor];
    titleLabel.textColor = [UIColor whiteColor];
    titleLabel.font = [UIFont boldSystemFontOfSize:20.0];
    titleLabel.numberOfLines = 1;
    titleLabel.adjustsFontSizeToFitWidth = YES;
    titleLabel.shadowColor = [UIColor colorWithWhite:0.0 alpha:0.5];
    titleLabel.textAlignment = UITextAlignmentCenter;

    if ([[self appDelegate] connect]) 
    {
        titleLabel.text = [[[[self appDelegate] xmppStream] myJID] bare];
    } else
    {
        titleLabel.text = @"No JID";
    }

    [titleLabel sizeToFit];

    self.navigationItem.titleView = titleLabel;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T18:14:30.010

当您以模态方式推动某些内容时，它会在您的另一个视图之上创建一个全新的视图。它不会从您将其推到其上的导航控制器继承工具栏。相反，尝试将视图推送到导航控制器（它从右侧对其进行动画处理）。将其推送到导航控制器可以更容易地继承工具栏。否则，如果您想在模态视图演示文稿中保留一个工具栏，您将不得不为这个新视图单独创建工具栏。

# scala - IntelliJ IDEA 11.1.1 中缺少 Scala 插件

> ID：10251106
> 
> 赞同：3
> 
> 时间：2012-04-20T17:53:16.543
> 
> 标签：scala, plugins, intellij-idea

我正在尝试为 IntelliJ IDEA 安装 Scala 插件，但它没有出现在插件列表中。

我正在使用版本 11.1.1

![在此处输入图像描述](../Images/746333676c71148a5f42718b6f93d8ed.png)

* * *

顺便说一句，它确实在几个月前出现在我朋友的电脑上，他使用的是 10.5.2 版本，这是快照..

![在此处输入图像描述](../Images/dd87ae0ebba7d942810393260c3d4bd5.png)

现在安装插件有什么改变吗？我试过谷歌，但没有成功。

任何解决方案/解决方法？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-20T18:11:23.400

浏览存储库：

![浏览](../Images/1f6c01266dc5db6c44940ca37c6b2a2a.png)

安装插件：

![安装](../Images/d31757ae251bee0921cab676b8e23c7b.png)

# jquery - 动画完成后带有效果'反弹'的JQuery Animate？

> ID：10251109
> 
> 赞同：12
> 
> 时间：2012-04-20T17:53:33.983
> 
> 标签：jquery, jquery-animate, bounce

我一直在这里、谷歌等网站上寻找答案，但似乎无法完全确定这一点。

我有一个 ID 为 #pin01 的图像。这是地图上的一个图钉，我在 div 中进行了动画处理，降落在地图的图像上（想想谷歌地图）。

我的 JQuery 效果很好，是这样的：

```
$('#pin01').animate({ opacity: 0}, 0).delay(500);
$('#pin01').animate({ opacity: 1, top: "305px" }, 500); 
```

我的HTML如下：

```
<img src="images/pin_blue.png" id="pin01" /> 
```

动画效果很好，大头针淡入并很好地落在地图上。我想要的是，它在距离 div 顶部 305px 后出现反弹，所以当它在地图上时，它会在最后产生一点反弹。我想我会使用这个效果：

```
$('#pin01').effect("bounce", { direction:'down', times:5 }, 300); 
```

我认为最终的代码会是这样的：

```
$('#pin01').animate({ opacity: 0}, 0).delay(500);
$('#pin01').animate({ opacity: 1, top: "305px" }, 500);
$('#pin01').effect("bounce", { direction:'down', times:5 }, 300); 
```

这会导致反弹，但它会返回到大头针的原始起始位置，而不是保留 305px 的移动。我尝试在效果上放置一个 top: ，但没有奏效。

我尝试过组合、嵌套这些等，似乎没有任何效果。

如果有人有任何其他想法，很想知道如何让它正常运行。我认为这是一个简单的调整，只是似乎无法弄清楚。

**解决方案**

*删除：*

```
$('#pin01').animate({ opacity: 0}, 0).delay(1000);
$('#pin01').animate({ opacity: 1, top: "350px" }, 500); 
```

*用以下答案中的一行替换两者：*

```
$('#pin01').show().animate({ top: 305 }, {duration: 1000, easing: 'easeOutBounce'}); 
```

解决了在地图上弹跳一次的问题。

*为了添加一些淡入淡出功能，我将其编写如下：*

```
$('#pin01').animate({ opacity: '0' });
$('#pin01').delay(500).show().animate({ top: 305, opacity: '1' }, {duration: 1000, easing: 'easeOutBounce'}); 
```

可能有一种更清洁的方法来进行淡入淡出，但这适用于我的示例。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-20T17:56:00.930

尝试：

```
$('#pin01').show().animate({ top: 305 }, {duration: 1000, easing: 'easeOutBounce'}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T18:18:27.187

您可以在动画功能中使用`marginTop`而不是。`top`

# php - php解析字符串，看看它们是否相似

> ID：10251113
> 
> 赞同：1
> 
> 时间：2012-04-20T17:53:38.777
> 
> 标签：php, string, parsing, function, matching

我正在编写一个函数 php，它必须执行以下操作：

*   我们有两个字符串，例如：“ **Bienvenue** ”和“ **Bienbenue** ”

*   这两个字符串与 php 函数 strpos 不匹配。

*   但通常，我的函数的基本功能是说，是的，两个字符串之间只有一个字母不同，所以我返回 true。但是我需要一些帮助来找到存在的算法或 php 函数？

*   在此示例中：“ **Bienvenue** ”和“ **Vienlpntw** ”

*   只有“ien”与模式匹配，我必须查看匹配了多少个字母，然后将这个数字与单词/模式的大小进行比较。

*   所以我们有 9 / 3 = 3; 这个比例不好，所以我返回 false。

    但在这个例子中：“ **interactivity** ”和“ **intevatizity** ”，我们有匹配的“ *inte* ”“ *acti* ”和“ *ity* ”。所以我们有 13 个字母中有 11 个是正确的。所以管理信件的错误并不容易......

对于简历，我正在寻找一个 php 函数，它可以告诉我一个条目是否与我的模式匹配，返回 true 或 false 尊重这些点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-20T18:00:55.353

您可以使用内置函数[similar_text](http://php.net/manual/en/function.similar-text.php)来完成此操作。确保你也检查了一些“怪癖”的[笔记。](http://www.php.net/manual/en/function.similar-text.php#101458)

根据您的评论，您可能想要使用类似[这样](http://en.wikibooks.org/wiki/Algorithm_Implementation/Strings/Longest_common_substring#PHP)的东西，它获取最长的公共子字符串，然后将其除以字符串长度并给它一个返回 true 或 false 的阈值

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T18:06:30.967

这是一个非常简单的例子

```
function precisionMatch($string1, $string2, $precision = 0.6666666) {

    $matchCount = 0;
    $string1Length = strlen($string1);
    $string2Length = strlen($string2);
    for($i = 0; $i < $string1Length; $i++) {

        if ($i < $string2Length && $string1[$i] == $string2[$i]) {

            $matchCount++;
        }
    }

    return $matchCount / ($string1Length == 0 ? 1 : $string1Length) > $precision;
} 
```

# javascript - 使用 javascript 将样式值重置为先前的声明

> ID：10251114
> 
> 赞同：0
> 
> 时间：2012-04-20T17:53:40.523
> 
> 标签：javascript, html, css, opacity

考虑以下

```
<style type ='text/css'>
   .c1
   {
        opacity:0.3;
   }
</style> 
```

和

```
<div class = 'c1' id = 'myDiv'></div> 
```

和

```
<script>
   function cssFn()
   {
       document.getElementById('myDiv').style.opacity = 0.8;
   }
   cssFn();

</script> 
```

因此，我使用 javascript 更改了元素的不透明度。我的问题是。是否可以使使用 javascript 完成的样式声明处于非活动状态，而在类中声明的样式声明使用 javascript 处于活动状态。我不需要

```
document.getElementById('myDiv').style.opacity = 0.3; 
```

我只需要一个将样式重置为使用样式表声明的代码

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T17:59:46.560

我不知道这是否可以轻松完成。更改 javascript 中的样式会在元素上创建内联样式...因此`<div style="opacity: 0.3; ">`您可以删除该属性，也可以删除`!important`所有内容（不要执行后者）。然而，这两种解决方案都是 hacky。

或者正如其他问题中所建议的那样，您可以将属性设置为“”。这将否定规则并采用样式表规则。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T18:28:00.830

您可以尝试使用 2 个不同的类。

```
<style type="text/css">
  .c1 {
   opacity: 0.3;
  }
  .c2 {
   opacity: 0.8;
  }
</style> 
```

你可以用 javascript 做：

```
 document.getElementByID("myDiv").className = "c1"; 
```

或者使用 jQuery ：

```
$("#myDiv").addClass("c1"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T20:24:13.767

将要通过 Javascript 动态添加或删除的样式放在单独的类中，然后在需要时使用 Javascript 或 jQuery 添加/删除该类。

因此，与 Andredseixas 开始时的思路相同：

```
<style type ='text/css'>
   .c1
   {
     opacity:0.3;
   }
   .c2
   {
     opacity:0.3;
   }
</style> 
```

在您的函数 cssFn 中，使用 jQuery - 这样做而不是通过属性手动更改不透明度：

```
$("myDiv").addClass("c2"); 
```

然后，在完成淡入逻辑后使用 jQuery：

```
$("#myDiv").removeClass("c2"); 
```

# python - Python 像 sed 一样使用正则表达式

> ID：10251122
> 
> 赞同：1
> 
> 时间：2012-04-20T17:54:26.233
> 
> 标签：python, regex, sed

假设我有：

```
string= '{'id': '1'}' 
```

现在使用像 Perl/sed 这样的字符串，我想得到

```
string=id 
```

（在 Perl 中，它看起来像 string=~s/{\'([a-zA-Z0-9] *)\'.* $)/\1/ ）

您能否给我一些见解如何在 python 中做到这一点？我希望正则表达式语法会相似，但我不确定 python 语法以及我应该使用哪些导入，我是 Python 的初学者 :) 非常感谢 :-)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T18:41:27.637

在 Python 中，您将使用该`re`模块进行正则表达式操作。我稍微修改了你的正则表达式，但一般来说，这就是在 python 中如何进行正则表达式替换：

```
>>> import re
>>> s = "{'id': '1'}"
>>> re.sub(r"{'([^\']*)'.*$", r'\1', string)
'id' 
```

该`sub()`函数首先接受正则表达式，然后是替换，最后是字符串。re 模块的文档有更多信息： [http ://docs.python.org/library/re.html](http://docs.python.org/library/re.html)

`r`作为参数传递的字符串的前缀基本上告诉 Python 将它们视为“原始”字符串，其中大多数反斜杠转义序列都不会被解释。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T18:54:36.397

首先，我同意@PenguinCoder：因为这是有效的 JSON，你应该真正考虑使用 Python 支持来处理 JSON。

我去谷歌输入关键字： `Python regular expressions`

以下是前两个热门：

[http://docs.python.org/library/re.html](http://docs.python.org/library/re.html)

[http://docs.python.org/howto/regex.html](http://docs.python.org/howto/regex.html)

如果您阅读它们，您将找到答案。

这是工作代码：

```
import re

s = '''string= "{'id': '1'}"'''

pat = re.compile(r"\s*([^=]+)\s*=[\s'\"]*{\s*'([^']+)'")

m = pat.match(s)

if m is not None:
    id = m.group(1)
    name = m.group(2)
    result = "%s=%s" % (id, name)
    # note: could also do this: result = "%s=%s" % m.groups() 
```

# visual-studio - 如何配置 WinRT 组件以在 MTA 中运行？

> ID：10251123
> 
> 赞同：0
> 
> 时间：2012-04-20T17:54:49.713
> 
> 标签：visual-studio, windows-runtime

使用 Visual Studio 11 和 Win 8 CP...我有一个现有的进程 COM DLL，它注册自己以在多线程单元 (MTA) 中运行。我想将其转换为 WinRT 组件。谷歌搜索，我什至无法确定这是否是 WinRT 组件支持的配置。

可以将 WinRT 组件配置为运行 MTA 吗？如果是这样，你如何在 VS11 中配置它？

# java - 移动 Android View 并防止 onDraw 被一遍又一遍地调用

> ID：10251124
> 
> 赞同：2
> 
> 时间：2012-04-20T17:54:51.197
> 
> 标签：java, android, view

我正在将`View`-class 扩展到我所说`MyView`的 . （我添加了一些属性，这些属性基本上说明了在对象上绘制的内容，并处理了这个）

我每隔几毫秒移动一次此类的对象，这很好用。我`this.layout(left, top, right, bottom);`用来移动 MyView。但似乎每次移动视图时，都会重新绘制（调用 onDraw）。这是必要的吗？的内容在`MyView`移动时不会改变。事实上，内容永远不会改变 - 它以一种方式创建，四处移动，然后被销毁。

我正在使用`onDraw`它，因为每次创建它时，我都希望它在其上绘制一些文本或一些数字。我曾经扩展`ImageView`和使用过`setImageResource`，但我意识到我想要的不仅仅是不同的图像，并且为这个对象可能感觉不对的各种文本和数字内容创建图像。

我的对象可以接收 onTouch 事件也很重要，这在今天可以正常工作。

我的 onDraw 方法目前包含：（这会改变，当我让它不再重绘时）

```
@Override
public void onDraw(Canvas canvas) {
    Paint p = new Paint();
    p.setARGB(255, 0, 255, 255);
    canvas.drawRect(0, 0, 32, 32, p);
} 
```

所以问题是：我可以有一个**在创建时动态绘制**的对象，有可能**接收触摸事件**（我可以用另一种方式解决这个问题，所以它不是很重要），并且**在不重新绘制的情况下移动它（最重要） ?**

原因是：我将拥有这个类的几个对象（可能是 100+），并且我相信通过一直重新绘制对象会减慢应用程序的速度。

编辑：如果视图不可能**，我可以使用任何替代方法吗？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T18:20:25.623

> 但似乎每次移动视图时，都会重新绘制（调用 onDraw）。这是必要的吗？

**是的。**

一个`View`对象总是会`onDraw`在其移动时调用，因为必须调用 invalidate 方法，以便将在该对象中绘制的文本或任何内容绘制在新位置。

> 我可以有一个在创建时动态绘制的对象，有可能接收触摸事件

是的，根据您想要实现的目标，您可以覆盖类上的 onTouchEvent 方法，该方法[将](http://developer.android.com/reference/android/view/View.html#setOnTouchListener%28android.view.View.OnTouchListener%29)[TouchListener](http://developer.android.com/reference/android/view/View.html#onTouchEvent%28android.view.MotionEvent%29)扩展`View`或实现到您的对象

注意：不建议绘制那么多视图对象（100 多个）我记得一些 Google 人员提到过这一点，我会在找到链接后立即对其进行编辑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-20T01:45:41.623

在布局之后，如果视图移动，onDraw 几乎是肯定的——尽管很难在 Android 源代码中确定发生这种情况的位置（对任何这样做的人的支持）。相信我，我感觉到你 - 我发布了[https://plus.google.com/117549329232493334054/posts/FMf8RfhFceC](https://plus.google.com/117549329232493334054/posts/FMf8RfhFceC)，因为使用 LayoutTransition 时会出现同样的问题。

按照[此处](https://developer.android.com/guide/topics/graphics/hardware-accel.html#layers-anims)的文档，您可以使用视图属性动画（可能是 ViewPropertyAnimator；我自己学习这个）来移动视图。您可以收听该动画的结尾，然后通过运行布局“巩固”视图的位置。此外，我们应该通过在视图上放置一个新的 LayoutParams 而不是`layout`直接调用来触发布局。

# git - git：在预提交挂钩中使用对象 shas

> ID：10251126
> 
> 赞同：2
> 
> 时间：2012-04-20T17:55:02.520
> 
> 标签：git

有没有办法在提交更改之前确定文件（或理想情况下是树）的新 git sha？

背景：

每次更改存储库的另一个目录中的任何文件时，我都试图自动将存储库中一个文件中的字符串更改为唯一值。

我在想一个简单的方法是编写一个 git 钩子，它只使用子目录树的 sha 作为唯一字符串。使用 git ls-tree 作为提交后挂钩似乎很简单，但这每次都需要额外的虚拟提交来提交字符串，从而产生额外的噪音。

到目前为止，我已经确定这可能通过运行 git hash-object 来实现，但是我必须编写一个稍微复杂的脚本来递归地构建目录中文件的哈希值，以便最终计算出目录（树）。我想知道是否有更简单的选择。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T18:53:10.757

这并不*完全*涵盖您的答案，但这是一种计算提交中树的索引的方法，而无需先实际创建新提交。

如果你运行`git write-tree --prefix <subdirectory>/`，它将把树写出，就像它在索引中一样，写入磁盘，并返回哈希值。这正是执行提交时无论如何都会创建的对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T18:21:27.153

请参阅我上面的评论...但是如果您想获得目录树的某种唯一标识符，您可以执行以下操作：

```
find directory -type f -print0 | 
  xargs -0 git hash-object | 
  git hash-object --stdin 
```

这将为您目录中的每个文件计算一个哈希......然后计算哈希列表的哈希。

# java - 在内存中解压缩 ArchiveInputStream

> ID：10251128
> 
> 赞同：1
> 
> 时间：2012-04-20T17:55:10.913
> 
> 标签：java, apache-commons, apache-commons-compress

如果来自apache commons compress lib中的ArchiveInputStream的ArchiveEntry是否有可能是另一个Archive，那么我可以将该archiveEntry解压缩到内存中吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T18:05:02.870

对的，这是可能的。与流一起使用的 API 将与`ByteArrayInputStream`和一起使用`ByteArrayOutputStream`。

如果你展示你现在正在做什么的代码示例，我会给你一个更具体的答案，但想法是将未压缩的数据读入一个字节数组，然后`ByteArrayInputStream`从中创建一个并将其提供给第二个`ArchiveInputStream`.

# javascript - 如何在从 Meteor.method 返回之前等待子流程结果

> ID：10251130
> 
> 赞同：2
> 
> 时间：2012-04-20T17:55:19.100
> 
> 标签：javascript, mongodb, coffeescript, meteor

我有点惊讶`Meteor.method`定义需要返回结果而不是调用回调。但事实就是如此！

我正在尝试在 Meteor 中创建一个调用猫鼬组方法的 RPC 方法（看起来流星的数据 api 不允许我这样做，所以我正在解决它）。我有这样的事情：

```
Meteor.methods
  getdata: ->
    mongoose = __meteor_bootstrap__.require('mongoose')
    db = mongoose.connect(__meteor_bootstrap__.mongo_url)
    ASchema = new mongoose.Schema()
    ASchema.add({key: String})
    AObject = mongoose.model('AObject',ASchema)
    AObject.collection.group(
      ...
      ...
      (err,doc) -> # mongoose callback function
         # I want to return some variation of 'doc'
    )
    return ??? # I need to return 'doc' here. 
```

我自己对上面发布的代码的变体确实有效......我从我的流星客户端接到电话，猫鼬对象都发挥了它们的魔力。但我不知道如何让我的结果在原始上下文中返回。

我怎样才能做到这一点？

* * *

我的答案将使我的代码如下所示：

```
require = __meteor_bootstrap__.require
Meteor.methods
  getdata: ->
    mongoose = require('mongoose')
    Future = require('fibers/future')
    db = mongoose.connect(__meteor_bootstrap__.mongo_url)
    ASchema = new mongoose.Schema()
    ASchema.add({key: String})
    AObject = mongoose.model('AObject',ASchema)
    group = Future.wrap(AObject.collection.group,6)
    docs = group.call(AObject,collection,
      ...
      ...
    ).wait()
    return docs 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-20T19:03:22.083

啊……想通了。在谷歌搜索和谷歌搜索并发现大量评论“不要那样做，使用回调！”之后，我终于找到了它：使用[纤维](https://github.com/laverdet/node-fibers)！

我最终使用了[fiber-promise](https://github.com/lm1/node-fibers-promise)库。我的最终代码如下所示：

```
Meteor.methods
  getdata: ->
    promise = __meteor_bootstrap__.require('fibers-promise')
    mongoose = __meteor_bootstrap__.require('mongoose')
    db = mongoose.connect(__meteor_bootstrap__.mongo_url)
    ASchema = new mongoose.Schema()
    ASchema.add({key: String})
    AObject = mongoose.model('AObject',ASchema)
    mypromise = promise()
    AObject.collection.group(
      ...
      ...
      (err,doc) -> # mongoose callback function
         if err
           mypromise.set new Meteor.Error(500, "my error")
           return
         ...
         ...
         mypromise.set mydesiredresults
    )
    finalValue = mypromise.get()
    if finalValue instanceof Meteor.Error
      throw finalValue
    return finalValue 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-04T04:19:24.080

通过一系列示例查看[这个惊人的要点。](https://gist.github.com/3443021)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-22T04:26:44.030

使用fibers/future 模块可能会为您提供更好的Meteor API，因为这是内部使用的，并且它随任何香草流星安装一起提供。

举个例子：

```
require  = __meteor_bootstrap__.require
Future   = require 'fibers/future'
mongoose = require 'mongoose'

Meteor.methods
  getdata: ->
    db = mongoose.connect(__meteor_bootstrap__.mongo_url)
    ASchema = new mongoose.Schema()
    ASchema.add({key: String})
    AObject = mongoose.model('AObject',ASchema)

    # wrap the method into a promise
    group = Future.wrap(AObject.collection.group)

    # .wait() will either throw an error or return the result
    doc = group(... args without callback ...).wait() 
```

# mysql - MySQL 按最低公共父 ID 分组

> ID：10251131
> 
> 赞同：3
> 
> 时间：2012-04-20T17:55:25.547
> 
> 标签：mysql

我有一个包含`ID`,`Amount`和的表`Parent_ID`。（实际上它有点复杂，但这是本示例的所有重要列）。基本上我想要做的是按最低的公共父级（即父级ID为NULL的那些）对Amount列进行分组和求和。

```
ID  Amount  Parent_ID
1   100     NULL
2   150     1
3   50      1
4   75      3
5   25      4
6   125     NULL
7   50      6
8   50      7
9   100     8 
```

预期成绩：

```
ID  SUM
1   400
6   325 
```

如您所见，它只返回两条记录，即没有父项的记录，这意味着它们是顶级项目。Sum 列是其所有子项的`Amount`递归总和，因此`ID`= 1 是 1、2、3、4 和 5 的总和。`ID`= 6 是 6、7、8 和 9 的总和。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-20T18:10:15.950

如果您可以定义层次结构中的级别数量限制，则可以将此解决方案扩展到任意数量的级别：

```
select
    coalesce(t5.ID,t4.ID,t3.ID,t2.ID,t1.ID) as Root,
    sum(t1.Amount) as Amount
from Table1 t1
left join Table1 t2 on t1.Parent_ID = t2.ID
left join Table1 t3 on t2.Parent_ID = t3.ID
left join Table1 t4 on t3.Parent_ID = t4.ID
left join Table1 t5 on t4.Parent_ID = t5.ID
group by Root 
```

只需`left join`根据需要添加更多并将它们添加到`coalesce`.

演示：[http ://www.sqlfiddle.com/#!2/b7a79/17](http://www.sqlfiddle.com/#!2/b7a79/17)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T18:01:39.867

为了实现您正在寻找的东西，您将需要一个递归存储过程，因为您不想要将您限制在结构深度的东西。

我认为更改数据结构会更容易。添加一列，将每个子级与其顶级父级相关联。这样，您就可以通过简单的`GROUP BY`.

# c# - .NET string.IsNullOrWhiteSpace 实现

> ID：10251133
> 
> 赞同：6
> 
> 时间：2012-04-20T17:55:32.733
> 
> 标签：c#, .net, string, c#-4.0

伙计们，我正在查看**string.IsNullOrWhiteSpace**的实现：

[http://typedescriptor.net/browse/types/9331-System.String](http://typedescriptor.net/browse/types/9331-System.String)

这是实现：

```
public static bool IsNullOrWhiteSpace(string value)
{
    if (value == null)
    {
        return true;
    }
    for (int i = 0; i < value.Length; i++)
    {
        if (char.IsWhiteSpace(value[i]))
        {
        }
        else
        {
            goto Block_2;
        }
    }
    goto Block_3;
    Block_2:
    return false;
    Block_3:
    return true;
} 
```

问：是不是太复杂了？下面的实现不能做同样的工作并且更容易看：

```
bool IsNullOrWhiteSpace(string value)
{
    if(value == null)
    {
        return true;
    }   
    for(int i = 0; i < value.Length;i++)
    {
        if(!char.IsWhiteSpace(value[i]))
        {
            return false;
        }
    }
    return true;
} 
```

这个实现不正确吗？它有性能损失吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-04-20T17:58:09.507

原始代码（来自参考源）是

```
public static bool IsNullOrWhiteSpace(String value) {
    if (value == null) return true; 

    for(int i = 0; i < value.Length; i++) { 
        if(!Char.IsWhiteSpace(value[i])) return false; 
    }

    return true;
} 
```

你看到的是一个糟糕的反编译器的输出。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-20T17:57:10.413

您正在查看从反汇编的 IL 重新创建的 C#。我确信实际的实现更接近您的示例并且不使用标签。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-20T18:02:37.817

它必须是 typedescriptor 的反汇编程序。

当我使用 JetBrain 的 dotPeek 查看相同的功能时，它看起来像这样：

```
 public static bool IsNullOrWhiteSpace(string value)
    {
      if (value == null)
        return true;
      for (int index = 0; index < value.Length; ++index)
      {
        if (!char.IsWhiteSpace(value[index]))
          return false;
      }
      return true;
    } 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-20T18:11:00.373

下面显示的是旧版本所需的扩展方法。我不确定我从哪里获得代码：

```
public static class StringExtensions
    {
        // This is only need for versions before 4.0
        public static bool IsNullOrWhiteSpace(this string value)
        {
            if (value == null) return true;
            return string.IsNullOrEmpty(value.Trim());
        }
    } 
```

# actionscript-3 - 在 ViewNavigator 上保持操作栏隐藏 - Flex

> ID：10251134
> 
> 赞同：1
> 
> 时间：2012-04-20T17:55:36.187
> 
> 标签：actionscript-3, apache-flex, flex4

我有一个要隐藏操作栏的 ViewNavigator。creationComplete 侦听器成功删除了操作栏，但只要推送另一个视图，操作栏就会重新出现。我怎样才能让它隐藏起来？

```
<?xml version="1.0" encoding="utf-8"?>
    <s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
           xmlns:s="library://ns.adobe.com/flex/spark"
           creationComplete="application1_initializeHandler(event)">
    <fx:Script>
        <![CDATA[
            import mx.events.FlexEvent;

        protected function application1_initializeHandler(event:FlexEvent):void
        {
            viewNav.hideActionBar(false);
            addEventListener(MouseEvent.CLICK, pushView);
        }

        protected function pushView(event:MouseEvent):void
        {
            viewNav.pushView(FirstView);
        }
    ]]>
    </fx:Script>
    <s:ViewNavigator id="viewNav" top="0" bottom="0" left="0" right="0" firstView="FirstView" />
</s:Application> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-22T07:13:04.170

该类有一个[`View`属性](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/spark/components/View.html)`actionBarVisible`。您可以`false`在每个/所有视图上将其设置为，然后它不会显示。也许我错过了它，但`ViewNavigator`除了`hideActionBar()`.

```
<?xml version="1.0" encoding="utf-8"?>
<s:View actionBarVisible="false" >
</s:View> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T23:09:39.520

您是否尝试将隐藏代码放入鼠标处理程序中？

```
 protected function pushView(event:MouseEvent):void
    {
        viewNav.pushView(FirstView);
        viewNav.hideActionBar(false);
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-28T21:12:51.097

要在主应用程序 mxml 或样式文件中全局隐藏刚刚过去的 ActionBar：

```
<fx:Style>
    @namespace s "library://ns.adobe.com/flex/spark";
    s|View
    {
        actionBarVisible:false
    }
</fx:Style> 
```

# java - Java JList设置项目的颜色

> ID：10251142
> 
> 赞同：8
> 
> 时间：2012-04-20T17:56:07.050
> 
> 标签：java, swing, jlist, listcellrenderer

你能帮我吗，如何改变JList中显示的项目的颜色？

我正在制作一个用户 JList，我可以在其中看到在线和离线用户，并且我需要离线用户具有与在线用户不同的颜色。

我创建用户的代码

```
final String [] strings=database.getUsers(myLogin);  

jList1.setModel(new javax.swing.AbstractListModel() {
     @Override
     public int getSize() { return strings.length; }
     @Override
     public Object getElementAt(int i) { return strings[i]; }
}); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2015-10-11T11:49:51.120

我希望这段代码能完全帮助你

```
 import java.awt.BorderLayout;
    import java.awt.Color;
    import java.awt.Component;
    import java.awt.EventQueue;
    import java.util.Vector;

   import javax.swing.DefaultListCellRenderer;
   import javax.swing.JFrame;
   import javax.swing.JList;
   import javax.swing.JScrollPane;

   public class UserList {

 public static void main(String[] args) {
      EventQueue.invokeLater(new Runnable() {

           @Override
           public void run() {
                JFrame f = new JFrame("Users");
                f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                f.setSize(300, 300);

                JList list = new JList(new Vector<User>() {
                     {
                          add(new User("A", false));
                          add(new User("B", true));
                          add(new User("C", true));
                          add(new User("D", false));
                     }
                });

                list.setCellRenderer(new DefaultListCellRenderer() {

                     @Override
                     public Component getListCellRendererComponent(JList list, Object value, int index,
                               boolean isSelected, boolean cellHasFocus) {
                          Component c = super.getListCellRendererComponent(list, value, index, isSelected, cellHasFocus);
                          if (value instanceof User) {
                               User nextUser = (User) value;
                               setText(nextUser.name);
                               if (nextUser.loggedIn) {
                                    setBackground(Color.GREEN);
                               } else {
                                    setBackground(Color.RED);
                               }
                               if (isSelected) {
                                    setBackground(getBackground().darker());
                               }
                          } else {
                               setText("whodat?");
                          }
                          return c;
                     }

                });
                f.add(new JScrollPane(list), BorderLayout.CENTER);
                f.setVisible(true);
           }
      });
 }

 static class User {
      String name = "NN";
      boolean loggedIn = false;

      public User(String name, boolean loggedIn) {
           this.name = name;
           this.loggedIn = loggedIn;
      }
 } 
```

}

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-20T18:03:48.957

*   我认为您必须阅读教程[如何使用列表](http://docs.oracle.com/javase/tutorial/uiswing/components/list.html)，尤其是[编写自定义单元格渲染器](http://docs.oracle.com/javase/tutorial/uiswing/components/list.html#renderer)的部分，渲染器的概念对于[JList](http://docs.oracle.com/javase/tutorial/uiswing/components/list.html)，[JTable](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html)或[JComboBox](http://docs.oracle.com/javase/tutorial/uiswing/components/combobox.html)也是相同的

*   例子在[这里](http://www.java2s.com/Code/Java/Swing-JFC/CatalogSwing-JFC.htm)和[这个论坛在这里](https://stackoverflow.com/search?tab=newest&q=%5Bjava%5D%20%5Bswing%5D%20%5Bjlist%5D%20renderer)

# javascript - 使用Javascript检测谷歌浏览器切换CSS

> ID：10251149
> 
> 赞同：11
> 
> 时间：2012-04-20T17:56:31.820
> 
> 标签：javascript, css, google-chrome, browser-detection

我一直在玩不同的脚本，我发现一个适用于除 Chrome 之外的所有脚本......这是我在 .CSS 文件中一直使用的不同代码。我尝试将浏览器名称设为“Chrome”，但这不起作用。

```
if (browser == 'Firefox') {
    document.write('<link rel="stylesheet" href="../component/fireFoxdefault.css" />');
}
if (browser == 'Safari') {
    document.write('<'+'link rel="stylesheet" href="../component/default.css" />');
} 
```

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-04-20T18:00:34.263

使用以下方法检测 chrome：

```
var isChrome = navigator.userAgent.toLowerCase().indexOf('chrome') > -1; 
```

来源：[http ://davidwalsh.name/detecting-google-chrome-javascript](http://davidwalsh.name/detecting-google-chrome-javascript)

**更新（2015-07-20）**：

上述解决方案并不总是有效。[在这个答案](https://stackoverflow.com/questions/12625876/how-to-detect-chrome-and-safari-browser-webkit#answer-12625944)中可以找到更可靠的解决方案（见下文）。话虽如此，我会[避免浏览器检测，而是使用特征检测](http://elijahmanor.com/does-browser-sniffing-still-have-a-place/)：

```
var isChrome = /Chrome/.test(navigator.userAgent) && /Google Inc/.test(navigator.vendor); 
```

您可以包含一个专门用于 chrome 的 css 文件，如下所示：

```
if (isChrome) {
    document.write('<'+'link rel="stylesheet" href="../component/chromeDefault.css" />');
} 
```

**更新（2014-07-29）：**

@gillesc 有一个更优雅的建议来检测 Chrome，他在下面的评论中发布了该建议，也可以在这个[问题](https://stackoverflow.com/questions/81099/safe-feature-based-way-for-detecting-google-chrome-with-javascript)上查看。

```
var isChrome = !!window.chrome 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T18:51:59.570

这里有两种简单的方法，一种使用 indexOf ，一种使用 test ：

```
// first method 
function check_chrome_ua() {
    var ua = navigator.userAgent.toLowerCase();
    var is_chrome = /chrome/.test(ua);

    return is_chrome;
}

// second method */
function check_chrome_ua2() {
    var ua = navigator.userAgent.toLowerCase();
    var is_chrome = ua.indexOf("applewebkit/") != -1 && ua.indexOf("khtml") > - 1;

    return is_chrome;
}

alert(check_chrome_ua()); // false or true 
alert(check_chrome_ua2()); // false or true 
```

在使用这两个布尔函数之一检查 chrome 是否正在使用后，您可以实现更改样式表的方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-11-26T16:06:36.087

**iOS 上的 Chrome 更新**：Chrome 38（在 iOS 8.1 上测试）在`!!window.chrome`. 要解决此问题，您可以使用：

```
function isChrome(){
    var windowChrome = !!window.chrome;
    if(!windowChrome){
        // Chrome iOS specific test
        var pattern = /crios/i;
        return pattern.test(window.navigator.userAgent);
    }else{
        return windowChrome;
    }
} 
```

谷歌关于此事的[参考资料](https://developer.chrome.com/multidevice/user-agent)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-04-20T18:11:13.760

```
var userAgent = navigator.userAgent.toLowerCase(); 
$.browser.chrome = /chrome/.test(navigator.userAgent.toLowerCase()); 

// Is this a version of Chrome?
if($.browser.chrome){
  userAgent = userAgent.substring(userAgent.indexOf('chrome/') +7);
  userAgent = userAgent.substring(0,userAgent.indexOf('.'));
  $.browser.version = userAgent;
  // If it is chrome then jQuery thinks it's safari so we have to tell it it isn't
  $.browser.safari = false;
}

// Is this a version of Safari?
if($.browser.safari){
  userAgent = userAgent.substring(userAgent.indexOf('safari/') +7);
  userAgent = userAgent.substring(0,userAgent.indexOf('.'));
  $.browser.version = userAgent;
} 
```

# c++ - concurrent_vector.h 中的警告 C4189

> ID：10251152
> 
> 赞同：0
> 
> 时间：2012-04-20T17:57:03.363
> 
> 标签：c++, concurrency, warnings, ppl

我在我的项目中收到以下警告（发布和调试模式）：

```
C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\include\concurrent_vector.h(1599): warning C4189: '_Array' : local variable is initialized but not referenced
      C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\include\concurrent_vector.h(1598) : while compiling class template member function 'void Concurrency::concurrent_vector<_Ty>::_Destroy_array(void *,Concurrency::concurrent_vector<_Ty>::size_type)'
      with
      [
          _Ty=Vector3i
      ]
      d:\Some_path\somefile.h(780) : see reference to class template instantiation 'Concurrency::concurrent_vector<_Ty>' being compiled
      with
      [
          _Ty=Vector3i
      ] 
```

somefile.h 是我的文件，第 780 行有以下代码：

```
Concurrency::concurrent_vector<Vector3i> m_ovColors; 
```

Vector3i 是这样的：

```
template<typename T> class TVector3 {
public:
    T x, y, z;
}

typedef TVector3<int>           Vector3i; 
```

concurrent_vector.h 中第 1598 行的代码是（第 1598 行只是'{'）：

```
template<typename _Ty, class _Ax>
void concurrent_vector<_Ty, _Ax>::_Destroy_array( void* _Begin, size_type _N ) 
{
    _Ty* _Array = static_cast<_Ty*>(_Begin);
    for( size_type _J=_N; _J>0; --_J )
        _Array[_J-1].~_Ty(); // destructors are supposed to not throw any exceptions
} 
```

这可能是什么原因？这个 somefile.h 当包含在其他项目中时不会发出那种警告。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T20:39:03.500

问题是由于内联，代码变成了这个：

```
_Ty* _Array = static_cast<_Ty*>(_Begin);
for( size_type _J=_N; _J>0; --_J )
    ; // destructor has no effect! 
```

此时，编译器停止并检查是否使用了所有已初始化的变量，并发出警告。

（然后代码将被优化为一个空函数：

```
; // variable is unused
; // loop has no effect 
```

但此时警告已经发出。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T17:39:47.400

这种方法有效：

```
#pragma warning( disable : 4189 )
#include <concurrent_vector.h>
#pragma warning( default : 4189 ) 
```

谢谢大家

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-20T18:18:47.153

也许编译器正在优化循环而不是`static_cast`. 您是否有程序相关部分的汇编程序/源代码列表？

我对 MSVC STL 的经验是，如果你用它编译，`/W4`你会得到很多误报。

# jquery - 如何获取 Html.Editorfor 的日期选择器

> ID：10251153
> 
> 赞同：11
> 
> 时间：2012-04-20T17:57:04.363
> 
> 标签：jquery, asp.net-mvc-3, datepicker, jquery-ui-datepicker

在我的 MVC3 剃须刀页面上，我有一个日期字段

```
@Html.EditorFor(model => model.Member.Dob) 
```

下面给出的是我试图为“出生日期”字段获取日期选择器的代码。

```
<script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>
<link href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/themes/base/jquery-ui.css" rel="stylesheet" type="text/css"/>
 <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.5/jquery.min.js"></script>
 <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/jquery-ui.min.js"></script>
 <script type="text/javascript">
      $(document).ready(function () {
          debugger;
          $("#Member_Dob").datepicker();
      });
  </script> 
```

但是当我运行这个页面时，我得到了错误

```
Microsoft JScript runtime error: Object doesn't support property or method 'datepicker' 
```

请帮我找到一种将日期选择器添加到我的页面的方法

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-04-20T18:02:24.980

您需要在 Views\Shared\EditorTemplate 文件夹中创建一个 EditorTemplate。将其命名为 DateTime.cshtml。应该如下所示：

```
@model System.DateTime?
 <div class="editor-label">
    @Html.Label("")
</div>
<div class="editor-field">
    @Html.TextBox("", String.Format("{0:MM/dd/yyyy}",(Model == DateTime.MinValue)? null : Model), new { @class="text"})
</div>

<script type="text/javascript">
    $(document).ready(function () {
        $("#@ViewData.ModelMetadata.PropertyName").datepicker({
            changeMonth: true,
            changeYear: true,
            dateFormat: 'mm/dd/yy',
            gotoCurrent: true
        });
    });
</script> 
```

按如下方式使用它：

```
@Html.EditorFor(model => model.Member.Dob) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T08:12:46.443

这篇文章完美地涵盖了这一点：http: [//blogs.msdn.com/b/stuartleeks/archive/2011/01/25/asp-net-mvc-3-integrating-with-the-jquery-ui-date-picker-和-添加-a-jquery-validate-date-range-validator.aspx](http://blogs.msdn.com/b/stuartleeks/archive/2011/01/25/asp-net-mvc-3-integrating-with-the-jquery-ui-date-picker-and-adding-a-jquery-validate-date-range-validator.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-07-02T20:48:27.550

```
<div class="form-group">
                @Html.LabelFor(model => model.Birthdate, "Birthday", new { @class = "control-label col-md-2" })
                <div class="col-md-5">
                    @Html.Kendo().DatePickerFor(model => model.Birthdate)
                    @Html.ValidationMessageFor(model => model.Birthdate)
                </div>
            </div> 
```

# php - WP中带有拇指错误的相关帖子

> ID：10251155
> 
> 赞同：0
> 
> 时间：2012-04-20T17:57:08.993
> 
> 标签：php, wordpress

`single.php`我正在尝试使用下面的 PHP 代码在主帖子页面的末尾引入相关帖子。

**EG：** *主页 > 点击帖子 > 帖子页面 (single.php) > 内容下方是 3 个带有缩略图的相关帖子。*

这是我正在尝试的：

```
<!-- Related Stories -->

<div class="postCategory" style="">Related Stories<br />

        <div class="clear"></div>
        <div style="width:100%;" align="center">
        <div style="width:495px;" align="center">    

            <?php foreach( $Featuredposts as $post ) : setup_postdata($post); ?>
            <?php //$do_not_duplicate[] = $post->ID;  //print("$do_not_duplicate"); ?>
            <?php if($featured_image=get_post_meta($post->ID, "featured_image", true)) { ?>  

            <div style="display:block; width:150px; margin:0 15px 0 0; float:left" align="center">
                <a class="oborder" href="<?php the_permalink() ?>"><img src="<?php echo $featured_image; ?>" heigh="124" width="143" border="0" /></a>            
                <span style="display:inline;"><a href="<?php the_permalink() ?>" rel="bookmark" title="Permanent Link to <?php the_title_attribute(); ?>" style="display:inline;"><?php the_title(); ?></a></span>
            </div>    

            <?php }?>               
            <?php endforeach; ?>

            <div class="clear"></div>
       </div>
       </div>

 <!-- End Pull in Related Stories --> 
```

**这是我得到的错误：**

```
Warning: Invalid argument supplied for foreach() in /data/24/1/0/139/1815302/user/1967139/htdocs/RIF/wp-content/themes/crown_readitforward2012/single.php on line 280 
```

*第 280 行 =* `<div style="width:495px;" align="center">` ??

*（当我删除它时 - 我在第 281 行得到错误）*

*第 281 行=* `<?php foreach( $Featuredposts as $post ) : setup_postdata($post); ?>`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T18:31:38.660

print_r 你的 $Featuredposts 以确保它有数据。

```
print_r($Featuredposts); 
```

# python - 在使用 requests-oauth 从 Imgur API 接收令牌信息后，追溯传递令牌信息

> ID：10251158
> 
> 赞同：0
> 
> 时间：2012-04-20T17:57:22.280
> 
> 标签：python, oauth, imgur

我不熟悉使用任何 API 以及 HTTP 请求，所以我遇到了一些麻烦。从 GET 请求中获取令牌信息后，我不确定如何将令牌信息传递给 API。imgur API 说它需要三个端点：[http](http://api.imgur.com/auth) ://api.imgur.com/auth但我只能到达第二个端点，因为我无法传递请求的令牌。

模块文档对我来说非常模糊：[https ://github.com/maraujop/requests-oauth](https://github.com/maraujop/requests-oauth)

这是我编写的应该成功通过身份验证的代码，但它返回一个 html 页面[http://pastebin.com/19hnBy1C](http://pastebin.com/19hnBy1C)。

```
import requests
from oauth_hook import OAuthHook
import cgi

OAuthHook.consumer_key = 'XXXXXXX'
OAuthHook.consumer_secret = 'YYYYY'

#just in case
oauth_hook = OAuthHook(header_auth=True)

#request the tokens, using the keys set above
r = requests.get(url='https://api.imgur.com/oauth/request_token', hooks={'pre_request': oauth_hook,})

#parse the lsit
tokenList = cgi.parse_qs(r.content)

token = tokenList['oauth_token']
tokenSecret = tokenList['oauth_token_secret']

#this is where I'm not sure what to do, 
#I create a new hook with the tokens I received
oauth_hook = OAuthHook(access_token=token[0], access_token_secret=tokenSecret[0])

#send the GET request
r = requests.get(url='https://api.imgur.com/oauth/authorize', hooks={'pre_request': oauth_hook,})

#this is that HTML that requires me to enter account info, how do I do that in python?
print r.content

#this is the next step, which, if you uncomment the last print, shows that the auth failed.
r = requests.get(url='https://api.imgur.com/oauth/access_token', hooks={'pre_request': oauth_hook,})

#print r.text 
```

继续的最佳方式是什么？

我想也许我可以`authorize`用我的用户名/密码作为数据或参数向 api 发送一个 POST，但这似乎不起作用。

Imgur API 建议我查看一些 twitter 文档以获得一个好主意，但我正在阅读的那个：http: [//net.tutsplus.com/tutorials/php/how-to-authenticate-users-with-twitter- oauth/](http://net.tutsplus.com/tutorials/php/how-to-authenticate-users-with-twitter-oauth/)，有点过头了，因为它是 PHP，尽管它似乎是我应该做的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T09:03:27.863

我是 requests-oauth 的作者。我最近发布了这个应用程序的 0.4.0 版并改进了文档以帮助新来的 OAuth。

希望这里是您问题的答案： [https ://github.com/maraujop/requests-oauth#3-legged-authorization](https://github.com/maraujop/requests-oauth#3-legged-authorization)

很抱歉花了这么长时间来回答。

# sql - SQL 日期字符串拆分

> ID：10251164
> 
> 赞同：0
> 
> 时间：2012-04-20T17:58:02.260
> 
> 标签：sql, tsql, date

我怎么能像这样拆分日期范围

> 20120301-20120331

在 T-SQL 中分成两个不同的日期？数据出现在名为 date_range 的列中。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-20T17:59:28.223

假设 SQL Server：

```
DECLARE @string VARCHAR(17) = '20120301-20120331';

SELECT 
    CONVERT(DATETIME, LEFT(@string, 8)), 
    CONVERT(DATETIME, RIGHT(@string, 8)); 
```

从表中：

```
SELECT 
    CONVERT(DATETIME, LEFT(column_name, 8)),
    CONVERT(DATETIME, RIGHT(column_name, 8))
FROM dbo.table_name; 
```

# c# - Unity拦截 - 自定义拦截行为

> ID：10251165
> 
> 赞同：1
> 
> 时间：2012-04-20T17:58:04.950
> 
> 标签：c#, unity-container, interception

我正在使用自定义拦截行为来过滤记录（过滤器基于当前用户是谁）但是我遇到了一些困难（这是拦截器调用方法的主体）

```
var companies = methodReturn.ReturnValue as IEnumerable<ICompanyId>;
List<string> filter = CompaniesVisibleToUser();

methodReturn.ReturnValue = companies.Where(company =>     
    filter.Contains(company.CompanyId)).ToList(); 
```

CompaniesVisibleToUser 提供允许用户查看的公司 ID 的字符串列表。

我的问题是传入的数据 - 公司 - 将是各种类型的 IList，所有这些都应该实现 ICompanyId，以便在 companyId 上过滤数据。但是，似乎强制转换 - as IEnumerable 导致数据作为这种类型返回，这会导致调用堆栈进一步出现问题。

如何在不更改返回类型的情况下执行过滤器？

我得到的例外是

无法转换类型为“System.Collections.Generic.List `1[PTSM.Application.Dtos.ICompanyId]' to type 'System.Collections.Generic.IList`1 [PTSM.Application.Dtos.EmployeeOverviewDto]”的对象。

更高的调用者是

> ```
>  public IList<ApplicationLayerDtos.EmployeeOverviewDto> GetEmployeesOverview()
>     {
>         return _appraisalService.GetEmployeesOverview();
>     } 
> ```

如果我改变

IEnumerable`<ICompanyId>`到 IEnumerable`<EmployeeOverviewDto>`它按预期工作，但显然这不是我想要的，因为被过滤的列表并不总是那种类型。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-13T14:12:37.250

当你做任务时：

```
methodReturn.ReturnValue = companies.Where(company =>     
filter.Contains(company.CompanyId)).ToList(); 
```

您将返回值设置为 type `List<ICompanyId>`。

您可以将更高的调用函数更改为：

```
public IList<ApplicationLayerDtos.ICompanyId> GetEmployeesOverview()
{
    return _appraisalService.GetEmployeesOverview();
} 
```

或者您可以将其更改为：

```
public IList<ApplicationLayerDtos.EmployeeOverviewDto> GetEmployeesOverview()
{
    var result = (List<EmployeeOverviewDto>)_appraisalService.GetEmployeesOverview().Where(x => x.GetType() == typeof(EmployeeOverviewDto)).ToList();

    return result;
} 
```

两者都应该工作。

# r - 如何在生成多个绘图代码时向文件添加标签

> ID：10251166
> 
> 赞同：2
> 
> 时间：2012-04-20T17:58:08.367
> 
> 标签：r

我有以下代码生成多个图，每个图都在一个单独的 pdf 文件中

```
myplot <-function(ind,dfList) {
 dat <- dfList[[ind]]
  detects <- as.numeric(dat$Result2[dat$cens== 0])
  pdf(file=paste("Desktop/qqplot_",ind,".pdf",sep = ""))
  qqnorm(log(detects), ylab="Ln of uncensored data in ppm", main="Q-Q plot", pch=16) 
  qqline(log(detects))
             dev.off()
           }

Plots <- lapply(1:3, myplot , dfList = mydata) 
```

问题 1：此代码生成 3 个 pdf 文件。文件的标签是 1、2 和 3。如何插入将每个文件重新标记为绘图 X、绘图 Y、绘图 Z 的代码。

问题2：在我的myplot函数中，绘图的标题是QQ绘图，但我想将标题更改为与文件名相对应。所以每个情节标题应该是情节X，情节Y，情节Z。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-20T19:58:58.623

由于没有虚拟数据而未经测试，但应该可以工作。

```
myplot <- function(ind,dfList) {
    # Add a vector of labels
    # then use index at will to build plot and title strings etc
    labels <- c("X", "Y", "Z")
    myfilename <- paste("Desktop/qqplot_",labels[ind],".pdf",sep = "")
    mytitle <- paste("Plot ",labels[ind],sep = "")

    dat <- dfList[[ind]]
    detects <- as.numeric(dat$Result2[dat$cens== 0])
    pdf(file=myfilename)
        qqnorm(log(detects), ylab="Ln of uncensored data in ppm", main=mytitle, pch=16) 
        qqline(log(detects))
    dev.off()
}

Plots <- lapply(1:3, myplot , dfList = mydata) 
```

# sql - 从 SQL 中的直方图类型数据生成百分位数

> ID：10251168
> 
> 赞同：0
> 
> 时间：2012-04-20T17:58:23.860
> 
> 标签：sql, sql-server

我有一张直方图类型数据的表格。有 2 列：Bucket、Count。

Bucket 是直方图存储桶，Count 是该存储桶中值的数量。

现在我的存储桶是有序的，例如，假设存储桶表示完成一项任务所需的分钟数。我们可以有诸如 0-5 分钟、5-10 分钟、10-15 等之类的桶。

我要计算的是哪个桶落在第 XX 个百分位。例如，如果 90% 的任务在 12 分钟内完成，那么我想知道 90% 的任务在 10-15 桶或更少。

例如，假设我有下表：

```
Bucket | Count
--------------
  0    | 10
  1    | 15
  2    | 5
  3    | 15 
```

如果我想计算第 60 个百分位数。会是

(10+15+5+15)*.60 = 27 所以结果将是存储桶 2，因为 60% 的所有条目都在存储桶 2 或更少

有没有办法在 SQL 中计算这个？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T18:07:48.293

注意：`COUNT`是一个保留的 SQL 字，所以也许你应该使用 valueCount。

应该是这样的（假设您的表称为 histogramTable）：

```
SELECT bucket, 
    (SELECT SUM(valuecount) 
        FROM histogramTable AS in1 
        WHERE in1.bucket <= ot.bucket
    ) * 100 / (
            SELECT SUM(valueCOUNT) 
            FROM histogramTable AS in1
            ) As Percentile
FROM histogramTable AS ot 
```

当然，我没有转换任何`DECIMAL`数据类型的值，所以你的`Percentile`列会丢失一些精度。

然后假设您需要代表百分位数 80 的存储桶：

```
DECLARE @Percentile AS INT
SET @Percentile = 80

SELECT TOP 1 bucket FROM(
SELECT bucket, 
    (SELECT SUM(valuecount) 
        FROM histogramTable AS in1 
        WHERE in1.bucket <= ot.bucket
    ) * 100 / (
            SELECT SUM(valueCOUNT) 
            FROM histogramTable AS in1
            ) As Percentile
FROM histogramTable AS ot 
) AS h
WHERE h.Percentile > @Percentile
ORDER BY Percentile; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-01-25T15:15:06.890

从 SQL Server 2012 开始，现在有 SQL 标准[`PERCENTILE_DISC`](https://docs.microsoft.com/en-us/sql/t-sql/functions/percentile-disc-transact-sql?view=sql-server-2017)和[`PERCENTILE_CONT`](https://docs.microsoft.com/en-us/sql/t-sql/functions/percentile-cont-transact-sql?view=sql-server-2017)逆分布函数，可用于此目的。不幸的是，到目前为止，SQL Server 仅将它们实现为窗口函数，而不是聚合函数。

它们对您显示的数据集（似乎是预先聚合的）不是很有用，但它们肯定会对源数据集有所帮助，您可以在其中简单地计算：

```
SELECT DISTINCT percentile_disc(0.6) WITHIN GROUP (ORDER BY bucket) OVER ()
FROM t 
```

[我在这里写了关于 SQL 百分位数的博客，更详细](https://blog.jooq.org/2019/01/22/calculate-percentiles-to-learn-about-data-set-skew-in-sql/)。

# php - 为什么这个 mysql 行不能与我的 php 一起运行？

> ID：10251172
> 
> 赞同：0
> 
> 时间：2012-04-20T17:58:38.443
> 
> 标签：php, mysql

基本上我要做的是运行一个 sql 语句，将查询结果的选择部分插入到最近创建的表中。我用mysql对其进行了测试并运行了这一行

```
INSERT INTO searched(imagetargetpath, gamename, gamedirectory, `like`, dislike) 
SELECT imagetargetpath, gamename, gamedirectory, `like`, dislike
FROM boardgamelist
WHERE gamename LIKE '%david%' 
```

成功运行，但是当我从 phpmyadmin 提供的内容中将同一行放入 php 时，mysql_query 似乎没有运行

```
$sql = "INSERT INTO searched(imagetargetpath, gamename, gamedirectory,
`like`,   dislike) \n"
. "SELECT imagetargetpath, gamename, gamedirectory, `like`, dislike\n"
. "FROM boardgamelist\n"
. "WHERE gamename LIKE \'%david%\'";
    //copies query
    $copy_query = mysql_query($sql); 
```

以前在我的代码中但是我确实有一个创建表“搜索”的mysql命令（确认工作）我忘记了如何处理不允许它运行的mysql命令？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T18:14:50.833

您忘记了换行符处的空格：

```
. "SELECT imagetargetpath, gamename, gamedirectory, `like`, dislike\n"
                                                                   ^---here
. "FROM boardgamelist\n"
                     ^---here 
```

这将使最终的查询字符串为：

```
... dislikeFROM boargamelistWHERE 
```

如果您甚至有基本的错误处理，例如

```
$copy_query = mysql_query($sql) or die(msyql_error());
                               ^^^^^^^^^^^^^^^^^^^^^^ 
```

您会被告知语法错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-20T18:16:37.577

尝试这个

```
$sql = "INSERT INTO searched(imagetargetpath, gamename, gamedirectory, `like`, dislike) "
. "SELECT imagetargetpath, gamename, gamedirectory, `like`, dislike "
. "FROM boardgamelist WHERE gamename LIKE '%david%'"; 
```

# html - 16 x 16 色块组 CSS + HTML

> ID：10251175
> 
> 赞同：2
> 
> 时间：2012-04-20T17:58:44.157
> 
> 标签：html, css

我有以下问题，我在页面上有一堆 16 x 16 块，布局流畅（第一张图片）。这些块也属于一个组，这些组在第二张图像中突出显示

我想做的是，当我悬停一个块时，它会显示整个组以某种方式像一个边框（如图 3 所示），唯一的限制是块必须保持相同的颜色。- 是的，同一组中的块总是相邻的。

[![CSS 帮助](../Images/2421d05c0ce6c34e7b4b3e6344ea7d1e.png)](https://i.stack.imgur.com/Tu4AU.jpg)

我的第一次尝试是

```
<div class="container">
  <div class="group">
    <div class="color-block"></div>
    ...
    <div class="color-block"></div>
  </div>
  <div class="group">
    <div class="color-block"></div>
    ...
    <div class="color-block"></div>
  </div>
  <div class="group">
    <div class="color-block"></div>
    ...
    <div class="color-block"></div>
  </div>
</div> 
```

在哪里`.group`，`display:inline-block`但是当一个组进入两条线时，这会倒下（见下图）

[![在此处输入图像描述](../Images/53c2cf537ce627a26240a434486650db.png)](https://i.stack.imgur.com/igvDg.jpg)

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T19:37:18.970

您不能`:hover`使用 CSS 创建不规则的轮廓。您必须使用 JavaScript 来确定相邻块的位置并相应地设置它们的样式。

# html - 为链接生成“//”的 Web 编程框架

> ID：10251182
> 
> 赞同：5
> 
> 时间：2012-04-20T17:59:06.923
> 
> 标签：html, http

最近我注意到很多 Web 编程框架在某些生成的和链接`//`的前面使用`href``src`

```
//example from twitter.com
<a href="//support.twitter.com">Help</a> 
```

这只是`http`/的快捷方式`https`，还是更多？

有谁知道这种技术是从哪里开始的，是否有一个浏览器支持矩阵来确认/描述领先的行为`//`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-20T18:03:36.167

它是由 Paul Irish 描述的最好的协议相关 URL；[http://paulirish.com/2010/the-protocol-relative-url/](http://paulirish.com/2010/the-protocol-relative-url/)

基本上，如果您使用协议相对 URL（以“//”而不是“http://”或“https://”开头的链接），您可以避免“此页面包含安全和非安全项目”弹出 -在 Internet Explorer 中（也可能在其他浏览器上）。您也可以在 .css 文件中使用它，只需将“http://”或“https://”更改为“//”即可。

# winapi - 有没有办法知道程序何时刚刚关闭？

> ID：10251190
> 
> 赞同：0
> 
> 时间：2012-04-20T18:00:01.830
> 
> 标签：winapi, window

在程序（如记事本或 firefox）刚刚关闭后，我需要执行一些指令。有没有办法知道程序何时刚刚关闭然后执行这些指令？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T20:13:08.260

您可以获取进程的句柄，然后[等待它发出信号](http://msdn.microsoft.com/en-us/library/windows/desktop/ms687032%28v=vs.85%29.aspx)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T18:59:06.843

既然您谈论“关闭”程序，我假设关闭的程序具有顶级窗口。注册一个[shell 挂钩](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644959%28v=vs.85%29.aspx#wh_shellhook)，以便在销毁窗口时收到通知 (HSHELL_WINDOWDESTROYED)。您只需检查窗口是否属于您要观看的进程。您可以使用[GetWindowThreadProcessId](http://msdn.microsoft.com/en-us/library/windows/desktop/ms633522%28v=vs.85%29.aspx)函数来执行此操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T18:10:19.093

在 .Net 中，您应该能够通过为感兴趣的进程 连接到[Process.Exited来做到这一点。](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.exited.aspx)

如果您想对任何更复杂的 EXE 实例执行此操作。您可以使用[WMI 事件](http://weblogs.asp.net/whaggard/archive/2006/02/11/438006.aspx)`Win32_Process`来监视具有匹配模式的对象上的实例删除。

# c# - 正则表达式在给定范围内查找 5 个连续数字的一个或多个实例

> ID：10251194
> 
> 赞同：1
> 
> 时间：2012-04-20T18:00:29.403
> 
> 标签：c#, .net, regex

我是 RegEx 的新手，所以我需要一些帮助。谁能帮我解析一个字符串并找到一个或多个范围从**40000**到**99999**的数字实例？以下是一些示例字符串：

*   订单详情，Acme，#46405,53000,86232，4/17`- 3 instances`
*   PSA 订单详情：招聘实践 (46445)；从 12 年 4 月 16 日开始`- 1 instance`
*   PC Pitstop 32134 Direct for 4/18/12`- 0 instances`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-20T18:31:14.433

你可以尝试这样的事情：

```
(?<!\d)[4-9]\d{4}(?!\d) 
```

在正则表达式上[查看](http://regexr.com?30ndh)

**编辑：**这是一个`c#`测试它的代码片段：

```
// could be whatever
var str = "50000 alpha 43 84100";
var regex = new Regex(@"(?<!\d)[4-9]\d{4}(?!\d)");
foreach (Match match in regex.Matches(str))
    Console.WriteLine(match.Value); 
```

这输出：

```
50000
84100 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-20T18:21:53.823

你应该使用正则表达式

```
(?<!\d)([4-9]\d{4})(?!\d) 
```

* * *

**未经测试的**代码：

```
using System;
using System.Collections;
using System.Text.RegularExpressions;

class Program
{
  static void Main()
  {
    string input = "50000 Order Acme, #46405,53000,86232, for 4/17 60000";
    Regex t = new Regex(@"(?<!\d)([4-9]\d{4})(?!\d)", RegexOptions.Singleline) 
    MatchCollection theMatches = t.Matches(input) 
    for (int counter = 0; counter < theMatches.Count; counter++)
    {
      Console.WriteLine(theMatches[counter].Value); 
    }
  }
} 
```

对于多行输入，请使用`RegexOptions.Multiline`而不是`RegexOptions.Singleline`.

* * *

注意：*我建议您始终在字符串的开头和结尾使用匹配来测试正则表达式。*

# ios - iOS - 性能测试？

> ID：10251197
> 
> 赞同：1
> 
> 时间：2012-04-20T18:00:40.050
> 
> 标签：ios, performance, instruments

什么是在 iOS 上执行分析测试的正确仪器工具。在执行某些任务时，我注意到我的应用程序出现了一些滞后，我想看看是什么导致了这些性能下降。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T18:04:59.223

**[Time Profiler](https://developer.apple.com/library/mac/#documentation/developertools/conceptual/InstrumentsUserGuide/Built-InInstruments/Built-InInstruments.html)**正是您想要的。
它允许您检查哪些操作花费的时间最长。

它甚至可以区分你负责的电话和你甚至不影响的事情。

# objective-c - Objective-C/C中Interbase密码散列算法的实现

> ID：10251198
> 
> 赞同：2
> 
> 时间：2012-04-20T18:00:41.633
> 
> 标签：objective-c, c, hash, passwords, interbase

我们已经使用 Interbase/Firebird 多年，并采用了来自 interbase 安全数据库的密码散列作为一些非关键加密用途的便捷标准。

随后，我们构建了一套 XML Web 服务，并使用相同的散列算法在传输某些数据元素之前对其进行加密。多年来，我们已经在 Delphi 和 Java 中实现了算法的端口，尽管成功使这些端口工作的程序员不再可用。

我们现在正在考虑从 iOS 应用程序（由承包商构建）使用我们的 Web 服务，并且需要将相同的加密算法移植到 Objective-C。

我花了一些时间在谷歌上搜索，发现一些旧的论坛帖子表明原始算法是 Unix 的 Crypt 函数。然而，似乎有许多称为 Crypt 的 Unix 函数的实现，并且不清楚哪一个（如果有的话）可能符合要求。

我知道我们应该能够为我们的承包商提供 Objective-C 或纯 C 的实现，他们应该能够使用它。

任何人都可以指出原始 Interbase 密码散列算法的 C/Objective-C 实现吗？

如果我遗漏了任何内容，我可以提供任何进一步的信息。

# c# - ClientEvents 标记在 Infragistics WebImageViewer 中不起作用

> ID：10251199
> 
> 赞同：0
> 
> 时间：2012-04-20T18:00:46.317
> 
> 标签：c#, javascript, asp.net, infragistics

我正在尝试自动化我的 WebImageViewer ..当页面加载时，查看器应该浏览其中的幻灯片/图像..我找到了一些关于如何实现的示例，但我发现的最好的示例似乎给出了一个例外，我似乎无法找出原因。这是下面的代码和异常：-

```
 <ig:WebImageViewer ID="WebImageViewer1" runat="server" BorderColor="#990000" 
    BorderStyle="Groove" 

    style="z-index: 1; left: 221px; top: 300px; position: absolute; height: 576px; width: 720px" 
    BorderWidth="2px">
    <Header Text="CDMS Features" Visible="True">
    </Header>
    <Footer Text="CDMS© is a product of Blue Barracuda Technologies" Visible="True">
    </Footer>
    <Items>
    <ClientEvents Initialize="ivInit" />
    <ScrollAnimations Type="NextItem" />
        <ig:ImageItem ImageUrl="~/Styles/DiagnosisSlider.png" 
            NavigateUrl="http://localhost:9480/Default.aspx" />
        <ig:ImageItem ImageUrl="~/Styles/MedbookSlide.png" />
        <ig:ImageItem ImageUrl="~/Styles/ASKDOCSlider.png" />
    </Items>

</ig:WebImageViewer>

<script language="javascript" type="text/javascript">
       var imageViewer = null;
       function ivInit(ivCSO)
       {
           imageViewer = ivCSO;
           window.setInterval('imageViewer.navigateNext();', 3000);

       }

</script> 
```

我得到的异常：解析器错误消息：Infragistics.Web.UI.ListControls.ImageItemCollection 必须具有“Infragistics.Web.UI.ListControls.ImageItem”类型的项目。“ClientEvents”的类型为“System.Web.UI.HtmlControls.HtmlGenericControl”。

有任何想法吗？帮助真的很感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T19:10:44.107

The error that you are getting is because the ClientEvents is within the Items collection and it shouldn't be. The correct markup is:

```
<ig:WebImageViewer ID="WebImageViewer1" runat="server" BorderColor="#990000" BorderStyle="Groove"
    Style="z-index: 1; left: 221px; top: 300px; position: absolute; height: 576px;
    width: 720px" BorderWidth="2px">
    <Header Text="CDMS Features" Visible="True">
    </Header>
    <Footer Text="CDMS© is a product of Blue Barracuda Technologies" Visible="True">
    </Footer>
    <ClientEvents Initialize="ivInit" />
    <ScrollAnimations Type="NextItem" />
    <Items>
        <ig:ImageItem ImageUrl="~/Styles/DiagnosisSlider.png" NavigateUrl="http://localhost:9480/Default.aspx" />
        <ig:ImageItem ImageUrl="~/Styles/MedbookSlide.png" />
        <ig:ImageItem ImageUrl="~/Styles/ASKDOCSlider.png" />
    </Items>
</ig:WebImageViewer> 
```

# linux - gcc -mpreferred-stack-boundary 选项

> ID：10251203
> 
> 赞同：17
> 
> 时间：2012-04-20T18:01:02.173
> 
> 标签：linux, gcc, compilation, stack

我想知道`-mpreferred-stack-boundary`在 GNU 编译器编译期间选项的用途是什么。我已经检查了文档，但我失去了解释。有人可以解释一下吗。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-21T04:37:51.317

> 我想知道在 GNU 调试器中编译期间 -mpreferred-stack-boundary 选项的用途。

该选项与调试器*完全无关。*

它会影响二进制文件中生成的代码。默认情况下，GCC 将安排事情，以便每个函数在进入时立即将其堆栈指针对齐在 16 字节边界上（如果您有局部变量并启用`sse2`指令，这可能很重要）。

如果将默认值更改为 eg `-mpreferred-stack-boundary=2`，则 GCC 将在 4 字节边界上对齐堆栈指针。这将减少您的例程的堆栈要求，但如果您的代码（或您调用的代码）*确实*使用`sse2`，则会崩溃，因此通常不安全。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-03-27T19:22:50.207

它与程序在内存中布局时使用的字节边界有关。

堆栈边界 = 2 的作用是确保堆栈设置为 dword 大小的增量，这会阻止您的机器优化堆栈。

如果您签出：

```
`info gcc and search by entering "/mpreferred-stack-boundary"` it says:
>-mpreferred-stack-boundary=num
> 
```

> 尝试保持堆栈边界对齐到 2 提升到 num 字节边界。如果未指定 -mpreferred-stack-boundary，则默认值为 4（16 字节或 128 位）。

对于 Intel 386 和 AMD x86-64 机器，默认堆栈边界 4 是相同的。

当我尝试在我的 64 位 linux 机器上使用“m-preferred-stack-boundary=2”选项时，编译失败并出现错误

> “-mprefered-stack-boundary=2 不在 4 到 12 之间”。

这是因为地址字段的宽度在 64 位机器中从 4 个字节增加到 8 个字节。所以它不能在 stack-boundary=2 处写入单个块，因为 2^2=4 字节。然而，有趣的是，堆栈边界为 3 在 32 位和 64 位机器上仍会返回错误，这将是 8 字节边界。

我不能包含该链接，因为我没有 10 名声望...但是搜索很容易就可以发现它是一项安全功能，因为 8 个字节很容易导致堆栈错位...毫无疑问其他人知道得更好，或者有更多的细节。

[堆栈是如何错位的](https://gcc.gnu.org/onlinedocs/gcc-4.2.0/gcc/i386-and-x86_002d64-Options.html) 说：

> To ensure proper alignment of this values on the stack, the stack boundary must be as aligned as that required by any value stored on the stack. Further, every function must be generated such that it keeps the stack aligned. Thus calling a function compiled with a higher preferred stack boundary from a function compiled with a lower preferred stack boundary will most likely misalign the stack. It is recommended that libraries that use callbacks always use the default setting.
> 
> This extra alignment does consume extra stack space, and generally increases code size. Code that is sensitive to stack space usage, such as embedded systems and operating system kernels, may want to reduce the preferred alignment to -mpreferred-stack-boundary=2\.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-04-26T10:50:52.473

right, it is useful to use -mpreferred-stack-boundary with 2 to easily disassemble what's going on, otherwise it will be optimized and hard to track what's going on in the stack. for 64 bit right you need 4 at least

# java - 从列表中删除重复的 bean

> ID：10251209
> 
> 赞同：3
> 
> 时间：2012-04-20T18:01:17.807
> 
> 标签：java

我正在遍历一组 bean 并检查某些内容并添加到列表中。我只想添加一个特定项目的出现

```
List<PartsBean> beans = hotPartsDAO.getDeletedList(user);
List<FinalItemBean> finalItemList = new ArrayList<FinalItemBean>();
for (PartsBean bean : beans)
{
    if (!bean.getFinalItem().isActive())
    {
        finalItemList.add(bean.getFinalItem());
    }
} 
```

例如，在我得到的列表中

```
"test"
"test"
"test"
"hello" 
```

我只想要1个“测试”

如果我要使用一个集合，那么我将如何修改它以便我可以将该集合的组件添加到下面的这个：

这就是它目前被传递的方式`List<FinalItemBean> list`

```
protected final void buildFinalItemFilterList( Action action, PartsDAO dao, List<FinalItemBean> list )

    throws SQLException
{
    List<FinalItemBean> finalItems = dao.getAllFinalItems( false );
    FinalItemBean finalItem;

    for (FinalItemBean e: list )
    {
         finalItem = dao.getFinalItemById(e.getId());
         finalItems.add(finalItem);
    }

    Collections.sort( finalItems );
    action.setRequestAttribute("finalItems", finalItems );
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-20T18:03:21.047

我建议使用`Set`of`FinalItemBean`而不是列表。如果你有很多 bean，这甚至会提高性能，因为常见的`HashSet`实现在检查项目是否已经存在方面非常快。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-20T18:05:54.150

接口列表有一个名为 contains 的方法，如果“发生”在列表中，则返回 true，如果不在列表中，则返回 false。像：

```
if(!myList.contains(person)) myList.add(person); 
```

挺容易。您也可以使用 Set 代替，但是，我认为列表比集合更灵活，或者这就是一些开发人员所相信的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-20T18:03:47.920

使用 HashSet 而不是 List。

您可以使用如下代码创建您的列表：

```
Set s = new HashSet();
//add here
List l = new ArrayList();
l.addAll(s); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-20T18:04:44.287

使用`Set`因为集合不允许在 as 和`List`允许重复的地方重复。

# ios - iPhone / iPad 控制台？

> ID：10251212
> 
> 赞同：-1
> 
> 时间：2012-04-20T18:01:37.073
> 
> 标签：ios, console

如果我正在测试应用程序，我想看看设备中会发生什么。

例如，如果我在 safari 中打开一个链接，请查看控制台中发生的情况，或者如果我安装了 Web 应用程序，请查看我在控制台中按下的链接。

我怎样才能做到这一点？

我想看终端，或者如果有其他软件，没问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T17:27:36.520

Xcode 有一个内置控制台，可以向您展示模拟器中发生的事情。

# php - php的图像过滤器输出垃圾/不显示

> ID：10251215
> 
> 赞同：0
> 
> 时间：2012-04-20T18:01:53.320
> 
> 标签：php, drupal, gd, imagefilter

我正在开发一个主要由图像组成的网站（使用 Drupal 和 php）。在网站的主页上，图像都将应用棕褐色过滤器。

我想使用 imagefilter 在加载到主页时生成图像，但是当我在过滤器之后应用/打印图像时，它会打印垃圾字符。我试过添加

```
header(.........); 
```

到代码，但只是告诉我图像已损坏并且无法正确显示。下面是我的代码：

```
//This is the path to the image, it's referenced by what I'm given from Drupal. 
//For Drupalites: I'm loading this manually from view_get_view_result
$image = imagecreatefromjpeg($nodes[0]->images['_original']); 
//Grayscale + colorize = Sepia.
imagefilter($image, IMG_FILTER_GRAYSCALE);
imagefilter($image, IMG_FILTER_COLORIZE, 90, 90, 0);
imagejpeg($image); //I don't want to save the image, so I don't pass a file name
imagedestroy($image); 
```

现在，通过大量的工作和烦恼，我可以使用 CSS 让它工作，但这有点像 hack，如果可能的话，我想避免这样做。我还想提一下，这些图像将与其他元素一起显示在页面上。

如何让它正确显示我的图像过滤器？我用谷歌搜索了我能想到的任何东西都无济于事。上面的代码是从一个内联显示图像的站点复制而来的。

# c# - 这个逻辑运算符有什么快捷方式吗？

> ID：10251223
> 
> 赞同：1
> 
> 时间：2012-04-20T18:02:45.683
> 
> 标签：c#, php, ruby-on-rails, ruby

我只是想知道是否有捷径可以做这样的例子：

```
if ( isset($_POST['name']) && $_POST['name'] == 'George' || $_POST['name'] == 'Mike' ); 
```

[编辑]：对不起，如果这个问题起初看起来模棱两可，但我的意思是“因为我正在对同一个变量进行所有这些检查，有没有更好的方法不要写三遍？”

有没有更简单的方法是罕见的和..

1.  比嵌套更干净。
2.  比上面的语法短？
3.  在任何（Ruby、C# 或 PHP）中，因为我主要使用这 3 种语言。

这只是一个常识性问题，我只是厌倦了编写嵌套的 if 或像上面这样的长逻辑运算。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T18:06:45.693

您可以定义一个用于获取帖子数据的函数：

```
function getPOST($name) {
  return isset($_POST[$name]) ? $_POST[$name] : null;
} 
```

该函数将永远不会显示有关访问不存在的数组字段的通知，并且可以轻松地将结果与示例中的值列表进行比较：

```
if (in_array(getPOST('name'), array('George', 'Mike')) {

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T19:36:56.123

在红宝石中

```
if $_POST['name'] && ['George', 'Mike'].include?($_POST['name']) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-20T18:17:02.057

我不确定我是否正确理解了您的问题，但看起来您想将特定变量与一组值进行比较。您可以执行以下操作：

1.  将所有值放在一个数组中。
2.  检查变量是否已设置。
3.  使用`in_array`函数查找变量的值是否存在于值数组中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-20T18:22:54.127

嗯，这个问题非常笼统。你怎么能不多次使用同一个变量名呢？好吧，你的代码是什么样的，我会告诉你:)*一般来说*，这不是一个真正可能回答的问题。在您的示例中，您可以执行以下操作（在 C# 中）：

```
string x = "foo";
if ( new string[]{"bar","baz","foo","foobar"}.Contains(x)) .... 
```

或者：

```
public static class Extensions {
        public static bool In<T>(this T needle, params T[] haystack){
            return haystack.Contains(needle);
        }
    }

string x = "foo";
if (x.In("bar", "baz", "foo", "foobar")) { 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-20T18:25:48.890

Symfony 1.4 框架[`sfParameterHolder`](http://www.symfony-project.org/api/1_4/sfParameterHolder)用来处理试图确定一个元素是否存在于数组中的问题。

您可以通过复制/复制项目中的功能来稍微清理一下`sfParameterHolder`。

`switch`如果您更喜欢该语法来清除条件中的所有值，也可以使用语句。

最终结果可能如下所示：

```
$post = new sfParameterHolder($_POST);

switch( $post->get('name') )
{
  case 'george':
  case 'mike':
    // Do something.
    break;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-20T18:10:31.170

用于`isset`确保该值不存在`NULL`，然后`strlen`确保您确实在其中有一些东西。

```
if(isset($_POST['name']) && strlen($_POST['name']) > 0)
{
    //Do stuff
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-20T18:20:13.213

```
function post_data($key){
    if(isset($_POST[$key]) && $_POST[$key]!='') return $_POST[$key];
    return null;
}

$possible_names  = array('George', 'Mike');

if(in_array(post_data('name'), $possible_names)) {} 
```

# java - Hibernate 工具给出“引起：java.lang.NoSuchMethodError：javax.persistence.SequenceGenerator.catalog()Ljava/lang/String;”

> ID：10251225
> 
> 赞同：4
> 
> 时间：2012-04-20T18:03:05.177
> 
> 标签：java, hibernate, jpa

我的实体类有一个序列。

```
@Entity
@SequenceGenerator(name = "idgen", sequenceName = "PROVIDER_SEQ")
public class Provider extends BaseEntity { 
```

超类定义了 idgen。但是，当我运行 Ant 任务以转换为 SQL 时，我得到了

> 引起：java.lang.NoSuchMethodError: javax.persistence.SequenceGenerator.catalog()Ljava/lang/String

我正在使用 Hibernate3.0

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-20T18:34:35.923

您在类路径中混合了 JPA 1 和 2 库。从[文档](http://docs.oracle.com/javaee/6/api/javax/persistence/SequenceGenerator.html#catalog%28%29)中可以看到，JPA 2.0 中添加了目录属性。Hibernate 3.0 相当老了（大约 7 年）并且没有实现 JPA 2。

# flash - 为 MacOS 创建 AIR 应用程序的强制运行时，但在 Windows 上

> ID：10251226
> 
> 赞同：0
> 
> 时间：2012-04-20T18:03:14.233
> 
> 标签：flash, apache-flex, air, flash-builder

我正在 Windows 上的 Flex 中开发一个 AIR 应用程序。当我将它构建为强制运行时，它只会为 Windows 创建 .exe 可执行文件（我正在 Windows 上开发），但我还需要一个适用于 MacOS 的可执行文件。

我如何在 Windows 7 中做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T18:21:21.473

它被称为[Hackintosh](http://www.hackintosh.com/)。基本上，您需要在 Windows 平台的虚拟机中运行 Mac OSX。

我很确定这违反了 Apple 许可协议；您可能需要使用命令行工具或购买 Mac 特定的 Flash Builder 许可证。

# java - JFace SWT TableViewer 中的图像和文本

> ID：10251227
> 
> 赞同：0
> 
> 时间：2012-04-20T18:03:17.257
> 
> 标签：java, swt, jface, cells, tableviewer

我目前正在尝试实现一个动态对话框，其中包含一个 SWT 表，上面有一个 JFace TableViewer。当 Dialog 被实例化时，它会传递一个列标题的数组，然后动态创建（这已经有效），它还会传递一个包含值对的 java.util.HashMap。每对应该代表一行，例如（“1”，该行的数据集，如该行每个单元格的数据）。现在，据我从几个教程中收集到的，表格输入似乎是通过内容提供者的 getElements() 方法控制的，该方法获取其参数，即调用 setInput() 时的输入元素。如果到目前为止我是对的，当不同的单元格数据属于不同类型时，我将如何填充行的单元格，即文本 | 图片 | 图片 | 正文 | 文字|。我' 我想要么我不了解内容提供者，要么这不像我开始做之前想象的那么简单，因为我不知道如何在 getElements() 中返回一个 Object[] 来表示所描述的单元格结构以上。请赐教！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T17:45:09.463

我认为内容提供者并不真正关心表格单元格中的不同类型。然而，标签提供者确实关心。标签提供程序用于表示有关基础输入的一些用户可读“信息”。`ITableLabelProvider`有`public Image getColumnImage(final Object element, final int columnIndex)`和`public String getColumnText(Object element, int columnIndex);`。正如您所看到的实现这些方法，您将在特定单元格中拥有列号和实际对象。使用一些'instanceof'，您可以显示文本/图像......取决于您的需要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T07:32:28.207

> 我不知道如何在 getElements() 中返回一个表示上述单元结构的 Object[]

`Object[]`也是`Object`, 和`Object[][]`(或`List<Object>[]`) 是`Object[]`.

# php - 通过学说实体插入外键？

> ID：10251234
> 
> 赞同：0
> 
> 时间：2012-04-20T18:03:39.200
> 
> 标签：php, foreign-keys, doctrine-orm, entity

我正在使用 Doctrine2+CodeIgniter2，并试图创建一个连接表的简单测试。

这是我涉及的两个表的架构：

> CREATE TABLE test_lastnames (id INT AUTO_INCREMENT NOT NULL, last_name VARCHAR(255) NOT NULL, PRIMARY KEY(id)) ENGINE = InnoDB;
> 
> CREATE TABLE test_firstnames (id INT AUTO_INCREMENT NOT NULL, mylastname_id INT DEFAULT NULL, first_name VARCHAR(255) NOT NULL, INDEX IDX_23D7305696EC0FA4 (mylastname_id), PRIMARY KEY(id)) ENGINE = InnoDB;
> 
> ALTER TABLE test_firstnames 添加约束 FK_23D7305696EC0FA4 外键 (mylastname_id) 参考 test_lastnames (id)

这是我的 YAML 映射

```
ORM\Testing\Firstnames:
  type: entity
  table: test_firstnames
  fields:
    id:
      type: integer
      id: true
      generator:
        strategy: AUTO
    firstname:
      type: string
      column: first_name
  manyToOne:
    mylastname:
      targetEntity: ORM\Testing\Lastnames 
```

和

```
ORM\Testing\Lastnames:
  type: entity
  table: test_lastnames
  fields:
    id:
      type: integer
      id: true
      generator:
        strategy: AUTO
    lastname:
      type: string
      column: last_name 
```

我正在尝试将数据写入表。

```
$new_lastname = new ORM\Testing\Lastnames;
$new_lastname -> setLastName ('Shakespear');
$this->doctrine->em->persist($new_lastname);
$this->doctrine->em->flush();

$new_firstname = new ORM\Testing\Firstnames;
$new_firstname->setFirstname('William');
$new_firstname->setMyLastName($new_lastname ->getID());
$this->doctrine->em->persist($new_firstname);
$this->doctrine->em->flush(); 
```

它返回以下错误：

> 消息：传递给 ORM\Testing\Firstnames::setMylastname() 的参数 1 必须是 ORM\Testing\Lastnames 的一个实例，给定整数，在第 31 行的 /[PATH]/applicationFolder/controllers/testing/test_namejoins_insert.php 中调用，并且定义
> 
> 文件名：Testing/Firstnames.php
> 
> 行号：66

以及一堆`Message: spl_object_hash() expects parameter 1 to be object, integer given`错误。

这是 Firstnames.php 的第 66 行： `public function setMylastname(\ORM\Testing\Lastnames $mylastname = null)`

我还没有开始破解它 - '$ mylastname = null'是否存在问题？

***如何按实体插入外键值？***

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T18:51:49.367

```
$new_firstname->setMyLastName($new_lastname); 
```

而不是`$new_firstname->setMyLastName($new_lastname ->getID());`

# sql-server - SqlDependency 和地理 SQL Server

> ID：10251240
> 
> 赞同：0
> 
> 时间：2012-04-20T18:03:51.950
> 
> 标签：sql-server, geography, sqldependency

我正在尝试让该`SqlDependency`对象与地理数据一起使用，但我还没有在网上找到任何关于它的信息。

查询通知系统中可以使用哪些地理功能，我有什么方法可以获取此类查询通知？

```
SELECT Id
  FROM dbo.Items
  WHERE 
  (geography::STGeomFromText(<Insert Geo Coords here>, 4326).STIntersects(Geography) = 1
          AND (FullText like '%Pepsi%' OR FullText like '%Coke%')) 
```

我希望在添加新行时收到通知，其中`Geography`字段是位于预定义区域内的点。

我拥有的区域是：

```
'POLYGON ((-84.54674 33.647809, -84.54674 33.887618, -84.289389 33.887618, -84.289389 33.647809, -84.54674 33.647809))' 
```

那将是佐治亚州亚特兰大。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T19:01:03.513

[创建通知查询](http://msdn.microsoft.com/en-us/library/ms181122.aspx)中描述了这些限制。没有提及 CLR 系统类型 ( [`geography`](http://msdn.microsoft.com/en-us/library/bb895266.aspx), [`geometry`](http://msdn.microsoft.com/en-us/library/bb895270.aspx), [`hierachyid`](http://technet.microsoft.com/en-us/library/bb677173.aspx))。我之前已经描述[了查询通知是如何在幕后工作的](http://rusanu.com/2006/06/17/the-mysterious-notification/)，如果您阅读那篇文章，您会发现查询通知的要求与索引视图的要求完全匹配（文章解释了为什么这并非巧合）。因此，如果您可以按照自己的意愿创建索引视图，查询通知应该可以工作。让我们尝试一下，使用 MSDN 示例：

```
CREATE TABLE SpatialTable 
    ( id int IDENTITY (1,1),
    GeogCol1 geography, 
    GeogCol2 AS GeogCol1.STAsText() );
GO

INSERT INTO SpatialTable (GeogCol1)
VALUES (geography::STGeomFromText('LINESTRING(-122.360 47.656, -122.343 47.656)', 4326));

INSERT INTO SpatialTable (GeogCol1)
VALUES (geography::STGeomFromText('POLYGON((-122.358 47.653, -122.348 47.649, -122.348 47.658, -122.358 47.658, -122.358 47.653))', 4326));
GO

create view vw_test
with schemabinding 
as
select id, GeogCol1, GeogCol2
from dbo.SpatialTable
where geography::STGeomFromText('POINT(-122.35 47.656)',4326).STIntersects(GeogCol1) = 1;
go

create unique clustered index cdx_vw on vw_test (id)
go 
```

> 消息 1982，级别 16，状态 1，第 1 行
> 无法在视图“test.dbo.vw_test”上创建索引，因为该视图在 CLR 类型“Microsoft.SqlServer.Types.SqlGeography”上**引用了不确定或不精确的成员函数“STGeomFromText ”。**考虑删除对函数的引用或更改函数以使其行为具有确定性。不要将行为不确定的 CLR 函数声明为具有 IsDeterministic=true，因为这会导致索引损坏。有关详细信息，请参阅联机丛书。

你来了：查询通知（以及所有其他派生类，如 SqlDependency）不适用于`geography::STGeomFromText`函数。

# objective-c - Objective-C 中的基本字符串操作

> ID：10251243
> 
> 赞同：1
> 
> 时间：2012-04-20T18:04:00.013
> 
> 标签：objective-c

我有一个方法，现在只需要`NSLog`调用：

```
(void)methodName:(NSString*)name {
    NSLog(@"hey there, %@", name);
} 
```

它说“ `Local declaration of 'name' hides instance variable`”。这是什么意思？如何构造我想要的字符串？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T18:06:15.833

只需重命名参数：

```
-(void)methodName:(NSString*)nameParam {
   NSLog(@"hey there, %@", nameParam);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-20T18:06:53.150

这意味着您的类中已经有一个名为“name”的变量，其中包含 methodName 方法。您可能希望将其更改为如下所示：

```
- (void)methodName:(NSString*)theName {
    NSLog(@"hey there, %@", theName);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-20T18:06:29.793

您必须将其`name`用作属性或变量。在方法中使用它作为参数名称是使用它两次。

将方法参数的名称更改为其他名称。

# android - java.lang.NoClassDefFoundError: com.facebook.android.Facebook

> ID：10251245
> 
> 赞同：5
> 
> 时间：2012-04-20T18:04:00.890
> 
> 标签：android, eclipse, facebook, jar, noclassdeffounderror

运行我的应用程序时，我不断收到错误 java.lang.NoClassDefFoundError: com.facebook.android.Facebook。

调用时会发生这种情况：

脸书 = 新脸书（APP_ID）；

附加错误消息：

找不到从方法 com.example.example1.ShareOnFacebook.onCreate 引用的类“com.facebook.android.Facebook”

我已经通过 Eclipse 中的引用库添加了 facebook .jar 文件。

有没有人遇到/解决过这个问题？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-06-01T05:45:26.580

只需转到 Project / Properties / Java Build Path / Order and Export 并单击 jar 的复选框。这会将 jar 设置为“已导出”。您可以在 .classparh 文件中验证这一点：classpathentry exports="true" kind="lib" path="/my-jars/facebook-android-sdk-1.2.1.jar"

之后不要忘记清理你的项目（Project / Clean...）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-25T19:52:02.907

我听说使用最新的 ADT，您需要将库文件夹命名为“libs”而不是“lib”。但这对我不起作用。

因此，我不得不求助于**将我的 jar 文件移动到“assets”文件夹**中。这解决了我的问题。

如果你问我，完全智障。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-07T06:20:24.497

我也不断遇到这个问题，“库项目”（应该包含 com_facebook_android.jar）根本没有反映在“包资源管理器”中。但它很容易解决。
右键单击项目>属性>Android>库->删除添加的facebook库项目->应用。然后再次添加 facebook 库项目并单击应用。这次“库项目”将出现在右侧的包资源管理器中。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-15T17:29:36.627

您最近是否更新了 ADT 或 Android SDK？尝试删除对 facebook 库或 facebook jar 的引用并重新添加它。

他们在最新的 ADT 更新中改变了处理外部库引用的方式，这让我的很多项目都失败了。 **删除引用并重新添加它们似乎可以解决问题**。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-07-10T03:03:27.693

一个对我有用的解决方案：我项目中的 android-support-v4.jar 文件与 facebook 项目中的版本不同。所以我将 facebook 的支持库复制到我的项目库文件夹中，它就像一个魅力。

# c# - 单声道上的 sqlite：调用 SELECT 会导致 ResetIndexes 和索引重建

> ID：10251252
> 
> 赞同：1
> 
> 时间：2012-04-20T18:04:36.240
> 
> 标签：c#, linux, sqlite, mono

我正在开发一个使用 sqlite 来维护数据库的 .net 应用程序。在 Windows 上，我使用 System.Data.Sqlite 库，一切正常。在 Linux 上，我使用 Mono.Data.Sqlite。当我启动我的应用程序并调用“SELECT * FROM TagInfo”时，发生了一件奇怪的事情。sqlite 在没有任何明显原因的情况下开始重建索引。完成重建后，应用程序运行正常。可以想象，问题在于索引重建非常缓慢，可能需要长达 20 分钟。此外，当我重新启动应用程序时，会再次调用重建。我在重建期间附加在堆栈跟踪下方。

有谁知道是什么原因造成的，我该如何预防。

非常感谢您提供的任何信息。格雷戈尔

堆栈跟踪：

```
System.Data.Common.Index.MergeSort (to={int[4096]}, length=2821) in /root/mono/mono-2.10.8/mcs/class/System.Data/System.Data.Common/Index.cs:518
System.Data.Common.Index.Sort () in /root/mono/mono-2.10.8/mcs/class/System.Data/System.Data.Common/Index.cs:186
System.Data.Common.Index.RebuildIndex () in /root/mono/mono-2.10.8/mcs/class/System.Data/System.Data.Common/Index.cs:179
System.Data.Common.Index.Reset () in /root/mono/mono-2.10.8/mcs/class/System.Data/System.Data.Common/Index.cs:160
System.Data.DataTable.ResetIndexes () in /root/mono/mono-2.10.8/mcs/class/System.Data/System.Data/DataTable.cs:1485
System.Data.DataTable.set_EnforceConstraints (value=true) in /root/mono/mono-2.10.8/mcs/class/System.Data/System.Data/DataTable.cs:623
System.Data.DataTable.EndLoadData () in /root/mono/mono-2.10.8/mcs/class/System.Data/System.Data/DataTable.cs:968
System.Data.Common.DbDataAdapter.FillFromReader (table={}, reader={Mono.Data.Sqlite.SqliteDataReader}, start=0, length=0, mapping={int[4]}, loadOption=System.Data.LoadOption.PreserveChanges) in /root/mono/mono-2.10.8/mcs/class/System.Data/System.Data.Common/DbDataAdapter.cs:368
System.Data.DataTable.Load (reader={Mono.Data.Sqlite.SqliteDataReader}, loadOption=System.Data.LoadOption.PreserveChanges) in /root/mono/mono-2.10.8/mcs/class/System.Data/System.Data/DataTable.cs:2857
System.Data.DataTable.Load (reader={Mono.Data.Sqlite.SqliteDataReader}) in /root/mono/mono-2.10.8/mcs/class/System.Data/System.Data/DataTable.cs:2838
GenFiles.SQLiteDatabase.GetDataTable (sql="SELECT * FROM TagInfo") in 
```

# unix - 获取与模式匹配的文件数量的快速方法

> ID：10251257
> 
> 赞同：4
> 
> 时间：2012-04-20T18:05:13.777
> 
> 标签：unix, filesystems, ls

我现在有一个包含 8K 文件的目录。在接下来的一个月左右，这个数字将增长到 100K 以上。我需要能够计算目录中匹配特定模式的文件。模式匹配会增加大量时间：

```
[XXXXXX@login-0-0 scripts]$ time ls | grep . -c
8373

real    0m0.115s
user    0m0.109s
sys 0m0.009s
[XXXXXX@login-0-0 scripts]$ time ls *.o* | grep . -c
6262

real    0m1.997s
user    0m0.121s
sys 0m0.270s 
```

随着文件数量的不断增加，按模式计数的时间将变得太大。我可以解决这个问题吗？

附带说明一下，文件系统是 Lustre，我可以处理非便携式解决方案。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-20T18:12:47.793

也许让你慢下来的是你的 glob 实际上是由 bash 扩展的，并且参数被传递给 ls，所以这是一些额外的工作。这对我有用：

```
user@host:~/junk$ time find . | wc -l
188318

real    0m0.202s
user    0m0.076s
sys 0m0.136s

user@host:~/junk$ time find . -name '*.o' | wc -l
374

real    0m0.243s
user    0m0.160s
sys 0m0.080s 
```

速度差别不大。请注意，这是递归的，但如果您不想这样做，您可以设置 maxdepth。

也许是时候让我清理一些垃圾了...

# javascript - 从 URL 中获取选项值以显示下拉列表中的特定菜单项

> ID：10251259
> 
> 赞同：0
> 
> 时间：2012-04-20T18:05:24.803
> 
> 标签：javascript, jquery, url, select

我有这个很棒的 jQuery 表格排序器，但我错过了一个关键部分。详细信息：该表由数百个按主题分类的报告链接组成。他们的主题可以通过一个简单的选择下拉菜单来划分。

我正在寻找的是从 URL 获取选项值以从下拉列表中显示特定菜单项的能力。这样我就可以拥有一个只显示行中一个主题的 URL（例如：500 个报告中的 30 个）。

我知道 php 会很容易，但这不是一个选择，我认为使用 document.location.search 可以让我到达那里。

当然，我是一个 javascript 菜鸟，所以有人知道如何以代码方式实现这个吗？

谢谢各位，非常感谢！

```
 <script type="text/javascript">
$(function() {
            $("#example-4").addClass("beautifulData").beautify(
                    {
                        pageSize : 25,
                        pagerSize : 5                           
                    }); 

    $("#txt_topics").keyup(function() {
        $("#example-4").beautify("rebuild", { filter :
                    { 6 :$("#txt_topics").val() } });
    });     

    $("#select1").change(function() {
             $("#example-4").beautify("rebuild", { filter : 
                    { 6 :$("#select1").val() } });
    }); 
```

```
 <select id="select1"> 
 <option value="">Choose a Topic</option>

 <option value="topic_A">Topic A</option> 
 <option value="topic_B">Topic B</option>
 <option value="topic_c">Topic C</option> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T18:14:25.470

window.location 对象包含 URL 信息。您可以使用它来提取您感兴趣的查询参数。Chrome 有一个 window.location.search 属性，其中包含“？” 以及之后的一切。应该带你去你想去的地方。网址“http://www.myawesomesight.com/tabledata?option=topicA”的示例：

```
var queryString = window.location.search.substr(1); //substr dumps the leading '?'
var queryParams = queryString.split('&');
for (var i in queryParams) {
  var tokens = queryParams[i].split('=');
  var key = tokens[0];
  var value = tokens[1];

  // insert logic here to handle when you find the key that you want
} 
```

可能有更好的方法，但这是我在当前项目中使用的方法。

# php - 在 Windows 7 上从源代码编译 PHP，致命错误 C1900

> ID：10251261
> 
> 赞同：1
> 
> 时间：2012-04-20T17:31:21.157
> 
> 标签：php, c, windows, visual-studio-2010

我正在尝试使用 windows sdk 6.1 从 Windows 7 上的源代码编译 PHP。运行 nmake 时收到以下错误：

```
fatal error C1900: Il mismatch between 'P1' version '20080116' and 'P2' version '20070207'
LINK : fatal error LNK1257: code generation failed
NMAKE : fatal error U1077: '"C:\Program Files (x86)\Microsoft Visual Studio 9.0\
VC\Bin\cl.exe"' : return code '0x2' 
Stop. 
```

我已经在 Visual Studio 2010 上运行修复无济于事。我怎样才能解决这个问题？

编辑：我正在编译 C 源代码而不是实际的 PHP 代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T17:57:25.310

你真的需要从源 PHP 构建吗？

我的意思是，不需要从源代码构建 php，您可以使用 XAMPP 或 WAMP 等包。出于实际原因，我将 XAMPP 用于 PHP 项目，因为 XAMPP 在 Windows 和 Linux 上都运行，所以我唯一需要做的就是一个简单的文件夹安装，然后是一个简单的 LigHTTPD/Apache 配置，仅此而已。

但是如果你真的想在 Windows 上编译 PHP，你需要安装 Visual C++ 2008 的可分发版本，我不知道为什么 2010 版本不起作用，不仅适用于 PHP，而且适用于许多其他 python 库和许多其他库事物。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T17:36:21.357

Visual Studio 2010 本身不支持 PHP 代码。你用的是[法兰格](http://phalanger.codeplex.com/)吗？

# flash - 使用 FFMPEG 将视频转换为 flv 并丢失持续时间

> ID：10251266
> 
> 赞同：0
> 
> 时间：2012-04-20T18:06:09.230
> 
> 标签：flash, video, ffmpeg, flv, jwplayer

我使用**FFMPEG**为扩展 FLV 转换一些视频，然后通过应用程序将此视频发送到网页，并通过**JW Player**显示。我的问题发生在网站上，因为播放器没有显示视频的总时间，因此我无法前进或后退我的视频。对于转换，请使用以下代码：

```
-i "{ArquivoOrigem}" -vcodec flv -f flv -r 29.97 -s 320x240 -aspect 16:9 -b 200k -ac 1 -ar 22050 -ab 56k d "{ArquivoDestino}" 
```

那么，有什么办法可以做到吗？tks

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T00:51:57.080

为了显示 flash flv 信息并通过 jw 播放器或任何其他播放器在网络上正确流式传输，flash flv 视频需要元信息。

FFMPEG 编码后默认无法向 flv 视频添加元信息。您需要使用额外的开源实用程序，例如[http://rubyforge.org/projects/flvtool2/](http://rubyforge.org/projects/flvtool2/)在编码完成后添加元信息。

# c# - C# WPF 插件架构

> ID：10251270
> 
> 赞同：2
> 
> 时间：2012-04-20T18:06:36.550
> 
> 标签：c#, wpf, plugins, architecture

实现每个插件处理自己的窗口的 WPF 插件系统的最佳方法是什么？

我了解插件架构的基础知识，并且有一个加载外部 dll（插件）的引擎，并且每个插件都实现了我的插件接口。每个插件都处理自己的逻辑，但我不完全确定如何让每个插件都有自己的窗口。任何想法或评论都会有所帮助！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-20T18:13:08.890

[MEF](http://mef.codeplex.com/)可以成为您所描述内容的好工具。

看看[这个](https://stackoverflow.com/questions/9377860/how-can-i-leverage-mef-in-my-mvvm-application)和[这个](http://www.codeproject.com/Articles/43625/Building-an-Extensible-Application-with-MEF-WPF-an)。

# jquery - 什么可能导致 jQuery 本身内部出现这种随机出现的错误？

> ID：10251272
> 
> 赞同：5
> 
> 时间：2012-04-20T18:06:45.227
> 
> 标签：jquery, javascript

我正在为此而努力。每 5 到 10 次我重新加载我的应用程序，我就会收到一个源自 jQuery 内部的奇怪错误。我尝试在 jQuery 的非压缩版本中添加断点以尝试从错误中退出，但 Chrome 永远不会停止它们，而是*总是*跳到错误。

我使用的是 jQuery 1.7.2，但是这个错误也出现在 1.7 和 1.6.1 版本中。

在我的 javascript 应用程序中，我将这行代码称为：

```
this.element.find('.banner-btn') 
```

`this.element`jQuery 对象在哪里。没有理由这会导致问题，并且 10 次中有 9 次没有问题。但是随机发生了一些事情，然后每次调用该行代码时，结果都是这个堆栈跟踪的一些变体：

```
Uncaught TypeError: Cannot call method 'apply' of undefined
makeArrayjquery-1.7.2.js:4858
Sizzlejquery-1.7.2.js:5110
jQuery.fn.extend.findjquery-1.7.2.js:5432 
```

事实上，在我调用 $.fn.find 之后，*任何时候我都会收到此错误。*我已经尝试了各种各样的东西，我一直在阅读 jQuery 源代码，但我对此一无所知。任何人都知道在哪里解决这个问题？

## 更新：进一步深入兔子洞

我已经将它进一步追踪到 jQuery 库中，并找到了第一次弹出错误的位置。有点儿。

为了跟踪 DOM 遍历，jQuery 使用[pushStack](http://www.learningjquery.com/2011/12/using-jquerys-pushstack-for-reusable-dom-traversing-methods)方法。这在 jQuery.fn.find 方法中被调用，并且*应该*返回一个 jQuery 对象。它通常是这样的——但是当 jQuery 内部有东西时，这个函数只返回一个常规对象，没有 jQuery 好东西。这会导致错误。

好的，这是 pushStack 的第一个小源代码，定义在 jquery-1.7.2.js 的第 241 行：

```
// Take an array of elements and push it onto the stack
// (returning the new matched element set)
pushStack: function( elems, name, selector ) {
if(window._debug_jQuery_pushStack) { debugger }
    // Build a new jQuery matched element set
    var ret = this.constructor();

// ---- the function continues, but this is enough for us ---- 
```

`var ret = this.constructor();`应该添加 jQuery 好东西的地方。在这种情况下，他们不是。不知何故`this`已损坏为常规对象，而不是 jQuery。所以现在我的问题是：我如何找到这种腐败的原因？一个困难是这只会在我的应用程序加载的 10 或 20 次中发生一次，并且似乎是完全随机的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-23T16:00:45.050

问题不在于您的代码，而在于 Chrome 本身——请参阅[bug #125148](http://code.google.com/p/chromium/issues/detail?id=125148)。当前的解决方法是按如下方式更改 pushStack：

```
pushStack: function( elems, name, selector ) {
    // Build a new jQuery matched element set
    var ret = this.constructor();

    // temporary workaround for chrome issue #125148
    // http://code.google.com/p/chromium/issues/detail?id=125148
    if (!(ret instanceof jQuery.fn.init)) {
        console.log("applying pushStack fix");
        ret = new jQuery.fn.init();
    }

    // ... snip ... 
```

另外，请参阅[此相关](https://stackoverflow.com/questions/10314992/chrome-sometimes-calls-incorrect-constructor)问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-20T19:28:34.130

我不认为它是 jquery，而是您的代码中的某些内容，并且 jquery 正在响应它。我心目中的罪魁祸首是“未定义”。应用程序内部的 jquery（可能是一个旨在成为数组的 var）正在操纵某些东西，导致这种情况发生。我最近在使用backbone.js 和使用jquery 进行DOM 操作时看到了这一点。事实证明，有时，我的应用程序代码没有正确设置 var 并且 jquery 在发生这种情况时抛出了错误。

因此，我的建议是，如果您至少知道序列中发生错误的一般区域，请查看您的应用程序代码，看看是否所有内容都符合 kosher 规定；你所有的变量都被分配了。可能存在未分配 var 的边缘情况，并且在该区域周围放置条件以防万一，这很简单。

# tfs - 获取 TFS buildNumber

> ID：10251278
> 
> 赞同：0
> 
> 时间：2012-04-20T18:07:28.427
> 
> 标签：tfs, build

我需要在页面上显示内部版本号。此页面的不同版本应显示其相应的内部版本号。我怎样才能做到这一点？

我的想法是我在某个地方配置构建并且构建可以将版本号存储在源代码中，我的程序将读取它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T18:24:56.030

您可以使用内部版本号启用程序集版本控制，这将更新 AssemblyInfo.cs 文件。您的程序可以从此文件中读取内部版本号。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T20:34:52.900

要获取构建版本，只需使用以下属性

```
$(BUILD_NUMBER) 
```

也许您想将它用作程序集版本的一部分：

[http://msbuildtasks.tigris.org/](http://msbuildtasks.tigris.org/)

```
<UsingTask AssemblyFile="$(MSBuildCommunityTasksLib)" TaskName="MSBuild.Community.Tasks.AssemblyInfo" />

<MSBuild.Community.tasks.AssemblyInfo OutputFile="$(AssemblyVersionFilePath)"
      CodeLanguage="C#"
      AssemblyFileVersion="$(FileVersion)"
      AssemblyInformationalVersion="$(InformationalVersion)"
      AssemblyVersion="$(SemanticVersion)" /> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-23T22:54:10.477

作为自定义构建过程以进行程序集版本控制的一部分，我通常会创建一个 version.txt 文件，我可以将其与站点一起部署。在 global.asax 中，我在应用程序启动时阅读了该版本，然后在我希望显示的每个页面的页脚中简单地使用该值。或者，我可以从我知道我正在与站点一起部署的程序集之一中读取版本信息，然后改用它。无论哪种方式都有效。

如果您在自动版本控制构建方面需要帮助，您可以查看[我的博客文章](http://www.richard-banks.org/2010/07/how-to-versioning-builds-with-tfs-2010.html)

# cakephp - Cake PHP - Meioupload - 透明PNG图片

> ID：10251280
> 
> 赞同：1
> 
> 时间：2012-04-20T18:07:42.740
> 
> 标签：cakephp, transparency, meio-upload

如何在 CakePHP 中使用 Meioupload 上传透明的 PNG（并保持这种透明度）？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T02:41:08.423

我有同样的问题。这就是为我解决的问题：

在 MeioUploadBehaviour.php 的第 962 行附近，有 2 行：

```
$imageArray = explode(".", $source);
$phpThumb->config_output_format = $imageArray[1]; 
```

将第二行更改为：

```
$phpThumb->config_output_format = end($imageArray); 
```

解释：原始行是尝试将 $phpThumb->config_output_format 设置为上传图像的文件扩展名。只要只有一个“。”，它就可以工作。在您上传的图片的文件路径中。例如，如果您的路径是 /mywebsite/images/myImage.png，那么它会得到“png”。

但是，如果有一个“。” 在您的 $source 中较早，例如。/mywebsite.com/images/myImage.png 那么你得到的是中间部分，从第一个'。'开始 到第二个'.'

所以你会得到类似的东西：'com/images/myImage'

当然，'com/images/myImage' 不是 phpThumb 的有效 config_output_format！

通过将 $imageArray[1] 更改为 end($imageArray)，您总是会得到图像数组的最后一个元素，它应该始终是文件扩展名。

确实，这种增强应该在 MeioUpload 中永久进行。编辑：我已经分叉了 MeioUpload 并进行了修复。我已经向 jrbasso 发送了一个拉取请求，但到目前为止还没有被接受。你可以在这里查看我的 fork：[https ://github.com/joshuapaling/MeioUpload](https://github.com/joshuapaling/MeioUpload)

# java - WCF Metro 互操作消息未加密

> ID：10251282
> 
> 赞同：1
> 
> 时间：2012-04-20T18:07:45.957
> 
> 标签：java, wcf, interop, wcf-security, java-metro-framework

我一直在尝试为 WCF 服务创建一个基于 Metro 的客户端，同时使用传输和消息安全性以及相互证书身份验证。

我让每种模式单独工作，而不是一起工作 - 即只有消息安全工作，正文被加密并通过 HTTP 发送，或者只有 SSL 工作，消息没有加密。激活它们会使客户端通过 SSL 发送未加密的消息。

这是我当前的绑定：

```
 <customBinding>
    <binding name="customBind">
      <transactionFlow />
      <security authenticationMode="MutualCertificate" allowSerializedSigningTokenOnReply="true" defaultAlgorithmSuite="Basic128" includeTimestamp="true" securityHeaderLayout="Lax">
      </security>
      <textMessageEncoding messageVersion="Soap11" />
      <httpsTransport requireClientCertificate="false"/>
      <!--<httpTransport />-->
    </binding>
  </customBinding> 
```

使用 httpTransport，消息被加密，使用 httpsTransport，它们不是。服务器响应“验证消息的安全性时发生错误。”，因为消息未加密。Metro 客户端失败并显示“com.sun.xml.wss.XWSSecurityException：未满足安全要求 - 消息中没有安全标头”。

有没有人遇到过这个？关于为什么会发生这种情况的任何线索，或者我可以探索的可能的事情？附加信息：使用 Netbeans 7.1.1 和 Metro 2.2。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T00:01:48.697

我设法通过从 wsdl 中删除 TransportBinding 元素并让 Java 处理传输安全而不是 Metro 来解决这个问题。

# css - 如何以 x by y 的方式显示列表？

> ID：10251285
> 
> 赞同：2
> 
> 时间：2012-04-20T18:08:01.980
> 
> 标签：css

我想做的类似于这里所做的 [http://www.starbucks.com/static/reference/styleguide/layout_promo_c.aspx](http://www.starbucks.com/static/reference/styleguide/layout_promo_c.aspx)

我仔细研究了 CSS 和 html，试图弄清楚它们如何以 2 x 2 的形式显示列表。

我发现他们使用有序列表来组织它，然后使用 dl 元素构造每个块的内容。我设法创建了 4 个单独的块，但我无法将它们放在 2 x 2 结构中。尽管将显示属性设置为列表，但我似乎也无法使列表内联。

编辑：将倒倒改为多孔

这是我的 css [http://pastebin.com/zLSNu29b](http://pastebin.com/zLSNu29b)的相关部分 您不妨忽略它：/

有人能帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T18:14:04.940

听起来并不难......我要做的是让 div 内的四个块受宽度限制，并为这四个块中的每一个块提供百分比宽度，每个块都向左浮动。

请记住，如果您为一个块分配 50% 的宽度，则其右侧的块必须具有大约 48% 的宽度，因为您必须包括边距和填充，这就是为什么有时当您有一个 div 1000px，你为一个孩子分配 500px，为另一个孩子分配 500px，第二个低于第一个。

你明白吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T18:14:12.260

列表项向左浮动，以便它们并排排列，直到它们跨越容器宽度，然后下一个 2 下降到前 2 个下方，依此类推。

他们能够使用 50% 的宽度，同时仍然通过应用于`box-sizing: border-box;`列表项来指定一些水平填充，这会改变宽度的计算方式，以在宽度定义中包括边框和填充。这是一个 css3 属性，因此不适用于旧版浏览器。

# ruby - Ruby 编程：谓词方法

> ID：10251289
> 
> 赞同：1
> 
> 时间：2012-04-20T18:08:33.133
> 
> 标签：ruby

我是 Ruby 新手，遇到了`defined?`操作员。我认为`?`暗示该方法返回`true`/`false`但`defined?`如果已定义则返回标识符的描述。

我知道有一个`true`/`false`组件，其中标识符已定义或未定义，但我认为这`?`意味着返回值始终必须是`true`/false`。帮助？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-20T18:14:07.907

它返回一个“truthy”值，即“truthy-true”或“truthy-false”。

在 Ruby 中，*只有*两件事是真假：

*   `false`（单例对象）
*   `nil`（单例对象）

*其他任何事情*都被认为是真实的。大量的 Ruby 代码利用这一事实进行谓词。因此，对谓词的检查应该是：

```
if list.empty? 
```

不是：

```
if list.empty? == true 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-20T18:20:48.957

```
defined? a    #=> nil
a = 7         # => 7 
defined? a    #=> "local-variable" 
```

虽然它不会传回实际的“真”或“假”值，但它仍然以相同的方式运行。

```
if defined? a  
  puts "This will still act as true"
end
  #=> This will still act as true 
```

The reason for this is because in ruby EVERYTHING is true with the exception of `false` and `nil`.

This [link](http://www.ruby-doc.org/docs/ProgrammingRuby/tut_expressions.html#definedandorandnot) has a lot more information on the `defined?` operator.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T18:13:04.707

这只是一个约定，而不是语言的一部分，因此没有围绕问号的实际规则。来自[http://www.ruby-lang.org/en/documentation/ruby-from-other-languages/](http://www.ruby-lang.org/en/documentation/ruby-from-other-languages/)

“按照惯例，回答问题的方法（即 Array#empty? 如果接收方为空则返回 true）以问号结尾。”

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-20T18:20:24.663

"non-nil"/nil 与 Ruby 中的 true/false 相同。如果你来自其他语言，你可能有这种使用 true/false 进行测试的习惯，但是在 Ruby 中，我们会测试一个对象是否为 nil。

所以这两个是一样的：

```
a = 'hello'
if defined?(a) then puts a end

a = 'hello'
if defined?(a) != nil then puts a end 
```

如果您坚持要返回 true/false，则可以使用第二个。这将返回真/假：

```
a != nil 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-20T18:23:40.050

The `defined?` operator returns `nil` if its argument (which can be an arbitrary expression) is not defined, otherwise it returns a description of that argument.

And since `nil` evaluates to false and (except for false) all other expressions evaluate to true, the behaviour of `defined?` is as one expects.

# c# - .NET C# 数组实例化/传递理论

> ID：10251291
> 
> 赞同：2
> 
> 时间：2012-04-20T18:08:51.547
> 
> 标签：c#, .net, arrays, theory

我有一个特殊的对象，它包含一个对象列表和列表的一堆附带属性。

我有一个函数可以将项目注入我的特殊对象的列表部分。该函数取决于列表附带的属性，因此我选择创建一个包含属性和列表的新对象。

问题 1：在函数开始注入项目之前，谁负责确保 List 不为空？

1.  调用者是否应该创建一个新列表并将其传递给函数？

2.  不管传入的对象的状态如何，被调用者是否应该创建一个新列表并将其分配给对象？

3.  函数是否应该设计为接收对象并返回一个新列表而不修改对象，让调用者将返回的列表分配给它的特殊对象？

或者......还有其他我没有考虑过的选择吗？

相关问题 2：鉴于我的设计需要 List 附带的属性，我应该选择创建一个同时包含属性和 List 的新类，还是应该创建一个包含其他属性的 List 子类？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T18:22:31.867

简而言之，从概念上讲，包含列表的对象负责拥有存储数据的有效方法，这意味着它应该负责在需要时实例化其列表。

如果对象被设计为表示对象的集合，那么它负责维护它在内部实际使用来存储它们的任何内容，除非目标的一部分是让新对象成为多种类型集合的“包装器”，允许基于内部使用的集合类型进行行为定制。

考虑一个列表。它在内部使用一个数组来存储数据，并根据需要处理所述数组的大小调整以存储新对象。您不必了解列表；从概念上讲，它是一个有序的索引集合，允许插入和删除元素。它可以用链表、红黑树或其他任何东西来实现；这些会对性能和复杂性产生影响。

回到正题。您的对象应该是具有附加属性的列表，应该隐藏其内部数据结构。用户不需要知道那里有一个 List 来保存元素。这意味着您的对象应该知道如何实例化它自己的内部数据结构，并公开调用者用来注入新元素的方法，这些新元素作用于内部列表。

一个例外是“包装器”，它添加了可以应用于任何其他类子集的新功能，并且允许用户指定新的类应该在特定用途中“包装”哪个类是很重要的。一个例子是 BlockingCollection。它增加了阻止正在对集合执行某些并发操作的线程的能力，直到它有效且安全地执行所述操作（例如，如果集合为空，则尝试从 BlockingCollection 获取项目的线程将被阻止，直到另一个线程添加一些东西）。创建时，可以指定 BlockingCollection 使用 IProducerConsumerCollection 接口的特定实现；很可能是同一命名空间中的内置“并发”集合之一，例如 ConcurrentBag、ConcurrentQueue 或 ConcurrentDictionary。即使在这种情况下，也有一个“默认”选项；您可以在不指定要使用的内部 Concurrent 结构的情况下实例化 BlockingCollection 对象，并且该对象将默认为 ConcurrentQueue。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-20T18:13:58.683

假设您的列表是您的类实例的字段/成员，我建议`new`在类的构造函数中设置列表。

```
public class SpecialObject
{
    List<something> myList;
    public SpecialObject()
    {
        myList = new List<something>();
    }
} 
```

或者在没有构造函数的情况下完成同样的事情：

```
public class SpecialObject
{
    List<something> myList = new List<something>();
} 
```

# jquery - 将div附加到jquery中的div

> ID：10251295
> 
> 赞同：0
> 
> 时间：2012-04-20T18:09:15.333
> 
> 标签：jquery

```
$(function() {
    $(".commentbox .btnReply").click(function() {
        $(this).hide();
        var id = $(this).attr("id").split("-")[1]
        var strDiv = "<input type='text' class='txtCmnt' id='txtReply-" + id + "' /> <input type='button' class='btnSave' value='Save' id='btnSave-" + id + "' /> ";
        $("#container-" + id).html(strDiv);
    });
    var i = 1;
    $(".commentbox").on("click", ".btnSave", function() {
        var itemId = $(this).attr("id").split("-")[1]
        var txt = $(this).parent().find(".txtCmnt").val();
        var divid = itemId + "-" + i;

 i++;
            alert("i" + i);
        alert("replypostid" + divid);

        $.post("Handler/Topic.ashx", {
            reply: txt,
            id: itemId
        }, function(data) {
            alert(data);
            var str = "<div id='replytopost" + divid + "'></div>";
            $("#replytopost" + divid).append(data);

            $("#container-" + itemId).append(str);

        })

    });
}); 
```

我想将从 post 函数返回的数据附加到动态创建的 div 中，该 div 附加到另一个 div 中。

jsfiddle 链接是 [http://jsfiddle.net/UGMkq/49/](http://jsfiddle.net/UGMkq/49/)

alert(data) 正在打印正确的输出，但没有附加数据的 div。

**已编辑**

如果我点击第一个保存按钮，它会给出replypostid1-1，然后当我点击第二个按钮时，警报会给出**replypostid2-2** ，而不是我想要**replypostid2-1**

[http://jsfiddle.net/UGMkq/50/](http://jsfiddle.net/UGMkq/50/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T18:15:46.380

您正在创建一个字符串，然后尝试将其附加到它，就好像它存在于 DOM 中一样。相反，试试这个：

```
$("#container-" + itemId).append(
   $('<div/>')
      .attr('id', '#replytopost'+divid)
      .append( data )
); 
```

**编辑**

我不认为依靠在 Javascript 中保留一个计数器来处理回复计数是一个好的解决方案。如果页面被刷新，该计数器将丢失/重置。

如果此应用程序是数据库驱动的，您应该能够从数据库中获取当前回复的计数并具有更好的数据一致性——通过 ajax 调用传回——可能作为 json 对象。这将允许您避免在 JS 中保持和增加该计数器。

```
$.post("Handler/Topic.ashx", { reply: txt, id: itemId }, function(data) {
   //Assuming a json object like { "id": 1, "text": "What ever data equals now" }
   var reply = JSON.parse( data );
   $("#container-" + itemId).append(
      $('<div/>')
         .attr('id', '#replytopost'+itemId+'_'+reply.id)
         .append( reply.text )
   );
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T18:16:11.520

您正在对尚不存在的元素调用 .append(data) ；它只是一个字符串中的东西。

我认为这也不是创建新元素的好方法。您应该使用`document.createElement()`and`element.appendChild()`或一些 jquery 技术。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T18:18:00.617

**更新**：试试这个代码：

```
 $(".btnReply").on("click", function() {
    thisvar = $(this).parent()
input = $("<input>")
input.appendTo(thisvar)
$("<br>").appendTo(thisvar)
$("<input>")
.attr("type", "submit")
.appendTo(thisvar)
        .on("click", function() {
        //Handle POST stuff here
        val = input.val()
        $("<div>").addClass("txtCmnt").text(val).appendTo(thisvar)
        })
})​ 
```

问题是

```
var str = "<div id='replytopost"+ divid + "'></div>";
       $("#replytopost" + divid).append(data); 
```

创建此 div 元素时，它不会自动附加到 DOM。因此，当您尝试获取 div 时：

```
$("#replytopost" + divid) 
```

它会失败。这是您的操作方法：

```
// Create a div
    var str = $("<div>").attr("id", "replytopost"+divid)
//Access it
    str.append(data)
//Append it to anything
str.appendTo("body") 
```

您有不止一个此类错误。如果您全部修复它们，它应该可以工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-20T18:22:24.030

您在彼此之前切换以下内容。您不能附加到不存在的元素上。

```
var str = "<div id='replytopost"+ divid + "'></div>";
$("#container-" + itemId).append(str); // this has to be added first
$("#replytopost" + divid).append(data); 
```

# android - 当设备上已安装 fb 时，Android Facebook SSO 不起作用

> ID：10251296
> 
> 赞同：0
> 
> 时间：2012-04-20T18:09:18.860
> 
> 标签：android, facebook, hash, single-sign-on

我想在 android 应用程序中使用 Facebook 实现单点登录。我有以下问题：

当设备上未安装 facebook 应用程序时，我可以接收访问令牌和我需要的所有数据。但是当我安装 facebook 应用程序时，似乎没有任何效果。当我启动实现 SSO 的活动时，它只加载一段时间，然后暂停而不返回任何内容。

我有一个签名的 apk，我认为我在 fb 开发人员页面中有正确的哈希键。

有谁知道为什么会出现这个问题？我需要在 facebook android sdk 中更改什么吗？

非常感谢您！

编辑：我尝试了 YShinkarev 在这里所说的 -> [Android - facebook sdk 登录窗口消失](https://stackoverflow.com/questions/8764777/android-facebook-sdk-login-window-disappear)（评论 facebook.java 代码中的一些行并禁用 SSO）。现在我提供凭据并接收访问令牌。但是如果我从fb应用程序登录，不应该是我自动收到的吗？我不明白为什么这不起作用..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-20T21:55:15.450

[android SSO 存在问题，正如您在平台状态页面](http://developers.facebook.com/live_status)中看到的那样，它已被 facebook 确认。

如果设备上存在 facebook 应用程序，则使用 SSO，并且在 facebook 解决问题之前它将无法工作。这里还有一些关于这个问题的其他线程，例如：[从我的应用程序登录到 facebook 可以在模拟器上运行，但不能在设备上运行](https://stackoverflow.com/questions/10249889/logging-in-to-facebook-from-my-app-works-on-emulator-but-not-on-device)

# java - 由于单元测试中捕获的异常，Gradle 在三叶草分析期间构建失败

> ID：10251301
> 
> 赞同：2
> 
> 时间：2012-04-20T18:09:37.537
> 
> 标签：java, testng, gradle, clover

我正在使用 Gradle 为 TestNG 单元测试运行 Clover 测试覆盖率分析。我发现如果我正在测试的方法捕获/处理异常，则 gradle 构建将由于测试失败而失败——即使测试没有失败。我直接从 Eclipse 运行 TestNG 测试，它报告一切都通过了，但是当我从 Gradle 运行它时它失败了：

```
13:46:03.741 [DEBUG] [org.gradle.api.tasks.testing.Test] Finished tests
13:46:03.741 [ERROR] [org.gradle.api.internal.tasks.testing.results.TestLogger] 13 tests completed, 1 failure
13:46:03.742 [DEBUG] [org.gradle.api.internal.tasks.execution.ExecuteAtMostOnceTaskExecuter] Finished executing task ':artim-decision:test'
13:46:03.750 [ERROR] [org.gradle.BuildExceptionReporter]
13:46:03.751 [ERROR] [org.gradle.BuildExceptionReporter] FAILURE: Build failed with an exception.
13:46:03.751 [ERROR] [org.gradle.BuildExceptionReporter]
13:46:03.752 [ERROR] [org.gradle.BuildExceptionReporter] * What went wrong:
13:46:03.752 [ERROR] [org.gradle.BuildExceptionReporter] Execution failed for task ':aaaaa-decision:test'.
13:46:03.754 [ERROR] [org.gradle.BuildExceptionReporter] > There were failing tests. See the report at C:\Dev\AAAAA\trunk\aaaaa-decision\build\reports\tests.
13:46:03.754 [ERROR] [org.gradle.BuildExceptionReporter]
13:46:03.755 [ERROR] [org.gradle.BuildExceptionReporter] * Exception is:
13:46:03.755 [ERROR] [org.gradle.BuildExceptionReporter] org.gradle.api.tasks.TaskExecutionException: Execution failed for task ':artim-decision:test'.
13:46:03.755 [ERROR] [org.gradle.BuildExceptionReporter]        at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.executeActions(ExecuteActionsTaskExecuter.java:68)
13:46:03.756 [ERROR] [org.gradle.BuildExceptionReporter]        at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.execute(ExecuteActionsTaskExecuter.java:46)
13:46:03.756 [ERROR] [org.gradle.BuildExceptionReporter]        at org.gradle.api.internal.tasks.execution.PostExecutionAnalysisTaskExecuter.execute(PostExecutionAnalysisTaskExecuter.java:34)
13:46:03.756 [ERROR] [org.gradle.BuildExceptionReporter]        at org.gradle.api.internal.changedetection.CacheLockHandlingTaskExecuter$1.run(CacheLockHandlingTaskExecuter.java:34)
13:46:03.756 [ERROR] [org.gradle.BuildExceptionReporter]        at org.gradle.cache.internal.DefaultCacheAccess$2.create(DefaultCacheAccess.java:200)
13:46:03.756 [ERROR] [org.gradle.BuildExceptionReporter]        at org.gradle.cache.internal.DefaultCacheAccess.longRunningOperation(DefaultCacheAccess.java:172)
13:46:03.756 [ERROR] [org.gradle.BuildExceptionReporter]        at org.gradle.cache.internal.DefaultCacheAccess.longRunningOperation(DefaultCacheAccess.java:198)
13:46:03.757 [ERROR] [org.gradle.BuildExceptionReporter]        at org.gradle.cache.internal.DefaultPersistentDirectoryStore.longRunningOperation(DefaultPersistentDirectoryStore.java:111)
13:46:03.757 [ERROR] [org.gradle.BuildExceptionReporter]        at org.gradle.api.internal.changedetection.DefaultTaskArtifactStateCacheAccess.longRunningOperation(DefaultTaskArtifactStateCacheAccess.java:83)
13:46:03.758 [ERROR] [org.gradle.BuildExceptionReporter]        at org.gradle.api.internal.changedetection.CacheLockHandlingTaskExecuter.execute(CacheLockHandlingTaskExecuter.java:32)
13:46:03.758 [ERROR] [org.gradle.BuildExceptionReporter]        at org.gradle.api.internal.tasks.execution.SkipUpToDateTaskExecuter.execute(SkipUpToDateTaskExecuter.java:55)
13:46:03.758 [ERROR] [org.gradle.BuildExceptionReporter]        at org.gradle.api.internal.tasks.execution.ValidatingTaskExecuter.execute(ValidatingTaskExecuter.java:57)
13:46:03.758 [ERROR] [org.gradle.BuildExceptionReporter]        at org.gradle.api.internal.tasks.execution.SkipEmptySourceFilesTaskExecuter.execute(SkipEmptySourceFilesTaskExecuter.java:41)
13:46:03.758 [ERROR] [org.gradle.BuildExceptionReporter]        at org.gradle.api.internal.tasks.execution.SkipTaskWithNoActionsExecuter.execute(SkipTaskWithNoActionsExecuter.java:51)
13:46:03.758 [ERROR] [org.gradle.BuildExceptionReporter]        at org.gradle.api.internal.tasks.execution.SkipOnlyIfTaskExecuter.execute(SkipOnlyIfTaskExecuter.java:52)
13:46:03.759 [ERROR] [org.gradle.BuildExceptionReporter]        at org.gradle.api.internal.tasks.execution.ExecuteAtMostOnceTaskExecuter.execute(ExecuteAtMostOnceTaskExecuter.java:42)
13:46:03.759 [ERROR] [org.gradle.BuildExceptionReporter]        at org.gradle.api.internal.AbstractTask.executeWithoutThrowingTaskFailure(AbstractTask.java:250)
13:46:03.759 [ERROR] [org.gradle.BuildExceptionReporter]        at org.gradle.execution.DefaultTaskGraphExecuter.executeTask(DefaultTaskGraphExecuter.java:192)
13:46:03.759 [ERROR] [org.gradle.BuildExceptionReporter]        at org.gradle.execution.DefaultTaskGraphExecuter.doExecute(DefaultTaskGraphExecuter.java:177)
13:46:03.759 [ERROR] [org.gradle.BuildExceptionReporter]        at org.gradle.execution.DefaultTaskGraphExecuter.execute(DefaultTaskGraphExecuter.java:83)
13:46:03.759 [ERROR] [org.gradle.BuildExceptionReporter]        at org.gradle.execution.SelectedTaskExecutionAction.execute(SelectedTaskExecutionAction.java:36)
13:46:03.760 [ERROR] [org.gradle.BuildExceptionReporter]        at org.gradle.execution.DefaultBuildExecuter.execute(DefaultBuildExecuter.java:61)
13:46:03.760 [ERROR] [org.gradle.BuildExceptionReporter]        at org.gradle.execution.DefaultBuildExecuter.access$200(DefaultBuildExecuter.java:23)
13:46:03.760 [ERROR] [org.gradle.BuildExceptionReporter]        at org.gradle.execution.DefaultBuildExecuter$2.proceed(DefaultBuildExecuter.java:67)
13:46:03.760 [ERROR] [org.gradle.BuildExceptionReporter]        at org.gradle.api.internal.changedetection.TaskCacheLockHandlingBuildExecuter$1.run(TaskCacheLockHandlingBuildExecuter.java:31)
13:46:03.761 [ERROR] [org.gradle.BuildExceptionReporter]        at org.gradle.cache.internal.DefaultCacheAccess$1.create(DefaultCacheAccess.java:111)
13:46:03.761 [ERROR] [org.gradle.BuildExceptionReporter]        at org.gradle.cache.internal.DefaultCacheAccess.useCache(DefaultCacheAccess.java:126)
13:46:03.761 [ERROR] [org.gradle.BuildExceptionReporter]        at org.gradle.cache.internal.DefaultCacheAccess.useCache(DefaultCacheAccess.java:109)
13:46:03.761 [ERROR] [org.gradle.BuildExceptionReporter]        at org.gradle.cache.internal.DefaultPersistentDirectoryStore.useCache(DefaultPersistentDirectoryStore.java:103)
13:46:03.762 [ERROR] [org.gradle.BuildExceptionReporter]        at org.gradle.api.internal.changedetection.DefaultTaskArtifactStateCacheAccess.useCache(DefaultTaskArtifactStateCacheAccess.java:79)
13:46:03.762 [ERROR] [org.gradle.BuildExceptionReporter]        at org.gradle.api.internal.changedetection.TaskCacheLockHandlingBuildExecuter.execute(TaskCacheLockHandlingBuildExecuter.java:29)
13:46:03.762 [ERROR] [org.gradle.BuildExceptionReporter]        at org.gradle.execution.DefaultBuildExecuter.execute(DefaultBuildExecuter.java:61)
13:46:03.763 [ERROR] [org.gradle.BuildExceptionReporter]        at org.gradle.execution.DefaultBuildExecuter.access$200(DefaultBuildExecuter.java:23)
13:46:03.763 [ERROR] [org.gradle.BuildExceptionReporter]        at org.gradle.execution.DefaultBuildExecuter$2.proceed(DefaultBuildExecuter.java:67)
13:46:03.763 [ERROR] [org.gradle.BuildExceptionReporter]        at org.gradle.execution.DryRunBuildExecutionAction.execute(DryRunBuildExecutionAction.java:32)
13:46:03.763 [ERROR] [org.gradle.BuildExceptionReporter]        at org.gradle.execution.DefaultBuildExecuter.execute(DefaultBuildExecuter.java:61)
13:46:03.763 [ERROR] [org.gradle.BuildExceptionReporter]        at org.gradle.execution.DefaultBuildExecuter.execute(DefaultBuildExecuter.java:54)
13:46:03.763 [ERROR] [org.gradle.BuildExceptionReporter]        at org.gradle.initialization.DefaultGradleLauncher.doBuildStages(DefaultGradleLauncher.java:155)
13:46:03.763 [ERROR] [org.gradle.BuildExceptionReporter]        at org.gradle.initialization.DefaultGradleLauncher.doBuild(DefaultGradleLauncher.java:110)
13:46:03.764 [ERROR] [org.gradle.BuildExceptionReporter]        at org.gradle.initialization.DefaultGradleLauncher.run(DefaultGradleLauncher.java:78)
13:46:03.764 [ERROR] [org.gradle.BuildExceptionReporter]        at org.gradle.launcher.cli.RunBuildAction.execute(RunBuildAction.java:42)
13:46:03.764 [ERROR] [org.gradle.BuildExceptionReporter]        at org.gradle.launcher.cli.RunBuildAction.execute(RunBuildAction.java:28)
13:46:03.764 [ERROR] [org.gradle.BuildExceptionReporter]        at org.gradle.launcher.exec.ExceptionReportingAction.execute(ExceptionReportingAction.java:32)
13:46:03.764 [ERROR] [org.gradle.BuildExceptionReporter]        at org.gradle.launcher.exec.ExceptionReportingAction.execute(ExceptionReportingAction.java:21)
13:46:03.764 [ERROR] [org.gradle.BuildExceptionReporter]        at org.gradle.launcher.cli.CommandLineActionFactory$WithLoggingAction.execute(CommandLineActionFactory.java:238)
13:46:03.764 [ERROR] [org.gradle.BuildExceptionReporter]        at org.gradle.launcher.cli.CommandLineActionFactory$WithLoggingAction.execute(CommandLineActionFactory.java:222)
13:46:03.764 [ERROR] [org.gradle.BuildExceptionReporter]        at org.gradle.launcher.Main.doAction(Main.java:48)
13:46:03.764 [ERROR] [org.gradle.BuildExceptionReporter]        at org.gradle.launcher.exec.EntryPoint$1.execute(EntryPoint.java:53)
13:46:03.765 [ERROR] [org.gradle.BuildExceptionReporter]        at org.gradle.launcher.exec.EntryPoint$1.execute(EntryPoint.java:51)
13:46:03.765 [ERROR] [org.gradle.BuildExceptionReporter]        at org.gradle.launcher.exec.Execution.execute(Execution.java:28)
13:46:03.765 [ERROR] [org.gradle.BuildExceptionReporter]        at org.gradle.launcher.exec.EntryPoint.run(EntryPoint.java:39)
13:46:03.765 [ERROR] [org.gradle.BuildExceptionReporter]        at org.gradle.launcher.Main.main(Main.java:39)
13:46:03.765 [ERROR] [org.gradle.BuildExceptionReporter]        at org.gradle.launcher.ProcessBootstrap.runNoExit(ProcessBootstrap.java:51)
13:46:03.765 [ERROR] [org.gradle.BuildExceptionReporter]        at org.gradle.launcher.ProcessBootstrap.run(ProcessBootstrap.java:33)
13:46:03.765 [ERROR] [org.gradle.BuildExceptionReporter]        at org.gradle.launcher.GradleMain.main(GradleMain.java:24)
13:46:03.765 [ERROR] [org.gradle.BuildExceptionReporter] Caused by: org.gradle.api.GradleException: There were failing tests. See the report at C:\Dev\AAAAA\trunk\aaaaa-decision\build\reports\tests.
13:46:03.766 [ERROR] [org.gradle.BuildExceptionReporter]        at org.gradle.api.tasks.testing.Test.executeTests(Test.java:386)
13:46:03.766 [ERROR] [org.gradle.BuildExceptionReporter]        at org.gradle.api.internal.BeanDynamicObject$MetaClassAdapter.invokeMethod(BeanDynamicObject.java:196)
13:46:03.766 [ERROR] [org.gradle.BuildExceptionReporter]        at org.gradle.api.internal.BeanDynamicObject.invokeMethod(BeanDynamicObject.java:102)
13:46:03.766 [ERROR] [org.gradle.BuildExceptionReporter]        at org.gradle.api.internal.CompositeDynamicObject.invokeMethod(CompositeDynamicObject.java:93)
13:46:03.766 [ERROR] [org.gradle.BuildExceptionReporter]        at org.gradle.api.tasks.testing.Test_Decorated.invokeMethod(Unknown Source)
13:46:03.766 [ERROR] [org.gradle.BuildExceptionReporter]        at org.gradle.util.ReflectionUtil.invoke(ReflectionUtil.groovy:23)
13:46:03.766 [ERROR] [org.gradle.BuildExceptionReporter]        at org.gradle.api.internal.project.taskfactory.AnnotationProcessingTaskFactory$4.execute(AnnotationProcessingTaskFactory.java:150)
13:46:03.766 [ERROR] [org.gradle.BuildExceptionReporter]        at org.gradle.api.internal.project.taskfactory.AnnotationProcessingTaskFactory$4.execute(AnnotationProcessingTaskFactory.java:145)
13:46:03.767 [ERROR] [org.gradle.BuildExceptionReporter]        at org.gradle.api.internal.AbstractTask$TaskActionWrapper.execute(AbstractTask.java:495)
13:46:03.767 [ERROR] [org.gradle.BuildExceptionReporter]        at org.gradle.api.internal.AbstractTask$TaskActionWrapper.execute(AbstractTask.java:484)
13:46:03.767 [ERROR] [org.gradle.BuildExceptionReporter]        at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.executeActions(ExecuteActionsTaskExecuter.java:60)
13:46:03.767 [ERROR] [org.gradle.BuildExceptionReporter]        ... 54 more
13:46:03.767 [ERROR] [org.gradle.BuildExceptionReporter]
13:46:03.767 [LIFECYCLE] [org.gradle.BuildResultLogger]
13:46:03.768 [LIFECYCLE] [org.gradle.BuildResultLogger] BUILD FAILED 
```

有没有人遇到过这个？生成的测试报告中没有任何线索可以提供任何线索。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-10T11:50:37.453

您应该运行 gradle ，`--debug`然后您可能会看到一个堆栈跟踪，其中包含有关原因的提示。

# asp.net-mvc - 带有特殊字符的 MVC 路由

> ID：10251302
> 
> 赞同：7
> 
> 时间：2012-04-20T18:09:42.243
> 
> 标签：asp.net-mvc, asp.net-mvc-3, iis, iis-7, asp.net-mvc-routing

我正在尝试支持一些遗留 url，并将它们映射到控制器操作。URL 如下所示：

```
/~Home+Office~Note+Pads.html 
```

这是我的路线：

```
routes.MapRoute(
    "LegacyCategory",
    "{path}.html",
    new { controller = "LegacyCI", action = "Index", }
); 
```

这是我的控制器处理它们的（开始）：

```
public class LegacyCIController : Controller {
    public ActionResult Index(string path) {
        if (path == "~Address+Labels") {
            return RedirectToAction("Display", "Category", new { id = "AddressLabels" });
        }       
        return RedirectToAction("Index", "Category"); 
    }
} 
```

如果我在 LegacyCIController 中设置断点，并将起始页设置为 XXX.html，则断点命中（并且失败`if`）并且生活很好。但是，当我尝试将起始页设置为 时`~Address+Labels.html`，没有命中断点，Chrome 只是呕吐并向我显示一个页面，上面写着“哎呀，这个页面似乎已损坏”。

我在我的机器上通过 IIS 7 运行此页面，而不是 Visual Studio。

这个 URL 是否格式错误以至于常规的 MVC 路由甚至无法处理它，还是我做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-20T22:39:00.690

默认情况下，IIS7 会阻止路径中带有 a`+`的 URL（错误 404.11），您可以通过打开[`allowDoubleEscaping`](http://learn.iis.net/page.aspx/143/use-request-filtering/)in来覆盖它`web.config`：

```
 <system.webServer>
    <security>
      <requestFiltering allowDoubleEscaping="true">
      </requestFiltering>
    </security>
  </system.webServer> 
```

但是，正如 IIS 博客中所解释的，此选项会打开一个潜在的安全漏洞，因此在使用它时要小心：

[http://blogs.iis.net/thomad/archive/2007/12/17/iis7-rejecting-urls- contains.aspx](http://blogs.iis.net/thomad/archive/2007/12/17/iis7-rejecting-urls-containing.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T21:21:19.983

尝试使用`HandleUnknownAction`. 在您的控制器中：

```
protected override void HandleUnknownAction( string actionName ) {
  if( Request.Path == "/~Address+Labels.html" ) {
    RedirectToAction( "Display", "Category" ).ExecuteResult( ControllerContext );
  } else {
    base.HandleUnknownAction( actionName );
  }
} 
```

# ruby - Ruby 数组#include? 给出 NoMethodError

> ID：10251303
> 
> 赞同：1
> 
> 时间：2012-04-20T18:09:48.547
> 
> 标签：ruby, arrays, csv, sakai

我有一些代码在继续之前检查用户是否在“sakai_trained”数组中。出于某种原因，当我运行此代码时：

```
CSV.foreach(activation_csv, {:headers => true}) do |row|
  if sakai_trained
    row << 'Untrained' unless sakai_trained.include?(row[1]) 
  end

  course_list << row
end 
```

我收到这个错误

```
C:/Ruby193/lib/ruby/1.9.1/csv.rb:478:in `==': undefined method `row' for "stuartademo":String (NoMethodError)
        from activate-courses.rb:42:in `include?'
        from activate-courses.rb:42:in `block in <main>'
        from C:/Ruby193/lib/ruby/1.9.1/csv.rb:1792:in `each'
        from C:/Ruby193/lib/ruby/1.9.1/csv.rb:1208:in `block in foreach'
        from C:/Ruby193/lib/ruby/1.9.1/csv.rb:1354:in `open'
        from C:/Ruby193/lib/ruby/1.9.1/csv.rb:1207:in `foreach'
        from activate-courses.rb:40:in `<main>' 
```

起初我以为 row[1] 有问题，但即使使用字符串文字，它也会以同样的方式中断。我检查以确保 sakai_trained 数组存在并且其中也有数据。我还尝试将其重写为 if 语句，以防除非逻辑有缺陷，但也会返回相同的错误。

如果不清楚，我想在将行添加到 course_list 数组之前检查位于 row[1] 中的用户 ID 是否存在于 sakai_trained 数组中。如果没有，我希望先将“未训练”添加到行中，然后将行添加到数组中。当我删除 unless... 部分时，我能够获得一个完整的 course_list 数组，但正如预期的那样，每一行都“未经训练”。问题似乎与

```
unless sakai_trained.include?(row[1]) 
```

部分，但我只是看不到它。

**更新：**

```
sakai_trained = []
  CSV.foreach(training_csv, {:headers => true}) do |trained|
    sakai_trained << trained
  end 
```

我应该#map！那么每个带有 .to_s 的项目将它们变成字符串呢？

**更新 2：**

我变了

```
sakai_trained << trained 
```

到

```
sakai_trained << trained.to_s 
```

它已经消除了错误，但输出仍然不太正确。

**更新 3：** *几乎。在职的。*你们都非常棒，尽管如此令人沮丧，但我学到了一些新的有趣的东西。

代码：

```
course_list = []

if options[:verify]
  sakai_trained = []
  CSV.foreach(training_csv, {:headers => true}) do |trained|
    sakai_trained << trained.to_s
  end
end 

CSV.foreach(activation_csv, {:headers => true}) do |row|
  if sakai_trained && !sakai_trained.include?(row[1])  
    row << 'Untrained' 
  end

  course_list << row
end 
```

产量：

> 2124-5318,stuartademo,未经训练
> 
> 2124-5320，鲍勃史密斯，未经训练
> 
> 2124-4686，吉姆史密斯，未经训练
> 
> 2124-3560，吉尔史密斯，未经训练
> 
> 2124-3562，苏史密斯，未经训练
> 
> 2124-5428，哈里史密斯，未经训练

什么时候应该

> 2124-5318,stuartademo,未经训练
> 
> 2124-5320，鲍勃史密斯
> 
> 2124-4686，吉姆史密斯
> 
> 2124-3560，吉尔史密斯
> 
> 2124-3562，苏史密斯
> 
> 2124-5428，哈里史密斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T18:43:28.463

问题出现在`csv.rb`标准 Ruby 库中第 478 行的文件中。`CSV`这是导致问题的代码：

```
#
# Returns +true+ if this row contains the same headers and fields in the
# same order as +other+.
#
def ==(other)
  @row == other.row
end 
```

从您的错误消息的外观来看，字符串`"stuartademo"`被传递到此方法中，当然，没有`String#row`. 看起来`other`应该是 csv 文件的一行。根据上述方法的注释，它应该包含标题和字段。

我建议找出这个字符串`"stuartademo"`的来源，并弄清楚为什么只有字符串而不是整行被传入。

编辑：

如果`sakai_trained`从 CSV 填充，则它不是数组而是`CSV:Row`类型。在这种情况下，当你打电话时`CSV::Row#include?`，`==(other)`就会被调用。因此，您传入的`row[1]`是一个字符串。它不应该是一个字符串。

而不是使用`include?`，尝试使用`field?(data)`或`fields.include?`。

```
CSV.foreach(activation_csv, {:headers => true}) do |row|
  if sakai_trained
    row << 'Untrained' unless sakai_trained.field?(row[1]) 
  end

  course_list << row
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T19:32:53.650

我认为这会稍微简化逻辑，并且可能会帮助您以不同的方式跟踪您的问题。

```
CSV.foreach(activation_csv, {:headers => true}) do |row|
  if sakai_trained && !sakai_trained.include?(row[1])
    row << 'Untrained'
  end

  course_list << row
end 
```

更新：

试着把它分解成几个部分，让我们知道所有的输出是什么：

```
CSV.foreach(activation_csv, {:headers => true}) do |row|
  puts row                   #=>  2124-5318,stuartademo
  puts row.class             #=>  CSV::Row 
  puts row[1]                #=>  stuartademo 
  puts row[1].class          #=>  String 
  puts sakai_trained         #=>  I'm assuming nil because it is of NilClass
  puts sakai_trained.class   #=>  NilClass
end 
```

我认为您的 sakai_trained 实际上`nil`解释了为什么要`sakai_trained.to_s`摆脱错误。你不能调用`include?`任何 nil 但当你使用`to_s`它时可能会将它变成`""`返回 false 的。

# python - libtorrent python 绑定中的 torrent_info() 和磁力链接

> ID：10251305
> 
> 赞同：3
> 
> 时间：2012-04-20T18:10:09.323
> 
> 标签：python, magnet-uri, libtorrent

我正在搜索在 libtorrent 中使用磁力链接期间如何在 torrent_info() 函数中传递参数。特别是我的目标是分析同行和作品。通过使用 .torrent 文件，该过程显然会在该站点中抛出其他给定的范例：

```
e = lt.bdecode(open("torrent.torrent", 'rb').read())
info = lt.torrent_info(e) 
```

但是磁铁链接会发生什么？

```
params = {
    'save_path': 'C:\Python26',
    'storage_mode': lt.storage_mode_t(2),
    'paused': False,
    'auto_managed': True,
    'duplicate_is_error': True}
link = "magnet:?........."

handle = lt.add_magnet_uri(ses, link, params) 
```

为了能够正确使用 torrent_info 函数，在磁铁链接案例中哪个变量等效于 .torrent 进程的“e”？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-18T20:12:14.187

添加磁力链接会为您提供一个 torrent 句柄，您将能够从中获取 torrent 信息（一旦获取元数据 - 否则它将抛出）。

与元数据已经存在的 torrent 文件不同，磁力链接需要从网络中检索元数据作为起始，这可能需要一些时间。

我更习惯于 C++ 库，但是很好 - 要在最脏的地方进行演示，您可以执行以下操作：

```
handle = lt.add_magnet_uri(ses, link, params)
while (not handle.has_metadata()):
   time.sleep(.1)
info = handle.get_torrent_info() 
```

...然后，您可以在这里阅读所有相关信息；) [http://www.rasterbar.com/products/libtorrent/manual.html#torrent-info](http://www.rasterbar.com/products/libtorrent/manual.html#torrent-info)

# ruby-on-rails-3 - 回形针 + S3：将现有文件从一种 :path 格式迁移到另一种

> ID：10251309
> 
> 赞同：11
> 
> 时间：2012-04-20T18:10:17.673
> 
> 标签：ruby-on-rails-3, amazon-s3, migration, paperclip

我有一个带有`avatar`回形针的模型。它现在有一个简单的标准路径

```
has_attached_file :avatar,
  :path => "/:id-:style-:filename" 
```

我需要进入一个模糊的

```
has_attached_file :avatar,
  :path => "/:id-:hash.:extension"
  :hash_secret => 'asecuresecret' 
```

新图像一切正常，但是如何将存储在 S3 中的现有文件迁移到新的路径格式，即重命名它们？

我正在使用回形针 2.7 和 Rails 3.2

谢谢 ！！！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2016-03-15T09:18:42.343

如果您只想使用 Paperclip 并且您不担心重新上传，我采用了另一种方法。

假设您有以下内容：

```
class User
   has_attached_file :image, path: "/:old_path/:filename"
   ...
end 
```

并且您想迁移到新路径：`"/:new_path/:filename"`

我的建议是使用旧路径创建一个`FakeUser`并在用户模型中更改它。

```
class FakeUser
   self.table_name = :users
   has_attached_file :image, path: "/:old_path/:filename"
   ...
end

class User
   has_attached_file :image, path: "/:new_path/:filename"
   ...
end 
```

您现在可以编写以下迁移：

```
FakeUser.find_each do |fake_user|
   User.find(fake_user.id).update(image: fake_user.image)
   fake_user.image.destroy
end 
```

然后，您可以在迁移完成后删除 FakeUser 模型。

顺便说一句，这种方法也可以完美地从本地文件系统迁移到 S3，反之亦然。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-07T18:56:54.553

这个 rake 任务应该可以解决问题。我用 aws-sdk 1.5.2 和 ruby​​ 1.9.3p194 试了一下。

`new_key`应该映射到您的新回形针路径。不要忘记`:acl`根据您的需要进行设置。

```
namespace :data do
  desc 'aws images migration'
  task :migrate_images do |t, args|
    s3 = AWS::S3.new(:access_key_id => 'XXX', :secret_access_key => 'XXX')
    bucket = s3.buckets['your-bucket-name']
    bucket.objects.each do |object|
      new_key = object.key.gsub(........)
      new_object = bucket.objects[new_key]
      object.copy_to new_object, {:acl => :public_read}
    end
  end
end 
```

一旦您确定新文件是正确的，则应手动删除原始文件或使用类似的任务。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T16:54:05.390

我会编写一个 rake 任务（或者如果您愿意，也可以只是一个纯脚本，在 rails 上下文中运行）。如果您使用的是 aws-s3 gem，请遍历您知道它们具有旧路径格式的模型实例，或者尝试在文件名上编写一些条件以匹配它们，然后逐个移动。

```
Model.find_in_batches(:batch_size => 500,
      :conditions => "avatar_filename like 'SOMETHING_MATCHING'") do |o|
  AWS::S3::S3Object.rename(old_path(o.avatar), o.avatar.url, 'BUCKET_NAME')
end 
```

如果您已经使用新路径定义配置了头像，请编写一个可以基于头像属性构建旧路径的方法。

[您可以在此处](http://amazon.rubyforge.org/doc/)阅读 aws-s3 gem 文档，了解如何建立与您的 S3 帐户的连接。

# powershell - 如何在 PowerShell 上使用 ANSI 编码实例化 System.IO.StreamWriter？

> ID：10251310
> 
> 赞同：2
> 
> 时间：2012-04-20T18:10:18.637
> 
> 标签：powershell, streamwriter

我没有创建 Power Shell 脚本的经验，我正在尝试实例化提供特定文本编码的 System.IO.StreamWriter 类。我正在尝试这样做：

```
$file = New-Object System.IO.StreamWriter("sample.txt", [System.Text.Encoding]::Default, 4096) 
```

我收到以下错误消息：

```
New-Object : Cannot find an overload for "StreamWriter" and the argument count: "3". 
At line:1 char:18 
    + $out = New-Object <<<<  System.IO.StreamWriter("sample.txt", [System.Text.Encoding]::Default, 4096)
    + CategoryInfo          : InvalidOperation: (:) [New-Object], MethodException
    + FullyQualifiedErrorId : ConstructorInvokedThrowException,Microsoft.PowerShell.Commands.NewObjectCommand 
```

我查看了 MSDN 文档[StreamWriter Constructor (Stream, Encoding, Int32)](http://msdn.microsoft.com/en-US/library/72d9f8d5%28v=vs.80%29.aspx)，它具有三个参数的重载。

有谁知道如何实例化指定编码的 System.IO.StreamWriter？

谢谢，

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-20T18:21:15.837

您正在尝试调用`StreamWriter(String, Encoding, Int32)`-*该*签名不存在。诚然，错误消息还有一些不足之处......但基本上你要么需要自己创建流，要么使用[`StreamWriter(String, Boolean, Encoding)`](http://msdn.microsoft.com/en-us/library/f5f5x7kt%28v=vs.80%29.aspx).

# ruby-on-rails - 单击标记 Google Maps API 并使用 gmaps4rails 更改页面

> ID：10251312
> 
> 赞同：0
> 
> 时间：2012-04-20T18:10:23.107
> 
> 标签：ruby-on-rails, google-maps-api-3, google-maps-markers, dom-events, gmaps4rails

我正在使用 gmaps4rails 并且我有很多标记，现在当我单击标记出现信息窗口时，我需要单击标记并重定向到另一个页面。

控制器：

```
def index
@postos = Posto.all
@markers = Posto.all.to_gmaps4rails  

@json = Posto.all.to_gmaps4rails  do |posto, marker|
 marker.json "\"id\": #{posto.id}"
end  
  respond_to do |format|
   format.html # index.html.erb
   format.json { render json: @postos }
  end
end 
```

Javascript：

```
 google.maps.event.addListener(marker_container.serviceObject, 'click', @openInfoWindow(currentMap, marker_container.infowindow, marker_container.serviceObject)) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T17:43:42.077

好吧，你几乎没问题，但你的 js 函数似乎超出了主题，你应该编写如下代码：

```
 google.maps.event.addListener(marker_container.serviceObject, 'click', function() { your_code_to_change_page_depending_on_the_marker }) 
```

# c# - 如何在windows窗体中创建帮助按钮

> ID：10251314
> 
> 赞同：0
> 
> 时间：2012-04-20T18:10:44.273
> 
> 标签：c#

我正在尝试创建一个基本的帮助按钮，但我认为我做得不对可能有人告诉我哪里做错了......

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;

namespace WindowsFormsApplication1
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        private void Form1_Load(object sender, EventArgs e){

            public void CreateMyForm()
            {
                // Create a new instance of the form.
                Form form1 = new Form();
                // Create two buttons to use as the accept and cancel buttons.
                Button button1 = new Button ();
                Button button2 = new Button ();

                // Set the text of button1 to "OK".
                button1.Text = "OK";
                // Set the position of the button on the form.
                button1.Location = new Point (10, 10);
                // Set the text of button2 to "Cancel".
                button2.Text = "Cancel";
                // Set the position of the button based on the location of button1.
                button2.Location
                   = new Point (button1.Left, button1.Height + button1.Top + 10);
                // Set the caption bar text of the form.   
                form1.Text = "My Dialog Box";
                // Display a help button on the form.
                form1.HelpButton = true;

                // Define the border style of the form to a dialog box.
                form1.FormBorderStyle = FormBorderStyle.FixedDialog;
                // Set the MaximizeBox to false to remove the maximize box.
                form1.MaximizeBox = false;
                // Set the MinimizeBox to false to remove the minimize box.
                form1.MinimizeBox = false;
                // Set the accept button of the form to button1.
                form1.AcceptButton = button1;
                // Set the cancel button of the form to button2.
                form1.CancelButton = button2;
                // Set the start position of the form to the center of the screen.
                form1.StartPosition = FormStartPosition.CenterScreen;

                // Add button1 to the form.
                form1.Controls.Add(button1);
                // Add button2 to the form.
                form1.Controls.Add(button2);

                // Display the form as a modal dialog box.
                form1.ShowDialog();
             }
        }
    }
} 
```

# .htaccess - mod-rewrite htaccess 文件夹重写

> ID：10251322
> 
> 赞同：0
> 
> 时间：2012-04-20T18:11:16.367
> 
> 标签：.htaccess, mod-rewrite

是否有可能重写[http://mydomain.com/folder/index1.php](http://mydomain.com/folder/index1.php)以便导航到[http://mydomain.com/folder/index1](http://mydomain.com/folder/index1)的任何人都会看到 index1.php 是否有意义？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T18:21:35.180

是的

```
RewriteEngine on
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME}\.php -f
RewriteRule ^(.*)$ $1.php 
```

# xcode4 - 在 XCode IDE 中，如何使用键盘滚动窗口？

> ID：10251325
> 
> 赞同：0
> 
> 时间：2012-04-20T18:11:53.423
> 
> 标签：xcode4, keyboard, scroll

这是针对 XCode 4 的，而一个人正在 IDE 中处理一个项目。我想要 Eclipse 中的`Ctr+Up Arrow`/等价物`Ctr+Down Arrow`，所以我可以滚动当前窗口而无需从键盘上移动光标。

在 Google 中找不到它，因为我的所有搜索都返回了在 iPhone 上滚动内容的结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T17:17:13.123

@Peter 我确实看到了主题行，我只是希望你能为我澄清一下，并且在 Xcode 中有几种使用键盘滚动的配置（下面的屏幕截图）。除此之外，我认为您无能为力。希望这可以帮助！

编辑：如果这是您正在寻找的，好消息！您将能够将它们配置为您在 Eclipse 中已经知道的快捷方式。

![在此处输入图像描述](../Images/59c2bb4780a7f8c47585d91003afe20c.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-29T23:56:11.973

如果你有一个强大的鼠标 - 你可以配置一个单点触摸顶部滚动，就像在 uitableview 上的 iphone 点击一样。你可以在这里下载 BetterTouchTool [http://blog.boastr.net/](http://blog.boastr.net/)

![在此处输入图像描述](../Images/df2a2c69e2368f98554fd84a0e41f11d.png)

# javascript - jQuery插件：插件方法调用其他插件方法？

> ID：10251327
> 
> 赞同：1
> 
> 时间：2012-04-20T18:12:02.033
> 
> 标签：javascript, jquery

我有一个像这样定义的插件：

```
(function( $ ){
    var mymethods = {
        init: function(opts) {
            // do some wild awesome magic
            if (opts.drawtablefirst) $(this).drawtable(); // This doesn't actually work of course
        },

        drawtable: function() {
            $(this).empty().append($("<table>")); // Empty table, I know...
        }
    }

    // Trackman table
    $.fn.myplugin = function(method) {

        if (mymethods[method] ) {
            return mymethods[method].apply(this, Array.prototype.slice.call(arguments, 1));
        } else if (typeof method === 'object' || !method ) {
            return mymethods.init.apply(this, arguments);
        }
    }
})( jQuery ); 
```

我希望能够`drawtable`从该方法调用该`init`方法，但该方法不起作用。我实例化我的插件主要是：

```
$("div#container").myplugin({drawtablefirst: true}) 
```

但有时我不想通过`drawtablefirst`然后手动调用它，例如：

```
$("div#container").myplugin('drawtable') 
```

配置它的最佳方法是什么是`drawtable`可访问的插件方法，但也可以从插件方法本身中调用，例如`init`？

此外，访问`drawtable`via中的原始元素`$(this)`似乎不起作用。那里的正确方法是什么？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T18:38:24.180

此解决方案使用 jQuery-ui 1.7+ .widget 功能，这里有一个[很好的链接，可以免费获得](http://ajpiano.com/widgetfactory/#slide1)

```
$.widget("notUi.myPlugin",{
 options:{
   drawtablefirst:true,
   //...any other opts you want
 },
 _create:function(){
  // do some wild awesome magic
  if (this.options.drawtablefirst){
   this.drawtable(); // This actually works now of course
  } 
 },
 //any function you do not put an underscore in front of can be called via .myPlugin("name", //args)
 drawtable: function() {
   this.element.empty().append($("<table>")); // Empty table, I know...
 }
}); 
```

# java - 池大小实际上如何与 Spring 的计划任务一起工作？

> ID：10251328
> 
> 赞同：9
> 
> 时间：2012-04-20T18:12:04.147
> 
> 标签：java, spring, scheduled-tasks, threadpool

我有一个任务安排如下：

```
<task:scheduler id="notification.scheduler" pool-size="15" />

<task:scheduled-tasks scheduler="notification.scheduler">
    <task:scheduled ref="notificationProcessor" method="sendNextQueueEvent" fixed-rate="500" />
    <task:scheduled ref="notificationProcessor" method="deleteNextCompletedEvent" fixed-rate="60000" />
</task:scheduled-tasks> 
```

我想我对计划任务如何与池大小一起工作存在误解。尽管池大小为 15，但似乎只使用了一个线程。例如，如果队列中有 15 个事件，我会认为每分钟会有 15 个线程检查以从队列中删除一个事件。显然，这是错误的。

如何使用 Spring 的调度程序抽象在时间间隔内有 15 个线程调用此方法？

编辑：我想要完成的是：每半秒，我想检查一下是否有排队的事件要发送。完成后，我想发送最多 15 个（如果存在 15 个）。我将如何使用 java 线程的 spring 抽象来实现这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-20T19:14:08.337

首先`<task:scheduler/>`是围绕`ScheduledThreadPoolExecutor`扩展的包装器`ThreadPoolExecutor`。后者的 JavaDoc 说：

> 甚至核心线程最初都是在新任务到达时才创建和启动的

其次，您必须了解计划任务（这是 Java 功能，而不是 Spring 的）不会同时运行，即使它们花费的时间比重复间隔更长。他们只是等待。因此，您没有 15 个事件在队列中等待，您有 15 个延迟执行并等待该单个线程。无需创建另一个，因为下一次执行必须等待前一个完成。同样，这就是 Java 调度框架的工作方式。

当然，如果您安排了多个不同的任务，则会创建更多线程。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-20T18:23:40.257

Spring[`task:scheduler`](http://static.springsource.org/spring/docs/3.0.5.RELEASE/reference/scheduling.html#threadPoolTaskExecutor)默认情况下是一个 bean 属性包装器[`java.util.concurrent.ThreadPoolExecutor`](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ThreadPoolExecutor.html)：

> corePoolSize - 保留在池中的线​​程数，即使它们是空闲的。

这并不能保证该`pools-size`属性等同于具有该数量的*活动*线程。另一方面，您应该注意，在*任何给定时间点*，线程的最大数量只能等于您正在使用的机器上的处理内核数；即所有其他线程将等待切换到`RUNNING`模式并继续执行。

此外，在 Spring 的文档中，它提到如果这不是您所需要的，您也可以利用`ConcurrentTaskExecutor`.

# google-maps - Sencha Touch + 带有在线/离线应用程序的谷歌地图：当应用程序在线时可以加载地图吗？

> ID：10251329
> 
> 赞同：2
> 
> 时间：2012-04-20T18:12:16.077
> 
> 标签：google-maps, google-maps-api-3, sencha-touch

我在我的 sencha touch 1.x 应用程序中使用 Google Maps v3，它提供了在线和离线模式。我现在的问题是，只有在我的 index.html 中有以下代码时，Google Maps v3 API 才可用：

```
<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=true"></script> 
```

但是因为我使用的应用程序也可以在离线时启动（当没有 Wifi/UMTS 可用时），所以当应用程序离线启动时，index.html 中的 Google 代码不会加载。因此，当我上网（再次使用 Wifi）并继续使用我的应用程序时，我无法使用任何 Google 地图组件，因为它没有在 index.html 的开头加载。

所以我的问题是，是否可以在应用程序已经运行时将 Google Maps 的 javascript 代码添加到 index.html 文件中，或者是否可以以某种方式重新加载 Google Maps API？现在我只看到我总是必须重新启动整个应用程序才能使地图以这种方式可用的方式。

在此先感谢，弗洛里安

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T22:58:24.207

我不熟悉 Sencha，但您也可以异步加载 API。请参阅开发人员文档。我假设您可以使用 Sencha 框架来测试离线/在线。因此，如果您加载页面，它处于离线状态，然后再次测试并且它处于在线状态，您应该通过此处文档中概述的方法加载 API：

[http://goo.gl/YoABT](http://goo.gl/YoABT)

# java - 如何使用 Hibernate 将图像流式传输到数据库中？

> ID：10251332
> 
> 赞同：1
> 
> 时间：2012-04-20T18:12:41.240
> 
> 标签：java, image, hibernate

很简单的问题，网上几乎没有答案。我使用 byte[] 作为我的对象。目前我正在将整个图像读入内存然后写入。非常简单。

```
 @Column(name = "FILE_DATA")
private byte[] fileData; 
```

我想将它流式传输。所以我想我需要使用 inputStream，但是休眠不喜欢那样。

我该如何设置？

编辑：

我试过了，但得到了 -314 db2 错误：

```
Blob b = null;
        try {
            Proxy proxy = new Proxy(Proxy.Type.HTTP, new InetSocketAddress("proxy.com", 80));
            URL urls = new URL(url);
            URLConnection conn = urls.openConnection(proxy);
            b = new BlobImpl(conn.getInputStream(), conn.getContentLength());
        } catch (Exception e) {
            e.printStackTrace();
        }

        att.setFileData(b);
        this.theDao.save(att); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T18:37:26.113

您可以使用 Blob 数据类型从数据库中插入和获取图像。它还将为您提供二进制输入流的选项。只需将您的 db 字段用作 blob 并创建一个 blob ojbect 而不是字节数组。

```
b.getBinaryStream() 
```

您也可以从创建 Blob`bytes[]`

```
Hibernate.createBlob(bytes); 
```

最简单的解决方案 保存在硬盘上并将有关图像的信息保存在数据库中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T18:19:53.457

一种可能的解决方案是将文件名 (URL) 保存在数据库中，并从磁盘（网络资源）流式传输数据并流式传输它们。

我更喜欢这种网络方法——当你只返回一个 URL 并且它由浏览器和 Apache/Nginx 处理时（所以你根本不必担心流式传输）。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-23T15:08:59.987

我不确定我是否理解您所说的“休眠不喜欢那样”是什么意思？

这是定义它的简单程度。

```
@Entity Photo {
    @Id @GeneratedValue
    private Long id = null;

    private String filename = null;

    @Lob
    private byte[] bytes = null;
    } 
```

然后将数据加载到对象中......

```
String filename = // Where ever this comes from...
File file = new File(filename);
InputStream is = new FileInputStream(file);

Photo photo = new Photo();
photo.setFilename(filename);

// Create and fill the byte array from the file.
byte[] bytes = new byte[(int) file.length()];
is.read(bytes);
photo.setBytes(bytes); 
```

然后最终告诉 Hibernate 将其保存在数据库中。

```
session.saveOrUpdate(photo); 
```

# c++ - 如果我不捕获 addPixmap 的返回值，则 Pixmap 仅出现在 QGraphicsScene 上

> ID：10251333
> 
> 赞同：0
> 
> 时间：2012-04-20T18:12:45.443
> 
> 标签：c++, qt

我正在尝试从对象的方法中绘制到 QGraphicsScene。代码如下所示：

```
void Enemy::draw(QGraphicsScene *scene) {
    //Works
    scene->addPixmap(pixmap);
    //Doesn't work
    pixmapItem = scene->addPixmap(pixmap);
} 
```

`pixmap`是类型的 Enemy 的成员`QPixmap`，`pixmapItem`是类型的 Enemy 的成员`QGraphicsPixmapItem*`。

为什么将 addPixmap 的返回值分配给阻止显示像素图的指针？

编辑：进一步调查表明，虽然

```
QGraphicsPixmapItem *pointer = scene->addPixmap(pixmap); 
```

将工作

将本地指针的值分配给 pixmapItem 使其再次停止工作：

```
QGraphicsPixmapItem *pointer = scene->addPixmap(pixmap);
//doesn't work now
pixmapItem = pointer; 
```

# objective-c - 如果我想制作一个依赖答案的典型智力测试应用程序有不同的结果，我是否必须使用 CoreData？

> ID：10251337
> 
> 赞同：-2
> 
> 时间：2012-04-20T18:12:53.527
> 
> 标签：objective-c, core-data

我想实现一个测试智力的应用程序。我是否必须使用 CoreData，或者我有什么替代品？

如果是这样，您是否有好的 CoreData 教程或类似的参考资料？

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T18:20:07.340

CoreData 只是一个持久层。您可以将数据存储在最适合您的任何介质中。

*   在类中硬编码
*   在列表中
*   在平面文件中

CoreData 很好，因为它在一组抽象类后面为您提供了关系数据库的全部功能，这些抽象类在面向对象的环境中运行良好，但您永远不必使用它。

为了学习 CoreData，我发现 Marcus Zarra 的[书](https://rads.stackoverflow.com/amzn/click/com/1934356328)很好。

# sqlite - 如何获取有关附加数据库中表的列信息？

> ID：10251338
> 
> 赞同：0
> 
> 时间：2012-04-20T18:12:55.537
> 
> 标签：sqlite

我有两个数据库连接到一个连接中。它们都有同名的表，但结构不同。我想获取其中之一的列信息。

我试过了：`PRAGMA table_info(database-name.table-name);`但我得到了`syntax error near '.'`. 关于如何做到这一点的任何想法？

# css - Google Chrome Ul 水平菜单幽灵项

> ID：10251339
> 
> 赞同：0
> 
> 时间：2012-04-20T18:12:57.847
> 
> 标签：css, wordpress, google-chrome

我需要在 wordpress 中创建一个顶部菜单，这样我就可以填写尚未确定的项目数量。我在这里使用 CSS 在 Stack Overflow 中找到了一个优雅的解决方案`display:table`，它在任何地方都很好用，除了在 chrome 中......

有问题的网站是：http: [//joao.beno.net.br](http://joao.beno.net.br)

如果我`check element`是 ul，禁用 css 规则，然后重新启用它，一切正常...

编辑：
不好：[http ://tinypic.com/r/24qlah1/5](http://tinypic.com/r/24qlah1/5)

# emacs - Emacs 下 Coq/Proof General 中关键字和运算符的 Unicode 字形

> ID：10251347
> 
> 赞同：9
> 
> 时间：2012-04-20T18:14:01.730
> 
> 标签：emacs, unicode, elisp, coq, proof-general

这个问题与在 Emacs 中的 Proof General 中配置 Coq 模式有关。

我试图让 Emacs 用相应的 Unicode 字形自动替换 Coq 中的关键字和符号。我设法将其定义`fun`为希腊小写 lambda λ、`forall`通用量词符号 ∀ 等。我在定义单词符号时没有遇到任何问题。

问题是当我尝试为它们的 Unicode 符号 ⇒→↔ 定义运算符`=>`时`->`，`<->`它们不会被 Coq 中相应的 Unicode 字形替换。`*scratch*`但是，当我测试它们时，它们会在缓冲区中被替换。我使用相同的机制将 Unicode glyps 与 Coq 表示法匹配：

```
(defun define-glyph (string char-info)
  (font-lock-add-keywords
   nil
   `((,(format "\\<%s\\>" string)
      (0 (progn
       (compose-region
        (match-beginning 0) (match-end 0)
        ,(apply #'make-char char-info))
       nil))))
   )) 
```

我怀疑问题在于 Coq 模式将某些标点符号标记为特殊，因此 Emacs 忽略了我的代码以将它们替换为 Unicode 字形，但我不确定。有人可以为我解释一下吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-21T00:10:23.413

根据特定于模式的语法表，这些运算符可能是*符号*，而不是*单词。*尝试

```
(defun define-glyph (string char-info)
  (font-lock-add-keywords
   nil
   `((,(format "\\_<%s\\_>" string)
      (0 (progn
           (compose-region
            (match-beginning 0) (match-end 0)
            ,(apply #'make-char char-info))
           nil)))))) 
```

# ios4 - kAudioFormatLinearPCM 中的每个样本代表什么？

> ID：10251350
> 
> 赞同：1
> 
> 时间：2012-04-20T18:14:05.723
> 
> 标签：ios4, ios5, core-audio

我发现我设备上音频的默认设置是 kAudioFormatLinearPCM。

我在 AudioBuffer 中的 mData 中每个样本得到 4 个字节。

每个值都是绝对幅度值吗？它总是一个正数吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T19:28:23.553

> 每个值都是绝对幅度值吗？

是的。

> 它总是一个正数吗？

它在您将遇到的 API 和实现中是可变的。您必须参考其他字段`AudioStreamBasicDescription`来确定样本格式和精确流。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T00:30:02.520

您需要知道流格式。如果格式是无符号的，则该值始终为正。如果样本格式是有符号的，则该值可以是正数或负数。

该值可能还需要进行字节交换，具体取决于格式的字节序、处理器的字节序（ARM iOS 上的小字节序）以及从流中读取值的方式，以使值成为线性幅度值。

# ios - iOS 应用程序中的 C 文件

> ID：10251353
> 
> 赞同：1
> 
> 时间：2012-04-20T18:14:10.367
> 
> 标签：ios, appstore-approval

如果我用一些 C 文件制作应用程序会发生什么？苹果会拒绝吗？我想将 GCC 嵌入到我的应用程序中以编译用户输入。

那可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T18:23:38.953

如果您想在*设备上*编译从其他地方获得的代码，那么您与 Apple 签订的合同明确禁止这样做（我知道这很痛苦，但我强烈建议您阅读它）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T18:24:57.340

[App Store 审查指南](https://developer.apple.com/appstore/resources/approval/guidelines.html)的第**2.7**和**2.8**节涵盖了这一点

**2.7** 以任何方式或形式下载代码的应用程序将被拒绝
**2.8** 安装或启动其他可执行代码的应用程序将被拒绝

从本质上讲，您似乎可以在您的应用程序中嵌入 GCC，但它没有用。您将只被允许编译本地代码而不能执行它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T18:27:58.923

西蒙上面的评论是正确的。在您的应用程序中嵌入 GCC 可能会被视为违反 Apple 的 TOS（请参阅 SDK 协议中的第 3.3 节）。

然而。Apple 在允许在 iOS 设备上使用 Lua 之类的语言方面一直很宽松 - 以[Codify](http://twolivesleft.com/Codea/ "编纂")为例。只要您不生成要在进程外执行的机器代码，您就可以在 iOS 应用程序中解析和解释 C文件*；*也就是说，您有效地编写了一个 C-ish 解释器。这对你来说是否是一个愉快的练习完全取决于你的口味。苹果是否接受这种区别完全取决于他们的心血来潮。

# c++ - 在 C++ 中将 jpeg 图像分割成块

> ID：10251356
> 
> 赞同：0
> 
> 时间：2012-04-20T18:14:23.547
> 
> 标签：c++, image-processing

谁能告诉我如何在 C++ 中将 JPEG 图像划分为 8 x 8 块。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T19:19:55.093

啊，死硬的方法。我的心向你倾诉。期待学到很多东西，但要预先警告你这样做会浪费时间、流血和痛苦。

[压缩常见问题解答](http://www.faqs.org/faqs/compression-faq/)有一些关于 JPEG 工作原理的详细信息。第 2 部分：主题 75：JPEG 简介是一个很好的起点。

简而言之，对于典型的 JPEG 文件，您必须将编码步骤 6 到 4 颠倒过来：

1.  (6)从JFIF容器中提取相应的headers和image数据
2.  (5)逆霍夫曼编码
3.  (4) 逆量化

然后，您应该留下 8x8 块，您可以将其输入适当的逆 DCT。

维基百科有一些关于[JFIF](http://en.wikipedia.org/wiki/JPEG_File_Interchange_Format#File_format_structure)格式的详细信息，以及 JFIF[中 JPEG](http://en.wikipedia.org/wiki/JPEG#Syntax_and_structure)数据的霍夫曼表和结构。

我假设您正在寻找使用 JPEG 来了解它？因为如果您有一些实际应用程序，几乎可以肯定不需要访问原始编码块。

看到评论后编辑：如果您只想获得一个非常大的 JPEG 的一部分而不读取/解压缩整个文件，您可以使用 ImageMagick 的`stream`命令。它允许您在不读取整个文件的情况下获取子图像。像这样使用例如`stream -extract 8x8+16+16 large.jpeg block.rgb`从 (16,16) 开始获得一个 8x8 块。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T18:20:43.693

您必须解压缩图像，使用 turbojpg 库（它非常快），它将为您提供一个`unsigned char`RGB（或 RGBA）数组。现在您有一个未压缩的图像，它分别具有 RG 和 B 的字节值。

您可以从这里开始制作一个简单的 for 循环，该循环将遍历 3*8`char`块并将它们复制`memcpy`到其他内存位置。

您必须记住，从 turbojpg 库返回的数组是**一维**线性字节数组。因此，扫描线一个接一个地存储。在创建块时要考虑到这一点，因为根据您的需要，您必须以不同的方式遍历数组。

# objective-c - UIPopover 内的 UITextField

> ID：10251362
> 
> 赞同：2
> 
> 时间：2012-04-20T18:14:44.180
> 
> 标签：objective-c, ios, uipopovercontroller, uipopover

我在 UIPopover 中有一个 UITextField。但是，无论我做什么，我都无法输入它。如果我在主视图控制器中使用 UITextField 可以正常工作。

代码：

```
UITextField *usernameTextField=[[UITextField alloc] initWithFrame:CGRectMake(166.0, 847.0, 100.0, 51.0)];
usernameTextField.secureTextEntry=NO;
[usernameTextField setPlaceholder:@"Username"];
[usernameTextField setAutocorrectionType:UITextAutocorrectionTypeNo];
[usernameTextField setAutocapitalizationType:UITextAutocapitalizationTypeNone];
[usernameTextField setClearButtonMode:UITextFieldViewModeAlways];
[usernameTextField setClearsContextBeforeDrawing:YES];
[usernameTextField setUserInteractionEnabled:YES];
[usernameTextField setEnabled:YES];
usernameTextField.borderStyle = UITextBorderStyleRoundedRect;
usernameTextField.textColor = [UIColor blackColor];
usernameTextField.font = [UIFont systemFontOfSize:17.0];
usernameTextField.keyboardType = UIKeyboardTypeDefault;
usernameTextField.returnKeyType = UIReturnKeySearch;
usernameTextField.delegate=self;
[self.view addSubview:usernameTextField]; 
```

有什么想法，怎么了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T18:20:44.637

文本字段在其自己的视图中是否带有视图控制器？如果没有，您可以尝试，然后使用视图控制器初始化 UIPopoverController，例如： [[UIPopOverController alloc] initWithContentViewController: yourViewControllerwithTextField];

# scroll - CSS 最大高度和溢出自动始终显示垂直滚动

> ID：10251369
> 
> 赞同：17
> 
> 时间：2012-04-20T18:15:17.130
> 
> 标签：scroll, overflow, css

我有一个使用以下 CSS 样式设置的 div 类：

```
div.multiple_choice{
    border: 1px solid black; 
    max-width: 300px; 
    max-height: 200px; 
    overflow: auto;
} 
```

问题是，当里面的文字没有强制DIV达到200px的最大高度时，垂直滚动条仍然出现。我可以单击向上和向下箭头，但它只会将内容上下移动大约一两个像素。

这发生在 Google Chrome（18.0 版）和 Iceweasel 11 中。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-20T18:47:22.260

事实证明，另一种 CSS 样式导致了这个问题：

```
body{
    line-height: 1;
} 
```

任何有兴趣了解这会如​​何以及为什么会导致问题的人都可以在[此处阅读有关 line-height 属性的信息](http://www.w3schools.com/cssref/pr_dim_line-height.asp)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-05-07T02:41:18.477

我遇到了这个问题。但是我使用以下css样式解决了这个问题：

```
div.yourcontainer{overflow-y:auto;} 
```

如果容器高于最大高度，将显示垂直滚动条。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-07-28T13:59:02.597

我遇到了这个问题，我发现`position: relative`子元素导致了问题。显然这不是每个人的解决方案，特别是如果`position: absolute`正在使用，但对我来说它有效。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2021-03-02T13:42:25.240

只是为了证明**@Kuba Orlik**的解决方案（他作为对已接受答案的评论发表）这是唯一对我有用的解决方案。

在内部元素上添加：

```
line-height: normal; 
```

**注意**：明确`normal`不是`1`因为它不同

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-07-05T00:46:35.777

我在尝试将反应组件列表（flex 列）包装在 div 中时遇到了这个问题，我通过将每个列表项中的元素边距更改为 0 来解决它。

为我解决此问题的方法是检查列表项（可能`<li>`是 OP 中的每个项），看看是什么样式使 div 认为每个列表项都比人眼可见的要大。

下面是一个在我的项目的列表项中检查图标上的恶意边距的示例： [![流氓保证金示例](../Images/e6d2a0c928f963e63c283961204c382a.png)](https://i.stack.imgur.com/tlyLD.png)

解决方案是将该图标的样式设置为具有 0 的垂直边距，尽管在我的应用程序中我只是将所有边距设为 0 并添加了一些 padding-right。

[![固定流氓保证金示例](../Images/1e633af4590b68667edb48e17ac84609.png)](https://i.stack.imgur.com/1Bcx9.png)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-07-02T21:52:42.183

我在使用 Bootstrap 和导航时也遇到了这个问题。发生这种情况是因为引导程序将导航选项卡中的 li 定义为：`.nav-tabs > li { margin-bottom:-1px; }`。为了解决这个问题，您还必须执行以下操作：

```
.nav-tabs > li:last-child {
   margin-bottom:0;
} 
```

* * *

如果不设置 last-child，以下示例将始终显示滚动，无论列表中有多少内容：

```
<ul class="navs nav-tabs nav-stacked" style="max-height:80px;overflow:auto;">
  <li></li>
  ...
</ul> 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-01-20T22:34:03.960

我今天早些时候遇到了这个错误。在我的情况下，子元素列表具有 display: inline-block 而不是 display: block。Switching to display: block for my list of child elements in the truncated div 为我解决了这个问题。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2021-01-27T10:27:33.020

就我而言，问题出在字体上。我们使用`font-family: Galano Grotesque`. 显然，这个字体被渲染得高于计算的高度。

```
<div>
    <p>some text</p>
</div> 
```

所以即使没有`max-height`，当内部`p`和外部`div`都被计算为`20px`高度时，仍然有一个滚动条（带有`overflow: auto`），因为字体`1px`比预期的要高。

所以解决方案可以是以下任何一种：

*   使用不同的字体。
*   添加`padding`到外部`div`. 这样它就足够大，可以覆盖来自字体的额外像素。就我而言，在底部添加一个像素，在顶部添加一个像素可以解决问题。
*   设置`line-height`为更大的值（在我的情况下，从`1.25`to `1.4`），所以它不会干扰字体。
*   设置`line-height`为，`normal`因为这样实际值将受字体影响。但是，[根据 Mozilla](https://developer.mozilla.org/en-US/docs/Web/CSS/line-height)的说法，这不是首选方式。

# c# - HTTPWebRequest 唤醒 WIFI？

> ID：10251373
> 
> 赞同：2
> 
> 时间：2012-04-20T18:15:29.167
> 
> 标签：c#, windows-phone-7, wifi, backgroundworker

我有一个相当简单的问题。

我们使用 BackgroundAgents( [Periodic agent](http://msdn.microsoft.com/en-us/library/hh202942%28v=vs.92%29.aspx) ) 来执行一些需要 WiFi(Internet) 连接才能执行[HttpWebRequest](http://msdn.microsoft.com/en-us/library/hh202962%28v=vs.92%29.aspx)的后台任务。正如第二个参考中提到的 HttpWebRequest 是受支持的，但问题是如果 Windows Phone 被锁定或空闲超过 1 分钟，WiFi 将被禁用。

根据我阅读并尝试知道的内容，我有两个重要问题：

1.  Microsoft 是否会根据预定义的时间间隔定期启用 WiFi 以检查新电子邮件或其他通知？如果答案是肯定的，我的后台代理是否会在此时间间隔内重新安排并运行？
2.  直到知道我发现 HttpWebRequest 在锁定或空闲超过 1 分钟时不会唤醒手机。是这样吗？很多人表示，如果手机被锁定或 1 分钟过去了，HttpWebRequest 可以正常工作。我无法做到这一点。

谢谢。

示例代码：

```
protected override void OnInvoke(ScheduledTask task)
    {            
        ScheduledActionService.LaunchForTest(task.Name, TimeSpan.FromSeconds(120));

        MakeHttpRequest("test");
    }
private void MakeHttpRequest(string position)
    {
        if (position != null)
        {
            var request = (HttpWebRequest)WebRequest.Create(
            new Uri("http://mydomain.com/Testing/Details/"+position));
            request.BeginGetResponse(r =>
            {
                var httpRequest = (HttpWebRequest)r.AsyncState;
                var httpResponse = (HttpWebResponse)httpRequest.EndGetResponse(r);

                using (var reader = new StreamReader(httpResponse.GetResponseStream()))
                {
                    var response = reader.ReadToEnd();

                    Deployment.Current.Dispatcher.BeginInvoke(new Action(() =>
                    {
                    }));
                }
            }, request);
        }
        this.NotifyComplete();
    } 
```

PS：请记住，当我在应用程序使用 USB 电缆连接到计算机时运行此代码时，一切运行正常。这就是为什么我认为后台工作人员存在问题，它不会唤醒手机+ WiFi 以执行 HttpWebRequest。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T21:41:02.780

根据我日常使用手机的经验，Windows Phone 在锁定后不会重新启用 wifi，除非手机已插入并充电。它还允许在禁用 wifi 之前已经开始完成的数据传输。

但是，即使手机尝试定期重新连接，每次用户重新连接时，某些 wifi 提供商都会重定向到身份验证页面进行身份验证，而 Windows Phone 无法处理这种情况。

实际上，当用户带着手机到处走动时，并不能保证您有可用的数据服务，因此处理问题应该是应用程序代码正常路径的一部分。

# c++ - 如何告诉 Boost.Test 在第一个失败的测试用例上停止？

> ID：10251375
> 
> 赞同：14
> 
> 时间：2012-04-20T18:15:35.280
> 
> 标签：c++, unit-testing, boost, boost-test

我在几个测试套件中订购了许多 Boost 测试用例。有的测试用例有一个，有的不止一个。

但是，在执行所有测试时，它们都会被执行——无论有多少失败或通过。我知道，我可以通过使用`BOOST_REQUIRE`而不是`BOOST_CHECK`. 但这不是我想要的。

在第一个测试用例失败后，如何告诉 Boost 停止整个执行？在运行时解决方案（即运行时参数）上，我更喜欢编译的解决方案（例如，使用全局夹具实现）。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-08T12:50:29.080

BOOST_REQUIRE 将停止测试套件中的当前测试用例，但继续其他测试用例。

当您要求“编译解决方案”时，我并没有真正看到您想要什么，但这是一个应该有效的技巧。我使用布尔值来检查整个测试套件的稳定性。如果它不稳定，即触发了 BOOST_REQUIRE，那么我将停止整个过程。

希望它可以帮助你。

```
//#include <...>

//FIXTURES ZONE
struct fixture
{
    fixture():x(0.0),y(0.0){}
    double x;
    double y;
};

//HELPERS ZONE
static bool test_suite_stable = true;

void in_strategy(bool & stable)
{
    if(stable)
        {
            stable = false;
        }
    else
        {
            exit();
        }
}

void out_strategy(bool & stable)
{
    if(!stable)
        {
            stable = true;
        }
}

BOOST_AUTO_TEST_SUITE(my_test_suite)

//TEST CASES ZONE
BOOST_FIXTURE_TEST_CASE(my_test_case, fixture)
{
    in_strategy(test_suite_stable);
    //...
    //BOOST_REQUIRE() -> triggered
    out_strategy(test_suite_stable);
}

BOOST_FIXTURE_TEST_CASE(another_test_case, fixture)
{
    in_strategy(test_suite_stable); //-> exit() since last triggered so stable = false
    //...
    //BOOST_REQUIRE()
    out_strategy(test_suite_stable);
}

BOOST_TEST_SUITE_END() 
```

贝努瓦。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-24T22:24:30.493

为什么不直接使用断言？您不仅可以立即中止整个程序，还可以在必要时查看堆栈。

# c - C：函数可以返回全局变量吗？

> ID：10251390
> 
> 赞同：0
> 
> 时间：2012-04-20T18:17:20.390
> 
> 标签：c, global-variables, return

假设我有一个 *.c 文件，其中包含一个全局变量（“全局”，因为它具有文件范围）和一个函数。该函数可以将该变量作为值返回以在其他翻译单元中使用吗？

我认为答案是“是的”。如果不出意外，我假设在 C 中 return 在“复制”语义下运行——返回表达式的值被返回。但我不确定。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-20T18:19:30.137

是的。你是对的：如果你返回类似 an 的东西`int`，那么你将返回它当前的副本。如果您返回一个指针，您将让他们访问变量本身。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-20T18:39:48.260

嗯，有这样的吗？

**交流**

```
int foo = 3;

int get_foo() { return foo; } 
```

**主程序**

```
#include <stdio.h>    
#include "a.c"

int main(void)
{
    printf("%d\n", get_foo());
    return 0;
} 
```

输出：

`3`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-20T18:46:23.853

如果我是迂腐的，我会说不。它可以返回一个全局变量的*值*。该值将是即时副本，而不是参考。也就是说当全局改变时，值不会改变。

除此之外，[出于各种原因](http://www.eetimes.com/discussion/break-point/4025723/A-pox-on-globals)，应首先避免使用全局变量。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-20T18:20:50.270

> 我认为答案是“是的”。如果不出意外，我假设在 C 中 return 在“复制”语义下运行——返回表达式的值被返回。但我不确定。

你是对的。

> 假设我有一个带有全局变量的 *.c 文件（“全局”，因为它具有文件范围）

请记住，在 .c 文件中全局声明变量会使其成为全局**period**。如果您希望它限制在文件范围内，请使用`static`修饰符。您仍然可以通过函数将值传递出去。

# python - 抑制python子进程调用中的输出

> ID：10251391
> 
> 赞同：45
> 
> 时间：2012-04-20T18:17:20.610
> 
> 标签：python, subprocess, stdout

对于以下命令：

```
subprocess.call(shlex.split(
            """/usr/local/itms/bin/iTMSTransporter -m lookupMetadata 
              -apple_id %s -destination %s"""%(self.apple_id, self.destination)) 
```

它将整个输出打印到终端窗口中。我将如何在这里抑制所有输出？我尝试做`subprocess.call(shlex.split(<command> > /dev/null 2&1`))，但它没有产生所需的结果。我该怎么做呢？

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2012-04-20T18:26:47.203

您可以使用`stdout=`and`stderr=`参数来`subprocess.call()`指向`stdout`或`stderr`指向您选择的文件描述符。所以也许是这样的：

```
import os

devnull = open(os.devnull, 'w')
subprocess.call(shlex.split(
    '/usr/local/itms/bin/iTMSTransporter -m lookupMetadata '
    '-apple_id %s -destination %s' % (self,apple_id, self.destination)),
  stdout=devnull, stderr=devnull) 
```

如果您不是从管道读取数据，则使用`subprocess.PIPE`，如果它生成大量输出，可能会导致您的程序阻塞。

**更新**

正如@yanlend 在评论中提到的那样，更新的（3.x）版本的 Python 包括`subprocess.DEVNULL`以更方便和可移植的方式解决这个问题。在这种情况下，代码将如下所示：

```
subprocess.call(shlex.split(
    '/usr/local/itms/bin/iTMSTransporter -m lookupMetadata '
    '-apple_id %s -destination %s' % (self,apple_id, self.destination)),
  stdout=subprocess.DEVNULL, stderr=subprocess.DEVNULL) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-20T18:25:31.093

对我有用`2>/dev/null`的是在命令末尾附加。

# xml - 您能否将节点从一个 XML 文档复制/导入到另一个？

> ID：10251392
> 
> 赞同：0
> 
> 时间：2012-04-20T18:17:23.723
> 
> 标签：xml, perl

我有两个格式如下的 XML 文档：

第一份文件：

```
<person> 
  <name>David</name> 
</person> 
```

第二份文件：

```
<person> 
  <name>David</name> 
  <hobby>Skating</hobby> 
</person> 
```

`<hobby>Skating</hobby>`如果第二个节点不存在，是否可以将第二个节点复制到第一个 XML 中？我正在使用 XML::SemanticDiff 来查找差异的 XPath，并使用 LibXML 将文本附加到在该节点中所做的更改：

```
for my $node ($root->findnodes($path_change)) { 
  $root->removeChildNodes(); 
  $node->appendText("This is a test"); 
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T19:32:01.803

```
my ($dst_person) = $dst_root->findnodes('//person');
my ($dst_hobby) = $dst_person->findnodes('hobby');
if (!$dst_hobby) {
   my ($src_hobby) = $src_root->findnodes('//person/hobby');
   $dst_person->appendChild( $src_hobby->clone(1) );
} 
```

# php - Mod_rewrite - 重写条件不起作用

> ID：10251395
> 
> 赞同：4
> 
> 时间：2012-04-20T18:17:47.187
> 
> 标签：php, .htaccess

我正在构建一个 php 框架，将所有流量重定向到 ROOT/public/index.php，然后将 url 放入获取请求中。我的问题是我的 RewriteConds 不工作并且正在接受文件和文件夹名。

**在根目录**

```
<IfModule mod_rewrite.c>

 RewriteEngine on
 RewriteRule    ^$    public/    [L]
 RewriteRule    (.*) public/$1    [L]

</IfModule>

<files .htaccess>

 order allow,deny
 deny from all

</files> 
```

**在公共目录中**

```
<IfModule mod_rewrite.c>

  RewriteEngine On

  RewriteCond %{REQUEST_FILENAME} !-f
  RewriteCond %{REQUEST_FILENAME} !-d
  RewriteRule ^(.*)$ index.php?url=$1 [PT,L]

</IfModule> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T09:31:33.270

该`[L]`标志告诉 Apache 在规则匹配后停止重定向。因此，假设您的 ROOT 文件夹首先出现，它将在重定向处运行并停止，这将使第二个重定向无用。

要解决此问题，请执行以下操作：

```
 RewriteEngine on
 RewriteRule    ^$    public/   
 RewriteRule    (.*) public/$1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T09:01:51.813

如果您想将现有文件和目录重定向到您的脚本：

在公共目录中

```
<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteRule ^(.*)$ index.php?url=$1 [PT,L]
</IfModule> 
```

我的 2 美分小费：取下`?url$1`零件，然后看看里面有什么`$_SERVER['REQUEST_URI']`。

# jquery - 如何在 jQuery Mobile 默认导航栏中有一个更大的中心底部导航栏按钮？

> ID：10251396
> 
> 赞同：0
> 
> 时间：2012-04-20T18:17:52.903
> 
> 标签：jquery, css, jquery-mobile

我将如何在 jQuery Mobile 网站的底部导航栏中制作一个更大的中心按钮？[这就是我想要的效果](http://dribbble.com/shots/454972-Analyzee-iPhone-UX-UI-2)。

需要什么 CSS 和 jQuery 才能让按钮与我的应用程序的主窗口重叠，而不会破坏我的导航栏？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T20:37:33.420

这应该可以让您很好地开始：

```
.ui-mobile .ui-page .ui-footer .ui-navbar .ui-btn.ui-btn-active {

    /*to make the active nav item stick-out we need to make it absolutely positioned*/
    position : absolute;

    /*this width is based on the number of nav items, 4 items means 25% for each*/
    width    : 25%;

    /*you can change this to however tall you want to make the active nav item*/
    height   : 50px;

    /*this places the active nav item at the same height as the rest of the nav items*/
    bottom   : -39px;

    /*normal nav items are z-index:10, so this will place the active one above the others*/
    z-index  : 11;

    /*this adds the top-left and top-right rounded corners*/
    -webkit-border-top-right-radius : 6px;
       -moz-border-top-right-radius : 6px;
            border-top-right-radius : 6px;
    -webkit-border-top-left-radius  : 6px;
       -moz-border-top-left-radius  : 6px;
            border-top-left-radius  : 6px;
    -webkit-background-clip : padding-box;
       -moz-background-clip : padding;
            background-clip : padding-box;

    /*this adds box shadow to the active nav item*/
    -webkit-box-shadow : 0 -1px 8px #000;
       -moz-box-shadow : 0 -1px 8px #000;
            box-shadow : 0 -1px 8px #000;
}

/*we need to override the default "overflow:hidden" for a couple elements so our active nav item doesn't get clipped*/
.ui-mobile .ui-page .ui-footer .ui-navbar,
.ui-mobile .ui-page .ui-footer .ui-navbar ul {
    overflow : visible;
}​ 
```

这是一个演示：http: [//jsfiddle.net/gNnDJ/](http://jsfiddle.net/gNnDJ/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T18:21:59.103

我不太确定导航栏的结构/CSS 是什么，但也许这会起作用：

```
z-index: 2 //This number must be higher than the z-index-number of the other navabar-element
bottom: 0px
//Depending on the normal size of your navbar.
width: x 
height: y 
```

# c# - MSChart X 轴日期

> ID：10251397
> 
> 赞同：1
> 
> 时间：2012-04-20T18:17:53.160
> 
> 标签：c#, .net, charts, mschart

我正在绘制一个简单的折线图，如下所示：

![在此处输入图像描述](../Images/6d67be084ca685c6c648d2cf40dfa5a1.png)

最近，一位客户要求更改图表上的间隔，以便每个数据点彼此相邻，并且它们之间没有日期。

例如，下图将有 6 个 x 值，它们都将均匀分布，并且具有相同的日期 3-8-12、3-24-12、4-4-12、4-13-12、4 -15-12,4-17-12。我们不在乎中间的日期。

如何在 MSChart 中执行此操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T20:07:52.620

尝试设置 `Series.IsXValueIndexed = true;`

[http://support2.dundas.com/Default.aspx?article=909](http://support2.dundas.com/Default.aspx?article=909)

# mysql - 删除表的子行

> ID：10251398
> 
> 赞同：0
> 
> 时间：2012-04-20T18:17:55.397
> 
> 标签：mysql, database

如果我有这个结构：

**表用户**

```
id_user
1
2 
```

**表列表**

```
id_lists    name_list   users_id_user
    1           Work              1
    2           work              2 
```

**list_has_users**

```
users_id_user   lists_id_lists
    1                      2
    2                      1 
```

我想要的是，删除时`id_lists`，我还想删除该列表中的所有用户`list_has_users`

例如，如果我删除`id_lists 1`，`lists_id_lists 1`也应该删除。

目前我得到：`Cannot delete or update a parent row`

如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T18:41:51.303

似乎您`FOREIGN KEY`定义了一个约束，该约束强制引用完整性，并禁止您在存在子行时删除父行。修改您的外键以包含`ON DELETE CASCADE`强制删除子行。

`DESCRIBE lists_has_users`如果您不知道，请使用它来获取 FK 的符号。

```
ALTER TABLE lists_has_users DROP FOREIGN KEY `key_symbol`;
ALTER TABLE lists_has_users ADD FOREIGN KEY (lists_id_lists) REFERENCES lists (id_lists) ON DELETE CASCADE 
```

您可能还想添加`ON UPDATE CASCADE`，以便`lists_has_users`在 id 更改时行`lists`更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T18:21:01.427

在删除之前，`lists`您必须删除，`lists_has_users`因为您似乎启用了完整性检查。

# java - 使用正则表达式android的HTML代码搜索

> ID：10251401
> 
> 赞同：1
> 
> 时间：2012-04-20T18:18:22.553
> 
> 标签：java, android, html, regex, search

一段时间以来，我一直在尝试为网站制作应用程序。起初我使用 webview，但现在我正在使用按钮、textview 等创建自己的应用程序外观......

每当对网站数据库进行查询时，我都会发布到网站并获取内容（将 html 代码加载到 textview 和 webview 中），如下面的演示应用图片所示。

我使用了 HttpPost 和 HttpResponse，一切正常。现在，剩下的部分是我想用 html 代码搜索字符串，只获取下图中 webview 中看起来像中间部分的部分，即中间的表格，其中包含主要内容。

该站点完全使用表格编写。我想要的部分有这个结构。

```
<td id="main_content" class="text"> 
    <table>
        <tr>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
        </tr>
        <tr>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
        </tr>
            .
            .
            .
            depending on results
    </table> 
</td> 
```

我知道我可以使用 JSON 和 php 脚本来发布和获取结果，但问题是我无法访问网页或服务器。在这种情况下使用什么正则表达式，因为我无法让它工作。我只有正则表达式搜索的基本知识。谢谢你。

[应用演示图片](http://i.stack.imgur.com/zalZj.jpg)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T18:43:39.653

考虑改用 JSoup：[Android JSoup Example](https://stackoverflow.com/questions/5173538/android-jsoup-example)。正如另一位评论者所指出的，RegEx 并不是真正适合解析 HTML 的工具。

# jquery - 访问外部 jQuery 和 CSS 文件

> ID：10251402
> 
> 赞同：1
> 
> 时间：2012-04-20T18:18:24.367
> 
> 标签：jquery, css

我正在尝试访问 2 个外部 CSS 文件和一个 JS(jQuery) 文件。我正在将它们添加到我的网站，如下所示：

```
<link rel="stylesheet" href="http://www.externalsite.com/css/style.css" type="text/css" /> 
```

和

```
<script src="http://www.externalsite.com/js/jquery.easing.1.3.js"></script>
<script src="http://www.externalsite.com/js/default.js"></script> 
```

在 default.js 中，有一些 jQuery 可以控制我的菜单的下拉菜单。下拉菜单不会出现。当我查看源代码时，HTML 代码是正确的。

我是否正确链接到他的文件？任何想法为什么我没有看到我的下拉菜单？

编辑：

如果这很重要，我正在从 HTTPS 站点链接到 HTTP 站点。

编辑2：

JSFiddle 添加：http: [//jsfiddle.net/tvZUG/](http://jsfiddle.net/tvZUG/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T19:08:42.650

> 如果这很重要，我正在从 HTTPS 站点链接到 HTTP 站点。

是的，这很重要。安全页面需要安全资源。

如果外部站点支持 https，则无需定义协议即可获得它：

```
<script type="text/javascript" src="//www.externalsite.com/js/default.js"></script> 
```

还有[一个类似的问题](https://stackoverflow.com/q/1056497/1333941)。也看看它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T18:22:54.437

尝试在脚本中添加一个类型，类似这样。

```
<script type="javascript/text" src="http://www.externalsite.com/js/default.js"></script> 
```

你的css有什么问题吗？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-20T18:24:07.650

也许你忘了导入 jQuery？我只能看到插件的代码...

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-20T19:09:12.927

我认为问题可能是 https 可能不允许您从外部源执行 javascript 文件，您可以将文件存储在服务器上并调用它们。

# php - mysql_query 没有正确插入行

> ID：10251404
> 
> 赞同：1
> 
> 时间：2012-04-20T18:18:31.683
> 
> 标签：php, mysql, database

我有这个 SQL：

```
INSERT INTO v3_peers 
                    (torrent, peer_id, ip, ipv6, port, smoke_ip, uploaded, downloaded, up_ofset, down_ofset, remaining, started, last_action, connectable, userid, agent) 
                    VALUES 
                    ('13471', '-UT2200-ĂZŤjśŻl‰şđ^', '69.64.147.243', '2001:0:5ef5:79fd:14e6:7214:2a5f:5811', '58262', '', '0', '0', '0', '0', '0', '1334945327', '1334945327', 'yes', '1', 'Mozilla/5.0 (Windows NT 6.1) AppleWebKit/535.19 (KHTML, like Gecko) Chrome/18.0.1025.162 Safari/535.19') 
```

当它在脚本中执行时，它被保存到 db，但 peer_id 只是“-UT2200-”，浏览器给我对话框来保存文件，名称为 sript，内容应该以纯文本/文本的 php 输出形式返回

当我通过 phpmyadmin 将其插入数据库时​​，一切正常。

peer_id 具有数据类型 varchar(255)

有什么想法有什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T18:37:02.503

您应该以安全的方式将变量传递到查询中。重新编写脚本和查询，以便通过转义变量传递。例如：

```
$peer_id = mysql_real_escape_string('-UT2200-ĂZŤjśŻl‰şđ^');
$query = 'INSERT INTO `v3_peers` (`peer_id`) VALUES ("' . $peer_id . '")';
$result = mysql_query($query); 
```

这样可以确保变量不会影响查询结构。

此外，正如@tereško 提到的，尝试 PDO。您的查询看起来会被频繁使用，因此 PDO 及其准备好的语句可能会派上用场。我最近向某人解释过：[PDO 准备语句来存储 html 内容](https://stackoverflow.com/questions/10217402/pdo-prepared-statements-to-store-html-content/10224304#10224304)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T18:21:05.243

我相信 MySQL 不允许特殊字符

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T18:28:56.853

也许尝试一下`utf8_decode()`

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-04-23T16:47:34.853

好的，我发现了错误。当我比较插入到数据库中的数据和来自 SQL 中 $peer_id=$_GET[peer_id] 变量的实际数据时，例如：

```
WHERE peer_id LIKE '".$peer_id."' 
```

然后我收到错误，因为 db 中的 peer_id 不像 peer_id，但是当我使用

```
WHERE peer_id = '".$peer_id."' 
```

它完美地工作。列 peer_id 的编码必须设置为 utf8-unicode-ci 而不是 utf8-general-ci！！

因此，编码没有错误（我在问题中所写的 phpmyadmin 中缺少的字符并不是真正丢失，而是由于编码而隐藏）但错误在其他脚本中。

谢谢大家的时间。我希望这对将来的人有所帮助。

# android - Android ImageView中图像右侧的反射

> ID：10251406
> 
> 赞同：0
> 
> 时间：2012-04-20T18:18:34.677
> 
> 标签：android, image, reflection, imageview, paint

我有一张图片，我想在 Android 应用程序中反映该图片，下面是源代码。我找到了一个示例代码

```
 ImageView imageView = (ImageView) findViewById(R.id.image1);                
      imageView.setImageResource(imageIDs[position]);

    //The gap we want between the reflection and the original image
      final int reflectionGap = 4;

      //Get you bit map from drawable folder
      Bitmap originalImage = BitmapFactory.decodeResource(getResources(), 
              imageIDs[position]);

      int width = originalImage.getWidth();
      int height = originalImage.getHeight();

      //This will not scale but will flip on the Y axis
      Matrix matrix = new Matrix();
      matrix.preScale(1, -1);

      //Create a Bitmap with the flip matix applied to it.
      //We only want the bottom half of the image
      Bitmap reflectionImage ;
      if(isVertical)
          reflectionImage= Bitmap.createBitmap(originalImage, 0, height/2, width, height/2, matrix, false);
      else
          reflectionImage= Bitmap.createBitmap(originalImage, width/2, 0, width/2, height, matrix, false);

      //Create a new bitmap with same width but taller to fit reflection
      Bitmap bitmapWithReflection;
      if(isVertical)
          bitmapWithReflection = Bitmap.createBitmap(width 
        , (height + height/2), Config.ARGB_8888);
      else
          bitmapWithReflection = Bitmap.createBitmap(width +width/2
                    , height, Config.ARGB_8888);

     //Create a new Canvas with the bitmap that's big enough for
     //the image plus gap plus reflection
     Canvas canvas = new Canvas(bitmapWithReflection);
     //Draw in the original image
     canvas.drawBitmap(originalImage, 0, 0, null);
     //Draw in the gap
     Paint deafaultPaint = new Paint();
     if(isVertical)
     canvas.drawRect(0, height, width, height + reflectionGap, deafaultPaint);
     else
         canvas.drawRect(width, 0, width+reflectionGap, height, deafaultPaint);
     //Draw in the reflection
     if(isVertical)
     canvas.drawBitmap(reflectionImage,0, height + reflectionGap, null);
     else
         canvas.drawBitmap(reflectionImage,width + reflectionGap,0 , null);

     //Create a shader that is a linear gradient that covers the reflection
     Paint paint = new Paint(); 
     LinearGradient shader;
     if(isVertical)
     shader = new LinearGradient(0, originalImage.getHeight(), 0, 
       bitmapWithReflection.getHeight() + reflectionGap, 0x70ffffff, 0x00ffffff, 
       TileMode.CLAMP); 
     else
         shader = new LinearGradient(originalImage.getWidth(),0,  
                   bitmapWithReflection.getWidth() + reflectionGap,0,  0x70ffffff, 0x00ffffff,
                   TileMode.CLAMP); 
     //Set the paint to use this shader (linear gradient)
     paint.setShader(shader); 
     //Set the Transfer mode to be porter duff and destination in
     paint.setXfermode(new PorterDuffXfermode(Mode.DST_IN));
     //Draw a rectangle using the paint with our linear gradient
     if(isVertical)
     canvas.drawRect(0, height, width, 
       bitmapWithReflection.getHeight() + reflectionGap, paint); 
     else
         canvas.drawRect(width, 0, bitmapWithReflection.getWidth() + reflectionGap, 
                   height, paint); 

     //Create an Image view and add our bitmap with reflection to it
     //ImageView imageView = new ImageView(this);
     imageView.setImageBitmap(bitmapWithReflection);` 
```

当我在图像底部给出 isVertical 值 = true 时，此示例可以正常工作，但我也想在图像右侧使用反射效果，因为我认为它在横向模式下会更好。但它不像我想要的那样工作。它显示反射侧上下颠倒。我的错误是什么？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T18:48:43.183

你的矩阵必须改变：

```
if (isVertical) {
  matrix.preScale(1, -1);
  reflectionImage= Bitmap.createBitmap(originalImage, 0, height/2, width, height/2, matrix, false);
}
else {
  matrix.preScale(-1, 1);
  reflectionImage= Bitmap.createBitmap(originalImage, width/2, 0, width/2, height, matrix, false);

} 
```

# java - 想要Android中的程序方法

> ID：10251408
> 
> 赞同：0
> 
> 时间：2012-04-20T18:18:42.250
> 
> 标签：java, android, multithreading

我希望主要活动在执行对话框时等待。我尝试`this.wait();`了主要活动，但它给出了例外。这都是我的想法，所以我在这里寻求帮助:)。提前感谢您的任何帮助将不胜感激

```
public class MyDailogTestActivity extends Activity {
    /** Called when the activity is first created. */
    String Xvalue,Yvalue;
    TextView TextViewString;    
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        Button ShowDialog = (Button) findViewById(R.id.ShowDialog);
        TextViewString = (TextView) findViewById(R.id.ShowDialogText);      
        ShowDialog.setOnClickListener(new OnClickListener(){
            public void onClick(View arg0) {
                // TODO Auto-generated method stub
                Dialog MyDialog = MyDailog();
                MyDialog.show();
                // I WANT THIS TO EXECUTE AFTER BELOW MENTIONED CODE
                TextViewString.setText(Xvalue + Yvalue);
            }

        });
    }

    private Dialog MyDailog(){
        LayoutInflater factory = LayoutInflater.from(this);
        final View textEntryView = factory.inflate(R.layout.my_dialog, null);
        return new AlertDialog.Builder(MyDailogTestActivity.this)
        .setTitle("Enter Value")
        .setView(textEntryView)
        .setPositiveButton("Oky", new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialog, int whichButton) {
                // THIS TO BE EXECUTE FIRST       
                Xvalue = "This ";
                Yvalue = "and That";                
                /* User clicked OK so do some stuff */
            }
        })
        .setNegativeButton("Cancel", new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialog, int whichButton) {
                /* User clicked cancel so do some stuff */
            }
        })
        .create();        
    }

} 
```

这是该项目在执行时的图像

[http://imageshack.us/photo/my-images/220/11696639.jpg/](http://imageshack.us/photo/my-images/220/11696639.jpg/) 在这张图片中你可以看到 Hello World 没有改变。我试图反映 hello world TextView 的变化。

[http://imageshack.us/photo/my-images/338/27833231.jpg/](http://imageshack.us/photo/my-images/338/27833231.jpg/) 现在在这张图片中。当我点击显示对话框时，它继续执行下一个代码`TextViewString.setText(Xvalue + Yvalue);` ，其中显示值为 null 现在我希望它等待对话框完成代码，其中 Xvalue 和 Yvalue 将通过此代码具有值“This n That”

```
Xvalue = "This ";
Yvalue = "and That"; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T18:34:55.240

移动这一行：

```
TextViewString.setText(Xvalue + Yvalue); 
```

到您的积极按钮单击侦听器，如下所示：

```
public void onClick(DialogInterface dialog, int whichButton) {
    // THIS TO BE EXECUTE FIRST    
    Xvalue = "This ";
    Yvalue = "and That";                
    /* User clicked OK so do some stuff */
    TextViewString.setText(Xvalue + Yvalue);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T18:49:25.403

我不确定你是否能做你想做的事，但我可以建议一个认为是标准的替代方案。创建该类型的侦听器`DialogInterface.OnDismissListener`，然后使用`setOnDismissListener()`. 当您关闭对话框时，将调用此侦听器。

否则，如果您没有任何繁重的逻辑，则可以像 Tim 建议的那样直接将其放入对话框中。

# asp.net - 动态 HtmlSelect 选项不回发

> ID：10251412
> 
> 赞同：0
> 
> 时间：2012-04-20T18:18:48.770
> 
> 标签：asp.net

我有级联下拉菜单（国家/省/城市）。当页面回发时，我失去了省和市的选定选项。国家选项是通过 .net 代码加载的，但省和城市选项是通过 javascript 填充的。

我认为这与视图状态有关，但不能完全理解为什么所选值没有回发。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T18:27:19.153

使用 JavaScript 添加到下拉（html 选择）列表的选项将不起作用。这是修改 DOM 客户端中的值，而不是来自服务器的 ViewState。

这篇文章应该用详细的解释来回答这一切。 [javascript 添加到 <select> 的选项在回发中丢失](https://stackoverflow.com/questions/1271172/options-added-to-select-by-javascript-lost-in-postback)

您可以尝试使用 Javascript 和 JQuery 的组合在 Javascript 中动态添加和删除选定的选项，但它可能会变得混乱且速度很快。

```
 function setSelectedValue(value) {
        var x = document.getElementById("yourDivId").selectedIndex;
        var y = document.getElementById("yourDivId").options;

        $('#yourDivId option').each(function () {
            if ($(this).attr('selected')) {
                $(this).removeAttr('selected');
            }
        });

        y[x].setAttribute('selected', 'selected');
    } 
```

# mod-rewrite - 消除原始链接的内部 URL 重写 (SEO)

> ID：10251413
> 
> 赞同：0
> 
> 时间：2012-04-20T18:18:51.507
> 
> 标签：mod-rewrite, url-rewriting, seo

我的网站是用 php 构建的，我对 URL 进行了重写，以使 .php 链接对 SEO 更友好：

```
RewriteRule ^page-one$ /pageone.php [L] 
```

这样做的问题是，包括 Google bot 在内的某些人仍然可以看到之前被索引时的 pageone.php。所以我最终每个页面都有两个链接。那很糟。

如何设置它以便我获得重写到第一页的好处，同时以某种方式确保对 pageone.php 的外部请求被重定向到第一页？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T18:28:30.040

将 page-one.php 重定向到 pageone 怎么样？

```
RewriteRule ^page-one.php$ /pageone [R=301,NC,L] 
```

# android - 谷歌音乐/画廊挑选我的应用制作的视频

> ID：10251417
> 
> 赞同：0
> 
> 时间：2012-04-20T18:19:14.753
> 
> 标签：android

这是我将媒体保存到的目录：

```
Environment.getExternalStorageDirectory() + "/MyAppDir/"; 
```

媒体（它们是视频文件）正在被谷歌音乐和画廊收录。奇怪的是，只有少数文件被拾取。我怎样才能防止这种情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T18:25:29.750

您可以在该文件夹中放置一个文件名*“.nomedia”*。这将告诉 Android 不要在图库中显示它的内容。

您还可以使用以点“。”开头的文件夹名称。但这也会对浏览其文件系统的用户隐藏它，并且可能不是您想要的。

# javascript - SQL 插入语句在 Javascript 中不起作用

> ID：10251419
> 
> 赞同：1
> 
> 时间：2012-04-20T18:19:21.397
> 
> 标签：javascript, sql, json, html, web-sql

我正在尝试使用 JSON 数组填充我的 WebSQL 数据库（调用对象，调用`myJSONObject`数组`costcodes`）。

函数点击运行，数据库创建成功，但是数据没有插入到数据库中。它甚至不会抛出错误，它只是什么都不做。

我最初的想法是数据没有正确转义，但我不知道确切的位置/如何转义它。所以我很难过。

```
 localDB = null;

    function initDB()
    {
        if (localDB==null)
        {
            var shortName = 'Costcode';
            var version = '1.0';
            var displayName = 'Costcode';
            var maxSize = 217802; // in bytes
            localDB = window.openDatabase(shortName, version, displayName, maxSize);
        }

    }
            function buildTable()
    {
       var sQuery = 'CREATE TABLE IF NOT EXISTS Costcode ('+
                    'id INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,' +
                    'cost_code_no VARCHAR NULL,' +
                    'row_unique_no VARCHAR NULL,' +
                    'cost_class_no VARCHAR NULL,' +
                    'Table_Version VARCHAR DEFAULT "1.0");';
        try
        {
            initDB();
            localDB.transaction(function(transaction)
            {
                transaction.executeSql(sQuery, []);
                console.log('sucess');
            });
        }
        catch (e)
        {
           alert("Error: Unable to create table 'x" + "' " + e + ".");
           return;
       }    
    }

 function exeSQLFast()
    {

                initDB();
                localDB.transaction(function(transaction)
                {
                    for (var x = 0; x <myJSONObject.costcodes.length; x++)
                    {

                        var costcodeno = myJSONObject.costcodes[x].cost_code_no;
                        var rowuniqueid = myJSONObject.costcodes[x].row_unique_id;
                        var costclassno = myJSONObject.costcodes[x].cost_class_no;
                        console.log(costcodeno);
                        console.log(rowuniqueid); 
                        console.log(costclassno);
                    transaction.executeSql('INSERT INTO Costcode (cost_code_no, row_unique_id, cost_class_no) VALUES (? , ? , ?)',
                     [costcodeno,
                     rowuniqueid,
                     costclassno]
                     , function(transaction, results)
                        {
                            console.log(costcodeno);
                            console.log('hooray');
                        }

                    )};
                    }
            )}

</script>
</head>

<body onLoad="buildTable();">
<input type="button" onClick="exeSQLFast();" value='button'>
</body>
</html> 
```

控制台日志显示所有变量都被正确定义，但它没有运行插入语句。有任何想法吗？

这是一个例子`myJSONObject.costcodes[2]`

```
cost_class_no: "    3"
cost_code_no: "      1000"
row_unique_id: 335 
```

好像有问题不是吗...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T19:08:13.093

> 问题是我在插入语句中调用了 row_unique_no 列 row_unique_id。现在我觉得自己很愚蠢。
> 
> 但是，如果有人对如何正确填充 WebSQL 数据库感到好奇，那么您就是这样做的。只是不要输入错误的列名。

# ruby-on-rails - HAML - 不确定为什么会发生编译错误

> ID：10251424
> 
> 赞同：0
> 
> 时间：2012-04-20T18:19:44.910
> 
> 标签：ruby-on-rails, ruby, haml

我有这个 HAML

```
-content_for :primary_content do
  #available-disclosures-container
    .message-container.information-container
      %h3=(t "headings.influencers.disclosures.new")
      %p=raw((t "influencers.instructions.disclosures.new"))
    =render "sidebar/disclosures/list", :disclosures => Disclosure.basics, :show_link => true, :selectable => true, :usable => false

  #disclosure-form-container{:style => "display:none;"}
    = form_for([:sidebar,@disclosure], :html => {:id => "disclosure-form", :remote => true}) do |f| 
```

我不知道为什么，但最后一行：

```
= form_for([:sidebar,@disclosure], :html => {:id => "disclosure-form", :remote => true}) do |f| 
```

导致此错误：

```
undefined method `model_name' for NilClass:Class 
```

和

```
6:     =render "sidebar/disclosures/list", :disclosures => Disclosure.basics, :show_link => true, :selectable => true, :usable => false
7: 
8:   #disclosure-form-container{:style => "display:none;"}
9:     = form_for([:sidebar,@disclosure], :html => {:id => "disclosure-form", :remote => true}) do |f|
10:       %p
11:         =f.label :display_as, (t :select_disclosure_type)
12:         =f.select :display_as, options_from_collection_for_select(Disclosure.basics, :display_as, :name, f.object.display_as) 
```

知道是什么元素导致了这个问题吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T18:26:20.617

这看起来不对：

```
= form_for([:sidebar, @disclosure]) do |f| 
```

看起来您正在尝试使用侧边栏符号生成路线，该符号需要是公开所属的模型的实例才能工作。

很难确定，但也许这就是你要找的：

```
= form_for(@disclosure), :url => [:sidebar, @disclosure] do |f| 
```

# android - findViewById 导致崩溃。为什么？

> ID：10251428
> 
> 赞同：0
> 
> 时间：2012-04-20T18:20:02.843
> 
> 标签：android

我正在尝试实现一个显示相机预览并包含两个按钮的活动。获取相机预览没有问题，但是当我尝试 findViewById 按钮对象时，应用程序将崩溃。不知道为什么会这样。

```
package com.capstone.parking.nyc;

import java.io.IOException;
import android.app.Activity;
import android.content.Context;
import android.content.Intent;
import android.os.Bundle;
import android.util.Log;
import android.view.SurfaceView;
import android.view.SurfaceHolder;
import android.view.View;
import android.view.View.OnClickListener;
import android.view.Window;
import android.widget.Button;
import android.graphics.PixelFormat    ;
import android.hardware.Camera;
import android.hardware.Sensor;
import android.hardware.SensorManager;

public class MainScreen extends Activity implements SurfaceHolder.Callback 
{
Camera theCamera;
SurfaceView surfaceView;
SurfaceHolder surfaceHolder;
boolean preview = false;

private SensorManager mSensorManager; 
private ShakeListener mSensorListener;

@Override
public void onCreate(Bundle savedInstanceState) 
{
    final Button TagBttn;
    final Button ParkBttn;
    super.onCreate(savedInstanceState);
    requestWindowFeature(Window.FEATURE_NO_TITLE);
    getWindow().setFormat(PixelFormat.UNKNOWN);
    setContentView(R.layout.mainscreen);

         /*
          *
          * This line causes the crash
          */
    TagBttn = (Button) findViewById(R.id.tag);
//      ParkBttn = (Button)findViewById(R.id.park);

    surfaceView = (SurfaceView) findViewById(R.id.camera);
    surfaceHolder = surfaceView.getHolder();
    surfaceHolder.addCallback(this);
    surfaceHolder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);

    mSensorListener = new ShakeListener();
    mSensorManager = (SensorManager) getSystemService(Context.SENSOR_SERVICE);
    mSensorManager.registerListener(mSensorListener,
            mSensorManager.getDefaultSensor(Sensor.TYPE_ACCELEROMETER),
            SensorManager.SENSOR_DELAY_UI);     

    Log.d("TAG", "onCreate MainScreen");

    mSensorListener.setOnShakeListener(new ShakeListener.OnShakeListener()
    {
          public void onShake()
          {
              Log.d("SHAKE CHECK", "YUSSSSSS");
            // if shaken, go to the search screen 
              startActivity(new Intent("com.capstone.parking.SEARCH")); 
          }
    });

/*  Tag.setOnClickListener(new OnClickListener()
    {
        public void onClick(View v)
        {
            /*
             * 
             *      ENTER TAG CODE HERE
             *                          
             *
            Log.d("TAG", "tag button pressed");
        }
    });
/*  

/*  Park.setOnClickListener(new OnClickListener()
    {
        public void onClick(View v)
        {
            /*
             * 
             *      ENTER PARK CODE HERE
             * 
             *
            Log.e("TAG", "park button pressed");
        }
    });
*/  

}

@Override
public void onResume()
{
    super.onResume();
    mSensorManager.registerListener(mSensorListener,
            mSensorManager.getDefaultSensor(Sensor.TYPE_ACCELEROMETER),
            SensorManager.SENSOR_DELAY_UI);
}

@Override
public void onStop()
{
   mSensorManager.unregisterListener(mSensorListener);
   super.onStop();
}

public void surfaceCreated(SurfaceHolder holder) 
{
    Log.e("TAG", "surfaceCreated");
    theCamera = Camera.open();
    try 
    {
        theCamera.setPreviewDisplay(holder);
    } 
    catch (IOException e) 
    {
        Log.e("TAG", "surfaceCreated FAIL");
    }
    theCamera.startPreview();
    preview = true;
}

public void surfaceChanged(SurfaceHolder holder, int format, int width, int height) 
{
    Log.e("TAG", "surfaceChanged");
    if(preview)
    {
        theCamera.stopPreview();
    }
    Camera.Parameters parameters = theCamera.getParameters();
    parameters.setPreviewSize(width, height);
//  parameters.set("orientation", "portrait");
//  parameters.set("rotation", "90");
    theCamera.setParameters(parameters);
    theCamera.startPreview();
}

public void surfaceDestroyed(SurfaceHolder holder) 
{
    if(preview)
    {
        Log.e("TAG", "surfaceDestroyed");
        theCamera.stopPreview();
        theCamera.release();
        theCamera = null;
        preview = false;
    }
} 

} 
```

如果有人能引导我朝着正确的方向前进，我将不胜感激。谢谢！

主屏幕.xml

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/background"
android:orientation="vertical"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:background="#006699" >

<TextView
    android:id="@+id/scroll"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:ellipsize="marquee"
    android:focusable="true"
    android:focusableInTouchMode="true"
    android:marqueeRepeatLimit="marquee_forever"
    android:scrollHorizontally="true"
    android:singleLine="true"
    android:text="@string/shake"
    android:textColor="#ffff66"
    android:textStyle="bold" />

<SurfaceView
   android:id="@+id/camera"
   android:layout_width="fill_parent"
   android:layout_height="wrap_content"
   android:layout_marginTop="25dp"
   android:layout_marginBottom="125dp"
   android:layout_marginLeft="20dp"
   android:layout_marginRight="20dp" >
</SurfaceView>

<ImageButton
   android:id="@+id/tag"
   android:layout_width="wrap_content"
   android:layout_height="wrap_content"
   android:layout_alignParentBottom="true"
   android:layout_alignParentRight="true"
   android:layout_marginRight="25dp"
   android:layout_marginBottom="50dp"
   android:contentDescription="@string/desc"
   android:background="@drawable/tagbuttonselect"
   android:clickable="true" />

<ImageButton
   android:id="@+id/park"
   android:layout_width="wrap_content"
   android:layout_height="wrap_content"
   android:layout_alignParentBottom="true"
   android:layout_alignParentLeft="true"
   android:layout_marginLeft="25dp"
   android:layout_marginBottom="50dp"
   android:contentDescription="@string/desc"
   android:background="@drawable/parkbuttonselect"
   android:clickable="true" />
 </RelativeLayout> 
```

编辑**

哇哦。我是慢热型。我刚刚想通了。我使用的是 Button 而不是 ImageButton。SMH 对不起，伙计们。哈哈

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-20T18:31:08.007

尝试更改`TagBttn = (Button) findViewById(R.id.tag);`为`TagBttn = (ImageButton) findViewById(R.id.tag);`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-20T18:21:09.597

可能是您试图查找 id 不在**mainscreen.xml中**

这里的标签是一个 ImageButton 没有 simole Button 试试这个

```
TagBttn = (ImageButton) findViewById(R.id.tag); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-20T18:32:47.777

您的标签项目是一个 ImageButton 并且您正在将其转换为一个 Button。更改。ImageButton 和 Button 是非常不同的类。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-20T18:33:02.387

不管它听起来多么令人困惑，事实证明它[`ImageButton`](http://developer.android.com/reference/android/widget/ImageButton.html)不是`Button`. 因此，您希望将代码替换为：

```
final ImageButton TagBttn;
final ImageButton ParkBttn; 
```

然后使用：

```
TagBttn = (ImageButton) findViewById(R.id.tag);
ParkBttn = (ImageButton) findViewById(R.id.park); 
```

# c# - 声明变量更接近它的定义位置？C# IL代码不一样

> ID：10251432
> 
> 赞同：1
> 
> 时间：2012-04-20T18:20:18.210
> 
> 标签：c#, variables, optimization

在 C# 中，我想知道我们是否应该将 varbile 声明为更接近它的使用位置，是的，有多个问题问同一个问题。但是我还是有疑问！

我试过这样的示例代码：

```
private void button1_Click(object sender, EventArgs e)
{
    for(int i= 0; i<=1000; i++)
    {
        int myVariable = 12;
        myVariable = i;
    }
} 
```

另一次我移动了 int myVariable = 12; 的代码行 在 for 循环之前。这些是我在 ILDASM 中得到的，previsouds 问题和答案说 C# 创建了相同的代码，但在这里我们看到的不是真的！那么发生了什么？最后，这是一个好习惯吗？- 使用 C# 编译器 -

**内部变量：**

```
.method private hidebysig instance void  button1_Click(object sender,
                                                       class [mscorlib]System.EventArgs e) cil managed
{
  // Code size       32 (0x20)
  .maxstack  2
  .locals init ([0] int32 i,
           [1] int32 myVariable,
           [2] bool CS$4$0000)
  IL_0000:  nop
  IL_0001:  ldc.i4.0
  IL_0002:  stloc.0
  IL_0003:  br.s       IL_0010
  IL_0005:  nop
  IL_0006:  ldc.i4.s   12
  IL_0008:  stloc.1
  IL_0009:  ldloc.0
  IL_000a:  stloc.1
  IL_000b:  nop
  IL_000c:  ldloc.0
  IL_000d:  ldc.i4.1
  IL_000e:  add
  IL_000f:  stloc.0
  IL_0010:  ldloc.0
  IL_0011:  ldc.i4     0x3e8
  IL_0016:  cgt
  IL_0018:  ldc.i4.0
  IL_0019:  ceq
  IL_001b:  stloc.2
  IL_001c:  ldloc.2
  IL_001d:  brtrue.s   IL_0005
  IL_001f:  ret
} / 
```

/ 方法 Form1::button1_Click 结束

**for 循环外的变量：**

```
.method private hidebysig instance void  button1_Click(object sender,
                                                       class [mscorlib]System.EventArgs e) cil managed
{
  // Code size       32 (0x20)
  .maxstack  2
  .locals init ([0] int32 myVariable,
           [1] int32 i,
           [2] bool CS$4$0000)
  IL_0000:  nop
  IL_0001:  ldc.i4.s   12
  IL_0003:  stloc.0
  IL_0004:  ldc.i4.0
  IL_0005:  stloc.1
  IL_0006:  br.s       IL_0010
  IL_0008:  nop
  IL_0009:  ldloc.1
  IL_000a:  stloc.0
  IL_000b:  nop
  IL_000c:  ldloc.1
  IL_000d:  ldc.i4.1
  IL_000e:  add
  IL_000f:  stloc.1
  IL_0010:  ldloc.1
  IL_0011:  ldc.i4     0x3e8
  IL_0016:  cgt
  IL_0018:  ldc.i4.0
  IL_0019:  ceq
  IL_001b:  stloc.2
  IL_001c:  ldloc.2
  IL_001d:  brtrue.s   IL_0008
  IL_001f:  ret
} // end of method Form1::button1_Click 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T18:23:12.803

好的做法完全**取决于**您的*需求*！如果你需要一个不同的变量，循环的每次迭代，你在循环内创建它，否则你应该把它放在外面。

# pattern-matching - 分析多个故障转储中的模式

> ID：10251433
> 
> 赞同：1
> 
> 时间：2012-04-20T18:20:24.483
> 
> 标签：pattern-matching, stack-trace

我从我维护的应用程序中看到了很多故障转储。我工作的设施在世界各地有数百名使用此工具的用户，因此有大量的故障转储。这些转储的签名如下所示：

```
QObject::event(QEvent*)
QidleTimer::event(QEvent*)
QApplicationPrivate::notify_helper(QObject*, QEvent*)
QApplication::notify(QObject*, QEvent*)
QmayaApplication::notify(QObject*, QEvent*)
QCoreApplication::notifyInternal(QObject*, QEvent*)
g_main_context_dispatch
g_main_context_iteration
QEventDispatcherGlib::processEvents(QFlags<QEventLoop::ProcessEventsFlag>)
QEventLoop::processEvents(QFlags<QEventLoop::ProcessEventsFlag>)
QEventLoop::exec(QFlags<QEventLoop::ProcessEventsFlag>)
QCoreApplication::exec()
__libc_start_main 
```

类名和签名是多种多样的（有些已被编辑）。我想做的是编写一个工具来分析这些痕迹以找出崩溃中的模式。我想知道，如果你知道我可以用来分析这样的输入的任何技术。

感谢您的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T18:07:59.000

[本书](https://rads.stackoverflow.com/amzn/click/com/0955832802)的第 3 部分有一个关于*故障转储分析模式*的部分，但它们是面向 Windows 操作系统的。作者还有一个[带有分析模式标签的博客](http://www.dumpanalysis.org/blog/index.php/category/crash-dump-patterns/)。这不是对这本书的认可（我不拥有它）。

# c# - 存储和检索 +2000 列表项的正确方法 Sharepojnt 2007

> ID：10251436
> 
> 赞同：2
> 
> 时间：2012-04-20T18:20:28.810
> 
> 标签：c#, performance, sharepoint, recursion, sharepoint-2007

所以我已经阅读了所有的白皮书，我知道只要你使用文件夹，你就可以在一个列表中存储多达 500 万个列表项。

我所追求的是，​​是否有人编写了一些不错的递归来获取列表，查看列表中的所有文件夹，并将列表项分配给 <2000 文件夹，或者如果不存在则创建一个新文件夹？

与列表项检索相同。有没有人有一个干净而快速的方法来一次从列表 2000 中获取所有列表项？

我查看了谷歌和这里，并没有找到一个很好的权威指南来存储和检索带有代码示例的大型列表中的列表项，这都是关于我所看到的理论。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T18:18:23.220

您可以在同一个列表（没有文件夹）中存储超过 2000 个项目，真正影响共享点性能的是在单个视图或 API 调用中检索超过 2000 个项目。因此，只需确保您使用合理的过滤器将结果限制为 2000 个或更少。

我设计了每年依赖约 10,000 个列表条目的 WSS 解决方案，但我们非常小心，我们的 CAML 查询或 API 调用一次将结果限制为 2000 个或更少。

# php - php json 加载 jquery 数据网格

> ID：10251450
> 
> 赞同：1
> 
> 时间：2012-04-20T18:21:18.520
> 
> 标签：php, json

我有这个 php 代码将结果传递给无法正常工作的 jquery getJSON 函数。

这是我的代码：

```
 $data["total"]=mysql_num_rows($s);
    while ($r = mysql_fetch_array($s))
    {

        $ris_sql["utente"]=tv($r["utente"]);
        $ris_sql["contratto"]=tv($r["contratto"]);
        $ris_sql["login"]=tv($r["login"]);
        $ris_sql["piattaforma"]=tv($r["piattaforma"]);
        $ris_sql["azione"]=tv(format_valid($r["azione"]));
        $ris_sql["data"]=tv($r["data"]);
        $ris_sql["note"]=tv(str_replace("<br>","",$r["note"]));
        $riga[]=$ris_sql;
    }
    $data["rows"]=json_encode($riga, JSON_FORCE_OBJECT);
    echo json_encode($data); 
```

如果我尝试使用 firebug，我会看到JSON 中的*行*元素结果像字符串而不是一系列对象，我的代码有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T18:32:04.157

`$riga`您正在对JSON进行双重编码。在对要发送回浏览器`$riga`的数组的其余部分进行编码之前，不要单独对该部分进行编码。`$data`

```
// Instead of
$data["rows"] = json_encode($riga, JSON_FORCE_OBJECT);
// This double-encodes the contents of $data before outputting back to the browser or ajax call
echo json_encode($data);

// Just do:
echo json_encode($data, JSON_FORCE_OBJECT); 
```

如果格式不是您所期望的，那么您可以将`$riga`数组转换为 an `object`，然后在没有`JSON_FORCE_OBJECT`.

```
// Cast $riga from an assoc array to an instance of stdClass
$data['rows'] = (object)$riga;
// And then JSON encode the whole $data
echo json_encode($data); 
```

# xml - AS3 XML node traversal

> ID：10251457
> 
> 赞同：0
> 
> 时间：2012-04-20T18:21:50.593
> 
> 标签：xml, actionscript-3, migration, nodes, xmlnode

I am migrating from AS2 to AS3 and ran into trouble grabbing nodes from XML. I am able to grab (and trace) the entire XML file in AS3 but want to be able to store the first tag as a node using firstChild and loop through the tags using nextSibling. But in AS3 the firstChild keeps coming up empty, when my previous AS2 code would actually grab the content. What am I doing wrong? (and I can't call tags by their names because I reuse the code block for multiple xml files)

```
var eRoot = exampleXML.firstChild;
while (eRoot != null) {
  //do stuff
  eRoot= eRoot.nextSibling;
} 
```

My test XML file:

```
<?xml version="1.0" encoding="UTF-8"?>
<content>
    <version>cd</version>
    <lessonlock>~-*~-*</lessonlock>
    <expiryDate>**#*#**##**##**##*##********###*</expiryDate>
    <isSpanish>true</isSpanish>
    <server>http://www.exampleSite.com</server>
</content> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T18:39:59.947

That's because neither `firstChild` nor `nextSibling` exist as properties on an AS3 XML object. The way you are doing it, you are searching for the nodes `<firstChild>` and `<nextSibling>`.

You should read the [API for XML](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/XML.html), and better yet, [Adobe's guide to E4X](http://help.adobe.com/en_US/ActionScript/3.0_ProgrammingAS3/WS5b3ccc516d4fbf351e63e3d118a9b90204-7e72.html).

# php - PHP将PCRE unicode序列转换为普通的utf-8字符串

> ID：10251463
> 
> 赞同：0
> 
> 时间：2012-04-20T18:22:04.847
> 
> 标签：php, unicode, utf-8, pcre

是否可以在 PHP 中将 unicode PCRE 序列（如`\x{2f}`，`\x{3251}`）转换为字符串？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-20T18:30:07.420

使用[html_entity_decode](http://php.net/html_entity_decode)是可能的

```
function cb($a){
        $num = $a[1];
        $dec = hexdec($num);
        return "&#$dec;";
}
$ent = preg_replace_callback("/\\\\x\{([\da-z]+)\}/i", 'cb', "\x{2f}, \x{3251}");
$ustr = html_entity_decode($ent, ENT_NOQUOTES, 'UTF-8'); 
```

**示例：http:** [//ideone.com/fDNGM](http://ideone.com/fDNGM)

# iphone - iOS5 上的 SQL 错误，但 iOS4 上没有

> ID：10251467
> 
> 赞同：1
> 
> 时间：2012-04-20T18:22:13.927
> 
> 标签：iphone, ios, sqlite

我`sqlite`在一个 iOS 应用程序中使用，它可以很好地从 iOS4 上的数据库中检索对象。但是在iOS5上，当我执行一个语句（使用函数`sqlite3_step`）时，它有时会返回一个`SQLITE_CORRUPT`错误（意思是“数据库磁盘映像格式错误”）。

请求因此错误而失败。当使用第三方应用程序检查这个数据库时，我也偶然发现了这个错误。

我的问题是：为什么在 iOS4 和 5 之间发生了变化以停止请求正常工作？有没有办法`sqlite`在 iOS 上配置来忽略这种错误？

我确切地说我在操作系统的 2 版本上使用了相同的代码和数据库....

# javascript - jQuery 在单击另一个类时切换一个类

> ID：10251468
> 
> 赞同：0
> 
> 时间：2012-04-20T18:22:15.607
> 
> 标签：javascript, jquery, css

我正在尝试编写一个 if else 语句以在一个类的 marginTop 为 -200px 的条件下单击另一个类时触发一个类。

我尝试使用这个 if 语句，但它不起作用：

```
 if ($('.logintrigger').click() && $('.register').css('marginTop') === '-200px') {
        $('.registertrigger').toggle(
            function () {$('.register').stop().animate({'marginTop':'-0px'},200); $('#opencloseregister').css({'backgroundPosition':'-20px 0px'});}
        );
    } 
```

有什么建议么？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T18:26:42.707

听起来你只需要修改你的表达方式。问题是您试图查看一个元素是否被“点击”，而您应该只附加一个事件处理程序。

```
$('.loginTrigger').click(function()
{
    if('.register').css('marginTop') === '-200px')
    {
        // Do Stuff
    }
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-20T18:38:14.993

用 jquery 的正确 ifelse 示例制作了一个 jsfiddle。[http://jsfiddle.net/RQ75m/](http://jsfiddle.net/RQ75m/)

```
$(".logintrigger").click(function(){

    if( $(".register").css("margin-top") == "200px" ){

       $(".registertrigger").show(); //toggle function here
       return false; //so that the page doesn't refresh

    } else {

       $(".registertrigger").hide();
       return false; //so that the page doesn't refresh

    }

});​ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-20T18:26:26.767

你正在调用点击事件，我想你想给点击事件添加一个事件......

```
$('.logintrigger').click( function(e){
  if($('.register').css('marginTop') === '-200px'){
    $('.registertrigger').toggle();
  }
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-20T18:27:04.567

当您调用`$('.logintrigger').click()`时，它正在触发点击事件。它应该是：

```
if ($('.logintrigger').click(function(){
   if ($('.register').css('marginTop') === '-200px') {
        $('.registertrigger').toggle(
            function () {
               $('.register').stop().animate({'marginTop':'-0px'},200);
               $('#opencloseregister').css({'backgroundPosition':'-20px 0px'});
            }
        );
    }
}) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-20T18:28:26.977

```
$('.logintrigger').on('click', function(){

    if($('.register').css('marginTop')==='200px') {

        $('.registertrigger').toggle( function () {

            $('.register').stop().animate({'marginTop': 0 },200);
            $('#opencloseregister').css({'backgroundPosition':'-20px 0px'});

        });

    }

}); 
```

# ios - 拨打电话后将用户返回到我的应用程序

> ID：10251469
> 
> 赞同：2
> 
> 时间：2012-04-20T18:22:23.253
> 
> 标签：ios, phone-call

我希望用户能够在我的应用程序中拨打电话号码表单。用户是否可以在完成通话后直接返回应用程序？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-20T18:25:20.430

1：我猜这是默认行为，不是吗？

2：可以查看设备是否可以开启`tel://`协议：

```
BOOL canCall = [[UIApplication sharedApplication] canOpenURL:[NSURL URLWithString:@"tel://"]]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T10:09:42.097

我知道这是一个老问题，但这可以使用：

```
[[UIApplication sharedApplication] openURL:[NSURL URLWithString:@"telprompt://111222333"]]; 
```

我相信这可以为 iOS >= 5.0 完成。

的行为与`telprompt://`略有不同`tel://`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T18:42:51.943

**1**

这取决于您如何发起呼叫。

您可以选择：

*   显示一个弹出窗口，用户必须在其中批准呼叫。您的应用程序将在之后再次启动。

*   直接调用，不先弹窗。通话后不会启动您的应用程序。

关于如何实现这两种方式，请阅读这个问题：[iOS 4.2 - Return to app after phone call](https://stackoverflow.com/questions/5028329/ios-4-2-return-to-app-after-phone-call)

**2**

检查设备是否可以`tel:`使用以下代码打开 URL：

```
BOOL isPhone = [[UIApplication sharedApplication] canOpenURL:[NSURL URLWithString:@"tel:123456789"]]; 
```

# amazon-s3 - 是否可以在 Amazon S3 上对文件进行排序？

> ID：10251475
> 
> 赞同：6
> 
> 时间：2012-04-20T18:22:40.877
> 
> 标签：amazon-s3, amazon-web-services, cloud

此外，是否可以为 Amazon S3 上的存储桶设置默认排序顺序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T20:02:10.593

是为了查看，还是为了一些额外的处理？

如果您想对文件进行排序以便在 Windows 桌面上查看，一个便宜的选择是安装[WebDrive](http://www.webdrive.com/products/webdrive/S3_Client.html "亚马逊 S3 客户端")并将驱动器映射到 Amazon S3。您可以按日期、文件类型、名称等进行列排序。

# javascript - 将传递的变量连接到表单元素的名称

> ID：10251480
> 
> 赞同：0
> 
> 时间：2012-04-20T18:22:56.500
> 
> 标签：javascript, html

假设我有一个包含元素“textbox1”到“textbox10”的表单。我正在尝试使用 javascript 函数从 SQL 数据库传递返回的行 ID，例如：

```
<input type="text" name="textbox1" value="" onclick="javascript:functionname(<?= $sql_rowid ?>)" /> 
```

我希望能够将传递的行 ID 连接到表单元素名称。这当然是不正确的，但它可以让我深入了解我正在尝试做的事情：

document.form_name.textbox + 传递的SQLRowID.value

因此，我能够访问'textbox1'的值......

有任何想法吗？

帕布

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T18:27:45.960

使用以下符号：

```
document.form_name["textbox" + passedSQLRowID].value 
```

# python - 在 python 调用树中捕获输出

> ID：10251481
> 
> 赞同：0
> 
> 时间：2012-04-20T18:23:02.523
> 
> 标签：python, python-3.x, subprocess

我有 2 个**python 3**脚本，它们形成一个调用树，如下所示：
operation.py --> wrapper.py --> shell script

取决于应用程序逻辑 operation.py 将按某种顺序调用各种包装脚本。

一切正常，直到我尝试从 shell 脚本捕获错误输出并将其传递回 operation.py

在 wrapper.py 我有这个：

```
outputs = subprocess.check_output( \
          [cmd], \
           universal_newlines=True, \
           shell=True \
           )
 print(outputs)
 exit(0) 
```

注意缺少异常处理——这是故意的。Operation.py 将处理任何错误

在 operation.py 我有这个：

```
try :
    os.chdir(loc[1])
    outputs = subprocess.check_output( \
          ['python3.2','wrapper.py', various arguments...], \
          universal_newlines=True \
          )
    logging.info('Output from %s OperationScript.py', loc[1])
    logging.info(outputs)
    ......
except .... :
    error handling code here 
```

现在根据文档，如果我想捕获输出，我`stderr=subprocess.STDOUT`在 operation.py 中的调用中添加：这确实捕获了错误输出，但它会导致wrapper.py 中的*一些*调用挂起并且什么也不返回。一些 shell 脚本工作正常，但其他的永远不会返回。一些调试显示被调用的 shell 脚本正常退出，并且 wrapper.py 正常退出，但 operation.py 无法识别。

如何捕获错误输出**并**在脚本完成时始终返回到 operation.py？

# mysql - 不重复行时插入？

> ID：10251482
> 
> 赞同：3
> 
> 时间：2012-04-20T18:23:05.190
> 
> 标签：mysql, insert, replace, upsert

我只是想替换 (update) `DATE`，`PRICE`并且`OLDPRICE`当价格与我表中`MODEL`唯一的 PRICE 不同时。

示例行表数据：

```
DATE        |   MAKE   |   MODEL   |   PRICE   |   OLDPRICE
2012-04-15  | Advance  | DTA-100-X |   400     |   390 
```

必须有十几种方法可以做到这一点，但我正在寻找在 MySQL 查询中使用的最佳解决方案。

我应该使用：

1.  `INSERT INTO..ON DUPLICATE KEY UPDATE`
2.  `REPLACE INTO..`
3.  `UPDATE...WHERE PRICE != XXX`

`UPDATE`如果`MODEL`the 相同但 the不同，则基本语法是 to `PRICE`；`OLDPRICE`开启`PRICE`_`UPDATE`

****更新****

这取代了价格是否改变。如果价格发生变化，我只想要更新/替换，即，这不应该更新上面给出的任何内容，但是它确实是因为日期不同：

```
REPLACE INTO MyTable (DATE, MAKE, MODEL, PRICE, OLDPRICE) VALUES ('2012-10-02', 'Advance', 'DTA-100-X', '400', '390') 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T18:24:02.113

MySQL 有一个专门用于此目的的[`REPLACE`语句。](http://dev.mysql.com/doc/refman/5.6/en/replace.html)

> REPLACE 的工作方式与 INSERT 完全相同，只是如果表中的旧行与 PRIMARY KEY 或 UNIQUE 索引的新行具有相同的值，则在插入新行之前删除旧行。

-- [http://dev.mysql.com/doc/refman/5.6/en/replace.html](http://dev.mysql.com/doc/refman/5.6/en/replace.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T18:29:29.613

如果您关心表格的顺序，请使用`INSERT INTO..ON DUPLICATE KEY UPDATE`. 如果发现重复，`REPLACE`将**删除旧行，然后添加新行。**

`INSERT INTO..ON DUPLICATE KEY UPDATE`顾名思义，会在表中插入一个新行，除非有重复行，在这种情况下，它将更新该行（而不是删除它并添加一个新行），这将使表的顺序相同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T19:37:24.713

根据您的更新，您应该使用选项 1，即 upsert，又名`INSERT...ON DULICATE KEY UPDATE`.

我想你是说你只想更新 PRICE 和 OLDPRICE（不是 DATE 或 MAKE），如果模型已经存在并且价格不同。如果是这种情况，这应该适合你：

像这样：

```
INSERT INTO MyTable (DATE, MAKE, MODEL, PRICE, OLDPRICE) 
VALUES ('2012-10-02', 'Advance', 'DTA-100-X', '410', '390')
ON DUPLICATE KEY UPDATE OLDPRICE = CASE WHEN PRICE != VALUES(PRICE) THEN PRICE ELSE OLDPRICE END,
  DATE = CASE WHEN PRICE != VALUES(PRICE) THEN VALUES(DATE) ELSE DATE END,
  PRICE = VALUES(PRICE); 
```

# c# - 我可以在 Gridview 的模板字段中访问对象（按钮或超链接）吗？

> ID：10251483
> 
> 赞同：1
> 
> 时间：2012-04-20T18:23:10.870
> 
> 标签：c#, asp.net

我想访问网格视图中模板字段中的对象（超链接或按钮）。我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T18:29:17.687

假设您正在将数据绑定到它，您需要查看在[RowDataBound](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.rowdatabound.aspx)事件中执行该操作。

下面是一个如何在模板字段中检索控件的示例：

**.aspx：**

```
<asp:GridView ID="GridView1" Runat="server" 
    OnRowDataBound="GridView1_RowDataBound">
    <Columns>
        <asp:TemplateField HeaderText="Template Field">
            <ItemTemplate>
                <asp:Button ID="btnTest" Runat="server" /> 
            </ItemTemplate>
        </asp:TemplateField>
    </Columns>
</asp:GridView> 
```

**代码隐藏：**

```
void GridView1_RowDataBound(object sender, GridViewRowEventArgs e)
{
    if (e.Row.RowType == DataControlRowType.DataRow)
    {
        Button btnTest = (Button)e.Row.FindControl("btnTest");
        btnTest.Text = "I'm in a Template Field";
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T18:36:55.187

您可以使用它`RowDataBound`或单击模板控件的事件，例如

```
TextBox txtTemp= (TextBox )e.Row[e.RowIndex].FindControl("yourControlName");
string someText=txtTemp.Text; 
```

# c++ - 将字符添加到字符数组 C++

> ID：10251486
> 
> 赞同：-1
> 
> 时间：2012-04-20T18:23:17.590
> 
> 标签：c++, pointers

有人可以告诉我以下有什么问题吗？

我正在尝试将字符添加到字符数组中。name 是指向 MyString 类中的字符数组的指针。

```
void MyString::add_chars(char* c)
{
        if(l < strlen(c)+strlen(name))
                name = resize(name, l, sizeof(c));
        int i,j;
        for(i=0; i<strlen(c); i++) {
                name[i+l-1] = c[i];
                l++;
        }
}

char* MyString::resize(char* vptr, int currentsize, int extra) {
        char* temp = new char[currentsize + extra];
        int i;
        for (i = 0; i < currentsize; i++) {
                temp[i] = vptr[i];
        }
        vptr = temp;
        return vptr;
} 
```

主要是：

```
 MyString g ("and");
 g.add_chars("baasdf");
 cout << g.get_name() << "\n"; 
```

但是 get_name 返回“andb”。如何修复我的代码？

**编辑：** 更新的代码，仍然是相同的结果..

```
void StringList::add_chars(char* c)
{
        char* my_new_string = resize(name, l, sizeof(char));
        if( my_new_string != NULL )
        {
                delete [] name;
                name = my_new_string;
        }
        int i,j;
        for(i=0; i<strlen(c); i++) {
                name[i+l-1] = c[i];
                l++;
        }
        name[l-1] = '\0';
}

char* StringList::resize(char* vptr, int currentsize, int extra) {
        char* temp = new char[currentsize + extra + 1];
        int i;
        for (i = 0; i < currentsize; i++) {
                temp[i] = vptr[i];
        }
        vptr = temp;
        return vptr;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T18:30:33.220

这一行是错误的：

```
 name = resize(name, l, sizeof(c)); 
```

您不应该使用`sizeof(char*)`您的`c`变量所在的 ，但您应该使用`sizeof(char)`1 或仅使用 1。

此外，请确保您对大小执行 +1 以处理`char`字符串末尾的零终止。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T18:29:40.613

首先，我是否正确地假设这是您学习“如何创建自己的字符串类”的学习练习？C++ 已经有一个内置的*字符串*类型，你应该总是喜欢它。

运算符`sizeof`产生其操作数的大小（以字节为单位），在本例中为**c**，其类型为`char*`- 看起来您实际上所追求的是空终止字符数组（“C”字符串）的长度- 你已经在使用*strlen*，所以我建议你只是想再次使用它。（也考虑到空终止符）

```
name = resize(name, l, strlen(c) + 1); 
```

请注意，您的代码看起来好像存在内存泄漏。您正在为*name*变量分配一个新值，而没有先清除那里存在的任何内容。

```
if(l < strlen(c)+strlen(name))
{
    char* my_new_string = resize(name, l, strlen(c));
    if( my_new_string != NULL )
    {
        delete [] name;
        name = my_new_string;
    }
} 
```

*编辑*：正如其他回复所指出的那样，可以使用 C++`string`和`vector`.

这是实现 add_chars 的一种可能方式

```
void MyString::add_chars(char* c)
{
    if( c != NULL && name != NULL )
    {
        size_t newlength = strlen(c) + strlen(name) + 1;
        char* newstring = new char[newlength];

        if( newstring != NULL )
        {
            size_t namelength = strlen(name);
            size_t remaining = newlength - namelength;

            strncpy( newstring, name, newlength );
            strncpy( &newstring[namelength] , c, remaining );

            delete [] name;
            name = newstring;
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T18:41:37.980

> 如何修复我的代码？

不要修复它。扔掉它并使用`vector<char>`或只是`string`。

> 但我坚持，我怎样才能修复我的代码！？

好的，好的，方法如下...

1.  获取一个不错的调试器，例如[这个](http://www.microsoft.com/visualstudio/en-us/products/2010-editions/visual-cpp-express).
2.  仔细检查代码，不断检查变量并将它们与您期望的值进行比较。
3.  当您到达对 的调用时`resize`，请记下`sizeof(c)`（分配给 的`extra`参数`resize`）。当你意识到这不是你所期望的，问问自己： 的*目的*是什么`sizeof`，你就会明白为什么。

顺便说一句，由于所有这些，您还存在内存泄漏和性能非常差`strlen`的问题。

# sockets - 如何使用套接字连接到 NAO 机器人？

> ID：10251488
> 
> 赞同：1
> 
> 时间：2012-04-20T18:23:33.637
> 
> 标签：sockets, robot, nao-robot

我正在玩 Aldebaran 的[NAO 人形机器人模拟器](http://www.aldebaran-robotics.com/en/Discover-NAO/Software/NAOsim.html)和编排。我有一个 Java 软件，我想通过激活机器人的行为来控制机器人，我相信套接字可以解决问题。

我的问题是：有没有办法从 choregraph+naoSim 中打开一个套接字连接，这样我就可以获得传感器读数并向机器人发送命令？或者有什么其他方式连接choregraph+naoSim达到同样的效果？

提前致谢！

ķ

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T13:14:29.023

我打算使用 python websocket 包来完成这个。据我所知，服务器可以写在任何东西上。客户端部分 - NAO - 应该启动与服务器的连接发送一些东西，可能等待回复然后继续。因此，可以使用 Python 实现发送功能，并在其中一个 NAO 操作框中进行编码。您甚至可以创建一个单独的框，它将请求作为参数并从服务器输出回复。一个与服务器对话的小盒子。

# asp.net - sql datetime 与字符串进行比较

> ID：10251494
> 
> 赞同：0
> 
> 时间：2012-04-20T18:24:01.850
> 
> 标签：asp.net, sql, asp.net-mvc-3

如果我有以下访问 sql 数据库的日期以将其与用户输入的字符串进行比较：

```
public IQueryable<Audit> FindAllAuditsByNameDate(String name, String date)
        {
            return from audit in db.Audits
                   where audit.EventTime.ToString().Contains(date) && audit.User.UserName.Contains(name)
                   orderby audit.User.UserName
                   select audit;
        } 
```

它失败是用户在日期中输入“/”字符。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T18:28:26.853

试试`DateTime.Parse`。它能够理解输入日期时间的许多常见格式。

```
DateTime dateStart = DateTime.Parse(date);
DateTime dateEnd = dateStart.AddDays(1);

return from audit in db.Audits
       where audit.EventTime >= dateStart &&
             audit.EventTime < dateEnd &&
             audit.User.UserName.Contains(name)
       orderby audit.User.UserName
       select audit; 
```

如果`DateTime.Parse`不解析您想要的格式，您可以随时使用`DateTime.ParseExact`并提供您自己的格式字符串。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-20T18:31:51.380

考虑到 EventTime 是 DateTime 类型？你需要检查它的价值。首先将字符串日期转换为DateTime

```
DateTime newDate = Convert.ToDateTime(date);
return from audit in db.Audits
                   where audit.EventTime.Value == newDate && audit.User.UserName.Contains(name)
                   orderby audit.User.UserName
                   select audit; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T18:46:12.157

警告 - 不要使用`Contains`.

## 包含的缺点

假设我有两个列表对象。

```
List 1      List 2
  1           12
  2            7
  3            8
  4           98
  5            9
  6           10
  7            6 
```

### 使用 Contains，它将搜索 List-2 中的每个 List-1 项目，这意味着迭代将发生 49 次！！！

* * *

## 回答你原来的问题

```
public IQueryable<Audit> FindAllAuditsByNameDate(String name, String date)
{
    DateTime Dt;
    if (DateTime.TryParse(date, out Dt))
    {
        return from audit in db.Audits
                where audit.EventTime.ToString().Contains(date) && audit.User.UserName.Contains(name)
                orderby audit.User.UserName
                select audit;
    }
    return null;
} 
```

* * *

## 尝试解析

> 1.  返回一个布尔值，指示它是否成功。
> 2.  它只是在内部尝试/捕获为什么没有例外地实现，因此它很快。
> 3.  在值可能为 InValid 的情况下使用它。

## 解析

> 1.  引发异常。
> 2.  如果您确定该值有效，请使用它

# tcp - 如何在线托管 TcpClient/listener（我想在线托管我的聊天服务器）

> ID：10251498
> 
> 赞同：1
> 
> 时间：2012-04-20T18:24:13.597
> 
> 标签：tcp, host

我有一个为我的窗口电话应用程序创建的聊天服务器。现在它在我的本地计算机上工作，我如何使它在线，以便每个人都可以连接到它。

聊天服务器：TcpListener chatServer = new TcpListener(4296);

聊天客户端：TcpClient client = new TcpClient("127.0.0.1", 4296);

我如何转发端口，以便我可以在线托管它！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T18:28:31.520

为了让世界看到它，您需要将它托管在具有公共 IP 地址的某个地方。然后，您将在客户端连接中使用此 IP 地址：

```
Chat client: TcpClient client = new TcpClient("xxx.xxx.xxx.xxx", 4296); 
```

根据您的平台，您可以使用 Google App Engine 或 Amazon Web Services 来快速部署您的应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T18:30:19.230

这取决于您的路由器/网关。有关如何转发端口的更多信息，请查看路由器的文档。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-04-01T08:01:23.590

基本上如果您想在线部署您的应用程序，您需要自己的域（您获得自己的 IP 来托管），您可以使用云服务器进行部署（这是一个不错的选择，因为您可以免费部署，但存储空间有限版），否则您可以在您的路由器 IP 地址上托管。

如果您使用前两个选项，那么这些是用于在给定 IP 和端口上启动侦听器服务的 python 脚本。

这里：

```
 import socket
    import sys
    HOST =''   # Symbolic name, meaning all available interfaces
    PORT = 8000 # Arbitrary non-privileged port
    s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
    print 'Socket created'

    try:
        s.bind((HOST, PORT))
    except socket.error as msg:
        print 'Bind failed. Error Code : ' + str(msg[0]) + ' Message ' + msg[1]
        sys.exit()
    print 'Socket bind complete'
    #Start listening on socket
    s.listen(10)
    print 'Socket now listening'
    #now keep talking with the client
    while 1:
        #wait to accept a connection - blocking call
        conn, addr = s.accept()
        print 'Connected with ' + addr[0] + ':' + str(addr[1])
    s.close() 
```

这些只是一个示例，您可以将您的所有代码从您的 PC 放到云端并编辑 IP 中的更改。

如果你想让你的路由器监听客户端，那么你必须去路由器登录页面，大多数路由器是192.168.51.1，去这里并以管理员身份登录，然后你应该去那里的防火墙配置你会找到自定义服务器的选项，然后单击它，然后将IP地址，端口等配置为主机。

我希望您观看这些完整的视频以正确理解：Here [Video](https://www.youtube.com/watch?v=NgPxoCpNbJU) 在这些视频中，他出于利用目的而托管您可以托管以进行任何其他活动。

谢谢你。

# activation - 根据算法生成安装密钥代码

> ID：10251499
> 
> 赞同：1
> 
> 时间：2012-04-20T18:24:15.670
> 
> 标签：activation

类似的问题：[生成软件激活码的最佳方式](https://stackoverflow.com/questions/1336941/best-way-to-generate-activation-codes-for-software)和[如何生成简单的注册码，根据用户提供的输入并在安装后进行验证](https://stackoverflow.com/questions/4468059/how-to-generate-a-simple-registration-code-based-on-input-given-by-the-user-and)

我的问题/使用类似于 Microsoft 如何处理 All-in-One Vista 磁盘。在 Vista 安装期间，如果它没有检测到要安装的特定版本，它会要求输入密钥代码，然后知道要安装哪个版本。我的应用程序在 Visual Basic 2010 中，我想使用键码让用户根据他/她拥有的代码解锁某些功能。所以代码需要内置到软件中（或者更确切地说，是一种算法），这样它就知道要解锁什么，但还不够明显，以至于黑帽黑客知道# *xx*位解锁了特性*xxxx*。如果有人从另一个 .NET 或 PHP 发布代码，那么我可以翻译成 VB 代码。

我的目标是让代码不容易被猜到，并且仍然生成超过 20,000 个可以转换为一组功能的代码，并验证它是注册或激活软件的唯一用户

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T18:34:53.677

在直接回答您的问题时，我会看看这个项目；它可能与您尝试做的事情有关：http: [//keygen.codeplex.com/](http://keygen.codeplex.com/)

但是，由于您不是安装操作系统而是安装应用程序，因此我建议您使用基于服务器的 DRM 设置。这样的流程将是：

1.  您在服务器上生成一个新密钥并将其包含在软件中（如果它是可下载的内容，则通过电子邮件发送）。此生成过程的一部分包括指定与该密钥兼容的功能和版本。
2.  用户安装您的软件并输入您提供的密钥。
3.  您的软件会检查您的注册服务器以查看它是否是有效密钥并从服务器获取功能信息。

此解决方案确保无法在不访问服务器的情况下修改/创建新密钥。如果您在服务器端使用 GUID 之类的东西，那么它也几乎不可能猜到一个键。

# android - ORMLite - 外键持久性

> ID：10251501
> 
> 赞同：0
> 
> 时间：2012-04-20T18:24:28.153
> 
> 标签：android, database

我已经查看了有关 ormlite 和 android 的问题，但仍然没有找到答案。

假设我有以下课程：

*   邮政
*   注释

在代码中：

```
Post p = new Post("hello world");
Comment c = new Comment("HI!", p);

c.save();
p.save(); 
```

但是在注释表中外键为空？是否有解决方法来避免这种情况，比如在 Hibernate 中？（除了按正确的顺序保存？）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T18:29:23.653

不是真的 - 这**应该**打破。通过定义一个非空外键，你说没有帖子的评论是没有意义的。如果 A 在没有 B 的情况下毫无意义，那么如果您尝试创建没有 B 的 A，数据库应该会给出错误，因为无法保证（从数据库的角度来看）您稍后会将 B 关联到 A

# css - 有什么方法可以阻止 Apple OS 在表单字段、滚动条等上的原生样式？

> ID：10251503
> 
> 赞同：2
> 
> 时间：2012-04-20T18:24:38.657
> 
> 标签：css, ios, macos, focus, native

1.  有没有办法使用 CSS 或 JavaScript 来摆脱应用于 OS X 或 iOS 中聚焦 DOM 元素（例如蓝色发光）的原生 Apple 样式？

    我在网上查了一下，找不到与这个主题相关的任何东西。我准备放弃对此的希望，因为我在想，因为它是操作系统本身的一部分（不仅仅是在浏览器中），所以它不能真正被覆盖或以任何方式避免。

2.  我也有兴趣在不使用 Javascript 替代品的情况下重新设计 Apple OS 浏览器的本机滚动条，但使用适用于所有浏览器的解决方案。我模糊地确信这是同一个问题（操作系统本身的一部分，因此无法被浏览器设置样式），但我只是想检查一下。

    或者，我可以使用`-webkit-scrollbar`CSS 提供的伪元素，但这仅适用于 Chrome、Safari 和其他 webkit 浏览器，对吧？

谢谢你的帮助！<3

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T20:40:46.800

在有问题的元素上使用`outline:none;`效果很好。

有关更多信息，请参阅用户 j08691 在对我的问题的评论中发布的问题“[如何删除输入文本元素上的边框突出显示”。](https://stackoverflow.com/questions/1457849/how-do-i-disable-the-highlight-border-on-an-html-input-text-element)

# oauth-2.0 - 如何使用 ServiceStack 作为 OAuth2.0 的资源服务器构建安全 api？

> ID：10251508
> 
> 赞同：5
> 
> 时间：2012-04-20T18:25:18.260
> 
> 标签：oauth-2.0, dotnetopenauth, servicestack

我已经使用[dotnetopenauth](https://github.com/AArnott/dotnetopenid)构建了一个 OAuth2.0 授权服务器，它将管理身份验证、授权并将 accessToken 分配给调用者。调用者将使用访问令牌访问资源服务器上的 api (webservices)。如果按照资源服务器中dotnetopenauth提供的示例，使用WCF构建的api可以通过[OAuthAuthorizationManager进行身份验证](https://github.com/AArnott/dotnetopenid/blob/master/samples/OAuthResourceServer/Code/OAuthAuthorizationManager.cs)

如果使用 ServiceStack 在资源服务器中构建我的 api，如何构建基于分配的 OAuth2.0 访问令牌验证传入 api 请求的身份验证过程？该功能应类似于 dotnetopenid 示例中的 OAuthAuthorizationManager，而不是基于登录会话。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-01T17:05:07.887

只是一些更新

我没有使用`AuthenticateAttribute`or `RequiredRoleAttribute`from `ServiceStack.ServiceInterface`。

我创建了 2 个自定义`RequestFilterAttribute`来替换 和 提供的`AuthenticateAttribute`功能`RequiredRoleAttribute`。

在每个 custom`RequestFilterAttribute`的`Execute`方法中，我使用 dotnetopenauth 中的方法来验证访问令牌。

```
//httpReq==req from Execute(IHttpRequest req, IHttpResponse res, object requestDto) 
```

访问令牌验证代码如下，更多信息请参考 servicestack 和 dotnetopenauth 的相关文档。ResourceServer 是来自 dotnetopenauth 的类

```
HttpRequestBase reqBase = new HttpRequestWrapper((System.Web.HttpRequest)httpReq.OriginalRequest);

var resourceServer = new ResourceServer(new StandardAccessTokenAnalyzer(AuthorizationServerPublicKey, ResourceServerPrivateKey));

IPrincipal ip = null;
resourceServer.VerifyAccess(reqBase, out ip); 
```

如果`ip`未通过`null`身份验证，如果不是`null`，则传入请求有效并且可以使用`ip`来检查角色，例如`ip.IsInRole(requiredRole)`

我不确定这是否是进行检查的正确方法，但它对我有用。欢迎任何更好的解决方案。

# php - 在php中将字符串转换为浮点数

> ID：10251513
> 
> 赞同：0
> 
> 时间：2012-04-20T18:25:33.613
> 
> 标签：php, floating-point

我得到了一些关于页面执行时间的基准数据。它由框架作为字符串提供。我想将其转换为浮点数，将其乘以 1000，并将其作为 int 存储在数据库中。它似乎表现得很奇怪，我希望有人能帮我找出原因。这是代码：

```
 $elapsed = $this->benchmark->elapsed_time();
    var_dump("before:");
    var_dump($elapsed);

    $elapsed = floatval($elapsed);

    var_dump("after:");
    var_dump($elapsed); 
```

结果如下：

![字符串'之前：'（长度=7）字符串'0.7608'（长度=14）字符串'之后：'（长度=6）浮点0](../Images/b46077445926c7c02a5ffc463971f92c.png)

编辑：由于有人指出字符串长度错误，我才知道这一点。显然，该方法正在返回字符串“{elapsed_time}”，框架正在缓冲输出，然后用最终的评估时间替换该字符串。谢谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T18:39:38.723

```
$elapsed = ((float)$this->benchmark->elapsed_time()) * 1000; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T18:28:24.293

```
<?php

    $time = '0.5643';
    var_dump( $time );        
    //output  :: string(6) "0.5643"
    var_dump( $time * 1000 ); 
    //output  :: float(564.3)
?> 
```

一切都符合预期..但是你做了一些非常愚蠢的事情：

```
<?php

    $badtime = "\0\0\0\0\0\0\0\0" . $time;
    var_dump( $badtime );        
    //output  :: string(14) "0.5643"

    var_dump($badtime * 1000); 
    //output  :: int(0)

    $goodtime = str_replace("\0", "", $badtime);
    var_dump($goodtime * 1000);
    //output  :: float(564.3)

?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-20T18:28:36.980

不确定，但`$elapsed *= 1000;`应该没问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-20T18:29:58.097

`<?php var_dump((float)'0.734' * 1000); //float(734) ?>`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-20T18:44:45.250

可能是 $this->benchmark->elapsed_time() 在浮动之前添加了一堆垃圾，这就是 minitech 指出的 0.7608 是 14 个字符的原因。

尝试：

```
$elapsed = floatval(trim($elapsed)); 
```

或者

```
$elapsed = floatval(preg_replace('/[^0-9\.]/', '', $elapsed)); 
```

有点奇怪，但以上可能会有所帮助，我不确定。

# android - Android：打开和关闭背景

> ID：10251517
> 
> 赞同：0
> 
> 时间：2012-04-20T18:25:56.300
> 
> 标签：android, background, drawable

我有一个 Android 应用程序，它具有打开和关闭背景图像的设置。

但是，我有一个用户给我发电子邮件说这对他的设备产生了不好的影响，运行 4.0.2 的 Galaxy Nexus（参见[https://www.dropbox.com/s/d61wyb325ckia9r/Screenshot_2012-04-19-00- 02-27.png](https://www.dropbox.com/s/d61wyb325ckia9r/Screenshot_2012-04-19-00-02-27.png) ) 我无法在我拥有的任何模拟器（2.2 以上的所有版本）或我的任一设备（2.3.7 Nexus One 和 Evo 4g）中重现该问题。

似乎具有透明度设置的东西正在使渲染关闭。

下面是我用于切换背景图像的代码。

```
void setBackground(){
    if(hideBackground==true){
        getWindow().setBackgroundColor(-16777216);
        getWindow().setBackgroundDrawableResource(R.drawable.black);
    }
    else{
        int pics[] =  {R.drawable.bloodseeker, R.drawable.drow, R.drawable.morphling};
        Random rand = new Random();
        int pos = rand.nextInt(pics.length-1);
        getWindow().setBackgroundDrawable(null);
        getWindow().setBackgroundColor(0);
        getWindow().setBackgroundDrawableResource(pics[pos]);
    }
} 
```

谁能指出我解决此问题的正确方向？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T18:30:28.350

在设置透明背景后，您可能希望使根视图[无效。](http://developer.android.com/reference/android/view/View.html#invalidate%28%29)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T15:07:39.143

正如 JRaymond 在我原来的帖子中评论的那样，设置根视图的背景可以解决这个问题。

# java - 码头：HTTP 错误：503/服务不可用

> ID：10251518
> 
> 赞同：14
> 
> 时间：2012-04-20T18:26:04.407
> 
> 标签：java, xml, jetty

我是 Jetty 的新手，我尝试在此处运行示例程序“ [http://www.codeproject.com/Articles/128145/Run-Jetty-Web-Server-Within-Your-Application](http://www.codeproject.com/Articles/128145/Run-Jetty-Web-Server-Within-Your-Application) ”但我收到错误消息我的页面“ [http://localhost:8585/runJetty/](http://localhost:8585/runJetty/) ”

```
"HTTP ERROR: 503
Problem accessing /runJetty/. Reason: 
    Service Unavailable
--------------------------------------------------------------------------------
Powered by Jetty:// " 
```

我从 Eclipse 得到的错误日志：

```
2012-04-20 11:14:32.522:INFO:oejs.Server:jetty-8.1.3.v20120416
2012-04-20 11:14:32.617:WARN:oejx.XmlParser:FATAL@file:/C:/Users/***/workspace/Test/WEB-INF/web.xml line:1 col:7 : org.xml.sax.SAXParseException: The processing instruction target matching "[xX][mM][lL]" is not allowed.
2012-04-20 11:14:32.617:WARN:oejw.WebAppContext:Failed startup of context o.e.j.w.WebAppContext{/runJetty,file:/C:/Users/***/workspace/Test/}
org.xml.sax.SAXParseException: The processing instruction target matching "[xX][mM][lL]" is not allowed.
at com.sun.org.apache.xerces.internal.util.ErrorHandlerWrapper.createSAXParseException(Unknown Source)
at com.sun.org.apache.xerces.internal.util.ErrorHandlerWrapper.fatalError(Unknown Source)
at com.sun.org.apache.xerces.internal.impl.XMLErrorReporter.reportError(Unknown Source)
at com.sun.org.apache.xerces.internal.impl.XMLScanner.reportFatalError(Unknown Source)
at com.sun.org.apache.xerces.internal.impl.XMLScanner.scanPIData(Unknown Source)
at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanPIData(Unknown Source)
at com.sun.org.apache.xerces.internal.impl.XMLScanner.scanPI(Unknown Source)
at com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl$PrologDriver.next(Unknown Source)
at com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl.next(Unknown Source)
at com.sun.org.apache.xerces.internal.impl.XMLNSDocumentScannerImpl.next(Unknown Source)
at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanDocument(Unknown Source)
at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(Unknown Source)
at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(Unknown Source)
at com.sun.org.apache.xerces.internal.parsers.XMLParser.parse(Unknown Source)
at com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.parse(Unknown Source)
at com.sun.org.apache.xerces.internal.jaxp.SAXParserImpl$JAXPSAXParser.parse(Unknown Source)
at javax.xml.parsers.SAXParser.parse(Unknown Source)
at org.eclipse.jetty.xml.XmlParser.parse(XmlParser.java:199)
at org.eclipse.jetty.xml.XmlParser.parse(XmlParser.java:215)
at org.eclipse.jetty.webapp.Descriptor.parse(Descriptor.java:60)
at org.eclipse.jetty.webapp.WebDescriptor.parse(WebDescriptor.java:143)
at org.eclipse.jetty.webapp.MetaData.setWebXml(MetaData.java:165)
at org.eclipse.jetty.webapp.WebXmlConfiguration.preConfigure(WebXmlConfiguration.java:55)
at org.eclipse.jetty.webapp.WebAppContext.preConfigure(WebAppContext.java:417)
at org.eclipse.jetty.webapp.WebAppContext.doStart(WebAppContext.java:453)
at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:59)
at org.eclipse.jetty.server.handler.HandlerCollection.doStart(HandlerCollection.java:224)
at org.eclipse.jetty.server.handler.ContextHandlerCollection.doStart(ContextHandlerCollection.java:167)
at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:59)
at org.eclipse.jetty.server.handler.HandlerWrapper.doStart(HandlerWrapper.java:90)
at org.eclipse.jetty.server.Server.doStart(Server.java:262)
at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:59)
at blog.runjetty.server.JettyServer.start(JettyServer.java:22)
at blog.runjetty.ui.listener.ServerStartStopActionListner.actionPerformed(ServerStartStopActionListner.java:38)
at javax.swing.AbstractButton.fireActionPerformed(Unknown Source)
at javax.swing.AbstractButton$Handler.actionPerformed(Unknown Source)
at javax.swing.DefaultButtonModel.fireActionPerformed(Unknown Source)
at javax.swing.DefaultButtonModel.setPressed(Unknown Source)
at javax.swing.plaf.basic.BasicButtonListener.mouseReleased(Unknown Source)
at java.awt.Component.processMouseEvent(Unknown Source)
at javax.swing.JComponent.processMouseEvent(Unknown Source)
at java.awt.Component.processEvent(Unknown Source)
at java.awt.Container.processEvent(Unknown Source)
at java.awt.Component.dispatchEventImpl(Unknown Source)
at java.awt.Container.dispatchEventImpl(Unknown Source)
at java.awt.Component.dispatchEvent(Unknown Source)
at java.awt.LightweightDispatcher.retargetMouseEvent(Unknown Source)
at java.awt.LightweightDispatcher.processMouseEvent(Unknown Source)
at java.awt.LightweightDispatcher.dispatchEvent(Unknown Source)
at java.awt.Container.dispatchEventImpl(Unknown Source)
at java.awt.Window.dispatchEventImpl(Unknown Source)
at java.awt.Component.dispatchEvent(Unknown Source)
at java.awt.EventQueue.dispatchEventImpl(Unknown Source)
at java.awt.EventQueue.access$000(Unknown Source)
at java.awt.EventQueue$1.run(Unknown Source)
at java.awt.EventQueue$1.run(Unknown Source)
at java.security.AccessController.doPrivileged(Native Method)
at java.security.AccessControlContext$1.doIntersectionPrivilege(Unknown Source)
at java.security.AccessControlContext$1.doIntersectionPrivilege(Unknown Source)
at java.awt.EventQueue$2.run(Unknown Source)
at java.awt.EventQueue$2.run(Unknown Source)
at java.security.AccessController.doPrivileged(Native Method)
at java.security.AccessControlContext$1.doIntersectionPrivilege(Unknown Source)
at java.awt.EventQueue.dispatchEvent(Unknown Source)
at java.awt.EventDispatchThread.pumpOneEventForFilters(Unknown Source)
at java.awt.EventDispatchThread.pumpEventsForFilter(Unknown Source)
at java.awt.EventDispatchThread.pumpEventsForHierarchy(Unknown Source)
at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
at java.awt.EventDispatchThread.run(Unknown Source)
2012-04-20 11:14:32.648:INFO:oejs.AbstractConnector:Started SelectChannelConnector@0.0.0.0:8585 
```

我的xml文件

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns="http://java.sun.com/xml/ns/j2ee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
xsi:schemaLocation="http://java.sun.com/xml/ns/j2ee 
http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd" 
version="2.4">
    <welcome-file-list>
        <welcome-file>page/index.jsp</welcome-file> 
    </welcome-file-list>
</web-app> 
```

我的 JSP 文件

```
<%@ page language="java" contentType="text/html; charset=ISO-8859-1 pageEncoding="ISO-8859-1"%> 
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01     Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html> 
    <head> 
        <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
        <title>Embedding Jetty</title>
    </head>
    <body>
        <h2>Running Jetty web server from our application!!</h2>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-20T18:40:17.780

> 2012-04-20 11:14:32.617:WARN:oejx.XmlParser:FATAL@file:/C:/Users/***/workspace/Test/WEB-INF/web.xml line:1 col:7: org .xml.sax.SAXParseException：不允许匹配“[xX][mM][lL]”的处理指令目标。

你的日志说，你的 web.xml 格式不正确。第 1 行，第 7 列。它可能是 UTF-8[字节顺序标记](http://en.wikipedia.org/wiki/Byte_order_mark)

尝试验证您的 xml 格式是否正确且没有 BOM。Java 不使用 BOM。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-24T19:18:00.840

实际上，我解决了这个问题。我通过 eclipse jetty 插件运行它。

1.  我的 Eclipse 中没有 JDK 库，这就是为什么消息不断显示我需要安装完整的 JDK，这是主要原因。

2.  我安装了两个版本的 jetty 插件，即 jetty7 和 jetty8。我认为它们相互冲突或其他什么，所以我删除了 jetty7，它起作用了！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-11-19T10:18:19.937

这些答案都不适合我。

我不得不删除所有已部署的 java web 应用程序：

*   窗口/显示视图/其他...
*   转到服务器文件夹并选择“服务器”
*   在 localhost 上右键单击 J2EE Preview
*   单击以添加和删除... 单击全部删除

然后在服务器上运行项目

错误消失了！

在部署另一个项目之前，您必须停止服务器，因为服务器不会找到它。否则你会得到一个 404 错误

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-02T08:41:31.740

我有同样的问题。我通过从 xml 文件中删除换行符来解决它。我做了

```
<operationBindings>
    <OperationBinding>
        <operationType>update</operationType>
        <operationId>makePdf</operationId>
        <serverObject>
            <className>com.myclass</className>
            <lookupStyle>new</lookupStyle>
        </serverObject>
        <serverMethod>makePdf</serverMethod>
    </OperationBinding>
</operationBindings> 
```

代替 ...

```
<serverObject>
            <className>com.myclass
</className>
            <lookupStyle>new</lookupStyle>
</serverObject> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-06-14T12:47:15.440

从工作区中删除/删除项目。并将项目重新导入工作区。这种方法对我有用。

# python - 如何在 webdriver 中获取元素的当前内容

> ID：10251525
> 
> 赞同：72
> 
> 时间：2012-04-20T18:26:35.300
> 
> 标签：python, selenium, webdriver

我一定是想错了。

我想在使用 Webdriver/Selenium 2 访问的页面上获取元素的内容，在本例中为表单域

这是我损坏的代码：

```
 Element=driver.find_element_by_id(ElementID)
 print Element
 print Element.text 
```

结果如下：

```
<selenium.webdriver.remote.webelement.WebElement object at 0x9c2392c> 
```

（注意空白行）我知道元素有内容，因为我只是使用 .sendkeys 使用上一个命令将它们填充在那里，并且在脚本运行时我可以在实际网页上看到它们。

但我需要将内容恢复为数据。

我能做些什么来阅读这个？最好以通用方式，以便我可以从各种类型的元素中提取内容。

* * *

## 回答 #1

> 赞同：87
> 
> 时间：2012-04-21T14:12:33.963

我相信 prestomanifesto 是在正确的轨道上。这取决于它是什么类型的元素。您需要使用`element.get_attribute('value')`输入元素并`element.text`返回元素的文本节点。

您可以检查 WebElement 对象`element.tag_name`以找出它是什么类型的元素并返回适当的值。

这应该可以帮助您弄清楚：

```
driver = webdriver.Firefox()
driver.get('http://www.w3c.org')
element = driver.find_element_by_name('q')
element.send_keys('hi mom')

element_text = element.text
element_attribute_value = element.get_attribute('value')

print element
print 'element.text: {0}'.format(element_text)
print 'element.get_attribute(\'value\'): {0}'.format(element_attribute_value)
driver.quit() 
```

* * *

## 回答 #2

> 赞同：53
> 
> 时间：2017-03-27T13:31:39.953

```
element.get_attribute('innerHTML') 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-09-14T18:23:13.330

我知道当你说“内容”时你不是这个意思，但是如果你想找到一个 webelement 的所有属性的所有值，这是在 python 中使用 javascript 的一种非常好的方法：

```
everything = b.execute_script(
    'var element = arguments[0];'
    'var attributes = {};'
    'for (index = 0; index < element.attributes.length; ++index) {'
    '    attributes[element.attributes[index].name] = element.attributes[index].value };'
    'var properties = [];'
    'properties[0] = attributes;'
    'var element_text = element.textContent;'
    'properties[1] = element_text;'
    'var styles = getComputedStyle(element);'
    'var computed_styles = {};'
    'for (index = 0; index < styles.length; ++index) {'
    '    var value_ = styles.getPropertyValue(styles[index]);'
    '    computed_styles[styles[index]] = value_ };'
    'properties[2] = computed_styles;'
    'return properties;', element) 
```

您还可以使用`element.__dict__`.

我认为这是关于您想从网络元素中获取的所有数据。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-09-20T09:41:19.303

我的答案是基于这个答案：[如何在 webdriver 中获取元素的当前内容，](https://stackoverflow.com/a/10259649/5847502) 就像复制粘贴一样。

```
from selenium import webdriver

driver = webdriver.Firefox()
driver.get('http://www.w3c.org')
element = driver.find_element_by_name('q')
element.send_keys('hi mom')

element_text = element.text
element_attribute_value = element.get_attribute('value')

print (element)
print ('element.text: {0}'.format(element_text))
print ('element.get_attribute(\'value\'): {0}'.format(element_attribute_value))

element = driver.find_element_by_css_selector('.description.expand_description > p')
element_text = element.text
element_attribute_value = element.get_attribute('value')

print (element)
print ('element.text: {0}'.format(element_text))
print ('element.get_attribute(\'value\'): {0}'.format(element_attribute_value))
driver.quit() 
```

* * *

## 回答 #5

> 赞同：-11
> 
> 时间：2012-04-21T00:31:01.247

在 Java 中它的*Webelement.getText()*。不确定python。

# jquery - 将图像从剪贴板粘贴到 Web 表单

> ID：10251528
> 
> 赞同：5
> 
> 时间：2012-04-20T18:26:45.903
> 
> 标签：jquery, asp.net, flash, clipboard

我看到这已经讨论过几次了，但那是 2010 年及之前。现在我正在我的 gmail 客户端中写一封新电子邮件，并注意到我可以将图像粘贴到邮件正文/网络表单中。

我很高兴看到这一点，因为我一直在寻找类似的解决方案。

谁能提供一些有关其工作原理的详细信息？是闪存吗？还是一些JavaScript？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-20T18:42:26.553

它是 html5 + javascript 和/或 flash（取决于浏览器）此链接应该可以帮助您：http: [//strd6.com/2011/09/html5-javascript-pasting-image-data-in-chrome/](http://strd6.com/2011/09/html5-javascript-pasting-image-data-in-chrome/)

不过有一点警告，到目前为止，这只适用于 chrome。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-19T09:17:29.053

这是另一种选择，灵感来自 Github 的图像粘贴。似乎与 jQuery 一起工作。

[https://github.com/Rovak/InlineAttachment](https://github.com/Rovak/InlineAttachment)

![](../Images/06ce9f1da46ff42ad53c6de4f00cdee3.png)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-19T23:33:26.193

从 2011 年开始（现在可能有点过时），这个链接可能是 Chrome + Firefox 的一个很好的起点：http: **[//joelb.me/blog/2011/code-snippet-accessing-clipboard-images-with- javascript/](http://joelb.me/blog/2011/code-snippet-accessing-clipboard-images-with-javascript/)**

*（来自创建[粘贴板](http://pasteboard.co/)的人）*

使用 IE（如果还有人需要支持 IE）听起来您可能需要求助于 HTA、ActiveX、Flex 或 Java。看看这里：
[使用 JavaScript 截取网页的屏幕截图？](https://stackoverflow.com/questions/60455/take-a-screenshot-of-a-webpage-with-javascript)

# .htaccess - 将特定的 URL 重写到不同的目录

> ID：10251535
> 
> 赞同：3
> 
> 时间：2012-04-20T18:27:09.523
> 
> 标签：.htaccess, mod-rewrite, url-rewriting, rewrite

我试图重定向这个，

example.com/slide?page=4到**example.com/slide/issue43?page=4** **_**

 **但它不会影响其他 URL，例如**example.com/slide/issue57?page=4**

我真的卡住了，这些正则表达式太奇怪了。这是我想出的重写，

```
This is not working    
RewriteRule ^slide?page(.*)$ http://example.com/slide/issue43?page=$1 [L,R=301] 
```

我需要专门针对' **slide?page=X** '并让它重定向或指向' **slide/issue43?page=X** '

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T19:23:24.737

这应该适合你：

```
RewriteCond %{REQUEST_URI} ^/slide$
RewriteCond %{QUERY_STRING} ^page=(.*)$
RewriteRule ^(.*) /slide/issue57?page=%1 [R=301,L] 
```**

# javascript - 在两个 html 文件之间更改 jQuery Mobile 页面

> ID：10251541
> 
> 赞同：0
> 
> 时间：2012-04-20T18:27:52.970
> 
> 标签：javascript, jquery, jquery-mobile

我正在尝试制作一个包含“搜索”和“结果”两个页面的简单网站。

起初，我有一个运行良好的多页模板。我会更改页面，并在页面更改时使用 ajax 来获取结果。问题是我希望能够在不首先返回搜索页面的情况下加载结果页面。

我想通过查询字符串将参数传递给结果页面，这样我就可以拥有这样的东西：

`search.html`+“一些搜索词”-> `results.html?q=some+search+terms`

问题是当我将 html 拆分为两个文件时，我似乎无法正常工作。

我试着打电话

```
$.mobile.changePage("results.html?q=" + escape(search)) 
```

在搜索页面上，但该`$(document).ready`功能未触发。我有点明白为什么它没有，因为`changePage`将第二页加载到 DOM 中？

我还尝试了手动重定向，在这种情况下，该`$(document).ready`函数会在 results.html 上触发，但使用后退按钮或返回搜索页面不会触发 THAT `$(document).ready`。

我尝试将`pagechange`函数连接到 search.html，假设当我加载第二页时它会触发，但什么也没发生。

有没有人对我将如何实现这一点提出建议？还是让结果页面更加独立于搜索页面的最佳方式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T18:35:31.083

我也被这个困扰了，通过查询字符串传递参数确实不是一个好主意，它使 jQueryMobile 以一种奇怪的方式表现。

相反，我一直在使用完美运行的 sessionStorage。您也可以使用 cookie。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T20:12:25.820

我不能 100% 确定您实际上在哪里遇到问题，但这里有一些重要的 jQuery Mobile 特定信息可以帮助您。

首先，阅读本页顶部的大黄色部分：http: [//jquerymobile.com/demos/1.1.0/docs/api/events.html](http://jquerymobile.com/demos/1.1.0/docs/api/events.html)

`document.ready`当页面从外部文档进入 DOM 时不会触发。相反，您需要使用事件委托和上面链接中指定的页面事件。您很可能希望`pageinit`用作`document.ready`.

然后阅读此页面的顶部：http: [//jquerymobile.com/demos/1.1.0/docs/api/methods.html](http://jquerymobile.com/demos/1.1.0/docs/api/methods.html)（关于 的部分`$.mobile.changePage()`）。

关于第二个链接的重要部分是您可以`$.mobile.changePage()`像这样通过函数传递数据：

```
$.mobile.changePage('results.html', { data : { q : search } }); 
```

您甚至可以将`type`选项设置为，`post`这样就不会发送查询字符串（这应该确保您一次不会在 DOM 中获得多个相同页面）。

```
$.mobile.changePage('results.html', { data : { q : search }, type : 'post' }); 
```

另一个解决方法是手动将`data-url`属性添加到`<div data-role="page" id="results">`页面。当您抓取这样的页面时：

```
 $.mobile.changePage("results.html?q=search+term+here"); 
```

它`data-url`被设置为：`results.html?q=search+term+here`。如果您手动设置为`data-url`，`results.html`那么您可以导航到这样的页面：

```
 $.mobile.changePage("results.html", { data : { q : 'search+term+here' } }); 
```

在通过 AJAX 重新加载伪页面之前，它将首先查找属性设置为的`data-role="page"`元素。`data-url``results.html`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-21T21:35:42.510

感谢您的输入。我使用了一个插件，它允许我在散列中使用虚假查询参数进行多页布局。

[https://github.com/jblas/jquery-mobile-plugins/tree/master/page-params](https://github.com/jblas/jquery-mobile-plugins/tree/master/page-params)

我刚刚添加了这个并在页面更改时运行搜索，获取搜索的页面参数。

# c# - 捕捉到边缘

> ID：10251544
> 
> 赞同：0
> 
> 时间：2012-04-20T18:28:03.253
> 
> 标签：c#, wpf, xaml

如何将一个简单的窗口捕捉到屏幕（桌面）边缘？

我[使用名为 Huddled 的库找到了这篇文章](http://huddledmasses.org/wpf-windows-that-snap-to-screen-edges/)，但我无法使用它进行编译。有什么问题吗？

```
<Window x:Class="CMD_Bar.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:huddled="http://schemas.huddledmasses.org/wpf"
    Title="CMD" Height="500" Width="500" Topmost="True" WindowStyle="None" AllowsTransparency="True" FontSize="12">

<huddled:Native.Behaviors>
    <huddled:SnapToBehavior SnapDistance="20" />
</huddled:Native.Behaviors>

<Grid>       
    <Label Content="Something" />
</Grid> 
```

**编辑：** 这是错误消息：

> XML 命名空间“http://schemas.huddledmasses.org/wpf”中不存在标记“Native.Behaviors”。线 9 位置 6
> 
> 找不到类型“huddled:SnapToBehavior”。确认您没有丢失程序集引用并且所有引用的程序集都已构建。D:\CMD-Bar\CMD-Bar\MainWindow.xaml

# eclipse - 从 subversion 打开 eclipse 项目（Subversive，本地存储库）

> ID：10251545
> 
> 赞同：0
> 
> 时间：2012-04-20T18:28:08.163
> 
> 标签：eclipse, svn, subversive

我的本地存储库中有该项目。存储库在磁盘格式中幸存下来，但 eclipse 没有。所以我想要做的是打开一个现有的存储库项目，我不能使用 SVN 的 Import/Project 来做到这一点，因为它似乎只接受 www 路径

我也无法创建存储库来代替旧存储库。我该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T19:02:24.130

`file://etc`在 Eclipse 中创建新存储库时输入 URL 文本框。

![在此处输入图像描述](../Images/4d323c72aa99597b9536e0057b0e1801.png)

# javascript - 编译 CoffeeScript

> ID：10251553
> 
> 赞同：0
> 
> 时间：2012-04-20T18:28:44.640
> 
> 标签：javascript, node.js, compiler-errors

我正在尝试编译 CoffeeScript，但它失败了。我安装了 Node.JS，将 $NODE_PATH 设置为 /home//bin （当然是我的用户名）。该目录包含以下文件：

```
browserify         coffee@1.1.3                     uglifyjs
browserify@1.10.8  coffee@1.3.1                     uglifyjs@1.0.6
cake               sharejs                          uglifyjs@1.0.7
cake@1.1.3         sharejs@0.5.0-pre                uglifyjs@1.2.6
cake@1.3.1         sharejs-exampleserver
coffee             sharejs-exampleserver@0.5.0-pre 
```

但我得到这个错误：

```
Error: Command failed: /bin/sh: node_modules/.bin/browserify: not found 
```

如何解决？不知道为什么它检查该目录。

我使用“cake webclient”使用Cakefile 编译它。

我正在使用 Ubuntu 11.10 x64，从源代码编译 ndm。

**按要求编辑：**

我有一个从 github 下载的项目，它是用 CoffeeScript 编写的。我想运行，所以我需要将它编译（构建或其他任何名称）为 JavaScript。项目的主干目录中有一个*Cakefile*。我到了那里并执行了*蛋糕*。它说有 3 个选项可供构建，其中之一是*cake webclient*，所以我执行了这个命令。它开始将 CoffeeScript 文件转换为 JavaScript 文件，但随后我在其中一个文件上遇到了该错误。这就是我所知道的情况：D

**已编辑（PATH 和 NODE_PATH 值）：**

```
pius@pius-laptop:~$ echo $PATH
/home/pius/bin:/usr/lib/lightdm/lightdm:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/opt/node/bin:/usr/local/share/npm/bin
pius@pius-laptop:~$ echo $NODE_PATH
/home/pius/bin
pius@pius-laptop:~$ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T18:59:26.257

我猜你没有`$NODE_PATH`正确设置，因为它在默认目录中查找。应该这样做：

```
export NODE_PATH="/home/$USER/bin" 
```

并检查它

```
echo $NODE_PATH 
```

编辑：

也许有些东西需要访问 npm。您可以尝试将其添加到您的路径中。

```
export PATH="$PATH:/usr/local/share/npm/bin" 
```

此外，将这些内容添加到您的`.bashrc`文件中，然后它们将可用于每个终端。您将需要重新启动终端或执行

```
source ~/.bashrc 
```

使更改生效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T03:06:42.120

尝试在 Ubuntu 11.10 x64 中下载 ndm 和 CoffeeScript 的预制包。如果这些工作，那么问题在于你的编译方式。如果它不起作用，那么问题出在您的操作系统安装上（缺少库、不同的文件夹等）。

# python - 在 unixen 上编写全屏、curses 样式、更新表格输出（a la top）的脚本

> ID：10251554
> 
> 赞同：6
> 
> 时间：2012-04-20T18:28:48.863
> 
> 标签：python, linux, bash, shell

我正在寻找 Linux 中的某种包/API，它们可以在列中显示输出，类似于如何显示`top`。

例如，在给定的时间间隔内不断清理和重写输出到全屏（我猜[watch](http://linux.die.net/man/1/watch)可能已经足够好。但我希望有一些 API 可以包裹在它上面）。

轻松按列排序。特别是如果我按 A 列排序，那么当我下次重新打印所有内容时，它会记住每次刷新输出时按 A 列排序。

当然，理想情况下它也可以为我处理键盘输入。

总而言之，我正在寻找可以帮助我以“ `top`”组织输出的方式组织输出的包或 API。

为了清楚起见：我显示的内容可能与系统统计信息完全无关。我只是喜欢 top 组织内容的方式。例如，我的输出内容可能是（并且它在不断变化，这就是它需要清理和重写的原因）：

> 时间 Col1 Col2
> 12 4 13
> 13 5 19
> 14 5 15

我可以按一个键说“A”，然后按时间排序。如果我按 B 键，则按 Col1 排序。如果我按一个键说 C 然后它按 Col2 等排序。

当然，这个输出内容可以完全在内存中，以任何数据结构组织。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T19:35:36.393

如果您想在 shell 中执行此操作，watch + printf 将是一个快速而肮脏的起点—— watch 每隔几秒钟重新运行一次脚本， printf 进行格式化，大致如下：

```
printf '%-20s %-20s\n' \
  header1 header2 \
  line1data1 line1data2 \
  line2data1 line2data2 ... 
```

...数据可能是在数组中构建和馈送的。简单地在您的脚本中循环并发出适当的控制代码以在您将要覆盖它时清除每一行（并在开始时移动到窗口顶部）是另一种合理的方法。

也就是说，这里的正确工具将是建立在 curses 之上的层。那里已经有许多更高级别的文本小部件 - 但我不知道有任何直接支持表格的东西。

如果您愿意编写 C，那么一个这样的 curses 包装器就是[GAP.Browse](http://www.gap-system.org/Packages/browse.html)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-21T17:45:01.467

我发现 Python 中的 curses 库可以满足这种需求。它仍然不支持列管理，但它提供了一个体面的解决方案，具有清晰的语言、漂亮的文档和易于管理的学习曲线。

如果其他人有更好的建议，我很乐意选择他作为最佳答案。

[http://docs.python.org/howto/curses.html](http://docs.python.org/howto/curses.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T20:09:27.267

有[CDK](http://invisible-island.net/cdk/)。我试了一下，还行，感觉有点像GTK。但是`printf`解决方案要干净得多。

如果您不介意脚本语言，可以尝试[rbcurse](https://github.com/rkumar/rbcurse)，它具有更多功能。虽然它有非常糟糕的文档。

# javascript - 按下 enter javascript 时的事件

> ID：10251555
> 
> 赞同：0
> 
> 时间：2012-04-20T18:28:49.223
> 
> 标签：javascript, event-listener

每当我按下向上或向下按钮时，我都可以检查是否按下了这些键，例如此处会触发警报：

```
 if ((38 in keysDown) ) { // Player holding up

       window.alert("up button was pressed");
 }

 if ((40 in keysDown) ) { // Player holding down

       window.alert("down button was pressed");
 } 
```

但是在这里即使我按下输入警报也不会播放

```
if ((13 in keysDown) ) { // player pushed on enter
       window.alert("enter key was pressed"); // here nothing happen
} 
```

我在一开始就使用这 3 行来添加事件监听器：

```
 keysDown = {};
   addEventListener("keydown", function (e) {keysDown[e.keyCode] = true;}, false);
   addEventListener("keyup", function (e) {delete keysDown[e.keyCode];}, false); 
```

但由于某种我不知道输入键不起作用的原因，问题出现在 firefox 上，在 Chrome 和 IE 上工作正常

提前致谢。

**编辑**我发现了问题，我使用的画布没有焦点，所以输入按钮不起作用，任何人都可以告诉我如何切换焦点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T18:33:01.273

输入的键码是 13。

这是一个检测回车键按下的简单事件方法：

编辑：我用更简单的东西编辑了我的帖子：

```
 function check() {
        if (window.event.keyCode == 13) {
            document.write("Enter pressed");
        }
    }

<body onkeypress="check()">
</body> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T18:39:11.280

`event.which`在 Firefox 和`event.keyCode`IE 中使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T18:54:52.300

> 编辑我发现了问题，我使用的画布没有焦点，所以输入按钮不起作用，任何人都可以告诉我如何切换焦点吗？

当然。
[如何将焦点设置到 HTML5 画布元素？](https://stackoverflow.com/questions/56771/how-do-you-set-focus-to-the-html5-canvas-element)

甚至更好：

**1-标签索引：**

```
$("#canvas")
    // Add tab index to ensure the canvas retains focus
    .attr("tabindex", "0")
    // Mouse down override to prevent default browser controls from appearing
    .mousedown(function(){ $(this).focus(); return false; }) 
    .keydown(function(){ /* ... bla bla bla ... */ return false; }); 
```

**2-将 contentEditable 设置为 true：**

```
// Add content editable to help ensure the canvas retains focus
$("#canvas").attr("contentEditable", "true")
$("#canvas")[0].contentEditable = true; 
```

来源：[如何使用 jquery 为 HTML 画布提供键盘焦点？](https://stackoverflow.com/questions/1829586/how-do-i-give-an-html-canvas-the-keyboard-focus-using-jquery)

# css - 如何创建一个扩展到一个高度然后显示滚动条的 DIV？

> ID：10251558
> 
> 赞同：3
> 
> 时间：2012-04-20T18:29:06.447
> 
> 标签：css, html, overflow

我正在尝试实现一个`DIV`包含一些文本的，并且行为如下：

*   固定宽度（500px）

*   上限高度（最多 400 像素）

    1.  如果文本呈现为 <400 像素（例如，100 像素高），则包含的 DIV 与文本一样高（在我们的示例中为 100 像素）。

    2.  如果文本渲染到 >400px，则包含 div 的高度只有 400px，并且通过 DIV 中的垂直滚动条处理 oveflow。

我知道如何实现 #2 ( `overflow: auto; position: relative`)，但这种行为取决于`height=400px`当然否定 #1 所需的行为。

这如何通过 CSS 实现？

我更喜欢一个合理的跨平台解决方案，如果这太难了，必须在 IE7、IE8 和 FireFox 10+ 上工作。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-20T18:32:13.283

Try a combination of [`max-height`](http://www.w3.org/wiki/CSS/Properties/max-height) and `overflow: auto;`.

[Example](http://jsfiddle.net/ysbL7/1/).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T19:02:36.143

您可以使用该`max-height`属性而不是`height`，但它在 IE6 中不起作用，它不尊重*任何*最小/最大属性。

如果必须使用 IE6，您将不得不使用 Javascript（唯一的其他方法是使用 IE 的专有 CSS 表达式，但它们的性能非常差，并且无论如何都依赖 JS 来启用）。

# php - 在电子邮件中包含 php 文件

> ID：10251559
> 
> 赞同：0
> 
> 时间：2012-04-20T18:29:09.863
> 
> 标签：php, email, include

嘿，我这里有这段代码，我想做的是将这个 html 文件中的内容包含到电子邮件中，但它似乎不起作用:( mime 类型好吗？是 php 不包括什么我在寻找？

```
 $to = "email@domainname.com";
        $subject = "Late Notice";
        $message .= include("latenotice.html");
        $from = "myfriend@hisdomainname.com";
        $headers = "From:" . $from;
        $headers .= "MIME-Version: 1.0\r\n";
        $headers .= "Content-Type: text/html; charset=ISO-8859-1\r\n";
        mail($to,$subject,$message,$headers); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T18:34:02.470

`include` doesn't return a string. It executes the file, which means the HTML will be echoed to the screen.

Try `file_get_contents` instead.

```
$message .= file_get_contents("latenotice.html"); 
```

Note: This will **not** execute any PHP code in the file. If you want that, you can use output buffering.

```
ob_start();
include("latenotice.html");
$message .= ob_get_clean(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T18:32:57.417

`include` only evaluates to a value when the included file `return`s something - `latenotice.html` probably just contains the content. I think you want to read the file:

```
$message .= file_get_contents("latenotice.html"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-20T18:33:40.227

[Include](http://us.php.net/manual/en/function.include.php) doesn't return a string, it includes executable code in the script.

You are probably looking for [`file_get_contents`](http://us.php.net/manual/en/function.file-get-contents.php):

```
$message .= file_get_contents('latenotice.html'); 
```

Also, you should look at a PEAR lib like [Mail_Mime](http://pear.php.net/package/Mail_Mime/redirected); attachments and mime types are not trivial to get right.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-20T18:31:56.430

如果您希望在包含后“返回”某些内容，则需要在包含的文件末尾添加一个返回。

像file.php

```
 return "My String"; 
```

电子邮件.php

```
$var = include('file.php'); // "My String" 
```

在您的情况下使用[file_get_contents](http://ca.php.net/manual/en/function.file-get-contents.php)。

# heroku - 使用现有应用程序管理 Heroku 多个环境

> ID：10251561
> 
> 赞同：2
> 
> 时间：2012-04-20T18:29:17.940
> 
> 标签：heroku

我有一个应用程序，将“heroku”配置为一个远程应用程序。
让我们将此应用程序称为“MyAppDev”

但是，我有另一个名为“MyAppLive”的应用程序，
我想像这样配置部署：

> git push 暂存
> 推送到 MyAppDev
> 
> git push 生产
> 推送到 MyAppLive

我怎样才能做到这一点？

另外，环境变量呢？
这两个应用程序都有 MongoLab，所以我希望 MyAppDev 应用程序使用它自己的数据库....

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-20T20:18:50.613

以下是您需要遵循的步骤

1.  `git remote rm heroku`- 这将从您的应用程序中删除 heroku 远程

2.  `git remote add production <production apps heroku git repo url>`- 这将添加一个名为“production”的新远程，指向生产应用程序 git repo url（您可以从 heroku.com 上的“我的应用程序”页面获取此信息

3.  `git remote add staging <staging apps heroku git repo url>`

现在这意味着您可以执行`git push production master`或`git push staging master`将您的代码库推送到任一仓库。

*注意*如果您需要将分支推送到 Heroku，您需要将它们推送到 Heroku 的主分支。

例如。假设你会在本地建立一个临时分支；

```
git push staging staging:master 
```

将您的本地暂存分支推送到暂存远程的主控。

您使用的任何插件都需要复制到登台应用程序中。

配置变量可以通过手动完成，`heroku config:set`也可以使用本页底部详细介绍的插件[https://devcenter.heroku.com/articles/config-vars](https://devcenter.heroku.com/articles/config-vars)允许您将 Heroku 变量推送和拉入 .env适合在本地与 Foreman 一起运行的文件。不过要小心覆盖变量 - 我倾向于手动执行变量，因为我通常没有很多变量。

# java - 对 facelets 页面中的某些元素使用相同的消息

> ID：10251567
> 
> 赞同：0
> 
> 时间：2012-04-20T18:29:34.577
> 
> 标签：java, jsf, facelets, custom-errors

现在我正在使用 JSF 2.0 和 facelets 创建一些网页。我有一个登录页面，其中包含除了登录面板之外的其他内容。

事情是我想为面板顶部的面板（用户名和密码）的 2 个输入字段显示相同的消息，但两者只有 1 条消息。当我使用`<h:messages>`代码时，代码会正确显示，但也会显示其他组件的所有其他消息。因为`<h:messages>`对于整个 facelet 来说是全局的。

我尝试使用两个`<h:message for="">`并为两个输入字段添加相同的消息，但随后该消息显示两次。

消息将是“用户名和/或密码不正确”。

如果其中任何一个不正确，我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T20:28:35.723

如果您通过 FacesContext.addMessage(..) API 在支持 bean 中手动添加这些消息，为什么不能只为用户名字段或整个登录面板添加它们？

如果您为此使用自定义验证器，则可以利用 UIInput.isValid() 方法并尝试以下操作：

```
<h:message for="password" rendered="#{username.valid}"/>
<h:message for="username"/>
<h:inputText id="username" binding="#{username}"/>
<h:inputText id="password" binding="#{password}"/> 
```

甚至

```
<h:outputText value="msg['genericErrorMessage']" rendered="#{!username.valid || !password.valid}"/> 
```

另一方面，不清楚为什么必须对用户名和密码字段应用两次相同的验证。

# svn - 是否可以从标签获取所有源代码到工作副本，然后提交到主干？

> ID：10251568
> 
> 赞同：0
> 
> 时间：2012-04-20T18:29:39.463
> 
> 标签：svn, tags, trunk

在svn中，我的工作副本连接到主干，现在我想从标签中的版本中获取所有东西并替换我工作副本中的所有东西，但是在替换之后，我希望我得到提交回主干，而不是标签，可能吗？

我发现如果工作副本的来源是从标签获取，那么它只能提交回标签，而不是主干。

我正在使用 subclipse 版本 1.8.8

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T18:55:27.423

1.  从存储库中删除主干目录
2.  将标签目录重命名为“trunk”

或者，您可以：

1.  签出目录 A 的中继线。
2.  签出目录 B 的标签。
3.  删除 A 中除 .svn 目录或多个目录之外的全部内容。（在旧版本中，每个目录中都有一个 .svn 子目录；在新版本中，结帐顶部只有一个 .svn 目录。）
4.  将 B 的全部内容复制到 A，但任何 .svn 目录除外。
5.  将 A 提交到主干。

根据您用于客户端 SVN 的内容，您可能需要对任何新文件或目录进行显式“添加”。命令行 SVN 使您可以执行单独的添加命令。Tortoise 会告诉您添加和删除的内容，您只需单击框即可。我认为 Eclipse 会自动处理添加和删除。（自从我使用 Eclipse 仅仅 7 个月，我已经忘记了细节。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T18:55:48.037

```
svn move $repo/trunk $repo/old-trunk
svn move $repo/tags/1.2.3.4 $repo/trunk 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T18:33:51.240

1.  svn merge trunk tag .
2.  you need to resolve conflicts if has any
3.  svn diff
4.  svn commit

# ajax - 将隐藏的 div 加载到 AJAX jQuery UI 选项卡（未来的 DOM 元素）

> ID：10251571
> 
> 赞同：1
> 
> 时间：2012-04-20T18:29:52.560
> 
> 标签：ajax, jquery-ui, dom, tabs, elements

我一直在尝试操作通过 AJAX 加载到 jQuery UI 选项卡中的内容。可以想象，这些元素是“未来”的 DOM 元素，不会被普通的 $(".someClass") 函数操作。

我读过使用 .live() 进行事件处理现在已弃用使用 jQuery 1.7+，并被新的 .on() 方法取代。

我的问题是我想隐藏的 div，当它加载到 AJAX 选项卡中时，必须在初始 DOM 加载之后进行操作，并且一开始不绑定到单击事件。

我的函数，目前包含在 $() 中，如下所示。

我认为对于使用点击处理程序的链接，我的语法是正确的，但我不确定在加载时“.hide()”我的“hiddenStory”div 的正确方法。

我还认为函数本身不应该包含在整体 $() 中？

任何帮助或建议将不胜感激。

```
$(function(){
    // this .hiddenStory div below is what I want to hide on AJAX load
    // need syntax and/or new methods for writing this function
$(".hiddenStory").hide();

   // this is a function that allows me to toggle a "read more/read less" area
   // on the "hiddenStory" div
$(".showMoreOrLess").on('click', (function() {
if (this.className.indexOf('clicked') != -1 ) {
    $(this).removeClass('clicked');
    $(this).prev().slideUp(500);
    $(this).html("Read More" + "<span class='moreUiIcon'></span>");
    }
    else {
    $(this).addClass('clicked');
    $(this).prev().slideDown(500);
    $(this).html("See Less" + "<span class='lessUiIcon'></span>");
    }       
}));
});

// prevents default link behavior 
// on BBQ history stated tab panes with    
// "showMoreOrLess" links
$('.showMoreOrLess').click(function (event) 
{ 
 event.preventDefault(); 
 // here you can also do all sort of things 
});
// /prevents default behavior on "showMoreOrLess" links 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T18:41:01.040

`display: none`当你想显示元素的内容时，你能设置via CSS 并覆盖它吗？另一种选择，如果您必须这样做，则在填充元素的 AJAX 加载的回调中添加 `$(".hiddenStory").hide()。例如：

```
$(".hiddenStory").load("http://myurl.com", function(){
        $(".hiddenStory").hide();
    }
); 
```

如果你不使用 .load 方法，你应该有某种回调来配合（例如，如果使用 $.ajax 则成功......）

# java - Java：Arrays.sort 快速排序和归并排序

> ID：10251573
> 
> 赞同：12
> 
> 时间：2012-04-20T18:30:00.733
> 
> 标签：java, sorting

> **可能重复：**
> [为什么 java 数组对不同类型使用两种不同的排序算法？](https://stackoverflow.com/questions/3707190/why-java-arrays-use-two-different-sort-algorithms-for-different-types)

因此，我正在阅读有关各种排序实现的 Arrays[文档。](http://docs.oracle.com/javase/6/docs/api/java/util/Arrays.html)我注意到一些实现使用了调整过的快速排序，而另一些则使用了修改后的合并排序。为什么会出现差异？

谢谢！

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-04-20T18:37:45.423

快速排序用于原始类型数组，而合并排序用于 Object[] 数组。

合并排序用于合并排序稳定的对象的主要原因 - 它不会重新排序相等的元素：[http ://en.wikipedia.org/wiki/Sorting_algorithm#Stability](http://en.wikipedia.org/wiki/Sorting_algorithm#Stability)

对于原语，排序的稳定性是没有意义的，因为您无法区分两个相等的值。因此，使用了快速排序（除非对对象数组进行排序，对其执行合并排序）。此外，快速排序可以就地完成，因此无需分配另一个数组。

# java - 让 DWR 传递一个空值，而不是转换为 false

> ID：10251574
> 
> 赞同：0
> 
> 时间：2012-04-20T18:30:02.897
> 
> 标签：java, javascript, spring, spring-mvc, dwr

我在 Spring 3.x Web MVC 应用程序的上下文中使用 DWR，我的`dwr-beans.xml`文件在其中声明了一个像这样的 bean：

```
<dwr:configuration>
    <dwr:convert type="bean" class="com.mypackage.Customer"/>
</dwr:configuration> 
```

该类`com.mypackage.Customer`具有一个类型属性`Boolean`（对象包装器，而不是`boolean`原语）。

此属性具有对业务逻辑有意义的三种不同状态。显然，它可以是真或假……但是一个`null`值对于表示尚未进行选择的信号是有意义的。

不幸的是，当一个 Java 对象通过 DWR AJAX 调用传递给 JavaScript 时……一个`null`值显示`false`在 JavaScript 对象上。我正在失去第三个有意义的“以上都不是”状态。

不幸的是，谷歌搜索并不是很有成效。有谁知道是否有办法让 DWR`null`作为 JavaScript `null`（或`undefined`）正确地通过 Java 传递？或者我可能一开始就做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T16:38:33.283

事实证明，默认情况下 DWR**确实可以**正确处理空值。我的问题更进一步……不是在浏览器和应用服务器之间，而是在应用服务器和它调用数据的远程 Web 服务之间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T18:53:37.393

这是一段代码，可以在`PrimitiveConverter`DWR 源代码中找到

```
if (paramType == Boolean.class)
{
    if (trimValue.length() == 0)
    {
        return null;
    }

    return (T) Boolean.valueOf(trimValue);
} 
```

每当您通过或其他任何事情时`null`，`asd`您都会得到 null 作为结果。您可以尝试使用自己的实现来扩展 DWR，这可能会相当棘手。或者`String`在您的 bean 中使用 3 种状态（“true”、“false”、“null”）。

# c++ - 如何访问已加载图像的各个 R/G/B 组件（较新的 C++ API）

> ID：10251582
> 
> 赞同：0
> 
> 时间：2012-04-20T18:30:33.550
> 
> 标签：c++, opencv

我见过类似的问题，但答案是针对旧的 C API。

我有一个用 加载的彩色图像`cv::Mat img = cv::imread("C:/some_image.jpg");` 通常，我用 访问灰度图像中的元素`img.at<float>(row, col)`，但这显然只会返回一个浮点数。如何在每个像素位置为每个分量 R、G、B 获取值（可能是浮点数？整数？）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T18:46:59.617

一种方法就像您一样，但是三个通道将存储在一个三维向量中，而不是一个通道浮点数中。

```
cv::Mat img = ...;
cv::Vec3f pixel = img.at<cv::Vec3f>(row, col);
// pixel contains [red, green, blue] values 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T06:18:15.733

你可以这样做：

```
img_channel_=image.channels();
img_rows_=image.rows;
img_cols_=image.cols;
if (image.isContinuous() && fg_img_.isContinuous() && moving_img_.isContinuous() && abandon_img_.isContinuous()) {
    img_cols_ *=img_rows_;
    img_rows_=1;
}
img_cols_*=img_channel_;
for (int i=0; i<img_rows_; ++i) {
    const int iindex=i*img_cols_;
    const uchar *piex=image.ptr<uchar>(i);//three channel
    for (int j=0,truej=0; j<img_cols_; j+=img_channel_, ++truej) {
       piex[0]=pixe[1]+piex[2];//B=G+R
    }
} 
```

# javascript - 权限被拒绝 在 Firefox 中获取属性 XPCComponents.utils

> ID：10251586
> 
> 赞同：1
> 
> 时间：2012-04-20T18:30:46.633
> 
> 标签：javascript, firefox

我想`Reflect.parse`在 Firefox 中的 JavaScript 中使用。

[MDN](https://developer.mozilla.org/en/SpiderMonkey/Parser_API)说通过

```
Components.utils.import("resource://gre/modules/reflect.jsm") 
```

但是，这会导致以下错误消息：

```
Error: Permission denied for <file://> to get property XPCComponents.utils 
```

我已经在 Firefox 11 和 Aurora 中尝试过。

我怎样才能访问`Reflect.parse`？

**编辑：**

错误消息是由于以下片段引起的：

```
Component.utils 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T06:45:50.033

这个问题没有真正的解决方案。至少可以说，wiki 中的文档[具有误导性。](https://developer.mozilla.org/en/SpiderMonkey/Parser_API)`Reflect.parse`

如果您想在 SpiderMonkey/Firefox 中使用“纯”JavaScript 解决方案，请不要依赖`Reflect.parse`.

我看到很多项目都使用[Narcissus](https://github.com/mozilla/narcissus)的解析器，我也应该这样做。

**编辑：** Esprima[项目](http://code.google.com/p/esprima/)是 Mozilla Parser API 的出色实现。替换完我所有的 150 多个测试用例后`Reflect.parse`仍然`esprima.parse`是绿色的，除了 5 个左右处理非标准的 SpiderMonkey 扩展，如`let`表达式（我觉得这非常令人印象深刻）。

# java - 在 Java 面板或对话框中持续更新

> ID：10251588
> 
> 赞同：0
> 
> 时间：2012-04-20T18:31:04.940
> 
> 标签：java, swing, redirect, dialog, console

我是一个巨大的新手，我有一个通常将项目打印到 Java 控制台窗口的程序。我希望这个程序成为一个用户可以与之交互的窗口。我没有使用对话框和面板的原因是因为这个程序需要多次打印到控制台窗口。传统的对话框不会持续更新或复合已经打印在盒子上的数据。我意识到还有另一种方法可以通过创建一个模仿 Java 控制台窗口的程序来做到这一点。因为我是菜鸟，所以这个网站上所有重定向问题和答案的 java 控制台都让我大吃一惊。谁能帮帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T18:41:44.953

请参阅[如何使用编辑器窗格和文本窗格](http://docs.oracle.com/javase/tutorial/uiswing/components/editorpane.html)可能会有所帮助并为您提供一些想法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T18:40:45.490

简短的回答是，每次您想更新文本框的内容时，再次调用 setText 函数。内容没有“附加”功能：您必须每次都提供全部内容。如果您想要模仿控制台窗口的东西，其中消息继续滚动，最简单的做法是将整个内容保存在 StringBuilder 中。每次将新文本附加到 StringBuilder 时，然后 setText(myStringBuilder.toString)。

我想你可以写 mybox.setText(mybox.getText()+"new contents")。这会有点低效，但可能没什么大不了的。

我不确切知道您在做什么，但是尝试将控制台输出重定向到文本框听起来更令人讨厌，这是值得的。只需将您的数据放在文本框中：不要将其写入其他地方，然后尝试将其取回并放在您想要的位置。我想如果你有数千行代码写入控制台，现在你希望它进入一个文本框，那么不必更改所有代码可能是有价值的。但是控制台应用程序的结构与 GUI 应用程序的结构如此不同，以至于更改输出语句可能是您必须返工的最少的事情。

# matlab - 使用containers.Map构建和使用哈希表

> ID：10251595
> 
> 赞同：0
> 
> 时间：2012-04-20T18:31:33.270
> 
> 标签：matlab

我正在尝试创建一个扩展查找表。我认为单元阵列是我想要的，但我不确定。该结构将使用行和未知数量的列进行初始化。我希望能够附加到每一行的末尾，并访问特定行中的所有值。

所需结构：

```
[1]  [4,5] [6,7]
[2]  [4,5] [6,7] [3,6]
...
[n]  [R1,B2] [R2,B2] ... [Rm, Bm] 
```

这就是我到目前为止所拥有的

```
%%% Build the R-table

n = 360;
k = {};
v = {};
for i = 1:n
  k{end+1} = i; % how would I get n keys without this loop?
  v{end+1} = {}; % how would I get n values without this loop?
end
rTable = containers.Map(k, v);

%%% add R,B pair to key I
I = 1;
R_add = 4;
B_add = 5;
current_list_temp = rTable(I); % can I add without using a temp variable?
current_list_temp{end+1} = {[R_add, B_add]};
rTable(I) = current_list_temp;

%%% read values for Nth pair in the Ith key
I = 1;
N = 1;
temp = rTable(I); % can I read the values without using a temp variable?
R_read = temp{N}{1}(1);
B_read = temp{N}{1}(2); 
```

有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T19:20:22.997

当用于索引`end`转换为最大允许索引时，您可以通过添加或相乘来操作它，所以而不是

```
first_empty_cell = ?
cell{index, first_free_cell} = [4,5] 
```

尝试

```
cell{index, end+1} = [4,5] 
```

# javascript - 使用 Outlook 发送电子邮件临时文件

> ID：10251596
> 
> 赞同：1
> 
> 时间：2012-04-20T18:31:36.667
> 
> 标签：javascript, email, outlook, wsh, jscript

我想创建一个文件，将其作为附件通过电子邮件发送，然后使用 JScript 删除该文件。

问题在于过早删除文件会阻止 Outlook 将文件附加到电子邮件中。

我将创建一个 MailItem 并使用类似于以下代码的内容显示它。电子邮件不会自动发送，但会显示出来，以便用户在必要时进行编辑。

```
var outlook = new ActiveXObject("Outlook.Application");
var msg = outlook.CreateItem(0);
msg.Recipients.Add(toAddress);
msg.Subject = subject;
msg.htmlbody = body;
msg.Attachments.Add(attachment);
msg.Display(); 
```

我的问题是，**什么时候可以安全地删除附件文件？**我知道 MailItem 有事件，我可以在 AttachmentAdd 事件中删除附件文件。但是，AFAIK，没有办法订阅 JScript 中的 ActiveXObject 事件。

我的想法：

*   如果 Attachments.Add 是同步的（或者如果 Display 等到所有附件都被读取），我可以立即删除该文件
*   我可以睡 x 秒，然后删除文件。
*   也许有一种订阅事件的方法，我还没有找到。

细节：

出于所有意图和目的，此脚本在 wscript 中运行。

这并不特定于任何 Outlook 版本。它应该适用于任何版本。

我还将在电子邮件中附加几个其他文件。

如果你有问题，就问吧。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T15:35:21.467

我尝试了以下代码并且它有效。

```
var fso = new ActiveXObject("Scripting.FileSystemObject");

var outlook = new ActiveXObject("Outlook.Application");
var msg = outlook.CreateItem(0);
msg.Subject = "Subject";
msg.Body = "Body";
msg.Attachments.Add(file);
fso.DeleteFile(file); // No problems.
msg.Display(); 
```

文档中的任何地方都没有提到它，但`Attachments.Add()`似乎是同步的。

# c# - 从静态函数引用非静态字段，反之亦然？

> ID：10251599
> 
> 赞同：2
> 
> 时间：2012-04-20T18:31:47.900
> 
> 标签：c#, winforms, dynamic, static

我想以编程方式确定我想要动态创建的一些控件的空间。所以，我想获取容器的高度并将其除以行数（一个常数）。

我有这个功能（这个代码是名为 dynamicPanel 的面板所在的表单的一部分）：

```
private static int getControlHeightToUse() {
  return (dynamicPanel.Height / NUMBER_OF_ROWS);
} 
```

...这给了我编译时错误，“*非静态字段、方法或属性需要对象引用 RememberNextGen_CRLogins.CRLoginsMainForm.dynamicPanel'*”

我不明白它想告诉我什么/它想要什么。

如果我删除“静态”：

```
private int getControlHeightToUse() {
  return (dynamicPanel.Height / NUMBER_OF_ROWS);
} 
```

...然后我得到编译时错误，“*字段初始化程序无法引用非静态字段、方法或属性 'TitanNextGen_CRLogins.CRLoginsMainForm.getControlHeightToUse()'*”

...在下面的指示线上：

```
public partial class CRLoginsMainForm : Form {

  int controlHeight = getControlHeightToUse(); // <-- err 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-20T18:35:29.443

一个`static`方法只能直接访问`static`类的成员，如果你想使用类的实例成员，你必须将类的实例传递给方法（或者像`static`单例一样有一个可用的实例） .

因此，您可以修改您的方法以接收阻止它成为静态的实例成员：

```
private static int getControlHeightToUse(Panel thePanel) 
{
  return (thePanel.Height / NUMBER_OF_ROWS);
} 
```

然后就直接`dynamicPanel`接电话了...

但是，实例方法可以访问`static`成员。请记住，`static`成员在所有实例之间共享并且即使不存在该类的实例也存在。因此他们不能调用实例成员，因为他们不知道您在谈论哪个实例。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-20T18:36:46.787

将 dynamicPanel 作为参数传递给静态方法

```
public partial class CRLoginsMainForm : Form {

  int controlHeight = getControlHeightToUse(dynamicPanel); 
```

更改 getControlHeightToUse 如下

```
private static int getControlHeightToUse(Panel panel) {
  return (panel.Height / NUMBER_OF_ROWS);
} 
```

如果您想从静态方法调用非静态方法，您可以执行以下操作

```
public class Foo
{
    // public method 
    public void Method1()
    {
    }

    public static void Data2()
    {
        // call public method from static method
        new Foo().Method1();

    }
} 
```

# javascript - jQuery是否有收集方法

> ID：10251604
> 
> 赞同：2
> 
> 时间：2012-04-20T18:32:08.443
> 
> 标签：javascript, jquery

我有这个代码

```
 var selected = new Array();
        $(".client_associates_users input:checked").each(function(index) {
            selected.push($(this).val());
        }); 
```

它工作得很好，但我想知道 jQuery 是否有一个收集，所以我不必创建一个数组并推送到它。

我基本上想要检查的输入字段的所有值

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-20T18:34:16.200

Yes, `$.fn.map` [http://api.jquery.com/map/](http://api.jquery.com/map/) or `$.map` [http://api.jquery.com/jQuery.map/](http://api.jquery.com/jQuery.map/)

```
var $checkboxes = $(".client_associates_users input:checked"),
    selected = $checkboxes.map(function(i){
        return $checkboxes.eq(i).val();
    }).get(); 
```

or this for `$.map` (I prefer this one)

```
var $checkboxes = $(".client_associates_users input:checked"),
    selected = $.map($checkboxes, function(el,i){
        return $checkboxes.eq(i).val();
    }); 
```

**Update**
No longer recreates a jQuery object on each iteration.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-20T18:34:59.263

jQuery offers the `.map()` method,

```
var selected = $(".client_associates_users input:checked").map(function(index) {
    return this.value;
}).get(); 
```

This method will create a new array out of whatever data you `return` from within the callback. Be aware that you need to call `.get()` at the end to get a real array.

Ref.: [`.map()`](http://api.jquery.com/map/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T18:35:18.997

jQuery 对象是一个数组，因此如果您将 a 附加到该选择器的末尾，`$(".client_associates_users input:checked")`您应该能够访问这些值。`.val()`

# sql - SQL Query Help - Subqueries/Embed Queries

> ID：10251609
> 
> 赞同：0
> 
> 时间：2012-04-20T18:32:14.580
> 
> 标签：sql, oracle

I am just starting learn SQL at work, but I am having trouble with subquerys. I am hoping for not just a Query, but an explanation of how to create subqueries.

Current SQL Query

```
SELECT to_char(P_DT, 'yyyy-mm-dd HH:mi:ss'), COUNT, LATENCY 
FROM latency ORDER BY P_DT 
```

Returns

```
to_char(P_DT, 'yyyy-mm-dd HH:mi:ss'), COUNT, LATENCY
2012-04-20 03:42:00     83659   1m
2012-04-20 03:42:00 70305   2m
2012-04-20 03:42:00 105194  4m
2012-04-20 03:43:00 70277   1m
2012-04-20 03:43:00 0   2m
2012-04-20 03:43:00 0   4m 
```

What I need

```
to_char(P_DT, 'yyyy-mm-dd HH:mi:ss'), COUNT.LATENCY='1m', COUNT.LATENCY='2m', COUNT.LATENCY='4m'
2012-04-20 03:42:00 83659       70305      105194
2012-04-20 03:43:00 70227       0          0 
```

Thanks

Database has 3 columns: Timestamp, Count, Latency Type

```
Tmestamp = progressive timestamp for each min
Count = count, just a number
Latency Type = 1m, 2m or 4m 
```

Each timestamp has a 1m, 2m, and 4m latency but these are all different rows.

I need to return one row that is timestamp, count for 1m at timestamp, count for 2m at timestamp, count for 4m at timestamp

I can't change the database to instead of count1m column count2m column etc.

A different way of looking at it is merging these three queries into one

```
SELECT to_char(P_DT, \'yyyy-mm-dd HH:mi:ss\'), COUNT 
FROM LATENCY 
WHERE SOURCE_ID=\'2\' AND LATENCY = \'1m\' 
GROUP BY to_char(P_DT, \'yyyy-mm-dd HH:mi:ss\') 
ORDER BY to_char(P_DT, \'yyyy-mm-dd HH:mi:ss\')

SELECT to_char(P_DT, \'yyyy-mm-dd HH:mi:ss\'), COUNT 
FROM LATENCY 
WHERE SOURCE_ID=\'2\' AND LATENCY = \'2m\' 
GROUP BY to_char(P_DT, \'yyyy-mm-dd HH:mi:ss\') 
ORDER BY to_char(P_DT, \'yyyy-mm-dd HH:mi:ss\')

SELECT to_char(P_DT, \'yyyy-mm-dd HH:mi:ss\'), COUNT 
FROM LATENCY 
WHERE SOURCE_ID=\'2\' AND LATENCY = \'4m\' 
GROUP BY to_char(P_DT, \'yyyy-mm-dd HH:mi:ss\') 
ORDER BY to_char(P_DT, \'yyyy-mm-dd HH:mi:ss\') 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T18:39:31.033

如果我理解正确，应该这样做：

```
SELECT  to_char(P_DT, 'yyyy-mm-dd HH:mi:ss'), 
        SUM(CASE WHEN LATENCY = '1m' THEN COUNT ELSE 0 END) AS LATENCY1m, 
        SUM(CASE WHEN LATENCY = '2m' THEN COUNT ELSE 0 END) AS LATENCY2m, 
        SUM(CASE WHEN LATENCY = '4m' THEN COUNT ELSE 0 END) AS LATENCY4m
FROM latency 
GROUP BY to_char(P_DT, 'yyyy-mm-dd HH:mi:ss')
ORDER BY to_char(P_DT, 'yyyy-mm-dd HH:mi:ss') 
```

# c# - CollectionAssert.AreEqual Failing

> ID：10251611
> 
> 赞同：8
> 
> 时间：2012-04-20T18:32:31.870
> 
> 标签：c#, .net, nunit

I am trying to compare two Lists using

```
 CollectionAssert.AreEqual(ListExpected, ListActual); 
```

But I am getting an exception

```
Expected and actual are both <System.Collections.Generic.List`1[API.Program.Relation]> with 11 elements
  Values differ at index [0]
  Expected: <API.Program.Relation>
  But was:  <API.Program.Relation> 
```

But when I compared the zero element using `Assert.AreEqual` on field by field everything was fine.

Any idea why I cannot compare using `CollectionAssert`

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-20T18:49:28.527

`Equals(object other)`如果一个对象的方法返回 true ，那么在 .NET 中，一个对象被“声明”为等于另一个对象。您需要为您的`API.Program.Relation`类实现该方法，否则 .NET 会认为您的对象不同，除非它们是引用相等的。所有字段都相同的事实对 .NET 来说并不重要：如果您需要逐字段相等语义，则需要提供`Equals`支持它的实现。

当你覆盖`Equals`时，不要忘记覆盖`GetHashCode`- 这些必须一起覆盖。

如果您不想或`Equals`由于某种原因无法覆盖，您可以使用一个带有实例的[重载`CollectionAssert.AreEqual`](http://msdn.microsoft.com/en-us/library/ms243703%28v=vs.80%29.aspx)`IComparer`来帮助比较集合元素。

# objective-c - 如何使用 CGContextPathContainsPoint() 来检测一个点？

> ID：10251626
> 
> 赞同：0
> 
> 时间：2012-04-20T18:33:21.613
> 
> 标签：objective-c, mkmapview, cgcontext

我用这个函数在两点之间画了一条路径。我从谷歌的 API 得到坐标，这没有问题。我的问题是，如何指定特定点是否在我绘制的路径内？我正在尝试使用`CGContextPathContainsPoint()`，但没有运气。

```
-(void)updateRouteView {
    CGContextRef context =  CGBitmapContextCreate(nil,
                                                 routeView.frame.size.width,
                                                 routeView.frame.size.height,
                                                 8,
                                                 4 * routeView.frame.size.width,
                                                 CGColorSpaceCreateDeviceRGB(),
                                                 kCGImageAlphaPremultipliedLast);

    CGContextSetStrokeColorWithColor(context, lineColor.CGColor);
    CGContextSetRGBFillColor(context, 0.0, 0.0, 1.0, 1.0);
    CGContextSetLineWidth(context, 5.0);

    // routes : array of coordinates of the path
    for (int i = 0; i < routes.count; i++) {
        CLLocation* location = [routes objectAtIndex:i];
        CGPoint point = [mapView convertCoordinate:location.coordinate toPointToView:routeView];

        if (i == 0)
            CGContextMoveToPoint(context, point.x, routeView.frame.size.height - point.y);
        else
            CGContextAddLineToPoint(context, point.x, routeView.frame.size.height - point.y);
    }

    CGContextStrokePath(context);

    // this is the point I want to check if it is inside the path
    CLLocationCoordinate2D checkedLocation;
    checkedLocation.latitude = 37.782756;
    checkedLocation.longitude =  -122.409647;
    CGPoint checkedPoint = [mapView convertCoordinate:checkedLocation toPointToView:routeView];
    checkedPoint.y = routeView.frame.size.height - checkedPoint.y;

    // even if the checkedPoint is inside the path, the result is false    
    BOOL checking = CGContextPathContainsPoint(context, checkedPoint, kCGPathStroke);
    if (checking)
        NSLog(@"YES");
    else
        NSLog(@"NO");

    CGImageRef image = CGBitmapContextCreateImage(context);
    UIImage* img = [UIImage imageWithCGImage:image];

    routeView.image = img;
    CGContextRelease(context);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T18:42:19.197

在你检查你的观点之后调用 CGContextStrokePath(context) 。一旦被击中，Quartz 将清除当前路径。

# node.js - npm install formidable error in installation

> ID：10251630
> 
> 赞同：4
> 
> 时间：2012-04-20T18:33:44.457
> 
> 标签：node.js

Hi I am following the book node beginner at nodebeginner.org and writing the file upload code. Everything worked fine but when i am trying to install the formidable package, it gives the following error:

```
 naphstor@ubuntu:~/node$ npm install formidable

    node.js:201
            throw e; // process.nextTick error, or 'error' event on first tick
                  ^
    Error: No such module
        at Object.<anonymous> (/usr/share/npm/lib/utils/output.js:8:21)
        at Module._compile (module.js:432:26)
        at Object..js (module.js:450:10)
        at Module.load (module.js:351:31)
        at Function._load (module.js:310:12)
        at Module.require (module.js:357:17)
        at require (module.js:368:17)
        at Object.<anonymous> (/usr/share/npm/lib/utils/log.js:21:14)
        at Module._compile (module.js:432:26)
        at Object..js (module.js:450:10) 
```

I have no idea about this and tried to search a lot but no help. i even tried using

```
 npm install https://github.com/felixge/node-formidable.git 
```

but i get the same error. any help???

# vb.net - 如何从字符串末尾的某个位置删除一个字符？

> ID：10251632
> 
> 赞同：1
> 
> 时间：2012-04-20T18:33:51.380
> 
> 标签：vb.net, string, trim

我有一个字符串，例如：

```
 Dim str as string = xxxxxxxxxxxxxxxxxxxx£xxx£xxxx**£**xxxxxxxxxx 
```

我想从末尾删除始终位于某个位置（例如第 11 个）的`£`包围。`*`整个字符串很长，总是在大小变化，从一开始就无法计数。我也不能使用`Replace`，我不想删除的其他位置可能有相同的字符。

* * *

**解决方案：**

```
Dim rst As String = str.Remove(str.Length - 11, 1) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T18:42:08.483

如果它总是从最后开始的第 11 个字符，你可以这样做......

```
 Dim strTargetString As String = "xxxYxxxxxxxxxx"
    Dim strTargetString2 As String = "xxxxxxxYxxxxxxxxxx"

    Dim strResult As String = Mid(strTargetString, 1, (Len(strTargetString) - 11)) & Microsoft.VisualBasic.Right(strTargetString, 10)
    Dim strResult2 As String = Mid(strTargetString2, 1, (Len(strTargetString2) - 11)) & Microsoft.VisualBasic.Right(strTargetString, 10) 
```

请注意，[String.SubString](http://msdn.microsoft.com/en-us/library/system.string.substring.aspx)是一种比 Mid 更现代的方法，但我出于偏好和示例使用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T18:43:10.193

编辑：哎呀，我不知道我在第一部分的想法。

第一部分的正确版本是：

```
str = str.Substring(0, str.Len -13) + str.Substring(str.Len-11); 
```

函数也可能有一个重载，`String.Delete`它允许您使用负数来表示从字符串末尾开始的字符数——我知道 C# 等效项确实如此。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-20T18:46:38.227

这对于使用前瞻的正则表达式替换操作相当简单：

```
Dim str as String = "xxxxxxxxxxxxxxxxxxxx£xxx£xxxx£xxxxxxxxxx"
Dim str2 as String = Regex.Replace(str, "£(?=.{10}$)", String.Empty) 
```

这将针对单个字符，后跟任意十个字符，然后是字符串的结尾，并将其替换为`String.Empty`值（或者`""`如果您愿意的话）。

# c# - Can anonymous types be used in text templates?

> ID：10251634
> 
> 赞同：3
> 
> 时间：2012-04-20T18:33:52.517
> 
> 标签：c#, t4, anonymous-types, implicit-typing

I am writing a [text template](http://msdn.microsoft.com/en-us/library/bb126478.aspx) and have the following line of code:

```
Tuple<string, int, bool>[] tupleArray = new[]
    {
        new Tuple<string, int, bool>("apple", 4, true),
        new Tuple<string, int, bool>("grape", 1, false)
    }; 
```

I would like to convert this to an array of [anonymous types](http://msdn.microsoft.com/en-us/library/bb397696.aspx):

```
var anonArray = new[]
    {
        new {Name = "apple", Diam = 4, Tasty = true},
        new {Name = "grape", Diam = 1, Tasty = false}
    }; 
```

The text template, however, though it appears to be a single contiguous function, does not allow the use of implicitly typed local variables.

Is there a simple way to bypass this limitation and use anonymous types within a text template?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T18:37:41.870

```
Dictionary<string, int> set = 
  {
      { "apple", 4 },
      { "grape", 1 }
  } 
```

这可能是你能做到的尽可能简洁。

编辑：如果你真的想要使用匿名对象的能力，你总是可以使用面包和黄油`dynamic`数组：

```
dynamic[] array = new dynamic[] { new { Name = "Apple", Diam = 4 }, ... } 
```

然后使用后期绑定来访问您的属性。反正 T4 模板也不具备任何智能感知功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T02:04:17.367

这应该工作得很好。在 Visual Studio 2010 中，我将您的 anonArray 代码直接粘贴到模板中，然后使用 foreach 循环遍历数组，一切都很好，正如我所料。这是作为模板的代码。

* * *

```
<#@ template debug="false" hostspecific="false" language="C#" #>
<#@ output extension=".txt" #>
<#
    var anonArray = new[] {
        new {Name = "apple", Diam = 4, Tasty = true},
        new {Name = "grape", Diam = 1, Tasty = false},
    };
#>
<# foreach ( var foo in anonArray) { #>
Hello <#= foo.Name #> of type <#= foo.GetType() #>
<# } #> 
```

* * *

T4 只是使用一些样板文件扩展模板，然后通过 CodeDOM 在其上运行 C# 编译器，因此通常情况下，在 C# 中的方法内部工作的内容在 T4 模板的主体中工作。如果您想查看我们正在编译的内容，请将您的模板代码粘贴到运行时（预处理）模板中，您将看到扩展作为其输出。

# spring - Resteasy 内置异常未在异常映射器中捕获

> ID：10251640
> 
> 赞同：2
> 
> 时间：2012-04-20T18:34:22.587
> 
> 标签：spring, exception, resteasy

我编写了一些异常映射器来捕获和处理内置的简单异常，如 NotFoundException、MethodNotAllowedException 等，示例代码如下所示：

```
@Provider
public class NotFoundExceptionMapper implements ExceptionMapper<org.jboss.resteasy.spi.NotFoundException>
{
    @Override
    Response toResponse(org.jboss.resteasy.spi.NotFoundException exception) {
         return Response.status(500).build();
         }
} 
```

我还在我的网络过滤器类中编写了一个 try catch 块。每当发生 NotFoundException 时，它不会在映射器中捕获，但会转到 Filter 中的 catch 块。

而我尝试了另一个异常映射器类来处理 JsonParsingException。这可以正常工作，并在发生 Json Parse 异常时从映射器给出正确的响应。

问题仅在于resteasy异常的情况。此外，Provider 已使用组件扫描中的 include-filter 标记在应用程序上下文中注册。

请指导我如何在映射器类本身中捕获简单的内置异常。

问候， RM

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-28T06:38:15.647

我有同样的问题。使用 @Component 注释 NotFoundExceptionMapper 应该可以修复它（或将 NotFoundExceptionMapper 作为 bean 添加到应用程序上下文（xml 文件）中）。

当你的 Spring 上下文启动时， NotFoundExceptionMapper 应该被注册（你应该在你的日志中像“Pre-instantiating singletons in ...”）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-12-21T13:32:30.783

这是我的演示项目

1) 一个带有 3 个 java 文件的简单 RESTful 应用程序：

1.1) RestNotFoundExceptionHandler.java

```
package demo.app;

import javax.ws.rs.NotFoundException;
import javax.ws.rs.core.MediaType;
import javax.ws.rs.core.Response;
import javax.ws.rs.ext.ExceptionMapper;
import javax.ws.rs.ext.Provider;

@Provider
public class RestNotFoundExceptionHandler implements ExceptionMapper<NotFoundException> {
    @Override
    public Response toResponse(NotFoundException e) {
        return Response.ok().entity(e.toString() + "\n").type(MediaType.TEXT_PLAIN).build();
    }
} 
```

1.2) AppRest.java

```
package demo.app;

import javax.servlet.http.HttpServletRequest;
import javax.ws.rs.GET;
import javax.ws.rs.Path;
import javax.ws.rs.Produces;
import javax.ws.rs.core.Context;
import javax.ws.rs.core.MediaType;

@Path("/")
public class AppRest {
    @GET
    @Path("millis")
    @Produces(MediaType.TEXT_PLAIN)
    public String refresh(@Context HttpServletRequest request) {
        try {
            return Long.toString(System.currentTimeMillis()) + "\n";
        } catch (Exception e) {
            return e.toString() + "\n";
        }
    }
} 
```

1.3) AppMain.java

```
package demo.app;

import javax.ws.rs.NotFoundException;
import org.jboss.resteasy.plugins.server.tjws.TJWSEmbeddedJaxrsServer;

public class AppMain {
    private static final int PORT = 8080;

    public static void main(String[] args) {
        AppRest appRest = new AppRest();
        TJWSEmbeddedJaxrsServer tjws = new TJWSEmbeddedJaxrsServer();
        tjws.setPort(PORT);
        tjws.setRootResourcePath("/rest");
        tjws.start();
        tjws.getDeployment().getRegistry().addSingletonResource(appRest);
        tjws.getDeployment().getProviderFactory().getExceptionMappers()
                .put(NotFoundException.class, new RestNotFoundExceptionHandler());
    }
} 
```

2）项目依赖，4个jar文件

```
jaxrs-api-3.0.9.Final.jar
resteasy-jaxrs-3.0.9.Final.jar
servlet-api-2.5.jar
tjws-3.0.9.Final.jar 
```

3）卷曲测试用例：

3.1) 正常情况：

```
$ curl http://127.0.0.1:8080/rest/millis
1419167594504 
```

3.2) RestNotFoundExceptionHandler 案例：

```
$ curl http://127.0.0.1:8080/rest/bad
javax.ws.rs.NotFoundException: Could not find resource for full path: http://127.0.0.1:8080/rest/bad 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T19:46:50.773

我尝试了同样的事情，但在尝试映射 UnsupportedMediaTypeException 时遇到了麻烦。

根据[http://docs.jboss.org/resteasy/docs/1.1.GA/userguide/html/ExceptionHandling.html](http://docs.jboss.org/resteasy/docs/1.1.GA/userguide/html/ExceptionHandling.html)和异常映射部分下的第一行，您似乎只能映射应用程序异常。

# c++ - Qt containers - which should I choose?

> ID：10251649
> 
> 赞同：2
> 
> 时间：2012-04-20T18:34:59.823
> 
> 标签：c++, qt, containers, stdset

`Qt` offers a set of `STL`-like [containers.](http://qt-project.org/doc/qt-4.8/containers.html)

However, there is no container available, which stores ordered values by their order *(like `std::set`)* and `QSet` for some reasons behaves like `std::unordered_set`. I realize that probably `O(1)` lookups in the "set" data structure called might be a great thing, but I certainly cannot understand why this decision was made.

Which container should I use to store ordered item collections *(I suspect that `QMap` with fictive values is a very poor choice)* and why doesn't `Qt` offer something like `std::set`?

I guess there might be some technical reason behind this, but, unfortunately, I can't think of one.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T21:20:13.383

来自维基百科：

> Haavard Nord 和 Eirik Chambe-Eng（Qt 的原始开发者和奇趣科技的首席执行官和总裁）于 1991 年开始开发“Qt”

同样来自维基百科，关于 STL：

> 贝尔实验室的 Andrew Koenig 没有意识到这项工作，并要求 Stepanov 在 1993 年 11 月的 ANSI/ISO C++ 标准化委员会会议上介绍主要思想。委员会的反应压倒性地赞成，并导致 Koenig 要求及时在 1994 年 3 月的会议上提出正式提案。尽管时间压力巨大，Alex 和 Meng 还是能够提出一份提案草案，并在那次会议上获得初步批准。

而从男人本人：

> “正如我经常说的，我认为不发布更大的标准库是我最大的错误。” ——Bjarne Stroustrup

Qt独立开发。就这样。使用 QMap 并继续您的生活。:)

*（注意：Qt 中有一个无序映射，叫做[QHash](http://doc.qt.nokia.com/4.7-snapshot/qhash.html#details)）*

如果你想不出一些有用或有趣的东西可以放在值槽中，那么你的程序可能还不够复杂，不能大惊小怪。您的关键对象中是否有数据成员可以轻松地在地图中创建值？你真的想不出东西放在那里吗？

如果您实际上确实每个条目都浪费了一个字符，那么这是您系统中真正的瓶颈吗？你有指标证明这一点吗？等等等等。

# python - 尝试使用 python 关闭 Access 数据库时，objAccess.Application.Quit 无法完全工作

> ID：10251652
> 
> 赞同：2
> 
> 时间：2012-04-20T18:35:12.503
> 
> 标签：python, ms-access

嗨，我正在从 Python 2.6.5 运行 MS Access (2010) 宏。它正在成功运行宏，但 accdb 文件并没有完全正确关闭。在我的宏运行后，它会显示 .laacdb 文件和 .accdb 文件。我认为执行 CloseCurrentDatabase 和 Quit 语句可以做到这一点，但事实并非如此。.laacdb 文件在我重新启动计算机后消失。谢谢你。

```
from win32com.client import Dispatch
strDbName = "C:\\converter\\MainConverter.accdb"
objAccess = Dispatch("Access.Application")
objAccess.Visible = False
objAccess.OpenCurrentDatabase(strDbName)
objDB = objAccess.CurrentDb()
objAccess.DoCmd.RunMacro('Export_to_PDF')
objAccess.Application.CloseCurrentDatabase()
objAccess.Application.Quit 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T18:39:51.990

在 VBA 中，我们通常设置对象变量`Nothing`来处理它们。在 Python 中，尝试显式删除您的`objAccess`变量。

```
del objAccess 
```

抱歉，我的 Python 因废弃而生锈，所以也许我的语法有误。但类似的事情可能会有所帮助。

另外，我不记得在方法之后是否需要一对括号`.Quit`。试试这样以防万一：

```
objAccess.Application.Quit() 
```

如果`objDB`仍然持有对 Access 应用程序/db 的引用，也将其删除。

```
del objDB 
```

但是，如果您实际上并没有在实际代码中的其他地方使用它，请`objDB`完全消除它。

# asp.net - 按钮控件事件处理程序

> ID：10251654
> 
> 赞同：1
> 
> 时间：2012-04-20T18:35:20.170
> 
> 标签：asp.net, vb.net

我是 vb.net 的新手，想知道这个问题。当您单击 Web 表单上的按钮控件时，Visual Studio 会自动在后面的代码中为您输入此代码。

```
 Protected Sub btnSave_Click(ByVal sender As Object, ByVal e As EventArgs) Handles btnFlightInfo.Click
     end Sub 
```

例如，我想从另一个方法调用这个方法。我该怎么做？我知道 sender 是实际的按钮对象，但 e 是什么？这是我到目前为止在另一个潜艇中的内容。只是想更好地了解这种方法的工作原理。

```
btnSave_Click(btnSave, ??what would you put there??) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T18:39:14.593

调用事件不是一个好主意，将您的代码从事件移动到另一个私有方法并在两个地方调用它。

```
Protected Sub btnSave_Click(ByVal sender As Object, ByVal e As EventArgs) Handles btnFlightInfo.Click
    ' Call your private method
End Sub

Protected Sub AnotherMethod
    ' Call your private method again here
End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T18:38:19.387

只是通过`EventArgs.Empty`，点击按钮没有什么重要的。不过，您可能会考虑反转它：拥有另一个`Sub`包含公共逻辑的，并从`Click`事件处理程序和您的其他方法中调用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-21T05:33:20.410

```
Protected Sub btnSave_Click(ByVal sender As Object, ByVal e As EventArgs)    Handles       btnSave.Click,btnsecond.Click 
```

dim btn as button=ctype(sender,button) if `enter code here`btn.text="save" else if btn.text="Second" end if ' 调用你的私有方法 End Sub

'查看基于发件人，你可以找出你点击了哪个按钮'如果你必须从另一个你调用的方法调用' btnsave_click(nothing,nothing)

' 至于什么是事件 args 是，'EventArgs 表示与该事件相关的数据，并且可以用来传递参数，'状态信息到事件处理程序以供处理代码决定要做什么。在这种情况下，它只是表示空事件参数的 EventArgs，但对于“例如，如果您有 ImageButton 的 Click 处理程序，您会注意到它的事件参数”为您提供了对 X 和 Y 坐标的访问权限。换句话说，事件参数可以由具有事件相关数据的更具体的类表示，具体取决于控件

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-20T18:40:59.917

您将使用委托发件人是按钮，e是事件触发发件人是侦听器，事件是捕手

# javascript - jQuery 清除 datepicker 字段中的值，绑定到未选中的复选框

> ID：10251660
> 
> 赞同：1
> 
> 时间：2012-04-20T18:35:45.737
> 
> 标签：javascript, jquery, asp.net-mvc, jquery-ui-datepicker

这是我的场景：
我有一个带有复选框的表单。
- 当它被选中时，我隐藏了另一个`<div>`具有终止日期输入字段的字段，该字段具有`datepicker`.
- 未选中复选框时，我想显示`<div>`终止日期字段。用户，单击日期，然后选择一个。

我无法弄清楚的问题：如果在选择日期后，用户再次选中复选框，如何将终止日期字段重置为空？

我将代码放在[jsfiddle](http://jsfiddle.net/z8gEy/15/)上。

我已经尝试过看似一百万种方法，但似乎没有任何效果。

对此的任何帮助，不胜感激！！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T18:45:03.040

我试了一下：

[http://jsfiddle.net/z8gEy/16/](http://jsfiddle.net/z8gEy/16/)

我只是在 hide 方法之后添加：

```
$("input[type=date][name$=TerminationDate]").val(''); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-10-07T14:03:05.497

```
var hdnFromDate = document.getElementById('FromDate').value;
if (hdnFromDate == '') {
    var picker = new Pikaday({
        field: document.getElementById('FromDate'),
        toString(date, format) { // using moment
            return moment(date).format('DD/MM/YYYY');
            // return moment(date).format('YYYY/MM/DD');
        },
    });
} 
```

# c# - URI 教程/文档

> ID：10251662
> 
> 赞同：0
> 
> 时间：2012-04-20T18:35:53.640
> 
> 标签：c#, wcf, uri

我正在开发需要通过 WebGet 调用接收参数的 WCF 服务。为了做到这一点，我意识到我将不得不通过 URI 模板传递它们。在尝试这样做时，很明显我缺乏 URI 格式的基本知识。

我试图找到一个好的教程或任何关于构建 URI 的基本文档都无济于事。

例如，什么？什么是其他真正基本的 URI 元素？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T18:42:44.720

[UriBuilder](http://msdn.microsoft.com/en-us/library/system.uribuilder.aspx)和[Uri RFC](http://www.ietf.org/rfc/rfc3986.txt)应该是很好的起点。

来自[UriBuilder.Query的示例](http://msdn.microsoft.com/en-us/library/system.uribuilder.query.aspx)

```
UriBuilder baseUri = new UriBuilder(
    "http://www.contoso.com/default.aspx?Param1=7890");
string queryToAppend = "param2=1234";

if (baseUri.Query != null && baseUri.Query.Length > 1)
    baseUri.Query = baseUri.Query.Substring(1) + "&" + queryToAppend; 
else
    baseUri.Query = queryToAppend; 
```

# asp.net-mvc - 在 MVC4 项目中使用 Json.NET 序列化程序

> ID：10251664
> 
> 赞同：6
> 
> 时间：2012-04-20T18:35:58.203
> 
> 标签：asp.net-mvc, serialization, asp.net-web-api, json.net

我开始学习 Json.NET，但在使用它的序列化程序时遇到了麻烦。我有一个带有 Web.API 服务的新 MVC4 项目：

```
public class PTE_TestsController : ApiController {

  PTE_TestsRepository _repository = new PTE_TestsRepository();

  // GET /api/PTE_Tests/5
  public HttpResponseMessage<string> Get(int id) {
    try {
       PTE_Test test = _repository.GetTest(id);
       return new HttpResponseMessage<string>(JsonConvert.SerializeObject(test));
    } catch {
       return new HttpResponseMessage<string>(HttpStatusCode.NotFound);
    }
  }
} 
```

JsonConvert.SerializeObject() 按预期工作并返回一个字符串。我的 Web.API 控制器将其作为 HttpResponseMessage 的一部分返回。在 Fiddler 中查看的最终结果不是 JSON 数据，而是 JSON 数据再次被序列化（我认为）：

```
"{\"ID\":1,\"Name\":\"Talar Tilt\",\"TagID\":1,\"PracticeID\":1,
   \"SpecificAreaID\":1,\"TypeID\":1,\"VideoID\":1,\"PicID\":1}" 
```

有人知道如何关闭默认序列化程序以便我可以直接使用 Json.NET 吗？顺便说一句，我没有使用默认的序列化程序，因为我不知道如何使它与复杂对象一起工作（PTE_Test 最终将包含 List 类型的成员）。

或者，如果有人可以解释如何将默认序列化程序用于复杂对象，它也将解决我的问题。MSDN 的解释对我没有帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-20T19:40:53.603

[Rick Strahl 有一个关于此](http://www.west-wind.com/weblog/posts/2012/Mar/09/Using-an-alternate-JSON-Serializer-in-ASPNET-Web-API)的博客，其中包含有效的代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-21T13:52:20.853

正如其他人指出的那样，您需要创建一个格式化程序并将其替换`DataContractSerializer`为`JSON.NET`序列化程序。虽然，如果你不急于专门使用 JSON.NET，有传言说下一个 beta/rc 将内置对 JSON.NET 的支持。

但是，从概念上讲，您缺少 WebAPI 的魔力的一部分。使用 WebAPI，您可以以本机状态返回对象（如果需要 OData 支持，则返回 IQueryable）。在您的函数调用完成后，Formatter 接管并根据客户请求将其转换为适当的形状。

因此，在您的原始代码中，您转换`PTE_Test`为 JSON 字符串并返回它，此时 JSON 格式化程序启动并序列化字符串。我修改了你的代码如下：

```
 public class PTE_TestsController : ApiController {
    PTE_TestsRepository _repository = new PTE_TestsRepository();

    public HttpResponseMessage<PTE_Test> Get(int id)  {
        try {
            PTE_Test test = _repository.GetTest(id);
            return new HttpResponseMessage(test);
        } catch {
            return new HttpResponseMessage<string>(HttpStatusCode.NotFound);
        }
     }
   } 
```

请注意您的函数如何返回`PTE_Test`而不是`string`. 假设请求带有请求标头，`Accept = application/json` 则将调用 JSON 格式化程序。如果请求的标头为 : `Accept = text/xml`，则调用 XML 格式化程序。

[这里](http://dotnet.dzone.com/articles/how-content-negotiation-works)有一篇关于这个主题的不错的文章。如果您是视觉学习者，Scott Gu 在[此视频中展示了一些使用 fiddler 的示例，开始时间约为 37 分钟](http://channel9.msdn.com/Events/TechDays/Techdays-2012-the-Netherlands/2364)。[Pedro Reys在这里对内容协商进行了](http://pedroreys.com/2012/02/17/extending-asp-net-web-api-content-negotiation/)更深入的研究。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T18:42:43.957

这样做的方法是使用格式化程序。

查看：[https](https://github.com/WebApiContrib/WebAPIContrib/tree/master/src/WebApiContrib.Formatting.JsonNet) ://github.com/WebApiContrib/WebAPIContrib/tree/master/src/WebApiContrib.Formatting.JsonNet 。

Json.NET 支持将在 Web API 的 RC 版本中。

# debugging - 调试淘汰赛选择值

> ID：10251667
> 
> 赞同：0
> 
> 时间：2012-04-20T18:36:31.627
> 
> 标签：debugging, select, knockout.js

如何使用 knockoutjs 调试选择值？我的尝试`data-bind="change: function(){debugger}`似乎没有奏效。

```
<p data-bind="visible: $data[$item.settings.name]['navigation_type']() == 0" >
  Link to Screen:<br/><select name="screen" data-bind="change: function(){debugger}, options: $item.element().screen.flow.navigable_screens, optionsText: function(item) { return item.attributes.name();}, optionsValue: 'permanent_id', value: $data[$item.settings.name].permanent_id"></select>
</p> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T18:54:31.713

我在调试 KnockoutJS 使用的内联值绑定时遇到了类似的问题。在我最近的项目中，我实现了一个松散的绑定模式，如下所述：

[http://addyosmani.com/blog/understanding-mvvm-a-guide-for-javascript-developers/](http://addyosmani.com/blog/understanding-mvvm-a-guide-for-javascript-developers/)

您可以在 JS 中声明所有绑定，从而调试它们。然后，您可以在 html 中使用自定义 data- 属性引用它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T18:55:26.693

不幸的是，淘汰赛并不能像您尝试使用它的方式那样工作。我从这段代码中假设：`data-bind="change:`您正在尝试绑定到 jquery 更改事件？如果是这样，请在此处查看选择列表的工作方式：

[http://knockoutjs.com/documentation/selectedOptions-binding.html](http://knockoutjs.com/documentation/selectedOptions-binding.html)

和这里：

[http://knockoutjs.com/examples/simpleList.html](http://knockoutjs.com/examples/simpleList.html)

Knockout 比 jQuery 优雅得多，但遵循 MVVM 模式而不是使用 jQuery 事件。我建议对 MVVM 模式有一个高层次的理解，同时学习[http://learn.knockoutjs.com/上的所有教程](http://learn.knockoutjs.com/)

# python - 如何以多线程方式将 Python Dict 转换为 JSON

> ID：10251669
> 
> 赞同：1
> 
> 时间：2012-04-20T18:36:51.227
> 
> 标签：python, json

我有许多大文件，有数千行 python dict 格式。我正在使用 json.dumps 将它们转换为 json 字符串。

```
import json
import ast

mydict = open('input', 'r')
output = open('output.json', "a")

for line in mydict:
        line = ast.literal_eval(line)
        line = json.dumps(line)
        output.write(line)
        output.write("\n") 
```

这完美地工作，但是，它以单线程方式进行。有没有一种简单的方法可以利用系统中的剩余内核来加快速度？

编辑：

根据我在这里开始使用多处理库的建议：

```
import os
import json
import ast
from multiprocessing import Process, Pool

mydict = open('twosec.in', 'r')

def info(title):
        print title
        print 'module name:', __name__
        print 'parent process: ', os.getppid()
        print 'process id:', os.getpid()

def converter(name):
        info('converter function')
        output = open('twosec.out', "a")
        for line in mydict:
                line = ast.literal_eval(line)
                line = json.dumps(line)
                output.write(line)
                output.write("\n")

if __name__ == '__main__':
        info('main line')
        p = Process(target=converter, args=(mydict))
        p.start()
        p.join() 
```

我不太明白Pool在哪里发挥作用，你能解释一下吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T18:45:44.880

我不知道有一种简单的方法可以让您从多线程中获得加速，但是如果您确实想要任何类型的加速，那么我建议您尝试使用`ujson`包而不是`json`. 它为我带来了非常显着的加速，基本上是免费的。`json`使用与使用常规包相同的方式。

[http://pypi.python.org/pypi/ujson/](http://pypi.python.org/pypi/ujson/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T19:10:47.400

Wrap the code above in a function that takes as its single argument a filename and that writes the json to an output file.

Then create a `Pool` object from the `multiprocessing` module, and use `Pool.map()` to apply your function in parallel to the list of all files. This will automagically use all cores on your CPU, and because it uses multiple processes instead of threads, you won't run into the global interpreter lock.

**Edit:** Change the main portion of your program like so;

```
 if __name__ == '__main__':
     files = ['first.in', 'second.in', 'third.in'] # et cetera
     info('main line')
     p = Pool()
     p.map(convertor, files)
     p.close() 
```

Of course you should also change `convertor()` to derive the output name from the input name!

Below is a complete example of a program to convert DICOM files into PNG format, using the [ImageMagick](http://www.imagemagick.org/) program

```
"Convert DICOM files to PNG format, remove blank areas."

import os
import sys # voor argv.
import subprocess
from multiprocessing import Pool, Lock

def checkfor(args):
    try:
        subprocess.check_output(args, stderr=subprocess.STDOUT)
    except CalledProcessError:
        print "Required program '{}' not found! exiting.".format(progname)
        sys.exit(1)

def processfile(fname):
    size = '1574x2048'
    args = ['convert', fname, '-units', 'PixelsPerInch', '-density', '300', 
            '-crop', size+'+232+0', '-page', size+'+0+0', fname+'.png']
    rv = subprocess.call(args)
    globallock.acquire()
    if rv != 0:
        print "Error '{}' when processing file '{}'.".format(rv, fname)
    else:
        print "File '{}' processed.".format(fname)
    globallock.release()

## This is the main program ##
if __name__ == '__main__':
    if len(sys.argv) == 1:
        path, binary = os.path.split(sys.argv[0])
        print "Usage: {} [file ...]".format(binary)
        sys.exit(0)
    checkfor('convert')
    globallock = Lock()
    p = Pool()
    p.map(processfile, sys.argv[1:])
    p.close() 
```

# flash - Flash 二进制套接字与 netty 通信

> ID：10251672
> 
> 赞同：-1
> 
> 时间：2012-04-20T18:36:52.753
> 
> 标签：flash, sockets, binary, netty

有人可以指点我为 netyy 服务器制作一个 flash 二进制套接字客户端吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T03:48:54.937

你可以在网上找到很多这样的例子，无论如何在这里粘贴一些代码花絮。

```
import flash.net.Socket;
private var remoteHost:String;
private var portNumber:int;

// Create a new Socket object and assign event listeners.
socket = new Socket();
socket.addEventListener(Event.CONNECT, connectHandler);
socket.addEventListener(Event.CLOSE, closeHandler);
socket.addEventListener(ErrorEvent.ERROR, errorHandler);
socket.addEventListener(IOErrorEvent.IO_ERROR, ioErrorHandler); 
```

一个连接netty服务器的函数

```
public function connect():Boolean
    {
        // Load policy file from remote server.
        //Security.loadPolicyFile("xmlsocket://" + remoteHost + ":" + policyPort);
        // Attempt to connect to remote socket server.
        try {
            trace("Trying to connect to " + remoteHost + ":" + portNumber + "\n");
            socket.connect(remoteHost, portNumber);
        } catch (error:Error) {
            /*
                Unable to connect to remote server, display error 
                message and close connection.
            */
            trace(error.message + "\n");
            socket.close();
            return false;
        }
        return true;
    } 
```

一个对我创建的 netty 游戏服务器执行登录功能的函数。您可以忽略登录等，只是试图展示它如何与 netty 一起使用。要查看实际的[java 游戏服务器代码，请转到提供的 github 链接](https://github.com/menacher/java-game-server)。

```
 private function connectHandler(event:Event):void {
        if (socket.connected) {
            socket.addEventListener(ProgressEvent.SOCKET_DATA, loginHandler);
                    var payLoad:ByteArray = new ByteArray();
            payLoad.writeByte(LOG_IN);//opcode sent back to netty server in my implementation
            payLoad.writeBytes(encodeMultiStrings(user, pass, roomName));// credentials
            trace("Payload length before encode is: " + payLoad.length);
            var login:ByteArray = encodeBytes(payLoad);
            trace ("Login bytes length: " + login.length);
            writeBytesToSocket(login);
        }else {
            trace("unable to connect\n");
        }
    } 
```

# iphone - iphone中的动画

> ID：10251675
> 
> 赞同：0
> 
> 时间：2012-04-20T18:37:04.073
> 
> 标签：iphone

我正在寻找有关动画的一些参考，这样当您单击应用程序时，它会为您带来第一个屏幕，但速度很慢。

有谁知道它是什么，请就这个问题给我建议。谢谢

编辑毕竟我只是想做一个漂亮的过渡。每当我点击应用程序时，第一个屏幕就会出现。我想让它变得更好，就像第一个屏幕慢慢地慢慢出现并显示在屏幕上一样。希望现在有意义。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T18:43:24.957

嗯，这是一个广泛的问题，但我认为你可以尝试 Cocos2D。有很多示例如何使用它，但一个简单的动画示例是这样的：[http ://www.raywenderlich.com/1271/how-to-use-animations-and-sprite-sheets-in-cocos2d](http://www.raywenderlich.com/1271/how-to-use-animations-and-sprite-sheets-in-cocos2d)

此外，还有一本名为“Learning Cocos2D”的好书，其中有一个管理菜单和加载层的好例子。[http://cocos2dbook.com/](http://cocos2dbook.com/)

我希望我能帮上忙。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T18:48:38.457

UIView 有很多动画方法。查看查看编程指南：

[http://developer.apple.com/library/ios/documentation/WindowsViews/Conceptual/ViewPG_iPhoneOS/AnimatingViews/AnimatingViews.html#//apple_ref/doc/uid/TP40009503-CH6-SW1](http://developer.apple.com/library/ios/documentation/WindowsViews/Conceptual/ViewPG_iPhoneOS/AnimatingViews/AnimatingViews.html#//apple_ref/doc/uid/TP40009503-CH6-SW1)

UIView 文档也有一章列出了动画相关的方法：http: [//developer.apple.com/library/ios/#documentation/uikit/reference/uiview_class/UIView/UIView.html#//apple_ref/doc/uid /TP40006816-CH3-SW131](http://developer.apple.com/library/ios/#documentation/uikit/reference/uiview_class/UIView/UIView.html#//apple_ref/doc/uid/TP40006816-CH3-SW131)

这是一个基于块的动画的示例，它将使用它的 alpha 值在视图中淡出：

```
NSTimeInterval animationDuration = 0.3;
CGFloat startValue = 0.0;
CGFloat endValue = 1.0;

myView.alpha = startValue;

[UIView animateWithDuration:animationDuration delay:0.0 options:UIViewAnimationOptionAllowUserInteraction animations:^{
                myView.alpha = endValue
    }
                     completion:^(BOOL finished){
                          // If you need to do something additional once the animation is finished, place it here.
                     }]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-20T18:48:54.487

我假设您的意思是在应用程序启动后淡出启动屏幕？您可以将这样的内容添加到 applicationDidFinishLaunching 以在启动时立即全屏显示启动画面，然后将其淡出

```
UIView *topView = self.window.rootViewController.view;
bootSplashView = [[UIImageView alloc] initWithFrame:[[UIScreen mainScreen] applicationFrame]];
bootSplashView.image = [UIImage imageNamed:@"iPhoneDefault.png"];
[topView addSubview:bootSplashView];
[self performSelector:@selector(fadeBootScreen) withObject:nil afterDelay:0]; 
```

然后在一个单独的方法中：

```
- (void)fadeBootScreen
{
    [UIView animateWithDuration:0.4 delay:0.0 options:UIViewAnimationCurveEaseIn animations:^{
        bootSplashView.alpha = 0.0;
    } completion:^(BOOL finished) {
        [bootSplashView removeFromSuperview];
        bootSplashView = nil;
    }];
} 
```

确保将“bootSplashView”添加为类变量。如果您的应用程序可以以不同的方向启动（与 iPad 相关），请通过加载不同的图像来专门针对这些情况。

# xcode4 - XCode Utilities 区域中缺少属性检查器

> ID：10251678
> 
> 赞同：0
> 
> 时间：2012-04-20T18:37:37.573
> 
> 标签：xcode4, interface-builder

我不知道我做了什么...

目前，我的实用工具区域中只有文件和快速帮助检查器。我错过了所有其他人，特别是属性检查器。

我试过查看 > 实用程序，但只看到文件和快速帮助......缺少其他人。他们早些时候在那里。不知道他们在什么时候失踪了。我仍然习惯于 Mac 键盘，并且可能已经敲击了导致这种情况发生的键。

关于如何让失踪的检查员回来的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T19:20:29.727

它们是上下文相关的。额外的检查器会根据您选择的内容出现。如果您没有在项目导航器中选择 xib 并在其中选择项目，则不会获得属性检查器，因为没有要检查的属性...

# html - IE 和 Firefox 的布局问题，Chrome 工作正常

> ID：10251680
> 
> 赞同：-2
> 
> 时间：2012-04-20T18:37:43.097
> 
> 标签：html, css, layout, cross-browser

布局仅在 Chrome 中运行良好。在 IE 和 Firefox 中，它无法正常工作，并且所有内容似乎都向左对齐，并且没有显示外包装。

我已按要求添加了 HTML 代码

```
/* CSS Document */

/* Reset */

body  {background-color:#6CF; }

/* Headings */

h1, h2, h3, h4, h5, h6 (font-weigth: bold;}

h1  { font-size: 35px; color:blue }
h2  { font-size: 25px; color:blue }
h3  { font-size: 15px;  color: red;}

/* Text Elements */

a               {   }
a.link          {   }
a.visited       {   }
a.active        {   }
a.focus         {   }
a.visited       {   }
a.visited       {   }

/* container */

#outerwrapper  { width: 960px; margin:0px auto; background-color:white;   }

#wrapper       { width: 900px; margin:0px auto; background-color:white;   }

#logo       {  margin: auto; text-align: center;  }

#navigation  {   text-align: center;  }
#navigation ul li { display:inline;  }
#navigation ul{ border-top: 1px #000 solid; border-bottom: 1px #000 solid; margin-bottom:20px; }
#navigation ul a{padding: 25px;}

#navigation a               { color: #33F;  }
#navigation a.link          { color: #33F;  }
#navigation a.visited       { color: #33F;  }
#navigation a.active        { color: #33F;  }
#navigation a.focus         { color: #33F;  }
#navigation a.visited       { color: #33F;  }
#navigation a.visited       { color: #33F;  }

#banner     {margin-bottom: 30px;    }

.content   { width: 900px; margin:auto; width: 900px; float:top; text-align:center }
.content-main { width: 500px; margin:auto; font-weight:bold; font-size:20px; text-align:left}  

#news  {width: 200px; float:right; padding:0px;}  

.date {font-weight: bold;}

.footer { clear:both; padding-top: 5px; padding-bottom: 5px;}
.footer-text {text-align:center}

#mainimages {margin-top: 20px; width: 700px; float: left;}

aboutimages {margin-top: 20px; width: 700px; float: left;}

.servicesimage {width: 200px; float:left; margin-top: 40px;  margin-left:20px;}

.servicelistleft {width: 300px; float:right; margin-top: 40px; }

.servicelistright {width: 300px; float:right; margin-top: 40px; margin-left:20px; }

.centertable { width: 500px; margin:auto;
    margin-top: 30px;} 
```

HTML

```
> <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>
<link href="css/styles.css" rel="stylesheet" type="text/css" media="screen" />
</head>

<body>

<div id ="outerwrapper">
   <div id="wrapper">
            <div id="logo">
                <h1><img src="images/logo.jpg" width="248" height="153" alt="Conti Computer Shop" /></h1>
            </div>

            <div id="navigation">
            <ul>
                <li><a href="index.html">HOME</a></li>
                <li><a href="about.html">ABOUT</a></li>
                <li><a href="services.html">SERVICES</a></li>
                <li><a href="contact.html">CONTACT</a></li>
        </ul>
            </div>
             <div id ="banner">
                <p><img src="images/test.jpg" width="900" height="202"/></p>
            </div>
            <div class ="content">
            <h1>Your One Stop Shop for all Computer Needs !</h1>

            <p class = "content-main">Welcome to our new website where you can find more about us, what Services we offer and contact us for more information. Rest Assured that our priority will always be to provide an excellent service at a good price. Thank You.            </p>
            </div>
            <div id = "news">
              <h2>Latest News</h2>
                <p class="date">April 20, 2012</p>
                <h3>Acer Laptops now available</h3>
                <p class="date">April 12, 2012</p>
                <h3>New Gadgets Just Arrived</h3>
                <p class="date">April 05, 2012</p>
                <h3>New HP Computers in stock</h3>
                <p class="date">April 02, 2012</p>
                <h3>Students discounts Launched</p>
            </div>
            <div id="mainimages">
                    <p>
                    <img src="images/sales.jpg" width="340" height="276" />
                    <img src="images/service.jpg" width="340" height="276" />
                    </p>

            </div>
     <div class ="footer">
            <p class="footer-text"> 2012 - Conti Design</p>
            </div>
  </div>
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T19:37:05.487

问题的根源可能是您的 CSS 和 HTML 均无效。通过位于以下位置的各自的 W3C 验证器运行它们：

[http://validator.w3.org](http://validator.w3.org)

[http://jigsaw.w3.org/css-validator](http://jigsaw.w3.org/css-validator)

出现错误。

对于您的 CSS：

```
11   h1, h2, h3, h4, h5  Parse Error [ (font-weigth: bold;} h1]
51   .content    Value Error : float top is not a float value : top 
```

第一列是行号。对于 HTML，它的大多数抱怨似乎都源于此：

```
 Line 44, Column 51: end tag for element "p" which is not open
                <h3>Students discounts Launched</p> 
```

修复您的 HTML 和 CSS，重新验证，然后在这些浏览器中重试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T11:28:42.017

您应该检查以确保您的缩放设置在 chrome 上正确。我想知道为什么布局在 ie 和 firefox 上很好，但不是 chrome，直到我检查并看到我在 chrome 上的缩放设置为 90%

# php - 将 Ajax 与 Javascript 混合使用

> ID：10251682
> 
> 赞同：0
> 
> 时间：2012-04-20T18:37:55.153
> 
> 标签：php, javascript, ajax

我发现我不能将 php 与 javascript 混合，所以我尝试了 AJAX。在下面的代码中，我希望 ajax 函数从 getcount.php 页面获取一个值并将其返回给调用者函数。下面的代码不起作用。错误在哪里？

```
<script type="text/javascript">
function getcount(day)
{
var xmlhttp;
if (window.XMLHttpRequest)
  {// code for IE7+, Firefox, Chrome, Opera, Safari
  xmlhttp=new XMLHttpRequest();
  }
else
  {// code for IE6, IE5
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }

xmlhttp.open("GET","getcount.php?"+day,true);
xmlhttp.send();

xmlhttp.onreadystatechange=function()
  {
  if (xmlhttp.readyState==4 && xmlhttp.status==200)
    {
    return xmlhttp.responseText;   
    }
}
 </script>

<script type="text/javascript">
$(function () {
var previousPoint;

var d1 = [];
 for (var i = 0; i <= 10; i += 1)
         d1.push([i, getcount(i)]);
  .
  .
  . 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T18:42:39.033

ajax 回调将是异步的，因此 getcount() 将返回 undefined 并且当回调返回时，它不会分配给任何东西

```
function getcount(day, arr) {
var xmlhttp;
...
xmlhttp.send();

xmlhttp.onreadystatechange=function() {
  if (xmlhttp.readyState==4 && xmlhttp.status==200) {
    arr.push([day, xmlhttp.responseText]);   
    }
}
$(function () {
var previousPoint;

var d1 = [];
 for (var i = 0; i <= 10; i += 1)
     getcount(i, d1);
... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T18:45:07.670

使用jQuery，它会容易得多：

```
<script type="text/javascript">
  $(function () {
  var previousPoint, d1 = [];

  var getCount = function(day){
    $.get("getcount.php?"+day, function(data){
      d1.push([day, data]);
    });
  }

  for (var i = 0; i <= 10; i += 1)
    getcount(i)
});
</script> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-20T19:07:10.270

将任何类型的 Ajax 查询与这种性质的循环混合并不是一个好主意。由于 Ajax 请求是异步的，它会产生一些有趣的竞争条件——正如已经提到的。

最好做一个 ajax 请求并在 php 中处理循环 - 然后返回一个数组。但是，同样重要的是，您需要了解默认情况下，其余的过程 javascript 代码不会等待 Ajax 方法返回。

请参阅[文档](http://api.jquery.com/jQuery.ajax/)以获取帮助

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-20T18:51:03.660

```
Try using Jquery ajax which is very easier for maintenance and debugging. Here is a sample 
ajax code

$.ajax({
 type: 'POST',  // can be get also
 url: 'yourpage.php',  // change name
 data: id,  // some data if u need to pass
 success: function(data) {  // returns date
       $('.result').html(data); // result 
 }
}); 

For details  http://api.jquery.com/jQuery.ajax/

Thanks. 
```

# jquery-ui - 在jquery中对div进行排序

> ID：10251697
> 
> 赞同：0
> 
> 时间：2012-04-20T18:39:11.673
> 
> 标签：jquery-ui

我将一个页面分为两个 div，即“leftPanel 和 RightPanel”。我正在尝试使用 Jquery 可排序方法对页面上的两个垂直 div 进行排序。我对使用什么 api 感到困惑。我只需要导入 Jquery-1.7.2.min.js 还是需要导入所有的 sortable.js、ui-widget.js、mouseover.js 等等......请帮帮我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T18:46:06.357

**[jQuery UI 的下载页面](http://jqueryui.com/download)**为您提供所需的一切。当您选择要使用的小部件时，页面会将适当的代码（包括 jQuery）打包到一个整洁的 zip 文件中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T18:46:25.107

转到此页面，然后下载您要使用的内容（我建议单击全部）

[http://jqueryui.com/download](http://jqueryui.com/download)

下载后，您会看到一个 zip 文件，解压缩它，然后您将看到所有必要的文件，包括 Jquery-1.7.2.min.js、jquery-ui-1.8.19.custom.min.js、jquery-ui -1.8.19.custom.css 和图像。

# objective-c - 以编程方式在 macOS 应用程序中创建和定位 NSButton？

> ID：10251703
> 
> 赞同：7
> 
> 时间：2012-04-20T18:39:26.450
> 
> 标签：objective-c, macos, cocoa, nsbutton

如何以编程方式在 macOS Cocoa 应用程序中创建和定位按钮？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-04-20T19:48:55.977

定位按钮 您需要更改按钮的原点 x 和 y。查看我在下面编写的示例代码和注释。

**你可以这样做：**

```
-(void)awakeFromNib {

    //Start from bottom left corner

    int x = 100; //possition x
    int y = 100; //possition y

    int width = 130;
    int height = 40; 

    NSButton *myButton = [[[NSButton alloc] initWithFrame:NSMakeRect(x, y, width, height)] autorelease];
    [[windowOutlet contentView] addSubview: myButton];
    [myButton setTitle: @"Button title!"];
    [myButton setButtonType:NSMomentaryLightButton]; //Set what type button You want
    [myButton setBezelStyle:NSRoundedBezelStyle]; //Set what style You want

    [myButton setTarget:self];
    [myButton setAction:@selector(buttonPressed)];
}

-(void)buttonPressed {
    NSLog(@"Button pressed!"); 

    //Do what You want here...  
} 
```

** *WindowOutlet*是窗口所以不要忘记 IBOutlet 它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T19:36:23.050

所有按钮都是控件，所有控件都是视图，因此请按顺序查看：

*   查看[编程指南](http://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/CocoaViewsGuide/)
*   控制和[单元编程主题](http://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/ControlCell/)
*   按钮[编程主题](http://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/Button/)

# javascript - jQuery .select 有效，但 Javascript .select 无效

> ID：10251706
> 
> 赞同：4
> 
> 时间：2012-04-20T18:39:37.577
> 
> 标签：javascript, jquery, windows-mobile, internet-explorer-6

我正在为摩托罗拉/IE 6 设备构建一个移动站点。

出于某种我想不出的原因，jQuery 的 .select() 函数正在工作，但直接在 javascript 中调用它却不行。

```
<input type="text" id="lid" value="" class="as_done"> 
```

jQuery 的工作方式是这样的：

```
$('#lid').select(); 
```

不工作的方式是这样的：

```
document.getElementById('lid').select(); 
```

* * *

这让我很困惑。关于为什么会这样的任何想法？

编辑：我不想在 jQuery 中做任何事情。我只是想选择输入框中的文本。我不应该需要 jQuery 来做到这一点，但标准的方式是行不通的。[http://www.w3schools.com/jsref/met_text_select.asp](http://www.w3schools.com/jsref/met_text_select.asp)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T18:57:31.940

有趣的变化使它对我有用。也许这是 windows mobile IE 6 中的一个错误？

考虑以下 html：

```
<input type="hidden" id="lid_as" name="lid" value="1">
<input type="text" id="lid" value="" class="as_done"> 
```

呼叫`alert("document.getElementById('lid').name");`导致消息`lid`。这让我觉得它正在抓取ID实际上是lid_as的第一个输入框。

当我将输入移到框`lid_as`下方时，该功能正常工作。`lid``select`

所以这个 HTML 使它工作：

```
<input type="text" id="lid" value="" class="as_done">
<input type="hidden" id="lid_as" name="lid" value="1"> 
```

同样，这个问题与 WINDOWS MOBILE IE 6 有关。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T18:42:46.060

$() 函数返回一个 jquery 对象，而 document.getElementById 返回一个简单的 DOM 对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T18:48:24.890

可能是因为您没有提前调用 .focus()

```
document.getElementById('lid').focus();
document.getElementById('lid').select(); 
```

这是包裹在 jQuerys .select()

# javascript - 如何使用 C# 代码获取 confirm() 值

> ID：10251708
> 
> 赞同：0
> 
> 时间：2012-04-20T18:39:45.603
> 
> 标签：javascript, asp.net, ado.net, dom-events

我有一个按钮，需要获取`confirm()`值来执行数据库操作。例如：点击按钮时，弹出确认“是或否”的消息，如果是，则在数据库中进行删除操作，如果不是，则清除文本框。如何从 Javascript`confirm()`函数中获取返回值。请指教。

```
string jScript;

jScript = "<script> function processConfirm(answer) {if (answer) {return 'Facilitator Deleted';}else {return 'Cancelled';}} var confirmAnswer = confirm('You sure to delete ?');var theAnswer = processConfirm(confirmAnswer);alert(theAnswer);</script>";    
ClientScript.RegisterClientScriptBlock(this.GetType(), "keyClientBlock", jScript);         
/* SqlCommand cmd = new SqlCommand("TrainerFilter", conn);    
cmd.CommandType = CommandType.StoredProcedure;        
cmd.Parameters.Add("@EmployeeID", SqlDbType.Int, 50).Value = TextBox1.Text.Trim();        
cmd.Parameters.Add("@result", SqlDbType.Int, 50).Direction = ParameterDirection.Output;        
conn.Open();        
cmd.ExecuteNonQuery();*/ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T18:45:59.367

您可以将 confirm_proceed() 的值存储在 asp:HiddenField 您可以按如下方式修改脚本： function confirm_proceed() { var hiddenField = document.getElementById('hiddenFieldId');

```
 if (confirm("Are you sure you want to proceed?")==true)
   {
     hiddenField.value = 'true';
     return true;
   }
   else
   {
     hiddenField.value = 'false';
     return false;
   }
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T19:15:22.113

这有点令人困惑，但假设此确认与按钮单击相关联，您通常会执行以下操作：

```
<script type="text/javascript">
    processConfirm = function() {
        var result = confirm("Are you sure you want to delete this?");
        if (!result) {
            alert("Cancelled"); //or set a label or whatever
            return false; //cancel postback
        }
        return true; //perform postback
    }
</script>
<asp:Button ID="Button1" runat="server" OnClientClick="return processConfirm();" OnClick="Button1_Click" /> 
```

在代码隐藏中：

```
protected void Button1_Click(object sender, EventArgs e)
{
    //perform the delete logic since because if you reach here
    //you know that the user confirmed

    //throw up an alert when the page is reloaded confirming that the deletion
    //you could also set a label here instead of an alert if you wanted
    Page.ClientScript.RegisterStartupScript(this.GetType(), "confirmDelete", "alert('User was deleted');", true);
} 
```

# ruby-on-rails-3 - 调用和迭代 ActiveRecord::Relation 对象

> ID：10251713
> 
> 赞同：1
> 
> 时间：2012-04-20T18:39:56.330
> 
> 标签：ruby-on-rails-3, activerecord

我有以下 AR 关联：

```
Category :has_many :posts
Category :has_many :authors, :through => :posts
Post :belongs_to :author
Post :has_many :comments 
```

在我看来，我的目标是按帖子列出评论，并按作者列出特定类别的帖子。我的查询尝试如下所示，使用包含进行急切加载。

```
category = Category.first
category.authors.includes(:posts => comments) 
```

我希望我的视图列表如下：

```
author1
  post1
    comment1
  post2
    comment2
author2
  post3
    comment3 
```

但是，当我尝试遍历 ActiveRecord::Relation 对象时，我注意到第一级作者有重复，并且大小等于帖子的大小。有没有办法让我在第一级获得不重复的作者，然后能够遍历相关的帖子和​​他们的评论？

我想到的另一种方法是遍历 ActiveRecord::Relation 对象并将其重写为哈希，但首先我想看看是否有 AR 方式来执行此操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T09:30:40.087

一种方法是在关系上设置 :unique 属性。

```
 Category :has_many :authors, :through => :posts, :uniq => true 
```

因此， category.authors 将始终返回作者集。

签出：[rails 指南 - activerecord](http://guides.rubyonrails.org/association_basics.html)

# php - 多人共享字段怎么做？

> ID：10251719
> 
> 赞同：0
> 
> 时间：2012-04-20T18:40:30.307
> 
> 标签：php, ajax, html, sharing

与 Facebook 类似，我想做一个共享功能，用户可以选择将某些内容保密或与一个或多个人共享。我知道如何做一个下拉，但这限制了我只能为一个人做的能力。我该怎么做才能让人们以一种用户友好且不会混淆的方式选择超过 1 个人。

我正在考虑使用 AJAX 或者 HTML5 是否有一些东西，但我是那个领域的新手，所以我不知道。

最好的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T18:50:44.533

您可以使用 a `<select multiple>`，但这不是很用户友好。我会使用这样的东西：http: [//jqueryui.com/demos/autocomplete/#multiple](http://jqueryui.com/demos/autocomplete/#multiple)。

# python - 如何从 sql alchemy 过滤器中的字符串变量动态给出列名？

> ID：10251724
> 
> 赞同：46
> 
> 时间：2012-04-20T18:40:56.123
> 
> 标签：python, sqlalchemy

我想在 sql alchemy 过滤器中创建查询，但列是（动态）在变量中/在变量中指定。

原始查询：

```
db_session.query(Notice).filter(Notice.subject.like("%" +query+ "%")) 
```

我想做这样的查询：

```
col_name='subject'
db_session.query(Notice).filter(Notice.col_name.like("%" +query+ "%"))
col_name='status'
status=0
db_session.query(Notice).filter(Notice.col_name != 1) 
```

* * *

## 回答 #1

> 赞同：72
> 
> 时间：2012-04-20T23:08:28.113

只需使用[getattr](http://docs.python.org/library/functions.html#getattr)标准 python 库函数按名称获取属性：

```
col_name = 'subject'
db_session.query(Notice).filter(getattr(Notice, col_name).like("%" + query + "%")) 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2018-04-17T17:12:07.823

在较新的 sqlalchemy 版本中，应该这样做：

```
Notice.__table__.c[col_name] 
```

所以：

```
(db_session
    .query(Notice)
    .filter(Notice.__table__.c[col_name].like("%" + query + "%")
) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-03-04T15:03:40.910

我尝试了@vans 解决方案，但没有奏效。我总是收到一个 AttributeError 抱怨我的表没有该列。对我有用的是`table.columns`：

```
getattr(Notice.columns,col_name) 
```

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2018-11-19T11:35:27.510

接受的答案有一个解决方案，但已经过时了。

SQLAlchemy 1.3 建议将所有文本过滤器放入 中`text()`，并与`and`. [文档](https://docs.sqlalchemy.org/en/latest/orm/tutorial.html#using-textual-sql)

例子：`session.query(User).filter(text("id<224")).order_by(text("id")).all()`

来自不同查询的文档的另一个[示例](https://docs.sqlalchemy.org/en/latest/core/tutorial.html#using-text-fragments-inside-bigger-statements)

```
>>> s = select([
...        text("users.fullname || ', ' || addresses.email_address AS title")
...     ]).\
...         where(
...             and_(
...                 text("users.id = addresses.user_id"),
...                 text("users.name BETWEEN 'm' AND 'z'"),
...                 text(
...                     "(addresses.email_address LIKE :x "
...                     "OR addresses.email_address LIKE :y)")
...             )
...         ).select_from(text('users, addresses')) 
```

# jquery - 使用 Jquery 简单验证月份

> ID：10251729
> 
> 赞同：0
> 
> 时间：2012-04-20T18:41:14.610
> 
> 标签：jquery

我想做的是只用 jquery 验证一个文本字段。所以我想要它做的基本上是查看一个带有月份名称的数组，然后说这个人拼错了它没有提交的月份。

我不确定如何开始。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T19:53:49.647

首先，我认为 j089691 的评论是正确的。可能有更好的方法来做到这一点。

如果出于某种原因，你想这样做......你可以这样做[http://jsfiddle.net/uTRXb/](http://jsfiddle.net/uTRXb/)

# android - 具有原生代码支持的跨平台移动框架

> ID：10251731
> 
> 赞同：3
> 
> 时间：2012-04-20T18:41:36.387
> 
> 标签：android, c++, ios, frameworks, native

我正在寻找支持在 C++ 中构建本机库的跨平台框架列表。我的大部分遗留代码库都是用 C++ 编写的，我想在手机上使用本机代码部署我的应用程序，而不是使用客户端/服务器模型。用网络包装它会引入延迟、降低性能并降低用户体验。

我看过一些基本的，比如PhoneGap和Titanium，但我不能从他们的网站上看他们是否支持本机，或者他们对它的支持程度。我看过 JUCE，它是一个 C++ 框架，但不清楚它有多成熟。

**到目前为止我发现了什么**

*   juce：开源，小型
*   Moai：错误的文档
*   果酱：稳定、成熟
*   wxWidgets：仅测试版

**更新**

几年后，看起来 Qt 已经到了可能成为头号竞争者的地步。当时成熟的其他平台包括 Unity 和 Embarcadero。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T09:59:11.837

检查[MoSync](http://www.mosync.com/)，您可以使用 C、C++、HTML5、JavaScript 构建移动应用程序。检查他们的网站以查找大量技术信息。

# c# - 在显示表单之前/在 DataGridView 上设置单元格字体

> ID：10251743
> 
> 赞同：2
> 
> 时间：2012-04-20T18:42:26.893
> 
> 标签：c#, datagridview

**背景**

当我点击 WinForm 上的按钮时，我将数据加载到用作 DataGridView 数据源的 BindingSource 中。加载数据后，我对 DataGridView 进行一些修改；特别是，我 1) 将任何值为 DBNull 的单元格设置为字符串值“NULL”，2) 将相同的单元格设为斜体，以及 3) 突出显示某些行。

我正在做的简单示例：

```
private void btnFetch_Click(object sender, EventArgs e)
{
    // If there's already a DataSource, Dispose of it.
    if (bsMessageTracking.DataSource != null)
    {
        (bsMessageTracking.DataSource as DataTable).Dispose();
    }

    // Get new DataSource.
    bsMessageTracking.DataSource = GetDataTable(); // Details not relevant.

    // Show NULL values.
    foreach (DataGridViewRow row in dgv.Rows)
    {
        foreach (DataGridViewCell cell in row.Cells)
        {
            if (cell.Value is DBNull)
            {
                cell.Value = "NULL";
                cell.Style.Font = new Font(dgv.DefaultCellStyle.Font, FontStyle.Italic);
            }
        }
    }

    // Apply highlighting.
    foreach (DataGridViewRow row in dgvMessageTracking.Rows)
    {
        if (HighlightRow(row)) // Details not relevant.
        {
            row.DefaultCellStyle.BackColor = Color.LightYellow;
        }
    }
} 
```

数据根据输入到表单上的 TextBox 中加载。

**情况**

如果在单击按钮时发生这种情况，一切都会很好。但是，为了给用户提供一些便利，我允许这个表单加载预填充的数据——主表单将用要放入 TextBox 的数据实例化这个表单，并且这个 btnFetch_Click 处理程序将从构造函数中调用：

```
internal MessageTracking(string ID)
{
    InitializeComponent();

    // Setup data source.
    dgvMessageTracking.DataSource = bsMessageTracking;

    // Set ID and run query.
    if (ID != null)
    {
        // Set ID.
        txtlID.Text = ID;

        // Run!
        btnFetch_Click(null, null);
    }
} 
```

单元格的值发生了变化（所以我看到 NULL），但字体和突出显示不粘。

**我试过的**

如果我在 OnShown 方法中复制突出显示代码，突出显示会粘住。但是，在那里复制字体代码是行不通的。如果我把它放在 CellFormatting 中，我可以让字体保持不变，但这对我来说似乎有点过头了，因为我只需要在加载表单时运行一次 - 如果在表单可见*后运行进程，它就可以正常工作。*

**恳求**

如果有人有任何建议，我将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T20:32:37.607

对于您正在使用的事件处理程序，我建议使用@zimdanen 之类的 dataGridView Cell_Formatting。但是，这就是我如何使它工作的。

```
 private void small8PtToolStripMenuItem_Click(object sender, EventArgs e)
    {
        fontSize = 8;
        dataGridBatchHistory.Refresh();
    } 
```

fontSize 是我用来动态设置字体的整数，您可以通过这种方式设置大多数属性。比我打电话给我的 CellFormatting 函数

```
 private void dataGridBatchHistory_CellFormatting(object sender, DataGridViewCellFormattingEventArgs e)
    {
        e.CellStyle.Font = new Font("Tahoma", fontSize);
    } 
```

单击我的工具条菜单项后，这将使用新的正确大小更新我的表单。但是我相信这适用于您可以创建的许多事件！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T12:50:08.433

我想，由于缺乏响应，如果您希望在表单首次可见时显示格式，没有更好的方法。我已经删除了处理程序的`Show NULL values`一部分`btnFetch_Click`并添加了这个`dgvMessageTracking_CellFormatting`处理程序来处理这个功能：

```
private void dgvMessageTracking_CellFormatting(object sender, DataGridViewCellFormattingEventArgs e)
{
    if (e.Value is DBNull)
    {
        e.Value = "NULL";
        e.CellStyle.Font = new Font(dgvMessageTracking.DefaultCellStyle.Font, FontStyle.Italic);
    }
} 
```

# data-structures - List.permute 的性能

> ID：10251744
> 
> 赞同：5
> 
> 时间：2012-04-20T18:42:34.720
> 
> 标签：data-structures, f#

我最近实现了一个[Fisher-Yates shuffle](http://en.wikipedia.org/wiki/Fisher%E2%80%93Yates_shuffle#The_modern_algorithm)，它使用 List.permute 对列表进行了洗牌，并注意到随着列表大小的增加，性能会显着下降。我怀疑这是因为虽然算法假设它在数组上运行，但置换必须通过索引访问列表元素，即 O(n)。

为了确认这一点，我尝试对列表应用排列以反转其元素，比较直接在列表上工作，并将列表转换为数组并返回列表：

```
let permute i max = max - i - 1
let test = [ 0 .. 10000 ]

let rev1 list =
   let perm i = permute i (List.length list)
   List.permute perm list

let rev2 list =
   let array = List.toArray list
   let perm i = permute i (Array.length array)
   Array.permute perm array |> Array.toList 
```

我得到以下结果，这往往证实了我的假设：

```
rev1 test;;
Real: 00:00:00.283, CPU: 00:00:00.265, GC gen0: 0, gen1: 0, gen2: 0
rev2 test;;
Real: 00:00:00.003, CPU: 00:00:00.000, GC gen0: 0, gen1: 0, gen2: 0 
```

我的问题如下：

1）出于性能原因，是否应该避免 List.permute ？而且，相关地， List.permute 的实现不应该在幕后自动转换为 Array 吗？

2）除了使用数组之外，是否有更适合此类工作的功能性方式/数据结构，即元素的洗牌？或者这仅仅是一个问题，数组是正确的数据结构？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-20T18:47:06.030

`List.permute` [将 list 转换为数组，调用`Array.permute`，然后将其转换回 list](https://github.com/fsharp/fsharp/blob/master/src/fsharp/FSharp.Core/list.fs#L404)。基于此，您可能会弄清楚您需要做什么（提示：使用数组！）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-22T10:39:08.080

> 出于性能原因，应该避免 List.permute 吗？

这里唯一的性能问题是在你自己的代码中，特别是调用`List.length`.

> 除了使用数组之外，是否有更适合此类工作的功能方式/数据结构，即元素的洗牌？或者这仅仅是一个问题，数组是正确的数据结构？

您假设数组不能在功能上使用，而实际上它们可以通过不改变其元素来实现。考虑`permute`函数：

```
let permute f (xs: _ []) = Array.init xs.Length (fun i -> xs.[f i]) 
```

尽管它作用于一个数组并产生一个数组，但它并没有改变任何东西，因此它使用数组作为纯粹的函数数据结构。

# c# - 使用 DataContext 方法的问题

> ID：10251751
> 
> 赞同：0
> 
> 时间：2012-04-20T18:42:50.740
> 
> 标签：c#, asp.net, datacontext

我正在尝试使用 DataContext 方法。但是当我键入以下代码 'private NorthWindDataContext Context' 时，它给了我一个错误，说在命名空间中找不到它。我如何使用 DataContext 或者我在这方面缺少什么。

```
public partial class Northwind
{
    private NorthwindDataContext Context
    {
        get;
        set;
    }

    public Northwind()
    {
        Context = new NorthwindDataContext();
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T19:09:17.713

Right click on `NorthWindDataContext` and select Resolve, It will get you the namespace (if you have). You can do the same thing with keyboard. Put your cursor on NorthWindDataContext and press Cntl+. (dot) and select the namespace to use

# ajax - 如何使用ajax上传文件

> ID：10251758
> 
> 赞同：0
> 
> 时间：2012-04-20T18:43:21.287
> 
> 标签：ajax, file, upload

我试图将单个文件发送到服务器而无需更改网页。我决定使用这个插件：[http](http://cmlenz.github.com/jquery-iframe-transport/) : //cmlenz.github.com/jquery-iframe-transport/ 我很困惑如何在不更改网页的情况下进行上传...uploadimg.php 返回：

```
<br />
<b>Notice</b>:  Undefined index: photo in <b>C:\website\uploadimg.php</b> on line <b>2</b><br />
<br />
<b>Notice</b>:  Undefined index: photo in <b>C:\website\uploadimg.php</b> on line <b>3</b><br />
<img src="userimg/" /> 
```

我的文件：

postAd.php

```
<html>
<head>
<script src="jquery.js"></script>
<script src="jquery-iframe-transport.js"></script>
<script>
$(document).ready(function(){
    $('#photo1').on('change', function(){
        $.ajax({
            url: "uploadimg.php",
            files: $("#photo1:file"),
            iframe: true,
            processData: false
        }).done(function(data){
            console.log(data);
        });
    });
});
</script>
</head>
<body>
<input type='file' name='photo' id='photo1' /></br>
</body>
</html> 
```

上传img.php

```
<?php 
$file_tmp = $_FILES['photo']['tmp_name'][0];
$file = $_FILES['photo']['name'][0];
move_uploaded_file($file_tmp, "userimg/$file");
echo '<img src="userimg/' .$file .'" />';
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T18:51:07.057

您没有提交表单，因此“照片”字段不会随 AJAX 调用一起发送。如果您有可用的调试器，请检查 $_FILES 数组以查看填充的内容。由此看来[，](http://www.php.net/manual/en/features.file-upload.post-method.php)您可能正在寻找“用户文件”索引，但我不确定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-01T09:57:40.833

```
function upload(event) {

var formData = new FormData($('#uploadForm')[0]);

$.ajax( {             
    url     : "upload.do",
    type        : "POST",
    data    : formData,
    cache   : false,
    contentType     : false,
    processData : false,

});

@RequestMapping(value = "/uploadCsr", method = RequestMethod.POST)
    @ResponseBody
    public String uploadCsr(@RequestParam("fileUpload") MultipartFile file, HttpServletResponse response) {
// read the file using inputstream

} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-05-19T18:54:57.153

经过大量搜索后，我发现使用 ajax 上传文件很简单。您可以[在 php 中上传时找到它而无需刷新](http://tuts.wtfdiary.com/2012/06/file-upload-in-php-without-refreshing.html)

# jquery - BX 滑块和 Jquery

> ID：10251764
> 
> 赞同：3
> 
> 时间：2012-04-20T18:43:41.177
> 
> 标签：jquery, append, bxslider

我在我的网站[http://kellyannart.com/test/portfolios/](http://kellyannart.com/test/portfolios/)上使用 BX Slider 。为 bx-slider displaySlideQty 设置了以下参数：4 无限循环：真

我正在使用的自定义 jQuery 是：

```
jQuery(".single_portfolio_item_archive a").click(function(evt) {
evt.preventDefault();
jQuery("#imageBox").empty().append(
    jQuery("<img>", { src: this.href})
);
}); 
```

我在 bx-slider 内总共有 5 个项目......但是因为无限循环设置为 true，它们会不断重复......问题是对于前 5 个项目（这是我拥有的实际项目数），如果我们点击图像然后 div id="imageBox" 加载相同的图像（这是完美的）.. 但是当我们单击第 6 项（由于 infinteLoop 已设置为 true 而重复）时，大图像会以新的方式打开窗口而不是在 div id="imageBox" 中加载

此外，如果您单击前 5 个项目的“阅读更多”按钮，那么它会尝试将其 href 加载到 div id="imageBox" 中，但是当您单击第 6 个项目的“阅读更多”按钮时，它会表现完美（即在浏览器中打开链接）我不知道为什么会这样。有什么建议吗？提前致谢 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-21T20:18:29.747

我找到了造成这种情况的原因...首先我为投资组合页面启用/禁用了幻灯片放映选项，我为每个页面加载了自定义 jquery 代码..但我没有放置 if 语句来检查幻灯片放映是否已启用或禁用..所以第一个脚本应该在启用幻灯片时加载，第二个脚本应该在禁用幻灯片时加载......在我的情况下，无论幻灯片启用还是禁用，两者都在加载..其次我尝试了 document.ready()

```
<?php 
if( is_post_type_archive( 'portfolios' ) || is_taxonomy( 'styles' ) || is_taxonomy( 'colors' ) || is_taxonomy( 'textures' ) || is_taxonomy( 'years' ) ) : ?>
<script type="text/javascript">
jQuery(document).ready(function() {
jQuery(".single_portfolio_item_archive a").click(function(evt) {
evt.preventDefault();
jQuery("#imageBox").empty().append(
    jQuery("<img>", { src: this.href})
);
})
});
</script>
<?php endif; ?> 
```

document.ready 确保脚本被应用于每个元素.. 甚至那些被 bx-slider 重复的元素。:)

# java - 如何在 Java 中将日期和时间组合转换为天数

> ID：10251765
> 
> 赞同：-1
> 
> 时间：2012-04-20T18:43:41.193
> 
> 标签：java

`2012-02-28T13:10:50Z`我有从 WebService 获得的日期和时间组合。

我需要将该字符串转换为天数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T18:47:52.130

[您可以使用SimpleDateFormat](http://docs.oracle.com/javase/1.4.2/docs/api/java/text/SimpleDateFormat.html)解析时间戳并将毫秒[Date.getTime()](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Date.html#getTime%28%29)除以`24*60*60*1000L`-> 自 1970 年 1 月 1 日以来的天数转换为天数

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T18:49:00.113

您可能会发现这很有帮助，这是特定于 XML Schema 日期/时间的：

[`DatatypeFactory.newXMLGregorianCalendar`](http://docs.oracle.com/javase/1.5.0/docs/api/javax/xml/datatype/DatatypeFactory.html#newXMLGregorianCalendar%28java.lang.String%29)

按照该页面上指向 XMLGregorianCalendar 类的链接，了解有关如何提取所有组件的详细信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-20T19:01:34.020

要解析日期，请使用

```
import java.text.SimpleDateFormat;

SimpleDateFormat sdf = new SimpleDateFormat ("yyyy-MM-dd'T'HH:mm:ss'Z'"); 
```

我不确定尾随的 Z。

```
date = sdf.parse (d);
// java.util.Date = Tue Feb 28 13:10:50 CET 2012 
```

# iphone - 我的精灵伤害表现的图像序列

> ID：10251767
> 
> 赞同：0
> 
> 时间：2012-04-20T18:43:56.550
> 
> 标签：iphone, xcode, performance, cocos2d-iphone, sprite

所以我有一个在屏幕上每秒创建的精灵。这个精灵是 20 个图像的序列。我想知道它是否会损害性能？如果是的话，我怎样才能减少对性能的影响谢谢:)对不起我的英语我是法语:/

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T18:47:53.427

我以前使用过精灵，是的，屏幕上显示的越多，性能就越低。20张图片的序列部分让我担心。不要使用 20 张图像，而是查看称为 spritesheet 的东西。

spritesheet 是您的所有图像（在您的情况下是动画，对吗？？）都在一个文件中的位置，并且您保存了一些参数，例如

-一帧有多大？

- 多少帧？

-X 和 Y 位置。

示例：如果我有一个 5 帧动画，并且每个图像都是 20x100 像素。我会将它们并排放在一个图像文件中，使图像文件为 100x100。我会按顺序在屏幕上绘制这个 spritesheet 的每个部分。

所以我的参数是：

-SizePerFrame = (20, 100)

-TotalSizeOfImage = (100, 100)

-FramesTotal = 5

第一帧的-xy = (0,0)

所以我会从第一帧（0,0）到（20,100），第二帧（20,100）到（40,100），依此类推。

希望这是有道理的

# neo4j - 使用 Spring Data neo4j 比直接使用 neo4j 有什么优势？

> ID：10251770
> 
> 赞同：6
> 
> 时间：2012-04-20T18:44:18.513
> 
> 标签：neo4j, springsource, spring-data-graph, spring-data-neo4j

我是 NOSQL 数据库（或任何类型的数据库）的新手，我需要用 Java 构建一个图形数据库。我之前也从未使用过 SpringSource。使用 Spring Data neo4j 会使创建图形数据库的过程更容易还是会使事情复杂化？我应该直接尝试使用 neo4j 吗？非常感谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-21T00:26:07.473

这取决于您的用例。当您已经在 Spring 环境中工作并且拥有想要在图中映射的丰富域模型时，SDN 非常适合。SDN 非常适合所有情况，在这些情况下，您主要处理数百或数千个 POJO 对象的结果，这些对象必须与现有的库、ui 层或其他处理 POJO 的应用程序部分进行交互。

如果您不在 Spring 环境中工作，这取决于您，它会增加设置和依赖项的一些复杂性。还有其他解决方案，例如[jo4neo](http://code.google.com/p/jo4neo/)或[Tinkerpop Frames](https://github.com/tinkerpop/frames)，它们可以在 Neo4j 之上运行。

由于引入了间接，它比原生 Neo4j API 慢。

为了获得最高性能，您始终可以使用 Neo4j API。

一般来说，Core-API 是最快的，介于两者之间的好东西是非常富有表现力的[密码查询语言。](http://docs.neo4j.org/chunked/snapshot/cypher-query-lang.html)

# jquery - ajax成功后循环JSON响应

> ID：10251772
> 
> 赞同：5
> 
> 时间：2012-04-20T18:44:32.960
> 
> 标签：jquery, ajax, json, callback

对不起，这是从[这里](https://stackoverflow.com/questions/733314/jquery-loop-over-json-result-from-ajax-success)问的重复，但我是新手，所以我想知道怎么做？

这是我的ajax调用：

```
 $("#btnprocess").click(function () {
                $.ajax({
                    type: "POST",
                    url: "Default.aspx/GetFilenames",
                    data: "{}",
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    success: function (response) {
                        alert(response.d[0]);
                        alert(response.d[1]);
                      }
                });
  }); 
```

单独我能够得到响应，但我需要循环它们。

谁能告诉我我该怎么做？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-20T18:46:59.133

使用`$.each()`.

```
$.each(response.d, function(key, value) {
    //For example
    console.log(key + value)
}) 
```

看看[这里](http://api.jquery.com/jQuery.each/)了解它。（**编辑**：或者[在这里](http://tutsplus.com/lesson/each-and-templating/)- 如果您愿意，这是一个视频教程。）

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-20T18:47:33.923

if`response.d`是一个数组，你可以将它放在一个 for 循环中，如下所示：

```
for ( var i = 0; i < response.d.length; i++ ) {
    // do action here
} 
```

这种方法比 jQuery`$.each()`函数更受欢迎，因为它的速度更快。查看此[Fiddle](http://jsfiddle.net/martinaglv/NcRsV/)以比较`for`与`$.each()`.

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-04-20T18:46:06.560

你可以这样做；

```
for (var i=0; i<response.d.length; i++) {
 alert(response.d[i]);
} 
```

# c# - 通过数据仓库以编程方式检索 TFS“检测二进制文件”的路径信息

> ID：10251775
> 
> 赞同：2
> 
> 时间：2012-04-20T18:44:40.130
> 
> 标签：c#, tfs, data-warehouse, tfs-sdk, binaries

有谁知道如何以编程方式（使用 TFS API）确定哪些二进制文件被设置为作为 T​​FS 构建的一部分进行检测？

例如，在具有代码覆盖率的 TFS 上运行构建后，它会在输出中显示：

```
...
-> 2 binaries instrumented - 62% of all code blocks covered
        SomeAssembly.dll - 392 blocks covered, 368 blocks not covered
        SomeExe.exe - 584 blocks covered, 241 blocks not covered
... 
```

我想以编程方式确定“SomeAssembly.dll”和“SomeExe.exe”是作为该构建的一部分进行检测的二进制文件。

我已经通过 TFS API 检索了团队项目，但不确定是否可以让我到达我想去的地方：

```
TfsTeamProjectCollection collection = new TfsTeamProjectCollection(new Uri(versionControlURIRoot + defaultProjectDirectory))
var testManagementService = collection.GetService<ITestManagementService>();
ITestManagementTeamProject teamProject = testManagementService.GetTeamProject(projectName); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T14:00:03.670

这是解决方案：

获取团队项目：

```
TfsTeamProjectCollection collection = new TfsTeamProjectCollection(new Uri(versionControlURIRoot + defaultProjectDirectory));
    var testManagementService = collection.GetService<ITestManagementService>();
    ITestManagementTeamProject teamProject = testManagementService.GetTeamProject(projectName); 
```

从 Build Coverage 元数据中提取程序集名称：

```
List<string> assemblyNames = new List<string>();
if (teamProject != null) {
    ICoverageAnalysisManager coverageAnalysisManager = teamProject.CoverageAnalysisManager;
    if (coverageAnalysisManager != null) {
        IBuildCoverage[] buildCoverage = coverageAnalysisManager.QueryBuildCoverage(buildURI, CoverageQueryFlags.Modules);
        List<string> assemblyNames = new List<string>();
        foreach (IBuildCoverage buildCoverageDetails in buildCoverage) {
            foreach (IModuleCoverage module in buildCoverageDetails.Modules) {
                    assemblyNames.Add(module.Name);
            }
        }
    }
} 
```

# ios - 在哪里可以找到自定义 cocoa/xcode 类文件？

> ID：10251777
> 
> 赞同：0
> 
> 时间：2012-04-20T18:44:55.237
> 
> 标签：ios, xcode, cocoa-touch

有点菜鸟问题，但是有没有一种搜索自定义控件/对象/框架的好方法？我偶然发现了 Three20 框架和其他一些东西，比如自定义进度条视图和其他自定义视图……但我只是有点“发生”在他们身上。除了在 github 范围内进行搜索之外，还有什么标准的地方可以让人们发布他们的东西吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T18:48:59.830

[http://cocoacontrols.com/](http://cocoacontrols.com/)是一个很好的网站，汇集了其中的很多内容

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T18:51:37.620

对于 UI 元素，请查看[Cocoa Controls](http://cocoacontrols.com/)。不幸的是，我不知道任何其他用于类别等的集中式存储库。我偶然发现的所有有用的东西都来自 github、stackoverflow 和/或重复的谷歌搜索。

不过，我建议远离 Three20。过去曾在一些大型项目中使用过它，该框架往往会阻碍它而不是帮助恕我直言。他们的绘图库有一些很好的便利，但如果你只想要框架提供的单个 UI 元素，添加到你的项目中会很臃肿。

# unix - 使用期望脚本编写 SFTP 连接不起作用

> ID：10251779
> 
> 赞同：0
> 
> 时间：2012-04-20T18:45:03.673
> 
> 标签：unix, sftp

我正在尝试通过一个简单的脚本连接到**SFTP**服务器，在网上查看后，我发现这`expect`可能值得一看，但由于某种原因，我根本无法让它工作。

这是我创建的示例脚本：

```
#!/usr/bin/expect

spawn sftp myuser@myftp.mydomain.com
expect "password:"
send "mypassword";
interact 
```

当我执行此操作时，它仍然出于某种原因询问我的密码，即使我确实发送了它：

```
>$ ./connect-ftp.sh 
spawn sftp myuser@myftp.mydomain.com
Connecting to myftp.mydomain.com...
myuser@myftp.mydomain.com's password: 
```

有人知道为什么我不能期望按我的意愿工作吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T18:47:06.853

您没有在密码后发送回车。

```
send "mypassword\r" 
```

# python - 在 Python 中解析 mbox 文件

> ID：10251782
> 
> 赞同：16
> 
> 时间：2012-04-20T18:45:23.953
> 
> 标签：python, email, mbox

Python新手在这里。我想浏览一个大型 mbox 文件，解析电子邮件。我可以这样做：

```
import sys
import mailbox

def gen_summary(filename):
    mbox = mailbox.mbox(filename)
    for message in mbox:
       subj = message['subject']
       print subj

if __name__ == "__main__":
    if len(sys.argv) != 2:
        print 'Usage: python genarchivesum.py mbox'
        sys.exit(1)

    gen_summary(sys.argv[1]) 
```

但我需要更多的控制。我需要能够在 mbox 文件中获取给定电子邮件开头的字节位置，并且还需要获取消息中的字节数（如磁盘上所示）。然后在未来，我不需要从 mbox 文件的开头进行迭代，而是能够查找给定的消息并对其进行解析（因此需要获取磁盘上的字节位置）。这些是大型 mbox 文件，效率是一个问题。

这一切的目的是让我可以生成一个摘要文件，其中包含有关 mbox 中每封电子邮件的一些小信息，然后在将来有效地查找 mbox 中的各个电子邮件。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-20T20:01:46.370

我没有测试过这个，但这样的东西可能对你有用。只需打开文件（以二进制模式，以便您的字节数正确），然后扫描它，找到消息。

```
def is_mail_start(line):
    return line.startswith("From ")

def build_index(fname):
    with open(fname, "rb") as f:
        i = 0
        b = 0
        # find start of first message
        for line in f:
            b += len(line)
            if is_mail_start(line):
                break
        # find start of each message, and yield up (index, length) of previous message
        for line in f:
            if is_mail_start(line):
                yield (i, b)
                i += b
                b = 0
            b += len(line)
        yield (i, b) # yield up (index, length) of last message

# get index as a list
mbox_index = list(build_index(fname)) 
```

获得索引后，您可以使用`.seek()`文件对象上的方法在其中查找，并`.read(length)`在文件对象上仅读取一条消息。不过，我不确定您将如何使用`mailbox`带有字符串的模块；我认为它旨在就地处理邮箱。也许您可以使用其他一些邮件解析模块。

# php - MySQL - 获取星期几

> ID：10251785
> 
> 赞同：0
> 
> 时间：2012-04-20T18:45:34.897
> 
> 标签：php, mysql

我有一张提供周一至周日特别优惠的桌子。我希望从今天开始获得下一个报价。表中的天数为 1-7

例如。

```
1(mon)-offer1

2(tues)-offer2

3(wed)-offer3

6(Sat)-offer4 
```

如果今天是周日 DAYOFWEEK 7，那么我希望获得的报价是 offer1，这是下一个可用的周一 DAYOFWEEK 1。如果今天是周五，那么我会得到 offer4。

这是我拥有的 SQL。问题是我无法让 offer1 方案发挥作用。

```
SELECT * 
FROM special_offers  
WHERE special_offers.special_day >= IF(DAYOFWEEK(NOW())-1>0,DAYOFWEEK(NOW())-1,7) 
  AND special_offers.pubID = 48 
LIMIT 1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T19:00:49.930

问题是对于 MySQL **DAYOFWEEK**函数 Mondey 等于 2 而 Sundey 等于 1，请查看[手册](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_dayofweek)。

您的问题的简单解决方法是使用 if 语句：

```
IF(DAYOFWEEK(NOW())-1>0,DAYOFWEEK(NOW())-1,7) 
```

这会将天数转换为正常顺序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T18:58:08.543

目前尚不清楚预期值和实际值是多少，但我知道您希望得到以下结果：

```
SELECT * 
FROM special_offers  
WHERE special_offers.special_day >= case DAYOFWEEK(NOW()) when 1 then 7 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 when 7 then 6 end
AND special_offers.pubID = 48
LIMIT 1 
```

编辑：这将尝试从今天到周日查找下一个可用的特价商品，如果没有找到，它将找到第一个特价商品。

```
SELECT *
FROM  special_offers so
WHERE so.pubID=48
ORDER BY 
if(special_day = case DAYOFWEEK(NOW()) when 1 then 7 when 2 then 1 when 3 then 2 when 4 then 3 when 5 then 4 when 6 then 5 when 7 then 6 end, 1, 0) desc, so.special_day
limit 1 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-20T19:48:58.177

首先，MySQL DAYOFWEEK() 函数的返回值有 1 代表星期日，7 代表星期六。因此，如果您的表周一为 1，周日为 7，则需要调整 1。

其次，您需要的是模运算。这对你有用吗？

```
SELECT * 
  FROM special_offers
 ORDER BY (special_offers.special_day + 8 - DAYOFWEEK(NOW())) MOD 7
  LIMIT 1 
```

# objective-c - 静态 NSMutableDictionary “只是泄漏”

> ID：10251789
> 
> 赞同：2
> 
> 时间：2012-04-20T18:45:58.707
> 
> 标签：objective-c, ios, xcode, macos

这是一个简单的类：

```
#import "One.h"
#import "Two.h"

@implementation DataFileRegistrar

static NSMutableDictionary *elementToClassMapping;

+ (void)load
{
    [self registerClass:[One class] forElement:@"one"];
    [self registerClass:[Two class] forElement:@"two"];
}

+ (void)registerClass:(Class)class forElement:(NSString *)element
{
    if (!elementToClassMapping) {
        elementToClassMapping = [NSMutableDictionary dictionaryWithObject:class forKey:element];
    } else {
        [elementToClassMapping setValue:class forKey:element];
    }
}

+ (id)classForElement:(NSString *)element
{
    return [elementToClassMapping valueForKey:element];
}

@end 
```

问题是这个编译器消息：

`objc[7172]: Object 0x6840720 of class __NSCFDictionary autoreleased with no pool in place - just leaking - break on objc_autoreleaseNoPool() to debug`

有什么想法吗？

基本上，我想要一个简单的类，其中包含几个类方法和一个静态字典。它总是在没有实例化的情况下使用。我想在应用程序启动后立即将它用于几件事，然后我想释放它的内存。我认为ARC可以解决这个问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-20T18:49:33.187

您不应该在静态变量上使用自动释放的对象。

换线...

```
 elementToClassMapping = [NSMutableDictionary dictionaryWithObject:class forKey:element]; 
```

至

```
 elementToClassMapping = [[NSMutableDictionary alloc] initWithObjects:[NSArray arrayWithObject:class] forKeys:[NSArray arrayWithObject:element]]; 
```

并且不要在`+ (void)registerClass:(Class)class forElement:(NSString *)element`不创建自动释放池的情况下从第二个线程调用您。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-20T19:02:26.357

你的班级'`+load`正在调用调用`autorelease`.

你的类是之前加载的`main`。

您可以在以下位置显式创建自动释放池`+load`：

```
+ (void)load
{
    @autoreleasepool {
        [self registerClass:[One class] forElement:@"one"];
        [self registerClass:[Two class] forElement:@"two"];
    }
} 
```

但是，通常最好在创建任何线程之前保证程序初始化和加载的顺序`main`：

```
int main(int argc, const char * argv[]) {
  @autoreleasepool {
      [DataFileRegistrar initializeStaticStuff];
      ... 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-20T19:13:24.277

您在做什么是将字典放在堆栈上（坦率地说，这很愚蠢，因为您有很多方法可以做到这一点）并且它会泄漏，因为它永远不会从堆栈中释放。

创建 NSDictionary 是为了与自动释放池一起使用（是的..我知道在某些情况下使用静态的更好，但这些情况非常罕见）

在界面中声明`NSMutableDictionary *elementToClassMapping;`，一切都会正常工作

# php - https、Jquery、PHP、Curl 和 document.cookie

> ID：10251791
> 
> 赞同：2
> 
> 时间：2012-04-20T18:45:59.623
> 
> 标签：php, javascript, jquery, curl, https

首先我要做的是：我正在尝试访问登录页面以便我可以登录。该站点是 Https 并且需要设置 cookie，所以我使用 jquery 运行 PHP + Curl 来获取该页面我和存储饼干。好吧，我已经能够获取 cookie，但我不断收到未设置 Cookie 的弹出窗口。所以我看了很多，发现 javascript 会进行初始检查以查看是否启用了 cookie：

```
function initLogin(){
// check if cookie is enabled so applications can run
if (document.cookie == "") {
alert("Cookies are disabled. Cannot access mid-tier with this setting.\nPlease configure your browser to accept cookies.");
return;
} 
....Other Code... 
} 
```

我浏览了这个论坛上的几乎所有帖子，并尝试了一堆不同的代码，但没有运气。所以问题是如何克服这一点？我的理解是：Jquery 调用代理/服务器上的 php 脚本并调用 curl 来获取网页。然后，Curl 将保存 cookie 以供以后使用，但您将如何使用它们。我认为只需将它们设置在 cookie 文件中就足够了，但我想我错了。所以我厌倦了将它们设置为 CURLOPT_COOKIE 但我不知道这是否正确。

这是我正在运行的代码的副本：

```
function getpage(){
$fullurl = "https://url/arsys/shared/login.jsp?/arsys/home";

$ch = curl_init ();
curl_setopt($ch, CURLOPT_HEADER, 1);
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, 0);
curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, 0);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_URL, $fullurl);
$output = curl_exec ($ch);

preg_match_all('|Set-Cookie: (.*);|U', $output, $results);    
$newcookies = implode(';', $results[1]);
echo "<br>COOKIES:" . $newcookies;
curl_setopt ($ch, CURLOPT_COOKIE, $newcookies);
echo curl_error($ch) . " " . $output;
curl_close($ch);
} 
```

上述代码的输出：COOKIES:JSESSIONID=B4830242479D3DFD3235D17EE6A4DEB8;q=""HTTP/1.1 200 OK Cache-Control: no-cache Content-Type: text/html;charset=UTF-8 Server: Microsoft-IIS/7.5 Set-Cookie ：JSESSIONID=B4830242479D3DFD3235D17EE6A4DEB8；路径=/arsys; 安全组 Cookie：q=""; 到期时间=周四，1970 年 1 月 1 日 00:00:10 GMT；路径=/ 日期：2012 年 4 月 20 日星期五 17:57:17 GMT 内容长度：35657

我也试过：

```
function getpage(){
$ckfile = "cookies/cookie.txt";
$fullurl = "https://url/arsys/shared/login.jsp?/arsys/home";

$ch = curl_init ();
curl_setopt($ch, CURLOPT_COOKIEJAR, $ckfile);
curl_setopt ($ch, CURLOPT_COOKIEFILE, $ckfile);
curl_setopt($ch, CURLOPT_HEADER, 1);
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, 0);
curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, 0);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_URL, $fullurl);
$output = curl_exec ($ch);
curl_close($ch);
} 
```

cookie 保存在正确的文件中，但仍会收到相同的消息。

我在谷歌上尝试了代码，它运行良好，它是阻止我的 javascript..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T20:48:03.193

[使用PHP setcookie](http://php.net/setcookie)从 curl 获取后，您必须将 cookie 存储在浏览器 cookie 中（将其存储在单独的文件中），以便能够通过 JavaScript 使用它。

JavaScript 方面：使用 PHP 设置 cookie 后最好使用[jQuery.cookies.js](http://cookies.googlecode.com/files/jquery.cookies.2.2.0.min.js.zip)

```
$.cookies.get()

$.cookies.filter()

$.cookies.set()

$.cookies.del()

$.cookies.test()

$.cookies.setOptions() 
```

# asp.net-mvc-3 - 在 MVC 3 应用程序中更改命名空间名称会导致运行时生成的文件出现编译错误

> ID：10251792
> 
> 赞同：20
> 
> 时间：2012-04-20T18:46:00.870
> 
> 标签：asp.net-mvc-3, generated-code

我刚刚开始了一个新项目，并且正在重新组织源结构，包括重命名命名空间。从更改命名空间后

```
CRTReadmissions.Web.Helpers 
```

至

```
Crt.Readmissions.Web.Helpers 
```

我在尝试启动应用程序时收到如下所示的错误，表明它找不到旧的命名空间。任何帮助是极大的赞赏。

**我尝试过的事情**

1.  清理\重建
2.  手动删除bin目录
3.  手动删除生成文件所在目录的内容

**错误**

说明：在编译服务此请求所需的资源期间发生错误。请查看以下特定错误详细信息并适当修改您的源代码。

编译器错误消息：CS0246：找不到类型或命名空间名称“CRTReadmissions”（您是否缺少 using 指令或程序集引用？）

源错误：

```
Line 26:     using System.Web.Routing;
Line 27:     using Cassette.Views;
Line 28:     using CRTReadmissions.Web.Constants;
Line 29:     using CRTReadmissions.Web.Helpers;
Line 30: 
```

源文件：c:\Windows\Microsoft.NET\Framework64\v4.0.30319\Temporary ASP.NET Files\crtreadmission\203bedd5\1b724153\App_Web_login.cshtml.3f4b83a6.wbzlumh4.0.cs 行：28

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2012-11-06T19:46:24.330

**我通过编辑Views文件夹中的****web.config**文件解决了同样的问题。只需看一下**命名空间**标签。我希望这会帮助面临同样问题的人。

# .net - EF5 多对多关系实体

> ID：10251794
> 
> 赞同：3
> 
> 时间：2012-04-20T18:46:03.680
> 
> 标签：.net, .net-4.5, entity-framework-5

我们正在使用 EF5 的预发布版本并首先编写代码。我有一个**Orders**模型和一个**Products**模型（many<>many 关系）。我用 OrderID、ProductId 和 Quantity 字段创建了**OrderItems模型。**它不会自动生成链接表。下面是代码：

```
Imports System.ComponentModel.DataAnnotations

Public Class OrderItems
    Public Property OrderID As Long
    Public Property ProductID As Long
    Public Property Quantity As Integer
End Class 
```

我是否必须将它们注释为必需或使用关联标签明确链接它们？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T19:51:51.133

我认为在这种情况下使用**Code First Relationships Fluent API** [http://msdn.microsoft.com/en-us/data/hh134698.aspx是个好主意](http://msdn.microsoft.com/en-us/data/hh134698.aspx)

# wpf - How do I find out what's using all the CPU in my application

> ID：10251801
> 
> 赞同：0
> 
> 时间：2012-04-20T18:46:33.613
> 
> 标签：wpf, performance

I've got a WPF application. Most of the time, the app uses almost no CPU. This is good. But I have this one window that pops up under specific circumstances. According to the performance analyses I've run in Visual Studio, my code isn't using alot of CPU, the Application.Run method is. And most of that is in "Functon Body". To the tune of like 40-50% of the CPU.

How do I figure out what's using up the CPU? I've got some animations using key frames that animate the color of some things. I'm wondering if they're what's eating up the CPU. I know I can remove them temporarily, and I just might, but is there another way to figure out exactly what's eating the CPU?

Tony

PS: To prove to myself it was the animations, I watched the CPU usage of my program in Task Manager. It was about 0 before the window with the animations was displayed. The window displayed & the CPU went up. I then pushed a button which changes the state of the data & has the side effect of stopping the animations. The CPU went back down to 0\. I repeated this a few times with consistent results. Looks like it's the animations to me. Though there is a possibility of it being something else that is also going on at the same time as the animations.

The animations are key frame animations intended to simulate a flashing light. I'm going to dump the key frame animations and just swap the fill brush color between two colors using a timer.

PS: If anyone is interested, I did a little research into WPF animation and I found out that there are at least 2 different Color Animation KeyFrame classes in WPF. The one I was using, LinearColorKeyFrame, continuously varies the color from whatever it is to whatever you want to be over the duration of the animation. The other is DiscreteColorKeyFrame. This instantly changes the color from whatever it is to whatever you want it to be.

So I edited my animation from this:

```
<Storyboard x:Key="FlashingStoryboard" AutoReverse="True" RepeatBehavior="Forever">
    <ColorAnimationUsingKeyFrames BeginTime="00:00:00" 
                                  Storyboard.TargetName="Flasher" 
                                  Storyboard.TargetProperty="(Shape.Fill).(SolidColorBrush.Color)">
        <LinearColorKeyFrame KeyTime="00:00:00.5" 
                             Value="{Binding Path=FlashColor, RelativeSource={RelativeSource AncestorType={x:Type local:Flasher}}}"/>
    </ColorAnimationUsingKeyFrames>
    <DoubleAnimation Duration="00:00:00.5" 
                     From="0" To="10" 
                     Storyboard.TargetName="FlasherBlur" 
                     Storyboard.TargetProperty="Radius">
    </DoubleAnimation>
</Storyboard> 
```

To this:

```
<Storyboard x:Key="FlashingStoryboard" AutoReverse="True" Duration="00:00:00.5" RepeatBehavior="Forever">
    <ColorAnimationUsingKeyFrames BeginTime="00:00:00" 
                                  Storyboard.TargetName="Flasher" 
                                  Storyboard.TargetProperty="(Shape.Fill).(SolidColorBrush.Color)">
        <DiscreteColorKeyFrame KeyTime="00:00:00.25"
                               Value="{Binding Path=FlashColor, RelativeSource={RelativeSource AncestorType={x:Type local:Flasher}}}" />
    </ColorAnimationUsingKeyFrames>
</Storyboard> 
```

The new animation uses a lot less CPU. It turns out that most of the CPU usage being hogged by the DoubleAnimation, which was producing a glowing effect. It used up almost 1/2 of the CPU! Not worth it at all. Even when I removed that, the CPU usage was still averaging about 15%. Switching it to a DiscreteKeyFrame brought it down under 10%.

There was another, similar animation animating a border around items in a ListBox in the same window. I made the same changes and now the CPU usage is acceptable. I'm not exactly sure what it is, but it's way better than it was.

Thanks.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T18:49:47.243

yep, animation, is the first thing that anyone will tell you. also how big is it? Is it non stop? relatively big chunk of the screen then yeah!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T18:50:55.033

You need to do code profiling and see what consumes most CPU resources and maybe tune that way.

You can read more about .NET profiling [here](http://msdn.microsoft.com/en-us/magazine/hh288073.aspx)

# sparql - SPARQL 查询以检索所有对象和属性

> ID：10251802
> 
> 赞同：8
> 
> 时间：2012-04-20T18:46:34.793
> 
> 标签：sparql, ontology, sesame

使用[Wine 本体](http://www.w3.org/TR/owl-guide/wine.rdf)，我想创建 SPARQL 查询，以便我可以检索**所有葡萄酒**及其**属性**，如下表所示 - 考虑到我不知道属性的名称*先验*。

```
vin                  | rdf:type     | vin:hasMaker      |  vin:hasSugar   | ...
==========================================================================  ...
GaryFarrellMerlot    |  vin:Merlot  | vin:Elyse         |  vin:Dry        | ...
--------------------------------------------------------------------------
ElyseZinfandel       |  vin:Elyse   | vin:GaryFarrell   |  vin:Dry        | ...
... 
```

有人可以给我一个提示吗？

--**编辑**

不可能以我提到的格式获得查询结果，但我可以这样：

```
vin                |   property     |  value
=================================================
GaryFarrellMerlot  |   rdf:type     |  vin:Merlot
-------------------------------------------------
GaryFarrellMerlot  |   rdf:hasMaker |  vin:Elyse
-------------------------------------------------
... 
```

有了这个选择（感谢[cygri](https://stackoverflow.com/users/346336/cygri)）：

```
SELECT DISTINCT ?wine ?property ?value
WHERE { 
       ?o1 a ?class .
       ?wine a ?o1 .
       ?wine ?property ?value .
} 
```

这将采用葡萄酒而不是葡萄酒类型（Merlot -> GaryFarrellMerlot）。唯一的问题是它需要葡萄酒，还需要酒厂、地区、风味等，我只想要葡萄酒及其特性。此外，**没有**这样的属性**vin:Merlot rdfs:subClassOf vin:Wine。**有什么提示吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-20T19:46:19.670

你不能。您需要事先知道查询结果中需要哪些列。

当然，列出葡萄酒的所有属性并不难：

```
SELECT DISTINCT ?property
WHERE { 
    ?wine a vin:Wine .
    ?wine ?property ?value .
} 
```

然后，您需要编写一些代码，从结果列表中创建最终的 SPARQL 查询。

# javascript - 在 JavaScript 中获取我的 Web App Base URL

> ID：10251805
> 
> 赞同：20
> 
> 时间：2012-04-20T18:46:46.697
> 
> 标签：javascript, node.js

如何在 Node.js 中获取我的 Web 应用程序 URL？我的意思是，如果我的站点基本 url 是[http://localhost:8080/MyApp](http://localhost:8080/MyApp)我怎么能得到它？

谢谢，

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-04-20T20:46:04.803

您必须连接“url”模块

```
var http = require('http');
var url = require('url') ;

http.createServer(function (req, res) {
  var hostname = req.headers.host; // hostname = 'localhost:8080'
  var pathname = url.parse(req.url).pathname; // pathname = '/MyApp'
  console.log('http://' + hostname + pathname);

  res.writeHead(200);
  res.end();
}).listen(8080); 
```

升级版：

在 Node.js v8 url 模块中获取用于处理 URL 的新 API。请参阅[文档](https://nodejs.org/api/url.html)：

> 注意：虽然 Legacy API 尚未被弃用，但维护它只是为了与现有应用程序向后兼容。新的应用程序代码应该使用 WHATWG API。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2019-01-21T12:29:23.057

获取如下网址：[http://localhost:8080/MyApp](http://localhost:8080/MyApp)

我们应该使用：-

```
req.protocol+"://"+req.headers.host 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-07-26T10:17:01.323

用于在您的节点应用程序中获取 url 详细信息。您必须使用 URL 模块。URL 模块会将您的网址拆分为可读的部分

下面我给出了代码

```
var url = require('url');
var adr = 'http://localhost:8080/default.htm?year=2017&month=february';
var q = url.parse(adr, true);

console.log(q.host); //returns 'localhost:8080'
console.log(q.pathname); //returns '/default.htm'
console.log(q.search); //returns '?year=2017&month=february'

var qdata = q.query; //returns an object: { year: 2017, month: 'february' }
console.log(qdata.month); //returns 'february'`enter code here` 
```

要了解有关 URL 模块的更多信息，您可以访问 [https://nodejs.org/api/url.html](https://nodejs.org/api/url.html)

# c++ - 从 boost 1.48 升级到 1.49 具有文件系统路径访问冲突读取位置 0x0000000

> ID：10251812
> 
> 赞同：1
> 
> 时间：2012-04-20T18:47:24.250
> 
> 标签：c++, visual-studio-2010, visual-c++, boost, boost-filesystem

将 boost 升级到 1.49 后，我的单元测试失败了。同一时间地点：

堆：

```
msvcr100d.dll!_initerm
dynamic initializer for Foo::ourTempFolder 
```

其中`ourTempFolder`是 的静态类变量`boost::filesystem::path`。

空位置位于：

`anonymous namespace::convert_aux()`评论说转换`const char*`为`wstring`

我已经切换回 1.48，重建解决方案，一切正常。升级到1.49，重建，同样的问题。

使用带有 SP1 的 Windows7 64 位 Visual Studio 2010

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T22:19:41.603

这已经提交了一个[错误报告](https://svn.boost.org/trac/boost/ticket/6638)。

# c# - 在用户控件中制作一个标签，以便所有鼠标事件都可以点击？

> ID：10251814
> 
> 赞同：2
> 
> 时间：2012-04-20T18:47:36.250
> 
> 标签：c#, winforms, events, user-controls, event-handling

我有一个自定义按钮控件。它里面显然有一个文本标签，当我点击标签时，它显然不会触发按钮单击、事件、鼠标输入或鼠标离开。我需要做的是让标签表现得像它甚至不存在（可点击）。我以前做的是：

```
base.Click += value;
foreach (Control i in Controls) {
    i.Click += value;
} 
```

这曾经工作正常，但现在我的按钮标签每次鼠标悬停在它上面时都是不同的 colco，所以我越过按钮，它变成一种颜色（比如说红色），然后我越过标签，它变成绿色，然后回到无标签部分，变成黄色。这看起来很糟糕，所以我需要它来忽略标签。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T19:49:41.497

不要使用标签。太痛苦了，而且太贵了。覆盖按钮的 OnPaint() 方法以绘制文本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T19:22:29.617

有一种方法可以使行为统一，但它可能看起来同样非常规。

首先将`FlatStyle`按钮的属性设置为`Flat`。这样就消除了鼠标悬停时发生的默认视觉效果。

其次，设置`FlatAppearance.MouseDown and MouseHover`属性（您可以在设计器中完成）您喜欢的颜色。

第三，由于标签没有`FlatAppearance`属性，您必须通过挂钩标签的`MouseHover`和`MouseLeave`事件手动设置它并设置您想要的颜色。`BackColor`（希望当您没有将鼠标悬停在按钮和标签上时，您最初会给标签提供与按钮相同的标签）。

第四，您还应该挂钩 Button`MouseHover`和`MouseLeave`事件以将标签设置为所需的颜色。

相当hackish ..我认为点击部分现在对你来说没问题。

# c++ - 对象的底层类型是如何在运行时确定的？

> ID：10251818
> 
> 赞同：0
> 
> 时间：2012-04-20T18:47:55.163
> 
> 标签：c++, oop, inheritance, object, polymorphism

给定以下代码块：

```
class BaseClass
{
public:
    virtual void hello() { cout << "Hello from Base" << endl; }
};

class DerivedClass : public BaseClass
{
public:
    void hello() { cout << "Hello from Derived" << endl; }
};

int main()
{
    BaseClass base;
    DerivedClass derv;

    BaseClass* bp = &base;
    bp->hello();
    bp = &derv;
    bp->hello();
} 
```

**bp 指向的类型是如何在运行时确定的？我知道它是动态绑定的，但是这样做的机制是什么？** 我很困惑，因为通常答案是编译器，但是因为它是动态的，所以在这个例子中不是这样（或者我弄错了？我假设编译器提前了，但是什么表明 bp 现在指向派生类？）。我也来自 C#，所以这个想法对我来说是陌生的，因为这是没有 CLR 的本机代码。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-20T18:50:06.810

构造时`DerivedClass`，会在其数据中插入一个不可见的成员。该成员指向一个叫做 a 的东西`vtable`。vtable 具有指向派生类的虚函数实现的函数指针。

每个具体类（您可以实例化的类）在内存中的某处都有自己的 vtable。这些表只有在你有虚函数时才会生成，这是 C++ 关于不为你不使用的东西付费的座右铭的一部分。

当编译器看到`bp->hello()`时，它知道要查找该 vtable 指针，并调用正确的函数。

# regex - 在外壳中搜索

> ID：10251820
> 
> 赞同：0
> 
> 时间：2012-04-20T18:48:06.867
> 
> 标签：regex, shell

伙计们

我有一个输出文件看起来像：

```
Title: [name of component]
**garbage output**
**garbage output**
Test run: succuess 17 failure 2
**garbage output**
**garbage output** 
```

并且有很多这样的组件。我无法改变输出的方式。所以我只想抓住标题和测试结果的行。

我的问题是，如何编写正则表达式来实现这一点？

我试过了：

```
cat output | sed -e 'm/Tests run(.*)/g' 
```

但它总是抱怨：未知命令'm'

除正则表达式外的其他方法也将不胜感激！！！

非常感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T18:51:24.050

你不需要猫，试试

```
 grep -E '^Title:|^Test run' fileName 
```

在较旧的系统上，您可能需要使用`egrep '^Title...'`.

编辑

> 我想从结果中排除带有特定前缀的标题，例如“标题：foo XXX”或“标题栏 XXX”。

grep -E 肯定有一个正则表达式可以处理这个问题，但是对于命令行工作的前几年，并且您似乎正在使用它来清理 test.log 输出，最好使用 unix 工具箱方法，在这种情况下，“让某些东西起作用并添加更多内容”，即

```
 grep -E '^Title:|^Test run' fileName | egrep -v '^Title: foo XXX|^Title:bar XXX' 
```

这就是unix管道的威力，输出太多了？，然后继续添加更多`grep -v`的s来清理它。

请注意，这`*grep -v`意味着排除与以下模式匹配的行。

我希望这有帮助

# sql - 基本 SQL 查询

> ID：10251821
> 
> 赞同：1
> 
> 时间：2012-04-20T18:48:07.050
> 
> 标签：sql, oracle

我刚刚开始上 SQL 课程，并且遇到了我必须做的问题之一。问题是

使用 IN 运算符列出项目类别 AP 或 SG 中每个零件的零件编号和零件描述。

我的答案是

```
SELECT PART_NUM, DESCRIPTION
FROM PART
WHERE CLASS IN (AP,  SG); 
```

如果我尝试运行它，它会指出 SG 是一个无效的标识符。但是，如果我查看表格，则有 = ap 和 sg 的类。有人对我做错了什么有任何帮助吗？谢谢你的时间

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T18:50:31.633

如果类是`varchar2`o类型的属性，`varchar`您应该像这样运行 sql

```
SELECT PART_NUM, DESCRIPTION

FROM PART

WHERE CLASS IN ('AP', 'SG'); 
```

请注意，`'`在每个元素上放置一个

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T18:50:47.113

引用值'AP'，'SG'，因为它们是字符。

...在（'AP'，'SG'）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T18:50:58.990

我认为您只是缺少引号-尝试：

在哪里上课（'AP'，'SG'）；

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-01-02T08:30:07.073

**对于char 和 varchar**数据类型，只能写入不带引号的**int**值，您需要使用引号，因此值 AP 和 SG 必须用引号提供，如下所示：

 **```
SELECT PART_NUM, DESCRIPTION  
FROM PART  
WHERE CLASS IN ('AP','SG'); 
```**

# android - 为 Android 应用程序存储应用程序导航的最佳方式？

> ID：10251822
> 
> 赞同：0
> 
> 时间：2012-04-20T18:48:09.590
> 
> 标签：android, android-intent, android-activity

所以我的应用程序重用了很多活动。最初，当我在活动之间切换时，我只是简单地添加一个“fromClass”行作为 Intents 的额外内容。现在的问题是我需要知道我之前从几个活动开始的课程，以便正确显示当前活动的信息。我试图使用一个字符串数组列表来存储顺序并在我向后退时将它们从列表中删除，但是我无法将字符串转换为类名并正常工作。

在活动开始时，我添加以下方式：

```
Global.appNavigation.add("SecondActivity.class") 
```

当我调用 onBackPressed() 时，我正在这样做：

```
/* Remove Last Object (this class) */
    Globals.appNavigation
            .remove(Globals.appNavigation.size() - 1);
    try {
        Class<?> c = Class.forName(Globals.applicationNavigation
                .get(Globals.appNavigation.size() - 1));
        Activity obj = (Activity) c.newInstance();
        Intent i = new Intent(mActivity, c);
        startActivity(i);
        finish();
    } catch (ClassNotFoundException e) {
        Log.e("Back", "Could not get a class name");
    } catch (IllegalAccessException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (InstantiationException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } 
```

我不断收到 ClassNotFoundException。有一个更好的方法吗？我正在使用的这个应用程序变得非常大，所以在这种情况下不调用 finish() 到一个活动可能不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T21:34:22.687

我最终调用了“finish()”方法，但在跟踪需要持久化的数据方面做得更好。

感谢 Ben Von Handorf 的建议（参见原始问题的评论 1 和 3）

# php - 无法检查上传文件的类型

> ID：10251825
> 
> 赞同：0
> 
> 时间：2012-04-20T18:48:22.547
> 
> 标签：php, file-upload, file-extension

我有这个函数来检查文件是否是图像，但它总是返回 false

```
function upload_file($file) {
    if($file['type'] != "image/jpeg" || $file['type'] != "image/gif") {
                        $errors[] = "Please upload a photograph with extenstion of JPEG, JPG, GIF or BMP.";
                        return false;
    }
} 
```

所以谁能告诉我我哪里出错了！

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T18:50:30.383

您需要使用`&&`：

```
if($file['type'] != "image/jpeg" && $file['type'] != "image/gif") { 
```

通过使用`||`你会导致它始终是错误的，因为没有图像可以既是 jpeg 又是 gif

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T18:49:58.610

```
 if($file['type'] != "image/jpeg" || $file['type'] != "image/gif") { 
```

应该

```
 if($file['type'] !== "image/jpeg" || $file['type'] !== "image/gif") { 
```

**编辑：没关系，这没关系**

# verilog - 在verilog中使用“生成”时出现问题总是阻塞

> ID：10251827
> 
> 赞同：1
> 
> 时间：2012-04-20T18:48:26.280
> 
> 标签：verilog, hdl, synthesize

我试图在 Verilog 的 case 语句中生成一些条件。

我有一个称为 MANT_WIDTH 的参数，case 语句中的条件数取决于 MANT_WIDTH 的值

例如我有

```
always @(*) begin
  case (myvariable)
   {MANT_WIDTH{1'b1}}:
   begin  new_variable = {1'b0, {MANT_WIDTH{1'b1}}};       end

   genvar n;
   generate
     for (n = 2; n <= MANT_WIDTH-1; n = n+1) begin: NORMALIZE
       {(MANT_WIDTH-n){1'b0}},{n{1'b1}}}:
       begin new_variable = {{n{1'b1}},1'b0;
     end

   endgenerate

   default:
   begin  new_variable = {(MANT_WIDTH+1){1'b0}};           end
 endmodule
end 
```

这段代码中可能有一些没有意义的条件（不正确的位宽等），但我想要做的事情的要点就在这里。

我遇到的问题是，当我尝试使用 ncverilog 模拟此代码时出现以下错误：

```
 for (n = 2; n <= MANT_WIDTH-1; n = n+1) begin: NORMALIZE
          | 
```

ncvlog: *E, ILLPRI (fpmodule.v,278|6): 非法表达式primary [4.2(IEEE)]

我也得到非法的左值语法 [9.2[IEEE)]

我需要计算前导零。我实际上并没有粘贴我的真实代码，我只需要一些方法来计算前导零，但我有一些特殊情况必须放在 for 循环之外。

太感谢了！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T23:22:13.387

在 always 块中使用 generate 是不合法的。它们仅在模块声明范围内有效。

```
module;
//Valid here
endmodule 
```

> 我有一个称为 MANT_WIDTH 的参数，case 语句中的条件数取决于 MANT_WIDTH 的值

无法使用参数直接控制 case 语句的数量。

我不知道您要计算什么（`new_variable = {myvariable,1'b0}`？），但是您很少需要生成循环来实现某种转变，而且看起来您在这里也不需要前导零。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T15:34:22.130

我求助于使用以下编译器指令：

```
`ifdef
`else
`endif 
```

因此，我可以这样定义一个代码块：

```
`define MYMACRO 1;

`ifdef MYMACRO

// some code

`else
 `ifdef ANOTHERMACRO
// different code
`endif
`endif 
```

# xcode - 没有 Xcode 的 Mac GUI 应用程序

> ID：10251828
> 
> 赞同：1
> 
> 时间：2012-04-20T18:48:31.007
> 
> 标签：xcode, macos, user-interface

如何在不使用 Xcode 的情况下为 Mac 创建 GUI 应用程序？

我找到了[http://cocoawithlove.com/2010/09/minimalist-cocoa-programming.html](http://cocoawithlove.com/2010/09/minimalist-cocoa-programming.html)但想了解更多细节，例如：

*   如何为其添加图标？

*   如何创建捆绑包？

*   无论如何，笔尖中有什么以及如何通过代码重新创建其功能？

*   上面的示例在 Xcode 中创建的类似简单应用程序中还缺少什么？

换句话说，我在哪里可以找到更多关于图形应用程序如何工作以及这个“Xcode Cocoa 应用程序模板”的信息？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T19:19:50.327

这是一个非常广泛的问题，但我会指出正确的方向：

1.  通过向 info.plist 添加条目并在应用程序 bunlde 中复制图标文件来处理图标

2.  包实际上只是一个目录，其中包含一组特定的文件。Xcode 会为您处理这一部分，您确实应该使用 Xcode 进行 OSX 开发。您不必使用 IB（我不需要），但根本不使用 Xcode 是毫无意义的。它旨在让您在这个领域的生活更轻松。

3.  nib（或 xib）文件只是一种序列化文件格式，它描述了一堆 Cocoa 类以及它们应该如何使用绑定“连接”到彼此。Cocoa 应用程序可以读取 nib 文件并使用其中的信息即时实例化完整的用户界面。

一般来说，完全没有理由必须使用 IB。Apple 的文档中充满了有关如何创建对象和子类以及如何将它们布置在屏幕上的`NSView`示例`NSControl`。请注意，此过程将涉及您的大量工作。您将必须学习 Cocoa 如何处理窗口和视图，它如何处理自动调整大小，以及如何以有意义的方式将模型对象与这些视图连接起来。

# string - MATLAB 将时间打印为字符串

> ID：10251829
> 
> 赞同：11
> 
> 时间：2012-04-20T18:48:37.270
> 
> 标签：string, matlab, time

将时间打印为 HH:MM:SS 的最有效方法是什么？

我把它设置在我的时间是 x 秒的地方。然后我计算与 x 秒相关的小时、分钟和剩余秒数。

然后，当我想将其作为字符串打印到图形上时，我会：

```
sprintf('Time: %d:%d:%d', hours, minutes, seconds); 
```

不幸的是，这看起来很难看，好像我的小时或分钟等于 0，我得到了 0:0:23 之类的东西。

我想我可以在执行 sprintf 之前将小时、分钟、秒更改为字符串。有没有更有效的 MATLAB 方式？谢谢！

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-20T18:54:32.647

日期格式的最佳选择是[`datestr`](http://www.mathworks.ch/help/techdoc/ref/datestr.html)，例如：

```
 datestr(now, 'HH:MM:SS') 
```

说到这里`sprintf`，再看看[格式化参数](http://www.mathworks.ch/help/techdoc/ref/sprintf.html)。使用零填充可以获得更好的结果：

```
 sprintf('Time: %02d:%02d:%02d', hours, minutes, seconds) 
```

# android - 是否可以检测何时未选择上下文菜单中的项目？

> ID：10251832
> 
> 赞同：0
> 
> 时间：2012-04-20T18:48:40.763
> 
> 标签：android

我可以检测菜单是否弹出并且有人点击屏幕（在不选择值的情况下关闭它）？

目前我有一个复选框，单击该复选框会打开一个带有选项的上下文菜单。当我在不选择值的情况下单击它时，我希望复选框消失。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T18:54:19.677

应该是，您是否查看了[参考指南`onContextMenuClosed()`？](http://developer.android.com/reference/android/app/Activity.html#onContextMenuClosed%28android.view.Menu%29)

# git - 将所有参数传递给 git 别名

> ID：10251836
> 
> 赞同：6
> 
> 时间：2012-04-20T18:48:56.320
> 
> 标签：git, bash

为了简化我的担忧，我将其范围缩小到以下内容：

我有一个这样定义的 GIT 别名：

```
cii = "!f() { git commit "$@"; }; f" 
```

当我跑

```
$ git cii -m "test1" 
```

它工作正常，但失败了

```
$ git cii -m "test1 and test2"
error: pathspec 'and' did not match any file(s) known to git.
error: pathspec 'test2' did not match any file(s) known to git. 
```

任何想法 ？

请注意，我的真实别名比上面的要复杂得多，因此不能使用 cii = "commit" 进行响应。这里的重点是将输入参数传递给函数。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-20T18:54:47.163

您需要引用嵌入的双引号。

```
cii = "!f() { git commit \"$@\"; }; f" 
```

然后 git 将执行标准的 shell 扩展，`"$@"`每个参数转换为一个单词 - 比如`"$1" "$2" "$3" ...`

# c#-4.0 - 在 C#.Net 控制台应用程序的多种方法中访问字符串属性

> ID：10251840
> 
> 赞同：0
> 
> 时间：2012-04-20T18:49:01.263
> 
> 标签：c#-4.0, properties, console-application, stringbuilder

如何访问同一类的多个方法中的属性？

```
 class MainProgram
{
    List<string> logLines = new List<string>();
    private static void ParseTransmissionAction(string ActionChar)
    {
        logLines.Add(ActionChar);
    }
    private static void BeginProcessing(int i, string FileName)
    {
        logLines.Add(i + ")" + FileName + "...Processing...");
    }
    private static void CompletedParsingthisFile(string File, int Rows)
    {
        logLines.Add("Sucessfully Parsed \"" + File + "\" (" + Rows + ") Rows");
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T18:50:47.967

`logLines`在您的程序中未标记为`static`，因此您的所有方法都无法访问它。

将其更改为`static`或删除`static`方法上的修饰符。

# php - 本地系统上的 Joomla 错误，而相同的包在托管服务上工作正常

> ID：10251848
> 
> 赞同：0
> 
> 时间：2012-04-20T18:49:39.360
> 
> 标签：php, joomla, joomla1.7, joomla-template

我已经安装了 xampp 包。我正在尝试通过 xampp 运行 Joomla 应用程序。

但我不确定应用程序有问题，但我收到了这个错误。完全相同的 Joomla 包和主题在我的主机上运行良好，但在本地它给了我以下错误。不确定系统级别是否有问题，因为相同的包在托管服务上运行良好。我有 Windows 7 32 位。

有人知道吗？提前致谢

==================================================== ==============================

严格标准：非静态方法 modSlideShowSP2Helper::getImages() 不应在第 124 行的 C:\xampp\htdocs\travel\modules\mod_slideshow_pro_sp2\helper.php 中静态调用

严格标准：非静态方法 modSlideShowSP2Helper::getImages() 不应在第 125 行的 C:\xampp\htdocs\travel\modules\mod_slideshow_pro_sp2\helper.php 中静态调用

严格标准：非静态方法 modSlideShowSP2Helper::cText() 不应在第 127 行的 C:\xampp\htdocs\travel\modules\mod_slideshow_pro_sp2\helper.php 中静态调用

严格标准：非静态方法 modSlideShowSP2Helper::cText() 不应在第 128 行的 C:\xampp\htdocs\travel\modules\mod_slideshow_pro_sp2\helper.php 中静态调用

严格标准：非静态方法 modSlideShowSP2Helper::cText() 不应在第 129 行的 C:\xampp\htdocs\travel\modules\mod_slideshow_pro_sp2\helper.php 中静态调用

严格标准：非静态方法 modSlideShowSP2Helper::cText() 不应在第 130 行的 C:\xampp\htdocs\travel\modules\mod_slideshow_pro_sp2\helper.php 中静态调用

严格标准：非静态方法 modSlideShowSP2Helper::getImages() 不应在第 124 行的 C:\xampp\htdocs\travel\modules\mod_slideshow_pro_sp2\helper.php 中静态调用

==================================================== ====================================

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T19:02:44.860

并非 Joomla 的所有扩展都是按照严格的标准开发的。`error_reporting(0)`在您的输入脚本（index.php）的顶部应该可以解决问题。但是，如果您使用此指令，您将无法跟踪生产服务器上的错误。另一种选择是：

```
//have all errors trapped, but not displayed
error_reporting(- 1); 
ini_set('display_startup_errors', 0);
ini_set('display_errors', 0); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T23:10:49.670

更好的方法是编辑您的 php.ini 文件。像这样查找行：

```
error_reporting = E_ALL | E_STRICT 
```

并用垂直线删除 E_STRICT。然后重新启动 xampp。

# c# - DateTime.Ticks、DateTime.Equals 和时区

> ID：10251851
> 
> 赞同：12
> 
> 时间：2012-04-20T18:49:56.407
> 
> 标签：c#, datetime, date

以下代码（在 C# 中）如何返回 false ：

```
DateTime d = DateTime.Now;
d.Ticks == d.ToUniversalTime().Ticks; // false 
```

我希望 DateTime 的刻度基于 UTC 时间。[DateTime.Ticks](http://msdn.microsoft.com/en-us/library/system.datetime.ticks.aspx)上提到的 MSDN 页面说

> 此属性的值表示自 0001 年 1 月 1 日午夜 12:00:00 以来经过的 100 纳秒间隔数，它表示 DateTime.MinValue。它不包括可归因于闰秒的滴答数。

0001 年 1 月 1 日午夜 .. 在哪个时区？

为什么 DateTime.Ticks 取决于时区？

我想 Ticks 不同的事实是以下代码也返回 false 的原因

```
DateTime d = DateTime.Now;
d == d.ToUniversalTime(); // false 
```

[DateTime.Equals](http://msdn.microsoft.com/en-us/library/wk5t802s.aspx)上的 MSDN 文档提到

> 如果 Ticks 属性值相等，则 t1 和 t2 相等。在相等性测试中不考虑它们的 Kind 属性值。

我的期望是 DateTime.Ticks 是平等的，无论时区如何。

无论它们发生在哪个时区，我都希望两个时刻是相等的。我的期望错了吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-20T18:59:52.343

来源：[http ://social.msdn.microsoft.com/Forums/en/netfxbcl/thread/fde7e5b0-e2b9-4d3b-8a63-c2ae75e316d8](http://social.msdn.microsoft.com/Forums/en/netfxbcl/thread/fde7e5b0-e2b9-4d3b-8a63-c2ae75e316d8)

> DateTime.Ticks 记录为“自 0001 年 1 月 1 日午夜 12:00:00 以来经过的 100 纳秒间隔数”。那是当地时间 0001 年 1 月 1 日。如果您将 DateTime 转换为 UTC，那么 Ticks 将是自 0001 年 1 月 1 日午夜 12:00:00 UTC 以来经过的 100 纳秒间隔数。可能与当地时间 0001 年 1 月 1 日不同，因此两个 Ticks 值将不同。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-20T18:59:09.097

您当前的日期时间（除非您居住在一个特定的时区 - 格林威治标准时间）与 UTC 时间偏移 x 小时，因此 DateTime.Now 可能会让您在凌晨 4 点，而 Datetime.Now.ToUniversalTime() 可能在晚上 11 点，具体取决于在您当前的时区。

刻度是在从您的时区转换为世界时***后***计算的，因此它们唯一应该相等的时间是您居住在 GMT 时区。

更简单地说，2011 年 1 月 1 日上午 8:00 之间的滴答数与 2011 年 1 月 1 日晚上 11:00 以来的滴答数不同。在您的代码中，日期被转换为通用日期，然后在等式的右侧计算刻度，但它只是使用您的本地日期来获取左侧的差异，因此，它们是 != each其他。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T18:58:55.727

`DateTime.Now`是根据您的时区偏移量确定的，这意味着除非您的偏移量为零，否则它将与世界时不同。在两个不同的时区转换`DateTime.Now`为刻度并获得相同的结果是没有意义的 - 它们是相同的绝对时间 (UTC)，但不同的相对时间（使用时区偏移）。

# tomcat - 如何保持 websocket 打开直到正确关闭？

> ID：10251853
> 
> 赞同：1
> 
> 时间：2012-04-20T18:50:02.390
> 
> 标签：tomcat, websocket

我正在研究 websocket，并尝试了 tomcat howto。[这里](http://tomcat.apache.org/tomcat-7.0-doc/web-socket-howto.html) 一切都很清楚，除了服务器在 15 秒不活动后调用状态为 1002 的 onclose 方法（它应该是协议错误）。在我想关闭它之前，我应该怎么做才能保持 websocket 处于打开状态？我错过了什么吗？ps：我用的是Tomcat 7.0.27

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T09:08:29.053

我有一个类似的问题，并通过在 server.xml 配置中设置更高的 connectionTimeout 来停止它。

Ĵ

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-23T09:27:32.893

您可能需要重写 getReadTimeout 方法，该方法用于以毫秒为单位设置套接字超时。返回 -1 确保 websocket 始终处于打开状态，直到客户端正确关闭。

```
@Override
public int getReadTimeout() {
    return -1;
} 
```

# jquery - 如何让 textarea 集中在 jQuery 工具覆盖表单中？

> ID：10251854
> 
> 赞同：0
> 
> 时间：2012-04-20T18:50:02.453
> 
> 标签：jquery, jquery-tools

这应该很容易，但它让我发疯。我正在弹出一个包含 textarea 的 jQuery Tools 覆盖表单，并且我希望该 textarea 在它出现时具有焦点。表单本身运行良好，但我无法集中注意力。呈现表单时运行以下代码：

```
$(document).ready(function () { 
     console.log('firing!');]
     $('#edit-comment').css('color', '#ff0000');
     $('#edit-comment').focus();
 }); 
```

当表单出现时，我在 console.log 中得到了条目，并且我得到了 textarea 颜色的变化，所以代码肯定正在运行并找到 textarea。但我没有将焦点设置到文本区域。

我觉得这很奇怪。有什么见解吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T19:39:49.930

我怀疑代码在 DOM 中创建 #edit-comment 之前运行。您的代码似乎在 document.ready 上运行。

尝试在`$('#edit-comment').focus();`加载叠加层的函数内运行代码，看看是否有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T18:57:02.590

```
$(function() {
   console.log("firing!");
   document.getElementById("edit-comment").style.color = "#F00";
   document.getElementByID("edit-comment").focus();
}); 
```

但是颜色会改变文本颜色。如果要更改背景，请使用 .backgroundColor，如果要更改边框，请使用 .borderColor

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T22:18:29.650

没有回答那么多，就像踢球一样。时间是浪费；我找到了另一种方法来做同样的事情。我认为 Arno 关于#edit-comment 的确切创建时间的观点是其中的一部分。无论如何，感谢您的帮助！

# jquery - jQuery Autocomplete，如何绑定到两个输入字段？

> ID：10251855
> 
> 赞同：0
> 
> 时间：2012-04-20T18:50:05.540
> 
> 标签：jquery, jquery-ui, autocomplete, jquery-ui-autocomplete

我想将相同的自动完成绑定到两个输入字段。

田野：

```
<input id="rwF1" maxlength="250" type="text" value="">
<input id="rwF2" maxlength="250" type="text" value=""> 
```

然后我在 jQuery 中的自动完成器：

```
 $("#rwF1, #rwF2").autocomplete({
        source: availableTags
    }).data( "autocomplete" )._renderItem = function( ul, item ) {
        return $('<li class="roomWizardLI"></li>')
        .data( "item.autocomplete", item )
        .append( "<a><span class='title'>" + item.value + "</span><span class='Count'>" + "2" + " members</span></a>")
        .appendTo( ul );
    }; 
```

虽然这绑定并且自动完成菜单出现在两个输入上。自定义 renderItem 仅适用于第一个输入字段。第二个完全被忽略。任何想法为什么以及如何使自动完成功能对两个输入字段都完全有效？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T18:55:42.773

问题是[`.data`](http://api.jquery.com/data/)检索匹配元素中*第一个*元素的数据（根据文档）。

您需要遍历应用自动完成小部件的每个项目并应用您的自定义呈现代码：

```
$("#rwF1, #rwF2").autocomplete({
    source: availableTags
}).each(function () {
    $(this).data( "uiAutocomplete" )._renderItem = function( ul, item ) {
        return $('<li class="roomWizardLI"></li>')
            .data( "item.autocomplete", item )
            .append( "<a><span class='title'>" + item.value + "</span><span class='Count'>" + "2" + " members</span></a>")
            .appendTo( ul );
    };
}); 
```

**示例：http:** [//jsfiddle.net/kcSfw/](http://jsfiddle.net/kcSfw/)

编辑：使用 Jquery 1.12.0，你需要使用 uiAutocomplete

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-14T09:18:55.947

每次单击时，您都可以将自动完成绑定到输入：

```
 $(document).on("focus",".class_of_autocomplete_inputs",function(e) {
    if ( !$(this).data("autocomplete") ) {
$( ".class_of_autocomplete_inputs" ).autocomplete({

.... 
```

因此，不要在加载页面时尝试绑定到一堆 id - 只需给它们一个类并动态绑定到您“关注”的那个

# entity-framework-4 - 实体框架检查属性是否为导航属性

> ID：10251863
> 
> 赞同：5
> 
> 时间：2012-04-20T18:50:30.550
> 
> 标签：entity-framework-4, properties

有没有办法从其元数据中查看实体的属性是否是导航属性？

我可以通过检查它是否实现 ICollection 来确定属性是否是实体集合，并从那里我可以断定它是否是导航属性。

但是如果属性不是实体集合而只是引用另一个实体呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-20T21:11:24.153

您可以从 MetdataWorkspace 获取 O-Space EDM 实体类型，它具有 NavigationProperties 属性。这是一个例子：

```
var workspace = ((IObjectContextAdapter) ctx).ObjectContext.MetadataWorkspace;
var itemCollection = (ObjectItemCollection)(workspace.GetItemCollection(DataSpace.OSpace));
var entityType = itemCollection.OfType<EntityType>().Single(e => itemCollection.GetClrType(e) == typeof(MyEntity));
foreach(var navigationProperty in entityType.NavigationProperties)
{
    Console.WriteLine(navigationProperty.Name);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-01-13T18:02:00.743

您可以使用另一种方法来解决问题。

Obs：`found`变量是一些 DbContext 实体实例；

```
foreach (var propertyInfo in found.GetType().GetProperties())
{
    var reference = Context.Entry(found).Member(propertyInfo.Name) as DbReferenceEntry;

    if (reference != null)
    {
        reference.Load();
    }
} 
```

# arrays - R中数组索引的算术运算

> ID：10251865
> 
> 赞同：0
> 
> 时间：2012-04-20T18:50:38.040
> 
> 标签：arrays, r

我创造价值

```
I=1:20
> I
 [1]  1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20

I[10+1:20]
 [1] 11 12 13 14 15 16 17 18 19 20 NA NA NA NA NA NA NA NA NA NA 
```

我预计数组值为 11:20，仅此而已。

但是，如果我使用

```
I[(10+1):20]
 [1] 11 12 13 14 15 16 17 18 19 20 
```

我得到了预期的答案。

任何线索将不胜感激。

谢谢，

桑卡尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T18:53:31.113

`:`运算符优先。所以跑步

```
1:5+5 
```

将首先计算输出

```
1:5 
```

然后将 5 添加到该数组中，产生

```
6, 7, 8, 9, 10 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T18:53:39.653

随着`I[10+1:20]`您选择长度为 20 的向量的元素 11 到 30，因此您得到 10 倍`NA`（对于不存在的元素 21、22、...）。`I[(10+1):20]`您只需选择元素 11 到 20 。

# c# - 在 KeyDown 事件中使用 SuppressKeyPress 是否会损坏 MaskedTextBoxes？

> ID：10251866
> 
> 赞同：1
> 
> 时间：2012-04-20T18:50:39.480
> 
> 标签：c#, .net, winforms, keydown, maskedtextbox

我正在设置`SuppressKeyPress = true`用户在 a 中按下 ENTER/RETURN 键`MaskedTextBox`以防止通常发出的恼人的哔哔声。这很好用，但是当我清除我的表单时，它`MaskedTextBox`不再按预期运行。输入的第一个字符是幻影字符，在输入第二个字符后消失。

例子：

```
__.___
Set text = "0"
0_.___
User enters text
09.999
User presses ENTER
User presses Save & Next (this clears the form)
Reset text = "0"
0_.___
User enters first 9
09_.___
User enters second 9
0_.9__ 
```

如果用户使用 TABS`MaskedTextBox`而不是按 ENTER，这可以正常工作（文本输入正确，没有任何奇怪的移位。）我能找到的唯一区别是我正在使用`SuppressKeyPress`并且非公共成员中的 flagState 是不同的（当我不做时为 2052，当我做时为`SuppressKeyPress`2048。`SuppressKeyPress`）

有没有办法在不破坏 BEEP 的情况下防止 BEEP`MaskedTextBox`或修复`MaskedTextBox`之后`SuppressKeyPress`的方法（如果不是所有方法，我已经尝试了大多数`MaskedTextBox`本身的方法：`refreshText`, `refresh`, 等等...）

这是 MaskedTextBox 定义和 KeyDown 方法：

```
// 
// aTextBox
// 
this.aTextBox.Location = new System.Drawing.Point(130, 65);
this.aTextBox.Mask = "##.###";
this.aTextBox.Name = "aTextBox";
this.aTextBox.Size = new System.Drawing.Size(50, 20);
this.aTextBox.TabIndex = 3;
this.aTextBox.KeyDown += new System.Windows.Forms.KeyEventHandler(this.general_KeyDown);
this.aTextBox.Leave += new System.EventHandler(this.validate); 
```

`general_KeyDown`看起来像这样：

```
private void general_KeyDown(object sender, KeyEventArgs e)
{
    if (e.KeyCode == Keys.Enter)
    {
        e.Handled = true;
        e.SuppressKeyPress = true;
        SendKeys.Send("{TAB}");
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T19:45:04.497

我无法复制，但我肯定会在参考源中看到它。MaskTextBox 还在寻找 Keys.Enter 并在看到它时设置和内部标志，该标志会影响后续击键的键处理。您的代码很可能会搞砸。

通过覆盖 OnKeyDown 确保控件根本看不到击键。这需要继承您自己的控件，如下所示：

```
using System;
using System.Windows.Forms;

class MyMaskTextBox : MaskedTextBox {

    protected override void OnKeyDown(KeyEventArgs e) {
        if (e.KeyData == Keys.Enter) {
            e.Handled = e.SuppressKeyPress = true;
            this.Parent.GetNextControl(this, true).Select();
            return;
        }
        base.OnKeyDown(e);
    }
} 
```

将代码粘贴到新类中并编译。从工具箱顶部删除新控件，替换旧控件。

# javascript - jquery获取剥离样式属性的元素的HTML

> ID：10251867
> 
> 赞同：2
> 
> 时间：2012-04-20T18:50:41.800
> 
> 标签：javascript, jquery, html, css, jquery-animate

是否可以获得元素的原始 HTML，或者是否可以获得没有“样式”属性的 HTML？考虑以下示例，

```
<div class="outer">
   <div class="inner">
       some text
   </div>
</div> 
```

现在，我将一些动画/CSS 应用到“内部”元素。

```
​$('.inner').animate({
    'margin': '-10px'
});​​ 
```

当我使用 获取“外部”元素的 HTML 时`console.log($('.outer').html());`，我得到以下内容

```
<div class="inner" style="margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; ">
       some text
   </div> 
```

但是，我实际上只需要这个

```
<div class="inner">
       some text
   </div> 
```

获得该输出的最简单方法是什么？在应用 animate() 或 css() 之前，我不需要创建元素的备份。

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-20T18:56:57.507

如果您想完全删除样式属性（并且不希望它恢复），请使用以下代码：

```
/* Working code */ 
$(".outer").find(".inner").removeAttr('style').end().html();

/* Explanation of working code */
$(".outer")                     // Get the outer element
           .find(".inner")      // Find the inner div
           .removeAttr('style') // Remove the attribute from the inner div
           .end()               // Return to the outer div
           .html();             // Get outer div's HTML 
```

这是[一个工作小提琴](http://jsfiddle.net/JamesHill/Sr7SX/)。

**jQuery 文档：**

*   [`find()`](http://api.jquery.com/find/)
*   [`removeAttr()`](http://api.jquery.com/removeAttr/)
*   [`end()`](http://api.jquery.com/end/)
*   [`html()`](http://api.jquery.com/html/)

# ruby-on-rails-3 - RSpec 在 Rails 中的开发数据库上运行

> ID：10251873
> 
> 赞同：0
> 
> 时间：2012-04-20T18:50:51.810
> 
> 标签：ruby-on-rails-3, rspec

我继承了一些我试图在 Rails 3.0 应用程序上运行的 RSpec，但我遇到了一些问题。出于某种原因，RSpecs 在我的开发数据库而不是我的测试数据库上运行。我究竟做错了什么？

我在 cmd 行中调用我的规范（在 Windows 中）：

```
bundle exec rspec foo_controller_spec.rb 
```

我的宝石文件：

```
group :development, :test do
  gem 'rspec-rails'
end

group :test do  
  gem 'rspec'
  gem 'webrat'
  gem 'pickle'
  gem 'shoulda'
  gem 'shoulda-matchers'
  gem 'capybara'
  gem 'database_cleaner'
  gem 'factory_girl_rails'
  gem 'launchy'
  gem "mocha", :require => false
  gem 'fixture_builder'
  gem 'ZenTest'
  gem 'assert_difference'
  gem 'database_cleaner'
  gem 'term-ansicolor'
  gem 'spork'
  gem 'assert_difference'
end 
```

spec_helper.rb

```
require 'rubygems'
require 'spork'
$LOAD_PATH.unshift(File.dirname(__FILE__))
$LOAD_PATH.unshift(File.join(File.dirname(__FILE__), '..', 'lib'))

Spork.prefork do
  ENV["RAILS_ENV"] ||= 'test'
  require File.expand_path("../../config/environment", __FILE__)
  require 'rspec/rails'
  require 'capybara/rspec'
  require 'fixture_builder'
  require 'database_cleaner'
  require "authlogic/test_case" 
  require 'chargify_api_ares'
  require 'term/ansicolor'

    Dir[Rails.root.join("spec/support/**/*.rb")].each {|f| require f}
    DatabaseCleaner.strategy = :truncation

    RSpec.configure do |config|
      config.mock_with :rspec
      config.color_enabled = true
      config.include AssertDifference
      config.include Webrat::HaveTagMatcher
      config.fixture_path = "#{::Rails.root}/spec/fixtures"
      config.include Devise::TestHelpers, :type => :controller
      config.use_transactional_fixtures = true
      config.include AssertDifference
      config.include(MailerMacros)
      config.before(:each) { reset_email }

      config.before(:suite) do
        DatabaseCleaner.strategy = :transaction
        DatabaseCleaner.clean_with(:deletion)
      end

      config.before(:each) do
        DatabaseCleaner.start
      end

      config.after(:each) do
        DatabaseCleaner.clean
      end
    end
end

 Spork.each_run do
 end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T19:59:00.363

你有没有尝试过？

```
rake spec 
```

这是在 Rails 项目中运行 RSpec 的方式（至少通常如此）。

或者

```
rake spec:controllers 
```

例如，仅运行与您的控制器相关的规范

# php - 当 XAMPP 作为服务运行时，页面无法连接 ODBC 服务器（在 Windows Server 2008 上）

> ID：10251874
> 
> 赞同：0
> 
> 时间：2012-04-20T18:50:53.593
> 
> 标签：php, sql-server, apache, windows-server-2008, xampp

当我将 Apache（通过 XAMPP）作为独立服务器（而不是服务）运行时，以下代码可以正常工作（删除了用户名和密码）

```
$server = "WMS";
$link  = odbc_connect($server,'','');

if (!$link) {
    die('Something went horribly wrong while connecting to MSSQL');
}else {echo('');} 
```

但是，当我将 Apache 更改为作为 Windows 服务运行时，连接中断并且我收到以下错误消息：

```
Warning: odbc_connect() [function.odbc-connect]: SQL error:
[Microsoft][ODBC Driver Manager] Data source name not found
and no default driver specified, SQL state IM002 in SQLConnect
in C:\xampp\htdocs\Dev\well.php on line 30.
Something went wrong while connecting to MSSQL 
```

这是 Windows Server 2008 问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T15:19:41.140

将 apache 作为服务运行意味着 windows 不再登录到我的身份验证方法 SQL 服务器

将 SQL Server 切换到 SQL 和 Windows 身份验证意味着 Web 应用程序可以使用行中提供的凭据登录

```
$link  = odbc_connect($server,'[username]','[password]'); 
```

只要他们匹配服务器设置的安全和登录部分中的用户，并且这些用户被设置为 SQL 身份验证类型用户

# asp.net - Asp.Net Button 控件呈现，但更新后消失的更新面板

> ID：10251875
> 
> 赞同：0
> 
> 时间：2012-04-20T18:50:54.747
> 
> 标签：asp.net, updatepanel

我正在创建一个包含按钮控件的自定义复合控件，同时它在按钮标签`<span>`之外呈现一个包装器`<input>`。但是，如果我将此自定义控件放入更新面板并单击此按钮，则在回发后更新面板会将按钮的呈现更改为仅在 . 之外具有`<input>`标记和删除`<span>`选项卡`<input>`，这可能会更改我的 css 选择器。

1.  为什么asp.net会生成一个for按钮控件？
2.  为什么更新面板会改变按钮控件的渲染？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T19:01:52.993

尝试将`RenderMode`更新面板的 更改为`Inline`。

**编辑**

作为一种可能的解决方法，请尝试将按钮包装在`Label`控件中，因为无论如何它都会在呈现时解析为跨度。

# c# - Visual Studio 如何在调试期间显示 System.Double？

> ID：10251879
> 
> 赞同：7
> 
> 时间：2012-04-20T18:50:59.120
> 
> 标签：c#, visual-studio-2010, debugging, double

尝试调试以下简单程序，并`x`在每个步骤中将鼠标悬停（或“添加监视”`x`或其他）。

```
using System;
using System.Globalization;

static class Program
{
  static double x;

  static void Main()
  {
    x = 2d;

    // now debugger shows "2.0", as if it has used
    // x.ToString("F1", CultureInfo.InvariantCulture)

    x = 8.0 / 7.0;

    // now debugger shows "1.1428571428571428", as if it had used
    // x.ToString("R", CultureInfo.InvariantCulture)
    // Note that 17 significant figures are shown, not the usual 15.

    x = -1e-200 / 1e200;

    // now debugger shows "0.0"; there is no indication that this is really negative zero
    //

    Console.WriteLine(1.0 / x); // this is negative infinity
  }
} 
```

因此，显然 VS 有自己的方式来显示`System.Double`. 它为此目的调用了哪种方法？有没有办法以编程方式获得完全相同的字符串表示？

（使用 Visual Studio 2010 Professional 进行了尝试。）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-20T19:01:39.800

C# 和 VB.Net EE 的核心都使用该`_ecvt_s`函数将 a 格式化`double`为字符串。

*   [http://msdn.microsoft.com/en-us/library/ehz2dset(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/ehz2dset%28v=vs.80%29.aspx)

两者都对生成的字符串进行了一些清理，以使显示更像 C# 和 VB，并更好地处理一些极端情况。函数`_ecvt_s`或清理代码都可能导致您看到的差异。很难一眼看出

有些人可能会问，为什么我们会经历所有这些麻烦，而不是说只是调用`ToString`价值并显示它。我们不这样做有几个原因。

第一个很简单，功能评估甚至`ToString`是 EE 可以执行的最昂贵的操作。常见真实场景的配置文件显示，我们 98% 以上的时间都花在了功能评估上。由于性能影响，任何时候我们都可以避免 func eval。

第二个原因很简单，函数评估并不总是可用的。在许多情况下 func eval 不可用，但人们仍然希望看到原始类型的显示，如`double`,`int`等......将它们移除会基本上扼杀调试体验。因此，我们需要在没有`ToString`支持的情况下解决这个问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-25T17:53:03.713

我会接受 JaredPar 的回答，因为它描述了调试器内部的工作方式。

但是因为答案无助于获得相同的字符串，所以这里有一些经常（总是？）给出相同字符串的代码：

```
static string ToDebugString(this double d)
{
  if (Double.IsNaN(d) || Double.IsInfinity(d))
    return d.ToString(CultureInfo.InvariantCulture);

  string s = d.ToString("R", CultureInfo.InvariantCulture);
  if (!s.Contains("."))
    s += ".0";
  return s;
} 
```

请随时改进此答案。

# debugging - 在调试器中查看原始 ObjC 代码而不是汇编

> ID：10251883
> 
> 赞同：0
> 
> 时间：2012-04-20T18:51:07.300
> 
> 标签：debugging, xcode4.3

当我在 Xcode 4.3 中使用调试器时，你能告诉我如何只查看 Objective-C 代码而不是汇编代码吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T18:57:25.543

您必须在控制台窗口中手动检查值或对象的类型。例如，您将键入`p <object>`或`po <object>`查看它。

# php - 使用 php 处理字符串

> ID：10251889
> 
> 赞同：1
> 
> 时间：2012-04-20T18:51:24.763
> 
> 标签：php

我有一个这样的字符串

```
$str=44797675962044781781414912/04/2012 
```

*   前 12 位：447976759620 是电话号码
*   接下来的 12 位：447817814149 是服务器代码

休息是日期

### 我试图这样得到它：

```
echo substr($str,0,12).'<br/>';
echo substr($str,12,24).'<br/>';
$tempRest["receivedtime"]=substr($pieces[0],-10); 
```

得到这个奇怪的输出：

```
 44797675962
   12/04/2012
   44778691004444781781414912/04/2012 
```

我能做些什么。有什么帮助吗？

## 编辑：

### 原始代码：

```
 function GetSoapReturnArray() {
 $classmap = array('MyWSDLStructure' => 'MyComplexDataType');
 $m_wsdl = 'https://m2mconnect.orange.co.uk/orange-soap/services/MessageServiceByCountry?wsdl';
  $m_arr_soapclient = array('trace' => true, 'exceptions' => true);

  $soap_client_handle = new SoapClient($m_wsdl, $m_arr_soapclient);
  $soap_result = $soap_client_handle->peekMessages('telab048', 'Qwerty12', 40, '', 1);;

  $str=NULL;

  foreach ($soap_result as $soapArrayData)
  {
    $pieces = preg_split('/[ ]/', $soapArrayData);

  $str=$pieces[0];
    //echo $str.'<br/>';

    echo substr($str, 0, 12) . '<br />';
    echo substr($str, 12, 12) . '<br />';
  }
}

}
  GetSoapReturnArray(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-20T18:54:30.207

第二个参数[`substr`](http://php.net/substr)是长度，而不是结束索引。通过`12`而不是`24`.

```
echo substr($str, 0, 12) . '<br />';
echo substr($str, 12, 12) . '<br />';
$tempRest["receivedtime"] = substr($pieces[0], 24); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T19:37:12.617

你遇到了问题，因为`$str`它不仅仅是一个字符串，它包含`HTML`用于`strip_tags`过滤所有 html 标签的标签......

尝试

```
 foreach ( $soap_result as $soapArrayData ) {
        $pieces = preg_split ( '/[ ]/', $soapArrayData );

        $str = $pieces [0];
        $str = trim ( $str );
        $str = strip_tags ( $str );
        echo substr ( $str, 0, 12 ) . '<br />'; //Phone Number
        echo substr ( $str, 12, 12 ) . '<br />'; // Server Code
        echo substr ( $str, 24, 10 ) . '<br />'; //Time
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T19:57:49.510

为此，您有[`sscanf`](http://php.net/sscanf)：

```
$r = sscanf($str, '%12s%12s%s', $phone, $server, $date); 
```

输出（`var_dump($phone, $server, $date);`）：

```
string(12) "447976759620"
string(12) "447817814149"
string(10) "12/04/2012" 
```

# wpf - 使用 Xceed PropertyGrid

> ID：10251890
> 
> 赞同：9
> 
> 时间：2012-04-20T18:51:28.070
> 
> 标签：wpf, propertygrid, xceed

我是 C#/WPF 的初学者，正在尝试使用 Xceed PropertyGrid。在他们的网站上，他们展示了一个例子：

```
 <xctk:PropertyGrid x:Name="_propertyGrid" Width="450" Margin="10"
                                 AutoGenerateProperties="False">
            <!-- Only the following properties will be displayed in the PropertyGrid -->
            <xctk:PropertyGrid.PropertyDefinitions>
                <xctk:PropertyDefinition Name="FirstName" />
                <xctk:PropertyDefinition Name="FavoriteColor" />
                <xctk:PropertyDefinition Name="PetNames" />
            </xctk:PropertyGrid.PropertyDefinitions>
        </xctk:PropertyGrid> 
```

我已将其插入我的 xaml。我看到了 PropertyGrid 视图，但是我没有看到任何属性定义。我觉得我必须缺少一些基本的东西？我应该在代码隐藏中添加任何内容吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-22T18:20:44.883

我在这里找到了解决方案： [http ://wpftoolkit.codeplex.com/discussions/353017](http://wpftoolkit.codeplex.com/discussions/353017)

此外，您可以在 Xceed 网站上下载源代码。这提出了使用 propertygrid 的示例，这对我也有帮助。诀窍是分配 PropertyGrid 的“SelectedObject”。

# spring - 没有名为 xx 的 EntityManager 的持久性提供程序

> ID：10251891
> 
> 赞同：1
> 
> 时间：2012-04-20T18:51:29.020
> 
> 标签：spring, rest, maven, osgi

我已经搜索了整个 SO，虽然存在具有相似标题的帖子，但这是一个不同的场景。

我的 Eclipse 中有两个项目 1) 一个 JPA 项目 2) 一个使用 JPA 项目中的实体的 Web 项目。两者都启用了 OSGi 和 Maven。我正在使用最新的 SpringFramework (3.1.1) 在 Web 项目中创建 RESTful Web 服务。

项目布局如下：

1) JPA 项目

```
com.demo.persistence 
|-src
  |-com.demo.persistence
    |-User
|-META-INF
    |-MANIFEST.MF
    |-persistence.xml
|-pom.xml 
```

* * *

2) 网络项目

```
com.demo.web
|-src
  |-com.demo.web.controller
    |-Controller.java
  |-com.demo.web.dao
    |-UserDAO.java
    |-UserListDAO.java
  |-com.demo.web.model
    |-UserBean.java
  |-com.demo.web.interfaces
    |-UserDAOIntf.java
|-WebContent
  |-META-INF
    |-MANIFEST.MF
  |-WEB-INF
    |-classes
      |-log4j.properties
    |-rest-context.xml
    |-rest-context-osgi.xml
    |-rest-servlet.xml
    |-web.xml
  |-pom.xml 
```

* * *

com.demo.persistence.User.java

```
@Entity
@XmlRootElement(name="user")
@Table(name = "T_USER")
@NamedQuery(name = "AllUsers", query = "select u from User u")
public class User {

@Id
@GeneratedValue
@Column(nullable = false)
private long id;

@Basic
@Column(nullable = false)
private String userName;

public void setUserName(String param) {
    this.userName = param;
}

public String getUserName() {
    return userName;
}
} 
```

* * *

com.demo.web.dao.UserDAO

```
public class UserDAO implements UserDAOInterface {  
@PersistenceContext
private EntityManager em;

public User getUser(Long id) {
  try{
      return em.find(User.class, id);
  } finally {
      if(em != null)
      em.close();
   }
}

public List<User> getAllUsers() {
  try {
    List<User> users = em.createNamedQuery("AllUsers", User.class).getResultList();
    return users;
  } finally {
          if(em != null)
          em.close();
  }
}

@Transactional
public User addUser(User user) {
  try {
    em.persist(user);
        em.flush();
    return user;
        } finally {
        if(em != null)
    em.close();
        }
  }
} 
```

* * *

com.demo.web.model

```
public class UserBean {
  private UserDAO userDAO;
    public void addUserDetails( String userName ) {
    User user = new User();
    user.setUserName(userName);
    this.userDAO.addUser(user);
}

public List<User> getAllUsers() {
    return this.userDAO.getAllUsers();
}

public User getUser(Long id) {
    return this.userDAO.getUser(id);
}

public User addUser(User user) {    
    return this.userDAO.addUser(user);
}
} 
```

* * *

com.demo.web.controller.Controller

```
@Controller
public class Controller {

    private Jaxb2Marshaller jaxb2Marshaller;
    private UserBean userBean;

    public Jaxb2Marshaller getJaxb2Mashaller() {
        return jaxb2Marshaller;
    }

    public void setJaxb2Mashaller(Jaxb2Marshaller jaxb2Marshaller) {
        this.jaxb2Marshaller = jaxb2Marshaller;
    }
    @RequestMapping(method=RequestMethod.GET, value="/rest/users", headers="Accept=application/xml, application/json")
    public @ResponseBody UserListDAO getUserList() { 
        return new UserListDAO(userBean.getAllUsers());
    }

    @RequestMapping(method=RequestMethod.GET, value="rest/user/{id}", headers="Accept=application/xml, application/json")
    public @ResponseBody User getUser(@PathVariable Long id) {
        return userBean.getUser(id);
    }

    @RequestMapping(method=RequestMethod.POST, value="rest/user/add", headers="Accept=application/xml, application/json")
    public @ResponseBody User addUser(@RequestBody String userString) {
        Source source = new StreamSource(new StringReader(userString));
        User user = (User) jaxb2Marshaller.unmarshal(source);
        return userBean.addUser(user);
    } 
```

* * *

web.xml

```
 <?xml version="1.0" encoding="UTF-8"?>
    <web-app 
      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
      xmlns="http://java.sun.com/xml/ns/javaee" 
      xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
      xsi:schemaLocation=
          "http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
        id="WebApp_ID" version="2.5">

    <display-name>com.demo.web</display-name>

    <welcome-file-list>
        <welcome-file>index.html</welcome-file>
    </welcome-file-list>

<context-param>
    <param-name>log4jConfigLocation</param-name>
    <param-value>
        /WEB-INF/classes/log4j.properties
    </param-value>
    </context-param>

    <listener>
    <listener-class>
        org.springframework.web.util.Log4jConfigListener
    </listener-class>
    </listener>

    <!-- The context params that read by ContextLoaderListener  -->
    <context-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>
            /WEB-INF/rest-context.xml
        </param-value>
    </context-param>

    <!-- This listener will load other application context file in addition to springweb-servlet.xml -->
    <listener>
        <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
    </listener>

    <servlet>
        <servlet-name>rest</servlet-name>
        <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>

    <servlet-mapping>
        <servlet-name>rest</servlet-name>
        <url-pattern>/service/*</url-pattern>
    </servlet-mapping>
</web-app> 
```

* * *

休息上下文.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:tx="http://www.springframework.org/schema/tx"
    xmlns:context="http://www.springframework.org/schema/context"
    xsi:schemaLocation="
        http://www.springframework.org/schema/beans
        http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
        http://www.springframework.org/schema/context
        http://www.springframework.org/schema/context/spring-context-3.0.xsd
        http://www.springframework.org/schema/tx
        http://www.springframework.org/schema/tx/spring-tx-2.0.xsd">

    <context:annotation-config />
    <context:component-scan base-package="com.demo.web.controller" />
    <tx:annotation-driven transaction-manager="transactionManager" /> 

    <bean id="entityManagerFactory" class="org.springframework.orm.jpa.LocalEntityManagerFactoryBean">
        <property name="persistenceUnitName" value="com.demo.persistence" />
    </bean>

    <bean id="transactionManager" class="org.springframework.orm.jpa.JpaTransactionManager">
        <property name="entityManagerFactory" ref="entityManagerFactory" />
    </bean>   

    <!-- Bean - DAO Mapping -->
    <bean id="userDAO" class="com.demo.dao.UserDAO">
        <property name="entityManagerFactory" ref="entityManagerFactory" />
    </bean>

    <!-- Bean Declarations -->
    <bean id="userBean" class="com.demo.web.model.UserBean">
        <property name="userDAO" ref="userDAO" />
    </bean>

</beans> 
```

* * *

休息上下文osgi.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<beans 
    xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:osgi="http://www.springframework.org/schema/osgi"
    xsi:schemaLocation="
        http://www.springframework.org/schema/beans
        http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
        http://www.springframework.org/schema/osgi  
        http://www.springframework.org/schema/osgi/spring-osgi-1.0.xsd">

    <osgi:service interface="javax.persistence.EntityManager" ref="entityManagerFactory" />

</beans> 
```

* * *

休息-servlet.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
    xmlns:mvc="http://www.springframework.org/schema/mvc"
    xsi:schemaLocation="
        http://www.springframework.org/schema/beans
        http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
        http://www.springframework.org/schema/mvc
        http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd">

    <!-- To enable @RequestMapping process on type level and method level -->
    <bean class="org.springframework.web.servlet.mvc.annotation.DefaultAnnotationHandlerMapping" />
    <bean class="org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter">
        <property name="messageConverters">
            <list>
                <ref bean="marshallingConverter" />
                <ref bean="jsonConverter" />
            </list>
        </property>
    </bean>

    <bean id="marshallingConverter" class="org.springframework.http.converter.xml.MarshallingHttpMessageConverter">
        <constructor-arg ref="jaxbMarshaller" />
        <property name="supportedMediaTypes" value="application/xml"/>
    </bean>

    <bean id="jsonConverter" class="org.springframework.http.converter.json.MappingJacksonHttpMessageConverter">
        <property name="supportedMediaTypes" value="application/json" />
    </bean>

    <bean id="jaxbMarshaller" class="org.springframework.oxm.jaxb.Jaxb2Marshaller">
        <property name="classesToBeBound">
            <list>
                <value>com.demo.persistence.User</value>
                <value>com.demo.dao.UserListDAO</value>
            </list>
        </property>
    </bean>

    <bean id="users" class="org.springframework.web.servlet.view.xml.MarshallingView">
        <constructor-arg ref="jaxbMarshaller" />
    </bean>

    <!--bean id="viewResolver" class="org.springframework.web.servlet.view.BeanNameViewResolver" /-->

    <bean id="userController" class="com.demo.web.controller.Controller">
        <property name="userDAO" ref="userDAO" />
        <property name="jaxb2Mashaller" ref="jaxbMarshaller" />
    </bean>
</beans> 
```

* * *

控制台 - log4j

```
ERROR [org.springframework.web.context.ContextLoader] - Context initialization failed

org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in ServletContext resource [/WEB-INF/rest-context.xml]: Invocation of init method failed; nested exception is javax.persistence.PersistenceException: No Persistence provider for EntityManager named com.demo.persistence

    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1455)

    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:519)

    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)

    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)

    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)

    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)

    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)

    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:567)

    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:913)

    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:464)

    at org.springframework.web.context.ContextLoader.configureAndRefreshWebApplicationContext(ContextLoader.java:385)

    at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:284)

    at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:111)

    at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4779)

    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5273)

    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)

    at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:897)

    at org.apache.catalina.core.ContainerBase.access$000(ContainerBase.java:131)

    at org.apache.catalina.core.ContainerBase$PrivilegedAddChild.run(ContainerBase.java:154)

    at org.apache.catalina.core.ContainerBase$PrivilegedAddChild.run(ContainerBase.java:143)

    at java.security.AccessController.doPrivileged(Native Method)

    at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:871)

    at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:615)

    at org.eclipse.gemini.web.tomcat.internal.TomcatServletContainer.startWebApplication(TomcatServletContainer.java:122)

    at org.eclipse.gemini.web.internal.StandardWebApplication.start(StandardWebApplication.java:91)

    at org.eclipse.gemini.web.extender.WebContainerBundleCustomizer.addingBundle(WebContainerBundleCustomizer.java:45)

    at org.osgi.util.tracker.BundleTracker$Tracked.customizerAdding(BundleTracker.java:482)

    at org.osgi.util.tracker.BundleTracker$Tracked.customizerAdding(BundleTracker.java:1)

    at org.osgi.util.tracker.AbstractTracked.trackAdding(AbstractTracked.java:262)

    at org.osgi.util.tracker.AbstractTracked.track(AbstractTracked.java:234)

    at org.osgi.util.tracker.BundleTracker$Tracked.bundleChanged(BundleTracker.java:457)

    at org.eclipse.osgi.framework.internal.core.BundleContextImpl.dispatchEvent(BundleContextImpl.java:847)

    at org.eclipse.osgi.framework.eventmgr.EventManager.dispatchEvent(EventManager.java:230)

    at org.eclipse.osgi.framework.eventmgr.ListenerQueue.dispatchEventSynchronous(ListenerQueue.java:148)

    at org.eclipse.osgi.framework.internal.core.Framework.publishBundleEventPrivileged(Framework.java:1522)

    at org.eclipse.osgi.framework.internal.core.Framework$7.run(Framework.java:1462)

    at java.security.AccessController.doPrivileged(Native Method)

    at org.eclipse.osgi.framework.internal.core.Framework.publishBundleEvent(Framework.java:1460)

    at org.eclipse.osgi.framework.internal.core.Framework.publishBundleEvent(Framework.java:1453)

    at org.eclipse.osgi.framework.internal.core.BundleHost.startWorker(BundleHost.java:391)

    at org.eclipse.osgi.framework.internal.core.AbstractBundle.start(AbstractBundle.java:299)

    at org.eclipse.osgi.framework.internal.core.PackageAdminImpl.resumeBundles(PackageAdminImpl.java:311)

    at org.eclipse.osgi.framework.internal.core.PackageAdminImpl.processDelta(PackageAdminImpl.java:555)

    at org.eclipse.osgi.framework.internal.core.PackageAdminImpl.doResolveBundles(PackageAdminImpl.java:251)

    at org.eclipse.osgi.framework.internal.core.PackageAdminImpl$1.run(PackageAdminImpl.java:173)

    at java.lang.Thread.run(Thread.java:722)

Caused by: javax.persistence.PersistenceException: No Persistence provider for EntityManager named com.demo.persistence

    at javax.persistence.Persistence.createEntityManagerFactory(Unknown Source)

    at org.springframework.orm.jpa.LocalEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalEntityManagerFactoryBean.java:92)

    at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:310)

    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory$6.run(AbstractAutowireCapableBeanFactory.java:1504)

    at java.security.AccessController.doPrivileged(Native Method)

    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1502)

    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1452)

    ... 45 more 
```

* * *

很抱歉这个巨大的帖子。但是我在 Manifest 文件中导出了我的持久性包，并在我的 Web 应用程序中导入了相同的包。

使用的持久性提供程序是`org.eclipse.persistence.jpa.PersistenceProvider`. 这已经停止了我的项目一个月.. :(请帮忙。

提前致谢。

* * *

**编辑**

持久性.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<persistence version="2.0"
    xmlns="http://java.sun.com/xml/ns/persistence" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd">
    <persistence-unit name="com.demo.persistence"
        transaction-type="RESOURCE_LOCAL">
        <provider>org.eclipse.persistence.jpa.PersistenceProvider</provider>
        <class>com.demo.persistence.Person</class>
        <properties>
            <property name="eclipselink.weaving" value="false" />
            <property name="eclipselink.ddl-generation" value="create-tables" />
        </properties>
    </persistence-unit>
</persistence> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T19:01:15.517

您正在指示您的容器为您管理和初始化持久性上下文：

```
@PersistenceContext
private EntityManager em; 
```

但只有当它可以访问与您执行实体管理器初始化相同的存档中的 persistence.xml 文件时，它才能执行此操作。在这种情况下，您可能应该将所有持久性逻辑移动到持久性项目中（毕竟这就是您创建它的目的）。或者，您可以将 persistence.xml 复制到 Web 项目中（不推荐）。

# scala - Scala Cake Pattern：将大型组件拆分为单独的文件

> ID：10251892
> 
> 赞同：6
> 
> 时间：2012-04-20T18:51:36.207
> 
> 标签：scala, cake-pattern

我想使用 Cake Pattern 将某些软件系统的部分拆分为组件，以使其完全模块化，如[本文](http://lampwww.epfl.ch/~odersky/papers/ScalableComponent.pdf)中所建议的那样。在最简单的情况下，我想要一些可模拟的组件，比如日志、配置、数据库、脚本等，它们可能会相互使用。代码可能看起来像

```
trait AbstractConfig {
  def config: AbstractConfigInterface
  trait AbstractConfigInterface {
    def test: Unit
  }
}

trait SomeConfig extends AbstractConfig {
  this: Core =>  
  def config = SomeConfigImplementation
  object SomeConfigImplementation extends AbstractConfigInterface {
    def test = println("conf.test method called")
  }
}

trait AbstractDatabase {
  def database: AbstractDatabaseInterface
  trait AbstractDatabaseInterface {
    def connect: Unit
  }
}

trait SomeDatabase extends AbstractDatabase {
  this: Core =>
  def database = SomeDatabaseImplementation
  object SomeDatabaseImplementation extends AbstractDatabaseInterface {
    def connect = {
      println("connect method called")
      core.conf.test
    }
  }
}

trait Core {
  this: AbstractDatabase with AbstractConfig =>
  def core = CoreInterface
  object CoreInterface {
    def db = database
    def conf = config
  }
}

object app extends Core with SomeDatabase with SomeConfig

object Run {
  def main(args: Array[String]) = {
    app.core.db.connect
  }
} 
```

在这里，数据库和配置组件（`SomeConfig`和`SomeDatabase`特征）是可插入的，并且可以根据需要更改为其他一些实现。他们的实现可以访问`core`同时包含数据库和配置的对象，因此数据库可以在需要时访问配置，反之亦然。

所以问题是：如果某些特征`SomeDatabase`变得很大并且不适合单个文件，如何将其拆分为单独的类，保留对`core`对象的访问权限？更具体地说，假设我需要将一些代码从连接方法`SomeDatabase`移到另一个文件中：

```
// SomeDatabase.scala
trait SomeDatabase extends AbstractDatabase {
  this: Core =>
  def database = SomeDatabaseImplementation
  object SomeDatabaseImplementation extends AbstractDatabaseInterface {
    def connect = {
      val obj = new SomeClass()
    }
  }
}

// SomeClass.scala in the same package
class SomeClass {
    core.conf.test // Does not compile - how to make it work??
} 
```

`SomeClass`是 SomeDatabase 如何工作的实现细节，所以我显然不想让它成为一个特征并将其混合到应用程序中。有没有办法提供对`core`对象的访问`SomeClass`？

* * *

一些相关链接：

1.  [Jan Machacek 的依赖注入与蛋糕模式](http://www.cakesolutions.net/teamblogs/2011/12/15/dependency-injection-vs-cake-pattern/)
2.  [真实世界的 Scala：Jonas Boner 的依赖注入](http://jonasboner.com/2008/10/06/real-world-scala-dependency-injection-di/)
3.  [Scala 中的依赖注入：Adam Warsky 的扩展蛋糕模式](http://www.warski.org/blog/2010/12/di-in-scala-cake-pattern/)
4.  [Martin Odersky 和 ​​Matthias Zenger 的可扩展组件抽象](http://lampwww.epfl.ch/~odersky/papers/ScalableComponent.pdf)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T20:11:46.177

`Core`最简单的做法是作为构造函数参数传入`SomeClass`.

```
// SomeDatabase.scala
trait SomeDatabase extends AbstractDatabase {
  this: Core =>
  def database = SomeDatabaseImplementation
  object SomeDatabaseImplementation extends AbstractDatabaseInterface {
    def connect = {
      val obj = new SomeClass(SomeDatabase.this) // pass it here
    }
  }
}

// SomeClass.scala in the same package
class SomeClass(coreComp: Core) { // use it here
    coreComp.core.conf.test
} 
```

有趣的是，我真的只是想通过`CoreInterface`or `AbstractConfigInterface`，但他们是内在类型的事实确实让这变得困难。

# php - 带有 MIME 版本的 php 电子邮件标头：1.0

> ID：10251894
> 
> 赞同：0
> 
> 时间：2012-04-20T18:51:47.447
> 
> 标签：php, email, header, mime

我有这些代码行：

```
 $from = "email@domian.com";
        $headers = "From:" . $from;
        $headers .= "MIME-Version: 1.0\r\n";
        $headers .= "Content-Type: text/html; charset=ISO-8859-1\r\n"; 
```

我需要 MIME 类型，因为我将 file_get_contents 用于 html 文件，我的问题在于它显示为“email@domain.comMIME-Version:1.0”的标题下，我希望它只是说“email@domain.com”如何如何从标题中显示的 MIME 类型中取出？

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-20T18:53:16.110

只需`\r\n`在`From:`标题后添加即可。

```
$headers = "From:" . $from . "\r\n"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-01-03T06:37:10.847

```
$to = "whereyousendmail@gmail.com";
$from = "email@domian.com";
$subject = "New Agent Record";
$headers = "MIME-Version: 1.0" . "\r\n";
$headers .= "Content-type:text/html;charset=UTF-8" . "\r\n";
$headers .= "Reply-To: New Agent Record <email@domian.com>\r\n"; 
$headers .= "Return-Path:New Agent Record <email@domian.com>\r\n";
$headers .= "From: New Agent Record <email@domian.com>\r\n";
$headers .= "Organization: Your Email Subject\r\n";
$headers .= "X-Priority: 3\r\n";
$headers .= "X-Mailer: PHP". phpversion() ."\r\n"; 
```

# iphone - 当 allowEditing = NO 时，UIImagePickerController 返回图像 nil；并在 iPad 上以 2 倍的速度运行

> ID：10251896
> 
> 赞同：2
> 
> 时间：2012-04-20T18:51:53.710
> 
> 标签：iphone, objective-c, xcode

```
- (IBAction) buttonAction:(id) sender {
 if (self.picker == nil) {   
        self.picker = [[UIImagePickerController alloc] init];
        self.picker.delegate = self;
        self.picker.sourceType = UIImagePickerControllerSourceTypePhotoLibrary;
        self.picker.allowsEditing = NO;     }  [self.navigationController presentModalViewController:_picker
    animated:YES]; 
```

}

*   (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info {

    ```
    [self dismissModalViewControllerAnimated:YES];

    UIImage *myImage = (UIImage *) [info
    objectForKey:UIImagePickerControllerOriginalImage]; 

     if (myImage == nil) NSLog(@"Image nil");

    } 
    ```

它在 iPhone 设备上可以正常工作，但在 iPhone 2x 模式下的 iPad 上却不能工作 错误？还是我错了？

# c - 如何在 C/C++ 程序中包含 SQL 语句？

> ID：10251898
> 
> 赞同：0
> 
> 时间：2012-04-20T18:52:05.607
> 
> 标签：c

我想在我的 C 程序中包含 SQL 语句。我不知道如何做到这一点。谁能告诉我一步一步的程序。我不确定如何在数据库和我的程序之间建立连接。人们通常使用哪个数据库？

我尝试在网上搜索，但没有得到适当的解决方案。非常感谢用一个小例子进行解释。

谢谢，拉胡尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T18:54:48.317

C++ 在其标准库中不包含数据库功能。我以前使用过[SQLite](http://www.sqlite.org/)，我强烈推荐它作为一个简单的单文件数据库开始使用。您可以查看他们的[快速入门](http://www.sqlite.org/quickstart.html)，了解如何让事情顺利进行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T21:10:59.247

您可能还想查看[QtSQL](http://qt-project.org/doc/qt-4.8/QtSql.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T19:00:25.870

如果你看的话，所有主要的 SQL 实现都有一个 C API。例如：

[http://www.postgresql.org/docs/8.4/static/libpq.html](http://www.postgresql.org/docs/8.4/static/libpq.html)

[http://dev.mysql.com/doc/refman/5.0/en/c.html](http://dev.mysql.com/doc/refman/5.0/en/c.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-20T19:05:09.513

每个数据库系统都有自己的方式来连接 C 客户端程序。

如果您想使用 Oracle，请查看 Oracle Pro*C 或[http://orclib.sourceforge.net/](http://orclib.sourceforge.net/)

如果您想使用嵌入式数据库（无服务），请查看 Oracle Sleepcat 或 SQLite（非常好）

MySQL：[http ://dev.mysql.com/doc/refman/5.0/en/c.html](http://dev.mysql.com/doc/refman/5.0/en/c.html)

PostgreSQL：[http ://www.postgresql.org/docs/8.2/static/libpq.html](http://www.postgresql.org/docs/8.2/static/libpq.html)

首先，选择您的数据库。或者，如果您不想连接特定数据库，则需要在项目中添加 ODBC API。

# c++ - 为什么 SetScrollInfo() 函数会向 WndProc() 发送 WM_SIZE 消息？

> ID：10251901
> 
> 赞同：1
> 
> 时间：2012-04-20T18:52:15.230
> 
> 标签：c++, windows, winapi

为什么 SetScrollInfo() 函数会向 WndProc() 发送 WM_SIZE 消息？

**编辑**显然，这是 WinAPI 中的一个错误。正在发送 WM_SIZE 消息，因为我忘记`WS_HSCROLL | WS_VSCROLL`在窗口创建中包含样式。更正后，不再发送 WM_SIZE。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T20:07:44.253

由于这是一个记录在案的功能，因此它可能不是错误。

来自[http://msdn.microsoft.com/en-us/library/windows/desktop/ms632646.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms632646.aspx)：

> **评论**
> 
> 如果由于消息而为子窗口调用`SetScrollPos`or函数，则or参数应为非零以导致重新绘制窗口。`MoveWindow``WM_SIZE``bRedraw``bRepaint`

# r - 对于需要条件检查的东西，有没有比 while 循环更有效的方法？

> ID：10251910
> 
> 赞同：6
> 
> 时间：2012-04-20T18:53:21.570
> 
> 标签：r, loops

我有一个问题，涉及我围绕一些我认为可以有效矢量化的代码包装一个 while 循环。但是，在每一步，我的停止条件都依赖于该阶段的值。将此示例视为我的问题的表示模型：
生成 N(0,1) 个随机变量，`rnorm()`直到您对大于任意值的值进行采样，`k`.

编辑：在评论中讨论的我的问题的一个警告是，我无法先验地知道在我的停止条件之前要采集多少个样本的一个很好的近似值。

一种方法：

1.  使用 while 循环，对大小合适的法线随机向量进行采样（例如，`rnorm(50)`一次采样 50 个标准法线，或者`rnorm(1)`如果 k 接近于零）。检查此向量以查看是否有任何观察值大于 k。

2.  如果是，停止并返回所有前面的值。否则，将第 1 步中的向量与通过重复第 1 步创建的新向量组合。

另一种方法是为给定的 k 指定一个完全过大的随机抽取次数。这可能意味着如果 k=2，则使用 对 1,000 个正态随机变量进行抽样`rnorm(1000)`。

在第二种情况下，利用 R 提供的矢量化比循环版本提供更快的结果，在这种情况下，过度杀伤数字不会比必要的大太多，但在我的问题中，我对我需要多少次运行没有很好的直觉做，所以我需要保守。

问题如下：有没有办法像方法 2 那样进行高度矢量化的过程，但像方法 1 那样使用条件检查？`rnorm(50)`当考虑到高度向量化的方法是每个元素的元素更快但更浪费时，是否正在像“最快”的方式一样进行小型向量化操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T17:30:50.263

这是我之前建议的实现：使用您的第一种方法，但在每次迭代之间增加新样本的数量，例如，`50`在每次迭代之间将该数字乘以 2，而不是每次迭代的新样本：`50`，然后`100`，`200`，`400`等等。

随着您的样本量遵循不同的几何级数，您可以保证在“少数”迭代中退出。

```
sample.until.thresh <- function(FUN, exit.thresh,
                                sample.start = 50,
                                sample.growth = 2) {

   sample.size    <- sample.start
   all.values     <- list()
   num.iterations <- 0L

   repeat {
      num.iterations <- num.iterations + 1L
      sample.values  <- FUN(sample.size)
      all.values[[num.iterations]] <- sample.values

      above.thresh <- sample.values > exit.thresh
      if (any(above.thresh)) {
         first.above <- match(TRUE, above.thresh)
         all.values[[num.iterations]] <- sample.values[1:first.above]
         break
      }

      sample.size <- sample.size * sample.growth
   }

   all.values <- unlist(all.values)

   return(list(num.iterations = num.iterations,
               sample.size    = length(all.values),
               sample.values  = all.values))
}

set.seed(123456L)
res <- sample.until.thresh(rnorm, 5)
res$num.iterations
# [1] 16
res$sample.size
# [1] 2747703 
```

# android - 拔下 USB 电缆后重新连接应用程序以进行调试

> ID：10251912
> 
> 赞同：1
> 
> 时间：2012-04-20T18:53:34.987
> 
> 标签：android, debugging

断开 USB 电缆后，有没有办法继续使用 Eclipse 进行调试。

应用程序在调试模式下启动，USB 电缆断开，然后重新连接。现在我想继续调试。这可以在不重新启动应用程序的情况下实现吗？

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T19:06:55.450

您可以进入 DDMS 透视图并在设备视图中查看您的设备。滚动正在运行的应用程序列表并找到您的应用程序。选择它并单击工具栏中的第一个按钮 - 绿色错误。Eclipse 现在将附加到正在运行的进程，您将从当前状态继续。

# php - PDO 插入时使用值 null 而不是空

> ID：10251917
> 
> 赞同：3
> 
> 时间：2012-04-20T18:53:53.957
> 
> 标签：php, mysql, pdo

我如何告诉 PDO 插入 NULL 而不是空值？

例子 ：

```
 $SQL = 'INSERT INTO `Calendars_Events` (`CalendarID`, `AccID`, `DateFrom`, `DateTo`, `Location`, `Title`, `Description`)
                VALUES (:CalendarID, :AccID, :From, :To, :Location, :Title, :Description)';

        $Query = $this->DB->Link->prepare($SQL);
        $Query->bindParam(':CalendarID',        $CalendarID,        PDO::PARAM_INT);
        $Query->bindParam(':AccID',             $this->Account->ID, PDO::PARAM_INT);
        $Query->bindParam(':From',              $From,              PDO::PARAM_INT);
        $Query->bindParam(':To',                $To,                PDO::PARAM_INT);
        $Query->bindParam(':Location',          $Location,          PDO::PARAM_STR);
        $Query->bindParam(':Title',             $Title,             PDO::PARAM_STR);
        $Query->bindParam(':Description',       $Description,       PDO::PARAM_STR);
        $Query->execute(); 
```

如果`Location`为空，它将不插入任何内容（空，所以 ''）而不是 NULL。

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-20T18:55:44.833

传入`null`而不是空`$Location`字符串，以防字符串为空：

```
empty($Location) ? null : $Location; 
```

# javascript - 我将如何将拖放项目保存到表单变量并通过电子邮件发送？

> ID：10251923
> 
> 赞同：1
> 
> 时间：2012-04-20T18:54:25.117
> 
> 标签：javascript, drag-and-drop, forms

这是设置：[http ://sawhost.com/saw/demo.html](http://sawhost.com/saw/demo.html)

我希望访问者将 6 个杂志拖放到顶部的框中，当他们点击提交时，我希望至少将每个杂志图像的标题属性添加到表单元素或其他东西中......

我在准备接收的表单上有一个隐藏的文本区域，但我确信它的一小段代码忽略了它并不能使它工作。这是我目前拥有的 javascript 的副本。

```
function checkEmail(myForm) {

  var coices = new Array();
  var input = "";
  choice[0] = document.getElementById("box12").innerHTML + "<br />";
  choice[1] = document.getElementById("box102").innerHTML + "<br />";
  choice[2] = document.getElementById("box103").innerHTML + "<br />";
  choice[3] = document.getElementById("box104").innerHTML + "<br />";
  choice[4] = document.getElementById("box105").innerHTML + "<br />";
  choice[5] = document.getElementById("box106").innerHTML + "<br />";

  for (var i = 0; i < 6; i++) {
    input += choice[i];
  }
  myForm.list.value = input;

  return (true);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T19:19:43.123

试试这个：

```
function checkEmail(myForm) {
    var choice = [],
        input  = '', i;

    for (i = 0; i < 6; i++) {
        input += document.getElementById("box10" + (i+1)).getElementsByTagName('img')[0].title + '<br />';
    }

    myForm.list.value = input;
    return true;
} 
```

# php - 在 Codeigniter 中控制用户权限

> ID：10251931
> 
> 赞同：1
> 
> 时间：2012-04-20T18:54:47.800
> 
> 标签：php, codeigniter, codeigniter-2

假设我正在使用 Codeigniter 构建一个 Web 应用程序。我有两个级别的用户`1\. Admin`和`2\. Manager`。我希望我的管理员能够添加、编辑、删除，所以在我的视图文件中我有以下内容：

```
<a href="somelink">ADD</a>
<a href="somelink">EDIT</a>
<a href="somelink">DELETE</a> 
```

但是在某些特定页面中，我不希望我的经理能够删除或编辑任何记录，他将只被允许添加数据。现在我的问题是，由于我有多种类型的用户和用户权限，我是否必须为我的经理（以及每个其他用户级别）创建一个新控制器和一个视图文件，或者有一些更好的方法来处理这个问题我将用于管理员的控制器和视图文件？

目前我正在为我的 ADMIN 和 MANAGER 创建单独的控制器、模型和视图文件，这非常痛苦。所以我认为必须有更好的方法来做到这一点。

您能否就如何处理这个问题给我一些专家建议？

为了弄清楚登录的用户类型，我在控制器中使用了以下代码：

```
 parent::__construct();
    if ( !($this->session->userdata('user_type')== 'flex_admin'))
    { 
        redirect('login');
    } 
```

提前致谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T20:16:37.607

您绝对不需要创建单独的控制器和视图。

您可以将用户权限类型（1 或 2）存储在会话中，然后检查每个控制器或视图以检查用户的权限。

视图文件中的导航示例

```
<div id="nav">
  <ul>
    <li>Home</li>
    <li>Logout</li>
    <?php if($this->session->userdata('privilege') == 1) : ?>
      <li>Delete</li>
    <?php endif; ?>
  </ul>
</div> 
```

您可以在控制器中执行相同类型的检查，以确保用户访问权限适合执行某些功能。

# facebook - 重命名 Facebook 应用程序的托管 URL

> ID：10251940
> 
> 赞同：1
> 
> 时间：2012-04-20T18:55:22.447
> 
> 标签：facebook, heroku, facebook-apps

我刚开始开发 Facebook 应用程序。我无法理解使用 Heroku（应用程序的免费托管平台）的一些事情。

所以我在 Facebook 上创建了这个应用程序。我从 Heroku 重命名了应用程序。在 Facebook 上的 App 下，我相应地更改了**Canvas URL**和**Secure Canvas URL**。但是**托管 URL**仍然具有我创建应用程序时提供的旧 URL。给出的唯一选择是删除它。我该如何编辑它并提供新的 URL？

指导将不胜感激，因为我对此感到非常困惑。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T02:54:56.770

是的，我和你一样的问题。

删除托管 URL 的原因是我不希望自动生成的 url 像 'something-####.herokuapp.com'

但是，当我删除此 URL 时，Facebook 身份验证不再起作用。所以我的食谱是

*   随意更改应用名称。
*   只需删除它托管网址。
*   使用 CLI 重新配置 heroku 的配置变量。

    `$heroku config:add FACEBOOK_APP_ID=yours FACEBOOK_SECRET=yours`

您可以计算出`heroku config -s`当前变量。查看Facebook/Heroku 示例应用程序文件夹中的**Readme.md以了解更多详细信息。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T02:20:35.723

当我决定更改 heroku 上的应用程序名称时，我实际上遇到了类似的问题。经过一些研究，我意识到如果玩具只更改它允许您更改的项目，facebook 仍将指向您的 heroku 应用程序页面。

# java - Apache/Tomcat 上的 Log4j 不工作

> ID：10251941
> 
> 赞同：1
> 
> 时间：2012-04-20T18:55:22.923
> 
> 标签：java, apache, tomcat, log4j

我正在开发一个 Java Servlet 项目。我正在尝试使用 log4j 来记录异常、方法输入和输出等。

我已经添加了 Jars 文件和 log4j.properties 文件。

如果我使用 Main 从测试类测试 Log4j，它可以正常工作。但是当我使用 Servlet 项目时，并没有创建日志文件。

我正在使用 Apache 和 Tomcat 开发 Eclipse

首先，我认为问题出在 log4j.properties 文件上。我从 src 目录移动到 Webcontent 目录。然后我再次移动到 Webcontent 目录中的 classes 目录。但我不工作。

这是我的 log4j.properties 文件：

```
log4j.appender.stdout=org.apache.log4j.ConsoleAppender
log4j.appender.stdout.Target=System.out
log4j.appender.stdout.layout=org.apache.log4j.PatternLayout
log4j.appender.stdout.layout.ConversionPattern=%d{yyyy-MM-dd HH:mm:ss} %5p %c{1}:%L - %m%n
log4j.appender.stdout.Threshold=debug
log4j.appender.stdout.Append=true

log4j.appender.FILEHIBERNATE=org.apache.log4j.DailyRollingFileAppender
log4j.appender.FILEHIBERNATE.layout=org.apache.log4j.PatternLayout
log4j.appender.FILEHIBERNATE.datePattern='.'yyyy-MM-dd 
log4j.appender.FILEHIBERNATE.file =logs/Hibernate.log
log4j.appender.FILEHIBERNATE.layout.ConversionPattern=%d{yyyy-MM-dd HH:mm:ss} [Level: %p]%m%n
log4j.appender.FILEHIBERNATE.Threshold=debug
log4j.appender.FILEHIBERNATE.Append=true

log4j.appender.springframework=org.apache.log4j.DailyRollingFileAppender
log4j.appender.springframework.layout=org.apache.log4j.PatternLayout
log4j.appender.springframework.datePattern='.'yyyy-MM-dd 
log4j.appender.springframework.file =logs/springframework.log
log4j.appender.springframework.layout.ConversionPattern=%d{yyyy-MM-dd HH:mm:ss} [Level: %p]%m%n
log4j.appender.springframework.Threshold=debug
log4j.appender.springframework.Append=true

log4j.appender.fidely=org.apache.log4j.DailyRollingFileAppender
log4j.appender.fidely.layout=org.apache.log4j.PatternLayout
log4j.appender.fidely.datePattern='.'yyyy-MM-dd 
log4j.appender.fidely.file =logs/Fidely.log
log4j.appender.fidely.layout.ConversionPattern=%d{yyyy-MM-dd HH:mm:ss} [Level: %p]%m%n
log4j.appender.fidely.Threshold=info,debug
log4j.appender.fidely.Append=true

log4j.appender.fnet3CustomerAreaMobile=org.apache.log4j.DailyRollingFileAppender
log4j.appender.fnet3CustomerAreaMobile.layout=org.apache.log4j.PatternLayout
log4j.appender.fnet3CustomerAreaMobile.datePattern='.'yyyy-MM-dd 
log4j.appender.fnet3CustomerAreaMobile.file =logs/customer_area_interfaces/fidelynet3CustomerAreaMobile.log
log4j.appender.fnet3CustomerAreaMobile.layout.ConversionPattern=%d{yyyy-MM-dd HH:mm:ss} [Level: %p]%m%n
log4j.appender.fnet3CustomerAreaMobile.Threshold=debug,info,error
log4j.appender.fnet3CustomerAreaMobile.Append=true

log4j.appender.fnet3CustomerAreaMobileServlet=org.apache.log4j.DailyRollingFileAppender
log4j.appender.fnet3CustomerAreaMobileServlet.layout=org.apache.log4j.PatternLayout
log4j.appender.fnet3CustomerAreaMobileServlet.datePattern='.'yyyy-MM-dd 
log4j.appender.fnet3CustomerAreaMobileServlet.file =logs/customer_area_interfaces/mobile/fidelynet3CustomerAreaMobile.log
log4j.appender.fnet3CustomerAreaMobileServlet.layout.ConversionPattern=%d{yyyy-MM-dd HH:mm:ss} [Level: %p]%m%n
log4j.appender.fnet3CustomerAreaMobileServlet.Threshold=debug,info,error
log4j.appender.fnet3CustomerAreaMobileServlet.Append=true

log4j.logger.net.sf.hibernate = DEBUG, FILEHIBERNATE
log4j.logger.hibernate = DEBUG, FILEHIBERNATE
log4j.logger.org.hibernate = DEBUG, FILEHIBERNATE
log4j.logger.org.springframework = debug, springframework
log4j.logger.fidely = info, fidely
log4j.logger.fnet3CustomerAreaMobile = debug, info, error, fnet3CustomerAreaMobile
log4j.logger.fnet3CustomerAreaMobileServlet = debug, info, error, fnet3CustomerAreaMobileServlet

log4j.rootLogger = debug 
```

这是控制台：

```
log4j:ERROR Could not find value for key log4j.appender.info
log4j:ERROR Could not instantiate appender named "info".
log4j:ERROR Could not find value for key log4j.appender.error
log4j:ERROR Could not instantiate appender named "error".
log4j:ERROR Could not find value for key log4j.appender.info
log4j:ERROR Could not instantiate appender named "info".
log4j:ERROR Could not find value for key log4j.appender.error
log4j:ERROR Could not instantiate appender named "error".
log4j:ERROR Could not find value for key log4j.appender.info
log4j:ERROR Could not instantiate appender named "info".
log4j:ERROR Could not find value for key log4j.appender.error
log4j:ERROR Could not instantiate appender named "error".
log4j:ERROR Could not find value for key log4j.appender.info
log4j:ERROR Could not instantiate appender named "info".
log4j:ERROR Could not find value for key log4j.appender.error
log4j:ERROR Could not instantiate appender named "error".
log4j:WARN No appenders could be found for logger (org.apache.commons.digester.Digester.sax).
log4j:WARN Please initialize the log4j system properly.
log4j:WARN See http://logging.apache.org/log4j/1.2/faq.html#noconfig for more info.
SLF4J: Failed to load class "org.slf4j.impl.StaticLoggerBinder".
SLF4J: Defaulting to no-operation (NOP) logger implementation
SLF4J: See http://www.slf4j.org/codes.html#StaticLoggerBinder for further details. 
```

我不知道该怎么做。你能帮助我吗？

对不起我糟糕的英语

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T19:30:04.287

首先将 log4j.properties 放入您的**src**文件夹中。如果您使用**Maven**，请将其放在**src/main/resources**下。[如果 log4j.jar（使用版本1.2.16](http://mvnrepository.com/artifact/log4j/log4j)）在类路径中，将自动检测该文件。

然后将带有“debug, info, error, ...”的行编辑为“debug”或“info”，因为一次只能有一个日志级别：

```
log4j.logger.fnet3CustomerAreaMobile = debug, fnet3CustomerAreaMobile 
```

第二个值必须是附加程序的名称。

检查您的 lib 目录中是否存在以下 jar：**slf4j-api.jar**（添加 slf4j）、**slf4j-log4j12.jar**（从 slf4j 重定向到 log4j）和**jcl-over-slf4j.jar**（从 apache commons-logging 重定向到 slf4j）。SLF4J 版本也必须兼容，使用[1.6.4 (newest)](http://www.slf4j.org/download.html)。SLF4J 是通过添加和删除正确的 jar 来自动配置的（很遗憾）。只添加上面提到的罐子。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T19:01:54.503

请检查您的日志。尤其是最后两行：

```
...
SLF4J: Defaulting to no-operation (NOP) logger implementation
SLF4J: See http://www.slf4j.org/codes.html#StaticLoggerBinder for further details.
... 
```

我很确定您在类路径中缺少一些库。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T16:53:26.617

你有以下问题

```
log4j.logger.fnet3CustomerAreaMobile = debug, info, error, fnet3CustomerAreaMobile
log4j.logger.fnet3CustomerAreaMobileServlet = debug, info, error,fnet3CustomerAreaMobileServlet 
```

如果`log4j.logger`在 = 之后定义第一个参数是`LEVEL`，它可以是：`{FATAL,ERROR,WARN,INFO,DEBUG,TRACE}`

第二个参数必须是 an 的名称，仅此`APPENDER`而已！

但是你放在`"info"`那里`"error"`，这是错误的！

如果您没有定义 appender`fnet3CustomerAreaMobile`或 appender `fnet3CustomerAreaMobileServlet`，系统也会为此声明，但事实并非如此，因为您定义了这两个 appender。

正确的写法是：

```
log4j.logger.fnet3CustomerAreaMobile = debug, fnet3CustomerAreaMobile
log4j.logger.fnet3CustomerAreaMobileServlet = debug, fnet3CustomerAreaMobileServlet 
```

这意味着什么？这意味着两个定义的记录器将在自己定义的附加程序中分别报告 FATAL ERROR WARN INFO 和 DEBUG 日志事件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-20T19:18:46.963

看看这个，看看有没有帮助。

[http://www.slf4j.org/codes.html#StaticLoggerBinder](http://www.slf4j.org/codes.html#StaticLoggerBinder)

> 无法加载类 org.slf4j.impl.StaticLoggerBinder
> 
> org.slf4j.impl.StaticLoggerBinder 类无法加载到内存时会报此错误。当在类路径上找不到合适的 SLF4J 绑定时，就会发生这种情况。将 slf4j-nop.jar、slf4j-simple.jar、slf4j-log4j12.jar、slf4j-jdk14.jar 或 logback-classic.jar 中的一个（也是唯一一个）放在类路径上应该可以解决问题。
> 
> 从 1.6.0 到 SLF4J 版本 1.6，在没有绑定的情况下，SLF4J 将默认为无操作 (NOP) 记录器实现。
> 
> 您可以从项目下载页面下载 SLF4J 绑定。

# php - 谁能解释 ssh2_exec() 函数调用中的 $pty 参数

> ID：10251942
> 
> 赞同：1
> 
> 时间：2012-04-20T18:55:23.147
> 
> 标签：php, ssh

一段时间以来，我一直在使用 ssh2_exec 为我们的工作场所构建管理面板和部署系统，到目前为止，当我尝试在本地服务器之外的另一台服务器上使用它时，它非常成功。

我不断收到“stdin: is not a tty”，我一直在网上寻找这个消息。我知道问题在于 ssh2_exec 本身不是交互式终端，而我要连接的服务器上的某些东西可能正在尝试检查某种输入法……至少我似乎明白。

我已经在谷歌搜索了 1 小时 30 分钟，试图找到与 php 的 ssh2 实现相关的帖子，这对于我现在的使用来说效果很好，但我从来没有找到解决这个问题的方法，尽管我想我可能有一个想法。

ssh2_exec() 有一个 $pty 参数（3rd），但文档没有告诉我们它似乎在做什么。有没有人熟悉它并且知道如何使用这个参数以及它是否真的可以解决我可能遇到的问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T19:08:31.643

你已经找到了答案。将 $pty 参数设置为`true`应该与将“-t”选项传递给`ssh`命令相同：它告诉客户端打开一个伪终端（又名“pty”，它来自“pseudo-tty”；“tty” ”来自“电传打字机”）并假装是交互式的。

# android - Android onClick 不会改变按钮的文字颜色

> ID：10251950
> 
> 赞同：0
> 
> 时间：2012-04-20T18:55:50.767
> 
> 标签：android, xml, button, onclick, onclicklistener

我正在尝试更改按钮上文本的颜色。这是我的代码

```
import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.TextView;
import android.graphics.Color;

public class ColorPatternGameActivity extends Activity implements OnClickListener {
protected Button button1; 
protected Button button2;
protected Button button3;
protected Button button4;
protected TextView test;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    Button button1 = (Button)findViewById(R.id.b1);
    Button button2 = (Button)findViewById(R.id.b2);
    Button button3 = (Button)findViewById(R.id.b3);
    Button button4 = (Button)findViewById(R.id.b4);
    TextView test = (TextView)findViewById(R.id.test);

    button1.setOnClickListener(this);
    button2.setOnClickListener(this);
    button3.setOnClickListener(this);
    button4.setOnClickListener(this);

    test.setText("testing");

}

@Override
public void onClick(View v) {
    if (v == button1) {
        test.setText("Red");
        button1.setTextColor(Color.RED);
        }
    else if (v == button2) {
        button2.setTextColor(Color.GREEN);
        test.setText("Green");
    }
    else if (v == button3) {
        button3.setTextColor(Color.BLUE);
        test.setText("Blue");
    }
    else if (v == button4) {
        button4.setTextColor(Color.YELLOW);
        test.setText("Yellow");
    }
}   
} 
```

单击按钮不会更改文本或颜色。我之前已经实现了 onClick 并且它运行良好，这让我更加困惑为什么它不起作用。

如果它有助于我声明按钮的xml示例：

```
<Button
 android:id="@+id/b1"
 android:layout_width="fill_parent"
 android:layout_height="match_parent"
 android:layout_weight="1"
 android:text="1"/> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-20T18:58:57.717

您**正在**使用`findViewById`. 由于您正在`onClick`使用成员变量在方法中测试引用相等性，因此这始终是错误的。

更改（以及其他更改）：

```
Button button1 = (Button)findViewById(R.id.b1); 
```

到：

```
button1 = (Button)findViewById(R.id.b1); 
```

虽然，如果每个按钮都有不同的点击方法，它可能会更干净。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T09:00:31.863

无论您是否以编程方式创建按钮，此解决方案都可以使用。

只需使用铸造对象 ((Button) v).setTextColor(Color.GRAY); 如下：

```
@Override
public void onClick(View v) {
    // TODO Auto-generated method stub
    Toast toast;
    Log.w("ANDROID DYNAMIC VIEWS:", "View Id: " + v.getId());
    switch (v.getId()) {
    case MY_BUTTON:
        toast = Toast.makeText(this, "Clicked on " + v.getTag().toString(), Toast.LENGTH_LONG);
        toast.setGravity(Gravity.TOP, 25, 400);
        toast.show();

        ((Button) v).setTextColor(Color.GRAY);

        v.setBackgroundColor(Color.WHITE);

        break;
        // More buttons go here (if any) ...

    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T19:14:11.010

您初始化类变量，例如

```
protected Button button1; 
protected Button button2;
protected Button button3;
protected Button button4; 
```

然后在`onCreate`方法中你再次初始化你的按钮

```
Button button1 = (Button)findViewById(R.id.b1);
Button button2 = (Button)findViewById(R.id.b2);
Button button3 = (Button)findViewById(R.id.b3);
Button button4 = (Button)findViewById(R.id.b4); 
```

这使按钮成为 onCreate 方法的本地按钮，不应该这样做，在你的情况下，类变量没有被分配任何事情要做，所以你的代码不起作用......

我怀疑如果您在 onCreate 本身中设置了 onClickListener 就不会发生这种情况，因为它对于您的方法来说是本地的，文本颜色会被改变......

所以不要`Button button1 = (Button)findViewById(R.id.b1);`在 onCreate 中使用`button1 = (Button)findViewById(R.id.b1);`

如果您使用的是 Eclipse IDE，那么 button1 将是蓝色的，表示它是一个类变量...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-04T06:48:57.157

你可以看到这个例子

```
 <Button android:id="@+id/testing"
         android:text="Testing"
         android:layout_width="wrap_content" 
         android:layout_height="wrap_content"
         android:textColor="#000000"> 
```

* * *

这里按钮文本颜色可以是黑色现在我在按钮单击时将其更改为白色

```
 @Override
  public void onClick(View v) {
      if (v == testing) {
        testing.setTextColor(Color.WHITE);
         }
     } 
```

# ruby-on-rails - 在范围内设置虚拟属性

> ID：10251951
> 
> 赞同：0
> 
> 时间：2012-04-20T18:55:51.027
> 
> 标签：ruby-on-rails, scope, virtual-attribute

我试图找到一种在范围内设置虚拟属性的方法。背景是我有属于*帐户的**客户*。客户可以购买销售*商品*。我有一张表customers_salesitem，它显示了哪些客户过去购买了哪些商品。

 **我想生成一个带有附加字段“类别”的销售项目列表，该列表将销售项目分类为客户购买的销售项目、不同客户从同一帐户购买的销售项目以及尚未购买的销售项目。任何人在帐户上购买。最终，我想将范围用于自动完成字段，但目前有点偏离。

我尝试了一些类似的东西：

```
class Salesitem < ActiveRecord::Base
    has_many :customers_salesitems

    scope :previous_customer_purchase, lambda {
        |customer|
        select("*").
        select("'Previous Customer Purchase' as category").
        where ("salesitems.id IN (SELECT customers_salesitems.salesitem_id FROM customers_salesitems WHERE customer_id = ?)",
            customer.id)          
    }

    def category
        @category
    end

    def category=(value)
        @category = @attributes["category"] = value
    end
end 
```

尽管 SQL 已正确生成，但范围会返回没有类别的项目列表。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T15:32:01.243

尽管 where 方法和其他一些新的 Rails 3 查询方法可以用累积的影响链接起来，但有些不会合并。我不认为 select 方法合并。不幸的是，大部分新功能都没有很好的文档记录。选择的文档是

```
select(value = Proc.new) 
```

我认为你需要的是：

```
scope :previous_customer_purchase, lambda {
    |customer|
    select("*, 'Previous Customer Purchase' as category").
    where ("salesitems.id IN (SELECT customers_salesitems.salesitem_id FROM customers_salesitems WHERE customer_id = ?)",
        customer.id)          
} 
```**

# ruby-on-rails - 将一组对象从一个动作传递到另一个动作的最佳方式是什么？

> ID：10251955
> 
> 赞同：0
> 
> 时间：2012-04-20T18:56:17.767
> 
> 标签：ruby-on-rails

我有一个动作`index`。我有一个`print`动作。

我想把`@objects`它们全部传给`print`from `index`。

我正在考虑在链接中这样做：

```
= link_to 'Print', print_path(@objects) 
```

但正如你可能想象的那样，因为一个巨大的链接，加上一些愚蠢的行为，我得到了这个`ActiveRecord::Relation:0x007ffc3a5f8000`通过。

将我的`@objects`变量传递给此辅助操作的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T11:46:31.540

非常特别感谢jdoe，我能够通过对Rails是无状态的禅宗理解来解决这个问题。

因此，我在控制器中将我的变量实例化为

```
def index
  session[:objects] = @objects.map(&:id)
end 
```

而不是使其等于对象。我只是映射了ID。

这个会话变量现在可以在整个站点中无限地访问。

然后在我的另一个动作中，我这样称呼它们：

```
def print
    @objects = []
    session[:objects].each{|object|@objects << Object.find(object)}
end 
```

# java - java.lang.Exception：WEB0113

> ID：10251959
> 
> 赞同：1
> 
> 时间：2012-04-20T18:56:46.353
> 
> 标签：java, jakarta-ee, glassfish-3, netbeans-7

当我遇到此异常时，如何清除 glass fish server 3.1.1 的历史记录：

```
SEVERE: Exception while invoking class com.sun.enterprise.web.WebApplication start method
java.lang.Exception: java.lang.Exception: WEB0113: Virtual server [server] already has a web module [EnterpriseApplication2-war] loaded at [/EnterpriseApplication2-war]; therefore web module [EnterpriseApplication2#EnterpriseApplication2-war.war] cannot be loaded at this context path on this virtual server. 
    at com.sun.enterprise.web.WebApplication.start(WebApplication.java:138)
    at org.glassfish.internal.data.EngineRef.start(EngineRef.java:130)
    at org.glassfish.internal.data.ModuleInfo.start(ModuleInfo.java:269)
    at org.glassfish.internal.data.ApplicationInfo.start(ApplicationInfo.java:294)
    at com.sun.enterprise.v3.server.ApplicationLifecycle.deploy(ApplicationLifecycle.java:462)
    at com.sun.enterprise.v3.server.ApplicationLifecycle.deploy(ApplicationLifecycle.java:240)
    at org.glassfish.deployment.admin.DeployCommand.execute(DeployCommand.java:382)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl$1.execute(CommandRunnerImpl.java:355)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl.doCommand(CommandRunnerImpl.java:370)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl.doCommand(CommandRunnerImpl.java:1064)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl.access$1200(CommandRunnerImpl.java:96)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl$ExecutionContext.execute(CommandRunnerImpl.java:1244)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl$ExecutionContext.execute(CommandRunnerImpl.java:1232)
    at com.sun.enterprise.v3.admin.AdminAdapter.doCommand(AdminAdapter.java:459)
    at com.sun.enterprise.v3.admin.AdminAdapter.service(AdminAdapter.java:209)
    at com.sun.grizzly.tcp.http11.GrizzlyAdapter.service(GrizzlyAdapter.java:168)
    at com.sun.enterprise.v3.server.HK2Dispatcher.dispath(HK2Dispatcher.java:117)
    at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:238)
    at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:828)
    at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:725)
    at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1019)
    at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:225)
    at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
    at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
    at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
    at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
    at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
    at java.lang.Thread.run(Thread.java:722) 
```

我的项目是 Java EE 企业应用程序（4 层架构），包括 MY SQL、EJB、JAXWS 和 JSF。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T19:53:39.253

如果您的应用看起来不再部署（未在管理 gui 中列出），但您仍然收到此错误，您可以尝试查看 /domains/domain1/applications 并在此处删除您的应用的文件夹。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-14T13:13:12.363

此异常 java.lang.Exception: WEB0113 与 glassfish 服务器的缓存有关。要解决此问题，您必须：

1.  重新创建文件夹 pathToServer/domain/YourDomain/generated

    mv 生成生成旧

    mkdir 生成

2.  重新创建文件夹 pathToServer/domain/YourDomain/osgi-cache

    mv osgi-cache osgi-cache-old

    mkdir osgi-cache

    mkdir osgi-cache/felix

3.  重启服务器

    asadmin 重新启动域 YourDomain

# php - Roundcube 地址簿：它可以与另一个 Web 应用程序桥接吗？

> ID：10251960
> 
> 赞同：1
> 
> 时间：2012-04-20T18:56:48.983
> 
> 标签：php, synchronization, roundcube

我有一个联系人管理应用程序，允许用户添加/编辑/删除联系人及其信息。我希望将我的应用程序与 Roundcube 的地址簿联系起来，以便我可以在 Roundcube 的地址簿中从我的应用程序中添加/编辑/删除联系信息。并且还可以从邮件方面保留尽可能多的功能。例如，当从通讯录中单击联系人时，它仍然允许您向​​该人撰写消息。请注意，我使用的是 Roundcube 0.5.2，版本无法更改。

目前我的应用程序可以处理 HTTP 请求，允许用户通过 GET 请求检索联系人信息或通过 PUT/POST 请求添加/编辑联系人（请求具有 XML 正文）。所以这是一种可能的方法，但听起来它需要对 Roundcube 方面进行大量修改。

另一种可能的选择是“撕掉”Roundcube 地址簿并嵌入我自己的应用程序。虽然，我还是 Roundcube 的新手，所以这可能是不可能的。

我的应用程序有很多依赖于联系人数据库的功能，所以我不想将我的应用程序连接到 Roundcube 的联系人数据库（尽管相反的情况是可以接受的）。

我想知道这里是否有人可以帮助指导我如何处理这种情况。

# php - 如何显示 sql 表中的所有值，但在其他列中添加重复条目的值

> ID：10251965
> 
> 赞同：0
> 
> 时间：2012-04-20T18:57:23.990
> 
> 标签：php, mysql

我有一个名为**bids的sql表**

我有以下列，**B_id, Uid, Fid, Amount**。

B_id默认会自动递增，Uid=用户id，Fid=字段id，amount是提交到字段中的int。

所以我可能有一张像下面这样的桌子

1 1 1 1（第一个 1 = **B_id**，第二个 1 =**用户**。第三个 =**字段**，第四个 =**金额**）
2 1 2 1（与上述相同，但在不同的字段中
3 2 1 1（与第一个相同，但与不同的用户）
4 2 2 2（与上述相同的用户，但在不同的领域和不同的金额）
5 1 1 1（与第一行相同）

好的，所以我想要做的是用户声明来选择给定用户的所有提交。所以像“select * From (bids) where Uid='1'”

这将返回
1 1 1 1
2 1 2 1
5 1 1 1
（uid 1 已在任何字段中输入金额的所有行）

但我希望将在相同字段中提交的金额加在一起，（我不需要 B_id 也不需要 uid）

所以我需要上表看起来像

1 2 （用户总共提交 3 个金额**2 个金额**到**字段 1**）
2 1 （和**1 个金额**在**字段 2**中）

那么我可以使用什么 php 来获取表格，从我拥有它的方式到我想要的方式？

谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T19:05:57.683

如果您可以仅使用查询（在我看来而不是 PHP 属于它的位置）来执行此操作，它可能看起来像这样；

```
SELECT 
    Bids.[FID]
    ,SUM(Bids.[Amount]) AS AmountSum
FROM
    Bids
WHERE
    Bids.[UID] = 1
GROUP BY
    Bids.[FID] 
```

# ruby-on-rails-3 - 如何在 Rails 中设置静态 html 页面而无需配置路由、控制器等

> ID：10251967
> 
> 赞同：0
> 
> 时间：2012-04-20T18:57:28.730
> 
> 标签：ruby-on-rails-3

我正在研究单个 .html 页面的布局和 html 结构，并且只想通过[http://localhost/page.html](http://localhost/page.html)访问它，它仍然可以访问我的资源等。我尝试将它放在 public/文件夹，但似乎无法提供它，除非我配置路由等。有没有办法在不配置所有路由等的情况下做到这一点？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T19:55:57.780

它应该工作。你确定你正在调用正确的路径（即[http://localhost/page.html](http://localhost/page.html)而不是[http://localhost/public/page.html](http://localhost/public/page.html)）？如果它在您的应用程序中不起作用，请尝试创建一个新的 - 如果它在那里起作用，则意味着某些东西（也许是宝石？）搞砸了 Rails 的本地路由。如果不是，那么您的 Rails 安装本身就搞砸了。

# list - 如何编写一个检查项目是否在树中的函数？

> ID：10251970
> 
> 赞同：-4
> 
> 时间：2012-04-20T18:57:35.743
> 
> 标签：list, lisp

我必须编写一个函数来检查一个项目是否在树中。

例如：

```
(defun find-in-tree (item tree)
  ...)

(find-in-tree 2 '(1 (3 4 (2))) 2) ;; should give T
(find-in-tree 2 '(1 (3 4))) ;; should give NIL 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T17:55:46.617

引用[Lisp](http://www.paulgraham.com/onlisp.html)：

> 最后，考虑`rfind-if`一个递归版本，`find-if`它适用于树以及平面列表：
> 
> ```
> (defun rfind-if (fn tree)
>   (if (atom tree)
>       (and (funcall fn tree) tree)
>       (or (rfind-if fn (car tree))
>           (if (cdr tree) (rfind-if fn (cdr tree)))))) 
> ```

几个例子：

```
CL-USER> (find-if #'(lambda (x) (eq x 2)) '(1 (3 4 (2)))) ;; FIND-IF is the standard function
NIL
CL-USER> (rfind-if #'(lambda (x) (eq x 2)) '(1 (3 4 (2))))
2
CL-USER> (rfind-if #'(lambda (x) (eq x 2)) '((1 (2) 3) (3 4)))
2
CL-USER> (rfind-if #'(lambda (x) (eq x 2)) '((1 3) (3 4)))
NIL
CL-USER> (rfind-if (fint #'numberp #'oddp) '(2 (3 4) 5))
3 
```

现在，递归版本`find`：

```
(defun find/tree (item tree &optional (test #'eq))
  (rfind-if #'(lambda (el) (funcall test el item)) tree)) 
```

用法：

```
CL-USER> (find 2 '((1 (2) 3) (3 4))) ;; FIND is the standard function, again
NIL
CL-USER> (find/tree 2 '((1 (2) 3) (3 4)))
2
CL-USER> (find/tree "2" '((1 ("2") 3) (3 4)))
NIL
CL-USER> (find/tree "2" '((1 ("2") 3) (3 4)) #'equal)
"2" 
```

[您可以在SICP](http://mitpress.mit.edu/sicp/)、[On Lisp](http://www.paulgraham.com/onlisp.html)和[PAIP](http://norvig.com/paip.html)中找到有关列表、树、递归函数和递归搜索的更多信息。

* * *

还有一个问题是这些函数是否是尾递归的。这些问题也在列出的书籍中进行了讨论。

# asp.net-mvc - 如何在 ASP.NET 网站项目中使用 ASP.NET MVC 3？

> ID：10251971
> 
> 赞同：0
> 
> 时间：2012-04-20T18:57:37.660
> 
> 标签：asp.net-mvc

我正在尝试让 ASP.NET MVC 3 在使用 WebForms 的 ASP.NET 网站项目（不是 Web 应用程序）项目上工作。我有一个“工作”的测试页面。唯一的问题是当我在视觉工作室时，我没有智能感知和以下问题：

`MVC 3 'ViewData' is not declared. It may be inaccessible due to its protection level.`

我创建了一个 ASP.NET MVC 3 项目和一个网站项目并进行了比较，`web.config`并确保添加了所有正确的引用。System.Web.Mvc 在我的根 web.config 中被引用。我可能做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T19:03:41.297

MVC 视图属于`ViewPage`. [http://msdn.microsoft.com/en-us/library/system.web.mvc.viewpage.aspx](http://msdn.microsoft.com/en-us/library/system.web.mvc.viewpage.aspx)

Webform 页面属于`Page`. [http://msdn.microsoft.com/en-us/library/system.web.ui.page.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.page.aspx)

他们没有关系。你不能互换使用它们。你想达到什么目的？MVC 和 Webforms 可以在同一个站点中共存，但它们不能像您尝试的那样一起工作。MVC 需要已编译的控制器，您不能在运行时编译的“网站”中使用 MVC。

他们以完全不同的方式处理请求。

# jquery - 使用 HTML 和 CSS 的半砖图像布局

> ID：10251974
> 
> 赞同：0
> 
> 时间：2012-04-20T18:58:07.483
> 
> 标签：jquery, html, css, image, layout

对 HTML/CSS/jQuery 中的半砖模式等高级图像布局有何建议？我也希望能够旋转或缩放图像。background-image CSS 属性似乎不支持缩放。也许[CSS3](http://www.quirksmode.org/css/background.html)是必需的，但我试图以 IE8+ 为目标。

谢谢格雷格

[半砖图案](http://cl.ly/G0gL)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T19:02:33.627

正如您所说，您使用 CSS3，但是针对 IE（6-8），您可以使用 pie 在任何地方实现所需的结果！

[http://css3pie.com/](http://css3pie.com/)

# c# - 可选依赖项的 Munq 属性注入

> ID：10251977
> 
> 赞同：1
> 
> 时间：2012-04-20T18:58:23.730
> 
> 标签：c#, .net, dependency-injection, inversion-of-control

我正在考虑尝试使用 Munq 来进行可选依赖项的属性注入。

如果在注入的类中不做这样的事情，这可能吗？：

```
MunqDependencyResolver.Container.Resolve<TTpe>(); 
```

此外，在这种情况下推荐使用属性注入（可选依赖项）还是有更好的选择？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T11:10:48.523

从代码中调用容器通常是个坏主意。Mark Seemann有一篇[很好的文章](http://blog.ploeh.dk/2010/02/03/ServiceLocatorIsAnAntiPattern.aspx)。

属性注入本身很好，但通常只应在两种情况下使用：

1.  依赖项确实是可选的，缺少它时应用程序可以正常工作。或者，
2.  构造函数注入是不可能的，例如由于循环依赖。

在所有其他情况下，请进行构造函数注入。

使用 Munq 进行属性注入的方法如下：

```
container.Register<IDatabase>(c =>
    new Database(c.Resolve<ILogger>())
    {
        // Property injection.
        ErrorHandler = c.Resolve<IErorhandler>()
    }); 
```

请注意，依赖项几乎不应该是可选的。可选依赖项使应用程序代码更加复杂，因为这会强制代码区分两种类型的依赖项（实现和空值），并会导致代码中额外的 if-null 检查。大多数情况下，您可以简单地使依赖项成为必需并添加注入/注册一个空实现（[Null Object Pattern](http://en.wikipedia.org/wiki/Null_Object_pattern)）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-17T11:59:00.403

我想提高遗留应用程序的性能，所以我想出了这个，让 Munq 使用以下 DepencyAttribute

```
[AttributeUsage(AttributeTargets.Parameter | AttributeTargets.Property, AllowMultiple = false, Inherited = true)]
public sealed class DependencyAttribute : Attribute
{
    // Fields
    private readonly string name;

    /// <summary>
    /// Create an instance of DependencyAttribute with no name
    /// </summary>
    public DependencyAttribute()
        : this(null)
    {
    }

    /// <summary>
    /// Create an instance of DependencyAttribute with name
    /// </summary>
    /// <param name="name"></param>
    public DependencyAttribute(string name)
    {
        this.name = name;
    }

    /// <summary>
    /// The name specified in the constructor
    /// </summary>
    public string Name
    {
        get
        {
            return name;
        }
    }
}

    public static IRegistration LegacyRegister(this IocContainer container, Type from, Type to, string name = null)
    {
        if (from.ContainsGenericParameters)
            container.Register(name, from, to);

        var reg = container.Register(name, from, Create(to));
        return reg;
    }

    public static IRegistration LegacyRegister<TFrom,TTo>(this IocContainer container, string name = null)
    {
        return container.LegacyRegister(typeof (TFrom), typeof (TTo), name);
    }

    public static System.Func<IDependencyResolver, object> Create(Type from)
    {
        var container = Expression.Parameter(typeof(IDependencyResolver), "container");
        var ctor = BuildExpression(from, container);
        var block = InitializeProperties(ctor, container);
        var func = Expression.Lambda<System.Func<IDependencyResolver, object>>(block, new[] { container});

        return func.Compile();
    }

    private static Expression InitializeProperties(NewExpression ctor, ParameterExpression container)
    {
        var expressionList = new List<Expression>();
        var instance = Expression.Variable(ctor.Type, "ret");
        var affect = Expression.Assign(instance, ctor);
        //expressionList.Add(instance);

        expressionList.Add(affect);

        var props = from p in instance.Type.GetProperties(BindingFlags.Instance|BindingFlags.NonPublic|BindingFlags.Public)
            let da = p.GetCustomAttributes(typeof (DependencyAttribute), true).Cast<DependencyAttribute>().FirstOrDefault()
            where da != null
            select new {Property = p, da.Name};

        var propsSetters = from p in props
            let resolve = p.Name == null ?
                Expression.Call(container, "Resolve", new[] {p.Property.PropertyType})
                : Expression.Call(container, "Resolve", new[] {p.Property.PropertyType}, Expression.Constant(p.Name, typeof (string)))
            select Expression.Call(instance, p.Property.GetSetMethod(true), resolve);

        expressionList.AddRange(propsSetters.ToList());
        expressionList.Add(instance);

        var block = Expression.Block(ctor.Type, new[] { instance }, expressionList);
        return block;
    }

    private static NewExpression BuildExpression(Type type, ParameterExpression container)
    {
        ConstructorInfo constructorInfo = GetConstructorInfo(type);

        var parameters = from p in constructorInfo.GetParameters()
                    let da = p.GetCustomAttributes(typeof(DependencyAttribute), true).Cast<DependencyAttribute>().FirstOrDefault()
                        ?? new DependencyAttribute()
                    select new { Param = p, da.Name };

        var list = parameters.Select(p => 
            Expression.Call(container, "Resolve", new [] { p.Param.ParameterType },
                p.Name == null ? new Expression[0] : new Expression[] { Expression.Constant(p.Name, typeof(string)) }));

        return Expression.New(constructorInfo, list);
    }

    private static ConstructorInfo GetConstructorInfo(Type implType)
    {
        ConstructorInfo constructorInfo = implType.GetConstructors().OrderByDescending(c => c.GetParameters().Length).FirstOrDefault();
        if (constructorInfo == null)
            throw new ArgumentException(string.Format("The requested class {0} does not have a public constructor.", (object)implType));
        return constructorInfo;
    } 
```

# c# - ASP.NET 成员资格和角色提供程序配置问题

> ID：10251979
> 
> 赞同：2
> 
> 时间：2012-04-20T18:58:41.187
> 
> 标签：c#, asp.net, web-config, membership-provider, roleprovider

我在尝试启动我的应用程序时收到错误消息，并且我认为我的`web.config`文件中存在错误（见下文）。我已将 MembershipProvider 架构与现有的 RESTAURANT 数据库相结合。

我有 2 个连接字符串，一个是 LINQ to Entities，用于为我的应用程序填充餐厅数据，另一个是 SQL Server 2008 R2 连接，用于成员资格和角色提供程序。

我收到的错误在开头的那一行：role manager="true"

这是我的 Web.Config

```
<configuration>
    <system.web>
        <compilation debug="true" targetFramework="4.0" />
    </system.web>
    <appSettings></appSettings>
    <connectionStrings>
        <add name="RestaurantDB" 
             connectionString="data source=SFP\SFP_SQL_SVR;attachdbfilename=C:\Users\Susan\Documents\Databases\Restaurants.mdf;Initial Catalog=Restaurants.mdf;Integrated Security=SSPI;"/>
        <add name="RestaurantsEntities" 
             connectionString="metadata=res://*/Restaurant.csdl|res://*/Restaurant.ssdl|res://*/Restaurant.msl;provider=System.Data.SqlClient;provider connection string=&quot;data source=SFP\SFP_SQL_SVR;attachdbfilename=C:\Users\Susan\Documents\Databases\Restaurants.mdf;integrated security=True;multipleactiveresultsets=True;App=EntityFramework&quot;" 
             providerName="System.Data.EntityClient" />
    </connectionStrings>
    <roleManager enabled="true"
                 defaultProvider="CustomizedRoleProvider">
       <providers>
          <add name="CustomizedRoleProvider"
               type="System.Web.Security.SqlRoleProvider"
               connectionStringName="RestaurantsDB" />
       </providers>
    </roleManager>
    <membership defaultProvider="CustomizedMembershipProvider">
       <providers>
          <add name="CustomizedMembershipProvider"
               type="System.Web.Security.SqlMembershipProvider"
               connectionStringName="RestaurantsDB" />
       </providers>
    </membership>
</configuration> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T19:05:39.343

您正在指定

```
<add name="RestaurantDB" 
```

错误的

```
 connectionStringName="RestaurantsDB" /> 
```

正确的

```
 connectionStringName="RestaurantDB" /> 
```

如果这解决了，请为我祈祷

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-20T19:24:36.803

`<roleManager>`并且`<membership>`是`<system.web>`

试试这个：

```
<?xml version="1.0"?>

<!--
  For more information on how to configure your ASP.NET application, please visit
  http://go.microsoft.com/fwlink/?LinkId=169433
  -->

<configuration>
  <appSettings>

  </appSettings>

  <connectionStrings>
    <add name="RestaurantDB" connectionString="data source=SFP\SFP_SQL_SVR;attachdbfilename=C:\Users\Susan\Documents\Databases\Restaurants.mdf;Initial Catalog=Restaurants.mdf;Integrated Security=SSPI;"/>
    <add name="RestaurantsEntities" connectionString="metadata=res://*/Restaurant.csdl|res://*/Restaurant.ssdl|res://*/Restaurant.msl;provider=System.Data.SqlClient;provider connection string=&quot;data source=SFP\SFP_SQL_SVR;attachdbfilename=C:\Users\Susan\Documents\Databases\Restaurants.mdf;integrated security=True;multipleactiveresultsets=True;App=EntityFramework&quot;" providerName="System.Data.EntityClient" />
  </connectionStrings>

  <system.web>
      <compilation debug="true" targetFramework="4.0" />

      <roleManager enabled="true"
           defaultProvider="CustomizedRoleProvider">
          <providers>
              <add name="CustomizedRoleProvider"
                  type="System.Web.Security.SqlRoleProvider"
                  connectionStringName="RestaurantsDB" />
          </providers>
      </roleManager>

      <membership defaultProvider="CustomizedMembershipProvider">
           <providers>
               <add name="CustomizedMembershipProvider"
                   type="System.Web.Security.SqlMembershipProvider"
                   connectionStringName="RestaurantsDB" />
           </providers>
      </membership>
  </system.web>
</configuration> 
```

请参阅：http: [//msdn.microsoft.com/en-us/library/ms228147.aspx](http://msdn.microsoft.com/en-us/library/ms228147.aspx)

请参阅：http: [//msdn.microsoft.com/en-us/library/dayb112d.aspx](http://msdn.microsoft.com/en-us/library/dayb112d.aspx)

# c++ - C++ typedef 和返回类型：如何让编译器识别使用 typedef 创建的返回类型？

> ID：10251980
> 
> 赞同：9
> 
> 时间：2012-04-20T18:58:46.860
> 
> 标签：c++, typedef

```
#include <iostream>
using namespace std;

class A {
    typedef int myInt;
    int k;
public:
    A(int i) : k(i) {}
    myInt getK();
};

myInt A::getK() { return k; }

int main (int argc, char * const argv[]) {
    A a(5);
    cout << a.getK() << endl;
    return 0;
} 
```

myInt 在此行中未被编译器识别为“int”：

```
myInt A::getK() { return k; } 
```

如何让编译器将 myInt 识别为 int？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-04-20T19:00:21.237

`typedef`创建同义词，而不是新类型，因此`myInt`和`int`已经相同。问题是范围——`myInt`在全局范围内没有，你必须`A::myInt`在类之外使用。

```
A::myInt A::getK() { return k; } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-20T19:00:22.197

`A::myInt A::getK() { return k; }`

您必须限定`typedef`类型，因为您在类`A`范围内创建了它。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-04-20T19:03:00.627

将定义放在类之外。

# android - Google place api 不支持多种类型

> ID：10251981
> 
> 赞同：0
> 
> 时间：2012-04-20T18:58:46.990
> 
> 标签：android, google-places-api, google-places

当我提供下面给出的 url 时，我得到了正确的结果，但是

```
 String baseUrl = "https://maps.googleapis.com/maps/api/place/search/xml?location=";
    String last="&radius=20000&types=school&sensor=false&key=";

    URL = baseUrl + latitude + "," + longitude + last + API_KEY ; 
```

当我尝试使用多种类型时：

> 学校| 大学

它显示强制关闭....EX

```
 String baseUrl = "https://maps.googleapis.com/maps/api/place/search/xml?location=";
    String last="&radius=20000&types=school|university&sensor=false&key=";

    URL = baseUrl + latitude + "," + longitude + last + API_KEY ; 
```

我在做什么错...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-10-28T22:06:34.617

当使用多种类型时，这对我有用：

```
String keyString = "your_key";

String JSON_BASE = "https://maps.googleapis.com/maps/api/place/nearbysearch/json?location=";
String types = "airport|hospital";
try {
        placesSearchStr=JSON_BASE+getLat()+","+getLng()+
                        "&radius=1000&sensor=false&types="+URLEncoder.encode(types,"UTF-8")+
                        "&key="+keyString;
    } catch (UnsupportedEncodingException e) {

        e.printStackTrace();
    } 
```

这里的重点是`types="+URLEncoder.encode(types,"UTF-8")`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-15T18:44:30.543

我的朋友现在我得到了多种类型的支持。使用 uri builder 类请求 url

```
public String getURL(double lat, double lng){
    Uri uri = new Uri.Builder()
    .scheme("https")
    .authority("maps.googleapis.com")
    .path("maps/api/place/search/xml")
    .appendQueryParameter("location", lat+",",lng)
    .appendQueryParameter("radius", "5000")
    .appendQueryParameter("types",   "zoo|travel_agency|taxi_stand|pet_store|museum|movie_theater|library|jewelry_store|hospital|clothing_store|atm|church|bus_station|art_gallery|bank|beauty_salon|city_hall|book_store|park|shopping_mall|train_station|airport")
    .appendQueryParameter("sensor", "true")
    .appendQueryParameter("key", "your key")
    .build();
    return uri.toString();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-29T12:31:09.653

尝试将参数放在 where 类型中，例如`String types = "cafe|restaurant";`：

```
try {
    HttpRequestFactory httpRequestFactory = createRequestFactory(HTTP_TRANSPORT);
    HttpRequest request = httpRequestFactory
            .buildGetRequest(new GenericUrl(PLACES_SEARCH_URL));
    request.getUrl().put("key", API_KEY);
    request.getUrl().put("location", _latitude + "," + _longitude);
    request.getUrl().put("radius", _radius); // in meters
    request.getUrl().put("sensor", "false");

    if(types != null)
        request.getUrl().put("types", types);

    PlacesList list = request.execute().parseAs(PlacesList.class);
    // Check log cat for places response status
    Log.d("Places Status", "" + list.status);
    return list;

} catch (HttpResponseException e) {
    Log.e("Error:", e.getMessage());
    return null;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-08T06:34:10.650

嗨朋友我和你有同样的问题，经过长时间的搜索，我找到了另一个使用 Volley api [http://java.dzone.com/articles/android-%E2%80%93-volley-library解析谷歌响应的解决方案](http://java.dzone.com/articles/android-%E2%80%93-volley-library) [Volley 库Android 解析 xml 响应？](https://stackoverflow.com/questions/17962904/volley-library-for-android-parse-xml-response)

volley liabrery 没有对 xml 的请求，但有字符串请求和响应，您可以将字符串转换为 xml 格式而不是将数据解析为 xml

# python - 使用python在文件中写入b-tree

> ID：10251991
> 
> 赞同：0
> 
> 时间：2012-04-20T18:59:16.447
> 
> 标签：python, algorithm, binary-tree

有一些文档需要索引，这意味着我需要阅读文档并提取单词并通过存储它们出现在哪个文档和哪个位置来索引它们。

对于每个单词，我最初创建一个单独的文件。考虑 2 个文件：

文件 1

```
The Problem of Programming Communication with 
```

文件 2

```
Programming of Arithmetic Operations 
```

所以会有10个词，8个独特的。所以我创建了 8 个文件。

用算术运算编程通信的问题

在每个文件中，我将存储它们出现在哪个文档以及在哪个位置。我正在实施的实际结构有更多信息，但这个基本结构将达到目的。

文件名 文件内容

1 1

问题 1 2

1 3 2 2

编程 1 4 2 1

通讯 1 5

1 6

算术 2 3

操作 2 4

意义。该词位于第 1 个文档-第 3 个位置和第 2 个文档-第 2 个位置。

完成初始索引后，我会将所有文件连接到一个索引文件中，并在另一个文件中存储将找到特定单词的偏移量。

索引文件：

```
1 1 1 2 1 3 2 2 1 4 2 1 1 5 1 6 2 3 2 4 
```

偏移文件：

```
the 1 problem 3 of 5 programming 9 communications 13  with 15 arithmetic 17 operations 19 
```

因此，如果我需要通信的索引信息，我将转到文件的第 13 位并读取（不包括）第 15 位，即下一个单词的偏移量。

这对于静态索引来说都很好。但是，如果我更改单个索引，则需要重写整个文件。我可以使用 b-tree 作为索引文件的结构，以便我可以动态更改文件内容并以某种方式更新偏移量吗？如果是这样，有人可以指导我一些教程或库这是如何工作的，或者解释一下我如何实现这个？

非常感谢您花时间阅读这么长的帖子。

编辑：我不知道 B-tree 和二叉树之间的区别。所以我最初使用二叉树问了这个问题。现在已修复。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T16:23:10.837

基本上你正在尝试建立一个倒排索引。为什么需要使用这么多文件？您可以使用持久对象和字典来为您完成这项工作。稍后，当索引更改时，您只需重新加载持久对象并更改给定条目并重新保存对象。

这是执行此操作的示例代码：

```
import shelve

DOC1 = "The problem of Programming Communication with"
DOC2 = "Programming of Arithmetic Operations"

DOC1 = DOC1.lower()
DOC2 = DOC2.lower()

all_words = DOC1.split()
all_words.extend(DOC2.split())
all_words = set(all_words)

inverted_index = {}

def location(doc, word):
    return doc[:doc.find(word)].count(' ') + 1

for word in all_words:
    if word in DOC1:
        if word in inverted_index:
            inverted_index[word].append(('DOC1', location(DOC1, word)))
        else:
            inverted_index[word] = [('DOC1', location(DOC1, word))]
    if word in DOC2:
        if word in inverted_index:
            inverted_index[word].append(('DOC2', location(DOC2, word)))
        else:
            inverted_index[word] = [('DOC2', location(DOC2, word))]

# Saving to persistent object
inverted_index_file = shelve.open('temp.db')
inverted_index_file['1'] = inverted_index
inverted_index_file.close() 
```

然后你可以像这样看到保存的对象（你可以使用相同的策略对其进行修改）：

```
>>> import shelve
>>> t = shelve.open('temp.db')['1']
>>> print t
{'operations': [('DOC2', 4)], 'of': [('DOC1', 3), ('DOC2', 2)], 'programming': [('DOC1',   4), ('DOC2', 1)], 'communication': [('DOC1', 5)], 'the': [('DOC1', 1)], 'with': [('DOC1', 6)], 'problem': [('DOC1', 2)], 'arithmetic': [('DOC2', 3)]} 
```

我的观点是，一旦您构建了一次，而您的其他代码正在运行，您可以将`shelve`内存中的对象作为字典并动态更改它。

如果它不适合你，那么我会支持使用数据库，特别是`sqlite3`因为它是轻量级的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T20:33:07.737

一种选择是使用 dicts 来构造数据并使用 cPickle 将其转储到文件中。

# android - onPause、onResume、onStop、onStart 等，不触发 - 生命周期？

> ID：10251992
> 
> 赞同：1
> 
> 时间：2012-04-20T18:59:24.227
> 
> 标签：android, android-lifecycle

我有两个在平板电脑上协同工作的应用程序。我注意到如果用户退出一个应用程序并且下次打开应用程序时调用 oncreate，但是如果他们回到家然后返回 oncreate 不会被调用。我还注意到 onPause、onStop、onResume 永远不会被调用..如果用户回家，我需要一些方法来确保应用程序完成..

```
@Override
    protected void onPause () {
        super.onPause();
        Toast.makeText(this, "Pause MED", Toast.LENGTH_SHORT).show();
        finish();
    }

    @Override
    protected void onStop () {
        super.onStop();
        Toast.makeText(this, "stopped MED", Toast.LENGTH_SHORT).show();
    }

    @Override
    protected void onRestart () {
        Toast.makeText(this, "Restart MED", Toast.LENGTH_SHORT).show();
    }
    @Override
    protected void onStart () {
        Toast.makeText(this, "Start MED", Toast.LENGTH_SHORT).show();
    }
    @Override
    protected void onResume () {

        super.onResume();
        Toast.makeText(this, "RESUME MED", Toast.LENGTH_SHORT).show();
        Intent currentIntent = this.getIntent();
        Bundle extras = currentIntent.getExtras(); 
```

或者另一种选择是我的其他应用程序是否可以检查该应用程序是否打开并关闭它..

请帮忙

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-20T19:02:00.680

主页按钮不会杀死应用程序，它应该在点击时调用 onPause() 并在之后返回应用程序时调用 onResume()。不使用 toast，为什么不打印到日志？我确信这些方法正在被解雇。可能只是 Toast 没有显示，因为在修改 UI 之前或之后调用了这些方法。

另外，我从经验中注意到的一些似乎有点奇怪的事情：即使您启动应用程序的新实例（按主页按钮后不回来），onResume() 也会被触发......我很确定 onResume () 每当您的活动进入前台时都会触发，无论它是否已经在后台运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T19:12:22.993

您的应用程序在按下主页按钮后触发 onCreate()，因为您在调用`finish()`onPause() 时正在销毁您的应用程序。它必须在被销毁后重新创建。我也相信这会导致你的 Toast 出现意外行为，因为你已经破坏了它的上下文。

# java - 检查连续元素是否不同（小于）

> ID：10251994
> 
> 赞同：0
> 
> 时间：2012-04-20T18:59:27.553
> 
> 标签：java, arraylist, elements

我想知道是否有一种方法可以比较 arrayList 中的连续元素。我有这个

```
for (int j=0; j< Index.size(); j++) {
   if(Index.get(j) < Index.get(j -1) {  
       System.out.println("Total number of shapes is " + sizer);
   } 
} 
```

问题是我的代码在达到这一点时崩溃了，我不知道如何修复它。

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-20T19:03:29.853

您的索引从 0 开始，您试图获取第 -1 个元素，而不是尝试初始化`j`为 1

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T19:05:30.200

更改 for 循环的开始：

```
for (int j=1; j< Index.size(); j++) {
   if(Index.get(j) < Index.get(j -1) {  
       System.out.println("Total number of shapes is " + sizer);
   } 
} 
```

# php - 出现 PHP 错误但代码仍然正确执行

> ID：10251997
> 
> 赞同：0
> 
> 时间：2012-04-20T18:59:53.977
> 
> 标签：php, mysql

> **可能重复：**
> [mysql_fetch_array() 期望参数 1 是资源，选择中给出的布尔值](https://stackoverflow.com/questions/2973202/mysql-fetch-array-expects-parameter-1-to-be-resource-boolean-given-in-select)

运行此代码时出现两个错误：

```
<?php
include('config.php');
session_start();
$user_check=$_SESSION['login_user'];

$ses_sql=mysql_query("select username from admin where username='$user_check' ");

$row=mysql_fetch_array($ses_sql);

$login_session=$row['username'];

if(!isset($login_session))
{
header("Location: login.php");
}
?> 
```

代码按我想要的方式执行，但抛出了这两个错误：

```
Warning: mysql_fetch_array() expects parameter 1 to be resource, boolean given in /home/jblanksb/public_html/lock.php on line 9 
```

和

```
Warning: Cannot modify header information - headers already sent by (output started at /home/jblanksb/public_html/lock.php:9) in /home/jblanksb/public_html/lock.php on line 15 
```

当我尝试使用`error_reporting(0);`代码隐藏错误时不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T19:15:02.380

就在这条线之后

```
$ses_sql=mysql_query("select username from admin where username='$user_check' "); 
```

添加

```
echo(mysql_error()); 
```

这将给出您实际遇到的错误。因为它目前给出了一个错误，所以它返回 FALSE，它是布尔值（如输出所示。）您的查询似乎是正确的，因此`$user_check`您可能需要检查它的值。

至于从 /home/jblanksb/public_html/lock.php:9 开始的标题问题输出，您肯定会在 lock.php 的那一行输出一些东西。

[http://php.net/manual/en/function.header.php](http://php.net/manual/en/function.header.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T19:29:16.117

1.  使用 ob_start(); 在 php 标签后的第一行将删除标题问题。
2.  mysql_query 括号结束后写.. die (mysql_error()); 这会给你查询错误。我认为这是当 $user_check 为空白时，你会得到这个。尝试将 if(session checks ) 放在 sql query (db checks) 之前。

这将解决您的问题。

谢谢。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T19:03:15.613

问题是您的 mysql_query 失败，这给 $ses_sql 值**false**（这当然不是资源）。

使用 mysql_query 解决问题将阻止错误消息，这将使您的代码将您重定向到另一个页面。

使用 mysql_error() 找出 MySQL 查询的问题所在。

# .net - System.Configuration.ConfigurationManager 在 Visual Studio 设计器中不起作用

> ID：10251998
> 
> 赞同：1
> 
> 时间：2012-04-20T18:59:55.977
> 
> 标签：.net, wpf, visual-studio, visual-studio-2010

我正在 Visual Studio 2010 中开发 WPF 应用程序。

当应用程序窗口加载到设计器中时，尝试检索连接字符串或应用程序设置总是返回 null。例如，如果我有一个名为“foo”的应用程序设置，其值为“bar”，在设计器中，`ConnectionManager.AppSettings["foo"]`将返回 null，而在运行时，它将返回“bar”。这让我有些惊愕，因为我的窗口现在在设计器中抛出异常。

这是 Visual Studio 中的已知错误（或“功能”）吗？我无法在其他地方找到提及它。

如果你们中的任何人以前遇到过这种情况，是否有可用的通用解决方法？

编辑，根据菲尔的要求：

这可以通过在窗口中放置标签来轻松复制，à la：

```
 <Label Content="{Binding TheText}" HorizontalAlignment="Left" /> 
```

在视图模型中，将 TheText 元素设置为应用程序设置“foo”的值：

```
TheText = ConfigurationManager.AppSettings["foo"]; 
```

app.config 包含以下 appSettings 部分：

```
<appSettings>
    <add key="foo" value="bar"/>
</appSettings> 
```

编辑：我已将 Phil 的解决方案标记为正确的解决方案，因为似乎使用设置 API 是解决此问题的唯一方法。可悲的是，这并不是在所有情况下都可行的解决方法。我在 MS Connect 上提出了一个关于此的问题：[https ://connect.microsoft.com/VisualStudio/feedback/details/738316/system-configuration-configurationmanager-does-not-work-in-wpf-designer](https://connect.microsoft.com/VisualStudio/feedback/details/738316/system-configuration-configurationmanager-does-not-work-in-wpf-designer)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T20:58:21.740

我已经尝试了与您的示例类似的方法，没有问题：

1）在项目属性设置选项卡中添加字符串设置

2) 添加带有标签的控件

```
<Label Content="{Binding TheText}" HorizontalAlignment="Left" /> 
```

3) 添加视图模型

```
public class ViewModel
{
    public string TheText{ get{ return Settings.Default.TheSetting; } }
} 
```

4) 数据上下文

```
<UserControl.DataContext>
    <ViewModel/>
</UserControl.DataContext> 
```

主要区别是我通过 Settings.Default 使用键入的应用程序设置。

如果你的 app.config 包含这种风格的设置：

```
 <applicationSettings>
    <MyTestApp.Properties.Settings>
      <setting name="TheSetting" serializeAs="String">
        <value>Test</value>
      </setting>
    </MyTestApp.Properties.Settings>
  </applicationSettings> 
```

您需要使用 Settings.Default.xxx