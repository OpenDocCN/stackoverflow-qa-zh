# StackOverflow 问答 10185000-10185999

# ruby-on-rails - 如何显示 rhomobile 数组是否为空

> ID：10185000
> 
> 赞同：0
> 
> 时间：2012-04-17T04:20:14.140
> 
> 标签：ruby-on-rails, rhomobile

我在 RhoMobile 中有一些显示搜索结果的代码。如果没有找到结果，我想显示一条消息，但作为 Ruby n00b，我没有收到我想要输出的消息。

```
<ul data-role="listview">
   <% @employees.each do |employee| %>

     <li>
       <a href="<%= url_for :action => :show, :id => employee.object %>">
         <%= employee.name %>
       </a>
     </li>

   <% end %>
   <% "<li>No results found</li>" if @employees.empty? %>
</ul> 
```

如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T04:37:18.573

你错过了`=`，它应该是：

```
<%= "<li>No results found</li>" if @employees.empty? %> 
```

尽管这也可能不起作用，因为该字符串未标记为 HTML 安全。也就是说，最好将所有内容包装在条件中以使其更清晰，并避免在字符串中包含 HTML：

```
<ul data-role="listview">
  <% if @employees.any? %>
    <% @employees.each do |employee| %>
      <li>
        <%= link_to employee.name, {:action => :show, :id => employee.object} %>
      </li>
    <% end %>
  <% else %>
    <li>No results found</li>
  <% end %>
</ul> 
```

我还将您的手动编码链接替换为对[`link_to`](http://api.rubyonrails.org/classes/ActionView/Helpers/UrlHelper.html#method-i-link_to).

# hadoop - 如何将压缩包加载到猪

> ID：10185007
> 
> 赞同：5
> 
> 时间：2012-04-17T04:21:37.133
> 
> 标签：hadoop, apache-pig

我有一个加载到我的 hadoop 集群中的 tarball (access.logs.tar.gz) 中的日志文件。我想知道他们是不是直接把它装到猪身上而不去皮？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-19T02:06:32.257

@ChrisWhite 的回答在技术上是正确的，您应该接受他的回答而不是我的回答（至少在 IMO）。

你需要远离`tar.gz`Hadoop 的文件。Gzip 文件是不可拆分的，因此如果您的 gzip 文件很大，您将在映射器中看到热点。例如，如果您有一个`.tar.gz`100gb 的文件，您将无法拆分计算。

另一方面，让我们说它们很小。在这种情况下，Pig 会很好地将它们收集在一起，分裂问题就会消失。这有一个缺点，即现在您正在使用 NameNode 处理大量小文件。此外，由于文件很小，因此将文件改造成更合理的格式在计算上应该相对便宜。

那么您应该将文件重新格式化为什么格式？好问题！

*   将它们全部连接成一个大的块级压缩序列文件可能是最具挑战性的，但在性能方面也是最有价值的。
*   另一种是完全忽略压缩，只是将这些文件分解出来，或者至少将它们连接起来（你确实会看到没有压缩的性能损失）。
*   最后，您可以将 blob 文件分成大约 100MB 的块，然后 gzip 压缩它们。

我认为将某种 tarball 加载程序写入 piggybank 是完全合理的，但我个人更愿意以不同的方式布置数据。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-17T10:37:29.767

PigStorage 将识别文件已压缩（通过 .gz 扩展名，这实际上是在 PigTextInputFormat 扩展的 TextInputFormat 中实现的），但之后您将处理一个 tar 文件。如果您能够处理 tar 中文件之间的标题行，那么您可以按原样使用 PigStorage，否则您需要编写自己的 PigTextInputFormat 扩展来处理剥离每个文件之间的 tar 标题行

# android - 在 Android 中将 JPEG 图像保存为视频

> ID：10185013
> 
> 赞同：2
> 
> 时间：2012-04-17T04:22:15.077
> 
> 标签：android

假设，使用我的应用程序，我拍摄了一些图像，这些图像将保存在特定目录中并保存为 JPEG。

是否可以将这些图像打包在一起？喜欢进入视频或tar或zip？这样我就可以将这些图像发送到后端（例如网络服务器）。

这可能吗？或者我只能一一发送？

提前致谢，佩马尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T04:59:14.573

要从图像制作视频文件，您必须使用任何视频编解码器库，如**FFMPEG**或其他任何东西。

但是对于创建**.zip 存档**..

**Android 具有对java.util.zip**包的内置类[`ZipOutputStream`](http://developer.android.com/reference/java/util/zip/ZipOutputStream.html)支持。

 **此类提供了`FilterOutputStream`将数据条目压缩到 ZIP 存档输出流中的实现。

`ZipOutputStream`用于写入`ZipEntries`底层流。输出`ZipOutputStream`符合`ZipFile`文件格式。

也看看这篇文章这可能对你有帮助..

[使用 Android 压缩文件（以编程方式）](http://www.jondev.net/articles/Zipping_Files_with_Android_%28Programmatically%29)**

# php - 通过 php 下拉菜单更改图像

> ID：10185017
> 
> 赞同：0
> 
> 时间：2012-04-17T04:22:35.667
> 
> 标签：php, image, drop-down-menu

我想要做的是在从下拉列表中选择一个项目时更改图像。这是表格的一部分，因此我无法更改值。但是，选项值是行 ID，该行也将包含图像的目标。但是因为目标“文件”是在循环之外调用的，所以它不会触发。

我读到我必须先在循环中调用它，但不能让它工作。你能看看下面的代码并给我一个提示吗？

谢谢

```
 <?php

include ("conned-db.php");

$result = mysql_query("SELECT * FROM gallery") 
or die(mysql_error());  

echo "<select id='gallery_id' name='gallery_id' style='width:200px;' >";

while($row = mysql_fetch_array( $result ))
{
echo '<option value=' . $row['id'] . '>';
echo $row['gallery_name'];
echo '</option/>';
}
echo "</select>";
echo "</td>";
echo "<td colspan='2' rowspan='2'>";
echo '<img src=' .$row['file']. '/></td>';

    ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T04:33:18.863

试试这个，我想这就是你要找的

如果你想做这样的事情，你必须使用 Ajax。在这里，您可以找到帮助您了解 Ajax 的链接。

[http://www.w3schools.com/php/php_ajax_database.asp](http://www.w3schools.com/php/php_ajax_database.asp)

笔记：

如果您希望它只是没有 Javascript 的 PHP，则必须牺牲“不得刷新”约束，因为提交表单的唯一方法是按下按钮并提交内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T04:38:18.040

这也应该有效。如果图像的文件位置在您使用 ajax 加载页面时可用，则不是必须的。如果您需要再次查询服务器以检索所需的文件位置，则必须使用 ajax。以下代码假定您在加载页面时拥有下拉列表中每个项目的图像位置。

```
<select id='gallery_id' name='gallery_id' style='width:200px;' 
  onchange='document.getElementById("image").src=this.options[this.selectedIndex].title' >
 <?php
 while($row = mysql_fetch_array( $result ))
 {
  ?>
   <option value='<?php echo $row["id"]; ?>' title='<?php echo $row["file"]; ?>'> 
        <?php echo $row["gallery_name"]; ?>
   </option>
  <?php
  }
  ?>
<img id="image" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T04:35:51.037

这是一个实现 java scrip 和 php 的简短示例，其中我根据选择中的 id 更新图像的 src，您可能希望使用基于该 id 的特定 src 进行更改

```
<?php

    include ("conned-db.php");
    $item = $_GET["imageid"];
    if ($item == "")
    {
        $item = 1;
    }

    $result = mysql_query("SELECT * FROM gallery") 
    or die(mysql_error());  
   ?>
    <select id='gallery_id' name='gallery_id' onChange="window.location='file.php?imageid='+this.value" style='width:200px;' >
    <?

    while($row = mysql_fetch_array( $result ))
    {
    echo '<option value=' . $row['id'] . '>';
    echo $row['gallery_name'];
    echo '</option/>';
    }
  ?>
    </select>
    </td>
<?
    echo "<td colspan='2' rowspan='2'>";
?>
    <img src=' <?=$item?> '/></td> 
```

# f# - F# PSeq.iter 似乎并未使用所有内核

> ID：10185019
> 
> 赞同：10
> 
> 时间：2012-04-17T04:22:46.917
> 
> 标签：f#, parallel-processing, task-parallel-library, lazy-evaluation, seq

我一直在用 F# 做一些计算密集型的工作。使用 .Net Task Parallel Library 之类的函数`Array.Parallel.map`以指数级的速度加快了我的代码速度，而付出的努力非常少。

但是，由于内存问题，我重新编写了一段代码，以便可以在序列表达式中懒惰地评估它（这意味着我必须存储和传递更少的信息）。当需要评估时，我使用了：

```
// processor and memory intensive task, results are not stored
let calculations : seq<Calculation> =  seq { ...yield one thing at a time... }

// extract results from calculations for summary data
PSeq.iter someFuncToExtractResults results 
```

代替：

```
// processor and memory intensive task, storing these results is an unnecessary task
let calculations : Calculation[] = ...do all the things...

// extract results from calculations for summary data
Array.Parallel.map someFuncToExtractResults calculations 
```

当使用任何 Array.Parallel 函数时，我可以清楚地看到我计算机上的所有内核都启动了（~100% CPU 使用率）。然而，所需的额外内存意味着程序永远不会完成。

当我运行程序时使用 PSeq.iter 版本，CPU 使用率只有 8% 左右（并且 RAM 使用率最低）。

那么：PSeq 版本运行这么慢有什么原因吗？是因为懒惰的评价吗？我缺少一些神奇的“平行”的东西吗？

谢谢，

其他资源，两者的源代码实现（它们似乎在 .NET 中使用不同的并行库）：

[https://github.com/fsharp/fsharp/blob/master/src/fsharp/FSharp.Core/array.fs](https://github.com/fsharp/fsharp/blob/master/src/fsharp/FSharp.Core/array.fs)

[https://github.com/fsharp/powerpack/blob/master/src/FSharp.PowerPack.Parallel.Seq/pseq.fs](https://github.com/fsharp/powerpack/blob/master/src/FSharp.PowerPack.Parallel.Seq/pseq.fs)

**编辑：为代码示例和详细信息添加了更多详细信息**

代码：

*   序列

    ```
    // processor and memory intensive task, results are not stored
    let calculations : seq<Calculation> =  
        seq { 
            for index in 0..data.length-1 do
                yield calculationFunc data.[index]
        }

    // extract results from calculations for summary data (different module)
    PSeq.iter someFuncToExtractResults results 
    ```

*   大批

    ```
    // processor and memory intensive task, storing these results is an unnecessary task
    let calculations : Calculation[] =
        Array.Parallel.map calculationFunc data

    // extract results from calculations for summary data (different module)
    Array.Parallel.map someFuncToExtractResults calculations 
    ```

细节：

*   存储中间数组版本在 10 分钟内快速运行（就崩溃前而言），但在崩溃之前使用 ~70GB RAM（64GB 物理，其余分页）
*   seq 版本需要 34 分钟并使用一小部分 RAM（仅约 30GB）
*   我正在计算一个〜十亿的价值。因此，十亿双倍（每个 64 位）= 7.4505806GB。有更复杂的数据形式......我正在清理一些不必要的副本，因此当前大量的 RAM 使用。
*   是的，架构不是很好，懒惰的评估是我尝试优化程序和/或将数据分成更小的块的第一部分
*   使用较小的数据集，两个代码块输出相同的结果。
*   @pad，我尝试了你的建议，当输入 Calculation[] 时，PSeq.iter 似乎工作正常（所有内核都处于活动状态），但仍然存在 RAM 问题（它最终崩溃了）
*   代码的摘要部分和计算部分都是 CPU 密集型的（主要是因为大数据集）
*   使用 Seq 版本，我的目标只是并行化一次

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-17T05:11:37.313

根据您更新的信息，我将我的答案缩短到相关部分。你只需要这个而不是你目前拥有的：

```
let result = data |> PSeq.map (calculationFunc >> someFuncToExtractResults) 
```

`PSeq.map`无论您使用或，这都将起作用`Array.Parallel.map`。

但是，您的真正问题不会得到解决。这个问题可以表述为：当达到所需的并行工作程度以达到 100% 的 CPU 使用率时，没有足够的内存来支持进程。

你能看出这将如何解决吗？您可以按顺序处理事物（CPU 效率较低，但内存效率较低），也可以并行处理事物（CPU 效率更高，但内存不足）。

那么选项是：

1.  将这些函数使用的并行度更改为不会破坏您的记忆的东西：

    ```
    let result = data 
                 |> PSeq.withDegreeOfParallelism 2 
                 |> PSeq.map (calculationFunc >> someFuncToExtractResults) 
    ```

2.  更改底层逻辑`calculationFunc >> someFuncToExtractResults`，使其成为更高效的单个函数，并将数据流式传输到结果。在不了解更多细节的情况下，要了解如何做到这一点并不容易。但在内部，一些延迟加载当然是可能的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-17T06:57:11.163

`Array.Parallel.map``Parallel.For`在引擎盖下使用，而`PSeq`周围是薄薄的包装`PLINQ`。但是它们在这里表现不同的原因是没有足够的工作负载来处理`PSeq.iter`何时`seq<Calculation>`是顺序的并且产生新结果的速度太慢。

我不知道使用中间序列或数组。假设`data`是输入数组，将所有计算移动到一个地方是要走的路：

```
// Should use PSeq.map to match with Array.Parallel.map
PSeq.map (calculationFunc >> someFuncToExtractResults) data 
```

和

```
Array.Parallel.map (calculationFunc >> someFuncToExtractResults) data 
```

您避免消耗过多的内存并在一个地方进行密集计算，从而提高并行执行的效率。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-06-24T01:07:33.973

我遇到了与您类似的问题，并通过将以下内容添加到解决方案的 App.config 文件中来解决它：

```
<runtime> 
    <gcServer enabled="true" />
    <gcConcurrent enabled="true"/>
</runtime> 
```

使用 5'49'' 并在 Process Lasso 上显示大约 22% 的 CPU 使用率的计算需要 1'36'' 显示大约 80% 的 CPU 使用率。

另一个可能影响并行代码速度的因素是 BIOS 中是否启用了超线程 (Intel) 或 SMT (AMD)。我见过禁用导致更快执行的情况。

# c# - 一般在c#很多地方集成一行代码

> ID：10185020
> 
> 赞同：0
> 
> 时间：2012-04-17T04:22:48.720
> 
> 标签：c#, asp.net, devart

好的，这是我的一段代码

```
MySqlConnection conn = new MySqlConnection("Userid=root;pwd=root;port=3306;host=localhost;database=test");
conn.Open(); 
```

由于我正在使用的新版本的 devart 连接器存在一些问题，我必须在代码中的`OldCompatibility.BinaryAsString = true;` 任何地方添加一行代码，如下所示

```
OldCompatibility.BinaryAsString = true;
MySqlConnection conn = new MySqlConnectio("User id=root;pwd=root;port=3306;host=localhost;database=test");
conn.Open(); 
```

但问题是我必须在我的应用程序中进行此更改，其中有许多页面包含这段代码。所以有什么方法可以全局执行此操作，这样我就不必在我的应用程序中进行此更改。我正在使用 devart 连接器 6

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T04:29:38.177

Assuming that your connection is remotely similar each time; don't. Keep all your connection logic in one shared method, and use that instead of repeating the connection code everywhere.

```
public static MySqlConnection Connect() {
    OldCompatibility.BinaryAsString = true;
    MySqlConnection conn = new MySqlConnection("User id=root;pwd=root;port=3306;host=localhost;database=test");
    conn.Open();

    return conn;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T04:26:12.963

MySqlConnection 是您的自定义类，如果您将 OldCompatibility.BinaryAsString = true 放在 MySqlConnection 的构造函数中，那么它将起作用

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T04:31:34.597

You can use a [factory method](http://en.wikipedia.org/wiki/Factory_method_pattern)

```
public class FactoryMethods
{
  public static MySqlConnection GetConfiguredConnection()
  {
    OldCompatibility.BinaryAsString = true;
    MySqlConnection conn = new MySqlConnectio("User id=root;pwd=root;port=3306;host=localhost;database=test");
    conn.Open();
    return conn;
  }
} 
```

And assuming the connection is IDispose-able

```
using (var myConn = FactoryMethods.GetConfiguredConnection())
{
  // Use your connection here
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-17T04:36:53.307

使用正则表达式查找和替换一次更改所有代码：

1.- 按 Ctrl+H 打开“查找和替换”窗口输入您的搜索，将换行符替换为“\n”（无引号）

2.-展开“查找选项”并选中“使用”，选择“正则表达式”（这也会激活“查找内容”框旁边的右箭头。它列出了一些命令/快捷方式）。

例如：在查找时键入：

```
{MySqlConnection conn = new MySqlConnection} 
```

然后在替换上试试这个：

```
OldCompatibility.BinaryAsString = true;\n\t\t\1 MySqlConnection conn = new MySqlConnection 
```

这将找到与搜索匹配的所有代码并在其前面添加一个附加行。注意占位符 {...} 被替换为 \1

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-17T04:45:50.650

你***真的***应该考虑@minitech关于使用方法的建议，但如果你真的不能在任何地方更改代码，我只能看到两个选项；

*   将 MySQLConnection 扩展为在另一个命名空间中*使用相同名称*的新类，只需更改构造函数以包含您的行。然后只替换`using`文件顶部的行。

*   如果无法做到这一点，请以相同的方式实现包装类。

这两个选项都可能不起作用（例如，如果类是最终的，则为#1，如果类作为参数传递给任何函数，则为#2），但除非您至少可以进行全局搜索/替换或实现@minitech's建议用一种方法，我看不到任何其他方法。

# xcode - Phonegap\Cordova 1.6.0 是怎么回事？

> ID：10185023
> 
> 赞同：-1
> 
> 时间：2012-04-17T04:23:11.330
> 
> 标签：xcode, cordova

我下载了新的phonegap 实际上是cordova，现在我的项目没有www 文件夹..这是怎么回事？我使用了phonegap 0.9，并且更容易为什么他们乱七八糟而且文档很草率......

请帮忙，真正的电话间隙在哪里？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-17T05:39:52.400

Phonegap 的新名称现在是 Cordova（在被 Apache 接受后）。所以现在使用 Cordova 1.6.0 并且文档检查这个[http://docs.phonegap.com/en/1.6.0/index.html](http://docs.phonegap.com/en/1.6.0/index.html)

# java - 使用 log4j api 生成简单 java 类的日志

> ID：10185025
> 
> 赞同：0
> 
> 时间：2012-04-17T04:23:51.330
> 
> 标签：java, log4j

我有一个疑问，如果我编写了一个简单的 Java 类，并且我想查看在后面执行的日志，那么这些日志是由 JVM 在后端执行的。我有 log4j JAR。你能给我建议如何实现这一目标吗？

我希望看到在 WebApp 的情况下生成的相同日志，因此我可以将它重用于 Java App。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T04:26:24.560

尝试在这里查看 log4j api/demo [http://www.vaannila.com/log4j/log4j-tutorial/log4j-tutorial.html](http://www.vaannila.com/log4j/log4j-tutorial/log4j-tutorial.html)

您可以使用 log4j 为任何类和任何应用程序 afaik 生成日志，它不一定是 Web 应用程序

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T04:32:02.263

这是一个非常简单的[示例](http://www.vaannila.com/log4j/log4j-configuration.html)，您应该能够适应您想要实现的目标。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T04:32:04.213

如果您的“简单 Java 类”恰好位于 Java EE 容器中（例如 Tomcat、JBoss 或 WebSphere 中的 .jsp 或 servlet），那么您需要做的就是：

1）导入org.apache.log4j.Logger；

2）在你的类中声明一个静态实例：

```
 EXAMPLE:  `static Logger logger = Logger.getLogger ("MyApp");` 
```

3）使用你的记录器

```
 EXAMPLE: `logger.info ("something interesting happened");` 
```

4) 如果您在 CLASSPATH 中包含 log4j.java 和您自己的 log4j.properties，那么您*不需要*做*任何*其他事情。

以下是有关将 log4j 与 Tomcat 或应用服务器一起使用的更多信息：

*   [http://tomcat.apache.org/tomcat-5.5-doc/logging.html](http://tomcat.apache.org/tomcat-5.5-doc/logging.html)

*   [http://logging.apache.org/log4j/1.2/manual.html](http://logging.apache.org/log4j/1.2/manual.html)

*   [http://www.tutorialspoint.com/log4j/log4j_quick_guide.htm](http://www.tutorialspoint.com/log4j/log4j_quick_guide.htm)

这是一个非常简单的“记录”示例程序，来自上面的 tutorialspoint.com 链接：

```
import org.apache.log4j.Logger;

import java.io.*;
import java.sql.SQLException;
import java.util.*;

public class log4jExample{
  /* Get actual class name to be printed on */
  static Logger log = Logger.getLogger(
                      log4jExample.class.getName());

  public static void main(String[] args)
                throws IOException,SQLException{

     log.debug("Hello this is an debug message");
     log.info("Hello this is an info message");
  }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-17T04:37:26.197

步骤 1：在您的项目中导入 log4j jar 文件

第 2 步：- 创建一个 Log java 文件

```
public Log(Class className) {
        logger = Logger.getLogger(className.getClass());
        logger.getClass();
        final String LOG_PROPERTIES_FILE_NAME = "log4j.properties";
        props = loadLogFile(LOG_PROPERTIES_FILE_NAME, className);
        //props =getPropsFile(LOG_PROPERTIES_FILE_NAME, className);
        PropertyConfigurator.configure(props);
    }

public static Properties loadLogFile(String propertyFile, Class className) {
        //String filePath="";
        try {
            Properties ps = null;

            ResourceBundle bundle = ResourceBundle
                    .getBundle("resource.DbProperties");
            String logPath = bundle.getString("logs.path");
            File filePath = new File(logPath);
            if (!filePath.exists()) {
                filePath.mkdirs();
            }
            props.clone();
            props = getPropsFile(propertyFile, className);
            props.setProperty("info_file_path", filePath.toString());
            //  PropertyConfigurator.configure(props);
        } catch (Exception e) {
            e.printStackTrace();
        }
        return props;
    }

public void info(String message) {
    logger.info(message);
}

public void warn(String message) {
    logger.warn(message);
}

public void error(String message) {
    logger.error(message);
}

public void fatal(String message) {
    logger.fatal(message);
}

public void printStackTrace(Throwable ex) {
    StringWriter sw = new StringWriter();
    ex.printStackTrace(new PrintWriter(sw));
    logger.error("\n" + sw.toString());
} 
```

**log4j.properties**

```
log4j.rootCategory=LOGFILE
log4j.appender.LOGFILE=org.apache.log4j.FileAppender
log4j.appender.LOGFILE.File=${info_file_path}\\info_Pension_application.log
log4j.appender.LOGFILE.Append=true
log4j.appender.LOGFILE.Threshold=INFO
log4j.appender.LOGFILE.Threshold=DEBUG
log4j.appender.LOGFILE.layout=org.apache.log4j.PatternLayout
log4j.appender.LOGFILE.layout.ConversionPattern=%-4r [%t] %-5p %c %x - %m%n 
```

# wpf - Prism - 从主视图中删除新添加记录的策略

> ID：10185029
> 
> 赞同：0
> 
> 时间：2012-04-17T04:24:45.227
> 
> 标签：wpf, prism, prism-4, wpf-4.0

我有一个典型的主从场景。用户可以在主视图中单击“添加新”并在详细视图中输入详细信息。例如，假设我有产品的 ObservableCollection 列表。当用户单击“添加新”时，我将新的产品记录添加到 ObservableCollection，然后打开一个详细视图以添加产品详细信息。如果用户确实保存了产品，这很有效。但是，如果用户决定取消添加新产品，我如何从主视图中产品的 ObservableCollection 中删除它。现在我可以想到两种方法，第一个是将 ObservableCollection 的引用传递给 Details 视图，第二个是使用事件通知 master 视图关于新的 Product 记录删除。你有什么建议？此外，如果有更好的方法来专门处理棱镜，

问候，尼尔文。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T04:32:33.470

将对 ObservableCollection 的引用传递给详细信息视图是不行的——它应该只知道它绑定到的记录。

您尚未为此指定 UI，可能有几种方法可以更适合您的设计。然而，一种合理不可知的方法是使用 EventAggregator 发布主视图可以订阅的事件。如何处理该事件取决于主视图，不同的视图可以以不同的方式响应。在这种特殊情况下，主视图可以检查当前选定的项目，如果它是新的（即尚未保存，没有像 ID 这样的关键信息），那么它可以简单地将其从集合中删除并丢弃它。

# api - 带有类别过滤器的 Foursquare 趋势 API

> ID：10185034
> 
> 赞同：0
> 
> 时间：2012-04-17T04:25:49.630
> 
> 标签：api, foursquare

我正在使用foursquare api（https://api.foursquare.com/v2/venues/trending），但我想按类别过滤它。我尝试用作搜索 api（参数 categoryId），但没有成功。

谁能帮我？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T14:12:29.317

我们目前不支持在我们的场所/趋势端点上按类别 ID 进行过滤。

最好的办法是只调用具有最大限制（50 个场所）的趋势端点，然后在客户端过滤掉没有所需类别 ID 的场所。

或者，根据您尝试对应用程序执行的操作，您可以使用场所/搜索端点（使用 intent=browse 和类别 ID 过滤器），并根据其中的人数简单地重新排列结果“现在这里”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T14:16:53.690

当前 API 版本中没有过滤器选项`category`。[`venues/trending`](https://developer.foursquare.com/docs/venues/trending)您可以查询多达 50 个附近的热门场所并自行过滤结果。这个问题也在[这里](https://groups.google.com/forum/?fromgroups#!topic/foursquare-api/Y8vcRL3MDa8)讨论过。

# android - 后台线程成功执行后显示 AlertDialog

> ID：10185036
> 
> 赞同：0
> 
> 时间：2012-04-17T04:26:02.920
> 
> 标签：android, android-alertdialog

我正在运行一个后台线程。后台线程成功执行后，我想在 UI 上向用户显示一些警报消息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T04:29:11.547

if you worked with `AsynTask` then you can show it in `onPostExecute()`. [http://www.mysamplecode.com/2011/09/android-asynctask-httpclient-with.html](http://www.mysamplecode.com/2011/09/android-asynctask-httpclient-with.html)

```
AlertDialog alertDialog = new AlertDialog.Builder(
                        AlertDialogActivity.this).create();

    // Setting Dialog Title
    alertDialog.setTitle("Alert Dialog");

    // Setting Dialog Message
    alertDialog.setMessage("Welcome to AndroidHive.info");

    // Setting OK Button
    alertDialog.setButton("OK", new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialog, int which) {
            // Write your code here to execute after dialog closed
            Toast.makeText(getApplicationContext(), "You clicked on OK", Toast.LENGTH_SHORT).show();
            }
    });

    // Showing Alert Message
    alertDialog.show(); 
```

for more help with alert see [http://www.androidhive.info/2011/09/how-to-show-alert-dialog-in-android/](http://www.androidhive.info/2011/09/how-to-show-alert-dialog-in-android/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T04:29:41.947

If you are using [AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html), then you could write the code for displaying the message (maybe a Toast), in `onPostExecute()`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T04:32:09.003

将后台线程与 UI 连接并非不可能。在处理程序的帮助下，您可以发送消息。通过检查消息，您可以显示警报消息。我认为这段代码会对您有所帮助。

```
Thread animator = new Thread() {
        public void run() {
            int i = 0;
            try {
                sleep(4000);
                while (i < 4) {
                    sleep(50);
                    handler.sendMessage(handler.obtainMessage(i));
                    i++;
                }
            } catch (Exception e) {

            }
        }
    };
    animator.start();
    handler = new Handler() {

        @Override
        public void handleMessage(Message msg) {
            super.handleMessage(msg);
            if (msg.what == 0) {
                animatedimage.setImageResource(R.drawable.sub1);
            } else if (msg.what == 1) {
                animatedimage.setImageResource(R.drawable.sub2);
            } else if (msg.what == 2) {
                animatedimage.setImageResource(R.drawable.sub3);
            } else if (msg.what == 3) {
                animatedimage.setImageResource(R.drawable.sub4);
            }
        }

    }; 
```

如果您使用的是 Assync tasy，您可以在

```
onPostExecute() 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-17T04:32:44.167

启动一个异步线程。异步线程为您提供了三种方法：OnPreExecute()、doInBackground() 和 onPostExecute()。

第一个和最后一个方法是在UI线程上调用的，所以一旦在doInBackground中操作

# python - 如何在不等待 SimPy 的情况下定期生成事件？

> ID：10185044
> 
> 赞同：0
> 
> 时间：2012-04-17T04:27:31.333
> 
> 标签：python, simpy

我正在学习 SimPy。目前我需要定期调用一个方法，直到模拟结束。

我写的像

```
import SimPy.Simulation as Simpy

class mod(Simpy.Process):
    def do(self):
        print(Simpy.now(), "Do!")
        yield Simpy.hold, self, 5.0

class trigger(Simpy.Process):
    def ACTIONS(self):
        while True:
            for i in self.target.do():
                yield i
            yield Simpy.hold, self, 1.0

    def set_target(self, tar):
        self.target = tar

Simpy.initialize()
obj = mod()
tri = trigger()
tri.set_target(obj)
tri.start(at=0.0)
Simpy.simulate(until=100.0) 
```

由于 中的陈述`while True:`，它应该产生`target.do()`每 1.0 个时间单位。因此输出应该是：

```
0.0 Do!
1.0 Do!
2.0 Do!
...... 
```

但实际上，它`target.do()`每 6.0 个时间单位产生一次（`yield`保持等待直到`target.do()`完成）：

```
0.0 Do!
6.0 Do!
12.0 Do! 
```

我想知道如何将目标函数定期生成到计划中，而无需等到它完成执行？

谢谢！……

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T11:05:26.807

好的，我自己想通了。SimPy 中的A`Process`是一种作为事件的事物。每当它被安排然后完成时，它就会被终止。因此，每当您想将事件插入时间线时，实例`Process`应该是一个**新**的。换句话说，`Process`应该将其视为一次性信号，而不是工作方法本身。

所以，`Process`应该是这样的：

```
class Event(Simpy.Process):
    def call_do(self, subject):
        subject.do() 
```

并且工作方法不应再是`Process`. 时间延迟应该通过激活来控制，`event`而不是由工作流控制：

```
class mod():
    def do(self):
        print(Simpy.now(), "Do!") 
```

最后，我们可以这样安排：

```
while True:
    e = Event()
    Simpy.activate(e, e.call_do(self.target), delay = 5.0)
    yield Simpy.hold, self, 1.0 
```

# regex - Search and replace in Perl

> ID：10185045
> 
> 赞同：1
> 
> 时间：2012-04-17T04:27:39.860
> 
> 标签：regex, perl

I want to search a sentence and replace it with the value of hash that matched string like this:

```
my $sentence = "abc def hello hi";
$sentence =~ s/abc def/$hash{'abc def'}/g; 
```

I am not getting the correct output. Can any one please help me?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T04:32:49.283

这对我有用：

```
#!/usr/bin/env perl
use strict;
use warnings;

my %hash = ( 'abc def' => 'pqr xyz' );

my $sentence = "abc def hello hi";
$sentence =~ s/abc def/$hash{'abc def'}/g;

print "$sentence\n"; 
```

运行时，它会打印：

```
pqr xyz hello hi 
```

如果这不是你所期望的，你在期待什么？（请注意，问题中 Perl 代码的原始版本中有许多拼写错误；我认为它们是偶然的，但也许它们是您的问题的关键。使用`use strict;`和`use warnings;`帮助发现诸如拼写错误的变量名之类的问题。）

# c# - Use the WPF toolkit messagebox using custom name

> ID：10185046
> 
> 赞同：0
> 
> 时间：2012-04-17T04:27:44.110
> 
> 标签：c#, wpf, visual-studio-2010, xaml

I am using the WPF toolkit messagebox now using something like this

```
Xceed.Wpf.Toolkit.MessageBox.Show(MessageCenter.Show(12131011, true)); 
```

Then i did this

```
 Xceed.Wpf.Toolkit.MessageBox Mebox=new  Xceed.Wpf.Toolkit.MessageBox(); 
```

Surprise.Doesn't work.

What i am trying to do is use create a new Messagebox named Mebox which is basically a renamed version of `Xceed.Wpf.Toolkit.MessageBox` since typing `Xceed.Wpf.Toolkit.MessageBox` is tedious.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T04:32:02.443

您是否尝试过包含命名空间和/或给它一个别名。

在 cs 文件的顶部放置以下内容：

```
using MeBox = Xceed.Wpf.Toolkit.MessageBox; 
```

# ios - 调用父类方法 Cocos2d

> ID：10185048
> 
> 赞同：0
> 
> 时间：2012-04-17T04:28:08.297
> 
> 标签：ios, cocos2d-iphone, parent-child, layer, scene

我正在尝试从图层调用方法。有问题的方法在该层的父级中。

**例子：**

“生存”是我的场景名称 “SSpriteLayer”是我的图层名称

SSpriteLayer.m

```
//this id not my actual method, just a simplified version
-(void) spritePick {
[scene initSpritePick];
NSLog(@"sent");
{ 
```

SSpriteLayer.h

```
#import Survival 
@interface SSpriteLayer : CCLayer {
Survival *scene;
} 
```

生存.m

```
- (void) initSpritePick {
NSLog(@"test");
} 
```

文本“测试”从未出现在日志中，但我层中的方法被调用。问题是即使发送了对该方法的调用，它也永远找不到该方法，并且什么也没有发生。**我没有收到任何错误消息。**

我已经尝试了所有我知道的方法来做到这一点，所以请你给我一些建议，或者指出问题所在。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T07:30:13.203

也许这可以帮助 [(ParentClassName*)[self parent] functionName];

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T04:49:57.807

```
 Try using Class Method it will work 
```

例子：

```
"Survival" is the name of my scene "SSpriteLayer" is the name of my layer

**SSpriteLayer.m**

//this id not my actual method, just a simplified version
-(void) spritePick 
 {
    [Survival initSpritePick];
    NSLog(@"sent");
    {
    }

**SSpriteLayer.h**

#import Survival 
@interface SSpriteLayer : CCLayer {
  Survival *scene;
}

**Survival.m**

  + (void) initSpritePick
  {
      NSLog(@"test");
 } 
```

问候，尼尔。

# java - Spring HttpInvoker：如何在运行时替换 serviceUrl？

> ID：10185051
> 
> 赞同：2
> 
> 时间：2012-04-17T04:28:34.240
> 
> 标签：java, spring, remoting

这个问题被讨论了几次，但我无法找到解决我们问题的解决方案。我们有以下 HttpInvoker 服务，它从数据库中获取远程 URL：

```
@Service("exampleService")
public class ExampleHttpInvoker extends HttpInvokerProxyFactoryBean {

    @Resource
    private DBService service;

    @PostConstruct
    public void init() throws ConfigurationException {

       String url = service.getURL();
       this.setServiceUrl(url);
       this.setServiceInterface(RemoteInterface.class);
       this.setHttpInvokerRequestExecutor(new CommonsHttpInvokerRequestExecutor());
            afterPropertiesSet();

     } 

   } 
```

URL 可以在远程调用之间更改。
如何在运行时替换 serviceUrl？
我们不能使用 Session 或 Request 范围，因为该服务不支持 Web。
任何帮助将不胜感激。

最好的问候，迈克尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T06:44:12.667

我不完全清楚如何`DBService`根据您的 http 请求获得正确的，所以我想您知道如何做到这一点。因此，您可以执行以下操作：

1.  编写一个过滤器来获取正确的`DBService`并将其放在 TLS 上。
2.  将`DBService`on`ExampleHttpInvoker`替换为从 TLS`DBServiceWrapper`获取正确`DBService`并调用正确方法的（您的类）。
3.  请求完成后，不要忘记清除过滤器中的 TLS。

# java - GWT 编译器在 IntelliJ IDEA 中找不到依赖模块的来源

> ID：10185057
> 
> 赞同：3
> 
> 时间：2012-04-17T04:28:53.143
> 
> 标签：java, gwt, intellij-idea, requestfactory, gwt-compiler

我正在使用 IDEA 117.216

如果[CrazyCoder](https://stackoverflow.com/users/104891/crazycoder)看到这个问题就好了 :)

你们如何引用另一个模块以便 GWT 编译器看到它？

*当我说**模块**时，我指的是 IntelliJ IDEA 术语中的模块。*

这是我的情况。我有中间项目（GAE + GWT + RequestFactory）。现在我在我的项目中创建了 Android 模块。这个想法是它将使用[C2DM](http://code.google.com/android/c2dm/)并通过 RequestFactory (RF) 与服务器对话。

所以很自然地，我在我的项目中创建了第三个模块，并将所有射频代理和接口移到那里，这样我就可以从 GWT/GAE 模块和 Android 模块中引用它。

Android 模块喜欢它，但 GWT 编译器不喜欢。它找不到我移到“共享”模块的类。给我错误，例如：

```
[ERROR] Errors in 'file:/C:/work/sideprojects/courierapp/src/com/blah/courierApp/client/admin/AdminPage.java'
[ERROR] Line 77: No source code is available for type com.blah.shared.proxies.OrderProxy; did you forget to inherit a required module?
[ERROR] Line 81: No source code is available for type com.blah.shared.factories.AdminRequestFactory; did you forget to inherit a required module? 
```

我需要注意**SharedClasses 模块是作为 GWT 模块的依赖项添加的。**但是 GWT 仍然不知道它的来源在哪里。

在我看来这是**[这个错误](http://youtrack.jetbrains.com/issue/IDEA-80724)**。

你如何解决这个问题？我真的不想有两个编译步骤：首先使用源构建共享类 jar，然后构建引用该 jar 的 GWT 项目等......

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-17T07:22:34.147

它更像是[IDEA-67661](http://youtrack.jetbrains.com/issue/IDEA-67661)，负责的开发人员解释了为什么会这样：

> **IDEA 10 确实包含来自仅具有 GWT 方面**的模块的类路径源根。这可以确保不需要的目录不会添加到类路径中。此外，您还需要在模块中有一个 GWT Facet 以在其中启用特定于 GWT 的完成和检查...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T06:04:35.970

您必须让`.java`文件在模块中。GWT 编译器与它们一起工作，而不是与`.class`文件一起工作。

# javascript - Display table after choose the selected value from dropdownlist (HTML)

> ID：10185065
> 
> 赞同：0
> 
> 时间：2012-04-17T04:30:06.447
> 
> 标签：javascript, html

I need to display a table after the user choose selected value from dropdownlist. I have tried searching at the internet the example of the coding, but I didn't find any. My coding will be like this :

```
<select name="ddlEqu" size="1" tabindex="1" onchange="select(this.value)" id="Equddl_source">
  <option selected value="select"><--Select--></option>
  <option value="D1">T-Shirt</option>
  <option value="D2">Jacket</option>
  <option value="D3">Shoes</option>
</select> 
```

If the user choose T-shirt, list of T-shirt will be display in table form. Like this :

```
ID    |  T-Shirt      | Description    | Price
1     | Mickey Mouse  | Color = Black  | RM 29.90
2     | Camera Shirt  | Color = Pink   | RM 32.50
3     |               |       = White  | 
```

Can Someone help me, please...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T06:22:25.313

我希望您必须在页面加载时加载所有表格。假设您有 3 个隐藏表，分别用于 ID 为 table_D1、table_D2 和 table_D3 的项目 D1、D2 和 D3。如果尚未加载表，那么您可能应该通过[AJAX获取数据](http://api.jquery.com/category/ajax/)

```
$('#Equddl_source').change(function () {
   $('#table_' + this.value).show();       
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T04:42:29.263

如果可以，请使用 jQuery。然后，您可以轻松提取数据或您需要做的任何其他事情。您甚至不需要执行 select(this.value)，只需创建一个名为“ItemSelectedEvent”之类的函数。

```
var id = 0;

//This uses jquery
function ItemSelectedEvent
{
        id++;
    if($(#Equddl_source).val() == "D1") //Might also try for example (.val() == "Jacket")
    {
        $(#TableName).append("<tr><td>" + id + " | " + $(#Equddl_source).val() + " | </td></tr>");
    }
} 
```

这只是一个非常丑陋且快速的示例，只是展示了您可能会看到的内容。你想要的肯定在谷歌上，继续努力。这应该给你一个足够好的跳跃开始。

# python-2.7 - python fabric：防止再次安装已经安装的包

> ID：10185073
> 
> 赞同：0
> 
> 时间：2012-04-17T04:31:02.637
> 
> 标签：python-2.7, fabric

所以编写一个 fabfile 函数，我尝试像这样自动设置特定的 mac os x 机器。

```
from fabric.api import local, env, sudo, require

def mac_port_setup():
    PACKAGES = ['vim +python27', 'htop']
    for item in PACKAGES:
        local('sudo port -v install {0}'.format(item)) 
```

该`PACKAGES`列表实际上可能是一个巨大的列表，如果软件包已经安装，我想避免安装该软件包。有哪些可能的方法可以防止已安装的软件包在我的织物自动化中重新安装？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T08:41:06.930

很确定再次运行安装不会对已安装的软件包执行任何操作。如果要检查第一个端口是否已安装命令来列出已安装的内容。

# javascript - model.destroy() 的问题

> ID：10185075
> 
> 赞同：0
> 
> 时间：2012-04-17T04:31:13.210
> 
> 标签：javascript, backbone.js

每当我使用 Backbone 执行 model.destroy() 时，它都会尝试在以下 URL 上执行 DELETE 请求：

```
http://localhost:8000/api/v1/item/?format=json 
```

由于我正在对模型进行销毁，因此我希望应该传递模型的 ID，因此执行 DELETE 请求的 URL 将是：

```
http://localhost:8000/api/v1/item/8/?format=json 
```

其中指定了 ID。由于缺少 ID，以及我使用了美味的派，所有项目都被删除。如何使 URL 包含我要删除的项目的 ID？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T05:07:56.707

我猜你的模型看起来像这样：

```
var M = Backbone.Model.extend({
    url: '/api/v1/item/?format=json',
    // ...
}); 
```

模型的`url`for 应该是一个函数，但由于它[最终会通过](https://github.com/documentcloud/backbone/blob/master/backbone.js#L1326)内部[`getValue`](https://github.com/documentcloud/backbone/blob/master/backbone.js#L1422)函数，因此字符串也将“工作”；如果您检查我链接到的源，您会明白为什么一个字符串`url`会为您提供您所看到的结果。

解决方案是[`url`](http://documentcloud.github.com/backbone/#Model-url)按照您应该使用的功能：

> **网址** `model.url()`
> 
> 返回模型资源在服务器上的相对 URL。如果您的模型位于其他地方，请使用正确的逻辑覆盖此方法。生成表单的 URL: ，如果模型不是集合的一部分，则`"/[collection.url]/[id]"`回退到。`"/[urlRoot]/id"`

你可能想要这样的东西：

```
url: function() {
    if(this.isNew())
        return '/api/v1/item/?format=json';
    return '/api/v1/item/' + encodeURIComponent(this.id) + '/?format=json';
} 
```

或这个：

```
url: function() {
    if(this.isNew())
        return '/api/v1/item/?format=json';
    return '/api/v1/item/' + encodeURIComponent(this.get('id')) + '/?format=json';
} 
```

# java - Custom tokenizer solr only is invoked at the first

> ID：10185076
> 
> 赞同：4
> 
> 时间：2012-04-17T04:31:20.573
> 
> 标签：java, plugins, solr, lucene, tokenize

I created a custom tokenizer, it seem work fine by checking with admin/analysis.jsp and with system.out log. However when I perform querying in the field which use this custom tokenizer, I saw that custom tokenizer solr only is invoked for the first query string (check by system.out log). Could you help me by point out what I am wrong ?. These are my code:

```
package com.fosp.searchengine;
import java.io.Reader;
import org.apache.lucene.analysis.WhitespaceTokenizer;
import org.apache.solr.analysis.WhitespaceTokenizerFactory;

public class JvnTextProTokenizerFactory extends WhitespaceTokenizerFactory{
    @Override
    public WhitespaceTokenizer create(Reader input) {
        System.out.println("WhitespaceTokenizer create(Reader input)");
        Reader processedStringReader = new ProcessedStringReader(input);
        return new WhitespaceTokenizer(processedStringReader);
    }

}

package com.fosp.searchengine;
import java.io.IOException;
import java.io.Reader;

public class ProcessedStringReader extends java.io.Reader {

    private static final int BUFFER_SIZE = 1024 * 8;
    private static TextProcess m_textProcess = null;
    private char[] m_inputData = null;
    private int m_offset = 0;
    private int m_length = 0;
    public ProcessedStringReader(Reader input){
        char[] arr = new char[BUFFER_SIZE];
        StringBuffer buf = new StringBuffer();
        int numChars;

        try {
            while ((numChars = input.read(arr, 0, arr.length)) > 0) {
                buf.append(arr, 0, numChars);
            }
        } catch (IOException e) {
            e.printStackTrace();
        }
        if(m_textProcess == null){
            try {
                m_textProcess = new TextProcess();
            } catch (IOException e) {
                e.printStackTrace();
            }
        }
        m_inputData = m_textProcess.processText(buf.toString()).toCharArray();
        m_offset = 0;
        m_length = m_inputData.length;
    }

    @Override
    public int read(char[] cbuf, int off, int len) throws IOException {
        int charNumber = 0;
        for(int i = m_offset + off;i<m_length && charNumber< len; i++){
            cbuf[charNumber] = m_inputData[i];
            m_offset ++;
            charNumber++;
        }
        if(charNumber == 0){
            return -1;
        }
        return charNumber;
    }

    @Override
    public void close() throws IOException {
        m_inputData = null;
        m_offset = 0;
        m_length = 0;
    }

} 
```

Schema.xml

```
<fieldType name="text_jvnTextPro" class="solr.TextField" positionIncrementGap="100">
  <analyzer type="index">
        <tokenizer class="com.fosp.searchengine.JvnTextProTokenizerFactory"/>
    <filter class="solr.LowerCaseFilterFactory"/>
  </analyzer>
  <analyzer type="query">
        <tokenizer class="com.fosp.searchengine.JvnTextProTokenizerFactory"/>
    <filter class="solr.LowerCaseFilterFactory"/>       
  </analyzer>
</fieldType> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-24T14:33:08.520

这里没有错。工厂实例化的类被重用。这在分析/管理页面中有所不同。不同之处在于。

# iphone - 从 UIPickerView 获取 NSDate

> ID：10185077
> 
> 赞同：1
> 
> 时间：2012-04-17T04:31:30.397
> 
> 标签：iphone, nsdate, uipickerview

我有一个类似于 iphone 上的闹钟应用程序的选择器视图（第一个组件 = 1-12，第二个组件 = 0-60，第三个组件 = am/pm）。我所做的是在选择器视图的 didSelect 委托中。

```
if (component == PICKER_HOURS) {
        rowSelected = [self.hour objectAtIndex:row % 12];
        self.hourSelected = rowSelected;
    }
    else if (component == PICKER_MINUTES) {
        rowSelected = [self.minutes objectAtIndex:row % 60];
        self.minuteSelected = rowSelected;
    }
    else {
        rowSelected = [self.ampm objectAtIndex:row];
        self.ampmSelected = rowSelected;
    }
    NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
    [dateFormatter setTimeZone:[NSTimeZone systemTimeZone]];
    dateFormatter.dateFormat = @"h:mm a";

    NSString *timeString = [NSString stringWithFormat:@"%@:%@ %@", _hourSelected, _minuteSelected, _ampmSelected];
    NSString *trimmedTimeString = [timeString stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceCharacterSet]];

    NSDate *dateSelected = [dateFormatter dateFromString:timeString];

    NSDate *dateForAlarm = [self alarmDateForDate:dateSelected];

------

- (NSDate *)alarmDateForDate:(NSDate *)dateSelected {
    NSCalendar *calendar = [NSCalendar currentCalendar];
    NSDateComponents *dateComponents = [calendar components:(NSYearCalendarUnit | NSMonthCalendarUnit |  NSDayCalendarUnit)
                                                   fromDate:[NSDate date]];     // set the date to the current date
    NSDateComponents *timeComponents = [calendar components:(NSHourCalendarUnit | NSMinuteCalendarUnit) fromDate:dateSelected];     // set the time to what's in the picker

    NSDateComponents *dateComps = [[NSDateComponents alloc] init];
    [dateComps setDay:[dateComponents day]];
    [dateComps setYear:[dateComponents year]];
    [dateComps setMonth:[dateComponents month]];
    [dateComps setHour:[timeComponents hour]];
    [dateComps setMinute:[timeComponents minute]];

    NSDate *dateForAlarm = [calendar dateFromComponents:dateComps];

    return dateForAlarm;
} 
```

这是正确的方法吗？我意识到我在选择器视图中的 dateFromString 始终是 1970 年的时间。所以我不确定这是否是从选择器视图中获取时间的“标准”方式，以便将来设置通知。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T04:36:34.253

看这个 -

**日期选择器 ：-**

```
m_pDatePicker = [[UIDatePicker alloc] initWithFrame:CGRectMake(0, 40, 50, 50)];
    m_pDatePicker.datePickerMode = UIDatePickerModeDate;
    NSDate *minDate = [NSDate new];
    [m_pDatePicker setMinimumDate:minDate];

    m_pDatePicker.hidden = NO;
    [m_pClientView addSubview:m_pDatePicker];

    [m_pDatePicker addTarget:self action:@selector(pickDateLabel)forControlEvents:UIControlEventValueChanged];

    NSDateComponents* comps = [m_pDatePicker.calendar components:(NSYearCalendarUnit | NSMonthCalendarUnit |  NSDayCalendarUnit)
                                                        fromDate:m_pDatePicker.date];
    int myDay = [comps day];
    int myMonth = [comps month];
    int myYear = [comps year];

    pickDateLabel.text=[NSString stringWithFormat:@"%d/%d/%d",myMonth,myDay,myYear];

    dueDateLabel.text=[NSString stringWithFormat:@"%d/%d/%d",myDay,myMonth,myYear];

    [m_pDatePicker release];
    [minDate release];

} 
```

**采摘日期 -**

```
- (void)pickDateLabel
{

    NSDateComponents* comps = [m_pDatePicker.calendar components:(NSYearCalendarUnit | NSMonthCalendarUnit |  NSDayCalendarUnit)
                                                        fromDate:m_pDatePicker.date];
    int myDay = [comps day];
    int myMonth = [comps month];
    int myYear = [comps year];

    pickDateLabel.text=[NSString stringWithFormat:@"%d/%d/%d",myMonth,myDay,myYear];    

    dueDateLabel.text=[NSString stringWithFormat:@"%d/%d/%d",myDay,myMonth,myYear];

} 
```

希望能帮助到你 ！！

# solr - 在 Solr 中，为什么对索引和查询使用不同的分析器？

> ID：10185079
> 
> 赞同：4
> 
> 时间：2012-04-17T04:31:48.197
> 
> 标签：solr, lucene

为什么要使用不同的分析器进行索引和查询，是否有充分的理由？在示例 schema.xml 文件中，对于 text_en_splitting，例如，索引分析器不进行同义词扩展，但查询进行。这只是为了保持索引尽可能小吗？同样，对于 WordDelimiterFilterFactory，索引分析器有 catenateWords="1" 和 catenateNumbers="1"，而查询分析器将它们设置为 0。这只是为了保持查询小（快）吗？这些优化真的值得两个“几乎相同”的分析仪的维护噩梦吗？

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-17T07:18:46.630

您不需要在索引时和查询时进行同义词扩展，只需要这两者之一。想想看，如果你只在索引时这样做，所有列出的单词都会被它的所有同义词补充。
然后，当您使用这些词中的任何一个查询索引时，您将匹配所有经过扩展的文档。

没有必要在两端扩展。并且建议您在索引时执行此操作，因为这样可以加快查询时间。

恕我直言，一般规则应该是尽可能地芯片（包括在查询时扩展同义词的几毫秒），以使用户体验更好。而且这些筹码会大量堆积。

你可以问同样的问题，为什么我们鼓励文档中的数据冗余。

# c++ - C++ 析构函数继承

> ID：10185089
> 
> 赞同：2
> 
> 时间：2012-04-17T04:32:38.637
> 
> 标签：c++, inheritance, destructor

```
/* Problem 50 */
#include <iostream>
using namespace std;

class a {
    char ach;
  public:
    a(char c) { ach = c - 1; }
    ~a(); // defined below
    virtual void out(ostream &os) {
      if ('m' < ach)
        os << ach << char(ach+7) << char(ach+6) << ' ';
      else
        os << ach << ach << ach;
    }
};

class b: public a {
    char bach;
  public:
    b(char c1, char c2) : a(c1) { bach = c2-1; }
    void out(ostream &os) {
      a::out(os);
      os << ' ' << bach << char(bach + 11);
    }
};

ostream &operator<<(ostream &os, a &x) {
  x.out(os);
  return os;
}

a::~a() {
  cout << *this; // calls above operator
}

int main() {
  b var1('n', 'e');
  a var2('o');
  cout << "Homer says: " << var1 << '\n';
  return 0;
} 
```

我很困惑为什么只有两个对象被破坏而三个对象被构造

我还把`cout`每个构造都放在了`base_class`和上`derived_class`，看看有多少是构造的，我对构造对象的数量是正确的，但是当我做破坏时我错了。

如果有人可以请指出为什么最后一个破坏不适用于正在创建的第一个对象？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-17T04:36:33.930

只构造了两个对象，您在构造函数中看到的 3 个 couts 是因为当您创建派生类对象时，会调用基类构造函数。作为旁注，您需要将`class a`析构函数声明为虚拟的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-17T05:00:57.590

当您在 main 中创建第一个对象时，`b var1('n', 'e');`这意味着该对象将由 b 类构造函数构造`b(char c1, char c2) : a(c1)`，并且您告诉它也使用`class a`构造函数，这意味着在这种情况下您已经调用了 2 个构造函数。最后一个构造函数是针对这个对象`a var2('o');`的，在这种情况下，您使用的是`class a`. 因此，您总共使用了 2 个构造函数`class a`和 1 个构造函数`class b`。你有 2 个对象，你看到 2 个对象被破坏的原因是因为你有一个`~a()`但你没有`~b().`

希望这会有所帮助

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-17T04:37:43.537

如果在嵌套中创建了多个对象，那么它们将以与创建它们的方式相反的方式被销毁.. 示例.. 如果首先创建 class1 对象，然后在这个 class2 内部，然后在该 class3 内部.. 那么 class 3 对象将首先被销毁等等......所以试着看看你的流程是否正确......

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-17T04:43:44.927

我看到 main() 函数中只构造了两个对象。一个是 var1，另一个是 var2。虽然对象是通过引用传递的，所以不会构造任何对象的副本。所以你应该只看到 2 个对象。由于其中一个对象是派生类，因此很自然地会看到派生类和基类构造函数的构造函数打印语句。您还没有为派生类定义析构函数，因此它没有打印它。我认为您将打印语句的数量误读为对象的数量，对于派生类而言并非如此。对于 calrity，还要在构造函数和析构函数的所有打印语句中打印“this”的地址。查看地址并确认只有两个对象。

# haskell - 在haskell中安装依赖

> ID：10185095
> 
> 赞同：9
> 
> 时间：2012-04-17T04:33:35.327
> 
> 标签：haskell, cabal

我试图在我的 Mac中安装[cabal-dev 。](https://github.com/creswick/cabal-dev#readme)cloing 后，我尝试运行 ./bin/build。获取此错误消息。

```
cabal: cannot configure cabal-dev-0.9.1\. It requires MonadRandom ==0.1.*, tar
==0.3.*, test-framework >=0.3 && <0.6 and test-framework-hunit >=0.2
There is no available version of MonadRandom that satisfies ==0.1.*
There is no available version of tar that satisfies ==0.3.*
There is no available version of test-framework that satisfies >=0.3 && <0.6
There is no available version of test-framework-hunit that satisfies >=0.2 
```

这有什么问题？如何在 Haskell 中安装依赖文件？[我从Haskell 平台](http://hackage.haskell.org/platform/)下载并安装。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-17T04:41:32.273

您不必使用该构建脚本；你可以通过运行来安装 cabal-dev `cabal install cabal-dev`，它会自动下载并安装 cabal-dev 及其依赖项。

但如果你确实想使用它，请先尝试`cabal install --only-dependencies`cabal-dev 的源目录（其中包含`cabal-dev.cabal`的那个）。该脚本的目的是避免安装到全局和用户包数据库中——基本上，它使用与 cabal-dev 本身相同的沙盒。这可能不值得付出努力，因为 cabal-dev 像其他所有程序一样安装得很好。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-17T04:41:21.937

发出命令`cabal install cabal-dev`。假设您拥有标准的 cabal dist，它将为您解决依赖关系。

# heroku - 如何将项目文件夹与 Heroku 应用程序相关联

> ID：10185096
> 
> 赞同：1
> 
> 时间：2012-04-17T04:33:39.467
> 
> 标签：heroku, command-line-interface

在我的一些 heroku 文件夹中，如果我输入“heroku 日志”之类的内容，它会说我必须使用 --app 选项来指定我正在谈论的应用程序。但在某些文件夹中，我只需键入“heroku 日志”，它就会自动知道。

它是怎么知道的？如何将文件夹与应用程序关联？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T12:17:39.657

我相信如果您拥有多个 Heroku 遥控器，就会发生这种情况。您可能有一个用于您的开发环境，另一个用于您的生产环境。跑去`git remote -v`一探究竟。

在这种情况下，heroku 命令无法知道您要使用命令询问哪个应用程序，这就是它询问您的原因。

在这些情况下，您可以明确告诉它默认。

假设你有这个：

```
$ git remote -v
prod            git@heroku.work:enter.git (fetch)
prod            git@heroku.work:enter.git (push)
staging         git@heroku.work:enter-staging.git (push)
staging         git@heroku.work:enter-staging.git (fetch) 
```

然后要设为`staging`默认值，您可以这样做：

```
$ git config heroku.remote staging 
```

# javascript - ASP.NET-args.Value 的类型是什么

> ID：10185098
> 
> 赞同：1
> 
> 时间：2012-04-17T04:33:53.930
> 
> 标签：javascript, asp.net, validation

自定义验证器具有称为 ClientValidationFunction 和 ControlToValidate 的属性。函数是这样的：

```
function MyValidationFunction(source,args) {
   if(args.Value==......)
} 
```

我知道这里的“*源*”是 ControlToValidate。但我不明白 args.Value 的类型是什么。什么是价值。当 controltovalidate 是一个文本框时，我知道它是该文本框的文本，但如果该控件是用户控件，它是什么。所以我的问题是要验证的价值是什么，我们可以改变它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T05:46:18.043

参考：[ASP.NET 深度验证](http://msdn.microsoft.com/en-us/library/aa479045.aspx#aspplusvalid_clientside)

> 两个参数被传递到您的客户端函数，对应于传递给服务器函数的参数。第一个是客户端验证器元素，第二个等效于服务器上的参数。它有两个属性，Value 包含要验证的输入和 IsValid，您可以对其进行更新以指示有效性。

```
function CheckEven(source, args) {
    var val = parseInt(args.Value, 10);
    if (isNaN(val)) {
        args.IsValid = false;
    }
    else {
        args.IsValid = ((val % 2) == 0);
    }
} 
```

您不能更改值，它是只读的。检查[erverValidateEventArgs.Value 属性](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.servervalidateeventargs.value.aspx) 并[使用 CustomValidator 控件](http://www.4guysfromrolla.com/articles/073102-1.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T05:39:16.567

显然，对于客户端验证，使用了呈现的 HTML 控件的属性，例如，对于呈现为简单的控件（并且其[value](http://www.w3.org/TR/DOM-Level-2-HTML/html.html#ID-49531485)属性包含文本框的内容）`Value`，这是有意义的。如果（自定义）控件由多个 HTML 控件组成，则客户端验证不可行，根据以下知识库文章：`TextBox``<input type="text">`

*   [如何使用 Visual Basic .NET 或 Visual Basic 2005 扩展 Web 窗体控件以使用验证控件](http://support.microsoft.com/kb/310082)：

> **注意：**本文演示了如何扩展日历控件仅用于服务器端验证。为了进行客户端验证，验证控件连接到相应的 HTML 控件的**Value**属性。因为许多 HTML 控件用于构建日历控件，所以没有一个 HTML 控件包含日历控件的选定值。因此，客户端验证不适用于 Calendar 控件。

顺便说一句，对于*服务器端验证*，您可以使用[`ValidationProperty`](http://msdn.microsoft.com/en-us/library/system.web.ui.validationpropertyattribute.aspx)属性来指定使用哪个属性进行验证。

* * *

**编辑**：根据[这个 SO question](https://stackoverflow.com/questions/1383570/validate-web-user-control)，如果您输出 an`<input type="hidden">`作为用户控件的第一个控件，这将用于客户端验证。如果您愿意在其中存储实际控制值，这可能是一个有用的解决方法。

# apache - 如何配置 Apache2.2 设置 HttpOnly 和 Secure 参数？

> ID：10185101
> 
> 赞同：0
> 
> 时间：2012-04-17T04:34:42.800
> 
> 标签：apache, tomcat, web-applications, webserver, apache-config

有没有办法直接配置 apache (httpd.conf) 来设置 HttpOnly 和 Secure 参数.. 或者它必须以编程方式完成.. 我使用的是 Windows 7

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T04:36:26.520

您还必须为 https 事物添加 mod_jk

更新检查这篇文章：

[http://beeznest.wordpress.com/2008/04/25/how-to-configure-https-on-apache-2/](http://beeznest.wordpress.com/2008/04/25/how-to-configure-https-on-apache-2/)

让我知道这是否有帮助。

# java - 当我解密时，我没有得到正确的明文

> ID：10185103
> 
> 赞同：0
> 
> 时间：2012-04-17T04:35:08.897
> 
> 标签：java, encryption

```
 import java.security.Key;
    import java.security.MessageDigest;
    import java.security.NoSuchAlgorithmException;
    import java.security.SecureRandom;
    import java.security.Security;
    import java.util.Arrays;
    import javax.crypto.Cipher;
    import javax.crypto.KeyGenerator;
    import javax.crypto.SecretKey;
    import javax.crypto.spec.IvParameterSpec;
    import javax.crypto.spec.SecretKeySpec;
    import java.security.MessageDigest;

 public class SHAhashingexample 
    {
        public static void main(String[] args)throws Exception
        {
            Security.addProvider(new org.bouncycastle.jce.provider.BouncyCastleProvider());
            String usernametohash = "123456";
            String salt="salty food";
            String userdata="hello how are you!";
            MessageDigest md = MessageDigest.getInstance("SHA-256");
            md.update((usernametohash+salt).getBytes());
            byte byteData[] = md.digest();
            System.out.println("Digested value : " + byteData);
            StringBuffer sb = new StringBuffer();
            for (int i = 0; i < byteData.length; i++) 
            {
             sb.append(Integer.toString((byteData[i] & 0xff) + 0x100, 16).substring(1));
            }
             System.out.println("Hash code value of username : " + sb);
               byte[] actualkey=sb.toString().getBytes();
             byte[] first_key = Arrays.copyOf(actualkey, 16);
            Key key = new SecretKeySpec(first_key, "AES");
            System.out.println("Derived AES key is "+key.toString());
            SecureRandom random = new SecureRandom();
            IvParameterSpec ivSpec = createCtrIvForAES(1, random);
            Cipher cipher = Cipher.getInstance("AES/CTR/NoPadding", "BC");
            cipher.init(Cipher.ENCRYPT_MODE, key, ivSpec);
            byte[] cipherText = cipher.doFinal(userdata.getBytes()); 
            System.out.println("ciphertext is : " + cipherText);
            cipher.init(Cipher.DECRYPT_MODE, key, ivSpec);
            byte[] plainText = cipher.doFinal(cipherText)  ; 
            System.out.println("plaintext is : " + plainText);

          }

        public static IvParameterSpec createCtrIvForAES(int messageNumber, SecureRandom random)
        {
            byte[] ivBytes = new byte[16];
            random.nextBytes(ivBytes);
           for (int i = 0; i < 16; i++)
           {
              ivBytes[i] = 0;
            }
          return new IvParameterSpec(ivBytes);
          }
    } 
```

我的意图是从用户名哈希和硬编码随机数采用算法 SHA-256 和 AES CTR 模式导出 aes 128 位密钥。想要使用 SHA-256 算法生成用户名哈希。我觉得我们需要 IV 与 CTR 模式一起使用，什么应该是我刚刚猜测的初始化向量的值全为零...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T20:06:35.217

您在这里做错了很多事情，但您的实际问题是您忘记使用`new String(plainText)`.

包括密钥推导在内的一切都不是很好。尝试找到一些使用 PBKDF2 的 Java 示例（这个站点上应该有很多），并尝试理解 Java 中的（字符）编码。

# javascript - 我可以将 .show() 或 .hide() 与 switch 1/0 一起使用而不是 If 语句吗

> ID：10185105
> 
> 赞同：3
> 
> 时间：2012-04-17T04:35:17.903
> 
> 标签：javascript, jquery

我只是想知道是否可以在 jQuery 中做这样的事情：

```
$('#MyDiv').show((MyVar==2?1:0)); // 1=show, 0=hide. 
```

否则我不得不到处这样写。

```
if(MyVar==2?1:0){$('#MyVar').show();}else{$('#MyVar').hide();} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-17T04:37:10.293

[`.toggle(boolean value)`](http://api.jquery.com/toggle/#toggle-showOrHide)自 jQuery 1.3 以来有一个内置函数：

```
$('#MyDiv').toggle(MyVar === 2); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T04:39:02.617

考虑到 .show() 的手册说它不需要参数，我相信你必须用第二种方法。

我会推荐类似的东西`if (MyVal==2) { $('#MyVar').show(); } else { $('#MyVar').hide(); }`。这 ？if 中不需要运算符，因为 MyVal==2 已经计算为真 (1) 或假 (0)。此外，在代码中添加空格将大大提高您的可读性，并且您稍后会在尝试调试时感谢自己。

编辑：大声笑忘记了切换方法......这也有效。

# ios - 切换按钮图像

> ID：10185106
> 
> 赞同：0
> 
> 时间：2012-04-17T04:35:18.087
> 
> 标签：ios, ios4, checkbox, uiimage

在我实现了为按钮提供检查图像的代码后，但我想为没有按钮提供检查图像。

注意：如果我单击一个按钮检查图像可以显示，同时我单击另一个按钮检查图像显示在该特定按钮上，并且前一个按钮处于正常位置。

我在这里像这样实现单个按钮的代码。

```
-(void) setChecked:(BOOL) check 

{

_checked = check;

if( _checked )

{
    UIImage* img = [UIImage imageNamed:@"btn_check_on.png"];

[self setImage:img forState:UIControlStateNormal];

   }
    else

{

    UIImage* img = [UIImage imageNamed:@"bread_Wheat_rectangle.png"];

    [self setImage:img forState:UIControlStateNormal];

}

} 
```

上面的代码执行成功但是如何使用这个代码没有按钮。

请就我的问题提出任何教程

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T04:45:58.773

这就是我为一个按钮实现它的方式。您也可以将其用于更多按钮。

```
-(IBAction)ButtonAction
{

    if (Flag==0) 
    {
        Flag=1;
        [myButton setImage:[UIImage imageNamed:@"checkbox-filled.png"] forState:UIControlStateNormal];  

    }
    else
    {
        [myButton setImage:[UIImage imageNamed:@"checkbox.png"] forState:UIControlStateNormal];
       Flag=0;

    }
} 
```

**注意：如果您只想选中一个按钮，只需将所有其他按钮图像设置为 checkbox.png 和选中的 checkbox-filled.png。**

**编辑**

您可以为复选框创建一个类，然后使用它。这是代码...

检查按钮.h

```
#import <Foundation/Foundation.h>

@interface CheckButton : UIButton {
    BOOL        _checked;
    int chkButtonClickVal;
}

@property (nonatomic, setter=setChecked:) BOOL checked;

-(void) setChecked:(BOOL) check;
-(int)chkButtonClickVal;
@end 
```

检查按钮.m

```
#import "CheckButton.h"

@implementation CheckButton
@synthesize checked = _checked;

-(id) init
{
    if( self=[super init] )
    {
        chkButtonClickVal=0;
        self.checked = NO;
        [self addTarget:self action:@selector(OnCheck:) forControlEvents:UIControlEventTouchUpInside];
    }
    return self;
}

-(void) awakeFromNib
{
    self.checked = NO;
    [self addTarget:self action:@selector(OnCheck:) forControlEvents:UIControlEventTouchUpInside];
}

-(void) dealloc
{
    chkButtonClickVal=0;
    [super dealloc];
}

-(void) setChecked:(BOOL) check 
{
    _checked = check;
    if( _checked )
    {
        UIImage* img = [UIImage imageNamed:@"checkbox-checked.png"];
        [self setImage:img forState:UIControlStateNormal];
        chkButtonClickVal=1;

    }
    else
    {
        UIImage* img = [UIImage imageNamed:@"checkbox.png"];
        [self setImage:img forState:UIControlStateNormal];
        chkButtonClickVal=2;
    }
    //NSLog(@"%d",chkButtonClickVal);
}

-(int)chkButtonClickVal
{
    return chkButtonClickVal;   
}

-(void) OnCheck:(id) sender
{
    self.checked = !_checked;
}

@end 
```

我以同样的方式做到了。试试你就能实现它。祝你好运 ：）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T08:54:24.073

经过长时间练习这个问题，我们可以使用 switch case 它可以很容易地完成

```
switch (currenttagvalue) {
    case 1:
        [level1 setImage:[UIImage imageNamed:@"one_time_selected.png"] forState:UIControlStateNormal];  
        [level2 setImage:[UIImage imageNamed:@"ic_launcher.png"] forState:UIControlStateNormal];
        [level3 setImage:[UIImage imageNamed:@"bread_sourdough_rectangle.png"] forState:UIControlStateNormal];

        } 
```

在这个级别是“IBOutlet UIButton level1;”

然后我实现了更多按钮

# node.js - Key generation requirements for TLS ECDHE-ECDSA-AES128-GCM-SHA256

> ID：10185110
> 
> 赞同：10
> 
> 时间：2012-04-17T04:36:15.210
> 
> 标签：node.js, cryptography, openssl

I was wondering if there are minimum key-generation requirements for ECDHE-ECDSA-AES128-GCM-SHA256 and ECDHE-ECDSA-AES128-GCM-SHA256? I am trying to get a TLS client and server using one of the above algorithms to connect to each other and keep receiving 'no shared cipher errors'. I created a CA for signing client and server certs, and attempted connecting with just openssl and also in node.js. I am running the client and server on localhost (127.0.0.1) to eliminate any other possible problems.

Here is what I have done so far:

CA key pair creation:

```
 $ openssl genrsa -out ca-key.pem 4096
  $ openssl req -new -x509 -days 365 -key ca-key.pem -out ca-cert.pem 
```

Server / client key pair creation:

```
 $ openssl genrsa -out server-key.pem 4096
  $ openssl req -new -key server-key.pem -out server-csr.pem
  $ openssl x509 -req -days 365 -in server-csr.pem -CA ca-cert.pem -CAkey ca-key.pem -set_serial 01 -out server-cert.pem 

  $ openssl genrsa -out client-key.pem 4096
  $ openssl req -new -key client-key.pem -out client-csr.pem
  $ openssl x509 -req -days 365 -in client-csr.pem -CA ca-cert.pem -CAkey ca-key.pem -set_serial 02 -out client-cert.pem 
```

I was originally attempting to connect to a node.js server from the command line (tls.createServer() with options: ciphers: 'ECDHE-ECDSA-AES256-GCM-SHA384:ECDHE-ECDSA-AES128-GCM-SHA256'), but to eliminate node suspicion I fell back to openssl for both client and server creation.

The following commands CORRECTLY connect for client and server and states it is using a cipher of "New, TLSv1/SSLv3, Cipher is ECDHE-RSA-AES256-GCM-SHA384":

```
$ openssl s_server -accept 8888 -cert server-cert.pem -key server-key.pem -pass stdin -CAfile ca-cert.pem  -state
<password entered here>

$ openssl s_client -connect 127.0.0.1:8888 -cert client-cert.pem -key client-key.pem -pass stdin -CAfile ca-cert.pem -state
<password entered here> 
```

With the shared cipher information as follows:

```
Shared ciphers:ECDHE-RSA-AES256-GCM-SHA384:ECDHE-ECDSA-AES256-GCM-SHA384:ECDHE-R
SA-AES256-SHA384:ECDHE-ECDSA-AES256-SHA384:ECDHE-RSA-AES256-SHA:ECDHE-ECDSA-AES2
56-SHA:SRP-DSS-AES-256-CBC-SHA:SRP-RSA-AES-256-CBC-SHA:DHE-DSS-AES256-GCM-SHA384
:DHE-RSA-AES256-GCM-SHA384:DHE-RSA-AES256-SHA256:DHE-DSS-AES256-SHA256:DHE-RSA-A
ES256-SHA:DHE-DSS-AES256-SHA:DHE-RSA-CAMELLIA256-SHA:DHE-DSS-CAMELLIA256-SHA:ECD
H-RSA-AES256-GCM-SHA384:ECDH-ECDSA-AES256-GCM-SHA384:ECDH-RSA-AES256-SHA384:ECDH
-ECDSA-AES256-SHA384:ECDH-RSA-AES256-SHA:ECDH-ECDSA-AES256-SHA:AES256-GCM-SHA384
:AES256-SHA256:AES256-SHA:CAMELLIA256-SHA:ECDHE-RSA-DES-CBC3-SHA:ECDHE-ECDSA-DES
-CBC3-SHA:SRP-DSS-3DES-EDE-CBC-SHA:SRP-RSA-3DES-EDE-CBC-SHA:EDH-RSA-DES-CBC3-SHA
:EDH-DSS-DES-CBC3-SHA:ECDH-RSA-DES-CBC3-SHA:ECDH-ECDSA-DES-CBC3-SHA:DES-CBC3-SHA
:ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-SHA2
56:ECDHE-ECDSA-AES128-SHA256:ECDHE-RSA-AES128-SHA:ECDHE-ECDSA-AES128-SHA:SRP-DSS
-AES-128-CBC-SHA:SRP-RSA-AES-128-CBC-SHA:DHE-DSS-AES128-GCM-SHA256 
```

The following commands do NOT work when I specify a cipher on the server, or the client and server. Note that the ECDHE-ECDSA-AES128-GCM-SHA256 cipher is listed as shared in the above list.

```
$ openssl s_server -accept 8888 -cert server-cert.pem -key server-key.pem -pass stdin -CAfile ca-cert.pem -cipher ECDHE-ECDSA-AES128-GCM-SHA256
<password entered here>

<< Server output after client connection attempt >>
Using default temp DH parameters
Using default temp ECDH parameters
ACCEPT
ERROR
2674688:error:1408A0C1:SSL routines:SSL3_GET_CLIENT_HELLO:no shared cipher:s3_srvr.c:1353:
shutting down SSL
CONNECTION CLOSED
ACCEPT

$ openssl s_client -connect 127.0.0.1:8888 -cert client-cert.pem -key client-key.pem -pass stdin -CAfile ca-cert.pem -cipher ECDHE-ECDSA-AES128-GCM-SHA256
<password entered here>

<<client output after connection attempt>>
CONNECTED(00000003)
2674688:error:14077410:SSL routines:SSL23_GET_SERVER_HELLO:sslv3 alert handshake failure:s23_clnt.c:708:
---
no peer certificate available
---
No client certificate CA names sent
---
SSL handshake has read 7 bytes and written 166 bytes
---
New, (NONE), Cipher is (NONE)
Secure Renegotiation IS NOT supported
Compression: NONE
Expansion: NONE
--- 
```

Does anyone have any ideas? Thanks in advance!

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-17T05:59:14.267

You are making the wrong kind of key with

```
 openssl genrsa -out ca-key.pem 4096 
```

You need to use [ecparam](http://www.openssl.org/docs/apps/ecparam.html)

```
openssl ecparam -name secp521r1 -out ca-key.pem -genkey 
```

and

```
openssl ecparam -name secp521r1 -out client-key.pem -genkey 
```

`genrsa` generates an RSA key that, when used with ECDHE, authenticates the Elliptic Curve Diffie Hellman key Exchange (ECDHE).

The ECDSA in ECDHE-ECDSA-AES128-GCM-SHA256 means you need the Elliptic Curve Digital Signature Algorithm to authenticate that key. Because you don't have those kind of keys, the command fails. However, ECDHE-RSA-AES256-GCM-SHA384 works because it uses RSA keys which you have.

You are getting sha384 because openssl picks the strongest cipher suite and all things being equal sha384 is better than sha256\. You can override this, and it looks like you did so with `--cipher`.

Note you may want to use a different curve. You can get the full list with

```
openssl ecparam -list_curves 
```

Out of curiosity, why that specific cipher suite? ECDHE and ECDSA are state of the art, but sha256 is just standard, and well AES 128 is certainly good enough, people tend to use 256 if they are being as cautious as the ECDHE and ECDSA stuff implies.

# powershell - 在powershell中创建带有空格的路径数组

> ID：10185114
> 
> 赞同：1
> 
> 时间：2012-04-17T04:36:38.997
> 
> 标签：powershell

我正在尝试定义一个文件路径数组，我可以循环并应用用户权限。其中一些路径中有空格，我试图定义数组变量的方式，我不能循环它们。

```
$rootSitePath = "C:\Path"

$paths = $rootSitePath + "\" + "Path1",
         $rootSitePath + "\" + "Path with spaces",
         $rootSitePath = "\" + "Path3"

foreach($path in $paths)
{
   #do stuff
} 
```

不确定我是否需要以某种方式逃跑？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T04:45:13.620

不，您不需要做任何特别的事情 - 但您确实需要在数组项周围加上括号，就像您在上面一样。尝试：

```
$rootSitePath = "C:\Path"

$paths = ($rootSitePath + "\" + "Path1"),
         ($rootSitePath + "\" + "Path with spaces"),
         ($rootSitePath + "\" + "Path3")

foreach($path in $paths)
{
   get-childitem $path
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T05:20:12.147

数组`,`运算符的优先级高于`+`连接运算符。

因此，如果您执行类似（简化示例）的操作：

```
$paths = $rootSitePath+"\"+"Path1","path2" 
```

`$paths`将是一个字符串，因为它对`$rootSitePath\`and `Path1 path2`(string representation of the array `"Path1", "path2"`) 进行了字符串连接。所以你不得不说，前面的第一部分`,`是第一个元素：

```
$paths = ($rootSitePath+"\"+"Path1"),"path2" 
```

因此，要解决您的问题，请将每个元素括在括号中。除此之外，您没有遇到问题，因为您的路径中有空格。

# c# - C# & XML - 对象引用未设置为对象的实例

> ID：10185115
> 
> 赞同：0
> 
> 时间：2012-04-17T04:36:40.587
> 
> 标签：c#, asp.net, xml, visual-studio-2010

晚上好 StackOverFlowers，
我最近开始通过 Visual Studio 2010 使用 XML 进行编码。我遇到了一个看似简单的解决方案，但该解决方案却让我无法理解。我收到未设置对象引用的错误，但我没有看到我尚未设置的内容。（这里的错误：http: [//i.imgur.com/CVaxY.png](http://i.imgur.com/CVaxY.png)）

我的代码隐藏：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Xml;

public partial class _Default : System.Web.UI.Page
  {
    int intDVDID;
    XmlDocument myXmlDocument = new XmlDocument();
    XmlNode rootNode;
    XmlNode selectedDVD;

public void Page_Load(object Src, EventArgs E)
{
    intDVDID = Convert.ToInt32(Request.QueryString["id"]);

    myXmlDocument.Load(Request.PhysicalApplicationPath + @"dvd.xml");
    rootNode = myXmlDocument.DocumentElement;
    selectedDVD = rootNode.ChildNodes[intDVDID - 1];
    if (!Page.IsPostBack)
    {
        rootNode.RemoveChild(selectedDVD);
        myXmlDocument.Save(Request.PhysicalApplicationPath + @"dvd.xml");
        lblMessage.Text = "You have successfully deleted the DVD";
    }
  }
} 
```

只是说一句：

```
 int intDVDID = new intDVDID 
```

我知道通过阅读这篇文章，你们都会因为我缺乏经验和不了解如何解决这个问题而大发雷霆，但我感谢你们的时间和耐心。

最好的问候，劳拉：）

编辑：这是我的 XML：

```
<?xml version="1.0" encoding="utf-8" ?>
<!-- This XML document describes a DVD library -->
<library>
  <DVD id="1">
    <title>Breakfast at Tiffany's</title>
    <format>Movie</format>
    <genre>Classic</genre>
  </DVD>
  <DVD id="2">
    <title>Contact</title>
    <format>Movie</format>
    <genre>Science fiction</genre>
  </DVD>
  <DVD id="3">
    <title>Little Britain</title>
    <format>TV Series</format>
    <genre>Comedy</genre>
  </DVD>
</library> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T04:45:08.107

看起来您选择的DVD 可能为空，请进行一些空检查以进行验证。

```
if(selectedDVD != null)
{
} 
```

编辑：在评论中回答您的问题。这是一些示例代码。我投入了一个 xpath，即使您的情况看起来很简单，您将来可能想使用它

```
string xml = "<xml><node id='1'></node><node id='2'></node></xml>";

XmlDocument xmlDoc = new XmlDocument();
xmlDoc.LoadXml(xml);           

//This is an xpath(This replaces your .DocumentElement.ChildNodes[index]
XmlNode desiredNode = xmlDoc.DocumentElement.SelectSingleNode("node[@id='1']");
if (desiredNode != null)
{
    xmlDoc.DocumentElement.RemoveChild(desiredNode);
}//if 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T05:03:02.667

请确保您的查询字符串不为空，这可能会导致您得到空引用异常。

```
if(Request.QueryString["id"]!="")
{
    intDVDID = Convert.ToInt32(Request.QueryString["id"]);
} 
```

# asp.net - UpdatePanel 刷新但不是类型=“按钮

> ID：10185116
> 
> 赞同：1
> 
> 时间：2012-04-17T04:36:44.547
> 
> 标签：asp.net, html, updatepanel

我的 ASP.NET 应用程序中有一个 UpdatePanel 控件（实际上有几个，但这不是问题）。

```
<asp:UpdatePanel ID="UpdatePanelDetail" runat="server" UpdateMode="Conditional">
<ContentTemplate>
...More code here 
```

在面板内部，存在一个`asp:Table`对象：

```
<asp:Table ID="tblGIFs" runat="server"></asp:table> 
```

该表是通过代码隐藏中的一些代码以编程方式生成的：

```
TableRow htr = new TableRow();
TableCell htc = new TableCell();
...<snip>
tblGIFs.Rows.Add(htr) 
```

这一切都很好，除了在其中一个单元格中我试图添加一个按钮（带有图像）：

```
htc3.Text = "<input ID=\""+ii.Value+"\" OnClick = \"btnGIFSearch(this)\" type=\"image\" value=\"/Image/Fiu.png\" />"; 
```

单击此图像时，可以`onclick`正常触发，但会刷新整个图像`UpdatePanel`（因此会`asp:Table`消失）。

如果我使用 a `type="button"`，它完全可以正常工作，并且刷新/丢失表格中的内容没有问题。

我已经在我从代码隐藏中触摸表格的每个位置都运行了带有断点的页面，但无济于事，我真的看不到任何可能导致`UpdatePanel`以编程方式清除的内容。

任何人都看到这些标签/控件的类似行为以及解决方案的任何想法？一种解决方法显然是使用`type=button`按钮并对其进行样式设置，但如果我能正确行事，我宁愿不这样做`type=image`。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-17T04:43:30.813

输入类型“图像”就像一个提交按钮。它正在提交表单，因为这就是他们所做的。如果您的代码隐藏在您不期望的回发的情况下没有重建表，则表将不会重建，因此会消失（请记住，每当您动态构建控件时，您必须在每次请求时都这样做）。如果您不希望按钮回发，请让您的 OnClick 处理程序返回 false 以取消发布。如果您确实希望按钮回发，那么您有一个不同的问题，可能与不正确地使用动态控件有关。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T03:19:41.747

解决了动态创建的控件。

# c# - C# 将屏幕捕获到 8 位（256 色）位图

> ID：10185120
> 
> 赞同：2
> 
> 时间：2012-04-17T04:37:14.540
> 
> 标签：c#, .net, graphics, bitmap, screen-capture

我正在使用此代码来捕获屏幕：

```
public Bitmap CaptureWindow(IntPtr handle)
{
    // get te hDC of the target window
    IntPtr hdcSrc = User32.GetWindowDC(handle);
    // get the size
    User32.RECT windowRect = new User32.RECT();
    User32.GetWindowRect(handle, ref windowRect);
    int width = windowRect.right - windowRect.left;
    int height = windowRect.bottom - windowRect.top;
    // create a device context we can copy to
    IntPtr hdcDest = GDI32.CreateCompatibleDC(hdcSrc);
    // create a bitmap we can copy it to,
    // using GetDeviceCaps to get the width/height
    IntPtr hBitmap = GDI32.CreateCompatibleBitmap(hdcSrc, width, height);
    // select the bitmap object
    IntPtr hOld = GDI32.SelectObject(hdcDest, hBitmap);
    // bitblt over
    GDI32.BitBlt(hdcDest, 0, 0, width, height, hdcSrc, 0, 0, GDI32.SRCCOPY);
    // restore selection
    GDI32.SelectObject(hdcDest, hOld);
    // clean up 
    GDI32.DeleteDC(hdcDest);
    User32.ReleaseDC(handle, hdcSrc);
    // get a .NET image object for it
    Bitmap img = Image.FromHbitmap(hBitmap);
    // free up the Bitmap object
    GDI32.DeleteObject(hBitmap);
    return img;
} 
```

然后我想将位图转换为 256 色（8 位）。我尝试了此代码，但收到有关无法从索引位图格式创建图像的错误：

```
Bitmap img8bit = new Bitmap(img.Width,img.Height,
                           System.Drawing.Imaging.PixelFormat.Format8bppIndexed);
Graphics g = Graphics.FromImage(img8bit);
g.DrawImage(img,new Point(0,0)); 
```

我确实看到了一些在不同格式之间转换位图的示例，但就我而言，我正在寻找从屏幕捕获时执行此操作的最佳方法。例如，如果有一种方法可以通过创建一个 8 位位图来更好地工作，然后将屏幕blit 到那个位置，那将比先将屏幕捕获到可兼容位图然后转换它更可取。除非最好捕获然后转换。

我有一个使用 Borland Builder 6.0 VCL 用 C++ 编写的程序，我正在尝试模仿它。在这种情况下，只需为 VCL 的 TBitmap 对象设置像素格式即可。我注意到 Bitmap.PixelFormat 在 .NET 中是只读的，呃。

**更新：**就我而言，我认为答案不像其他需要找出最佳调色板条目的用法那样复杂，因为使用屏幕 DC 的 Graphics.GetHalftonePalette 应该没问题，因为我的原始位图来自屏幕，而不是只是可能来自文件/电子邮件/下载/等的任何随机位图。我相信有些事情可以用涉及 DIB 和 GetHalftonePalette 的 20 行代码来完成——只是还没有找到。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-17T05:07:57.330

将全彩色位图转换为 8bpp 是一项困难的操作。它需要创建图像中所有颜色的直方图，并创建一个调色板，其中包含一组优化的颜色，可以最好地映射到原始颜色。然后使用抖动或误差扩散等技术来替换颜色与调色板不完全匹配的像素。

这最好留给专业的图形库，比如 ImageTools。在 .NET 框架中有一种廉价的方法可以被欺骗。您可以使用 GIF 编码器，这是一种具有 256 色的文件格式。结果不是最好的，它使用抖动，有时很明显。再说一次，如果您真的关心图像质量，那么无论如何您都不会使用 8bpp。

```
 public static Bitmap ConvertTo8bpp(Image img) {
        var ms = new System.IO.MemoryStream();   // Don't use using!!!
        img.Save(ms, System.Drawing.Imaging.ImageFormat.Gif);
        ms.Position = 0;
        return new Bitmap(ms);
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-01-09T20:26:54.630

使用常规 PixelFormat 捕获屏幕，然后使用 Bitmap.Clone() 将其转换为优化的 256 索引颜色，如下所示：

```
public static Bitmap CaptureScreen256()
{
    Rectangle bounds = SystemInformation.VirtualScreen;

    using (Bitmap Temp = new Bitmap(bounds.Width, bounds.Height, PixelFormat.Format24bppRgb))
    {
        using (Graphics g = Graphics.FromImage(Temp))
        {
            g.CopyFromScreen(0, 0, 0, 0, Temp.Size);
        }

        return Temp.Clone(new Rectangle(0, 0, bounds.Width, bounds.Height), PixelFormat.Format8bppIndexed);
    }
} 
```

# xcode - 创建和链接私有 Umbrella 框架

> ID：10185125
> 
> 赞同：2
> 
> 时间：2012-04-17T04:37:36.713
> 
> 标签：xcode, cocoa, frameworks

我正在尝试创建一个私有伞形框架，并且在将伞形框架与我的应用程序链接时遇到了一些链接问题。

`SUB`是子框架，`Wrapper`是我的伞形框架。

我能够毫无问题地创建伞式框架。但是当我尝试将这个伞式框架与我的测试应用程序链接时，它给出了以下链接器错误：

```
ld: file not found: @executable_path/../Frameworks/SUB.framework/Versions/A/SUB for architecture x86_64
Command /Developer/usr/bin/clang failed with exit code 1 
```

的安装路径`Wrapper.framework`是`@loader_path/../Frameworks`. 我只想将`Wrapper`框架分发为私有框架，而不是其中的`SUB`框架。任何线索我可能会错过什么？

# javascript - 如何在隐藏字段中添加和删除复选框值

> ID：10185127
> 
> 赞同：0
> 
> 时间：2012-04-17T04:37:52.677
> 
> 标签：javascript, jquery, asp.net-mvc-3

我正在尝试将选定的复选框值附加到隐藏字段。但我现在只成功地添加了一个复选框值。

无论如何要在隐藏字段中附加选定的复选框值。

```
 function CheckBox_Clicked(item) {

        if (item.checked == true) {

            $('#Chkboxvalue').val($(item).val());

        }
    } 
```

我不知道我是否可以在这里使用 jquery append 函数。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T04:47:49.010

请使用下面的javascript

```
function CallOnEachCheckBoxChangeEvent(){
     var selectedCheckBoxesValue = '';
        $('#DIVID').find("input:checkbox.CheckBoxClassName:checked").each(function (i, selected) {
                                                        if (selectedCheckBoxesValue.length == 0) {
                                                            selectedCheckBoxesValue += $(selected).val();
                                                        }
                                                        else {
                                                            selectedCheckBoxesValue += ',' + $(selected).val();
                                                        }});

         //Set the value of hiddenField selected checkboxes value 
            $(hiddenFieldValueId).val(selectedCheckBoxesValue);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T06:09:23.373

有一种更简单的方法可以做到这一点。

```
$('input[type="checkbox"]:checked').map(function() {
    return $(this).val();
}).get().join(); 
```

演示：http: [//jsfiddle.net/codef0rmer/EWsMX/](http://jsfiddle.net/codef0rmer/EWsMX/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T04:44:47.000

```
$('#Chkboxvalue').val($('#Chkboxvalue').val()+' '+$(item).val()); 
```

# apache-flex - 如何在 TabbedViewNavigatorApplication 中更改选项卡时保持视图

> ID：10185130
> 
> 赞同：0
> 
> 时间：2012-04-17T04:38:10.880
> 
> 标签：apache-flex, air, flex4, flash-builder

我正在开发一个 flex 4.6 移动项目，我发现 TabbedViewNavigatorApplication 会破坏旧视图并在每次更改选项卡时创建一个新视图。

例如，用户在 View1 的 textInput 中输入了一些文本，然后用户切换到 View2 选项卡并切换回 View1 选项卡。这时候，输入的文字就没有了。

我的问题是如何在更改选项卡时保留这些视图实例（就像 iphone tabbar 一样）？

![例子](../Images/6fb207dd05e58986be96e604b145284e.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T05:11:48.063

您是否尝试`destructionPolicy="never"`过查看组件中的属性？

# java - 通过 JAVA 从 JSP 中的 ifram 重定向父页面

> ID：10185134
> 
> 赞同：2
> 
> 时间：2012-04-17T04:38:59.677
> 
> 标签：java, javascript, jsp, servlets

可以在[此处](https://stackoverflow.com/questions/580669/redirect-parent-window-from-an-iframe-action-using-javascript)找到相同的问题。并发现了一些相同的问题。
它们是关于`javascript`(answer :-window.top.location.href = " [http://www.site.com](http://www.site.com) "; )
**但**
我想知道如何`Java`在 jsp 页面中重定向它。通常的重定向可以完成为..

```
response.sendRedirect("newUrl.jsp"); 
```

但它重定向 iframe 内的源页面而不是父页面。任务是刷新 iframe 的源文件并做一些事情（检查会话..获取属性。）如果源页面遇到特定的逻辑阶段，则父页面可能会重定向到另一个页面。但不在javascript，我想在 JAVA 中了解它（这意味着 jsp/servlet 容器决定并重定向到服务器中的另一个页面）。
我目前的观点是，这些事情可能会用 javascript 来处理。非常感谢您提供的所有信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T04:42:30.493

与其发送 301 或 302 重定向，不如发送一个 JSP 页面（或写入响应的输出流），其中包含设置为在加载时执行的 javascript 重定向的 html 内容。这样你就可以在 Java 方面进行检查，并在适当的时候发送 javascript 重定向，否则发送常规内容。

# jquery - 为 For 循环添加延迟

> ID：10185138
> 
> 赞同：1
> 
> 时间：2012-04-17T04:39:22.927
> 
> 标签：jquery, for-loop, bind, delay

我尝试了此处找到的解决方案：[如何在 JavaScript 循环中添加延迟？](https://stackoverflow.com/questions/3583724/how-do-i-add-a-delay-in-a-javascript-loop)但我无法让它为我工作。

```
 jQuery.fn.createEntry = function () {
        $("#List").append('<span>New Entry</span>');
        $("#List span").draggable({ grid: [30,45] });
    }

    jQuery.fn.tenTimes = function() {
        for (var i = 1; i <= 10; i++){
            $(document).createEntry();
        }
    } 
```

在 .createEntry() 脚本中，新对象绑定到我拥有的 .draggable() 插件。我正在使用键盘快捷键（keyup）来运行这个 tenTimes 函数（）。如果我过快地多次按下该键，许多新对象将无法拖动。哪些对象无法变得可拖动似乎是随机的。我想也许我的快速按键会破坏那些失败的绑定事件，但即使我走慢，有些也不会变得可拖动。

在继续 for 循环之前，有什么方法可以检查对象是否正确绑定？有没有更好的方法？不幸的是，这不是动画，所以我不能使用 .delay()。

*解决方案*

这是我使用的第三个脚本，它使用 appendTo() 处理了导致问题的元素。

使用 append() 或 appendTo() 似乎使对象与可拖动对象保持绑定，但它沿途丢失了左/上 css，因此无法拖动。我没有找出一些 .css() hack（每个值都是唯一的），而是简单地创建了一个全新的元素，并将相关数据复制过来，然后 remove() 旧的。Draggable 在其他某个点正确绑定到它。有了这个，问题就解决了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T04:48:45.583

**编辑**

尝试 .setTimeout()

我没有读到你说 .Delay() 不能使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T05:30:33.047

顺便说一句，您可能会发现通过替换

```
jQuery.fn.createEntry = function () {
    $("#List").append('<span>New Entry</span>');
    $("#List span").draggable({ grid: [30,45] });
} 
```

和

```
jQuery.fn.createEntry = function () {
    $("#List").append($('<span>New Entry</span>').draggable({ grid: [30,45] }));
} 
```

因为您可能不想重新申请`draggable`所有已经存在`span`的 s。

实际上，这可能是破坏您的代码的原因。第一个`span`已经`draggable`重新申请了10次。是`draggable`幂等的吗？

# android - 除了针对 position.y == 0 的块外，基于图块的碰撞效果很好

> ID：10185141
> 
> 赞同：0
> 
> 时间：2012-04-17T04:39:45.933
> 
> 标签：android, collision-detection

我正在开发一个简单的平台游戏，并且在最终找到迄今为止尽可能稳定的解决方案之前，我已经经历了几个碰撞系统。直到玩家与一个在 y 轴上的 CENTER 位置等于 0 的块发生碰撞。虽然我怀疑它只是在 y 轴上，但它非常奇怪，因为我首先检查了 x 移动/碰撞。我不知道。

我做了一个简单的 AABB 类型的碰撞检查/响应，我首先应用 x 速度，然后如果重叠，重新定位播放器，以便右播放器绑定 = 左块绑定，使它们脱离重叠。然后我通过相同的 y 轴以玩家垂直方向计算玩家是否击中了块的底部或顶部。唯一的控制是跳跃，因为玩家有一个正 x 的加速力，因此玩家永远不会向左移动。

问题是玩家离开了蓝色虚线块，但是当它撞到红色虚线块时，在 Y 轴上检测到碰撞，因此玩家向上移动超出重叠，但是当下一帧执行时，玩家在 x 中的速度是像往常一样添加，但会记录一次碰撞，然后它将玩家定位到红色块的左侧。下一帧检测到与蓝色块的碰撞，因此它将玩家定位在它的顶部，如下所示。

下面的设置使播放器循环这个序列

![例子](../Images/f17ebe8dfb971d3ebc20c0faf27dc08b.png)

信息：

player.centerPosition = (2, 2)

player.width = 0.5f

player.height = 0.8f

blueBlock.centerPosition = (1, 1)

redBlock.centerPosition = (4, 0)

块宽度 = 3

块高度 = 1

```
private void checkBlockCollision(float deltaTime) {
    List<GameObject> colliders = grid.getPotentialColliders(player);
    int len = colliders.size();
    for (int axis=0;axis<2;axis++) { // 0 = X-axis, 1 = Y-axis
        if (axis == 0) {
            player.position.add(player.velocity.x*deltaTime, 0);
            player.updateBounds();
        } else {
            player.position.add(0, player.velocity.y*deltaTime);
            player.updateBounds();
        }
        for (int i=0;i<len;i++) { // Cycle through all blocks found in broad phase
            GameObject collider = colliders.get(i);
            if (OverlapTester.overlapRectangles(player.bounds, collider.bounds)) {
                if (axis == 0) {
                    player.position.x = collider.position.x - (Player.PLAYER_WIDTH + collider.bounds.width)/2;
                    player.velocity.x = 0f;
                    Log.d("TAG", "Move player LEFT");
                } else {
                    if (player.velocity.y > 0) {
                        player.position.y = collider.position.y - (Player.PLAYER_HEIGHT + collider.bounds.height)/2;
                        player.velocity.y = -player.velocity.y*0.333f;
                        Log.d("TAG", "Move player DOWN");
                    } else {
                        player.position.y = collider.position.y + (Player.PLAYER_HEIGHT + collider.bounds.height)/2;
                        player.velocity.y = 0;
                        player.state = Player.PLAYER_STATE_GROUNDED;
                        Log.d("TAG", "Move player UP");
                    } 
                }
            }
        } // end for loop colliders
    } // end for loop axis
} // END METHOD 
```

如果有人能对卡车在这里发生的事情有所了解，那就太棒了。感谢您的阅读，我可以向任何感兴趣的人提供任何进一步的信息或来源。

马里奥斯·卡洛格鲁

解决方案：

我找到了一个快速而肮脏的解决方法来解决我的问题。我只是简单地将播放器向上移动了 0.001 个单位，这实际上分离了对象。奇怪的是，因为其他块工作正常。再次感谢您通读，我希望我的解决方案可以帮助任何有类似问题的人。

# javascript - 如何让 jQuery 占位符/水印插件适用于 ajax 加载的文本字段？

> ID：10185143
> 
> 赞同：0
> 
> 时间：2012-04-17T04:39:57.210
> 
> 标签：javascript, jquery, css

我正在使用以下占位符插件

```
(function($){

    var ph = "PLACEHOLDER-INPUT";
    var phl = "PLACEHOLDER-LABEL";
    var boundEvents = false;
    var default_options = {
        labelClass: 'placeholder'
    };

    //check for native support for placeholder attribute, if so stub methods and return
    var input = document.createElement("input");
    if ('placeholder' in input) {
        $.fn.placeholder = $.fn.unplaceholder = function(){}; //empty function
        delete input; //cleanup IE memory
        return;
    };
    delete input;

    //bind to resize to fix placeholders when the page resizes (fields are hidden/displayed, which can change positioning).
    $(window).resize(checkResize);

    $.fn.placeholder = function(options) {
        bindEvents();

        var opts = $.extend(default_options, options)

        this.each(function(){
            var rnd=Math.random().toString(32).replace(/\./,'')
                ,input=$(this)
                ,label=$('<label style="position:absolute;display:none;top:0;left:0;"></label>');

            if (!input.attr('placeholder') || input.data(ph) === ph) return; //already watermarked

            //make sure the input tag has an ID assigned, if not, assign one.
            if (!input.attr('id')) input.attr('id', 'input_' + rnd);

            label   .attr('id',input.attr('id') + "_placeholder")
                    .data(ph, '#' + input.attr('id'))   //reference to the input tag
                    .attr('for',input.attr('id'))
                    .addClass(opts.labelClass)
                    .addClass(opts.labelClass + '-for-' + this.tagName.toLowerCase()) //ex: watermark-for-textarea
                    .addClass(phl)
                    .text(input.attr('placeholder'));

            input
                .data(phl, '#' + label.attr('id'))  //set a reference to the label
                .data(ph,ph)        //set that the field is watermarked
                .addClass(ph)       //add the watermark class
                .after(label)       //add the label field to the page

            //setup overlay
            itemFocus.call(this);
            itemBlur.call(this);
        });
    };

    $.fn.unplaceholder = function(){
        this.each(function(){
            var input=$(this),
                label=$(input.data(phl));

            if (input.data(ph) !== ph) return;

            label.remove();
            input.removeData(ph).removeData(phl).removeClass(ph).unbind('change',itemChange);
        });
    };

    function bindEvents() {
        if (boundEvents) return;

        //prepare live bindings if not already done.
        $("form").live('reset', function(){
            $(this).find('.' + ph).each(itemBlur);
        });
        $('.' + ph)
            .live('keydown',itemFocus)
            .live('mousedown',itemFocus)
            .live('mouseup',itemFocus)
            .live('mouseclick',itemFocus)
            .live('focus',itemFocus)
            .live('focusin',itemFocus)
            .live('blur',itemBlur)
            .live('focusout',itemBlur)
            .live('change',itemChange);
            ;
        $('.' + phl)
            .live('click', function() {  $($(this).data(ph)).focus(); })
            .live('mouseup', function() {  $($(this).data(ph)).focus(); });
        bound = true;

        boundEvents = true;
    };

    function itemChange() {
        var input = $(this);
        if (!!input.val()) {
            $(input.data(phl)).hide();
            return;
        }
        if (input.data(ph+'FOCUSED') != 1) {
            showPHL(input);
        }
    }

    function itemFocus() {
        $($(this).data(ph+'FOCUSED',1).data(phl)).hide();
    };

    function itemBlur() {
        var that = this;
        showPHL($(this).removeData(ph+'FOCUSED'));

        //use timeout to let other validators/formatters directly bound to blur/focusout work
        setTimeout(function(){
            var input = $(that);

            //if the item wasn't refocused, test the item
            if (input.data(ph+'FOCUSED') != 1) {
                showPHL(input);
            }
        }, 200);
    };

    function showPHL(input, forced) {
        var label = $(input.data(phl));

        //if not already shown, and needs to be, show it.
        if ((forced || label.css('display') == 'none') && !input.val())
            label
                .text(input.attr('placeholder'))
                .css('top', input.position().top + 'px')
                .css('left', input.position().left + 'px')
                .css('display', 'block');

        //console.dir({ 'input': { 'id':input.attr('id'), 'pos': input.position() }});
    }

    var cr;
    function checkResize() {
        if (cr) window.clearTimeout(cr);
        cr = window.setTimeout(checkResize2, 50);
    }
    function checkResize2() {
        $('.' + ph).each(function(){
            var input = $(this);
            var focused = $(this).data(ph+'FOCUSED');
            if (!focused) showPHL(input, true);
        });
    }

}(jQuery)); 
```

它将占位符属性应用于本身不支持占位符属性的浏览器中的表单字段（例如 IE9）。它适用于静态加载的文本字段，但是对于通过 ajax 加载的文本字段，占位符不会出现。

是否可以在通过 ajax 加载的文本字段上实现这种“水印”效果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T04:55:17.203

您可以在 AJAX 调用完成后将该插件应用于新创建的控件。请原谅伪代码，因为我不太确定您的 AJAX 调用是如何工作的：

```
$.ajax({
  url: "test.html",
  cache: false
}).done(function( result ) {
  field = $('<input>').html(result);
  $("#results").append(field);
  field.placeholder();
}); 
```

另一种选择是您可以使用 jQuery 的[.on()](http://api.jquery.com/on/)方法将动态创建的控件绑定到函数——但它需要一个事件（如单击）。我不确定你会怎么做。也许是这样的：

```
 $( 'body' ).on('click','input.addField', function(e){
        $(this).placeholder();
    }); 
```

我知道这行不通，但也许它可以帮助您集思广益。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T04:58:21.513

如果在添加新输入后触发窗口调整大小功能会发生什么？

`$(window).trigger('resize')`

# file - 在 j2me 中从二进制文件读取字节数组

> ID：10185149
> 
> 赞同：0
> 
> 时间：2012-04-17T04:40:39.810
> 
> 标签：file, java-me

我使用以下方法读取二进制文件：

```
public void readFile()
{
    try
    {
        Reader in = new InputStreamReader( this.getClass().getResourceAsStream( this.fileName));
        int count = (in.read() * 0xFF) + in.read();
        int heights = in.read();

        this.shapes = new int[count][];
        for(int ii = 0;ii<count;ii++)
        {
            int gwidth = in.read();
            int[] tempG = new int[gwidth * heights];
            int len = (in.read() * 0xff) + in.read();
            for(int jj = 0;jj<len;jj++)
            {
                tempG[top++] = in.read() * 0x1000000;
            }
            this.shapes[ii] = tempG;
        }
        in.close();

    }catch(Exception e){}
} 
```

它在 netbeans 模拟器和某些设备中完美运行，但在某些设备和[kemulator](http://www.javaemulator.com/java-emulator.php)中，似乎 in.read() 读取了一个字符（两个字节），它导致我的应用程序在这些设备和模拟器上崩溃。

以字节为单位读取文件的最佳方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T04:47:35.313

由于您总是在处理字节，因此您应该使用 an[`InputStream`](http://docs.oracle.com/javase/6/docs/api/java/io/InputStream.html)而不是[`InputStreamReader`](http://docs.oracle.com/javase/6/docs/api/java/io/InputStreamReader.html).

添加 Javadoc 说：

> InputStreamReader 是从字节流到字符流的桥梁：它读取字节并使用指定的字符集将它们解码为字符。它使用的字符集可以由名称指定，也可以显式给出，或者可以接受平台的默认字符集。

该`read()`方法读取一个“字符”：

另一方面，an表示*字节*`InputStream`的输入流：

 *> public abstract int read() 抛出 IOException
> 
> 从输入流中读取数据的下一个字节。值字节作为 int 返回，范围为 0 到 255。如果由于到达流的末尾而没有可用的字节，则返回值 -1。此方法会一直阻塞，直到输入数据可用、检测到流结束或引发异常。

（顺便说一句，这里有[一篇关于 j2me 中“缓冲读者”的过时文章](http://www.coderanch.com/t/226205/JME/Mobile/BufferedReader-ME)）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-16T15:43:21.427

我可以直接从诺基亚找到的最佳示例

```
 public Image readFile(String path) {
        try {
            FileConnection fc = (FileConnection)Connector.open(path, Connector.READ);
            if(!fc.exists()) {
                System.out.println("File doesn't exist!");
            }
            else {
                int size = (int)fc.fileSize();
                InputStream is = fc.openInputStream();
                byte bytes[] = new byte[size];
                is.read(bytes, 0, size);
                image = Image.createImage(bytes, 0, size);
            }

        } catch (IOException ioe) {
            System.out.println("IOException: "+ioe.getMessage());
        } catch (IllegalArgumentException iae) {
            System.out.println("IllegalArgumentException: "+iae.getMessage());
        }
        return image;
   } 
```

[http://www.developer.nokia.com/Community/Wiki/How_to_read_an_image_from_Gallery_in_Java_ME](http://www.developer.nokia.com/Community/Wiki/How_to_read_an_image_from_Gallery_in_Java_ME)*

# javascript - 通过 HTML 表单查询和更新融合表？

> ID：10185151
> 
> 赞同：2
> 
> 时间：2012-04-17T04:41:21.733
> 
> 标签：javascript, google-maps, google-maps-api-3, google-fusion-tables

我对谷歌地图和融合表很陌生。我想知道是否可以从融合表中返回查询到的信息，并使用诸如 innerHTML 之类的东西将其写入页面。此外，我希望能够使用标准 HTML 表单更新融合表。这可能吗？如果可以，你能指出我正确的方向吗？我一直在寻找没有结果，但可能只是我不知道如何提出这个问题。让我尽我所能解释我在寻找什么：

我有一个带有 kml 折线层的谷歌地图。我希望能够在 HTML 表单中输入查询（例如日期范围、特征 ID 等）或单击具有与融合表中的 ID 对应的 ID 的线特征，然后运行将返回相应表条目的属性数据的查询。请注意，融合表没有地理编码信息，我只是将它用作电子表格（我想我知道融合表比谷歌电子表格更容易查询/访问，但如果我错了，请纠正我）。

表单输入非常不言自明 - 我希望能够在表单中输入一些信息并在融合表中创建一个新行。

提前感谢您的帮助/打击（无论是什么）！

麦克风

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T19:41:37.260

*“我希望能够将属性信息写入我的地图下方的页面中（使用innerHTML）。”*

使用“未记录的”Fusion Table JSNOP API 绝对可以做到这**一点。**我经常使用这种方法。我在这个答案中描述了它并发布了几个例子：[https ://stackoverflow.com/a/9778985/1211981](https://stackoverflow.com/a/9778985/1211981)

正如 Odi 解释的那样，来自浏览器的更新/插入更加复杂。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T08:07:51.230

您的用例有几种可能的解决方案。我想您想要一个仅在浏览器中运行且没有服务器端代码的仅 JavaScript 解决方案。

要在 Google 地图上显示来自 Fusion Table 的数据，您应该使用[FusionTablesLayer](https://developers.google.com/maps/documentation/javascript/layers#FusionTables)，这使得这项任务变得非常简单明了。[Google](https://developers.google.com/fusiontables/docs/sample_code)提供了很好的示例，例如如何使用表单[更改查询或](https://developers.google.com/fusiontables/docs/samples/change_query)[创建自定义 InfoWindows](https://developers.google.com/fusiontables/docs/samples/change_infowindow_content)（这将是显示与在地图上单击的内容相对应的数据的首选方式）。如果您不想关心身份验证，只需*公开*您的表，那么将示例调整到您的表应该很容易。

另一件事是向 Fusion Tables 写入数据：这并不容易，因为在这里您*必须*关心身份验证，有关详细信息，请参阅[OAuth 指南](https://developers.google.com/fusiontables/docs/articles/oauthfusiontables)。但目前无法将数据直接从浏览器写入 Fusion Table。但还是有希望的：使用新的 Trusted Tester API，您实际上可以做到这一点，但您必须先[加入这个小组](https://groups.google.com/forum/?fromgroups#!forum/fusion-tables-api-trusted-testers)，然后才能开始。

如果您不能/不想使用新 API，请考虑[我在此处解释的服务器端方法，](https://stackoverflow.com/questions/10059798/post-request-to-update-rows/10066881#10066881)使用脚本中继您的请求。

# linux - Sun Grid Engine 挂起而不是重新启动作业

> ID：10185154
> 
> 赞同：0
> 
> 时间：2012-04-17T04:41:26.070
> 
> 标签：linux, hpc, sungridengine

这可能是集群特定的问题，只能由管理员解决，但是当我有一个低优先级的作业并且出现一个高优先级的作业时，该进程被终止。

当高优先级作业完成时，低优先级作业将重新启动。用户端有没有办法让它在最初通过 SIGSTOP 启动的机器上挂起而不杀死进程？不幸的是，检查点在这里不是一个选项，所以我希望能够在不丢弃内存的情况下完成这项工作。

我们确实有这台机器的 ssh，所以如果一切都失败了，我很想做一个非常草率的脚本黑客来获得所需的行为：

```
1\. start the process locally
2\. send a SIGSTOP
3\. make the job script send SIGCONT and just spin watching the process
4\. when the job gets suspended, send a SIGSTOP again
5\. when the job gets resumed, it should just send a SIGCONT 
```

但我更愿意在 SGE 内做所有事情以避免任何令人讨厌的意外

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T21:34:36.487

SGE 中的挂起/停止机制由属性 和 以每个队列为基础`suspend_method`进行`resume_method`控制`terminate_method`。默认值为：

*   `suspend_method`- 发送 SIGSTOP
*   `resume_method`- 发送 SIGCONT
*   `terminate_method`- 发送 SIGKILL

除了弄乱默认值之外，我看不出 SGE 没有其他理由杀死作业而不是停止它们。

# asp.net - ASP.NET 中的自定义 SQL Server 会话提供程序

> ID：10185160
> 
> 赞同：1
> 
> 时间：2012-04-17T04:42:27.033
> 
> 标签：asp.net, session, customization, session-state

使用 aspnet_regsql 实现 SQL Server 会话提供程序。

在 Web 配置中

```
<sessionState mode ="SQLServer" cookieless="false" timeout="1" allowCustomSqlDatabase="true" sqlConnectionString="Password=ads;Persist Security Info=True;User ID=sa;Initial Catalog=ASPState;Data Source=DF" /> 
```

创建会话时，会在数据库中为该会话添加新行，但是当会话到期时，它不会删除该行。我们是否需要手动自定义删除过期会话的方法？如果是，请说明我们需要重写的方法。

谢谢，普拉文

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T04:50:36.597

您可以通过以下代码手动执行此操作

> ```
> HttpContext.Current.Session.Remove("session");
> HttpContext.Current.Session.Abandon(); 
> ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T04:52:24.050

浏览[实现 Session-State Store Provider](http://msdn.microsoft.com/en-us/library/ms178587%28v=vs.80%29.aspx)的*删除过期的会话存储数据*部分。

> 当为会话调用[Abandon 方法时，将使用](http://msdn.microsoft.com/en-us/library/system.web.sessionstate.httpsessionstate.abandon.aspx)*RemoveItem* 方法从数据存储中删除该会话的数据。否则，数据将保留在会话数据存储中，以服务于会话的未来请求
> 
> 删除过期会话数据的机制取决于数据源的功能。如果您的数据源可以配置为根据会话 Timeout 属性删除过期会话数据，则可以使用[SetItemExpireCallback](http://msdn.microsoft.com/en-us/library/system.web.sessionstate.sessionstatestoreproviderbase.setitemexpirecallback%28v=vs.80%29.aspx)方法引用**Session_OnEnd**事件的委托，并在删除过期会话数据时引发它。

参考：[过期后从数据库中删除会话？](https://stackoverflow.com/questions/8723504/delete-session-from-database-after-it-expired)

# jquery - FaceBook UI 未填充选定的多个朋友

> ID：10185165
> 
> 赞同：1
> 
> 时间：2012-04-17T04:42:32.820
> 
> 标签：jquery, facebook

我正在使用 FB.ui 'apprequests' 方法来选择朋友，并且正在发生。然后我从那里重定向到一个发送消息弹出窗口（FB.ui 'send' 方法）。以前，弹出窗口中的“收件人：”部分填充了多个朋友。但现在它只显示第一个选择的朋友。欢迎您提出建议。

代码看起来像这样，

```
$('#sendinvite').click(function () 
    {
            FB.ui
        ({
            method: 'apprequests',
            message: "sds"
        },send_Message);
    });

    function send_Message(response) 
    {
    var eventName = 'Event Name';
    var varMessage ="You are invited for " + eventName;
        console.log(response.to);
                FB.ui
        ({
                method: 'send',
                to: response.to,
                name: 'People Argue Just to Win',
                description: varMessage,
                link: 'http://www.techvantagesystems.com'
            });
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T05:49:15.717

看来，Facebook 最近改变了这种行为，现在在对话选项中只允许**一个**预填充的朋友。当然，一旦对话框出现，用户可以选择更多朋友。`to``send`

很多开发人员都在问这个问题，检查[这个错误](https://developers.facebook.com/bugs/314701778595814)。

# regex - 检查字符串是否是更大字符串的一部分的最有效方法是什么？

> ID：10185166
> 
> 赞同：1
> 
> 时间：2012-04-17T04:42:43.117
> 
> 标签：regex, string, ip-address, apache-stringutils

我有一个由 IP 地址串联形成的字符串，例如：

```
"127.272.1.43;27.27.1.43;127.127.27.67;128.27.1.43;127.20.1.43;111.27.1.43;127.27.1.43;" 
```

当给定一个新的 IP 地址时，我需要检查 IP 的前半部分是否是 IP 地址字符串的一部分。例如，如果`"127.27.123.23"`给出，我需要查找字符串中是否有任何 IP 地址以`"127.27"`

我有以下代码，其中`userIP`=`"127.27."`

```
int i = StringUtils.indexOf(dbIPString, userIP);
do {
    if (i > 0) {
        char ch = dbIPString.charAt(i - 1);
        if (ch == ';') {
            System.out.println("IP is present in db");
            break;

        } else {
            i = StringUtils.indexOf(dbIPString, userIP, i);
        }
    } else if (i == 0) {
        System.out.println("IP is present in db");
        break;
    } else {

        System.out.println("IP is not present in db");
    }
} while (i >= 0); 
```

能不能更有效率？或者我可以使用正则表达式吗？哪个效率更高？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T05:51:15.727

纯字符串匹配通常比正则表达式匹配更快。我会保持简单并做这样的事情：

```
if (StringUtils.startsWith(dbIPString, userIP)) {
    ... // prefix is present
} else if (StringUtils.indexOf(dbIPString, ";" + userIP) > 0) {
    ... // prefix is present
} else {
    ... // prefix is not present
} 
```

如果您可以安排列表始终以“;”开头 那么搜索第一个条目将不再是特殊情况，并且可以简化逻辑。

如果列表很大并且您将进行大量此类搜索并且速度确实很重要，那么也许您可以在构建地址列表时将每个前缀添加到某种哈希或树中。这些数据结构中的查找应该比字符串匹配更快。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T07:52:29.350

假设您只关心整个 IP 地址匹配，并假设您在查找时不想`127.255.1.43`匹配`127.25`，那么

```
(?<=^|;)127\.25\.\d+\.\d+ 
```

将是一个合适的正则表达式。

在 Java 中：

```
Pattern regex = Pattern.compile(
    "(?<=^|;)       # Assert position at the start of the string or after ;\n" +
    Pattern.quote(userIP) +
    "\\.\\d+\\.\\d+ # Match .nnn.nnn", 
    Pattern.COMMENTS); 
```

# sql - 将 serveroutput 永久设置为 ON？

> ID：10185176
> 
> 赞同：1
> 
> 时间：2012-04-17T04:43:53.053
> 
> 标签：sql, oracle, plsqldeveloper

我是 Oracle 新手，正在练习 PL/SQL。我有一个问题，即：如何在 oracle 中永久设置 serveroutput ON。他们是我们用来永久设置它的任何方式吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T06:11:11.107

如果您指的是 SQL*Plus，您应该在您的 glogin.sql 文件中进行设置。

您可以在 ORACLE_HOME\sqlplus\admin 中找到此文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-24T15:59:42.020

据我所知，没有办法将服务器输出永久设置为 ON。

但是如果这个问题与SQL developer中的每个新会话，1需要`SET SERVEROUTPUT ON`在开始时执行语句才能看到*PL / SQL*代码结果的事实有关，那么解决方案是`Go to view->DBMS_Output`

然后在下面您将看到 dbms 输出窗口。那里有一个加号（+）按钮。单击并添加您当前正在处理的架构。然后在那里可以看到*PL/SQL脚本输出。*

# c# - C# 生成新线程然后等待

> ID：10185177
> 
> 赞同：1
> 
> 时间：2012-04-17T04:43:59.970
> 
> 标签：c#, multithreading

我对使用多线程技术非常缺乏经验，但这是我尝试过的：

```
Thread thread = null;

for (int minute = 0; minute < 60; minute++)
{
    Thread.Sleep(60000);

    if (thread != null)
    {
        while (thread.ThreadState == ThreadState.Running) { }
    }

    thread = new Thread(delegate()
    {
        // Do stuff during the next minute whilst the main thread is sleeping.
    });
    thread.Start();
} 
```

我在这里想要实现的是让一个线程在主线程休眠时运行并工作，但我不确定为什么上面的代码不起作用。发生的情况是，在第一个循环之后（在启动线程之后），ThreadState 似乎没有从“正在运行”改变。我也很好奇是否有更优雅的方式来做到这一点。

有谁知道这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T04:54:45.920

[Thread.Join](http://msdn.microsoft.com/en-us/library/system.threading.thread.join%28v=vs.71%29.aspx)是等待线程结束的更好方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-17T05:02:39.093

如果您使用的是 .Net 4，我建议您查看[Task Class](http://msdn.microsoft.com/en-us/library/system.threading.tasks.task.aspx)。它使多线程工作变得更加容易/直接。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-17T13:37:12.480

使用`Task`类你可以做到这一点。

```
Task task = Task.Factory.StartNew(() =>
  {
    // Do stuff here.
  });

task.Wait(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-17T05:01:00.780

Thread.Sleep(60000) 在调用它的线程上执行，在这种情况下是主线程。这很好，但是“线程”不知道它已经运行了多长时间，也不知道什么时候真正停止。您需要有一个对象告诉“线程”它已经运行了 60 秒。

```
Thread thread = null;

for (int minute = 0; minute < 60; minute++)
{
    if (thread != null)
    {
        while (thread.ThreadState == ThreadState.Running) { }
    }

    thread = new Thread(delegate()
    {
        try
        {
            // Do stuff during the next minute whilst the main thread is sleeping.
        }
        catch (ThreadAbortException ex)
        {
        }
    });
    thread.Start();
    Thread.Sleep(60000);
    thread.Abort();
} 
```

这应该可以实现您想要的，但并不是真正停止线程的最优雅的方式。一个线程真的应该使用回调结束。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-17T05:08:03.447

您可能正在寻找的是更像这样的东西：

```
Thread thread = new Thread(delegate()
    {
        // Something that takes up to an hour
    });
thread.Start();

for (int minute = 0; minute < 60; minute++)
{
    Thread.Sleep(60000);
    if (thread.IsAlive)
        Console.WriteLine("Still going after {0} minute(s).", minute);
    else
        break; // Finished early!
}

// Check if it's still running
if (thread.IsAlive)
{
    Console.WriteLine("Didn't finish after an hour, something may have screwed up!");
    thread.Abort();
} 
```

如果这是您正在寻找的，我会看看[BackgroundWorker](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.aspx)类。

# javascript - 将警报 DIV 添加到验证脚本（jquery / javascript）

> ID：10185180
> 
> 赞同：0
> 
> 时间：2012-04-17T04:44:45.543
> 
> 标签：javascript, jquery, validation, alert

我有一个想要更改的验证脚本（调用其父脚本）。

*当发现错误时，*我想在表单上方显示一个隐藏的 DIV 作为警报。

**有没有办法将此添加到我现有的脚本中：**

```
<script type="text/javascript">
    $(function () {
    $('#rbSubmit').formValidator({
        scope: '#form_register',
            onError: function () {
            if ($('#input_1 input').hasClass('error-input')) {
                $('#r1 div, #r1 input').css('background-color', '#C1272D').css('color', '#FFF');
            } else {
                $('#r1 div').css('background-color', '#E8E8E8');
            }
            if ($('#input_1 input').hasClass('error-input')) {
                $("#r1 .ts").css("background-position", "-928px -318px");
            } else {
                $('#r1 div').css('background-color', '#E8E8E8');
            }
            if ($('#input_2 input').hasClass('error-input')) {
                $('#r2 div, #r2 input').css('background-color', '#C1272D').css('color', '#FFF');
            } else {
                $('#r2 div').css('background-color', '#E8E8E8');
            }
        }
    });
});
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T04:50:04.677

1.  在表单中定义一个空 div，例如。

1.  使用 $("#divError).html("错误声明");

[http://api.jquery.com/html/](http://api.jquery.com/html/)

希望这就是你要找的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T04:49:52.690

用. `DIV`_ `style="display:none"`我假设 div 的 ID 为`error_div`.

遇到错误时，执行`$("#error_div").show();`

如果你需要添加消息做 DIV，你可以这样做`$("#error_div").text("error in input 2");`

# c# - 在 C# 中使用 Selenium WebDriver 仅定位非隐藏元素

> ID：10185185
> 
> 赞同：0
> 
> 时间：2012-04-17T04:45:51.363
> 
> 标签：c#, selenium, webdriver, selenium-webdriver, pageobjects

我在网页上有一组记录，当单击记录时，会显示一个“删除”链接（实际上是“未隐藏”，因为它实际上总是在那里）。

在尝试访问此“删除”链接时，我正在使用它的值。

当我使用`Driver.FindElement`时，它会返回第*一个*删除链接，即使它是隐藏的，因此无法单击它（也不应该因为它不是正确的链接）。

所以，我基本上想做的就是只找到*非隐藏的*链接。下面的代码有效，但是当它遍历每个删除链接时，我担心它可能效率低下。

有没有更好的办法？

```
public class DataPageModel : BasePageModel
{
    private static readonly By DeleteSelector = By.CssSelector("input[value=\"Delete\"]");

    private IWebElement DeleteElement
    {
        get
        {
            var elements = Driver.FindElements(DeleteSelector);
            foreach (var element in elements.Where(e => e.Displayed))
            {
                return element;
            }
            Assert.Fail("Could not locate a visible Delete Element");
            return null;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T15:43:32.977

虽然我同意@Torbjorn 的观点，即您应该对花时间优化的地方感到厌倦，但我确实认为这段代码效率有点低。

基本上，使代码变慢的是来回检查每个元素以查看其是否显示。为了加快代码速度，您需要一次性获取您想要的元素。

两个选项（都涉及 javascript）：

**jQuery**

看看将 jQuery 选择器引入 Selenium 的不同方法（我在[这里](http://www.vcskicks.com/selenium-jquery.php)写过）。一旦你有了它，你就可以使用 jQuery 的`:visible`选择器。

或者，如果您确定页面已经加载了 jQuery，并且您不想执行所有额外代码，则可以简单地使用`ExecuteScript`：

```
IWebElement element = (IWebElement)driver.ExecuteScript("return $('input[value=\"Delete\"]:visible').first().get(0)"); 
```

**Javascript**

如果您想避免使用 jQuery，您可以编写一个 javascript 函数来执行您现在在 C# 中执行的相同操作：获取所有可能的元素并返回第一个可见的元素。

然后你会做类似的事情：

```
string script = //your javascript
IWebElement element = (IWebElement)driver.ExecuteScript(script); 
```

根据您选择的选项，您可以在不同程度上权衡可读性，但它们都应该更有效。当然，这些都需要在浏览器中启用 javascript。

# c++ - 找不到名称空间，尽管它就在那儿

> ID：10185191
> 
> 赞同：3
> 
> 时间：2012-04-17T04:46:15.550
> 
> 标签：c++, inheritance, namespaces, syntax-error

我在一个头文件中定义了一个名称空间并在另一个头文件中使用，但找不到它。具体来说，在“players/Players.hpp”中定义并在名为“players/Ownable.hpp”的文件中使用的名为“players”的命名空间在名为“combat/Targetable.hpp”的文件中找不到

错误是

```
...\source\combat\Targetable.hpp(7): 'players' : is not a class or namespace name
...\source\combat\Targetable.hpp(7): 'Ownable' : base class undefined 
```

显然这是我不明白的一些语法。我花了一些时间简化代码，所以它看起来很傻，但请耐心等待。

```
// source/players/Players.hpp:
#ifndef PLAYERS_HPP
#define PLAYERS_HPP

#include "../Headers.hpp"

namespace players {
  class Player{

// this class compiles fine.
// There used to be a "Players.cpp" but it's been simplified away

    public:
      int getID(){ return 0; }
      int getTeam(){ return 0; }
      string getName(){ return ""; }
      Vec3 getColor(){ return Vec3(0.0,0.0,0.0); }
  };
}
#endif 
```

还有 player/Ownable.hpp，它与 Player.hpp 位于同一文件夹中，并且编译良好：

```
// source/players/Ownable.hpp:
#ifndef OWNABLE_HPP
#define OWNABLE_HPP

#include "Players.hpp"

namespace players {
  class Ownable;
  typedef boost::shared_ptr<Ownable> OwnablePTR;
  typedef boost::weak_ptr<Ownable> OwnableWPTR;

  class Ownable {
    public:
      Ownable(){}
      Ownable(int playerID) : playerID(playerID){}
      bool isAlliedWith(OwnablePTR other){ return false; }

    private:
      int playerID;
  };
}

#endif 
```

这就是乐趣的开始。我在“source/combat/Targetable.hpp”中有一个文件，该文件与其他两个文件位于不同的目录中。但是，文件本身似乎包含罚款：

```
// source/combat/Targetable.hpp:
#ifndef TARGETABLE_HPP
#define TARGETABLE_HPP

#include "../players/Ownable.hpp"

namespace combat{
  class Targetable : public players::Ownable { // ERROR
    public:
      Targetable(int playerID){}
      //Targetable(players::Player player);

      virtual Vec2 getPosition(){
        return Vec2();
      }
      virtual Vec2 getVelocity(){
        return Vec2();
      }
  };
}

#endif 
```

我真的希望这是我缺少的一些愚蠢的语法。我什至试过

```
using players::Ownable; 
```

但是 A) 污染了包含这个文件的文件，并且 B) 没有解决任何问题。有什么帮助吗？

编辑：GManNickG 明白了，它是 Headers.hpp 文件中的一个循环包含。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T19:03:41.617

你有一个循环包含。

首先考虑包含守卫的目的：

```
// a.hpp
#ifndef A_HPP
#define A_HPP

// stuff

#endif 
```

```
// b.hpp
#ifndef B_HPP
#define B_HPP

#include "a.hpp"

// stuff

#endif 
```

```
// c.hpp
#ifndef C_HPP
#define C_HPP

#include "a.hpp"
#include "b.hpp"

// stuff

#endif 
```

```
// x.cpp
#include "c.hpp" 
```

包含`c.hpp`将最终包含`a.hpp`两次。第一次，守卫没有定义，一切正常，第二次守卫阻止重新定义。这就是我们想要的。

但是，当您有循环时，这不起作用。（它会阻止它，这很好，但它做得“太好了”，因为防护是在测试后立即定义的，这意味着标题的内容实际上还没有被处理）。考虑一下：

```
// a.hpp
#ifndef A_HPP
#define A_HPP

#include "c.hpp"

// stuff

#endif 
```

```
// b.hpp
#ifndef B_HPP
#define B_HPP

#include "a.hpp"

// stuff

#endif 
```

```
// c.hpp
#ifndef C_HPP
#define C_HPP

#include "b.hpp"

// stuff

#endif 
```

```
// x.cpp
#include "c.hpp" 
```

这与您所拥有的相似。`x.cpp`includes `c.hpp`，这是它第一次被包含，所以它定义了`C_HPP`. 然后`c.hpp`包括`b.hpp`，其中包括`a.hpp`。然后`a.hpp`include`c.hpp`并*找到`C_HPP`已经定义*的，所以 include 什么也不做。

假设`a.hpp`仍然设法编译（也就是说，`c.hpp`实际上并不需要），然后`a.hpp`完成，然后`b.hpp`完成，`c.hpp`最后在返回之前实际定义其内容`x.cpp`。

解决方案是尽量减少包含的标头数量。使用前向声明，最重要的是：*不要使用“包含所有内容”标题*！这些*太可怕了*。我怀疑就是这样`Headers.hpp`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T05:40:52.477

怎么样`class Targetable : public ::players::Ownable { . . .`？

`::`注意之前 的全局命名空间限定`players`。

# javascript - 在jsp页面onload上添加模式窗口

> ID：10185194
> 
> 赞同：0
> 
> 时间：2012-04-17T04:47:02.537
> 
> 标签：javascript, jsp

我是jsp的新手。我正在创建一个 jsp 页面。**Index.jsp**，我希望在这个 index.jsp 加载时会出现一个模式弹出窗口，要求用户输入一些信息。请让我知道如何添加它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T05:18:23.583

您可以使用 jQuery.Download jQuery 文件并将其放在您的 webapps 目录下，

```
<script type="text/javascript" src="jquery.min.js"></script>
<script type="text/javascript">
       $(document).ready(showWindow());
        function showWindow(){
            window.open('mathutil.jsp','myWindow','height=255,width=250,toolbar=no,directories=no,status=no,continued from previous linemenubar=no,scrollbars=no,resizable=no ,modal=yes');
        }   
    </script> 
```

这将在您的 JSP 页面加载之前调用。

如果您想在页面加载后立即获得某些内容（例如，等到所有资源完成下载，例如图像和脚本。）`onload()`在您的`body`标签中使用。

# c - openSSL：握手失败 - 服务器无法获取客户端证书

> ID：10185195
> 
> 赞同：2
> 
> 时间：2012-04-17T04:47:03.393
> 
> 标签：c, linux, openssl, vmware, public-key-encryption

我正在尝试编写客户端和服务器代码以使用 openSSL API 进行 SSL 握手。

客户端代码包含：

```
 // Part of client code:
 SSL_CTX_set_verify(ctx,SSL_VERIFY_PEER,NULL);
 SSL_CTX_load_verify_locations(ctx,"ca.pem",NULL);
 ...
 if (SSL_CTX_use_certificate_file(ctx, "cli.crt" , SSL_FILETYPE_PEM) <= 0) {
  exit(1);
  }

  if (SSL_CTX_use_PrivateKey_file(ctx, "cli.key", SSL_FILETYPE_PEM) <= 0) {
  exit(1);
  }
 ...
 sd = socket (AF_INET, SOCK_STREAM, 0);
 sa.sin_family      = AF_INET;
 sa.sin_addr.s_addr = inet_addr ("127.0.0.1"); 
 sa.sin_port        = htons (44444);
 ...
 ssl = SSL_new (ctx);              
 SSL_set_fd (ssl, sd);
 err = SSL_connect (ssl); 
```

服务器代码包含：

```
 // Part of server code:
 SSL_CTX_set_verify(ctx,SSL_VERIFY_PEER,NULL);
 SSL_CTX_load_verify_locations(ctx,"ca.pem",NULL);
 ...
 if (SSL_CTX_use_certificate_file(ctx, "serv.crt", SSL_FILETYPE_PEM) <= 0) {
    exit(1);
 }
 if (SSL_CTX_use_PrivateKey_file(ctx, "serv.key", SSL_FILETYPE_PEM) <= 0) {
    exit(1);
  }
 ...
 listen_sd = socket (AF_INET, SOCK_STREAM, 0);  
 memset (&sa_serv, '\0', sizeof(sa_serv));
 sa_serv.sin_family      = AF_INET;
 sa_serv.sin_addr.s_addr = INADDR_ANY;
 sa_serv.sin_port        = htons (44444);

 err = bind(listen_sd, (struct sockaddr*) &sa_serv, sizeof (sa_serv));                           
 err = listen (listen_sd, 5);       
 client_len = sizeof(sa_cli);
 sd = accept (listen_sd, (struct sockaddr*) &sa_cli, &client_len);
 close (listen_sd);
 ....
 ssl = SSL_new (ctx);                           
 SSL_set_fd (ssl, sd);
 err = SSL_accept (ssl); 
```

我使用目标地址作为环回地址 (127.0.0.1) 运行代码，从上面显示的代码可以看出。在同一台机器上执行的客户端和服务器程序运行良好。

但是，当我在不同的机器（VMWare VM - Ubuntu Linux）上运行客户端和服务器程序时，代码会失败。

```
 Client VM IP:192.168.181.188
 Server VM IP:192.168.181.180 
```

使用服务器 VM 的 IP（例如 192.168.181.180）作为客户端代码中的地址，我在服务器上收到以下错误：

```
 140890B2: SSL3_GET_CLIENT_CERTIFICATE:no certificate returned: s3_srvr.c:2602: 
```

我在我的 Linux 机器上创建了自己的 CA，并与客户端和服务器 VM 共享 CA 公钥文件。客户端和服务器证书由该 CA 签名。

```
 CA : CA123
 Client CN: Client (signed by CA123)
 Server CN: Server (signed by CA123) 
```

客户端能够验证服务器证书（我什至可以获取服务器证书并检查 CN 确实是“服务器”），但服务器无法获取客户端证书，因此握手失败。

任何人都可以提出解决这个问题的方法吗？

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T10:57:34.703

检查`subject`客户端证书。有时 CN（通用名称）字段应该包含客户端主机的 IP 或主机名。

在您的情况下，客户端证书可能具有以下主题：

```
Subject: C=xxx, ST=xxx, L=xxx, O=xxx, OU=xxx, CN=192.168.181.180 
```

我对这个修复不是 100% 确定的。但在破墙之前，先试一试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T20:21:30.213

好的......我不确定以下是一个完整的解决方案，它只是为我当前的项目找到的修复，我仍然对我的答案不满意。

因此，通过阅读我的问题，您会发现我提到 CA 是在 linux 机器上创建的，并且客户端和服务器的证书是由该 CA 签名的。该主机是另一个 VMWare VM，称为“VM3”。因此，我在“VM3”上为客户端和服务器使用“CA123”生成的证书在客户端 VM（称为“VM1”）和服务器 VM（称为“VM2”）上不起作用。出于好奇，我尝试在 VM2 上设置 CA，签署客户端和服务器证书，并将客户端证书复制到客户端 VM。令我惊讶的是，它有效，但我不知道为什么。我无法回答我在 VM3 上创建了什么样的依赖关系？

随时发布更准确和完整的答案。

# java - 使用 hashmap 读取 xls 文件

> ID：10185197
> 
> 赞同：0
> 
> 时间：2012-04-17T04:47:12.447
> 
> 标签：java, hashmap, xls

如果我想使用 hashmap 从 oracle 表中读取数据，那么我可以像这样读取它............

```
String sql = "select * from DPY_VW_REP_DELIVERY_DTLS where weighed_date between ? and ?";
Object[] queryParams = new Object[] {dateFrom, dateTo};
List rsList = this.getJdbcTemplate().queryForList(sql, queryParams);
Iterator it = rsList.iterator();
while(it.hasNext())
{
    try
    {
        LinkedHashMap map = (LinkedHashMap) it.next();
        String[] strData = new String[14];
        strData[0] = map.get("WEIGHED_DATE_AS_CHAR").toString();
        strData[1] = map.get("WEIGHED_DAY_SLNO").toString();
        strData[2] = map.get("PARTY_NAME").toString();
        strData[3] = map.get("PARTY_ADDRESS1").toString();
        strData[4] = map.get("PARTY_ADDRESS2").toString();
        strData[5] = map.get("VEHICLE_NO").toString();
    }
} 
```

但是如果我想使用 hashmap 读取包含相同数据的 xls 文件，我该怎么做......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T06:02:01.570

不知道你所说的“*使用 hashmap* ”是什么意思。`JdbcTemplate.queryForList`返回映射到 HashMap 列表的结果。

[使用Apache POI](http://poi.apache.org/)或类似工具读取 excel 文件可能更容易。或者，如果使用电子表格作为数据库，您可以使用`JDBC-ODBC`bridge。然后你可以执行你的`SQL`查询。这是此方法的[示例](http://www.rgagnon.com/javadetails/java-0362.html)。

# java - 如何传入字符串并将它们组合成一个新变量（字符串连接麻烦）？

> ID：10185198
> 
> 赞同：0
> 
> 时间：2012-04-17T04:47:14.763
> 
> 标签：java, regex, string-concatenation

我正在做一个项目，但我不知道如何正确解析一些输入，例如 a1 = ("hello" + "World")。a1 是我制作的一个单元格，我试图最后将 helloworld 放入该单元格。这是我使用解析输入的课程之一。当我使用数字时，它可以正常工作，但不能使用字符串。我只是想能够将（“hi”+“man”）之类的输入解析为himan。我只想能够解析出空格和加号并将 heman 变成一个字符串。

```
import java.util.Scanner;

public class ParseInput {
    private static String inputs;
    static int col;
    private static int row;
    private static String operation;
    private static Value field;

    public static void parseInput(String input){
         //splits the input at each regular expression match. \w is used for letters and \d && \D for integers
        inputs = input;
        Scanner tokens = new Scanner(inputs);
        String[] strings = input.split("=");
        String s1 = strings[0].trim(); // a1
        String s2 = strings[1].trim(); // "Hello" + "World"

        strings = s2.split("\\+");
        String s3 = strings[0].trim().replaceAll("^\"", "").replaceAll("\"$", ""); // Hello
        String s4 = strings[1].trim().replaceAll("^\"", "").replaceAll("\"$", ""); // World
        String field = s3 + s4;

        String colString = s1.replaceAll("[\\d]", ""); // a
        String rowString = s1.replaceAll("[\\D]", ""); // 1
        int col = colString.charAt(0) - 'a'; // 0
        int row = Integer.parseInt(rowString);
        TextValue fieldvalue = new TextValue(field); 

        Spreadsheet.changeCell(row, col, fieldvalue);

        String none0 = tokens.next();
        @SuppressWarnings("unused")
        String none1 = tokens.next();
        operation = tokens.nextLine().substring(1);
        String[] holder =  new String[2];
        String regex = "(?<=[\\w&&\\D])(?=\\d)";   
        holder = none0.split(regex);
        row = Integer.parseInt(holder[1]);
        col = 0;
        int counter = -1;
        char temp = holder[0].charAt(0);
        char check = 'a';
        while(check <= temp){
            if(check == temp){
                col = counter +1;
            }
            counter++;
            check = (char) (check + 1);
        }
         System.out.println(col);
         System.out.println(row);
         System.out.println(operation);
         setField(Value.parseValue(operation));

         Spreadsheet.changeCell(row, col, fieldvalue);

    }

    public static Value getField() {
        return field;
    }

    public static void setField(Value field) {
        ParseInput.field = field;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T05:17:34.717

如果您要删除空格，则它是单行...

```
input = input.replaceAll("[\\s+\"]", ""); 
```

另一种方法是简单地删除所有“非单词”字符（定义为 0-9、az、AZ 和下划线）：

```
input = input.replaceAll("\\W", ""); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-17T05:23:32.240

使用`StringBuilder`. `String`在 Java 中是不可变的，这意味着您每次想要组合两个字符串时都将创建一个新实例。使用该`append()`方法（它几乎接受任何东西）在末尾添加一些东西。

```
StringBuilder input = "";
input.append("hel").append("lo"); 
```

[这](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/StringBuilder.html)是它的文档。看一看。

# javascript - 如何获得1 td的实际高度？

> ID：10185201
> 
> 赞同：0
> 
> 时间：2012-04-17T04:47:34.867
> 
> 标签：javascript, asp.net

我有一张这样的桌子：

```
<table>
<tr>
<td id='tdleftcontent' style='border:1px solid red;'>
    <asp:Label ID='lbl' runat="server"></asp:Label>
</td>
</tr>
</table> 
```

使用控制 lbl，在后面的代码中，我将文本设置为 'img src='/CMS/Images/News/event1.JPG' border='0' />'

```
 protected void Page_Load(object sender, EventArgs e)
    {
        this.lbl.Text = "<img alt='' src='/CMS/Images/News/event1.JPG' border='0' />";
    } 
```

在 Javascript 中，我有一个函数来获取这个 td 的高度：

```
<script type="text/javascript">
$(document).ready(function(){
    var h = document.getElementById('tdleftcontent').offsetHeight;
    alert(h);
}); 
```

但结果是：h=22px。这意味着该图像尚未显示在网络上。结果图片： [http ://upanh.nguoihoian.info/di-534E.jpg](http://upanh.nguoihoian.info/di-534E.jpg)

请帮我解决这个问题。非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T05:46:10.697

不要`$(document).ready`在这里使用。它将在*DOM*就绪时执行处理程序，即通常不加载图像。改用`$(window).load`，甚至更好地在图像本身上注册加载处理程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T05:36:34.463

我建议像这样使用[Image](http://msdn.microsoft.com/en-us/library/f3zw1470.aspx)控件：

```
<asp:image runat="server" ImageUrl="~/CMS/Images/News/event1.JPG" BorderWidth="0" /> 
```

对于 JavaScript，只需使用 jQuery[高度](http://api.jquery.com/height/)函数获取高度。

```
<script type="text/javascript">
$(window).load(function(){
    var h = $('#tdleftcontent').height();
    alert(h);
});
<script> 
```

jQuery 中还有 innerHeight 和 outerHeight 函数以满足更具体的需求。

已编辑：其他人提出了一个很好的观点，即在加载图像之前高度值将不可用。如果您不想等到页面上的所有内容都加载完毕，那么您可以创建图像客户端并附加到它的加载事件。在图像添加到 DOM 之后，请注意设置 src 属性。

.NET 代码

```
this.lbl.Attributes["data-src"] = "/CMS/Images/News/event1.JPG"; 
```

JavaScript

```
<script type="text/javascript">
$(document).ready(function(){
    var $td = $('#tdleftcontent');
    $('<img border="0" />')
        .bind('load', function() {
            $td.height();
            alert(h);
        })
        .bind('error', function() {
            $(this).hide();
        })
        .appendTo($td)
        .attr('src', $td.find('span').data('src'));
});
<script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T04:55:11.100

尝试使用`<asp:placeholder>`代替`<asp:label>`，并在浏览器中查看源代码以确保正确创建 IMG 标记并且 SRC 属性确实存在。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-17T05:59:28.660

请注意，`$(document).ready()`一旦 DOM 准备好，就会执行您的代码。如果您想在加载图像后执行代码，那么您应该`$(window).load(function () {})`

# sharepoint - 不在 SharePoint 2007 中显示 SPList 的 Web 部件

> ID：10185203
> 
> 赞同：0
> 
> 时间：2012-04-17T04:47:42.150
> 
> 标签：sharepoint, web-parts

我有一个以编程方式创建的具有自定义内容类型的 SPList，它被添加到快速启动中。每次单击快速启动上的链接时，页面都会出现一个显示列表内容的 Web 部件。

我不希望这样...我希望 Web 部件消失，所以当我访问该页面时，上面根本没有 Web 部件。有没有办法以编程方式做到这一点？我不想手动删除 Web 部件。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T15:27:42.240

如果您不想在快速启动中使用列表视图页面链接，您可以在列表定义中或从代码中为“快速启动”指定 false。为什么不直接创建一个没有列表视图 Web 部件的 Web 部件页面，然后添加指向该页面的链接以快速启动？您需要更改 allitems 页面吗？

# django - 从 Dajax 函数中检索当前登录的用户

> ID：10185204
> 
> 赞同：0
> 
> 时间：2012-04-17T04:47:43.577
> 
> 标签：django, dajaxice

我目前正在模板中使用 dajaxice 调用，我希望能够在我的 dajax 调用的 python 函数中检索当前登录的用户。

我知道 dajax 将“请求”参数传递给包含会话 ID 的 python 函数，但我没有运气确定变量“请求”的类型。我尝试将其转换为字符串、将其解码为 JSON 字符串以及多种其他方法。

我想做的就是在 dajax 调用的 python 函数中找到当前登录的用户，而不是从实际模板中传递它，因为这在安全方面是不可靠的。

我的相关代码的分解版本：

达贾克斯电话：

```
Dajaxice.fortura_test.rbac_test(rbac_callback,{}); 
```

rbac_test():

```
@dajaxice_register
def rbac_test(request):
    import re;
    from django.contrib.sessions.models import Session
    from django.contrib.auth.models import User
    request_string = str(request);
    request_list = [];
    for x in request_string:
        request_list.append(x);
    request_string = ''.join(request_list);
    m = re.match(r"'sessionid'\: '([A-Za-z0-9]+)'",request_string);
    if m is not None:
        session_key = m.group(0);
        session = Session.objects.get(session_key=session_key)
        uid = session.get_decoded().get('_auth_user_id')
        user = User.objects.get(pk=uid)
        return user.id
    else:
        return 'No match'; 
```

我目前使用的上述方法不太奏效，但我觉得应该有比我目前处理这个更好的方法。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T05:57:37.027

如果这是一个普通的 Django 视图，那么`request`它就是 Django 的[HTTPRequest 对象](https://docs.djangoproject.com/en/dev/ref/request-response/#httprequest-objects)，您可以使用该对象获取当前登录的用户，该用户`request.user`将返回一个[`contrib.auth.models.User`](https://docs.djangoproject.com/en/dev/topics/auth/#methods)实例（您可以确保他们已通过 using 登录`request.user.is_autenticated()`）

# apache-flex - Swf 加载器内容的缩放和移动

> ID：10185207
> 
> 赞同：0
> 
> 时间：2012-04-17T04:47:52.057
> 
> 标签：apache-flex

我想缩放/缩放特定值（例如 x、y、width、height）的 swf 内容。所选坐标/所选坐标将对容器可见。

我正在使用 SwfLoader 加载 swf 内容并且我想要缩放。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T05:30:55.703

我认为无法缩放 swfloader 的特定区域，您可以使用 scaleX、scaleY 属性将 swfloader 缩放一定百分比，但是如果要缩放特定区域，则必须缩放整个 swf 并安排 swf 的水平和垂直滚动位置，以便选定区域位于屏幕中央。它看起来像缩放选定区域，但实际上缩放整个 swf....

# ruby-on-rails - 共享外键

> ID：10185210
> 
> 赞同：0
> 
> 时间：2012-04-17T04:48:08.460
> 
> 标签：ruby-on-rails, database-design

我正在寻找以下设计方法。我有三个模型 [regions, groups, items] 用于生成树形菜单（祖先 gem）

```
class Region < ActiveRecord::Base
 has_many :groups
 has_many :items
end

class Group < ActiveRecord::Base
 belongs_to :region
 has_many :items
 has_ancestry
end

class Item < ActiveRecord::Base
 belongs_to :region
 belongs_to :group
end 
```

如您所见，为了构建菜单树，我为组和项目分配了一个区域：Region(s) => Group(s) => Item(s)。

项目的区域在整个应用程序中广泛使用，但是组的区域仅在呈现菜单时使用。

我不喜欢该组的区域可能与其任何项目的区域或任何它的后代不同。我确信从组中继承项目的区域是不合适的，因为项目可能没有组，组也不能从项目的唯一区域继承其区域（因为如果包含不同区域的项目由同一组同一组在不同区域下出现两次）

任何人都可以提出另一种方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T08:05:18.440

I'd have `GroupedItem` and `UngroupedItem` that inherit from `Item` as such:

```
class Item < ActiveRecord::Base
end

class GroupedItem < Item
  belongs_to :group
end

class UngroupedItem < Item
  belongs_to :region
end 
```

You'd need to have a `type` column in your `Items` table. [More](http://api.rubyonrails.org/classes/ActiveRecord/Base.html) [information](http://juixe.com/techknow/index.php/2006/06/03/rails-single-table-inheritance/) about Single Table Inheritance with ActiveRecord.

# meteor - 如何同时运行两个流星应用程序

> ID：10185211
> 
> 赞同：0
> 
> 时间：2012-04-17T04:48:28.943
> 
> 标签：meteor

当我运行第二个流星应用程序时，我收到以下消息：

> 无法监听 3000 端口。也许另一个 Meteor 正在运行？
> 
> 在同一个应用程序目录中运行两个 Meteor 副本将不起作用。如果其他东西正在使用端口 3000，您可以使用 --port 指定替代端口。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T06:41:31.497

要在不同的端口（例如 3002）上启动流星，只需运行：

```
meteor --port 3002 
```

在项目目录中。

# android - Eclipse 调试模式和异常

> ID：10185216
> 
> 赞同：3
> 
> 时间：2012-04-17T04:48:56.013
> 
> 标签：android, eclipse, debugging, exception

我确定以前有人问过这个问题，但是我看了看并没有在任何地方看到明确的答案。

在 Eclipse 中，在调试 Android 程序时，如果我导致异常，Eclipse 总是希望拉出包含实际 throw 语句的源文件。我没有附加源（我也不想），所以每次我遇到异常时，它都会为 android.jar 弹出这个“找不到源”窗口。

我知道我可以查看 logcat 来查看调用堆栈，但是有没有办法让 eclipse 自动打开我导致异常的文件（调用堆栈中存在源的最深文件），而不是 android 。罐？这似乎是一件微不足道的事情，但相反，我每次都被困在这个无用的页面上，当我认为一个聪明的解决方案是自动从我的源代码中提取导致问题的文件时。相反，我必须查看调用堆栈，返回“java”视图，自己找到有问题的文件并打开它，这非常繁重。

有什么方法可以改进我的 IDE 设置，以便我立即获得比查看这个无用的类未找到页面更有用的信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T08:08:15.990

尝试使用[步骤过滤器](http://www.eclipsezone.com/eclipse/forums/t83338.rhtml)（可在属性中编辑：窗口 - 首选项 - Java - 调试 - 步骤过滤器）。这样你就可以忽略某些你没有可用资源的包。

# css - 什么可能是 CSS 导致在页脚下中断的原因

> ID：10185222
> 
> 赞同：1
> 
> 时间：2012-04-17T04:49:41.367
> 
> 标签：css

正如您在图像中看到的，在页脚下方有一个不是主体的白色部分。

我检查了所有 div 是否已关闭>我正在使用 html5。我想知道是否有人可以提出这个问题的可能原因。

提前致谢。

![页脚下方的白色部分](../Images/60fb74038bfe401e5471d650257a959c.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T04:54:22.767

尝试将`html`' 高度设置为 100%。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T06:55:24.417

我曾经遇到过同样的问题。我通过删除网站不需要的 css 文件解决了这个问题，它破坏了默认规则。

# c# - 无法将类型“string”隐式转换为“int”错误

> ID：10185244
> 
> 赞同：0
> 
> 时间：2012-04-17T04:52:52.713
> 
> 标签：c#

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace Assignment2
{
class Program
{
    static void Main(string[] args)
    {
        int Value1,Value2,result,a;

        Console.Write("Enter Value 1: ");
        Value1 = Convert.ToInt32(Console.ReadLine());

        Console.Write("Enter Value 2: ");
        Value2 = Convert.ToInt32(Console.ReadLine());

        Console.WriteLine("Choose an arithmetic operator:");

        Console.WriteLine("\t1\. +(add)");
        Console.WriteLine("\t2\. -(subtract)");
        Console.WriteLine("\t3\. *(multiply)");
        Console.WriteLine("\t4\. /(divide)");
        Console.Write("\t5\. %(mod)");

        Console.Write("\n\n");

        a = Convert.ToInt32(Console.ReadLine());

        switch (a)
        {
            case"1":
                Console.WriteLine("Operator is: Add");
                result=Value1+Value2;
                Console.WriteLine("Result: "+result);
                break;

            case"2":
                Console.WriteLine("Operator is: Subtract");
                result=Value1-Value2;
                Console.WriteLine("Result: "+result);
                break;

            case"3":
                Console.WriteLine("Operator is: Multiply");
                result=Value1*Value2;
                Console.WriteLine("Result: "+result);
                break;

            case"4":
                Console.WriteLine("Operator is: devide");
                result=Value1/Value2;
                Console.WriteLine("Result: "+result);
                break;

            case"5":
                Console.WriteLine("Operator is: mod");
                result = Value1 % Value2;
                Console.WriteLine("Result: "+result);
                break;
        }
    }
}
} 
```

我有基本的 C#，我尝试制作一个可以使用 Case 语句运行 5 次算术运算的程序，在我完成编码之后..我发现 5 个错误让我卡住了..输出总是带有 2 个结果（即我选择添加..会出现2个输出，它的加减同时..有人可以帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T04:55:34.113

违规代码是您的案例陈述。`a`是一个`int`。您的案例陈述都使用`string`s。只需删除数字周围的引号：

```
switch(a)
{
    case 1: 
            // some code
            break;
    case 2: 
            // some code
            break;
    // rest of cases
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T04:56:40.620

您正在转换`a`为 int 但您的 switch 语句将其与字符串匹配。将其更改为`case 1:`而不是`case "1"`解决问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T04:58:01.590

删除引号以防万一。IE

替换`case "1":`为`case 1:`

# iphone - 加载到地图中，地址簿中单个人的多个地址

> ID：10185247
> 
> 赞同：0
> 
> 时间：2012-04-17T04:53:12.307
> 
> 标签：iphone, ios, mkmapview, abaddressbook

我正在加载带有图钉的地图视图。根据地址簿中某个人的地址，图钉落在该位置上。如果此人有一个地址，则地图加载正常。但是如果他有多个地址，那么地图上只会显示一个地址位置。但是代码会执行以加载地址簿中此人的所有地址位置。这是我所做的。

```
for (NSDictionary *addressDict in address) 
    {
        firstName = (NSString *)ABRecordCopyValue(person, kABPersonFirstNameProperty); 
        lastName = (NSString *)ABRecordCopyValue(person, kABPersonLastNameProperty); 
        // contactName = [firstName stringByAppendingString:lastName];
        NSString *country = [addressDict objectForKey:@"Country"];
        NSString *streetName = [addressDict objectForKey:@"Street"];
        NSString *cityName = [addressDict objectForKey:@"City"];
        NSString *stateName = [addressDict objectForKey:@"State"];

        if (streetName == (id)[NSNull null] || streetName.length == 0 ) streetName = @"";
        if (stateName == (id)[NSNull null] || stateName.length == 0 ) stateName = @"";
        if (cityName == (id)[NSNull null] || cityName.length == 0 ) cityName = @"";
        if (country == (id)[NSNull null] || country.length == 0 ) country = @"";

        NSString *fullAddress = [streetName stringByAppendingFormat:@"/%@/%@/%@", cityName, stateName, country];
       NSLog(@"full address %@", fullAddress);

        mapCenter = [self getLocationFromAddressString:fullAddress];
        if(stateName != NULL || country != NULL || streetName != NULL || cityName != NULL){

            if ((mapCenter.latitude == 0) && (mapCenter.longitude == 0))
            {
                //  Alert view                     
            }
            else{

            addressFieldSearchBar.text = fullAddress;
            [NSThread detachNewThreadSelector:@selector(displayMYMap) toTarget:self withObject:nil];
        }
        }
    }

-(void)displayMYMap
{
NSAutoreleasePool *pool = [[NSAutoreleasePool alloc] init];

MKCoordinateRegion region = mapView.region; 
MKCoordinateSpan span; 
span.latitudeDelta=100; 
span.longitudeDelta=100; 

if(addAnnotation == nil){
    if([firstName length] < 1 && [lastName length] < 1){
        firstName = @"No Name";
        lastName = @"";
    }
    else if([firstName length] < 1){

        firstName = lastName;
    }

    addAnnotation = [[[MyAddressAnnotation alloc] initWithCoordinate:mapCenter title:firstName SubTitle:lastName Recordid:passedRecordID]autorelease];
    [mapView addAnnotation:addAnnotation];
}
else{
    //       Alert view
} 
```

编辑：当我 NSLog 地址时，我得到地址簿中的所有地址。当我调试时，加载地图视图的代码在所有地址情况下都会执行。但是在地图中，只加载了一个引脚（人的第一个地址）。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T13:42:05.140

由于. `if(addAnnotation == nil)`_ `-(void)displayMYMap`当您的第一个注释完成后，`addAnnotation`不再为零。更改条件并检查

# javascript - javascript：函数未定义？- 数据绑定

> ID：10185250
> 
> 赞同：0
> 
> 时间：2012-04-17T04:53:53.283
> 
> 标签：javascript

我想知道为什么我的代码说当我尝试使用数据绑定做一个简单的代码时它*没有定义：/*

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>
<object name="login" id="login" classid="CLSID:333C7BC4-460F-11D0-BC04-0080C7055A83">
    <param name="DataURL" value="member.txt"/>
    <param name="UseHeader" value="true"/>
    <param name="TextQualifier" value=""/>
    <param name="FieldDelim" value="|"/>
</object>

    <script>
        var rs = login.resultset;
        function validation()
        {
            rs.moveFirst();
            while(rs.moveNext())
            {           
                if(document.getElementById("txtid")== rs(0) && document.getElementById("txtpass")==rs(1))
                {
                    alert("Login Succeed");
                    return; 
                }
            }
            alert("Email or Password Wrong");
            return;
        }
    </script>

</head>

<body>
<form>
Username: <input type="text" id="txtid" /> <br/>
Password: <input type="text" id="txtpass" /><br/>
<input type="submit" value="game start" id="btnstart" onclick="validation()"/>
</form>
</body>
</html> 
```

错误：`login is not defined`

但我知道它已定义！我试图搜索这个，但我不知道我的代码有什么问题：/请帮助？

**编辑：** 我已经将我的代码更新为这样的：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>
</head>

<body>

<form>
Username: <input type="text" id="txtid" /> <br/>
Password: <input type="text" id="txtpass" /><br/>
<input type="submit" value="game start" id="btnstart" onclick="validation()"/>
</form>

<object name="login" id="login" classid="CLSID:333C7BC4-460F-11D0-BC04-0080C7055A83">
        <param name="DataURL" value="member.txt"/>
        <param name="UseHeader" value="true"/>
        <param name="TextQualifier" value=""/>
        <param name="FieldDelim" value="|"/>
</object>

<script>
    var login = document.getElementById('login');
    var rs = login.resultset;
    function validation()
    {
        rs.moveFirst();
        while(rs.moveNext())
        {           
            if(document.getElementById("txtid")== rs(0) && document.getElementById("txtpass")==rs(1))
            {
                alert("Login Succeed");
                return; 
            }
        }
        alert("Email or Password Wrong");
        return;
    }
</script>

</body>
</html> 
```

我得到的下一个错误是`rs is undefined`当我单击按钮时。难道我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T05:37:28.140

在您的代码中：

```
> <object name="login" id="login" ...>
>   ...
> </object>
>  <script>
>          var rs = login.resultset; 
```

您期望具有 id *login*的元素可作为全局变量使用，它始终是某些浏览器，而其他浏览器仅在某些条件下可用。这从来都不是一个好主意，也不应该被使用，总是使用标准 DOM 方法引用元素，在本例中为*getElementById*：

```
 var el = document.getElementById('login'); 
```

此外，对象元素没有标准的*结果集*属性，而且您还没有定义一个，因此期望上述表达式返回的 DOM 元素将具有结果集属性是不合理的。至少，在尝试使用*rs*变量之前，您应该测试它的值是否适合您打算使用它的目的，例如

```
 if (rs && rs.moveFirst) {
      rs.moveFirst(); 
```

等等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T05:10:37.767

*   内容应该放在`<body>`而不是放在`<head>`。唯一可以合理放置的东西`<head>`是脚本（不立即操作 DOM 的）、样式和杂项。关于您的页面的元数据。页面中出现的所有其余部分都应该在`<body>`

*   虽然我最近知道`id`'ed 元素公开了一个与 id 同名的全局变量并引用它 ID 的元素，但您不应该以这种方式引用元素。你应该做一些`document.getElementById()`安全的事情。

*   为了安全地执行脚本，`<script>`请在您的内容之后但在您关闭`<body>`元素之前放置标签。这确保您的脚本引用的所有元素都已经存在。

* * *

```
<!DOCTYPE html>
<html>
    <head>
       <!-- title, meta, styles, non-DOM scripts up here -->
    </head>
    <body>

        <!-- everything that appears in the page here -->

        <object id="login">
           <!-- ... --->
        </object>

        <script>
            //after the content, DOM manipulation scripts go here

            var login = document.getElementById('login');

            //now "login" is the object element

        </script>

    </body>
</html> 
```

# android - 如何计算触摸动作

> ID：10185254
> 
> 赞同：1
> 
> 时间：2012-04-17T04:54:36.590
> 
> 标签：android, touch

我正在编写一个程序，允许用户通过触摸来绘制直线或曲线。但是当用户手指从靠近点 1 的点快速移动到靠近点 2 的点，反之亦然 8-9 次时，屏幕必须被锁定。我想知道如何在正确的时间锁定屏幕。请帮我。

# google-chrome - Chrome 插件 - 更新 URL？

> ID：10185256
> 
> 赞同：0
> 
> 时间：2012-04-17T04:54:43.877
> 
> 标签：google-chrome, add-on

这是我的清单 JSON：

```
{
  "name": "Name of addon",
  "version": "1.0.0",
  "description": "Description",
  "icons": {
    "48" : "icon-48.png",
    "128" : "icon-128.png"
  },
  "content_scripts": [
    {
      "matches": ["http://*.youtube.com/watch?*","http://youtube.com/watch?*","https://*.youtube.com/watch?*","https://youtube.com/watch?*"],
      "js" : ["script.js"]
    }
  ]
} 
```

我在我的服务器上托管这个插件，而不是在 Chrome 应用商店或任何其他外部位置。

我希望以某种方式将版本跟踪集成到插件中，因此一旦发布新版本，我就可以在某处编辑文件，Chrome 会知道提醒用户下载新版本吗？

这可能吗？

例如 - 这是版本 1.0.0

假设我创建版本 1.1.0 并将其上传到我的服务器。

然后我编辑一个文件，例如：[http](http://www.mysite.com/file) ://www.mysite.com/file并将版本号更改为 1.1.0 - 当用户再次加载 Chrome 时，插件将检查该链接以查看是否有新版本可用然后从 X url 下载更新。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T05:02:11.093

看看这个：

[http://code.google.com/chrome/extensions/autoupdate.html](http://code.google.com/chrome/extensions/autoupdate.html)

# ruby - 在代码中运行 Ruby 单元测试(Test::Unit)

> ID：10185258
> 
> 赞同：1
> 
> 时间：2012-04-17T04:54:52.790
> 
> 标签：ruby, unit-testing, command-line, tdd, bdd

有人知道我如何在 Ruby 代码本身中运行单元测试（Test::Unit）吗？我在网上找不到任何可以帮助我的东西。众所周知，您通过执行“ruby your_test_name.rb”从命令行运行单元测试我基本上不想从命令行运行，但我想在 ruby​​ 代码本身中运行。有人有什么想法吗？提前感谢您的所有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T05:07:28.347

你怎么能想象呢？

如果您想在更改后自动启动代码（测试），请查看**gem guard**。

1) 设置守卫

添加到您的 Gemfile

```
gem 'guard-test' 
```

比跑

```
bundle install 
```

或者如果你不使用捆绑

```
gem install guard-test 
```

2) 生成保护文件

```
guard init test 
```

3）运行它

```
guard 
```

[更多关于守卫](https://github.com/guard/guard-test)

# c - 在 Cuda 内核中调用 Opencv 函数

> ID：10185267
> 
> 赞同：1
> 
> 时间：2012-04-17T04:55:31.660
> 
> 标签：c, opencv, cuda, parallel-processing, opencl

我打算执行 4 张图像的全景图。为此，我打算处理图像 1 和 2、2 和 3，然后处理 3 和 4，得到单应性，然后拼接图像。

现在，可以并行获取每个图像中的 SIFT 特征。因此，在 GPU 上使用 CUDA，我打算在将图像传递给内核后，在每个内核中调用 Surffeatureextractor 和描述符。

现在，我想知道是否可以在 cuda 内核中编写 opencv 函数？例如，如果我的内核是

```
 extract_sift(image, *keypoints, *descriptor)
    {
    //I want to call sift descriptor from an external opencv lib here } 
```

请让我知道如何执行此操作，或将我引导至某些可以帮助我执行此操作的链接。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T06:32:32.890

你问的是不可能的。如果您了解 OpenCL 架构，原因就很清楚了：内核在不同的设备上运行，具有不同的内存、架构等，并且所有与它们的通信都是通过缓冲区进行的。您可以将描述符作为结构（更准确地说是指向该结构的指针）传递给内核，前提是您还在 OpenCL 代码中声明了相同的结构。

# multithreading - 汇编/多任务处理中的内存寻址

> ID：10185276
> 
> 赞同：0
> 
> 时间：2012-04-17T04:56:30.933
> 
> 标签：multithreading, assembly, multitasking, addressing, relative-addressing

我了解机器代码中的程序如何将内存中的值加载到寄存器中、执行跳转或将寄存器中的值存储到内存中，但我不明白这对多个进程是如何工作的。一个进程是动态分配内存的，所以它必须使用相对寻址吗？这是自动完成的（意味着有执行相对跳转的汇编指令等），还是程序必须“手动”将正确的偏移量添加到它所寻址的每个内存位置。

我还有一个关于多任务处理的问题，这有点相关。未运行的操作系统如何停止线程并继续下一个线程。这是通过定时中断完成的吗？如果是这样，那么如何为线程保留寄存器中的值。在将控制权交给不同的线程之前，它们是否已保存到内存中？或者，不是定时中断，线程只是简单地选择一个放弃控制的好时机。在定时中断的情况下，如果线程被赋予处理器时间而它不需要它会发生什么。它是否必须浪费它，它可以手动调用中断，还是它会提醒操作系统它不需要太多时间？

编辑：或者在运行之前编辑可执行文件以补偿正确的偏移量？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T05:49:01.757

这不是它的工作原理。所有现代操作系统都会虚拟化可用内存。给每个进程一个幻觉，即它拥有 2 GB 内存（或更多）并且不必与任何人共享它。执行此操作的机器中的关键组件是[MMU](http://en.wikipedia.org/wiki/Memory_management_unit)，现在内置在处理器本身中。这种虚拟化的另一个核心特性是它隔离了进程。一个行为不端的人不能让另一个人失望。

是的，时钟滴答中断用于中断当前运行的代码。处理器状态只是保存在堆栈上。然后，操作系统调度程序检查是否有任何其他线程准备好运行并且具有足够高的优先级来排在第一位。一些额外的代码确保每个人都能得到公平的份额。然后只需将 MMU 设置为在另一个线程上恢复执行即可。如果没有线程准备好运行，则 CPU 将使用 HALT 指令物理关闭。被下一个时钟中断再次唤醒。

这是一万英尺的视图，任何关于操作系统设计的书都很好地涵盖了它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T05:04:49.617

> 一个进程是动态分配内存的，所以它必须使用相对寻址吗？

不，它可以使用相对或绝对寻址，具体取决于它试图解决的问题。

至少从历史上看，各种不同的寻址模式更多地是关于本地内存而不是远程内存。相对寻址适用于接近当前地址的内存地址，而绝对寻址更昂贵，但可以解决任何问题。对于现代虚拟内存系统，这些区别可能不再需要。

> 一个进程是动态分配内存的，所以它必须使用相对寻址吗？这是自动完成的（意味着有执行相对跳转的汇编指令等），还是程序必须“手动”将正确的偏移量添加到它所寻址的每个内存位置。

我不确定这个。这通常由编译器处理。同样，现代虚拟内存系统使这种复杂性变得不必要。

> 在将控制权交给不同的线程之前，它们是否已保存到内存中？

是的。通常，所有状态（寄存器等）都存储在过程控制块 (PCB) 中，加载新上下文，从新 PCB 加载寄存器和其他上下文，并在新上下文中开始执行。PCB 可以存储在堆栈或内核内存中，或者可以利用处理器特定的操作来优化此过程。

> 或者，不是定时中断，线程只是简单地选择一个放弃控制的好时机。

线程可以让出控制权——将自己放回运行队列的末尾。它也可以等待一些 IO 或休眠。然后线程库将线程放入等待队列并切换到另一个上下文。当 IO 准备好或 sleep 到期时，线程被放回运行队列。互斥锁也是如此。它在等待队列中等待锁。一旦锁可用，线程将被放回运行队列。

> 在定时中断的情况下，如果线程被赋予处理器时间而它不需要它会发生什么。它是否必须浪费它，它可以手动调用中断，还是它会提醒操作系统它不需要太多时间？

线程要么可以运行（执行 CPU 指令），要么正在等待——在 IO 或睡眠中。它可以要求让步，但通常它是通过 [再次] 休眠或等待 IO 来实现的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-27T15:58:16.573

我可能很晚才进入这个问题，但是，它可能对其他一些程序员有用。首先 - 理论。

现代操作系统将虚拟化内存，为此，它在其系统内存区域内维护一系列页面指针。每个页面都有固定的大小（通常为 4K），当任何程序寻找一些内存时，它分配的内存地址是使用内存页面指针虚拟化的。它近似于前一代处理器中“段”寄存器的行为。

现在，当调度程序决定让另一个进程运行时，它可能会将前一个进程保留在内存中，也可能不会。如果它保存在内存中，那么调度程序所做的就是保存整个寄存器快照（现在，包括 YMM 寄存器 - 这个位之前是一个复杂的问题，因为没有单个指令可以保存整个上下文：在 XSAVE 上阅读)，并且它具有固定格式（可在英特尔软件手册中找到）。这与正在使用的内存页面上的信息一起存储在调度程序本身的内存空间中。

但是，如果调度程序需要将即将进入睡眠状态的当前进程上下文“转储”到硬盘上——这种情况通常发生在正在唤醒的进程需要大量内存时，那么调度程序会写入内存页面磁盘块中的文件（称为页面文件 - 内存的保留区域 - 也是“老祖母智慧”的来源，即页面文件必须等于实际内存的大小）并且调度程序将内存页面指针地址保留为页面文件中的偏移量。当它醒来时，调度程序从页面文件中读取偏移地址，分配实际内存并填充内存页面指针，然后从磁盘块中加载内容。

现在，回答您的具体问题： 1\. 您只需要使用相对寻址，还是可以使用绝对寻址？

和。您可以使用其中任何一种——无论您认为是绝对的还是相对的，因为内存页面指针以不可见的格式将该地址相对化。除了操作系统本身的内核之外，任何地方（包括 io 设备内存）都没有真正的绝对内存地址。为了测试这一点，您可以反汇编任何 .EXE 程序，以查看入口点始终是 CALL 0010，这清楚地表明每个线程获取不同的“0010”来开始执行。

2.  线程如何获得生命，如果它放弃未使用的切片会怎样。

答。线程通常会得到一个切片——现代系统通常有 20ms 的标准——但这有时会在特殊用途的编译中改变，用于没有很多硬件中断要处理的服务器——按照它们在进程队列中的位置顺序。线程通常通过调用函数 sleep() 来放弃其切片，这是一种正式的（也是非常好的方式）放弃时间切片的余额部分。大多数实现异步读取或中断操作的库在内部调用 sleep()，但在许多情况下，顶级程序也调用 sleep() - 例如创建时间间隔。调用 sleep 肯定会改变进程上下文 - 实际上 CPU 没有使用 NOP 来自由休眠。

另一种方法是等待 IO 完成，处理方式不同。请求 IO 进程的程序将放弃其时间片，并且进程调度程序将此线程标记为处于“等待 IO”状态 - 并且在其预期的 IO 之前，处理器不会为该线程分配时间片已完成或超时。此功能有助于程序员，因为他们不必显式编写 sleep_until_IO() 类型的接口。

相信这会让你在探索中走得更远。

# php - 在网站上播放音频文件

> ID：10185280
> 
> 赞同：0
> 
> 时间：2012-04-17T04:57:13.437
> 
> 标签：php

我只是想知道如何以及应该使用哪个音频播放器来允许我的访问者在我的基于 PHP 的网站上播放音频文件。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T05:26:18.013

试试这个

```
<?php
$path = "PATH OF YOUR AUDIO FILE";
$image = "PATH OF YOUR IMAGEFILE";;?>

<div class="demomain">
<br>
<div style="margin: 0 0 0 30px;" id="mediaspace" name="mediaspace"><embed height="395"  width="500" flashvars="javascriptid=JW&amp;autostart=false&amp;width=500&amp;height=395&amp;image=<?php echo $image; ?>&amp;file=<?php echo $path; ?>" allowfullscreen="true" wmode="transparent" allowscriptaccess="always" quality="high" name="JW" id="JW" style="undefined" src="http://player.longtailvideo.com/player4.6.swf" type="application/x-shockwave-flash">       </div>
<?php
echo '<script type="text/javascript">
var s1 = new SWFObject("","JW","500","395","9");
s1.addParam("allowscriptaccess", "always");
s1.addParam("wmode","transparent");
s1.addParam("allowfullscreen","true");
s1.addVariable("javascriptid", "JW");
s1.addVariable("autostart","false");
s1.addVariable("image","' . $image . '"));
s1.addVariable("width","500");
s1.addVariable("height","395");';
echo 's1.addVariable("file","' . $path . '");'; 
echo 's1.write("mediaspace");';
echo '</script>';
?>
</div> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-17T05:31:20.593

HTML 5 有一个音频播放器标签，参见： [http](http://www.w3schools.com/html5/att_audio_src.asp) ://www.w3schools.com/html5/att_audio_src.asp 主流浏览器都支持它，但取决于音频文件的格式

你可以看到这个：http: [//jplayer.org/](http://jplayer.org/)一个 jquery ，

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-17T11:04:08.600

开源的 jPlayer 运行良好并且非常可定制 - 使用 HTML/CSS 作为界面。如果可以，将使用 HTML5，如果不能，则回退到 Flash。需要 jQuery。

网址：http: [//jplayer.org/](http://jplayer.org/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-17T05:00:32.950

试试这个

```
<object height="81" width="100%">
  <param name="movie" value="http://player.soundcloud.com/player.swf?url=http%3A%2F%2Fapi.soundcloud.com%2Ftracks%2F32222617&amp;show_comments=true&amp;auto_play=true">
  </param>
  <param name="allowscriptaccess" value="always"></param>
  <embed allowscriptaccess="always" height="81" src="http://player.soundcloud.com/player.swf?url=http%3A%2F%2Fapi.soundcloud.com%2Ftracks%2F32222617&amp;show_comments=true&amp;auto_play=true&amp;repeat=1" type="application/x-shockwave-flash" width="100%" loop="yes" autoresume="1" repeat="1">
  </embed>
</object> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-17T05:01:35.930

你可以试试 Flash Player。我认为它会满足您的要求。当然你应该安装 flash 播放器，但实际上几乎所有的互联网用户都在他们的机器上安装了 flash 播放器。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-02-02T04:33:12.310

使用`<audio controls><source src="<?php echo $pathtofile ?>" type="audio/mpeg">Error loading</audio>`它它对我有用。

# c - 释放先前分配的内存后程序中止

> ID：10185281
> 
> 赞同：1
> 
> 时间：2012-04-17T04:57:14.873
> 
> 标签：c, dynamic, memory-management

我将向您寻求一些帮助，该程序实现了搜索计划算法，非常非常简单。好吧，我遇到的问题对我来说有点奇怪：在为函数中本地声明的简单字符数组分配内存后，我处理了这个数组，它具有所有预期的行为并且一切正常，但是当我调用free() 函数在函数结束之前对该数组执行，程序停止并中止。如果有人对这个问题有一些经验（或没有......）可以帮助我，我会非常感激。好吧，这里遵循一些“模拟”代码来显示我在说什么（这不完全是写的，而是：

```
char* v_AllTheWorld
char* v_ReadALineOfTheWorld;

v_AllTheWorld = malloc(COLUMNS * LINES * sizeof(char)); /*LINES and COLUMNS are defined constants*/

if(v_AllTheWorld == NULL)
{
    fprintf(stderr, "..."); //etc, etc.
    exit(1);
}

v_ReadALineOfTheWorld = malloc(COLUMNS * sizeof(char)); /*the "sizeof(char)" looks useless, but there's no point in talking about that here, i guess.*/

if(v_ReadALineOfTheWorld == NULL)
{
    fprintf(stderr, "..."); //etc, etc.
    exit(1);
}

while(/*some_condition (number of lines to be read)*/)
{
    //read data string from stream and stores in v_ReadALineOfTheWorld (fscanf);
    //appends the read data to v_AllTheWorld (strncat);
}

free(v_ReadALineOfTheWorld);
/*The program is stopping right after this call in the debug.*/

return v_AllTheWorld; 
```

我没有把函数的头部，它的声明，也没有详细表示流或数据是如何操作的，但是没有进行其他“malloc”或“free”的调用，所有的编写的代码是无条件执行的（在任何“如果”或类似的情况下）。当然，最后一个行为不包括分配测试，但你明白我的意思。

所以，好吧，我希望我这样做是正确的，我希望我以正确的方式详细说明了问题，我希望你能帮助我。

哦，我差点忘记了：你可能注意到了，这个程序是用 C 语言编写的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T05:01:08.573

如果您在`v_ReadALineOfTheWorld`. 一些`malloc`库将有关`malloc`d 区域的信息存储在该区域周围的包装器中，如果您损坏该信息`free`可能会崩溃。

# android - android多人游戏应用程序使用什么线程或服务

> ID：10185288
> 
> 赞同：1
> 
> 时间：2012-04-17T04:57:55.557
> 
> 标签：android

需要一些帮助。所以我正在android中创建一个多人游戏应用程序。基本上我有同时运行的线程，如 UI 线程、gameEngine 线程、连接到服务器线程。现在我的应用程序使用了大约 80% 的 CPU 资源。我认为这与多线程有关。这是正常的吗？

所以我的问题是我是否使用服务连接到服务器？或线程是好的？游戏应用程序特别是多人游戏应用程序的典型 CPU 使用率是多少？

谢谢。:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T18:58:56.560

要连接服务器，我真的推荐[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)

# php - 自定义 smarty php 插件中的多维数组

> ID：10185292
> 
> 赞同：2
> 
> 时间：2012-04-17T04:58:10.483
> 
> 标签：php, arrays, multidimensional-array, smarty3

创建自定义 smarty php 插件方法时，是否可以将多维数组作为参数之一传递？

也许像

```
{function title="Hi" options=array('opt1', 'opt2', 'opt3')} 
```

上面是一个顺序数组，自然对关联数组的支持也一样大。

我已经搜索了几个小时的文档和论坛，但不幸的是，我能找到的所有东西都说“不”，但也已经 5 岁（**或更多**）

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T09:31:00.910

在 Smarty3 中可以。

此示例使用[PHP5.4 短数组语法](http://php.net/manual/en/language.types.array.php)，将 array() 替换为 []。像这样使用它：

```
{function title="Hi" options=['opt1' => ['one' => 1], 'opt2' => ['two' => 2] ]} 
```

另一个例子：分配给一个变量并循环它。

```
{$multidimension_array = ['opt1' => ['one' => 1], 'opt2' => ['two' => 2] ]}

{foreach $multidimension_array as $ak => $subarray}
    <p>Section "{$ak}":</p>
    <ol>
    {foreach $subarray as $k => $v}
        <li>{$k}: {$v}</li>
    {/foreach}
    </ol>
{/foreach} 
```

此外，请参阅[Smarty3 概述页面](http://www.smarty.net/v3_overview)，其中举例说明了此语法。

*注意：不需要 PHP 5.4。此语法在 Smarty 级别进行模拟。*

# javascript - 为什么警报不起作用？

> ID：10185294
> 
> 赞同：0
> 
> 时间：2012-04-17T04:58:20.707
> 
> 标签：javascript

我想知道在声明变量是否使用时有什么区别`var`。我使用了以下代码：

```
<body>
    <h1>New Web Project Page</h1>
    <script type="text/javascript">
        function test(){
            a = "hello";
            var b="world";
        }
        alert(a);
            alert(b);

    </script>
</body> 
```

为什么警报不起作用以及声明变量是否`var`在javascript中使用时有什么区别。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T04:59:41.377

`alert`不起作用，因为在 的情况下`b`，它不存在于正确的范围内，并且在`a`尚未实例化的情况下，因为您尚未调用该函数`test`

`var`创建一个变量，该变量在调用它的范围内是本地的。如果没有 var，您将创建一个全局变量。

```
function fn ( ) {
    var x = 0; // this variable is local to the function fn

    y = 10; // this variable is global and can be accessed
            // from anywhere after you call fn
} 
```

一般来说，除非有充分的理由不想使用全局变量。也就是说，您想使用`var`. 仅将变量放在它们需要的范围内可以更容易理解和维护代码。它还有助于缓解“魔术变量”问题。哪里有刚刚出现的变量，但你不知道从哪里来。它还使调试代码变得更容易，因为在 javascript 中，不存在的变量是动态创建的。但是，如果您只通过`var`和 jsLint 之类的工具使用局部变量，您将不会遇到变量名拼写错误的问题，从而使您的代码变得异常。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-17T05:00:25.477

声明一个变量而不`var`使其成为全局变量，因此任何东西都可以访问它。但是，您的警报不起作用的原因是您从未`test()`如此调用`a`或`b`从未被分配。如果您确实调用`test`（在警报之前），`b`将是未定义的，并且`a`应该读取 hello。

[关于变量和范围的一个很好的资源。](https://developer.mozilla.org/en/JavaScript/Guide/Values,_Variables,_and_Literals)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-17T04:59:54.293

您没有调用该`test()`功能。当`var`被排除时，变量变为全局变量，因此它们可用于所有代码。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-17T05:02:54.387

[此处](https://stackoverflow.com/questions/1470488/difference-between-using-var-and-not-using-var-in-javascript)已回答有关使用“var”的完全相同的问题

关于为什么您的警报不起作用，那是因为您没有调用“test()”函数。它刚刚被创建......它不会做任何事情。您需要调用它以填充变量。

# c++ - 在 Linux 中使用 gdb 调试 Firebreath

> ID：10185301
> 
> 赞同：1
> 
> 时间：2012-04-17T04:59:25.090
> 
> 标签：c++, plugins, gdb, firebreath

问题很简单。我的插件是由 Firebreath 创建的，想`gdb`在 Linux 中调试我的 *API.cpp 文件。

是的，我已经阅读[了这篇](http://www.firebreath.org/display/documentation/Debugging+Plugins#DebuggingPlugins-Linux)文章，并且得到了这个 PID：

```
30227  0.0  0.4 115024 12300 pts/2    Sl+  00:03   0:00 /usr/lib/chromium/chromium --type=plugin --plugin-path=/home/USER/Documents/mycode/0.1/npMyPlugin.so 
```

当我打开时，`gdb`我总是得到类似的输出：

```
Reading symbols from /usr/lib/libpcrecpp.so.0...(no debugging symbols found)...done.
Loaded symbols for /usr/lib/libpcrecpp.so.0
Reading symbols from /usr/lib/libssh2.so.1...(no debugging symbols found)...done.
Loaded symbols for /usr/lib/libssh2.so.1
Reading symbols from /usr/lib/libssl.so.1.0.0...(no debugging symbols found)...done.
Loaded symbols for /usr/lib/libssl.so.1.0.0
Reading symbols from /usr/lib/libcrypto.so.1.0.0...(no debugging symbols found)...done.
Loaded symbols for /usr/lib/libcrypto.so.1.0.0 
```

可能不是正确的过程。任何想法？

先谢谢了。

**更新 - 忽略消息** 谢谢大家的评论。好吧，我忽略了该消息并执行了以下操作：

```
(gdb) r  
The program being debugged has been started already.  
Start it from the beginning? (y or n)  
Program not restarted.  
(gdb) b 328  
No line 328 in the current file.  
Make breakpoint pending on future shared library load? (y or n) 
```

所以基本上`gdb`加载我的 MyPlugin.cpp 而不是我的 MyPluginAPI.cpp。任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T09:52:41.847

仅当您只有一个源文件时，才使用行号设置断点。

使用例如`b MyPluginAPI.cpp:328`或`b MyPluginAPI::myMethod()`代替。

# javascript - Window.Print() 的替代方案

> ID：10185307
> 
> 赞同：5
> 
> 时间：2012-04-17T04:59:42.373
> 
> 标签：javascript, jquery

我想创建一个打印按钮，以便在按下它时打印整个网页。我目前正在使用 Window.print() of javascript。但是我遇到了错误；每当我多次按下打印按钮时，链接就会停​​止工作。它有什么问题？在 jquery 或任何其他中是否有替代方法？我正在使用 grails 1.3.7。谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2017-09-28T23:24:36.967

另一种方法`window.print()`是

```
document.execCommand('print'); 
```

# jquery - jQuery 在函数内部工作......但不在外部？

> ID：10185309
> 
> 赞同：1
> 
> 时间：2012-04-17T04:59:54.477
> 
> 标签：jquery

在以下 jQuery 代码中：

```
 $(document).ready(function(){   

    function parse(document){
        $(document).find("entry").each(function(){
            $("#items").append(
                '<h3><a href="#">'+$(this).find('title').text()+'</a></h3>'+
                '<div> '+$(this).find('summary').text()+'</div>'
            );
            $('#items > div').hide();
        });
    }

    $.ajax({
        type: "GET",
        url: 'www.---.com', // name of file you want to parse
        dataType: "xml",
        success: parse,
        error: function(){alert("Error: Something went wrong");}
    });

            //ANIMATION
    $('#items h3').click(function(){
        $(this).next().animate({'height':'toggle'}, 'slow', 'easeOutBounce');
    });

    $('#footer').click(function(){alert("Why does this work, but not the bouncing panels?")});

}); 
```

当我将标记为 //ANIMATION 的部分放在 parse() 函数中时，它可以工作，但是非常不稳定。当放在它外面时，如上所述，它根本不会运行。

为什么？我真的很想知道为什么它不会运行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T05:07:20.093

原因是因为在`parse`您创建`h3`' 时它们不存在，所以事件处理程序不能绑定到它们。

使用`on` [http://api.jquery.com/on/](http://api.jquery.com/on/)

```
 $("#items").on('click', 'h3',
     function(){
         $(this).next().animate({'height':'toggle'}, 'slow', 'easeOutBounce');
     }
  ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T05:05:30.860

动态生成内容时，使用`delegate`而不是`click`.

```
$('#items h3').click(function(){ 
```

用。。。来代替

```
$('#items').delegate('h3','click',function(){ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-17T05:19:16.483

好吧，伙计们，这并不像人们想象的那么复杂。为了将事件绑定到动态创建的`h3`元素，您需要从调用时存在的元素委托它们（在这种情况下，`document`，因为触发事件`ready`意味着文档已准备好具有事件绑定到它）。为了使用 jQuery 进行委托`on`，您需要使用`selector`参数，如下所示：

```
$(document).on('click', '#items h3', function(){
    $(this).next().animate({'height':'toggle'}, 'slow', 'easeOutBounce');
}); 
```

（`this`指的是委托的目标，而不是根元素`document`本身。）

编辑：我想值得注意的是，为了性能起见，您应该在 DOM 中选择一个根元素，使其尽可能接近您尝试以事件为目标的元素，同时在初始事件时保持其就绪状态捆绑。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-17T05:01:55.210

我有同样的问题，我相信我通过将函数包装在一个空白的 jquery 函数中来修复它。

# c# - 解析 xsd 中的复杂类型元素并创建 xml 文件

> ID：10185311
> 
> 赞同：0
> 
> 时间：2012-04-17T05:00:10.203
> 
> 标签：c#, xsd, xml-parsing

我有一个 XSD 文件。我需要在运行时为 XSD 中的复杂类型创建 XML 文件。

我能够在 XSD 文件中找到复杂类型。但我无法将其解析为 XML 文件。

实际上有几个基于这个 XSD 文件创建的 XML 文件。如果删除了任何 xml 文件，我需要在运行时从 XSD 恢复它。

请帮助我是 XSD 的新蜜蜂。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T11:58:04.700

XSD 文件描述了 XML 文件的结构，但不描述其内容 - 通常有许多不同的 XML 文件，具有不同的内容，对应于同一个 XSD。例如对于

```
 <xs:element name="test">
    <xs:complexType>
      <xs:attribute name="a" type="xs:string" use="optional"/>
      <xs:attribute name="b" type="xs:string" use="optional"/>
    </xs:complexType>
  </xs:element> 
```

有效的 XML 可以是

```
<test a="something" b="something else"/> 
```

但是也

```
<test a="" b="2012"/> 
```

乃至

```
<test/> 
```

您将如何决定要生成哪个特定的 XML？或者您只需要与 XSD 匹配的任何 XML，只需要虚拟内容？

.NET Framework 包含一个完整的 XSD 对象模型 - 在命名空间`System.Xml.Schema`中，您可以使用这些类来加载 XSD 并相对容易地获取您需要的信息 - 您最终会得到一个`XmlSchemaComplexType`包含所有可能属性列表的实例和子元素及其类型，您可以使用它来生成 XML。

# c++ - 如何在 NS-2 中使用 printf

> ID：10185313
> 
> 赞同：1
> 
> 时间：2012-04-17T05:00:26.083
> 
> 标签：c++, ns2

我试图通过`printf`在函数中添加一个简单的语句来修改 NS-2 核心代码`Mac802_11::command`。但是，无论我添加多少次代码行 ( `printf("hello there!\n");`) 然后执行`./install`，都没有出现。

在显示文本之前还有其他要求吗？顺便说一句，我在 Ubuntu 11.04 上使用 NS-2.34。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T03:13:48.127

转到 Makefile 所在的 ns2.34 目录。在对现有 .cc 文件进行更改后发出 make 。不要发出安装。

ns-2.34$制作

# java - Java 线程延迟结束

> ID：10185314
> 
> 赞同：1
> 
> 时间：2012-04-17T05:00:32.403
> 
> 标签：java, eclipse, multithreading, javasound

我正在尝试在我的 java 应用程序中播放 mp3。用户可以单击按钮并更改声音。

声音和切换工作......但是，当用户尝试切换声音时，新歌开始在旧歌上播放大约一秒钟，然后旧歌停止播放。我正在尝试使用线程来处理所有事情。

我的 MP3 课：

```
import java.applet.*;
import javazoom.jl.player.Player;
import java.io.*;
import java.io.FileInputStream;
import java.net.*;

public class mp3 extends Thread implements Runnable{

    private Player sound;
    private InputStream path;  
    public mp3(String file_name) {
        path = mp3.class.getClassLoader().getResourceAsStream(file_name);  
    }
    public void run(){
        try {
            Player sound=new Player(path);
            sound.play();
        } catch(Exception e) {System.out.println(e);}
    }
} 
```

这就是我尝试在主游戏中运行代码的方式。MP3 对象称为歌曲。

当应用程序初始化时，将运行以下代码：

```
song = new mp3("default.mp3");
song.start(); 
```

有人试图更改它，运行以下代码：

```
song.stop();
song = new mp3(t+".mp3");
song.start(); 
```

其中 t 是文件名的参数。

我很确定问题出在 MP3 对象的运行函数中。我对线程完全陌生，所以我会很感激一些帮助。

同样，从调用“stop”到它实际停止播放的时间大约有 1 秒的延迟。所以也许在某个地方等待？

谢谢！

**编辑：** 我现在使用基于这里的代码：

> [http://introcs.cs.princeton.edu/java/faq/mp3/MP3.java.html](http://introcs.cs.princeton.edu/java/faq/mp3/MP3.java.html)

我创建了一个播放和关闭函数，定义如下：

```
 public void close() { if (player != null) player.close(); }

    // play the MP3 file to the sound card
    public void play() {
        try {
            FileInputStream fis     = new FileInputStream(filename);
            BufferedInputStream bis = new BufferedInputStream(fis);
            player = new Player(bis);
        } catch (Exception e) {
            System.out.println("Problem playing file " + filename);
            System.out.println(e);
        }

        // run in new thread to play in background
        new Thread() {
            public void run() {
                try { player.play(); }
                catch (Exception e) { System.out.println(e); }
            }
        }.start(); 
```

我的问题是关闭函数……播放器对象始终为空，关闭函数不执行……即使播放函数对其进行了初始化。为什么它是空的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T05:14:10.393

**编辑：**

在您的编辑中，如果多个线程正在访问该`player`字段，则应该进行`volatile`. 如果不了解如何`player`定义，则很难猜测其他问题。

* * *

我认为您需要确保`Player`在开始下一个之前已经完成了上一个 mp3。寻找[javadocs`Player`](http://www.javazoom.net/javalayer/docs/docs1.0/javazoom/jl/player/Player.html#isComplete%28%29)我看到：

```
`player.isComplete()` 
```

去引用：

> 如果所有可用的 MPEG 音频帧都已解码，则返回 true，否则返回 false

如果您想在新声音开始时停止以前的音频，您应该`close()`在旧播放器上使用。

> 关闭此播放器。当前播放的任何音频都会立即停止

在我看来，您需要关闭当前正在运行的`Player`对象（如果有）并启动一个新`Player`对象来播放新声音。如果您在多个线程中执行此操作，那么您将需要执行以下操作：

1.  锁定某个`final Object lock`对象
2.  如果您希望当前声音完成，请检查当前`Player`对象（如果有）是否已在循环中完成`sleep`
3.  `close()`如果你想杀死当前的声音，则`Player`创建一个新的对象`Player`
4.  调用`play()`下一个mp3，
5.  解锁锁定对象。

据我所知，该`play()`方法不会等待声音播放，而是在将声音加载到音频缓冲区后立即返回。我不确定如果音频文件很大会发生什么。

# android - 如何将库项目转换为 jar

> ID：10185316
> 
> 赞同：1
> 
> 时间：2012-04-17T05:00:38.583
> 
> 标签：android, library-project

谁能告诉我将库项目转换为jar的步骤。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-17T05:08:02.807

在 Eclipse 中选择你的库项目

```
1:right click on project 
2: select export
3:java then jar 
```

![在此处输入图像描述](../Images/a6e9e08163d29dda8dd9500a608830df.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-17T05:03:35.743

右键`Project>export>Java>jarfile`单击选择文件并准备好您的 jar。

确保库项目文件不会与其他项目文件冲突。例如`Manifest.xml`，您的库清单可能包含项目中已经存在的活动（添加了您的 jar）清单。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-27T02:35:48.580

1.  项目>导出>Java>jarfile
2.  删除 Manifest.xml
3.  删除 /res

# ios - ios UIMenuController 不适用于气球视图

> ID：10185318
> 
> 赞同：0
> 
> 时间：2012-04-17T05:00:49.317
> 
> 标签：ios, uitableview, uimenucontroller, balloon

我有一个气球视图，当我点击单元格时 UIMenuController 没有出现。我试图在

> *   (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath,

然后我添加了一个长按手势

> *   (void)longPress:(UILongPressGestureRecognizer *)recognizer,

最后我在扩展中添加了一个实现

> UITableViewCell

课，但它仍然不起作用。

这是一个例子

```
- (BOOL)canBecomeFirstResponder {
 return YES;
}

- (BOOL) canPerformAction:(SEL)selector withSender:(id) sender 
{   
    return YES;
}

-(void)copyAction:(id)sender{
    NSLog(@"copy");
}

-(void)deleteAction:(id)sender{
    NSLog(@"delete");
}

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    // Navigation logic may go here. Create and push another view controller.
    BalloonCell *cell = (BalloonCell*)[tableView cellForRowAtIndexPath:indexPath];

    [self becomeFirstResponder];
    BOOL isCanBecomde = [self canBecomeFirstResponder];
    BOOL isFirst = [self isFirstResponder];

    UIMenuItem *copy = [[UIMenuItem alloc] initWithTitle:@"Копировать" action:@selector(copyAction:)];
    UIMenuItem *delete = [[UIMenuItem alloc] initWithTitle:@"Удалить" action:@selector(deleteAction:)];

    UIMenuController *menu = [UIMenuController sharedMenuController];

    CGRect drawRect = [cell convertRect:cell.bounds toView:self.view];

     [menu setTargetRect:drawRect inView:window];
     [menu setMenuItems:[NSArray arrayWithObjects:copy, delete, nil]];

    [menu setMenuVisible:YES animated:YES];

} 
```

你有任何猜测为什么 UIMenuController 没有出现吗？

# database - 通过 CreateDatabaseDocument() 函数创建数据库

> ID：10185322
> 
> 赞同：0
> 
> 时间：2012-04-17T05:01:03.420
> 
> 标签：database, c#-4.0, nosql, ravendb

我想在 ravendb 创建一个数据库，我使用了 EnsureDatabaseExist() 函数。我无法在我的 c# 代码中使用命名空间 Raven.Client.Extensions 中的函数 CreateDatabaseDocument() 并且类是公共静态类 MultiDatabase{}。vs2010 中的 Intellisense 未显示此功能。

我的代码是：`enter code here`

```
 public CreateDatabaseOpResult CreateDatabase(ConnectionOperationResult connection,string name)
        {
            DocumentDatabase database;
            CreateDatabaseOpResult databaseOperationResult = new CreateDatabaseOpResult();
            if (connection.IsOperationSuccessfull == true)
            {
                try
                {
                    var doc = connection.documentStore.DatabaseCommands.ForDefaultDatabase();
                    var docId = doc.Get("Raven/Databases/" + name);
                    if (docId == null)
                    {
                        //static class
                        //multidatabase
                        connection.documentStore.DatabaseCommands.EnsureDatabaseExists(name);
                    }
                    else
                    {
                        databaseOperationResult.IsOperationSuccessfull = false;
                        throw new ArgumentException("Database already exists");
                    }
                    databaseOperationResult.IsOperationSuccessfull = true;
                    databaseOperationResult.database = database;
                }

//and i want to use this function from

namespace Raven.Client.Extensions
{
    ///<summary>
    /// Methods to create mutli tenants databases
    ///</summary>
    public static class MultiDatabase
    {
        public static RavenJObject CreateDatabaseDocument(string name)
        {
            AssertValidName(name);
            var doc = RavenJObject.FromObject(new DatabaseDocument
            {
            Settings =      
                               {
                                 {"Raven/DataDir", Path.Combine("~", Path.Combine("Tenants", name))}
                               }
                    });
        doc.Remove("Id");
              return doc;
    }

thanks in advance...:) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T05:58:53.673

`CreateDatabase`是一个刚刚返回数据库**文档**的内部方法。`EnsureDatabaseExist`使用此方法，如果该文档不存在，也会存储该文档。

你应该使用`EnsureDatabaseExist`方法。

# android - 从 Google Play 应用程序打开我的应用程序在退出时崩溃

> ID：10185326
> 
> 赞同：0
> 
> 时间：2012-04-17T05:01:15.713
> 
> 标签：android, android-intent, foreground, google-play

我可以选择在我的应用程序中打开我的应用程序 Google Play 页面。单击 Google Play 中的打开按钮时，我的应用程序再次启动。（从启动画面）

当我退出我的应用程序时，它崩溃了。我尝试将 singleTask 标志添加到我的 Home 活动中。它实际上工作得很好。但又出现了一次[崩溃](https://stackoverflow.com/questions/10174892/extended-application-class-force-close-on-restart-android)。所以我需要知道的是：

是否有任何选项可以在我的市场调用 Intent 中放置标志以通知应用程序已经启动并在单击打开按钮时将其置于前面？

这是我如何调用 GooglePlay 应用程序。

```
Intent intent = new Intent(Intent.ACTION_VIEW);
            intent.setData(Uri.parse(marketUrl));
            try {
                startActivity(intent);
            } catch (ActivityNotFoundException e) {
                Toast.makeText(this, "Cannot find Android Market",
                        Toast.LENGTH_LONG).show();
            } 
```

**编辑**

我的市场网址：`market://details?id=com.foo.bar`

这将直接重定向到我的应用程序安装页面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T05:16:51.307

使用此代码..

```
Uri uri = Uri.parse(https://play.google.com/store);
Intent intent = new Intent(Intent.ACTION_VIEW, uri);
startActivity(intent); 
```

# c# - 从 c#asp.net 将数字记录插入 ms 访问

> ID：10185329
> 
> 赞同：0
> 
> 时间：2012-04-17T05:01:34.293
> 
> 标签：c#, asp.net, ms-access, insert, numeric

```
OleDbConnection conn = new OleDbConnection(connectionString);
conn.Open();
OleDbCommand command = new OleDbCommand();
command.Connection = conn;
command.CommandText = "INSERT INTO myTbl ([username],[password],[firstname],[lastname],[mi],[age],[place],[contact])VALUES (?,?,?,?,?,?,?,?)";
command.Parameters.Add("@user", OleDbType.VarChar).Value = txtUsername.Text;
command.Parameters.Add("@psw", OleDbType.VarChar).Value = txtPassword.Text;
command.Parameters.Add("@nm", OleDbType.VarChar).Value = txtName.Text;
command.Parameters.Add("@Lname", OleDbType.VarChar).Value = txtLastName.Text;
command.Parameters.Add("@mIni", OleDbType.VarChar).Value = txtMI.Text;
command.Parameters.Add("@ag", OleDbType.Integer).Value = Convert.ToInt32(txtAge.Text);
command.Parameters.Add("@plc", OleDbType.VarChar).Value = txtPlace.Text;
command.Parameters.Add("@cntct", OleDbType.Integer).Value = Convert.ToInt32(txtContact.Text); ;
command.ExecuteNonQuery();
lblInfo.Visible = true;
lblInfo.Text = "Success";
conn.Close(); 
```

这给了我错误`Input string was not in a correct format`。请帮帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T05:07:59.073

根据代码和错误，TextBox 控件的文本（txtContact 或 txtAge）很可能不是有效的整数（整数）值。确保您正在验证输入。您应该使用 RequiredFieldValidator 以及 RangeValidator 或 RegularExpressionValidator 来确保文本框不为空且包含有效文本。

您也可以考虑使用[System.Int32.TryParse()](http://msdn.microsoft.com/en-us/library/system.int32.tryparse.aspx)而不是 Convert.ToInt32。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T05:08:20.440

您正在将非整数值转换为整数值，请检查`txtAge.Text`and `txtContact.Text`及其值，它们应该包含转换为整数值的值。

# multithreading - 播放器未正确获取多线程应用程序中创建的里程计数据

> ID：10185337
> 
> 赞同：0
> 
> 时间：2012-04-17T05:02:39.143
> 
> 标签：multithreading, robotics, robot, mobile-robots, player-stage

我在 iRobot Create 上使用 Player（播放器/舞台）。从机器人获取里程数据的接口相当简单：调用 playerc_client_read，然后如果你正确订阅了 playerc_position2d 代理，你应该能够访问代理的成员 px、py、pa 以获取在 x 和 y 中行驶的距离（以米为单位）；和旋转（以弧度为单位）。

我对在单线程应用程序中执行此操作没有任何问题——所有里程计数据都在我需要的地方。

但是，当我尝试将机器人控制器移动到它自己的线程（使用 pthreads）时，我遇到了一些问题。问题是似乎只有 px 被更新了。py 和 pa 始终保持为 0。

这是机器人线程的要点

```
//declare everything (including the playerc_client_t* object and playerc_position2d_t* object)
//connect to server (in pull mode or push mode, it doesn't seem to matter)
//subscribe to position2d proxy

while(!should_quit) {
playerc_client_read(client)
double xPosition = position2d->px;
double yPosition = position2d->py;
double radians = position2d->pa;

//do some stuff
sleep(10 milliseconds)
}
cleanup and unsubscribe 
```

果然，无论机器人如何移动，只有 xPosition 被设置，而 yPosition 和弧度保持为 0。

我在网上找不到其他东西，这是一个已知的错误吗？有没有其他人有这个问题？有人可以提供有关为什么会发生这种情况的见解吗？谢谢你。

全面披露：我是一名研究生，这是一个班级项目。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T21:48:58.503

这里的问题不一定与线程有关。

我们发现 Create 的内部里程表非常不一致，尤其是当上网本放在上面时。

为了获得任何表面上的准确读数，必须将角速度设置得足够高（在我们的例子中高于 0.11 rads/s）。

[这个网站](http://answers.ros.org/question/12385/irobot-create-odometry-package)帮助解释了一些事情——即 Creates 使用电机功率来确定里程计，而不是车轮计数器或任何类型的模拟。

要为航位推算任务获得准确的里程计，要么需要构建自己的准确估计器，要么使用一些外部传感器来提供有关位置变化的更好信息。

我们的具体问题是由多线程情况下的阈值引起的，它将角速度设置为低以记录变化，而顺序代码没有这样的阈值。

# sqlite - Persistent 的新手问题

> ID：10185339
> 
> 赞同：2
> 
> 时间：2012-04-17T05:02:47.170
> 
> 标签：sqlite, haskell, persistent, yesod

所以我打算将 Persistent 0.9.0.1 与 Sqlite 一起使用，我正在阅读教程：[http ://www.yesodweb.com/book/persistent](http://www.yesodweb.com/book/persistent)

带有插入和查询的简单代码段无法编译：

```
-- START
{-# LANGUAGE QuasiQuotes, TypeFamilies, GeneralizedNewtypeDeriving, TemplateHaskell,
             OverloadedStrings, GADTs, FlexibleContexts #-}
import Database.Persist
import Database.Persist.TH
import Database.Persist.Sqlite
import Control.Monad.IO.Class (liftIO)

share [mkPersist sqlSettings, mkSave "entityDefs"] [persist|
Person
    name String
    age Int
|]

main = withSqliteConn ":memory:" $ runSqlConn $ do
    runMigration $ migrate entityDefs (undefined :: Person) -- this line added: that's it!
    michaelId <- insert $ Person "Michael" 26
    michael <- get michaelId
    liftIO $ print michael
-- STOP 
```

转储拼接显示没有承诺`Eq`，`Show`生成的人的实例，奇怪：

```
data PersonGeneric (backend :: (* -> *) -> * -> *)
    = Person {personName :: String, personAge :: Int}
type Person =
    PersonGeneric Database.Persist.GenericSql.Raw.SqlPersist 
```

我像这样破解它：

```
 liftIO $ putStrLn $ "name: " ++ (personName $ fromJust michael) ++ ", age: " ++ (show $ personAge $ fromJust michael) 
```

然后insert无法从Sqlite取回主键：

```
Migrating: CREATE TABLE "person"("id" INTEGER PRIMARY KEY,"name" VARCHAR NOT NULL,"age" INTEGER NOT NULL)
proto: Pattern match failure in do expression at Database/Persist/GenericSql.hs:109:25-45 
```

有任何想法吗？持久性是否适用于 Sqlite？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T09:55:40.223

`Eq`从 0.8 版到 0.9 版发生了变化，我们不再`Show`默认包含实例。要添加它们，请在下面添加以下行`age Int`：

```
deriving Show Eq 
```

这本书仍然针对Yesod 0.10版本，但我会在接下来的几天内尝试更新它。

# java - Spring 3 + MyBatis 3

> ID：10185349
> 
> 赞同：1
> 
> 时间：2012-04-17T05:03:38.193
> 
> 标签：java, mysql, oracle, spring, mybatis

spring 3和mybatis 3如何创建多个连接数据库。我需要同时连接MySQL和Oracle。你能帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T14:40:13.783

每个数据库需要 1 个 SqlSessionFactory。

```
<bean id="db1SqlSessionFactory" class="org.mybatis.spring.SqlSessionFactoryBean">
    <property name="configLocation" value="classpath:sqlmap1.xml"/>
    <property name="dataSource" ref="db1datasource"/>
</bean>

<bean id="db2SqlSessionFactory" class="org.mybatis.spring.SqlSessionFactoryBean">
    <property name="configLocation" value="classpath:sqlmap2.xml"/>
    <property name="dataSource" ref="db2datasource"/>
</bean>

<bean id="db1SqlSession" class="org.mybatis.spring.SqlSessionTemplate">
    <qualifier value="db1" />
    <constructor-arg index="0" ref="db1SqlSessionFactory" />
</bean>

<bean id="db2SqlSession" class="org.mybatis.spring.SqlSessionTemplate">
    <qualifier value="db2" />
    <constructor-arg index="0" ref="db2SqlSessionFactory" />
</bean> 
```

# php - 来自 PHP 代码的 HTML 表不可见

> ID：10185350
> 
> 赞同：0
> 
> 时间：2012-04-17T05:03:44.570
> 
> 标签：php, html

我正在尝试制作网页的一部分，该网页基本上显示了用户加入了哪些组。我想为“makegroup”表格放置一个表格，为“拥有的组”放置另一个表格，这两个表格都是另一个更大表格的行的一部分。但是无论我怎么尝试，“makegroup”都没有显示出来，“groupsowned”正在完全取代它的位置。知道为什么会这样吗？我应该发布代码吗？

```
<table width="90%" height="125" >

<tr  bgcolor="#CCCCCC"><td height="20" colspan="2"><h4>Groups</h4>
 </td></tr>
 <tr bgcolor="#CCCCCC">
  <?
   if($accountid == $_SESSION['userid'])

 { 

  ?>
    <td width="50%">
    <form name="groupscreate" method="post" onsubmit="return Confirm()">
     <table width="99%" height="6%"  bgcolor="#CCCCCC"> <tr valign="top">

      <td colspan="3"><h5>Create Groups</h5></td></tr>
       <tr><td>

   <input align="absmiddle" type="text" maxlength="25" name="gname" /><? if($nog==1)    {echo "<br /><font color=red>Please enter a valid groupname</font>";}?></td>
   <td><select name="gcategory"> 
                <option value="General" selected>General</option> 
                <option value="Comedy">Comedy</option> 
                <option value="Education">Education</option> 
                <option value="Entertainment">Entertainment</option> 
                <option value="Gaming">Gaming</option> 
                <option value="Music">Music</option> 
                <option value="Science & Technology">Science & Technology</option> 
                <option value="Sports">Sports</option> 
        </select></td><td><input type="submit" name="makegroup"           value="create group"/></td></tr>
 </table>
 </form>
 </td>
 <?
  }

 $grp= "SELECT * from groups where accountid='". $accountid."'";
  $rest = mysql_query($grp,$connection);
  $cont=0;
  ?>
  <td width="50%" >
   <table width="100%" height="20%" bgcolor="#CCCCCC" >
    <tr><td colspan="10"><h5>Groups Owned</h5>
   </td></tr>
 <?
  while($grow=mysql_fetch_array($rest))
    { 

   $cont=$cont+1;
   $gid=$grow['groupid'];
   $gnam=$grow['groupname'];
   $gcreator=$grow['accountid'];
    if($cont==0)
        {
    echo "<tr>"; 
        }

 echo "<td align='left' ><a href='groups_discussions.php?id=".$gid."'><font          color="."#333333"." size='-1'>".$gnam."</font></a></td>";

        if($cont==5)
        {echo "</tr>";}
    } 

  ?>
     </table>
    </td>

    </tr></table> 
```

我想知道你们看起来是否一切都好。我看不出有什么问题，但事实是表单没有显示:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T05:48:42.743

你的意思是这样吗？

```
<table width="90%" height="125" bgcolor="orange">
<tr  bgcolor="#CCCCCC"><td height="20" colspan="2"><h4>Groups</h4></td></tr>
<tr bgcolor="#CCCCCC">
    <td width="50%">
    <form name="groupscreate" method="post" onsubmit="return Confirm()">
        <table width="99%" height="6%"  bgcolor="green"> 
            <tr valign="top">
                <td colspan="3"><h5>Create Groups</h5></td>
            </tr>
            <tr bgcolor="blue">
                <td bgcolor="orange">
                    <input align="absmiddle" type="text" maxlength="25" name="gname" />
                    <?php 
                        $nog = 1;
                        if($nog == 1)    
                            echo "<br /><font color=red>Please enter a valid groupname</font>";
                    ?>
                </td>
                <td bgcolor="yellow">
                    <select name="gcategory"> 
                        <option value="General" selected>General</option> 
                        <option value="Comedy">Comedy</option> 
                        <option value="Education">Education</option> 
                        <option value="Entertainment">Entertainment</option> 
                        <option value="Gaming">Gaming</option> 
                        <option value="Music">Music</option> 
                        <option value="Science & Technology">Science & Technology</option> 
                        <option value="Sports">Sports</option> 
                    </select>
                </td>
                <td bgcolor="red">
                    <input type="submit" name="makegroup" value="create group"/>
                </td>
            </tr>
        </table>
    </form>
    </td>
    <td width="50%">
        <table width="100%" height="20%" bgcolor="pink" >
        <tr><td colspan="10"><h5>Groups Owned</h5></td></tr>
            <?php
            //$grp= "SELECT * from groups where accountid='". $accountid."'";
            //$rest = mysql_query($grp, $connection);
            $rest = array(
                        array('groupid' => '123', 'groupname' => 'testname', 'accountid' => '456'), 
                        array('groupid' => '678', 'groupname' => 'testname2', 'accountid' => '999')
                        );
            $cont = 0;
            foreach ($rest as $grow)
            {
                $gid = $grow['groupid'];
                $gnam = $grow['groupname'];
                $gcreator = $grow['accountid'];

                if($cont == 0)
                    echo "<tr>"; 

                echo "<td align='left' ><a href='groups_discussions.php?id=" . $gid . "'><font color="."#333333"." size='-1'>" . $gnam . "</font></a></td>";

                if($cont == 1)
                    echo "</tr>";
                $cont = $cont + 1;
            }
            ?>
        </table>
    </td>
</tr>

</table> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T06:30:46.627

您的代码中有一堆问题，例如只能处理第二个表中的一组 5 个结果，递增一个计数器（因此它的最小值始终为 1）然后测试它是否为零， ETC。

```
<table width="90%" height="125" >
  <tr bgcolor="#CCCCCC">
    <td height="20" colspan="2">
      <h4>Groups</h4>
    </td>
  </tr>
  <tr bgcolor="#CCCCCC">
<?
if( isset( $_SESSION['userid'] ) && $accountid==$_SESSION['userid'] ){ 
?>
    <td width="50%">
      <form name="groupscreate" method="post" onsubmit="return Confirm()">
        <table width="99%" height="6%"  bgcolor="#CCCCCC">
          <tr valign="top">
            <td colspan="3">
              <h5>Create Groups</h5>
            </td>
          </tr>
          <tr>
            <td>
              <input align="absmiddle" type="text" maxlength="25" name="gname" />
<?
  if( $nog==1 ){
?>
              <br /><font color="red">Please enter a valid groupname</font>
<?php
  }
?>
            </td>
            <td>
              <select name="gcategory"> 
                <option value="General" selected>General</option> 
                <option value="Comedy">Comedy</option> 
                <option value="Education">Education</option> 
                <option value="Entertainment">Entertainment</option> 
                <option value="Gaming">Gaming</option> 
                <option value="Music">Music</option> 
                <option value="Science & Technology">Science &amp; Technology</option> 
                <option value="Sports">Sports</option> 
              </select>
            </td>
            <td>
              <input type="submit" name="makegroup" value="create group" />
            </td>
          </tr>
        </table>
      </form>
    </td>
<?
}

$grp = "SELECT * from groups where accountid='{$accountid}'";
$rest = mysql_query( $grp , $connection );
$cont = 0;
?>
    <td width="50%" >
      <table width="100%" height="20%" bgcolor="#CCCCCC" >
        <tr>
          <td colspan="10">
            <h5>Groups Owned</h5>
          </td>
        </tr>
<?
if( mysql_num_rows( $rest )>0 ){
  while( $grow = mysql_fetch_array( $rest ) ){
    $gid = $grow['groupid'];
    $gnam = $grow['groupname'];
    $gcreator = $grow['accountid'];
    if( ( $cont%5 )==0 )
      echo '<tr>';

    echo "<td align='left' ><a href='groups_discussions.php?id={$gid}'><font color='#333333' size='-1'>{$gnam}</font></a></td>\n";

    if( ( $cont%5 )==4 )
      echo '</tr>';

    $cont++;
  }
}else{
  echo '<tr><td colspan="10">No Records</td></tr>';
}
?>
      </table>
    </td>
  </tr>
</table> 
```

可能有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T05:27:24.150

检查此条件是否匹配：`if($accountid == $_SESSION['userid'])`

如果不匹配，则 makegroup 的表单将不可见。

为了提高可读性，我对您的代码进行了一些整理：

```
 <table width="90%" height="125" >
    <tr  bgcolor="#CCCCCC">
        <td height="20" colspan="2"><h4>Groups</h4></td>
    </tr>
    <tr bgcolor="#CCCCCC">
    <?
        if($accountid == $_SESSION['userid'])
        { 
    ?>
        <td width="50%">
            <form name="groupscreate" method="post" onsubmit="return Confirm()">
                <table width="99%" height="6%"  bgcolor="#CCCCCC"> 
                    <tr valign="top">
                        <td colspan="3"><h5>Create Groups</h5></td>
                    </tr>
                    <tr>
                        <td>
                            <input align="absmiddle" type="text" maxlength="25" name="gname" />
                            <? if($nog==1)    {echo "<br /><font color=red>Please enter a valid groupname</font>";}?>
                        </td>
                        <td>
                            <select name="gcategory"> 
                                <option value="General" selected>General</option> 
                                <option value="Comedy">Comedy</option> 
                                <option value="Education">Education</option> 
                                <option value="Entertainment">Entertainment</option> 
                                <option value="Gaming">Gaming</option> 
                                <option value="Music">Music</option> 
                                <option value="Science & Technology">Science & Technology</option> 
                                <option value="Sports">Sports</option> 
                            </select>
                        </td>
                        <td>
                            <input type="submit" name="makegroup" value="create group"/>
                        </td>
                    </tr>
                </table>
            </form>
        </td>
    <?
        }

        $grp= "SELECT * from groups where accountid='". $accountid."'";
        $rest = mysql_query($grp,$connection);
        $cont=0;
    ?>
        <td width="50%" >
            <table width="100%" height="20%" bgcolor="#CCCCCC" >
                <tr>
                    <td colspan="10"><h5>Groups Owned</h5></td>
                </tr>
                <?
                while($grow=mysql_fetch_array($rest))
                { 
                    $cont=$cont+1;
                    $gid=$grow['groupid'];
                    $gnam=$grow['groupname'];
                    $gcreator=$grow['accountid'];
                    if($cont==0)
                        echo "<tr>"; 

                    echo "<td align='left' ><a href='groups_discussions.php?id=".$gid."'><font          color="."#333333"." size='-1'>".$gnam."</font></a></td>";

                    if($cont==5)
                        echo "</tr>";
                } 
                ?>
            </table>
        </td>

    </tr>
</table> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-17T05:30:15.713

一些事情：

1) 这部分...

```
 $cont=$cont+1;
 $gid=$grow['groupid'];
 $gnam=$grow['groupname'];
 $gcreator=$grow['accountid'];
 if($cont==0)
    {
    echo "<tr>"; 
    } 
```

...不会触发 if 语句，因为在第一次迭代 $cont=1 时。($cont=0+1=1)

2）您需要在关闭后重置 $cont`if($cont==5){echo "</tr>";}}`以便 while 语句的顶部创建一个新`<tr>`标签。

# web-services - 其他heroku环境变量是什么？

> ID：10185353
> 
> 赞同：43
> 
> 时间：2012-04-17T05:04:16.643
> 
> 标签：web-services, heroku, environment-variables

在设置服务器时，我注意到使用了环境变量 process.env.PORT。还有其他类似的变量吗？我在哪里可以看到所有这些？

* * *

## 回答 #1

> 赞同：110
> 
> 时间：2015-02-22T12:02:05.777

以下命令将显示*所有*环境变量，而不仅仅是那些可见的`heroku config`：

```
heroku run printenv 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-09-13T15:29:03.207

`heroku config`不显示端口。所以，如果你需要*一切*，它是不完整的。这将创建一个一次性的测功机并显示所有内容。

从这里开始：[https ://devcenter.heroku.com/articles/getting-started-with-nodejs#console](https://devcenter.heroku.com/articles/getting-started-with-nodejs#console)

在一次性测功机中运行控制台，然后在 > 提示符下键入“console.log(process.env)”：

```
$ heroku run node
Running `node` attached to terminal... up, run.4778
> console.log(process.env
... )
{ BUILDPACK_URL: 'https://github.com/MichaelJCole/heroku-buildpack-nodejs.git#wintersmith',
  TERM: 'xterm',
  SENDGRID_USERNAME: 'unicorns@heroku.com',
  COLUMNS: '80',
  DYNO: 'run.4778',
  PATH: '/app/bin:/app/node_modules/.bin:bin:node_modules/.bin:/usr/local/bin:/usr/bin:/bin',
  PWD: '/app',
  PS1: 'fairydust',
  LINES: '22',
  SHLVL: '1',
  HOME: '/app',
  SENDGRID_PASSWORD: 'ponies',
  PORT: '52031',
  _: '/app/bin/node' }
undefined 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-04-17T05:16:27.560

请参阅[https://devcenter.heroku.com/articles/config-vars](https://devcenter.heroku.com/articles/config-vars)：似乎有一个命令可以告诉您环境变量是什么。

```
$ heroku config 
```

看看这是否适合你。

编辑：上面链接的heroku docs似乎是错误的。尝试这个：

```
$ heroku config -s --app <appname> 
```

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2012-10-11T11:06:19.057

命令是

```
heroku config 
```

你可以在这里阅读更多[https://devcenter.heroku.com/articles/config-vars](https://devcenter.heroku.com/articles/config-vars)

# perl - 如何使用值搜索哈希并在perl中成功返回相应的键

> ID：10185354
> 
> 赞同：2
> 
> 时间：2012-04-17T05:04:23.760
> 
> 标签：perl, hashtable

我正在寻找使用 perl 的哈希搜索实现。我的哈希中有以下数据

```
%hash = {0 => "Hello", 1=> "world"}. 
```

现在我想使用值（意味着世界和你好）搜索哈希并返回相应的键。

示例：我想搜索世界，结果应该是 1

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T05:07:00.857

`for ( keys %hash ) ...`使用语句迭代散列的键并随时检查值。如果你找到你要找的东西，返回

```
my $hash = { 0 => "World", 1 => "Hello" };

for ( keys %$hash ) {
    my $val = $hash->{$_};
    return $_ if $val eq 'World'; # or whatever you are looking for
} 
```

另一种选择是使用`while ( ... each ... )`

```
my $hash = { 0 => "World", 1 => "Hello" };

while (($key, $val) = each %$hash) {
    return $key if $val eq 'World'; # or whatever you are looking for
} 
```

文字的使用`{ }`创建一个哈希引用而不是一个哈希

```
$h = { a => 'b', c => 'd' }; 
```

创建您使用的文字哈希`( )`

```
%h = ( a => 'b', c => 'd' ); 
```

`while ... each`在 hashref 上执行

```
$h = { a => 'b', c => 'd' };
print "$k :: $v\n" while (($k, $v) = each %$h );  

c :: d
a :: b 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-17T05:41:48.433

如果：

1.  哈希不是很大，并且
2.  价值观是独一无二的

您可以简单地使用以下命令创建查找哈希[`reverse`](http://perldoc.perl.org/functions/reverse.html)：

```
my %lookup = reverse %hash;
my $key = $lookup{'world'}; # key from %hash or undef 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T07:07:52.220

```
use strict;
use warnings;

my %hash = (0 => "Hello", 1=> "world");
my $val = 'world';

my @keys = grep { $hash{$_} eq $val } keys %hash;

print "Keys: ", join(", ", @keys), "\n"; 
```

这将返回所有键，即如果多个键的值相同。

# email - 查找 ubuntu postfix 邮件服务器的 smtp 用户名和密码？

> ID：10185355
> 
> 赞同：0
> 
> 时间：2012-04-17T05:04:24.017
> 
> 标签：email, codeigniter, ubuntu, smtp, postfix-mta

有人可以告诉我 ubuntu postfix 邮件服务器中的命令行调用或文件来查找我的 smtp 用户名和密码吗？

或者你甚至需要一个 smtp 用户名和密码来让你的服务器发送电子邮件？

如果有帮助，我正在使用 PHP/Codeigniter，其中包括此处描述的电子邮件库：http: [//codeigniter.com/user_guide/libraries/email.html](http://codeigniter.com/user_guide/libraries/email.html)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T05:10:11.027

假设您只想从 php 发送电子邮件，您可以使用默认的“Internet Site”后缀配置，而无需设置 smtp 身份验证。

在生产中，您还需要将 SPF 记录添加到您的 DNS 区域，以增加避免垃圾邮件过滤器的机会。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T05:08:17.070

如果您已经设置了 ubuntu 系统，那么默认的 postfix 安装不需要用户名或密码。

寻找可能阻止您发送电子邮件的其他问题。

# wcf - 在 web.config 文件中配置端点时的异常

> ID：10185358
> 
> 赞同：3
> 
> 时间：2012-04-17T05:04:43.527
> 
> 标签：wcf, workflow-foundation

我正在使用 wf wcf 服务并在 web.config 文件中为其控制端点添加了配置。当我通过工作流控制客户端调用终止方法时，它的 Thro 异常，例如“由于 EndpointDispatcher 的 AddressFilter 不匹配，无法在接收方处理带有 To 的消息。检查发送方和接收方的 EndpointAddresses 是否一致。”。像这样控制端点配置。

在服务端——

```
<services>
      <service name="PurchaseOrder">
        <endpoint address=""
        binding="basicHttpBinding" contract="POWorkflowService.IPurchaseOrder" />       
        <endpoint address="wce"
        binding="basicHttpBinding" kind="workflowControlEndpoint" />
      </service>
    </services>
    <standardEndpoints>
      <workflowControlEndpoint>
        <standardEndpoint/>
      </workflowControlEndpoint>
    </standardEndpoints> 
```

客户端的配置是 -

```
<client>
           <endpoint address="http://localhost:3650/POService.xamlx/wce" binding="basicHttpBinding"
                bindingConfiguration="BasicHttpBinding_IPurchaseOrderIIS" contract="System.ServiceModel.Activities.IWorkflowInstanceManagement"
                name="IPurchaseOrderControlEndpointISS" />
    </client> 
```

如果您能帮助我找到解决方案，我将不胜感激。当我使用工作流服务主机并在代码中添加控制端点时，它工作正常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T07:14:50.140

尝试为 ServiceBehavior 设置 AddressFilterMode。

# oracle - 在 Oracle 中从另一个存储过程调用一个存储过程

> ID：10185364
> 
> 赞同：3
> 
> 时间：2012-04-17T05:04:54.880
> 
> 标签：oracle, stored-procedures

在 Oracle 数据库中，

假设有两个存储过程
并且存储过程`sp1`正在调用另一个存储过程`sp2`

问题是：

被叫`sp2`方能否访问该`sp1's` `temp`表？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T05:27:03.730

我想你的意思是：数据库中有 tmp 表，sp1 填充表，将能够 sp2 访问（读取或更改）这些数据？

是的，它会。（当然，如果 sp1 在调用 sp2 之前没有“提交”）。

Oracle 临时表用于在会话或事务期间存储数据。Sp1 和 sp2 都在同一个会话中工作。

# javascript - 检查按钮单击时大写锁定是否打开或关闭

> ID：10185366
> 
> 赞同：0
> 
> 时间：2012-04-17T05:05:05.007
> 
> 标签：javascript, asp.net

我有一个应用程序，其中有一个文本框和一个按钮。我希望应用程序的行为方式是当用户在文本框中键入一些文本时，然后当用户单击按钮时，它应该显示是否大写锁定打开或关闭

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T05:07:33.243

看看前面的这个问题：[你如何判断 caps lock 是否在使用 JavaScript？](https://stackoverflow.com/questions/348792/how-do-you-tell-if-caps-lock-is-on-using-javascript)那里有一些很棒的脚本/响应。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T05:09:34.350

在 jQuery 中，

```
$('#example').keypress(function(e) { 
    var s = String.fromCharCode( e.which );
    if ( s.toUpperCase() === s && s.toLowerCase() !== s && !e.shiftKey ) {
        alert('caps is on');
    }
}); 
```

避免错误，例如退格键，需要 s.toLowerCase() !== s。

**你试过这个代码吗？**

```
function isCapslock(e){

    e = (e) ? e : window.event;

    var charCode = false;
    if (e.which) {
        charCode = e.which;
    } else if (e.keyCode) {
        charCode = e.keyCode;
    }

    var shifton = false;
    if (e.shiftKey) {
        shifton = e.shiftKey;
    } else if (e.modifiers) {
        shifton = !!(e.modifiers & 4);
    }

    if (charCode >= 97 && charCode <= 122 && shifton) {
        return true;
    }

    if (charCode >= 65 && charCode <= 90 && !shifton) {
        return true;
    }

    return false;

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T11:58:29.900

您可以使用[capslockstate](https://github.com/nosilleg/capslockstate-jquery-plugin) jQuery 插件。

单击按钮时，您可以调用`$(window).capslockstate("state");`它，这将告诉您 Caps Lock 键的状态。

请注意，Caps Lock 键的状态不必与他们键入文本和单击按钮时的状态相同。

# drupal - 如何登录 Drupal 并从远程网站获取当前会话 ID？

> ID：10185367
> 
> 赞同：1
> 
> 时间：2012-04-17T05:05:05.920
> 
> 标签：drupal

我正在尝试使用 drupal_http_request 方法从远程站点登录 Drupal。我需要从 Drupal 获取会话 ID。当我运行代码时，我得到如下响应。但是，如果我输入了错误的用户凭据，那么它也会给我相同的响应。我正在使用 Drupal 6 和服务 3。请帮助

```
<?php
// This is the base URL for our installation
require_once 'drupal/includes/bootstrap.inc';
include('drupal/includes/common.inc');
$base_url = 'http://localhost/drupal/';

// necessary or the response is empty:
$headers = array('Content-Type' => 'application/x-www-form-urlencoded');
// Login
$data = array(
  'name' => 'admin',
  'pass' => 'password',
);
$data = http_build_query($data, '', '&');
$response = drupal_http_request($base_url . 'user/login', $headers, 'POST', $data);
$data = json_decode($response->data);

print_r($response);
// uncommented and fixed cookie line so that the second request is using the same session
echo $headers['Cookie'] = $data->session_name . '=' . $data->sessid;
$response = drupal_http_request($base_url . 'user/3', $headers);
print_r(json_decode($response->data)); 
```

?>

**输出** [protocol] => HTTP/1.1 [status_message] => OK [headers] => Array ([Date] => Tue, 17 Apr 2012 04:40:48 GMT [Server] => Apache/2.2.21 (Win32 ) PHP/5.3.10 [X-Powered-By] => PHP/5.3.10 [Set-Cookie] => SESScfc90a62c81b7bfc6f292320b1d0b8ca=89q5rhq3neom3le1l4b2l67297; expires=Thu, 10-May-2012 08:14:08 GMT; path=/ [过期] => 1978 年 11 月 19 日星期日 05:00:00 GMT [最后修改] => 2012 年 4 月 17 日星期二 04:40:48 GMT [缓存控制] => 后检查=0，预检查=0 [Content-Length] => 4485 [Connection] => close [Content-Type] => text/html; charset=utf-8) [code] => 200)

# android - Android动态RelativeLayout相互重叠

> ID：10185368
> 
> 赞同：2
> 
> 时间：2012-04-17T05:05:21.880
> 
> 标签：android, android-layout

我使用此代码通过 buttonClick 事件从我的数据库中动态打印值。
用于删除数据库条目的按钮单击事件存在于循环内。

这是我的代码：

```
 RelativeLayout rl = (RelativeLayout) findViewById(R.id.relativeLayout3);

    final DatabaseHandler dbpin = new DatabaseHandler(this);
  //  Log.d("Reading: ", "Reading all tasks..");
    List<Detail> detail1 = dbpin.getAllDetail();       
    Button[] button=new Button[1000];
            for (Detail cn : detail1) {
                String log = cn.getTitle();
           final  int i = cn.getID();

           button[i] = new Button(this);
       button[i].setText("Delete");
       button[i].setTextSize(10);   

       button[i].setId(2000 + i);
     int width = 80;
     int height = 60;

     TextView textview = new TextView(this);
     textview.setText(log);
     textview.setWidth(200);
     textview.setTextSize(20);
     textview.setPadding( 0, 10, 0, 0);
     textview.setId(2000 + i);

     if (i == 0) {
         RelativeLayout.LayoutParams rlp2 = new RelativeLayout.LayoutParams(
                 RelativeLayout.LayoutParams.FILL_PARENT,
                 RelativeLayout.LayoutParams.WRAP_CONTENT);
         rlp2.addRule(RelativeLayout.ALIGN_PARENT_TOP);
         rlp2.addRule(RelativeLayout.ALIGN_PARENT_LEFT);
         textview.setLayoutParams(rlp2);
         rl.addView(textview);
         RelativeLayout.LayoutParams rlp1 = new RelativeLayout.LayoutParams(
                 width, height);
         rlp1.addRule(RelativeLayout.ALIGN_PARENT_TOP);
         rlp1.addRule(RelativeLayout.ALIGN_PARENT_RIGHT);
         button[i].setLayoutParams(rlp1);
         rl.addView(button[i]);
     } else {
         RelativeLayout.LayoutParams rlp2 = new RelativeLayout.LayoutParams(
                 RelativeLayout.LayoutParams.FILL_PARENT,
                 RelativeLayout.LayoutParams.WRAP_CONTENT);
         rlp2.addRule(RelativeLayout.ALIGN_PARENT_LEFT);
         rlp2.addRule(RelativeLayout.BELOW, button[i].getId() - 1);
         textview.setLayoutParams(rlp2);
         rl.addView(textview);
         RelativeLayout.LayoutParams rlp1 = new RelativeLayout.LayoutParams(
                 width, height);
         rlp1.addRule(RelativeLayout.ALIGN_PARENT_RIGHT);
         rlp1.addRule(RelativeLayout.BELOW, button[i].getId() - 1);
         button[i].setLayoutParams(rlp1);
         rl.addView(button[i]);
     }

     button[i].setOnClickListener(new Button.OnClickListener() {
        public void onClick(View v) {

            Intent myIntent = new Intent(v.getContext(), details.class);
            Detail detail = new Detail();
            detail.setID(i);
            dbpin.deleteDetail(detail);
             startActivityForResult(myIntent, 1);        
        }
        });                     
 } 
```

在数据库处理程序代码之后，使用循环从数据库中检索所有详细信息：

```
// Getting All detail
                    public List<Detail> getAllDetail() {
                        List<Detail> detailList = new ArrayList<Detail>();
                        // Select All Query
                        String selectQuery = "SELECT  * FROM " + TABLE_DETAIL;

                        SQLiteDatabase db = this.getWritableDatabase();
                        Cursor cursor = db.rawQuery(selectQuery, null);

                        // looping through all rows and adding to list
                        if (cursor.moveToFirst()) {
                            do {
                                Detail detail = new Detail();
                                detail.setID(Integer.parseInt(cursor.getString(0)));
                                detail.setTitle(cursor.getString(1));
                                detail.setDetail(cursor.getString(2));

                                // Adding contact to list
                                detailList.add(detail);
                            } while (cursor.moveToNext());
                        }

                        // return contact list
                        return detailList;
                    }

// Deleting single detail
                    public void deleteDetail(Detail detail) {
                        SQLiteDatabase db = this.getWritableDatabase();
                        db.delete(TABLE_DETAIL, KEY_DETID + " = ?",
                                new String[] { String.valueOf(detail.getID()) });
                        db.close();
                    } 
```

起初布局是正常的。删除第一个或最后一个数据行不会导致任何变化，但如果删除中间的一行，则布局相互重叠。

请给我建议以清除此逻辑错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T05:46:21.910

好的，我了解您的问题。问题是您使用相对布局作为父布局，在其中添加所有子相对布局。现在，如果您删除第一个相对布局，那么它会自动与其父级对齐，因此不会有问题。

如果您删除最后一个相对布局，那么也不会出现问题。

现在您已经将所有相对布局与它们的上面布局对齐，因此如果您删除上面的布局，它会自动与其父级对齐。

解决方法很简单。使用您的父布局作为线性布局，这样您就不需要将相关布局与其上面的布局对齐。它会自动以线性方式排列......

相对布局 rl = (RelativeLayout) findViewById(R.id.relativeLayout3); 将此布局转换为 xml 文件中的线性布局。

这是可以帮助您的代码：

```
 LinearLayout lp = (LinearLayout) findViewById(R.id.LinearLayout1); 
```

// for 循环从这里开始

```
 RelativeLayout rl = new RelativeLayout(getApplicationContext());
    RelativeLayout.LayoutParams lp_btn = new RelativeLayout.LayoutParams(LayoutParams.WRAP_CONTENT,
                                                                     LayoutParams.WRAP_CONTENT);
    lp_btn.addRule(RelativeLayout.ALIGN_PARENT_LEFT);
    Button temp_button = new Button(getApplicationContext());
    temp_button.setText("button");
    rl.addView(temp_button, lp_btn);
    TextView tv = new TextView(getApplicationContext());
    tv.setText("bharat");
    tv.setBackgroundColor(Color.GREEN);
    RelativeLayout.LayoutParams lp_tv = new RelativeLayout.LayoutParams(LayoutParams.WRAP_CONTENT,
                                                                     LayoutParams.WRAP_CONTENT);
    lp_tv.addRule(RelativeLayout.ALIGN_PARENT_RIGHT);
    rl.addView(tv, lp_tv);
    lp.addView(rl); 
```

// for 循环到此结束

我认为你应该使用 listview 来达到你的目的，它会更好。无论如何，这也将起作用，您必须为您的目的管理 relativelayout 数组和按钮数组。

# c++ - Boost进程间：如何启动一个新进程？

> ID：10185376
> 
> 赞同：0
> 
> 时间：2012-04-17T05:06:06.423
> 
> 标签：c++, boost, cross-platform, ipc, boost-interprocess

我想知道是否可以跨平台方式使用 Boost.Interprocess 启动一个新进程？另外我想知道是否可以启动类似的进程`echo`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T06:17:08.307

进程间模块没有任何与实际创建新进程有关的功能。

看看`system()`C函数。

# c# - 基于会话登录时基于数据库信息填充gridview

> ID：10185377
> 
> 赞同：0
> 
> 时间：2012-04-17T05:06:17.707
> 
> 标签：c#, asp.net, sql-server, gridview, database-connection

我无法根据使用基于会话的登录来填充网格视图。我正在使用母版页。目前我得到一个“必须声明标量变量”。我的想法是在脚本区域的某个地方检索它。任何帮助是极大的赞赏！！！！

现在的问题是非母版页的代码应该是什么，以根据某人的 uname（数据库中的列）或 UID（主键和理想方式）检索某人的特定信息 母版页的代码（至少相关的东西）

```
 protected void btnlogin2_Click(object sender, EventArgs e)
{
    if (btnlogin2.Text == "Login")
    {

        string strCmd = "Select * From Person Where uname=@uname and upass=@upass";
        SqlConnection objConn = new SqlConnection(strConn);
        SqlCommand objCmd = new SqlCommand(strCmd, objConn);
        objCmd.Parameters.AddWithValue("@uname", txtusername.Text);
        objCmd.Parameters.AddWithValue("@upass", txtpassword.Text);

        using (objConn)
        {
            objConn.Open();
            SqlDataReader objDR = objCmd.ExecuteReader();

            if (objDR.Read())
            {

                Session["uname"] = txtusername.Text;

                if (objDR["Type"].ToString() == "Member")
                { Response.Redirect("member.aspx"); }
                else if (objDR["Type"].ToString() == "Pledge")
                { Response.Redirect("member.aspx"); }
                else if (objDR["Type"].ToString() == "Admin")
                { Response.Redirect("eboard.aspx"); }

            }
            else
            {

               // btnlogin2.Text = "Failed";

            }
        }
        btnlogin2.Text = "Logout";
    }
    else if (btnlogin2.Text == "Logout")
    {
        btnlogin2.Text = "Login";
        txtusername.Visible = true;
        txtpassword.Visible = true;
        pnlSideBar.Visible = false;

        Session.Abandon();
        Response.Redirect("index.aspx");

    }
    btnlogin2.Text = "Failed";
} 
```

页面代码

```
<%@ Page Language="C#" Debug="true" MasterPageFile="masterpage.master"  %>
<%@ Import Namespace="System.Data" %>
<%@ Import Namespace="System.Data.SqlClient" %>
<%@ Import Namespace="System.Web.Configuration" %>

<script runat="server">

    protected void Page_Load(object sender, EventArgs e)
    {
        string strConn = WebConfigurationManager.ConnectionStrings["cloud2"].ConnectionString;
        if (User.Identity.IsAuthenticated)
        {
            Button btnlogin2 = (Button)Master.FindControl("btnlogin2");
            TextBox txtusername = (TextBox)Master.FindControl("txtusername");
            TextBox txtpassword = (TextBox)Master.FindControl("txtpassword");
            Panel pnlSideBar = (Panel)Master.FindControl("pnlSideBar");
            Panel pnlPledge = (Panel)Master.FindControl("pnlPledge");
            Panel pnlEboard = (Panel)Master.FindControl("pnlEboard");

            string strCmd = "Select * From Person Where uname=@uname";
            SqlConnection objConn = new SqlConnection(strConn);
            SqlCommand objCmd = new SqlCommand(strCmd, objConn);
            objCmd.Parameters.AddWithValue("@uname", Session["uname"]);

            using (objConn)
            {
                objConn.Open();
                SqlDataReader objDR = objCmd.ExecuteReader();

                if (objDR.Read())
                {
                    btnlogin2.Visible = true;
                    btnlogin2.Text = "Logout";
                    txtusername.Visible = false;
                    txtpassword.Visible = false;
                    if (objDR["Type"].ToString() == "Admin")
                    {
                        pnlEboard.Visible = true;
                        pnlPledge.Visible = false;
                        pnlSideBar.Visible = false;

                    }
                    else if (objDR["Type"].ToString() == "Member")
                    {
                        pnlEboard.Visible = false;
                        pnlPledge.Visible = false;
                        pnlSideBar.Visible = true;

                    }
                    else if (objDR["Type"].ToString() == "Pledge")
                    {
                        pnlPledge.Visible = true;
                        pnlEboard.Visible = false;
                        pnlSideBar.Visible = false;
                    }
                    lblLogin.Text = "Logged in as:  " + objDR["Fname"] + " " + objDR["Lname"];
                }
            }
        }
    }
</script>

   </asp:Content>
   <asp:Content ID="Content2" ContentPlaceHolderID="cphText" runat="server">
  <div id="mainContent">
    <h1> My Service Hours</h1>
    <p>&nbsp;</p>
    <table width="318" height="126" border="1" cellspacing="1">
      <caption>
        Event   Event Date   Hours
      </caption>
      <tr>
        <th width="100" scope="col">Polar Plunge</th>
        <th width="100" scope="col">1/13/12</th>
        <th width="100" scope="col">5 hrs</th>
      </tr>
    </table>
    <form id="form3" name="form2" method="post" action="">
      <label for="Totalhrs"></label>
      Total: 5hrs
    </form>
      <asp:GridView ID="grvServiceHours" DataSourceID="srcServiceHours" runat="server"/>
      <asp:SqlDataSource
        id="srcServiceHours"
        ConnectionString="<%$ ConnectionStrings:cloud2 %>"
        SelectCommand="select Event.Event_Name, Event.Event_Time, Event.Event_Type, Service_Hours.Hours, Service_Hours.Hours_Completed
                       from Event, Service_Hours, Person
                       where Event.EvID=Service_Hours.EvID and Person.UID=Service_Hours.UID and Person.Uname=@uname"
        Runat="server" />
    <p>&nbsp;</p>
    <!-- end #mainContent --></div>
    </asp:Content> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T05:43:27.040

在您的主文件中创建一个属性，并在您的内容页面上的任何位置使用它，而不是变量。通过在您的 aspx 页面中添加指令，可以在内容页面的任何位置访问母版页属性。

# html - Twitter Bootstrap 响应式导航栏在小屏幕上损坏

> ID：10185384
> 
> 赞同：14
> 
> 时间：2012-04-17T05:07:25.440
> 
> 标签：html, css, twitter-bootstrap, media-queries, responsive-design

我一直在阅读文档并将我的代码与 Bootstrap 的示例进行比较，但是当我缩小浏览器窗口或在手机上查看它时，我无法弄清楚为什么我的网站上的导航栏下降了大约 100 像素。

[http://warm-ocean-8133.herokuapp.com/](http://warm-ocean-8133.herokuapp.com/)

这是我的翡翠模板格式的html。

```
.navbar.navbar-fixed-top
  .navbar-inner
    .container
      a.btn.btn-navbar(data-toggle="collapse",data-target=".nav-collapse")
        span.icon-bar
        span.icon-bar
        span.icon-bar
      a.brand(href='#home') Miles Matthias
      .nav-collapse
        ul.nav
          li.active
            a(href='#home') Home
          li
            a(href='#contact') Contact 
```

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-04-17T05:12:52.273

出现视觉异常是因为您在包含文件*后*定义了`body`元素的顶部填充，这意味着“响应式”样式无法覆盖您的填充：*`bootstrap-responsive.css`*

 *```
<link href="/stylesheets/bootstrap.css" rel="stylesheet">
<link href="/stylesheets/bootstrap-responsive.css" rel="stylesheet">
<!-- ... some stuff -->
<style type="text/css">body {padding-top: 60px;}</style> 
```

您希望在页面以全宽显示时使用填充（这样您的主要内容不会显示在顶部导航栏下方），但是您希望“响应式”样式在缩小浏览器宽度时覆盖该填充（或在移动设备上显示页面）。

所以修复很简单：为**包含****和*****之间*****的元素****定义顶部填充`body`*`bootstrap.css``bootstrap-responsive.css`****。*

 *[Bootstrap 示例](http://twitter.github.com/bootstrap/examples.html)是一个很好的入门模板。[流体布局](http://twitter.github.com/bootstrap/examples/fluid.html)网站是这样的：

```
<!-- Le styles -->
<link href="../assets/css/bootstrap.css" rel="stylesheet">
<style type="text/css">
  body {
    padding-top: 60px;
    padding-bottom: 40px;
  }
  .sidebar-nav {
    padding: 9px 0;
  }
</style>
<link href="../assets/css/bootstrap-responsive.css" rel="stylesheet"> 
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-06-24T05:57:10.877

您可以使用@media**覆盖****正文**填充。像这样：

```
<link href="css/bootstrap.css" rel="stylesheet">
<link href="css/responsive.css" rel="stylesheet">
<style type="text/css">
  body {
    padding-top: 60px;
  }
  @media (max-width: 979px) {
    body {
      padding-top: 0;
    }
  }
</style> 
```**

# jquery - jsonp 问题 - 成功函数不执行

> ID：10185387
> 
> 赞同：0
> 
> 时间：2012-04-17T05:07:39.840
> 
> 标签：jquery, jsonp

我正在尝试在外部服务器上读取一个简单的 json。在 Firebug 网络面板中，我在 Response 和 JSON 选项卡中看到了正确的数据。但是成功函数没有执行。

回调显示为：`fullurl?callback=jQuery1710837256851301949_1334637212326&_=1334638519052`而不是函数 - 不知道为什么 - 这可能是问题吗？

我的代码：

```
$.ajax({
    type: "GET",
    url: "external url",
    dataType: "jsonp",
    data : {},
    success: function (data) {
        console.log('success');
        alert("success");
        //   var myname = data.name;
        //   var myid = data.id;
        //     var fullcontent= "Name: " + myname + " ID: " + myid;
        // $("#jsondata").html(fullcontent);
    }
}); 
```

请帮忙 - 谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T05:14:06.993

您需要将回调函数指定为 jsonpCallback 而不是成功。

```
$.ajax({
        type: "GET",
        url: "external url",
        dataType: "jsonp",
        data : {},
        jsonpCallback: function (data) {
            console.log('success');
            alert("success");
        }
}); 
```

**编辑**：

为了使 JSONP 正常工作，服务器应直接将 JSON 数据写入流中。它不应该打印 JSON 字符串。[这个问题](https://stackoverflow.com/questions/2380551/jquery-success-function-not-firing-using-jsonp)的更多细节。

我假设您正在服务器中正确写入流。是这样吗？

# mysql - 一列的 SQL 性能

> ID：10185388
> 
> 赞同：-2
> 
> 时间：2012-04-17T05:07:47.973
> 
> 标签：mysql, sql

我有一个有 510,085 行的表，这促使我寻求更高的性能。此表中的一个字段称为“照片状态”。

在“photoStatus”中，510,045 行包含单词“Active”，其余 40 行包含单词“Suspended”。

这两个查询中的哪一个可以更快地搜索“活动”照片，还是没关系？

```
WHERE photoStatus = 'Active'

Or

WHERE photoStatus <> 'Suspended' 
```

显然，这是大规模查询的一部分，而不仅仅是一个 WHERE 条件。

**数据库是 MySQL (MyISAM)**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T05:13:42.327

为什么不将列转换为布尔值或数值，这比字符串比较快得多，那么您可以这样做：

```
 ....
  WHERE isActive; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T05:13:01.350

如果你在该列上有一个索引`WHERE photoStatus = 'Active'`会更快，因为服务器可以只扫描索引匹配的范围`Active`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T05:13:17.033

第二个会“稍微”快一些，因为它不需要比较整个字符串，只需第一个字符比较就足以包含根据数据库比较算法的结果

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-17T05:15:59.590

请务必在该字段上使用索引。并解释查询以查看查询的效率。

除此之外，您的查询只会过滤掉 40 个，因此查询的其余部分必须有效。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-17T05:16:31.630

无论哪种方式，它都必须索引表和行。

就我个人而言，我总是会匹配。使用等于。

```
WHERE photoStatus = 'Active' 
```

我总是使用 int 或 boolean，比匹配字符串更好。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-17T05:20:59.377

在这种情况下，普通索引无济于事，因为实际返回的行的百分比很大。

所以数据库将不得不查看每一行。可能会有一些差异，具体取决于 equal 与 !equal 比较的速度，但这应该可以忽略不计。

所以我希望结果几乎是相同的速度。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-17T05:25:29.990

您已经发布了一些详细信息以找到查询的快捷方式。

看来您需要全面扫描。在这种情况下，您可以尝试并行读取表格。不知道您使用什么 DBMS，但在 Oracle 中您可以使用提示`select /*+parallel(yourtable 8)*/ from yourtable`

你试图用这些数据做什么？哪些类型的查询很慢？你能举个例子吗？可以有很多技巧，你可以做很多错误。并非所有查询都应该快速运行。如果它们是用于 UI 的，则必须在 < 1s 的时间内响应。但如果是管理任务，可能需要 1 分钟 :)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-04-17T05:39:36.653

WHERE photoStatus = 'Active' 如果您基于类似于您的示例的小型测试在该列上有索引，则更好。

我在 sql server 中添加了查询执行。短一属于平等比较。它报告了更好的性能。如果你没有索引，查询成本是相似的。

![其中 statusname = '活动'](../Images/1d6b05da80f2767c64cb73d8c24839a6.png)

![其中 statusname <> '暂停'](../Images/8db5a4fa7873141f833a399f40501ae6.png)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-04-17T07:30:30.060

首先，0.5M 行不是一个大表——无论如何。

像“Active”/“Inactive”这样的列，作为索引本身可能没什么用，因为它没有足够的选择性来使索引扫描有益（事实上，如果它是 50% 的行）表，表扫描可能会更好）。

我怀疑实际上，“活动”与您的问题无关 - 毕竟，您并没有尝试将 .5M 行返回给客户端，是吗？

返回 0.5M 行的查询不会很快，因为仅返回行需要（相对）较长的时间。

无论如何，我的回答是：没关系，您需要检查查询的其他部分。发布带有完整查询、表结构和解释输出的问题。

# vb.net - 想通过 VB 代码在 ASP.Net 中使用 GridView 自动排序

> ID：10185395
> 
> 赞同：1
> 
> 时间：2012-04-17T05:08:03.697
> 
> 标签：vb.net, sorting, data-binding, gridview

我正在使用 Gridview 显示一个表中的数据，但是使用下面的代码它不允许我自动排序，我收到一条错误消息，指出“System.Web.HttpException：GridView 'GridView1' 触发事件排序未处理"

它应该自动排序，而不需要我为排序事件编写代码，我已经使它工作但通过 ASPX 文件，但我不想使用它，因为我想更改查询以执行不同的过滤器所以我想要从 .vb 文件而不是 .aspx 文件执行此操作

这是我的代码

```
Imports System.Data.SqlClient

Public Class WebForm1
   Inherits System.Web.UI.Page

   Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load

      Dim cnnData As New SqlConnection(ConfigurationManager.ConnectionStrings("DataTestConnectionString").ConnectionString)
    'Dim adData As New SqlDataAdapter
    Dim dsData As New DataSet
    Dim strQry As String

    strQry = "SELECT Student_No, " & _
                    "FName, " & _
                    "MName, " & _
                    "LName, " & _
                    "Phone_No, " & _
                    "Major, " & _
                    "Start_Date, " & _
                    "Status " & _
             "FROM tblStudent"

    Dim adData As New SqlDataAdapter(strQry, cnnData)

    adData.Fill(dsData)
    GridView1.DataSource = dsData

    GridView1.DataBind()

    'cnnData.Close()
    'adData.Dispose()

End Sub

End Class 
```

这是我的 aspx 标记：

```
 <asp:GridView 
         ID="GridView1" 
         runat="server" 
         AllowPaging="True" 
         AllowSorting="True" 
         AutoGenerateColumns="False" 
         DataKeyNames="Student_No" 
         Height="30%" 
         Width="90%"
         CssClass="GridViewCSS"
         PagerStyle-CssClass="GridViewPager" 
         AlternatingRowStyle-CssClass="GridViewAlt"
         DataGridViewLinkColumn="Student_No"
         >

  <AlternatingRowStyle CssClass="GridViewAlt"></AlternatingRowStyle>

        <Columns>

        <asp:hyperlinkfield 
             DataTextField ="Student_No"
             navigateurl="./studentedit.aspx"            
             headertext="Employee No"
             />

            <asp:BoundField 
                 DataField="Student_No" 
                 HeaderText="Student No" 
                 ReadOnly="True" 
                 SortExpression="Student_No" 
                 FooterStyle-Font-Underline ="true"
                 />

            <asp:BoundField 
                 DataField="FName" 
                 HeaderText="First Name" 
                 ReadOnly="True" 
                 SortExpression="FName" 
                 />

            <asp:BoundField 
                 DataField="MName" 
                 HeaderText="Middle Initial" 
                 ReadOnly="True" 
                 SortExpression="MName" 
                 />

            <asp:BoundField 
                 DataField="LName" 
                 HeaderText="Last Name" 
                 ReadOnly="True" 
                 SortExpression="LName" 
                 />

            <asp:BoundField 
                 DataField="Phone_No" 
                 HeaderText="Phone Number" 
                 ReadOnly="True" 
                 SortExpression="Phone_No" 
                 />

            <asp:BoundField 
                 DataField="Major" 
                 HeaderText="Major" 
                 ReadOnly="True" 
                 SortExpression="Major" 
                 />

            <asp:BoundField 
                 DataField="start_date" 
                 HeaderText="Start Date" 
                 ReadOnly="True" 
                 SortExpression="Start_Date" 
                 />

            <asp:BoundField 
                 DataField="Status" 
                 HeaderText="Status" 
                 ReadOnly="True" 
                 SortExpression="Status" 
                 />

        </Columns>

 <PagerStyle CssClass="GridViewPager"></PagerStyle>
      </asp:GridView 
```

帮助表示赞赏。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-22T23:23:10.677

I don't know about your ASP, but I have a little trick for sorting the DataTable itself in VB. As you know, you can't directly sort a datatable. You can, however, sort a dataview. The trick is to create a view of your table, sort the view, then convert your view into a new table.

With the below function you can pass in your datatable, the column name to sort on, and ASC or DESC for ascending or descending. You can remove the "order" parameter from the function if you want and the view will always sort ascending. You can then bind the table to your GrindView. You can also send a string of multiple sortColumns if you want.

Create the function:

```
Public Function SortMyTable(ByVal ds As DataTable,_
     sortColumn As String, order As String) As DataTable

    ' Create a DataView of your original dataset 
    Dim view As New DataView(ds)
    ' Sort your data view.
    view.Sort = sortColumn + " " + order 
    ' Put your dataview into a new datatable
    Dim dt As DataTable = view.ToTable()

    ' Return your newly sorted datatable
    Return dt
End Function 
```

Using the function:

```
Dim sortColumn As String = "MyColumnName"
Dim order As String = "ASC"

' Create your dataset
Dim ds As New DataTable
' fill your DataTable

' Use the function to return a new sorted dataset
Dim dt As DataTable = SortMyTable(ds, column, order)
'dt is a new datatable, sorted how you want it. 
```

Good luck!

References: [http://msdn.microsoft.com/en-us/library/system.data.dataview.sort.aspx](http://msdn.microsoft.com/en-us/library/system.data.dataview.sort.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-08T10:13:25.867

嘿，您还可以通过 SQL 查询对显示数据进行排序：

```
trQry = "SELECT Student_No, " & _
                "FName, " & _
                "MName, " & _
                "LName, " & _
                "Phone_No, " & _
                "Major, " & _
                "Start_Date, " & _
                "Status " & _
         "FROM tblStudent **order by FName**" 
```

您可以以任何方式排序，在上面我根据 FName 明智地对 tblstudent 进行排序。

# javascript - 如何在 javascript 中准确使用此 javascript new Date() 格式显示日期示例格式“15-Apr-2012 10.12 AM”

> ID：10185396
> 
> 赞同：0
> 
> 时间：2012-04-17T05:08:12.157
> 
> 标签：javascript, date, time, format

我需要像这样显示日期格式 2012 年 4 月 15 日上午 10 点 12 分。我尝试使用 javascript 使用 time=new Date()。但我无法获得正确的日期格式。它显示 GMT 全球时间。我需要显示时间格式。请问有人可以知道吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T05:11:42.713

看看[DateJS](http://www.datejs.com/ "日期")。如果您打算对日期做更多的事情而不仅仅是格式化它，我强烈建议您这样做。通过操作和显示绝对让事情变得更容易。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T05:11:38.717

最简单的事情是使用库：尝试[Moment](http://momentjs.com/docs/)，这是真正的交易。

# java - @PreAuthorize 中的自定义类主体

> ID：10185400
> 
> 赞同：2
> 
> 时间：2012-04-17T05:08:36.557
> 
> 标签：java, spring-security

**更新（17.04.2012）：**所以我有什么结果。

根上下文.xml：

```
<context:annotation-config/>
<context:component-scan base-package="com.grsnet.qvs.controller.web"/>  
<security:global-method-security pre-post-annotations="enabled" />
<bean id="permissionManager" class="com.grsnet.qvs.auth.PermissionManager"/> 
```

权限管理器.java

```
package com.grsnet.qvs.auth;

import com.grsnet.qvs.model.Benutzer;

public class PermissionManager {

public PermissionManager() {}

public boolean hasPermissionU01(Object principal, Integer permissionLevel) {
    return ((Benutzer)principal).getPermission().getU_01() >= permissionLevel;
}
} 
```

控制器：

```
@PreAuthorize("@permissionManager.hasPermissionU01(principal, 1)")
@RequestMapping(value = "/u01", method = RequestMethod.GET)
public String listU01(HttpServletRequest request, Map<String, Object> map) throws Exception {
    setGridFilters(map);
    return "u01panel";      
} 
```

我在 PermissionManager.hasPermissionU01 中设置了断点。看来我的安全注释只是被忽略了。

是什么原因？我的错误在哪里？

谢谢。

**更新结束**

经过几个小时的谷歌搜索，我不得不在这里问。我有

1.  Spring MVC 应用程序
2.  自定义用户详细信息服务
3.  自定义 UserDetails 类

    ```
    public class Benutzer extends User implements UserDetails {
    ...
      private Permission permission = null;
    ...
    } 
    ```

4.  权限类，不是很好实现，但我不得不使用它。

    ```
    public class Permission {
    ... 
      private Integer u_01 = 0;
    ...
    } 
    ```

5.  控制器

    ```
    @Controller 
    public class U01Controller {

        @RequestMapping(value = "/u01", method = RequestMethod.GET)
        public String listU01(HttpServletRequest request, Map<String, Object> map) throws Exception { 
    ```

我的任务是保护整个控制器并保护内部的方法。我想写一些这样的：

```
@PreAuthorize("principal.permission.u_01>0")
public class U01Controller { 
```

和

```
@RequestMapping(value = "/u01", method = RequestMethod.GET)
@PreAuthorize("principal.permission.u_01=2")
public String listU01(HttpServletRequest request, Map<String, Object> map) throws Exception { 
```

似乎 ACL 使用 UserDetails 接口来访问主体。是否可能在 ACL 中进行某种类型转换？

```
@PreAuthorize("(com.grsnet.qvs.model.Benutzer)principal.permission.u_01=2") 
```

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-17T05:35:46.757

虽然我认为您*可能*可以这样做（您只是尝试过吗？）在我看来，最好的方法是创建另一个知道如何进行权限决定的类。特别是，它可以这样做：

```
public class Decision {
    private Decision() {} // no instance, please

    // Type is probably a bit too wide...
    static boolean mayList(Object principal) {
        return ((com.grsnet.qvs.model.Benutzer)principal).permission.u_01 == 2;
    }

    // etc...
} 
```

然后你`@PreAuthorize`可以这样写：

```
@PreAuthorize("Decision.mayList(principal)") 
```

如果决策过程更复杂，那么您将开始使用 bean 来进行决策。然后，因为这是 Spring EL，你会写（假设你委托给`decider`bean）：

```
@PreAuthorize("@decider.mayList(principal)") 
```

（当然，我`Decider`上面的小班绝对不是豆子……）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T19:09:57.790

用Donal的解决方案解决了问题。我的错误是我放置

```
<security:global-method-security pre-post-annotations="enabled" /> 
```

在根上下文中。

小心它并将其放在 servletContext 中。

多纳尔，再次感谢。

# ios - 自定义导航栏按钮待机后冻结

> ID：10185409
> 
> 赞同：1
> 
> 时间：2012-04-17T05:10:32.243
> 
> 标签：ios, ipad

我遇到了一个奇怪的问题。我在我的项目中使用了自定义导航栏（为此我单独使用了另一个 ViewController），其中当然有导航按钮。由于设备在待机后变为活动状态，因此默认情况下它通常在纵向模式下变为活动状态。如果我们将设备保持在其他方向，它会旋转到该方向，并且一切正常。甚至导航栏按钮。

现在问题来了。如果设备在待机后保持在纵向模式，它会冻结导航栏按钮。据我得出的结论，这是因为应用程序默认在纵向模式下处于活动状态，并且由于设备也处于纵向模式，它找不到任何方向来旋转并因此冻结按钮。除了导航栏按钮，一切工作正常。如果我旋转设备，就像我说的，一切正常。

不知道为什么会这样。有人可以解释一下吗？

# jquery - 如何使用jquery计算复选框值

> ID：10185411
> 
> 赞同：0
> 
> 时间：2012-04-17T05:10:49.640
> 
> 标签：jquery, html

我有带有值的复选框，我想计算它们的值并在点击时显示在警报框中。

我尝试了过去 2 小时，但我不明白如何使它成为可能

```
<head>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript">

$(function(){

    $('button').click(function(){

    $('count').each(function(){

        })
    })
    })

</script>

</head>

<body>

<div>
<input type="checkbox" name="count" value="5" />
<span>5</span>
</div>

<div>
<input type="checkbox" name="count" value="3" />
<span>3</span>
</div>

<div>
<input type="checkbox" name="count" value="10" />
<span>10</span>
</div>

<input type="button" value="calculate" />

</body> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T05:45:21.043

这是`HTML`

```
<input type="checkbox" name="count" value="5" />
<span>5</span>
</div>

<div>
<input type="checkbox" name="count" value="3" />
<span>3</span>
</div>

<div>
<input type="checkbox" name="count" value="10" />
<span>10</span>
</div> 
    <input id="example" type="button" value="calculate" />​ 
```

这是`Jquery`

```
function recalculate(){
    var sum = 0;
    $("input[type=checkbox]:checked").each(function(){
      sum += parseInt($(this).attr("value"));
    });

    alert(sum);
}

$(function(){

    $('#example').click(function(){

        recalculate();

    });
});​ 
```

看到这个 JSFiddle：http: [//jsfiddle.net/nEGTv/22/](http://jsfiddle.net/nEGTv/22/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T05:14:52.453

你的意思是：

```
 $(document).ready(function() {
  var total = 0;
  $("input[type='button']").click(function() { // you can use id for the button
    $("input[name='count']").each(function() {
       total += parseInt($(this).val(), 10);
    });
    alert(total);
  });
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-17T05:16:15.013

试试这个我希望它有帮助

```
 <script type="text/javascript">
    $(document).ready(function() {

        $('button').click(function(){
             var total=0;
        $("input[type=checkbox]").each( 
        function() { 
           total=total+parseInt($(this).val());

        } );
    alert(total);
        });
 });
</script> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-17T05:21:20.987

```
$('input[type=button]').click(function(){
    result = 0;
    $('input[name=count]:checked').each(function(){
        result = Number(result) + Number($(this).val()); 
    });
    alert(result);
}); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-17T05:29:01.740

```
$('input[type=button]').on('click',function(){
    var tot=0;
    $("input[name=count]:checked").each(function() {
         tot += parseInt( $(this).prop('value'), 10 );
    });
    alert(tot);
}); 
```

## *[看演示](http://jsfiddle.net/5CPfu/2/)*

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-17T05:22:50.537

```
$(document).ready( function() {
  $('.chkOptions').click(
    function () {
      var ntot = 0;
      $('.chkOptions:checked').each(function () {
        ntot += parseInt($(this).val());
      });
      $('#txtSavingsTot').val(ntot);
    })
  .change();
}); 
```

# lisp - Lisp 中的所有数据都是不可变的吗？

> ID：10185417
> 
> 赞同：3
> 
> 时间：2012-04-17T05:11:37.627
> 
> 标签：lisp

在[这篇文章](http://fpcomplete.com/the-downfall-of-imperative-programming/)中，作者称赞了函数式编程的两个主要优点。但他没有提到（通用）Lisp。

Lisp 的数据是否符合这个“所有数据都是不可变的”？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-17T07:22:19.200

在 Common Lisp 中，所有数据（例如原始变量引用、列表、数组和哈希表）在默认情况下都是可变的，因此没有什么可以阻止某人更改变量的值、序列的元素或字段的字段。结构体。

但是，如果我们讨论的不是原始数据类型而是用户定义的数据，也就是 CLOS 结构和类，那么它们的插槽可以设置为只读的。例如，对于结构：

```
(defstruct person
  (name nil :type string :read-only t)
  (age nil :type (integer 0 100)))

(let ((john (make-person :name "John" :age 30)))
  (princ john)
  ;; * `age' is mutable:
  (incf (person-age john))
  (princ john)
  ;; * `name' is not:
  ;; (setf (person-name john) "garbage name")
  ;; ^ you can't do this because the `defstruct' macro just don't emit SETFer
  ;;   for the `name' slot as you made it read-only.
  ) 
```

类为插槽提供了更多的访问控制（这类似于`const`C 中限定符的机制，不同的是在 Common Lisp 中它不是编译时保证，而是可以在重新启动时处理的异常），您可以授予他们读写、只读、只写或无访问权限。

* * *

有关更多信息，请参阅以下链接：

*   [http://psg.com/~dlamkins/sl/chapter07.html](http://psg.com/~dlamkins/sl/chapter07.html)

*   [http://www.gigamonkeys.com/book/object-reorientation-classes.html](http://www.gigamonkeys.com/book/object-reorientation-classes.html)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-17T05:37:39.517

在 Common Lisp 中，您可以选择使用函数式样式。避免使用`setf`,`setq`等，你就拥有了一门函数式编程语言。换句话说，不要更改任何变量值，不要在创建后更改复合数据结构（cons、向量、结构等）的内容。函数在不修改状态的情况下接受输入并产生输出。

因此，虽然 Common Lisp 提供了必要的操作，但如果您不想使用它们，则无需使用它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T05:15:07.297

不，Common Lisp 中的数据不是不可变的。

`setf`如使用函数在 SBCL 中所见

```
* (setf x 0)
0
* x
0
* (setf x 1)
1
* x
1 
```

# objective-c - UIPinchGestureRecognizer - 禁止“近距离捏”检测

> ID：10185420
> 
> 赞同：0
> 
> 时间：2012-04-17T05:11:40.393
> 
> 标签：objective-c, cocoa-touch, cocos2d-iphone, box2d, uigesturerecognizer

我正在使用 UIPinchRecognizer 和一个张开的捏来检测何时有人“拉开” Box2D 世界中的精灵。

问题是，当您将两个项目相互拖动时，它会检测到这是一个紧密的捏合，并破坏了我所有的触摸关节和 box2d 对象的移动。

我试图将我的问题分成两个问题 - 您现在正在阅读的问题：是否可以抑制近距离捏合，如果这不可能：[如何检测自己的张开捏合](https://stackoverflow.com/q/10185556/459116)。

我需要抑制对闭合夹的检测或编写我自己的打开夹检测。

我尝试在这样的打开捏合上从捏合手势方法返回：

```
if (pinch.velocity < 0) {
    //close pinch
    return;
} 
```

但它不起作用，因为它仍然会破坏触摸关节/box2d 对象。

**你能通过抑制对紧缩的检测来帮助我解决这个问题吗？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T02:07:44.527

我需要在设备上检查这个，但我认为这已经解决了它：

```
//Multitouch / pinch?
UIPinchGestureRecognizer *pinchRecognizer = [[UIPinchGestureRecognizer alloc] initWithTarget:self action:@selector(pinchGesture:)];
pinchRecognizer.cancelsTouchesInView = NO; //This fixes it because it stops the mouse joints getting broken. 

[[[CCDirector sharedDirector] openGLView] addGestureRecognizer:pinchRecognizer];
[UIPinchGestureRecognizer release]; 
```

在 pinchGesture 方法中使用这个：

```
if(pinch.velocity <0 ){
    return;
} 
```

# python - Python脚本将文本写入文件，但不添加它应该添加的文本

> ID：10185424
> 
> 赞同：3
> 
> 时间：2012-04-17T05:11:54.613
> 
> 标签：python, file-manipulation

我很惭愧再次求助于求助，但我被困住了。

我有一本西班牙小说（纯文本），我有一个 Python 脚本，它应该使用另一个文本文件中的自定义词典将难词的翻译放在括号中。

经过大量的试验和错误，我设法让脚本运行，并将小说写入一个新的文本文件，就像它应该做的那样。

唯一的问题是，小说中的文字并没有做任何改动，也就是没有在文本中插入译文。字典是纯文本文件，格式如下：

```
[spanish word] [english translation]                                      
[spanish word] [english translation] 
```

等等。请注意，这些词并没有真正括在括号中。每个单词之间有一个空格，文件中的其他任何地方都没有空格。

这是有问题的代码：

```
bookin = (open("novel.txt")).read()
subin = open("dictionary.txt")
for line in subin.readlines():
    ogword, meaning = line.split(" ")
    subword = ogword + "(meaning)"
    bookin.replace(ogword, subword)
    ogword = ogword.capitalize()
    subword = ogword + "(meaning)"
    bookin.replace(ogword, subword)
subin.close()
bookout = open("output.txt", "w")
bookout.write(bookin)
bookout.close() 
```

建议将不胜感激。

***编辑***： MemoryError 现在已经解决了，我以为我已经修复的字典中有错误。非常感谢那些帮助我解决这个愚蠢问题的人！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-17T05:16:18.140

改变：

```
bookin.replace(ogword, subword) 
```

到

```
bookin = bookin.replace(ogword, subword) 
```

解释：`replace`不会原地改变字符串——事实上，字符串是不可变的——相反，它返回一个新版本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-17T11:27:43.197

正如@David Robinson 指出的那样，问题在于您使用了替换。应该是

```
 bookin = bookin.replace(ogwrd, subword) 
```

昨晚当你发布你的问题时我起床了（我对问题和答案都投了赞成票——我自己没有及时发布），但这个问题一直困扰着我。即使已经发布并接受了答案，我还是想提供以下建议 - 因为我相信如果您可以生成如上所示的代码，您很可能可以自主找出问题的大部分来源。

在这类问题中，我建议创建一个小数据文件，比如 10 条记录/行，并通过在程序中添加一些诊断打印语句来使用它来跟踪数据。我在下面展示了这个版本。它还没有完全完成，但我希望意图是明确的。

基本思想是通过查看您的“调试打印语句”生成的输出来验证您期望发生的一切实际上是否在每个步骤中发生。在这种情况下，您会看到 `bookin`没有被修改。

```
bookin = (open("novel.txt")).read()
subin = open("dictionary.txt")

print 'bookin =', bookin  # verify that you read the information 

for line in subin.readlines():
    print 'line = ', line # verify line read

    ogword, meaning = line.split(" ")
    print 'ogword, meaning = ', ogword, meaning # verify ...

    subword = ogword + "(meaning)"
    print 'subword =', subword # verify ...

    bookin.replace(ogword, subword)
    print 'bookin post replace =', bookin # verify ... etc

    ogword = ogword.capitalize()
    subword = ogword + "(meaning)"
    bookin.replace(ogword, subword)

subin.close() 

print 'bookout', bookout # make sure final output is good ...
bookout = open("output.txt", "w")
bookout.write(bookin)
bookout.close() 
```

最后，Python 相对于其他语言的另一个优点是您可以交互式地使用它。我最终经常做的是验证我对解释器中的功能和行为的理解（我经常懒得看文档——这实际上不是一件好事）。因此，在您的情况下，由于问题在于替换（我的调试打印语句会向我显示这一点），我会在解释器中尝试以下序列

```
 s = 'this is a test'
 print s
 s.replace('this', 'that')
 print s 
```

并且会看到`s`没有改变，在这种情况下，我会查看文档，或者只是尝试`s = s.replace('this', 'that')`.

我希望这是有帮助的。这种基本的调试技术通常可以帮助查明问题区域并成为良好的第一步。下线调试器等非常有用。

PS：我是新来的，所以我希望这种额外的答案不会被反对。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-17T10:54:40.000

在解释器中输入这些信息时，您可以获得此信息：

```
>>> help(str.replace)  
>>> help('a'.replace)  
>>> s = 'a'  
>>> help(s.replace)  
>>> import string  
>>> help(string.replace) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-17T12:18:41.083

除了令人惊讶的 MemoryError 之外，考虑到文件的大小，您还有几处可以改进的地方；请参阅下面的评论：

```
bookin = open("novel.txt").read() # don't need extra ()
subin = open("dictionary.txt")
# for line in subin.readlines():
# readlines() reads the whole file, you don't need that
for line in subin:
    # ogword, meaning = line.split(" ")
    # the above will leave a newline on the end of "meaning"
    ogword, meaning = line.split()
    # subword = ogword + "(meaning)"
    # if ogword is "gato" and meaning is "cat",
    # you want "gato (cat)"
    # but you will get "gato(meaning)"
    subword = ogword + " (" + meaning + ")"
    bookin = bookin.replace(ogword, subword)
    ogword = ogword.capitalize()
    subword = ogword + "(meaning)"  # fix this also
    bookin.replace(ogword, subword) # fix this also
    print len(bookin) # help debug your MemoryError
subin.close()
bookout = open("output.txt", "w")
bookout.write(bookin)
bookout.close() 
```

你需要听从@Levon 的建议，在一些小的测试数据文件上尝试你的代码，这样你就可以看到发生了什么。

使用这本单行字典后：

```
gato cat 
```

用这本单行小说：

```
El gato se sirvió un poco de Gatorade para el "alligator". 
```

您可能希望重新考虑您的高级策略。

# sql-server-2005 - 如何在 SQL Server 2005 中使用触发器进行更新

> ID：10185426
> 
> 赞同：0
> 
> 时间：2012-04-17T05:11:59.297
> 
> 标签：sql-server-2005, triggers

我有一个名为的表`tbl_gallery`，其中有一列`bit`名为`isActive`.

当用户更新该`IsActive`值时，其他行将`IsActive = true`自动变为 false。

如何使用更新的触发器来做到这一点？

请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T05:18:38.737

我想你想要这样的东西：

```
CREATE TRIGGER trgGalleryActive
ON dbo.tbl_gallery
FOR UPDATE
AS
    BEGIN
        UPDATE g
        -- Update all other gallery rows for this same user to false
            SET g.IsActive = 0
            FROM tbl_gallery g
                INNER JOIN inserted i
                on g.UserPK = i.UserPK
            WHERE
                -- However, we don't want current inserted records to be updated
                g.TablePK <> i.TablePK
                            -- As per Marc's comment - don't update existing inactive rows unnecessarily
                            AND g.IsActive = 1
                            -- Only if this record is active should any of this happen
                            AND i.IsActive = 1
    END 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-06T22:03:44.423

更新第一个表后触发更新第二个表：

```
CREATE TRIGGER update_table_cityUpdated_afterTable_cityUpdate
  ON Table_city 
  AFTER UPDATE AS
BEGIN
  DECLARE @cityId AS BIGINT
  DECLARE @stateId AS BIGINT
  DECLARE @CityName AS NVARCHAR(200)

  SELECT @cityId=cityId FROM INSERTED
  SELECT @stateId= stateId FROM INSERTED
  SELECT @CityName= CityName FROM INSERTED
  UPDATE table_cityUpdated
 SET
    [dbo].[table_cityUpdated].stateId=@stateId,
    [dbo].[table_cityUpdated].CityName=@CityName
  WHERE [dbo].[table_cityUpdated].cityId=@cityId
END
; 
```

# iphone - 应用商店中是否有 iOS 应用所需的图形资源列表？

> ID：10185430
> 
> 赞同：5
> 
> 时间：2012-04-17T05:12:29.240
> 
> 标签：iphone, itunes

Google 提供了在其 Play 市场中推广所需[的图形资源的明确列表，以及](http://support.google.com/googleplay/android-developer/bin/answer.py?hl=en&answer=1078870)[启动器图标的大小和要求](http://developer.android.com/guide/practices/ui_guidelines/icon_design_launcher.html)。

也许我遗漏了一些东西，但我在 Apple 的 iTunes 商店中找不到 iPhone 应用程序的图形资产和图标要求的类似列表。

这样的清单存在吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-11-18T12:32:01.007

pre 答案中的链接不再有效，因此我将提供我发现对收集有关应用程序资产的信息有用的链接：

1.  [第一步：在 iTunes Connect 中识别您的应用程序](http://bit.ly/ios-identify-app)
2.  [iTunes Connect 应用程序属性](http://bit.ly/ios-app-properties)

第一个链接将为您提供一些关于如何在 App Store 中显示艺术作品和文本的一般指南，而第二个链接是需要填写或提供的所有资产的详细列表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T05:45:48.480

对于 App Store，您需要一个 1024 像素的图标和至少一个视网膜解决方案的屏幕截图（如果您的应用程序是通用的，则需要两个 - 一个用于 iPhone，一个用于 iPad）

在您的应用程序中，您需要为您支持的每种设备类型（iPhone/iPad）提供至少一个图标，但您可能应该提供更多。对于应用程序应支持的不同图标大小，请参阅[此文档](http://developer.apple.com/library/ios/#documentation/iPhone/Conceptual/iPhoneOSProgrammingGuide/App-RelatedResources/App-RelatedResources.html)。

# php - 需要有关创建 sql 查询的建议

> ID：10185433
> 
> 赞同：0
> 
> 时间：2012-04-17T05:12:37.310
> 
> 标签：php, mysql

我正在设计一个实验室预订页面。我需要一些查询来检查用户选择的时间的可用性。我正在使用以下方法进行检查：

```
select * from slotbook where start between $startTime and $endTime or end between $startTime and $endTime 
```

$startTime 和 $endTime 是从 php 表单中发布的。到现在还好。但我想要一个更多的功能，即 $startTime 应该比它最近的预订时段至少大 10 分钟。这意味着如果之前预订了一个结束时间为下午 1:30 的时段，并且用户提交了下午 1:35 作为其预订的开始时间，则应该检查它。这个查询需要什么补充？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T05:35:46.460

如果我理解正确，为什么不在运行查询之前从 $startTime 中减去 10 并在 $endTime 中加上 10，从而在所选时间的任一侧给您 10 分钟？

# gwt - GWTP - 如何根据外形创建多个视图？

> ID：10185437
> 
> 赞同：0
> 
> 时间：2012-04-17T05:12:59.723
> 
> 标签：gwt, mobile, tablet, gwtp

如何使用 GWTP 为移动设备、平板电脑和桌面创建不同的视图？我必须有不同的 Ginjector 吗？对于移动演示者，我可能有更多或更少的演示者，或者某些功能可能更多或更少。那怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T05:30:04.767

您可以拥有一个 ClientGinjector 接口并在多个接口中继承它，例如 DesktopGinjector、TabletGinjector 等。然后，您可以为演示者和视图创建不同的绑定。GWTP 使处理这种情况变得更加容易。有一个开源客户体验框架，其中包含使用 GWTP 创建移动网络应用程序的示例。你可以在这里查看 - [http://code.google.com/p/gwt-cx/](http://code.google.com/p/gwt-cx/)

# ios - 项目有English.lproj 和en.lproj。如何解决？

> ID：10185439
> 
> 赞同：0
> 
> 时间：2012-04-17T05:13:04.573
> 
> 标签：ios

似乎我的项目以某种方式获得了两个英语资源文件夹：/English.lproj 和 /Classes/en.lproj。显然这似乎是错误的，虽然它在设计设置为英语时有效，但我怀疑当设备设置为非英语时它会导致崩溃问题（应用程序找不到默认资源 -[我的应用程序在其他语言中崩溃.xibs 好像没有加载。为什么？](https://stackoverflow.com/questions/10177541/my-app-crashes-in-other-languages-xibs-seem-to-not-be-loaded-why)）

那么如何解决这个问题呢？显然我不能只移动文件。XCode 错过了旧的，找不到新的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T20:20:20.230

我找到了解决方案。基本上复制文件，删除引用，创建新引用，删除旧文件。

此处的详细说明： [我的应用程序在其他语言中崩溃。Xibs 似乎没有加载。为什么？](https://stackoverflow.com/questions/10177541/my-app-crashes-in-other-languages-xibs-seem-to-not-be-loaded-why/10194824#10194824)

# ios - 使用叠加视图录制视频

> ID：10185440
> 
> 赞同：2
> 
> 时间：2012-04-17T05:13:07.617
> 
> 标签：ios, avcapturesession

您好我正在开发一个通用应用程序。我正在使用 AVCaptureMovieFileOutput 录制视频。在录制视频时，我在叠加视图上显示了一些随机图像。我想要做的是我想要这些叠加图像以及录制的视频。任何人都可以在这方面帮助我。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T21:11:39.970

以下是如何将叠加层显示到屏幕上，只需按照本教程进行操作：

[使用 AVCaptureSession 的 iOS 相机覆盖示例](https://web.archive.org/web/20200109090100/http://musicalgeometry.com/p/1273)

下一步将调用 startVideoCapture 方法，然后就可以了。

# jquery - Jquery - 处理悬停的更好方法

> ID：10185441
> 
> 赞同：0
> 
> 时间：2012-04-17T05:13:10.990
> 
> 标签：jquery, html, css

我有一个列表，默认情况下只显示顶层。当您将鼠标悬停时，它会显示子菜单项。这按预期工作，但是它总是打开一个菜单，因为 on 类仍然在最后一个悬停的项目上。我觉得必须有更好的方法来做到这一点，但我在网站上查看的其他示例似乎并不完全是我所追求的？请参见下面的示例。

[http://jsfiddle.net/aaronk85/6PfKb/](http://jsfiddle.net/aaronk85/6PfKb/)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-17T05:17:41.910

[jQuery hover 方法](http://api.jquery.com/hover/)实际上有两个函数，第一个是'over'（或in），第二个是'off'（或out）。

我已经用正确的语法更新了你的小提琴。

[http://jsfiddle.net/6PfKb/9/](http://jsfiddle.net/6PfKb/9/)

```
var $link = $('ul.internal-dropdown li.top-level');
$link.hover(function() {
    $(this).addClass('on');
}, function() {
    $link.removeClass('on');
});​ 
```

# android - 如何在Android中使彩色图像变为黑白

> ID：10185443
> 
> 赞同：10
> 
> 时间：2012-04-17T05:13:21.100
> 
> 标签：android, colors

当我在android中向用户显示彩色图像（我从网上下载）时，我想知道如何将它转换为黑白图像。任何人都可以在您的任何 android 工作中找到此要求。请告诉我。

谢谢拉克什曼

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-17T08:08:54.397

嗨，您可以使用对比度使图像变成黑色和白色。

看代码..

```
public static Bitmap createContrast(Bitmap src, double value) {
    // image size
    int width = src.getWidth();
    int height = src.getHeight();
    // create output bitmap
    Bitmap bmOut = Bitmap.createBitmap(width, height, src.getConfig());
    // color information
    int A, R, G, B;
    int pixel;
    // get contrast value
    double contrast = Math.pow((100 + value) / 100, 2);

    // scan through all pixels
    for(int x = 0; x < width; ++x) {
        for(int y = 0; y < height; ++y) {
            // get pixel color
            pixel = src.getPixel(x, y);
            A = Color.alpha(pixel);
            // apply filter contrast for every channel R, G, B
            R = Color.red(pixel);
            R = (int)(((((R / 255.0) - 0.5) * contrast) + 0.5) * 255.0);
            if(R < 0) { R = 0; }
            else if(R > 255) { R = 255; }

            G = Color.red(pixel);
            G = (int)(((((G / 255.0) - 0.5) * contrast) + 0.5) * 255.0);
            if(G < 0) { G = 0; }
            else if(G > 255) { G = 255; }

            B = Color.red(pixel);
            B = (int)(((((B / 255.0) - 0.5) * contrast) + 0.5) * 255.0);
            if(B < 0) { B = 0; }
            else if(B > 255) { B = 255; }

            // set new pixel color to output bitmap
            bmOut.setPixel(x, y, Color.argb(A, R, G, B));
        }
    }

    return bmOut;
} 
```

在 mathod 调用上将 double 值设置为 50。例如`createContrast(Bitmap src, 50)`

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2018-01-22T20:54:59.547

使用内置方法：

```
public static Bitmap toGrayscale(Bitmap srcImage) {

    Bitmap bmpGrayscale = Bitmap.createBitmap(srcImage.getWidth(), srcImage.getHeight(), Bitmap.Config.ARGB_8888);

    Canvas canvas = new Canvas(bmpGrayscale);
    Paint paint = new Paint();

    ColorMatrix cm = new ColorMatrix();
    cm.setSaturation(0);
    paint.setColorFilter(new ColorMatrixColorFilter(cm));
    canvas.drawBitmap(srcImage, 0, 0, paint);

    return bmpGrayscale;
} 
```

# android - 绘制虚线 (....) 路径而不是线 (________)

> ID：10185445
> 
> 赞同：5
> 
> 时间：2012-04-17T05:13:31.050
> 
> 标签：android, google-maps, map, bitmap, android-canvas

现在下面是我在地图中绘制地理点之间路径的代码。这工作得很好。我要实现的不是画一条线，而是像在 iPhone 中那样用点（。）显示这条路径。我希望它像这样 gp1.........gp2 而不是像 gp1_ ***_* __ *_*** _gp2 那样画一条直线。

我已经尝试了几乎所有的选项，但仍然没有成功，任何人都可以帮助我解决这个问题？

```
private void drawPath(List geoPoints, int color) {
    List overlays = objMapView.getOverlays();
    int loopcount = geoPoints.size() - 1;
    for (int i = 0; i < loopcount; i++) {
        GeoPoint p1 = (GeoPoint) geoPoints.get(i);
        GeoPoint p2 = (GeoPoint) geoPoints.get(i + 1);
        MyPathOverLay p = null;
        /**** Marking the start and end of the trailpath ****/
        if (i == 0) {
            Bitmap bmp = BitmapFactory.decodeResource(this.getResources(),R.drawable.greenflag);
            p = new MyPathOverLay(p1, p2, 0xFFFF0000, true, false, bmp);
        } else if (i == loopcount - 1) {
            Bitmap bmp = BitmapFactory.decodeResource(this.getResources(),R.drawable.redflag);
            p = new MyPathOverLay(p1, p2, 0xFFFF0000, false, true, bmp);
        } else {
            p = new MyPathOverLay(p1, p2, 0xFFFF0000, false, false, null);
        }
        overlays.add(p);
    }
}

public class MyPathOverLay extends Overlay {

private GeoPoint gp1;
private GeoPoint gp2;
private int color;
Boolean  isFirstPOI;
Boolean isLastPOI;
AudioMap audioMap;
Bitmap bmp;

public MyPathOverLay(GeoPoint gp1, GeoPoint gp2, int color,Boolean first, Boolean last,Bitmap bitMap) {
    this.gp1 = gp1;
    this.gp2 = gp2;
    this.color = color;
    this.isFirstPOI= first;
    this.isLastPOI = last;
    this.bmp = bitMap;
}

@Override
public void draw(Canvas canvas, MapView mapView, boolean shadow) {
    Projection projection = mapView.getProjection();
    Paint paint = new Paint();
    Point point = new Point();
    projection.toPixels(gp1, point);
    paint.setColor(color);
    Point point2 = new Point();
    projection.toPixels(gp2, point2);
    paint.setStrokeWidth(5);
    paint.setAlpha(120);
    canvas.drawLine(point.x, point.y, point2.x, point2.y, paint);
  //---translate the GeoPoint to screen pixels---
    Point screenPts = new Point();
    mapView.getProjection().toPixels(gp1, screenPts);
    //---translate the GeoPoint to screen pixels---
    Point screenPts1 = new Point();
    mapView.getProjection().toPixels(gp2, screenPts1);
    if(isFirstPOI == true){
            canvas.drawBitmap(bmp,screenPts.x-20,screenPts.y-40, null);  
    }
    else if(isLastPOI == true) {
            canvas.drawBitmap(bmp,screenPts1.x-20,screenPts1.y-35, null);  
   }
    super.draw(canvas, mapView, shadow);
} 
```

}

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-17T05:31:32.703

感谢这个人，我提到了这个例子，它对我有用。

[如何在 Android 中制作虚线/虚线？](https://stackoverflow.com/questions/6103713/how-do-i-make-a-dotted-dashed-line-in-android)

只需要添加这两行，

```
 paint.setPathEffect(new DashPathEffect(new float[] {10,10}, 5));
    canvas.drawLine(point.x, point.y, point2.x, point2.y, paint); 
```

我设置后，

```
 paint.setAlpha(120); 
```

@弗兰肯斯坦，谢谢

# node.js - 节点命令行界面更改

> ID：10185457
> 
> 赞同：0
> 
> 时间：2012-04-17T05:14:44.240
> 
> 标签：node.js, terminal

我正在为节点服务器制作一个命令界面，但我已经达到了我希望它看起来更好的地步。

我想要控制台，这样您就可以在终端屏幕底部输入命令，然后按回车键，它会将回复添加到实际命令行中。

如果你曾经从命令行运行过 minecraft bukkit 服务器，你应该知道我在说什么。

如果您仍然不明白，这是我在说什么的图片。想象这是在终端中，忽略滚动条：[http ://cl.ly/1K0h1V0r0H3f3U3t3L22](http://cl.ly/1K0h1V0r0H3f3U3t3L22)

有没有办法让控制台看起来像这样，而不必为它制作自己的程序或让屏幕重新打印所有其他信息来伪造这种外观？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T21:56:25.820

[我没有这样做，但我相信使用Node.js REPL](http://nodejs.org/api/repl.html)可以轻松实现类似的事情。您可以覆盖该`eval`参数以提供您自己的命令处理。

它不会具有您想要的确切外观，但它将是一个您可以使用的交互式提示（更类似于 Windows 命令 shell 或 Linux shell）。

如果您想从屏幕截图中获得准确的外观，我认为没有任何 Node.js 模块可以帮助您。有一些允许您在控制台中使用颜色，以及一些基本的突出显示（例如粗体），但没有什么可以让您完全控制控制台屏幕。

# c++ - 查找视频文件的比特率

> ID：10185458
> 
> 赞同：1
> 
> 时间：2012-04-17T05:14:45.067
> 
> 标签：c++, video, bitrate

我们如何在 C++ 中找到视频文件的比特率？我们可以通过文件处理来做到这一点吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T05:17:45.023

安装 [FFMEPG](http://ffmpeg.org/)它将为您提供与视频相关的所有信息

例如

```
ffmpeg -i filename.flv 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T05:28:20.917

如果您想自己实现，您需要能够读取视频容器格式（Quicktime、ASF、AVI、Matroska 等）并尝试从元数据中查找比特率。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-29T07:03:35.257

您可以使用 ffmpeg 项目中的 ffprobe 来获取有关您的视频文件的信息并获得一个不错的 JSON 输出。

检查[此答案](https://stackoverflow.com/a/16802769/1006863)以获取示例。

# c# - 使用逗号作为小数点的数字从 C# 导出到 Excel？

> ID：10185464
> 
> 赞同：0
> 
> 时间：2012-04-17T05:15:01.127
> 
> 标签：c#, excel, export

我想将数字数据从 C# 导出到 Excel，其中浮点数使用逗号 (',') 代替小数点 ('.')。我通过在 C# 中编写 XML 代码来导出 Excel 文件。

数据已从代码端正确导出，但如果数据类型为“数字”，则 Excel 文件会省略 (',')。当我为英语生成相同的数据时，它会完美生成。

示例：数字 = 65,4 然后在 Excel 文件中显示 654。

示例代码：--xml 代码

```
 <?xml version="1.0" encoding="UTF-8" ?>
<?mso-application progid="Excel.Sheet"?>
<ss:Workbook xmlns:ss="urn:schemas-microsoft-com:office:spreadsheet"
 xmlns:o="urn:schemas-microsoft-com:office:office"
 xmlns:x="urn:schemas-microsoft-com:office:excel"
 xmlns:html="http://www.w3.org/tr/rec-html40">
<ss:Worksheet ss:Name="test">
<ss:Table>
<ss:Row>
<ss:Cell ss:StyleID="s65"><ss:Data ss:Type="String">123</ss:Data></ss:Cell>
<ss:Cell ss:StyleID="s65"><ss:Data ss:Type="Number">64,3</ss:Data></ss:Cell>
<ss:Cell ss:StyleID="s65"><ss:Data ss:Type="Number">72,0</ss:Data></ss:Cell>
<ss:Cell ss:StyleID="s65"><ss:Data ss:Type="Number">26,0</ss:Data></ss:Cell>
<ss:Cell ss:StyleID="s65"><ss:Data ss:Type="Number">72,0</ss:Data></ss:Cell></ss:Row>
</ss:Table>
</ss:Worksheet></ss:Workbook> 
```

c#代码——

```
 Dim excelXml As String = GetExcelXml(dsInput, filename)
    Response.Clear()
    Response.AppendHeader("Cache-Control", "cache, must-revalidate")
    Response.AppendHeader("Pragma", "public")
    Response.AppendHeader("Content-Type", "application/vnd.ms-excel")
    ' Response.ContentEncoding = System.Text.Encoding.GetEncoding(1252)
    Response.Charset = "iso-8859-1"
    Response.Cache.SetCacheability(HttpCacheability.NoCache)
    Response.AppendHeader("Content-disposition", "attachment; filename=" &   
         System.IO.Path.GetFileName(filename))
    Response.Write(excelXml)
    Response.Flush()
    Response.[End]() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T00:17:03.930

在调用`GetExcelXml`将 XML 文件读入字符串后的代码中，遍历字符串并转换所有数字，使逗号成为句点。您应该能够使用正则表达式通过一行代码来完成。

例如，下面是一行代码，它将所有 XML Number 类型转换为使用点而不是逗号。转换后将其写入`excelXMLCorrected`您的 Excel 文件。无论您使用哪种语言生成 XML，此功能都将起作用：

```
excelXMLCorrected = Regex.Replace(excelXml, 
   @"<ss:Data ss:Type=""Number"">([\d]+),([\d]{1})</ss:Data>", 
   "<ss:Data ss:Type=\"Number\">$1.$2</ss:Data>"); 
```

# sitecore - Sitecore Publish Agent 未提取排队的项目，用于增量发布

> ID：10185465
> 
> 赞同：3
> 
> 时间：2012-04-17T05:15:01.713
> 
> 标签：sitecore, publish

我们将发布代理设置为使用“增量发布”每 15 分钟运行一次。Sitecore 客户端用户在 Sitecore 中“签入”和“批准”项目以将项目排队。如果需要，他们还可以手动发布以使某些内容立即生效。我们看到一些问题，其中一些通过工作流程签入和批准的项目没有被预定的发布者拾取。此外，当用户尝试从发布选项卡发布时，父项发布而不是子项。子项必须一次发布一个。

对我来说，问题似乎是这些批准的项目没有被添加到发布队列中。但我不确定这一点。

我们安装了一个名为“发布状态管理器”的模块，它基本上向 Sitecore 用户显示处于活动状态或处于队列中的各种发布操作。安装该模块后开始出现此问题。我不确定这是否是这个问题的原因。

我正在寻找一些关于在哪里查找以及如何解决此问题的建议/建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T10:55:36.277

处于最终工作流程步骤中的项目始终添加到发布队列中。我想您的问题围绕着这样一个事实，即工作流程中的项目不在最终的工作流程步骤中。请确保实际达到此状态。

如果您想检查发布队列中的内容，请阅读这篇文章：

[http://briancaos.wordpress.com/2011/06/16/sitecore-publish-queue/](http://briancaos.wordpress.com/2011/06/16/sitecore-publish-queue/)

您必须使用“当前视图”中描述的代码，因为它会告诉您下次执行增量发布时发布的内容。

此外，确保发布代理发布当前目标和正确的语言：

```
 <agent type="Sitecore.Tasks.PublishAgent" method="Run" interval="00:00:00">
    <param desc="source database">master</param>
    <param desc="target database">web</param>
    <param desc="mode (full or smart or incremental)">incremental</param>
    <param desc="languages">en, da</param>
  </agent> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T19:00:16.523

只是我们安装的模块覆盖了发布管道

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-28T15:37:46.863

如果 web.config 中的 publishing.checksecurity 的值为 true，则发布代理将不会获取排队的项目。您可以将此值设为假。或者创建一个用户，给它适当的访问权限并覆盖代理来切换用户。

# redirect - Joomla 管理员组件重定向不起作用？

> ID：10185467
> 
> 赞同：0
> 
> 时间：2012-04-17T05:15:11.063
> 
> 标签：redirect, joomla, components, admin

我需要在 admin joomla 组件中创建带有消息的重定向，我使用的是 joomla 2.5 并且没有 MVC 模式。

这是我的代码

```
global $mainframe;    
$mainframe->redirect('index.php?option=com_book','Message Saved'); 
```

但它产生了一个致命的错误

```
Fatal error: Call to a member function redirect() on a non-object in 
```

请帮帮我，你们可能是 joomla 组件开发方面的专家。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T07:08:31.750

您收到错误是因为 Joomla! 2.5 没有全局`$mainframe`对象，这是 Joomla 1.0 天的遗留物。在 Joomla！1.5 这是一个*遗留*的支持功能。

您可以使用以下内容替换*您的* `$mainframe`：

```
$jApp = JFactory::getApplication();
$jApp->redirect($url, $msg); 
```

如果您正在更新旧代码以使用 Joomla！2.5 你应该阅读[这篇](http://docs.joomla.org/Adapting_a_Joomla_1.5_extension_to_Joomla_1.6)涵盖这些问题的文章。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T11:30:25.643

快捷方式

```
$mainframe = JFactory::getApplication();    
$mainframe->redirect('index.php?option=com_book','Message Saved'); 
```

# hibernate - Servlet 部署后只从数据库返回一次数据

> ID：10185470
> 
> 赞同：0
> 
> 时间：2012-04-17T05:15:16.830
> 
> 标签：hibernate, jsp, servlets

我正在构建一个门户网站，我正在使用 Hibernate 访问 MySQL 并将获取的数据推送到 JSP 以表格形式打印。我正在使用 Tomcat 进行 servlet 部署。我的 servlet 必须进行 3 个 HQL 查询，然后将检索到的数据推送到 JSP。在我部署 servlet 后，它在我第一次使用 HTML 表单进行查询时工作正常。此外，在 Eclipse 控制台中，我可以看到正在执行的所有 3 个 HQL 查询。但是当我尝试再次进行查询时，即使是与上次从我的 HTML 表单进行的查询相同的查询，我也没有在 JSP 页面上获得任何数据（我试图填充的表只包含零）。检查 Eclipse 控制台，我发现只执行了第一个 HQL 查询，没有其他任何内容出现，甚至没有错误消息。如果我重新启动 Tomcat，或者只是重新部署 servlet，它可以工作，但只能再一次。请帮忙

流程就像 - HTML 表单 -> Servlet -> JSP

```
 String major,date,minor,ip;
         double[][][] transactionTime = new double[2][50][10];
         int[] testCaseId = new int[10];
         String[] activityName = new String[10];
         major=req.getParameter("major");
         date=req.getParameter("date");
         minor=req.getParameter("minor");
         ip=req.getParameter("ip");
         String testCaseName=req.getParameter("testCaseName");
         Session session = null;

      try{

      SessionFactory sessionFactory = new 

    Configuration().configure()
    .buildSessionFactory();
      session =sessionFactory.openSession();

      //Create Select Clause HQL

         String SQL_QUERY2 ="Select testCases.activityName,testCases.testCaseID from TestCases testCases where testCases.testcaseName like \'" + testCaseName + "\'";
         Query query2 = session.createQuery(SQL_QUERY2);
         for(Iterator it2=query2.iterate();it2.hasNext();ctr2++)
              {
              Object[] act = (Object[]) it2.next();
              activityName[ctr2]=(String) act[0];
              testCaseId[ctr2] = (Integer) act[1];
              }

        for(int j=0;j<ctr2;j++){
            ctr=0;
         String SQL_QUERY3 ="Select tran.transactionTime from Transactions tran where tran.samples.builds.buildMajorVersion like " + major + " and tran.samples.builds.buildMinorVersion like " + minor + " and tran.samples.runDate like \'" + date + "\' and tran.testCases.testCaseID like " + testCaseId[j] + " and tran.samples.testbeds.server.ipv4Address like \'" + ip + "\'";
         Query query3 = session.createQuery(SQL_QUERY3);
         for(Iterator it3=query3.iterate();it3.hasNext();ctr++)
              {
              Object time = (Object) it3.next();
              transactionTime[0][j][ctr]=(Double) time;
              int precision = 100;
              transactionTime[0][j][ctr] = Math.floor(transactionTime[0][j][ctr]*precision+0.5)/precision;
              }
        }

        for(int j=0;j<ctr2;j++){
            ctr3=0;
         String SQL_QUERY5 ="Select tran.transactionTime from Transactions tran where tran.samples.builds.buildMajorVersion like " + major + " and tran.samples.builds.buildMinorVersion like " + minor + " and tran.samples.baseline=1";
         Query query5 = session.createQuery(SQL_QUERY5);
         for(Iterator it5=query5.iterate();it5.hasNext();ctr3++)
              {
              Object time = (Object) it5.next();
              transactionTime[1][j][ctr3]=(Double) time;
              int precision = 100;
              transactionTime[1][j][ctr3] = Math.floor(transactionTime[1][j][ctr3]*precision+0.5)/precision;
              }
        }

 session.close();
      }
      catch(Exception e){
          System.out.println(e.getMessage());
      }
      finally{

      }

    req.setAttribute("major",major);
    req.setAttribute("minor",minor);
    req.setAttribute("date",date);
    req.setAttribute("ip",ip);
    req.setAttribute("testCaseName",testCaseName);
    req.setAttribute("transactionTime", transactionTime);
    req.setAttribute("activityName", activityName);
    req.setAttribute("sampleNumBase", ctr3);
    req.setAttribute("sampleNumRun", ctr);
      req.getRequestDispatcher("/WEB-INF/src/BaselineRawData.jsp").forward(req, res);  
 } 
```

}

第一次成功运行时 Eclipse 中的控制台输出

```
Hibernate: 
    select
        testcases0_.activityName as col_0_0_,
        testcases0_.testCaseID as col_1_0_ 
    from
        TestCases testcases0_ 
    where
        testcases0_.testcaseName like 'Deploy 200 tunings on 10 devices with 0 tunings' Hibernate: 
    select
        transactio0_.transactionTime as col_0_0_ 
    from
        Transactions transactio0_ cross 
    join
        Samples samples1_ cross 
    join
        Builds builds2_ cross 
    join
        TestBeds testbeds7_ cross 
    join
        Machines server8_ 
    where
        transactio0_.sampleId=samples1_.sampleId 
        and samples1_.buildId=builds2_.buildId 
        and samples1_.testBedId=testbeds7_.testBedId 
        and testbeds7_.serverId=server8_.machineId 
        and (
            builds2_.buildMajorVersion like 4
        ) 
        and (
            builds2_.buildMinorVersion like 4434
        ) 
        and (
            samples1_.runDate like '2012-02-25'
        ) 
        and (
            transactio0_.testCaseId like 1
        ) 
        and (
            server8_.ipv4Address like '10.104.52.200'
        ) Hibernate: 
    select
        transactio0_.transactionTime as col_0_0_ 
    from
        Transactions transactio0_ cross 
    join
        Samples samples1_ cross 
    join
        Builds builds2_ cross 
    join
        TestBeds testbeds7_ cross 
    join
        Machines server8_ 
    where
        transactio0_.sampleId=samples1_.sampleId 
        and samples1_.buildId=builds2_.buildId 
        and samples1_.testBedId=testbeds7_.testBedId 
        and testbeds7_.serverId=server8_.machineId 
        and (
            builds2_.buildMajorVersion like 4
        ) 
        and (
            builds2_.buildMinorVersion like 4434
        ) 
        and (
            samples1_.runDate like '2012-02-25'
        ) 
        and (
            transactio0_.testCaseId like 2
        ) 
        and (
            server8_.ipv4Address like '10.104.52.200'
        ) Hibernate: 
    select
        transactio0_.transactionTime as col_0_0_ 
    from
        Transactions transactio0_ cross 
    join
        Samples samples1_ cross 
    join
        Builds builds2_ cross 
    join
        TestBeds testbeds7_ cross 
    join
        Machines server8_ 
    where
        transactio0_.sampleId=samples1_.sampleId 
        and samples1_.buildId=builds2_.buildId 
        and samples1_.testBedId=testbeds7_.testBedId 
        and testbeds7_.serverId=server8_.machineId 
        and (
            builds2_.buildMajorVersion like 4
        ) 
        and (
            builds2_.buildMinorVersion like 4434
        ) 
        and (
            samples1_.runDate like '2012-02-25'
        ) 
        and (
            transactio0_.testCaseId like 3
        ) 
        and (
            server8_.ipv4Address like '10.104.52.200'
        ) Hibernate: 
    select
        transactio0_.transactionTime as col_0_0_ 
    from
        Transactions transactio0_ cross 
    join
        Samples samples1_ cross 
    join
        Builds builds2_ cross 
    join
        TestBeds testbeds7_ cross 
    join
        Machines server8_ 
    where
        transactio0_.sampleId=samples1_.sampleId 
        and samples1_.buildId=builds2_.buildId 
        and samples1_.testBedId=testbeds7_.testBedId 
        and testbeds7_.serverId=server8_.machineId 
        and (
            builds2_.buildMajorVersion like 4
        ) 
        and (
            builds2_.buildMinorVersion like 4434
        ) 
        and (
            samples1_.runDate like '2012-02-25'
        ) 
        and (
            transactio0_.testCaseId like 4
        ) 
        and (
            server8_.ipv4Address like '10.104.52.200'
        ) Hibernate: 
    select
        transactio0_.transactionTime as col_0_0_ 
    from
        Transactions transactio0_ cross 
    join
        Samples samples1_ cross 
    join
        Builds builds2_ cross 
    join
        TestBeds testbeds7_ cross 
    join
        Machines server8_ 
    where
        transactio0_.sampleId=samples1_.sampleId 
        and samples1_.buildId=builds2_.buildId 
        and samples1_.testBedId=testbeds7_.testBedId 
        and testbeds7_.serverId=server8_.machineId 
        and (
            builds2_.buildMajorVersion like 4
        ) 
        and (
            builds2_.buildMinorVersion like 4434
        ) 
        and (
            samples1_.runDate like '2012-02-25'
        ) 
        and (
            transactio0_.testCaseId like 5
        ) 
        and (
            server8_.ipv4Address like '10.104.52.200'
        ) Hibernate: 
    select
        transactio0_.transactionTime as col_0_0_ 
    from
        Transactions transactio0_ cross 
    join
        Samples samples1_ cross 
    join
        Builds builds2_ cross 
    join
        TestBeds testbeds7_ cross 
    join
        Machines server8_ 
    where
        transactio0_.sampleId=samples1_.sampleId 
        and samples1_.buildId=builds2_.buildId 
        and samples1_.testBedId=testbeds7_.testBedId 
        and testbeds7_.serverId=server8_.machineId 
        and (
            builds2_.buildMajorVersion like 4
        ) 
        and (
            builds2_.buildMinorVersion like 4434
        ) 
        and (
            samples1_.runDate like '2012-02-25'
        ) 
        and (
            transactio0_.testCaseId like 6
        ) 
        and (
            server8_.ipv4Address like '10.104.52.200'
        ) Hibernate: 
    select
        transactio0_.transactionTime as col_0_0_ 
    from
        Transactions transactio0_ cross 
    join
        Samples samples1_ cross 
    join
        Builds builds2_ 
    where
        transactio0_.sampleId=samples1_.sampleId 
        and samples1_.buildId=builds2_.buildId 
        and (
            builds2_.buildMajorVersion like 4
        ) 
        and (
            builds2_.buildMinorVersion like 4434
        ) 
        and samples1_.baseline=1 10 
```

Eclipse 中后续和不成功运行的控制台输出

```
Hibernate: 
    select
        testcases0_.activityName as col_0_0_,
        testcases0_.testCaseID as col_1_0_ 
    from
        TestCases testcases0_ 
    where
        testcases0_.testcaseName like 'Deploy 200 tunings on 10 devices with 0 tunings'
10 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T09:04:29.450

Hardik 说问题似乎与`ctr2`. 由于您的循环迭代基于此。它在哪里初始化？

问题是`ctr2`并且`ctr`在 d servlet 代码之外被声明和初始化

# javascript - 在警报框上单击检查确定按钮

> ID：10185473
> 
> 赞同：2
> 
> 时间：2012-04-17T05:15:39.627
> 
> 标签：javascript

这是用于提醒某些值的代码：

```
alert('Click the OK button Now !'); 
```

所以现在我想检查确定按钮是否被点击。

如何使用此 JavaScript 执行此操作？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-17T05:19:37.240

确认可以工作：

```
var r=confirm("Click the OK button now!");
if (r==true)
{
  alert("You pressed OK!");
}
else
{
  alert("You pressed Cancel!");
} 
```

**确认有一个 OK 和 Cancel 按钮**。如果你只想要一个按钮，你应该使用`alert()`方法（它不会告诉你是否`OK`被点击）或者你应该查看类似[jQueryUI 对话框](http://jqueryui.com/demos/dialog/)控件的东西。

jQueryUI 对话框有点复杂，因为您需要包含一些额外的 JavaScript 库并进行一些额外的连接才能使其工作。[这里](http://jqueryui.com/demos/dialog/)有很多例子可供参考。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-17T05:19:02.950

听起来您可能想要一个确认框而不是警报：

[http://www.w3schools.com/js/js_popup.asp](http://www.w3schools.com/js/js_popup.asp)

这取决于用户按下的内容返回 true 或 false。警报不返回值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-17T05:19:55.777

使用 jquery 对话框，然后您可以从一系列按钮中发布或检查您想要的每一个。更灵活

[jQuery 模态](http://www.queness.com/post/77/simple-jquery-modal-window-tutorial)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-17T05:29:30.530

如前所述，confirm() 是最好的选择，但是不要忘记您可以检查按下了哪个按钮，并同时使用 prompt() 请求一个值。

```
if (prompt("Click the OK button?")!=null)
{
alert('you clicked OK and entered a value')
}
else
{
alert('you clicked cancel')
} 
```

# gstreamer - Gstreamer：如何让音频和视频以相同的速率播放

> ID：10185474
> 
> 赞同：5
> 
> 时间：2012-04-17T05:15:40.487
> 
> 标签：gstreamer

我的管道只是尝试将 audiotestsrc 与 videotestsrc 混合并输出到文件接收器。

```
videotestsrc num-buffers=150  ! video/x-raw-yuv,width=1920, height=1080 ! 
   timeoverlay ! videorate ! queue ! xvidenc ! avimux name=mux mux.
      ! filesink sync=true location=new.avi  
audiotestsrc num-buffers=150 ! 
  queue ! audioconvert ! audiorate ! mux. 
```

*   new.avi 已生成。
*   视频与预期的一样长 5 秒
*   音频长约 3.5 秒，其余 1.5 秒为
    静音。

我在这里想念什么？我已经尝试过所有 sync="" 属性的组合，等等。

什么管道会生成一个测试剪辑，其中自动测试模式和视频测试模式混合在一起，其中音频和视频的持续时间相同？

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-18T12:01:40.887

```
audiotestsrc num-buffers=150 
```

默认情况下，每个缓冲区包含 1024 个样本：[samplesperbuffer](http://gstreamer.freedesktop.org/data/doc/gstreamer/head/gst-plugins-base-plugins/html/gst-plugins-base-plugins-audiotestsrc.html#GstAudioTestSrc--samplesperbuffer) 这意味着您正在生成 150*1024=153600 个样本。假设 44.1kHz，持续时间为 153600/44100=3.48 秒。

所以如果你需要 5 秒的音频，你需要 5*44100=220500 个样本。使用 samplesperbuffer==1024，这意味着 220500/1024=215.33 个缓冲区。（即 215 或 216 个缓冲区）。

如果将 samplesperbuffer 设置为 441 会更容易，那么每秒音频恰好需要 100 个缓冲区：

```
audiotestsrc num-buffers=500 samplesperbuffer=441 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-18T07:47:10.363

您可以使用 audiotesrc 的 blocksize 属性来匹配帧的持续时间。这是以字节为单位的，因此您可能希望在 audiotestsrc 之后使用 caps 过滤器来选择采样率和采样格式。

# asp.net-mvc - 网络农场中的 Elmah

> ID：10185478
> 
> 赞同：0
> 
> 时间：2012-04-17T05:15:59.303
> 
> 标签：asp.net-mvc, elmah, web-farm

我有一个正在开发的项目，它将在 Web Farm 上运行，我们还计划使用 Elmah 作为我们的异常处理程序，我们有一些我不确定在技术上是否可行的自定义要求。

*   我们希望网络场中的每个服务器都登录到本地数据库（即 SqlLite、SqlCompact 等）
*   我们希望有一个“监控”网站，它可以获取来自所有服务器的错误组合（它们显然可以通过网络共享等相互访问）
*   我们希望尽可能多地使用内置的 Elmah 错误处理，即如果可能的话，使用 Elmah.axd。

我知道使用 SqlExpress、链接数据库和分布式视图的组合当然可以做到这一点。我对 SqlLite 和 SqlCompact 的了解要有限得多，所以我找不到任何关于将这些知识翻译到这些平台的信息。

任何想法/帮助将不胜感激。

迈克尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T06:26:16.910

由于 ELMAH 支持 SQL Compact，因此可以为每台服务器单独记录数据，但据我所知，ELMAH 使用一个连接字符串，这意味着写入不是问题，但读取是因为数据现在分散了。

ELMAH 代码库需要更改才能实现不同数据库的写入和读取。然后 ELMAH 可以从中央错误存储库中读取。

# linux - 写入 CR0 的 Seg 错误

> ID：10185485
> 
> 赞同：1
> 
> 时间：2012-04-17T05:16:31.953
> 
> 标签：linux, assembly, x86

我正在尝试在 Linux 中写入 CR0，但我不断收到分段错误。这用于 i386 或 x86_64 的组装。有没有办法解决这个问题？

Bellow 是设置段错误的代码的一部分。

```
mov eax,0xffffffff      ;system call number (sys_write)
mov cr0,eax 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-17T05:25:53.050

CR0 是一个受保护的寄存器。它不能在用户空间 linux 应用程序中修改。

# c - 在 C 中，如何将 String 类型和 int 类型存储在同一个变量中？

> ID：10185491
> 
> 赞同：-4
> 
> 时间：2012-04-17T05:17:09.100
> 
> 标签：c, variables, types, storage

我想将一个整数和一个字符串存储在一个名为 X 的变量中，然后显示它。

```
int X;
printf("enter a number or a name")
scanf("%d", &X);
printf("%d", X); 
```

显然我需要用 String 类型和 int 类型声明变量 X，我该如何在 C 中做到这一点？谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-17T05:24:27.837

你不能那样做。诚然，您可以将两种类型存储在同一个变量中——查看 a 的`union`作用——但不能将其中一种类型提供给*并*`scanf()`扫描字符串*或*数字。

 *声明`X`为字符串，`scanf()`对于一个字符串，然后用`strtol()`来尝试从字符串中读取一个数字。如果`strtol()`返回零*并* `errno`设置（最后一个很重要，因为`strtol()`如果用户键入也会返回零`0`），那么转换失败并且没有数字，所以你有一个名字。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-17T07:49:09.347

In a comment, you've (finally) indicated what you're trying to accomplish:

> I prompt the user to enter a number or the word exit to exit the program.

You've assumed, *incorrectly*, that storing either a string or an integer into the same variable is the way do to this. It isn't.

Here's a general outline:

1.  Read a line of input into a string. Use `fgets()` for this.

2.  Check whether the line of input is the string `"exit"`. Remember that `fgets()` leaves the newline (`'\n'`) character in the string; you'll have to allow for that. To compare string values, use `strcmp()`. If the input string matches `"exit"`, exit the program.

3.  If the string wasn't `"exit"`, check whether it's an integer -- more precisely, whether it's a sequence of characters representing an integer. You can use `strtol()` for this. For example, if the input string is `"123"`, then `strtol()` will return the `long` value `123`. `strtol()` can also tell you if the integer value represented by the string is out of range, or whether it represents an integer value at all. Decide what you want to do if the input is `"foobar"`, or `"-123"`, or `""`.

You're going to want to carefully read the documentation for all these functions.

The key point is that you'll need *two* variables, an array of `char` to hold the input line, and an integer (`int` or `long`) to hold the converted integer value *if* the string holds the representation of an integer.

(I'm not providing code because, frankly, this smells like homework.)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T05:19:53.837

```
struct StringAndInt
{
    int theInt;
    char *theString; /* or whatever type you want */
};

struct StringAndInt X; 
```

C++ 有更好的选择。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-17T05:32:47.850

你真的不能那样做。但是您可以将输入读取为字符串并将其转换为 int

```
char input[25];
int value = 0;

fgets(input, 25, stdin);
value = atoi(input);

printf("String Value = %s and Int Value = %d", input, value); 
```*

# solr - 两个 solr 索引之间的差异

> ID：10185494
> 
> 赞同：-1
> 
> 时间：2012-04-17T05:17:29.240
> 
> 标签：solr, lucene, search-engine, nutch

我有两个 solr 索引，索引 A 包含 100000 个文档，B 包含 110000 个文档，A 是 B 的子集，我必须执行 A XOR B = 结果并删除结果的操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T15:25:05.087

[从这里](http://lucene.472066.n3.nabble.com/Difference-between-two-solr-indexes-tt3916328.html)回答：

如果只有 100'000 个文档，则转储所有文档 ID 并进行比较。如果您使用的是基于 linux 的系统，您只需使用简单的工具即可。类似的东西可能会有所帮助

```
curl "<a href="http://your.hostA:port/solr/index/select?*:*&fl=id&wt=csv">http://your.hostA:port/solr/index/select?*:*&fl=id&wt=csv" > /tmp/idsA
curl "<a href="http://your.hostB:port/solr/index/select?*:*&fl=id&wt=csv">http://your.hostB:port/solr/index/select?*:*&fl=id&wt=csv" > /tmp/idsB
diff /tmp/idsA /tmp/idsB | grep "<\|>" | awk '{print $2;}' | sed
's/\(.*\)/<id>\1<\/id>/g' > /tmp/ids_to_delete.xml 
```

现在你有文件了。现在您可以添加到该文件“ `<delete>`”和“ `</detele>`”并使用 curl 将该文件上传到 solr

```
curl -X POST -d @/tmp/ids_to_delete.xml "<a href="http://your.hostA:port">http://your.hostA:port
/solr/index/upadte" 
```

# ruby-on-rails - 对于 Rails，如果有一个使用 Rails 3.0.0 的项目，它会寻找 bundler 1.0.0 并且它在那里但 rails server 不会运行？

> ID：10185498
> 
> 赞同：1
> 
> 时间：2012-04-17T05:17:51.437
> 
> 标签：ruby-on-rails, bundler

我有一个使用 Ruby 1.9.2 的 Rails 3.0.0 项目。现在我尝试在具有当前 rvm 的新计算机上运行它，它会说：

```
$ rails s
/Users/michael/.rvm/gems/ruby-1.9.2-p318@global/gems/bundler-1.1.3/lib/bundler/resolver.rb:129:in `block in resolve': Bundler could not find compatible versions for gem "bundler": (Bundler::VersionConflict)
  In Gemfile:
    rails (= 3.0.0) ruby depends on
      bundler (~> 1.0.0) ruby

  Current Bundler version:
    bundler (1.1.3) 
```

但我已经用过

```
gem install rails -v 3.0.0
gem install bundler -v 1.0.0
gem install bundler -v 1.0.2 
```

所以当我`gem list`，我会看到

```
bundler (1.1.3, 1.0.22, 1.0.0)
rails (3.0.0) 
```

那么为什么它仍然在抱怨 Rails 3.0.0 需要 bundler 1.0.0 而它不存在呢？如何让项目再次运行？

更新：我的 Gemfile 主要是评论，除了：

```
source 'http://rubygems.org'

gem 'rails', '3.0.0'      
gem 'sqlite3-ruby', :require => 'sqlite3' 
```

更新 2：如果我运行`bundle check`：

```
$ bundle check
Your Gemfile's dependencies could not be satisfied
Install missing gems with `bundle install`

$ bundle install
Fetching gem metadata from http://rubygems.org/.........
Bundler could not find compatible versions for gem "bundler":
  In Gemfile:
    rails (= 3.0.0) ruby depends on
      bundler (~> 1.0.0) ruby

  Current Bundler version:
    bundler (1.1.3)

This Gemfile requires a different version of Bundler.
Perhaps you need to update Bundler by running `gem install bundler`? 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T05:36:56.520

问题是您拥有三个版本的捆绑程序（1.1.3、1.0.22、1.0.0）。您的应用程序只需要 1.0.0。当您运行服务器时，它使用 1.1.3。

所以首先通过这个命令卸载两个捆绑器

```
 gem uninstall bundler -v=1.1.3

      gem uninstall bundler -v=1.0.22 
```

然后运行服务器它肯定会工作......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T20:48:06.137

您可能需要在 bundler 上下文中运行 rails 和 rake：

```
bundle exec rails s 
```

Ditt 使用您的 rake 命令，例如，

```
bundle exec rake -T 
```

[这是一个 SO 线程](https://stackoverflow.com/questions/8890994/why-should-i-use-bundle-exec-command-instead-of-just-running-the-command)，其中包含指向更深入文章的链接。此外，如果你生气了，很多关于如何绕过它的喋喋不休。就个人而言，无论如何我都给我最常用的命令起了别名，所以我什至没有注意到。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-18T12:47:56.413

只需将 Bundler 添加到您的`gemfile`项目中即可锁定用于该项目的 bundler 版本。

```
gem 'bundler', '1.1.0' 
```

如果你这样做，你不需要卸载其他版本的 Bundler，你可能会在其他具有不同依赖项的项目上使用它。

您也不需要使用`bundle exec`任何`rails`命令，因为 Rails 支持捆绑程序，并且始终在当前捆绑包的上下文中运行。非 Rails 命令需要 `bundle exec'。

# c - 从标准输入回显 getchar 和 '\n' char

> ID：10185507
> 
> 赞同：1
> 
> 时间：2012-04-17T05:19:03.120
> 
> 标签：c, echo, stdin, getchar

我已经看过这个[类似的问题](https://stackoverflow.com/questions/1798511/how-to-avoid-press-enter-with-any-getchar)，但我仍然想知道是否有另一种方法来停止 1）终端与便携性相呼应，因为这是一项任务，我已经有一个 java 程序崩溃并在我的老师计算机上烧毁 2）在我的程序我搜索一个`'\n'`字符然后如果它不是第一个字符使用`getchar`然后`putchar`直到下一个`'\n'`字符在使用重定向时工作正常`stdin`但是当我尝试使用没有重定向的程序时回车键总是回显，这与终端回显还是我需要检查不同的字符`'\n'`？我也尝试过包括`'/r'`并做了很多谷歌搜索，但似乎回声的答案不能通过便携性来完成？

```
#include <stdio.h>
#include <string.h>

int first_line(char);
int main(){

char c;

while((c = getchar())!=EOF){
    first_line(c);
}   

return 0;
}

int first_line(char c){
if (c != '\n'||c != '\r'){
    putchar(c);

    do{
        c = getchar();
        putchar(c);}
    while( c !='\n');
}

return 0;
} 
```

谢谢拉克兰

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T05:38:02.087

首先尝试以下内容：

1）条件应该是`if (c != '\n' && c != '\r')`

2）和while循环，如果终端是行缓冲的，那么你最好使用`getch`ncurses库中的库包应该适用于大多数平台。

```
 while((c =getchar())!='\n') {
       putchar(c);
    } 
```

# css - 少了没有样式的css导入规则

> ID：10185508
> 
> 赞同：3
> 
> 时间：2012-04-17T05:19:03.457
> 
> 标签：css, import, less, mixins

我有 vars.less 文件，其代码如下：

```
@base: #96959A;
.ts_no{ text-shadow: none; }
.pos { position: absolute; z-index: 2; display: block; } 
```

...

编译后的 vars.css：

```
.ts_no {
  text-shadow: none;
}
.pos {
  position: absolute;
  z-index: 2;
  display: block;
} 
```

而且我的文件更少，其中包括 vars.less (@import 'vars')。所以所有这些文件都有 vars.less 样式。所以所有编译的 css 文件都包含编译的 vars.less 文件的样式：

样式.css：

```
.ts_no { text-shadow: none; }
.pos { position: absolute; z-index: 2; display: block; } 
```

...

在一个文件中包含变量和混合的最佳方法是什么，而不是在所有文件中重复它？

谢谢你

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T05:23:28.603

可能最简单的方法就是将您的混入定义为*参数*混入，类似于其他语言中的“函数”。当然，通常参数 mixins 带参数，但如果你不需要接受任何参数，你可以简单地省略它们并使用空括号。

这意味着像这样重写你的`vars.less`文件：

```
@base: #96959A;
.ts_no() { text-shadow: none; }
.pos() { position: absolute; z-index: 2; display: block; } 
```

这将防止规则集出现在您编译的 CSS 输出中，只要它没有在另一个规则集中明确使用。

该[文档](http://lesscss.org/#-parametric-mixins)提供了更多详细信息。

# android - Android数据库连接如何与serverdb连接？

> ID：10185515
> 
> 赞同：-1
> 
> 时间：2012-04-17T05:19:23.223
> 
> 标签：android, database, live

如何在android中连接实时数据库？如果有人知道请告诉我怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T05:22:25.880

您应该使用 Web 服务或实现 HTTP 处理程序并以 RESTful 方式传输

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T05:25:49.117

您使用 web 服务（url），如 php、.net、python。然后使用 web 服务存储在数据库中的数据。以及来自服务器的响应（如 xml 和 json）。您通过来自的 get 和 post 请求连接到服务器服务器。

# ruby-on-rails - 如何在 Ruby on Rails 中设置图像标签的样式

> ID：10185516
> 
> 赞同：49
> 
> 时间：2012-04-17T05:19:32.247
> 
> 标签：ruby-on-rails

我有一个图像标签如下：

```
 <%= image_tag @user.photo.url(:large) %> 
```

如何在 CSS 中为该图像的一侧设置边框颜色？那会产生什么html？

* * *

## 回答 #1

> 赞同：82
> 
> 时间：2012-04-17T05:23:21.767

通过使用“样式”选项：

```
<%= image_tag @user.photo.url(:large), :style => "border: 1px solid red" %> 
```

如需更多信息，请查看 API。

* * *

## 回答 #2

> 赞同：55
> 
> 时间：2012-04-17T05:22:49.187

将类或 id 添加到您的 image_tag：

```
<%= image_tag @user.photo.url(:large), :class => "style_image" %> 
```

然后使用 css 对其进行样式设置：

```
.style_image {
  border-right: 1px solid #000;
} 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2012-04-17T05:31:19.270

您也可以提供内联样式

```
<%= image_tag @user.photo.url(:large), :style => "float :left;border 1px solid #00000;" %> 
```

尝试一下.....

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2016-08-05T14:19:00.417

在较新版本的 Rails 中，有一种“更好”的方式：

```
<%= image_tag('filename_in_public_folder', alt: 'Description', style: 'display: block; margin: auto; width: 40%;')%> 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2015-06-11T19:15:18.233

这是一种简单的方法。

```
<%= image_tag("example.png", :style => 'border-right: 1px solid #000;')%> 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2015-02-20T07:23:01.813

对于在 Google 上遇到此问题的其他人。如果您以不同的方式使用图像标签，您仍然可以向其添加 css 类，但这只是语法不同。有时您需要使用外部服务器。（在 Heroku 上部署？=> Amazon s3）

```
<%= image_tag("https://s3-us-west-2.amazonaws.com/mybucketname/user_photo.png", class: "style_image") %> 
```

# javascript - 在objective-c项目中从javascript读取/写入文本文件

> ID：10185518
> 
> 赞同：0
> 
> 时间：2012-04-17T05:19:51.513
> 
> 标签：javascript, iphone, xcode

我正在为 iPhone 制作一个应用程序，并且我正在使用 Javascript 在 UIWebView 中制作嵌入的 youtube。我想从javascript打开/读取/写入一些事件的文件，然后想在objective-c代码中使用该文件。但是我该怎么做呢？我的意思是我可以在什么位置保存和打开文件。

我制作了一个名为 youtubeAPI.html 的文件，并从 Objective-C 代码中调用了该文件。它成功打开页面。现在我想打开一个文件并在每次更改状态时写入内容，然后需要在 obejective-c 的最终结果中显示该文件。请告诉我我该怎么做。

```
<!DOCTYPE HTML>
<html>
<body>
<div id="player"></div>
<script>
    //Load player api asynchronously.
    var tag = document.createElement('script');
    tag.src = "http://www.youtube.com/player_api";
    var firstScriptTag = document.getElementsByTagName('script')[0];
    firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);
    var done = false;
    var player;
    function onYouTubePlayerAPIReady() {
        player = new YT.Player('player', {
          height: '390',
          width: '640',
          videoId: 'JW5meKfy3fY',
          events: {
            'onReady': onPlayerReady,
            'onStateChange': onPlayerStateChange
          }
        });
    }
    function onPlayerReady(evt) {
        evt.target.playVideo();
    }
    function onPlayerStateChange(evt) {
        if (evt.data == YT.PlayerState.PLAYING && !done) { // NEED TO ADD FILE OPERATION HERE
            setTimeout(stopVideo, 6000);
            done = true;
        }
    }
    function stopVideo() {
        player.stopVideo();
    }
</script>
</body>
</html> 
```

谢谢阿坎莎

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T05:56:17.340

```
// Get file path
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDirectory = [paths objectAtIndex:0];
NSString filePath = [documentsDirectory stringByAppendingPathComponent:filename];

// Read file contents
NSString *content = [NSString stringWithContentsOfFile:filePath encoding:NSUTF8StringEncoding error:nil];

// Write file contents
[[content dataUsingEncoding:NSUTF8StringEncoding] writeToFile:filePath atomically:NO]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T07:17:22.947

UIWebView 是一个沙箱，没有机会这样做，javascript 不能直接访问文件系统，这是我所知道的。但你可以做其他事情。首先：将状态保存到窗口对象中；

```
such as window.state = "someting"; 
```

第二：通过Objective-C读取状态；

```
NSString *state = [webView stringByEvaluatingJavaScriptFromString:@"window.state"]; 
```

# sdk - 如何从脚本下载 Java SDK？

> ID：10185525
> 
> 赞同：2
> 
> 时间：2012-04-17T05:20:36.243
> 
> 标签：sdk, download, java

我注意到[许多](http://chocolatey.org/api/v2/package/javaruntime.x64/6.0.30) [脚本](http://nsis.sourceforge.net/Java_Launcher_with_automatic_JRE_installation) [使用](http://svn.dmdirc.com/website/getjava.php)如下 URL 来下载 JRE：

[http://javadl.sun.com/webapps/download/AutoDL?BundleId=SOMENUMBER](http://javadl.sun.com/webapps/download/AutoDL?BundleId=SOMENUMBER)

这些 URL 来自哪里，是否有一些可用于 JDK？

# php - mysqli_query('SET UNIQUE_CHECKS=0;',$dbc) 保持活动状态多久？

> ID：10185526
> 
> 赞同：0
> 
> 时间：2012-04-17T05:20:43.633
> 
> 标签：php, mysqli, bulkinsert

对于具有批量插入的特定 PHP 文件，我需要设置`UNIQUE_CHECKS`为 0，我只想知道它保持 0 多长时间？手动批量插入后是否必须设置`UNIQUE_CHECKS`为 1 或者它会自动更改为默认的 GLOBAL 变量值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T08:39:08.780

`UNIQUE_CHECKS`是每个连接设置的 MySQL 变量。连接关闭的那一刻（通常在脚本结束时或使用适当的 MySQL 客户端命令时），设置结束了它的生命周期。

下次启动新连接时，将再次获取 MySQL 配置中的值。

# ios - 如何绘制 UIImage 图像，例如适合样式

> ID：10185529
> 
> 赞同：2
> 
> 时间：2012-04-17T05:20:51.847
> 
> 标签：ios, uiimage, scale, crop

我想从 jpg 文件中获取缩略图并显示为 UIImage。显示样式为适合模式，例如 UIViewContentModeScaleAspectFill。下面是示例代码，但是太复杂了。

```
-(UIImage*)scaleToSize:(CGSize)size   
{  
    CGFloat width = CGImageGetWidth(self.CGImage);  
    CGFloat height = CGImageGetHeight(self.CGImage);    

    NSLog(@"size w=%f, h=%f, image w=%f, h=%f", size.width, size.height, width, height);

    float verticalRadio = size.height*1.0/height;   
    float horizontalRadio = size.width*1.0/width;  

    float radio = 1;  
    if(verticalRadio>1 && horizontalRadio>1)  
    {  
        radio = verticalRadio > horizontalRadio ? horizontalRadio : verticalRadio;     
    }  
    else  
    {  
        radio = verticalRadio < horizontalRadio ? verticalRadio : horizontalRadio;     
    }  

    width = width*radio;  
    height = height*radio;  
    NSLog(@"width=%f, height=%f", width, height);

    int xPos = (size.width - width)/2;  
    int yPos = (size.height-height)/2;  

    NSLog(@"xpos=%d, ypos=%d", xPos, yPos);

    CGSize sz = CGSizeMake(width, height);  
    UIGraphicsBeginImageContext(sz);    

    //  
    [self drawInRect:CGRectMake(0, 0, width, height)];    
    UIImage* scaledImage = UIGraphicsGetImageFromCurrentImageContext();    
    UIGraphicsEndImageContext();    

    CGRect rt = CGRectMake(-xPos, -yPos, size.width, size.height);
    UIImage* thub = [scaledImage getSubImage:rt];

    scaledImage = nil;
    return thub;  
} 

    - (UIImage *)getSubImage:(CGRect) rect{
    CGImageRef subImageRef = CGImageCreateWithImageInRect(self.CGImage, rect);
    CGRect smallBounds = CGRectMake(rect.origin.x, rect.origin.y,       CGImageGetWidth(subImageRef), CGImageGetHeight(subImageRef));

    NSLog(@"small bounds x=%f, y=%f, w=%f, h=%f", smallBounds.origin.x, smallBounds.origin.y, smallBounds.size.width, smallBounds.size.height);

    UIGraphicsBeginImageContext(smallBounds.size);
    CGContextRef context = UIGraphicsGetCurrentContext();
    CGContextDrawImage(context, smallBounds, subImageRef);
    UIImage* smallImg = [UIImage imageWithCGImage:subImageRef];
    UIGraphicsEndImageContext();

    return smallImg;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T00:30:59.927

我已经更新了方法：

```
-(UIImage*)getSubImage:(CGSize)size   
{  
    CGFloat width = CGImageGetWidth(self.CGImage);  
    CGFloat height = CGImageGetHeight(self.CGImage);

    float verticalRadio = size.height*1.0/height;   
    float horizontalRadio = size.width*1.0/width;  

    float radio = 1;  
    radio = verticalRadio < horizontalRadio ? horizontalRadio : verticalRadio;

    CGRect displayRect = CGRectMake((size.width - width*radio)/2.0f, 
                                (size.height-height*radio)/2.0f, 
                                width*radio, 
                                height*radio);

    // create a bitmap context and then set the context to current using     
    UIGraphicsBeginImageContext(size);    

    //clip
    UIRectClip(displayRect);

    //draw the bitmap in rect    
    [self drawInRect:displayRect];    

    // from context to get a UIIMage  
    UIImage* scaledImage = UIGraphicsGetImageFromCurrentImageContext();    

    // move context out of buffer
    UIGraphicsEndImageContext();   

    NSLog(@"getSubImage ---->");

    // return. 
    return scaledImage;  
} 
```

# objective-c - iOS子类化UIControl没有响应

> ID：10185536
> 
> 赞同：0
> 
> 时间：2012-04-17T05:21:40.170
> 
> 标签：objective-c, cocoa-touch, uibutton, uicontrol

我正在为子类化 uiControl 进行测试，但它还没有工作，

这是我的代码：

MainVC.m::

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    TesteaContol *tt = [[[TesteaContol alloc]initWithFrame:CGRectMake(20, 20, 80, 30)]autorelease];
    [tt addTarget:self action:@selector(ttActiono:) forControlEvents:UIControlEventTouchUpInside];
    [self.view addSubview:tt];
}

- (void)ttActiono:(TesteaContol*)message
{
    NSLog(@"proyection");
} 
```

TesteaContol.h

```
@interface TesteaContol : UIControl 
```

TesteaControl.m

```
#import "TesteaContol.h"

    @implementation TesteaContol

    - (id)initWithFrame:(CGRect)frame
    {
        self = [super initWithFrame:frame];
        if (self) {
            // Initialization code

            NSLog(@"cao");

            UIButton *vacas = [UIButton buttonWithType:UIButtonTypeRoundedRect];
            [vacas setTitle:@"pingus" forState:UIControlStateNormal];   ;
            vacas.titleLabel.textColor = [UIColor blackColor];

            vacas.frame = CGRectMake(0, 0, 80, 40);
            [vacas addTarget:self action:@selector(vacasPressed:) forControlEvents:UIControlStateNormal];

            [self addSubview:vacas];
        }
        return self;
    }

    - (void) vacasPressed:(id) sender
    {
        NSLog(@"vacanio");

        [self sendActionsForControlEvents:UIControlEventTouchUpInside];

    } 
```

所以我正在使用 uiButton 进行测试，我看到了按钮，但没有响应触摸，

我错过了什么？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T11:44:53.080

这里有一个问题：

```
[vacas addTarget:self action:@selector(vacasPressed:) 
    forControlEvents:UIControlStateNormal]; 
```

“forControlEvents”部分的类型应该`UIControlEvents`不是`UIControlStateNormal`。对于常规按钮，您要替换`UIControlStateNormal` 为`UIControlEventTouchUpInside`：

```
[vacas addTarget:self action:@selector(vacasPressed:)
    forControlEvents:UIControlEventTouchUpInside]; 
```

# c# - WinForms中的UDPclient？

> ID：10185539
> 
> 赞同：0
> 
> 时间：2012-04-17T05:22:28.493
> 
> 标签：c#

我已使用此代码示例[http://msdn.microsoft.com/en-us/library/tst0kwb1.aspx](http://msdn.microsoft.com/en-us/library/tst0kwb1.aspx)来制作能够接收和发送消息的控制台 UDP 服务器。

但我不希望这是一个控制台应用程序，我想使用 Forms。我已经在我的应用程序中成功实现了发送消息功能，但我不知道如何让监听器工作。

这是接收消息的代码，它不做任何事情。
注意：我将此代码放在按钮单击事件代码的正下方。

```
private void StartListener()
    {
        bool done = false;
        UdpClient listener = new UdpClient(listenPort);
        IPEndPoint groupEP = new IPEndPoint(IPAddress.Any, listenPort);

        try
        {
            while (!done)
            {
                this.lblMessage.Text = "Waiting for broadcast";
                byte[] bytes = listener.Receive(ref groupEP);

                this.lblRecieve.Text = Encoding.ASCII.GetString(bytes, 0, bytes.Length);
            }

        }
        catch (Exception e)
        {
            this.lblMessage.Text = e.ToString();
        }
        finally
        {
            listener.Close();
        }
    } 
```

这段代码显然是错误的，但我以前从未在 C# 中做过任何事情，而这个控制台示例代码是我能找到的关于 UDP 服务器的唯一指南。

这是发送消息的代码，它工作得很好。

```
private void btnSend_Click(object sender, EventArgs e)
    {
        Socket s = new Socket(AddressFamily.InterNetwork, SocketType.Dgram, ProtocolType.Udp);
        IPAddress broadcast = IPAddress.Parse("192.168.0.105");
        byte[] sendbuf = Encoding.ASCII.GetBytes("test");
        IPEndPoint ep = new IPEndPoint(broadcast, listenPort);
        s.SendTo(sendbuf, ep);
        this.lblMessage.Text = "Sent Message";
    } 
```

编辑：

我感谢您的帮助，但我没有调整我自己损坏的代码以使其正常工作，而是找到了另一个代码进行调整，以便它像我想要的那样工作。

[C# 中服务器客户端应用程序的 UDP 数据报代码](https://stackoverflow.com/questions/10076658/udp-datagram-code-for-server-client-application-in-c-sharp)

这是我借来的代码，它工作得很好，除了 stop() 不能正常工作，但这不是一个主要问题，应该不难用谷歌修复。

我仍然从你们给我的链接中学到了很多东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T05:29:12.983

它可能有效，你只是看不到它。你用无限循环挂断 UI 线程，表单完全死了。也不会绘画，因此您看不到标签更新。

您需要开始使用 UdpClient.BeginReceive() 或创建一个线程来运行此代码。如果您使用线程，则需要使用 Control.BeginInvoke() 来更新标签。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T05:28:56.883

您必须注册一个侦听器。只需检查以下文章。

[活动教程](http://msdn.microsoft.com/en-us/library/aa645739%28v=vs.71%29.aspx)

# apache - .htaccess 通过 rewriteRule 将字符添加到 url

> ID：10185541
> 
> 赞同：1
> 
> 时间：2012-04-17T05:22:45.670
> 
> 标签：apache, .htaccess, mod-rewrite

我有一个重写规则，重定向`www.OLDsite.co.uk/locations.php?area=Barking,%20Essex`到`www.NEWsite.co.uk/locations.php?area=Barking,%20Essex`

...理想情况下，无论如何。问题存在于网址的末尾。而不是像它应该的那样重定向到上面的新站点......它改为使用以下网址：`www.NEWsite.co.uk/locations.php?area=Barking,%2520Essex`. 我真的很困惑......这是我目前的 .htaccess 文件......

```
RewriteEngine on
RewriteRule ^locations.php/(.*)$ http://www.NEWsite.co.uk/locations.php$1 [R=permanent,L]
ErrorDocument 404 /404.php 
```

我是 mod_rewrites 的新手，但我愿意学习。我知道这是一个非常强大的工具，在我的开发人员库中拥有它并不是一件坏事。所有提示都表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T05:32:39.333

将您的 RewriteRule 更改为：

```
RewriteRule ^(locations\.php.*)$ http://www.localhost/$1 [R=301,L,NE] 
```

这里的重要变化是标志`NE`，它告诉 Apache 不对生成的 URI 进行编码，因此`%20`保留`%20`而不是变成`%2520`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T05:33:31.820

问题是：

```
%25 is equal to "%" symbol 
```

但这将等于 %20 或空格..不要使用空格..使用“+”

# jpql - JPQL JOINS 与嵌套 SELECT

> ID：10185542
> 
> 赞同：7
> 
> 时间：2012-04-17T05:22:48.390
> 
> 标签：jpql, openjpa

我可以在 JPQL 上做这样的事情吗？

```
SELECT NEW com.MyDTO(p.a, p.b, q.c, q.d)
FROM
(SELECT r.* FROM MyDTO1 r ) p
LEFT OUTER JOIN
(SELECT s.* FROM MyDTO2 s ) q
ON p.x = q.y 
```

或类似的？（上面的查询已经混合了native和JPQL，所以不要误会）

我觉得这部分有问题。

```
FROM
(SELECT r.* FROM MyDTO1 r ) p 
```

当我尝试执行时，我收到了这个错误。

```
Exception Description: Syntax error parsing the query [.....], unexpected token [(] 
```

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-17T07:12:23.923

不，你不能。[从文档中](http://docs.jboss.org/hibernate/core/3.6/reference/en-US/html_single/#queryhql-subqueries)引用：

> 请注意，HQL 子查询只能出现在 select 或 where 子句中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-23T08:58:09.603

是的你可以！

您必须使用**[本机查询](http://ci.apache.org/projects/openjpa/1.2.x/manual/jpa_overview_sqlquery.html)**。这是一个例子：

```
emf = Persistence.createEntityManagerFactory("TEST")    
EntityManager em = emf.createEntityManager();
String queryString = "SELECT ID FROM ( SELECT * FROM ADDRESS WHERE ID < 0)";
Query query = em.createNativeQuery(queryString);
List<BigDecimal> result = query.getResultList(); 
```

# sql - sql使用单个查询从多个表中计算记录

> ID：10185546
> 
> 赞同：4
> 
> 时间：2012-04-17T05:23:02.587
> 
> 标签：sql, oracle

例如，我有一个表格列表：

```
mytableA
mytableB
mytableC 
```

这些表都有相同的列（时间戳）。

我可以单独对每张桌子进行计数：

```
select count(*) from mytableA where timestamp = to_char(sysdate-1, 'yyyymmdd') || '0000';
select count(*) from mytableB where timestamp = to_char(sysdate-1, 'yyyymmdd') || '0000';
select count(*) from mytableC where timestamp = to_char(sysdate-1, 'yyyymmdd') || '0000'; 
```

如何将其组合在一个查询中？有没有简单的方法？

预期成绩：

```
MyTableName     MyCnt
-----------     -----
mytableA        121
mytableB        78
mytableC        2345 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-17T05:29:42.380

```
SELECT  (
    SELECT COUNT(*)
    FROM   table1
    ) AS tot1,
    (
    SELECT COUNT(*)
    FROM   table2
    ) AS tottab2,
    (
    SELECT COUNT(*)
    FROM   table3
    ) AS tottab3 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-17T05:47:17.717

你不能直接用这样的查询来做`where table in (myTableA, myTableB, etc)` 但是你可以美化`union all`解决方案：

```
select MyTableName, count(*)
FROM(
  select 'myTableA' MyTableName, timestamp from mytableA 
  union all
  select 'myTableB', timestamp  from mytableB  
  union all
  select 'myTableA', timestamp  from mytableC  
)
WHERE timestamp = to_char(sysdate-1, 'yyyymmdd') || '0000'
GROUP BY MyTableName; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-17T05:26:25.360

我不确定 Oracle，在 SQLserver 中你可以这样做，

```
select (select count(*) from table1) + (select count(*) from table2) 
```

**更新：** 或者像这样，

```
select (select count(*) from table1) ,(select count(*) from table2) 
```

或者，

```
(select count(*) from table1) union (select count(*) from table2) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-17T05:28:39.647

```
select 'myTableA' MyTableName, count(*) MyCnt from mytableA where timestamp = to_char(sysdate-1, 'yyyymmdd') || '0000'
union all
select 'myTableB', count(*) from mytableB where timestamp = to_char(sysdate-1, 'yyyymmdd') || '0000'
union all
select 'myTableC', count(*) from mytableC where timestamp = to_char(sysdate-1, 'yyyymmdd') || '0000'; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-06-14T19:59:59.703

使用 Oracle 11gR2：

```
select     
  (select count(*) from mytableA where timestamp = to_char(sysdate-1, 'yyyymmdd') || '0000') tabA,
  (select count(*) from mytableB where timestamp = to_char(sysdate-1, 'yyyymmdd') || '0000') tabB,
  (select count(*) from mytableC where timestamp = to_char(sysdate-1, 'yyyymmdd') || '0000') tabC
from dual; 
```

结果是：

```
tabA| tabB| tabC
----|-----|-----
 121|   78| 2345 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-17T05:28:42.163

试试这个

```
select 'mytableA' as tablename, count(*) from mytableA where timestamp = to_char(sysdate-1, 'yyyymmdd') || '0000'
union all
select 'mytableB' as tablename , count(*) from mytableB where timestamp = to_char(sysdate-1, 'yyyymmdd') || '0000'
union all
select'mytableB' as tablename , count(*) from mytableC where timestamp = to_char(sysdate-1, 'yyyymmdd') || '0000' 
```

* * *

## 回答 #7

> 赞同：-3
> 
> 时间：2012-04-17T05:28:08.897

这个怎么样？

```
SELECT 
     a, b, c 
FROM 
     (select count(*) from mytableA where timestamp = to_char(sysdate-1, 'yyyymmdd') || '0000') AS a, 
     (select count(*) from mytableB where timestamp = to_char(sysdate-1, 'yyyymmdd') || '0000') AS b, 
     (select count(*) from mytableC where timestamp = to_char(sysdate-1, 'yyyymmdd') || '0000') AS c 
```

不知道这是否有效：/

# ruby - 捆绑安装从错误的目录运行

> ID：10185552
> 
> 赞同：5
> 
> 时间：2012-04-17T05:23:45.983
> 
> 标签：ruby, gem, rvm, bundler, thor

我正在`thor`为一些内部项目构建一个基于简单的生成器，并且似乎无法`bundle install`从正确的目录运行。

当我运行新的 [APP_NAME] 函数时，它*应该*创建目录和文件，然后运行`bundle install`以安装应用程序所需的 gem。

生成器函数的来源：

```
def create
  puts "Creating application #{name}"

  directory 'application', "#{name}"

  Dir.chdir("#{Dir.pwd}/#{name}") do
    puts `bundle install`
  end
end 
```

运行调用此创建方法的命令的控制台输出：

```
$ bundle exec bin/my_gem new test_app
Creating application test_app
      create  test_app
      create  test_app/Gemfile
      create  test_app/Guardfile
      create  test_app/README.md
      create  test_app/app/controllers
      create  test_app/app/helpers
      create  test_app/app/models
      create  test_app/app/views
Using thor (0.14.6) 
Using my_gem (0.0.1) 
Using bundler (1.1.3) 
Your bundle is complete! Use `bundle show [gemname]` to see where a bundled gem is installed. 
```

如您所见，它正在运行，`bundle install`但它在我的当前目录（`thor`、`bundler`、`my_gem`）中运行，而不是在`test_app`目录（`guard`、`guard-coffeescript`、`guard-less`和其他目录）中运行。

运行其他命令，例如`ls`或`pwd`给出预期结果：

```
Gemfile
Guardfile
README.md
app 
```

和

```
/Users/davidlumley/Development/Gems/my_gem/test_app 
```

不确定它是否有任何区别，但我使用 RVM 来管理我的红宝石。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-04-23T05:37:31.557

听起来您的应用程序已经在使用 bundler 并且您遇到了 bundler-inside-bundler 问题。试试这个：

```
Bundler.with_clean_env do
  puts `bundle install`
end 
```

我猜正在发生的事情是您的外部捆绑器将`BUNDLE_GEMFILE`env 变量设置为您的应用程序的 Gemfile，然后您的内部捆绑器最终继承了它。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-17T05:47:11.430

请试试这个，我一定会帮助你。

```
 rvm gemset create app_name

      rvm use ruby-1.9.2@app_name 
```

Ruby 版本你还用过什么。

然后安装捆绑器 gem

```
 gem install bundler. 
```

然后捆绑安装并运行服务器..

# webgl - WebGL 是 Html5 规范的一部分吗

> ID：10185554
> 
> 赞同：4
> 
> 时间：2012-04-17T05:23:56.243
> 
> 标签：webgl

所以我知道（想想？）WebGL 依赖于 html5 的元素，但它是 html5 规范本身的一部分吗？

我曾经认为它们是两种不同的东西，很像 CSS3 和 html5。但后来我将其视为[http://html5test.com/](http://html5test.com/)中测试的标准之一。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-20T21:56:54.097

让我们首先确定什么是 HTML 5。W3C 有一个带有[历史部分](http://dev.w3.org/html5/spec/introduction.html#history-1)的规范，详细说明了不同的 HTML 版本号是如何产生的。

就其本身而言，WHATWG 认为 HTML 是一种“生活标准”，没有版本号，但仍然在其对该标准[的描述中包含 HTML5 。](http://www.whatwg.org/specs/web-apps/current-work/#is-this-html5?)

WebGL 本身并不直接属于上述任何一个规范，但如果您搜索上面的 WHATWG 文档，您会找到对它的引用。所以正式地说，不，不是 HTML5 的一部分。正如您所提到的，WebGL 确实依赖于`<canvas>`HTML5 中的元素。

然而，在实践中，我看到很多人使用“HTML5”作为流行词或总称来指代最新的 Web 技术，包括 WebGL。特别是，您不能总是将应用程序描述为“WebGL 应用程序”，因为它几乎总是依赖于 HTML 5、CSS、JavaScript 等的更新方面来使其工作。我经常听到这些被称为“HTML5 应用程序”，即使这不是严格的定义。我想它比说“Web 2.0”更现代。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-17T05:32:03.683

WebGL 不是 HTML 5 规范的一部分。但这属于 khronos 组。可以从此链接获得更多信息：

```
www.khronos.org/webgl 
```

# php - 使用 PDO fetch 获取数组并使用 if 语句

> ID：10185558
> 
> 赞同：0
> 
> 时间：2012-04-17T05:24:28.703
> 
> 标签：php, mysql, arrays, if-statement, pdo

我的数组只会得到 0 或 1。我正在为 mysql 使用 PDO 语句，这就是我所拥有的

```
$result = $fetching -> fetch();
$first_result = $result[0];

if($first_result === 0){
//do something...
}else{
echo "testing";
} 
```

`testing`无论如何，我总是得到0 与否。我已经回显了`$first_result[0]`用于测试目的，它会告诉我价值是什么。所以我知道该值会射出 0 或不射出 0。但是当它为 0 时，它仍然会回显`testing`。

请帮忙？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T05:30:34.650

首先尝试把`==`不类型等价。其次，我总是用它来检查是否有任何记录：

```
$q = $pdo->prepare('Your SQL');
$result = $q->execute($params);
$rows = $q->fetchAll(PDO::FETCH_ASSOC);
if (!count($rows) || !$result)
{
    echo 'No rows or error';
    // To output error $pdo->errorInfo();
}
else
{
    $el = $row[0];
} 
```

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T05:30:40.160

=== 正在测试类型，在这种情况下 pdo 将返回一个字符串，因此您正在针对字符串测试一个 int 。

尝试：

```
if($first_result === '0'){ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T05:30:57.850

似乎您的类型不匹配。=== 匹配值和类型

> PHP 的 === 运算符使您能够比较或测试变量的相等性和类型。参考下面的例子。

[阅读更多...](http://danieldumas.com/php-operators-the-triple-equals-operator.php)

# spring - DataTable - 延迟加载 Primefaces 显示错误

> ID：10185560
> 
> 赞同：5
> 
> 时间：2012-04-17T05:24:37.167
> 
> 标签：spring, jsf, datatable, primefaces, lazy-loading

我将 JSF2.0 与 PrimeFaces3.1 和 Spring3.1 一起用于业务逻辑。我试图使用 DataTable-延迟加载。但它给了我以下错误。请帮忙。

发生错误：

```
/ by zero
- Stack Trace
java.lang.ArithmeticException: / by zero
at org.primefaces.model.LazyDataModel.setRowIndex(LazyDataModel.java:62)
at javax.faces.component.UIData.setRowIndex(UIData.java:448)
at javax.faces.component.UIData.visitColumnsAndRows(UIData.java:1544)
at javax.faces.component.UIData.visitTree(UIData.java:1212)

Please help. 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-03T17:47:35.753

您必须覆盖方法**setRowIndex**

例子：

```
@Override
public void setRowIndex( int rowIndex ) {

   if ( rowIndex == -1 || getPageSize() == 0 ) {
    super.setRowIndex( -1 );
   } else
    super.setRowIndex( rowIndex % getPageSize() );
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-17T05:45:33.457

它似乎是一个已知问题

[数据表：java.lang.ArithmeticException：/由零](http://forum.primefaces.org/viewtopic.php?f=3&t=14023)

[问题 1544：LazyDataTable.setRowIndex 引发算术异常：除以 0。](http://code.google.com/p/primefaces/issues/detail?id=1544)

* * *

[它有一个修复/解决方法（一些用户声称）](http://code.google.com/p/primefaces/issues/detail?id=1544#c21)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-02T19:44:49.833

这个答案是[Alfaville](http://This%20answer%20is%20derivative%20to%20Alfaville's%20answer,%20but%20if%20you%20happen%20to%20have%20set%20a%20field%20named%20pageSize%20in%20your%20LazyDataTable%20descendant%20it%20may%20cause%20the%20same%20problem.%20This%20was%20the%20case%20with%20me%20and%20I%20didn't%20see%20the%20problem%20until%20I%20saw%20the%20Override%20of%20setRowIndex.)的答案的派生词，但是如果您碰巧`pageSize`在`LazyDataTable`后代中设置了一个名为的字段，则可能会导致同样的问题。我就是这种情况，直到我看到`setRowIndex`.

# eclipse - Eclipse 的菜单“打开文件”打开的 Java 文件不会自动构建

> ID：10185567
> 
> 赞同：0
> 
> 时间：2012-04-17T05:25:17.110
> 
> 标签：eclipse, auto-build

Eclipse 有一个很好的特性，可以动态构建您的代码。

但是，由于某种原因，我在某个目录下的 Emacs 中开发了一个源 .java，例如 〜/mycode。现在我想使用 Eclipse 的自动构建功能，但我更喜欢在其原始的 ~/mycode 目录下开发 .java 文件。显然，我不能使用 Eclipse 的“导入”，因为这意味着该文件将在以后的某个 Eclipse 工作区下开发。

这就是为什么我必须使用 Eclipse 菜单的“打开文件”从 ~/mycode 打开我的文件的原因。

那么问题来了，这个.java文件不再自动构建了！！例如，如果我写一行像“abcd;;;;;” 我不会让 Eclipse 的语法检查器在这行下划线。

总之，我想继续在其原始目录下开发代码，并从 Eclipse 的自动构建功能中受益。我能做些什么？谢谢。

# jquery - jquery ajax 刷新页面内容

> ID：10185573
> 
> 赞同：0
> 
> 时间：2012-04-17T05:25:35.637
> 
> 标签：jquery, ajax

我有一个 jquery Ajax 调用来更改 div 的内容，功能方面一切正常，但是，当 div 被新内容替换时，页面几乎不会晃动，并且视图位置也会发生一些变化。得到的内容下面给出了刷新，我的意思是我在 ajax 调用后得到的 html 响应。

```
<div class="booksFrame">
<a href="Magazine/magazinedetail/magazine_id/3"><img src="XXXXXX" alt="Pachakuthira" title="Pachakuthira" /></a>
</div>
<div class="booksFrame">
<a href="Magazine/magazinedetail/magazine_id/43"><img src="XXXXXX" alt="Toms Classics" title="Toms Classics" /></a>
</div>
<div class="booksFrame">
<a href="Magazine/magazinedetail/magazine_id/34"><img src="XXXXXX" alt="The Sunday Indian (English)" title="The Sunday Indian (English)" /></a>
</div>
<div class="booksFrame">
<a href="Magazine/magazinedetail/magazine_id/26"><img src="XXXXXX" alt="Travel Plus" title="Travel Plus" /></a>
</div>
<div class="rightArrow"><img src="XXXXXX" alt="next" title="next" id="next2" onclick="javascript:nextTopseller(this);" /></div>
<input type="hidden" value="6" id="page_number_topseller"  /> 
```

我的ajax调用函数。

```
function latestArrivalNext(next)
        {
         $("#previous").css("display", "block");
            if($('#page_number').val())
            {
                page  = Number($('#page_number').val());
                page  = page+1; 
                /*alert(page);*/
                $("#ajax_container").html('<img src="/public/images/loading.gif" />').fadeIn('fast');
            }
            else
            page        = 2;
            $.ajax
            ({
                type: "POST",
                url: "index/scrollnewrelease",
                data: "page="+page,
                success: function(msg)
                {
                /*alert(msg);*/
                if(msg!=0)
                {   /*alert(msg);*/
                    $("#ajax_container").html(msg).fadeIn('slow');
                    $("#previous").css("display", "block");
                }else
                $(next).css("display", "none");
                }
            });
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T05:30:19.417

我已经用过这个很久了。试一试。

添加此 IE Only 元标记会停止闪烁：

```
<meta http-equiv="Page-Enter" content="revealtrans(duration=0.0)"> 
```

解释可以在[这里找到](http://www.webmasterworld.com/css/3662705.htm)

如果这解决了您的问题，请标记为答案

# c++ - gnuplot：多图缩放

> ID：10185576
> 
> 赞同：4
> 
> 时间：2012-04-17T05:26:15.463
> 
> 标签：c++, graph, plot, zooming, gnuplot

我正在 gnuplot 的 multiplot 中搜索缩放选项。我可以使用***set mouse zoomjump***放大普通 gnuplot 。但它不适用于多情节。关于如何放大多图的任何想法？我正在从我的 C++ 程序向 gnuplot 发送命令。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T12:43:56.270

您只能放大多图中的最新图。请参阅鼠标部分中 gnuplot 手册中的此引用：

> 鼠标在多图模式下不可用。当使用未设置的多图完成多图时，鼠标将再次打开，但仅作用于多图中的最新图（如 replot 所做的那样）。

# ruby-on-rails - 按用户 ID 查找 Twitter gem

> ID：10185579
> 
> 赞同：1
> 
> 时间：2012-04-17T05:26:25.337
> 
> 标签：ruby-on-rails, twitter

我该如何做到这一点，但通过传入 id 而不是屏幕名称？

```
Twitter.user("sferik").location 
```

还有它的文档在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T05:35:17.117

```
Twitter.user(12345) # where 12345 is the id number 
```

[http://rdoc.info/gems/twitter/Twitter/Client/Users#user-instance_method](http://rdoc.info/gems/twitter/Twitter/Client/Users#user-instance_method)

# android - 如何在android中正确加载html5页面而没有滚动效果

> ID：10185586
> 
> 赞同：0
> 
> 时间：2012-04-17T05:27:34.363
> 
> 标签：android, html

我想在android中开发html5应用程序。我正在使用WebView并加载url（我放在android资产文件夹中的html5的路径）但是我得到了滚动效果。我应该如何避免它，我应该在哪里放置图像和css文件

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T05:43:47.750

要删除水平滚动效果，只需添加它

```
 mWebView.getSettings().setLayoutAlgorithm(LayoutAlgorithm.SINGLE_COLUMN); 
```

# python - 使用 csv.DictReader 处理数据子集

> ID：10185587
> 
> 赞同：0
> 
> 时间：2012-04-17T05:27:36.110
> 
> 标签：python, csv

我正在使用`csv.DictReader`.

```
quotes=open( "file.csv", "rb" )
csvReader= csv.DictReader( quotes ) 
```

然后对于每一行，我使用以下方法将 CSV 中的时间值转换为日期时间：

```
for data in csvReader:
    year = int(data["Date"].split("-")[2])
    month = strptime(data["Date"].split("-")[1],'%b').tm_mon
    day = int(data["Date"].split("-")[0])
    hour = int(data["Time"].split(":")[0])
    minute = int(data["Time"].split(":")[1])

    bars = datetime.datetime(year,month,day,hour,minute) 
```

现在我想只对**同一天**的行执行操作。是否可以在同一个 for 循环中执行此操作，或者我是否应该每天保存数据然后执行操作？烘焙解析的有效方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T06:39:16.860

正如 jogojapan 所指出的，重要的是要知道我们是否可以假设 CSV 文件按日期排序。如果是，那么您可以使用它[`itertools.groupby`](http://docs.python.org/library/itertools.html#itertools.groupby)来简化您的代码。例如，此代码中的 for 循环每天迭代数据：

```
import csv
import datetime
import itertools

with open("file.csv", "rb") as quotes:
    csvReader = csv.DictReader(quotes)

    lmb = lambda d: datetime.datetime.strptime(d["Date"], "%d-%b-%Y").date()
    for k, g in itertools.groupby(csvReader, key = lmb):
        # do stuff per day
        counts = (int(data["Count"]) for data in g)
        print "On {0} the total count was {1}".format(k, sum(counts)) 
```

我创建了一个包含以下数据的测试“file.csv”：

```
Date,Time,Count
1-Apr-2012,13:23,10
2-Apr-2012,10:57,5
2-Apr-2012,11:38,23
2-Apr-2012,15:10,1
3-Apr-2012,17:47,123
3-Apr-2012,18:21,8 
```

当我运行上面的代码时，我得到了以下结果：

```
On 2012-04-01 the total count was 10
On 2012-04-02 the total count was 29
On 2012-04-03 the total count was 131 
```

但请记住，这只有在“file.csv”中的数据按日期排序时才有效。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-17T05:52:04.207

**如果（出于某种原因）您可以假设**输入行*已经按 date 排序*，则可以将它们一一放入本地容器中，只要任何新行的日期与前一行相同即可：

```
same_date_rows = []
prev_date      = None
for data in csvReader:
  # ... your existing code
  bars = datetime.datetime(year,month,day,hour,minute)

  if bars == prev_date:
    same_date_rows.append(data)
  else:
    # New date. We process all rows collected so far
    do_something(same_date_rows)
    # Then we start a new collection for the new date
    same_date_rows = [date]

  # Remember the date of the current row
  prev_date = bars

# Finally, process the final group of rows
do_something(same_date_rows) 
```

**但如果你不能做出这样的假设**，你将不得不

*   **要么：**将行放在一个长列表中，按日期排序，然后将上述算法应用于排序列表
*   **或者：**将行放在 a 中`dictionary`，使用日期作为键，并将行列表作为每个键的值。然后，您可以遍历该字典的键以访问共享日期的所有行。

这两种方法中的第二种方法会占用更多空间，但它可能允许您在主循环中进行一些特定于日期的处理，因为每当您收到一个已存在日期的新行时，您都可以申请立即进行一些特定于日期的处理，可能避免实际显式存储所有特定于日期的行的需要。这是否可能取决于您对行应用的处理类型。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-17T06:22:03.800

如果您不追求空间效率，一个优雅的解决方案是创建一个字典，其中键是您的一天，值是一个列表对象，其中存储了每天的所有信息。稍后您可以根据每天的情况进行任何您想要的操作。

例如

```
d = {} #Initialize emptry dictionry 
for data in csvReader:
Day = int(data["Date"].split("-")[0])
   try:
       d[Day].append('Some_Val')
   except KeyError:
       d[Day] = ['Some_val'] 
```

这将为每一天修改或创建一个新的列表对象。以后可以通过遍历字典或简单地将日期作为键来轻松访问。

例如：

```
d[Some_Day] 
```

将为您提供一个包含您存储的所有信息的列表对象。鉴于字典的线性查找时间，它在时间方面应该是相当有效的。

# matlab - 通过匹配子字符串对字符串进行分组

> ID：10185589
> 
> 赞同：1
> 
> 时间：2012-04-17T05:27:46.823
> 
> 标签：matlab

运行 SPICE 模拟后，我得到一个 .a2d 文件，我正在使用 Matlab 解析该文件。解析文件后，我得到一个包含变量名称的单元格数组 Ex: vars = {'s0';'s1';'s2';'a0';'a1'} 和一个带有信号转换的数据矩阵，其中每行代表每个信号的数据，列代表时间。所有数据都是二进制的，即只有 0 或 1。

我想做的是创建一个算法，根据存储在 vars 中的名称检测“单词”。例如s0、s1、s2组成一个3位字's'；a0 和 a1 一个 2 位字“a”。最后，我需要将每个单词的数据矩阵分解为一个数组（从二进制转换为十进制）。

我是手工做的，但我想知道是否有任何方法可以通过脚本来完成。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T05:55:25.447

这是一个可能的解决方案，将最终值放入结构的字段中。我使用了一个正则表达式来提取变量名和变化，因为你没有说它们可能有多长。

```
% fake data
vars = {'sums4', 'sums2', 'sums1', 'a0', 'a5'};
data(1,:) = logical([0 0 1 0 0 0 1]);
data(2,:) = logical([0 1 1 1 1 0 0]);
data(3,:) = logical([1 0 1 1 0 0 1]);
data(4,:) = logical([0 0 1 0 1 1 1]);
data(5,:) = logical([0 1 1 1 0 0 0]);

output = struct();
for i = 1:length(vars) 
    matches = regexp(vars{i}, '(\D+)(\d+)', 'tokens');
    var = matches{1}{1};
    shiftsize = str2num(matches{1}{2});

    % initialise if not already present
    if (~isfield(output, var))
        output.(var) = zeros(1, size(data, 2));
    end

    % add apropriate shifted value to current values
    output.(var) = output.(var) + (bitshift(1, shiftsize) * data(i, :));
end 
```

输出以 vars 的字符串部分命名的字段结束

```
output = 

    sums: [2 4 22 6 4 0 18]
       a: [0 32 33 32 1 1 1] 
```

# java - 无法启动 Bloomberg 会话

> ID：10185590
> 
> 赞同：6
> 
> 时间：2012-04-17T05:28:06.057
> 
> 标签：java, bloomberg

我目前正在尝试连接到[Bloomberg API](http://www.openbloomberg.com/open-api/)，但在尝试了一天后仍然无法使其运行。

以下是 API 指南中的示例代码，我不断收到“无法启动会话”的部分。尝试连接时。

```
public static void main(String[] args) throws Exception {
    SessionOptions sessionOptions = new SessionOptions();  
    sessionOptions.setServerHost("localhost"); // default value 
    sessionOptions.setServerPort(8194); // default value
    Session session = new Session(sessionOptions);
    if (!session.start()) {
        System.out.println("Could not start session.");
        System.exit(1);
    }
    if (!session.openService("//blp/refdata")) {
        System.out.println("Could not open service " +
                           "//blp/refdata");
        System.exit(1);
    }
} 
```

我还尝试了指南中提供的异步示例，但也没有运气。

为了使用 API，我有什么遗漏的吗？或者如果我必须申请一个帐户才能使用 API，请告诉我 :)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-17T11:10:03.107

你的程序在我的机器上运行良好。您应该检查的几件事：

*   你在彭博终端机上吗？（我假设您使用的是桌面版本）
*   你有一个彭博会议开放吗？
*   进程是否`bbcom.exe`正在运行？

只需阅读您问题的最后一行：**您需要有一个 Bloomberg 帐户才能使用他们的 API 并检索数据**。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2019-11-27T01:47:10.213

运行“bbcomm.exe”后我的问题得到解决

检查以下内容： [https ://github.com/matthewgilbert/pdblp/issues/55](https://github.com/matthewgilbert/pdblp/issues/55)

# java - 在 .JAR 文件中打开 HTML 文件

> ID：10185592
> 
> 赞同：5
> 
> 时间：2012-04-17T05:28:12.500
> 
> 标签：java, html, jar, executable-jar

我有一个名为snake.html 的html 文件，我想将它放入一个罐子中。当 jar 运行时，主类应该在浏览器中打开这个 html 文件。我努力了：

```
public static void main(String[] args) throws IOException, URISyntaxException {
    URL url = Snake.class.getResource("/WebContent/snake.html");
    System.out.println(url);
    // relative to the class location
    Desktop.getDesktop().browse(url.toURI());
} 
```

如果我只运行此代码，但当我将它（和 html 文件）打包时，我得到以下异常：

```
Exception in thread "main" java.io.IOException: Failed to mail or browse
       jar:file:/Users/~user~/Desktop/Snake%20v0.1.jar!/WebContent/snake.html. 
       Error code: -10814
at apple.awt.CDesktopPeer.lsOpen(CDesktopPeer.java:52)
at apple.awt.CDesktopPeer.browse(CDesktopPeer.java:45)
at java.awt.Desktop.browse(Desktop.java:368)
at snake.Snake.main(Snake.java:26) 
```

我想知道我是否有类路径问题，或者我没有正确地将 jar 指向文件。jar 有两个目录，snake 和 WebContent。Snake 有snake.class 文件，WebContent 有snake.html。

任何和所有的帮助/批评表示赞赏。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-17T09:43:19.013

您必须先对文件进行开发压缩。

就像是：

```
public static void main(String[] args) throws IOException, URISyntaxException {
    URL url = Snake.class.getResource("/WebContent/snake.html");

    File temp = File.createTempfile();
    temp.deleteOnExit();

    // Copy content 

    Desktop.getDesktop().browse(temp.getAbsolutePath());
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T08:16:41.633

> (HTML) ..在一个罐子里。当 jar 运行时，主类应该在浏览器中打开这个 html 文件。

浏览器不是为在 Java 档案中显示 HTML 而设计的。Java 组件之类的`JEditorPane`可以。如果 HTML 在 Swing 组件中呈现让您满意，请使用它。否则将需要

1.  通过 URL 定位资源。
2.  将其解压缩到本地文件系统上的某个位置。
3.  使用浏览器打开文件（最简单的方法是使用`Desktop.open(File)`）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T05:50:17.810

尝试像这样加载 snake.html 文件：

```
ClassLoader.getSystemResource("/WebContent/snake.html"); 
```

# jquery - jPlayer 暂停

> ID：10185595
> 
> 赞同：1
> 
> 时间：2012-04-17T05:28:31.440
> 
> 标签：jquery, jplayer

我在所有页面（jPlayer）上都播放了背景音乐，当在帖子或页面或侧边栏上单击/播放另一个嵌入视频时，我需要暂停它，尽管此代码似乎不起作用：

```
<script>
//pauses jplayer
var selectors = [
        "iframe[src^='http://player.vimeo.com']", 
        "iframe[src^='http://www.youtube.com']", 
        "iframe[src^='https://www.youtube.com']", 
        "iframe[src^='http://www.kickstarter.com']", 
        "object", 
        "embed"
      ];
  $selectors.click(function() {
  $.jPlayer.pause();
});
</script> 
```

有什么问题？ [我的网站链接](http://artur.nickandlarry.ru/video)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T10:46:44.797

```
// By Chris Coyier & tweaked by Mathias Bynens
$(function() {
// Find all videos
var selectors = [
    "iframe[src^='http://player.vimeo.com']", 
    "iframe[src^='http://www.youtube.com']", 
    "iframe[src^='https://www.youtube.com']", 
    "iframe[src^='http://www.kickstarter.com']", 
    "object", 
    "embed"
  ];
    // The element that is fluid width
var $allVideos = $(this).find(selectors.join(','));
// Figure out and save aspect ratio for each video
$allVideos.each(function() {
var $this = $(this);
$(this).hover(function(){
        $("#bgaudio").jPlayer("pause");
    },function(){
        $("#bgaudio").jPlayer("play");
    });
});
}); 
```

“点击”对于不同的视频提供商来说很复杂——“悬停”在除 chrome 之外的所有浏览器中都有效，有什么想法吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T22:15:40.043

更改`$selectors`为`$(selectors)`。

# codeigniter - 在codeigniter中重定向错误

> ID：10185596
> 
> 赞同：0
> 
> 时间：2012-04-17T05:28:35.653
> 
> 标签：codeigniter, error-handling, codeigniter-2

我希望将所有 codeigniter 错误重定向到自定义错误页面。我已经重定向了 404 错误，`$route['404_override'] = 'errorcontroller';` 如何重定向所有其他错误，例如 db 和 php

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T07:04:24.447

您始终可以使用 try 和 catch 块，然后重定向到您的自定义错误页面。但是根据您的问题，您应该考虑一些事情。

1.  重定向将发出一个全新的请求，该请求通过将标头发送到浏览器来完成。因此，除非您将该消息保存在会话或其他内容中，否则您将无法显示错误消息。

2.  一些错误会导致 PHP 抛出异常，而另一些则不会。一些数据库交互错误只会引发 PHP 警告或错误。PHP 执行可能会停止，但不会抛出异常。在这种情况下，即使将代码包装在 try catch 中也无济于事。但是，您可以创建自定义错误处理程序并通知 PHP 使用该处理程序。然后在自定义错误处理程序中，您可以随意抛出异常或重定向到错误页面。

3.  您还可以使用 .htaccess 强制重定向到您在特定标题代码 [404,304,500] 等处设置的页面

希望这可以帮助！

# mysql - Codeigniter：从三个表生成学生成绩表

> ID：10185600
> 
> 赞同：1
> 
> 时间：2012-04-17T05:28:51.857
> 
> 标签：mysql, codeigniter, codeigniter-2

我的数据库中有以下表格。表格`midterm`和`finalterm`包含学生的分数。

![在此处输入图像描述](../Images/77572935d1d3183cba4724edee58e3ea.png)

现在我想在单页中显示所有学生的成绩单，如下所示：

![在此处输入图像描述](../Images/f815d185029c5ff52d98cdb420a10e76.png)

我知道如何在单个表中查询，但在这种情况下我遇到了问题，因为有三个表。

我正在使用 Codeigniter，请您帮我在我的模型和视图文件中编码什么？

提前致谢 ：）

这是我的控制器：

```
 $this->load->model('Mod_student');
     $data['records1']= $this->Mod_student->check1();
         $this->load->view('view_student',$data); 
```

# 更新部分

这是我的看法：

```
 <?php if(count($records1) > 0) { ?>

      <?php foreach ($records1 as $row){ ?>

   <table>
   <tr> <td><?php echo $row['StudentName']; ?></td></tr>

     <tr>

      <td><?php $midDate   =   explode(',',$row['MidDate']);
     foreach($midDate as $md)
         {
         echo $md;
         echo '<br />'  ;
         }
    ?>
         </td> 

       <td><?php $midDate   =   explode(',',$row['MidSubject']);
     foreach($midDate as $md)
         {
         echo $md;
         echo '<br />'  ;
         }
    ?>
      </td> 

       <td><?php $midDate   =   explode(',',$row['MidMarks']);
     foreach($midDate as $md)
         {
         echo $md;
         echo '<br />'  ;
         }
    ?>
       </td> 

       </tr>

     </table>

<?php  } ?>

<?php } else { echo "No Record Found";} ?> 
```

我已经更改了我的视图文件，现在它工作正常:) 但是我面临一些问题。如果我运行上面的脚本，我会得到以下输出

![在此处输入图像描述](../Images/769f69f0ad60aad64dd383ce976494f1.png)

如果你注意到我的表`midterm`，你会看到那个`id`3 岁的学生在英语和数学上的分数是一样的。但在我的输出中，它只在中间显示一个主题的标记。是因为您`distinct`在查询中使用了它而发生的吗？我试过删除不同的，但它没有显示确切的数据。

请你告诉我如何解决这个问题？

再次感谢您的帮助。:)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-17T07:03:41.787

我已经为您找到了解决方案。它将为每个学生获取一条记录，包含他的所有信息。我这里用过mysql的GROUP_CONCAT。因此，在 php 端，您将不得不分解该值，然后在循环中访问它。顺便说一句，您可以像这样运行它的查询。

```
 $query= "select
          s.id   as SID,
          s.name as StudentName,
          (select group_concat(distinct midterm.date) from midterm where midterm.student_id = SID) as MidDate,
          (select group_concat(distinct midterm.Subject) from midterm where midterm.student_id = SID) as MidSubject,
          (select group_concat(midterm.marks) from midterm where midterm.student_id = SID) as MidMarks,
          (select group_concat(distinct finalterm.date) from finalterm where finalterm.student_id = SID) as FinalDate,
          (select group_concat(distinct finalterm.marks) from finalterm where finalterm.student_id = SID) as FinalMarks,
          (select distinct sum(midterm.marks) from midterm where midterm.student_id = SID) as MidTotal,
          (select distinct sum(finalterm.marks) from finalterm where finalterm.student_id = SID) as FinalTotal
          from students as s
          left join midterm as m on m.student_id = s.id 
          left join finalterm as f on f.student_id = s.id
          and f.subject = m.subject
          group by s.name;";

    $query  =   $this->db->query($query); 
```

或 Active Record 版本

```
$data   =   array(
                    's.id   as SID',
                    's.name as StudentName',
                    '(select group_concat(distinct midterm.date) from midterm where midterm.student_id = SID) as MidDate',
                    '(select group_concat(distinct midterm.Subject) from midterm where midterm.student_id = SID) as MidSubject',
                    '(select group_concat(midterm.marks) from midterm where midterm.student_id = SID) as MidMarks',
                    '(select group_concat(distinct finalterm.date) from finalterm where finalterm.student_id = SID) as FinalDate',
                    '(select group_concat(distinct finalterm.marks) from finalterm where finalterm.student_id = SID) as FinalMarks',
                    '(select distinct sum(midterm.marks) from midterm where midterm.student_id = SID) as MidTotal',
                    '(select distinct sum(finalterm.marks)from finalterm where finalterm.student_id = SID) as FinalTotal'               
                    );
    $this->db->select($data);
    $this->db->group_by('s.name');
    $this->db->group_by('s.name');
    $this->db->from('students as s');
    $this->db->join('midterm as m','m.student_id = s.id','left');
    $this->db->join('finalterm as f','f.student_id = s.id','left');
    $this->db->group_by('s.name'); 
```

带有不同的关键字。这里有一些使用说明。1.每组concat都要炸开在php端使用。像这样

```
<?php echo $row['StudentName']?> 
```

和 Group Concat Item 表单查询

```
 $midDate   =   explode(',',$row['MidDate']);
 foreach($midDate as $md)
 {
 echo $md;
 echo '<br />'  ;
 } 
```

# ruby-on-rails - 我应该如何在 Rails 应用程序中存储 3rd 方 API 身份验证令牌？

> ID：10185607
> 
> 赞同：5
> 
> 时间：2012-04-17T05:29:09.667
> 
> 标签：ruby-on-rails, soap, ruby-on-rails-3.2

我正在考虑使用[Savon](http://savonrb.com/)来使用 SOAP API。此特定 API 的要求之一是在对 API 的每个请求中提供一个身份验证令牌。也就是说，除了返回身份验证令牌本身的请求之外。该调用只需要用户名和密码。令牌在 20 分钟不活动后过期。

我的问题是，存储此令牌的最佳做法是什么？每次发出两个请求，一个用于令牌，一个用于实际请求，肯定是不可取的吗？

我正在考虑将其存储在会话变量中，但这意味着为每个访问者生成一个新令牌，我认为这不是必需的。但是，这意味着我可以很容易地设置 20 分钟的到期时间。

如果我将它存储在数据库中，我怎么知道它是否会在调用 API 之前过期，而不需要很多额外的逻辑？

或者，我应该将它存储在数据库中，然后每隔几分钟简单地对 API 进行一次后台调用，以确保令牌永不过期吗？

还是我在吠叫完全错误的树？！

感谢您的任何建议。

# java - 我可以在不使用 MapReduce 的情况下访问 Java 中的 Hadoop 文件吗？

> ID：10185610
> 
> 赞同：0
> 
> 时间：2012-04-17T05:29:14.470
> 
> 标签：java, hadoop

在 Hadoop 中编程是否必须使用 MapReduce 结构，或者我们也可以运行任何类型的简单 JAR？

我正在尝试从 Java 代码访问 HDFS 中的文件。我试过了：

```
static{
    URL.setURLStreamHandlerFactory(new FsUrlStreamHandlerFactory());    
}

in = new URL("hdfs://cluster-server:54310/home/hduser/sort/inputs").openStream();
IOUtils.copyBytes(in, System.out, 2, false); 
```

但是当我从 Eclipse 运行这段代码时，它会导致错误：

> 本地异常调用 cluster-server/172.16.18.75:54310 失败：null

但是我可以通过命令行界面看到文件存在于Hadoop HDFS集群中。

请帮我。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T06:08:50.950

在当前版本的 Hadoop 中 - MapReduce 仅支持范式。在下一个版本中，它将成为libraray，并且将支持其他并行处理范例。
今天你可以通过 hadoop 命令运行任何 jar - 但它只会在本地运行你的 main。
是的，您可以在不连接 MapReduce 的情况下访问 HDFS，但您应该通过 Hadoop 类来访问 - 而不是一般的 java IO。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-23T19:41:31.600

我猜 OP 只是想从 Java 程序以编程方式访问 HDFS。如果是这样的话，我发现这个链接非常有用：- [http://blog.rajeevsharma.in/2009/06/using-hdfs-in-java-0200.html](http://blog.rajeevsharma.in/2009/06/using-hdfs-in-java-0200.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-02T02:23:21.397

如果你想访问 HDFS 中的文件，**Hadoop: The Definitive Guide**中的第 3 章是一个好的开始。使用 URL 打开输入流可能不适用于 HDFS。

# iphone - 不调用方法 didSelectRowAtIndexPath：

> ID：10185616
> 
> 赞同：1
> 
> 时间：2012-04-17T05:30:19.317
> 
> 标签：iphone, ios, ipad

didSelectRowAtIndexPath：即使在将表委托和数据源连接到文件所有者之后，方法也没有调用。

当我尝试打印在此方法中未打印的内容时，请在下面找到我的代码供您参考：

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
    return [favorite count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{
    UITableViewCell *cell= nil;
    cell = [tableView dequeueReusableCellWithIdentifier:@"mycell"];
    if (cell == nil) {
        cell=[[UITableViewCell alloc]initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@"mycell"];}

    db * temp =(db *)[self.favorite objectAtIndex:indexPath.row];
    cell.textLabel.text=temp.name;
    return cell;
}

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath{
       NSLog(@"b");

        UITableViewCell *selectedCell = [secondTable cellForRowAtIndexPath:indexPath];
    [secondTable.delegate tableView:secondTable didSelectRowAtIndexPath:indexPath];
        cellText = selectedCell.textLabel.text;
        NSLog(@"%@",cellText);
        [fav addObject:cellText];       
    arrayTwo = tableTw.tableTwo;
    msg = [NSString stringWithFormat: @" %@  ",[arrayTwo objectAtIndex:0]];
        NSLog(@"%@",[arrayTwo objectAtIndex:0]);

}

-(void)checkAndCreateDatabase{
    BOOL success;
    NSFileManager *fileManager=[NSFileManager defaultManager];
    success=[fileManager fileExistsAtPath:databasePath];
    if(success)
        return;

    NSString *databasePathFromApp = [[[NSBundle mainBundle]resourcePath] stringByAppendingPathComponent:databaseName];
    [fileManager copyItemAtPath:databasePathFromApp toPath:databasePath error:nil];
}   
-(IBAction)resPage:(id)sender{
    NSLog(@"%@",fav);
   sqlite3 *database;
    favorite=[[NSMutableArray alloc]init];
    if(sqlite3_open([databasePath UTF8String], &database)== SQLITE_OK){
         NSString *sql=[NSString stringWithFormat:@"SELECT name,item_country.id,text.text FROM country,item_country,text WHERE country.name ='%@' AND text.item = item_country.item AND country.id = item_country.id", cellText];
        const char *sqlStatement = [sql UTF8String];;
        sqlite3_stmt *compiledStatement;
        NSLog(@"a");
        if(sqlite3_prepare_v2(database, sqlStatement, -1, &compiledStatement, NULL)==SQLITE_OK){
            NSLog(@"A");
            while (sqlite3_step(compiledStatement)==SQLITE_ROW) {
                    d=[NSString stringWithCString:(char *)sqlite3_column_text(compiledStatement, 2) encoding:NSUTF8StringEncoding];
                  a= [NSString stringWithUTF8String:(char *)sqlite3_column_text(compiledStatement, 1)];
                db *info =[[db alloc]initWithText:(NSString *)d andAg:(NSString *)a];
                [favorite addObject:info];
            }            
        }
        sqlite3_finalize(compiledStatement);

    sqlite3_close(database);

        if(favorite.count >0){
        txt.text = [NSString stringWithFormat:@"%@ ", [favorite objectAtIndex:0] ];

        }}
}
- (void)viewDidLoad {
    {
        databaseName=@"nobel10.db";
        NSArray *documentPaths= NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
        NSString * documentDir = [documentPaths objectAtIndex:0];
        databasePath=[documentDir stringByAppendingPathComponent:databaseName];
        [self checkAndCreateDatabase];
        [super viewDidLoad];
        // Do any additional setup after loading the view, typically from a nib.
    }
    [super viewDidLoad];
    if (tableOn == nil) {
        tableOn = [[table1 alloc] init];
    }
    if (tableTw == nil) {
        tableTw = [[table2 alloc] init];
    }
    if (tableThre == nil) {
        tableThre = [[table3 alloc] init];
    }
    if (tableFou == nil) {
        tableFou = [[table4 alloc] init];
    }

    [firstTable setDataSource:tableOn];
    [secondTable setDataSource:tableTw];
    [thirdTable setDataSource:tableThre];
    [fourthTable setDataSource:tableFou];
    [fifthTable setDataSource:tableFiv];

    [firstTable setDelegate:tableOn];
    [secondTable setDelegate:tableTw];
    [thirdTable setDelegate:tableThre];
    [fourthTable setDelegate:tableFou];

    tableOn.view = tableOn.tableView;
    tableTw.view = tableTw.tableView;
    tableThre.view = tableThre.tableView;
    tableFou.view = tableFou.tableView;

    {fav=[[NSMutableArray alloc]init];
         cellText =[[NSString alloc]init];
        secondTable=[[UITableView alloc]init];
        secondTable.delegate=self;
        secondTable.dataSource=self;
        secondTable.tag = 20;
    [self.view addSubview:secondTable];
    }
} 
```

请提出建议！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T06:19:37.777

我认为 secondTable 不是你工作的对象。确保它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T06:28:50.567

添加 .h 文件并在 dalegate 调用时调用 dataSource。

```
obj_TableView.delegate = self;
obj_TableView.dataSource = self; 
```

那就试试吧。

# qr-code - 活动 Brite 二维码

> ID：10185618
> 
> 赞同：0
> 
> 时间：2012-04-17T05:30:28.380
> 
> 标签：qr-code, eventbrite

我已经挖掘了 Event Brite API 中的方法，但在其原生 IOS 应用程序中找不到对 Eventbrite 生成的 QR 码的任何引用。

[http://developer.eventbrite.com/doc/#methods](http://developer.eventbrite.com/doc/#methods)

无需对其进行逆向工程或嗅探网页网址 - 任何人都可以阐明如何做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T19:49:34.317

我知道这是一个旧线程，但我正在尝试使用 Eventbrite 条形码来检查访客。@johndpope - 你在你的追求中还有什么进展吗？

每张票上的代码不是二维码，而是 Datamatrix（供 iOS/Android 应用程序读取）和 Code 128（我认为）。门票上的两个代码（顺便说一下，Conferencebadge.com 应用程序上的二维码）都是简单的数字，并采用以下形式......

{OrderID}{AttendeeID}{Seq}

例如

123456789 123456789 001（无空格）

任何生成条形码的代码都可以重新创建这些，但是在没有 API 方法的情况下检查人员有点困难。iOS/Android 应用程序正确使用 HTTPS，您需要对网站进行身份验证才能使用网站使用的 checkin_update URL。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-23T23:14:52.450

Eventbrite 条形码信息是一个敏感问题 - 但是，Eventbrite 很乐意[通过电子邮件讨论细节](http://developer.eventbrite.com/contact-us/)

如果您只想为当前事件所有者构建一个二维码列表，您应该能够从[event_list_attendees](http://developer.eventbrite.com/doc/events/event_list_attendees/) API 调用返回的barcode_ids 生成它们。

# android - 布局中的 SurfaceView

> ID：10185624
> 
> 赞同：9
> 
> 时间：2012-04-17T05:30:41.593
> 
> 标签：android, android-layout, layout, surfaceview

因此，我进行了大量搜索，但似乎仍然无法找到 SurfaceView 无法显示的确切原因。这是我正在做的事情的一些背景：

我有一个水平设置的线性布局。它包含一个 ImageView，然后是一个垂直线性布局，最后是另一个 ImageView。在垂直线性布局中，基本有三样东西：顶部的另一个 ImageView、一个扩展的 SurfaceView（称为 MagnetView）和下方的一个 ImageView。

这是xml：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="horizontal" >

 <!-- Left Magnetrak -->

 <ImageView
    android:layout_width="wrap_content"
    android:layout_height="fill_parent"
    android:src="@drawable/vectorparts_01"
    android:adjustViewBounds="true" />

<!-- Middle Linear Layout -->        
<LinearLayout 
    android:layout_width="0dip"
    android:layout_height="fill_parent"
    android:orientation="vertical"
    android:layout_weight="1">

    <!-- Top Bar with Lifes and Score counter -->
    <RelativeLayout
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:adjustViewBounds="true">

    <ImageView
    android:adjustViewBounds="true"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:src="@drawable/vectorparts_22"/>

    <!-- Score counter -->
    <TextView
    android:id="@+id/myImageViewText"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentRight="true"
    android:layout_marginRight="10dp"
    android:layout_marginTop="5dp"
    android:gravity="center"
    android:text="000000000000"
    android:textColor="#000000" />

    <!-- Life1 -->
     <ImageView
        android:id = "@+id/life1"
        android:adjustViewBounds="true"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:src="@drawable/vectorparts_13" 
        android:layout_alignParentLeft="true"
        android:layout_marginLeft="5dp"
        android:layout_marginTop="1dp"
        android:gravity="center" />

     <!-- Life2 -->
     <ImageView
        android:id = "@+id/life2"
        android:adjustViewBounds="true"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:src="@drawable/vectorparts_13" 
        android:layout_toRightOf="@id/life1"
        android:layout_marginTop="1dp"
        android:layout_marginLeft="1dp"
        android:gravity="center" />

     <!-- Life3 -->
     <ImageView
        android:id = "@+id/life3"
        android:adjustViewBounds="true"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:src="@drawable/vectorparts_13" 
        android:layout_toRightOf="@id/life2"
        android:layout_marginTop="1dp"
        android:layout_marginLeft="1dp"
        android:gravity="center" />

    </RelativeLayout>

    <!-- SurfaceView -->
    <LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:id="@+id/middlesurface">

    </LinearLayout>

     <!-- Bottom Bar -->   
    <RelativeLayout
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:adjustViewBounds="true"> 

    <ImageView
    android:adjustViewBounds="true"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:src="@drawable/vectorparts_02"/>

    </RelativeLayout>

</LinearLayout>

<!-- Right Magnetrak -->
   <ImageView
android:layout_width="wrap_content"
android:layout_height="fill_parent"
android:src="@drawable/vectorparts_01"
android:adjustViewBounds="true" /> 
```

本质上，我希望 MagnetView 显示（或打孔）我将它放在布局中的位置。但它不显示。事实上，我的 SurfaceView 显示的唯一时间是当我将活动的 setContentView() 显式设置为 SurfaceView 时，取消了其他所有内容。

这是实际的活动：

```
public class Magnetraks extends Activity {

MagnetView midSurf;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    midSurf = new MagnetView(this);
    LinearLayout midLL = new LinearLayout(this);

    midLL.findViewById(R.id.middlesurface);
    midLL.addView(midSurf);

    setContentView(R.layout.main);

    //Debugging purposes: run to see if middleSurface view is showing up when on its own.
    //setContentView(midSurf);

}

@Override
protected void onResume() {
 // TODO Auto-generated method stub
 super.onResume();
 midSurf.resume();
}

@Override
protected void onPause() {
 // TODO Auto-generated method stub
 super.onPause();
 midSurf.pause();
} 
```

我应该将 SurfaceView 放在布局 xml 的顶部吗？我必须设置更多属性吗？我可以将 SurfaceView 覆盖在其他所有内容上，使其半透明并绘制我需要的内容吗？任何帮助将不胜感激，因为我似乎无法掌握 SurfaceViews 的工作原理。似乎它们是我的视图层次结构的一部分，但是文档告诉我它们完全不同。

谢谢你。

编辑 2012 年 4 月 17 日

提供更多信息：我的 xml UI 设计器在中间为我的扩展 SurfaceView 类显示了一个大框，称为 MagnetView。我已经用红色勾勒了它。（Stackoverflow 不允许我发布图片）

UI 设计器视图 (http://24.media.tumblr.com/tumblr_m2mmqvBNwW1qcreoco1_500.jpg) [http://24.media.tumblr.com/tumblr_m2mmqvBNwW1qcreoco1_500.jpg](http://24.media.tumblr.com/tumblr_m2mmqvBNwW1qcreoco1_500.jpg)

这是 MagnetView (SurfaceView) 类：

```
import android.content.Context;
import android.graphics.Canvas;
import android.graphics.PixelFormat;
import android.view.SurfaceHolder;
import android.view.SurfaceView;

public class MagnetView extends SurfaceView implements Runnable, SurfaceHolder.Callback{
Thread mThread;
SurfaceHolder mSurfaceHolder;
volatile boolean running = false;

//Creates new surface view as well as a new surfaceholder, which allows access to the surface
public MagnetView (Context context){
    super(context);

    mSurfaceHolder = getHolder();
            mSurfaceHolder.addCallback(this);
    //this.setZOrderOnTop(true);
    //getHolder().setFormat(PixelFormat.TRANSLUCENT);

}

public void resume(){
    running = true;
    mThread = new Thread(this);
    mThread.start();
}

public void pause(){
       boolean retry = true;
       running = false;
       while(retry){
        try {
         mThread.join();
         retry = false;
            } catch (InterruptedException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
       }
}

@Override
public void run() {
  // TODO Auto-generated method stub
    while(running){
        if(mSurfaceHolder.getSurface().isValid()){
            Canvas canvas = mSurfaceHolder.lockCanvas();
            //... actual drawing on canvas

            canvas.drawARGB(100, 255, 255, 80);

            mSurfaceHolder.unlockCanvasAndPost(canvas);
        }
    }
}

@Override
public void surfaceChanged(SurfaceHolder holder, int format, int width,
        int height) {
    // TODO Auto-generated method stub

}

@Override
public void surfaceCreated(SurfaceHolder holder) {
    // TODO Auto-generated method stub
    this.resume();

}

@Override
public void surfaceDestroyed(SurfaceHolder holder) {
    // TODO Auto-generated method stub

}

} 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-20T05:15:46.290

我只是放下更改。

1.  用 LinearLayout 替换 xml 中的表面视图。

    ```
     <LinearLayout 
           android:id="@+id/middleSurface"
           android:layout_width="wrap_content"
           android:layout_height="wrap_content"
        /> 
    ```

2.  获取线性布局的实例

    LinearLayout 表面 = (LinearLayout)findViewById(R.id.surface);

3.  将表面视图的实例添加到 LinearLayout

    surface.addView(new MagnetView(this));

setContentView(R.layout.main);之后要执行2,3步

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T06:19:04.803

我将检查 Eclipse UI 设计器中的布局，以查看是否所有内容都按您的意愿放置。表面视图只是布局方面的普通视图。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T09:25:46.470

如果我没有错，我认为您的查询的方式是：您希望在表面视图顶部显示/渲染某些内容以及您在 xml.xml 中提到的其他视图元素。

如果您想要在表面视图之上的视图，则需要扩展它（AFAIK 没有其他方法）。然后你需要重写 onDraw() 方法以在表面视图上显示你想要的所有东西。您还需要获取一个 SurfaceHolder 对象来获取画布。

这是一个很好的链接显示，将图像视图放在表面视图的顶部： [http ://www.droidnova.com/playing-with-graphics-in-android-part-ii,160.html](http://www.droidnova.com/playing-with-graphics-in-android-part-ii,160.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-18T05:31:54.780

1.  从 xml 中删除表面视图并放置一个线性布局来代替它，并将一个 id 与其关联。
2.  获取一个线性布局的实例。
3.  使用添加子视图，即在这种情况下的磁铁视图到线性布局

    添加视图（）

这解决了问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-10-20T12:46:16.720

你设置了SurfaceView的背景吗？我发现如果你设置了SurfaceView的背景，它不会显示你在辅助线程上绘制的内容。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-12-27T12:02:56.613

你可以试试这个方法，`setContentView(R.layout.main);`继续`super.onCreate(savedInstanceState);`

```
super.onCreate(savedInstanceState);
setContentView(R.layout.main);
midSurf = new MagnetView(this);
LinearLayout midLL = new LinearLayout(this);

midLL.findViewById(R.id.middlesurface);
midLL.addView(midSurf); 
```

# extjs4 - Extjs4 中的 Tabpanel 有内存泄漏？

> ID：10185625
> 
> 赞同：1
> 
> 时间：2012-04-17T05:30:52.530
> 
> 标签：extjs4, tabpanel

每个人！我在extjs4中使用了tablpanel，发现在tabpanel中删除面板时IE8中的内存没有减少，再次添加面板时也增加了。所以我写了一个测试如下：

```
Ext.onReady(function() {
var currentItem;
var tabs = Ext.createWidget('tabpanel', {
    renderTo: 'tabs',
    resizeTabs: true,
    enableTabScroll: true,
    width: 600,
    height: 250,
    defaults: {
        autoScroll:true,
        bodyPadding: 10
    }
});

var __my_task = '';
var i = 0;
try{
    __my_task = {
            run: function(){
                if (i % 2 == 0){
                    for(var j = 0; j < 10; j++){
                        addTab(true);
                    }
                }else{
                    var items = [];

                    tabs.items.each(function(item){
                        if(item.closable){
                            if(!false || item != this.item){
                                items.push(item);
                            }
                        }
                    }, this);

                    Ext.each(items, function(item){
                        tabs.remove(item);
                        item.destroy();
                    }, this);
                } // else
                i ++;
            },
            interval: 300
    }
    Ext.TaskManager.start(__my_task);
}catch(e){}

// tab generation code
var index = 0;
function addTab (closable) {
    ++index;
    tabs.add(Ext.create('Ext.tree.Panel',{
        title: 'New Tab ' + index,
        iconCls: 'tabs',
        closable: !!closable
    }));
} 
```

});

在IE8下运行，内存会提升这么快，我的代码错了吗？有什么问题问我，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T10:46:09.857

IMO 很难评估 Javascript 中是否存在内存泄漏（如您所知，用 JS 编写的 Extjs）。该对象可能会被删除`delete()`（destroy() 将使用它）但不能确定何时实际释放内存。

[您可以在删除或设置为 null](https://stackoverflow.com/questions/1947995/when-should-i-use-delete-vs-setting-elements-to-null-in-javascript)和[Javascript 垃圾收集](https://stackoverflow.com/questions/864516/what-is-javascript-garbage-collection)中找到有关 Javascript 垃圾收集器的更多信息

# php - PHP 函数参数 - 是否使用数组？

> ID：10185634
> 
> 赞同：11
> 
> 时间：2012-04-17T05:31:39.577
> 
> 标签：php, arrays, function, arguments

我喜欢使用 key=>value 对（数组）作为参数而不是单个参数来创建我的 PHP 函数。

例如，我更喜欢：

```
function useless_func($params) {
    if (!isset($params['text'])) { $params['text'] = "default text"; }     
    if (!isset($params['text2'])) { $params['text2'] = "default text2"; }   
    if (!isset($params['text3'])) { $params['text3'] = "default text3"; }   
    echo $params['text'].$params['text2'].$params['text3'];
    return;
} 
```

我不喜欢：

```
function useless_func($text = "default text", $text2 = "default text2", $text3 = "default text3") {
        echo $text.$text2.$text3;
    return;
} 
```

我第一次看到在 Wordpress 代码库中广泛使用这种方法。

我更喜欢数组的原因：

*   可以按任何顺序提供函数参数
*   更容易阅读代码/更多的自我记录（在我看来）
*   不太容易出错，因为在调用函数时我必须调查正确的数组键

我正在与一位同事讨论这个问题，他说它没有用，只会导致额外的代码，而且设置默认值要困难得多。基本上，他在所有三点上都完全不同意我的观点。

我正在寻找可能能够提供见解的专家的一些一般性建议和指导：有什么更好或更合适的方法来做到这一点？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2015-08-06T18:49:09.370

# 不要那样做！

在大多数情况下，将所有内容传递给数组是一个坏主意。

*   它可以防止人们在不知道它需要操作什么的情况下使用您的功能。
*   当您可能应该创建一个具有更精确参数需求和更窄目标的函数时，它可以让您创建需要大量参数的函数

这似乎与在函数中[注入它需要的东西相反。](https://en.wikipedia.org/wiki/Dependency_injection)

> 可以按任何顺序提供函数参数

我没有这种偏好。我不明白这种需求。

> 更容易阅读代码/更多的自我记录（在我看来）

大多数 IDE 会为您提供函数所需的不同参数。如果有人看到这样的函数声明`foo(Someclass $class, array $params, $id)`，就很清楚该函数需要什么。我不同意单个参数参数更易于阅读或自我记录。

> 不太容易出错，因为在调用函数时我必须调查正确的数组键

允许人们在不知道默认值的情况下传入数组并不接近“不易出错”。强制人们在使用你的函数之前阅读它是一种永远不会被使用的可靠方法。声明它需要三个参数及其默认值*不太*容易出错，因为调用您的函数的人会知道参数将被默认为哪些值，并相信它会呈现他们期望的结果。

* * *

如果您要解决的问题是参数数量过多，那么正确的决定是将函数重构为更小的函数，而不是将函数依赖项隐藏在数组后面。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-04-17T05:40:33.787

嗯，有点用处。但是对于某些始终传递的参数，最好使用经典传递，例如`function some($a1, $a2)`. 我在我的代码中这样做：

```
function getSome(SomeClass $object, array $options = array())
{
    // $object is required to be an instance of SomeClass, and there's no need to get element by key, then check if it's an object and it's an instance of SomeClass

    // Set defaults for all passed options
    $options = array_merge(array(
        'property1' => 'default1',
        'property2' => 'default2',
        ... => ...
    ), $options); 
} 
```

所以，正如你所看到的，我也喜欢这种代码风格，但对于核心参数，我更喜欢经典风格，因为如果我使用你的代码风格，PHP 可以控制更多我应该做的事情。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-04-17T06:04:19.890

我假设您在问编写**所有函数是否是****一件好事**，以便它们只接受一个参数，并且该参数是一个数组？

 **如果你是唯一一个会处理你的代码的人，那么你可以做你喜欢做的事。但是，通过将所有参数值传递给数组，其他任何人都将不得不更加努力地理解该函数的作用以及他们为什么/如何使用它，特别是如果他们使用的是具有函数名称自动完成功能的 IDE等等。他们不会无缘无故地将其称为“功能签名”。

我建议为您不知道会有多少的项目（例如一系列数据项）或相关选项/设置组（这可能是 Wordpress 中发生的事情）保留数组参数你提到的例子？）。

如果您确实继续对数组参数采用一揽子方法，那么您至少应该意识到它对可读性的影响并采取一些措施来解决这个问题。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-04-17T05:59:27.537

你的同事是对的。不仅相同功能的代码更多，而且更难阅读并且可能降低了性能（因为您需要调用`isset`每个参数并且需要访问数组来设置值）。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2012-04-17T06:34:41.590

[这与Cargo Cult 编程](http://en.wikipedia.org/wiki/Cargo_cult_programming)接壤。你说这更具可读性和自我记录。我想问怎么做？要知道如何使用您的函数/方法，我必须阅读代码本身。我无法从签名本身知道如何使用它。如果您使用任何支持方法签名提示的半体面的 IDE 或编辑器，这将是一个真正的 PITA。另外，您将无法使用 PHP 的类型提示语法。

如果您发现您正在编写大量参数，尤其是可选参数，则表明您的设计可能有问题。考虑一下你可能会怎么做。如果某些或所有参数是相关的，那么它们可能属于它们自己的类。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2012-09-28T06:40:29.847

using`array_merge()`可以，但是`+`也可以使用操作符；它以另一种方式工作，它只添加尚未给出的默认值。

```
function useless_func(array $params = array())
{
    $params += array(
        'text' => 'default text',
        'text2' => 'default text2',
        'text3' => 'default text3',
    );
} 
```

另请参阅：[函数将数组传递给定义的键](https://stackoverflow.com/q/12634670/1338292)

使用数组作为函数参数时你不会得到的一些东西是：

1.  类型检查（仅适用于对象和数组，但它可能很有用并且在某些情况下是预期的）。
2.  smart(er) 文本编辑器具有代码洞察功能，可以显示函数理解的参数；尽管您可以在函数 docblock 中添加可能的键，但使用数组会消除该功能。
3.  由于＃2，它实际上变得更容易出错，因为您可能会错误输入数组键。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-04-17T05:46:29.847

你的同事疯了。将数组作为函数参数传入是完全可以接受的。它在许多开源应用程序中很普遍，包括 Symfony 和 Doctrine。我一直遵循 2 参数规则，如果一个函数需要两个以上的参数，或者您认为它将来会使用两个以上的参数，请使用数组。IMO 这允许最大的灵活性并减少如果参数传递不正确可能出现的任何调用代码缺陷。

当然，从数组中推断值需要更多的工作，并且您确实必须考虑所需的元素，但它确实使添加功能更加容易，并且比每次需要时向函数传递 13 个参数要好得多被称为。

这是一段代码，显示必需参数与可选参数，只是为了给您一个想法：

```
// Class will tokenize a string based on params
public static function tokenize(array $params)
{
    // Validate required elements
    if (!array_key_exists('value', $params)) {
        throw new Exception(sprintf('Invalid $value: %s', serialize($params)));
    }        

    // Localize optional elements
    $value            = $params['value'];
    $separator        = (array_key_exists('separator', $params)) ? $params['separator'] : '-';
    $urlEncode        = (array_key_exists('urlEncode', $params)) ? $params['urlEncode'] : false;
    $allowedChars     = (array_key_exists('allowedChars', $params)) ? $params['allowedChars'] : array();
    $charsToRemove    = (array_key_exists('charsToRemove', $params)) ? $params['charsToRemove'] : array();

.... 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2014-02-20T14:51:47.790

我在很多场合都使用数组来替换一长串参数，并且效果很好。我同意这篇文章中提到的关于代码编辑器无法为参数提供提示的人的观点。问题是，如果我有 10 个参数，而前 9 个是空白/null，那么在调用该函数时它就会变得笨拙。

我也有兴趣了解如何重新设计需要大量参数的函数。例如，当我们有一个基于设置的某些参数构建 SQL 语句的函数时：

```
function ($a1, $a2, ... $a10){

        if($a1 == "Y"){$clause_1 = " something = ".$a1." AND ";}
        ...
        if($a10 == "Y"){$clause_10 = " something_else = ".$a10." AND ";}

        $sql = "
        SELECT * FROM some_table 
        WHERE
        ".$clause_1." 
        ....
        ".$clause_10." 
        some_column = 'N'
        ";

        return $sql;
    } 
```

我希望看到 PHP 添加一个本机帮助函数，该函数可以在被调用的函数中使用，该函数将通过进行必要的类型检查来帮助传递参数数组。PHP 通过创建 func_get_args() 函数在一定程度上认识到了这一点，该函数允许以任何顺序传递参数。但是这只会传递值的副本，所以如果你想将对象传递给函数，这将是一个问题。如果存在这样的函数，那么代码编辑器将能够选择它并提供有关可能参数的详细信息。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-07-23T10:07:49.147

@Mike，您还可以将您的 $params 参数“提取（）”到局部变量中，如下所示：

```
// Class will tokenize a string based on params
public static function tokenize(array $params)
{
    extract($params);
    // Validate required elements
    if (!isset($value)) {
        throw new Exception(sprintf('Invalid $value: %s', serialize($params)));
    }

    // Localize optional elements
    $value         = isset($value) ? $value : '';
    $separator     = isset($separator) ? $separator] : '-';
    $urlEncode     = isset($urlEncode) ? $urlEncode : false;
    $allowedChars  = isset($allowedChars) ? $allowedChars : array();
    $charsToRemove = isset($charsToRemove) ? $charsToRemove : array(); 
```

……

相同的实现，但更短。**

# sql - WHERE 子句中的可选参数

> ID：10185638
> 
> 赞同：32
> 
> 时间：2012-04-17T05:32:03.153
> 
> 标签：sql, sql-server, sql-server-2008

让我们假设有一个具有 3 个参数的存储过程。在所有的可能性中，我希望用一个子句来实现这一点，而不会因为使用太多`WHERE`而失控......`() AND () OR ()`

例子：

```
 //Params
@CITY VARCHAR(100) = NULL,
@GENDER VARCHAR(100) = NULL,
@AGE VARCHAR(100) = NULL 
```

我想你可以`IF BEGIN ... END`为每个变量（如果存在）使用它，但这会使代码比预期的要长得多。

下面的这种方法不起作用，因为它太长了（大约有 10 个这样的不同字段，但示例只有 3 个。）而且我不确定它是否甚至直接提取了独特的值......

```
SELECT NAME FROM TABLE 
WHERE (
(CITY=@CITY AND GENDER=@GENDER AND AGE=@AGE)
OR (CITY=@CITY AND GENDER=@GENDER)
OR (GENDER=@GENDER AND AGE=@AGE)
OR (CITY=@CITY AND AGE=@AGE)
OR (CITY=@CITY)
OR (GENDER=@GENDER)
OR (AGE=@AGE)
) 
```

有没有更短更有效的方法来做到这一点？

如果是，则该方法最好也与 JOIN 兼容。

* * *

## 回答 #1

> 赞同：70
> 
> 时间：2012-04-17T05:56:58.333

除了`ISNULL`/`COALESCE`选项，您可以测试参数是否为空：

```
SELECT NAME  
FROM TABLE  
WHERE  
    (@City IS NULL OR City = @City)
AND 
    (@Gender IS NULL OR Gender = @Gender)
AND 
    (@Age IS NULL OR Age = @Age) 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-04-17T05:54:12.910

那这个呢？

```
SELECT
    NAME
FROM TABLE 
WHERE CITY = COALESCE(@CITY, CITY)
    AND GENDER = COALESCE(@GENDER, GENDER)
    AND AGE = COALESCE(@AGE, AGE) 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-04-17T05:53:43.937

尝试这样的事情：

```
SELECT NAME 
FROM TABLE 
WHERE 
    City = IsNull(@City, City) AND
    Gender = IsNull(@Gender, Gender) AND
    Age = IsNull(@Age, Age) 
```

或者：

```
SELECT NAME 
FROM TABLE 
WHERE 
    (City = @City OR @City IS NULL) AND
    (Gender = @Gender OR @Gender IS NULL) AND
    (Age = @Age OR @Age IS NULL) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-17T06:34:31.860

```
SELECT NAME   
FROM TABLE   
WHERE       
  City = case when isnull(@City ,'') = '' then City
                        else @City end
AND      
  Gender = case when isnull(@Gender ,'') = '' then Gender
                        else @Gender end
AND  
  Age = case when isnull(@Age ,0) = 0 then Age
                        else @Age end 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-17T05:45:49.427

可能是这样的：

```
create procedure myProc
    --Params
@CITY VARCHAR(100) = NULL,
@GENDER VARCHAR(100) = NULL,
@AGE VARCHAR(100) = NULL
as

SELECT NAME FROM [TABLE]
WHERE ISNULL(CITY,'')=ISNULL(@CITY,ISNULL(CITY,''))
AND ISNULL(GENDER,'')=ISNULL(@GENDER,ISNULL(GENDER,''))
AND ISNULL(AGE,'')=ISNULL(@AGE,ISNULL(AGE,''))
go 
```

假设 WHERE 子句中的列可以为空，使用 ISNULL 来避免空比较。

# c# - 在 C# 中使用 iTextSharp 读取 pdf 内容

> ID：10185643
> 
> 赞同：5
> 
> 时间：2012-04-17T05:32:31.113
> 
> 标签：c#, pdf, itextsharp

我使用此代码使用 iTextSharp 阅读 pdf 内容。当内容是英语时它工作正常，但当内容是波斯语或阿拉伯语时它不起作用
结果是这样的：
[这](http://dl.dropbox.com/u/54490657/Stackoverflow/FoundationsOfProgramming-Persian.pdf)是用于测试的示例非英语 PDF。

> ÙŽÙ›Ù†Ø§ ÙÙ"Ø¨Ù~Ø·Ø« ÛŒØ¿ÛŒÙ›Ù~ Ø²Ø¾Ø§ ÙÙ›ÙØÙ" Ù‚Ù›Ù…Ø ÛŒÙ"Ø¨Ù•Ø³ © Karl Seguin foppersian.codeplex。 com www.codebetter.com 1 1 ÙÙ”Ø¨Ù~Ø·Ø« ÙŽÙ›Ù†Ø§ ÛŒØ¿ÛŒÙ›Ù~
> 
> ```
> Ù‡Ù…Ø§Ù†Ø±Ø¨ Ù„ÙˆØµØ§ ÛŒØ³ÛŒÙˆÙ†  Ù…Ø±Ù† Ø¯ÛŒÙ„ÙˆØª Ø±ØªÙ‡Ø¨ Ø±Ø§Ø²ÙØ§ 
> ```

解决办法是什么 ？

```
 public string ReadPdfFile(string fileName)
        {
            StringBuilder text = new StringBuilder();

            if (File.Exists(fileName))
            {
                PdfReader pdfReader = new PdfReader(fileName);

                for (int page = 1; page <= pdfReader.NumberOfPages; page++)
                {
                    ITextExtractionStrategy strategy = new SimpleTextExtractionStrategy();
                    string currentText = PdfTextExtractor.GetTextFromPage(pdfReader, page, strategy);

                    currentText = Encoding.UTF8.GetString(Encoding.Convert(Encoding.Default, Encoding.UTF8, Encoding.UTF8.GetBytes(currentText)));
                    text.Append(currentText);
                    pdfReader.Close();
                }
            }
            return text.ToString();
        } 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-17T13:07:30.187

在 .Net 中，一旦你有了一个字符串，**你就有了一个字符串**，而且它**始终**是 Unicode 。实际的内存实现是 UTF-16，但这并不重要。永远永远不要将字符串分解为字节并尝试将其重新解释为不同的编码并将其作为字符串拍回去，因为这没有意义并且几乎总是会失败。

你的问题是这一行：

```
currentText = Encoding.UTF8.GetString(Encoding.Convert(Encoding.Default, Encoding.UTF8, Encoding.UTF8.GetBytes(currentText))); 
```

我将把它分成几行来说明：

```
byte[] bytes = Encoding.UTF8.GetBytes("ی"); //bytes now holds 0xDB8C
byte[] converted = Encoding.Convert(Encoding.Default, Encoding.UTF8, bytes);//converted now holds 0xC39BC592
string final = Encoding.UTF8.GetString(converted);//final now holds ÛŒ 
```

该代码将混淆 127 ASCII 障碍之上的任何内容。放下重新编码线，你应该会很好。

旁注，完全有可能创建一个字符串的任何东西都不正确，这实际上并不少见。但是你需要在它变成,级别***之前解决这个问题。***`string``byte`

**编辑**

代码应该与上面的代码完全相同，只是应该删除一行。此外，无论您使用什么来显示文本，请确保它支持 Unicode。另外，正如@kuujinbo 所说，请确保您使用的是最新版本的 iTextSharp。我用 5.2.0.0 对此进行了测试。

```
 public string ReadPdfFile(string fileName) {
        StringBuilder text = new StringBuilder();

        if (File.Exists(fileName)) {
            PdfReader pdfReader = new PdfReader(fileName);

            for (int page = 1; page <= pdfReader.NumberOfPages; page++) {
                ITextExtractionStrategy strategy = new SimpleTextExtractionStrategy();
                string currentText = PdfTextExtractor.GetTextFromPage(pdfReader, page, strategy);

                text.Append(currentText);
            }
            pdfReader.Close();
        }
        return text.ToString();
    } 
```

**编辑 2**

上面的代码修复了编码问题，但没有修复字符串本身的顺序。不幸的是，这个问题似乎在 PDF 级别本身。

> 因此，在这种从右到左的书写系统中显示文本需要单独定位每个字形（这既繁琐又昂贵），或者用显示字符串表示文本（参见 9.2，“字体的组织和使用”），其字符代码在相反的顺序。

PDF 2008 Spec - 14.8.2.3.3 - 逆序显示字符串

When re-ordering strings such as above, content is (if I understand the spec correctly) supposed to use a "marked content" section, `BMC`. However, the few sample PDFs that I've looked at and generated don't appear to actually do this. I absolutely could be wrong on this part because this is very much not my specialty so you'll have to poke around so more.

# c++ - 在 Singleton 设计模式的情况下，我们如何将析构函数设为私有？

> ID：10185644
> 
> 赞同：0
> 
> 时间：2012-04-17T05:32:34.363
> 
> 标签：c++, singleton, destructor, private

我在多线程环境中创建一个单例类，任何线程都可以删除单例对象。我想保护这个。我在某处阅读以避免这个问题，我们可以将析构函数设为私有并提供销毁方法..我们该怎么做？示例代码将有所帮助..

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T05:42:35.690

```
class Singleton; // forward declaration

Singleton * s = NULL; // global object available to all threads

// Place this class in a location unavailable to all threads except Main thread
class ManageSingleton
{
    public:
        static void DestroySingleton(Singleton * s)
        {
            delete s;
        }
}

class Singleton
{
    friend class ManageSingleton;
    protected:
        ~Singleton() {}
};

void main()
{
    s = new Singleton;
    while (...)
    {
       // other threads access Singleton object until program is finished 
    }

    // Program is now finished; destroy Singleton object
    ManageSingleton::DestroySingleton(s);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-17T05:48:29.057

线程确实不利于这种设计，特别是如果你想要一个纯单例。你可以像这样可视化它：

```
class t_singleton {
public:
  static t_singleton& Get() {
    /* thread safety is a consideration here: */
    t_auto_ptr<t_singleton>& shared(Shared());
    if (shared.isNull()) {
      shared.setObject(new t_singleton);
    }
    /* and you should manage external references using another container type: */
    return Shared().reference();
  }
  static void DestroyIt() {
    /* thread safety is a consideration here: */
    Shared().destroy();
  }
private:
  static t_auto_ptr<t_singleton>& Shared() {
    static t_auto_ptr<t_singleton> s_Shared;
    return s_Shared;
  }
private:
  t_singleton();
  ~t_singleton();
}; 
```

但这也应该暗示许多带有纯单例的线程危险信号。

如果您真的想扩展它并强制执行纯单例，您将需要适当的引用计数容器——这表明单例在多个方面都不是解决此问题的一个坏解决方案，并且只会增加大量不必要的复杂性。祝你好运！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-17T05:35:20.507

将析构函数设为私有，并提供一个 Destroyer 类，负责销毁和清理 Singleton 的所有内存。它需要成为 Singleton 类的朋友。除此之外，你确定你绝对需要一个单身人士吗？或者这是另一个过度使用的场景？

# sharepoint-2010 - SharePoint 2010：使用 HttpModules 的基于表单的身份验证

> ID：10185648
> 
> 赞同：1
> 
> 时间：2012-04-17T05:32:46.040
> 
> 标签：sharepoint-2010, forms-authentication

我们的网络农场应用程序有一个单点登录身份验证服务器。通过以下两个更改，我们使我们的 Web 应用程序在身份验证服务器上使用单点登录：

1.  在 bin（或 GAC）中添加身份验证模块的 dll。
2.  更改 web.config 以引用该模块：

2.a

```
<authentication mode="Forms">      <forms ..... enableCrossAppRedirects="true" domain="" requireSSL="false">      </forms> 
```

2.b

```
<httpModule><add name="authenticationModule"...../> 
```

现在我们想在这些应用程序之一中使用 SharePoint。并且用户应该能够访问 SP2010 GUI 而无需再次登录。当我尝试在 SharePoint 网站的 web.config 中进行这两项更改时，发生了以下情况：

1.  URL 被重定向到 SSO 服务器的登录页面。
2.  当我提供凭据时，我在屏幕上看到了以下纯文本。500内部服务器错误。
3.  此错误未在任何地方记录，无论是在 SP 日志中还是在 Windows（事件查看器）中。

SP 是否能够使用这种自定义身份验证模块进行身份验证？如果是，需要进行哪些更改？提前致谢。

# android - 带有 MAC 过滤功能的 Android 热点。

> ID：10185651
> 
> 赞同：3
> 
> 时间：2012-04-17T05:33:00.987
> 
> 标签：android

我正在使用一个 Wifi 热点，我喜欢从我的热点中过滤某些设备。最好的方法是通过 MAC 过滤。我使用代码从内核中删除设备

```
try {
                String mac=macfilter.getText().toString();
                proc1 = Runtime.getRuntime().exec("/sbin/iptables -A INPUT -p tcp --dport PORT -m mac ! --mac-source "+mac+" -j DROP");
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } 
```

其中 mac 是我用来存储要从热点中删除的设备的 MAC 地址的字符串。但是代码没有给出响应。谁能帮我找到正确的解决方案

# facebook-graph-api - 这种类型的对象不允许名为“og:video:release_date”的属性？

> ID：10185652
> 
> 赞同：0
> 
> 时间：2012-04-17T05:33:03.883
> 
> 标签：facebook-graph-api, facebook-opengraph, meta-tags

我正在处理的页面会生成以下 Open Graph 标记。使用 Facebook 调试器时出现以下错误（请注意，我在此处更改了实际值）：

无关属性：此类型的对象不允许名为“og:video:release_date”的属性。无关属性：此类型的对象不允许名为“og:video:director”的属性。无关属性：此类型的对象不允许名为“og:video:actor”的属性。无关属性：此类型的对象不允许名为“fb:page_id”的属性。

```
<meta property="og:title" content="Title of the movie" />
<meta property="og:type" content="video.movie" />
<meta property="og:video:release_date" content="2012-03-03" />
<meta property="og:video:director" content="Emmanuel Mouret" />
<meta property="og:video:actor" content="Emmanuel Mouret, Julie Depardieu, Francois Cluzet, Pascale Arbillot" />        
<meta property="og:image" content="http://somesite.com/images/image.jpg" />
<meta property="og:url" content="http://somesite.com/premieres/movie-title" />
<meta property="og:video:url" content="http://somesite.com/videos/trailers/movie-title.mp4" />
<meta property="og:description" content="lorem ipsum [...]" />
<meta property="og:locale" content="en_EN" />
<meta property="og:site_name" content="Some Site" />
<meta property="fb:page_id" content="23342324452342" />
<meta property="fb:admins" content="232323232" /> 
```

我不明白为什么不允许视频属性，我猜一切都正确回显，使用正确的日期格式等等。

另外，Facebook 可以处理的最大图像大小是多少？尽管 JPG 的 url 在那里，但看起来有些图像没有在调试器中呈现，我只能假设它们太大了：2500x4000px？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T17:50:22.947

电影'对象，你有没有添加额外的属性？也许尝试删除这些属性？

# coffeescript - 将js转换为coffeescript

> ID：10185654
> 
> 赞同：0
> 
> 时间：2012-04-17T05:33:15.743
> 
> 标签：coffeescript, datatables

我的问题是如何使用数据表将以下 javascript 转换为 rails 项目的咖啡脚本：

```
$.extend( $.fn.dataTableExt.oStdClasses, {
  "sWrapper": "dataTables_wrapper form-inline"
} ); 
```

...这有效：

```
jQuery ->
  $('#logs').dataTable
    bJQueryUI: true
    sDom: "<'row'<'span6'l><'span6'f>r>t<'row'<'span6'i><'span6'p>>"
    sPaginationType: "full_numbers"
    oLanguage: "sLengthMenu": "_MENU_ records per page" 
```

$.extend javascript 来自 DataTables 网站，需要将 Twitter Bootstrap 与 DataTables 一起使用，我只是不知道如何将其转换为咖啡脚本。

**更新**：对于遇到此问题的任何人，只需使用 gem“jquery-datatables-rails”，它可以轻松地将 DataTables 包含在 Rails 应用程序中，并且它支持 Twitter Bootstrap。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T17:50:19.140

如有疑问，您可以使用[http://js2coffee.org/ 。](http://js2coffee.org/)

这将是显而易见的（大括号是可选的）：

```
$.extend $.fn.dataTableExt.oStdClasses, {
  sWrapper: "dataTables_wrapper form-inline"
} 
```

有些人会这样做，我认为这太过分了，令人困惑：

```
$.extend(
  $.fn.dataTableExt.oStdClasses
  sWrapper: "dataTables_wrapper form-inline"
) 
```

我个人更喜欢从函数调用中消除复杂性：

```
wrapperOptions =
    sWrapper: "dataTables_wrapper form-inline"

jQuery.extend $.fn.dataTableExt.oStdClasses, wrapperOptions 
```

# java - Java中的接口和抽象类有什么区别？

> ID：10185658
> 
> 赞同：-2
> 
> 时间：2012-04-17T05:33:45.120
> 
> 标签：java

> **可能重复：**
> [接口和抽象类有什么区别？](https://stackoverflow.com/questions/1913098/what-is-the-difference-between-an-interface-and-abstract-class)

Java中的接口和抽象类有什么区别？为什么我要使用其中一个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T05:38:01.847

抽象类可以包含实现，但它是一个类，您只能扩展一个类。

一个接口只包含声明而不包含实现，您可以实现任意数量的接口。

如果您不需要实现任何方法，请使用接口。

如果您必须实现一个方法，请使用抽象类，但请考虑让它实现一个接口。这将允许您在无法使用抽象类的情况下使用替代实现，例如由于多重继承的不可能性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T05:36:08.493

嗯，这是一个非常广泛的问题，它们之间有很多区别，不可能在这里讨论所有问题，你可以谷歌它以获得好的答案，但是

从广义上讲，**抽象类**是**部分实现的部分未实现的结构**，但**接口**是**完全未实现的结构**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T06:07:47.810

这是我对两年前写的一些现实生活示例的解释-

[http://karthikjcecs.wordpress.com/2009/01/14/java-interfaces-versus-abstract-class/](http://karthikjcecs.wordpress.com/2009/01/14/java-interfaces-versus-abstract-class/)

希望它可以帮助您更好地理解。

# sql-server-2008 - SQL Server 2008 - 更新永远不会完成

> ID：10185662
> 
> 赞同：0
> 
> 时间：2012-04-17T05:34:17.850
> 
> 标签：sql-server-2008, timeout

我在 SQL Server 2008 R2 的数据库中有这个非常简单的查询：

```
UPDATE  Table1
   SET  Field1  = 'This value'
 WHERE  ID      = '12345' 
```

我尝试执行此查询，但从未获得成功的结果。首先，它执行了很长时间。有一次我执行了这个查询，并在我吃午饭的时候把它留在那里。当我2小时后回来时，它还没有完成。

我需要以编程方式执行此查询。我拥有在那里执行它所需的一切，但现在唯一的问题是它给了我一个“超时”错误消息。我尝试增加我的 CommandTimeOut 但这样做只会让程序保持更长的时间。（由于在 SQL Server 中执行查询确实需要很长时间，请看我前面的场景）

有人可以指点我一个好的解决方案来避免这个问题吗？是的，我正在访问的表有很多记录，比如数千条。这以前从来不是问题，但现在是。:(

提前致谢 ：）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-17T05:45:20.327

听起来您打开了一个事务，该事务锁定了 ID 为 12345 的行。在您提交或回滚该事务之前，该命令将*永远不会*完成。

打开[活动监视器](http://msdn.microsoft.com/en-us/library/ms175518%28v=sql.105%29.aspx)并查看阻止更新的事务。然后找到运行此事务并提交或回滚的未提交的 SSMS 窗口。

有关更多详细信息，请参阅[了解和解决 SQL Server 阻塞问题](http://support.microsoft.com/kb/224453)。有关一般性能故障排除方法，请参阅[等待和队列](http://technet.microsoft.com/en-us/library/cc966413.aspx)。

# c - 如何将文本文件实现为链表？

> ID：10185664
> 
> 赞同：0
> 
> 时间：2012-04-17T05:34:25.807
> 
> 标签：c, compression, huffman-code

我正在尝试做的是霍夫曼算法。该程序的规格之一是用户将创建一个 .txt 文件，其中包含具有相应频率的字符。所以它就像一个字符列表，每个旁边都是该字符的权重。下面将是 that.txt 文件的示例：

H5
J4
K6
S9
L2
N1

我设法做的是读取和显示 .txt 文件。而且我很难将它实现到链接列表中。我已经尝试阅读 fread() fwrite() 和所有其他函数，但我真的无法理解它的要点。非常感谢任何形式的帮助。:D

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T05:46:05.563

尽管您将需要一棵树，但我假设您正在使用`struct`存储，例如

```
struct list {
    char *symbol;
    int prob;
    struct list *next;
}; 
```

因此，如果您已设法读取文件，那么您将拥有字符串、“H5”、“J4”等。您所要做的就是拆分字符串，例如使用[strtok](http://pubs.opengroup.org/onlinepubs/009604599/functions/strtok.html)或类似函数。现在您可以将符号复制到`*symbol`并将[atoi](http://pubs.opengroup.org/onlinepubs/007904875/functions/atoi.html)的概率转换为 an `int`，从而将其写入`prob`.

**编辑：**忘了提，你应该考虑文件的结构，因为“H5”可能不是很好的解析，`strtok`另一方面`strtok`，如果第一个字符总是符号和之后只是计数。

**编辑#2：**也试试[fscanf](http://pubs.opengroup.org/onlinepubs/007904975/functions/scanf.html)（比`strtok`你知道格式容易得多）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T05:58:32.377

你不需要一棵树，你只需要一个结构数组。他应该计算字符的出现次数，并且只能有 26 个 +/-（对于其他国家/地区）字符（假设数字不是“想要的”。所以结构的想法是 goog。但人们可以想象一个长数组或建议的结构数组。

无论如何，如果我们定义 array[0] =frequency_of_As 我们可以很容易地计算字符的出现。

```
char *asUpper = toupper(ch);
frequency_Array [char - 'A'] += 1; 
```

写作只是一个简单的循环

```
up_to = 'Z' - 'A';
for (i = 0, ch = 'A'; i < up_to; i++, ch++){
   fprintf(file, "%d%c", i, ch) 
```

或类似的

如果你想阅读这个文件并且这个文件是严格的，一个简单的循环也应该足够了，我假设我们只有 26 个字母

```
 long counter; char ch;
    for i = 0; i < up_to; i++){
          int how_many = fscanf(file_to_use, "%c%d\n", &counter, &ch);
          assert(ch >= 'A' && ch <= 'Z');
          frequenceArray[ch - 'A'] = counter;
     } 
```

# javascript - Javascript如何同时调整图像大小和剪辑图像？

> ID：10185666
> 
> 赞同：0
> 
> 时间：2012-04-17T05:34:38.823
> 
> 标签：javascript, image, resize

我有一张原始尺寸的图像：374x144。它是一个文件中的 3 张图像。所以我定义了一个 div 标签来获取一张图片：

```
<div style="background-image:url('http://pics.kapihospital.de/ga_cars.5.jpg');position:absolute;height:48px;width:374;background-position: 0px -96px;"></div> 
```

现在我想调整 image/div 标签的大小。但是当我改变高度和属性时，我得到一个改变的剪辑部分而不是一个调整大小的图像。

可以同时裁剪和放大图像吗？新尺寸应该在 179x23 左右

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T05:54:29.630

您应该使用实际的图像标签来调整大小并使用某种包装器来进行剪裁（我使用了 `div`）。

**HTML**

```
<div>
    <img src="http://pics.kapihospital.de/ga_cars.5.jpg" width="179" height="69">
</div>​​​​ 
```

**CSS**

```
DIV {
    width: 179px;
    height: 23px;
    overflow: hidden;
}

IMG {
    position: relative;
    top: -23px;
} 
```

您可以`position: relative`在图像上使用并在`div`使用负`top`属性时将其移动。

# perl - mysql查询的perl json输出

> ID：10185667
> 
> 赞同：2
> 
> 时间：2012-04-17T05:34:45.540
> 
> 标签：perl, json

我正在尝试将 mysql 查询结果输出为 JSON 格式，但很难以我想要的格式输出数组。

我的sql表如下

```
Array1,Type,Somevalue
Record1,Type1,1
Record1,Type2,2
Record1,Type3,3
Record2,Type1,4
Record3,Type1,5
Record3,Type3,6 
```

我的用于检索 mysql 行并解析为 json 的 perl 代码如下

```
use DBD::Mysql;
use JSON::XS;
use IO::File;
use warnings;
use Data::Dumper::Names;
use POSIX;

my $json = JSON::XS->new->ascii->pretty->allow_nonref;

my $datasource = "dbi:mysql:database=$dbname;host=$host;port=$port";
#PERL DBI CONNECT
my $dbh =DBI->connect($datasource, $dbusername, $dbpasswd) || die "Could not connect to database: $DBI::errstr";
#PREPARE THE QUERY
my $query1=qq(select * from table);

my $query_handle1 = $dbh->prepare($query1);

#EXECUTE THE QUERY
$query_handle1->execute();

#my variable
my $i;

my @Types = ("Type1","Type2","Type3");
my @Array1 = ("Record1","Record2","Record3","Record4");
my @sql_query_1_Results;

#LOOP THROUGH RESULTS and store results for later processing
while(my $row = $query_handle1->fetchrow_hashref) {
push @sql_query_1_Results, $row;
}

# create data arrays for record we should get 3 arrays with values
for ($i=0;$i<=$#sql_query_1_Results;$i++)
{
push @{$sql_query_1_Results[$i]->{record}},$sql_query_1_Results[$i]->{Some_Value};
}

foreach my $record(@Array1){
$json = encode_json({ 'name' => $record, 'data'=> \@{$record}  });
push @chart1_data, $json;
}
#DISCONNECT FROM THE DATABASE
$dbh->disconnect();

#JSON OUTPUT
my $chart1_data_json=encode_json( { chart1 => \@chart1_data } );
print $chart1_data_json; 
```

上面的代码会给我下面的数组

```
Record1=[1,2,3]
Record2=[4]
Record3=[5,6] 
```

但我想保持类型的顺序，即以下格式

```
Record1=[1,2,3]
Record2=[4,0,0]
Record3=[5,0,6] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T09:14:52.437

```
#!/usr/bin/perl

use strict ;
use warnings;
use DBI;
use JSON::XS;
use IO::File;
use Data::Dumper::Names;
use POSIX;

my $json = JSON::XS->new->ascii->pretty->allow_nonref;

my ( $dbname , $host , $port , $dbusername , $dbpasswd ) ; # Satisfy strict

my $datasource = "dbi:mysql:database=$dbname;host=$host;port=$port";
#PERL DBI CONNECT
my $dbh =DBI->connect($datasource, $dbusername, $dbpasswd) || die "Could not connect to database: $DBI::errstr";
#PREPARE THE QUERY
my $query1=qq(select * from table);

my $query_handle1 = $dbh->prepare($query1);

#EXECUTE THE QUERY
$query_handle1->execute();

my @Types = ("Type1","Type2","Type3");
my @Array1 = ("Record1","Record2","Record3","Record4");

# BEGIN modified data munching
my %result ;
my %Type_Pos ;
@Type_Pos{@Types} = ( 0 .. $#Types ) ; # Map the type to position

while( my $row = $query_handle1->fetchrow_hashref ) {
  if( ! exists $result{$row->{Array1}} ) {
    # Initialize Record with all possible types
    $result{$row->{Array1}} = [ map { 0 } @Types ] ;
  }
  $result{$row->{Array1}}->[$Type_Pos{$row->{Type}}] = $row->{Somevalue} ;
}

my @chart1_data = map { encode_json( { 'name' => $_, 'data'=> $result{$_} } )
                      } sort keys %result ;
# END modified data munching

$dbh->disconnect();

#JSON OUTPUT
my $chart1_data_json=encode_json( { chart1 => \@chart1_data } );
print $chart1_data_json; 
```

这应该按照您的要求进行。
我没有将数据保存在数组中，而是构造了一个哈希，其中记录是键， Somevalue 的数组引用（按类型顺序）是值。

# php - 将动态 javascript 变量添加到脚本

> ID：10185673
> 
> 赞同：1
> 
> 时间：2012-04-17T05:35:24.170
> 
> 标签：php, javascript, jquery, validation

**背景：**我有一个 jQuery 验证脚本，它几乎用于我所有的网页，允许客户端验证（我也做服务器端验证）。除了每个表单的特定“规则”之外，我所有页面的 javascript 都是相同的。

在呈现 HTML 页面之前，每个页面的规则都从我的控制器插入到 php 变量 $jquery_validation 中。这意味着我可以使用适当的客户端验证规则动态生成每个 html 页面和表单。

以下是我的所有 html 页面上当前加载的 javascript 代码：

```
$(document).ready(function(){
      $('#signupform').validate({
           wrapper: 'span class="error"',
           meta: 'validate', 
           highlight: function(element, errorClass, validClass) {
               if (element.type === 'radio') {
                      this.findByName(element.name).addClass(errorClass).removeClass(validClass);
              } else {
                      $(element).addClass(errorClass).removeClass(validClass);
               }

              var error = $(element).parent().find('span.error');       
                error.show();     
            },

             unhighlight: function(element, errorClass, validClass) {
              if (element.type === 'radio') {
                this.findByName(element.name).removeClass(errorClass).addClass(validClass);
              } else {
                $(element).removeClass(errorClass).addClass(validClass);
              }

              $(element).parent().find('span.error').hide(0, function() {
                $(element).parent().find('span.valid').fadeIn(200);
              });
            },
            <?=$jquery_validation?>);});

</script> 
```

最后的 $jquery_validation 变量包含每个页面的“规则”，这些规则明显不同，具体取决于表单。它给出的输出示例是：

```
 "rules":{"username":{"required":true,"remote":{"url":"http:\/\/localhost\/mytest\/public_html\/welcome\/remote","type":"post"}},"onkeyup":false});}); 
```

该功能现在正在运行，一切都很好。

**问题：**有没有办法让我的 .js 文件中包含我的验证 javascript 函数（因此可以对其进行压缩等） - 并且仍然为每个页面动态加载验证的“规则”部分？

如果需要，我可以更改 $jquery_validation 的“输出”和语法 - 但关键是我需要能够动态输出每个页面的规则

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T05:45:20.290

或者你可以这样做：

```
var _pageValidationRules = <?php echo $jquery_validation; ?>

// Code below can be compressed
$(function() {
    $('#signupform').validate({
        wrapper: 'span class="error"',
        meta: 'validate',
        highlight: function(element, errorClass, validClass) {
            // ...
        },
        unhighlight: function(element, errorClass, validClass) {
            // ...
        }
        rules: _pageValidationRules
    });
});​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T05:39:21.287

您可以将javascript代码放在任何`.js`文件中并对其进行压缩，然后它可以对HTML页面中的数据进行操作。两者不必在同一个文件中。如果您的代码在加载时执行，您只需要确保它在页面中定义代码之后首先运行，方法是在代码进入页面之后物理定位它，或者在执行之前等待页面加载代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-17T05:40:16.443

是的，您可以创建一个对象并将其保存到变量中并保存构造函数中的详细信息（不记得它在 JS 中的名称）。

这是我在我的一个脚本中使用的示例。

```
var rmlsSearch = function(searchEndpoint) {

  this.fname = '';
  this.lname = '';
  this.searchEndpoint = searchEndpoint;
  this.resultTemplate = $('#rmls-search-result-template').html();

  //Preform inital search
  this.searchAgent();

  //Bind search function to search button
  $('#rmls-search-button').one('click', $.proxy(this.searchAgent, this));

}; 
```

有了这个定义，你就可以在任何你想要的地方实例化它，并传入你需要的任何细节。

```
var rmlsHandle = rmlsSearch("some endpoint I'm planning on using"); 
```

搜索代理函数，原型化为对象：

```
rmlsSearch.prototype.searchAgent = function(){

  //Get the agent details from the form on the page
  this.getAgentDetails();

  //... Whatever else you'd need to do in the function
}; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-17T05:42:43.463

PHP 需要被浏览器渲染才能执行动态内容。因此，尝试将 PHP 放入外部 js 文件将不会被读取。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-17T05:58:50.547

*   创建一个 PHP 脚本，它将以 JSON 格式返回验证规则。
*   使用脚本标签加载该脚本，它可以是 PHP 文件（以提高性能设置正确的 HTTP 缓存设置，因此它将保留在浏览器缓存中）
*   从外部 JS 静态文件加载验证逻辑

# emacs - Emacs 专家：可以将 f# intellisense 命令行工具与 emacs 连接吗？

> ID：10185677
> 
> 赞同：7
> 
> 时间：2012-04-17T05:35:59.813
> 
> 标签：emacs, f#, intellisense

我喜欢 emacs，最近几年我一直在使用它，当我需要打开一个 ide 时，虽然 Visual Studio 是一个很棒的 ide，但我觉得它很有限，而且对于我的旧电脑来说它很重，我在 f# 上使用 emacs 虽然我觉得 emacs 不太适合静态类型语言，我见过 c# 在 emacs 中有智能感知

[http://code.google.com/p/idebridge/](http://code.google.com/p/idebridge/)

我还没有尝试过，但我认为 f# 的自动完成功能肯定是最简单的，因为 f# 有一个带有 f# 智能感知的交叉包，可以在其他文本编辑器中进行调整

[http://fsxplat.codeplex.com/wikipage?title=fsharp%20intellisense%20tool&referringTitle=Home](http://fsxplat.codeplex.com/wikipage?title=fsharp%20intellisense%20tool&referringTitle=Home)

我对emacs编程了解不多，但应该不会那么复杂，只需要将emacs与脚本连接起来，共享信息。。

注意：我知道比过去尝试在 emacs [http://laurent.le-brun.eu/site/index.php/2011/02/14/61-fsharp-intellisense-in-emacs中实现智能感知-进行中](http://laurent.le-brun.eu/site/index.php/2011/02/14/61-fsharp-intellisense-in-emacs-in-progress)

试过安装，但是这个小程序只能用很老的fsharp电源包，好久没更新了，无法和作者交流，代码很接近，不知道有没有原作者使用的是 fsintellisense ......

我不知道这是否是问这个问题的最佳地点，但我希望比阅读这篇文章的人更多地对 emacs-fsharp 表现出同样的兴趣，并且任何人都知道在 emacs 中实现这一点有多难或有兴趣这样做...谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T13:35:23.000

实际上 fsintellisense 的源代码*是*可用的。

[http://fsxplat.codeplex.com/SourceControl/changeset/view/4d371abd932f](http://fsxplat.codeplex.com/SourceControl/changeset/view/4d371abd932f)

单击 Samples，然后单击 Compiler，然后源位于 fsintellisense 下。我认为这不能完全回答您的问题，但这似乎信息太多，无法发表评论。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-08T13:44:39.407

这现已实现，可在[https://github.com/fsharp/fsharpbinding/tree/master/emacs获得](https://github.com/fsharp/fsharpbinding/tree/master/emacs)

# ruby-on-rails - rails route--未定义的方法

> ID：10185683
> 
> 赞同：0
> 
> 时间：2012-04-17T05:36:43.617
> 
> 标签：ruby-on-rails, routes

我有一个模型叫做“新手”。routes.rb 文件如下所示：

```
 Myapp::Application.routes.draw do
  resources :newbies

  root to: 'static_pages#home'
  match '/about',   to: 'static_pages#about' 
```

控制器就像：

```
 class NewbiesController < ApplicationController

    def show
      @newbie = Newbie.find(params[:id])
    end
    ......
  end 
```

当我写测试时：

```
require 'spec_helper'

describe "Newbie pages" do
  subject { page }
  describe "profile page" do
    let(:newbie) { FactoryGirl.create(:newbie) }
    before { visit newbie_path(newbie)}

    it { should have_selector('h1',    text: newbie.name) }
    it { should have_selector('title', text: newbie.name) }
  end
end 
```

它总是失败 说：

```
 1) Newbie pages profile page 
 Failure/Error: before { visit newbie_path(newbie)}
 NoMethodError:
   undefined method `newbie_path' for #       <RSpec::Core::ExampleGroup::Nested_2::Nested_2:0x007f97f7f33068>
 # ./spec/requests/newbie_pages_spec.rb:16:in `block (3 levels) in <top (required)>'

 2) Newbie pages profile page 
 Failure/Error: before { visit newbie_path(newbie)}
 NoMethodError:undefined method `newbie_path' for 
```

# 

我认为资源：新手会创建像 newbie_path 这样的辅助方法，但为什么它说未定义的方法？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T06:00:34.763

当你运行 rake 路由时

为新手资源生成的路线与您期望的路线完全不同。

```
newbies GET    /newbies(.:format)
{:action=>"index", :controller=>"newbies"}
         POST   /newbies(.:format)
{:action=>"create", :controller=>"newbies"}

new_newby GET    /newbies/new(.:format)
{:action=>"new", :controller=>"newbies"}

 edit_newby GET    /newbies/:id/edit(.:format)
{:action=>"edit", :controller=>"newbies"}

newby GET    /newbies/:id(.:format)
{:action=>"show", :controller=>"newbies"}
 PUT    /newbies/:id(.:format)
{:action=>"update", :controller=>"newbies"}

DELETE /newbies/:id(.:format)
{:action=>"destroy", :controller=>"newbies"} 
```

所以你应该使用

```
newby_path(newbie) 
```

# tfs - 我可以连接到团队基础项目，但无法从源代码管理加载，因为项目文件夹不存在

> ID：10185684
> 
> 赞同：1
> 
> 时间：2012-04-17T05:36:55.883
> 
> 标签：tfs

所以，我之前搞砸了。我试图将报告服务安装到 TFS 中（对于单个服务器，我需要删除现有的 TFS 配置并使用报告重新创建它）。我没有注意到我无法使用客户端操作系统安装报告服务，所以我回到了我开始计算的地方 - 有点。

在我删除配置之前，我使用了 TFS Backup Power Tool (http://visualstudiogallery.msdn.microsoft.com/c255a1e4-04ba-4f68-8f4e-cd473d6b971f) 来备份我的项目（就像我经常使用的那样） ，所以我有一系列备份可供提取。但是，我很难将我的项目恢复到 TFS。

最初，我配置了 TFS，运行恢复工具并从备份中放回所有数据库，但这不起作用，因为我无法在 TFS 管理控制台中查看集合，因此无法访问我的项目。相反，我在 TFS 管理控制台中创建了一个新集合，在 Visual Studio 中创建了一个新的团队项目，并尝试将文件从我的旧项目复制到新项目中。

我可以在那里看到我的旧团队项目，但如果我尝试从中加载解决方案，则会收到错误消息：

> TF10175: 团队项目文件夹 $/Stuff 不存在。请联系您的 Team Foundation Server 管理员并要求创建它。

但是，如果不简单地创建一个新项目，将其映射到本地，然后我将再次没有我的文件，直到我重新复制它们，我就找不到任何特定的方法来创建该文件夹。现在，我可以做到这一点，并且与我的旧团队项目没有任何联系，除了我还希望我的所有工作项目从它到我的新项目中。

这是我的问题 - 我希望能够将一切恢复到这次考虑不周的升级之前的状态。我想在 TFS 源代码控制中查看我的团队项目并加载它，并且能够访问我的所有工作项。

现在，我可以将我的整个项目复制到新的团队项目中，我在这方面做得很好，但这并没有给我我的工作项。我尝试使用 TFS 集成工具 (http://tfsintegration.codeplex.com/) 将工作项从一个项目复制到另一个项目，但除非我在 Visual Studio 中连接它，否则它无法看到旧的团队项目。如果它在 VS 中打开，我无法执行该操作，因为“该进程无法访问该文件，因为它正在被另一个进程使用。” 当我关闭 VS 时，我的旧团队项目消失在源代码管理中，并且集成工具再也看不到它。

因此，这似乎是我的两个选择：

1）任何人都可以分享一些关于如何从源代码管理加载我的旧团队项目的见解（当前未绑定，但是当我绑定它时，我得到 $/Stuff 不存在错误）所以我可以访问所有文件+工作项?

或者

2) 任何人都可以分享一些关于如何将工作项从旧项目移动到新项目的见解吗？而且我对使用 Excel 获取基本信息的方法不感兴趣——我需要那里的所有链接，而那些显然不映射到 Excel 的链接。

感谢您的任何帮助，您可以提供！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T12:08:11.377

所以，从来没有得到任何回应——不过没关系。这是我在此期间所做的，现在终于附加了一个集合，来自旧数据库的备份（通过 TFS Backup Powertool 保存）和我所有的工作项目。

我在 TFS 管理控制台中重新创建了与以前的集合同名的集合，然后再次在 Visual Studio 中创建了一个团队项目，但使用了新名称。然后，我只将我想要的项目备份从 TFS Backup Powertool（不包括 TFS 配置数据库或集合数据库）恢复到其原始名称（实际上没有选择那个）。

在 Visual Studio 中，我连接到 Visual Studio 不同实例中的新项目和原始项目（原始项目位于源代码管理中）。我手动将我的每个工作项从旧项目复制到新项目（主要是因为我为我的客户保留项目历史非常重要——因此无法使用 Excel 导出/导入）。这涵盖了工作项目。接下来我需要源代码，但这很简单，只需将本地文件复制到新映射的新项目路径中，然后将它们添加到源代码控制资源管理器中。我终于检查了一切，直到今天都很好。

我在 Visual Studio 中连接到 TFS 并收到 TF30046 错误（本质上 InstanceID 与预期不匹配）。显然，如果您在备份之间更改 TFS 的配置，Visual Studio/TFS（不确定是哪个）将为您的数据库创建一个新的 InstanceID。看看[http://msdn.microsoft.com/en-us/library/bb909690(v=vs.90).aspx](http://msdn.microsoft.com/en-us/library/bb909690%28v=vs.90%29.aspx)有关如何更改此 InstanceID 的信息。但是，与该文档中的步骤不同，我没有 TFSBuild、TFSIntegration 或 TFSVersionControl。重新安装 TFS2010 后一个小时后，我仍然没有它们。没关系 - 在 SQL Management Studio 中的“属性”中查找包含所需新项目的数据库，在“扩展属性”下，您会找到您正在寻找的 InstanceID。复制 Visual Studio 给出的值作为预期值（包括破折号 - 即使我的原始值没有它们），好的，在 Visual Studio 上重新连接，项目将像雨一样加载。

# android - 如何在 SDCard 上保存 HTML 页面

> ID：10185689
> 
> 赞同：2
> 
> 时间：2012-04-17T05:37:29.153
> 
> 标签：android, android-sdcard

我使用 a显示了一个`HTML`页面，并创建了一个菜单来保存该页面，但我不知道如何将该页面保存在设备内存中或设备内存中，以便我们可以保留它以备将来使用。`WebView``URL``HTML``SDCard`

任何人都可以告诉我如何做到这一点，即使我已经应用了一些逻辑但无法做到这一点。任何人都可以为此发布一些代码，或者如果任何机构有相关示例，请发布。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T05:44:48.297

您可以使用[此链接](http://www.devahead.com/blog/2012/01/saving-the-android-webview-cache-on-the-sd-card/)将 webview 缓存保存到 SD 卡

然后在 webview 的属性中设置如下：

```
webView.getSettings().setCacheMode(WebSettings.LOAD_CACHE_ELSE_NETWORK); 
```

# model-view-controller - 在 Umbraco 5 中获取无限常见问题解答的输入

> ID：10185694
> 
> 赞同：1
> 
> 时间：2012-04-17T05:37:39.797
> 
> 标签：model-view-controller, umbraco

我的问题是我想从管理面板在我的页面中获取常见问题解答，并且用户可以输入任意数量的内容。我们曾经在 4.7 中使用用户控件包装器来实现它（将数据表从 Umbraco 输入 XML 填充到数据表，然后将数据表与网格绑定，反之亦然）。

我应该如何在 Umbraco 5 中做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T07:36:15.637

事实证明，目前没有办法做到这一点，:( 但有一种方法可以解决，您可以创建具有特定属性的文档子页面并将它们加载到您的 cshtml 中，即

常问问题

> 常见
> 问题 1常见问题 2 常见问题 3
> 常见问题
> 4

子页面有两个字段，即问题和答案。
这不是最佳解决方案，但它是一种解决方法，并且在某些情况下会起作用。

# ios - iPhone 应用程序中的拼写检查器

> ID：10185699
> 
> 赞同：-2
> 
> 时间：2012-04-17T05:38:41.027
> 
> 标签：ios, ios4

我正在开发消息传递应用程序，所以为了发送消息，我使用 textField 进行输入。我想用这个实现拼写检查，我的意思是每当用户输入任何文本时，它应该检查拼写是正确还是错误？如果您有任何想法，请与我分享给我一些指导。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T05:52:26.880

选择您在界面生成器中输入文本的文本字段。打开检查器窗口，切换到属性选项卡，然后在 textinput 特征中将更正的值设置为 yes。

# android - 我发现当网络连接很慢时，我的Android应用程序被强制关闭

> ID：10185701
> 
> 赞同：-6
> 
> 时间：2012-04-17T05:38:50.173
> 
> 标签：android

我发现当网络连接很慢时，我的Android应用程序被强制关闭。

我正在使用以下代码检查互联网连接

```
 public  boolean isNetworkAvailable(Context context) 
        {
            try
            {           
                ConnectivityManager cm =
                    (ConnectivityManager)context.getSystemService(Context.CONNECTIVITY_SERVICE);
                 NetworkInfo netInfo = cm.getActiveNetworkInfo();       
                Log.v("Test--",""+netInfo.isAvailable());
                if ( netInfo != null && netInfo.isConnectedOrConnecting()&& netInfo.isAvailable()) {
                    return true;
                }
                return false;
            }
            catch (Exception ex)
         {    
                return false;
            }

        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T06:21:49.573

只有在使用它之后才检查是否`netinfo`为 null，并且您可能会收到 NullPointerException：

```
Log.v("Test--",""+netInfo.isAvailable()); // << here
if ( netInfo != null && netInfo.isConnectedOrConnecting()&& netInfo.isAvailable()) { 
    return true; 
} 
```

# c - 字符指针分段错误

> ID：10185705
> 
> 赞同：1
> 
> 时间：2012-04-17T05:39:03.553
> 
> 标签：c, arrays, string, pointers

好的，这是正在发生的事情的要点：

我将一个字符数组传递给`(char[x])`一个函数，其参数被定义为一个字符指针`(char *)`。一旦在函数内部，我分配了另一个字符指针（这是我拥有的结构的一部分）。将传入参数分配给结构的字符指针后，我会立即遇到分段错误；像这样。

```
temp->name = (char*)malloc(sizeof(char));
temp->name = name; 
```

这就是我之前使用该功能的方式：

```
char *name = "HEY";
Function(name); 
```

以下是我在错误中使用它的方式：

```
char name[3] = "HEY";
Function(name); 
```

与上面相同的语句，它工作正常。通过将名称更改为常量“嘿”，使用相同的输入，我确保它不是其他任何东西，一切都很顺利。

如果有人能想到一个原因，我将非常感谢您的帮助。谢谢！

**这是完整的功能：**

*   openList 是指向结构链表开头的指针
*   tempOpen 是一个临时指针，我们可以利用它来搜索列表，而不改变 openList 的位置
*   findOpenSetSID/findItem -> 通过 SID/key 在链表中查找结构
*   answerOpen/answerItem -> 1 == 第一个节点，2 == 任何其他节点，0 = 未找到

**以下是所涉及结构的简要摘要。** 开放结构是指向另一个结构的指针的链表（称为集合结构） 集合结构是名称、sid 和项结构的链表 项结构是数据和键的链表

```
Error_t WRITE(Sid_t sid, char *key, char *data){

 Open_p_t tempOpen = openList;      //setting a pointer to a struct 
 int answerOpen = findOpenSetSID(sid, &tempOpen);   
 if(answerOpen > 0){
    Set_p_t targetNode;             
    if(answerOpen == 1){
        targetNode = tempOpen->file;        
    }
    else{
        targetNode= tempOpen->next->file;   
    }
    Item_p_t tempItem = targetNode->items;      
    int answerItem = findItem(key, &tempItem);  
    Item_p_t targetItem;                
    targetItem = (Item_p_t)malloc(sizeof(Item_t));
    if(answerItem > 0){
        if(answerItem == 1){
            targetItem = targetNode->items;
        }
        else{
            targetItem = targetNode->items->next;
        }
        targetItem->data = data;        
    }
    else{
        **targetItem->data = data;**      <<<The problem line.
                                                      basically I am just adding   
                                                      items to my sets. But this line 
                                                      freaks out when the input changes 
                                                      from char* to char[]
        targetItem->key = key;

        targetItem->next = targetNode->items;
        targetNode->items = targetItem;
    }
    return 0;
}
return 1;
} 
```

**这是输入段：**

`char key[32], data[64]; // reads in data using fscanf(fd, "%s %s", key data) then calls WRITE(setId, key, data);`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T05:48:31.667

首先，这两行：

```
temp->name = (char*)malloc(sizeof(char));
temp->name = name; 
```

顶行是无用的，会导致内存泄漏。

其次，这两行：

```
char *name = "HEY";
char name[3] = "HEY"; 
```

接近但不相同。第一个结果`name`指向一个 4 字节的数据块，其中包含字符串`"HEY"`和结尾的空终止符（值`0`或`'\0'`）。第二个结果`name`指向一个 3 字节的内存块，其中包含字节`"HEY"`且没有空终止符。

如果您的函数假定它正在获取一个以 null 结尾的字符串（很可能），那么第二个变体可能会导致段错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T06:30:54.407

所以让我们从头开始。您从文件中读取字符串的键、数据对。您按照阅读它们的顺序构建这些对的链接列表。然后呢？

```
/*
compile with:
gcc -std=c89 -pedantic -Wall -O2 -o so_10185705 so_10185705.c
test with:
valgrind ./so_10185705
*/
#include <stdlib.h>
#include <string.h>
#include <stdio.h>

struct node_t {
  char key[32];
  char value[64];
  struct node_t *next;
};

static void print_list(const struct node_t *curr)
{
  while (curr) {
    printf("%s, %s\n", curr->key, curr->value);
    curr = curr->next;
  }
}

static void free_list(struct node_t **currp)
{
  struct node_t *curr = *currp;
  *currp = NULL; /* don't leave dangling pointers */
  while (curr) {
    struct node_t *next = curr->next;
    curr->next = NULL;
    free((void *)curr);
    curr = next;
  }
}

/* O(n) but useful */
static const struct node_t *
find_in_list(const struct node_t *curr, const char *key)
{
  while (curr) {
    if (!strncmp(curr->key, key, sizeof(curr->key)))
      return curr;
    curr = curr->next;
  }
  return NULL;
}

/* Same as find_in_list but less useful */
static int is_in_list(const struct node_t *curr, const char *key)
{
  while (curr) {
    if (!strncmp(curr->key, key, sizeof(curr->key)))
      return 1;
    curr = curr->next;
  }
  return 0;
}

int main()
{
  struct node_t *head = NULL;
  FILE *f = fopen("foo", "r");
  if (!f) exit(1);
  while (!feof(f)) {
    struct node_t *new_node = malloc(sizeof(struct node_t));
    fscanf(f, "%s %s", new_node->key, new_node->value);
    new_node->next = head;
    head = new_node;
  }
  fclose(f);
  print_list(head);
  const struct node_t *node = find_in_list(head, "abcd2");
  if (node) {
    printf("found! key = %s, value = %s\n", node->key, node->value);
  } else {
    printf("not found!\n");
  }
  if (is_in_list(head, "abcd3")) {
    printf("found key in list but now I don't know the value associated with this key.\n");
  } else {
    printf("not found!\n");
  }
  free_list(&head);
  return 0;
}

/* explanation of bugs in OP's code */

struct node_t_2 {
  char *key;
  char *value;
  struct node_t_2 *next;
};

void build_list(FILE *f, struct node_t_2 *curr)
{
  while (!feof(f)) {
    /*
    These variable are allocated on the stack.
    Their lifetime is limited to the current scope.
    At the closing curly brace of the block in which they are declared,
    they die, the information in them is lost and pointer to them become
    invalid garbage.
    */
    key char[32];
    value char[64];
    /*
    Of course, you can only read keys up to 31 bytes long and values up to 63 bytes long.
    Because you need an extra byte for the string's NUL terminator.
    fscanf puts that NUL terminator for you.
    If it didn't, you would not be able to use the data:
     you would not know the lenth of the string.
    If you need 32-byte long keys, declare the variable key to be 33 bytes long.
    */
    fscanf(f, "%s %s", key, value);
    /* You can use key and value here */
    struct node_t_2 bad_new_node;
    /*
    You cannot add bad_new_node to the list, because as soon as you
    reach '}' it will die.
    You need a place for the node that will not disappear
     (be reused on the next iteration of the loop).
    So it must be on the heap.
    How many bytes do you need for the node? Enough to hold the three pointers:
     12 bytes on 32bit, 24 bytes on 64bit.
    The compiler knows how many bytes a struct needs.
    */
    struct node_t_2 *new_node = malloc(sizeof(struct node_t_2));
    /*
    You can add new_node to the list, because it is on the heap and will
     exist until either passed to free() or the process (program) exits.
    */
    new_node->key = key;
    new_node->value = value;
    /*
    That was a bug, because we stored pointers to garbage.
    Now new_node has a pointer to a place that will cease to exist
    as soon as we reach '}'.
    */
    new_node->key = strdup(key);
    new_node->value = strdup(value);
    /*
    strdup is a standard function that can be implemented like this:
    char * strdup(const char *s)
    {
      int len = strlen(s)
      char *p = malloc(len);
      memcpy(p, s, len);
      return p;
    }
    Now new_node has pointers to memory on the heap that will continue to
    exist until passed to free or the process terminates.
    */
    new_node->next = curr;
    curr = new_node;
    /*
    At the next line, memory for key and value is disappears and
     is re-used if we re-enter the loop.
    */
  }
}

/*
If your list nodes have pointers instead of arrays, you need to free
the strings pointed to by those pointers manually, becuause freeing
the list node wont free stuff it points to.
*/
free_list(struct node_t_2 **currp)
{
  struct node_t_2 *curr = *currp;
  *currp = NULL;
  while (curr) {
    struct node_t_2 *next = curr->next;
    free((void *)curr->key);
    curr->key = NULL;
    free((void *)curr->value);
    curr->value = NULL;
    curr->next = NULL;
    free((void *)curr);
    curr = next;
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T06:05:54.413

从片段中不确定如何`temp->name`声明，但问题可能就在这里；

```
 name = (char*)malloc(sizeof(char)); 
```

由于 char 的大小只有一个字节，并且根据您要存储的内容，您需要一个完整指针（4 或 8 个字节）的空间，或者如果您希望将内容复制到分配的空间中，则需要一个字符序列；

所以

```
 name = (char*)malloc(sizeof(char *)); 
```

或者

```
 name = (char*)malloc(sizeof(char) * 80 ); // for 80 bytes char array 
```

# expect - 期望：如何保持所有输出？

> ID：10185709
> 
> 赞同：0
> 
> 时间：2012-04-17T05:39:22.683
> 
> 标签：expect

背景：当本地用户名与git用户名不同时，即使有~/.netrc，git也会坚持要求输入密码（可以回车，然后使用netrc，但这个回车是必须的）。

问题：我需要执行 git pull 将密码传递给 git，但我想查看 git 对 stdout 的回复（可能稍后重定向）。我试过

```
#!/usr/bin/expect -f
spawn /usr/bin/git $argv
expect Password:
send "secret" 
```

它似乎工作，但我没有看到 git 输出。

我试过简单

```
puts "$expect_out(buffer)" 
```

和花哨的

```
while (1) {
  expect {
    eof  {break}
    -re ".*"  {puts "$expect_out(buffer)"}
  }
} 
```

甚至更[高级](https://stackoverflow.com/questions/7105629/expect-how-to-print-every-output-of-a-spawned-process-to-the-user)

```
while (1) {
  expect {
    -re "(\[^\n]*\)\n" { send_user $expect_out(buffer) }
    eof  {break}
  }
} 
```

更简单一点

```
while (1) {
  expect {
    "\n" { send_user $expect_out(buffer) }
    eof  {break}
  }
} 
```

并且都不打印 git 输出。

PS。在这种特定情况下，ssh 不是一个选项，请不要浪费时间谈论它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T09:19:34.773

输入密码后，您需要“回车”：`send "secret\r"`

# ios - iOS 引用插座集合

> ID：10185711
> 
> 赞同：1
> 
> 时间：2012-04-17T05:39:37.220
> 
> 标签：ios, outlet

我创建了一个新的长按手势，将其链接到具有相应功能的动作，但它没有引用插座集合，因此不会触发。

看起来很愚蠢，但是如何在 Xcode 4.3 中添加引用插座集合？

# c# - 从 C# 中的 Resources 文件夹获取许可证文件

> ID：10185716
> 
> 赞同：0
> 
> 时间：2012-04-17T05:39:57.483
> 
> 标签：c#, resources, relative-path, license-key

我有一个需要在运行时访问的许可证文件。我已将许可证文件添加到资源文件夹。我需要在运行时调用一个方法来查找许可证文件。

```
test.CheckLicenseFile("PathOflicenseFile"); 
```

我想知道如何在运行时获得这条路径？另外请告诉我应该为这个许可证文件设置哪些属性，即内容、嵌入式资源等，以及是否复制到输出。请注意，我的项目是 Windows 控件库（用户控件）类型，即它创建一个 .dll 文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T05:45:13.700

您可以使用：

```
Properties.Resources.PathOflicenseFile; 
```

如果将其添加到资源中。或者更准确地说，你可以这样做：

```
test.CheckLicenseFile(Properties.Resources.PathOflicenseFile); 
```

编辑：

对于您的第二部分，如果要嵌入许可证文件，则无需将其复制到输出。复制到输出对于 dll 来说是没有意义的（除非你真的想修改 dll 之外的许可文件）

编辑：正如我现在更了解您的问题，没有办法在资源文件的文件系统中获取其原始路径。您可以做的一件事是嵌入资源文件，然后根据对临时文件夹的请求将其提取到某个位置，然后找到您的`check`函数的路径。

# .htaccess - 内部服务器错误 - htaccess

> ID：10185717
> 
> 赞同：86
> 
> 时间：2012-04-17T05:40:10.760
> 
> 标签：.htaccess, wamp

我有一个 htaccess 文件，它可以在主机上完美运行，但是当我把它放在本地时，它显示了这个错误：

> 内部服务器错误
> 
> 服务器遇到内部错误或配置错误，无法完成您的请求。
> 
> 请联系服务器管理员 admin@localhost 并告知他们错误发生的时间，以及您所做的任何可能导致错误的事情。
> 
> 服务器错误日志中可能提供有关此错误的更多信息。

我在错误日志文件中发现了这个警报：

> [2012 年 4 月 17 日星期二 10:02:25] [警报] [客户端 127.0.0.1] D:/wamp/www/jivan/sql/.htaccess: 无效的命令“标题”，可能拼写错误或由未包含在服务器配置

这是我的 htaccess 文件代码：

```
 RewriteEngine On
AddDefaultCharset utf-8
RewriteRule ^([0-9-]+)/keyword_show.html$ keyword_show.php?keyword_id=$1
RewriteRule ^page_(.*).html$  page.php?url=$1
RewriteRule ^([0-9-]+)/(.*)/(.*)/(.*).html$ $2.php?advertisement_cat=$1&id=$3&pagenumber=$4
RewriteRule ^([0-9-]+)/(.*)/(.*).html$ $2.php?advertisement_cat=$1&pagenumber=$3
RewriteRule ^([0-9-]+)/(.*).html$ $2.php?advertisement_cat=$1
# cache images and flash content for one month
<FilesMatch ".(flv|gif|jpg|jpeg|png|ico|swf)$">
Header set Cache-Control "max-age=2592000"
</FilesMatch>

# cache text, css, and javascript files for one month
<FilesMatch ".(js|css|pdf|txt)$">
Header set Cache-Control "max-age=2592000"
</FilesMatch> 
```

我的本地服务器由 wamp 运行，我也启用了重写模块！！！

那么问题是什么？！

* * *

## 回答 #1

> 赞同：129
> 
> 时间：2012-04-17T05:44:37.627

该`Header`指令在`mod_headers`apache 模块中。您需要确保将该模块加载到 apache 服务器中。

* * *

## 回答 #2

> 赞同：104
> 
> 时间：2013-10-22T06:09:54.870

启用 HEADERS 模块的步骤

```
$ cd /etc/apache2/mods-available
$ sudo a2enmod headers
$ /etc/init.d/apache2 restart 
```

* * *

## 回答 #3

> 赞同：35
> 
> 时间：2014-05-20T12:23:17.770

在您的命令行上：

安装 mod_headers

```
sudo a2enmod headers 
```

然后重启apache

```
service apache2 restart 
```

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2012-04-17T05:45:57.757

试试这个：

```
<IfModule mod_headers.c> Header set [your_options] </IfModule> 
```

安装/启用后是否重新启动了 WAMP？

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2014-05-01T21:42:52.080

在 Ubuntu/Debian 机器中，您可以简单地运行以下命令：

```
sudo ln -s /etc/apache2/mods-available/headers.load /etc/apache2/mods-enabled/ 
```

并且应该全部设置......

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-06-11T11:14:20.960

这个答案对我有用

```
<IfModule mod_headers.c> Header set [your_options] </IfModule> 
```

我该怎么做

# actionscript-3 - Actionscript 3.0 - removeChild 不起作用

> ID：10185725
> 
> 赞同：0
> 
> 时间：2012-04-17T05:40:34.253
> 
> 标签：actionscript-3, flash, actionscript, graph, removechild

我正在尝试为每次将 int 推入数组时在图形上显示一个值的图形文档编写基本代码。这是代码-

```
import flash.display.Shape;
import flash.display.MovieClip;
import flash.display.Sprite;
var myShape:Shape = new Shape();
myShape.graphics.lineStyle(2, 0x990000, 2);
var max:Number = 0;
var graph:Array = new Array();
var container:Sprite = new Sprite();
var redrawGraph = setInterval(reDraw,1000);
function reDraw()
    {
        while (container.numChildren)
        {
            container.removeChildAt(0);
        }
        graph.push(randomNum());
        graph.reverse();
        for (var ints in graph)
        {
        if (graph[ints] > max)
        {
            max = graph[ints];
        }
    }
for (var i:Number = 0; i < graph.length-1; i++)
{
    myShape.graphics.moveTo(550-i*50, (max – graph[i])*20);
    myShape.graphics.lineTo(550-(i+1)*50, (max – graph[i+1])*20);
    container.addChild(myShape);
}
this.addChild(container);
graph.reverse();
}

function randomNum():int
{

return Math.floor(Math.random() * 11);`

} 
```

除了我遇到的问题是我最终的图形与前一个重叠，它应该删除旧图形形状的部分似乎没有工作......我不知道为什么。

任何帮助，将不胜感激。

（对不起格式......它不能正常工作

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T13:06:37.307

您对显示对象层次结构和操作显示对象的对象之间的区别存在误解`graphics`。

您正在使用`setInterval`调用`reDraw`回调。

在`reDraw`回调中，您正在使用`graphics.moveTo`and`graphics.lineTo`来绘制图表。然而，每一帧你都在不断地画到同一个“画布”上，同一个`Sprite`: `myShape`。

不需要相互添加和删除显示对象。在这种情况下，您只需添加一次显示对象。然后在每次刷新时，清除画布并重新开始绘图。

例如，考虑以下情况：

```
 var myShape:Shape;
    var graph:Array;
    var container:Sprite = new Sprite();

    myShape = new Shape();
    graph = new Array();
    var redrawGraph:int = setInterval(reDraw,1000);

    container.addChild(myShape);
    this.addChild(container); 
```

在这里，我正在创建一个形状，将形状放入容器中，然后将容器添加到根显示对象中，差不多就是这样。进而...

```
 private function reDraw():void {
        myShape.graphics.clear();
        myShape.graphics.lineStyle(2, 0x990000, 2);

        graph.unshift(randomNum());

        var i:uint, len:uint = graph.length, max:int = 0;

        for (i=0; i< len; i++) {
            max = Math.max(graph[i], max);
        }

        for (i = 0; i < len; i++)
        {
            myShape.graphics.moveTo(550-i*50, (max - graph[i])*20);
            myShape.graphics.lineTo(550-(i+1)*50, (max - graph[i+1])*20);

        }
    } 
```

然后在这里，请注意我没有删除或添加任何东西到显示树，树已经按照我想要的方式组织起来。我在重绘时所做的只是清除我的形状，然后以我希望它显示的方式重绘它。

有时您确实需要操纵显示层次结构，但这不是其中之一。

有关工作示例，请参见[此处...](http://wonderfl.net/c/llF3/edit)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T05:56:27.257

因此，在创建您的 myShape 对象时为其添加名称，然后通过使用 getChildByName 方法进一步删除此 myShape 可能很有用。

做一些以下更改...

在创建 myShape 时...

```
var myShape:Shape = new Shape();
myShape.name = "myShape";
.
.
.
for (var i:Number = 0; i < graph.length-1; i++) 
{ 
    myShape.graphics.moveTo(550-i*50, (max – graph[i])*20); 
    myShape.graphics.lineTo(550-(i+1)*50, (max – graph[i+1])*20); 
    container.addChild(myShape); 
} 
this.addChild(container); 
```

在删除...

```
while(this.getChildByName("myShape")!= null){
    this.removeChild(this.getChildByName("myShape"));
} 
```

试试这个，这会很好用......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T11:21:06.130

检查此代码...

在这段代码中，我直接在 UIcomponent 中添加了图形，这可以正常工作......

```
<mx:Application xmlns:mx="http://www.adobe.com/2006/mxml" layout="absolute" 
                minWidth="955" minHeight="600" 
                creationComplete="application1_creationCompleteHandler(event)" >
    <mx:Script>
        <![CDATA[
            import flash.display.MovieClip;
            import flash.display.Shape;
            import flash.display.Sprite;

            import mx.core.UIComponent;
            import mx.events.FlexEvent; 

            private var _max:Number = 0; 
            private var _graph:Array = new Array(); 
            private var _container:UIComponent ;

            protected function application1_creationCompleteHandler(event:FlexEvent):void
            {

                _container = new UIComponent();
                this.addChild(_container);
                _container.graphics.lineStyle(2, 0x990000, 2);
                var redrawGraph = setInterval(reDraw,1000);
            }

            private function reDraw() 
            { 
                _graph.push(randomNum()); 
                _graph.reverse();
                _container.graphics.clear();
                _container.graphics.lineStyle(2, 0x990000, 2);
                for (var ints in _graph) 
                { 
                    if (_graph[ints] > _max) 
                    { 
                        _max = _graph[ints]; 
                    } 
                } 

                for (var i:Number = 0; i < _graph.length-1; i++) 
                { 
                    var a:Number = Number(_graph[i]);
                    var b:Number = Number(_graph[i+1]);
                    _container.graphics.moveTo(550-i*50,(_max-a) *20); 
                    _container.graphics.lineTo(550-(i+1)*50,( _max-b)*20);
                } 
                _graph.reverse(); 
            } 

            private function randomNum():int 
            { 
                return Math.floor(Math.random() * 11);
            } 
        ]]>
    </mx:Script>
</mx:Application> 
```

# perl - 用于更改 IP 并保存新文件的 shell 脚本

> ID：10185726
> 
> 赞同：1
> 
> 时间：2012-04-17T05:40:37.067
> 
> 标签：perl, bash, sed, awk

我有一个包含不同 IP 地址的文本文件。我需要编写一个脚本来找到带有IP的行（还有其他行）并将最后一位加1。这应该做50次！

这意味着将有 50 个新文件要保存。我不想使用逻辑转到行号并替换特定字符。

文件名也存在于文件中，应再次增加 1。我正在使用`sed`但无法实现正确的循环和选项。

输入文件是 example1：

```
 'name example101' 
'ip-address  10.255.255.13'
state enabled 
 'ip-address 10.255.253.45' 
'ip-address 10.255.255.13' 
'ip-address 10.0.0.130' 
```

第一个新文件是 example102（最后一个是 example150）：

```
 'name example102' 
'ip-address  10.255.255.14'
state enabled 
 'ip-address 10.255.253.46' 
'ip-address 10.255.255.14' 
'ip-address 10.0.0.131' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T06:01:34.513

要增加 IP，您可以使用此正则表达式：

```
perl -lpe 's/((\d{1,3}\.){3})(\d{1,3})/$1 . ($3 + 1)/eg' FILE 
```

要增加“name example101”，您可以尝试使用类似的表达式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T14:26:40.727

使用忽略特定 ip`?!`

```
perl -lpe 's/((ip-address\s+(?!10\.255\.253\.45)((\d{1,3}\.){3}))(\d{1,3}))/$2.($5 + 1)/eg;s/(example)(\d{3})/$1.($2 + 1)/eg;' FILE 
```

添加 ip`(?!10\.255\.253\.45)`部分忽略

**更新：**添加部分`s/(example)(\d{3})/$1.($2 + 1)/eg;`以增加输入字符串 example101 以使其成为 example102。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T19:00:30.557

此命令行程序会递增除 IP 地址之外的所有数字（包括文件编号）`10.0.0.130`。如果要忽略的地址超过一两个，则此方法将变得笨拙，您应该执行一些操作，例如将所有不可变地址放入文件或`__DATA__`程序部分中。

```
perl -pe "s/(\d+)('\s*)$/($1+1).$2/e unless /\b\Q10.0.0.130\E\b/" ipfile 
```

**输出**

```
 'name example102'
'ip-address  10.255.255.14'
state enabled
 'ip-address 10.255.253.46'
'ip-address 10.255.255.14'
'ip-address 10.0.0.130' 
```

* * *

**编辑**

要为修改添加第二个排除项，此命令还可以保护`0.0.0.0`

```
perl -pe "s/(\d+)('\s*)$/($1+1).$2/e unless /\b\Q10.0.0.130\E|\Q0.0.0.0\E\b/" ipfile 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-17T15:36:01.110

我可以在 Vim 中以交互方式在几秒钟内完成此操作。在 Vim 中，`Ctrl-A`增加光标下的数字。搜索 IP 地址，转到最后一个八位字节，递增。在 register 下的键盘宏中录制`a`，调用 as `@a`，然后按住不放重复 N 次`@@`。

以下是确切的击键：

开始录制：

```
qa 
```

搜索下一个 IPv4 地址的开始：

```
 /\([0-9]\+\.\)\{3\}[0-9]\+[Enter] 
```

在最后一个八位字节之前跳转到点（向前到点 3 次）：

```
 3f. 
```

增量：

```
 Ctrl-A 
```

完成录制：

```
 q 
```

现在，再次运行宏：

```
 @a 
```

重复（按住@键自动重复）：

```
 @@ 
```

如果注意到您编辑了一个您不应该使用`u`多次撤消的 IP，请跳过它，然后从那里开始。

# c# - 从c#到java over socket的Bytearray在从java发送到c#后一直失败

> ID：10185727
> 
> 赞同：0
> 
> 时间：2012-04-17T05:40:46.660
> 
> 标签：c#, java, sockets, tcp

我正在尝试将一个字节数组从 java 发送到 c#，然后将另一个字节数组从 c# 发送到 java

字节数组的流程如下 Java -> c# Java <- c#

我可以让 send java -> c# 正常工作，但是当我尝试 send c# -> 它只是挂起。我已经尝试了几乎所有可以在网上找到的东西，但一直得到相同的结果。如果我将 java 注释掉到 c# 发送，那么 java 和 c# 都可以正常工作，但是一旦我尝试从 java 发送到 c#，java 和 c# 都会坐在各自的读取和发送行。

```
public void test()
{
    //1\. READ
    System.Text.UTF8Encoding enc = new System.Text.UTF8Encoding();
    string input = enc.GetString(ReadNetworkStream(netStream));
    Console.WriteLine(DecryptData(input, ""));

    //2\. SEND
    string output = "This is the c# client!!!";
    sendNetworkStream(output, netStream);
}
private void sendNetworkStream(string infoToSend, NetworkStream netStream)
{
    UTF8Encoding encoding = new UTF8Encoding();
    byte[] byteDataToSend = encoding.GetBytes(infoToSend);
    Console.WriteLine(netStream.CanWrite);
    Console.WriteLine(byteDataToSend.Length);
    netStream.Write(byteDataToSend, 0, byteDataToSend.Length);
    netStream.Flush();
}

private static byte[] ReadNetworkStream(NetworkStream netStream)
{
    byte[] buffer = new byte[1024];
    using (MemoryStream ms = new MemoryStream())
    {
        int read;
        while ((read = netStream.Read(buffer, 0, buffer.Length)) > 0)
        {
            ms.Write(buffer, 0, read);
        }
        return ms.ToArray();
    }
 } 
```

我感谢任何帮助，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T05:48:09.310

我认为问题出在`sendNetworkStream`方法上。您正在刷新流但没有关闭它。在最后使用[.close()](http://msdn.microsoft.com/en-us/library/system.io.stream.close.aspx)方法应该关闭流。另一方面，您的 Java 应用程序正在等待流关闭，因此它“挂起”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T06:09:30.727

您正在使用 上的`Read`方法`NetworkStream`，当没有可用数据时会阻塞。请参阅此处的评论：http: [//msdn.microsoft.com/en-us/library/system.net.sockets.networkstream.read.aspx](http://msdn.microsoft.com/en-us/library/system.net.sockets.networkstream.read.aspx)

> 默认情况下，当没有数据时，Read 会阻塞，但您可以使用 ReadTimeout 属性指定超时（以毫秒为单位）。但是，当它超时时，Read 不会返回 0，而是会引发异常。

您还尝试读取直到流结束，因为 Java 或 .NET 应用程序都没有关闭该流 - 也就是说，您使用相同的流进行读取和写入。

当 Java 程序读取被注释掉时，程序终止并关闭网络流。因此，C# 程序成功地解除了`Read`调用阻塞并成功完成。

但是，当 Java 程序在发送后尝试读取时，网络流保持打开状态，C# 程序也会尝试从中读取。现在两个程序正在尝试读取，并且都阻塞并等待另一个。

通常如何解决这个问题是通过使用某种协议。协议告诉每个程序在各个交换中的每个点*要读取多少数据*，因此它们不会坐在那里等待。有时它是通过使用特殊的魔术字符来完成的，有时是通过首先发送要读取的字节数等来完成的。

如果您不想这样做，您可以：

*   让它`Read`在一段时间后超时（并决定从那里做什么）；和/或
*   使用单独的流从两个客户端读取和写入，但仍要注意每个应用程序阻塞的点。

# assembly - 从一个函数跳转到另一个函数？

> ID：10185729
> 
> 赞同：-1
> 
> 时间：2012-04-17T05:40:54.193
> 
> 标签：assembly, x86

如果我调用一个函数，我可以`jmp`在该函数中使用命令返回到不同函数的一部分吗？也就是说，这段代码是否有效：

```
testfunction PROC
    jmp jumppoint
    ret
testfunction ENDP

main PROC
jumppoint:
    call testfunction
main ENDP
END 
```

如果这是有效的，它应该产生一个无限循环。是/否？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T05:47:26.267

如果你所说的“有效”是指汇编程序会让你这样做，答案是肯定的。它将引入一种无限循环；但是，由于`call`指令每次执行时都会在堆栈上放置额外的信息（返回地址），最终堆栈会溢出，程序会崩溃（如果您在实模式下运行，可能不会）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T05:47:46.273

看起来它是有效的，它会产生一个无限循环，你为什么不运行它，看看你是否正确？

当然堆栈会溢出，因为它是有限的`0xFFFFFFFF` `>= esp` `> 0`

# git - 如何修改对先前提交的更多更改？

> ID：10185731
> 
> 赞同：2
> 
> 时间：2012-04-17T05:41:14.990
> 
> 标签：git

如何在不再次提交的情况下将更多更改添加到 repo 中的最新提交？我需要使用提交后所做的最新更改来更新最后一次提交。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T05:43:14.210

`git commit --amend`

这会将您当前暂存的更改添加到先前的提交中。

如果您已将之前的提交推送到共享存储库，例如 GitHub，那么您可能需要三思而后行。

如果其他人取消了您的更改，修改提交可能会给他们带来合并困难。在这种情况下，最好创建一个新的提交来解决问题。

如果您还没有推送错误的提交，或者如果您在私有存储库中工作并且没有向/从其他任何人推送/拉取更改，那么您无需担心这一点。

# css - 是否有任何技巧可以从另一个对象或规则中设置 css 继承？

> ID：10185737
> 
> 赞同：1
> 
> 时间：2012-04-17T05:42:20.140
> 
> 标签：css

我正在寻找一些技巧来使样式继承自另一个对象/类/id。简单的技巧：使用类，但还有其他方法来指定另一个规则的样式吗？

抱歉解释..我正在寻找类似的东西： `.st1 {font-size:17pt;} .st2 {-moz/ms/webkit-extends: '.st1';}`？

实际上，我并不是真的在寻找它（因为我使用类），只是对它感兴趣。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T05:45:41.450

您不是在寻找技巧，而是在寻找 CSS 扩展库，例如

*   [SASS 库](http://sass-lang.com/)
*   [LESS 库](http://lesscss.org/)

他们并没有完全按照您的意愿提供一种方法，而是提供了更好的方法。像

```
.st1 {font-size:17pt;} 
.st2 {
    .st1;
} 
```

当网站启动时，这些样式声明被编译并优化为一个有效的 CSS 文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T05:45:15.317

CSS 继承依赖于 DOM 结构，因此除非所涉及的元素具有后代/祖先关系，否则 CSS 不提供此类功能。

无论如何，您都可以使用[LessCSS](http://lesscss.org/)之类的库来为属性值实现类似模板的占位符，从而将您的 CSS 变成动态样式表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T06:00:57.350

使用纯 CSS，没有

但如果我理解正确的话：

*   你有一个*X 课*
*   那么您希望*Y**类拥有 X 类*的所有内容以及额外的覆盖/新内容吗？

我认为您可以尝试使用 JavaScript 来查找每个具有*类 Y*的对象并预先添加*类 X*

就像是：

```
//disclaimer: I haven't tested it
var objs=document.getElementsByTagName('*');//getElementsByClassName, not very crossbrowser

for(var i=0,len=objs.length;i<len;i++){
    var temp=objs[i].className;
    if((" "+temp+" ").indexOf(" classY ")==-1){//spaces are important
        objs[i].className="classX "+temp;
    }
} 
```

# django - 模型中的Django两个外键，如何动态更改选项？

> ID：10185741
> 
> 赞同：0
> 
> 时间：2012-04-17T05:42:51.160
> 
> 标签：django, forms, select, options

我在一个表中有两个外键，但是当我添加新记录时，我希望我的外键“Modelo”只显示具有外键“Marca”ID 的那个...我想创建一个动态选择取决于我从第一个 ForeignKey 中选择的...

这是我的代码

```
class Marca(models.Model):
    idmar = models.AutoField(primary_key=True)
    marca=models.CharField(max_length=30)   

class Modelo(models.Model):
    idmod = models.AutoField(primary_key=True)
    idmar=models.ForeignKey(Marca)
    modelo=models.CharField(max_length=30) 
```

在这个模型中，我想从 idmar 获取包含 id 的 idmod

```
class Copiadora(models.Model):
    idcop = models.AutoField(primary_key=True)
    idequipo=models.CharField(max_length=30)
    idmar=models.ForeignKey(Marca)
    idmod=models.ForeignKey(Modelo)
    noserie=models.CharField(max_length=30) 
```

还是我必须使用javascript？还是阿贾克斯？什么是最好的解决方案...

第一篇文章......如果不清楚，请见谅

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T05:46:38.057

[Django 智能选择](https://github.com/digi604/django-smart-selects)将帮助您

# bash - 以“>”开头的 Shell 命令

> ID：10185753
> 
> 赞同：7
> 
> 时间：2012-04-17T05:43:57.377
> 
> 标签：bash, shell

我最近遇到了一个看起来像这样的 shell 命令："> outfile < infile cat"，它在功能上似乎等同于 "cat infile > outfile"。就此而言，一般形式似乎是“> outfile < infile command arg1 ... argN”变为“command arg1 ... argN infile > outfile”。

无论如何，我想知道是否有人可以详细说明领先的“>”如何实现这种效果，以及它是否有任何实际用途。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-17T06:12:59.640

“ [Bash 参考手册”](http://www.gnu.org/software/bash/manual/bashref.html#Redirection)对重定向运算符进行了以下说明：

> 以下重定向操作符可以在简单命令之前或出现在任何地方，也可以在命令之后。

所以下面的命令都是等价的：

```
ls -al > listing.txt
> listing.txt ls -al
ls > listing.txt -al 
```

虽然我猜第一种是最常见的形式。

请注意，重定向的相对*顺序*很重要，因此，例如，如果您将一个文件描述符重定向到另一个文件描述符，则以下内容会有所不同：

```
ls > listing.txt 2>&1   # both stdout and stderr go in to listing.txt

ls 2>&1 > listing.txt   # only stdout goes to listing.txt, because stderr was made
                        #    a copy of stdout before the redirection of stdout 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-17T05:48:32.303

">" 只是将命令的输出重定向到作为下一个参数给出的文件。典型的用途是在命令末尾附加它，但它可以在任何地方。所以：

`> outfile <command>`相当于 `<command> > outfile`。输入重定向也是如此。

请注意，在上面的例子`<command>`中并不是一些奇怪的语法——它只是替换了任意命令。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-17T05:52:12.693

等价的不是：

```
cat infile > outfile 
```

相反，它是

```
cat < infile > outfile 
```

（只是在猫的情况下，`cat infile`与 相同`cat <infile`）

一旦你这样看，原来的命令看起来就更简单了。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-17T18:43:37.580

一注。这是因为你实际上可以写这个

```
< file command 
```

它使 Cat 的无用使用更加不可原谅：

```
cat file | command 
```

也就是说，即使出于某种原因您希望文件在语法上位于命令的左侧，您仍然不需要`cat`!

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-17T05:52:24.913

前导大于号 (>) 用于重定向输出。默认情况下，它将重定向 STDOUT。在这种情况下，STDOUT 是空的，因此会创建一个新的空文件（效果类似于`touch output`）。

您也可以使用这种风格的命令来清空现有文件，即

```
 $ echo FOO >/tmp/foo
    $ ls -l /tmp/foo
    -rw-r--r--  1 flah  wheel  4 Apr 17 01:49 /tmp/foo
    $ > /tmp/foo
    $ ls -l /tmp/foo
    -rw-r--r--  1 flah  wheel  0 Apr 17 01:49 /tmp/foo
    $ 
```

有关更多信息，请参阅 bash 手册页的重定向部分。

# java - Mac OS X 上的剪贴板监控 | 爪哇

> ID：10185754
> 
> 赞同：10
> 
> 时间：2012-04-17T05:44:06.347
> 
> 标签：java, multithreading, macos, awt, clipboard

我在从 Mac OS X 上的系统剪贴板获取数据时遇到了麻烦。我要做的是在每次将新的 [基于文本的] 信息放入其中时收听系统剪贴板并打印剪贴板的内容。

问题：下面的代码在 Windows 7 和 openSUSE Linux 机器上运行良好，但是当我尝试在 Mac OS X 上运行相同的代码时，程序无法打印剪贴板的新内容，直到将焦点放在应用程序上。[在我单击 Dock 上的应用程序图标之前，什么都不会打印...]

我的源代码：

```
import java.awt.Toolkit;  
import java.awt.datatransfer.*;  
import java.io.IOException;  

public class ClipboardListener extends Thread implements ClipboardOwner {

    Clipboard systemClipboard = Toolkit.getDefaultToolkit().getSystemClipboard();  

    public void run(){  
        Transferable selection = systemClipboard.getContents(this);  
        gainOwnership(selection);  
    }  

    public void gainOwnership(Transferable t){ 
        try {this.sleep(100);} 
        catch (InterruptedException e) {e.printStackTrace();}
        systemClipboard.setContents(t, this);  
    }  

    public void lostOwnership(Clipboard clipboard, Transferable contents) {
        try {System.out.println((String) clipboard.getData(DataFlavor.stringFlavor));} 
        catch (UnsupportedFlavorException e) {} 
        catch (IOException e) {}
        gainOwnership(contents);  
    }  
} 
```

* * *

```
public class myApp {

    public static void main(String[] args){
        ClipboardListener listener = new ClipboardListener();
        listener.start();
        while(true){}}

} 
```

我错过了什么/做错了什么？

**[更新]** 我在这里发现了类似的问题：[Java thread go to sleep when not in focus on OSX](https://stackoverflow.com/questions/10039275/java-thread-goes-to-sleep-when-not-in-focus-on-osx) 但是使用命令“java -jar myApp.jar &”对我来说不是一种解决方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-21T12:19:23.477

这似乎是一个开放的错误，请参阅[MACOSX_PORT-511 ClipboardOwner 方法 lostClipboard is not called if app is not focus。](http://java.net/jira/browse/MACOSX_PORT-511)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T10:10:59.360

似乎没有解决这个问题的优雅方法，NSPasteboard 不提供剪贴板所有权概念。[你甚至不能用原生的 Objective C 来解决这个问题。](https://stackoverflow.com/questions/5033266/can-i-receive-a-callback-whenever-an-nspasteboard-is-written-to/10258225#comment38117429_10258225)

唯一的解决方案是定期对剪贴板进行采样。

# objective-c - 从 iOS 在后台发送电子邮件

> ID：10185756
> 
> 赞同：6
> 
> 时间：2012-04-17T05:44:22.540
> 
> 标签：objective-c, ios, email

> **可能重复：**
> [可以发送自动电子邮件吗？](https://stackoverflow.com/questions/7630862/possible-to-send-automated-email)

这个问题在整个 stackoverflow 中以多种变体形式提出，但我找不到一个适用于我或回答我的问题的问题。看起来它应该更简单，但我想要的只是让我的应用程序在后台发送异步电子邮件。没有 GUI，没有用户输入，只是当模型中发生某些事情时，它会通过电子邮件通知我。

在此先感谢，
乔丹

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-17T06:10:01.187

IOS不支持后台发邮件。您必须实现用户交互，并且只有单击发送按钮才能发送邮件。作为替代方案，您应该为此实现 WebService，并且您可以在代码中的任何位置调用它。

需要php：

```
<?php
//-- POST are variables from details.js
$names      = $_POST['names'];
$address1   = $_POST['address1'];
$address2   = $_POST['address2'];
$crust      = $_POST['crust'];
$message1   = $_POST['message'];

//-- clean up the javascript array
$toppings   = str_replace('"','',substr(substr(stripslashes($_POST['toppings']),1),0,-1));
$toppings   = explode(",\n", $toppings);

//-- Where the order will be sent
$to = $address2;
$subject = "your_Order!";
$message = $message1 ;

//-- The headers will let us send HTML code as an email
$headers = "From:  contact@your_domain.com\r\n";
$headers .= "MIME-Version: 1.0\r\n";
$headers .= "Content-Type: text/html; charset=ISO-8859-1\r\n";

//-- if mail gets sent, return true, else return false. This gets handed off the our onload method in details.js
if (mail($to,$subject,$message,$headers))
{
    $response = array('mail' => true);
}
else
{
    $response = array('mail' => false);
}

echo json_encode($response);
?> 
```

# html - 如何通过 CSS 自定义一个 select 元素来实现这种深色风格？

> ID：10185762
> 
> 赞同：10
> 
> 时间：2012-04-17T05:45:02.260
> 
> 标签：html, css

如何创建如下图所示的选择元素？

![在此处输入图像描述](../Images/6ff027a1ff11ed761f898716c5789510.png)

我的代码是

```
<select>
    <option>-- Select City --</optoin>
    <option>Delhi</option>
    <option>Gurgaon</option>
</select> 
```

这在 jQuery 中可用，但我想使用纯 CSS。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-04-17T12:04:10.497

这是一个 CSS 驱动的选择菜单；您可以根据需要对其进行自定义：

```
label.custom-select {
    position: relative;
    display: inline-block;

}

.custom-select select {
    display: inline-block;
    padding: 4px 3px 3px 5px;
    margin: 0;
    font: inherit;
    outline:none; /* remove focus ring from Webkit */
    line-height: 1.2;
    background: #000;
    color:white;
    border:0;
}

/* Select arrow styling */
.custom-select:after {
    content: "▼";
    position: absolute;
    top: 0;
    right: 0;
    bottom: 0;
    font-size: 60%;
    line-height: 30px;
    padding: 0 7px;
    background: #000;
    color: white;
    pointer-events: none;
}

.no-pointer-events .custom-select:after {
    content: none;
}
```

```
<label class="custom-select">
    <select>
        <option>Sushi</option>
        <option>Blue cheese with crackers</option>
        <option>Steak</option>
        <option>Other</option>
    </select>
</label>
```

[JSFiddle](http://jsfiddle.net/TylerH/426wLqmp/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-05-09T12:24:01.187

使用`pointer-events:none;`它将让您单击箭头并激活选择字段，因此该元素的 CSS 看起来像这样。

```
.custom-select:after {
    content: "▼";
    position: absolute;
    top: 0;
    right: 0;
    bottom: 0;
    font-size: 60%;
    line-height: 30px;
    padding: 0 7px;
    background: #000;
    color: white;
    pointer-events:none;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T05:54:34.870

```
option{
  background-image:url(image.png);
  background-repeat: no-repeat;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-17T05:55:51.460

没有 Javascript 就无法自定义您在屏幕截图中看到的选择。

您可以在[此示例](http://jsfiddle.net/2XHm7/)中看到您可以自定义颜色、填充和边框，但不能自定义按钮本身。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-04-17T06:02:22.203

即使您向选择框添加了背景图像，您也无法在右侧隐藏该处理程序。我建议使用这个：http: [//jamielottering.github.com/DropKick/](http://jamielottering.github.com/DropKick/)

您只需稍微修改 CSS 以满足您的需要。

# android - 运行仪器命令时 Android 本机驱动程序 api 错误

> ID：10185770
> 
> 赞同：0
> 
> 时间：2012-04-17T05:45:24.850
> 
> 标签：android, testing

我正在使用 android native driver api 来测试 android native 应用程序。

我遵循提到链接[AndroidMakeAnAppTestable](http://code.google.com/p/nativedriver/wiki/AndroidMakeAnAppTestable)的指南。

但是当我尝试运行检测命令时，它不会在命令行中显示任何错误，但会在 eclipse 中显示。

错误是：

```
04-17 11:13:14.460: D/AndroidRuntime(302): Shutting down VM
04-17 11:13:14.470: W/dalvikvm(302): threadid=3: thread exiting with uncaught exception (group=0x4001b188)
04-17 11:13:14.470: E/AndroidRuntime(302): Uncaught handler: thread main exiting due to uncaught exception
04-17 11:13:14.480: E/AndroidRuntime(302): java.lang.RuntimeException: Unable to instantiate instrumentation ComponentInfo{com.google.android.testing.nativedriver.simplelayouts/com.google.android.testing.nativedriver.server.ServerInstrumentation}: java.lang.ClassNotFoundException: com.google.android.testing.nativedriver.server.ServerInstrumentation in loader dalvik.system.PathClassLoader@44dac250
04-17 11:13:14.480: E/AndroidRuntime(302):  at android.app.ActivityThread.handleBindApplication(ActivityThread.java:3966)
04-17 11:13:14.480: E/AndroidRuntime(302):  at android.app.ActivityThread.access$2900(ActivityThread.java:119)
04-17 11:13:14.480: E/AndroidRuntime(302):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1901)
04-17 11:13:14.480: E/AndroidRuntime(302):  at android.os.Handler.dispatchMessage(Handler.java:99)
04-17 11:13:14.480: E/AndroidRuntime(302):  at android.os.Looper.loop(Looper.java:123)
04-17 11:13:14.480: E/AndroidRuntime(302):  at android.app.ActivityThread.main(ActivityThread.java:4363)
04-17 11:13:14.480: E/AndroidRuntime(302):  at java.lang.reflect.Method.invokeNative(Native Method)
04-17 11:13:14.480: E/AndroidRuntime(302):  at java.lang.reflect.Method.invoke(Method.java:521)
04-17 11:13:14.480: E/AndroidRuntime(302):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:860)
04-17 11:13:14.480: E/AndroidRuntime(302):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:618)
04-17 11:13:14.480: E/AndroidRuntime(302):  at dalvik.system.NativeStart.main(Native Method)
04-17 11:13:14.480: E/AndroidRuntime(302): Caused by: java.lang.ClassNotFoundException: com.google.android.testing.nativedriver.server.ServerInstrumentation in loader dalvik.system.PathClassLoader@44dac250
04-17 11:13:14.480: E/AndroidRuntime(302):  at dalvik.system.PathClassLoader.findClass(PathClassLoader.java:243)
04-17 11:13:14.480: E/AndroidRuntime(302):  at java.lang.ClassLoader.loadClass(ClassLoader.java:573)
04-17 11:13:14.480: E/AndroidRuntime(302):  at java.lang.ClassLoader.loadClass(ClassLoader.java:532)
04-17 11:13:14.480: E/AndroidRuntime(302):  at android.app.ActivityThread.handleBindApplication(ActivityThread.java:3963)
04-17 11:13:14.480: E/AndroidRuntime(302):  ... 10 more
04-17 11:13:14.520: I/dalvikvm(302): threadid=7: reacting to signal 3 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T06:38:59.207

该异常涉及您尝试加载的类的 ClassNotFoundException。

```
ComponentInfo{com.google.android.testing.nativedriver.simplelayouts/com.google.android.testing.nativedriver.server.ServerInstrumentation}: java.lang.ClassNotFoundException: com.google.android.testing.nativedriver.server.ServerInstrumentation in loader 
```

运行时未找到 ServerInstrumentation 类文件。请参考此链接： [Android nativedriver,starting an app with istrumentation](https://stackoverflow.com/questions/9024589/android-nativedriver-starting-an-app-with-istrumentation)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T22:32:09.640

你是通过 Eclipse 启动的吗？右键单击您的 android 项目节点，转到构建路径，转到订购和导出并确保添加了 server-standalone.jar 并“选中”。

# javascript - 如何使用 Backbone.js 实现“突出显示模式”？

> ID：10185771
> 
> 赞同：0
> 
> 时间：2012-04-17T05:45:30.197
> 
> 标签：javascript, backbone.js

我已经开始研究 Backbone.js，我似乎无法弄清楚如何为待办事项列表中的不完整事件实现*高亮模式*。

[js小提琴](http://jsfiddle.net/PnSPH/)。

每个待办事项都有一个对应其模型`completed`属性的复选框。

我有一个名为*Highlight Incomplete*的按钮，我想为每个项目添加一个类`li`，其模型的`completed`属性是`false`. 我希望它*切换*此模式，因此单击突出显示它们，然后单击删除所有突出显示。

我在模型的集合上写了一个过滤器来返回这些不完整的项目。我以为我可以使用它，但我被困在试图弄清楚它。

我不想添加另一个调用`highlighted`模型的属性，因为它可以从它的`completed`属性中推断出来，并且它只存在于它的视觉表示中。

它也应该是*live*，所以如果你打开了*高亮模式*并添加了一些新元素，它们应该被高亮显示。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T05:56:40.303

让您`ListView`维护`ItemView`它在`appendItem`. 您的 ItemViews 代表`<LI>`DOM 中的 a ，并且根据我在您的样式表中看到的内容，是您想要切换`highlighted`类的位置。让您的 ItemViews 公开一个类似的方法`highlightIfIncomplete`并从中调用它`ListView.getIncompleted`。

这是更新的小提琴：http: [//jsfiddle.net/PnSPH/2/](http://jsfiddle.net/PnSPH/2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T07:20:05.897

如果您构建 CSS 以匹配您的 html 层次结构，并不断更新您的模型状态，您将不必担心同步问题：http: [//jsfiddle.net/PnSPH/5](http://jsfiddle.net/PnSPH/5)

这个小提琴处理复选框状态：http: [//jsfiddle.net/PnSPH/6/](http://jsfiddle.net/PnSPH/6/)

另一种方法是坚持仅拥有`.render()`，但让模板处理`class`和`checked`状态

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T06:07:26.093

你不需要collection.getIncomplete ...

[http://jsfiddle.net/7nX4S/1/](http://jsfiddle.net/7nX4S/1/)

# algorithm - 图论：分割图

> ID：10185773
> 
> 赞同：17
> 
> 时间：2012-04-17T05:45:40.560
> 
> 标签：algorithm, graph, graph-theory

我有这个问题。我有一个 n 节点图，我想将其拆分为 x 节点和 nx 节点的两个子图，但要受到剩余边数最大化（或最小化被切割边数）的约束。

不确定这是否有意义。不是图论专家，但这是我问题的抽象版本。我应该看看哪些算法可能对我有帮助？

这不是作业问题。虽然我认为有趣的问题！

我计划在 C 中实施。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-17T12:42:38.797

x = n - x 的特殊情况称为最小二分问题并且是 NP-hard。这也使您的问题成为 NP 难题。[Wikipedia article on graph partitioning](http://en.wikipedia.org/wiki/Graph_partition)中描述了几种启发式方法，包括局部搜索（例如，从随机切割开始并重复交换减少切割大小的顶点对）和谱方法（例如，计算和阈值第二个特征向量）。如果 n 很小，整数规划也是一种可能。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-17T06:08:15.867

也许是对节点的深度优先搜索。我们一次分配一个节点并计算到目前为止的切割次数。如果该数字超过最佳解决方案的数字，则我们中止该数字并回溯。

1.  给定完整的节点集 S，让 P 和 P' 是节点的集合，初始为空，K 为切割边的数量，初始为 0。
2.  让 S*, K* 是最知名的解决方案及其切割边数，K* 最初为无穷大。
3.  选择一个节点 N 开始并将其分配给 S。
4.  对于每个未分配的节点 M：
    1.  将 M 分配给 S'，并将从 M 到 S 到 K 中的节点的边数相加。
    2.  如果 K > K*，则没有基于此的解决方案会击败最好的解决方案，因此将 M 分配给 S。
    3.  如果 |S| > X，那么集合变得太大了；回溯。
    4.  否则，从 4 递归。
5.  如果所有节点都已分配且 K < K*，则令 S* = S 且 K* = K。

我一直把它想象成一个 Prolog 类型的算法，但是在 C 中做它应该不会太难。回溯只是意味着取消分配最后分配的节点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T06:56:57.873

基本上，您正在查看最小切割问题的修改版本。

一种方法是修改[karger 的算法](http://en.wikipedia.org/wiki/Karger%27s_algorithm) 在 Karger 的算法中，您沿着随机边收缩顶点，直到最终只有两个顶点，其余边代表切割。由于它是随机的，因此您只需多次执行此操作并保持解决方案的边缘最少。

在修改后的版本中，一旦顶点折叠 x 次，您就可以停止折叠并计算出边（在您的情况下，这些将是切口），执行适当的次数，您就有了解决方案。棘手的部分是弄清楚重复计算多少次以将置信度提高到令人满意的极限

# c# - 从 SQL 数据库中检索动态内容并将其显示到 ASP.NET 页面中

> ID：10185775
> 
> 赞同：0
> 
> 时间：2012-04-17T05:45:41.510
> 
> 标签：c#, asp.net

我目前正在开发asp.net 中的新闻门户网站。我在 sql server 2008 中创建了一个带有参数（NewsId、NewsTitle、NewsDetails、NewsCategory）的表。我现在能够从数据库中动态检索 NewsTitle 并将其显示在我的 aspx 页面中。现在我想为那个特定的 NewsTitle 传递 NewsId，然后在一个单独的 aspx 页面中检索 NewsDetails。在 ASP.NET 中执行此操作的最佳方法是什么？我不想每次单击 NewsTitle 的链接时都创建新的 aspx 页面，而是我有兴趣使用相同的详细信息页面并传递不同的 ID 参数？

问候，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T05:51:51.653

我会将它们保持在同一页面上，并使用主细节模式使用面板之类的东西来切换可见性：

[http://leedumond.com/blog/master-detail-editing-inserting-deleting-with-a-listview-and-detailsview/](http://leedumond.com/blog/master-detail-editing-inserting-deleting-with-a-listview-and-detailsview/)

这将为您提供基本概念；链接到的示例显示了两者，但正如我所说，通过单击按钮打开和关闭它们是一件简单的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T06:30:13.517

您可以执行以下方法：

1.  在 Gridview 中使用 HyperLink 以显示 NewsTitle：

    ```
    <asp:GridView ID="GridView1" runat="server">
        <Columns>
            <asp:TemplateField>
                <ItemTemplate>
                     <asp:HyperLink runat="server" ID="hl" NavigateUrl='<%#"NewsDetails.aspx?Newsid="+ Eval("NewsId") %>' Text='<%# Eval("NewsTitle") %>'></asp:HyperLink>
                </ItemTemplate>
            </asp:TemplateField>
        </Columns>
    </asp:GridView> 
    ```

    在后面的代码中绑定 GridView 数据源：

    ```
    protected void getNewsDetails()
    {
        DataTable dtNewsDetails = new DataTable();
        //retrieve data from database into the DataTable
        GridView1.DataSource = dtNewsDetails;
        GridView1.DataBind();
    } 
    ```

2.  现在 GridView HyperLink 将导航到以 NewsId 作为查询字符串的 NewsDetails.aspx，在 NewsDetails.aspx 页面中相应地显示详细信息：

    protected void Page_Load(object sender, EventArgs e) { string Newsid = Request.QueryString["Newsid"].ToString(); //使用Newsid显示来自数据库的详细信息}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T05:53:33.067

您可以添加一个带有 visible 属性设置为 False 的文本框，当您检索 NewsDetails 时将其设置为 textBox 并将其可见性设置为 True；

```
<asp:TextBox ID="NewsDetails" runat="server" TextMode="MultiLine" 
                        Height="30px" Width="200px" Visible="False" /> 
```

和

```
void GetNewsDetails()
{
NewsDetails.Text=GetDetailsQuery;
NewsDetails.Visible=True;
} 
```

# javascript - Firefox 上的 Rails ajax 表单返回 406 不接受 - 但仅在第二次发布请求时

> ID：10185780
> 
> 赞同：0
> 
> 时间：2012-04-17T05:46:04.580
> 
> 标签：javascript, jquery, ruby-on-rails-3, ruby-on-rails-3.1

我正在使用 Rails 3.2.3，我有以下表格

```
<%= form_for(@item, url: list_path, remote: true, html: {id: "item-create-form", class: "form-horizontal"}) do |f| %>
    <div class="input-append">
        <%= f.text_field :description, id: "item-description-input", autofocus: true, placeholder: "Type and press enter." %>
    </div>
<% end %> 
```

使用以下代码创建操作：

```
def create
  @user = User.find_by_username(params[:username])
  @item = current_user.items.build(params[:item])
  respond_to do |format|
    if @item.save
      @item.update_attribute(:vpos, 0)
      @items = Item.find_all_by_user_id(@user)
      @items.each do |item|
        item.update_attribute(:vpos, item.vpos + 1)
      end
      format.js
    else
      format.js {render "errors" }
    end
  end
end 
```

相应的 js.erb 文件在那里并且按预期呈现。这是代码：

```
$('#position-zero').after('<%= escape_javascript(render(:partial => @item)) %>');
$('#item-create-form').html('<%= escape_javascript(render(:partial => "item_create_form", :locals => { :@item => Item.new })) %>');
$("#item-description-input").focus();
$(".best_in_place").best_in_place(); 
```

我的 application.js 文件如下所示：

```
//= require jquery
//= require jquery_ujs
//= require jquery-ui
//= require jquery.purr
//= require best_in_place
//= require_tree .
// Loads all Bootstrap javascripts
//= require bootstrap 
```

在 Chrome 和 Safari 上一切正常 - 只有 HTTP 200 响应。

然而，在 Firefox 上，第一个表单提交工作正常。但是第二个给了我一个`406 not accepted`错误。

检查 Firebug，内容类型`text/javascript`在第一个请求上设置为，但在第二个请求上更改为`text/html`。

我尝试在 format.js 之后设置内容类型（如：）`{ render content_type: 'text/javascript' }`，并在控制器上设置标题（如：） `headers["Content-Type"] = "text/javascript; charset=utf-8"`，但无济于事。

Any good souls out there that can shed some light on this annoying problem?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T17:11:10.980

notice the second line in ur js.erb? you are adding a form inside the form. so basically when u submit the form the second time, the first form is sent as the ajax request, however, the form above it is not, giving you the problem. you should remove that second line and things should be ok

# html - 使用导航栏的最有效方法？

> ID：10185791
> 
> 赞同：0
> 
> 时间：2012-04-17T05:46:36.633
> 
> 标签：html

HTML/CSS 非常新。我应该如何制作一个在我的页面上全局跟踪的导航栏？就像我在导航栏上的列表中添加一个项目一样，我希望它在所有页面上更新，而不是一个接一个地写在一个页面中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T05:50:11.903

使用 PHP：

```
<?php
include ('navbar.php');
?> 
```

创建一个 navbar.php 文件，其中包含您的 html 代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T05:56:04.507

做到这一点的唯一方法是使用服务器端脚本语言（如 PHP）。仅使用客户端脚本（HTML 和 CSS）是无法实现的。使用 PHP `include`，您可以添加外部文件，如下所示：

```
<?php
include('filename.php');
?> 
```

该文件`filename.php`将被添加到页面中。

# php - 触发 javascript 事件以在具有 ajax 响应的另一个 div 上显示错误文本

> ID：10185793
> 
> 赞同：0
> 
> 时间：2012-04-17T05:46:55.410
> 
> 标签：php, javascript, ajax

我在使用 JavaScript 时遇到了一个奇怪的问题，我正在开发一个 ajax 数据库。数据库的登录表单使用 ajax 请求/函数将数据发送到 PHP 控制器。我在登录页面上有一个错误显示不可见的 div（名为 errorDiv）。errorDiv html 是：

```
<div id="errorDiv" style="visibility:hidden; display:none">
...
</div> 
```

当登录表单中的用户名和密码字段都为空时，我需要 PHP 控制器响应，显示登录表单并运行 JavaScript 函数“DisplayLoginError()”，这将使错误 div 可见并显示错误消息（请填写两个字段）在error-div.DisplayLoginError（）函数的代码是：

```
function DisplayLoginError()
{
document.getElementById('errorDiv').style.visibility="visible";
document.getElementById('errorDiv').style.display="block";
document.getElementById('errorDiv').innerHTML = "<?php echo $loginerror; ?>";
} 
```

php控制器代码为：

```
if(isset($_REQUEST['login']))
{
if(isset($_REQUEST['username']) && isset($_REQUEST['password']))
    {
    .....Both the fields are filled...
    }
else   /*===Error:Any of the username or password field has  been left empty====*/
    {
    $loginerror='Please fill both the Fields to login.';
    include $_SERVER['DOCUMENT_ROOT'].'\hospital\includes\collegedata\login-form.html.php';
    }
} 
```

现在的问题是它无法完成，因为大多数 javascript 事件都是由用户操作触发的。暂时我已经为表单标签分配了一个 mouseover 事件，当触发该事件时运行 DisplayLoginError 函数并在 errorDiv 中显示错误。

```
<form onmouseover="DisplayLoginError()"> ..... </form> 
```

但它不是正确的解决方案。我需要一个可以在仅加载登录 div 而不是整个页面时运行此功能的事件。我不能在这里使用 onload 事件作为它的 ajax 数据库，其中主页仍然只有 div 的更改。可能是时间事件可以用于此目的...我不确定...可能有更好的解决方案...我如何使用 ajax 来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T10:54:56.123

您可以在 javascript 中使用失去焦点事件。我无法清楚地理解您的询问。所以这只是一个建议。

```
<div id='errorDiv' >
</div>
Username : <input type="text" name="username" id="uname" onBlur="checkUsername();">
Password : <input type="text" name="password" id="pword" onBlur="checkValues();">

<script type="text/javascript">
function checkValues()
{
    uname = document.getElementById('uname').value;
    pword = document.getElementById('pword').value;
    if(uname=="" || pword=="") {
        document.getElementById('errorDiv').innerHTML="Please fill both the fields";
    }else{
        document.getElementById('errorDiv').innerHTML="";
    }
}
function checkUsername()
{
    uname = document.getElementById('uname').value;
    if(uname==""){
        document.getElementById('errorDiv').innerHTML="Please enter username";
    }else{
        document.getElementById('errorDiv').innerHTML="";
    }
}
</script> 
```

# eclipse-plugin - [eclipse pde]如何捕捉启动终止的事件？

> ID：10185794
> 
> 赞同：3
> 
> 时间：2012-04-17T05:46:57.870
> 
> 标签：eclipse-plugin, launch

我正在写一个eclipse插件。

我想做某事。当启动终止时，我在哪里添加代码？

我已经编写了一个扩展 JavaLaunchDelegate 的类。

# c#-4.0 - 哪个 IPC 在 .NET 4.0 中实现最简单？

> ID：10185796
> 
> 赞同：1
> 
> 时间：2012-04-17T05:47:13.320
> 
> 标签：c#-4.0, client-server, ipc

我在 C# 中有一个多服务器客户端应用程序。我的要求是在不同的客户端之间交换一些浮点值。哪种 IPC 机制最好且易于使用。我读过共享内存是最简单的，但是它使用了在 C# 中被认为是不安全代码的指针。你能建议我其他机制吗？代码示例将非常受欢迎。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T19:28:46.973

最好的方法是使用 WCF 命名管道。以下是一些主要程序。

1.  定义两个接口，比如 IServerActions 和 IClientActions IServerActions 定义了客户端应用程序调用的方法；IClientActions 定义了服务器单独调用或广播的方法。IServerActions 应该包括一个 Register 方法。
2.  在客户端和服务器应用程序中实现这两个接口。实现类可以是主窗体或应用程序中的任何单例类。
3.  客户端到服务器和服务器到客户端的通信是相似的，创建一个命名管道通道和调用方法。客户端获得一个唯一 ID（例如 Guid.NewGuid()）并在服务器上注册。服务器维护一个客户端 ID 列表，并且可以创建单独的频道来广播消息（在您的情况下发送浮动数字）

这是 .NET C# 中的一个很好的示例解决方案。
[http://www.codeproject.com/Articles/7176/Inter-Process-Communication-in-NET-Using-Named-Pip](http://www.codeproject.com/Articles/7176/Inter-Process-Communication-in-NET-Using-Named-Pip)

# mongodb - 回滚数据是否应该应用于主节点？- MongoDB

> ID：10185799
> 
> 赞同：0
> 
> 时间：2012-04-17T05:47:36.037
> 
> 标签：mongodb, replication, rollback

假设我们有一个包含 3 个节点的副本集（2 个数据和一个仲裁器）

```
A->primary, priority=2
B->secondary, priority=1, 10 seconds behind A
C->arbiter 
```

现在 A 失败，B 成为主要的。一段时间后，A 变为在线，进行回滚并在同步后再次成为主节点。现在我们可以应用回滚数据。

我的问题是如果 A 的优先级为 1 会发生什么。在上线并回滚后，它将与 B 同步。现在我们应该在哪个服务器上应用回滚数据？因为 A 不再是主要的。我们是否应该将回滚的数据传输到 B 并执行操作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T09:17:41.293

因为您只能对主节点进行写入，所以回滚的数据应始终应用于主节点。在您的情况下，这意味着您需要将数据移动到服务器 B，或者只使用[mongorestore](http://www.mongodb.org/display/DOCS/Import+Export+Tools#ImportExportTools-mongorestore)与新的主节点对话（使用 -h 参数）。mongorestore实用程序很可能不允许将数据应用到辅助[节点。](http://www.mongodb.org/display/DOCS/Import+Export+Tools#ImportExportTools-mongorestore)

# wpf - 使用 MSI 包装器卸载 ClickOnce - 错误

> ID：10185800
> 
> 赞同：1
> 
> 时间：2012-04-17T05:47:40.633
> 
> 标签：wpf, clickonce, windows-installer

我有 clickonce 应用程序，其中一项要求是即使在应用程序正在运行时也要卸载该应用程序。所以我创建了一个 MSI 包装器，它安装 clickonce 应用程序，更新注册表等，也用于卸载 clickonce 应用程序。

项目结构

*   ClickOnce 应用程序 - 部署到服务器[http://someserver/app.client.application](http://someserver/app.client.application)。
*   控制台应用程序 1
    *   这会在安装 MSI 时启动一个调用上述 url 的进程
    *   在 MSI 卸载时，如果 clickonce 应用程序正在运行，则应用程序已关闭/终止，将读取 clickonce 卸载字符串并启动一个进程以尝试卸载 clickonce 应用程序
*   控制台应用程序 2 在安装时创建事件日志源并在卸载时删除它
*   MSI Wrapper - 用于安装和卸载 clickonce 应用程序。

这有自定义操作集

```
- Install
    * Primary output from console Application 2
    * Primary output from console Application 1

- Uninstall
    * Primary output from console Application 1
    * Primary output from console Application 2 
```

控制台应用程序 1 和 2 连接到安装程序上的 BeforeInstall 和 AfterInstall 事件。

我安装时一切正常，事件日志源被创建，clickonce 应用程序启动并安装。安装部分运行顺利，我没有问题。

但是我在卸载时遇到问题，MSI 会自行卸载并调用卸载 clickonce 的过程，这会引发提示并删除事件日志源。

## 以下是错误详情

有一个弹出窗口显示“卸载应用程序未成功。请参阅详细信息以获取更多信息'。

单击详细信息按钮打开错误详细信息文本

```
PLATFORM VERSION INFO
Windows             : 6.1.7600.0 (Win32NT)
Common Language Runtime     : 4.0.30319.239
System.Deployment.dll       : 4.0.30319.1 (RTMRel.030319-0100)
clr.dll             : 4.0.30319.239 (RTMGDR.030319-2300)
dfdll.dll           : 4.0.30319.1 (RTMRel.030319-0100)
dfshim.dll          : 4.0.31106.0 (Main.031106-0000)

IDENTITIES
Deployment Identity     : XXXXX.Client.application, Culture=neutral, PublicKeyToken=0000000000000000, processorArchitecture=msil

ERROR SUMMARY
Below is a summary of the errors, details of these errors are listed later in the log.
* Error occurred during store lookup, component store may have been corrupted. Following failure messages were detected:
    + Application is not installed.
* Error occurred during uninstall of the application. Following failure messages were detected:
    + Application is not installed.
* Exception occurred during uninstall of application XXXXX.Client.application, Culture=neutral, PublicKeyToken=0000000000000000, processorArchitecture=msil. Following failure messages were detected:
    + Shortcut removal could not be completed. Publisher or product value is not valid. 

COMPONENT STORE TRANSACTION FAILURE SUMMARY
No transaction error was detected.

WARNINGS
There were no warnings during this operation.

OPERATION PROGRESS STATUS
* [4/17/2012 10:52:36 AM] : Looking up information from component store.
* [4/17/2012 10:52:36 AM] : Uninstall of application XXXXX.Client.application, Culture=neutral, PublicKeyToken=0000000000000000, processorArchitecture=msil did not succeed.

ERROR DETAILS
Following errors were detected during this operation.
* [4/17/2012 10:52:36 AM] System.Deployment.Application.DeploymentException (SubscriptionState)
    - Application is not installed.
    - Source: System.Deployment
    - Stack trace:
        at System.Deployment.Application.SubscriptionStore.CheckInstalled(SubscriptionState subState)
        at System.Deployment.Application.SubscriptionStore.CheckInstalledAndShellVisible(SubscriptionState subState)
        at System.Deployment.Application.DeploymentServiceCom.MaintainSubscriptionInternal(String textualSubId)
* [4/17/2012 10:52:36 AM] System.Deployment.Application.DeploymentException (SubscriptionState)
    - Application is not installed.
    - Source: System.Deployment
    - Stack trace:
        at System.Deployment.Application.SubscriptionStore.CheckInstalled(SubscriptionState subState)
        at System.Deployment.Application.SubscriptionStore.UninstallSubscription(SubscriptionState subState)
        at System.Deployment.Application.DeploymentServiceCom.MaintainSubscriptionInternal(String textualSubId)
* [4/17/2012 10:52:36 AM] System.Deployment.Application.DeploymentException (Subscription)
    - Shortcut removal could not be completed. Publisher or product value is not valid. 
    - Source: System.Deployment
    - Stack trace:
        at System.Deployment.Application.ShellExposure.RemoveSubscriptionShellExposure(SubscriptionState subState)
        at System.Deployment.Application.DeploymentServiceCom.MaintainSubscriptionInternal(String textualSubId)

COMPONENT STORE TRANSACTION DETAILS
No transaction information is available. 
```

我尝试了多种方法，但似乎没有任何效果

1.  从注册表中读取卸载字符串并启动一个进程。
2.  创建了一个 vbsript 并将其添加为自定义操作。（objShell.Run“rundll32.exe dfshim.dll,ShArpMaintain XXXXX.Client.application, Culture=neutral, PublicKeyToken=0000000000000000, processorArchitecture=msil”）
3.  创建了一个 cmd/bat 文件（包含 rundll32.exe dfshim.dll,ShArpMaintain XXXXXX.Client.application, Culture=neutral, PublicKeyToken=0000000000000000, processorArchitecture=msil）并在卸载时启动它。

所有这三种方法都会引发相同的错误。但是当我单独运行它们时，它们似乎都可以工作。我已经尝试了超过 2 天，把我所有的头发都拔了出来。

# android - 用于在 Android Emulator 上安装 firefox 和 chrome 的 AVD 设置

> ID：10185803
> 
> 赞同：1
> 
> 时间：2012-04-17T05:48:07.673
> 
> 标签：android, firefox, google-chrome, emulation, avd

如果我想在我的 Android 模拟器上安装 firefox 和 chrome，我想知道 AVD 的设置。

安装 firefox 和 chrome 的 AVD 设置是什么。我有以下 avd 文件 chrome (com.android.chrome-2.apk) 和 firefox (fennec-10.0.3esr.multi.android-arm.apk)

谢谢，帕维斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T06:08:20.780

```
adb install com.android.chrome-2.apk

```

```
adb install fennec-10.0.3esr.multi.android-arm.apk

```

从下载文件的目录运行这些命令。

# compression - 有关 Microsoft 点对点压缩 (MPPC) 的问题？

> ID：10185813
> 
> 赞同：1
> 
> 时间：2012-04-17T05:48:46.017
> 
> 标签：compression

我在 MPPC 协议下做了一些关于压缩的工作。我在 Internet 上能找到的关于这个协议的只有 RFC2118。

在这个 RFC 中，我得到了一些我无法理解的东西。

1.以下是MPPC的数据包格式说明。

```
 0                   1                   2                   3
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |         PPP Protocol          |A|B|C|D| Coherency Count       |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |        Compressed Data...
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+ 
```

那么，那么这个文档告诉Bit A表示初始化历史buf，Bit C表示“这是一个压缩包”，而Bit D总是设置为“0”。

但是，我在 Wireshark 中捕获的内容有点像这样：

```
0000   xx xx xx xx xx xx xx xx xx xx xx xx xx xx xx fd  ...C...<=....j0@
0010   90 00 dd 43 ed bf e9 3c 3d b1 bc fe 07 6a 30 40  ...C...<=....j0@
0020   c8 8e 15 c6 f8 3d 5a 27 6d 24 db 37 be f8 c9 e5  .....=Z'm$.7....
0030   28 ae 0e 85 3a ae 15 32 10 ed ce d4              (...:..2.... 
```

0xfd是“PPP协议”的值，应该是0x00fd，但是压缩成0xfd。下面是 0x90 00，即 1001 0000 0000 0000。所以，Bit A 为 1，Bit B 为 0，Bit C 为 0，Bit D 为 1。

下面的 0000 0000 0000 是 Coherency Count，没关系。

我被 Wireshark 捕获的每个数据包都显示相同的内容，0xfd90。但它一定有问题，不是吗？每个数据包的位 A 为 1？并且每个数据包的位 D 都是 1？

任何人都可以就这个问题给我一些建议吗？

2.第二个问题是关于算法的。

我只是粘贴来自 rfc2118 的单词。

"

压缩器通过帧的长度运行，产生一个字面量（要发送的未压缩字节）或一个复制元组作为输出，其中 Offset 是匹配所在的历史中之前的字节数，而 Length-of-Match 是数字从偏移指示的位置复制的字节数。

例如，考虑以下字符串：

```
 0         1         2         3         4
   012345678901234567890123456789012345678901234567890
   for whom the bell tolls, the bell tolls for thee.

   The compressor would produce:

   for whom the bell tolls,<16,15> <40,4><19,3>e. 
```

"

那么，“16”、“40”和“19”是从哪里来的？

## 我被这个问题困扰了好几天。

这是我在这里发布的第一个问题，我不确定我是否说清楚了？但是，如果有人提供一些帮助，我将不胜感激。THX！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T09:07:40.947

威尔，我找出答案。我犯了一个错误。我会解释它，希望它能帮助像我这样困扰的人。

Q1：我认为我捕获的数据包是加密的。我捕获了更多数据包，结果是正确的。

Q2：之前，我一直认为“偏移量”是从历史字符串的头部偏移，然后我最终发现它实际上是“从指向历史字符串的当前指针返回”。

我将编辑我的问题的标题。希望对其他人有所帮助。

# javascript - 关闭模式框时验证错误消息保留在页面上

> ID：10185825
> 
> 赞同：0
> 
> 时间：2012-04-17T05:49:42.667
> 
> 标签：javascript, jquery, validation

我正在使用[jQuery 验证引擎](https://github.com/posabsolute/jQuery-Validation-Engine)来验证我的表单。模式框验证正在工作，但是当我关闭模式框验证消息时，页面上仍保留原样。

我怎样才能删除它们？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T05:54:50.873

您在哪里显示验证消息？您应该在模态框本身上显示验证消息，以便在框关闭时它会熄灭。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T05:53:09.837

一般的答案，没有任何代码，是从模式关闭的回调中手动从表单中删除验证元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T05:53:57.020

像这样的东西：

```
$(".cancel").click(function() {
validator.resetForm();
)}; 
```

将您的模态链接到取消功能附近。

# jboss - 无法从 http 访问我的应用程序

> ID：10185834
> 
> 赞同：0
> 
> 时间：2012-04-17T05:51:12.777
> 
> 标签：jboss, amazon-ec2, amazon-web-services

我的实例 ID 是 - i-709b0717，我的弹性 IP 地址是 - 23.23.201.10

我有我的应用程序服务器，即 Jboss 在其上运行，我的应用程序部署在 jboss 上。Jboss 正常启动，我可以使用 localhost 从实例中访问我的应用程序。但我无法使用我的弹性 IP 地址从其他机器访问相同的内容..

我在我的实例的安全组中打开了以下端口：8080 1098 1099 4444 4445 8083 8093 但仍然没有运气..

请帮忙

# actionscript-3 - 如何使 Combobox 和 DateField 在 flex 中动态不可编辑

> ID：10185836
> 
> 赞同：0
> 
> 时间：2012-04-17T05:51:26.683
> 
> 标签：actionscript-3, apache-flex, flex3

我正在尝试根据我为每条记录动态设置的布尔变量全局启用/禁用表单字段。

此代码不适用于我的组合框，即使我 editMode = false，我仍然可以更改值。

这些字段中的任何一个都不应该是可编辑的，因为 editMode = false （在默认值和我传入的值中），但我激活了日期选择器和下拉菜单。

我究竟做错了什么？

我试过启用=，但它使整个组合框背景变成深灰色，我不想改变颜色，只是无法点击。

如果我必须对组合框和日期选择器都使用启用，我如何将背景颜色更改为它？似乎没有我能找到的属性。

[可绑定] public var editMode = false;

```
 <mx:FormItem label="District" required="true">

<mx:ComboBox id="districts" labelField="name" dataProvider="{districtCollection}"
            editable="{editMode}"
    click="onDistrictSelected(event)"/> </mx:FormItem> <mx:FormItem label= "Date><mx:DateField id="date" selectedDate="{report.startDate}" editable="{editMode}"/> 
```

提前致谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T07:27:27.373

```
<mx:FormItem label="District" required="true" enabled="{editMode}" disabledOverlayAlpha="0">
    <mx:ComboBox id="districts" labelField="name" dataProvider="{districtCollection}"
          click="onDistrictSelected(event)"/> 
</mx:FormItem> 
<mx:FormItem label= "Date" enabled="{editMode}" disabledOverlayAlpha="0">
     <mx:DateField id="date" selectedDate="{report.startDate}"/>
</mx:FormItem> 
```

试试上面的代码......这将解决你的问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T21:43:55.307

mouseEnabled 属性怎么样？这应该使控件不可编辑并且不应该改变它们的背景颜色。

flex 文档指出 editable 只会阻止用户在组合框中输入值，它不会阻止他们使用组合框的列表。

[http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/mx/controls/ComboBase.html#editable](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/mx/controls/ComboBase.html#editable)

# facebook - 如何修复加载空白屏幕的 Facebook 粉丝专页？

> ID：10185837
> 
> 赞同：0
> 
> 时间：2012-04-17T05:51:30.743
> 
> 标签：facebook, migration

我的公司有一个 Facebook 业务页面，并且想要一个粉丝专页。我使用了迁移工具，现在当我登录页面时，它是一个空白的白色屏幕，当我从网络（未登录）执行此操作时，它显示相同。我将非常感谢任何能够告诉我如何解决此问题的人。

这是我的粉丝专页的链接：

[http://www.facebook.com/pages/getting_started?page_id=351121568256868](http://www.facebook.com/pages/getting_started?page_id=351121568256868)

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T19:35:24.767

看来这是一个与用户语言冲突的错误更新。在您的设置中更改帐户的界面语言。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T09:54:52.453

您发布的链接看起来不像正确的网址..

也许你的意思是这个页面： http: [//www.facebook.com/pages/Pancakes-Alpharetta/351121568256868](http://www.facebook.com/pages/Pancakes-Alpharetta/351121568256868)

或者更简单的形式： http: [//www.facebook.com/351121568256868](http://www.facebook.com/351121568256868)

* * *

# 编辑

正如我在评论中所写，这个问题不是编程问题，而且这个网站也不是最好的地方（这就是为什么我看到有人已经投票关闭它的原因）。

另外，我对这个主题没有个人经验，所以这个信息来自我所做的一些搜索，如果有些不相关，我深表歉意。

您是否检查过这些： -[将您的个人帐户转换为 Facebook 页面](http://www.facebook.com/help?page=213602951994043) -[将 Facebook 个人资料反转为页面迁移](http://www.facebook.com/note.php?note_id=10150187904821603)

此外，还有一些错误报告：http://developers.facebook.com/bugs?search_view=search&&search_statuses[0]=open&search_texts[0]=page%20migration

如果这些都不符合您的问题，您可能需要考虑报告另一个错误。

除此之外，我不知道如何提供帮助。

# java - 关于螺纹的连接

> ID：10185840
> 
> 赞同：-1
> 
> 时间：2012-04-17T05:51:53.997
> 
> 标签：java

我已经在java线程上开发了下面的程序，我有两个线程正在执行并访问run（）中的方法，如果我想第一个线程首先开始，然后是我通过同步机制完成的第二个线程但是如果我想要第一个线程首先结束，然后从可以通过 join() 实现的第二个线程开始，请告诉我如何通过实现连接来完成，

```
public class MyThread2 extends Thread  {

public  void  run()
{

    //synchronized (this)
    //{
    //System.out.println(Thread.class);
    for(int i=0;i<20;i++)
    {
        try{

            Thread.sleep(500);
            System.out.println(Thread.currentThread().getName());
        System.out.println(i +"\n"+ "..");
        }catch(Exception e)
        {e.printStackTrace();
        }
    }
    //} 
```

}

```
public static void main(String... a )
{
    MyThread2 obj = new MyThread2();

    Thread x = new Thread(obj);
    x.setName("first");
    x.start();

    Thread y = new Thread(obj);
    y.setName("second");
    y.start();

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T05:59:41.730

```
x.start();
x.join();
y.start(); 
```

但是您应该意识到，根据我上面的评论，这完全没有意义。如果您想要顺序执行，您只需要：

```
x.run();
y.run(); 
```

而且您不需要它们中的任何一个来扩展`Thread`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T06:06:12.723

如果您希望作业按顺序运行，则无需扩展线程。但是，如果您想控制线程执行的顺序，那么您可以尝试为线程设置优先级。

```
//Setting priorities on the Thread objects
    x.setPriority(Thread.MAX_PRIORITY);
    y.setPriority(Thread.MIN_PRIORITY); 
```

如果我们在线程上设置优先级，我们仍然无法准确控制执行，但至少我们可以告诉 CPU 我们认为哪一个最重要

希望这对您有所帮助。

# c# - Calling code-behind with Javascript clarification

> ID：10185846
> 
> 赞同：1
> 
> 时间：2012-04-17T05:52:30.203
> 
> 标签：c#, javascript, gridview, onclick, postback

I'm trying to make a row in a gridview clickable, so that it causes a postback so that I can then execute code-behind.

I have this in my GridView's RowDataBound event handler. This WORKS:

```
if (e.Row.RowType == DataControlRowType.DataRow)
{
     e.Row.Attributes["onmouseover"] = "this.style.cursor='pointer';this.style.textDecoration='underline';";
     e.Row.Attributes["onmouseout"] = "this.style.textDecoration='none';";
     e.Row.Attributes["onclick"] = "javascript:__doPostBack('PostBackFromItemWindow', '');";
} 
```

But this DOESN'T WORK:

```
if (e.Row.RowType == DataControlRowType.DataRow)
{
     e.Row.Attributes["onmouseover"] = "this.style.cursor='pointer';this.style.textDecoration='underline';";
     e.Row.Attributes["onmouseout"] = "this.style.textDecoration='none';";
     e.Row.Attributes["onclick"] = "<script type='text/javascript'>__doPostBack('PostBackFromItemWindow', '');</script>";
} 
```

Questions:

1.  Why does the first work, but the second doesn't?
2.  In trying to accomplish this task (call code-behind from javascript), are there any alternative methods of doing this? I did some reading and came across WebMethods(), but ultimately didn't like the fact that they need to be static in order to work. The above actually gives me exactly the functionality I need, I just want to make sure that it's an acceptable way of doing it (i.e. it's not deprecated or something), and that I'm not inevitably causing myself trouble later thanks to some unforeseen mistake at this point.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T15:25:57.240

This could help you out:

1.  The first one works because, you have specified that the onClick handler is associated to the __doPostBack function which is in javascript. The 'javascript:' just specifies that the function is written in javascript and this should be used only when the script differs from that specified in the meta tag.

    The second one does not work because you have specified the html scripts for the javascript handler. When this goes to the javascript interpreter, it wouldnt be able to understand the tags and hence wouldnt work.

2.  __doPostBack is not recommended for all the cases as mentioned [here](https://stackoverflow.com/questions/3746270/explicit-dopostback). But if you have no other choice of creating a postback, then you can use it. This [link](http://dopostback.net/) will be able to give you more info.

# javascript - 当命令运行过早时，JavaScript 打开新窗口而不是选项卡

> ID：10185848
> 
> 赞同：0
> 
> 时间：2012-04-17T05:52:54.903
> 
> 标签：javascript, jquery

我意识到您无法控制浏览器是否打开新*窗口*与新*选项卡*，因此这可能没有解决方案。

问题基本上是我运行类似：

```
function runCommand() {
   //...
   window.open(url);
} 
```

如果用户按下特殊键或单击，这会不时运行。一切正常，它将根据用户的浏览器设置打开一个新窗口或选项卡。伟大的。

问题是，我还有一些代码：

```
if (x.property) runCommand(); 
```

这将*始终*在新*窗口*中打开 url ，即使您`runCommand`在同一页面上的其他时间使用，如果这是用户的设置，它将使用选项卡。

起初，我认为这可能与页面未完全加载有关，因此我都尝试将其包装起来`document.ready`并使用`setTimeout()`了一些较高的数字（例如 5 秒）。即使在这样做之后，即使稍后`runCommand()`会打开一个新选项卡，它*仍然会在初始运行时打开一个新窗口。*有没有人经历过这种行为或知道如何解决它？

**编辑**：我创建了一个展示问题的小提琴。请原谅弹出窗口：http: [//jsfiddle.net/csPGU/](http://jsfiddle.net/csPGU/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T05:59:38.857

如果`window.open`从事件处理程序中执行，例如单击，它将在新选项卡中打开，否则将在新窗口中打开。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T06:02:17.660

我猜这与浏览器本身以及浏览器尝试处理以编程方式打开的窗口的方式有关。

我假设当你`runCommand`稍后它是基于一个已经发生的事件（例如点击某物）。浏览器通常允许由事件触发的新窗口，但阻止那些没有交互的窗口（通常是弹出窗口）。

# outlook - 将“主题”关键字拆分为 Outlook 主题行 java

> ID：10185849
> 
> 赞同：-1
> 
> 时间：2012-04-17T05:53:00.127
> 
> 标签：outlook

我在使用 Outlook 时遇到问题，希望能得到一些帮助。我的应用程序正在发送带有超链接的电子邮件。使用此超链接回复时，主题应该会自动填写，但问题是：主题为空，因为超链接错误。

**示例：** mailto: dealapproval@system.com?subje ct=Proposal blablabla.. 特殊词“主题”被截断，超链接出错。对于某些用户来说，它工作正常，而对于其他用户，我正面临这个问题。我认为问题不在于我的代码。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T05:58:57.147

您必须正确转义 URL。看看这个问题： [Java中的HTTP URL地址编码](https://stackoverflow.com/questions/724043/http-url-address-encoding-in-java)

# ruby-on-rails - ActionMailer 无法附加 HTML 文件

> ID：10185850
> 
> 赞同：2
> 
> 时间：2012-04-17T05:53:06.093
> 
> 标签：ruby-on-rails, actionmailer

我不确定为什么我通过 ActionMailer 发送的带有附件的电子邮件没有显示附件，而是附件的内容只是显示/输出到电子邮件中。

```
class MyMailer < ActionMailer::Base
  default :from => "email@email.com"

  def test_email()
    attachments['testresult1.html'] = {
      :filename => 'testresult1.html',
      :body => File.read('C:\\testresult1.html')
    }

  mail(:to => 'email@email.com',
    :subject => 'Cool great message'
  )
  end
end 
```

电子邮件的输出如下所示

```
Date: Tue, 17 Apr 2012 14:11:52 +1000
Mime-Version: 1.0
Content-Type: text/html;
charset=UTF-8;
filename=testresult1.html
Content-Transfer-Encoding: 7bit
Content-Disposition: attachment;
filename=testresult1.html
filename: testresult1.html
Content-ID: <4f8ced883c0d9_1b1c30b580813e@PC-049.mail> 
```

然后是 HTML 文件/附件的全部内容。

我希望将 HTML 文件附加到电子邮件中，因为它将附加到普通电子邮件中，并且我应该能够双击附件并在浏览器中打开它。

```
Email Client = Microsoft Outlook
Connection = SMTP
Rails = 3.2.1
ActionMailer = 3.2.1
Mail = 2.4.4 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T05:57:24.823

您应该尝试向`body`#mail 添加密钥。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-02T14:37:32.120

非常感谢菲利普 :)

我正在发送一个没有任何正文属性的附件，我面临以下两个问题：

1.  PDF 的名称总是以“noname”的形式出现
2.  有时 PDF 已损坏

但是在将正文属性添加到邮件之后，它就可以工作了。

所以，正确的语法是：

```
attachments['mypdf.pdf'] = File.read('#{Rails.root.to_s}/public/test.pdf')
mail(:to => guru****@gmail.com, :from => guru****@gmail.com, :subject => 'Attachment Test Mail', :body => 'Regards, Guru') 
```

* * *

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T10:27:15.423

我对“无名”有同样的问题并且已损坏。

我正在使用以下代码：

```
attachments['126539_statistics.pdf'] = File.read("app/assets/pdfs/126539_statistics.pdf")
mail(:to => email, :subject => subject, :body => message) 
```

发送带有附件的邮件没有任何问题...

# mercurial - How to Hide Files Outside IntelliJ Project but in Same Mercurial Repo

> ID：10185858
> 
> 赞同：0
> 
> 时间：2012-04-17T05:53:39.707
> 
> 标签：mercurial, intellij-idea

Say I have a project like this in Mercurial

```
root/
  proj1
  proj2 
```

If I open proj1 in IntelliJ, I will have to set the VCS root to "root" or else IntelliJ won't show any changes. But, if I do so I will also see changed files in proj2\. How can I exclude proj2 or set the root to proj1 while still seeing my changes?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T06:28:17.200

You can hide folders in File -> Project Structure... -> Modules

Select your module, then select your folder, that you want to hide and then click to "Excluded".

![enter image description here](../Images/7874b409fda0ea040819d66b4ebc772a.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T00:20:43.337

This can be tricky because mercurial is intended to be used as [One Project One Repo](http://www.webdevelopment.nicholastuck.com/tools/one-project-one-repository-mercurial-used-right/ "One Project One Repository - Mercurial Used Right"). By default mercurial will want to commit all files when an `hg commit` is ran. There is a command to commit specific files that is rarely used: `hg commit -I file1.foo -I file2.foo -I file3.foo`. So you are basically trying to tell IntelliJ to constantly run that type of command, but pretend you don't see the other files to know you need to run that type of a command.

When you go to commit in IntelliJ if you use the commit dialog you can see the files it wants to commit. You can uncheck the files from proj2\. Usually IntelliJ remembers to continue to ignores these files from future commits, but if you select the commit dialog differently they may appear checked again.

Realistically you should pull each project out to their own repository. Then this and many other potential problems with the setup goes away. Read [One Project One Repository - Mercurial Used Right](http://www.webdevelopment.nicholastuck.com/tools/one-project-one-repository-mercurial-used-right/ "One Project One Repository - Mercurial Used Right") for reasons why.

# java - Java同步差分线程

> ID：10185867
> 
> 赞同：0
> 
> 时间：2012-04-17T05:54:40.803
> 
> 标签：java, multithreading

> **可能重复：**
> [Java 中的同步方法和同步块有什么区别？](https://stackoverflow.com/questions/1149928/what-is-the-difference-between-a-synchronized-method-and-synchronized-block-in-j)
> [同步函数和同步块有什么区别？](https://stackoverflow.com/questions/8519700/what-is-the-difference-between-a-synchronized-function-and-synchronized-block)

我不明白这两个线程代码之间的区别我相信这是为了互斥但我不明白有什么区别你能帮我吗？

```
public synchronized void Method1 () {
  }

public myFunction (){
       synchronized (this) { 
     }
 } 
```

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T06:01:16.333

唯一的区别是减少了由锁保护的操作数量，这可以大大提高性能。

示例：假设我们有一个 servlet，它在输入中给出了一个很大的因子数组，我们想要计算 servlet 的启动频率。问题是同步访问状态变量`requestsCount`

```
//Poor performance
class PoorFactorizer implements Servlet {
    private int requestsCount = 0;
    public synchronized void service(ServletRequest req, ServletResponse res) {
        BigInteger numberToFactorize = extractFromRequest(req);
        BigInteger[] factors = factorize(numberToFactorize); // long lasting
                                 // operation makes everyone wait 
        requestCount++;
        encodeResponse(res, factors);
    }
}

//Better perfomance
class PoorFactorizer implements Servlet {
    private int requestsCount = 0;
    public void service(ServletRequest req, ServletResponse res) {
        BigInteger numberToFactorize = extractFromRequest(req);
        BigInteger[] factors = factorize(numberToFactorize); 
        // since we need to guard only the class' state
        // let's guard only the operation with the state
        synchronized(this) {            
            requestCount++;
        }
        encodeResponse(res, factors);
    }
} 
```

**UPD：**你可以在一本杰作《Java Concurrency in Practice》（第 2 章）中读到一个很好的解释。我强烈建议从头到尾阅读这本书。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T06:16:09.530

从锁定的角度来看，两者的行为相同。唯一的区别是可以有任何非空对象用于同步块，即。

```
public myFunction (){
   synchronized (anyObject) { 
 }
} 
```

现在这个块可以基于这个对象进行同步。

至于使用 synchronized 关键字的情况，其同步范围取决于调用对象。

希望这对您有所帮助。享受编码！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T06:27:03.073

如果你有方法

```
public synchronized void methodA()
{
    while(condition)
    {
        // do Something That Takes A Minute ;
    } 
    // do Something That Needs A Lock;
    while(condition)
    {
        // do Something That Takes Another Minute ;
    } 
} 
```

它将保持锁定 2 分钟以上

```
public void methodA()
{
    while(condition)
    {
        // do Something That Takes A Minute ;
    } 
    synchronized(this)
    {
        // do Something That Needs A Lock;
    } 
    while(condition)
    {
        // do Something That Takes Another Minute ;
    } 
} 
```

在高并发应用程序的情况下，持有锁的时间差异非常显着。

可以说，您可以将方法 2 分解为 2 个方法并在方法级别应用同步，但这有时可能会导致代码错误。

所以这两个工具都是由 Java 提供的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-17T06:41:56.507

**看到不同**

*   当您同步方法时，方法被此对象隐式锁定，并且您锁定了整个方法，即使所有内容可能对锁定都不重要。（性能下降）。

*   当你同步你的块时，你选择了锁定的关键代码（性能改进），你可以选择锁定对象。[假设您有多个对象执行重要操作，例如预订可用座位，并且您有多个预订请求。您可能不允许所有人同时预订，也不想锁定此（当前对象）。在这种情况下，您需要有公共对象来获取锁定并执行操作。一次，任何一个对象都可以获取 Lock。因此，您保证一次只能预订一张请求者的票。因此，不允许重复预订]。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-17T06:07:00.690

不同之处在于互斥的粒度。使用上面的代码，一次只能有一个线程调用 Method1；多个线程可能会调用 myFunction。但是，由于 myFunction 除了输入在“this”上同步的块之外什么都不做，因此没有实际区别。但是，myFunction 可能包含同步保护之外的其他代码，这些代码可以由多个线程同时执行。

# blackberry - 调用快照方法时获取空值

> ID：10185871
> 
> 赞同：0
> 
> 时间：2012-04-17T05:55:06.153
> 
> 标签：blackberry, blackberry-simulator, blackberry-eclipse-plugin

我创建了一个黑莓相机应用程序。在此应用程序中，我尝试在调用相机时自动拍照。我的相机被调用但没有自动拍照。我正在遵循此代码。

```
public class Test extends MainScreen  implements FileSystemJournalListener {
    long _lastUSN;
    ButtonField btnTakePhoto;
    String capturedImgPath = "";
    VideoControl videoControl;
    Timer objTimer;
   Player player;

    public Test()
    {
        super();
        btnTakePhoto    =   new ButtonField("Take Picture",ButtonField.VCENTER|ButtonField.BOTTOM);
        btnTakePhoto.setChangeListener(TakePictureListener);

        HorizontalFieldManager hfm=new HorizontalFieldManager();    
        hfm.add(btnTakePhoto);
        add(hfm);

        System.out.println("Inside Construct");
        UiApplication.getUiApplication().addFileSystemJournalListener(this);
        _lastUSN = FileSystemJournal.getNextUSN();
        this.setTitle("Camera Class");

    }

    public void backGroundPaint(Graphics g)
    {
        System.out.println("Inside backGroundPaint");
        g.setBackgroundColor(Color.PINK);
        g.clear();

    }

    FieldChangeListener TakePictureListener = new FieldChangeListener(){

        public void fieldChanged(Field field, int context) {
            System.out.println("Inside fieldChanged");
            doTakePicture();
        }
    };
    public void doTakePicture(){
        try
        {

            System.out.println("Inside doTakePicture");
          Invoke.invokeApplication(Invoke.APP_TYPE_CAMERA,new CameraArguments());
          player = javax.microedition.media.Manager.createPlayer("capture://video??encoding=jpeg&width=240&height=240");
          player.realize();
          videoControl = (VideoControl) player.getControl("VideoControl");

          player.start();

          if(videoControl!=null)
          {
              Field videoField = (Field) videoControl.initDisplayMode (VideoControl.USE_GUI_PRIMITIVE, "net.rim.device.api.ui.Field");

              videoControl.setDisplayFullScreen(true);
              add((Field) videoControl);
              videoControl.setVisible(true);

          }

        }

    catch(Exception ex)
     {
        System.out.println(ex);
        Dialog.alert(toString());

     }
    }

    public void invokeAction()
    {

         doTakePicture();

            System.out.println("Inside Invoke Action");
            try {
                byte[] snapshot = videoControl.getSnapshot(null);
                //player.close();
                System.out.println("snapshot=="+snapshot);
                EncodedImage bitmap=EncodedImage.createEncodedImage(snapshot, 0, snapshot.length);
                System.out.println("bitmap=="+bitmap);
                BitmapField field1 = new BitmapField(); 
                System.out.println("field1=="+field1);
                 field1.setImage(bitmap); 
                 add(field1);
            } catch (MediaException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }

}  

    public void fileJournalChanged() 
    {

    System.out.println("Inside fileJournalChanged");
        long nextUSN = FileSystemJournal.getNextUSN();
        String msg = null;
        String path = null;
        for (long lookUSN = nextUSN - 1; lookUSN >= _lastUSN && msg == null; --lookUSN) 
        {
            FileSystemJournalEntry entry = FileSystemJournal.getEntry(lookUSN);

            if (entry == null) 
            { 
                break;
            }

             path = entry.getPath();
             System.out.println("Path=="+path);

            if (path != null)               
            {
             if (path.endsWith("png") || path.endsWith("jpg") || path.endsWith("bmp") || path.endsWith("gif") ){    
                switch (entry.getEvent()) 
                {

                    case FileSystemJournalEntry.FILE_ADDED:
                        System.out.println("Inside FILE_ADDED");
                        msg = "File was added.";
                        break;

                    case FileSystemJournalEntry.FILE_DELETED:
                        System.out.println("Inside FILE_DELETED");
                        msg = "File was deleted.";
                        break;
                }
             } 
            }
        }
        _lastUSN = nextUSN;

        if ( msg != null ) 
        {
            Dialog.alert(msg);
            capturedImgPath =   path;
            closeCamera();
        }
    }
   private void closeCamera()
    {
        int menuOrder =6;
        System.out.println("Inside Close Camera");
        EventInjector.invokeEvent(new EventInjector.KeyCodeEvent(EventInjector.KeyCodeEvent.KEY_DOWN, (char)Keypad.KEY_MENU, KeypadListener.STATUS_NOT_FROM_KEYPAD, 0));
        EventInjector.invokeEvent(new EventInjector.TrackwheelEvent(EventInjector.TrackwheelEvent.THUMB_ROLL_DOWN, menuOrder, KeypadListener.STATUS_NOT_FROM_KEYPAD));
        EventInjector.invokeEvent(new EventInjector.TrackwheelEvent(EventInjector.TrackwheelEvent.THUMB_CLICK, 1, KeypadListener.STATUS_NOT_FROM_KEYPAD));
        Dialog.alert("The captured Image path is "+capturedImgPath);
   }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T05:59:44.400

试试这个代码。

```
import javax.microedition.media.Player;
import javax.microedition.media.control.VideoControl;

import net.rim.device.api.system.Bitmap;
import net.rim.device.api.ui.Field;
import net.rim.device.api.ui.UiApplication;
import net.rim.device.api.ui.component.BitmapField;
import net.rim.device.api.ui.component.Dialog;
import net.rim.device.api.ui.container.MainScreen;

public class ImageCaptureDemo extends UiApplication
{
    public static void main(String[] args)
    {
        ImageCaptureDemo app = new ImageCaptureDemo();
        app.enterEventDispatcher();
    }

public ImageCaptureDemo()
{
    pushScreen(new ImageCaptureDemoScreen());
}   

class ImageCaptureDemoScreen extends MainScreen
{   
    Player _p;
    VideoControl _videoControl;    

    public ImageCaptureDemoScreen()
    {
        try 
        {
            _p = javax.microedition.media.Manager.createPlayer("capture://video?encoding=jpeg&width=1024&height=768");
            _p.realize();
            _videoControl = (VideoControl) _p.getControl("VideoControl");

            if (_videoControl != null)
            {
                Field videoField = (Field) _videoControl.initDisplayMode (VideoControl.USE_GUI_PRIMITIVE, "net.rim.device.api.ui.Field");
                _videoControl.setDisplayFullScreen(true);
                _videoControl.setVisible(true);
                _p.start();

                /*EnhancedFocusControl efc = (EnhancedFocusControl)p.getControl("net.rim.device.api.amms.control.camera.EnhancedFocusControl");
                efc.startAutoFocus();*/

                if(videoField != null)
                {
                    add(videoField);
                }
            } 
        }
        catch(Exception e)
        {
            Dialog.alert(e.toString());
        }
    }

    protected boolean invokeAction(int action)
    {
        boolean handled = super.invokeAction(action); 

        if(!handled)
        {
            if(action == ACTION_INVOKE)
            {   
                try
                {                      
                    byte[] rawImage = _videoControl.getSnapshot(null);  
                    Bitmap image = Bitmap.createBitmapFromBytes(rawImage, 0, rawImage.length, 100);
                    BitmapField bitmapField = new BitmapField();
                    bitmapField.setBitmap(image);
                    this.add(bitmapField);

                }
                catch(Exception e)
                {
                    Dialog.alert(e.toString());
                }
            }
        }           
        return handled;                
    }  
} 
```

}

# android - 如何在Android中将两个按钮放在同一行

> ID：10185874
> 
> 赞同：14
> 
> 时间：2012-04-17T05:55:22.837
> 
> 标签：android, android-layout, android-button

如何在我的 Android 应用程序的登录布局中将两个按钮放在同一行？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-04-17T06:02:27.553

只需做一个线性布局。将方向设置为水平并添加两个按钮。它准备好你会得到你想要的。在发布这样的问题之前尝试谷歌搜索你会得到肯定的答案。这段代码会帮助你。

```
<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content" >

    <Button
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Button" />

    <Button
        android:id="@+id/button2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Button" />

</LinearLayout> 
```

如果您想在布局中放置两个按钮。将两个按钮的权重设为 1。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-04-17T06:07:26.103

最好的解决方案是在 LinearLayout中放置**2 个按钮（宽度相等） 。**

还有一件事，如果您想要相等的“宽度”按钮，那么将具有 0dp 宽度和相同权重的按钮用于所有按钮。

如果您想要相等的“高度”按钮，那么将具有 0dp 高度和相同权重的按钮用于所有按钮。

```
<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content" >

    <Button
        android:id="@+id/button1"
        android:layout_width="0dp"
        android:layout_weight="1"
        android:layout_height="wrap_content"
        android:text="Button" />

    <Button
        android:id="@+id/button2"
        android:layout_width="0dp"
        android:layout_weight="1"
        android:layout_height="wrap_content"
        android:text="Button" />

</LinearLayout> 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-04-17T06:07:09.300

使用这个把两个按钮放在同一行....

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"

   >
    <Button
    android:id="@+id/login"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="Login"
    android:layout_alignParentBottom="true"
    />
      <Button
    android:id="@+id/cancel"     
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="Cancel"
    android:layout_toRightOf="@+id/login"
    android:layout_alignParentBottom="true"
    />
      </RelativeLayout> 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-04-17T06:03:35.877

您需要添加线性布局（水平）。那么你可以在一行中添加许多按钮......
你也可以为此使用相对布局。
这是给你的代码......

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
 xmlns:android="http://schemas.android.com/apk/res/android"
 android:orientation="vertical"
 android:layout_width="fill_parent"
 android:layout_height="fill_parent">
<LinearLayout android:layout_width="fill_parent" android:id="@+id/linearLayout1" android:layout_height="wrap_content">
    <Button android:text="Button" android:id="@+id/button1" android:layout_width="wrap_content" android:layout_height="wrap_content"></Button>
    <Button android:text="Button" android:id="@+id/button2" android:layout_width="wrap_content" android:layout_height="wrap_content"></Button>
    <Button android:text="Button" android:id="@+id/button3" android:layout_width="wrap_content" android:layout_height="wrap_content"></Button>
    <Button android:text="Button" android:id="@+id/button4" android:layout_width="wrap_content" android:layout_height="wrap_content"></Button>
</LinearLayout> 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-04-17T06:03:17.367

您可以使用一种水平方向的线性布局并在其中添加两个按钮

```
<LinearLayout

   <Button1.../>
   <Button2.../>
</LinearLayout> 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-04-17T06:04:28.740

我认为您需要使用RelativeLayout。您可以执行以下操作：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout 
  xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_height="wrap_content" android:orientation="horizontal"
    android:layout_width="fill_parent">

    <Button

        android:text="@+id/Button01" 
        android:id="@+id/Button01"
        android:layout_width="wrap_content" 
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true">
    </Button>

    <Button

        android:text="@+id/Button02" 
        android:id="@+id/Button02"
        android:layout_width="wrap_content" 
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true">
    </Button>

</RelativeLayout> 
```

你也可以参考这个。 [http://www.mkyong.com/android/android-relativelayout-example/](http://www.mkyong.com/android/android-relativelayout-example/)

希望这会帮助你。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-04-17T06:05:35.073

如果您将按钮放置在 LinearLayout 中，请将 Orientation 值指定为“Vertical”，它会自动将按钮放置在同一行中。如果您使用的是 RelativeLayout，那么对于一个按钮，使用 android:layout_toLeftOf 或 android:layout_toRightOf 并将值作为其他按钮的 ID。如果你答对了，请将其标记为答案。谢谢...

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-07-05T03:08:03.007

您可以使用水平方向的线性布局并在其中添加两个按钮：-

```
 <LinearLayout
    android:id="@+id/btn_action_wallet_container"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_marginStart="20dp"
    android:layout_marginEnd="20dp"
    android:layout_below="@id/ll_total_coin_container"
    android:layout_marginTop="20dp"
    android:orientation="horizontal">

    <Button
        style="@style/Widget.MaterialComponents.Button.OutlinedButton.Icon"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:fontFamily="@font/lato_black"
        android:layout_weight="2"
        android:text="Redeem" />

    <Space
        android:layout_width="20dp"
        android:layout_height="wrap_content" />

    <com.google.android.material.button.MaterialButton
        style="@style/Widget.MaterialComponents.Button.OutlinedButton.Icon"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:text="Earn More"
        android:layout_weight="2"
        android:fontFamily="@font/lato_black" />

</LinearLayout> 
```

*运行它，看看它是如何工作的*

# c# - 按钮应该像上下滚动一样工作

> ID：10185877
> 
> 赞同：0
> 
> 时间：2012-04-17T05:55:49.140
> 
> 标签：c#, windows-applications

我有一个 Windows 应用程序，其中有两个按钮用于在 gridview 中上下移动项目。

`But the problem is:`

只有当我释放键时才会调用 click 事件。

`What I need:`

当我按住键时单击事件应该触发，当我释放键时应该停止。表示类似向上和向下滚动按钮。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T05:59:33.250

不要使用点击事件。使用 MouseDown 和 MouseUp 事件。

或者，如果您想处理按键，请使用 KeyDown 和 KeyUp 事件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T06:03:06.753

例如，在按钮的 MouseDown 事件中更改某些类级别成员

```
blnButtonPressed = ture; 
```

关于按钮更改的 MouseUp 事件

```
blnButtonPressed = false; 
```

做你在这两种状态之间所做的一切......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T06:57:40.820

您可以创建自定义按钮，当它被按下时会引发 Click 事件。这是执行此操作的简单方法：

```
public class PressableButton : Button
{
    private Timer _timer = new Timer() { Interval = 10 };

    public PressableButton()
    {
        _timer.Tick += new EventHandler(Timer_Tick);
    }

    private void Timer_Tick(object sender, EventArgs e)
    {
        OnClick(EventArgs.Empty);
    }

    protected override void OnMouseDown(MouseEventArgs mevent)
    {
        base.OnMouseDown(mevent);
        _timer.Start();
    }

    protected override void OnMouseUp(MouseEventArgs mevent)
    {
        base.OnMouseUp(mevent);
        _timer.Stop();
    }      
} 
```

按下按钮后，计时器每 10 毫秒开始计时（您可以更改间隔）。在计时器滴答事件处理程序上，此按钮引发 Clieck 事件。

要使用它，只需编译项目并将 PressedButton 从 ToolBox 拖到您的表单中。

# powershell - PowerShell相等运算符不是对称关系？

> ID：10185879
> 
> 赞同：9
> 
> 时间：2012-04-17T05:55:57.210
> 
> 标签：powershell

有人可以向我解释为什么PowerShell中的相等运算符不是对称关系吗？

```
PS> "" -eq 0
False
PS> 0 -eq ""
True 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-17T06:13:36.627

是的，`-eq`在 PowerShell 中不是等价关系。虽然理论家此时可能会惊恐万分，但这主要是为了让语言更好地传达思想并更易于理解。

例如，PowerShell*总是*尝试将二进制运算符中的不同类型转换为*左*操作数的类型，这就是您在问题中看到行为的原因。在实践中，我发现这几乎不是问题，除了人为的例子。在我自己的数据中，我通常会编写与匹配类型的比较，并且在使用其他数据时，转换*通常*不会有害，因为它们会破坏含义。在这种情况下，我认为语言的*可预测性*比获得数学理想更重要（鉴于计算机中的数字只是数学实体的近似值，无论如何这在任何地方都无法实现）。

另一件事是，如果比较运算符 ( `-eq`, `-gt`, `-lt`, `-ge`, `-le`, `-match`, ...) 的左操作数是一个集合，则该运算符将返回该运算符将产生 true 的集合中的所有项。在这种情况下，您可以在不需要 a 的情况下快速过滤集合`where`，*但*我想真正的优势是您可以编写条件`if ($foo -gt 4)`，这可能意味着 »if`$foo`是一个大于 4 的标量值« 或 »if`$foo`是一个集合包含大于 4« 的物品，无需将管道插入`if`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T06:06:51.067

这是 PowerShell 尝试转换类型然后进行比较的方式。

检查这个：

```
$false -eq "" 
```

这也返回 True 。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T06:12:40.380

我的第一个猜测是，在第一种情况下，右手操作数从 0 转换为“0”（左手运算符的类型是字符串），因此“”不等于“0”。在第二种情况下，存在从“”到int的转换，“”被认为是0。

试试 3 + ""

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-17T06:17:36.330

当你这样做时`"" -eq 0`，它与它相同`"".equals(0)`并且它返回false。

`0 -eq ""`将尝试转换`""`为 in 并且`[int]""`为 0，因此你得到了真实的结果。

# mirc - 从 MT4 将交易发布到 IRC

> ID：10185881
> 
> 赞同：0
> 
> 时间：2012-04-17T05:56:07.677
> 
> 标签：mirc, metatrader4, mql4

我试图创建自己的小程序来将我的交易发布到 IRC。我在完成程序时遇到了麻烦。

然后我发现这个程序基本上完成了我想要做的事情。有两个问题：第一个问题是，我只想要一个简单的程序，它可以使用 mIRC 的 DDE 将我的买入、卖出、空头和覆盖发布到 IRC，因为我想以与其他交易者相同的格式发布交易。

第二个问题是，MT4 EA 似乎没有做任何事情。它没有连接到 IRC。MT4 专家和日志选项卡显示 EA 工作正常。我输入了服务器、频道和昵称的有效信息。我已经禁用了我的防火墙。我可以通过 IRC 客户端连接到服务器端口 6667。有人可以引导我朝着正确的方向前进吗？或者也许告诉我代码有什么问题？

编辑：我在 MT4 的“专家”选项卡中注意到 [握手错误：0] 和 [连接错误：0]

完整的 MT4 EA 脚本副本位于本页底部 [向下箭头]：[http ://sites.google.com/site/prof7bit/irc_signal/experimental-new-version](http://sites.google.com/site/prof7bit/irc_signal/experimental-new-version)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T09:24:28.647

该脚本运行良好，但对我来说有点过于臃肿，而且缺少我需要的一个小功能，所以我会将我自己的版本注入其中并进行清理。

问题是服务器。我不知道为什么没有建立连接，但我在另一台服务器上尝试了脚本，它连接并发布了我的交易，速度非常快。

这打开了其他选项。因为我无法连接到其他服务器，所以我可以向 mIRC 发送命令，而 mIRC 又可以通过内部脚本处理我需要完成的事情。我宁愿不这样做，所以我希望我能找出为什么其他服务器不承认或允许我的连接。

编辑：

我在这里回答了我自己的问题。

[Winsock - 为什么 ZNC（和 IRC 保镖）不接受我的 winsock 连接？](https://stackoverflow.com/questions/10343533/winsock-why-isnt-znc-and-irc-bouncer-accepting-my-winsock-connection)

我尝试了以编程方式直接连接到 mirc 并发布交易的建议，这种方式提出了太多问题需要解决，而且对于任何实际使用来说都太慢了。我从来没有为 mirc 编写一个 dll，它的执行速度可能要快得多。如果你仍然想做这样的事情，我使用了一个名为 pywinauto 的自动化编程 python 库。

我使用上面的脚本发布我的交易，但我是通过 ZNC 保镖完成的。这样，ZNC 为我完成所有授权。我只需要通过 ZNC 进行身份验证。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T23:35:27.090

你看过这部分剧本吗？

```
/**
* this will be called by start()
* every minute. The server won't 
* send us pings then. (at least 
* the unreal ircd at ircforex behaves 
* this way). So we dont need to
* handle any incoming messages at all!
*/
void keepAlive(){
   static int last_time;
   int error;
   if (TimeCurrent() - last_time > 60){
          // send an empty line to the server. This will keep pings away.
      sendLine("");
      error = WSAGetLastError();
      last_time = TimeCurrent();
      if (error != 0){
         // we were disconnected, so reconnect.
         ircconnect();
         message("reconnect after timeout.");
         messageSummary();
      }
   }
} 
```

那可能是你的问题所在......

# php - 使用 Twitter 上传、update_with_media API 和 curl

> ID：10185882
> 
> 赞同：2
> 
> 时间：2012-04-17T05:56:09.167
> 
> 标签：php, api, twitter, curl, upload

我想用“照片 URL”更新 twitter 状态。

这是我的代码：

```
curl_setopt($ci, CURLOPT_CUSTOMREQUEST, 'POST');
curl_setopt($ci, CURLOPT_RETURNTRANSFER, TRUE);
curl_setopt($ci, CURLOPT_SSL_VERIFYPEER, FALSE);
curl_setopt($ci, CURLOPT_URL, 'https://upload.twitter.com/1/statuses/update_with_media.json');
curl_setopt($ci, CURLOPT_VERBOSE, FALSE);

curl_setopt($ci, CURLOPT_POSTFIELDS, array('media'=> '@http://sample.com/image.jpg', 'status'=>'This is a test image!'));
//'media' =>'@http://sample.com/image.jpg;type=image/jpeg;filename=image.jpg' doesn't work, too

$response = curl_exec($ci); 
```

我也尝试使用apigee但不成功[点击这里测试它！](https://apigee.com/console/twitter?req=%7B%22resource%22%3A%22statuses_update_with_media%22%2C%22params%22%3A%7B%22query%22%3A%7B%22status%22%3A%22test%22%2C%22media%22%3A%22%40https%3A%2F%2Fapigee.com%2Fimages%2Fapigee_logo.png%22%7D%2C%22template%22%3A%7B%22format%22%3A%22json%22%7D%2C%22headers%22%3A%7B%22Content-Type%22%3A%22multipart%2Fform-data%22%2C%22User-Agent%22%3A%22Mozilla%2F5.0%20%28Windows%20NT%206.1%29%20AppleWebKit%2F535.19%20%28KHTML%2C%20like%20Gecko%29%20Chrome%2F18.0.1025.162%20Safari%2F535.19%22%7D%2C%22body%22%3A%7B%22requestBody%22%3A%22null%22%7D%7D%2C%22verb%22%3A%22post%22%7D)

PS：我不想使用 tmhOAuth 类！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-15T09:46:46.813

最后，

我被迫使用预制库仅用于图像上传： [https ://github.com/themattharris/tmhOAuth](https://github.com/themattharris/tmhOAuth)

您可以使用身份验证变量对其进行播种。如果您真的需要，您仍然可以将自己的代码用于其他 API 请求。

# lisp - 理解 Common Lisp do 宏语法

> ID：10185884
> 
> 赞同：10
> 
> 时间：2012-04-17T05:56:18.807
> 
> 标签：lisp, iteration, common-lisp

```
(do ((n 0 (1+ n))
     (cur 0 next)
     (next 1 (+ cur next)))
    ((= 10 n) cur))) 
```

这是 Lisp 教科书中关于关键字“do”的示例

“做”基本模板是：

```
(do (variable-definitions*)
    (end-test-form result-form*)
 statement*) 
```

但是，对于这个例子，我不清楚哪一部分是哪一部分。还有，中间的两条线是做什么的？

谢谢！

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-04-17T06:04:18.100

```
(do ((n 0 (1+ n))  ;declares n, initially 0, n+1 each subsequent iteration)
     (cur 0 next)   ;declares cur, initially 0, then old value of next
     (next 1 (+ cur next))) ;declares next, initially 1, then the sum of (the old) cur and next
    ((= 10 n) ;end condition (ends when n = 10)
     cur)    ; return value
  ;empty body
  ) 
```

翻译成类 c 代码

```
for(n=0, cur=0, next=1 ;
    !(n == 10) ;
    n=old_n+1, cur=old_next, next = old_cur + old_next)
{
    //do nothing 
    old_n = n;
    old_cur = cur;
    old_next = next;
}
return cur; 
```

顺便说一句，您应该能够看到此代码返回第 10 个斐波那契数

* * *

**可选的 EBNF/正式语法：**

根据[Hyperspec](http://www.lispworks.com/documentation/HyperSpec/Body/m_do_do.htm)的语法是：

```
(do ({var | (var [init-form [step-form]])}*) 
    (end-test-form result-form*) 
    declaration* 
    {tag | statement}*) 
```

理解这一点需要了解[EBNF](http://en.wikipedia.org/wiki/Extended_Backus%E2%80%93Naur_Form)和 Hyperspec 的大部分内容

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-04-17T19:16:56.077

您的良好缩进清楚地显示了哪个部分是哪个：

```
(do ((n 0 (1+ n))
    ^(cur 0 next)
    |(next 1 (+ cur next)))
    |
    +-- first argument of do

    ((= 10 n) cur)))
    ^
    |
    +-- start of second argument of do 
```

看，它们排列得很好，内部材料是缩进的：

```
 ((n 0 (1+ n))
    (cur 0 next)
    (next 1 (+ cur next)))
    ^
    |
    +- inner material of argument: three forms which are
       indented by 1 character and aligned together. 
```

你`do`在那里没有第三个论点：没有语句体（空循环）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-07-14T17:03:01.793

有时它可以帮助 1\. 用注释注释表单和 2\. 打印正文中的当前值，如下所示：

```
(do
 ;; varlist
 ((n 0 (1+ n))
  (cur 0 next)
  (next 1 (+ cur next)))
 ;; endlist
 ((= 10 n) cur)
  ;; body
  (print (list n cur next))) 
```

这打印

```
(0 0 1) 
(1 1 1) 
(2 1 2) 
(3 2 3) 
(4 3 5) 
(5 5 8) 
(6 8 13) 
(7 13 21) 
(8 21 34) 
(9 34 55) 
55 
```

这应该澄清问题。@_@

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-17T06:05:57.443

```
(do ((n 0 (1+ n))
     (cur 0 next)
     (next 1 (+ cur next)))
    ((= 10 n) cur)) 
```

做有3部分。

1.  多变的
2.  终止条件
3.  身体

在此特定示例中，没有主体。1\. 和 2 完成的所有实际工作。首先它设置 3 个变量并给出初始值和步骤形式。例如`n`设置为 0 并且在每次迭代期间它会更进一步：`(1+ n)`这将增加`n`

终止条件是`((= n 10) cur)`：当`n`等于 10 时。然后返回`cur`作为这个`do`表达式的整个返回值。

结合所有这些，在这个`do`例子中，它将从 1 到 10 相加，得出 55

# android - android：将文件附加到邮件

> ID：10185887
> 
> 赞同：4
> 
> 时间：2012-04-17T05:56:40.377
> 
> 标签：android, android-intent, email-attachments

我有这个发送邮件的代码：

```
Intent i = new Intent(Intent.ACTION_SEND);
i.setType("text/plain");
i.putExtra(Intent.EXTRA_EMAIL  , new String[]{"MyMail@gmail.com"});
i.putExtra(Intent.EXTRA_SUBJECT, "subject of email");
i.putExtra(Intent.EXTRA_TEXT   , "body of email");
try {
     startActivity(Intent.createChooser(i, "Send mail..."));
} catch (android.content.ActivityNotFoundException ex) {
     Toast.makeText(BladeActivity.this, "There are no email clients installed.", Toast.LENGTH_SHORT).show();
} 
```

如何将文件附加到此邮件：`/sdcard/MyFile.csv`

谢谢，

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-17T06:00:33.413

试试这个：

```
i.putExtra(Intent.EXTRA_STREAM, Uri.parse("file:///sdcard/MyFile.csv")); 
```

并确保您具有访问外部存储所需的权限。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T06:00:23.007

这是在邮件中附加文件的代码...当我尝试发送邮件时，此代码有效。

```
Intent sendIntent = new Intent(Intent.ACTION_SEND);
sendIntent.setType("text/plain");
sendIntent.putExtra(Intent.EXTRA_SUBJECT, "Subject of Email");
sendIntent.putExtra(Intent.EXTRA_STREAM, Uri.parse("/mnt/sdcard/MyFile.csv"));
sendIntent.putExtra(Intent.EXTRA_TEXT, "Enjoy the mail");
startActivity(Intent.createChooser(sendIntent, "Email:")); 
```

在 manifest.xml 文件中添加以下权限。

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" /> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-17T06:13:05.723

使用此代码..

```
Intent intent = new Intent(android.content.Intent.ACTION_SEND);
intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);   
intent.putExtra(Intent.EXTRA_STREAM, Uri.parse("file:/"+arr));
intent.setType("image/jpg"); 
startActivity(intent); 
```

# android - 如何动态清空或清除堆内存

> ID：10185890
> 
> 赞同：2
> 
> 时间：2012-04-17T05:57:01.173
> 
> 标签：android, heap-memory, forceclose

我的项目完全基于图像。我在我的项目中使用画廊和封面流，由于堆大小较小，应用程序被强制关闭。

所以每次我加载我的应用程序时，我都想清除堆大小，这样我就可以重用它。
我`System.gc() & recycle ()`在画廊和封面流中使用了方法，但我的画廊和封面流是相互关联的，因此对象总是被引用，因此`System.gc()`没有`recycle()`效果，我的画廊和封面流在使用它时仍然会在随机时间点崩溃。

出于某种原因，我无法在此处显示我的代码，即使它非常大，所以我无法在此处显示。

请帮助我并感谢您阅读此问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-03T12:36:01.583

增加堆空间..并打开自动删除，如果你去偏好和管理堆空间，就像在eclipse中一样；你可以点击那里的垃圾桶按钮

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T06:20:30.307

要控制由于此内存问题导致的崩溃，您需要这样做：

```
BitmapFactory.Options options=new BitmapFactory.Options();
options.inSampleSize = 8;
Bitmap preview_bitmap=BitmapFactory.decodeStream(is,null,options); 
```

inSampleSize 值减少了内存消耗。

可以从此线程获得更多信息：

[将图像加载到 Bitmap 对象时出现奇怪的内存不足问题](https://stackoverflow.com/questions/477572/android-strange-out-of-memory-issue-while-loading-an-image-to-a-bitmap-object)

希望这会帮助你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T06:02:08.460

好吧，您无法真正控制强制 GC 运行。它自己运行，只要它认为是时候了。

[System.gc() 什么时候做任何事情](https://stackoverflow.com/questions/66540/system-gc-in-java)

因此，您唯一的选择是明智地使用图像和位图。

提示 => 使用软引用。 [http://developer.android.com/reference/java/lang/ref/SoftReference.html](http://developer.android.com/reference/java/lang/ref/SoftReference.html)

# node.js - Nodejs，等到当前请求完成，然后继续（或）等到第一个函数执行，然后再转到第二个函数

> ID：10185891
> 
> 赞同：3
> 
> 时间：2012-04-17T05:57:03.217
> 
> 标签：node.js

我使用nodejs代码：

```
var ret = firstfunction();  //this calls database and gets some return value
var output = secondfunction(ret); // in this function we used ret as parameter 
```

在`firstfunction()`完成之前，并且在它获得值“ret”之前，第二个函数使用参数“undefined”执行，因为“ret”尚不可用，导致错误。

只有在第一个函数完成执行后，我才能执行第二个函数。

```
var uname = "sachin";
var noqq=UserModel.find({uname:uname},function(err,user){
if(!err){
    myid=user[0]._id;  //SAVING myid here , I AM USING THIS IN THE NEX FUNCTION
    return myid;
}else { 
     return null;
    }
}); 
```

下面的函数应该只有在上面的一个完成之后才能执行，即只有在获得“myid”之后。

```
var ret=CollegeModel.findById(myid, function(err,colleges){
if(!err)
{
    res.send(questions);
}
else {
    res.send(err);
}
}); 
```

请告诉我实现我的代码的答案。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T06:15:11.023

使用 Node，你必须学会​​异步做事。您可以使用它的许多同步方法，但您会失去完全非阻塞的好处。

所以在不知道里面有什么的情况下`firstfunction`，你可能有一个异步方法。如果是这样，`firstfunction`则在返回异步方法之前返回（在内部，它甚至可能没有被调用）。您需要做的就是将您发送`secondfunction`到`firstfunction()`. 最简单的方法是`secondfunction`作为参数传递给`firstfunction`. 您的代码将如下所示：

```
var firstfunction = function(myCallback) {
    var dbSuccessCallback = function(returedData) {
        // the asynchronous call has retured successfully with data

        myCallback(returnedData); 
    };
    callDatabase("SELECT a FROM b", dbSuccessCallback);
}

firstfunction(secondfunction); 
```

如果您在 HTML 中进行事件绑定，您可能已经非常习惯这样做：

```
mydiv.addEventListener('click',function(){/* Do something */}, true); 
```

或其他方式：

```
var myCallback = function(){
    /* Do something */
};
mydiv.addEventListener('click',myCallback, true); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T21:16:34.977

查看 node-async 库，了解一些围绕常见模式的漂亮包装器，例如：[https ://github.com/caolan/async](https://github.com/caolan/async)

听起来系列或瀑布都适合您的用例。

# windows - Windows Azure Node.js 调试

> ID：10185892
> 
> 赞同：1
> 
> 时间：2012-04-17T05:57:11.483
> 
> 标签：windows, node.js, azure

有没有人有在 Windows azure sdk for node.js 中创建 node.js 应用程序的经验？

我已经完成了这些教程：

[https://www.windowsazure.com/en-us/develop/nodejs/](https://www.windowsazure.com/en-us/develop/nodejs/)

但现在需要启用调试以逐步执行代码并修复错误等。

我尝试使用以下命令打开 iisnode 调试：

```
<iisnode 
  debuggingEnabled="true"
  loggingEnabled="true"
  devErrorsEnabled="true"
/> 
```

但是当我导航到：127.0.0.1:81/server.js/debug 我得到一个 404 file not found 错误。在 windows azure 模拟器的情况下，有什么特别的事情要做以使调试器工作......

任何帮助或建议将不胜感激。

如果可能的话，一步一步的指导会很有帮助。

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T21:31:41.563

IISnode 有两个版本，一个“完整”版本和一个“核心”版本。“完整”版本包含与节点检查器的挂钩，它允许您使用您通过浏览到 /debug 时提到的 debuggingEnabled 配置字符串进行调试

不幸的是，Windows Azure SDK for node.js 默认只安装了“核心”版本

您可以从 iisnode 存储库下载 MSI 并安装完整版本：

[https://github.com/WindowsAzure/iisnode/downloads](https://github.com/WindowsAzure/iisnode/downloads)

然后您应该能够浏览到 http:///debug/ 以在 node-inspector 中调试您的 Web 应用程序（使用支持 WebKit 的浏览器，如 chrome 或 safari）。

-标记

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T01:58:05.103

如果您使用 WebMatrix 2 开发您的 Node.js 应用程序，那么您可以下载 Node.js 的调试扩展。这将安装所需的文件并向 WebMatrix 添加一个调试按钮。只需在扩展库中搜索“调试”即可下载并安装 Node.js 调试扩展。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T09:53:54.060

不确定是否使用 Azure 工具（模拟器）进行本机调试，但 Cloud9 IDE [http://c9.io/](http://c9.io/)提供了广泛的 Node.js 调试功能以及对部署到 Azure 的本机支持......

高温高压

更新，我认为您可能需要以旧方式使用调试消息（见下文），我个人会给 Cloud9 IDE 一个 bash

console.log(“我的调试信息”)

节点检查器（Chrome/Safari/FireFox）

[http://howtonode.org/debugging-with-node-inspector](http://howtonode.org/debugging-with-node-inspector)

# android - 如果在android的页面中没有选中任何复选框，如何向arraylist添加值？

> ID：10185895
> 
> 赞同：0
> 
> 时间：2012-04-17T05:57:28.343
> 
> 标签：android

我正在开发**测验应用程序**。对于每个问题，应选择**多个选项。**为此，我使用了复选框。**当复选框被选中时，我将选中的 id 值存储在 arraylist 中，如果未选中，我将从 arraylist 中删除该 id。**同样在此之前，我在数组列表中添加每个问题**的答案数量，**然后在下一个按钮中单击我添加一个“|”（或）符号来区分问题。

因此，例如显示 3 个问题....然后我的数组列表包含

![在此处输入图像描述](../Images/98b2b6d188f832f5c5ef29d76262e87f.png)

现在对于第一个问题，我选择了 3 个选项，对于第二个问题，我选择了 4 个选项，对于第三个问题，我没有选择任何选项。所以对于第三个问题，只有正确答案的数量和 | 符号显示。**但是现在我的问题是，如果没有选中任何复选框，我想在 arraylist 中传递一个值**。我怎样才能做到这一点？请帮助我解决这个问题......自3天以来一直在为此奋斗......

我的代码：

```
cbs[k].setOnClickListener(new View.OnClickListener() {
    public void onClick(View v) {

        if (((CheckBox) v).isChecked()) {

            selchkboxlist.add(Integer.toString(v
                    .getId()));

            System.out.println("chkboxlist size"
                    + selchkboxlist.size());

        } 
        else
        {

            selchkboxlist.remove(Integer.toString(v
                    .getId()));
            System.out
                    .println("after delete chkboxlist size"
                            + selchkboxlist.size());
            }

    }
}); 
```

将提前感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T06:20:43.520

然后在去下一个问题之前检查你的arraylist ..

```
 int k=yourlist.length();
  if(Integer.parseInt(yourlist.get(k-2))<=4){
 //then it is number of answers and no check box has been checked..
  arraylist.set(k-1,new String("some value to indicate nothing"));
  arraylist.add("|");

   } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T06:30:34.287

我假设您是在单击其他按钮时创建字符串，最终您会根据您的 selchkboxlist 形成您的字符串。在这种情况下，您可以做的是，在您生成此文本时，

```
if( selchkboxlist.length() <= 1 ){ //means that none of the checkboxes have been selected
    //Add the entry at selchkboxlist[0]
    //Add a "|"
} 
```

# android - 在 android 4.0 中使用 DiskLruCache 不提供 openCache 方法

> ID：10185898
> 
> 赞同：47
> 
> 时间：2012-04-17T05:57:43.143
> 
> 标签：android

有人在 DiskLruCache 上工作过吗？

[http://developer.android.com/training/displaying-bitmaps/cache-bitmap.html](http://developer.android.com/training/displaying-bitmaps/cache-bitmap.html)

提供了使用此缓存方法的示例。但我观察到 4.0 源代码中 DiskLruCache 的实现没有定义的方法。知道如何使用它吗？

* * *

## 回答 #1

> 赞同：119
> 
> 时间：2012-04-19T19:29:23.570

您可以使用[Picasso](http://square.github.io/picasso/)作为图像加载器。

**或者**

这就是我所做的：

我创建了一个名为 DiskLruImageCache 的类，其中包含一个 DiskLruCache [（来自 Jake Wharton 的那个）](https://github.com/JakeWharton/DiskLruCache)对象和开发指南上的简单实现中的相同方法（有效地显示位图）：

```
public class DiskLruImageCache {

    private DiskLruCache mDiskCache;
    private CompressFormat mCompressFormat = CompressFormat.JPEG;
    private int mCompressQuality = 70;
    private static final int APP_VERSION = 1;
    private static final int VALUE_COUNT = 1;
    private static final String TAG = "DiskLruImageCache";

    public DiskLruImageCache( Context context,String uniqueName, int diskCacheSize,
        CompressFormat compressFormat, int quality ) {
        try {
                final File diskCacheDir = getDiskCacheDir(context, uniqueName );
                mDiskCache = DiskLruCache.open( diskCacheDir, APP_VERSION, VALUE_COUNT, diskCacheSize );
                mCompressFormat = compressFormat;
                mCompressQuality = quality;
            } catch (IOException e) {
                e.printStackTrace();
            }
    }

    private boolean writeBitmapToFile( Bitmap bitmap, DiskLruCache.Editor editor )
        throws IOException, FileNotFoundException {
        OutputStream out = null;
        try {
            out = new BufferedOutputStream( editor.newOutputStream( 0 ), Utils.IO_BUFFER_SIZE );
            return bitmap.compress( mCompressFormat, mCompressQuality, out );
        } finally {
            if ( out != null ) {
                out.close();
            }
        }
    }

    private File getDiskCacheDir(Context context, String uniqueName) {

    // Check if media is mounted or storage is built-in, if so, try and use external cache dir
    // otherwise use internal cache dir
        final String cachePath =
            Environment.MEDIA_MOUNTED.equals(Environment.getExternalStorageState()) ||
                    !Utils.isExternalStorageRemovable() ?
                    Utils.getExternalCacheDir(context).getPath() :
                    context.getCacheDir().getPath();

        return new File(cachePath + File.separator + uniqueName);
    }

    public void put( String key, Bitmap data ) {

        DiskLruCache.Editor editor = null;
        try {
            editor = mDiskCache.edit( key );
            if ( editor == null ) {
                return;
            }

            if( writeBitmapToFile( data, editor ) ) {               
                mDiskCache.flush();
                editor.commit();
                if ( BuildConfig.DEBUG ) {
                   Log.d( "cache_test_DISK_", "image put on disk cache " + key );
                }
            } else {
                editor.abort();
                if ( BuildConfig.DEBUG ) {
                    Log.d( "cache_test_DISK_", "ERROR on: image put on disk cache " + key );
                }
            }   
        } catch (IOException e) {
            if ( BuildConfig.DEBUG ) {
                Log.d( "cache_test_DISK_", "ERROR on: image put on disk cache " + key );
            }
            try {
                if ( editor != null ) {
                    editor.abort();
                }
            } catch (IOException ignored) {
            }           
        }

    }

    public Bitmap getBitmap( String key ) {

        Bitmap bitmap = null;
        DiskLruCache.Snapshot snapshot = null;
        try {

            snapshot = mDiskCache.get( key );
            if ( snapshot == null ) {
                return null;
            }
            final InputStream in = snapshot.getInputStream( 0 );
            if ( in != null ) {
                final BufferedInputStream buffIn = 
                new BufferedInputStream( in, Utils.IO_BUFFER_SIZE );
                bitmap = BitmapFactory.decodeStream( buffIn );              
            }   
        } catch ( IOException e ) {
            e.printStackTrace();
        } finally {
            if ( snapshot != null ) {
                snapshot.close();
            }
        }

        if ( BuildConfig.DEBUG ) {
            Log.d( "cache_test_DISK_", bitmap == null ? "" : "image read from disk " + key);
        }

        return bitmap;

    }

    public boolean containsKey( String key ) {

        boolean contained = false;
        DiskLruCache.Snapshot snapshot = null;
        try {
            snapshot = mDiskCache.get( key );
            contained = snapshot != null;
        } catch (IOException e) {
            e.printStackTrace();
        } finally {
            if ( snapshot != null ) {
                snapshot.close();
            }
        }

        return contained;

    }

    public void clearCache() {
        if ( BuildConfig.DEBUG ) {
            Log.d( "cache_test_DISK_", "disk cache CLEARED");
        }
        try {
            mDiskCache.delete();
        } catch ( IOException e ) {
            e.printStackTrace();
        }
    }

    public File getCacheFolder() {
        return mDiskCache.getDirectory();
    }

} 
```

实用程序源代码是：

```
public class Utils {
    public static final int IO_BUFFER_SIZE = 8 * 1024;

    private Utils() {};

    public static boolean isExternalStorageRemovable() {
        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.GINGERBREAD) {
            return Environment.isExternalStorageRemovable();
        }
        return true;
    }

    public static File getExternalCacheDir(Context context) {
        if (hasExternalCacheDir()) {
            return context.getExternalCacheDir();
        }

        // Before Froyo we need to construct the external cache dir ourselves
        final String cacheDir = "/Android/data/" + context.getPackageName() + "/cache/";
        return new File(Environment.getExternalStorageDirectory().getPath() + cacheDir);
    }

    public static boolean hasExternalCacheDir() {
        return Build.VERSION.SDK_INT >= Build.VERSION_CODES.FROYO;
    }

} 
```

记得放

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" /> 
```

在您的 AndroidManifest.xml 上

我通过阅读[这段代码](http://grepcode.com/file_/repo1.maven.org/maven2/com.integralblue/httpresponsecache/1.0.0/com/integralblue/httpresponsecache/compat/libcore/net/http/HttpResponseCache.java/?v=source)和来自 Jake Wharton 的 DiskLruCache 的 javadoc找到了这种方法

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-03-22T21:18:56.910

您还可以使用[SimpleDiskCache](https://github.com/fhucho/simple-disk-cache)，它用对开发人员更友好的界面包装了 DiskLruCache。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-12T06:08:38.520

我根据@Platonius 发布的这段代码编写了一个库。它包括一些错误修复，例如 put() 方法中的频繁 IOExceptions 以及“无法删除文件”。它同时使用 LRU 和磁盘缓存：[https ://github.com/felipecsl/Android-ImageManager](https://github.com/felipecsl/Android-ImageManager)

# javascript - jsdom 不处理网页内的脚本

> ID：10185903
> 
> 赞同：5
> 
> 时间：2012-04-17T05:58:39.017
> 
> 标签：javascript, html, node.js, jsdom

我是nodejs的新手。我想使用 jsdom 来解析一些可能包含脚本代码的网页。但我得到错误说函数或变量没有定义。任何人都可以为此提供一些指导。

我的代码

```
var jsdom = require('jsdom');

jsdom.env({
  html: 'http://10.200.0.10:8080/test/a.html',
  scripts: [
    'http://code.jquery.com/jquery-1.5.min.js'
  ],
  done: function(errors, window) {
    var $ = window.$;
    window.onload();
    console.log(window.a);
  }
}); 
```

和这里的html页面

```
<html>
<head>
    <script>
    var a = 0;
    function loads(){
        a=1000;
    }
    </script>
</head>
<body onload='loads()'>
</body>
</html> 
```

并在下面收到错误消息

```
dfddddfdf
undefined:1: ReferenceError: loads is not defined
loads()
^
ReferenceError: loads is not defined
    at unknown source
    at /root/node_modules/jsdom/node_modules/contextify/lib/contextify.js:10:24
    at /root/node_modules/jsdom/lib/jsdom/level1/core.js:1024:50
    at /root/testnode.js:18:12
    at Array.0 (/root/node_modules/jsdom/lib/jsdom.js:199:39)
    at EventEmitter._tickCallback (node.js:192:40)

node.js:201
        throw e; // process.nextTick error, or 'error' event on first tick
              ^
ReferenceError: loads is not defined
    at unknown source
    at /root/node_modules/jsdom/node_modules/contextify/lib/contextify.js:10:24
    at /root/node_modules/jsdom/lib/jsdom/level1/core.js:1024:50
    at /root/testnode.js:18:12
    at Array.0 (/root/node_modules/jsdom/lib/jsdom.js:199:39)
    at EventEmitter._tickCallback (node.js:192:40) 
```

它报告未定义加载函数，但实际上已在网页中声明。

任何人都可以提供一些建议，或者只是简单地告诉我 jsdom 无法处理嵌入在页面中的脚本。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-17T08:04:01.320

这是您想要的代码：

```
var fs = require('fs');
var jsdom = require('jsdom');
var doc   = jsdom.jsdom(fs.readFileSync("a.html"), null, {
          features: {
            FetchExternalResources   : ['script'],
            ProcessExternalResources : ['script'],
            MutationEvents           : '2.0',
        }
    });

var window = doc.createWindow();
jsdom.jQueryify(window, "http://code.jquery.com/jquery-1.5.min.js", function() {
    console.log(window.a);
    console.log(window.$().jquery); //jquery version
}); 
```

您的代码将不起作用，因为该`jsdom.env`方法不处理脚本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T08:48:03.583

请注意，您应该使用很棒的 npm 库[请求](http://www.catonmat.net/blog/nodejs-modules-request/)

试试这个：

```
var http = require('http'),
    jsdom = require('jsdom'), 
    request = require('request');

var server = http.createServer(function (request, response) {
    getPage("http://isohunt.com/torrents/?iht=-1&ihq=life+is+beautiful", function (body) {
        jsdom.env({
            html: body,
            scripts: ['http://code.jquery.com/jquery-1.6.min.js']
        }, function(err, window){
            var $ = window.jQuery;
            //your code goes here

        });
    })
});
server.listen(3000);

function getPage(someUri, callback) {
    request({uri : someUri}, function (error, response, body) {
       callback(body);
    });
} 
```

# mobile - Opera mini 中的媒体查询 - 显示不正确

> ID：10185904
> 
> 赞同：1
> 
> 时间：2012-04-17T05:58:41.077
> 
> 标签：mobile, css, media-queries, opera-mini

为什么这个 CSS 在 Opera mini 中不起作用？

```
.gogogo{height:50px;width:100%;}
@media screen and (min-width:100px){
    .gogogo {background-color:red;}
}
@media screen and (min-width:320px){
    .gogogo {background-color:orangered;}
}
@media screen and (min-width:480px){
    .gogogo {background-color:orange;}
}
@media screen and (min-width:600px){
    .gogogo {background-color:yellowgreen;}
}
@media screen and (min-width:768px){
    .gogogo {background-color:green;}
} 
```

HTML：

```
<div class="gogogo"></div> 
```

[JSFiddle](http://jsfiddle.net/vhCLs/) , [CSSDesk](http://cssdesk.com/fPS2s)

我不只是在问这个问题，因为[这个网站](http://mediaqueri.es)在其中运行得很好……也许他们使用 javascript 来检测分辨率和其他东西？（我试图在源代码中找到它，但我的搜索不成功。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T17:51:39.243

Opera Mini 是一个瘦客户端，它接收在 Opera 服务器上预编译的“智能”图像 (OBML)。当您输入地址时，您手机上的瘦客户端会将其发送到 Opera 服务器，该服务器会向远程服务器发出真正的 HTTP 请求。然后 Opera 服务器接收响应，创建图像并将其发送回瘦客户端。所以本质上没有 css、html、js 到达瘦客户端。只是 OBML 图像。因此，当您更改设备的方向时，您需要重新加载页面才能生效。这是节省带宽 (80%) 和设备上的实时交互之间的权衡。

# jquery - JQuery：解析 XML 文档以查找带有特殊字符“：”的标签

> ID：10185914
> 
> 赞同：0
> 
> 时间：2012-04-17T05:59:31.510
> 
> 标签：jquery, jquery-mobile, xml-parsing

我必须解析具有某些标签的 xml 文档，如下所示：

```
 <result>
            <ns0:Item>
                <ItemID>1365</ItemID>
                <ItemNumber>671150</ItemNumber>
            </ns0:Item>
            <ns0:Item>
                <ItemID>1305</ItemID>
                <ItemNumber>6700150</ItemNumber>
            </ns0:Item>
        </result> 
```

> > 1.  如果我想“查找”文档是否包含标签**'ns0:Item'**，则以下代码无法执行此操作。
> > 2.  如果我删除冒号“：”字符，则它能够成功解析 xml。

代码：

```
$(document).find('ns0:Item').each(function(){
    ....<br/>
    ....<br/>
    ....<br/>
}); 
```

请帮助如何解析 ':' xml 中的字符。
谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T06:13:56.113

冒号将命名空间前缀与元素名称分开。前缀的值在语义上并不重要；重要的是命名空间字符串。在您的情况下`ns0`是指代码中未显示的字符串；它很可能在您的 XML 文档顶部附近的某个地方指定。

要选择具有给定前缀的项目，并假设您在`success`ajax 调用的回调中进行选择，我认为您需要这样的东西：

```
success: function(xml) {
    var ns = "uri:whatever";  // the actual namespace, not the prefix
    $(xml).find('Item').each(function(){
        if ($(this).get(0).namespaceURI == ns) {
           ....
        }
    });
} 
```

您`document`在代码中用作变量名，表示一个 XML 文档。这似乎令人困惑。我建议不要使用该名称`document`来引用浏览器的 HTML 文档以外的任何内容。

# php - PHP 和 Redis - 性能 - PHP 是一个瓶颈

> ID：10185917
> 
> 赞同：0
> 
> 时间：2012-04-17T05:59:34.763
> 
> 标签：php, linux, performance, apache, redis

我已经在我的 Ubuntu Desktop 11.10、8 核和 8 GB 内存上设置了 Redis 2.4。

运行 redis-benchmark 工具，我始终看到每秒 100K 的 SETS 和 GETS 以及 4096 字节的包。Apache 每秒将提供 24k 的 index.html 页面，所以这些数字非常好。

在测试总堆栈 - Apache - PHP5（使用 Fastcgi）和 Redis 的性能时，最大吞吐量为每秒 250 个请求。

如果我注释掉对 Redis 的调用，我仍然每秒收到 250 个请求。

使用 htop，CPU 使用率是 95% PHP 和 5% Redis，Apache 几乎不可见。

所以问题是我应该实际期望这种组合的吞吐量是多少？

软件详情：

PHP 5.4 和 Apache 2.2.20 Linux 3.0.0-17-generic #30-Ubuntu SMP Thu Mar 8 20:45:39 UTC 2012 x86_64

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T14:15:57.143

我建议使用 PHP 的微框架而不是更大的框架。此外，如果您包含许多 PHP 文件，性能将会下降（即使使用 APC）。此外，PHP r/s 不会匹配静态 html r/s。

# javascript - MongoDB 和 GridFS

> ID：10185918
> 
> 赞同：0
> 
> 时间：2012-04-17T05:59:36.487
> 
> 标签：javascript, php, mongodb, gridfs, nosql

我们有一个大型现有项目，每天有成千上万的用户。我们使用 MySQL，但现在我们计划使用 MongoDB（和 GridFS）。

MongoDB 和 GridFS 可以用于大型项目吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T09:07:23.810

MongoDB 和 GridFS 绝对可以用于大型项目。有几个成功运行的示例，例如使用foursquare（请参阅[http://www.mongodb.org/display/DOCS/Production+Deployments#ProductionDeployments-SocialNetworks](http://www.mongodb.org/display/DOCS/Production+Deployments#ProductionDeployments-SocialNetworks)）。

然而，从关系数据库迁移到 MongoDB 并不是很直接。MongoDB 在建模数据方面具有新的思维方式，您如何插入、更新和查询数据对其性能特征非常重要。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-17T06:03:12.577

我使用 GridFS 存储了大约数百万个 JPEG 文件。对我来说工作得很好。MongoDB 可以用于键/值存储。

将整个数据库从 SQL 迁移到 MongoDb 时我会更加谨慎，因为与 SQL 数据库中可用的工具相比，复杂的查询优化不是那么透明。

（因此将我的项目从 MongoDB 移动到 PostgreSQL）

# assembly - linux中哪些寄存器受用户空间保护？

> ID：10185922
> 
> 赞同：4
> 
> 时间：2012-04-17T05:59:43.460
> 
> 标签：assembly, linux-kernel, x86, kernel, cpu-registers

如何找出哪些寄存器受 Linux 内核保护以防止用户程序集写入它们？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-04-17T07:23:22.057

首先，请注意 Linux 内核本身并没有真正保护寄存器。它所做的只是确保用户应用程序以 3 级特权（最低特权）运行。从那时起，执行寄存器保护的是处理器。

以下是只能从特权级别 0（即，从内核）访问的寄存器列表：

*   控制寄存器 ( `CR0`- `CR4`)
*   `GDTR`,`LDTR`和`IDTR`(全局/局部/中断描述符表寄存器)
*   `TR`（任务寄存器）
*   调试寄存器 ( `DR0`- `DR7`)
*   所有型号特定的寄存器（`MSR`s）

您应该阅读[Intel 系统编程手册的](https://www.intel.com/content/dam/www/public/us/en/documents/manuals/64-ia-32-architectures-software-developer-system-programming-manual-325384.pdf)第 5 章，了解有关 x86 保护的详细说明。

# javascript - 防止拖动时手柄消失

> ID：10185924
> 
> 赞同：2
> 
> 时间：2012-04-17T05:59:45.153
> 
> 标签：javascript, jquery, jquery-ui

我正在使用 jquery 和 jQuery ui 可拖动。我有一个出现在悬停上的句柄，用于拖动 div。它工作得很好，除非它被拖得非常快。悬停似乎已停用，并且手柄在拖动过程中消失了。我怎样才能防止这种形式发生？

这是我正在谈论的一个jsfiddle：http: [//jsfiddle.net/JdtsV/1/](http://jsfiddle.net/JdtsV/1/)

```
 $(function() {
        $("#handle").draggable({handle: "dragHandle"}).hover(function(){
             $(this).toggleClass("outline");
        });          
    }); 
```

顺便说一句，我正在使用 Safari。

* * *

仅 CSS 解决方案：http: [//jsfiddle.net/JdtsV/42/](http://jsfiddle.net/JdtsV/42/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T06:23:37.103

如何设置`containment`选项？

```
$(function() {
    $("#handle").draggable({
        handle: "dragHandle",
        containment: "parent"
    });
}); 
```

另请参阅[此示例](http://jsfiddle.net/JdtsV/27/)。

=== 更新 ===

在*拖动* `start`时设置一个类并在*拖动* `stop`时将其删除：

JS：

```
$(function() {
    $("#handle").draggable({
        handle: "dragHandle",
        containment: "parent",
        start: function() {
            $('.dragHandle').addClass('test');
        },
        stop: function() {
            $('.dragHandle').removeClass('test');
        }

    });
}); 
```

CSS：

```
.handle:hover .dragHandle, .test {
    width:25px;
    height:25px;
    background-color: #842899;
    position: absolute;
    left:0;
    top:-25px;
    cursor: move;
    display: inline-block;
} 
```

另请参阅[我更新的示例](http://jsfiddle.net/JdtsV/41/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-17T06:26:41.300

jsFiddle：http: [//jsfiddle.net/JdtsV/39/](http://jsfiddle.net/JdtsV/39/)

```
$(function()
{
    var isMouseDown = false;

    $("#handle").draggable(
    {
        handle: "dragHandle"
    });

    $("#handle").mousedown( function()
    {
        isMouseDown = true;
        $(this).addClass("outline");
    });

    $("#handle").mouseup( function()
    {
        isMouseDown = false;
    });

    $("#handle").hover( function()
    {
        $(this).addClass("outline");
    },
    function()
    {
        if ( isMouseDown == false )
        {
            $(this).removeClass("outline");
        }
    });
});​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T06:01:53.803

我使用“标志”来捕获 mousedown 事件，并默认设置`.dragHandle`为 CSS：`display:none;`

```
var holded = false;
$('.handle').on('mouseenter mouseleave',function(e){
   (e.type==='mouseleave' && holded===false) ? $('.dragHandle').hide() :  $('.dragHandle').show() ;
}).on('mousedown mouseup',function(e){
    e.type==='mousedown' ? holded=true: holded=false;
});

$(".handle").draggable({handle: "dragHandle"}); 
```

## *[jsFiddle 演示](http://jsfiddle.net/m7KEX/)*

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-17T06:28:13.177

快速鼠标移动的问题在于它是如此之快以至于它实际上在 div 甚至有机会在鼠标光标下呈现之前就取消了悬停。因此，在 CSS 中替换：

```
 .outline .dragHandle { 
```

和：

```
 .outline .dragHandle, .dragHandle:active { 
```

这样当手柄保持点击时，它不会消失。

# .htaccess - htaccess - 只有索引需要有效用户

> ID：10185927
> 
> 赞同：1
> 
> 时间：2012-04-17T06:00:14.963
> 
> 标签：.htaccess, .htpasswd

我有一个简单的 htaccess 设置，我只想保护我的 index.php 文件。我写下了以下似乎最合乎逻辑的内容，但它只是告诉我需要 401 授权。如果我用 index.php 打开链接，它会提示我登录，否则不会。

有什么方法可以在不将 index.php 添加到链接的情况下触发该登录？我真的只希望 index.php 受到保护。

```
<Files index.php>
  require valid-user
</Files> 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T06:55:44.800

尝试使用[LocationMatch](http://httpd.apache.org/docs/2.0/mod/core.html#locationmatch)：

```
<LocationMatch "(.*/|index.php)$">
    Require valid-user
</LocationMatch> 
```

# cocos2d-iphone - Cocos2d：如何在场景过渡期间保持精灵实例可见？

> ID：10185931
> 
> 赞同：1
> 
> 时间：2012-04-17T06:00:39.847
> 
> 标签：cocos2d-iphone, sprite, transition, scene

我正在为 iphone 使用 cocos2d，我希望在从一个 CCScene 到下一个 CCScene 的场景转换期间，屏幕上仍然可以看到一个精灵。例如，当使用 CCTransitionFade 时，场景中的所有子元素都会淡出，然后下一个场景会淡入，但我希望保持精灵可见，而不是随着场景的其余部分淡出。我猜我必须单独添加场景中的精灵实例才能绕过精灵的褪色，但我不确定如何做到这一点。任何帮助表示赞赏，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T16:22:44.120

如果您切换到另一个场景，您将无法真正保留 CCScene 中的对象/精灵。这真的取决于精灵是什么，它会响应触摸，它是否动画，它是否在做任何事情等等，最好的方法是什么。

除了 Cocos 使用的 viewcontroller 的视图之外，您还可以通过向 viewcontroller 添加一个视图来组合 UIViews 和 Cocos 视图。这是在 Cocos 过渡之外保留图像的最简单方法。

# pagination - 如何对我从数据库中获取的数据应用分页？

> ID：10185939
> 
> 赞同：1
> 
> 时间：2012-04-17T06:01:36.557
> 
> 标签：pagination, joomla2.5

我使用 MVC 创建了一个模块，用于在页面上显示数据库中的一些记录。

现在我想对记录应用分页，以便一个页面上只显示 5 条记录。所以我需要关于分页的帮助。

我想应用 1、2、3、4 的分页，而不是下一个和上一个链接。

那么是否有任何模块。

有谁能帮助我吗？我正在使用 joomla 2.5。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T01:13:47.553

由于某种原因，任何框架内的分页总是很棘手......

您需要在视图和模型中添加一些特定的代码并扩展某些类。

1.  确保您的模型扩展`JModelList`
2.  在模型重载中`protected function getListQuery()`并使用 select + from + where + order... 返回您的选择查询...不包括限制。必须`$db->getQuery`从而不是从加载的结果返回查询。操纵`list.start`并`list.limit`在模型中控制每页的开始和结果数
3.  在您的视图中获取分页`$this->pagination = $this->get('Pagination');`和项目`$this->items = $this->get('Items');`
4.  显示您的数据和分页，显​​示分页只需使用`echo $this->pagination->getListFooter()`

就是这个！要了解更多信息，请查看[Joomla 2.5 MVC 指南](http://docs.joomla.org/Developing_a_Model-View-Controller_%28MVC%29_Component_for_Joomla!2.5)，[基本后端部分](http://docs.joomla.org/Developing_a_Model-View-Controller_%28MVC%29_Component_for_Joomla!2.5_-_Part_07)展示了如何使用分页。

# templates - golang 输出模板

> ID：10185942
> 
> 赞同：5
> 
> 时间：2012-04-17T06:01:47.457
> 
> 标签：templates, go

如何显示模板的内容？

包主

```
import (
    "fmt"
    "html/template"
    "os"

)

func main() {
    t := template.New("another")
    t,e:=t.ParseFiles("test.html")
    if(e!=nil){
            fmt.Println(e);
    }
    t.Execute(os.Stdout, nil)

} 
```

为什么不呢？test.html 存在

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-17T07:34:58.400

您无需创建新模板`New`并`ParseFiles`在其上使用。还有一个功能`ParseFiles`可以在幕后创建新模板。
这是一个例子：

```
package main

import (
    "fmt"
    "html/template"
    "os"
)

func main() {
    t, err := template.ParseFiles("test.html")
    if err != nil {
            fmt.Println(err);
    }
    t.Execute(os.Stdout, nil)
} 
```

# mongodb - Mongo value-in-array 查询的问题：$not 运算符不起作用，无法选择 ObjectIds

> ID：10185951
> 
> 赞同：6
> 
> 时间：2012-04-17T06:02:19.263
> 
> 标签：mongodb

我正在尝试选择一个不包含文档数组中的值的文档。

我有两个问题，我将分别介绍：

(1) 我无法让 $not 运算符处理数组中的值查询：例如，如果我的集合中有以下文档：

`{ _id: ObjectId("000000000000000000000000"), mylist: [ "red", "green", "blue" ] }`

我可以使用以下方法选择此文档：

`db.myCol.find({mylist:"red"})`

但是，我想通过测试是否没有橙色来选择此文档：

`db.myCol.find({$not:{mylist:"orange"}})`

为什么这不起作用？

(2) 如果数组值是 ObjectId，我无法使数组查询中的值起作用：

`{ _id: Object("000000000000000000000000"), mylist: [ ObjectId("111111111111111111111111") ] }`

以下内容不会检索此文档：

`myCol.find({mylist:ObjectId("111111111111111111111111")})`

有人可以建议我可能做错了什么吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-17T06:33:18.850

没有[`$not`](http://docs.mongodb.org/manual/reference/operator/not/)这样的作品，你想要[`$ne`](http://docs.mongodb.org/manual/reference/operator/ne/#_S_ne)像你这样的简单案例：

```
db.myCol.find({ mylist: { $ne: 'orange' } }) 
```

你的第二个应该（并且确实）对我来说很好，也许你使用了错误的数量。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-23T11:06:12.860

作为替代方案，您可以像这样使用 $not：

```
{ 
    "mylist" : {
        $not : { 
            $in : ["red"] 
        } 
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-06-22T08:01:38.550

```
var queryarray = ['red']
db.myCol.find({ mylist: { $nin: queryarray  } }) 
```

# blackberry - 如何在黑莓中使用水平字段管理器右对齐标签字段

> ID：10185954
> 
> 赞同：1
> 
> 时间：2012-04-17T06:02:28.117
> 
> 标签：blackberry

我想在 Horizo​​ntalFieldManager 中添加两个标签字段，我想将两个标签显示为一个左对齐，另一个像这样右对齐

![在此处输入图像描述](../Images/10e4eb18063b592fff5110ea924c1e48.png)

```
hfm1 = new HorizontalFieldManager(Manager.USE_ALL_WIDTH);
        hfm1.setMargin(10,0,10,0);
        l1 = new LabelField("Weight:");
        l2 = new LabelField("20");
        l1.setMargin(0,10,0,0);
        l2.setMargin(0,5,0,0);
        hfm1.add(l1);
        hfm1.add(l2); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-17T06:09:56.900

试试这个代码

```
LabelField labl1=new LabelField("weight");
LabelField labl2=new LabelField("20");
JustifiedHorizontalFieldManager JustifiedHorizontalFieldManager=new JustifiedHorizontalFieldManager(labl1,labl2,true);
add(JustifiedHorizontalFieldManager); 
```

JustifiedHorizo​​ntalFieldManager 类如下 -

```
import net.rim.device.api.ui.Field;
import net.rim.device.api.ui.Manager;

public class JustifiedHorizontalFieldManager extends Manager
{
    private static final int SYSTEM_STYLE_SHIFT = 32;

    public Field _leftField;
    public Field _rightField;

    private boolean _giveLeftFieldPriority;

    public JustifiedHorizontalFieldManager( Field leftField, Field rightField, boolean giveLeftFieldPriority )
    {
        this( leftField, rightField, giveLeftFieldPriority, Field.USE_ALL_WIDTH );
    }

    public JustifiedHorizontalFieldManager( Field leftField, Field rightField, boolean giveLeftFieldPriority, long style )
    {
        super( style );

        _leftField = leftField;
        _rightField = rightField;

        add( _leftField );
        add( _rightField );

        _giveLeftFieldPriority = giveLeftFieldPriority;
    }

    public JustifiedHorizontalFieldManager( boolean giveLeftFieldPriority, long style )
    {
        super( style );
        _giveLeftFieldPriority = giveLeftFieldPriority;
    }

    public void addLeftField( Field field )
    {
        if( _leftField != null ) {
            throw new IllegalStateException();
        }
        _leftField = field;
        add( _leftField );
    }

    public void addRightField( Field field )
    {
        if( _rightField != null ) {
            throw new IllegalStateException();
        }
        _rightField = field;
        add( _rightField );
    }

    public int getPreferredWidth()
    {
        return _leftField.getPreferredWidth() + _rightField.getPreferredWidth();
    }

    public int getPreferredHeight()
    {
        return Math.max( _leftField.getPreferredHeight(), _rightField.getPreferredHeight() );
    }

    protected void sublayout( int width, int height )
    {
        Field firstField;
        Field secondField;
        if( _giveLeftFieldPriority ) {
            firstField = _leftField;
            secondField = _rightField;
        } else {
            firstField = _rightField;
            secondField = _leftField;
        }

        int maxHeight = 0;

        int availableWidth = width;
        availableWidth -= _leftField.getMarginLeft();
        availableWidth -= Math.max( _leftField.getMarginRight(), _rightField.getMarginLeft() );
        availableWidth -= _rightField.getMarginRight();

        layoutChild( firstField, availableWidth, height - firstField.getMarginTop() - firstField.getMarginBottom() );
        maxHeight = Math.max( maxHeight, firstField.getMarginTop() + firstField.getHeight() + firstField.getMarginBottom() );
        availableWidth -= firstField.getWidth();

        layoutChild( secondField, availableWidth, height - secondField.getMarginTop() - secondField.getMarginBottom() );
        maxHeight = Math.max( maxHeight, secondField.getMarginTop() + secondField.getHeight() + secondField.getMarginBottom() );
        availableWidth -= secondField.getWidth();

        if( !isStyle( Field.USE_ALL_HEIGHT ) ) {
            height = maxHeight;
        }
        if( !isStyle( Field.USE_ALL_WIDTH ) ) {
            width -= availableWidth;
        }

        setPositionChild( _leftField, _leftField.getMarginLeft(), getFieldY( _leftField, height ) );
        setPositionChild( _rightField, width - _rightField.getWidth() - _rightField.getMarginRight(), getFieldY( _rightField, height ) );

        setExtent( width, height );
    }

    private int getFieldY( Field field, int height )
    {
        switch( (int)( ( field.getStyle() & FIELD_VALIGN_MASK ) >> SYSTEM_STYLE_SHIFT ) ) {
            case (int)( FIELD_BOTTOM >> SYSTEM_STYLE_SHIFT ):
                return height - field.getHeight() - field.getMarginBottom();
            case (int)( FIELD_VCENTER >> SYSTEM_STYLE_SHIFT ):
                return field.getMarginTop() + ( height - field.getMarginTop() - field.getHeight() - field.getMarginBottom() ) / 2;
            default:
                return field.getMarginTop();
        }
    }

    public Field getLeftField()
    {
        return _leftField;
    }

    public Field getRightField()
    {
        return _rightField;
    }

    public void replace( Field oldField, Field newField )
    {
        if( oldField == newField ) {
            // Nothing to do
            return;
        }

        if( oldField == _leftField ) {
            _leftField = newField;
        } else if( oldField == _rightField ) {
            _rightField = newField;
        }
        add( newField );
        delete( oldField );
    }

} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-17T18:44:15.423

恕我直言，最优雅的解决方案是

```
HorizontalFieldManager hfm = new HorizontalFieldManager(Manager.USE_ALL_WIDTH);
hfm.setMargin(10,0,10,0);

LabelField l1 = new LabelField("Weight:");
l1.setMargin(0,10,0,0);
hfm.add(l1);

VerticalFieldManager vfm = new VerticalFieldManager(Manager.USE_ALL_WIDTH);
LabelField l2 = new LabelField("20", Field.FIELD_RIGHT);
l2.setMargin(0,5,0,0);
vfm.add(l2);
hfm.add(vfm);

add(hfm); 
```

和结果

![在此处输入图像描述](../Images/ba63a940805afdd3b95de8327e90ced7.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T12:08:22.837

另一种方法是，您可以使用两个标签制作一个自定义标签字段并将其添加到您想要的位置。就像

```
public class LableFieldWithTwoLable extends LabelField {

private final String lbl2;
private final String lbl1;

public LableFieldWithTwoLable(String lbl1,String lbl2) {
    super();
    this.lbl1 = lbl1;
    this.lbl2 = lbl2;
}

public int getPreferredWidth() {
        return super.getPreferredWidth();

}
protected void layout(int width, int height) {
    super.layout(width, height);
    setExtent(getPreferredWidth(), getPreferredHeight());
}

protected void paint(Graphics graphics) {
int ypos = getContentHeight()/2;
graphics.drawText(lbl1, 0, ypos ,DrawStyle.LEFT | DrawStyle.VCENTER);
graphics.drawText(lbl2, 0, ypos ,DrawStyle.RIGHT | DrawStyle.VCENTER);
super.paint(graphics);
}

} 
```

现在您只需在经理中添加此标签字段，例如

```
HorizontalFieldManager hfm = new HorizontalFieldManager();
hfm.add(new LableFieldWithTwoLable("name","13") ); 
```

如果您想要任何其他功能，请根据需要在 LableFieldWithTwoLable() 类中添加构造函数。

# scala - Play Framework 2.0 多条静态路由

> ID：10185956
> 
> 赞同：4
> 
> 时间：2012-04-17T06:02:39.957
> 
> 标签：scala, routes, playframework-2.0

我正在尝试设置两个不同的静态资产路由，第二个失败了。我错过了什么？

要复制问题：

1.  从 scala 示例中的 hello world 开始。

2.  在路由中添加一行，所以现在有两条静态路由：

    ```
    GET     /assets/*file       controllers.Assets.at(path="/public", file)
    GET     /assets2/*file      controllers.Assets.at(path="/public2", file) 
    ```

3.  注释掉 main.scala.html 中的资产引用，所以它不会抱怨它们

4.  将文件放在 public 和 public 2。

    ```
    $ cat > public/foo.txt
    hi
    $ mkdir public2
    $ cp public/foo.txt public2 
    ```

5.  验证公共目录是否有效。

    ```
    $ telnet localhost 9000
    Trying 127.0.0.1...
    Connected to localhost.
    Escape character is '^]'.
    GET /assets/foo.txt HTTP/1.0

    HTTP/1.1 200 OK
    Content-Length: 3
    Content-Type: text/plain
    Etag: 5246040afe91a4cc93bd838a4d5db3984b99470b
    Cache-Control: no-cache

    hi
    Connection closed by foreign host. 
    ```

6.  确认第二个不起作用。

    ```
    $ telnet localhost 9000
    Trying 127.0.0.1...
    Connected to localhost.
    Escape character is '^]'.
    GET /assets2/foo.txt HTTP/1.0

    HTTP/1.1 404 Not Found
    Content-Length: 0

    Connection closed by foreign host. 
    ```

我敢肯定这里有一些明显的东西，我只是没看到。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-17T06:33:35.763

您应该在 sbt 配置中添加`public2`文件夹`playAssetsDirectories`

```
playAssetsDirectories <+= baseDirectory / "public2" 
```

[以 PlaySettings](https://github.com/playframework/Play20/blob/master/framework/src/sbt-plugin/src/main/scala/PlaySettings.scala)为例。

# php - jQuery Mobile PHP 站点 - 如何在 iOS 上使用 Web Clips 保持登录状态

> ID：10185959
> 
> 赞同：1
> 
> 时间：2012-04-17T06:03:12.870
> 
> 标签：php, ios, jquery-mobile

我使用 PHP 创建了一个 jQuery Mobile 站点，该站点需要身份验证并且到目前为止运行良好。鼓励 iPhone/iPad 上的用户将网站作为网络剪辑保存到主屏幕，以便他们无需 safari 工具栏等即可直接访问该网站。

在 iOS 设备上，当用户单击主页按钮或接到电话并返回到他们已注销并必须再次登录的站点时。当他们直接从 Safari 访问该站点时，不会发生这种情况。

当他们从主屏幕上的网络剪辑访问站点并接听电话或单击主页按钮时，有没有办法让他们保持登录一段时间（例如 15 分钟）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T03:15:41.803

在 php.ini 或通过 .htaccess 中，将 session.cookie_lifetime 设置为 900 以使其持续 15 分钟。默认值为 0，持续到浏览器关闭。每次您离开 Web 剪辑时，它们似乎都会“关闭”，因此您会立即丢失 cookie。 [http://www.php.net/manual/en/session.configuration.php#ini.session.cookie-lifetime](http://www.php.net/manual/en/session.configuration.php#ini.session.cookie-lifetime)

# javascript - 从 aspx 页面内部打印 PDF

> ID：10185961
> 
> 赞同：0
> 
> 时间：2012-04-17T06:03:24.253
> 
> 标签：javascript, asp.net

我有一个 aspx 页面，其中使用 pdf 查看器显示了一个 pdf。该页面在pdf文档上方有文本框。我想用包含在其中的文本框和 pdf 打印此页面。可能吗？如果是的话，你能帮我怎么做吗？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T06:05:12.423

简答iText。您可以保存 pdf，然后通过 Google 云打印进行打印。很光滑

# asp.net-mvc-3 - 使用“Visual Web Developer 2010 Express”在 Umbraco 5.0.1 中创建表面控制器

> ID：10185962
> 
> 赞同：0
> 
> 时间：2012-04-17T06:03:29.370
> 
> 标签：asp.net-mvc-3, umbraco, vwdexpress

我目前在 Umbraco 5.0.1 和 Visual web developer 中创建表面控制器时遇到问题。我已经按照 Shannons 博客创建表面控制器，但为此我必须创建一个

1.新的MVC项目和

2.再次引用该 MVC 项目中的所有 umbraco dll。

那有必要吗？我不能在使用 Web 平台安装程序安装的现有 umbraco 项目中创建表面控制器吗？

还有一个问题，在 vwd 2010 express 中没有 Umbraco 5.0.1 的 Properties 文件夹。我需要单独创建它吗

为 Umbraco 5.0.1 找到一些文档变得非常困难，而对于 Visual Web 开发人员来说更难

我只是最近被介绍给 Umbraco 的新手

非常感谢指导

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T09:47:53.127

对于您的具体问题，我没有答案，但我发现开始使用 Umbraco 5 进行开发的最简单方法是使用 Visual Studio 的项目模板。

这样您就可以为您创建完整的解决方案结构。不过，我不知道它是否适用于 Express 版本。

[http://visualstudiogallery.msdn.microsoft.com/2e932c31-de32-4adf-9e58-a16c4aca0716](http://visualstudiogallery.msdn.microsoft.com/2e932c31-de32-4adf-9e58-a16c4aca0716)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T09:59:12.857

现在我们没有直接使用 Umbraco 5，而是制作了一个单一的 MVC 项目（使用 ASP.NET MVC3 模板）并使用 Nuget 包管理器为 MVC3 安装了 Umbraco 5 CMS。所以现在我们有了控制器和所有其他文件夹MVC 以及 Umbraco 附带的文件夹。所以现在我们直接使用普通的控制器来发布表单数据，而不是表面控制器。希望这是正确的方法

纠正我如果错了

# c# - 提高 Android 中的缓冲区读写速度（与基于桌面 C# 的应用程序相比）

> ID：10185966
> 
> 赞同：0
> 
> 时间：2012-04-17T06:04:15.527
> 
> 标签：c#, android, performance

我已经将一些 C# 代码转换为 Java/Android 代码。基本上我正在解密 sdcard 上的文件（比如 a.mp4.enc）并将其写回私有数据文件夹（/data/app/a.mp4）。现在同样的事情发生在桌面系统上，代码就是这样

```
byte[] buffer = new byte[1024*10];
int len;
while ((len = cryptostream.Read(buffer, 0, buffer.Length)) > 0)
{
    outputStream.Write(buffer, 0, len);
    buffer = new byte[1024*10];
} 
```

在 android 模拟器上，我运行以下命令：

```
byte[] buffer = new byte[1024 * 10];
int len = cryptoStream.read(buffer, 0, buffer.length);
while (len > 0) {
    out.write(buffer, 0, len);
    len = cryptoStream.read(buffer, 0, buffer.length);
} 
```

但是 C# 代码需要 0.1 秒来转换 6mb 文件，而模拟器需要 20 分钟！我的代码有问题还是只是模拟器和Android方式，因为它似乎太长了！！我需要做些不同的事情吗？我试过不从 SD 卡读取，而是从应用程序数据文件夹本身读取，但性能没有显着提高。

# php - SQL查询构造

> ID：10185968
> 
> 赞同：0
> 
> 时间：2012-04-17T06:04:18.803
> 
> 标签：php, mysql, sql

我最近创建了一个评分系统，其中用户按他们的分数降序排列。首先，我曾经将排名存储在自己的列中。我曾经运行这个循环来更新排名：

```
$i = 1;
    $numberOfRows = mysql_query('SELECT COUNT(`id`) FROM sector0_players');
    $scoreboardquery = mysql_query("SELECT * FROM sector0_players ORDER BY points DESC");
    while(($row = mysql_fetch_assoc($scoreboardquery)) || $i<=$numberOfRows){
        $scoreid = $row['id'];
        $mysql_qeury = mysql_query("UPDATE sector0_players SET scoreboard_rank = '$i' WHERE id = '$scoreid'");
    $i++;
    } 
```

这真的很难，更不用说在大量用户上实际运行它的速度很慢。相反，我尝试构建一个查询并以这个结束。

```
SET @rownum := 0;
SELECT scoreboard_rank, id, points
FROM (
SELECT @rownum := @rownum + 1 AS scoreboard_rank, id, points FROM sector0_players ORDER BY points DESC
)
as result WHERE id = '1'; 
```

但是，这只是一个选择语句。无论如何我可以绕过它并更改它，以便它像循环一样更新表格？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T06:20:17.217

请尝试使用以下查询：

```
set @rownum:=0;
update sector0_players set scoreboard_rank=@rownum:=@rownum+1 ORDER BY points DESC; 
```

PHP代码可以，

```
mysql_query("set @rownum:=0;");
mysql_query("update sector0_players set scoreboard_rank=@rownum:=@rownum+1 ORDER BY points DESC;"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T06:23:30.833

您可以尝试使用 RANK 函数.. 我还没有实际执行 SQL，但它应该可以工作

```
UPDATE sector0_players
SET scoreboard_rank =
(
SELECT srank
FROM
(
    SELECT id,points, RANK() OVER (ORDER BY points) AS srank
    FROM sector0_players T
) D
WHERE D.id = sector0_players.id
AND  D.points = sector0_players.points
) 
```

# java - CDI 模糊依赖

> ID：10185976
> 
> 赞同：17
> 
> 时间：2012-04-17T06:04:41.180
> 
> 标签：java, cdi, jboss-weld

我有一个带有用户对象方法的`@SessionScoped @Named`bean ：`@Producer`

```
@Named @SessionScoped
public class UserBean implements Serializable
{
  //...
  @Named @Produces @LoggedIn @SessionScoped
  public MyUser getCurrentUser() {return user;}
} 
```

这在我的设置（JBoss-7.1.1-Final）中运行良好，并且使用`#{currentUser.name}`. 限定词是`org.jboss.seam.security.annotations.LoggedIn`。现在我想`@Inject`这个用户在另一个`@Named`Bean 的一个字段中：

```
@Named
public class FavBean implements Serializable
{   
  private @Inject @LoggedIn MyUser currentUser;
} 
```

这给了我错误：

```
org.jboss.weld.exceptions.DeploymentException:
WELD-001409 Ambiguous dependencies for type [MyUser] with qualifiers [@Default] at
  injection point [[field] @Inject @LoggedIn test.FavBean.currentUser].
Possible dependencies [[Managed Bean [class test.ejb.MyUser] with qualifiers
  [@Any @Default],
Producer Method [MyUser] with qualifiers [@Any @Default] declared as [[method]
  @Named @Produces @LoggedIn @SessionScoped public test.UserBean.getCurrentUser()]]] 
```

我不明白第一个依赖`Managed Bean [class test.ejb.MyUser]`这个类是一个简单的`@Entity`并且部署在一个EAR中的ebb.jar中。作为一种解决方法，我目前正在`UserBean`从那里注入 get the user 。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-04-17T06:44:38.663

这是因为 CDI 按类型搜索 bean，并且您的实体和生产者方法返回相同的类型。这就是为什么它是模棱两可的。

您需要定义一个新的限定符并使用您的生产者方法对其进行注释。

```
@Qualifier
@Retention(RUNTIME)
@Target({METHOD, FIELD, PARAMETER, TYPE})
public @interface CurrentUser {
} 
```

将此注释添加到您的生产者方法中：

```
@Named @Produces @CurrentUser @LoggedIn @SessionScoped
public MyUser getCurrentUser() {return user;} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-19T10:39:12.850

我有非常相似的问题，我得到了一些离线帮助。我的问题是，我的服务在哪里，它包含在部署的耳朵和我的网络项目中。这是一个意外的重复，删除一个，如果它也是你的情况，它也会起作用。

在下面的图片中，我在 esb_khr_web 中有 esb_khr，我删除了。在 Eclipse 中：转到属性和部署程序集。

![在此处输入图像描述](../Images/a28ed05bd2a057049128bfbf60501c3f.png)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-07-21T20:45:24.027

我不是专家，但我遇到了类似的问题，我以更简单的方式修复了它，用 注释 bean 本身`@Alternative`，以便生产者受到青睐。可能是我错过了一些副作用，但据我所见/需要，这很有效。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-01-23T18:55:47.253

请仔细检查您的上下文中没有 beans.xml 的多个实例。就我而言，我在 WEB-INF 和 META-INF 中有 beans.xml。从 META-INF 中删除 beans.xml 后，类似的问题得到了解决。

# ruby-on-rails - Ruby on Rails 教程（由 Hartl 编写）时 name = Faker::Name.name encoutner Can't mass-assign protected attributes 错误

> ID：10185977
> 
> 赞同：1
> 
> 时间：2012-04-17T06:04:42.287
> 
> 标签：ruby-on-rails, database, railstutorial.org, attr-accessible

更新：我在 Ruby 1.8 上运行。存储库的链接是 github.com/lauherk/sample_app

我正在阅读 Micheal hartl 的 Ruby on Rails 教程，在第 9 章中，我遇到了用示例用户填充数据库的问题[http://ruby.railstutorial.org/chapters/updating-showing-and-deleting-users ?version=3.2#sec:sample_users](http://ruby.railstutorial.org/chapters/updating-showing-and-deleting-users?version=3.2#sec:sample_users)

我的 rake 的代码是：

```
namespace :db do
  desc "Fill database with sample data"
  task populate: :environment do
    User.create!(:name => "Example User",
                 :email => "example@railstutorial.org",
                 :password => "foobar",
                 :password_confirmation => "foobar")
    99.times do |n|
      name  = Faker::Name.name
      email = "example-#{n+1}@railstutorial.org"
      password  = "password"
      User.create!(:name => name,
                   :email => email,
                   :password => password,
                   :password_confirmation => password)
    end
  end
end 
```

运行两者后：

```
bundle exec rake db:reset
bundle exec rake db:populate 
```

我从命令行收到以下错误：

```
rake aborted!
Can't mass-assign protected attributes: Lawrence Kertzmann
/Library/Ruby/Gems/1.8/gems/activemodel-3.2.2/lib/active_model/mass_assignment_security/sanitizer.rb:48:in `process_removed_attributes' 
```

（每次我运行 rake 时，这个特定的名称都会改变）

我已经检查并确保在我的用户模型中我有代码

```
attr_accessible :name, :email, :password, :password_confirmation 
```

甚至尝试过设置

```
 config.active_record.whitelist_attributes = false 
```

然而，在命令行中仍然有相同的结果。

让我的数据库填充示例用户的任何提示？

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T04:13:05.207

添加

```
attr_accessible :name 
```

到模型。目前，您只有`:user_name`（和其他值）可访问。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T02:42:47.453

只需将 authentication_token 添加到 attr_accessible 例如：我得到的错误

> Media1s-Mac-mini:rails_apps media1$ rake clipsfree_import RAILS_ENV=development csvfile=/Users/media1/Desktop/clips/atemp5/demotracks2/import.csv rake 中止！无法批量分配受保护的属性：标题 /usr/local/rvm/gems/ruby-1.9.3-p194/gems/activemodel-3.2.11/lib/active_model/mass_assignment_security/sanitizer.rb:48:in process_removed_attributes' /usr/local/rvm/gems/ruby-1.9.3-p194/gems/activemodel-3.2.11/lib/active_model/mass_assignment_security/sanitizer.rb:20:indebug_protected_attribute_removal' /usr/local/rvm/gems/ruby- 1.9.3-p194/gems/activemodel-3.2.11/lib/active_model/mass_assignment_security/sanitizer.rb:12:in sanitize' /usr/local/rvm/gems/ruby-1.9.3-p194/gems/activemodel- 3.2.11/lib/active_model/mass_assignment_security.rb:230:insanitize_for_mass_assignment'/usr/local/rvm/gems/ruby-1.9。

解决方案：在models文件夹的loopsfree.rb中为attr_accessible添加属性title

```
class Loopsfree < ActiveRecord::Base attr_accessible :ISRC, :title, :artist, :bpm, :file_name, :genre, :id, :sub_genre end 
```

希望这会有所帮助:) 快乐编码

# php - 单击提交按钮时在后台运行 PHP 脚本，无需重新加载页面

> ID：10185979
> 
> 赞同：0
> 
> 时间：2012-04-17T06:04:54.870
> 
> 标签：php

我需要在提交按钮单击时运行 php 脚本（站点爬虫），而无需重新加载页面。后台脚本运行后，应出现确认/警报弹出窗口，表明站点爬虫已结束。请问有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T06:20:00.570

基本上这个想法是这样的：

*   您向服务器发送和[XHR](http://en.wikipedia.org/wiki/XMLHttpRequest)调用并执行脚本
*   脚本检查是否已经有后台进程
    *   如果有，返回状态码
    *   如果在后台脚本运行：脚本[分叉自身](http://php.net/manual/en/function.pcntl-fork.php)，返回“OK”响应并开始工作
*   使用不同的 XHR 调用，您反复检查脚本是否已完成
*   当服务器端脚本完成运行时，您会收集结果并在页面中显示

为了简化与服务器的交互，您可能想要使用一些[XHR 库](http://microjs.com/#ajax)。除非您实际上已经将它用于其他用途，否则我会避免建议避免使用 jquery。

至于“如何知道后台脚本何时完成”：我认为最好的方法是让该脚本创建一个文件，其中包含

*   运行时：-1
*   完成时：0
*   错误时：正数

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T06:10:12.580

Jquery + AJAX 可以让你的工作更轻松。阅读本教程以了解如何实现结果：

[AJAX+ jQuery 教程](http://www.w3schools.com/jquery/jquery_ajax.asp)

# ios - 使用 nstimer 为图像创建幻灯片？

> ID：10185982
> 
> 赞同：-1
> 
> 时间：2012-04-17T06:05:13.280
> 
> 标签：ios, xcode4.2

如何在 iphone 中使用 NSTimer 为图像创建幻灯片

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T00:33:48.583

1.  安排一个方法每秒运行一次（或尽可能快地切换图像）
2.  创建图像文件名数组
3.  在计划的方法中，将 UIImageView.image 更改为图像数组中的索引之一。

这里有一篇关于如何安排方法的帖子[http://i-tutor.weebly.com/blog.html 。](http://i-tutor.weebly.com/blog.html)

# c# - 如何绑定列表 进入 WebForms 中的 ListView

> ID：10185992
> 
> 赞同：6
> 
> 时间：2012-04-17T06:06:11.963
> 
> 标签：c#, asp.net, list, listview

我有一个`List<string>`想要绑定到我的`ListView`.

下面是我的标记`ListView`：

```
<asp:ListView ID="lvList" runat="server">

        <LayoutTemplate>         
            <div id="Div1" runat="server">              
                <div ID="itemPlaceholder" runat="server">              
                </div>         
            </div>      
        </LayoutTemplate>

        <EmptyDataTemplate>         
            <div id="Div2" runat="server">              
                <div ID="itemPlaceholder" runat="server">                 
                No data was returned.             
                </div>         
            </div>      
        </EmptyDataTemplate>

        <ItemTemplate>
            <asp:Label ID="ProductNameLabel" runat="server" Text='<%# Eval ("theList") %>'/>
        </ItemTemplate>

</asp:ListView> 
```

在我的代码隐藏中：

```
protected void Page_Load(object sender, EventArgs e)
{         
    List<string> theList = new List<string>();
    //populate members of list
    lvList.DataSource = theList;
    lvList.DataBind();
} 
```

错误信息：

> System.Web.HttpException 未被用户代码处理
> Message="DataBinding: 'System.String' 不包含名为 'theList' 的属性。"

我想我在这里做错了，有人可以告诉我吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-17T06:13:09.283

使用`'<%# Container.DataItem %>`：

```
<asp:Label ID="ProductNameLabel" runat="server" Text='<%# Container.DataItem %>'/> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T06:13:14.640

> `<asp:Label ID="ProductNameLabel" runat="server" Text='<%# Eval ("theList") %>`

此行导致问题，因为您在列表的当前元素中引用属性“theList”，但列表除了里面的字符串之外没有任何属性。

例如，要在后面的代码中实现该方法，例如

```
protected void Test(object obj)
{
    return obj.ToString();
} 
```

在 aspx 中：

```
 <asp:Label ID="ProductNameLabel" runat="server" Text='<%# Test(Container.DataItem) %> 
```

我还没有测试过它，但它应该可以解决问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-17T06:28:25.157

EVAL 用于单个键值，数据绑定控件从头到尾遍历集合，并在放置 eval 语句的位置一一放置。

此链接中的答案可以提供更好的想法。 [如何使用 DataBinder.Eval 从集合中检索当前对象？](https://stackoverflow.com/questions/1053120/how-to-retrieve-current-object-from-collections-using-databinder-eval)

希望这会有所帮助

# jboss - 检查发布到 jBoss 队列中的消息

> ID：10185995
> 
> 赞同：0
> 
> 时间：2012-04-17T06:06:29.870
> 
> 标签：jboss, queue, jms, jmx

嗨，我已添加此代码

```
 <mbean code="org.jboss.mq.server.jmx.Queue"
         name="jboss.mq.destination:service=Queue,name=myQueue">
<depends optional-attribute-name="DestinationManager">jboss.mq:service=DestinationManager</depends>
</mbean> 
```

到我的 /server/default/deploy/jms/jbossmq-destinations-service.xml

队列工作正常......但是我在哪里可以看到发布到队列的消息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T06:16:05.380

您可以使用[jmx-console](http://localhost:8080/jmx-console/)查看队列中的消息。你应该看的是`jboss.messaging.destination`在左边。如果找不到，`jboss.messaging.destination:*`请用作对象过滤器并搜索。

找到队列后，您可以看到`MessageCount`显示队列中当前消息的属性。

# android - 显示授权活动而不是主要应用程序活动的方法是什么？

> ID：10185996
> 
> 赞同：0
> 
> 时间：2012-04-17T06:06:33.247
> 
> 标签：android, android-activity, task, back, flags

如果用户未授权，我需要显示授权活动。

我在下一个代码中使用了 Launcher 活动（没有历史标志）：

```
protected void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);

    if (Autorization.isAutorized()) 
    {
        Intent newIntent = new Intent(this, MainActivity.class);
        // add some flags????
        startActivity(newIntent);
    }
    else startActivity(new Intent(this, AutorizationActivity.class));
} 
```

完成`autorization`后，`AutorizationActivity`启动 Launcher，`FLAG_ACTIVITY_CLEAR_TOP`然后`Launcher`启动`MainActivity`，但我对 backstack 有一些麻烦。通过再次按下`MainActivity`android 显示`AutorizationActivity`而不是隐藏任务。

我必须使用哪些标志来防止返回`AutorizationActivity`from `MainActivity`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T06:15:15.467

有几种方法可以做到这一点，最简单的方法是使用该`AndroidManifest.xml`文件。只需添加`android:noHistory = "true"`授权活动。

另请查看以下问题：[从历史堆栈中删除活动](https://stackoverflow.com/questions/1898886/removing-an-activity-from-the-history-stack)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T06:15:37.347

尝试在 Manifest 中为 AuthorizationActivity 设置标志，如下[所示..](http://developer.android.com/guide/topics/manifest/activity-element.html) .. 现在您的标志仅适用于 MainActivity 而不是当前 Activity.. 所以改为在 Manifest 中设置..

# wpf - 如何在不违反 MVVM 的情况下在视图中创建控件的新实例

> ID：10185997
> 
> 赞同：0
> 
> 时间：2012-04-17T06:06:37.200
> 
> 标签：wpf, silverlight, mvvm

我遇到了与[此 SO question](https://stackoverflow.com/questions/3904341/silverlight-oob-webbrowser-exception)中描述的类似的问题。建议的解决方案是为我们希望呈现的每个现在页面 (PDF) 创建一个新的 WebBrowser 控件（覆盖旧的 WebBrowser 控件）。在 MVVM 中创建新控件的正确方法是什么？我试图让 VM 对视图的实现一无所知。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T06:20:41.117

为什么 VM 需要知道？为什么视图不能挂钩到一个适当的事件（如果你喜欢定义一个，或者只是使用`PropertyChanged`）并重新创建控件？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T06:21:42.477

1.  在 ViewModel 中创建一个名为 IBrowserCreator 的接口，并使用一个名为 CreateBrowser() 的方法。
2.  在 ViewModel 中创建一个名为 ViewHelper 的静态类，并向其添加一个名为 BrowserCreator 的 IBrowserCreator 类型的静态属性。
3.  在 View 层中，创建一个名为 BrowserCreator 的新类，该类实现 ViewModel.IBrowserCreator。
4.  在 View 初始化代码中，实例化一个 BrowserCreator，并将其分配给 ViewModel.ViewHelper.BrowserCreator。

从您的 ViewModel，您现在应该可以调用：

`ViewHelper.BrowserCreator.CreateBrowser()`

显然这个答案只是一个框架，但它应该给你一个大致的想法。您需要实现 CreateBrowser 方法以满足您的确切需求。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T06:57:54.533

为什么不简单地使用 Datatemplate 并让 WPF 完成剩下的工作呢？

1.  使用网络浏览器创建用户控件。您必须添加附加属性，因为您不能直接绑定到源。

    ```
    <UserControl x:Class="WpfBrowser.BrowserControl"
             xmlns:WpfBrowser="clr-namespace:WpfBrowser" >
      <Grid>
        <WebBrowser WpfBrowser:WebBrowserUtility.BindableSource="{Binding MyPdf}"/>
      </Grid>
    </UserControl> 
    ```

2.  创建一个处理您的uri的视图模型

    ```
    public class MyPdfVM
    {
      public Uri MyPdf { get; set; }

      public MyPdfVM()
      {
        this.MyPdf = new Uri(@"mypdf path"); 
      }
    } 
    ```

3.  获取您的 pageviewmodel，添加 pdfviewmodel 并在您的视图中获取内容控件

    ```
    public class MyPageViewmodel: INotifyPropertyChanged
    {
      private MyPdfVM _myPdfStuff;
      public MyPdfVM MyPdfStuff
      {
        get { return _myPdfStuff; }
        set { _myPdfStuff = value; this.NotifyPropertyChanged(()=>this.MyPdfStuff);}
      }

      public MyViewmodel()
      {
        this.MyPdfStuff = new MyPdfVM();
      }

      public event PropertyChangedEventHandler PropertyChanged;
      protected void NotifyPropertyChanged<T>(Expression<Func<T>> property)
      {
        var propertyInfo = ((MemberExpression)property.Body).Member as PropertyInfo;

        if (propertyInfo == null)
        {
            throw new ArgumentException("The lambda expression 'property' should point to a valid Property");
        }

        var handler = PropertyChanged;

        if (handler != null)
            handler(this, new PropertyChangedEventArgs(propertyInfo.Name));
      }
    } 
    ```

窗口.xaml

```
 <Window x:Class="WpfBrowser.MainWindow"
            xmlns:WpfBrowser="clr-namespace:WpfBrowser" 
            Title="MainWindow" Height="350" Width="525">
     <Window.Resources>
       <DataTemplate DataType="{x:Type WpfBrowser:MyPdfVM}">
        <WpfBrowser:BrowserControl />
       </DataTemplate>
     </Window.Resources>
     <Grid>
       <Grid.RowDefinitions>
        <RowDefinition Height="64*" />
        <RowDefinition Height="247*" />
       </Grid.RowDefinitions>
      <Button Content="Button" Height="23" HorizontalAlignment="Left" Margin="32,14,0,0" Name="button1" VerticalAlignment="Top" Width="75" Click="button1_Click" />
      <ContentControl Grid.Row="1" Content="{Binding MyPdfStuff}"/>
     </Grid>
    </Window> 
```

窗口.xaml.cs

```
public partial class MainWindow : Window
{
    private MyViewmodel _data;
    public MainWindow()
    {
        _data = new MyViewmodel();
        InitializeComponent();
        this.DataContext = _data;
    }

    private void button1_Click(object sender, RoutedEventArgs e)
    {
        this._data.MyPdfStuff = new MyPdfVM() { MyPdf = new Uri(@"your other pdf path for testing") };
    }
} 
```

每当您更改 MyPdfStuff 属性时，网络浏览器都会更新 pdf。

附属财产

```
public static class WebBrowserUtility
{
    public static readonly DependencyProperty BindableSourceProperty =
        DependencyProperty.RegisterAttached("BindableSource", typeof(string), typeof(WebBrowserUtility), new UIPropertyMetadata(null, BindableSourcePropertyChanged));

    public static string GetBindableSource(DependencyObject obj)
    {
        return (string)obj.GetValue(BindableSourceProperty);
    }

    public static void SetBindableSource(DependencyObject obj, string value)
    {
        obj.SetValue(BindableSourceProperty, value);
    }

    public static void BindableSourcePropertyChanged(DependencyObject o, DependencyPropertyChangedEventArgs e)
    {
        WebBrowser browser = o as WebBrowser;
        if (browser != null)
        {
            string uri = e.NewValue as string;
            browser.Source = string.IsNullOrWhiteSpace(uri) ? null:new Uri(uri);
        }
    }

} 
```

编辑：添加了一些代码，因此您可以看到，如果您更改 PDFViewmodel，您的浏览器控件将显示新的 pdf。