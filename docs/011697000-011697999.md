# StackOverflow 问答 11697000-11697999

# android - Android ZXing 获取条码图片

> ID：11697001
> 
> 赞同：18
> 
> 时间：2012-07-27T23:49:50.637
> 
> 标签：android, zxing

我正在使用 Zxing 库在我的 Android 应用程序中生成条形码

```
Intent intent = new Intent("com.google.zxing.client.android.ENCODE");

intent.putExtra("ENCODE_FORMAT", "UPC_A");
intent.putExtra("ENCODE_DATA", "55555555555");

startActivityForResult(intent,0); 
```

有没有办法将生成的图像保存在我调用 Zxing 的应用程序中？我看到`onActivityResult`我的意图是空的。

在此先感谢您的帮助

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-10-19T04:34:28.373

获取视图缓存并将其保存在位图中，如下所示

```
View myBarCodeView = view.getRootView()
//Else this might return null
myBarCodeView.setDrawingCacheEnabled(true)
//Save it in bitmap
Bitmap mBitmap = myBarCodeView.getDrawingCache() 
```

或绘制您自己的条形码或二维码

```
//Change the writers as per your need
private void generateQRCode(String data) {
    com.google.zxing.Writer writer = new QRCodeWriter();
    String finaldata =Uri.encode(data, "ISO-8859-1");
    try {
        BitMatrix bm = writer.encode(finaldata,BarcodeFormat.QR_CODE, 350, 350);
        mBitmap = Bitmap.createBitmap(350, 350, Config.ARGB_8888);
        for (int i = 0; i < 350; i++) {
            for (int j = 0; j < 350; j++) {
                mBitmap.setPixel(i, j, bm.get(i, j) ? Color.BLACK: Color.WHITE);
            }
        }
    } catch (WriterException e) {
        e.printStackTrace();
    }
    if (mBitmap != null) {
        mImageView.setImageBitmap(mBitmap);
    }
}
public void generateBarCode(String data){
    com.google.zxing.Writer c9 = new Code128Writer();
    try {
        BitMatrix bm = c9.encode(data,BarcodeFormat.CODE_128,350, 350);
        mBitmap = Bitmap.createBitmap(350, 350, Config.ARGB_8888);

        for (int i = 0; i < 350; i++) {
            for (int j = 0; j < 350; j++) {

                mBitmap.setPixel(i, j, bm.get(i, j) ? Color.BLACK : Color.WHITE);
            }
        }
    } catch (WriterException e) {
        e.printStackTrace();
    }
    if (mBitmap != null) {
        mImageView.setImageBitmap(mBitmap);
    }
} 
```

一旦你得到位图图像，只需保存它

```
//create a file to write bitmap data
    File f = new File(FilePath, FileName+".png");
    f.createNewFile();

    //Convert bitmap to byte array
    ByteArrayOutputStream bos = new ByteArrayOutputStream();
    ImageBitmap.compress(CompressFormat.PNG, 0, bos);
    byte[] bytearray = bos.toByteArray();

    //Write bytes in file
    FileOutputStream fos = new FileOutputStream(f);
    fos.write(bytearray);
    fos.flush();
    fos.close(); 
```

您还可以检查我创建的用于创建条形码或二维码[的 github 上的一个小型库](https://github.com/girishnair12345/GZxing)

```
GZxingEncoder   Encoder = GZxingEncoder.getInstance();
Encoder.initalize(this);
//To generate bar code use this
Bitmap bitmap = Encoder.generateBarCode_general("some text") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T16:53:26.773

它现在不归还`Intent`。没有办法得到它。你可以建议一个补丁让它被退回——这可能需要几天的工作。或者试试 Girish 的方法，就是直接嵌入编码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-04T05:49:22.407

要将扫描的图像存储在 ZXing 中，您必须重写 Class CaptureActivity 中的方法 drawResultPoints。

```
 String root = Environment.getExternalStorageDirectory().toString();
 File myDir = new File(root);    
 myDir.mkdirs();
 Random generator = new Random();
 int n = 10000;
 n = generator.nextInt(n);
 String fname = "Image-"+ n +".jpg";
 File file = new File (myDir, fname);
 if (file.exists ()) file.delete (); 
 try {
     FileOutputStream out = new FileOutputStream(file);
     barcode.compress(Bitmap.CompressFormat.JPEG, 90, out);
     out.flush();
     out.close();

 } catch (Exception e) {
   Toast.makeText(getApplicationContext(), e.getMessage(), Toast.LENGTH_LONG).show();
 } 
```

这会将扫描的图像保存在 SD 卡的根目录中，您可以对其进行自定义以将其保存在您需要的任何特定文件夹中。它将存储的图像是扫描的图像，在您扫描时显示为重影。

# python - 如何在 Python 中执行“mysqldump”？

> ID：11697004
> 
> 赞同：0
> 
> 时间：2012-07-27T23:49:58.660
> 
> 标签：python, mysql, mysqldump, mysql-python

我想使用第三台服务器将 MySQL 数据库的内容从一台服务器复制到另一台服务器。这可以使用以下命令从 shell 提示符完成：

```
mysqldump --host=hostname1 --user=username --password="mypwd" acme | mysql --host=hostname2 --user=username --password="mypwd" acme 
```

但是，如何在不使用`os.system`或任何其他子流程方法的情况下从 Python 脚本中执行此操作？我已经阅读了[MySQLdb 文档](http://mysql-python.sourceforge.net/MySQLdb.html#some-examples)，但没有看到批量导出/导入的方法。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T02:27:19.027

如果您不想从命令行使用 mysqldump（使用 os.system 方法），那么您可能会直接从 MySQL 获取数据，然后将其放到另一台服务器上。在这方面，您的问题看起来非常类似于[Get Insert Statement for existing row in MySQL](https://stackoverflow.com/questions/3978326/get-insert-statement-for-existing-row-in-mysql)

您可以使用查询来获取架构创建 sql

```
SHOW CREATE TABLE MyTable; 
```

然后你需要实现一个脚本来查询数据并将其插入到另一个服务器。

您还可以查看允许您将数据从一个数据库复制到另一个数据库的第三方应用程序。

# html - iFrame 大小不正确

> ID：11697006
> 
> 赞同：0
> 
> 时间：2012-07-27T23:50:43.160
> 
> 标签：html, windows, silverlight, iframe, media

我正在尝试将此实时视频放在我的公共访问频道网站中。这是他们（att-uverse）发给我的嵌入。问题是它不显示控件，但在视频上方有围绕控件大小的空白区域。

```
<iframe src="http://video.discovervideo.com/dvme/play/wm/?video=http://video.discovervideo.com/accounts/boltonct/pub.asx&w=320&h=240&stretch=fit&start=true" scrolling="no" frameborder="0" class="video" style="width: 320px; height: 240px"> 
```

我试过把它做成一个块并改变定位，但我似乎无法摆脱空白。我已经使用扩展高度来显示控件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T08:55:26.927

顶部的空白区域似乎是发送给您的视频内容的一部分。

我必须更新我在 Macbook Pro 上安装的 Microsoft Silverlight 才能播放视频，一旦播放完毕，视频底部的视频控件就会如您所愿。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T06:49:08.273

这是我能做到的最好的：

```
<iframe src="http://video.discovervideo.com/dvme/play/wm/?video=http://video.discovervideo.com/accounts/boltonct/pub.asx&w=320&h=240&stretch=fit&start=true" width="340px" height="254px" scrolling="auto"> 
```

# php - PHP 5：如何扩展更高目录中的文件？

> ID：11697011
> 
> 赞同：2
> 
> 时间：2012-07-27T23:51:34.970
> 
> 标签：php, namespaces, extends

这里的第一个计时器。

我正在编写一个脚本来转换命名空间和类名以满足当前标准，即：

// 原始命名空间 oldNS;

类 foo_bar_baz_someClass 扩展 topLvlFile {

// 修改类 someClass 扩展 topLvlFile {

命名空间 oldNS\foo\bar\baz;

我遇到的问题是扩展 topLvlFile ，因为它位于更高的目录中。显然 'class someClass extends ....\topLvlFile' 会失败。

我一直在网上搜索试图找到解决方案，但运气不佳。

有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T23:59:51.573

需要'../toplvlfile';

Someclass 扩展 SomeOtherClass

# xml - 使用自定义 XML 从 Excel 2010 的文件菜单中删除“保存并发送”

> ID：11697013
> 
> 赞同：0
> 
> 时间：2012-07-27T23:52:01.290
> 
> 标签：xml, excel, excel-2010, ribbon-control

有人可以帮我修改以下 XML 代码（Office 2007），以便它在 Office 2010 中工作吗？我在下面包含了 Office 2007 中的 XML：

```
<customUI xmlns="http://schemas.microsoft.com/office/2006/01/customui">
<ribbon>
    <officeMenu>
        <menu idMso="FileSendMenu" enabled="false"/>
        <menu idMso="FileEmailAsPdfEmailAttachment" enabled="false"/>
        <menu idMso="FileEmailAsXpsEmailAttachment" enabled="false"/>
        <menu idMso="FileSendAsAttachment" enabled="false"/>
    </officeMenu>
</ribbon> 
```

我无法弄清楚为什么我的架构不起作用。我对 XML 一无所知并没有帮助，我只是在黑暗中摸索。我的目标是理想地删除（或至少禁用）Excel 2010 中“文件”菜单下的“保存并发送”菜单项。我没有找到有关 Office 2010 的 XML 结构的任何文档，这似乎与 Office 发生了显着变化2007 年。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T00:07:59.847

所以当然，在我问这个问题之后，我找到了解决方案。以下是删除文件功能区下各种项目的格式（现在在 Office 2010 中显然称为后台）：

```
<customUI xmlns="http://schemas.microsoft.com/office/2009/07/customui">
<backstage>
    <button idMso="FileSave" visible="false"/>
    <button idMso="FileSaveAs" visible="false"/>
    <button idMso="FileOpen" visible="false"/>
    <button idMso="FileClose" visible="false"/>
    <button idMso="ApplicationOptionsDialog" visible="false"/>
    <button idMso="FileExit" visible="false"/>
    <tab idMso="TabInfo" visible="false"/>
    <tab idMso="TabRecent" visible="false"/>
    <tab idMso="TabNew" visible="false"/>
    <tab idMso="TabPrint" visible="false"/>
    <tab idMso="TabShare" visible="false"/>
    <tab idMso="TabHelp" visible="false"/>
    </backstage>
</customUI> 
```

这将删除“文件”菜单下的所有选项。您显然可以有选择地删除/显示您想要的元素。

# mysql - 延迟插入多个索引的缺点？- MySQL

> ID：11697014
> 
> 赞同：0
> 
> 时间：2012-07-27T23:52:03.580
> 
> 标签：mysql, optimization, insert, indexing, delay

我知道索引的缺点是每次写入表时都必须更新它们 - 即影响加载时间。但是，对于我的一张表，我经常在子句`SELECT`中使用 3 个不同的列。`WHERE`所以我心想，我真的要在表中添加 3 个索引吗？和以前一样的缺点是每次写入时都会更新每个索引。但是，该表仅写入 using `INSERT DELAYED`。这是否意味着没有缺点，我应该使用 3 个指数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T23:56:47.157

实际上，您可能想要一个包含所有 3 列的索引。MySQL 在查询中每个表只能使用一个索引。
拥有该指数会带来性能下降，但它比没有它的不利影响要小得多。

# c# - 对于单个对象和列表，将一个对象转换为另一个对象的最少代码? I need to convert one object to another...in both cases of a single instance of the object as well as corresponding Lists of those objects. I'd rather not have to perform the same mappings in 2 place 问问题 问问题 2012-07-27T23:52:11.307 283 次 This question shows research effort; it is useful and clear 0 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. I need to convert one object to another...in both cases of a single instance of the object as well as corresponding Lists of those objects. I'd rather not have to perform the same mappings in 2 places. Here is what I mean: This converts a Facebook movie to a Standard Movie object //Converts an Facebook object to a Standard Movie object public MovieDetails ConvertFacebookMovieToStandardMovie(FacebookMovie Movies) { MovieDetails objMovieDetails = new MovieDetails(); objMovieDetails.ID = 0; objMovieDetails.Source = Movies.Source; objMovieDetails.SourceID = Convert.ToString(Movies.ID); objMovieDetails.Title = Movies.Name; objMovieDetails.URL = GetInternalMovieURL(objMovieDetails.Source, objMovieDetails.SourceID); objMovieDetails.ImageURL = Movies.Picture; objMovieDetails.SourceURL = Movies.SourceURL; objMovieDetails.Description = Movies.Description return objMovieDetails; }//Convert Facebook to standard Now I also need to do the same things in cases where I have the same objects, just in List form, i.e. //Converts an Facebook class to a MovieDetails class of WWN public List <moviedetails>ConvertFacebookMovieToStandardMovie(List <facebookmovie>lstFacebookMovieDetails) { List <moviedetails>lstMovieListDetails = lstFacebookMovieDetails.Select(Movies => new MovieDetails() { ID = 0 ,Source = Movies.Source ,SourceID = Convert.ToString(Movies.ID) ,Title = Movies.Name ,URL = GetInternalMovieURL(Source, SourceID) ,ImageURL = Movies.Picture ,SourceURL = Movies.SourceURL ,Description = Movies.Description }).ToList(); return lstMovieListDetails; }//Convert Facebook to standard I'm new to c# and linq, so not sure how I could create one method that could handle both...or at least a way to encapsulate the mappings. I know I could create an overload method for the List scenario and loop through the items in the list and call the first object convert method...But I was hoping to use the linq route I currently have for, what I'm guessing, is better performance. Thanks! Chad Have you considered generating an Internet Calendar Appointment (ICA) request and emailing it? I believe that format contains delegate information that you can use. Here is a link to some Microsoft documentation on how to add this (in ASP.Net, but that shouldn't matter) and here is a link to the IETF RFC that defines the format. c#linq 4 3 回答 3 This answer is useful 2 只需调用您的函数。 public List <moviedetails>ConvertFacebookMovieToStandardMovie(List <facebookmovie>lstFacebookMovieDetails) { List <moviedetails>lstMovieListDetails = lstFacebookMovieDetails.Select(Movies => ConvertFacebookMovieToStandardMovie(Movies)).ToList(); return lstMovieListDetails; } 或其他方式 public MovieDetails ConvertFacebookMovieToStandardMovie(FacebookMovie Movies) { return ConvertFacebookMovieToStandardMovie(new [] { Movies} ).FirstOrDefault(); }//Convert Facebook to standard 你也可以as超载 public static MovieDetails operator as(FacebookMovie m) { if (m == null) return null; MovieDetails objMovieDetails = new MovieDetails() { ID = 0, Source = Movies.Source, SourceID = Convert.ToString(Movies.ID), Title = Movies.Name, URL = GetInternalMovieURL(objMovieDetails.Source, objMovieDetails.SourceID), ImageURL = Movies.Picture, SourceURL = Movies.SourceURL, Description = Movies.Description } return objMovieDetails } 然后 ConvertFacebookMovieToStandardMovie 看起来很傻，但它看起来像这样： public MovieDetails ConvertFacebookMovieToStandardMovie(FacebookMovie Movies) { return Movies as MovieDetails; }//Convert Facebook to standard 和 public List <moviedetails>ConvertFacebookMovieToStandardMovie(List <facebookmovie>lstFacebookMovieDetails) { List <moviedetails>lstMovieListDetails = lstFacebookMovieDetails.Select(Movies => Movies as MovieDetails).ToList(); return lstMovieListDetails; } 于 2012-07-27T23:57:28.850 回答 This answer is useful 1 除非为这两种情况使用单独的代码可以提高性能，否则我会简单地废弃单个电影变体并保留 List 变体。要执行单个电影变体，只需执行以下操作using System.Linq;： List <facebookmovie>moviesDetailsList = ... MovieDetails movieDetails = ConvertFacebookMovieToStandardMovie(moviesDetailsList).Single(); 如果您希望将单个案例作为单独的方法，您可以将上述内容作为该方法的主体，并带有“...”= new [] {movieDetail}; 于 2012-07-28T00:06:18.630 回答 This answer is useful 0 较短的版本 public List <moviedetails>ConvertFacebookMovieToStandardMovie(List <facebookmovie>lstFacebookMovieDetails) { return lstFacebookMovieDetails.ConvertAll(ConvertFacebookMovieToStandardMovie); } 根据msdn 将当前 List 中的元素转换为另一种类型，并返回包含转换后的元素的列表。 于 2012-07-28T00:12:33.267 回答 Related 2 validation - Cakephp 一种模型不同的表单验证 2 ios - 从原生 iOS 应用程序调用 Meteor 2 ios - 如何重新加载 tableview 的特定部分 1 c# - 具有缓存和 SqlMethods 的存储库模式 1 php - 混淆代码在 Greasemonkey 脚本中引发错误 2 asp.net - 需要将 datalist 中选定的链接按钮值分配给 asp.net 中的标签 2 sql - MS SQL Server 跨表约束 2 sql-server - 我怎样才能在sql表中创建一个循环 1 templates - 远程服务器上的外部模板（通过 http） 1 java - JNI - 无法加载使用 netbeans 编译的类 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641</facebookmovie></moviedetails></facebookmovie></moviedetails></facebookmovie></moviedetails></moviedetails></facebookmovie></moviedetails></moviedetails></facebookmovie></moviedetails>

> ID：11697016
> 
> 赞同：0
> 
> 时间：
> 
> 标签：c#, linq

I need to convert one object to another...in both cases of a single instance of the object as well as corresponding Lists of those objects. I'd rather not have to perform the same mappings in 2 places. Here is what I mean: This converts a Facebook movie to a Standard Movie object

```
//Converts an Facebook object to a Standard Movie object
    public MovieDetails ConvertFacebookMovieToStandardMovie(FacebookMovie Movies)
    {
        MovieDetails objMovieDetails = new MovieDetails();
        objMovieDetails.ID = 0;
        objMovieDetails.Source = Movies.Source;
        objMovieDetails.SourceID = Convert.ToString(Movies.ID);
        objMovieDetails.Title = Movies.Name;
        objMovieDetails.URL = GetInternalMovieURL(objMovieDetails.Source, objMovieDetails.SourceID);
        objMovieDetails.ImageURL = Movies.Picture;
        objMovieDetails.SourceURL = Movies.SourceURL;
        objMovieDetails.Description = Movies.Description

        return objMovieDetails;

    }//Convert Facebook to standard 
```

Now I also need to do the same things in cases where I have the same objects, just in List form, i.e.

```
//Converts an Facebook class to a MovieDetails class of WWN
    public List<MovieDetails> ConvertFacebookMovieToStandardMovie(List<FacebookMovie> lstFacebookMovieDetails)
    {
        List<MovieDetails> lstMovieListDetails = lstFacebookMovieDetails.Select(Movies => new MovieDetails()
        {
            ID = 0
            ,Source = Movies.Source
            ,SourceID = Convert.ToString(Movies.ID)
            ,Title = Movies.Name
            ,URL = GetInternalMovieURL(Source, SourceID)
            ,ImageURL = Movies.Picture
            ,SourceURL = Movies.SourceURL
            ,Description = Movies.Description
        }).ToList();

        return lstMovieListDetails;

    }//Convert Facebook to standard 
```

I'm new to c# and linq, so not sure how I could create one method that could handle both...or at least a way to encapsulate the mappings.

I know I could create an overload method for the List scenario and loop through the items in the list and call the first object convert method...But I was hoping to use the linq route I currently have for, what I'm guessing, is better performance.

Thanks! Chad

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T23:57:28.850

只需调用您的函数。

```
 public List<MovieDetails> ConvertFacebookMovieToStandardMovie(List<FacebookMovie> lstFacebookMovieDetails)
    {
        List<MovieDetails> lstMovieListDetails =
          lstFacebookMovieDetails.Select(Movies => ConvertFacebookMovieToStandardMovie(Movies)).ToList();

        return lstMovieListDetails;
     } 
```

或其他方式

```
public MovieDetails ConvertFacebookMovieToStandardMovie(FacebookMovie Movies)
{
    return ConvertFacebookMovieToStandardMovie(new [] { Movies} ).FirstOrDefault();
}//Convert Facebook to standard 
```

* * *

* * *

你也可以`as`超载

```
public static MovieDetails operator as(FacebookMovie m)
{
   if (m == null) return null;

    MovieDetails objMovieDetails = new MovieDetails()
        {
          ID = 0,
          Source = Movies.Source,
          SourceID = Convert.ToString(Movies.ID),
          Title = Movies.Name,
          URL = GetInternalMovieURL(objMovieDetails.Source, objMovieDetails.SourceID),
          ImageURL = Movies.Picture,
          SourceURL = Movies.SourceURL,
          Description = Movies.Description
       }

    return objMovieDetails
} 
```

然后 ConvertFacebookMovieToStandardMovie 看起来很傻，但它看起来像这样：

```
public MovieDetails ConvertFacebookMovieToStandardMovie(FacebookMovie Movies)
{
    return Movies as MovieDetails;
}//Convert Facebook to standard 
```

和

```
public List<MovieDetails> ConvertFacebookMovieToStandardMovie(List<FacebookMovie> lstFacebookMovieDetails)
{
    List<MovieDetails> lstMovieListDetails = 
      lstFacebookMovieDetails.Select(Movies => Movies as MovieDetails).ToList();

    return lstMovieListDetails;

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T00:06:18.630

除非为这两种情况使用单独的代码可以提高性能，否则我会简单地废弃单个电影变体并保留 List 变体。要执行单个电影变体，只需执行以下操作`using System.Linq;`：

```
List<FacebookMovie> moviesDetailsList = ...
MovieDetails movieDetails = ConvertFacebookMovieToStandardMovie(moviesDetailsList).Single(); 
```

如果您希望将单个案例作为单独的方法，您可以将上述内容作为该方法的主体，并带有“...”`= new [] {movieDetail};`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-28T00:12:33.267

较短的版本

```
 public List<MovieDetails> ConvertFacebookMovieToStandardMovie(List<FacebookMovie> lstFacebookMovieDetails)
{
    return lstFacebookMovieDetails.ConvertAll(ConvertFacebookMovieToStandardMovie);
 } 
```

根据[msdn](http://msdn.microsoft.com/en-us/library/73fe8cwf.aspx)

> 将当前 List 中的元素转换为另一种类型，并返回包含转换后的元素的列表。

# php - Date_format - php

> ID：11697020
> 
> 赞同：5
> 
> 时间：2012-07-27T23:52:25.770
> 
> 标签：php, mysql, date-format

When I try to format the date of a datetime field in my mysql db, and echos' the result, like this:

```
echo $result["date"]; 
```

but yet it says for example, 2012-01-03 10:27:53
my script looks like this:

```
DATE_FORMAT(date, '%a, %b, &Y') 
```

and it should then say 01, 03, 2012 (or something like this)
is it wrong "type" of echo code i use, i am new to the whole date_format thing so i dont really know if im doing it right.
whole query:

```
SELECT id, subject, DATE_FORMAT(date, '%a, %b, %Y') FROM articles ORDER BY id DESC 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-27T23:54:51.043

No, you're selecting the original `date` column value, not the value from `DATE_FORMAT()`.

You need to alias that value like this in your SQL query:

```
DATE_FORMAT(date, '%a, %b, &Y') as formatted_date 
```

And then pick it up in PHP with:

```
echo $row['formatted_date']; 
```

# android - Selecting text in a WebView and capture the spans

> ID：11697021
> 
> 赞同：2
> 
> 时间：2012-07-27T23:52:49.730
> 
> 标签：android, webview, html, textselection

My question pretty much speaks for itself. I want to be able to not only capture the text when selecting text in a WebView, but I also want to capture the spans surrounding the text. Is there any way to do this natively?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T00:17:12.073

**1 - 在 WebView 中选择文本**

*从扩展 WebView 的类：*

```
public void selectAndCopyText() {
    try {
        Method m = WebView.class.getMethod("emulateShiftHeld", null);
        m.invoke(this, null);
    } catch (Exception e) {
        e.printStackTrace();
        // fallback
        KeyEvent shiftPressEvent = new KeyEvent(0,0,
             KeyEvent.ACTION_DOWN,KeyEvent.KEYCODE_SHIFT_LEFT,0,0);
        shiftPressEvent.dispatch(this);
    }
} 
```

然后你必须使用 ClipboardManager 来观察新文本。

或者

本教程可以帮助您。

[使用 WebView 选择文本](http://devemat-androidprogramming.blogspot.com/2011/06/selecting-text-with-webview.html)

**2 - 捕获跨度**

这可以帮助你。

[如何将 WebView 内容放入位图中？](https://groups.google.com/forum/?fromgroups#!topic/android-developers/W6smaM1atE8)

谢谢。

# c++ - What's the simplest "unused" code that won't be optimized out?

> ID：11697026
> 
> 赞同：3
> 
> 时间：2012-07-27T23:54:14.020
> 
> 标签：c++, debugging, optimization

Very frequently, I want to test the value of a variable in a function via a breakpoint. In many cases, that variable never actually gets referenced by any code that "does stuff", but that doesn't mean I don't still want to see it. Unfortunately, the optimizer is working against me and simply removing all such code when compiling, so I have to come up with convoluted grossness to fool the compiler into thinking those values actually matter so they don't get optimized away. I don't want to turn the optimizer off, as it's doing important stuff in other places, but just for this one block of code I'd like to temporarily disable it for the sake of debugging.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-28T00:00:16.840

产生*可观察行为*的代码符合定义的要求。例如，`printf("")`。

对 volatile 变量的访问也正式构成了可观察的行为，尽管如果某些编译器仍然丢弃“不必要的” volatile 变量，我不会感到惊讶。

出于这个原因，对我来说，调用 I/O 函数似乎是最好的选择。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T23:59:53.827

您可以尝试“volatile”关键字。一些介绍位于[http://en.wikipedia.org/wiki/Volatile_variable](http://en.wikipedia.org/wiki/Volatile_variable)。

一般来说， volatile 关键字旨在防止编译器对假定变量值不能“自行”更改的代码进行任何优化。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-28T00:07:33.163

你没有指定你的编译器，所以我将在这里添加我一直在对我专门用于调试的任何变量使用 volatile 说明符。在我的编译器（Embarcadero RAD Studio C++ Builder）中，我已经使用它几年了，并且没有一次对变量进行过优化。也许你不使用这个编译器，但如果你这样做了，我可以说 volatile 肯定一直对我有用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-28T00:26:47.387

这是我使用的技巧的一个示例：

```
#include <ctime>
#include <iostream>
int main() {
    std::cout << "before\n";
    if (std::time(NULL) == 0) {
        std::cout << "This should not appear\n";
    }
    std::cout << "after\n";
} 
```

该`time()`调用应始终返回一个正值，但编译器无法知道这一点。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-28T02:08:05.823

如果变量的唯一目的是在使用调试器的断点中查看变量，则可以将变量设为全局变量。例如，您可以维护一个全局缓冲区：

```
#ifdef DEBUG
char dbg_buffer[512];
template <typename T>
void poke_dbg (const T &t) {
    memcpy(dbg_buffer, &t, sizeof(T));
}
#else
#define poke_dbg(x)
#endif 
```

然后在调试期间，您可以检查 dbg_buffer 的内容（如果需要，可以使用适当的强制转换）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-27T23:56:01.447

你有没有尝试过

```
#pragma optimize("",off) 
```

?

我认为特定于 MSVS - [http://msdn.microsoft.com/en-us/library/chh3fb0k(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/chh3fb0k(v=vs.80).aspx)

# php - encoding issue using php and mysql, wordpress

> ID：11697027
> 
> 赞同：0
> 
> 时间：2012-07-27T23:54:17.597
> 
> 标签：php, mysql, wordpress, utf-8

I have the following text which I manually enter into the wordpress posts table

```
&amp;#226;&#8364;&#353; 
```

I encode into utf-8 using:

```
$text = "&amp;#226;&#8364;&#353;";
$enc = mb_detect_encoding($text, "UTF-8,ISO-8859-1");
$hotelDescription   = iconv($enc, "UTF-8", $text); 
```

However, when wordpress echoes it it displays

```
ââ‚¬Å¡ 
```

Any ideas who I can output the correct characters?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T00:00:14.173

看起来你错过了 #226; 之前的 &

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T00:04:44.033

您需要指定显示该字符串的页面使用 UTF-8 编码呈现。您发布的输出是该 utf-8 字符串的 iso-8859-1 版本。假设数据以 UTF-8 格式正确存储在数据库中，请确保呈现此字符串的页面具有以下元标记：

```
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/> 
```

# xcode - XCODE: Icon specified in info.plist not found under the top level app wrapper Default@2x.png

> ID：11697028
> 
> 赞同：2
> 
> 时间：2012-07-27T23:54:27.190
> 
> 标签：xcode, validation, icons, info.plist, distribute

Alright, I have had maybe 20 issues with validating my project, and before that it was a breeze making it, but I'm at the finish line. I can't seem to figure this one out, and this is the last step before I'm done. So PLEASE HELP, thanks.

apparently since i'm "too low a level" to post screenshots, I found this site to grab a picture and put it to a link so here: [http://i46.tinypic.com/2q9w4zo.png](http://i46.tinypic.com/2q9w4zo.png)

# javascript - Wrapping nested with incrementing ids around elements in jQuery

> ID：11697029
> 
> 赞同：6
> 
> 时间：2012-07-27T23:54:31.410
> 
> 标签：javascript, jquery, html

I am just learning jQuery and came across a problem that stumped me. I need to move, add & name divs with out affecting the content.

I have a single fixed width WRAPPER div with SECTION divs inside. This is what it looks like:

```
<body>
<div id="whitewrap">

    <div id="wrapper-1" class="wrapper">
        <div class="clearfix">

            <section id="block-1">
            <h1>Title</h1>
            <p>Some wonderful content.</p>
            </section><!-- #block-1 -->

            <section id="block-2">
            <h1>Title</h1>
            <p>Some wonderful content.</p>
            </section><!-- #block-2 -->

            <section id="block-3">
            <h1>Title</h1>
            <p>Some wonderful content.</p>
            </section><!-- #block-3 -->

        </div><!-- .clearfix -->
    </div><!-- #wrapper-1 -->

</div><!-- #whitewrap -->
</body> 
```

What I need is each SECTION to have it's own WRAPPER div plus add a CONTAINER div around each wrapper. The ID # for WRAPPERS and CONTAINERS need to auto increase because the SECTIONS are dynamically added.

This is what I imagine.

```
<body>
<div id="whitewrap">

    <div id="container-1">
        <div id="wrapper-1" class="wrapper">
            <div class="clearfix">

            <section id="block-1">
            <h1>Title</h1>
            <p>Some wonderful content.</p>
            </section><!-- #block-1 -->

            </div><!-- .clearfix -->
        </div><!-- #wrapper-1 -->
    </div><!--#container-1 -->

    <div id="container-2">
        <div id="wrapper-2" class="wrapper">
            <div class="clearfix">

            <section id="block-2">
            <h1>Title</h1>
            <p>Some wonderful content.</p>
            </section><!-- #block-2 -->

            </div><!-- .clearfix -->
        </div><!-- #wrapper-2 -->
    </div><!--#container-2 -->

    <div id="container-3">
        <div id="wrapper-3" class="wrapper">
            <div class="clearfix">

            <section id="block-3">
            <h1>Title</h1>
            <p>Some wonderful content.</p>
            </section><!-- #block-3 -->

            </div><!-- .clearfix -->
        </div><!-- #wrapper-3 -->
    </div><!--#container-3 -->

</div><!-- #whitewrap -->
</body> 
```

Thank you guys!

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-27T23:59:43.997

[`.wrap()`](http://api.jquery.com/wrap/)使用带有递增计数器的 jQuery函数。传递一个函数，`.wrap()`该函数构建一个 HTML 片段来包围 each `<section>`，根据需要在 ids 中使用计数器并递增它：

```
var counter = 1;
$('section').wrap(function() {
  // Make a string of the HTML which should wrap around each <section>
  var wrapper = '<div id="container-' + counter + '"><div id="wrapper-' + counter + '" class="wrapper"></div></div>';
  // Increment the counter
  counter++;
  // Return the string and it will be applied around each <section>
  return wrapper;
}); 
```

[这是一个演示...](http://jsfiddle.net/QApF8/1/)

注意：您已经有了`<div id="wrapper-1" />`整个事物的周围环境。如果应该删除它（如果你`wrapper-1`在 a 周围有另一个应该删除它`<section>`），请[`.unwrap()`](http://api.jquery.com/unwrap/)首先使用：

```
$("div.clearfix").unwrap();
// Then run the rest of the code... 
```

[正如在这个演示中......](http://jsfiddle.net/QApF8/2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T00:21:29.740

[`wrap`](http://api.jquery.com/wrap)/[`unwrap`](http://api.jquery.com/unwrap)是你在这里寻找的。具体来说，为您提供索引参数的重载将很有帮助：

```
$("#block-1").unwrap().unwrap();

$("section").wrap(function(i) {
    var num = i + 1;

    return "<div id='container-" + num + "'>" + 
        "<div id='wrapper-" + num + "' class='wrapper'>" + 
        "<div class='clearfix'></div></div></div>";
}); 
```

**示例：http:** [//jsfiddle.net/andrewwhitaker/NfuGz/1/](http://jsfiddle.net/andrewwhitaker/NfuGz/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-28T00:01:31.297

查看[`wrap()`](http://api.jquery.com/wrap/)和[`wrapAll()`](http://api.jquery.com/wrapAll/)。要自动增加数字，您可以使用[`index()`](http://api.jquery.com/index/)on 。[`each()`](http://api.jquery.com/each/) `section`

无论如何，我会考虑重新考虑标签树，我不确定`section`包装在 many `div`s 中是否是语义上最正确的事情。也许`article`更适合？引用[**w3**](http://www.w3.org/TR/2011/WD-html5-20110113/sections.html#the-section-element)网站：

> *section 元素表示文档或应用程序的通用部分。在这种情况下，部分是内容的主题分组，通常带有标题。*

# actionscript-3 - AS3 - Keeping scrollbars on empty ScrollPane

> ID：11697032
> 
> 赞同：0
> 
> 时间：2012-07-27T23:54:46.880
> 
> 标签：actionscript-3, scrollbar, scrollpane

In my app I'm using a ScrollPane. I can load a DisplayObject into it, and it works fine. The thing is that when it's empty, i.e. I haven't loaded anything into it, there aren't any scrollbars on the pane. This makes sense, since there's no scrolling to do, but I'd like there to be "greyed out" scrollbars if possible.

It's not necessary or anything but most programs have it (open an empty .txt file in Notepad and you'll see what I mean), I'd just like to know if my app can do this.

If it helps at all, it's an AIR app made using FlashDevelop with the open-source Flex 4 SDK. I'm getting my components (ScrollPane, etc.) from a SWC.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T19:26:53.047

根据您的需要设置垂直或水平滚动策略。

[http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/fl/containers/BaseScrollPane.html#verticalScrollPolicy](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/fl/containers/BaseScrollPane.html#verticalScrollPolicy)

```
scrollPane.verticalScrollPolicy=ScrollPolicy.ON;
scrollPane.horizontalScrollPolicy=ScrollPolicy.ON; 
```

# r - 拆分时的顺序（例如，TA 应该在第一个“T”第二个中拆分为两列“A”）在 r

> ID：11697036
> 
> 赞同：5
> 
> 时间：2012-07-27T23:55:23.940
> 
> 标签：r, sorting, split, dataframe

我有以下问题，我可以解决：

```
set.seed (1234)
mydf <- data.frame (var1a = sample (c("TA", "AA", "TT"), 5, replace = TRUE),
                    varb2 = sample (c("GA", "AA", "GG"), 5, replace = TRUE),
                    varAB = sample (c("AC", "AA", "CC"), 5, replace = TRUE)
                    )
     mydf 

  var1a varb2 varAB
1    TA    AA    CC
2    AA    GA    AA
3    AA    GA    AC
4    AA    AA    CC
5    TT    AA    AC 
```

我想将两个字母分成不同的列，然后按字母顺序排列。

编辑：可以在拆分之前进行排序，例如 var1a 值“TA” var1a 应该是“AT”或拆分后，以便 var1aa 应该是“A”，而 var1ab 应该是“T”（而不是“T”，“A” ）。所以排序是在每个单元格内。

```
split_col <- function(.col, data){
    .x <- colsplit( data[[.col]], names =  paste0(.col, letters[1:2]))
   } 
```

拆分每一列并合并

```
 require(reshape)
    splitdf <- do.call(cbind, lapply(names(mydf), split_col, data = mydf))

 var1aa var1ab varb2a varb2b varABa varABb
1      T      A      A      A      C      C
2      A      A      G      A      A      A
3      A      A      G      A      A      C
4      A      A      A      A      C      C
5      T      T      A      A      A      C 
```

但未解决的部分是我想订购这对列，以便按字母顺序排列列名“a”和列名“b”。因此预期的输出：

```
 var1aa var1ab varb2a varb2b varABa varABb
1      A      T      A      A      C      C
2      A      A      A      G      A      A
3      A      A      A      G      A      C
4      A      A      A      A      C      C
5      T      T      A      A      A      C 
```

怎么能命令（每对变量的短）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-28T01:40:31.200

```
mylist <-as.list(mydf)

splits <- lapply(mylist, reshape::colsplit, names=c("a", "b"))
rowsort <- lapply(splits, function(x) t(apply(x, 1, sort)))
comb <- do.call(data.frame, rowsort)
comb

  var1a.1 var1a.2 varb2.1 varb2.2 varAB.a varAB.b
1       A       T       A       A       C       C
2       A       A       A       G       A       A
3       A       A       A       G       A       C
4       A       A       A       A       C       C
5       T       T       A       A       A       C 
```

编辑：如果名称很重要，您可以替换它们：

```
replaceNums <- function(x){
  .which <- regmatches(x, regexpr("[[:alnum:]]*(?=.)", x, perl=TRUE))
  stopifnot(length(x) %% 2 == 0) #checkstep
  paste0(.which, c("a", "b"))
}

names(comb) <- replaceNums(names(comb))
comb
  var1aa var1ab varb2a varb2b varABa varABb
1      A      T      A      A      C      C
2      A      A      A      G      A      A
3      A      A      A      G      A      C
4      A      A      A      A      C      C
5      T      T      A      A      A      C 
```

# python - Python .replace() Error

> ID：11697037
> 
> 赞同：0
> 
> 时间：2012-07-27T23:55:27.937
> 
> 标签：python

In Python, I open a text file and read it line-by-line, and strip() the line before evaluating it. When I evaluate the line, I have an if statement to check if the line is "random", and then puts a random number into a variable called genRandom. I have another line in my code that looks like this:

```
thisLine.replace("genRANDOM",genRandom) #Replace genRANDOM with the random number
```

On every line, it seems to work ok. In the input text file, I have a line that looks like this:

```
-genRANDOM
```

Whenever my script evaluates that line, I get this error:

```
Traceback (most recent call last):
  File "D:\Mass Storage\pythonscripts\TurnByTurn\execute.py", line 37, in <module>
    thisLine.replace("genRANDOM",genRandom) #Replace genRANDOM with the random number
TypeError: expected a character buffer object 
```

How can I fix this? Thanks in advance!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T23:58:01.083

你告诉用数字`thisLine.replace`替换字符串。这不起作用，因为它“需要一个字符缓冲区对象”（例如字符串），而不是数字。`"genRANDOM"``genRandom`

尝试`str(genRandom)`将其转换为字符串：`"4"`而不是`4`.

此外，您可能希望将变量命名为其他名称；`genRandom`对我来说听起来像是一个生成随机数的函数，而不是生成的随机数。

# mysql - UPDATE 查询中的 MySQL IF 语句

> ID：11697045
> 
> 赞同：9
> 
> 时间：2012-07-27T23:56:21.233
> 
> 标签：mysql, if-statement

为什么我不能像这样使用 IF

```
UPDATE my_users
    IF(position2 = 18, "SET position = 17", ''),
    IF(position2 = 17, "SET position = 16", ''),
    IF(position2 = 16, "SET position = 15", ''),
        WHERE user_id => 170 AND user_id <= 1000 
```

唯一有效的是

```
UPDATE my_users
    SET position2 = IF(position2 = 18, 17, 
                      IF(position2 = 17, 16, 
                        IF(position2 = 16, 15, ''
                      )
                        )
                          )
        WHERE user_id => 170 AND user_id <= 1000 
```

有没有办法以任何其他方式制作相同的东西，因为我有超过 40 个该字段位置的条件 2 并且它很容易以这种方式迷路？

**编辑：**

如果我跑

```
UPDATE my_users
    SET position2 = CASE position2  WHEN 18 THEN 17
                    WHEN 17 THEN 16
                    WHEN 16 THEN 15
                    END
            WHERE user_id => 170 AND user_id <= 1000 
```

什么时候`position2`不在 CASE 语句中，它将它设置为空，我如何才能保持除 CASE 语句中的值之外的任何值相同

**编辑2：** 我想解决方案是：

```
 UPDATE my_users
        SET position2 = CASE position2  WHEN 18 THEN 17
                        WHEN 17 THEN 16
                        WHEN 16 THEN 15
                            ELSE position2
                        END
                WHERE user_id => 170 AND user_id <= 1000 
```

**编辑 3：** 如果我的请求不是一次性的，那么更快的请求将按照 Vatev 的建议

```
 UPDATE my_users
        SET position2 = CASE position2  WHEN 18 THEN 17
                        WHEN 17 THEN 16
                        WHEN 16 THEN 15
                        END
                WHERE user_id => 170 AND user_id <= 1000
                AND position2 >= 16 and <= 18 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-02-03T17:59:21.650

你也可以这样做：

```
 UPDATE my_users
                     SET position2 = CASE WHEN position2 =18 THEN 17
                        WHEN position2 =17 THEN 16
                        WHEN position2 =16 THEN 15 ELSE position2 
                        END
                WHERE user_id between 170 AND  1000
                AND position2 between 16 and  18 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T19:41:19.640

这就是我将如何重写您的查询：

```
UPDATE
  my_users
SET 
  position2 = position2 - 1
WHERE
  position2 >= 16
  AND position2 <= 18
  AND user_id >= 170 
  AND user_id <= 1000 
```

# ruby-on-rails - Rails .Build 在每个方法中导致额外的项目

> ID：11697046
> 
> 赞同：0
> 
> 时间：2012-07-27T23:56:22.990
> 
> 标签：ruby-on-rails, ajax

我有一个基本的待办事项列表应用程序，它基于 current_user（通过设计生成）执行简单的 CRUD。

当使用 <% @tasks.each do |task| 时，索引上有一个额外的项目。%>。额外的项目没有 id (/tasks)。经过一番研究，这可能是由本文中提到的控制器中的 .build 引起[的](https://stackoverflow.com/questions/8963116/getting-a-rogue-iteration-from-my-each-loop)。你如何解决/解决这个额外的项目问题？我也在使用 ajax 来刷新 crud，但是我相信额外的项目会弄乱创建/删除后新列表的呈现方式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T00:03:47.807

检查新记录时可以避免它：

```
unless task.new_record?
  #other tasks stuff
end 
```

# php - ajax 中的完整 URL 路径

> ID：11697052
> 
> 赞同：0
> 
> 时间：2012-07-27T23:57:29.613
> 
> 标签：php, jquery, ajax, header, http-headers

可以将完整的 URL 路径放在 ajax 中吗？我在访问 url 时遇到问题，并且我的错误响应状态为 0。

```
 $.ajax({
        url: "http://fullurlpath.com/php/myphppagedata.php",
        type: "GET",
        data:  "somedata="+somedata,
        error: function(XMLHttpRequest, textStatus, errorThrown) {
             alert(XMLHttpRequest.responseText);
        }
    }).error(function(xhr){
             alert(xhr.responseText);
             alert(xhr.status);
    }).done(function(data){
             alert(data);
    }); 
```

另外，在我的**http://fullurlpath.com/php/myphppagedata.php**我有

```
header('Access-Control-Allow-Origin: *'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T00:16:11.303

[http://en.wikipedia.org/wiki/Same_origin_policy](http://en.wikipedia.org/wiki/Same_origin_policy)

[http://bob.ippoli.to/archives/2005/12/05/remote-json-jsonp/](http://bob.ippoli.to/archives/2005/12/05/remote-json-jsonp/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T01:08:21.690

我不会在您的客户端浏览器中使用 jQuery 请求它，而是在您自己的域上创建一个页面，例如`request.php`使用以下命令调用它：

```
echo file_get_contents("http://fullurlpath.com/php/myphppagedata.php"); 
```

这样，您的服务器将请求资源，这样您就不会遇到相同的来源策略问题。然后改为 ajax 这个文件。

```
$.ajax({
    url: "request.php", 
... 
```

您也可以使用`cURL`而不是`file_get_contents()`更精细的功能。

# android - 使用 BroadcastReceiver 启动 AsyncTask

> ID：11697053
> 
> 赞同：5
> 
> 时间：2012-07-27T23:57:32.753
> 
> 标签：android, android-asynctask, broadcastreceiver

我正在尝试在收到推送通知时更新 UI 的状态。为此，我需要启动一个`AsyncTask`执行一些网络操作的程序，然后根据结果更新 UI。

根据文档`BroadcastReceiver`，在接收器中执行异步操作是不安全的，因为执行它的进程可能会在`onReceive()`返回后立即被终止，假设该进程中没有其他“应用程序组件”。

是`BroadcastReceiver`运行在自己的进程中，还是和包含的Activity在同一个进程中？由于我只关心任务的完成，只要有 UI 要更新，我不担心`AsyncTask`如果 Activity 关闭会死。假设 BroadcastReceiver 与活动处于同一进程中，这是否可以安全/安全地启动我在接收器中描述的任务？

**编辑：**

为了澄清，我在活动中注册接收器`onResume()`并取消注册它`onPause()`，所以它应该只在活动已经处于活动状态时接收意图。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-28T02:23:19.137

广播接收器没有在它自己的进程上运行，它在 UI 线程上运行。

仅当您的应用程序中没有其他活动或服务正在运行时，您的进程才会在 onReceive 方法返回后被终止。

如果您的广播接收器是内部类的实例并且仅在您的活动处于活动状态时接收，那么您的进程将不会在 onReceive 方法返回后被终止。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T16:11:42.637

如果在你的内部`AsyncTask`，你需要一个上下文，那么我认为服务更好。如果没有，使用`AsyncTask`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-16T07:40:04.960

在 Honeycomb (API11) 之前，您必须使用服务。

由于 Honeycomb (API11)，您可以使用[**goAsync()**](http://developer.android.com/reference/android/content/BroadcastReceiver.html#goAsync%28%29)：

> 这可以由 onReceive(Context, Intent) 中的应用程序调用，以允许它在从该函数返回后保持广播活动。这不会改变对广播相对响应的期望（在 10 秒内完成），但允许实现将与其相关的工作转移到另一个线程，以避免由于磁盘 IO 导致主 UI 线程出现故障。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-28T03:09:00.050

我建议做的是`startActivity(intent)`来自广播接收器。就这样。在我将提供您所说的事件信息的意图中，您只需在包中设置一个参数。然后，您可以在 Activity`onStart()`或`onCreate()`任何被调用的地方检查它。如果旗帜在那里，那么从`Activity`开球开始`AsyncTask`。

完全不需要使用服务，具有来自服务活动的所有绑定和通信限制。

请记住，您也可以`startActivityForResult()`。我认为除了在广播接收器内传递和转发之外，您不想做任何事情。

顺便说一句，活动不需要有 UI。可以有不露面的活动。

# emacs - 如何在 org-mode 中使用其他标题样式，例如 twiki ---+ 或 mediawiki == h2 ==？

> ID：11697056
> 
> 赞同：6
> 
> 时间：2012-07-27T23:58:02.883
> 
> 标签：emacs, org-mode

我真的很想使用组织模式。

但是，我想使用 org-mode 来理解已经使用不同标题语法编写的结构化文档，

例如使用 twiki 的 ---+

```
---+ H1 

Top level

---++ H2

Nested

---+ H1 #2

Second top level 
```

或 mediawiki 之类的

```
= H1 = 

Top level

== H2 ==

Nested

= H1 #2 =

Second top level 
```

我想拥有 org-mode 折叠等的所有优点，只需使用这些不同的标题样式。

* * *

实际上，更糟糕的是：

例如，我希望 twiki 或 mediawaiki 标题优先于 org 模式星号标题。但我想同时使用两者。

= H1 =

```
Top level

* this is a list
** nested
* list
** nested

== H2 ==

Nested

= H1 #2 =

Second top level 
```

--+ 到目前为止我尝试过的

我已经能够使用大纲模式来处理 twiki，例如通过

```
---+ Emacs stuff
# try (defvar twiki-outline-regexp "---+\\++ \\|\\(\\(?:   \\)+\\)[0-9*] ")
Local Variables: ***
outline-regexp: "^---\\++" ***
org-outline-regexp: "^---\\++" ***
End: *** 
```

但是，org-outline-regexp 并没有我希望的那样做。

emacs 的outline-mode 的out-level 函数看起来几乎和我想要的一样。

```
(defvar outline-level 'outline-level
  "*Function of no args to compute a header's nesting level in an outline.
It can assume point is at the beginning of a header line and that the match
data reflects the `outline-regexp'.") 
```

即，而不是正则表达式，一个通用函数。

但我还没有设法让它与 org-mode 一起工作。看起来 org-mode 并没有真正使用它，或者更确切地说，还有其他东西。

```
;; In Org buffers, the value of `outline-regexp' is that of
;; `org-outline-regexp'.  The only function still directly relying on
;; `outline-regexp' is `org-overview' so that `org-cycle' can do its
;; job when `orgstruct-mode' is active.
(defvar org-outline-regexp "\\*+ "
  "Regexp to match Org headlines.")
(defconst org-outline-regexp-bol "^\\*+ "
  "Regexp to match Org headlines.
This is similar to `org-outline-regexp' but additionally makes
sure that we are at the beginning of the line.")

(defconst org-heading-regexp "^\\(\\*+\\)\\(?: +\\(.*?\\)\\)?[ \t]*$"
  "Matches an headline, putting stars and text into groups.
Stars are put in group 1 and the trimmed body in group 2.") 
```

失败了，好吧，我想从 org-mode 获得的主要是链接，在这里问另一个问题 [How can I "linkify" a non-org-mode buffer in emacs](https://stackoverflow.com/questions/11697111/how-can-i-linkify-a-non-org-mode-buffer-in-emacs)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T12:51:19.387

我的挫败感只是 org-mode 对新大纲部分的构成与大纲模式有不同的规则。它需要在星号之后有一个空格，因此它不适用于我的大量笔记，这些笔记放弃了这些空格。

我通过删除未充分记录的`org-outline-regexp`变量中的尾随空格解决了这个问题，该变量用于初始化缓冲区局部变量`outline-regexp`，这似乎对我有用。例如`(set-variable 'org-outline-regexp "\\*+")`

至于您的实际问题，我的猜测是其他正则表达式和代码必须更改以处理完全不同的内容，例如 twiki 或 mediawiki 标题。

# html - 相对于文件位置而不是 url 的路径

> ID：11697059
> 
> 赞同：2
> 
> 时间：2012-07-27T23:58:28.527
> 
> 标签：html, dynamic, friendly-url

**** 编辑：在此处解决[img、a 和标题文件的相对路径](https://stackoverflow.com/questions/11697601/relative-paths-from-file-for-img-a-and-header)****

对网页设计有点新意。

我刚刚创建了一个动态网站。它可以读取 domain/category、domain/category/this-article-about-x，都重定向到 domain/index.php 并且运行良好。

但是，我很快了解到，每当我使用 ./include 等相对路径时，相对路径都会考虑当前 URL，而不是 php 文件所在的实际 url。

长时间浏览互联网时，我有两个问题无法回答：

1) 如果 domain/index.php 试图显示带有 ./thumbnails/science/image.jpg 的图像，如果实际 url 是 domain/category/，它将不起作用，但如果它只是 domain/category，它将起作用（最后没有斜线）。为什么会出现这种不一致？HTML 代码显示图像的 src 在两种情况下都是相同的。

2）我的标题有一个带有类别的下拉菜单。一旦提交，它将调用自己（header.php），查看用户选择的类别并重定向到域/类别。一切正常。然后，您可以将下拉菜单重新更改为另一个类别，然后再次加载所有内容。但是同样，如果您直接访问 domain/cateory/ （末尾带有斜杠），CSS 将不会加载，图像不会像问题 1 中所说的那样加载，并且提交表单会导致问题，因为它会在域/类别/上查找 header.php，而不仅仅是在 header.php 文件实际所在的域上。

我已成功使用 dirname( **FILE** ) 来确保我包含所有工作（就我的测试而言，没有错误）。但我无法使用 dirname( **FILE** ) 生成链接或图像“img src=”，无论 URL 是什么，它们都将始终指向图像。

在 localhost 上，HTML 以 img src=c:\path\htdocs\thumbnails\img 的形式出现，这是正确的，但无论如何图像都不会显示。与“a href”链接相同。尝试使用 dirname( **FILE** ) 创建链接时，在 localhost 上创建的链接为 c:\correctpath，但单击它们完全没有任何效果。此外，使用带有 dirname( **FILE** ) 的标头来处理来自下拉菜单的重定向导致它也停止工作（但如果我使用 ./ . dropDownMenuValue，它会再次正确地将 url 更改为 domain/categoryChosen）

如何对相对 url 使用一致的方法，允许我在 localhost 上工作，然后上传到我的 web 主机，而无需更改文件，并且适用于通过 htaccess 具有漂亮名称 url 的动态网站？

谢谢，

这对我来说非常令人费解，如何从当前文件路径获取相对路径如此困难并产生如此多不同的问题，以及为什么只有 include 语句似乎与 dirname( **FILE** )配合得很好

编辑：[http ://board.phpbuilder.com/showthread.php?10374336-RESOLVED-mod_rewrite-for-SEO-Friendly-URLs-and-relative-path-issue-fixes](http://board.phpbuilder.com/showthread.php?10374336-RESOLVED-mod_rewrite-for-SEO-Friendly-URLs-and-relative-path-issue-fixes)

我在其他网站上发现了这个，但是每次你想从 localhost 转到 web 时，它都需要你更改基础。我试图避免这种情况。显然，必须有一种简单的方法来做如此基本的事情。我不敢相信谷歌和其他所有人在准备好让某些东西成为现实时都在改变路径。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T00:20:16.060

您应该始终对媒体等公共文件使用绝对路径。如果您出于某种原因不想这样做，或者您的站点此时过于复杂，则必须为其他文件类型创建重写规则，以便它们也可以从正确的路径中包含在内。

# c++ - C++中的模板成员函数重载和多重继承

> ID：11697061
> 
> 赞同：3
> 
> 时间：2012-07-27T23:58:55.610
> 
> 标签：c++, visual-studio-2010, templates, multiple-inheritance, name-lookup

我正在观察以下代码中的行为，我无法轻易解释，并希望更好地理解理论。我似乎找不到涵盖这种特殊情况的在线文档来源或现有问题。作为参考，我使用 Visual Studio C++ 2010 编译并运行以下代码：

```
#include <iostream>
using namespace std;

struct Bottom_Class
{
    template<typename This_Type>
    void Dispatch()
    {
        // A: When this comment is removed, the program does not compile
        //    citing an ambiguous call to Print_Hello
        // ((This_Type*)this)->Print_Hello();

        // B: When this comment is removed instead, the program compiles and
        //    generates the following output:
        //    >> "Goodbye from Top Class!"
        // ((This_Type*)this)->Print_Goodbye<void>();
    }

    void Print_Hello() {cout << "Hello from Bottom Class!" << endl;}

    template<typename This_Type>
    void Print_Goodbye() {cout << "Goodbye from Bottom Class!" << endl;}
};

struct Top_Class
{
    void Print_Hello() {cout << "Hello from Top Class!" << endl;}

    template<typename This_Type>
    void Print_Goodbye() {cout << "Goodbye from Top Class!" << endl;}
};

template<typename Top_Type,typename Bottom_Type>
struct Merged_Class : public Top_Type, public Bottom_Type {};

typedef Merged_Class<Top_Class,Bottom_Class> My_Merged_Class;

void main()
{
    My_Merged_Class my_merged_object;

    my_merged_object.Dispatch<My_Merged_Class>();
} 
```

为什么模板化成员函数与非模板化成员函数案例的工作方式不同？

编译器如何决定（在模板化的情况下） Top_Class::Print_Goodbye() 是适当的重载而不是 Bottom_Class::Print_Goodbye() ？

预先感谢您的考虑。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T00:09:49.780

两条评论（AFAIK 正确）都会在 GCC 4.6.3 中生成编译错误。可能是 Microsoft 编译器做错了什么。

```
➜  scratch  g++ -O2 templ.cc
templ.cc: In member function ‘void Bottom_Class::Dispatch() [with This_Type = Merged_Class<Top_Class, Bottom_Class>]’:
templ.cc:42:48:   instantiated from here
templ.cc:16:9: error: request for member ‘Print_Goodbye’ is ambiguous
templ.cc:22:10: error: candidates are: template<class This_Type> void Bottom_Class::Print_Goodbye()
templ.cc:30:10: error:                 template<class This_Type> void Top_Class::Print_Goodbye() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T00:32:32.083

在`Dispatch`方法上，`This_Type`与 相同`My_Merged_Class`。`My_Merged_Class`有*两个*名称为 的方法，`Print_Hello`当然编译器在区分它们时会遇到问题。

`Print_Hello`模板替换后对in的调用`Dispatch`如下所示：

```
((My_Merged_Class*)this)->Print_Hello(); 
```

我希望上述替换可以帮助您更好地了解为什么存在歧义。同样的问题实际上*应该*发生`Print_Goodbye`，但它可能是您正在使用的编译器中的一个错误，它允许它通过。

# c# - C# 查询：命令行窗口不存在

> ID：11697062
> 
> 赞同：0
> 
> 时间：2012-07-27T23:59:02.857
> 
> 标签：c#, visual-studio

我有以下代码用于按钮单击事件。此事件应打开命令窗口并执行应用程序：

```
private void start_Click(object sender, EventArgs e)
        {
            if (textBox1.Text == " " || textBox2.Text == " ")
            {
                MessageBox.Show("Header File or Executable Missing");
            }
            else
            {
                Process.Start(textBox1.Text);
                ProcessStartInfo startInfo = new ProcessStartInfo();
                startInfo.FileName = textBox1.Text;
                string filename = textBox1.Text;
                int found = filename.LastIndexOf("\\");
                int end = filename.Length;
                string temp = filename.Substring(found);
                startInfo.Arguments = temp + textBox2.Text;
                Process.Start(startInfo);
            }
        } 
```

我在这里面临的问题是，当我单击按钮时，命令窗口不会持续存在，我不知道命令窗口是否显示错误消息，因为它会瞬间打开和关闭。谁能告诉我这里出了什么问题并给我一些提示如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T00:11:59.767

如果要从 Windows 窗体应用程序启动新的控制台应用程序，则需要传入此类应用程序的路径或 cmd.exe + 该应用程序的运行命令。通过请求 Console.ReadKey(true) 或类似命令来确保控制台应用程序中的代码停止。

# sql-server - SQL NOT LIKE 和 LIKE

> ID：11697066
> 
> 赞同：3
> 
> 时间：2012-07-27T23:59:18.733
> 
> 标签：sql-server, operator-keyword, sql-like

我在理解 SQL 中的 LIKE 和 NOT LIKE 运算符时遇到问题。这是我执行的查询：

```
select serial_number from UNIT U 
group by serial_number
order by serial_number 
```

产生2000个结果。

当我执行这个查询时，我得到 1950 个结果：

```
select serial_number from UNIT U 
WHERE op_name LIKE 'Assembly'
group by serial_number
order by serial_number 
```

所以当我执行这个查询时，我希望得到 50 个结果，但我得到了 2000 个：

```
select serial_number from UNIT U 
WHERE op_name NOT LIKE 'Assembly'
group by serial_number
order by serial_number 
```

有什么解释吗？谢谢一堆。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T00:13:28.670

您正在做的小组使得进行您正在尝试的那种计数比较并不是真正有效的。假设您有 10 个唯一的序列号，每个序列号有两行（总共 20 行），一个带有 op_name “Xyz”，另一行带有 op_name “Assembly”。您的第一个查询将返回 10 行。您的第二个查询将返回 10 行。您的第三个查询将返回 10 行。由于该组，LIKE "Assembly" 和 NOT LIKE "Assembly" 不是相互排斥的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-28T00:07:53.790

`NULL`既不是`LIKE`也不是`NOT LIKE`什么。

* * *

实际上，更仔细地重新阅读您的数字，可能还有另一个原因。（我之前的观点是正确的，但这更有可能。）

假设您有以下数据：

```
serial_number | op_name
--------------+---------
1             | Assembly
1             | Not 
```

`1`将由两个查询返回。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-28T00:05:07.010

没有通配符，`%`您的`LIKE`操作就像`=`.

检查并查看这些值是什么......如果您正在使用`LIKE`，您很可能还想使用通配符，例如：

> 从 UNIT U 中选择序列号 WHERE op_name NOT LIKE '%Assembly%' group by serial_number order by serial_number

# ruby-on-rails - 控制器未通过关联创建

> ID：11697068
> 
> 赞同：0
> 
> 时间：2012-07-27T23:59:30.470
> 
> 标签：ruby-on-rails, ruby-on-rails-3, nested-attributes

我有两个模型，用户和组织，它们使用分配表具有 has_many 关系。创建用户时我有一个嵌套的资源表单，它可以很好地创建一个关联的组织。但是，在创建组织时，它不会将其与用户相关联。

这是我的相关组织控制器代码：

```
 def new
    @organization = current_user.organizations.build
  end

  def create
    @organization = current_user.organizations.build(params[:organization])
    @organization.save
  end 
```

还有我的模型：

组织分配

```
class OrganizationAssignment < ActiveRecord::Base
  belongs_to :user
  belongs_to :organization

  attr_accessible :user_id, :organization_id
end 
```

组织：

```
class Organization < ActiveRecord::Base
  validates :subdomain, :presence => true, :uniqueness => true

  has_many :organization_assignments
  has_many :people
  has_many :users, :through => :organization_assignments

  attr_accessible :name, :subdomain
end 
```

用户：

```
class User < ActiveRecord::Base

  has_many :organization_assignments
  has_many :organizations, :through => :organization_assignments

  # Include default devise modules. Others available are:
  # :token_authenticatable, :confirmable,
  # :lockable, :timeoutable and :omniauthable
  devise :database_authenticatable, :registerable,
         :recoverable, :rememberable, :trackable, :validatable

  accepts_nested_attributes_for :organizations

  # Setup accessible (or protected) attributes for your model
  attr_accessible :email, :password, :password_confirmation, :remember_me, :organizations_attributes
  # attr_accessible :title, :body

end 
```

表单视图：

```
= form_for @organization, :html => { :class => 'form-horizontal' } do |f|
  - @organization.errors.full_messages.each do |msg|
    .alert.alert-error
      %h3
        = pluralize(@organization.errors.count, 'error')
        prohibited this user from being saved:
      %ul
        %li
          = msg

  = f.label :name
  = f.text_field :name

  = f.label :subdomain
  = f.text_field :subdomain

  .form-actions
    = f.submit nil, :class => 'btn btn-primary'
    = link_to t('.cancel', :default => t("helpers.links.cancel")), organizations_path, :class => 'btn' 
```

事后我可以在控制台中很好地关联组织，所以我很确定模型中的关系设置正确。还有什么我想念的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T00:53:51.947

从我使用 Rails 的经验来看，你不能指望这种关系是这样建立的。尝试这样的事情。

```
def create
  @organization = Organization.build(params[:organization])
  @organization.save

  current_user.organizations << @organization
end 
```

您也可以保持代码原样，但保存`current_user`而不是`@organization`.

```
def create
  @organization = current_user.organizations.build(params[:organization])
  current_user.save
end 
```

# java - 为什么我的 ListView 在 TableRow 中包含 RatingBar 时无法点击？

> ID：11697075
> 
> 赞同：2
> 
> 时间：2012-07-27T23:59:59.677
> 
> 标签：java, android, eclipse, android-listview, android-tablelayout

当我在我的 ListView 的 TableRow 中有一个 RatingBar时，`onListItemClick`当我触摸一行时我不会被触发。当我这样做`bar.setVisibility(View.GONE)`或只是删除控件时，这些行可以再次单击。

如何做到这一点，以便当我添加 RatingBar 时，`onListItemClick`仍然会为该行解雇？我已经尝试设置，`focusable="false"`但它仍然无法正常工作。

想法？？？

这是 TableRow 中 RatingBar 的 XML：

```
<TableRow
            android:id="@+id/tableRow2x"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" >

            <LinearLayout
  xmlns:android="http://schemas.android.com/apk/res/android"
  android:layout_width="wrap_content"
  android:layout_height="wrap_content">

            <RatingBar 
      android:id="@+id/rtbProductRating"
      android:layout_height="wrap_content"
      android:layout_width="wrap_content"
      android:numStars="5"
      android:rating="3.5"
      android:layout_marginLeft="8dip"
      android:layout_marginTop="3dp"
      android:layout_marginBottom="3dp"
      android:isIndicator="false"
      android:focusable="false"
      android:focusableInTouchMode="false"
      style="@style/starRatingBar"  
/>  

            </LinearLayout>

        </TableRow> 
```

这是我的代码：

```
public class MainFragment extends ListFragment {

    public void onListItemClick(ListView parent, View v, int position, long id)
    {
        //... does stuff
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T02:01:46.503

onClick 事件已被 RatingBar 拦截，因此不会触发 onListItemClick。

您可以扩展 RatingBar 类，并重写 onTouchEvent 方法，返回 false。

```
@Override
public boolean onTouchEvent(MotionEvent event) {
    super.onTouchEvent(MotionEvent event)
    return false;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-21T13:34:53.207

将 RatingBar 设置为此将修复问题 ratingBar.setIsIndicator(true);

# linux - 从脚本内部确定解释器

> ID：11697076
> 
> 赞同：5
> 
> 时间：2012-07-28T00:00:07.543
> 
> 标签：linux, bash, interpreter

我有一个脚本；它需要使用 bash 的关联数组（相信我）。

它需要在普通机器上运行，也需要在具有 /bin/bash 3.2 的某些附加机器上运行。

如果我将解释器声明`/opt/userwriteablefolder/bin/bash4`为 bash 4.2 的位置，则它工作正常。但它只能在该机器上工作。

我想在脚本的开头进行测试，检查解释 shell 是什么，如果是 bash3.2，则调用`bash4 $0 $@`. 问题是我想不出任何方法来确定解释 shell 是什么。我真的宁愿不做一个基于 $HOSTNAME 的决定，但如果有必要，它会起作用（这也很尴尬，因为它需要传递一个“我们已经完成这个”标志）。

出于几个原因，“只有两个脚本”不是一个好的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T00:03:44.150

您可以通过查看来检查使用了哪个解释器`$SHELL`，其中包含 shell 可执行文件的完整路径（例如`/bin/bash`）

然后，如果是 Bash，可以通过各种方式查看 Bash 版本：

*   `${BASH_VERSINFO[*]}`-- 一个版本组件数组，例如`(4 1 5 1 release x86_64-pc-linux-gnu)`
*   `${BASH_VERSION}`-- 一个字符串版本，例如`4.1.5(1)-release`
*   而且当然，`"$0" --version`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-28T00:21:39.677

这可能是一个选项，具体取决于您启动脚本的方式：

1.  将 bash 4.2 安装为`/opt/userwriteablefolder/bin/bash`.
2.  使用 '#!/usr/bin/env bash' 作为脚本中的 shebang。
3.  `PATH`在调用脚本的环境中将“/opt/userwriteablefolder/bin”添加到前面，这样`bash`如果存在就会使用，否则`bash`将使用常规。

这样做的好处是避免在运行时检测 bash 的版本，但我意识到您的设置可能不会使第 3 步变得可取。

# android - 如何在其中注册一个 DragEvent 并让它在当前的 DragEvent 中侦听？

> ID：11697079
> 
> 赞同：0
> 
> 时间：2012-07-28T00:00:35.187
> 
> 标签：android, drag-and-drop

我的问题与 Android 中的拖放 API 有关。如果我的问题令人困惑，我深表歉意。但本质上，当您想要启动拖放操作时，您必须调用`startDrag()`. `View`你把它传递给一些信息，然后你给它一个`OnDragListener`监听`View`被拖拽的对象。当开始拖动时，在我的示例中长按，所有可以接受任何信息的视图都向系统注册以接受此信息。[如果您快速阅读有关Drag and Drop](http://developer.android.com/guide/topics/ui/drag-drop.html)的 android 文档中的一些内容，这将更有意义。但是，假设您以前没有使用过它并且想要使用它，那么这就是它如何工作的快速概述。

现在我的问题本质上是我遇到的一个问题。我想创建一个`View`正在`onDragListener`运行的时间，它还接受当前正在拖动的系统信息`View`。问题是它不工作。我并不感到惊讶，因为当拖动操作第一次开始时视图没有注册。问题是我如何即时注册它。android 文档向您展示了如何在开始时注册它，而不是在它已经在一个时注册。

**MyDragListener**（我的 onDragListener 的代码。现在只玩它。）

* * *

```
protected class MyDragListener implements View.OnDragListener {

    @Override
    public boolean onDrag(View v, DragEvent event) {

        // Defines a variable to store the action type for the incoming event
        final int action = event.getAction();

        // Handles each of the expected events
            switch(action) {

                case DragEvent.ACTION_DRAG_STARTED:
                    // Determines if this View can accept the dragged data
                    /*The way it works is it essentially turns anything that can accept stuff to Blue 
                     * or whatever color. It also does not need to do anything in terms of showing it can accept anything.*/
                    if(event.getClipDescription().hasMimeType(ClipDescription.MIMETYPE_TEXT_PLAIN)) {
                        v.setBackgroundColor(Color.BLUE);

                        return (true);

                    } else {
                        return (false);
                    }
                //break;

                case DragEvent.ACTION_DRAG_ENTERED:
                    v.setBackgroundColor(Color.YELLOW);
                    Toast.makeText(v.getContext(), "Height is: "+v.getHeight(), Toast.LENGTH_SHORT).show();
                    return true;
                //break;

                case DragEvent.ACTION_DRAG_LOCATION:
                    //this is triggered right after ACTIN_DRAG_ENTERED
                    Log.d("TestActivity", "Location of the View you are dragging is x: "+event.getX()+" y: "+event.getY());
                    if(v.getHeight()-10 < event.getY() && v.getHeight() > event.getY()&& showingView == false ) {

                            //here you are checking if its in the lower bound of the view
                            LayoutInflater inflater = LayoutInflater.from(v.getContext());
                            LinearLayout layout = (LinearLayout)inflater.inflate(R.layout.some_text, table, false);
                            ((TextView)layout.findViewById(R.id.da_text)).setText("Some text");
                            layout.setTag("Empty");
                            layout.startDrag(ClipData.newPlainText("Empty", "Empty"), new View.DragShadowBuilder(), null, 0);
                            table.addView(layout, Integer.parseInt(v.getTag().toString())+1);
                        showingView = true;
                    }
                    return true;

                case DragEvent.ACTION_DRAG_EXITED:
                    v.setBackgroundColor(Color.BLUE);
                    return true;
                //break;

                case DragEvent.ACTION_DROP:
                    //this is obvious, gets the data in the view that was dropped
                    return true;

                case DragEvent.ACTION_DRAG_ENDED:
                    v.setBackgroundColor(Color.WHITE);
                    return true;

            }//end of switch

        return false;
    }

}//end of MyDragListener 
```

**编辑 1**

所以我尝试了不同的方法。我决定为我准备一个支架，`LinearLayout`这将是`TableLayout`. 这样我就可以注册`OnDragListener`然后我可以拿着它直到我需要它。那失败了。我第一次使用它，即使我将它添加到 TableLayout 中，它也不会监听任何拖动，但是当我放下拖动然后长按它时，它起作用了。所以它与它不可见的事实有关，然后它不是。因此，默认情况下，当它不可见时它不会做任何事情，我不知道如何让它不会发生，并允许我让它即使在它不可见时也能做一些事情。有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T19:25:48.623

我知道这是一篇旧帖子，但如果有人需要解决方案/破解......我已经为此苦苦挣扎了几个小时，并认为它可能对某人有用。

**我的问题**

当我试图让我的 ListView 在拖动项目时向上/向下滚动时遇到了这个问题。问题是滚动时，列表视图会将新的转换视图加载到组视图中，而在拖动开始时未激活的视图（它们在列表视图缓存中 - 并且未关联为视图组的子视图）没有响应到拖。

您对此有正确的想法，因为视图错过了最初的 DRAG_STARTED 事件，然后它没有收到任何其他事件。

我正在浏览 VIEW/VIEW GROUP 的源代码，有几种方法可以破解这个东西。最终我决定通过强制更改有问题的视图的可见性来解决它，这将启动一系列事件，最终将在未来的 DRAG EVENTS 调用中包含该视图

**解决方案：可见性更改黑客**

因此，在将新视图附加到父视图后，只需将可见性设置为 GONE 并返回 VISIBLE：

```
child.setVisibility(View.GONE);
child.setVisibility(View.VISIBLE); 
```

**注意：**在 a) 用户仍在拖动 b) 新视图已添加到父视图时执行此操作。

**注意：**对我来说，这足以解决问题。但是，在我的情况下，我在同一个容器中有其他视图已经接受了 DRAG 事件。如果这是该容器中的第一个孩子，它可能不起作用。您可以尝试对容器和容器的容器执行相同的技巧，依此类推，直到您到达具有接受 EVENTS 的子级的容器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-29T20:43:44.230

老问题，但我试图做一些非常相似的事情。一种对我有用的更清洁的方法是：

1.  将 DragListener 附加到 ExpandableListView 而不是其中的各个视图。

2.  然后根据 DragEvent.ACTION_DRAG_LOCATION 事件的 x,y 坐标，识别组或子视图并执行所需的操作。

这样，在拖动事件开始时，组/子视图不必可见。

# ruby-on-rails - 如何将 raw() 字符串添加到用户生成的字符串

> ID：11697083
> 
> 赞同：0
> 
> 时间：2012-07-28T00:01:55.543
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.1, ruby-on-rails-3.2

我正在尝试使用特殊字符输出我的标题，但它正在转换整个内容。

@title 包含用户生成的内容，所以我想确保它被转义。它似乎正在转换整个字符串并忽略原始字符串。我该怎么做才能让它仍然安全？

```
if @title.nil?
      "Web App"
    else
      "#{@title}" + raw(" &middot; Web App")
    end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T00:36:44.563

这在我看来有效：

```
if @title.nil?
  "Web App"
else
  h("#{@title}") + raw(" &middot; Web App")
end 
```

# jsf - java.lang.IllegalArgumentException：空源而不是 Mojarra 2.1.11 的 ViewExpiredException

> ID：11697090
> 
> 赞同：1
> 
> 时间：2012-07-28T00:03:17.090
> 
> 标签：jsf, jsf-2, jboss, mojarra

我正在使用 Mojarra 2.1.11 和 JBoss AS 6.1.0。[我遇到了与java.lang.IllegalArgumentException: null source](https://stackoverflow.com/questions/4792437/java-lang-illegalargumentexception-null-source)中提出的相同问题，但答案对我不起作用。

页面上的 xhtml 在语法上是正确的（我已经尝试过很多页面）所以我认为这不是问题。错误文字：

```
Servlet.service() for servlet Faces Servlet threw exception: java.lang.IllegalArgumentException: null source
at java.util.EventObject.<init>(Unknown Source) [:1.6.0_31]
at javax.faces.event.SystemEvent.<init>(SystemEvent.java:71) [:2.1.11]
at javax.faces.event.ComponentSystemEvent.<init>(ComponentSystemEvent.java:73) [:2.1.11]
at javax.faces.event.PostRestoreStateEvent.<init>(PostRestoreStateEvent.java:73) [:2.1.11]
at com.sun.faces.lifecycle.RestoreViewPhase.deliverPostRestoreStateEvent(RestoreViewPhase.java:271) [:2.1.11]
... 
```

在 web.xml 中，我将会话超时设置为 1 分钟，并且我测试的任何页面在一分钟后都会产生上述错误。如果我理解正确，这应该会产生 ViewExpiredException。如果有人对我可以尝试的其他东西有任何想法，我将不胜感激。

谢谢，克莱

:edit 7/28/2012 - 项目的堆栈跟踪：

```
16:55:01,663 INFO  [org.jboss.web.tomcat.service.deployers.TomcatDeployment] deploy, ctxPath=/TestProject
16:55:01,711 INFO  [org.apache.catalina.core.StandardContext] The listener "com.sun.faces.config.ConfigureListener" is already configured for this context. The duplicate definition has been ignored.
16:55:01,789 INFO  [javax.enterprise.resource.webcontainer.jsf.config] Initializing Mojarra 2.1.11 ( 20120711-1632) for context '/TestProject'
16:55:03,692 INFO  [org.apache.coyote.http11.Http11Protocol] Starting Coyote HTTP/1.1 on http-localhost%2F127.0.0.1-8080
16:55:03,692 INFO  [org.apache.coyote.ajp.AjpProtocol] Starting Coyote AJP/1.3 on ajp-localhost%2F127.0.0.1-8009
16:55:03,692 INFO  [org.apache.coyote.http11.Http11Protocol] Starting Coyote HTTP/1.1 on http-localhost%2F127.0.0.1-8443
16:55:03,692 INFO  [org.jboss.bootstrap.impl.base.server.AbstractServer] JBossAS [6.1.0.Final "Neo"] Started in 30s:523ms
16:56:59,846 WARN  [org.apache.tomcat.util.http.Parameters] Parameters: Invalid chunk ignored.
16:56:59,846 WARN  [org.apache.tomcat.util.http.Parameters] Parameters: Invalid chunk ignored.

16:57:01,642 WARN  [org.apache.tomcat.util.http.Parameters] Parameters: Invalid chunk ignored.
16:57:01,642 WARN  [org.apache.tomcat.util.http.Parameters] Parameters: Invalid chunk ignored.
16:57:01,642 INFO  [org.hibernate.validator.engine.resolver.DefaultTraversableResolver] Instantiated an instance of org.hibernate.validator.engine.resolver.JPATraversableResolver.
16:57:03,219 WARN  [org.apache.tomcat.util.http.Parameters] Parameters: Invalid chunk ignored.
16:57:03,219 WARN  [org.apache.tomcat.util.http.Parameters] Parameters: Invalid chunk ignored.
16:59:37,112 ERROR [org.apache.catalina.core.ContainerBase.[jboss.web].[localhost].[/TestProject].[Faces Servlet]] Servlet.service() for servlet Faces Servlet threw exception: java.lang.IllegalArgumentException: null source
at java.util.EventObject.<init>(Unknown Source) [:1.6.0_31]
at javax.faces.event.SystemEvent.<init>(SystemEvent.java:71) [:2.1.11]
at javax.faces.event.ComponentSystemEvent.<init>(ComponentSystemEvent.java:73) [:2.1.11]
at javax.faces.event.PostRestoreStateEvent.<init>(PostRestoreStateEvent.java:73) [:2.1.11]
at com.sun.faces.lifecycle.RestoreViewPhase.deliverPostRestoreStateEvent(RestoreViewPhase.java:271) [:2.1.11]
at com.sun.faces.lifecycle.RestoreViewPhase.execute(RestoreViewPhase.java:257) [:2.1.11]
at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101) [:2.1.11]
at com.sun.faces.lifecycle.RestoreViewPhase.doPhase(RestoreViewPhase.java:116) [:2.1.11]
at com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:118) [:2.1.11]
at javax.faces.webapp.FacesServlet.service(FacesServlet.java:593) [:2.1.11]
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:324) [:6.1.0.Final]
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:242) [:6.1.0.Final]
at org.jboss.weld.servlet.ConversationPropagationFilter.doFilter(ConversationPropagationFilter.java:67) [:6.1.0.Final]
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:274) [:6.1.0.Final]
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:242) [:6.1.0.Final]
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:275) [:6.1.0.Final]
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:161) [:6.1.0.Final]
at org.jboss.web.tomcat.security.SecurityAssociationValve.invoke(SecurityAssociationValve.java:181) [:6.1.0.Final]
at org.jboss.modcluster.catalina.CatalinaContext$RequestListenerValve.event(CatalinaContext.java:285) [:1.1.0.Final]
at org.jboss.modcluster.catalina.CatalinaContext$RequestListenerValve.invoke(CatalinaContext.java:261) [:1.1.0.Final]
at org.jboss.web.tomcat.security.JaccContextValve.invoke(JaccContextValve.java:88) [:6.1.0.Final]
at org.jboss.web.tomcat.security.SecurityContextEstablishmentValve.invoke(SecurityContextEstablishmentValve.java:100) [:6.1.0.Final]
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:159) [:6.1.0.Final]
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102) [:6.1.0.Final]
at org.jboss.web.tomcat.service.jca.CachedConnectionValve.invoke(CachedConnectionValve.java:158) [:6.1.0.Final]
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109) [:6.1.0.Final]
at org.jboss.web.tomcat.service.request.ActiveRequestResponseCacheValve.invoke(ActiveRequestResponseCacheValve.java:53) [:6.1.0.Final]
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:362) [:6.1.0.Final]
at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:877) [:6.1.0.Final]
at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:654) [:6.1.0.Final]
at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:951) [:6.1.0.Final]
at java.lang.Thread.run(Unknown Source) [:1.6.0_31] 
```

如果从服务器启动到错误发生的完整堆栈跟踪有用，请告诉我。

# linux - 如何制作带有并排选择的 linux 对话框实用程序菜单？

> ID：11697091
> 
> 赞同：0
> 
> 时间：2012-07-28T00:03:34.920
> 
> 标签：linux, shell, dialog

我使用哪些选项使对话框菜单显示在一列以上？

这个：

```
dialog --title "[ M A I N - M E N U ]" \
        --menu "Please choose an option:" 15 55 5 \
            1 "View the config file" \
            2 "Edit config file" \
            3 "Exit" 
```

在一列中显示所有内容

```
1 View the config file
2 Edit config file
3 Exit 
```

我如何让它显示为：

```
1 View the config file                  2 Edit config file
3 Exit 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T14:26:32.977

对话框菜单设计为垂直方式。菜单选择以 UP/DOWN 方式进行。一行中的两个选项是不可能的。

# jquery - 删除 tablesorterpager 然后再放回去

> ID：11697095
> 
> 赞同：0
> 
> 时间：2012-07-28T00:04:26.883
> 
> 标签：jquery, html, tablesorter, jquery-pagination

我有动态生成的表，有时它会有 100 行，有时它可能有 300 行。我希望将 tablesorterpager 放在我的表上。

当用户点击 find 重新填充表格时，我希望取消绑定或删除寻呼机操作，加载数据然后再次绑定插件。关于如何在 th tablesorterpager 操作上实现 bind -unbind 操作的任何想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T20:33:52.733

**在构造函数解决我的问题之前，我将它们放在寻呼机插件中**

```
 $(config.cssNext,pager).unbind('click');
                 $(config.cssPrev,pager).unbind('click');
                 $(config.cssFirst,pager).unbind('click');
                 $(config.cssLast,pager).unbind('click'); 
```

**“....pager.js”中的构造函数：**

```
 $(config.cssFirst,pager).click(function() {
                    moveToFirstPage(table);
                    return false;
                }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T13:42:45.940

I have a fork of [tablesorter](https://github.com/Mottie/tablesorter) on Github. And the pager plugin has a method to enable, disable or completely destroy the pager plugin. [Here is a demo](http://mottie.github.com/tablesorter/docs/example-pager.html).

Also, if it helps, there is another demo on how to use the pager plugin to use [ajax data](http://mottie.github.com/tablesorter/docs/example-pager-ajax.html).

# python - Google Cloud Messaging HTTP 错误 400：错误请求

> ID：11697096
> 
> 赞同：10
> 
> 时间：2012-07-28T00:04:28.037
> 
> 标签：python, google-cloud-messaging

我正在尝试通过 GCM（Google Cloud Messaging）发送消息。我已通过 Google API 注册，我可以从多个 Android 测试手机向我的网站（这是一个 Google App Engine 后端）发送一个 regID。但是，我无法从 Google App Engine 向 GCM 发送任何内容。这是我正在尝试使用的。

```
 regId = "APA91b..."

    json_data = {"collapse_key" : "Food-Promo", "data" : {
                    "Category" : "FOOD",
                    "Type": "VEG",
               }, "registration_ids": [regId],
    }

    url = 'https://android.googleapis.com/gcm/send'

    apiKey = "AI..."
    myKey = "key=" + apiKey

    headers = {'Content-Type': 'application/json', 'Authorization': myKey}
    data = urllib.urlencode(json_data)
    data2 = {"title": title}
    data3 = urllib.urlencode(data2)

    req = urllib2.Request(url, data, headers)

    f = urllib2.urlopen(req)
    response = f.read()
    f.close()

    logging.debug("***!!!!!!!WriteEntry TEST -----  Response: " + response) 
```

这是我收到的错误。

```
Traceback (most recent call last):
  File "/base/python_runtime/python_lib/versions/1/google/appengine/ext/webapp/_webapp25.py", line 703, in __call__
    handler.post(*groups)
  File "/base/data/home/apps/s~journaltestza/26.360625174851783344/main.py", line 213, in post
    f = urllib2.urlopen(req)
  File "/base/python_runtime/python_dist/lib/python2.5/urllib2.py", line 124, in urlopen
    return _opener.open(url, data)
  File "/base/python_runtime/python_dist/lib/python2.5/urllib2.py", line 387, in open
    response = meth(req, response)
  File "/base/python_runtime/python_dist/lib/python2.5/urllib2.py", line 498, in http_response
    'http', request, response, code, msg, hdrs)
  File "/base/python_runtime/python_dist/lib/python2.5/urllib2.py", line 425, in error
    return self._call_chain(*args)
  File "/base/python_runtime/python_dist/lib/python2.5/urllib2.py", line 360, in _call_chain
    result = func(*args)
  File "/base/python_runtime/python_dist/lib/python2.5/urllib2.py", line 506, in http_error_default
    raise HTTPError(req.get_full_url(), code, msg, hdrs, fp)
HTTPError: HTTP Error 400: Bad Request 
```

谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-20T11:36:16.597

What are data2 and data3 used for ? The data you are posting was not proper json so you need to use json.dumps(data).Code should be like this :

```
json_data = {"collapse_key" : "Food-Promo", "data" : {
                "Category" : "FOOD",
                "Type": "VEG",
           }, "registration_ids": [regId],
}

url = 'https://android.googleapis.com/gcm/send'
apiKey = "AI..."
myKey = "key=" + apiKey
data = json.dumps(json_data)
headers = {'Content-Type': 'application/json', 'Authorization': myKey}
req = urllib2.Request(url, data, headers)
f = urllib2.urlopen(req)
response = json.loads(f.read())
reply = {}
if response ['failure'] == 0:
    reply['error'] = '0'
else:
    response ['error'] = '1'
return HttpResponse(json.dumps(reply), mimetype="application/javascript") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T18:17:16.260

尝试使用[python-gcm](https://github.com/geeknam/python-gcm)。它也可以处理错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T22:48:50.747

这是我最终解决它的方法，但上述方法也适用。

```
def sendGCM(self, regid, email, entry_id, date_modified, kind):

    url = 'https://android.googleapis.com/gcm/send'
    apiKey = _MY_API_KEY
    myKey = "key=" + apiKey

    json_data = { "registration_id": regid, "data" : {
        "entry_id" : entry_id,
        "email": email,
        "date_modified": date_modified,
        "kind": kind,
        "reg_id": regid,
        },
    }

   ### Get regids
    registration_data = {
        "registration_ids": [regid],
    }

    headers = {'Content-Type': 'application/json', 'Authorization': myKey}
    data = urllib.urlencode(json_data)               
    req = urllib2.Request(url, data)
    req.add_header("Authorization", myKey)               

    f = urllib2.urlopen(req)
    response = f.read()
    f.close() 
```

# google-apps-script - 从应用程序脚本中的事件获取可变参数

> ID：11697100
> 
> 赞同：0
> 
> 时间：2012-07-28T00:05:25.043
> 
> 标签：google-apps-script, google-apps

我有一个垂直面板和一个要添加的按钮。该按钮允许我将文本框添加到垂直面板。文本框的**名称**和**ID**以数字为前缀（该数字在添加每个文本框之前递增，并以 0 初始化）。

还有一个按钮可以提交这些文本框。显然，我将垂直面板作为回调元素添加到处理程序中，以便检索这些添加的文本框。

所以我的事件参数（对于被点击的提交按钮）看起来像这样：（ `1tbx=value, 2tbx=value, 3tbx=value, ..., ntbx=value`其中 n 是一个数字）。

我想知道你们认为从事件参数中检索添加的文本框的值的计算复杂度最低的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T03:03:13.173

我想“计算复杂”并不是这里的重点，因为所有值都已经在本地可用，并且你这样做的任何方式都将具有相同的“复杂性”。

您可能更容易在 for 循环中检索这些值，可能是您为创建它们所做的，例如

```
function handler(e) {
  var n = 10; //the amount of text boxes you have
  var values = [];
  for( var i = 0; i < n; ++i )
    values[i] = e.parameter[(i+1)+'tbx'];
  //just an example
  SpreadsheetApp.openById('example-key').getSheetByName('Sheet1').appendRow(values);

  //if you're going to do something on your app (which you'll probably do)
  //then you need to return it, e.g. return app;
  //but since I'm not doing anything in this example, it's not required.
} 
```

# python - 如何从 try/except 混乱中干掉方向逻辑

> ID：11697101
> 
> 赞同：6
> 
> 时间：2012-07-28T00:05:27.470
> 
> 标签：python

我正在尝试简化我对[Project Euler 问题 11 的](http://projecteuler.net/problem=11)解决方案（在 20x20 网格中找到 4-in-a-row 数字的最大乘积）。

我对我的回答的主要抱怨是 sub_lists_at_xy 定义中的四个 try/except 子句。我在每个方向（东、南、东南和西南）都有一个 4 行列表，这些列表可能会超出董事会。你对简化或干燥这个实现有什么建议吗？

```
from operator import mul

with open("11.txt") as f:
    nums = [[int(num) for num in line.split(' ')] for line in f.read().split('\n')]

def prod(lst):
    return reduce(mul, lst, 1)

def sub_lists_at_xy(array, length, x, y):

    try:
        east=array[y][x:x+length]
    except IndexError:
        east=[0]*length

    try:
        south=[list[x] for list in array[y:y+length]] 
    except IndexError:
        south=[0]*length

    try:
        southeast=[array[y+i][x+i] for i in range(length)]
    except IndexError:
        southeast=[0]*length

    try:
        southwest=[array[y+i][x-i] for i in range(length)]
    except IndexError:
        southwest=[0]*length    

    return east, south, southeast, southwest

sub_lists=[]

for x in range(len(nums[0])):
    for y in range(len(nums)):
        sub_lists += sub_lists_at_xy(nums, 4, x, y)
best = max(prod(lst) for lst in sub_lists)
print(best) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T00:35:24.423

要遵循不要重复自己的规则，您可以拉出方向逻辑：

```
def sub_lists_at_xy(array, length, x, y):
    directions = [(1, 0), (0, 1), (1, 1), (-1, 1)]
    sublists = []
    for dx, dy in directions:
        try:
            seq = [array[y+dy*i][x+dx*i] for i in range(length)]
            sublists.append(seq)
        except IndexError:
            pass
    return sublists 
```

你可能想检查一下我没有弄错方向——我通常会到处犯错误——但你明白了。

[注意：这不是我自己会这样做的方式，而是我会简化您的代码的方式。]

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-28T00:15:10.953

你可以检查输入，但你也可以填充你的数组

```
with open("11.txt") as f:
    nums = [["X"] + [int(num) for num in line.split(' ')] + ["X"] for line in f.read().split('\n')]
    nums = ["X"]*(len(nums[0])+2) + nums + ["X"]*(len(nums[0])+2) 
```

然后您可以过滤您的数据

```
reduce(mul, [x for x in lst if x != "X"], 1) 
```

# window - 很棒：alt+tab 只是在两个应用程序之间切换

> ID：11697102
> 
> 赞同：17
> 
> 时间：2012-07-28T00:06:07.570
> 
> 标签：window, focus, awesome-wm

我刚刚安装了很棒的 wm。当我使用真棒做 alt+tab 时，它只是切换两个应用程序，不可能激活其他应用程序..任何想法？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-07-29T10:43:55.003

默认情况下，客户端将焦点设置为上一个具有焦点的窗口。当您 alt+tab 并更改窗口时，前一个窗口现在是原始窗口。因此，它在两个窗口之间循环。

要解决此问题，您需要更改以下内容：

在默认的 rc.lua 中，控制窗口循环的部分如下所示：

```
 awful.key({ modkey,           }, "Tab",
        function ()
            awful.client.focus.history.previous()
            if client.focus then
                client.focus:raise()
            end
        end), 
```

要循环浏览*所有*窗口，而不仅仅是前一个，请将上面的代码更改为以下内容：

```
awful.key({ modkey,           }, "Tab",
    function ()
        -- awful.client.focus.history.previous()
        awful.client.focus.byidx(-1)
        if client.focus then
            client.focus:raise()
        end
    end),

awful.key({ modkey, "Shift"   }, "Tab",
    function ()
        -- awful.client.focus.history.previous()
        awful.client.focus.byidx(1)
        if client.focus then
            client.focus:raise()
        end
    end), 
```

当您按下时，它将在窗口中循环，当您按下时，它会`Alt+Tab`以相反的顺序循环`Alt+Shift+Tab`。（开头的两行`--`是注释，所以不影响结果。）

要循环浏览标签上的*每个客户端，甚至是最小化的客户端，您可能会发现此功能很有帮助：*

```
awful.key({ modkey,           }, "Tab",
    function ()
        for c in awful.client.iterate(function (x) return true end) do
            client.focus = c
            client.focus:raise()
        end
    end), 
```

请注意，这些解决方案都不考虑历史，而是切换到最近最少获得焦点的窗口（即，不考虑窗口获得焦点的顺序）。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-03-02T05:41:47.047

I have created a module for this: [https://github.com/blueyed/awesome-cyclefocus](https://github.com/blueyed/awesome-cyclefocus)

It supports different methods of `Alt-Tab` (see the README) and can be easily configured to your liking via filters that get applied while cycling through the windows, e.g. to filter only windows with the same WM class, or on the same screen/tag.

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-02-27T06:21:53.140

我对 Chris 在他的解决方案中提供的设置做了类似的事情。然而，它并没有在所有窗口中转移焦点，而是在主从堆栈中循环它们。换句话说，它们都在屏幕上明显旋转：

```
awful.key({ modkey, "Shift"   }, "Tab",
    function ()
        awful.client.cycle(false)
        awful.client.focus.byidx(0,awful.client.getmaster()) -- Added 2013-03-01
    end),

awful.key({ modkey,           }, "Tab",
    function ()
        awful.client.cycle(true)
        awful.client.focus.byidx(0,awful.client.getmaster()) -- Added 2013-03-01
    end), 
```

我仍然需要稍微调整一下，因为我希望（至少看起来）在整个循环操作期间保持在主窗口上。当我发现 aweful.client.cycle 变得如此简单时，我仍在熟悉 Awesome Lua API。:)

我想我会加入我目前的解决方案，因为这是我调查的第一个解决我类似问题的资源之一。希望能帮助到你。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-07-28T10:06:09.393

在默认绑定中，Mod + Tab 在最后两个使用的应用程序之间循环。我在寻找 Mod + j 或 Mod + k （相反的顺序）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-12-09T16:38:25.730

有一个很棒的库，叫做 awesome-switcher-preview。这实现了类似于您在其他操作系统和窗口管理器上所期望的 alt-tab 行为。它按照最近关注的顺序在窗口中循环。它会循环浏览您为屏幕选择的标签集中的所有客户端。它包括最小化的客户端。它试图在做出选择之前不弄乱历史记录。它不会改变堆栈。按住 alt 可保持预览/alt-tab 切换器向上。

你可以在这里得到它： [https ://github.com/berlam/awesome-switcher-preview](https://github.com/berlam/awesome-switcher-preview)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-05-05T20:23:11.540

我必须说我花了一些时间来设置正确的配置以获得我正在寻找的行为：循环浏览所有窗口，包括（尤其是！）最小化的窗口，在所有标签上，没有提升或聚焦它们并带有预览或通知。

*   编辑很棒的配置（如上所示）：只会循环通过未最小化的窗口。
*   [awesome_alttab](https://github.com/jorenheit/awesome_alttab) *已弃用*
*   真棒**3.5的**[真棒切换器](https://github.com/berlam/awesome-switcher)
***   [循环焦点](https://github.com/blueyed/awesome-cyclefocus)：终于！我只是在*注释掉[第 102 行](https://github.com/blueyed/awesome-cyclefocus/blob/master/init.lua#L102)*之后才让它工作，而**不是**`cycle_filters`通过 在**rc.lua 中用**空覆盖**

 ****真棒-cyclefocus/init.lua：

```
cycle_filters = {
  --function(c, source_c) return not c.minimized end,  --luacheck: no unused args
}, 
```

rc.lua

```
 cyclefocus.key({ "Mod1", }, "Tab", {
          show_clients = false,
          focus_clients = false,
 }), 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-12-15T13:09:59.603

另一种选择是使用独立的第 3 方应用程序：[https ://github.com/sagb/alttab](https://github.com/sagb/alttab)****

# magento - Magento - Block provided by custom extension is not loaded

> ID：11697105
> 
> 赞同：0
> 
> 时间：2012-07-28T00:06:21.500
> 
> 标签：magento, layout, module, php

I've finally reached the "rendering" phase of my second Magento module, but I'm stuck again. The module is now almost complete, it has a Controller and two blocks, one of which is called by the first (one is a dashboard block, which uses the second one to populate sub-sections).

What I need to do now it add this new dashboard to Customer Account Dashboard. I was told to use layout files, and I've read about them on Magento Design Guide. I then created the layout file and added the declaration of my block in it. However, the dashboard is not modified and my data is not displayed. If I call the extension method manually (i.e. myserver/customerstats/index) I get back the snippet of HTML that I'd like to display on Customer Account page.

At first I thought that my layout file was not loaded, but I now have the proof that it's processed correctly (at least, part of it). Here's the layout file:

```
<layout version="0.1.0">
    <customer_account_index translate="label">
        <label>My Custom Dashboard</label>
        <reference name="customer_account_dashboard">
            <!-- The action is processed correctly, the template is overridden -->
            <action method="setTemplate"><template>customerstats/customer/account/dashboard.phtml</template></action>
            <block type="customerstats/index" name="customerstats_dashboard" as="customerstats.dashboard" template="customerstats/customerstatsdashboard.phtml" />
        </reference>
    </customer_account_index>
</layout> 
```

I added the setTemplate action to the layout file because one of the requirements is that the new dashboard is split in two parts vertically. This means I had to modify the original *customer/account/dashboard.phtml* and change the structure of the page, adding two sections that will be styled as required. I'm not sure this is the correct way of doing it, but I couldn't figure out how to add my additional in a specific part of the page, without touching the .phtml file.

I modified the new *dashboard.phtml*, to make sure it was loaded, and I can see the Customer Account page showing my changes when I enable the action. However, the block that should be rendered by my extension doesn't appear on the page and, based on my simple "trap" (a simple "die()", to prove the code is executed), the extension method doesn't even seem to be called.

Here's the Controller I'm trying to call from the block, with the irrelevant parts removed.

```
class MyCompany_CustomerStats_IndexController extends Mage_Core_Controller_Front_Action {
    // The loaded block is setting its own template in the _construct() phase
    $Block = &$this->getLayout()->createBlock('customerstats/customerstatsdashboard');

    // Some data is loaded elsewhere and passed to the Block

    $this->getResponse()->setBody(
        $Block->toHtml()
    );
} 
```

The Controller is fired properly if I call it manually (myserver /customerstats/index) and it returns fully rendered HTML, but, as mentioned in the beginning, it doesn't seem to run when the layout file comes into play.

To summarize, here are my questions:
- Am I on the right track regarding the override of Customer Account Dashboard?
- Do I have to specify a *template* attribute in the layout for the extension? All the blocks I implemented load their template via code (there's a logic for choosing which one to use), and I don't see the use in having the template indicated in the xml file as well.
- Once I add a block to the XML file, do I have to alter the dashboard.phtml file to render it somewhere? I'm asking because I saw the original dashboard template, and it contains various calls to `getChildHtml('alias name of a block')`. This leads me to think that blocks don't have to just be "exposed" in the layout file, but also manually called in the .phtml files. However, this is a speculation, since I don't have a clear understanding of the mechanism. **Note**: I also tried to call `getChildHtml('customerstats.dashboard)` inside my new dashboard.phtml, but nothing changed.

Thanks in advance for all the answers.

**Update 1 - 2012/07/28**
This is the code for the Block that is not rendered.

```
class MyCompany_CustomerStats_Block_UserStatsDashboard extends Mage_Core_Block_Template {
    const _TEMPLATE = 'customerStats/userstatsdashboard.phtml';

    public function _construct() {
        $this->setTemplate(self::_TEMPLATE);
    }
} 
```

Also, I made an experiment with the Controller itself. I changed it as follows:

```
class MyCompany_CustomerStats_IndexController extends Mage_Core_Controller_Front_Action {
    die('Controller called successfully.');
} 
```

Here are the results: - If I call "myserver/customerstats/index" from the browser, I get the message "Controller called successfully.". - If I load the dashboard page which I modified, I can see the new layout (which means that my dashboard is loaded), but not the message. To me, this means that the Controller didn't even get called.

Content of **Config.xml**

```
<?xml version="1.0"?>
<config>
    <modules>
        <MyCompany_CustomerStats>
            <version>0.1.0</version>
        </MyCompany_CustomerStats>
    </modules>
  <global>
    <helpers>
      <CustomerStats>
        <class>MyCompany_CustomerStats_Helper</class>
      </CustomerStats>
    </helpers>
    <models>
      <CustomerStats>
        <class>MyCompany_CustomerStats_Model</class>
      </CustomerStats>
    </models>
    <blocks>
      <CustomerStats>
        <class>MyCompany_CustomerStats_Block</class>
      </CustomerStats>
    </blocks>
  </global>

  <frontend>
    <routers>
      <CustomerStats>
        <use>standard</use>
        <args>
          <module>MyCompany_CustomerStats</module>
          <frontName>userstats</frontName>
        </args>
      </CustomerStats>
    </routers>
        <layout>
        <updates>
          <CustomerStats>
                  <file>customerstats.xml</file>
                </CustomerStats>
          </updates>
        </layout>
  </frontend>
</config> 
```

**Update 2 - 2012/07/28**
I made an experiment that, I admit, makes absolutely no sense to me from an MVC perspective. I changed the layout and specified block type as *customerstats/userstatsdashboard*. I then modified the Block class `MyCompany_CustomerStats_Block_UserStatsDashboard` as follows:

```
public function _construct() {
    echo "Block rendered.";
} 
```

Surprisingly, now something appears in the new layout, exactly where I would expect it! But this means that the Controller hasn't been called at all, which, in turn, means there's no data available for the blocks.
This really perplexes me, I've never seen an MVC model where Views manage themselves... What's the purpose of the extension's controller, then?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T16:04:46.447

Your block class group is `CustomerStats`, but you are not using this in your layout. Block class groups are simply unique text nodes under `global/blocks` and *in no way* need to "match" any folder structure (FYI). This string matters only in that it matches the first part (before the slash) of any call to `createBlock()`, meaning that your layout XML should specify e.g. `type="CustomerStats/whatever"`

In the above example the classname which would be generated would be `MyCompany_CustomerStats_Block_Whatever` based on your class prefix of `MyCompany_CustomerStats_Block`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T09:38:58.590

Without taking the exceptions into account, there are two types of blocks. A `core/text_list` and all other types. When referencing to a `core/text_list`, for example the `content` block all added blocks are automatically rendered.

When referencing to something different than `core/text_list`, in your case `customer/account_dashboard` you need to fetch the content yourself from within the template. This can be done, like you already suggested yourself, via a `getChildHtml()` call.

What might be wrong, though I can't verify this with the code you provided so far, is that your own `customerstats/index` block type can't be found in your module or it's not extending `Mage_Core_Block_Template`. Or you're passing a non-existing classgroup into the createBlock factory method.

So within your module there should be something like:

```
 <blocks>
        <customerstats>
            <class><your_namespace>_Customerstats_Block</class>
        </customerstats>
    </blocks> 
```

But I think you might have a handle there called `customerdata` instead of `customerstats`. Since the block you call from the controller is of type `customerdata/customerstatsdashboard` and that one works. Though the one in your XML which uses `customerstats`. If this is the case you might want to try and adjust your XML to:

```
<block type="customerdata/index" name="customerstats_dashboard" as="customerstats.dashboard" template="customerdata/customerstatsdashboard.phtml" /> 
```

Furthermore when working with templates your block should look like. Thus always extending the Mage_Core_Block_Template. Otherwise `getChildHtml` will not be available. `<your_namespace>_Customerstats_Block_Index extends Mage_Core_Block_Template`

Hopefully this helps you with your task, otherwise please provide feedback after you've tried this.

# wcf - .net 4.0 声明性工作流 wcf：客户端参考

> ID：11697108
> 
> 赞同：0
> 
> 时间：2012-07-28T00:06:45.833
> 
> 标签：wcf, wcf-data-services, wcf-binding, wcf-client

技术人员——我尝试只使用默认的 basicHttpBinding 并增加 maxReceivedMessageSize，但发现我需要增加 readQuotas——如果不命名绑定，我无法定义它。

```
 <bindings>
      <basicHttpBinding>
          <binding name="DefaultBasicHttpBinding"
             maxBufferPoolSize="2147483647"
             maxReceivedMessageSize="2147483647"
             maxBufferSize="2147483647">
              <readerQuotas
                  maxArrayLength="2147483647"
                  maxBytesPerRead="2147483647"
                  maxDepth="2147483647"
                  maxNameTableCharCount="2147483647"
                  maxStringContentLength="2147483647" />
          </binding>
      </basicHttpBinding>
  </bindings> 
```

我是否需要更改客户端 web.config 引用 basicHttp 的方式？这是我所拥有的：

```
 <bindings>
    <!-- Adding TelapointWorkFlowService Bindings -->
    <!-- NOTE: May need to be converted for AppDev standards, leave as is for now. -->
    <basicHttpBinding>
        <binding name="BasicHttpBinding_TelaPointSMService" closeTimeout="00:10:00"
             openTimeout="00:10:00" receiveTimeout="00:15:00" sendTimeout="00:10:00"
             allowCookies="false" bypassProxyOnLocal="false"  
             hostNameComparisonMode="StrongWildcard"
             maxBufferSize="2147483647" maxBufferPoolSize="2147483647" 
             maxReceivedMessageSize="2147483647"
             messageEncoding="Text" textEncoding="utf-8" transferMode="Buffered"
             useDefaultWebProxy="true">
            <readerQuotas maxDepth="2147483647" maxStringContentLength="2147483647" 
                maxArrayLength="2147483647"
                maxBytesPerRead="2147483647" maxNameTableCharCount="2147483647" />
            <security mode="None">
                <transport clientCredentialType="None" proxyCredentialType="None"
                    realm="" />
                <message clientCredentialType="UserName" algorithmSuite="Default" />
            </security>
        </binding>
    </basicHttpBinding> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T15:14:43.430

出于沮丧，我改变了线路

`<binding name="DefaultBasicHttpBinding"` 到 `<binding name=""`

瞧！我需要分配给此工作流的自定义配额/最大大小设置已正确关联。

# emacs - 如何在 emacs 中“链接”非组织模式缓冲区

> ID：11697111
> 
> 赞同：3
> 
> 时间：2012-07-28T00:07:10.977
> 
> 标签：emacs, org-mode

> **可能重复：**
> [如何使任何 emacs 缓冲区中的 org 语法链接看起来像 org 模式？](https://stackoverflow.com/questions/5166608/how-to-make-org-syntax-links-in-any-emacs-buffer-look-like-in-org-mode)

我不介意使用 org-mode，但使用非星号标题。我在[How can I use other heading styles like twiki ---+ or mediawiki == h2 == in org-mode?](https://stackoverflow.com/questions/11697056/how-can-i-use-other-heading-styles-like-twiki-or-mediawiki-h2-in-org)

但我想要的主要是“链接”一个缓冲区——一个可能是非组织模式的缓冲区。

例如，使 [[file:/some/long/path][display name]] 之类的链接显示为“显示名称”之类的内容，并且可以点击。或者只是 [[file:/some/path]]，或者 org-mode 支持的其他链接类型。

问：有没有办法在 org-mode 之外的 emacs 中获得这种链接功能？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-28T12:13:28.883

我认为文本属性是您正在寻找的。Elisp 信息文件甚至包括一个关于“可点击文本”的条目，文本 -> 文本属性 -> 可点击文本。该部分实际上包含一个非常详细的示例，说明如何实现您提到的那种事情。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-18T23:47:47.883

我刚刚创建了一个 emacs 次要模式，它可以在非 org 模式缓冲区中启用 org 样式链接。仍在进行中，但您可以在这里找到它：[https ://github.com/seanohalpin/org-link-minor-mode](https://github.com/seanohalpin/org-link-minor-mode)

顺便说一句，这个问题是[How to make org syntax links in any emacs buffer look like in org-mode？](https://stackoverflow.com/questions/5166608/how-to-make-org-syntax-links-in-any-emacs-buffer-look-like-in-org-mode)

# ruby-on-rails-3 - 样式占位符与 best_in_place 的值不同

> ID：11697119
> 
> 赞同：7
> 
> 时间：2012-07-28T00:08:19.797
> 
> 标签：ruby-on-rails-3, best-in-place

我想我遗漏了一些东西，因为似乎无法通过 CSS 区分 best_in_place 值和占位符（data-nil="enter your number"）。我只想将占位符的样式设置为与实际值不同的样式，这样它看起来就不会令人困惑。

我已经查看了这些事件，实际上可以为元素添加一个类，但是当它们第一次显示在页面上时，没有可用于添加该类的事件。在这一点上，我将遍历每个 $('best_in_place') 并将 nil 值与跨度中的 html 值进行比较，但是在我这样做之前，我只是想知道我是否错过了一些东西。

那么有没有办法区分一个值是用 best_in_place 设置的？

如果代码让您更好地理解：这可行，只需将类添加或删除到 best_in_place，但是它只会在用户编辑字段时设置，而不是在初始页面加载时设置。

```
$('.best_in_place').bind('best_in_place:update', function(evt){
    if($(this).data('nil') == $(this).html()){
      $(this).removeClass('has_value');
    }else{
      $(this).addClass('has_value');
    }
  }); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-09T19:39:33.687

Thanks for that code. I resolved this with

In my example.js.erb

```
$('.top-column .best_in_place').each(function() {
  var element = $(this);

  if(element.data('nil') != element.text()) {
    updateBestInPlace($(this));
  }
}); 
```

And in example.js

```
$(document).ready(function(){
  $('.top-column .best_in_place').live("ajax:success", function(){
  updateBestInPlace($(this));
  });
});

function updateBestInPlace(element){
  if(element.data('nil') == element.html() || element.html() == ""){
  element.removeClass('has_value');
  }else{
   element.addClass('has_value');
  }
 } 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-01-24T05:02:00.233

一个非常简单的解决方案是在您的`:nil`值中包含标记，如下所示：

```
= best_in_place @user, :email, nil: '<span class="none-yet">None yet!</span>' 
```

然后你可以有一个这样的 CSS 规则：

```
.none-yet {
  font-style: italic;
} 
```

这对我有用，来自 git://github.com/bernat/best_in_place.git 的修订版 df178520bf9ba405baee9528d5dbb630d6ff760c

# continuous-integration - Jenkins - 进程存在，但我看不到 UI

> ID：11697124
> 
> 赞同：0
> 
> 时间：2012-07-28T00:09:48.440
> 
> 标签：continuous-integration, hudson, jenkins, testcomplete

我正在尝试强制自定义工具通过 Jenkins 运行以进行测试。我创建了一个示例程序 Calculator，需要通过 TestComplete 运行它。我作为一个批次的电话是：

```
START "" "C:\Program Files (x86)\Jenkins\jobs\Build\workspace\Calculator\bin\Release\Calculator.exe"

"c:\Program Files (x86)\Automated QA\TestComplete 8\Bin\TestComplete.exe" "c:\Users\AaronH\Documents\CI Implementation\DEV\Test Tool Engine\TestComplete\AutomationFramework.pjs" /r /e /ns /SilentMode "TestSet=1" 
```

我可以在流程树中看到 Calculator 和 TestComplete，但是没有显示 UI。它正在SYSTEM下运行。因为是这种情况，所以我不知道是否有任何事情在按应有的方式工作。有没有办法在我的用户下启动这些或验证它们是否实际工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T12:51:36.430

请参阅[https://wiki.jenkins-ci.org/display/JENKINS/My+software+builds+on+my+computer+but+not+on+Jenkins](https://wiki.jenkins-ci.org/display/JENKINS/My+software+builds+on+my+computer+but+not+on+Jenkins)，尤其是在“桌面访问”标题下

# c# - 需要将项目添加到工作线程的下拉列表中

> ID：11697127
> 
> 赞同：0
> 
> 时间：2012-07-28T00:10:34.243
> 
> 标签：c#

我正在使用以下代码从后台线程更改 ac# 标签。

但是，我需要将一个项目添加到下拉列表中。我将如何修改将项目添加到列表的方法？

```
 private void running(string s)
        {
            if (label44.InvokeRequired)
            {
                stringDelegate sd = new stringDelegate(running);
                this.Invoke(sd, new object[] { s });
            }
            else
            {
                label44.Text = "Running Lit Report";

            }
        } 
```

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T01:02:52.223

像下面这样的东西应该可以工作。

```
private void running(string s)
{
    var action = (ListBox lb, string s) => lb.Add(s);
    if (myListBox.InvokeRequired)
    {
        this.Invoke(action, new object[]{myListBox, s});
    }
    else
    {
        action(myListBox, s);
    }
} 
```

# android - 使用域更改 SSL 重新命名 Android 应用程序

> ID：11697129
> 
> 赞同：0
> 
> 时间：2012-07-28T00:10:48.210
> 
> 标签：android, ssl, https, dns

所以我有一个问题，我的经验告诉我我不能解决太多问题，但我还是想问问那里的其他人是否有想法。

我有一个 Android 应用程序，其中数千名用户被配置为通过 HTTPS (SSL) 连接到 DOMAIN1 上的 Web 服务。但是，我明天将把应用程序重新命名为一个新域（例如 DOMAIN2）。作为域更改的一部分，我计划将用户从域 1 转发到域 2。当我这样做时，Web 服务调用是否会与仍配置为域 1 的那些一起工作？我的猜测是*否定*的，因为新域的 SSL 证书不同。

我将更新网站，并尽可能让用户知道。然而，我想会有很多人因为这个功能（网络服务）不再起作用而感到不安。

除了告诉他们在沮丧后升级应用程序之外，还有更好的解决方案吗？我没有任何方法可以在应用程序本身中向用户发送消息。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T01:30:21.590

如果您可以控制旧域名，您也可以保持旧域名运行，并让新服务处理其请求。

如果您的服务器上可以有两个 IP 地址，请为每个地址指定一个主机名，并在每个 IP 地址上配置一个证书。

如果您只能使用一个 IP 地址，则可以使用两个主题备用名称 DNS 条目获得对两个主机名都有效的证书。（一些 CA 称它们为 UC 证书。）或者，如果您现有的客户端支持服务器名称指示，您可以在您的服务器上启用此功能并在单个 IP 地址上使用这两个证书。（检查现有客户端是否支持 SNI 的一种方法是使用 Wireshark 嗅探流量并在 TLS 客户端 Hello 消息中查找服务器名称扩展名。）

# sitecore - Sitecore 主页未显示....管理页面显示一半

> ID：11697131
> 
> 赞同：0
> 
> 时间：2012-07-28T00:11:17.453
> 
> 标签：sitecore, sitecore6

我在 Sitecore 中有一个站点。我已将此站点推送到具有新域名的新服务器。域名列在 .config 文件的站点/主机名节点中。但是，当我访问 URL 根目录（站点应该位于的位置 - 并且在所有其他环境中）时，我看到的是（看起来像）Sitecore 登录页面的最顶部横幅（如果我去了/sitecore/login），就是这样。没有可以登录的表格或类似的东西。我根本不应该看到这个页面，但我只看到它的一部分就更奇怪了。任何关于为什么会这样的想法将不胜感激。

谢谢，乔什

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T15:08:56.737

如果您看到的只是一个 Sitecore 徽标，听起来您需要进行发布才能将您的站点从 Master 数据库转移到 Web 数据库。

尝试完整的站点发布，看看是否有帮助。默认的空 Web 数据库通常显示类似于您所描述的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T22:37:41.673

事实证明，问题不在于 Sitecore，确切地说。在同一 Web 服务器上还有另一个 Sitecore 站点，该站点被配置为接受所有未分配的请求。我部署到的站点在 IIS 中配置错误，所以当我试图点击它时，我实际上是在点击另一个站点，我的域没有配置，导致 - 我认为 - Jay 的那种发布/配置问题建议。

# c# - 使用 Moq 模拟一个类而不是整个类的方法？

> ID：11697133
> 
> 赞同：9
> 
> 时间：2012-07-28T00:11:32.670
> 
> 标签：c#, .net, unit-testing, moq

我有一堂课

```
public interface IMyInterface 
{
    string MethodA();
    void MethodB();
}

public class MyClass : IMyInterface
{
    public string MethodA()
    {
        // Do something important
    }

    public void MethodB()
    {
        string value = MethodA();
        // Do something important
    }
} 
```

我想对 MethodB 进行单元测试，但在考虑如何`MethodA`在仍然调用`MethodB`Moq 的同时进行 Mock 时遇到了麻烦。Moq 模拟接口，而不是类，所以我不能只调用`mock.Object.MethodB()`，对吗？

这可能吗？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-28T00:45:51.637

我不认为这是可能的。即使有可能我宁愿不这样做。

您正在测试 的行为`MyClass`，它碰巧实现的事实`IMyInterface` 与 MethodA 和 MethodB 的测试行为有些无关。您可以进行单独的测试，以确保该类实现了您希望它在必要时实现的接口。MyClass.MethodB 的测试应该在 MyClass 的实例上完成，而不是在半模拟对象上。

如果您认为 MethodA 的行为是依赖关系，您可以尝试从类中显式地提取它。它将允许测试 MethodA（它将简单地委托给依赖项）和 MethodB（它将使用依赖项并执行更多操作）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T16:07:52.253

模拟你不能轻易（或全部）实例化的依赖项。
`MyClass`是正在测试的类，所以不应该被模拟（你不想测试模拟值）。
但是，如果您有一些`MyClass.Foo`属性是`Foo`实现`IFoo`接口并`MethodA`使用此`Foo`属性的类，那么您可以模拟它以打破依赖关系。

# php - 让 PHP 脚本回显到父页面

> ID：11697140
> 
> 赞同：2
> 
> 时间：2012-07-28T00:12:59.300
> 
> 标签：php, image, parent, echo

我对 PHP 还很陌生，似乎无法弄清楚这一点。

我通常能够通过谷歌和反复试验找到我需要的东西，然后弄清楚为什么它会这样做，但这个让我很难过。

目前我有我的 php 脚本在我的服务器上查询一个缩略图文件夹，这反过来会自动用缩略图填充页面。当您单击缩略图时，您将进入一个新的空白页面，图像位于左上角。

我的问题是，有没有办法在我的脚本中放置一个 target=_parent 动作，以便在同一页面或新的适合大小的窗口中打开更大的图像，使我的最终观众更容易浏览图像。

以下是我目前正在使用的脚本。

```
 <?php

                    $images = glob('*.{jpg,jpeg,png,gif}', GLOB_BRACE);

                    foreach ($images as $image) {
                        if (file_exists("./thumbs/{$image}")){
                            echo "<a href=\"{$image}\"><img src=\"thumbs/{$image}\" alt=\"{$image}\" /></a>";
                        }else{
                            echo "<a href=\"{$image}\"><img src=\"?img/{$image}\" alt=\"{$image}\" /></a>"; 
                        }
                    }

                    ?> 
```

任何帮助或见解将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T00:18:16.777

我不认为你需要一个 php 脚本来做到这一点。加载缩略图后，您可以使用 javascript 打开灯箱来查看图像。

[http://lokeshdhakar.com/projects/lightbox2/](http://lokeshdhakar.com/projects/lightbox2/)

检查这个，它是一个免费的灯箱插件。

# sql - sql - 对具有多个唯一 ID 的同一表中的列求和

> ID：11697143
> 
> 赞同：0
> 
> 时间：2012-07-28T00:13:59.360
> 
> 标签：sql, database, tsql, reporting-services

我想根据三个唯一 ID 对同一张表中的 3 列求和。

```
If id="1" sum(area1) 
If id="2" sum(area2)
if id="3" sum(area3) 
```

表数据：

```
id area1 area2 area3
1   10     2    10
1    1     10    10
2    1     10    10
3    1     10    10
3  10     2     10 
```

输出应该是：

id1 = 43 id2 = 21 id3 = 43

```
Select houseID, sum(area1), b.sum(area2), c.sum(area3) FROM table1, table1 b, table1 c
WHERE table1.id="1" or b.id = "2" or c.id="3" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T00:18:38.943

编辑：

考虑到您编辑了输出，您必须执行以下操作：

```
select Id, sum(area1 + area2 + area3) as 'Sum'
from yourTable
--where id in (1,2,3) if you have more id's and just want those
group by Id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T00:21:24.903

```
Select houseID, 
       sum(IF id = 1 THEN area1 ELSE 0 END) as [a],
       sum(IF id = 2 then area2 ELSE 0 END) as [b],
       sum(IF id = 3 then area3 ELSE 0 END) as [c]
FROM table1
WHERE id in (1,2,3) -- not needed might be faster 
```

# wordpress - WordPress添加空 HTML 注释后的标签

> ID：11697145
> 
> 赞同：2
> 
> 时间：2012-07-28T00:14:50.207
> 
> 标签：wordpress

我在 stackoverflow 上找到了多个关于如何解决此问题的帖子，但没有一个有效。我有 Karma 主题和 wp-ecommerce。所有这些都被WordPress 的标签`<!-- html comments !-->`包装。`<p>`

这些似乎在我的 functions.php 文件中不起作用。

```
remove_filter( 'the_content', 'wpautop' );
remove_filter('the_content', 'wptexturize'); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T00:44:58.813

根据[法典](http://codex.wordpress.org/Function_Reference/wpautop#Disabling_the_filter)，以下应该有效

```
remove_filter( 'the_content', 'wpautop' );
remove_filter( 'the_excerpt', 'wpautop' ); 
```

但是，正如您所说，它不起作用，因此您可以使用[**NoAutoP**](http://wordpress.org/extend/plugins/noautop/)或[**No WPautop**](http://wordpress.org/extend/plugins/no-wpautop/)插件来删除`p tags`. 希望这些对你有用。

您也可以阅读[**此答案**](https://wordpress.stackexchange.com/questions/6798/remove-filter-the-content-wpautop-is-not-working)，可能会对您有所帮助。

# microcontroller - MRF24WB0MA WiFi 带 32MX4 初学者教程

> ID：11697149
> 
> 赞同：3
> 
> 时间：2012-07-28T00:15:26.203
> 
> 标签：microcontroller, pic, microchip, mplab

我是 Microchip Programming 的初学者，我想设计一个可以连接到 WiFi 的机器人。我有 Cerebot 32MX4 微控制器 (PIC32MX460F512L) 和 PmodWiFi 卡 (MRF24WB0MA)。我完全不知道从哪里开始。我曾尝试从网上下载各种代码，包括 TCP/IP 堆栈和其他示例代码，但编译时出错或对机器人没有影响。我之所以选择这两种产品，是因为它们比较受欢迎，而且我希望这是一个相当简单的过程。您能否将分步教程的链接发送给我，该教程向我展示了如何设置它或 32MX4 的一些工作示例代码。目前我有一个通过 JB 接头连接到 WiFi 卡的功能性 32MX4 板。对不起，如果我听起来太愚蠢，

提前感谢您的帮助，古维

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-02T22:41:45.517

如果您发现了解更多有关 Microchip 解决方案提供的代码的信息非常有用，也许此链接会对您有所帮助。如果您有 Microchip 的开发板，它会更好地工作。我和你一样的过程！

[http://ww1.microchip.com/downloads/en/DeviceDoc/52108A.pdf](http://ww1.microchip.com/downloads/en/DeviceDoc/52108A.pdf)

# android - 为什么 Android 模拟器显示“不幸的是 my_app_name 已停止”？

> ID：11697152
> 
> 赞同：4
> 
> 时间：2012-07-28T00:16:49.333
> 
> 标签：android, android-emulator

我尝试使用 GPS 制作一个用于地理定位的 Android 应用程序，但是当我运行模拟器时，我收到此消息：`appname HAS unfortunately stopped.`为什么会收到此消息？我的代码没有错误。

我的.java：

```
package com.android.geolocalisation3;

import android.location.Location;
import android.location.LocationListener;
import android.location.LocationManager;
import android.location.LocationProvider;

import android.os.Bundle;

import android.view.KeyEvent;
import android.view.Menu;

import android.widget.Toast;

import com.google.android.maps.GeoPoint;
import com.google.android.maps.MapActivity;
import com.google.android.maps.MapController;
import com.google.android.maps.MapView;

public class Geo3MainActivity extends MapActivity implements LocationListener {

    private MapView mapView;
    private MapController mc;

    private LocationManager lm;

    private double latitude=122;
    private double longitude=37;
    private double altitude=0;
    private float accuracy=0;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_geo3_main);

        mapView = (MapView) this.findViewById(R.id.mapView);
        mapView.setBuiltInZoomControls(true);

        mc = mapView.getController();
        mc.setZoom(17);
    }

    @Override
    protected void onResume() {
        super.onResume();
        lm = (LocationManager) this.getSystemService(LOCATION_SERVICE);
        if (lm.isProviderEnabled(LocationManager.GPS_PROVIDER))
            lm.requestLocationUpdates(LocationManager.GPS_PROVIDER, 10000, 0,
                    this);
        lm.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, 10000, 0,
                this);
    }

    @Override
    protected void onPause() {
        super.onPause();
        lm.removeUpdates(this);
    }

    @Override
    protected boolean isRouteDisplayed() {
        return false;
    }

    @Override
    public boolean onKeyDown(int keyCode, KeyEvent event) {
        if (keyCode == KeyEvent.KEYCODE_VOLUME_UP) {
            mapView.setSatellite(true);
            return true;
        } else if (keyCode == KeyEvent.KEYCODE_VOLUME_DOWN) {
            mapView.setSatellite(false);
            return true;
        }
        return super.onKeyDown(keyCode, event);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_geo3_main, menu);
        return true;
    }

    @Override
    public void onLocationChanged(Location location) {

        //altitude = location.getAltitude();
        ///accuracy = location.getAccuracy();

        String msg = String.format(
                getResources().getString(R.string.new_location), latitude,
                longitude, altitude, accuracy);
        Toast.makeText(this, msg, Toast.LENGTH_LONG).show();

        GeoPoint p = new GeoPoint((int) (latitude * 1E6), (int) (longitude * 1E6));
        mc.animateTo(p);
        mc.setCenter(p);
    }

    @Override
    public void onProviderDisabled(String provider) {
        String msg = String.format(
                getResources().getString(R.string.provider_disabled), provider);
        Toast.makeText(this, msg, Toast.LENGTH_SHORT).show();
    }

    @Override
    public void onProviderEnabled(String provider) {
        String msg = String.format(
                getResources().getString(R.string.provider_enabled), provider);
        Toast.makeText(this, msg, Toast.LENGTH_SHORT).show();
    }

    @Override
    public void onStatusChanged(String provider, int status, Bundle extras) {
        String newStatus = "";
        switch (status) {
        case LocationProvider.OUT_OF_SERVICE:
            newStatus = "OUT_OF_SERVICE";
            break;
        case LocationProvider.TEMPORARILY_UNAVAILABLE:
            newStatus = "TEMPORARILY_UNAVAILABLE";
            break;
        case LocationProvider.AVAILABLE:
            newStatus = "AVAILABLE";
            break;
        }
        String msg = String.format(
                getResources().getString(R.string.provider_disabled), provider,
                newStatus);
        Toast.makeText(this, msg, Toast.LENGTH_SHORT).show();
    }
} 
```

我的日志错误：

```
07-28 00:00:01.054: E/StrictMode(621): A resource was acquired at attached stack trace but never released. See java.io.Closeable for information on avoiding resource leaks.
07-28 00:00:01.054: E/StrictMode(621): java.lang.Throwable: Explicit termination method 'close' not called
07-28 00:00:01.054: E/StrictMode(621):  at dalvik.system.CloseGuard.open(CloseGuard.java:184)
07-28 00:00:01.054: E/StrictMode(621):  at android.database.CursorWindow.<init>(CursorWindow.java:137)
07-28 00:00:01.054: E/StrictMode(621):  at android.database.CursorWindow.<init>(CursorWindow.java:41)
07-28 00:00:01.054: E/StrictMode(621):  at android.database.CursorWindow$1.createFromParcel(CursorWindow.java:681)
07-28 00:00:01.054: E/StrictMode(621):  at android.database.CursorWindow$1.createFromParcel(CursorWindow.java:679)
07-28 00:00:01.054: E/StrictMode(621):  at android.database.BulkCursorDescriptor.readFromParcel(BulkCursorDescriptor.java:75)
07-28 00:00:01.054: E/StrictMode(621):  at android.database.BulkCursorDescriptor$1.createFromParcel(BulkCursorDescriptor.java:34)
07-28 00:00:01.054: E/StrictMode(621):  at android.database.BulkCursorDescriptor$1.createFromParcel(BulkCursorDescriptor.java:30)
07-28 00:00:01.054: E/StrictMode(621):  at android.content.ContentProviderProxy.query(ContentProviderNative.java:369)
07-28 00:00:01.054: E/StrictMode(621):  at android.content.ContentResolver.query(ContentResolver.java:370)
07-28 00:00:01.054: E/StrictMode(621):  at android.content.CursorLoader.loadInBackground(CursorLoader.java:65
07-28 00:00:01.054: E/StrictMode(621):  at android.content.CursorLoader.loadInBackground(CursorLoader.java:43)
07-28 00:00:01.054: E/StrictMode(621):  at android.content.AsyncTaskLoader.onLoadInBackground(AsyncTaskLoader.java:301)
07-28 00:00:01.054: E/StrictMode(621):  at android.content.AsyncTaskLoader$LoadTask.doInBackground(AsyncTaskLoader.java:68)
07-28 00:00:01.054: E/StrictMode(621):  at android.content.AsyncTaskLoader$LoadTask.doInBackground(AsyncTaskLoader.java:56)
07-28 00:00:01.054: E/StrictMode(621):  at android.os.AsyncTask$2.call(AsyncTask.java:287)
07-28 00:00:01.054: E/StrictMode(621):  at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
07-28 00:00:01.054: E/StrictMode(621):  at java.util.concurrent.FutureTask.run(FutureTask.java:137)
07-28 00:00:01.054: E/StrictMode(621):  at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
07-28 00:00:01.054: E/StrictMode(621):  at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
07-28 00:00:01.054: E/StrictMode(621):  at java.lang.Thread.run(Thread.java:856)
07-28 00:00:01.144: E/StrictMode(621): A resource was acquired at attached stack trace but never released. See java.io.Closeable for information on avoiding resource leaks.
07-28 00:00:01.144: E/StrictMode(621): java.lang.Throwable: Explicit termination method 'close' not called
07-28 00:00:01.144: E/StrictMode(621):  at dalvik.system.CloseGuard.open(CloseGuard.java:184)
07-28 00:00:01.144: E/StrictMode(621):  at android.content.ContentResolver$CursorWrapperInner.<init>(ContentResolver.java:1835)
07-28 00:00:01.144: E/StrictMode(621):  at android.content.ContentResolver.query(ContentResolver.java:392)
07-28 00:00:01.144: E/StrictMode(621):  at android.content.CursorLoader.loadInBackground(CursorLoader.java:65)
07-28 00:00:01.144: E/StrictMode(621):  at android.content.CursorLoader.loadInBackground(CursorLoader.java:43)
07-28 00:00:01.144: E/StrictMode(621):  at android.content.AsyncTaskLoader.onLoadInBackground(AsyncTaskLoader.java:301)
07-28 00:00:01.144: E/StrictMode(621):  at android.content.AsyncTaskLoader$LoadTask.doInBackground(AsyncTaskLoader.java:68)
07-28 00:00:01.144: E/StrictMode(621):  at android.content.AsyncTaskLoader$LoadTask.doInBackground(AsyncTaskLoader.java:56)
07-28 00:00:01.144: E/StrictMode(621):  at android.os.AsyncTask$2.call(AsyncTask.java:287)
07-28 00:00:01.144: E/StrictMode(621):  at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
07-28 00:00:01.144: E/StrictMode(621):  at java.util.concurrent.FutureTask.run(FutureTask.java:137)
07-28 00:00:01.144: E/StrictMode(621):  at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
07-28 00:00:01.144: E/StrictMode(621):  at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
07-28 00:00:01.144: E/StrictMode(621):  at java.lang.Thread.run(Thread.java:856)
07-28 00:00:45.364: E/PowerManagerService(157): Excessive delay setting brightness: 144ms, mask=2
07-28 00:00:45.544: E/PowerManagerService(157): Excessive delay setting brightness: 139ms, mask=2
07-28 00:00:45.764: E/PowerManagerService(157): Excessive delay setting brightness: 211ms, mask=2
07-28 00:00:45.994: E/PowerManagerService(157): Excessive delay setting brightness: 224ms, mask=2
07-28 00:05:21.293: E/ThrottleService(157): problem during onPollAlarm: java.lang.IllegalStateException: problem parsing stats: java.io.FileNotFoundException: /proc/net/xt_qtaguid/iface_stat_all: open failed: ENOENT (No such file or directory) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T01:44:11.627

Somehow the formatting of your log messages was lost, making them very hard to read.

The first lines of the log messages give the clue:

```
07-28 00:00:01.054: E/StrictMode(621): A resource was acquired at attached stack trace but never released. See java.io.Closeable for information on avoiding resource leaks.
07-28 00:00:01.054: E/StrictMode(621): java.lang.Throwable: Explicit termination method 'close' not called 
```

Certain objects such as files or cursors need to be explicitly closed. Simply dropping the reference to them isn't good enough. Failing to close the object causes a resource leak, which the system detects and reacts to by killing your app.

Unfortunately, the stack trace only shows you where the leak was detected, not what originally caused it.

Are there parts of your code you're not showing us that relate to databases? The log messages indicate a problem with a Cursor object.

Assuming you are using databases, look into your database access code and make SURE you close every cursor and database you open. Make sure all 'return' statements in your database-handling functions close the relevant objects before returning. Make sure you catch all possible exceptions and close your cursor objects before letting the exception go up the stack. I make liberal use of finally{} blocks for this.

My database code typically looks like this:

```
protected DbRec findById(String ident) {
    DbRec rval;
    Cursor cursor = null;
    try {
        if( (cursor = findCursorById(ident)) == null )
            return null;
        rval = newRecord();
        rval.fillFromCursor(cursor);
    } catch (Exception e) {
        Log.w(TAG, "Failed to read database record: " + e);
        rval = null;
    } finally {
        if( cursor != null ) cursor.close();
    }
    return rval;
} 
```

* * *

ETA: I've taken the liberty of pasting the log messages from your comments:

```
E/AndroidRuntime(808): java.lang.RuntimeException: Unable to resume activity {com.android.geolocalisation3/com.android.geolocalisation3.Geo3MainActivity}: java.lang.IllegalArgumentException: requested provider network doesn't exisit
E/AndroidRuntime(808): at android.app.ActivityThread.performResumeActivity(ActivityThread.java:2575)
E/AndroidRuntime(808): at android.app.ActivityThread.handleResumeActivity(ActivityThread.java:2603)
E/AndroidRuntime(808): at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2089)
E/AndroidRuntime(808): at android.app.ActivityThread.access$600(ActivityThread.java:130)
E/AndroidRuntime(808): at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
E/AndroidRuntime(808): at android.os.Handler.dispatchMessage(Handler.java:99)
E/AndroidRuntime(808): at android.os.Looper.loop(Looper.java:137)
E/AndroidRuntime(808): at android.app.ActivityThread.main(ActivityThread.java:4745)
E/AndroidRuntime(808): at java.lang.reflect.Method.invokeNative(Native Method)
E/AndroidRuntime(808): at java.lang.reflect.Method.invoke(Method.java:511)
E/AndroidRuntime(808): at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
E/AndroidRuntime(808): at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
E/AndroidRuntime(808): at dalvik.system.NativeStart.main(Native Method)

E/AndroidRuntime(808): Caused by: java.lang.IllegalArgumentException: requested provider network doesn't exisit
E/AndroidRuntime(808): at android.os.Parcel.readException(Parcel.java:1429)
E/AndroidRuntime(808): at android.os.Parcel.readException(Parcel.java:1379)
E/AndroidRuntime(808): at android.location.ILocationManager$Stub$Proxy.requestLocationUpdates(ILocationManager.java:646)
E/AndroidRuntime(808): at android.location.LocationManager._requestLocationUpdates(LocationManager.java:660)
E/AndroidRuntime(808): at android.location.LocationManager.requestLocationUpdates(LocationManager.java:482)
E/AndroidRuntime(808): at com.android.geolocalisation3.Geo3MainActivity.onResume(Geo3MainActivity.java:49)
E/AndroidRuntime(808): at android.app.Instrumentation.callActivityOnResume(Instrumentation.java:1184)
E/AndroidRuntime(808): at android.app.Activity.performResume(Activity.java:5082)
E/AndroidRuntime(808): at android.app.ActivityThread.performResumeActivity(ActivityThread.java:2565)
E/AndroidRuntime(808): ... 12 more 
```

This is a different error than before. It looks like the name of the location provider (e.g. "gps" was saved wrong in `onSaveInstanceState()` which caused a crash when the application restarted.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T13:02:59.297

由于某种原因，API 级别 16 的模拟器无法注册 NETWORK_PROVIDER 侦听器。它在 10 级模拟器中运行良好。我没有测试任何其他 SDK 版本。

我刚刚添加了对网络提供商可用性的检查以避免此问题。您已经为 GPS 提供商做到了。

```
if (lm.isProviderEnabled(LocationManager.NETWORK_PROVIDER)) 
```

我希望这有帮助。

Ĵ

# java - 将 jlist 中的选定项目保存到字符串变量

> ID：11697155
> 
> 赞同：4
> 
> 时间：2012-07-28T00:17:40.253
> 
> 标签：java, jlist

我有一个包含 10 个项目（书名）的 Jlist。用户将被允许从 10 个项目中选择 3 个项目。我想将所选项目保存到 3 个不同的字符串变量（例如 book0、book1、book2 等）。

我不知道该怎么做。

我创建了显示 10 个标题的 Jlist，我尝试了很多东西，但没有运气。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-28T04:18:19.617

比如说你已经定义了一个 JList 对象`list`。

这应该为你做

```
Object[] selected = list.getSelectedValues();

String[] selectedItems = new String[selected.length];

for(int i=0; i<selected.length;i++){

selectedItems[i] = selected[i].toString();

} 
```

String 的数组`selectedItem`就是你所需要的，你也可以在这里使用 arrayList。

# grails - 如果在视图上提供了值，则更新字段，否则保留以前的值

> ID：11697156
> 
> 赞同：2
> 
> 时间：2012-07-28T00:18:03.257
> 
> 标签：grails, grails-2.0

我是一个 grails 和 groovy 新手。我正在尝试更新我的域类中的字段，前提是该字段的值由用户在“编辑”视图中提供。

我的域类看起来像：class CertificateInfo {

```
static auditable = [ignore:['dateCreated','lastUpdated','account']]

String entityId
String certificate

String status
Timestamp dateCreated
Timestamp lastUpdated

Account account

CertificateInfo(){
    status = "ACTIVE"
}

static belongsTo = [account: Account]
//Db mappings not included
static constraints = {
    entityId size: 1..300, blank: false, unique: true
    certificate size: 1..4000, blank:false
    status in:['ACTIVE','INACTIVE'], blank: false
}
} 
```

在我的编辑表单中，相关字段是：

```
<td>
<input type="file" name="certificate" value="${CertificateInfo ?.certificate}"/>
</td> 
```

我想在这里做的是：a）如果提供了新文件，则单击按钮，该文件应被接受为证书。这部分有效，新文件用于更新证书 b) 如果未提供新文件，则它应该只保留旧值。这部分不起作用，因为我不知道如何处理它。

我很高兴有任何建议。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T00:39:55.727

这在用户指南中进行了概述 - [http://grails.org/doc/latest/guide/theWebLayer.html#uploadingFiles](http://grails.org/doc/latest/guide/theWebLayer.html#uploadingFiles)

使用第一个示例，您将执行类似的操作

```
 def f = request.getFile('certificate')
    if (f.empty) {
        // do nothing
    } else {
        f.transferTo(new File('/some/local/dir/myfile.txt'))
        // modify your object here and save.
        mycertificate.certificate = 'myfile.txt'  
    } 
```

# java - HTML转义方法不检测空格？

> ID：11697157
> 
> 赞同：0
> 
> 时间：2012-07-28T00:18:07.223
> 
> 标签：java, escaping

我有这个 HTML 转义方法：

```
public static String stringToHTMLString(String string) {
    StringBuffer sb = new StringBuffer(string.length());
    // true if last char was blank
    boolean lastWasBlankChar = false;
    int len = string.length();
    char c;

    for (int i = 0; i < len; i++)
        {
        c = string.charAt(i);
        if (c == ' ') {
            // blank gets extra work,
            // this solves the problem you get if you replace all
            // blanks with &nbsp;, if you do that you loss 
            // word breaking
            if (lastWasBlankChar) { // NOT going into this loop
                lastWasBlankChar = false;
                sb.append("&nbsp;");
                }
            else {
                lastWasBlankChar = true;
                sb.append(' ');
                }
            }
        else {
            lastWasBlankChar = false;
            //
            // HTML Special Chars
            if (c == '"')
                sb.append("&quot;");
            else if (c == '&')
                sb.append("&amp;");
            else if (c == '<')
                sb.append("&lt;");
            else if (c == '>')
                sb.append("&gt;");
            else if (c == '\n')
                // Handle Newline
                sb.append("&lt;br/&gt;");
            else {
                int ci = 0xffff & c;
                if (ci < 160 )
                    // nothing special only 7 Bit
                    sb.append(c);
                else {
                    // Not 7 Bit use the unicode system
                    sb.append("&#");
                    sb.append(new Integer(ci).toString());
                    sb.append(';');
                    }
                }
            }
        }
    return sb.toString();
} 
```

当我用字符串“boy y”传递它时，它返回“boy y”。当我将输入字符串更改为“bo>y”时，它正确地转义了字符串。知道为什么空间逃逸不起作用吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T00:43:55.437

当我运行它时工作正常，我得到：

```
stringToHTMLString("This is  a   multi-space      test")
This is &nbsp;a &nbsp; multi-space &nbsp; &nbsp; &nbsp;test 
```

嗯，现在我想起来了，您是否期望第一个空间被逃脱？按照逻辑，它首先以空格开头，然后交替使用不间断空格，因为它最初是错误的。

这并不能回答您的实际问题，但是做您想做的事情的更好方法是`white-space: pre-wrap;`在元素上使用 CSS……如果您可以摆脱支持 IE8+ 的话。否则，对于较旧的 IE，您必须使用

```
white-space: normal !important;
white-space: pre-wrap;
word-wrap: break-word; 
```

您对 7 位安全字符的定义也很有趣。除非您必须支持 Windows 98，否则使用 UTF-8 可能会更好，而不是手动转义不寻常的字符，并且可能完全删除非格式化控制代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T01:57:19.990

从您的评论来看，我相信您想转义一个字符串以在音乐网站 API 的 URL 中使用。

我必须建议您利用 3rd 方库。

您可以使用：      *java.net.URLEncoder.encode(String s, String encoding)*

例如

```
URLEncoder.encode(searchQuery, "UTF-8"); 
```

* * *

来源：[用 Java 编码 URL 查询参数](https://stackoverflow.com/questions/5330104/encoding-url-query-parameters-in-java)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-28T00:39:46.517

看起来堆栈溢出可能已经逃脱了您的第二个字符串。
第二个*“男孩”*应该是**“bo y”。***?***

# c# - RewriteEngine on (in .htaccess) + POST Request with C#

> ID：11697163
> 
> 赞同：0
> 
> 时间：2012-07-28T00:18:48.987
> 
> 标签：c#, .htaccess

我有一个 C# 程序向我的网站发送常规 POST 请求（上传值）。它工作完美。但我只是在我的 .htaccess 文件中写了以下几行，我的程序开始给出 Web 请求错误：

```
RewriteEngine on
RewriteCond %{HTTP_HOST} !^www.mydomain.com$
RewriteRule ^(.*)$ http://www.mydomain.com/$1 [R=301] 
```

我需要这些行，这样人们就不能像这样访问该网站：http: [//mydomain.com](http://mydomain.com) （没有 www）

如何使我的 C# 程序使用新的 .htaccess 设置？

编辑：
C# 程序使用 www 地址。
在服务器错误日志中看不到任何内容。
C# 异常是：“在 WebClient 请求期间发生异常。”

我假设请求在到达其他任何地方之前先到达 .htaccess。是否有可能造成一些延迟（比如某种毫秒中断），这让我的程序认为它得到了不好的响应？

# javascript - 将提交按钮的 HTML 转换为链接 HTML？

> ID：11697165
> 
> 赞同：4
> 
> 时间：2012-07-28T00:19:53.133
> 
> 标签：javascript, html

我在 HTML 中有以下提交按钮：

```
<input name="submit" type="submit" value="Sign In" /> 
```

我想通过使用以下方法将其转换为 HTML 链接：

```
<a  href="#" onclick="document.getElementById('formname').submit()">Sign In</a> 
```

但表格不提交。

谢谢。

完整代码如下：

```
<form id="form_freeuser" action="login.php" method="post" name="form_freeuser">
            <div class="label"><label>Free User</label></div><input id="name" name="name" readonly="readonly" type="text" value="test" />
            <input id="user_email" name="email" readonly="readonly" type="password" value="test" />
            <input name="submit" type="submit" value="Sign In" />

        </form> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-28T00:23:45.230

确保该`id`属性设置为您发送到的任何内容`getElementById()`。

```
<form id="formname" action="/foo" method="get">
    <a  href="#" onclick="document.getElementById('formname').submit()">Sign In</a>
</form>​ 
```

这将修复您的代码，这是您要问的问题。不过，作为一个元点，我不建议使用链接来提交表单。用户期望一个按钮来提交一个表单，而不是一个链接。不要乱用这样的语义。你会迷惑和惹恼用户。

您还可以使用 CSS 将按钮设置为看起来像超链接。它具有完全相同的打破惯例的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T00:24:13.167

通过单击链接，您的浏览器将尝试将您从该页面带走，因此您会丢失所有数据。你可以：

```
<a  href="#" onclick="document.getElementById('formname').submit();return false">Sign In</a> 
```

“formname”也是表单的ID还是表单的名称？

要使该代码正常工作，您需要：

```
<form id="formname"> 
```

代替

```
<form name="formname"> 
```

否则你可以使用

```
document.formname 
```

同样

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-01T07:59:26.697

在这篇文章中：[如何使按钮看起来像一个链接？](https://stackoverflow.com/questions/1367409/how-to-make-button-look-like-a-link)
@odedbd 提供了一个很好的解决方案：http: [//jsfiddle.net/zYCN9/1/](http://jsfiddle.net/zYCN9/1/)

他的代码将一个按钮变成了一个看起来很正常的超链接。
JS 解决方案的好处是，您没有使用 JS。因此，禁用 JS 的用户仍然可以使用您的表单。这似乎是一种更优雅且符合 HTML 的方式来执行此操作。

我已经复制了下面的代码以防链接断开：

```
<button> your button that looks like a link</button>

button {
    background:none!important;
     border:none; 
     padding:0!important;

    /*optional*/
    font-family:arial,sans-serif; /*input has OS specific font-family*/
     color:#069;
     cursor:pointer;
}
button:hover{
         text-decoration:underline;
} 
```

此外，您不希望 -all-submit 按钮具有这种样式。所以我建议这样做：

```
<input type="submit" class="submit_hyperlink" value="submit this form"/>

input.submit_hyperlink {
    background:none!important;
     border:none; 
     padding:0!important;

    /*optional*/
    font-family:arial,sans-serif; /*input has OS specific font-family*/
     color:#069;
     cursor:pointer;
}

input.submit_hyperlink:hover{
         text-decoration:underline;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-28T00:23:30.150

使用`Jquery`你可以这样做

```
$(document).ready(function(){
    $('a').click(function(e){
        $('form').submit();
    });
}); 
```

# html - CSS清除导致div之间的空间

> ID：11697167
> 
> 赞同：0
> 
> 时间：2012-07-28T00:20:57.883
> 
> 标签：html, css

我正在创建一个将表格标签转换为 div 的 jsp 标签。这是我的标签生成的代码。在 ie9 中，蓝色 div 和黑色 div 之间有一个空格。我已经尝试了几乎所有方法来以正确的方式解决它。请帮助 :-(，我逐字包含它，因为我不确定 ie9 是否对空白做了一些奇怪的事情；

```
<!-- AUTO GENERATED TABLE ELEMENT -->
<div style=" ">

<!-- AUTO GENERATED TABLE:ROW ELEMENT -->
<div style="clear:left; margin: 0px; padding: 0px;">

<!-- AUTO GENERATED TABLE:CELL ELEMENT -->
<div style="float:left; background-color: blue; height: 50px; width: 300px; text-align: center; margin: 0px; padding: 0px;">
            <!--<p style="color: white;">You have reached this page in error</p>-->
        </div>
<!-- AUTO GENERATED TABLE:CELL ELEMENT -->

<!-- AUTO GENERATED TABLE:CELL ELEMENT -->
<div style="float:left; background-color: blue; height: 50px; width: 300px; text-align: center; margin: 0px; padding: 0px;">
            <!--<p style="font-weight: bold; color: red;">No matching path</p>-->
        </div>
<!-- AUTO GENERATED TABLE:CELL ELEMENT -->
    </div>
<!-- AUTO GENERATED TABLE:ROW ELEMENT -->

<!-- AUTO GENERATED TABLE:ROW ELEMENT -->
<div style="clear:left; margin: 0px; padding: 0px;">

<!-- AUTO GENERATED TABLE:CELL ELEMENT -->
<div style="float:left; background-color: black; color: white; height: 600px; width: 600px; text-align: center; margin: 0px; padding: 0px;">
            <font style="font-size: 50px">&iquest;</font>
        </div>
<!-- AUTO GENERATED TABLE:CELL ELEMENT -->
    </div>
<!-- AUTO GENERATED TABLE:ROW ELEMENT -->
</div>
<!-- AUTO GENERATED TABLE ELEMENT --> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T00:48:32.837

看起来就像您缺少一个文档类型，这将使​​ IE 自行排序。

# c# - 文件系统数据库模型和作为文件管理器的 Web 前端

> ID：11697172
> 
> 赞同：0
> 
> 时间：2012-07-28T00:21:31.253
> 
> 标签：c#, asp.net, database, filesystems

我正在寻找一种已经可以在数据库上构建某种文件系统和作为文件管理器的 Web 应用程序的解决方案。其实看起来并不难，写在纸上。我说的是一组用于存储典型文件系统结构（文件、文件夹、所有权等）的表以及用于用户交互的 Web 前端。我希望它最终能够登录，以处理资源特权和访问并发。

我的首选平台是 Asp.net 和 Sql Server。

有谁知道网上已经有的东西？像一个开源包？商业产品？甚至只是互联网上的现场工作场景？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T00:27:36.123

我必须承认我很好奇你为什么想要这个。如果需要文件系统，使用文件系统？如果您远程需要它，设置一个 FTP 站点？使用 FileZilla Server 等免费软件产品，它快速、简单且安全。

但对你的回答。我在这里看到的主要困难是分层数据。关系数据库的主要优点是良好的关系。你真的不需要这个。因此，我会为此考虑一个文档数据库。RavenDB 可能非常适合您，因为我相信它明确具有 blob 存储功能。它的优点是它支持开箱即用的分层数据。

由于它是基于 json 的，它也非常适合 web-api，并且不需要您将重量级 ORM 与实体模型等一起使用。

# asp.net-mvc - 与fluent api的一对一关系

> ID：11697176
> 
> 赞同：0
> 
> 时间：2012-07-28T00:22:40.660
> 
> 标签：asp.net-mvc, fluent-interface

**模型：**

```
public class User {
    public Guid UserId { get; set; }
    public string UserName { get; set; }
    public virtual Membership Membership { get; set; }
}

public class Membership {
    public Guid UserId { get; set; }
    public DateTime CreateDate { get; set; }
} 
```

**数据库上下文：**

```
public class UsersContext : DbContext {
    public UsersContext() : base("ApplicationServices") { }
    public DbSet<User> Users { get; set; }
    public DbSet<Membership> Memberships { get; set; }

    protected override void OnModelCreating(DbModelBuilder modelBuilder) {
        modelBuilder.Entity<User>().ToTable("aspnet_Users");
        modelBuilder.Entity<Membership>().ToTable("aspnet_Membership");

        //insert relation here to join the two tables
    }
} 
```

这是我第一天玩流利的 api，我只是想知道如何才能加入这两个表。我将如何定义这种关系？

另外，关于 fluent API 的任何教程对您有帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T12:33:00.047

您可以使用下一个代码示例：

```
 modelBuilder.Entity<User>()
                .HasRequired(u=>u.Membership)
                .WithOptional()
                .HasForeignKey(u=>u.UserId) 
```

# c# - 通过反射将 Object[] 转换为 Type[]

> ID：11697177
> 
> 赞同：0
> 
> 时间：2012-07-28T00:22:46.340
> 
> 标签：c#, arrays, generics, reflection, setvalue

**目标**

我有一个 object[]Source、object Target 和 FieldInfo Var（Var.FieldType.IsArray 为真）。我想运行 Var.SetValue(Target,Source)。但是，我无法转换“object[]”->“anotherType[]”

**样品运行**

```
object[]Source=new object[2]{"Hello","World"};
Var.SetValue(Target,Source); //Cannot Convert "object[]"->"string[]" 
```

[注意：我希望能够使用 int、double、float 等。否则，这个问题将非常简单]

**研究**

*使用 Var：* 无法使用，因为无法创建 var 数组

*使用泛型：*

这适用于

```
myField.SetValue(target,GenericCastArray<string>(source)); 
```

但是，它不适用于

```
Type someType=typeof(string); //or int, or float
 (myfield.SetValue(target,GenericCastArray< someType > (source)) 
```

* [http://social.msdn.microsoft.com/Forums/en-US/csharplanguage/thread/fe14d396-bc35-4f98-851d-ce3c8663cd79/](http://social.msdn.microsoft.com/Forums/en-US/csharplanguage/thread/fe14d396-bc35-4f98-851d-ce3c8663cd79/) * 返回空引用异常，我认为在 this.GetType()

**编辑：Meh 解决方案** 根据评论，不可能从 object[] 转换为 string[]。但是，以下代码运行良好。

```
object[]Source=null;
Type basetype=Var.FieldType.GetElementType();
int l=somelength;
if (basetype.IsEquivalentTo(typeof(string))) Source = new string[l];
//repeat for all types

source=//run your Reflection here

var.SetValue(target,source); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T00:50:32.697

不可能将一种类型的 Array 转换为另一种类型的 Array（即`object[]`to `string[]`），因为它们是不同的不兼容类型。反射也无助于施放。

`IEnumerable<DestinationType>`要进行转换，您将始终需要直接或通过LINQ 转换函数之一创建数组的某种副本。

# internet-explorer - 有没有办法下载/或模拟旧浏览器 IE6 或 ios3？

> ID：11697182
> 
> 赞同：1
> 
> 时间：2012-07-28T00:23:57.110
> 
> 标签：internet-explorer, browser

我正在编写代码，提醒用户他们的浏览器不受支持，而不是网站看起来一团糟。我无法下载 IE6，因为我已经安装了较新的版本。有没有办法下载或模拟旧浏览器，至少有机会看看我的代码在渲染时会是什么样子

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T00:27:34.257

对于 IE6 尝试[IETester](http://my-debugbar.com/wiki/IETester/HomePage)。这个工具有点问题，但对于您的特定用例，它应该会有所帮助。

另一种选择是使用 XP 安装虚拟机。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T00:33:43.313

Microsoft 提供了一些带有旧版 IE 的[VM 映像。](http://www.microsoft.com/en-us/download/details.aspx?id=11575)一路回到ie6。

# php - 重定向和标头已发送

> ID：11697183
> 
> 赞同：-4
> 
> 时间：2012-07-28T00:24:10.857
> 
> 标签：php, javascript, mysql, html

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T00:27:17.400

You can only use `header('...');` before any other output. In your case it should be:

```
<?php //beginning of the file
if (isset($_POST['Submit'])) {
    $message = $_POST['message'];
    $subject = $_POST['subject'];
    $country_id = $_POST['country_id'];
    createrow($message, $subject, $country_id);
    header('Location: memberprofile.php');
}
.....
?><!DOCTYPE ....
<HTML>....
..... 
```

# javascript - javascript对象构造中发生了一些非常奇怪的事情

> ID：11697185
> 
> 赞同：0
> 
> 时间：2012-07-28T00:24:12.610
> 
> 标签：javascript

这真的很奇怪。我创建了一个图像处理对象，它存储图像数组并将它们显示在页面上，以及其他方法。但是，由于某种原因，它的行为非常奇怪。这是来自 chrome 的控制台日志：

```
default constructor imgHandler.js:16
[null] imgHandler.js:17
GET http://localhost:8080/cglst/images/null 404 (Not Found) jquery-1.7.2.min.js:4
    f.fn.extend.html jquery-1.7.2.min.js:4
    e.extend.access jquery-1.7.2.min.js:2
    f.fn.extend.html jquery-1.7.2.min.js:4
    update imgHandler.js:65
    $.ajax.success addform.php:239
    f.Callbacks.o jquery-1.7.2.min.js:2
    f.Callbacks.p.fireWith jquery-1.7.2.min.js:2
    w jquery-1.7.2.min.js:4
    f.support.ajax.f.ajaxTransport.send.d jquery-1.7.2.min.js:4 
```

所以这是 imgHandler.js 中的构造函数：

```
function imgHandler(imgString) {
    if (imgString != null && imgString != "null") {
        this.img = imgString.split(",");
        this.size = this.img.length;
        console.log("parametrized constructor")
        console.log(this.img);
    } else {
        this.img = Array("defaultimage.png");
        this.size = 0;
        console.log("default constructor")
        console.log(this.img);
    } 
```

这里是 addform.php 的第 238-240 行：

```
 imgHandle = new imgHandler(data.results[0].photos);
                    imgHandle.update();
                    updatePreview(); 
```

我不知道这是怎么可能的，因为我`this.img`在前两行设置为一个图像文件名的数组`console.log("default constructor")`...

# jquery - jQuery submit() 事件中的 jQuery UI 对话框（我做得对吗？）

> ID：11697186
> 
> 赞同：0
> 
> 时间：2012-07-28T00:24:25.100
> 
> 标签：jquery, jquery-ui, submit, jquery-ui-dialog

我正在制作一个表单，在提交时检查 user_name 输入字段是否已填写。如果是则提示一个**jQuery UI**对话框。如果按下“是”，则答案将发送到变量*userOKWithIt*，然后用于第二次调用**submit()**函数。

我这样做是因为我不希望用户能够使用 Firebug 控制台提交带有空用户名的表单（例如在其中写入（**'form）.submit()**）。

这是正确的方法吗？我有一种感觉，我错过了一些重要的东西。我不喜欢存储用户答案的​​全局变量的想法。这是代码：

```
var $dialog = $('<div></div>')
.html('<p>Are you sure you want to continue?</p>')
.dialog({
autoOpen: false,
resizable: false,
title: 'Continue anyway?',
buttons: {
    "Yes": function() {
        $( this ).dialog( "close" );
        userOkWithIt = true;
        $('form').submit();
    },
    No: function() {
        $( this ).dialog( "close" );
    }
}
});

var userOkWithIt = false;
$('form').submit(function(){    
if(!$('input[name="user_name"]').val()){
    //Don't submit because there is no user name written
    return false;
}else{
    $dialog.dialog('open');
    if(userOkWithIt){
        return true;
    }
}
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T00:52:43.973

老实说，我对您的目标有些困惑；你真的需要决定你想要保护多少受过教育的 js 程序员想要以不同于你希望的方式提交你的表单。

* * *

编辑：另外，您应该查看 HTML5 必需输入：[http ://www.w3schools.com/html5/att_input_required.asp](http://www.w3schools.com/html5/att_input_required.asp)

**可能最好的想法**（我能想到的）是当用户说是时取消绑定您的提交事件。这样，表单将在没有任何全局布尔值的情况下提交。它还允许您简化提交事件处理程序以要求用户确认，然后返回 false。

现在，如果你**只想让 userOkWithIt 变量超出全局范围**，你可以使用闭包来完成。

这是一些未经测试的示例代码。>>> <<< 表示我在哪里进行了重要更改。

```
>>> var yesFunction; <<<

var $dialog = $('<div></div>')
    .html('<p>Are you sure you want to continue?</p>')
    .dialog({
        autoOpen: false,
        resizable: false,
        title: 'Continue anyway?',
        buttons: {
            "Yes": function() {
                $( this ).dialog( "close" );

                >>> yesFunction(); <<<

                $('form').submit();
            },
            No: function() {
                $( this ).dialog( "close" );
            }
        }
    });

>>> function() {                   <<<
>>> var userOkWithIt = false;      <<<

$('form').submit(function() {

    >>> yesFunction = function() { <<<
    >>>     userOkWithIt = true;   <<<
    >>> }                          <<<

    if(!$('input[name="user_name"]').val()) {
        //Don't submit because there is no user name written
        return false;
    } else {
        $dialog.dialog('open');
        if(userOkWithIt) {
            return true;
        }
    }
});

>>> }();                           <<< 
```

希望它有所帮助。如果您需要任何澄清，请告诉我。我会在接下来的几天里尝试回来。

# c# - 将复杂对象参数传递给 ObjectDataSource Select

> ID：11697187
> 
> 赞同：1
> 
> 时间：2012-07-28T00:24:27.210
> 
> 标签：c#, asp.net, objectdatasource

我正在使用 ObjectDataSource，我想将自定义对象作为选择参数传递。

这是我的深度学习方法：

```
public static Collection<AdminUserEntity> GetUsers(ClientEntity currentClient)
{
} 
```

因此，当我配置我的 ObjectDataSource 时，我选择 AdminUserEntity 作为要绑定的业务对象，然后选择 GetUsers 作为 Select 方法，但正如您所见，它采用复杂类型作为参数，我不知道如何使用向导指定它或手动。

经过更多的挖掘，我找到了这个解决方案：

```
protected void ods_Selecting(object sender, ObjectDataSourceSelectingEventArgs e)
{
     ClientEntity currentClient = ClientEntity.GetClient("abc");
     e.InputParameters["currentClient"] = currentClient;
} 
```

有没有其他方法可以做到这一点，或者这是一个好的解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T01:23:28.523

看看这篇文章的底部：http: [//msdn.microsoft.com/en-us/library/57hkzhy5 (v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/57hkzhy5(v=vs.80).aspx)

您需要在 ObjectDataSource 控件上使用 DataObjectTypeName 属性。这将是自定义对象的名称。

任何一种解决方案都应该可以正常工作。

# objective-c - 为什么@YES 给出“预期表达式”错误，但@(YES) 编译？

> ID：11697189
> 
> 赞同：5
> 
> 时间：2012-07-28T00:24:45.527
> 
> 标签：objective-c, compiler-errors, objective-c-literals

使用 XCode 4.4 的 Convert to Modern Objective C Syntax，我的`[NSNumber numberWithBool:YES]`调用被转换为`@(YES)`. 我有一些我现在忘记的问题，并自己将它们更改为`@YES`，这应该是正确的语法。

但是，这样做会给我错误：

> 意外的类型名称“BOOL”：预期的表达式

我知道有一个“表达式”语法，但我不明白为什么我不能简单地使用`@YES`and `@NO`。

```
// Compiler error:
NSDictionary *userDefaultsDefaults = @{@"hasBeenLaunched": @YES};

// No error
NSDictionary *userDefaultsDefaults = @{@"hasBeenLaunched": @(YES)}; 
```

为什么`@(YES)`编译时不编译`@YES`，我能做些什么来解决这个问题？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-28T00:30:30.073

简短的回答：

使用`@(YES)`和`@(NO)`

* * *

更长的答案：

看看[这个答案](https://stackoverflow.com/a/11686073/916299)，它解释了这似乎主要是苹果公司的疏忽。

[对此答案](https://stackoverflow.com/a/11428213/916299)的评论者还指出：

> 我想警告一件小事。因此也不支持文字布尔值。但是，我实施的一个快速修复是将其添加到我的一个常见标题的开头（在 iOS 项目中）

```
#ifndef __IPHONE_6_0 
#if __has_feature(objc_bool) 
#undef YES 
#undef NO 
#define YES __objc_yes 
#define NO __objc_no 
#endif 
#endif 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T20:19:21.910

Clang 更新中的新数字文字（如@YES）直到 4.5 才完全实现到 XCode 中。

# wordpress - 除了某些提要，如何将主要的所有提要重定向到 feedburner？

> ID：11697192
> 
> 赞同：0
> 
> 时间：2012-07-28T00:26:38.507
> 
> 标签：wordpress, apache, mod-rewrite, feedburner

我想将我博客的主要提要重定向到 feedburner，但我不想重定向其他提要，例如：mywordpressblog.ir/feed/?post_type=post 或 mywordpressblog.ir/feed/?post_type=daily

我已经以这种方式配置了apache .htaccess，但它不起作用！任何人都可以帮助我吗？

```
<IfModule mod_rewrite.c>
RewriteEngine on
RewriteCond %{HTTP_USER_AGENT} !FeedBurner [NC]
RewriteCond %{HTTP_USER_AGENT} !FeedValidator [NC]
RewriteCond %{REQUEST_URI} !^/feed/\?post.*$ [NC]
RewriteRule ^(.*)$ http://feeds.khajavi.ir/khajavi  [R=302,NC,L]
</IfModule>

# BEGIN WordPress
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]
</IfModule>
# END WordPress 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-29T00:54:59.750

您无法匹配 中的查询字符串`%{REQUEST_URI}`，您需要使用`%{QUERY_STRING}`var：

```
RewriteEngine on
RewriteCond %{HTTP_USER_AGENT} !FeedBurner [NC]
RewriteCond %{HTTP_USER_AGENT} !FeedValidator [NC]
RewriteCond %{REQUEST_URI} !^/feed/ [NC]
RewriteCond %{QUERY_STRING} !^post
RewriteRule ^(.*)$ http://feeds.khajavi.ir/khajavi  [R=302,NC,L] 
```

# c - 使用 Execl 执行我的程序

> ID：11697194
> 
> 赞同：0
> 
> 时间：2012-07-28T00:27:14.920
> 
> 标签：c, file, file-io, printf

我写了一个程序，它以文件名作为参数，打开文件，解析它的内容并做一些事情。我正在编写一个测试程序，它将通过执行它来测试该程序。

这是我的测试课：

```
int main () {

    FILE *input;
    input = fopen("file.txt", "w+");
    if (input == NULL) {
    fprintf(stderr, "Unable to create a new file");
    exit(1);
    }

    fprintf(input, "8\n");

    if (execl("./a.out", "./a.out", "file.txt", NULL) == -1) {
    fprintf(stderr, "Error forking program\n");
    exit(1);
    }

    return 0;
} 
```

当我打开时`file.txt`，我只看到一个空白文件。我的`./a.out`程序给出了一个解析错误（`fgets`返回 NULL），我认为它是因为`file.txt`没有被写入。这里有什么问题？我该如何调试这样的问题？为什么`fprintf`永远不会写入文件？

谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T00:33:57.253

您需要刷新文件 - 请参阅 fflush。在 POSIX 系统上，如果您想在每个 printf 上刷新，也可以使用 setbuf 或 setvbuf。

编辑：实际上，在您的代码中，适当的做法是在 execl 之前关闭文件；这当然会冲洗它。此外，您不需要“w+”，并且“input”对于您正在写入的文件来说不是一个很好的名称。

此外，您应该适当地命名您的程序，而不是将它们命名为 a.out；a.out 的 execl 特别危险，因为您不知道正在运行哪个程序。如果你在没有 -o 标志的情况下编译上面的程序，它会覆盖 a.out 并调用它会导致自身递归执行，从而导致无限循环。幸运的是，它不会因为您不执行分叉而使您的系统充满进程，这与您的（错误的）错误消息相反。

尼特：不要忘记用 \n 结束你的 printfs ...缺少第一个。在错误消息中要特别谨慎，因为它没有得到彻底的测试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T01:18:14.450

你想要什么没有明确指定。但我认为你使用 ./a.out 是这个程序的相同图像。然后

**第一个问题**是你没有命令行参数的安排。

**第二个问题**是你用

```
fopen("test.txt","w+"); 
```

//如果存在则打开文件并截断​​它。如果不存在则创建它

那就是它总是一个新文件。没有以前的内容可用。如果你还想要以前的文件内容，那么使用

```
fopen("test.txt","a"); 
```

要从文件中读取，还可以使用

```
fopen("test.txt", "a+"); 
```

您还必须`rewind()`在使用文件时调用该文件`a+`，并且该文件已经存在。

**第三个问题**，您将当前图像替换为另一个图像，因此像递归一样工作。并且没有正确关闭文件，因此有些超时缓冲区未正确刷新。

**这就像无限循环一样工作**。所以它有什么用我不建议这个程序去做。

# java - 使用Java绘制维恩图

> ID：11697196
> 
> 赞同：3
> 
> 时间：2012-07-28T00:27:20.903
> 
> 标签：java, draw, boolean-logic, venn-diagram

我正在尝试从给定的布尔方程绘制维恩图，例如 `(a AND b) AND c` ，我想在 Android 手机上执行此操作，因此我需要找到一种使用 Java 的方法。

[我在这个布尔代数计算器](http://calculator.tutorvista.com/math/582/boolean-algebra-calculator.html#)中找到了一个完美的小部件，可以满足我的所有需求

他们创建了完美的图表，我确信它没有使用 Java，我也看不到他们的逻辑。

我将不胜感激任何 API、算法或指导。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T00:32:44.253

它使用 WolframAlpha 小部件来生成维恩图。幸运的是，WolframAlpha为这类东西提供[了一个 API 。](http://products.wolframalpha.com/api/)

虽然我承认，这有点矫枉过正。你必须连接到互联网才能使用它。

有针对 Java 的维恩图绘制解决方案，例如[chart4j](http://code.google.com/p/charts4j/)。但如果您使用这些，您将不得不手动计算突出显示的区域。

# linux - 如何在gpio上循环？

> ID：11697197
> 
> 赞同：0
> 
> 时间：2012-07-28T00:27:21.293
> 
> 标签：linux, shell, embedded-linux, gpio

如何使用 gpio 来控制执行？以下用于显示 gpio63 的输入值

```
echo 63 > /sys/class/gpio/export
echo in > /sys/class/gpio/gpio63/direction
cat /sys/class/gpio/gpio63/value 
```

但我尝试了很多东西，比如

```
while [ /sys/class/gpio/gpio63/value = "1" ]
do 
    sleep 1
done 
```

没有成功。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-28T02:56:40.013

您正在将字符串“/sys/class/gpio/gpio63/value”与字符串“1”进行比较。他们永远不会平等。如果您正在寻找“1”作为名为“/sys/class/gpio/gpio63/value”的文件的内容，您应该说

```
while [ "$(cat /sys/class/gpio/gpio64/value)" = 1 ] 
```

# objective-c - XML解析问题

> ID：11697200
> 
> 赞同：1
> 
> 时间：2012-07-28T00:29:38.300
> 
> 标签：objective-c, ios, xml

我在试图解析的文档目录中有一个 XML 文件（以显示在表格视图中）。

```
<tickets>
  <ticket>
    <tid>11111</tid>
    <status>Open</status>
    <summary>Summary 1</summary>  //want to grab this
    <notes>Notes 1</notes>
  </ticket>
  <ticket>
    <tid>11112</tid>
    <status>Open</status>
    <summary>Summary 2</summary>  //want to grab this
    <notes>Notes 2</notes>
  </ticket>

  ...

</tickets> 
```

我想`summary`显示在表格视图中。现在，我只是想让一个 NSMutableArray 填充所有的摘要字符串。

我正在使用`XMLReader`创建所有内容的字典。然后，我使用以下代码尝试进行摘要。

```
NSData *data = [NSData dataWithContentsOfFile:save];
NSString *xml = [[NSString alloc] initWithData:data encoding:NSUTF8StringEncoding];

// Parse the XML into a dictionary
NSError *parseError;
NSDictionary *xmlDictionary = [XMLReader dictionaryForXMLString:xml error:&parseError];

NSDictionary *ticketsArray = [xmlDictionary objectForKey:@"tickets"];
NSDictionary *ticketArray = [ticketsArray objectForKey:@"ticket"];;
//Now have a dictionary with ticket... what to do next? 
```

我不确定下一步该去哪里。您知道如何将所有摘要放入 NSMutableArray 中吗？`XMLReader`如果不是首选，我可以使用其他东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T00:40:59.850

```
NSMutableArray *summaries = [NSMutableArray array];

for (NSString *key in [ticketArray allKeys])
{
    if ([key isEqualToString:@"summary"]) 
        [summaries addObject:[ticketArray objectForKey:key]];
} 
```

警告：凭记忆编写，未经测试。另外，您有一本名为ticketArray 的字典，这让我有点困惑，但我假设那实际上是一本字典。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T00:47:45.537

试试这个：

```
for (NSDictionary *d in ticketArray) {
    NSDictionary *d2 = [d objectForKey:@"summary"];
    [summaries addObject:[d2 objectForKey:@"text"]];
} 
```

您为摘要文本返回的字符串可能需要修剪，但基本想法应该有效。

# file - 音频文件从 raw 复制到 sd 但无法播放

> ID：11697202
> 
> 赞同：1
> 
> 时间：2012-07-28T00:29:54.920
> 
> 标签：file, audio, copy, sd-card

我想创建一个 android 应用程序，它可以将一些音频文件从 Eclipse 项目的原始文件夹复制到 sd 卡。文件已复制到 sd 卡，但无法播放媒体播放器，并显示下一条消息“播放器不支持此类音频文件”，似乎文件已损坏，但我不知道原因。这是我的代码：

```
Button copy = (Button) findViewById(R.id.button2);
    copy.setOnClickListener(new View.OnClickListener(){
        public void onClick(View view) {

            File sdCard, directory = null;
            String nombreMP3 = "audio.mp3";
            BufferedInputStream  entrada = null;
            BufferedOutputStream salida = null;
            int len=0;
            sdCard = Environment.getExternalStorageDirectory();
            directory = new File( sdCard.getAbsolutePath() + "/CarpetaAplicacion2");
            if (!directory.exists()){
                directory.mkdir();
            }
            File f = new File(directory, nombreMP3);
            try {                   
                entrada = new BufferedInputStream(getResources().openRawResource(R.raw.dignidad));
                salida = new BufferedOutputStream((new FileOutputStream(f)),4096);
                byte[] buff = new byte[4096];
            while ((len=entrada.read()) > 0){   
                synchronized (buff){
                    salida.write(buff,0,len);
                    salida.flush();}
            }

            } catch (IOException ex) { 
                if( entrada != null){
                    try {
                        entrada.close();
                    } catch (IOException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    }}
                if (salida != null) {
              try {
                salida.close();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }}
            }
            finally{
                if( entrada != null){
                    try {
                        entrada.close();
                    } catch (IOException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    }}
                if (salida != null) {
              try {
                salida.close();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        } 
```

# ruby-on-rails - 错误后 Rails 不会重置 ActiveRecord 对象（new_record？）

> ID：11697203
> 
> 赞同：1
> 
> 时间：2012-07-28T00:30:10.100
> 
> 标签：ruby-on-rails, activerecord

以前在这里问过这个问题，但已经3年了。不幸的是，我们仍在使用 Rails 2.3.14，所以这是我现在遇到的问题，当时并没有真正得到解答。

我有2个模型...

组织组织权限

在组织控制器的创建方法中，我将组织和组织权限对象保存在组织事务中。

如果组织保存良好，没有错误，但组织权限对象失败，则事务没有正确回滚组织对象。方法new_record？认为该对象不再是新的，然后强制我的表单进行更新操作，这是我不想要的。

这是09年在这里问的...

[http://bit.ly/MbYGXd](http://bit.ly/MbYGXd)

结果是它是 2.3.5 中的一个错误，但没有关于如何解决它的答案。

有没有解决的办法？

谢谢

**更新：**

只是想把它推到顶峰。可能不应该在周末发布。:)

我仍然不知道该怎么做。当引发错误并且它不在主对象中时，ActiveRecord 对象未设置为 new_record？并且该页面不再反映创建，现在是更新，这绝对不会起作用。

我本可以发誓有办法解决这个问题，但我在任何地方的代码中都找不到它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T13:55:42.057

我遇到了类似的问题，发现如果将代码包装在嵌套的 rollback_active_record_state 中！块然后它按预期工作。就我而言，交易在`after_create`回调中失败。

```
ActiveRecord::Base.transaction do
  @model_a = ModelA.new(params[:model_a])
  @model_b = ModelB.new(params[:model_b])

  @model_a.rollback_active_record_state! do
    @model_b.rollback_active_record_state! do
       @model_a.save!
       @model_b.save!
       ...
    end
  end    

end 
```

# objective-c - Mountain Lion 中的 GCDAsyncSocket 问题

> ID：11697207
> 
> 赞同：2
> 
> 时间：2012-07-28T00:31:05.520
> 
> 标签：objective-c, xcode, gcdasyncsocket

我在我的 Mac (Objective-C) 应用程序中使用 GCDAsyncSocket 类时遇到问题。这是我得到的错误：

```
Apple Mach-O Linker (Id) Error

Ld "/Users/matthewdahl/Library/Developer/Xcode/DerivedData/Server_Tester-fkkcdricfunsmwcdnerorqdtqetc/
  Build/Products/Debug/Server Tester.app/Contents/MacOS/Server Tester" normal x86_64
    cd "/Volumes/Data/Programming/ControlTouch/P12127/Server Tester"
    setenv MACOSX_DEPLOYMENT_TARGET 10.8

    /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch
  x86_64 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/
  MacOSX10.8.sdk -L/Users/matthewdahl/Library/Developer/Xcode/DerivedData/Server_Tester-
  fkkcdricfunsmwcdnerorqdtqetc/Build/Products/Debug -L/Applications/Xcode.app/Contents/Developer/
  Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.8.sdk/usr/lib/system -F/Users/matthewdahl/Library/
  Developer/Xcode/DerivedData/Server_Tester-fkkcdricfunsmwcdnerorqdtqetc/Build/Products/Debug -filelist 
  "/Users/matthewdahl/Library/Developer/Xcode/DerivedData/Server_Tester-fkkcdricfunsmwcdnerorqdtqetc/
  Build/Intermediates/Server Tester.build/Debug/Server Tester.build/Objects-normal/x86_64/Server 
  Tester.LinkFileList" -mmacosx-version-min=10.8 -fobjc-arc -fobjc-link-runtime -framework Security -
  framework Cocoa -o "/Users/matthewdahl/Library/Developer/Xcode/DerivedData/Server_Tester-
  fkkcdricfunsmwcdnerorqdtqetc/Build/Products/Debug/Server Tester.app/Contents/MacOS/Server Tester"

Undefined symbols for architecture x86_64:
  "_OBJC_CLASS_$_GCDAsyncSocket", referenced from:
      objc-class-ref in ServerTesterAppDelegate.o
ld: symbol(s) not found for architecture x86_64
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

我真的很难理解这里的问题。我尝试删除并重新添加 GCDAsyncSocket.h 和 .m 文件。我已经验证所有导入都是导入 .h 文件而不是 .m 文件。我已经清理了项目，甚至尝试从头开始制作一个新项目。对可能导致这种情况的任何洞察力都会很棒。（注意：我刚刚升级到山狮 - 不确定它是否是罪魁祸首）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-28T02:01:12.640

转到项目 > 目标 > 构建阶段 > 编译源。您的所有 .m 文件都在列表中吗？

# vb.net - 对字典集合中的键进行分组并添加值

> ID：11697210
> 
> 赞同：0
> 
> 时间：2012-07-28T00:31:40.347
> 
> 标签：vb.net, linq

我有一个这样的字典集合（希望这是有道理的，在飞行中做了）

```
dim dic as new ienumerable(of dictionary(of integer, double))= _
{dictionary(of integer, double) = new { {1, 0.5}, {5, 0.75} } _
,dictionary(of integer, double) = new { {1, 0.3}, {4, 0.46} }} 
```

我想得到一个`dictionary`（使用linq）相同键的总和，像这样

```
dictionary(of integer, double) = { {1, 0.8}, {4, 0.46}, {5, 0.75} } 
```

所以，换句话说，我想添加`group`并`keys`添加`values`分组项目。

我可以用 a 轻松做到这一点，`for loop`但我正在尝试学习 linq，并想用它来解决这个问题。谁能给我一些关于如何到达那里的提示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T02:45:54.950

```
Dictionary<int, int> dict1 = new Dictionary<int, int>() {{1,9},{2,10},{3,11} };
        Dictionary<int, int> dict1 = new Dictionary<int, int>() {{1,9},{2,10},{3,11} };
        Dictionary<int, int> dict2 = new Dictionary<int, int>() { { 1, 9 }, { 2, 10 }, { 3, 11 } };
        Dictionary<int, int> dict3 = new Dictionary<int, int>() { { 1, 9 }, { 2, 10 }, { 3, 11 } };
        List<Dictionary<int, int>> list = new List<Dictionary<int, int>> {dict1,dict2,dict3 };
        Dictionary<int, int> dictionary = new Dictionary<int, int>();
        list.SelectMany(a => a).GroupBy(a => a.Key).ToList().ForEach(el=>dictionary.Add(el.Key,el.Sum(sm=>sm.Value))); 
```

我没有 VB.net 的知识，但这是在 C# 中。我希望这将有所帮助。

# shell - 如何将 TMPDIR 环境变量设置为另一个目录？

> ID：11697214
> 
> 赞同：8
> 
> 时间：2012-07-28T00:32:18.463
> 
> 标签：shell, unix

我正在尝试编译 ffmpeg 并且 tmp dir 存在问题，因为使用 noexec 安装：

> ./configure --enable-libmp3lame --enable-libvorbis --disable-mmx --enable-shared 无法在 /tmp 中创建和执行文件。将 TMPDIR 环境变量设置为另一个目录，并确保它没有挂载 noexec。理智测试失败。
> 
> 如果您认为 configure 出错了，请确保您使用的是 SVN 的最新版本。如果最新版本失败，请将问题报告给 ffmpeg-user@mplayerhq.hu 邮件列表或 irc.freenode.net 上的 IRC #ffmpeg。包括由 configure 生成的日志文件“config.err”，因为这将有助于解决问题。

如何将 TMPDIR 环境变量设置为另一个目录？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-09-24T22:16:15.687

我能够使用下面的代码完成它：

```
$ export TMPDIR=~/tmp-ffmpeg

$ mkdir $TMPDIR

$ ./configure \
  --enable-gpl \
  --enable-version3 \
  --enable-shared \
  --enable-nonfree \
  --enable-postproc \
  --enable-libfaac \
  --enable-libmp3lame \
  --enable-libopencore-amrnb \
  --enable-libopencore-amrwb \
  --enable-libtheora \
  --enable-libvorbis \
  --enable-libvpx \
  --enable-libx264 \
  --enable-libxvid \
  --enable-x11grab \
  --extra-cflags="-I/usr/local/include" \
  --extra-ldflags="-L/usr/local/lib"

$ make
$ make install
$ rm -rf $TMPDIR
$ unset TMPDIR 
```

还有`mktemp(1)`命令。这样您就可以按如下方式设置 TMPDIR：

```
$ TMPDIR="$(mktemp -d -q ~/tmp/tmp.XXXXX)"
$ echo $TMPDIR
/home/marcelo/tmp/tmp.I8V9H 
```

这应该适用于 GNU coreutils 以及 BSD（macOs、FreeBSD 等）。另请注意，您不需要导出 TMPDIR 然后取消设置它。而是尝试直接将变量传递给配置：

```
$ TMPDIR="/foo/bar/baz" ./configure ... 
```

希望它可以帮助别人;-)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-28T00:38:21.667

尝试这个：

```
TMPDIR=/some/other/dir ./configure --enable-libmp3lame --enable-libvorbis --disable-mmx --enable-shared 
```

如果您想使用新的 TMPDIR 执行多个命令，并假设您使用 bash 作为 shell，`export`请先执行它。

```
export TMPDIR=/some/other/dir
./configure --enable-libmp3lame --enable-libvorbis --disable-mmx --enable-shared
... 
```

# php - 使用 GD PHP 创建带有文本和透明背景的图像

> ID：11697215
> 
> 赞同：4
> 
> 时间：2012-07-28T00:32:30.870
> 
> 标签：php, image, gd

一切都可以使该图像中的文本旋转和居中，但是由 imagecolortransparent 函数创建的文本周围有一个黑色边框。如何创建带有文本和透明背景的图像？这是代码：

```
header('Content-Type: image/png');

$title = "test text";

$im = imagecreatetruecolor(87, 80);
$white = imagecolorallocate($im, 255, 255, 255);
$black = imagecolorallocate($im, 0, 0, 0);
imagefill($im, 87, 80, $black);
imagecolortransparent($im, $black);

$white = imagecolorallocate($im, 255, 255, 255);
$font = "../fonts/arial.ttf";

$bbox = imagettfbbox(12,-40,"../fonts/arial.ttf", $title);
$width = $bbox[2]-$bbox[0];
$height = ceil(($bbox[6]-$bbox[0])/2);

$pos = ceil((87-$width)/2);
$posx = $pos-$height;
$posy = $pos+$height;

imagettftext($im, 12, -45, $posx, $posy, $white, $font, $title);

imagepng($im);
imagedestroy($im); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-28T01:10:47.500

你想要的是关闭抗锯齿，使用负片颜色来实现这一点。

```
imagettftext($im, 12, -45, $posx, $posy, -$white, $font, $title); 
```

# mysql - rails 模型和 ActiveRecord 查询之间的关联

> ID：11697222
> 
> 赞同：0
> 
> 时间：2012-07-28T00:33:31.137
> 
> 标签：mysql, ruby-on-rails, ruby, activerecord, models

我正在尝试查找由比变量 min_age 年长的用户制作的所有资产。目前，我正在尝试通过这个电话来做到这一点：

```
assets = Asset.joins(:user).where("age(users.handles.first.birthday) >= ?", min_age) 
```

每个资产有一个用户，每个用户可以有多个句柄。

```
class User < ActiveRecord::Base

  has_many :handles, :class_name => "UserHandle"

def get_current_age
    age(self.handles.first.birthday)
end 
```

这是我得到的错误：

```
ActiveRecord::StatementInvalid in SearchController#data

Mysql2::Error: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '.birthday) >= 90)' at line 1: SELECT `assets`.* FROM `assets` INNER JOIN `users` ON `users`.`id` = `assets`.`user_id` WHERE (age(users.handles.first.birthday) >= 90)

Rails.root: /Users/Jimmy/Documents/Launchpad Toys/LPT_Repositories/orbit-analytics
Application Trace | Framework Trace | Full Trace

app/controllers/search_controller.rb:254:in `find_by_user_current_age'
app/controllers/search_controller.rb:121:in `robot_search'
app/controllers/search_controller.rb:384:in `data' 
```

# ruby-on-rails - 为什么我会为 Rails 控制器操作收到“您可能有不明确的路线”？

> ID：11697228
> 
> 赞同：1
> 
> 时间：2012-07-28T00:35:20.400
> 
> 标签：ruby-on-rails, ruby, routing, formtastic

我的一个模型的语义形式有问题。相关型号为

```
class Event < ActiveRecord::Base
  belongs_to :series
  ...
end

class Series < ActiveRecord::Base
  has_many :events
  ...
end 
```

当我`/series/new`在浏览器中访问时，我收到错误：

```
 series_url failed to generate from {:controller=>"series", :action=>"show"} - you may have ambiguous routes, or you may need to supply additional parameters for this route.  content_url has the following required parameters: ["series", :id] - are they all satisfied? 
```

编辑：我跑去`rake routes | grep series | grep new`寻找有冲突的路线，但没有，这是输出：

```
new_series_event GET /series/:series_id/events/new(.:format) {:controller=>"events", :action=>"new"} 
new_series       GET /series/new(.:format) {:controller=>"series", :action=>"new"} 
```

对应的模板`/series/new`呈现以下部分：

```
<% semantic_form_for(@series) do |f| %>
  <%= f.error_messages %>
  <% f.inputs do %>
    <%= f.input :title %>
    <%= f.input :uri, :label => "URL of the Series", :hint => "For example, use 'tes' for 'Transportation Education Series'. It will appear as http://events.kittelson.com/tes"    <%= f.input :description %>
    <%= f.input :contact, :label => "Contact email" %>
    <%= f.input :color, :label => "Pick a dark color" %>
  <% end %>
  <% f.buttons do %>
    <%= f.commit_button %>
    <%= link_to "or cancel", :back %>
  <% end %>
<% end %> 
```

对象在`@series`控制器中定义为`Series.new`.

我不明白这与路由有何关系，我跑了`rake routes`，只有一个控制器操作映射到`/series/new`.

以下是与`config/routes.rb`这些模型相关的部分：

```
ActionController::Routing::Routes.draw do |map|
  map.resources :series, :has_many => :events
  map.resources :events, :has_many  => :rsvps
end 
```

什么可能导致此路由错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T03:47:24.823

只是一种预感。你可能会混淆 Rail 的变形器。也许它应该`belongs_to serial`代替`belongs_to series`?

你看，通常我们会写`belongs_to user`而不是`users`. 所以你可能想尝试一下。

# sql-server - SQL Server 数据库中的特定表不可读

> ID：11697234
> 
> 赞同：0
> 
> 时间：2012-07-28T00:35:32.893
> 
> 标签：sql-server, sql-server-2008

我可以从我的 SQL Server 2008 数据库中的所有表中读取 ( `SELECT`)，但其中一个除外。

这种行为可能是什么原因，人们将如何解决它？

我不得不求助于关闭并重新启动 SQL Server。

编辑：是的，我有权阅读它——我通常这样做没有问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T05:49:54.513

是否有任何应用程序连续访问该表并锁定它？

这张表的大小是多少，我的意思是有多少行？

否则，我猜磁盘上的一些坏扇区是在其中创建了这个表页的。

# ruby-on-rails - 重置 FactoryGirl 测试的“序列”

> ID：11697235
> 
> 赞同：5
> 
> 时间：2012-07-28T00:36:03.767
> 
> 标签：ruby-on-rails, factory-bot

有谁知道如何重置 FactoryGirl 的序列方法？

我有一个创建任务列表的工厂，我想每次都从 1 开始。我使用“序列”是因为任务列表是一个关联模型，所以每次使用时我都需要增加顺序，`FactoryGirl.create`直到我调用重置。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T23:01:12.303

您需要`FactoryGirl.reload`在测试文件的前/后回调中写入。

**示例代码片段**

```
 before do
    FactoryGirl.reload
    .
    .
    .
  end 
```

这 '。' 代表其他代码。

最好这样写`FactoryGirl.reload unless FactoryGirl.factories.blank?`，以便 FactoryGirl 在不需要时不会重新加载。

* * *

完全重新加载 FactoryGirl 可能会在处理测试所需的时间上产生一些开销；这也是所谓的[Anti-Patterns](http://robots.thoughtbot.com/post/10983530140/getting-sequential-a-look-into-a-factory-girl)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-05-06T11:57:40.287

而不是使用`FactoryGirl.reload`并因此创建[反模式](http://robots.thoughtbot.com/post/10983530140/getting-sequential-a-look-into-a-factory-girl)效果。您可以将唯一值传递给 FactoryGirl，以便在创建新条目时为这些字段递增。

**示例代码片段**（此示例代码创建 5 个任务，假设工厂称为任务）

```
 before do
    (1..5).each do |n|
      FactoryGirl.create(:task,
        name:       "Task_unique_test_name#{n}"
      )
    end
  end 
```

这样，新的一组任务顺序每次都从 1 开始，您不必重新加载 FactoryGirl。

# ruby - 文件名匹配，扩展名不重要

> ID：11697237
> 
> 赞同：1
> 
> 时间：2012-07-28T00:36:36.097
> 
> 标签：ruby

我想写一个方法来做到这一点

```
def search_for_filenames(dir, name)
    # goes to the directory and returns a list of files that match
    # the given name, regardless of extension
end 
```

因此，例如，如果名称是`test`，并且我的目录包含以下内容

```
test.png
test.txt
something_else.dat 
```

该方法将返回一个包含前两个文件名的数组

我该如何写这个方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T01:01:18.573

使用`Dir::glob`.

```
Dir::glob("#{dir}/#{name}.*") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T02:11:57.913

艰难它会更快，`Dir::glob`但实际上有时可能需要更多时间才能运行。无论如何，这就是我所做的。但是使用`Dir::glob`.

```
def search_for_filenames(dir, name)
  result_files = []
  Dir.new(dir).each do |file|
    if /^#{name}\.\w+$/.match file
      result_files << file
      return result_files if result_files.size == 2
    end
  end
  result_files
end 
```

# plone - 如何为所有新用户将 ext_editor 设置为 True？

> ID：11697238
> 
> 赞同：2
> 
> 时间：2012-07-28T00:36:39.573
> 
> 标签：plone

我正在使用 Plone 4.1 和collective.externaleditor。我希望每当创建新用户时，将他的个人偏好 ext_editor 设置为 True。

我订阅了用户创建事件，但我无法更改该属性：

**配置.zcml：**

```
 ...
 <subscriber
      for="Products.PluggableAuthService.interfaces.events.IPrincipalCreatedEvent"
      handler=".events.newUser"
      /> 
```

**事件.py：**

```
from zope.app.component.hooks import getSite
from Products.CMFCore.utils import getToolByName

def newUser(user):
    '''Sets external editor property to True for new users.'''
    mtool = getToolByName(getSite(), 'portal_membership')
    # what should i put here?
    user.principal.setProperties({'ext_editor': True}) 
```

newUser 没有做它的工作。user.principal 的类型是 Ploneuser。它没有 setMemberProperties 方法，所以我不知道该怎么做。

collective.externaleditor 也向控制面板添加了一个属性“ext_editor”，所以我可以通过编程方式对其进行更改。

如何为新创建的用户将 ext_editor 设置为 True？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T12:50:16.743

这是我找到的答案。

**配置文件/默认/memberdata_properties.xml：**

```
<?xml version="1.0"?>
<object name="portal_memberdata" meta_type="Plone Memberdata Tool">
 <property name="ext_editor" type="boolean">True</property>
</object> 
```

# ios - 现有的 UITableView 照片网格没有正确旋转？

> ID：11697240
> 
> 赞同：0
> 
> 时间：2012-07-28T00:36:50.783
> 
> 标签：ios, cocoa-touch, ipad, rotation, ipod

我正在尝试制作一个基本的照片网格，即小“缩略图”图像的“网格”，单击时会转到图像的大版本。我正在使用 UITableView 来完成此操作。我的问题是，当我尝试添加旋转支持时，我无法让表格用额外的图像行重新绘制网格。

这是我的一些代码，请随时提出任何问题，因为我对此一无所知> :(

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

        if(cell==nil){
        cell=[[UITableViewCell alloc]initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }

    if(self.interfaceOrientation==UIInterfaceOrientationPortrait || self.interfaceOrientation==UIInterfaceOrientationPortraitUpsideDown){
        NSLog(@"portrait");
        for (int i=0; i < self.numberOfColumns; i++) {
            if (self.photoIndex < [self.photosArray count] || self.shouldReload==TRUE) {
                UIButton *imageButton = [[UIButton alloc]init];

                UIActivityIndicatorView *loadingActivityIndicator = [[UIActivityIndicatorView alloc]initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleWhite];

                [imageButton addTarget:self action:@selector(imageClicked:) forControlEvents:UIControlEventTouchDown];
                switch (self.buttonNumber) {
                    case 1:
                        self.xCord=35.0f;
                        self.buttonNumber++;
                        break;
                    case 2:
                        self.xCord=213.25f;
                        self.buttonNumber++;
                        break;
                    case 3:
                        self.xCord=391.5f;
                        self.buttonNumber++;
                        break;
                    case 4:
                        self.xCord=569.75f;
                        self.buttonNumber=1;
                        break;
                }
                imageButton.frame = CGRectMake(self.xCord, 35.0f, 163.25f, 163.25f);
                imageButton.tag = self.photoIndex;
                imageButton.enabled=FALSE;
                imageButton.imageView.contentMode = UIViewContentModeScaleAspectFit;

                if(self.buttonsArray.count < self.photosArray.count)[self.buttonsArray addObject:imageButton];

                if([self.isInternetAvailableClass isInternetAvailable]==YES)[self downloadImages:self.photoIndex];
                cell.selectionStyle=UITableViewCellSelectionStyleNone;
                [cell addSubview:imageButton];

                if(self.photoIndex < self.buttonsArray.count){
                if(![[self.buttonsArray objectAtIndex:self.photoIndex] currentImage]){

                loadingActivityIndicator.center = imageButton.center;
                loadingActivityIndicator.hidesWhenStopped=TRUE;

                }
                }
                 if(self.activityIndicatorArray.count < self.photosArray.count){

                     [self.activityIndicatorArray addObject:loadingActivityIndicator];
                     if([self.isInternetAvailableClass isInternetAvailable]==YES){

                         [loadingActivityIndicator startAnimating];   

                     }

                 }else{
                     if(self.photoIndex < self.buttonsArray.count){
                     [self.activityIndicatorArray replaceObjectAtIndex:self.photoIndex withObject:loadingActivityIndicator];

                     }
                 }

               [cell addSubview:loadingActivityIndicator];
                self.photoIndex++;
            }
        }

    return cell;
    }else{
        NSLog(@"landscape called!");
        for (int i=0; i < self.numberOfColumns; i++) {
            if (self.photoIndex < [self.photosArray count] || self.shouldReload==TRUE ){
                NSLog(@"inside landscape called!");
                UIButton *imageButton = [[UIButton alloc]init];

                UIActivityIndicatorView *loadingActivityIndicator = [[UIActivityIndicatorView alloc]initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleWhite];

                [imageButton addTarget:self action:@selector(imageClicked:) forControlEvents:UIControlEventTouchDown];
                switch (self.buttonNumber) {
                    case 1:
                        self.xCord=37;
                        self.buttonNumber++;
                        break;
                    case 2:
                        self.xCord=230;
                        self.buttonNumber++;
                        break;
                    case 3:
                        self.xCord=423;
                        self.buttonNumber++;
                        break;
                    case 4:
                        self.xCord=616;
                        self.buttonNumber++;
                        break;
                    case 5:
                        self.xCord=809;
                        self.buttonNumber=1;
                        break;
                }
                imageButton.frame = CGRectMake(self.xCord, 35.0f, 163.25f, 163.25f);
                imageButton.tag = self.photoIndex;
                imageButton.enabled=FALSE;
                imageButton.imageView.contentMode = UIViewContentModeScaleAspectFit;

                if(self.buttonsArray.count < self.photosArray.count){

                    [self.buttonsArray addObject:imageButton];
                }

                if([self.isInternetAvailableClass isInternetAvailable]==YES){

                [self downloadImages:self.photoIndex];
                }
                cell.selectionStyle=UITableViewCellSelectionStyleNone;
                [cell addSubview:imageButton];

                if(self.photoIndex < self.buttonsArray.count){
                if(![[self.buttonsArray objectAtIndex:self.photoIndex] currentImage]){

                    loadingActivityIndicator.center = imageButton.center;
                    loadingActivityIndicator.hidesWhenStopped=TRUE;
                }
            }
                if(self.activityIndicatorArray.count < self.photosArray.count){

                    [self.activityIndicatorArray addObject:loadingActivityIndicator];
                    if([self.isInternetAvailableClass isInternetAvailable]==YES){

                        [loadingActivityIndicator startAnimating];

                    }

                }else{
                    if(self.photoIndex < self.activityIndicatorArray.count){
                    [self.activityIndicatorArray replaceObjectAtIndex:self.photoIndex withObject:loadingActivityIndicator];
                    }
                }

                [cell addSubview:loadingActivityIndicator];
                self.photoIndex++;
            }
        }

        return cell;

    }
    if (self.shouldReload==TRUE)self.shouldReload=FALSE;
}

#pragma mark - Table view delegate
- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath{
    return 205.0f;
}

#pragma mark - View Lifecycle
- (void)viewDidLoad
{
    [super viewDidLoad];
    self.photosTableView = [[UITableView alloc]init];
    self.photosTableView.delegate=self;
    self.photosTableView.dataSource=self;
    self.photosTableView.separatorStyle = UITableViewCellSeparatorStyleNone;
    self.photosTableView.backgroundColor = [UIColor clearColor];
    [self.view addSubview:self.photosTableView];

    self.isInternetAvailableClass = [[IsInternetAvailable alloc]init];
    self.buttonNumber=1;
    self.xCord=0.0f;
    self.downloadedImageNumber=0;
    self.buttonsArray = [[NSMutableArray alloc]init];
    self.dataDictionary = [[NSMutableDictionary alloc]init];
    self.downloadedImagesArray = [[NSMutableArray alloc]init];
    self.activityIndicatorArray = [[NSMutableArray alloc]init];
    self.photosArray = [[NSMutableArray alloc]init];
    self.largePhotosArray = [[NSMutableArray alloc]init];
    self.imageOrderDictionary = [[NSMutableDictionary alloc]init];
    self.refToDownloadedImage = [[UIImage alloc]init];
    self.unformattedPhotosArray = [[NSMutableArray alloc]init];
    self.appDelegate = (StereophotoAppDelegate *)[[UIApplication sharedApplication]delegate];
    self.shouldReload=FALSE;

    if(self.interfaceOrientation==UIInterfaceOrientationPortrait || self.interfaceOrientation==UIInterfaceOrientationPortraitUpsideDown){
        self.numberOfColumns=4;
    }else{
        self.numberOfColumns=5;
    }

    self.photoIndex=0;
    self.errorImageArray = [[NSMutableArray alloc]init];

    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(viewWillAppear:) name:UIApplicationDidBecomeActiveNotification object:nil];
    [[NSNotificationCenter defaultCenter]addObserver:self selector:@selector(deviceDidRotate) name:UIDeviceOrientationDidChangeNotification object:nil];

    [self loadImages];
    }
-(void)viewWillAppear:(BOOL)animated{
    self.appDelegate.isSlideshowRunning=NO;
    self.appDelegate.PhotosPopoverSlideshowText = @"Start Slideshow";

    if([self.isInternetAvailableClass isInternetAvailable]==YES){

        if(self.isCommingFromNoNetworkConnectivity==YES){
            [self viewDidLoad];
        }
        if(self.photosTableView.isHidden==YES)[self.photosTableView setHidden:NO];
        self.isCommingFromNoNetworkConnectivity=NO;
    }else{

        if(self.photosTableView.isHidden==NO){

            [self.photosTableView setHidden:YES];

            self.isCommingFromNoNetworkConnectivity=YES;
        }
        UIAlertView *errorAlert = [[UIAlertView alloc]initWithTitle:@"Oops!" message:@"No Internet connection was detected! Please connect to the Internet and try again!" delegate:self cancelButtonTitle:@"Ok" otherButtonTitles:nil, nil];
        [errorAlert show];
    }
}
-(void)viewWillDisappear:(BOOL)animated{
    for(NSURLConnection *connection in self.connectionsArray){
        [connection cancel];
    }
}
-(BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation{
    return TRUE;
}
-(void)deviceDidRotate{
    self.photosTableView.frame=CGRectMake(0, 0, self.view.bounds.size.width, self.view.bounds.size.height);

    if(self.interfaceOrientation==UIInterfaceOrientationPortrait || self.interfaceOrientation==UIInterfaceOrientationPortraitUpsideDown){
        self.numberOfColumns=4;
    }else{
        self.numberOfColumns=5;
    }
    self.shouldReload=TRUE;
    [self.photosTableView reloadData];
}
-(void)viewDidAppear:(BOOL)animated{
    self.photosTableView.frame = CGRectMake(0, 0, self.view.bounds.size.width, self.view.bounds.size.height);

} 
```

谢谢你的帮助！

碎纸机

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T07:43:10.067

我认为表格视图是画廊的错误工具。你总是会经历一些愚蠢的事情来将多个图像放在一个表格视图单元格中，你可能不会使用`didSelectRowAtIndexPath`逻辑等。我建议`UIScrollView`改为（参见下面的示例）。

但是，如果您决定使用表格视图，那么`[self.tableView reloadData]`这是正确的解决方案。但是你`cellForRowAtIndexPath`有很多问题：

1.  只有`UIButtons`在创建单元格时才应该创建。但是，鉴于您的横向和纵向方向，您必须注意正确处理。不难，但要小心。

2.  您应该将图像的缓存与单元格的加载分离。它们确实是两种不同的东西，即使感觉它们非常相似。无论如何，您绝对不应该`cellForRowAtIndexPath`根据图像是否缓存来更改单元格的基本填充；它只是改变你获得图像的位置。

3.  与手头的问题无关，但我不会硬编码屏幕坐标。在接下来的几个月/几年中，如果看到具有不同分辨率的新 iOS 设备，我不会感到惊讶。就个人而言，我根据我可以容纳多少缩略图来计算我可以在屏幕上容纳多少图像`self.view.frame.width`（您可以使用`cell.contentView.frame.width`）。

4.  也可能与这里的问题无关，我绝不建议`viewDidLoad`从`viewWillAppear`. 如果你想有一些他们都使用的通用初始化例程，那么也许你可以这样做（但即使这有点草率），但鉴于`viewDidLoad`调用`[super viewDidLoad]`，你最终会调用该`super`方法两次，而你没有'不知道iOS是否很酷。可能不是灾难性的，但我无法想象这是一个好主意。

5.  最后，也与您的问题无关，但您不需要使用通知中心，`UIDeviceOrientationDidChangeNotification`因为标准`willAnimateRotationToInterfaceOrientation`或`viewWillLayoutSubviews`将为我们这样做。

如果你想做一个`UIScrollView`从远程服务器延迟加载图像的画廊版本，利用缩略图缓存，检测对图像的点击等，它可能如下所示。我提请您注意绝对没有任何纵向/横向逻辑（因为它只查看滚动视图的尺寸），但它可以很好地处理方向变化。不过，我没有包含我的填充代码，`NSArray *imageUrlStrings`因为这显然是特定应用程序所独有的，但您可能还是明白了这个想法。您可以进行各种优化（例如 use `Reachability`），但这是一个可以为您完成工作的画廊外壳。

```
//  GalleryViewController.m

#import "GalleryViewController.h"
#import "ThumbnailCache.h"

#define IMAGE_WIDTH 76.0
#define IMAGE_HEIGHT 76.0

@interface MyImage : NSObject

@property (nonatomic, strong) NSString *urlString;
@property (nonatomic, strong) UIImageView *imageView;
@property (nonatomic, strong) UIActivityIndicatorView *activityIndicator;
@property (nonatomic, strong) UIView *view;
@property BOOL loading;
@property BOOL loaded;

@end

@implementation MyImage

// I find that I generally can get away with loading images in main queue using Documents
// cache, too, but if your images are not optimized (e.g. are large), or if you're supporting
// older, slower devices, you might not want to use the Documents cache in the main queue if
// you want a smooth UI. If this is the case, change kUseDocumentsCacheInMainQueue to NO and
// then use the Documents cache only in the background thread.

#define kUseDocumentsCacheInMainQueue YES

- (id)init
{
    self = [super init];
    if (self)
    {
        _view = [[UIView alloc] initWithFrame:CGRectMake(0.0, 0.0, IMAGE_WIDTH, IMAGE_HEIGHT)];
        _imageView = [[UIImageView alloc] initWithFrame:CGRectMake(0.0, 0.0, IMAGE_WIDTH, IMAGE_HEIGHT)];
        _imageView.contentMode = UIViewContentModeScaleAspectFill;
        _imageView.clipsToBounds = YES;
        [_view addSubview:_imageView];
        _loading = NO;
        _loaded = NO;
    }
    return self;
}

- (void)loadImage:(dispatch_queue_t)queue
{
    if (self.loading)
        return;

    self.loading = YES;

    ThumbnailCache *cache = [ThumbnailCache sharedManager];

    if (self.imageView.image == nil)
    {
        UIImage *imageFromCache = [cache objectForKey:self.urlString useDocumentsCache:kUseDocumentsCacheInMainQueue];
        if (imageFromCache)
        {
            if (self.activityIndicator)
            {
                [self.activityIndicator stopAnimating];
                self.activityIndicator = nil;
            }

            self.imageView.image = imageFromCache;
            self.loading = NO;
            self.loaded = YES;
            return;
        }

        if (self.activityIndicator == nil)
        {
            self.activityIndicator = [[UIActivityIndicatorView alloc] initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleGray];
            self.activityIndicator.center = CGPointMake(self.view.frame.size.width / 2.0, self.view.frame.size.height / 2.0);
            [self.view addSubview:self.activityIndicator];
        }
        [self.activityIndicator startAnimating];

        dispatch_async(queue, ^{
            if (self.loading)
            {
                UIImage *image = nil;

                // only requery cache for Documents cache if we didn't do so in the main queue

                if (!kUseDocumentsCacheInMainQueue)
                    image = [cache objectForKey:self.urlString useDocumentsCache:YES];

                // if we haven't gotten the image yet, retrieve it from the remote server

                if (!image)
                {
                    NSData *data = [[NSData alloc] initWithContentsOfURL:[NSURL URLWithString:self.urlString]];

                    if (data)
                    {
                        image = [UIImage imageWithData:data];
                        [cache setObject:image forKey:self.urlString data:data];
                    }
                }

                // now update the UI in the main queue

                dispatch_async(dispatch_get_main_queue(), ^{
                    if (self.loading)
                    {
                        [self.activityIndicator stopAnimating];
                        self.activityIndicator = nil;
                        self.imageView.image = image;
                        self.loading = NO;
                        self.loaded = YES;
                    }
                });
            }
        });
    }
}

- (void)unloadImage
{
    NSLog(@"%s %@", __FUNCTION__, self.urlString);

    // remove from imageview, but not cache

    self.imageView.image = nil;

    self.loaded = NO;
    self.loading = NO;
}

@end

@interface GalleryViewController ()
{
    NSMutableArray *_myImages;
    dispatch_queue_t _queue;
}
@end

@implementation GalleryViewController

- (void)dealloc
{
    if (_queue)
        dispatch_release(_queue);

    [[NSNotificationCenter defaultCenter] removeObserver:self 
                                                    name:UIApplicationDidBecomeActiveNotification
                                                  object:nil];
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];

    // this is not strictly necessary because `NSCache` will automatically
    // evict objects in low memory situations; it will not, though
    // remove items when you try to simulate a low memory situation
    // in the simulator, but it really will empty the cache when
    // memory really runs low
    //
    // ThumbnailCache *cache = [ThumbnailCache sharedManager];
    // [cache removeAllObjects];
}

- (void)viewDidLoad
{
    [super viewDidLoad];

    self.scrollView.delegate = self;

    _queue = dispatch_queue_create("com.robertmryan.imageloader", NULL);

    [self loadImages];

    UITapGestureRecognizer *tap = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(tapHandler:)];
    [self.scrollView addGestureRecognizer:tap];

    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(appDidBecomeActive) name:UIApplicationDidBecomeActiveNotification object:nil];
}

- (void)viewWillLayoutSubviews
{
    NSUInteger imagesPerRow = (self.view.frame.size.width / IMAGE_WIDTH);
    CGFloat imageMargin = (self.view.frame.size.width - (IMAGE_WIDTH * imagesPerRow)) / (imagesPerRow + 1.0);

    NSUInteger row = 0;
    NSUInteger col = -1;

    for (NSUInteger i = 0; i < [_myImages count]; i++)
    {
        col++;
        if (col >= imagesPerRow)
        {
            col = 0;
            row++;
        }

        MyImage *myImage = [_myImages objectAtIndex:i];
        CGRect frame = myImage.view.frame;
        frame.origin.x = imageMargin + (imageMargin + IMAGE_WIDTH) * col;
        frame.origin.y = imageMargin + (imageMargin + IMAGE_HEIGHT) * row;
        myImage.view.frame = frame;
    }

    self.scrollView.contentSize = CGSizeMake(self.scrollView.frame.size.width, (row + 1) * (IMAGE_HEIGHT + imageMargin) + imageMargin);

    [self displayVisibleImages:NO];
}

- (void)viewDidUnload
{
    [self setScrollView:nil];
    _myImages = nil;

    [super viewDidUnload];
}

- (void)viewWillAppear:(BOOL)animated
{
    [super viewWillAppear:animated];

    [self displayVisibleImages:NO];
}

- (void)appDidBecomeActive
{
    [self displayVisibleImages:YES];
}

- (void)displayVisibleImages:(BOOL)forceLoad
{
    CGPoint contentOffset = self.scrollView.contentOffset;
    CGRect  contentFrame  = self.scrollView.bounds;
    contentFrame.origin = contentOffset;

    for (MyImage *myImage in _myImages)
    {
        if (CGRectIntersectsRect(contentFrame, myImage.view.frame))
        {
            // if the image is visible, then make sure it's loaded

            if (!myImage.loaded || forceLoad)
                [myImage loadImage:_queue];
        }
        else
        {
            // if not, go ahead and unload it to conserve memory

            if (myImage.loaded || myImage.loading)
                [myImage unloadImage];
        }
    }
}

- (void)scrollViewDidScroll:(UIScrollView *)scrollView
{
    [self displayVisibleImages:NO];
}

- (void)willAnimateRotationToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration
{
    CGFloat version = [[[UIDevice currentDevice] systemVersion] floatValue];

    if (version < 5.0)
        [self viewWillLayoutSubviews];
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return TRUE;
}

- (void)tapHandler:(UITapGestureRecognizer *)sender
{
    CGPoint location = [sender locationInView:self.scrollView];

    for (MyImage *myImage in _myImages)
    {
        if (CGRectContainsPoint(myImage.view.frame, location))
            NSLog(@"Tapped in image %1d", myImage.view.tag);
    }
}

- (void)loadImages
{

    NSArray *imageUrlStrings = [self loadImageUrls];
    _myImages = [[NSMutableArray alloc] init];

    NSUInteger imagesPerRow = (self.scrollView.frame.size.width / IMAGE_WIDTH);
    CGFloat imageMargin = (self.scrollView.frame.size.width - (IMAGE_WIDTH * imagesPerRow)) / (imagesPerRow + 1.0);

    NSInteger row = 0;
    NSInteger col = -1;

    for (NSUInteger i = 0; i < [imageUrlStrings count]; i++)
    {
        col++;
        if (col >= imagesPerRow)
        {
            col = 0;
            row++;
        }

        MyImage *myImage = [[MyImage alloc] init];
        myImage.urlString = [imageUrlStrings objectAtIndex:i];
        CGRect frame = myImage.view.frame;
        frame.origin.x = imageMargin + (imageMargin + IMAGE_WIDTH) * col;
        frame.origin.y = imageMargin + (imageMargin + IMAGE_HEIGHT) * row;
        myImage.view.frame = frame;
        [self.scrollView addSubview:myImage.view];
        myImage.view.tag = i;

        [_myImages addObject:myImage];
    }

    self.scrollView.contentSize = CGSizeMake(self.scrollView.frame.size.width, (row + 1) * (IMAGE_HEIGHT + imageMargin) + imageMargin);
}

@end 
```

My`ThumbnailCache`只是一个简单的`NSCache`单例对象。（是否将其实现为单例，取决于您；您不必这样做，但考虑到我的应用程序的性质，它很方便。）我已经更新了它以封装二级`Documents`缓存（因此您从远程服务器，缓存在`NSCache`对象中以获得最佳性能，`Documents`如果您想保存程序的后续调用不需要从服务器重新检索图像，则缓存在文件夹中，从而为您提供跨会话的持久缓存）。从理论上讲，这可以（应该？）进行优化，以清除`Documents`长时间未使用的图像文件夹，但我将把它留给其他人来实现。

```
//
//  ThumbnailCache.h
//
//  Created by Robert Ryan on 7/17/12.
//  Modified 8/9/12 to support secondary Documents-based cache.
//

#import <UIKit/UIKit.h>

@interface ThumbnailCache : NSCache

+ (id)sharedManager;

- (id)objectForKey:(id)key useDocumentsCache:(BOOL)useDocumentsCache;
- (void)setObject:(UIImage *)image forKey:(id)key data:(NSData *)data;

@end 
```

和

```
//
//  ThumbnailCache.m
//
//  Created by Robert Ryan on 7/17/12.
//  Modified 8/9/12 to support secondary Documents-based cache.
//

#import "ThumbnailCache.h"

@implementation ThumbnailCache

- (id)init
{
    self = [super init];
    if (self)
    {
        self.name = @"Thumbnail cache";
    }

    return self;
}

+ (id)sharedManager 
{
    static ThumbnailCache *sharedMyManager = nil;
    static dispatch_once_t onceToken;
    dispatch_once(&onceToken, ^{
        sharedMyManager = [[self alloc] init];
    });
    return sharedMyManager;
}

- (id)objectForKey:(id)key
{
    return [self objectForKey:key useDocumentsCache:YES];
}

- (id)objectForKey:(id)key useDocumentsCache:(BOOL)useDocumentsCache
{
    // This is a variation of the standard objectForKey method which takes an additional
    // parameter, useDocumentsCache, which will tell this to also check the Documents
    // cache or not. This is a subtle refinement in case you don't want your main queue
    // to use the Documents cache. Generally, if you're dealing with optimized images,
    // this is not necessary, but if you're dealing with large images, this permutation
    // can be useful.

    // first, just try to get the image from the NSCache

    id result = [super objectForKey:key];

    // if successful (or if we don't want to look in the Documents cache), then just return.

    if (result || !useDocumentsCache)
        return result;

    // otherwise, if we didn't find it in the NSCache and we want to look in our Documents
    // cache, then let's do so

    NSString *path = [self pathInDocumentCache:key];

    if (!result && path)
    {
        // get the data from the remote server

        NSData *data = [NSData dataWithContentsOfFile:path];
        if (data)
        {
            // and if we found it, save it in our NSCache

            UIImage *image = [UIImage imageWithData:data];
            if (image)
                [self setObject:image forKey:key];

            return image;
        }
    }

    return result;
}

- (void)setObject:(UIImage *)image forKey:(id)key data:(NSData *)data
{
    // This is a variation of the standard setObject:forKey which takes an additional NSData.
    // The notion is that our cache stores UIImage objects (to save the theoretical overhead,
    // if any, of loading image data into a NSData and then into a UIImage ... I wouldn't be
    // surprised if Apple did some cool optimization of UIImage objects, though I don't know),
    // so if we want to write our image file, but don't want to convert the UIImage back to
    // a NSData, then let's just take the original NSData as a parameter.

    // save the object in the NSCache

    [super setObject:image forKey:key];

    // now let's also save the NSData in our Documents-based cache

    NSFileManager *fileManager = [NSFileManager defaultManager];
    NSString *path = [self pathInDocumentCache:key];

    if (path && ![fileManager fileExistsAtPath:path])
    {
        // let's create the folder if we need to

        NSString *folder = [path stringByDeletingLastPathComponent];
        if (![fileManager fileExistsAtPath:folder])
            [fileManager createDirectoryAtPath:folder withIntermediateDirectories:YES attributes:nil error:nil];

        // and let's write the NSData to that folder

        [data writeToFile:path atomically:YES];
    }
}

- (NSString *)pathInDocumentCache:(NSString *)key
{
    if (![key isKindOfClass:[NSString class]])
        return nil;

    NSString *docsPath = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0];
    NSString *imagePath = [docsPath stringByAppendingPathComponent:@"image_cache"];
    NSURL *url = [NSURL URLWithString:key];

    return [imagePath stringByAppendingPathComponent:[url relativePath]];
}

@end 
```

如果也没有一些很棒的公开可用的画廊课程，我会感到惊讶，但是如果你想自己动手，上面是一种可能性。

# iphone - 如何分隔 webView 中的页面？

> ID：11697241
> 
> 赞同：0
> 
> 时间：2012-07-28T00:37:09.323
> 
> 标签：iphone, ios, ipad, uiwebview

我下载[了这个](http://zaldzbugz.posterous.com/how-to-search-a-string-inside-uiwebview)例子`UIWebView`来打开文件。

我用它来打开一个 .rtf 文件，但它把文件显示为一个长页，这不是我的目标。我想在 .rtf 文件中显示页面并能够搜索它们。

这个问题有什么解决方案吗？

# reporting-services - Reporting Services：允许图表宽度增加

> ID：11697242
> 
> 赞同：1
> 
> 时间：2012-07-28T00:37:50.673
> 
> 标签：reporting-services, charts, ssrs-2008

我有一个柱形图，我想自动增长而不是缩小条形的大小以适应定义的空间。

有没有办法设置系列的最小宽度？是否有允许宽度根据需要增长的选项？

我知道 Tablix 和 Matrix 会自动增长，所以我希望可以制作一个图表来做同样的事情。

# facebook - 是否可以订阅用户 online_presence 的实时更新？

> ID：11697243
> 
> 赞同：2
> 
> 时间：2012-07-28T00:37:54.447
> 
> 标签：facebook, facebook-graph-api, real-time-updates

我的应用程序有一个搜索功能，您可以在其中根据各种过滤器找到用户。

我最近添加了一个指示器，以便您可以查看用户是否在线。我通过获取 user_online_presence 权限来完成这项工作，然后在过滤结果后，使用存储在我的数据库中的用户 access_token 发出 FQL 请求。

现在，我想做到这一点，这样我就可以根据用户是否登录来过滤搜索。所以，不知何故，我需要将每个用户的在线状态存储在我的数据库中。

这似乎是实时更新的用途，但 Facebook 并未将 online_presence 列为我可以订阅的内容。

在[https://developers.facebook.com/docs/reference/api/realtime/](https://developers.facebook.com/docs/reference/api/realtime/)上，他们说：“您可以订阅除已验证之外的所有用户对象属性。”

但 online_presence 未列为用户字段： [https ://developers.facebook.com/docs/reference/api/user/](https://developers.facebook.com/docs/reference/api/user/)

有没有人试过这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T13:40:15.380

它绝对是用户表的一个字段，否则下面的查询将不起作用。

```
SELECT uid, name, pic_square, online_presence FROM user 
```

但是，它只列在： [https ://developers.facebook.com/docs/reference/fql/user/](https://developers.facebook.com/docs/reference/fql/user/)

而不是： [https ://developers.facebook.com/docs/reference/api/user/](https://developers.facebook.com/docs/reference/api/user/)

遇到此类问题时，我通常会通读两份文档的注释。

然后我发现：“您可以缓存此数据并订阅其任何字段的实时更新，这些字段也是相应 Graph API 版本中的字段。” - Facebook

所以基本上，他们说除非两个链接中都存在该字段，否则它不会起作用。

然后我会尝试在这个问题中找到答案：

[Facebook API 实时好友在线状态更新](https://stackoverflow.com/questions/5295829/facebook-api-real-time-friends-online-presence-update)

我希望这至少可以为您澄清一些事情。祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-14T02:36:11.723

根据我的问题（[https://stackoverflow.com/questions/27222641/fetch-online-presence-for-thousands-of-facebook-app-users](https://stackoverflow.com/questions/27222641/fetch-online-presence-for-thousands-of-facebook-app-users)），上周我直接从 Facebook 听说这是不可能的，并且没有计划使它成为可能。希望这可以帮助。仍在寻找获取此信息的最佳方式。

# python - 将多个文件复制到新文件夹中

> ID：11697245
> 
> 赞同：3
> 
> 时间：2012-07-28T00:38:01.153
> 
> 标签：python, copy

我有一个包含几个文本文件的文件夹。我将如何使用 python 制作每个文件的副本并将副本放在新文件夹中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T10:10:00.797

您可以使用 glob 模块来选择您的 .txt 文件：

```
import os, shutil, glob

dst = 'path/of/destination/directory'
try:
    os.makedirs(dst) # create destination directory, if needed (similar to mkdir -p)
except OSError:
    # The directory already existed, nothing to do
    pass
for txt_file in glob.iglob('*.txt'):
    shutil.copy2(txt_file, dst) 
```

该`glob`模块仅包含 2 个功能：`glob`和`iglob`（[请参阅文档](http://docs.python.org/library/glob.html)）。它们都根据 Unix shell 使用的规则找到与指定模式匹配的所有路径名，但`glob.glob`返回一个列表并`glob.iglob`返回一个生成器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-28T00:47:47.027

```
import shutil
shutil.copytree("abc", "copy of abc") 
```

资料来源：[docs.python.org](http://docs.python.org/library/shutil.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-28T00:46:05.443

我建议看这篇文章：[如何在 python 中复制文件？](https://stackoverflow.com/questions/123198/how-do-i-copy-a-file-in-python)

```
ls_dir = os.listdir(src_path)    
for file in ls_dir:
    copyfile(file, dest_path) 
```

那应该这样做。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-28T00:46:23.600

使用 shutil.copyfile

```
import shutil
shutil.copyfile(src, dst) 
```

# mysql - 构造此数据库表中数据的最佳方法

> ID：11697246
> 
> 赞同：1
> 
> 时间：2012-07-28T00:38:07.050
> 
> 标签：mysql, sql, database, database-design, structure

这是关于我应该设置数据库的最佳方式的一般问题，它不是特定于软件的，而是 MYSQL 的信息。

我正在监视 1000 个“房屋”以及在给定时间该房屋中有多少人，以便以后用于一些统计数据，例如：

哪个房子通常在特定时间范围内最满 总体平均容量 所有房子和特定房子的最繁忙时间框架。

我会检查每小时有多少人在场。

设置这个 mysql 表的最佳方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T00:43:01.197

看起来你会（可选地）想要每个房子的条目（一个房子表来描述每个位置，带有某种 ID）。

然后你会想要一个包含房屋 ID、人数和样本日期/时间的事务表。

这样你就可以分析你需要什么

例如

```
House
   HouseID int
   Address1 varchar
   etc etc..

Attendance
   RecordID int (optional I suppose)
   HouseID int
   People int
   SampleDate datetime 
```

查询平均值之类的东西很容易

```
SELECT AVG(People) FROM Attendance WHERE HouseID = 1 AND SampleDate BETWEEN Date1 AND Date2 
```

在特定时间范围内哪个房子最满

```
SELECT TOP 1 HouseID FROM Attendance GROUP BY HouseID ORDER BY SUM(People) DESC 
```

免责声明：部分/所有这些查询可能不起作用:)

编辑：他们确实有效！这是一个 SQL 小提琴，展示了它们的实际应用

[http://sqlfiddle.com/#!3/293e4/8](http://sqlfiddle.com/#!3/293e4/8)

# design-patterns - 用于建模内容链接和关系的设计模式

> ID：11697252
> 
> 赞同：0
> 
> 时间：2012-07-28T00:39:16.767
> 
> 标签：design-patterns, model, playframework, playframework-1.x

我在数据库中有一个大文本，它具有三个主要组成部分：整个文本、构成正文的段落以及每个段落中的单词（标记）。

对于这三个组件中的每一个，都会有一定的相关链接内容。例如，每个段落都会有一个其他文本内容列表，讨论从许多资源（学术著作、当代思想等）收集的段落的同一主题。我想设计一个游戏框架模型来模拟这 3 个组件之间的这种关联有自己的相关内容类别（学术著作、当代思想等）

如何设计一个干净的 playframework 1.x 模型，以反映从主要文本到其段落到每个段落的标记以及与相关文本内容类别的关联的粒度基础中的这种链接。我确信有一些很好的设计模式可以对这种情况进行建模。有人可以建议我一个干净的解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T10:35:32.427

我建议您将文本完整存储一次，然后使用灵活的类层次结构来索引内容。

我只在特殊的地方放置了 Hibernate 注释。

您创建一个容器来保存文本本身和部件对象：

```
public class DocumentContainer extends Model {
    // Column definition depends on the DB, here: MySQL
    @Column(columnDefinition="LONGTEXT")
    public String text;

    public Set<DocumentPart> documentParts;
} 
```

文档的一部分定义在文本的某个区域上，属于某种类型，可以引用文档的其他部分：

```
@Entity
@Inheritance(strategy=InheritanceType.JOINED)
@DiscriminatorColumn(name="partType")
public class DocumentPart extends Model {

    Document document;

    // indices over the documents text for this part
    int startIndex;
    int endIndex;

    @Enumerated(EnumType.STRING)
    PartType partType;

    Set<DocumentPart> referencedParts;
}

public enum PartType {
    DOCUMENT, PARAGRAPH, TOKEN
} 
```

一个段落将是，例如：

```
@Entity
@DiscriminatorValue("PARAGRAPH")
public class Paragraph extends DocumentPart {
     Set<Token> tokens;
} 
```

通过这种方式，您可以灵活地确定文档上的区域类型，并且可以保留整个文档（包括标点符号等）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T07:59:49.160

从你写的，你可以去...

```
@Entity
public class Document extends Model {
    public List<Paragraph> paragraphs;
} 
```

    @Entity public class Paragraph extends Model { public List words; 公开列表引用；}

```
@Entity
public class Citation extends Model {
    public String type;
    public URL linkedResource; // is resource external?
    public List<Document> // is resource internal to this system?
} 
```

您不清楚引文的联系，所以我给出了 2 个选项。您可以选择其中一个，也可以同时选择两者。

# php - 将行号和奇/偶类添加到 php 表

> ID：11697256
> 
> 赞同：2
> 
> 时间：2012-07-28T00:40:11.113
> 
> 标签：php, mysql

> **可能重复：**
> [php：如何在数组中添加奇数/偶数循环](https://stackoverflow.com/questions/1403213/php-how-to-add-odd-even-loop-in-array)

我正在使用以下代码在 php 中生成一个表。

```
<?PHP
while ($row = $mydata->fetch())
{
  $tests[] = array(
  'a' => $row['a'], 
  'b' => $row['b']
  )
  ;
}

?> 
```

然后输出代码

```
<table>
  <tbody>
  <tr><th>#</th><th>a</th><th>b</th></tr>
  <?php foreach ($tests as $test): ?>
    <tr class="">
        <td></td>
        <td><?php htmlout($test['a']); ?></td>
        <td><?php htmlout($test['b']); ?></td>
    </tr>
<?php endforeach; ?>
  </tbody>
  </table> 
```

哪个输出

```
<table>
  <tbody>
  <tr><th>#</th><th>a</th><th>b</th></tr>
    <tr class="">
        <td></td><td>a content</td><td>b content</td>
    </tr>
    <tr class="">
        <td></td><td>a content</td><td>b content</td>
    </tr>
  </tbody>
  </table> 
```

htmlout 是下面的自定义函数。

```
<?php
function html($text)
{
return htmlspecialchars($text, ENT_QUOTES, 'UTF-8');
}
function htmlout($text)
{
echo html($text);
}
?> 
```

这一切都很好，但我无法在这里解决两件事。

1.  我希望我的行在`<tr class="odd">`备用`<tr class="even">`行上生成
2.  我希望计数中的第一个`<td></td>`显示`<tr>`数据的行号，例如第二个`<td>1</td>`中的第一个`<tr class=""> <td>2</td>`等。

我看过很多这样的例子

```
$count = 1;
while ($count <= 10)
{
echo "$count ";
++$count;
} 
```

但是无法弄清楚如何将其实施到我的示例中，或者我应该使用另一种方法。我知道我可以在 jQuery 和一些使用 css3 的浏览器中做表格行，但在这种情况下更喜欢 php 解决方案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-28T00:44:20.983

你可以使用这样的东西：

```
<?php foreach ($tests as $i => $test): ?>
    <?php $class = ($i % 2 == 0) ? 'even' : 'odd'; ?>
    <tr class="<?php echo $class; ?>">
        <td><?php echo $i + 1; ?></td>
        <td><?php htmlout($test['a']); ?></td>
        <td><?php htmlout($test['b']); ?></td>
    </tr>
<?php endforeach; ?> 
```

这利用了数组保留数字索引的事实`$i`。所以，行号是真的`$i + 1`，我们把它放在第一列。然后，我们根据是否`$i`能被 2 整除来判断当前行是偶数还是奇数。如果`$i`能被 2 整除，则为偶数行，否则为奇数行。我们将类字符串保存在 中`$class`，并将其放入`<tr>`标签中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T00:45:43.887

您需要做的就是添加一个循环计数器。

```
<?php $counter = 0 ?>
<table>
  <tbody>
  <tr><th>#</th><th>a</th><th>b</th></tr>
  <?php foreach ($tests as $test): ?>
    <tr class="<?= ($counter % 2 == 0) ? 'even' : 'odd' ?>">
        <td><?php echo ($counter+1) ?></td>
        <td><?php htmlout($test['a']); ?></td>
        <td><?php htmlout($test['b']); ?></td>
    </tr>
    <?php $counter++ ?>
<?php endforeach; ?>
  </tbody>
  </table> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-28T00:47:37.877

解决这个问题的最简单方法可能是从 foreach 语句切换到 for 循环。在计数器上使用模数运算符应该很适合您。

```
<table>
  <tbody>
  <tr><th>#</th><th>a</th><th>b</th></tr>
  <?php for( $counter = 0; $counter < count( $tests ); $tests++ ): ?>
    <tr class="<? ( $counter % 2 ) ? echo "even" : echo "odd"; ?>">
        <td><? echo $counter + 1; ?></td>
        <td><?php htmlout($tests[$counter]['a']); ?></td>
        <td><?php htmlout($tests[$counter]['b']); ?></td>
    </tr>
<?php endfor; ?>
  </tbody>
  </table> 
```

# c++ - `cache_line_align_`的作用是什么，它有什么好处呢？

> ID：11697260
> 
> 赞同：0
> 
> 时间：2012-07-28T00:41:24.947
> 
> 标签：c++

在高性能计算环境中，我看到如下代码：

```
typedef union
{
  erts_smp_rwmtx_t rwmtx;
  byte  cache_line_align_[ERTS_ALC_CACHE_LINE_ALIGN_SIZE(sizeof(erts_smp_rwmtx_t))];
}erts_meta_main_tab_lock_t;

erts_meta_main_tab_lock_t    main_tab_lock[16]; 
```

上面的`cache_line_align_`出现是做什么的？为什么有用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T01:13:30.103

在创建具有多线程的程序时，程序的两个部分可能会尝试访问内存中在共享内存系统中彼此相邻的对象/原语。

不幸的是，如果两块内存在同一高速缓存行上，则计算机硬件不能**同时**将一块内存提供给一个处理器，而将另一块内存提供给不同的处理器。

这个陷阱被称为[虚假共享](http://en.wikipedia.org/wiki/False_sharing)。

为了克服这个问题，我们可以在所讨论的内存位置（变量）之间添加一个空间缓冲区。

除了将我们想要的变量分散在内存中之外，该空间缓冲区绝对没有任何作用。

可能有一些非多线程程序已经针对缓存性能进行了优化，您可以在其中看到一些类似的技巧，但在这种情况下，您通常希望您将访问的变量尽可能靠近，以便它们都适合相同缓存行。

# django - MongoDB 的 GridFS 是否有最小文件大小要求？

> ID：11697262
> 
> 赞同：0
> 
> 时间：2012-07-28T00:41:38.217
> 
> 标签：django, mongodb

有时我会生成空文件（在 Linux 上大小 = 0），但它们是插入 MongoDB 文件存储所必需的。

我使用 Django 的`models.FileField`，但我想排除它，因为我认为它已被接受（真的不能太确定），并被发送到插入 MongoDB。知道它是否具有最小文件大小吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T06:28:55.543

GridFS 没有最小文件大小 .. 这很容易使用`mongofiles`命令行实用程序进行测试：

```
$ touch foo
$ mongofiles put foo
connected to: 127.0.0.1
added file: { _id: ObjectId('501385ebf51e4d7d24554d5b'), filename: "foo", chunkSize: 262144, uploadDate: new Date(1343456747050), md5: "d41d8cd98f00b204e9800998ecf8427e", length: 0 }
done!
$ mongofiles list
connected to: 127.0.0.1
foo 0 
```

# android - 在我已经上传免费应用之后再上传付费应用？

> ID：11697263
> 
> 赞同：0
> 
> 时间：2012-07-28T00:41:48.263
> 
> 标签：android

在我使用他们的软件后，我让 appmakerstore 帮我上传了我的应用程序。到了发布我的应用程序的时候，appsmakerstore 从来没有问我是否想给它定价，只是把它上传到免费应用程序下。现在google play在设置收费后告诉我，然后我无法定价。他们说我必须用新名称上传一个新的 apk，我不知道该怎么做。请问有什么建议吗？我不希望任何人免费上传我的应用程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T00:51:25.050

您可以做的最好的事情是取消发布该免费应用程序，然后像他们说的那样以不同的名称重新加载您的定价应用程序。Google 不允许您将免费应用程序更改为付费版本，这样您就不会让消费者误以为该应用程序拥有庞大的付费用户群。

# salesforce - 如何构建总和报告以提供 Salesforce 油量表仪表板？

> ID：11697264
> 
> 赞同：0
> 
> 时间：2012-07-28T00:41:49.387
> 
> 标签：salesforce, dashboard

我正在尝试构建我认为将是一个简单的报告来提供 salesforce 气表仪表板组件。

最终目标是有一个目标量（很容易在电量计组件的格式化参数中设置），该目标量基于封闭机会中“数量”字段的总和来移动指针。

无论我如何对报告进行分组，燃气表本身的“组件数据”选项卡中的值的唯一选项是：自动、平均年龄和记录计数……对于我正在尝试做的事情来说，这一切都毫无用处。我真正想要使用的是总量……一笔。

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T02:19:41.343

仪表板上可用的组基于报告中的汇总字段。

听起来您的报告总结了年龄（和标准记录计数），但没有涉及金额字段的摘要。

转到您的报告并汇总“金额”字段。您可以通过单击“金额”列旁边的向下箭头并选择“汇总此字段”来执行此操作。总结后，它应该作为一个选项出现在您的量表上。

# ruby-on-rails-3 - Rails (3.2.7)：覆盖asset_host的image_tag

> ID：11697266
> 
> 赞同：6
> 
> 时间：2012-07-28T00:41:57.270
> 
> 标签：ruby-on-rails-3, overriding, asset-pipeline, rails-api

**开发.rb：**

```
config.action_controller.asset_host = "assets.myserver.com" 
```

**查看脚本：**

```
<%= image_tag('header.jpg') %> 
```

**产量：**

```
<img alt="Header" src="/header.jpg" /> 
```

**应该：**

```
<img alt="Header" src="http://assets.myserver.com/header.jpg" /> 
```

我正在使用`rails-api`我猜想禁用某些资产和查看渲染内容的 gem。

似乎重新实现（覆盖`image_tag`）以添加这个非常小的功能应该不会太难。想要这样做似乎有点奇怪。但是，我对 Rails 很陌生，想知道如何将其作为学习经验。

问题：

1.  作为最佳实践，我应该将此新代码放在文件结构中的哪个位置？
2.  我应该用新代码命名文件吗？
3.  rails 如何知道查看新代码而不是查看旧的 image_tag 函数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T15:32:02.433

我已经尝试过您的配置，但是当我按预期`config.action_controller.asset_host = "assets.myserver.com"`在我的作品中使用时：`development.rb` `image_tag`

```
<img alt="Header" src="http://assets.myserver.com/assets/header.jpg" /> 
```

我已经在 Rails 3.2.7 和 3.2.8 下对其进行了测试，但它在两个版本中都有效。

**更新**

在我原来的答案中，我没有使用`rails-api`宝石。使用`rails-api`gem时`image_tag`，如问题中所述。

为了回答实际问题，您可以在`config/initializers`. 只需`image_tag_helper.rb`使用以下代码创建一个文件：

```
# config/initializers/image_tag_helper.rb
module ActionView
  module Helpers
    module AssetTagHelper
      def image_tag(source, options = {})
        options[:src] = "http://#{source}"
        tag("img", options)
      end
    end
  end
end 
```

这基本上是重新打开模块并`image_tag`用您自己的方法替换该方法。中的所有其他方法`module AssetTagHelper`保持不变。[查看github](https://github.com/rails/rails/blob/e826a5c749f9a4029a3b2a7e3d371498feeb9b10/actionpack/lib/action_view/helpers/asset_tag_helper.rb#L356)上的 Rails存储库以获取该方法的完整“示例” `image_tag`。

文件的名称并不重要。`config/initializers`启动应用程序时会加载其中的所有文件。

基本上这是 Ruby 的一个语言特性，Ruby 允许您在代码中的任何地方重新打开类并添加或替换方法（您可以在[ruby​​learning.com](http://rubylearning.com/satishtalim/ruby_overriding_methods.html)找到有关此主题的更多信息）。

# c# - MVC 代码结构化最佳实践问题

> ID：11697267
> 
> 赞同：1
> 
> 时间：2012-07-28T00:42:11.727
> 
> 标签：c#, asp.net-mvc, agile

我试图改进我的代码结构，所以也许我可以就以下几点和有关如何处理主要服务的问题获得一些输入。

1.  服务不应该依赖于表示层，因此通过构造函数将诸如 httpcontext 之类的东西传递给服务/服务函数是一种不好的做法，对吗？

2.  不应该让服务相互引用吗？他们应该只像存储库依赖那样“向下”工作吗？还是认为可以？

3.  服务是否只包含与过滤和处理来自数据库/存储库的信息直接相关的功能，或者是否可以考虑例如一个专门用于加密和生成随机字符串/密码的类或一个依赖方功能的类处理提供程序？或者他们/一个可能会被认为是实用程序类？

4.  是否有一种良好且可接受的方式来操作服务内的会话，或者应该将其传递给控制器​​并在那里处理？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T03:31:39.933

> 服务不应该依赖于表示层，因此通过构造函数将诸如 httpcontext 之类的东西传递到服务/服务函数中是一种不好的做法，正确

如果可以避免，请避免。但这取决于，如果它是表示层的服务，那么它就可以了。

> 不应该让服务相互引用吗？他们应该只像存储库依赖那样“向下”工作吗？还是认为可以？

如果可以避免，请避免。这取决于你的架构，例如，如果你在 asp.net mvc 中工作，你会很好地避免这种情况，并保持在[控制器](http://www.asp.net/mvc/tutorials/controllers-and-routing/asp-net-mvc-controller-overview-vb)级别编排多个服务的代码类型

> 服务是否只包含与过滤和处理来自数据库/存储库的信息直接相关的功能，或者是否可以考虑例如一个专门用于加密和生成随机字符串/密码的类或一个依赖方功能的类处理提供程序？或者他们/一个可能会被认为是实用程序类？

您可以使用服务来过滤和处理来自数据库/存储库的信息，也可以创建一个专门用于加密和生成随机字符串/密码的服务。服务是类，因此遵循[单一职责原则很重要](http://en.wikipedia.org/wiki/Single_responsibility_principle)

> 是否有一种良好且可接受的方式来操作服务内的会话，或者应该将其传递给控制器​​并在那里处理？

如果您的服务是无状态的，则更好地进行扩展，但是如果您将不得不处理会话或其他生命周期的东西，并且您正在使用 .net 构建 Web 系统，那么您可以做的最好的事情就是使用 asp.net mvc，与[Unity](http://unity.codeplex.com/)集成，以便您获得[控制反转，这样您就可以使用](http://martinfowler.com/articles/injection.html)[生命周期管理器](http://msdn.microsoft.com/en-us/library/ff660872%28v=pandp.20%29.aspx)处理会话

# html - 带填充的嵌套引导布局

> ID：11697271
> 
> 赞同：9
> 
> 时间：2012-07-28T00:43:34.260
> 
> 标签：html, layout, twitter-bootstrap

如何在其中一个部分中创建带有填充的嵌套 Bootstrap 布局？

下面是一个插图。如果我用 包装`#main-container`在 Bootstrap div 中`.span12`，它可以工作。但这意味着`#main-content`现在比`.span12`宽度薄 40 像素，这意味着我不能在其中使用 Boostrap 网格。（例如，制作`#left-column`a`.span9`和`#right-column`a会很棒`.span3`，但我不能。）

有没有更好的方法来创建这个布局？

![布局图](../Images/281a2721f54b60ad3357f4425eda494e.png)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-28T01:20:40.170

我认为这真的取决于你想用填充实现什么。

例如，如果您想要填充提供的空间中的背景，那么您肯定需要一个实际的填充。**但**另一方面，如果你只想要一些间距，你应该能够坚持原来的网格（给`.span`孩子们而不是他们的容器留出边距）。

根据您的布局，流体解决方案显然更具适应性且更易于实施。

利用填充元素内的流体网格：[Demo (jsfiddle)](http://jsfiddle.net/Sherbrow/u6SPr/embedded/result/)

```
<div class="container">
    <div class="row">
        <div class="span12" id="header">#header</div>
    </div>
    <div id="main-container">
        <div class="row-fluid">
            <div class="span12" id="main-content">#main-content</div>
        </div>
        <div class="row-fluid">
            <div class="span9" id="left-column">#left-column</div>
            <div class="span3" id="right-column">#right-column</div>
        </div>
    </div>
</div> 
```

**更新**添加了更明确的边框和背景：[边框演示（jsfiddle）](http://jsfiddle.net/Sherbrow/u6SPr/1/embedded/result/)

```
#main-container {
    padding: 20px;
    border: 3px solid red;
    background: yellow;
}
#main-container > .row-fluid { background: white; } 
```

# rake - rake db:migrate 失败并出现以下跟踪

> ID：11697272
> 
> 赞同：0
> 
> 时间：2012-07-28T00:43:36.320
> 
> 标签：rake

有人可以告诉我如何理解这个 rake 跟踪并指出我解决这个问题的正确方向吗？我尝试执行 rake db:migrate，然后收到一条错误消息“rake aborted！无法加载此类文件 -- ruby​​/debug/ide'。

我确保我安装了 ruby​​-debug-ide gem，运行 bundle install，并确保我在 rvm 中使用了正确的 ruby​​ 版本。当我运行跟踪时，这就是我得到的：

```
rake aborted!
cannot load such file -- ruby/debug/ide
/home/dso/.rvm/gems/ruby-1.9.3-p125@cams/gems/bundler-1.1.5/lib/bundler/runtime.rb:74:in `require'
/home/dso/.rvm/gems/ruby-1.9.3-p125@cams/gems/bundler-1.1.5/lib/bundler/runtime.rb:74:in `rescue in block in require'
/home/dso/.rvm/gems/ruby-1.9.3-p125@cams/gems/bundler-1.1.5/lib/bundler/runtime.rb:62:in `block in require'
/home/dso/.rvm/gems/ruby-1.9.3-p125@cams/gems/bundler-1.1.5/lib/bundler/runtime.rb:55:in `each'
/home/dso/.rvm/gems/ruby-1.9.3-p125@cams/gems/bundler-1.1.5/lib/bundler/runtime.rb:55:in `require'
/home/dso/.rvm/gems/ruby-1.9.3-p125@cams/gems/bundler-1.1.5/lib/bundler.rb:119:in `require'
/home/dso/rails_projects/cams/src/config/application.rb:13:in `<top (required)>'
/home/dso/rails_projects/cams/src/Rakefile:5:in `require'
/home/dso/rails_projects/cams/src/Rakefile:5:in `<top (required)>'
/home/dso/.rvm/gems/ruby-1.9.3-p125@cams/gems/rake-0.9.2.2/lib/rake/rake_module.rb:25:in `load'
/home/dso/.rvm/gems/ruby-1.9.3-p125@cams/gems/rake-0.9.2.2/lib/rake/rake_module.rb:25:in `load_rakefile'
/home/dso/.rvm/gems/ruby-1.9.3-p125@cams/gems/rake-0.9.2.2/lib/rake/application.rb:501:in `raw_load_rakefile'
/home/dso/.rvm/gems/ruby-1.9.3-p125@cams/gems/rake-0.9.2.2/lib/rake/application.rb:82:in `block in load_rakefile'
/home/dso/.rvm/gems/ruby-1.9.3-p125@cams/gems/rake-0.9.2.2/lib/rake/application.rb:133:in `standard_exception_handling'
/home/dso/.rvm/gems/ruby-1.9.3-p125@cams/gems/rake-0.9.2.2/lib/rake/application.rb:81:in `load_rakefile'
/home/dso/.rvm/gems/ruby-1.9.3-p125@cams/gems/rake-0.9.2.2/lib/rake/application.rb:65:in `block in run'
/home/dso/.rvm/gems/ruby-1.9.3-p125@cams/gems/rake-0.9.2.2/lib/rake/application.rb:133:in `standard_exception_handling'
/home/dso/.rvm/gems/ruby-1.9.3-p125@cams/gems/rake-0.9.2.2/lib/rake/application.rb:63:in `run'
/home/dso/.rvm/gems/ruby-1.9.3-p125@cams/gems/rake-0.9.2.2/bin/rake:33:in `<top (required)>'
/home/dso/.rvm/gems/ruby-1.9.3-p125@cams/bin/rake:19:in `load'
/home/dso/.rvm/gems/ruby-1.9.3-p125@cams/bin/rake:19:in `<main>'
/home/dso/.rvm/gems/ruby-1.9.3-p125@cams/bin/ruby_noexec_wrapper:14:in `eval'
/home/dso/.rvm/gems/ruby-1.9.3-p125@cams/bin/ruby_noexec_wrapper:14:in `<main>' 
```

任何帮助将不胜感激。提前感谢所有回复的人！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T18:24:58.977

请以最谦虚的歉意忽略这个问题。在 GemFile 中发现问题。另一位开发人员对导致问题的 GemFile 进行了更改。为一个新项目参加 Rails 速成课程 :-)

# python - 迭代未知维度的numpy矩阵

> ID：11697274
> 
> 赞同：4
> 
> 时间：2012-07-28T00:44:08.557
> 
> 标签：python, matrix, numpy, enumerate

我有一个要迭代的多维 numpy 数组。我不仅希望能够访问这些值，还希望能够访问它们的索引。很遗憾，

```
for idx,val in enumerate(my_array): 
```

当 my_array 是多维时似乎不起作用。（我希望 idx 成为一个元组）。嵌套的 for 循环可能会起作用，但直到运行时我才知道数组的维数，而且我知道它不适合 python。我可以想到很多方法来做到这一点（递归、自由使用 % 运算符），但这些方法看起来都不是很“python 式”。有简单的方法吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-28T00:49:20.357

我想你想要[ndenumerate](http://docs.scipy.org/doc/numpy/reference/generated/numpy.ndenumerate.html)：

```
>>> import numpy
>>> a = numpy.arange(6).reshape(1,2,3)
>>> a
array([[[0, 1, 2],
        [3, 4, 5]]])
>>> list(numpy.ndenumerate(a))
[((0, 0, 0), 0), ((0, 0, 1), 1), ((0, 0, 2), 2), ((0, 1, 0), 3), ((0, 1, 1), 4), ((0, 1, 2), 5)] 
```

# git - git hub 项目版本检索

> ID：11697275
> 
> 赞同：1
> 
> 时间：2012-07-28T00:44:20.500
> 
> 标签：git, github, csrf, owasp

我正在尝试处理 git hub 项目源代码：

[https://github.com/esheri3/OWASP-CSRFGuard](https://github.com/esheri3/OWASP-CSRFGuard)

然而，我正在使用的 jar 的清单看起来像这样：

```
Manifest-Version: 1.0
Ant-Version: Apache Ant 1.8.2
Created-By: 1.6.0_22-b04-307-10M3261 (Apple Inc.)
Project-Lead: Eric Sheridan (eric.sheridan@owasp.org)
Version: 3.0.0.503 
```

我从该站点获得的最新 jar 的清单如下所示：

```
Manifest-Version: 1.0
Ant-Version: Apache Ant 1.8.3
Created-By: 1.6.0_16-b01 (Sun Microsystems Inc.)
Project-Lead: Eric Sheridan (eric@infraredsecurity.com)
Version: 3.0.0.591 
```

我想知道如何检索创建具有第一个清单编号的 jar 的整个代码库： 3.0.0.503 不是最新的源代码，而是过去的版本；这样我就可以根据需要在我的系统上构建和修改。

我认为颠覆要容易得多。请注意，我已经在我的系统上克隆了 git 项目。系统信息：Windows 7, 64 bit msysgit 1.7.10 git extensions installed

任何指针将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T01:08:07.570

该项目选择不使用 git 标记版本。特定“版本”的唯一标志是更新名为 Owasp.CsrfGuard/build.number 的文件

所以理论上你需要阅读这个文件的历史记录（例如使用 git log）来查看该文件中的内部版本号何时设置为 503，然后让 git 检查整个树的特定版本。

这取决于项目所有者他们如何管理版本号，他们本可以在颠覆中使事情变得同样困难。在这个特定项目的情况下，似乎没有押韵或理由。github 历史从 499 直接跳到 504。所以我猜可能除了某些开发人员的本地硬盘上之外，构建 503 根本就不存在，这意味着他们实际上根本没有进行正式的版本控制——只是一个临时代码下载到 github。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T01:02:13.103

不幸的是，我找不到版本 503，但我确实找到了 504。祝你好运！

如果您运行以下命令，您应该能够获得 504 版本的代码。

```
git checkout 04b240c1874c2176cab5fbc662a9676b085d7f1e 
```

* * *

来源：使用 github blame 查看版本何时更改。 [责备](https://github.com/esheri3/OWASP-CSRFGuard/commits/master/Owasp.CsrfGuard/build.number)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-28T01:02:29.127

找到创建该文件的提交。在 Github 中这很容易，因为每个文件都显示了更改它的最新提交。您可以单击该提交并获取 SHA1。

然后，您可以使用该 SHA1 在该特定提交处签出代码：

```
$ git checkout SHA1 
```

# android - 读取安卓数据库。第一次要求价值并存储。如果插入了值，则在下一个活动中显示它

> ID：11697278
> 
> 赞同：0
> 
> 时间：2012-07-28T00:45:13.917
> 
> 标签：android, database

这个问题有点类似于我的共享偏好问题，只是它涉及到 android 数据库。我想在他第一次启动应用程序时将一个人的工资存储在数据库中。他第二次启动它时，他存储的工资将在下一个活动中以 textview 的形式查看。

我大致知道如何跳过工资的提示，但不确定数据库。我的问题是，我如何从数据库中读取工资不为空并将其显示在下一个活动中？我知道它以某种方式涉及一个 if else 语句，例如>>（如果薪水/数据库不为空，则开始意图以 textview 进行下一个活动），但不确定如何对其进行编码。

（SavingsGuiderMenuActivity 包含一个指向 SavingsGuiderAppActivity 的链接，该链接询问薪水（目标），然后将显示到 SavingsGuiderInserActivity 活动。意味着用户只能访问一次 SavingsGuiderAppActivity，下次启动它时，从 SavingsGuiderMenuActivity 将直接转到 SavingsGuiderInsertActivity )

以下是我的代码 SavingsGuiderMenuActivity：

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.menu);

    Bundle bundle = getIntent().getExtras();
    String name= bundle.getString("name"); 
```

TextView resultView = (TextView)findViewById(R.id.view_Name);

```
 resultView.setText("Welcome " + name);

    ListView menuList = (ListView) findViewById(R.id.ListView_Menu);
    String[] items = { getResources().getString(R.string.start),
            getResources().getString(R.string.about),
            getResources().getString(R.string.help) };
    ArrayAdapter<String> adapt = new ArrayAdapter<String>(this, R.layout.menu_item, items);
    menuList.setAdapter(adapt);
    menuList.setOnItemClickListener(new AdapterView.OnItemClickListener() {
        public void onItemClick(AdapterView<?> parent, View itemClicked, int position, long id) {
            // Note: if the list was built "by hand" the id could be used.
            // As-is, though, each item has the same id
            TextView textView = (TextView) itemClicked;
            String strText = textView.getText().toString();
            if (strText.equalsIgnoreCase(getResources().getString(R.string.start))) {
                if(!dataExists())
                {
                    startActivity(new Intent(SavingsGuiderMenuActivity.this, SavingsGuiderAppActivity.class));
                }
                 else
                 {
                    Intent intent = new Intent(SavingsGuiderMenuActivity.this, SavingsGuiderInsertActivity.class);
                    Bundle extras = new Bundle();
                    extras.putDouble("target",double_target);
                    extras.putInt("interval",int_interval);
                    intent.putExtras(extras);
                    startActivity(intent);                 
                 }
               SavingsGuiderMenuActivity.this.finish();
           }                
            else if (strText.equalsIgnoreCase(getResources().getString(R.string.help))) {
                // Launch the Help Activity
                startActivity(new Intent(SavingsGuiderMenuActivity.this, SavingsGuiderHelpActivity.class));
            } 

            else if (strText.equalsIgnoreCase(getResources().getString(R.string.about))) {
                // Launch the Settings Activity
                startActivity(new Intent(SavingsGuiderMenuActivity.this, SavingsGuiderAboutActivity.class));
            } 
        }//onitem click
    });   
            }//bundle

public boolean dataExists()
{

    DBAdapter dbAdaptor = new DBAdapter(getApplicationContext());       
    Cursor cursor = null;

        dbAdaptor.open();       
        cursor = dbAdaptor.getAllSavings();

            if(cursor.moveToFirst())
            {
                double_target = cursor.getDouble(1);
                int_interval = cursor.getInt(2);
                return true;
            }
            else
            {
                return false;
            }

} 
```

以下是我的代码 SavingsGuiderAppActivity：

```
public class SavingsGuiderAppActivity extends SavingsActivity {
/** Called when the activity is first created. */

String tag = "Savings Guider";
EditText targetEdit, intervalEdit;
Button insertButton = null;

protected void onCreate(Bundle savedInstance) {
    super.onCreate(savedInstance);
    setContentView(R.layout.app);
    targetEdit=(EditText)findViewById(R.id.edit_target);
    intervalEdit=(EditText)findViewById(R.id.edit_interval);
    insertButton = (Button) findViewById(R.id.btn_submit);

    insertButton.setOnClickListener(new OnClickListener(){

        public void onClick(View v)
        {
            DBAdapter dbAdaptor = new DBAdapter(getApplicationContext());
            try{
                dbAdaptor.open();

                String target = targetEdit.getText().toString();                    
                String interval = intervalEdit.getText().toString();

                if(!target.equals("") && !interval.equals("")) {

                    try{

                    double target2 = Double.parseDouble(target);                    
                    int interval2 = Integer.parseInt(interval);
                    dbAdaptor.insertSavings(target2, interval2);
                    }
                    catch (NumberFormatException e) {
                        Context context = getApplicationContext();
                        CharSequence text = "Please enter valid value!";
                        int duration = Toast.LENGTH_SHORT;
                        Toast toast = Toast.makeText(context, text, duration);
                        toast.show();
                    }
                }                   

                else {
                    Context context = getApplicationContext();
                    CharSequence text = "Please do not leave any field blank!";
                    int duration = Toast.LENGTH_SHORT;
                    Toast toast = Toast.makeText(context, text, duration);
                    toast.show();
                }
            }
            catch(Exception e){
                Log.d("Savings Guider: ",e.getMessage());
            }
            finally{
                if(dbAdaptor != null)
                    dbAdaptor.close();
            }
        }
    });
}
} 
```

下面是我的 SavingsGuiderInsertActivity 代码。我觉得从 theSavingsGuiderAppActivity 页面显示我在数据库中插入的数据有问题。就像我不应该使用 Bundle Extras 一样：

```
public class SavingsGuiderInsertActivity extends SavingsActivity {
/** Called when the activity is first created. */

String tag = "Savings Guider";
DecimalFormat df = new DecimalFormat("#.##");

protected void onCreate(Bundle savedInstance) {
    super.onCreate(savedInstance);
    setContentView(R.layout.insert);

    Bundle bundle = getIntent().getExtras();
    double target= bundle.getDouble("target");
    int interval= bundle.getInt("interval"); 
```

TextView targetView = (TextView)findViewById(R.id.view_target); TextView intervalView = (TextView)findViewById(R.id.view_interval);

```
 targetView.setText("$" + target);
    intervalView.setText("" + interval);

    double average = target/interval;

    TextView averageView = (TextView)findViewById(R.id.viewAverage);
    averageView.setText("You must save $" + df.format(average) + " everytime!");

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T03:20:23.060

你可以这样做。

1.  在第一次启动期间创建一个数据库表，但该表将为空。

2.  检查表是否为空，什么也不做。否则从数据库中获取数据并显示它们。

**您可以使用SQLiteOpenHelper**管理 Android 数据库。

为了检查表是否为空，您可以执行以下操作

```
 public boolean isSalaryTableNotEmpty() {
      String sql = "SELECT COUNT(*) FROM SALARY_TABLE";
      Cursor cursor = database.rawQuery(sql, null);
      if(!cursor.moveToFirst()) {
          return false;
      }
      int count = cursor.getInt(0);
      cursor.close();
      return count > 0;
  } 
```

# eclipse - 在 $PATH 中找不到程序“nvcc”

> ID：11697286
> 
> 赞同：0
> 
> 时间：2012-07-28T00:46:33.463
> 
> 标签：eclipse, ubuntu, cuda, nvcc, nsight

并且在启动外部扫描仪信息生成器时出现 4x 错误（nvcc -dryrun -G -g -O0 .....）

我为 ubuntu 12.04 安装了 cuda 工具包 5，还安装了 gtx580 的开发驱动程序

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T19:30:26.147

您如何启动 nsight？要启动 Nsight，您需要从正确配置的 shell 执行 /usr/local/cuda/bin/nsight（在 $PATH 上有 nvcc 的那个）

最终工具包具有更新 PATH 的固定启动脚本。

# javascript - Javascript E4X - 返回节点及其子节点的文本？

> ID：11697287
> 
> 赞同：1
> 
> 时间：2012-07-28T00:46:48.057
> 
> 标签：javascript, e4x

我正在尝试解析一些有重复代码行的html，例如：

```
<a>This is <span>some text</span> but its <span>not grabbing the span</span> content</a> 
```

所以我遍历对象并提取它：

```
object.a[i].text(); 
```

但它唯一的回报

```
"This is  but its  content" 
```

如何将子节点中的文本也作为一个字符串抓取？

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T01:00:22.637

我不知道 E4X，但我可以假设纯 JavaScript 没问题吗？

`textContent` [在版本 9 之前似乎对 IE 没有很好的兼容性](http://www.quirksmode.org/dom/w3c_html.html)。这在可用时 `textContent`有效。但是我没有 IE8，所以我无法使用它进行测试，但这应该也可以。

```
var obj = (!object.a[i].innerText) ? object.a[i].textContent : object.a[i].innerText; 
```

* * *

这在客户端实现中有效，但由于它在您的实现中不起作用，我猜您将需要更具体的设置；不幸的是，我在那里无能为力。然而，我会再给它一个纯粹的 JS 刺。这会遍历 object.a[i] 的每个子节点，确定它是 textNode 还是 elementNode，并分别拉取数据或 innerHTML。

```
var doesThisWork = '';
var children = object.a[i].childNodes;
for(x in children){
doesThisWork += (children[x].nodeType === 1) ? children[x].innerHTML : children[x].data;
} 
```

* * *

我将保留 jQuery 版本：

[.内容](http://api.jquery.com/contents/)：

```
object.a[i].contents().text(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T17:02:02.753

在 Rhino 中，这将起作用：

```
var a = <a>This is <span>some text</span> but its <span>not grabbing <b>the</b> span</span> content</a>; 
```

```
print(XML_innerText(a));

function XML_innerText(node) {
    var result = [];
    for each (var i in node.descendants()) {
        if (i.nodeKind() == 'text') {
            result.push(i);
        }
    }
    return result.join(' ');
} 
```

在更高级的 ecma/js 变体中，您可以使用相同的代码，但将其移动到 XML.prototype.innerText 中，然后`a.innerText()`直接调用类似的代码。

# python - Python：尝试为多种错误类型引发多用途异常

> ID：11697289
> 
> 赞同：5
> 
> 时间：2012-07-28T00:47:13.267
> 
> 标签：python, try-catch, urllib2, urllib

我在 python 中使用 urllib 和 urllib2 并使用它们从 url 中检索图像。

使用类似于：

```
尝试：
    缓冲区=urllib2.url_open(urllib2.Request(url))
    f.write（缓冲区）
    f.close
除了（可能发生的错误）：#Network Errors(?)
    print "检索失败"+url
    经过

```

现在经常发生的情况是，当通过普通 Web 浏览器使用该站点时，图像无法加载/损坏，这可能是因为服务器负载高或图像不存在或服务器无法检索。

无论是什么原因，图像都不会加载，并且在使用脚本时也可能/可能会发生类似的情况。由于我不知道它可能会抛出什么错误，我该如何处理？

我认为在 except 语句中提到 urllib2,urllib 库中所有可能的错误可能是矫枉过正，所以我需要一个更好的方法。

（我有时也可能需要/不得不处理损坏的 Wi-Fi、无法访问的服务器等，因此会出现更多错误）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-28T00:57:15.837

您只会看到两个异常，HTTPError（HTTP 状态代码）和 URLError（所有可能出错的情况），因此处理这两个异常并不是矫枉过正。如果您不关心状态代码，您甚至可以捕获 URLError，因为 HTTPError 是它的子类。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-28T01:00:26.927

如果您只想打印发生的事情的解释，只需打印异常本身。

```
except Exception, e: 
    print e 
```

异常对象的**str** () 方法将为您检索人类可读的消息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-28T01:17:07.020

[这](http://wiki.python.org/moin/HandlingExceptions)是一篇很棒的关于在 python 中处理异常的 wiki 文章。您可以使用[SilverbackNet 的答案](https://stackoverflow.com/a/11697336/1451443)，或者，如果您想捕获所有错误，这里有一个不错的方法。它也非常适合记录回溯并找出引发的任何其他可能的错误。

```
import sys
try:
    buffer=urllib2.url_open(urllib2.Request(url))
    f.write(buffer)
    f.close() #you didn't have the parentheses in your sample
except: # catch *all* exceptions
    e = sys.exc_info()[0] #this returns a 3-tuple; (type, value, traceback)
    print 'Error: %s' % e 
```

# boto - 来自：无法读取 /var/mail/boto.s3.connection

> ID：11697295
> 
> 赞同：4
> 
> 时间：2012-07-28T00:47:54.053
> 
> 标签：boto

我的 python 程序的第一行是`from boto.s3.connection import S3Connection`.

当我执行程序时，输出是“来自：无法读取 /var/mail/boto.s3.connection。”

关于如何排除故障的任何想法？

我已经通过下载 tar 并运行安装了 boto`sudo python setup.py install`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-28T00:53:35.317

看起来你正试图在 shell 中执行你的 Python 程序。要么添加

```
#!/bin/env python 
```

作为第一行或在 python 中显式运行它

```
python whatever.py 
```

# ruby-on-rails - 响应式设计验证码/验证码

> ID：11697296
> 
> 赞同：0
> 
> 时间：2012-07-28T00:47:54.650
> 
> 标签：ruby-on-rails, captcha, responsive-design, recaptcha, zurb-foundation

所以我正在创建一个 Rails 应用程序注册页面。我使用了 Zurb Foundation 网格来创建站点布局。我遇到的问题是，当网格调整大小时，recaptcha 并没有做同样的事情，并且开始超出它的界限。除了编辑 javascript 之外，似乎没有办法重新设计布局。有人知道验证码和导轨的良好响应式设计解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T01:00:31.513

您可以自定义 reCaptcha 的外观：

*   [https://developers.google.com/recaptcha/docs/customization](https://developers.google.com/recaptcha/docs/customization)

无需修改Javascript；应用响应式 CSS/HTML 来处理布局的其余部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-18T11:01:31.377

用css制作

```
@media (max-width: 444px) {

.recaptchatable #recaptcha_image {
margin: 0 auto !important;
width: 200px !important;
}
.recaptchatable .recaptcha_r1_c1, .recaptchatable .recaptcha_r3_c1, .recaptchatable .recaptcha_r3_c2, .recaptchatable .recaptcha_r7_c1, .recaptchatable .recaptcha_r8_c1, .recaptchatable .recaptcha_r3_c3, .recaptchatable .recaptcha_r2_c1, .recaptchatable .recaptcha_r4_c1, .recaptchatable .recaptcha_r4_c2, .recaptchatable .recaptcha_r4_c4, .recaptchatable .recaptcha_image_cell {

background: none !important;
}

} 
```

或者

```
.recaptchatable #recaptcha_image {
      width:  30em !important;
  }

  #recaptcha_image {
     display: block;
     margin: 0 auto !important;
  }

  .recaptchatable .recaptcha_r1_c1,
  .recaptchatable .recaptcha_r2_c1,
  .recaptchatable .recaptcha_r2_c2,
  .recaptchatable .recaptcha_r3_c1,
  .recaptchatable .recaptcha_r3_c2,
  .recaptchatable .recaptcha_r3_c3,
  .recaptchatable .recaptcha_r4_c1,
  .recaptchatable .recaptcha_r4_c2,
  .recaptchatable .recaptcha_r4_c4,
  .recaptchatable .recaptcha_r7_c1,
  .recaptchatable .recaptcha_r8_c1 {
      background: none !important;
  }

  .recaptcha_only_if_privacy,
  .recaptchatable td img,
  #recaptcha_reload,
  #recaptcha_switch_audio,
  #recaptcha_switch_img,
  #recaptcha_whatsthis {
      display:none;
  } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-18T18:39:30.997

如果您不想使用自定义主题，这将有所帮助。

```
@media (max-width: 444px) {
    .recaptchatable #recaptcha_image {
        margin: 0 !important;
        width: 200px !important;
        float:left !important;
    }
    .recaptchatable #recaptcha_image img {
        max-width:100%;
    }
    .recaptchatable .recaptcha_r1_c1, .recaptchatable .recaptcha_r3_c1, .recaptchatable .recaptcha_r3_c2, .recaptchatable .recaptcha_r7_c1, .recaptchatable .recaptcha_r8_c1, .recaptchatable .recaptcha_r3_c3, .recaptchatable .recaptcha_r2_c1, .recaptchatable .recaptcha_r4_c1, .recaptchatable .recaptcha_r4_c2, .recaptchatable .recaptcha_r4_c4, .recaptchatable .recaptcha_image_cell, .recaptchatable .recaptcha_r2_c2 {
        background: none !important;
    }
} 
```

# css - 悬停在父div上时触发css背景图像位置

> ID：11697299
> 
> 赞同：2
> 
> 时间：2012-07-28T00:48:20.590
> 
> 标签：css, triggers, background-image, css-transitions

我有一个问题，如何通过将鼠标悬停在父 div 上来触发子 div 的背景位置转换？

我根本没有找到任何关于这个问题的答案，特别是与背景定位有关。

由于 3 天我试图用 CSS 触发这种转换，但它只是在将鼠标悬停在父 div 上时不起作用，只有孩子。

帮助表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T01:04:54.433

支持一些很棒的伪代码

```
parent:hover child {
    transition code;
} 
```

这是我认为您想要的演示：http: [//jsfiddle.net/wCHRG/](http://jsfiddle.net/wCHRG/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T01:29:30.290

好的，我“认为”这适用于您想要的... [http://jsfiddle.net/wCHRG/3/](http://jsfiddle.net/wCHRG/3/)

# java - Eclipse 错误 - “无法找到或加载主类”

> ID：11697300
> 
> 赞同：1
> 
> 时间：2012-07-28T00:48:21.573
> 
> 标签：java, eclipse

我今天开始使用 Eclipse 来开发我的 java 程序（没有移动/触摸任何设置）。

我尝试运行 Java 程序，并收到以下消息：

```
Error: Could not find or load main class CLASSNAME 
```

这发生在我所有的 java 程序中，包括我之前开发的那些（并且在 Eclipse 上运行没有问题）。然而，昨天的情况并非如此。我能够毫无问题地运行开发的程序。

我没有卸载/更改我的 Java 安装。当我使用另一个IDE运行它时，开发的程序运行没有问题......

如何解决这个问题？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-07T16:55:53.190

我遇到了同样的问题，其中一个 jar 文件丢失了，我在配置构建路径中删除了它，它开始对我正常工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T01:01:39.613

我认为它们是您的 CLASSPATH 变量中的问题。使用 echo %CLASSPATH%，它的第一个条目应该是 (.)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-13T06:16:54.473

清理和构建项目将起作用，如果不尝试相同的工作空间。

好有型。

# sql - Identity_insert on 在临时表中

> ID：11697304
> 
> 赞同：4
> 
> 时间：2012-07-28T00:49:29.797
> 
> 标签：sql, sql-server

我在 SQL Server 2012 和 2008 R2 中运行存储过程时遇到问题，而它在我的 SQL Server 2000 和 2005 中运行良好。

请看下面的代码：

```
SELECT * INTO #TB_Table_1
FROM (SELECT TOP 1 * FROM TB_Table_2) A

TRUNCATE TABLE #TB_Table_1 
```

我现有的 sp 有这个代码。目的只是复制`TB_Table_2`.

注意：`TB_Table_2`有一个标识列`Master_ID`。

接下来，我将尝试使用以下代码插入数据。这就是我遇到麻烦的地方。

```
INSERT INTO #TB_Table_1
SELECT * FROM TB_Table_2
WHERE ISNULL(Date,'') = ''
AND ISNULL(ID,'') = '' 
```

我需要在 SQL Server 中设置什么来使其工作吗？

编辑：

我得到的错误是

> 只有在使用列列表并且 IDENTITY_INSERT 为 ON 时，才能为表“#TB_Table_1”中的标识列指定显式值。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-28T00:58:31.530

如果您的临时表有一个身份，要进行此插入，您首先需要：

```
SET IDENTITY_INSERT #TB_Master_Organization ON 
```

在插入语句之前。

您将需要指定要插入的列：

```
INSERT INTO #TB_Master_Organization (col1, col2, col3..)
SELECT * FROM TB_Master_Organization
WHERE ISNULL(DeactivatedDate,'') = ''
AND ISNULL(DeactivatedByID,'') = '' 
```

然后，启动identity_Insert。

所以，你得到了：

```
SET IDENTITY_INSERT #TB_Master_Organization ON
INSERT INTO #TB_Master_Organization (col1, col2, col3..)
    SELECT * FROM TB_Master_Organization
    WHERE ISNULL(DeactivatedDate,'') = ''
    AND ISNULL(DeactivatedByID,'') = ''
SET IDENTITY_INSERT #TB_Master_Organization OFF 
```

另外，如果这不起作用，[看看这个，也许可以帮助你](http://msdn.microsoft.com/en-us/library/aa933208)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T05:56:11.487

首先，您用于复制表结构的代码不正确。因为它将前 1 行也复制到了新的临时表中。

要仅复制表结构，您可以使用以下代码：

```
select * INTO #TB_Master_Organization FROM TB_Master_Organization where 1=2 
```

然后，您可以通过在此临时表上设置 IDENTITY INSERT ON 来显式插入数据。

但是您只需编写以下查询即可轻松实现此目的：

```
select * INTO #TB_Master_Organization FROM TB_Master_Organization where WHERE ISNULL(DeactivatedDate,'') = ''
AND ISNULL(DeactivatedByID,'') = '' 
```

在一个查询中，您将获得临时表中的最终数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-02-19T13:07:55.187

我遇到了同样的问题，我`isnull`在表的标识列中进行了转换，问题已解决`ISNULL(P.PersonId,0)`。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2018-02-03T12:38:45.210

```
SET IDENTITY_INSERT #TB_Master_Organization ON

SELECT COL1,COL2 INTO #TB_Table_1 FROM TB_Table_2 
```

您需要选择要插入新表的所有列并简单地运行。

这对我有用。

# .net - SqlCe 在 Windows XP 中受限用户帐户下打开缓慢

> ID：11697308
> 
> 赞同：2
> 
> 时间：2012-07-28T00:51:15.227
> 
> 标签：.net, windows-xp, sql-server-ce

我有一个使用 .NET 4.0 构建的 Windows 应用程序。它的程序文件目录下有一个 SqlCe 数据库：C:\Program Files\Company Name\Application Name\Data\Data.sdf

此应用程序与 Inno Setup 一起安装，并且 Data 文件夹被授予此 inno setup 配置的权限：

```
[Dirs]
Name: {app}\Data; Permissions: users-modify 
```

但是，即使我在没有安装程序的情况下部署此应用程序（只需压缩我的开发机器中的所有文件并在目标机器的桌面上解压缩），我仍然面临同样的问题。所以我认为这不是文件目录权限问题。

对于某些类型的 Windows 用户，在 Windows XP 机器上打开与该数据库的连接需要 13 秒以上。

在我们客户的 XP 计算机上：

*   域管理员可以正常运行。
*   本地管理员和本地受限用户将体验到缓慢的连接打开。

在我的个人 XP Home 电脑上：

*   管理员可以正常运行。
*   有限的用户将体验到缓慢的连接打开。

在我的个人 Windows 7 机器上，它使用本地管理员和本地受限帐户运行良好。

其他可能有帮助的说明：

我正在使用 SqlCe 4.0。我正在部署 SqlCe 文件，以便目标机器不必安装 SqlCe。

此应用程序有时会在其他进程（同步）中删除并重新下载 Data.sdf 文件。

此应用程序还使用 WPF 和实体框架。

请帮忙。此应用程序中的几乎每个屏幕都会打开和关闭数据库连接。

谢谢

# visual-studio-2010 - git 源代码控制不适用于 Visual Studio

> ID：11697312
> 
> 赞同：2
> 
> 时间：2012-07-28T00:52:41.403
> 
> 标签：visual-studio-2010, git, github

我使用 Git 源代码控制已经有一段时间了，我在 Visual Studio 中使用 Git bash + Git 源代码控制，但最近使用 Visual Studio 的 git 源代码控制似乎不起作用。

当我执行获取未决更改时，它不会显示任何内容，但是当我转到 git bash 时，我可以看到几个脏文件。此外，它没有向我显示 Visual Studio 中的当前分支。似乎某些设置可能出错了，并且视觉工作室以某种方式与 gitbash 分离。

我还尝试卸载 Visual Studio 的 Gi 源代码控制并再次安装，但根本没有任何帮助。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T08:53:55.097

为什么不使用 git extensios： [https ://code.google.com/p/gitextensions/](https://code.google.com/p/gitextensions/)

# java - 在 Java 中未按预期解析 XML

> ID：11697314
> 
> 赞同：1
> 
> 时间：2012-07-28T00:52:57.467
> 
> 标签：java, xml, xml-parsing

我有一个xml文件如下

```
<Moves>
  <Move name="left">
     <Coord X="100" Y="100"/>
     <Coord X="50" Y="100"/>
  </Move>
  <Move name="right">
     <Coord X="10" Y="80"/>
     <Coord X="40" Y="90"/>
  </Move>
<Moves> 
```

我正在使用 SAX Parser 在 Java 中解析它。以下两种方法基本解析

```
public void startElement(String uri, String localName, String qName, Attributes attributes) throws SAXException {

                if (qName.equalsIgnoreCase("Coord")){
                    X = Integer.parseInt(attributes.getValue("X"));
                    Y = Integer.parseInt(attributes.getValue("Y"));
                } else if (qName.equalsIgnoreCase("Move")) {
                    move_points.clear();
                    move_name = attributes.getValue("name");
                }
            }

            /* If the read element is Move, add a MoveList with the name and if it is
             * a Coord, create a Point with it.
             */
            @Override
            public void endElement(String uri, String localName, String qName) throws SAXException {

                if (qName.equalsIgnoreCase("Coord")){
                    move_points.add(new Points(X, Y));
                } else if (qName.equalsIgnoreCase("Move")) {
                    moves_list.add(new MovesList(move_name, move_points));
                }
          } 
```

我有一个 ArrayList move_points 存储所有读取的坐标和一个 Arraylist move_list 存储移动名称及其坐标（这是一个arraylist - move_points here）

我遇到的问题是，当解析文档时，moves_list 中的所有元素都具有正确的名称，但 move_points 中的条目或存储的坐标是 XML 文件中最后一次移动的条目。

当我在每个元素 Move 之后检查 endElement 方法中输入到 move_list 中的内容时，它显示正确的坐标被输入到 move_list 但是当整个文档被解析并且我在根元素 Moves 被解析后查看 move_list 里面的内容时，我得到了 move_list 与最后一步的所有坐标。

请帮帮我。

PS。move_list 是一个公共静态变量

MovesList 类

```
public class MovesList {

private ArrayList<Points> move_points;
private String move_name;

public MovesList (String move_name, ArrayList<Points> move_points) {
    this.move_name = move_name;
    this.move_points = move_points;
}

public String getName(){
    return move_name;
}

public ArrayList<Points> getPoints(){
    return move_points;
} 
```

}

积分等级

```
public class Points extends Point {

private int X;
private int Y;

public Points (int X, int Y) {
    this.X = X;
    this.Y = Y;
}

public Points (Points p) {
    X = p.getIntX();
    Y = p.getIntY();
}

public int getIntX () {
    return X;
}

public int getIntY () {
    return Y;
}

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T01:36:11.203

我认为您的问题是您没有创建新的 move_points 对象。所以这：

```
} else if (qName.equalsIgnoreCase("Move")) {
  move_points.clear();
  move_name = attributes.getValue("name");
} 
```

应该是这样的：

```
} else if (qName.equalsIgnoreCase("Move")) {
  move_points = new ArrayList<Points>(); // note difference
  move_name = attributes.getValue("name");
} 
```

否则，每个 MovesList 对象都会有一个指向同一个对象的 move_points 变量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T01:04:54.197

你有一个名为 move_points 的变量，当你创建一个新的 MovesList 时，你使用了一个名为 points 的变量。那是错字吗？此外，由于您似乎在开始新的 Move 元素时共享 move_points 并清除它，我希望您在创建 MovesList 时复制列表。

# c++ - 异常处理 C++

> ID：11697315
> 
> 赞同：0
> 
> 时间：2012-07-28T00:52:57.630
> 
> 标签：c++, exception-handling

我该怎么做呢，

我有一个名为 LargeInteger 的类，它存储了最多 20 位数字。我做了构造函数

```
LargeInteger::LargeInteger(string number){ init(number); } 
```

现在，如果数字是 > LargeInteger::MAX_DIGITS (static const member)，即 20，我不想创建对象并抛出异常。

我创建了一个类 LargeIntegerException{ ... }; 并做到了

```
void init(string number) throw(LargeIntegerException);
void LargeInteger::init(string number) throw(LargeIntegerException)
{
    if(number.length > MAX_DIGITS)
    throw LargeIntegerException(LargeIntegerException::OUT_OF_BOUNDS);
    else ......
} 
```

所以现在我修改了构造函数

```
LargeInteger::LargeInteger(string number)
{ try {init(number);} catch(LargeIntegerExceptione) {...} } 
```

现在我有 2 个问题
1.如果抛出异常，会创建这个类的对象吗？
2.如属上述情况如何处理？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-28T00:53:51.573

不，如果在构造函数中抛出异常，则不会构造对象（前提是您没有像您一样捕获它）。

所以 - 不要捕获异常，而是让它传播到调用上下文。

IMO，这是正确的方法 - 如果无法直接初始化对象，请在构造函数中抛出异常并且不要创建对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T01:04:35.887

没有理由在构造函数中捕获异常。您希望构造函数失败，因此构造函数之外的东西必须捕获它。如果构造函数通过异常退出，则不会创建对象。

```
LargeInteger(string num) { init(num); } // this is just fine. 
```

# gcc - GCC 错误 - 无法执行二进制文件

> ID：11697320
> 
> 赞同：2
> 
> 时间：2012-07-28T00:54:28.877
> 
> 标签：gcc

**[谢谢大家！.，对不起，我没有看到不匹配的内核，出于某种原因，我以为这是我的 ubuntu 服务器 64 位]**

我使用 ct-ng 编译了一个自定义 gcc 工具链，编译成功但我写了一个简单的 hello world，我看到了这个错误

有人可以指出我这里有什么问题以及为什么我会收到此错误吗？

**错误：**

```
src/main$ ./main 
bash: ./main: cannot execute binary file 
```

关于**操作系统**

```
uname -a
Linux lnx-server 3.2.0-25-generic-pae #40-Ubuntu SMP Wed May 23 22:11:24 UTC 2012 i686 i686 i386 GNU/Linux 
```

关于文件的一些**附加信息**

```
src/main$ file main
main: ELF 64-bit LSB executable, x86-64, version 1 (SYSV), dynamically linked (uses shared libs), for GNU/Linux 2.6.32, not stripped 
```

**文件权限**

```
-rwxrwxr-x 1 balravin balravin  8276 Jul 27 17:45 main 
```

**用于编译的**命令****

 **```
src/main$ x86_64-mvl-linux-gnu-gcc -o main main2.c 
```

**GCC 配置**

> ```
> > src/main$ x86_64-mvl-linux-gnu-gcc --v Using built-in specs. Target:
> > x86_64-mvl-linux-gnu Configured with:
> > /home/balravin/tools/platform/x86/src/gnu/gcc/4.2.4/.build/src/gcc-4.2.4/configure
> > --build=i686-build_pc-linux-gnu --host=i686-build_pc-linux-gnu --target=x86_64-mvl-linux-gnu --prefix=/home/balravin/tools/platform/x86/obj/gnu/gcc/4.2.4/x86_64-mvl-linux-gnu
> > --with-sysroot=/home/balravin/tools/platform/x86/obj/gnu/gcc/4.2.4/x86_64-mvl-linux-gnu/x86_64-mvl-linux-gnu/sysroot
> > --enable-languages=c,c++ --disable-sjlj-exceptions --enable-__cxa_atexit --enable-libmudflap --enable-libgomp --enable-libssp --enable-threads=posix --enable-target-optspace --with-long-double-128 --disable-nls --disable-multilib --with-local-prefix=/home/balravin/tools/platform/x86/obj/gnu/gcc/4.2.4/x86_64-mvl-linux-gnu/x86_64-mvl-linux-gnu/sysroot
> > --enable-c99 --enable-long-long Thread model: posix gcc version 4.2.4 
> ```

**最后**是main2.c

```
#include <stdio.h>
int main() {

    printf("\nHello Work\n");
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-28T00:59:56.880

您的内核是 32 位的，并且您已经编译了 64 位二进制文​​件。您需要 64 位硬件上的 64 位内核才能运行 64 位二进制文​​件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-28T00:59:49.337

您正在尝试在 32 位操作系统上运行 64 位可执行文件。要么安装 64 位操作系统，要么重建编译器以生成 32 位可执行文件。**

# f# - 类型推断创建不希望的约束

> ID：11697322
> 
> 赞同：2
> 
> 时间：2012-07-28T00:54:57.097
> 
> 标签：f#, type-inference

由于我有大量的`IDisposable`s 需要处理一段时间，因此我设置了一个一次性物品列表和一个传递函数，以将项目添加到其中作为副作用：

```
let mutable disposables = []
let (~-) (x:'a) = disposables <- x :: disposables; x 
```

这样我就有希望做到这一点：

```
let thing1 = -new Form()
let thing2 = -new Control()

for i in disposables do i.Dispose() 
```

问题是 F# 自动限制`'a`为`IDisposable`，并带有警告消息：

> 这种构造导致代码不像类型注释所指示的那样通用。类型变量“a”已被限制为“IDisposable”类型。

那么返回类型`operator ~-`就变成了IDisposable，破坏了函数的便利性。

有没有办法阻止 F# 创建这个约束？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T01:13:33.560

知道了！

答案是当我在函数中使用它时向上`x`转换`IDisposable`，而不是在函数的类型签名中：

```
let mutable disposables = []
let (~-) x = disposables <- (x :> IDisposable) :: disposables; x 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T03:38:28.183

您没有就您的代码征求一般性建议，但我觉得有必要指出一些奇怪的地方。

首先，您几乎不需要调用`Dispose()`. `use`是管理资源的标准方式。你可能应该这样做：

```
use thing1 = new Form()
use thing2 = new Control() 
```

其次，为什么要将不可变的数据结构分配给`mutable`变量？如果您确信需要手动跟踪资源，请使用

```
let disposables = ResizeArray<IDisposable>() 
```

最后，在定义一个在其自身范围之外改变变量的运算符之前，您应该仔细考虑。这对于操作员来说是不寻常的行为（除非操作员的范围非常狭窄）。

# jersey - 使用带有嵌入式灰熊的球衣时获取远程地址

> ID：11697327
> 
> 赞同：4
> 
> 时间：2012-07-28T00:55:53.090
> 
> 标签：jersey, grizzly

我一直在寻找解决这个问题的方法，但没有成功。我发现的最新帖子可以追溯到 2010 年。我正在使用带有嵌入式 grizzly 2.2.1 的球衣 1.12。

如果我理解正确，除非我将球衣资源部署在 servlet 容器下，否则我无法在其中注入 HttpServletRequest。有解决方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-15T10:52:55.197

使用以下内容：

```
@Context org.glassfish.grizzly.http.server.Request req 
```

示例用法：

```
@Path("/example")
public class SomeResource {

  @POST
  @Consumes("application/x-www-form-urlencoded")
  public void someMethod(@Context Request req) {
    System.out.println(req.getRemoteAddr());
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T12:06:31.910

在我的例子中，我们有一个独立的 Jersey 集群在 nginx 后面作为负载均衡器运行。因此，解决方法是将远程地址作为请求标头传递，这也可以从 Jersey 轻松访问：

```
 proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for; 
```

# java - java.util.NoSuchElementException 使用休眠和 JSF 时

> ID：11697329
> 
> 赞同：0
> 
> 时间：2012-07-28T00:56:14.407
> 
> 标签：java, hibernate, jsf, primefaces, websphere

以下是调用查询的方法：

```
public void LogIn() {
        Query query = null;

        session.beginTransaction();
        query = session
                .createQuery(" from UserModel where userName = :username and passwd = :password");
        query.setString("username", getUserVO().getUserName());
        query.setString("password", getUserVO().getPasswd());

        this.getUserVO().DataRowMapper((List<UserModel>) query.list());
        session.getTransaction().commit();
        session.close();
    }

@Override
    public void DataRowMapper(List<?> list) {
        Iterator<UserModel> i = (Iterator<UserModel>) list.iterator();
        while (i.hasNext()) {
            this.setUserID(i.next().getUserID());
            this.setUserName(i.next().getUserName());
        } 
```

现在的问题是，当我运行调试器时，我看到 i.hasNext() 具有正确的值，但我仍然不断收到 NoElementException。我看到的另一件令人惊讶的事情是，以前我能够在控制台上打印用户 ID，但只有用户 ID，其余部分为空，但在我开始收到此错误后不久。数据库完全没有问题。我 100% 确信我得到了正确的结果，因为我在调试器中看到了它，但由于某种原因，我无法在正常模式下克服这个错误。UserModel 类是一个简单的 POJO，我在那里使用 Hibernate Annotations。

我将 RAD 8 与 Websphere 8.0 一起使用。有带有 Hibernate 和 Primefaces 的 JSF 库。还有 Spring 库，但到目前为止我还没有使用过它们。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T01:21:57.240

您在循环中调用 i.next 两次，这会将记录指针移动到下一个元素。通过一次调用 i.next 来获取对元素的引用。

所以应该像

`while (i.hasNext){ usermodel curr =i.next; curr.username; curr.userid; }`

# postgresql - 插入式 CRUD Web 应用程序

> ID：11697330
> 
> 赞同：5
> 
> 时间：2012-07-28T00:56:20.727
> 
> 标签：postgresql, web-applications, crud

# 背景

一个包含大约 20 个表的简单数据库，其中散布着唯一约束、主键和外键关系。这是一个仅供内部使用的数据库。只有两三个人可以直接访问数据。这些人中只有一个有资格成为 DBA。

该数据库是使用 DbSchema 和 PostgreSQL 9.1 开发的。

该项目本身旨在成为一个快速而肮脏的原型，但使用干净的数据。身份验证和安全性不是问题。

# 问题

我想提供一个简单的基于 Web 的 CRUD 应用程序，这样就可以解决任何数据错误，而无需让 DBA 参与其中。

# 问题

您会推荐什么软件来公开一个简单的 Web 界面，让非 DBA 能够更新数据？

# 例子

澄清一下，如果它是一个 Java 应用程序，下面是我所设想的简单性：

1.  下载`jar`文件（例如，`crud-web-app.jar`）。
2.  跑：

    ```
    java -jar crud-web-app.jar --username=postgres --password=password --host=localhost:5432 --database=database --listen=127.0.0.1:8080 
    ```

3.  浏览到 127.0.0.1:8080
4.  选择一个表（单击）。
5.  编辑数据（通过 AJAX 保存）。

# 有关的

[phpPgAdmin](http://phppgadmin.sourceforge.net/)接近了，但我认为可能有一些更简单的东西（即，对非 DBA 来说不那么吓人）。

有什么建议么？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-21T17:07:28.410

要在不编写任何代码的情况下生成 CRUD：

*   [PHP 生成器](http://www.sqlmaestro.com/products/postgresql/phpgenerator/)

PostgreSQL PHP Generator 是一个 PostgreSQL GUI 前端，它允许您为选定的表、视图和查询生成高质量的 PHP 脚本，以通过 Web 进行更新。

# 演示页面

*   [http://demo.sqlmaestro.com/](http://demo.sqlmaestro.com/)

免费版相当广泛，商业版包含大量功能。使用该工具，大约需要 30 分钟（从软件下载）为两打表生成 CRUD 页面。该软件自动提供外键关系的下拉菜单。

# 示例输出

以下屏幕截图显示了运行生成器的输出：

![示例编辑器](../Images/4780d4c7219d53d468b5aca6ddcc8f64.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-29T06:41:15.157

另一种选择是[DaDaBIK](http://www.dadabik.org)，您无需编码即可创建 CRUD 前端/Web 应用程序。

# php - 克服 SOQL 对查询结果数量的限制

> ID：11697338
> 
> 赞同：0
> 
> 时间：2012-07-28T00:58:59.183
> 
> 标签：php, rest, select, limit, soql

我们正在执行一个查询：

```
SELECT Id, SomeField FROM SomeTable 
```

我们在 SomeTable 中有超过 80,000 个项目，但只有 2000 个项目被退回

```
SELECT Id, SomeField FROM SomeTable LIMIT 100000 
```

没有解决问题。

克服此限制的最佳方法是什么？使用 for 循环？如果使用 PHP REST API，语法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T21:15:32.733

您可以使用[SOQL For 循环](http://www.salesforce.com/us/developer/docs/apexcode/Content/langCon_apex_loops_for_SOQL.htm)来管理它。根据文档：

> SOQL for 循环检索所有 sObject，使用高效的分块调用 SOAP API 的 query 和 queryMore 方法。开发人员应始终使用 SOQL for 循环来处理返回许多记录的查询结果，以避免堆大小的限制。

希望这可以帮助！

阿努普

# java - Java Web 应用程序框架

> ID：11697339
> 
> 赞同：0
> 
> 时间：2012-07-28T00:59:06.193
> 
> 标签：java, playframework, wicket, web-frameworks, tapestry

哪个 Java Web 应用程序框架非常轻量级、最不占用资源、最佳响应时间等。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-28T03:39:29.663

我在Wicket工作过。我个人觉得它是重量级的。我在[检票口](/questions/tagged/wicket "显示标记为“检票口”的问题")和[挂毯](/questions/tagged/tapestry "显示标记为“挂毯”的问题")之间进行选择时进行了研究——似乎它们的负载相同（这是在 2009 年）。

最近，我尝试了[lift](/questions/tagged/lift "显示标记为“电梯”的问题")和[playframework](/questions/tagged/playframework "显示标记为“playframework”的问题")。Lift 对我来说太复杂了（加上它是 Scala 框架）。玩！另一方面，使用起来非常直观（play 有 Java 和 Scala 两种风格）。~~AFAIK，玩！应用程序不能作为 WAR 文件部署在标准 Java AppServers 上，因此请对此进行研究。~~（实际上，使用 v1.x 可以，[请参见此处](http://www.playframework.org/documentation/1.2.1/deployment)）^([见脚注])

根据我的个人经验，如果 Play！可能是您列出的框架中最轻量级的。但如果它是一个非常简单的应用程序并且您担心资源优化，您可能只使用裸 Servlet 和 JSP。

这是一个非常好的框架比较：[Rails、Wicket、Grails、Play、Tapestry、Lift、JSP、](http://www.jtict.com/blog/rails-wicket-grails-play-lift-jsp/)你看到的上下文（从这个链接复制）：

![在此处输入图像描述](../Images/9d8450aaca9f4d4dc9f89cc0c62cd2b2.png)

还有这个：

![在此处输入图像描述](../Images/84f6dbc7d9bb74dc057b921cfbade835.png)

* * *

**脚注：**

1.  上面的图没有包含`Play!2.x`统计数据，但我很确定它们会达到 par `Play!1.x`。

2.  `Play!1.x`可以部署为WAR。[看这里。](http://www.playframework.org/documentation/1.1/deployment)

3.  `Play!2.0`-- 到目前为止，不能作为 WAR 部署。（这是一个非常糟糕的主意）。有很多人对此不满意。它的错误报告说创建可部署 WAR 的要求被推迟到 v2.1 发布。[看这里](https://play.lighthouseapp.com/projects/82401/tickets/8-war-packaging)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T03:16:45.490

我会看看[Play Framework](http://www.playframework.org/)。这不是您通常的 Java 应用程序风格，但它肯定是快速的、可扩展的并且旨在快速开发。

您可以拥有一个独立的 Web 应用程序，或者将其作为 Tomcat 的容器等。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-28T03:26:29.127

我会推荐[Jersey](http://jersey.java.net/)，一个[jsr311](http://jsr311.dev.java.net)的实现。使用注解，您可以将 Web 请求映射到 java 方法，如下所示：

```
@Path("/myResource")
@Produces("text/plain")
public class SomeResource {
  @GET
  public String doGetAsPlainText() {
     ...
  }

  @GET
  @Produces("text/html")
  public String doGetAsHtml() {
     ...
  }
} 
```

存在其他实现，您可以通过简单的搜索*jsr311 实现*找到它们。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-28T03:06:02.983

最简单的Java web 应用程序框架是`Servlet/JSP`：你直接使用它。缺点：太野了，后面必须做很多事情。

其他简单的 Web 应用程序框架（我认为这是您的最佳选择）是`Struct Framework`：它轻量级，配置更少...

关于响应时间：越复杂的框架，响应时间越长，因为complext框架层数更多，所以处理时间增加。但是，在我看来，它不会花费太多！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-28T06:55:22.853

不要选择哪个框架是轻量级的。选择哪个框架更受社区支持或更稳定。我个人推荐[Spring](http://www.springsource.org/)框架。它也是轻量级框架。

# php - MySQLi INSERT 不工作

> ID：11697340
> 
> 赞同：0
> 
> 时间：2012-07-28T00:59:09.057
> 
> 标签：php, mysql

编码：

```
#!/usr/bin/php
<?php
error_reporting(E_ALL);
while(true){
    // Check how many API calls remain
    $rate_limit = json_decode(file_get_contents('http://api.twitter.com/1/account/rate_limit_status.json'),true);
    // Array containing all the Twitter handles
    $handles = array('le4ky');

    if($rate_limit['remaining_hits']<count($handles)){
        file_put_contents('tweet_gremlin.log', date('r') . ' Rate limit reached');
        sleep(30);
    }else{
        // Establish the database connection
        if(!$mysqli = mysqli_connect('localhost','twitterd','password','twitterd')){
            die('Cannot connect to database');
            file_put_contents('tweet_gremlin.log', date('r') . ' Cannot connect to the database');
        }

        // This is the big one.  Loop through the $handles values, make an API call, and insert the tweets.
        foreach($handles as $value){
            // Get the handle's timeline and put it into $user_data
            $user_data = json_decode(file_get_contents('http://search.twitter.com/search.json?q=from:' . $value . '&rpp=100'),true);
            // Put only the results index (tweets) into into $user_data
            $user_data = $user_data['results'];

            for($i=0;$i<count($user_data);$i++){

                // Lazy method for sanitizing variables
                $id = mysqli_real_escape_string($mysqli,$user_data[$i]['id']);
                $created_at = mysqli_real_escape_string($mysqli,$user_data[$i]['created_at']);
                $from_user_id = mysqli_real_escape_string($mysqli,$user_data[$i]['from_user_id']);
                $profile_image_url = mysqli_real_escape_string($mysqli,$user_data[$i]['profile_image_url']);
                $from_user = mysqli_real_escape_string($mysqli,$user_data[$i]['from_user']);
                $from_user_name = mysqli_real_escape_string($mysqli,$user_data[$i]['from_user_name']);
                $text = mysqli_real_escape_string($mysqli,$user_data[$i]['text']);

                $insert_tweets = "INSERT INTO tweets ('id','created_at','from_user_id','profile_image','from_user','from_user_name',`text`) VALUES ({$id},{$created_at},{$from_user_id},{$profile_image_url},{$from_user},{$from_user_name},{$text});";
                $result = mysqli_query($mysqli,$insert_tweets);
            }
        }
        sleep(30);
    }
}
?> 
```

这基本上只是一个“守护进程”，用于检索数据并将其插入数据库。对于我的生活，我无法弄清楚为什么数据没有被插入到数据库中。twitterd 用户对数据库具有选择和插入权限，并且可以从任何主机进行连接。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-28T01:03:53.727

您需要在 SQL 查询中为字符串值加上引号：

```
$insert_tweets = "
    INSERT INTO tweets
        (`id`,`created_at`,`from_user_id`,`profile_image`,`from_user`,`from_user_name`,`text`) 
    VALUES  
        ('{$id}','{$created_at}','{$from_user_id}','{$profile_image_url}','{$from_user}','{$from_user_name}','{$text}')
"; 
```

我将它们添加到所有值，您可以在您知道是数字的值上删除它们（并使用`intval()`或`floatval()`其他一些数字验证函数进行验证）。

我还在列名中用反引号替换了单引号。

# php - Javascript 和 Mysql 调用都无法在页面上运行

> ID：11697342
> 
> 赞同：0
> 
> 时间：2012-07-28T00:59:21.570
> 
> 标签：php, javascript, jquery, mysql

我有一个非常奇怪的问题，我一直在尝试解决一段时间，但它已经到了我无法解决的地步。

我有一个简单的 php 脚本。它执行一些 api 调用并从 facebook 中提取一些数据，然后显示它。出于某种原因，在此页面上，我放入脚本中的任何 Javascript/jquery 都无法正常工作。我在源代码中插入了一个带有 javascript 的 iframe，它可以工作，但如果 javascript 在此页面中，它根本不会注册。根本没有响应..javascript插件不会出现，或者该功能不会在点击时触发。

MYSQL 调用也不起作用。我根本没有得到任何回报。你们以前有过这种情况吗？有什么可能的原因吗？

我不认为我有任何语法错误。不过我会继续检查。任何帮助深表感谢！！

这是我的代码的第一部分，直到正文，遗憾的是我无法显示其余部分：

```
<?php
require 'includes/connection.php';
require 'src/facebook.php';

// Create our Application instance (replace this with your appId and secret).
$facebook = new Facebook(array(
'appId'  => '~myid~',
'secret' => '~mysecret~',
));

// Get User ID
$user = $facebook->getUser();

// If we have a $user id here, it means we know the user is logged into
// Facebook, but we don't know if the access token is valid. An access
// token is invalid if the user logged out of Facebook.

if ($user) {
 try {
// Proceed knowing you have a logged in user who's authenticated.
$user_profile = $facebook->api('/me');
$access_token = $facebook->getAccessToken();

$user_name = $user_profile[first_name];

/*
echo $user;

echo "<br/><br/>";

echo $access_token;
*/

} catch (FacebookApiException $e) {
error_log($e);
$user = null;
}
}/*elseif($_GET[user]){
$user = $_GET[user];

if ($user) {
try {
// Proceed knowing you have a logged in user who's authenticated.
$user_profile = $facebook->api('/me');
$access_token = $facebook->getAccessToken();

$user_name = $user_profile[first_name];

/*
echo $user;

echo "<br/><br/>";

echo $access_token;

} catch (FacebookApiException $e) {
error_log($e);
$user = null;
}
}
}*/

// Login or logout url will be needed depending on current user state.

$logoutUrl = $facebook->getLogoutUrl();

$loginUrl = $facebook->getLoginUrl(array('scope'=>'offline_access'));

//Get youtube video ID from URL
// & Linkify youtube URLs which are not already links.
function linkifyYouTubeURLs($text) {
$text = preg_replace('~
    # Match non-linked youtube URL in the wild. (Rev:20111012)
    https?://         # Required scheme. Either http or https.
    (?:[0-9A-Z-]+\.)? # Optional subdomain.
    (?:               # Group host alternatives.
      youtu\.be/      # Either youtu.be,
    | youtube\.com    # or youtube.com followed by
      \S*             # Allow anything up to VIDEO_ID,
      [^\w\-\s]       # but char before ID is non-ID char.
    )                 # End host alternatives.
    ([\w\-]{11})      # $1: VIDEO_ID is exactly 11 chars.
    (?=[^\w\-]|$)     # Assert next char is non-ID or EOS.
    (?!               # Assert URL is not pre-linked.
      [?=&+%\w]*      # Allow URL (query) remainder.
      (?:             # Group pre-linked alternatives.
        [\'"][^<>]*>  # Either inside a start tag,
      | </a>          # or inside <a> element text contents.
      )               # End recognized pre-linked alts.
    )                 # End negative lookahead assertion.
    [?=&+%\w]*        # Consume any URL (query) remainder.
    ~ix', 
    '$1',
    $text);
return $text;
}

// function to convert second to time ( minute and secong format)
function secTomin($secs)
{
$sec = $secs % 60;
if($sec < 10)
{
 $sec = '0'.$sec;
}
$min = floor($secs/60); 
$ret = $min.':'.$sec;
return $ret;
}

//Output Buffering
// make sure output buffering is off before we start it
// this will ensure same effect whether or not ob is enabled already
while (ob_get_level()) {
ob_end_flush();
}
// start output buffering
if (ob_get_length() === false) {
ob_start();
}   

//replace accents
function replaceAccentedCharacters($str)
{
$search = explode(",","ç,æ,œ,á,é,í,ó,ú,à,è,ì,ò,ù,ä,ë,ï,ö,ü,ÿ,â,ê,î,ô,û,å,e,i,ø,u");
$replace = explode(",","c,ae,oe,a,e,i,o,u,a,e,i,o,u,a,e,i,o,u,y,a,e,i,o,u,a,e,i,o,u");
$strreplaced = str_replace($search, $replace, $str);
return $strreplaced;
}

?>
<!DOCTYPE>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript"></script>
<script src="http://connect.soundcloud.com/sdk.js" type="text/JavaScript"></script>
<script src="togglemenu.js" type="text/JavaScript"></script>
<script type="text/JavaScript">
SC.initialize({
client_id: "~mycliendid~",
redirect_uri: "~myurl~",
});
</script>
<script type="text/javascript" src="ajax.js"></script>
<link type="text/css" rel="stylesheet" href="css/jquery-ui-1.8.9.custom/jquery-ui-1.8.9.custom.css" />  

<script type="text/javascript" src="jquery-ui-1.8.13.custom.min.js"></script>
<script type="text/javascript" src="jquery.multi-accordion-1.5.3.js"></script>
<link rel='stylesheet' href='css/lionbars.css' />
<script type="text/javascript" src="jquery.lionbars.0.3.js"></script>

<script type="text/javascript">
$(document).ready(function(){
    $('#song_list').lionbars({
           autohide: true
       });
});
</script>

</head> 
```

此代码中的所有 javascript 现在都无法正常工作。此外，我在上面的代码中替换了我的 facebook 和 soundcloud 应用数据。抱歉有点乱。希望我可以发布所有内容，但这不取决于我。提前感谢您的帮助！

这是我要求的 SQL 语句 - 实际上只是我使用相同格式设置的测试语句：

```
$query = "SELECT * FROM users WHERE fb_user_id = '$user'";

        $likes = mysql_query($query);

        $num = mysql_num_rows($likes);

        echo $num;

        while ($like_list = mysql_fetch_array($likes, MYSQL_ASSOC)){
            $like = $like_list['fb_from_id'];
            echo $like;

            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T05:04:35.503

只是阅读你拥有的代码，看起来你可能错过了你的最后一个 `ob_end_flush();`

每当`ob_start();`被调用时，它都会开始缓冲输出并且`ob_end_flush();`必须被调用才能再次输出 - 所以在你的末尾`</head>`，尝试添加`ob_end_flush();`

以下代码[示例](http://php.net/manual/en/function.ob-start.php)来自`ob_start()`PHP.net 。`ob_end_flush()`

**Example #1 用户自定义回调函数示例**

```
<?php

function callback($buffer)
{
    // replace all the apples with oranges
    return (str_replace("apples", "oranges", $buffer));
}

ob_start("callback");

?>
<html>
    <body>
        <p>It's like comparing apples to oranges.</p>
    </body>
</html>
<?php

ob_end_flush();

?> 
```

**上面的示例将输出：**

```
<html>
    <body>
        <p>It's like comparing oranges to oranges.</p>
    </body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T15:23:43.587

所以 SQL 语句不起作用的问题是该表是用 4 个字符命名的，就像这样。当我将其更改为 5 时，就像喜欢一样，它起作用了。我不知道表名的长度是有限制的。如果我发布了我的代码，有人可能会注意到这一点。无论如何感谢所有的帮助！

# javascript - 识别通过文本单击调用的 JavaScript 函数

> ID：11697348
> 
> 赞同：0
> 
> 时间：2012-07-28T01:00:18.050
> 
> 标签：javascript

> **可能重复：**
> [使用自定义标志图标实现 Google 翻译](https://stackoverflow.com/questions/10486833/implementing-google-translate-with-custom-flag-icons)

我的网页上有现成的谷歌语言翻译小部件。我想确定当我单击小部件提供的语言列表时正在调用什么 javascript 函数。

我的目标是让一些标志图标（单击时）调用这些相同的功能，以便它们也触发语言翻译。

# haskell - haskell 无法将预期类型“可能文本”与实际类型“文本”匹配

> ID：11697353
> 
> 赞同：4
> 
> 时间：2012-07-28T01:00:53.933
> 
> 标签：haskell

完整代码[https://github.com/gertcuykens/haskell-design](https://github.com/gertcuykens/haskell-design)

我怎样才能从 Maybe Text 类型中提升 Maybe

```
application :: MVar ServerState -> WS.Request -> WS.WebSockets WS.Hybi10 ()
application state rq = do
    WS.acceptRequest rq
    WS.getVersion >>= liftIO . putStrLn . ("Client version: " ++)
    sink <- WS.getSink
    msg <- WS.receiveData
    clients <- liftIO $ readMVar state
    url <- liftIO fbUrl

    let prefix = "Facebook code"
    let code = T.drop (T.length prefix) msg

    let a = ("code",T.unpack code)
    e <- liftIO $ fbEmail $ (\(x,y) -> (C.pack x, C.pack y)) a

    let client = (e, sink) --ERROR

    case msg of
        _   | not (prefix `T.isPrefixOf` msg) -> do
                WS.sendTextData ("Facebook login " `mappend` url :: Text)
            | any ($ fst client)
                [T.null, T.any isPunctuation, T.any isSpace] ->
                    WS.sendTextData ("Facbook code invalid" :: Text)
            | clientExists client clients ->
                WS.sendTextData ("User already exists" :: Text)
            | otherwise -> do
                liftIO $ modifyMVar_ state $ \s -> do
                    let s' = addClient client s
                    WS.sendSink sink $ WS.textData $
                        "Welcome! Users: " `mappend`
                        T.intercalate ", " (map fst s)
                    broadcast (fst client `mappend` " joined") s'
                    return s'
                talk state client

    Couldn't match expected type `Maybe Text' with actual type `Text'
    Expected type: Maybe Text -> Bool
      Actual type: Text -> Bool
    In the expression: T.null
    In the second argument of `any', namely
      `[T.null, T.any isPunctuation, T.any isSpace]' 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-28T01:19:46.067

您的[`fbEmail`](https://github.com/gertcuykens/haskell-design/blob/master/Login.hs#L25)函数返回一个`Maybe Text`. 如果您希望它始终是 a `Just`，您可以使用变量绑定左侧的模式来从中获取`Text`：

```
Just email <- liftIO . fbEmail $ both C.pack a 
```

使用以下帮助程序来提高可读性：

```
both :: (a -> b) -> (a, a) -> (b, b)
both f (x, y) = (f x, f y) 
```

但是，这会忽略错误，因此您应该使用其中一种`Data.Maybe`功能，例如`fromMaybe`or `maybe`。或者，您也可以使用显式`case`表达式：

```
maybeEmail <- ...
case maybeEmail of
  Just email -> ...  -- Do something with "email".
  Nothing ->    ...  -- Handle missing emails. 
```

如果您不需要根据是否`fbEmail`返回`Nothing`或在调用者中做不同的事情`Just`，您可以（并且应该）将此逻辑移动到`fbEmail`自身中。

# javascript - 用于隐藏/显示 div 的 Javascript if/else 语句

> ID：11697356
> 
> 赞同：1
> 
> 时间：2012-07-28T01:01:12.457
> 
> 标签：javascript, jquery, hide, if-statement

我有两个隐藏在视图中的 div，直到单击相应的图像链接。照原样，两个 div 可以通过单击一个然后另一个同时显示，我不希望这样。我正在尝试编写一个 if 语句，说明如果单击了另一个将不会显示，但我没有运气。这是我使用的 javascript 不起作用：

```
 $("#about").click(function () {
    if ($("#aboutdetails").fadeIn("slow") == 'true') {
    $("#contact").css({'display': 'none'});
    }
$("#aboutdetails").click("slow",function () {
        $(this).hide();     
    });
});

$("#contact").click(function () {
    if ($("#contactdetails").fadeIn("slow") == 'true') {
    $("#about").css({'display': 'none'});
    }
$("#contactdetails").click("slow",function () {
        $(this).hide();
    });
}); 
```

这是我尝试 if 语句之前的原始代码：

```
 $("#about").click(function () {
    $("#aboutdetails").fadeIn("slow", function() {
    $("#aboutdetails").click("slow",function () {
            $(this).hide();
        });
    });
});

$("#contact").click(function () {
   $("#contactdetails").fadeIn("slow", function() {
    $("#contactdetails").click("slow",function () {
           $(this).hide();
        });
   });
}); 
```

两者都不是很有口才，因为我还在学习！

感谢您提前提供任何帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T01:08:02.640

所以你有两个不同的 div，分别命名为“div1”和“div2”，链接为“link1”和“link2”......

```
$('#link1').click(function() {
    $('#div1').show();
    $('$div2').hide();
});

$('#link2').click(function() {
    $('#div2').show();
    $('$div1').hide();
}); 
```

那是你想要做的吗？点击link1 -> 显示div1，隐藏div2。点击link2 -> 显示div2 隐藏div1？

我不确定这是否是你想要的。如果不是，请尝试澄清您的问题。

使用您网站中的代码示例进行编辑：试试这个

```
$("#about").click(function () {
  $("#aboutdetails").fadeIn("slow", function() {

  });
  $("#contactdetails").hide();
});

$("#contact").click(function () {
$("#contactdetails").fadeIn("slow", function() {

});
$("#aboutdetails").hide();
});

$("#aboutdetails").click(function() {
   $("#aboutdetails").hide();
});
 $("#contactdetails").click(function() {
    $("#contactdetails").hide();
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T01:14:50.757

## *[jsBin 演示](http://jsbin.com/utijaq/1/edit)*

实际上......对于您的内容使用`classes`（例如：）会更简单，而s 仅用于您的按钮：`.box``ID`

```
 <ul id="nav">
    <li id="about">ABOUT</li>
    <li id="contact">CONTACT</li>
  </ul>

  <div class="box aboutdetails">
    About details here..........
  </div>

  <div class="box contactdetails">
    Contact details here..........
  </div> 
```

比你需要的是：

```
$('#nav li').click(function(){              // any li 'button'
  $('.box').hide();                         // hide opened
  $('.'+this.id+'details').fadeIn(600);     // this.id will take the button's ID
}); 
```

这个脚本的作用是：

*   在任何按钮上单击全部隐藏`.box`
*   注册被点击按钮的 ID ( `this.id`) 并搜索具有类似按钮`ID`+的类的元素`details`

不错吧？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-28T01:07:18.873

您可以使用以下方法检查另一个是否可见：

```
$('#blabla').is(':visible') 
```

它将返回*true*或*false*；

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-28T01:11:52.397

这是一个棘手的问题，因为您正在处理单击时将触发的单击事件，并且您无法控制用户单击 div 的时间，但是您可以做的是切换用户是否单击它使其可见并且隐藏其他。

这是它的代码

```
$("#about").click(function () {
 $("#aboutdetails").fadeIn("slow", function() {
  $("#contactdetails").hide();
  $("#aboutdetails").click("slow",function () {
   $(this).hide();
 });
 });
});

$("#contact").click(function () {
   $("#contactdetails").fadeIn("slow", function() {
    $("#aboutdetails").hide();
    $("#contactdetails").click("slow",function () {
     $(this).hide();
    });
  });
}); 
```

# java - 如何将子弹与枪对齐？

> ID：11697364
> 
> 赞同：1
> 
> 时间：2012-07-28T01:03:11.147
> 
> 标签：java, rotation, sprite, projectile, topdown

我有我的播放器的图像（自上而下的 2D）。玩家旋转面对镜头，并拿着枪。创建子弹时，它们会在玩家的 x 和 y 处创建。这在玩家面向正确方向时有效，但当玩家旋转并射击时，子弹会朝着正确的方向前进，但不会来自枪口。我怎样才能解决这个问题？

```
public void fire() {
    angle = sprite.getRotation();
    System.out.println(angle);
    x = sprite.getX();
    y = sprite.getY();

    Bullet b = new Bullet(x, y, angle);
    Utils.world.addBullet(b);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T01:14:13.160

您必须确定枪的偏移量（在油漆中打开图像，或反复试验），然后旋转该偏移量以获得子弹的初始位置。

类似以下的东西应该可以工作： *注意 - 我没有测试这个，它可能有错别字*

```
public void fire() {
    angle = sprite.getRotation();
    System.out.println(angle);
    x = sprite.getX();
    y = sprite.getY();

    double bulletX = x + (gunOffsetX * Math.cos(angle) - gunOffsetY * Math.sin(angle));
    double bulletY = y + (gunOffsetX * Math.sin(angle) + gunOffsetY * Math.cos(angle));

    Bullet b = new Bullet(bulletX , bulletY , angle);
    Utils.world.addBullet(b);
} 
```

* * *

资料来源：[http://en.wikipedia.org/wiki/Rotation_(mathematics)](http://en.wikipedia.org/wiki/Rotation_%28mathematics%29)

# java - Java：向量声明

> ID：11697366
> 
> 赞同：2
> 
> 时间：2012-07-28T01:03:45.693
> 
> 标签：java, vector

当我键入声明语句时：

```
Vector<double> distance_vector = new Vector<double>(); 
```

我收到错误消息（在两种情况下都下划线“双”）：

> 标记“double”上的语法错误，此标记后应有尺寸

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-28T01:06:07.573

您不能使用原语作为类型参数。如果您确实需要避免装箱/拆箱对性能的影响，您要么需要使用`Vector<Double>`（[甚至更好](https://stackoverflow.com/q/1386275/758280)，`List<Double>`），要么使用其中一个[Trove集合。](http://trove.starlight-systems.com/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T01:08:47.360

Java 泛型只能保存对象，不能保存原语

哦，太晚了；)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-03-04T11:54:49.563

最好的方法是使用 Vector，因为此类将原始类型 double 的值包装在一个对象中，该对象包含一个类型为 double 的单个字段。此外，它还允许您使用字符串类型进行转换。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-03-19T09:51:16.310

你应该去：

```
double [n] vector; 
```

将“n”替换为您的向量将具有的位置数。如果你愿意，你可以把它变大，我没有弄错。如果您希望向量的大小不固定，则应使用 Array 或 ArrayList 而不是向量。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-11-18T06:26:39.280

用这个：

```
Vector < Double > distance_vector = new Vector < Double >(); 
```

这是工作。

# flurry - Flurry Analytics 是按用户区分，还是提供整体分析？

> ID：11697368
> 
> 赞同：0
> 
> 时间：2012-07-28T01:04:01.207
> 
> 标签：flurry

在常见问题中找不到这个。Flurry 是否提供区分用户的分析？所以我可以看到这个用户做了一些动作，而另一个用户做了一些其他的动作..或者乱舞只是给出了整体分析（所有用户总共做了这些事件）

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T01:26:34.130

Flurry 本身并不能以您可以跟踪自己的方式区分您的用户。他们确实在幕后跟踪他们，以确定哪些用户是新用户或返回用户，哪些用户与您的其他应用程序相关联，但不会为您提供任何具体信息。

如果您想自己跟踪它们，它们确实有一个唯一的 ID，它们允许您设置。希望这可以帮助。

# php - 数据在发送前被重置

> ID：11697375
> 
> 赞同：0
> 
> 时间：2012-07-28T01:05:06.210
> 
> 标签：php, javascript, jquery, html, ajax

好吧，首先从代码开始

JavaScript：

```
function keyevent(e) // submit key
{
    if (e.keyCode == 13) // 13 = enter key
    { 
        $(this).val("");
    }
}

 $(document).ready(function () {
     $('#send').click(function() {
         $('.message').val("");
     });
 }); 
```

HTML：

```
<input type="text" name="message" class="message" onKeyDown="javascript:keyevent(event);" />
<button name="send" id="send" onclick="refresh();" />Send</button> 
```

然后我的页面上还有一个 if (isset($_POST['send')) 。但是当我看到我发送的消息时，消息框是空的，因为消息的值不存在。

所以我的问题是，我如何“延迟”删除操作？我试过延迟（）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T01:21:48.853

有根据的猜测，你需要的是这个。

Javascript：

```
$(document).ready(function () {

  $('.message').keyup(function(e) {
    if (e.keyCode == 13) { 
      $(this).val('');
    }
  });

  $('#send').click(function() {
    refresh();
    $('.message').val('');
  });

}); 
```

HTML：

```
<input type="text" name="message" class="message" />
<button name="send" id="send">Send</button> 
```

# android - 带有复选框而不是多项选择的列表视图

> ID：11697382
> 
> 赞同：0
> 
> 时间：2012-07-28T01:07:12.180
> 
> 标签：android, android-listview

我现在有我的 ListView，我想在其一侧插入一个复选框，我不想使用 MultipleChoice 项目。有人可以告诉我该怎么做吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T06:06:02.253

使用它来制作一个单一的选择列表视图：

```
ArrayAdapter<String> adapter = new ArrayAdapter<String>(this, 
                android.R.layout.simple_list_item_single_choice,
                arrayList);

listView.setChoiceMode(ListView.CHOICE_MODE_SINGLE);
listView.setAdapter(adapter); 
```

# java - 使用 Jetty 和 Null 密码的两种方式 SSL

> ID：11697383
> 
> 赞同：0
> 
> 时间：2012-07-28T01:07:16.940
> 
> 标签：java, encryption, ssl, jetty

我有一个在 Jetty 中运行的应用程序。在它前面，我有一个负载均衡器。要求是由负载均衡器完成 SSL 解密，而 Web 容器仅执行 SSL 客户端身份验证。

理论上，负载均衡器在解密内容方面非常有效，并且可以做到这一点并将其直接传递给 Web 容器。

知道如何实现吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-28T01:49:18.887

目前尚不清楚标题中的“空密码”是什么意思。有[3 个可能的候选](https://www.rfc-editor.org/rfc/rfc4346#appendix-C)者：`TLS_NULL_WITH_NULL_NULL`和。第一个不执行任何身份验证，它们都不提供任何加密。它们肯定对你的目标毫无用处。在浏览器和负载平衡器之间使用普通密码套件（具有身份验证和加密）。负载均衡器和工作节点之间的加密通常是可选的，只有当您不信任它们所在的网络时才需要（无论如何这将是一个完全不同的 SSL/TLS 连接，并且与客户端证书无关由最终浏览器完成的身份验证）。`TLS_RSA_WITH_NULL_MD5``TLS_RSA_WITH_NULL_SHA`

只有 SSL/TLS 服务器可以请求（和验证）客户端证书身份验证。在这种情况下，这将是负载平衡器。

如果您想让负载均衡器处理 SSL/TLS 流量，它应该验证证书（可能针对您配置的 CA），然后将证书信息中继到工作节点。

你如何做到这一点将取决于负载平衡器。如果是 Apache Httpd 服务器，`mod_proxy_ajp`将通过 AJP 协议 ( `SSLOptions +ExportCertData +StdEnvVars`) 中继客户端证书。`mod_jk`如果需要，还能够中继完整的客户端证书链 ( `JkOptions +ForwardSSLCertChain`)。

如果您想使用`mod_proxy_http`，一个技巧是通过 HTTP 标头 ( [`mod_header`](http://httpd.apache.org/docs/2.2/mod/mod_headers.html#header)) 传递证书，使用类似`RequestHeader set X-ClientCert %{SSL_CLIENT_CERT}s`. 如果此标头来自客户端的浏览器（否则可能伪造），您应该确保清除此标头。在这种情况下，您需要编写一个过滤器作为 Jetty 服务器的一部分来处理该标头并将其放入`javax.servlet.request.X509Certificate` `HttpServletRequest`属性中（它应该是一个 数组`X509Certificate`）。在此之后，您应该或多或少与 AJP 处于同一阶段。如果它们能够以类似的方式填充 HTTP 标头，这也可以与其他负载平衡器一起使用。

# android - SignalR 和 Android，我有什么选择？

> ID：11697388
> 
> 赞同：12
> 
> 时间：2012-07-28T01:08:09.623
> 
> 标签：android, signalr

我正在开发一个 ASP.NET MVC 应用程序，由浏览器中的 JavaScript 和本机 Android 应用程序使用，我希望使用 SignalR。这在浏览器中当然没有问题，但我不知道如何从 Android 应用程序接口。

我唯一的选择是：

1.  查找预先存在的 Android SignalR 库。或者
2.  编写自定义代码以与服务器端 SignalR 接口交互？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-24T12:17:06.607

我也在寻找适用于 Android 的 SignalR 客户端，但我没有找到，所以我开始自己开发一个。您可以在[https://github.com/erizet/SignalA](https://github.com/erizet/SignalA)查看。~~目前，它更像是一个概念验证，而不是一个已完成的库。~~ 它现在已更新到 SignalR 1.0 版本中使用的协议版本 1.2。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-28T23:51:42.637

我不知道您现在可以在 Android 应用程序中使用任何基于 Java 的实现。所以我认为你正在考虑选项#2。

Java 肯定具有能够非常轻松地与 SignalR 的长轮询传输实现进行通信所需的核心功能。您只是在考虑与`HttpClient`结合`org.json`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-31T05:51:49.760

如果可以选择基于 HTML5 的 Android 应用程序，您可以尝试使用本机 SignalR JavaScript 客户端。完美运行。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-21T19:35:13.977

在您的应用程序中托管一个隐藏的 webview 并使用脚本桥与其对话。在您的 web 视图中使用 javascript signalr 库。

# android - RECORD_SOUND_ACTION 意图，直接进入录音列表

> ID：11697391
> 
> 赞同：1
> 
> 时间：2012-07-28T01:08:19.503
> 
> 标签：android, android-intent

我有一个应用程序可以触发录音机的意图 (RECORD_SOUND_ACTION)，但我希望它直接进入录音列表。我可以添加一个 putExtra 来获得这个结果吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T01:39:26.763

我假设你有一部 HTC 手机——我相信 Voice Recorder 是一个股票 HTC 应用程序，而不是一个 Android 标准应用程序。如果是这种情况，如果您能找到该 apk，您或许可以使用[AppXplore](https://play.google.com/store/apps/details?id=com.sonyericsson.androidapp.AppExplore&hl=en)对意图进行逆向工程——尽管这仅适用于拥有 HTC 设备和/或语音记录器兼容版本的人。我不会推荐它。

或者，您可以毫不费力地调用`ACTION_PICK`并随后在返回的文件上启动音频播放器。[调用音频文件选择](https://stackoverflow.com/a/10461112/403455)器：

```
Intent intent = new Intent(Intent.ACTION_PICK,
   android.provider.MediaStore.Audio.Media.EXTERNAL_CONTENT_URI);
startActivityForResult(Intent.createChooser(intent, "Gallery"), reqCode); 
```

或者，

```
Intent intent = new Intent();
intent.setType("audio/*");
intent.setAction(Intent.ACTION_GET_CONTENT);
startActivityForResult(Intent.createChooser(intent,"Select Audio "), reqCode); 
```

# javascript - 如何使用javascript更改悬停时的图像

> ID：11697398
> 
> 赞同：0
> 
> 时间：2012-07-28T01:09:30.480
> 
> 标签：javascript, jquery, html, css

嘿伙计们，我是新来的，我想在我的网站上做点什么，我有一个 div，我希望当人们用鼠标悬停它时，它会将其中的图像更改为另一个图像。我找到了这个[http://jsfiddle.net/EXNZr/1/](http://jsfiddle.net/EXNZr/1/)但它只在我悬停图像时才有效，当我悬停 div 时如何让它改变？提前致谢，抱歉英语不好

```
<div id="content"><img id="changeonhover" src="../test/images/yes.png"></div> 
```

这是我的代码，我希望当人们将鼠标悬停在“内容”上时，“changeonhover”中的图像会变成 no.gif

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T01:12:59.307

试试这个：http: [//jsfiddle.net/Ry8E4/](http://jsfiddle.net/Ry8E4/)

```
$(document).ready(function()
{
    $("#theDiv").hover(
        function()
        {
            $("#imgDino").attr("src", "http://www.sitevip.net/gifs/dinosaur/2348_animado.gif");
        },
        function()
        {
            $("#imgDino").attr("src", "http://bestuff.com/images/images_of_stuff/64x64crop/t-rex-51807.jpg?1176587870");
        }                         
    );                  
});​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T01:13:14.377

[http://jsfiddle.net/EXNZr/54/](http://jsfiddle.net/EXNZr/54/)

您只需将悬停事件处理程序应用于父 div 并使用 .find(); 更改图像标签的 src；

参考：

[http://api.jquery.com/find/](http://api.jquery.com/find/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-28T01:13:32.780

```
$(document).ready(function() {
    $("#content").hover(
        function()
        {
            $('#changeonhover', this).attr("src", "http://www.sitevip.net/gifs/dinosaur/2348_animado.gif");
        },
        function()
        {
            $('#changeonhover', this).attr("src", "http://bestuff.com/images/images_of_stuff/64x64crop/t-rex-51807.jpg?1176587870");
        }                         
    );                  
}); 
```

调用事件 on`#content`而不是 on `#changehover`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-28T01:14:07.400

不得不告诉您，如果您将`<img>`标签更改为`<div>`带有背景图像，则可以纯粹使用 CSS 来完成

# mysql - 多个 MySQL 查询（无 PHP）

> ID：11697399
> 
> 赞同：1
> 
> 时间：2012-07-28T01:09:31.087
> 
> 标签：mysql

我想知道是否可以执行 SQL 查询，然后使用生成的 ID 更新另一个表并继续遍历所有行？

我有这个有效的 SQL 查询，但我需要做的是在将每一行添加到卡片之后，然后使用最后生成的 ID 更新 merged.cars_id 以便将它们链接起来。通常我会用 PHP 来做这件事，但理想情况下，如果可能的话，我只想用 MySQL 来做。

主要查询

```
INSERT INTO cards (first_contact_date, card_type, property_id, user_id)
SELECT first_contact_date, 'P', property_id, user_id FROM merged 
```

然后我需要匹配行（大致）

```
 UPDATE merged SET merged.card_id = LAST_INSERT_ID (FROM ABOVE) into the matching record.. 
```

这样的事情可能吗？我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T01:13:01.563

我建议使用 MySQL 触发器来执行此操作 [http://dev.mysql.com/doc/refman/5.0/en/create-trigger.html](http://dev.mysql.com/doc/refman/5.0/en/create-trigger.html)

触发器是一个函数，它将在对表的任何记录执行 INSERT、DELETE 或 UPDATE 之后或之前执行。

在您的情况下，您需要在仅更新**合并**表的**卡上执行 AFTER INSERT。**确保它在插入之后，否则您将无法访问新行的 ID。

 **代码看起来像这样，假设卡表中的 id 字段名为“id”

```
delimiter |

CREATE TRIGGER updating_merged AFTER INSERT ON cards
  FOR EACH ROW BEGIN
    UPDATE merged SET card_id = NEW.id;
  END;
|
delimiter ; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T01:14:04.340

我可以建议存储过程吗？

[http://dev.mysql.com/doc/refman/5.0/en/create-procedure.html](http://dev.mysql.com/doc/refman/5.0/en/create-procedure.html)

**- 编辑 -**

啊，是的，触发器。对于这种特殊情况，吉米有答案。为了链接，我将离开这篇文章。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-28T01:14:12.730

我会设置一个触发器来做到这一点。对于 mysql，请阅读[http://dev.mysql.com/doc/refman/5.0/en/triggers.html](http://dev.mysql.com/doc/refman/5.0/en/triggers.html)。这就是触发器旨在处理的内容。**

# c - 寻找 AES-128 和 DES 的简单 C 实现

> ID：11697402
> 
> 赞同：3
> 
> 时间：2012-07-28T01:10:45.387
> 
> 标签：c, aes, implementation, des, sparc

我需要 C 版本的 AES-128 和 DES 才能在嵌入式 SPARC 处理器上运行。我正在尝试在软件和硬件中测量这些算法的电力。有没有可以找到软件实现的网站？目前我可以用我的交叉编译器编译 C 代码，所以 C 以外的任何语言实现都没有用。

我之前已经在硬件中实现了 DES。人们估计实现一个软件版本需要多少工作（小时/代码行）？

有人知道如何在加密目录中使用 Linux 内核中内置的 aes_generic.c 和 des_generic.c 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T22:20:43.553

您可能想看看[LibTomCrypt](https://github.com/libtom/libtomcrypt)是否能满足您的需求

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T01:23:15.643

维基百科有一个[AES 实现](http://en.wikipedia.org/wiki/AES_implementations)列表。简单的谷歌搜索还发现了C 中的[DES](http://www.ubiqx.org/proj/libcifs/source/Auth/DES.c)实现；你必须看看它是否符合你的要求。

# jquery - 在输入 jquery 期间检查，而不是在模糊后检查

> ID：11697406
> 
> 赞同：1
> 
> 时间：2012-07-28T01:11:48.943
> 
> 标签：jquery, form-submit, submitchanges, disabled-control

我有一个可能很容易解决的小问题，但我还没有那么好。我写了这个简单的代码

```
$(document).ready(function(){
    $('#email').change(function(){
        var regexp = /^\w+[@]\w+\.\w{2,4}$/;
        if(regexp.test($(this).val())){
            document.getElementById("submit").disabled = false;
        }
    });
}); 
```

它检查电子邮件在表单中是否有效，如果是，则启用提交按钮。问题是它在我点击其他任何地方后验证电子邮件，而不是在打字期间。所以基本上我必须点击电子邮件字段之外的某个地方，然后我可以点击提交。如果我将键入正确的电子邮件并且不会单击此字段之外的任何位置，则不会解锁提交。我应该在这里改变什么？有任何想法吗？我很感激所有的答案。先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T01:15:59.210

尝试使用

```
$('#email').keyup(function(){
    var regexp = /^\w+[@]\w+\.\w{2,4}$/;
    if(regexp.test($(this).val())){
        $("#submit").prop('disabled', false);
    }
    else $("#submit").prop('disabled', true);
}); 
```

或者

```
$('#email').on('keyup', function(){
    var regexp = /^\w+[@]\w+\.\w{2,4}$/;
    if(regexp.test($(this).val())){
        $("#submit").prop('disabled', false);
    }
    else $("#submit").prop('disabled', true);
}); 
```

[**工作示例**](http://jsfiddle.net/v73vz/)。

# ruby-on-rails - 如何摆脱 Rails 中的空白？

> ID：11697411
> 
> 赞同：4
> 
> 时间：2012-07-28T01:12:49.347
> 
> 标签：ruby-on-rails, ruby-on-rails-3, escaping, whitespace, html-entities

我知道 rails 会自动转义诸如“<”或“&”之类的字符，但这对于相邻的多个空格没有任何作用。我想逃避一切，包括空间。

我知道通常你不想使用`&nbsp;`，你应该使用 css 来代替。但是，我试图接受用户输入并显示它，所以 css 是不可行的。

例如，我有用户输入：`    test    `. 当我`<%=@user_input%>`在视图中显示它时，额外的空格显示为一个空格（尽管它在源中正确显示）。

有没有一种简单的方法来逃避空白？我应该只使用`h @user_input`然后替换所有空格吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-28T01:23:13.237

空格不会被删除。浏览器只是将多个空白字符解释为一个空格。

如果需要，您可以将每个空间转换为`&nbsp;`：

```
<%= raw @user_input.gsub(/\s/, "&nbsp;") %> 
```

您也可以用空标签替换每个空格`<span class="whitespace"></span>`，然后使用 CSS 设置您喜欢的空白“字符”样式。

最后，您也可以使用样式*（下面的示例）*[仅使用 CSS](http://www.w3.org/wiki/CSS/Properties/white-space)来执行此操作。`white-space: pre`

 **   [http://jsfiddle.net/G3VnY/](http://jsfiddle.net/G3VnY/)

**编辑** *（回答您评论中的后续问题）*

```
<%= raw h("this      is      a    sample   &  with   ampersand.").gsub(/\s/, "&nbsp;") %> 
```

这会转义源代码中的`&`as *（并且对其他 HTML 实体执行类似操作）*，然后进行to转换。`&amp;`*`" "``&nbsp;`**

# core-animation - UILabel 未发布且位置显示错误

> ID：11697415
> 
> 赞同：0
> 
> 时间：2012-07-28T01:13:27.223
> 
> 标签：core-animation, position, uilabel, hide, release

我想做的是第一次在加载视图上显示一个标签。当用户点击一个对象时，该标签应该消失并且三个圆圈应该出现在它的位置上。但是发生的事情是，*当我试图释放它时，我的标签并没有隐藏*，因为我不再需要它了。它也不*存在于*我想要的位置。

![加载并点击后查看](../Images/2664651df2f077a297c5c3534be6b53c.png)

我所做的是：

```
@interface AnimateCircle : UIViewController
{
UILabel *text;
CALayer *smallCircle1;
CALayer *smallCircle2;
CALayer *smallCircle3;
} 
```

然后为标签声明属性并合成它。**请注意，我已添加** `AnimateCircle` **为视图的子视图。所以我的子视图从第二个图中所示的小圆圈开始。**

在`viewDidLoad`中，我写道：

```
text = [[UILabel alloc] initWithFrame:CGRectMake(10, 5, 310, 100)];
text.text = @"Tap the Red Button To Start The Timer...!";
text.font = [UIFont fontWithName:@'SnellRoundHand-Bold" size:8];

[self.view addSubview:text];
[text release]; 
```

在点击手势时，我调用了一个方法，在该方法中我释放标签`text`以隐藏它。

```
[text removeFromSuperView]; 
```

并在其位置画三个圆圈。只是显示位置...

```
smallCircle1.frame = CGRectMake(100, 15, 30, 30);
smallCircle2.frame = CGRectMake(140, 15, 30, 30);
smallCircle3.frame = CGRectMake(180, 15, 30, 30); 
```

挣扎2小时后失败。请有人能告诉我我错过了什么吗？非常感谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T01:23:19.030

您实际上必须将 3 个圆圈添加到视图中。

使用 `self.view.layer addSublayer:`.

# javascript - 如何在 JavaScript 中显示评论线程层次结构？

> ID：11697420
> 
> 赞同：1
> 
> 时间：2012-07-28T01:13:56.060
> 
> 标签：javascript, json

我在 JSON 中有一组评论。这个 JSON 被加载到浏览器中。我希望将评论显示为线程评论层次结构，最近的评论在前。我做了很多搜索以找到正确的算法。当然，这是一个已解决的问题，但我找不到。

解释 JSON 字段：

*   createdtime = epochseconds（评论创建时间）
*   documentid = 此评论的 documentid
*   parentdocumentid = 此评论作为回复的评论的 documentid
*   topleveldocumentid = 评论所属博文的 documentid

问题是，使用 Javascript 将这些评论以层次结构形式显示在 HTML 中的有效方法是什么？（jquery代码很好）

```
[
    {
        "commenttext": "This is a comment",
        "parentdocumentid": "c88cbdd6d05811e19fe912314301329d",
        "doctype": "comment",
        "topleveldocumentid": "c88cbdd6d05811e19fe912314301329d",
        "createdtime": 1343222535,
        "documentid": "c0341e96d65b11e1a91d12314301329d"
    },
    {
        "commenttext": "This is a another comment",
        "parentdocumentid": "c88cbdd6d05811e19fe912314301329d",
        "doctype": "comment",
        "topleveldocumentid": "c88cbdd6d05811e19fe912314301329d",
        "createdtime": 1343222639,
        "documentid": "fe5209e0d65b11e1a91d12314301329d"
    },
    {
        "commenttext": "Yet another comment",
        "parentdocumentid": "c88cbdd6d05811e19fe912314301329d",
        "doctype": "comment",
        "topleveldocumentid": "c88cbdd6d05811e19fe912314301329d",
        "createdtime": 1343297245,
        "documentid": "b2d9f0f0d70911e1903d12314301329d"
    },
    {
        "commenttext": "I have a comment",
        "parentdocumentid": "c88cbdd6d05811e19fe912314301329d",
        "doctype": "comment",
        "topleveldocumentid": "c88cbdd6d05811e19fe912314301329d",
        "createdtime": 1343364418,
        "documentid": "1971ca6cd7a611e180fa12314301329d"
    }
] 
```

编辑：根据评论，我有更具体的问题：具体来说，我的问题是：

1：这个JSON数据结构是不是链表？”（即每一项都指定了它的父项）

2：是否有一种众所周知的算法可以遍历链表并将其显示为排序的评论层次结构？如果是，有人可以指导我进行描述吗？

3：评论层次结构是“有序树”的同义词吗？

谢谢

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-28T01:17:19.273

将下划线库用于模板，并使用`for ... in`循环遍历数组中的每个对象（注释）。

这是使用此方法应遵循的基本模式的模型：

```
var data = {...your json obj...},
    markup = $("#tmpl").html(),
    commentTmpl = _.template(markup);

for (comment in data) {
    $("#comment-list").append( commentTmpl(comment) );
} 
```

还有你的模板：

```
<script type="javascript/template">
    <li><%= commenttext %></li>
</script> 
```

**阅读这些以了解：**

*   骨干模板文档：[http ://underscorejs.org/#template](http://underscorejs.org/#template)
*   jQuery 文档： http: [//jQuery.com](http://jQuery.com)（使用搜索功能了解*任何*jQuery 方法）

# php - 如何跳过 WordPress 中的第一篇文章？

> ID：11697427
> 
> 赞同：6
> 
> 时间：2012-07-28T01:14:30.193
> 
> 标签：php, wordpress

如何跳过 WordPress 中的第一篇文章？

```
<?php
$recentPosts = new WP_Query();
$recentPosts->query(array('showposts' => 6,'post_type' =>array('stiri')));
?>
<?php while ($recentPosts->have_posts()) : $recentPosts->the_post(); ?> 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-28T01:18:48.303

使用[`offset`](https://codex.wordpress.org/Class_Reference/WP_Query#Pagination_Parameters)参数：

```
<?php
$recentPosts = new WP_Query( 'offset=1' ) );
$recentPosts->query(array('showposts' => 6,'post_type' =>array('stiri')));
?>
<?php while ($recentPosts->have_posts()) : $recentPosts->the_post(); ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-10-21T12:55:15.930

使用**偏移量**

```
$recentPosts = new WP_Query (
   array(
     'post_type'      => 'stiri',
     'post_status'    => 'publish',
     'posts_per_page' => 6, // all = -1
     'orderby'        => 'date',
     'order'          => 'DESC',
     'offset'         => 1
   )
); 
```

# xquery - XQuery - 排序不正确

> ID：11697431
> 
> 赞同：0
> 
> 时间：2012-07-28T01:15:14.753
> 
> 标签：xquery, flwor

Order by 子句似乎不起作用。我有正确的 xquery 查询吗？

```
for $record in doc('XQuery.xml')/dataroot/RecentIndices_solarFlux 
where $record/Month = 1 or
        $record/Month = 2
order by $record/Geomagnetic_Smoothed_Ap
return $record 
```

我得到的输出是这样的：

-1、10.5、11.6、5、8.7

我正在使用 Stylus Studio X14 Release 2 XML Enterprise Suite。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T08:43:48.423

我发现问题是因为我使用的是十进制数字，所以我用 xs:decimal(exp.) 依次包围了路径。

# grails - 我可以在 Grails 项目之外使用 Grails 插件类作为 Jar 依赖项吗？

> ID：11697433
> 
> 赞同：1
> 
> 时间：2012-07-28T01:15:39.017
> 
> 标签：grails, groovy, grails-plugin

我在 grails 插件中发现了一些可以在 grails 外部使用的代码。除了创建两个项目之外，有没有办法将插件中的代码用作 groovy 项目中的依赖项？

例如，我发现了以下项目：

[https://github.com/jeffellis/grails-yammer-metrics](https://github.com/jeffellis/grails-yammer-metrics)

他们为我想在 grails 项目之外使用的 Groovy 代码创建了一些注释。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T01:35:18.250

从 grails 2.1 开始，您可以将插件导出为二进制插件，然后声明为常规 jar 依赖项（通过 groovy 中的葡萄）。[http://grails.org/doc/latest/guide/plugins.html#binaryPlugins](http://grails.org/doc/latest/guide/plugins.html#binaryPlugins)

我猜，代码的可重用性取决于插件与代码的耦合程度。

# outlook-2010 - 将 pop pst 远程合并到交换 pst 文件中

> ID：11697440
> 
> 赞同：0
> 
> 时间：2012-07-28T01:17:41.833
> 
> 标签：outlook-2010, exchange-server-2010, pst

我有一个 pst 文件，我想上传到交换服务器并成为交换邮箱的永久部分。

这可以通过进入 file->advanced->export->"import from another program" 并导入 pst 文件来完成吗？

我需要确保合并的电子邮件存储在交换服务器上，因为这不是我的邮箱，我正计划在我的计算机上设置一个新的邮件配置文件来进行导入。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T13:22:26.447

我验证了这个过程实际上会将导入的 pst 合并到服务器上的交换邮箱中。

文件 -> 高级 -> 导出 -> “从另一个程序导入”

Outlook 将导入 pst，然后单击同步，添加的电子邮件将被推送回 Exchange 服务器。

# codeigniter - Codeigniter base_url() 坏了？

> ID：11697441
> 
> 赞同：0
> 
> 时间：2012-07-28T01:18:11.830
> 
> 标签：codeigniter, base-url

我试图用以下代码设置一个基本的登录表单：

```
<?=form_open(base_url() . 'main/login'); ?> 
```

但是，在提交表单后，url 会显示：

```
example.com/main/http//example.com/http//example.com/main/login 
```

所以我想本质上出于某种原因，base-url 在控制器/方法声明之前打印了两次。如果我清除配置文件中的基本 url 值，则应用程序可以正常工作。然而，我很好奇可能导致这种情况的原因。有关其他信息，我正在使用虚拟主机处理 xampp，并且我使用位于文档根目录的 .htaccess 文件进行了 mod-rewrite。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T05:20:48.387

CodeIgniter 在你使用表单助手时会自动将 base_url 添加到表单的操作中。

例如，您可以使用：

```
<?=form_open('main/login'); ?> 
```

这将产生：http//example.com/main/login

和正确的网址！很简单！:D 更多信息请访问： [http ://codeigniter.com/user_guide/helpers/form_helper.html](http://codeigniter.com/user_guide/helpers/form_helper.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T05:06:41.333

**application/config**`config.php`下的文件具有以下设置：

 **```
$config['base_url'] = ''; 
```

给它文件夹/目录路径。例如：

```
$config['base_url'] = 'http://localhost/ci_test/'; 
```

不要忘记提及协议 (http://)。或者尝试该`site_url()`方法而不是`base_url()`表单打开。如果使用以下`form_open()`功能，请跳过它：

```
<form action="<?php echo site_url('main/login'); ?>"> ... </form> 
```

或者

```
<?php form_open('main/login'); ?> 
```

如需更多帮助：[http ://codeigniter.com/user_guide/helpers/url_helper.html](http://codeigniter.com/user_guide/helpers/url_helper.html)

不确定`.htaccess`您使用的文件。但这可能是[codeigniter的答案：为什么当我在锚标记的href属性中回显base_url（）时，它会回显两次](https://stackoverflow.com/questions/11444121/codeigniter-why-is-that-when-i-echo-base-url-in-an-href-attribute-of-an-ancho)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-28T01:26:36.087

通过参数试试：

```
<?=form_open(base_url('main/login')); ?> 
```

或者

```
<?=form_open site_url('main/login')); ?> 
```

为了附加前缀也

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-21T11:57:51.043

您可以使用

```
<?php echo form_open(base_url(main/login)); ?> 
```

您必须使用“echo”而不是因为它在某些浏览器中不起作用....**

# windows - Windows Server 2008 上的权限和 SVN 更新：相同的文件夹和 SVN 帐户，不同的 Active Directory 用户

> ID：11697446
> 
> 赞同：11
> 
> 时间：2012-07-28T01:19:16.947
> 
> 标签：windows, svn, tortoisesvn, windows-server-2008

从 Windows Server 2003 切换到 Server 2008 后，我们遇到了 SVN 的奇怪权限问题。

在我们的标准构建框中，有一个文件夹 ( `C:\SVN_Code_Folder`)，AD_User_A 使用 SVN_User 和 TortoiseSVN 1.7.6 将其与 SVN 存储库相关联

在使用Windows 2003 时，当AD_User_B 登录该框并尝试更新、切换、合并SVN_Code_Folder 与SVN_User 时，将执行该命令。

在 Windows 2008 中，它失败并显示以下消息：

> 命令：更新
> 错误：工作副本 'C:\jboss-4.2.3.GA\server\New 文件夹'已锁定
> 错误：sqlite：尝试写入只读数据库
> 错误：sqlite：尝试写入只读数据库
> 已完成！

尝试通过上下文菜单解锁从未锁定的文件会遇到以下消息：

> 没有什么可以解锁的。此工作副本中没有文件被锁定。

我玩过文件夹的权限，发现让“域用户”控制文件夹可以解决问题，但我不希望拥有如此广泛的权限。我尝试向单个用户和 SVN 组授予相同的权限，但这些也不起作用。

我错过了什么？
这是对SVN的不当使用吗？
2 个不同的域用户可以在不删除 .SVN 文件的情况下使用 SVN 更新文件夹吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-10-10T19:35:10.530

备查...

我从旧机器上的文件共享复制到新笔记本电脑的硬盘上的一些 WC 也遇到了同样的问题。

事实证明，通过让我自己（而不是所有域用户或任何其他组）完全控制文件夹来解决问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T22:02:32.510

Did you check the svn service user on the win2008 machine? Does that user have local administrator privileges and also have permission to these folders on c:? After changing anything restart the service.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-23T09:45:52.333

对我来说，更改文件夹权限没有帮助，但我在批处理脚本中更新了几个目录，所以我解决了这个问题

> cmd -> 以管理员身份运行 -> 启动更新脚本

# c# - C# Process StandardOutput.ReadLine 返回想要的输出，但这被无缘无故地删除了

> ID：11697448
> 
> 赞同：0
> 
> 时间：2012-07-28T01:20:02.253
> 
> 标签：c#, process, mono, gtk, gtk#

```
System.Diagnostics.Process proc = new System.Diagnostics.Process();
proc.StartInfo.RedirectStandardOutput = true;
proc.StartInfo.UseShellExecute = false;
proc.StartInfo.FileName="id";
proc.StartInfo.Arguments="-un";
proc.Start();
string nome_user = proc.StandardOutput.ReadLine();
proc.WaitForExit(); 
```

嗨，我正在尝试使用 Mono GTK# 运行 shell 命令。当调试器在**proc.Start();** 行，添加到 watch 的**proc.StandardOutput.ReadLine()**正确显示输出，但是当调试器跳转到下一行时（**string nome_user = proc.StandardOutput.ReadLine();**），没有理由**proc.StandardOutput的值.ReadLine()**变为空。你能帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T01:24:23.913

好吧，如果您在调试器中读取它，它已经从流中被消耗掉了。流不会神奇地倒带，因此可以再次读取。

# iphone - 将应用程序置于前台

> ID：11697451
> 
> 赞同：2
> 
> 时间：2012-07-28T01:21:31.310
> 
> 标签：iphone, ios, ipad, jailbreak

一旦计时器用完，有没有办法将我的应用程序带到前台？这是一个信息亭类型的应用程序，它将在用户会话期间的不同点显示一些信息。

这适用于仅安装在我们的企业设备上的应用程序，因此不会提交给 Apple 审批。我也愿意探索越狱选项。

我很感激你们可以提供的任何帮助/提示。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-29T21:17:08.597

是的，从技术上讲，您可以使用 Xcode 进行越狱开发（但您不必这样做）。如果您希望您的应用程序安装在普通沙箱之外，并且在**/Applications/**中，那么您将使用 Xcode 构建**而不使用**代码签名、伪造代码签名（或使用自签名证书），然后将应用程序复制/安装到您的设备，使用`scp`或类似的东西（也许有一个脚本）。

您也可以在“Theos”、“Logos”或“iOSOpenDev”等工具上进行谷歌搜索。 [更多在这里](http://iphonedevwiki.net/index.php/Main_Page)

此外，[有关使用 Xcode 进行虚假代码签名的信息，请参阅此页面](http://thebigboss.org/hosting-repository-cydia/submit-your-app/compile-for-cydia-submission)。

在将应用程序带到前台方面，至少有两种方法可以处理：

一种是使用 Cydia 安装（免费）实用程序`open`。使用，您可以使用其捆绑 ID（例如）`open`发出命令行调用以打开任何应用程序。如果您想以编程方式执行此操作，请在调用`open com.mycompany.MyAppName`中发出该命令：`system()`

```
 #import <stdlib.h>

 int returnCode = system("/usr/bin/open com.mycompany.MyAppName"); 
```

另一种选择是[通过@WrightsCS 查看这个答案](https://stackoverflow.com/a/11693879/119114)。确保也阅读评论，了解它的去向。

* * *

**更新：**就将您的应用程序置于后台而言，您可以使用`exit(0)`或完全终止您的应用程序`[[UIApplication sharedApplication] terminateWithSuccess]`。或者，[请参阅此答案以获取以编程方式模拟主页按钮按下的解决方案](https://stackoverflow.com/a/15997772/119114)，这会将应用程序发送到后台而不杀死它。

您将无法使用`NSTimer`，因为当您的应用程序处于后台时，计时器不会触发。但是，您**可以**使用 GCD*块*来运行您的后台工作，并`system()`调用 with`open`将您带回前台。

[看到这个答案，可能一直滚动到他的帖子底部](https://stackoverflow.com/a/4808049/119114)

[或查看这个类似的答案，该答案实际上发布在问题的底部](https://stackoverflow.com/questions/8920844/force-app-to-close-and-run-in-background)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-11T08:43:27.483

将您的应用程序带到前台的越狱选项：

使用 MobileSubstrate 连接到 SpringBoard。您可以找到具有良好名称的类和方法，例如`[SBApplicationIcon launch]`和`[SBApplication launch]`。另一种可能性是使用`SBSLaunchApplicationWithIdentifier()`SpringBoardServices 私有框架。

暂停应用程序的选项：

您很可能可以通过使用 MobileSubstrate 让 SpringBoard 为您关闭特定应用程序来再次执行此操作。`[SBUIController handleMenuTap]`也许您可以通过调用或类似的方式模拟主页按钮单击。

# objective-c - 表视图添加功能？

> ID：11697453
> 
> 赞同：0
> 
> 时间：2012-07-28T01:21:55.327
> 
> 标签：objective-c, xcode4

我是 iOS 开发领域的新手。

我有一个带有四个选项卡的选项卡栏应用程序，我的第二个选项卡是一个导航控制器，当我按下它推送到我的详细视图的单元格时，它上面有一个表格。我的第三个选项卡是最喜欢的选项卡，我想要的是，如果我喜欢表格视图中的任何内容，我如何才能使该值进入“收藏夹”选项卡中，该选项卡中可能也有一个表格。

我想要你的想法我该怎么做？

（就像我应该在导航栏上有一个按钮“添加到收藏夹”，只要我点击那个选项卡，我的表格就会进入编辑模式，每个单元格前面都有一个“+”号，我喜欢的值我按下+ 符号，它进入最喜欢的选项卡）这是我的想法，但我真的不知道如何实现它。

你能帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T10:18:53.723

这个问题对于 Stack Overflow 来说太大了。你应该仔细阅读[Apple 的示例代码和文档](http://developer.apple.com/library/ios/navigation/#section=Resource%20Types&topic=Sample%20Code)。

为了让你开始：

*   对于 4 个选项卡，您很可能希望将所有内容嵌入到 中[`UITabBarController`](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UITabBarController_Class/Reference/Reference.html)，这将是您的根视图控制器。

*   要获得您正在寻找的编辑模式功能，您需要覆盖`- (UITableViewCellEditingStyle)tableView:(UITableView *)tableView editingStyleForRowAtIndexPath:(NSIndexPath *)indexPath`以启用它。（见[`UITableViewDelegate`文档](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITableViewDelegate_Protocol/Reference/Reference.html)）。

*   使用编辑模式“+”按钮功能将单元格添加到收藏夹列表是不直观的。在用于添加更多字段或更多信息的上下文中，您的用户将习惯于在联系人应用程序等中看到该按钮。他们不会期望它将内容放在不同选项卡的列表中。查看 Apple 如何在联系人应用程序中管理收藏夹，了解如何正确操作的示例。您还应该查阅[人机界面指南](http://developer.apple.com/library/ios/#DOCUMENTATION/UserExperience/Conceptual/MobileHIG/Introduction/Introduction.html)。

# ruby-on-rails - 为什么在填写所有表单字段之前我的注册表单无法使用？

> ID：11697455
> 
> 赞同：0
> 
> 时间：2012-07-28T01:22:06.410
> 
> 标签：ruby-on-rails

几天前，我正在构建的应用程序的注册表单运行良好。即使没有填写表单字段，“创建我的帐户”按钮也会起作用，并且会立即显示错误消息。现在，当我尝试提交表单时，只有在填写完所有字段后，表单才会提交或显示错误消息。如果我尝试在不填写所有字段的情况下提交表单，则不会发生任何事情。注册按钮无法正常工作。

我能想到的唯一重大改变是将我使用的条带计划转换为免费试用计划，而不是应用程序购买者预付费用的计划。我不知道是什么导致了这个问题，所以我不知道我应该发布什么代码。您可以提供的任何帮助将不胜感激。

我在 rails 中的注册表单如下（减去我用于 Stripe 的一些 javascript）：

```
<div class="row">
<div class="span6 offset4">
    <%= form_for(@user) do |f| %>

        <%= render 'shared/error_messages' %>

        <%= f.label :name %>
        <%= f.text_field :name %>

        <%= f.label :email %>
        <%= f.text_field :email %>

        <%= f.label :password %>
        <%= f.password_field :password %>

        <%= f.label :password_confirmation, "Password confirmation" %>
        <%= f.password_field :password_confirmation %>

        <%= f.label :morning_meds, "Do you take medications in the morning?" %>
        <%= f.select :morning_meds, [['Yes'], ['No']] %>

        <%= f.label :lunch_meds, "Do you take medications at lunch?" %>
        <%= f.select :lunch_meds, [['Yes'], ['No']] %>

        <%= f.label :night_meds, "Do you take medications in the evening?" %>
        <%= f.select :night_meds, [['Yes'], ['No']] %>

        <%= f.label :time_zone, "Choose your time zone" %>
        <%= f.select :time_zone, [['Eastern'], ['Central'], ['Mountain'], ['Pacific']] %>

        <%= f.label :phone_number, "Your cell phone number" %>
        <%= f.text_field :phone_number %>

        <div class="form-row">
                    <label>Card Number</label>
                    <input type="text" size="20" autocomplete="off" class="card-number" />
                </div>
                <div class="form-row">
                    <label>CVC</label>
                    <input type="text" size="4" autocomplete="off" class="card-cvc" />
                </div>
                <div class="form-row">
                    <label>Expiration Date</label>
                    <%= select_month nil, {add_month_numbers: true}, {name: nil, class: 'card-expiry-month' } %>
                    <span> / </span>
                    <%= select_year nil, {start_year: Date.today.year, end_year: Date.today.year+15}, {name: nil, class: 'card-expiry-year' } %>
                </div>

    <%= f.submit "Create my account", class: "btn btn-large btn-primary" %>
    <% end %>
</div>
</div>

   <div class="row"> 
    <div class="span6 offset4"> 
        <form accept-charset="UTF-8" action="/users" class="new_user" id="new_user" method="post"><div style="margin:0;padding:0;display:inline"><input name="utf8" type="hidden" value="&#x2713;" /><input name="authenticity_token" type="hidden" value="QqrFVykfeY1+9jImvp8VjTzrQxq8VlBF+vC6V85klw0=" /></div> 

            <label for="user_name">Name</label> 
            <input id="user_name" name="user[name]" size="30" type="text" /> 

            <label for="user_email">Email</label> 
            <input id="user_email" name="user[email]" size="30" type="text" /> 

            <label for="user_password">Password</label> 
            <input id="user_password" name="user[password]" size="30" type="password" /> 

            <label for="user_password_confirmation">Password confirmation</label> 
            <input id="user_password_confirmation" name="user[password_confirmation]" size="30" type="password" /> 

            <label for="user_morning_meds">Do you take medications in the morning?</label> 
            <select id="user_morning_meds" name="user[morning_meds]"><option value="Yes">Yes</option> 
    <option value="No">No</option></select> 

            <label for="user_lunch_meds">Do you take medications at lunch?</label> 
            <select id="user_lunch_meds" name="user[lunch_meds]"><option value="Yes">Yes</option> 
<option value="No">No</option></select> 

            <label for="user_night_meds">Do you take medications in the evening?</label> 
            <select id="user_night_meds" name="user[night_meds]"><option value="Yes">Yes</option> 
<option value="No">No</option></select> 

            <label for="user_time_zone">Choose your time zone</label> 
            <select id="user_time_zone" name="user[time_zone]"><option value="Eastern">Eastern</option> 
<option value="Central">Central</option> 
<option value="Mountain">Mountain</option> 
<option value="Pacific">Pacific</option></select> 

            <label for="user_phone_number">Your cell phone number</label> 
            <input id="user_phone_number" name="user[phone_number]" size="30" type="text" /> 

            <div class="form-row"> 
                        <label>Card Number</label> 
                        <input type="text" size="20" autocomplete="off" class="card-number" /> 
                    </div> 
                    <div class="form-row"> 
                        <label>CVC</label> 
                        <input type="text" size="4" autocomplete="off" class="card-cvc" /> 
                    </div> 
                    <div class="form-row"> 
                        <label>Expiration Date</label> 
                        <select class="card-expiry-month" id="date_month"> 
<option value="1">1 - January</option> 
<option value="2">2 - February</option> 
<option value="3">3 - March</option> 
<option value="4">4 - April</option> 
<option value="5">5 - May</option> 
<option value="6">6 - June</option> 
<option value="7">7 - July</option> 
<option value="8">8 - August</option> 
<option value="9">9 - September</option> 
<option value="10">10 - October</option> 
<option value="11">11 - November</option> 
<option value="12">12 - December</option> 
</select> 

                        <span> / </span> 
                        <select class="card-expiry-year" id="date_year"> 
<option value="2012">2012</option> 
<option value="2013">2013</option> 
<option value="2014">2014</option> 
<option value="2015">2015</option> 
<option value="2016">2016</option> 
<option value="2017">2017</option> 
<option value="2018">2018</option> 
<option value="2019">2019</option> 
<option value="2020">2020</option> 
<option value="2021">2021</option> 
<option value="2022">2022</option> 
<option value="2023">2023</option> 
<option value="2024">2024</option> 
<option value="2025">2025</option> 
<option value="2026">2026</option> 
<option value="2027">2027</option> 
</select> 

                    </div> 

        <input class="btn btn-large btn-primary" name="commit" type="submit" value="Create my account" /> 
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T01:41:35.970

It'd be helpful to see the HTML source your view generates, but you likely have 1+ fields with the HTML5 `required` attribute that you are leaving blank.

By default, newer browsers like Chrome will not allow the form to submit until all fields flagged with the `required` attribute have a value. To stop this you can add the `novalidate` attribute to the `<form ...` tag.

```
<%= form_for(@user, { :novalidate => true }) do |f| %> 
```

# php - 如何防止我的网站被“点击提升”？

> ID：11697457
> 
> 赞同：4
> 
> 时间：2012-07-28T01:22:48.423
> 
> 标签：php, python, http, header, hit

我正在制作一个社交网站，用户可以在其中发布内容并且内容具有视图。每当来自不同 IP 地址的用户查看内容时，查看次数就会增加；来自同一 IP 地址的多个请求不计算在内。然而最近有人正在迭代代理列表或其他东西并人为地增加视图计数。我怎样才能防止这种情况？我可以通过检查标题或其他东西来做些什么吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T01:27:40.007

最好的方法是模式识别，因为大多数代理不会告诉您它们是代理：如果您看到某些流量高峰，请标记它们并且不要将它们添加到命中计数中。

或者，如果他一遍又一遍地使用相同的代理，只需将这些 IP 地址列入黑名单。您还可以尝试通过使用某种 API 代理列表服务或检查侦听代理服务器来检测代理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-28T11:06:02.400

有一些解决方案，但让我们解释一下问题

1-公共代理

公共代理总是向您的服务器发送特殊标头 (HTTP_X_FORWARDED_FOR) 包含您可以查询的用户真实 IP

```
$remoteaddr =$_SERVER["REMOTE_ADDR"]; //proxy IP
$xforward = $_SERVER["HTTP_X_FORWARDED_FOR"]; //Real User IP 
```

2-代理保护用户真实IP

此类代理通过不发送真实用户 IP 来保护他们的用户，您无法保护自己免受此代理的侵害，您所能做的就是获取此代理的更新列表并禁止它，以任何方式支付大多数代理不是免费代理，因此并非所有垃圾邮件用户都使用它

3-机器人和不良ips

有机器人的公共列表和更新的 [http://www.projecthoneypot.org](http://www.projecthoneypot.org) ，并且有它的 php 实现[https://github.com/joshtronic/php-projecthoneypot](https://github.com/joshtronic/php-projecthoneypot)

4- Tor 网络

您可以通过在 TorNodes Example Request 中查询请求的 ip 来检测 Tor 网络

[https://check.torproject.org/cgi-bin/TorBulkExitList.py?ip=1.1.1.1&port=80](https://check.torproject.org/cgi-bin/TorBulkExitList.py?ip=1.1.1.1&port=80)

注意：1.1.1.1 是您的服务器 ip，端口是您的端口，请求回复带有可以通过该端口连接到该 ip 的 Tor 节点列表

这就是我现在的想法，我希望这能回答你的问题

# javascript - 将自定义时间字符串转换为带符号的分钟

> ID：11697459
> 
> 赞同：1
> 
> 时间：2012-07-28T01:23:06.253
> 
> 标签：javascript, jquery, regex

我需要转换一个字符串

```
"UTC - 9:30 hours" 
```

到分钟。

就像是：

```
var date = "UTC - 9 : 10 hours";
date = date.replace("UTC",'').replace("hours",'').replace(/\s+/g, '');
var hours = parseInt( date.split(":")[0] );
var minutes = parseInt ( date.split(":")[1] || 0 );
var sign = hours / Math.abs(hours);
var totalMinutes = ( hours * 60 ) + ( sign * minutes ); 
```

使用任何正则表达式可以有更简单的方法吗？只是好奇。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T02:26:14.640

为什么不简单：

```
var take     = "UTC - 9:30 hours".split(' ')[2].split(':');
var minutes  = parseFloat(take[0])*60 + parseFloat(take[1]);

alert(minutes); // 570 
```

* * *

还 ：`var minutes = Number(take[0])*60 + Number(take[1]);`

## *[jsBin 演示](http://jsbin.com/itasur/2/edit)*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T01:27:19.403

请耐心等待……这样的事情太琐碎了吗？

```
string input = "UTC - 9:30 hours";
Match m = Regex.Match(input, @"(?<sign>-?)\s?(?<hours>\d+)\s?:\s?(?<minutes>\d+)");
int sign = m.Groups["sign"].Value == "-" ? -1 : 1;
int hours = int.Parse(m.Groups["hours"].Value);
int minutes = int.Parse(m.Groups["minutes"].Value);
int totalMinutes = (hours * 60 + minutes)*sign; 
```

哦，对不起...你谈到了javascript。我发布了 ac# 代码..那没关系。无论如何，正则表达式仍然有效。

但是要回答您的问题，不，正如您所见，这并不容易。

ps：我用不同的方式处理标志只是因为我没有理解你的意思，并且有很多`?`运算符只是为了允许更宽松的模式。

# ruby - 为什么我的系统调用在 irb 中有效，但在 rake 任务中无效？

> ID：11697460
> 
> 赞同：0
> 
> 时间：2012-07-28T01:23:06.473
> 
> 标签：ruby, rake

我尝试`system "./do_backup.py"`在我的 rake 任务中运行，其中 do_backup.py 是同一目录中的 python 程序，但该命令静默失败。但是，我可以使用 运行它`system "./do_backup.py"`。

`system "whoami"`我从我的 rake 任务和 IRB 中都调用了，用户是相同的。

编辑

这是 rakefile：

```
desc "Back up a file onto S3"
task :backup do
     S3ID = "AKIAJM3NRWxxx"
     S3KEY = "0A5kuzV+E1dkaPjxxx"
     SRCBUCKET = "rose-test-4"
     NUM_BACKUP_BUCKETS = 2

     system "whoami" 
     system "./do_backup.py #{S3ID} #{S3KEY} #{SRCBUCKET} #{NUM_BACKUP_BUCKETS}"
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T02:26:58.290

正如评论中所讨论的，这是从错误的目录运行的。您可以使用 更改目录`Dir.chdir()`。例如：

```
 ...
  Dir.chdir("lib/tasks")
  system "./do_backup.py #{S3ID} #{S3KEY} #{SRCBUCKET} #{NUM_BACKUP_BUCKETS}"
end 
```

当然，正如@muistooshort 指出的那样，更简单的事情是从它所在的位置运行它：

```
 system "#{Rails.root}/lib/tasks/do_backup.py #{S3ID} #{S3KEY} #{SRCBUCKET} #{NUM_BACKUP_BUCKETS}" 
```

# matlab - MATLAB - 为什么这个索引超过矩阵维度？

> ID：11697466
> 
> 赞同：1
> 
> 时间：2012-07-28T01:24:02.323
> 
> 标签：matlab, for-loop, multidimensional-array, matrix

嗨，我有这段代码，它不断给我一个“索引超出矩阵尺寸”错误。我试图用“battery_capacity”矩阵=2的值来启动h=1、d=1、24“h”和3“d”的循环，但这似乎与矩阵大小相矛盾。任何帮助表示赞赏！“h-1”是否会导致问题。错误出现在第二次写入“battery_capacity”我的代码是针对 idx_number_panels = 1:length(number_panels) % range of PV panel units 检查

```
for number_turbines = 0:2 % range of wind turbine units examined
  for number_batteries = 1:50 % range of battery units examined
    for h=2:25 %# hours
      for d = 1:number_of_days %# which day
        battery_capacity(idx_number_panels, number_turbines+1, ...
                         number_batteries, 1, 1) =  2*number_batteries;
        %% Charging
        battery_charging(idx_number_panels, number_turbines+1, ...
                         number_batteries, h, d) ...
          = hourly_surplus(idx_number_panels, number_turbines+1, ...
                          number_batteries, h, d) ...
            + battery_capacity(idx_number_panels, number_turbines+1, ...
                               number_batteries, h-1,d);
    end
  end
end 
```

调试器

```
error line 134 

battery_charging(idx_number_panels, number_turbines+1 ,number_batteries, h,d) =        hourly_surplus(idx_number_panels, number_turbines+1 ,number_batteries, h,d)...
    K>> sz = size(battery_charging)

sz =

 1     1     1     2

K>> index = [idx_number_panels, number_turbines+1 ,number_batteries, h-1,d]

index =

 1     1     1     1     2

K>> ndims(battery_charging)

ans =

  4 
```

在命令行中运行“battery_charging”

```
>> battery_charging

battery_charging(:,:,1,1) =

 0

battery_charging(:,:,1,2) =

  0 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T01:50:28.363

比试图从代码中找出问题所在更容易的是按如下方式进行调试。首先，将调试器设置为在出错时中断：

```
>> dbstop if error 
```

现在，再次运行您的代码。当您遇到错误时，您应该会遇到调试提示：

```
K>> 
```

您现在可以在出错时检查不同索引的值和矩阵的形状，并找出问题出在哪里。

# string - Matlab中的元胞数组向量化

> ID：11697468
> 
> 赞同：0
> 
> 时间：2012-07-28T01:24:15.073
> 
> 标签：string, matlab, replace, cell, vectorization

我有一个包含字符串的单元格数组。

需要处理这些单独的字符串，例如：

```
 a  = {'1,2','12';'2,3','23'} 
```

其中，逗号应从字符串中删除。

我不知道与使用矢量化相比，使用 for 循环的速度是多少。

但是我怎样才能使用矢量化来实现呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-28T01:29:14.083

您可以使用`strrep`替换字符串中的字符，如下所示：

```
EDU>> a = {'1,2','12';'2,3','23'}
a = 
    '1,2'    '12'
    '2,3'    '23'
EDU>> strrep(a,',','')
ans = 
    '12'    '12'
    '23'    '23' 
```

# ruby-on-rails - 在rails 3中使用ajax渲染部分时的空白页

> ID：11697471
> 
> 赞同：0
> 
> 时间：2012-07-28T01:24:29.297
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, jquery

`show.html.erb`我在文件中有一个导航菜单，其中包含 2 个选项卡/链接`UsersController.rb`，我想使用 ajax 为选项卡呈现不同的部分。

在`show.html.erb`我有一个名为`profile-data`我想显示内容的 div 中。所以我做这样的事情：

**链接结构：**

```
<li><%= link_to "College friends", college_friends_path, :remote => true %></li>
<li><%= link_to "Highschool friends", highschool_friends_path, :remote => true %></li> 
```

**我定义了路线：**

```
match "college_friends" => "users#college_friends", :as => "college_friends"
match "highschool_friends" => "users#highschool_friends, :as => "highschool_friends" 
```

**我在我的 UserController.rb 中定义了必要的方法：**

```
class UsersController < ApplicationController
  def show
    @user = User.find(params[:id])
  end

  def college_friends
    respond_to do |format|
      format.js
    end
  end

  def highschool_friends
    respond_to do |format|
      format.js
    end
  end
end 
```

**最后一件事是我们有 JS 文件：**

*college_friends.js.erb*

```
$('#profile-data').html("<%= escape_javascript(render(:partial => 'college_friends')) %>"); 
```

*highschool_friends.js.erb*

```
$('#profile-data').html("<%= escape_javascript(render(:partial => 'highschool_friends')) %>"); 
```

**部分代码：_college_friends.html.erb**

```
<% groups = @user.friends.group_by(&:college_name) %>
<% sorted_groups = groups.sort_by{|key, values| values.count}.reverse %>
<% sorted_groups.each do |collegename, friends| %>
<% next if collegename.blank? %>
<div class="contentbox">
    <div class="box-header">
        <h3><%= collegename %></h3>
        <div class="meta-info">
            <p><i class="icon-map-marker"></i> Malmö</p>
            <p><i class="icon-user"></i><span class="count"> <%= friends.count %></span> vänner</p>
        </div>
    </div>
    <ul class="friends-list">
        <% friends.map do |friend| %>
        <li><%= image_tag(friend.image) %>
            <% end %> 
        </ul> 
    </div>
<% end %> 
```

**所以我解决了这个问题，但检查源进出。我注意到 js 文件没有加载到应用程序中。**

所以我改变了这个：

```
<%= javascript_include_tag :defaults %> 
```

对此：

```
<%= javascript_include_tag "application" %> 
```

**它加载了所有必要的 js 文件。**

**但后来我得到这个错误：**

```
ActionView::Template::Error (undefined method `friends' for nil:NilClass): 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T21:59:58.043

你得到

```
ActionView::Template::Error (undefined method `friends' for nil:NilClass): 
```

因为

```
<% groups = @user.friends.group_by(&:college_name) %> 
```

需要`@user`设置。

正如布兰登建议的那样，尝试

```
def college_friends
  @user = User.find(params[:id])
  respond_to do |format|
    format.js
  end
end 
```

**但**

为此，您需要更改链接路由以包含用户 ID，类似于此

```
match "college_friends/:id" => "users#college_friends", :as => "college_friends" 
```

并在您的链接中

```
<li><%= link_to "College friends", college_friends_path(@user), :remote => true %></li> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T05:26:20.163

正如上面评论中所建议的，你应该有两个名为的`_college_friends.html.erb`部分`_highschool_friends.html.erb`

这些将包含您的 HTML，这是您想要通过`$('#profile-data').html()`

**模板错误：**

您没有定义`@user`in`college_friends`和`highschool_friends`。因此，您的视图正在请求`@user`该操作，而该操作不存在。

# sql-server - 使用 Visual Studio 的服务器资源管理器将行插入 SQL Server

> ID：11697473
> 
> 赞同：3
> 
> 时间：2012-07-28T01:24:30.963
> 
> 标签：sql-server, visual-studio-2010, visual-studio

我在 MS SQL 中创建了一个数据库，并在我的服务器资源管理器中加载了该数据库。在我的 MVC 应用程序中，我希望在我的数据库中简单地填充一个实体（例如客户名称），有人知道我如何将数据发送到我加载的数据库吗？我似乎无法弄清楚。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-29T11:44:57.307

如果您询问如何在 Visual Studio 本身中插入数据，请打开服务器资源管理器，向数据库添加数据连接，展开表节点，右键单击表并选择显示表数据。这将打开一个屏幕，您可以在其中添加数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T02:00:21.637

如果您只想连接和填充一个实体，则应考虑使用 Code First Entity Framework 来驱动您的模型，该模型使用实体上的普通 C# 类。

Scott Guthrie 有一篇关于如何做到这一点的帖子：[Using EF Code First with an Existing Database](http://weblogs.asp.net/scottgu/archive/2010/08/03/using-ef-code-first-with-an-existing-database.aspx)，Ralph Lavelle 有一篇更具体针对 MVC 的帖子，并在第二部分中包含迁移：[Using Entity Framework Code First with an Existing Database (1 /2)](http://www.ralphlavelle.net/2012/02/using-entity-framework-code-first-with.html)和[在现有数据库中使用实体框架代码优先 (2/2)](http://www.ralphlavelle.net/2012/02/using-entity-framework-code-first-with_26.html)。

# objective-c - Obj-C - 使用 currentTitle 和 UILabel.text 方法保存所有输入的 NSString

> ID：11697476
> 
> 赞同：0
> 
> 时间：2012-07-28T01:25:25.753
> 
> 标签：objective-c, methods, nsstring

```
 NSString* digit                  = [sender currentTitle];

if (self.userIsInTheMiddleOfEnteringANumber){ 
    NSString* currentDisplayText = [[self display]text];
    NSString* newDisplayText     = [currentDisplayText stringByAppendingString:digit];

self.display.text                = newDisplayText; 
```

我会尽力解释我的问题。这行代码从选择的按钮中获取数字，不保存字符串“digit”。“currentDisplayText”获取标签中显示的数字。然后将这两个字符串附加并发送到“显示”（标签）

但也有一个输入按钮。清除显示（因此用户可以输入新数字）这是一个计算器顺便说一句！

```
- (IBAction)enterPressed{

[self.brain pushOperand:[self.display.text doubleValue]];
self.userIsInTheMiddleOfEnteringANumber = NO; 
```

我想要的是显示一个“历史”标签，显示所有输入的数字 - 我还不太明白如何获得我保存“历史”的字符串，而不是像显示那样重置。我可能无法解释这一点，但任何提示都值得赞赏。我还在学习objective-c...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T03:41:34.707

我不太了解你，但我敢肯定，如果你想保存你的数据（不是很大），你应该使用 NSUserDeafult 。用于`- (void)setObject:(id)anObject forKey:(id)aKey;`保存数据。

你想保存历史，如果你想保存最新的历史，你可以`- (NSString *)stringForKey:(NSString *)defaultName;`用来获取你保存的字符串。如果你想保存整个历史，你可以`- (NSArray *)arrayForKey:(NSString *)defaultName;`用来获取你保存的数组。

举个例子。如何保存字符串

```
 if([[NSUserDefaults standardUserDefaults] stringForKey:theKey] == nil)
                    {
                        NSString *defaultValue = [NSString stringWithString:theStringYouWantedSave];
                        NSDictionary *saveDict = [NSDictionary dictionaryWithObject:defaultValue forKey:theKey];
                        [[NSUserDefaults standardUserDefaults] registerDefaults:saveDict];
                    }
                    else
                    {
                        [[NSUserDefaults standardUserDefaults] setObject:theStringYouWantedSave forKey:theKey];
                    } 
```

像这样

```
if([[NSUserDefaults standardUserDefaults] stringForKey:theKey]!=nil)
{
    yourHistoryString = [[NSUserDefaults standardUserDefaults] stringForKey:theKey];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T03:15:46.237

如果我理解正确，您想在按下回车键后保存号码。为此，您需要将 NSMutableArray 类型的属性添加到您的类中。然后在方法中执行：

```
- (IBAction)enterPressed {
    [myHistoryArrayAttrib addObject: self.display.text]; 

    [self.brain pushOperand:[self.display.text doubleValue]];
    self.userIsInTheMiddleOfEnteringANumber = NO;

    //after this you can clear your display
    self.display.text = nil;
} 
```

而已。

# command-line - 使用 `alias' 添加默认选项 - 例如 `alias cd="cd -P" '

> ID：11697478
> 
> 赞同：1
> 
> 时间：2012-07-28T01:25:59.887
> 
> 标签：command-line, alias, default-value, options

我经常想到使用别名来修改命令行工具的默认行为。例如，我经常想在遵循符号链接后解析实际路径（并且从不想维护符号链接路径），所以我正在考虑在我的 .bash_profile 文件中添加一些内容，以使其成为默认行为，例如：

```
alias cd="cd -P" 
```

出于任何原因，这是否有害或危险？如果不是这个例子，一般来说这是一个坏主意吗？这让我觉得有点脏……

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T01:29:32.660

在我一直使用的每个 *NIX 系统上`alias cd..='cd ..'`

我说如果从长远来看它对你有帮助，就没有必要感到肮脏——计算机应该按照我们告诉它们的方式去做，而不是相反。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T01:30:22.227

这是一种非常常见的技术。下面是一些常见的例子。

```
alias egrep='egrep --color=auto'
alias fgrep='fgrep --color=auto'
alias grep='grep --color=auto'
alias ls='ls --color=auto'
alias make='make -j20' 
```

如果稍后您想在没有别名的情况下运行，您可以 \ 第一个字母或将命令放在引号中，如

```
\ls
"ls" 
```

# .net - 找不到类型或命名空间名称“Newtonsoft”

> ID：11697479
> 
> 赞同：11
> 
> 时间：2012-07-28T01:26:10.710
> 
> 标签：.net, json.net

我已经查看了这个问题，但我没有看到太多答案，显然没有一个有帮助，或者我不会问。我是 .NET 新手。

我的本地环境是Win7，Microsoft Virtual Web Developer 2010 Express。我将 NewtonSoft.Json 添加为自定义组件库。

*   我使用 Newtonsoft.Json 自定义组件构建了一个简单的“HelloWorld”Web 服务。

*   当我在本地机器（Visual Web Developer 2010 Express）上进行构建时，效果很好。我实际上得到了一个有效的 JSONP 输出，而不是 XML。

*   当我将文件 FTP 到远程 Web 服务器时，我的 Web 服务不工作。我明白了：

> 编译错误描述：在编译服务此请求所需的资源期间发生错误。请查看以下特定错误详细信息并适当修改您的源代码。
> 
> 编译器错误消息：CS0246：找不到**类型或命名空间名称“Newtonsoft”（您是否缺少 using 指令或程序集引用？）**
> 
> 源错误：
> 
> 第 7 行：使用 System.Web.Services.Protocols；
> 
> 第 8 行：使用 System.Web.Script.Services；
> 
> 第 9 行：使用 Newtonsoft.Json；
> 
> 第 10 行：
> 
> 第 11 行：命名空间 System.Web.Script.Services.CS

我已经尝试了一切，从将整个项目文件夹复制到远程文件夹，然后删除所有内容并仅复制我的 asmx 和 web.config 文件，但我仍然收到错误消息。我将带有 Newtonsoft.Json.dll 的 bin 文件夹复制到远程服务器，然后尝试将其复制到根文件夹中，但无济于事。

是否必须在远程服务器上执行一些操作才能使其使用 Newtonsoft.Json.dll？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T01:27:48.640

当您复制解决方案的文件时，一些引用可能会“丢失”。复制文件并在另一台机器上打开后，尝试删除引用并重新添加。

另外，看看这个问题：[reference dll not copying to bin with deployment project cause error](https://stackoverflow.com/questions/2947017/reference-dll-not-copying-to-bin-with-deployment-project-causing-error)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2021-02-17T09:29:23.027

解决此问题的最佳方法是“清洁解决方案”

在 Visual Studio 的解决方案资源管理器中，右键单击解决方案并选择“清洁解决方案”

```
Clean Solution - deletes all compiled files (all dll’s and exe’s ).
Build Solution - compiles code files (dll and exe) that have changed.
Rebuild Solution - Deletes all compiled files and Compiles them again regardless of whether or not the code has changed. 
```

参考：[https ://bitwizards.com/thought-leadership/blog/2014/august-2014/visual-studio-why-clean-build-rebuild](https://bitwizards.com/thought-leadership/blog/2014/august-2014/visual-studio-why-clean-build-rebuild)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-10-06T19:45:37.550

第一步是尝试重建您的项目。如果没有帮助：在“Nuget 包管理器”中找到“Newtonsoft”并卸载它。如果它有引用 => 放置复选框（删除依赖项，强制卸载）并在下拉列表中（依赖行为 => 忽略依赖项，文件冲突操作 => 全部忽略）

再次安装“Newtonsoft”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-29T00:47:10.443

感谢您的指针和链接。经过一番斗争，我得到了它的工作。最终发生的是我的朋友，一位 .NET 专家，通过 Skype 与我交谈，并告诉我将项目部署到目标服务器的正确方法。我不明白你的 Build 有一个单独的文件夹。我制作了一个“构建部署包”作为 zip 文件。然后我把它解压到我的硬盘上，然后把它放到网络服务器上的一个干净的文件夹中（实际上，我把它上传到了根目录），瞧，它工作了。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-04-14T21:21:36.857

此问题的另一个可能原因是项目正在使用 NuGet 包并且它们尚未恢复（下载）。

它们可能需要在 Visual Studio 中恢复，或者您可以使用 nuget.exe 命令行可执行文件来恢复包。

[https://docs.nuget.org/consume/package-restore](https://docs.nuget.org/consume/package-restore)

# jquery - jquery 验证下拉菜单不起作用

> ID：11697480
> 
> 赞同：0
> 
> 时间：2012-07-28T01:26:19.793
> 
> 标签：jquery, validation

当我尝试验证下拉菜单时，我无法使用验证插件。在 chrome 中，我收到一条警告消息，上面写着：“没有选择，无法验证，什么都不返回”

```
$('#wpuf_form').validate({
    debug: true,
    rules: {

        "category[]" : {
            required:{
                depends: function(element){
                    return $('.cat').val() == '-1';
                    }
                }
            }
    },

    submitHandler: function(form){
        alert('test');
    }
 });

 <!-- this the html -->
 <form id="wpuf_form" name="wpuf_form" action=""  method="POST">
 <select name="category[]" id="cat" class="cat">
 <option value="-1">– Select –&lt;/option>
 <option class="level-0" value="1">test</option>
 <option class="level-0" value="2">test2</option>
 <option class="level-0" value="3">test3</option>
 </select>
 <input type="submit" name="wpuf_new_post_submit" value="Submit Creation">                        
 </form> 
```

任何帮助将不胜感激。提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T05:46:27.873

我刚刚解决了我的问题，只是验证插件不喜欢 value == '-1'，我不得不将其更改为 value == ''，我希望我能知道为什么......因为我使用的是 wordpress 功能为此，我使用 javascript 将默认值更改为 cat.options[cat.selectedIndex].value = '';

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T05:01:25.697

确保在加载页面并且 #wpuf_form 元素存在后添加验证代码。为此，请确保它包含在 $('document').ready() 语句中；

```
$('document').ready(function(){

    $('#wpuf_form').validate({
        debug: true,
        rules: {

            "category[]" : {
                required:{
                    depends: function(element){
                        return $('.cat').val() == '-1';
                        }
                    }
                }
        },

        submitHandler: function(form){
            alert('test');
        }
     });
} 
```

# regex - RegExp 正则表达式仅查找和替换整个单词

> ID：11697483
> 
> 赞同：7
> 
> 时间：2012-07-28T01:26:34.037
> 
> 标签：regex

我应该先声明我正在使用 VB6 和 RegExp

我正在尝试查找和替换整个单词，“整个单词”是指有效匹配不是另一个单词的子字符串，尽管一些特殊字符可以。我是正则表达式的新手。这就是我正在尝试的：

```
([^a-z]+)(Foo)([^a-z]+) 
```

看起来很接近，但在某些情况下我遇到了一些麻烦。

例如，如果我找到字符串

```
Foo Foo 
```

或者

```
Foo(Foo) 
```

或任何以 Foo 结尾的行且以下行以 Foo 开头的任何地方

```
This is a line with Foo
Foo starts the next line 
```

在任何这些情况下，只有第一个 Foo 匹配。

好吧，也许这不是比赛的问题，而是我的替换方法。我不知道如何验证这一点。我正在使用组来替换表达式匹配的任何边界字符，如下所示：

```
regEX.Replace(source, "$1" & newstring & "$3") 
```

所以总而言之，我想避免匹配： FooBar BarFoo

以下任何一项都是有效的匹配项：

Foo Foo
Foo Bar
Foo_bar
Foo.bar
Foo, bar
Foo(bar)
Foo(Foo)

如果有人能告诉我正确的方法来做到这一点，我将不胜感激！

**已编辑**

看起来我对下面的第一个解决方案说得太早了。经过一些测试和进一步阅读，我看到下划线是一个单词 char，因此上述模式与它不匹配。我想出了这个诀窍，有没有更好的方法？

```
(\b)(Foo)(\b|_)

regEX.Replace(source, "$1" & newstring & "$3") 
```

它有效，但似乎有点草率。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-28T01:28:16.223

使用“单词边界”表达式`\b`。

也许像这样简单的事情就可以了：

```
(.*)\bFoo\b(.*) 
```

仅供参考，单词边界表达式是单词字符和非单词字符*之间*`\b`的零宽度匹配，反之亦然，并且不消耗任何输入。*`\w``[^\w]`*

 ** * *

下划线和数字字符被视为“单词字符”，因此`Foo_Bar`、`Bar_Foo`和`Foo123`不会匹配。要纠正这一点，以便将*任何*非字母视为“单词结尾”（包括输入的开头和结尾），请使用环顾四周：

```
(?i)(.*(?<![^a-z]))Foo((?![^a-z]).*) 
```*

# php - PHP将MySQL响应数组转换为唯一记录数组

> ID：11697488
> 
> 赞同：1
> 
> 时间：2012-07-28T01:27:21.440
> 
> 标签：php, mysql

在 PHP 中，我运行此查询并获得`array`2 个记录，每个记录有 2 个键，`array`我需要从中提取唯一记录是否有一些更专业的方法来构建此查询，然后从数组中提取唯一记录，而不是我在下面所做的？

**PS** `position1`和`positions2`表格是相同的。因此`position1`可以删除其中之一。

```
$get_positions = "SELECT positions1.pos_id1,
                         positions1.pos_name1,
                         positions2.pos_id2,
                         positions2.pos_name2
                      FROM employees
                          LEFT JOIN positions1 ON positions1.pos_id1 = employees.position1
                          LEFT JOIN positions2 ON positions2.pos_id2 = employees.position2
                              WHERE employees.status IN (1,2)
                                  GROUP BY pos_name2
                                      ORDER BY pos_id2 ASC";
$positions_res = $sql->RunSQL($get_positions, "select"); 
```

$positions_res 转储

```
array(2) {
  [0]=>
  array(8) {
    [0]=>
    string(1) "4"
    ["pos_id1"]=>
    string(1) "4"
    [1]=>
    string(27) "Driver"
    ["pos_name1"]=>
    string(27) "Driver"
    [2]=>
    string(1) "2"
    ["pos_id2"]=>
    string(1) "2"
    [3]=>
    string(9) "Cook"
    ["pos_name2"]=>
    string(9) "Cook"
  }
  [1]=>
  array(8) {
    [0]=>
    string(2) "19"
    ["pos_id1"]=>
    string(2) "19"
    [1]=>
    string(23) "Guard"
    ["pos_name1"]=>
    string(23) "Guard"
    [2]=>
    string(2) "19"
    ["pos_id2"]=>
    string(2) "19"
    [3]=>
    string(23) "Guard"
    ["pos_name2"]=>
    string(23) "Guard"
  }
} 
```

代码继续

```
$pos_list = array();
$i = 0;
for ($n = 0; $n < count($positions_res); $n++) {

    if ($positions_res[$n]["pos_name1"] == $positions_res[$n]["pos_name2"]) {
        $pos_list[$i]["id"] = $positions_res[$n]["pos_id1"];
        $pos_list[$i]["name"] = $positions_res[$n]["pos_name1"];
        $i++;
    } else {
        $pos_list[$i]["id"] = $positions_res[$n]["pos_id1"];
        $pos_list[$i]["name"] = $positions_res[$n]["pos_name1"];
        $i++;
        $pos_list[$i]["id"] = $positions_res[$n]["pos_id2"];
        $pos_list[$i]["name"] = $positions_res[$n]["pos_name2"];
        $i++;
    }
}

var_dump($pos_list); 
```

最终结果转储

```
array(3) {
  [0]=>
  array(2) {
    ["id"]=>
    string(1) "4"
    ["name"]=>
    string(27) "Driver"
  }
  [1]=>
  array(2) {
    ["id"]=>
    string(1) "2"
    ["name"]=>
    string(9) "Cook"
  }
  [2]=>
  array(2) {
    ["id"]=>
    string(2) "19"
    ["name"]=>
    string(23) "Guard"
  }
} 
```

**编辑：**

我需要获取分配给员工 position1 和 position2 的所有职位的唯一职位列表（pos_id、pos_name）（对于状态为 1 和 2 的员工）。

例如员工

约翰有`position1=Driver`, `position2=Driver`, 员工 Sam 有`Poition1=Driver`,`Position2=Guard` 员工 Mike 有`Position1=Cook`,`Position2=Driver` 所以在这种情况下我需要选择

列表：

```
4,  Driver
19, Guard
2,  Cook 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T01:37:59.503

Look into the source for `$sql->RunSQL()`, and I'll bet it calls [`mysql_fetch_array()`](http://php.net/manual/en/function.mysql-fetch-array.php) without the second parameter. The default behavior of that function is to return both associative and numeric keys unless the constant `MYSQL_NUM` or `MYSQL_ASSOC` is passed as the second parameter.

Replace that with a call to [`mysql_fetch_assoc()`](http://php.net/manual/en/function.mysql-fetch-assoc.php) or `mysql_fetch_array($the_result_resource_variable, MYSQL_ASSOC)` to return only associative keys back instead of both associative and numeric keys.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T22:17:55.623

假设 position1 和 position2 是一个位置表的副本，我会将查询更改为如下所示：

```
SELECT 
    p.pos_id,
    p.pos_name,
    CAST(GROUP_CONCAT(e.name,'(',e.id,')' SEPARATOR ', ') AS CHAR) AS employees
FROM
    positions p
    JOIN employees e ON e.position1 = p.pos_id OR e.position2 = p.pos_id
WHERE e.status IN (1,2)
GROUP BY p.pos_id
ORDER BY p.pos_id 
```

那么如果员工表看起来像这样：

```
mysql> select * from employees;
+----+---------+--------+-----------+-----------+
| id | name    | status | position1 | position2 |
+----+---------+--------+-----------+-----------+
|  1 | Glen    |      1 |         1 |         5 |
|  2 | John    |      2 |         7 |         6 |
|  3 | Michael |      1 |         2 |         1 |
|  4 | David   |      0 |         3 |         4 |
|  5 | Albert  |      2 |         2 |         0 |
|  6 | Edward  |      1 |         0 |         3 |
|  7 | Ben     |      1 |         1 |         3 |
+----+---------+--------+-----------+-----------+ 
```

职位表如下所示：

```
mysql> select * from positions;
+--------+--------------+
| pos_id | pos_name     |
+--------+--------------+
|      1 | Janitor      |
|      2 | Guard        |
|      3 | Shift Leader |
|      4 | Driver       |
|      5 | Cook         |
|      6 | Manager      |
|      7 | Owner        |
+--------+--------------+ 
```

此查询的结果如下所示：

```
+--------+--------------+-----------------------------+
| pos_id | pos_name     | employees                   |
+--------+--------------+-----------------------------+
|      1 | Janitor      | Michael(3), Ben(7), Glen(1) |
|      2 | Guard        | Michael(3), Albert(5)       |
|      3 | Shift Leader | Ben(7), Edward(6)           |
|      5 | Cook         | Glen(1)                     |
|      6 | Manager      | John(2)                     |
|      7 | Owner        | John(2)                     |
+--------+--------------+-----------------------------+ 
```

# javascript - 我该如何实施？$example2.arctext({radius: 400, dir: -1})

> ID：11697489
> 
> 赞同：-1
> 
> 时间：2012-07-28T01:27:36.967
> 
> 标签：javascript, jquery, html, css

我想放

```
$example2.arctext({radius: 400, dir: -1}) 
```

进入我的 index.html 以在我的网站上重新创建类似 [http://tympanus.net/Development/Arctext/#sub4的内容](http://tympanus.net/Development/Arctext/#sub4)

我怎么做？:-)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-28T01:40:58.413

您包括他们的[arctext.js](http://tympanus.net/Development/Arctext/js/jquery.arctext.js)，然后使用 jquery 选择带有文本的 div 并应用他们的功能......

```
<head>
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
    <script type="text/javascript" src="http://tympanus.net/Development/Arctext/js/jquery.arctext.js"></script>
</head>

<body>
    <div id="example">Here is curved text></div>

    <script>
        $().ready(function() {
            $('#example').arctext({radius: 300});
        });
    </script>
</body> 
```

看看这个[小提琴](http://jsfiddle.net/F5fww/1/)的一个工作示例

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-28T01:36:10.163

按照这里给出的指示：http: [//tympanus.net/codrops/2012/01/24/arctext-js-curving-text-with-css3-and-jquery/](http://tympanus.net/codrops/2012/01/24/arctext-js-curving-text-with-css3-and-jquery/)

# linux - 辅助/冗余系统上的 Ntp 不与主系统同步时间

> ID：11697494
> 
> 赞同：0
> 
> 时间：2012-07-28T01:28:46.157
> 
> 标签：linux, time, sync, ntp

我有两个系统一个充当主要/活动并具有 Internet 连接并从 NTP 服务器获取时间。第二个系统是次要/被动系统，与外部世界没有任何联系。

Primary 和 Secondary 在专用网络接口 eth1 上连接。主要有 IP 169.254.10.10 子网：255.255.255.248 广播：169.254.10.15 辅助有 IP 169.254.10.11 子网：255.255.255.248 广播：169.254.10.15

Primary 有以下 ntp.conf 配置

```
漂移文件 /var/lib/ntp/ntp.drift
统计 loopstats peerstats clockstats
filegen loopstats 文件 loopstats 类型 day enable
filegen peerstats 文件 peerstats 类型 day enable
filegen clockstats 文件 clockstats 类型 day enable
服务器 91.189.94.4   
限制 -4 默认 kod notrap nomodify nopeer noquery
限制 -6 默认 kod notrap nomodify nopeer noquery
限制 127.0.0.1
限制 ::1
限制 169.254.10.0 掩码 255.255.255.248
广播 169.254.10.15
禁用身份验证
广播客户端

```

我仅使用 ntpdate 在辅助节点上同步时间，并且不在辅助节点上运行 ntpd 守护程序。在辅助服务器上，我运行 ntpdate -b -t 4 -p 4 -u 169.254.10.10（主接口 IP）并且 Ntpd 服务器正在使用上述配置在主服务器上运行。

Secondary 上的时间未更新并抛出错误 ntpdate[3636]: no server适合于找到同步

谢谢维苏

# mysql - 如何在多个表中实现唯一 ID

> ID：11697495
> 
> 赞同：0
> 
> 时间：2012-07-28T01:29:03.800
> 
> 标签：mysql, database, unique, key

如果您查看 facebook 的图形 API，似乎所有对象共享相同的 ID 空间，并且所有 Id 都是唯一的，即使它们位于不同的表中。

MySQL 中是否有处理此问题的功能？（如果没有，如何实施的高级想法？）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T01:32:31.560

您可能想检查一下[`UUID()`](http://dev.mysql.com/doc/refman/5.0/en/miscellaneous-functions.html#function_uuid)。它返回一个全局唯一 ID，因此您的 ID 永远不会发生冲突。

要将其转换为整数格式，您可以

```
UNHEX(REPLACE(UUID(),'-','')) 
```

用于存储在`BINARY(16)`列中。

（转换为整数的来源：[Nicholas Sherlock](http://dev.mysql.com/doc/refman/5.0/en/miscellaneous-functions.html#function_uuid)在 MySQL 参考中的评论）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T01:36:05.560

如果您有一个主数据库服务器，则可以创建一个名为 Object 的表，该表具有一个整数自增主键和一个对象类型列。每次创建对象时，首先在此 Object 表中插入一行，获取 id，然后使用该 id 将一行插入到将保存对象信息的任何表中。所以要创建一个事件：

```
INSERT INTO Object (object_type) VALUES ('Event') 
```

获取最后一个插入 id，假设它是 12345。

```
INSERT INTO Event (id, name, location) VALUES (12345, 'Cookout', 'My back yard') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-28T01:40:00.510

OR use a single sequence to drive the ID values.

# php - 如何调整 Wordpress Twitter 工具 PHP

> ID：11697505
> 
> 赞同：0
> 
> 时间：2012-07-28T01:31:30.960
> 
> 标签：php, wordpress

我想更新此功能，以便它还可以导入指向状态和发布时间的链接。

这是原文

```
function do_tweet_post($tweet) {
    global $wpdb;
    remove_action('publish_post', 'aktt_notify_twitter', 99);
    $data = array(
        'post_content' => $wpdb->escape(aktt_make_clickable($tweet-> tw_text))
        , 'post_title' => $wpdb->escape(trim_add_elipsis($tweet->tw_text, 30))
        , 'post_date' => get_date_from_gmt(date('Y-m-d H:i:s', $tweet->tw_created_at))
        , 'post_category' => array($this->blog_post_category)
        , 'post_status' => 'publish'
        , 'post_author' => $wpdb->escape($this->blog_post_author)
    );
} 
```

我要编辑的元素是`'post_content'`. 这是我到目前为止所尝试的：

```
...
'post_content' => $wpdb->escape(aktt_make_clickable(
    $tweet-> tw_text.' from '.
    '<a href="http://www.twitter.com/1beb/statuses/"'.
    tw_id.'>Twitter</a> '.
    tw_created_at
))
... 
```

我对 PHP 不是很熟悉，所以我不知道我的语法是否正确，或者如何处理这种特殊类型的引用 ( `->`)。我记得您可以使用 etc 连接字符串`''.''.''.`，但不确定它是否适用于这种情况。

我为缺乏上下文而道歉，如果我可以添加其他内容以使其更清楚，请告知。

TIA

**更新**

* * *

这是路人的aktt_make_clickable：

```
function aktt_make_clickable($tweet) {
    $tweet .= ' ';
    $tweet = preg_replace_callback(
            '/(^|\s)@([a-zA-Z0-9_]{1,})(\W)/'
            , create_function(
                '$matches'
                , 'return aktt_profile_link($matches[2], \' @\', $matches[3]);'
            )
            , $tweet
    );
    $tweet = preg_replace_callback(
        '/(^|\s)#([a-zA-Z0-9_]{1,})(\W)/'
        , create_function(
            '$matches'
            , 'return aktt_hashtag_link($matches[2], \' #\', \'\');'
        )
        , $tweet
    );

    if (function_exists('make_chunky')) {
        return make_chunky($tweet);
    }
    else {
        return make_clickable($tweet);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T01:39:38.640

我相信您错过了`$tweet`代码中的对象。

试试这个：

```
'post_content' => $wpdb->escape(aktt_make_clickable($tweet-> tw_text.' from '.
        '<a href="http://www.twitter.com/1beb/statuses/"'.
        $tweet->tw_id.'>Twitter</a> '.$tweet->tw_created_at
)) 
```

### 在看到`aktt_make_clickable()`原始海报的代码更新后更新：

由于您正在破解插件以使其显示您自己的文本，我想您应该能够直接输入链接：

```
'post_content' => '<a href="http://www.twitter.com/1beb/statuses/"'.
        $tweet->tw_id.'>'.$tweet->tw_text.'</a> '.$tweet->tw_created_at, 
```

（我注意到您也希望插入作者，但从您的代码中我无法判断作者的正确变量名是什么）。

# macos - 索引中没有找到港口农奴；无法重建

> ID：11697507
> 
> 赞同：13
> 
> 时间：2012-07-28T01:31:38.837
> 
> 标签：macos, macports, npm

我正在尝试安装 npm 端口包，但是当我运行命令“sudo port install npm”时，bash 会在下面显示错误消息，并无限重复相同的错误。

```
Warning: No port serf found in the index; can't rebuild
--->  Found 0 broken port(s), determining rebuild order
--->  Rebuilding in order
--->  Scanning binaries for linking errors: 100.0%
--->  Found 2 broken file(s), matching files to ports 
```

我怎么解决这个问题？

谢谢。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-30T03:34:08.320

为了解决这个问题，我做了一个端口清理和停用，步骤：

```
sudo port clean serf
sudo port -f deactivate serf
sudo port install serf 
```

按照上面的步骤，我的问题就解决了。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-04T02:18:12.670

我刚刚尝试了停用技巧并看到了这个：

```
$ sudo port clean serf
Warning: Skipping serf (not in the ports tree)
$ sudo port -f deactivate serf
--->  Deactivating serf @0.3.0_0
$ sudo port install serf
Warning: Skipping serf (not in the ports tree)
--->  Scanning binaries for linking errors: 100.0%
--->  No broken files found.
$ 
```

尽管 serf 不在端口树中，但现在情况似乎好多了。

# javascript - 即使正确导入 jqGrid 也不可用

> ID：11697508
> 
> 赞同：2
> 
> 时间：2012-07-28T01:31:46.160
> 
> 标签：javascript, jquery, jquery-ui

我在让 jqGrid 被 jQuery 识别时遇到问题。出于某种原因，尽管已经导入了库

```
<script type="text/javascript" src="js/jquery.jqGrid.min.js"></script>
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.js"></script>
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.21/jquery-ui.js"></script> 
```

我可以验证该库是否已正确导入，我可以单击它并在 Chrome 中查看它。知道为什么我不能使用图书馆吗？当我尝试

```
 JQuery("#table").jqGrid... 
```

它不起作用，也不显示为可用功能之一。

非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T01:34:11.530

jQuery 应该是第一个然后 jQueryUI 然后 jqGrid，这是因为 jqgrid 依赖于 jquery 一个 djqueryui 所以他们需要之前加载。

我想你`i18n/grid.locale-en.js`之前也需要加载

```
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.js">   </script>
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.21/jquery-ui.js"></script>
<script type="text/javascript" src="js/i18n/grid.locale-en.js"></script>
<script type="text/javascript" src="js/jquery.jqGrid.min.js"></script> 
```

# ruby-on-rails-3 - simple_form 选择：按名称

> ID：11697509
> 
> 赞同：1
> 
> 时间：2012-07-28T01:31:52.587
> 
> 标签：ruby-on-rails-3, simple-form

我有一个 simple_form 集合，其中包含语言列表。我想默认选择“德语”，但 simple_form 中的 selected: 选项需要一个 id。我可以获得“德国人”的身份，但希望这不是必需的。

```
= f.association :language, selected: // not sure what to put here 
```

这可行，但很臭（我不会使用如此残暴的代码）：

```
= f.association :language, selected: Language.where("name = 'German'").first.id 
```

我希望有类似的东西：

```
= f.association :language, selected: { |lan| lan.name == 'German' } 
```

我在过去一小时发现的每个示例都涉及到 id。没有一个如何通过名称进行选择的示例。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-28T19:03:23.190

是的，`SimpleForm`可以接受 proc 作为`selected`选项。在您的情况下，代码是：

```
= f.association :language, selected: lambda { |lan| lan.name == 'German' } 
```

# java - JApplet Textfield/jbutton/嵌套循环程序，创建墙，在textfield中输入行数

> ID：11697511
> 
> 赞同：1
> 
> 时间：2012-07-28T01:32:01.820
> 
> 标签：java, swing, paintcomponent, japplet

我目前正在使用`JCreator`，但找不到我的代码有什么问题，由于某种原因它没有读取我在`JTextField`. 我不打算彻底改变我的代码，如果 any1 可以指出我做错了什么，或者给我一些代码示例来说明它应该是什么样子，那就太好了。同样，当他们做同样的事情时，不要寻找“这比这个更好”。

```
import java.awt.*;
import javax.swing.*;
import java.util.*;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

public class Wall extends JApplet implements ActionListener {

    double count;
    Boolean Submit = false;
    JButton btn1;
    JTextField  tf,field;
    int x = 0;
    int y = 575;
    int x1 = 50;
    int y1 = 25;
    int textnumber;
    Random randomNum = new Random();//initialize random variable
    int count2;

    public void init() {

        setLayout( new FlowLayout( ) );
        tf = new JTextField(5);
        field = new JTextField( "<===== Enter Brick Rows 1-20", 16 );   
        add( tf );  
        add( field );
        btn1 = new JButton("Submit");
        add(btn1);
        btn1.addActionListener(this);
    }

    public void actionPerformed(ActionEvent event){

        if (event.getSource()== btn1){
            Submit = true;
        }
    }

    public void paint(Graphics g, double BrickNumbers) {

        super.paint(g);
        while(Submit == true){
            DrawBrick(g,BrickNumbers);
        }
    }

    public void DrawBrick(Graphics g, double BrickNumbers){

        String Value = tf.getText();
        BrickNumbers = Double.parseDouble(Value);

        if(Submit == true){
            count = BrickNumbers;
            for(double count = BrickNumbers; ((count>=1) && (count <=20)); count--){

                int d = 1+ randomNum.nextInt(255);//get d variable
                int e = 1+ randomNum.nextInt(255);//get e variable
                int f = 1+ randomNum.nextInt(255);//get f variable
                Color randomcolor = new Color(d,e,f);
                g.setColor(randomcolor);
                g.fillRect(x, y, x1, y1);
                g.fillRect(x+ 50, y, x1, y1);
                g.fillRect(x+100, y, x1, y1);
                g.fillRect(x+150, y, x1, y1);
                g.fillRect(x+200, y, x1, y1);
                g.fillRect(x+250, y, x1, y1);   
                y = y - 25;
            }
        }
        repaint();
    }   
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-28T01:43:19.780

You've got some bad code in your painting method including:

*   you've got a while (true) loop in your `paint(...)` method which will lock your GUI and prevent it from responding to *anything*.
*   You're trying to read in from the JTextField in a method called from the paint method. You should never have program logic in your painting code or in methods it calls.
*   You shouldn't be overriding `paint(...)` of a JApplet to begin with but rather `paintComponent(...)` in a JPanel that the JApplet holds.
*   Consider adding code to read the JTextField(s) in your actionPerformed method as that seems to be the best place for this logic.

**Edit**

*   Your paint method won't ever get called since it isn't a true overload of JApplet's paint method. Yours has 2 parameters and a paint method should only have one.
*   In your actionPerformed method, get the value from the JTextField,
*   convert it into an int with `Integer.parseInt(...)` not a double since you're never going to draw a fraction of a brick
*   and with the int obtained set an int class field, perhaps called brickCount or something like that, and then call repaint().
*   In your JPanel's `paintComponent(...)` method (which like paint should only have one parameter, Graphics), call `paintBricks()`, and have this method use the brickCount field value to decide how many bricks to paint.
*   Never call `repaint()` from within `paint(...)` `paintComponent(...)` or from any methods called from within these methods.

**Edit 2**

Here's an example that doesn't do what your program needs to do, but illustrates how to get information from a JTextField and use it in a drawing:

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

public class SimpleApplet extends JApplet {
   @Override
   public void init() {
      getContentPane().add(new SimpleAppletMainPanel());
   }
}

class SimpleAppletMainPanel extends JPanel {
   private static final Color CIRCLE_COLOR = Color.red.darker();
   private static final int CIRCLE_STROKE_WIDTH = 10;
   private static final int GAP = 3;
   private static final Stroke CIRCLE_STROKE = new BasicStroke((float)CIRCLE_STROKE_WIDTH);
   private JTextField textField = new JTextField(5);
   private JButton myButton = new JButton("Submit");
   private int count = 0;

   public SimpleAppletMainPanel() {
      ActionListener actionListener = new ActionListener() {
         public void actionPerformed(ActionEvent arg0) {
            try {
               count = Integer.parseInt(textField.getText());
               repaint();
            } catch (NumberFormatException e) {
               e.printStackTrace();
            }
         }
      };
      myButton.addActionListener(actionListener);
      textField.addActionListener(actionListener);
      add(new JLabel("Enter a number, 1-10:"));
      add(textField);
      add(myButton);
   }

   @Override
   protected void paintComponent(Graphics g) {
      super.paintComponent(g);
      for (int i = 0; i < count; i++) {
         drawCircle(g, i);
      }
   }

   private void drawCircle(Graphics g, int layer) {
      int centerX = getWidth() / 2;
      int centerY = getHeight() / 2;
      int radius = layer * (CIRCLE_STROKE_WIDTH + GAP) + GAP;
      int x = centerX - radius ;
      int y = centerY - radius;

      Graphics2D g2b = (Graphics2D) g.create();
      g2b.setRenderingHint(RenderingHints.KEY_ANTIALIASING,
            RenderingHints.VALUE_ANTIALIAS_ON);
      g2b.setStroke(CIRCLE_STROKE);

      g2b.setColor(CIRCLE_COLOR);
      g2b.drawOval(x, y, radius * 2, radius * 2);

      g2b.dispose();
   }
} 
```

This will result in the following:
![enter image description here](../Images/e8947a881964707cfffe537a1827b95f.png)![enter image description here](../Images/f262a7f98f4363b763b705aadb2bf4b8.png)

# django - 使用 FastCGI 在共享主机上设置 Django

> ID：11697512
> 
> 赞同：2
> 
> 时间：2012-07-28T01:32:06.967
> 
> 标签：django, apache, shared-hosting, fastcgi

我知道这可能是一个经常被问到的问题，但我尽了最大的努力来启动我的第一个 django 网站，但没有任何结果，所以请任何有共享主机和 django 经验的人帮忙。以下是任何相关信息：python 2.6 安装在远程机器上 $HOME/.local/lib/flup 和 django 在同一个地方，所有这些都是由 setup.py install --user 完成的。我的 django 项目文件结构：

```
$HOME/
    projects/django/bw_python/
                              manage.py
                              bw_python/
                                        __init__.py
                                        settings.py
                                        urls.py
                                        wsgi.py
                              site_main/
                                       django app with urls,models, etc... 
```

在 $HOME/.bashrc 我有以下几行：

```
export PATH=$HOME/.local/bin:$HOME/.local/usr/bin:$PATH
export PYTHONPATH=$HOME/projects/django:$HOME/projects/django/bw_python:$HOME/projects/django/bw_python/bw_python:$HOME/projects/django/bw_python/site_main:$PYTHONPATH 
```

如果我运行 python 解释器 django 并且 Flup 正在运行，则 manage.py runserver 可以正常工作。

现在在 public_html 我有以下 bw_python.fcgi 脚本：

```
#!/usr/bin/env python
import sys, os
# Add a custom Python path.
sys.path.insert(0, "/home5/bwinnova/.local/lib/python")
# Switch to the directory of your project. (Optional.)
os.chdir("/home5/bwinnova/projects/django/bw_python")
# Set the DJANGO_SETTINGS_MODULE environment variable.
os.environ['DJANGO_SETTINGS_MODULE'] = "bw_python.settings"
from django.core.servers.fastcgi import runfastcgi
runfastcgi(method="threaded", daemonize="false") 
```

如果我执行 ./bw_python.fcgi 我得到：

```
WSGIServer: missing FastCGI param REQUEST_METHOD required by WSGI!
WSGIServer: missing FastCGI param SERVER_NAME required by WSGI!
WSGIServer: missing FastCGI param SERVER_PORT required by WSGI!
WSGIServer: missing FastCGI param SERVER_PROTOCOL required by WSGI!
Status: 301 MOVED PERMANENTLY
Content-Type: text/html; charset=utf-8
Location: http://localhost/home/ 
```

.htaccess：

```
AddHandler fcgid-script .fcgi
RewriteEngine On
RewriteCond %{REQUEST_URI} !-f
RewriteRule ^(.*)$ bw_python.fcgi/$1 [QSA,L] 
```

这两个文件（包括 $HOME/projects/django/bw_python）上的 chmod 是 755。对不起，但是从教程中我被困在这里？下一步要做什么？我总是收到 500 服务器错误，在服务器错误日志中只有这样：

```
[Fri Jul 27 19:29:14 2012] [warn] RewriteCond: NoCase option for non-regex pattern '-f' is not supported and will be ignored. 
```

在此先感谢您提供的任何帮助或指导。

# css - 用 CSS 创建一个大的超级菜单

> ID：11697516
> 
> 赞同：0
> 
> 时间：2012-07-28T01:33:13.283
> 
> 标签：css, drop-down-menu, navigation, nav

我正在尝试创建一个类似于[http://rackspace.com](http://rackspace.com)的大型菜单。我已经尝试过在其他一些问题中给出的教程，但是其中一个使用了很多图像，其中一个不适用于他们链接到的 jQuery 版本。我想保留所有 CSS，但如果必须，我可以使用一些 JavaScript。

我不明白如何制作复杂的大型菜单，但只有简单的下拉菜单。如果有人可以为我提供此代码，我将非常高兴。我现在正在学习 CSS，我认为这也可以让我提高我的知识。

谢谢，

斯科特

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T01:41:07.893

Here is a very nice looking solution a quick Google search turned up. Haven't tried it myself but looks promising: [http://net.tutsplus.com/tutorials/html-css-techniques/how-to-build-a-kick-butt-css3-mega-drop-down-menu/](http://net.tutsplus.com/tutorials/html-css-techniques/how-to-build-a-kick-butt-css3-mega-drop-down-menu/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-05-20T16:59:31.303

你的问题太笼统了。您想要实现的目标不会通过我们可以在这里编写的简单 HTML 和 CSS 代码来实现。

所以你可能对这个 jQuery 插件和 CSS 框架感兴趣： [https ://myflashlabs.github.io/24component-bars/](https://myflashlabs.github.io/24component-bars/)

它可以帮助您快速轻松地创建具有许多功能的响应式大型菜单、页眉、侧边栏和页脚，没有任何麻烦……这正是您想要的 :)

**当已经有解决方案时，您不需要从一开始就自己编写代码！**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-28T01:41:42.617

Extremely quick sample of what you need to do:

[http://jsfiddle.net/KqZd4/](http://jsfiddle.net/KqZd4/)

I know this looks nothing like those, but that really is all the functionality you need. Just expand what is in the dropdown

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-02-27T18:02:43.060

```
<li class="main_list">Electronics
<ul>
<p class="category_header">Buy Any Electronics Item And Get Flat 50% OFF</p>
<ol>
<li>Mobiles</li>
<li>Item1</li>
<li>Item2</li>
</ol>

<ol>
<li>Tablets</li>
<li>Item1</li>
<li>Item2</li>
</ol>

</ul>
</li> 
```

添加更多你想要的

然后简单的风格

```
#main_menu
{
background-color:#1C1C1C;
float:left;
padding:0px;
width:700px;
height:50px;
line-height:50px;
margin-left:140px;
border-radius:5px;
}
#main_menu .main_list
{
color:white;
list-style-type:none;
float:left;
border-left:1px solid #666;
padding-left:27px;
padding-right:27px;

}
#main_menu .main_list:hover
{
color:#2E9AFE;
}
.main_list ul
{
background-color:white;
width:600px;
position:absolute;
left:150px;
width:700px;
padding:0px;
float:left;
padding-bottom:10px;
}
.main_list ul p
{
color:white;
background-color:#2E9AFE;
margin:0px;
text-align:left;
padding-left:10px;
font-size:20px;
font-weight:bold;
}
.main_list ul ol
{
float:left;
padding:0px;
list-style-type:none;
margin-left:30px;
}
.main_list ul ol li
{
line-height:25px;
font-weight:bold;
font-size:16px;
color:#2E9AFE;
} 
```

如果您有任何问题理解这里是一个完整的教程 [http://talkerscode.com/webtricks/mega-dropdown-menu-like-ecommerce-using-css.php](http://talkerscode.com/webtricks/mega-dropdown-menu-like-ecommerce-using-css.php)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-10-28T16:09:55.003

**尝试这个**

```
@import url('https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css');
* {
  box-sizing: border-box;
  font-family: sans-serif;
}

body {
  margin: 0;
}

/* Style Navigation bar */
.navbar {
  display: -webkit-flex;
  display: flex;
  background-color: #e3e3e3;
}

.navbar a {
  display: block;
  text-decoration: none;
  color: black;
  padding: 1.1em 1em;
  font-size: 1.1em;
  border-bottom: 3px solid transparent;
  transition: 0.1s;
}

.navbar > a:hover, .dropdown > a:hover {
  border-bottom-color: #FA7D19;
}

/* Style Mega Menu */
.dropdown-content {
  display: none;
  position: absolute;
  width: 90%;
  left: 5%;
  box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);
  z-index: 1;
  overflow: hidden;
}

.dropdown-content .header {
  padding: 16px;
  color: #777;
  background: white;
}

.dropdown:hover .dropdown-content {
  display: block;
}

/* Create three equal columns that stacks next to each other */
.row {
  display: -webkit-flex;
  display: flex;
}

.column {
  width: 100%;
  padding: 10px;
  background: #f8f8f8;
}

.column a {
  color: black;
  padding: 16px;
  text-decoration: none;
  display: block;
  text-align: left;
}

.column a:hover {
  background-color: #ddd;
}

/* Makes the three columns stack on top of each other instead of 
   next to each other (when screen width is 600px or less) */
@media screen and (max-width: 600px) {
  .row {
    flex-direction: column;
  }
}
```

```
<div class="navbar">
  <a href="#">Home</a>
  <div class="dropdown">
    <a href="#">Dropdown <i class="fa fa-caret-down"></i></a>
    <div class="dropdown-content">
      <div class="header">
        <h2>Mega Menu</h2>
      </div>   
      <div class="row">
        <div class="column">
          <h3>Category 1</h3>
          <a href="#">Link 1</a>
          <a href="#">Link 2</a>
          <a href="#">Link 3</a>
        </div>
        <div class="column">
          <h3>Category 2</h3>
          <a href="#">Link 1</a>
          <a href="#">Link 2</a>
          <a href="#">Link 3</a>
        </div>
        <div class="column">
          <h3>Category 3</h3>
          <a href="#">Link 1</a>
          <a href="#">Link 2</a>
          <a href="#">Link 3</a>
        </div>
      </div>
    </div>
  </div> 
  <a href="#">Pricing</a>
</div>

<div style="padding:10px 15px;">
  <h1>Create a Mega Menu</h1>
  <p>Hover over the "Dropdown" link to see the mega menu.</p>
</div>
```

**参考：**[如何创建超级菜单](https://parrot-tutorial.com/howto/howto_mega_menu.html)

# python - sys.path() 和 PYTHONPATH 问题

> ID：11697517
> 
> 赞同：5
> 
> 时间：2012-07-28T01:33:17.703
> 
> 标签：python, python-2.7, environment-variables

我一直在学习 Python，我正在使用 2.7.3，并且我正在尝试理解`import`语句。

1.  [文档](http://docs.python.org/tutorial/modules.html#the-module-search-path)说，当您尝试导入模块时，解释器将首先搜索其中一个内置模块。

    内置模块是什么意思？

2.  然后，文档说解释器在 sys.path 列出的目录中搜索，并且 sys.path 是从这些源初始化的：

    *   包含输入脚本的目录（或当前目录）。
    *   `PYTHONPATH`（目录名称列表，与 shell 变量的语法相同`PATH`）。
    *   安装相关的默认值。

    这是我的计算机在命令行模式下使用 python 的 sys.path 命令的示例输出：（我删除了一些，以免它很大）

    ```
    ['', '/usr/lib/python2.7', '/usr/lib/python2.7/lib-old', '/usr/lib/python2.7/lib-dynload', '/usr/local/lib/python2.7/dist-packages', '/usr/lib/python2.7/dist-packages', '/usr/lib/python2.7/dist-packages/PIL', '/usr/lib/python2.7/dist-packages/gst-0.10', '/usr/lib/python2.7/dist-packages/gtk-2.0', '/usr/lib/pymodules/python2.7', '/usr/lib/python2.7/dist-packages/ubuntuone-couch', '/usr/lib/python2.7/dist-packages/ubuntuone-storage-protocol'] 
    ```

    现在，我假设“”路径是指包含“脚本”的目录，所以我认为其余的将来自我的`PYTHONPATH`环境变量。但是，当我转到终端并键入`env`时，`PYTHONPATH`它不作为环境变量存在。我也试过`import os`了`os.environ`，但我得到了相同的输出。

    我真的没有 PYTHONPATH 环境变量吗？我不相信我曾经专门定义过 PYTHONPATH 环境变量，但我认为当我安装新软件包时，它们会自动更改该环境变量。如果我没有 PYTHONPATH，我的 sys.path 是如何填充的？如果我下载新包，如果我没有这个 PYTHONPATH 变量，Python 怎么知道在哪里寻找它们？

3.  环境变量如何工作？据我了解，环境变量特定于为其设置的进程，但是，如果我打开多个终端窗口并运行`env`，它们都会显示许多相同的变量，例如`PATH`. 我知道持久性环境变量的文件位置，例如`/etc/environment`，其中包含我的`PATH`变量。是否可以判断持久环境变量的存储位置？存储新的持久环境变量的推荐位置是什么？环境变量实际上如何与 Python 解释器一起工作？Python 解释器会寻找`PYTHONPATH`，但它在本质层面是如何工作的？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-06T12:34:17.623

一口气问这么多问题！:)

好吧，我试着只回答其中的几个。

1) 内置模块是 python 版本附带的任何模块。例如 sys 和 os 模块是内置模块。就是这样。

2) PYTHONPATH 变量在您的系统上默认不存在。当您启动 python 解释器时，它会按照您描述的方式填充搜索模块的路径数组。这是 sys.path 的结果。但是 sys.path 不是环境变量 PYTHONPATH。如果您在系统中设置 PYTHONPATH，则其中包含的所有路径都将包含在 python 解释器用于搜索模块的数组中。

我会将环境变量的答案留给其他人，因为我觉得我不是回答这样一个问题的合适人选。不过，我的感觉是，它可能会因系统而异。反正...

希望能帮助到你。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-08T13:00:34.620

1.  内置模块是列出的模块[`sys.builtin_module_names`](http://docs.python.org/2/library/sys.html#sys.builtin_module_names)。这些模块与解释器一起编译，因此*始终*可用。请注意，它们是标准库的一部分，但标准库包含更多模块。为了清楚起见，如果您尝试在 python3.3 中运行此代码：

    ```
    >>> import sys
    >>> sys.path = []
    >>> import os          # works
    >>> import traceback   # ImportError, traceback is in the stdlib! 
    ```

    在 python2 上，两者都成功，因为`import`标准库路径的特殊情况。（有关python3.3中更改的更多信息，请参阅[此内容）。](http://docs.python.org/3.3/whatsnew/3.3.html#using-importlib-as-the-implementation-of-import)`import`

2.  如果`PYTHONPATH`未找到，则它不包含任何额外的目录。但是，您链接的文档还指出 python 使用“依赖于安装的默认值”。您在您的目录中看到的目录是`sys.path`在这个“安装依赖默认值”中定义的。如果您定义了，`PYTHONPATH`您可以在默认目录`sys.path` *之前*添加其他目录，但如果不定义它也不会造成任何损害。

3.  环境变量是按进程定义的，但是 shell 可以为它们启动的子进程提供自己的变量“范围”。例如，您可以在 shell 文件中设置环境变量，例如`~/.bashrc`或`~/.profile`.

    如果您在 Ubuntu 上，定义系统范围和持久环境变量的首选方法是使用`pam_enviroment`. 你可以在 Ask Ubuntu 上看到[这个](https://askubuntu.com/q/125421/115357)问题，它展示了如何设置系统范围的环境变量。

    AFAIK 没有为每个（例如）linux 发行版设置它们的标准方法，而且，显然，每个操作系统都有自己的定义它们的方法。

    如果您想了解有关环境变量处理的更详细说明，您可能应该在[Super User](https://superuser.com/)上询问。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T12:49:27.223

`PYTHONPATH`未在您的系统上定义。`sys.path`这意味着除了 `''`“依赖于安装的默认设置”之外，您所看到的一切。

环境变量表征环境，而不是过程。但是，您可以在启动进程时使用例如 Linux`env`命令来调整它们。这基本上意味着该过程将在不同的环境中运行。您问题的“如果如何工作”部分可以有平台相关的答案。但是，如果您指的是文件，我认为您不能“判断持久环境变量的存储位置”。可以在某个时间点（通常在启动时）或仅在命令行中执行的任何文件中设置环境变量。

# jquery - 调用 jvectormap 的 addMarker 函数

> ID：11697522
> 
> 赞同：2
> 
> 时间：2012-07-28T01:35:12.023
> 
> 标签：jquery, jvectormap

我正在使用 jVectorMap 插件，我想通过另一个函数触发标记。我怎么能只打电话给那一行 `map.addMarker( index, markers[index], [values1[index], values2[index]] );` ？

```
$("#target").click(function() {
**Here should that addMarker function included**
}); 
```

这是由复选框触发标记的代码部分：

```
 $('.list-markers :checkbox').change(function(){

                var index = $(this).closest('li').attr('data-marker-index');

                if ($(this).prop('checked')) {
                    map.addMarker( index, markers[index], [values1[index], values2[index]] );
                } else {
                    map.removeMarkers( [index] );
                }
            }); 
```

非常感谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-02T10:26:07.743

据我了解，您使用的是尚未发布的新版 jVectorMap。要访问该`addMarker`方法，您需要一个`jvm.WorldMap`. 如果您通过插件调用 ( `$('#map').vectorMap()`) 创建了地图，则可以使用以下语法获取它：

```
$('#map').vectorMap('get', 'mapObject'); 
```

# .net - 处理大量二维数据

> ID：11697523
> 
> 赞同：0
> 
> 时间：2012-07-28T01:35:15.427
> 
> 标签：.net, storage

我希望你能帮我解决这个问题。我目前正在重新设计一个应用程序（.NET），现在我已经来到了我不得不过度考虑数据存储的部分。

基本上每 10 秒左右（可能会有所不同，但这是最快的）我得到一个包含浮点值数组和时间戳的新数据集。（这些数组可能非常大，所以我必须处理大量数据[可以达到数百 mb 甚至 gb]）数组的长度在每个过程中是固定的（让我们称之为运行），但在不同的过程中会有所不同运行。我一次只会看一场。

所以我的问题是：

如何保存这些数据以及如何在我的应用程序中处理它？

特别是如果我想读出具有特定时间戳的数据集，

给定索引的浮点值列表

以及给定索引范围和时间戳范围的二维浮点值列表。

[编辑：数据需要存储在本地]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T01:52:49.717

我建议使用数据库。

```
Run(int Id, datetime Timestamp) - PK: Id
Entry(int RunId, int Index, float Value) - PK: RunId, Index 
```

那么你也能

```
SELECT Index, Value 
FROM Entry E 
    INNER JOIN Run R 
        ON E.RunId = R.Id
WHERE R.Timestamp = '00-00-00 00:00:00' 
```

和

```
SELECT RunId, Value 
FROM Entry 
WHERE Index = 0 
```

和

```
SELECT Timestamp, Index, Value 
FROM Entry E 
    INNER JOIN Run R 
        ON E.RunId = R.Id
WHERE 
    R.Timestamp <= '00-00-00 00:00:00' AND 
    R.Timestamp >= '00-00-00 00:00:00' AND
    E.Index <= 0 AND
    E.Index >= 0 
```

用适当的数据替换 0 和 '00-00-00 00:00:00'。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T01:38:12.090

Azure Table Storage ...........

# c# - 为什么不显示彩色图像？

> ID：11697531
> 
> 赞同：-1
> 
> 时间：2012-07-28T01:36:38.177
> 
> 标签：c#, wpf, image, image-processing, kinect

我正在使用 Kinect SDK 并尝试添加色框。我正在使用代码：

```
byte[] pixels = new byte[sensor.ColorStream.FramePixelDataLength];

WriteableBitmap image = new WriteableBitmap(sensor.ColorStream.FrameWidth, sensor.ColorStream.FrameHeight, 96, 96,
        PixelFormats.Bgra32, null);

video.Source = image;

colorFrame.CopyPixelDataTo(pixels);

image.WritePixels(new Int32Rect(0, 0, image.PixelWidth, image.PixelHeight), pixels, image.PixelWidth * sizeof(int), 0); 
```

但是图像没有显示。我知道我可以连接到 Kinect，因为我可以改变仰角。我究竟做错了什么？提前致谢。*注意：我试图避免使用 Coding4Fun*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T14:39:05.927

不，你离得太近了。我假设`video`是 WPF 图像。

```
private WriteableBitmap wBitmap; 
private byte[] pixels;

private void WindowLoaded(...)
{
    //set up kinect first, but don't start it
    ...

    pixels = new byte[sensor.ColorStream.FramePixelDataLength];

    wBitmap = new WriteableBitmap(sensor.ColorStream.FrameWidth, sensor.ColorStream.FrameHeight, 
        96, 96, PixelFormats.Bgra32, null);

    video.Source = wBitmap;

    sensor.Start();
}

private void ColorFrameReady(object sender, ColorImageFrameReadyArgs e)
{
    using (ColorImageFrame colorFrame = e.OpenColorImageFrame())
    {
        if (colorFrame == null)
        {
            return;
        }

        colorFrame.CopyPixelDataTo(pixels);

        wBitmap.WritePixels(new Int32Rect(0, 0, wBitmap.PixelWidth, wBitmap.PixelHeight),
            pixels, image.PixelWidth * 4, 0);
    }
} 
```

您不应该在每一帧上都创建一个新的 BitmapSource，最好在开始时创建单个 WriteableBitmap 并在每一帧上刷新它。

此外，您之前看不到图像的原因实际上并不是因为它没有被刷新。绝对是，但它是看不见的。您将 WriteableBitmap 格式设置为 Bgra32，其中`a`是 alpha。Kinect 以 Bgr32 格式发送数据；没有设置 Alpha 通道。因此，当您创建 Bgra32 位图时，它会看到 Kinect 将 alpha 通道设置为 0，因此图像显示为完全透明。

# javascript - 使用 jQuery 编写一个 .add*() 插件函数

> ID：11697532
> 
> 赞同：1
> 
> 时间：2012-07-28T01:36:52.593
> 
> 标签：javascript, jquery, jquery-plugins

好的，所以我发现了如何编写 jQuery 插件，我认为这会整理我的代码很多。我一直在看很多教程，它们只是为插件函数传递的匹配元素集添加样式。

...但是我想在使用我的函数时添加新元素。说我想这样做：

```
$children
    .addCousins()
        .addClass("x")
    .end()
    .addClass("y"); 
```

所以我写了这个函数，`.addCousins()`. 它的作用，没有人知道，但知道它在理论上有效。我只需要考虑如何在`.addCousins()`调用时添加更多元素（如果有的话）。对于其中的每个元素，可以有零个或多个“表亲”，在插件功能中`$children`执行时应添加。`.each()`

这是我到目前为止所拥有的：

```
(function($){
    $.fn.extend({
        addCousins: function () {
            return this.each(
                    function () {
                        var index = $(this)
                            .prevAll("td.radio")
                                .andSelf()
                                    .length - 1;

                        $(this)
                            .prev("td[rowspan=2]")
                                .parent()
                                    .next()
                                        .children("td.radio")
                                            .eq(index); // here is the "cousin" which should be added to the selection
                    }
                );
        }
    });
})(jQuery); 
```

我整天都在尝试各种解决方案，但还没有进展。表亲的选择（您不必担心的选择的实现）是在内部匿名函数中完成的，但是，是的，我真的不知道如何从这里开始。

我希望我或多或少清楚我想要什么。

**编辑#1。**这是一些可测试的 HTML（我认为）...

```
<table>
    <tr>
        <td rowspan="2">Here are cousins</td>
        <td class="radio">1</td>
        <td class="radio">2</td>
        <td class="radio">3</td>
    </tr>
    <tr>
        <td class="radio">4</td>
        <td class="radio">5</td>
        <td class="radio">6</td>
    </tr>
    <tr>
        <td rowspan="2">Here are NO cousins</td>
        <td class="radio">7</td>
        <td class="radio">8</td>
        <td class="radio">9</td>
    </tr>
</table> 
```

...以及我更新的插件功能。

```
(function($){
    $.fn.extend({ 
        cousins: function () {
            this
                .each(
                    function () {
                        var index = $(this)
                            .prevAll("td.radio")
                                .andSelf()
                                    .length - 1;

                        $(this)
                            .prev("td[rowspan=2]")
                                .parent()
                                    .next()
                                        .children("td.radio")
                                            .eq(index)
                                                .addClass("cousin");
                                            .end()
                                        .end()
                                    .end()
                                .end()
                            .end()
                            .prev()
                                .find("td[rowspan=2]")
                                    .nextAll("td.radio")
                                        .eq(index)
                                            .addClass("cousin");
                    }
                );

            return $("td.cousin")
                .removeClass("cousin");
        }
    });
})(jQuery); 
```

如果选择表格单元格 2 并将其传递给`.cousins()`，则应返回表格单元格 4。反之亦然，表格单元格 4...

**编辑#2。**我的（尚未工作）更新：

```
cousins: function () {
    var $cousins = $();

    this
        .each(
            function () {
                var index =
                    $(this)
                        .prevAll("td.radio")
                            .andSelf()
                                .length - 1;
                var $next = null;
                var $prev = null;

                $next = 
                    $(this)
                        .prev("td[rowspan=2]")
                            .parent()
                                .next()
                                    .children("td.radio")
                                        .get(index);
                $prev =
                    $(this)
                        .parent()
                            .prev()
                                .find("td[rowspan=2]")
                                    .nextAll("td.radio")
                                        .get(index);

                if ($next == null && $prev == null) {
                    $cousins.push($(this));
                } else {
                    $cousins.push($next);
                    $cousins.push($prev);
                }
            }
        );

    return $cousins;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T14:52:58.917

据我了解，您想将元素添加到集合中，并`.end`让您回到之前的集合。

您可以`.add`为此使用：http: [//jsfiddle.net/AjkRb/1/](http://jsfiddle.net/AjkRb/1/)。

```
(function($){
    $.fn.extend({
        addCousins: function () {
            var toAdd = [];
            this.each(function () {
                var index = $(this)
                    .prevAll("td.radio")
                    .andSelf()
                    .length - 1;

                toAdd.push($(this)
                    .parent()
                    .next()
                    .children("td.radio")
                    .get(index));  // add native element (get instead of eq)
            });
            return this.add(toAdd);
        }
    });
})(jQuery); 
```

用法可以如下：

```
$("tr:first td.radio")
  .addCousins()
    .addClass("red")
    .end()
  .addClass("big"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T04:19:40.770

Viktor，假设您的代码正确选择了感兴趣的元素（表亲），那么有很多方法可以将它们添加到原始选择中。

一个考虑因素是返回的 jq 对象中的元素应该按 DOM 顺序排列，幸运的是，“从 jQuery 1.4 开始，结果`.add()`将始终按文档顺序返回（而不是简单的串联）`.add()`”。pimvdb 的代码正确地解决了这个问题。

另一方面，我更喜欢`.cousins()`插件提供的额外灵活性，而不是`.addCousins()`, 其中：

*   `.cousins()`只会选择表兄弟
*   `.cousins().andSelf()`相当于`.addCousins()`

这是代码`.cousins()`：

```
(function($) {
    $.fn.extend({
        cousins: function(options) {
            var settings = {
                sibling_selector: '*',
                uncle_selector: '*',
                cousin_selector: '*'
            };
            if (options) {
                $.extend(settings, options);
            }
            var c = [];//cousins
            this.each(function() {
                var $this = $(this);
                var index = $this.parent().children(settings.sibling_selector).index($this);
                $this.parent().siblings(settings.uncle_selector).each(function() {
                    c.push($(this).children(settings.cousin_selector).get(index));
                });
            });
            return this.pushStack(c);
        }
    });
})(jQuery); 
```

**[演示](http://jsfiddle.net/5YzKT/1/)**

笔记：

*   为了概括插件，这个版本接受一个选项映射（见演示）。
*   `.pushStack()`允许方法链`.cousins(...).andSelf()`并按`.cousins(...).end()`预期运行。

# android - Different ways of getting a string resource

> ID：11697534
> 
> 赞同：5
> 
> 时间：2012-07-28T01:37:55.720
> 
> 标签：android, string, resources

What is the difference between `getResources().getString(...)` and `getString()` when called from my activity? I read that `getText(...)` returns stylized text, but when should I use `getResources(`) as opposed to directly calling `getString()`?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-28T02:00:39.090

[如果您获取 Android 源代码，特别是Context 类](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/1.6_r2/android/content/Context.java#Context.getString%28int%29)，则它们没有什么特别之处

```
 public final String getString(int resId) {
     return getResources().getString(resId);
 } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-28T10:59:02.623

`getString()`是一种方便的方式，因为它经常使用（您无需键入`getResources()`...）。除此之外，它们是相同的。

# ios - iOS ending Coco2D game within Viewcontroller correctly and restart issue

> ID：11697535
> 
> 赞同：2
> 
> 时间：2012-07-28T01:37:57.690
> 
> 标签：ios, cocos2d-iphone

The coco2d game which is UIView is launched from viewcontroller as such

```
 coco2dgame=[[coco2d_view alloc] initWithFrame:CGRectMake(0,0,320,480)];
            [self.view addSubview:coco2dgame]; 
```

when it ends

```
 [coco2dgame.director end];
         [coco2dgame removeFromSuperview];
          coco2dgame=nil; 
```

when I want to relaunch I call again

```
 coco2dgame=[[coco2d_view alloc] initWithFrame:CGRectMake(0,0,320,480)];
            [self.view addSubview:coco2dgame]; 
```

but I am getting errors

```
 OpenGL error 0x0502 in -[CCSprite draw] 532

            OpenGL error 0x0502 in -[CCSprite draw] 532 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T22:18:27.233

您的代码设置似乎有点古怪。您正在 UIView 上加载 cocos2d，但在该视图上保留了 director（一个 ViewController）。在 ViewController 结构中启动和结束 cocos2d 引擎可能有点棘手，但这是我在游戏中使用的：

第 1 步：从模板中修改 AppDelegate.m 中的标准代码。您需要注释掉所有处理 _director ivar 的行，并将根视图控制器从 _director 更改为您的 ViewController。游戏现在将启动到 cocos2d 模板代码中创建的 navController 中的 ViewController，而不是 _director。

第 2 步：您要从中启动 cocos2d 的 ViewController 需要有一个在 -init 中调用的方法，该方法创建并且重要的是**保留**主管用作其视图的 CCGLView，如下所示：

```
AppController *app = (AppController *)[[UIApplication sharedApplication] delegate];
myGLView = [[CCGLView viewWithFrame:[app.window bounds]
                        pixelFormat:kEAGLColorFormatRGB565  //kEAGLColorFormatRGBA8
                        depthFormat:0   //GL_DEPTH_COMPONENT24_OES
                 preserveBackbuffer:NO
                         sharegroup:nil
                      multiSampling:NO
                    numberOfSamples:0] retain]; 
```

保留 CCGLView 对于防止某些 OpenGL 错误很重要，因为 cocos2d 在销毁后重新创建它似乎存在问题。就像我说的，这个方法只被调用一次，在你启动 cocos2d 的 ViewController 的 -init 方法中。

第 3 步：在 ViewController 中创建一个方法来设置导向器并将其推送到导航控制器的堆栈中，如下所示：

```
AppController *app = (AppController *)[[UIApplication sharedApplication] delegate];

CCDirectorIOS* director = (CCDirectorIOS *) [CCDirector sharedDirector];
director.wantsFullScreenLayout = YES;
[director setView:myGLView];
// Display FSP and SPF
[director setDisplayStats:NO];

// set FPS at 60
[director setAnimationInterval:1.0/60];

// for rotation and other messages
[director setDelegate:app];

// 2D projection
[director setProjection:kCCDirectorProjection2D];
//  [director setProjection:kCCDirectorProjection3D];

// Enables High Res mode (Retina Display) on iPhone 4 and maintains low res on all other devices
if( ! [director enableRetinaDisplay:YES] )
    CCLOG(@"Retina Display Not supported");

if (director.runningScene)
    [director replaceScene:[TwoPlayerBoard node]];
else
    [director pushScene:[TwoPlayerBoard node]];

[app.navController pushViewController:director animated:YES]; 
```

大多数代码实际上是从 AppDelegate 中已设置原始导演的注释掉的代码中复制的。请注意，您将导演的视图设置为您在 ViewController 的 -init 中创建和保留的 CCGLView。在这种方法中，您让新创建的导演推送您的启动场景。

第 4 步：在游戏层中，每当您想返回启动游戏 (cocos2d) 的 ViewController 时，请执行以下代码：

```
AppController *app = (AppController *)[[UIApplication sharedApplication] delegate];
[app.navController popViewControllerAnimated:YES];
[[CCDirectorIOS sharedDirector] end]; 
```

这应该允许您从视图控制器自由移动到 cocos2d 中的主管（也是 UIViewController 的子类），然后返回没有任何问题。希望这可以为您详细解释它，让我知道它是怎么回事！

# symfony - How do I install DoctrineMongoODMBundle on a Mac

> ID：11697539
> 
> 赞同：2
> 
> 时间：2012-07-28T01:38:20.113
> 
> 标签：symfony, doctrine, phar

I get this:

```
 Problem 1
 - doctrine/mongodb dev-master requires ext-mongo * -> no matching package found.
 - doctrine/doctrine-mongo-odm-module dev-master requires doctrine/mongodb-odm dev-master -> satisfiable by doctrine/mongodb-odm dev-master.
 - doctrine/mongodb-odm dev-master requires doctrine/mongodb dev-master -> satisfiable by doctrine/mongodb dev-master.
 - Installation request for doctrine/doctrine-mongo-odm-module dev-master -> satisfiable by doctrine/doctrine-mongo-odm-module dev-master. 
```

I have mongo and it's php extension installed on my Mac, but still no joy. Any thoughts?

# php - 会话是否仅存储在浏览器中？

> ID：11697541
> 
> 赞同：7
> 
> 时间：2012-07-28T01:38:50.510
> 
> 标签：php, session, cookies, brute-force, session-hijacking

我的网站受到暴力攻击，攻击者试图访问用户帐户。机器人没有用户代理。我有一个系统，如果一个人在 10 分钟内超过 3 次尝试登录，就会阻止他们登录。

我还让它检查用户代理，如果没有，退出。

我的问题是：会话是否仅存储在浏览器中？我在想的是他们正在使用通过命令行执行的脚本。

我也实现了这个：

```
if(!isset($_COOKIE[ini_get('session.name')])) {
header("HTTP/1.0 404 Not Found");
exit;
} 
```

我还能做些什么来防止这些攻击吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-28T01:41:03.693

会话变量的内容存储在服务器上，但是，会话由存储在客户端并随每个请求发送的会话 ID 标识。通常会话 ID 存储在 cookie 中，但也可以附加到 URL 中。

在 Wiki 和[PHP Security Consortium上有一篇关于](http://phpsec.org/projects/guide/4.html)[会话劫持](http://en.wikipedia.org/wiki/Session_hijacking)的非常有趣的读物，它应该让您更好地理解劫持是什么以及如何防止它。

有很多方法可以帮助防止这些攻击，我指出了三个：

*   在用户成功登录后使用 PHP 的[session_regenerate_id()](http://php.net/manual/en/function.session-regenerate-id.php)。这将创建一个新的会话 ID，与他们第一次访问公共/安全区域时创建的 ID 不同，当然如果有一个会话启动。
*   成功登录时记录用户的 IP 地址、会话 ID 和用户代理。检查每个请求的 IP 和用户代理，如果 IP 和代理与此会话不匹配，请让他们重新登录。但请注意，有时用户的 IP 可能会更改并可能会惹恼某人。另请注意，用户代理也很容易被欺骗。
*   使用 SSL/TCL 隐藏请求中发送的信息。

# php - PHP front controller in nginx

> ID：11697545
> 
> 赞同：1
> 
> 时间：2012-07-28T01:40:27.663
> 
> 标签：php, regex, nginx, fastcgi, front-controller

I have a wiki that hosts user-generated content with URLs like `/wiki/view/pagename` and `/wiki/modify/pagename`. I'm using an nginx configuration that goes something like:

```
location /wiki/ {
    try_files $uri $uri/ /wiki/index.php?q=$uri&$args;
}
location ~ \.php$ {
    try_files $uri =404;
    #fastcgi stuff...
} 
```

It's been working great and as far as i can tell, this is the recommended approach. However, today, a user created a page named "whatever.php", so it needs the URLs `/wiki/view/whatever.php` to be redirected to my `/wiki/index.php`... but it gets caught in the second location block and returns a 404 to the user-agent.

Does anyone have any suggestions? Can i add an extra location block to rewrite *.php to the main script somewhere in such a way that won't affect actually routing pages? I still want to use nginx to serve static content inside the `/wiki/` directory and to preserve the behaviour of everything outside this directory.

Repost of [this](http://forum.nginx.org/read.php?11,228830) dead forum thread

# c - size_t return pointer subtraction

> ID：11697547
> 
> 赞同：1
> 
> 时间：2012-07-28T01:40:31.463
> 
> 标签：c, pointers

I want to rthe following error message......error: invalid conversion from ‘const char*’ to ‘size_t’</p>

```
 return 0;
}

size_t strlen(const char *s1)
{

    return s1 - 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T01:45:37.157

Subtracting zero from a pointer does not change the pointer, the same way that subtracting zero from a number does not change a number.

You should subtract the original pointer, not zero, to get the length:

```
size_t strlen(const char *s1) {
    const char *orig = s1;
    while (*s1) {
        s1++;
    }
    return s1 - orig;
} 
```

# php - php替换数组id键

> ID：11697548
> 
> 赞同：3
> 
> 时间：2012-07-28T01:40:36.053
> 
> 标签：php, mysql

我正在使用单个 mysql 查询为嵌套结果（类别和子类别）创建多维数组。

询问

```
SELECT `categories`.`cat_title`, `subcategories`.`sub_cat_id`, `subcategories`.`sub_cat_title` 
FROM (`categories`) 
LEFT JOIN `subcategories` 
ON `subcategories`.`cat_id` = `categories`.`cat_id` 
ORDER BY `categories`.`cat_title 
```

创建多维数组

```
$array = array(); 

foreach ($query->result_array() as $row): //query result as a pure array
        $array[$row['cat_title']][] = $row['sub_cat_title'];
endforeach; 

return $array; 
```

以上返回类别及其各自的子类别。

```
 Array ( 
   [Art] => Array ( [0] => Graphic Design [1] => Painting )
   [Literature] => Array ( [0] => Science Fiction [1] => Poetry [2] => Fiction ) 
   [Science] => Array ( [0] => Environmental ) 
 ) 
```

是否可以用子类别 id 之类的查询数据替换数组键`sub_cat_id`？例如

```
[Literature] => Array ( [8] => Science Fiction [94] => Poetry [5] => Fiction ) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T01:44:08.280

是的，在循环中设置它：

```
$array[ $row['cat_title'] ][ $row['sub_cat_id'] ] = $row['sub_cat_title']; 
```

但是，`$array[$row['cat_title']]`可能尚未设置，因此您应该事先添加此检查：

```
if( !isset( $array[$row['cat_title']])) {
    $array[$row['cat_title']] = array();
} 
```

您的原始代码不需要此检查，因为`$array[]`不会生成任何通知/警告，但是当您尝试设置特定键时，如果变量尚未声明为数组，则会生成通知/警告。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T01:45:43.107

你可以这样做：

```
foreach($array as $key=>$val){
   unset($array[$key]);
   $newKey = //New value

   $array[$newKey] = $val];
} 
```

# awk - tips'n'tricks in awk

> ID：11697556
> 
> 赞同：4
> 
> 时间：2012-07-28T01:42:39.420
> 
> 标签：awk, idioms

I'm looking for caveats, tips'n'tricks etc. for awk. For example:

```
awk '$9=="404"{a[$7]++}END{for(i in a)print a[i],i}' access.log|less 
```

this code, will print errors aggregated by page path.

There is a trick, to sort an array by setting WHINY_USERS to any, nonzero value, to automatically use isort function on array before printing:

```
WHINY_USERS=1 awk '$9=="404"{a[$7]++}END{for(i in a)print a[i],i}' access.log|less 
```

This code will return same errors but sorted by the key name (path).

I'm looking for more tricks like this one - do you know any resource which has them listed? could you share best tricks you know? I've never found awk wiki - only same old tuts repeated over and over...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-28T01:48:51.013

Awk One Liners 算不算？

[http://www.pement.org/awk/awk1line.txt](http://www.pement.org/awk/awk1line.txt)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-28T14:35:31.607

在 4.0 版`gawk`中有一个调试器。

[http://www.gnu.org/software/gawk/manual/html_node/Debugger.html](http://www.gnu.org/software/gawk/manual/html_node/Debugger.html)

```
Starting dgawk is exactly like running awk. The file(s) containing
the program and any supporting code are given on the command line
as arguments to one or more -f options. (dgawk is not designed to
debug command-line programs, only programs contained in files.) In
our case, we call dgawk like this:

     $ dgawk -f getopt.awk -f join.awk -f uniq.awk inputfile 
```

# javascript - javascript函数的返回值

> ID：11697557
> 
> 赞同：1
> 
> 时间：2012-07-28T01:42:45.847
> 
> 标签：javascript, jquery, function, return

我的代码中有一段代码`$(document).ready(function() {}`： `getInitial(len);` 其中 len 是一个整数。

```
function getInitial(number){
    number--;
    if(number < 0) return
    var $items = $(balls()); 
    $items.imagesLoaded(function(){
        $container
        .masonry('reloadItems')
        .append( $items ).masonry( 'appended', $items, true );
    });
    getInitial(number);
} 
```

注意上面写着的那一行：`var $items = $balls(());`

这被定义为：

```
function balls(){
    $iterator -= 1;
    if($iterator < 0){
        var $boxes = $( '<div class="box">No more games!</div>' );
        $container.append( $boxes ).masonry( 'appended', $boxes, false );   
        return; 
    }
    var imgPreload = new Image();
    var ret; 
    imgPreload.src = 'scripts/php/timthumb.php?src='+$test[$iterator][2]+'&q=100&w=300';
    $(".imgHolder").append('<img src="'+imgPreload.src+'"/>');
    //console.log(imgPreload);
    $(".imgHolder").imagesLoaded(function(){
        ret = '<div class="box" style="width:18%;">'
            +'<p>'+$test[$iterator][1][2]['name']+'</p>'
            +'<img src="'+imgPreload.src+'"/>'//Replace this with the one below when timthumb is whitelisted
            +'<div id=boxBottom>'+Math.floor($test[$iterator][0]*100)+'%</div>'
            +'</div>';
    });
    console.log(ret);
    return ret;
} 
```

我的问题是如何`ret`从函数内部的 imagesLoaded() 方法`balls()`返回到`$items`内部`getInitial()`？

我希望没有更多的混乱。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T01:50:50.623

尝试以下操作：

```
var imgPreload = new Image();
var ret = '<div class="box" style="width:18%;">'
          +'<p>'+$test[$iterator][1][2]['name']+'</p>'
          +'<img src="'+imgPreload.src+'"/>'
          +'<div id=boxBottom>'+Math.floor($test[$iterator][0]*100)+'%</div>'
          +'</div>'; 
imgPreload.src = 'scripts/php/timthumb.php?src='+$test[$iterator][2]+'&q=100&w=300';
$(".imgHolder").append('<img src="'+imgPreload.src+'"/>');
//console.log(imgPreload);
$(".imgHolder").imagesLoaded();
return ret; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T01:58:26.040

由于您的函数是异步运行的，因此您需要一个回调函数。你不能让它返回一个值。通过传递回调返回值。

```
function getInitial(number){
    number--;
    if(number < 0) return
    // Can't do the following, it's asynchronous
    // var $items = $(balls()); 

    // Do this instead
    balls(function(html) {
        var $items = $(html);
        $items.imagesLoaded(function(){
            $container
            .masonry('reloadItems')
            .append( $items ).masonry( 'appended', $items, true );
        });
        getInitial(number);
    })
}

function balls(callback){
    $iterator -= 1;
    if($iterator < 0){
        var $boxes = $( '<div class="box">No more games!</div>' );
        $container.append( $boxes ).masonry( 'appended', $boxes, false );   
        return; 
    }
    var imgPreload = new Image();
    var ret; 
    imgPreload.src = 'scripts/php/timthumb.php?src='+$test[$iterator][2]+'&q=100&w=300';
    $(".imgHolder").append('<img src="'+imgPreload.src+'"/>');
    //console.log(imgPreload);
    $(".imgHolder").imagesLoaded(function(){
        callback('<div class="box" style="width:18%;">'
            +'<p>'+$test[$iterator][1][2]['name']+'</p>'
            +'<img src="'+imgPreload.src+'"/>'//Replace this with the one below when timthumb is whitelisted
            +'<div id=boxBottom>'+Math.floor($test[$iterator][0]*100)+'%</div>'
            +'</div>');
    });
} 
```

回调是从异步函数*返回值的方式*

可能还有问题，代码很混乱。但这应该让你朝着正确的方向前进。

# c# - Powershell：远程运行空间与远程会话

> ID：11697558
> 
> 赞同：2
> 
> 时间：2012-07-28T01:42:55.737
> 
> 标签：c#, powershell, powershell-2.0

我需要以编程方式在另一台机器上远程运行命令，并为此使用 powershell（来自 c#）。我想知道使用的利弊

*   远程运行空间并使用 powershell 管道运行命令 vs
*   本地运行空间并使用 new-pssession、invoke-command 创建与远程机器的会话并调用命令。

假设我现在对扇出功能不感兴趣。

此外，随着我​​有更多的机器我想在上面执行不同的命令，这会如何改变。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-16T11:40:26.287

使用本地运行空间，您可以创建一堆并在以后使用它们连接到不同的远程机器。然而，远程运行空间与特定机器相关联

# symfony - 在 Symfony 中修改绑定表单数据的建议位置是哪个？

> ID：11697560
> 
> 赞同：14
> 
> 时间：2012-07-28T01:43:39.560
> 
> 标签：symfony, symfony-forms

我有一个用于创建新的`Customer`. 客户可能有一个手机号码。手机号码应不带用户可键入的前缀`+`或前缀。`00`这可以通过以下方式轻松完成：

```
$customer->setMobile(preg_replace("/^(\+|00)/", '', $customer->getMobile())); 
```

放置此代码的最佳位置是哪个？

*   在`CustomerController`调用实体管理器并持久化实体之前的内部。这真的是 MVC 模式中的控制器问题吗？
*   使用`SanitizeCustomerSubscriber`和监听`FormEvents:POST_BIND`事件
*   使用`CustomerSanitizer`服务

还有什么想法吗？当然我说的是一般的数据处理，手机号码只是一个例子：要清理的字段可能不止一个。

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-07-28T06:21:14.340

`PRE_BIND`如果您可以在处理提交的数据之前访问它，您应该这样做。

```
$builder->addEventListener(FormEvents::PRE_BIND, function (FormEvent $event) {
    $data = $event->getData();
    if (isset($data['mobile'])) {
        $data['mobile'] = preg_replace("/^(\+|00)/", '', $data['mobile']);
    }
    $event->setData($data);
}); 
```

作为记录，从 Symfony 2.3 开始，这个事件被称为`PRE_SUBMIT`.

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-07-28T07:59:34.840

我会把它放到`Customer` `setMobile()`方法中——越接近数据本身越好。这样，无论使用什么控制器或表单来设置手机号码，都会对手机号码进行消毒。

# c - mtrace 可以用 valgrind 成功运行吗？

> ID：11697570
> 
> 赞同：1
> 
> 时间：2012-07-28T01:46:05.877
> 
> 标签：c, valgrind, mtrace

我有一个执行 5 个 malloc 和 3 个 free 的程序。我在开始时调用 mtrace()，最后调用 muntrace()。如果我正常运行程序，mtrace 将报告丢失的释放。如果我做：

```
valgrind -v --log-file=val.log --leak-check=full --show-reachable=yes my_program 
```

valgrind 将报告丢失的释放，但 mtrace 不会。

所以我猜你不能同时使用它们——valgrind 会覆盖 mtrace 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T03:18:18.737

> 所以我想你不能同时使用它们

正确的。

> valgrind 会覆盖 mtrace 吗？

我不相信 Valgrind 会覆盖`mtrace`，但它*确实*会覆盖`malloc`and `free`，所以`mtrace`根本看不到`malloc`.`free`

# java - Protobuf java code has build errors

> ID：11697572
> 
> 赞同：9
> 
> 时间：2012-07-28T01:46:35.117
> 
> 标签：java, protocol-buffers

If you get build errors like these when using protobufs with java, look below.

```
The method getOptions() from the type Descriptors.Descriptor refers to the missing type MessageOptions

The import com.google.protobuf.DescriptorProtos cannot be resolved

FileDescriptorProto cannot be resolved to a type 
```

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-07-28T01:46:35.117

Ok, the so-called [Java tutorial](https://developers.google.com/protocol-buffers/docs/javatutorial) for protobufs doesn't actually mention how to get the protobuf library into your project. It implies that *all* the code is in your single generated .java file, which would actually be pretty nice, but that isn't case.

Look at the source and you will see references to `com.google.protobuf`, which you can find in the `java/src/main/java` directory in the protobuf source. Copy that into your project however, and it will have build errors.

The solution is in the `README.txt` file. Yeah, maybe I should have read it, but shouldn't all the information you need to get started be in the getting started tutorial? Anyway, do this:

```
# From the protobuf directory.
cd java
protoc --java_out=src/main/java -I../src ../src/google/protobuf/descriptor.proto 
```

And *then* copy the java files into your project.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-02T13:59:37.353

另一种选择是编辑源中包含的 pom.xml。您可以更改它以在验证生命周期编译 proto 文件并将它们写入源目录。

应用此差异或类似（或创建新的构建配置文件）：

```
$ diff -u ~/Downloads/protobuf-2.6.0/java/pom.xml pom.xml
--- /c/Users/MYNAME/Downloads/protobuf-2.6.0/java/pom.xml     Mon Aug 25 20:52:36 2014
+++ pom.xml     Tue Dec  2 13:51:56 2014
@@ -74,12 +74,12 @@
         <executions>
           <execution>
             <id>generate-sources</id>
-            <phase>generate-sources</phase>
+            <phase>validate</phase>
             <configuration>
               <tasks>
                 <mkdir dir="target/generated-sources" />
-                <exec executable="../src/protoc">
-                  <arg value="--java_out=target/generated-sources" />
+                <exec executable="protoc">
+                  <arg value="--java_out=src/main/java" />
                   <arg value="--proto_path=../src" />
                   <arg value="../src/google/protobuf/descriptor.proto" />
                 </exec>
@@ -92,12 +92,12 @@
           </execution>
           <execution>
             <id>generate-test-sources</id>
-            <phase>generate-test-sources</phase>
+            <phase>validate</phase>
             <configuration>
               <tasks>
                 <mkdir dir="target/generated-test-sources" />
-                <exec executable="../src/protoc">
-                  <arg value="--java_out=target/generated-test-sources" />
+                <exec executable="protoc">
+                  <arg value="--java_out=src/test/java" />
                   <arg value="--proto_path=../src" />
                   <arg value="--proto_path=src/test/java" />
                   <arg value="../src/google/protobuf/unittest.proto" /> 
```

现在，您可以运行`mvn validate`，所有的 proto 文件都将编译到您的项目的源代码中 :)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-23T07:42:40.803

[https://github.com/google/protobuf/tree/master/java](https://github.com/google/protobuf/tree/master/java)

安装 - 没有 Maven

如果您不想安装 Maven 来构建库，则可以按照这些说明进行操作。请注意，这些说明跳过了运行单元测试，仅描述了如何安装核心 protobuf 库（没有 util 包）。

1) 编译 C++ 代码，或获取 protoc 的二进制分布。如果您安装二进制发行版，请确保它与此软件包的版本相同。如果有疑问，请运行：

$ protoc --version 如果您在未安装的情况下构建了 C++ 代码，编译器二进制文件应位于 ../src 中。

2）调用protoc构建DescriptorProtos.java：

$ protoc --java_out=core/src/main/java -I../src \ ../src/google/protobuf/descriptor.proto 3) 使用您喜欢的任何方式编译 core/src/main/java 中的代码.

4) 在您喜欢的任何地方安装课程。

# php - Alternative to global variables in PHP

> ID：11697574
> 
> 赞同：2
> 
> 时间：2012-07-28T01:46:37.560
> 
> 标签：php, global-variables, scope, session-variables

Due to slowness, ( and also for coding reasons ), I know that the use of global variables should be avoided as much as possible. It's twice as slow and it decreases the understanding & tracking of the code flow. But sometimes, you do need them in your functions. Sometimes, they do get very handy.

To some degree constants can be used. But as the name says it all, they are constants after all and therefore, they cannot totally substitute the use of global variables.

If you were to not use global variables, and you do need to use them due to the functionality they offer, what options would you refer to? What utilities are out there in PHP so that a variable can be tapped into within functions, outside of functions, basically anywhere and everywhere. Set it somewhere and read/modify it somewhere else.

As an example, I can throw in the use of session variables as an alternative.

You may find it weird but a session variable can easily do the trick. It actually does the job better than a global variable; I can initialize my session variable right within my functions and in no time, all other parts of my code is able to work with that session variable. Whereas with the global variables, they must be introduced/defined outside the functions scope ( to be exact, at the top of the page ) before they may get used by other sections. Sessions won't suffer from this limitation. However, it is obvious, that Sessions are not the right tool for the goal at hand.

The question is what other ways are out there to tackle the matter of "setting a variable somewhere and read/modify it anywhere else"?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T01:52:05.573

如果您确实需要全局变量，您可以拥有一个使用单例模式的全局类：这里是 PHP 中的单例模式示例[http://www.talkphp.com/advanced-php-programming/1304-how -使用-singleton-design-pattern.html](http://www.talkphp.com/advanced-php-programming/1304-how-use-singleton-design-pattern.html)

基本上，单例模式只允许在整个应用程序中共享的类的一个实例，本质上为您提供了一个全局类来存储全局变量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T02:03:06.103

回答您的问题“问题是还有哪些其他方法可以解决“在某处设置变量并在其他任何地方读取/修改它”的问题？”...这仍然没有抓住重点：您正在定义一个全局变量。如果您正在构建一个*需要*从任何地方访问变量的应用程序，那么它的设计模式很可能存在固有缺陷。

话虽这么说，要更正确地做可能需要做的事情，您可以构建一个基于 set/get 函数的“Bag”样式类，例如；某些设置。在您需要访问这些设置的任何地方注入该类。

# php - 在同一台服务器上同时运行 WAMP 和 IIS

> ID：11697575
> 
> 赞同：0
> 
> 时间：2012-07-28T01:47:05.317
> 
> 标签：php, .net, wordpress, iis, wamp

第一个问题在这里！

我一直在疯狂地寻找解决我公司网络问题的方法。

好的，我公司一直在使用 IIS 来托管自己的网站和客户网站。他们用 .NET 编写所有应用程序。

他们想要一个更强大的个人网站，并同意他们想在新的个人网站上使用 Wordpress。

但他们希望能够从一台服务器和一个域名提供两组内容。

我已经成功安装了 WAMP 并让它与 IIS 同时运行。WAMP 当前在端口 81 上运行。

现在这是我的问题：

当人们访问主域时 - 他们看到 WAMP 服务器 - 然后当他们将自己定向到其他内容时 - 他们看到 IIS 服务器时，有什么方法可以让它？

这可能吗？

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T01:57:04.373

是的。这包含了如何设置类似内容的基本思想：

[http://learn.iis.net/page.aspx/659/reverse-proxy-with-url-rewrite-v2-and-application-request-routing/](http://learn.iis.net/page.aspx/659/reverse-proxy-with-url-rewrite-v2-and-application-request-routing/)

显然跳过有关创建网站的部分，因为您已经拥有它们。而不是将其指向端口上的另一个 IIS 站点，只需将适当的规则指向您的 apache 正在运行的端口（81）

尽管您可以在 IIS 上运行 PHP，而不必为此搞砸。

# ruby-on-rails - 即使存储了正确的 ID，belongs_to 也不会关联记录

> ID：11697578
> 
> 赞同：0
> 
> 时间：2012-07-28T01:48:20.663
> 
> 标签：ruby-on-rails, activerecord, one-to-one, has-and-belongs-to-many

创建用户时，将创建一个团队，并将用户设置为该团队的所有者，并设置为该团队的成员。

一个用户可以是多个团队的成员，而团队可以有多个成员。每个用户只能拥有一个团队，一个团队只能拥有一个所有者。

现在我有一些奇怪的行为，我可以弄清楚

```
1.9.3p194 :001 > user = User.first
User Load (0.1ms)  SELECT "users".* FROM "users" LIMIT 1
=> #<User id: 1, email: "test@example.com", encrypted_password: "$2a$10$KhQ7z3Qb6QXdsBA/MmPLuecrbIV4cGEaMGhIepLjuzla...", reset_password_token: nil, reset_password_sent_at: nil, remember_created_at: nil, sign_in_count: 1, current_sign_in_at: "2012-07-28 01:33:31", last_sign_in_at: "2012-07-28 01:33:31", current_sign_in_ip: "127.0.0.1", last_sign_in_ip: "127.0.0.1", created_at: "2012-07-28 01:33:31", updated_at: "2012-07-28 01:33:31"> 
1.9.3p194 :002 > user.teams
Team Load (0.1ms)  SELECT "teams".* FROM "teams" INNER JOIN "teams_users" ON "teams"."id" = "teams_users"."team_id" WHERE "teams_users"."user_id" = 1
=> [#<Team id: 1, name: "username", dept_no: nil, created_at: "2012-07-28 01:33:31", updated_at: "2012-07-28 01:33:31", user_id: 1>] 
1.9.3p194 :003 > user.owned_team
Team Load (0.2ms)  SELECT "teams".* FROM "teams" WHERE "teams"."user_id" = 1 LIMIT 1
=> #<Team id: 1, name: "username", dept_no: nil, created_at: "2012-07-28 01:33:31", updated_at: "2012-07-28 01:33:31", user_id: 1> 
```

到目前为止，一切都按预期工作，但是当我尝试从另一端访问关联时，没有建立连接。

见下文，我提取了与 user.owned_team 和 user team.owner 相同的团队记录，它返回 nil

```
1.9.3p194 :004 > team = Team.first
Team Load (0.1ms)  SELECT "teams".* FROM "teams" LIMIT 1
=> #<Team id: 1, name: "username", dept_no: nil, created_at: "2012-07-28 01:33:31", updated_at: "2012-07-28 01:33:31", user_id: 1> 
1.9.3p194 :005 > team.owner
=> nil 
1.9.3p194 :006 > user.owned_team == team.owner
=> false 
1.9.3p194 :007 > 
```

用户.rb

```
class User < ActiveRecord::Base

  has_and_belongs_to_many :teams
  has_one :owned_team, :class_name => "Team"

  after_create :set_user_on_team

  private

  def set_user_on_team
    self.owned_team = self.teams.create(:name => 'username' ) 
  end
end 
```

团队.rb

```
class Team < ActiveRecord::Base

  attr_accessible :name
  has_and_belongs_to_many :users
  belongs_to :owner, :class_name => "User"

end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T01:57:08.830

我认为您在某处缺少外键声明。

假设您在 team 表中有一个 owner_id 字段：

```
class User < ActiveRecord::Base
  has_one :owned_team, :class_name => "Team", :foreign_key => 'owner_id'
end

class Team < ActiveRecord::Base
  belongs_to :owner, :class_name => "User", :foreign_key => 'owner_id'
end 
```

这样，当您访问两个链接时，rails 知道如何提取数据

# javascript - 用于记录每个选项卡的 http 请求 url 的 firefox 扩展

> ID：11697580
> 
> 赞同：0
> 
> 时间：2012-07-28T01:48:59.230
> 
> 标签：javascript, firefox, firefox-addon

我正在尝试开发一个 firefox 扩展来记录每个浏览器选项卡/窗口的所有资源加载 url。我搜索了几个小时，但找不到将每个拦截的 http 请求与其原始选项卡相关联的方法。这是我到目前为止所拥有的。

```
Components.classes["@mozilla.org/observer-service;1"]
  .getService(Components.interfaces.nsIObserverService)
  .addObserver({
    observe: function(aSubject, aTopic, aData) {
       if ("http-on-modify-request" == aTopic) {
         var url = aSubject
              .QueryInterface(Components.interfaces.nsIHttpChannel)
              .originalURI.spec;
         alert(url);
       }
    }
}, "http-on-modify-request", false); 
```

我可以获取 http 请求的 url，但我不知道有没有办法将它链接到浏览器窗口/选项卡。

我通读了 MDN 的文档，但没有提及。（https://developer.mozilla.org/en/XUL_School/Intercepting_Page_Loads）

有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T19:07:19.067

如果您希望构建您的扩展程序，不仅适用于 Firefox，还适用于 Chrome、IE 和 Safari，只需 1 个（javascript）代码，我建议您使用[Crossrider](http://crossrider.com)。

你可以很容易地实现你正在寻找的东西。您可以使用他们的 onRequest API 监听所有发出的请求：

```
appAPI.onRequest(function(resourceUrl, tabUrl) {
  // Where:
  //   * resourceUrl contains the URL of the requested resource
  //   * tabUrl contains the URL of the tab requesting the resource

  // Block the loading of js scripts
  if (resourceUrl.match(/.*/) {
    // Do what ever you need with the specific resource
    // For example - save it in the extension database using appAPI.db.set()
  }
}); 
```

进入扩展程序的 background.js 并允许您对每个页面/选项卡的每个加载资源执行任何您想要的操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T09:32:11.063

我对[Is it possible to know the target DOMWindow for an HTTPRequest 的](https://stackoverflow.com/a/10719827/785541)回答几乎可以让你到达那里。您将获得与请求关联的窗口，但它可能是选项卡中的一个框架。一旦你拥有它，你就可以获得`window.top`- 这将是浏览器选项卡中的顶部窗口。如果您需要实际的浏览器选项卡元素，可以使用我在[查找与 DOM 窗口关联的选项卡中的](https://stackoverflow.com/a/6489272/785541)答案。

# java - 检查日期列表是否包含特定日期

> ID：11697581
> 
> 赞同：5
> 
> 时间：2012-07-28T01:49:12.333
> 
> 标签：java, date, jodatime

我正在寻找一种更好的方法来检查是否有 a`List`个`java.util.Date`对象（`ArrayList`返回给我）。情况是，我返回了一个`List`日期，我想知道我手头`List`的日期是否在我返回的日期之内。

目前我正在做的是循环列表并使用 JodaTime 比较日期。

注意：在比较日期时只应考虑日期部分（而不是时间部分）。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-28T04:21:07.350

编写自己的[Comparator](http://docs.oracle.com/javase/7/docs/api/java/util/Comparator.html)。您可以使用它来执行`Date`对象的单独比较

```
public class MyDateComparator implements Comparator<Date> {
    protected static final DateFormat DATE_FORMAT = new SimpleDateFormat("dd/MM/yyyy");

    public int compare(Date d1, Date d2) {
        return DATE_FORMAT.format(d1).compareTo(DATE_FORMAT.format(d2));
    }
}

Date myDate = ...
List<Date> listOfDates = ...
Collections.sort(listOfDates);
int index = Collections.binarySearch(listOfDates, myDate, new MyDateComparator());
if (index >= 0) {
  // you found me
} 
```

（在 iPad 上用胖手指打字，摇着 3 个月大的宝宝睡觉，为小错误道歉）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T02:01:12.280

如果两个 java.util.Date 对象解析为相同的毫秒，则它们是 equal()。所以你可以使用 List.contains()：

[http://docs.oracle.com/javase/6/docs/api/java/util/List.html#contains%28java.lang.Object%29](http://docs.oracle.com/javase/6/docs/api/java/util/List.html#contains%28java.lang.Object%29) [http://docs.oracle.com/javase/6/docs /api/java/util/Date.html#equals%28java.lang.Object%29](http://docs.oracle.com/javase/6/docs/api/java/util/Date.html#equals%28java.lang.Object%29)

```
List<Date> dates = ...
Date targetDate = ...
if (dates.contains(targetDate)) { ... } 
```

或者，如果您知道列表已排序，则可以使用 Collections.binarySearch()

[http://docs.oracle.com/javase/6/docs/api/java/util/Collections.html#binarySearch%28java.util.List,%20java.lang.Object%29](http://docs.oracle.com/javase/6/docs/api/java/util/Collections.html#binarySearch%28java.util.List,%20java.lang.Object%29)

# opengl - glLoadIdentity 和 glPushMatrix/glPopMatrix，为什么不直接使用前者呢？

> ID：11697583
> 
> 赞同：5
> 
> 时间：2012-07-28T01:49:51.560
> 
> 标签：opengl, graphics

当对对象应用变换时，我们使用 glPushMatrix/glPopMatrix。但是为什么我们不只使用 glLoadIdentity 呢？

因此

```
 glPushMatrix()
    ..apply tranformations
    ...draw object
    glPopMatrix()
    glPushMatrix()
    ..apply tranformations
    ...draw object
    glPopMatrix() 
```

这就是它应该如何做的对吗？

可以变成

```
 glLoadIdentity()
    ..apply tranformations
    ...draw object
    glLoadIdentity()
    ..apply tranformations
    ...draw object 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-28T01:55:36.740

因为你不能这样做：

```
glPushMatrix()
..apply tranformations
glPushMatrix()
..apply ADDITIONAL transformations
..draw object with combined transforms
glPopMatrix()
...draw object without the additional transforms.
glPopMatrix() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-04-01T20:23:35.060

我找到了一个很好的解释：[https ://www.allegro.cc/forums/thread/595000](https://www.allegro.cc/forums/thread/595000)

> 它们没有相同的效果。
> 
> glLoadIdentity 用单位矩阵替换当前矩阵。
> 
> glPushMatrix 将当前矩阵推入堆栈。然后，您可以使用 glPopMatrix 将顶部矩阵从堆栈中拉出并使其成为当前矩阵。
> 
> **只有在以下情况下才相同**：
> 
> *   您的相机始终固定在 (0, 0, 0) 沿 z 方向看
>     
>     
> *   你所有的模型都是单一的、刚性的形状
>     
>     
> *   您首先使用身份加载了矩阵堆栈
>     
>     
> 
> 或者，如果您自己在 CPU 上进行大量不必要的算术运算，从而使您的代码更加复杂，并且您的应用程序速度降低。

# php - 管理链接和目录

> ID：11697591
> 
> 赞同：0
> 
> 时间：2012-07-28T01:51:14.127
> 
> 标签：php

我最近开始了一个比以往更大的项目，我发现很难管理所有目录的链接（例如包括文件）。

有没有办法我可以定义一个基本路径，然后从那里开始。

所以是这样的：

```
require(BASEPATH.'/folder/file.php'); 
```

代替：

```
require('../../folder/file.php'); 
```

所以基本上是一种在移动文件时链接不会中断的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T01:54:55.170

您始终可以根据[`__DIR__`](http://php.net/manual/en/language.constants.predefined.php)索引文件/前端控制器中的值存储或定义变量：

```
// in index.php
define('BASE_DIR', __DIR__); 
```

在其他文件中，您现在可以像这样引用基目录：

```
// in some_other.php
require(BASE_DIR . '/folder/file.php'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T02:03:40.087

所以你说你已经开始了一个大项目——然后你从一开始就做它，即从当前点开始。

我建议你创建`const.php`包含这个：

```
<?php

$constants = array(

   'DS' => DIRECTORY_SEPARATOR, //shorthand
   'ROOT' => __DIR__,
   'LIBS' => ROOT . '/libs'
);

//and so on - add more

//Define each one now:
foreach ($constants as $const => $val ){
  define($const, $val);
} 
```

您项目的任何文件：

```
<?php

require ('../const.php');

//now constants are available and you can access them:
require ROOT . 'some.php'; //etc etc
require ROOT . 'another.php'; 
```

# c++ - c++ 游戏 exe 停止工作，很多课程。使用 Visual C++ 工作

> ID：11697594
> 
> 赞同：-2
> 
> 时间：2012-07-28T01:51:41.187
> 
> 标签：c++, structure, exe, sfml, code-cleanup

嗨，我为比赛开发游戏已经有几个星期了。（我对编码有点熟悉，但不是很多）。

我正在用 Visual C++ 编写游戏。当我在 Visual c++ 上以发布模式运行它时，它运行正常，但是当我从 .exe 尝试时，会弹出一个窗口并说“ *** *.exe 已停止工作”。我知道错误是什么，但我不知道如何解决它。弹出错误是因为有很多向量，如果我从游戏运行的程序中删除一些调整大小的向量，它可以是任何东西，一堵墙，一个盒子向量，没关系。但是我觉得这很奇怪，因为当我在任务管理器中查看时，游戏只占用了 20,000K 内存。

所以总而言之，如果我从游戏中删除一些向量，游戏 exe 就会运行，如果没有，它只会在 Visual C++ 中运行。我该怎么办？我真的迷路了。

///////////////////////////////////////// ////////////////////////////

好的，如果我只调整四个向量列表的大小，.exe 会运行，但如果我调整大小超过 4 个，exe 会出错，但可视化 c++ 实例仍然运行。

```
class Level
{

public:

    int LevelWidth;
    MapElements::Background Background;

    //OBJETS SUR MAP
    Array<MapElements::Ground> Grounds;
    Array<MapElements::Wall> Walls;
    Array<MapElements::Platform> Platforms;
    Array<MapElements::Box> Boxs;

    //ENNEMIS et JOUEUR
    Array<Gameplay::Droite> Droites;
    Array<Gameplay::Cercle> Cercles;
    Gameplay::Player Player;
}; 
```

这有效：

```
 void Level::InitializeMap(int MaxGround, int MaxWall, int MaxPlatforms, int MaxBox)
 {
     Grounds.Element.resize(MaxGround);
     Walls.Element.resize(MaxWall);
     Platforms.Element.resize(MaxPlatforms);
     Boxs.Element.resize(MaxBox);
 } 
```

这不会：

```
 void Level::InitializeMap(int MaxGround, int MaxWall, int MaxPlatforms, int MaxBox, int      MaxCercles)
{
    Grounds.Element.resize(MaxGround);
    Walls.Element.resize(MaxWall);
    Platforms.Element.resize(MaxPlatforms);
    Boxs.Element.resize(MaxBox);
    Cercles.Element.resize(MaxCercles);
} 
```

数组类：

```
template <typename T> class Array
{
public:
    std::vector<T> Element;
    Array();

};
template <typename T> Array<T>::Array()
{
} 
```

如果我只有 4 个 vector.resize()，则调整大小有效，它可以是任何变量（墙、框等），错误的根源是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T02:23:41.443

您对导致该错误的原因是错误的。在窗户上`*.exe has stopped working`。通常意味着您的应用程序有[分段错误](http://en.wikipedia.org/wiki/Segfault)。

这可能是由任何超出内存边界的读取或写入引起的，这通常意味着您在某处搞砸了`free()`/ `delete`、`malloc()`/`new`或 a `NULL`，但是有更多代码，或者没有进一步的解释，我无法进一步诊断。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T02:16:58.783

当你在 vc 中运行你的游戏时，如果你没有改变它，工作目录默认为项目目录。

当你从 .exe 运行它时，工作目录就是 .exe 所在的目录。

因此，也许您可​​以检查您的游戏是否依赖于直接运行时无法正确定位的内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T23:51:53.593

您从根本上错误地使用了 Vector。您会立即将它们调整到最大可能的大小，而不是让它们相应地调整大小。您可能正在耗尽所有可用内存。

这样做可能会更好：

```
class Level
{

public:

    int LevelWidth;
    MapElements::Background Background;

    //OBJETS SUR MAP
    MapElements::Ground Grounds[MAXGROUNDS];
    MapElements::Wall Walls[MAXWALLS];
    MapElements::Platform Platforms[MAXPLATFORMS];
    MapElements::Box Boxs[MAXBOXES];

    //ENNEMIS et JOUEUR
    Array<Gameplay::Droite> Droites;
    Array<Gameplay::Cercle> Cercles;
    Gameplay::Player Player;
}; 
```

并依靠Level的分配来初始化你的关卡内存。

现在。我不知道 MaxCercles 是什么。但是您需要确保您没有使用太多内存（也就是说，如果它们都是 MAXINTS，您会遇到一些麻烦，具体取决于每个类的大小）。

如果您要使用向量，只需将它们设置为默认的中间尺寸（例如 100 或其他值），然后让它们根据您添加的内容自行调整大小。

# ruby-on-rails - rails - rspec - 为什么这个“validates_inclusion_of :role, :in => %w [one, two, three ] }”不起作用

> ID：11697597
> 
> 赞同：3
> 
> 时间：2012-07-28T01:52:12.850
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, validation, rspec

我收到此方法不存在的错误，但这似乎相当基本，我不确定为什么会收到错误？

```
it { should validate_presence_of :role } # This is OK.

 Failure/Error: 
it { should validate_inclusion_of :role, :in => %w[one two three ] }
 NoMethodError:
   undefined method `validate_inclusion_of' for #<RSpec::Core::ExampleGroup::Nested_1:0x007fad7474f9b8> 
```

对于代码：

```
class User < ActiveRecord::Base
  validates_presence_of :role
  validates_inclusion_of :role, :in => [one, two three]       ] 
```

[http://apidock.com/rails/ActiveModel/Validations/ClassMethods/validates_inclusion_of](http://apidock.com/rails/ActiveModel/Validations/ClassMethods/validates_inclusion_of)

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-28T02:59:15.343

### 这不再相关。ensure_inclusion_of 已弃用，将在未来版本中删除。请参阅使用 validate_inclusion_of 的下一个答案

我不认为 validates_inclusion_of 应该有这样的匹配器。但是，根据 master 在[shoulda-matchers](https://github.com/thoughtbot/shoulda-matchers)项目中可用的内容，我认为您可以这样做：

```
it { should ensure_inclusion_of(:role).in_array([1,2,3]) } 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2015-02-03T18:01:42.783

有**一个**应该匹配器`validate_inclusion_of`。

`ensure_inclusion_of` [已弃用](https://github.com/thoughtbot/shoulda-matchers/blob/master/NEWS.md)，将在下一个主要版本中删除。

你确定你的代码在一个`describe Model do`块内吗？

# php - img、a 和 header 的文件相对路径

> ID：11697601
> 
> 赞同：1
> 
> 时间：2012-07-28T01:53:19.507
> 
> 标签：php, html, .htaccess, dynamic, friendly-url

我有一个可以作为域/类别或域/类别/文章访问的动态网站，它重定向到域/index.php?category/article。

我面临的问题是我想使用文件中的相对路径。我设法为包含 dirname( **FILE** ) 做到了这一点，如

```
ini_set('include_path',  dirname(__FILE__) . '/include'); 
```

这工作正常。根据我将其更改为的目录，它也可以工作

```
ini_set('include_path', dirname(__FILE__) . '/../include'); (extra /../) 
```

但是，如果我尝试对 img src、A href 或 php Header 执行相同的操作，虽然我得到了图像或链接的正确文件路径，但它们根本不起作用。好像我根本没有点击一样，什么都没有发生。单击通过 php 生成的链接：

```
print "<a href='" . dirname(__FILE__)  . strtolower(str_replace(" ", "", $row['pageSection'])) . "/" . strtolower(str_replace("", "-", $row['pageTitle'])) . "' alt=''  >"; 
```

不起作用，即使 html 源代码读取为：

```
 <a href="C:\validpath\htdocs\domain/category/article> 
```

如何创建相对于文件位置的 img、链接（和 php 标头）的路径，而不是 url，并使其工作？

旁注：如果我通过 domain/prettyurl/ 访问我的网站，即使我的 CSS 也会刹车，但如果我通过 domain/prettyurl（没有结束斜杠）访问，则不会，这很奇怪。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T18:21:30.610

让它在本地主机和在线上工作，这是我的设置：

1）你可以自己用 2）给我们新手一个更好的选择

我使用了zoranc上面所说的。例如，为了让 CSS 在 dynamic-pretty-url 页面上工作，我将其设置为：

```
<?php
print "<link href='http://" . $_SERVER['HTTP_HOST'] .'/' . dirname($_SERVER['PHP_SELF']) . "/CSS/main.css' rel='stylesheet' type='text/css' />"; 
```

?>

警告：上面的代码会产生诸如 Domain///CSS 之类的链接。我仍然需要过滤掉多余的斜线，但它甚至适用于 CSS 和其他所有内容（img、a、php 标头）

然后，每次我想这样做时，我都必须这样做：

1.  创建动态链接
2.  创建动态图像
3.  即使是我的标题表单！由于始终包含我的标头，因此当您浏览漂亮的 url 时，您的表单不能有 action='header.php'，因为它会尝试在您当前正在浏览的任何漂亮 url 上找到它（域/类别/article 等）。您必须使用 header='" php 解决方案，我们是讨论/header.php endphp。

    同样，请注意这会产生额外的斜线，您必须以某种方式将其删除。

    通过这种设置，您可以拥有一个可以在您的本地主机和任何 Web 主机上运行的站点，而无需更改代码，但是使用起来有些麻烦且容易出错。如果有人有更好的解决方案，请分享。

    这工作得很好，在我看来，这绝对比每次上传网站时都必须更改代码要好，我想这更容易出错。

    再次感谢佐兰克，真的很有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T02:22:41.430

看起来你正在本地主机上运行你的 php 所以

```
dirname(__FILE__) 
```

正在返回一个目录，即“C:\validation...”

尝试使用

```
 "'http: //' . $_SERVER['HTTP_HOST'] . dirname($_SERVER['PHP_SELF']) . '/include'" 
```

作为您的包含路径

# android - getActivity() 在实现 onSaveInstanceState 时返回 null

> ID：11697603
> 
> 赞同：2
> 
> 时间：2012-07-28T01:53:44.573
> 
> 标签：android, android-activity, orientation, fragment

我想通过实现来处理我的 android 应用程序中的方向`onSaveInstanceState`。我将我需要的所有变量添加到`onSaveInstanceState`方法中的包中，一切正常，我可以在`onCreate`同一个片段的方法中恢复它们。

问题是虽然我可以恢复所有变量，`getActivity()`但具有空值。

我尝试添加`setRetainInstance(true)`，但在这种情况下，我无法从包中恢复保存的变量。

谁能帮我？谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T02:44:18.183

这个解决方案对我有用：[viewpager-and-fragments-whats-the-right-way-to-store-fragments-state](https://stackoverflow.com/questions/7951730/viewpager-and-fragments-whats-the-right-way-to-store-fragments-state)问题是我正在创建片段的新实例，这不是正确的方法。我也不再使用 setRetainInstance(true) –</p>

# ruby - 在 ruby 上管理 setter 和 getter 方法

> ID：11697604
> 
> 赞同：1
> 
> 时间：2012-07-28T01:54:07.650
> 
> 标签：ruby

我正在学习如何以正确的方式在 Ruby 上使用方法。我很想知道这是否是处理设置和吸气剂的常用（和建议）方法。

例如，我有一个根据输入设置值的方法，我想通过简单地调用来在站点的不同部分调用结果，`getMyMethod`而无需再次调用 setter。

```
def setMyMethod(value)
  if value > 10
    result = 'is over 10!'
  else
    result = 'is below 10'
  end
  @methodValue = result
  return @methodValue
end

get getMyMethod
  return @methodValue
end 
```

这是从方法中设置和检索值的正确方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-28T02:28:41.353

红宝石的方式是

```
def instance_var=(value)
  if value > 10
    result = 'is over 10!'
  else
    result = 'is below 10'
  end
  @instance_var = result # no need for return. In ruby the evaluated value of last line is always returned
end

def instance_var
  @instance_var
end 
```

也许你应该阅读这样的内容[http://juixe.com/techknow/index.php/2007/01/22/ruby-class-tutorial/](http://juixe.com/techknow/index.php/2007/01/22/ruby-class-tutorial/)

您也可以轻松避免 5 行 if 语句和一个变量。

```
def instance_var=(value)
  @instance_var = value > 10 ? 'is over 10!' : 'is below 10'
end

def instance_var
  @instance_var
end 
```

# jquery - 当我在网页上的任意位置按 Enter 时，为什么我固定定位的 Overlay 图层会消失？

> ID：11697605
> 
> 赞同：0
> 
> 时间：2012-07-28T01:54:10.450
> 
> 标签：jquery, html

我有一个带有登录按钮的普通页面。单击登录按钮时，我使用 jQuery 调出一个隐藏的覆盖层，其中包含一个登录表单。覆盖层是固定位置的。当我按下回车的那一刻，无论焦点是什么，鼠标光标在哪里，覆盖层都消失了，露出了正常的页面。那么这里发生了什么？它必须做哪个表单默认按钮或什么？但除了覆盖消失外，我的正常页面似乎没有任何变化。

# php - 有什么工具可以在 PHP / MYSQL 中保持数据库结构持续同步？

> ID：11697606
> 
> 赞同：2
> 
> 时间：2012-07-28T01:54:16.853
> 
> 标签：php, mysql, database, database-schema

我有 3 个开发环境 - 开发、登台和生产。(PHP/MYSQL)

我正在寻找一种工具来在每个开发环境中同步我的数据库结构。

我有一个包含当前数据库结构文件的 master_db_structure.sql 文件。

所以我需要发生的是：

如果

我在 dev 中添加一个新表或更新一个表结构（然后将整个 db 结构导出到 master_db_structure.sql）

然后

Staging 会自动应用“CREATE TABLE”或“ALTER TABLE”，因为它会查看其当前结构并将其与 master_db_structure.sql 文件进行比较

* * *

过去我使用 mysqldiff 工具创建数据库“补丁”文件，但没有更好的方法吗？

希望你们中的一个boffins可以提供帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T01:58:53.640

你可能想看看这个工具：[MySQL-PHP-AutoMigrations](https://github.com/Billiam/MySQL-PHP-AutoMigrations)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T01:58:37.367

我使用 MySQL 工作台，它有很多有用的工具，包括模式同步器。

[http://www.mysql.com/products/workbench/](http://www.mysql.com/products/workbench/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-28T02:06:41.143

您似乎正在寻找迁移工具。我使用 Doctrine 的，但那是更大图书馆的一部分。[这](https://bitbucket.org/idler/mmp)看起来可能是你想要的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-29T18:59:08.837

你可以随时查看我之前在项目中使用过的[Redbean](http://redbeanphp.com)，处理起来真的很棒

您所要做的就是编写 php 代码，它会修改您的数据库！

# android-ndk - 使用 Android NDK 对 libssl 函数的未定义引用

> ID：11697607
> 
> 赞同：4
> 
> 时间：2012-07-28T01:54:26.603
> 
> 标签：android-ndk, linker, openssl, linker-errors

我对 Android 非常陌生，通常会编译和链接。我不知道哪些细节对我的问题很重要，所以我会告诉你一切。如果您发现任何奇怪或不正确的地方，请告诉我。

我在 Android-NDK 中构建了 libcrypto.so 和 libssl.so 库。我编写了使用 openssl.so 中的函数的本机代码（而 openssl.so 使用了 libssl.so 中的函数）。代码编译，但是我在链接时收到“未定义的引用”错误：

```
./obj/local/armeabi/objs/pki_send/pki_send.o: In function `main':
/home/android/nativeserver/jni/pki_send.c:27: undefined reference to `RSA_generate_key'
collect2: ld returned 1 exit status
make: *** [obj/local/armeabi/pki_send] Error 1 
```

我在谷歌上搜索，发现一个人和我有同样问题的人，她甚至调用了相同的函数（除了这个人不是为 Android 构建的）：[http](http://ubuntuforums.org/showthread.php?t=1081028) ://ubuntuforums.org/showthread.php?t=1081028 。我将在此处引用她的帖子中与我的问题相关的部分：

> 当我删除一个参数[导致“未定义引用”的函数]时，编译器说参数太少，当我添加一个参数时，编译器说参数太多，所以似乎有“某种”参考正确的功能。也许有一些链接发生错误？

我注意到了同样的行为。她通过使用 -lssl 设置进行编译解决了她的问题，该设置告诉编译器使用 openssl 库。为此，我更改了 Android.mk 文件中的模块：

```
LOCAL_LDLIBS += -ldl 
```

对此：

```
LOCAL_LDLIBS += -lssl -lcrypto -ldl 
```

为了安全起见，我包含了 -lcrypto，因为 libssl 依赖于 libcrypto。现在，当我运行 ndk-build 时，我收到以下错误：

```
/home/android/android-ndk-r8/toolchains/arm-linux-androideabi-4.4.3/prebuilt/linux-x86/bin/../lib/gcc/arm-linux-androideabi/4.4.3/../../../../arm-linux-androideabi/bin/ld: cannot find -lssl
collect2: ld returned 1 exit status
make: *** [obj/local/armeabi/pki_send] Error 1 
```

此错误表明“ld”找不到 libssl.so。我的 jni 目录中有 libcrypto.so 和 libssl.so。理想情况下，我想找到一种方法将 jni 目录添加到“ld”的搜索路径中，但我无法弄清楚。我试图通过将 libssl.so 和 libcrypto.so 添加到以下目录来解决这个问题：/android-ndk-r8/platforms/android-8/arch-arm/usr/lib（我相信“ld”在这里搜索图书馆）。完成此操作后，我再次运行 ndk-build 并收到“未定义引用”错误：

```
./obj/local/armeabi/objs/pki_send/pki_send.o: In function `main':
/home/android/nativeserver/jni/pki_send.c:27: undefined reference to `RSA_generate_key'
collect2: ld returned 1 exit status
make: *** [obj/local/armeabi/pki_send] Error 1 
```

从这里开始，我对如何继续一无所知。

以防万一，这是我的 Android.mk 文件中的代码：

```
LOCAL_PATH := $(call my-dir)
APP_PLATFORM := android-8

include $(CLEAR_VARS)

LOCAL_MODULE    := crypto 
LOCAL_SRC_FILES := libcrypto.so 
LOCAL_EXPORT_C_INCLUDES := $(LOCAL_PATH)/../include/

include $(PREBUILT_SHARED_LIBRARY)

include $(CLEAR_VARS)

LOCAL_MODULE    := ssl 
LOCAL_SRC_FILES := libssl.so 
LOCAL_EXPORT_C_INCLUDES := $(LOCAL_PATH)/../include/

include $(PREBUILT_SHARED_LIBRARY)

include $(CLEAR_VARS)

LOCAL_SRC_FILES := pki_send.c 
LOCAL_MODULE    := pki_send 
LOCAL_SHARED_LIBRARIES := ssl crypto 
LOCAL_LDLIBS += -lssl -lcrypto -ldl

LOCAL_MODULE_TAGS := optional

include $(BUILD_EXECUTABLE) 
```

编辑：我忘了补充一点：当我在 libcrypto.so 的本机代码中使用函数时，代码编译和链接都很好。看来我可以使用 libcrypto.so 中的任何函数。但是，给我带来问题的函数在 libssl.so 中。这可能很重要，也可能不重要。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-28T03:22:11.363

我解决了这个问题。我调用的函数“RSA_generate_key”仅存在于已弃用的 libcrypto.so 版本中。我使用的是使用“RSA_generate_key_ex”的较新版本。我通过在 libcrypto.so 上做一个 readelf 发现了这一点：

```
$ ./arm-linux-androideabi-readelf -all ~/nativeserver/jni/libcrypto.so |grep RSA_generate
   679: 00089239   992 FUNC    GLOBAL DEFAULT    7 RSA_generate_key_ex
 10334: 00089239   992 FUNC    GLOBAL DEFAULT    7 RSA_generate_key_ex 
```

程序仍然编译的原因是因为 RSA_generate_key 在 openssl/rsa.h 的头文件中，即使库没有它。

# android - 使用意图过滤器拦截链接不起作用

> ID：11697612
> 
> 赞同：0
> 
> 时间：2012-07-28T01:55:37.300
> 
> 标签：android, android-intent, intentfilter

我想拦截链接，以便它打开我的应用程序，就像打开 maps.google.com 打开地图应用程序一样。

我已经阅读了 SO 中关于此的其他线程，但我不知道为什么我无法使其正常工作。

我的 AndroidManifest 中有这个

```
<activity android:name="com.my_app.my_app.AppActivity">
    <intent-filter>
        <action android:name="android.intent.action.VIEW" />
        <category android:name="android.intent.category.DEFAULT" />
        <category android:name="android.intent.category.BROWSABLE" />
        <data android:scheme="http"
              android:host="flickr.com" />
        <data android:scheme="http"
              android:host="www.flickr.com" />
    </intent-filter>
</activity> 
```

我用真机进行了测试，使用海豚浏览器。我在地址栏中输入了 www.flickr.com，它没有显示任何选择应用程序的选项。我已经测试海豚打开 maps.google.com 并且我可以选择是否使用地图应用程序打开。所以我认为海豚不是问题。

我也从默认浏览器输入了 flickr。也没有用。

我在这里想念什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T21:24:02.207

您只能在使用 Intent 打开相应的 Activity 时拦截 URL，因为它的执行方式是使用 Intent 过滤器和 Intent 解析。当您在浏览器中键入地址时没有任何意图，只是一个方法调用。如果 dolphin 显示您打开 google 地图，可能它是硬编码到 Dolphin 应用程序中的，但它可能不适用于其他 url 或应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-09T04:04:28.027

您需要添加 android:path、android:pathPrefix 或 android:pathPattern 属性。

```
<data android:scheme="http" android:host="flickr.com" android:pathPrefix="/" />
<data android:scheme="http" android:host="www.flickr.com" android:pathPrefix="/" /> 
```

# javascript - 使用对象的值设置函数变量

> ID：11697613
> 
> 赞同：0
> 
> 时间：2012-07-28T01:56:39.377
> 
> 标签：javascript

通常我会设置一个函数变量，如下所示：

```
var width = null;
var height = null;

if(options) {
    if(options.width) width = options.width;
    if(options.height) height = options.height;
} 
```

有没有办法通过以下方式简化这一点：

```
var width = null;
var height = null;

if(options) {
    for(var val in options) {
        val = options[val];
    }
} 
```

在这个简单的例子中，它似乎不是一个很大的好处，但是在我有大量变量要使用来自单个对象的值进行设置的情况下（以这样的方式说...... ajax 做到了），它会循环对象并以这种方式进行操作要容易得多。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T02:02:02.983

不是直接的。如果你想把东西附加到全局命名空间 ( `window`)，你可以这样写：

```
if (options) {
  for(var val in options) {
    window[val] = options[val];
  }
} 
```

`window`...但除非绝对必要，否则您通常希望避免混乱。一种常用的替代方法是创建一个用于保存默认选项的对象，并在提供新选项时简单地覆盖它们：

```
var defaults = {
  height: 0,
  width: 0
}

if (options) {
  for(var val in options) {
    defaults[val] = options[val];
  }
}

// use values now stored in `defaults`
console.log(defaults.height); 
```

# vb.net - 为什么当我关闭程序并重新加载它时，我所有用户输入的按钮名称都消失了？

> ID：11697614
> 
> 赞同：0
> 
> 时间：2012-07-28T01:56:52.777
> 
> 标签：vb.net, button, user-input

嗨，我再次在最后两个问题之后遇到了另一个问题。[由用户重命名的](https://stackoverflow.com/q/11690108/1557944)按钮并将[按钮的文本输入到文本框中](https://stackoverflow.com/q/11691017/1557944)。

发生的情况是，当您单击按钮时 label4 是管理员时，会出现一个输入框，询问按钮名称，如果 label4 是其他任何内容，则它将按钮的文本添加到不同的框中。

这一切都很好，我遇到的问题是当我关闭程序然后重新打开它时，所有按钮文本已被删除。

所以简而言之，我要问的是如何将它保存到按钮上，这样如果我关闭程序并重新打开它，文本就会保留在所有按钮上。

我的按钮代码是。

```
Dim Button As Button = DirectCast(sender, Button)

If Label4.Text = "Admin" Then
    With DirectCast(sender, Button)
        .Text = InputBox("Button Name", "Button Name", .Text)
    End With
Else
    Me.TransactionBindingSource.AddNew()
    Product_NameTextBox.Text = Button.Text

    Try
        Me.ProductTableAdapter.FillByProductName(Me.Database1DataSet.Product, Product_NameTextBox.Text)
    Catch ex As System.Exception
        System.Windows.Forms.MessageBox.Show(ex.Message)
    End Try

    ProductTextBox.Text = Button.Text
    GroupTextBox.Text = GroupTextBox1.Text
    AmountTextBox.Text = AmountTextBox1.Text
    PriceTextBox.Text = PriceTextBox1.Text
    TimeTextBox.Text = TimeOfDay
    DateTextBox.Text = DateString

    Me.Validate()

    Me.TransactionBindingSource.EndEdit()
    Me.TransactionTableAdapter.Update(Me.Database1DataSet)
    Timer2.Enabled = True
    TransNameLB.Items.Add(Button.Text)
    TransPriceLB.Items.Add(PriceTextBox.Text)

    Dim sum As Double
    For x As Integer = 0 To TransPriceLB.Items.Count - 1
        sum += Val(TransPriceLB.Items.Item(x).ToString)
    Next

    TextBox1.Text = sum.ToString
    QTYDrinksTB.Text = TransNameLB.Items.Count
End If 
```

提前感谢您提供的任何帮助

克雷格

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T02:58:50.363

除了 Mark Hall 所说的（出色的答案！），VB 可以自动为您完成这一切。您必须设置与应用程序设置的绑定。

1.  转到按钮的属性选项卡
2.  展开 (ApplicationSettings) 属性
3.  单击文本区域。将出现一个下拉菜单，选择新建
4.  在弹出的对话框中，给它一个名字并确保范围是用户

现在，应用程序会自动记住您设置的文本，并在应用程序启动时重新加载

![在此处输入图像描述](../Images/8d844af75622eabcb873612890726e1d.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T02:50:09.173

由于您使用的是 Vb.net，因此您可以保留用户设置的方法之一是使用[My.Settings](http://msdn.microsoft.com/en-US/library/saa62613.aspx)对象。这是一个简单的例子，但应该给你的想法。

首先，我通过右键单击项目并转到项目属性设置选项卡，创建了一个与按钮名称同名的设置。

![在此处输入图像描述](../Images/2b7d68b16c758d557acb4ecdcddadc0b.png)

然后我像这样将它保存在按钮单击事件中。

```
Private Sub Button1_Click(sender As System.Object, e As System.EventArgs) Handles Button1.Click
    Dim btn As Button = DirectCast(sender, Button)

    With DirectCast(sender, Button)
        .Text = InputBox("Button Name", "Button Name", .Text)
        My.MySettings.Default.Item(Button1.Name) = .Text
        My.MySettings.Default.Save()
    End With
End Sub 
```

下一步是遍历 Forms 控件集合中的所有控件，以找到将保存的文本放入的按钮。

```
Private Sub Form1_Load(sender As System.Object, e As System.EventArgs) Handles MyBase.Load
    For Each cntrl As Control In Me.Controls
        If TypeOf cntrl Is Button Then
            If Not String.IsNullOrEmpty(My.MySettings.Default.Item(cntrl.Name).ToString) Then 'Check to make sure there is Data there
                cntrl.Text = My.MySettings.Default.Item(cntrl.Name).ToString
            End If
        End If
    Next
End Sub 
```

或者您也可以明确使用按钮名称。

```
 Private Sub Form1_Load(sender As System.Object, e As System.EventArgs) Handles MyBase.Load

    If Not String.IsNullOrEmpty(My.MySettings.Default.Item(Button1.Name).ToString) Then
        Button1.Text = My.MySettings.Default.Item(Button1.Name).ToString
    End If

End Sub 
```

# c++ - Vswprintf 返回 -1

> ID：11697615
> 
> 赞同：1
> 
> 时间：2012-07-28T01:56:54.710
> 
> 标签：c++, ios, c

如果有人有经验，除了可以导致 vswprintf 返回 -1 的空指针之外还有什么？

我的情况是，当 vaarglist 包含具有大端英文字符的 wchar 时，它运行良好。例如 0xa0000000。

但是当它是日语时，例如 0x582d0000，它将返回 -1。

有任何想法吗？？？

谢谢

# bayesian - 贝叶斯扑克：如何找到使用组合学找不到的分布

> ID：11697617
> 
> 赞同：1
> 
> 时间：2012-07-28T01:57:04.913
> 
> 标签：bayesian, sampling, poker, inference

这是我关于 stackoverflow 的第一个问题，也是我第一次实现 Baysian 网络，所以我会提前为我犯的任何新手错误道歉。

我项目的目标是实现一个进行贝叶斯推理的扑克玩家。由 Kevin Korb 领导的澳大利亚莫纳什大学的一个小组在这方面做了一些工作，我用来参考。你可以在这里找到他们的作品：

*   [http://www.scribd.com/doc/55485155/Bayesian-Artificial-Intelligence](http://www.scribd.com/doc/55485155/Bayesian-Artificial-Intelligence)
*   [http://www.csse.monash.edu.au/~annn/poker/UAI99.pdf](http://www.csse.monash.edu.au/~annn/poker/UAI99.pdf)

第一个参考书，作为一本书，更有帮助和详细（参见第 5.5 章和第 11 章的扑克）。我正在使用名为 Leduc Hold'em 的简化版德州扑克开始。

> Leduc Hold'em 是一款两人扑克游戏。Leduc Hold'em 中使用的牌组包含六张牌、两张 J、两张 Q 和两张 K，并且在玩一手牌之前要洗牌。在一手牌开始时，每位玩家向底池支付一个筹码赌注并获得一张私人牌。然后从玩家一开始进行一轮下注。在一轮下注之后，从牌堆中显示一张公共牌，双方玩家都用它来构组自己的手牌。这张牌称为翻牌。翻牌后发生另一轮下注，再次从玩家一开始，然后进行摊牌。在摊牌时，如果任一玩家将他们的私人牌与公共牌配对，他们将赢得底池中的所有筹码。如果没有玩家配对，则拥有较高牌的玩家被宣布为获胜者。
> 
> 每一轮投注都遵循相同的格式。第一个行动的玩家可以选择过牌或下注。下注时，玩家将筹码添加到底池中，并且行动转移给其他玩家。当玩家面临下注时，他们可以选择弃牌、跟注或加注。弃牌时，玩家放弃这手牌，底池中的所有钱都分配给对方玩家。跟注时，玩家将足够的筹码放入底池以匹配所面对的下注，下注回合结束。加注时，玩家必须将比当前所面对的赌注更多的筹码投入底池，并将行动转移给对方玩家。如果第一个玩家最初过牌，则第二个玩家可以过牌以结束下注轮或下注。在 Leduc Hold'em 中，每轮有一次下注和一次加注的限制。下注和加注的大小是固定的。

如果您查看 pg.185，图 5.14 中的第 5.5.2.1 节，则有一个用于扑克的贝叶斯网络图。这与我在项目中使用的基本相同，但假设在 Leduc Hold'em 中没有上牌，则上牌的两个相应节点不适用于它。我能够计算节点对（BPP_Win，BPP_Fin），（BPP_Win，OPP_Fin），（OPP_Fin，BPP_Fin），（OPP_Fin，OPP_Curr）和（BPP_Fin，BPP_Curr）之间的联合概率表，**但我不知道如何计算 (OPP_Curr, OPP_Action) 的联合概率**。据我了解，某种采样技术是必要的。

作为一个后续问题，如果我能够计算这个联合概率，那么我应该能够通过使用 BP 并将联合概率作为因素来计算给定我当前卡的 BPP_win 的边际概率，对吗？

# sql-server - 将 T-SQL 查询带入另一个查询并找到匹配项

> ID：11697619
> 
> 赞同：0
> 
> 时间：2012-07-28T01:57:10.797
> 
> 标签：sql-server

所以我有以下内容：

```
SELECT 
    data, 
    encrypteddata,
    CONVERT(varchar, DecryptByKey(encrypteddata)) AS 'decrypteddata'
FROM table 
```

给定密钥，它将原始数据列、加密数据列和解密数据列输出为临时列。都好。

我一直在尝试做的是得到那个结果，然后再做一个 AS 列，然后`Match`用真假来判断它是否匹配。

我试过了

```
SELECT 
    data, 
    encrypteddata,
    CONVERT(varchar, DecryptByKey(encrypteddata)) AS 'decrypteddata'
    COUNT(distinct(decrypteddata))
FROM table
WHERE COUNT (distinct(decrypteddata)) > 1 
GROUP BY data 
```

这只是给我一个`COUNT`关于语法的错误。

有没有人建议我如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T02:05:05.837

我看到您在此行末尾缺少一个冒号

```
CONVERT(varchar, DecryptByKey(encrypteddata)) AS 'decrypteddata' 
```

另外，我不太明白你想匹配什么，但考虑使用 IF

```
SELECT
IF(CONVERT(varchar, DecryptByKey(encrypteddata))=other_data_field, 'true','false') as Match
.... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T05:46:09.253

试试这个

```
SELECT 
data, 
encrypteddata,
CONVERT(varchar, DecryptByKey(encrypteddata)) AS 'decrypteddata',
COUNT(distinct(decrypteddata))
FROM table
WHERE COUNT (distinct(decrypteddata)) >1 group by data 
```

--Here you have used convert function-In this you have used just varchar without length parameter.So if you actual data is of more than 30 characters it will take only 30 characters and rest will be truncated.So just make sure what would be the length of your actual data.

# macos - 复制像山狮通知中心一样滑动到一侧的屏幕？

> ID：11697621
> 
> 赞同：1
> 
> 时间：2012-07-28T01:57:22.547
> 
> 标签：macos, cocoa, slider, osx-mountain-lion, notificationcenter

基本上我希望整个 OS X 桌面（或者理想情况下除了菜单栏之外的所有东西）向上滑动并在底部显示我自己的视图，这与 Mountain Lion 中的通知中心的工作方式非常相似（只是从底部而不是从右边）。

我一直在环顾四周，但不知道从哪里开始。NSScreen 给了我主屏幕的框架，但没有办法为整个桌面（或任何类似的东西）获得任何类型的 NSWindow。因此，当我的视图变得可见时，桌面本身、扩展坞和任何打开的窗口都会向上滑动。

帮助？:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T02:15:23.153

我能想到的最好的主意是创建一个`NSWindow`桌面大小（减去工具栏），加上可以使用 计算的内容`NSScreen`，如您之前所述。接下来，您可以使用窗口并关闭阴影，将窗口样式设置为`NSBorderlessWindowMask`并正确设置窗口级别。您还必须将 Windows 背景设置为用户桌面壁纸。一种非官方的方法是从`/Users/<current-user>/Library/Preferences/com.apple.desktop.plist`plist 中读取。之后，您可以使用`[[mywindow animator] setFrame:NSMakeFrame(...)]`“滑动”窗口，复制通知中心的外观。即使这可行，您也应该考虑这是否绝对必要。复制功能（而不是完全复制）最终可能会让用户感到困惑，并且通常会破坏部分功能[Apple 人机界面指南](https://developer.apple.com/library/mac/#documentation/userexperience/Conceptual/AppleHIGuidelines/Intro/Intro.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T14:47:20.383

你应该明确地看看：

[http://www.cocoacontrols.com/platforms/ios/controls/cnbackstagecontroller](http://www.cocoacontrols.com/platforms/ios/controls/cnbackstagecontroller)

> 使用 CNBackstageController 构建的应用程序不是显示普通窗口和菜单栏，而是为您提供一个类似于 Finder 的桌面，并且将以流畅的动画显示。常见的用途是将应用程序嵌套为在 Dock 中不可见的状态栏项。

如果桌面仍然可用（不仅仅是屏幕截图）或者它是否已准备好应用商店，我不确定。

# java - Safari 浏览器中的引荐来源网址 - 不可用？

> ID：11697623
> 
> 赞同：1
> 
> 时间：2012-07-28T01:57:57.007
> 
> 标签：java, tomcat, servlets, safari

当访问者访问我网站上的页面时，我一直在尝试检索“引荐来源网址”。

当用户使用 Chrome、IE、Firefox 而不是 Safari 时，它可以工作。

我正在我网站的登录页面上的 servlet 中检索引荐来源网址：*getReferrerURL(httpRequest)。*

我非常困惑为什么只有 Safari 不玩球 wrt 推荐人 URL - 谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T12:30:53.803

浏览器可以本地或通过插件配置为禁用甚至更改`referer`请求标头。从服务器端开始，您完全无法控制这一点。标`referer`头最多只能用于日志记录和统计，而不是执行业务逻辑。`referer`如果您想让它独立于浏览器配置工作，那么您认为通过检查标题来解决的任何功能要求都应该以不同的方式解决。

# wcf - WCF Rest 服务和身份验证方案

> ID：11697625
> 
> 赞同：0
> 
> 时间：2012-07-28T01:58:25.910
> 
> 标签：wcf, rest

我已经能够为一个集成项目创建一个很好的 WCF 服务，它可以以纯 xml、json 和soap 形式返回结果。在我开始实施安全性之前，这非常有效。使用 WebHttpBindings 时，wcf 服务中内置的 ws 安全功能被绕过，该功能适用​​于：

```
<webHttp defaultOutgoingResponseFormat="Json"/> 
```

和

```
[OperationContract()]
[WebGet(UriTemplate = "GetSomething/{someID}/{anotherID}?somethingElse={somethingElse}")]
SomeResponse GetSomething(string someID,string anotherID, DateTime somethingElse) 
```

我喜欢玩我的第一个 restful api，但是我需要完成一个项目，并且要求包含一个安全的身份验证策略。我不需要将结果作为 json 返回，也不一定是休息服务，但这激起了我的好奇心。

...有关身份验证策略/WCF REST 服务的任何好主意？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T03:58:40.520

您可能需要 clientCredentialType="Certificate" 或 "Windows"

```
<webHttpBinding>
  <binding name ="RestSSL">
    <security mode ="Transport">
      <transport clientCredentialType= "Windows" />
    </security>
  </binding>                
</webHttpBinding> 
```

如果您使用证书，您还需要将 serviceBehavior 的 certificateValidationMode 设置为 PeerTrust、ChainTrust 等。[http://msdn.microsoft.com/en-us/library/system.servicemodel.security.x509certificatevalidationmode.aspx](http://msdn.microsoft.com/en-us/library/system.servicemodel.security.x509certificatevalidationmode.aspx)

```
<behaviors>
  <serviceBehaviors>
    <behavior>
      <dataContractSerializer maxItemsInObjectGraph="1048576"/>
      <serviceMetadata httpGetEnabled="False" httpsGetEnabled="True"/>
      <serviceDebug includeExceptionDetailInFaults="False"/>
      <serviceCredentials>
        <!-- Please note: the app pool will need an identity with access to this cert-->
        <serviceCertificate findValue="myCertSubject.myDomain.com"
                            storeLocation="LocalMachine"
                            storeName="My"
                            x509FindType="FindBySubjectName"/>
        <clientCertificate>
          <authentication certificateValidationMode="PeerTrust"/>
        </clientCertificate>
      </serviceCredentials>
    </behavior>
  </serviceBehaviors> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T06:54:26.340

通常，大多数人在保护宁静的 wcf 服务时倾向于使用 OAuth。OAuth 是一种开放协议，允许通过桌面和 Web 应用程序以简单和标准的方法进行安全 API 身份验证。它允许客户端提供一个消费者密钥，用于标识必须为每个服务调用发送的客户端。该信息作为 HTTP 授权标头的一部分发送。[从这里](https://oauth.googlecode.com/svn/code/csharp/OAuthBase.cs)下载 OAuth 类

有关实现细节，请查看此[代码项目文章](http://www.codeproject.com/Tips/372422/Secure-WCF-RESTful-service-using-OAUTH)

# facebook - 新闻提要中未显示在墙上的提要对话框帖子

> ID：11697628
> 
> 赞同：7
> 
> 时间：2012-07-28T01:59:27.553
> 
> 标签：facebook

我正在使用提要对话框`http://developers.facebook.com/docs/reference/dialogs/feed/`，当发布帖子时，它会显示在目标墙上，但不会显示在新闻提要上。此外，如果有人随后浏览该墙发布了“赞”或评论，则它不会出现在任何新闻源或海报的墙上。

这是要发布的 URL 的示例`http://www.facebook.com/dialog/feed?app_id=417204058317545&link=http://www.kilcooleac.com&to=kilcooleac&picture=http://www.kilcooleac.com/images/fb3.jpg&name=Kilcoole%20AC&caption=Kilcoole%20ac& description=Fionnuala%20Britton%20running%2010k%20in%20the%20Olympics%20for%20Ireland%209:25pm%20Friday%203rd%20August&redirect_uri=http://www.facebook.com/kilcooleac`

我在 SO 上搜索并找到了两个类似的帖子，但没有解决方案。谷歌搜索提出了一个类似的错误报告`http://developers.facebook.com/bugs/405986669448307`

我在 Facebook 上发布了一个错误`https://developers.facebook.com/bugs/507380435954622`

感激地收到所有帮助/建议。

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T15:46:25.983

帖子不会立即出现在用户的新闻提要中，但会立即出现在时间线中。这是因为 Facebook 有一种算法，只能在新闻提要中显示某些内容。尝试将您的新闻源设置更改为最新，您可能会看到该帖子出现。大多数用户的默认设置为最受欢迎集。

# mongodb - 使用 mongo ObjectId 作为用户 ID 是不好的做法吗？

> ID：11697631
> 
> 赞同：9
> 
> 时间：2012-07-28T02:00:28.987
> 
> 标签：mongodb

看到这个值是唯一的并且对 mongo 数据库中的所有用户都存在，在 Web 应用程序中使用它作为用户标识符有什么特别的警告吗？

我可能正在考虑的特定问题包括将来是否需要转移用户。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-28T02:59:35.380

> ...在 Web 应用程序中使用它作为用户标识符有什么特别的注意事项吗？

我见过的几个：

1.  这对 URL 来说不是很好。Twitter 给了我一个像[http://twitter.com/gatesvp](http://twitter.com/gatesvp)这样的 URL ，使用 ObjectId 你会得到一个像[http://example.com/ab12ab12ab12ab12ab12ab12](http://example.com/ab12ab12ab12ab12ab12ab12)这样的 URL 。
2.  ObjectId 分片非常差。它不是真正随机的，它有点顺序，所以新用户将聚集在分片上而不是随机分布。
3.  您经常需要另一个唯一标识符。大多数网站都要求唯一的电子邮件或唯一的用户名。是的，您可以在“用户名”上创建一个唯一索引，但是您有两个唯一索引，一个很有用，一个只是一个随机数。
4.  您将在任何地方引用它。您的用户数据通常会分布在多个集合中，所有集合都带有指向“userId”的指针。拥有 ObjectIds（或 Guids）意味着您不断地将这些大 ID 复制粘贴到任何地方并将它们存储在数据库中。

> 我可能正在考虑的特定问题包括将来是否需要转移用户。

转移到哪里？一旦您开始在 MongoDB 中存储用户的数据，ID 将是您转移到另一个数据库的最少问题。所有现代数据库都可以处理某种形式的字符串或二进制作为主键 ID，因此您的传输应该可以正常工作。但大部分复杂性与 ID 无关。

# python - Python sys.modules 包含一个尚未导入的模块

> ID：11697633
> 
> 赞同：8
> 
> 时间：2012-07-28T02:00:38.777
> 
> 标签：python, python-2.7, python-2.x

我试图了解加载的模块与导入的模块之间的区别（如果有的话）。

我正在使用 Python 2.7.3，并且只是从命令行运行 Python。

如果我执行：

```
import sys
sys.modules 
```

例如，我得到一个列表，其中包括`os`。文档说这`sys.modules`是“加载”模块的列表。但是，如果我尝试运行类似的东西`os.environ`，我会得到一个 NameError ，它告诉我`os`没有定义。但是，如果我然后运行`import os`，这可以解决问题。谁能解释为什么在我实际导入模块之前`os`存在？`sys.modules`

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-28T03:14:22.760

导入和加载的模块之间的区别在于放入当前模块的命名空间中的内容。一个模块只会被加载一次（在普通情况下），但可以从许多不同的地方多次导入。如果尚未在给定名称空间中导入已加载的模块，则它可能无法在给定名称空间中访问。例如，您可以使用`from module import name`语法加载模块而不用其名称导入它（您将能够访问指定的名称，但不能访问模块本身）。

您`os`在字典中看到该模块是`sys.modules`因为它由 python 解释器在内部使用，因此它总是在启动时加载。但是，您不能使用名称“os”访问它，因为它不会自动导入您的命名空间。

但是，您可以通过几种方式绕过正常的导入机制。例如，试试这个：

```
import sys
os = sys.modules["os"] 
```

您现在可以像访问该`os`模块一样访问该模块`import os`。

`import`这是因为当您请求已加载的模块时，该代码正是语句所做的。但是，如果您使用尚未加载的模块尝试上面的代码，它将无法工作（您将从`sys.modules`字典中得到一个关键错误）。`import`除了将新模块添加到当前命名空间之外，该语句还加载新模块。虽然您可以手动加载模块并围绕常规导入系统进一步工作，但很少有这样做的充分理由。

# python - 让 Sphinx 替换文档字符串文本

> ID：11697634
> 
> 赞同：6
> 
> 时间：2012-07-28T02:00:50.167
> 
> 标签：python, python-sphinx, substitution, docstring

我在 Sphinx 中记录类似于这样的代码：

```
class ParentClass(object):

    def __init__(self):
        pass

    def generic_fun(self):
        """Call this function using /run/ParentClass/generic_fun()"""
        do_stuff()

class ChildClass(ParentClass):

    def specific_fun(self):
        """Call this function using /run/ChildClass/specific_fun()"""
        do_other_stuff() 
```

我`:inherited-members`将`ChildClass`.

有没有办法我可以在像 <class_name> 这样的文档字符串中放入 Sphinx 将替换为它正在记录的实际类的东西？

我想让代码看起来像：

```
class ParentClass(object):

    def __init__(self):
        pass

    def generic_fun(self):
        """Call this function using /run/<class_name>/generic_fun()"""
        do_stuff() 
```

因此，在 ChildClass 部分，Sphinx 文档将显示“(...) using /run/ChildClass/generic_fun()(...)”，而 ParentClass 部分将显示“(...) using /run/ParentClass/ generic_fun()(...)”？

理想情况下，我希望将文档放在同一页面上，因此不同部分的替换字符串会有所不同。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-31T18:19:29.730

我在看别的东西的同时想出了一种方法。

在打印消息之前，autodoc 会调用一些函数。我将此代码添加到我的 conf.py 文件中：

```
def get_class_name(full_module_name):
    """
    Pull out the class name from the full_module_name
    """
    #split the full_module_name by "."'s
    return full_module_name.split('.')[-1]

def process_docstring(app, what, name, obj, options, lines):
    classname = get_class_name(name)

    # loop through each line in the docstring and replace |class| with
    # the classname
    for i in xrange(len(lines)):
        lines[i] = lines[i].replace('|class|', classname)

def setup(app):
    app.connect('autodoc-process-docstring', process_docstring) 
```

我想使用 | 令牌，但它们保留用于全局替换。我通过将以下行放在我的第一个文件中解决了这个问题（因此代码用 |class| 替换了 |class|）：

```
.. |class| replace:: `|class|` 
```

# javascript - Javascript连接元素，有问题

> ID：11697640
> 
> 赞同：0
> 
> 时间：2012-07-28T02:02:36.203
> 
> 标签：javascript

我浪费了 4 个小时的搜索和尝试，但没有运气。

```
if ((navigator.plugins) && (navigator.plugins.length)) {
    for (var xx = 0, l = navigator.plugins.length; xx < l; xx++) {    
        var tn = navigator.plugins[xx].name;    
        if (tn.indexOf("Java") != -1) {
            document.write("Found ");
        } 
        else {
            document.write("Nothing ");
        }    
    }
} 
```

这个脚本不是只写“Found”或“Nothing”，而是写了以下内容：

```
NothingNothingFoundNothing 
```

（顺便说一句，有4个插件）：

我该如何解决这个问题，以便我只收到一个答案？我不想要其他方法来查找是否安装了 Java，只是上面的方法但可以工作。

**编辑：** 谢谢你们，现在它正在工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T02:06:02.347

```
if ((navigator.plugins) && (navigator.plugins.length)) { 
    var found = false;
    for (var xx = 0, l = navigator.plugins.length; xx < l; xx++) { 

        var tn = navigator.plugins[xx].name; 

        if (tn.indexOf("Java(TM)") { 
           found = true;
        } 

    } 
    if(found) { 
        document.write("Java "); 
    } else { 
        document.write("Nothing "); 
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T02:13:43.107

你在循环内打印'Java'和'Nothing'，所以当它找到java时它会打印java，当它没有找到java时，它什么也不打印。试试这个：

```
var javafound = false;
if ((navigator.plugins) && (navigator.plugins.length)) {
  for (var xx = 0, l = navigator.plugins.length; xx < l; xx++) {
    var tn = navigator.plugins[xx].name;

    if (tn.indexOf("Java(TM)") {
      javafound = true;
    } else {
      javafound = false;
    }

  }
}

if (javafound) {
  document.write("Java ");
} else {
  document.write("Nothing ");
} 
```

# python - 使用 plt.text 在图中打印计算值

> ID：11697641
> 
> 赞同：3
> 
> 时间：2012-07-28T02:02:39.810
> 
> 标签：python, plot, matplotlib

嗨有没有办法将脚本计算的值直接打印到正在制作的图中？

例如，假设我有一个读入的数据文件。然后我想计算条目的总数、条目的总和、平均值和标准偏差。然后如何将这些值直接打印到我绘制的直方图上？

我在这里查看[http://matplotlib.sourceforge.net/api/pyplot_api.html#matplotlib.pyplot.text](http://matplotlib.sourceforge.net/api/pyplot_api.html#matplotlib.pyplot.text)，但它不是很有帮助。提前致谢

例子

```
file = 'myfile.txt'
d = np.loadtxt(file)
C = d[:,3]

S = sum(C))   
avg = np.mean(C)
sigma = np.std(C)
N = len(C) 
```

我试过了，但没有用

```
n, nbins, patches = plt.hist(C, 20)
plt.title("My Histogram")
plt.text(0,0, 'Sum of vales ='S  '\n' 'Total number of entries = ' N  
         '\n' 'Avg= 'avg   '\n'   'Standard Deviation = ' sigma)
ply.show() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T03:41:15.603

我想你忘记打电话`show()`后`plot(...)`

### 更新

我在评论中与 OP*聊天。*事实证明，问题是`syntax error`。他的原始代码

```
plt.text(0,0, 'Sum of vales ='S  '\n' 'Total number of entries = ' N '\n' 'Avg= 'avg   '\n'   'Standard Deviation = ' sigma) 
```

他尝试以这种方式连接字符串`'some string' variable 'another string'`。他问我为什么`'some string' ' another string'`可以，因为 Python 会自动将相邻的字符串连接成一个字符串。在这种情况下，他得到`'some string another string'`，这是一个有效的 python 语句。

# php - 通过链接的 PHP 变量

> ID：11697645
> 
> 赞同：-5
> 
> 时间：2012-07-28T02:03:38.670
> 
> 标签：php, url, hyperlink

我得到了那些名为：客户端、类型和信息的 php 文件。

想象一个像facebook这样的网站。

你有你的： www.site.web/profile?=232 ，然后你点击一个相册，现在你有 www.site.web/profile?=232&album=10 ，所以你点击你有 www.site.web/ 的照片profile.php?=232&相册=10&照片=1。

我想了解你他们做这个..保留那个“profile.php”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T02:26:23.817

我认为您正在寻找的是使用隐藏输入来保持您的变量在页面之间传递。

在表单中使用这样的东西：

```
<form method='get'>
    <input type='hidden' name='client' value='1'>
    // Your other inputs
</form> 
```

这样，当您获得一个输入时，您可以使用一些简单的 PHP 代码将其从一个页面传递到另一个页面，以便从 URL 中获取它并根据需要再次显示它。

编辑：（进一步解释）

当您通过 URL 从一个页面传递数据到另一个页面时，您可以使用一些简单的 PHP 代码来查看是否存在某些东西以进一步传递它 - 如下所示：

```
<?php //page1.php

if(isset($_GET['user']))
{
    $user=htmlspecialchars($_GET['user']);
}

if(isset($_GET['photo']))
{
    $photo=htmlspecialchars($_GET['photo']);
}

// Check for anything else you want as needed.

?> 
```

然后，在实际制作链接时，您可以执行以下操作：

```
<?php

    $baseAddress="<a href='thePageIwant.php?thisVar=3";
    if(isset($user))
    {
        $baseAddress.="&user=".$user;
    }

    if(isset($photo))
    {
        $baseAddress.="&photo=".$photo;
    }
    // Add any other variables as needed

    $baseAddress.="'>
?> 
```

在页面的 HTML 输出部分，您可以使用以下命令：

```
<p>Some text and then a link <?php echo $baseAddress;?>Your Link Text</a></p> 
```

并且您的链接将与通过 URL 传递的所有其他变量一起出现。在这种情况下，如果用户被传递到 ID 为 4 的页面，而照片被传递到 ID 为 6 的页面，则 HTML 输出将是：

```
<p>Some text and then a link <a href='thePageIwant.php?thisVar=3&user=4&photo=6'>Your Link Text</a></p> 
```

如果仅在 URL 中传递了用户，并且没有`photo=6`输出，则如下所示：

```
<p>Some text and then a link <a href='thePageIwant.php?thisVar=3&user=4'>Your Link Text</a></p> 
```

# android - 为 Google 的 Project Glass 编写代码，学习 Google Android for mobile 是否可行？

> ID：11697648
> 
> 赞同：9
> 
> 时间：2012-07-28T02:03:58.887
> 
> 标签：android, google-glass, google-mirror-api, google-gdk

我对 Project Glass 带来的可能性感到兴奋。根据我在纽约时报上读到的一篇文章，他们说它（Project Glass）将基于 Android 软件——

> 这款眼镜将使用与 Android 智能手机和平板电脑相同的 Android 软件。与智能手机和平板电脑一样，这款眼镜将配备 GPS 和运动传感器。它们还将包含一个摄像头和音频输入和输出。
> 
> 资料来源： [http ://www.nytimes.com/2012/02/23/technology/google-glasses-will-be-powered-by-android.html?_r=2](http://www.nytimes.com/2012/02/23/technology/google-glasses-will-be-powered-by-android.html?_r=2)

我是一名专业的前端/后端 Web 开发人员。我在大学学习了 C++ 和 Java，并且实际上保留了这些知识 :)。我已经掌握了更高级的编程概念，所以让我们跳过基础知识。

在 Android 手机平台上获得编码经验会更好地为我在项目玻璃上编码做好准备吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-22T20:15:48.637

Google Glass 有两种开发方式。有允许为平台创建 Web 应用程序的[Mirror API 。](https://developers.google.com/glass/develop/index)除此之外，最近还发布了一个[基于 Android 的](https://developers.google.com/glass/develop/gdk/)用于构建原生应用程序的 SDK。

**Mirror API**是一个 RESTful API，它的开发模型与我们从 Android 甚至传统 Web 应用程序中所知道的非常不同。Web 应用程序是厚客户端，您可以在其上（在浏览器中）运行一些代码。借助 Mirror API，Glass 设备将您的应用程序呈现为云中的 Web 服务，您可以通过 Internet 发送查询来控制它。该控制仅限于在用户时间轴中插入交互式卡片并对用户与它们的交互做出反应。每次交互都涉及从设备到您的服务器并返回的往返。这在某种程度上决定了 Glass 可以实现什么样的应用。例如，您似乎需要始终在线才能使应用程序正常工作。

它也有一些好处。最重要的是，它允许您用任何可以处理 HTTP 协议的语言编写应用程序，无论是 Java、Python，实际上几乎任何东西，甚至像 Haskell。缺点是应用程序不会直接在 Glass 设备上运行，而是在您或 Google 提供的计算机上运行（想想 App Engine）。

**使用稍后发布的 GDK**，您可以开发原生 Android 应用 APK 并在 Glass Device 上运行。我没有密切关注这一点，但我知道自 2013 年春末以来这样做或多或少是可能的，但当时没有最终用户分发机制，因此您必须启用 USB 调试并使用调试工具。这样做不需要 root 访问权限。

使用 SDK，您可以访问设备上的所有硬件传感器（摄像头、加速度计），并且可以通过这种方式为您的用户创建更多交互体验。不利的是，此类应用程序可能是电池密集型的，用户可能会对它产生怀疑。

**但要回答您的问题**，一般意义上的 Android 设计经验肯定会有所帮助。如果您考虑一下，Android 设备实际上就是可穿戴计算机。眼镜的外形将其带到了一个全新的水平（您不必把手伸到口袋里，而是已经准备好在您眼前使用的眼镜），但仍然有相似之处。

在 Android 中，与在 Glass 中一样，您的目标是为用户提供对信息、通信或娱乐的访问，同时考虑到平台的限制，特别是有限的电池寿命。

将拥有 Glass 的人很可能是 Android 用户，因此另一个论点可能是，您可以在制作 Glass 应用程序时建立在熟悉的 Android 体验之上。此外，您可以在 Glass 和 Android 上使用您的应用程序来定位他们，并在访问您的内容时提供一些统一的体验。也许您甚至想使用手机上的触摸屏来控制 Glass 应用程序的某些方面。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-16T01:05:44.527

准备在 Glass 上进行开发的最佳方式是阅读[Google Mirror API 文档](https://developers.google.com/glass/)。您会在这些文档中找到示例代码和许多其他好东西。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-28T02:37:33.103

就像你引用的文本中所说的那样，答案是肯定的。

硬件差异和/或其他差异可能使其具有针对特定设备功能的特定 API，但针对 Android 移动设备的编程很可能会帮助您做好准备。

即使人们认为眼镜的某些功能可能需要特定于它的 android 核心 API，但事实是，API 级别之间的 Android 哲学始终是一种接近不同设备的哲学。Android 4.0 现在可以在平板电脑和智能手机上运行，​​而以前，平板电脑用于运行 Android 3.0，而手机将运行 1.x 到 2.x 的版本。因此，最有可能发生的情况是，眼镜将以不同的 API 级别运行核心 Android，起初可能会更加不同，但很可能会收敛到能够在所有设备上运行的统一版本。

无论该版本与其他版本有多大不同，很可能存在共同点，因此为今天的 Android 编程将始终是一个好处，并为您提供在眼镜推出时使用各自的 API 时的杠杆作用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-27T05:03:53.107

它使用 RESTFul ...api，因此您可以使用您喜欢的任何语言。这就是谷歌很酷的原因。如果你真的想熟悉它，你应该学习使用其他谷歌服务而不是安卓。RESTful 服务与语言无关。

# mysql - MYSQL 多个 WHERE IN 导致 LIKE 被忽略（？）

> ID：11697653
> 
> 赞同：2
> 
> 时间：2012-07-28T02:05:11.070
> 
> 标签：mysql, sql

我有一个不起作用的查询。我已经通过使用单个 IN 语句解决了这个问题（我用来构建查询的库导致了这种情况的发生），但我仍然很好奇*为什么*会发生这种情况。

查询如下：

```
SELECT * FROM (`table`) 
WHERE     `field` = 'false' 
      AND `something` LIKE '%string%' 
      AND `status_id` IN ('1') 
      OR `status_id` IN ('2') 
      OR `status_id` IN ('3') 
```

对我的查询是有道理的：从表中选择字段 = false 并且类似于字符串且状态 ID 为 1 或状态 ID 为 2 或状态 ID 为 3 的所有内容

当有多个 IN 语句时，查询的 LIKE 部分将被完全忽略。

任何想法为什么多个 IN 语句会导致 LIKE 被忽略？我不知道为什么：重新安排查询没有影响（将 LIKE 移到末尾而不是开头）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-28T02:12:12.283

优先级？您不应该使用括号来区分 AND 和 OR 吗？`status_id`如果为真，IN ('x') 将导致表达式的其余部分被忽略。

```
SELECT * FROM (`table`) 
WHERE     `field` = 'false' 
      AND `something` LIKE '%string%' 
      AND (`status_id` IN ('1') 
            OR `status_id` IN ('2') 
            OR `status_id` IN ('3') 
      ) 
```

这与

```
SELECT * FROM (`table`) 
WHERE     `field` = 'false' 
      AND `something` LIKE '%string%' 
      AND `status_id` IN ('1', '2', '3') 
```

看看会发生什么，自己尝试一下。

```
SELECT * FROM (`table`) 
WHERE     `field` = 'false' 
      AND `something` LIKE '%string%' 
      AND `status_id` IN ('1') 
      OR 1=1 
```

问问自己这个查询应该返回什么

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T02:21:23.143

在包括 MySQL 在内的大多数语言中，`and`运算符的绑定比`or`. 因此，您的代码意味着

```
WHERE ( field = 'false' AND something LIKE '%string%' AND status_id IN ('1') )
OR status_id IN ('2') 
OR status_id IN ('3') 
```

`IN`解决方法显然是在三个条件周围使用括号：

```
WHERE field = 'false'
AND something LIKE '%string%'
AND ( status_id IN ('1') OR status_id IN ('2')  OR status_id IN ('3') ) 
```

# c++ - Xcode 4.3 在 /usr/include 中找不到头文件

> ID：11697657
> 
> 赞同：1
> 
> 时间：2012-07-28T02:06:03.833
> 
> 标签：c++, xcode

出于某种原因，Xcode 说它找不到位于 /usr/include 的头文件

作为测试，我只是将包含放在 hello world 程序的顶部。我可以在终端中用clang很好地编译它，但在Xcode中它仍然说它找不到头文件。

我尝试将 /usr/include 添加到构建设置中的“标题搜索路径”中，但仍然没有找到它。

我不确定在这里做什么。看起来 Xcode 应该首先自动在这个目录中查找。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T02:13:43.490

通常在 Xcode 中，您针对特定的 SDK 进行构建。这作为`-isysroot`参数传递，并作为系统包含的前缀。因此`/usr/include`，您无需查看 in ，而是查看如下路径：

```
/Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.8.sdk/usr/include/ 
```

这适用于默认 Xcode 下的 10.8 SDK。您可以使用`xcode-select --print-path`.

# tomcat - Solr4.0 with Tomcat 7 安装错误

> ID：11697658
> 
> 赞同：1
> 
> 时间：2012-07-28T02:06:08.183
> 
> 标签：tomcat, solr

尝试在 tomcat 上安装 Solr4.0 alpha 后，我永远无法进入管理 gui，因为我收到以下错误消息：

```
This interface requires that you activate the admin request handlers, add the following configuration to your solrconfig.xml:
<!-- Admin Handlers - This will register all the standard admin RequestHandlers. -->
<requestHandler name="/admin/" class="solr.admin.AdminHandlers" /> 
```

甚至在将它们添加到 solrconfig.xml 之后（它们实际上已经存在），管理 gui 仍然不会加载。我已经看到一些关于 apache 的错误报告，但没有一个能解决问题。有没有人有办法解决吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T15:15:46.350

我也收到了这个错误。在查看 catalina 日志时，我注意到：

引起：java.lang.NumberFormatException：对于输入字符串：“MA147LL/A”

显然，在 solr4 alpha 中，当您的唯一键字段被定义为“长”类型字段时，会报告此错误。我将此字段更改为字符串，它解决了我的错误。可能和你的不一样，但值得一试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T20:42:11.910

这可能是 solr 管理控制台给出的一个相当模糊的错误，说 ... Solr 配置有问题。你最好的办法是去你的tomcat日志（可能是catalina文件）看看。这可能会让您对正在发生的事情有所了解。

# delphi - 对 Firemonkey StringGrid 进行排序的示例

> ID：11697659
> 
> 赞同：5
> 
> 时间：2012-07-28T02:06:39.847
> 
> 标签：delphi, sorting, firemonkey, tstringgrid

我对 Firemonkey Stringgrid 进行排序的基本尝试，因为找不到任何其他示例。我欢迎任何关于最好地实现这一目标的优化或其他建议。我的代码基本上获得了选择要排序的列，并使用该排序顺序完成其他列：

```
procedure TfrmMain.StringGridSort(StrGrid: TStringGrid; SortColumn: Integer);
var
  col, row, rowx: Integer;
  MySortCol, MyListCols: TStringList;
begin
  MySortCol := TStringList.Create;
  MyListCols := TStringList.Create;
  try
    MySortCol.Sort;
    MyListCols.Sorted := False;
    StrGrid.BeginUpdate;
    try
      for row := 0 to StrGrid.RowCount - 1 do
        MySortCol.AddObject(StrGrid.Cells[SortColumn, row], TObject(row));
      MySortCol.Sorted := True;
      for row := 0 to StrGrid.RowCount - 1 do
        StrGrid.Cells[SortColumn, row] := MySortCol[row];

      for col := 0 to StrGrid.ColumnCount - 1 do
        if col <> SortColumn then
        begin
          MyListCols.Clear;
          for row := 0 to StrGrid.RowCount - 1 do
            MyListCols.Add(StrGrid.Cells[col, row]);

          for rowx := 0 to StrGrid.RowCount - 1 do
            StrGrid.Cells[col, rowx] :=
              MyListCols[Integer(MySortCol.Objects[rowx])];
        end;
    finally
      StrGrid.EndUpdate;
    end;
  finally
    MySortCol.Free;
    MyListCols.Free;
  end;
end; 
```

提前感谢保罗

# cocoa - 山狮中的 Twitter.framework？

> ID：11697661
> 
> 赞同：1
> 
> 时间：2012-07-28T02:06:55.623
> 
> 标签：cocoa, twitter, osx-mountain-lion, twrequest

我正在使用 Mountain Lion 中的新内容，因此我启动了一个新的 Mountain Lion Cocoa 应用程序 - 我让 ACAccount Stuff 立即工作，但是当我去包含 Twitter.framework 文件时，它不存在！

我见过的所有苹果文档都提到了它，我正在运行 XCode 4.4 和 XCode 4.5-2，它们似乎都没有将它显示为可用的框架。

我错过了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T02:13:13.267

哎呀，做了更多的挖掘，看起来类似 TWRequest 的方法被包装在 SLRequest 中，SLRequest 是 Social.framework 的一部分。我将把它留在这里以供参考。

# c# - 将图像从外部计算机 a 发送到外部计算机 b 客户端/服务器

> ID：11697663
> 
> 赞同：-1
> 
> 时间：2012-07-28T02:07:06.827
> 
> 标签：c#, .net, winforms

我想在不同的计算机（家庭和工作）中创建两个应用程序客户端和服务器，不同的 IP 地址具有功能

```
stream 
```

和

```
listen 
```

如何在两个外部 IP 之间发送此图像？

还是有其他方法可以做到这一点？

注意：我将创建函数以从服务器获取当前 ip

谢谢最好的问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T04:35:10.367

A. 它必须是在端口 80 或 443 上运行的服务，并且最好使用 HTTP。否则，您的网络管理员很可能会阻止您的连接。

B. 您需要流式传输或发送快照吗？

# c# - 我在将此代码转换为 Web 服务时遇到问题

> ID：11697664
> 
> 赞同：0
> 
> 时间：2012-07-28T02:07:19.837
> 
> 标签：c#, web-services

我很幸运有@Darin Dimitrov 在此链接上帮助我将 asp.net 转换为 Web 服务：

[如何将其迁移到 Web 服务](https://stackoverflow.com/questions/11460585/how-can-i-migrate-this-to-web-service)

这一次，我尝试转换下面的代码，但遇到了问题。

这是我要转换的代码，然后是我的转换尝试。

```
using System;
using System.IO;
using System.Collections.Generic;
using System.Text;
using EO.Pdf;
using System.Collections.Specialized;

partial class ToDems : System.Web.UI.Page
{
    private void  // ERROR: Handles clauses are not supported in C#
    Page_Load(object sender, System.EventArgs e)

    {

        if (!Page.IsPostBack) {
            string itemList = Request.QueryString("from");
            string[] items = Strings.Split(itemList, ",");

            //Create a PdfDocument object
            PdfDocument doc = new PdfDocument();

            string item = null;

            foreach ( item in items) {
                HtmlToPdf.ConvertUrl(url, doc);

            }

            //We present "Save As" dialog 
            doc.Save(Response.OutputStream);

        }
    }
} 
```

这是我尝试过但对列表和循环感到困惑的方法。

```
public class ToDems : IHttpHandler 
{ 
    public void ProcessRequest(HttpContext context) 
    { 
        string itemList = context.Request.QueryString["from"]; 
        string items = context.Strings.Split(itemList, ","); 

        PdfDocument doc = new PdfDocument(); 

        string item = null;

        foreach ( item in items) 
        {
            HtmlToPdf.ConvertUrl(url, doc);
        }

        doc.Save(context.Response.OutputStream); 
    } 

    public bool IsReusable 
    { 
        get { return false; } 
    } 
} 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T03:34:08.967

在我看来，您应该在对 ConvertUrl 的调用中传递“item”，而不是“url”。我假设每个“项目”都是您要转换为 Pdf 的 Url ...还需要修复拆分调用

这是我正在谈论的变化：

```
String[]    items = itemList.Split(','); 
```

# php - 如何在 mysql 和 php 中加入两个关于公共属性的表？

> ID：11697665
> 
> 赞同：0
> 
> 时间：2012-07-28T02:07:56.693
> 
> 标签：php, mysql, join, left-join

我有 2 张桌子：

```
table1

id message       user
1  testing       23
2  testing again 44
3  test..        23
5  lol           12
6  test..        6 
```

和

```
table2

id user friend
1  23   44
2  23   6
3  19   12
4  23   32
5  23   76
6  23   89 
```

我正在尝试获得`messages`所有朋友的用户，`23`包括`23`

像：

```
id message       user   id user friend
1  testing       23     n  n    n
2  testing again 44     1  23   44
3  test..        23     n  n    n
6  test..        6      2  23   6 
```

我们可以看到这`12`是缺失的，因为他不是朋友，`23`而只是`19`

我有这个

```
SELECT * 
FROM table1 AS w
INNER JOIN table1 AS f ON w.user = f.friend 
WHERE (w.user = 23) 
```

但是如果`23`有消息但没有朋友，它将返回 null 并且这将返回其他`23`没有`76 and 89`消息的朋友。

：） 使困惑？

有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T02:12:32.110

像这样的东西应该可以解决问题，尽管可能需要稍微修改内部查询。

```
SELECT table1.*, table2.* 
FROM table1 
INNER JOIN 
(
    SELECT * 
    FROM table2 
    WHERE user = 23 or friend = 23
) 
AS table2 ON table1.user = table2.user; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T02:18:33.907

问题在于您使用的是 INNER JOIN 而不是 LEFT/RIGHT 连接

内部联接返回的结果在您查询的两个表上都有寄存器，因此如果用户没有任何朋友，它不会出现在结果中，与消息相同。

[您可以在http://en.wikipedia.org/wiki/Join_(SQL](http://en.wikipedia.org/wiki/Join_(SQL) )中找到有关不同类型连接的更多信息

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-28T02:12:23.407

试试这个：

```
SELECT 
    table1.*, 
    table2.* 
FROM 
    table2 
        RIGHT JOIN table2 
        ON table2.friend = table1.user 
WEHRE 
    table2.user = 23 
```

# android - Facebook 库未导出到 android .apk

> ID：11697669
> 
> 赞同：1
> 
> 时间：2012-07-28T02:09:00.537
> 
> 标签：android, facebook, eclipse, sdk

我有一个允许用户通过 Facebook 登录的 Android 应用程序。在模拟器中一切正常，但是当我导出一个签名的 .apk 并从我的手机运行时，似乎不包括 Facebook SDK（它会闪烁一个空的 FB 屏幕一秒钟，然后返回上一个屏幕）。

facebook SDK 未编译，代码作为单独的包包含在项目中。正如我在上面所说的，它在模拟器中工作，所以我假设我正确地将包作为库包含在我自己的包中。

导出 .apk 时，您需要做些什么特别的事情来包含外部库吗？

谢谢！

# java - Java 小程序使用 Flash 应用程序截取浏览器的屏幕截图，缺少 Flash

> ID：11697671
> 
> 赞同：0
> 
> 时间：2012-07-28T02:09:20.613
> 
> 标签：java, javascript, html, flash, overlay

我正在尝试创建一个 Java 小程序，它可以截取包含 Flash 应用程序的浏览器的屏幕截图。这样做的情况是为我们的 Flash 应用程序的测试人员提供一个“发现错误/反馈”侧边栏，可以发送一个表单，其中包含测试人员的浏览器屏幕截图和他的实际视图，以便开发人员可以理解评论/错误。

我正在使用该`Robot().createScreenCapture(Rectangle)`方法，并且确实获得了屏幕截图，但是创建的图像文件中缺少 Flash 应用程序。我很担心，因为我猜到 Flash 正在使用覆盖和直接访问图形驱动程序。

我的问题是：有没有办法让用户使用 Robot 类查看实际屏幕？如果没有，是否有另一种方法可以通过 Java 做到这一点？最后，如果不是，有什么替代方法可以达到相同的结论，即对测试人员的屏幕进行截图，可以通过 HTML/JavaScript 将其发送到我们的服务器。

重要提示：
- 它必须是基于浏览器的解决方案。
- 它*“必须”*独立于浏览器和操作系统（这将是一个 PLUS，但如果它仅适用于 Windows，那在不得已的情况下也可以）
- 我已经阅读了有关`Robot()`模拟 (Alt)PrintScreen 键盘操作并采取的方法剪贴板的内容，但它过于依赖浏览器/操作系统。
- 我知道访问屏幕存在权限问题，但这是我们可以告诉测试人员的事情。

提前感谢回复者，

O。

# database - 为什么仍然使用 DBCP 而不是其他连接池？

> ID：11697672
> 
> 赞同：1
> 
> 时间：2012-07-28T02:09:40.440
> 
> 标签：database, spring, hibernate, database-connection, connection-pooling

读完这篇文章——《[使用 JDBC 的连接池选项：DBCP vs C3P0](https://stackoverflow.com/questions/520585/connection-pooling-options-with-jdbc-dbcp-vs-c3p0)》；关于 Apache DBCP 是如何过时的，不是生产分级并且不被休眠支持，我很困惑为什么人们仍在使用它而不是其他连接池，如 C3P0？

例如：在本教程中创建于 2012 年 5 月 - [Spring Hibernate 集成教程](http://www.dzone.com/tutorials/java/spring/spring-hibernate-integration-1.html)

```
<bean id="myDataSource" class="org.apache.commons.dbcp.BasicDataSource" destroy-method="close"> ... </bean> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T06:59:59.620

您链接到的文章说：

> 更新：事实证明，经过多年的搁置，Apache Commons 的人们已经让 DBCP 摆脱了休眠状态，现在它再次成为一个积极开发的项目。因此，我的原始帖子可能已过时。

所以，也许文章中的问题已经被其他人遇到过，或者现在已经修复了。提出自己的意见。

# python - 有什么办法可以让 Bottle 服务器不那么冗长吗？

> ID：11697676
> 
> 赞同：3
> 
> 时间：2012-07-28T02:10:57.893
> 
> 标签：python, bottle

*Bottle 方面*是否有任何选项可以防止像*WSGIRef*和*Paste*这样的服务器为收到的每个请求输出一行？

**注意：**我知道有一个*安静*的选项，但我不希望整个应用程序保持沉默，只是请求日志。

它很快就会变得非常混乱，特别是考虑到我想不时打印调试信息并且它只是在混乱中迷失了。这是单个页面加载的输出，当我的项目增长一点时，它可能会变得更大：

```
瓶服务器启动（使用 WSGIRefServer()）...
收听 http://0.0.0.0:8080/
按 Ctrl-C 退出。

本地主机 - - [28/Jul/2012 04:05:59] “GET /clients HTTP/1.1”200 3129
本地主机 - - [28/Jul/2012 04:05:59] “GET /static/css/main.css HTTP/1.1”304 0
本地主机 - - [28/Jul/2012 04:05:59] “GET /static/js/jquery-1.7.2.js HTTP/1.1”304 0
本地主机 - - [28/Jul/2012 04:05:59] “GET /static/js/jquery.cookie.js HTTP/1.1”304 0
本地主机 - - [28/Jul/2012 04:05:59] “GET /static/js/jquery.qtip.min.js HTTP/1.1”304 0
本地主机 - - [28/Jul/2012 04:05:59] “GET /static/js/showdown.js HTTP/1.1”304 0
本地主机 - - [28/Jul/2012 04:05:59] “GET /static/js/proj.js HTTP/1.1”304 0
本地主机 - - [28/Jul/2012 04:05:59] “GET /static/css/reset.css HTTP/1.1”304 0
本地主机 - - [28/Jul/2012 04:06:00] “GET /static/images/flag_gb.png HTTP/1.1”304 0
本地主机 - - [28/Jul/2012 04:06:00] “GET /static/images/flag_no.png HTTP/1.1”304 0
本地主机 - - [28/Jul/2012 04:06:00] “GET /static/images/icon_add.png HTTP/1.1”304 0
本地主机 - - [28/Jul/2012 04:06:00] “GET /favicon.ico HTTP/1.1”404 742

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T04:46:00.153

我过去做过类似的事情。对于不同类型的服务器，您可以覆盖日志处理程序以过滤掉您不想要的日志。我从 Bottle 复制了代码并制作了自己的 ServerAdapter，下面是 WSGI 服务器的代码。类似于我自己的处理程序类覆盖 log_request 函数并覆盖原始 log_request 然后根据传递给函数的响应代码过滤掉消息的安静功能。

我从内置的 BaseHTTPServer 模块中复制了 log_request 函数并添加了 if 语句。

然后当你启动瓶子时，将它传递给你的客户 serverAdapter

```
from bottle import route, run, template
import bottle

@route('/hello/:name')
def index(name='World'):
    print "Debug Print Statement"
    return template('<b>Hello {{name}}</b>!', name=name)

class WSGIRefServer(bottle.ServerAdapter):
    def run(self, handler): # pragma: no cover
        from wsgiref.simple_server import make_server, WSGIRequestHandler

        class LogHandler(WSGIRequestHandler):
            def log_request(self, code='-', size='-'):
                """Log an accepted request.

                This is called by send_response().

                """
                if code not in  ["200", "304"]:
                    self.log_message('"%s" %s %s',
                                     self.requestline, str(code), str(size))

        self.options['handler_class'] = LogHandler
        srv = make_server(self.host, self.port, handler, **self.options)
        srv.serve_forever()

run(host='localhost', server=WSGIRefServer, port=8080) 
```

# python - 当一个值对应另一个值时，如何避免 if/elif/else？

> ID：11697683
> 
> 赞同：0
> 
> 时间：2012-07-28T02:12:22.500
> 
> 标签：python

什么是表达（苹果，香蕉）和（红色，黄色）之间直接相关性的简洁方式。虽然它得到了我需要的结果，但我对此并不满意......

```
if value == apple:
   result = red
elif value == banana:
   result = yellow
else:
   result = None 
```

很难搜索，甚至很难确定这个问题的标题，但我确信这是一个基本练习。不是吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-28T02:15:25.290

```
{apple:red, banana:yellow}.get(value) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-28T02:14:49.197

您可以为此使用字典：

```
mydict = {'apple': 'red', 'banana': 'yellow'}
result = mydict.get(value, None) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-28T02:15:15.683

您可以使用字典：

```
fruit_colors = {
    apple: red,
    banana: yellow
}

result = fruit_colors.get(value) 
```

# javascript - 移动 Safari 浏览器的滚动问题

> ID：11697685
> 
> 赞同：0
> 
> 时间：2012-07-28T02:12:36.697
> 
> 标签：javascript, html, css, scroll, mobile-safari

我在 iPad 上的 Safari 浏览器中遇到了一个奇怪的错误。

这是我的代码：

CSS：

```
#searchResults {
    border-style: none;
    background-color:#b00000;
    width:40%;    
    max-height:100%;    
    position:fixed;    
    left:40%;    
    overflow:hidden;    
    -webkit-overflow-scrolling:touch;    
    visibility:hidden;
} 
```

HTML：

```
<button onClick = "buttonClick()"/>
<div id="searchResults">
    hello<br>hello<br>hello<br>hello<br>hello<br>hello<br>hello<br>hello<br>hello<br>hello<br>hello<br>hello<br>hello<br>hello<br>hello<br>hello<br>hello<br>hello<br>hello<br>hello<br>hello<br>hello<br>hello<br>hello<br>hello<br>hello<br>hello<br>hello<br>hello<br>hello<br>hello<br>hello<br>hello<br>hello<br>hello<br>hello<br>hello<br>hello<br>hello<br>hello<br>hello<br>hello<br>hello<br>hello<br>hello<br>hello<br>hello<br>hello<br>hello<br>hello<br>hello<br>hello<br>hello<br>hello<br>hello<br>hello<br>hello<br>hello<br>hello<br>hello<br>hello<br>hello<br>hello<br>hello<br>hello<br>hello<br>hello<br>hello<br>hello<br>hello<br>hello<br>hello<br>hello<br>hello<br>hello<br>hello<br>hello<br>hello<br>hello<br>hello<br>hello<br>hello<br>hello<br>hello<br>hello<br>hello<br>hello<br>hello<br>
</div> 
```

JS：

```
function buttonClick() {
    document.getElementById('searchResults').style.visibility = "visible";
} 
```

弹出 div 容器无法在移动 Safari 中滚动，但如果我消除了可见性：隐藏部分，那么它滚动就好了。我真的无法消除可见性：隐藏部分，但我不知道该怎么做。我可以动态创建 div，然后在完成后将其删除，但似乎应该有一个更简单的方法。

​​<a href="http://jsfiddle.net/sXj9m/58/" rel="nofollow">见小提琴

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T02:58:44.060

尝试使用`display: none;`(hidden) 和`display: block;`(visible) 代替。

我不知道为什么会解决它，但它似乎可以解决问题。

# ruby - 仅使用 ruby DRb 创建最简单的聊天系统

> ID：11697686
> 
> 赞同：1
> 
> 时间：2012-07-28T02:12:41.410
> 
> 标签：ruby, chat, drb

我刚刚学习了 DRb，并用它做了一个聊天系统。这是代码：

1号航站楼：

```
require 'drb'
class A
    def A.my_add(line, from)
        puts from + ': ' + line
    end
end

DRb.start_service('druby://127.0.0.1:61676', A)
B = DRbObject.new_with_uri('druby://127.0.0.1:61677')

while (line=gets).chomp != 'bye'
    A.my_add line, "Terminal 1"
    B.my_add line, "Terminal 1"
end 
```

2号航站楼：

```
require 'drb'

class B
    def B.my_add(line, from)
        puts from + ': ' + line
    end
end
DRb.start_service('druby://127.0.0.1:61677', B)
A = DRbObject.new_with_uri('druby://127.0.0.1:61676')

while (line=gets).chomp != 'bye'
    A.my_add line, "Terminal 2"
    B.my_add line, "Terminal 2"
end 
```

我知道这很简单，只有 2 个终端，并且每条消息都显示在所有带有“from”前缀的终端中。但是一个丑陋的事情是我复制了同一个类并为每个终端打开了不同的线程，那是因为我不知道如何将字符串打印到其他机器的控制台。因此，如果代码可以这样写：

```
class A
    def A.my_add(line, from)
       for <DRb Server and all clients> do
        puts<to that terminal> from + ': ' + line
       end
    end
end 
```

然后我们可以只维护 A 类并使用一个线程。对于每条消息，只需调用 A.my_add，它将被打印到所有终端。我感谢您的帮助。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T11:18:12.323

这就是我要这样做的方式：

正确的做法是：每个系统都有一个唯一的 IP，所有的通信都使用同一个端口。因此，每个终端都必须这样做： 1\. 找到本地系统的 ip 并将其自动放入您的 start_service 例程中。2\. 定义一个发送端口和一个接收端口。3\. 运行 DRB 服务器。

与指定的终端 1 到终端 2 通信：使用终端 1 中的发送端口将消息发送到终端 2 中的接收端口。

对于多个终端通信：您有终端列表，它将名称映射到 IP 地址。您可以遍历终端列表以向接收端口发送消息。

# ruby-on-rails - 使用 godaddy 在 Heroku 上添加 SSL 证书

> ID：11697688
> 
> 赞同：0
> 
> 时间：2012-07-28T02:13:10.083
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ssl, ruby-on-rails-3.1, ssl-certificate

所以这就是问题所在。

我有一个使用 SSL 的网站。（https://www.archerandreed.com/）效果很好。

当您在浏览器中键入 archerandreed.com/ 时，一切仍然正常。

不幸的是，当您在浏览器中 键入[https://archerandreed.com/](https://archerandreed.com/)或[http://archerandreed.com/时，您会收到 SSL 证书警告。](http://archerandreed.com/)

我以为我可以为 www.archerandreed.com && archerandreed.com 添加一个证书，但 heroku 不再接受 2 个 ssl 端点。

那么有哪些可能的解决方案。我认为一种解决方案是购买通配符域，但这很痛苦。我的应用程序是 rails 3.2.6。如果它们是子域，是否可以只强制 SSL？我可以在 routes.rb 或 config/environments/production.rb 中这样做吗？感谢您提前提供任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T16:05:06.863

所以我想我找到了我想要的东西，我认为这应该以某种方式记录在heroku中......

1）关闭config.force_ssl = true：

```
config.force_ssl = false  # config/environments/production.rb 
```

2) 在 application_controller 中有以下内容：

```
class ApplicationController < ActionController::Base
  before_filter :ensure_domain
  before_filter :force_ssl
  APP_DOMAIN = 'www.archerandreed.com'

protected
  def force_ssl
    if Rails.env.production?
      redirect_to :protocol => 'https' unless request.ssl?
    end
  end

  def ensure_domain
    if Rails.env.production? && ((request.env['HTTP_HOST'] != APP_DOMAIN) )
      # HTTP 301 is a "permanent" redirect
      redirect_to( "https://#{APP_DOMAIN}", :status => 301) and return
    end
  end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T17:20:31.457

另一个解决方案（正如在其他几个线程中提出的 - 例如[这里](https://stackoverflow.com/questions/6701549/heroku-ssl-on-root-domain/11011004#11011004)）是使用 DNS 提供程序，如允许使用 ALIAS 记录的 DNSimple。然后为您的裸域（在本例中为 archerandreed.com）添加 ALIAS 记录，因为无论如何您都不想使用 A 记录将裸域指向 heroku。

然后您可以`config.force_ssl`在 production.rb 中使用，而不必向您的应用程序控制器添加过滤器。

# regex - Awstats 额外部分按子目录点击

> ID：11697701
> 
> 赞同：1
> 
> 时间：2012-07-28T02:17:51.320
> 
> 标签：regex, awstats

我已经按照[http://www.internetofficer.com/awstats/by-directory/](http://www.internetofficer.com/awstats/by-directory/)的格式设置了一个按目录点击的额外部分。这行得通。

```
images  28273657    38871644    1389.77 GB
content 12607984    12652114    390.53 GB 
```

等等

但是，我需要（第一级）子目录的点击。在该页面的底部，它建议使用：

```
ExtraSectionFirstColumnValues1="URL,^\/([^\/]*\/[^\/]*)\/" 
```

仍然只显示顶级目录。我也试过

```
 ExtraSectionFirstColumnValues1="URL,^\/*\/*\/" 
```

这导致同样的事情。我无法获得正确的正则表达式来做我需要的事情。

完整代码：

```
#Include hits by top 25 directories
ExtraSectionName1="Hits by Directory"
ExtraSectionCodeFilter1="200 304"
ExtraSectionCondition1="URL,^.*$"
ExtraSectionFirstColumnTitle1="Directory"
ExtraSectionFirstColumnValues1="URL,^\/*\/*\/"
ExtraSectionFirstColumnFormat1="<A HREF='/%s/' TARGET='_blank'>%.80s</A>"
ExtraSectionStatTypes1=PHB
ExtraSectionAddSumRow1=1
MaxNbOfExtra1=25
MinHitExtra1=1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T12:32:22.760

你应该使用：

```
ExtraSectionFirstColumnValues1="URL,^\/([^\/]*)\/" 
```

# javascript - 如何将 Underscore.js 过滤器与对象一起使用？

> ID：11697702
> 
> 赞同：10
> 
> 时间：2012-07-28T02:17:54.013
> 
> 标签：javascript, jquery, underscore.js

我有一个像这样的对象：

```
> Object
  > Rett@site.com: Array[100]
  > pel4@gmail.com: Array[4]
    > 0
       id : 132
       selected : true
    > 1
       id : 51
       selected : false 
```

ETC..

如何使用下划线[`_.filter()`](http://underscorejs.org/#filter)仅返回选择 === true 的项目？

我从来不需要使用`_.filter()`. 就像是

```
var stuff = _.filter(me.collections, function(item) {
    return item[0].selected === true;
}); 
```

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-28T02:27:54.873

`selected`如果要从is的任何电子邮件地址中提取所有数组元素，则`true`可以像这样进行迭代：

```
var selected = [];

for (email in emailLists) {
    selected.concat(_.filter(emailLists[email], function (item) {
        return item.selected === true;
    }));
} 
```

如果您只想拉出*所有*元素所在的数组，则`selected`可以改为执行以下操作：

```
var stuff = _.filter(me.collections, function(item) {
    return _.all(item, function (jtem) { 
        jtem.selected === true;
    });
}); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-08-22T21:56:45.440

Underscore 的过滤器方法将作用于用作散列或字典的对象，但它会返回对象的可枚举值的数组并删除键。我需要一个函数来通过保留键的值过滤散列，并在 Coffeescript 中写了这个：

```
hash_filter: (hash, test_function) ->
  keys = Object.keys hash

  filtered = {}
  for key in keys
    filtered[key] = hash[key] if test_function hash[key]
  filtered 
```

如果你不使用 Coffeescript，这里是用 Javascript 编译的结果，稍微清理一下：

```
hash_filter = function(hash, test_function) {
  var filtered, key, keys, i;
  keys = Object.keys(hash);
  filtered = {};
  for (i = 0; i < keys.length; i++) {
    key = keys[i];
    if (test_function(hash[key])) {
      filtered[key] = hash[key];
    }
  }
  return filtered;
}

hash = {a: 1, b: 2, c: 3};
console.log((hash_filter(hash, function(item){return item > 1;})));
// Object {b=2, c=3} 
```

TL; DR：[Object.keys()](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/keys)很棒！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-28T21:42:24.310

我有一个名为 allFilterValues 的对象，其中包含以下内容：

```
{"originDivision":"GFC","originSubdivision":"","destinationDivision":"","destinationSubdivision":""} 
```

这很难看，但您要求使用基于*下划线*的方式来过滤对象。这就是我只返回具有非虚假值的过滤器元素的方式；您可以将过滤器的返回语句切换为您需要的任何内容：

```
 var nonEmptyFilters = _.pick.apply({}, [allFilterValues].concat(_.filter(_.keys(allFilterValues), function(key) {
        return allFilterValues[key];
    }))); 
```

输出（JSON/字符串化）：

```
{"originDivision":"GFC"} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-03-02T13:34:57.927

@Dexygen was right to utilize [_.pick](https://underscorejs.org/#pick) but a cleaner solution is possible because the function also accepts a predicate

> Return a copy of the object, filtered to only have values for the allowed keys (or array of valid keys). **Alternatively accepts a predicate indicating which keys to pick**.

(highlight is mine)

Here's a real life example I've used in a project

```
_.pick({red: false, yellow: true, green: true}, function(value, key, object) {
    return value === true;
});
// {yellow: true, green: true} 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2016-08-12T14:31:24.163

也许你想要一个最简单的方法

```
_.filter(me.collections, { selected: true}) 
```

# html - 如何正确使用H标签？

> ID：11697703
> 
> 赞同：2
> 
> 时间：2012-07-28T02:18:15.360
> 
> 标签：html, header, seo

我现在正在查看我的模板，我发现了一个问题。虽然，我不是太先进，所以我在这里，问我是否在没有问题的情况下看到问题：

主页包含：

15 个 H1 标签，每个帖子标题一个。

0 个 H2 标签。

3 个 H3 标签，用于小部件标题。

8 个 H4 标签，用于小部件内容。

0 个 H5 标签。

0 个 H6 标签。

单个页面也是如此，除了它包含 1 个 H1 标记。

所以我看到了一个问题，因为没有 H2 标签，有 H3 和 H4 标签，然后没有 H5 和 H6 标签。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-30T09:03:04.853

我希望你的主页：

*   1 H1 标签，网站的标题。
*   XX H2 标签，每个帖子标题一个。
*   XX H2 标签，用于小部件标题。
*   XX H2 标签，用于小部件内容。

对于与页面中之前的 H2 直接相关的内容，您必须使用 H3。当存在语义关系时，必须使用下级标题标签，例如：

```
h1 : 10 cars I love
p : intro

h2 : Audi A5 (the first car)
p : some text about the audi

h3 : the speed of the A5
p : some text about the speed of the audi A5
h3 : another thing I love about the A5
p : text about this....

h2 : second car I love
same structure as the Audi A5 part 
```

这样，您就可以在每个标题标签和紧随其后的标题级别之间建立关系。

对于您的主页，不同的标题似乎完全不相关，因此您应该只为它们使用 H2。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T02:21:59.527

每个 HTML 文档应该只有一个 h1。

但是h2、h3、h4、h5可以随意使用。

但遵循等级制度。所以，尽量不要跳过一个级别。

# c - C 标准是否认为此标头中有一种或两种“struct uperms_entry”类型？

> ID：11697705
> 
> 赞同：4
> 
> 时间：2012-07-28T02:18:45.670
> 
> 标签：c, c99

您能否给出三个 C 标准（最好是 C99 或 C11）之一的章节和经文，指出以下头文件中是否包含一种或两种`struct uperms_entry`类型？

```
#ifndef UPERMS_CACHE_INCLUDE
#define UPERMS_CACHE_INCLUDE

typedef struct mutex MT_MUTEX;

typedef struct uperms_cache
{
    MT_MUTEX            *cache_lock;
    int                  processing;
    struct uperms_entry *uperms_list;  // No prior struct uperms_entry
} uperms_cache_t;

typedef struct uperms_entry // Does this define a different struct uperms_entry?
{
    char                 username[32];
    int                  perms;
    struct uperms_entry *next;
} uperms_entry_t;

#endif /* UPERMS_CACHE_INCLUDE */ 
```

附加问题：

1.  如果有两种类型，有没有办法让 GCC 报告问题？
2.  如果有两种类型，在实践中是否重要？

（我认为答案是“是的——严格来说有两种类型”，然后是（1）否和（2）否。）

*背景：内部代码审查——我想颠倒结构的顺序，但我不确定我是否完全过于迂腐。*

**更新：**

显然，最初问题的答案是“有一个`struct uperms_entry`”，因此编号为 1 和 2 的问题没有实际意义。我很高兴在进行代码审查之前进行了检查。

## 背景思维

这部分是在主要问题解决很久之后添加的。

* * *

以下是来自 ISO/IEC 9899:2011 的一些广泛但相关的引述：

> ### §6.2.7 兼容类型和复合类型
> 
> ¶1 如果它们的类型相同，则两种类型具有兼容的类型。用于确定两种类型是否兼容的附加规则在 6.7.2 中描述了类型说明符，在 6.7.3 中描述了类型限定符，在 6.7.6 中描述了声明符。^(55))此外，如果它们的标记和成员满足以下要求，则在单独的翻译单元中声明的两种结构、联合或枚举类型是兼容的：如果用标记声明了一个，则应用相同的标记声明另一个。如果两者都在各自翻译单元内的任何地方完成，则适用以下附加要求：它们的成员之间应存在一一对应关系，以便每对对应的成员都声明为兼容的类型；如果该对的一个成员使用对齐说明符声明，则另一个成员使用等效的对齐说明符声明；如果该对中的一个成员声明了一个名称，则另一个成员声明为相同的名称。对于两个结构，相应的成员应以相同的顺序声明。对于两个结构或联合，相应的位域应具有相同的宽度。对于两个枚举，对应的成员应具有相同的值。
> 
> ^(55))两种类型不必相同才能兼容。
> 
> ### §6.7.2.1 结构和联合说明符
> 
> ¶8 struct-or-union-specifier 中 struct-declaration-list 的存在在翻译单元内声明了一个新类型。struct-declaration-list 是结构或联合成员的一系列声明。如果 struct-declaration-list 直接或通过匿名结构或匿名联合不包含任何命名成员，则行为未定义。直到终止列表之后，类型才不完整`}`，然后完成。
> 
> ### §6.7.2.3 标签
> 
> ¶4 具有相同范围并使用相同标记的结构、联合或枚举类型的所有声明都声明了相同的类型。不管在同一翻译单元中是否存在标记或该类型的其他声明，该类型是不完整的^(129))直到紧接在定义内容的列表的右大括号之后，然后才完成。
> 
> ¶5 在不同范围内或使用不同标签的结构、联合或枚举类型的两个声明声明了不同的类型。不包含标记的结构、联合或枚举类型的每个声明都声明了不同的类型。
> 
> ¶6 形式的类型说明符
> 
> `struct-or-union identifier`[选择] `{ struct-declaration-list }`
> 
> 或者
> 
> `enum identifier`[选择] `{ enumerator-list }`
> 
> 或者
> 
> `enum identifier`[选择] `{ enumerator-list , }`
> 
> 声明结构、联合或枚举类型。列表定义结构内容、联合内容或枚举内容。如果提供了标识符，则^(130))类型说明符还将标识符声明为该类型的标记。
> 
> ¶7 表格声明
> 
> ```
> struct-or-union identifier ; 
> ```
> 
> 指定结构或联合类型并将标识符声明为该类型的标记。^(131))
> 
> ¶8如果形式的类型说明符
> 
> ```
> struct-or-union identifier 
> ```
> 
> 除了作为上述形式之一的一部分出现，并且没有其他标识符作为标记的声明是可见的，那么它声明了一个不完整的结构或联合类型，并将标识符声明为该类型的标记。^(131))
> 
> ¶9如果形式的类型说明符
> 
> ```
> struct-or-union identifier 
> ```
> 
> 或者
> 
> ```
> enum identifier 
> ```
> 
> 出现不是作为上述形式之一的一部分，并且标识符作为标记的声明是可见的，则它指定与其他声明相同的类型，并且不重新声明该标记。
> 
> ¶12 示例 2 为了说明使用标记的先前声明来指定一对相互引用的结构，声明
> 
> ```
> struct s1 { struct s2 *s2p; /* ... */ }; // D1
> struct s2 { struct s1 *s1p; /* ... */ }; // D2 
> ```
> 
> 指定一对包含彼此指针的结构。但是请注意，如果 s2 已被声明为封闭范围内的标记，则声明 D1 将引用它，而不是 D2 中声明的标记 s2。为了消除这种上下文敏感性，声明
> 
> ```
> struct s2; 
> ```
> 
> 可以在 D1 之前插入。这在内部范围内声明了一个新标签 s2；然后，声明 D2 完成了新类型的规范。
> 
> ^(129))不完整类型只能在不需要该类型对象的大小时使用。例如，当 typedef 名称被声明为结构或联合的说明符时，或者在声明指向或返回结构或联合的函数时，不需要它。（参见 6.2.5 中的不完整类型。）在调用或定义这样的函数之前，规范必须是完整的。
> 
> ^(130))如果没有标识符，则该类型在翻译单元内只能由它所属的声明引用。当然，当声明是 typedef 名称时，后续声明可以使用该 typedef 名称来声明具有指定结构、联合或枚举类型的对象。
> 
> ^(131))不存在与枚举类似的构造。
> 
> ### §6.7.3 类型限定符
> 
> ¶10 对于要兼容的两个合格类型，两者都应具有兼容类型的相同合格版本；说明符或限定符列表中类型限定符的顺序不影响指定的类型。

*§6.7.6 中的讨论与指针、数组和函数声明符有关，并不真正影响结构或联合。*

* * *

当我写这个问题时，我知道示例 2。这是一些关于上述信息意味着什么的大声思考。

考虑这个编译干净的例子：

```
#include <stdio.h>
struct r1 { int x; };

struct r1;

struct r1 p0;

//struct r1 { int y; };     // Redefinition of struct r1

extern void z(void);

void z(void)
{
    struct r1 p1 = { 23 };
    struct r1;
    //struct r1 p2;         // Storage size of p2 is not known
    struct r2 { struct r1 *rn; int y; };
    struct r1 { struct r2 *rn; int z; };
    struct r2 p = { 0, 1 };
    struct r1 q = { &p, 2 };
    p.rn = &q;
    printf("p.y = %d, q.z = %d\n", p.y, q.z);
    printf("p1.x = %d\n", p1.x);
} 
```

该函数说明了示例 2 何时适用，但不是明智的代码。函数中的声明`p1`是与全局变量相同类型的结构`p0`。尽管它的类型名称是`struct r1`，但它与局部变量的类型是不同的（且不兼容的）类型`p`。

`struct r1`无论元素是命名`x`还是，都不允许在全局级别重新定义`y`。在这种情况下，先验 `struct r1;`是无操作的。

一个有趣的问题是'函数可以`z`传递`p`或传递`q`给任何其他函数（调用它`a`）吗？答案是合格的“是”，其中一些限制很有趣。（尝试它也是令人震惊的编码风格，近乎疯狂。）该功能必须存在于单独的翻译单元（TU）中。函数声明必须在函数内部`z`（因为如果在函数外部，它的原型必须引用`struct r1`函数外部定义的，而不是`struct r1`内部定义的。

在另一个 TU 中，必须有一定程度的理智：函数`a`必须具有兼容的结构类型`struct r1`并且`struct r2`在其全局范围内可见。

这是另一个例子，但这个没有编译：

```
#include <stdio.h>

struct r1;
extern void z(struct r1 *r1p);
extern void y(struct r1 *r1p);

void y(struct r1 *r1p)
{
    struct r2 { struct r1 *rn; int y; };
    struct r1 { struct r2 *rn; int z; };
    struct r2 p = { r1p, 1 };
    struct r1 q = { &p, 2 };
    p.rn = &q;
    printf("p.y = %d, q.z = %d\n", p.y, q.z);
}

void z(struct r1 *r1p)
{
    struct r1
    struct r2 { struct r1 *rn; int y; };
    struct r1 { struct r2 *rn; int z; };
    struct r2 p = { r1p, 1 };
    struct r1 q = { &p, 2 };
    p.rn = &q;
    printf("p.y = %d, q.z = %d\n", p.y, q.z);
} 
```

来自 Mac OS X 10.7.4 上的 GCC 4.7.1 的警告是：

```
structs3.c: In function 'y':
structs3.c:13:10: warning: assignment from incompatible pointer type [enabled by default]
structs3.c: In function 'z':
structs3.c:22:12: warning: initialization from incompatible pointer type [enabled by default]
structs3.c:22:12: warning: (near initialization for 'p.rn') [enabled by default] 
```

`p.rn = &q;`第 13 行是函数中的赋值，第 23 行是尝试在函数`y`中定义和初始化。`struct r2 p``z`

这表明在函数中，`rn`元素 of`struct r2`是指向`struct r1`在全局范围内声明的不完整类型的指针。在函数内添加 a`struct r1;`作为第一行代码将允许代码编译，但初始化引用`r1p->rn`再次取消引用指向不完整类型的指针（不完整类型是`struct r1`在全局范围内声明的）。

函数声明和前`struct r1;`一行可以作为不透明类型出现在标题中。支持功能列表不完整；需要一种方法来获取指向初始化的指针以`struct r1`传递给函数，但这是一个细节。

为了使代码在第二个 TU 中工作，在`struct r1`定义函数之前，for 的类型必须在全局范围内是完整的，并且由于递归引用，`struct r21 也必须是完整的。

```
#include <stdio.h>

/* Logically in a 3-line header file */
struct r1;
extern void z(struct r1 *r1p);
extern void y(struct r1 *r1p);

/* Details private to this TU */
struct r2 { struct r1 *rn; int y; };
struct r1 { struct r2 *rn; int z; };

void y(struct r1 *r1p)
{
    struct r2 p = { r1p,     1 };
    struct r1 q = { r1p->rn, 2 };
    p.rn = &q;
    printf("p.y = %d, q.z = %d\n", p.y, q.z);
}

void z(struct r1 *r1p)
{
    struct r2 p = { r1p,     1 };
    struct r1 q = { r1p->rn, 2 };
    p.rn = &q;
    printf("p.y = %d, q.z = %d\n", p.y, q.z);
} 
```

如果需要，可以在多个实现文件中重复在实现文件中定义结构而在公共头文件中保留类型不完整的过程，但如果多个 TU 使用完整的结构定义，则最好放置定义在仅在实现结构的文件之间共享的私有头文件中。我注意到私有标头在公共标头之前还是之后都没有关系。

也许这对你来说已经很明显了。以前我不需要在这个细节层次上仔细考虑。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-28T02:30:52.400

在 C ¹中，它们指的是同一类型。C99 §6.2.1 定义了存在的范围：

> *2 对于标识符指定的每个不同实体，标识符仅在称为其范围*的程序文本区域内可见（即可以使用）。由同一标识符指定的不同实体要么具有不同的范围，要么位于不同的名称空间中。作用域有四种：函数、文件、块和函数原型。（函数原型是声明其参数类型的函数的声明。）

函数范围仅适用于标签（如稍后在同一节中明确说明的那样）。块范围适用于*块*中声明的标识符- 块由复合语句、迭代语句和选择语句创建（而不是由`struct`声明或复合初始化器）。函数原型范围适用于在函数原型声明中声明的标识符。

这些都不适用于您的示例 - 您示例中的所有提及`struct uperms_entry`都在文件范围内。

C99 §6.7.2.3 说：

> 1 具有相同范围并使用相同标记的结构、联合或枚举类型的所有声明都声明相同的类型。类型在定义内容的列表的右大括号之前是不完整的，然后是完整的。

这很清楚，适用于您的情况。

该节第 8 段适用于首次提及`struct uperms_entry`：

> 8 如果*结构或联合标识符*形式的类型说明符不是作为上述形式之一的一部分出现，并且没有其他标识符作为标记的声明是可见的，那么它声明了一个不完整的结构或联合类型，并且将标识符声明为该类型的标记。

因此，此时它在文件范围内被声明为不完整类型。第 6 段适用于第二次提及`struct uperms_entry`：

> 6 *struct-or-union identifier [opt] { struct-declaration-list }*或*enum identifier { enumerator-list }*或*enum identifier { enumerator* -list } 形式的类型说明符声明结构、联合或枚举类型。列表定义结构内容、联合内容或枚举内容。如果提供了标识符，则类型说明符还将标识符声明为该类型的标记。

所以在`}`typedef 声明的末尾之后，它现在是一个完整的类型。

附加问题没有实际意义。

* * *

^(1\. 但是，我相信 C++ 中*并非*如此。)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-28T02:39:35.820

好吧，C99 6.2.5.22 说

> ... 未知内容的结构或联合类型（如 6.7.2.3 中所述）是不完整类型。对于该类型的所有声明，通过稍后在相同范围内声明相同的结构或联合标记及其定义内容来完成。

这意味着它们与您的情况相同。

# html - div 内的相对位置。奇怪的互动

> ID：11697707
> 
> 赞同：0
> 
> 时间：2012-07-28T02:19:10.620
> 
> 标签：html

我正在尝试在 html 中复制 Udacity 问题。原来的问题在[这里](http://www.udacity.com/view#Course/st101/CourseRev/1/Unit/6001/Nugget/119001)。(*)

我的例子在[这里](http://www.linux.ime.usp.br/~lucasmmg/udacity/quiz.html)。如您所见（**），唯一的问题是单选按钮的位置（***）。我已经看到使用 gimp 的位置，并尝试将它们用于 html。然而，不仅有一个偏移量（它本身是完全可管理的），而且这个偏移量也因按钮而异。更糟糕的是：似乎存在某种交互：删除一些按钮会使其余按钮更接近它们应该在的位置。

我（假设）我只能猜测位置直到我猜对了，但由于我可能会多次这样做，我宁愿更好地理解这个问题。到底是怎么回事 ？有没有更好的方法来达到同样的结果？

（*）我已经收到了查看源代码的建议，并尝试过，但没有成功（**）我在 firefox 14 和 chromium 18 （***）
上打开了文件
北、西、东和西下方的广场上

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T02:32:28.060

相对定位不是你想要的。相对意味着将元素从其标称位置偏移，但就其如何影响流中的后续元素而言，将其视为处于其原始位置。

你真正想要的是绝对定位。首先，您需要对容器（图形 div）应用相对或绝对定位，然后应用到内容的任何绝对定位都将相对于该容器。

当然，这个术语有点令人困惑，因为绝对位置实际上是相对于容器的。

# python - 错误的链接使 Python IRC 机器人崩溃

> ID：11697708
> 
> 赞同：-1
> 
> 时间：2012-07-28T02:19:18.517
> 
> 标签：python, beautifulsoup, bots, irc

我的机器人使用 Beautiful soup 来解析 HTML，并打印出 IRC 中所说的链接的网页标题。这一切都有效，除了一件事：如果有人提供死/假链接，机器人就会崩溃。

链接抓取器在找到“http”时触发，例如，如果有人刚刚说“http”，它会因为没有响应而崩溃。有谁知道如何解决这一问题？

这是获取链接并获取网页标题并发布它的代码部分：

```
msg_split = msg.split(' ')
for item in msg_split:
    if re.search('^http.*', item, re.I):
        link = item
        if item.find(','):
            link = link.replace(',', ' ')
            soup = BeautifulSoup.BeautifulSoup(urllib.urlopen(link))
            link_title = soup.title.string
            ircSend('PRIVMSG ' + args[2] + ' ' + link_title) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T02:27:23.067

在 try/except 语句中换`soup = ...`行。`ircSend(...`

```
try:
    soup = BeautifulSoup.BeautifulSoup(urllib.urlopen(link))
    link_title = soup.title.string
    ircSend('PRIVMSG ' + args[2] + ' ' + link_title)
except IOError:
    pass 
```

# python - 比较 Python 中的两个列表

> ID：11697709
> 
> 赞同：10
> 
> 时间：2012-07-28T02:19:23.533
> 
> 标签：python, string, list, variables, comparison

因此，举一个没有任何代码的粗略示例，我很好奇我如何能够弄清楚这两个列表的共同点。

例子：

```
listA = ['a', 'b', 'c']
listB = ['a', 'h', 'c'] 
```

我希望能够返回：

```
['a', 'c'] 
```

怎么会这样？

可能带有可变字符串，例如：

```
john = 'I love yellow and green'
mary = 'I love yellow and red' 
```

并返回：

```
'I love yellow and' 
```

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-07-28T02:21:41.927

为此使用设置交集：

```
list(set(listA) & set(listB)) 
```

给出：

```
['a', 'c'] 
```

请注意，由于我们正在处理*集合*，因此这可能*不会*保留顺序：

```
' '.join(list(set(john.split()) & set(mary.split())))
'I and love yellow' 
```

用于`join()`将结果列表转换为字符串。

--

对于您在下面的示例/评论，这*将保留顺序*（受@DSM 评论的启发）

```
' '.join([j for j, m in zip(john.split(), mary.split()) if j==m])
'I love yellow and' 
```

对于列表长度不同的情况，其结果在下面的评论中指定：

```
aa = ['a', 'b', 'c']
bb = ['c', 'b', 'd', 'a']

[a for a, b in zip(aa, bb) if a==b]
['b'] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-28T02:21:54.003

如果两个列表的长度相同，则可以进行并排迭代，如下所示：

```
list_common = []
for a, b in zip(list_a, list_b):
    if a == b:
        list_common.append(a) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-28T02:22:40.547

将它们作为集合相交：

```
set(listA) & set(listB) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-07-07T10:40:05.707

我想这就是你想问我的任何事情我会尽力回答

```
 listA = ['a', 'b', 'c']
listB = ['a', 'h', 'c']
new1=[]
for a in listA:
    if a in listB:
        new1.append(a)

john = 'I love yellow and green'
mary = 'I love yellow and red'
j=john.split()
m=mary.split()
new2 = []
for a in j:
    if a in m:
        new2.append(a)
x = " ".join(new2)
print(x) 
```

# wordpress - 如何在管理菜单页面中添加/更新帖子元？

> ID：11697711
> 
> 赞同：1
> 
> 时间：2012-07-28T02:19:32.650
> 
> 标签：wordpress, metadata

我想创建一个插件来批量管理帖子的自定义字段数据。我知道我可以通过在帖子编辑屏幕中添加一个元框来添加帖子元，并使用 add_action('save_post','function_to_update_meta') 来触发添加元函数。

但我不知道如何在管理菜单页面（例如自定义管理菜单）中触发 add_post_meta 功能。怎么做？

先感谢您！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T02:31:37.750

Wordpress 的 codex 中给出的示例可能是处理信息方式中最好和最安全的：

[添加元框](http://codex.wordpress.org/Function_Reference/add_meta_box)

复制并粘贴它，然后摆弄它，以了解如何控制您的帖子和页面。

好的部分是您无需担心检查是否需要添加和更新给定的 Post Meta 字段。使用[Update Post Meta](http://codex.wordpress.org/Function_Reference/update_post_meta)将确保为您采取正确的操作，即使该字段不存在。

如果您想添加一些您的插件/主题可能使用的全局控件，[更新选项](http://codex.wordpress.org/Function_Reference/update_option)也是如此。

**故障示例：**

```
add_action( 'add_meta_boxes', 'myplugin_add_custom_box' );
add_action( 'save_post', 'myplugin_save_postdata' ); 
```

这些是动作钩子。第一个在帖子编辑器中填充元框时执行，第二个在添加或更新帖子时执行。

```
function myplugin_add_custom_box()
{
    add_meta_box( 
        'myplugin_sectionid',
        __( 'My Post Section Title', 'myplugin_textdomain' ),
        'myplugin_inner_custom_box',
        'post' 
    );
    add_meta_box(
        'myplugin_sectionid',
        __( 'My Post Section Title', 'myplugin_textdomain' ), 
        'myplugin_inner_custom_box',
        'page'
    );
} 
```

此函数由“add_meta_boxes”操作挂钩调用。注意函数的名字和动作钩子的第二个参数是完全一样的。这会注册您的元框，它们应该出现的帖子类型，以及用于生成包含在其中的表单的回调。

```
function myplugin_inner_custom_box( $post )
{
    wp_nonce_field( plugin_basename( __FILE__ ), 'myplugin_noncename' );

    $value = get_post_meta($post->ID, 'myplugin_new_field') ? get_post_meta($post->ID, 'myplugin_new_field') : 'New Field';

    echo '<label for="myplugin_new_field">';
    _e("Description for this field", 'myplugin_textdomain' );
    echo '</label> ';
    echo '<input type="text" id="myplugin_new_field" name="myplugin_new_field" value="'.$value.'" size="25" />';
} 
```

这是注册的元框调用以自动生成表单的函数。请注意该函数是如何被称为“myplugin_inner_custom_box”的，并且您的元框注册中的第三个参数也称为“myplugin_inner_custom_box”。

wp_nonce_field() 在您的表单中生成一个隐藏字段，以验证发送到表单的数据是否确实来自 Wordpress，并且还可用于在其他插件使用“save_post”操作挂钩的情况下结束该功能。

还要注意 $post 对象作为参数传入。这将允许您使用来自 post 对象的某些属性。我冒昧地检查是否有 get_post_meta() 返回具有给定帖子 ID 的任何内容。如果是这样，则该字段将填充该值。如果不是，则填充“新字段”。

```
function myplugin_save_postdata( $post_id )
{
    if ( defined( 'DOING_AUTOSAVE' ) && DOING_AUTOSAVE ) 
        return;
    if ( !wp_verify_nonce( $_POST['myplugin_noncename'], plugin_basename( __FILE__ ) ) )
        return;
    if ( 'page' == $_POST['post_type'] ) 
    {
        if ( !current_user_can( 'edit_page', $post_id ) )
        return;
    }
    else
    {
        if ( !current_user_can( 'edit_post', $post_id ) )
        return;
    }

    $mydata = $_POST['myplugin_new_field'];
    update_post_meta($post_id, 'myplugin_new_field', $mydata);
} 
```

这是“save_post”操作挂钩调用的函数。注意第二个动作钩子的第二个参数和这个函数都被称为“myplugin_save_postdata”。首先，我们的插件必须通过一系列验证才能真正保存任何数据。

首先，我们不希望我们的元框在每次给定帖子自动更新时更新。如果帖子正在自动更新，请取消该过程。

其次，我们要确保 nonce 数据可用并进行验证。如果没有可用的随机数数据或未经验证，则取消该过程。

第三，我们要确保给定用户具有 edit_page 权限。该函数首先检查帖子类型，然后检查相应的权限。如果用户没有该权限，请取消该过程。

最后，我们的插件终于通过了验证，我们要保存信息。我冒昧地添加了最后的 update_post_meta() 行，以向您展示这一切是如何结合在一起的。

注意 $post_id 是如何作为参数传递给函数的。这是 update_post_meta() 函数所需的部分之一。该键名为“myplugin_new_field”，该元数据的值现在保存为您在自定义元框中的该自定义输入字段中输入的任何内容。

这就像我可以解释整个过程一样简单。只需研究它，然后用代码弄脏你的手。最好的学习方式是通过应用而不是理论。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T14:46:44.717

答案来自[我在其他地方问过的同一个问题](https://wordpress.stackexchange.com/a/59968/18428)

我创建了我的示例版本

我添加了一些用于测试的 console.log 函数，但这基本上与@Chris_() 答案相同：

菜单回调函数生成菜单内容（PHP）：

```
function ajax_menu_callback() {
?>
<div class="wrap">
    <div id="icon-themes" class="icon32"></div>
    <h2>Test</h2>
    <br />
    <form>
        <input id="meta" type ="text" name="1" value="<?php echo esc_html( get_post_meta( 1, 'your_key', true) ); ?>" />
        <?php submit_button(); ?>
    </form>
</div>
<?php
} 
```

然后在管理端打印 javascript（javascript，不要忘记包含一个 jquery 库）：

```
jQuery(document).ready(function() {
    $("form").submit(function() {
        console.log('Submit Function');
        var postMeta = $('input[name="1"]').val();
        console.log(postMeta);
        var postID = 1;
        var button = $('input[type="submit"]');
        button.val('saving......');
        $.ajax({
            data: {action: "update_meta", post_id: postID, post_meta: postMeta, },
            type: 'POST',
            url: ajaxurl,
            success: function( response ) { console.log('Well Done and got this from sever: ' + response); }
        }); // end of ajax()
        return false;
    }); // end of document.ready
}); // end of form.submit 
```

然后 PHP 函数句柄 update_post_meta (PHP)：

```
add_action( 'wp_ajax_update_meta', 'my_ajax_callback' );
function my_ajax_callback() {
    $post_id = $_POST['post_id'];
    $post_meta = $_POST['post_meta'];
    update_post_meta( $post_id, 'your_key', $post_meta );
    echo 'Meta Updated';
    die();
} // end of my_ajax_callback() 
```

# apache2 - 致命错误：无法重新声明（PHP/Apache 设置）

> ID：11697712
> 
> 赞同：0
> 
> 时间：2012-07-28T02:19:33.587
> 
> 标签：apache2, php

我在我的 Mac (Mountain Lion) 上运行 Apache2/PHP5 Web 服务器。当我从 Lion 升级到 Mountain Lion 时，我丢失了开发环境/配置。在尝试设置所有内容时，我不知何故破坏了我的 httpd 或 php.ini 配置（我认为，无论如何）......当我将浏览器指向我的本地主机时，我得到了臭名昭著的 PHP 错误：

致命错误：无法重新声明（某些随机函数）。

不管我指向哪个页面，我都明白了。在我的网络服务器设置丢失之前，这并没有发生，所以我确信文件没问题并且所有语法都很好（整个站点也始终使用 include_once 和 require_once）。

我认为这与我的虚拟主机设置或工作目录设置有关......我已经尝试了很多东西，但到目前为止还没有任何乐趣。

我很乐意提供任何/所有有用的信息……我对此束手无策。任何帮助或建议将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T02:25:47.670

您很可能已更改您的`include_path`，因此您正在使用不同的路径加载相同的 php 文件。当您这样做时，php 无法判断它是同一个文件，因此它会再次加载该文件，从而导致`Cannot redeclare`错误。

追踪问题的一种方法是在违规行之前添加以下内容：

```
echo "<pre>";
print_r(explode(PATH_SEPARATOR, get_include_path()));
print_r(get_included_files()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T02:29:32.680

> 致命错误：无法重新声明（某些随机函数）/类

Always 表示之前已经定义了同名的函数或类，看看这个例子：

```
<?php

function test(){
 return 1;
}

function test(){
 return 2;
}
//will produce fatal error like yours

class A {}
class A {}
//Will say that it can't redeclare class A 
```

这是您应该开始的线索确保：，您的包含路径已相应设置

要获得一些线索，请尝试：

```
<?php

print_r ( get_included_files() );

?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T20:50:30.773

在我的特殊情况下，它碰巧是一个糟糕的虚拟主机设置。一旦我在那里解决了一种重定向问题，它就解决了这个问题。

此处提供的其他两个答案（和评论）都非常好，并且应该可以帮助将来遇到类似问题的任何人调试他们的代码。你很少会像我对虚拟主机那样搞砸并遇到这个问题（但不是很多其他问题）。非常感谢 Ross Smith II、metal_fan 和 Jeffrey 在这方面的帮助！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-04T03:06:04.807

我刚刚在另一个论坛中解决了这个问题。就我而言，问题在于： `<?php include "file.inc"; $user = new user() .... ?>` `<?php include "file.inc" .... ?>` 我包含了两次“file.inc”，这就是问题所在。只需将包含保留在“主”文件中即可！

# javascript - Sammy 中的回调

> ID：11697714
> 
> 赞同：0
> 
> 时间：2012-07-28T02:19:55.287
> 
> 标签：javascript, sammy.js

我有这段代码——我只需要在将在模板中呈现的 DOM 元素上添加一个类。但是，这不起作用！

```
 this.get('#/:post_id', function(context){
            context.app.swap('');
         this.load('/post/' +  this.params['post_id'])
             .then(function(candidates){
                  $.each(candidates[1], function(i, candidate){
                      context.render("static/templates/candidate.template", {candidate:candidate})
                     .appendTo(context.$element());
             });
         })
        .then(function(){
            $('h3').addClass('custom_class');
         }); 
```

候选模板：

```
<div>
  <h3>Name : <%= candidate.name %> </h3>
  ...
  ...
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T16:09:28.660

我是 Sammy 的新手，所以对此持保留态度。我认为它失败了，因为你的第一个 .then() 没有返回任何东西（比如上下文），这意味着下一个 .then() 没有什么可做的。

像这样的工作吗？

```
this.get('#/:post_id', function(context){
        context.app.swap('');
     this.load('/post/' +  this.params['post_id'])
         .then(function(candidates){
              $.each(candidates[1], function(i, candidate){
                  context.render("static/templates/candidate.template", {candidate:candidate})
                 .appendTo(context.$element());
         });
         return context;
     })
    .then(function(){
        $('h3').addClass('custom_class');
     });
}); 
```

# java - 在画布中休眠线程

> ID：11697722
> 
> 赞同：0
> 
> 时间：2012-07-28T02:21:54.033
> 
> 标签：java, android, android-canvas

在我的游戏中，我想在输掉或赢得一个关卡后将屏幕绘制为黑色，然后在屏幕上绘制一条白色消息。延迟几秒钟后，我希望屏幕在触摸时消失。下面是我的 draw() 方法的一部分。问题是屏幕冻结（或线程休眠）在屏幕被拉黑和文本被绘制之前，即使睡眠命令是在文本和画布被绘制之后。任何想法为什么会发生这种情况？

```
if (state == WIN || state == LOSE){
        canvas.drawColor(Color.BLACK);
        message = "Touch Screen To Start";                                                
        canvas.drawText(message + "", mCanvasWidth / 2, mCanvasHeight / 2, white);
        try {
        GameThread.sleep(500);
        } catch (InterruptedException e) {
        e.printStackTrace();
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T03:51:48.377

我有一种感觉，canvas 函数在返回之前实际上并没有显示任何内容。特别是如果您在具有硬件加速的 Android >3.0 或任何具有双缓冲的配置上运行，它实际上不会在完成之前更新屏幕。

相反，当您绘制黑屏时，请存储当前时间。就像是：

```
mStartTime = System.currentTimeMillis(); 
```

然后在监视按下的函数中，检查已经过去了多少秒，看看是否有足够的时间发生，例如：

```
if( (System.currentTimeMillis() - mStartTime)/1000 > 5){
    //Put code here to run after 5 seconds
} 
```

这应该绘制您的文本并避免阻塞 Ui 线程（在各个方面都是一个很大的禁忌）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T02:34:16.850

可能是对 drawText 的调用比您意识到的要长几分之一秒，并且由于您立即调用 sleep，因此您实际上是在绘制之前使线程处于休眠状态。

尝试在调用 sleep 之前放置一个小循环 for( i < 10000 ) 或其他内容，看看是否有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-28T02:59:05.070

使用倒计时

```
 http://developer.android.com/reference/android/os/CountDownTimer.html

 new CountDownTimer(30000, 1000) {

 public void onTick(long millisUntilFinished) {
     mTextField.setText("seconds remaining: " + millisUntilFinished / 1000);
     // Here you do check every second = every 1000 milliseconds
 }

 public void onFinish() {
    // Here you can restart game after 30 seconds which is 30K milliseconds.
     mTextField.setText("done!");
 }
}.start(); 
```

# android - 当我给它们一个 alpha 值时，我的颜色变得一团糟

> ID：11697723
> 
> 赞同：0
> 
> 时间：2012-07-28T02:21:58.013
> 
> 标签：android, colors

我有一个 ListView，我希望这些项目在按下时显示与 Holo Blue 不同的颜色。所以我做了一个可绘制的选择器，效果很好。

我的颜色是`FFF100`，漂亮的黄色。

但是，我认为它有点太饱和了，所以我想降低 alpha 以使其更像我的选项卡指示器，这是通过图像文件完成的。它具有相同的颜色，`FFF100`但不透明度为 50%。

所以我将颜色更改为 ARGB 值，使用`80`(128/255) 作为 alpha 值。所以我的颜色是现在`80FFF100`。

但现在它看起来像一个奇怪的绿色！![截屏](../Images/56ad924651c1f3715f8bc33d8a9da4df.png)

还有我的colors.xml：

```
<resources>
    <color name="putio_accent">#FFF200</color> **This is the standard yellow color. Using this works fine, but it's too saturated, like I said before.
    <color name="putio_accent_selected">#80FFF100</color> **This should be the same, but with 50% alpha..
</resources> 
```

为什么会这样？！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T02:59:38.247

解决它。它显示为绿色的原因是由于某种原因，Android 显示了默认的按下颜色（全息蓝色）*并将*其与我的结合。蓝色+黄色=绿色！

我通过在我的行的 XML 中删除这一行来修复它：

```
android:background="@drawable/putio_clickable_bg" 
```

并将这一行放入我的 ListView 中：

```
android:listSelector="@drawable/putio_tab_indicator" 
```

为什么会修复它，我不知道。也许这是Android中的错误？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T02:30:45.800

不知道为什么它在没有看到代码的情况下这样做，但你总是可以将你的 ARGB 颜色转换为 RGB，使用这个：foreground * alpha + background * (1-alpha)

或者拍摄快照并直接拉出颜色（这会将您想要的颜色更改为 f7f077）。当然，如果您的背景不稳固，那么您不能这样做，但是从您的图片看来并非如此。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-28T02:29:36.997

我不知道当您在 alpha 列中使用其他数字（例如“80”）时会发生什么。我只使用了“00”，尝试一下，因为它提供了具有大约 50% 不透明度的完美颜色。似乎不使用 0 会改变颜色。

希望这可以帮助。

# android - 为什么 Android 的 frustumM 生成的矩阵与红皮书的不同？

> ID：11697728
> 
> 赞同：8
> 
> 时间：2012-07-28T02:23:13.223
> 
> 标签：android, opengl-es

Android 的 frustumM 的工作方式似乎有些有趣。如果我查看 OpenGL 红皮书，生成的矩阵如下所示：（[来源：][[glprogramming.com](http://www.glprogramming.com/red/images/Image23.gif)][）] Songho.ca 似乎同意这一点：（[来源：][[songho.ca](http://www.songho.ca/opengl/files/gl_projectionmatrix_eq16.png)][）]
[![](../Images/3186ccc5a63bf0566f4a6046e6ecb3fc.png)](https://i.stack.imgur.com/AJvpX.gif)

[![](../Images/697e818cde54a7d95d9c833376abfe8e.png)](https://i.stack.imgur.com/WFNOi.png)

但是，一个组件使用 Android 的 frustumM 乘以 2，而不是在其他示例矩阵中。这是它似乎在做的事情：
![](../Images/64ba48060c3c0611074224e9a25f7055.png)

*除了*第一行第三列之外，一切似乎都在功能上匹配。为什么要乘以二？下面是 android.opengl.Matrix 的 frustumM 方法中生成第三列前三个元素的代码行：

```
final float A = 2.0f * ((right + left) * r_width);
final float B = (top + bottom) * r_height;
final float C = (far + near) * r_depth; 
```

将 r_width、r_height、r_depth 定义为：

```
final float r_width  = 1.0f / (right - left);
final float r_height = 1.0f / (top - bottom);
final float r_depth  = 1.0f / (near - far); 
```

以“final float A”开头的行似乎错误地乘以 2。

这是Android代码中的错误，还是我只是遗漏了什么？我知道如果平截头体是对称的，这个术语就会被取消。当使用不对称平截头体运行代码时，生成的矩阵实际上是不同的，当相同的向量与那些不同的矩阵相乘时，生成的向量也是如此。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T16:31:32.060

这是Android的一个错误。请参阅[http://code.google.com/p/android/issues/detail?id=35646](http://code.google.com/p/android/issues/detail?id=35646)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-06T23:10:09.593

（（（我更愿意发表评论，但我不允许。））

谢谢你们的洞察力。我只需要添加

```
mMyMatrix[8] /= 2f; 
```

后

`Matrix.frustrumM(mMyMatrix, ...)`

解决我的纵横比问题:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-21T04:22:04.997

是的，如果你调用带有 (-ratio, ratio, -1, 1, 1, 10) 参数集的函数，它不会引起问题，但是如果你使用 (right != -1 * left) 调用，它让事情变得不同。

当我检查源代码时，我发现了这个问题。叹。

# facebook - 如何创建此弹出窗口并检查用户是否有允许的应用程序？

> ID：11697729
> 
> 赞同：0
> 
> 时间：2012-07-28T02:23:17.030
> 
> 标签：facebook, popup

仅当用户尚未允许我的 Facebook 应用程序时，我将如何在我的网站上创建一个显示（阻止网站内容）的弹出窗口？如果用户已经允许该应用程序，则不应出现弹出窗口，并且该弹出窗口应有一个按钮供用户允许该应用程序，然后在用户确实允许该应用程序时消失。

例如，请参见[此处](http://sofunnyhaha.com)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T02:27:11.433

看看[FB.getLoginStatus](http://developers.facebook.com/docs/reference/javascript/FB.getLoginStatus/)

该页面几乎解释了它......如果你得到`not_authorized`然后有一个按钮来授权你的应用程序。

如果你`unknown`有一个按钮来登录 Facebook 然后重新检查

如果你得到`connected`显示你的页面。

# iphone - CLLocationManager startUpdatingLocation 不起作用

> ID：11697730
> 
> 赞同：8
> 
> 时间：2012-07-28T02:23:17.980
> 
> 标签：iphone, ios, mkmapview, zooming, cllocationmanager

所以现在我至少得到了以下代码的回调......

```
- (void)viewDidLoad {

[super viewDidLoad];
mapView=[[MKMapView alloc] initWithFrame:self.view.frame];
//mapView.showsUserLocation=TRUE;
mapView.delegate=self;
[self.view insertSubview:mapView atIndex:0];

NSLog(@"locationServicesEnabled: %@", [CLLocationManager locationServicesEnabled] ? @"YES":@"NO");
    CLLocationManager *newLocationManager = [[CLLocationManager alloc] init];
    [newLocationManager setDesiredAccuracy:kCLLocationAccuracyBest];
    [newLocationManager setDistanceFilter:kCLDistanceFilterNone];
    [self setLocationManager:newLocationManager];

[[self locationManager] setDelegate:self];
[[self locationManager] startUpdatingLocation];
NSLog(@"Started updating Location");

}

- (void)locationManager:(CLLocationManager *)manager didUpdateToLocation:(CLLocation *)newLocation fromLocation:(CLLocation *)oldLocation {

NSLog(@"Did update to location");
mStoreLocationButton.hidden=FALSE;
location=newLocation.coordinate;

MKCoordinateRegion region;
region.center=location;
MKCoordinateSpan span;
span.latitudeDelta=0.01;
span.longitudeDelta=0.01;
region.span=span;

[mapView setRegion:region animated:TRUE];

} 
```

我可以在第二种方法中设置断点，并且 NSLog 正在报告持续的位置更新，但由于某种原因，使用 span 的缩放不起作用。知道为什么吗？它有我的坐标和一切。在这个问题上有点挠头。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-28T14:38:22.563

将 CLLocationManager 分配给您班级的（强）属性。（我假设您使用的是 ARC BTW。）现在 CLLocationManager 不会超过 viewDidLoad 方法的末尾，因此它也不会调用您的委托方法。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-07-28T09:29:39.173

确保您已`<CLLocationManagerDelegate>`在`@interface`文件中添加。

**编辑**：

如果委托设置正确，请确保您使用的是您的`locationManager`属性：

在`.h`文件中：

```
@property (nonatomic, strong) CLLocationManager *locationManager; 
```

在`viewDidLoad`：

```
self.locationManager = [[CLLocationManager alloc] init];
[self.locationManager setDelegate:self];
[self.locationManager startUpdatingLocation]; 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-07-28T06:13:21.373

我认为，您可以通过两种方式完成这项工作：

1.  使用 CLLocation 框架

检查您是否采用了带有 CLLocationManagerDelegate 方法的 ViEWController

```
#import<MapKit/MapKit.h>
#import <CoreLocation/CoreLocation.h>

@interface ViewController : UIViewController <CLLocationManagerDelegate, 
                                              MKMapViewDelegate>
{
    CLLocationCoordinate2D location;
    MKMapView *mapView;
}
@end 
```

在 ViewController.m 中：

```
@implementation GSViewController
- (void)viewDidLoad {

    [super viewDidLoad];
    mapView=[[MKMapView alloc] initWithFrame:self.view.frame];
    mapView.showsUserLocation=TRUE;
    mapView.delegate=self;
    [self.view insertSubview:mapView atIndex:0];

    CLLocationManager *locationManager=[[CLLocationManager alloc] init];
    locationManager.delegate=self;
    locationManager.desiredAccuracy=kCLLocationAccuracyNearestTenMeters;

    [locationManager startUpdatingLocation];

}

- (void)locationManager:(CLLocationManager *)manager didUpdateToLocation:(CLLocation *)newLocation fromLocation:(CLLocation *)oldLocation{

    NSLog(@"new location: %@", newLocation);
    location=newLocation.coordinate;

    MKCoordinateRegion region;
    region.center=location;
    MKCoordinateSpan span;
    span.latitudeDelta=0.01;
    span.longitudeDelta=0.01;
    region.span=span;

    [mapView setRegion:region animated:TRUE];

}

-(void)locationManager:(CLLocationManager *)manager didFailWithError:(NSError *)error
{
    NSLog(@"error: %@", error.description);
}
@end 
```

2.使用相同的 MKMapKit 框架您可以通过使用名为 didUpdateUserLocation 的 MKMapViewDelegate 方法来做到这一点： 这里您不需要 CLLocaionManager，这将通过以下方式完成： 在 ViewController.h 中：

```
#import <MapKit/MapKit.h>
@interface ViewController : UIViewController < MKMapViewDelegate>
{
    CLLocationCoordinate2D location;
    MKMapView *mapView;
}
@end 
```

在 ViewController.m 文件中：

```
@implementation GSViewController
- (void)viewDidLoad {

    [super viewDidLoad];
    mapView=[[MKMapView alloc] initWithFrame:self.view.frame];
    mapView.showsUserLocation=TRUE;
    mapView.delegate=self;
    [self.view insertSubview:mapView atIndex:0];

}

-(void)mapView:(MKMapView *)mapV didUpdateUserLocation:(MKUserLocation *)userLocation
{
    NSLog(@"map new location: %f %f", userLocation.coordinate.latitude, userLocation.coordinate.longitude);
    location=userLocation.coordinate;

    MKCoordinateRegion region;
    region.center=location;
    MKCoordinateSpan span;
    span.latitudeDelta=0.1;
    span.longitudeDelta=0.1;
    region.span=span;

    [mapV setRegion:region animated:TRUE];
}
@end 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-28T04:05:11.107

好吧，首先，您**永远**无法确定位置管理器能够首先更新位置。更新期间可能出现错误，或者您无权访问用户的位置。

实现此 CLLocationManager 委托方法并验证错误。

```
-(void)locationManager:(CLLocationManager *)manager didFailWithError:(NSError *)error 
```

> “此方法的实现是可选的。但是，您**应该**实现此方法。”

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-28T14:18:17.003

如果您只在模拟器中运行它，您可能需要提示它更改坐标。在 Xcode 中，调试输出窗格上方有一个带有典型位置服务箭头的栏。旁边是位置的下拉列表。一旦您的应用程序运行，切换它正在模拟的位置并查看该更改是否会触发您的代码。然后在真机上进行测试。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-10-15T17:48:42.843

就我而言，它没有进入 didChangeAuthorization。我正在尝试使用真实设备。

我从手机中删除了该应用程序并重新安装。它有效！

希望这可以帮助某人:)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-12-29T20:42:44.643

**对于斯威夫特 3**

该方法已更改为：

`func locationManager(_ manager: CLLocationManager, didUpdateLocations locations: [CLLocation])`

从：

`func locationManager(manager: CLLocationManager, didUpdateLocations locations: [AnyObject]!)`

注意“_”和“位置”转换为 [CLLocation] 而不是 [AnyObject]！

如果您使用旧方法，它将永远不会被调用，并且您不会收到它已更改的警告。

# c# - C#：如何确定接口变量的类型？

> ID：11697732
> 
> 赞同：1
> 
> 时间：2012-07-28T02:23:38.870
> 
> 标签：c#, casting, type-conversion

我有一个接口变量 IAction nextAction。

我想看看 nextAction 是否有一个具体的实现，但是当我尝试以下操作时没有成功：

```
IAction nextAction = GetNextAction();

if (nextAction.GetType() != typeof(LastAction)) {
 // do something...
} 
```

关于如何确定 IAction 变量 nextAction 的具体类型的任何想法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-28T02:26:55.470

我相信“是”是您正在寻找的。一般来说：

```
if (nextAction is ButtonClickedAction) {
   ...
} 
```

在第二次检查时，您似乎正在尝试查看操作是否已更改

```
private void DetermineIfActionChanged(IAction lastAction)
{
   IAction nextAction = GetNextAction();
   if (nextAction.GetType() != lastAction.GetType())
   {
       DoSomethingAwesome();
   }
} 
```

这种方法的唯一问题是，如果您有某种想要尊重的继承并且您不关心精确匹配（例如，EventArg 与 ClickEventArg 将被视为同一类型，因为 ClickEventArg 派生自 EventArg）。如果是这种情况，[这个 SO answer 可能会有所帮助](https://stackoverflow.com/questions/457676/check-if-a-class-is-derived-from-a-generic-class)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-28T02:26:29.883

您可以使用使用`typeof()`功能，也可以使用`is`运算符。

`typeof`：

```
IAction nextAction = GetNextAction();

if (nextAction.GetType() != typeof(LastAction)) {
 // do something...
} 
```

请记住，`typeof`只有在类型完全相同时才会返回 true。

`is`：

```
IAction nextAction = GetNextAction();

if (nextAction is LastAction) {
 // do something...
} 
```

但是你应该记住，`is`操作符可以用于接口，它也尊重继承。阅读本文：[typeof 和 is 关键字有什么区别？](https://stackoverflow.com/questions/7765372/what-is-the-difference-between-typeof-and-the-is-keyword)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-28T02:32:14.607

`nextAction.GetType()`会给你对象的具体类型。

但是，这不是很好的设计，界面的重点是您只使用界面中可用的共享功能。

如果您需要接口未涵盖的功能，那么您应该声明所需类型的变量并完成它。

# syntax - 了解布朗标签

> ID：11697734
> 
> 赞同：1
> 
> 时间：2012-07-28T02:23:55.687
> 
> 标签：syntax, nlp, part-of-speech

我正在阅读与自然语言处理相关的语言学，但布朗标签让我感到困惑。

您能帮我解释一下以下标签吗（如果您可以添加示例，那就更好了）？它们都与[疑问代词和疑问限定词](http://en.wikipedia.org/wiki/Interrogative_pronoun)有关。

1.  WDT (wh-determiner: what, which)

2.  WP$（所有格 wh 代词：who）

3.  WPO（客观 wh 代词：谁、哪个、那个）

4.  WPS（主格 wh 代词：谁、哪个、那个）

例如，限定词应该是The **dog中的****the** ，因为正如它所定义的那样，它描述了一个名词在上下文中的引用。但是 wh-determiner 呢？它的用途是什么？询问名词的引用或我应该以哪种方式解释这些形式？

 **非常感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T15:47:36.257

我可以帮助你解决 wh-determiner 问题。它只是一个 wh 词（特别是“what”或“which”）来代替普通的限定词。它取代了“the”，这样做表明说话者不清楚哪个或什么名词是动词。例如：

(1) 我昨天挤了奶。

(2) 你昨天挤了哪头牛？

看看“which”如何替换“the”？以回声问题的形式更清楚：

(3) 你昨天挤*了哪*头牛？

同样，所有格 wh 代词在问题中代替“他的”、“她的”、“他们的”、“我们的”等。

(4) 你昨天给谁挤奶了？

(5) 我昨天给他的牛挤了奶。

同时，客观和主格 wh 代词是“真正的”代词，因为它们有助于完全替换名词短语。

(6) 你给谁挤奶？

(7) 谁挤牛奶？

希望这可以帮助 ：）**

# excel - Excel：如何在同一个单元格中对两个不同的数字求和？

> ID：11697736
> 
> 赞同：3
> 
> 时间：2012-07-28T02:24:24.207
> 
> 标签：excel, numbers, sum, formula

我有一些信息如下：

```
3/7
4/6
5/1 
```

我想要一个公式，根据斜线两边的数字将它们加起来。所以上面的结果单元格将是：`12/14`. 有谁知道我该怎么做？如果不清楚，请告诉我。谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-28T08:39:52.067

假设 A1:A3 中的数据，您可以在 A4 中输入：

```
=SUMPRODUCT(--LEFT(A1:A3,FIND("/",A1:A3)-1))&"/"&SUMPRODUCT(--REPLACE(A1:A3,1,FIND("/",A1:A3),0)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T02:36:15.473

那么你可以使用 LEFT/RIGHT 和 FIND 函数来分解单元格的内容，从那里你可以添加它们:) 添加两列

```
=LEFT(A1,FIND("/",A1)-1)
=RIGHT(A1,LEN(A1)-FIND("/",A1)) 
```

那些应该将字符串分解成数字，然后添加它们并合并它们。

# c++ - 如何将重载函数传递给运算符？

> ID：11697737
> 
> 赞同：6
> 
> 时间：2012-07-28T02:24:26.740
> 
> 标签：c++, templates, c++11, operator-overloading, function-pointers

我需要将一个函数传递给操作员。任何具有正确 arg 类型的一元函数。返回类型可以是任何东西。因为这是库代码，所以我不能将其包装或强制`f`转换为特定的重载（在 之外`operator*`）。函数将`operator*`第一个参数作为它自己的参数。下面的人工示例编译并返回正确的结果。但是它有硬编码`int`的返回类型——使这个例子可以编译。

```
#include <tuple>
#include <iostream>
using namespace std;

template<typename T>
int operator* (T x,  int& (*f)(T&) ) {
    return (*f)(x);
};

int main() {
    tuple<int,int>  tpl(42,43);
    cout << tpl * get<0>;
} 
```

是否可以`operator*`接受`f`任意返回类型？

**更新 - GCC 错误？** 代码：

```
#include <tuple>

template<typename T, typename U> 
U operator* (T x,  U& (*f)(T&) ) {  
    return (*f)(x);
}; 

int main() {
    std::tuple<int,int>  tpl(42,43);
    return   tpl * std::get<0,int,int>;
} 
```

使用 gcc462 和 453 编译和运行正确，但使用 gcc471 和 480 被拒绝。因此可能是 GCC 回归错误。我已经提交了错误报告： [http ://gcc.gnu.org/bugzilla/show_bug.cgi?id=54111](http://gcc.gnu.org/bugzilla/show_bug.cgi?id=54111)

**编辑** 我已将示例更改为使用元组作为 arg - 在前面的示例中可以简单地推断出返回类型。

**EDIT2** 很多人不明白需要什么，所以我改变了`call`功能以`operator*`使示例更真实。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-28T02:26:46.437

是的，如果这是您的意思：

```
template<typename T, typename F> 
auto call (T x, F f) -> decltype(f(x)) {  
    return (f)(x); 
} 
```

实际上有很多方法可以做到这一点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-28T02:58:25.117

你应该能够做到这一点：

```
template<typename T,typename U>
U call (T x, U (*f)(T) ) {
      return (*f)(x);
}; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-28T05:53:39.720

作为对您更新问题的回答：

正如@DavidRodríguez 所讨论的那样，`get<0>`这还不够，语法上也不正确`&get<0>`。你需要的是`&get<0,int,int>`. 按照您的示例，它将是：

```
#include <tuple>
using namespace std;

template<typename T, typename U>
U call (T x, U (*f)(T&) ) {
      return (*f)(x);
};

int main() {
    tuple<int,int>  tpl(42,43);
    call(tpl, &get<0,int,int>);
    return 0;
} 
```

正常使用时`std::get<>()`，`int,int`自动推导出部分。但是在您的情况下，您需要提供它，因为没有参数。一种解决方法是自定义`get`模板函数：

```
#include <tuple>
using namespace std;

template <size_t I, typename T>
auto myGet(T& tpl) -> decltype(get<I>(tpl))
{
    return get<I>(tpl);
}

template<typename T, typename U>
U call (T x, U (*f)(T&) ) {
      return (*f)(x);
};

int main() {
    tuple<int,int>  tpl(42,43);
    auto get0 = &myGet<0, decltype(tpl)>;
    call(tpl, get0);

//  call(tpl, &myGet<0, decltype(tpl)>); // all in one line, do not work
    return 0;
} 
```

# php - 从mysql数据库中删除项目然后返回最后一页

> ID：11697739
> 
> 赞同：0
> 
> 时间：2012-07-28T02:25:20.697
> 
> 标签：php, javascript, mysql

我有一个页面，其中列出了使用 php 从 mysql 数据库中提取的项目（在本例中为企业）。

```
<? 
    include('config.php');
    echo "<h3>Saved Businesses</h3>";
    echo "<ul style='list-style-type:none;'>";
    $result = mysql_query("SELECT * FROM `saved_biz` WHERE user_id = '$id'") or trigger_error(mysql_error()); 
    while($row = mysql_fetch_array($result)){

        foreach($row AS $key => $value) { $row[$key] = stripslashes($value); }
            $business_id = $row['business_id'];
            $result = mysql_query("SELECT * FROM `company` WHERE id = '$business_id'") or trigger_error(mysql_error());
            while($row = mysql_fetch_array($result)){
                $business_name = $row['name'];
            }
        echo "<li>" . nl2br( $business_name);  
        echo "<a href=deletesavedbiz.php?id={$row['id']}>Delete</a></li>"; 
        echo "</tr>"; 
    } 
    echo "</ul>"; 
?> 
```

如果用户决定删除其中一项业务（通过单击“删除”链接），他/她将被带到 deletesavedbiz.php，然后，如果成功，则会显示一个链接以返回到他的 profile.php 页面/她刚上。

```
<? 
    include('config.php'); 
    $id = (int) $_GET['id']; 
    mysql_query("DELETE FROM `saved_biz` WHERE `id` = '$id' ") ; 
    echo (mysql_affected_rows()) ? "Row deleted.<br /> " : "Nothing deleted.<br /> "; 
?> 

<a href='profile.php'>Back To Listing</a> 
```

现在，我想做的是删除 php，然后像 php 标头一样重定向到 profile.php，而无需让用户单击返回链接。我怎样才能做到这一点？另外，如果在 PHP 中不可能或不是很干净，我可以回答是 javascript。

感谢大家的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T02:40:39.493

如果您的查询返回，请进行重定向`TRUE`。

```
function redirect($page = 'profile.php'){
 header("Location: $page");
 exit;
}

function your_query(){
    include('config.php');
    $id = (int) $_GET['id']; 
    //returns TRUE on success, FALSE otherwise
    return mysql_query("DELETE FROM `saved_biz` WHERE `id` = '$id' ") ; 
}

if ( your_query() ){
  redirerct();
} else {
  redirect('some_error_page.php');
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T02:27:21.150

```
header("Location: profile.php"); 
```

将其放在删除记录的脚本底部。

# google-app-engine - 多租户谷歌应用引擎 (java) 应用程序能否通过谷歌应用程序用户进行身份验证？

> ID：11697741
> 
> 赞同：0
> 
> 时间：2012-07-28T02:26:04.127
> 
> 标签：google-app-engine, google-apps

所以现在谷歌发布了 gae 的多租户功能。

假设我要实现一个谷歌应用引擎应用程序并将其放在谷歌应用市场上。

假设 www.doma.com 和 www.domb.com 购买了该应用程序。来自 doma 的 usera 和来自 domb 的 userb 可以使用他们的谷歌应用程序域用户名（换句话说）向这个应用程序进行身份验证 usera@doma 和 userb@domb 可以使用 gae 进行身份验证吗？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T20:45:09.323

当用户通过 OpenID 或 Google Accounts 身份验证程序时，Google 不会限制用户，您的代码应该这样做。用户通过身份验证后，控制权将交还给您的代码 - 此时您应该检查用户数据并决定是否通过请求。

此外，如果您想在 GAE 上使用`doma.com`和`domb.com`作为您的域名，您需要拥有该域并为每个域创建单独的 Google Apps 帐户。这意味着随机用户不能拥有`user@doma.com`电子邮件地址（除非您在 Google Apps 上为他们手动创建了一个帐户）。

# iphone - 如何使用故事板呈现启动/登录视图控制器

> ID：11697747
> 
> 赞同：4
> 
> 时间：2012-07-28T02:26:52.423
> 
> 标签：iphone, ios, storyboard, appdelegate

我已经以各种形式看到了这个问题，但没有明确的答案。我要在这里提问和回答。我的应用程序需要在启动时工作......初始化、一些网络调用、登录等。我不希望我的主视图控制器在完成之前工作。这样做的好模式是什么？

要求：

*   iOS5+，故事板，ARC。
*   在启动工作完成之前，主 vc 的视图无法出现。
*   想要在启动工作完成时选择到主 vc 的过渡样式。
*   想在故事板中做尽可能多的布局。
*   代码应该干净地包含在明显的地方。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-28T02:26:52.423

**编辑，2017 年 7 月** 自第一次写作以来，我已经将我的做法改为将启动任务交给他们自己的视图控制器。在那个 VC 中，我检查启动条件，在需要时显示“忙碌”的 UI，等等。根据启动时的状态，我设置窗口的根 VC。

除了解决 OP 问题之外，这种方法还有其他好处，可以更好地控制启动 UI 和 UI 转换。这是如何做到的：

在您的主故事板中，添加一个新的 VC，称为`LaunchViewController`并使其成为应用程序的初始 vc。为您的应用程序的“真实”初始 vc 提供一个标识符，如“AppUI”（标识符位于 IB 的“身份”选项卡上）。

识别作为主要 UI 流程开始的其他 vcs（例如注册/登录、教程等），并提供这些描述性标识符。（有些人更喜欢将每个流程保留在自己的故事板中。这是一个很好的做法，IMO）。

*另一个不错的可选想法*：也为您的应用程序的启动故事板的 vc 提供一个标识符（如“LaunchVC”），以便您可以在启动期间抓住它并使用它的视图。这将为用户在启动期间和执行启动任务时提供无缝体验。

这是我的`LaunchViewController`样子......

```
@implementation LaunchViewController

- (void)viewDidLoad {
    [super viewDidLoad];

    // optional, but I really like this:
    // cover my view with my launch screen's view for a seamless start
    UIStoryboard *storyboard = [self.class storyboardWithKey:@"UILaunchStoryboardName"];
    UINavigationController *vc = [storyboard instantiateViewControllerWithIdentifier:@"LaunchVC"];
    [self.view addSubview:vc.view];
}

- (void)viewWillDisappear:(BOOL)animated {
    [super viewWillDisappear:animated];
    [self hideBusyUI];
}

- (void)viewDidAppear:(BOOL)animated {
    [super viewDidAppear:animated];
    [self showBusyUI];

    // start your startup logic here:
    // let's say you need to do a network transaction... 
    //
    [someNetworkCallingObject doSomeNetworkCallCompletion:^(id result, NSError *error) {
        if (/* some condition */) [self.class presentUI:@"AppUI"];
        else if (/* some condition */) [self.class presentUI:@"LoginUI"];
        // etc.
    }];
}

#pragma mark - Busy UI

// optional, but maybe you want a spinner or something while getting started
- (void)showBusyUI {
    // in one app, I add a spinner on my launch storyboard vc
    // give it a tag, and give the logo image a tag, too
    // here in animation, I fade out the logo and fade in a spinner
    UIImageView *logo = (UIImageView *)[self.view viewWithTag:32];
    UIActivityIndicatorView *aiv = (UIActivityIndicatorView *)[self.view viewWithTag:33];
    [UIView animateWithDuration:0.5 animations:^{
        logo.alpha = 0.0;
        aiv.alpha = 1.0;
    }];
}

- (void)hideBusyUI {
    // an animation that reverses the showBusyUI
}

#pragma mark - Present UI

+ (void)presentUI:(NSString *)identifier {
    UIStoryboard *storyboard = [self storyboardWithKey:@"UIMainStoryboardFile"];
    UINavigationController *vc = [storyboard instantiateViewControllerWithIdentifier:identifier];

    UIWindow *window = [UIApplication sharedApplication].delegate.window;
    window.rootViewController = vc;

    // another bonus of this approach: any VC transition you like to
    // any of the app's main flows
    [UIView transitionWithView:window
                      duration:0.3
                       options:UIViewAnimationOptionTransitionCrossDissolve
                    animations:nil
                    completion:nil];
}

+ (UIStoryboard *)storyboardWithKey:(NSString *)key {
    NSBundle *bundle = [NSBundle mainBundle];
    NSString *storyboardName = [bundle objectForInfoDictionaryKey:key];
    return [UIStoryboard storyboardWithName:storyboardName bundle:bundle];
}

@end 
```

**下面的原始答案，虽然我更喜欢我目前的方法**

让我们用一个布尔值来表示应用程序准备好运行主 vc，例如：

```
BOOL readyToRun = startupWorkIsDone && userIsLoggedIn; 
```

1.  创建一个 AppStartupViewController 并将其放置在应用故事板中。
2.  不要将任何segue拖到它上面，也不要让它成为凝视的vc，让它漂浮在某个地方。
3.  在情节提要中 vc 的属性检查器中，将其标识符设置为“AppStartupViewController”。

在 AppStartupViewController.m 中，当 readyToRun 条件满足时，它可以自行关闭：

```
self.modalTransitionStyle = UIModalTransitionStyleCrossDissolve;   // your choice here from UIModalTransitionStyle
[self dismissViewControllerAnimated:YES completion:nil]; 
```

现在，只要应用程序处于活动状态，它就可以检查是否准备好运行，并在需要时显示 AppStartupViewController。在 AppDelegate.h

```
- (void)applicationDidBecomeActive:(UIApplication *)application {

    BOOL readyToRun = startupWorkIsDone && userIsLoggedIn;

    if (!readyToRun) {
        UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"MainStoryboard" bundle:nil];
        AppStartupViewController *startupVC = [storyboard instantiateViewControllerWithIdentifier:@"AppStartupViewController"];

        [self.window.rootViewController presentViewController:startupVC animated:NO completion:nil];
        // animate = NO because we don't want to see the mainVC's view
    }
} 
```

这主要是答案，但有一个障碍。不幸的是，在 AppStartupViewController 出现之前，主 vc 被加载（没关系）并获得 viewWillAppear: 消息（不好）。这意味着我们必须在 MainViewController.m 中传播一些额外的启动逻辑，如下所示：

```
- (void)viewWillAppear:(BOOL)animated {
    [super viewWillAppear:animated];

    if (readyToRun) {
        // the view will appear stuff i would have done unconditionally before
    }
} 
```

我希望这是有帮助的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-15T14:32:41.147

使用导航控制器时的另一种解决方案。

1.  您的导航控制器是初始视图控制器，将您的主控制器设置为导航控制器根的视图。

2.  将您的加载控制器添加到情节提要中，并与命名的 segue of style 模态链接。

3.  在您的主控制器的 viewWillAppear 中触发 segue（每个应用程序运行一次）。

```
- (void)viewWillAppear:(BOOL)animated
{
    [super viewWillAppear:animated];
    if(_isFirstRun)
    {
        _isFirstRun = NO;
        [self performSegueWithIdentifier:@"segueLoading" sender:nil];
    }
} 
```

如果您在 viewDidLoad 中触发 segue，它将不起作用，可能是因为导航控制器的动画尚未完成，您将收到一个`unbalanced calls to begin/end appearance transitions`

# php - 删除以特定字母/字符 php 开头的单词

> ID：11697756
> 
> 赞同：0
> 
> 时间：2012-07-28T02:27:37.527
> 
> 标签：php, regex

这是一个简单的例子：

```
$correction = "game";
$text ="Hello this is an example of a $word that starts with a $dollar sign";
$text = str_replace("\$word",$correct,$text); 
```

如果我回显 $text，它会说：你好，这是一个以美元符号开头的游戏示例。效果很好。现在我希望能够将任何以美元符号开头的单词更改为游戏，这样它将更改所有以 $ 开头的单词并将它们变成单词“游戏”有什么想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-28T02:30:21.283

一个简单的正则表达式应该可以解决问题：

```
$text = preg_replace("#\$[^\b\s]+#", $correction, $text); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-28T02:30:25.573

为此，您需要一个正则表达式：

```
$text = preg_replace( '/\$[a-z]+/i', 'game', $text); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-28T02:29:44.987

使用正则表达式和 preg_replace

```
$correction = "game";
$text ="Hello this is an example of a \$word that starts with a \$dollar sign";
$text = preg_replace('/\$\w+/', $correction, $text);
print $text; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-28T02:32:49.533

像这样：

```
preg_replace("/(\w*)$([a-z]+)/i", "$1$correction", $text); 
```

注意：我没有尝试过，所以我的正则表达式可能有点缺陷。

# image - 在 IE 7-9 中，容器在第二个块之后开始重叠/收缩

> ID：11697762
> 
> 赞同：0
> 
> 时间：2012-07-28T02:28:54.067
> 
> 标签：image, internet-explorer, css-float

首先，图像消失了，我通过放置`<meta http-equiv="X-UA-Compatible" content="IE=EmulateIE7" />`在标题中进行了修复，这很好！

现在图像正在显示，但在第二个块[[IMG]](http://img220.imageshack.us/img220/1146/clipboard02o.png)之后重叠。我很难解决这个问题，因为无法安装 IE 7-9，我依赖于 netrenderer 等模拟器 :(

标头`<!DOCTYPE html>`尝试了其他一些，但没有任何变化。

容器是这样的：

```
<div class="post-container-odd" >
<h2><a href="http://site.com/destinos/africa-ilhas/">África &amp; Ilhas</a></h2>
<div class="thumbnail"><a href="http://site.com/destinos/africa-ilhas"  title="Ilhas Maldivas"><img src="http://site.com/wp-content/uploads/2012/07/maldivas-22-380x200.jpg" title="" alt=""/></a></div>
</div>

<div class="post-container-even" >
<h2><a href="http://site.com/destinos/america-do-norte-caribe/">América do Norte &amp; Caribe</a></h2>
<div class="thumbnail"><a href="http://site.com/destinos/america-do-norte-caribe"  title="Chicago"><img src="http://site.com/wp-content/uploads/2012/07/chicago-29-380x200.jpg" title="" alt=""/></a></div>
</div> 
```

而 CSS 就是这样的：

```
.post-container-even{float:left;margin:0 0 20px 0;display:table}
.post-container-odd {float:left; margin: 0 5px 20px 0} 
```

添加了一个`ie.css`（解决了一些问题但仍然重叠）：

```
.post-container-odd { float:left; margin: 0 5px 30px 0; display:inline;}

.post-container-even{ float:left; margin:0 0 30px 0; display:inline; clear: left}

.post-container-even img, .post-container-odd img { height: 200px ; width: 380px ; display:block; clear: both}

.post-container-even .thumbnail, .post-container-odd .thumbnail { height: 200px ; width: 380px ;  } 
```

也许`<div style="clear:both"></div>`每两个iten放置一个可以解决，但这很蹩脚？

谢谢你的帮助

**笔记：**

没有`ie.css`说明：[图片](http://img198.imageshack.us/img198/8104/withoutq.png)

现在，与`ie.css`：[图片](http://img220.imageshack.us/img220/1146/clipboard02o.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T15:13:26.550

谢谢，我通过放置解决了：

```
zoom: 1; *display:inline; in image containers. 
```

# cakephp - 前一个值相同时如何空白列值

> ID：11697764
> 
> 赞同：0
> 
> 时间：2012-07-28T02:29:21.363
> 
> 标签：cakephp

作为一个小组发现的结果，我得到了类似的东西

```
id   name                               date            project
2898 Noemi Araceli Farre Gutierrez      2012-07-23      mr12249-Northgate Field  
2898 Noemi Araceli Farre Gutierrez      2012-07-24      mr12251-Marketon Field  
2898 Noemi Araceli Farre Gutierrez      2012-07-25      mr12251-Marketon Field  
2898 Noemi Araceli Farre Gutierrez      2012-07-26      mr12249-Northgate Field 
3047 Mauricio Javier García             2012-07-22      mr12249-Northgate Field  
3047 Mauricio Javier García             2012-07-23      mr12251-Marketon Field  
3047 Mauricio Javier García             2012-07-26      mr12251-Marketon Field 
```

在我看来，我需要避免重复 id 和 name，并显示如下：

```
id   name                               date            project
2898 Noemi Araceli Farre Gutierrez      2012-07-23      mr12249-Northgate Field  
                                        2012-07-24      mr12251-Marketon Field  
                                        2012-07-25      mr12251-Marketon Field  
                                        2012-07-26      mr12249-Northgate Field 
3047 Mauricio Javier García             2012-07-22      mr12249-Northgate Field  
                                        2012-07-23      mr12251-Marketon Field  
                                        2012-07-26      mr12251-Marketon Field 
```

我可以通过比较视图中 foreach 循环期间的当前值和先前值来做到这一点，但在我看来，必须有更好的蛋糕方式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T05:11:16.480

没有“更好的蛋糕方式”。这是一个简单的 PHP 逻辑。

```
$currentName = null;
foreach ($results as $row) {
    if ($row['name'] != $currentName) {
        $currentName = $row['name'];
        echo $currentName;
    }
    else {
        // Do not display anything
        // you may need to echo some tab characters or something to keep
        // the table formatted
    }
} 
```

# javascript - 让用户在浏览器扩展中记录快捷方式

> ID：11697766
> 
> 赞同：2
> 
> 时间：2012-07-28T02:29:34.030
> 
> 标签：javascript, google-chrome, browser, google-chrome-extension, crossrider

有没有一种简单的方法可以将这种选项添加到浏览器扩展中（我正在使用 crossrider 框架来构建跨浏览器扩展）？

用户只需键入他们想要的快捷方式并单击保存按钮

这是来自`send to kindle`chrome 扩展的屏幕截图

![捷径](../Images/353817dbfdcf273ee8fd4a47210e3304.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-28T16:39:31.203

使用 crossrider API，您可以添加键盘快捷键

```
appAPI.shortcut.add('ALT+CTRL+X', function (event) {
    alert('Alt+Ctrl+X');
}, {type: 'keydown'}); 
```

编辑：

您还可以将用户快捷方式首选项存储在扩展数据库中：

```
appAPI.db.set('user_shortcuts', ['Alt+Ctrl+X', 'Ctrl+F12']); 
```

# php - 使用 PDO 设置 LIMIT 时忽略数据库重复项

> ID：11697769
> 
> 赞同：2
> 
> 时间：2012-07-28T02:29:51.237
> 
> 标签：php, mysql, pdo, duplicates, limit

当我将设置“LIMIT 0, 50”，然后设置“LIMIT 50, 50”，然后设置 LIMIT 时，我想忽略数据库中的重复项.....我只需要在表的 1 列上扫描重复项，不是一次所有的列。我无法合并重复项，因为它们在某种程度上是不同的：这些重复项具有不同的价格。

更准确地说，我需要显示这些物品的清单，但要在右侧显示它们的不同价格。

我需要每页有一个精确的数字（50），所以我不能加载更少然后转到下一页。因此，我可以从一开始就加载更多（如果我在远页上，则更改最大和以前的偏移量），如果我忽略重复项，我将每页恰好 50 个，并且我会得到很好的页数显示在最后。

我是 PHP 的初学者，我不知道该怎么做。也许预扫描所有表，然后开始编写我的代码，通过灵活使用我的扫描变量 LIMIT 和所有内容？我需要什么功能？如何 ？

否则，做一些预编程的东西或我不知道它存在的php函数可以解决这个问题吗？或者我真的需要头痛xD

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T02:34:51.320

也许您可以按项目分组，并用于`GROUP_CONCAT`显示不同的价格表？这样你仍然可以使用`LIMIT 50`. 如果价格列是数字，则将其转换为 VCHAR。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T02:35:07.750

我不完全确定你在问什么，但我认为你可能想要按照这些思路做一个汇总声明：

```
select
    itemID,
    group_concat(itemPrice)
from
    yourTable
group by
    itemID
limit 50 
```

这将带回一个包含 50 个项目的列表和第二列，其中所有价格都分组在一起。然后在您的 PHP 代码中，您可以`explode()`将第二列保持原样。

编辑：如果您选择每个字段，则不能使用聚合函数。如果您想选择其他不会有所不同的列，请将它们添加到 select 和 group by 部分，如下所示：

```
select
    itemID,
    itemName,
    itemSomething,
    itemSomethingElse,
    group_concat(itemPrice)
from
    yourTable
group by
    itemID,
    itemName,
    itemSomething,
    itemSomethingElse
limit 50 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-28T03:14:55.347

我承认我`group_concat()`从其他答案中借用了这个功能:)

从[文档](http://dev.mysql.com/doc/refman/5.5/en/union.html)中阅读本段后：

```
The default behavior for UNION is that duplicate rows are removed from the result.
The optional DISTINCT keyword has no effect other than the default because it also
specifies duplicate-row removal. With the optional ALL keyword, duplicate-row removal
does not occur and the result includes all matching rows from all the SELECT statements. 
```

假设下表 ( `testdb.test`)：

```
ID  Name    Price
1   Item-A  10
2   Item-A  15
3   Item-A  9.5
4   Item-B  5
5   Item-B  4
6   Item-B  4.5
7   Item-C  50
8   Item-C  55
9   Item-C  40 
```

您可以分页此表的行（9 行）或组（3 组，基于项目的名称）。

如果您想根据项目组对项目进行分页，这应该会有所帮助：

```
SELECT 
    name, group_concat(price)
FROM
    testdb.test
GROUP BY name
LIMIT 1 , 3 
UNION SELECT 
    name, group_concat(price)
FROM
    testdb.test
GROUP BY name
LIMIT 0 , 3; -- Constant 0, range is the same as the first limit's 
```

如果您想根据所有项目对项目进行分页（我认为这不是您所要求的，但以防万一它对其他人有帮助），这应该会有所帮助：

```
SELECT 
    name, price
FROM
    testdb.test
LIMIT 1 , 5 
UNION SELECT 
    name, price
FROM
    testdb.test
LIMIT 0 , 5; -- Constant 0, range is the same as the first limit's 
```

需要注意的一件非常重要的事情是您将如何修改限制。第一个限制是您的关键，您可以从您想要的任何限制开始，只要它是 <=`count(*)`但您必须具有与第二个限制相同的范围（即`3`在第一个示例和`5`第二个示例中）。第二个限制总是从`0`如图所示开始。

我喜欢在这方面工作，希望这会有所帮助。

# mvcsitemapprovider - 在代码中将节点添加到 mvcsitemap

> ID：11697779
> 
> 赞同：0
> 
> 时间：2012-07-28T02:31:57.563
> 
> 标签：mvcsitemapprovider, asp.net-mvc-sitemap

我正在构建一个简单的 CMS，它将导航/站点地图/站点结构存储在数据库表中。当应用程序启动时，我可以根据该表中的数据动态创建我的站点地图节点。

我遇到的问题是，在应用程序运行时将新记录添加到表中或更新现有记录时，我需要重建站点地图结构。看起来很简单，但我不知道怎么做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T23:41:42.337

没有对即时清除/重建站点地图的内置支持。
但是您可以很容易地自己实现这一点，方法是实现一个从 派生的自定义站点地图提供程序`MvcSiteMapProvider.DefaultSiteMapProvider`，并使用受保护的方法创建一个用于清除缓存的`Clear()`方法。例子：

```
public class CustomSiteMapProvider : DefaultSiteMapProvider
{
  public void ClearSiteMap()
  {
    Clear();
  }
} 
```

我还没有尝试过，但它应该可以工作。请记住将 web.config 文件更改为使用自定义站点地图提供程序而不是`DefaultSiteMapProvider`.

# c# - 将 varchar 数据类型转换为 datetime 数据类型导致值超出范围

> ID：11697780
> 
> 赞同：0
> 
> 时间：2012-07-28T02:32:02.440
> 
> 标签：c#, asp.net, visual-studio

当我尝试运行我的程序时出现错误：

> 将 varchar 数据类型转换为 datetime 数据类型导致值超出范围。

我的 select 语句有什么问题吗？

```
 int month=0;

    if (RadioButtonList1.SelectedIndex == 0)
    { month = 1; }
    else if(RadioButtonList1.SelectedIndex == 1)
    { month = 2; }
    else if(RadioButtonList1.SelectedIndex == 2)
    { month = 3; }

    SqlCommand cmd = new SqlCommand("SELECT thDate, thType, thAmountIn, thAmountOut from [Transaction] Where thDate > dateadd(month, -" + month + ", GETDATE())", myConnection);
    da = new SqlDataAdapter(cmd);
    myConnection.Open();
    da.Fill(ds, "[Transaction]");
    myConnection.Close();
    if (!IsPostBack)
    {
        ViewState["vs_Transaction"] = (DataTable)ds.Tables["Transaction"];
        GridView1.DataSource = ds.Tables["Transaction"];
        GridView1.DataBind(); 
```

下面是我的 thDate 数据库表

![在此处输入图像描述](../Images/d1e2d752f83344a8a0affd12c88a06da.png)

![在此处输入图像描述](../Images/6204ae901bae9a85ab0b051b35106d50.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T04:08:30.153

问题是您将数据存储为`Varchar`并填充`datatable`，这可能会期望`Datetime`. 您应该在两个地方`cast`的值：`query`

*   在`select`, 作为返回`Date`
*   在`Where`, 因为你在比较 a`Date`和 a `Varchar`。

所以，你的`select`条款将是

```
SqlCommand cmd = new SqlCommand("SELECT Convert(datetime, thDate,103) as thDate, thType, thAmountIn, thAmountOut from [Transaction] Where Convert(datetime, thDate,103)> dateadd(month, -" + month + ", GETDATE())", myConnection); 
```

# knockout.js - 在淘汰赛js中使用对象属性检查绑定

> ID：11697782
> 
> 赞同：0
> 
> 时间：2012-07-28T02:32:24.713
> 
> 标签：knockout.js

[我第一次描述这个问题的尝试很清楚。我以清晰的名义对它进行了重大修改。我希望我没有惨败……再一次。]

我正在尝试使用敲除设置主/详细信息视图，其中详细信息窗格包含复选框列表。我有一个 User 对象数组，每个对象又都有一个 UserPermission 对象数组，其中 PermissionId 属性应该确定是否选中了复选框。

因此，简而言之：有一个用户主列表，您可以从中选择一个来查看详细信息。在详细信息窗格中，我有一个复选框列表（从可用权限列表生成）。是否选中给定复选框应由与当前用户关联的 UserPermission 对象数组中匹配 PermissionId 的存在来确定。

我的问题是 - 如何让复选框使用 user.UserPermissions.PermissionId 进行检查绑定？

[到目前为止](http://jsfiddle.net/szcp2/3/)，这是我尝试的一个 jsfiddle，这是我尝试过的[另一种方法](http://jsfiddle.net/R87Cg/2/)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T23:21:12.197

经过一番修修补补，我有一个解决方案给你，虽然这不是一个微不足道的改变。

我尝试了一些调整你所拥有的东西，但很明显我需要以不同的方式处理这个问题。

因此，我首先将视图模型的填充与视图模型的定义分开。

这是视图模型定义：

```
var AppViewModel = function() {
    var self = this;

    //list of client users
    self.users = ko.observableArray();

    //list of permissions available to this client
    self.permissions = ko.observableArray();

    //user to display in details area
    self.currentUser = ko.observable();

    //select user from the master list
    self.selectUser = function(u) {
        self.currentUser(u);
    };
} 
```

这与您所拥有的相同，只是该函数不希望传入数据。

这个视图模型的绑定现在看起来像这样：

```
var viewModel = new AppViewModel();
ko.applyBindings(viewModel);
addPermissions(initialData.PermissionList);
addUserAccounts(initialData.UserList); 
```

当然，`addPermissions`and`addUserAccounts`函数的细节在我得到的小提琴中，稍后我会提供指向它的链接。

让我首先讨论是否选中复选框的绑定解决方案。

我查看[了有关使用 checked 的文档](http://knockoutjs.com/documentation/checked-binding.html)，我注意到在其中一个示例中，绑定值是一个数组。

因此，为了利用这一点，我创建了一个`UserAccount`类：

```
var UserAccount = function() {
    var self = this;

    self.id = ko.observable();
    self.email = ko.observable();
    self.clientId = ko.observable();
    self.firstName = ko.observable();
    self.lastName = ko.observable();
    self.createdBy = ko.observable();
    self.userPermissions = ko.observableArray();
}; 
```

当 a`UserAccount`添加到视图模型时，它使用以下函数：

```
var addUserAccount = function(data) {
    var userAccount = new UserAccount();
    userAccount.id(data.UserId);
    userAccount.email(data.UserEmail);
    userAccount.clientId(data.ClientId);
    userAccount.firstName(data.FirstName);
    userAccount.lastName(data.LastName);
    userAccount.createdBy(data.CreatedBy);

    for(var i = 0; i < data.UserPermissions.length; i++) {
        var permissionIdAsString = String(data.UserPermissions[i].PermissionId);
        userAccount.userPermissions.push(permissionIdAsString);
    }
    viewModel.users.push(userAccount);
}; 
```

请注意此函数中的 for 循环，它只是将 UserPermissions 数组中的每个 PermissionId 值添加`userPermissions`到`UserAccount`.

另请注意，现在每个可用权限都由以下`Permission`类的实例表示：

```
var Permission = function() {
    var self = this;

    self.id = 0;
    self.name = '';
    self.description = '';
}; 
```

[这些`Permission`属性的值不会在这里改变，所以不需要制作那些 observables。]

现在，鉴于所有这些背景，这就是我绑定复选框的方式，以便检查正确的复选框：

```
<ul data-bind="foreach: $root.permissions">
    <li>
        <label>
            <input type="checkbox" 
                   data-bind="value: id, checked: $parent.userPermissions" />
                   &nbsp;<span data-bind="text:name" />
        </label>
    </li>
</ul> 
```

此代码出现在`with: currentUser`块内，所以`$parent` *是* `currentUser`

这是包含我的解决方案的小提琴的链接：http: [//jsfiddle.net/jimmym715/eByAa/](http://jsfiddle.net/jimmym715/eByAa/)

哦，我在视图中添加了以下代码，以确认`userPermissions`每次选中/取消选中复选框都会更新。

我希望这个解决方案适合您的需求。如果您有任何问题，请告诉我。

# c - 赋值从没有强制转换的指针生成整数 [-Werror]

> ID：11697784
> 
> 赞同：3
> 
> 时间：2012-07-28T02:32:43.783
> 
> 标签：c, int

```
// set all values in the hash table to null
for(int i = 0; i < HASH_SIZE; i++)
{
    hashtable[i] = NULL;
} 
```

我不断收到此错误消息以响应 hashtable[i]：

> 赋值从没有强制转换的指针生成整数 [-Werror]

为什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-28T02:40:15.367

If`hashtable`是一个整数数组，则`hashtable[i]`需要一个整数并且`NULL`是一个指针。

因此，您尝试将指针值分配给整数变量（没有强制转换），这通常只是一个警告，但因为您`-Werror`所有的警告都变成了错误。

只需使用`0`而不是`NULL`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T11:56:22.413

NULL 定义`(void*)0`为`stddef.h`

```
#ifndef _LINUX_STDDEF_H
#define _LINUX_STDDEF_H

#undef NULL
#if defined(__cplusplus)
#define NULL 0
#else
#define NULL ((void *)0)
#endif

#endif 
```

如果哈希表是整数数组，比如

```
#include <stdio.h>
#define HASH_SIZE 100
int main()
{
int i = 0, hashtable[HASH_SIZE];
for(i = 0; i < HASH_SIZE; i++)
{
    hashtable[i] = NULL;
}
return 0;
} 
```

这`warning: assignment makes integer from pointer without a cast` 将被显示。

# ruby-on-rails - 为什么我的 Bootstrap 下拉菜单不起作用？

> ID：11697789
> 
> 赞同：11
> 
> 时间：2012-07-28T02:34:13.633
> 
> 标签：ruby-on-rails, twitter-bootstrap

在我的 Rails 应用程序中，我有以下下拉菜单代码：

```
<header class="navbar navbar-fixed-top">
  <div class="navbar-inner">
<div class="container">
    <nav>
            <ul class="nav pull-right">
                <li><%= link_to "Home", root_path %></li> 
            <% if signed_in? %>
                <li id="fat-menu" class="dropdown">
                    <a href="#" class="dropdown-toggle" data toggle="dropdown">
                        Account <b class="caret"></b>
                    </a>
                <ul class="dropdown-menu">
                        <li><%= link_to "Settings", edit_user_path(current_user) %></li>
                        <li class="divider"></li>
                        <li>
                            <%= link_to "Sign out", signout_path, method: "delete" %>
                        </li>
                    </ul>
                </li>
            <% else %>
                <li><%= link_to "Sign in", signin_path %>
            <% end %>
            </ul>
        </nav>
  </div>
</div>
</header> 
```

在我的 application.js 文件中，我有以下代码：

```
 //= require bootstrap 
```

我不知道为什么下拉菜单不起作用，也不知道如何修复它。几天前，它工作正常，现在它不再正常工作。谢谢你的帮助！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-28T18:48:37.177

我从之前的 StackOverflow 问题中找到了答案：

[twitter bootstrap下拉突然不起作用](https://stackoverflow.com/questions/10218587/twitter-bootstrap-drop-down-suddenly-not-working)

我必须将 //= require jquery 放在需要引导程序的代码行下方，然后它就起作用了！

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-28T05:12:18.367

我测试了您的 HTML 代码，它运行良好。

首先，确保您首先加载 jQuery：

```
//= require jquery
//= require bootstrap 
```

此外，您必须通过 javascript 调用下拉列表：

```
$('.dropdown-toggle').dropdown() 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-08-18T19:11:13.613

解决方案在于您导入 javascript 依赖项的顺序。

这是我最初在我的`application.js`

```
//= require jquery
//= require jquery_ujs
//= require bootstrap
//= require bootstrap-sprockets
//= require turbolinks
//= require_tree 
```

当我删除时，`bootstrap-sprockets`我的下拉菜单起作用了。但是，我不想删除`bootstrap-sprockets`. 所以我的新订单看起来像这样；

```
//= require bootstrap-sprockets
//= require jquery
//= require jquery_ujs
//= require bootstrap
//= require turbolinks
//= require_tree . 
```

然后，为了安全起见，我必须通过运行以下命令来清理和预编译资产；

```
rake assets:clean
bundle exec rake assets:precompile 
```

这对我有用。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-03-28T14:17:33.917

我在默认 Rails 和[twitter-bootstrap-rails](https://github.com/seyhunak/twitter-bootstrap-rails) gem 安装中遇到了同样的问题。

直接调用下拉初始化确实有效，但对我来说似乎是一种解决方法。所以，我继续寻找答案，并找到了一个看起来更合适的答案：

> 我已经解决了这个问题。我在 users.js.coffee 中添加以下代码：

```
jQuery ->
  $('.dropdown-toggle').dropdown() 
```

[在这里](https://www.ruby-forum.com/topic/5303122#1153710)找到了解决方案。因此，我将此代码添加到*app/assets/javascripts/bootstrap.js.coffee*，因此其中的最终代码如下所示：

```
jQuery ->
  $("a[rel~=popover], .has-popover").popover()
  $("a[rel~=tooltip], .has-tooltip").tooltip()
  $('.dropdown-toggle').dropdown() 
```

在导航栏中的这个下拉菜单开始完全按预期工作之后。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-02-21T15:41:53.913

我整天都遇到这个问题，但终于能够解决它。我应用了上面的解决方案（更改顺序）并且下拉菜单有效。但是，我注意到在控制台中存在错误（未捕获的 ReferenceError：jQuery 未定义），因为 bootstrap-sprockets 在 jQuery 之前被调用。我在[这里找到了适合我的解决方案](https://github.com/twbs/bootstrap-sass/issues/714)

基本上，我在 application.js 中的必需项下面包含了以下代码：

```
 //= require jquery
   //= require tether
   //= require jquery_ujs
   //= require bootstrap
   //= require bootstrap-sprockets
   //= require turbolinks
   //= require_tree .

   $(document).ready(function(){
       $('.dropdown-toggle').dropdown();
   }); 
```

对我来说，这就像一个魅力。希望对某人有所帮助！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-08-24T17:34:34.697

我遇到了同样的问题，并`//= require bootstrap`从我`application.js`为我工作的工作中删除。我希望这对某人也有帮助！

# sql - 我有一个数据库以及多个相同日期和相关金额的记录

> ID：11697796
> 
> 赞同：0
> 
> 时间：2012-07-28T02:35:13.387
> 
> 标签：sql, sql-server

我有一个数据库，有多个相同日期和相关金额的记录，但我只想要一条记录，即与**日期相关的总金额**

```
No.       Date                   name   amt
----    -----------------------  -----  ----
4   2012-07-27 10:47:50.000  zerox  15  
5   2012-07-27 12:22:16.000  bag    30  
6   2012-07-28 10:47:50.000  zerox  25  
7   2012-07-28 12:22:16.000  bag    30 
```

我要这个：

```
-----------------
date         totamt
----------   -------
2012-07-27   45
2012-07-28   55 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T02:38:07.657

```
select cast([date] as Date) as [Date], 
       sum(amt) TotAmt
from YourTable
group by cast([date] as Date) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T02:37:37.547

假设您的“日期”列没有妨碍，以下应该有效。

```
SELECT
     CAST(date AS DATE),
     SUM(amt) AS totamt
FROM TableName
GROUP BY CAST(date AS DATE) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-28T05:32:45.153

```
create table orders(Num int,Date datetime,name varchar(100),amt float)
INSERT INTO orders
VALUES(4,'2012-07-27 10:47:50.000','zerox',15),
(5,'2012-07-27 12:22:16.000','bag',    30),  
(6,'2012-07-28 10:47:50.000','zerox',  25),    
(7,'2012-07-28 12:22:16.000','bag',    30)  

select cast(date as date) date,SUM(amt) sumAmt from orders
group by cast(date as date) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-28T09:00:47.830

嗨试试这个新的解决方案：

```
select convert(varchar,date,101) date,SUM(amt) sumAmt from orders
group by convert(varchar,date,101) 
```

# linux - 编译Linux内核时输出的CC、LD、CC[M]等代码是什么？

> ID：11697800
> 
> 赞同：18
> 
> 时间：2012-07-28T02:37:15.063
> 
> 标签：linux, linux-kernel, makefile, kbuild

在从头开始编译 Linux 时，我意识到编译时会出现编译代码。

例如 CC 文件名、LD 文件名、CC[M] 文件名。

这些代码是什么意思？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-07-28T06:07:21.867

不同的标记指定以下内容

*   [CC] - 将 C 文件编译成指定的目标文件。目标文件包含该 .c 文件的架构汇编代码。因为它也可能引用其范围之外的部分。例如在另一个 .c 文件中调用另一个函数。函数调用在目标文件中保持打开状态，稍后将包含在链接器中。所以
*   [LD] 是将编译后的对象链接在一起的过程，并将编译器保持打开的函数调用连接起来。但是，许多部分作为内核的核心部分链接在一起，而有些部分则被遗漏了。因此你看到
*   [CC (M)] 用于那些在运行时被编译为点加载到内核中的部分。但是它们在内核的整体部分中没有链接在一起。但是可以在内核启动时插入。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2015-08-15T11:16:37.993

让我们举一个具体的例子，看看它在内核 4.1 中做了什么，例如`IHEX`.

**查找代码的作用**

赶紧跑：

```
make SHELL='sh -x' 
```

这是如何工作的：[https ://stackoverflow.com/a/32010960/895245](https://stackoverflow.com/a/32010960/895245)

如果我们 grep 的输出`IHEX`，我们会找到以下行：

```
+ echo   IHEX    firmware/e100/d101s_ucode.bin
  IHEX    firmware/e100/d101s_ucode.bin
+ objcopy -Iihex -Obinary /home/ciro/git/kernel/src/firmware/e100/d101s_ucode.bin.ihex firmware/e100/d101s_ucode.bin 
```

所以我们得出的结论是`IHEX`a `objcopy -Iihex`。

**查找代码的定义位置**

每个内核命令都必须定义为：

```
quiet_cmd_ihex  = IHEX    $@
      cmd_ihex  = $(OBJCOPY) -Iihex -Obinary $< $@

$(obj)/%: $(obj)/%.ihex
        $(call cmd,ihex) 
```

使详细设置（例如`V=1`和`make -s`）起作用。

所以一般来说，你只需要

```
git grep 'cmd.* = CODE' 
```

找到`CODE`。

我已经详细解释了这个系统是如何工作的：[https ://stackoverflow.com/a/32023861/895245](https://stackoverflow.com/a/32023861/895245)

**获取所有代码列表**

```
make | grep -E '^  ' | sort -uk1,1 
```

**抄送和抄送 [M]**

定义在`scripts/Makefile.build`：

```
quiet_cmd_cc_o_c = CC $(quiet_modtag)  $@
      cmd_cc_o_c = $(CC) $(c_flags) -c -o $@ $< 
```

并且`[M]`来自[目标特定变量](https://stackoverflow.com/questions/32023711/what-is-the-meaning-of-a-variable-defined-on-the-same-line-of-a-rule-targets-pre)：

```
$(real-objs-m)        : quiet_modtag := [M]
$(real-objs-m:.o=.i)  : quiet_modtag := [M]
$(real-objs-m:.o=.s)  : quiet_modtag := [M]
$(real-objs-m:.o=.lst): quiet_modtag := [M]
$(obj-m)              : quiet_modtag := [M] 
```

然后通过以下方式调用它：

```
$(obj)/%.o: $(src)/%.c $(recordmcount_source) FORCE
    [...]
    $(call if_changed_rule,cc_o_c)

define rule_cc_o_c
    [...]
    $(call echo-cmd,cc_o_c) $(cmd_cc_o_c);                \ 
```

其中`if_changed_rule`定义`scripts/Kbuild.include`为：

```
if_changed_rule = $(if $(strip $(any-prereq) $(arg-check) ),                 \
    @set -e;                                                             \
    $(rule_$(1))) 
```

并`Kbuild.include`包含在顶级 Makefile 中。

**LD**

有几个版本，但最简单的似乎是：

```
quiet_cmd_link_o_target = LD      $@
cmd_link_o_target = $(if $(strip $(obj-y)),\
              $(LD) $(ld_flags) -r -o $@ $(filter $(obj-y), $^) \
              $(cmd_secanalysis),\
              rm -f $@; $(AR) rcs$(KBUILD_ARFLAGS) $@)

$(builtin-target): $(obj-y) FORCE
    $(call if_changed,link_o_target) 
```

并在`scripts/Kbuild.include`：

```
# Execute command if command has changed or prerequisite(s) are updated.
#
if_changed = $(if $(strip $(any-prereq) $(arg-check)),                       \
    @set -e;                                                             \
    $(echo-cmd) $(cmd_$(1));                                             \
    printf '%s\n' 'cmd_$@ := $(make-cmd)' > $(dot-target).cmd) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-28T05:14:31.997

它应该显示：

*   `CC`编译内核的核心部分时
*   `CC [M]`编译模块时
*   `LD`链接时

# css - 如何使谷歌地图在页眉和页脚之间跨越 100% 的剩余高度？

> ID：11697805
> 
> 赞同：0
> 
> 时间：2012-07-28T02:37:48.683
> 
> 标签：css, wordpress, google-maps, height

我在我的 wordpress 网站上设置了谷歌地图：

[http://drummersdatabase.com/map/](http://drummersdatabase.com/map/)（目前设置为 500px 高度作为临时解决方法）

我设法让地图跨越 100% 的宽度，而不是剩余的高度。无论用户的分辨率如何，我基本上都想确保没有滚动条。

当我设置地图高度和/或它包含 div css (class="gridfull") 100%; 它似乎将其解释为 100px。

有什么想法可以解决这个问题吗？

谢谢，

戴夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T08:24:23.693

当您要求地图高度为 100% 时，它不知道高度为 100%。

如果您将 HTML 和 BODY 标记设置为 100% 的高度，这将为您提供一个起点。

然后，如果您只有页面上的地图并告诉它高度为 100%，那么它确实会填充页面高度的 100%。

但是，您有一个页眉和一个页脚，它们也占用空间，所以为了做您想做的事情，您还必须将页眉和页脚设置为基于百分比的高度。

看看小提琴，看看我在说什么：

[http://fiddle.jshell.net/Mm3TT/](http://fiddle.jshell.net/Mm3TT/)

我能想到的唯一另一种方法是使用 javascript 计算用户浏览器的高度，然后从中减去页眉和页脚的高度，并将地图的高度设置为剩下的高度。

# javascript - 我可以将数据存储在 Titanium（嵌套数组）中的什么位置？

> ID：11697806
> 
> 赞同：0
> 
> 时间：2012-07-28T02:37:58.953
> 
> 标签：javascript, android, titanium

我正在使用 Titanium 开发 Android 应用程序。

我有一个嵌套的数据列表，我当前在应用程序启动时存储在内存中，带有`Titanium.App.Properties.setList`. 我知道我可以使用 JSON 对其进行编码并将其存储在手机上，而不是内存中。然后我只能在需要时访问它。

但是，我在哪里存储这个 JSON 以及如何访问它？我需要“随机访问”，因为多个地方访问数据。

数据是只读的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T16:20:58.123

Ti.App.Properties 是一个持久存储。您只需要在对象更改时写入它，而不是每次启动。它不是内存存储。此外，JSON 是一个字符串。所以用 Ti.App.Properties.setString 存储它。

# bash - Grep 跨 Hadoop 文件系统中的多个文件

> ID：11697810
> 
> 赞同：20
> 
> 时间：2012-07-28T02:38:50.683
> 
> 标签：bash, shell, unix, hadoop, grep

我正在使用 Hadoop，我需要在我的 Hadoop 文件系统中找到大约 100 个文件中的哪些文件包含某个字符串。

我可以像这样看到我想搜索的文件：

```
bash-3.00$ hadoop fs -ls /apps/mdhi-technology/b_dps/real-time 
```

..它返回几个这样的条目：

```
-rw-r--r--   3 b_dps mdhi-technology 1073741824 2012-07-18 22:50 /apps/mdhi-technology/b_dps/HADOOP_consolidated_RT_v1x0_20120716_aa
-rw-r--r--   3 b_dps mdhi-technology 1073741824 2012-07-18 22:50 /apps/mdhi-technology/b_dps/HADOOP_consolidated_RT_v1x0_20120716_ab 
```

如何找到其中哪些包含字符串`bcd4bc3e1380a56108f486a4fffbc8dc`？一旦我知道，我可以手动编辑它们。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-07-28T02:44:02.127

这是一个 hadoop “文件系统”，而不是 POSIX 系统，所以试试这个：

```
hadoop fs -ls /apps/hdmi-technology/b_dps/real-time | awk '{print $8}' | \
while read f
do
  hadoop fs -cat $f | grep -q bcd4bc3e1380a56108f486a4fffbc8dc && echo $f
done 
```

这应该可行，但它是串行的，因此可能很慢。如果您的集群可以承受热量，我们可以并行化：

```
hadoop fs -ls /apps/hdmi-technology/b_dps/real-time | awk '{print $8}' | \
  xargs -n 1 -I ^ -P 10 bash -c \
  "hadoop fs -cat ^ | grep -q bcd4bc3e1380a56108f486a4fffbc8dc && echo ^" 
```

注意`-P 10`选项`xargs`：这是我们将并行下载和搜索的文件数量。从低处开始并增加数量，直到磁盘 I/O 或网络带宽饱和，无论您的配置是否相关。

**编辑**：鉴于您使用的是 SunOS（有点脑残），请尝试以下操作：

```
hadoop fs -ls /apps/hdmi-technology/b_dps/real-time | awk '{print $8}' | while read f; do hadoop fs -cat $f | grep bcd4bc3e1380a56108f486a4fffbc8dc >/dev/null && echo $f; done 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-09T01:03:40.757

如果您只有两个 1 GB 文件，则使用`hadoop fs -cat`（或更通用的）可能是可行的。`hadoop fs -text`对于 100 个文件，尽管我会使用[流式 API](http://hadoop.apache.org/docs/current/hadoop-streaming/HadoopStreaming.html)，因为它可以用于临时查询，而无需借助完整的 mapreduce 作业。例如，在您的情况下创建一个脚本`get_filename_for_pattern.sh`：

```
#!/bin/bash
grep -q $1 && echo $mapreduce_map_input_file
cat >/dev/null # ignore the rest 
```

请注意，您必须阅读整个输入，以避免出现`java.io.IOException: Stream closed`异常。

然后发出命令

```
hadoop jar $HADOOP_HOME/hadoop-streaming.jar\
 -Dstream.non.zero.exit.is.failure=false\
 -files get_filename_for_pattern.sh\
 -numReduceTasks 1\
 -mapper "get_filename_for_pattern.sh bcd4bc3e1380a56108f486a4fffbc8dc"\
 -reducer "uniq"\
 -input /apps/hdmi-technology/b_dps/real-time/*\
 -output /tmp/files_matching_bcd4bc3e1380a56108f486a4fffbc8dc
hadoop fs -cat /tmp/files_matching_bcd4bc3e1380a56108f486a4fffbc8dc/* 
```

在较新的发行版`mapred streaming`中，而不是`hadoop jar $HADOOP_HOME/hadoop-streaming.jar`应该工作。在后一种情况下，您必须`$HADOOP_HOME`正确设置才能找到 jar（或直接提供完整路径）。

对于更简单的查询，您甚至不需要脚本，只需将命令`-mapper`直接提供给参数即可。但是对于任何稍微复杂的事情，最好使用脚本，因为获得转义权可能是一件苦差事。

如果您不需要减少阶段`NONE`，请为相应的`-reduce`选项提供符号参数（或仅使用`-numReduceTasks 0`）。但是在您的情况下，为了将输出合并到一个文件中，有一个减少阶段很有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-08-24T05:20:42.780

您正在寻找对 hdfs 文件夹应用 grep 命令

```
hdfs dfs -cat /user/coupons/input/201807160000/* | grep -c null 
```

这里 cat 递归遍历文件夹中的所有文件，我已应用 grep 来查找计数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-06-24T14:01:44.130

要在 hdfs 位置递归查找具有任何扩展名的所有文件：

```
hadoop fs -find  hdfs_loc_path  -name ".log" 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-07-26T21:18:00.027

```
hadoop fs -find /apps/mdhi-technology/b_dps/real-time  -name "*bcd4bc3e1380a56108f486a4fffbc8dc*"

hadoop fs -find /apps/mdhi-technology/b_dps/real-time  -name "bcd4bc3e1380a56108f486a4fffbc8dc" 
```

# git - 更新 Git 存储库

> ID：11697813
> 
> 赞同：1
> 
> 时间：2012-07-28T02:39:18.720
> 
> 标签：git, github

什么是更新 GitHub 存储库的正确终端命令，该存储库的文件本地存储在我的 Mac 机器上？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T02:47:20.877

`git push <remote> <branch>`. 例如：

```
git push -u origin master 
```

如果您尚未设置遥控器，请使用`git remote add <name> <uri>`. 例如：

```
git remote add origin https://github.com/username/example.git 
```

# qt - 如何用QDir连接绝对路径和相对路径？

> ID：11697817
> 
> 赞同：24
> 
> 时间：2012-07-28T02:40:31.823
> 
> 标签：qt, filenames, relative-path, absolute-path, qdir

我有一个看起来像这样的相对路径和绝对路径：

```
绝对：/tmp/somedir
相对：另一个目录/file.txt

```

我想将两个 ( `/tmp/somedir/anotherdir/file.txt`) 与[QDir](https://doc.qt.io/qt-5/qdir.html)连接，但我不太确定这样做的正确方法是什么。

根据以下文档[`QDir::absoluteFilePath`](https://doc.qt.io/qt-5/qdir.html#absoluteFilePath)：

> "返回目录中文件的绝对路径名。"

如果我只有一个文件名，这将是理想的，但我也有一个相对路径。我查看了页面上的其他一些功能，但它们似乎都不是我想要的。

我应该使用什么功能？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-07-29T02:55:16.527

我想你正在寻找[`filePath()`](https://doc.qt.io/qt-5/qdir.html#filePath).

```
QString finalPath = QDir("/tmp/somedir").filePath("anotherdir/file.txt"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-05-04T14:12:38.933

如果相对文件路径以点开头，则添加少量：

```
QString absoluteDirPath = "/tmp/somedir";
QString relativeFilePath = "./anotherdir/file.txt";

QString incorrectPath = QDir{absoluteDirPath}.filePath(relativeFilePath);
qDebug() << "incorrect path:" << incorrectPath;
QString correctPath = QFileInfo{incorrectPath}.absoluteFilePath(); // removes the .
qDebug() << "correct path:" << correctPath; 
```

输出：

```
incorrect path: "/tmp/somedir/./anotherdir/file.txt"
correct path: "/tmp/somedir/anotherdir/file.txt" 
```

# c - 如何将 __DATE__ 和 __TIME__ 预定义宏作为两个整数使用，然后进行字符串化？

> ID：11697820
> 
> 赞同：45
> 
> 时间：2012-07-28T02:40:48.370
> 
> 标签：c, macros, predefined-macro

想要使用**__ DATE __ 和 __ TIME __**作为整数，以便在编译时为我的代码提供自动化版本。

```
#define STRINGIZER(arg)     #arg
#define STR_VALUE(arg)      STRINGIZER(arg)

#define DATE_as_int_str useD(__DATE__) // What can be done ?
#define TIME_as_int_str useT(__TIME__) // What can be done ?

#define VERSION 1.4

#define COMPLETE_VERSION STR_VALUE(VERSION) "." DATE_as_int_str "." TIME_as_int_str 
```

并`COMPLETE_VERSION`在 a 中作为字符串获取`const unsigned char []`。

```
const unsigned char completeVersion[] = ?? COMPLETE_VERSION; 
```

应该输出**1.4.1432.2234 的**东西。

一种可能的解决方案可能是但没有奏效：[convert - **date** -to -unsigned-int](http://www.velocityreviews.com/forums/t316565-convert-__date__-to-unsigned-int.html)

在编译时[convertint-date-and-time-string-to-just-integers-in-c的](https://stackoverflow.com/questions/11204853/convertint-date-and-time-string-to-just-integers-in-c)上下文中， 可以参考[expanssion-and-stringification-how-to-get-the-marco-name-not-its-value](https://stackoverflow.com/questions/11693219/macro-expanssion-and-stringification-how-to-get-the-marco-name-not-its-value/11694231#11694231)

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2013-05-09T22:42:15.870

如果您可以使用 C++ 编译器来构建您想要包含版本字符串的目标文件，那么我们可以完全按照您的意愿进行操作！这里唯一的魔力是 C++ 允许您使用表达式来静态初始化数组，而 C 不允许。表达式需要在编译时完全可计算，但这些表达式是，所以没问题。

我们一次构建一个字节的版本字符串，并得到我们想要的。

```
// source file version_num.h

#ifndef VERSION_NUM_H

#define VERSION_NUM_H

#define VERSION_MAJOR 1
#define VERSION_MINOR 4

#endif // VERSION_NUM_H 
```

* * *

```
// source file build_defs.h

#ifndef BUILD_DEFS_H

#define BUILD_DEFS_H

// Example of __DATE__ string: "Jul 27 2012"
//                              01234567890

#define BUILD_YEAR_CH0 (__DATE__[ 7])
#define BUILD_YEAR_CH1 (__DATE__[ 8])
#define BUILD_YEAR_CH2 (__DATE__[ 9])
#define BUILD_YEAR_CH3 (__DATE__[10])

#define BUILD_MONTH_IS_JAN (__DATE__[0] == 'J' && __DATE__[1] == 'a' && __DATE__[2] == 'n')
#define BUILD_MONTH_IS_FEB (__DATE__[0] == 'F')
#define BUILD_MONTH_IS_MAR (__DATE__[0] == 'M' && __DATE__[1] == 'a' && __DATE__[2] == 'r')
#define BUILD_MONTH_IS_APR (__DATE__[0] == 'A' && __DATE__[1] == 'p')
#define BUILD_MONTH_IS_MAY (__DATE__[0] == 'M' && __DATE__[1] == 'a' && __DATE__[2] == 'y')
#define BUILD_MONTH_IS_JUN (__DATE__[0] == 'J' && __DATE__[1] == 'u' && __DATE__[2] == 'n')
#define BUILD_MONTH_IS_JUL (__DATE__[0] == 'J' && __DATE__[1] == 'u' && __DATE__[2] == 'l')
#define BUILD_MONTH_IS_AUG (__DATE__[0] == 'A' && __DATE__[1] == 'u')
#define BUILD_MONTH_IS_SEP (__DATE__[0] == 'S')
#define BUILD_MONTH_IS_OCT (__DATE__[0] == 'O')
#define BUILD_MONTH_IS_NOV (__DATE__[0] == 'N')
#define BUILD_MONTH_IS_DEC (__DATE__[0] == 'D')

#define BUILD_MONTH_CH0 \
    ((BUILD_MONTH_IS_OCT || BUILD_MONTH_IS_NOV || BUILD_MONTH_IS_DEC) ? '1' : '0')

#define BUILD_MONTH_CH1 \
    ( \
        (BUILD_MONTH_IS_JAN) ? '1' : \
        (BUILD_MONTH_IS_FEB) ? '2' : \
        (BUILD_MONTH_IS_MAR) ? '3' : \
        (BUILD_MONTH_IS_APR) ? '4' : \
        (BUILD_MONTH_IS_MAY) ? '5' : \
        (BUILD_MONTH_IS_JUN) ? '6' : \
        (BUILD_MONTH_IS_JUL) ? '7' : \
        (BUILD_MONTH_IS_AUG) ? '8' : \
        (BUILD_MONTH_IS_SEP) ? '9' : \
        (BUILD_MONTH_IS_OCT) ? '0' : \
        (BUILD_MONTH_IS_NOV) ? '1' : \
        (BUILD_MONTH_IS_DEC) ? '2' : \
        /* error default */    '?' \
    )

#define BUILD_DAY_CH0 ((__DATE__[4] >= '0') ? (__DATE__[4]) : '0')
#define BUILD_DAY_CH1 (__DATE__[ 5])

// Example of __TIME__ string: "21:06:19"
//                              01234567

#define BUILD_HOUR_CH0 (__TIME__[0])
#define BUILD_HOUR_CH1 (__TIME__[1])

#define BUILD_MIN_CH0 (__TIME__[3])
#define BUILD_MIN_CH1 (__TIME__[4])

#define BUILD_SEC_CH0 (__TIME__[6])
#define BUILD_SEC_CH1 (__TIME__[7])

#if VERSION_MAJOR > 100

#define VERSION_MAJOR_INIT \
    ((VERSION_MAJOR / 100) + '0'), \
    (((VERSION_MAJOR % 100) / 10) + '0'), \
    ((VERSION_MAJOR % 10) + '0')

#elif VERSION_MAJOR > 10

#define VERSION_MAJOR_INIT \
    ((VERSION_MAJOR / 10) + '0'), \
    ((VERSION_MAJOR % 10) + '0')

#else

#define VERSION_MAJOR_INIT \
    (VERSION_MAJOR + '0')

#endif

#if VERSION_MINOR > 100

#define VERSION_MINOR_INIT \
    ((VERSION_MINOR / 100) + '0'), \
    (((VERSION_MINOR % 100) / 10) + '0'), \
    ((VERSION_MINOR % 10) + '0')

#elif VERSION_MINOR > 10

#define VERSION_MINOR_INIT \
    ((VERSION_MINOR / 10) + '0'), \
    ((VERSION_MINOR % 10) + '0')

#else

#define VERSION_MINOR_INIT \
    (VERSION_MINOR + '0')

#endif

#endif // BUILD_DEFS_H 
```

* * *

```
// source file main.c

#include "version_num.h"
#include "build_defs.h"

// want something like: 1.4.1432.2234

const unsigned char completeVersion[] =
{
    VERSION_MAJOR_INIT,
    '.',
    VERSION_MINOR_INIT,
    '-', 'V', '-',
    BUILD_YEAR_CH0, BUILD_YEAR_CH1, BUILD_YEAR_CH2, BUILD_YEAR_CH3,
    '-',
    BUILD_MONTH_CH0, BUILD_MONTH_CH1,
    '-',
    BUILD_DAY_CH0, BUILD_DAY_CH1,
    'T',
    BUILD_HOUR_CH0, BUILD_HOUR_CH1,
    ':',
    BUILD_MIN_CH0, BUILD_MIN_CH1,
    ':',
    BUILD_SEC_CH0, BUILD_SEC_CH1,
    '\0'
};

#include <stdio.h>

int main(int argc, char **argv)
{
    printf("%s\n", completeVersion);
    // prints something similar to: 1.4-V-2013-05-09T15:34:49
} 
```

这不完全是您要求的格式，但我仍然不完全理解您希望如何将天数和小时数映射到整数。我认为很清楚如何使它产生任何所需的字符串。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-05-09T19:13:35.573

这是“构建定义”的工作版本。这与我之前的答案类似，但我算出了构建月份。（您无法在`#if`语句中计算构建月份，但您可以使用将编译为常量的三元表达式。）

此外，根据文档，如果编译器无法获得一天中的时间，它会给你这些字符串的问号。所以我为这种情况添加了测试，如果发生这种情况，使各种宏返回一个明显错误的值 (99)。

```
#ifndef BUILD_DEFS_H

#define BUILD_DEFS_H

// Example of __DATE__ string: "Jul 27 2012"
// Example of __TIME__ string: "21:06:19"

#define COMPUTE_BUILD_YEAR \
    ( \
        (__DATE__[ 7] - '0') * 1000 + \
        (__DATE__[ 8] - '0') *  100 + \
        (__DATE__[ 9] - '0') *   10 + \
        (__DATE__[10] - '0') \
    )

#define COMPUTE_BUILD_DAY \
    ( \
        ((__DATE__[4] >= '0') ? (__DATE__[4] - '0') * 10 : 0) + \
        (__DATE__[5] - '0') \
    )

#define BUILD_MONTH_IS_JAN (__DATE__[0] == 'J' && __DATE__[1] == 'a' && __DATE__[2] == 'n')
#define BUILD_MONTH_IS_FEB (__DATE__[0] == 'F')
#define BUILD_MONTH_IS_MAR (__DATE__[0] == 'M' && __DATE__[1] == 'a' && __DATE__[2] == 'r')
#define BUILD_MONTH_IS_APR (__DATE__[0] == 'A' && __DATE__[1] == 'p')
#define BUILD_MONTH_IS_MAY (__DATE__[0] == 'M' && __DATE__[1] == 'a' && __DATE__[2] == 'y')
#define BUILD_MONTH_IS_JUN (__DATE__[0] == 'J' && __DATE__[1] == 'u' && __DATE__[2] == 'n')
#define BUILD_MONTH_IS_JUL (__DATE__[0] == 'J' && __DATE__[1] == 'u' && __DATE__[2] == 'l')
#define BUILD_MONTH_IS_AUG (__DATE__[0] == 'A' && __DATE__[1] == 'u')
#define BUILD_MONTH_IS_SEP (__DATE__[0] == 'S')
#define BUILD_MONTH_IS_OCT (__DATE__[0] == 'O')
#define BUILD_MONTH_IS_NOV (__DATE__[0] == 'N')
#define BUILD_MONTH_IS_DEC (__DATE__[0] == 'D')

#define COMPUTE_BUILD_MONTH \
    ( \
        (BUILD_MONTH_IS_JAN) ?  1 : \
        (BUILD_MONTH_IS_FEB) ?  2 : \
        (BUILD_MONTH_IS_MAR) ?  3 : \
        (BUILD_MONTH_IS_APR) ?  4 : \
        (BUILD_MONTH_IS_MAY) ?  5 : \
        (BUILD_MONTH_IS_JUN) ?  6 : \
        (BUILD_MONTH_IS_JUL) ?  7 : \
        (BUILD_MONTH_IS_AUG) ?  8 : \
        (BUILD_MONTH_IS_SEP) ?  9 : \
        (BUILD_MONTH_IS_OCT) ? 10 : \
        (BUILD_MONTH_IS_NOV) ? 11 : \
        (BUILD_MONTH_IS_DEC) ? 12 : \
        /* error default */  99 \
    )

#define COMPUTE_BUILD_HOUR ((__TIME__[0] - '0') * 10 + __TIME__[1] - '0')
#define COMPUTE_BUILD_MIN  ((__TIME__[3] - '0') * 10 + __TIME__[4] - '0')
#define COMPUTE_BUILD_SEC  ((__TIME__[6] - '0') * 10 + __TIME__[7] - '0')

#define BUILD_DATE_IS_BAD (__DATE__[0] == '?')

#define BUILD_YEAR  ((BUILD_DATE_IS_BAD) ? 99 : COMPUTE_BUILD_YEAR)
#define BUILD_MONTH ((BUILD_DATE_IS_BAD) ? 99 : COMPUTE_BUILD_MONTH)
#define BUILD_DAY   ((BUILD_DATE_IS_BAD) ? 99 : COMPUTE_BUILD_DAY)

#define BUILD_TIME_IS_BAD (__TIME__[0] == '?')

#define BUILD_HOUR  ((BUILD_TIME_IS_BAD) ? 99 :  COMPUTE_BUILD_HOUR)
#define BUILD_MIN   ((BUILD_TIME_IS_BAD) ? 99 :  COMPUTE_BUILD_MIN)
#define BUILD_SEC   ((BUILD_TIME_IS_BAD) ? 99 :  COMPUTE_BUILD_SEC)

#endif // BUILD_DEFS_H 
```

使用以下测试代码，上面的效果很好：

```
printf("%04d-%02d-%02dT%02d:%02d:%02d\n", BUILD_YEAR, BUILD_MONTH, BUILD_DAY, BUILD_HOUR, BUILD_MIN, BUILD_SEC); 
```

但是，当我尝试将这些宏与您的字符串化宏一起使用时，它会将文字表达式字符串化！我不知道有什么方法可以让编译器将表达式减少为文字整数值然后字符串化。

此外，如果您尝试使用这些宏静态初始化值数组，编译器会报错`error: initializer element is not constant`消息。所以你不能用这些宏做你想做的事。

在这一点上，我认为您最好的选择是为您生成一个新的包含文件的 Python 脚本。您可以以任何您想要的格式预先计算任何您想要的东西。如果您不想要 Python，我们可以编写 AWK 脚本甚至 C 程序。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-07-28T04:35:40.313

我有一个部分答案给你。这是基于我从 GCC 得到的：

`__DATE__`给出类似的东西`"Jul 27 2012"`

`__TIME__`给出类似的东西`21:06:19`

将此文本放入名为的包含文件中`build_defs.h`：

```
#ifndef BUILD_DEFS_H

#define BUILD_DEFS_H

#define BUILD_YEAR ((__DATE__[7] - '0') * 1000 +  (__DATE__[8] - '0') * 100 + (__DATE__[9] - '0') * 10 + __DATE__[10] - '0')

#define BUILD_DATE ((__DATE__[4] - '0') * 10 + __DATE__[5] - '0')

#if 0
#if (__DATE__[0] == 'J' && __DATE__[1] == 'a' && __DATE__[2] == 'n')
    #define BUILD_MONTH  1
#elif (__DATE__[0] == 'F' && __DATE__[1] == 'e' && __DATE__[2] == 'b')
    #define BUILD_MONTH  2
#elif (__DATE__[0] == 'M' && __DATE__[1] == 'a' && __DATE__[2] == 'r')
    #define BUILD_MONTH  3
#elif (__DATE__[0] == 'A' && __DATE__[1] == 'p' && __DATE__[2] == 'r')
    #define BUILD_MONTH  4
#elif (__DATE__[0] == 'M' && __DATE__[1] == 'a' && __DATE__[2] == 'y')
    #define BUILD_MONTH  5
#elif (__DATE__[0] == 'J' && __DATE__[1] == 'u' && __DATE__[2] == 'n')
    #define BUILD_MONTH  6
#elif (__DATE__[0] == 'J' && __DATE__[1] == 'u' && __DATE__[2] == 'l')
    #define BUILD_MONTH  7
#elif (__DATE__[0] == 'A' && __DATE__[1] == 'u' && __DATE__[2] == 'g')
    #define BUILD_MONTH  8
#elif (__DATE__[0] == 'S' && __DATE__[1] == 'e' && __DATE__[2] == 'p')
    #define BUILD_MONTH  9
#elif (__DATE__[0] == 'O' && __DATE__[1] == 'c' && __DATE__[2] == 't')
    #define BUILD_MONTH 10
#elif (__DATE__[0] == 'N' && __DATE__[1] == 'o' && __DATE__[2] == 'v')
    #define BUILD_MONTH 11
#elif (__DATE__[0] == 'D' && __DATE__[1] == 'e' && __DATE__[2] == 'c')
    #define BUILD_MONTH 12
#else
    #error "Could not figure out month"
#endif
#endif

#define BUILD_HOUR ((__TIME__[0] - '0') * 10 + __TIME__[1] - '0')
#define BUILD_MIN ((__TIME__[3] - '0') * 10 + __TIME__[4] - '0')
#define BUILD_SEC ((__TIME__[6] - '0') * 10 + __TIME__[7] - '0')

#endif // BUILD_DEFS_H 
```

我在 Linux 上使用 GCC 测试了上述内容。一切都很好，除了我无法弄清楚如何获得当月号码的问题。如果你检查下面的部分，`#if 0`你会看到我试图找出月份。GCC 抱怨此消息：

```
error: token ""Jul 27 2012"" is not valid in preprocessor expressions 
```

将三个字母的月份缩写转换成某种唯一的数字是微不足道的；只需从第一个字母中减去“A”，从第二个和第三个字母中减去“a”，然后转换为 base-26 数字或其他内容。但我想让它在一月份评估为 1 等等，我不知道该怎么做。

编辑：我刚刚意识到您要求的是字符串，而不是计算为整数值的表达式。

我尝试使用这些技巧来构建静态字符串：

```
#define BUILD_MAJOR 1
#define BUILD_MINOR 4
#define VERSION STRINGIZE(BUILD_MAJOR) "." STRINGIZE(BUILD_MINOR)

char build_str[] = {
    BUILD_MAJOR + '0', '.' BUILD_MINOR + '0', '.',
    __DATE__[7], __DATE__[8], __DATE__[9], __DATE__[10],
    '\0'
}; 
```

GCC 抱怨`__DATE__`.

抱歉，我不确定如何帮助您。也许你可以用你的编译器试试这些东西？或者它会给你一个想法。

祝你好运。

PS如果你不需要数字，你只想要一个唯一的构建字符串，这很容易：

```
const char *build_str = "Version: " VERSION " " __DATE__ " " __TIME__; 
```

使用 GCC，这会产生如下结果：

```
Version: 1.4 Jul 27 2012 21:53:59 
```

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2012-07-28T19:39:46.467

你总是可以用 Python 或其他东西编写一个简单的程序来创建一个包含文件，其中包含`#define`带有内部版本号、时间和日期的简单语句。然后，您需要在构建之前运行该程序。

如果你喜欢我会写一个并在这里发布源代码。

如果幸运的话，您的构建工具（IDE 或其他）可能能够运行外部命令，然后您可以让外部工具在每次构建时自动重写包含文件。

编辑：这是一个 Python 程序。这将写入一个名为的文件，该文件`build_num.h`具有一个从 1 开始的整数内部版本号，并且每次运行该程序时递增；它还写入`#define`该程序运行时间的年、月、日、小时、分钟和秒的值。它还有一个`#define`用于主要和次要部分的版本号，以及您想要的完整`VERSION`和次要部分。`COMPLETE_VERSION`（我不确定您想要的日期和时间数字是什么，所以我只选择了日期和时间的串联数字。您可以轻松更改。）

每次运行它时，它都会读取`build_num.h`文件，并解析它以获取内部版本号；如果`build_num.h`文件不存在，它从 1 开始构建号。同样，它解析出主要和次要版本号，如果文件不存在，则默认为 0.1 版。

```
import time

FNAME = "build_num.h"

build_num = None
version_major = None
version_minor = None

DEF_BUILD_NUM = "#define BUILD_NUM "
DEF_VERSION_MAJOR = "#define VERSION_MAJOR "
DEF_VERSION_MINOR = "#define VERSION_MINOR "

def get_int(s_marker, line):
    _, _, s = line.partition(s_marker) # we want the part after the marker
    return int(s)

try:
    with open(FNAME) as f:
        for line in f:
            if DEF_BUILD_NUM in line:
                build_num = get_int(DEF_BUILD_NUM, line)
                build_num += 1
            elif DEF_VERSION_MAJOR in line:
                version_major = get_int(DEF_VERSION_MAJOR, line)
            elif DEF_VERSION_MINOR in line:
                version_minor = get_int(DEF_VERSION_MINOR, line)
except IOError:
    build_num = 1
    version_major = 0
    version_minor = 1

assert None not in (build_num, version_major, version_minor)

with open(FNAME, 'w') as f:
    f.write("#ifndef BUILD_NUM_H\n")
    f.write("#define BUILD_NUM_H\n")
    f.write("\n")
    f.write(DEF_BUILD_NUM + "%d\n" % build_num)
    f.write("\n")
    t = time.localtime()
    f.write("#define BUILD_YEAR %d\n" % t.tm_year)
    f.write("#define BUILD_MONTH %d\n" % t.tm_mon)
    f.write("#define BUILD_DATE %d\n" % t.tm_mday)
    f.write("#define BUILD_HOUR %d\n" % t.tm_hour)
    f.write("#define BUILD_MIN %d\n" % t.tm_min)
    f.write("#define BUILD_SEC %d\n" % t.tm_sec)
    f.write("\n")
    f.write("#define VERSION_MAJOR %d\n" % version_major)
    f.write("#define VERSION_MINOR %d\n" % version_minor)
    f.write("\n")
    f.write("#define VERSION \"%d.%d\"\n" % (version_major, version_minor))
    s = "%d.%d.%04d%02d%02d.%02d%02d%02d" % (version_major, version_minor,
            t.tm_year, t.tm_mon, t.tm_mday, t.tm_hour, t.tm_min, t.tm_sec)
    f.write("#define COMPLETE_VERSION \"%s\"\n" % s)
    f.write("\n")
    f.write("#endif // BUILD_NUM_H\n") 
```

我将所有定义都设为整数，但由于它们是简单的整数，因此您可以根据需要使用标准的字符串化技巧来构建字符串。你也可以简单地扩展它来构建额外的预定义字符串。

这个程序应该在 Python 2.6 或更高版本下运行良好，包括任何 Python 3.x 版本。您可以在旧的 Python 下运行它，并进行一些更改，例如不`.partition()`用于解析字符串。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2015-07-10T09:11:58.367

**简答（问版）：（格式 3.33.20150710.182906）**

请简单地使用`makefile`：

```
MAJOR = 3
MINOR = 33
BUILD = $(shell date +"%Y%m%d.%H%M%S")
VERSION = "\"$(MAJOR).$(MINOR).$(BUILD)\""
CPPFLAGS = -DVERSION=$(VERSION)

program.x : source.c
       gcc $(CPPFLAGS) source.c -o program.x 
```

如果你不想要一个`makefile`, 更短的，只需编译：

```
gcc source.c -o program.x -DVERSION=\"2.22.$(date +"%Y%m%d.%H%M%S")\" 
```

* * *

**简答（推荐版本）：（格式 150710.182906）**

使用`double`版本号：

生成文件：

```
VERSION = $(shell date +"%g%m%d.%H%M%S")
CPPFLAGS = -DVERSION=$(VERSION)
program.x : source.c
      gcc $(CPPFLAGS) source.c -o program.x 
```

或者一个简单的 bash 命令：

```
$ gcc source.c -o program.x -DVERSION=$(date +"%g%m%d.%H%M%S") 
```

**提示：** 仍然不喜欢`makefile`或者只是为了一个不那么小的测试程序？添加这一行：

```
 export CPPFLAGS='-DVERSION='$(date +"%g%m%d.%H%M%S") 
```

到你的`~/.profile`，记得用`gcc $CPPFLAGS ...`

* * *

**长答案：**

我知道这个问题比较老，但我有一点贡献。最佳实践始终是自动化可能成为错误（或遗忘）的来源。

我习惯了为我创建版本号的函数。但我更喜欢这个函数返回一个`float`. 我的版本号可以通过以下方式打印：`printf("%13.6f\n", version());`问题如下：（`150710.150411`年（2 位）月日 DOT 小时分秒）。

但是，好吧，问题是你的。如果您更喜欢“major.minor.date.time”，它必须是一个字符串。（相信我，双精度更好。如果您坚持使用专业，如果您设置专业并让小数为日期+时间，您仍然可以使用双精度，例如：`major.datetime = 1.150710150411`

让我们开始做生意。`-DVERSION`如果您像往常一样编译，忘记设置它，或者使用直接从 shell 设置版本，下面的示例将起作用，但更好的是，我推荐第三个选项：使用`makefile`.

* * *

**三种编译形式及结果：**

**使用制作：**

```
beco> make program.x
gcc -Wall -Wextra -g -O0 -ansi -pedantic-errors -c -DVERSION="\"3.33.20150710.045829\"" program.c -o program.o
gcc  program.o -o program.x 
```

跑步：

```
__DATE__: 'Jul 10 2015'
__TIME__: '04:58:29'
VERSION: '3.33.20150710.045829' 
```

**使用 -DVERSION：**

```
beco> gcc program.c -o program.x -Wall -Wextra -g -O0 -ansi -pedantic-errors -DVERSION=\"2.22.$(date +"%Y%m%d.%H%M%S")\" 
```

跑步：

```
__DATE__: 'Jul 10 2015'
__TIME__: '04:58:37'
VERSION: '2.22.20150710.045837' 
```

**使用内置函数：**

```
beco> gcc program.c -o program.x -Wall -Wextra -g -O0 -ansi -pedantic-errors 
```

跑步：

```
__DATE__: 'Jul 10 2015'
__TIME__: '04:58:43'
VERSION(): '1.11.20150710.045843' 
```

* * *

**源代码**

```
 1 #include <stdio.h>
  2 #include <stdlib.h>
  3 #include <string.h>
  4 
  5 #define FUNC_VERSION (0)
  6 #ifndef VERSION
  7   #define MAJOR 1
  8   #define MINOR 11
  9   #define VERSION version()
 10   #undef FUNC_VERSION
 11   #define FUNC_VERSION (1)
 12   char sversion[]="9999.9999.20150710.045535";
 13 #endif
 14 
 15 #if(FUNC_VERSION)
 16 char *version(void);
 17 #endif
 18 
 19 int main(void)
 20 {
 21 
 22   printf("__DATE__: '%s'\n", __DATE__);
 23   printf("__TIME__: '%s'\n", __TIME__);
 24 
 25   printf("VERSION%s: '%s'\n", (FUNC_VERSION?"()":""), VERSION);
 26   return 0;
 27 }
 28 
 29 /* String format: */
 30 /* __DATE__="Oct  8 2013" */
 31 /*  __TIME__="00:13:39" */
 32
 33 /* Version Function: returns the version string */
 34 #if(FUNC_VERSION)
 35 char *version(void)
 36 {
 37   const char data[]=__DATE__;
 38   const char tempo[]=__TIME__;
 39   const char nomes[] = "JanFebMarAprMayJunJulAugSepOctNovDec";
 40   char omes[4];
 41   int ano, mes, dia, hora, min, seg;
 42 
 43   if(strcmp(sversion,"9999.9999.20150710.045535"))
 44     return sversion;
 45 
 46   if(strlen(data)!=11||strlen(tempo)!=8)
 47     return NULL;
 48 
 49   sscanf(data, "%s %d %d", omes, &dia, &ano);
 50   sscanf(tempo, "%d:%d:%d", &hora, &min, &seg);
 51   mes=(strstr(nomes, omes)-nomes)/3+1;
 52   sprintf(sversion,"%d.%d.%04d%02d%02d.%02d%02d%02d", MAJOR, MINOR, ano, mes, dia, hora, min, seg);
 53 
 54   return sversion;
 55 }
 56 #endif 
```

* * *

请注意，字符串受`MAJOR<=9999`和限制`MINOR<=9999`。当然，我设置了这个希望永远不会溢出的高值。但是使用仍然更好（另外，它是完全自动的，`double`无需手动设置）。`MAJOR``MINOR`

现在，上面的程序有点太多了。更好的是完全删除该函数，并保证`VERSION`定义宏，或者`-DVERSION`直接进入 GCC 命令行（或自动添加它的别名，这样你就不会忘记），或者推荐的解决方案，将此过程包含到`makefile`.

这是`makefile`我使用的：

* * *

**生成文件源：**

```
 1   MAJOR = 3
  2   MINOR = 33
  3   BUILD = $(shell date +"%Y%m%d.%H%M%S")
  4   VERSION = "\"$(MAJOR).$(MINOR).$(BUILD)\""
  5   CC = gcc
  6   CFLAGS = -Wall -Wextra -g -O0 -ansi -pedantic-errors
  7   CPPFLAGS = -DVERSION=$(VERSION)
  8   LDLIBS =
  9   
 10    %.x : %.c
 11          $(CC) $(CFLAGS) $(CPPFLAGS) $(LDLIBS) $^ -o $@ 
```

* * *

**DOUBLE 的更好版本**

现在我向您介绍了“您的”首选解决方案，这是我的解决方案：

**使用 (a) makefile 或 (b) gcc 直接编译：**

(a) 生成文件：

```
 VERSION = $(shell date +"%g%m%d.%H%M%S")
   CC = gcc
   CFLAGS = -Wall -Wextra -g -O0 -ansi -pedantic-errors 
   CPPFLAGS = -DVERSION=$(VERSION)
   LDLIBS =
   %.x : %.c
         $(CC) $(CFLAGS) $(CPPFLAGS) $(LDLIBS) $^ -o $@ 
```

(b) 或者一个简单的 bash 命令：

```
 $ gcc program.c -o program.x -Wall -Wextra -g -O0 -ansi -pedantic-errors -DVERSION=$(date +"%g%m%d.%H%M%S") 
```

* * *

**源代码（双版）：**

```
#ifndef VERSION
  #define VERSION version()
#endif

double version(void);

int main(void)
{
  printf("VERSION%s: '%13.6f'\n", (FUNC_VERSION?"()":""), VERSION);
  return 0;
}

double version(void)
{
  const char data[]=__DATE__;
  const char tempo[]=__TIME__;
  const char nomes[] = "JanFebMarAprMayJunJulAugSepOctNovDec";
  char omes[4];
  int ano, mes, dia, hora, min, seg;
  char sversion[]="130910.001339";
  double fv;

  if(strlen(data)!=11||strlen(tempo)!=8)
    return -1.0;

  sscanf(data, "%s %d %d", omes, &dia, &ano);
  sscanf(tempo, "%d:%d:%d", &hora, &min, &seg);
  mes=(strstr(nomes, omes)-nomes)/3+1;
  sprintf(sversion,"%04d%02d%02d.%02d%02d%02d", ano, mes, dia, hora, min, seg);
  fv=atof(sversion);

  return fv;
} 
```

注意：这个双重功能只有在你忘记定义宏 VERSION 的情况下才会出现。如果您使用 a`makefile`或设置 a `alias gcc gcc -DVERSION=$(date +"%g%m%d.%H%M%S")`，您可以安全地完全删除此功能。

* * *

嗯，就是这样。一种非常简洁且简单的方法来设置您的版本控制，再也不用担心它了！

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2019-09-06T09:19:13.370

如果天小于 10，则对于只想替换额外的 ' ' （空格）的任何人，请使用：

```
#define BUILD_DATE (char const[]) { __DATE__[0], __DATE__[1], __DATE__[2], __DATE__[3], (__DATE__[4] == ' ' ?  '0' : __DATE__[4]), __DATE__[5], __DATE__[6], __DATE__[7], __DATE__[8], __DATE__[9], __DATE__[10], __DATE__[11] } 
```

输出：2019 年 9 月 6 日

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2016-06-08T04:35:35.850

这很简单......

[在制作文件中]

==== 1 ====================

OBJS = ....\

```
version.o <<== add to your obj lists 
```

==== 2 ====================

DATE = $(shell date +'char szVersionStr[20] = "%Y-%m-%d %H:%M:%S";') <<== 添加

all:version $(ProgramID) <<== 首先添加的版本

版本：<<== 添加

```
echo '$(DATE)' > version.c  <== add ( create version.c file) 
```

[节目中]

=====3 =============

extern char szVersionStr[20];

[ 使用 ]

=== 4 ====

```
printf( "Version: %s\n", szVersionStr ); 
```

# ios - 字符串到 JSON 数组无法识别的选择器错误

> ID：11697826
> 
> 赞同：0
> 
> 时间：2012-07-28T02:42:55.840
> 
> 标签：ios, nsarray, nsjsonserialization

我正在尝试将一些 JSON 解析为 NSArray，但出现以下错误：

```
[__NSCFDictionary length]: unrecognized selector sent to instance 0x6d7a160 
```

引发此错误的代码区域是：

```
- (void)connectionDidFinishLoading:(NSURLConnection *)connection {

NSString *responseString = [[NSString alloc] initWithData:responseData encoding:NSUTF8StringEncoding];
NSError* error;
NSLog(responseString);
NSArray *jsonArray = [NSJSONSerialization 
          JSONObjectWithData:responseData
          options:NSJSONReadingMutableContainers
          error:&error];
parties2=jsonArray;
NSLog([parties2 objectAtIndex:0]); //Exception thrown

[tableView reloadData]; 
```

}

各方2先前定义为：

```
parties2=[NSArray arrayWithObjects:nil]; 
```

我的 ResponseString 看起来像

```
[{"Name":"party 1.1","GreekName":"FoA 1","GreekID":325,"schoolName":"FoA University","schoolID":10,"numberAttending":0,"maxNumberAttending":1000,"price":15.0},{"Name":"party 1.2","GreekName":"FoA 1","GreekID":325,"schoolName":"FoA University","schoolID":10,"numberAttending":0,"maxNumberAttending":300,"price":20.0},{"Name":"party 1.3","GreekName":"FoA 1","GreekID":325,"schoolName":"FoA University","schoolID":10,"numberAttending":0,"maxNumberAttending":5000,"price":25.0},{"Name":"party 2.1","GreekName":"FoA 2","GreekID":326,"schoolName":"FoA University","schoolID":10,"numberAttending":0,"maxNumberAttending":500,"price":25.0},{"Name":"party 2.2","GreekName":"FoA 2","GreekID":326,"schoolName":"FoA University","schoolID":10,"numberAttending":0,"maxNumberAttending":300,"price":30.0},{"Name":"party 3.1","GreekName":"FoA 3","GreekID":327,"schoolName":"FoA University","schoolID":10,"numberAttending":0,"maxNumberAttending":0,"price":50.0},{"Name":"party 5.1","GreekName":"FoA 5 ","GreekID":329,"schoolName":"FoA University","schoolID":10,"numberAttending":0,"maxNumberAttending":300,"price":15.75}] 
```

这是我第一次使用 ObjC，我来自 .Net C# 背景，所以我很可能错过了一个非常简单的东西。

谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T17:10:34.900

您的 JSON 解析是正确的。由于语句中的语法错误而引发错误`NSLog()`。

NSLog() 将 NSString 作为参数，但您尝试传递 NSDictionary（即 NSArray 的第一个元素），这会导致错误。

解决这个问题的方法是使用 NSString 格式的字符串将 NSDictionary 对象转换为字符串，如下所示：

```
NSLog(@"%@",[parties2 objectAtIndex:0]); 
```

# python - 在 Python 中创建空格分隔文件

> ID：11697828
> 
> 赞同：1
> 
> 时间：2012-07-28T02:43:38.290
> 
> 标签：python, export-to-csv

使用下面的代码，我得到了文件的正确信息——有点。这是代码：

```
filename = raw_input('What would you like to name the file? ')

import csv

data = [frames]
out = csv.writer(open(filename,"w"), delimiter=' ',quoting=csv.QUOTE_MINIMAL)
out.writerows(data) 
```

这会在文本文件中生成如下所示的内容：

```
"[255   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0
   0   0]" "[  0 171 171 171 171 171 171 171 171 171 171 171 171 171 171 171 171 171
 171 171]" 
```

我希望信息看起来像这样：

```
255 255 255 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 []0 255 255 255 255 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 
```

2 个括号代表一个字符，表示新的信息行。这是我的文本编辑器上的一个小矩形，我不确定这个字符是什么。

那么，我如何摆脱引号和括号并使用其他字符呢？

编辑：

我尝试使用下面的代码并收到以下错误：

```
Traceback (most recent call last):   
  File "(stdin)", line 1, in (module)   
  File "backandforth3.py", line 154, in (module)
    out.write(' '.join(frame)) 
Type Error: sequence item 0: expect string, numpy.int32 found 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-28T02:55:11.660

我假设您使用记事本作为文本编辑器？Unix 样式的换行符 ( `\n`) 在记事本中显示为方框，因为它仅支持 Windows 换行符 ( `\r\n`)。也就是说，这应该提供您期望的输出：

```
filename = raw_input('What would you like to name the file? ')

with open(filename, 'wb') as out:
    for frame in frames:
        out.write(' '.join(str(num) for num in frame))
        out.write('\r\n') 
```

没有理由包含`frames`在另一个列表中；假设变量是数字列表的列表，正如预期的输出所示，这应该可以正常工作。

此外，如果您绝对必须拥有您在输出中描述的“框”，请替换`'\r\n'`为`'\n'`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T18:45:51.043

如果`frames`是一个 numpy 数组，则可以使用[`numpy.savetxt()`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.savetxt.html)函数：

```
numpy.savetxt(filename, frames) 
```

要修复您的`csv`代码以二进制模式打开文件`wb`以避免损坏行尾，并且不要包装`frames`在另一个列表中，它似乎已经是一个二维数组：

```
import csv

with open(filename,"wb") as f:
    writer = csv.writer(f, delimiter=' ', quoting=csv.QUOTE_MINIMAL)
    writer.writerows(frames) 
```

# perl - 如何在舞者中显示数组项？

> ID：11697830
> 
> 赞同：2
> 
> 时间：2012-07-28T02:43:53.477
> 
> 标签：perl, dancer

我尝试在舞者中显示一个数组项，这是代码：

```
get '/' => sub {
  my @rows = ('aaa','bbb','ccc');
  template 'crud.tt', {'rows' => \@rows};
}; 
```

模板是：

```
 <h2><% $rows[1] %></h2>
  <h2><% rows[1] %></h2>
  <% FOREACH r IN rows %>
    <p><% r %></p>
  <% END %> 
```

在 h2 元素中什么都不显示，正确的方法是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-28T03:51:41.140

如果您使用的是默认`Dancer`模板引擎，则只能传递一个简单的标量值。但是，如果您启用`Template::Toolkit`引擎，那么各种事情都是可能的。

您可以通过在 YAML 配置文件中设置来全局执行此`template: template_toolkit`操作，或者您可以通过编写仅为此路由设置它

```
get '/' => sub {
  my @rows = ('aaa','bbb','ccc');
  set template => 'template_toolkit';
  template 'crud.tt', { rows => \@rows };
}; 
```

你的模板看起来像

```
<h2><% rows.1 %></h2>
<% FOREACH r IN rows %>
<p><% r %></p>
<% END %> 
```

你需要

```
use Template; 
```

`Template::Toolkit`在使用任一方法之前加载模块

# r - R ifelse 条件：连续 NA 的频率

> ID：11697833
> 
> 赞同：2
> 
> 时间：2012-07-28T02:44:31.287
> 
> 标签：r

我是 R 新手，我一直在寻找类似的问题，但无法找到解决我的问题，任何帮助将不胜感激。

我有一个数据框 M：

```
 date value
1 182-2002-01-01 23.95
2 182-2002-01-02 17.47
3 182-2002-01-03  NA
4 183-2002-01-01  NA
5 183-2002-01-02  5.50
6 183-2002-01-03 17.02 
```

我需要做的是：如果少于 5 个 NA（连续），我将重复之前的数字（17.47），如果连续超过 5 个 NA，我将需要删除整个月。

我尝试了很多次function rle，但没有成功，非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T03:54:11.163

出于演示的目的，我将稍微调整您的问题。我将使用与您类似的数据集，但连续使用 2 个 NA。这很容易概括为 5，不用担心。我还将使用更好地演示解决方案的数据集

所以首先，如何让你的数据看起来像我将要使用的：

```
library(reshape)
M2<-data.frame(colsplit(M$date, "-", c("ID", "year", "month", "day")), 
               value=M$value) 
```

现在已经不在了，这是我要使用的数据：

```
library(reshape)
M2<-data.frame(colsplit(M$date, "-", c("ID", "year", "month", "day")), 
               value=M$value)

set.seed(1234)
M2<-expand.grid(ID=182, year=2002:2004, month=1:2, day=1:3, KEEP.OUT.ATTRS=FALSE)
M2 <- M2[with(M2, order(year, month, day, ID)),] #sort the data
M2$value <- sample(c(NA, rnorm(100)), nrow(M2), 
                   prob=c(0.5, rep(0.5/100, 100)), replace=TRUE)
M2

    ID year month day      value
1  182 2002     1   1 -0.5012581
7  182 2002     1   2  1.1022975
13 182 2002     1   3         NA
4  182 2002     2   1 -0.1623095
10 182 2002     2   2  1.1022975
16 182 2002     2   3 -1.2519859
2  182 2003     1   1         NA
8  182 2003     1   2         NA
14 182 2003     1   3         NA
5  182 2003     2   1  0.9729168
11 182 2003     2   2  0.9594941
17 182 2003     2   3         NA
3  182 2004     1   1         NA
9  182 2004     1   2 -1.1088896
15 182 2004     1   3  0.9594941
6  182 2004     2   1 -0.4027320
12 182 2004     2   2 -0.0151383
18 182 2004     2   3 -1.0686427 
```

首先，我们将删除一个月内连续出现 2 个或更多 NA 的所有情况：

```
NA_run <- function(x, maxlen){
  runs <- rle(is.na(x$value))
  if(any(runs$lengths[runs$values] >= maxlen)) NULL else x
  }

library(plyr)
rem <- ddply(M2, .(ID, year, month), NA_run, 2)
rem

    ID year month day      value
1  182 2002     1   1 -0.5012581
2  182 2002     1   2  1.1022975
3  182 2002     1   3         NA
4  182 2002     2   1 -0.1623095
5  182 2002     2   2  1.1022975
6  182 2002     2   3 -1.2519859
7  182 2003     2   1  0.9729168
8  182 2003     2   2  0.9594941
9  182 2003     2   3         NA
10 182 2004     1   1         NA
11 182 2004     1   2 -1.1088896
12 182 2004     1   3  0.9594941
13 182 2004     2   1 -0.4027320
14 182 2004     2   2 -0.0151383
15 182 2004     2   3 -1.0686427 
```

您可以看到连续两个 NA 已被删除。剩下的一个在那里，因为它属于两个不同的月份。现在我们将填写剩余的 NA。如果它们在一开始是正确的（我认为这是你想要的`na.rm=FALSE`），那么争论就在那里。

```
library(zoo)
rem$value <- na.locf(rem$value, na.rm=FALSE)
rem

    ID year month day      value
1  182 2002     1   1 -0.5012581
2  182 2002     1   2  1.1022975
3  182 2002     1   3  1.1022975
4  182 2002     2   1 -0.1623095
5  182 2002     2   2  1.1022975
6  182 2002     2   3 -1.2519859
7  182 2003     2   1  0.9729168
8  182 2003     2   2  0.9594941
9  182 2003     2   3  0.9594941
10 182 2004     1   1  0.9594941
11 182 2004     1   2 -1.1088896
12 182 2004     1   3  0.9594941
13 182 2004     2   1 -0.4027320
14 182 2004     2   2 -0.0151383
15 182 2004     2   3 -1.0686427 
```

现在，要使数据达到 5 或更多，您需要做的就是将`maxlen`参数的值更改`NA_run`为 5。

编辑：或者，如果您不希望从前几个月复制值：

```
library(zoo)
rem$value <- ddply(rem, .(ID, year, month), summarise, 
                   value=na.locf(value, na.rm=FALSE))$value
rem

    ID year month day      value
1  182 2002     1   1 -0.5012581
2  182 2002     1   2  1.1022975
3  182 2002     1   3  1.1022975
4  182 2002     2   1 -0.1623095
5  182 2002     2   2  1.1022975
6  182 2002     2   3 -1.2519859
7  182 2003     2   1  0.9729168
8  182 2003     2   2  0.9594941
9  182 2003     2   3  0.9594941
10 182 2004     1   1         NA
11 182 2004     1   2 -1.1088896
12 182 2004     1   3  0.9594941
13 182 2004     2   1 -0.4027320
14 182 2004     2   2 -0.0151383
15 182 2004     2   3 -1.0686427 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T02:52:28.083

我将分两步执行此操作：

1.  一种基于`rle`、`rollapply`或`shift`- 的策略来填补小空白（连续少于 5 个 NA）。
2.  一种基于`by`、`aggregate`或-`ddply`的策略，用于在步骤 1 之后剩余 NA 的任何月份，并使整个月 NA。

# objective-c - 来自 JSONKit 的 EXC_BAD_ACCESS

> ID：11697834
> 
> 赞同：0
> 
> 时间：2012-07-28T02:45:07.247
> 
> 标签：objective-c, macos, jsonkit

在以下代码中调用方法时，我一直遇到 EXC_BAD_ACCESS `[obj JSONString]`，我不知道为什么。我试过打开僵尸对象，但没有什么不同。

```
- (void)applicationDidFinishLaunching:(NSNotification *)aNotification
{
    NSDictionary *obj = @{
        @"id": @1,
        @"date": @"11/07/2012",
        @"companyInfo": @"Company Details",
        @"customerInfo": @"Customer Details",
        @"taxRate": @0
    };
    NSLog(@"%@", obj);
    NSLog(@"%@", [obj JSONString]);

    // Other stuff here
} 
```

我正在运行狮子。我刚刚升级到 Xcode 4.4 并且正在使用 CocoaPods 0.9.2 来安装 JSONKit。我已经尝试过JSONKit`1.4`和`1.5pre`版本，但均无济于事。

我正在使用最新的 OS X SDK (10.8)，部署目标为 10.6（它必须部署到 10.6）。我也试过 10.7 SDK 但结果是一样的。10.6 SDK 不再可用，因此我无法对其进行测试。

`clang --version`显示：

```
Apple clang version 3.1 (tags/Apple/clang-318.0.61) (based on LLVM 3.1svn)
Target: x86_64-apple-darwin11.4.0
Thread model: posix 
```

当我使用 Xcode 4.3 时，应用程序编译并正确运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T03:57:57.247

原来问题在于 CocoaPods 在运行时并没有移除现有的 JSONKit 文件`pod install`。我正在使用版本`1.5pre`并且代码正确执行。

# c# - 如何创建工厂？

> ID：11697839
> 
> 赞同：0
> 
> 时间：2012-07-28T02:46:22.190
> 
> 标签：c#, types, dictionary, factory

此时此刻，我正在处理一个应该作为工厂工作的映射器类。

到目前为止，我使用字典作为映射器。

```
IDictionary<string, Type> mapper; 
```

这个想法是当我得到字典的一个值时，应该实例化，例如：

```
var foo = mapper["foo"];  // this should return the instance of foo 
```

另一个问题是：

```
var foo2 = mapper["foo"]  // should be the same instance of foo (foo == foo2) 
```

几个月前，我猜我看过一些关于容器的东西，我不确定这个词是否正确以及这是否对我有帮助。有任何想法吗？

更新：

我真的没有任何代码。我在想的是字典应该有一个 Func<> 而不是 Type 的值，或者使用类 Activator 作为中间，虽然我猜这些不是好的选择。我打算在后面的代码中添加100多个项目，会很累。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T03:19:25.453

你的意思是这样吗？

```
abstract class MyBase { }
class Type1 : MyBase { }
class Type2 : MyBase { }
class Type3 : MyBase { }

private static readonly Dictionary<Type, Func<MyBase>> sConstructors =
   new Dictionary<Type, Func<MyBase>>
{
   { typeof(Type1), () => new Type1() },
   { typeof(Type2), () => new Type2() },
   { typeof(Type3), () => new Type3() }   
};

...

Type type = typeof(Type1);
MyBase myBase = sConstructors[type](); 
```

使用反射，您甚至可以自动构建它们，而不必手动维护它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T04:53:54.753

它被称为[服务定位器反模式](http://blog.ploeh.dk/2010/02/03/ServiceLocatorIsAnAntiPattern.aspx)。

相反，请查看@drumboog 建议的内容 -[依赖注入容器](http://www.hanselman.com/blog/ListOfNETDependencyInjectionContainersIOC.aspx)。

对这一点的完整解释实际上需要一[本书](http://manning.com/seemann/)。

# github - 将 Github 存储库拉入 Amazon ec2 实例

> ID：11697840
> 
> 赞同：1
> 
> 时间：2012-07-28T02:46:24.243
> 
> 标签：github, amazon-ec2

有谁知道如何使用 SSH 将文件从 Github 存储库下载到 Amazon ec2 实例上。类似的东西`git clone 'git-repo-url'`。另外，如果这是一个网站，有人可以解释我应该在我的 ec2 实例上将这个 repo 拉到哪里吗？我成功运行了 apache，但它没有显示我的网页......

```
fatal: could not create work tree dir 'Survey_app'.: Permission denied 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T02:50:59.503

只是

```
git clone https://github.com/path/to/your/directory 
```

根据你的操作系统，它可能会在某个地方，比如`/var/www/public_html`CentOS，或者在 CentOS 的情况下，`/var/www/html`

# html - 像最新的 Safari 一样使用空格换行文本：pre

> ID：11697841
> 
> 赞同：1
> 
> 时间：2012-07-28T02:46:26.723
> 
> 标签：html, css, text, safari, textarea

`white-space: pre;`当应用于`<div>`s 或s 时， Safari 可以很好地包装文本`<textarea>`，如下所示。

```
<textarea style="width:300px; white-space:pre; word-wrap:break-word;"> text. dddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddd</textarea> 
```

当一个单词到达`max-width`textarea 时，整个单词不会像您使用`word-wrap: break-word;`. 相反，它在 the 处拆分单词`max-width`并从左下角的换行符继续。我希望能够在所有主要浏览器中复制它，但如果它太麻烦的话，我会对 Firefox 和 IE 感到满意。

任何关于如何实现这一目标的想法/建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T11:01:19.883

使用[`overflow-wrap`或`word-wrap`](http://www.w3.org/TR/css3-text/#overflow-wrap)。它们是同义词，但根据我的经验，`word-wrap`适用于大多数浏览器：

```
textarea {
    word-wrap: break-word;
    overflow-wrap: break-word;
} 
```

这将插入硬中断。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-01-07T22:31:49.423

这对我有用

```
white-space: normal;
word-break: break-word; 
```

# ios - 如何运行 viewDidAppear

> ID：11697845
> 
> 赞同：0
> 
> 时间：2012-07-28T02:48:01.110
> 
> 标签：ios

每次显示时，我都需要将一些数据加载到视图中。数据会发生变化，每次都显示视图，所以我想我可以在方法 viewDidAppear 中加载数据。不幸的是，我发现每次显示视图时都不会调用 viewDidAppear。

从任何其他视图显示视图的代码是....

```
[self clearView];
[self.view insertSubview:fifthViewController.view atIndex:4]; 
```

所以我想我可以将其更改为以下内容以运行 viewDidAppear ...

```
[[self.view insertSubview:fifthViewController.view atIndex: 4 viewDidAppear:YES]; 
```

不幸的是，这会导致错误“错误的接收器类型'void'

我需要做什么才能插入子视图并调用 viewDidAppear？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T23:50:30.033

感谢您对这个问题的帮助。我已经决定在插入子视图的方法中添加一个 viewDidAppear。

以下是目前为我工作的代码。

在最高级别视图控制器的 .m 文件中，以下代码设置 viewDidAppear 调用，然后插入第五个子视图。

```
-(IBAction) loadFifthView:(id)sender
{

[fifthViewController viewDidAppear:YES];  // sets up viewDidAppear

[self clearView];
[self.view insertSubview:fifthViewController.view atIndex:4];

} 
```

有了上面的代码片段，位于第五个视图控制器的 .m 文件中的以下代码片段报告它正在工作。

```
- (void)viewDidAppear:(BOOL)animated
{

NSLog(@" xxxxxxxxxxxxxxxx  inside viewDidAppear ");

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T03:11:40.833

如果您通过`ViewController.view`直接修改可见性来显示视图，您将不会收到`viewDidAppear`消息。您需要使用`ViewController`方法来显示视图，例如将控制器推入`UINavigationController`或使用`presentModalViewController`方法。您可以像调用`viewWillAppear:`和`viewDidAppear:`手动一样使用 hack，但我不喜欢这个主意。

# c++ - C++：编号排列程序无法正常工作

> ID：11697848
> 
> 赞同：0
> 
> 时间：2012-07-28T02:49:32.203
> 
> 标签：c++

我尝试制作一个程序来对数组的数字进行排序。

我已经尽力了，但是有这个问题：虽然我做了一个循环来交换数字并排列它们，但当我输出数组时，没有任何变化，数组保持不变。

代码将使一切更清晰

这是主要功能：

```
int main(){
int arr[10];
//For loop to get from user numbers to be put into the array
for ( int i = 0; i<10; i++){
    cout << "Enter the number to be recorded: ";
    cin >> arr[i];
    cout << endl;
}
// Set counter n to 0 ( counts numbes of number swaps)
int n = 0;
do {
    //re sets counter to 0
    n=0;

    //Check the entire loop if arr[i] bigger than arr[i+1] and swaps their values if true then adds 1 to n
    for ( int i = 0; i>9; i++){
        if(arr[i]>arr[i+1]){
            swap(&arr[i], &arr[i+1]);//swaps by sending the addresses of the two array elements the pointers in the swap function
            n++;
        }
    }
}while(n>0); // if counter = 0 then end (therefore the numbers are arranged correctly since no swapping happened)
cout << "The numbers ordered are:\n\n";
// Loop to output the arranged array
for (int i =0; i<10; i++){
    cout << arr[i] << ", ";
}
cout<<endl;
system("PAUSE");
return 0;} 
```

这是交换功能：

```
void swap ( int *p, int *t){
int temp;
temp = *p;
*p = *t;
*t = temp;} 
```

我希望你们能在这里帮助我解决我的问题并告诉我这段代码有什么问题

谢谢你们

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-28T02:58:11.107

仔细查看你的 for 循环......它的内容永远不会被执行。

```
for ( int i = 0; i>9; i++){ ... } 
```

条件`i>9`应该是`i<9`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T03:03:55.900

```
 for ( int i = 0; i>9; i++){
                    ^^^
                     here is your problem 
```

您已经初始化`i to the 0`并检查条件是 if `i is greater than 9`which is not **never true**所以**for 循环**的**条件**为**假**，因此它将被终止

 ****它应该是

```
for( int i = 0; i<9; i++) than the 
```

结果

```
 i=0 condition i<9 true  { come in the function body}
   i=1 condition i<9 true  { come in the function body}
   .
   .
   .
   i=8 condition i<9 true  { come in the function body}
   i=9 condition i<9 false  { } 
```****

# git - git svn dcommit 失败

> ID：11697852
> 
> 赞同：0
> 
> 时间：2012-07-28T02:51:14.853
> 
> 标签：git, dcommit

当我执行 git svn dcommit 时，它会报告如下错误：

```
git svn dcommit
Committing to http://192.168.33.203/svn/repos/mt6577/platform/branches/vendor-ALPS.ICS2.6577.SP.V1_HUAQIN77_CU_ICS ...
summit merge conflict: file or directory “mediatek/platform/mt6577/external/meta/sgx” is out of date；please update: resource out of date; try updating at /usr/local/libexec/git-core/git-svn line 579 
```

我的操作：

1.  在本地执行三个提交（commit34，commit35，commit36）

2.  git svn dcommit 这三个提交到 svn

3.  通过 rebase 命令修改 commit34,commit35

4.  git svn dcommit ，然后报以上错误。

如何处理错误，非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T04:12:43.123

首先，永远不要在使用 git 时**对已推送回存储库的提交进行 rebase 。**尽管您正在使用 git-svn， `rebase`但这些提交并不是一个好主意。为什么？因为`rebase`改变了提交历史，所以当你在本地工作时这是可以的。

在您的情况下，您可以运行`git svn fetch/rebase`并解决任何冲突，然后`dcommit`将其返回。

# audio - C# 中的语音检测

> ID：11697854
> 
> 赞同：11
> 
> 时间：2012-07-28T02:51:43.060
> 
> 标签：audio, real-time, signal-processing, speech-recognition, voice

我正在寻找一个简单的 C# 实时语音检测库。输入应该是音频流，输出应该是“人声”或“非人声”。我对语音识别或信号处理一无所知，我将不胜感激任何形式的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-30T13:37:56.947

查看“[使用 C# 检测 WAV 文件中的音频静音](https://stackoverflow.com/questions/19353/detecting-audio-silence-in-wav-files-using-c-sharp)”的答案。我假设输入是一个 WAV 文件。如果不是，请提供音频流的格式，或者如果您打算直接从麦克风获取输入。如果您可以测量音频流中的静音量并且知道音频流的持续时间，那么您可以计算通话时间量。答案中的链接已失效，但如果您访问 codeproject.com 并搜索“C# wave form”，您将在许多项目中获得成功，这些项目向您展示如何解释和操作 wav 文件。如果有背景噪音，检测静音可能有点主观。您需要为静音选择一个最小音量阈值，低于该阈值的任何内容都被视为静音。

# python - Python多线程，同时运行两个函数

> ID：11697855
> 
> 赞同：2
> 
> 时间：2012-07-28T02:51:45.993
> 
> 标签：python, multithreading

所以我正在学习套接字编程并编写了一个漂亮的小聊天服务器。我遇到的问题是我的客户不能同时读写。我不太确定如何设置。

这就是我到目前为止所拥有的，我希望 read() 和 write() 同时运行（这不是关于同时读取和写入 - 它是关于能够在 input() 挂起等待时接收消息用于用户输入。）：

```
import socket 
import threading

class Client(threading.Thread):

    def __init__(self):
        self.socket = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
        self.socket.connect(('127.0.0.1', 1234))
        print('Client connected to server')

        self.readThread = threading.Thread.__init__(self)
        self.writeThread = threading.Thread.__init__(self)

    def read(self):
        data = self.socket.recv(1024)
        if data:
            print('Received:', data)

    def write(self):
        message = input()
        self.socket.send(bytes(message, 'utf-8'))

client = Client()

while True:
    #do both 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T04:07:37.593

你真的很亲近。尝试这样的事情：

```
import socket 
import threading

class Client(threading.Thread):

    def __init__(self):
        self.socket = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
        self.socket.connect(('127.0.0.1', 1234))
        print('Client connected to server')

        t = threading.Thread(target = self.read)
        t.daemon = True # helpful if you want it to die automatically
        t.start()

        t2 = threading.thread(target = self.write)
        t2.daemon = True
        t2.start()

    def read(self):
        while True:
            data = self.socket.recv(1024)
            if data:
                print('Received:', data)

    def write(self):
        while True:
            message = input()
            self.socket.send(bytes(message, 'utf-8'))

client = Client() 
```

值得指出的是，如果您以这种方式从单个终端读取和写入，您的提示可能会有点失控。我想虽然您从打印语句开始，但最终会将数据收集到您应用程序中的其他容器中。

# api - Asana API 返回不正确的数据

> ID：11697856
> 
> 赞同：0
> 
> 时间：2012-07-28T02:51:56.780
> 
> 标签：api, asana

我从 Asana API 获得的数据以某种方式返回了不正确的数据。

例如，任务返回的顺序与当前的 Web UI 不对应。这对于我遍历项目并在某个标题下执行任务是必要的。

此外，当我从用户那里获得任务时，assignee_status 也是不正确的。我今天完成了一项任务，但assignee_status 仍然是今天。这是正确的行为吗？

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T07:56:19.897

（我在 Asana 工作）

重要的是要注意优先级（顺序）、受让人状态和完成是任务的三个完全独立且可独立修改的属性。Asana Web UI 综合了这些任务的视图，首先向您显示已完成的任务，然后按优先级顺序显示其余任务。如果是受理人视图，则任务将被拆分为`today`、`upcoming`和`later`，所有`today`任务首先出现，按优先级排序，然后是 all `upcoming`，然后是 all `later`。

在 API 中，无论完成或受让人状态如何，任务都按优先级顺序呈现。如果您想过滤视图或以与 Asana UI 相同的方式呈现它，您可能需要进行类似的分组。您拥有所需的所有信息：完成和受理人状态来自任务数据，相对优先级可以由任务返回的相对顺序确定。

如果这不能解决您的问题，您能否详细说明您期望的任务顺序以及您收到的内容？

# javascript - 在javascript中“序列化”函数以供以后使用的正确方法是什么

> ID：11697863
> 
> 赞同：7
> 
> 时间：2012-07-28T02:53:41.020
> 
> 标签：javascript, json, function, object

我有一个我想从数据库中即时加载的对象“库”。每个对象都有自己的特殊函数，根据对象类型在特定时间调用这些函数。理想情况下，我希望能够做到这一点，尽管有人指出这不起作用：

```
library = {
  "myObj" : {"name" : "myObj", "type" : "myType", "function" : function () { } } //, etc
} 
```

字符串`"myObj"`在我的程序中传递了很多，但我一次只需要访问对象的某些值，并且在某些情况下需要运行一个特定的函数。问题是我正在研究成百上千个可能存在的具有不同功能的潜在对象。

像这样存储要调用的函数的“正确”方式是什么。我知道在执行期间调用 eval 可能非常不安全，从而启用 xss 攻击等等。我真的很想避免大量的 switch 语句或额外功能的臃肿加载。我还希望解决方案尽可能简洁。

这不可能是第一次出现。;/

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-28T03:16:34.167

只需在将函数加载为字符串后使用 eval 重新创建函数。因此，如果您`myObj`从 JSON 反序列化一个对象，并且您有一个属性：

```
myObj = {
    ....
    function: "function() { ... }"
} 
```

你可以很容易地把它变成一个真正的功能：

```
eval("myObj.func = " + myObj.func); 
```

[http://jsfiddle.net/kceTr/](http://jsfiddle.net/kceTr/)

哦 - 我不确定那是编辑还是我之前错过了 - 但重新：评估。

评估是一个工具。您想在数据库中存储一个函数。如果您必须“评估”将其转换为代码，或者有其他一些神奇的方法可以做到这一点，这真的没有太大区别：如果有人可以更改您数据库中的数据，那么他们可以更改一个函数。

如果你需要存储一个函数，那么 eval 就是你的工具。它本质上并不“坏”，它很糟糕，因为它很容易被滥用。用得好不好，就看你自己了。

请记住，在客户端上运行的任何东西仍然只是在客户端上运行。恶意的人无法使用 eval 做任何事情，他们无法更轻松地使用 Chrome 调试器。任何人都可以随时在客户端上运行他们想要的任何代码，由您的服务器决定如何处理它接收到的内容。首先，客户端上没有什么安全的...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-28T04:15:36.920

更改对象的原型是我的一半想法。

你的图书馆就像

```
library = {
  "myObj" : {"name" : "myObj", "type" : "myType", "function" : function () { } } //, etc
} 
```

您有一个对象（我们称之为`theObj`），您知道它是一个`myObj`（由于可能是字符串？属性？）

```
theObj.__proto__ = library["myObj"]; 
```

这样你就可以执行

```
theObj.function(...); 
```

[jsfiddle](http://jsfiddle.net/6h2an/2/)示例（这很*粗糙*！）。另外，小心**proto**，它已被弃用 ( [1](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Object/proto) ) ( [2](http://ejohn.org/blog/objectgetprototypeof/) )

至于序列化函数，您可以使用脚本标记来获取它们，该标记​​指向服务器端的东西，从数据库中获取它们并返回 js 吗？只是在渲染页面时将它们内联（在脚本块中）？或者，如果所有其他方法都失败了， eval 应该可以工作，只要您知道存储在数据库中的函数是干净且安全的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-28T06:10:53.423

你用它做什么就好了。但是，如果我是你，为了可读性和整洁性，我宁愿在外部创建函数并将其分配给你的对象键。

你不需要 eval 这里。而是在您想要访问存储的功能时这样做 -

库.myObj.function()

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-28T02:58:14.397

更好的方法可能是在您“休眠”对象时序列化对象的属性，并通过定义适当的方法将其属性重新附加到对象的新实例来“唤醒”对象。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-12-31T22:44:48.847

*   您尽最大努力对函数进行参数化，以便最终得到尽可能少的类型。
*   将它们存储在单独的 JS 文件中的服务器上，然后按名称动态加载所需的文件。
*   在 JSON 中，只存储包含您需要的函数的文件的名称。而且，当然，您将缓存已加载的文件，以便在服务器上轻松进行。

只是我的两分钱。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-08-11T12:42:29.747

没有正确的方法可以做到这一点，因为它通常不是一个好主意。

但是，如果您想这样做，您可以简单地使用`.toJSON`方法扩展 Function 的原型。

```
Function.prototype.toJSON = function(){ return this.toString(); } 
```

然后你可以简单地使用 JSON.stringify 并且函数将被序列化为字符串。

在大多数情况下，这通常不是一个好主意。您想要这样做的情况很少，即使那样，也可能有更好的方法。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-01-31T19:36:35.243

您只能真正序列化一个包含`require`调用的整个文件。如果这样做，您可以创建一个模块、exports 和 module.exports，使用围绕它的函数评估文件并从中提取 module.exports。

它并不完全安全，但为此您需要使用[VM2](http://npmjs.com/vm2)和[价值审查](http://npmjs.com/value-censorship)（我一直在研究）之类的东西，以避免他们调用 eval() 并拥有您的机器或整个网络。

# javascript - 复制图像时如何设置要复制到剪贴板的文本？

> ID：11697868
> 
> 赞同：9
> 
> 时间：2012-07-28T02:54:45.630
> 
> 标签：javascript, html, image, copy-paste, alt

我正在构建一个网页，并且遇到了一些可以做的事情；当有人试图复制图像时，设置要复制到剪贴板的文本，可能与替代文本相同。javascript/html有什么办法可以做到这一点吗？如果是这样，请解释一下。

谢谢你的帮助！

编辑：基本上，我想让我的用户突出显示图像，按 control-c，然后将替代文本存储在他们的剪贴板中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2019-04-08T18:44:19.347

这*是*可能的，因为 Twitch.tv 在聊天中复制表情图像时会这样做。诀窍是使用[`copy`事件](https://developer.mozilla.org/en-US/docs/Web/API/Element/copy_event)。

```
const parent = document.getElementById('parent');
parent.addEventListener('copy', event => {
  let selection = document.getSelection(),
    range = selection.getRangeAt(0),
    contents = range.cloneContents(),
    copiedText = '';

  for (let node of contents.childNodes.values()) {
    if (node.nodeType === 3) {
      // text node
      copiedText += node.textContent;
    } else if (node.nodeType === 1 && node.nodeName === 'IMG') {
      copiedText += node.dataset.copyText;
    }
  }

  event.clipboardData.setData('text/plain', copiedText);
  event.preventDefault();
  console.log(`Text copied: '${copiedText}'`);
});
```

```
#parent {
  display: flex;
  flex-direction: row;
  align-content: center;
  align-items: center;
  flex-grow: 0;
}

#parent,
#pasteHere {
  padding: 0.5rem;
  border: 1px solid black;
}

.icon {
  width: 32px;
}

#pasteHere {
  margin-top: 1rem;
  background: #E7E7E7;
}
```

```
<p>Copy the line below:</p>

<div id="parent">
  Some text <img src="https://cdn.sstatic.net/Sites/stackoverflow/company/img/logos/so/so-icon.svg?v=f13ebeedfa9e" class="icon" data-copy-text="foo" /> some more text <img src="https://cdn.sstatic.net/Sites/stackoverflow/company/img/logos/so/so-icon.svg?v=f13ebeedfa9e"
    class="icon" data-copy-text="bar" />
</div>

<div id="pasteHere" contenteditable>Paste here!</div>
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T03:56:32.100

我见过像[tynt](http://www.tynt.com/)这样的服务做这样的事情。[2065880 Javascript：劫持副本？](https://stackoverflow.com/questions/2065880/javascript-hijack-copy)谈论这些技术，就像[1203082 Injecting text when content is compatible from Web Page](https://stackoverflow.com/questions/1203082/injecting-text-when-content-is-copied-from-web-page)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-28T03:23:14.800

我不认为你可以。如果您可以通过浏览器挂钩键盘事件，那将是一个巨大的安全问题。你可以用几行代码捕获击键并将它们发送到 Web 服务，这很容易毁掉一些人的生活。

您可以使用 onmousedown 检测鼠标按下事件，方法是将其以某种方式附加到图像上，并将替代文本存储在隐藏字段或 cookie 中，然后`DoSomething()`从那里存储。

# java - fib 递归的大 O 表示法

> ID：11697875
> 
> 赞同：0
> 
> 时间：2012-07-28T02:57:12.780
> 
> 标签：java, algorithm, big-o, fibonacci

以下函数的 Big-O 运行时间是多少？解释。

```
static int fib(int n){
  if (n <= 2)
     return 1;
  else 
     return fib(n-1) + fib(n-2)
   } 
```

另外，您将如何使用更快的 Big-O 运行时迭代地重写 fib(int n) 函数？这是否是 O(n) 的最佳方式：

```
 public static int fibonacci (int n){
 int previous = -1;
 int result = 1;
 for (int i = 0; i <= n; ++i)
 {
 int sum = result + previous;
 previous = result;
 result = sum;
 }
 return result;
}
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-28T03:03:35.310

**证明**

您将要计算的时间函数建模为要计算的时间加上要计​​算的时间加上将它们加在一起的时间的总和 ( `Fib(n)`) 。`Fib(n-1)``Fib(n-2)``O(1)`

`T(n<=1) = O(1)`

`T(n) = T(n-1) + T(n-2) + O(1)`

你解决这个递归关系（例如使用生成函数），你最终会得到答案。

或者，您可以绘制递归树，它将具有深度`n`并直观地找出该函数是渐近的。然后你可以通过归纳证明你的猜想。`O(2`^(`n`)`)`

基数：`n = 1`很明显

假设，*因此*`T(n-1) = O(2`^(`n-1`)`)`

 *`T(n) = T(n-1) + T(n-2) + O(1)` *这等于*

`T(n) = O(2`^(`n-1`)`) + O(2`^(`n-2`)`) + O(1) = O(2`^(`n`)`)`

**迭代版本**

*请注意，即使这种实现也只适用于 n 的小值，因为 Fibonacci 函数呈指数增长，并且 32 位有符号 Java 整数只能保存前 46 个 Fibonacci 数*

```
int prev1=0, prev2=1;
for(int i=0; i<n; i++) {
  int savePrev1 = prev1;
  prev1 = prev2;
  prev2 = savePrev1 + prev2;
}
return prev1; 
```*

# vim - 如何防止NERDTree缓冲区删除？（或重新加载）

> ID：11697883
> 
> 赞同：2
> 
> 时间：2012-07-28T02:58:43.703
> 
> 标签：vim, nerdtree

如果我`:bd`在 NERDTree 窗口，我无法通过关闭 NERDTree 窗口并重新打开它来加载它：它仍然是空的。

如何解决这个问题？`:bd`理想情况下，我不想将此缓冲区中的任何操作归因于，但适当的重新加载快捷方式可以做到。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-28T03:53:34.800

即使`:NERDTree`在`:bd`. 也许其他一些设置导致它重新打开空？

如果要`:bd`在 NERDTree 缓冲区中禁用，`autocmd`请在 .vimrc 中使用：

```
autocmd FileType nerdtree cnoreabbrev <buffer> bd <nop> 
```

# python - 将 Django QuerySet 转换为 pandas DataFrame

> ID：11697887
> 
> 赞同：113
> 
> 时间：2012-07-28T02:59:02.687
> 
> 标签：python, django, pandas

我将 Django QuerySet 转换为 pandas `DataFrame`，如下所示：

```
qs = SomeModel.objects.select_related().filter(date__year=2012)
q = qs.values('date', 'OtherField')
df = pd.DataFrame.from_records(q) 
```

它有效，但有没有更有效的方法？

* * *

## 回答 #1

> 赞同：120
> 
> 时间：2013-04-29T05:39:15.383

```
import pandas as pd
import datetime
from myapp.models import BlogPost

df = pd.DataFrame(list(BlogPost.objects.all().values()))
df = pd.DataFrame(list(BlogPost.objects.filter(date__gte=datetime.datetime(2012, 5, 1)).values()))

# limit which fields
df = pd.DataFrame(list(BlogPost.objects.all().values('author', 'date', 'slug'))) 
```

以上是我如何做同样的事情。最有用的补充是指定您感兴趣的字段。如果它只是您感兴趣的可用字段的子集，那么我想这会提高性能。

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2015-05-01T16:25:15.653

Django Pandas 巧妙地解决了这个问题：[https ://github.com/chrisdev/django-pandas/](https://github.com/chrisdev/django-pandas/)

从自述文件：

```
class MyModel(models.Model):
    full_name = models.CharField(max_length=25)
    age = models.IntegerField()
    department = models.CharField(max_length=3)
    wage = models.FloatField()

from django_pandas.io import read_frame
qs = MyModel.objects.all()
df = read_frame(qs) 
```

* * *

## 回答 #3

> 赞同：25
> 
> 时间：2019-03-08T01:14:03.127

在 values_list() 上转换查询集将比直接在 values() 上更节省内存。由于方法 values() 返回字典列表（键：值对）的查询集，因此 values_list() 仅返回元组列表（纯数据）。它将节省大约 50% 的内存，只需要在调用 pd.DataFrame() 时设置列信息。

```
方法一：
    queryset = models.xxx.objects.values("A","B","C","D")
    df = pd.DataFrame(list(queryset)) ## 消耗大量内存
    #df = pd.DataFrame.from_records(queryset) ## 有效，但内存使用没有太大变化

方法二：
    查询集 = models.xxx.objects.values_list("A","B","C","D")
    df = pd.DataFrame(list(queryset), columns=["A","B","C","D"]) ##这样会节省50%的内存
    #df = pd.DataFrame.from_records(queryset, columns=["A","B","C","D"]) ##不起作用。与数据类型崩溃的是查询集而不是列表。

```

我在我的项目中使用超过 100 万行数据对此进行了测试，峰值内存从 2G 减少到 1G。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-03-17T17:12:14.670

你也许可以使用 model_to_dict

```
import datetime
from django.forms import model_to_dict
pallobjs = [ model_to_dict(pallobj) for pallobj in PalletsManag.objects.filter(estado='APTO_PARA_VENTA')] 
df = pd.DataFrame(pallobjs)
df.head() 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-09-05T18:28:43.527

从 Django 的角度来看（我不熟悉`pandas`），这很好。我唯一担心的是，如果您有大量记录，您可能会遇到内存问题。如果是这种情况，那么类似于这种[内存高效查询集迭代器](http://djangosnippets.org/snippets/1949/)的东西将是必要的。（所写的片段可能需要一些重写以允许您巧妙地使用`.values()`）。

# wpf - 当应用程序最小化时，有没有办法让 Popup 保持打开状态？

> ID：11697888
> 
> 赞同：0
> 
> 时间：2012-07-28T02:59:03.180
> 
> 标签：wpf, xaml, popup

当我最小化应用程序时，弹出窗口也会最小化。有没有办法防止最小化弹出窗口？

编辑：这里是 xaml

```
<Popup Name="popup" StaysOpen="True" IsOpen="True" Placement="Absolute" AllowsTransparency="True">
    <Border ... />
</Popup> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T03:42:15.353

这`Popup`是 WpfWindow 的一部分，因此当窗口最小化时`Popup`也是。你最好的选择是使用 NotifyIcon，Wpf 没有原生的，但我过去曾成功使用过[Philipp Sumi](http://www.codeproject.com/Articles/36468/WPF-NotifyIcon)的这个。

# css - 悬停时菜单项四处移动

> ID：11697894
> 
> 赞同：0
> 
> 时间：2012-07-28T03:00:22.053
> 
> 标签：css, drop-down-menu, html-lists, move, nav

我最近提交了另一个问题，在创建类似[RackSpace](http://rackspace.com)的菜单时以及当我使用如下代码时得到了回答：

   == CSS ==

```
 .main > li{
        float: left;
        padding: 5px;
    }

    .sub li {
        height: 30px;
        background-color: black;
        width: 1000px;
        display: none;
    }

    .main > li:hover .sub li {
        display: block;
    } 
```

   == HTML ==

```
 <ul class="main">
    <li>
    Hosting
    <ul class="sub">
    <li>cPanel Hosting Solutions</li>
    <li>cPanel Reseller Solutions</li>
    <li>Plesk Hosting Solutions</li>
    <li>Plesk Reseller Solutions</li>
    </ul>
    </li>
    <li>
    Menu 2
    <ul class="sub">
    <li>Lorem</li>
    <li>Ipsum</li>
    <li>Dolor</li>
    <li>Sit</li>
    <li>Amet</li>
    </ul>
    </li>
    <li>
    Menu 3
    <ul class="sub">
    <li>Lorem</li>
    <li>Ipsum</li>
    <li>Dolor</li>
    <li>Sit</li>
    <li>Amet</li>
    </ul>
    </li>
    <li>
    Menu 4
    <ul class="sub">
    <li>Lorem</li>
    <li>Ipsum</li>
    <li>Dolor</li>
    <li>Sit</li>
    <li>Amet</li>
    </ul>
    </li>
    </ul> 
```

这当然需要样式，但我的主要观点是，当将鼠标悬停在菜单项上时，它似乎将以下项目移动了过来。我怎样才能让它不移动以下菜单项？我的意思的一个例子可以[在这个链接](http://i.imgur.com/YbUY3.png)中找到。

提前致谢，

斯科特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T04:22:19.227

只需添加一个`position: absolute`到您的子菜单项。

[http://jsfiddle.net/hA4RE/](http://jsfiddle.net/hA4RE/)

# google-closure - 为什么我的 goog.ui.Component 中没有定义 `setModel()`？

> ID：11697895
> 
> 赞同：1
> 
> 时间：2012-07-28T03:00:30.197
> 
> 标签：google-closure, google-closure-library

我做了一个 goog.ui.Component 的子类：

```
/**
 * Renders the bottom pane.
 * @param {!myapp.Entity} entity An entity.
 * @param {goog.dom.DomHelper=} opt_domHelper Optional DOM helper.
 * @constructor
 * @extends {goog.ui.Component}
 */
myapp.BottomPane = function(entity, opt_domHelper) {
  goog.base(this, opt_domHelper);
  this.setModel(entity);
}
goog.inherits(myapp.BottomPane, goog.ui.Component); 
```

但是，当我运行我的 javascript 时，Chrome 控制台会指出`Uncaught TypeError: Object #<Object> has no method 'setModel'`. 我设置了一个断点并意识到，事实上，我的`myapp.BottomPane`实例`setModel`在原型链中缺少一个方法。这很奇怪，因为文档指出所有组件都具有此方法：[http ://closure-library.googlecode.com/svn/docs/class_goog_ui_Component.html](http://closure-library.googlecode.com/svn/docs/class_goog_ui_Component.html)

为什么我`goog.ui.Component`缺少`setModel`方法？我知道调用`goog.base(this, opt_domHelper);`是有效的，因为我的对象有一个 DOM 助手。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T04:43:00.450

我能够`Object #<Object> has no method 'setModel'`通过执行构造函数`myapp.BottomPane`而不使用`new`关键字来重现错误。

```
var bottomPane = myapp.BottomPane({id: 'my_id'}); // Results in error. 
```

确保用于`new`创建实例。

```
var bottomPane = new myapp.BottomPane({id: 'my_id'}); // Okay 
```

# powershell - Powershell V2将查询的返回值分配给变量返回NULL

> ID：11697896
> 
> 赞同：1
> 
> 时间：2012-07-28T03:00:44.423
> 
> 标签：powershell, odbc

我认为我做错了，我试图使用 ODBC 从 Powershell 2 查询 Postgres DB，如果我使用 PGADMIN（Postgres GUI）查询，DB 会返回这样的字符串：

0/164DAAB0

那是一个十六进制，开头有两个额外的字符。我需要提取十六进制。

当我这样做并将其分配给一个变量并打印该变量时，我什么也没有得到，是空的。我在一台装有 Powershell V3 的电脑上试过，它工作得很好，但我需要让它在 PS2 上工作。我希望有人发现我的问题，我认为有一种不同/更好的方法可以做到这一点，所以我的变量获取查询返回的字符串。

代码是：

```
$MasterDBIP = "172.16.50.20";
$MasterDBPort = "5432";
$MasterDB = "database1";
$MasterUid = "postgres";
$MasterPassword = "postgres";
$MasterMasterDBConnectionString = "Driver={PostgreSQL Unicode(x64)};Server=$MasterDBIP;Port=$MasterDBPort;Database=$MasterDB;Uid=$MasterUid;Pwd=$MasterPassword;"
$MasterDBConn = New-Object System.Data.Odbc.OdbcConnection
$MasterDBConn.ConnectionString = $MasterMasterDBConnectionString;
$MasterDBConn.Open();
$MasterDBCmdCurr = $MasterDBConn.CreateCommand();
$MasterDBCmdCurr.CommandText = "SELECT pg_last_xlog_receive_location();";
$MasterDBResultCurr = $MasterDBCmdCurr.ExecuteReader();
$MasterUserTableCurr=New-Object system.data.datatable
$MasterUserTableCurr.load($MasterDBResultCurr)
[string]$MasterStringValueCurr = $MasterUserTableCurr.pg_last_xlog_receive_location;
$MasterDBConn.Close();
$MasterStringValueCurr;
exit (0) 
```

附加信息：

命令 $MasterUserTableCurr | 获取会员回报：

```
 TypeName: System.Data.DataRow

Name                          MemberType            Definition
----                          ----------            ----------
AcceptChanges                 Method                System.Void AcceptChanges()
BeginEdit                     Method                System.Void BeginEdit()
CancelEdit                    Method                System.Void CancelEdit()
ClearErrors                   Method                System.Void ClearErrors()
Delete                        Method                System.Void Delete()
EndEdit                       Method                System.Void EndEdit()
Equals                        Method                bool Equals(System.Object obj)
GetChildRows                  Method                System.Data.DataRow[] GetChildRows(string relationName), System.Data.DataRow[] GetChildRows(string relat...
GetColumnError                Method                string GetColumnError(int columnIndex), string GetColumnError(string columnName), string GetColumnError(...
GetColumnsInError             Method                System.Data.DataColumn[] GetColumnsInError()
GetHashCode                   Method                int GetHashCode()
GetParentRow                  Method                System.Data.DataRow GetParentRow(string relationName), System.Data.DataRow GetParentRow(string relationN...
GetParentRows                 Method                System.Data.DataRow[] GetParentRows(string relationName), System.Data.DataRow[] GetParentRows(string rel...
GetType                       Method                type GetType()
HasVersion                    Method                bool HasVersion(System.Data.DataRowVersion version)
IsNull                        Method                bool IsNull(int columnIndex), bool IsNull(string columnName), bool IsNull(System.Data.DataColumn column)...
RejectChanges                 Method                System.Void RejectChanges()
SetAdded                      Method                System.Void SetAdded()
SetColumnError                Method                System.Void SetColumnError(int columnIndex, string error), System.Void SetColumnError(string columnName,...
SetModified                   Method                System.Void SetModified()
SetParentRow                  Method                System.Void SetParentRow(System.Data.DataRow parentRow), System.Void SetParentRow(System.Data.DataRow pa...
ToString                      Method                string ToString()
Item                          ParameterizedProperty System.Object Item(int columnIndex) {get;set;}, System.Object Item(string columnName) {get;set;}, System...
pg_last_xlog_receive_location Property              System.String pg_last_xlog_receive_location {get;} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T12:04:07.433

我没有那种环境，所以很难回答，但无论如何我都会尝试。只是为了澄清，当你执行时：

```
$MasterUserTableCurr.pg_last_xlog_receive_location 
```

你返回：0/164DAAB0，你所追求的值应该是：64DAAB0，对吧？

你能粘贴这些命令的结果吗？

```
$MasterUserTableCurr | Get-Member 
```

和

```
$MasterUserTableCurr.pg_last_xlog_receive_location | Get-Member 
```

# javascript - 如何使用行边框更改 HTML 表格中单个行的高度？

> ID：11697900
> 
> 赞同：2
> 
> 时间：2012-07-28T03:01:28.040
> 
> 标签：javascript, html, css, html-table, resize

我正在寻找一种能够通过选择行边框并拖动它来更改表格中行的高度的方法，如果可能的话，不要更改为预设大小。

场景如下：我在表的行中表示了某些数据。根据行的高度，数据的表示可能会有所不同，即如果行高很小，它可能是数据的摘要，但如果行高超过一定大小，则可能是详细的描述。我希望能够选择有问题的行并拖动它来改变它的高度。

如果由于某种原因无法进行自由流动变化，我可以使用 3 级高度。场景是，如果我将行高拖到设置限制 x 之外，它会捕捉到下一个上限 x'。

我知道您可以使用 css/js 更改表格元素/行的大小以适应预定义的条件，但我找不到任何适合我需要的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T05:38:27.193

在正常情况下（不使用插件），不可能用鼠标调整一行表格的大小。因此，或者您可以使用 CSS 实现行。你可以在这里查看我为你创建的 jsfiddle。[http://jsfiddle.net/sakirullahi/Npuyc/5/](http://jsfiddle.net/sakirullahi/Npuyc/5/)

在此我在 jquery 中使用了**可调整大小**的事件。

# jquery - 继承jQuery自动完成时如何挂钩到选定的项目

> ID：11697902
> 
> 赞同：4
> 
> 时间：2012-07-28T03:01:48.320
> 
> 标签：jquery, jquery-ui, autocomplete

我正在尝试扩展自动完成功能，以便在选择项目时显示辅助标签。例如，给定一个显示项目的自动完成功能，项目名称将显示在包含代码的输入框旁边的 span 标记中。

查看自动完成源代码，我看到过滤值的下拉列表是使用 jQuery 菜单小部件呈现的，并且当在文本框中键入特定键时，会在菜单小部件上调用不同的函数。例如，当按下 enter 和 tab 时，将调用菜单小部件的 select() 函数。

配置菜单小部件，以便在引发选定事件时，自动完成小部件获取选定项目并引发其自己的选择事件，然后在文本框中显示项目值。

所以，给定以下代码

```
(function ($, undefined) {
    $.widget('xyz.autocompletePlus', $.ui.autocomplete, {
        options: {
            selectedDescriptor: null
        },

        _create: function () {
            $.ui.autocomplete.prototype._create.call(this, this.options);

            if (!this.options.selectedDescriptor) {
                $("<span class='ui-xyz-autocomplete-label'>").insertAfter(this.element).html('Nothing selected');
            }
        },

        _setOption: function (name, value) {
            $.ui.autocomplete.prototype._setOption.call(this, arguments);
        },

        destroy: function () {
            $.ui.autocomplete.prototype.destroy.call(this);
            $.Widget.prototype.destroy.call(this);
        }
    });
} (jQuery)); 
```

如何挂钩在选择项目时调用的代码，以便我可以插入自己的逻辑？这个想法是，而不是执行

```
if ( false !== self._trigger( "select", event, { item: item } ) ) {
   self.element.val( item.value );
} 
```

我想要类似的*东西*（不是实际的代码，但可以理解）

```
if ( false !== self._trigger( "select", event, { item: item } ) ) {
   self.element.val( item.value );
   this.options.selectedDescriptor.html( item.description);
} 
```

如果我没有继承而是将自动完成封装在一个新的小部件中，我可以绑定到自动完成选择事件并做我的事情，但是继承我很难过。

**编辑：**

添加了我需要替换或挂钩的自动完成源。它从 jquery-ui-1.8.22.js 的第 6137 行开始

```
this.menu = $( "<ul></ul>" )
   ...
   ...
   .menu({
      focus: function( event, ui ) {
         ...
         ...
         }
      },
      selected: function( event, ui ) {
         var item = ui.item.data( "item.autocomplete" ),
            previous = self.previous;

         // only trigger when focus was lost (click on menu)
         if ( self.element[0] !== doc.activeElement ) {
            self.element.focus();
            self.previous = previous;
            // #6109 - IE triggers two focus events and the second
            // is asynchronous, so we need to reset the previous
            // term synchronously and asynchronously :-(
            setTimeout(function() {
               self.previous = previous;
               self.selectedItem = item;
            }, 1);
         }

         if ( false !== self._trigger( "select", event, { item: item } ) ) {
            self.element.val( item.value );
         }
         // reset the term after the select event
         // this allows custom select handling to work properly
         self.term = self.element.val();

         self.close( event );
         self.selectedItem = item;
      },
      ...
      ... 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T05:37:52.917

您要扩充的代码位于私有事件处理程序中。继承确实对此无济于事。

但是，您可以在`_create()`方法中取消绑定现有处理程序并注册一个新的处理程序来执行您想要的操作。不幸的是，这涉及复制原始处理程序的代码：

```
_create: function() {
    $.ui.autocomplete.prototype._create.call(this, this.options);

    if (!this.options.selectedDescriptor) {
        this.options.selectedDescriptor
            = $("<span class='ui-xyz-autocomplete-label'>")
                .insertAfter(this.element).html("Nothing selected");
    }
    this.menu.element.off("menuselected")
                     .on("menuselected", function(event, ui) {
        var item = ui.item.data("item.autocomplete");
        if (false !== this._trigger("select", event, { item: item })) {
            this.element.val(item.value);
        }
        this.close(event);
        this.previous = this.element.val();
        // only trigger when focus was lost (click on menu)
        var doc = this.element[0].ownerDocument;
        if (this.element[0] !== doc.activeElement) {
            this.element.focus();
        }
    });
} 
```

# python - 带有getter方法的python私有字段

> ID：11697904
> 
> 赞同：0
> 
> 时间：2012-07-28T03:02:51.207
> 
> 标签：python, oop, design-patterns, private-members

我一直在查看以下代码，想知道是否有人可以澄清为什么程序员使用 getter 方法将 __wasActive 设为私有字段？这仅仅是因为在此文件之外编写代码时，程序员希望私有字段只能通过方法 wasActive() 访问，而不是直接通过编写例如 Cell.wasActive 来访问？谢谢！

```
class Cell(object):

    def __init__(self, column, index):
        self.segments = []
        self.column = column
        self.index = index 
        self.isActive = False
        self.__wasActive = False #Why private field?
        self.isPredicting = False
        self.__wasPredicted = False
        self.isLearning = False
        self.__wasLearning = False 

    @property
    def wasActive(self):
        return self.__wasActive

    @property
    def wasLearning(self):
        return self.__wasLearning

    @property
    def wasPredicted(self):
        return self.__wasPredicted 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T03:08:31.647

首先，“私人”成员的原因总是（几乎）[封装](http://en.wikipedia.org/wiki/Encapsulation_%28object-oriented_programming%29)。在这种情况下，只有一个`Cell`类可以更新其`__wasActive`字段，因此作者可以睡得很好，而不必担心其他人会“弄乱”他的类的状态。当其他东西发生变化时，也许该字段的值会更新。但是，如果不查看您似乎没有提供的相关代码片段，我们就不知道这一点。但是，getter 可以让“其他人”随时免费读取该值。

# fabric - Fabric 不使用 SSH 密钥

> ID：11697907
> 
> 赞同：0
> 
> 时间：2012-07-28T03:03:22.517
> 
> 标签：fabric

> **可能重复：**
> [在 Fabric 中使用 SSH 密钥文件](https://stackoverflow.com/questions/5327465/using-an-ssh-keyfile-with-fabric)

在我的寓言中

```
env.ip = 'x.x.x.x' 
env.hosts = [env.ip] 
env.user = 'root'
env.environment = 'production' 
```

我有这样的配置，但是当我尝试使用 run(command) 执行某些操作时，它提示我输入 root 密码，为什么？

在我的本机 Terminal.app 中，我可以在不输入密码的情况下 ssh xxxx。

我已经在 fabfile 中启用了日志记录，这是输出

```
DEBUG:ssh.transport:starting thread (client mode): 0xaa84dd0L
INFO:ssh.transport:Connected (version 2.0, client OpenSSH_5.8p1)
DEBUG:ssh.transport:kex algos:['ecdh-sha2-nistp256', 'ecdh-sha2-nistp384', 'ecdh-sha2-nistp521', 'diffie-hellman-group-exchange-sha256', 'diffie-hellman-group-exchange-sha1', 'diffie-hellman-group14-sha1', 'diffie-hellman-group1-sha1'] server key:['ssh-rsa', 'ssh-dss'] client encrypt:['aes128-ctr', 'aes192-ctr', 'aes256-ctr', 'arcfour256', 'arcfour128', 'aes128-cbc', '3des-cbc', 'blowfish-cbc', 'cast128-cbc', 'aes192-cbc', 'aes256-cbc', 'arcfour', 'rijndael-cbc@lysator.liu.se'] server encrypt:['aes128-ctr', 'aes192-ctr', 'aes256-ctr', 'arcfour256', 'arcfour128', 'aes128-cbc', '3des-cbc', 'blowfish-cbc', 'cast128-cbc', 'aes192-cbc', 'aes256-cbc', 'arcfour', 'rijndael-cbc@lysator.liu.se'] client mac:['hmac-md5', 'hmac-sha1', 'umac-64@openssh.com', 'hmac-ripemd160', 'hmac-ripemd160@openssh.com', 'hmac-sha1-96', 'hmac-md5-96'] server mac:['hmac-md5', 'hmac-sha1', 'umac-64@openssh.com', 'hmac-ripemd160', 'hmac-ripemd160@openssh.com', 'hmac-sha1-96', 'hmac-md5-96'] client compress:['none', 'zlib@openssh.com'] server compress:['none', 'zlib@openssh.com'] client lang:[''] server lang:[''] kex follows?False
DEBUG:ssh.transport:Ciphers agreed: local=aes128-ctr, remote=aes128-ctr
DEBUG:ssh.transport:using kex diffie-hellman-group1-sha1; server key type ssh-rsa; cipher: local aes128-ctr, remote aes128-ctr; mac: local hmac-sha1, remote hmac-sha1; compression: local none, remote none
DEBUG:ssh.transport:Switch to new keys ... [x.x.x.x] Login password for 'root': 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T03:09:31.337

您必须指定要使用的密钥文件的路径。

有关详细信息，请参阅[此帖子](https://stackoverflow.com/questions/5327465/using-an-ssh-keyfile-with-fabric)，归结为添加

```
env.key_filename = '/path/to/keyfile.pem' 
```

在你的情况下。

# asp.net-mvc - 为什么我的 HttpConfiguration 类型没有使用 .Net MVC 4 和 WebApi 的 ServiceResolver 类型？

> ID：11697911
> 
> 赞同：6
> 
> 时间：2012-07-28T03:04:19.513
> 
> 标签：asp.net-mvc, asp.net-mvc-4, asp.net-web-api

我正在使用带有 WebApi 的 .Net MVC 4，并且在所有解释如何使用 DI Container 的文章中，在 Global.asax 中有以下配置行：( [http://blog.ploeh.dk/2012/03/20 /RobustDIWithTheASPNETWebAPI.aspx](http://blog.ploeh.dk/2012/03/20/RobustDIWithTheASPNETWebAPI.aspx) )

```
GlobalConfiguration.Configuration.ServiceResolver.SetResolver(...) 
```

但在我的应用程序中没有`ServiceResolver`输入：

![在此处输入图像描述](../Images/9736c8079d83c11cbee34c566cfb7f9b.png)

智能感知：

![在此处输入图像描述](../Images/19d7e5075fc0956e2127965f2bb4f3d9.png)

我做错了什么？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-28T06:07:18.963

它已`DependencyResolver`在 RC 中重命名为：

```
GlobalConfiguration.Configuration.DependencyResolver = ... your custom DR 
```

# jquery - 过滤类名以制作 jquery 数组

> ID：11697912
> 
> 赞同：1
> 
> 时间：2012-07-28T03:04:47.430
> 
> 标签：jquery, jquery-selectors

我需要从没有类名“隐藏”的类名中创建数组：

```
<div id="part2">
<div class="address hidden">address</div>
<div class="floors">floors</div>
<div class="postcode"> </div>
<div class="city hidden"> </div>
</div> 
```

我可以遍历 div 并按如下方式制作数组，但我只需要没有隐藏类的 div——在这种情况下只有“楼层”和“邮政编码”。

```
 var list_div_class = function() {
  var myarray = [];
  $('#part2').children().each(
      function(index) {
  var myclass = $(this).attr("class");
   myarray[index] = myclass;
        });
     return myarray;
    }

var arr_divs = list_div_class();
  alert (arr_divs);  // there is hidden listed but it's ok 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T03:11:52.810

您可以在一行中使用选择器执行此操作：

```
var arr_divs = $('#part2 div:not(".hidden")'); //this will be the array of divs without the class .hidden 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T03:07:55.527

试试这个......这是一个工作小提琴链接[http://jsfiddle.net/n3Xjr/](http://jsfiddle.net/n3Xjr/)

```
var list_div_class = function() {
  var myarray = [];

  $('#part2').children().not('.hidden').each(function(index) {
    myarray[index] = $(this).attr("class");
  });

  return myarray;
}

var arr_divs = list_div_class();
alert(arr_divs);​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-28T03:08:49.737

像这样：

```
$(':not(.hidden)').each { ... } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-28T03:28:49.937

你也可以`.map()`使用

```
var arr = [];
arr = $('#part2').children().not('.hidden').map(function(i,e) {
    return $(e).attr('class');
}).get().join(', '); 
```

## 结果：

```
floors, postcode 
```

参考**[现场演示](http://jsfiddle.net/SivaCharan/EmBLP/1/)**

# iphone - 应用更新问题

> ID：11697914
> 
> 赞同：0
> 
> 时间：2012-07-28T03:05:35.997
> 
> 标签：iphone, objective-c, ios, ipad

大家好，我的应用程序有问题。我需要确定我的应用程序是否已更新到某个时间点。我用这种方法发现了如何获取当前版本

```
 NSString *first = [[[NSBundle mainBundle] infoDictionary] objectForKey:@"CFBundleShortVersionString"];

 NSString *second = [[[NSBundle mainBundle] infoDictionary] objectForKey:@"CFBundleVersion"]; 
```

如果应用程序是从 iTunes 更新的，则更改 Who var 以确定我的应用程序已更新，因为我通过 Targets>Summary>Version 中的 xcode 修改来证明。第一个 var 更改但第二个没有更改。

我必须选择第一个还是第二个，我如何证明这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T03:39:27.247

我不确定这是否是您要查找的内容，但此代码可以通过将版本信息存储在 NSUserDefaults 中来告诉您您的应用程序是否已更新。

```
- (BOOL)wasUpdated {
    // access NSUserDefaults
    NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];

    // get previous version number from defaults
    NSString *previousVersion = [defaults stringForKey:@"previousVersion"];

    // get current version number from info plist
    NSString *currentVersion = [[[NSBundle mainBundle] infoDictionary] objectForKey:@"CFBundleVersion"];

    // check against previousVersion being nil
    if (!previousVersion) {
        // set current version to previous version
        [defaults setObject:currentVersion forKey:@"previousVersion"];

        // previousVersion didn't exist and can't be checked, return NO
        return NO;
    }

    // return YES if the versions are not the same
    if (NSOrderedSame != [previousVersion compare:currentVersion]) return YES;

    // return NO if they are the same
    return NO;
} 
```

希望这就是你所需要的。如果我不明白你的意思，请告诉我。

# php - curl 模拟用户行为

> ID：11697917
> 
> 赞同：1
> 
> 时间：2012-07-28T03:06:37.663
> 
> 标签：php, cookies, curl

典型的基于浏览器的用户访问站点 (A)，然后链接到某个子页面 (B)，然后是另一个 (C)，最后在页面 (D) 上查看他们的活动

我试图通过 curl 模拟这些第一步，以便在触发我的脚本时，它与目标域交互，并且用户最终进入 (D) 而无需采取中间操作。

我对 curl 没有太多经验，当我进入最后一页时，我有一种感觉，我在最后搞砸了一些东西（我明确设置的 cookie 被覆盖了，等等）。我还保留在我的脚本的 URL 上，而不是真正在那个其他站点上……但如果我使用 Location 标头，我更肯定会忽略先前的操作。

我从下面得到的是我最终在 (D) 上没有意识到以前击中过 (A)(B)(C)

这是我一直在尝试使用的代码，但我不确定我是否缺少一些 CURLOPT，或者它是否是我的方法中更基本的东西。感谢您的任何指导。

```
<?php
$item1=990525;
$item2=208208;
$home="http://www.somedomain.com";
$add=$home."/cart/addSkuByButton.do;jsessionid=0000RSqxtdShvtVm0lVAb29p-9N:1659q38ci?ajaxATCRequest=true&sourcePage=&cmd_addCart.button.INDEX[0]=Add%20to%20Cart&trackingCategory=1000000000&entryFormList[0].selected=on&entryFormList[0].sku=";
$toCart="&entryFormList[0].qty=";
$cart=$home."/cart/shoppingCart.do;jsessionid=0000RSqxtdShvtVm0lVAb29p-9N:1659q38ci";

session_start(); //do I need this?
//setup
$c=curl_init();
curl_setopt($c,CURLOPT_RETURNTRANSFER,true);
curl_setopt($c,CURLOPT_COOKIESESSION,true); //should I use this? I've also tried COOKIEFILE without success
curl_setopt($c,CURLOPT_FOLLOWLOCATION, true);
curl_setopt($c,CURLOPT_HEADER, 1);

//set a session ID
curl_setopt($c,CURLOPT_COOKIE, "jsessionid=0000RSqxtdShvtVm0lVAb29p-9N:1659q38ci; path=/; domain=www.somedomain.com");

//visit main domain
curl_setopt($c,CURLOPT_URL, $home);
curl_exec($c);

//programattically visit sub pages
curl_setopt($c,CURLOPT_URL, $add.$item1.$toCart);
curl_exec($c);
curl_setopt($c,CURLOPT_URL, $add.$item2.$toCart);
curl_exec($c);
curl_setopt($c, CURLOPT_RETURNTRANSFER, false);
curl_setopt($c,CURLOPT_HEADER, false);

//actually visit final page
curl_setopt($c,CURLOPT_URL, $cart);
curl_exec($c);
curl_close($c);
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T03:35:49.363

curl 不会执行任何javascript，我猜这是你的问题。当基于浏览器的用户访问站点时，javascript 由浏览器的 javascript 解释器执行。curl 将简单地返回纯文本源代码。

[curl 库是否在页面内执行 javascript？](https://stackoverflow.com/questions/4912257/does-the-curl-library-execute-javascript-inside-pages)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-28T03:40:12.117

为了使用户导航自动化，我会使用[Selenium](http://seleniumhq.org/)它将为您省去很多麻烦并给您带来很多麻烦，但它是最好的工具。这是假设问题是@Vaughan 提到的。然而，即使不是，还有很多其他的事情需要担心，比如 cookie 和返回标头。

# java - 在 Web 应用程序中维护 MySql 数据库连接

> ID：11697918
> 
> 赞同：0
> 
> 时间：2012-07-28T03:06:39.163
> 
> 标签：java, mysql, servlets

我有 MySql 服务器。我正在从 java servlet 对其进行微不足道的 CRUD 调用。我在每次通话之前建立连接并在最后关闭它。

处理这种情况的理想方法应该是什么，以便应用程序可以适当地扩展和处理用户负载。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T03:29:01.810

您应该维护一个[连接池](http://en.wikipedia.org/wiki/Connection_pool)，用于回收最近使用的连接。这样，对 mysql 服务器的每个请求都不需要连接设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T06:39:48.087

肯定要走的路是使用连接池（连接池是一种用于在请求客户端之间共享数据库连接的技术）。连接池在应用程序性能、并发性和可扩展性方面提供了显着的好处，并且通常很少或不需要修改代码。

使用 tomcat 使用连接池非常好，但通常它们的实现细节因版本而异。

# ajax - 在asp .net mvc项目中的部分视图的ajax加载后，如何将样式加载到head标签中？

> ID：11697924
> 
> 赞同：0
> 
> 时间：2012-07-28T03:08:54.307
> 
> 标签：ajax, asp.net-mvc, stylesheet

当使用 ajax 将部分视图加载到页面时，我想更改 head 标记内的样式引用。实现这一目标的合乎逻辑的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T05:58:12.230

要替换样式表，您可以删除现有的添加一个新的，如下所示。

**删除现有样式表**

```
$("link#mystylesheet").remove(); 
```

**添加新样式表**

```
var link = $("<link>");

link.attr({
        id: 'mystylesheet',
        type: 'text/css',
        rel: 'stylesheet',
        href: '/Content/themes/super/style.css'
});

$("head").append(link); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T03:41:41.300

不确定您的设置，但命名空间样式规则如何？然后在你的 AJAX 加载之后，做类似的事情`$('body').addClass('someAjaxyClassName');`

# z3 - Z3中相同代码的不同运行时间

> ID：11697927
> 
> 赞同：0
> 
> 时间：2012-07-28T03:09:13.637
> 
> 标签：z3

我用了z3的定点，发现定点的运行时间总是不一样的。你有遇到同样的问题吗？为什么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T17:12:05.977

如果您从相同的状态开始对相同的代码有大量的变化，这听起来很意外。如果您从不同的状态开始（也就是说，如果您在两轮之间通过文本 API 或编程 API 对 Z3 进行了各种调用）。Z3 不应该表现出极大的不确定性行为。非确定性行为可能由错误引起，因此如果您能进一步更准确地描述正在执行它的场景，我们将不胜感激。

# php - mysql 密码 使用 PHP 连接到 MySQL

> ID：11697928
> 
> 赞同：1
> 
> 时间：2012-07-28T03:09:29.657
> 
> 标签：php, mysql

在使用 PHP 连接到 MySQL 的教程中，您会看到类似于以下内容的内容。

```
$pdo = new PDO('mysql:host=localhost;dbname=mydb', 'myuser','mypassword'); 
```

我有一个在我的本地主机上以这种方式工作的连接，但是为了让它生效，你对密码做了什么？你只是把它作为纯文本留在你的php文件中吗？还是有更安全的方法来处理这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-28T03:32:31.650

如果他们查看源代码，没有人可以看到您的连接字符串，只能通过查看您的原始代码才能看到。我还将它放在一个单独的文件中，并将该文件包含在您的页面上。如果您需要更改密码，这也很有帮助，因为您不必编辑使用连接的每个页面 - 您只需要编辑一个文件。

或者，您可以在包含文件中包含一个连接字符串，并将其放在文档根目录之外。这会阻止人们使用浏览器或攻击您的 FTP 访问此文件。这将***有助于***保护您的纯文本密码，但如果有人获得/有权访问您的本地目录，仍然可以访问。为此，您可能需要配置一个 PHP 配置变量 ，`open_basedir`它允许您的脚本与根目录之外的文件通信。当然，这一切都取决于您是否可以访问根目录后面的文件夹，*以及*是否可以更改该配置变量。

除此之外，没有什么可以做的。

**包含文件示例：**

创建一个名为`conn.php`并将您的连接存储在其中的文件。

```
$dbConn = mysql_connect($host, $user, $pass);
mysql_select_db("dbName", $dbConn); 
```

在需要连接的页面上，包含 conn.php 文件，如下所示：

```
<?php
include("conn.php");
if (!dbConn) {
    die('Sorry, our database did not load. Please try again later.');
    exit();
}
$result = mysql_query("...");
?> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-28T03:11:32.503

最终用户将永远无法看到 PHP 脚本中的文本。他们只看到代码输出的内容。您可以输入这样的密码，只要您从不执行以下操作：

```
$mySecretPassIs='TheBoogeyManCometh';

echo $mySecretPassIs; 
```

话虽如此，将您的连接详细信息放入脚本中通常更容易，根据需要从各个页面包含它，然后离开。这样做的好处是，如果您更改密码等，您只需在一处更改，您可以将这些包含的文件保存在一个安全的地方。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-28T03:11:52.877

真的没有办法解决它。只需将该行放在 mysql_connect.php 文件中即可`include()`，因此它不在您的源页面上。

这样，即使有人在查看您的来源，密码也不会*立即*可用。

确保您的数据库权限仅允许该用户对数据库具有某些权限，因此即使密码被泄露，他们也只能修改该数据库中的内容。

# exception - NSLogWriter ArgumentOutOfRangeException

> ID：11697932
> 
> 赞同：1
> 
> 时间：2012-07-28T03:10:21.373
> 
> 标签：exception, xamarin.ios, arguments, range, stringbuilder

正如您在随附的屏幕截图中看到的，我正在检查 sb 的长度，如果它不为 0，它将执行 Replace 命令。

但是，不知何故，长度为零，它正在执行替换命令并引发异常。但是'_str'中有内容，所以我不明白长度怎么可能为零......

这是 StringBuilder 中的错误吗？

![在此处输入图像描述](../Images/130b7bbac6ca5352cfe7650cf3a06529.png)

下面是另一个错误，可能与上面的错误有关。你可以看到我注释掉了 Replace 命令，现在它在 ToString() 上失败了。

![在此处输入图像描述](../Images/b61dc2e75ce771e8d3ea7c69c7ce41db.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T15:46:41.180

你怎么用`NSLogWriter`？像这样（见我的[博客](http://spouliot.wordpress.com/2012/03/13/ios-5-1-vs-stdout/)）：

```
Console.SetOut (new NSLogWriter ());
Console.WriteLine ("we're back in action!"); 
```

还是您正在创建（和使用）您自己的实例？例如

```
var log = new NSLogWriter ();
log.WriteLine ("uho"); 
```

如果您使用第二种方式，那么您需要自己处理多线程。例如，另一个日志可能已在检查和调用`sb`之间刷新（并清除） 。`Length``Replace`

`System.Console`避免了这种情况，因为它`NSLogWriter`被包裹着[`TextWriter.Synchronized`](http://msdn.microsoft.com/en-us/library/system.io.textwriter.synchronized.aspx)，例如类似于：

```
stdout = new NSLogWriter ();
stdout = TextWriter.Synchronized (stdout); 
```

# java - Google 网页搜索 API 限制

> ID：11697937
> 
> 赞同：1
> 
> 时间：2012-07-28T03:11:33.893
> 
> 标签：java

> **可能重复：**
> [Google Web Search API（已弃用）请求限制](https://stackoverflow.com/questions/6212223/google-web-search-api-deprecated-requests-limit)

使用 Google Web Search API（Java 中）搜索 650,000 个不同的单词有一些限制吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T03:17:53.577

如果您打算将它们作为一个查询进行搜索，是的，几乎可以肯定，您可以发送的查询长度是有限制的（尽管我不知道它是什么）。

如果您的意思是单独，那么您将不得不与他们的[免费使用规则](https://developers.google.com/custom-search/v1/overview)抗衡：

> **免费配额**
> 
> 所有用户均可免费使用，每天最多 100 个查询。
> 
> **付费使用**
> 
> 如果您未注册计费，超出免费使用配额的任何使用都将失败。启用计费后，您将继续每天收到 100 次免费查询。但是，对于所有额外的请求，您将按每 1000 次查询 5 美元的费率付费，每天最多 10,000 次查询。如果您需要额外配额，请从控制台申请额外配额。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T03:16:11.723

不知道限制是什么，但绝对是有限的。

根据这篇文章：[https](https://developers.google.com/web-search/) ://developers.google.com/web-search/ Web 搜索 API 已被弃用，您应该使用自定义搜索 API（链接在该文章中）。

更新到新的东西！

# proxy - 什么时候应该在 HTTP 代理服务器上使用 CONNECT 和 GET HTTP 方法？

> ID：11697943
> 
> 赞同：78
> 
> 时间：2012-07-28T03:12:00.047
> 
> 标签：proxy, httpwebrequest, http-request, http-proxy, proxy-server

我正在构建一个 WebClient 库。现在我正在实现一个代理功能，所以我正在做一些研究，我看到了一些使用该`CONNECT`方法请求 URL 的代码。

但是在我的网络浏览器中检查它，它不使用该`CONNECT`方法，而是调用 GET 方法。

所以我很困惑。我什么时候应该使用这两种方法？

* * *

## 回答 #1

> 赞同：93
> 
> 时间：2016-10-30T12:24:23.097

**TL;DR**仅当Web 客户端`CONNECT`知道它与代理通信并且最终 URI 以`https://`.

当浏览器说：

```
CONNECT www.google.com:443 HTTP/1.1 
```

它的意思是：

> 嗨代理，请打开到谷歌的原始 TCP 连接；我写的任何后续字节，您只需重复该连接而无需任何解释。哦，还有一件事。仅当您直接与 Google 交谈时才这样做，但如果您自己使用另一个代理，则只需告诉他们相同的`CONNECT`.

请注意，这对 TLS (https) 没有任何说明。实际上`CONNECT`与 TLS 是正交的；你可以只有一个，你可以有另一个，或者你可以同时拥有它们。

话虽如此，其目的`CONNECT`是允许**端到端加密的 TLS 会话**，因此代理（或整个代理链）无法读取数据。即使代理根本不理解 TLS，它也可以工作，因为`CONNECT`可以在纯 HTTP 中发出，并且只需要从代理复制原始字节。

但是与第一个代理的连接可以是 TLS (https)，​​尽管这意味着您和第一个代理之间的流量双重加密。

显然，`CONNECT`直接与最终服务器对话是没有意义的。您只需开始谈论 TLS，然后发出 HTTP `GET`。终端服务器通常`CONNECT`完全禁用。

对于代理，`CONNECT`支持增加了安全风险。任何数据都可以通过`CONNECT`，甚至 ssh 黑客攻击 192.168.1.* 上的服务器，甚至 SMTP 发送垃圾邮件。外界将这些攻击视为由代理发起的常规 TCP 连接。他们不在乎是什么原因，他们无法检查是否`CONNECT`应该归咎于 HTTP。因此，由代理来保护自己免受滥用。

* * *

## 回答 #2

> 赞同：89
> 
> 时间：2012-07-28T03:23:56.117

CONNECT 请求促使您的代理建立到远程端点的 HTTP 隧道。 **通常**它用于 SSL 连接，尽管它也可以与 HTTP 一起使用（用于代理链和隧道的目的）

```
CONNECT www.google.com:443 
```

上面的行在端口 443 上打开了从您的代理到 www.google.com 的连接。此后，客户端发送的内容由代理转发到`www.google.com:443`.

如果用户尝试检索页面[http://www.google.com](http://www.google.com)，代理可以代表他发送完全相同的请求并检索响应。

使用 SSL(HTTPS)，只有两个远程端点理解请求，代理无法解密它们。因此，它所做的只是使用 CONNECT 打开该隧道，并让两个端点（Web 服务器和客户端）直接相互通信。

**代理链：**

如果您要链接 2 个代理服务器，则这是要发出的请求序列。

```
GET1 is the original GET request (HTTP URL)
CONNECT1 is the original CONNECT request (SSL/HTTPS URL or Another Proxy)

User Request ==CONNECT1==> (Your_Primary_Proxy ==CONNECT==> AnotherProxy-1 ... ==CONNECT==> AnotherProxy-n) ==GET1(IF is http)/CONNECT1(IF is https)==> Destination_URL 
```

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2012-07-28T03:14:42.147

根据经验，GET 用于纯 HTTP，CONNECT 用于 HTTPS

不过还有更多细节，所以您可能想阅读相关的 RFC-s

[http://www.ietf.org/rfc/rfc2068.txt](http://www.ietf.org/rfc/rfc2068.txt) [http://www.ietf.org/rfc/rfc2817.txt](http://www.ietf.org/rfc/rfc2817.txt)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-04-13T21:36:32.693

CONNECT 方法将请求连接转换为透明的 TCP/IP 隧道，通常是为了通过未加密的 HTTP 代理促进 SSL 加密通信 (HTTPS)。

# javascript - Titanium：平台检测并相应更改界面样式

> ID：11697944
> 
> 赞同：2
> 
> 时间：2012-07-28T03:12:03.000
> 
> 标签：javascript, android, iphone, titanium, titanium-mobile

您可能知道不同的平台将需要稍微不同的 UX/UI。

例如，当您为 iphone 设计时，您可能有一个后退按钮，但是当您为 android 构建时，您不需要后退按钮。

其他的东西是图标，你可能在 android 的工具栏上有多个按钮，而在 iphone 的工具栏上只有 2 个按钮。

所以问题是......当你构建 js 文件来定义接口时，你是构建两个不同的接口 js 文件，每个接口特定于平台，还是只构建 1 个会根据平台检测更改 UI 的 js 文件。

* * *

我认为拥有两组特定于平台的 UI 可能更容易，而不是在平台检测上改变样式，因为 UX 甚至可能不同，所以 UX 和 UI 的代码会相当复杂？你怎么看？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T12:58:57.313

我认为，拥有两组特定于平台的 UI 是更好的选择。示例应用程序（内置于钛工作室）展示了如何决定平台。以下是示例应用程序的代码：

```
var osname = Ti.Platform.osname,
    version = Ti.Platform.version,
    height = Ti.Platform.displayCaps.platformHeight,
    width = Ti.Platform.displayCaps.platformWidth;

//considering tablet to have one dimension over 900px - this is imperfect, so you should feel free to decide
//yourself what you consider a tablet form factor for android
var isTablet = osname === 'ipad' || (osname === 'android' && (width > 899 || height > 899));

var Window;
if (isTablet) {
        Window = require('ui/tablet/ApplicationWindow');
}
else {
    // Android uses platform-specific properties to create windows.
    // All other platforms follow a similar UI pattern.
    if (osname === 'android') {
        Window = require('ui/handheld/android/ApplicationWindow');
    }
    else {
        Window = require('ui/handheld/ApplicationWindow');
    }
}
new Window().open(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T12:07:16.653

最好将您的业务逻辑和 UI`.js`文件分开。还为每个平台创建一个`.js`文件，您可以根据平台指定正确的 js URL。您可以参考厨房水槽选项卡示例以获得清晰的想法。

# java - 如何将此 C# 加密函数转换为 Java？

> ID：11697947
> 
> 赞同：-1
> 
> 时间：2012-07-28T03:13:23.993
> 
> 标签：java, encryption, rijndael, cryptostream, rfc2898

我需要将以下 C# 代码翻译成 Java，但是，我找不到任何与 C# 的 Rfc2898DerivedBytes 和 Rijndael 等效的 Java。

```
 private static string Encrypt(string sData, string sEncryptionKey)
{
    string str = null;
    string str2;
    try
    {
        Rfc2898DeriveBytes bytes = new Rfc2898DeriveBytes(sEncryptionKey, 8);
        Rijndael rijndael = Rijndael.Create();
        rijndael.IV = bytes.GetBytes(rijndael.BlockSize / 8);
        rijndael.Key = bytes.GetBytes(rijndael.KeySize / 8);
        byte[] buffer = Encoding.Unicode.GetBytes(sData);
        using (MemoryStream stream = new MemoryStream())
        {
            using (CryptoStream stream2 = new CryptoStream(stream, rijndael.CreateEncryptor(), CryptoStreamMode.Write))
            {
                stream.Write(bytes.Salt, 0, bytes.Salt.Length);
                stream2.Write(buffer, 0, buffer.Length);
                stream2.Close();
                str = Convert.ToBase64String(stream.ToArray());
                str2 = str;
            }
        }
    }
    catch (Exception exception)
    {
       System.out.println(exception.getMessage());
    }
    return str2;

} 
```

> **[更新]**

我需要使用这个函数来加密新创建的用户的密码，并且加密的密码也应该被包括 C# 在内的其他调用者正确解密。

我按照评论和答案中列出的文档，并尝试在下面写简单的示例以快速验证。

```
public class testEncrypt {
public static void main(String[] args) throws Exception {

    SecretKeyFactory factory = SecretKeyFactory.getInstance("PBKDF2WithHmacSHA1");

    char[] password = "passkey".toCharArray();

    SecureRandom random = new SecureRandom();
    byte[] salt = new byte[8];
    random.nextBytes(salt);

    KeySpec spec = new PBEKeySpec(password, salt, 1000, 256); 
    SecretKey tmp = factory.generateSecret(spec);
    SecretKey secret = new SecretKeySpec(tmp.getEncoded(), "AES");

    Cipher cipher = Cipher.getInstance("AES/CBC/PKCS5Padding");
    cipher.init(Cipher.ENCRYPT_MODE, secret);
    AlgorithmParameters params = cipher.getParameters();
    byte[] iv = params.getParameterSpec(IvParameterSpec.class).getIV();
    byte[] ciphertext = cipher.doFinal("301a7fed-54e4-4ae2-9b4d-6db057f75c91".getBytes("UTF-8"));

    System.out.println(ciphertext.length);

} 
```

}

但是，密文的长度是48，但实际上在C#中，看起来是这样的格式

> WHUNV5xrsfETEiCwcT0M731+Ak1jibsWEodJSaBraP1cmmkS1TpGWqwt/6p/a7oy8Yq30ImZPbFF+Y0JNLa3Eu2UGuazZtuhEepUIIdaDEtA2FO0JYIj2A==

共 120 个字符。

代码有问题吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-28T04:38:04.740

RFC2898 是 PBKDF2（Password Based Key Derivation Function）的正式名称。

这个问题似乎使用了`SecretKeyFactory`PBKDF2 的类。

[在 Java 中使用 PBKDF2 进行密码验证](https://stackoverflow.com/questions/2375541/password-verification-with-pbkdf2-in-java)

如果你找不到任何你满意的实现，我建议你看看[我的问题](https://stackoverflow.com/questions/3210795/pbkdf2-in-bouncy-castle-c-sharp)，我使用了 BouncyCastle 的一些类（用于 C#，但应该适用于 Java）并创建了算法。我不得不为 C# 创建这个，因为`Rfc2898DeriveBytes`.NET Compact Framework 没有。

[这个问题](https://stackoverflow.com/questions/8674018/pbkdf2-with-bouncycastle-in-java)肯定也对你有帮助！

您还可以在[此处](http://www.jmedved.com/2010/05/java-rfc2898derivebytes/)找到由偶然发现相同问题的人完成的实现。

还要回答你问题的第二部分，

Rijndael 与 AES 没有太大区别。引用此[网页](http://blogs.msdn.com/b/shawnfa/archive/2006/10/09/the-differences-between-rijndael-and-aes.aspx)

> 也就是说，Rijndael 允许从 {128、160、192、224、256} 位的集合中独立选择密钥和块大小。（并且密钥大小实际上不必与块大小匹配）。但是，FIPS-197 指定块大小在 AES 中必须始终为 128 位，并且密钥大小可以是 128、192 或 256 位。

Rijndael 算法被 NIST 选为高级加密算法。

所以你可以[在 Java 中使用 AES 算法](https://stackoverflow.com/questions/992019/java-256-bit-aes-password-based-encryption)。

# java - 乘以双精度时索引超出范围

> ID：11697954
> 
> 赞同：1
> 
> 时间：2012-07-28T03:14:33.197
> 
> 标签：java, android, android-intent, indexoutofboundsexception

第一次发帖。我在这里先向您的帮助表示感谢。

我有两个活动。第一个活动通过 inputType 为“numberDecimal”的 edittext 字段从用户那里读取 3 个数字。它捆绑这些并通过意图将它们发送到第二个活动。

第二个活动读取 3 个数字。然后它需要将它们乘以一些常数。这就是问题所在。如果乘法的结果太大（例如，大于几百……不是恒定阈值……不接近 double 应该能够容纳的值），那么它会引发 indexoutofboundsexception .

```
//@SuppressWarnings ("serial)")
public class CreationActivity extends Activity {

@Override
public void onCreate (Bundle savedInstanceState){
    super.onCreate(savedInstanceState);
    setContentView(R.layout.creation);
    TextView txtTitle = (TextView) findViewById(R.id.labelTitle);
    TextView txtArtist = (TextView) findViewById(R.id.labelArtist);
    TextView txtTime = (TextView) findViewById(R.id.labelTitle);

    try {
        Bundle extras = getIntent().getExtras();
        double Hours;
        double Minutes;
        double Seconds;

        if (extras!=null){
            double timerTime[] = extras.getDoubleArray("Time");
            Hours = timerTime[0];
            Minutes = timerTime[1];
            Seconds = timerTime[2];
                            //next line is where the error happens:
            double desired_time = timerTime[0] * 5000;
                            //do some stuff
        }else{
            txtTitle.setText("No data");
        }
    } catch (NumberFormatException e){
    }
}
} 
```

LogCat 是：

```
07-27 21:58:41.736: E/AndroidRuntime(31560): FATAL EXCEPTION: main
07-27 21:58:41.736: E/AndroidRuntime(31560): java.lang.RuntimeException: Unable to start     activity ComponentInfo{com.decker.timer/com.decker.timer.CreationActivity}:    java.lang.IndexOutOfBoundsException: Invalid index 4, size is 4
07-27 21:58:41.736: E/AndroidRuntime(31560):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1956)
07-27 21:58:41.736: E/AndroidRuntime(31560):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
07-27 21:58:41.736: E/AndroidRuntime(31560):    at android.app.ActivityThread.access$600(ActivityThread.java:123)
07-27 21:58:41.736: E/AndroidRuntime(31560):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
07-27 21:58:41.736: E/AndroidRuntime(31560):    at android.os.Handler.dispatchMessage(Handler.java:99)
07-27 21:58:41.736: E/AndroidRuntime(31560):    at android.os.Looper.loop(Looper.java:137)
07-27 21:58:41.736: E/AndroidRuntime(31560):    at android.app.ActivityThread.main(ActivityThread.java:4424)
07-27 21:58:41.736: E/AndroidRuntime(31560):    at java.lang.reflect.Method.invokeNative(Native Method)
07-27 21:58:41.736: E/AndroidRuntime(31560):    at java.lang.reflect.Method.invoke(Method.java:511)
07-27 21:58:41.736: E/AndroidRuntime(31560):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
07-27 21:58:41.736: E/AndroidRuntime(31560):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
07-27 21:58:41.736: E/AndroidRuntime(31560):    at dalvik.system.NativeStart.main(Native Method)
07-27 21:58:41.736: E/AndroidRuntime(31560): Caused by: java.lang.IndexOutOfBoundsException: Invalid index 4, size is 4
07-27 21:58:41.736: E/AndroidRuntime(31560):    at java.util.ArrayList.throwIndexOutOfBoundsException(ArrayList.java:251)
07-27 21:58:41.736: E/AndroidRuntime(31560):    at java.util.ArrayList.get(ArrayList.java:304)
07-27 21:58:41.736: E/AndroidRuntime(31560):    at com.decker.timer.CreationActivity.onCreate(CreationActivity.java:172)
07-27 21:58:41.736: E/AndroidRuntime(31560):    at android.app.Activity.performCreate(Activity.java:4465)
07-27 21:58:41.736: E/AndroidRuntime(31560):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
07-27 21:58:41.736: E/AndroidRuntime(31560):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)
07-27 21:58:41.736: E/AndroidRuntime(31560):    ... 11 more
07-27 21:58:49.260: D/TimerActivity(31583): onClicked 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T03:17:46.407

听起来您正在尝试访问长度为 4 的数组中的第 5 个（位置 4 的项目）项目。

# php - 加载ajax jquery后使用函数deleteRow时出错？

> ID：11697959
> 
> 赞同：0
> 
> 时间：2012-07-28T03:15:26.903
> 
> 标签：php, jquery

```
<a class="checkModelButton" href="check.php">Check</a>
<div id="model_list"></div> 
```

包括 jquery 和函数 deleteRow()：

```
jQuery('.checkModelButton').click(function(event){
   event.preventDefault();
   var url = jQuery(this).attr('href');
   jQuery.ajax({
         type: 'get',
         cache: false,
         url: url,
         success: function(html){
             jQuery('#model_list').html(html);
         }
   });
});
function deleteRow(id) {
    try {
        var table = document.getElementById('model_list');
        var rowCount = table.rows.length;
        for(var i=0; i<rowCount; i++) {
            var row = table.rows[i];
            var chkbox = row.cells[0].childNodes[0];
            if(null != chkbox && true == chkbox.checked) {
                table.deleteRow(i);
                rowCount--;
                i--;
            }
        } 
        jQuery("input[type=checkbox]:checked").each(function() { 
            jQuery(this).parents("tr").remove(); 
        });    

    } catch(e) {
        alert(e);
    }
} 
```

在 check.php 中返回 html 是：

```
<input type="button" value="Delete Row" onclick="deleteRow('model_list')" />
<table id="model_list">
   <thead>
      <tr>
        <th>#</th>
        <th>Name</th>
      </tr>
   </thead> 
   <tbody>
      <tr>
        <td><input type="checkbox" value="1" name="model_id[]" class="item"></td>
        <td>Nokia N71</td>
      </tr>
   </tbody>
</table> 
```

加载ajax后，我检查了表单输入并单击按钮Delete Row，但是错误无法删除该行并且错误是`alert(Table model_list is empty)`，如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T04:23:59.703

jQuery 确实为我们简化了选择过程，并且还提供了许多 JavaScript 在没有 try/catch 块的情况下无法提供的故障保护。由于您已经在使用 jQuery，您可以通过执行以下操作真正简化您的 deleteRow() 函数：

```
function deleteRow(id) {   // the id variable is unnecessary and can be removed
    // Grab all the rows in the table (the > sign targets the elements directly inside the current one (not cascading)
    var rows = jQuery("#model_list > tbody > tr");
    // Iterate through the rows
    jQuery(rows).each(function(key, value) {
        // Look inside each row for a checked checkbox
        if (jQuery(this).find("input:checkbox[checked='checked']").length > 0) {
            // If one is found, then remove the whole row (jQuery(this) refers to the current row
            jQuery(this).remove();
        }
    });
} 
```

为了使上面的示例正常工作，我在同一个文件中创建了一个临时表。由于您正在使用数据动态加载表行，因此它的功能应该类似于下面的静态示例：

```
<input type="button" value="Delete Row" onclick="deleteRow('model_list')" />
<table id="model_list">
    <thead>
        <tr>
            <th>#</th>
            <th>Name</th>
        </tr>
    </thead> 
    <tbody>
        <tr>
            <td><input type="checkbox" value="1" name="model_id[]" class="item"></td>
            <td>Nokia N71</td>
        </tr>
        <tr>
            <td><input type="checkbox" value="2" name="model_id[]" class="item"></td>
            <td>Nokia N72</td>
        </tr>
        <tr>
            <td><input type="checkbox" value="3" name="model_id[]" class="item"></td>
            <td>Nokia N73</td>
        </tr>
    </tbody>
</table> 
```

请让我知道这是否有帮助或如果您有任何其他问题。:)

# unit-testing - 在哪里配置 Grails 单元测试日志记录

> ID：11697969
> 
> 赞同：4
> 
> 时间：2012-07-28T03:17:25.863
> 
> 标签：unit-testing, grails, logging

我仍在学习一些 Grails 配置细节，我想知道为单元测试配置日志记录的适当方法。现在，我在 Config.groovy 中配置我的产品、开发和测试环境，并在 log4j.test.properties 中配置单元测试日志记录。据我了解，Config.groovy 中的测试环境用于集成测试。

这是正确的方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-28T04:08:13.860

测试环境适用于任何和所有测试（单元、集成、功能）。因此，只需在测试环境块中的 Config.groovy 中配置您的 log4j。

# ruby-on-rails - 为什么 capistrano 总是使用 git clone

> ID：11697972
> 
> 赞同：3
> 
> 时间：2012-07-28T03:17:56.750
> 
> 标签：ruby-on-rails, git, capistrano

我对 capistrano 部署有一些基本问题。首先，`git clone`当 git repo 已经存在时，我需要知道 capistrano 是否正在使用第二个或第三个。如果使用有什么问题`git pull`吗？我已`set :deploy_via, :remote_cache`在我的 capfile 中添加。我问这个是因为我尝试在服务器的路径中添加一个新文件，而不是在 git repo 中，因为它是服务器特定的文件。下次我使用 capistrano 进行部署时，该文件消失了。`git clone`即使已经创建了 git repo，capistrano 似乎也在使用。为什么 capistrano 不能`git pull`用来更新代码？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-28T06:55:51.937

Capistrano 像这样为每个版本在 realeases 中创建一个新的子目录

```
horse:releases xxx$ ls -lart
total 0
drwxrwxr-x  22 xxx  staff  748 Jun 26 20:08 20120626180809
drwxrwxr-x  22 xxx  staff  748 Jun 26 20:11 20120626181103
drwxrwxr-x  22 xxx  staff  748 Jun 26 20:29 20120626182908
drwxrwxr-x  22 xxx  staff  748 Jun 26 20:34 20120626183442
drwxrwxr-x  22 xxx  staff  748 Jun 26 20:35 20120626183525
drwxrwxr-x   8 xxx  staff  272 Jun 27 13:11 .
drwxrwxr-x  22 xxx  staff  748 Jun 27 13:11 20120627111102
drwxrwxr-x   5 xxx  staff  170 Jun 27 13:11 .. 
```

然后像这样简单地设置一个符号链接到当前版本

```
horse:deployed xxx$ ls -lart
total 8
drwxrwxr-x  4 xxx  staff  136 Jun 26 19:51 ..
drwxrwxr-x  7 xxx  staff  238 Jun 26 20:22 shared
drwxrwxr-x  8 xxx  staff  272 Jun 27 13:11 releases
lrwxrwxr-x  1 xxx  staff   70 Jun 27 13:11 current -> /Users/xxx/RailsDeployment/server/deployed/releases/20120627111102 
```

这样，服务器上部署的回滚非常容易，因为您只需将符号链接更改回最后（工作）部署，但是每次使用 git clone 而不是 git pull 有意义时都会创建一个新的完整子目录.

如果你想拥有特定于服务器的文件，你必须在你的 config/deploy.rb 文件中添加一个 capistrano 部署任务，以便从 app 目录之外的其他地方（通常是共享子文件夹）复制它。这样做的原因是部署应该是全自动的，并在自动化过程中记录所有必要的步骤，而不是依赖于服务器上手动放置的文件，因为这是[雪花服务器](http://martinfowler.com/bliki/SnowflakeServer.html)的第一步。因此，如果您需要一个不属于您的 git 存储库的文件，例如通常包含生产密码的文件，您需要更改 config/deploy.rb 以将该文件复制到您需要的位置。要了解如何执行此操作，请查看我的 deploy.rb 中的 copy_db_credentials 任务：

```
namespace :deploy do
  desc "cause Passenger to initiate a restart"
  task :restart do
    run "touch #{current_path}/tmp/restart.txt" 
  end
  desc "Copies database credentials"
  task :copy_db_credentials do
    run "cp #{shared_path}/credentials/database.yml #{current_path}/config/database.yml"
  end

  desc "reload the database with seed data"
  task :seed do
    run "cd #{current_path}; rake db:seed RAILS_ENV=#{rails_env}"
  end
end
after :deploy, "deploy:copy_db_credentials"
after "deploy:update_code", :bundle_install
desc "install the necessary prerequisites"
task :bundle_install, :roles => :app do
  run "cd #{release_path} && bundle install"
end 
```

# javascript - 制作全局变量的问题

> ID：11697973
> 
> 赞同：0
> 
> 时间：2012-07-28T03:18:50.153
> 
> 标签：javascript, jquery, variables, global

我对 JavaScript 和 Jquery 还很陌生，但如果有人能提供帮助，我将不胜感激，因为我已经为此苦苦挣扎了几个小时。

我有一个功能，它是一个更大的插件功能的一部分（如果有人熟悉的话，Gaya 的 QueryLoader2）。在我正在查看的函数中，有一部分它获取页面中正在加载的项目的百分比值：

```
var completeImageLoading = function () {
    qLdone++;
    var percentage = (qLdone / qLimageCounter) * 100;

    if (qLoptions.percentage == true) {
        $(qLpercentage).text(Math.ceil(percentage) + "%");
    }

    if (qLdone == qLimageCounter) {
        destroyQueryLoader();
    }
} 
```

“var percent”部分是我需要成为全局的部分，因此数字百分比值可以完全由另一个函数使用（实际上在另一个 Javascript 文件中）。我试过删除'var'，但这不起作用。

如果有人可以提供帮助，我将不胜感激！谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T03:20:23.827

在你的函数之外放：

```
var percentage; 
```

在你的函数里面放（没有`var`）：

```
percentage = (qLdone / qLimageCounter) * 100; 
```

基本上，在 JavaScript 中，与函数在同一位置声明的局部变量可以在该函数内部使用（读取和写入）。使用此类局部变量的函数称为*闭包*。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T04:10:03.100

如果您发送有关您的脚本的更多信息将更容易为您提供帮助，但无论如何我都会尝试。
首先，您为全局变量返回未定义做错了。

看看这个[http://jsfiddle.net/WyShw/3/](http://jsfiddle.net/WyShw/3/)，变量是定义的（不管在哪里），并且正在返回值。只是在调用变量之前验证了您是否正在调用函数（completeImageLoading()），因为在这种情况下，您不需要定义变量，它是在调用函数 completeImageLoading() 时定义的。我们定义了一个默认值，以防我们从未在函数中调用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-28T03:21:59.430

尝试这个

```
var percentage;

var completeImageLoading = function () {
    qLdone++;
    percentage = (qLdone / qLimageCounter) * 100;

    if (qLoptions.percentage == true) {
        $(qLpercentage).text(Math.ceil(percentage) + "%");
    }

    if (qLdone == qLimageCounter) {
        destroyQueryLoader();
    }
} 
```

# android - 使用 jmDNS 构建 Android 失败

> ID：11697979
> 
> 赞同：8
> 
> 时间：2012-07-28T03:20:18.510
> 
> 标签：android, dependency-management, jmdns

前言：从 SDK 级别 16 开始，Android 有一个内置的 Zeroconf 实现。除非担心青铜时代的兼容性，否则不要再使用 jmDNS，`NsdManager`而是使用。

* * *

序言 #2：NsdManager 的早期版本充满了故障，请参阅 SO question [getSystemService(Context.NSD_SERVICE) freezes the 5.0 emulator](https://stackoverflow.com/questions/27281340/getsystemservicecontext-nsd-service-freezes-the-5-0-emulator)和链接的错误记录。

* * *

我已将 jmDNS 3.4.1 添加到我的 Android 项目中。将 JAR 复制到 下`lib`，然后在“Java BuildPath”/Libraries 下添加参考。

现在我的构建失败并在控制台中显示以下消息：

```
[2012-07-27 22:59:07 - Yarxi] Dx 
UNEXPECTED TOP-LEVEL EXCEPTION:
java.lang.IllegalArgumentException: already added: Lcom/strangeberry/jmdns/tools/Browser$1;
at 

com.android.dx.dex.file.ClassDefsSection.add(ClassDefsSection.java:123)
    at com.android.dx.dex.file.DexFile.add(DexFile.java:163)
    at com.android.dx.command.dexer.Main.processClass(Main.java:486)
    at com.android.dx.command.dexer.Main.processFileBytes(Main.java:455)
    at com.android.dx.command.dexer.Main.access$400(Main.java:67)
    at com.android.dx.command.dexer.Main$1.processFileBytes(Main.java:394)
    at com.android.dx.cf.direct.ClassPathOpener.processArchive(ClassPathOpener.java:245)
    at com.android.dx.cf.direct.ClassPathOpener.processOne(ClassPathOpener.java:131)
    at com.android.dx.cf.direct.ClassPathOpener.process(ClassPathOpener.java:109)
    at com.android.dx.command.dexer.Main.processOne(Main.java:418)
    at com.android.dx.command.dexer.Main.processAllFiles(Main.java:329)
    at com.android.dx.command.dexer.Main.run(Main.java:206)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at com.android.ide.eclipse.adt.internal.build.DexWrapper.run(DexWrapper.java:180)
    at com.android.ide.eclipse.adt.internal.build.BuildHelper.executeDx(BuildHelper.java:703)
    at com.android.ide.eclipse.adt.internal.build.builders.PostCompilerBuilder.build(PostCompilerBuilder.java:577)
    at org.eclipse.core.internal.events.BuildManager$2.run(BuildManager.java:728)
    at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)
    at org.eclipse.core.internal.events.BuildManager.basicBuild(BuildManager.java:199)
    at org.eclipse.core.internal.events.BuildManager.basicBuild(BuildManager.java:321)
    at org.eclipse.core.internal.events.BuildManager.build(BuildManager.java:396)
    at org.eclipse.core.internal.resources.Project$1.run(Project.java:618)
    at org.eclipse.core.internal.resources.Workspace.run(Workspace.java:2344)
    at org.eclipse.core.internal.resources.Project.internalBuild(Project.java:597)
    at org.eclipse.core.internal.resources.Project.build(Project.java:124)
    at com.android.ide.eclipse.adt.internal.project.ProjectHelper.doFullIncrementalDebugBuild(ProjectHelper.java:1000)
    at com.android.ide.eclipse.adt.internal.launch.LaunchConfigDelegate.launch(LaunchConfigDelegate.java:147)
    at org.eclipse.debug.internal.core.LaunchConfiguration.launch(LaunchConfiguration.java:854)
    at org.eclipse.debug.internal.core.LaunchConfiguration.launch(LaunchConfiguration.java:703)
    at org.eclipse.debug.internal.ui.DebugUIPlugin.buildAndLaunch(DebugUIPlugin.java:937)
    at org.eclipse.debug.internal.ui.DebugUIPlugin$8.run(DebugUIPlugin.java:1141)
    at org.eclipse.core.internal.jobs.Worker.run(Worker.java:54)
[2012-07-27 22:59:10 - Yarxi] Dx 1 error; aborting
[2012-07-27 22:59:10 - Yarxi] Conversion to Dalvik format failed with error 1 
```

当我查看 Package Explorer 中 Referenced Libraries 下的 JAR 内容时，我看到 jmdns.jar 中每个包下的每个类都列出了两次。JmDNS.class 的两个副本，JmmDNS.class 的两个副本，依此类推。

知道这个罐子有什么问题吗？我在项目中使用了其他 jars，它们都没有这样的行为。尝试清洁几次，删除并重新添加 JAR - 效果相同。

可能值得注意的是，这是一个库项目，当我构建引用该库的应用程序时会弹出错误。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-30T16:58:53.390

您可能使用了 SourceForge 的 .jar。该版本在 .jar 中有两次所有 .class 文件，这会导致您的错误。

尝试使用来自 Maven [http://search.maven.org/#browse|1991004139](http://search.maven.org/#browse|1991004139)的 .jar ，这应该可以，我本月早些时候使用它。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-29T04:00:58.767

看看[这里](https://stackoverflow.com/questions/8111827/android-exception-java-lang-noclassdeffounderror-javax-jmdns-jmdns)的答案是否有帮助。

一般来说，[SourceForge Home Page](http://sourceforge.net/projects/jmdns/files/jmdns/)的 jar 文件格式不正确，不适用于 Android，请尝试使用[Maven Central Repository中的 jar 文件，或者](http://search.maven.org/#browse%7C1991004139)[这篇博](http://home.heeere.com/tech-androidjmdns.html)文中提到的肮脏解决方法。

# html - 删除 MFMailComposeViewController HTML 右边距？

> ID：11697984
> 
> 赞同：1
> 
> 时间：2012-07-28T03:21:12.863
> 
> 标签：html, ios, mfmailcomposeviewcontroller

我正在尝试使用 MFMailComposeViewController 从我的应用程序发送 HTML 电子邮件，但我遇到了右侧有奇怪填充的问题。

这是我正在使用的 HTML：

```
</br>
</br>
<a href='itms-apps://itunes.apple.com/app/id444395321'>
<img src='http://brianensorapps.com/whirlworld/wwad.png' height='80' width='320' style='position:relative;left:-10px;margin-right:0px;padding-right:0px;'/>
</a> 
```

我不确定哪些正确的 CSS 标签是必要的。现在都没有工作。position 和 left 标签用于消除左边距。

这是我试图避免的情况的图片，用户可以向右滚动到我的横幅： ![问题](../Images/9167e3f0bc38874790b9aa6aff4ac437.png)

还要求我发布用于呈现 MFMailComposeViewController 的代码：

```
sharingVC = [[MFMailComposeViewController alloc] init];
sharingVC.mailComposeDelegate = self;
sharingVC.navigationBar.tintColor = [UIColor lightGrayColor];
[sharingVC setSubject:@"Check out this app"];
[sharingVC setMessageBody:[NSString stringWithContentsOfFile:[[NSBundle mainBundle] pathForResource:@"sharingEmail.html"] usedEncoding:nil error:nil] isHTML:YES];
[self presentViewController:sharingVC animated:YES completion:nil]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T19:45:12.287

您将左边距设置为 -10px，这会将所有内容都向左移动（给您 10px 的右边距）

在 style 属性中，更改`left: -10px`为`left:0px`您的 html 代码如下所示：

```
</br>
</br>
<a href='itms-apps://itunes.apple.com/app/id444395321'>
<img src='http://brianensorapps.com/whirlworld/wwad.png' height='80' width='320' style='position:relative;left:0;margin-right:0px;padding-right:0px;'/>
</a> 
```

我认为您真正想要的是设置绝对位置并将位置设置为 0，如下所示：

```
</br>
</br>
<a href='itms-apps://itunes.apple.com/app/id444395321'>
<img src='http://brianensorapps.com/whirlworld/wwad.png' height='80' width='320' style='position:absolute; left:0px' />
</a> 
```

在我的测试中，这显示图像从屏幕左侧一直到右侧，没有水平滚动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T19:51:29.777

要删除任何和所有边距，您可能会考虑包含一个改变 html 输出的内联标记。

这可能会奏效：

```
<style type="text/css">
body {padding:0px;margin:0px;}
</style>
</br>
</br>
<a href='itms-apps://itunes.apple.com/app/id444395321'>
<img src='http://brianensorapps.com/whirlworld/wwad.png' height='80' width='320' style='position:relative;left:-10px;margin-right:0px;padding-right:0px;'/>
</a> 
```

# spring-webflow - 动作状态后返回上一个视图状态

> ID：11697988
> 
> 赞同：1
> 
> 时间：2012-07-28T03:21:53.893
> 
> 标签：spring-webflow

我正在为我的产品使用 Spring webflow。目前`view-state`我有一个过渡到 a`action-state`来决定接下来要进入哪些状态。但是，有一种情况需要`view-state`在`action-state`. 我将它与其他州一样对待，但它导致我当前页面的重新加载。我不想要那个。有没有其他方法可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T12:35:46.950

您的页面重新加载的事实是正常的，因为 webflow 在转换到操作状态时将其视为视图状态的退出，而在再次离开操作状态时将重新进入相​​同的视图状态。因此，为了避免重新加载，您必须首先避免离开视图状态。有几种方法可以做到这一点。我能想到的最简单的方法是使用 EL 表达式直接从转换元素中选择目标状态，而不是将该逻辑置于单独的动作状态中：

```
<view-state id="bla">
    <transition on="submit" to="#{someAction.selectNextStateId()}" />
</view-state> 
```

# ruby - 简单的 Ruby 类混淆和调试

> ID：11697989
> 
> 赞同：-1
> 
> 时间：2012-07-28T03:21:55.987
> 
> 标签：ruby, ruby-on-rails-3

我正在尝试使用下面的 ruby​​ 类学习课程，我只是不明白输出语句的结果是如何通过调用 player 函数后跟新变量的“John Smith”？

有没有更简单的方法呢？编码器以我感到困惑的方式做到了最后，你能告诉我如何调试 Ruby 类或 TextMate 上的任何 ruby​​ 代码吗？我的意思是调试，就像在 Visual C++ 中调试一样，向我展示了第一行被调用和执行的内容，然后跳转到下一行等……看看它是如何工作的？

```
class Dungun
  attr_accessor :player 

def initialize(player_name)
  @player = Player.new(player_name)
  @rooms = []
end

class Player
  attr_accessor :name, :location
  def initialize(player_name)
    @name = player_name
  end
end

class Room
  attr_accessor :reference, :name, :description, :connection
  def initialize(reference,name,description,connection)
    @reference = reference
    @name = name
    @description = description
    @connection = connection

  end
end
end

my_dungun = Dungun.new("John Smith")
puts my_dungun.player.name 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-28T03:36:48.863

**执行顺序**

```
# 1\. Called from my_dungun = Dungun.new("John Smith")
Dungun.new("John Smith")

# 2\. Inside Dungun it will call the initialize from Dungun class
initialize("John Smith")

# 3\. The initialize method, from Dungun class, will have this statement saying
# that instance variable @player will receive the
# result of Player.new("John Smith")
@player = Player.new("John Smith")

# 4\. The Player's 'new' method will call the
# inner class Player's initialize method
initialize("John Smith")

# 5\. The Player's initialize should assign "Jonh Smith" to @player's name
@name = "John Smith"

# 6\. Then head back to where we stopped, and continue to the other
# statement at second line inside Dungun's 'new' method
@rooms = [] 
```

并阅读[**Mastering the Ruby Debugger**](http://www.youtube.com/watch?v=GwgF8GcynV0)以获得 ruby​​ 调试 gem 和一些课程！

# c++ - vc++ 2010/2012：包含 unique_ptr 编译器错误的结构的 std::vector

> ID：11697994
> 
> 赞同：2
> 
> 时间：2012-07-28T03:22:20.987
> 
> 标签：c++, visual-c++, vector, c++11, unique-ptr

以下代码在下面（代码之后）生成编译器错误，但如果向量直接包含 unique_ptr 则不会（请参阅注释代码行）。任何想法为什么？

问题更关心“#if 1”块中的代码块，“#else”块产生的错误（将“#if 1”更改为“#if 0”后）类似，但更预期.

```
// MoveSemantics.cpp : Defines the entry point for the console application.
//

#include "stdafx.h"
#include <memory>
#include <vector>

typedef std::unique_ptr<int> upi;

struct S
{
    S() : p(new int(123)) {}
    S(S&& s) : p( std::move(s.p) ) {} // NB: the move constructor is supposed to be used? (but not)
    upi p;
};

#if 1
void test()
{
    //std::vector<S> vs; // Okay
    //std::vector<upi> vupi(10); // Okay
    std::vector<S> vs(10); // Error! why in the hell does the compiler want to generate a copy constructor here??
}
#else
void test()
{
    std::vector<S> vs;

    vs.push_back( S() );
    const S& s = vs.front();
    //S& s = vs.front(); // fine!
    S s1 = std::move(s); // Error, but expected
}
#endif
int _tmain(int argc, _TCHAR* argv[])
{
    return 0;
} 
```

编译器错误：

```
1> error C2248: 'std::unique_ptr<_Ty>::operator =' : cannot access private member declared in class 'std::unique_ptr<_Ty>'
1>          with
1>          [
1>              _Ty=int
1>          ]
1>          c:\program files\microsoft visual studio 11.0\vc\include\memory(1435) : see declaration of 'std::unique_ptr<_Ty>::operator ='
1>          with
1>          [
1>              _Ty=int
1>          ]
1>          This diagnostic occurred in the compiler generated function 'S &S::operator =(const S &)' 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-28T16:31:53.577

这看起来像是您的 std::lib 中的错误。我确信它之所以出现是因为`vector`规范不断发展的历史。

在 C++98/03`vector`中有这个构造函数：

```
explicit vector(size_type n, const T& value = T(), const Allocator& = Allocator()); 
```

规范是`T`默认构造一次，然后`n`在后两个参数默认调用时复制构造时间。

在 C++11 中，这变成了：

```
explicit vector(size_type n);
vector(size_type n, const T& value, const Allocator& = Allocator()); 
```

第二个构造函数的规范没有改变。但第一个做到了：它应该默认构建`T n`时间，而不是复制（或移动）它。

我本来希望错误消息说正在使用已删除或私有的**复制构造函数。**`unique_ptr`这表明它`vector`遵循 C++98/03 规范，只是还没有更新。

但是由于诊断程序抱怨`unique_ptr`的是 的**复制分配**，因此看起来`vector`已更新，但不正确。听起来它正在使用 C++98/03 中的这个签名：

```
explicit vector(size_type n, const T& value = T(), const Allocator& = Allocator()); 
```

和默认构造`n` `T`'s，然后分配`value`给那些`n` `T`'s。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T16:34:21.177

您没有包含移动赋值运算符，这是`vector`要求的一部分，仅包含移动构造函数。

# arrays - C指针数组分配

> ID：11697995
> 
> 赞同：0
> 
> 时间：2012-07-28T03:22:56.340
> 
> 标签：arrays, pointers, allocation

main() 中的变量何时分配？特别是为指向数组 arr 和 2d 的指针分配了多少内存，如下所示：

```
int main()
{
  float a, b;
  int *b;
  float *(arr)[6];
  float *(2d)[5][5];
} 
```

这些被认为是自动的、全局的还是静态的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T03:25:26.900

所有这些变量都是自动的：全局变量需要在函数范围之外声明；静态变量需要有`static`修饰符。

确切的大小取决于系统。您可以通过打印`sizeof(arr)`,`sizeof(b)`等查找。

分配自动变量的确切时间取决于编译器：其中一些是在进入函数时分配的，有些是在进入使用它们的块时分配的，还有一些可能被优化出来，根本没有分配。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-29T07:10:15.577

函数内声明的所有局部变量的内存将在运行时分配，然后再执行函数。对于每个函数，将在进程内存的堆栈中创建一个激活记录，其中包含所有局部变量。功能执行完成后，将弹出激活记录。

函数内声明的所有变量都被视为`auto`仅，除非它被显式声明为`static`or `register`。在函数外部声明的变量将被视为全局变量。

如果一个变量在函数内部或外部声明为静态，则意味着内存分配将在编译时完成，这将在数据段（或 bss）中。

所有指针变量都将存储一些虚拟地址（任何类型或函数的变量）。所以指针变量的大小在 32 位机器的情况下是 4 个字节，在 64 位机器的情况下是 8 个字节。

# php - 有没有类似 JSONObject.getString() 的东西来获取 !DOCTYPE 方法

> ID：11697996
> 
> 赞同：0
> 
> 时间：2012-07-28T03:22:59.527
> 
> 标签：php, android, json, getstring

我正在从我的网站发布到 PHP 文件。我没有使用 JSON，所以当我尝试使用类似`Log.e("errr", jsonObj.getString("err"));`system.err 的代码时：

```
07-27 20:57:29.274: W/System.err(2431): org.json.JSONException: Value <!DOCTYPE of type java.lang.String cannot be converted to JSONObject 
```

有没有一种方法`JSONObject`可以用来解析/获取我想要获取的给定字符串？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T18:49:22.760

只是重组我的 php 以便我可以调用 json 更容易。

# css - 在带有 CSS 的 Gtk3 中使用 SVG 作为背景

> ID：11697998
> 
> 赞同：1
> 
> 时间：2012-07-28T03:23:02.693
> 
> 标签：css, svg, gtk3

如何使用 CSS（C 代码）在 gtk+3 中使用 .svg 背景？当我尝试这个时，我得到了错误：

```
(test1:2604): Gtk-WARNING **: Theme parsing error: teststyle.css:2:40: Couldn't recognize the image file format for file '/home/mike/gtk/programming/Tests/gtkScalable.svg' 
```

我的环境是：

*   Ubuntu natty（经典无效果模式）
*   gtk+-3.2.3、gdk-pixbuf-2.24.1、pango-1.29.1、atk-2.1.5
*   librsvg2-2 2.32.1-0ubuntu3.1
*   librsvg2-dev 2.32.1-0ubuntu3.1
*   librsvg2-common 2.32.1-0ubuntu3.1
*   libpixbufloader-svg.so 在：/usr/lib/gdk-pixbuf-2.0/2.10.0/loaders
*   libpixbufloader-svg.so 在：/usr/lib32/gdk-pixbuf-2.0/2.10.0/loaders

这是我的测试文件：

```
/* COMPILE WITH:
   gcc -Wall -o test1 `pkg-config --cflags --libs gtk+-3.0` test1.c
*/

#include <gtk/gtk.h>
#include <string.h>

int main (int argc, char *argv[]) {

    gtk_init(&argc, &argv);

    GtkWidget *window = gtk_window_new(GTK_WINDOW_TOPLEVEL);
    gtk_window_set_position(GTK_WINDOW(window), GTK_WIN_POS_CENTER);
    gtk_widget_set_size_request(window, 270, 250);
    g_signal_connect(G_OBJECT (window), "destroy",
                     G_CALLBACK(gtk_main_quit), NULL);

    GtkCssProvider *provider = gtk_css_provider_new ();
    GdkDisplay *display = gdk_display_get_default ()
    GdkScreen *screen = gdk_display_get_default_screen (display);
    gtk_style_context_add_provider_for_screen (screen,
                                   GTK_STYLE_PROVIDER (provider),
                                   GTK_STYLE_PROVIDER_PRIORITY_APPLICATION);
    gsize bytes_written, bytes_read;
    const gchar* home = "/home/mike/gtk/programming/Tests/teststyle.css";
    GError *error = 0;

    gtk_css_provider_load_from_path (provider,
                                     g_filename_to_utf8(home, strlen(home),
                                                        &bytes_read,
                                                        &bytes_written,
                                                        &error),
                                     NULL);
    g_object_unref (provider);
    gtk_widget_show_all(window);
    gtk_main ();
    return 0;
} 
```

这是我的样式表：teststyle.css，以及我正在使用的图像：

[http://www.clker.com/cliparts/b/0/0/b/11949995711012521407gtk.svg](http://www.clker.com/cliparts/b/0/0/b/11949995711012521407gtk.svg)

```
GtkWindow  {
    background-image: url('/home/mike/gtk/programming/Tests/gtkScalable.svg');
} 
```

我还尝试按照其他一些站点上的建议使用此命令更新缓存，但它不起作用并且实际上损坏了我的一些 .c 文件，我不得不重新开始：

```
gdk-pixbuf-query-loaders --update-cache 
```

**更新：**我尝试在 Unity 下运行它，但它仍然不起作用。当我选择了 Gorilla 主题（Gtk2-engines）时，我也尝试过它本身使用 .svg 图像但仍然没有运气。我需要 Gtk3 引擎吗？我看过有关 Sugar-toolkit-gtk3 的示例。但它是 Python，目前尚不清楚这是如何完成的。

[http://erikos.sweettimez.de/2011/12/09/gtk3-code-sprint-rosario-3/](http://erikos.sweettimez.de/2011/12/09/gtk3-code-sprint-rosario-3/)