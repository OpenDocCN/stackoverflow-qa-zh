# StackOverflow 问答 10292000-10292999

# javascript - 如何根据容器大小设置字体大小？

> ID：10292001
> 
> 赞同：85
> 
> 时间：2012-04-24T05:06:13.353
> 
> 标签：javascript, css, font-size

我有一个具有 % 宽度和高度的容器，因此它会根据外部因素进行缩放。我希望容器内的字体相对于容器的大小是恒定的。有没有什么好的方法可以使用 CSS 来做到这一点？`font-size: x%`只会根据原始字体大小（即 100%）缩放字体。

* * *

## 回答 #1

> 赞同：151
> 
> 时间：2012-12-09T17:36:08.273

如果要将字体大小设置为视口宽度的百分比，请使用`vw`单位：

```
#mydiv { font-size: 5vw; } 
```

另一种选择是使用嵌入在 HTML 中的 SVG。它只是几行。文本元素的 font-size 属性将被解释为“用户单位”，例如视口定义的那些。因此，如果您将视口定义为 0 0 100 100，则字体大小为 1 将是 svg 元素大小的百分之一。

不，没有办法在 CSS 中使用计算来做到这一点。问题是用于字体大小的百分比，包括计算中的百分比，是根据继承的字体大小而不是容器的大小来解释的。`bw`为此，CSS 可以使用一个名为 (box-width) 的单位，因此您可以说`div { font-size: 5bw; }`，但我从未听说过这种提议。

* * *

## 回答 #2

> 赞同：68
> 
> 时间：2013-11-11T17:07:39.923

另一个 js 替代方案：

**[工作示例](http://jsfiddle.net/apaul34208/8TrTU/481/)**

```
fontsize = function () {
    var fontSize = $("#container").width() * 0.10; // 10% of container width
    $("#container h1").css('font-size', fontSize);
};
$(window).resize(fontsize);
$(document).ready(fontsize); 
```

或者如[torazaburo 的回答](https://stackoverflow.com/a/13789877/1947286)中所述，您可以使用 svg. 我整理了一个简单的例子作为概念证明：

**[SVG 示例](http://jsfiddle.net/apaul34208/Xyb79/1/)**

```
<div id="container">
    <svg width="100%" height="100%" viewBox="0 0 13 15">
        <text x="0" y="13">X</text>
    </svg>
</div> 
```

* * *

## 回答 #3

> 赞同：30
> 
> 时间：2012-04-24T07:33:41.650

您可以通过 CSS3 使用计算来做到这一点，但是使用 JavaScript 很可能更安全。

这是一个例子：http: [//jsfiddle.net/8TrTU/](http://jsfiddle.net/8TrTU/)

使用 JS，您可以更改文本的高度，然后在调整大小期间简单地将相同的计算绑定到调整大小事件，以便在用户进行调整时进行缩放，或者您允许调整元素的大小。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2013-11-12T12:52:03.193

我在我的一些项目中使用[了 Fittext](http://fittextjs.com/)，它看起来是解决此类问题的好方法。

> FitText 使字体大小灵活。在您的流体或响应式布局上使用此插件来实现填充父元素宽度的可扩展标题。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2012-04-24T06:12:03.757

**不能**用css [font-size完成](https://developer.mozilla.org/en/CSS/font-size)

假设您所指的“外部因素”可以被媒体查询获取，您可以使用它们 - 调整可能必须限于一组预定义的大小。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2014-09-23T08:54:04.503

这是功能：

```
document.body.setScaledFont = function(f) {
  var s = this.offsetWidth, fs = s * f;
  this.style.fontSize = fs + '%';
  return this
}; 
```

然后将所有文档子元素字体大小转换为 em 或 %。

然后将类似这样的内容添加到您的代码中以设置基本字体大小。

```
document.body.setScaledFont(0.35);
window.onresize = function() {
    document.body.setScaledFont(0.35);
} 
```

[http://jsfiddle.net/0tpvccjt/](http://jsfiddle.net/0tpvccjt/)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-02-14T15:44:46.570

我遇到了类似的问题，但我不得不考虑 @apaul34208 示例没有解决的其他问题。就我而言；

*   我有一个使用媒体查询根据视口改变大小的容器
*   里面的文字是动态生成的
*   我想扩大和缩小

不是最优雅的例子，但它对我有用。考虑使用限制窗口调整大小 ( [https://lodash.com/](https://lodash.com/) )

```
var TextFit = function(){
	var container = $('.container');
  container.each(function(){
    var container_width = $(this).width(),
     	width_offset = parseInt($(this).data('width-offset')),
        font_container = $(this).find('.font-container');

     if ( width_offset > 0 ) {
         container_width -= width_offset;
     }

    font_container.each(function(){
      var font_container_width = $(this).width(),
          font_size = parseFloat( $(this).css('font-size') );

      var diff = Math.max(container_width, font_container_width) - Math.min(container_width, font_container_width);

      var diff_percentage = Math.round( ( diff / Math.max(container_width, font_container_width) ) * 100 );

      if (diff_percentage !== 0){
          if ( container_width > font_container_width ) {
            new_font_size = font_size + Math.round( ( font_size / 100 ) * diff_percentage );
          } else if ( container_width < font_container_width ) {
            new_font_size = font_size - Math.round( ( font_size / 100 ) * diff_percentage );
          }
      }
      $(this).css('font-size', new_font_size + 'px');
    });
  });
}

$(function(){
  TextFit();
  $(window).resize(function(){
  	TextFit();
  });
});
```

```
.container {
		width:341px;
		height:341px;
		background-color:#000;
		padding:20px;
	}
	.font-container {
		font-size:131px;
		text-align:center;
		color:#fff;
	}
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>

<div class="container" data-width-offset="10">
	<span class="font-container">£5000</span>
</div>
```

[https://jsfiddle.net/Merch80/b8hoctfb/7/](https://jsfiddle.net/Merch80/b8hoctfb/7/)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-11-06T17:04:25.853

我在这个答案中给出了关于使用`vw`特定容器大小的更详细的[**答案**](https://stackoverflow.com/questions/16056591/font-scaling-based-on-width-of-container/19818026#19818026)，所以我不会在这里重复我的答案。

然而，总而言之，它本质上是考虑（或控制）容器大小相对于视口的大小，然后`vw`根据容器大小计算出适当的大小，同时考虑需要发生的事情如果某些东西被动态调整大小。

因此，如果您希望`5vw`容器的尺寸为视口宽度的 100%，那么`75%`您可能希望为`(5vw * .75) = 3.75vw`.

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-10-29T22:22:40.600

如果要根据元素宽度对其进行缩放，可以使用此 Web 组件：
[https ://github.com/pomber/full-width-text](https://github.com/pomber/full-width-text)

在此处查看演示：
[https ://pomber.github.io/full-width-text/](https://pomber.github.io/full-width-text/)

用法是这样的：

```
<full-width-text>Lorem Ipsum</full-width-text> 
```

* * *

## 回答 #10

> 赞同：-3
> 
> 时间：2016-04-13T08:26:46.003

你也可以试试这个纯 CSS 方法：

```
font-size: calc(100% - 0.3em); 
```

# spring - Spring批处理配套基础设施

> ID：10292003
> 
> 赞同：0
> 
> 时间：2012-04-24T05:06:38.440
> 
> 标签：spring, spring-batch

我们想将我们当前的批处理系统升级到 Spring Batch 处理以使用其并行处理功能。但是底层数据库基础设施很旧，就像我们使用只支持 256 个连接的 sybase。我们使用的应用服务器是 Jboss。添加并行处理是否需要升级到底层基础设施，如 sybase (Sybase ASE15) 或 jboss(jboss-eap-5.1)？请建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T02:54:36.980

您可以将 spring 批处理数据库更改为您喜欢的其他数据库！然后用你的sybase配置一个业务数据源

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T07:46:04.233

数据库几乎总是瓶颈，而不是应用程序服务器，所以我会更新（或完全更改）数据库

# c# - ASP.NET 文件上传页面中的“500 错误”？

> ID：10292004
> 
> 赞同：1
> 
> 时间：2012-04-24T05:06:40.263
> 
> 标签：c#, asp.net, .net

我正在从 Android 调用此 PHP 代码以将文件从 Android 传输到服务器，并且它工作得很好。

```
<?php
$target_path  = "./";
$target_path = $target_path . basename( $_FILES['uploadedfile']['name']);
if(move_uploaded_file($_FILES['uploadedfile']['tmp_name'], $target_path)) {
 echo "The file ".  basename( $_FILES['uploadedfile']['name']).
 " has been uploaded";
} else{
 echo "There was an error uploading the file, please try again!";
}
?> 
```

但是我的服务器应用程序在 .net 中，我必须在 .net 中编写此代码。我尝试编写 .net 版本代码，但它不起作用并返回`500 internal server error`。

```
public partial class uploadfiles : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {
        try
        {
            HttpFileCollection uploadFile = Request.Files;
            if (uploadFile.Count > 0)
            {
                HttpPostedFile postedFile = uploadFile[0];
                System.IO.Stream inStream = postedFile.InputStream;
                byte[] fileData = new byte[postedFile.ContentLength];
                inStream.Read(fileData, 0, postedFile.ContentLength);
                postedFile.SaveAs(Server.MapPath("Data") + "\\" + postedFile.FileName);
            }        
        }
        catch (Exception ex)
        { 
            StringBuilder sb = new StringBuilder();
            sb.AppendLine("Message : " +ex.Message);
            sb.AppendLine("Source : " + ex.Source);
            sb.AppendLine("StackTrace : " + ex.StackTrace);
            sb.AppendLine("InnerException : " + ex.InnerException);
            sb.AppendLine("ToString : " + ex.ToString());

            LogInToFile(sb.ToString());
        }
    }
} 
```

它没有记录任何异常，甚至我认为它没有到达第一行。我通过日志文件检查了它。因为它不起作用。请帮忙。

安卓代码如下

```
HttpURLConnection connection = null;
DataOutputStream outputStream = null;
DataInputStream inputStream = null;

String pathToOurFile = "/data/file_to_send.mp3";
String urlServer = "http://192.168.1.1/handle_upload.php";
String lineEnd = "\r\n";
String twoHyphens = "--";
String boundary =  "*****";

int bytesRead, bytesAvailable, bufferSize;
byte[] buffer;
int maxBufferSize = 1*1024*1024;

try
{
FileInputStream fileInputStream = new FileInputStream(new File(pathToOurFile) );

URL url = new URL(urlServer);
connection = (HttpURLConnection) url.openConnection();

// Allow Inputs & Outputs
connection.setDoInput(true);
connection.setDoOutput(true);
connection.setUseCaches(false);

// Enable POST method
connection.setRequestMethod("POST");

connection.setRequestProperty("Connection", "Keep-Alive");
connection.setRequestProperty("Content-Type", "multipart/form-data;boundary="+boundary);

outputStream = new DataOutputStream( connection.getOutputStream() );
outputStream.writeBytes(twoHyphens + boundary + lineEnd);
outputStream.writeBytes("Content-Disposition: form-data; name=\"uploadedfile\";filename=\"" + pathToOurFile +"\"" + lineEnd);
outputStream.writeBytes(lineEnd);

bytesAvailable = fileInputStream.available();
bufferSize = Math.min(bytesAvailable, maxBufferSize);
buffer = new byte[bufferSize];

// Read file
bytesRead = fileInputStream.read(buffer, 0, bufferSize);

while (bytesRead > 0)
{
outputStream.write(buffer, 0, bufferSize);
bytesAvailable = fileInputStream.available();
bufferSize = Math.min(bytesAvailable, maxBufferSize);
bytesRead = fileInputStream.read(buffer, 0, bufferSize);
}

outputStream.writeBytes(lineEnd);
outputStream.writeBytes(twoHyphens + boundary + twoHyphens + lineEnd);

// Responses from the server (code and message)
serverResponseCode = connection.getResponseCode();
serverResponseMessage = connection.getResponseMessage();

fileInputStream.close();
outputStream.flush();
outputStream.close();
}
catch (Exception ex)
{
//Exception handling
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T07:15:59.460

ASP.NET 应用程序中的默认最大文件大小限制为 4 MB。您可以通过在 web.config 中设置以下内容来配置应用程序以接受更大的大小

```
<system.web>
  <httpRuntime maxRequestLength="20480" />
</system.web> 
```

要了解有关配置文件大小限制的更多信息，请查看[ASP.NET 中的大文件上传](http://weblogs.asp.net/jgalloway/archive/2008/01/08/large-file-uploads-in-asp-net.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-24T05:31:05.163

试试这个：

```
postedFile.SaveAs(Server.MapPath("~/Data/" + postedFile.FileName )); 
```

其中 ~/Data/ 是您要保存文件的位置。

然后 + postedFile.FileName 你的文件名。

最好的祝福

# python - Openerp 中 .rml 报告中的自动换行

> ID：10292010
> 
> 赞同：3
> 
> 时间：2012-04-24T05:07:02.183
> 
> 标签：python, report, openerp, rml

有没有办法在openerp6.0的rml模板中换行。我已经定义了一个列宽来获取openerp的销售订单模板中的产品名称。但是当添加没有空格的长名称时，它只是穿过rml模板中的列单独报告。任何人都可以为这个问题提出解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T07:07:52.470

我不认为这是开箱即用的支持。我建议您向要显示的对象添加一些方法，这些方法将提供包装到给定列长度的值（小心，如​​果您使用比例字体，这会变得非常棘手，最好坚持使用固定宽度）。

Python 标准库的[textwrap](http://docs.python.org/library/textwrap.html)模块可用于编写这些方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-25T16:30:40.220

只需将单元格的内容包含在**para**标记中即可。这是一个例子：

```
<!DOCTYPE document SYSTEM "rml.dtd" >
<document filename="wraps.pdf">
  <template showBoundary="0">
    <pageTemplate id="main">
      <pageGraphics />
      <frame id="first" x1="150" y1="400" width="250" height="400" />
    </pageTemplate>
  </template>
  <stylesheet>
    <blockTableStyle id="blocktablestyle4">
      <!-- show a grid: this also comes in handy for debugging your tables.-->
      <lineStyle kind="GRID" colorName="green" thickness="1" start="0,0" stop="-1,-1" />
    </blockTableStyle>
    <paraStyle name="textstyle1" fontName="Helvetica" fontSize="9" textColor="blue" />
  </stylesheet>
  <story>
    <blockTable style="blocktablestyle4" colWidths="2cm,2cm">
      <tr>
        <td>cell A</td>
        <td>This doesn't wraps.</td>
      </tr>
      <tr>
        <td>cell C</td>
        <td>
          <para style="textstyle1">to see how it works. This is yet more long text to demonstrate wrapping through "para" tag.</para>
        </td>
      </tr>
    </blockTable>
  </story>
</document> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-13T10:37:32.703

我建议您像这样使用 parawrap 标签：

```
<parawrap>[[o.name]]</parawrap> 
```

当您显示对象的名称时使用此示例。

# string - 这是什么编码？

> ID：10292012
> 
> 赞同：0
> 
> 时间：2012-04-24T05:07:25.133
> 
> 标签：string, encoding, persian

> **可能重复：**
> [如何将 unicode 转义序列转换为 .NET 字符串中的 unicode 字符](https://stackoverflow.com/questions/183907/how-do-convert-unicode-escape-sequences-to-unicode-characters-in-a-net-string)

我正在翻译 zimbra，我很困惑知道这个字符串编码是什么以及我可以使用哪些工具将 utf-8 编码的字符串转换为这种类型？

**细绳：**

*错误维护模式*=`\u0628\u0627 \u0639\u0631\u0636 \u067E\u0648\u0632\u0634 \u062D\u0633\u0627\u0628 \u06A9\u0627\u0631\u0628\u0631\u06CC`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T05:21:18.523

这些代码点位于 Unicode[基本多语言平面 (BMP](http://en.wikipedia.org/wiki/Plane_%28Unicode%29#Basic_Multilingual_Plane) ) 的阿拉伯语块中。我使用[BabelMap](http://www.babelstone.co.uk/unicode/babelmap.html)确定了这一点。您也可以使用[在线版本。](http://www.babelstone.co.uk/unicode/babelmap.html)

使用该应用程序，您可以在以下之间进行转换：

`\u0628\u0627 \u0639\u0631\u0636 \u067E\u0648\u0632\u0634 \u062D\u0633\u0627\u0628 \u06A9\u0627\u0631\u0628\u0631\u06CC`

和：

`با عرض پوزش حساب کاربری`

对于程序化工具，请查看[ICU 项目](http://site.icu-project.org/)。

# android - Android - 使用意图在活动之间传递变量时遇到问题

> ID：10292019
> 
> 赞同：0
> 
> 时间：2012-04-24T05:08:41.437
> 
> 标签：android, class, variables, android-intent

我是 Android 新手，我只是想将两个双打从一个活动传递到另一个活动。这个问题已经在这个网站上以几种不同的方式被问过几次，但是关于我的实现的一些事情导致我的应用程序强制关闭。我认为我的问题可能与我试图将变量传递到的活动中的“savedInstanceState”Bundle 有关。我显然遗漏了很多代码，但我包括了所有使用 Bundles 的地方。

[编辑] - 我为我需要做的事情找到了一个糟糕的编程解决方案。我将公共静态变量放在接收类中并从发送类访问它们。我意识到这是糟糕的编程，但它可以满足我的要求。感谢所有试图提供帮助的人。我将继续尝试以正确的方式做到这一点。

如果没有 i.putExtra 行和任何涉及 Bundle extra 的行，它可以正常工作。这是代码：

```
int lat = 0;
int lon = 0;
private void createNote() {
    Intent i = new Intent(this, NoteEdit.class);
    i.putExtra("lat", lat);
    i.putExtra("lon", lon);
    startActivityForResult(i, ACTIVITY_CREATE);
} 
```

这是我发送给他们的活动：

```
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    Bundle extra = getIntent().getExtras();
    int lat = extra.getInt("lat");
    int lon = extra.getInt("lon");

mRowId = (savedInstanceState == null) ? null : (Long) savedInstanceState.getSerializable(NotesDbAdapter.KEY_ROWID);
    if (mRowId == null) {
        Bundle extras = getIntent().getExtras();
        mRowId = extras != null ? extras.getLong(NotesDbAdapter.KEY_ROWID) : null;
    }
}

@Override
protected void onSaveInstanceState(Bundle outState) {
    super.onSaveInstanceState(outState);
    saveState();
    outState.putSerializable(NotesDbAdapter.KEY_ROWID, mRowId);
}

@Override
protected void onPause() {
    super.onPause();
    saveState();
}

@Override
protected void onResume() {
    super.onResume();
    populateFields();
}

private void saveState() {
    String title = mTitleText.getText().toString();
    String body = mBodyText.getText().toString();
    String lattitude = mLatText.getText().toString();
    String longitude = mLonText.getText().toString();
    String date = mDateText.getText().toString();
    String time = mTimeText.getText().toString();

    if (mRowId == null) {
        long id = mDbHelper.createNote(title, body, lattitude, longitude, date, time);
        if (id > 0) {
            mRowId = id;
        }
    } else {
        mDbHelper.updateNote(mRowId, title, body, lattitude, longitude, date, time);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T05:18:58.973

看起来不错，你的问题在其他地方。在设置意图之前尝试添加打印，以确保您的键和值是您真正认为的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T05:21:05.467

```
int name = getIntent().getExtras().getInt(key); 
```

您正在调用`startActivityforresult`.so 尝试将包放入`onActivityResult`not in 。`oncreate`您可以覆盖它`onActivityResult`

*   我认为这是尝试使用 this 获取捆绑包的问题。您将获得这个新变量的值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T05:32:45.877

这就是您应该传递值的方式。

```
Bundle bundle = new Bundle();
bundle.putString("str1", str1);
bundle.putInt("int1", int1);
bundle.putDouble("double1", double1);
Intent i = new Intent(this, Activity2.class);
i.putExtras(bundle);
startActivityForResult(i); 
```

这就是您在下一个活动中获得它们的方式

```
int int1 = getIntent().getExtras().getInt("int1")
String str1 = getIntent().getExtras().getString("str1")
double double1 = getIntent().getExtras().getDouble("double1") 
```

这是否消除了您的疑虑？

# objective-c - 单击孩子时如何一次获取父视图标签和子标签？

> ID：10292023
> 
> 赞同：0
> 
> 时间：2012-04-24T05:09:42.403
> 
> 标签：objective-c, ios, xcode4

我已经动态创建了视图，在动态创建的按钮内部。单击按钮时，我必须同时获取视图和按钮的标签。我已将代码用作

```
-(void)addButton
{
    for (int j=0; j<[defaultNumberAry count]; j++) {

    numberButton=[[UIButton alloc]initWithFrame:CGRectMake(n, 0, 40, 40)];
    n=n+42;
    [numberButton setBackgroundImage:[defaultNumberAry objectAtIndex:j] forState:UIControlStateNormal];
    numberButton.tag=j;
    [numberTagAry addObject:[NSString stringWithFormat:@"%d",j]];
    numberButton.userInteractionEnabled = YES;
    [numberButton addTarget:self action:@selector(pressed:) forControlEvents:UIControlEventTouchUpInside];
    numberButton.autoresizingMask = UIViewAutoresizingFlexibleTopMargin | UIViewAutoresizingFlexibleHeight | UIViewAutoresizingFlexibleBottomMargin | UIViewAutoresizingFlexibleWidth;
    [numberView addSubview:numberButton];

}
}
-(void)addView:(int)yv
{
n=22;
numberView=[[UIView alloc]initWithFrame:CGRectMake(300, yv, 400, 44)];
numberView.backgroundColor=[UIColor yellowColor];
numberView.tag=b;
b++;
numberView.autoresizingMask = UIViewAutoresizingFlexibleTopMargin | UIViewAutoresizingFlexibleHeight | UIViewAutoresizingFlexibleBottomMargin | UIViewAutoresizingFlexibleWidth;
UITapGestureRecognizer *tapGestureRecognizer = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(touched:)];
[tapGestureRecognizer setNumberOfTapsRequired:1];
[numberView addGestureRecognizer:tapGestureRecognizer];

}
-(void)pressed:(id)sender{
    UIButton *button = (UIButton *)sender;
    if(!button.selected){
        NSLog(@"selected btn tag:%d",button.tag);       
                       }
}
- (void) touched:(id)sender
{
    int v=((UIGestureRecognizer *)sender).view.tag;
    NSLog(@"view tag:::%d",v);

  } 
```

有时控件会按下按钮，有时会查看触摸。我必须一次获得两个标签。提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-24T05:28:34.203

当您像这样添加子视图时：

```
[numberView addSubview:numberButton]; 
```

`numberButton`成为;的**子视图** `numberView`也`numberView`成为的**superview**。`numberButton`您可以通过该属性访问它。

```
-(void)pressed:(id)sender{
    UIButton *pressedButton = (UIButton *)sender;
    UIView *superViewOfPressedButton = pressedButton.superview;
    NSLog(@"Tag of button:%i Tag of pressed button's button view is %i",pressedButton.tag,superViewOfPressedButton.tag);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T05:28:14.217

通常，您只会在一个地方捕获用户的触摸，而不是像您尝试做的两个地方。您可以在此处完全删除 GestureRecognizer，只需使用按钮的触摸事件。

然后你有几个选项来完成你想要的下一点。在按钮的触摸处理程序中，在上述情况下为“按下”，您可以获得作为按钮的 sender.tag 和作为视图的 sender.superview.tag。

或者，您可以使用公式并只使用一个标签。例如，(view.tag * 1000) + (button.tag)。所以这意味着第一个视图上的第一个按钮的标签为 1001。1000 代表视图，1 代表按钮。第五个视图上的第八个按钮是 5008。您只需做一些简单的数学运算即可提取原始数字。

# php - CodeIgniter + RedBean：我还需要“模型”吗？

> ID：10292024
> 
> 赞同：1
> 
> 时间：2012-04-24T05:09:59.877
> 
> 标签：php, codeigniter, redbean

我只是想深入研究 CodeIgniter + RedBean ORM。

浏览了一些示例，并认为已经足够开始了。

但是，使用 RedBean 似乎无需使用 CodeIgniter 模型？看起来您可以直接从控制器中完成大部分与数据库相关的事情。

这是真的？（在更高的层次上，大多数 ORM 都是这样吗？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T05:55:03.363

这是真的，但不是因为`RedBean`。如果需要，您可以`CodeIgniter`不使用模型，但最好将其分开。

> CodeIgniter 对 MVC 有一种相当松散的方法，因为不需要模型。如果您不需要额外的分离，或者发现维护模型需要比您想要的更多的复杂性，您可以忽略它们并使用控制器和视图构建您的应用程序。CodeIgniter 还使您能够合并自己现有的脚本，甚至为系统开发核心库，使您能够以对您最有意义的方式工作。

**您可以直接在控制器内部使用查询。**

[**模型-视图-控制器**](http://codeigniter.com/user_guide/overview/mvc.html)

# disk - 将 B+ 树写入磁盘时保持“链接”？

> ID：10292026
> 
> 赞同：1
> 
> 时间：2012-04-24T05:10:19.390
> 
> 标签：disk, b-tree

我已经在 java 中完成了 B+ 树的实现，但像往常一样，它完全在主内存中。如何将 B+ 树存储到磁盘上？btree 的每个节点都包含指向其子节点的指针（主内存地址或对象引用），当 Btree 驻留在磁盘上时，我如何实现类似的事情？当 b+ 树在磁盘上时，什么替换了 b+ 树节点中的主内存地址？

这里已经发布了一个类似的问题： [B+Tree on-disk implementation in Java](https://stackoverflow.com/questions/3192812/btree-on-disk-implementation-in-java)

但我不完全理解答案。

请分享你的看法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T05:21:57.717

看一下github中[JDBM3的代码。](https://github.com/jankotek/JDBM3)这个项目将 B+ 树和类似的数据结构保存到磁盘，你肯定会在那里找到答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T07:57:10.267

以最简单的形式：您必须跟踪*当前节点*读取或写入的文件偏移量（从文件开头开始的字节数）。因此，在基于文件的 DB 上，您可以保存偏移量，而不是内存地址。

然后从文件中读取它时，您可以决定将其“缓存”在内存中，并保存给定节点的内存地址，或者只对偏移量进行操作。

话虽如此，我必须补充一点，通常基于文件的数据库比这更复杂，通过将节点写入页面（通常与磁盘上的页面大小相同）来优化磁盘访问。这样，您可以通过一次磁盘寻道操作（被认为是昂贵的操作）读取多个节点。

# java - 仅获取“日期”之前的秒数

> ID：10292027
> 
> 赞同：0
> 
> 时间：2012-04-24T05:10:26.617
> 
> 标签：java, android, datetime

我一直在研究android中的应用程序，我必须在其中获取从纪元到日期的秒数...通常在使用以下功能时

```
long timeInSeconds = System.currentTimeMillis()/1000; 
```

它返回我到当前时间的秒数，包括日期+时间。我实际上想忽略秒的时间部分并保持秒数直到日期，这将导致当天的时间戳相同......无论如何要这样做..??? 任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T05:15:42.523

```
Calendar timeLessCalendar = Calendar.getInstance()
timeLessCalendar.set(Calendar.HOUR_OF_DAY,0);
timeLessCalendar.set(Calendar.MINUTE,0);
timeLessCalendar.set(Calendar.SECOND,0);
timeLessCalendar.set(Calendar.MILLISECOND,0);
//now grab the seconds
long secondTillDate =  timeLessCalendar.getTime().getTime()/1000; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-24T05:16:40.447

[您可以使用DateFormat.parse()](http://docs.oracle.com/javase/6/docs/api/java/text/DateFormat.html#parse%28java.lang.String%29)从字符串创建日期，然后使用[Date.getTime()](http://docs.oracle.com/javase/6/docs/api/java/util/Date.html#getTime%28%29)将其转换为时间戳。

```
/* something like this */

Date thisMorning    =  DateFormat.parse("04/23/2012 0:00 AM, PDT");
long secSinceEpoch  =  thisMorning.getTime() / 1000; 
```

# symfony - Symfony2：如何在sonatabundle的configureListFields中添加一对多的属性字段？

> ID：10292028
> 
> 赞同：0
> 
> 时间：2012-04-24T05:10:33.790
> 
> 标签：symfony, mapping, symfony-sonata

我有一个用户实体类，其中包含一对多的属性“事务”，该属性包含该特定用户的事务。

```
use Sonata\UserBundle\Entity\BaseUser as BaseUser;
class User extends BaseUser
{
     //...//

     /*
      * @ORM\OneToMany(targetEntity="Transaction", mappedBy="user")
      *
      */
      protected $transactions;

     //...//
} 
```

在后端我有扩展奏鸣曲管理类的 userAdmin 类

```
/**
 * @param \Sonata\AdminBundle\Datagrid\ListMapper $listMapper
 * @return void
 */
protected function configureListFields(ListMapper $listMapper)
{
    $listMapper
        ->add('id')
        ->addIdentifier('username')
        ->add('transactions')
    ;
} 
```

如果我这样做，我会收到以下错误：

> 在 SonataDoctrineORMAdminBundle:CRUD:list_orm_one_to_many.html.twig 的第 17 行呈现模板期间引发了异常（“您必须从服务 gd_admin.customer_details 为字段选项事务定义`associated_tostring`选项或创建方法是”）。`Project\MyBundle\Entity\Transaction::__toString`

不明白如何在“用户列表”页面中提供指向用户交易的链接。任何帮助都会非常有用。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T10:26:12.513

您需要在 Transaction 类中实现 __toString() 方法。它应该返回一个有意义地描述交易的字符串。Symfony 将自动调用此方法来获取要向用户显示的交易描述。以下是我在一个项目中用于 User 类的示例实现：

```
public function __toString()
{
    return ($this->firstName . ' ' . $this->lastName);
} 
```

最好的问候， Champika

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-13T16:28:26.933

您所要做的就是`function __toString()`在您的实体上指定，或者在字段规范中有另一个选项，您可以说明应该将哪个属性用作实体的标题，如下所示：

```
$listMapper
    ->add('id')
    ->addIdentifier('username')
    ->add('transactions', null, array('associated_property' => 'transaction_name'))
; 
```

这一切都假设您已经`transaction_name`在`Transaction`实体中提交了调用，或者您可以只使用 ID。

# android - 是否可以在线下载活动并将其加载到 Android 的选项卡中？

> ID：10292029
> 
> 赞同：4
> 
> 时间：2012-04-24T05:11:02.490
> 
> 标签：android, android-activity, android-tabhost, android-tabs

是否可以下载其他人的示例，并将他们的代码加载到选项卡中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T05:24:19.830

我不知道你的答案，你在寻找什么，（据我了解你的问题）

简单的战略逻辑。**代码编译**、**代码构建**和为它制作**.dex 代码**呢？Android`.apk`文件是使用文件构建的`.dex`并且只能执行，如果您要添加新代码，那么您必须再次编译这些类并创建一个新`.apk`文件，我认为没有任何设备为它提供这样的平台。如果您想在您机器上的 .apk 文件上执行此操作，那么您必须制作一些`reverse engineering process`并将新的下载代码添加到其中，然后再次为应用程序构建流程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T05:14:26.337

不，所有活动都必须在您的[Manifest中声明](http://developer.android.com/guide/topics/manifest/manifest-intro.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-24T05:30:44.640

不，您不能`Activity`动态加载 es，因为它们需要在 Manifest 中声明。

你可以做的是`WebView`在你的 Activity 中加载它们的内容托管在某个地方，但这将是一个 Web 应用程序而不是一个原生的 Android 应用程序。

# objective-c - 目标 C 新手：需要帮助理解强引用与分配

> ID：10292031
> 
> 赞同：1
> 
> 时间：2012-04-24T05:11:07.487
> 
> 标签：objective-c, ownership

第一篇文章。对不起，如果我搞砸了代码规则。我正在尝试从 Big Nerd Ranch Guide 中学习 Objective C。我将发布处理强引用的示例。

```
#import <Foundation/Foundation.h>

@interface Asset : NSObject
{
  NSSTRING *label;
  unsigned int resaleValue;
}
@property (strong) NSString *label;
@property unsigned int resaleValue;
@end 
```

所以基本上 NSString 需要一个强引用，而 int 不需要。我知道 NSString 是一个对象，并且我读过如果没有指定任何变量，则为变量赋予 assign 属性。

因此，如果 assign 足以让 int 之类的东西在拥有它的对象被释放之前不被释放，那么为什么不能让 Asset 对象中的 NSString 对象不被释放呢？最终，我想我仍然对 assign 在引用计数方面的作用与 strong 的作用感到困惑（或者我应该说 retain ，因为这是在 ARC 中替换的 strong ）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T05:16:39.320

如果您来自 C++，则强 == 到 std::shared_ptr

strong 表示在分配期间必须分别保留和释放对象。

```
-(void)assign:(id) b to:(id) a {
    if( b ){
      [b retain];
    }
    if ( a ){
      [a release];
    }
    a = b;

} 
```

要回答您的第二个问题，objective-C 对象的大小不像结构那样定义。因此 obj-C 类不能按值保存。

因此，编译为 obj-c 的 obj-c 类中的所有数据将始终在其中存储普通的旧数据类型，因为它们的大小可以确定为固定的。

考虑一个 8 字节的缓冲区；

前 4 个字节用于您的 int，后 4 个字节是您的指针，因为具有可变长度的字符串会在运行时更改对象的大小，您会看到这不起作用，在堆上分配一个字符串并分配到你的指针。

# sql - 加入交替的可能性

> ID：10292042
> 
> 赞同：0
> 
> 时间：2012-04-24T05:12:48.683
> 
> 标签：sql, sql-server, sql-server-2008

有一个`Select`说法

```
 Select i.ItemID, s.Price, s.Qty, s.Company From Item i
    Inner Join Sku s ON s.ItemID = i.ItemID 
```

这会返回：

```
ItemID  |   Price   |   Qty |   Company
    1   |   $50.00  |   0   |   Abc inc.
    1   |   $45.00  |   5   |   Def inc.
    1   |   $35.00  |   15  |   Xyz inc.

    2   |   $36.00  |   4   |   Abc inc.
    2   |   $45.00  |   5   |   Def inc.
    2   |   $35.00  |   1   |   Xyz inc.

    3   |   $20.00  |   2   |   Abc inc.
    3   |   $45.00  |   0   |   Def inc.
    3   |   $35.00  |   5   |   Xyz inc. 
```

但需要有以下逻辑：

显示价格最低且数量 > 0 的行，包括该结果的推荐公司。

别的...

显示价格最低的行，包括该价格的推荐公司。

看起来像这样：

```
ItemID  |   Price  |    Qty |   Company
    1   |   $35.00  |   15  |   Xyz inc.

    2   |   $35.00  |   1   |   Xyz inc.

    3   |   $20.00  |   2   |   Abc inc. 
```

我没有尝试过任何事情，因为老实说，我不知道该尝试什么，甚至不知道在我的问题中要问什么。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T05:36:39.580

这是一种方法：

```
SELECT      I.ItemId
        ,   S.Price
        ,   S.Qty
        ,   S.Company
FROM        dbo.Item    I
CROSS APPLY (
                SELECT  MIN(Price)  Price
                FROM    dbo.Sku     MP
                WHERE   I.ItemId    = MP.ItemId
                AND     Qty         > 0
            ) MP
CROSS APPLY (
                SELECT 
                TOP 1   Price
                    ,   Qty
                    ,   Company
                FROM    dbo.Sku     S
                WHERE   S.ItemId    = I.ItemId
                AND     S.Price     = MP.Price
            ) S 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T06:14:32.640

像这样的东西怎么样，使用行号：

```
select 
    i.ItemId, s.Price, s.Qty, s.Company 
from
    item i
inner join
    (
        select 
            t.ItemId,
            t.Price, 
            t.Qty, 
            t.Company, 
            RowNumber = row_number() over (PARTITION BY t.ItemId order by t.price asc, t.qty desc)
        from 
            Sku t
    ) s on s.itemid = i.ItemId
where 
    s.RowNumber = 1 
```

行号“partition by”和“order by”在这里很重要，以确保正确的结果，即使一个项目的所有数量都是 0，这也有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T05:19:09.463

```
Select i.ItemID, Min(s.Price) as Price, s.Qty, s.Company 
From Item i Inner Join Sku s ON s.ItemID = i.ItemID 
Where s.qty > 0 
Group by i.itemid, s.qty, s.Company 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-24T05:19:48.743

这是查询，

```
Select i.ItemID, s.Price, s.Qty, s.Company 
From Item i
Inner Join Sku s
  ON s.ItemID = i.ItemID
Inner Join (
    select min(price) as Price, ItemID
    from Sku
    where Qty > 0
    group by ItemId
  )a
on a.ItemId = s.ItemId
and a.Price = s.Price 
```

如果您只需要 Item 表中的 ItemId，则可以删除与 Item 表本身的联接，因为 ItemId 存在于 Sku 中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-24T05:19:59.273

```
Select i.ItemID, min(s.Price) as price, s.Qty, s.Company From Item i 
Inner Join Sku s ON s.ItemID = i.ItemID  and s.qty>0
group by i.itemid, s.company, s.qty 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-24T10:14:19.293

基本上，您需要第一个 sku 记录，首先按是否有任何库存（有库存的项目首先出现）排序，然后按价格升序排列。在以下查询中，公用表表达式返回所需的 SKU 字段以及 RowNum 计算字段。RowNum 由 ItemID 分区（即，对于每个新 ItemID 重置为 1）并首先按库存的存在排序，然后按价格排序。然后主查询从每个 ItemID 中选择第一条记录：

```
WITH cte AS (
    SELECT ItemID, Price, Qty, company,
    ROW_NUMBER() OVER (PARTITION BY ItemId ORDER BY 
        CASE WHEN Qty > 0 THEN 1 ELSE 0 END DESC, Price ASC) AS RowNum
    FROM #sku
    )
SELECT ItemID, price, qty, Company FROM cte WHERE RowNum = 1 
```

# html - 如何同时运行两个版本的静态网站进行 A/B 测试？

> ID：10292046
> 
> 赞同：0
> 
> 时间：2012-04-24T05:13:22.333
> 
> 标签：html, testing, usability

例如，我有一个非常简单的网站，仅基于 HTML/CSS/Javascript，没有使用 php、.net、ruby。我网站的一些访问者应该会看到版本“A”，而其他访问者会看到版本“B”。

站点托管在 Apache 服务器上

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T05:21:55.310

一种方法是将 Apache 作为负载平衡器运行，在站点的两个不同版本（它们是在其他端口上运行的它们自己的虚拟主机）之间“平衡”。当有人连接时，apache 会随机将他们定向到站点的版本 A 或版本 B。您可以使用[mod_proxy_balancer](http://httpd.apache.org/docs/2.2/mod/mod_proxy_balancer.html)来执行此操作。它还支持“粘性”平衡：也就是说，您可以设置一个 cookie，以便一旦客户端进入版本 A，它们总是被定向到版本 A（同样与版本 B）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T05:21:40.910

一种方法是分析 IP 地址或范围。

创建 IP 地址/范围列表

```
$ips = array(
    "a" => array( 'xxx.xxx.xxx.xxx', ....),
    "b" => array( 'xxx.xxx.xxx.xxx', ....),
); 
```

现在，使用`$_SERVER['REMOTE_ADDR']`和切换域

```
if(in_array($ips['a'], $_SERVER['REMOTE_ADDR'])) {
    header("location: website.com/a");
} else {
    header("location: website.com/b");
}
exit; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T05:19:01.400

听起来你可能想要.htaccess：

*   [http://httpd.apache.org/docs/2.2/mod/mod_alias.html](http://httpd.apache.org/docs/2.2/mod/mod_alias.html)

*   [http://www.webweaver.nu/html-tips/web-redirection.shtml](http://www.webweaver.nu/html-tips/web-redirection.shtml)

# java - GWT：如何访问/更改 HTML 面板的值

> ID：10292049
> 
> 赞同：1
> 
> 时间：2012-04-24T05:14:01.243
> 
> 标签：java, gwt

我有一个 HTML 面板，我在其中保存一些文本，然后我想访问一些特定的 HTML 面板的节点并更改其属性，

这就是我正在做的

```
 HTMLPanel htmlText;
      htmlText.setInnerHTML(result.getText());
      Node x  = htmlText.getChild(1); 
```

我得到这个 javascriptObject$ 作为 x 的值（如果我在调试中看到）

```
 <span class="my-wrapper"><span class="myText">testing text</span><span class="myNumber"> (2) </span></span> 
```

我需要的是仅获取此文本“测试文本”并更改其颜色。

是否可以 ？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T05:20:22.897

我认为您可能希望将[GWTQuery](http://code.google.com/p/gwtquery/)用于此类事情。

```
HTMLPanel htmlText;
htmlText.setInnerHTML(result.getText());
//Node x  = htmlText.getChild(1);

String value = $(".myText", htmlText).text(); 
```

# jquery - 鼠标悬停时的 Jquery 动画并在鼠标悬停时停止

> ID：10292050
> 
> 赞同：3
> 
> 时间：2012-04-24T05:14:02.697
> 
> 标签：jquery, animation, mouseout, mouseenter

我有六个带有此代码的按钮：

```
$('img#b1').on('mouseenter', function() {
    var height = $('div#b1').css('height');
    if(height == '50px'){
        $('div#b1').animate({
        'width' : '1100'
    }, 200);
    }
});
$('img#b1').on('mouseout', function() {
    var height = $('div#b1').css('height');
    if(height == '50px'){
        $('div#b1').animate({
        'width' : '990'
    }, 200);
    }
}); 
```

它可以工作，但是如果您快速移动鼠标几次然后将鼠标移出，它将在鼠标移过它的时间恢复动画。

如果鼠标不在动画上，我不想恢复动画。

我该如何解决？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-10T11:13:26.640

这是一个完美的例子。

```
$('img#b1')
  .hover(function() {
    $(this).stop().animate({ width: 1100 }, 'fast');
  }, function() {
    $(this).stop().animate({ width: 990 }, 'fast');
  }); 
```

[http://css-tricks.com/full-jquery-animations/](http://css-tricks.com/full-jquery-animations/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-24T06:37:42.907

您应该编写如下代码：

```
$('img#b1').on({
    mouseenter: function() {
        var height = $('div#b1').css('height');
        if(height === '50px'){
            $('div#b1').stop().animate({
                width: 1100
            }, 200);
        }
    },
    mouseout: function() {
        var height = $('div#b1').css('height');
        if(height === '50px'){
            $('div#b1').stop().animate({
                width: 990
            }, 200);
        }
    }
}); 
```

它使您的代码更清晰。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-24T05:19:57.493

你需要像这样停止动画：

```
$('img#b1').on('mouseenter', function() {
    var height = $('div#b1').css('height');
    if(height == '50px'){
        $('div#b1').stop().animate({
        'width' : '1100'
    }, 200);
    }
});
$('img#b1').on('mouseout', function() {
    var height = $('div#b1').css('height');
    if(height == '50px'){
        $('div#b1').stop().animate({
        'width' : '990'
    }, 200);
    }
}); 
```

# django - 如何从管理界面重置用户密码

> ID：10292053
> 
> 赞同：7
> 
> 时间：2012-04-24T05:14:35.673
> 
> 标签：django, django-admin, django-authentication

在我的网站中，我想让管理员**重置**任何用户的密码。

**重置**我的意思是`password_reset`视图的确切作用（在contrib.auth*下*）：向该用户电子邮件发送确认链接。

最好的方法是如何做到这一点？是否已经有一个应用程序/片段可以做到这一点？

**编辑：**

假设用户*john*是管理员。我想要的是让*约翰*通过管理界面重置任何用户的密码。例如，要重置*最大*密码，他只需转到*最大*用户，然后单击任何链接以重置他的密码。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-15T07:50:19.417

我最后做的是添加一个自定义`ModelAdmin`：

```
from django.contrib.auth.forms import PasswordResetForm
from django.contrib.auth.admin import UserAdmin

class CustomUserAdmin(UserAdmin):
    ...
    def reset_password(self, request, user_id):
        if not self.has_change_permission(request):
            raise PermissionDenied
        user = get_object_or_404(self.model, pk=user_id)

        form = PasswordResetForm(data={'email': user.email})
        form.is_valid()

        form.save(email_template_name='my_template.html')
        return HttpResponseRedirect('..')

    def get_urls(self):
        urls = super(UserAdmin, self).get_urls()

        my_urls = patterns('',
            (r'^(\d+)/reset-password/$',
                     self.admin_site.admin_view(self.reset_password)
            ),
        )
        return my_urls + urls 
```

而且我还必须覆盖`change_form.html`模板，如下所示：

```
{% extends "admin/change_form.html" %}
{% load i18n %}
{% block object-tools %}
    {% if change %}{% if not is_popup %}
        <ul class="object-tools">
            {# You can also give a name to that pattern and refer to it below using 'url' #}
            <li><a href="reset-password/" class="historylink">Reset password</a></li>

            <li><a href="history/" class="historylink">{% trans "History" %}</a></li>
            {% if has_absolute_url %}
                <li><a href="../../../r/{{ content_type_id }}/{{ object_id }}/" class="viewsitelink">
                    {% trans "View on site" %}</a>
                </li>
            {% endif%}
        </ul>
    {% endif %}{% endif %}
{% endblock %} 
```

结果如下所示：

![在 Django 中从管理员重置密码](../Images/774dafd5f55fb2ea8a18cb5ced0c04ab.png)

如果您想要更详细的解释，我[在博客中对此](http://blog.omederos.com/posts/2012/05/15/reseting-users-passwords-from-the-admin-site/)进行了介绍。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-26T00:57:12.443

passreset 应用程序只是通过 urls.py 公开 django 视图，并调整登录模板以显示“忘记我的密码”链接。

内置的 django 密码重置视图和模板用于自我重置。我猜重置表单可能预先填充了不同用户的电子邮件地址（在查询字符串中），但您仍然需要进行调整，例如更改电子邮件模板 - “您收到这封电子邮件是因为您请求了密码为您的用户帐户重置”可能不是您想要的：

[https://code.djangoproject.com/browser/django/trunk/django/contrib/admin/templates/registration/password_reset_email.html](https://code.djangoproject.com/browser/django/trunk/django/contrib/admin/templates/registration/password_reset_email.html)

因此，如果您还想包含自重置，则应该在不同的 URL 上公开视图。将 django 视图挂钩到 urls.py 中，如下所示：

```
urlpatterns += patterns('django.contrib.auth.views', 
    url(r'^accounts/password/reset/$',
        'password_reset',
        name='password-reset'), 
    url(r'^accounts/password/reset/done/$',
        'password_reset_done',
        name='password-reset-done'), 
    url(r'^accounts/password/reset/confirm/(?P<uidb36>[-\w]+)/(?P<token>[-\w]+)/$',
        'password_reset_confirm',
        name='password-reset-confirm'), 
    url(r'^accounts/password/reset/complete/$',
        'views.password_reset_complete',
        name='password-reset-complete')
) 
```

以及您想要进行调整的地方，请传入您自己的电子邮件模板：

```
url(r'^/accounts/password/reset/$',
    'password_reset',
    {'email_template_name': 'my_templates/password_reset_email.html'}
    name='password-reset'), 
```

“password_reset”视图有更多可以调整的参数： [https](https://docs.djangoproject.com/en/dev/topics/auth/#module-django.contrib.auth.views) ://docs.djangoproject.com/en/dev/topics/auth/#module-django.contrib.auth.views（“post_reset_redirect”是另一个为您的目的）

要显示相应的链接，您可以更改用户管理员（小心，已注册 - 取消注册然后注册您自己的子类和附加链接字段）或 change_form 模板本身。

我不知道提供开箱即用的应用程序，所以我赞成这个问题:-)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T16:42:14.927

是的，有一个应用程序。在这里检查：

[https://github.com/bendavis78/django-passreset](https://github.com/bendavis78/django-passreset)

# python - Fabric：无法在 virtualenv 中获取环境变量

> ID：10292057
> 
> 赞同：3
> 
> 时间：2012-04-24T05:15:06.203
> 
> 标签：python, django, virtualenv, fabric

我有一个在虚拟环境中运行的 Django 项目。`export ENV=staging`文件中也有行`.bashrc`。在设置中，我尝试使用它来阅读它，`os.getenv('ENV')`但它返回无。

settings_staging.py

```
...
ENV = os.getenv('ENV')
... 
```

.bashrc

```
...
export ENV=staging
... 
```

错误

```
[dev.gipi] out:   File "/home/ubuntu/projects/deeyoon/settings/settings.py", line 61, in <module>
[dev.gipi] out:     raise Exception('Environment variable ENV is requried!')
[dev.gipi] out: Exception: Environment variable ENV is requried! 
```

什么可能导致问题或出了什么问题？

苏丹。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-06-24T16:11:19.023

还有一种情况是fabric 忽略了.bashrc。通常 .bashrc 包含以下行：

```
# If not running interactively, don't do anything
[ -z "$PS1" ] && return 
```

把它注释掉。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-24T05:18:08.100

常见的问题是 .bashrc 文件永远不会被执行。键入`env`并检查 ENV 变量是否存在。

# android - 如何将数据传输到 android 中扫描的蓝牙设备？

> ID：10292062
> 
> 赞同：0
> 
> 时间：2012-04-24T05:15:58.307
> 
> 标签：android, bluetooth, data-transfer

我是 Android 开发的新手。如何将数据传输到安卓中扫描的蓝牙设备？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T05:31:52.440

[这](http://developer.android.com/guide/topics/wireless/bluetooth.html#ManagingAConnection)应该可以帮助你做你想做的事。[这里](http://developer.android.com/reference/android/bluetooth/package-summary.html)给出了适用于/在蓝牙上的类列表。详细了解它们可能会帮助您定制您的需求。

希望这可以帮助。

# vb6 - 在 VB6 中读取行分隔的数据

> ID：10292065
> 
> 赞同：0
> 
> 时间：2012-04-24T05:16:05.453
> 
> 标签：vb6

所以我有许多文本文件，我正试图用 Visual Basic 阅读。它们都具有相同的格式：

```
[number of items in the file]
item 1
item 2
item 3
...etc. 
```

我要做的是在第一行声明一个整数大小的数组，然后将每一行读入数组的相应部分（因此第 1 项将是数组 [0]，第 2 项将是数组 [ 1]等。但是，我不确定从哪里开始。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T07:14:16.243

非常基本的东西（没有双关语）：

```
Dim F As Integer
Dim Count As Integer
Dim Items() As String
Dim I As Integer

F = FreeFile(0)
Open "data.txt" For Input As #F
Input #F, Count
ReDim Items(Count - 1)
For I = 0 To Count - 1
    Line Input #F, Items(I)
Next
Close #F 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T06:41:49.030

试试这个 VB6

```
Dim file_id As Integer
Dim strline as string
Dim array_item() as string

'Open file
file_id = FreeFile
Open "C:\list.txt" For Input AS #file_id 

Dim irow As Integer
irow = 0    

'Loop through the file
Do Until EOF(file_id)

    'read a line from a file
    Line Input #file_id, strline

    'Resize the array according to the line read from file
    Redim Preserve array_item(irow)

    'put the line into the array
    array_item(irow) = strline

    'move to the next row
    irow = irow + 1
Loop

Close #file_id 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T05:23:39.417

您正在寻找的 VB 函数是“拆分”：

[http://www.vb-helper.com/howto_csv_to_array.html](http://www.vb-helper.com/howto_csv_to_array.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-11T20:02:19.570

尝试这个：

```
Dim FullText As String, l() As String
'''Open file for reading using Scripting Runtime. But you can use your methods
Dim FSO As Object, TS As Object
Set FSO = createbject("Scripting.FileSystemObject")
Set TS = createbject("Scripting.TextStream")
Set TS = FSO.OpenTextFile(FilePath)
TS.ReadLine 'Skip your first line. It isn't needed now.
'''Reading the contents to FullText and splitting to the array.
FullText = TS.ReadAll
l = Split(FullText, vbNewLine) '''the main trick 
```

拆分会自动调整 l() 的大小并存储所有数据。
现在 l() 数组拥有你想要的一切。

# javascript - 来自同一函数的 AJAX 多次调用，一些回调不起作用

> ID：10292075
> 
> 赞同：1
> 
> 时间：2012-04-24T05:16:48.170
> 
> 标签：javascript, ajax, callback

我有多个下拉菜单，每个下拉菜单都调用以下函数（传递不同的参数）如果我更改一个下拉菜单并等待响应一切都很好。如果我在第一个响应之前更改第二个下拉列表，则似乎从未调用过第一个回调。（虽然数据库中的数据已更改）

```
<script type="text/javascript">
<!--
function fg_insert_pick(element, team_id, tournament_id, pick_number) {
    golfer_id = element.value;
    golfer_name = element.options[element.selectedIndex].text;;
    parent = element.parentNode;
    parent.removeChild(element);
    parent.innerHTML="submitting pick ...";
    path = "'.plugins_url('fantasy-golf/submit/pick.php').'";
    post = "team_id="+team_id+"&tournament_id="+tournament_id+"&pick_number="+pick_number+"&golfer_id="+golfer_id;
    parent.innerHTML="submitting pick ...";

    fg_ajax_request(path, post, function(response) {
        if (response) {
            parent.innerHTML=golfer_name;
        } else {
            parent.innerHTML="Something went wrong, please reload the page";
        }
    });
}

function fg_ajax_request(url, post, callback) {
    var xmlhttp = new XMLHttpRequest();
    xmlhttp.onreadystatechange= function () {
        if (xmlhttp.readyState==4 && xmlhttp.status==200) {
            callback(xmlhttp.responseText);
        }
    }
    xmlhttp.open("POST",url,true);
    xmlhttp.setRequestHeader("Content-type","application/x-www-form-urlencoded");
    xmlhttp.send(post);
}
//-->
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T05:59:34.027

对我来说，这看起来像是一个简单的变量范围问题。在您内部定义的变量`fg_insert_pick`是在全局级别上设置的，而不是在您的函数的上下文中。所以你可能看到的是这样的：

1.  `fg_insert_pick`叫做。`golfer_name`设置为元素的选定选项，并`parent`设置为给定元素的父节点。
2.  Ajax 请求已启动。
3.  同时，`fg_insert_pick`用不同的元素调用。`golfer_name`然后`parent`根据这个元素被覆盖。
4.  Ajax 请求从第一次调用中返回，并调用了回调`fg_insert_pick`。由于`golfer_name`and `parent`live outside `fg_insert_pick`，他们现在指的是第二个元素，而不是第一个。因此，第二个元素被更新。
5.  Ajax 请求从第二次调用返回。同样的事情再次发生。

**tl;dr**将`var`s 添加到 中设置的变量`fg_insert_pick`。

# c# - 用于 IO 操作的单个“锁”或单独的读取器/写入器锁？

> ID：10292079
> 
> 赞同：3
> 
> 时间：2012-04-24T05:17:21.047
> 
> 标签：c#, .net, multithreading, performance

我有几个线程在编写和读取不同的文件。

可以对所有磁盘操作使用单个锁{}（所有受保护区域的相同变量）吗？所以我没有两个线程同时读取和写入磁盘到关于搜索？

我还听说我也可以在线程上用于读取和另一个用于写入，这总是真的吗？为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T05:27:26.433

如果每个线程读取或写入不同的文件，我不明白为什么需要并发。

通常，有多个线程访问同一个文件（资源）进行读写。在这种情况下，当一个线程正在写入文件时，所有其他线程都必须等待。这是一个经典的并发问题，称为“Readers-Writers”。

您可以在此处找到更多信息： [http ://en.wikipedia.org/wiki/Readers-writers_problem](http://en.wikipedia.org/wiki/Readers-writers_problem)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T05:22:00.370

如果您没有从任何线程访问其他线程的代码，那么一个同步对象就足够了，但它会增加等待资源的线程队列。每个资源或资源组的一个同步对象将是更好的选择

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T05:43:16.333

只使用一把锁可能会减慢您的应用程序。如果一个线程长时间写入文件，也许应该允许其他线程读取一些其他文件。您能否更准确地了解哪些线程如何访问哪些文件？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-24T08:03:12.413

您的要求似乎有些混乱和变形。一条评论说“线程正在写入同一个文件”，另一条评论说“所有线程同时写入同一个文件集合”。

有一些选择：

1）用一把锁锁定读写。这是最简单的方法，但在调用线程之间发生争用的可能性最高，因为锁在磁盘操作期间被持有。

2) 每个文件使用一个读写器锁来锁定读取和写入 - 这比 (1) 更好，因为不同文件上的内容不会发生。对同一文件的读/写之间仍然可能存在争用。

2) 将读取/写入排队到一个写入器线程。这往往会更多地使用磁盘，因为它必须在出列并执行写请求时在文件之间交换，但最大限度地减少调用线程中的写争用 - 它们只需要在推送指针所需的时间内锁定队列。读取成为一项缓慢的操作，因为调用线程必须等待同步对象，直到它们的读取请求完成。写入争用低，但所有读取延迟高。

3) 与 (2) 类似，但每个文件使用一个线程。对于多个文件，这可能会在内存方面变得昂贵，并且只有在输出文件分布在多个物理磁盘上时才真正有助于 (2)。像 (2) 一样，低争用和慢读。

4) 将写入作为线程池任务排队。我不确定如何准确地做到这一点 - 文件上下文必须作为参数传递并且对它的访问可能需要锁定 - 这可能无法有效工作。像 (2) 一样，低争用和慢读。

5）重新设计您的应用程序以完全避免此要求？

# python - django logging - django.request 记录器和额外的上下文

> ID：10292082
> 
> 赞同：17
> 
> 时间：2012-04-24T05:17:33.170
> 
> 标签：python, django, logging, django-settings

我在 django 1.3，python 2.6

在此处的 django 文档中
[https://docs.djangoproject.com/en/1.3/topics/logging/#django-request](https://docs.djangoproject.com/en/1.3/topics/logging/#django-request)
它说消息具有以下额外上下文：状态和请求。
你如何让这些显示在调试文件中？我在我的日志配置中尝试了类似的东西：

```
'formatters': {        
        'simple_debug': {
            'format': '[%(asctime)s] %(levelname)s %(module)s %(message)s %(request.user)s',        
        }
    }, 
```

但这会导致整体日志记录失败（即没有日志记录输出发生）

* * *

**编辑：** 所以在提交问题后我立即遇到了这个： [http ://groups.google.com/group/django-users/browse_thread/thread/af682beb1e4af7f6/ace3338348e92a21](http://groups.google.com/group/django-users/browse_thread/thread/af682beb1e4af7f6/ace3338348e92a21)

有人可以帮助解释/详细说明

> 文档中的所有引用实际上意味着 django 内部使用 django.request 的所有地方，请求作为额外的一部分显式传递。

作为额外内容的一部分，请求在哪里显式传递？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-04-24T08:57:52.933

您不能`request.user`在格式字符串中使用，因为 %-formatting 无法处理。您可以使用格式字符串，例如

```
'[%(asctime)s] %(levelname)s %(module)s %(message)s %(user)s' 
```

并且，在您的日志记录调用中，使用类似

```
logger.debug('My message with %s', 'args', extra={'user': request.user}) 
```

`extra`dict 被合并到日志事件记录中，该记录以一个属性结尾，`user`然后通过格式字符串获取并出现在日志中。

如果使用`django.request`记录器，则 status_code 和请求将由`extra`Django 在字典中传递。如果您需要`request.user`，您可能需要添加一个`logging.Filter`which 执行以下操作：

```
class RequestUserFilter(logging.Filter):
    def filter(self, record):
        record.user = record.request.user
        return True 
```

这样您就可以在格式化的输出中显示用户。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-12-02T09:23:02.557

[django-requestlogging 中间件插件](https://pypi.python.org/pypi/django-requestlogging/)可以轻松记录与请求相关的信息，而无需调整所有日志调用以添加`request`参数`extra`。然后只需配置您的记录器即可。

使用 django-requestlogging 时可以记录以下项目：

*   用户名
*   http_user_agent
*   路径信息
*   远程添加
*   请求方法
*   服务器协议

# c# - 自定义 XML 序列化

> ID：10292084
> 
> 赞同：0
> 
> 时间：2012-04-24T05:17:49.573
> 
> 标签：c#, serialization

我需要序列化我的实体。我使用 LinqToSql 作为 ORM。我不想用属性标记所有字段和类。
是否有没有属性的 xml 序列化自定义库（至少不需要）并支持集合？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T05:20:47.170

我不确定库，但你总是可以做一个[正确的方法来实现 IXmlSerializable？](https://stackoverflow.com/questions/279534/proper-way-to-implement-ixmlserializable)这将允许您完全根据需要*手动创建 XML。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T05:20:39.113

开箱即用的 xml 序列化应该可以工作

[http://msdn.microsoft.com/en-us/library/system.xml.serialization.xmlserializer.aspx](http://msdn.microsoft.com/en-us/library/system.xml.serialization.xmlserializer.aspx)

# php - 限制 shell_exec 的执行时间

> ID：10292089
> 
> 赞同：5
> 
> 时间：2012-04-24T05:18:37.700
> 
> 标签：php, fatal-error, shell-exec

我有一个 exe 文件，其中包含以下代码：

**而（1）**

**printf("你好\n");**

我正在使用 shell_exec 通过 php 执行这个 exe

**$output = shell_exec('C:/Users/thekosmix/Desktop/hello.exe 2>&1');**

**回声$输出；**

现在脚本执行了很长时间，直到我从任务管理器中终止进程并给出致命错误：

**（致命错误：第 7 行 C:\xampp\htdocs\shell\index.php 中允许的内存大小为 134217728 字节已用尽（试图分配 133693440 字节）**

我希望脚本（或此函数）在给定的持续时间内运行并打印在该持续时间内生成的任何输出，而不是任何致命错误。set_time_limit() 也没有解决问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T05:54:49.057

您不能在 PHP 中执行此操作 -[`set_time_limit()`](http://php.net/manual/en/function.set-time-limit.php)仅在每个 PHP 语句执行后检查。在linux下你会使用`ulimit`，但看起来你正在使用Windows。

您需要修改`hello.exe`可执行文件以构建超时，或者编写一个从 PHP 调用的包装器，该包装器调用`hello.exe`并处理超时。在任何可以轻松分叉的语言中，这都是微不足道的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-06-26T17:38:58.537

总结一下：如果您使用 Linux 服务器，请执行以下操作：

```
shell_exec('ulimit -t 120 && ' . $path_to_program); 
```

这会在两分钟的 cpu 使用后终止，这比实时的 2 分钟多得多，具体取决于程序的资源需求。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T06:01:40.657

您可以这样更改脚本

```
while (shouldKeepRunning()) 
```

shouldKeepRunning 可以以最原始的形式检查某个文件是否存在以确定它是否应该继续运行。然后，您只需创建或删除一个文件即可正常关​​闭脚本。在 linux 上，您可以为此使用信号处理程序，但不能使用 windows。无论如何，你明白了。

如果没有大量代码修改，外部 while 循环不够精细，则可以使用刻度。[http://php.net/manual/en/control-structures.declare.php](http://php.net/manual/en/control-structures.declare.php)

# ssis - 将数据导出到不完整的右侧平面文件时，如何解决无法写入错误？

> ID：10292091
> 
> 赞同：0
> 
> 时间：2012-04-24T05:18:54.940
> 
> 标签：ssis

我有一个 SSIS 包，可将数据导出到格式为*Ragged Right*的文本文件。在运行包时，我收到错误**`Failed to write out column name for column "Column0."`**

以下是平面文件连接管理器详细信息：

```
General tab:
-----------
Format --> Ragged Right  
Header Row Delimiter --> {CR}-{LF} 

Columns tab:
-----------
Font --> Consolas 
```

我试图将延迟验证属性设置为 true，但包仍然失败。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T13:52:36.863

我发现了问题：我将 Header row Delimiter 更改为`{cr}-{LF}`.

在**Advanced Tab**里面，我做了一些小的改动，比如保持`inputColumnWidth`不变`outputcolumnwidth`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-13T21:03:16.267

当您在文件中有一个具有固定宽度和列标题的文本文件而列名和数据长度定义不一致时，就会发生这种情况，例如

![在此处输入图像描述](../Images/afa829a01c010818bc12e724d954ad0e.png)

修复是使数据长度适合列描述。

# jquery - jQuery中的动画在第一个周期显示错误的图像？

> ID：10292093
> 
> 赞同：1
> 
> 时间：2012-04-24T05:19:00.307
> 
> 标签：jquery

我一直在试验我在以下链接中找到的 jquery 脚本：

[http://css-tricks.com/snippets/jquery/simple-auto-playing-slideshow/](http://css-tricks.com/snippets/jquery/simple-auto-playing-slideshow/)

正在运行的示例确实有效，但如果我出于某种原因在自己的 VS 2010 项目中运行代码，第一个图像似乎会恢复到自身。

我的意思是：

这是 default.aspx 页面中的图像：

```
 <div id="slideshow">
       <div>
         <img src="Images/boating.gif" width="240px" height="240px">
       </div>
       <div>
        <img src="Images/Cat.gif" width="240px" height="240px">
       </div>
       <div>
        <img src="Images/catcute.jpg" width="240px" height="240px">
       </div>
       <div>
        <img src="Images/cutebird.jpg" width="240px" height="240px">
       </div>
    </div> 
```

这是我的 Default.js 文件中的代码：

```
 $(document).ready(function(){ 

$("#slideshow > div:gt(0)").hide(); 

setInterval(function() { 
  $('#slideshow > div:first') 
    .fadeOut(1000) 
    .next() 
    .fadeIn(1000) 
    .end() 
    .appendTo('#slideshow'); 
},  3000); 

}); 
```

这是样式表文件中的代码：

```
#slideshow {
    margin: 50px auto;
    position: relative;
    width: 240px;
    height: 240px;
    padding: 10px;

}

#slideshow > div {
    position: absolute;
    top: 10px;
    left: 10px;
    right: 10px;
    bottom: 10px;
} 
```

这是我的 default.aspx 页面中的 default.js 文件中的代码参考：

```
<asp:Content ID="HeaderContent" runat="server" ContentPlaceHolderID="HeadContent">
    <script src="Default.js" type="text/javascript"></script>
</asp:Content> 
```

提前谢谢你和亲切的问候_geoNeo

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T05:26:34.670

将您的代码包装在一个准备好的函数中：

```
 $(function() {

        $("#slideshow > div:gt(0)").hide();

        setInterval(function() {
          $('#slideshow > div:first')
            .fadeOut(1000)
            .next()
            .fadeIn(1000)
            .end()
            .appendTo('#slideshow');
        },  3000);

    }); 
```

[在http://jsfiddle.net/P3fEp/](http://jsfiddle.net/P3fEp/)工作 jsFiddle

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T05:24:45.150

将您的整个代码包装在

```
$(document).ready(function(){

$("#slideshow > div:gt(0)").hide();

setInterval(function() {
  $('#slideshow > div:first')
    .fadeOut(1000)
    .next()
    .fadeIn(1000)
    .end()
    .appendTo('#slideshow');
},  3000);

}); 
```

# android - Android语音识别测试连接？

> ID：10292096
> 
> 赞同：1
> 
> 时间：2012-04-24T05:19:25.340
> 
> 标签：android, connection, voice-recognition

在我开始收听之前，有没有办法测试设备与语音识别服务器的连接？它像测试互联网连接一样简单吗？像这样：

```
public boolean isOnline() 
{
   ConnectivityManager cm =(ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);
    if(cm == null || cm.getActiveNetworkInfo() == null || !cm.getActiveNetworkInfo().isConnected())
    return false;

   return true;
} 
```

或者您是否必须测试互联网连接，特别是与语音服务器的连接？

# java - 重新加载修改的类时如何让码头阻止请求？

> ID：10292097
> 
> 赞同：6
> 
> 时间：2012-04-24T05:19:35.187
> 
> 标签：java, web, jetty, hotswap, dcevm

我正在使用[dcevm](http://ssw.jku.at/dcevm/) + [run-jetty-run](http://code.google.com/p/run-jetty-run/) + [livereload](http://livereload.com)，尝试在修改 java 源代码时开发 Web 应用程序而不重新启动 jetty。

一切正常。当我修改一个java类时，livereload监听到了变化，并触发浏览器刷新打开的页面来查看修改结果。

但我发现它仍然不那么方便：当浏览器重新加载时，dcevm 和 jetty 可能还没有重新加载修改后的类。我不得不再次手动刷新页面，但我不确定这次是否显示修改后的结果，没有仔细检查内容。

所以我想知道当我修改一些类并且 dcevm 正在重新加载时，有什么方法可以让码头阻止请求。它将确保始终修改显示的页面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-26T08:46:11.093

对于您的口味来说，这可能太 hacky，但是您可以在 Java 源代码中插入一个静态初始化片段，以便在重新加载后更新一个已知的单独文件。比 livereload 可以观察那个单独的文件，而不是让它直接在`.java`源上工作。

类似于以下内容：

```
public class ReloadUtils {
  public static void notifyUpdate(String className) {
    String baseDir = System.getProperty("DEV_MODE_BASEDIR") + "/";
    File file = new File(baseDir + className + ".updated");
    FileWriter fw = new FileWriter(file.getAbsoluteFile(), false); // overwrite instead of append
    BufferedWriter bw = new BufferedWriter(fw);
    bw.write(Long.toString(System.currentTimeMillis()));
    bw.close();
  }
}

public class Reloadable {

  private final static boolean DEV_MODE = System.getProperty("DEV_MODE").equals("true");

  static {
    // static finals trigger most compilers to remove the statements in this case
    if (DEV_MODE) { 
      ReloadUtils.notifyUpdate(Reloadable.class.getName());
    }
  }

  /* lots of useful stuff */
} 
```

# android - Android：onCreate被重复调用

> ID：10292098
> 
> 赞同：0
> 
> 时间：2012-04-24T05:19:40.487
> 
> 标签：android

我有一个活动，我需要实现一个基本的 mm::ss 计时器。下面是我为它编写的代码。但是问题是，当我在模拟器中按下后退按钮并再次单击应用程序时，值变化得更快。看起来 onCreate 又被调用了。我该如何纠正这个问题？我曾尝试创建一个布尔变量，并在第一次调用任务时将其设置为 true。我仅在值为 false 时调用 startPeriodidUpdates()。但是 onCreate 再次使用 false 值创建变量。

```
 public class GraphicsActivity extends Activity {
static int seconds = 0;
static int minutes = 0;
public static String time_elapsed;
public static boolean clearView = true;
Handler myhandler = new Handler();
public static String min,sec;  
public static boolean running = true;

   @Override
    public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
     startPeriodicUpdates();

    } 
    public void onResume(){
    super.onResume();
    } 
    public void onPause() {
    super.onPause();    
    }
   public void onStop(){
   super.onStop();
    }

   public void startPeriodicUpdates()
   {
periodicCall();
   }
   public void stopPeriodicUpdates(){ 
     myhandler.removeCallbacksAndMessages(myhandler);
   }

   public  void periodicCall()
    {

seconds++;
if(seconds ==60)
{
    seconds=0;
    minutes++;
    if(minutes==60)
    {
        seconds=0;
        minutes=0;
    }
}
// left-padding zeros to the minutes and seconds values
min = String.format("%02d",minutes);
sec = String.format("%02d",seconds);
time_elapsed =  min + ":" + sec;
time_elapsed =  min + ":" + sec + "";
myhandler.postDelayed(new Runnable(){
    public void run(){
        periodicCall();

    }
},1000); 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T06:46:05.787

我认为如果您使用服务来实现您的计时器会更好。即使您按下返回按钮，服务也会继续运行。

[在这里](https://stackoverflow.com/questions/8118855/android-chronometer-own-implementation)你可以看到我不久前提出的一个问题。您可以使用服务查看自定义计时器的实现。

您想要接收 Chronometer 值的活动只需要一个 BroadcastReceiver ，例如：

```
 private BroadcastReceiver broadcastReceiver = new BroadcastReceiver() {
    @Override
    public void onReceive(Context context, Intent intent) {
        mMilis = intent.getLongExtra("milis",0);
        String time = intent.getStringExtra("tiempo");
        // Do Something with the time
    }
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T05:24:25.530

也许这会有所帮助：执行 peridic 任务的正确方法是在 in 中注册处理程序`OnResume`并在 in 中取消注册`OnPause`。（您可以在其他地方取消注册，但 OnPause 很重要）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T06:09:08.067

You can use shared preference to use this method only once .

//pass true first time

```
 protected void storeSharedPrefs(Boolean value) {
        /*
         * Storing in Shared Preferences
         */
        editor.putString("first", value);
        editor.commit();  //Commiting changes
    } 
```

Check each on time application is loaded, whether its the first time and configuration details has been entered correctly by checking SharedPreferences

```
private boolean first_time_check() {
        /* 
         * Checking Shared Preferences if the user had pressed 
         * */
        Boolean  first = uPreferences.getString("first", false);

            return first;
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-24T05:25:29.083

这可能不是上述问题的解决方案，但如果您只想更新视图并从给定时间计数，也许看看[Chronometer](http://developer.android.com/reference/android/widget/Chronometer.html)。如果您想倒计时并更新视图，您可以使用[CountDownTimer](http://developer.android.com/reference/android/os/CountDownTimer.html)

# java - 运行spring mvc项目时出现一些错误

> ID：10292103
> 
> 赞同：5
> 
> 时间：2012-04-24T05:20:09.137
> 
> 标签：java, spring, spring-mvc, build

Springsource 工具套件是我正在使用的工具。

这些是错误..

```
>     Description   Resource    Path    Location    Type
>     Error occured processing XML 'Unable to load schema mappings from location [META-INF/spring.schemas]'. See Error Log for more
> details   root-context.xml    /masterdataqa/src/main/webapp/WEB-INF/spring    Unknown Spring
> Beans Problem 
```

和

> 描述资源路径位置类型错误处理 XML '无法从位置 [META-INF/spring.schemas] 加载模式映射'。有关详细信息，请参阅错误日志 servlet-context.xml /masterdataqa/src/main/webapp/WEB-INF/spring/appServlet Unknown Spring Beans 问题
> 
> \Program Files\PHP;C:\Program Files\QuickTime\QTSystem\;C:\Program Files\Heroku\bin;C:\Program Files\ruby-1.9.3\bin;C:\Program Files\git\bin ;C:\Program Files\git\cmd;D:\apache-maven-3.0.4\bin;;. 2012 年 4 月 24 日上午 10:44:32 org.apache.tomcat.util.digester.SetPropertiesRule 开始警告：[SetPropertiesRule]{Server/Service/Engine/Host/Context} 将属性“源”设置为“org.eclipse.jst” .jee.server:masterdataqa' 没有找到匹配的属性。2012 年 4 月 24 日上午 10:44:34 org.apache.coyote.AbstractProtocol 初始化信息：初始化 ProtocolHandler [“http-bio-8080”] 2012 年 4 月 24 日上午 10:44:34 org.apache.coyote.AbstractProtocol 初始化信息：初始化 ProtocolHandler [“ajp-bio-8009”] 2012 年 4 月 24 日上午 10:44:34 org.apache.catalina.startup.Catalina 加载信息：初始化处理时间为 4747 毫秒 2012 年 4 月 24 日上午 10:44:34 org.apache.catalina.core.StandardService startInternal 信息：启动服务 Catalina 2012 年 4 月 24 日上午 10:44:34 org.apache.catalina.core.StandardEngine startInternal信息：启动 Servlet 引擎：Apache Tomcat/7.0.25 2012 年 4 月 24 日上午 10:44:35 org.apache.catalina.util.SessionIdGenerator createSecureRandom 信息：使用 [SHA1PRNG] 创建用于会话 ID 生成的 SecureRandom 实例需要 [140]毫秒。2012 年 4 月 24 日上午 10:44:36 org.apache.catalina.loader.WebappClassLoader validateJarFile 信息：validateJarFile(C:\Documents and Settings\srinivasa\Documents\workspace-sts-2.9.0.RELEASE.metadata.plugins\org .eclipse.wst.server.core\tmp0\wtpwebapps\masterdataqa\WEB-INF\lib\servlet-api.jar) - jar 未加载。请参阅 Servlet 规范 2.3，第 9.7.2 节。违规类：javax/servlet/Servlet.class 2012 年 4 月 24 日上午 10:44:36 org.apache.catalina.startup.TaglibUriRule 正文信息：TLD 已跳过。网址： [http://www.springframework.org/tags/form](http://www.springframework.org/tags/form)已经定义 2012 年 4 月 24 日上午 10:44:36 org.apache.catalina.startup.TaglibUriRule 正文信息：TLD 已跳过。URI：[http](http://www.springframework.org/tags) ://www.springframework.org/tags已定义 2012 年 4 月 24 日上午 10:44:36 org.apache.catalina.startup.TaglibUriRule 正文信息：TLD 已跳过。URI： [http](http://www.springframework.org/tags/form) ://www.springframework.org/tags/form已定义 2012 年 4 月 24 日上午 10:44:36 org.apache.catalina.startup.TaglibUriRule 正文信息：TLD 已跳过。网址：[http ://www.springframework.org/tags](http://www.springframework.org/tags)已经定义 2012 年 4 月 24 日上午 10:44:37 org.apache.catalina.core.ApplicationContext 日志信息：初始化 Spring 根 WebApplicationContext 信息：org.springframework.web.context.ContextLoader - 根 WebApplicationContext：初始化开始信息：org. springframework.web.context.support.XmlWebApplicationContext - 刷新根 WebApplicationContext：启动日期 [Tue Apr 24 10:44:37 IST 2012]；上下文层次结构根信息：org.springframework.beans.factory.xml.XmlBeanDefinitionReader - 从 ServletContext 资源加载 XML bean 定义 [/WEB-INF/spring/root-context.xml] 错误：org.springframework.web.context.ContextLoader - 上下文初始化失败 org.springframework.beans.factory.BeanDefinitionStoreException：从 ServletContext 资源 [/WEB-INF/spring/root-context.xml] 解析 XML 文档时出现意外异常；嵌套异常是 java.lang.IllegalStateException: Unable to load schema mappings from location [META-INF/spring.schemas] at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions(XmlBeanDefinitionReader.java:412) at org.springframework .beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:334) 在 org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:302) 在 org.springframework.beans.factory.support.AbstractBeanDefinitionReader .loadBeanDefinitions(AbstractBeanDefinitionReader.java:143) 在 org.springframework.beans.factory.support.AbstractBeanDefinitionReader。StandardContext listenerStart SEVERE：将上下文初始化事件发送到类 org.springframework.web.context.ContextLoaderListener org.springframework.beans.factory.BeanDefinitionStoreException 类的侦听器实例的异常：从 ServletContext 资源 [/WEB-INF/spring/root 解析 XML 文档时出现意外异常-context.xml]；嵌套异常是 java.lang.IllegalStateException: Unable to load schema mappings from location [META-INF/spring.schemas] at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions(XmlBeanDefinitionReader.java:412) at org.springframework .beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:334) 在 org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java: . 23 更多原因：java.util.zip.ZipException：在 java.util.zip.ZipFile.read(Native Method) 在 java.util.zip.ZipFile.access$1200(ZipFile.java: 31) 在 java.util.zip.ZipFile$1.fill(ZipFile.java:242) 在 java.util.zip.InflaterInputStream.read(ZipFile.java:459) 在 java.util.zip.ZipFile$ZipFileInputStream.read(ZipFile.java:459) InflaterInputStream.java:141) 在 java.io.FilterInputStream.read(FilterInputStream.java:116) 在 java.io.FilterInputStream.read(FilterInputStream.java:90) 在 java.util.Properties$LineReader.readLine(Properties.java :418) 在 java.util.Properties.load0(Properties.java:337) 在 java.util.Properties.load(Properties.java:325) 在 org.springframework.core.io.support.PropertiesLoaderUtils.loadAllProperties(PropertiesLoaderUtils. java:111) 在 org.springframework.beans。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-29T17:02:29.420

这意味着项目类路径中的 jar 文件已损坏。只需删除 jar 文件并重新下载即可。

如果您使用的是 Maven：

```
#delete repository
rm -rf ~/.m2/repository/*

#use maven
mvn test 
```

这将首先删除**~/.m2/repository/**中的所有文件，然后`mvn test`在构建项目和运行 junit 测试之前下载所有依赖的 jar 文件。

在此处阅读更多内容：[Maven:: 无效 CEN（错误签名） 无效 LOC（错误签名）](https://deepumohan.com/tech/maven-invalid-cen-bad-signature-invalid-loc/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T20:46:16.017

我有同样的问题。我修复了它在 STS 中更改我的 settings.xml 的 maven 路径，它位于 .m2（在我的用户目录中）并将其更改为 maven 安装目录/conf/settings.xml

.m2 目录与 Netbeans 和其他版本的 STS 共享，当我使用最新版本的 STS 创建我的第一个 Spring MVC 项目时，它因此不起作用。我想 Netbeans 和旧版本的 STS 对此文件夹进行了某种配置，或者安装了一些不适用于新版本 STS-Spring MVC 项目模板的软件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-29T12:58:23.760

查看eclipse中的错误日志，删除损坏的jar文件夹，让maven重新安装。这应该可以解决问题。

# c# - windows窗体线程到底发生了什么？

> ID：10292108
> 
> 赞同：2
> 
> 时间：2012-04-24T05:20:43.920
> 
> 标签：c#, .net, winforms, multithreading, thread-safety

在异步 OnMsgRecieved 调用中，如果我将值直接分配给控件，则它不起作用。然后我才知道这是由于线程不安全，我得到了以下代码来解决这个问题。现在它正在工作。但我不确定它实际上做了什么。任何人都可以让我完全理解它吗？代码是： -

```
 public void listener_OnMsgRecieved(string aResponse)
    {
        ShowResponseMessage(aResponse);
    }

    public void ShowResponseMessage(string aResponse)
    {
        // InvokeRequired required compares the thread ID of the
        // calling thread to the thread ID of the creating thread.
        // If these threads are different, it returns true.
        if (this.listBox.InvokeRequired)
        {
            SetTextCallback d = new SetTextCallback(ShowResponseMessage);
            this.Invoke(d, new object[] { aResponse });
        }
        else
        {
            this.listBox.Items.Add(aResponse);
            label.Text = "Response received from Server :";
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T05:26:21.987

当在与 UI 不同的线程上调用 ShowResponseMessage 时，`InvokeRequired`将返回`true`，然后您正在使用`Control.Invoke`将消息发送到 Windows 消息队列。

在 UI 线程中运行的 UI 消息泵将拉取消息并将其传递给目标控件，然后目标控件会看到这是一条请求调用委托的消息，并且委托由控件调用，现在是在 UI 线程上运行，因此跨线程问题已得到解决。

诀窍是委托不是直接在非 UI 调用线程上调用的。使用 Windows 消息将执行委托的指令传递给 UI 线程，然后 UI 线程执行委托以响应消息。'Control.Invoke' 使用 Windows `[SendMessage][1]`，`Control.BeginInvoke`使用`[PostMessage][2]`Win32 API 来促进消息传递。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T05:25:47.590

UI 控件不能从创建它的主线程/线程以外的任何线程更新/更改。

在您的情况下，检查 InvokeRequired 会检查希望更改控件的线程是否是创建线程，如果不是，则将调用传递回主线程/创建者。

查看[如何：对 Windows 窗体控件进行线程安全调用](http://msdn.microsoft.com/en-us/library/ms171728%28v=vs.100%29.aspx)

> 如果使用多线程来提高 Windows 窗体应用程序的性能，则必须确保以线程安全的方式调用控件。
> 
> 对 Windows 窗体控件的访问本质上不是线程安全的。如果您有两个或更多线程操作控件的状态，则可能会强制控件进入不一致的状态。其他与线程相关的错误是可能的，例如竞争条件和死锁。确保以线程安全的方式执行对控件的访问非常重要。
> 
> **在不使用 Invoke 方法的情况下从创建控件的线程以外的线程调用控件是不安全的。**

# node.js - 使用 node.js 安装 mongodb：无法读取未定义的属性“arbiterOnly”

> ID：10292109
> 
> 赞同：1
> 
> 时间：2012-04-24T05:20:45.777
> 
> 标签：node.js, mongodb, installation

我尝试在新创建的 Ubuntu 11.04 系统（64 位）上远程安装 node.js + now.js + mongoDB。

我创建了一个这样的结构：

*   /home/xxx/server.js
*   /home/xxx/节点/
*   /home/xxx/node_modules/现在/
*   /home/xxx/http/index.html

node.js 和 now.js 没问题，它工作得很好，但我很难安装和设置 mongoDB。

我去了我机器的根目录并以这种方式安装了 Mongodb：

```
cd
sudo apt-get install mongodb 
```

我不知道我是否应该，但我创建了一个这样的 data/db 文件夹：

```
cd
mkdir /data/db
chown `id -u` /data/db 
```

完成后，我在适当的文件夹中安装了 node 的 mongodb 驱动程序：

```
cd /home/xxx/
npm install mongodb 
```

然后我启动了节点服务器。我的静态页面按原样显示，但这是大约 10 秒后我在 ssh 终端上得到的结果：

```
[TypeError: Cannot read property 'arbiterOnly' of undefined]
TypeError: Cannot read property 'arbiterOnly' of undefined
    at /home/xxx/node_modules/mongodb/lib/mongodb/connection/server.js:558:22
    at [object Object].checkoutReader     (/home/xxx/node_modules/mongodb/lib/mongodb/connection/server.js:575:16)
    at /home/xxx/node_modules/mongodb/lib/mongodb/db.js:1344:79
    at Db._executeQueryCommand (/home/xxx/node_modules/mongodb/lib/mongodb/db.js:1555:5)
    at Cursor.nextObject (/home/xxx/node_modules/mongodb/lib/mongodb/cursor.js:455:13)
    at Array.0 (/home/xxx/node_modules/mongodb/lib/mongodb/cursor.js:162:12)
    at EventEmitter._tickCallback (node.js:192:40)
Tue Apr 24 2012 07:12:45 GMT+0200 (CEST) [GET] http://www.verysurf.com/proxyheader.php
error loading file httphttp://www.verysurf.com/proxyheader.php:  { [Error: ENOENT, No such     file or directory 'httphttp://www.verysurf.com/proxyheader.php']
  errno: 33,
  code: 'ENOENT',
  path: 'httphttp://www.verysurf.com/proxyheader.php' } 
```

这个“arbiterOnly”错误消息是关于什么的？我做错了什么？我用谷歌搜索了这个东西，但没有太多可以找到的东西。

而错误消息末尾的“www.verysurf.com”网址并不总是相同的。5分钟前我得到了这个（我没有改变任何东西，只是重新启动了节点服务器）：

```
error loading file httphttp://59.53.91.9/proxy/judge.php:  { [Error: ENOENT, No such file     or directory 'httphttp://59.53.91.9/proxy/judge.php']
  errno: 33,
  code: 'ENOENT',
  path: 'httphttp://59.53.91.9/proxy/judge.php' } 
```

我真的不知道这些网址是关于什么的。

请问有什么帮助吗？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T14:51:01.657

我不知道为什么它会触发特定的错误消息，但在我看来，有人正在或有人正在嗅探您的网络服务器，以查看它是否是开放代理（它不是）。一些 HTTP 服务器，尤其是 Apache，很容易被错误配置为将任何请求代理给第三方：

[http://en.wikipedia.org/wiki/Open_proxy](http://en.wikipedia.org/wiki/Open_proxy)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T09:21:37.387

在连接完全初始化之前尝试请求数据库时，我收到了相同的消息（[TypeError: Cannot read property 'arbiterOnly' of undefined]）。

确保 db.open() 已完成（成功）

# jquery - jquery在正斜杠之前和之后添加一个空格？

> ID：10292123
> 
> 赞同：1
> 
> 时间：2012-04-24T05:21:53.003
> 
> 标签：jquery

是否可以使用 jquery 在字符串中查找正斜杠“/”，然后在其两侧添加一个空格？我正在提取内容并且无权更改此特定内容，但我希望 / 前后有空格。

任何帮助，将不胜感激 ：）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-24T05:38:24.697

使用替换功能。示例在这里[http://jsfiddle.net/xgTxK/3/](http://jsfiddle.net/xgTxK/3/)

```
var str = 'hsab bvnbv/fnmn';
str = str.replace(/\//g," / "); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T05:29:37.790

应该可以使用.replace：

```
var myString = "hey/there";
var newString = myString.replace(/\//, " / "); 
```

这是一个要演示的[jsfiddle](http://jsfiddle.net/Pe37q/) - 不确定这是否是您要找的。

# ios - CCLabelTTF 在 CCSequence 后消失

> ID：10292128
> 
> 赞同：1
> 
> 时间：2012-04-24T05:22:15.843
> 
> 标签：ios, cocos2d-iphone, label, sequence

我需要你的建议。在我的 GameScene 中，我有一个点标签**curlentPointsLabel**。要更新我有一个功能，但是在性能**updateCurentPoints** (CCSequence) 之后点标签消失了！为什么？

在初始化

```
_curentPointsLabel = [CCLabelTTF labelWithString:@"" dimensions:CGSizeMake(screenSize.width*0.17f, screenSize.height*0.1f) alignment:UITextAlignmentLeft fontName:@"Trebuchet MS" fontSize:15];
_curentPointsLabel.anchorPoint = CGPointMake(1, 1);
_curentPointsLabel.position =  ccp( screenSize.width-screenSize.height/20, screenSize.height-2*screenSize.height/20);
_curentPointsLabel.color = ccc3(0,0,0);
[self addChild:_curentPointsLabel]; 
```

当我想要更新点标签时

```
- (void)updateCurentPoints:(int)points {

    if(_curentPoints+points<0)
        _curentPoints=0;
    else
        _curentPoints=_curentPoints+points;

   // [_curentPointsLabel setString:[NSString stringWithFormat:@"Score: %d",_curentPoints]];

    NSString * valueString=[[[NSString alloc] initWithString:[NSString stringWithFormat:@"Score: %d",_curentPoints]] retain];

    id sequence=[CCSequence actions:
                [CCCallFuncND actionWithTarget: self selector: @selector(setLabelColor:withIndex:) data:(void*)1],
                [CCCallFuncND actionWithTarget: self selector: @selector(setLabelValue:withValue:) data:(NSString*)valueString],
                [CCBlink actionWithDuration:0.5f blinks:2], 
                [CCCallFuncND actionWithTarget: self selector: @selector(setLabelColor:withIndex:) data:(void*)3],

                 nil];

    [_curentPointsLabel runAction:sequence];

    [valueString release];
}

//*******************************************************************
-(void) setLabelValue:(id) sender withValue:(NSString*) value
{   
    CCLabelTTF *label=(CCLabelTTF *)sender;
    NSString * valueString=[[[NSString alloc] initWithString:[NSString stringWithFormat:@"%@",value]] retain];
    [label setString:[NSString stringWithFormat:@"%@",valueString]];
    [valueString release];
}
//*******************************************************************
-(void) setLabelColor:(id) sender withIndex:(int)index
{   
    CCLabelTTF *label=(CCLabelTTF *)sender;

    if(index==0)
        label.color = ccc3(255,255,255);//white
    else if(index==1)
        label.color = ccc3(0,255,0);//green
    else if(index==2)
        label.color = ccc3(255,0,0);//red
    else if(index==3)
        label.color = ccc3(0,0,0);//black
    NSLog(@"color:%i",index);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T18:23:32.167

添加 [CCShow action] 以确保精灵可见。试试这个：

```
id sequence=[CCSequence actions:
             [CCCallFuncND actionWithTarget: self selector: @selector(setLabelColor:withIndex:) data:(void*)1],
             [CCCallFuncND actionWithTarget: self selector: @selector(setLabelValue:withValue:) data:(NSString*)valueString],
             [CCBlink actionWithDuration:0.5f blinks:2], 
             [CCShow action],
             [CCCallFuncND actionWithTarget: self selector: @selector(setLabelColor:withIndex:) data:(void*)3],
             nil]; 
```

还可以通过将闪烁次数从 2 更改为 3（或除 1 之外的其他奇数）进行测试。任何一种解决方案都应该有效。

# jquery - JQuery-UI：如何使用 Accordion + Sortable 构建库存？限制可排序和移除滚动

> ID：10292129
> 
> 赞同：1
> 
> 时间：2012-04-24T05:22:22.080
> 
> 标签：jquery, jquery-ui, accordion, jquery-ui-sortable, inventory

我正在尝试通过 JQuery UI 使用 Accordion 和 Sortable 构建库存。

* * *

**目标/特点：** - 这是我想做的事情：

1.  **限制可排序**- 一个手风琴的项目不能放回另一个分组中（尽管我可能允许 X 从底部的列表中删除它）
2.  **删除水平滚动**- 现在，当我在自己的代码中执行此操作时（尽管不是在下面的 jsfiddle 版本中）并且我将某些东西拖到一边，它有时会导致手风琴 div 无休止地水平滚动。我尝试使用 overflow-x: hidden; 限制横向滚动。但这也没有用。当我在我的服务器文件中使用 jqueryui.com/demos/demos.css 时会发生这种情况，我似乎无法在 jsfiddle 中工作，所以如果这不是任何人都可以看到在那里工作的东西，我深表歉意。但是，如果您尝试将其中一个拖到最右侧，您可以在此处查看错误（某种程度）：jqueryui.com/demos/sortable/#connect-lists。

**当前版本（jsfiddle）：** - 这是我当前的版本：http: [//jsfiddle.net/theredknight/XZkaF/3/](http://jsfiddle.net/theredknight/XZkaF/3/)

* * *

**源文件/链接：** 来自这里的原始概念：jqueryui.com/demos/sortable/connect-lists.html

我试过以下没有效果：

*   [jQuery UI：将可排序从手风琴内部拖到外部](https://stackoverflow.com/questions/4320285/jquery-ui-drag-sortable-from-within-accordion-to-outside)
*   [jquery sortable不能被拖到手风琴外面](https://stackoverflow.com/questions/2040359/jquery-sortable-cannot-be-dragged-outside-of-accordion)
*   [jQuery-Ui：无法将对象拖到手风琴之外](https://stackoverflow.com/questions/1827504/jquery-ui-cannot-drag-object-outside-of-an-accordion)

* * *

**类似的工作版本：** 这是某人写的一个类似的版本，但他/她似乎修改了 jquery ui 库，我无法让它看起来像我希望的那样好：

[手风琴加可排序](http://www.telecable.es/personales/covam1/deployToNenyures/SourceCode/jQuery/accordion/accordion.htm)

非常感谢你！~trk

# makefile - 在 Makefile if 语句中获取退出代码 1

> ID：10292132
> 
> 赞同：3
> 
> 时间：2012-04-24T05:22:57.413
> 
> 标签：makefile, exit-code

如果语句不正确，我正在尝试获取 ifdef 语句上的退出代码，但我尝试使用 exit 1 和 $(call exit 1)

在以下代码中使用第一个时，我得到“Makefile：11：***缺少分隔符。停止。”

...

```
ifdef PACKAGE
    PACKAGEDIR = $(HOME)/$(PACKAGE)
else
    exit 1
endif 
```

...

通过使用`$(call exit 1)`我没有错误，但makefile仍然继续执行。我想要完成的是使用错误代码 1 在 else 上退出 Makefile

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-24T14:09:18.827

正如 geekosaur 所说，您不能像`exit 1`makefile 操作那样放置 shell 命令。Makefile 不是 shell 脚本，尽管它们可以*包含*shell 脚本。Shell 命令只能出现在目标配方中，不能出现在其他任何地方。

如果您有足够新的 GNU make 版本，您可以使用该`$(error ...)`功能，如下所示：

```
ifdef PACKAGE
    PACKAGEDIR = $(HOME)/$(PACKAGE)
else
    $(error You must define the PACKAGE variable)
endif 
```

另请注意，`ifdef`如果定义了变量，*即使*它被定义为空字符串也是如此。您可能更喜欢：

```
ifneq ($(PACKAGE),)
    PACKAGEDIR = $(HOME)/$(PACKAGE)
else
    $(error You must define the PACKAGE variable)
endif 
```

确保变量设置为非空值。

而且，您的 GNU make 版本可能太旧而无法支持该`$(error ...)`功能，尽管它已经存在了很长时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T05:28:26.137

您不能简单地将裸代码粘贴在 Makefile 中的某个位置；代码（例如`exit 1`）总是与某种构建规则相关联。

在这种情况下，您需要该[`$(error)`功能](http://www.gnu.org/savannah-checkouts/gnu/make/manual/html_node/Make-Control-Functions.html#Make-Control-Functions)。但是，将其放入 中可能还不够，原因与它本身在那里不起作用`else`的原因相同；`exit 1`您可能需要将整件事改写为

```
PACKAGEDIR := $(if $(flavor PACKAGE),undefined,$(error PACKAGE must be defined!),$(HOME)/$(PACKAGE)) 
```

# php - 如何获取使用 GET 设置的值？

> ID：10292134
> 
> 赞同：1
> 
> 时间：2012-04-24T05:23:23.653
> 
> 标签：php, get

我正在使用 GET 来获取信息（当然是不敏感的）并在这样的 URL 中：`http://www.sample.com/foo.php?KEY=VALUE`如果我想从中获取文本“KEY”，有可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T05:26:58.320

试试这个

```
foreach($_GET as $key => $value) {
echo $key; // will print 'KEY'
echo $value; // will print 'VALUE'
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T05:29:08.410

### 在数组中搜索值，返回键

您可以使用[`array_search`](http://www.php.net/manual/en/function.array-search.php)，其功能类似于使用`array_keys`第二个参数：

```
$array = array( "Name" => "Jonathan" );
$key = array_search( "Jonathan", $array );

echo $key; // Name 
```

请注意，以这种方式搜索字符串时，您的搜索将*区分大小写*，因此请确保您的大小写正确。这将返回找到的与您的搜索值相对应的第一个键。如果找到许多键，则只返回第一个。

### 检索数组中的数组键

如果你想要所有的密钥，你可以使用[`array_keys`](http://php.net/manual/en/function.array-keys.php). 这将返回一个键数组。从这里，你可以找到你想要的，然后用它从`$_GET`.

```
$array = array( "Name" => "Jonathan", "Site" => "StackOverflow" );
$aKeys = array_keys( $array );

print_r( $aKeys ); 
```

这导致以下数组：

```
大批
(
    [0] => 名称
    [1] => 网站
)
```

### 检索键数组以进行搜索

您也可以为此函数提供可选的第二个值，这是您想要获取相应键的值。在上面的数组中（同样适用`$_GET`），我可以通过搜索“Jonathan”来获取用于“Jonathan”的键：

```
$array = array( "Name" => "Jonathan", "Site" => "StackOverflow" );
$aKeys = array_keys( $array, "Jonathan" );

print_r( $aKeys ); 
```

这将产生以下数组：

```
大批
(
    [0] => 名称
)
```

# c# - 如何在整个文件中使用循环从文件中提取字符串文本？

> ID：10292135
> 
> 赞同：0
> 
> 时间：2012-04-24T05:23:30.067
> 
> 标签：c#

例如我有这个：

> “是吗？Wo war ich？Ach ja.<pa>">

我需要创建一个仅包含以下内容的新文本文件：

> 曾是？我战争吗？啊啊啊啊

我有一个像 43mb 这样的大文件，我需要扫描整个文件，只获取以开头`"`和结尾的地方，`<pa>"`并获取这个标签之间的字符串。

到目前为止我做了这个代码：

```
private void retrivingTestText()
        {
            w = new StreamWriter(retrivedTextFile);
            string startTag = "\"";
            string endTag = "&lt;pa&gt;";
            int startTagWidth = startTag.Length;
            int endTagWidth = endTag.Length;
            string text = "\"Was? Wo war ich? Ach ja.&lt;pa&gt;\">";

            int begin = text.IndexOf(startTag);
            int end = text.IndexOf(endTag, begin + 1);

            string result = text.Substring(begin+1, end-1);
            w.WriteLine(result);
            w.Close();

        } 
```

但现在我需要在一个大文件 43mb xml 文件上制作它。所以在构造函数中我已经做了 StreamReader r; 和字符串 f; 然后我做了：

```
r = new StreamReader(@"D:\New folder (22)\000004aa.xml")
f = r.ReadToEnd(); 
```

现在我需要将它与上面的代码一起使用来提取大文件中 startTag 和 endTag 之间的所有字符串，而不仅仅是特定的文本。

第二件事我需要创建另一个函数，所以在我进行更改后它会知道将所有提取的文本字符串添加回它之前在 startTag 和 endTag 之间的正确位置

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T05:44:55.267

有一篇关于如何使用正则表达式删除 HTML 标记的类似帖子。这是[链接](https://stackoverflow.com/questions/787932/using-c-sharp-regular-expressions-to-remove-html-tags)。

还有一个你可以调整的，[在这里。](https://stackoverflow.com/questions/29869/regex-to-match-all-html-tags-except-p-and-p)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T14:15:02.623

您可以采用以下方法来提取数据。

```
string word = "\"Was? Wo war ich? Ach ja<pa>\"Jain\"Romil<pa>\"";
string[] stringSeparators = new string[] { "<pa>\"" };
string ans=String.Empty;
string[] text = word.Split(stringSeparators, StringSplitOptions.None);

foreach (string s in text)
{
    if (s.IndexOf("\"") >= 0)
    {
        ans += s.Substring(s.IndexOf("\"")+1);
    }
}
return ans; 
```

# ruby - :target => '_blank' 和 target: = "_blank" 之间的区别

> ID：10292136
> 
> 赞同：0
> 
> 时间：2012-04-24T05:23:33.480
> 
> 标签：ruby

我最近问了一个关于在新页面中打开链接的问题（[这里是链接）。](https://stackoverflow.com/questions/10290335/how-to-use-blank-or-new-in-rails)我发现有两个答案。

```
:target => '_blank' 
target: "_blank" 
```

我希望有人能解释单引号和双引号之间的区别以及为什么上述两种方法都有效。我知道第二个选项只能在更新版本的 rails 上实现（我使用的是 3.2.2）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-24T05:29:37.667

基本上，这是 Ruby 的哈希，（更多信息请参考“@mu is too shot”的资源）

```
# always works (works both in Ruby 1.8 and 1.9)
:target => '_blank'    

# works in 1.9 only 
target: "_blank" 
```

他们都可以分配哈希的元素。

但是下面的代码不正确。

```
# this is incorrect
target: = "_blank" 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-24T05:33:57.143

```
1.9.2-p290 :009 > { :name => "soundar" } == { name: "soundar" }
=> true 
```

# c - 按字符串对结构数组进行排序

> ID：10292139
> 
> 赞同：0
> 
> 时间：2012-04-24T05:23:50.940
> 
> 标签：c, pointers, struct

我正在尝试使用选择排序和指针对结构数组进行排序，但遇到了一些麻烦。

当我尝试打印数组以查看名称是否已排序时，所有名称都已排序，但第一个位置的名称仍保留在原处（未排序）。

```
/*
   all is the unordered array of struct; pLast is pointer to the last struct in array.
*/
void sortArray(CASE* all, CASE* pLast)
{
  CASE* current;
  CASE* walker;
  CASE* smallest;
  CASE temp;

  for(current = all; current < pLast; current++)
  {
    smallest = current;

    for (walker = current + 1; walker <= pLast; walker++)
    {
      if(strcmp(walker->name, smallest->name) < 0 )
        smallest = walker;
    }
    temp = *current;
    *current = *smallest;
    *smallest = temp;
  }

  for(walker = all; walker <= pLast; walker++)
  {
    printf("%s\n", walker->name);
  }  

  return;
} 
```

有小费吗？

谢谢

编辑：允许打印名称但未完全排序的主要修订

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T05:50:38.403

作为一个简单的算法，选择排序总是看起来像这样：

```
function selection_sort(arr):
  for i in 0..len(arr)-1:
    smallest = i
    for j in i+1..len(arr)-1:
      if arr[j] < arr[smallest]:
        smallest = j
    swap i and smallest. 
```

如果使用指针，实现仍将使用这种格式（或非常接近）。

仅供参考：[http ://en.wikipedia.org/wiki/Selection_sort](http://en.wikipedia.org/wiki/Selection_sort)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T05:40:51.507

有什么理由不使用 qsort 吗？

不幸的是，你不写什么`struct CASE*`；我们只知道它包含一个字段名称

所以你可以写一个比较函数，比如：

```
int case_struct_comparison_function (const void * v1, const void * v2) {
  const struct CASE * case_1 = v1;
  const struct CASE * case_2 = v2;
  return  strcmp(case_1->name, case_2->name);
}

qsort(arr, size_of_arr, sizeof(struct CASE), case_struct_comparison_function); 
```

它未经测试，但应该给你一个想法。

# java - 有没有什么方法可以调用清理函数来清理本机代码，同时在 Android 中留下任何活动？

> ID：10292152
> 
> 赞同：2
> 
> 时间：2012-04-24T05:25:39.880
> 
> 标签：java, android, c, android-activity, android-ndk

看

我有`mainActivity`哪些电话`tempActivity`

现在在 tempActivity 我调用一些本机方法并 malloc 一些数据..所以现在当用户

1> 从 tempActivity 回到 mainActivity 或

2> 退出整个应用程序

我需要调用一个清理函数来释放本机方法中的所有数据 malloc，那么我该如何实现这些事情呢？

android框架有什么方法可以处理这种清理功能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T05:50:17.963

好的，我认为问题是关于如何释放正在使用`malloc()`本机代码内部分配的内存。

我在我的一个项目中有同样的要求。我是通过以下方式做到的。

在`onStop()`or里面`onDestroy()`，我做了一个本地调用，我已经习惯`free()`了分配的内存。我认为这是最好和最简单的方法。我不确定android是否为此提供了一些API。知道这样的事情是否存在将是有益的。谢谢。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T05:41:48.890

请参阅从[此处](http://developer.android.com/reference/android/app/Activity.html)获取的图表。

![在此处输入图像描述](../Images/543bf508ea13b6909955727e0524e3a5.png)

基本上，`Activity`该类定义了几种对您有用的方法：

*   `onPause`每次您的活动暂停时都会调用它：即您的屏幕锁定，您转到其他活动
*   `onDestroy`并`onStop`在您进行其他活动时调用。

也许其中一些方法对您有用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-24T05:42:10.623

1.  对于从`tempActivity`到的转换，请在'方法`mainActivity`中调用清理函数。`tempActivity``onDestroy`
2.  对于退出整个应用程序的情况：那就更混乱了。没有全局函数可以告诉应用程序何时退出，因此您需要使用其他一些方法来跟踪应用程序正在退出。

我建议使用设置要使用`Service`的`onStartCommand`函数`START_NOT_STICKY`，然后在调用清理函数的`onDestroy`方法中使用。`Service`如果您这样做并且所有人都`Activity`使用该服务，那么您可以在那里完成所有操作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-24T05:40:33.243

推荐的技术是分配您需要的任何内容`onResume`并在`onPause`. 通过这种方式，您可以在您的活动即将显示时进行分配，并在您的活动部分或完全被其他活动遮挡时进行清理。

# android - Android：TextView 未在 invalidate() 或 postInvalidate() 上更新

> ID：10292153
> 
> 赞同：0
> 
> 时间：2012-04-24T05:25:44.547
> 
> 标签：android, android-intent

我对 android 编程相当陌生，在我的代码中更新 TextView 时遇到问题。我可以设置它并从 onResume() 正确更新。

后来我打电话

```
startActivityForIntent(my.android.activity,0) 
```

然后我在这个方法中使用 setText：

```
onActivityResult(int requestCode, int resultCode, Intent returnIntent){
    if (resultCode == Activity.RESULT_OK){
        String myString= returnIntent.getString("mystr","empty");
        myClass=myClass.interperetResults(myString);  //this method returns correctly
        leftText.setText(""+myClass.toString());
        leftText.invalidate() //neither invalidate() or postInvalidate() changes result
    }
}; 
```

它似乎在 TextView 类中更新（我使用 System.out 来调试它），但它不会在屏幕上更新。

据我所知，我只需要调用 TextView.invalidate() 或 TextView.postInvalidate()，它们都不起作用。有什么我想念的，还是什么？我已经尝试了其他帖子中的许多不同建议，但在这里无济于事。

我还有一个 rightText 对象和 if 语句，用于返回的字符串何时为空，但这是我遇到问题的部分。如果你们需要我的代码的任何其他部分，请告诉我。我很乐意提供帮助。再次感谢您的输入。

编辑：根据要求，这是我的 xml 布局。虽然问题不是我看不到风景。当我在 onResume() 中调用 setText 时，它会正确显示和更改。无论如何，这是我的 xml 代码。我不想将变量名称更改为通用名称，所以实际上就是这样。我正在与该项目的合作伙伴一起工作，他是创建 xml 和布局的人，所以我不完全确定这里的一切是什么。我希望你们能理解它。

这是 onCreate：

```
 public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        this.requestWindowFeature(Window.FEATURE_NO_TITLE);

} 
```

和 onResume：

```
protected void onResume() {
    super.onResume();
    // The activity has become visible (it is now "resumed").
    setContentView(R.layout.play);

    myEquation = new Equation(getResources());
    leftText = (TextView) this.findViewById(R.id.playLeftEquation);
    rightText = (TextView) this.findViewById(R.id.playRightEquation);

    //leftText.setText("No data");
    //rightText.setText("No data");  //The textviews update fine here.  
               //Currently commented out because I thought that maybe this was 
               //overwriting the other setText, but still no change.

}

<?xml version="1.0" encoding="utf-8"?>
<GridLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@drawable/atomic_bckgrd"
    android:columnCount="11" >
    <ImageButton    
        android:id="@+id/playTrashCanButton"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_column="0"
        android:layout_columnSpan="2"
        android:layout_gravity="left"
        android:layout_row="0"
        android:contentDescription="@string/trash"
        android:onClick="clickHandler"
        android:src="@drawable/trash" />

    <Button
        android:id="@+id/playEditButton"
        android:layout_column="2"
        android:layout_row="0"
        android:onClick="clickHandler"
        android:text="@string/edit" />

    <ImageButton
        android:id="@+id/playRulesButton"
        android:layout_column="4"
        android:layout_columnSpan="5"
        android:layout_row="0"
        android:contentDescription="@string/rules"
        android:onClick="clickHandler"
        android:src="@drawable/rules1" />

    <TextView            //One of the non-updating fields
        android:id="@+id/playLeftEquation"
        android:layout_column="1"
        android:layout_gravity="bottom"
        android:layout_row="1"
        android:textAppearance="?android:attr/textAppearanceMedium" />

    <ImageButton
        android:id="@+id/playEnterButton"
        android:layout_column="2"
        android:layout_gravity="bottom"
        android:layout_row="1"
        android:contentDescription="@string/enter"
        android:onClick="clickHandler"
        android:src="@drawable/enter1" />

    <TextView               //The other non-updating field
        android:id="@+id/playRightEquation"
        android:layout_column="3"
        android:layout_columnSpan="6"
        android:layout_gravity="bottom"
        android:layout_row="1"
        android:textAppearance="?android:attr/textAppearanceMedium" />

    <Space
        android:layout_width="52dp"
        android:layout_height="1dp"
        android:layout_column="0"
        android:layout_row="0" />

    <Space
        android:layout_width="148dp"
        android:layout_height="1dp"
        android:layout_column="1"
        android:layout_row="0" />

    <Space
        android:layout_width="161dp"
        android:layout_height="1dp"
        android:layout_column="2"
        android:layout_row="0" />

    <Space
        android:layout_width="46dp"
        android:layout_height="1dp"
        android:layout_column="3"
        android:layout_row="0" />

    <Space
        android:layout_width="36dp"
        android:layout_height="1dp"
        android:layout_column="4"
        android:layout_gravity="fill_horizontal"
        android:layout_row="0" />

    <Space
        android:layout_width="1dp"
        android:layout_height="160dp"
        android:layout_column="0"
        android:layout_gravity="fill_horizontal"
        android:layout_row="0" />

</GridLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T14:34:13.307

**已修复**：我已经解决了问题。从 myEquation 中删除 toString 方法以查看使用的地址后，我意识到我正在 onResume() 中初始化 myEquation。（此时我实际上已将其移至 onStart() ，但效果相同）

是的。在 onCreate() 中初始化所有变量并避免大量头痛。

# jsp - 如何在 GET 请求中显示页面？此 URL 不支持 HTTP 方法 GET 出错

> ID：10292156
> 
> 赞同：0
> 
> 时间：2012-04-24T05:25:49.427
> 
> 标签：jsp, servlets

如果我运行具有 url (http://localhost:8080/MyApp/) 的应用程序，我已经创建了一个登录页面。如果用户成功登录，则用户可以进入收件箱和草稿页面。所以我相应的网址是[http://localhost:8080/MyApp/MainMenu](http://localhost:8080/MyApp/MainMenu)，[http://localhost:8080/MyApp/inbox](http://localhost:8080/MyApp/inbox)，[http://localhost:8080/MyApp/draft](http://localhost:8080/MyApp/draft)等当我复制任何网址并粘贴在浏览器中我想打开现有页面。但我收到`HTTP method GET is not supported by this URL`错误消息。我已经实现了 post 方法来提交任何页面。我无法使用get方法提交登录表单等。如果我将页面复制并粘贴到浏览器中，如何获取相应的页面？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T05:32:35.513

只需向相关的 servlet 添加一个`doGet()`方法，该方法将转发到所需的 JSP。

例如

```
@Override
protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
    request.getRequestDispatcher("/WEB-INF/inbox.jsp").forward(request, response);
} 
```

如果您已经拥有它们，那么您需要删除所有`super.doGet()`调用，否则您仍将面临 HTTP 405 错误。

### 也可以看看：

*   [我们的 Servlets 信息页面](https://stackoverflow.com/tags/servlets/info)- 包含一些展示相同内容的 hello world 示例

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T05:33:04.377

这取决于您如何覆盖`doPost`或`doGet`方法。参数的正确顺序应该是：

```
public void doGet(HttpServletRequest request, HttpServletResponse response)
    throws IOException, ServletException { 
```

# c# - 正则表达式匹配变量多行？

> ID：10292163
> 
> 赞同：17
> 
> 时间：2012-04-24T05:26:33.967
> 
> 标签：c#, regex

假设我有以下文本，我想提取“数字开头”和“数字结尾”之间的文本有动态数量的行和唯一改变其中数字的内容，例如：第一、第二等.我将从中提取数据的每个文件在“数字开头”和“数字结尾”之间的行数不同。如何编写正则表达式来匹配“数字开头”和“数字结尾”之间的内容，而不知道文件中有多少行介于数字开头和“数字结尾”之间？

问候！

```
This is the first line This is the second line

Start of numbers

This is the first line
This is the second line
This is the third line
This is the ...... line
This is the ninth line

End of numbers 
```

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-04-24T05:37:58.783

您应该使用`SingleLine`告诉您的 C# 正则表达式`.`匹配任何字符（不是除 之外的任何字符`\n`）的模式。

```
var regex = new Regex("Start of numbers(.*)End of numbers",
                  RegexOptions.IgnoreCase | RegexOptions.Singleline); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-24T05:30:29.507

您应该能够毫无问题地匹配多行字符串。只要记住在 (`\n`换行) 中添加正确的字符。

```
string pattern = "Start of numbers(.|\n)*End of numbers";
Match m = Regex.Matches(input, pattern); 
```

如果您能想到带有隐藏字符的字符串，这会更容易。

```
Start of numbers\n\nThis is the first line\nThis is the second line\n ... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T05:41:51.600

像这样的东西：

^(开始)([\s\n\d\w]*)(结束)$

你在哪里得到第二组。如果您愿意，您甚至可以命名该组。所以重点是您在一个字符串中读取整个内容，然后从中获取正则表达式结果。

编辑：

必须稍微编辑一下。如果您的匹配项可能位于中间某处，则删除开始 (^) 和结束 ($) 字符。(开始)([\s\n\d\w]*)(结束)

请注意，这只会留下您想要获得的行。然后处理这些行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-24T05:54:04.007

```
/(?<=Start of numbers).*(?=End of numbers)/s 
```

您需要启用 dotall 标志。

[http://regexr.com?30oaj](http://regexr.com?30oaj)

# c# - 我可以更改/“重新绑定”默认 WinRT 系统画笔/调色板颜色以匹配我的应用程序吗？

> ID：10292166
> 
> 赞同：3
> 
> 时间：2012-04-24T05:26:43.033
> 
> 标签：c#, xaml, windows-runtime, windows-store-apps, winrt-xaml

这样做会是最佳做法吗？

例如，`HyperlinkPointerOverBrush`定义深蓝色/绿色，这是当您的鼠标/“手指”悬停在链接上时我的应用程序继承的默认画笔颜色。但是深蓝色/绿色的颜色分配可以轻松更改为其他颜色吗？

（下图说明了我的应用程序引用的系统画笔列表） ![在此处输入图像描述](../Images/6e9ab938740fc5f3c493789169ee8a1a.png)

我尝试`HyperlinkPointerOverBrush`在我的`App.xaml`：

```
<SolidColorBrush x:Key="HyperlinkPointerOverBrush" Color="#FF0A2562"/> 
```

在我的地铁应用程序中，但无济于事；我的链接仍然保持默认的深蓝色/绿色。

关于我将如何处理这个问题的任何想法？以及定义应用程序的系统画笔的最佳实践。您希望在 Windows 8 Metro 风格的 WinRT 应用程序上使用“调色板”？（这是一口）

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T06:14:41.843

您可以覆盖所有系统画笔，只需将具有相同键的画笔放入资源中：

```
<ResourceDictionary>
    <SolidColorBrush x:Key="ListBoxItemSelectedBackgroundThemeBrush" Color="Green" />
</ResourceDictionary> 
```

WinRT 的所有系统画笔的列表可以在这里找到：http: [//www.win8tutorial.net/styling/windows-8-1-theme-resources/](http://www.win8tutorial.net/styling/windows-8-1-theme-resources/)

最棘手的事情是找到合适的刷子来覆盖，因为它有数百个。

问候

基督教
[http://www.wpftutorial.net](http://www.wpftutorial.net)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-24T06:53:38.433

winrt 程序集中开箱即用的控件具有使用这些程序集资源的样式和模板。要更改它，您可以做的一件简单的事情是在 app.xaml 中设置 RequestedTheme="Light"。要更改任意画笔，您还需要通过在使用控件时显式覆盖它们来修改样式/模板本身。

您可以通过转到“编辑模板”/“编辑副本...”在设计视图上下文菜单中提取默认模板。然后，您将使用主题资源修改提取的样式。

您可以通过将一组预定义的资源或主题合并到 App.xaml/MergedDictionaries 中来使用它，因为 Common/StandardStyles.xaml 位于基本模板中。可能如果您定义使用相同键的多个主题资源字典 - 您可以动态更改 App.xaml 中的合并字典以在运行时更改主题。

# php - 在 PHP 中，您如何处理一个充满时间的 HTML 选择框并排除 MySQL 中已有的选择框

> ID：10292168
> 
> 赞同：-1
> 
> 时间：2012-04-24T05:26:55.530
> 
> 标签：php, html

我正在尝试用客户预约的时间（例如上午 10:30）填充一个表格，所以我有一个选择框，其中一天中的时间从上午 9:00 到晚上 7:00 以 15 分钟的步长上升（9 ：上午 45 点，上午 10:00）。

```
<select name="times">
<option value="09:00">9:00am</option>
.....
<option value="19:00">7:00pm</option>
</select> 
```

我需要一些如何删除已经存储在数据库中的一些时间

会是这样吗？：

```
<?php
$times = $_POST['times'];
$dbc = mysqli_connect('localhost', 'root', '', 'salon')
or die('error conneting to mysql');

$query = "SELECT times FROM `clients` WHERE `times` = '$times'";

$result = mysqli_query($dbc, $query);
mysqli_close($dbc);
?>
<select>
<?php
$times = array('09:00','09:15', ..... '19:00');
foreach($times as $time);
while($row = mysql_fetch_array($results)){
 if($row = $time){
unset($time);

echo '<option value="$time">$times</option>';
}
else{ echo 'oh no';
}
?>
</select> 
```

以及类似的东西..反正我就是想不通。

提前感谢所有帮助。

PS 我知道我的代码应该更干净，并包含 strip_tags() mysql_real_escape_string()。这只是为了提问

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T08:51:54.637

这是完全不成熟的代码示例。您的代码中有很多错误。顺便说一句，以下是正确的：

`$times = $_POST['times'];`

是一个数组，所以你不能像字符串一样使用它。您必须使用逗号 (,) 分隔符来内爆数组，以便您的变量 $times 可以是这样的

`$times_array = "in('09:00','09:30')";`

以下是完整示例

 `````
<?php

    $times_post = $_POST['times'];

    $times_array = "in('09:00','09:30')";// This will be your string after imploding post array

    $dbc = mysqli_connect('localhost', 'root', '', 'shiv')  or die('error conneting to mysql');

    $query = "SELECT times FROM `clients` WHERE `times` = $times_array";

    $results = mysqli_query($dbc, $query);

    echo "<select>";

    $times = array('09:00','09:15','19:00');

    while($row = mysqli_fetch_array($results)){

        foreach($times as $key => $time){

            if($row[0] == $time){
                unset($times[$key]);

            }else{
                echo 'oh no';
            }
        } 
    }

    $updated_times = array_values($times);

    for ($index = 0; $index < count($updated_times); $index++){
        echo "<option value=$updated_times[$index]>$updated_times[$index]</option>";
    } 

    echo "</select>";

?> 
`````

# java - 有没有一种简单的方法可以在不干扰代码的情况下为 Eclipse 生成文档？

> ID：10292173
> 
> 赞同：0
> 
> 时间：2012-04-24T05:27:47.823
> 
> 标签：java, eclipse, documentation

我必须生成一份关于我的程序的所有类和方法的报告，并将其放入 Word 文档中。现在，我真的很想知道是否有软件可以从我的项目文件中生成文本文件文档，而无需在源代码中插入注释。我只想要一个文本或 ms word 文件中所有方法和类的列表，以便我可以自己填写描述。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-24T05:31:14.327

您*可以*仅从未注释的源代码生成 javadoc 文档。它将生成 HTML，但可能有可用的 Word 转换器。

但是，我*强烈*建议您改为在代码中添加注释。这是全世界的 Java 程序员所期望的；当您编写调用当前 API 的新代码时，文档将显示在工具提示中；工具已为此做好了准备。基本上，尝试*使用*语言约定而不是对抗它们。

编辑：听起来您可以使用 a`doclet`为您生成 Word 文档。[MIF Doclet或](http://java.sun.com/j2se/javadoc/mifdoclet/5/docs/mifdoclet.html)[PDFDoclet](http://sourceforge.net/projects/pdfdoclet/)可能是一个很好的起点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T05:34:49.593

使用 javadoc 生成文档，然后将其转换为所需的格式。在此处查找不同的选项：[https](https://www.oracle.com/java/technologies/javase/javadoc-faq.html#print) ://www.oracle.com/java/technologies/javase/javadoc-faq.html#print 。

希望能帮助到你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T05:55:24.763

有一个 Maven 插件，“ [maven-site-plugin](http://maven.apache.org/plugins/maven-site-plugin/) ”，可用于从 Java 项目生成可编辑的 HTML 文档。

# jquery - 使用 jquery 检查 CSS 属性时遇到问题

> ID：10292174
> 
> 赞同：0
> 
> 时间：2012-04-24T05:27:58.003
> 
> 标签：jquery, css

我正在尝试通过单击按钮来移动 div，并在上边距为某个值时弹出警报。但是，只有在我将它从我想要的边距移开后才会弹出警报。

这是我正在使用的代码：

```
$("input.down").click(function()
    $(".block").animate({"margin-top": "+=50px"});
    check();
});

$("input.up").click(function(){
    $(".block").animate({"margin-top": "-=50px"});
    check();
});

function check(){
    var top = $(".block").css("margin-top");

    if (top == "100px") {
        alert('top: ' + top + '\nyou have the right height');
    }
} 
```

当我最初将 margin-top 移动到 100px 时没有警报，但是一旦我将它从那里移开，就会出现警报。如果先运行然后 div 动画，它就像检查功能。有没有办法让它首先动画化？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T05:41:22.823

```
$("input.down").click(function() {
   $(".block").animate({"margin-top": "+=50px"}, function() { check(); });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T05:37:06.617

试试这个：

```
$("input.down").click(function(){
       $(".block").animate({"margin-top": "+=50px"}, {"complete": check});
    }); 
```

`check`一旦动画完成，这应该运行该函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T05:38:19.657

恕我直言，我会这样做：

```
 $("input.down").click(function()
       var marginTop = $(".block").css("margin-top");
       $(".block").animate({"margin-top": marginTop + 50}, function() {
            check();
       });           
    });

   $("input.up").click(function(){
       var marginTop = $(".block").css("margin-top");
    $(".block").animate({"margin-top": marginTop - 50 }, function() {
            check();
       });          
    });

  function check(){
   var top = $(".block").css("margin-top");

   if (top == "100px") {
   alert('top: ' + top + '\nyou have the right height');
  };} 
```

# android - 我应该将加密密钥硬编码在我的 iOS 或 Android 应用程序中吗

> ID：10292175
> 
> 赞同：1
> 
> 时间：2012-04-24T05:28:05.290
> 
> 标签：android, ios, reverse-engineering

我计划使用一次性密码加密来进行服务器和客户端（这是一个移动应用程序）之间的通信。但我需要在移动应用程序中对密钥进行硬编码。所以我所有由不同用户安装的移动应用程序都将具有相同的密钥。

对 Android 和 iOS 的构建进行逆向工程并提取硬编码值有多容易？

关于我计划的安全性的一些其他信息：我还计划通过向每个用户发送一条带有 4 位数字的短信来增加额外的安全性，该短信将用于签署请求。这样我可以保证用户是假装的。

我通过互联网发送用户的位置、他的电话号码（一次）、他的姓名（一次）。

你觉得我的想法怎么样，你会推荐什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T22:34:42.823

仅供参考，以不同的方式从 iOS 或 Android 逆向工程出硬编码值非常容易：

1.  静态分析：使用 IDA Pro 等静态分析工具可以揭示有关二进制文件的大量信息。同样，标准的 *NIX 命令`strings`显示二进制文件中包含的每个字符串。

2.  运行时分析和调试：GDB 等工具可以在运行时显示应用程序的内部结构，允许用户设置断点、读/写寄存器和数据位置，以及在程序中进行挖掘。

3.  网络代理：只需在系统设置应用程序中为连接到同一本地网络的笔记本电脑指定网络代理，笔记本电脑就可以查看设备发送到服务器和从服务器接收的所有内容。除非此数据在发送之前或接收之后被加密，否则用户将能够确定密钥是什么。

要记住的主要一点是：无论您如何尝试向用户隐藏密钥，只要有足够的时间和精力，他们都将能够弄清楚。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T05:35:09.393

您的设计中有许多安全漏洞。说真的，只需将 SSL 与基本身份验证一起使用。它经过实战测试，对于您描述的用例来说绰绰有余。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-24T05:35:35.843

通常，如果您必须询问有关在生产代码中设计自己的加密方案的问题，您不应该在生产代码中设计自己的加密方案（并且您**永远不应该将***一次性*密码硬编码到应用程序中，因为这意味着它是多次使用）。

两因素身份验证很好，但您使用的实际加密应该是众所周知的。如果您希望将某种密钥嵌入到应用程序中，您可能需要研究公钥加密方案，例如[RSA](http://en.wikipedia.org/wiki/RSA_%28algorithm%29)。[像SSL](http://en.wikipedia.org/wiki/Secure_Socket_Layer)这样的加密套件可能是在这里使用的合适系统。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-24T05:39:48.090

如果它只是以纯文本形式留在二进制文件中，则很容易从应用程序中提取加密密钥。您需要将密钥隐藏在代码中或另一个文件中。

例如，如果将字符串隐藏在代码中，而不是仅仅做类似@“我的密钥”之类的操作，而是使用一些非标准方式构建字符串，可能存储 10 个字符串，并从每个字符串中选择一个字母，将它们连接在一起形成您的实际密钥。

另一种方法是将密钥隐藏在另一个文件中，比如图像。如果您可以选择加密密钥，请从您在应用程序中使用的图像中选择一组特定的字节。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-01-08T15:45:51.053

这是一个高级建议：

```
1) If (keychain is empty) generate a random password, perhaps with base64 encoding
   If (keychain is not empty) you must have already generated a password from one of your apps, so just use the one in the keychain.
2) If from 1) (keychain is empty) store that new random password in the keychain 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-24T05:47:35.660

在 iOS 上，您可以将密钥存储在钥匙串中。

但是，我不太确定您对每个人的单键策略。您是否可以使用用户名和密码（或 SMS 身份验证）对用户进行身份验证，然后为他们生成唯一的用户密钥。您可以将此密钥存储在钥匙串中以供将来参考。

并使用安全连接！（https？）

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-24T05:34:49.177

> 对 Android 和 iOS 的构建进行逆向工程并提取硬编码值有多容易？

很容易。

> 向每个用户发送一条带有 4 位数字的短信，用于签署请求

对用户来说过于复杂，仅在确实需要时才使用（对于安全要求高的应用程序）

首先：使用 SSL 加密的连接（HTTPS）。

例如，您还可以为每个连接从服务器获取密钥和 sessionId。服务器会将 sessionIds 和密钥存储在一些存储中......

# entity-framework - 为什么 EF DataBase First 不使用 getdate()？

> ID：10292179
> 
> 赞同：5
> 
> 时间：2012-04-24T05:28:38.260
> 
> 标签：entity-framework, ef-database-first

我首先使用带有数据库的 EF 4.1。

示例表：

```
CREATE TABLE dbo.Product(
   [ID] [int] IDENTITY(1,1) not null,
   Title nvarchar(200) not null,
   CreateDate datetime not null default(getdate()),
) 
```

添加新行时，出现有关 DateTime 类型溢出的异常。

`getdate()`数据库设置无效。

我必须将该字段的`storeGeneatePattern`属性设置为.`createdate``Computed`

有什么方法可以让EF自动生成`DateTime`列而不需要手动设置？？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-24T07:59:01.767

没有 EF 永远不会使用您的数据库默认值。原因是您的实体具有不可为空的`DateTime`属性。默认情况下，此属性在 .NET 中分配了默认值，即 1.1.0001。EF 不知道您是否分配了该值或者它是否为默认值，因此它始终将此值显式传递给数据库。如果您使用可空类型，也会发生同样的情况，但在这种情况下，EF 将显式传递 null。在这两种情况下，都不会应用来自数据库的默认值，因为仅当应用程序中的值未在插入命令中显式传递时才会应用该值 - EF 显式传递来自实体的所有值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T05:32:30.717

您可以在`Product`实体类构造函数中执行此操作，

```
public class Product{
  public Product(){
     CreateDate =DateTime.Now;
  }
} 
```

# java - 如何在 Java 中使用名称空间解析 XML 文件？

> ID：10292184
> 
> 赞同：0
> 
> 时间：2012-04-24T05:29:02.670
> 
> 标签：java, xml

我对 java 比较陌生，并试图解析在 Java 中具有前缀的 XML。样本。

```
 <client:ClientName>
        <client:nameTitle>Mr</client:nameTitle>
        <client:familyName>John</client:familyName>
        <client:givenName>George</client:givenName>
    </client:ClientName> 
```

虽然我有很多解决方案可以读取没有前缀的标签，例如在内容中使用 getTagValue，例如

```
 <client>Content</client>. 
```

如前所示检索标签值已被证明具有挑战性。非常感谢提供的任何帮助。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T08:13:58.227

您的示例不是*命名空间格式良好的*。它使用命名空间前缀“client”，而没有声明该前缀的绑定：人们希望看到`xmlns:client="something"`.

原则上，不是命名空间格式的 XML 仍然是 XML，并且有处理它的方法；但它很少遇到，而且现在大多数 XML 工具都设计为只处理名称空间格式良好的输入。

您的问题的答案取决于您是否真的要处理名称空间格式不正确的 XML，或者您是否只是从示例中省略了名称空间声明。

# java - 在 GWT 中为图标添加工具提示

> ID：10292188
> 
> 赞同：3
> 
> 时间：2012-04-24T05:29:33.453
> 
> 标签：java, gwt

任何人都可以帮助如何在 java 中使用 GWT 为 UiHandler 添加工具提示

提前致谢，

拉吉

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-24T05:31:44.000

```
button.setTitle(tooltip); 
```

阅读[http://www.gwtproject.org/javadoc/latest/com/google/gwt/user/client/ui/UIObject.html#setTitle-java.lang.String-上的文档](http://www.gwtproject.org/javadoc/latest/com/google/gwt/user/client/ui/UIObject.html#setTitle-java.lang.String-)

# php - 将用户定义的类放入控制器类

> ID：10292200
> 
> 赞同：0
> 
> 时间：2012-04-24T05:30:57.790
> 
> 标签：php, zend-framework, bootstrapping

我的 zend 应用程序中有一个用户定义类（默认）

> 应用程序/库/Custom_/Custom_Test.php

我想在 indexController.php 的 getvalueAction() 中使用它

我尝试在 [production] 的 application.ini 中包含以下行

```
autoloaderNamespaces.custom = "Custom_" 
```

我不想使用简单的包含函数，也无法在 getvalueAction() 中实例化它。怎么做 ？

*   使用网豆
*   Ubuntu 11.10
*   我是zend新手

谢谢你。

PS：为了清楚起见，我将在下面显示我的代码

索引控制器.php

```
<?php

class IndexController extends Zend_Controller_Action
{

    public function init()
    {}

    public function indexAction()
    {}

    public function getvalueAction() {
        $request = $this->getRequest();
        $numb = $request->getParam('numb');

        $result = Test::testFunction($numb);
        $this->view->assign('result',$result);
    }

    public function inputAction() {
        $this->view->assign('action','getvalue');
    }
} 
```

在 input.phtml 里面

```
 <form name="enterNumber" method="post" action="<?php echo $this->escape($this->action)?>" >

      input a number :
      <input type="text" name="numb"/> <br/>
      <input type="submit" value="Submit" />

  </form> 
```

在 getvalue.phtml 里面

```
 <h1><?php echo "Final value id " . $this->escape($this->result); ?></h1> 
```

索引.php

```
<?php

// Define path to application directory
defined('APPLICATION_PATH')
    || define('APPLICATION_PATH', realpath(dirname(__FILE__) . '/../application'));

// Define application environment
defined('APPLICATION_ENV')
    || define('APPLICATION_ENV', (getenv('APPLICATION_ENV') ? getenv('APPLICATION_ENV') : 'production'));

// Ensure library/ is on include_path
set_include_path(implode(PATH_SEPARATOR, array(
    realpath(APPLICATION_PATH . '/../library'),
    get_include_path(),
)));

/** Zend_Application */
require_once 'Zend/Application.php';

// Create application, bootstrap, and run
$application = new Zend_Application(
    APPLICATION_ENV,
    APPLICATION_PATH . '/configs/application.ini'
);
$application->bootstrap()
            ->run(); 
```

应用程序.ini

```
[production]
phpSettings.display_startup_errors = 0
phpSettings.display_errors = 0
includePaths.library = APPLICATION_PATH "/../library"
bootstrap.path = APPLICATION_PATH "/Bootstrap.php"
bootstrap.class = "Bootstrap"
appnamespace = "Application"
resources.frontController.controllerDirectory = APPLICATION_PATH "/controllers"
resources.frontController.params.displayExceptions = 0

[staging : production]

[testing : production]
phpSettings.display_startup_errors = 1
phpSettings.display_errors = 1

[development : production]
phpSettings.display_startup_errors = 1
phpSettings.display_errors = 1
resources.frontController.params.displayExceptions = 1 
```

Custom_Test.php

```
<?php

    class CustomTest{

        function testFunction($a) {

            return $a*2;
        }
    }

?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T06:09:13.380

行动助手是您所需要的。

既然你说

> 我想在 indexController.php 的 getvalueAction() 中使用它

根据 Zend Framework 的官方网站

> Action Helpers 允许开发人员将运行时和/或按需功能注入任何扩展 Zend_Controller_Action 的 Action Controller。Action Helpers 旨在最小化扩展抽象 Action Controller 以注入通用 Action Controller 功能的必要性。

我假设您想使用动作助手，因为动作助手是专门为此目的而设计的。

**步骤 1.** 你需要告诉助手代理你的动作助手在哪里，我通常在我的 application.ini 文件中这样做，但你也可以在你的 frontController 或 Bootstrap 文件中这样做。

```
#if you are using application.ini, in your application.ini add the following
resources.frontController.actionHelperPaths.Custom_Action_Helper = APPLICATION_PATH "/../library/Custom/helpers" 
```

**第 2 步：**
创建 Action Helper 类，您必须确保该类`extends Zend_Controller_Action_Helper_Abstract`并将文件放在定义的 helper 目录中`Library/Custom/helpers`

并像这样创建动作助手

```
class Custom_Action_Helper_Test extends Zend_Action_Helper_Abstract
{
    public function random()
    {
        return 'foo';
    }
} 
```

现在助手已经准备好在任何控制器中使用了。可以使用以下语法调用它。

```
echo $this->_helper->Test->random(); 
```

希望这可以帮助你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T05:54:28.887

将文件和文件夹的名称从`application/library/Custom_/Custom_Test.php`

至

```
application/library/Custom/Test.php 
```

即自定义文件夹中的Test.php

在您的 application.ini 中添加这一行，而不是`autoloaderNamespaces.custom = "Custom_"`

```
Autoloadernamespaces[] = "Custom_" 
```

然后只需在您喜欢的任何地方创建它的实例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T05:43:38.830

```
application/library/Custom/Custom_Test.php //underscore not needed 
```

在你的 ini

```
appnamespace = "Custom_" 
```

课堂应该是这样的

```
Class Custom_Test{
 public static function foo(){
  return 'hai';
}

} 
```

然后在任何动作中你都可以调用`Custom_Test::foo();`

# user-interface - 免费（或低成本）工具来创建 GUI 模型？

> ID：10292204
> 
> 赞同：4
> 
> 时间：2012-04-24T05:31:08.460
> 
> 标签：user-interface, mockup-tool

到目前为止，我一直在用铅笔在纸上画出我的模型，它在大多数情况下都有效，但我想知道是否有专业的工具可以做到这一点？比如说团队项目，GUI 模拟想法是如何传递的，肯定不是我的纸和铅笔的尼安德特人方法？专注于桌面应用程序，我想提出一些建议。我还使用了一些 IDE 设计器，迄今为止我使用过的最有用和最直观的一个是 Nokias Qt Designer，因为它与 Qt 的 MVC 模式和在设计中添加插槽/信号关系的能力非常好。

有没有一个工具很像 Qt Designer 但更通用（和孤立）来模拟一些 UI 想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T05:35:55.217

我以前用过 Firefox 的“铅笔”插件——快速简单地画东西。

它真的取决于你想要做什么：你可以获得可以让你模拟 GUI 的工具（例如，当你按下按钮时，它会带你到你模拟的不同的地方）——我自己没有使用过它们所以我无法评论它们是否值得。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-29T09:39:19.207

这里有一个非常详尽的商业和非商业工具列表：http: //c2.com/cgi/wiki? [GuiPrototypingTools](http://c2.com/cgi/wiki?GuiPrototypingTools)

QT 设计器确实是用于创建模型的“最接近”的 IDE，但专门的工具是

1.  更快，因为它们是为这个确切目的而建造的
2.  不需要编程知识，因此可供分析师和其他非开发人员使用
3.  通常带有“黑白”或“手绘”皮肤，以避免陷入关于颜色、字体等的无休止讨论
4.  允许您对模型进行注释，以引发讨论或将这些注释用于规范

（直截了当地说，我是此类工具的作者 - [http://MockupScreens.com](http://MockupScreens.com)）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-25T07:10:36.043

看看[WireframeSketcher 线框工具](http://wireframesketcher.com)。它适用于任何 Eclipse IDE，并且还有一个独立版本。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-03T22:00:23.053

我使用 Fireworks、Lumzy、Justinmind 和 Maqetta 来制作模型。

Fireworks 是任何类型的设计工作的绝佳工具，除非您需要专业的矢量或 Photoshop 编辑。您可以轻松找到模型库并创建链接、连接页面，甚至在组件上添加状态。但是，您无法实现高级的 gui 组件行为，例如数据网格、手风琴等。学习需要一点时间，但值得。

Lumzy 一开始就很棒。我可以使用非常丰富的 gui 库轻松创建交互式模型。您甚至可以将您的团队成员添加到 lumzy 项目中，并通过您的网络浏览器在同一个模型上一起工作。最好的部分是它是完全免费的。但是，一旦模型文件的数量增加，我就开始遇到奇怪的错误。最后，我什至无法保存我的项目。因此，它可能是简单模型的最佳免费工具，但不是完整的解决方案。

Justinmind 是一个昂贵的工具。它非常专业和详细。你可以感觉到你正在用它设计实际的产品。但是，有时对于简单的事情来说可能太多了。有人建议我自己创建整个手风琴组件，以便在其中再添加一个切片。花了几个小时后，我放弃了，因为在样机元素上浪费那么多时间根本没有意义。

如果你想继续你的模型到实际设计，那么你可以试试 Maqetta。它是免费的，让您可以轻松地将 html/javascript 元素放置在包括 ipad 和 iphone 在内的许多布局中。但是，您可以猜到，它比简单的模型过程需要更多的努力。

我认为仍然需要一个完整的模型解决方案，它将便宜/非常易于使用/丰富的 gui 元素/可扩展，并允许您在该模型上继续您的实际设计。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-24T05:33:46.107

Lucid Chart 有一个 google chrome 应用程序和一个免费版本，但我不记得它的局限性。我确实特别记得它有一些 UI 布局库，尽管我不知道它们有多广泛。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-24T05:42:42.263

我一直是[Balsamiq](http://www.balsamiq.com/)的粉丝，虽然它可能不符合低成本的条件......

# php - 由于 PHP 5.3 中的弃用，分隔符和将 split 转换为 preg_split

> ID：10292215
> 
> 赞同：0
> 
> 时间：2012-04-24T05:32:03.177
> 
> 标签：php, deprecated

由于 PHP 5.3 中的弃用，要将 split 转换为 preg_split，请执行以下操作：

```
$temp_array = split("\s*;\s*", $string);
$temp_array = preg_split("/\s*;\s*/", $string); 
```

请注意 preg_split 所需的分隔符“/”。

```
$temp_array = split($needle, $string);
$temp_array = preg_split($needle, $string); 
```

“$needle”是否也需要分隔符？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T05:44:42.200

是的，`$needle`如果您要使用，必须是正则表达式`preg_split`。正则表达式需要分隔符。

如果它*不是*您需要拆分的正则表达式，请使用[`explode()`](http://www.php.net/manual/en/function.explode.php).

# codeigniter - 在多视图codeigniter中加载多个外部图像和js

> ID：10292218
> 
> 赞同：0
> 
> 时间：2012-04-24T05:32:30.520
> 
> 标签：codeigniter

[编辑问题]

好的，对不起我的令人困惑的问题。实际上我想在视图文件夹中找到我的 image/css/js。如果我通过 using 加载`<script src="application/views/script.js" />`，则会出现 403 禁止消息。最近我在这里找到了答案[https://stackoverflow.com/a/6573951/842264](https://stackoverflow.com/a/6573951/842264)。但是编辑 htaccess 是否安全？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T12:55:17.990

尝试使用[William 的概念模板库](http://williamsconcepts.com/ci/codeigniter/libraries/template)。这适用于 Codeigniter 2+。

您需要使用`add_js`模板的功能。这在这里讨论： [http ://williamsconcepts.com/ci/codeigniter/libraries/template/reference.html#utilities](http://williamsconcepts.com/ci/codeigniter/libraries/template/reference.html#utilities)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T05:31:27.587

那么有两种简单的方法。第一种方法

在 ci 主文件夹中创建一个文件夹 assets，其中应包含 3 个文件夹 css 、 images 和 scripts 现在转到 config/constants.php 并在那里定义一个常量，比如说 JS

```
define('JS','http://localhost.com/myapp/assets/scripts'); 
```

现在在你的视图文件中只写

```
<script type="text/javascript" src="<?php echo JS?>/myfile.js"></script> 
```

它将被加载。另一种方法是去 config.config.php 更改基本 url

```
$config['base_url'] = 'http://localhost/task/';
$config['js'] = 'assets/js'; 
```

现在在控制器中

```
$data['js'] = $this->config->item('base_url').$this->config->item('js'); 
```

现在在视野中

```
<script type="text/javascript" src="<?php echo $js?>/myfile.js"></script> 
```

# c# - asp 的网址：图片搞砸了

> ID：10292228
> 
> 赞同：2
> 
> 时间：2012-04-24T05:33:16.213
> 
> 标签：c#, jquery, asp.net, html, url

我正在向我的页面动态添加用户控件：

*   当用户点击按钮时，jquery ajax 方法执行，它调用我的 web 方法
*   web 方法返回我的用户控件呈现为字符串
*   在 ajax 调用的成功部分，接收到的 html 被附加到占位符

呈现我的用户控件的方法：

```
public static string RenderUserControlAsString(string path)
{
    var page = new PageOverride();
    var viewControl = (UserControl)page.LoadControl(path);
    page.Controls.Add(viewControl);
    var output = new StringWriter();
    HttpContext.Current.Server.Execute(page, output, true);
    return output.ToString();
} 
```

这工作正常，但我的 asp:Image 元素的 ImageUrl 有问题（我的用户控件包含多个元素，而 asp:Image 只是其中之一）：

```
<asp:Image ID="imgDelete" runat="server" ImageUrl="~/images/delete.gif" onmouseover="this.style.cursor='hand'" onmouseout="this.style.cursor='default'"/> 
```

被`ImageUrl`转换为`../images/delete.gif`，这是不行的。实际上，`ImageUrl`总是在它前面收到两个点和一个斜线。任何想法如何防止这种情况？

编辑 - 项目结构：

**根：**

*   图片
    *   删除.gif
    *   ...
*   网页控件
    *   MyWebControl.ascx
    *   ...
*   MyWebService.asmx
*   我的页面.aspx

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T06:57:51.420

当用户控件被添加到 aspx 网页时，它会查找与您的网页路径相关的图像，带有正斜杠的两个点`../`表示返回 1 步，在您的情况下，它会搜索对您的网页和文件夹都`../images/delete.gif`无效的图像下。`MyPage.aspx``images``root`

将您的用户控件和网页放在同一文件夹中或将路径更改为`images/delete.gif`.

**编辑：**以下层次结构不需要您将用户控件/网页放在同一文件夹中或更改文件夹路径`images`。

根：

*   图片

    删除.gif ...

*   网页控件

    MyWebControl.ascx ...

*   网页

    我的页面.aspx

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T05:52:11.620

现在我只是在我的 web 控件中添加了一个覆盖方法：

```
protected override void OnPreRender(EventArgs e)
{
      base.OnPreRender(e);

      // Don't use ImageUrl, set fixed src attribute.
      imgDelete.Attributes["src"] = "images/delete.gif";
} 
```

缺点是，图像仅显示在位于根文件夹中的页面上，但这对我有用。

另一种方法是使用 jquery livequery 插件：

```
$('.Delete').livequery(function () {
    $(this).attr('src', 'images/delete.gif');
}); 
```

编辑 - 我也可以将 CssClass 设置为图像按钮并`background: url(../images/add.gif)`使用 css 设置...

# python - 网络共享上的间歇性“OSError：[Errno 2] 没有这样的文件或目录”

> ID：10292232
> 
> 赞同：1
> 
> 时间：2012-04-24T05:33:38.407
> 
> 标签：python, file, network-share

我正在运行几个脚本，这些脚本通过网络共享从同一个 CSV 文件中写入和读取。

我变得断断续续`OSError: [Errno 2] No such file or directory: 'filename.csv'`（每分钟或每两分钟，每 10-30 秒写入/读取一次），但大多数时候文件写入/读取工作正常。

有什么方法可以跟踪哪个脚本在何时打开文件，并获取有关错误的更多详细信息？即文件在使用中？它是否失去与文件服务器的连接？

* * *

## 使用进程监视器：

**普通操作（无错误信息）：**

```
2:33:52.4823608 PM  python.exe  2668    IRP_MJ_QUERY_VOLUME_INFORMATION filename.csv    SUCCESS Type: QueryDeviceInformationVolume, DeviceType: Disk, Characteristics: Remote
2:33:52.4823848 PM  python.exe  2668    IRP_MJ_QUERY_VOLUME_INFORMATION filename.csv    SUCCESS Type: QueryDeviceInformationVolume, DeviceType: Disk, Characteristics: Remote
2:33:52.4824062 PM  python.exe  2668    IRP_MJ_QUERY_VOLUME_INFORMATION filename.csv    BUFFER OVERFLOW Type: QueryInformationVolume, VolumeCreationTime: 1/1/1601 8:00:00 AM, VolumeSerialNumber: D020-FD78, SupportsObjects: False, VolumeLabel: DAT`
2:33:52.4827061 PM  python.exe  2668    IRP_MJ_QUERY_INFORMATION        filename.csv    BUFFER OVERFLOW Type: QueryAllInformationFile, CreationTime: 4/24/2012 2:36:07 PM, LastAccessTime: 4/24/2012 2:36:07 PM, LastWriteTime: 4/24/2012 2:36:07 PM, ChangeTime: 4/24/2012 2:36:07 PM, FileAttributes: A, AllocationSize: 1,048,576, EndOfFile: 118,342, NumberOfLinks: 1, DeletePending: False, Directory: False, IndexNumber: 0x45060de, EaSize: 0, Access: None, Position: 0, Mode: , AlignmentRequirement: Byte
2:33:52.4837725 PM  python.exe  2668    FASTIO_QUERY_INFORMATION        filename.csv    FAST IO DISALLOWED  Type: QueryStandardInformationFile
2:33:52.4837820 PM  python.exe  2668    IRP_MJ_QUERY_INFORMATION        filename.csv    SUCCESS Type: QueryStandardInformationFile, AllocationSize: 1,048,576, EndOfFile: 118,342, NumberOfLinks: 1, DeletePending: False, Directory: False
2:33:52.4841324 PM  python.exe  2668    FASTIO_QUERY_INFORMATION        filename.csv    FAST IO DISALLOWED  Type: QueryStandardInformationFile
2:33:52.4841458 PM  python.exe  2668    IRP_MJ_QUERY_INFORMATION        filename.csv    SUCCESS Type: QueryStandardInformationFile, AllocationSize: 1,048,576, EndOfFile: 118,342, NumberOfLinks: 1, DeletePending: False, Directory: False
2:33:52.4844948 PM  python.exe  2668    IRP_MJ_READ                     filename.csv    SUCCESS Offset: 117,318, Length: 1,024
2:33:52.4857179 PM  python.exe  2668    IRP_MJ_READ                     filename.csv    END OF FILE Offset: 118,342, Length: 4,096
2:33:52.4862472 PM  python.exe  2668    FASTIO_QUERY_INFORMATION        filename.csv    FAST IO DISALLOWED  Type: QueryStandardInformationFile
2:33:52.4862564 PM  python.exe  2668    IRP_MJ_QUERY_INFORMATION        filename.csv    SUCCESS Type: QueryStandardInformationFile, AllocationSize: 1,048,576, EndOfFile: 118,342, NumberOfLinks: 1, DeletePending: False, Directory: False
2:33:52.4867251 PM  python.exe  2668    IRP_MJ_READ                     filename.csv    SUCCESS Offset: 116,294, Length: 1,024
2:33:52.4873473 PM  python.exe  2668    IRP_MJ_READ                     filename.csv    SUCCESS Offset: 117,318, Length: 512
2:33:52.4878825 PM  python.exe  2668    FASTIO_QUERY_INFORMATION        filename.csv    FAST IO DISALLOWED  Type: QueryStandardInformationFile
2:33:52.4878917 PM  python.exe  2668    IRP_MJ_QUERY_INFORMATION        filename.csv    SUCCESS Type: QueryStandardInformationFile, AllocationSize: 1,048,576, EndOfFile: 118,342, NumberOfLinks: 1, DeletePending: False, Directory: False
2:33:52.4882153 PM  python.exe  2668    IRP_MJ_READ                     filename.csv    SUCCESS Offset: 115,270, Length: 1,024
2:33:52.4889601 PM  python.exe  2668    IRP_MJ_READ                     filename.csv    SUCCESS Offset: 116,294, Length: 512
2:33:52.4895164 PM  python.exe  2668    IRP_MJ_CLEANUP                  filename.csv    SUCCESS 
2:33:52.4895513 PM  python.exe  2668    IRP_MJ_CLOSE                    filename.csv    SUCCESS 
```

**在另一个程序中打开文件（Errno 13 - Permission Denied）：**

```
1:12:42.0840918 PM  python.exe  5772    IRP_MJ_CREATE   filename.csv    SHARING VIOLATION   Desired Access: Generic Write, Read Attributes, Disposition: OpenIf, Options: Synchronous IO Non-Alert, Non-Directory File, Attributes: N, ShareMode: Read, Write, AllocationSize: 0 
```

**杂项错误**（不确定这是否对应于 python 错误）

```
2:57:59.9371101 PM  python.exe  3584    IRP_MJ_CREATE   filename.log    BAD NETWORK PATH    Desired Access: Generic Read, Disposition: Open, Options: Synchronous IO Non-Alert, Non-Directory File, Attributes: N, ShareMode: Read, Write, AllocationSize: n/a 
```

这会显示为 OSError 2 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T04:51:57.427

如果您使用的是 Windows，请使用[Process Monitor](http://technet.microsoft.com/en-us/sysinternals/bb896645)记录 Python.exe 进程完成的所有文件操作。如果您使用的是 Mac OS X 或 Solaris，请使用[DTrace](http://dtrace.org/blogs/about/)。如果您使用的是 Linux，请使用[strace](http://linux.die.net/man/1/strace)。

这些工具中的任何一个都会为您提供正在执行的所有系统调用的详细列表以及它们的返回代码，从而使您可以缩小失败的范围以及可能的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T05:38:25.353

作为一种解决方法，您可以使用异常处理 (try/except) 包装代码

真正的解决方案更复杂 - 同步脚本。这就是我要做的：编写一个监听命令（例如 UDP 或 SimpleXMLRPCServer）的代理脚本。其他脚本与之通信。对共享文件的所有操作都是通过代理完成的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T08:08:59.940

ftp 共享是如何创建的？组织的“打开”文件是如何进行的？

a) 尝试根据[pep 343](http://www.python.org/dev/peps/pep-0343/)使用“with” 。

如果它不起作用：

b) 尝试使用两种方法制作您自己的 ftp 共享服务器 - 读取和
写入。您可以实现[非阻塞读取](http://en.wikipedia.org/wiki/Non-blocking_algorithm)算法。

> 非阻塞算法也可以安全地用于中断处理程序：即使被抢占的线程无法恢复，但没有它仍然可以继续进行。相反，受互斥保护的全局数据结构不能在处理程序中安全地访问，因为抢占线程可能是持有锁的线程。

# android - 如何获取列表中不在视图中的项目

> ID：10292240
> 
> 赞同：0
> 
> 时间：2012-04-24T05:34:18.210
> 
> 标签：android

我有一个列表视图，我的列表视图包含 3 个元素，两个文本视图和一个复选框，我的所有复选框默认为 true。现在，当我单击列表上的提交按钮时，我想获取所有选中的项目对应的文本视图信息，但我获取了在屏幕上可见的文本视图信息，但我的列表很长，所以我必须获取与其复选框对应的所有文本视图信息已检查，所以请帮我这样做。帮手肯定会得到一些奖励。

```
public class SendContactActivity extends Activity{
private Button cancelinfobtn,shareinfobtn;
private ListView user_detail_list;
private ArrayList<String> contactvalues_list,heading_list;
private MyContactAdapter contactadapter;

private String complete_userinformation; 
protected void onCreate(Bundle savedInstanceState) 
{
super.onCreate(savedInstanceState);
setContentView(R.layout.information_layout);
 user_detail_list=(ListView) findViewById(R.id.info_list_id);
 cancelinfobtn=(Button) findViewById(R.id.cancelinfobtn_id); 
 shareinfobtn=(Button) findViewById(R.id.sharebtninfo_id);
contactvalues_list=new ArrayList<String>();
heading_list=new ArrayList<String>();
  if(AddressBookResultHandler.person_name!=null)
  {
  heading_list.add("Name");
  contactvalues_list.add(AddressBookResultHandler.person_name[0]);
  }
  if(AddressBookResultHandler.phoneNumbers!=null)
  {
  heading_list.add("Number");
  contactvalues_list.add(AddressBookResultHandler.phoneNumbers[0]);
  }
  if(AddressBookResultHandler.addresses!=null)
  {
  heading_list.add("Address");
  contactvalues_list.add(AddressBookResultHandler.addresses[0]);
  }
  if(AddressBookResultHandler.emails!=null)
  {
  heading_list.add("Email Id");
  contactvalues_list.add(AddressBookResultHandler.emails[0]);
  }
  if(AddressBookResultHandler.person_organization!=null)
  {
  heading_list.add("Company ");
  contactvalues_list.add(AddressBookResultHandler.person_organization);
  }
  if(AddressBookResultHandler.person_website!=null)
  {
  heading_list.add("Website");
  contactvalues_list.add(AddressBookResultHandler.person_website);
  }
  if(AddressBookResultHandler.person_title!=null)
  {
      System.out.println("is i m in title");
  heading_list.add("Title");
  contactvalues_list.add(AddressBookResultHandler.person_title);
  }
  contactadapter=new MyContactAdapter(this,heading_list,contactvalues_list);
  user_detail_list.setDivider(null);
  user_detail_list.setAdapter(contactadapter);
  cancelinfobtn.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
        finish();   
        }
    });
  shareinfobtn.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
       int requestcode=0;
       complete_userinformation="";

       for(int i=0;i<user_detail_list.getCount();i++)
       {
           try {

           System.out.println("the list count"+user_detail_list.getCount());
           View v1=(View) user_detail_list.getChildAt(0);
           System.out.println("the value of i is:"+i);
           System.out.println("the view is"+v1);
           CheckBox ch=(CheckBox) v1.findViewById(R.id.checkBox1);

           if( ch.isChecked())
           {
            System.out.println("is last one chechbox is checked");
             TextView tv_heading=  (TextView) v1.findViewById(R.id.textView1);
             EditText tv_values= (EditText) v1.findViewById(R.id.textView2); 
          complete_userinformation=complete_userinformation+(String) (tv_heading.getText()+": "+tv_values.getText()+"\n");

       }

           }
           catch(Exception e)
           {
               System.out.println("exception of view is"+e);
           }
       } 
```

现在适配器类

```
 public class MyContactAdapter extends ArrayAdapter {
 ArrayList<String> userContact_List,userheading_list;
 private Context mcontext;  
 private View rowview;

 public MyContactAdapter(Context context, ArrayList< String> usercontactheading_list,ArrayList<String> usercontactvalue_list ) {
super(context,R.layout.detail_value_layout,usercontactheading_list);
userContact_List=new ArrayList<String>();
userheading_list=new ArrayList<String>();
userContact_List=usercontactvalue_list;
userheading_list=usercontactheading_list;
mcontext=context;
}

public View getView(int position, View convertView, ViewGroup parent) {

    LayoutInflater inflater = (LayoutInflater) mcontext
            .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    rowview = inflater.inflate(R.layout.detail_value_layout, parent, false);
    TextView textView_heading = (TextView) rowview.findViewById(R.id.textView1);
    EditText textview_value= (EditText) rowview.findViewById(R.id.textView2);

    CheckBox checkbox_detail=(CheckBox) rowview.findViewById(R.id.checkBox1);
    textView_heading.setText(userheading_list.get(position));
    textview_value.setText(userContact_List.get(position));
    return rowview;
}   

now xml file 
```

```
<TextView
    android:id="@+id/textView1"
    android:layout_width="70dp"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true"
    android:layout_marginLeft="10dp"
    android:layout_marginTop="18dp"
    android:textSize="16dp"
    android:text="TextView" />

<EditText
    android:id="@+id/textView2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentTop="true"
    android:layout_toLeftOf="@+id/checkBox1"
    android:layout_toRightOf="@+id/textView1"
     android:layout_marginLeft="5dp"

     android:clickable="false" 
    android:cursorVisible="false" 
    android:focusable="false" 
    android:focusableInTouchMode="false"
    android:inputType="textMultiLine" >

    <requestFocus />
</EditText>

<CheckBox
    android:id="@+id/checkBox1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentRight="true"
    android:layout_alignParentTop="true"
   android:layout_marginLeft="5dp"
   android:checked="true"
    android:text="" /> 
```

第二个xml

```
<Button
    android:id="@+id/sharebtninfo_id"
    android:layout_width="160dp"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_alignParentRight="true"
    android:text="Share" /> 
```

这是完整的资源，所以请帮助我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T05:40:36.510

您可以在文本视图中拥有一个包含所有数据的数组列表...并在单击列表视图项目时...检查复选框的状态..如果它处于未选中状态..从列表中删除该元素...或否则添加元素...然后您的列表中将包含所需的元素...

# c# - 使用泛型类型作为基类的静态成员

> ID：10292243
> 
> 赞同：0
> 
> 时间：2012-04-24T05:34:54.370
> 
> 标签：c#, static-members, generic-collections

我在类型的基类中有一个静态成员：

```
private static Dictionary<string, IEnumerable<T>> cachedList; 
```

这个通用成员应该在所有派生类中都可用。我不知道如何解决它。

编辑
将成员更改为受保护，并不能解决我的问题。
为了更清楚，我使用了这行代码

```
 public static void Cache(bool cached)
    {
        string value = typeof(T).ToString();

        if (cachedList == null)
            cachedList = new Dictionary<string, IEnumerable<T>>();
        ///some other things
    } 
```

但是每个派生类都有自己的副本，`cachedList`并且每个类都返回“真”的声明`cachedList == null`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-24T05:38:43.823

将此成员设为[`protected`](http://msdn.microsoft.com/en-us/library/bcd5672a%28v=vs.100%29.aspx)私有而不是私有。通过这种方式，您将能够在任何派生类型中访问*完全相同的字典实例。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T05:51:35.813

您是否在问如何创建一个通用类的静态成员，该成员在所有专业化（即 的所有值`T`）之间共享？如果是这样，请继续阅读：

你不能直接这样做，但是你可以添加一个额外的基类，你的基类继承自：

```
public class NonGenericBase
{
    private static Dictionary<string, IEnumerable<object>> cachedList = new Dictionary<string, IEnumerable<object>>();

    protected static IEnumerable<T> GetCachedList<T>(string key) {
        return (IEnumerable<T>)cachedList[key];
    }

    protected static void SetCachedList<T>(string key, IEnumerable<T> value)
        where T : class
    {
        cachedList[key] = (IEnumerable<object>)value;
    }
} 
```

`GetCachedList`然后将and的用法包装`SetCachedList`在泛型派生类中。

# java - Java：绘制函数图？

> ID：10292247
> 
> 赞同：0
> 
> 时间：2012-04-24T05:35:32.207
> 
> 标签：java, function, graph, grid

我有一个问题，我想用我键入的任何输入绘制一个函数图。但是我不熟悉 java 中的 y 坐标。我希望我的图得到负值！有人知道如何制作吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T06:26:03.797

默认情况下，java 2d 图形的原点即 (0,0) 位于屏幕的左上角。

要将其转换为屏幕中心，请使用 Graphics 类 [http://docs.oracle.com/javase/1.4.2/docs/api/java/awt/Graphics.html的以下方法](http://docs.oracle.com/javase/1.4.2/docs/api/java/awt/Graphics.html)

翻译（int x，int y）

例如。

```
 //if your graphics object is g:

g.translate(screen_width/2, screen_height/2);

//where
//screen_width is the width of your screen
//screen_height is the height of your screen 
```

# jsf-2 - 如何设置 PrimeFaces p:schedule 的初始日期？

> ID：10292250
> 
> 赞同：0
> 
> 时间：2012-04-24T05:35:36.933
> 
> 标签：jsf-2, primefaces

始终将`<p:schedule>`今天的日期显示为初始日期。我想将初始日期更改为任意日期。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T12:33:52.723

现在我能够显示我想从日历到日程表显示的日期

我用过

### 日历时间表

```
 <p:calendar   value="#{Bean.value}" />
            <br/>
      <p><p:commandButton oncomplete="dialog.show()" value="Submit"  update="display"/></p>

        <p:schedule id="display" initialDate="#{Bean.value}" view="agendaDay" widgetWar="dialog" /> 
```

对于 bean，我使用了 Getters & Setters，最后结果是

[http://i46.tinypic.com/2j26mvt.png](http://i46.tinypic.com/2j26mvt.png)

# ruby - 使用 koala 检查当前用户是否喜欢该页面

> ID：10292254
> 
> 赞同：1
> 
> 时间：2012-04-24T05:35:50.903
> 
> 标签：ruby, facebook, koala

我有一个应用程序，我只想为喜欢我页面的人工作。

```
@show = 0
@graph = Koala::Facebook::API.new(access_token)

page = @graph.get_object("MyPage")
user_likes = @graph.get_connections("me", "likes")

user_likes.each do |like|
  if like["id"] == page["id"]
    # user likes my page
    @show = 1
    break
  end
end 
```

这是我的代码，我的问题是如何获取我的应用程序的当前用户，“我”给了我我提供 access_token 的用户，那么我如何获取当前用户的访问令牌？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T07:01:59.497

据我所知，该代码应该像您想要的那样检查当前用户的喜欢。

`access_token`提供的 to应该`Koala::Facebook::API.new(access_token)`是应用程序当前用户的访问令牌。唯一不正确的方法是，如果您使用的是[应用程序访问令牌](http://developers.facebook.com/docs/authentication/applications/)，它实际上只需要代表您的应用程序执行诸如管理您[的实时更新之](http://developers.facebook.com/docs/reference/api/realtime/)类的事情。在这种情况下，您不应该使用它。

如果您*使用*的是应用程序访问令牌，则应改为使用 Facebook JavaScript SDK 或 OAuth 重定向流来授权当前用户并获取他们的访问令牌。然后，您可以在应用程序中的其他任何地方使用此访问令牌来完成用户会话的其余部分。[Koala wiki](https://github.com/arsduo/koala/wiki/OAuth)提供了有关获取用户访问令牌的两种方法的一些信息。

# jmx - 基本的 JMX 应用程序

> ID：10292256
> 
> 赞同：1
> 
> 时间：2012-04-24T05:36:02.007
> 
> 标签：jmx

我是 JMX 的新手，正在尝试创建一个简单的示例。我正在创建基本的 JMX 应用程序。我有执行以下操作的 Server.java：

```
JMXServiceURL url = new JMXServiceURL(
"service:jmx:rmi:///jndi/rmi://localhost:9999/server");
JMXConnectorServer cs =
JMXConnectorServerFactory.newJMXConnectorServer(url, null, mbs);

// Start the RMI connector server
echo("\nStart the RMI connector server");
cs.start(); 
```

并在 cs.start() 上收到以下错误消息。

```
 java.io.IOException: Cannot bind to URL [rmi://localhost:9999/server]: javax.naming.ServiceUnavailableException [Root exception is java.rmi.ConnectException: Connection refused to host: localhost; nested exception is: 
    java.net.ConnectException: Connection refused: connect]
    at javax.management.remote.rmi.RMIConnectorServer.newIOException(RMIConnectorServer.java:804)
    at javax.management.remote.rmi.RMIConnectorServer.start(RMIConnectorServer.java:417)
    at Server.main(Server.java:93)
Caused by: javax.naming.ServiceUnavailableException [Root exception is java.rmi.ConnectException: Connection refused to host: localhost; nested exception is: 
    java.net.ConnectException: Connection refused: connect]
    at com.sun.jndi.rmi.registry.RegistryContext.bind(RegistryContext.java:126)
    at com.sun.jndi.toolkit.url.GenericURLContext.bind(GenericURLContext.java:208)
    at javax.naming.InitialContext.bind(InitialContext.java:400)
    at javax.management.remote.rmi.RMIConnectorServer.bind(RMIConnectorServer.java:625)
    at javax.management.remote.rmi.RMIConnectorServer.start(RMIConnectorServer.java:412) 
```

在我的 glassfish 服务器中，我添加了以下属性：

```
-Dcom.sun.management.jmxremote.ssl.need.client.auth=false
-Dcom.sun.management.jmxremote.authenticate=false
-Dcom.sun.management.jmxremote.ssl=false
-Dcom.sun.management.jmxremote.port=9999 
```

请告诉我缺少什么。

## 编辑：

也在使用 RMI 服务器执行时..

`-Dcom.sun.management.jmxremote.port=9999'`RMI 服务器上的命令，我收到以下错误：`C:\Program Files\Java\jdk1.6.0_17\bin>java -Dcom.sun.management.jmxremote.port=9999 Error: Password file not found: C:\Program Files\Java\jdk1.6.0_17\jre\lib\management\jmxremote.password`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T11:05:09.877

参考[http://docs.oracle.com/javase/7/docs/technotes/guides/jmx/tutorial/connectors.html#wp1056865](http://docs.oracle.com/javase/7/docs/technotes/guides/jmx/tutorial/connectors.html#wp1056865) 里面的内容教如何运行基本的JMX应用程序，

* * *

编译 Java 类。
$ javac *.java

在本地主机的端口 9999 上启动 RMI 注册表。服务器将使用 RMI 注册表来注册 RMI 连接器存根。
$ rmiregistry 9999 &

启动服务器类。
$ java -classpath 。服务器

在另一个终端窗口中启动 Client 类。
$ java -classpath 。客户

# blackberry - 如何在黑莓中重新排列 ListField

> ID：10292259
> 
> 赞同：0
> 
> 时间：2012-04-24T05:36:13.997
> 
> 标签：blackberry, listfield

如何重新排列[ListField](http://www.blackberry.com/developers/docs/4.3.0api/net/rim/device/api/ui/component/ListField.html)的项目？我想在 Blackberry (Storm and Torch) Touch Phones 上点击选择该项目。选择后我想（移动和拖动）在另一个列表项（列表项在背景中垂直滚动）或屏幕上垂直滚动项目。滚动后，将项目放在（列表字段中）屏幕上的任何位置。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T14:19:26.347

我最近也在做自定义[`ListField`](http://www.blackberry.com/developers/docs/4.3.0api/net/rim/device/api/ui/component/ListField.html)，希望下面的代码对你有所帮助。

在下面的示例中，我自定义了 a来为支持触摸和非触摸 BB 设备[`VerticalFieldManager`](http://www.blackberry.com/developers/docs/5.0.0api/net/rim/device/api/ui/container/VerticalFieldManager.html)创建一个。[`ListField`](http://www.blackberry.com/developers/docs/4.3.0api/net/rim/device/api/ui/component/ListField.html)

[`ListField`](http://www.blackberry.com/developers/docs/4.3.0api/net/rim/device/api/ui/component/ListField.html)可以更改项目的位置-

> *-- 只需**拖动**一个项目**并拖放**到另一个项目上[`ListField`](http://www.blackberry.com/developers/docs/4.3.0api/net/rim/device/api/ui/component/ListField.html)（对于 支持**触摸**的设备）*

或者

> *--在第一个项目上**按空格键**，然后在第二个项目上按空格键（**对于触摸和非触摸**设备）。*

**（触摸）拖放**的示例屏幕截图如下：

![支持触控](../Images/3fcfd0ba70c1bd033fefee88be8f0092.png)

**（非触摸）空格键按下**示例屏幕截图：

![非触摸](../Images/b203121d71a1e188d63f1364b5800fe5.png)

在这个示例中，我实现了**垂直滚动**，[`ListField`](http://www.blackberry.com/developers/docs/4.3.0api/net/rim/device/api/ui/component/ListField.html)还创建了一个**传统的滚动条**。

这是我的[`ListField`](http://www.blackberry.com/developers/docs/4.3.0api/net/rim/device/api/ui/component/ListField.html)自定义示例屏幕的代码：

```
import net.rim.device.api.system.Characters;
import net.rim.device.api.ui.Field;
import net.rim.device.api.ui.Font;
import net.rim.device.api.ui.Graphics;
import net.rim.device.api.ui.TouchEvent;
import net.rim.device.api.ui.XYEdges;
import net.rim.device.api.ui.component.LabelField;
import net.rim.device.api.ui.component.ListField;
import net.rim.device.api.ui.component.ListFieldCallback;
import net.rim.device.api.ui.component.ObjectListField;
import net.rim.device.api.ui.container.MainScreen;
import net.rim.device.api.ui.container.VerticalFieldManager;
import net.rim.device.api.ui.decor.BackgroundFactory;
import net.rim.device.api.ui.decor.Border;
import net.rim.device.api.ui.decor.BorderFactory;

public class ListTestScreen extends MainScreen {
    private VerticalFieldManager mainManager = new VerticalFieldManager( USE_ALL_WIDTH |FIELD_HCENTER);
    public ListTestScreen() {
        mainManager.setBackground(BackgroundFactory.createSolidBackground(0x808080));
        LabelField lblTitle = new LabelField("FIFA World Cup Country List:",FIELD_HCENTER);
        lblTitle.setBackground(BackgroundFactory.createSolidBackground(0xF0F0F0));
        XYEdges edges = new XYEdges(2, 2, 2, 2);
        lblTitle.setBorder(BorderFactory.createRoundedBorder(edges, 0xB0B0B0, Border.STYLE_FILLED));
        mainManager.add(lblTitle);
        mainManager.add(new MyList());
        LabelField lblOther = new LabelField("Some Other Field",FIELD_HCENTER);
        lblOther.setBackground(BackgroundFactory.createSolidBackground(0xF0F0F0));
        lblOther.setBorder(BorderFactory.createRoundedBorder(edges, 0xB0B0B0, Border.STYLE_FILLED));
        mainManager.add(lblOther);
        add(mainManager);
    }
}

class MyList extends VerticalFieldManager implements ListFieldCallback {
    private int  mouseDownY, mouseUpY;
    private static int listRowHeight = 30;
    private int mouseDownRowIndex, mouseUpRowIndex;
    int firstSelectedRow=-1, secondSelectedRow=-1;
    private int touchX;
    private int touchY;
    private int listVisibleHeight = 250;
    private int listVisibleWidth = 200;

    private boolean showShadow = false;

    private ObjectListField list;
    private Object[] listData = new Object[] { "South Africa", "Argentina", "Germany",
            "Australia","Nigeria","Greece","England","Italy","Brazil","Spain","Paraguay","France","Uruguay",
            "Mexico","Cameroon","Denmark","Portugal","Netherlands","Ghana","Chile",
            "South Korea","USA","Algeria","Slovenia","Japan","Switzerland","Honduras"};

    public MyList() {
        super(VERTICAL_SCROLL|FIELD_HCENTER);
        init();
        setBackground(BackgroundFactory.createSolidBackground(0xF0F0F0));
        XYEdges edges = new XYEdges(6, 6, 6, 6);
        setBorder(BorderFactory.createRoundedBorder(edges, 0xB0B0B0, Border.STYLE_FILLED));
    }

    private void init() {
        list = new ObjectListField(FOCUSABLE|Field.FIELD_HCENTER);
        list.setRowHeight(listRowHeight);
        list.setCallback(this);
        list.set(listData);
        add(list);
    }

    private void changeRowPosition(int fromRow, int toRow) {
        Object temp = listData[fromRow];
        int increment = (fromRow<toRow)?1:-1, i;
        for(i = fromRow+increment; i != toRow+increment ; i=i+increment) {
            listData[i-increment] = listData[i];
        }
        listData[toRow] = temp;
        invalidate();
    }

    public void drawListRow(ListField listField, Graphics graphics, int index,
            int y, int width) {
        graphics.setFont(Font.getDefault().derive(Font.PLAIN, listRowHeight-8));
        graphics.drawText(listData[index].toString(), 25, y + 4);

    }

    public Object get(ListField listField, int index) {
        return listData[index];
    }

    public int getPreferredWidth(ListField listField) {
        return getPreferredWidth();
    }

    public int indexOfList(ListField listField, String prefix, int start) {
        return 0;
    }

    public int indexOfRowAt(int posY) {
        int index =(int) Math.floor(posY / listRowHeight * 1.0); 
        return index;
    }

    protected void sublayout(int maxWidth, int maxHeight) {     
        super.sublayout(listVisibleWidth, listVisibleHeight);
        setExtent(listVisibleWidth, listVisibleHeight);
    }

    protected boolean keyChar(char ch, int status, int time) {
        if(ch==Characters.SPACE) {
            if(firstSelectedRow ==-1) {
                firstSelectedRow = list.getSelectedIndex();
                return true;
            } else {
                secondSelectedRow = list.getSelectedIndex();
                if(firstSelectedRow == secondSelectedRow) {
                    firstSelectedRow = secondSelectedRow = -1;
                    invalidate();
                    return true;
                } else {
                    changeRowPosition(firstSelectedRow, secondSelectedRow);
                    firstSelectedRow = secondSelectedRow = -1;
                    return true;
                }
            }
        }
        return super.keyChar(ch, status, time);
    }

    protected boolean navigationMovement(int dx, int dy, int status, int time) {
        invalidate();
        return super.navigationMovement(dx, dy, status, time);
    }

    protected boolean touchEvent(TouchEvent message) {
        int eventCode = message.getEvent();

        // Get the screen coordinates of the touch event
        touchX = message.getX(1);
        touchY = message.getY(1)+getVerticalScroll();

        if(eventCode == TouchEvent.DOWN) {
            mouseDownY = touchY;
            mouseDownRowIndex = indexOfRowAt(mouseDownY);
            showShadow = true;

            invalidate();
            return true;
        }        
        else if(eventCode == TouchEvent.UP) {
            showShadow = false;
            mouseUpY = touchY;
            mouseUpRowIndex = indexOfRowAt(mouseUpY);
            if(mouseDownRowIndex != mouseUpRowIndex) {
                changeRowPosition(mouseDownRowIndex, mouseUpRowIndex);
                mouseDownRowIndex = mouseUpRowIndex = -1;
                invalidate();
                return true;
            }
            mouseDownRowIndex = mouseUpRowIndex = -1;
            invalidate();
            return true;
        } else if(eventCode == TouchEvent.MOVE) {
            int index = indexOfRowAt(touchY-listRowHeight/2);
            if(touchY-getVerticalScroll()<5) {
                if(index > 0) {
                    index--;
                }
            } else if(touchY> (getPreferredHeight()-5)) {
                if(index<listData.length-1) {
                    index++;
                }
            }

            if(list.getSelectedIndex()!=index)
                list.setSelectedIndex(index);
            invalidate();
            return true;
        }
        return super.touchEvent(message);
    }

    protected void paint(Graphics graphics) {
        // Save the original color and transparency values for the graphics
        int preColor = graphics.getColor();
        int preAlpha = graphics.getGlobalAlpha();

        if(firstSelectedRow!=-1) {
            int y = firstSelectedRow*listRowHeight;
            graphics.setColor(0x808080);
            graphics.fillRect(0, y, getWidth(), listRowHeight);
        }

        // Reset the previous color and transparency values for this graphics
        graphics.setColor(preColor);
        graphics.setGlobalAlpha(preAlpha) ;

        super.paint(graphics);

        if(firstSelectedRow != -1) {
            int index = list.getSelectedIndex();            
            int y = index*listRowHeight;
            String shadowText = listData[firstSelectedRow].toString();
            Font preFont = graphics.getFont();
            Font smallFont = preFont.derive(Font.BOLD, preFont.getHeight()-5);
            y += (listRowHeight-smallFont.getHeight())/2;
            graphics.setFont(smallFont);
            int shadowTextLength = smallFont.getAdvance(shadowText);
            graphics.setColor(0xE0E0E0);
            graphics.setGlobalAlpha(100) ;
            graphics.fillRoundRect(getWidth()/2-2, y, shadowTextLength+4, smallFont.getHeight(), 10, 10);
            graphics.setColor(0x303030);
            graphics.setGlobalAlpha(170) ;
            graphics.drawText(shadowText, getWidth()/2, y);
            graphics.setFont(preFont);
        }

        // Drawing the first selected SHADOW TEXT
        if(showShadow && mouseDownRowIndex != -1) {
            String shadowText = listData[mouseDownRowIndex].toString();
            Font preFont = graphics.getFont();
            Font smallFont = preFont.derive(Font.BOLD, preFont.getHeight()-5);
            graphics.setFont(smallFont);
            int shadowTextLength = smallFont.getAdvance(shadowText);
            graphics.setColor(0xE0E0E0);
            graphics.setGlobalAlpha(100) ;
            graphics.fillRoundRect(touchX+10, touchY-smallFont.getHeight()/2, shadowTextLength, smallFont.getHeight(), 10, 10);
            graphics.setColor(0x303030);
            graphics.setGlobalAlpha(170) ;
            graphics.drawText(shadowText, touchX+10, touchY-smallFont.getHeight()/2);
            graphics.setFont(preFont);
        }

        // Drawing the VERTICAL SCROLLBAR
        graphics.setColor(0x606060);
        graphics.drawLine(getWidth()-18, getVerticalScroll(), getWidth()-18,getVerticalScroll()+getHeight());
        graphics.drawLine(getWidth()-17, getVerticalScroll(), getWidth()-17,getVerticalScroll()+getHeight());
        graphics.drawLine(getWidth()-16, getVerticalScroll(), getWidth()-16,getVerticalScroll()+getHeight());
        int listTotalHeight = listRowHeight * (listData.length+5);
        int y = list.getSelectedIndex()*listRowHeight ;
        int yScrollPosition = (int)Math.floor(((y*getHeight()*1.0)/listTotalHeight*1.0));
        graphics.fillRoundRect((getWidth()-17)-4, getVerticalScroll()+yScrollPosition, 8, listRowHeight, 2, 2);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T05:29:42.287

我也在处理自定义列表字段。只需单击列表项。点击 U 后可以垂直移动（选中）listItem。如果您想在屏幕上放置任何位置而不是再次单击触控板。当您单击它时，它将被放置在该位置结帐。这是我的代码。

```
public class ListDemo extends MainScreen implements ListFieldCallback {
private VerticalFieldManager vfm, vfm_List;
private ListField myList;
private Vector vector;
private String[] str_arr;
int Height = Display.getHeight();
int Width = Display.getWidth();
int i ;
boolean bool = true;
int index = 0;
private boolean hasFocus = false;
private boolean b = true;
public static int curSelected ;
Channel obj; 

public ListDemo() {
    vector = new Vector();
    for (i = 0; i < 8; i++) {
        obj = new Channel();
        if (i == 0) {
            obj.setCh_icon("ajtak.jpg");
            obj.setCh_Name("NightSuite");
            obj.setCh_Move("move.png");

        } else if (i == 1) {
            obj.setCh_icon("cnbc.jpg");
            obj.setCh_Name("Shirts");
            obj.setCh_Move("move.png");

        } else if (i == 2) {
            obj.setCh_icon("zee.jpg");
            obj.setCh_Name("Jeans");
            obj.setCh_Move("move.png");

        } else if (i == 3) {
            obj.setCh_icon("astha.jpg");
            obj.setCh_Name("Bags");
            obj.setCh_Move("move.png");

        }else if (i == 4) {
            obj.setCh_icon("fox_news.jpg");
            obj.setCh_Name("Coat");
            obj.setCh_Move("move.png");

        }else if (i == 5) {
            obj.setCh_icon("news.jpg");
            obj.setCh_Name("Coat");
            obj.setCh_Move("move.png");

        } else if (i == 6) {
            obj.setCh_icon("star_news.jpg");
            obj.setCh_Name("Coat");
            obj.setCh_Move("move.png");

        } else {
            obj.setCh_icon("assiant.jpg");
            obj.setCh_Name("Shorts");
            obj.setCh_Move("move.png");
        }
        vector.addElement(obj);
    }
    init();
}

public void init() {

    vfm = new VerticalFieldManager(USE_ALL_HEIGHT | USE_ALL_WIDTH) {

        protected void sublayout(int maxWidth, int maxHeight) {
            super.sublayout(maxWidth, maxHeight);
            setExtent(Width, Height);
        }
    };

    vfm_List = new VerticalFieldManager(VERTICAL_SCROLL
            | VERTICAL_SCROLLBAR) {
        protected void sublayout(int maxHeight, int maxWidth) {
            super.sublayout(maxWidth, maxHeight);
            setExtent(Width, Height);
        }
    };
    myList = new ListField()
    {
        public  void onFocus(int direction){  
          hasFocus = true;

        }
        public void onUnfocus()   
        {
            hasFocus = false;  
            super.onUnfocus();  
            invalidate();  
        }  
         public void paint(Graphics g) {
             if (hasFocus)   
              {  
                   curSelected = getSelectedIndex(); 

              }   
              else   
              {  
                  curSelected = -1;  
              } 
             super.paint(g);

        }
    };
    myList.setCallback(this);
    myList.setRowHeight(50);
    myList.setFocusListener(new FocusChangeListener() {
        public void focusChanged(Field field, int eventType) {

            if (bool == false) {
                index = myList.getSelectedIndex();
                Channel temp = (Channel) vector
                    .elementAt(index);
                vector.removeElementAt(index);
                vector.insertElementAt(temp, curSelected);
                myList.invalidate();

            }

        }

    });
    for (int i = 0; i < vector.size(); i++) {
        myList.insert(i);

    }
    vfm_List.add(myList);
    vfm.add(vfm_List);
    add(vfm);

}
protected boolean navigationClick(int status, int time) {
    if(bool)
    {
        bool = false;
    }
    else
    {
        bool = true;
    }

return true;
} 

public void drawListRow(ListField list, Graphics g, int index, int y, int w) 
{
    String text = ((Channel) vector.elementAt(index)).getCh_Name();
    Bitmap arrow = Bitmap.getBitmapResource(((Channel) vector.elementAt(index)).getCh_icon());
    if(bool == false)
    {
        if (g.isDrawingStyleSet(Graphics.DRAWSTYLE_FOCUS))
        {
            Bitmap move = Bitmap.getBitmapResource(((Channel) vector.elementAt(index)).getCh_Move());
            g.drawBitmap(Width - 40, y + 13, 25, 25, move, 0, 0);

        }
    }
    g.setBackgroundColor(Color.LIGHTBLUE);
    g.setColor(Color.BLACK);
    g.drawBitmap(0, y + 10, 48, 35, arrow, 0, 0);
    g.drawText(text, 50, y + 18, 0, w);
    g.setColor(Color.WHITE);
    invalidate();

}

public Object get(ListField list, int index) {
    return vector.elementAt(index);
}

public int indexOfList(ListField list, String p, int s) {
    return vector.indexOf(p, s);
}

public int getPreferredWidth(ListField list) {
    return Graphics.getScreenWidth();
}

public void insert(String toInsert, int index) {
    vector.addElement(toInsert);
}

public void erase() {
    vector.removeAllElements();
} 
```

}

这是另一个频道类

```
public class Channel {

private String ch_Name;
private String ch_icon;
private String ch_move;

public String getCh_Name() {
    return ch_Name;
}
public void setCh_Name(String ch_Name) {
    this.ch_Name = ch_Name;
}
public String getCh_icon() {
    return ch_icon;
}
public void setCh_icon(String ch_icon) {
    this.ch_icon = ch_icon;
}
public String getCh_Move() {
    return ch_move;
}
public void setCh_Move(String ch_move) {
    this.ch_move = ch_move;
} 
```

}

检查它在 touch 和 nontouch 上的工作。

# php - jQuery自动完成问题

> ID：10292260
> 
> 赞同：0
> 
> 时间：2012-04-24T05:36:16.593
> 
> 标签：php, jquery, ajax

大家好，我遇到了 jquery 自动完成问题。实际上，在开发人员给出的示例中运行良好，但是一旦我尝试在我的系统中实现它就无法正常工作；

```
<script type='text/javascript' src='scripts/jquery.autocomplete.js'></script></code>

<link rel="stylesheet" type="text/css" href="scripts/jquery.autocomplete.css" />

<script type="text/javascript">

$().ready(function() {

    jQuery("#coursex").autocomplete("get_course_list.php", {
        width: 260,
        matchContains: true,
        selectFirst: false
    });

});

</script>
<form autocomplete="off">
        <p>
            Course Namexx <label>:</label>

            <input type="text" name="course" id="coursex" />

            <!--input type="button" value="Get Value" /-->
        </p>

        <input type="submit" value="Submit" />
</form> 
```

问题是我在 firebug 中没有收到任何 javascript 错误，并且所有文件都包含在内。ajax 自动完成项目。你可以从网上下载。

任何关于如何调试、如何解决或任何其他没有 jquery 的产品的建议，只有 ajax 和 css。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T05:42:47.990

嗨，请在这里查看**演示**：http : [//jsfiddle.net/Xzy9T/](http://jsfiddle.net/Xzy9T/)

请同时包含 Jquery ui（如示例）&请确保您的 javascripts 的 src 是正确的，或者您可以在网上找到一个并添加参考。

**HTML**

```
 <p>

        Course Namexx <label>:</label>

        <input type="text" name="course" id="coursex" />

        <!--input type="button" value="Get Value" /-->

    </p>

    <input type="submit" value="Submit" />
​ 
```

**jQuery**

```
$( "#coursex" ).autocomplete({
    source: function( req, resp ) {
        $.post( "/echo/json/", {
            json: '["1", "2", "3", "4", "5"]',
            delay: 1
        }, function(data) {
            resp( data );
        }, "JSON" );
    }
});
​ 
```

![在此处输入图像描述](../Images/7efbaeca95d5b55b5cda657904b7f16f.png)

# c# - Visual C# - 字符串附加到字符串无法正常工作

> ID：10292269
> 
> 赞同：2
> 
> 时间：2012-04-24T05:37:17.150
> 
> 标签：c#, string, sockets, append

晚上好，

我有一个奇怪的问题。我对 Visual C# 不是很熟悉，但是我需要编写一个小套接字应用程序来启用与 iOS 应用程序的通信。请在下面查看我每次收到数据时触发的功能。

```
public void onDataReceived(IAsyncResult asyn)
    {
        // Debug.WriteLine("Receiving Data");
        try
        {
            CSocketPacket socketId = (CSocketPacket)asyn.AsyncState;
            int iRx = 0;
            iRx = socketId.thisSocket.EndReceive(asyn);
            char[] chars = new char[iRx + 1];
            Decoder d = Encoding.UTF8.GetDecoder();
            int charLen = d.GetChars(socketId.dataBuffer, 0, iRx, chars, 0);
            System.String szData = new System.String(chars);
            Debug.WriteLine(szData);
            stringVar += szData;
            Debug.WriteLine(stringVar);
            szData = "";
            startWaitingForData(socketWorker);
        }
        catch (ObjectDisposedException)
        {
            Debugger.Log(0, "1", "\n onClientConnection: Socket has been closed!\n");
        }
        catch (SocketException error)
        {
            Debugger.Log(0, "1", error.ToString());
        }
    } 
```

从 iphone 向套接字服务器发送消息效果很好。但是有一个问题。如果我发送 ae“消息测试”，第一个 Debug.WriteLine(szData) 会正确记录字符。（字节设置为字节[1]，因此对于每个字节，函数都会被调用）。但是，如果我将 szData 附加到我的 stringVar 属性，它将无法正常工作。Debug.WriteLine(stringVar) 将始终只记录第一个字符，在我的示例中它将记录“MMMMMMMMMMMM”（而不是“消息测试”）

不知道我在这里缺少什么。任何帮助都非常感谢。

谢谢 ：）

更新：在我的 startWaitingForData 函数下方：

```
public class CSocketPacket
    {
        public System.Net.Sockets.Socket thisSocket;
        public byte[] dataBuffer = new byte[1];
    }

    public void startWaitingForData(System.Net.Sockets.Socket soc)
    {
        // Debug.WriteLine("Start waiting for data");
        try
        {
            if (workerCallBack == null)
            {
                workerCallBack = new AsyncCallback(onDataReceived);
            }
            CSocketPacket socketPacket = new CSocketPacket();
            socketPacket.thisSocket = soc;
            soc.BeginReceive(socketPacket.dataBuffer, 0, socketPacket.dataBuffer.Length, SocketFlags.None, workerCallBack, socketPacket);
        }
        catch (SocketException error)
        {
            Debugger.Log(0, "1", error.ToString());
        }
    } 
```

对于 iphone 部分，我使用 ASCII 编码：

```
NSData *data = [[NSData alloc] initWithData:[message dataUsingEncoding:NSASCIIStringEncoding]]; 
```

stringVar 定义为：

```
private string stringVar; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T07:17:47.677

我认为需要更多信息才能深入了解这一点。

但是，iPhone 发送的是什么编码？

另外，请注意 iRx 将为您提供读取的字节数，但这并不一定等于读取的字符数，因为 UTF8 是一种多字节编码。

根据[MSDN](http://msdn.microsoft.com/en-us/library/system.text.utf8encoding.getdecoder.aspx)，您应该使用 GetCharCount 方法来获取您需要将数组大小设置为的字符数。

编辑：@Pascal 更新后

根据 Skeet 先生的评论，如果没有完整的版本来调试它，只能猜测问题所在。另外，您对

> 如果我发送 ae“消息测试”，第一个 Debug.WriteLine(szData) 会正确记录字符

如果您一次只发送一个字节，似乎不正确？

我建议以下作为尝试修复：

*   将缓冲区大小从 1 个字节增加到更合理的值，例如 256。您有什么理由强迫它一次执行 1 个字节？
*   你有一个递归元素，因为你的**onDataReceived**处理程序调用你的**startWaitingForData**，然后它执行 BeginRecieve; 确保您在接收之间重置局部变量等。

请注意，如果这是您的服务器的编码，您的 iPhone 客户端应该真正使用 UTF8。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T16:47:32.770

你总是只阅读第一个字节`socketId.dataBuffer`吗？

# linux - 无法从 putty 下载带有 curl 的 tar.gz 文件：EC2

> ID：10292272
> 
> 赞同：2
> 
> 时间：2012-04-24T05:37:58.157
> 
> 标签：linux, curl, amazon-ec2, amazon-web-services

我正在通过 putty 访问我的 EC2 实例（第一次），我正在尝试下载并安装 NLTK 包。

按照这个例子： http: [//gavinmhackeling.com/blog/2012/03/deploying-a-python-nltk-django-app-to-amazon-ec2/](http://gavinmhackeling.com/blog/2012/03/deploying-a-python-nltk-django-app-to-amazon-ec2/)

我用：`curl -O http://nltk.googlecode.com/files/nltk-2.0b7.tar.gz`

相反，我只是将“Putty Putty Putty.......Putty”输出到终端屏幕，我必须`CTRL C`返回命令提示符。

我是 EC2 的新手，我做错了什么？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T05:41:13.630

如果您尝试以下操作会发生什么？

```
wget http://nltk.googlecode.com/files/nltk-2.0b7.tar.gz 
```

# iphone - Iphone+FlipView 使用 presentmodalview 控制器未被调用

> ID：10292274
> 
> 赞同：0
> 
> 时间：2012-04-24T05:38:00.420
> 
> 标签：iphone, xcode

大家好，我已经编写了以下函数，该函数已附加到`UIButton`s Action.It 被调用并在单击按钮时按要求工作，但在类中的其他地方调用时不起作用。

```
-(void)punchcardDetailButtonClicked{
    NSLog(@"punchcardDetailButtonClicked");
    PunchCardDetailsViewController *punchCardDetailsViewController=[[PunchCardDetailsViewController alloc] initWithNibName:@"PunchCardDetailsViewController" bundle:nil];
    UINavigationController *nvcLocation=[[UINavigationController alloc] initWithRootViewController:punchCardDetailsViewController];
    punchCardDetailsViewController.modalTransitionStyle=UIModalTransitionStyleFlipHorizontal;
    UIColor* navBarColor = [UIColor colorWithRed:128.0/255.0 green:99.0/255.0 blue: 64.0/255.0 alpha:0.0];
    nvcLocation.navigationBar.tintColor = navBarColor;
    [self presentModalViewController:nvcLocation animated:YES];
    [nvcLocation release];
    [punchCardDetailsViewController release]; 
```

}

我已经在同一个类中使用了它，`[self punchcardDetailButtonClicked]`但这不能按预期工作。虽然，`NSlog`在这两种情况下都会打印出来。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T06:00:37.957

你必须展示视图控制器，使用这个

`[self presentModalViewController:punchCardDetailsViewController animated:YES];`

不是导航控制器，不是这个

```
[self presentModalViewController:nvcLocation animated:YES]; 
```

并且您将视图控制器作为根视图控制器添加到导航控制器，我认为您可以推送该控制器而不是提供过渡样式

并`[self punchcardDetailButtonClicked]`在调用它之前检查您是否在 .h 文件中声明了此方法

# java - 检查电子邮件扩展的最有效方法

> ID：10292284
> 
> 赞同：0
> 
> 时间：2012-04-24T05:39:09.890
> 
> 标签：java, android, email, email-validation

我正在 Android 中编写一个应用程序，它只允许用户注册一个帐户，前提是他们有一个特定的 .edu 电子邮件（例如 abc.edu）。我开始编写一些代码来验证这一点，但现在我想知道是否有任何方法可以使这更容易。我只参加了初学者 Java/编程课程，所以我不确定我正在做的事情是否完全错误。

这是我的伪代码：

```
Get length of inputted email.
if (
email.charat(length)-1 = u &&
email.charat(length)-2 = d &&
email.charat(length)-3 = e &&
email.charat(length)-4 = . &&
email.charat(length)-5 = c &&
email.charat(length)-6 = b &&
email.charat(length)-7 = a )

Success
else
Not a valid email 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T05:41:58.403

Java String 类有一个[`endsWith`](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/String.html#endsWith%28java.lang.String%29)你可以使用的方法：

```
if (email.endsWith("abc.edu") { ... } 
```

如果你有一个可编辑的，你可以：

```
if (email.toString().endsWith("abc.edu")) { ... } 
```

如果您想要不区分大小写，只需执行以下操作：

```
if (email.toString().toLowerCase().endsWith("abc.edu")) { ... } 
```

# jquery - 使用 jquery ajax 删除功能但未运行

> ID：10292285
> 
> 赞同：1
> 
> 时间：2012-04-24T05:39:10.063
> 
> 标签：jquery, ajax, http-delete

这是我使用 ajax 函数删除 li 元素的代码，但它不会给出任何输出。

```
jQuery.ajax({ 
  type: 'DELETE', 
  url: 'http://example.com', /* url */
  dataType: 'xml', 
  complete: function(response, statusText){ 
       if (statusText == 'success') { 
           jQuery('li.product input[value="B0070X7W9M"]').parent().remove(); 
           /* need to delete li element */
           }
     }
}); 
```

请帮助我，我是 jquery ajax 的新手。

# redis - Celery + 2 redis：代理和缓存

> ID：10292286
> 
> 赞同：0
> 
> 时间：2012-04-24T05:39:17.123
> 
> 标签：redis, celery

我所拥有的：1）标准端口上的 redis - 这是缓存 2）端口 53333 上的 redis - 这是代理

为什么 celery 成功获取任务，但不返回端口 53333？我可以通过标准端口上的 redis-cli 看到这个任务。你能帮我纠正'celeryconfig.py'吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T05:31:04.870

抱歉麻烦...按照插入到“celeryconfig.py”的字符串：

```
CELERY_RESULT_BACKEND = "redis" 
CELERY_REDIS_HOST = "localhost" 
CELERY_REDIS_PORT = 56379 
```

...和所有的工作。

# jquery - 在图像上重叠文本

> ID：10292289
> 
> 赞同：-1
> 
> 时间：2012-04-24T05:39:36.223
> 
> 标签：jquery, html, css

如果数据库中不存在用户名，我有一个注册表单，然后它会在我的文本框（厚标记图像）旁边显示一个图像，并且我想显示我的文本

“这个用户名已经存在”

```
$("#usr_verify").css({ "background-image": "url('<?php echo base_url();?>images/no.png')" });
$("#usr_verify2").text("it does not exist ::"); 
```

这两个选择器在两个不同的跨度中发送我的文本和图像，一个带有 id usr_verify，另一个带有 id usr_verify2

现在两个跨度标签都在一个段落标签中。现在我的错误是文本与图像重叠，文本出现在该图像上。知道我哪里出错了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T05:44:13.650

[如果不查看您的标记，或者可能是JsFiddle](http://jsfiddle.net/) ，很难准确判断发生了什么，但这里有一个尝试：

Spas 是内联元素，因此不能给出明确的高度和宽度。背景图像不是图像块，它假定显示整个图像所需的空间，但实际上只是填充了授予它们的任何区域。

尝试使用 a`img`而不是 a `span`，或尝试给出跨度`display: inline-block`，以便您可以将其宽度和高度设置为图像所需的任何值。

编辑：

[一个 JsFiddle 显示我的意思......](http://jsfiddle.net/B7Ukr/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T05:46:11.837

大卫是对的……很难说发生了什么……尤其是。考虑样式的 css 级联效果。您的网站在网络上可用吗？如果是这样链接，我很乐意查看标记，看看我是否可以提供帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T05:48:28.530

使用 padding 和 margin 调整你的文本，同时给出图像 display:inline 块；.

# android - 如何为具有最小尺寸的不同尺寸手机创建应用程序

> ID：10292293
> 
> 赞同：2
> 
> 时间：2012-04-24T05:39:55.200
> 
> 标签：android, apk

我是 android 新手，我看到不同手机有 ldpi、mdpi、hdpi 和 xdpi 等文件夹。如果我将不同大小的图像放在这些文件夹中，则应用程序的大小会增加。

这个问题的解决方案是什么。我还注意到在 bin 文件夹中创建了一个 res 文件夹的一件事。是否也会影响应用程序的大小。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T05:56:30.740

如果您想针对所有设备类型（ldpi、mdpi、hdpi 和 xhdpi），最好为每个配置提供不同的资源。如果您有所有这些设备共有的资源，您可以将它们复制到没有配置限定符的相应文件夹（`drawable`例如文件夹）

但是，您可以选择根据[多 APK 支持](http://developer.android.com/guide/market/publishing/multiple-apks.html)的规定在 Google Play 中为不同的配置上传不同的 APK，尽管不“鼓励”这样做。

该`bin`文件夹是从项目的类和资源生成的。APK 是根据此文件夹的内容构建的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T05:52:37.870

别担心，你在正确的轨道上。

您可能还想在这里查看，因为这是“官方”方面对该主题的一个很好的概述：http: [//developer.android.com/guide/practices/screens_support.html](http://developer.android.com/guide/practices/screens_support.html)

真的，刚开始你的项目，但要确保你的可绘制 *.png 的分辨率和大小都可以，并且它们本身不会太大。例如，如果您需要 48x48，则不要制作 200x200 的图像文件，即使 Android 会毫无问题地使用它并对其进行缩放。

ps您也可能开始接受和/或支持答案以获得更多关注并“激励”用户帮助您。我一开始也不知道...

快乐编程

# iphone - 应用程序处于活动状态时的 iphone 本地通知

> ID：10292295
> 
> 赞同：0
> 
> 时间：2012-04-24T05:40:09.417
> 
> 标签：iphone, notifications

我正在为`iOS`5 开发一个聊天应用程序。我遇到了本地通知问题。当应用程序进入后台状态时，我正在使用以下代码：

```
 UILocalNotification *localNotification = [[UILocalNotification alloc] init];
  localNotification.alertAction = @"Ok";
  localNotification.alertBody = [NSString stringWithFormat:@"From: %@\n%@",message.sender,message.message];

  [[UIApplication sharedApplication] presentLocalNotificationNow:localNotification];
  [[UIApplication sharedApplication] scheduleLocalNotification:localNotification];
  [localNotification release]; 
```

但是当应用程序处于活动状态时，它不在聊天页面中，那么我也需要本地通知，但我使用了相同的代码，通知也出现在托盘中，但横幅没有出现......

请帮帮我...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T05:54:54.720

以下方法放入您的应用程序委托中

```
- (void)application:(UIApplication *)application didReceiveLocalNotification:(UILocalNotification *)notification 
{
    UILocalNotification *localNotif =notification;
    NSString *strBody=[localNotif.userInfo valueForKey:@"Body"];
    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Your Application name" 
                                                    message:strBody
                                                   delegate:self cancelButtonTitle:@"Ok" 
                                          otherButtonTitles:nil];
    [alert show];

    //NSLog(@"Incoming notification in running app");

    // Access the payload content
    //NSLog(@"Notification payload: %@", [notification.userInfo objectForKey:@"body"]);

    application.applicationIconBadgeNumber = 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T09:19:01.080

以下代码同时处理远程和本地通知

```
- (void)application:(UIApplication *)application didReceiveLocalNotification:(UILocalNotification *)notification
{
    [self showNotificationAlert:notification.alertBody];
}

- (void)application:(UIApplication *)application didReceiveRemoteNotification:(NSDictionary *)userInfo
{
    NSString *alertMsg = nil;
    id alert = [[userInfo objectForKey:@"aps"] objectForKey:@"alert"];

    if ([alert isKindOfClass:NSString.class])
        alertMsg = alert;
    else if ([alert isKindOfClass:NSDictionary.class])
        alertMsg = [alert objectForKey:@"body"];

    [self showNotificationAlert:alertMsg];
}

- (void)showNotificationAlert:(NSString *)alertMsg
{
    if (!alertMsg)
        return;

    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:NSLocalizedString(@"Message", nil)
                                                    message:alertMsg
                                                   delegate:self cancelButtonTitle:NSLocalizedString(@"OK", nil)
                                          otherButtonTitles:nil];
    [alert show];

    [UIApplication sharedApplication].applicationIconBadgeNumber = 0;
} 
```

# jquery - 固定页眉，页脚时如何对齐内容

> ID：10292296
> 
> 赞同：2
> 
> 时间：2012-04-24T05:40:24.197
> 
> 标签：jquery, android, jquery-mobile

我创建了一个带有固定页眉和页脚的简单 jquery 移动应用程序。它工作正常，但是内容重叠在标题上，因为内容应该显示在标题之后。这是我的标记：

```
<div data-role="page" data-fullscreen="true">
        <header data-role="header" data-position="fixed"> <h1>Header</h1></header>
        <div data-role="content" class="content">
            Contents
        </div>
        <footer data-role="footer" data-position="fixed">Footer</footer>
</div> 
```

如何对齐我的内容？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T06:11:27.633

设置`data-fullscreen="true"`更适用于图片。通过设计，它意味着有点透明并且位于内容之上。

我建议你摆脱 data-fullscreen="true"。不用担心您的工具栏仍然会固定，但不会与内容重叠。将您的标记更改为：

```
<div data-role="page">
    <header data-role="header" data-position="fixed"> <h1>Header</h1></header>
    <div data-role="content" class="content">
        Contents
    </div>
    <footer data-role="footer" data-position="fixed"><h1>Footer</h1></footer>
</div> 
```

# asp.net-mvc-3 - 如何在 MVC3 中为 Iframe 的 src 属性提供 html 文件的路径

> ID：10292297
> 
> 赞同：4
> 
> 时间：2012-04-24T05:40:29.083
> 
> 标签：asp.net-mvc-3, iframe

我在提供 IFrame src 的路径时遇到问题。

我将我的 html 文件保存在同一个目录中。但我仍然不明白

我是这样写的：

```
 <iframe id="iframe" frameborder="0" src="Dancing.htm" style="width: 100%; height: 700px;"></iframe> 
```

但是它给了我错误，因为找不到资源但是如果我写一个视图（.cshtml）页面而不是 HTM 页面，它会正确加载，我不明白为什么会发生这种情况

请帮我。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-24T06:08:55.883

您必须从 Views 文件夹中找到您的 *.html 文件。

创建 HTML 文件夹并将 Dancing.htm 文件复制到该文件夹

```
/HTML/Dancing.htm 
```

* * *

```
<iframe id="iframe" frameborder="0" src="@Url.Content("~/HTML/Dancing.htm")" style="width: 100%; height: 700px;"></iframe> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T06:02:10.157

查看这篇文章 - [URL 路由](http://weblogs.asp.net/scottgu/archive/2007/12/03/asp-net-mvc-framework-part-2-url-routing.aspx)。您的 cshtml 页面已路由。但是没有。因此，如果您添加带有目录名称的路径，它看起来会起作用。另一方面，您可以添加自定义路由器。但在我看来，将 htm 和 cshtml 放在同一个地方并不是一个好主意。

# android - 通过 Facebook 应用程序 Android 分享链接

> ID：10292300
> 
> 赞同：0
> 
> 时间：2012-04-24T05:40:40.133
> 
> 标签：android, facebook

在我的应用程序中，我创建了一个 FACEBOOK SHARE BUTTON。当单击按钮时，我想共享一个特定的链接。如果手机已经获得了 facebook 应用程序链接，应该从该应用程序共享。我该怎么做。有人可以帮帮我吗。任何评论将不胜感激

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T05:46:01.497

尝试分享意图

```
Intent sendMailIntent = new Intent(Intent.ACTION_SEND); 
sendMailIntent.putExtra(Intent.EXTRA_SUBJECT, "Indian Link Radio");
sendMailIntent.putExtra(Intent.EXTRA_TEXT, "your link here"); 
sendMailIntent.setType("text/plain");
startActivity(Intent.createChooser(sendMailIntent, "Share Using")); 
```

# solr - 索引时 Solr 线程锁定（死锁）导致索引缓慢

> ID：10292317
> 
> 赞同：0
> 
> 时间：2012-04-24T05:42:06.470
> 
> 标签：solr, locking, deadlock

我正在尝试在 solr 中索引我的文件，我的 solr 数据约为 15gb。在索引我的文件时，线程锁定导致索引更新时间长达 15 分钟。我找不到锁定的来源，但它似乎是一个死锁。但这里是堆栈跟踪。

```
 "http-26300-Processor17" daemon prio=10 tid=0x0000000001d56800 nid=0x34d6 waiting on condition [0x00007f860acfb000]
   java.lang.Thread.State: WAITING (parking)
    at sun.misc.Unsafe.park(Native Method)
    - parking to wait for  <0x00007f865f7b90f8> (a java.util.concurrent.FutureTask$Sync)
    at java.util.concurrent.locks.LockSupport.park(LockSupport.java:186)
    at java.util.concurrent.locks.AbstractQueuedSynchronizer.parkAndCheckInterrupt(AbstractQueuedSynchronizer.java:838)
    at java.util.concurrent.locks.AbstractQueuedSynchronizer.doAcquireSharedInterruptibly(AbstractQueuedSynchronizer.java:998)
    at java.util.concurrent.locks.AbstractQueuedSynchronizer.acquireSharedInterruptibly(AbstractQueuedSynchronizer.java:1304)
    at java.util.concurrent.FutureTask$Sync.innerGet(FutureTask.java:248)
    at java.util.concurrent.FutureTask.get(FutureTask.java:111)
    at org.apache.solr.update.DirectUpdateHandler2.commit(DirectUpdateHandler2.java:439)
    at org.apache.solr.update.processor.RunUpdateProcessor.processCommit(RunUpdateProcessorFactory.java:85)
    at org.apache.solr.handler.RequestHandlerUtils.handleCommit(RequestHandlerUtils.java:107)
    at org.apache.solr.handler.ContentStreamHandlerBase.handleRequestBody(ContentStreamHandlerBase.java:48)
    at org.apache.solr.handler.RequestHandlerBase.handleRequest(RequestHandlerBase.java:131)
    at org.apache.solr.core.SolrCore.execute(SolrCore.java:1316)
    at org.apache.solr.servlet.SolrDispatchFilter.execute(SolrDispatchFilter.java:338)
    at org.apache.solr.servlet.SolrDispatchFilter.doFilter(SolrDispatchFilter.java:241)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:215)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:188)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:213)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:172)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:117)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:108)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:174)
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:874)
    at org.apache.coyote.http11.Http11BaseProtocol$Http11ConnectionHandler.processConnection(Http11BaseProtocol.java:665)
    at org.apache.tomcat.util.net.PoolTcpEndpoint.processSocket(PoolTcpEndpoint.java:528)
    at org.apache.tomcat.util.net.LeaderFollowerWorkerThread.runIt(LeaderFollowerWorkerThread.java:81)
    at org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(ThreadPool.java:689)
    at java.lang.Thread.run(Thread.java:636) 
```

多线程堆栈跟踪

```
 "pool-6-thread-1" prio=10 tid=0x00007fe8944ee800 nid=0x6b65 waiting on condition [0x00007fe8925cb000]
   java.lang.Thread.State: WAITING (parking)
    at sun.misc.Unsafe.park(Native Method)
    - parking to wait for  <0x00007fe8bd4c1900> (a java.util.concurrent.FutureTask$Sync)
    at java.util.concurrent.locks.LockSupport.park(LockSupport.java:186)
    at java.util.concurrent.locks.AbstractQueuedSynchronizer.parkAndCheckInterrupt(AbstractQueuedSynchronizer.java:838)
    at java.util.concurrent.locks.AbstractQueuedSynchronizer.doAcquireSharedInterruptibly(AbstractQueuedSynchronizer.java:998)
    at java.util.concurrent.locks.AbstractQueuedSynchronizer.acquireSharedInterruptibly(AbstractQueuedSynchronizer.java:1304)
    at java.util.concurrent.FutureTask$Sync.innerGet(FutureTask.java:248)
    at java.util.concurrent.FutureTask.get(FutureTask.java:111)
    at org.apache.solr.update.DirectUpdateHandler2.commit(DirectUpdateHandler2.java:439)
    at org.apache.solr.update.DirectUpdateHandler2$CommitTracker.run(DirectUpdateHandler2.java:602)
    - locked <0x00007fe8ad6ed8b0> (a org.apache.solr.update.DirectUpdateHandler2$CommitTracker)
    at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:471)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)
    at java.util.concurrent.FutureTask.run(FutureTask.java:166)
    at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$101(ScheduledThreadPoolExecutor.java:165)
    at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:266)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:636) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T09:40:54.973

可能会有不必要的争用，但如果操作结束，这意味着没有死锁。

查看[DirectUpdateHandler2 的代码](http://grepcode.com/file/repo1.maven.org/maven2/org.apache.solr/solr-core/3.5.0/org/apache/solr/update/DirectUpdateHandler2.java#435)，看起来这个堆栈是由于您在提交/优化操作后要求搜索者被加热。您应该检查您是否不经常提交/优化（最后一次提交可能就足够了，不再推荐优化）和/或停止[等待搜索者在返回之前被加热](http://wiki.apache.org/solr/UpdateXmlMessages#Optional_attributes_for_.22commit.22_and_.22optimize.22)。

# mysql - 如何将 R 与 MySQL 连接或如何安装 RMySQL 包？

> ID：10292326
> 
> 赞同：8
> 
> 时间：2012-04-24T05:42:58.517
> 
> 标签：mysql, r, installation, rmysql

我是 R 的新手，我正在尝试将 R 与 MySQL 连接起来。我已经安装`mysql-5.5.22-winx64`了`R-2.12.0`64 位。我已经设置`MYSQL_HOME environment path(C:\Program Files\MySQL\MySQL Server 5.5)`并尝试执行以下步骤：

1.  从这里安装最新的 RTools
2.  安装mysql或者mysql的头文件和库文件
3.  创建或编辑文件`C:\Program Files\R\R-2.12.1\etc\Renviron.site`并添加类似`MYSQL_HOME=C:/mysql`的行（mysql文件的路径）
4.  复制`libmysql.lib`from `mysql/lib`to`mysql/lib/opt`以满足依赖关系。
5.  复制`libmysql.dll`到`C:\Program Files\R\R-2.12.1\bin`或 到`windows/system32 directory`。
6.  运行`install.packages('RMySQL',type='source')`并等待编译将结束。但我仍然收到此错误：-

    ```
    *> install.packages('RMySQL',type='source')
     --- Please select a CRAN mirror for use in this session ---
     trying URL 'http://ftp.iitm.ac.in/cran/src/contrib/RMySQL_0.9-3.tar.gz'
     Content type 'application/x-gzip' length 165363 bytes (161 Kb)
     opened URL
     downloaded 161 Kb

    * installing *source* package 'RMySQL' ...
    ERROR: configuration failed for package 'RMySQL'
    * removing 'C:/PROGRA~1/R/R-212~1.0/library/RMySQL'
    * restoring previous 'C:/PROGRA~1/R/R-212~1.0/library/RMySQL'

     The downloaded packages are in
      ‘C:\Users\sharad\AppData\Local\Temp\RtmpdQHwCb\downloaded_packages’
     Warning message:
          In install.packages("RMySQL", type = "source") :
    installation of package 'RMySQL' had non-zero exit status* 
    ```

请建议我如何解决这个问题？

最后我得到了解决方案：-您可以在我的[博客](http://passionfordata.blogspot.in/2012/04/how-to-install-r-and-rmysql-package.html)上详细查看解决方案。

我最近两天一直在用 RMySQL 包安装 R，终于找到了解决方案，这里是安装 RMySQL 包的步骤：-

1.  从以下链接下载软件：

    ```
     * a. R2.13.2:  Download R from http://cran.stat.sfu.ca/index.html

        b. RTools 214:  Download RTools from http://cran.cict.fr

        c. RMySQL 0.8-0.tar.gz: Download RMySQL from 
         http://biostat.mc.vanderbilt.edu/wiki/main/RMySQL/RMySQL_0.8-0.tar.gz

        d. MySQL Server 5.0: download it from http://dev.mysql.com

        e. RSTUDIO (optional): download it from http://rstudio.org* 
    ```

2.  设置以下环境变量

    ```
     * a. MYSQL_HOME : <drive>/path to MySQL installation folder
             e.g. MYSQL_HOME= C:\Program Files\MySQL\MySQL Server 5.5\  

          b. R_HOME: <drive>/path to R installation
             e.g. R_HOME=C:\Program Files\R\R-2.13.2\

           c. PATH: Modify path to accommodate the above variables. * 
    ```

    确保 Windows PATH 变量中包含以下路径： *\Rtools\2.14\bin \Rtools\2.14\MinGW\bin \Rtools\2.14\MinGW64\bin*

3.  创建文件夹并复制文件

    ```
     * a. OPT: Create a folder OPT under
                 C:\Program Files\MySQL\MySQL Server 5.5\lib and
             copy MYSQLLIB.LIB  the above path.
           Also copy libmysql.dll to
                  <drive>\<path>\R\R-2.14.0\bin\(64 bit) Or
                  <Drive>\<path>\R\R-2.14.0\bin\i386\ (32 bit) and
             to C:\Windows\System32.

          b. Renviron.site: create or edit a file 
                  <DRIVE>\<path>\R\R-2.14.0\etc\Renviron.site and 
            add a line: 
              MYSQL_HOME =”C:/Program Files/MySQL/MySQL Server 5.5/”
            NB: USE FORWARD SLASH AND DOUBLE QUOTES HERE

          c. libMySQL.dll: Copy this file to
                C:\Program Files\R\R-2.13.2\bin\i386 as well as
                C:\Program Files\R\R-2.13.2\bin* 
    ```

    1.  运行命令

        一种。Install.Packages：通过单击桌面上的 R 图标或从开始菜单运行 R GUI。键入 *INSTALL.PACKAGES(“RMySQL”,type="Sources")。* 这将从存储库下载所需的软件。

        湾。命令提示符：复制下载的 zip 文件（在步骤 4.a.中）并将其粘贴到 R 安装文件夹下。转到开始菜单并打开命令提示符。转到 R 安装文件夹并键入 R CMD INSTALL RMySQL_0.8-0.tar.gz

        *命令：

        > library(RMySQL) drv = dbDriver("MySQL") con = dbConnect(drv,host="localhost",dbname="test",user="root",pass="root") 专辑 = dbGetQuery(con,statement= “从 t_master 中选择 *”）专辑*

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2015-03-12T11:12:07.390

您现在可以跳过所有复杂的步骤，然后做`install.packages("RMySQL")`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-29T06:06:30.273

周末我在 Mac OSX 上的一次黑客马拉松上遇到了这个问题——尽管有一些参考资料（最后提到），我还是花了 4 个小时将所有东西拼凑在一起。我没有找到一个简单的演练，所以我决定在我记忆犹新的时候发布一个。

我不确定与 Windows 的兼容性，但希望这些说明也能让您更轻松。

我试图让 R 和 MySQL 在本地环境中进行通信（可能需要对服务器环境进行更改）。我使用 XAMPP（虽然我没有使用 RMySQL 进行连接），但最后我能够使用 PHP 页面编写 R 文件，执行该文件，并让 R 写入 MySQL 表。据我所知，这只适用于 MacOSX ......

使用的所有软件都是 dmg 形式，因此无需安装二进制文件。

1.  [下载 R](https://cran.r-project.org/bin/macosx/)并运行一些基本命令以确保它正常工作。

2.  在 R 中，您需要安装 RODBC（如果您还没有）。在 R 控制台中输入它。

```
install.packages("RODBC") 
```

这会安装 RODBC，但由于 OS Mavericks，某些文件不再包括在内，因此您会收到一条错误消息

> 找不到 ODBC 标头 sql.h 和 sqlext.h

并且您需要在正确的位置获取 sql.h 和 sqlext.h 文件。

要做到这一点最简单的方法，请确保您已安装[自制软件](http://brew.sh/)（简单说明）。然后在终端中使用此[代码进行安装。](https://stackoverflow.com/a/29214529/2330917)

完成后，您再次进入 R 控制台

```
install.packages("RODBC") 
```

3.  [在 MySQL 中](https://dev.mysql.com/downloads/connector/odbc/)搜索适当的 ODBC 安装。我正在运行 Mac OSX 10.6，所以我下载了 dmg 并安装了它。这照顾好自己。

4.  现在是棘手的部分。显然，Mac OX 在最近的操作系统发布后取出了 ODBC 管理器，因此您需要下载 ODBC 管理器（[http://www.odbcmanager.net/](http://www.odbcmanager.net/)）。它也是一个 dmg 文件，因此只需拖放到您的实用程序文件夹即可。

我在安装 5.3.6 dmg 时遇到了困难（一直失败），所以我安装了 5.2.7。

5.  打开 ODBC 管理器。您需要配置 DSN，因此单击选项卡“系统 DSN”，然后单击“添加”。

6.  您将看到一个弹出窗口，要求您选择驱动程序。我的有基于我的 MySQL ODBC 安装的“MySQL ODBC 5.2 驱动程序”。单击“确定”。如果您没有看到驱动程序，那么您需要确认 MySQL ODBC 已安装。

7.  在下一个弹出窗口中，将数据源名称 (DSN) 设为您想要的任何名称 - 但请记住，这是您从 R 调用时需要使用的名称。在下面的关键字区域中（关键字将用引号括起来，值将是括号内），添加

    “数据库”（带有您的数据库名称的值）

    “服务器”（对于本地环境，不要使用 localhost - 而是使用本地 IP 地址 127.0.0.1。***这对我来说是关键部分）

    “uid”（数据库用户 ID）

    “pwd”（数据库密码）

    “socket”（不确定这是否是必需的，但是经过多个教程后，它留在了我的配置中并且一切正常，所以也许你需要它。你可以在 my.cnf 中找到你的套接字位置 - 做一个聚光灯搜索。套接字文件位置在 CLIENT 下）

    这是我的配置：

    DSN（“测试” - 这是顶部）

    数据库（“电视”）

    套接字（“/Applications/XAMPP/xamppfiles/var/mysql.sock”）

    uid（“根”）

    密码 ("")

    服务器（“127.0.0.1”）

8.  在 R 中，在下面执行 - 我相信每次启动 R 和进行 MySQL 查询之前都需要完成最后 3 个步骤。

    库（RODBC）

9.  确保您已从 XAMPP 控制面板打开 MySQL 和 Apache。

10.  然后执行

    odbcConnect("test") - 注意我如何在双引号中使用我的 DSN。必要时交换。

这应该让你启动并运行。您可以阅读其他有关在 R 中进行 MySQL 查询的教程。

我从 Stack Overflow 上的很多很棒的帖子（谢谢大家！）、随机的其他网站/电子邮件交换历史以及 Joseph Adler 的“R In A Nutshell”一书中一起破解了这个，但如果我错过了什么或者它是什么，请告诉我不清楚。

祝你好运！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-09-01T10:05:18.137

我还花了几个小时试图在 Windows 10 中完成这项工作，但遇到了错误。我为 RMySQL 找到的修复程序混乱而复杂，但 RODBC 更轻松、更优雅地找到了解决方案。我有 R、RStudio、MySQL Server、MySQL Workbench，并且需要以下额外步骤才能使其工作：

1.  在 RStudio 中安装包`install.packages(RODBC)`
2.  [在此处](https://dev.mysql.com/downloads/connector/odbc/)下载并安装 MySQL ODBC 连接器
3.  配置 MySQL ODBC 连接器。[这里](https://dev.mysql.com/doc/connector-odbc/en/connector-odbc-configuration-dsn-windows-5-2.html)有一些说明。只需在 Windows 10 的开始屏幕中搜索“ODBC”，它就会弹出该窗口。正确获取连接参数并使用测试按钮确保其正常工作。连接后，它会在下拉菜单中显示您的数据库列表。在“数据源名称”中为其命名，该名称将进入 R 脚本，例如“mysql_odbc”

现在您可以连接、运行查询和断开连接：

```
library(RODBC)
cursor <- odbcConnect("mysql_odbc", uid="root", pwd="HaysPuffyWalton5")
out <- sqlQuery(cursor, "SELECT * FROM emp WHERE deptno = 10");
close(cursor); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-25T05:21:41.707

这不是一个直接的答案，但您仍然可能会发现它很有帮助：

1.  使用更新的 R 版本（当前为 2.15）

2.  在 Windows 平台上，我宁愿使用 RODBC + Windows MySQL 驱动程序，除非您处于具有异构平台（即 Linux 和 Windows）的环境中，其中代码在团队成员之间大量共享。即使这样，根据运行的平台在同一脚本中选择使用 RMySQL 和 RODBC 也很简单`if() {...} else {...}`

请注意，我并不是说您正在尝试做的事情没有成功的故事，但恕我直言，您将通过上述方式更快地启动并运行。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-07-19T05:36:08.657

这对我有用：使用 Windows XP SP3 32 位操作系统、R Studio、Rv2.15.3

按照以下说明操作：http: [//biostat.mc.vanderbilt.edu/wiki/Main/RMySQL](http://biostat.mc.vanderbilt.edu/wiki/Main/RMySQL)

但是，如果您已经下载了 MySQL 5.6 版，您将不得不`libmysql.lib`在此路径中复制 present 例如：`D:\Program Files\MySQL\MySQL Server 5.6\lib`并创建一个新文件夹，如下所示：`D:\Program Files\MySQL\MySQL Server 5.6\lib\opt`并将上述内容粘贴到`libmysql.lib`该`opt`文件夹​​中。然后`Renviron.site`文件将具有以下内容：`MYSQL_HOME=D:/Program Files/MySQL/MySQL Server 5.6`. 请注意正斜杠。

最后按照上面链接中提供的 install.packages 行的说明进行操作。我不得不做一些试验才能最终把它弄好。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-11-25T01:15:27.793

如果 R 中出现此错误

```
library(RMySQL)
#-----------
Loading required package: DBI

Error : .onLoad failed in loadNamespace() for 'RMySQL', details

  call: i$Location

  error: $ operator is invalid for atomic vectors

Error: package or namespace load failed for 'RMySQL' 
```

然后从外部 R

```
set MYSQL_HOME=F:/Program Files/MySQL/MySQL Server 5.6 
```

回到里面：

```
library(RMySQL)

#Loading required package: DBI
#MYSQL_HOME defined as F:/Program Files/MySQL/MySQL Server 5.6 
```

或者只是从 R 内部

```
Sys.setenv(MYSQL_HOME = "F:/Program Files/MySQL/MySQL Server 5.6")
library(RMySQL)

#Loading required package: DBI
#MYSQL_HOME defined as F:/Program Files/MySQL/MySQL Server 5.6 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-02-08T10:36:45.550

请按照此处的指南进行操作：

[http://www.ahschulz.de/2013/07/23/installing-rmysql-under-windows/](http://www.ahschulz.de/2013/07/23/installing-rmysql-under-windows/)

我跟着它，它就像一个魅力。:)

# c# - 使用特殊类型的分组/聚合从数据库中获取订单

> ID：10292330
> 
> 赞同：1
> 
> 时间：2012-04-24T05:43:34.150
> 
> 标签：c#, sql, linq, ms-access

我有一个这样的订单表

```
 ID OrderNumber 项目数量小计 OrderedBy 
1 2012-0001-12 芭比娃娃 1 10 托马斯
2 2012-0001-12 肯 2 20 托马斯
3 2012-0001-23 米奇 4 28 托马斯
4 2012-0001-23 米妮 3 21 托马斯
5 2012-0002-12 芭比娃娃 1 10 彼得
6 2012-0003-01 蛋糕 1 12 托马斯
7 2012-0003-02 葡萄酒 1 70 托马斯

```

在 OrderNumber 中，前两部分（即第一行*2012-001*）是实际的订单 ID。
附加的最后一部分是在这种情况下不相关的供应商ID。

所以这个表现在有三个订单

```
 OrderNumber OrderCount Total OrderedBy 
2012-0001 4 79 托马斯
2012-0002 1 10 彼得
2012-0003 2 82 托马斯

```

目前，我在`SELECT`从数据库中获取所有内容并在`2012-0001`更改为`2012-0002`. 同时，我还在循环中添加 itemCount 和 total。

有没有办法在没有这么多麻烦的情况下在表（sql）或可枚举集合（linq）中获取订单？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T05:52:53.987

如果您只是想创建第二个表，那么您可以尝试以下操作：

```
SELECT SUBSTRING(OrderNumber, 1, 9) AS OrderNumber
    , COUNT(*) AS OrderCount
    , SUM(Subtotal) AS Total
    , OrderedBy
FROM [Table]
GROUP BY SUBSTRING(OrderNumber, 1, 9), OrderedBy 
```

这假设单个订单将始终由同一个人完成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T05:59:02.073

子字符串会起作用吗？[http://msdn.microsoft.com/en-us/library/ms187748.aspx](http://msdn.microsoft.com/en-us/library/ms187748.aspx)

```
SELECT SUBSTRING(OrderNumber, 1, 9) AS OrderNumber ... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-24T06:19:44.283

```
var summary = from drow in dataTable.AsEnumerable()
                      let grp = drow["OrderNumber"].ToString().Substring(0, drow["OrderNumber"].ToString().LastIndexOf("-"))
                      group drow by grp into g
                      select new {OrderNumber = g.Key, 
                                    OrderCount = g.Sum(x => Convert.ToInt32(x["Quantity"])),
                                    Total = g.Sum(y => Convert.ToInt32(y["Subtotal"])),
                                  OrderedBy = g.Select( n => n["OrderedBy"].ToString()).First()
                      }; 
```

# php - PHP Unzip 函数工作正常，但如果你从 httpdocs/ 调用它就不行

> ID：10292332
> 
> 赞同：1
> 
> 时间：2012-04-24T05:43:40.283
> 
> 标签：php

我有点卡住了一个问题，我希望这里有人可以发光。

我正在使用一些函数来解压缩 .zip 文件及其文件夹，效果很好。但是，如果我尝试从任何其他目录使用该功能，它似乎不起作用或似乎没有创建文件夹 dirs 并写入文件。

我正在使用以下代码解压缩 .zip 文件。

```
<?PHP error_reporting(e_all);

include("../../includes/config.php");

/**
 * Unzip the source_file in the destination dir
 *
 * @param   string      The path to the ZIP-file.
 * @param   string      The path where the zipfile should be unpacked, if false the directory of the zip-file is used
 * @param   boolean     Indicates if the files will be unpacked in a directory with the name of the zip-file (true) or not (false) (only if the destination directory is set to false!)
 * @param   boolean     Overwrite existing files (true) or not (false)
 * 
 * @return  boolean     Succesful or not
 */

function unzip($src_file, $dest_dir=false, $create_zip_name_dir=true, $overwrite=true)
{
  if ($zip = zip_open($src_file))
  {
    if ($zip)
    {
      $splitter = ($create_zip_name_dir === true) ? "." : "/";
      if ($dest_dir === false) $dest_dir = substr($src_file, 0, strrpos($src_file, $splitter))."/";

      // Create the directories to the destination dir if they don't already exist
      create_dirs($dest_dir);

      // For every file in the zip-packet
      while ($zip_entry = zip_read($zip))
      {
        // Now we're going to create the directories in the destination directories

        // If the file is not in the root dir
        $pos_last_slash = strrpos(zip_entry_name($zip_entry), "/");
        if ($pos_last_slash !== false)
        {
          // Create the directory where the zip-entry should be saved (with a "/" at the end)
          create_dirs($dest_dir.substr(zip_entry_name($zip_entry), 0, $pos_last_slash+1));
        }

        // Open the entry
        if (zip_entry_open($zip,$zip_entry,"r"))
        {

          // The name of the file to save on the disk
          $file_name = $dest_dir.zip_entry_name($zip_entry);

          // Check if the files should be overwritten or not
          if ($overwrite === true || $overwrite === false && !is_file($file_name))
          {
            // Get the content of the zip entry
            $fstream = zip_entry_read($zip_entry, zip_entry_filesize($zip_entry));

            file_put_contents($file_name, $fstream );
            // Set the rights
            chmod($file_name, 0777);
            echo "save: ".$file_name."<br />";
          }

          // Close the entry
          zip_entry_close($zip_entry);
        }      
      }
      // Close the zip-file
      zip_close($zip);
    }
  }
  else
  {
    return false;
  }

  return true;
}

/**
 * This function creates recursive directories if it doesn't already exist
 *
 * @param String  The path that should be created
 * 
 * @return  void
 */

function create_dirs($path)
{
  if (!is_dir($path))
  {
    $directory_path = "";
    $directories = explode("/",$path);
    array_pop($directories);

    foreach($directories as $directory)
    {
      $directory_path .= $directory."/";
      if (!is_dir($directory_path))
      {
        //mkdir($directory_path);

        my_ftp_mkdir2('httpdocs/templates/temp/', $directory_path);

        //chmod($directory_path, 0777);
      }
    }
  }
}

/* CHMOD with FTP */

function my_ftp_mkdir2 ($path, $dir) {
    $server = "ftp.domainname.com";

    // Connect to FTP server
    $connection = ftp_connect ($server);

    // Login on FTP server
    $user = "username";
    $pass = "password";
    $result = ftp_login ($connection, $user, $pass);

    if ((!$connection) || (!$result)) {
        return false;
    }
    // Go to the dir thats been given
    if (!@ftp_chdir ($connection, $path)) {
        ftp_close($connection); // close FTP connection
        return false;
    }

    // Create the map and set the rights
    if (!@ftp_mkdir($connection, $dir)) {
        ftp_close($connection); // close FTP connection
        return false;    
    }

    $chmod_cmd = "CHMOD 0777 " . $dir;
    $chmod = ftp_site($connection, $chmod_cmd);

    ftp_close($connection); // close FTP connection

    return true;
}

if (!unzip("../user1/test2.zip", false, true, true)) {
    echo 'The file has failed to be unzipped!';
} else {
    echo 'The file has been unzipped!';
}

?> 
```

现在这很好用。

但是我在测试目录中运行这个文件，如下所示：httpdocs/templates/temp/unzip.php

名为 test2.zip 的文件位于：httpdocs/templates/user1/test2.zip

因此，当我运行脚本时，它会执行以下操作： httpdocs/templates/user1/test2/index.html httpdocs/templates/user1/test2/img/ 等等。

但是当我从 httpdocs/ 目录运行这个脚本时，它说它已经被解压缩但没有创建任何目录或任何东西。

我的 PHP 有安全模式，这就是为什么我使用 FTP 将目录更改为 777 以进行测试。

所以当我在 httpdocs/unzip.php 中运行这个脚本时

我这样调用函数。

```
<?php
if (!unzip("templates/user1/test2.zip", false, true, true)) {
    echo 'The file has failed to be unzipped!';
} else {
    echo 'The file has been unzipped!';
}
?> 
```

但这似乎不起作用，我希望有人可以帮助我提供一些好的建议。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T06:27:49.070

我会使用绝对路径 &

```
mkdir($abspathdir,0777) 
```

(& umask 后重置权限)

可能更整洁更快（？）有什么理由打开 ftp 连接来创建新文件夹？

调试添加一个

```
echo $abspathdir,'<br/>'; 
```

在 mkdir 之前检查（试图）创建了哪些目录。那么如果路径确实正确但未创建目录，则可能只是父文件夹的权限问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T05:49:46.330

将 httpdocs 的所有者设置为您的网络服务器的用户（对于 apache，通常是其 www-data）

```
chown www-data:www-data /path/to/htttpdocs -R 
```

注意：我猜您需要自己访问这些文件，因此将第一个 www-data 与您的用户名交换，例如 user123:www-data

注意2：检查您的网络服务器的错误日志，您会在那里找到您的确切错误消息。我只能猜测这是一个权限被拒绝的问题（Apache 标准路径是 /var/log/apache2/error.log）

注意 3：安全模式在 PHP 5.4 中被删除，我建议你更新。

# java - 将联系人添加到 MS Outlook 约会

> ID：10292337
> 
> 赞同：3
> 
> 时间：2012-04-24T05:44:09.247
> 
> 标签：java, ms-office, outlook-2007, appointment

我创建了一个 java 程序来在 MS Outlook 上创建约会。

```
setProperty(appointment, "Subject", "Meeting"); 
```

这里的“主题”是用于设置约会主题的标签。

现在我想在约会中添加一些联系人。所以就像“主题”标签一样，应该有一些标签来添加联系人姓名、手机号码和电子邮件到约会中。

谁能帮我找出这些标签吗？

提前致谢.. ：）

# java - JNA 找不到函数

> ID：10292338
> 
> 赞同：4
> 
> 时间：2012-04-24T05:44:09.947
> 
> 标签：java, c, dll, jna, unsatisfiedlinkerror

JNA 和 DLL 对我来说是全新的领域......我有一个自定义 DLL，它有一个带有这个声明的函数：

```
int myfunc (const char*); 
```

dll 可以在 MinGW 下使用以下命令正常编译：

```
>gcc -shared -omydll.dll mydll.c -lgdi32 
```

但是，使用 JNA 加载它会失败，因为它无法在 DLL 中找到该函数。

```
public interface mydll extends StdCallLibrary {
  mydll INSTANCE = (mydll)Native.loadLibrary("mydll", mydll.class);
  int myfunc (String arg);
  } 
```

我做了一些研究，似乎这个特定的错误与 DLL 函数的调用过程有关。我已经看到了`__stdcall`和`__cdecl`程序。我还看到许多 DLL 函数放在`__declspec(dllexport)`它们的函数声明/实现之前（我不知道这意味着什么或它做了什么）。所以，由于 JNA 似乎更喜欢这个`__stdcall`过程，现在我的函数看起来像这样：

```
__declspec(dllexport) int __stdcall myfunc (const char*); 
```

这看起来超级复杂，但并不比我尝试过的任何其他方法更好。使用 HashMap 添加下划线前缀和 @4 后缀也不起作用：

```
mydll INSTANCE = (mydll)Native.loadLibrary("mydll", mydll.class, new HashMap () {{
  add("myfunc", "_myfunc@4");
  }}); 
```

JNA 文档绝对没有帮助。老实说，我不知道我在做什么了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T04:55:55.287

事实证明我正在构建我的 DLL，而 JNA 也发现我的 DLL 也很好；我在确定编译器如何破坏我的符号时出错。我命名的函数`myfunc`被导出为`myfunc@8`或`myfunc@32`取决于它们作为参数的字节数。这是我在 JNA 项目中使用的代码：

```
import java.util.*;
import com.sun.jna.*;
import com.sun.jna.win32.*;
//
public class Test
  {
  public interface mydll extends StdCallLibrary
    {
    mydll INSTANCE = Native.loadLibrary("mydll", mydll.class, new HashMap {{
      put("myfunc", "myfunc@8");
      //Other functions
      }});
    public int myfunc (long arg);
    //Other functions
    }
  //
  public static void main (String[] args)
    {
    System.out.println
      (mydll.INSTANCE.myfunc((long)0x23A3920F)); //Or whatever
    return 0;
    }
  } 
```

我的c代码：

```
#include <windows.h>
#include <stdio.h>

__declspec(dllexport) int __stdcall myfunc (__int64);
/* Other functions */

__declspec(dllexport) int __stdcall myfunc (__int64 arg)
  {
  /* Whatever */
  return return_value;
  } 
```

`-shared`GCC 对切换和链接到正确的库 很满意，就像我原来的问题一样。**我强烈建议下载[这个工具](http://www.nirsoft.net/utils/dll_export_viewer.html)，这样你就可以准确地找到你的函数名称。**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T18:47:52.987

查看 JNA 中的测试库是如何构建的（native/Makefile）。遵循该示例将指示正确的导出签名和调用约定。

`__declspec(dllexport)`表示应该导出函数名。

`__stdcall`是大多数 MS API 使用的；您通常没有理由在自己的代码中使用它，因为它只会使链接与名称的混淆变得复杂。

在实际编译（和链接）时，您需要告诉 GCC 您正在构建一个共享库。仅将文件命名为“*.dll”是不够的。

```
gcc -o mydll.dll -shared mydll.c 
```

最后，您可能需要一个或多个`-l<libname>`选项，具体取决于您访问的本机库。

# jquery - 在 iPad 上使用触摸事件的交互式图像序列（通过 jQuery）

> ID：10292340
> 
> 赞同：0
> 
> 时间：2012-04-24T05:44:21.123
> 
> 标签：jquery, ipad, html, touch, ibooks

我绘制了一个“交互式时间线”界面，您可以在 Safari 中在 iPad 上播放，这里：

www.insightdigital.org/touch

当您在屏幕上向左<->向右点击或滑动时，您将看到显示的图像根据您触摸的 pageX 值发生变化。简单的代码只是查找您触摸的 x 轴位置并从预渲染序列中调用图像。自然，在上述情况下，代码必须从网络（而不是实际情况下从 iPad 磁盘）获取帧，因此播放会有点卡顿，直到所有图像都被缓存。缓存后，播放流畅。

1.  在第一次加载（或刷新）时，演示就像我想要的那样工作——只要你保持“touchmove”在游戏中。一旦您结束第一次触摸并尝试使用新的触摸笔划从左到右恢复擦洗，播放就会中断。您仍然可以点击屏幕：“touchstart”呼叫正在运行。但不是“touchmove”，直到您刷新或重新启动。参考下面的代码，你能看到我犯的一个或多个愚蠢的错误吗？

欢迎对问题提出任何其他意见或方法。

对于那些熟悉 EO Wilson 使用 iBooks Author 构建的“地球上的生命”的人来说，有几个这样的“交互式时间线”可以播放渲染的帧序列。

代码如下：

**jquery.swipe-events.js** 改编自：http: [//jgestures.codeplex.com/](http://jgestures.codeplex.com/)

```
(function($) {
  $.fn.swipeEvents = function() {
    return this.each(function() {

      var startX,
      startY,
      $this = $(this);

      $this.bind('touchstart', touchstart);

     // counter
     var i = 0;

     // create object
     imageObj = new Image();

     // set image list
     images = new Array();

     // preload
     for(i=20; i<=80; i++)
     {
      var prefix = "scaled/SHOT_C2 ";
      var currentFrame = pad(i,3);
      var path = prefix+currentFrame+".jpg";
      images[i]=path;
      imageObj.src=images[i];
     }

      function touchstart(event) {
    var touches = event.originalEvent.touches;
    if (touches) {
      startX = touches[0].pageX;
      startY = touches[0].pageY;
      $this.trigger("tap");

      $this.bind('touchmove', touchmove);

      $("#swipebox").image(images[parseInt(20+startX/20)],function(){
        // alert("image loaded");
      });

    }
    event.preventDefault();
      }  

      function touchmove(event) {
    var touches = event.originalEvent.touches;
    if (touches) {
      startX = touches[0].pageX;
      startY = touches[0].pageY;
      $this.trigger("tap");

      $("#swipebox").image(images[parseInt(20+startX/20)],function(){
        // alert("image loaded");
      });

    }
    event.preventDefault();
      }

    });
  };

$.fn.image = function(src, f){ 
  return this.each(function(){ 
    var i = new Image(); 
    i.src = src; 
    i.onload = f; 
    this.appendChild(i);
  }); 
}

function pad(number, length) {
    var str = '' + number;
    while (str.length < length) {
    str = '0' + str;
    }
    return str;
}

})(jQuery); 
```

**索引.html：**

```
<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Test Template</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="css/main.css" rel="stylesheet">
  </head>
  <body>
    <div id=page>
      <div id=swipebox>
      </div>
    </div>
    <script src="js/jquery.js"></script>
    <script src="js/jquery.swipe-events.js"></script>
    <script>
      $(function(){
        $('#swipebox')
          .swipeEvents()
          .bind("tap",  function(){ $('#swipebox').html(""); })
      });
    </script>
  </body>
</html> 
```

# java - if语句未在for循环android中执行

> ID：10292346
> 
> 赞同：2
> 
> 时间：2012-04-24T05:45:18.220
> 
> 标签：java, android, android-2.2-froyo

我有一个非常奇怪的问题。我有这个包含两个规则的过程对象。现在我想用 for 循环循环出这些规则并返回 1 条规则。但我总是得到空值。看起来他正在跳过 if 语句并直接转到我的 return null 部分。

第一条规则的名称是年龄，另一条规则的名称是意外。我在这里包含了该方法。

我的日志正在回馈：

> 规则名称：'年龄'和变量：'事故'并且是真的？：'假'
> 
> 规则名称：“事故”和变量：“事故”并且为真？：“真”

```
private Rule searchRule(String ruleName)
    {
        List<Rule> test = this.procedureObject.getRules();

        for(Rule rule : test)
        {
            Log.d("debug", "rulename: '" + rule.getName() + "' and variable: '"+ruleName+"' and is true ?: '"+rule.getName().equalsIgnoreCase(ruleName)+"'");
            if(rule.getName().equalsIgnoreCase(ruleName))
            {
                return rule;
            }
        }

        return null;
    } 
```

**编辑：它现在工作。**

我只是在调用代码中更改了它：

```
Rule makeRule = RuleFactory.getNewRuleClassNameInstance(this.searchRule(ref2.getName()).getClass().getSimpleName()); 
```

到：

```
Rule foundRule = this.searchRule(ref2.getName());

Rule makeRule = RuleFactory.getNewRuleClassNameInstance(foundRule.getClass().getSimpleName()); 
```

然后它突然起作用了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T06:02:00.240

你能试试这个吗？

```
if(rule.getName().equalsIgnoreCase(ruleName))
{
  Log.d("debug", "rulename: '" + rule.getName() + "' and variable: '"+ruleName+"' and is true ?: '"+rule.getName().equalsIgnoreCase(ruleName)+"'");
  return rule;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T09:56:49.063

我变了：

```
Rule makeRule = RuleFactory.getNewRuleClassNameInstance(this.searchRule(ref2.getName()).getClass().getSimpleName()); 
```

到：

```
Rule foundRule = this.searchRule(ref2.getName());
Rule makeRule = RuleFactory.getNewRuleClassNameInstance(foundRule.getClass().getSimpleName()); 
```

然后它似乎起作用了。

# firefox-addon - firefox 扩展将 MFC 对话框显示为嵌入式用户界面（转换为插件）？

> ID：10292348
> 
> 赞同：1
> 
> 时间：2012-04-24T05:45:20.010
> 
> 标签：firefox-addon, npapi, browser-plugin

我有 Firefox 扩展，我想更改为插件。我想要实现的是我有一个 MFC 对话框，我想将其显示为嵌入在浏览器中以响应某些事件。我可以这样做吗。我需要做什么才能将扩展名更改为插件。

# java - java：如何规范化文本？

> ID：10292353
> 
> 赞同：1
> 
> 时间：2012-04-24T05:46:15.703
> 
> 标签：java

我想为我的程序建立索引，最重要的步骤之一是规范化文本。例如，我需要将“[(Mac Pro @apple)]”转换为“macproapple”，在其中过滤空格、标点符号([()]) 和特殊字符(@)。我的代码是这样的：

```
StringBuilder sb = new StringBuilder(text);
sb = filterPunctuations(sb);
sb = filterSpecialChars(sb);
sb = filterBlankSpace(sb);
sb = toLower(sb); 
```

因为这会生成很多String对象，所以我决定使用StringBuilder。但我不知道如何使用 StringBuffer 来做到这一点。有没有人有一些建议？我还需要处理汉字。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T06:08:41.140

您可以将 `replaceAll`api 与正则表达式一起使用

```
String originalText = "[(Mac Pro @apple)]";
String removedString = originalText.replaceAll("[^\\p{L}\\p{N}]", "").toLowerCase(); 
```

内部`replaceAll`方法使用 StringBuffer，因此您不必担心在内存中创建的多个对象。

这是课堂上`replaceAll`的代码`Matcher`

```
 public String replaceAll(String replacement) {
        reset();
        boolean result = find();
        if (result) {
            StringBuffer sb = new StringBuffer();
            do {
                appendReplacement(sb, replacement);
                result = find();
            } while (result);
            appendTail(sb);
            return sb.toString();
        }
        return text.toString();
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T05:59:46.397

试试这个-

```
class Solution
{
        public static void main (String[] args)
        {
                String s = "[(Mac Pro @apple)]";
                s = s.replaceAll("[^A-Za-z]", "");
                System.out.println(s);
        }
} 
```

这给出了输出

```
MacProapple 
```

以上几行的一个小解释是 -

`s.replaceAll("[^A-Za-z]", "")`删除 AZ 和 az 中不是（由 ^ 表示）的字符串中的所有内容。[此处](http://docs.oracle.com/javase/tutorial/essential/regex/)解释了 Java 中的正则表达式。

如果要将字符串最后转换为小写，则需要使用`s.toLowerCase()`.

# sql - 如何在 SQL Server 中创建真正的一对一关系

> ID：10292355
> 
> 赞同：72
> 
> 时间：2012-04-24T05:46:33.783
> 
> 标签：sql, sql-server, entity-framework, one-to-one

我有两个表`Country`，`Capital`我将`Capital`的主键设置为引用主键的外键`Country`。但是当我首先使用实体​​框架数据库时，模型是 1 到 0..1。

如何在 SQL Server 中创建一对一关系？

[![在此处输入图像描述](../Images/108cf4e363367dac80c552a9e7319adc.png)](https://i.stack.imgur.com/uqP3U.png)

* * *

## 回答 #1

> 赞同：85
> 
> 时间：2012-04-24T05:56:46.780

我很确定在 SQL Server 中建立真正的 1 对 1 关系在技术上是不可能的，因为这意味着你**必须**同时插入两条记录（否则你会在插入时遇到约束错误），在两个表，两个表之间都有外键关系。

话虽如此，使用外键描述的数据库设计是 1 到 0..1 的关系。没有可能需要 tableB 中的记录的约束。您可以与在 tableB 中创建记录的触发器建立伪关系。

所以有一些伪解决方案

首先，将所有数据存储在一个表中。那么你在EF中就没有问题了。

或者其次，您的实体必须足够聪明，除非它具有关联的记录，否则不允许插入。

或者第三，最有可能的是，[你有一个你试图解决的问题，你问我们为什么你的解决方案不起作用，而不是你试图解决的实际问题（一个 XY 问题）](https://meta.stackexchange.com/questions/66377/what-is-the-xy-problem)。

**更新**

为了在*现实*中解释1 对 1 关系如何不起作用，我将使用[鸡或蛋困境](http://en.wikipedia.org/wiki/Chicken_or_the_egg)的类比。我不打算解决这个困境，但是如果你有一个约束，说为了向 Egg 表中添加一个 Egg，Chicken 的关系必须存在，并且 Chicken 必须存在于表中，那么你不能在 Egg 表中添加一个 Egg。反之亦然。如果没有与 Egg 的关系以及 Egg 表中存在的 Egg，则无法将 Chicken 添加到 Chicken 表。因此，在不破坏规则/约束之一的情况下，不能在数据库中创建每条记录。

一对一关系的数据库*命名具有误导性。*我见过的所有关系（因此我的经验）将更具描述性作为一对（零或一）关系。

* * *

## 回答 #2

> 赞同：80
> 
> 时间：2012-04-24T05:56:59.807

将外键设置为主键，然后在两个主键字段上设置关系。而已！您应该在关系线的两端看到一个关键标志。这代表一对一。

![在此处输入图像描述](../Images/63b3b6164df8f9f6445397cbaac8efac.png)

检查这一点：[具有一对一关系的 SQL Server 数据库设计](http://www.mssqltips.com/sqlservertip/2380/sql-server-database-design-with-a-one-to-one-relationship/)

* * *

## 回答 #3

> 赞同：48
> 
> 时间：2015-07-14T10:55:29.613

这可以通过创建一个简单的主外键关系并以下列方式将外键列设置为唯一来完成：

```
CREATE TABLE [Employee] (
    [ID]    INT PRIMARY KEY
,   [Name]  VARCHAR(50)
);

CREATE TABLE [Salary] (
    [EmployeeID]    INT UNIQUE NOT NULL
,   [SalaryAmount]  INT 
);

ALTER TABLE [Salary]
ADD CONSTRAINT FK_Salary_Employee FOREIGN KEY([EmployeeID]) 
    REFERENCES [Employee]([ID]); 
```

[![架构](../Images/879575af64d69c0febd8985e1e22acd3.png)](https://i.stack.imgur.com/mgbXa.png)

```
INSERT INTO [Employee] (
    [ID]
,   [Name]
)
VALUES
    (1, 'Ram')
,   (2, 'Rahim')
,   (3, 'Pankaj')
,   (4, 'Mohan');

INSERT INTO [Salary] (
    [EmployeeID]
,   [SalaryAmount]
)
VALUES
    (1, 2000)
,   (2, 3000)
,   (3, 2500)
,   (4, 3000); 
```

检查是否一切正常

```
SELECT * FROM [Employee];
SELECT * FROM [Salary]; 
```

现在一般在Primary Foreign Relations（一对多）中，可以多次输入`EmployeeID`，但是这里会报错

```
INSERT INTO [Salary] (
    [EmployeeID]
,   [SalaryAmount]
)
VALUES
    (1, 3000); 
```

上面的语句将显示错误为

> 违反 UNIQUE KEY 约束“UQ__Salary__7AD04FF0C044141D”。无法在对象“dbo.Salary”中插入重复键。重复键值为 (1)。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2016-07-14T06:11:32.293

有一种方法我知道如何在不使用触发器、计算列、附加表或其他“奇异”技巧（只有外键和唯一约束）的情况下实现严格的*一对一关系，但有一点需要注意。

我将从公认的答案中借用鸡和蛋的概念来帮助我解释警告。

事实上，必须先有鸡或先有蛋（无论如何在当前的数据库中）。幸运的是，这个解决方案没有政治化，也没有规定哪个必须先出现 - 它由实施者决定。

需要注意的是，从技术上讲，允许记录“先行”的表可以创建一个记录，而另一个表中没有相应的记录；然而，在这个解决方案中，只允许一个这样的记录。当仅创建一条记录（仅创建 chicken 或 egg）时，在删除“lonely”记录或在另一个表中创建匹配记录之前，不能将更多记录添加到两个表中的任何一个。

解决方案：

将外键添加到每个表，引用另一个，为每个外键添加唯一约束，并使一个外键可以为空，另一个不能为空并且也是主键。为此，可空列上的唯一约束必须只允许一个空值（在 SQL Server 中就是这种情况，不确定其他数据库）。

```
CREATE TABLE dbo.Egg (
    ID int identity(1,1) not null,
    Chicken int null,
    CONSTRAINT [PK_Egg] PRIMARY KEY CLUSTERED ([ID] ASC) ON [PRIMARY]
) ON [PRIMARY]
GO
CREATE TABLE dbo.Chicken (
    Egg int not null,
    CONSTRAINT [PK_Chicken] PRIMARY KEY CLUSTERED ([Egg] ASC) ON [PRIMARY]
) ON [PRIMARY]
GO
ALTER TABLE dbo.Egg  WITH NOCHECK ADD  CONSTRAINT [FK_Egg_Chicken] FOREIGN KEY([Chicken]) REFERENCES [dbo].[Chicken] ([Egg])
GO
ALTER TABLE dbo.Chicken  WITH NOCHECK ADD  CONSTRAINT [FK_Chicken_Egg] FOREIGN KEY([Egg]) REFERENCES [dbo].[Egg] ([ID])
GO
ALTER TABLE dbo.Egg WITH NOCHECK ADD CONSTRAINT [UQ_Egg_Chicken] UNIQUE([Chicken])
GO
ALTER TABLE dbo.Chicken WITH NOCHECK ADD CONSTRAINT [UQ_Chicken_Egg] UNIQUE([Egg])
GO 
```

要插入，首先必须插入一个鸡蛋（鸡为空）。现在，只能插入一只鸡，并且它必须引用“无人认领”的鸡蛋。最后，可以更新添加的鸡蛋，它必须引用“无人认领”的鸡。在任何时候都不能让两只鸡引用同一个鸡蛋，反之亦然。

要删除，可以遵循相同的逻辑：将egg's Chicken 更新为null，删除新“无人认领”的鸡，删除egg。

该解决方案还允许轻松交换。有趣的是，交换可能是使用这种解决方案的最有力论据，因为它具有潜在的实际用途。通常，在大多数情况下，只需将两张表重构为一张，就能更好地实现两张表的一对一关系；但是，在潜在的情况下，这两个表可能代表真正不同的实体，它们需要严格的一对一关系，但需要经常交换“合作伙伴”或重新排列，同时仍保持一对一-重新安排后的一段关系。如果使用更常见的解决方案，则必须更新/覆盖其中一个实体的所有数据列，以便重新排列所有对，与此解决方案相反，

好吧，这是我使用标准约束所能做的最好的事情（不要评判:) 也许有人会发现它很有用。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-11-28T10:23:45.197

SQL中的1对1关系是通过将两个表的字段合并为一个来建立的！

我知道您可以将表拆分为具有 1 对 1 关系的两个实体。大多数时候你使用它是因为你想在“表中二进制数据的重字段”上使用延迟加载。

示例：您有一个包含图片的表格，其中包含名称列（字符串）、可能是一些元数据列、缩略图列和图片本身 varbinary(max)。在您的应用程序中，您肯定会首先在集合控件中仅显示名称和缩略图，然后仅在需要时才加载“完整图片数据”。

如果这是您正在寻找的。这就是所谓的“表拆分”或“水平拆分”。

[https://visualstudiomagazine.com/articles/2014/09/01/splitting-tables.aspx](https://visualstudiomagazine.com/articles/2014/09/01/splitting-tables.aspx)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2021-08-23T23:09:01.987

> 如何在 SQL Server 中创建一对一关系？

简短的回答：你不能。

长答案：你可以，如果你敢继续阅读......

* * *

*我知道当 DBMS ( *cough** MS SQL Server **cough** )不支持可延迟约束时，有两种主要方法可以“实现”1:1 关系。这篇文章讨论了这两种主要方法。

这两种方法都通过欺骗 EF 将 a`VIEW`视为 a与 EF 具有一定程度的兼容性`TABLE`。如果您不使用 EF，那么您可能不需要这些`VIEW`对象，但它们对于方便查询和快速查询单独表中实体的*产品类型*视图仍然很方便。`1:1`

这两种方法都是围绕使用*另一个**仅*`ValidCountries`包含PK 值的表 ( ) 构建的，存在两个原因：

 *1.  对两个`1:1`成员表都有 FK 约束（不要忘记您也可以有三个或更多表！）：因此，**除非**所有必需的相关数据都存在于各自的表中，否则`1:1`行`ValidCountries` *不能*存在。
***   *为来自其他*实体的任何传入`FOREIGN KEY`约束提供目标。这将在下面更详细地解释和演示。**

 ***`1:1`这两种方法的不同之处在于它们对成员表的约束、它们对`TRIGGER`对象的使用以及它们与 EF 的兼容性。我确信这两种方法的更多变化是可能的 - 这实际上取决于您如何建模数据和您的业务需求。

这些方法都没有使用`CHECK CONSTRAINT`带有 UDF 的规则来验证其他表中的数据，这是目前实现`1:1`约束的主要方法，但这种方法在性能方面的声誉很差。

* * *

## 方法 1：使用*另外两个* `TABLE`对象（一个用于前向声明，另一个作为有效性证明）和一个读/写`VIEW`来仅公开`1:1`来自 a 的有效数据`JOIN`：

*   此方法使用第三个表*仅*“前向声明” （共享）PK 值，而其他希望`1:1`彼此建立关系的表*仅*引用前向声明表。

*   **另一个**“final”`TABLE`用于证明（通过 FK 约束）对于任何给定的 PK，*valid*肯定存在。

*   然后，这种复杂性隐藏在一个（技术上可选的）`VIEW`对象后面，该对象只公开有效数据并执行`INNER JOIN`3 个（或更多）后备表中的一个，同时还支持`INSERT/UPDATE/DELETE/MERGE`DML 操作。

    *   **这适用于实体框架**，因为 EF 非常乐意假装 a`VIEW`是`TABLE`. 需要注意的是，所有这些方法都是严格的数据库优先的，因为所有这些方法都比 EF 更*聪明*，可以让其屈服于我们的意愿（所以一定要禁用迁移！）
    *   虽然“最终”表可能看起来是多余的，因为`VIEW`它永远不会暴露无效数据，但实际上非常有必要作为来自其他单独实体表（绝*不能*引用前向声明表）的传入外键引用的目标.
        *   这是因为，不幸的是，`VIEW`对象（甚至索引视图）[不能参与 RDBMS 外键约束](https://stackoverflow.com/questions/1928355/tsql-foreign-keys-on-views)，这很烦人。
*   这三个表是：

    1.  **表 1 ：***只有*PK 值的“前向声明表” 。
    *   在 OP 的示例中（of`Countries`和`Capitals`），这将是一个名为 like `CountryDeclarations`（或`CountryDecl`简称）的表，并且*只* `CountryName`存储值，这是 the`Countries`和`Capitals`表的共享 PK）。
    2.  **表 2**：一个（或多个！）从属表，其 FK 指向前向声明表。
        *   在 OP 的示例中，这将是 2 个表：
            *   `TABLE Countries`与`CountryName`作为表的 PK*及其*FK 仅对前向声明表。
            *   `TABLE Capitals`与`CountryName`作为表的 PK*及其*FK 仅对前向声明表。
    3.  **表 3**：公开可见的**主**表，它对前向声明表和*所有*从属表具有 FK。
    *   在 OP 的示例中，这将`TABLE ValidCountries`使用 PK + FK to并将列与和`CountryDecl`分开。`FK``Countries``Capitals`

这是这种方法的数据库图：

[![在此处输入图像描述](../Images/8b0e872c154e7d036b6c1e3601a8f98f.png)](https://i.stack.imgur.com/AQ7Bg.png)

*   从`Countries`和/或`Capitals`表中查询数据时，只要您始终提供`INNER JOIN`，`ValidCountries`您就会得到*硬保证*，即您始终在查询有效数据。

    *   或者只是使用`VIEW`来`JOIN`为您完成已经完成的工作。
*   请记住，成分表和表*之间*`1:1`的关系不是强制的：这是必要的，否则会出现鸡与蛋的问题。*`Countries``Capitals``INSERT`*

     **   虽然如果你确定你总是会`INSERT`进入`Countries`before `Capitals`（并且`DELETE`以相反的顺序）你可以添加一个`FK`约束 from`Capitals`直接 to `Countries`，但这并没有真正增加任何好处，因为该`Countries`表*不能*保证相应的`Capitals`行将存在。* 
**   这种设计也与`IDENTITY`PK 兼容，只要记住*只有*前向声明表会有`IDENTITY`列，所有其他表都会有普通的`int`PK+FK 列。* 

 *这是这种方法的 SQL：

```
CREATE SCHEMA app1; /* The `app1` schema contains the individual objects to avoid namespace pollution in `dbo`. */
GO

CREATE TABLE app1.CountryDecl (
    CountryName nvarchar(100) NOT NULL,
    CONSTRAINT PK_CountryDecl PRIMARY KEY ( CountryName )
);
GO

CREATE TABLE app1.Countries (
    CountryName nvarchar(100) NOT NULL,
    CapitalName nvarchar(255) NOT NULL,
    Inhabitants bigint        NOT NULL,
    AreaKM2     bigint        NOT NULL,

    CONSTRAINT PK_Countries PRIMARY KEY ( CountryName ),

    CONSTRAINT FK_CountriesDecl FOREIGN KEY ( CountryName ) REFERENCES app1.CountryDecl ( CountryName ),
--  CONSTRAINT FK_Countries_Capitals FOREIGN KEY ( CountryName ) REFERENCES app1.Capitals ( CountryName ) -- This FK is entirely optional and adds no value, imo.
);
GO

CREATE TABLE app1.Capitals (
    CountryName nvarchar(100) NOT NULL,
    CapitalName nvarchar(255) NOT NULL,
    Inhabitants bigint        NOT NULL,
    AreaKM2     int           NOT NULL,

    CONSTRAINT PK_Capitals PRIMARY KEY ( CountryName ),

    CONSTRAINT FK_CountriesDecl FOREIGN KEY ( CountryName ) REFERENCES app1.CountryDecl ( CountryName )
);
GO

CREATE TABLE app1.ValidCountries (

    CountryName nvarchar(100) NOT NULL,

    CONSTRAINT PK_ValidCountries PRIMARY KEY ( CountryName ),

    CONSTRAINT FK_ValidCountries_to_Capitals FOREIGN KEY ( CountryName ) REFERENCES app1.Capitals ( CountryName ),
    CONSTRAINT FK_ValidCountries_to_Countries FOREIGN KEY ( CountryName ) REFERENCES app1.Countries ( CountryName ).
    CONSTRAINT FK_ValidCountries_to_Decl FOREIGN KEY( CountryName ) REFERENCES app1.CountriesDecl ( CountryName )
);
GO

CREATE VIEW dbo.Countries AS
SELECT
    -- ValidCountries:
    v.CountryName,

    -- Countries
    cun.Inhabitants     AS CountryInhabitants,
    cun.Area            AS CountryArea,

    -- Capitals
    cap.Capital         AS CapitalCityName,
    cap.CityArea        AS CapitalCityArea,
    cap.CityInhabitants AS CapitalCityInhabitants

FROM
    app1.ValidCountries AS v
    INNER JOIN app1.Countries AS cun ON v.CountryName = cun.CountryName
    INNER JOIN app1.Capitals  AS cap ON v.CountryName = cap.CountryName;

GO

CREATE TRIGGER Countries_Insert ON dbo.Countries
INSTEAD OF INSERT 
AS
BEGIN

    SET NOCOUNT ON;

    INSERT INTO app1.CountriesDecl (
        CountryName
    )
    SELECT
        CountryName
    FROM
        inserted;

    -------

    INSERT INTO app1.Capitals (
        CountryName,
        Capital,
        CityInhabitants,
        CityArea
    )
    SELECT
        CountryName,
        CapitalCityName,
        CapitalCityInhabitants,
        CapitalCityArea
    FROM
        inserted;

    -------

    INSERT INTO app1.Countries (
        CountryName,
        Capital,
        Inhabitants,
        Area
    )
    SELECT
        CountryName,
        CapitalCityName,
        CountryInhabitants,
        CountryArea
    FROM
        inserted;

    ----

    INSERT INTO app1.ValidCountries (
        CountryName
    )
    SELECT
        CountryName
    FROM
        inserted;

    -------

END;

/* NOTE: Defining UPDATE and DELETE triggers for the VIEW is an exercise for the reader. */ 
```

*   使用 Entity Framework 和 Entity Framework Core 时，请记住，这些方法最终是关于*智取*Entity Framework（如果不是彻底的 hack），因此永远不要让 EF 执行任何迁移或生成和运行任何 DDL ( `CREATE TABLE`.. .) 基于您的 Code-First 实体模型类的语句。
    *   虽然 EF 不再支持“数据库优先”模型，但您仍然可以使用“数据库中的代码优先”和代码优先代码生成，例如[https://github.com/sjh37/EntityFramework-Reverse-POCO-Code- First-Generator](https://github.com/sjh37/EntityFramework-Reverse-POCO-Code-First-Generator)（免责声明：这是我个人最喜欢的代码生成器，我是该项目的贡献者）。

    *   如果您使用这种方法在数据库上运行默认脚手架或代码优先代码生成，那么您最终会得到一个包含`app1.Countries`单独实体的`app1.Capitals`模型不想在你的 EF 模型中。`app1.CountriesDecl``app1.ValidCountries`

        *   在这种情况下，我会`app1.*`从 EF 中排除所有表，而是指示 EF 将`VIEW dbo.Countries`其视为单个实体（这是有道理的，因为从数学上讲，两个实体之间的*每个* `1:1`关系都与[定义为产品类型](https://en.wikipedia.org/wiki/Product_type)的*单个*实体相同2 个其他实体）。
        *   因为 a`VIEW`没有 a`PRIMARY KEY`也没有任何`FOREIGN KEY`约束，EF（默认情况下）不能*正确地*从 a 代码生成实体类`VIEW`，但是[前面提到的代码生成工具](https://github.com/sjh37/EntityFramework-Reverse-POCO-Code-First-Generator/blob/e326945450d42a19dcdd52351cf0b323bc009ffe/EntityFramework.Reverse.POCO.Generator/Database.tt#L324)可以很容易地以正确的方式轻推 EF（查找下面的`ViewProcessing`方法和`AddForeignKeys`方法它）。
    *   如果您*确实*将`app1.Countries`and`app1.Capitals`表保留为 EF 中的实体类型，请注意让 EF 执行`INSERT`into 这两个表将失败，除非您的代码首先执行`INSERT`into `app1.CountriesDecl`。

    *   **或者**您可以添加一个`CREATE TRIGGER Countries/Capitals_Insert ON app1.Countries/app1.Capitals INSTEAD OF INSERT`将执行`IF NOT EXIST ... INSERT INTO app1.CountriesDecl`.

    *   但是，至少 EF 在这两张桌子上`UPDATE`不会有任何问题。`DELETE`

* * *

## 方法 2：只有一个额外的`TABLE`对象，但`FK`列是`NULL`-able - 并且 a`VIEW`用作隐藏无效/不完整行的窗帘。

*   如果*方法 1*可以概括为从“*对象必须始终是不可变*的”学派中借用的思想，那么*方法 2*的灵感来自允许您就地改变现有对象的语言，以便编译器可以验证每个突变步骤改变对象的有效*类型*，使其满足某些类型约束。

    *   例如，考虑这个**伪**TypeScript（因为截至 2022 年，TypeScript 似乎仍然不支持/检测向 POJsO 添加属性（从而扩展其结构类型）是有效的并且可证明扩展变量的静态类型）：

        ```
        interface MyResult { readonly name: string; readonly year: number; };

        function doSomething() : MyResult {
            let result = {};
        //  return result;                 // Error: Cannot return `result` yet: it doesn't conform to `MyResult` (there's no `name` nor `year` value)
            result.name = "NameGoesHere";  // So let's define `name`.
        //  return result;                 // ERROR: Still cannot return `result` yet: it still doesn't yet have a `year` property.
            result.year = 2022;            // So let's add `year`.
            return result;                 // No error, `result` can now be returned OK because it conforms to `interface MyResult`.
        } 
        ```

*   考虑到这个概念，我们可以拥有`TABLE`包含部分/不完整的对象`Country`和`Capital`我们可以自由插入/更新/删除的数据，因为它们的相互`FOREIGN KEY`约束是`NULL`-able，见下文。

    *   这些表被命名为`dbo.CountriesData`and`dbo.CapitalsData`而不是`dbo.Countries`和`dbo.Capitals`分别表示这些表只包含任意“数据”而不是有效和*正确的*实体。这是我的个人命名约定。YMMV。
    *   与*方法 1*一样，`VIEW dbo.Countries`exists 仅将*有效*实体公开为单一*产品类型*。
        *   或者，您还可以分别为 Country 和 Capitals 定义其他`VIEW`对象，并让 EF 也将它们视为实体（尽管您需要做更多的`INSERT`工作才能单独为每个视图工作）。
*   但与*方法 1*不同的是，该`dbo.CapitalsData`表现在有一个复合主键，这是 OP 特定数据库设计目标的结果——这可能不适用于您的数据库。

    *   复合 PK 是必要的，以允许在*不*强制执行约束的情况下具有`dbo.Countries`非`NULL` `CountryName`值。这是必须的，因为也是PK的，所以不能。这是因为 SQL Server 仅在 FK 中的*所有*列都为非. 如果您有不同的 PK 设计，那么这对您来说会有所不同。*`FK_CountriesData_to_Capitals``CountryName``dbo.CountriesData``NULL`*`NULL`**

 **```
CREATE TABLE dbo.CountriesData (
   CountryName nvarchar(100) NOT NULL,
   CapitalName nvarchar(255)     NULL,
   Inhabitants bigint        NOT NULL,
   Area        geography     NOT NULL,

   CONSTRAINT PK_CountriesData PRIMARY KEY ( CountryName ),

   CONSTRAINT FK_CountriesData_to_Capitals FOREIGN KEY ( CountryName, CapitalName ) REFERENCES dbo.CapitalsData ( CapitalName )
);

CREATE TABLE dbo.CapitalsData (
    CountryName nvarchar(100) NOT NULL,
    CapitalName nvarchar(255) NOT NULL,
    Inhabitants bigint        NOT NULL,
    Area        geography     NOT NULL,

    CONSTRAINT PK_CapitalsData PRIMARY KEY ( CountryName, CountryName ),

    CONSTRAINT FK_CapitalssData_to_Countries FOREIGN KEY ( CapitalName ) REFERENCES dbo.CountriesData ( CountryName )
);

CREATE VIEW dbo.Countries AS
SELECT
    -- Countries
    cun.Inhabitants     AS CountryInhabitants,
    cun.Area            AS CountryArea,

    -- Capitals
    cap.Capital         AS CapitalCityName,
    cap.CityArea        AS CapitalCityArea,
    cap.CityInhabitants AS CapitalCityInhabitants

FROM
    dbo.CountriesData AS cd
    INNER JOIN dbo.CapitalsData AS cad ON cd.CountryName = cad.CountryName;

CREATE TABLE dbo.ValidCountries (

   -- This TABLE is largely the as in Approach 1\. Ensure that all incoming FKs only reference this table and not dbo.CountriesData or dbo.CapitalsData.
   -- NOTE: When using EF, provided to trick EF into treating `VIEW dbo.Countries` as a TABLE then you don't need to include this table in your EF model at all (just be sure to massage all of EF's FK relationships from other entities that initially point to `ValidCountries` to point to the `VIEW dbo.Countries` entity instead.

    CountryName nvarchar(100) NOT NULL,
    CapitalName nvarchar(255) NOT NULL,

    CONSTRAINT PK_ValidCountries PRIMARY KEY ( CountryName ),

    CONSTRAINT FK_ValidCountries_to_Capitals FOREIGN KEY ( CountryName ) REFERENCES dbo.CapitalsData ( CountryName, CapitalName ),
    CONSTRAINT FK_ValidCountries_to_Countries FOREIGN KEY ( CountryName ) REFERENCES dbo.CountriesData ( CountryName )
);

CREATE TRIGGER After_UPDATE_in_CountriesData_then_INSERT_into_ValidCountries_if_valid ON dbo.CountriesData
AFTER UPDATE 
AS
BEGIN
    INSERT INTO dbo.ValidCountries ( CountryName, CapitalName )
    SELECT
        i.CountryName,
        i.CapitalName
    FROM
        inserted.CountryName AS i
        INNER JOIN dbo.CapitalsData AS capd ON -- The JOINs prevents inserting CountryNames for countries that are either invalid or already exist in dbo.ValidCountries.
            capd.CountryName = i.CountryName
            AND
            capd.CapitalName = i.CapitalName
        LEFT OUTER JOIN dbo.ValidCountries AS v ON -- This is a "LEFT ANTI JOIN" due to the WHERE condition below.
            v.CountryName = i.CountryName
    WHERE 
        v.CountryName IS NULL
        AND
        i.CapitalName IS NOT NULL;
END;

CREATE TRIGGER After_INSERT_in_CapitalsData_then_SET_C ON dbo.CapitalsData
AFTER INSERT 
AS
BEGIN

    -- Due to the specific design of dbo.CapitalsData, any INSERT will necessarily complete a valid product-type entity, so we can UPDATE dbo.CountriesData to set CapitalName to the correct value.
    UPDATE
        cd
    SET
        cd.CapitalName = inserted.CapitalName
    FROM
        dbo.CountriesData AS cd
        INNER JOIN inserted AS i ON
            cd.CountryName = i.CountryName
            AND
            cd.CapitalName IS NULL
    WHERE
        i.CountryName IS NOT NULL;

END; 
```

*   对于手动 DML：
    *   去`INSERT`一个新的国家...
        1.  首先`INSERT INTO dbo.CountriesData`是初始`NULL` `CapitalName`值。
        *   这没关系，因为当 FK 的值（或复合 FK 中至少有 1 个值）为`NULL`.
        2.  然后`INSERT INTO dbo.CapitalsData`（反之亦然，提供`CountryName`相反的情况`NULL`）。
        3.  只有在插入两行之后，您才能运行`UPDATE dbo.CountriesData SET CapitalName = inserted.CapitalName WHERE CountryName = inserted.CountryName`.
        4.  因此，您`VIEW dbo.Countries`现在将公开 now-valid`1:1`相关数据。
    *   `DELETE`必须以相反的顺序执行操作（即首先`UPDATE`清除 FK，然后`DELETE`以任何顺序从每个表中清除）。
    *   `UPDATE`操作不需要特殊处理。
*   我注意到您实际上可以将所有上述`INSERT`逻辑移动到和表`AFTER INSERT`上的触发器中，因为这意味着： `CountriesData``CapitalsData`
    *   那`UPDATE`成`AFTER INSERT`触发器就`dbo.CapitalsData`！（反之亦然） - 但一定要添加检查`WHERE inserted.CountryName IS NOT NULL`- 但如果你这样做，那么你的客户的 SQL 代码只需要执行两个`INSERT`语句，两个`AFTER INSERT`触发器之一将自动处理其余的，但前提是数据最终有效 - 因此它将在`VIEW dbo.Countries`.
    *   这种方法与 EF 配合得更好，因为您不需要对表格进行处理，因此对表格进行`CountriesDecl`单独`INSERT`操作不会失败 - 但请记住，这两个表格/实体之间没有关系。`dbo.CountriesData``dbo.CapitalsData``1:1`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-01-05T13:52:04.730

实现此目的的最简单方法是仅创建 1 个表，其中表 A 和 B 字段均不为空。这样就不可能有一个没有另一个。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2019-05-18T21:04:33.203

那这个呢 ？

```
create table dbo.[Address]
(
Id int identity not null,
City nvarchar(255) not null,
Street nvarchar(255) not null,
CONSTRAINT PK_Address PRIMARY KEY (Id)
)

create table dbo.[Person]
(
Id int identity not null,
AddressId int not null,
FirstName nvarchar(255) not null,
LastName nvarchar(255) not null,
CONSTRAINT PK_Person PRIMARY KEY (Id),
CONSTRAINT FK_Person_Address FOREIGN KEY (AddressId) REFERENCES dbo.[Address] (Id)
) 
```*******

# android - 强制关闭android中的错误

> ID：10292358
> 
> 赞同：0
> 
> 时间：2012-04-24T05:46:54.240
> 
> 标签：android

我是 android 新手，现在才刚刚开始。对于我来说，当我尝试为应用程序关闭的按钮实现单击侦听器时。任何人都可以帮助我。

以下是代码：

```
public class Sampleprojectsubbu1Activity extends Activity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);        
        final  Button b1=(Button)findViewById(android.R.id.button1);
        b1.setOnClickListener(new View.OnClickListener()
        {       
        @Override
        public void onClick(View v) 
        {           

            // TODO Auto-generated method stub

        }
    });
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T05:50:31.913

你正在使用 id "android.R.id.button1" 这是 android 的一部分，你应该使用类似 R.id.your_button_id

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T05:49:49.717

可能在这一行中您遇到了错误-

```
final  Button b1=(Button)findViewById(android.R.id.button1); 
```

在上面的行`android.R.id.button1`中将提供默认按钮，该按钮将随 android jar 一起提供。

而不是在那里，您必须使用按钮 ID。你在你的`main.xml`文件中使用了什么。就像如果您的方法中有一个按钮`main.xml`，`buttonconfirm`您应该使用如下 -

```
final  Button b1=(Button)findViewById(R.id.buttonconfirm); 
```

希望这对您有所帮助。而且，也请发布您`main.xml`的问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-24T05:50:02.100

请更改此行。

```
final  Button b1=(Button)findViewById(android.R.id.button1); 
```

至

```
final  Button b1=(Button)findViewById(R.id.button1); 
```

# javascript - 如果变量包含非数字字符时发出警报？

> ID：10292361
> 
> 赞同：6
> 
> 时间：2012-04-24T05:47:17.153
> 
> 标签：javascript, regex

'p' 只能存储“$”、逗号、点或数字。

如果它包含任何其他字符，我如何显示警报？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-04-24T05:50:19.840

```
if (p.match(/[^$,.\d]/))
    alert('error!'); 
```

[**现场演示**](http://jsfiddle.net/k2ApK/)

你可以使用[这个](https://www.cheatography.com/davechild/cheat-sheets/regular-expressions/) **优秀**的正则表达式备忘单。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-24T07:12:18.427

考虑：

```
if (/[^$,\.\d]/.test(p)) {
  // value has characters other than $ , . 0-9.
}; 
```

正则表达式*测试*方法返回一个布尔值，而*match*返回一个数组，因此在以类似方式使用时依赖于类型转换。

# xpages - 将 javascript 代码传递给自定义控件

> ID：10292363
> 
> 赞同：1
> 
> 时间：2012-04-24T05:47:25.067
> 
> 标签：xpages

我需要将javascript代码（服务器端和客户端）传递给自定义控件，然后单击自定义控件内的按钮即可执行该控件。

为此，我在自定义控件中创建了一个属性，例如`codessjs`，类型`javax.faces.el.MethodBinding`和编辑器作为方法绑定编辑器。单击按钮（在自定义控件内）我编写了如下代码：

`compositeData.codessjs.invoke(facesContext, null)`

但是，`'compositeData.codessjs' is null`尽管 XPage 源代码中存在代码，但它仍然给我一个错误。如何让代码执行？

对于客户端 javascript 代码，我可以`Client side script editor`在自定义控件属性中找到编辑器，但是属性的类型应该是什么？以及如何在自定义控件中执行 csjs 代码？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-24T09:52:24.200

如果要以这种方式使用方法绑定，则必须创建一个方法绑定作为自定义控件的参数：

```
<xc:ccMethod>
   <xc:this.codessjs>
      <![CDATA[#{javascript:
         var app = facesContext.getApplication();
         app.createMethodBinding("#{javascript:print('HELLO!');}", null);
       }]]>
   </xc:this.codessjs>
</xc:ccMethod> 
```

然后，自定义控件内的按钮就可以调用该方法。在这种情况下，按钮将打印*HELLO！*到服务器控制台。

**编辑：**
CSJS 属性的类型是字符串。要执行 CSJS 代码，您可以将自定义控件中的按钮修改为以下内容：

```
<xp:button value="Label" id="button1">
   <xp:eventHandler event="onclick" submit="false">
      <xp:this.script><![CDATA[#{javascript:compositeData.codecsjs}]]></xp:this.script>
   </xp:eventHandler>
</xp:button> 
```

在您的 XPage 中，自定义控件属性可以这样填充：

```
<xc:ccCSJS>
   <xc:this.codecsjs>
      <![CDATA[alert("ABC");]]>
   </xc:this.codecsjs>
</xc:ccCSJS> 
```

希望这可以帮助

斯文

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T05:47:12.703

你试过 JavaScript eval 函数吗？它适用于服务器端 JS。

# actionscript-3 - 单击时，如何让 MovieClip 上的侦听器忽略其中的其他 MovieClip？

> ID：10292365
> 
> 赞同：0
> 
> 时间：2012-04-24T05:47:45.830
> 
> 标签：actionscript-3, flash

我有各种希望播放器点击的电影剪辑：

```
var M:someObject= new someObject(); // someObject extends MovieClip
M.addEventListener(MouseEvent.CLICK, doSomething); 
```

这很好用。当我尝试将动画影片剪辑放在 M 中时出现问题，因此我有一个干净的工作区，除了所有其他 Labesl 和我在 M 中所做的事情。

例如，我将 N 放在 M 中（不是通过代码，而是在库中）。现在，当我单击 M 时，flash 认为我正在单击 N，并且不会调用 doSomething()。

我怎样才能做到这一点，以便单击 MovieClip 或其任何子项将导致调用相同的函数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T05:51:30.323

禁用[`mouseChildren`](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/DisplayObjectContainer.html#mouseChildren).

> 确定对象的子项是否启用了鼠标或用户输入设备。

```
M.mouseChildren = false; 
```

# python - 在mongodb中插入python对象

> ID：10292368
> 
> 赞同：7
> 
> 时间：2012-04-24T05:48:13.600
> 
> 标签：python, json, mongodb

伙计们，我只是花了很多时间试图查一下——我应该遗漏一些基本的东西。

我有一个 python 对象，我想做的就是将此对象插入 mondodb。

这就是我所拥有的：

```
from pymongo import Connection
import json

conn = Connection()
db = conn.cl_database
postings = db.postings_collection

class Posting(object):
    def __init__(self, link, found=None, expired=None):
        self.link = link
        self.found = found
        self.expired = expired

posting = Posting('objectlink1')
value = json.dumps(posting, default=lambda x:x.__dict__)
postings.insert(value) 
```

抛出此错误：

```
Traceback (most recent call last):
  File "./mongotry.py", line 21, in <module>
postings.insert(value)
  File "build/bdist.macosx-10.7-intel/egg/pymongo/collection.py", line 302, in insert
  File "build/bdist.macosx-10.7-intel/egg/pymongo/database.py", line 252, in _fix_incoming
  File "build/bdist.macosx-10.7-intel/egg/pymongo/son_manipulator.py", line 73, in transform_incoming
TypeError: 'str' object does not support item assignment 
```

似乎是因为 json.dumps() 返回一个字符串。

现在，如果我在插入之前确实加载了一些值，那么它可以正常工作：

```
posting = Posting('objectlink1')
value = json.dumps(posting, default=lambda x:x.__dict__)
value = json.loads(value)
postings.insert(value) 
```

最直接的做法是什么？

谢谢！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-24T05:53:06.047

您`value`的初始代码中有什么？

它不应该是`dict`类实例

这应该有效：

```
postings.insert(posting.__dict__) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-24T06:01:01.817

您正在滥用集合的插入方法。在这里查看：http: [//api.mongodb.org/python/current/api/pymongo/collection.html#pymongo.collection.Collection.insert](http://api.mongodb.org/python/current/api/pymongo/collection.html#pymongo.collection.Collection.insert)

您需要插入的是文档。它应该是一个带有键和值的字典。简单地尝试插入字符串是不合适的。json.dumps 返回一个 json 格式的字符串。如果您只是将其转储以获取 dict，则不需要 json 步骤。

准确插入文档的外观：

Posts.insert({"key":"value"})

或者将您的类实例直接转换为要存储为文档的字典，然后将其插入。它与您的 json.dumps.loads() 一起使用，因为这最终会给您一个 dict。

# ios - UIGestureRecognizer 是否知道调用它的对象是什么？

> ID：10292374
> 
> 赞同：8
> 
> 时间：2012-04-24T05:48:53.627
> 
> 标签：ios, dynamic, uigesturerecognizer

我有一个 UIGestureRecognizer，我想在两个不同的 UIView 上工作，它们都在 UiViewController 的同一视图层次结构中。UIGestureRecognizer 的动作在每一个上都差不多，所以我希望调用相同的函数（很明显），我会在运行时告诉我正在处理哪些 UIView。但是怎么做？我看不到 UIGestureRecognizer 正在携带对象信息。我是否错过了文档中的这一行，或者gestureRecognizer不知道它附加到哪个对象上被调用？似乎语言的重点在于它会知道。

或者，也许我误解了课程的意图，我不应该：

```
UITapGestureRecognizer *dblTap = 
[[UITapGestureRecognizer alloc] initWithTarget: self 
                                        action: @selector(handleDblTap:)];   
[viewA addGestureRecognizer: dblTap]; 
[viewB addGestureRecognizer: dblTap]; 
```

然后期望能够：

```
-(void)handleDblTap: (UIGestureRecognizer *)gestureRecognizer
{
     if (viewA)... 
```

如果实际上 UIGestureRecognizer 不支持同时附加到多个对象，那么，如果你知道它为什么不支持这个，你能教育我吗？谢谢您的帮助。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-04-24T06:08:22.450

The standard is one view per recognizer. But you can still efficiently use one handler method.

You would instantiate the recognizers like so:

```
UITapGestureRecognizer *dblTapViewA = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(handleDblTap:)];   
[viewA addGestureRecognizer: dblTapViewA]; 

UITapGestureRecognizer *dblTapViewB = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(handleDblTap:)];
[viewB addGestureRecognizer: dblTapViewB]; 
```

Then your handler method could look something like:

```
-(void)handleDblTap:(UITapGestureRecognizer *)tapRec{
    if (tapRec.view == viewA){
        // double tap view a
    } else if (tapRec.view == viewB) {
        // double tap view b
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-30T11:45:55.267

您可以分配一个标签来查看，然后简单地比较该标签并执行操作。

```
UITapGestureRecognizer *dblTap = 
[[UITapGestureRecognizer alloc] initWithTarget: self 
                                    action: @selector(handleDblTap:)];   
[view addGestureRecognizer: dblTap];
view.tag = 2000; // set any integer 
```

打电话的时候

```
-(void)handleDblTap:(UITapGestureRecognizer *)tapRec{
    if (tapRec.view.tag == 2000){
      // double tap view with tag
    } 
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-24T06:21:30.400

```
UITapGestureRecognizer *dblTapA = 
[[UITapGestureRecognizer alloc] initWithTarget: self 
                                    action: @selector(handleDblTap:)];   
[viewA addGestureRecognizer: dblTapA]; 

UITapGestureRecognizer *dblTapB = 
[[UITapGestureRecognizer alloc] initWithTarget: self 
                                    action: @selector(handleDblTap:)];   
[viewA addGestureRecognizer: dblTapB]; 
```

# sql - 条件大于的 SQL Case

> ID：10292375
> 
> 赞同：0
> 
> 时间：2012-04-24T05:48:56.940
> 
> 标签：sql

我有`product`和`agegroup`表。

我正在`id`从`agegroup`表和表`agegroup`的匹配中加入这两个`product`表。

我正在使用的查询在这里；

```
WITH CTE_AgeGroup AS                                                                            
                (
                SELECT  p.agegroup,
                      CASE
                             WHEN AgeFromMonths >=0 AND AgeToMonths <= 24 
                               THEN
                                    CASE 
                                          WHEN AgeFromMonths >=0 AND AgeToMonths <= 3 THEN '0-3 Months'
                                          WHEN AgeFromMonths >=3 AND AgeToMonths <= 6 THEN '3-6 Months'
                                          WHEN AgeFromMonths >=6 AND AgeToMonths <= 9 THEN '6-9 Months'
                                          WHEN AgeFromMonths >=9 AND AgeToMonths <= 12 THEN '9-12 Months'
                                          WHEN AgeFromMonths >=12 AND AgeToMonths <= 18 THEN '12-18 Months'
                                          WHEN AgeFromMonths >=18 AND AgeToMonths <= 24 THEN '18-24 Months'
                                          END  
                           END as  'age'
                FROM agegroup a inner join product p on
                a.id= p.agegroup

                ),
                  CTE_AgeGroupResultSet AS
                (
                   select
                        Age, Count(*) AS CountAge from CTE_AgeGroup  group by Age   
                      )
                select * from CTE_AgeGroupResultSet order by age; 
```

但是，我的问题是，如果产品 A 在“0-3 个月”中列出，而产品 B 在“3-6 个月”中列出，那么这两种产品不会在“0-24 个月”中列出。

我想修改我的查询，以便产品 A 和 B 也列在“0-24 个月”中

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T09:14:39.883

您可以使用[with rollup](http://msdn.microsoft.com/en-us/library/aa213225%28v=sql.80%29.aspx) in group by 来获得大计数：

```
WITH CTE_AgeGroup AS
(
    SELECT p.agegroup,
           CASE WHEN AgeFromMonths >=0 AND AgeToMonths <= 24 
                THEN CASE WHEN AgeFromMonths >=0 AND AgeToMonths <= 3 
                          THEN '0-3 Months'
                          WHEN AgeFromMonths >=3 AND AgeToMonths <= 6 
                          THEN '3-6 Months'
                          WHEN AgeFromMonths >=6 AND AgeToMonths <= 9 
                          THEN '6-9 Months'
                          WHEN AgeFromMonths >=9 AND AgeToMonths <= 12 
                          THEN '9-12 Months'
                          WHEN AgeFromMonths >=12 AND AgeToMonths <= 18 
                          THEN '12-18 Months'
                          WHEN AgeFromMonths >=18 AND AgeToMonths <= 24 
                          THEN '18-24 Months'
                      END  
            END as 'age'
    FROM agegroup a 
         inner join product p 
            on a.id= p.agegroup
),
CTE_AgeGroupResultSet AS
(
    select case when grouping (Age) = 1 then '0-24' else Age end Age, 
           Count(*) AS CountAge 
      from CTE_AgeGroup
     group by Age WITH ROLLUP
)
select * 
  from CTE_AgeGroupResultSet 
 order by age; 
```

此外，如果您将 varchar 列添加到包含组描述的年龄组，您将完全消除大小写。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T05:57:18.220

我不确定您为什么要使用这种案例功能。最好使用 UNION 运算符（这只需要合并您的产品和年龄组表）

FULL OUTER JOIN（连接两个表并从两个表中获取数据，即使两个表中都有 NULL 值。）

# eclipse-rcp - Web Tool Platform XML 编辑器插件的依赖项

> ID：10292376
> 
> 赞同：0
> 
> 时间：2012-04-24T05:49:19.480
> 
> 标签：eclipse-rcp, eclipse-wtp

我正在开发一个用于管理 xml 文档的 eclipse RCP，它还包括 wtp xml 编辑器提供的功能。我需要在 rcp 的依赖项下包含哪些插件才能访问该功能，或者如何使用 eclipse 找到它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T06:44:56.237

通常，查找所需插件的最简单方法是通过“启动配置”对话框。只需选择您感兴趣的插件，然后按“添加必需”...

# sql-server - 从 SQL Server 语句中确定主键

> ID：10292381
> 
> 赞同：0
> 
> 时间：2012-04-24T05:49:51.960
> 
> 标签：sql-server

给定以下 T-SQL 语句，我如何（通过检查）确定主键？如果它没有列出（就像我怀疑的那样）它会是什么样子？

```
CREATE TABLE [dbo].[BLDGINFO](
    [LBLDGRUNNO] [int] NULL,
    [LBLDGNO] [int] NOT NULL,
    [FBIVOLUME] [float] NULL,
    [FBIACOND] [float] NULL,
    [NBIHTYPE] [float] NULL,
    [NBILTYPE] [float] NULL,
    [NBISTORIES] [float] NULL,
    [NBIFTYPE] [float] NULL,
    [NBIBEDS] [float] NULL,
    [NBIUNITS] [float] NULL,
    [SBIRATENO] [nvarchar](31) NULL,
    [NBICTYPE] [float] NULL,
    [NBIYEARBLT] [int] NULL DEFAULT ((0)),
    [NBITHBNDRY] [int] NULL
) ON [PRIMARY] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T06:43:50.983

表中唯一可能用作主键的字段是`LBLDGNO`因为主键列不能为空。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T05:54:34.263

您问题中的表定义不包含主键，这是一个将主键定义为 id 列的示例：

```
CREATE TABLE [dbo].[BLDGINFO](
    id int NOT NULL,
    [LBLDGRUNNO] [int] NULL,
    [LBLDGNO] [int] NOT NULL,
    [FBIVOLUME] [float] NULL,
    [FBIACOND] [float] NULL,
    [NBIHTYPE] [float] NULL,
    [NBILTYPE] [float] NULL,
    [NBISTORIES] [float] NULL,
    [NBIFTYPE] [float] NULL,
    [NBIBEDS] [float] NULL,
    [NBIUNITS] [float] NULL,
    [SBIRATENO] [nvarchar](31) NULL,
    [NBICTYPE] [float] NULL,
    [NBIYEARBLT] [int] NULL DEFAULT ((0)),
    [NBITHBNDRY] [int] NULL,
    PRIMARY KEY (id)
) ON [PRIMARY] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-24T10:25:07.307

如果已经定义了主键，它将是`LBLDGNO`. 但是，很可能根本没有定义主键。您可以按如下方式确定：

```
SELECT c.name
FROM sys.indexes i, sys.index_columns ic, sys.objects o, sys.columns c
WHERE o.object_id = i.object_id
AND ic.index_id = i.index_id AND ic.object_id = i.object_id
AND c.object_id = o.object_id AND c.column_id = ic.column_id
AND i.is_primary_key = 1
AND o.name = 'BLDGINFO' 
```

此查询将返回主键中包含的所有列。如果它返回一个空结果集，则没有定义主键。

# ajax - HTML5 FormData 在 Java Servlet request.getParameter() 中返回 null

> ID：10292382
> 
> 赞同：9
> 
> 时间：2012-04-24T05:50:01.067
> 
> 标签：ajax, html, servlets, xmlhttprequest, form-data

我的观点是 HTML 5。我正在使用 FormData 将 AJAX 2 POST 发送到 Servlet。在 servlet 内部，我试图读取请求参数。我看不到任何参数。但是，Google Chrome 开发控制台会显示请求负载。我怎样才能在 Servlet 代码中得到相同的结果？任何帮助将不胜感激。这是代码。

JS代码

```
var xhr = new XMLHttpRequest();
var formData = new FormData();
formData.append('firstName', 'ABC');
formData.append('lastName', 'XYZ');

xhr.open("POST", targetLocation, true);
xhr.send(formData); 
```

Servlet 代码（两个参数都返回`null`）

```
out.println("Hello! "+ request.getParameter("firstName")+ " "+ request.getParameter("lastName")+ ", thanks for sending your feedback." ); 
```

谷歌浏览器控制台

```
Content-Disposition: form-data; name="firstName"
XYZ
Content-Disposition: form-data; name="lastName"
ABC 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-04-24T14:26:04.503

HTML5 `FormData`API 发送`multipart/form-data`请求。它最初设计为能够通过 ajax 上传文件，新版本 2 `XMLHttpRequest`。以前的版本无法上传文件。

默认情况下仅[`request.getParameter()`](http://docs.oracle.com/javaee/6/api/javax/servlet/ServletRequest.html#getParameter%28java.lang.String%29)识别`application/x-www-form-urlencoded`请求。但是您正在发送`multipart/form-data`请求。您需要用 注释您的 servlet 类，[`@MultipartConfig`](http://docs.oracle.com/javaee/6/api/javax/servlet/annotation/MultipartConfig.html)以便您可以通过`request.getParameter()`.

```
@WebServlet
@MultipartConfig
public class YourServlet extends HttpServlet {} 
```

或者，当您还没有使用 Servlet 3.0 时，请使用 Apache Commons FileUpload。有关这两种方法的更详细答案，请参见：[如何使用 JSP/Servlet 将文件上传到服务器？](https://stackoverflow.com/questions/2422468/how-to-upload-files-in-jsp-servlet/2424824#2424824)

如果您根本不需要上传文件，请改用“标准”`XMLHttpRequest`方法。

```
var xhr = new XMLHttpRequest();
var data = "firstName=" + encodeURIComponent(firstName)
        + "&lastName=" + encodeURIComponent(lastName);
xhr.open("POST", targetLocation, true);
xhr.setRequestHeader("Content-Type", "application/x-www-form-urlencoded");
xhr.send(data); 
```

这样你就不再需要`@MultipartConfig`你的servlet了。

### 也可以看看：

*   [如何使用 Servlet 和 Ajax？](https://stackoverflow.com/questions/4112686/how-to-use-servlets-and-ajax)
*   [通过 xmlHttpRequest 将文件作为多部分发送](https://stackoverflow.com/questions/9395911/sending-a-file-as-multipart-through-xmlhttprequest)

# ajax - 在 Modal 中显示用于引导 twitter 库的弹出框

> ID：10292385
> 
> 赞同：1
> 
> 时间：2012-04-24T05:50:13.147
> 
> 标签：ajax, twitter-bootstrap, modal-dialog, popover

我使用 jquery ajax 调用页面，并获取响应并将其显示在引导模式中。该页面在浏览器中单独使用该函数调用时会显示一个弹窗

```
 $('a[rel=popover]').popover(); 
```

弹出框出现，但在模态框内没有出现弹出框。

## 更新：

问题是JS问题，错误 `$('a[rel=popover]').popover`不是函数

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-17T12:38:26.140

看到这里的问题是，即使在模态框内也会显示弹出框，但是由于模态框的 z-index 大于弹出框的 z-index，因此您将看不到它。我更改了 popover 元素的 z-index，现在它可以工作了，所以你可以参考这个**[JSFIDDLE](http://jsfiddle.net/phpdeveloperrahul/nzUhj/)**来查看一个实时示例。

CSS：

```
.popover{
    z-index:100000000;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T06:09:20.983

使用 Bootstrap，您会发现弹出框和模态框具有相同的 z-index：

```
.modal .popover,.modal .twipsy{z-index:12000;} 
```

如果包含元素是模态的，则需要手动覆盖 popover z-index：我不确定您是否可以使用 CSS 来执行此操作，但您绝对可以在 js 中执行此操作。

# progress-4gl - 开设ge 11 培训课程等进度新品发布

> ID：10292389
> 
> 赞同：0
> 
> 时间：2012-04-24T05:50:31.993
> 
> 标签：progress-4gl, openedge

请向我推荐一些站点或其他选项，用于在 opensge 11 和其他新进展版本上提供的培训课程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T11:10:10.250

progress.com wss.com bravepoint.com

# azure - 顺序处理算法/模式 - Azure 服务总线队列

> ID：10292392
> 
> 赞同：2
> 
> 时间：2012-04-24T05:50:51.947
> 
> 标签：azure, message-queue, sequence

我们使用 azure 服务总线队列来发布消息。我们使用异步函数将消息推送到队列中，以便获得最大吞吐量。

稍后这些消息可以被工作角色拾取以进行处理。我们将要求处理消息的严格顺序。但是，由于我们将消息异步推送到队列中，因此队列中没有顺序。

我需要某种算法/设计模式，它允许我们：

1.  即使队列中没有按顺序排列的消息，也要对消息进行顺序处理。
2.  它应该允许我们在队列中异步推送消息，即不牺牲队列吞吐量。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-24T07:15:03.870

Alan Smith 有一些关于服务总线模式的精彩博客文章，听起来您需要 resquencer 模式：[http ://geekswithblogs.net/asmith/archive/2012/03/23/149093.aspx](http://geekswithblogs.net/asmith/archive/2012/03/23/149093.aspx)

另请查看他的其他帖子以了解其他模式。

斯蒂芬考夫曼也有一些很好的博客文章（以及其他模式）：http: [//blogs.msdn.com/b/skaufman/archive/2012/04/16/integration-patterns-utilizing-the-windows -azure-service-bus-part-ii.aspx](http://blogs.msdn.com/b/skaufman/archive/2012/04/16/integration-patterns-utilizing-the-windows-azure-service-bus-part-ii.aspx)

高温高压

# css - 样式化 Joomla 内容 - 首字下沉 CSS

> ID：10292393
> 
> 赞同：0
> 
> 时间：2012-04-24T05:50:56.263
> 
> 标签：css, joomla

我尝试了各种方法来将首字下沉应用到 Joomla 文章中。没有任何效果。

我假设我只需要将首字下沉样式（见下文）粘贴到 template.css 中，然后我可以将该类应用于短语 ONCE UPON A TIME... 如下所示：

```
<p class="introduction">O</p><p>nce upon a time...</p> 
```

我可能错过了一些非常简单的东西，但我无法弄清楚。附加信息：文本编辑器是 tinyMCE；模板使用多个样式表。

```
p.introduction:first-letter 
{
 font-size: 44px;
 float: left; 
color: #D4D4C7;
 line-height: 35px;
 padding-top: 3px; 
 padding-right: 3px;
 font-family: Times, serif, Georgia;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T08:00:11.680

您可以尝试将第一个字母包装在跨度中并将其显示为内联块。这应该允许您随意设置第一个字母的样式。它仍然应该内联。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-30T17:29:48.210

我建议使用简单的 jQuery 来获取文章的第一个字母并将其放入文章顶部的浮动 div 中。

你的 HTML 应该是一样的：

```
<div class="content">
    <div class="drop-caps"></div>

    <p>Once upon a time lorem ipsum dolor sit amet, nibh fuga quam at ut, justo ante nullam urna est, turpis...</p>
</div> 
```

首字母大写（大写字母）的 CSS 规则：

```
.drop-caps {
    padding: 0 10px;
    float: left;
    font-size: 48px;
    display: block;
    text-transform: uppercase;
    line-height: 48px;
} 
```

和 jQuery：

```
 var firstSentence = $('.content').find('p:first').text();
    $('.content').find('.drop-caps').append(firstSentence.charAt(0));

    if ($('.drop-caps + div').length) {
        $('.drop-caps').hide();
    } 
```

这是实际的[JSFfiddle 演示](http://jsfiddle.net/zahorodnyk/4x0qsv08/3/)。

# php - 从 mySQL 表中提取指定值？

> ID：10292394
> 
> 赞同：0
> 
> 时间：2012-04-24T05:51:23.397
> 
> 标签：php, mysql

我正在尝试编写该程序的此函数，该函数将从 mySQL 表中提取一个值（他们从值列表中单击的值）。当我编写此代码时，它总是给我错误“未选择数据库”。

我正在尝试从模式电影中的表（performed_in）中提取值。用户选择一个名称，然后程序应该搜索表“performed_in”并返回与用户选择匹配的值（所有字段）。

即使我的类型是这样的，它也无法连接。

```
mysql_connect('localhost', 'uMoviesUser', ''); 
```

问题似乎在查询行内。它有什么问题？

```
 $moviesdb = new mysqli('localhost', 'uMoviesUser', '', 'movies');
 if (mysqli_connect_errno()) {
 echo '<h3>Database Access Error!</h3>';
 }
 else {
 $select = "select * from performed_in";
 $select .= " where name = '".$_GET['name']."'";
 $res = mysql_query($select) or die(mysql_error());

 while($row = mysql_fetch_array($res)){
 echo $row;
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T06:04:01.420

除了上面的评论，你还没有使用函数来选择 mysql_select_db 的数据库

```
 $db_selected = mysql_select_db('urDB', $connection);
    if (!$db_selected) {
       die ('Can\'t use urDB: ' . mysql_error());
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T19:08:54.943

我正在使用新的mysqli（'etc'，'etc'，'etc'），但是当我把它带到mysqli（'etc'，'etc'，'etc'）时它起作用了。

其他解决方案并没有真正接近我原来的解决方案。

# regex - gnu find：仅对基本名称应用-regex

> ID：10292398
> 
> 赞同：5
> 
> 时间：2012-04-24T05:51:36.720
> 
> 标签：regex, linux, find, command

我想搜索基本名称匹配正则表达式的文件。我试过这个：

```
$ find  '/my/path' -regextype posix-extended -regex 'reg1' -regex 'reg2' 
```

我的问题是正则表达式针对完整路径进行了测试。我只想测试文件的基本名称。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-11-26T16:06:45.390

GNU find 不包括任何仅适用于基本名称的正则表达式运算符。这是不幸的。我们最接近的方法是修改正则表达式以从正则表达式的前面去除斜杠分隔的部分：

```
find /my/path -regextype posix-extended -regex ".*/reg1" 
```

这适用于普通的 linux 路径名，但对于具有不寻常字符（例如换行符）的路径名可能会失败。

正如 geekosaur 指出的那样，您的输入正则表达式不应匹配多个组件。如果您对正则表达式没有任何控制权（例如，如果它作为变量 $REG1 传递），您可以尝试修改它以转换`.`为`[^/]`：

```
find /my/path -regextype posix-extended -regex ".*/${REG1/./[^/]}" 
```

这对于很多正则表达式都会失败（例如，'.*.txt' 会被严重损坏）。但是，如果您知道正则表达式会很简单，那么它可能会起作用。

对于较慢但有效的解决方案，您可以在`-exec`块内进行所有模式匹配：

```
find /my/path -exec bash -c 'basename "$0" | egrep -q '"'$REG1'"' && echo "$0"' '{}' ';' 
```

这里的逻辑是`find`枚举所有文件并将它们分配给`$0`子shell。子shell 使用`basename`and`egrep`将输出过滤到与输入正则表达式匹配的路径。请注意 egrep 查找本地匹配项；如果要匹配完整的基本名称，请使用`egrep -q '"'^$REG1\$'"'`

根据输入正则表达式的语义（例如，如果`$REG1`要匹配基本名称的任何子字符串），您可以先在整个路径中搜索正则表达式，然后仅过滤到基本名称，从而获得更好的性能：

```
find /my/path -regextype posix-extended -regex ".*${REG1}.*" \
    -exec bash -c 'basename "$0" | egrep -q '"'$REG1'"' && echo "$0"' '{}' ';' 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-24T06:05:51.033

You would need to anchor the regex, with something like

```
find /my/path -regextype posix-extended -regex 'mumble$' 
```

where `mumble` must be written in a way that excludes `/` characters (for example, you could not use `.*`, you would need to say `[^/]*`).

# android - 获取纬度和经度

> ID：10292399
> 
> 赞同：0
> 
> 时间：2012-04-24T05:51:37.127
> 
> 标签：android, gps, latitude-longitude

很久以来我一直在尝试获取自己的位置，但我遇到了一些或其他问题..我已经多次问过这个问题..请帮我解决这个问题...当我运行这个应用程序时，它会强制关闭。下面是代码和日志猫。

代码

```
public class MyLocation { 
Timer timer1; 
LocationManager lm; 
LocationResult locationResult; 
boolean gps_enabled=false; 
boolean network_enabled=false; 

public boolean getLocation(Context context, LocationResult result) 
{ 
    //I use LocationResult callback class to pass location value from MyLocation to user code. 
    locationResult=result; 
    if(lm==null) 
        lm = (LocationManager) context.getSystemService(Context.LOCATION_SERVICE); 

    //exceptions will be thrown if provider is not permitted. 
    try{gps_enabled=lm.isProviderEnabled(LocationManager.GPS_PROVIDER);}catch(Exception ex){} 
    try{network_enabled=lm.isProviderEnabled(LocationManager.NETWORK_PROVIDER);}catch(Exception ex){} 

    //don't start listeners if no provider is enabled 
    if(!gps_enabled && !network_enabled) 
        return false; 

    if(gps_enabled) 
        lm.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0, locationListenerGps); 
    if(network_enabled) 
        lm.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, 0, 0, locationListenerNetwork); 
    timer1=new Timer(); 
    timer1.schedule(new GetLastLocation(), 20000); 
    return true; 
} 

LocationListener locationListenerGps = new LocationListener() { 
    public void onLocationChanged(Location location) { 
        timer1.cancel(); 
        locationResult.gotLocation(location); 
        lm.removeUpdates(this); 
        lm.removeUpdates(locationListenerNetwork); 
    } 
    public void onProviderDisabled(String provider) {} 
    public void onProviderEnabled(String provider) {} 
    public void onStatusChanged(String provider, int status, Bundle extras) {} 
}; 

LocationListener locationListenerNetwork = new LocationListener() { 
    public void onLocationChanged(Location location) { 
        timer1.cancel(); 
        locationResult.gotLocation(location); 
        lm.removeUpdates(this); 
        lm.removeUpdates(locationListenerGps); 
    } 
    public void onProviderDisabled(String provider) {} 
    public void onProviderEnabled(String provider) {} 
    public void onStatusChanged(String provider, int status, Bundle extras) {} 
}; 

class GetLastLocation extends TimerTask { 
    public void run() { 
         lm.removeUpdates(locationListenerGps); 
         lm.removeUpdates(locationListenerNetwork); 

         Location net_loc=null, gps_loc=null; 
         if(gps_enabled) 
             gps_loc=lm.getLastKnownLocation(LocationManager.GPS_PROVIDER); 
         if(network_enabled) 
             net_loc=lm.getLastKnownLocation(LocationManager.NETWORK_PROVIDER); 

         //if there are both values use the latest one 
         if(gps_loc!=null && net_loc!=null){ 
             if(gps_loc.getTime()>net_loc.getTime()) 
                 locationResult.gotLocation(gps_loc); 
             else 
                 locationResult.gotLocation(net_loc); 
             return; 
         } 

         if(gps_loc!=null){ 
             locationResult.gotLocation(gps_loc); 
             return; 
         } 
         if(net_loc!=null){ 
             locationResult.gotLocation(net_loc); 
             return; 
         } 
         locationResult.gotLocation(null); 
    } 
} 

public static abstract class LocationResult{ 
    public abstract void gotLocation(Location location); 
} 
} 
```

原木猫

```
04-24 11:14:12.692: E/AndroidRuntime(206): Uncaught handler: thread main exiting due to uncaught exception
04-24 11:14:12.792: E/AndroidRuntime(206): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{your.mehul.namespace/your.mel.namespace.MyLocationActivity}: java.lang.ClassNotFoundException: your.mehul.namespace.MyLocationActivity in loader dalvik.system.PathClassLoader@44bfd8d8
04-24 11:14:12.792: E/AndroidRuntime(206):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2417)
04-24 11:14:12.792: E/AndroidRuntime(206):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2512)
04-24 11:14:12.792: E/AndroidRuntime(206):  at android.app.ActivityThread.access$2200(ActivityThread.java:119)
04-24 11:14:12.792: E/AndroidRuntime(206):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1863)
04-24 11:14:12.792: E/AndroidRuntime(206):  at android.os.Handler.dispatchMessage(Handler.java:99)
04-24 11:14:12.792: E/AndroidRuntime(206):  at android.os.Looper.loop(Looper.java:123)
04-24 11:14:12.792: E/AndroidRuntime(206):  at android.app.ActivityThread.main(ActivityThread.java:4363)
04-24 11:14:12.792: E/AndroidRuntime(206):  at java.lang.reflect.Method.invokeNative(Native Method)
04-24 11:14:12.792: E/AndroidRuntime(206):  at java.lang.reflect.Method.invoke(Method.java:521)
04-24 11:14:12.792: E/AndroidRuntime(206):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:860)
04-24 11:14:12.792: E/AndroidRuntime(206):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:618)
04-24 11:14:12.792: E/AndroidRuntime(206):  at dalvik.system.NativeStart.main(Native Method)
04-24 11:14:12.792: E/AndroidRuntime(206): Caused by: java.lang.ClassNotFoundException: your.mel.namespace.MyLocationActivity in loader dalvik.system.PathClassLoader@44bfd8d8
04-24 11:14:12.792: E/AndroidRuntime(206):  at dalvik.system.PathClassLoader.findClass(PathClassLoader.java:243)
04-24 11:14:12.792: E/AndroidRuntime(206):  at java.lang.ClassLoader.loadClass(ClassLoader.java:573)
04-24 11:14:12.792: E/AndroidRuntime(206):  at java.lang.ClassLoader.loadClass(ClassLoader.java:532)
04-24 11:14:12.792: E/AndroidRuntime(206):  at android.app.Instrumentation.newActivity(Instrumentation.java:1021)
04-24 11:14:12.792: E/AndroidRuntime(206):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2409)
04-24 11:14:12.792: E/AndroidRuntime(206):  ... 11 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T05:57:37.510

将您的活动添加到`AndroidMAnifest.xml`. 这个问题与 gps 坐标无关。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T06:02:02.020

您的主要问题似乎是类加载器无法找到/加载 MyLocationActivity。以下 Stack Overflow 线程可以帮助您解决问题：

1.  [java.lang.RuntimeException：无法实例化活动 ComponentInfo](https://stackoverflow.com/questions/4688277/java-lang-runtimeexception-unable-to-instantiate-activity-componentinfo)

2.  [java.lang.ClassNotFoundException 在我的 android 应用程序上，但我不知道为什么](https://stackoverflow.com/questions/4333516/java-lang-classnotfoundexception-on-my-android-app-but-i-have-no-idea-why)

# haskell - Haskell：顺序不敏感的函数式应用程序

> ID：10292405
> 
> 赞同：4
> 
> 时间：2012-04-24T05:52:25.513
> 
> 标签：haskell, exception-handling, functional-programming

我想在 Haskell 中实现一个不区分顺序的功能应用程序版本。通过一点背景知识：自然语言语义中的一个突出传统（源自 Richard Montague 等）将各种类型的 lambda 函数指定为表达式的语义值 (sv's)。句子的真值是通过对句子成分的 sv 执行功能应用来计算的。举一个简单的例子，考虑：

```
tl = [1..10]

bill :: Int
bill = 1

tall :: Int -> Bool
tall = \x -> x `elem` tl 
```

将句子“Bill is high”想象成一棵树，左叶被“Bill”占据，右叶被“tall”占据。**我们通过将右**叶的 sv应用于**左**叶的 sv来计算句子的真值。现在考虑'Some man is high'：这里左叶被'some man'占据[其sv类型为:: (Int -> Bool) -> Bool]，右叶被'tall'占据[其 sv 的类型为 :: (Int -> Bool)]。**我们通过将左**叶的 sv应用于**右**叶的 sv来计算句子的真值。

因此，在这个系统中，给定一棵具有左叶*a*和右叶*b*的树，我们**首先**检查哪个叶在另一个的域中，**然后**相应地应用功能应用：如果*a在**b*的域中，我们做*b (a)*，而如果*b在**a*的域中，我们做*a(b)*。

我将如何在 Haskell 中实现这种“顺序不敏感”的功能应用程序？我编写了一些函数，通过解析结果来确定哪个叶子在另一个域中

```
show (typeOf a) 
```

对于一片叶子 a。然而，这在我看来是不必要的麻烦。如果您尝试评估，Ghci 会给出错误

```
bill tall 
```

因此，检查哪一项在另一项的域中的一种简单方法是尝试将一项应用于另一项，并查看是否导致错误/异常。那么，我的问题是：如何捕获由类型不匹配导致的异常？也就是说，我如何捕获这种非 IO 异常？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-24T06:10:06.353

您无法在运行时捕获类型不匹配；这是一个编译时错误。（至少，不是不使用 ghc-api 在运行时编译代码。 `ghci`它是 ghc-api 的包装器，这就是它可以做到这一点的原因。）您需要找到一种方法来在 ADT 中捕获这种类型的区别来做它在运行时，或者可能使用类型类（但这会引入其他复杂性）。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-24T09:33:17.940

您可能会通过一些类型类扩展获得很长的路要走：

```
{-# LANGUAGE FlexibleInstances     #-}
{-# LANGUAGE MultiParamTypeClasses #-}
{-# LANGUAGE TypeFamilies          #-}

class Copula l r where
  type Sem l r :: *
  is :: l -> r -> Sem l r

instance Copula (a -> b) a where
  type Sem (a -> b) a = b
  is = ($)

instance Copula a (a -> b) where
  type Sem a (a -> b) = b
  is = flip ($) 
```

例如，如果我们现在定义

```
bill :: Int
bill = 1

tall :: Int -> Bool
tall = \x -> x `elem` tl

someMan :: (Int -> Bool) -> Bool
someMan = flip any [1 .. 20]

allMan :: (Int -> Bool) -> Bool
allMan = flip all [1 .. 20] 
```

我们得到

```
> bill `is` tall
True

> someMan `is` tall
True

> allMan `is` tall
False 
```

直截了当，与

```
are :: Copula l r => l -> r -> Sem l r
are = is 
```

我们能做的

```
> someMan `are` tall
True

> allMan `are` tall
False 
```

这可能看起来更好一些。

**注意：**虽然这看起来很简洁，但总的来说，在多态上下文中，类型检查器需要相当多的帮助来确定要做什么。例如

```
> [] `is` null

<interactive>:37:4:                                                              
    No instance for (Copula [a0] ([a1] -> Bool))
      arising from a use of `is'
    Possible fix:
      add an instance declaration for (Copula [a0] ([a1] -> Bool))
    In the expression: [] `is` null
    In an equation for `it': it = [] `is` null 
```

尽管

```
> ([] :: [Int]) `is` (null :: [Int] -> Bool)
True 
```

# r - 更改数据框的行名

> ID：10292409
> 
> 赞同：0
> 
> 时间：2012-04-24T05:52:47.060
> 
> 标签：r, dataframe

我有一个数据框，`t1`它有两个字段`names`和`rollno`. 我想生成行名所在的数据框`names`。我怎样才能在 R 中做到这一点？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-24T05:58:26.583

你可以这样做：

```
a <- data.frame(name=c("A", "B"), b=1:2)
b <- data.frame(a=1:2, b=1:2)
row.names(b) <- a$name 
```

# performance - Perl CGI 和 Catalyst 的区别和性能特点是什么？

> ID：10292413
> 
> 赞同：0
> 
> 时间：2012-04-24T05:52:59.007
> 
> 标签：performance, perl, cgi, catalyst

我都使用过 Perl CGI 和 Catalyst。我知道 Catalyst 比 Perl CGI 更好。我知道不同之处在于 Catalyst 具有更好的 URL 处理能力。但是还有什么其他区别呢？

此外，如果使用 Catalyst 或 CGI Perl，应用程序的性能会如何变化，为什么？如果您遇到过，请提供一些真实世界的示例。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T08:43:03.153

将 CGI.pm 与 Catalyst 进行比较就像将小型笔记本电脑与完整的办公环境进行比较。笔记本电脑很棒，但家庭办公室，有桌子、椅子、打印机，可能还有传真机、扫描仪、订书机、文件柜、笔、纸等等。

CGI.pm 用于解析查询字符串、表单数据、处理 cookie、一些基本的 HTTP 处理，也许是一些快速而肮脏的 HTML 生成，但仅此而已。这就是你所得到的一切，这没关系，因为这就是它的设计目的。事实上，包含 HTML 生成函数可能是一个错误。

Catalyst 是一个完整的 Web 框架，旨在使组织和创建网站变得容易。这里是模型所在的地方，这里是控制器所在的地方，这里是视图所在的地方......而且，哦，是的，处理 Web 请求、cookie、HTTP、会话、身份验证、路由调度，它有一个内置的开发服务器，以及很快。它远远超出了 CGI，因此比较它们没有意义。

如果 Catalyst 对您来说似乎有点过头了，我强烈建议您查看[Dancer](http://perldancer.org/)或[Mojolicious](http://mojolicio.us/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T06:25:12.383

好吧，我假设您在谈论 CGI::Application 而不是 CGI.pm 与 Catalyst。

当然，您的应用程序性能将取决于您对框架所做的工作以及是否可以使用缓存（在这种情况下它们都非常快）。

查看[http://www.perlmonks.org/?node_id=645497](http://www.perlmonks.org/?node_id=645497)了解更多信息。不要让日期吓到你，事情并没有太大变化。

CGI 很简单，它涵盖了基础知识，您可以很快地学习它。

Catalyst 努力成为您忠实的助手，并希望您忠诚并深入了解它。它可以自动化很多事情，同时仍然为您提供灵活性。它确实使用了很多库，但在我看来，它似乎并没有减慢它的速度。不过，您的硬件和要求与我的有所不同。

对于快速项目，我使用 CGI，对于更复杂的系统，我使用 Catalyst。这真的取决于你的项目。

# vb.net - 如何在 VB.net 中来回移动？

> ID：10292419
> 
> 赞同：1
> 
> 时间：2012-04-24T05:53:13.377
> 
> 标签：vb.net, visual-studio-2010

我知道按 ctrl- 会将我们带到最后一个位置。如果我们想前进怎么办？在 vb.net 文档中也提到了这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T06:27:02.367

我相信您正在寻找 `Ctrl`+ `Shift`+ `-`(View.NavigateForward) 它是`Ctrl`+ `-`( View.NavigateBackword) 的伴侣

Microsoft 发布了一些用于各种 Visual Studio 语言的默认 KeyBindings 的 PDF 文档。可以在以下位置找到：

[http://www.microsoft.com/download/en/details.aspx?displaylang=en&id=13189](http://www.microsoft.com/download/en/details.aspx?displaylang=en&id=13189)

如果这没有为您提供所需的信息，您可以查看/编辑绑定，方法是转到

工具 --> 自定义。然后单击键盘按钮。你应该得到一个看起来像这样的表格。然后，您可以查看当前绑定是什么并相应地自定义它们

![在此处输入图像描述](../Images/d393936b90f2da14cbcd541d635ebed9.png)

# coq - 在 Coq 中定义 Ackermann 时出错

> ID：10292421
> 
> 赞同：12
> 
> 时间：2012-04-24T05:53:25.127
> 
> 标签：coq, ackermann, totality

我正在尝试在 Coq 中定义 Ackermann-Peters 函数，但收到一条我不理解的错误消息。如您所见，我`a, b`将 Ackermann 的论点打包成一对`ab`；我提供了一个为参数定义排序函数的排序。然后我使用`Function`表单来定义 Ackermann 本身，并为它提供参数的排序函数`ab`。

```
Require Import Recdef.    
Definition ack_ordering (ab1 ab2 : nat * nat) :=
    match (ab1, ab2) with
    |((a1, b1), (a2, b2)) => 
       (a1 > a2) \/ ((a1 = a2) /\ (b1 > b2))   
    end.
Function ack (ab : nat * nat) {wf ack_ordering} : nat :=
match ab with
| (0, b) => b + 1
| (a, 0) => ack (a-1, 1)
| (a, b) => ack (a-1, ack (a, b-1))
end. 
```

我得到的是以下错误消息：

> 错误：没有这样的部分变量或假设：`ack`。

我不确定是什么困扰了 Coq，但是在搜索互联网时，我发现了一个建议，使用通过排序或度量定义的递归函数可能存在问题，其中递归调用发生在匹配中。但是，使用投影`fst`和生成不同的错误消息`snd`。`if-then-else`有人可以建议如何在 Coq 中定义 Ackermann 吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2017-06-29T18:53:14.637

好像`Function`解决不了这个问题。但是，它的表弟`Program Fixpoint`可以。

让我们首先定义一些处理有根据的引理：

```
Require Import Coq.Program.Wf.
Require Import Coq.Arith.Arith.

Definition lexicographic_ordering (ab1 ab2 : nat * nat) : Prop :=
  match ab1, ab2 with
  | (a1, b1), (a2, b2) => 
      (a1 < a2) \/ ((a1 = a2) /\ (b1 < b2))
  end.

(* this is defined in stdlib, but unfortunately it is opaque *)
Lemma lt_wf_ind :
  forall n (P:nat -> Prop), (forall n, (forall m, m < n -> P m) -> P n) -> P n.
Proof. intro p; intros; elim (lt_wf p); auto with arith. Defined.

(* this is defined in stdlib, but unfortunately it is opaque too *)
Lemma lt_wf_double_ind :
  forall P:nat -> nat -> Prop,
    (forall n m,
      (forall p (q:nat), p < n -> P p q) ->
      (forall p, p < m -> P n p) -> P n m) -> forall n m, P n m.
Proof.
  intros P Hrec p. pattern p. apply lt_wf_ind.
  intros n H q. pattern q. apply lt_wf_ind. auto.
Defined.

Lemma lexicographic_ordering_wf : well_founded lexicographic_ordering.
Proof.
  intros (a, b); pattern a, b; apply lt_wf_double_ind.
  intros m n H1 H2.
  constructor; intros (m', n') [G | [-> G]].
  - now apply H1.
  - now apply H2.
Defined. 
```

现在我们可以定义 Ackermann-Péter 函数：

```
Program Fixpoint ack (ab : nat * nat) {wf lexicographic_ordering ab} : nat :=
  match ab with
  | (0, b) => b + 1
  | (S a, 0) => ack (a, 1)
  | (S a, S b) => ack (a, ack (S a, b))
  end.
Next Obligation.
  inversion Heq_ab; subst. left; auto. Defined.
Next Obligation.
  apply lexicographic_ordering_wf. Defined. 
```

一些简单的测试证明我们可以计算`ack`：

```
Example test1 : ack (1, 2) = 4 := eq_refl.
Example test2 : ack (3, 4) = 125 := eq_refl.  (* this may take several seconds *) 
```

* * *

使用 M. Sozeau 和 C. Mangin 的[Equations](http://mattam82.github.io/Coq-Equations/)插件，可以这样定义函数：

```
From Equations Require Import Equations Subterm.

Equations ack (p : nat * nat) : nat :=
ack p by rec p (lexprod _ _ lt lt) :=
ack (pair 0 n) := n + 1;
ack (pair (S m) 0) := ack (m, 1);
ack (pair (S m) (S n)) := ack (m, ack (S m, n)). 
```

`( , )`不幸的是，由于[问题 #81](https://github.com/mattam82/Coq-Equations/issues/81)，无法使用对的表示法。代码取自 Equation 的测试套件：[ack.v](https://github.com/mattam82/Coq-Equations/blob/71b3b266563b18b47a8bd2677e65e94f08674283/test-suite/ack.v)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-24T18:04:02.300

您收到此错误是因为您在定义该函数时引用了该`ack`函数。自引用只允许在`Fixpoint`s 中（即递归函数），但问题是，正如您可能知道的那样，阿克曼函数不是原始递归函数。

有关这方面的更多信息，请参阅[Coq'Art 第 4.3.2.2 节。](http://books.google.nl/books?id=m5w5PRj5Nj4C&pg=PA95)

因此，定义它的另一种方法是内联第二个递归函数，该函数在结构上对第二个参数是递归的；所以像

```
Fixpoint ack (n m : nat) : nat :=
  match n with
  | O => S m
  | S p => let fix ackn (m : nat) :=
               match m with
               | O => ack p 1
               | S q => ack p (ackn q)
               end
           in ackn m
  end. 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-21T07:57:44.517

我刚刚用 Coq 8.4 尝试了你的功能，但错误略有不同：

```
Error: Nested recursive function are not allowed with Function 
```

我猜对 ack 的内部调用是问题所在，但我不知道为什么。

希望这会有所帮助，V。

PS：我定义 Ack 的通常方式是用线写的内容，带有一个内部固定点。

# testing - 回归测试工具

> ID：10292422
> 
> 赞同：1
> 
> 时间：2012-04-24T05:53:48.747
> 
> 标签：testing, automated-tests, regression-testing

每次发布新版本的软件时，我们都需要对所有现有的测试用例进行全面运行。这非常耗时。是否可以找出代码库的***修改部分***并只执行与这些部分相关的测试用例。并且只进行受那些修改部分影响的回归测试。

我想为此编写一个工具。我希望它尽可能自动化。

做起来应该不会太难。目前只考虑 .NET 托管代码。或者是否有任何现有的工具？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T08:41:54.753

我建议您阅读此[博客文章系列](http://scrumdod.blogspot.fr/2010/12/tfs-2010-test-impact-analysis-series.html)。您可以使用 MTM 和测试用例进行测试影响分析，但它需要一些知识来设置和严格才能在现实世界中使用它。

# c# - 无法在一台 PC 上运行多个应用程序

> ID：10292423
> 
> 赞同：0
> 
> 时间：2012-04-24T05:53:49.087
> 
> 标签：c#, wpf, udpclient

我有 3 个 WPF 应用程序，它们在 3 台单独的 PC 上运行，并且使用 UDP 相互通信。当我在一台 PC 上运行它们时，它们无法共享它们通信的端口，因此崩溃。有没有办法让这些应用程序在同一台 PC 上相互通信？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T06:39:57.383

不，它们不应该具有相同的端口号，这是被禁止的，端口号背后的想法是区分进程，你说你有三个应用程序，这意味着你有三个进程，每个进程应该有单独的端口号，并且当您尝试通过端口号和本地 ip 在进程之间发送数据时，假设您有第一个应用程序的端口 1111 和第二个应用程序的端口 2222，如果您想将数据从第一个应用程序发送到第二个使用端口的本地 ip 和 2222，反之亦然。

你的问题是当第一个应用程序打开时他告诉windows我会听这个端口任何包裹以那个号码发给你发送给我，当第二个应用程序打开时他告诉windows同样的事情windows会通过异常回复没有是另一个应用程序占用该端口。

# c# - WPF 程序中的 App.config，在调试期间工作但未编译

> ID：10292427
> 
> 赞同：0
> 
> 时间：2012-04-24T05:54:10.460
> 
> 标签：c#, wpf, web-services

我有一个 WPF 程序，它使用由 Visual Studio 生成的 Soap 服务。

当我在 Visual Studio 中以调试模式运行它时，它工作正常（我将合同放在 app.config 中）

但是当我在编译后运行它时，在我的程序所在的目录中使用 App.config 我得到这个错误：

```
ERROR: Could not find endpoint element with name 'LodgeSoap' and 
contract 'SMSwebService.LodgeSoap' in the ServiceModel client configuration section. This might
be because no configuration file was found for your application, or because no endpoint element
matching this name could be found in the client element. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T06:00:09.633

编译应用程序时，程序集会在 bin/debug 或 bin/release 目录中。请确保文件夹中存在 [应用程序名称].exe.config 文件，并且此文件中存在肥皂服务配置信息。

# iphone - 我可以在推特上多次发布相同的消息吗

> ID：10292429
> 
> 赞同：1
> 
> 时间：2012-04-24T05:54:15.880
> 
> 标签：iphone, ios, twitter, sharekit

我正在使用用于 iPhone 的 shareKit 来支持 twitter，同时在 twitter 上第二次发布相同的消息时显示“重复状态”警报。如何处理此问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T05:58:29.523

没有相同的消息不能多次发布，因为 twitter 每次都会检查 twits 的正文。

你需要一些时间在推特上发帖。

# sql - sql在哪里包含

> ID：10292431
> 
> 赞同：0
> 
> 时间：2012-04-24T05:54:32.983
> 
> 标签：sql, sql-server, where, contains

```
TABLE A
|column1|column2| 

TABLE B
|column1|column2| 
```

SQL查询

```
SLECT a.column1
b.column
FROM A a, B b
Where Contains(a.column1, b.column1) 
```

但是，它在包含的 b.column 附近有语法错误。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-24T05:56:03.300

你漏了一个逗号？

```
SELECT a.column1, b.column1
FROM A a, B b
Where Contains(a.column1, b.column1) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T07:42:57.083

我认为您不能在搜索条件中指定列名。

`CONTAINS`可以搜索：

*   一个词或短语。
*   词或短语的前缀。
*   一个词靠近另一个词。
*   从另一个词屈折产生的词（例如，词驱动是驱动器、驱动器、驱动器和驱动器的屈折词干）。
*   使用同义词库作为另一个词的同义词的词（例如，“金属”一词可以具有“铝”和“钢”等同义词）。

参考：http: [//msdn.microsoft.com/en-us/library/ms187787.aspx](http://msdn.microsoft.com/en-us/library/ms187787.aspx)

# asp.net - 检查下拉列表数据文本字段的值

> ID：10292440
> 
> 赞同：0
> 
> 时间：2012-04-24T05:55:52.937
> 
> 标签：asp.net, c#-4.0

我正在从cs文件绑定我的下拉列表。struser_type中包含的值可以是C，E或S。如果是CI，想将其显示为客户，E然后是员工，S然后是供应商。如何检查它并在下拉文本字段中显示相应的值。

```
 ddl_user_type.DataSource = OBJLIST;
            ddl_user_type.DataTextField = "struser_type";
            ddl_user_type.DataValueField = "iuser_id";
            ddl_user_type.DataBind(); 
```

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T06:18:46.160

您可以使用以下方式来完成此操作：

首先从数据库中收集所有数据并使用正常的 for 循环对其进行迭代：

假设`OBJLIST`为`Dataset`：

```
for(int i = 0 ; i < OBJLIST.Tables[0].Rows.Count; i++)
{
ListItem  item = new ListItem();
if(OBJLIST.Tables[0].Rows[i]["struser_type"].toString() == "C")
   item.Text="Customer";

else if......

item.Value = OBJLIST.Tables[0].Rows[i]["iuser_id"].toString();

ddl_user_type.Items.Add(item);
} 
```

这应该对你有用....

# java - 使用spring hibernate上传和下载文件，对方法有点困惑。有人可以指导我吗......？

> ID：10292444
> 
> 赞同：3
> 
> 时间：2012-04-24T05:56:11.927
> 
> 标签：java, spring, spring-mvc, file-upload, spring-security

我正在创建一个模块，我需要在其中提供通过浏览器上传和下载任何文件的功能。

我尝试寻找满足我要求的方法。

数据库服务器：Oracle 10 g 框架：Spring & Hibernate 前端：JSP

现在我有两个选择

1.  将文件导入 oracle（数据类型 blob）数据库并使用 BufferedOutputStream 检索相同的文件

2.  我将在服务器上创建用于存储所有文件的文件夹。用户将在该位置上传图像。数据库将有一列存储该文件的绝对路径，该路径将在读取该文件时使用

例如，用户上传 imageABC.jpg ，应用程序将上传目录 D:\DIS21\Storage\ 下的该文件（更新后的名称为 unique_id.jpeg），数据库路径列将由 D:\DIS21\Storage\unique_id.jpeg 更新

读取文件时应用程序将读取路径 D:\DIS21\Storage\ 下的文件

我对方法和安全方面有点困惑。有人可以指导我吗..？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T07:43:38.083

两种方法都有效。选项 1 的缺点是它会给数据库带来额外的 I/O 压力，但是根据系统上的负载，这可能不是问题。

选项 2 的主要问题是它阻止了水平扩展，即如果您的使用量增加，您将无法添加额外的服务器，而无需将所有文件移动到某种网络文件共享上。同样，这会增加网络和 I/O 开销，但可能是也可能不是问题。

我已经建立了许多将文件存储在数据库中的站点，只要您应用良好的数据设计（主要是您应该将 blob 拆分到它们自己的表中），您应该没问题。

# c - C：在宏中创建和返回变量

> ID：10292450
> 
> 赞同：0
> 
> 时间：2012-04-24T05:56:50.717
> 
> 标签：c, macros, comma-operator

我有点困惑为什么这个 C 宏无法编译：

```
#define LUA_GET_FIELD(Lua, idx, name, type) (\
    lua_getfield((Lua), (idx), (name)), \
    typeof(lua_to##type) __result = lua_to##type((Lua), -1), \
    lua_pop((Lua), 1), __result) 
```

调用它时，我收到错误：

```
src/event.lcpp.c:134:15: error: expected primary-expression before ‘typeof’
src/event.lcpp.c:134:15: error: expected ‘)’ before ‘typeof’ 
```

如果我`typeof(lua_to##type)`用 just替换也会发生同样的情况`int`，所以我怀疑问题与逗号有关。你不能在这样的表达式中间声明变量吗？

我知道 gcc 有一个从块返回值的扩展，但我想避免编译器扩展。我也意识到这应该改为内联函数，但现在我很好奇为什么宏不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T05:58:44.610

标准 C 确实不允许您在表达式中任意定义新变量。旧标准甚至不允许它们出现在任何地方，只能在块的开头（也就是说，您也不能将它们与语句混合）。

# function - JavaScript 函数返回一些值

> ID：10292451
> 
> 赞同：0
> 
> 时间：2012-04-24T05:56:57.777
> 
> 标签：function, javascript

我已经定义了一个 JavaScript 函数

```
function a()

 {
    var data = 'some data';
    $.getJSON(networkController,data,function(r) {
            $.each(r, function(a)
            {
                alert(r[a].networkAccessToken);
        });
   });
} 
```

它工作正常，但是当我这样做时：

```
 function a()

 {
    var data = 'some data';
    $.getJSON(networkController,data,function(r) {
            $.each(r, function(a)
            {
                return r[a].networkAccessToken;
        });
  });
 }
var c = a();
alert(c); 
```

警报未定义......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T06:15:00.440

重要的是要意识到您的 AJAX 调用是*非阻塞的*。这意味着它在从服务器接收到响应*之前返回。*（第一个“A”代表“异步”！）

处理此问题的最常见方法是使用[回调](http://en.wikipedia.org/wiki/Callback_%28computer_science%29)：

```
 function a(callback) {
    var data = 'some data';
    $.getJSON(networkController,data,function(r) {
        $.each(r, function(a) {
            callback(r[a].networkAccessToken);
        });
    });
 }

 a(function(c) {
   alert(c);
 }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T06:19:29.903

你有两个问题。

首先，异步 JavaScript 和 XML 是异步的。当您调用`$.getJSON`它时，它会发送一个 HTTP 请求并注册一个函数以在数据返回时运行。然后它会在等待的同时运行现有功能。

您正在有效地尝试执行以下操作：

```
function a() {
    $('button').click(function () { return 1; });
}
foo = a(); // Would you expect this to be `1` and not `undefined`? 
```

其次，`each`为每个值调用一个函数。您传递给的函数`each`由`each`not`getJSON`或调用`a`。它的返回值只决定循环是否应该继续。

**您需要在传递给的函数`each`**中做任何您想做的事情。您不能将数据传回调用链。你想传回的东西已经不存在了。

# php - 用 jQuery/AJAX 更新 MYSQL

> ID：10292452
> 
> 赞同：7
> 
> 时间：2012-04-24T05:56:58.180
> 
> 标签：php, jquery, mysql, ajax, cordova

我正在尝试使用 PhoneGap 和 jQuery Mobile 构建移动应用程序。在我的应用程序中，我有一个页面，其中包含指向 PHP 文件的链接，该文件更新 MYSQL 并转到下一页。但是对于 PhoneGap，我需要在外部服务器上拥有所有 PHP 文件，所以我不能在这个应用程序上使用我当前的解决方案。

这是我用来更新 MYSQL 的 PHP

```
<?php

$var = @$_GET['id'] ;

$con = mysql_connect("localhost","username","abc123");
if (!$con)
  {
  die('Could not connect: ' . mysql_error());
  }

mysql_select_db("database", $con);

mysql_query("UPDATE table SET condition=true
WHERE ID= \"$var\" ");

header('Location: http://1.2.3.4/test');

mysql_close($con);
?> 
```

那么当用户单击一个按钮时，我该如何运行这个 PHP 呢？我想使用 jQuery/AJAX？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-24T06:16:27.243

假设上面的 PHP 代码在文件 update.php 中。然后您可以使用以下代码 -

```
<head>
<script src="jquery.js"></script>
<script>
  function UpdateRecord(id)
  {
      jQuery.ajax({
       type: "POST",
       url: "update.php",
       data: 'id='+id,
       cache: false,
       success: function(response)
       {
         alert("Record successfully updated");
       }
     });
 }
</script>
</head>
<body>
<input type="button" id="button_id" value="Update" onClick="UpdateRecord(1);">
</body> 
```

只需在 UpdateRecord 函数中传递一个有效的 id。将您的 PHP 代码放入 update.php 文件中。只是为了更安全，在您的 PHP 代码中替换`$var = @$_GET['id'] ;`为`$var = @$_POST['id'] ;`并检查这是否适合您

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-03-28T07:47:09.910

```
<head>
<script src="jquery.js"></script>
<script>
  function UpdateRecord(id)
  {
      jQuery.ajax({
       type: "POST",
       data: 'id='+id,     // <-- put on top
       url: "update.php",
       cache: false,
       success: function(response)
       {
         alert("Record successfully updated");
       }
     });
 }
</script>
</head>
<body>
<input type="button" id="button_id" value="Update" onClick="UpdateRecord(1);">
</body> 
```

**Sachyn Kosare**建议的那些代码确实有效，唯一的问题是这条线`data: 'id='+id`必须在上面`url: "update.php"`

而且，您可以将`$var = $_POST['id'];`其用于您的 PHP。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-24T06:15:46.093

说你的按钮有一个 id`clickme`你在它上面绑定一个事件处理程序如下，我使用 on 选择器来避免当页面上不存在按钮时执行代码的情况。你可以很好地绑定一个`click`处理程序

```
$(document).on("click","#clickme",function(){
    $.ajax({

        type:"POST", //GET - update query should be POST
        url: my_endpoint.php,  //your php end point
        data: {jsonKey1:jsonValue1},
        success: function(data){ //if success
          //do necessary things with data
        }

    })
}); 
```

这是你想要的？

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-04-24T06:42:36.663

在你的成功功能中做点什么

```
success: function(response)
   {
       window.location = response;
   } 
```

你的 html 应该包含

在php中做这样的事情

```
mysql_query('blah blah');
mysql_close($con);

echo "http://1.2.3.4/test"; 
```

# android - 适用于 Android 和 iphone 的通用图形库

> ID：10292453
> 
> 赞同：1
> 
> 时间：2012-04-24T05:56:59.567
> 
> 标签：android, iphone

> **可能重复：**
> [是否有任何图表库可在 iphone 和 android 应用程序上运行？](https://stackoverflow.com/questions/4995114/is-there-any-chart-library-working-both-on-iphone-and-android-applications)

我需要找到一个通用库文件来为 android 和 iphone 生成图表。如果有人知道库文件，请告诉我。

注意：我需要库文件来开发原生 android/iphone 应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T06:04:11.157

看看这些链接。希望以下任何内容对您有所帮助。

[斯蒂玛](http://www.steema.com/)

[图表](http://www.amcharts.com/)

[Android Plot(仅适用于Android)](http://androidplot.com/)

也看看[这个](https://stackoverflow.com/questions/424752/any-good-graphing-packages-for-android/1856369#1856369)问题

# sql - Oracle Explain Plan for Query with Collection using Table function

> ID：10292460
> 
> 赞同：3
> 
> 时间：2012-04-24T05:57:48.993
> 
> 标签：sql, oracle, optimization, sql-execution-plan

如何使用表函数在存在子句中使用某些集合在 Oracle 中为查询生成计划

例如

```
CREATE TYPE TYP_EMP AS OBJECT(
EMPNO     NUMBER(4),
ENAME     VARCHAR2(10),
JOB       VARCHAR2(9),
MGR       NUMBER(4),
HIREDATE  DATE,
SAL       NUMBER(7,2),
COMM      NUMBER(7,2),
DEPTNO    NUMBER(2));
/ 
```

创建的类型。

```
CREATE TYPE TYP_EMP_COLL AS TABLE OF TYP_EMP;
/ 
```

创建的类型。

```
CREATE OR REPLACE VIEW VW_EMP 
OF TYP_EMP
WITH OBJECT IDENTIFIER(EMPNO) AS
SELECT
EMPNO, ENAME, JOB, MGR, HIREDATE, SAL, COMM, DEPTNO
FROM EMP
/ 
```

查看已创建

```
CREATE TYPE TYP_DEPT AS OBJECT(
DEPTNO NUMBER(2),
DNAME  VARCHAR2(14),
LOC    VARCHAR2(13));
/ 
```

类型已创建

```
CREATE TYPE TYP_DEPT_COLL AS TABLE OF TYP_DEPT;
/ 
```

类型已创建

```
CREATE OR REPLACE VIEW VW_DEPT
OF TYP_DEPT
WITH OBJECT IDENTIFIER(DEPTNO) AS
SELECT
DEPTNO, DNAME, LOC
FROM DEPT
/

CREATE OR REPLACE PROCEDURE SP_EMPTEST AS
V_EMP TYP_EMP_COLL;
V_DEPT TYP_DEPT_COLL;
BEGIN
SELECT VALUE(V) BULK COLLECT INTO V_EMP FROM VW_EMP V;
SELECT VALUE(VD)
BULK COLLECT INTO V_DEPT FROM VW_DEPT VD
WHERE EXISTS
    (SELECT 1 FROM TABLE(V_EMP) VV WHERE VD.DEPTNO = VV.DEPTNO);
END;
/ 
```

* * *

## 跟踪文件的 TKPROF 输出

```
********************************************************************************

SQL ID: 7c02yjs9q5kqr
Plan Hash: 2616009478
SELECT VALUE(VD) 
FROM
VW_DEPT VD WHERE EXISTS (SELECT 1 FROM TABLE(:B1 ) VV WHERE VD.DEPTNO = VV.DEPTNO)

call     count       cpu    elapsed       disk      query    current        rows
------- ------  -------- ---------- ---------- ---------- ----------  ----------
Parse        1      0.00       0.00          0          0          0           0
Execute      1      0.00       0.00          0         19          0           0
Fetch        1      0.00       0.00          0          7          0           3
------- ------  -------- ---------- ---------- ---------- ----------  ----------
total        3      0.00       0.00          0         26          0           3

Misses in library cache during parse: 1
Misses in library cache during execute: 1
Optimizer mode: ALL_ROWS
Parsing user id: 84  (mac)   (recursive depth: 1)

Rows     Row Source Operation
-------  ---------------------------------------------------
  3  HASH JOIN SEMI (cr=7 pr=0 pw=0 time=6 us cost=33 size=32 card=1)
  4   TABLE ACCESS FULL DEPT (cr=7 pr=0 pw=0 time=0 us cost=3 size=120 card=4)
 14   COLLECTION ITERATOR PICKLER FETCH (cr=0 pr=0 pw=0 time=0 us cost=29 size=28 card=14)

error during execute of EXPLAIN PLAN statement
ORA-22905: cannot access rows from a non-nested table item

parse error offset: 129

Elapsed times include waiting on following events:
Event waited on                             Times   Max. Wait  Total Waited
----------------------------------------   Waited  ----------  ------------
asynch descriptor resize                        1        0.00          0.00
******************************************************************************** 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-30T03:30:18.663

有许多不同的方法可以获得解释计划。这不仅仅是一个详尽的列表。我认为这些方法之间存在重要差异，值得将它们中的每一个都包含在您的工具包中。

**1 - 跟踪对过程的调用。**

正如您的错误所示，将 SQL 从 PL/SQL 块中提取出来可能会很棘手。尽管 PL/SQL 和 SQL 旨在一起工作，但它们之间的交互有时可能很奇怪。

跟踪过程肯定会获得正确的上下文，并且还可能向您展示正在发生的其他重要事情。尽管我通常会避免跟踪，因为它会创建太多无用的信息，而且通常（莫名其妙地）难以访问服务器。

**2 - 实例化 SQL 中的类型**

创建一个空集合，然后您的常规解释计划方法应该可以工作：

```
SELECT VALUE(VD) 
FROM
VW_DEPT VD WHERE EXISTS (SELECT 1 FROM TABLE(typ_emp_coll()  ) VV WHERE VD.DEPTNO = VV.DEPTNO); 
```

或填充实际值：

```
SELECT VALUE(VD) 
FROM
VW_DEPT VD WHERE EXISTS (SELECT 1 FROM TABLE(typ_emp_coll(typ_emp(null,null,null,null,null,null,null,null))  ) VV WHERE VD.DEPTNO = VV.DEPTNO); 
```

用有意义的值填充它可能需要一些大量的 SQL 语句。但有时将所有东西都放在一个地方会很有帮助。此外，正如我稍后将解释的，是否使用空集合实际上并不重要。Oracle 无法区分空集合和大集合。

**3 - 使用已执行查询的 SQL_ID。**

在 中找到 SQL_ID `V$SQL`。这可能会返回超过 1 行，您可能需要手动选择正确的行。

```
select * from v$sql where upper(sql_text) like '%SELECT 1 FROM TABLE(%'; 
```

sql_id 可以通过多种方式获取计划，例如：

```
select * from table(dbms_xplan.display_cursor(sql_id => '7c02yjs9q5kqr'));

SQL_ID  7c02yjs9q5kqr, child number 0
-------------------------------------
SELECT VALUE(VD) FROM VW_DEPT VD WHERE EXISTS (SELECT 1 FROM TABLE(:B1 
) VV WHERE VD.DEPTNO = VV.DEPTNO)

Plan hash value: 2616009478

-------------------------------------------------------------------------------------------
| Id  | Operation                          | Name | Rows  | Bytes | Cost (%CPU)| Time     |
-------------------------------------------------------------------------------------------
|   0 | SELECT STATEMENT                   |      |       |       |    32 (100)|          |
|*  1 |  HASH JOIN SEMI                    |      |     1 |    32 |    32   (4)| 00:00:01 |
|   2 |   TABLE ACCESS FULL                | DEPT |     1 |    30 |     2   (0)| 00:00:01 |
|   3 |   COLLECTION ITERATOR PICKLER FETCH|      |  8168 | 16336 |    29   (0)| 00:00:01 |
-------------------------------------------------------------------------------------------

Predicate Information (identified by operation id):
---------------------------------------------------

   1 - access("DEPTNO"=SYS_OP_ATG(VALUE(KOKBF$),8,9,2)) 
```

获取相似信息的相关方法有很多：使用`/*+ gather_plan_statistics */`提示、`v$sql_monitor`、`v$sql_plan`、`dbms_sqltune.report_sql_monitor(sql_id => '7c02yjs9q5kqr', type => 'active')`等。每种方法都有不同的优缺点。就个人而言，我尽量使用`report_sql_monitor`。这是查询的一个很好的图形表示，尽管它需要一些额外的许可。

**4 - 使用函数而不是变量。**

```
create or replace package test_pkg is
    v_emp typ_emp_coll;
    function get_v_emp return typ_emp_coll;
end;
/

create or replace package body test_pkg is
    function get_v_emp return typ_emp_coll is
    begin
        return v_emp;
    end;
end;
/ 
```

现在您可以将查询作为独立的 SQL 语句运行，并使用真实的集合数据。您的正常解释计划方法应该可以正常工作：

```
select * from table(test_pkg.get_v_emp); 
```

* * *

**为什么计划总是那么糟糕？**

无论您使用哪种方法，您可能会看到与我生成的几乎相同的解释计划。`8168`这是因为函数和集合对优化器是不可见的，它每次只会猜测行。

要调整这些查询，您可能需要查看这篇文章，[为管道函数和表函数设置基数](http://www.oracle-developer.net/display.php?id=427)。

这是一个使用动态采样的解决方案的快速示例：

```
select /*+ dynamic_sampling(5) */ * from table(test_pkg.get_v_emp) 
```

# eclipse - 调试 logcat 堆栈跟踪 - 没有例程信息

> ID：10292462
> 
> 赞同：1
> 
> 时间：2012-04-24T05:58:08.340
> 
> 标签：eclipse, android-ndk, gdb, logcat, segmentation-fault

我是调试 logcat 的新手，所以请耐心等待。

我的 Android 应用 SIGSEGV 在共享库上。Logcat 告诉我这个：

```
04-24 05:36:53.781: D/dalvikvm(1945): threadid=1: still suspended after undo (sc=1 dc=1)
04-24 05:37:00.066: A/libc(1945): Fatal signal 11 (SIGSEGV) at 0x00001a85 (code=1)
04-24 05:37:00.476: I/DEBUG(58): *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** ***
04-24 05:37:00.476: I/DEBUG(58): Build fingerprint: 'Android/full_mini210/mini210:4.0.3/IML74K/eng.root.20120209.191511:eng/test-keys'
04-24 05:37:00.476: I/DEBUG(58): pid: 1945, tid: 1945  >>> tiny.test2 <<<
04-24 05:37:00.476: I/DEBUG(58): signal 11 (SIGSEGV), code 1 (SEGV_MAPERR), fault addr 00001a85
04-24 05:37:00.476: I/DEBUG(58):  r0 f6502688  r1 00000000  r2 f6502688  r3 00001a85
04-24 05:37:00.476: I/DEBUG(58):  r4 00003000  r5 00000000  r6 00000039  r7 00000000
04-24 05:37:00.476: I/DEBUG(58):  r8 bec795d8  r9 4b965be8  10 503cd2c1  fp bec795ec
04-24 05:37:00.476: I/DEBUG(58):  ip fffffe68  sp bec79540  lr 40807077  pc 50408a56  cpsr 20000030
04-24 05:37:00.476: I/DEBUG(58):  d0  474957535f5f746e  d1  4e4a6874656e615f
04-24 05:37:00.476: I/DEBUG(58):  d2  4b9671984b967143  d3  4b9672084b967161
04-24 05:37:00.476: I/DEBUG(58):  d4  4b6fa8b92a41c200  d5  0012da7a0012da7a
04-24 05:37:00.476: I/DEBUG(58):  d6  001933a8033f33c4  d7  0000008d001933a8
04-24 05:37:00.476: I/DEBUG(58):  d8  0000000000000000  d9  0000000000000000
04-24 05:37:00.476: I/DEBUG(58):  d10 0000000000000000  d11 0000000000000000
04-24 05:37:00.476: I/DEBUG(58):  d12 0000000000000000  d13 0000000000000000
04-24 05:37:00.476: I/DEBUG(58):  d14 0000000000000000  d15 0000000000000000
04-24 05:37:00.476: I/DEBUG(58):  d16 00000000412adc78  d17 0000000000000000
04-24 05:37:00.476: I/DEBUG(58):  d18 4146605000000000  d19 bfb1be5a93a83e1d
04-24 05:37:00.476: I/DEBUG(58):  d20 3f1155e54e7e8408  d21 bebbbc6c1a570a20
04-24 05:37:00.476: I/DEBUG(58):  d22 3ff0000000000000  d23 3fede16b9c24a98f
04-24 05:37:00.476: I/DEBUG(58):  d24 3e66376972bea4d0  d25 3fc39a09d078c69f
04-24 05:37:00.476: I/DEBUG(58):  d26 0000000000000000  d27 0000000000000000
04-24 05:37:00.476: I/DEBUG(58):  d28 0000000000000000  d29 0000000000000000
04-24 05:37:00.476: I/DEBUG(58):  d30 0000000000000000  d31 0000000000000000
04-24 05:37:00.480: I/DEBUG(58):  scr 60000012
04-24 05:37:00.558: I/DEBUG(58):          #00  pc 50408a56  /data/data/tiny.test2/lib/libcaneth.so
04-24 05:37:00.558: I/DEBUG(58):          #01  lr 40807077  /system/lib/libdvm.so
04-24 05:37:00.558: I/DEBUG(58): code around pc:
04-24 05:37:00.558: I/DEBUG(58): 50408a34 9317681b 2b009b17 9a09d10a 447b4b26  .h.....+....&K{D
04-24 05:37:00.558: I/DEBUG(58): 50408a44 21071c10 f7fd1c1a 2300feed e0382400  ...!.......#.$8.
04-24 05:37:00.558: I/DEBUG(58): 50408a54 681b9b17 23009318 23f0930f 1c18005b  ...h...#...#[...
04-24 05:37:00.558: I/DEBUG(58): 50408a64 ee7cf02a 1c1d1c03 991b1c28 9b0a9a1a  *.|.....(.......
04-24 05:37:00.558: I/DEBUG(58): 50408a74 93009c0b 9b199401 9b189302 9b0f9303  ................
04-24 05:37:00.558: I/DEBUG(58): code around lr:
04-24 05:37:00.558: I/DEBUG(58): 40807054 fd94f7ff 686a4604 46314628 f8d24643  .....Fjh(F1FCF..
04-24 05:37:00.562: I/DEBUG(58): 40807064 46227300 4a0847b8 2100a805 f7fc447a  .s"F.G.J...!zD..
04-24 05:37:00.562: I/DEBUG(58): 40807074 b00afb29 81f0e8bd d5aab57f 00062cfa  )............,..
04-24 05:37:00.562: I/DEBUG(58): 40807084 0004c02e 0006ad96 0004bcd4 41f0e92d  ............-..A
04-24 05:37:00.562: I/DEBUG(58): 40807094 b08a4698 46054b1e 4614af05 447b460e  .F...K.F...F.F{D
04-24 05:37:00.562: I/DEBUG(58): memory map around addr 00001a85:
04-24 05:37:00.562: I/DEBUG(58): (no map below)
04-24 05:37:00.562: I/DEBUG(58): (no map for address)
04-24 05:37:00.562: I/DEBUG(58): 00008000-0000a000 /system/bin/app_process
04-24 05:37:00.562: I/DEBUG(58): stack:
04-24 05:37:00.562: I/DEBUG(58):     bec79500  40869d12  /system/lib/libdvm.so
04-24 05:37:00.562: I/DEBUG(58):     bec79504  00000004  
04-24 05:37:00.562: I/DEBUG(58):     bec79508  00000001  
04-24 05:37:00.562: I/DEBUG(58):     bec7950c  0000f2c8  [heap]
04-24 05:37:00.562: I/DEBUG(58):     bec79510  40806ffd  /system/lib/libdvm.so
04-24 05:37:00.562: I/DEBUG(58):     bec79514  00000000  
04-24 05:37:00.562: I/DEBUG(58):     bec79518  00000039  
04-24 05:37:00.562: I/DEBUG(58):     bec7951c  00000000  
04-24 05:37:00.562: I/DEBUG(58):     bec79520  bec795d8  [stack]
04-24 05:37:00.562: I/DEBUG(58):     bec79524  50406825  /data/data/tiny.test2/lib/libcaneth.so
04-24 05:37:00.562: I/DEBUG(58):     bec79528  00000000  
04-24 05:37:00.562: I/DEBUG(58):     bec7952c  412adc88  /dev/ashmem/dalvik-heap (deleted)
04-24 05:37:00.562: I/DEBUG(58):     bec79530  84400029  
04-24 05:37:00.562: I/DEBUG(58):     bec79534  0000f2c8  [heap]
04-24 05:37:00.566: I/DEBUG(58):     bec79538  df0027ad  
04-24 05:37:00.566: I/DEBUG(58):     bec7953c  00000000  
04-24 05:37:00.566: I/DEBUG(58):     bec79540  00132110  [heap]
04-24 05:37:00.566: I/DEBUG(58):     bec79544  00000000  
04-24 05:37:00.566: I/DEBUG(58):     bec79548  bec795e0  [stack]
04-24 05:37:00.566: I/DEBUG(58):     bec7954c  4b969480  /dev/ashmem/dalvik-LinearAlloc (deleted)
04-24 05:37:00.566: I/DEBUG(58):     bec79550  001a2530  [heap]
04-24 05:37:00.566: I/DEBUG(58):     bec79554  40019ea3  /system/lib/libc.so
04-24 05:37:00.566: I/DEBUG(58):     bec79558  000017c0  
04-24 05:37:00.566: I/DEBUG(58):     bec7955c  6b60001d  
04-24 05:37:00.566: I/DEBUG(58):     bec79560  6bd00019  
04-24 05:37:00.566: I/DEBUG(58):     bec79564  0000f2c8  [heap]
04-24 05:37:00.566: I/DEBUG(58):     bec79568  00003039  
04-24 05:37:00.566: I/DEBUG(58):     bec7956c  00000000  
04-24 05:37:00.566: I/DEBUG(58):     bec79570  00000000  
04-24 05:37:00.566: I/DEBUG(58):     bec79574  00000000  
04-24 05:37:00.566: I/DEBUG(58):     bec79578  409c5460  /dev/ashmem/dalvik-heap (deleted)
04-24 05:37:00.566: I/DEBUG(58):     bec7957c  000000c1  
04-24 05:37:00.566: I/DEBUG(58):     bec79580  00000002  
04-24 05:37:00.566: I/DEBUG(58):     bec79584  00000002  
04-24 05:37:00.566: I/DEBUG(58):     bec79588  412adc88  /dev/ashmem/dalvik-heap (deleted)
04-24 05:37:00.566: I/DEBUG(58):     bec7958c  84400029  
04-24 05:37:00.566: I/DEBUG(58):     bec79590  4bab3d70  /dev/ashmem/dalvik-LinearAlloc (deleted)
04-24 05:37:00.566: I/DEBUG(58):     bec79594  a6200025  
04-24 05:37:00.566: I/DEBUG(58):     bec79598  00000000  
04-24 05:37:00.570: I/DEBUG(58):     bec7959c  00001a85  
04-24 05:37:00.570: I/DEBUG(58):     bec795a0  40876c58  /system/lib/libdvm.so
04-24 05:37:00.570: I/DEBUG(58):     bec795a4  00000001  
04-24 05:37:00.570: I/DEBUG(58):     bec795a8  000017c0  
04-24 05:37:00.570: I/DEBUG(58):     bec795ac  00132248  [heap]
04-24 05:37:00.570: I/DEBUG(58):     bec795b0  00000000  
04-24 05:37:00.570: I/DEBUG(58):     bec795b4  4bbf5e70  /dev/ashmem/dalvik-LinearAlloc (deleted)
04-24 05:37:00.570: I/DEBUG(58):     bec795b8  00012830  [heap]
04-24 05:37:00.570: I/DEBUG(58):     bec795bc  00000003  
04-24 05:37:00.570: I/DEBUG(58):     bec795c0  4b965c00  
04-24 05:37:00.570: I/DEBUG(58):     bec795c4  407ddbf4  /system/lib/libdvm.so
04-24 05:37:00.570: I/DEBUG(58):     bec795c8  79200021  
04-24 05:37:00.570: I/DEBUG(58):     bec795cc  00000001  
04-24 05:37:00.570: I/DEBUG(58):     bec795d0  00001a85  
04-24 05:37:00.570: I/DEBUG(58):     bec795d4  00000000  
04-24 05:37:00.570: I/DEBUG(58):     bec795d8  4b965be8  
04-24 05:37:00.570: I/DEBUG(58):     bec795dc  00000001  
04-24 05:37:00.570: I/DEBUG(58):     bec795e0  412aca10  /dev/ashmem/dalvik-heap (deleted)
04-24 05:37:00.570: I/DEBUG(58):     bec795e4  00012840  [heap]
04-24 05:37:00.570: I/DEBUG(58):     bec795e8  bec79898  [stack]
04-24 05:37:00.570: I/DEBUG(58):     bec795ec  40817c33  /system/lib/libdvm.so
04-24 05:37:00.570: I/DEBUG(58):     bec795f0  4b965be8  
04-24 05:37:00.570: I/DEBUG(58):     bec795f4  503cd2bb  /data/dalvik-cache/data@app@tiny.test2-1.apk@classes.dex
04-24 05:37:00.570: I/DEBUG(58):     bec795f8  50408909  /data/data/tiny.test2/lib/libcaneth.so
04-24 05:37:00.570: I/DEBUG(58):     bec795fc  00012840  [heap]
04-24 05:37:00.570: I/DEBUG(58):     bec79600  00000008  
04-24 05:37:00.570: I/DEBUG(58):     bec79604  00000000  
04-24 05:37:00.570: I/DEBUG(58):     bec79608  6bd00019  
04-24 05:37:00.574: I/DEBUG(58):     bec7960c  4c1f228a  /data/dalvik-cache/system@framework@core.jar@classes.dex
04-24 05:37:00.574: I/DEBUG(58):     bec79610  fffffe4c  
04-24 05:37:00.574: I/DEBUG(58):     bec79614  f6502688  
04-24 05:37:00.574: I/DEBUG(58):     bec79618  4bb9da38  /dev/ashmem/dalvik-LinearAlloc (deleted)
04-24 05:37:00.574: I/DEBUG(58):     bec7961c  00000000  
04-24 05:37:00.574: I/DEBUG(58):     bec79620  00000000  
04-24 05:37:00.574: I/DEBUG(58):     bec79624  00000000  
04-24 05:37:00.574: I/DEBUG(58):     bec79628  00000000  
04-24 05:37:00.574: I/DEBUG(58):     bec7962c  00000000  
04-24 05:37:00.574: I/DEBUG(58):     bec79630  00156cae  [heap]
04-24 05:37:00.574: I/DEBUG(58):     bec79634  00156c98  [heap]
04-24 05:37:00.574: I/DEBUG(58):     bec79638  4004c4d8  
04-24 05:37:00.574: I/DEBUG(58):     bec7963c  4004c4d8  
04-24 05:37:00.574: I/DEBUG(58):     bec79640  00161678  [heap]
04-24 05:37:00.574: I/DEBUG(58):     bec79644  001616b0  [heap]
04-24 05:37:00.699: W/ActivityManager(189): Launch timeout has expired, giving up wake lock!
04-24 05:37:00.804: W/ActivityManager(189): Activity idle timeout for ActivityRecord{41571d28 tiny.test2/.Test2Activity} 
```

通过 ndk-stack 运行它会给出

```
********** Crash dump: **********
Build fingerprint: 'Android/full_mini210/mini210:4.0.3/IML74K/eng.root.20120209.191511:eng/test-keys'
pid: 1945, tid: 1945  >>> tiny.test2 <<<
signal 11 (SIGSEGV), code 1 (SEGV_MAPERR), fault addr 00001a85
Stack frame #00  pc 50408a56  /data/data/tiny.test2/lib/libcaneth.so: Unable to locate routine information for address 50408a56 in module ./obj/local/armeabi/libcaneth.so 
```

50408a56、408a56 或 8a56 上的 addr2line 返回`??`（我更改了数字，因为我读到 addr2line 需要偏移地址）。我还尝试了 libcaneth.so 在堆栈上的最后一个地址，50406825，同样的交易。

readelf 告诉我最近的地址在 dynsyms 中，我尝试导出 dynsyms 的内容，但它没有地址信息。

ndk-gdb 给了我相同的 SIGSEGV 电脑地址，但也没有找到函数名或行号。鉴于没有确定的函数标签，这是否表明错误出在类变量初始化中？如何找到故障线？我可能做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T23:41:59.517

您是否正在编译和链接调试符号

LOCAL_CFLAGS +=-g

LOCAL_LDLIBS :=-g

# knockout.js - 在复杂对象的小 observableArray 上使用 push 会导致糟糕的性能

> ID：10292471
> 
> 赞同：2
> 
> 时间：2012-04-24T05:58:55.280
> 
> 标签：knockout.js

我有一个非常复杂的应用程序，其中一个 viewModel 有一个记录列表：

```
app.records = ko.observableArray([]) 
```

使用 AJAX，我从服务器获取一些 JSON 并将其填充到数组中：

```
$.getJSON("/api/records", function(data){
    app.records($.map(data, function(item){
      r = new Record(item);
      return r;
    });
}); 
```

至少，这对我的测试数据集中的 6 个项目非常有效。该应用程序几乎可以立即加载。但我也有一个创建新记录按钮，它可以做到这一点：

```
$.post("/api/records", {}, function(record){
    r = new Record(record);
    console.log("About to push...");
    app.records.push(r);
    console.log("Pushed the new record.");
}); 
```

第一个日志行会立即出现，但第二行大约需要 8 秒才能出现。注释掉推送使操作有效地即时。我相信问题是由我拥有的相当多的相当复杂的计算变量引起的；我认为推动导致它重新计算*EVERYTHING*。然而，奇怪的是在页面加载时添加六个测试项目是即时的。

谁能给我一些调试的提示？该应用程序未处于我可以轻松共享代码或构建隔离问题的 JSFiddle 的状态。我不愿意只是盲目地注释掉行以查看是否有任何解决问题的方法，因为这可能需要很长时间。有没有人有任何想法？或者至少是一个总体策略？:)

（我目前正在使用 2.1 候选版本；Knockout 2.0 也会出现问题。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T12:36:06.627

看看 Niemeyer 博客上的这篇文章：[http ://www.knockmeout.net/2012/04/knockoutjs-performance-gotcha.html](http://www.knockmeout.net/2012/04/knockoutjs-performance-gotcha.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T15:58:49.570

好吧，您关于计算可观察量导致性能问题的理论似乎是合理的。使用“二分搜索”策略将它们注释掉可能是定位问题的最快方法。或者，您可以将日志记录添加到您计算的所有 observables。

# javascript - 如何使用 javascript 捕获点击并将页面发送到链接？

> ID：10292472
> 
> 赞同：0
> 
> 时间：2012-04-24T05:58:59.173
> 
> 标签：javascript, jquery

我有以下代码：

```
<li><a id="logout" 
            class="access button red"
            href="/MyAccount/Access/Logout"
            data-href="/MyAccount/Access/Logout"
            title="Logout"><span class="smaller">LOGOUT</span></a></li> 
```

当用户访问此链接时，它会在浏览器屏幕底部显示“/MyAccount/Access/Logout”。

我可以让链接使用 javascript 转到新位置吗？就像是：

```
 $('#logout').click(function (e) {
            ???
            ???
            e.preventDefault();
        }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T06:02:10.360

将您的href更改为“#”

在您的注销功能中：window.location = "/MyAccount/Access/Logout";

无需防止默认...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T06:02:53.530

`<li><a id="logout" class="access button red" href="#" title="Logout"><span class="smaller">LOGOUT</span></a></li>`

`$('#logout').click(function (e) { window.location="/MyAccount/Access/Logout"; });`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T06:03:27.007

```
<a href="#" onclick="location='logout'; return false;">log out</a> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-24T06:10:08.047

使用“javascript:void(0)”作为锚标记的 href attr

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-24T09:28:05.940

用这个：

```
$('#logout').click(function (e) {
     e.preventDefault();
     window.location.href = 'your/new/location';
}); 
```

# git - 删除远程 git 分支时出现“错误：无法推送到不合格的目的地”

> ID：10292480
> 
> 赞同：144
> 
> 时间：2012-04-24T05:59:51.283
> 
> 标签：git

我正在尝试删除一个远程git分支

```
git push origin :my_remote_branch 
```

并得到：

```
error: unable to push to unqualified destination: my_remote_branch
The destination refspec neither matches an existing ref on the remote nor
begins with refs/, and we are unable to guess a prefix based on the source ref.
error: failed to push some refs to 'git@example.com:/myrepo' 
```

这些是我目前的分支机构

```
git branch -a
* develop
  master
  remotes/origin/HEAD -> origin/master
  remotes/origin/develop
  remotes/origin/my_remote_branch

git branch -r --merged
  origin/HEAD -> origin/master
  origin/develop
  origin/master 
```

任何关于我如何摆脱这个分支的想法都将不胜感激。

* * *

## 回答 #1

> 赞同：281
> 
> 时间：2012-04-24T07:11:57.430

存在于本地存储库中的事实`refs/remotes/origin/my_remote_branch`并不意味着`refs/heads/my_remote_branch`存在于`origin`远程存储库中。

如果它已经在原点被删除，请执行此`git fetch -p origin`操作。`refs/remotes/origin/my_remote_branch`该`-p`选项告诉 fetch 删除相应遥控器中不再存在的任何跟踪分支；默认情况下，它们被保留。

* * *

## 回答 #2

> 赞同：61
> 
> 时间：2012-04-24T15:54:27.320

发现[清理旧远程 git 分支](https://stackoverflow.com/questions/3184555/cleaning-up-old-remote-git-branches)的问题，这成功了

```
git branch -r -d origin/my_remote_branch 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2014-03-31T09:05:54.897

我在尝试删除已删除的远程分支时遇到了这个问题。所需要的只是一个修剪：

```
git remote prune origin 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2017-01-06T09:51:47.580

尝试以下两个选项来强制删除远程分支

选项1

```
get push origin --delete <branchName> 
```

选项 2

```
git fetch -p origin
git branch -r -d origin/<branchName> 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2014-03-06T07:50:34.510

```
git branch -r -d origin/my_remote_branch 
```

对我来说还不够。在我不得不去服务器并直接使用 git 目录（这既危险又丑陋）来删除分支之前：

```
ssh mygitserver
su - git
cd /home/git/repositories/my_remote_branch.git/
git  --git-dir=. --work-tree=/tmp/ branch -D my_remote_branch 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2017-11-08T18:18:17.853

对我来说，问题是，这是我在 github 上的默认分支。我更改了默认分支，然后删除操作成功。

希望对某人有所帮助

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-09-24T19:41:57.993

我有类似的问题。[首先进行了这个讨论，但是直到我看到https://stackoverflow.com/a/32147743/4209849](https://stackoverflow.com/a/32147743/4209849)之前我无法解决问题。

**它只是添加了一个关于区分`origin/my-branch-name`和的提示`my-branch-name`。**

具体来说，我应该使用：

```
git push origin :my_remote_branch 
```

代替

```
git push origin :origin/my_remote_branch 
```

这至少解决了我的问题，希望它也能帮助其他人。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-08-12T17:06:41.810

有同样的问题，我手动编辑了我的`./.git/config`文件以包括：

```
[branch "branchName"]
remote = origin
merge = refs/heads/branchName 
```

这导致：`error: src refspec branchName matches more than one.`我通过运行来解决这个问题`$git tag -d branchName`。之后，我能够将新分支推送到上游。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-05-29T10:07:50.900

这对我有用：我在 github UI 上创建了远程分支，然后推送了与它同名的本地分支。如果其他方法不起作用，请尝试一下。另一种方法是在本地创建一个新分支并推送一个空分支，然后选择您的提交并再次推送到您的远程。

# javascript - 如何根据值选择元素

> ID：10292481
> 
> 赞同：-1
> 
> 时间：2012-04-24T05:59:58.570
> 
> 标签：javascript, jquery, asp.net, radiobuttonlist

如何根据值选择元素？例如，我想在`RadiobuttonList`控件中选择一个具有`value=2`.

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T06:04:16.743

你可以试试

```
$("#<%=rbl.ClientID%> input[value=2]").attr('checked', true); 
```

或者

```
$('#<%=rbl.ClientID %>').find("input[value=2]").attr("checked", "checked"); 
```

**注意** rbl 是单选按钮列表的 id

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T06:04:19.553

```
$('#{id of RadiobuttonList} input[value="2"]').attr('checked', 'checked') 
```

或者对于 jQuery 1.6+：

```
$('#{id of RadiobuttonList} input[value="2"]').prop('checked', true) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-24T06:07:05.597

你可以使用这个 CSS 选择器：

```
input[type="radio"][value="2"] 
```

在jQuery中

```
$('input[type="radio"][value="2"]') 
```

# jquery - 有没有办法使用 URL 查询参数和 jquery animatedcollapse.js？

> ID：10292483
> 
> 赞同：0
> 
> 时间：2012-04-24T06:00:26.667
> 
> 标签：jquery

我将 jquery 的动画折叠用于我网站的常见问题解答部分，以保持整洁。

我默认关闭了所有 div，但是如果我使用 URL 查询参数调用 id，有没有办法打开 1 个特定的 div？

我所指的网址是：`http://www.carcityofdanbury.com/?cat=02&do=FAQ` 意思是如果我有一个指向`http://www.carcityofdanbury.com/?cat=02&do=FAQ#id=4`页面加载时间的链接，我可以关闭除#4 之外的所有 div 吗？

我搜索了谷歌并找不到这个答案。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T06:04:32.063

Use the method outlined here - [http://www.dynamicdrive.com/dynamicindex17/animatedcollapse_suppliment2.htm](http://www.dynamicdrive.com/dynamicindex17/animatedcollapse_suppliment2.htm)

For example - [http://www.carcityofdanbury.com/?cat=02&do=FAQ&expanddiv=10004](http://www.carcityofdanbury.com/?cat=02&do=FAQ&expanddiv=10004)

Please note that your element IDs should not start with a number. See [HTML & XHTML id attribute question](https://stackoverflow.com/questions/4084337/html-xhtml-id-attribute-question/4084353#4084353).

I'd also recommend you check out a more *up-to-date* plugin (dynamic drive, seriously?). Try the [Twitter Bootstrap Collapse plugin](http://twitter.github.com/bootstrap/javascript.html#collapse).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T06:06:17.850

Stick to all div's that you have attribute data-id = , then on $(document).ready() hide all div's that dont equal to 4

```
$(document).ready(function(){
    $all_divs = $('#div');
    $all_divs.each(function(){
       if ($(this).attr("data-id") != 4) {
           $(this).hide();
       }
    });
}); 
```

# deployment - 如何自动部署 web，但不中断生产服务器

> ID：10292484
> 
> 赞同：0
> 
> 时间：2012-04-24T06:00:31.653
> 
> 标签：deployment, web, production-environment

我想部署一个当前正在运行的网站（php、python、ROR 等等）。
我的代码托管在 git 中。
我读到[“使用 git 部署您的网站更改”](http://sebduggan.com/blog/deploy-your-website-changes-using-git/)

和[stackoverflow答案](https://stackoverflow.com/questions/279169/deploy-a-project-using-git-push/327315#327315)

它很有用。但它有一个问题。它会中断生产服务器。
虽然时间很短。但是如果我们的服务器负载很重。它也会打断用户。

所以我的问题是如何在不中断的情况下将代码部署到生产服务器。
假设几种情况。

1.  只有一台生产服务器。
    是否唯一可行的方法是停止生产服务器并等待部署完成？

2.  超过两台生产服务器。
    我知道我们可以停止一个生产服务器并部署到它，然后部署到下一个服务器直到完成。
    但是有什么方法可以更好地做到这一点吗？

所有的方法都应该是自动的。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T06:08:05.243

您无法直接部署到实时生产服务器，而不会在重新加载时中断某些连接。这实际上取决于网站的类型。如果它的服务器正在服务 php 页面，则替换页面将允许下一个客户端获取它们。但是，如果部署意味着重新启动进程，那么它将中断。最终，除非它的静态页面，否则您肯定会与某些事情发生冲突。

也许您可以做的是在代理后面有两个生产服务器。活一个。部署到另一个并在部署完成后切换 ip/host，然后开始向新更新的服务器发送新流量。原始服务器现在没有接收流量。您可以下次部署到该服务器并将主机切换回代理。然后你总是有一个实时服务器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T08:14:33.487

我找到了一个几乎可以解决我的问题的工具。
它由名为[WePloy](http://blog.wepay.com/2010/11/30/weploy-wepays-deployment-tool/)的 PHP 作者 Rasmus Lerdorf 开发。
但它只能部署 PHP 网站。

# android - 在从数据库中检索的 android 应用程序中显示数据

> ID：10292485
> 
> 赞同：0
> 
> 时间：2012-04-24T06:00:32.737
> 
> 标签：android

我想显示从任何数据库中检索到的数据。哪个视图是最好的网格视图或表格。我们可以像表格格式一样在网格视图中显示数据吗？请给我推荐一个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T06:10:35.940

您可以使用列表视图、网格视图，也可以为此目的使用视图组...我推荐使用列表视图，因为它比视图组更轻。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T06:08:12.950

You can use the `ListView` which can contain no. of columns within each row.

Data can be populated by using `ArrayAdapter` or `Custom Adapter` which extends `BaseAdapter`.

You may refer to [this](http://android-codes-examples.blogspot.in/2011/09/using-sqlite-to-populate-listview-in.html) on SO.

# watir - watir 脚本中 select_list 的奇怪行为

> ID：10292488
> 
> 赞同：1
> 
> 时间：2012-04-24T06:00:41.933
> 
> 标签：watir

这个问题是关于 watir 中的 select_list 的。

我们有一个行为异常的 Web 应用程序。

有一个四页表单，允许用户在网站上注册，并且在表单的其中一个页面中有一个 select_list，用户必须在其中选择值列表之一。

值列表是城市列表。

选择列表的HTML代码是这样的

```
<select id="roleDetailsForm:city" name="roleDetailsForm:city">
<option value="">---Select---</option>
<option value="ABG">ABINGDON, QL</option>
</select> 
```

我为选择值列表之一而编写的 watir 代码是

```
@browser.select_list(:name => "roleDetailsForm:city").set "ADELAIDE, SA" 
```

问题是

开发人员日志说 select_list 正在向服务器发送文本而不是值，这导致请求失败。

因此，不是 ADL 作为选择的值发送给服务器，而是“ADELAIDE, SA”作为选择的值。

但是，这仅在运行脚本时发生。

当用户在 select_list 中手动选择相同的文本并单击提交时，它会将“ADL”作为正确的值发送

目前，开发人员一直坚持认为应用程序行为异常是由于脚本所致。

但是，我无法弄清楚为什么会这样？

渴望知道是否有其他人遇到过此类问题，以及这是否真的是由于脚本造成的。

除了上面的watir代码我还尝试过

```
@browser.select_list(:name => "roleDetailsForm:city").set  (@browser.select_list(:name => "roleDetailsForm:city").options[10]) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T11:01:12.483

尝试使用

```
@browser.select_list(:name => "roleDetailsForm:city").select("ADELAIDE, SA") 
```

我认为`set`这只是`select`原始 Watir 的别名，但我不再确定。

值得一试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T13:49:17.377

你可以试试：

```
@browser.select_list(:name => "roleDetailsForm:city").select_value('ADL') 
```

当您从选择列表中选择某些内容时，是否可能会填充一个隐藏字段（并且隐藏字段是服务器上正在检查的内容？也许使用 Firebug 或类似方法来检查当您手动选择时是否有任何事件正在运行名单。

# android - 将 CSV 文件导入 Android Apps Sqlite 数据库

> ID：10292493
> 
> 赞同：3
> 
> 时间：2012-04-24T06:01:20.813
> 
> 标签：android, database, sqlite, csv, import

我有一个从 Sqlite 浏览器导出的 csv 文件，其中包含一个表，我已将其放在 sdcard 中。我希望我可以以编程方式导入我的 android 应用程序数据库我尝试了很多但未能获得任何帮助将不胜感激。我在android中有相同的tabe creatd，但我不想通过从csv文件中逐行读取内容并执行每次查询插入......所以重点是直接导入

嘿，我已经浏览了这段代码

```
public static void InsertCSVFile(String FilePath, String filename,
        String TableName) {
    try {
        FileReader fr = new FileReader(new File("mnt/sdcard/",
                "olinecsv.csv"));
        BufferedReader br = new BufferedReader(fr);
        String data = "";
        String tableName = "Test";
        String columns = "ID,NAME,TYPE";
        String InsertString1 = "INSERT INTO " + tableName + " (" + columns
                + ") values(";
        String InsertString2 = ");";

        mainDatabase.beginTransaction();
        while ((data = br.readLine()) != null) {
            StringBuilder sb = new StringBuilder(InsertString1);
            String[] sarray = data.split(",");
            sb.append(sarray[0] + ",");
            sb.append( sarray[1] + ",");
            sb.append(sarray[2]);
            sb.append(InsertString2);
            if(sarray[0].contains("ID"))
                continue;
            mainDatabase.rawQuery(sb.toString(), null);
            //mainDatabase.execSQL(sb.toString());
        } 
```

我已将该文件放在 sdcard 中，并且我正在获取查询 StringBuilder，但出现错误或异常时，表中没有输入任何内容，但是，在调试我在 Sqlite 程序中运行的相同查询时，它可以正常工作，看到我正在犯错误和进一步建议将不胜感激

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T06:04:54.917

There is no built-in CSV import function available for you: you will need to read the CSV file line by line and insert it. There are a number of CSV parsing programs (I personally use [OpenCSV](http://opencsv.sourceforge.net/)) that will do an excellent job reading from a CSV file on disk and extracting rows. If you have issues writing a valid insert function ask a question and include your code.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-05-20T06:54:58.133

试试这个代码，

在 res>raw 中创建一个文件夹，并将 yourfile.csv 文件放在 raw 文件夹中。

添加此方法以在 sqlite 中插入数据，

```
 public void insertCSVData(Activity activity, InputStream is, String tableName) {

    String colunmNames = null, str1 = null;
    open();

    try {

        BufferedReader buffer = new BufferedReader(new InputStreamReader(is));
        String line = "";

        String str2 = ");";

        db.beginTransaction();

        int i = 0;
        while ((line = buffer.readLine()) != null) {
            i++;
            if (i == 1) {
                colunmNames = line;
                str1 = "INSERT INTO " + tableName + " (" + colunmNames + ") values (";
            } else {

                StringBuilder sb = new StringBuilder(str1);
                String[] str = line.split(",");

                for (int h = 0; h < str.length; h++) {

                    if (h == str.length - 1) {
                        sb.append("'" + str[h] + "'");
                    } else {
                        sb.append("'" + str[h] + "',");
                    }
                }

                sb.append(str2);
                db.execSQL(sb.toString());
            }
        }

        db.setTransactionSuccessful();
        db.endTransaction();

    } catch (Exception e) {

        close();

        e.printStackTrace();
    }

    close();
}
   public void open() {
    db = this.getWritableDatabase();
}

public void close() {
    db.close();
} 
```

调用此方法

```
insertCSVData(Activity, getResources().openRawResource(R.raw.yourfile.csv), tableName); 
```

我希望这段代码能解决你的问题......

# html - HTML表格将内容推送到新行而不使用元素

> ID：10292497
> 
> 赞同：1
> 
> 时间：2012-04-24T06:01:43.357
> 
> 标签：html, css, tablesorter

有一些表格数据可以通过标题排序显示。我正在为此使用[Table Sorter](http://tablesorter.com/docs/#Download)插件。每行还有一个可折叠面板，可在每行下方打开/关闭。目前我已经将这些面板实现为`<tr>`jQuery 显示/隐藏的元素。但是，当表格排序器对列进行排序时，此实现也会导致对这些面板进行排序。

在每行下方显示可折叠面板的替代方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T06:22:52.097

HTML 规范允许`tbody`一个表中有多个 s。我认为您应该`tbody`为每一行使用 1 （可以有多个 1 `tr`）。

```
<table>
  <thead></thead>
  <tbody>
    <tr><!-- 1st row with data columns --></tr>
    <tr><!-- 2nd row which is hidden and with the data that gets shown after expanding --></tr>
  </tbody>
  <tbody><!-- similar to the first tbody --></tbody>
  <tfoot></tfoot>
</table> 
```

此外，Tablesorter 插件未正确实现。尝试使用它的叉子 - [https://github.com/renatoalbano/jquery-tablesorter/](https://github.com/renatoalbano/jquery-tablesorter/)

* * *

参考：[https ://developer.mozilla.org/en/HTML/Element/table](https://developer.mozilla.org/en/HTML/Element/table)

# android-ndk - JNI 和 pthread

> ID：10292507
> 
> 赞同：1
> 
> 时间：2012-04-24T06:02:47.383
> 
> 标签：android-ndk

我正在调用 JNI_OnLoad 来保存 JavaVM* localy：

```
 JavaVM * and_jvm = NULL;
             jint JNI_OnLoad(JavaVM* vm, void* reserved)
             {
                   and_jvm = vm;
                   return JNI_VERSION_1_6;
             } 
```

当我开始我的线程时，我打电话

```
 void * thread_f (void * v)
             {
             jint attachResult = and_jvm->AttachCurrentThread(&env,NULL);
             //The attachResult is 0.
             jclass my_class= (jclass)env->NewGlobalRef(env->FindClass("my/package/com/MyClass"));
             //my_class is 0
             if (my_class == 0)
                  return NULL;
             } 
```

如果我从线程中调用 NewGlobalRef，它会返回一个有效的对象。怎么了？

10xs，那鸿

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-12T17:31:17.927

问题不在于，`NewGlobalRef`而是在于`FindClass`。

最好`FindClass`在`JNI_OnLoad`. 这是因为类加载器的一些问题......当您在新线程上时，使用了不同的类加载器，这就是找不到该类的原因。

您实际上可以`my_class`创建一个全局，创建`GlobalRef`in`JNI_OnLoad`并在程序中的任何位置使用它，而不会出现问题。

# javascript - 约束 RadDock 的拖放

> ID：10292511
> 
> 赞同：0
> 
> 时间：2012-04-24T06:03:02.033
> 
> 标签：javascript, jquery, asp.net, telerik

我正在使用`ASP.NET 3.5`.

在`Teleric, Rad Dock Control`, 它有能力`Dock`朝`Left`,`Right`和`Top`移动`Bottom`。

我的问题是，我们如何限制用户将`Rad Dock`可见部分移出`Right/Bottom`方向？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T13:17:03.227

> `Teleric`研究表明，管理员所说的不可能
> 
> # **[这里](http://www.telerik.com/community/forums/aspnet/docking/constraint-the-move-of-raddock.aspx#tForumTop)**

# java - 如何使用 Gson 库反序列化 JSON 对象数组？

> ID：10292514
> 
> 赞同：20
> 
> 时间：2012-04-24T06:03:11.560
> 
> 标签：java, json, gson

我在尝试使用 Gson 库反序列化 JSON 对象数组时遇到问题。

JSON数组的一个例子：

```
[
    {"ID":1,"Title":"Lion","Description":"bla bla","ImageURL":"http:\/\/localhost\/lion.jpg"},
    {"ID":1,"Title":"Tiger","Description":"bla bla","ImageURL":"http:\/\/localhost\/tiger.jpg"}
] 
```

你怎么看？反序列化这种 JSON 响应的正确 Java 代码是什么？

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2012-04-24T06:32:33.950

要反序列化 JSONArray，您需要使用 TypeToken。您可以从[GSON 用户指南](https://sites.google.com/site/gson/gson-user-guide)中了解更多信息。示例代码：

```
@Test
public void JSON() {
    Gson gson = new Gson();
    Type listType = new TypeToken<List<MyObject>>(){}.getType();
    // In this test code i just shove the JSON here as string.
    List<Asd> asd = gson.fromJson("[{'name':\"test1\"}, {'name':\"test2\"}]", listType);
} 
```

如果你有一个 JSONArray 那么你可以使用

```
...
JSONArray jsonArray = ...
gson.fromJson(jsonArray.toString(), listType);
... 
```

# blackberry - 在 Blackberry 中以编程方式读取日志

> ID：10292518
> 
> 赞同：1
> 
> 时间：2012-04-24T06:03:33.843
> 
> 标签：blackberry, logging

对于我的一个黑莓应用程序，我需要阅读日志/事件日志。如何从我的应用程序中读取这些日志。是否可以以编程方式读取日志？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T08:25:59.343

不幸的是，不可能以编程方式进行。如果您有权访问设备，则可以手动获取它们。

# javascript - 输入表单中的禁止字符？

> ID：10292521
> 
> 赞同：0
> 
> 时间：2012-04-24T06:03:37.503
> 
> 标签：javascript

这是我当前的代码，当用户键入时，它会从输入中删除除 $、逗号和点之外的所有非数字字符：

```
<input type="text" id="price" name="price" onkeyup="updatePrice(this.value)">

function updatePrice(p) {
    document.getElementById("price").value = p.replace(/[^0-9$.,]/g, '');
    } 
```

问题是它在输入字符后会删除字符，所以如果你输入 A，你会在它消失之前看到它的几分之一秒。Keydown 不好，因为它在输入实际更改之前运行脚本。

如何完全防止这些禁止字符出现在输入中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T06:53:57.203

您可以使用 keypress 事件和 blur 事件的组合来验证每个键和整个字符串。如果您将输入更改为 be `type`，`type="number"`则用户代理将负责确保该值在更现代的浏览器中对您来说是有效的数字格式。

```
// on key press occurs before the text is added visually to the input field
​document.getElementById('price').addEventListener('keypress', function(e) {
  if(!String.fromCharCode(e.which).match(/[0-9$\.,]/)) {
    e.preventDefault(); // not a valid character so cancel it
  }
}, false);​​​​​​​​​​​​​

// complete validation for the text that was entered on blur to update price
document.getElementById('price').addEventListener('blur', function(e) {
  var validated = parseFloat(this.value.replace(/[^0-9\.]g/, ''));
  // ... use the validated string to do something
}, false); 
```

​</p>

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T06:19:34.537

*   用于`onblur`在输入失去焦点时执行验证 - 用户在键入时不必意识到这一点。
*   用户根本不必知道这一点 - 您可以在提交时执行验证。

# css - 如何在 iPad 网页中禁用 HTML 文件的滚动

> ID：10292522
> 
> 赞同：1
> 
> 时间：2012-04-24T06:03:44.477
> 
> 标签：css, html

我正在为我的网页使用以下代码，但我已经删除了脚本，但它仍然页面交换是用 ipad 的手指如何删除它。我已经删除了所有脚本，但它又在交换。我试过了

```
<body scroll='no'> 
```

但没有得到任何回应

HTML 文件代码

```
<!DOCTYPE HTML>
<html manifest="draxxin.manifest">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <link rel="apple-touch-icon" href="icon.png" />
    <title>BRD</title>
    <link rel="stylesheet" type="text/css" href="fancybox/jquery.fancybox-1.2.6.css"
    />
    <link rel="shortcut icon" type="image/ico" href="images/favicon.gif" />
    <link rel="stylesheet" href="css/lightbox.css" type="text/css" media="screen"
    />
    <link type="text/css" href="newstyle.css" rel="stylesheet" />
    <script src="js/jquery-1.7.2.min.js"></script>
    <script src="js/jquery-ui-1.8.18.custom.min.js"></script>
    <script language="javascript" type="text/javascript">
        function showHideDiv()
        {
            document.getElementById("one").style.visibility = "visible";
            document.getElementById("two").style.visibility = "visible";

            document.getElementById("three").style.visibility = "hidden";
            document.getElementById("four").style.visibility = "hidden";

        }
    </script>
    <script language="javascript" type="text/javascript">
        function showHideView()
        {

            document.getElementById("one").style.visibility = "hidden";
            document.getElementById("two").style.visibility = "hidden";
            document.getElementById("three").style.visibility = "visible";
            document.getElementById("four").style.visibility = "visible";

        }
    </script>
    <script type="text/javascript">
        $(document).ready(function ()
        {
            $(".linkbutton").click(function ()
            {
                /* <!--   var address= $(this).attr("src");-->*/
                var address = $(this).attr("data-light");

                $("#popup").fadeIn("slow");
                $("#lightbox").attr("src", address);
            });
            $("#close").click(function ()
            {
                $("#popup").fadeOut("fast");
            });
        });
    </script>
    <script type="text/javascript">
        $(document).ready(function ()
        {
            $(".linkbutton_one").click(function ()
            {
                /* <!--   var address= $(this).attr("src");-->*/
                var address = $(this).attr("data-light-one");

                $("#popup_one").fadeIn("slow");
                $("#lightbox_one").attr("src", address);
            });
            $("#close_one").click(function ()
            {
                $("#popup_one").fadeOut("fast");
            });
        });
    </script>
    <script type="text/javascript">
        $(document).ready(function ()
        {
            $(".linkbutton_two").click(function ()
            {

                /* <!--   var address= $(this).attr("src");-->*/

                var address = $(this).attr("data-light-two");

                $("#popup_two").fadeIn("slow");
                $("#lightbox_two").attr("src", address);
            });
            $("#close_two").click(function ()
            {
                $("#popup_two").fadeOut("fast");
            });
        });
    </script>
    <style type="text/css">
        #popup {
            background:#FFFFFF;
            height:75%;
            width: 100%;
            position:absolute;
            display: none;
        }
        #center {
            border: 10px solid #121212;
            margin: 6% 0 0 20%;
            width: 572px;
        }
        #close {
            float: right;
            position:absolute;
            margin:25px 0px 0 0;
            top:0px;
            left:510px;
        }
    </style>
    <style type="text/css">
        #popup_one {
            background:#FFFFFF;
            height:100%;
            width: 100%;
            position:absolute;
            display: none;
        }
        #center_one {
            border: 10px solid #121212;
            margin: 6% 0 0 20%;
            width: 318px;
        }
        #close_one {
            float: right;
            position:absolute;
            margin:25px 0px 0 0;
            top:0px;
            left:510px;
        }
    </style>
    <style type="text/css">
        #popup_two {
            background:#FFFFFF;
            height:100%;
            width: 100%;
            position:absolute;
            display: none;
        }
        #center_two {
            border: 10px solid #121212;
            margin: 6% 0 0 20%;
            width: 318px;
        }
        #close_two {
            float: right;
            position:absolute;
            position:relative;
            margin:25px 0px 0 0;
            top:0px;
            left:510px;
        }
    </style>
</head>

<BODY onLoad="showHideDiv()">

    <body>
        <div id="container">
            <div id="page_one" class="panel">
                <div class="main_heading">Overview</div>
                <div class="menu">
                    <ul>
                        <li class="stix"></li>
                        <li>
                            <a href="#page_one"><img src="image/overview_active.png"/></a>
                        </li>
                        <li class="stix"></li>
                        <li>
                            <a href="#page_two"><img src="image/strategy.gif"/></a>
                        </li>
                        <li class="stix"></li>
                        <li>
                            <a href="#"><img src="image/draxxin.gif"/></a>
                        </li>
                        <li class="stix"></li>
                        <li>
                            <a href="#"><img src="image/excede.gif"/></a>
                        </li>
                        <li class="stix"></li>
                        <li>
                            <a href="#"><img src="image/results.gif"/></a>
                        </li>
                        <li class="stix"></li>
                        <li>
                            <a href="#"><img src="image/reference.gif"/></a>
                        </li>
                        <li class="stix"></li>
                    </ul>
                </div>
                <div class="rightclass">
                    <img src="image/pageone_image.png" />
                </div>
                <div>
                    <ul>
                        <li class="midmenu">
                            <a href="index.html"><img src="image/backward.png"/></a>
                        </li>
                        <!--#page_one-->
                        <li class="midmenu1">
                            <a href="#page_two"><img src="image/forward.png"/></a>
                        </li>
                    </ul>
                </div>
                <div class="text_paragraph">
                    <p>Bovine Respiratory Disease (BRD) is the leading cause of economic loss
                        in the beef industry.
                        <small>1, 2</small>
                    </p>
                </div>
                <div class="text_paragraph_1">
                    <b>Economic loss:</b>
                    <ul>
                        <li>Costs the industry an estimated $1 billion each year.
                            <small>3, 4</small>
                        </li>
                        <li>Losses can be attributed to death, reduced feed and treatment costs.
                            <small>3,4</small>
                        </li>
                        <li>Economic losses range from an estimated $57.48 to $239.69 per head.
                            <small>1, 2</small>
                        </li>
                    </ul>
                </div>
                <div class="text_paragraph_2">
                    <b>Bacterial Culprits:</b>
                    <p>Four bacterial pathogens are commonly associated with BRD.</p>
                    <ul>
                        <li>Mannheimia haemolytica</li>
                        <li>Pasteurella multocida</li>
                        <li>Histophilus somni</li>
                        <li>Mycoplasma bovis</li>
                    </ul>
                </div>
                <div>
                    <img src="image/smallicon_2.png" class="linkbutton">
                    <img src="image/smallicon_2.png" class="linkbutton" data-light="image/popup_page_1.png"
                    />
                </div>
                <div id="popup">
                    <div id="center">
                        <img id="lightbox" src="image/popup_page_1.png">
                        <img id="close" src="images/close.png" alt="close">
                    </div>
                    <!-- #center -->
                </div>
            </div>
            <!-- End of page one-->
            <div id="page_two" class="panel">
                <div class="main_heading_two">Strategy</div>
                <div class="menu">
                    <ul>
                        <li class="stix"></li>
                        <li>
                            <a href="#page_one"><img src="image/overview.gif" /></a>
                        </li>
                        <li class="stix"></li>
                        <li>
                            <a href="#page_two"><img src="image/strategy_active.png"/></a>
                        </li>
                        <li class="stix"></li>
                        <li>
                            <a href="#"><img src="image/draxxin.gif"/></a>
                        </li>
                        <li class="stix"></li>
                        <li>
                            <a href="#"><img src="image/excede.gif"/></a>
                        </li>
                        <li class="stix"></li>
                        <li>
                            <a href="#"><img src="image/results.gif"/></a>
                        </li>
                        <li class="stix"></li>
                        <li>
                            <a href="#"><img src="image/reference.gif"/></a>
                        </li>
                        <li class="stix"></li>
                    </ul>
                </div>
                <div class="rightclass_one">
                    <img src="image/whiteslide.png" />
                </div>
                <div class="pagetwo_text">
                    <p>Get up to 21 days of BRD therapy strategy using longer-duration antimicrobials
                        DRAXXIN ® (tulathromycin) Injectable Solution and EXCEDE ® (ceftiofur crystalline
                        free acid) Sterile Suspension.</p>
                </div>
                <div class="pagetwo_list_text">Advantages for Producers:
                    <ul>
                        <li>Fewer treatments</li>
                        <li>Less stress on cattle</li>
                        <li>Fewer mortalities</li>
                        <li>Cattle can recover in their own pen</li>
                        <li>Lower treatment costs and higher profits</li>
                    </ul>
                </div>
                <div class="pagetwo_list_text2">Extended duration strategy</div>
                <div>
                    <ul>
                        <li class="midmenu_1">
                            <a href="#page_one"><img src="image/backward.png"/></a>
                        </li>
                        <li class="midmenu_2">
                            <a href="#page_two"><img src="image/forward.png"/></a>
                        </li>
                    </ul>
                </div>
                <div class="right_text">
                    <p>Either way you use them, it takes both DRAXXIN and EXCEDE for control
                        and treatment of BRD in high-risk cattle to give you the longest duration
                        of BRD therapy</p>
                </div>
                <div class="image_21">
                    <img src="image/pagetwo_graph_two_4.png" />
                </div>
                <div class="ratemeter">
                    <img src="image/pagetwo_graph_one.png" />
                </div>
                <div id="one" class="image_one">
                    <img src="image/optiononetwo.png" />
                </div>
                <div id="two" class="image_two">
                    <img src="image/optiononeone.png" />
                </div>
                <div id="three" class="image_one_one">
                    <img src="image/pagetwo_graph_two_11.png" />
                </div>
                <div id="four" class="image_two_two">
                    <img src="image/pagetwo_graph_two_22.png" />
                </div>
                <div class="option_image">
                    <img src="image/option_1.png" onclick="showHideDiv()" />
                </div>
                <div class="option_image_label">Option 1</div>
                <div class="option_image_one">
                    <img src="image/option_1.png" onclick="showHideView()" />
                </div>
                <div class="option_image_label_one">Option 2</div>
                <div class="fourteen_day">
                    <img src="image/button_14days.PNG" />
                </div>
                <div class="heading_one">Post Metaphylaxis Interval (PMI)</div>
                <div>
                    <img src="image/smallicon_1.png" class="linkbutton_one">
                    <img src="image/smallicon_1.png" class="linkbutton_one" data-light-one="image/popup_2_page_2.png"
                    />
                </div>
                <div id="popup_one">
                    <div id="center_one">
                        <img id="lightbox_one" src="image/popup_2_page_2.png">
                        <img id="close_one" src="images/close.png" alt="close">
                    </div>
                    <!-- #center -->
                </div>
                <div class="seven_day">
                    <img src="image/button_7days.PNG" />
                </div>
                <div class="heading_two">Post Treatment Interval (PTI)</div>
                <!-- <div class="linkbutton_two">
        <a href="image/popup_2_page_2.png" rel="lightbox"><img src="image/smallicon_1.png"  alt="" /></a>
       </div>
        -->
                <div>
                    <img src="image/smallicon_1.png" class="linkbutton_two">
                    <img src="image/smallicon_1.png" class="linkbutton_two" data-light-two="image/popup_2_page_2.png"
                    />
                </div>
                <div id="popup_two">
                    <div id="center_two">
                        <img id="lightbox_two" src="image/popup_2_page_2.png">
                        <img id="close_two" src="images/close.png" alt="close">
                    </div>
                    <!-- #center -->
                </div>
            </div>
            <!-- End of page two-->
        </div>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T06:50:21.997

只是隐藏滚动

```
<style>
    body, html { overflow: hidden; }
</style> 
```

# c# - Visual Studio 项目名称有句号可以吗？

> ID：10292533
> 
> 赞同：1
> 
> 时间：2012-04-24T06:04:24.013
> 
> 标签：c#, .net

我有以下项目：

```
CompanyName.SystemName.ProjectName 
```

与它一起使用时，`Using`它看起来像一个命名空间，但事实并非如此。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-24T06:06:51.387

是的，C# 使用相同的语法 ( `.`) 来表示：

*   命名空间遍历
*   嵌套类型遍历（实际上`+`是内部类型语法）
*   成员访问（字段/属性/方法/常量/枚举/等）
*   作为数字文字中的小数点

然而，这通常根本不是问题......

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-24T06:11:51.257

您声称它*不是*命名空间，但我强烈怀疑它*是*. 默认情况下，当您创建新类时，Visual Studio 会从与项目名称和任何嵌套文件夹匹配的命名空间开始。因此，使用项目名称，`CompanyName.SystemName.ProjectName`我希望*新*的 C# 文件看起来像：

```
using System; // etc

namespace CompanyName.SystemName.ProjectName
{
    public class SomeClass
    {
    }
} 
```

那时，`CompanyName.SystemName.ProjectName`绝对*是*一个命名空间，我完全希望`using`在代码中尝试使用`SomeClass`.

是什么让您认为它*不是*命名空间？

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-24T06:09:08.130

只要是有效的文件名，您就可以以任何您喜欢的方式命名您的项目。通常项目名称与该项目的根命名空间匹配，但这不是硬性规则。

我更喜欢遵循该命名约定，因为它可以更轻松地导航解决方案（如果我知道名称空间，我就知道要在哪个项目中查找）并且它是 VS 中的默认设置。如果您希望默认命名空间与项目名称不同，则必须更改设置。默认情况下，ReSharper 会更进一步，并为项目的子文件夹强制执行命名约定。

# facebook - Facebook send notification to friends using the app when a user joins my app

> ID：10292538
> 
> 赞同：1
> 
> 时间：2012-04-24T06:04:59.313
> 
> 标签：facebook, facebook-graph-api, social-networking

I want to notify user's friends, those that are already using my app that a friend of his has also installed the app.

I see a few apps having a number on the app's and games block. Is there a way of doing it. How do these apps do it. Also can i send a Notification (i.e on the globe icon)

I already have the list of users to notify. How do i notify them in the facebook.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T05:07:54.137

如果您希望接收者在收到通知时采取行动，您可以使用[请求](https://developers.facebook.com/docs/requests/)功能和[请求对话框](https://developers.facebook.com/docs/reference/dialogs/requests/)。请求对话框将一个用户的请求发送给一个或多个用户。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T08:04:52.083

I'm not exactly sure what you meant in the 2nd paragraph, but if I somehow managed to understand something it is that you are asking how you can notify the users. There are a few methods with which you can notify the user, and they are all covered in the [Social Channels](http://developers.facebook.com/docs/channels/) doc.

If you want to only notify a user's friends that already have the app installed you'll have to first find out which users qualify, you have two options for that:

(1) Using the [graph api](http://developers.facebook.com/docs/reference/api/) you can make a request to: *[/me/friends?fields=installed](http://developers.facebook.com/tools/explorer?method=GET&path=me/friends%3Ffields%3Dinstalled)* which should return a list of users, the ones that have the app installed will have this form:

```
{
    "installed": true, 
    "id": "USER_ID"
} 
```

The ones who don't have the app will be of this form:

```
{
    "id": "USER_ID"
} 
```

(2) You can use [FQL](http://developers.facebook.com/docs/reference/fql/user/) to check who are the friends who have the app installed using [this query](https://developers.facebook.com/tools/explorer?method=GET&path=fql%3Fq%3DSELECT%20uid%20FROM%20user%20WHERE%20not%20is_app_user%20and%20uid%20IN%20%28SELECT%20uid2%20FROM%20friend%20WHERE%20uid1%20%3D%20me%28%29%29):

```
SELECT 
    uid
FROM 
    user 
WHERE 
    is_app_user 
    AND 
    uid IN (SELECT uid2 FROM friend WHERE uid1 = me()) 
```

# bash - 从另一个 shell 提供命令行 shell

> ID：10292540
> 
> 赞同：4
> 
> 时间：2012-04-24T06:05:03.450
> 
> 标签：bash, shell, pipe, usability

这个问题可能听起来很奇怪，但我会解释上下文并希望它能证明它的合理性。我在 Linux 上尝试使用一些制作不良的 shell。

我必须使用`fdb`and `fcsh`，它们是 Adob​​e 的 Flash 命令行调试器和编译器外壳。这不是特别相关 - 只是*它们是 shell*的事实，即你运行`fdb`，它会给你一个提示`(fdb)`，你输入命令。都很酷。

但。假设您想重新执行上一个命令，所以您按键盘上的 [Arrow-Up]，就像您在 Bash、Python Shell、GDB shell 等中所做的那样。但它不起作用。我没有看到提示符处的最后一个命令，而是看到了`(fdb) ^[[A`（注意这`(fdb)`是提示符）。按 [Arrow-Left] 键返回几个字符并修复您键入的命令 - 同样的故事。

这看起来像 Adob​​e 并没有很好地制作它的外壳。有没有办法打开一个简单的 bash shell（或其他东西），它将继续将我的命令提供给一个打开的`fdb`shell，作为守护进程保存？我希望通过这种方式，我可以获得 Bash 用于处理命令的简洁易用特性，但让它们由`fdb`.

*注意：*我认为，我发现[这个包装器](https://github.com/Draknek/fcsh-wrap/blob/master/fcsh-wrap)保持`fcsh`守护进程并保存它的 pid 文件。这很酷。我还没有使用它，但考虑它。不过，我的问题仍然存在：有没有办法将命令从一个 shell 传递到另一个 shell？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-24T06:54:43.617

Bash 使用 GNU readline 库，该库只能用于开源程序（具有适当的许可证）。但是你可以使用[rlwrap](http://utopia.knoware.nl/~hlub/rlwrap/rlwrap.html)。它存在于大多数 Linux 发行版中。例如，您可以将其用作`rlwrap fdb`。

# php - odbc_connect() without parameters

> ID：10292542
> 
> 赞同：0
> 
> 时间：2012-04-24T06:05:17.707
> 
> 标签：php, odbc

Is there any way we can call odbc_connect() without any parameters in php? By this i mean is there any way in php.ini to have such settings to set username,password and dsn in advance or any other way? Thanks.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T06:39:04.430

您可以创建自己的配置文件（例如 config.php）和另一个文件来保存一些在您的网站中使用的标准功能。

然后，您创建自己的函数（例如 aragorn_connect()），该函数从配置文件中读取并正常运行 odbc_connect()。因此，下次您需要使用 db 时，您只需调用 aragorn_connect() 即可。

**或者**

您可以使用在线可用的框架之一（cakePHP、Yii、cogeigniter 等）。

# java - Android - 升级 Google PlayMarket 中的应用程序时，Package 文件夹将被删除？

> ID：10292546
> 
> 赞同：1
> 
> 时间：2012-04-24T06:05:41.050
> 
> 标签：java, android

我开发了具有**登录身份验证页面的 Android 应用程序。**当用户使用有效数据登录时，详细信息将存储在**Shared Preferences**`data/data/<App_PackageName>/<shared_prefs> folder` （文件中的shared_prefs 文件夹`SharedPreferences.xml`）中。因此，当用户最小化和最大化应用程序时，共享首选项工作正常。我最近用更新的版本名称和版本代码升级了市场上的应用程序。用户从市场收到通知并升级应用程序。启动升级版本时，应用程序再次显示登录验证页面。我认为在升级应用程序时会删除共享首选项，所以我将存储详细信息从`Prferences.xml to .txt file.`文本文件存储在`data/data/<App_PackageName>/<files>`文件夹中更改。我的问题是：

```
1.The `files` folder and `shared_prefs` folder are stored in cache memory?
2\. Whether cache will be cleared while upgrading the app from the market? 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T06:08:39.097

两者都没有存储在缓存中，正确的说法是私有应用程序存储。应用程序数据库也在那里。当您升级应用程序时，所有这些都将保持不变。

如果每次应用程序更新都删除了应用程序存储空间，那么应用程序存储空间的使用将非常少，对吧？想象一下，每次升级后自己都必须通过同样麻烦的游戏关卡……

顺便说一句，当您要升级应用程序时会弹出一个警告，明确指出`your application data will be kept intact`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T07:41:16.963

当您只是更新应用程序时，首选项不会自动删除。要么是用户先卸载，要么他们正在使用第三方市场替代方案，即卸载或删除您的首选项。

或者您的应用程序中有一些代码确定应用程序的版本比您的应用程序上次运行时的版本新，然后手动清除您的设置。

# objective-c - 如何捕获发送到模拟的参数？

> ID：10292551
> 
> 赞同：6
> 
> 时间：2012-04-24T06:06:01.157
> 
> 标签：objective-c, ios, ocmock

有谁知道如何捕获发送到 OCMock 对象的参数？

```
id mock = [OCMockObject mockForClass:someClass]
NSObject* captureThisArgument;
[[mock expect] foo:<captureThisArgument>]

[mock foo:someThing]
GHAssertEquals[captured, someThing, nil]; 
```

我如何去验证 foo 的论点？我也很高兴在模拟定义中的一个块内执行此操作，但如果我可以将对象取出以便我以后可以断言它的特性，那将是非常棒的。

OCMock 可以吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-25T09:46:35.587

如果您想验证您的参数，也许您可​​以在设置存根时直接执行此操作，例如：

```
id mock = [OCMockObject mockForClass:someClass];
NSObject* captureThisArgument;
[[mock expect] foo:[OCMArg checkWithBlock:^(id value){ 
    // Capture argument here...
}]]; 
```

问候， 昆汀 A

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-24T23:04:24.213

您可以存根调用并将其传递给验证它的块：

```
NSObject *expected = ...;

id mock = [OCMockObject mockForClass:someClass]
void (^theBlock)(NSInvocation *) = ^(NSInvocation *invocation) {
    NSObject *actual;
    [invocation getArgument:&actual atIndex:2];
    expect(actual).toEqual(expected);   
};
[[[mock stub] andDo:theBlock] foo:[OCMArg any]];

[mock foo:expected]; 
```

还有一个回调版本，但控制流变得更加复杂，因为您需要一个对测试和验证回调都可见的状态变量：

```
[[[mock stub] andCall:@selector(aMethod:) onObject:anObject] someMethod:someArgument] 
```

# php - How to upgrade php version in wamp?

> ID：10292552
> 
> 赞同：7
> 
> 时间：2012-04-24T06:06:10.500
> 
> 标签：php, wamp

Currently I'm using php version 5.1.6 in wamp server. I'm trying to use phpexcel library to read .xls and .xlsx files. Phpexcel library minimum requirement is php version 5.2.0\. So how can i solve this issue or how to upgrade php version.

Thanks in advance.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-24T07:29:18.200

这是[所有 php 插件](http://www.wampserver.com/en/php-addons/)。选择您需要的并下载/安装它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-12-10T21:02:53.233

你必须升级你的整个 wamp：

备份你的数据库。

备份你的代码

卸载 wamp

安装新的 wamp

测试本地主机是否正常工作

恢复您的数据库（首先将 mysql.ini 中的 max_allowed_pa​​cket 更改为 10M）

在apache中启用重写模块

# asp.net-mvc - 在 MVC 中的 beginform 中指向不同控制器的按钮

> ID：10292556
> 
> 赞同：0
> 
> 时间：2012-04-24T06:06:40.983
> 
> 标签：asp.net-mvc

我有一个比较页面，基本上是在产品之间进行比较。比较页面被 beginform 包裹起来，在表格中至少有**比较**按钮和**选择**按钮，它们将出现在每个列出的产品中。

顾名思义，**比较**按钮将加载另一个页面来比较所选产品。并且**选择**按钮会将所选产品添加到购物车。

任何想法如何分离**比较**按钮和**选择**按钮之间的动作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T07:45:12.173

我认为这可以通过两种方式完成。

使用[Html.ActionLink](http://msdn.microsoft.com/en-us/library/dd492124.aspx)作为比较按钮来调用另一个方法/控制器。像这样，只有你的表单不会被发布，所以你需要将东西传递给参数：

```
@using(Html.BeginForm("SomeController","Select"))
{
 <button name="selectBtn" value="select">Select</button>
 @Html.ActionLink("Click to Compare", "SomeOtherController", "Compare"
  new { id1=xx, id2=yy },//pass parameters accordingly
  null
  )
} 
```

我使用了 ActionLink 方法的[这种重载](http://msdn.microsoft.com/en-us/library/dd504972.aspx)。

或者

如果你真的需要一个按钮，你可以有两个按钮并检测在控制器上调用了哪个按钮并重定向。

```
@using(Html.BeginForm("CommonController","Select"))
{
 <button name="button" value="select">Select</button>
 <button name="button" value="compare">Compare</button>
} 
```

你的控制器：

```
public class  CommonController : Controller
{
 public ActionResult Select(string button)//same as the name property of <button>
 {
   if(button == "compare")
   {//do something if you need to 
      //you could again pass in data as part of the route here..
     return RedirectToAction("SomeController", "Compare");
   }
 }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T06:37:10.660

这是 HTML 的一个限制，您不能在单个表单元素中发布到不同的 url。您需要使用 javascript 来实现这一点。单击按钮时，您需要调用 javascript 方法并将表单操作 url 设置为指向比较或选择 url。像这样的东西

```
function OnButton1()
{
    document.Form1.action = @url.Action(new {Controller = ctrl1, Action = action });

    document.Form1.submit();             // Submit the page

    return true;
}

function OnButton2()
{
    document.Form1.action = @url.Action(new {Controller = ctrl2, Action = action });

    document.Form1.submit();             // Submit the page

    return true;
} 
```

# php - validate that user only vote once

> ID：10292557
> 
> 赞同：1
> 
> 时间：2012-04-24T06:06:46.900
> 
> 标签：php, javascript, jquery, ajax, cookies

I'm currently following this [tutorial](http://www.9lessons.info/2009/08/vote-with-jquery-ajax-and-php.html#comment-2209775248346094743) to create a simple vote system.

It works fine except for the validation part where user should only be able to vote once. This tutorial uses IP, which doesn't work for users with dynamic IPs

```
<?php
include("config.php");
$ip=$_SERVER['REMOTE_ADDR'];

if($_POST['id'])
{
$id=$_POST['id'];
$id = mysql_escape_String($id);
//Verify IP address in Voting_IP table
$ip_sql=mysql_query("select ip_add from Voting_IP where mes_id_fk='$id' and ip_add='$ip'");
$count=mysql_num_rows($ip_sql);

if($count==0)
{
// Update Vote.
$sql = "update Messages set up=up+1 where mes_id='$id'";
mysql_query( $sql);
// Insert IP address and Message Id in Voting_IP table.
$sql_in = "insert into Voting_IP (mes_id_fk,ip_add) values ('$id','$ip')";
mysql_query( $sql_in);
echo "<script>alert('Thanks for the vote');</script>";
}
else
{
echo "<script>alert('You have already voted');</script>";
}

$result=mysql_query("select up from Messages where mes_id='$id'");
$row=mysql_fetch_array($result);
$up_value=$row['up'];
echo $up_value;

}
?> 
```

Is there a better way to ensure that users only vote once?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T06:21:00.147

怎么简化

```
<?php
 //HERE include DB config and set variables
 $result = mysql_query("SELECT * FROM votes WHERE id = '$id' AND ip = '$ip'");
  $count = mysql_num_rows($result);
 if($count > 0){
  echo "<script>alert('You have already voted');</script>";
 }
 else{
  //Update Sets
 }
?> 
```

但最后，您应该使用用户帐户或 cookie。虽然用户可以清除浏览器中的 cookie，但用户也可能拥有动态 IP 地址。这也适用于使用单一 IP 的大型网络（免费 Wi-Fi 网络、学校、工作场所）的用户

我认为创建用户帐户是最好的主意

```
<?php
 $result = mysql_query("SELECT * FROM votes WHERE username = '$_SESSION[username]' AND id             = '$id'");
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-11-18T22:17:16.217

不需要数据库存储。相反，在投票时：

```
set_cookie($_POST['id'], "1", time()+60*60*24*365) 
```

然后，当您显示帖子时，请检查 cookie 是否设置为：

```
if(!($_COOKIE[$_POST['id']])){   //if user hasn't voted
  // display vote buttons
}else{
  // don't display vote buttons
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-22T11:26:29.247

另一种确保用户只投票一次而不创建用户帐户的方法是创建一个投票系统，用户必须提供他们的电子邮件地址以进行确认。

1.  用户通过输入他们的电子邮件地址进行投票；该地址存储在数据库中。
2.  当用户提交投票时，然后向该地址发送一封电子邮件，要求确认投票
3.  当投票被确认时，它是一个合法的投票，并且在未来很容易检查
4.  在流程结束时从数据库中清除未确认的投票

上述步骤也可用于确认比赛的年龄或其他重要的人口统计信息（略有不同）。在我们的客户网站上举办比赛时，我们已经多次使用这种方法，并且效果很好。

# java - JProbe open source

> ID：10292558
> 
> 赞同：0
> 
> 时间：2012-04-24T06:06:47.723
> 
> 标签：java, jprobe

I have added JProbe plugin to my eclipse 3.7 IDE. I wanted to know if I can access it's functions through java code and use it along with my java code. I don't know if I am putting this question correctly, but I hope you understand what I am trying to say.

for eg--

```
//code
.
.
.
.
//code to find memory used using jprobe 
//print memory used
//code ends 
```

# ruby-on-rails - Uploading Images directly to S3 using Rails/Heroku when they are part of a registration form (or something like one)

> ID：10292564
> 
> 赞同：3
> 
> 时间：2012-04-24T06:07:13.867
> 
> 标签：ruby-on-rails, image, upload, amazon-s3

## Scenario

Imagine we are writing a web application with a simple registration page containing something like the following:

*   Name
*   Email
*   Password
*   Profile Picture

OK, great, next the user hits "Create Profile". Ideally we would like the following to happen..

1.  Our image to be resized on the client (using their cpu)

2.  To post that image right over to S3, into a unique resting place. (without going through our hosting server costing us dyno's and precious time on our over worked single threaded rails app).

3.  To know when our image has been successfully uploaded to S3.

4.  Once the image is safe and sound, submit a second form through to our cloud server with the name, email, password and path to our troublesome image.

## Question

Does this approach sound about right?

Also, does anybody know of any examples of how to do this in Rails? Ideally I am trying to find a way to abstract the differences from the user so they only have to hit one save button since that's all they care about.

I have found bits and pieces but nothing that ties it all together.

So far, I have been considering using SwfUpload as outlined in some of these articles...

[http://vimeo.com/11363680](http://vimeo.com/11363680)

[https://github.com/blueimp/jQuery-File-Upload/wiki/Upload-directly-to-S3](https://github.com/blueimp/jQuery-File-Upload/wiki/Upload-directly-to-S3)

I am a hobbyist at best when it comes to Rails, just wondering if there is a well thought out pattern for this? Everything I have seen so far (as great and helpful as that work is) only seems to get half way there.

I don't know it just feels like I am fighting hard to do something that people must deal with every day during modern development, I feel like I am missing something...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T11:53:24.117

在搜索另一个问题时遇到了这个问题：您可以使用 S3 执行的操作是使用[浏览器上传](http://aws.amazon.com/articles/1434?_encoding=UTF8&jiveRedirect=1)并发布到隐藏的 iframe。默认情况下，使用浏览器上传时，您可以指定重定向位置。然后，您可以让重定向位置调用提交注册表单的 javascript。我用我想要上传的图像文件成功地做到了这一点：然后我调用我的 heroku dyno，它在后台任务中将文件从 S3 中拉出，生成缩略图，然后将缩略图发布回 S3。

然而，在浏览器中调整大小将非常困难。有关一种可能的解决方案，请参阅[在 HTML5 画布中调整图像大小。](https://stackoverflow.com/questions/2303690/resizing-an-image-in-an-html5-canvas)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T06:32:05.400

如果我错了，请纠正我，但听起来你想在客户端做所有事情（这意味着 JavaScript）。

我相信有一种方法可以使用 Canvas 调整图像大小，但是 1）它看起来不会很好（除非它是简单的裁剪），2）这假设用户有一个现代浏览器，以及 3）如果你使用 Canvas 你完成处理后，您需要将其转换回图像，这意味着您需要将数据发送到某个地方以存储在文件中，这意味着您的服务器受到了打击。

使用直接 POST 到 S3 API 的表单向 S3 发布权限很好，但您不知道图像何时上传，因为控制权离开页面并且永远不会回来。这意味着您必须使用 Ajax... 除非您遇到跨域策略。您可以使用 iframe + postMessage 技巧来做到这一点，尽管这会对您的服务器造成打击。所以我认为解决这个问题的唯一方法是使用 Flash，即 Gmail 的附件上传器（无论如何，这似乎是你要走的路）。如果你沿着这条路走，那么你可能需要稍微改变一下工作流程——也就是说，不是让图像在提交时上传，然后等到它提交后再继续，而是让用户手动上传图像并阻止提交按钮，直到图像上传。（它'

所以我不确定除了更换托管服务提供商或添加更多服务器之外，是否有完整的解决方案可以解决您的问题，但至少有一些想法。

# android - Android unknown error occurred in android when clicking on one of tab Activity

> ID：10292565
> 
> 赞同：0
> 
> 时间：2012-04-24T06:07:27.250
> 
> 标签：android

unknown error occurred in android when clicking on one of tab Activity in android although it working fine but message displayed in toast "unknown error occurred"

public class importDiagram extends Activity {

```
private UserLogIn mUserLogIn = null;

private Button mCategory = null;    
GeneralWebMethod webMethods = null;
private ListView mDiagramList = null;

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    MenuInflater mInflater = getMenuInflater();
    mInflater.inflate(R.menu.import_diagram_menu, menu);
    return true;
}

@Override
public boolean onMenuItemSelected(int featureId, MenuItem item) {

    if(item.getItemId() == R.id.refresh_ID){
        Toast.makeText(importDiagram.this, "Refreshing Diagram List", Toast.LENGTH_LONG).show();

        if(isOnline()){
            progressDialog = ProgressDialog.show(importDiagram.this,"Diagrams"  ,"Diagrams downloading...");
            diagramDisplayThread = new DiagramDisplayThread();
            diagramDisplayThread.execute((Void[])null);
        }else{
            NoInternetAlertBox();
        }
    }
    return true;
} 
```

# ios5 - 调用 UITextField 委托时 iPhone 模拟器崩溃（使用 EXC_BAD_ACCESS）

> ID：10292568
> 
> 赞同：2
> 
> 时间：2012-04-24T06:07:57.133
> 
> 标签：ios5, uitextfield, ios-simulator, uistoryboard, uitextfielddelegate

所以我在控制器中放置了一些文本字段..

控制器扩展了 UITextFieldDelegate，因此它为这些文本字段处理 textFieldDidBeginEditing，一切正常！

然后我尝试从一个名为 TestTextField 的新类中添加一个新的文本字段。

我将故事板中的自定义类更改为 TestTextField 并实现了以下方式：（发生的情况是模拟器启动并且 NSLog 打印“init！”，然后当我按下 TestTextField NSLog 打印“开始”，然后模拟器停止EXC_BAD_ACCESS。）

测试文本域.m

```
#import "TestTextField.h"

@implementation TestTextField

- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {
        // Initialization code
    }
    return self;
}

- (id) initWithCoder:(NSCoder *) coder
{
    self = [super initWithCoder:coder];
    NSLog(@"init!");
    self.delegate = self;
    return self;
}

/*
// Only override drawRect: if you perform custom drawing.
// An empty implementation adversely affects performance during animation.
- (void)drawRect:(CGRect)rect
{
    // Drawing code
}
*/

- (void)textFieldDidBeginEditing:(UITextField *)textField
{
    NSLog(@"begin");
}

- (void)textFieldDidEndEditing:(UITextField *)textField
{
    NSLog(@"end ");

}

- (BOOL)textFieldShouldReturn:(UITextField *)theTextField {
    return YES;
}

@end 
```

文本字段.h

```
#import <UIKit/UIKit.h>

@interface TestTextField : UITextField <UITextFieldDelegate>

@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T14:41:55.953

我有完全相同的问题，这似乎只发生在 iOS 模拟器 5 上。

看起来在初始化时设置委托会使应用程序崩溃。

只需注释该`self.delegate = self`行即可消除错误。

所以我最终（不是很好，但是嗯）把我`self.delegate = self`的`- (void) touchesBegan:`. 这样，我确信当有人开始打字时我的委托就设置好了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-02T09:33:26.600

我也遇到过同样的问题。我终于通过调整`autocorrectionType`.

请将您的文本字段设置为`autocorrectionType = UITextAutocorrectionTypeNo;`

希望这能解决您的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-02T08:31:11.073

现在我很确定发生了什么，因为这是很久以前的事了。

我 99% 确定这个问题是由于 XCode 中的“自定义类”值留下了一些不再存在的旧值。

# android - Android custom keyboard background

> ID：10292570
> 
> 赞同：0
> 
> 时间：2012-04-24T06:08:07.460
> 
> 标签：android

How can set the background for the android custom keyboard,i want to set a image as the background for entire keyboard for the android device not for a single keyboard me tried with the attributes like android:keysBackground and android:background but it is not working while doing with the android:keysBackground attribute the image is present as the background for every keys, but i need to a single background for the keyboard like wallpaper plzzzzz help

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T01:41:08.350

KeyboardView 是 View 类的子类，具有一个名为 android:background 的属性。将此属性设置为您想要的任何图像，它应该可以正常工作。如果您设置了 keyBackground 属性，那么您可能看不到它，要使背景可见，您需要对布局进行一些操作，例如设置键背景不透明度或使键背景完全透明。我希望它会有所帮助。干杯。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-03T05:02:58.800

键盘视图的 android:background 属性不会改变按键的外观，它只会改变整个键盘的背景。我认为您的问题是默认情况下键是不透明的，因此您看不到键后面的背景。要解决这个问题，您必须将 android:keyBackground 设置为`Drawable`.png 或 9 个`Drawable`部分或完全透明的补丁。您可能可以将其设置`keybackground`为 null 以使其透明，但我还没有尝试过，因此可能无法正常工作并且可能会崩溃。祝你好运。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-24T02:37:18.350

您必须编辑您正在使用的键盘的根视图的 xml 布局。例如具有自定义背景的相对布局

```
<RelativeLayout android:id="@+id/rootview"
                xmlns:android="http://schemas.android.com/apk/res/android"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:background="@drawable/custom">

<KeyboardView
                android:id="@+id/keyboard"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:layout_alignParentBottom="true"
                android:background="@android:color/white"
                android:keyBackground="@drawable/key_background"
                android:keyPreviewLayout="@layout/preview"
                android:keyTextColor="#000"
                android:paddingTop="0dp"
                android:popupLayout="@layout/keyboard_popup_layout"
                android:shadowRadius="0.0"
                android:paddingBottom="5dp">

            </KeyboardView>

</RelativeLayout> 
```

# php - 向每个在其标题属性上具有文本的元素添加一个类

> ID：10292571
> 
> 赞同：2
> 
> 时间：2012-04-24T06:08:09.700
> 
> 标签：php, jquery

我正在为 title 属性动态生成内容：

```
<div class="point_data">
<a href="#" title="<?php the_sub_field('points_description'); ?>"></a> 
```

如何将类添加`.point-tooltip`到 div 内的每个锚链接`.points_data`，其标题属性上有文本（换句话说，它不是空的）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T06:09:50.313

用这个：

```
$('.point_data a[title]').addClass('point-tooltip'); 
```

如果标题可以为空，请使用：

```
$('.point_data a[title][title!=""]').addClass('point-tooltip'); 
```

[`attribute-not-equal-selector`](http://api.jquery.com/attribute-not-equal-selector/)：

> 描述：选择不具有指定属性或具有指定属性但不具有特定值的元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T06:12:56.677

```
$(".point_data a[title][title!='']").addClass("point-tooltip"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T06:21:06.530

试试这个...

```
 $(".point_data").find("a[title]").each(function(){
    var titleval = $(this).attr("title").trim();
    if(titleval.length != 0)
    {
        $(this).attr("class","point-tooltip");
    }
}); 
```

请参阅此 JSFiddle 链接：http: [//jsfiddle.net/rfb23/1/](http://jsfiddle.net/rfb23/1/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-24T07:29:53.250

如果您想在 PHP 中执行此操作：

```
<div class="point_data">
<?php 
$title = the_sub_field('points_description');
if(empty($title)) { ?>
  <a href="#" >BLAA</a>
<?php }
else { ?>
  <a href="#" class="point-tooltip" title="<?php echo $title ?>">BLAA</a>
<?php } ?> 
```

# java - 日期和日期时间处理 - 特定场景失败

> ID：10292579
> 
> 赞同：0
> 
> 时间：2012-04-24T06:08:46.773
> 
> 标签：java, date, junit

我将不得不编写测试用例来检查一些查询的工作情况，比如检索日期为**今天**、**下一周、上一年**等的记录。

它基本上是一个junit测试用例，我通过以下方式实现：

> 1.插入日期对应TODAY,NEXT_WEEK,PREVIOUS_YEAR的记录
> 
> 2.所以，我会知道对于特定查询，要返回的记录是什么，我将执行查询，检索特定条件的记录并检查它是否有正确的记录。

在这个过程中，在执行 TODAY 的案例时，我遇到了一个问题。

如果我在午夜之前运行我的测试用例，比如 11.59，将首先插入数据，这将插入一个日期，比如 24-4-2012T11:59:00.00

而在执行查询之前，日期变为明天，即 25-4-2012T00:00:00.00

TODAY 条件将使用 25 日而不是 24 日执行查询。所以我的测试用例失败了。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-24T06:19:30.343

> 我该如何解决这个问题？

编写更多可测试的代码:)

我的猜测是你正在使用“当前日期”`System.currentTimeMillis()`或`Calendar.getInstance()`类似的东西。该代码不容易被截获以给您“您想要的任何价值”。相反，引入一个`Clock`带有单个方法（`now()`或类似方法）的接口，返回您想要使用的“现在”的任何表示。（我个人会`Instant`从[Joda Time](http://joda-time.sf.net)使用，但这取决于你。）

现在将 a`Clock`注入您要测试的代码中，例如作为参数构造函数。对于测试，使用一个存根实现，它返回你想要的任何东西。对于生产，请使用“真实”实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T06:21:03.673

比方说，您使用`new Date()`今天的概念。您应该**保留**比较日期；我相信这是问题的根源，您需要在查询执行之前和之后保留预期值以便可测试/可验证：

```
Date today = new Date();

// update the data layer using today

Date recordedDate = // fetch the date that is recorded

assertEquals(today, recordedDate); 
```

据推测，您将使用其他一些工具，例如`java.util.Calendar`计算问题中提到的时间点。

# vb6 - 从注册表中读取字符串会返回部分数据

> ID：10292580
> 
> 赞同：-2
> 
> 时间：2012-04-24T06:08:48.203
> 
> 标签：vb6, registry

```
some_variable = GetStringSetting(HKEY_CURRENT_USER, "myApp", "mySection", myKey, defaultValue ) 
```

导致问题，因为有时会返回部分结果。例如，如果在 Windows 7 注册表编辑器中查看该值，则值数据显示为“True”，而 GetStringSetting 函数最近间歇性启动仅返回“Tru”。

这可以通过简单地打开和关闭注册表中的值对话框来解决。

我想这个问题使用过时的技术可能太晦涩难懂了，但我不禁要问是否有人有类似的问题，因为这个问题会影响我的免费软件产品。

```
'*******************************************************************************
' MODULE:       MRegistry
' AUTHOR:       Phil Fresle
' CREATED:      14-Jul-2000
' COPYRIGHT:    Copyright 2000 Frez Systems Limited. All Rights Reserved.
'
' DESCRIPTION:
' Get and save strings to the registry
'
' This is 'free' software with the following restrictions:
'
' You may not redistribute this code as a 'sample' or 'demo'. However, you are free
' to use the source code in your own code, but you may not claim that you created
' the sample code. It is expressly forbidden to sell or profit from this source code
' other than by the knowledge gained or the enhanced value added by your own code.
'
' Use of this software is also done so at your own risk. The code is supplied as
' is without warranty or guarantee of any kind.
'
' Should you wish to commission some derivative work based on the add-in provided
' here, or any consultancy work, please do not hesitate to contact us.
'
' Web Site:  http://www.frez.co.uk
' E-mail:    sales@frez.co.uk
'
' MODIFICATION HISTORY:
' 1.0       14-Jul-2000
'           Phil Fresle
'           Initial Version
'*******************************************************************************

Public Enum REG_SETTINGS
    HKEY_CURRENT_USER = &H80000001
    HKEY_LOCAL_MACHINE = &H80000002
End Enum

Private Const BASE_KEY                  As String = "SOFTWARE"
Private Const REG_SZ                    As Long = 1

Private Const ERROR_NONE                As Long = 0
Private Const ERROR_KEY_DOES_NOT_EXIST  As Long = 2

Private Const READ_CONTROL              As Long = &H20000
Private Const STANDARD_RIGHTS_READ      As Long = (READ_CONTROL)
Private Const STANDARD_RIGHTS_ALL       As Long = &H1F0000
Private Const KEY_QUERY_VALUE           As Long = &H1
Private Const KEY_SET_VALUE             As Long = &H2
Private Const KEY_CREATE_SUB_KEY        As Long = &H4
Private Const KEY_ENUMERATE_SUB_KEYS    As Long = &H8
Private Const KEY_NOTIFY                As Long = &H10
Private Const KEY_CREATE_LINK           As Long = &H20
Private Const SYNCHRONIZE               As Long = &H100000
Private Const KEY_ALL_ACCESS            As Long = ((STANDARD_RIGHTS_ALL Or _
                            KEY_QUERY_VALUE Or _
                            KEY_SET_VALUE Or _
                            KEY_CREATE_SUB_KEY Or _
                            KEY_ENUMERATE_SUB_KEYS Or _
                            KEY_NOTIFY Or _
                            KEY_CREATE_LINK) _
                            And (Not SYNCHRONIZE))
Private Const KEY_READ                  As Long = ((STANDARD_RIGHTS_READ Or _
                            KEY_QUERY_VALUE Or _
                            KEY_ENUMERATE_SUB_KEYS Or _
                            KEY_NOTIFY) _
                            And (Not SYNCHRONIZE))

Private Declare Function RegCloseKey Lib "advapi32.dll" (ByVal hKey As Long) As Long

Private Declare Function RegCreateKeyEx _
    Lib "advapi32.dll" Alias "RegCreateKeyExA" _
    (ByVal hKey As Long, _
     ByVal lpSubKey As String, _
     ByVal Reserved As Long, _
     ByVal lpClass As String, _
     ByVal dwOptions As Long, _
     ByVal samDesired As Long, _
     ByVal lpSecurityAttributes As Long, _
     phkResult As Long, _
     lpdwDisposition As Long) As Long

Private Declare Function RegOpenKeyEx _
    Lib "advapi32.dll" Alias "RegOpenKeyExA" _
    (ByVal hKey As Long, _
     ByVal lpSubKey As String, _
     ByVal ulOptions As Long, _
     ByVal samDesired As Long, _
     phkResult As Long) As Long

Private Declare Function RegOpenKey _
    Lib "advapi32.dll" Alias "RegOpenKeyA" _
       (ByVal lngRootKey As Long, _
       ByVal lpSubKey As String, _
       phkResult As Long) As Long

Private Declare Function RegQueryValueExString _
    Lib "advapi32.dll" Alias "RegQueryValueExA" _
    (ByVal hKey As Long, _
     ByVal lpValueName As String, _
     ByVal lpReserved As Long, _
     lpType As Long, _
     ByVal lpData As String, _
     lpcbData As Long) As Long

Private Declare Function RegQueryValueExNULL _
    Lib "advapi32.dll" Alias "RegQueryValueExA" _
    (ByVal hKey As Long, _
     ByVal lpValueName As String, _
     ByVal lpReserved As Long, _
     lpType As Long, _
     ByVal lpData As Long, _
     lpcbData As Long) As Long

Private Declare Function RegSetValueExString _
    Lib "advapi32.dll" Alias "RegSetValueExA" _
    (ByVal hKey As Long, _
     ByVal lpValueName As String, _
     ByVal Reserved As Long, _
     ByVal dwType As Long, _
     ByVal lpData As String, _
     ByVal cbData As Long) As Long

'Private Declare Function RegOpenKeyEx Lib "advapi32.dll" Alias "RegOpenKeyExA" _
    (ByVal hKey As Long, _
    ByVal lpSubKey As String, _
    ByVal ulOptions As Long, _
    ByVal samDesired As Long, _
    phkResult As Long) As Long

'Private Declare Function RegCloseKey Lib "advapi32.dll" _
    (ByVal hKey As Long) As Long

Private Declare Function RegSetValueEx Lib "advapi32.dll" Alias "RegSetValueExA" _
    (ByVal hKey As Long, _
    ByVal lpValueName As String, _
    ByVal Reserved As Long, _
    ByVal dwType As Long, _
    lpData As Any, _
    ByVal cbData As Long) As Long

Private Declare Function RegDeleteKey Lib "advapi32.dll" Alias "RegDeleteKeyA" _
    (ByVal lngRootKey As Long, _
    ByVal lpSubKey As String) As Long

Private Declare Function RegDeleteValue Lib "advapi32.dll" Alias "RegDeleteValueA" _
    (ByVal lngRootKey As Long, _
    ByVal lpValueName As String) As Long

'private Const HKEY_CURRENT_USER = &H80000001
'private Const HKEY_LOCAL_MACHINE = &H80000002
Private Const KEY_WRITE = &H20006
'private Const REG_SZ = 1
Private m_lngRetVal As Long

'*******************************************************************************
' GetStringSetting (FUNCTION)
'
' DESCRIPTION:
' Own version of VB's GetSetting to retrieve strings under
' HKEY_LOCAL_MACHINE\SOFTWARE instead of
' HKEY_CURRENT_USER\Software\VB and VBA Program Settings
'
' PARAMETERS:
' (In) - sAppName - String - The first level
' (In) - sSection - String - The second level
' (In) - sKey     - String - The key in the second level
' (In) - sDefault - String -
'
' RETURN VALUE:
' String - The value stored in the key or sDefault if not found
'*******************************************************************************
Public Function GetStringSetting(ByVal sRegistry As Long, _
                 ByVal sAppName As String, _
                 ByVal sSection As String, _
                 ByVal sKey As String, _
                 Optional ByVal sDefault As String) As String
    Dim lRetVal         As Long
    Dim sFullKey        As String
    Dim lHandle         As Long
    Dim lType           As Long
    Dim lLength         As Long
    Dim sValue          As String
    Dim lErrNumber      As Long
    Dim sErrDescription As String
    Dim sErrSource      As String

    On Error GoTo ERROR_HANDLER

    If Trim(sAppName) = "" Then
    Err.Raise vbObjectError + 1000, , "AppName may not be empty"
    End If
    If Trim(sSection) = "" Then
    Err.Raise vbObjectError + 1001, , "Section may not be empty"
    End If
    If Trim(sKey) = "" Then
    Err.Raise vbObjectError + 1002, , "Key may not be empty"
    End If

    sFullKey = BASE_KEY & "\" & Trim(sAppName) & "\" & Trim(sSection)

    ' Open up the key
    lRetVal = RegOpenKeyEx(sRegistry, sFullKey, 0, KEY_READ, lHandle)
    If lRetVal <> ERROR_NONE Then
    If lRetVal = ERROR_KEY_DOES_NOT_EXIST Then
        GetStringSetting = sDefault
        Exit Function
    Else
        Err.Raise vbObjectError + 2000 + lRetVal, , _
        "Could not open registry section"
    End If
    End If

    ' Get size and type
    lRetVal = RegQueryValueExNULL(lHandle, sKey, 0, lType, 0, lLength)
    If lRetVal <> ERROR_NONE Then
    GetStringSetting = sDefault
    Exit Function
    End If

    ' Is it stored as a string in the registry?
    If lType = REG_SZ Then
    sValue = String(lLength, 0)

    If lLength = 0 Then
        GetStringSetting = ""
    Else
        lRetVal = RegQueryValueExString(lHandle, sKey, 0, lType, _
        sValue, lLength)

        If lRetVal = ERROR_NONE Then
        GetStringSetting = Left(sValue, lLength - 1)
        Else
        GetStringSetting = sDefault
        End If
    End If
    Else
    Err.Raise vbObjectError + 2000 + lType, , _
        "Registry data not a string"
    End If

TIDY_UP:
    On Error Resume Next

    RegCloseKey lHandle

    If lErrNumber <> 0 Then
    On Error GoTo 0

    Err.Raise lErrNumber, sErrSource, sErrDescription
    End If
Exit Function

ERROR_HANDLER:
    lErrNumber = Err.Number
    sErrSource = Err.Source
    sErrDescription = Err.Description
    Resume TIDY_UP
End Function 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T07:23:20.153

可能是由于：

> 如果数据具有 REG_SZ、REG_MULTI_SZ 或 REG_EXPAND_SZ 类型，**则字符串可能未使用正确的终止空字符存储**。因此，即使函数返回 ERROR_SUCCESS，应用程序在使用前也应确保字符串正确终止；否则，它可能会覆盖缓冲区。（请注意，REG_MULTI_SZ 字符串应该有两个终止空字符。）应用程序可以确保字符串正确终止的一种方法是使用 RegGetValue，它会在需要时添加终止空字符。

[RegQueryValueEx 函数](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724911%28v=vs.85%29.aspx)

# javascript - jqgrid 的问题 - 在一页上使用 2 个网格

> ID：10292585
> 
> 赞同：0
> 
> 时间：2012-04-24T06:09:10.870
> 
> 标签：javascript, jquery, jqgrid

我必须在一页上添加两个 jqgrids。一个用于显示记录，另一个用于批量插入。我有一个网格，为了添加另一个网格，我刚刚在同一个文件中定义了另一个具有不同方法签名的初始化网格方法。发生的问题是当我单击添加行时，添加了两行而不是一行。该函数执行两次，负责添加一个新的空白行。我对 jquery 很陌生。任何帮助，将不胜感激。

```
 function InitGrid1() {
    debugger

//    $grid1.find('.jqgrow td').live('click', function (e) {
//        if (e.target && e.target.nodeName != 'TD') return;
//        var $this = $(this);
//        if ($this.find('input, a').length == 0)
//            OnColumnClick($this);
//    });
    var lastSelectedRowID;
    $grid1.jqGrid({
        colNames: ['AttendancePolicyID', 'AllowedVariationID', 'New', 'Updated', 'Policy Enabled', 'Effective Date', 'Employee ID', 'Employee Name', 'Activity Type', 'After Start', 'Before End', 'Allowed Variation', 'Status', '', '', 'Payroll_f', '', ''],
        colModel: colModel,
        sortname: 'EffectiveDate',
        sortorder: "DESC",
        rowNum: 5000,
        rownumbers: true,
        rownumWidth: 30,
        autowidth: true,
        gridview: true,
        jsonReader: {
            root: "rows",
            page: "page",
            total: "totalpages",
            records: "totalrecords",
            cell: "cell",
            id: "ID", //index of the column with the PK in it 
            userdata: "userdata",
            repeatitems: true
        },
        prmNames: {
            rows: "numRows",
            page: "page",
            sort: "sortField",
            order: "sortOrder"
        },
        postData: {
            employeeIDs: []
        },
        datatype: function (postdata) {
            idsToDelete = new Array();
            if (reloadType == GridReloadType.PastedFromExcel || reloadType == GridReloadType.ShowingResults) {
                var griddata = {
                    totalpages: 1,
                    page: 1,
                    totalrecords: totalRowsToLoad,
                    rows: gridrows
                }; fs
                $grid1[0].addJSONData(griddata);
            }
            else if (reloadType == GridReloadType.LoadFromServer) {
                LoadAttendancePolicyFromServerpanel(postdata);
            }
            else
                LoadAttendancePolicyFromServerpanel(postdata);
        },
        gridComplete: function () {

                                  }
    });

    var $html = $('#jqgh_attendancePolicyGrid_rn').html();
    $('#jqgh_attendancePolicyGrid_rn').html('No.' + $html);
    $('.ui-jqgrid-titlebar-close').remove();

    DisableSaveButton(true);
    ResizeGrid();
    $(window).resize(function () {
        ResizeGrid();
    });

    function OnColumnClick($col) {
        try {
            var $row = $col.parent('tr:first');
            var rowid = $row.attr('id');
            if (rowid == null || $row == null)
                return;
            if ($row.find('input').length > 1)
                return;
            SaveRow(lastSelectedRowID);

        }
        catch (ex) {
            ShowMessage(ex.message);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T10:09:34.153

***“我有一个网格，为了添加另一个网格，我刚刚在同一个文件中定义了另一个具有不同方法签名的初始化网格方法。发生的问题是当我单击添加行时，添加了两行而不是一行。 "***
据我所知，在 Javascript 中，您只能创建一个具有相同名称的方法。（即使签名不同，）您**不能**创建两个具有相同名称的方法。

因为 javascript 编译器引擎（浏览器引擎）将仅使用名称执行。

在这种情况下，最好的 javascript 函数示例是：`jqGrid()`.

另一种理解方式是，以下两个功能相同：

```
function loadMsg(msg,count){
  alert(msg);
  ....
}
function loadMsg(msg){
  alert(msg);
  ....
} 
```

这些to方法是一样的。如果我们像这样调用函数，`loadMsg()`这个方法也会执行。
如果我想念你的问题，请告诉我......

# java - Java 日期时间差

> ID：10292587
> 
> 赞同：0
> 
> 时间：2012-04-24T06:09:14.213
> 
> 标签：java

```
long d1Ms = current_date.getTime();
long d2Ms = last_time.getTime();
long diff = Math.abs((d1Ms - d2Ms) / 60000);
System.out.println("d1MS: " + d1Ms);
System.out.println("d2MS: " + d2Ms);
System.out.println("Time difference (abs): " + diff) 
```

我的 current_date 和 last_time 值是。

```
current_date: Tue Apr 24 11:07:22 IST 2012
last_time:    Mon Apr 23 04:11:48 IST 2012 
```

它显示时差：1855 但它应该小于 1440，因为持续时间小于 24 小时。为什么会这样？获得适当差异的解决方案是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-24T06:12:07.970

1855是正确答案：

```
11:07:22 - 04:11:48 == ~31 hours == 1855 minutes.

11am on the 23rd - 24 hours is
11am on the 22nd - ~7 hours is
4am on the 22nd which is your second date. 
```

您的解决方案应该可以正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-02T05:56:47.683

//这里是计算时间差的另一种解决方案

```
String dateLastModified     = "01/14/2012 09:29:58";   
String dateCurrent          = "01/15/2012 10:31:48";

//Formate your time and date
SimpleDateFormat format = new SimpleDateFormat("MM/dd/yyyy HH:mm:ss");

java.util.Date date1        = null;
java.util.Date date2        = null;
//parse the values from String to date
date1   = format.parse(dateLastModified);
date2   = format.parse(dateCurrent);

//time in  milliseconds
long timeDiff = date2.getTime() - date1.getTime();

    long diffSeconds = timeDiff / 1000 % 60;
    long diffMinutes = timeDiff / (60 * 1000) % 60;
    long diffHours = timeDiff / (60 * 60 * 1000) % 24;
    long diffDays = timeDiff / (24 * 60 * 60 * 1000);

    System.out.print(diffDays + " days, ");
    System.out.print(diffHours + " hours, ");
    System.out.print(diffMinutes + " minutes, ");
    System.out.print(diffSeconds + " seconds."); 
```

# php - Chrome 在我的本地主机 URL 中添加了额外的问号

> ID：10292588
> 
> 赞同：1
> 
> 时间：2012-04-24T06:09:14.760
> 
> 标签：php, google-chrome, localhost

我已经用 apache 安装了 php。我可以在本地使用此 url 访问我的项目。

```
http://localhost 
```

我已更改 httpd.conf 文件中的 DocumentRoot 以访问我的项目。因此，上述内容适用于除 CHROME 之外的所有浏览器。

它会添加额外的问号吗？带有网址的结尾和一些额外的文字。请看下文。

```
http://localhost/?_sm_au_=iVV75n6kWFLgSV7R 
```

这是此页面中显示的响应。

```
The following error was encountered:
Zero Sized Reply

Squid did not receive any data for this request 
```

请帮忙

# android - 无法在android中为跨区字符串设置颜色

> ID：10292592
> 
> 赞同：0
> 
> 时间：2012-04-24T06:09:35.977
> 
> 标签：android

我正在尝试为跨区字符串添加颜色，但颜色不适用。它显示相同的颜色

作为文本视图颜色。我写的代码。

```
TextView desc2=(TextView)listrow.findViewById(R.id.desc222);
desc2.setText(Html.fromHtml("<font color='#811c1d'><b>MyText</b></font>&nbsp;&nbsp;").toString()); 
```

如果我删除“toString（）”它会抛出

```
04-24 06:20:58.750: E/AndroidRuntime(309): java.lang.StackOverflowError
04-24 06:20:58.750: E/AndroidRuntime(309):  at java.lang.reflect.Array.newInstance(Array.java:473)
04-24 06:20:58.750: E/AndroidRuntime(309):  at android.text.SpannableStringInternal.getSpans(SpannableStringInternal.java:243)
04-24 06:20:58.750: E/AndroidRuntime(309):  at android.text.Styled.drawUniformRun(Styled.java:61)
04-24 06:20:58.750: E/AndroidRuntime(309):  at android.text.Styled.drawDirectionalRun(Styled.java:298)
04-24 06:20:58.750: E/AndroidRuntime(309):  at android.text.Styled.drawText(Styled.java:357)
04-24 06:20:58.750: E/AndroidRuntime(309):  at android.text.Layout.drawText(Layout.java:1387)
04-24 06:20:58.750: E/AndroidRuntime(309):  at android.text.Layout.draw(Layout.java:370)
04-24 06:20:58.750: E/AndroidRuntime(309):  at android.text.BoringLayout.draw(BoringLayout.java:365)
04-24 06:20:58.750: E/AndroidRuntime(309):  at android.widget.TextView.onDraw(TextView.java:4050)
04-24 06:20:58.750: E/AndroidRuntime(309):  at android.view.View.draw(View.java:6740) 
```

谁能告诉我问题是什么

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T06:13:21.343

尝试这个：

```
TextView desc2=(TextView)listrow.findViewById(R.id.desc222);
desc2.setText(Html.fromHtml("<font color='#811c1d'><b>MyText</b></font>&nbsp;&nbsp;")); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T23:11:12.357

您可以使用 SpannableString：

```
 SpannableString spanned = new SpannableString("MyText");
    ForegroundColorSpan fcs = new ForegroundColorSpan(yourColor);
    spanned.setSpan(fcs, 0, "MyText".length() - 1, Spannable.SPAN_INCLUSIVE_INCLUSIVE);
    yourTextView.setText(spanned); 
```

# .net - 如何在 TCP 客户端（套接字）上在 VB.NET 中实现 TCP KeepAlive

> ID：10292593
> 
> 赞同：2
> 
> 时间：2012-04-24T06:09:45.493
> 
> 标签：.net, vb.net, sockets, tcpclient, keep-alive

我想实现 TCP KeepAlive，以便通过运行计时器来检查断开的连接。

就我而言，我有一个 TCP 客户端（使用套接字类）和一个第三方服务器（我无法控制它）。如何在我的 TCP 客户端上使用 TCP KeepAlive 来检查连接状态？

目前我已经启用了 TCP KeepAlive 选项！

```
tcpsocket.Connect(IPEndPoint)
tcpSocket.SetSocketOption(SocketOptionLevel.Tcp,SocketOptionName.KeepAlive,1); 
```

在互联网上搜索我发现这个程序应该可以工作，但我想知道如何在我的 TCP 客户端中使用它？

```
Private Shared Function SetKeepAlive(ByRef tcpSocket As Socket, ByVal keepAliveTime As UInteger, ByVal keepAliveInterval As UInteger) As Boolean
  ' Pack three params into 12-element byte array; not sure about endian issues on non-Intel
  Dim SIO_KEEPALIVE_VALS(11) As Byte
  Dim keepAliveEnable As UInteger = 1
  If (keepAliveTime = 0 Or keepAliveInterval = 0) Then keepAliveEnable = 0
  ' Bytes 00-03 are 'enable' where '1' is true, '0' is false
  ' Bytes 04-07 are 'time' in milliseconds
  ' Bytes 08-12 are 'interval' in milliseconds
  Array.Copy(BitConverter.GetBytes(keepAliveEnable),  0, SIO_KEEPALIVE_VALS, 0, 4)
  Array.Copy(BitConverter.GetBytes(keepAliveTime),   0, SIO_KEEPALIVE_VALS, 4, 4)
  Array.Copy(BitConverter.GetBytes(keepAliveInterval), 0, SIO_KEEPALIVE_VALS, 8, 4)

  Try
   Dim result() As Byte = BitConverter.GetBytes(CUInt(0)) ' Result needs 4-element byte array?
   tcpSocket.IOControl(IOControlCode.KeepAliveValues, SIO_KEEPALIVE_VALS, result)
  Catch e As Exception
   Return False
  End Try
  Return True
 End Function 
```

任何帮助，将不胜感激。

PS：我是编程新手，所以请原谅我的编码错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T08:08:33.637

最后我设法使用了 TCP KeepAlive。所以为了实现这一点，我刚刚在 mainform_load 过程中调用了：

```
 tcpSocket = New Socket(AddressFamily.InterNetwork, SocketType.Stream, ProtocolType.Tcp)
        tcpSocket.SetSocketOption(SocketOptionLevel.Socket, SocketOptionName.KeepAlive, True)
        SetKeepAlive(tcpSocket, keepalivetime, keepaliveinterval)
        Try
            tcpSocket.Connect(ipEndPoint)
        Catch e As SocketException
            ...
        End Try 
```

我已经与 WireShark 核对过，我注意到已发送的包裹。

# html - 使用 mobiscroll 在黑莓上实现类原生时间选择器

> ID：10292596
> 
> 赞同：0
> 
> 时间：2012-04-24T06:10:03.950
> 
> 标签：html, blackberry, time, picker, mobiscroll

我有一个 Web 应用程序，它有一个文本框，用于输入 hh:mm:tt 格式的时间。使用[mobiscroll](http://code.google.com/p/mobiscroll/)集成了时间选择器 我在尝试使用 Blackberry 浏览器输入时间时遇到问题。我尝试了以下方法：

1.  尝试在 mobiscroll 中使用 clickpick 选项，但在 BB 非触摸设备中使用鼠标指针无法单击按钮。

2.  试图实现原生 HTML 时间控制。它似乎在大多数设备上都能正常工作，但在 BB Bold 9700 上却不行

3.  尝试过[datebox](https://github.com/jtsage/jquery-mobile-datebox)插件，但无法正常工作，而且速度很慢。

我的选项不多了，谁能回答以下问题：

一个。是否可以在 webapp 中调用 BB 本机时间选择器控件？

湾。可以在 webapp 中使用 BB webworks 组件吗？

C。有什么方法可以使 HTML 时间输入控件在 BB Bold 9700 上工作

感谢您对此的帮助。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T15:55:07.237

尝试最新版本[2.0.3](http://download.mobiscroll.com) 修复了 BB 的问题。

# jquery - jquery验证，当输入字段具有标题属性时，而不是错误消息标题作为错误消息给出

> ID：10292602
> 
> 赞同：14
> 
> 时间：2012-04-24T06:10:59.253
> 
> 标签：jquery, jquery-validate

嗨，我正在使用 jquery 验证插件。

我有一个奇怪的问题，我有这样的验证

```
jQuery("#profile_info").validate({

    rules : {
        city : {
            required : true,
            minlength : 3,
            maxlength : 30,
            cityvalidation: true
        },
        state : {
            required : true,
            minlength : 3,
            maxlength : 30,
            cityvalidation: true
        }
    },
    messages : {
        city : {
            required : " City must be  filled in",
            minlength : "At least 3 characters long",
            maxlength : "Should not exceed 30 characters",
        },
        state : {
            required : " State must be  filled in",
            minlength : "At least 3 characters long",
            maxlength : "Should not exceed 30 characters",
        }
    }
}); 
```

和`cityvalidation`

```
jQuery.validator.addMethod("cityvalidation", function(value, element) {
      return this.optional(element) || /^[a-zA-Z\u0080-\u024F\s\/\-\)\(\`\.\"\']+$/i.test(jQuery.trim(value));
    }, "You Have Typed Unallowed Charactors"); 
```

我的输入字段是

```
 <div class="select-date-container-side location-codes">
                                                        <input id="city" name="city"
                                                            value="<?php if(isset($profileinfo['CityName'])){echo $profileinfo['CityName'];}else if(isset($city)){echo $city;} ?>"
                                                            title="City" type="text"
                                                            class="smaler-textfield textfield clear-default"
                                                            tabindex="1900" />
                                                    </div>
                                                    <div class="select-date-container-middle location-codes">
                                                        <input id="state" name="state"
                                                            value="<?php if(isset($profileinfo['StateName'])){echo $profileinfo['StateName'];}else if(isset($state)){echo $state;} ?>"
                                                            title="State" type="text"
                                                            class="smaler-textfield textfield clear-default"
                                                            tabindex="1900" />
                                                    </div> 
```

如果`cityvalidation`失败了。`"You Have Typed Unallowed Charactors"`消息，但不是显示字段的标题。

![在此处输入图像描述](../Images/c9c1fdb0645af2cc90b9759a723f9354.png)

*   如果我删除标题，它会完美运行。所以我应该做什么。我想获取自定义错误消息而不是 title 。请帮忙........

提前致谢 .....................

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-04-24T06:32:36.077

嗯，我找到了。

我用了 `ignoreTitle: true,`

```
jQuery("#profile_info").validate({

    ignoreTitle: true,

    rules : {
        city : {
            required : true,
            minlength : 3,
            maxlength : 30,
            cityvalidation: true
        },
        state : {
            required : true,
            minlength : 3,
            maxlength : 30,
            cityvalidation: true
        }
    },
    messages : {
        city : {
            required : " City must be  filled in",
            minlength : "At least 3 characters long",
            maxlength : "Should not exceed 30 characters",
        },
        state : {
            required : " State must be  filled in",
            minlength : "At least 3 characters long",
            maxlength : "Should not exceed 30 characters",
        }
    }
}); 
```

# php - 错误的 WordPress 主题选项页面 PHP - 卡住了

> ID：10292604
> 
> 赞同：0
> 
> 时间：2012-04-24T06:11:02.920
> 
> 标签：php, wordpress, themes, wordpress-theming

好吧...我一直在看这个东西，我不得不承认失败。

我正在拼凑一个 WordPress 主题的选项页面，我得到了一个

“警告：call_user_func_array() [function.call-user-func-array]：第一个参数应该是一个有效的回调，'flaunt_one_theme_options'在/home/bahia001/public_html/test/wp-includes/plugin.php中给出在线 405" 错误。

我知道这可能是由于我用来将其放在一起的代码片段之间的命名不正确，但我需要一些指导。我对 PHP 有点陌生。

* * *

这是我的代码：

```
<?php
//Theme Options 
function my_admin_scripts(){
wp_enqueue_script('media-upload');
}

if (isset($_GET['page']) && $_GET['page'] == 'folio-themes-setup') {
add_action('admin_print_scripts', 'my_admin_scripts');

add_action('admin_print_styles', 'my_admin_styles');

}

add_action('admin_menu', 'flaunt_one_create_menu');
function flaunt_one_create_menu() {
add_menu_page('Flaunt One Options', 'Flaunt One Options', 'administrator','folio-themes-setup', 'flaunt_one_theme_options',get_bloginfo('stylesheet_directory')."/images/flaunt16.png",63);
add_action( 'admin_init', 'register_mysettings' );
}
function register_mysettings() {
register_setting( 'flaunt-one-settings-group', 'flaunt_one_logo');
register_setting( 'flaunt-one-settings-group', 'flaunt_one_favico');
}
function sw_settings_page() {
?>

<div class="wrap">
    <?php screen_icon(); echo "<h2>" . get_current_theme() . __( 'Options', 'flaunt_one' ) . "</h2>"; ?>    

<div id="flaunt-options" style="width:800px; float:left;">

    <?php if ( false !== $_REQUEST['settings-updated'] ) : ?>
    <div class="updated fade"><p><strong><?php _e( 'Options saved', 'flaunt_one' ); ?></strong></p></div>
    <?php endif; ?>

    <form method="post" action="options.php">
        <?php settings_fields( 'flaunt_one_options' ); ?>
        <?php $options = get_option( 'flaunt_one_theme_options' ); ?>

        <table class="form-table">

             <tr valign="top">
    <th scope="row"><h3>Style Options:</h3></th>
    <td></td>
    </tr>

    <tr valign="top">
    <th scope="row">Logo:</th>
    <td><input size="53" type="text" name="sw_logo" value="<?php echo get_option('flaunt_one_logo'); ?>" /><input class="upload_image_button" type="button" value="Upload" />
    </td>
    </tr>
    <? if(get_option('flaunt_one_logo')){ ?>
          <tr valign="top">
          <th scope="row"></th>
          <td><img src="<?php echo get_option('flaunt_one_logo'); ?>" alt="" /></td>
          </tr>

    <? } ?>
    <tr valign="top">
    <th scope="row">Favicon:</th>
    <td><input size="53" type="text" name="favico" value="<?php echo get_option('flaunt_one_favico'); ?>" /><input class="upload_image_button"  type="button" value="Upload" /></td>
    </tr>
        </table>

    <h3>Social Media Icons:</h3>
    <p><?php _e( 'These options will let you setup the social icons at the top of the theme. You can enter the URLs of your profiles to have the icons show up.', 'flaunt_one' ); ?></p>

        <table class="form-table">
            <?php
            /**
             * Facebook Icon
             */
            ?>
            <tr valign="top"><th scope="row"><?php _e( 'Enter your Facebook URL', 'flaunt_one' ); ?></th>
                <td>
                    <input id="flaunt_one_theme_options[facebookurl]" class="regular-text" type="text" name="flaunt_one_theme_options[facebookurl]" value="<?php esc_attr_e( $options['facebookurl'] ); ?>" />
                    <label class="description" for="flaunt_one_theme_options[facebookurl]"><?php _e( 'Leave blank to hide Facebook Icon', 'flaunt_one' ); ?></label>
                </td>
            </tr>

            <?php
            /**
             * Twitter URL
             */
            ?>
            <tr valign="top"><th scope="row"><?php _e( 'Enter your Twitter URL', 'flaunt_one' ); ?></th>
                <td>
                    <input id="flaunt_one_theme_options[twitterurl]" class="regular-text" type="text" name="flaunt_one_theme_options[twitterurl]" value="<?php esc_attr_e( $options['twitterurl'] ); ?>" />
                    <label class="description" for="flaunt_one_theme_options[twitterurl]"><?php _e( 'Leave blank to hide Twitter Icon', 'flaunt_one' ); ?></label>
                </td>
            </tr>

            <?php
            /**
             * Google+ URL
             */
            ?>
            <tr valign="top"><th scope="row"><?php _e( 'Enter your Google+ URL', 'flaunt_one' ); ?></th>
                <td>
                    <input id="flaunt_one_theme_options[googleplusurl]" class="regular-text" type="text" name="flaunt_one_theme_options[googleplusurl]" value="<?php esc_attr_e( $options['googleplusurl'] ); ?>" />
                    <label class="description" for="flaunt_one_theme_options[googleplusurl]"><?php _e( 'Leave blank to hide Google+ Icon', 'flaunt_one' ); ?></label>
                </td>
            </tr>

                            <?php
            /**
             * Pinterest URL
             */
            ?>
            <tr valign="top"><th scope="row"><?php _e( 'Enter your Pinterest URL', 'flaunt_one' ); ?></th>
                <td>
                    <input id="flaunt_one_theme_options[pinteresturl]" class="regular-text" type="text" name="flaunt_one_theme_options[pinteresturl]" value="<?php esc_attr_e( $options['pinteresturl'] ); ?>" />
                    <label class="description" for="flaunt_one_theme_options[pinteresturl]"><?php _e( 'Leave blank to hide Pinterest Icon', 'flaunt_one' ); ?></label>
                </td>
            </tr>           

            <?php
            /**
             * RSS Icon
             */
            ?>
            <tr valign="top"><th scope="row"><?php _e( 'Enter your RSS URL', 'flaunt_one' ); ?></th>
                <td>
                    <input id="flaunt_one_theme_options[rssurl]" class="regular-text" type="text" name="flaunt_one_theme_options[rssurl]" value="<?php esc_attr_e( $options['rssurl'] ); ?>" />
                    <label class="description" for="flaunt_one_theme_options[rssurl]"><?php _e( 'Enter your Feedburner url. If you dont have one use "http://yoursitename.com/feed/"', 'flaunt_one' ); ?></label>
                </td>
            </tr>

        </table>

        <p class="submit">
            <input type="submit" class="button-primary" value="<?php _e( 'Save Options', 'flaunt_one' ); ?>" />
        </p>
    </form>
</div>

    <!-- End Social Share Buttons -->       

    <!-- Sharing Column -->
<div id="share-column" style="float:right;">

<!-- Begin MailChimp Signup Form -->
<div id="flaunt-mc-signup">
    <link href="http://cdn-images.mailchimp.com/embedcode/slim-081711.css" rel="stylesheet" type="text/css">
    <div id="mc_embed_signup">
    <form action="http://flauntyoursite.us2.list-manage.com/subscribe/post?u=9d1d3626942e4f97eb4bb6699&amp;id=b85f19e2d3" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate" target="_blank">
    <label for="mce-EMAIL">Subscribe to our mailing list</label>
    <input type="email" value="" name="EMAIL" class="email" id="mce-EMAIL" placeholder="email address" required>
        <div class="clear"><input type="submit" value="Subscribe" name="subscribe" id="mc-embedded-subscribe" class="button-primary"></div>
    </form>
    </div>
</div>
<!--End mc_embed_signup-->

<!-- Begin Sharing Section -->
<div class="flaunt-share">
<p>Could you do me a <strong>huge</strong> favor and share this plugin with others. Thank you so much!</p>                          
                        <ul style="list-style:none;">
                                    <li><?php echo flaunt_like_facebook(); ?>
                                        <?php
    }
    //Render Facebook Like button
    //http://developers.facebook.com/docs/reference/plugins/like/
    //TODO Not using since correct image isn't coming up for now
    function flaunt_like_facebook() {
?>

<div id="fb-root">
</div>
    <script>(function(d, s, id) {
    var js, fjs = d.getElementsByTagName(s)[0];
    if (d.getElementById(id)) return;
    js = d.createElement(s); js.id = id;
    js.src = "//connect.facebook.net/en_US/all.js#xfbml=1&appId=237425446277620";
    fjs.parentNode.insertBefore(js, fjs);
    }(document, 'script', 'facebook-jssdk'));</script>

<div class="fb-like" data-href="http://flauntyoursite.com" data-send="false" data-layout="button_count" data-width="150" data-show-faces="false"></div>

                                    </li>

                                    <li><?php echo flaunt_share_twitter(); ?>
                                        <?     php
     }
     //Render Twitter button
     //https://twitter.com/about/resources/buttons
     function flaunt_share_twitter() {
 ?>
 <a href="https://twitter.com/share" class="twitter-share-button" data-url="http://flauntyoursite.com/" data-text="Flaunt Your Site - We Get Photographers Noticed!" alt="Tweet this!">Tweet</a>
 <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s) [0];if(!d.getElementById(id)) {js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>  

                                    </li>

                                    <li><?php echo flaunt_share_google_plus(); ?>
                                        <?php
     }
     //Render Google +1 button
     //http://www.google.com/intl/en/webmasters/+1/button/index.html
     function flaunt_share_google_plus() {
 ?>

 <!-- Place this tag where you want the +1 button to render -->
 <div class="g-plusone" data-size="medium" data-href="http://flauntyoursite.com/">
 </div>
 <!-- Place this render call where appropriate -->
 <script type="text/javascript">
  (function() {
    var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
    po.src = 'https://apis.google.com/js/plusone.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
  })();
</script>
                                    </li>

                                    <li>(Or <a href="http://wordpress.org/extend/plugins/#/" target="_blank">rate it on WordPress</a>)      </li>
                        </ul>

</div><!-- End Sharing Section -->
    </div>  <!-- End Sharing Column -->
    </div> <!-- End Wrapper -->

    <?php
    }

    /**
    * Sanitize and validate input. Accepts an array, return a sanitized array.
    */
    function flaunt_one_options_validate( $input ) {

// Our text option must be safe text with no HTML tags
$input['twitterurl'] = wp_filter_nohtml_kses( $input['twitterurl'] );
$input['facebookurl'] = wp_filter_nohtml_kses( $input['facebookurl'] );
$input['googleplusurl'] = wp_filter_nohtml_kses( $input['googleplusurl'] );
    $input['pinteresturl'] = wp_filter_nohtml_kses( $input['pinteresturl'] );   
$input['feedurl'] = wp_filter_nohtml_kses( $input['feedurl'] );

// Encode URLs
$input['twitterurl'] = esc_url_raw( $input['twitterurl'] );
$input['facebookurl'] = esc_url_raw( $input['facebookurl'] );
$input['googleplusurl'] = esc_url_raw( $input['googleplusurl'] );
$input['pinteresturl'] = esc_url_raw( $input['pinteresturl'] );
$input['feedurl'] = esc_url_raw( $input['feedurl'] );
return $input;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T07:02:26.023

看起来错误正在发生，因为当您可以在代码末尾使用**flaunt_one_options_validate**函数时，该函数没有接收您尝试通过**$input**变量发送的内容。

```
function flaunt_one_options_validate( $input ) 
```

我想，在页面上，输入变量必须声明并具有一些值。在调用函数之前，这需要可读且格式正确（强或数字等）。

首先尝试在其中使用静态值测试该函数，以便您知道该函数正在运行。然后尝试使变量动态化。

希望这会有所帮助，一旦你完成了更新这篇文章。

瑞克

# jquery - 如何将动态 URL 传递到 Lightbox 2 实例，而不是使用其硬编码的“this.URL”？

> ID：10292612
> 
> 赞同：2
> 
> 时间：2012-04-24T06:12:26.803
> 
> 标签：jquery, django-templates, lightbox2

我正在使用 Lightbox 2，因为它几乎满足了我的每一个要求，并且似乎是我遇到的最新更新的、低调的、高质量的“灯箱”jQuery 插件。我唯一遇到的问题是两个图像（关闭和加载）被硬编码到 .js 文件中，并且没有将参数传递到脚本中以覆盖它的示例。我对 JS 不够好，无法使用作为源代码的文档。

```
(function() {
  var $, Lightbox, LightboxOptions;
  $ = jQuery;
  LightboxOptions = (function() {
    function LightboxOptions() {
      this.fileLoadingImage = 'images/loading.gif';
      this.fileCloseImage = 'images/close.png';
      this.resizeDuration = 700;
      this.fadeDuration = 500;
      this.labelImage = "Image";
      this.labelOf = "of";
    }
    return LightboxOptions;
  })();

  Lightbox = (function() {
    function Lightbox(options) {
      this.options = options;
      this.album = [];
      this.currentImageIndex = void 0;
      this.init();
    }
    [...]
  })();

  $(function() {
    var lightbox, options;
    options = new LightboxOptions;
    return lightbox = new Lightbox(options);
  });
}).call(this); 
```

如果我没有包含足够的代码，可以[在 GitHub 上看到整个文件。](https://github.com/lokesh/lightbox2/blob/master/js/lightbox.js)在包含的部分中，`this.fileLoadingImage`并`this.fileCloseImage`给出了相对于执行它的 HTML 文件的路径。例如，`http://mywebsite.com/`。但是，我的 CSS、JS、图像等都是从`http://static[number].mywebsitestatic.com/`. 与其将我的一个可用静态 URL 硬编码到 .js 文件中，我更愿意使它成为一个更可重用的解决方案，这样如果这个可用的子域或父域发生变化，我就不必更新这个文件也是如此。

该站点是一个 Django 应用程序，因此在模板代码中，我可以简单地使用`{{ STATIC_URL }}`为给定页面写出正确的静态文件 URL 并将其传递到 .js 文件中。但是怎么做？例如，我希望能够执行以下操作（同时避免使用全局变量）：

```
<script>
    /* instantiate a new version of Lightbox */
    newLightbox.fileLoadingImage = "{{ STATIC_URL }}img/lightbox/loading.gif";
    newLightbox.fileCloseImage = "{{ STATIC_URL }}img/lightbox/close.gif";
</script> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-24T06:27:25.063

这是一个允许 lightbox.js 脚本确定其 URL 的小调整；然后是依赖图像的 URL。

# 原始代码

```
this.fileLoadingImage = 'images/loading.gif';
this.fileCloseImage = 'images/close.png'; 
```

# 修订代码

```
this.fileLoadingImage = $('script[src$="/lightbox.js"]')
    .attr('src')
    .replace(/\/lightbox\.js$/, '/../images/loading.gif');
this.fileCloseImage = $('script[src$="/lightbox.js"]')
    .attr('src')
    .replace(/\/lightbox\.js$/, '/../images/close.png'); 
```

该脚本通过检查属性以结尾的所有`<script>`标签（希望您只有一个这样的脚本标签）来工作。从这一点开始，很容易计算图像的路径。[演示在这里](http://jsfiddle.net/tdNua/1/)。请注意，演示使用一些技巧来处理 jsFiddle。`src``/lightbox.js`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T06:21:47.027

您可以使用全局 js 变量：

```
<script>
    var imagePath = '{{ STATIC_URL }}img/';
</script>
<script src="js/lightbox.js"></script> 
```

然后，修改 lightbox.js：

```
this.fileLoadingImage = imagePath + 'images/loading.gif';
this.fileCloseImage = imagePath + 'images/close.png'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T16:27:48.420

这就是我选择[jQuery lightBox 插件](http://leandrovieira.com/projects/jquery/lightbox/)的原因，它可以随心所欲地初始化。例子：

```
$("a[rel|=lightbox]").lightBox
  imageLoading: '/assets/lightbox-ico-loading.gif'
  imageBtnPrev: '/assets/lightbox-btn-prev.gif'
  imageBtnNext: '/assets/lightbox-btn-next.gif'
  imageBtnClose: '/assets/lightbox-btn-close.gif'
  imageBlank: '/assets/lightbox-blank.gif' 
```

（我正在使用 Coffeescript）。

# c# - C# 在 WebBrowser 或任何其他组件中显示 XML

> ID：10292614
> 
> 赞同：0
> 
> 时间：2012-04-24T06:12:37.257
> 
> 标签：c#, xml, browser

我真正需要的是在组件中显示 XML。到目前为止，我已经使用 webbrowser 组件来显示我的 XML 数据，代码如下：

```
//XDocument loaded_xml = new XDocument();
        var stream = new MemoryStream();
        loaded_xml.Save(stream);
        stream.Position = 0;
        WebBrowser1.DocumentStream = stream; 
```

问题是它没有在我的网络浏览器中呈现 xml，但是当我右键单击它并查看源代码时，xml 内容就在那里！！

最后，如果有任何其他组件可以在其中显示 XML，我将很高兴得知:) 提前谢谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T06:18:01.807

[这里](http://blorgh.wordpress.com/2006/10/17/displaying-xml-in-the-net-webbrowser-control/)有一个关于使用 IE 使用的默认 XSL 的解释。

**这是从那篇文章复制粘贴的**，因为您似乎无法访问它。**归功于作者**：

Internet Explorer 以相当不错的方式显示 XML。今天我想我会使用相同的引擎在 .NET 2.0 应用程序中显示 XML。所以我将一个 WebBrowser 控件放到一个表单上，并将我的 XML 字符串分配给 DocumentText 属性。瞧？当然不是。

经过一番挖掘，我发现 IE 使用内置的 XSLT-transform 在浏览器中将 XML 呈现为 HTML。有问题的样式表可从 IE 中的以下 uri 获得：res://msxml.dll/defaultss.xsl。好的，那么可以保存这个字符串，并在.NET 中使用它吗？不完全的。事实证明，IE 使用的 XSL 与 .NET 的 XslCompiledTransform 类不兼容。哦！

经过更多的挖掘，事实证明 Steve Muench 已经完成了对 .NET 所需的 XSLT 1.0 REC 的转换。谢啦！该文件可以在这里下载。

我将以下代码添加到我的 WebBrowser 基类中，以允许开发人员通过设置属性来显示 XML：

```
public XmlDocument DocumentXml
{
set
{
Stream s = <defaultss.xsl from embedded resource file>

XmlReader xr = XmlReader.Create(s);
XslCompiledTransform xct = new XslCompiledTransform();
xct.Load(xr);

StringBuilder sb = new StringBuilder();
XmlWriter xw = XmlWriter.Create(sb);
xct.Transform(value, xw);

this.DocumentText = sb.ToString();
}
} 
```

# iphone - 将 MyAppDelegate.m 中的方法调用到 ViewController

> ID：10292618
> 
> 赞同：0
> 
> 时间：2012-04-24T06:13:03.433
> 
> 标签：iphone, ios, delegates, reloaddata, aqgridview

我有 GridViewController。

```
@interface GridViewController : UIViewController <AQGridViewDelegate, AQGridViewDataSource, LoginViewControllerDelegate, IconDownloaderDelegate, UIScrollViewDelegate> {

NSArray *objects; //main data model
NSMutableDictionary *imageDownloadsInProgress;

}

@property (nonatomic, retain) IBOutlet AQGridView *gridView; 
```

我需要调用我的gridview 的reloadData 方法。

当我调用`[self.gridView reloadData];`GridViewController.m (viewDidLoad) 时，

它重新加载没有问题。

但是我需要在 AppDelegate.m 中调用这个方法

所以我在 AppDelegate.m 中导入“GridViewController.h”

```
#import "AppDelegate.h"
#import "GridViewController.h" 
```

并调用方法，

```
[gridViewController.gridView reloadData]; 
```

它不工作。

如何从我的 delegate.m 调用此方法到 GridViewController 的 gridView？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T06:35:16.260

尝试在您的 AppDelegate 中发布您的 GridViewController 将捕获的通知。在 AppDelegate.m 的某个地方，您需要调用您的网格重新加载代码：

```
[[NSNotificationCenter defaultCenter] postNotificationName:@"reloadGrid" object:nil]; 
```

在您的 GridViewController 的 viewDidLoad 中：

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(reloadMyGrid)name:@"reloadGrid" object:nil]; 
```

在您的 GridViewController 的 viewDidUnload 中：

```
[[NSNotificationCenter defaultCenter] removeObserver:self]; 
```

并且您需要向 GridViewController 添加方法：

```
- (void)reloadMyGrid {
     [self.gridView reloadData];
} 
```

# c#-4.0 - request.contentLength 返回 -1

> ID：10292621
> 
> 赞同：0
> 
> 时间：2012-04-24T06:13:11.153
> 
> 标签：c#-4.0

在我的 c# 应用程序（.net 4）中，我想以 KB 计算总上传和下载数据大小，以下是代码，问题是'request.contentLength'总是返回-1。是'request.contentLength'（对于上传数据计算）和“response.contentLength”（用于下载数据计算）是计算此数据的正确语句吗？

```
private string pageFetch(string url,int requestTimeOut)
    {

        HttpWebRequest request = (HttpWebRequest)WebRequest.Create(url);
        request.Timeout = requestTimeOut;
        if (!Program.proxyType.Equals("None"))
        {
            int iPortNo = 0;
            try
            {
                iPortNo = Int32.Parse(Program.proxyPort);
            }
            catch (Exception ex)
            {
                iPortNo = 0;
            }
            WebProxy objProxy = new WebProxy(Program.proxyAddress, iPortNo);
            if (!Program.proxyUsername.Equals(""))
            {
                objProxy.Credentials = new NetworkCredential(Program.proxyUsername, Program.proxyPassword);
            }
            request.Proxy = objProxy;
        }
        HttpWebResponse response=null;

        try
        {
            response = (HttpWebResponse)request.GetResponse();

        }
        catch (Exception e)
        {

        }

        lock (lockObject)
        {
            if (response.ContentLength>0)
            totalDownload += (response.ContentLength / 1024);
            if(request.ContentLength>0)
            totalUpload += (request.ContentLength/1024);
            Console.WriteLine("Request length**********" + request.ContentLength);
            Console.WriteLine("Up=======" + totalUpload + "Down======" + totalDownload);
        }

        Program.comment("Response Status=" + response.StatusCode);
        string output = "";
        if (response != null)
        {
            if (response.StatusCode == HttpStatusCode.OK)
            {

             // output processing

            }
            else
            {
                response.Close();
            }
        }
       Console.WriteLine("Output=" + output);
        return output;
    } 
```

pageFetch(string url,int requestTimeOut) 方法在 TPL 中运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T06:15:34.307

ContentLength 属性包含随响应返回的 Content-Length 标头的值。如果响应中未设置 Content-Length 标头，则 ContentLength 设置为值 -1。

请参阅**[HttpWebResponse.ContentLength 属性](http://msdn.microsoft.com/en-us/library/system.net.httpwebresponse.contentlength.aspx)**

# entity-framework-4.1 - 如何将匿名类型转换为实体框架的实体？

> ID：10292624
> 
> 赞同：0
> 
> 时间：2012-04-24T06:13:24.927
> 
> 标签：entity-framework-4.1

我有以下查询

```
 var db = new Entities();
            IQueryable<Tbl_RSCRegularSupply> qrySupp = (from cont in db.Tbl_RSC
                                                        where cont.ID == contractID
                                                        let RegSupp = new
                                                       {
                                                           RegSupply = from R in cont.Tbl_RSCSupplyPlan
                                                                       select R.Tbl_RSCRegularSupply
                                                       }

                                                        select (Tbl_RSCRegularSupply)RegSupp.RegSupply);

            return qrySupp.AsParallel().ToList(); 
```

但是在执行此创建以下异常之后。

无法将类型“System.Collections.Generic.IEnumerable`1”转换为类型“Tbl_RSCRegularSupply”。LINQ to Entities 仅支持转换实体数据模型基元类型。

`List<Tbl_RSCRegularSupply>`从上面的查询中获取是否有一些好方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T11:29:43.330

问题是那`RegSupp.RegSupply`是一个`IEnumerable<EntitySet<Tbl_RSCRegularSupply>>`，所以它不能被强制转换为`Tbl_RSCRegularSupply`。换句话说，您有一个列表列表，而不是项目列表。

我不知道你的规格，但你可以做

```
} ... select RegSupp.RegSupply.Selectmany(r => r)); 
```

它将结果展平在一个列表中。

# javascript - 如何检查页面中的某些内容是否已更改？

> ID：10292625
> 
> 赞同：1
> 
> 时间：2012-04-24T06:13:28.650
> 
> 标签：javascript, jquery, javascript-events

如果我在页面中进行任何更改，然后尝试在不保存的情况下导航离开，我想要一条错误消息询问我们是否要保存更改。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T06:30:11.227

`onbeforeunload`事件是你需要的。将一个函数绑定到它，该函数返回一个`string`要显示的函数（仅适用于 Chrome，其他浏览器将显示默认消息），每当用户尝试从页面导航离开（按后退、前进、单击链接、关闭选项卡或窗口本身）时.

向用户显示类似确认的对话框，如果用户选择继续，则执行他请求的操作。如果他选择留在页面上，则不会发生任何事情。

```
$('input').change(function(){
    window.onbeforeunload = function(){
         //Return the message that should be displayed in Chrome.
         // Other browsers will show default message.
         return "You have unsaved changes on this page";
     };
}); 
```

保存更改时，只需设置`window.onbeforeunload = null`为在用户尝试离开页面时删除消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T06:38:40.440

有几件事需要考虑。

您使用哪些元素进行输入。这将影响您的 elementSelector（在下面的代码中使用）如果您使用诸如 jeditable 之类的插件，您必须了解的不仅仅是用于输入的元素。您还需要知道用于显示值的元素。

如果您绑定更改，如 sudhirs 的回答，我建议您使用 live 而不是绑定方式来自动支持就地编辑。

在更改事件上设置标志的标志解决方案不包括用户将值更改回原始值的情况。

下面代码的想法是迭代所有你想要监控的元素并存储原始值。在卸载之前，然后比较这些值，如果发现更改，则应给出警告。

```
$(function(){
   function getVal(){
      var val,node = $(this),nodeType = node.attr('type');
       if(this.nodeName.toLowerCase() == input){
           if(nodeType === "checkbox" || nodeType === "radio"){
               val = node.attr('checked');
           } else{
               val = node.val();
           }
       } else{
          val = node.text();
       }
       return val;
   }
   $(elementSelector).each(function)({
       $(this).data('original',getVal.Call(this));
   });
   window.onbeforeunload = function(){
      var hasChanges;
      $(elementSelector).each(function(){
            var org = $(this).data('original'),val = getVal.call(this);
            hasChanges = hasChanges || (org !== val)
      });
      if(hasChanges){
          return "Are you sure you wish to leave this page. Changes will be lost");
      }
   };
}); 
```

如果用户在保存后留在页面上（即数据使用 ajax 发布到服务器），您将需要更新存储值，以便后续更改正确地再次欺骗消息，但如果用户不更改，则不会欺骗消息保存后的任何东西

# sql - 有没有办法在数据库中找到优先级较少的挂起连接？

> ID：10292628
> 
> 赞同：0
> 
> 时间：2012-04-24T06:13:45.800
> 
> 标签：sql, sql-server, sql-server-2005

*我正在使用 SQL Server 2005 sp2，当我使用命令sp_who2*看到它时，数据库中有太多挂起的连接。我想知道如何找到连接的优先级，它们是在使用还是没用。

如果我删除暂停的连接会有害吗？

有什么办法可以找到吗，求指点...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T19:39:56.500

没有理由删除这些连接。它们不会造成负载。

如果您删除它们，创建它们的应用程序将收到意外错误。你很可能会导致错误。

# javascript - 在 javascript 闭包中包装一些资产需要

> ID：10292631
> 
> 赞同：2
> 
> 时间：2012-04-24T06:14:30.147
> 
> 标签：javascript, ruby-on-rails, asset-pipeline

我有一个清单文件`partials.js`，其中包含：

```
//= require_tree ./partials 
```

然后每个咖啡文件都`./partials/`包含以下内容：

```
$ ->
  # Rest of the code 
```

是否有可能在清单中有这样的东西：

```
$(function () {
//= require_tree ./partials
}); 
```

并删除`$ ->`单个文件中的包装？

（目前这实际上不起作用。代码被推到底部，上面有所需的js。）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T20:07:08.453

我最近遇到了同样的问题，我最终做的是：

以您的清单示例：

```
$(function () {
  //= require_tree ./partials
}); 
```

我们可以将其转换为如下所示的清单：

```
//= require ./head
//= require_tree ./partials
//= require ./tail 
```

然后我们制作`head.js`：

```
$(function (){ //need line to end with semicolon to trick preprocessor; 
```

然后我们制作`tail.js`：

```
}); 
```

诀窍是用带注释的分号结束 head.js 部分。否则，预处理器将尝试注入一个分号来破坏脚本，从而制作出这样的东西

```
$(function () {
;
  //rest of your code here
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-03T06:04:08.373

另一种方法是创建一个 load_my_asset.js.erb 文件：

```
function loadMyAsset() {
    <%= Rails.application.assets.find_asset('path/to/asset').source %>
}; 
```

并在 application.js

```
//= require load_my_asset 
```

在开发和生产中都有效

# c - 在 Linux 上的 valgrind 中存在内存泄漏的 AC 程序，但我已经从 malloc() 中释放了内存

> ID：10292632
> 
> 赞同：0
> 
> 时间：2012-04-24T06:14:31.987
> 
> 标签：c, linux, memory, memory-leaks, valgrind

我正在为一个真正的应用程序项目做 C++ 程序。

我使用 valgrind 进行内存泄漏检查。

我有 ：

10 个块中的 160 个字节肯定丢失在 2 的丢失记录 1 ==14312== 在 0x4A0846F: malloc (vg_replace_malloc.c:236)

但是，我调用了 free() 来释放它。

如何解决？为什么我有内存泄漏？

任何帮助将不胜感激。！

代码如下：

```
#include <stdio.h>
#include <stdlib.h>
int * GetSomeIDs() ; 
/*-------- GetSomeIDs-----*/

typedef struct {
       char* alias;   /* '\0'-terminated C string */
       int   specific_id;
} aliasID;

int GetNumberOfAliases(void)
{
    return 10;
}

aliasID *GetNextAlias(void)
{
    aliasID *p = (aliasID *) malloc(sizeof(aliasID)) ;
    p->alias = "test alias";
    p->specific_id = rand();
    return p; 
}

int *GetSomeIDs2(aliasID  ***a, int *aIDsize , int *idSize)
{
    int  *ids  = (int *) malloc(sizeof(int) * 8) ;  
    *idSize = 8 ; 
    int length = GetNumberOfAliases();
    *aIDsize = length ;
    int i  ;
    *a = (aliasID**) malloc(sizeof(aliasID*)*length) ;

    for(i = 0 ; i < length ; ++i)
    {
        (*a)[i] = GetNextAlias();
    }

    return  ids; 
}

void callGetSomeIDs()
{
    aliasID  **aD = NULL;
    int mySize = -1; 
    int myidSize = -1; 
    int *pt = NULL;
    pt = GetSomeIDs2(&aD, &mySize, &myidSize); 
    if (!pt || !aD || mySize <= 0 || myidSize <= 0)
    {
        printf("there is a runt time error of GetSomeIDs \n");
        if (!pt && aD)
        {
            printf("there is a runt time error of GetSomeIDs pt is NULL \n");
            free(aD);
        }
    if (!aD && pt)
        {
            printf("there is a runt time error of GetSomeIDs aD is NULL \n");
            free(pt);
        }
        if (!pt && !aD)
        {
            printf("there is a runt time error of GetSomeIDs aD and pt all NULL \n");
        }

        exit(1);
    }
    // print out 8 int
    printf("the followings are integers  \n");
    int i ;
    for(i = 0 ; i < myidSize ; ++i )
    {
        printf("%d " , pt[i]);
    }
    printf("\n");
    // print out alias and ID 
    printf("the followings are alias and ID  \n");
    for (i = 0 ; i <  mySize   ; ++i )
    {
        printf( "alias is  %s " , (*aD[i]).alias) ;   
            printf( "specific_id is  %d", (*aD[i]).specific_id) ;
        printf("\n") ;
    }

    free(pt);
    free(aD);
  }

  int main()
  {

      callGetSomeIDs();

      return 0; 
   } 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-24T06:17:16.343

您释放了`aliasID`结构数组，但没有释放数组中分配的条目。

**编辑：**

您首先分配一个`aliasID`指针数组，然后为数组中的每个条目分配实际的`aliasID`. 在释放数组之前，您需要先释放`aliasID`数组中的指针：

```
for (int i = 0; i < length_of_array; i++)
    free(aD[i]);
free(ad); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T06:23:53.487

不是 100% 确定，但如果您的代码在 GetSomeIDs2 之后输入 if，您会执行 exit(1)，因此您的 free 将无法运行。

您也不会释放从 GetNextAlias() 返回的内存；

# swing - webGL 如何与 Swing 配合使用

> ID：10292637
> 
> 赞同：0
> 
> 时间：2012-04-24T06:15:19.007
> 
> 标签：swing, webgl

在我的项目中，用户可以在 2d 中绘制屋顶，也可以在屋顶上放置天线、烟囱、水箱或冷却器单元。

我需要使用 swing 和 webGL 来做到这一点。谁能给我一些想法或链接，以便我继续。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-10-07T21:08:01.383

# 只是为了澄清

[WebGL](https://en.wikipedia.org/wiki/WebGL)是一种绑定到该语言的 Canvas API 的 JavaScript API，用于通过计算机的显卡 OpenGL 实现来渲染高性能 3D（和 2D）图形。

[Swing](https://en.wikipedia.org/wiki/Swing_(Java))是 Java 的 GUI（继承自 Java 的 AWT），随其标准开发工具包一起提供。

如果您没有注意到，那是 2 种不同编程语言中的 2 个概念！

# 解决问题

当我想用 Swing 创建一个通用游戏并且需要一些渲染图形时，我会求助于[JOGL](http://jogamp.org/jogl/www/)。这是一个了不起的库，可以与 Java 中的一些已知 GUI 工具包很好地结合，例如（你猜对了！）Swing。您可能想使用它`GLCanvas`并将其直接嵌入到您的`JFrame`。对于一些基本代码，请查看：

*   [https://www.tutorialspoint.com/jogl/jogl_canvas_with_swing.htm](https://www.tutorialspoint.com/jogl/jogl_canvas_with_swing.htm)
*   [https://jogamp.org/wiki/index.php/Using_JOGL_in_AWT_SWT_and_Swing#JOGL_in_Swing](https://jogamp.org/wiki/index.php/Using_JOGL_in_AWT_SWT_and_Swing#JOGL_in_Swing)

现在，您可能需要考虑将 JavaScript 代码迁移到 Java...

# ruby-on-rails-3 - 从初始化属性切换到工厂时 rspec 测试失败

> ID：10292640
> 
> 赞同：3
> 
> 时间：2012-04-24T06:15:38.163
> 
> 标签：ruby-on-rails-3, testing, rspec, factory-bot, railstutorial.org

这对我来说毫无意义，希望有人能提供帮助。使用工厂创建用户时，我遇到了一次测试失败（似乎通过了类似的测试）。

在我的 user_spec.rb 测试文件中，用户最初是这样创建的。使用这种初始化方法，所有测试都通过了。

* * *

用户创造

**user_spec.rb**（无工厂）

```
describe User do

  before do
  @user = User.new(name: "Example User", email: "user@example.com", 
                   password: "foobar", password_confirmation: "foobar", 
                   username: "username")
  end 
```

该应用程序的大多数其他测试都使用工厂。因此，决定将上述内容替换为致电工厂。

**user_spec.rb**（带工厂）

```
describe User do

  before do
  @user = FactoryGirl.create(:user)
  end 
```

* * *

工厂

工厂是这样的。

**工厂.rb**

```
FactoryGirl.define do
      factory :user do
        sequence(:name)  { |n| "Person #{n}" }
        sequence(:email) { |n| "person_#{n}@example.com" }
        password              "foobar"
        password_confirmation "foobar"
        sequence(:username) { |n| "username_#{n}" } 
```

* * *

测试失败

这是使用工厂创建用户时的测试失败。

**user_spec.rb**

```
Failures:

  1) User when email address is already taken 
     Failure/Error: it { should_not be_valid }
       expected valid? to return false, got true
     # ./spec/models/user_spec.rb:101:in `block (3 levels) in <top (required)>'

Finished in 12.61 seconds
178 examples, 1 failure, 2 pending 
```

* * *

测试

这是切换到工厂时测试失败的部分。

```
describe "when email address is already taken" do
    before do
      user_with_same_email = @user.dup
        user_with_same_email.email = @user.email.upcase
        user_with_same_email.save
    end

    it { should_not be_valid }
  end 
```

* * *

用户和 USER.DUP 的检查

我的第一个想法可能是在工厂创建的用户上使用 .dup 会导致问题。这是@user 和@user.dup 在上面的测试中使用时的输出（通过将行添加`puts @user.inspect`到`puts user_with_same_email.inspect`describe 块中。这两个`puts`都在之后`user_with_same_email.save`）。

**无工厂（测试通过）**

**@用户**

```
#<User id: nil, name: "Example User", email: "user@example.com", 
created_at: nil, updated_at: nil, 
password_digest: "$2a$04$I/71i.fpTwfp4PqRwAvU4eUEjEkW/wubx6uVBqfNBShq...", 
remember_token: nil, admin: false, username: "username"> 
```

**user_with_same_email**

```
#<User id: 1178, name: "Example User", email: "USER@EXAMPLE.COM", 
created_at: "2012-04-24 06:01:07", updated_at: "2012-04-24 06:01:07", 
password_digest: "$2a$04$I/71i.fpTwfp4PqRwAvU4eUEjEkW/wubx6uVBqfNBShq...", 
remember_token: "rMS9jM0d4lobLc-A-pTTqA", admin: false, username: "username"> 
```

**WITH FACTORY（测试失败）**

**@用户**

```
#<User id: 739, name: "Person 67", email: "person_67@example.com", 
created_at: "2012-04-24 05:54:28", updated_at: "2012-04-24 05:54:28", 
password_digest: "$2a$04$n4tToBVM2elz92cfHPKvte6dfHSBj4jDxG.w6DyKtGUR...", 
remember_token: "fy2iifmhXVTFa1__d1dBJg", admin: false, username: "username_67"> 
```

**user_with_same_email**

```
#<User name: "Person 67", email: "PERSON_67@EXAMPLE.COM", 
created_at: nil, updated_at: nil, 
password_digest: "$2a$04$n4tToBVM2elz92cfHPKvte6dfHSBj4jDxG.w6DyKtGUR...", 
remember_token: "fy2iifmhXVTFa1__d1dBJg", admin: false, username: "username_67"> 
```

上面突出的是，@user 在不使用工厂的情况下尚未保存，而在使用工厂时，@user 已保存。在这种情况下，我只是没有看到这对测试有何影响。

任何帮助，将不胜感激。谢谢！

（上面的代码来自 Michael Hartl 的 Rails 教程，我正在研究他在教程末尾提到的一些[应用程序功能扩展。）](http://ruby.railstutorial.org/chapters/following-users?version=3.2#sec%3aextensions_to_the_sample_application)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-24T17:22:53.243

工厂将记录存入数据库。User.new 在保存之前不会。原始测试不检查是否创建了 user_with_same_email，而是因为电子邮件存在而无法创建“它”（主题 { @user }）。在对@user 进行更改后，我不得不重写测试：

```
describe "when email address is already taken" do
  let (:user_with_same_email)  { @user.dup }

  specify { user_with_same_email.should_not be_valid }
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T20:45:42.990

谢谢埃里克。建立在您的测试之上....

最初的测试还测试了区分大小写和唯一性。该测试通过并且似乎可以解决问题。有什么想法吗？

```
describe "when email address is already taken" do
  let(:user_with_same_email) { @user.dup }
  before do 
    user_with_same_email.email = @user.email.upcase 
    user_with_same_email.save
  end
  specify { user_with_same_email.should_not be_valid }
end 
```

# java - 没有从资源包中获取消息

> ID：10292642
> 
> 赞同：0
> 
> 时间：2012-04-24T06:15:39.803
> 
> 标签：java, spring, internationalization

我已将 Spring 配置 xml 配置为使用“ResourceBundleMessageSource”，并且我试图从资源包文件中获取消息，但是当我要执行时，我得到的日志显示：它找不到给定的资源包姓名。

更准确地说：

```
WARN org.springframework.context.support.ResourceBundleMessageSource - ResourceBundle [messages] not found for MessageSource: Can't find bundle for base name messages, locale en_US 
```

我的 spring.xml 配置

```
<bean id="messageSource" class="org.springframework.context.support.ResourceBundleMessageSource">
    <property name="basename">
        <value>messages</value>
    </property>
</bean> 
```

我试图在我的代码中使用的方式：

```
ResourceBundleMessageSource rbms = (ResourceBundleMessageSource) applicationCtx.getBean("messageSource");
String message = rbms.getMessage("key001", parameters,"default message", null); 
```

还有我的messages.properties的一部分（我把这个文件放在project/src/下）

```
key001 = Problem occurred while fetching the results from database. Please see log. 
```

我也尝试用 messages_en_US.properites 重命名文件，但没有帮助。

我错过了什么吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T06:26:30.160

应用程序运行时，属性文件需要在类路径中；您的 IDE/编译器（和/或 ant/maven 构建过程）是否将 *.properties 复制到“输出”路径？

如果没有，它需要。（尝试手动复制它开始）

# javascript - NodeJS 聊天服务器示例代码

> ID：10292644
> 
> 赞同：1
> 
> 时间：2012-04-24T06:15:51.327
> 
> 标签：javascript, html, node.js, chat

我想为我的 Web 应用程序创建一个聊天模块。我在[http://search.npmjs.org/](http://search.npmjs.org/)上搜索了“聊天”，发现了许多聊天模块，但没有一个有任何可靠的示例教程来说明如何实现我的聊天模块。

有人会根据已经创建的 NodeJS 模块提供教程吗？我不想从头开始重写 NodeJS 服务器端代码！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-28T08:43:24.417

一步一步检查以下链接一个简单的聊天示例 [node.js 聊天服务器 +client 没有套接字 io](http://scriptime.blogspot.in/2014/04/a-simple-chat-application-using-nodejs.html)

* * *

## 回答 #2

> 赞同：-4
> 
> 时间：2012-04-24T06:24:00.057

[http://chat.nodejs.org/](http://chat.nodejs.org/)

阅读代码，简单明了！您可以轻松地自己创建模块。

# ruby-on-rails - Ruby on Rails：你好世界

> ID：10292645
> 
> 赞同：13
> 
> 时间：2012-04-24T06:16:03.030
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.2

长期 Java 开发人员，第一次 Ruby 开发人员。尝试使用 Rails 应用程序进入“hello world”步骤，但遇到了困难。

我很肯定我在这里缺少一些基本的东西。话虽如此，StackOverflow 的“具有相似标题的问题”和谷歌的“ruby rails hello world”命中（或其变体）都没有澄清我所缺少的。

我通过 RVM 安装了 ruby​​ (v1.9.3p194)、gem (1.8.23) 和 rails (3.2.3)。我使用以下方法生成了一个控制器：

```
rails generate controller common 
```

在默认的“config/routes.rb”中，我有以下两次路由尝试：

```
Web::Application.routes.draw do
  root :to => "common#index"
  match ':controller(/:action(/:id))(.:format)'
end 
```

当我最初在浏览器中运行“rails server”并加载“http://localhost:3000/common”时，我看到了以下内容：

```
Unknown action
The action 'index' could not be found for CommonController 
```

我了解到这是因为没有为我的通用控制器定义“索引”，所以我编辑了“app/controllers/common_controller.rb”以包含以下内容：

```
class CommonController < ApplicationController

  def index
  end

end 
```

我现在在浏览器的“http://localhost:3000/common”看到以下内容：

```
Template is missing
Missing template common/index, application/index with {:locale=>[:en], :formats=>[:html], :handlers=>[:erb, :builder, :coffee]}. Searched in: * "/coding/workspace/[My] Toolbag/web/app/views" 
```

我在根源上看到了同样的事情，这是有道理的。

根据我的发现，这显然是由于我的控制器中没有任何渲染，所以我相信它应该检查“app/views/common/index.html.erb”中的某些内容——但是，我确实这样做了那里有一个文件，其中包含以下内容：

```
<h1>Hello World</h1> 
```

我还尝试将“index.html.erb”重命名为“_index.html.erb”、“index.html”和“index”，所有这些都基于控制台错误“ActionView::Missing Template”的谷歌搜索变体和上面类似的浏览器输出。

许多 Google 结果都包含建议片段，但没有明确的指导来说明使用所述建议编辑哪些文件，或者重复我上面已经采取的步骤。

如果有人可以建议我缺少什么，我将不胜感激。

PS：我以超级用户身份运行，此处引用的所有文件都拥有“root：root”所有权。rails 可能打算作为普通用户运行吗？不过，如果是这样的话，这似乎不会让我走这么远。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-24T06:45:17.640

那很奇怪。我只是重复了你的步骤并让它工作（使用 rails 3.2.3 和 ruby​​ 1.9.3-p0），当访问 localhost:3000/common 时，我得到了“Hello World”。

[http://grab.by/dg6Y](http://grab.by/dg6Y)

这是我要快速尝试的方法，以确保您的设置没有问题：

1) cd 在您的 rails 项目目录中

2）发出这些终端命令

> rails g 脚手架用户名：字符串电子邮件：字符串
> 
> 耙分贝：迁移

3) 访问这个网址 [http://localhost:3000/users](http://localhost:3000/users)

如果您的导轨设置正确，您应该会看到这个

[http://grab.by/dg74](http://grab.by/dg74)

如果这些步骤不起作用，那么您的设置似乎发生了一些奇怪的事情。

此外，请务必`public/index.html`从您的应用程序中删除该文件。如果您不删除它，您将无法看到您在路由文件中指定的自定义根页面。

如果上述方法不起作用，可能是您的 Ruby 版本有问题？

希望这可以帮助！

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-04-26T07:25:15.640

哇。我实际上只是偶然发现了实际的根本问题：

我在一个名称中有括号的文件夹中创建我的项目——也就是说，我正在从“/coding/workspace/[My] Toolbag”中运行“rails new web”。

今晚我碰巧在“/coding/workspace”中再次尝试，它终于成功了。因此，我从以下位置测试了“rails new web”以充实我的怀疑：

```
/coding/workspace/test1
/coding/workspace/test 2
/coding/workspace/test [3]
/coding/workspace/test [4
/coding/workspace/test ]5
/coding/workspace/test [6/subfolder 
```

怀疑得到证实。文件夹 3、4、6 中的 Rails 项目演示了我在这个问题中描述的问题，而文件夹 1、2、5 中的 Rails 项目工作得很好。

具体来说，问题是路径中任何位置的左括号：“[”

我正在使用 Linux Mint。尽管我还没有尝试在其他发行版、Windows 或 Mac 上重现，但这个问题可能适用的范围更广。

非常感谢[布雷特·桑德斯（Brett Sanders](https://stackoverflow.com/users/1313417/brett-sanders)）的所有一再协助和确认我的方法应该是正确的，我提交这个答案并将这个答案标记为正确，以防其他人遇到同样的问题。

# c++ - 当 RVO/NRVO 启动时，对象是否被复制？

> ID：10292646
> 
> 赞同：5
> 
> 时间：2012-04-24T06:16:06.370
> 
> 标签：c++, copy-constructor, nrvo, rvo

我无法理解 RVO（和 NRVO）的定义，因为[像这样](https://stackoverflow.com/q/3905869/57428)的多个问题在我看来假设 RVO 省略了复制构造函数。现在根据 12.8.15

> 在这种情况下，实现将省略的复制操作的源和目标简单地视为引用同一对象的两种不同方式，并且该对象的销毁发生在两个对象本应被销毁的较晚时间优化。

看起来不是复制构造函数调用被省略，而是复制本身 - 只是对象首先在“复制”位置构造，因此没有“原始”对象，根本没有复制。因此，即使一个类有一个`private`复制构造函数，它也可以在 RVO 启动时从函数中返回，因为没有复制。

我做对了吗？是复制本身省略还是复制构造函数调用省略？当对象类具有私有复制构造函数时，是否应允许从函数返回对象？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-24T06:31:59.553

*如果*优化生效，则省略复制，但仍需要编译器检查复制构造函数是否可访问。否则，如果编译器（或其他编译器）决定不优化，代码将无效。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-24T06:35:01.550

**是复制本身省略还是复制构造函数调用省略？**

复制操作本身被省略。如果您查看完整的报价，它会清楚地提到：

**C++ 03 12.8 复制类对象**

**第 15 段**

> 当满足某些条件时，允许实现省略类对象的复制构造，即使对象的复制构造函数和/或析构函数具有副作用。在这种情况下，实现将省略的复制操作的源和目标简单地视为引用同一对象的两种不同方式，并且该对象的销毁发生在两个对象本应被删除的较晚时间。在没有优化的情况下销毁。111）在以下情况下允许复制操作的这种省略（可以组合以消除多个副本）：
> 
> — 在具有类返回类型的函数的 return 语句中，当表达式是与函数返回类型具有相同 cv 非限定类型的非易失性自动对象的名称时，可以通过构造自动对象**来省略复制操作**对象直接转化为函数的返回值。
> 
> — 当一个未绑定到引用（12.2）的临时类对象将被复制到具有相同 cv-unqualified 类型的类对象时，可以通过将临时对象直接构造到省略的目标中**来省略复制操作**复制.....

**当对象类具有私有复制构造函数时，是否应允许从函数返回对象？**

RVO 和 NRVO 是编译器优化，编译器**允许但不能保证**如果特定的哑编译器无法提供这些优化会怎样？
如果没有可访问的复制构造函数，代码将在所有不需要的此类编译器上中断。鉴于复制构造函数应该是可访问的。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-24T06:35:52.453

正式地说，不，RVO/NRVO 不影响程序是否格式良好。该标准明确允许省略复制构造函数的任何副作用，*但*仍然应该对复制构造函数进行访问检查。

然而，大多数编译器不会对省略的复制构造函数进行访问检查，除非您要求尽可能严格地执行规则。我不太确定，但我似乎记得使用过一些跳过访问检查的工具，即使您*确实*要求严格遵守（但我不记得肯定）。

编辑（纠正我在其他一些答案中表达的误解）：

标准部分中的段落旨在按顺序阅读。*第一段*中适用于某种情况的要求始终适用。在这种情况下，第 15 段允许省略副作用。然而，在第 14 段之前，我们看到：

> A program is ill-formed if the copy constructor or the copy assignment operator for an object is implicitly used and the special member function is not accessible (clause 11).

So, we only get to paragraph 15 (where copying can be omitted) *if* the access check specified in paragraph 14 has already been passed.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-24T06:41:40.513

It's the copy itself that is omitted. Whenever copying is actually done, it must be done using the copy constructor, but there are several cases where the compiler is allowed to optimize away a copy.

Larger and non-pod objects are returned by the stack. The caller prepares a space for the object and passes pointer to that space as hidden parameter. The callee than copies the object into that space. Two optimizations can be done here:

1.  The callee can create the object directly in the return space. The compiler has to be sure the object is going to be returned, that is only return statements returning that object may follow and intervening code must not throw.
2.  If the result is assigned to variable, the caller may pass it's address instead of creating a temporary. This can only be done if the variable is either being initialized or if the effect would provably not differ from calling `operator=`, which is basically if the type has default constructor, destructor and `operator=`.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-24T06:34:57.303

> 是复制本身省略还是复制构造函数调用省略？

这个想法是省略了复制构造函数，尽管如果不改变程序的语义，编译器可以共享内存。

> 当对象类具有私有复制构造函数时，是否应允许从函数返回对象？

不，这是不允许的。“应该”很难说，但允许它允许你做各种恶作剧并打破封装。在 C++11 中，您可以通过`{}`在 return 中使用构造并移动构造该值来做到这一点。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-24T06:31:43.533

如果你看这篇文章[NRVO 在 MSDN 中透露](http://msdn.microsoft.com/en-us/library/ms364057%28vs.80%29.aspx)

您将看到没有调用复制 coinstructor。

# c# - 大约 15 分钟后，asp.net Web 应用程序进入登录页面

> ID：10292650
> 
> 赞同：0
> 
> 时间：2012-04-24T06:16:39.563
> 
> 标签：c#, asp.net

我有一个 Web 应用程序，由于某种我无法弄清楚的原因，它每 15 分钟进入一次登录页面（我相信会话是空闲的）。我没有指定超时甚至接近该超时的Web配置文件。有没有人遇到过这样的问题或知道我可以在哪里尝试解决问题？谢谢你的帮助。

```
<authentication mode="Forms">
  <forms loginUrl="~/Account/Login.aspx" 
         timeout="90" 
         defaultUrl="~/" 
         name="" 
         protection="All" />
</authentication> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T06:19:36.317

检查会话超时：

```
<sessionState timeout="90" /> 
```

此外，如果您使用的是 ASP.NET Session 并且它存储在 InProc 中，请注意 Web 服务器可能会在不同情况下回收 AppDomain，例如一段时间不活动或达到某些内存或 CPU 阈值。当 AppDomain 被回收时，您可能存储在内存中的所有内容都会消失。因此，请务必检查 IIS 中的应用程序池配置以验证这些值。

# java - 我如何为每个组值打印 json 组名

> ID：10292651
> 
> 赞同：1
> 
> 时间：2012-04-24T06:16:39.967
> 
> 标签：java, json

我对 java 非常陌生，实际上我正在将 Json 文件转换为 XML。它工作正常，但从某种意义上说，组名并没有为每个组值打印。我有这样的Json

```
{
    "a": "b",
    "r": "y",
    "g1": [
        {
            "gg1": 1,
            "gg2": 2,
            "gg3": 3
        },
        {
            "gg4": 4",
            "gg5": 5",
            "gg6": 6"
        }
    ]
} 
```

我正在使用我从网上获得的这个 java 代码

```
import java.io.InputStream;

import net.sf.json.JSON;
import net.sf.json.JSONSerializer;
import net.sf.json.xml.XMLSerializer;

import org.apache.commons.io.IOUtils;
import java.io.*;

import org.apache.commons.io.IOUtils;

public class ConvertJSONtoXMLSetRoot {

public static void main(String[] args) throws Exception {
    InputStream is = ConvertJSONtoXMLSetRoot.class.getClassLoader().getResourceAsStream("json file");
    String jsonData = IOUtils.toString(is);

    XMLSerializer serializer = new XMLSerializer(); 
    JSON json = JSONSerializer.toJSON( jsonData ); 
    serializer.setRootName("SampleJSON");
    serializer.setTypeHintsEnabled(false);
    String xml = serializer.write( json );  
    System.out.println(xml);        

} 
```

}

实际上它以这种格式打印

```
<a>b</a>
<r>y</r>
<g1>
    <e>
        <gg1>1</gg1>
        <gg2>2</gg2>
        <gg3>3</gg3>
    </e>
    <e>
        <gg4>4</gg4>
        <gg5>5</gg5>
        <gg6>6</gg6>
    </e>
</g1> 
```

但我想以这种格式输出

```
<a>b</a>
<r>y</r>
<g1>
    <gg1>1</gg1>
    <gg2>2</gg2>
    <gg3>3</gg3>
</g1>
<g1>
    <gg4>4</gg4>
    <gg5>5</gg5>
    <gg6>6</gg6>
</g1> 
```

我不知道是否必须更改代码或更改 Json 结构，请帮助我

# actionscript-3 - Flash (actionscript) 运行时出现奇怪错误 TypeError: Error #1009: at global/avmplus::describeType()

> ID：10292656
> 
> 赞同：-1
> 
> 时间：2012-04-24T06:17:22.850
> 
> 标签：actionscript-3

当我使用非空对象调用 describeType(object) 时，出现此错误：

> 无法访问空对象引用的属性或方法。

会是什么呢？

我正在使用 Flex SDK 4.6。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T10:30:41.620

请在访问任何可能出现空值/偶然获得空值的对象之前进行检查。if(objName != null){ //写下你的代码 } ...它永远不会给出 1009 错误。但首先要确定您从哪里以及为什么获得访问对象的空引用。这是识别和解决问题的正确方法。但是在遇到问题后，如果它无法解决，那么请应用我建议的解决方法。

# android - SQlite 查询返回零结果

> ID：10292657
> 
> 赞同：0
> 
> 时间：2012-04-24T06:17:28.437
> 
> 标签：android, sqlite, cursor, selection

我的查询使用 /sdcard/Shri Ramachandra Bhajana.mp3 之类的参数作为查询的选择条件

> “选择开始，从crop_list结束，其中名称=“+”修剪（'argument'）”

但它在游标中返回 0 行。尽管数据库表中有很多条目。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T06:31:10.677

```
"SELECT start,end FROM crop_list WHERE name = trim('"<argument>"')" 
```

`argument`你的字符串在哪里。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T06:19:21.467

改成：

```
"SELECT start,end FROM crop_list WHERE name = '"+ argument.trim() + "'" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-24T06:40:52.640

将您的查询更改为

```
SELECT start, end FROM crop_list WHERE name = trim('" + argument+"') 
```

你的论点在哪里

```
String argument = "/sdcard/Shri Ramachandra Bhajana.mp3"; 
```

# php - mysql插入查询不起作用

> ID：10292658
> 
> 赞同：1
> 
> 时间：2012-04-24T06:17:29.137
> 
> 标签：php, mysql, insert

我在名为**hcp**的数据库中有一个表**disease**，其中包含*diid*、*diseasename*和*descrption*列。

 **我想简单地从 HTML 表单中输入；到目前为止，这是我的代码。

```
<html><head><title>Disease Inssert</title></head>
<body>
<form action="diseaselist.php" method="post">
Disease Name : <input type="text" name="txtDiseaseName" id="textbox" /><br />
Description : <input type="text" name="txtDiseaseDescription" id="textbox" /><br />
<input type="submit" name="btnDiseaseSubmit" id="button"/>

</form>
</body>
</html>

<?php
mysql_connect("localhost","root","");
mysql_select_db("hcp");

if($_REQUEST['btnDiseaseSubmit'])
{
$queryDiseaseInsert="INSERT INTO  disease (`diseasename` ,`description`) VALUES ('".$_REQUEST['txtDiseaseName']."', '".$_REQUEST['txtDiseaseDescription']."');";

$resultDI=mysql_query($queryDiseaseInsert) or die(mysql_error());
}
?> 
```

提交后，页面重定向到`diseaselist.php`，但数据未保存在数据库中。

任何人都可以看到我的查询有什么问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T06:27:25.703

表单直接提交到列表中`<form action="diseaselist.php" method="post">` 。保存到数据库的代码永远不会执行。

您可以创建一个中间页面，假设`process.php`包含用于添加到数据库的代码：

```
<?php
mysql_connect("localhost","root","");
mysql_select_db("hcp");

if($_REQUEST['btnDiseaseSubmit'])
{
    $queryDiseaseInsert="INSERT INTO  disease (`diseasename` ,`description`) VALUES ('". mysql_real_escape_string($_REQUEST['txtDiseaseName'])."', '".mysql_real_escape_string($_REQUEST['txtDiseaseDescription'])."');";

   $resultDI=mysql_query($queryDiseaseInsert) or die(mysql_error());
   // insert is complete, redirect to list
   header("location: diseaselist.php");
} else {
   // the form was not submitted
   // redirect back to the form or show error message
}

?> 
```

变化：

*   添加了 mysql_real_escape_string
*   插入后，发送头部指令将浏览器重定向到列表

现在，在您当前的文件中，只保留 html 代码并更新`action`属性以将表单提交给`process.php`脚本：

```
<html><head><title>Disease Inssert</title></head>
<body>
<form action="process.php" method="post">
Disease Name : <input type="text" name="txtDiseaseName" id="textbox" /><br />
Description : <input type="text" name="txtDiseaseDescription" id="textbox" /><br />
<input type="submit" name="btnDiseaseSubmit" id="button"/>

</form>
</body>
</html> 
```

变化：

*   将表单`action`属性更新为`process.php`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-24T06:33:59.287

您的脚本存在一些问题。首先是您在尝试插入数据之前没有检查数据。HTML 表单的典型流程如下所示：

1.  显示形式。用户输入数据并提交。
2.  数据被发送到服务器（应该）检查所有需要的数据。如果没有显示，用户（通常）会收到带有错误的表单。
3.  这种情况一直持续到用户放弃或提交完全有效的表格。

现在说了以上，这里是你的形式：

```
<?php

  $mysql = mysql_connect("localhost","root","");   // assign to variable
  mysql_select_db("hcp", $mysql);

  // Get into the habit of using $_POST and $_GET instead of $_REQUEST
  if(isset($_POST['btnDiseaseSubmit']) && !empty($_POST['btnDiseaseSubmit'])) 
  {  // Form was completely submitted
    $sql = "INSERT INTO  disease (`diseasename` ,`description`) VALUES ('".$_POST['txtDiseaseName']."', '".$_POST['txtDiseaseDescription']."');";  // No need for massive variable names

    $resultDI = mysql_query($sql, $mysql) or die(mysql_error());

    mysql_close($mysql);    // Close database connection - cleans things up
    echo "Successfolly ran database query!";
  } else {  // Form was not completely submitted, if at all - display form.
?>
<html>
  <head><title>Disease Inssert</title></head>
  <body>
    <!-- If action is not present, the form will submit to the current page. ie. If current page is a.php and we leave out action, the form will submit to a.php! -->
    <form method="post">
      Disease Name : <input type="text" name="txtDiseaseName" id="textbox" /><br />
      Description : <input type="text" name="txtDiseaseDescription" id="textbox" /><br />
      <input type="submit" name="btnDiseaseSubmit" id="button"/>
    </form>
  </body>
</html>
<?php
  }
?> 
```

这对你来说应该很好。请注意代码中的注释，以便您知道我做了什么以及为什么这样做。谷歌搜索更多示例。你很快就会明白这一切。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T06:28:35.390

在`diseaselist.php`页面上尝试使用以下代码

```
<?php

   mysql_connect("localhost", "root", "");
mysql_select_db("hcp");

if (isset ($_REQUEST['btnDiseaseSubmit'])) {
    $queryDiseaseInsert = "INSERT INTO disease ('diseasename' , 'description') VALUES('" . $_REQUEST['txtDiseaseName'] . "','" . $_REQUEST['txtDiseaseDescription'] . "')";

    $resultDI = mysql_query($queryDiseaseInsert) or die(mysql_error());
}
?> 
```**

# c++ - 读入由条c ++分隔的文件

> ID：10292659
> 
> 赞同：-4
> 
> 时间：2012-04-24T06:17:32.307
> 
> 标签：c++, file-io

我正在尝试读取 C++ 中的一个文件，其中字符由条“|”分隔，最好的方法是什么？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-24T06:23:03.617

我假设字段由条分隔，但记录由换行符分隔。

首先，使用 阅读文本行`std::getline`：

```
std::string line;
std::getline(std::cin, line); 
```

然后，在边界处打破`|`界限。

```
std::stringstream sline(line);
std::string field;
std::getline(sline, field, '|');
...
std::getline(sline, field, '|'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T08:10:29.797

根据您使用的代码的复杂性，您正在寻找的是 CSV（逗号分隔值）文件阅读器的变体。那里有成千上万的代码，如果您的代码需要健壮，我建议您使用其中之一而不是编写自己的代码，因为存在以下复杂性：

*   如果您的“值”之一实际上包含“|”怎么办 引号中的字符说？
*   如果您的“值”之一包含回车或换行怎么办？

最受欢迎的工具之一是[Boost 标记器](http://www.boost.org/doc/libs/1_49_0/libs/tokenizer/index.html)，它应该很容易上手和使用。您只需要确保告诉标记器您正在使用“|” 作为字段分隔符。

看看[这个相关问题](https://stackoverflow.com/questions/53849/how-do-i-tokenize-a-string-in-c)以获得更多指示。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T07:21:06.733

假设您有一个名为“file.dat”的文件
，它看起来像这样：

```
item1|item2|item3|item4|item5|item6 
```

该程序将打印文件中的每个项目：

```
#include <iostream>
#include <cstdlib>
#include <string>
#include <fstream>

int main(){

    std::ifstream infile("file.dat");

    std::string item;
    getline(infile,item,'|');

    while (!infile.eof()){
        std::cout << item << std::endl;
        getline(infile,item,'|');
    }

    return EXIT_SUCCESS;
} 
```

# c# - 获取 Windows 8 Live ID：GetPrincipalNameAsync() 返回空字符串

> ID：10292660
> 
> 赞同：2
> 
> 时间：2012-04-24T06:17:35.113
> 
> 标签：c#, windows-8, liveid

我正在尝试使用该方法

```
Windows.System.UserProfile.UserInformation.GetPrincipalNameAsync() 
```

获取 Windows Live ID，但它返回一个空字符串，有人知道为什么吗？

非常感谢。

# java - 如何获取从 Android 相机中的 takePicture 调用返回的图像数据字节数组？

> ID：10292664
> 
> 赞同：0
> 
> 时间：2012-04-24T06:18:29.157
> 
> 标签：java, android, android-camera

我有一个用于 android 相机应用程序的简单拍照类：

```
public class SimplePicture implements Picturable, PictureCallback{

    Camera camera;
    byte[] imgData; // image data in bytes

    /**
     *@param c, the camera instance that the Android phone is using.
     */
    public SimplePicture(Camera c){
        this.camera = c;

    }   

    public byte[] getPicture(int exposureCompensation) {
        // TODO Auto-generated method stub
        Parameters p = camera.getParameters();
        p.setExposureCompensation(exposureCompensation);

        if(p.getMaxExposureCompensation() > 0){  // if exposure is supported
            camera.takePicture(null, this, this);
        }

        return imgData; 

    }

    public void onPictureTaken(byte[] data, Camera camera) {
        // TODO Auto-generated method stub
        imgData = data; 

    }

} 
```

如您所见，我试图让我的 getPicture() 方法返回所拍摄图像的字节。由于回调是唯一可以让我访问 imageData 的函数，所以我知道在拍照后图像数据准备好时会调用回调函数。**onPictureTaken 函数是否会与我的 getPicture 函数同时运行，以便在正确设置字节数组之前返回函数（返回 imgData）？还是执行等待 onPictureTaken 调用然后返回？**

如果是第二种情况，我想我的工作是正确的。如果是第一种情况，有人可以引导我走向正确的方向。有没有更简单的方法可以做到这一点，还是我需要使用锁定来确保我的函数以正确的顺序执行？

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T06:44:56.863

无需在 onPictureTaken() 之外添加新方法。在 Captured 中的图像之后，您将从 onPictureTaken() 方法中获得 byte[]，这是您将获得 Image 的 byte[] 的地方。所以你可以将 byte[] 转换为 Bitmap。您也可以使用下面的代码片段获取捕获图像的字节 []

```
private PictureCallback mPicture = new PictureCallback() {

    @Override
    public void onPictureTaken(final byte[] data, Camera camera) {
        createBitmap(data); // Some stuffs to convert byte[] to Bitmap
    }
}; 
```

# php - 根据 PHP 值显示 HTML 元素

> ID：10292666
> 
> 赞同：0
> 
> 时间：2012-04-24T06:18:37.860
> 
> 标签：php, html

以下代码不起作用，我得到了一个白屏。不知道出了什么问题。另外，我不确定将 $member_info 传递给 javascript 并使用 jQuery 遍历 html 是否会更好？

**PHP：**

```
foreach($team_member as $member)
{
  $is_leader= false;
  if(naked_id($member->id) == naked_id($leader->id)){
     $is_leader = true;
  } 

  unset($member_data);
  $member_data->id =   $member->id;
  $member_data->leader = $is_leader;

  $member_info[] = $member_data;
} 
```

**HTML：**

```
<?php foreach($member_info as $member) : ?>

    <?php if ( $member->leader == true ) : ?>

        <span id="team-leader">Team Leader</span>

    <?php else : ?>

        <span id="team-leader" style="display:none;">Team Leader</span>

    <?php endif ?>
<?php endforeach ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T06:33:16.400

您需要在 foreach 后加一个冒号（在您提供的 HTML 片段中）。根据[PHP 手册](http://php.net/manual/en/control-structures.alternative-syntax.php)-

> 在每种情况下，备用语法的基本形式是将左大括号更改为冒号 (:)

然后它会变成：

```
<?php foreach($member_info as $member) : ?> 
```

# xml - OpenCover 报告分析

> ID：10292670
> 
> 赞同：1
> 
> 时间：2012-04-24T06:19:05.763
> 
> 标签：xml, xslt, cruisecontrol.net, opencover

我正在使用 OpenCover 来计算代码覆盖率，我得到以下 xml 响应。

```
 <CoverageSession xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">

 <Modules>
<Module hash="FD-FE-41-D9-AB-19-E3-F2-D4-3A-E6-27-3D-30-A5-CC-E1-13-AC-C1">
  <FullName>D:\DEMO\TestProject\bin\Debug\TestProject.dll</FullName>
  <ModuleName>TestProject</ModuleName>
  <Files>
    <File uid="1" fullPath="D:\Demo\TestProject\MathFunctionsTest.cs" />
  </Files>
  <Classes>
    <Class>
      <FullName>&lt;Module&gt;</FullName>
      <Methods />
    </Class>
    <Class>
      <FullName>TestProject.MathFunctionsTest</FullName>
      <Methods>
        <Method visited="false" cyclomaticComplexity="1" sequenceCoverage="0" branchCoverage="0" isConstructor="false" isStatic="false" isGetter="true" isSetter="false">
          <MetadataToken>100663297</MetadataToken>
          <Name>Microsoft.VisualStudio.TestTools.UnitTesting.TestContext TestProject.MathFunctionsTest::get_TestContext()</Name>
          <FileRef uid="1" />
          <SequencePoints>
            <SequencePoint vc="0" uspid="1" ordinal="0" offset="0" sl="27" sc="13" el="27" ec="14" />
            <SequencePoint vc="0" uspid="2" ordinal="1" offset="1" sl="28" sc="17" el="28" ec="44" />
            <SequencePoint vc="0" uspid="3" ordinal="2" offset="10" sl="29" sc="13" el="29" ec="14" />
          </SequencePoints>
          <BranchPoints />
          <MethodPoint xsi:type="SequencePoint" vc="0" uspid="1" ordinal="0" offset="0" sl="27" sc="13" el="27" ec="14" />
        </Method>
        <Method visited="true" cyclomaticComplexity="1" sequenceCoverage="100" branchCoverage="100" isConstructor="false" isStatic="false" isGetter="false" isSetter="true">
          <MetadataToken>100663298</MetadataToken>
          <Name>System.Void TestProject.MathFunctionsTest::set_TestContext(Microsoft.VisualStudio.TestTools.UnitTesting.TestContext)</Name>
          <FileRef uid="1" />
          <SequencePoints>
            <SequencePoint vc="5" uspid="4" ordinal="0" offset="0" sl="31" sc="13" el="31" ec="14" />
            <SequencePoint vc="5" uspid="5" ordinal="1" offset="1" sl="32" sc="17" el="32" ec="45" />
            <SequencePoint vc="5" uspid="6" ordinal="2" offset="8" sl="33" sc="13" el="33" ec="14" />
          </SequencePoints>
          <BranchPoints />
          <MethodPoint xsi:type="SequencePoint" vc="5" uspid="4" ordinal="0" offset="0" sl="31" sc="13" el="31" ec="14" />
        </Method>
        <Method visited="true" cyclomaticComplexity="1" sequenceCoverage="100" branchCoverage="100" isConstructor="false" isStatic="false" isGetter="false" isSetter="false">
          <MetadataToken>100663299</MetadataToken>
          <Name>System.Void TestProject.MathFunctionsTest::MathFunctionsConstructorTest()</Name>
          <FileRef uid="1" />
          <SequencePoints>
            <SequencePoint vc="1" uspid="7" ordinal="0" offset="0" sl="72" sc="9" el="72" ec="10" />
            <SequencePoint vc="1" uspid="8" ordinal="1" offset="1" sl="73" sc="13" el="73" ec="56" />
            <SequencePoint vc="1" uspid="9" ordinal="2" offset="7" sl="75" sc="9" el="75" ec="10" />
          </SequencePoints>
          <BranchPoints />
          <MethodPoint xsi:type="SequencePoint" vc="1" uspid="7" ordinal="0" offset="0" sl="72" sc="9" el="72" ec="10" />
        </Method>
        <Method visited="true" cyclomaticComplexity="1" sequenceCoverage="100" branchCoverage="100" isConstructor="false" isStatic="false" isGetter="false" isSetter="false">
          <MetadataToken>100663300</MetadataToken>
          <Name>System.Void TestProject.MathFunctionsTest::AddTest()</Name>
          <FileRef uid="1" />
          <SequencePoints>
            <SequencePoint vc="1" uspid="10" ordinal="0" offset="0" sl="82" sc="9" el="82" ec="10" />
            <SequencePoint vc="1" uspid="11" ordinal="1" offset="1" sl="83" sc="13" el="83" ec="56" />
            <SequencePoint vc="1" uspid="12" ordinal="2" offset="7" sl="84" sc="13" el="84" ec="27" />
            <SequencePoint vc="1" uspid="13" ordinal="3" offset="17" sl="85" sc="13" el="85" ec="27" />
            <SequencePoint vc="1" uspid="14" ordinal="4" offset="27" sl="86" sc="13" el="86" ec="34" />
            <SequencePoint vc="1" uspid="15" ordinal="5" offset="37" sl="88" sc="13" el="88" ec="39" />
            <SequencePoint vc="1" uspid="16" ordinal="6" offset="47" sl="89" sc="13" el="89" ec="47" />
            <SequencePoint vc="1" uspid="17" ordinal="7" offset="56" sl="91" sc="9" el="91" ec="10" />
          </SequencePoints>
          <BranchPoints />
          <MethodPoint xsi:type="SequencePoint" vc="1" uspid="10" ordinal="0" offset="0" sl="82" sc="9" el="82" ec="10" />
        </Method>
        <Method visited="true" cyclomaticComplexity="1" sequenceCoverage="100" branchCoverage="100" isConstructor="false" isStatic="false" isGetter="false" isSetter="false">
          <MetadataToken>100663301</MetadataToken>
          <Name>System.Void TestProject.MathFunctionsTest::DivideTest()</Name>
          <FileRef uid="1" />
          <SequencePoints>
            <SequencePoint vc="1" uspid="18" ordinal="0" offset="0" sl="98" sc="9" el="98" ec="10" />
            <SequencePoint vc="1" uspid="19" ordinal="1" offset="1" sl="99" sc="13" el="99" ec="56" />
            <SequencePoint vc="1" uspid="20" ordinal="2" offset="7" sl="100" sc="13" el="100" ec="28" />
            <SequencePoint vc="1" uspid="21" ordinal="3" offset="17" sl="101" sc="13" el="101" ec="28" />
            <SequencePoint vc="1" uspid="22" ordinal="4" offset="27" sl="102" sc="13" el="102" ec="34" />
            <SequencePoint vc="1" uspid="23" ordinal="5" offset="37" sl="104" sc="13" el="104" ec="42" />
            <SequencePoint vc="1" uspid="24" ordinal="6" offset="47" sl="105" sc="13" el="105" ec="47" />
            <SequencePoint vc="1" uspid="25" ordinal="7" offset="56" sl="107" sc="9" el="107" ec="10" />
          </SequencePoints>
          <BranchPoints />
          <MethodPoint xsi:type="SequencePoint" vc="1" uspid="18" ordinal="0" offset="0" sl="98" sc="9" el="98" ec="10" />
        </Method>
        <Method visited="true" cyclomaticComplexity="1" sequenceCoverage="100" branchCoverage="100" isConstructor="false" isStatic="false" isGetter="false" isSetter="false">
          <MetadataToken>100663302</MetadataToken>
          <Name>System.Void TestProject.MathFunctionsTest::MultiplyTest()</Name>
          <FileRef uid="1" />
          <SequencePoints>
            <SequencePoint vc="1" uspid="26" ordinal="0" offset="0" sl="114" sc="9" el="114" ec="10" />
            <SequencePoint vc="1" uspid="27" ordinal="1" offset="1" sl="115" sc="13" el="115" ec="56" />
            <SequencePoint vc="1" uspid="28" ordinal="2" offset="7" sl="116" sc="13" el="116" ec="27" />
            <SequencePoint vc="1" uspid="29" ordinal="3" offset="17" sl="117" sc="13" el="117" ec="27" />
            <SequencePoint vc="1" uspid="30" ordinal="4" offset="27" sl="118" sc="13" el="118" ec="34" />
            <SequencePoint vc="1" uspid="31" ordinal="5" offset="37" sl="120" sc="13" el="120" ec="44" />
            <SequencePoint vc="1" uspid="32" ordinal="6" offset="47" sl="121" sc="13" el="121" ec="47" />
            <SequencePoint vc="1" uspid="33" ordinal="7" offset="56" sl="123" sc="9" el="123" ec="10" />
          </SequencePoints>
          <BranchPoints />
          <MethodPoint xsi:type="SequencePoint" vc="1" uspid="26" ordinal="0" offset="0" sl="114" sc="9" el="114" ec="10" />
        </Method>
        <Method visited="true" cyclomaticComplexity="1" sequenceCoverage="100" branchCoverage="100" isConstructor="false" isStatic="false" isGetter="false" isSetter="false">
          <MetadataToken>100663303</MetadataToken>
          <Name>System.Void TestProject.MathFunctionsTest::SubtractTest()</Name>
          <FileRef uid="1" />
          <SequencePoints>
            <SequencePoint vc="1" uspid="34" ordinal="0" offset="0" sl="130" sc="9" el="130" ec="10" />
            <SequencePoint vc="1" uspid="35" ordinal="1" offset="1" sl="131" sc="13" el="131" ec="56" />
            <SequencePoint vc="1" uspid="36" ordinal="2" offset="7" sl="132" sc="13" el="132" ec="27" />
            <SequencePoint vc="1" uspid="37" ordinal="3" offset="17" sl="133" sc="13" el="133" ec="27" />
            <SequencePoint vc="1" uspid="38" ordinal="4" offset="27" sl="134" sc="13" el="134" ec="34" />
            <SequencePoint vc="1" uspid="39" ordinal="5" offset="37" sl="136" sc="13" el="136" ec="44" />
            <SequencePoint vc="1" uspid="40" ordinal="6" offset="47" sl="137" sc="13" el="137" ec="47" />
            <SequencePoint vc="1" uspid="41" ordinal="7" offset="56" sl="139" sc="9" el="139" ec="10" />
          </SequencePoints>
          <BranchPoints />
          <MethodPoint xsi:type="SequencePoint" vc="1" uspid="34" ordinal="0" offset="0" sl="130" sc="9" el="130" ec="10" />
        </Method>
        <Method visited="true" cyclomaticComplexity="1" sequenceCoverage="0" branchCoverage="0" isConstructor="true" isStatic="false" isGetter="false" isSetter="false">
          <MetadataToken>100663304</MetadataToken>
          <Name>System.Void TestProject.MathFunctionsTest::.ctor()</Name>
          <SequencePoints />
          <BranchPoints />
          <MethodPoint vc="5" uspid="42" ordinal="0" offset="0" />
        </Method>
      </Methods>
    </Class>
  </Classes>
</Module>
<Module hash="CE-A4-EA-1B-A3-A3-41-FC-95-6A-47-ED-DB-FB-8A-39-10-3B-39-6D">
  <FullName>d:\demo\testproject\bin\debug\POC.exe</FullName>
  <ModuleName>POC</ModuleName>
  <Files>
    <File uid="3" fullPath="D:\Demo\POC\Program.cs" />
  </Files>
  <Classes>
    <Class>
      <FullName>&lt;Module&gt;</FullName>
      <Methods />
    </Class>
    <Class>
      <FullName>POC.Program</FullName>
      <Methods>
        <Method visited="false" cyclomaticComplexity="1" sequenceCoverage="0" branchCoverage="0" isConstructor="false" isStatic="true" isGetter="false" isSetter="false">
          <MetadataToken>100663297</MetadataToken>
          <Name>System.Void POC.Program::Main(System.String[])</Name>
          <FileRef uid="3" />
          <SequencePoints>
            <SequencePoint vc="0" uspid="43" ordinal="0" offset="0" sl="11" sc="9" el="11" ec="10" />
            <SequencePoint vc="0" uspid="44" ordinal="1" offset="1" sl="13" sc="13" el="13" ec="67" />
            <SequencePoint vc="0" uspid="45" ordinal="2" offset="12" sl="14" sc="13" el="14" ec="55" />
            <SequencePoint vc="0" uspid="46" ordinal="3" offset="24" sl="15" sc="13" el="15" ec="55" />
            <SequencePoint vc="0" uspid="47" ordinal="4" offset="36" sl="16" sc="13" el="16" ec="53" />
            <SequencePoint vc="0" uspid="48" ordinal="5" offset="42" sl="17" sc="13" el="17" ec="59" />
            <SequencePoint vc="0" uspid="49" ordinal="6" offset="71" sl="18" sc="13" el="18" ec="64" />
            <SequencePoint vc="0" uspid="50" ordinal="7" offset="100" sl="19" sc="13" el="19" ec="64" />
            <SequencePoint vc="0" uspid="51" ordinal="8" offset="129" sl="20" sc="13" el="20" ec="62" />
            <SequencePoint vc="0" uspid="52" ordinal="9" offset="158" sl="21" sc="13" el="21" ec="66" />
            <SequencePoint vc="0" uspid="53" ordinal="10" offset="180" sl="22" sc="13" el="22" ec="42" />
            <SequencePoint vc="0" uspid="54" ordinal="11" offset="191" sl="23" sc="13" el="23" ec="32" />
            <SequencePoint vc="0" uspid="55" ordinal="12" offset="197" sl="24" sc="9" el="24" ec="10" />
          </SequencePoints>
          <BranchPoints />
          <MethodPoint xsi:type="SequencePoint" vc="0" uspid="43" ordinal="0" offset="0" sl="11" sc="9" el="11" ec="10" />
        </Method>
        <Method visited="false" cyclomaticComplexity="1" sequenceCoverage="0" branchCoverage="0" isConstructor="true" isStatic="false" isGetter="false" isSetter="false">
          <MetadataToken>100663298</MetadataToken>
          <Name>System.Void POC.Program::.ctor()</Name>
          <SequencePoints />
          <BranchPoints />
          <MethodPoint vc="0" uspid="56" ordinal="0" offset="0" />
        </Method>
      </Methods>
    </Class>
    <Class>
      <FullName>POC.MathFunctions</FullName>
      <Methods>
        <Method visited="true" cyclomaticComplexity="1" sequenceCoverage="100" branchCoverage="100" isConstructor="false" isStatic="false" isGetter="false" isSetter="false">
          <MetadataToken>100663299</MetadataToken>
          <Name>System.Double POC.MathFunctions::Add(System.Double,System.Double)</Name>
          <FileRef uid="3" />
          <SequencePoints>
            <SequencePoint vc="1" uspid="57" ordinal="0" offset="0" sl="32" sc="9" el="32" ec="10" />
            <SequencePoint vc="1" uspid="58" ordinal="1" offset="1" sl="33" sc="13" el="33" ec="26" />
            <SequencePoint vc="1" uspid="59" ordinal="2" offset="7" sl="34" sc="9" el="34" ec="10" />
          </SequencePoints>
          <BranchPoints />
          <MethodPoint xsi:type="SequencePoint" vc="1" uspid="57" ordinal="0" offset="0" sl="32" sc="9" el="32" ec="10" />
        </Method>
        <Method visited="true" cyclomaticComplexity="1" sequenceCoverage="100" branchCoverage="100" isConstructor="false" isStatic="false" isGetter="false" isSetter="false">
          <MetadataToken>100663300</MetadataToken>
          <Name>System.Double POC.MathFunctions::Subtract(System.Double,System.Double)</Name>
          <FileRef uid="3" />
          <SequencePoints>
            <SequencePoint vc="1" uspid="60" ordinal="0" offset="0" sl="37" sc="9" el="37" ec="10" />
            <SequencePoint vc="1" uspid="61" ordinal="1" offset="1" sl="38" sc="13" el="38" ec="26" />
            <SequencePoint vc="1" uspid="62" ordinal="2" offset="7" sl="39" sc="9" el="39" ec="10" />
          </SequencePoints>
          <BranchPoints />
          <MethodPoint xsi:type="SequencePoint" vc="1" uspid="60" ordinal="0" offset="0" sl="37" sc="9" el="37" ec="10" />
        </Method>
        <Method visited="true" cyclomaticComplexity="1" sequenceCoverage="100" branchCoverage="100" isConstructor="false" isStatic="false" isGetter="false" isSetter="false">
          <MetadataToken>100663301</MetadataToken>
          <Name>System.Double POC.MathFunctions::Multiply(System.Double,System.Double)</Name>
          <FileRef uid="3" />
          <SequencePoints>
            <SequencePoint vc="1" uspid="63" ordinal="0" offset="0" sl="42" sc="9" el="42" ec="10" />
            <SequencePoint vc="1" uspid="64" ordinal="1" offset="1" sl="43" sc="13" el="43" ec="26" />
            <SequencePoint vc="1" uspid="65" ordinal="2" offset="7" sl="44" sc="9" el="44" ec="10" />
          </SequencePoints>
          <BranchPoints />
          <MethodPoint xsi:type="SequencePoint" vc="1" uspid="63" ordinal="0" offset="0" sl="42" sc="9" el="42" ec="10" />
        </Method>
        <Method visited="true" cyclomaticComplexity="1" sequenceCoverage="100" branchCoverage="100" isConstructor="false" isStatic="false" isGetter="false" isSetter="false">
          <MetadataToken>100663302</MetadataToken>
          <Name>System.Double POC.MathFunctions::Divide(System.Double,System.Double)</Name>
          <FileRef uid="3" />
          <SequencePoints>
            <SequencePoint vc="1" uspid="66" ordinal="0" offset="0" sl="47" sc="9" el="47" ec="10" />
            <SequencePoint vc="1" uspid="67" ordinal="1" offset="1" sl="48" sc="13" el="48" ec="26" />
            <SequencePoint vc="1" uspid="68" ordinal="2" offset="7" sl="49" sc="9" el="49" ec="10" />
          </SequencePoints>
          <BranchPoints />
          <MethodPoint xsi:type="SequencePoint" vc="1" uspid="66" ordinal="0" offset="0" sl="47" sc="9" el="47" ec="10" />
        </Method>
        <Method visited="true" cyclomaticComplexity="1" sequenceCoverage="0" branchCoverage="0" isConstructor="true" isStatic="false" isGetter="false" isSetter="false">
          <MetadataToken>100663303</MetadataToken>
          <Name>System.Void POC.MathFunctions::.ctor()</Name>
          <SequencePoints />
          <BranchPoints />
          <MethodPoint vc="5" uspid="69" ordinal="0" offset="0" />
        </Method>
      </Methods>
    </Class>
  </Classes>
</Module> 
```

谁能解释一下我如何通过 xml 计算代码覆盖率、覆盖的行数和其他有用信息。

我正在使用 Xslt 将其转换为 html ，我不能为此目的使用报告生成器工具。

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-20T12:40:39.597

看看 ReportGenerator：[https](https://github.com/danielpalme/ReportGenerator) ://github.com/danielpalme/ReportGenerator 使用此工具，您可以将 OpenCover 报告转换为 HTML、XML 和 Latex

也许这会有所帮助： [在 CruiseControl.NET 中提供 OpenCover 报告](https://stackoverflow.com/questions/8070391/make-opencover-reports-available-in-cruisecontrol-net)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-24T07:59:02.197

一行代码被`SequencePoint`.

访问过`SequencePoint`的 vc > 0

所以覆盖运行的总覆盖率为

计数（`SequencePoint`其中 vc > 0）* 100 / 计数（`SequencePoint`）

然后，您可以通过在每个模块/类型/方法的基础上限制搜索来微调结果

`BranchPoint`并且`MethodPoint`可以用类似的方式计算结果

# android - 如何在Android中以编程方式识别JSON文件中的多个对象

> ID：10292672
> 
> 赞同：0
> 
> 时间：2012-04-24T06:19:06.807
> 
> 标签：android, json, arrays

我有一个如下所示的 JSON 文件。

```
{
"user":
    [
        {
            "id": "1",
            "firstname":"Xyz",
        },
        {
            "id": "2",
            "firstname":"Abc",
        }           
    ],

"animal":
    [
        {
            "id": "1",
            "firstname":"Elephant",
        },
        {
            "id": "2",
            "firstname":"Horse",
        }
    ]   
} 
```

在服务器端，他们正在使用新的父 JSON 对象更新这个 JSON 文件。如您所见，有“用户”和“动物”对象。服务器可以添加另一个具有相同属性“id”和“firstname”的对象“birds”。

我需要的是以编程方式找出父对象并提取它们的名称。

如果 JSON 文件是静态文件，我可以读取并获取输出。我在这里问的是一种查找父 JSONObjects 的方法。

```
JSONObject jsonObject = new JSONObject(uriToJsonFile);
JSONArray jsonArray = jsonObject.getJSONArray("user"); 
```

如果我能够做我所要求的，我们不需要硬编码值“用户”，`jsonObject.getJSONArray("user");`而是我们可以通过编程方式传递该值。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T06:26:02.740

```
jsonObject.getNames(jsonObject); 
```

这将返回对象中的所有键..希望这是您想要的...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T06:24:55.300

获取字符串数组并将其传入`jsonObject.getJSONArray(your array);`

像

如果您将尝试获得第一个对象然后通过

```
jsonObject.getJSONArray(array[pos]); 
```

并且在`array{"user","animal"};`

`pos`从第一个对象获取所有值后增加。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T06:58:34.837

**JSONObject**类中有一个方法调用“名称” 。

```
JSONArray objNames = jsonObject.names();
System.out.println(objNames.toString()); 
```

当您运行此代码时，您可以获得以下输出

> [“用户”，“动物”]

它显示所有父对象

# matlab - 如何相互绘制 3 条线并自动调整比例

> ID：10292676
> 
> 赞同：0
> 
> 时间：2012-04-24T06:19:25.537
> 
> 标签：matlab

这里最大的问题是自动调整比例。我有 4 个数据向量：3 个代表收集的数据（绘制在 y 轴上），一个代表 x 轴值。

我想将这 3 条线相互绘制。而且，它们的值往往非常小（大多数情况下最大值约为 0.1）。默认值是从 0 到 1 的图。如何进行自动调整？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T07:10:39.787

[情节](http://www.mathworks.nl/help/techdoc/ref/plot.html)本身做错了什么？它（我认为总是）自动调整比例

```
x=0:10;
y1 = x/100;
y2 = log(x)/25;
y3 = 0.4./x;
y = [y1 ; y2 ; y3];
plot(x,y); 
```

如下图所示![在此处输入图像描述](../Images/e15fab62e47f4d416b3e393cc6269c5f.png)

这在我的计算机上绘制，xlim = [0 10] 和 ylim = [0 0.4]，分别等于向量 x 和矩阵 y 的跨度。

如果轴仍然不是你喜欢的，你可以自己设置它们

```
xlim([minx maxx]);
ylim([miny maxy]); 
```

可能结合数据 x(:) 和 y(:) 上的[min](http://www.mathworks.nl/help/techdoc/ref/min.html)和[max](http://www.mathworks.nl/help/techdoc/ref/max.html)函数，如下所示：

```
xlim([min(x(:)) max(x(:))]);
ylim([min(y(:)) max(y(:))]); 
```

# php - 如何使用 PHP IMAP 将所有带有附件的邮件下载到服务器？

> ID：10292679
> 
> 赞同：3
> 
> 时间：2012-04-24T06:19:30.730
> 
> 标签：php, gmail, imap, yahoo, hotmail

使用 PHP IMAP 功能我可以阅读电子邮件，但我需要自动或手动运行以下载邮件，我如何下载所有带有或不带附件的电子邮件并将其保存到本地驱动器或服务器的 mailid 文件夹名称中的主要网络（gmail，雅虎，hotmail，美国在线）。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-24T07:12:38.677

请尝试使用此代码获取电子邮件并将附件存储在目录中。

从邮箱中取出邮件后，您还可以使用 imap_delete 和 imap_expunge 删除邮件。

在下面的代码中设置您的网站名称、邮箱用户名、密码和存储附件的路径。

```
if( $mbox = imap_open("{yoursitename.com:110/pop3/notls}INBOX", "username of mailbox", "password of mailbox")){
    $path = "set path here for where the attachments are store";
    $check = imap_mailboxmsginfo($mbox);     
    function getmsg($mbox,$mid) {   
        global $charset,$htmlmsg,$plainmsg,$attachments,$from,$to,$subj,$timages,$path;
        $htmlmsg = $plainmsg = $charset = '';
        $attachments = array();
        // HEADER
        $h = imap_headerinfo($mbox,$mid);
        // add code here to get date, from, to, cc, subject...
        $date = $h->date;
        $from = $h->fromaddress;
        $to = $h->toaddress;
          $subj = htmlspecialchars($h->Subject);
        // BODY
        $s = imap_fetchstructure($mbox,$mid);
        if (!$s->parts)  // simple
        getpart($mbox,$mid,$s,0);  // pass 0 as part-number
        else {  // multipart: cycle through each part
        foreach ($s->parts as $partno0=>$p)
          getpart($mbox,$mid,$p,$partno0+1);
        }
    }

    function getpart($mbox,$mid,$p,$partno) {
        // $partno = '1', '2', '2.1', '2.1.3', etc for multipart, 0 if simple
        global $htmlmsg,$plainmsg,$charset,$attachments,$partid,$last_mail_id,$patterns,$pic,$newstr,$c,$ok,$timages,$subj,$path;
        $patterns = array();
        $pic =  array();
        $image=array();
        $data = ($partno) ? imap_fetchbody($mbox,$mid,$partno) : imap_body($mbox,$mid);  // simple
        if ($p->encoding==4)
        $data = quoted_printable_decode($data);
        else if ($p->encoding==3)
        $data = base64_decode($data);
        // PARAMETERS    // get all parameters, like charset, filenames of attachments, etc.
        $params = array();
        if ($p->parameters)
        foreach ($p->parameters as $x)
            $params[strtolower($x->attribute)] = $x->value;
        if ($p->dparameters)
        foreach ($p->dparameters as $x)
            $params[strtolower($x->attribute)] = $x->value;

        // ATTACHMENT    // Any part with a filename is an attachment,
        // so an attached text file (type 0) is not mistaken as the message.
        if ($params['filename'] || $params['name']) {
        $partid = htmlentities($p->id,ENT_QUOTES);

           // filename may be given as 'Filename' or 'Name' or both
        $filename = ($params['filename'])? $params['filename'] : $params['name'];
        // filename may be encoded, so see imap_mime_header_decode()
         $attachments[$filename] = $data;  // this is a problem if two files have same name
        //store id and filename in array
        $image[$key] = $filename;

        }
        //save the attachments in the directory
        foreach( $attachments as $key => $val){
          $fname = $key;
          $fp = fopen("$path/$fname","w");
          fwrite($fp, $val);
          fclose($fp);
        }
            // TEXT
            if ($p->type==0 && $data) {
            // Messages may be split in different parts because of inline attachments,   // so append parts together with blank row.
            if (strtolower($p->subtype)=='plain')
                $plainmsg .= trim($data)."\n\n";
            else
                //preg_match_all('/<img[^>]+>/i',$data, $result);
                $htmlmsg .= $data."<br><br>";
                $charset = $params['charset'];  // assume all parts are same charset
            }

        // There are no PHP functions to parse embedded messages, so this just appends the raw source to the main message.
        else if ($p->type==2 && $data) {
        $plainmsg .= $data."\n\n";
        }
        // SUBPART RECURSION
        if ($p->parts) {
        foreach ($p->parts as $partno0=>$p2)
            getpart($mbox,$mid,$p2,$partno.'.'.($partno0+1));  // 1.2, 1.2.1, etc.
        }
    }

    $attachments = array();
    $num_msg = imap_num_msg($mbox);
    if($num_msg>0) {
        getmsg($mbox,1);
    }else {
         echo "Sorry!...No Messages in MailBox...<br>";
    }

    //imap_delete and imap_expunge are used to delete the mail after fetching....Uncomment it if you want to delete the mail from mailbox
    //imap_delete($mbox,1); 
    //imap_expunge($mbox);
    imap_close($mbox);

}else { exit ("Can't connect: " . imap_last_error() ."\n");  echo "FAIL!\n";  }; 
```

# python - openerp 中的 rml 报告

> ID：10292686
> 
> 赞同：1
> 
> 时间：2012-04-24T06:19:45.317
> 
> 标签：python, report, openerp, rml

我使用 Openerp 6.0。我在 account.invoice 表单中有一个名为 x_podate 的日期字段。在 account_print_invoice 报告表单中，我使用以下代码调用日期字段：

```
 <td>
      <para style="terp_default_6">[[ o.x_podate ]]</para>
    </td> 
```

它显示输入的日期值。但问题是，当没有为日期字段提供任何值时，repot 打印输出显示为 False。有人可以为此提出任何解决方案吗？我错过了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T07:03:27.700

您可以在方括号之间输入 Python 代码，然后您可以利用[Python 的布尔表达式求值规则](http://en.wikibooks.org/wiki/Non-Programmer%27s_Tutorial_for_Python_2.6/Boolean_Expressions)。因此，如果您想在`o.x_podate`未提供的情况下显示空字符串，请使用`[[ o.x_podate or "" ]]`.

# database - DocumentDatabase 对象的实例化

> ID：10292687
> 
> 赞同：0
> 
> 时间：2012-04-24T06:19:50.403
> 
> 标签：database, ravendb, document-database

我想使用 DocumentDatabase 对象。为此，我正在编写以下代码，但它不起作用。它给出 NullReferenceException “对象引用未设置为对象的实例。” 请告诉我这样做的正确方法。代码是：

```
 Raven.Database.Config.InMemoryRavenConfiguration configure1 =
            new Raven.Database.Config.InMemoryRavenConfiguration 
            { 
                DatabaseName = databaseName,
                Port=8080 ,
                DataDirectory="~/Data"
            };
        DocumentDatabase database1 = new DocumentDatabase(configure1);
        //database1.GetDocuments(0,3,null); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T06:54:11.353

使用`EmbeddedDocumentStore`，并确保初始化它。然后创建一个会话并使用会话对象来查询嵌入式数据库。

```
var documentStore = new EmbeddableDocumentStore
{
     DataDirectory = "Data"
}.Initialize();

var session = documentStore.OpenSession(); 
```

比你能做`session.Load(id)`的，`session.Query`或者`documentStore .DatabaseCommands`。

# c# - wkhtmltopdf 输出流和下载 - diaglog

> ID：10292689
> 
> 赞同：6
> 
> 时间：2012-04-24T06:20:02.877
> 
> 标签：c#, memorystream, wkhtmltopdf

是否可以从任何 html 文件中获取由 wkhtmltopdf 创建的 pdf 流并在 IE/Firefox/Chrome 等中弹出下载对话框？

目前我通过这段代码得到我的输出流：

```
public class Printer
{
    public static MemoryStream GeneratePdf(StreamReader Html, MemoryStream pdf, Size pageSize)
    {
        Process p;
        StreamWriter stdin;
        ProcessStartInfo psi = new ProcessStartInfo();

        psi.FileName =  @"C:\PROGRA~1\WKHTML~1\wkhtmltopdf.exe";

        // run the conversion utility 
        psi.UseShellExecute = false;
        psi.CreateNoWindow = true;
        psi.RedirectStandardInput = true;
        psi.RedirectStandardOutput = true;
        psi.RedirectStandardError = true;

        // note that we tell wkhtmltopdf to be quiet and not run scripts 
        psi.Arguments = "-q -n --disable-smart-shrinking " + (pageSize.IsEmpty ? "" : "--page-width " + pageSize.Width + "mm --page-height " + pageSize.Height + "mm") + " - -";

        p = Process.Start(psi);

        try
        {
            stdin = p.StandardInput;
            stdin.AutoFlush = true;
            stdin.Write(Html.ReadToEnd());
            stdin.Dispose();

            CopyStream(p.StandardOutput.BaseStream, pdf);
            p.StandardOutput.Close();
            pdf.Position = 0;

            p.WaitForExit(10000);

            return pdf;
        }
        catch
        {
            return null;
        }
        finally
        {
            p.Dispose();
        }
    }

    public static void CopyStream(Stream input, Stream output)
    {
        byte[] buffer = new byte[32768];
        int read;
        while ((read = input.Read(buffer, 0, buffer.Length)) > 0)
        {
            output.Write(buffer, 0, read);
        }
    }
} 
```

然后我想显示对话框：

```
MemoryStream PDF = Printer.GeneratePdf(Rd, PDFStream, Size);

byte[] byteArray1 = PDF.ToArray();
PDF.Flush();
PDF.Close();
Response.BufferOutput = true;

Response.Clear();
Response.ClearHeaders();
Response.AddHeader("Content-Disposition", "attachment; filename=Test.pdf");
Response.ContentType = "application/octet-stream";
Response.BinaryWrite(byteArray1);
Response.End(); 
```

使用从 PDF 文件创建的 MemoryStreams 可以正常工作，但在这里我只得到一个空页面。bytearray 有 1270 个字节。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T16:31:22.967

这仍然是一个问题吗？

在安装 wkhtmltopdf 0.11.0 rc2 之后，我刚刚创建了一个新的 ASP.net 网站来在我的计算机上进行测试，并且它在创建 PDF 时工作正常。我的版本只是略有不同；

在我的 CSHTML 中，我有：

```
MemoryStream PDFStream = new MemoryStream();
MemoryStream PDF = Derp.GeneratePdf(PDFStream);
byte[] byteArray1 = PDF.ToArray();
PDF.Flush();
PDF.Close();
Response.BufferOutput = true;
Response.Clear();
Response.ClearHeaders();
Response.AddHeader("Content-Disposition", "attachment; filename=Test.pdf");
Response.ContentType = "application/octet-stream";
Response.BinaryWrite(byteArray1);
Response.End(); 
```

我的 Derp 课

```
public class Derp
{
    public static MemoryStream GeneratePdf(MemoryStream pdf)
    {
        using (StreamReader Html = new StreamReader(@"Z:\HTMLPage.htm"))
        {
            Process p;
            StreamWriter stdin;
            ProcessStartInfo psi = new ProcessStartInfo();
            psi.FileName = @"C:\wkhtmltopdf\wkhtmltopdf.exe";
            psi.UseShellExecute = false;
            psi.CreateNoWindow = true;
            psi.RedirectStandardInput = true;
            psi.RedirectStandardOutput = true;
            psi.RedirectStandardError = true;
            psi.Arguments = "-q -n --disable-smart-shrinking " + " - -";
            p = Process.Start(psi);
            try
            {
                stdin = p.StandardInput;
                stdin.AutoFlush = true;
                stdin.Write(Html.ReadToEnd());
                stdin.Dispose();
                CopyStream(p.StandardOutput.BaseStream, pdf);
                p.StandardOutput.Close();
                pdf.Position = 0;
                p.WaitForExit(10000);
                return pdf;
            }
            catch
            {
                return null;
            }
            finally
            {
                p.Dispose();
            }
        }
    }

    public static void CopyStream(Stream input, Stream output)
    {
        byte[] buffer = new byte[32768];
        int read;
        while ((read = input.Read(buffer, 0, buffer.Length)) > 0)
        {
            output.Write(buffer, 0, read);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-11-27T21:33:11.887

我对此的看法是基于@Nenotlep 的回答。这只是pdf生成部分。

我正在使用异步。我创建了一个新的 StreamWriter，因为 wkhtmltopdf 默认需要 utf-8，但在进程开始时它被设置为其他值。

我删除了 p.WaitForExit(...) 因为我没有处理它是否失败并且它无论如何都会挂在`await tStandardOutput`. 如果需要超时，那么您必须使用取消令牌或超时在不同的任务上调用 Wait 并相应地进行处理。

```
public static async Task<byte[]> GeneratePdf(string html, Size pageSize)
{
    ProcessStartInfo psi = new ProcessStartInfo
    {
        FileName = @"C:\PROGRA~1\WKHTML~1\wkhtmltopdf.exe",
        UseShellExecute = false,
        CreateNoWindow = true,
        RedirectStandardInput = true,
        RedirectStandardOutput = true,
        RedirectStandardError = true,
        Arguments = "-q -n --disable-smart-shrinking " 
            + (pageSize.IsEmpty ? "" : "--page-width " + pageSize.Width 
            + "mm --page-height " + pageSize.Height + "mm") + " - -";
    };

    using (var p = Process.Start(psi))
    using (var pdfSream = new MemoryStream())
    using (var utf8Writer = new StreamWriter(p.StandardInput.BaseStream, 
                            Encoding.UTF8))
    {
        await utf8Writer.WriteAsync(html);
        utf8Writer.Close();
        var tStdOut = p.StandardOutput.BaseStream.CopyToAsync(pdfSream);
        var tStdError = p.StandardError.ReadToEndAsync();

        await tStandardOutput;
        string errors = await tStandardError;

        if (!string.IsNullOrEmpty(errors))
        {
            //deal with errors
        }

        return pdfSream.ToArray();
    }
} 
```

我没有包含在其中但可以作为参考有用的东西：

*   如果需要，您可以使用 --cookie 传递身份验证 cookie
*   您可以使用 href 设置基本标记，指向您的 html 页面的服务器，以便在您的 html 页面中获取其他请求（css、图像等）

# iphone - 如何在 iPhone 的提醒应用程序中以编程方式添加提醒？

> ID：10292691
> 
> 赞同：3
> 
> 时间：2012-04-24T06:20:15.637
> 
> 标签：iphone, ios4, ios5

我需要创建一个应用程序，用户将能够在 iPhone 4 的提醒应用程序中添加提醒。我可以在日历应用程序中添加提醒，但如何在 iPhone 的提醒应用程序中添加它们？

谢谢-

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T12:34:06.173

iOS 6 中即将推出提醒 API。Apple 已[公开宣布](https://developer.apple.com/technologies/ios6/)这一点，如果您是注册开发人员，您可以在 iOS 6 测试版网站上找到详细信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-24T22:36:49.330

在IOS 6.0中可以读写提醒！！！

Event Kit 框架允许访问用户的 Calendar.app 和 Reminders.app 信息。虽然两个不同的应用程序显示用户的日历和提醒数据，但相同的框架处理数据。同样，存储此数据的数据库称为日历数据库，它同时保存日历和提醒信息。

[苹果 IOS 6.0 文档](https://developer.apple.com/library/ios/#documentation/DataManagement/Conceptual/EventKitProgGuide/ReadingAndWritingReminders/ReadingAndWritingReminders.html)

# c# - 如何通过不提交当前会话事务将 DataTable 作为参数传递给存储过程？

> ID：10292695
> 
> 赞同：0
> 
> 时间：2012-04-24T06:20:42.767
> 
> 标签：c#, sql-server-2008, fluent-nhibernate, table-valued-parameters

我的代码如下所示：

```
public void InsertSampleData(DataTable tempTable)
    {
       session.Transaction.Commit();
        var connection = session.GetSessionImplementation().Connection;
        using (var sqlConnection = (SqlConnection)connection)
        {
            using (var cmd = sqlConnection.CreateCommand())
            {
                cmd.CommandType = CommandType.StoredProcedure;
                cmd.CommandText = "dbo.insertData";
                cmd.Parameters.Add("@sItems", SqlDbType.Structured);
                var sqlParam = cmd.Parameters["@Items"];
                sqlParam.Direction = ParameterDirection.Input;
                sqlParam.TypeName = "[dbo].[DataItemType]";
                sqlParam.Value = tempTable;
                cmd.ExecuteNonQuery();
            }
        }
    } 
```

代码工作正常，但如果我不提交事务，它会引发异常，如图所示

> System.InvalidOperationException：当分配给命令的连接处于挂起的本地事务中时，ExecuteNonQuery 要求命令具有事务。该命令的 Transaction 属性尚未初始化。

但我不希望在完成整个操作之前提交事务。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T06:35:54.853

问题是应该使用的事务已经提交并且已经被释放，因此要么实例化一个新的 SqlConnection 要么获取一个新会话，然后将查询作为新会话的一部分运行。

```
public void InsertSampleData(DataTable tempTable)
{
    session.Transaction.Commit();

    using (var sqlConnection = new SqlConnection(session.GetSessionImplementation()
                                       .Connection.ConnectionString))
    {
        using (var cmd = sqlConnection.CreateCommand())
        {
            cmd.CommandType = CommandType.StoredProcedure;
            cmd.CommandText = "dbo.insertData";
            cmd.Parameters.Add("@sItems", SqlDbType.Structured);
            var sqlParam = cmd.Parameters["@Items"];
            sqlParam.Direction = ParameterDirection.Input;
            sqlParam.TypeName = "[dbo].[DataItemType]";
            sqlParam.Value = tempTable;
            cmd.ExecuteNonQuery();
        }
    }
} 
```

或者

```
public void InsertSampleData(DataTable tempTable)
    {
       session.Transaction.Commit();
        var connection = session.SessionFactory.OpenSession().GetSessionImplementation().Connection;
        using (var sqlConnection = (SqlConnection)connection)
        {
            using (var cmd = sqlConnection.CreateCommand())
            {
                cmd.CommandType = CommandType.StoredProcedure;
                cmd.CommandText = "dbo.insertData";
                cmd.Parameters.Add("@sItems", SqlDbType.Structured);
                var sqlParam = cmd.Parameters["@Items"];
                sqlParam.Direction = ParameterDirection.Input;
                sqlParam.TypeName = "[dbo].[DataItemType]";
                sqlParam.Value = tempTable;
                cmd.ExecuteNonQuery();
            }
        }
    } 
```

顺便说一句，为什么要使用 SQLConnection，为什么不使用 Nhibernate 会话执行查询，您可以使用 Nhibernate 会话完成您现在正在做的所有事情。

```
session.CreateSQLQuery(<your sql>)
.SetParameters()   //and various other API to set your parameters
.ExecuteUpdate(); 
```

# objective-c - 为什么这会导致 SIGABRT 错误？

> ID：10292699
> 
> 赞同：1
> 
> 时间：2012-04-24T06:21:12.900
> 
> 标签：objective-c, ios, button, tags

我在下面有一些来源。

```
- (void)Button:(UIButton *)button {

    NSString *imageName = ((UIButton *)[self.view viewWithTag:button.tag]).titleLabel.text; 

}

- (void)viewDidLoad { 

    NSMutableArray *_array = [[NSMutableArray alloc] init];

    NSInteger iCount = [_array count];

    for (i = 0; iCount > i; i++) {

        UIButton *btn = [[UIButton alloc] init];
        btn.titleLabel.text = [[_array objectAtIndex:i] objectForKey:@"FILE"];
        btn.tag = i;
        [btn addTarget:self action:@selector(Button:) forControlEvents:UIControlEventTouchUpInside];
        [self.view addSubview:btn];
        [btn release];

} 
```

当我使用 0 索引标签访问 Button 方法时，出现 SIGABRT 错误。我能做些什么 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T06:28:38.990

正确读取控制台输出，默认情况下，每个视图都有标签“0”，因此它可能会崩溃，因为它正在获取除 uibutton 之外的其他视图，并且可能是该视图没有**titleLabel**属性。因为它是UIButton 的属性。

# tfs - tf命令+登录服务器

> ID：10292700
> 
> 赞同：0
> 
> 时间：2012-04-24T06:21:25.780
> 
> 标签：tfs, batch-file, scheduled-tasks

我尝试与 tfs 服务器建立一些连接。我必须在调度程序中运行它，所以我需要提供用户名和密码。

如你看到的。我们使用 tfspreview 版本。使用用户名（LIVE ID mailadres）和密码。

当我删除密码时。有用。缓存中的用户名和密码？我删除了本地应用数据中的缓存！

当我们尝试使用密码时。我们得到以下错误。

```
 TF30064: You are not authorized to access the server. 
```

我们使用的代码。

```
 REM @echo off
            REM ... Change the path below. This is the path where the code will be downloaded!
            REM Z:
            REM cd Backup_TFS_Preview
            REM call %VS100COMNTOOLS%\..\..\VC\vcvarsall.bat x86

            REM ... Navigate to folder
            Z:
            cd Backup_TFS_Preview

            REM ... Makes folder with date today
            mkdir %Date:~-10,2%-%Date:~-7,2%-%Date:~-4,4%

            REM ... Navigate to folder
            cd %Date:~-10,2%-%Date:~-7,2%-%Date:~-4,4%

            REM ... Add workspace for the folder with date of today
            "C:\Program Files (x86)\Microsoft Visual Studio 10.0\Common7\IDE\tf" workspace /login:username(LiveID mail adres),password /new /server:https://*.tfspreview.com/DefaultCollection %Date:~-10,2%-%Date:~-7,2%-%Date:~-4,4% /noprompt 

            REM ... Get all items from TFS
            "C:\Program Files (x86)\Microsoft Visual Studio 10.0\Common7\IDE\tf" get /recursive /all /noprompt

            REM ... Navigate to folder
            cd ..

            REM ... Zip the folder
            C:\TFS_Backup_Scripts\7z.exe a %Date:~-10,2%-%Date:~-7,2%-%Date:~-4,4%.zip %Date:~-10,2%-%Date:~-7,2%-%Date:~-4,4%\

            REM ... Remove folder
            rmdir %Date:~-10,2%-%Date:~-7,2%-%Date:~-4,4%\ /s /q

            REM ... Delete workspace
            "C:\Program Files (x86)\Microsoft Visual Studio 10.0\Common7\IDE\tf" workspace /delete %Date:~-10,2%-%Date:~-7,2%-%Date:~-4,4% /noprompt

            REM ... Navigate to folder
            cd ..
            cd ..

            REM ... Delete zip files that are older then 10 days 
            forfiles -p "Z:\Backup_TFS_Preview" -s -m *.* -d -10 -c "cmd /c del /q @path"

            PAUSE 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T11:25:21.983

看起来您正在尝试从 Visual Studio 2010 的 TF.EXE 命令连接到 tfspreview，对吗？

即使您安装了 QFE 以在 Visual Studio 中启用 TFSPreview 访问，请注意这主要是一个“受限补丁”，并且 TF.EXE 并不完全符合 TFSPreview。

你应该安装 VS11 beta 并使用这个版本的 TF.EXE，也许你会更幸运。

顺便说一句，我看到您决心创建一个计划作业来备份 TFSPreview 源。您必须知道，即使平台处于预览状态，您的整个团队项目集合也将在 TFSPreview 获得 RTM 后保留 3 个月，并且您将多次收到以下可能性的通知：

1.  升级到“付费版”
2.  在从 MS 服务器销毁之前，在本地检索团队项目集合。

来自 MS 的 Brian Keller 对此非常清楚。所以不要害怕丢失你的代码。

**更新：** 来自 Brian Harry（TFS 大老板之一）的[评论：](http://blogs.msdn.com/b/bharry/archive/2012/03/27/announcing-a-build-service-for-team-foundation-service.aspx#10288158)

> Brian Harry MS 2012 年 3 月 27 日下午 1:06 话虽如此，让我重复我之前说过的几件事：
> 
> 1) 我们的目标是在类似功能的市场上具有成本竞争力。
> 
> 2) 前几天我在 CodePlex 帖子中提到，我们设想跨 TFSPreview/CodePlex 提供统一服务，从免费扩展到付费 - 细节仍有待确定。
> 
> 3)**在我们建立任何计费模型之前，如果您认为这样更经济，我们将提供一种高保真且简单的方式将您的数据从云迁移到本地 TFS 服务器**。

随时在他的博客上联系 Brian 要求他确认，他总是回答人们。

# android - 图库 binging 布局

> ID：10292701
> 
> 赞同：1
> 
> 时间：2012-04-24T06:21:29.390
> 
> 标签：android

我是 android 新手，我正在一个想要滑动我的布局的应用程序中工作。是否可以将布局绑定到 android 小部件库。或者请告诉我在 android 中滑动我的布局的最佳做法。

如果可能，请帮助我提供有效的链接

提前致谢。

我的主要课程

```
public class GalleryTestActivity extends Activity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        Gallery gallery = (Gallery) findViewById(R.id.gallery);
        gallery.setAdapter(new ImageAdapter(this));

}
} 
```

我的基类

```
public class ImageAdapter extends BaseAdapter {
    int mGalleryItemBackground;
    private Activity mContext;
    private Gallery mGallery; 

    private Integer[] mImageIds = {
            R.layout.instruction,
            R.layout.instruction2

    };

    public ImageAdapter(Activity c)
    {
        mContext=c;
        TypedArray attr = mContext.obtainStyledAttributes(R.styleable.HelloGal999lery);
        mGalleryItemBackground = attr.getResourceId(
                R.styleable.HelloGal999lery_android_galleryItemBackground, 100);
        attr.recycle();
    }

    public int getCount() {
        return mImageIds.length;
    }

    public Object getItem(int position) {
        return position;
    }

    public long getItemId(int position) {
        return position;
    }

    public View getView(int position, View convertView, ViewGroup parent) {
            //Help me here
        View rowView = convertView;
        if(rowView==null)
        {
            LayoutInflater inflater = mContext.getLayoutInflater();
             rowView = inflater.inflate(mImageIds[position], null, true);
        }
        return rowView;

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T06:25:21.507

您可以使用`Gallery`.

或者有新的小部件[`ViewPager`](http://developer.android.com/reference/android/support/v4/view/ViewPager.html)或者在 android 支持包中

[这里](http://techdroid.kbeanie.com/2011/10/simple-viewpager-for-android.html)是关于`ViewPager`

[这](https://github.com/JakeWharton/Android-ViewPagerIndicator)也是一个很好的关于`ViewPager`使用的存储库。

# xml - 如何在 Marklogic 中构建一个简单的搜索应用程序？

> ID：10292707
> 
> 赞同：3
> 
> 时间：2012-04-24T06:22:05.207
> 
> 标签：xml, search, xquery, marklogic

我想在 Marklogic 中构建一个简单的搜索应用程序，但我不想使用 Application Builder。我想编写自己的 .xqy 文件。我想从用户那里输入名字、姓氏和地址。用户可以按名字、姓氏或地址进行搜索。他还可以通过输入所有三个字段进行搜索，或者也可以将三个字段留空。在这种情况下（空白）应返回所有记录。如何在 Marklogic 中使用搜索工具在 xml 的特定节点（如名字、姓氏等）上构建此类应用程序。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-24T06:56:07.500

建议你看看`search:search`功能。它提供开箱即用的**分页**和**分面搜索。**您也不需要三个搜索框，您可以使用前缀编写字段搜索查询。像这样的东西：

```
fulltextterm first:name last:name address:city 
```

您甚至可以在该表达式中使用**大括号**、**AND**、**OR**和**NOT 。**

有关更多信息`Search API`，请参阅搜索开发指南：

[http://docs.marklogic.com/guide/search-dev](http://docs.marklogic.com/guide/search-dev)

函数参考可能也很有用：

[http://docs.marklogic.com/search](http://docs.marklogic.com/search)

为了完整起见，`REST-API`也值得一提：

[http://docs.marklogic.com/REST/client/search](http://docs.marklogic.com/REST/client/search)

！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-08-30T01:59:05.677

而且，除了搜索和 xquery 的知识，你可以看看[Roxy](https://github.com/marklogic/roxy)，它会在 xquery 中建立一个简单的 App-Builder 风格的 MVC 应用程序，有点像 Ruby on Rails。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-24T11:55:48.930

我还建议您阅读[http://developer.marklogic.com/learn/tutorials](http://developer.marklogic.com/learn/tutorials)上的一些教程。特别是我建议您阅读以[http://developer.marklogic.com/learn/get-started-apps](http://developer.marklogic.com/learn/get-started-apps)开头的两部分系列。这将向您展示在 MarkLogic 中编写应用程序的基础知识。从那里您可以应用 grtjn 提到的 search:search 功能。

# android - 更改应用程序背景图像

> ID：10292708
> 
> 赞同：5
> 
> 时间：2012-04-24T06:22:06.937
> 
> 标签：android, android-layout, android-theme

当用户从设置活动中选择图像时，我想更改应用程序的背景图像，我使用主题将背景图像设置为：

```
<style name="Theme" parent="@android:style/Theme">
    <item name="android:windowBackground">@drawable/sunset</item>
</style> 
```

现在如何通过代码更改 android:windowBackground。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T20:37:04.470

从您的活动中，调用[getWindow()](http://developer.android.com/reference/android/app/Activity.html#getWindow%28%29)。[setBackgroundDrawable(Drawable drawable)](http://developer.android.com/reference/android/view/Window.html#setBackgroundDrawable%28android.graphics.drawable.Drawable%29)或[getWindow()](http://developer.android.com/reference/android/app/Activity.html#getWindow%28%29)。[setBackgroundDrawableResource(int resid)](http://developer.android.com/reference/android/view/Window.html#setBackgroundDrawableResource%28int%29)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T08:55:06.960

**更新**

经过一些研发和示例，我得到的是解决这个问题你必须做如下：

首先创建主题。（您已经创建了主题）

然后在运行时获取主题并根据需要设置该主题的背景。

然后将主题设置为应用程序主题。

以上步骤是您可以执行的更改整个应用程序的背景。

要获取主题并设置属性值，请参见：[此链接](https://stackoverflow.com/questions/6052549/how-to-get-theme-attributes-values)

另[见此](https://stackoverflow.com/questions/8793183/access-resource-defined-in-theme-and-attrs-xml-android)。

# java - Android：奇怪的星系标签行为

> ID：10292709
> 
> 赞同：1
> 
> 时间：2012-04-24T06:22:10.383
> 
> 标签：java, android, galaxy-tab, numberformatexception

在 android 手机中，这种方法可以正常工作。它需要任何双精度数并在点后更改为两位小数。但在星系选项卡中，数字不是 0.00，而是 0,00。所以，当我从 String 转换为 double 时，我得到了异常。为什么会这样？ ![截屏](../Images/a8f1c8d063e26a105648f6bc7774445a.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T06:27:38.477

这是因为您的平板电脑的位置，在平板电脑上设置的位置数字分隔符是`,`，而在其他位置（例如您的手机）上是`.`。

您可以使用以下代码更改位置：

```
DecimalFormatSymbols otherSymbols = new DecimalFormatSymbols(Local.GERMAN);
otherSymbols.setDecimalSeparator(',');
otherSymbols.setGroupingSeparator('.'); 
DecimalFormat df = new DecimalFormat(formatString, otherSymbols); 
```

当前本地可以使用`Locale.LOCALITY`可以在找到[`java.util.Local`](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Locale.html)

如果您愿意，这里有一个[解决方法。](https://stackoverflow.com/questions/3821539/decimal-separator-comma-with-numberdecimal-inputtype-in-edittext)
这是一个非常好的[问题，并为您提供了相关答案](https://stackoverflow.com/questions/5054132/how-to-change-the-decimal-separator-of-decimalformat-from-comma-to-dot-point)（包括我放在这里的答案）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T15:07:53.253

我尝试使用语言环境和 DecimalFormat 类以及所有这些分隔符，但问题没有解决。它返回了我无法解析的错误结果。所以，我破解了它并使用`Math.round(float)`了 ，通过给出包含 100 * d （输入）的浮点数，所以在一轮之后，我除以这 100 并在分隔符后得到两位小数。

```
public static float roundTwoDecimals(double d) {

    float rez = (float) (d * 100); //multiply for round
    rez = Math.round(rez);
    int rezInt = (int) rez; 
    rez = rezInt; //convert to int to remove unwanted tail
    rez = rez / 100; //get back to two decimals float
    return rez;
} 
```

我认为这不是最好的主意，但它确实有效

# selenium - 记录功能性 Plone 测试用例的 Selenium 测试

> ID：10292712
> 
> 赞同：5
> 
> 时间：2012-04-24T06:22:21.050
> 
> 标签：selenium, plone

我想使用 Selenium 针对 Plone 附加组件创建简单的功能测试。这里的主要驱动力是非程序员可以通过一些努力来创建和理解测试用例，因为他们可以在 Web 浏览器中看到正在发生的事情。推荐的最佳做法是什么

*   测试用例准备将运行测试的 Plone 站点环境（安装附加组件，模拟邮件主机，创建示例内容）

*   如何将 Plone 功能测试用例运行到可以在浏览器中启动 Selenium 录制以及如何打开启用录制的浏览器？

*   以后如何从 Python 代码运行记录的测试输出？

是否有其他与 Plone 结合的测试记录框架？能够针对 Javascripted UI 进行测试是一项要求。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T08:58:08.140

我的猜测是，有些工具可以独立执行各个步骤，但这些工具并不能完全按照您的描述一起工作。

以我的经验，记录测试的质量非常糟糕，程序员无论如何都必须重写它们。当你有很多 JavaScript 时，情况只会变得更糟。此外，如果您有一个使用 AJAX 的站点，则出现的问题之一是您有时必须等待特定元素出现，然后再进行下一次单击，而这是大多数记录器失败的地方。

我也很想听听一个针对最终用户的工具，并允许他们自己记录和运行 Plone 测试，如果有人知道这种项目，我真的很想参与它的开发。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T23:14:59.607

plone.app.testing 自 4.1 以来就带有 seleniumtestlayer。

这是我自己更复杂的帮助代码：

"""

```
 Some PSE 2012 Selenium notes

    * https://github.com/plone/plone.seleniumtesting

    * https://github.com/emanlove/pse2012

    Selenium WebDriver API

    * http://code.google.com/p/selenium/source/browse/trunk/py/selenium/webdriver/remote/webdriver.py

    Selenium element match options

    * http://code.google.com/p/selenium/source/browse/trunk/py/selenium/webdriver/common/by.py

    Selenium element API (after find_xxx())

    * http://code.google.com/p/selenium/source/browse/trunk/py/selenium/webdriver/remote/webelement.py

    You can do pdb debugging using ``selenium_helper.selenium_error_trapper()`` if you run
    tests with ``SELENIUM_DEBUG`` turned on::

        SELENIUM_DEBUG=true  bin/test -s testspackage -t test_usermenu

    Then you'll get debug prompt on any Selenium error.

"""

import os

# Try use ipdb debugger if we have one
try:
    import ipdb as pdb
except ImportError:
    import pdb

from selenium.webdriver.common.by import By
from selenium.common.exceptions import NoSuchElementException
from selenium.common.exceptions import WebDriverException
from selenium.webdriver.support.wait import WebDriverWait

from plone.app.testing import selenium_layers

SELENIUM_DEBUG = "SELENIUM_DEBUG" in os.environ

class SeleniumTrapper(object):
    """
    With statement for break on Selenium errors to ipdb if it has been enabled for this test run.
    """

    def __init__(self, driver):
        self.driver = driver

    def __enter__(self):
        pass

    def __exit__(self, type, value, traceback):
        """
        http://effbot.org/zone/python-with-statement.htm
        """
        if isinstance(value, WebDriverException) and SELENIUM_DEBUG:
            # This was Selenium exception
            print "Selenium API call failed because of browser state error: %s" % value
            print "Selenium instance has been bound to self.driver"
            pdb.set_trace()

class SeleniumHelper(object):
    """
    Selenium convenience methods for Plone.

    Command Selenium browser to do common actions.
    This mainly curries and delegates to plone.app.testing.selenium_layers helper methods.

    More info:

    * https://github.com/plone/plone.app.testing/blob/master/plone/app/testing/selenium_layers.py
    """

    def __init__(self, testcase, driver=None):
        """
        :param testcase: Yout test class instance

        :param login_ok_method: Selenium check function to run to see if login success login_ok_method(selenium_helper)
        """
        self.testcase = testcase
        if driver:
            # Use specific Selenium WebDriver instance
            self.driver = driver
        else:
            # plone.app.tesrting selenium layer
            self.driver = testcase.layer['selenium']
        self.portal = testcase.layer["portal"]

    def selenium_error_trapper(self):
        """
        Create ``with`` statement context helper which will invoke Python ipdb debugger if Selenium fails to do some action.

        If you run test with SELENIUM_DEBUG env var set you'll get dropped into a debugger on error.
        """
        return SeleniumTrapper(self.driver)

    def reset(self):
        """
        Reset Selenium test browser between tests.
        """

    def login(self, username, password, timeout=15, poll=0.5, login_cookie_name="__ac", login_url=None):
        """
        Perform Plone login using Selenium test browser and Plone's /login_form page.
        """

        submit_button_css = '#login_form input[name=submit]'

        if not login_url:
            # Default Plone login URL
            login_url = self.portal.absolute_url() + '/login_form'

        with self.selenium_error_trapper():
            submit_button = self.open(login_url, wait_until_visible=submit_button_css)

            self.find_element(By.CSS_SELECTOR, 'input#__ac_name').send_keys(username)
            self.find_element(By.CSS_SELECTOR, 'input#__ac_password').send_keys(password)

            submit_button.click()

        # Check that we get Plone login cookie before the timeout
        waitress = WebDriverWait(self.driver, timeout, poll)
        matcher = lambda driver: driver.get_cookie(login_cookie_name) not in ["", None]
        waitress.until(matcher, "After login did not get login cookie named %s" % login_cookie_name)

    def logout(self, logout_url=None):
        """
        Perform logout using Selenium test browser.

        :param logout_url: For non-default Plone logout view
        """

        if not logout_url:
            logout_url = self.portal.absolute_url() + "/logout"

        self.open(logout_url)

    def get_plone_page_heading(self):
        """
        Get Plone main <h1> contents as lowercase.

        XXX: Looks like Selenium API returns uppercase if there is text-transform: uppercase?

        :return: Empty string if there is no title on the page (convenience for string matching)
        """

        try:
            title_elem = self.driver.find_element_by_class_name("documentFirstHeading")
        except NoSuchElementException:
            return ""

        if not title_elem:
            return ""

        return title_elem.text.lower()

    def trap_error_log(self, orignal_page=None):
        """
        Read error from the site error log and dump it to output.

        Makes debugging Selenium tests much more fun when you directly see
        the actual errors instead of OHO.

        :param orignal_page: Decorate the traceback with URL we tried to access.
        """

        # http://svn.zope.org/Zope/trunk/src/Products/SiteErrorLog/SiteErrorLog.py?rev=96315&view=auto
        error_log = self.portal.error_log
        entries = error_log.getLogEntries()

        if len(entries) == 0:
            # No errors, yay!
            return

        msg = ""

        if orignal_page:
            msg += "Plone logged an error when accessing page %s\n" % orignal_page

        # We can only fail on traceback
        if len(entries) >= 2:
            msg += "Several exceptions were logged.\n"

        entry = entries[0]

        raise AssertionError(msg + entry["tb_text"])

    def is_error_page(self):
        """
        Check that if the current page is Plone error page.
        """
        return "but there seems to be an error" in self.get_plone_page_heading()

    def is_unauthorized_page(self):
        """
        Check that the page is not unauthorized page.

        ..note ::

             We cannot distingush login from unauthorized
        """

        # require_login <-- auth redirect final target
        return "/require_login/" in self.driver.current_url

    def is_not_found_page(self):
        """
        Check if we got 404
        """
        return "this page does not seem to exist" in self.get_plone_page_heading()

    def find_element(self, by, target):
        """
        Call Selenium find_element() API and break on not found and such errors if running tests in SELENIUM_DEBUG mode.
        """
        with self.selenium_error_trapper():
            return self.driver.find_element(by, target)

    def find_elements(self, by, target):
        """
        Call Selenium find_elements() API and break on not found and such errors if running tests in SELENIUM_DEBUG mode.
        """
        with self.selenium_error_trapper():
            return self.driver.find_elements(by, target)

    def click(self, by, target):
        """
        Click an element.

        :param by: selenium.webdriver.common.by.By contstant

        :param target: CSS selector or such
        """
        with self.selenium_error_trapper():
            elem = self.driver.find_element(by, target)
            elem.click()

    def open(self, url, check_error_log=True, check_sorry_error=True, check_unauthorized=True, check_not_found=True, wait_until_visible=None):
        """
        Open an URL in Selenium browser.

        If url does not start with http:// assume it is a site root relative URL.

        :param wait_until_visible: CSS selector which must match before we proceed

        :param check_error_log: If the page has created anything in Plone error log then dump this traceback out.

        :param check_sorry_error: Assert on Plone error response page

        :param check_unauthorized: Assert on Plone Unauthorized page (login dialog)

        :return: Element queried by wait_until_visible or None
        """
        elem = None

        # Convert to abs URL
        if not (url.startswith("http://") or url.startswith("https://")):
            url = self.portal.absolute_url() + url

        selenium_layers.open(self.driver, url)

        if check_error_log:
            self.trap_error_log(url)

        if wait_until_visible:
            elem = self.wait_until_visible(By.CSS_SELECTOR, wait_until_visible)

        # XXX: These should be waited also

        if check_sorry_error:
            self.testcase.assertFalse(self.is_error_page(), "Got Plone error page for url: %s" % url)

        if check_unauthorized:
            self.testcase.assertFalse(self.is_unauthorized_page(), "Got Plone Unauthorized page for url: %s" % url)

        if check_not_found:
            self.testcase.assertFalse(self.is_not_found_page(), "Got Plone not found page for url: %s" % url)

        return elem

    def wait_until_visible(self, by, target, message=None, timeout=10, poll=0.5):
        """
        Wait until some element is visible on the page (assume DOM is ready by then).

        Wraps selenium.webdriver.support.wait() API.

        http://selenium.googlecode.com/svn/trunk/docs/api/py/webdriver_support/selenium.webdriver.support.wait.html#module-selenium.webdriver.support.wait
        """

        if not message:
            message = "Waiting for element: %s" % target

        waitress = WebDriverWait(self.driver, timeout, poll)
        matcher = lambda driver: driver.find_element(by, target)
        waitress.until(matcher, message)
        elem = self.driver.find_element(by, target)
        return elem 
```

（还没有在github上）

# java - Android时间到字节数组

> ID：10292714
> 
> 赞同：1
> 
> 时间：2012-04-24T06:22:27.813
> 
> 标签：java, android, time, bluetooth, bytearray

我正在尝试在 Android 应用程序中获取当前时间和日期并通过蓝牙传输。我尝试使用时间和日历来获得小时、分钟、秒、月、日和年减去 2000。然后我尝试将每个值转换为一个字节并将它们放入一个字节数组中。但是，当我尝试通过蓝牙发送值时，它们在另一端出现错误。我要拍摄的格式是标题 (0xFF)，后跟时、分、秒、月、日、年。

```
public class Bluetooth extends Activity{
    private static final UUID MY_UUID = UUID.fromString("00001101-0000-1000-8000-00805F9B34FB");
    private String bt_address;//00:18:E4:OC:67:FF
    private BluetoothAdapter mBluetoothAdapter = null;
    private BluetoothSocket btSocket = null;
    private OutputStream outStream = null;
    private InputStream inStream = null;

@Override
protected void onCreate(Bundle savedInstanceState){
    super.onCreate(savedInstanceState);
    setContentView(R.layout.bluetooth);

    Button connect = (Button)findViewById(R.id.Btn_Connect);

    try{
        /*code removed, reads bt_address from a file or creates a file if no file exists yet*/

    } catch(IOException ioe){
        ioe.getStackTrace();
    }

    connect.setOnClickListener(new OnClickListener(){
        public void onClick(View v){
            try{
                /*code removed, saves bt_address to a file*/
            }

            mBluetoothAdapter = BluetoothAdapter.getDefaultAdapter();

            /*code removed, prompts user to turn on Bluetooth if not already on*/

            BluetoothDevice device = mBluetoothAdapter.getRemoteDevice(bt_address);
            try {
                    btSocket = device.createRfcommSocketToServiceRecord(MY_UUID);
                } catch (IOException e) {}
            mBluetoothAdapter.cancelDiscovery();
            try {
                    btSocket.connect();
                } catch (IOException e) {
                    try {
                        btSocket.close();
                    } catch (IOException e2) {}
                }
            try {
                    outStream = btSocket.getOutputStream();
             } catch (IOException e) {}

            try {
                    inStream = btSocket.getInputStream();
            } catch (IOException e) {}

                    Time time = new Time();
                    byte[] msgbuf = new byte[7];

                    msgbuf[0] = (byte)0xFF;
                    msgbuf[1] = (byte)time.hour;
                    msgbuf[2] = (byte)time.minute;
                    msgbuf[3] = (byte)time.second;
                    msgbuf[4] = (byte)(time.month + 1);
                    msgbuf[5] = (byte)time.monthDay;
                    msgbuf[6] = (byte)(time.year - 2000);

                    outStream.write(msgbuf);
           }
)}; 
```

此代码设置为使用其蓝牙地址连接到设备，并在单击按钮时向其发送时间戳。它将连接到设备并在此过程中发送一长串数字，但我开始认为它在发送时间戳之前断开连接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T06:52:13.790

Android [Time](http://developer.android.com/reference/android/text/format/Time.html)类具有将 Time 对象转换为两种不同的标准化字符串格式的内置函数：[format2445()](http://developer.android.com/reference/android/text/format/Time.html#format2445%28%29)和[format3339()](http://developer.android.com/reference/android/text/format/Time.html#format3339%28boolean%29)。他们已经为您准备好了，实施开放标准，其他人已经完成了 QA。

字符串将比您正在使用的格式稍长，但在这个大小下，我怀疑它是否重要。同样，您在接收端解码它们只会稍微困难一些。平衡这一点，因为它是一个人类可读的字符串，你会更容易调试。

我建议您使用这两种字符串格式之一。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T06:33:41.220

你只发送一个字节。方法 outStream.write(int) 需要 int 作为参数（只有 8 个字节很重要）。所以你发送正确。你刷新消息了吗？

您如何收到此消息很重要？您应该阅读[InputStream.read()](http://docs.oracle.com/javase/1.5.0/docs/api/java/io/InputStream.html#read%28%29)方法并将整数转换为字节。

也许更好的解决方案是将字节作为[outStream.write(msgbuf)发送并作为](http://docs.oracle.com/javase/1.5.0/docs/api/java/io/OutputStream.html#write%28byte%5B%5D%29)[inputStream.read(receiveBuffer)](http://docs.oracle.com/javase/1.5.0/docs/api/java/io/InputStream.html#read%28byte%5B%5D%29)读取；

# django - django 管理命令：使用 LabelCommand

> ID：10292716
> 
> 赞同：2
> 
> 时间：2012-04-24T06:22:41.817
> 
> 标签：django, django-admin, python-2.7, django-manage.py

我想与这个管理命令一起传递参数。我从命令行运行此代码

```
python manage.py example1 amita 
```

其中 example1 是我的文件名， amita 是参数。在运行这个我得到错误。我正在粘贴回溯：

```
Traceback (most recent call last):

File "manage.py", line 79, in <module>
    execute_manager(settings)
  File "/usr/lib/python2.7/dist-packages/django/core/management/__init__.py", line 438, in execute_manager
    utility.execute()
  File "/usr/lib/python2.7/dist-packages/django/core/management/__init__.py", line 379, in execute
    self.fetch_command(subcommand).run_from_argv(self.argv)
  File "/usr/lib/python2.7/dist-packages/django/core/management/__init__.py", line 261, in fetch_command
    klass = load_command_class(app_name, subcommand)
  File "/usr/lib/python2.7/dist-packages/django/core/management/__init__.py", line 68, in load_command_class
    return module.Command()
AttributeError: 'module' object has no attribute 'Command' 
```

example1.py 的代码如下

```
from django.core.management.base import LabelCommand
from django.core.management.base import BaseCommand

def hello(name):
  print name

def hello1(name):
  print name

class LabelCommand(BaseCommand):
    """
    A management command which takes one or more arbitrary arguments
    (labels) on the command line, and does something with each of
    them.

    Rather than implementing ``handle()``, subclasses must implement
    ``handle_label()``, which will be called once for each label.

    If the arguments should be names of installed applications, use
    ``AppCommand`` instead.

    """
    args = '<label label ...>'
    label = 'label'

    def handle(self, *labels, **options):
        if not labels:
            raise CommandError('Enter at least one %s.' % self.label)

    output = []
    for label in labels:
        label_output = self.handle_label(label, **options)
        if label_output:
            output.append(label_output)
    return '\n'.join(output)

    def handle_label(self, label, **options):
        """
        Perform the command's actions for ``label``, which will be the
        string as given on the command line.

        """
        hello(label)
        hello1(label)
        raise NotImplementedError() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T14:08:40.517

Django 已经有一个你应该使用的 LabelCommand 类：

```
from django.core.management.base import LabelCommand 
```

然后你只需要覆盖[handle_label](https://docs.djangoproject.com/en/1.9/howto/custom-management-commands/#django.core.management.LabelCommand)命令。

# android - 如何在 Android 客户端上触发 Adob e Reader 安装

> ID：10292718
> 
> 赞同：0
> 
> 时间：2012-04-24T06:22:50.200
> 
> 标签：android, android-emulator

我知道此类问题已在 SO 上多次回答。但我无法找到适合我要求的答案。

我需要知道客户端上是否安装了 Adob​​e Reader for Android。如果没有从应用程序触发阅读器的安装，然后查看 pdf...

我在 Android 上有点像新手...感谢您使用代码流程..

感谢你..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T06:47:45.707

如果您想在未安装 Reader 的情况下链接到市场，您可以在 Activity 中触发此 Intent：

```
Intent marketIntent = new Intent(Intent.ACTION_VIEW)
.setData(Uri.parse("market://details?id=com.adobe.reader"));
startActivity(marketIntent); 
```

查看 PDF 有点棘手：

```
Intent showPDFIntent = new Intent();
showPDFIntent.setPackage("com.adobe.reader");
showPDFIntent.setDataAndType(Uri.fromFile(myPDFFile), "application/pdf");
startActivity(showPDFIntent); 
```

我希望这有帮助。

最好的祝愿，蒂姆

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T06:54:17.640

嗨 Kunal 我已经为你写了一些代码请交叉验证因为我还没有测试过

```
public static final String QUICK_OFFICE_URL = "https://market.android.com/search?q=quick+office&so=1&c=apps";
    public static final String QUICK_OFFICE_TRIAL_PACKAGE = "com.qo.android.am3.trial";
    public static final String QUICK_OFFICE_PACKAGE = "com.qo.android.am3";
    public static final String ADOBE_READER_URL="https://market.android.com/search?q=adobe+reader&so=1&c=apps";
    public static final String ADOBE_READER_PACKAGE="com.adobe.reader";
    public static final String DOCUMENTS_TO_GO_PACKAGE = "com.dataviz.docstogo";
    public static final String GOOGLE_DOCUMENT_PACKAGE ="com.google.android.apps.docs";
    public static final String OPEN_OFFICE_PACKAGE = "at.tomtasche.reader";
    public static final String BEAMREADER_PACKAGE = "com.slgmobile.beamreader";
    public static final String PDFVIEWER_PACKAGE = "mobi.mgeek.pdfviewer";
    public static final String ANDROID_PDF_VIEWER_PACKAGE = "net.sf.andpdf.pdfviewer";
    public static final String EZ_READER = "udk.android.reader";
    public static final String PDF_VIEWER = "com.dzepina.pdfviewer";
    private void openFileForReading(File file, String extension) {
                    Log.v(TAG, " openFileForReading(File file, String extension)");
                    Intent intent = new Intent();
                    intent.setAction(android.content.Intent.ACTION_VIEW);
                    if (extension.equalsIgnoreCase("pdf")) {
                        Log.v(TAG, " file extension is .pdf");
                        if (appInstalledOrNot(Common.ADOBE_READER_PACKAGE)
                                || appInstalledOrNot(Common.BEAMREADER_PACKAGE)
                                || appInstalledOrNot(Common.PDF_VIEWER)
                                || appInstalledOrNot(Common.PDFVIEWER_PACKAGE)
                                || appInstalledOrNot(Common.EZ_READER)) {
                            intent.setDataAndType(Uri.fromFile(file), "application/*");
                            startActivity(intent);
                        } else {
                            showAlertDialog(Common.ADOBE_READER_URL, file);
                        }
                    } else if (extension.equalsIgnoreCase("doc")) {
                        Log.v(TAG, " file extension is .doc");
                        if (appInstalledOrNot(Common.QUICK_OFFICE_PACKAGE)
                                || appInstalledOrNot(Common.DOCUMENTS_TO_GO_PACKAGE)
                                || appInstalledOrNot(Common.GOOGLE_DOCUMENT_PACKAGE)
                                || appInstalledOrNot(Common.OPEN_OFFICE_PACKAGE)) {
                            intent.setDataAndType(Uri.fromFile(file), "application/*");
                            startActivity(intent);
                        } else {
                            showAlertDialog(Common.QUICK_OFFICE_URL, file);
                        }
                    } else if (extension.equalsIgnoreCase("docx")) {
                        Log.v(TAG, " file extension is .docx");
                        if (appInstalledOrNot(Common.QUICK_OFFICE_PACKAGE)
                                || appInstalledOrNot(Common.DOCUMENTS_TO_GO_PACKAGE)
                                || appInstalledOrNot(Common.GOOGLE_DOCUMENT_PACKAGE)
                                || appInstalledOrNot(Common.OPEN_OFFICE_PACKAGE)) {
                            intent.setDataAndType(Uri.fromFile(file), "application/*");
                            startActivity(intent);
                        } else {
                            showAlertDialog(Common.QUICK_OFFICE_URL, file);
                        }
                    } else {
                        intent.setDataAndType(Uri.fromFile(file), "application/*");
                        startActivity(intent);
                    }
                }
        private void showAlertDialog(final String uri, final File file) {
                AlertDialog.Builder dialog = new AlertDialog.Builder(
                        DocumentsActivity.this);
                dialog.setTitle("No Application Found !!!");
                dialog.setMessage("Install App From Market");
                dialog.setPositiveButton("Yes", new DialogInterface.OnClickListener() {

                    @Override
                    public void onClick(DialogInterface arg0, int arg1) {
                        Intent intent = new Intent(Intent.ACTION_VIEW);
                        intent.setData(Uri.parse(uri));
                        startActivity(intent);
                    }
                });
                dialog.setNegativeButton("No", new DialogInterface.OnClickListener() {

                    @Override
                    public void onClick(DialogInterface dialog, int whichButton) {
                        Intent intent = new Intent();
                        intent.setAction(android.content.Intent.ACTION_VIEW);
                        intent.setDataAndType(Uri.fromFile(file), "application/*");
                        startActivity(intent);
                        dialog.cancel();
                    }
                });
                dialog.show();
            }
    private boolean appInstalledOrNot(String packageName) {
            PackageManager pm = getPackageManager();
            boolean app_installed = false;
            try {
                pm.getPackageInfo(packageName, PackageManager.GET_ACTIVITIES);
                app_installed = true;
            } catch (PackageManager.NameNotFoundException e) {
                app_installed = false;
            }
            return app_installed;
        } 
```

# c# - 带有网络凭据的 HttpClient.GetAsync

> ID：10292730
> 
> 赞同：102
> 
> 时间：2012-04-24T06:23:56.937
> 
> 标签：c#, async-await, .net-4.5

我目前正在使用`HttpWebRequest`获取网站。我想使用 await 模式，它没有为`HttpWebRequests`. 我找到了 class `HttpClient`，这似乎是新的 Http worker 类。我`HttpClient.GetAsync(...)`用来查询我的网页。但我错过了添加`ClientCredentials`like的选项`HttpWebRequest.Credentials`。有没有办法提供`HttpClient`认证信息？

* * *

## 回答 #1

> 赞同：176
> 
> 时间：2012-04-24T06:26:34.927

您可以将带有凭据的[HttpClientHandler 类](http://msdn.microsoft.com/en-us/library/system.net.http.httpclienthandler%28v=vs.110%29.aspx)的实例传递给[HttpClient 构造函数](http://msdn.microsoft.com/en-us/library/hh193664%28v=vs.110%29.aspx)：

```
using (var handler = new HttpClientHandler { Credentials = ... })
using (var client = new HttpClient(handler))
{
    var result = await client.GetAsync(...);
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2021-04-17T19:23:27.330

您不应该每次都处理 HttpClient ，而是使用它（或一小部分客户端）更长的时间（应用程序的生命周期。您也不需要它的处理程序，但是您可以更改默认标头.

创建客户端后，您可以设置其默认请求标头进行身份验证。这是基本身份验证的示例：

```
client.DefaultRequestHeaders.Authorization = new AuthenticationHeaderValue("Basic", "username:password".ToBase64()); 
```

ToBase64() 表示将字符串转换为 base64 编码的辅助函数。

# php - PHP - 从 PDF 读取用户选择的文本的解决方法？

> ID：10292732
> 
> 赞同：2
> 
> 时间：2012-04-24T06:24:10.340
> 
> 标签：php, javascript, pdf

我正在开发一个项目，该项目允许用户从日文 HTML 页面上传文本或内容，然后使用光标选择文本/内容中的单词以翻译成英文。但是，我希望能够将此功能扩展到 PDF 文件。本质上，我希望用户能够提交 PDF 文件并让浏览器呈现该 PDF 文件，这样当用户选择/突出显示 PDF 中的单词时，浏览器可以以某种方式传递文本的内容突出显示的部分，例如通过 javascript，然后被中继到 PHP 变量。

我知道在 stackoverflow 上有很多帖子都在问类似的问题（我花了好几个小时试图对它们进行分类！），但我似乎无法找到关于这是否可能的明确答案。似乎有很多选项可以将 PDF 转换为 HTML 或从 PDF 中提取文本，但老实说，如果这些选项中的任何一个与我想要完成的任务相关，我会感到困惑。而且我知道有一个用于 Adob​​e 的 javascript API，但我的印象是 javascript 需要嵌入到 PDF 中，如果用户上传自己的 PDF 文件进行渲染，这将是不正确的。即使这是可能的，Adobe javascript API 中似乎也没有原生文本选择支持......

是否有一个简单的解决方法（矛盾？）来做到这一点？同样，我希望能够将在 PDF 中选择的文本传递给变量——效果是用户突出显示他们不知道的单词，以便可以将这些单词添加到单词库中以便在字典中检索。

让我知道我是否可以更清楚地了解任何事情。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T06:43:47.473

我认为您最好的选择是将 PDF 转换为 HTML（请参阅[此答案](https://stackoverflow.com/search?q=php%20convert%20pdf%20to%20html)），然后您已经设置好，因为您已经为常规 HTML 实现了所有内容。

# c - 使用 Key Value 计算 Key Check 值

> ID：10292736
> 
> 赞同：0
> 
> 时间：2012-04-24T06:24:51.770
> 
> 标签：c, encryption, cryptography, openssl, key-management

我用 C 语言编程。我在组件中获得了 TMK（终端主密钥），例如 TMK1 = 32byte hex value TMK2 = 32 byte hex value 。我需要使用这 2 个 Key 值计算 Key 检查值。我知道 DES 算法用于实现这一点，但我不知道完整的过程。请提供一个示例程序来执行此操作。

我正在尝试它：

1.取KV：XXXX XXXX XXXX XXXX YYYY YYYY YYYY YYYY

2.将其分成左右部分，每个部分为64位长：Left=XXXX XXXX XXXX XXXX Right=YYYY YYYY YYYY YYYY

3\. 用零初始化一个 64 位缓冲区。调用此缓冲区结果。

4.DES用Left加密Result。

5.DES用Right解密Result。

6.DES用Left加密Result

平台：Linux，C语言

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T07:41:11.673

我现在不能给你一个代码，但我建议你把 KV 当作一个字符串（或数组或字符），这样你就可以很容易地将它分成两部分。类似的东西。

# android - 在某些设备上下载文件很慢

> ID：10292737
> 
> 赞同：1
> 
> 时间：2012-04-24T06:24:54.473
> 
> 标签：android

我正在使用下面的代码从 URL 下载文件。

```
 URL url = new URL(mCoreContent.VideoURI);
HttpURLConnection c = (HttpURLConnection) url.openConnection();
c.setRequestMethod("GET");
c.setDoOutput(true);
c.connect();
lenghtOfFile = c.getContentLength();
InputStream input = c.getInputStream();
BufferedInputStream bis = new BufferedInputStream(input);
ByteArrayOutputStream output = new ByteArrayOutputStream((int) lenghtOfFile);
int buffer = 4096;
byte data[] = new byte[buffer];
int current = 0;
while ((current = bis.read(data, 0, buffer)) != -1) {
output.write(data, 0, current);
} 
```

我用两个不同的设备测试了上面的代码。一台设备下载文件的时间不到一分钟，而另一台设备使用相同的网络连接下载相同的文件需要 5-10 多分钟。我测试了多次，我得到了相同的结果。请帮忙。

提前致谢。

# ruby - 将类的Ruby数组转换为JSON

> ID：10292739
> 
> 赞同：2
> 
> 时间：2012-04-24T06:24:57.230
> 
> 标签：ruby, json

我有这样的 Ruby 数据结构：

```
class Albums
    attr_accessor :title, :url

    def initialize(title, url)
        @title = title
        @url = url
    end
end

class Albumlist < Albums
    attr_accessor :id, :albums

    def initialize(id)
        @id = id
        @albums = Array.new
    end
end 
```

我制作了一个*Albumlist*数组，看起来像（使用 .inspect 方法）：

```
[#<Albumlist:0x8db6390 @id="abc",@albums=[
     #<Albums:0x8db6098 @title="123", @url="test">,
     #<Albums:0x8db5fe4 @title="456", @url="test">
 ]>,
 #<Albumlist:0x8f4042c @id="def", @albums=[
     #<Albums:0x8f49f2c @title="Untitled Album", @url="test">
 ]>
] 
```

我不确定这个数组是否看起来不错，但是一旦我在这个数组上使用了 .to_json 或 JSON.generate() 方法，我得到的只是：

```
["#<Albumlist:0x8db6390>","#<Albumlist:0x8f4042c>"] 
```

看起来 Ruby 返回了对对象实例的“引用”。我想在 JSON 中转换这个数组，它应该看起来像

```
[
    {
            "id":"abc"
            "albums":[
                    {
                            "title":"123",
                            "url":"test"
                    },
                    {
                            "title":"456",
                            "url":"test"
                    }
            ]
    },
    {
            "id":"def"
            "albums":[
                    {
                            "title":"Untitled Album",
                            "url":"test"
                    }
            ]
    }
] 
```

而且我相信我遗漏了一些东西，例如将数组转换为某种中间对象？

**编辑：替代解决方案**

在 Albumlist 类中定义一个 to_json 方法，如下所示：

```
def to_json(*a)
    {
        "id" => @id,
        "albums" => @albums
    }.to_json(*a)
end 
```

并改用它..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T06:53:19.933

在这里它起作用了，可能您没有在正确的时刻应用该方法，让我们尝试一下，首先，关注数组，如下所示：

```
require 'rubygems'
require 'active_support/all'
class Albums
    attr_accessor :title, :url

    def initialize(title, url)
        @title = title
        @url = url
    end
end

class Albumlist < Albums
    attr_accessor :id, :albums

    def initialize(id)
        @id = id
        @albums = Array.new
    end
end

a = Albums.new("a", "www.a.com")
b = Albums.new("b", "www.b.com")
c = Albums.new("c", "www.c.com")

list_of_albums_list = Array.new
list_a = Albumlist.new(1)
list_b = Albumlist.new(2)

list_a.albums << a
list_a.albums << b
list_b.albums << c

list_of_albums_list << list_a
list_of_albums_list << list_b
puts list_of_albums_list.to_json 
```

输出是：

```
[{"albums":[{"title":"a","url":"www.a.com"},{"title":"b","url":"www.b.com"}],"id":1},{"albums":[{"title":"c","url":"www.c.com"}],"id":2}] 
```

因此该方法按预期工作。

# sql-server-2008 - 如何使用openrowset执行带参数的存储过程

> ID：10292745
> 
> 赞同：7
> 
> 时间：2012-04-24T06:25:37.573
> 
> 标签：sql-server-2008, tsql, stored-procedures, openrowset

我正在创建一个存储过程，它获取一些参数，然后这些参数被发送到另一个我从 openrowset 调用的存储过程，但我遇到了一些语法错误。

```
CREATE PROCEDURE UpdatePrevFYConfigData 
    -- Add the parameters for the stored procedure here

        @startDate datetime,
        @endDate datetime,
        @productGroup varchar(8000) = 'All',
        @projectType varchar(500) = 'All',
        @businessUnit nvarchar(50) = 'All',
        @developmentLocation nvarchar(100) = 'All'
AS
BEGIN
    -- SET NOCOUNT ON added to prevent extra result sets from
    -- interfering with SELECT statements.
    SET NOCOUNT ON;

declare @start varchar(50)
declare @end varchar(50) 

set @start = cast(@startDate as varchar(40))
set @end = cast(@endDate as varchar(40))

    -- Insert statements for procedure here
select round(avg(a.DeviationDeadline),2) as DeviationDeadline, 
       round(avg(a.DeviationDefinition),2) as DeviationDefinition,
       round(avg(a.DeviationRDCosts),2) as DeviationRDCosts,
       round(avg(a.FunctionsAdded) + avg(a.FunctionsDeleted),2) as NotRealizedFuncs, 
       round(avg(a.DeviationPM2000Aufwand),2) as DeviationPM200Aufwand,
       round(avg(b.Defect),2) as Defect
       into #tempTable 
from openrowset('SQLNCLI', 
                'Server=.\sqlexpress;Trusted_Connection=yes;',  
                'SET NOCOUNT ON;SET FMTONLY OFF;EXEC [BSC_DB].dbo.SelectScorecardGraphData
                    '''+@start+''',
                    '''+@end+''',
                    '''+@productGroup+''',
                    '''+@projectType+''',
                    ''1'',
                    ''0'',
                    ''All'',
                    ''Current'',
                    '''+@businessUnit+''',
                    '''+@developmentLocation+'''
                ') as a,

    openrowset('SQLNCLI', 'Server=.\sqlexpress;Trusted_Connection=yes;',  'SET NOCOUNT ON;SET FMTONLY OFF;EXEC [BSC_DB].dbo.GetSPCDefectDistributionData
'''+cast(@startDate as varchar(40))+''',
'''+cast(@endDate as varchar(40))+''',
''Defect'',
'''+@projectType+''',
'''+@productGroup+''',
'''+@businessUnit+''',
'''+@developmentLocation+'''') as b

update dbo.EA_ProcessScorecard_Config_Tbl
set EPC_Deviation = case EPC_Metric
    when 'PM200' then (select  DeviationDefinition from #tempTable)
    when 'PM300' then (select  DeviationDeadline from #tempTable)
    when 'Cost'  then (select  DeviationRDCosts from #tempTable)
    when 'PM150' then (select  DeviationPM200Aufwand from #tempTable)
    when 'Defect' then (select Defect from #tempTable)
    when 'Funcs' then (select NotRealizedFuncs from #tempTable)
END
where EPC_Description = 'PrevFY' and EPC_FYYear = '0'

drop table #tempTable

END 

GO 
```

我无法创建它，并且收到错误消息：

```
Msg 102, Level 15, State 1, Procedure UpdatePrevFYConfigData, 
Line 38 Incorrect syntax near '+'. 
```

...但是如果我对参数使用硬编码值，它就可以工作！！

请帮忙！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-24T08:54:00.517

OPENROWSET 和 OPENDATASOURCE 都应该只用于访问外部数据，比如快速和肮脏的解决方案，或者当无法配置永久链接服务器时。这些功能不提供链接服务器提供的所有功能。OPENROWSET 和 OPENDATASOURCE 的参数不支持变量。它们必须指定为字符串文字。如果需要将变量作为参数传递给这些函数，则可以使用 EXEC 语句动态构造和执行包含这些变量的查询字符串。类似于（未检查语法）

```
DECLARE @sqlCommand varchar(1000)
SET @sqlCommand = 'SELECT *
FROM OPENROWSET(''SQLNCLI'',''server=.\sqlexpress;Trusted_Connection=yes'',''SET NOCOUNT ON;SET FMTONLY OFF;EXEC [BSC_DB].dbo.SelectScorecardGraphData ''''' + cast(@param1 as varchar(10)) + ''''',''' + cast(@param2 as varchar(n)) ''')'
EXEC @sqlCommand 
```

等等......希望有帮助。亲切的问候，斯特凡

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-05-21T12:19:19.437

```
 -- FOR USING OPENROWSETS
    EXEC sp_configure 'Ad Hoc Distributed Queries'
        ,1

    RECONFIGURE

    DECLARE @SQL NVARCHAR(MAX)

    SET @SQL = 'INSERT INTO #TABLESIZESYEAR SELECT NULL AS [TABLE NAME], * FROM OPENROWSET 
                    (''SQLOLEDB'',''Server=(local);TRUSTED_CONNECTION=YES;'',''set fmtonly off EXEC one.[dbo].[InvestigateDataGrowthByYearAndClient] @pDATECOLUMN =' + @YEARCOLUMN + ' ,
                        @pTABLENAME = ' + @TABLENAME + ' WITH RESULT SETS(
                        ([YEAR NAME] NVARCHAR(5) NULL
                                , [NUMBER OF ROWS] CHAR(11)    
                                , [RESERVED SPACE] VARCHAR(18) 
                                , [DATA SPACE] VARCHAR(18)    
                                , [INDEX SIZE] VARCHAR(18)    
                                , [UNUSED SPACE] VARCHAR(18) )
                    )
                        ;'') '

    DECLARE @ParmDefinition NVARCHAR(500) = '@pDATECOLUMN NVARCHAR(20)
                            ,@YEARCOLUMN NVARCHAR(20)
                            ,@pTABLENAME NVARCHAR(60)';

    EXECUTE sp_executesql @sql
        ,@ParmDefinition
        ,@YEARCOLUMN = @YEARCOLUMN
        ,@pDATECOLUMN = @YEARCOLUMN
        ,@pTABLENAME = @TABLENAME 
```

# java - jsp会话超时后如何重定向到登录页面？

> ID：10292749
> 
> 赞同：0
> 
> 时间：2012-04-24T06:26:02.703
> 
> 标签：java, ajax, jsp, struts

嗨，我正在使用 struts 和 jsp 开发应用程序。在 jsp 中，我们使用 Ajax 调用，会话超时后，我们将重定向到登录页面。但问题是登录页面显示相同的 div 标签。我正在检查会话中的用户或不在 jsp 的 javascript 中，但会话始终具有用户 ID 值，如果会话也过期，它永远不会为空。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T07:12:10.577

两件事情

1.  在 web.xml 中配置欢迎页面作为登录页面
2.  创建一个过滤器并在 web.xml 中配置，这应该是 web.xml 中的第一个过滤器
3.  在过滤器中检查会话是否是新的，用户应该被引导到登录页面，否则应该处理请求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T08:49:07.240

最近我正好做了一个关于这个的教程。也许它会有所帮助。与 abhi 提出的解决方案相同，但有一个示例。

[http://classfoundexception.blogspot.com.es/2012/04/how-to-secure-struts-13-application.html](http://classfoundexception.blogspot.com.es/2012/04/how-to-secure-struts-13-application.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T06:37:16.430

每次新请求到来时，您都应该在服务器端检查并验证会话。此超时也由 Web 服务器处理。一旦发生超时，服务器会自动将用户重定向到`session logout URL`. 您可以在服务器的 conf 文件中更改此配置。

有关更多信息，请参阅[此](https://stackoverflow.com/q/3579914/1130032)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-11T05:09:08.550

要处理 Ajax 调用请求的会话超时/过期并将其分派到登录页面，请执行以下步骤。

1）在你的jsp中，无论哪里写有ajax函数，在你的ajax发送请求之前设置一个标题。

```
req.open("POST", Servlet_PATH, true);
req.setRequestHeader("X-Requested-With", "XMLHttpRequest"); //set header
req.send(); 
```

2）在过滤器中获取这样的标题，如果会话为空，则作为响应错误发送

```
 httpRequest.getHeader("X-Requested-With");
    if (session == null) {
`if(httpRequest.getHeader("X-Requested-With")!=null && httpRequest.getHeader("X-Requested-With").equals("XMLHttpRequest")){`
        `logger.info("Ajax Expired...");`
                            `((HttpServletResponse)response).sendError(403);` // Response error set
                            `return;`
                        `}}` 
```

3）在jsp中，无论在哪里编写ajax代码，都像这样检查request.readystate和request.state

```
if (req.readyState==4 && req.status==200)
         {
//your logic
}
else if(req.readyState==4 && req.status==403){

             alert("Your Session is Expired.Please Relogin.");
             window.location.href = "<%=request.getContextPath()%>/jsp/login.jsp";
         } 
```

# javascript - 用于渲染元素的 jquery 事件

> ID：10292752
> 
> 赞同：5
> 
> 时间：2012-04-24T06:26:15.810
> 
> 标签：javascript, jquery, html

我正在尝试在屏幕外进行所有 dom 操作，然后使其可见。哪个有效，除了现在我有一种情况，我试图用一个表单来完成它，我想在浏览器上渲染它时专注于第一个输入文本。

类似的东西：`myForm.prependTo(myDiv).show().find('input:first').focus();`

问题是在表单完成渲染之前调用了焦点，这导致了可爱的错误***“无法将焦点移动到控件，因为它是不可见的、未启用的或不接受焦点的类型'***

其他 Web 开发人员如何处理在屏幕外操作元素然后使其可见的类似情况？我希望 jQuery 有类似的东西
`myForm.prependTo(myDiv, function() { /* on render code here */ })`

我知道这样做的一种方法是设置超时，当它触发时，我将注意力集中在输入上，但我觉得这并不是最干净的做事方式。我知道 iframe 有一个 onload 事件，所以我很好奇人们是否通常在一些隐藏的 iframe 中绘制他们的元素并监听它的加载事件以了解元素何时完成渲染？如果是这样，你能指出我这样做的一个例子吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T06:43:10.063

```
myForm.prependTo(myDiv).show(function(e){
    $(this).find('input:first').focus();
});​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-09-04T04:54:37.213

我知道我迟到了 7 年，但我遇到了类似的问题，我通过将渲染后需要发生的事情放在准备好的处理程序中解决了这个问题。

我有一个有效的恢复功能，但是元素已恢复的视觉反馈为零或接近零。

我尝试先清空元素。它仍然有效，但视觉反馈仍然为零。

`$("#someSelector").empty(); restore();`

然后我发现 ready() 发生在渲染之后；所以我把它改成了......

`$("#someSelector").empty().ready(function() { restore(); });`

现在 restore() 直到 empty() 操作 RENDERS 之后才会发生。这意味着我的元素出现清空然后重新填充（它总是这样做，但现在用户可以看到它发生）。

几天前我以某种方式找到了这个解决方案，解决了一个我不记得的模糊搜索的不同问题。然后我再次需要它，但不记得我做了什么。现在我的搜索包括单词“jquery”和“render”并把我带到这里。

我最终通过我的代码找出我做了什么，我认为将它发布在这里可能是一个好主意，以防其他人偶然发现这篇文章并且实际上需要在渲染发生后执行某些事情。

干杯。

# cocoa - 我想将选定的文本粘贴到单击名为 paste 的按钮上的文本视图中。我该怎么做？

> ID：10292753
> 
> 赞同：0
> 
> 时间：2012-04-24T06:26:15.907
> 
> 标签：cocoa

我是 cocoa prgramming 的新手，我正在使用代码复制文本：

```
NSRange range = [textView selectedRange];
NSData* rtfData = [textView RTFFromRange: range];
NSAttributedString* aStr = [[NSAttributedString alloc]initWithRTF:rtfData documentAttributes:NULL];
NSString* str = [aStr string]; 
```

`str`包含选定的文本，但是当我单击文本视图时，如何将该文本粘贴到文本中[`NSTextView`](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/ApplicationKit/Classes/NSTextView_Class/Reference/Reference.html)？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T06:31:59.523

您必须将 NSTextView 的委托设置为 self，然后您需要实现要执行此操作的委托方法。

然后你可以使用 NSText（NSTextView 的超类）的 setString 方法来设置文本。

编辑 - （先试试这个，如果它将文本设置为 textview）

```
NSRange range = [textView selectedRange]; 
NSData* rtfData = [textView RTFFromRange: range];
NSAttributedString* aStr = [[NSAttributedString alloc]initWithRTF:rtfData documentAttributes:NULL];
NSString* str = [aStr string];
[[textView setString:str]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T09:33:15.290

对于 NSTextView 你需要：

```
[[textView textStorage] setAttributedString:[[NSAttributedString alloc] initWithString:str]]; 
```

# cakephp - 如何将 isAuthorized 和 Auth->allow/deny 的功能混合到 CakePHP 中的一种方法中？

> ID：10292759
> 
> 赞同：1
> 
> 时间：2012-04-24T06:26:43.813
> 
> 标签：cakephp, authentication

在我的设计中，一个操作有一个等级，需要 0-10 才能访问它（0 是访客 [未登录]，10 是管理员）。每个用户都有一个等级，0-10。如果您有等级或更高的等级，您可以访问该操作，否则您不能。又好又简单，这就是我所需要的。

问题是 CakePHP 希望我用两个独立的概念来处理动作。我必须将它们标记为 Auth->allow/deny 以确定身份验证系统是否会打扰它们，然后我使用 isAuthorized() 控制对它们的访问。

isAuthorized 非常适合我的需求...除了我想要访问等级 0 的任何操作都必须是 Auth->allow()... 然后完全忽略我的 isAuthorized 方法。如果我拒绝所有页面，登录会在应该为 0 级的页面上触发，然后再检查 isAuthorized，因此即使我通过它授予授权，该人也必须先登录。

有没有办法将两个系统合并在一起，或者有一种简单的方法来替换它？大多数身份验证系统都很棒，可以为我处理业务，而无需我搞乱它......但这很尴尬，并且当我没有注意到混合的允许/拒绝或其他东西时会引起问题.

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-24T14:39:16.067

据我所知，唯一的方法是创建一个来宾用户。这是因为 Auth 组件在`isAuthorized()`像您解释的那样之前检查用户的存在。

您可以通过直接写入会话来做到这一点。这将告诉 Auth 组件有人登录，因此`isAuthorized()`将调用您的方法。

**应用控制器**

```
public function beforeFilter() {
  // if no one is logged in, log in a guest
  if (!$this->Auth->user()) {
    $this->Session->write(AuthComponent::$sessionKey, array(
      'User' => array(
        'id' => 0
       )
    ));
  }
}

public function isAuthorized($user) {
  $authorized = false;
  if ($this->Auth->user('id') == 0) {
    // public guest user access
  }
  // other logic
  return $authorized;
} 
```

一个可能更好的方法是使用自定义身份验证对象，它基本上告诉 Cake 使用该类来帮助进行身份验证。这会将逻辑拆分为一个单独的类，从而更容易测试甚至禁用。

**应用程序/控制器/组件/Auth/GuestAuthenticate.php**

```
App::uses('BaseAuthenticate', 'Controller/Component/Auth');

class GuestAuthenticate extends BaseAuthenticate {
    public function authenticate(CakeRequest $request, CakeResponse $response) {
        // no real authentication logic, just return a guest user
        return array('User' => array('id' => 0));
    }
} 
```

**应用控制器**

```
public $components = array(
  'Auth' => array(
    'authenticate' => array(
      'Form',
      'Guest' // tell Cake to try Form authentication then Guest authentication
    )
  )
);

public function beforeFilter() {
  if (!$this->Auth->user()) {
    // no user? log in a guest (this will fail form authentication
    // then try guest authentication)
    $this->Auth->login();
  }
}

public function isAuthorized($user) {
  $authorized = false;
  if ($this->Auth->user('id') == 0) {
    // public guest user access
  }
  // other logic
  return $authorized;
} 
```

您可以在此处找到有关自定义身份验证对象的更多信息：http: [//book.cakephp.org/2.0/en/core-libraries/components/authentication.html](http://book.cakephp.org/2.0/en/core-libraries/components/authentication.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-12T22:20:23.277

也许这已经得到了令人满意的处理，但我有一个解决方案。

在我的 AppController 中，我有以下内容：

 `````
 public function isAuthorized($user = null) {
        if (in_array($this->action, $this->Auth->allowedActions)) {
            return true;
        }
        return false;
    } 
```` 

`正如您所发现的，如果您没有明确授权操作，那么经过身份验证的用户将被拒绝，即使它们被允许公开。这段代码只是让 isAuthorized() 方法遵循 Auth->allow() 列表中的设置。`

 `它似乎对我有用，所以我希望它有所帮助。``

# jquery - Visual Studio 2010 对 jQuery 有哪些 IntelliSense 支持？

> ID：10292763
> 
> 赞同：1
> 
> 时间：2012-04-24T06:27:04.830
> 
> 标签：jquery, visual-studio-2010, intellisense

当我输入 '$('body').' 时，会弹出一些通用选项，包括 toLocalString() 方法，但不包括 fadeIn() 方法或您希望弹出的大多数特定方法。那么这里发生了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T08:29:29.513

正如您所注意到的，Visual Studio 本身不支持任何*jQuery* Intellisense。如果是这样，*您会看到与 jQuery 相关的 Intellisense 出现*。

但是，您可以下载 vsdoc 文件以获得此支持。有关更多信息，请参阅[Scott Guthrie](http://weblogs.asp.net/scottgu/archive/2010/02/08/jquery-1-4-1-intellisense-with-visual-studio.aspx)的这篇博文。

正如极短的文章所述，Visual Studio 2010 内置了对*vsdoc*文件的支持。然后它会通知您可以下载 vsdoc 文件以从 jQuery 网站*获得 jQuery Intellisense 支持。*

# android - 通过 NDK 的 Android 客户端-服务器

> ID：10292764
> 
> 赞同：0
> 
> 时间：2012-04-24T06:27:05.690
> 
> 标签：android, apache, tomcat, android-ndk

我想使用 android ndk（本机代码）与 Apache Tomcat 服务器通信。是否可以进行交流，是否有其他选择？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T06:58:11.317

标准 POSIX 套接字代码可用于 Android 中的网络。可以在[https://github.com/android/platform_bionic/blob/master/libc/SYSCALLS.TXT](https://github.com/android/platform_bionic/blob/master/libc/SYSCALLS.TXT)找到适用于 android 的套接字系统调用 api （这是官方 android C 库 repo 的克隆）。这应该照顾您的网络层要求。至于代码，一个简单的网络客户端的代码可以在[http://en.wikipedia.org/wiki/Berkeley_sockets#Client](http://en.wikipedia.org/wiki/Berkeley_sockets#Client)找到。但是，这仅适用于您想编写自己的应用层协议（我假设是 HTTP）代码的情况。最好使用 HTTP 客户端库。

对于 HTTP 客户端库，您可以使用 libcurl 或任何类似的库进行通信。libcurl 站点上的可用库列表[http://curl.haxx.se/libcurl/competitors.html](http://curl.haxx.se/libcurl/competitors.html)。

注意：您很可能不会得到任何已编译的库。在编译代码之前，您需要编译该库并将其添加到您的应用程序中，并且该库也需要成为安装包的一部分。

# ruby-on-rails - rake db:migrate 不工作

> ID：10292765
> 
> 赞同：1
> 
> 时间：2012-04-24T06:27:12.377
> 
> 标签：ruby-on-rails, ruby-on-rails-3

```
rake db:migrate
(in /home/pal/project/sprint-19)
DEPRECATION WARNING: require "activerecord" is deprecated and will be removed in Rails 3\. Use require "active_record" instead. (called from /usr/lib/ruby/vendor_ruby/activerecord.rb:2)
DEPRECATION WARNING: "Rails.root/test/mocks/development" won't be added automatically to load paths anymore in future releases. (called from /home/pal/project/new-sprint/sprint-19/config/application.rb:51)
DEPRECATION WARNING: Rake tasks in /home/pal/project/new-sprint/sprint-19/vendor/plugins/authorization/tasks/authorization_tasks.rake are deprecated. Use lib/tasks instead. (called from /home/pa/project/new-sprint/sprint-19/Rakefile:7)
DEPRECATION WARNING: Rake tasks in /home/pal/project/new-sprint/sprint-19/vendor/plugins/chartdirector/tasks/chartdirector_tasks.rake are deprecated. Use lib/tasks instead. (called from /home/pal/project/new-sprint/sprint-19/Rakefile:7)
DEPRECATION WARNING: Rake tasks in /home/pal/project/new-sprint/sprint-19/vendor/plugins/headliner/tasks/headliner_tasks.rake are deprecated. Use lib/tasks instead. (called from /home/pal/project/new-sprint/sprint-19/Rakefile:7)
DEPRECATION WARNING: Rake tasks in /home/pal/project/new-sprint/sprint-19/vendor/plugins/open_flash_chart/tasks/open_flash_chart_tasks.rake are deprecated. Use lib/tasks instead. (called from /home/pal/project/new-sprint/sprint-19/Rakefile:7)
DEPRECATION WARNING: Rake tasks in /home/pal/project/new-sprint/sprint-19/vendor/plugins/rails_indexes/tasks/indexer.rake are deprecated. Use lib/tasks instead. (called from /home/pal/project/new-sprint/sprint-19/Rakefile:7)
DEPRECATION WARNING: RAILS_ROOT is deprecated. Please use ::Rails.root.to_s. (called from join at /home/pal/project/new-sprint/sprint-19/lib/tasks/helpers.rb:15)
rake aborted!
Table 'connect_production_new.settings' doesn't exist 
```

我尝试使用 MySQL 和 Postgres，但它只会为 MySQL 抛出此错误。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-24T06:43:11.563

可能您没有数据库或架构未更新，请尝试运行`rake db:reset`（这将删除您的数据库，创建数据库，加载架构和种子数据，如果您的数据库中有重要数据，请不要这样做）。

有关`bundle exec rake -T db`更多信息，请参阅。

# css - CSS :在选择器之后

> ID：10292768
> 
> 赞同：0
> 
> 时间：2012-04-24T06:27:22.630
> 
> 标签：css

您好，我尝试使 Css 选择器像

```
 .header:after{content:"Eric"; backround-color:yellow;} 
```

但它不起作用，请你的家伙给我一些想法，我不知道我可以在互联网上搜索的关键字。

问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T06:34:52.970

由于拼写错误，它可能不起作用：背景色而不是背景色。选择器对我有用：http: [//jsfiddle.net/MbA7J/2/](http://jsfiddle.net/MbA7J/2/)

# php - if !empty 语句使我的网站崩溃

> ID：10292776
> 
> 赞同：3
> 
> 时间：2012-04-24T06:28:08.683
> 
> 标签：php, if-statement

我有以下 if 语句：

```
<a href="#"
   title="<?php the_sub_field('points_description'); ?>"
   class="<?php if(!empty(the_sub_field('points_description'))) {
                  echo 'point-tooltip'; } ?>"> 
```

如果我只包含站点显示的 echo 部分，但是当我添加 if 部分（检查函数是否为`""`）时，站点只显示空白。

有什么建议可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-24T06:33:29.663

空函数仅适用于 var。

> empty() 仅检查变量，因为其他任何内容都会导致解析错误。换句话说，以下内容将不起作用：empty(trim($name))。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-04-24T06:45:00.093

[empty()](http://php.net/manual/en/function.empty.php)仅适用于变量，因为 this is function 还检查函数是否已定义。

使下面的代码可执行

```
// doesn't work :(
if(!empty(a_function($var)))
    do_stuff(); 
```

您必须将 a_function() 的结果存储到临时变量中

```
//works :D
$temp = a_function($var);
if(!empty($temp))
    do_stuff(); 
```

# mysql - 创建过程错误

> ID：10292777
> 
> 赞同：0
> 
> 时间：2012-04-24T06:28:10.367
> 
> 标签：mysql, stored-procedures, procedures

我在这段代码中有错误，无法弄清楚我哪里出错了：

```
CREATE DEFINER=`condoleu`@`%` PROCEDURE `sp_user_field_content_mgt`(FieldContentId varchar(50), FieldRef varchar(50),UserRefId varchar(50), description text,photoUpload varchar(50), photoText varchar(50), MusicText varchar(50), MusicUpload varchar(50), VideoText varchar(50), VideoUpload varchar(50), DispText enum('Y','N'), Flag int(1))
BEGIN
IF Flag=0 THEN
INSERT INTO tbl_contribution_master(field_content_id,field_ref_id,user_ref_id,description,uploaded_photo,photo_text,uploaded_music,music_text,uploaded_video,video_text,disp_text)     VALUES(FieldContentId,FieldRef,UserRefId,description,photoUpload,photoText,MusicUpload,MusicText,VideoUpload,VideoText,DispText);
ELSE
UPDATE tbl_contribution_master SET
description = description,
uploaded_photo = photoUpload,
photo_text = photoText,
uploaded_music = MusicUpload,
music_text = MusicText,
uploaded_video = VideoUpload,
video_text = VideoText,
disp_text = DispText
WHERE field_content_id = FieldContentId;
END IF;
END 
```

错误是：#1064 - 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 4 行的 '' 附近使用正确的语法

请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T06:39:26.680

您是否[指定了替代方法`DELIMITER`](http://dev.mysql.com/doc/refman/5.0/en/stored-programs-defining.html)，以便 MySQL 知道您的过程不会在它遇到的第一个分号处结束（在第 4 行）？

```
DELIMITER ;; -- or anything you like

CREATE PROCEDURE ... ;;

DELIMITER ; -- back to normal again 
```

# c# - 检测 Ctrl + Enter

> ID：10292780
> 
> 赞同：7
> 
> 时间：2012-04-24T06:28:26.560
> 
> 标签：c#, wpf, keystroke

（使用 WPF）我尝试检测`Ctrl`+何时`Enter`被击中。所以我尝试了这段代码：

```
if (e.Key == Key.Return && (e.Key == Key.LeftCtrl || e.Key == Key.RightCtrl))
 {
   //Do Something            
 } 
```

显然这是不正确的，因为它不起作用。谁能帮助我，解释正确的方法应该是什么？

谢谢

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-24T06:31:50.207

显然`e.Key`在同一事件中不能等于多个不同的值。

您需要处理使用 的事件之一，在`KeyEventArgs`那里您会找到诸如`Control`和之类的属性，`Modifiers`这将帮助您检测组合。

使用 的`KeyPress`事件`KeyPressEventArgs`只是没有足够的信息。

* * *

Drat，你说WPF不是你。看起来你需要`e.KeyboardDevice.Modifiers`.

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-24T06:55:04.443

我认为您需要一个 SpecialKey 处理程序。我用谷歌搜索了一下，在这里找到了解决方案[。](http://prabu-guru.blogspot.in/2010/02/how-to-detect-ctrl-alt-key-combinations.html)

以下来自引用链接的代码可能会解决您的问题：

```
 void SpecialKeyHandler(object sender, KeyEventArgs e)
{
    // Ctrl + N
    if ((Keyboard.Modifiers == ModifierKeys.Control) && (e.Key == Key.N))
    {
        MessageBox.Show("New");
    }

    // Ctrl + O
    if ((Keyboard.Modifiers == ModifierKeys.Control) && (e.Key == Key.O))
    {
        MessageBox.Show("Open");
    }

    // Ctrl + S
    if ((Keyboard.Modifiers == ModifierKeys.Control) && (e.Key == Key.S))
    {
        MessageBox.Show("Save");
    }

    // Ctrl + Alt + I
    if ((Keyboard.Modifiers == (ModifierKeys.Alt | ModifierKeys.Control)) && (e.Key == Key.I))
    {
        MessageBox.Show("Ctrl + Alt + I");
    }
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-02-15T02:03:13.313

```
if (e.Modifiers == Keys.Control && e.KeyCode == Keys.Enter) 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-07-03T14:06:47.773

```
 if (e.KeyChar == 10)
            {
             ///Code
            } 
```

或者

```
 if ((Char)e.KeyChar == '\n')
            {
             ///Code
            } 
```

# jsf-1.2 - jsf 1.2中多个提交按钮的部分验证

> ID：10292781
> 
> 赞同：0
> 
> 时间：2012-04-24T06:28:32.173
> 
> 标签：jsf-1.2

我有一个包含几十个组件的表单。目前我无法使用 ajax，因为它显示了一些错误。我只想为一个提交按钮验证字段，但由于我有多个提交按钮，它也会给其他人带来错误。当我将该按钮的其他按钮操作立即用于无法访问提交的值时。

问题当表单中有多个提交按钮时，有什么方法可以对特定提交按钮进行验证？

请问有人可以帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T10:54:14.213

将 required=”#{!empty param['frmName:btnSave']}” 用于将 btnSave 作为需要验证的按钮的 id 的字段。

# php - Mysql为选择列表获取数据

> ID：10292785
> 
> 赞同：0
> 
> 时间：2012-04-24T06:28:42.800
> 
> 标签：php, mysql, translation, html-select

我有一种情况，我想要最好的解决方案，因为我已经知道一种方法来完成它。唯一的问题是我一次又一次地面临类似的要求。

情况是，我在一个表单中有多个选择列表，每个选择列表都有几个项目，客户想要翻译这些项目。

因此，如果我为每个选择列表创建一个表，那么如果我有 10 个选择列表，那么我必须触发 10 个查询，我想知道这没问题，因为我看不出来。

或者我可以创建语言文件，我可以在其中声明这些数组并根据所选语言包含该文件。

任何人都可以分享他们解决此特定解决方案的经验，我们如何以最佳方式解决此问题。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T06:55:15.673

除非你现在关心每一盎司的性能，否则我认为拥有 10 个单独的查询没有什么大问题（只要它们重用相同的数据库连接）。

如果这让您感到不舒服，您*可以*使用单个查询检索给定语言的所有选择框选项（通过使用[`UNION`](http://dev.mysql.com/doc/refman/5.6/en/union.html)或规范化您的数据，以便单个表包含您的所有选择框选项，并且列指示哪个列表以及每条记录所属的语言）；然后 PHP 可以相应地拆分该单个查询的结果。

但是，由于您的问题专门询问了最佳实践，您可能想阅读[PHP](http://php.net/manual/en/book.gettext.php)对[`gettext()`](http://www.gnu.org/software/gettext/manual/gettext.html)（如[本问题](https://stackoverflow.com/questions/2790952/php-localization-best-practices-gettext)中所述）的支持或查看提供本地化功能的框架。

# proxy - 网状。将 HttpRequest 转换为 FrameWebSocket 并返回

> ID：10292787
> 
> 赞同：1
> 
> 时间：2012-04-24T06:28:59.210
> 
> 标签：proxy, websocket, httprequest, netty

有人能帮助我吗？

我正在编写客户端-服务器应用程序。服务器和客户端通过 websockets 连接。服务器管道：

```
ChannelPipeline pipeline = pipeline();
   pipeline.addLast("decoder", new HttpRequestDecoder());
   pipeline.addLast("aggregator", new HttpChunkAggregator(65536));
   pipeline.addLast("encoder", new HttpResponseEncoder());
   pipeline.addLast("handler", new WebSocketServerHandler()); 
```

客户管道：

```
final WebSocketClientHandshaker handshaker =
                    new WebSocketClientHandshakerFactory().newHandshaker(
                            uri, WebSocketVersion.V13, null, false, customHeaders);
pipeline.addLast("decoder", new HttpResponseDecoder());
                    pipeline.addLast("encoder", new HttpRequestEncoder());
                    pipeline.addLast("ws-handler", new WebSocketClientHandler(handshaker)); 
```

这个应用程序像代理一样工作 - 服务器从外部获取 httprequest，然后通过 websockets 将其发送给客户端。客户端接收它并将其发送到修改后的指定 url，接收响应并通过 websockets 将其发送回服务器。服务器收到此响应并将数据写入请求它的 Channel。

现在的主要问题 - 将 HttpRequest 转换为 WebSocketFrame 并返回的最佳方法是什么？当前的想法是读取字符串中的 HttpRequest，然后将其作为 TextWebSocketFrame 发送。在这种情况下，我认为我需要替换为当前为服务器和客户端指定的那些标准解码器，以免进行双重对话。我在 Netty 中没有找到这样的解码器。

但也许这是不好的方式，还有一些更好的决定吗？非常感谢您的回答！我是netty的新手。

此致

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T23:53:07.677

如果您打算封装整个 HTTP 请求，那么我认为您在通过 BinaryWebSocketFrame 发送它时处于正确的轨道上。

# java - 从数据库休眠刷新会话中的对象

> ID：10292788
> 
> 赞同：1
> 
> 时间：2012-04-24T06:29:00.383
> 
> 标签：java, hibernate

休眠，据我所知，一旦会话值中的附加对象发生更改，就会更新数据库。有没有办法从数据库中获取新副本并重新附加新副本以丢弃更改的对象？

下面是我从使用 Hibernate 查询数据库中获得的一个对象。

```
Rtpmast rtpmast = (Rtpmast) iterator.next(); 
```

一旦执行下面的代码

```
rtp.setRptval1(promotionMethod.getType()); 
```

Hibernate 注册该对象已更改。当我稍后提交事务或查询数据库时，会话是否被刷新？

我想要的是暂时更新`Rtpmast object`并稍后丢弃更改的对象。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-24T06:42:41.510

> 休眠，据我所知，一旦会话值中的附加对象发生更改，就会更新数据库。

实际上，Hibernate 仅在调用 等方法后才更新`session.save(...)`数据库`session.delete(...)`。如果您正在进行交易，您还必须进行`commit`更改。

您想要的是使用`evict()`并重新查询对象，正如您所提到的，或者分离您正在处理的实例，这意味着您需要（还有其他不那么琐碎的方法，如此`close()`处[所述](https://forum.hibernate.org/viewtopic.php?f=1&t=988857&view=next)）。`Session`

# php - 在 PHP 中连接到两个不同的数据库？

> ID：10292789
> 
> 赞同：2
> 
> 时间：2012-04-24T06:29:09.600
> 
> 标签：php, mysql, ms-access, odbc

我正在考虑用 php 连接到我的项目中的 2 个数据库。

一个是我们票务系统中使用 MS ACESS 的现有数据库，另一个是我现在使用的 MYSQL。

MS 访问的使用只是从中检索数据，而 MYSQL 将用于检索和存储数据。

是否可以同时连接到两个数据库？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-24T06:37:04.420

简短的回答：**是**的。

长答案：
您应该确保您的代码始终使用连接标识符以避免混淆并具有干净、可读的代码。（特别是当您使用 ODBC 或 PDO 等抽象层连接到两个数据库时）

请查看[有关 PDO 和连接管理的 PHP 手册](http://de.php.net/manual/en/pdo.connections.php)

例子：

```
$link_mysql = new PDO('mysql:host=localhost;dbname=test', $user, $pass);
$link_msaccess = new PDO("odbc:Driver={Microsoft Access Driver (*.mdb)};Dbq=C:\\test.mdb");

// query MySQL DB
foreach($link_mysql->query('SELECT * FROM test') as $row) {
    print_r($row);
}

// query MS Access DB
foreach($link_msaccess->query('SELECT * FROM omg_its_access') as $row) {
    print_r($row);
} 
```

没有 PDO 的示例：

```
$link_mysql = mysql_connect("localhost", $user, $pass);
mysql_select_db("test", $link_mysql);

$link_msaccess = odbc_connect("odbc:Driver={Microsoft Access Driver (*.mdb)};Dbq=C:\\test.mdb");

// you may omit the link identifier for MySQL, but i suggest to use it explicitly 
$res1 = mysql_query('SELECT * FROM test', $link_mysql);
while ($row = mysql_fetch_row($res1)) {
    print_r($row);
}
// for ODBC the link identifier is mandatory
$res2 = odbc_exec($link_msaccess, 'SELECT * FROM omg_its_access');
while ($row = odbc_fetch_row($res2)) {
    print_r($row);
} 
```

**正如您在上面看到的，两个数据库驱动程序的代码在语法上有所不同——这就是我建议使用 PDO 的原因。**

PDO 将避免很多麻烦，并且如果您决定稍后再切换到另一个数据库驱动程序，它将使切换到另一个数据库驱动程序变得更加容易。它抽象了所有数据库驱动程序，并为您提供了一个简单的界面来使用相同的语法处理它们。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-24T06:32:35.170

例如，如果您使用的是[PDO](http://de2.php.net/manual/en/book.pdo.php)，那是可能的。只需为每个连接创建一个 pdo-object - 只需将[mysql-driver 用于 mysql](http://www.phpro.org/tutorials/Introduction-to-PHP-PDO.html#4.3)和[odbc-connection 用于 access](http://www.phpro.org/tutorials/Introduction-to-PHP-PDO.html#4.7)。

# java - 从 URL 获取图像 (Java)

> ID：10292792
> 
> 赞同：26
> 
> 时间：2012-04-24T06:29:27.637
> 
> 标签：java, image, url

我正在尝试阅读以下图片

![在此处输入图像描述](../Images/3a3128e678dff3e9253aeec4490242a9.png)

但它显示 IIOException。

这是代码：

```
Image image = null;
URL url = new URL("http://bks6.books.google.ca/books?id=5VTBuvfZDyoC&printsec=frontcover&img=1& zoom=5&edge=curl&source=gbs_api");
image = ImageIO.read(url);
jXImageView1.setImage(image); 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2014-10-07T10:56:13.783

**这段代码对我来说很好。**

```
 import java.io.FileOutputStream;
 import java.io.IOException;
 import java.io.InputStream;
 import java.io.OutputStream;
 import java.net.URL;

public class SaveImageFromUrl {

public static void main(String[] args) throws Exception {
    String imageUrl = "http://www.avajava.com/images/avajavalogo.jpg";
    String destinationFile = "image.jpg";

    saveImage(imageUrl, destinationFile);
}

public static void saveImage(String imageUrl, String destinationFile) throws IOException {
    URL url = new URL(imageUrl);
    InputStream is = url.openStream();
    OutputStream os = new FileOutputStream(destinationFile);

    byte[] b = new byte[2048];
    int length;

    while ((length = is.read(b)) != -1) {
        os.write(b, 0, length);
    }

    is.close();
    os.close();
}

} 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-04-24T06:45:26.533

您收到`HTTP 400`（错误请求）错误，因为`space`您的 URL 中有一个。如果你修复它（在`zoom`参数之前），你会得到一个`HTTP 401`错误（未经授权）。也许您需要一些 HTTP 标头来将您的下载标识为可识别的浏览器（使用“User-Agent”标头）或其他身份验证参数。

对于 User-Agent 示例，然后使用[ImageIO.read(InputStream)](http://docs.oracle.com/javase/6/docs/api/javax/imageio/ImageIO.html#read%28javax.imageio.stream.ImageInputStream%29)使用连接输入流：

```
URLConnection connection = url.openConnection();
connection.setRequestProperty("User-Agent", "xxxxxx"); 
```

使用任何需要的东西`xxxxxx`

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2014-05-07T15:42:22.200

**试试这个：**

```
//urlPath = address of your picture on internet
URL url = new URL("urlPath");
BufferedImage c = ImageIO.read(url);
ImageIcon image = new ImageIcon(c);
jXImageView1.setImage(image); 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-04-24T06:41:59.497

直接调用 URL 获取图像可能会涉及重大安全问题。您需要确保您有足够的权限来访问该资源。但是，您可以使用`ByteOutputStream`读取图像文件。这是一个示例（它只是一个示例，您需要根据您的要求进行必要的更改。）

```
ByteArrayOutputStream bis = new ByteArrayOutputStream();
InputStream is = null;
try {
  is = url.openStream ();
  byte[] bytebuff = new byte[4096]; 
  int n;

  while ( (n = is.read(bytebuff)) > 0 ) {
    bis.write(bytebuff, 0, n);
  }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-24T06:49:55.553

尝试：

```
public class ImageComponent extends JComponent {
  private final BufferedImage img;

  public ImageComponent(URL url) throws IOException {
    img = ImageIO.read(url);
    setPreferredSize(new Dimension(img.getWidth(), img.getHeight()));

  }

  @Override
  protected void paintComponent(Graphics g) {
    super.paintComponent(g);
    g.drawImage(img, 0, 0, img.getWidth(), img.getHeight(), this);
  }

  public static void main(String[] args) throws Exception {
    final URL kitten = new URL("https://placekitten.com/g/200/300");

    final ImageComponent image = new ImageComponent(kitten);

    JFrame frame = new JFrame("Test");
    frame.add(new JScrollPane(image));

    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    frame.setSize(400, 300);
    frame.setVisible(true);
  }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-12-06T07:35:11.637

您可以尝试使用此类来显示从 JFrame 中的 URL 读取的图像。

```
public class ShowImageFromURL {

    public static void show(String urlLocation) {
        Image image = null;
        try {
            URL url = new URL(urlLocation);
            URLConnection conn = url.openConnection();
            conn.setRequestProperty("User-Agent", "Mozilla/5.0");

            conn.connect();
            InputStream urlStream = conn.getInputStream();
            image = ImageIO.read(urlStream);

            JFrame frame = new JFrame();
            JLabel lblimage = new JLabel(new ImageIcon(image));
            frame.getContentPane().add(lblimage, BorderLayout.CENTER);
            frame.setSize(image.getWidth(null) + 50, image.getHeight(null) + 50);
            frame.setVisible(true);

        } catch (IOException e) {
            System.out.println("Something went wrong, sorry:" + e.toString());
            e.printStackTrace();
        }
    }
} 
```

参考：[https ://gist.github.com/aslamanver/92af3ac67406cfd116b7e4e177156926](https://gist.github.com/aslamanver/92af3ac67406cfd116b7e4e177156926)

# java - 数组中的Java Double

> ID：10292793
> 
> 赞同：-1
> 
> 时间：2012-04-24T06:29:29.493
> 
> 标签：java

对不起，如果这是一个超级菜鸟问题。

根据我的阅读，我似乎无法在数组中存储双精度。有一些我可以使用的解决方法吗？这将允许我在不更改值的情况下将值放入数组中。我还需要与存储为双精度的外部变量进行比较。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-24T06:33:25.953

如果使用 an`ArrayList`你必须使用类`Double`而不是原始类型`double`

```
ArrayList<Double> arr = new ArrayList<Double>(); 
```

或使用一个简单的数组

```
double[] arr = new double[10]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T06:38:27.017

你读错了

```
double[] doubleArray = {1.1, 1.234567, 2.0,5.5}; //initialize double array to hold those values
double[] anotherArray = new double[3]; //initialize another array to hold 10 doubles
anotherArray[0]=5.5; //set the value for first elements 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T06:40:44.083

在 java 中，任何对象或原始数据类型（例如：int、double、short 等）都可以在数组中分配。是的，限制可能存在于专门的 JVM 中，例如嵌入式 JVM，例如内存有限且必须优化利用的 javacard。

# iphone - 从文档目录加载 UIScroll 上的图像

> ID：10292794
> 
> 赞同：0
> 
> 时间：2012-04-24T06:29:33.517
> 
> 标签：iphone

我有不同的肖像和风景图像，我从 Document 目录中获取图像，它们总共有 62 张图像。31 幅 1015x745 尺寸的横向图像和 31 幅 751x1024 尺寸的纵向图像。所有图像都加载在模拟器上，但是当我在设备中运行相同的代码时，应用程序崩溃了。它仅在横向图像上加载肖像。

```
int porWidth = 768, lanWidth = 1024;
int i=0;
    for (CatalogIndividuals *cat in self.array)
    {
        UIImageView *imageView1 = [[[UIImageView alloc] initWithFrame:CGRectMake(porWidth*i +5, 0, 757, 964)] autorelease];
        imageView1.tag = porImage+i;

        NSString *fullPath =[self.documentsDirectory stringByAppendingPathComponent:[NSString stringWithFormat:@"%@",cat.portraitImage]];

        imageView1.image = [UIImage imageWithData:[NSData dataWithContentsOfFile:[fullPath stringByReplacingOccurrencesOfString:@"\\" withString:@"/"]]];
        imageView1.contentMode = UIViewContentModeScaleAspectFit;

        UIImageView *imageView2 = [[[UIImageView alloc] initWithFrame:CGRectMake(lanWidth*i +5, 0, 1015, 620)] autorelease];
        imageView2.tag = lanImage+i;

        NSString *tempPath = [self.documentsDirectory stringByAppendingPathComponent:[NSString stringWithFormat:@"%@",cat.landscapImage]];
        NSString *str = [tempPath stringByReplacingOccurrencesOfString:@"\\" withString:@"/"];

        NSLog(@"imageView1 fullPath = %@",str);
        imageView2.image = [UIImage imageWithData:[NSData dataWithContentsOfFile:str]];} 
```

我认为存在一些内存泄漏问题。如果有人有任何解决方案，请提供帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T06:42:24.323

这大约是 350MB 的图像。你没有内存泄漏，你只是使用了太多的内存。这是移动设备，而不是台式计算机，您可用的资源是有限的。

您不应该一次加载所有图像，您应该在滚动内容时动态加载它们。查看 Apple 提供的示例代码`UIScrollView`，了解如何使用平铺来实现此目的。

# curses - 跨多个子进程共享 perl 诅咒 UI 对象变量

> ID：10292795
> 
> 赞同：0
> 
> 时间：2012-04-24T06:29:37.513
> 
> 标签：curses

我正在编写一个产生多个子进程的工具。事实上 3 级子进程来加速整个逻辑/进程。

为了在终端中显示输出，我选择了 Curses::UI。curses ui 对象/小部件在父/子关系的每个级别创建，并在子进程的最后一级进行操作。这种多层次的子进程似乎导致了curses显示的问题。

我认为如果我在所有子/父进程中只共享一个 curses ui 对象，它会很稳定。

为了实现这种共享，我正在尝试使用 Storable/Shareable 模块，但由于以下错误而无法使其运行：

quicode sub { │ │ 退出；│ │ } 导致错误：在（eval 99）第 2 行，my_curser.pl 第 147 行，操作掩码捕获了“退出” │ 代码子 {──────────────── ────────────────────────────────────────────────── ────────────────────────────────────────────────── ────────────────────────────────────────────────── ──────────┘ 退出；导致错误：在 my_curser 处 (eval 99) 第 2 行的操作掩码捕获了“退出”。

是否可以跨多个进程共享 curses ui 对象？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T06:34:49.147

`curses`依赖于 C 和终端或终端仿真器状态，即使从 C 也不能在进程之间可靠地共享，并且对于 Perl 包装器（例如`UI::Curses`. （终端只有一个“当前位置”/光标位置；考虑如果不同的子进程尝试同时更新显示的不同部分的小部件会发生什么。）因此，您无法在子进程之间共享这些小部件.

一般来说，更好的设计是将线程或进程专用于 UI，并将处理的其他方面分配给其他线程/进程。

# visual-c++ - 这个 cuda“cudaMallocPitch”代码的 openCL 等效项是什么？

> ID：10292801
> 
> 赞同：0
> 
> 时间：2012-04-24T06:30:37.840
> 
> 标签：visual-c++, opencl, gpu, amd-processor

我的 PC 有一个 AMD 处理器和一个不支持 OpenCL 的 ATI 3200 GPU。其余代码全部通过“回退到 CPU 本身”运行。

我正在将其中一个代码从 CUDA 转换为 OpenCL，但停留在 OpenCL 中没有确切转换代码的某些特定部分。因为我在 OpenCL 方面的经验较少，所以我无法弄清楚这一点，如果你们中的任何人认为可行，请建议我一些解决方案，

CUDA 代码是，

```
size_t pitch = 0;   
cudaError error = cudaMallocPitch((void**)&gpu_data, (size_t*)&pitch, 
                          instances->cols * sizeof(float), instances->rows);

for( int i = 0; i < instances->rows; i++ ){ 
    error = cudaMemcpy((void*)(gpu_data + (pitch/sizeof(float))*i), 
                       (void*)(instances->data + (instances->cols*i)), 
                       instances->cols * sizeof(float) ,cudaMemcpyHostToDevice); 
```

如果我从上面删除音高值，我最终会遇到一个不写入设备内存“gpu_data”的问题。

有人请将此代码转换为 OpenCL 并回复。我已将其转换为 OpenCL，但它无法正常工作并且数据未写入“gpu_data”。我转换后的 OpenCL 代码是

```
gpu_data = clCreateBuffer(context, CL_MEM_READ_WRITE, ((instances->cols)*(instances->rows))*sizeof(float), NULL, &ret);
for( int i = 0; i < instances->rows; i++ ){ 
    ret = clEnqueueWriteBuffer(command_queue, gpu_data, CL_TRUE, 0, ((instances->cols)*(instances->rows))*sizeof(float),(void*)(instances->data + (instances->cols*i)) , 0, NULL, NULL); 
```

有时它在这段代码中运行良好并且卡在阅读部分，即

```
ret = clEnqueueReadBuffer(command_queue, gpu_data, CL_TRUE, 0,sizeof( float ) * instances->cols* 1 , instances->data, 0, NULL, NULL); 
```

这边。它给出了类似的错误

> CL_kmeans.exe 中 0x10001098 处的未处理异常：0xC000001D：非法指令。

当按下 break 时，它给出：

> 没有为任何调用堆栈帧加载符号。无法显示源代码。

调试时。在调用堆栈中显示：

> OCL8CA9.tmp.dll!10001098()
> [下面的帧可能不正确和/或丢失，没有为 OCL8CA9.tmp.dll 加载符号]
> amdocl.dll!5c39de16()

我真的不知道这意味着什么。有人请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-05T18:45:51.220

首先，在 CUDA 代码中，复制数据的效率非常低。CUDA 运行时具有`cudaMemcpy2D`通过循环遍历不同行来执行您尝试执行的操作的功能。

什么`cudaMallocPitch`是计算最佳间距（= 2D 数组中行之间的字节距离），使得每个新行都从一个最适合合并的地址开始，然后分配一个内存区域，该内存区域与间距乘以行数一样大你指定。您可以在 OpenCL 中模拟同样的事情，首先计算最佳音高，然后分配正确的尺寸。

最佳间距通过 (1) 获取卡的基地址对齐首选项来计算（使用 clGetDeviceInfo 的 CL_DEVICE_MEM_BASE_ADDR_ALIGN 属性：请注意，返回值以位为单位，因此您必须除以 8 才能以字节为单位）；让我们称之为（2）找到不小于自然数据间距`base`的最大倍数（sizeof（type）乘以列数）；`base`这将是你的`pitch`。

然后，您分配`pitch`行字节数，并将`pitch`信息传递给内核。

此外，当将数据从主机复制到设备时，您希望使用`clEnqueue{Read,Write}BufferRect`专门设计用于复制 2D 数据的 （它们是 的对应物`cudaMemcpy2D`）。

# javascript - PhotoSwipe JS 库，删除特定的事件处理程序

> ID：10292802
> 
> 赞同：0
> 
> 时间：2012-04-24T06:30:45.687
> 
> 标签：javascript

在[PhotoSwipe](https://github.com/codecomputerlove/PhotoSwipe/blob/master/src/photoswipe.class.js) JavaScript 图片库中，有没有办法删除特定的事件处理程序？我发现您可以删除所有，但我发现无法按名称删除。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T06:28:57.363

试试这个 [https://github.com/codecomputerlove/PhotoSwipe/issues/243](https://github.com/codecomputerlove/PhotoSwipe/issues/243)

# perl - 我们可以从同一个期望脚本启动两个 ssh 终端吗

> ID：10292803
> 
> 赞同：0
> 
> 时间：2012-04-24T06:31:04.670
> 
> 标签：perl, perl-module, expect

我正在使用 perl 模块“Expect”来实现交互式会话的自动化。该脚本打算在本地主机上生成一个 ssh 终端（比如说）。所以问题是可以从同一个脚本中使用两个生成命令（用于生成两个 ssh 终端）。在这种情况下，两个衍生进程如何共享 ssh 终端。我发现两个生成的命令实际上共享 ssh 终端。所以终端上的用户界面实际上是凌乱的。上面的说法是真的吗？

问题 1）如果为真，是否有更好的方法来控制生成的进程以访问 ssh 终端。

场景：1）说 perl 脚本“demo.pl”有两个生成命令，它们确实在本地生成一个 ssh 终端。2) 生成的进程实际上共享执行 perl 脚本的 ssh 终端。

问题 2) 那么有没有办法启动一个全新的 ssh 终端，而不是使用现有的终端。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T06:57:47.313

终端仿真器`ssh`是不同的程序。您可以生成单独的终端，每个终端都包含一个`ssh`命令 - 但无法通过脚本与它们进行交互，因为终端正在处理与其包含的通信`ssh`，而不是使其可用于您的脚本。

您在此处的选择是使用 Perl 小部件包或在“从属”模式下使用终端仿真器（例如，请参见`-S`选项`xterm`）——无论哪种情况，您都需要分别跟踪每个 spawnid 的输入和输出，并且将其定向到适当的小部件或模拟器。

# sql - 当我运行以下存储过程时，有时会出现超时错误

> ID：10292806
> 
> 赞同：0
> 
> 时间：2012-04-24T06:31:11.817
> 
> 标签：sql, sql-server-2005, stored-procedures, timeout, cursor

```
 ALTER PROCEDURE [dbo].[INVM_InventoryValuationForIssue]
        @TransDate datetime,

        @IssueFrmDocType varchar(10),
        @IssueFrmDocNo numeric(18,0),
        @IssueFrmDocDate datetime,

        @FormType char(1),
        @ItemCode varchar(25),
        @ItemDesc varchar(250),
        @Qty numeric(18,6),
    --  @Price numeric(18,6),
        @WhCode nvarchar(25),
        @WhLoc nvarchar(25),
        @CmpyName nvarchar(50),
        @DiscountAmount numeric(18,6),
        @BaseDocType varchar(10),
        @BaseDocNo numeric(18,0),
        @BaseDocDate datetime
    AS
    BEGIN 
        declare @transnum numeric(18,0)
        --Variables for Moving Avg
        declare @MACumQty numeric(18,6)
        declare @MACumValue numeric(18,6)
        declare @MACumValue1 numeric(18,6)
        declare @MACumValue2 numeric(18,6)
        declare @AvgPriceMA numeric(18,6)
        declare @MAPrice numeric(18,6)

        --Variables for Moving Avg
        declare @FIFOCumQty numeric(18,6)
        declare @FIFOCumValue numeric(18,6)
        declare @FIFOCumValue1 numeric(18,6)
        declare @FIFOCumValue2 numeric(18,6)
        declare @AvgPriceFIFO numeric(18,6)
        declare @TransValue numeric(18,6)

        --Variables for Standard Cost
        declare @STDCumQty numeric(18,6)
        declare @STDCumValue numeric(18,6)
        declare @STDCumValue1 numeric(18,6)
        declare @STDCumValue2 numeric(18,6)
        declare @AvgPriceSTD numeric(18,6)
        declare @dummy numeric(18,0)
        declare @dummy1 numeric(18,0)
        -- Other Local Variables
        declare @CumQty numeric(18,6)
        declare @CumValue numeric(18,6)
        declare @ValMth char(1)

    --  declare @BaseDocType varchar(10)
    --  declare @BaseDocNo numeric(18,0)
    --  declare @BaseDocDate datetime

        declare @TransQty numeric(18,6)
        declare @TransQty1 numeric(18,6)
        declare @PendingQty numeric(18,6)
        declare @InsertQty numeric(18,6)
        declare @Total numeric(18,6)

    --  select @transnum = 1 
        DECLARE SrNo CURSOR FOR SELECT isnull(Max(TransNum),0)+1  FROM INVM
        OPEN SrNo
        FETCH NEXT FROM SrNo INTO @transnum
        CLOSE SrNo
        DEALLOCATE SrNo

    --  FOR MOVING AVG METHOD

        -- Transaction Qty is assigned to Pending Qty variable 
        -- because looping is performed on that
        SELECT @PendingQty = @Qty

        WHILE @PendingQty > 0
            BEGIN
                If (@BaseDocType = ''  or @BaseDocType is null)
                    Begin
                        DECLARE Trans CURSOR FOR SELECT TransQty,BaseDocNo,BaseDocType,BaseDocDate FROM INVM WHERE ItemCode=@ItemCode and ValMethod='M' and TransQty>0 and Status is null ORDER BY transnum
                        OPEN Trans
                        FETCH NEXT FROM Trans INTO @TransQty,@BaseDocNo,@BaseDocType,@BaseDocDate
                    End
                Else 
                    Begin
                        DECLARE Trans CURSOR FOR SELECT TransQty,TransValue,BaseDocNo,BaseDocType,BaseDocDate FROM INVM WHERE ItemCode=@ItemCode and ValMethod='M' and BaseDocNo=@BaseDocNo and BaseDocType=@BaseDocType and BaseDocDate=@BaseDocDate ORDER BY transnum
                        OPEN Trans
                        FETCH NEXT FROM Trans INTO @TransQty,@TransValue,@BaseDocNo,@BaseDocType,@BaseDocDate
                    End

                DECLARE MAQty1 CURSOR FOR SELECT isnull(sum(TransQty),0)  from INVM Where ItemCode=@ItemCode and ValMethod='M' and BaseDocNo=@BaseDocNo and BaseDocType=@BaseDocType and BaseDocDate=@BaseDocDate 
                OPEN MAQty1
                FETCH NEXT FROM MAQty1 INTO @TransQty1          

                IF @PendingQty < isnull(@TransQty1,0) -- If Transaction Qty is less then CumQty.
                    BEGIN                   
                        SELECT @InsertQty=  @PendingQty * -1
                        -- Setting Pending Qty as 0 be                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          cause complete qty will be issued from transqty
                        SELECT @PendingQty=0        
                    END
                IF @PendingQty > isnull(@TransQty1,0)
                    BEGIN
                        SELECT @PendingQty=(@PendingQty - isnull(@TransQty1,0))
                        SELECT @InsertQty= @TransQty1 * -1                                      
                    END
                IF @PendingQty = isnull(@TransQty1,0)
                    BEGIN
                        SELECT @PendingQty = 0
                        SELECT @InsertQty = isnull(@TransQty1,0) * -1                                           
                    END

                IF @InsertQty <> 0 
                    Begin   
                        --FETCH THE PRICE FROM WAREHOUSE MASTER                 
                        DECLARE MAPrice CURSOR FOR SELECT AvgCost from INI1 Where ItemCode=@ItemCode and WhCode=@WhCode 
                        OPEN MAPrice
                        FETCH NEXT FROM MAPrice INTO @MAPrice
                        if isnull(@TransValue,0)>0
                            BEGIN
                                SELECT @Total = @InsertQty  * @TransValue
                                Select @MAPrice=@TransValue
                            End
                        else
                            Begin
                                SELECT @Total = @InsertQty  * isnull(@MAPrice ,0)
                            End

                        --FIND THE CUMULATIVE
                        DECLARE MAcumqty CURSOR FOR SELECT isnull(sum(TransQty),0) from INVM Where ItemCode=@ItemCode and ValMethod='M'
                        OPEN MAcumqty
                        FETCH NEXT FROM MAcumqty INTO @MACumQty

                        -- Other Documents except Invocie
                        DECLARE MAcumvalue CURSOR FOR select isnull(sum(TransTotal),0) from INVM Where ItemCode=@ItemCode and ValMethod='M' and BaseDocType<>'PUIH'
                        OPEN MAcumvalue
                        FETCH NEXT FROM MAcumvalue INTO @MACumValue

                        -- If Invoice Entry has difference amount
                        DECLARE MAcumvalue1 CURSOR FOR SELECT isnull(sum(DiffAmount),0) from INVM Where ItemCode=@ItemCode and ValMethod='M' and BaseDocType='PUIH'
                        OPEN MAcumvalue1
                        FETCH NEXT FROM MAcumvalue1 INTO @MACumValue1

                        -- Entries which are done directly from AP invoice
                        DECLARE MAcumvalue2 CURSOR FOR SELECT isnull(sum(TransTotal),0) from INVM Where ItemCode=@ItemCode and ValMethod='M' and BaseDocType='PUIH' and TransQty>0
                        OPEN MAcumvalue2
                        FETCH NEXT FROM MAcumvalue2 INTO @MACumValue2

                        select @CumQty = isnull(@MACumQty,0) + @InsertQty
                        select @CumValue = isnull(@MACumValue,0) + isnull(@MACumValue1,0) + isnull(@MACumValue2,0) + @Total 
                        IF @CumQty > 0 
                            BEGIN
                                if @CumValue >0
                                    BEGIN
                                        select @AvgPriceMA = @CumValue / @CumQty
                                    END
                                Else 
                                    BEGIN
                                        select @AvgPriceMA=0
                                    END
                            END
                        ELSE
                            BEGIN
                                select @AvgPriceMA=0
                        END

                        -- INSERT THE SAME IN TABLE 
                        INSERT INTO INVM(TransNum,TransDate,BaseDocType,BaseDocNo,BaseDocDate,IssueFrmDocType,IssueFrmDocNo,IssueFrmDocDate,FormType,ItemCode,ItemDesc,
                                     TransQty,TransValue,TransTotal,CumtQty,CumtMA,AvgPrice,WhseCode,WhseLoc,ValMethod,CmpyName,DiscountAmount)
                               VALUES(@transnum,@TransDate,@BaseDocType,@BaseDocNo,@BaseDocDate,@IssueFrmDocType,@IssueFrmDocNo,@IssueFrmDocDate,@FormType,
                                  @ItemCode,@ItemDesc,@InsertQty,@MAPrice,@Total,
                                  @CumQty,@CumValue,@AvgPriceMA,@WhCode,@WhLoc,'M',@CmpyName,@DiscountAmount)

                        --UPDATE LINE STATUS    
                        DECLARE MAQty CURSOR FOR SELECT isnull(sum(TransQty),0)  from INVM Where ItemCode=@ItemCode and ValMethod='M' and BaseDocNo=@BaseDocNo and BaseDocType=@BaseDocType and BaseDocDate=@BaseDocDate 
                        OPEN MAQty
                        FETCH NEXT FROM MAQty INTO @TransQty1
                        IF isnull(@TransQty1,0) = 0 
                            BEGIN
                                UPDATE INVM SET Status='C' Where ItemCode=@ItemCode and ValMethod='M' and BaseDocNo=@BaseDocNo and BaseDocType=@BaseDocType and BaseDocDate=@BaseDocDate and IssueFrmDocDate is null
                                select @BaseDoctype=''
                            END

                -- Close the variables
                CLOSE MAcumqty
                DEALLOCATE MAcumqty 

                CLOSE MAcumvalue
                DEALLOCATE MAcumvalue   

                CLOSE MAPrice
                DEALLOCATE MAPrice  

                CLOSE MAcumvalue1
                DEALLOCATE MAcumvalue1

                CLOSE MAcumvalue2
                DEALLOCATE MAcumvalue2  

                CLOSE MAQty
                DEALLOCATE MAQty

                select @transnum = @transnum + 1

            END
            CLOSE Trans
            DEALLOCATE Trans

            CLOSE MAQty1
            DEALLOCATE MAQty1

            SELECT @PendingQty = @PendingQty
        END

        --  select @transnum = @transnum + 1

        --FETCH THE VALUATION METHOD FROM ITEM MASTER                   
        DECLARE ItemCost CURSOR FOR SELECT ValuMth from INIM Where ItemCode=@ItemCode 
        OPEN ItemCost
        FETCH NEXT FROM ItemCost INTO @ValMth

        -- Update the Avg Price in Master's.
        if @ValMth='M' 
            BEGIN 
                Update INI1 Set AvgCost=@AvgPriceMA Where ItemCode=@ItemCode
                Update INIM Set AvgCost=@AvgPriceMA Where ItemCode=@ItemCode
            END
        CLOSE ItemCost
        DEALLOCATE ItemCost
    END 
```

我该如何处理？它并不总是发生，只是有时。我写错了什么可以进入无限循环吗？我无法理解它的问题，因为有时它也会立即执行 40 多个项目，有时仅对 1 个项目执行超时错误。

请

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T14:08:59.053

如果过程正在处理的数据集因您传入的参数值而异，您可以尝试在此处查看有关参数嗅探的答案：[SQL Server 中的参数嗅探（或欺骗）](https://stackoverflow.com/questions/211355/parameter-sniffing-or-spoofing-in-sql-server)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T06:50:14.190

您必须调试它没有选项，应用日志记录并查看

谢谢阿比

# c# - C#中的多线程CPU使用率

> ID：10292807
> 
> 赞同：15
> 
> 时间：2012-04-24T06:31:27.880
> 
> 标签：c#, multithreading, cpu-usage

我的程序使用预定数量的线程，每个线程都独立工作。我使用 i7-2600 CPU，但我关闭了超线程模块，因此它在 4 个内核上运行 4 个线程。当我用 1 个线程运行程序时，CPU 使用率为 25%，这是完美的，因为 1 个线程已被完全使用，但是当我运行 4 或 3 个线程时，我只得到 60% 的 CPU，为什么？

就像我之前提到的那样，线程是完全独立的（没有锁也没有争用），当我用 1 个线程运行程序 4 次时，我得到 100% 的 CPU 使用率（即，当每个进程的 1 个线程的 4 个进程我得到正确的CPU使用率）

有任何想法吗？

更多信息：

1.  在处理所有需要的数据时我没有使用 I/O，所有需要的数据都加载到内存中，每个线程在处理之前加载自己的数据。
2.  我确实从数据库加载数据（使用 oleDb），但我描述的问题发生在加载之后，而所有线程都在处理（没有加载完成）。
3.  数字是：
    *   2 个线程大约 40% 而不是 50 个（每个线程 85%）。
    *   3 个线程大约 50% 而不是 75 个（每个线程 65%）。
    *   4 个线程大约 60% 而不是 100 个（每个线程 60%）。
4.  我使用具有 16GB 内存的 i7 2600，但该进程的内存使用量并不接近。
5.  我运行 Windows 性能监视器来查找没有争用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T08:04:55.607

您可以尝试将程序从工作站转移到服务器垃圾收集模式。目前您可能只使用一个垃圾回收线程。[此处](http://msdn.microsoft.com/en-us/library/bb680014.aspx)
解释了设置。有关解释/更多详细信息， 请参阅此[线程。](https://stackoverflow.com/questions/1707240/should-we-use-workstation-garbage-collection-or-server-garbage-collection) 不要期望更改后 100% 的 CPU 负载，但您会接近 100% 并增加它的速度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T08:15:50.207

[并发可视化工具](http://msdn.microsoft.com/en-us/magazine/ee336027.aspx)将在这里为您提供帮助。您将看到每个线程何时执行，如果所有线程都没有执行，您可以确切地看到特定线程等待的原因。如果您生成大量垃圾，GC 可能会使线程阻塞，从而导致小于线性缩放。但是你只有通过真正的调查才能发现。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-24T10:46:15.530

我在使用 .NET Framework v2.0 时遇到了同样的问题，然后我将项目目标框架更改为 v4.0，它以 100% CPU 负载开始

编辑：您可以查看每个线程的 CPU 使用情况，只需使用

[Sysinternals 进程浏览器](http://technet.microsoft.com/en-us/sysinternals/bb896653.aspx)

或者

[进程黑客](http://processhacker.sourceforge.net/)

# android - 电子邮件发送和/或阅读报告

> ID：10292811
> 
> 赞同：1
> 
> 时间：2012-04-24T06:31:47.373
> 
> 标签：android, email

Android 应用程序可以收到短信发送的响应。是否可以获得电子邮件发送和/或电子邮件阅读报告（回复）？

我似乎在开发者文档中找不到这个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T06:41:30.593

据我所知，没有任何东西可以将信息返回给 ActivityResult，这可以说明电子邮件是否正确发送或用户取消或保存为草稿。

尽管我从未尝试过详细了解。

所以我的答案是否定的

# c# - 从 WAV 文件中检索振幅数组，不返回完整数据

> ID：10292815
> 
> 赞同：0
> 
> 时间：2012-04-24T06:31:53.543
> 
> 标签：c#, audio, signal-processing, sound-recognition, music-notation

我正在写一篇关于和弦检测的论文。经过努力，我发现问题的根源在于使用基于 C# 的程序获取 wav 文件的幅度。

我用这个代码来检索幅度：

```
public WavProcessing(String fileNameWithPath)
        {
            _fileNameWithPath = fileNameWithPath;

        }
public void Initialization()
        {
            AssignWaveHeaderData();
            streamBuffer = File.ReadAllBytes(_fileNameWithPath);
            fftBufferSize = 16384;
            fftBufferSize2 = fftBufferSize / 2;

        }
private void getAmplitude()
        {
            waveData = new short[numOfSamples];
            var xsample = new short[numOfSamples];
            var x = 0;
            var str = "";

            for (var i = 44 ; i <= waveData.Length; i = i + 2) //44 because the wave data          starts at 44th byte.
            {
               waveData[x] = BitConverter.ToInt16(streamBuffer,i);
               x++;

            }

    } 
```

代码起初运行良好，我将它与基于 delphi 的程序进行了比较，该程序也是一个和弦检测程序。但我没有注意到的是，我的代码实际上只检索了一半的振幅数组。

例如：我将 Chord C wav 文件加载到我的 C# 程序中，我得到了这样的振幅数组

```
[0] -279
[1] -262
[2] -231
[3] -216
[4] -199
[5] -185
[6] -178
[7] -186
[8] -217
[9] -237
[10] -267
[11] -298
[12] -319
[13] -348
[14] -374
[15] -373
[16] -376
[17] -366
[18] -357
[19] -340
[20] -319
[21] -312
[22] -300
[23] -301
[24] -308
[25] -321
[26] -339
...
[361042] 1950
[361043] 0
[361044] 0
...
[722128] 0 
```

你可以看到开始 361043-rd 数组，它只返回零......它大约只有完整流大小的一半（722128）

同时在某人的delphi程序中（我以此作为参考），其代码如下：

```
procedure TForm1.openfilewave(NamaFile : string);
var
  Stream : TFileStream;
  i, start, endwave : Integer;
begin
  Application.ProcessMessages;
  Stream := TFileStream.Create(FileName, fmOpenRead);
  FillChar(wavehdr, SizeOf(wavehdr), 0);
  Stream.Read(wavehdr, SizeOf(wavehdr));

  SetLength(wavedata[0].Data, Round(wavehdr.chunkSize/wavehdr.BytesPerSample));

  for i := 0 to High(wavedata[0].Data) do
          begin
            Stream.Read(wavedata[0].Data[i], 2);
          end;
  end; 
```

返回完整的振幅数组（相同的 wav 文件），例如：

```
0 -- -279
1 -- -262
2 -- -231
3 -- -216
4 -- -199
5 -- -185
6 -- -178
7 -- -186
8 -- -217
9 -- -237
10 -- -267
11 -- -298
12 -- -319
13 -- -348
14 -- -374
15 -- -373
16 -- -376
17 -- -366
18 -- -357
19 -- -340
20 -- -319
...
361042 -- 1950
361043 -- 1819       << not returning zero value
361044 -- 1655
361045 -- 1476
...
722100 -- 165
722101 -- 142
722102 -- 117
722103 -- 91
722104 -- 68
722105 -- 37
722106 -- 11
722107 -- -6
722108 -- -27
722109 -- -36
722110 -- 0
722111 -- 0
...
722128 -- 0 
```

在那个 delphi 程序中，返回完整的振幅数组，为下一次计算产生正确的值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T07:25:33.757

这就是问题：

```
for (var i = 44; i <= waveData.Length; i = i + 2)
{
   waveData[x] = BitConverter.ToInt16(streamBuffer,i);
   x++;
} 
```

`waveData`是大小的一半`streamBuffer`- 您应该使用：

```
for (var i = 44; i < streamBuffer.Length; i = i + 2) 
```

或者也许像这样简化一些事情，只使用一个变量：

```
for (int x = 0; x < waveData.Length; x++)
{
   waveData[x] = BitConverter.ToInt16(streamBuffer, x * 2 + 44);
} 
```

# apache-flex - 如何获取标签元素在列表中的位置，关于flex mobile

> ID：10292817
> 
> 赞同：0
> 
> 时间：2012-04-24T06:31:55.153
> 
> 标签：apache-flex, list, mobile, position, itemrenderer

我想获取标签元素在列表中的位置，

但我明白了`8 0 8 0 (Global position)x:8,y:0`

那是不对的，我该怎么办，谢谢

这是我的代码：

```
<?xml version="1.0" encoding="utf-8"?>
<!-- http://www.myflexhero.com/share/flex-hero-flex4/flex-hero-components/flex-hero-graphics/822 -->
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009"
               xmlns:s="library://ns.adobe.com/flex/spark"
               xmlns:mx="library://ns.adobe.com/flex/mx"
               >
    <fx:Script>
        <![CDATA[
            import mx.core.UIComponent;

        protected function getListChildAt(part:List,n:int):Label {
            var child:UIComponent = part.dataGroup.getChildAt(n) as UIComponent;
            var child_1:Label =  child.getChildAt(0) as Label;
            return child_1;
        }

        protected function show():void
        {
            var item:Label = getListChildAt(myList,0) as Label;
            var item2:Label = getListChildAt(myList,2) as Label;
            var p:Point = new Point(item.x,item.y);
            p = item.localToGlobal(p);
            var p2:Point = new Point(item2.x,item2.y);
            p2 = item.localToGlobal(p2);

            //globalLabel.text = "(Global image)x:"+p.x+",y:"+p.y;
            trace(p.x,p.y,p2.x,p2.y,"(Global position)x:"+p.x+",y:"+p.y);

        }
        protected function myList_changeHandler(event:Event):void{

        }
    ]]>
</fx:Script>
<s:List id="myList"
        width="100%" height="100%"
        labelField="firstName"
        change="myList_changeHandler(event)">

    <s:layout>
        <s:TileLayout requestedColumnCount="4" columnWidth="80" horizontalAlign="center" verticalAlign="middle"  />
    </s:layout>
    <s:dataProvider>
        <s:ArrayCollection>
            <fx:Object firstName="Bill" lastName="Smith" companyID="11233"/>
            <fx:Object firstName="Dave" lastName="Jones" companyID="13455"/>
            <fx:Object firstName="Mary" lastName="Davis" companyID="11543"/>
            <fx:Object firstName="Debbie" lastName="Cooper" companyID="14266"/>
        </s:ArrayCollection>
    </s:dataProvider>

    <s:itemRenderer>
        <fx:Component>
            <s:ItemRenderer>
                <s:Label   text="{data.lastName}"/>
            </s:ItemRenderer>
        </fx:Component>
    </s:itemRenderer>
</s:List>

    <s:VGroup >
        <s:Label id="image1" text="ssss" />
        <s:Button click="show()" label="show Global x、y"/>
    </s:VGroup>

</s:Application> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T08:06:30.803

```
 var item:UIComponent = getListChildAt(myList,2);
            var item2:UIComponent = getListChildAt(myList,0);
            p = new Point(item.parent.x,item.parent.y);
            p = myList.localToGlobal(p);
            p2 = new Point(item2.parent.x,item2.parent.y);
            p2 = myList.localToGlobal(p2);

            var a:Rectangle =  item2.getBounds(root);
            trace(a.x); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T07:54:31.357

```
<?xml version="1.0" encoding="utf-8"?> 
```

```
 protected function getListChildAt(part:List,n:int):UIComponent {
            var child:UIComponent = part.dataGroup.getChildAt(n) as UIComponent;
            var child_1:UIComponent =  child.getChildAt(0) as UIComponent;
            trace(child_1.parent == child)
            return child_1 ;
        }

        protected function show():void
        {
            var item:UIComponent = getListChildAt(myList,2);
            var item2:UIComponent = getListChildAt(myList,0);
            p = new Point(item.parent.x,item.parent.y);
            p = myList.localToGlobal(p);
            p2 = new Point(item2.parent.x,item2.parent.y);
            p2 = myList.localToGlobal(p2);

            mover.play()
        }
        protected function myList_changeHandler(event:Event):void{

        }

    ]]>
</fx:Script>
<s:List id="myList" x="40" y="55" width="400" height="100" change="myList_changeHandler(event)"
        labelField="firstName">

    <s:layout>
        <s:TileLayout requestedColumnCount="4" columnWidth="80" horizontalAlign="center" verticalAlign="middle"  />
    </s:layout>
    <s:dataProvider>
        <s:ArrayCollection>
            <fx:Object firstName="Bill" lastName="Smith" companyID="11233"/>
            <fx:Object firstName="Dave" lastName="Jones" companyID="13455"/>
            <fx:Object firstName="Mary" lastName="Davis" companyID="11543"/>
            <fx:Object firstName="Debbie" lastName="Cooper" companyID="14266"/>
        </s:ArrayCollection>
    </s:dataProvider>

    <s:itemRenderer>
        <fx:Component>
            <s:ItemRenderer>
                <s:Label  text="{data.lastName}" width="70" height="30"/>
            </s:ItemRenderer>
        </fx:Component>
    </s:itemRenderer>
</s:List>

<fx:Declarations>
    <!-- Place non-visual elements (e.g., services, value objects) here -->
    <s:Animate id="mover" target="{button}" duration="1000">
        <s:SimpleMotionPath property="x" valueFrom="{p.x}" valueTo="{p2.x}"/>
        <s:SimpleMotionPath property="y" valueFrom="{p.y}" valueTo="{p2.y}"/>
    </s:Animate>
</fx:Declarations>
<s:Button id="button"  click="mover.play()" label="" width="70"/>

<s:Label id="image1" x="0" y="0" text="ssss" backgroundColor="red"/>
<s:Button x="27" y="100" label="show Global x、y" click="show()"/> 
```

# magento - Magento 企业版到社区版

> ID：10292820
> 
> 赞同：1
> 
> 时间：2012-04-24T06:32:03.063
> 
> 标签：magento

如果我购买企业版，如果我不想得到 magento 团队的任何支持，是否需要每年支付这笔费用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T10:13:13.210

Afaik 是的，即使您*不想*获得支持或*不使用*支持，您仍然必须支付全部许可费用（截至撰写本文时，单个 EE 生产服务器每年 14,420 美元）。

当然，您可以联系他们的销售团队并尝试进行自己的交易。看看过去几年 EE 的价格上涨（EE 起价为每年 8,900 美元，现在是 14,420 美元）我不相信还有余地，但在你问之前你永远不会知道^^

# c++ - 渲染 Qt / Qml

> ID：10292823
> 
> 赞同：0
> 
> 时间：2012-04-24T06:32:14.157
> 
> 标签：c++, qt, opengl, rendering, qml

我在我的 qml 应用程序中一直在做这样的事情：

```
QWidget w;
QmlApplicationViewer viewer(&w);
viewer.setOrientation(QmlApplicationViewer::ScreenOrientationAuto);
viewer.setMainQmlFile(QLatin1String("qml/GuiApp1/main.qml"));
viewer.showExpanded();
w.show(); 
```

Q1。有人可以就内部涉及的实际渲染步骤给出一个想法。

Q2。我的要求是所有 qml 部分（所有应用程序逻辑和 gui 绘图）都应在 Application_1 中处理，但在此应用程序中不应发生实际渲染。

还有另一个 Application_2 应该为 Application_1 进行渲染（它可以只是 Qt 渲染功能的包装器）。如果此过程需要，Application_1 可以与 Application_2 共享一些关于其自身的信息（如窗口句柄或其他东西）。

有人可以提供有关如何进行此操作的想法。

# java - Java：低延迟性能测量

> ID：10292827
> 
> 赞同：4
> 
> 时间：2012-04-24T06:32:39.340
> 
> 标签：java, performance, garbage-collection, low-latency

测量低延迟 Java 应用程序性能的过程与测量非低延迟 Java 应用程序性能的过程是否不同？如果是，如何实现，是否有任何特定工具用于测量低延迟性能？

编辑：例如，这是一条具体的信息：[http ://www.artima.com/forums/flat.jsp?forum=121&thread=212810](http://www.artima.com/forums/flat.jsp?forum=121&thread=212810)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-24T07:18:33.137

低延迟时间的主要区别在于

*   每一微秒都很重要。您将了解每年每微秒的最大成本，以及减少每微秒所需的时间。
*   您想测量最高 99% 甚至 99.99% 的延迟。（最差分别为 1% 或 0.01%）
*   您想要一个快速时钟，通常仅限于一台主机，甚至是一个插槽。（您可以使用专业硬件测量主机之间的低延迟）对于多毫秒的时间，您可以相对容易地测量主机之间的时间（仅配置 NTP）
*   你想尽量减少垃圾，尤其是在你的测量中。
*   您很可能需要开发嵌入到应用程序中并在生产中运行的应用程序特定工具。您可以使用分析器作为开始，但大多数超低延迟应用程序在商业分析器中没有显示任何有用的东西（它们也没有太多 GC，如果在运行时有的话）

您可以阅读我的博客，了解一般的低延迟、高性能测试实践（其中一些是基于纳秒的）。[香草爪哇](http://vanillajava.blogspot.co.uk/)

# testing - 确保 windows 媒体播放器？

> ID：10292831
> 
> 赞同：0
> 
> 时间：2012-04-24T06:32:48.177
> 
> 标签：testing, automated-tests

现在我正在从事一个自动化项目。在那我有一个测试用例，测试用例是我必须确保一个 Windows 媒体播放器。我尝试了很多，但我无法..

帮帮我，我在项目截止日期。

提前致谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T07:03:21.630

```
final String wmp = "C:\\Program Files\\Windows Media Player\\wmplayer.exe"; 
```

运行 WMP

```
Runtime.exec(wmp); 
```

或确保该路径存在...

```
System.out.println(new File(wmp).exists()); 
```

当然，在 Windows XP 上也是如此，您可能需要为 x64 Windows 或 Windows Vista+ 调整路径。这可能有助于以下原因：

```
final String os = System.getProperty("os.name") + " " + System.getProperty("os.arch");
System.out.println(os); 
```

# cakephp - 如何编写加载到具有对象的类的供应商并且可以在 Cake php 中的每个类方法中访问？

> ID：10292833
> 
> 赞同：0
> 
> 时间：2012-04-24T06:33:18.320
> 
> 标签：cakephp, cakephp-1.3

如何编写加载到具有对象的类并在每个类方法中可访问的供应商？

```
App::import('Vendor', 'facebook', array('file' => 'facebook/facebook.php'));
    $facebook = new Facebook(array(
      'appId'  => XXXXXXXXX,
      'secret' => XXXXXXXXXXXXXXX,
    ));

class test_controller {

 function A() {
    $facebook->showUser() 
 }
 function B() {
    $facebook->showUser();
 }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T06:50:29.470

在 bootstrap.php 中初始化它，然后就可以了。

# wix - 在安装时在 msi (wxs) 中提取环境变量

> ID：10292834
> 
> 赞同：1
> 
> 时间：2012-04-24T06:33:23.890
> 
> 标签：wix, windows-installer

我的想法是提取环境变量的值`ZEN_HOME`并在安装时将其分配给变量`MyInstallDir`，如果未设置，则使用其他值设置变量`ProgramFileFolder`。

我面临的错误是，编译时的 wxs 正在搜索值，而不是安装时间。

如何确保在安装时而不是编译时提取值？

```
<?if %ZEN_HOME% != "" ?>
    <?define MyInstallDir = %ZEN_HOME% ?>
<?else?>
    <?define MyInstallDir="ProgramFilesFolder" ?>
<?endif?> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-24T07:36:24.923

正如您正确提到的，在预处理期间，您尝试执行的操作将在编译时执行。您不能在安装时利用 WiX 变量 - 它完全是 WiX 自定义概念，Windows Installer 对此一无所知。

因此，如果我正确理解您的意图，您将应用程序的安装目录设置为环境变量的某个值（如果它在目标计算机上）。否则，回退到 Program Files 下的文件夹。

您可以通过以下方式接近它。首先，定义类似这样的目录结构：

```
<Directory Id="TARGETDIR" Name="SourceDir">
   <Directory Id="ProgramFilesFolder">
      <Directory Id="INSTALLLOCATION" Name="MySetupProject">
         ...
      </Directory>
    </Directory>
</Directory> 
```

这将作为后备。稍后，定义一个[set-a-property](http://wix.sourceforge.net/manual-wix3/wix_xsd_setproperty.htm)自定义操作来设置 INSTALLLOCATION，以防定义了环境变量：

```
<SetProperty Id="INSTALLLOCATION" Value="[%ZEN_HOME]" After="CostFinalize">[%ZEN_HOME]</SetProperty> 
```

您应该在[CostFinalize](http://msdn.microsoft.com/en-us/library/windows/desktop/aa368048.aspx)之后安排它，以便能够将目录寻址为属性。

# mysql - 无法获取表中订单数量的 SQL 查询

> ID：10292837
> 
> 赞同：-1
> 
> 时间：2012-04-24T06:33:30.707
> 
> 标签：mysql, sql, join

这是数据库 SQL 编码项目的一部分。

我需要设计一个表来保存客户的订单。
假设客户的详细信息（例如姓名）存储在另一个表中。

使用我为订单设计的表和假设的其他表，编写一个 SQL 查询，该查询可以给出每个客户的订单数量，每个客户一行。

“订单”表

```
 Order_ID   Order_NO    Customer_ID
 1            8088            3
 2            9632            1
 3            1272            4
 4            6037            1 
```

假设客户姓名和其他详细信息（地址、电话号码、电子邮件）存储在“客户”表中。

我的 SQL：

```
 SELECT Customers.FirstName, Customers.FirstName, Orders.OrderNo
 FROM Customers
 FULL JOIN Orders
 ON Customers.Customer_ID = Orders.Customer_ID
 ORDER BY Customers.LastName 
```

有什么问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T06:38:00.483

将查询更改为内部联接

```
SELECT 
    Customers.FirstName
    , Customers.FirstName
    , Orders.OrderNo  
FROM
    Customers  
    INNER JOIN Orders  ON Customers.Customer_ID = Orders.Customer_ID  
ORDER BY 
    Customers.LastName 
```

查询客户的 Ordercount

```
SELECT 
    Customers.LastName
    ,   COUNT(Orders.Order_Id)
FROM
    Customers  
    INNER JOIN Orders  ON Customers.Customer_ID = Orders.Customer_ID  
GROUP BY
    Customers.LastName
ORDER BY 
    Customers.LastName 
```

完全加入

[http://www.w3schools.com/sql/sql_join_full.asp](http://www.w3schools.com/sql/sql_join_full.asp)

内部联接

[http://www.w3schools.com/sql/sql_join_inner.asp](http://www.w3schools.com/sql/sql_join_inner.asp)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-24T06:47:54.907

如果你只是想要`COUNT`订单，你可以这样做：

```
SELECT 
    Customers.FirstName, 
    (
        SELECT
            COUNT(*)
        FROM
            Orders
        WHERE
            Orders.Customer_ID=Customers.Customer_ID
    ) AS NbrOfOrders
FROM 
    Customers 
```

参考：

*   [12.15.1。GROUP BY（聚合）函数](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-24T06:36:39.007

不要忘记`COUNT`和`GROUP BY`。

# c# - 如何将图像拆分为多个图片并根据用户的要求加入它们

> ID：10292842
> 
> 赞同：0
> 
> 时间：2012-04-24T06:33:53.287
> 
> 标签：c#, asp.net

我正在尝试将大图像**（大小 > 80 MB）**加载到网页中。用户实际上并不需要一次查看整个图像，而只需要查看请求的部分。

图像的尺寸约为**10k x 10k**。

我环顾四周，但找不到解决问题的合理方法。

我想根据需要将图像拆分成若干块（例如 9 块，每块 3k x 3k）并根据用户请求将它们加载到页面中或移动到图像的下一部分（例如，如果用户越过**3k x 3k**边界，服务器将根据需要发送侧片或底片）。

我确实找到了如何分割图像的方法，但找不到动态地做到这一点并将它们动态地缝合在一起的方法。

**更新**

我尝试使用**Microsoft Deep Zoom Composer**，但没有奏效。我认为它不支持如此大的图像尺寸。**当我在Microsoft PhotoSynth**中尝试相同的图像时，我得出了这个结论，并收到一条错误消息，它只支持最大**32MB**的文件。**Deep Zoom Composer**和**Photo Synth**使用相同的文件格式，所以我认为它们可能具有相同的文件大小限制。

Deep zoom Composer 没有产生有意义的错误消息，因为错误消息是，**文件格式不正确**，但文件格式正确（即 jpg）。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T07:05:23.097

您可以使用[Microsoft Deep Zoom Composer](http://msdn.microsoft.com/en-us/library/dd409068.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T04:19:20.037

由于这是要显示的相当大的图像，我将假设您无法将其调整到更易于管理的尺寸，并且您必须在某些网格中显示它。您可以使用与谷歌地图相同的想法，当用户在视图中移动时单独加载块。

您将如何构建该视图将取决于您，因为即使 3k x 3k 像素也比大多数屏幕分辨率大一些。您可能需要更小的块。

我不知道有任何组件可以做你需要的，但自己动手应该不会太难。您可以使用一些容器，其中设置`div`了 grid `div`s，当每个容器进入视图时，您加载背景图像位，或者您可以渲染固定数量的`div`s 作为您的网格，并在“视口”移动时加载必要的背景图像。

希望这是有道理的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T02:44:58.240

我认为您应该将其转换为另一种文件格式，例如 bmp，这样您就可以轻松地在文件中导航到所需的像素，用这些像素组成新图像并将其发送，或者保存并重新读取。最大的问题是新的图像尺寸。

# apache - 许多相同的 Apache Tomcat 子代在启动时自动生成

> ID：10292844
> 
> 赞同：0
> 
> 时间：2012-04-24T06:34:01.567
> 
> 标签：apache, tomcat, configuration, process

我没有在 webapps 下安装任何应用程序，除了 tomcat “manager/”

每次我运行 ./startup.sh 启动 tomcat 并打开 htop（top 的高级版本）时，我都会看到 16 个新进程作为主 apache tomcat 进程的子进程生成。以下是所有进程（子进程 + 父进程）运行命令在 htop 中的样子：

```
/usr/local/jdk1.6.0_29/bin/java -Djava.util.logging.config.file=/usr/local/tomcat/apache-tomcat-6.0.33/conf/logging.properties -Djava.util.logging.manager=org.apache.juli.ClassLoaderLogManage -Djava.endorsed.dirs=/usr/loca/tomcat/apache-tomcat-6.0.33/endorsed -classpath /home/dhruba/tomcat/apache-tomcat-6.0.33/bin/bootstrap.jar -Dcatalina.base=/usr/loca/tomcat/apache-tomcat-6.0.33 -Dcatalina.home=/usr/loca/tomcat/apache-tomcat-6.0.33 -Djava.io.tmpdir=/usr/local/tomcat/apache-tomcat-6.0.33/temp org.apache.catalina.startup.Bootstrap start 
```

关于为什么创建它们以及如何控制这个数字的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T12:39:10.593

那些不是进程，那些是线程。你只有一个进程。

# java - Java - 运行和使用 .bat 文件

> ID：10292847
> 
> 赞同：2
> 
> 时间：2012-04-24T06:34:13.733
> 
> 标签：java

我有一个文件`generateK.bat`，它随机生成密钥。

我有两个问题：

1.  如何`.bat`在java环境中运行文件？我只看到了编辑 .bat 文件的指令，但没有运行它。
2.  我想在我的程序中使用密钥。如何在 java 中使用输出？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-24T06:44:15.570

我会使用 Runtime.exec 来执行一个外部程序： [http ://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Runtime.html](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Runtime.html)

然后，您将拥有一个流程，其中包含您可以读/写的输入和输出流。

代码将如下所示：

```
public static void main(String Argv[]) {
try {
    String ls_str;

    Process ls_proc = Runtime.getRuntime().exec("pathtoyourbat/generateK.bat");

    // get its output (your input) stream

    DataInputStream ls_in = new DataInputStream(
                                      ls_proc.getInputStream());

    try {
    while ((ls_str = ls_in.readLine()) != null) {
        System.out.println(ls_str);
    }
    } catch (IOException e) {
    System.exit(0);
    }
} catch (IOException e1) {
    System.err.println(e1);
    System.exit(1);
}

System.exit(0);
} 
```

=> [http://www.ensta-paristech.fr/~diam/java/online/io/javazine.html](http://www.ensta-paristech.fr/~diam/java/online/io/javazine.html)

然而，有很多关于在 java 中运行外部应用程序的教程

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T06:44:35.070

> 1.  如何在 java 环境中运行 .bat 文件？我只看到了编辑 .bat 文件的指令，但没有运行它。

使用以下代码运行您的批处理文件。

```
Runtime.getRuntime().exec("cmd /c start abc.bat"); 
```

爱斯特拉冈已经发布了**2**的答案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T06:45:33.883

来自java，`Runtime.getRuntime().exec("cmd /c start generateK.bat");`

# facebook - 无法在 localhost 上测试 facebook like 按钮（与以前不同）

> ID：10292850
> 
> 赞同：2
> 
> 时间：2012-04-24T06:34:23.313
> 
> 标签：facebook, facebook-like, localhost

我开发了一个带有 facebook 社交插件的小网页（例如，推荐和发送按钮）。直到大约一个月前，我才能在 localhost 上成功测试按钮和点击事件；但突然这些按钮现在无法在 localhost 上运行。只有当我通过“localtunnel”将网页部署在公共 IP 上时，它们才有效。在 localhost 上，它们显示喜欢和名称的数量，但在单击按钮时不会弹出。此外，订阅的事件“edge.create”不会被触发。

我已经从 facebook 中复制了所有必需的 javascript，例如按钮小部件页面。我还发现本地主机和隧道部署上的流量模式存在一些差异。GET oauth 请求在本地主机上返回 302 状态，而在公共域上返回 200。此外，公共域上的部署在单击按钮以获取一些 CSS 和图像后会发出许多 GET 请求。而 localhost 页面只发出一个请求并停在那里。我无法理解为什么会这样。

facebook 最近是否停止支持测试 localhost 上的按钮所需的任何内容？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-14T17:03:44.910

补充@C-Dan 的答案，确保`data-href`属性指向实时站点，而不是您的本地主机。这对我有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T20:45:15.667

我也可以在 localhost 上看到喜欢和喜欢（我的网站上的按钮和计数）

确保你有

```
<html xmlns:fb="http://ogp.me/ns/fb#"> 
```

在 html 标签中

和实际喜欢的 div 在身体的任何地方 -

```
<div class="fb-like" data-font="verdana" data-href="http://facebook.com/CDanArt" data-layout="button_count" data-send="true" data-show-faces="false" data-width="120" style="margin: 0px 0px 0px 0px;"></div> 
```

和

```
<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#xfbml=1&appId=146351542070012";
  fjs.parentNode.insertBefore(js, fjs);
  }(document, 'script', 'facebook-jssdk'));
</script> 
```

在你的身体标签结束之前。

当然，在脚本函数中使用你的 data-href 和 appID 之类的 div 。

这段代码在本地主机上对我来说工作得很好。如果您照原样复制代码，但在 localhost 上仍然看不到点赞按钮，请检查是否有其他东西破坏了您的点赞按钮。

# ruby-on-rails-3 - _path 助手的 Rails 3 默认主机

> ID：10292854
> 
> 赞同：0
> 
> 时间：2012-04-24T06:34:51.487
> 
> 标签：ruby-on-rails-3

除了地址栏中显示的内容之外，还有其他方法可以设置默认主机吗？我不是在谈论 _url 助手，我想为 _path 做这个

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T07:05:21.067

不，因为`_path`完全省略了主机。例如`users_path`不**产生**：

```
http://www.domain.com/users/index 
```

它产生：

```
/users/index 
```

没有办法设置主机。

# ruby-on-rails - 未知操作错误

> ID：10292857
> 
> 赞同：2
> 
> 时间：2012-04-24T06:34:53.317
> 
> 标签：ruby-on-rails, ruby-on-rails-3, action

我在`req`会员控制器中创建了一个自定义操作并为其定义了路由。但是当我在 link_to 上给出该自定义操作的路径时，它给了我一个错误，说未知操作，找不到 MembershipsController.I 的操作“显示” dny 了解为什么在我为自定义操作提供路径时它会找到显示操作。

以下是我在成员控制器中的自定义操作

```
def req
  @user =User.find_by_email(params[:email])
  @group =params[:group_id]
  unless @group.nil?
    if Membership.request(@user.id, @group)
       redirect_to :back, :notice => 'Joined successfully.'
    else
      redirect_to :back,  :notice => 'couldnot Joine.'
    end
  end
end 
```

我的会员控制器内没有显示操作。

以下是我的自定义操作的路线：

```
resources :memberships do
  collection do
    post 'req'
  end
end 
```

以下是我`groups/show.html.haml`在其中给出自定义操作路径的代码。

```
 - if @collegemates.empty?
    %p.info You have no common collegemates ...
  - else
    %table.datatable
      %thead
        %tr
          ...
      %tbody
        - @collegemates.each do |c|
          - unless Membership.group_member(c.id, @group)
            %tr
              %td= c.full_name
              %td= c.email
              %td= link_to "request to join",{:controller => :memberships, :action => "req",:email =>c.email,:group_id => @group.id},:method => "post" 
```

当我单击加入请求时，我收到显示操作的未知操作错误。我在这里做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T08:09:59.103

要使链接执行 POST 请求，您需要 javascript。Rails 会为您处理这些，但您必须包含必要的文件。添加`<%= javascript_include_tag :defaults %>`到您的布局文件将解决您的问题。如果您不这样做，将执行 GET 请求而不是 POST 请求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T06:48:28.447

您可能希望将您的操作分配给集合或成员。

```
resources :memberships do
  post 'req', :on => :collection # or :member
end 
```

请参阅[http://guides.rubyonrails.org/routing.html#adding-more-restful-actions](http://guides.rubyonrails.org/routing.html#adding-more-restful-actions)。

`:on => :collection`创建一个类似`memberships/req`where
`:on => :member`的路线为您提供一个类似`memberships/:id/req`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T07:37:49.707

默认情况下，rails 提供 CRUD 操作。

```
new,create,edit,update,delete 
```

编码

```
collection do
  post 'req'
end 
```

将创建如下路线。

```
/memberships/req 
```

因此，rails 误解了您正在请求 /memberships/:id 并尝试匹配显示操作。因为没有显示操作，它会引发未知操作。

所以解决方案是您需要通知您没有使用 CRUD 操作

可以如下完成

```
resources :memberships, :only => [] do
 collection do
   post 'req'
 end
end 
```

# onclick - 如何向 wxStaticBitmap 组件添加点击事件处理程序？

> ID：10292860
> 
> 赞同：1
> 
> 时间：2012-04-24T06:35:15.697
> 
> 标签：onclick, wxwidgets

我想将单击事件处理程序添加到 wxStaticBitmap 组件。

我使用以下语句来创建动态事件处理程序：

```
Connect(ID_STATICBITMAP1,wxEVT_COMMAND_BUTTON_CLICKED,(wxObjectEventFunction)&MyFrame::OnStaticBitmap1Click); 
```

在 OnStaticBitmap1Click() 中，我只想包含以下函数调用：

```
wxMessageBox(_T("Hello World")); 
```

但是，显然，我的代码不起作用。当我单击静态位图时，什么也没有发生。谁能告诉我为什么？任何意见，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T14:59:05.647

wxBitmapButton 发出 wxEVT_COMMAND_BUTTON_CLICKED 事件。

wxStaticBitmap 没有。

# javascript - JavaScript 中的这个替换程序有什么问题？

> ID：10292863
> 
> 赞同：1
> 
> 时间：2012-04-24T06:35:25.823
> 
> 标签：javascript, jquery, replace

我有以下代码，正确实现了 jQuery（它已经过测试）：

```
var notrightfake = $("#ansbox").val();
var notright = notrightfake.replace(" ", ""); 
```

并且`$("#ansbox")`是一个`input type="text"`盒子。但是假设我输入了`He llo t his is m e`，程序不应该显示`Hellothisisme`，而不是根本不工作吗？

jsFiddle 示例：http: [//jsfiddle.net/WUvu5/](http://jsfiddle.net/WUvu5/)

谢谢您的支持，

卢卡斯·陈

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-24T06:38:00.327

该`replace`函数仅替换第一次出现的子字符串。

您必须使用正则表达式来替换所有匹配项：

```
var notright = notrightfake.replace(/ /g, ""); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T06:38:31.637

您必须进行实际替换，您只需将其分配给代码中的变量。

```
var notrightfake = $("#ansbox").val();
$("#ansbox").val(notrightfake.replace(" ", "")); 
```

**编辑：**您必须在活动中使用它，即。`keyup`

```
$('input').keyup(function(){
    var newValue = this.value.replace(/\s/, '');
    $(this).val(newValue);
}); 
```

演示：http: [//jsfiddle.net/elclanrs/3YWxh/](http://jsfiddle.net/elclanrs/3YWxh/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T06:38:34.153

试试这个
notrightfake.replace(/ /gi, "");

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-24T06:51:25.537

试试下面的代码：

```
var notrightfake = $("#ansbox").val();
var notright = notrightfake.replace(/\s+/g, "");
alert(notright); 
```

或者您可以使用一些修剪功能：

```
function trim(str) {
    return str.replace(/^\s+|\s+$/g,"");
};
function ltrim(str) {
    return str.replace(/^\s+/,"");
};
function rtrim(str) {
    return str.replace(/\s+$/,"");
}; 
```

# c# - 使用 RTF 字符串设置 Datagridview 单元格样式

> ID：10292864
> 
> 赞同：1
> 
> 时间：2012-04-24T06:35:38.243
> 
> 标签：c#, parsing, datagridview, rtf

我正在开发一个**C#**应用程序（Windows 窗体），它有一个保存在数据库中的 DataGridView（每个单元格都被视为一个字符串）。我想要做的是添加一个按钮，该按钮将为文本（*或单元格 BackColor*）着色，这样当我打印（在纸上）我的数据库内容时，颜色会保持不变。

我的想法是将单元格字符串转换为 RTF，但我真的不知道如何为单元格**不支持 RTF**原生地做到这一点。我想尽可能避免将 DataGridView 更改为丰富的 DataGridView 所以我想知道是否可以在保存彩色单元格时执行类似添加此字符串的操作：

> "{\rtf1\fbidis\ansi\ansicpg1252\deff0\deflang1036{\fonttbl{\f0\fswiss\fprq2\fcharset0 微软无衬线；}{\f1\fnil\fcharset0 微软无衬线；}} {\colortbl ;\red255 \green0\blue0;} \viewkind4\uc1\pard\ltrpar\cf1\f0\fs17 " + cell.Value.ToString() + "\cf0\f1\par"

棘手的是，当我打开我的应用程序时，我想读取每个单元格的字符串，并将 RTF 样式应用于单元格样式。例如，我保存了一个包含“hello”的红色单元格，当我打开我的应用程序时，我希望单元格为红色，但是当我打印（再次纸张）时，我希望文本为红色（因此在打开时解析 RTF 以分开格式中的文本）。

有任何想法吗？提前致谢。:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T14:11:36.797

忘了说我找到了正确的 RTF 字符串，如下：

```
"{\\rtf1\\ansi\\ansicpg1252\\deff0\\deflang1036{\\fonttbl{\\f0\\fswiss\\fprq2\\fcharset0 Microsoft Sans Serif;}{\\f1\\fnil\\fcharset0 Microsoft Sans Serif;}}{\\colortbl ;\\red255\\green0\\blue0;}\\viewkind4\\uc1\\pard\\cf1\\f0\\fs17 " + value + "\\cf0\\f1}"; 
```

启动应用程序时，我只检查字符串是否包含 RTF 标题，然后我只是拆分文本以保留值并将样式应用于单元格。

# asynchronous - 在 ServiceBus 上使用 BeginReceive 和 EndReceive 发送消息对我不起作用

> ID：10292867
> 
> 赞同：1
> 
> 时间：2012-04-24T06:36:15.557
> 
> 标签：asynchronous, messaging, beginreceive, waitone

我需要在总线上进行异步消息传递。

这是我正在使用的代码：

```
 //set callback to get the message
    MessageReceiver messageReceiver = MessagingFactory.CreateMessageReceiver(BaseTopicName + "/subscriptions/" + addressee, 
        ReceiveMode.PeekLock);
    IAsyncResult result = messageReceiver.BeginReceive(AsyncGet, messageReceiver);
    Debug.WriteLine("After BeginReceive");
    // Wait for the WaitHandle to become signaled.
    Thread.Sleep(0);
    result.AsyncWaitHandle.WaitOne();
    // Close the wait handle.
    result.AsyncWaitHandle.Close();
    //return the information
    Debug.WriteLine("return the information"); 
```

这是异步获取：

```
public void AsyncGet(IAsyncResult result)
{
    Debug.WriteLine("Start AsyncGet");
    MessageReceiver messageReceiver = result.AsyncState as MessageReceiver;
    BrokeredMessage = messageReceiver.EndReceive(result);
    Debug.WriteLine("Finish AsyncGet");
    messageReceiver.Close();
} 
```

我得到的输出是：

```
 After BeginReceive
    return the information
    Start AsyncGet
    Finish AsyncGet 
```

它说那行 result.AsyncWaitHandle.WaitOne(); 正如我认为的那样，直到 AsyncGet 的线程完成后才停止执行。请告诉我我在这里做错了什么。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T20:19:05.200

我只是仔细检查了源代码。这是设计使然。

IAsyncResult 上的等待句柄在操作完成时和回调被调用之前被触发。异步结果的回调和等待句柄是等待操作完成的两种替代方法。要在此处实现您想要做的事情 - 根据操作的完成阻塞您的线程并通过回调获取响应 - 您需要在您的应用程序中有一个明确的等待句柄 (ManualResetEvent) 和 Set() 以发出信号回调触发。

# haskell - 如何在 Haskell 中漂亮地打印表格？

> ID：10292868
> 
> 赞同：17
> 
> 时间：2012-04-24T06:36:18.973
> 
> 标签：haskell, pretty-print

我想在 Haskell 中漂亮地打印一个类似表格的数据结构（列列表）。

例如...

```
Table [
    StrCol "strings" ["a", "bc", "c"],
    IntCol "ints" [1, 30, -2],
    DblCol "doubles" [2.0, 4.5, -3.2]] 
```

应该呈现类似...

```
strings ints doubles
    "a"    1     2.0
   "bc"   30     4.5
    "c"   -2    -3.2 
```

目前我已经在最新版本的 Haskell 平台附带的 Text.PrettyPrint 中实现了这个功能。不幸的是， <+> 运算符将多行文档彼此“对角线”定向。

例如

```
(text "a" $+$ text "b") <+> (text "c" $+$ text "d") 
```

呈现为

```
a
b c
  d 
```

而不是

```
a c
b d 
```

结果，我转置单元格并首先水平合并它们，然后垂直合并，但这会导致列未对齐。

在一个较旧的[表格打印问题](https://stackoverflow.com/questions/5929377/format-list-output-in-haskell)中，augustss 指的是添加更多代码以使列自动适应最宽的条目。

我猜测每列的最大长度的“sizedText”会这样做，除了这个函数似乎不是 Haskell Platform Text.PrettyPrint 模块的一部分（我认为它在密切相关的 Text.Pretty 包中）。

实现这个漂亮打印功能的最简单的非hacky方法是什么？这是我项目的一小部分，所以我想避免编写自己的漂亮打印，如果可以的话，我更愿意避免模块依赖。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-04-24T07:38:40.620

[http://hackage.haskell.org/package/boxes](http://hackage.haskell.org/package/boxes)

> ### 盒子包装
> 
> 一个漂亮的打印库，用于在二维中布局文本，使用简单的盒子模型......

# sql - 检索 SQL 协议状态

> ID：10292873
> 
> 赞同：0
> 
> 时间：2012-04-24T06:36:41.570
> 
> 标签：sql, sql-server-2008, sql-server-2005, wmi, wmi-query

使用 SQL 查询或 WMI，我想检索 SQL 协议（如 Named Pipes、TCP/IP）是否启用。

我需要为 SQL Server 2000、2005、2008 执行此操作。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T06:49:56.317

[WMI Provider for Configuration Management Classes](http://msdn.microsoft.com/en-us/library/ms186452.aspx)包括WMI 类，它列出了安装在 Microsoft SQL Server 实例上的[`ServerNetworkProtocol`](http://msdn.microsoft.com/en-us/library/ms179574.aspx)协议，该类位于`root\Microsoft\SqlServer\ComputerManagement10`命名空间中（对于 sql server 2008，在其他版本中您必须修改命名空间）。

检查这个 C# 示例

```
using System;
using System.Collections.Generic;
using System.Management;
using System.Text;

namespace GetWMI_Info
{
    class Program
    {

        static void Main(string[] args)
        {
            try
            {
                string ComputerName = "localhost";
                ManagementScope Scope;                

                if (!ComputerName.Equals("localhost", StringComparison.OrdinalIgnoreCase)) 
                {
                    ConnectionOptions Conn = new ConnectionOptions();
                    Conn.Username  = "";
                    Conn.Password  = "";
                    Conn.Authority = "ntlmdomain:DOMAIN";
                    Scope = new ManagementScope(String.Format("\\\\{0}\\root\\Microsoft\\SqlServer\\ComputerManagement10", ComputerName), Conn);
                }
                else
                    Scope = new ManagementScope(String.Format("\\\\{0}\\root\\Microsoft\\SqlServer\\ComputerManagement10", ComputerName), null);

                Scope.Connect();
                ObjectQuery Query = new ObjectQuery("SELECT * FROM ServerNetworkProtocol");
                ManagementObjectSearcher Searcher = new ManagementObjectSearcher(Scope, Query);

                foreach (ManagementObject WmiObject in Searcher.Get())
                {
                    Console.WriteLine("{0,-35} {1,-40}","ProtocolDisplayName",WmiObject["ProtocolDisplayName"]);// String
                    Console.WriteLine("{0,-35} {1,-40}","Enabled",WmiObject["Enabled"]);// Boolean
                    Console.WriteLine("{0,-35} {1,-40}","InstanceName",WmiObject["InstanceName"]);// String
                    Console.WriteLine("{0,-35} {1,-40}","MultiIpConfigurationSupport",WmiObject["MultiIpConfigurationSupport"]);// Boolean
                    Console.WriteLine("{0,-35} {1,-40}","ProtocolName",WmiObject["ProtocolName"]);// String
                    Console.WriteLine();

                }
            }
            catch (Exception e)
            {
                Console.WriteLine(String.Format("Exception {0} Trace {1}",e.Message,e.StackTrace));
            }
            Console.WriteLine("Press Enter to exit");
            Console.Read();
        }
    }
} 
```

这将返回类似这样的内容

```
ProtocolDisplayName                 Shared Memory
Enabled                             True
InstanceName                        MSSQLSERVER
MultiIpConfigurationSupport         False
ProtocolName                        Sm

ProtocolDisplayName                 Named Pipes
Enabled                             False
InstanceName                        MSSQLSERVER
MultiIpConfigurationSupport         False
ProtocolName                        Np

ProtocolDisplayName                 TCP/IP
Enabled                             True
InstanceName                        MSSQLSERVER
MultiIpConfigurationSupport         True
ProtocolName                        Tcp

ProtocolDisplayName                 VIA
Enabled                             False
InstanceName                        MSSQLSERVER
MultiIpConfigurationSupport         False
ProtocolName                        Via 
```

# c# - 无法使用spring.net在asp.net mvc3应用程序中打开数据库（sqlite）

> ID：10292875
> 
> 赞同：5
> 
> 时间：2012-04-24T06:36:48.857
> 
> 标签：c#, asp.net-mvc-3, sqlite, spring.net

我正在编写一个 asp.net mvc3 Web 应用程序。我想使用一个 sqlite 数据库。不幸的是，我收到一个 SqliteException 说“无法打开数据库”。

> 春季版：1.3.2
> 
> NHibernate 版本：3.2

数据库提供者/连接字符串：

```
<db:provider id="employeesDbProvider"
           provider="SQLite-1.0.72"
           connectionString="Data Source=.\Database\Employees.db3;Version=3;">
</db:provider> 
```

堆栈跟踪：

```
bei System.Data.SQLite.SQLite3.Open(String strFilename, SQLiteOpenFlagsEnum flags, Int32 maxPoolSize, Boolean usePool) in c:\dev\sqlite\dotnet\System.Data.SQLite\SQLite3.cs:Zeile 239.
bei System.Data.SQLite.SQLiteConnection.Open() in c:\dev\sqlite\dotnet\System.Data.SQLite\SQLiteConnection.cs:Zeile 1022.
bei NHibernate.Connection.DriverConnectionProvider.GetConnection() 
```

我什至尝试将 DataSource 设置为绝对路径（*C:\temp\database\Employees.db3*），但抛出了相同的 SqLiteException。

更新：

错误页面上显示的堆栈跟踪：

```
[SQLiteException (0x80004005): Unable to open the database file]
   System.Data.SQLite.SQLite3.Open(String strFilename, SQLiteOpenFlagsEnum flags, Int32 maxPoolSize, Boolean usePool) in c:\dev\sqlite\dotnet\System.Data.SQLite\SQLite3.cs:239
   System.Data.SQLite.SQLiteConnection.Open() in c:\dev\sqlite\dotnet\System.Data.SQLite\SQLiteConnection.cs:1022
   NHibernate.Connection.DriverConnectionProvider.GetConnection() +155
   NHibernate.Tool.hbm2ddl.SuppliedConnectionProviderConnectionHelper.Prepare() +41
   NHibernate.Tool.hbm2ddl.SchemaMetadataUpdater.GetReservedWords(Dialect dialect, IConnectionHelper connectionHelper) +105
   NHibernate.Tool.hbm2ddl.SchemaMetadataUpdater.Update(ISessionFactory sessionFactory) +151
   NHibernate.Impl.SessionFactoryImpl..ctor(Configuration cfg, IMapping mapping, Settings settings, EventListeners listeners) +1012
   NHibernate.Cfg.Configuration.BuildSessionFactory() +162
   Spring.Data.NHibernate.LocalSessionFactoryObject.NewSessionFactory(Configuration config) in c:\_prj\spring-net\trunk\src\Spring\Spring.Data.NHibernate20\Data\NHibernate\LocalSessionFactoryObject.cs:952
   Spring.Data.NHibernate.LocalSessionFactoryObject.AfterPropertiesSet() in c:\_prj\spring-net\trunk\src\Spring\Spring.Data.NHibernate20\Data\NHibernate\LocalSessionFactoryObject.cs:706
   Spring.Objects.Factory.Support.AbstractAutowireCapableObjectFactory.InvokeInitMethods(Object target, String name, IConfigurableObjectDefinition definition) in c:\_prj\spring-net\trunk\src\Spring\Spring.Core\Objects\Factory\Support\AbstractAutowireCapableObjectFactory.cs:1294
   Spring.Objects.Factory.Support.AbstractAutowireCapableObjectFactory.ConfigureObject(String name, RootObjectDefinition definition, IObjectWrapper wrapper) in c:\_prj\spring-net\trunk\src\Spring\Spring.Core\Objects\Factory\Support\AbstractAutowireCapableObjectFactory.cs:1890
   Spring.Objects.Factory.Support.WebObjectFactory.ConfigureObject(String name, RootObjectDefinition definition, IObjectWrapper wrapper) in c:\_prj\spring-net\trunk\src\Spring\Spring.Web\Objects\Factory\Support\WebObjectFactory.cs:450
   Spring.Objects.Factory.Support.AbstractAutowireCapableObjectFactory.InstantiateObject(String name, RootObjectDefinition definition, Object[] arguments, Boolean allowEagerCaching, Boolean suppressConfigure) in c:\_prj\spring-net\trunk\src\Spring\Spring.Core\Objects\Factory\Support\AbstractAutowireCapableObjectFactory.cs:921

[ObjectCreationException: Error creating object with name 'employeesSessionFactory' defined in 'file [C:\Develop\ASP.Net-Schulung\Mitarbeiterverwaltung.Web\bin\Config\Spring.Database.config.xml] line 16' : Initialization of object failed : Unable to open the database file]
   Spring.Objects.Factory.Support.AbstractAutowireCapableObjectFactory.InstantiateObject(String name, RootObjectDefinition definition, Object[] arguments, Boolean allowEagerCaching, Boolean suppressConfigure) in c:\_prj\spring-net\trunk\src\Spring\Spring.Core\Objects\Factory\Support\AbstractAutowireCapableObjectFactory.cs:938
   Spring.Objects.Factory.Support.AbstractObjectFactory.CreateAndCacheSingletonInstance(String objectName, RootObjectDefinition objectDefinition, Object[] arguments) in c:\_prj\spring-net\trunk\src\Spring\Spring.Core\Objects\Factory\Support\AbstractObjectFactory.cs:2144
   Spring.Objects.Factory.Support.WebObjectFactory.CreateAndCacheSingletonInstance(String objectName, RootObjectDefinition objectDefinition, Object[] arguments) in c:\_prj\spring-net\trunk\src\Spring\Spring.Web\Objects\Factory\Support\WebObjectFactory.cs:299
   Spring.Objects.Factory.Support.AbstractObjectFactory.GetObjectInternal(String name, Type requiredType, Object[] arguments, Boolean suppressConfigure) in c:\_prj\spring-net\trunk\src\Spring\Spring.Core\Objects\Factory\Support\AbstractObjectFactory.cs:2065
   Spring.Objects.Factory.Support.AbstractObjectFactory.GetObject(String name) in c:\_prj\spring-net\trunk\src\Spring\Spring.Core\Objects\Factory\Support\AbstractObjectFactory.cs:1826
   Spring.Objects.Factory.Support.DefaultListableObjectFactory.PreInstantiateSingletons() in c:\_prj\spring-net\trunk\src\Spring\Spring.Core\Objects\Factory\Support\DefaultListableObjectFactory.cs:505
   Spring.Context.Support.AbstractApplicationContext.Refresh() in c:\_prj\spring-net\trunk\src\Spring\Spring.Core\Context\Support\AbstractApplicationContext.cs:1017
   Spring.Context.Support.MvcApplicationContext..ctor(MvcApplicationContextArgs args) in c:\_prj\spring-net\trunk\src\Spring\Spring.Web.Mvc\Context\Support\MvcApplicationContext.cs:75
   Spring.Context.Support.MvcApplicationContext..ctor(String name, Boolean caseSensitive, String[] configurationLocations) in c:\_prj\spring-net\trunk\src\Spring\Spring.Web.Mvc\Context\Support\MvcApplicationContext.cs:47
   _dynamic_Spring.Context.Support.MvcApplicationContext..ctor(Object[] ) in c:\_prj\spring-net\trunk\src\Spring\Spring.Web.Mvc\Context\Support\MvcApplicationContext.cs:50
   Spring.Reflection.Dynamic.SafeConstructor.Invoke(Object[] arguments) in c:\_prj\spring-net\trunk\src\Spring\Spring.Core\Reflection\Dynamic\DynamicConstructor.cs:116
   Spring.Context.Support.RootContextInstantiator.InvokeContextConstructor(ConstructorInfo ctor) in c:\_prj\spring-net\trunk\src\Spring\Spring.Core\Context\Support\ContextHandler.cs:563
   Spring.Context.Support.ContextInstantiator.InstantiateContext() in c:\_prj\spring-net\trunk\src\Spring\Spring.Core\Context\Support\ContextHandler.cs:508
   Spring.Context.Support.ContextHandler.InstantiateContext(IApplicationContext parentContext, Object configContext, String contextName, Type contextType, Boolean caseSensitive, String[] resources) in c:\_prj\spring-net\trunk\src\Spring\Spring.Core\Context\Support\ContextHandler.cs:351
   Spring.Context.Support.ContextHandler.Create(Object parent, Object configContext, XmlNode section) in c:\_prj\spring-net\trunk\src\Spring\Spring.Core\Context\Support\ContextHandler.cs:289

[ConfigurationErrorsException: Error creating context 'spring.root': Unable to open the database file]
   System.Configuration.BaseConfigurationRecord.EvaluateOne(String[] keys, SectionInput input, Boolean isTrusted, FactoryRecord factoryRecord, SectionRecord sectionRecord, Object parentResult) +199
   System.Configuration.BaseConfigurationRecord.Evaluate(FactoryRecord factoryRecord, SectionRecord sectionRecord, Object parentResult, Boolean getLkg, Boolean getRuntimeObject, Object& result, Object& resultRuntimeObject) +1153
   System.Configuration.BaseConfigurationRecord.GetSectionRecursive(String configKey, Boolean getLkg, Boolean checkPermission, Boolean getRuntimeObject, Boolean requestIsHere, Object& result, Object& resultRuntimeObject) +1468
   System.Configuration.BaseConfigurationRecord.GetSection(String configKey) +41
   System.Web.HttpContext.GetSection(String sectionName) +52
   System.Web.Configuration.HttpConfigurationSystem.GetSection(String sectionName) +57
   System.Web.Configuration.HttpConfigurationSystem.System.Configuration.Internal.IInternalConfigSystem.GetSection(String configKey) +6
   System.Configuration.ConfigurationManager.GetSection(String sectionName) +78
   Spring.Util.ConfigurationUtils.GetSection(String sectionName) in c:\_prj\spring-net\trunk\src\Spring\Spring.Core\Util\ConfigurationUtils.cs:71
   Spring.Context.Support.WebApplicationContext.GetContextInternal(String virtualPath) in c:\_prj\spring-net\trunk\src\Spring\Spring.Web\Context\Support\WebApplicationContext.cs:335
   Spring.Context.Support.WebApplicationContext.GetRootContext() in c:\_prj\spring-net\trunk\src\Spring\Spring.Web\Context\Support\WebApplicationContext.cs:223
   Spring.Context.Support.WebSupportModule.Init(HttpApplication app) in c:\_prj\spring-net\trunk\src\Spring\Spring.Web\Context\Support\WebSupportModule.cs:175
   System.Web.HttpApplication.InitModulesCommon() +172
   System.Web.HttpApplication.InitModules() +43
   System.Web.HttpApplication.InitInternal(HttpContext context, HttpApplicationState state, MethodInfo[] handlers) +828
   System.Web.HttpApplicationFactory.GetNormalApplicationInstance(HttpContext context) +304
   System.Web.HttpApplicationFactory.GetApplicationInstance(HttpContext context) +107
   System.Web.HttpRuntime.ProcessRequestInternal(HttpWorkerRequest wr) +327 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-24T20:20:58.100

我使用 SQLite、Spring.Net 进行了快速测试，但它失败并出现同样的错误，但是当我在连接字符串中使用斜杠而不是反斜杠时，它神奇地开始工作。

```
<db:provider id="employeesDbProvider" 
    provider="SQLite-1.0.72"
    connectionString="Data Source=c:/temp/Database/Sample.db3;Version=3;">
</db:provider> 
```

**编辑：** 如果我使用点前缀，我会进一步测试以找出文件的存储位置，例如`./Employees.db3`. 在 IISExpress 中，它的存储`C:\Program Files (x86)\IIS Express`很可能不是您所期望的。

在 IIS7 中，它只是`Unable to open the database file`因为错误 ihmo 而失败，因为它试图写入`Temporary ASP.NET Files`文件夹。

最安全的选择是使用

```
<db:provider id="employeesDbProvider" 
    provider="SQLite-1.0.72"
    connectionString="Data Source=|DataDirectory|Sample.db3;Version=3;">
</db:provider> 
```

这是您的 MVC 应用程序的`App_Data`文件夹。

我使用 SQLite 1.0.80.0 进行测试。请记住，SQLite 不会创建目录并且需要 ACL 写入权限。

# java - 在没有第三方库的情况下从 Python 启动 JVM？

> ID：10292878
> 
> 赞同：1
> 
> 时间：2012-04-24T06:37:01.313
> 
> 标签：java, python, class, jvm, subprocess

**有没有办法在没有**第三方库（例如 Jython）的情况下从 Python 启动 JVM（使用指定的 Java 类来运行，也许还有一些参数）？也许使用 Python 的[subprocess](http://docs.python.org/library/subprocess.html)模块？

我不关心从 Python 调用 Java 类的方法，只是启动一个 Java 应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T07:00:20.410

您可以[`subprocess`](http://docs.python.org/library/subprocess.html)为此目的使用模块。

我[`check_output`](http://docs.python.org/library/subprocess.html#subprocess.check_output)曾经

> 使用参数运行命令并将其输出作为字节字符串返回。

```
>>> import subprocess
>>> output  = subprocess.check_output("java test")
>>> output
'hello world\r\n'
>>> 
```

`test.java`标准`hello world`示例 java 文件在哪里。

或者，您可以使用`check_call`

```
>>> import subprocess
>>> subprocess.check_call('java test')
hello world
0
>>> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T06:39:16.040

子流程模块应该可以正常工作。您在使用它时是否有特定的问题？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T06:58:56.043

如果问题是如何像任何外部应用程序一样启动 java 应用程序。您可以使用

```
>>> variables= {}
>>> execfile( "someFile.jar", variables ) 
```

# c# - 如何防止对 C# 中的类字段进行优化

> ID：10292882
> 
> 赞同：-6
> 
> 时间：2012-04-24T06:37:16.150
> 
> 标签：c#, optimization

我已经构建了一个抽象类，用于处理我们产品的命令行选项。

只需要创建一个从 AbstractOptions 继承的类，用修饰字段填充它，然后调用继承的 Parse(args) 方法，通过反射自动填充来自命令行的值。在命令行上找不到的值保留其当前（默认）值。

然后，应用程序只需要检查选项字段来获取它们的值。AbstractOptions 类提供了更多功能，如帮助输出等，但它不是重点。

简短的例子：

```
public class SignalOptions: AbstractOptions
{
    [Option("-i, --iterations", "Number of iterations (0 = infinite).")]
    volatile public int NumberOfIterations;

    [Option("-s, --silent", "Silent mode, only display final results.")]
    volatile public bool Silent;

    [Option("-w, --zwindow", "Window size for z-score analysis.")]
    volatile public int ZWindow = 7;

    [Option("-a, --zalert", "z-score value to consider as peak.")]
    public double ZAlert = 2.1;
}

static void Main(string[] args)
{
    var opts = new SignalOptions();
    opts.Parse(args)

    // If optimizations are turned off, SILENT will be written or not 
    // followind presence or absence of the --silent switch on the command line.
    // If optimizations are turned on, SILENT will never be written.
    // The reflection part is working fine. I suspect the problem is that
    // the compiler of the jitter having never found this set anywhere simply inlines
    // the value 'false' inthe if, because when I step on it, it shows me the value as 
    // true or false, but has the same behavior no matter what value opts.Silence has.
    if( opts.Silent )
        Console.Writeline("SILENT");
} 
```

现在，我遇到的问题是，由于编译器没有找到任何实际更改 SignalOptions 类的值的代码，它只是内联了在代码中使用它们的值。我通过要求类中的所有“选项”字段都是可变的来规避这个问题，因此没有应用优化，它工作正常，但不幸的是 volatile 关键字在双精度上无效。

我在网上花了很多时间试图找到解决方法，但没有成功。有没有办法阻止对字段的优化或以其他方式欺骗编译器/抖动以为它们是在运行时使用的？

我还想尽可能减少调用应用程序的责任。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T07:00:03.493

我在这里有一个本地副本，`Parse`写得很不透明：

```
public void Parse(string[] args)
{    // deliberately opaque, not that it would make any difference
    string fieldName = (new string('S', 1) + "ilentX").Substring(0, 6);
    GetType().GetField(fieldName).SetValue(this, true);
} 
```

它工作正常。我不相信问题是你认为的那样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T07:20:58.003

这是我的猜测：

`Parse`在单独的线程中运行，但是由于您的同步存在某种缺陷，这使得其余代码在没有设置值的情况下运行。

这也可以解释为什么您在调试器中看到正确的值。

**更新（自以为是）：**

在`Parse`单独的线程中运行非常奇怪，应该被认为是设计缺陷。听起来有人在想“反射很慢，让我们把它放在一个单独的线程中”。

# internet-explorer - 在 IE 中运行 flex Web 应用程序时出现动作脚本错误。错误 #2044

> ID：10292885
> 
> 赞同：0
> 
> 时间：2012-04-24T06:37:35.560
> 
> 标签：internet-explorer, flex4, adobe, flexbuilder

错误说明：本页脚本出现错误。第 110 行字符 446 错误：预期 ':' 代码 0 URL [http://clkads.com/adServe/static/btgen-ie-im3.html?tid=SWIM06](http://clkads.com/adServe/static/btgen-ie-im3.html?tid=SWIM06) 是否要继续在此页面上运行脚本？所有 Web 应用程序都会显示此错误。我正在使用 flex builder 4.6 请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T21:31:43.157

您的项目中的 HTML 模板文件可能有问题。我不知道我是否会将其归类为动作脚本错误。如果错误不存在，我将不知所措。如果您在其中找不到它，请追踪第 110 字符 446 行（以及它周围的所有内容）并将其发回。

# performance - Jqgrid treegrid 性能

> ID：10292889
> 
> 赞同：0
> 
> 时间：2012-04-24T06:37:47.150
> 
> 标签：performance, jqgrid, treegrid

我已经尝试过 gridview:ture ， loadui:block 但加载后显示 treegrid 仍然需要更多时间。我的 json 包含超过 2044 个数据。我正在使用 Firefox 3.6 版

我的代码如下

**

```
 Glcm=   [{name:'id',index:'id', label:'Id',hidden:true,key:true, Enabled:false,jsonmap:"id"},{name:'text',index:'text',label:'Global Ledger',width:400,jsonmap:"text",formatter:gLCheckbox},{name:'additionalInfo',index:'additionalInfo',label:'additionalInfo',hidden:true,jsonmap:"additionalInfo"},
 ], 
```

**

```
GlTree.jqGrid({
               url: 'GlTreeStructure.action',
               datatype: "json",
               mtype: "POST",
               colModel:Glcm,
               width:outerwidthGL,
               height:300,
               rowNum:-1,
               pager: '#ptreeList',
               viewrecords: true,
               caption:"Global Ledger",
               toolbar: [true,"top"], 
               gridview:true,
               treeGrid: true,
               pginput:false,
               pgtext:"",
               pgbuttons:false,
               loadui:'block',
               deepempty:true,
               ignoreCase: true,
               autoencode:true,
               jsonReader :{root: 'glList',
                   cell:"",
                   repeatitems: false
                }, 
               treeReader : {
                    level_field: "level",
                    left_field:"lft",
                    right_field: "rgt",
                    leaf_field: "isLeaf",
                    parent_id_field: "parentId",
                    expanded_field: "expanded",
                    loaded: "loaded"
                },
               treedatatype: "json",
               treeGridModel:'adjacency',
               ExpandColClick: true,
               loadonce:true, 
               ExpandColumn : 'text', 
//             cellSubmit: 'remote',  
               gridComplete:function()
               {
                   myData = GlTree.jqGrid('getRowData');
               }

       }); 
```

// 此函数在格式化程序中用于显示单选按钮

```
function gLCheckbox(amount,options,rData)
{
     if(rData.additionalInfo === 'G')
           return '<div id ="checkglId"><input type="radio" id="radioId" name ="radioName" value="' +rData.text+'" align = "center",offval="off" onclick="selectGLElement(\''+rData.id+'\');" />&nbsp;'+amount + '</div>';
    else
           return amount;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T10:11:57.790

我终于得到了我的问题的答案。我现在能够将大量数据自动放入 treegrid 中。

我使用了 treegrid 邻接模型 aud 按需自动加载树。但是我的树节点被加载到 onSelectRow 上。

```
onSelectRow: function(id){ 
            var data = $(this).jqGrid("getRowData", id);
            getChildTree(data,data.glId);

        } 

function getChildTree(postdata,id)
{
    $.ajax({
            type: "GET",
            url: "GlChildTreeStructure.action?glId="+id,
            dataType: "json",
            success: function(json){
                JsonDataObj = json;
                    for(var i=0;i<JsonDataObj.ChildTreeList.length;i++){
                        if(JsonDataObj.ChildTreeList.isLeaf==true){
                            //alert("JsonDataObj.ChildTreeList : "+JsonDataObj.ChildTreeList[i].glId)
                             $("#GlTreeStructureGrid").jqGrid("addChildNode",JsonDataObj.ChildTreeList[i].glId, JsonDataObj.ChildTreeList[i].parentId,
                                        {
                                         "glId":JsonDataObj.ChildTreeList[i].glId,
                                         "text":JsonDataObj.ChildTreeList[i].text,
                                         "additionalInfo":JsonDataObj.ChildTreeList[i].additionalInfo,
                                         "alternativeParent":JsonDataObj.ChildTreeList[i].alternativeParent,
                                         "parentId":JsonDataObj.ChildTreeList[i].parentId,
                                         "parent":JsonDataObj.ChildTreeList[i].parentId,
                                         "dataType":JsonDataObj.ChildTreeList[i].dataType,
                                         "periodType":JsonDataObj.ChildTreeList[i].periodType,
                                         "glPresentationOrder":JsonDataObj.ChildTreeList[i].glPresentationOrder,
                                         "extendedLink":JsonDataObj.ChildTreeList[i].extendedLink,
                                         "parentCalculation":JsonDataObj.ChildTreeList[i].parentCalculation,
                                         "isLeaf":JsonDataObj.ChildTreeList[i].isLeaf,
                                         "level":JsonDataObj.ChildTreeList[i].level,
                                         "lft":JsonDataObj.ChildTreeList[i].lft,
                                         "expanded":JsonDataObj.ChildTreeList[i].expanded,
                                         "loaded":JsonDataObj.ChildTreeList[i].loaded,
                                         "icon":JsonDataObj.ChildTreeList[i].icon,
                                         "rgt":JsonDataObj.ChildTreeList[i].rgt});

                        }else{
                        //  alert("JsonDataObj.ChildTreeList : "+JsonDataObj.ChildTreeList[i].glId)
                             $("#GlTreeStructureGrid").jqGrid("addChildNode",JsonDataObj.ChildTreeList[i].glId, JsonDataObj.ChildTreeList[i].parentId,
                                        {
                                         "glId":JsonDataObj.ChildTreeList[i].glId,
                                         "text":JsonDataObj.ChildTreeList[i].text,
                                         "additionalInfo":JsonDataObj.ChildTreeList[i].additionalInfo,
                                         "alternativeParent":JsonDataObj.ChildTreeList[i].alternativeParent,
                                         "parentId":JsonDataObj.ChildTreeList[i].parentId,
                                         "dataType":JsonDataObj.ChildTreeList[i].dataType,
                                         "parent":JsonDataObj.ChildTreeList[i].parentId,
                                         "periodType":JsonDataObj.ChildTreeList[i].periodType,
                                         "glPresentationOrder":JsonDataObj.ChildTreeList[i].glPresentationOrder,
                                         "extendedLink":JsonDataObj.ChildTreeList[i].extendedLink,
                                         "parentCalculation":JsonDataObj.ChildTreeList[i].parentCalculation,
                                         "isLeaf":JsonDataObj.ChildTreeList[i].isLeaf,
                                         "level":JsonDataObj.ChildTreeList[i].level,
                                         "lft":JsonDataObj.ChildTreeList[i].lft,
                                         "expanded":JsonDataObj.ChildTreeList[i].expanded,
                                         "loaded":JsonDataObj.ChildTreeList[i].loaded,
                                         "icon":JsonDataObj.ChildTreeList[i].icon,
                                         "rgt":JsonDataObj.ChildTreeList[i].rgt});
                        }

                    }

            },

    });

} 
```

# spring - Spring、Atomikos、Tibco EMS 5.1 集成问题

> ID：10292894
> 
> 赞同：0
> 
> 时间：2012-04-24T06:38:20.017
> 
> 标签：spring, configuration, atomikos, tibco-ems

我正在尝试在我的 Spring 应用程序中配置[Atomikos 。](http://www.atomikos.com/)我在用：

*   Atomikos 3.7.1 (TransactionsEssentials)
*   春天 3.0.2
*   Tibco EMS 5.1

有人可以给我使用 JNDI for JMS 的连接工厂的配置详细信息以及有关 Tibco EMS 配置的详细信息吗？

我试过以下方法：

```
 <bean id="jmsTemplate2" class="org.springframework.jms.core.JmsTemplate" >
    <property name="connectionFactory" ref="amqConnectionFactory" />
    <property name="defaultDestination" ref="queue" />
    <property name="sessionTransacted" value="true"/>
    <property name="messageConverter" ref="messageConverter"></property>
</bean>

<bean id="amqConnectionFactory" class="com.atomikos.jms.AtomikosConnectionFactoryBean"    init-method="init">
    <property name="uniqueResourceName" value="XAEMS" />
    <property name="xaConnectionFactory" ref="connectionFactory" />
    <property name="poolSize" value="10" />
</bean>

<jee:jndi-lookup id="connectionFactory" jndi-name="emsConnectionFactory">
    <jee:environment>
        java.naming.factory.initial=com.tibco.tibjms.naming.TibjmsInitialContextFactory
        java.naming.provider.url=tibjmsnaming://localhost:7222
    </jee:environment>
</jee:jndi-lookup> 

<jee:jndi-lookup id="queue" jndi-name="emsQueue">
    <jee:environment>
        java.naming.factory.initial=com.tibco.tibjms.naming.TibjmsInitialContextFactory
        java.naming.provider.url=tibjmsnaming://localhost:7222
    </jee:environment>
</jee:jndi-lookup> 
```

但是得到这个错误：

```
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'amqConnectionFactory' defined in file [C:\springsource\vfabric-tc-server-developer-2.6.4.RELEASE\spring-insight-instance\wtpwebapps\iRebal-Backend-Poc-Web-Integration-Final-xa\WEB-INF\classes\META-INF\spring\batch\jobs\priority-queue.xml]: Initialization of bean failed; nested exception is org.springframework.beans.ConversionNotSupportedException: Failed to convert property value of type 'com.tibco.tibjms.naming.TibjmsFederatedQueueConnectionFactory' to required type 'javax.jms.XAConnectionFactory' for property 'xaConnectionFactory'; nested exception is java.lang.IllegalStateException: Cannot convert value of type [com.tibco.tibjms.naming.TibjmsFederatedQueueConnectionFactory] to required type [javax.jms.XAConnectionFactory] for property 'xaConnectionFactory': no matching editors or conversion strategy found
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:527)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:293)
at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:290)
at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:192)
at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:322)
... 39 more
Caused by: org.springframework.beans.ConversionNotSupportedException: Failed to convert property value of type 'com.tibco.tibjms.naming.TibjmsFederatedQueueConnectionFactory' to required type 'javax.jms.XAConnectionFactory' for property 'xaConnectionFactory'; nested exception is java.lang.IllegalStateException: Cannot convert value of type [com.tibco.tibjms.naming.TibjmsFederatedQueueConnectionFactory] to required type [javax.jms.XAConnectionFactory] for property 'xaConnectionFactory': no matching editors or conversion strategy found
at org.springframework.beans.BeanWrapperImpl 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-17T20:35:38.097

这个答案对于OP来说为时已晚，但为了后代：

您想要的类是 com.tibco.tibjms.TibjmsXAConnectionFactory。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T06:48:32.897

似乎在类中，`com.atomikos.jms.AtomikosConnectionFactoryBean`您有一个名为`xaConnectionFactory`其类型（或其 getter 返回类型）的字段为`javax.jms.XAConnectionFactory`. 但是，在 Spring 配置文件中，您将该字段配置为使用类型为`com.tibco.tibjms.naming.TibjmsFederatedQueueConnectionFactory`.

显然`com.tibco.tibjms.naming.TibjmsFederatedQueueConnectionFactory`不能转换为`javax.jms.XAConnectionFactory`.

# php - 字符串到数组 - 只有一个索引的数组 (PHP)

> ID：10292895
> 
> 赞同：1
> 
> 时间：2012-04-24T06:38:21.887
> 
> 标签：php, arrays, string, indexing, explode

我有这个字符串：

```
$string = "123456789" 
```

它应该变成一个数组：

```
Array ( [0] => 123 ) Array ( [1] => 456 ) Array ( [2] => 789 ) 
```

但我得到：

```
Array ( [0] => 123 ) Array ( [0] => 456 ) Array ( [0] => 789 ) 
```

我使用循环来获取这个字符串：

```
for ($i=0; $i<$num; $i++)
{
    $string = $tree['a']['b'][$i]['c'];
} 
```

接下来我使用explode 函数来获取一个数组。为什么我得到的数组只有一个索引 - 零？我应该怎么做才能得到：

```
 Array ( [0] => 123 ) Array ( [1] => 456 ) Array ( [2] => 789 ). 
```

请帮助我理解这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T06:41:18.080

用于`str_split($string, 3)`创建数组。

[http://php.net/manual/en/function.str-split.php](http://php.net/manual/en/function.str-split.php)

# windows - Windows 上的 Git，“内存不足 - malloc 失败”

> ID：10292903
> 
> 赞同：75
> 
> 时间：2012-04-24T06:38:58.873
> 
> 标签：windows, git

遇到存储库问题并尝试了几乎所有可能的配置设置，例如。pack.WindowMemory 等

我相信有人已经将一个大文件签入远程存储库，现在每次我尝试拉取或推送它时，GIT 都会尝试打包它并耗尽内存：

```
Auto packing the repository for optimum performance. You may also
run "git gc" manually. See "git help gc" for more information.
Counting objects: 6279, done.
Compressing objects: 100% (6147/6147), done.
fatal: Out of memory, malloc failed (tried to allocate 1549040327 bytes)
error: failed to run repack 
```

尝试了**git gc**和**git repack**各种选项，但一直返回相同的错误。

几乎放弃了，即将创建一个新的回购，但我想我会先问问:)

* * *

## 回答 #1

> 赞同：113
> 
> 时间：2012-10-09T21:01:33.260

我在[这里](https://github.com/hbons/SparkleShare/issues/519)找到了一个对我有用的解决方案。

在 .git/config 文件（客户端和/或服务器）中，我添加了以下内容：

```
[core]
  packedGitLimit = 128m
  packedGitWindowSize = 128m

[pack]
  deltaCacheSize = 128m
  packSizeLimit = 128m
  windowMemory = 128m 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-04-24T07:10:38.537

作为参考（您可能已经看过），处理该问题的 msysgit 案例是[票证 292](http://code.google.com/p/msysgit/issues/detail?id=292)。

它提出了几种解决方法：

*   全局禁用增量压缩。为此，您必须[设置`pack.window`为 0](http://thread.gmane.org/gmane.comp.version-control.git/123769/focus=123863)。当然，这将使存储库在磁盘上更大。
*   禁用某些文件的增量压缩。检查[手册页](http://schacon.github.com/git/gitattributes.html)`delta`上的标志以.[`gitattributes`](http://schacon.github.com/git/gitattributes.html)
*   `git config --global pack.threads 1`
*   `git config --global pack.windowMemory 256m`（您已经尝试过那个，但在“[拉警告时出错：次优包 - 内存不足](https://stackoverflow.com/a/9041551/6309)”中也有说明）
*   其他设置在“ [git push fatal：无法创建线程：资源暂时不可用](https://stackoverflow.com/questions/9905257/git-push-fatal-unable-to-create-thread-resource-temporarily-unavailable/9905822#9905822)”和“ [Git pull failed with bad pack header error](https://stackoverflow.com/questions/7362709/git-pull-fails-with-bad-pack-header-error) ”中提到，以防与 -`pack`相关。
*   [sm4](https://stackoverflow.com/users/1667977/sm4)[在评论中](https://stackoverflow.com/questions/10292903/git-on-windows-out-of-memory-malloc-failed/10293304#comment50511279_10293304)添加：

> 要禁用某些文件的增量压缩，请在`.git/info/attributes`中添加：

```
*.zip binary -delta 
```

从[Gitattributes 手册页](http://git-scm.com/docs/gitattributes)：

> `delta`对于属性设置为 false的路径，不会尝试对 blob 进行增量压缩。

* * *

也许更简单的解决方法是在提交大文件之前以某种方式重置历史记录，然后从那里重做其他提交。

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2013-08-29T16:15:17.753

**编辑**：由于[git-v2.5.0](https://github.com/git-for-windows/git/releases/tag/v2.5.0.windows.1) [^((Aug/2015))]，[git-for-windows](https://git-for-windows.github.io/)（以前的 MSysGit ）
      提供了[Pan.student](https://stackoverflow.com/users/1272428)注意到的[64 位版本](https://github.com/git-for-windows/git/releases/latest/)。       在这个答案中，我建议[安装 Cygwin](https://cygwin.com/install.html) 64 位（提供 64 位 Git 版本）。

* * *

当达到 4GB 障碍时，我使用[MSysGit](http://code.google.com/p/msysgit/)遇到了类似的`Out of memory, malloc failed`问题：

```
> git --version
git version 1.8.3.msysgit.0

> file path/Git/cmd/git
path/Git/cmd/git: PE32 executable for MS Windows (console) Intel 80386 32-bit

> time git clone --bare -v ssh://linuxhost/path/repo.git
Cloning into bare repository 'repo.git'...
remote: Counting objects: 1664490, done.
remote: Compressing objects: 100% (384843/384843), done.
remote: Total 1664490 (delta 1029586), reused 1664490 (delta 1029586)
Receiving objects: 100% (1664490/1664490), 550.96 MiB | 1.55 MiB/s, done.
Resolving deltas: 100% (1029586/1029586), done.
fatal: Out of memory, malloc failed (tried to allocate 4691583 bytes)
fatal: remote did not send all necessary objects

real    13m8.901s
user    0m0.000s
sys     0m0.015s 
```

![MSysGit 在达到 4 GB 障碍后崩溃](../Images/ddb95f2597f6914befb84f15fff241bd.png)

[最后来自Cygwin](http://www.cygwin.com/)的 git 64 位修复它：

```
> git --version
git version 1.7.9

> file /usr/bin/git
/usr/bin/git: PE32+ executable (console) x86-64 (stripped to external PDB), for MS Windows

> time git clone --bare -v ssh://linuxhost/path/repo.git
Cloning into bare repository 'repo.git'...
remote: Counting objects: 1664490, done.
remote: Compressing objects: 100% (384843/384843), done.
remote: Total 1664490 (delta 1029586), reused 1664490 (delta 1029586)
Receiving objects: 100% (1664490/1664490), 550.96 MiB | 9.19 MiB/s, done.
Resolving deltas: 100% (1029586/1029586), done.

real    13m9.451s
user    3m2.488s
sys     3m53.234s 
```

![来自 Cygwin 的 git 64 位成功](../Images/1985a7e16def30c6eba8bc915afac312.png)

仅供参考`linuxhost`64 位：

```
repo.git> git config -l
user.email=name@company.com
core.repositoryformatversion=0
core.filemode=true
core.bare=true

repo.git> git --version
git version 1.8.3.4

repo.git> uname -a
Linux linuxhost 2.6.32-279.19.1.el6.x86_64 #1 SMP Sat Nov 24 14:35:28 EST 2012 x86_64 x86_64 x86_64 GNU/Linux 
```

如果我的回答不能解决您的问题，您还可以查看以下页面：

*   [即使有 5.6GB RAM 和 50GB 硬盘，git clone 也会内存不足](https://stackoverflow.com/questions/12147773)
*   [Git 克隆因内存不足错误而失败 - “致命：内存不足，malloc 失败（尝试分配 905574791 字节）/致命：索引包失败”</a>](https://stackoverflow.com/questions/7607970)
[](https://stackoverflow.com/questions/7607970)
*   [git克隆内存分配错误](https://stackoverflow.com/questions/1590198)
*   [MSysGit 问题跟踪器](http://code.google.com/p/msysgit/issues/list?can=1&q=clone+memory)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-03-21T15:01:28.140

所选答案中建议的某些选项似乎仅与问题部分相关或根本没有必要。

通过查看[https://git-scm.com/docs/git-config](https://git-scm.com/docs/git-config)，似乎只需设置以下选项就足够了（仅针对此处的项目设置）：

```
git config pack.windowMemory 512m 
```

从手册：

> pack.windowMemory
> 
> 当命令行上没有给出限制时，git-pack-objects[1] 中每个线程为打包窗口内存消耗的最大内存大小。该值可以后缀为“k”、“m”或“g”。当未配置（或明确设置为 0）时，将没有限制。

*有了这个，我从来没有超过每个线程*指定的 512m ，实际使用的 RAM 大约是大部分时间的一半。当然，这里选择的数量是用户特定的，具体取决于可用的 RAM 和线程数。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2016-06-16T14:23:36.780

这对我有用，但我必须通过命令行设置选项：

```
git --global core\pack [param] value 
```

# ruby - 如何使用访问令牌在 ruby on rails 中在 Twitter 上获取和发布

> ID：10292906
> 
> 赞同：0
> 
> 时间：2012-04-24T06:39:13.620
> 
> 标签：ruby, ruby-on-rails-3, twitter

我正在使用omniauth 通过twitter 对用户进行身份验证。omn​​iauth 提供访问令牌。现在我想向 twitter 发送 get 或 post 请求。我不想使用任何宝石。我想处理 net::http。

即使在 twitter api 文档中！我无法为此找到一个好的教程

有人可以帮忙吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T07:15:48.147

[这](http://michaelhallsmoore.com/blog/Getting-to-grips-with-the-Ruby-OAuth-gem-and-the-Twitter-API)正是您所需要的，因此，既然您已经从omniauth 获得了令牌和秘密，现在您将使用它：

```
def prepare_access_token(oauth_token, oauth_token_secret)
  consumer = OAuth::Consumer.new("APIKey", "APISecret", { :site => "https://api.twitter.com", :request_token_path => '/oauth/request_token', :access_token_path => '/oauth/access_token', :authorize_path => '/oauth/authorize', :scheme => :header })
  token_hash = { :oauth_token => oauth_token, :oauth_token_secret => oauth_token_secret }  
  access_token = OAuth::AccessToken.from_hash(consumer, token_hash )
  access_token
end 
```

然后，例如，您发布一条推文：

```
msg = {'status' => 'Hey look I can tweet via OAuth!'}
access_token = prepare_access_token(token, secret)
response = access_token.post('https://api.twitter.com/1/statuses/update.json', msg, { 'Accept' => 'application/xml' }) 
```

阅读链接上的文章以获取更多信息。

# php - 如何使用带有 YUI 压缩器的 Minify PHP？

> ID：10292911
> 
> 赞同：1
> 
> 时间：2012-04-24T06:39:28.560
> 
> 标签：php, yui, minify

我想使用 YUI 压缩器来[缩小 PHP](http://code.google.com/p/minify/)而不是默认的 JSmin。有没有人有设置这个的经验？

现在我正在使用 groupsConfig.php 来组合 JS。

```
return array(
    'jsAll'  => array('//contenido/themes/bam/assets/js/jquery.js', '//contenido/themes/bam/assets/js/modernizr.js','//contenido/themes/bam/assets/js/imgpreload.js', '//contenido/themes/bam/assets/js/imgpreload.js', '//contenido/themes/bam/assets/js/history.js','//contenido/themes/bam/assets/js/ajaxify.js', '//contenido/themes/bam/assets/js/isotope.js'),
    'jsHome' => array('//contenido/themes/bam/assets/js/easing.js','//contenido/themes/bam/assets/js/scrollable.js', '//contenido/themes/bam/assets/js/home.js'),
    'cssAll' => array('//contenido/themes/bam/bam.css'),
); 
```

正如[主页上所说](http://code.google.com/p/minify/)：

> 使用 Douglas Crockford 的 JSMin 库和自定义类的增强端口来缩小 CSS 和 HTML

我在 config.php 中有以下代码，但是在尝试查看组合的 js 文件时出现 500 错误：

```
function yuiJs($js) {
    require_once '/lib/Minify/YUICompressor.php'; 
    Minify_YUICompressor::$jarFile = '/lib/yuicompressor-2.4.2.jar'; 
    Minify_YUICompressor::$tempDir = '/temp'; 
    return Minify_YUICompressor::minifyJs($js); 
}
$min_serveOptions['minifiers']['application/x-javascript'] = 'yuiJs'; 
```

似乎 lib/Minify/YUICompressor.php 中有几行需要配置，我不确定我是否做得对：

```
class Minify_YUICompressor {

    /**
     * Filepath of the YUI Compressor jar file. This must be set before
     * calling minifyJs() or minifyCss().
     *
     * @var string
     */
    public static $jarFile = '../yuicompressor-2.4.2.jar';

    /**
     * Writable temp directory. This must be set before calling minifyJs()
     * or minifyCss().
     *
     * @var string
     */
    public static $tempDir = '../../temp/';

    /**
     * Filepath of "java" executable (may be needed if not in shell's PATH)
     *
     * @var string
     */
    public static $javaExecutable = 'java'; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T06:36:47.237

我在 Windows 上遇到了同样的问题。似乎 jar 文件需要可执行才能运行 yui 压缩器。所以，我必须从 YUICompressor.php 中删除可执行检查

```
#132 

private static function _prepare()
    {
        if (! is_file(self::$jarFile)) {
            throw new Exception('Minify_YUICompressor : $jarFile('.self::$jarFile.') is not a valid file.');
        }
//         if (! is_executable(self::$jarFile)) {
//             throw new Exception('Minify_YUICompressor : $jarFile('.self::$jarFile.') is not executable.');
//         }
        if (! is_dir(self::$tempDir)) {
            throw new Exception('Minify_YUICompressor : $tempDir('.self::$tempDir.') is not a valid direcotry.');
        }
        if (! is_writable(self::$tempDir)) {
            throw new Exception('Minify_YUICompressor : $tempDir('.self::$tempDir.') is not writable.');
        }
    } 
```

这很好用。

# git - Git，从其他两个分支（B和C）创建本地分支（A），然后在没有C文件的情况下从A合并到B

> ID：10292912
> 
> 赞同：3
> 
> 时间：2012-04-24T06:39:41.073
> 
> 标签：git

我开发 Magento 模块，我有两个 repos，第一个是我的模块，另一个是 Magento 本身。我将我的模块 repo 克隆到目录，然后将 Magento repo 添加为远程，并将两个分支合并到一个名为 testing 的本地分支中。它工作正常。但是在开发时，我需要在编辑器中打开两个项目（模块和 Magento），所以我在测试分支中编辑代码，然后我需要提交这些更改。但是我不能只将测试合并到模块分支，因为我在测试分支中有 Magento 文件，而我在模块分支中不需要这些文件。

有没有办法在没有来自 magento 分支的文件的情况下合并从测试到模块分支的更改？

子模块和子树不起作用，因为我的分支与其根目录重叠，模块不仅仅是 magento 分支的子目录。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-04T14:25:19.540

你真的想将你的测试分支合并到你的模块分支吗？即使 Magento 文件在您寻求的合并后不会出现，所有 Magento 历史都将与您的模块分支的历史密不可分。这可能不是你想要的。

如果您真的想要合并，您可以**编写自己的合并策略或使用`git merge --no-commit`**手动删除模块分支中不需要的 Magento 文件并提交结果合并。如果手动删除工作量太大，您可以`git revert -n -m1 <unwanted-merge-id>`改用。

我建议的更清洁的解决方案是**挑选并重新创建测试分支**。您总是将 Magento 分支合并到您的测试分支中，我假设您在测试中没有其他合并。

这个从测试分支中挑选（复制到当前分支）的非合并提交列表，因为它与当前分支的共同祖先：

```
git rev-list --reverse --first-parent --no-merges ..testing | git cherry-pick --stdin 
```

然后您可以摆脱旧的测试分支，因为它包含不必要的合并，并且其内容与您的模块分支相同。您可以在模块分支的顶部再次启动它。从您的测试分支调用`git reset --hard module`中——但请确保您事先没有未提交的更改，因为它们会丢失！

# ios - Avmetadataitem 从 iOS 上的 iTunes 或 ID3 元数据中获取 trackNumber

> ID：10292913
> 
> 赞同：1
> 
> 时间：2012-04-24T06:39:52.200
> 
> 标签：ios, avmetadataitem

我正在尝试获取 aac、mp3 或 mp4 文件的 trackNumber。它不在 commonMetadata 中，所以我开始研究其他元数据键。我发现了一些看起来像它的东西，但我还无法阅读它，也无法理解它。即使是原始数据对我来说也毫无意义。

目前，我只是尝试使用以下基本代码来获取它：

```
 NSArray *meta = [asset metadataForFormat:AVMetadataFormatiTunesMetadata];
    for ( AVMetadataItem* item in meta ) {
        id key = [item key];
        NSString *value = [item stringValue];
        NSLog(@"key = %@, value = %@", key, value);
    } 
```

知道我正在寻找 AVMetadataiTunesMetadataKeyTrackNumber。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-08T20:53:31.667

我意识到这个线程已经很老了，但我最近自己也遇到了这个问题。我需要所有可以收集的元数据，并提出了以下解决方案。这不是最优雅的解决方案，但效果很好。用斯威夫特写的。

```
func processFile(url:NSURL) {
    let yearKey = -1453039239
    let genreKey = -1452841618
    let encoderKey = -1451987089
    let trackKey = "com.apple.iTunes.iTunes_CDDB_TrackNumber"
    let CDDBKey = "com.apple.iTunes.iTunes_CDDB_1"
    let path:String = url.absoluteString
    let asset = AVURLAsset(URL: url, options: nil)
    let format = AVMetadataFormatiTunesMetadata

    for item:AVMetadataItem in asset.metadataForFormat(format) as Array<AVMetadataItem> {

        if let key = item.commonKey { if key == "title" { println(item.value()) } }
        if let key = item.commonKey { if key == "artist" { println(item.value()) } }
        if let key = item.commonKey { if key == "albumName" { println(item.value()) } }
        if let key = item.commonKey { if key == "creationDate" { println(item.value()) } }
        if let key = item.commonKey { if key == "artwork" { println( "art" ) } }

        if item.key().isKindOfClass(NSNumber) {
            if item.key() as NSNumber == yearKey { println("year: \(item.numberValue)") }
            if item.key() as NSNumber == genreKey { println("genre: \(item.stringValue)") }
            if item.key() as NSNumber == encoderKey { println("encoder: \(item.stringValue)") }
        }

        if item.key().isKindOfClass(NSString) {
            if item.key() as String == trackKey { println("track: \(item.stringValue)") }
            if item.key() as String == CDDBKey { println("CDDB: \(item.stringValue)") }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-04T08:48:13.363

这个问题相当老了，但我遇到了类似的问题，所以对于仍然需要解决方案的人来说。我设法找出使用以下代码获取总曲目编号和曲目编号的方法：

```
NSString *value = @"<0000000a 00140000>" //[item stringValue] (in this case 10/20)
NSString *track_no_hex = [[value componentsSeparatedByString:@" "][0] stringByReplacingOccurrencesOfString:@"<" withString:@""];
NSString *total_track_no_hex = [[value componentsSeparatedByString:@" "][1] stringByReplacingOccurrencesOfString:@">" withString:@""];

NSString *track_no = @"";
for(int k=0;k<=4;k+=4){
    unsigned result = 0;
    NSScanner *scanner = [NSScanner scannerWithString:[track_no_hex substringWithRange:NSMakeRange(k, 4)]];
    [scanner scanHexInt:&result];
    if(result == 00){

    }
    else{
         track_no = [NSString stringWithFormat:@"%@%u",track_no,result];
    }
}

NSString *total_track_no = @"";
for(int k=0;k<=4;k+=4){
    unsigned result = 0;
    NSScanner *scanner;
    if(k+4<=[total_track_no_hex length]){
        scanner = [NSScanner scannerWithString:[total_track_no_hex substringWithRange:NSMakeRange(k, 4)]];
    }
    else{

    }
    [scanner scanHexInt:&result];
    if(result == 00){

    }
    else{
       total_track_no = [NSString stringWithFormat:@"%@%u",total_track_no,result];
    }
}
NSLog(@"%@/%@",track_no, total_track_no); // Output 10/20 
```

这适用于 14461 以下的曲目编号，考虑到 iTunes 最大曲目编号为 999，曲目编号应该足够大。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T07:00:38.423

如果您的曲目有 ID3 元数据，您可以轻松获取曲目编号的 numberValue。如果您的曲目有 iTunesMetadata，那么 dataValue 就是您所得到的。您必须自己猜测 intValue。

到目前为止，我在这里。我很确定我需要在字节部分上做更多的工作。

```
 NSArray *meta = [asset metadataForFormat:AVMetadataFormatiTunesMetadata];
    NSArray *itfilteredKeys = [AVMetadataItem metadataItemsFromArray:meta withKey:AVMetadataiTunesMetadataKeyTrackNumber keySpace:nil];
    for ( AVMetadataItem* item in itfilteredKeys ) {
        NSData *value = [item dataValue];
        unsigned char aBuffer[4];
        [value getBytes:aBuffer length:4];
        unsigned char *n = [value bytes];
        int value1 = aBuffer[3];
        NSLog(@"trackNumber from iTunes = %i", value1);
    } 
```

# c++ - 如何推断模板中函数的返回类型

> ID：10292915
> 
> 赞同：1
> 
> 时间：2012-04-24T06:39:55.377
> 
> 标签：c++, templates, inheritance, types, bind

我正在尝试编写一个名为 Binder 的模板类，它将函数和参数作为一个整体绑定，以绑定函数的返回类型来区分，这是我的方法：

```
template <typename return_type>
class Binder
{
    public:
        virtual return_type call() {}
}; 
```

调用`call`会调用一些带参数的预绑定函数，并返回结果。我想要一些从 Binder 继承的模板类来完成真正的绑定工作。下面是一个单参数函数绑定类：

```
template<typename func_t, typename param0_t>
class Binder_1 : public Binder< ***return_type*** > 
        // HOW TO DETERMINE THE RETURN TYPE OF func_t? 
        // decltype(func(param0)) is available when writing call(),
        // but at this point, I can't use the variables...
{
    public:
        const func_t &func;
        const param0_t &param0;

        Binder_1 (const func_t &func, const param0_t &param0)
            : func(func), param0(param0) {}

        decltype(func(param0)) call()
        {
            return func(param0);
        }            
}
// Binder_2, Binder_3, .... 
```

这就是我想要实现的目标：

```
template<typename func_t, typename param0_t>
Binder_1<func_t, param0_t> bind(const func_t &func, const param0_t &param0)
{
    reurn Binder_1<func_t, param0_t>(func, param0);
}

// ... `bind` for 2, 3, 4, .... number of paramters

int func(int t) { return t; }

double foo2(double a, double b) { return a > b ? a : b; }
double foo1(double a) { return a; }
int main()
{
    Binder<int> int_binder = bind(func, 1);
    int result = int_binder.call(); // this actually calls func(1);

    Binder<double> double_binder = bind(foo2, 1.0, 2.0);
    double tmp = double_binder.call(); // calls foo2(1.0, 2.0);
    double_binder = bind(foo1, 1.0);
    tmp = double_binder.call(); // calls foo1(1.0)
} 
```

可以`bind`调整 boost 库中的函数来实现此功能吗？也欢迎类似的解决方案！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T07:53:52.667

介绍[`std::declval<T>()`](http://en.cppreference.com/w/cpp/utility/declval)。

这是一个声明为的虚拟函数：

```
template <typename T>
typename std::add_rvalue_reference<T>::type declval();

// This means it returns T&& if T is no a reference 
//                     or T& if T is already a reference 
```

并且从未真正定义过。

因此，它只能在未评估的上下文中使用，例如`sizeof`or... `decltype`！

有了这个，你得到：

```
template<typename func_t, typename param0_t>
class Binder_1: public Binder<decltype(std::declval<func_t>()(std::declval<param0_t>())> 
```

这有点冗长，但是嘿！有用 ：）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T06:42:54.303

您也许可以使用[`result_of`](http://en.cppreference.com/w/cpp/types/result_of).

# mercurial-hook - 如何通过 mercurial 传入挂钩运行“hg update”

> ID：10292917
> 
> 赞同：6
> 
> 时间：2012-04-24T06:40:00.690
> 
> 标签：mercurial-hook

`hg update`在传入钩子中运行的正确方法是什么？

是吗：

```
[hooks]
incoming.foo = hg update 
```

或者[这个](https://stackoverflow.com/questions/8972409/call-a-mercurial-command-hg-update-from-a-python-hook)

还是有更优雅的方式来做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-04T17:52:21.173

[常见问题解答](http://mercurial.selenic.com/wiki/FAQ#FAQ.2BAC8-CommonProblems.Any_way_to_.27hg_push.27_and_have_an_automatic_.27hg_update.27_on_the_remote_server.3F)提出了以下建议：

```
[hooks]
changegroup = hg update 
```

> 这进入远程存储库的 .hg/hgrc

所以，确实，这是简单而正确的做法。您的示例使用`incoming`了 ，但是该挂钩为每个变更集运行一次。钩子在`changegroup`所有更改都被拉入后完成一次，所以我认为它可能更适合您的需求。

如果您最终需要更多控制，您可以创建一个进程内挂钩脚本来满足这些需求。Wiki 有一些[很好的例子](http://mercurial.selenic.com/wiki/HookExamples)。

# apache - 我怎样才能模式重写这个网址？

> ID：10292919
> 
> 赞同：0
> 
> 时间：2012-04-24T06:40:06.303
> 
> 标签：apache, .htaccess, mod-rewrite

> **可能重复：**
> [mod_rewrite：重写为“漂亮的 URL”？](https://stackoverflow.com/questions/2245831/mod-rewrite-rewrite-to-pretty-url)

我想修改这个网址

[http://www.mywebsite.com/art/p.php?id=180](http://www.mywebsite.com/art/p.php?id=180) 到 [http://www.mywebsite.com/art/180](http://www.mywebsite.com/art/180)

谁能告诉我如何在 .htaccess 文件中做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T11:36:27.087

如果您希望用户能够输入[http://www.mywebsite.com/art/180](http://www.mywebsite.com/art/180)并实际看到[http://www.mywebsite.com/art/p.php?id=180](http://www.mywebsite.com/art/p.php?id=180)的输出，那么您可以使用以下内容：-

```
RewriteEngine on    
RewriteBase /

RewriteRule ^art/(\d+)/?$          art/p.php?id=$1 [NC,L] 
```

如果您想将键入[http://www.mywebsite.com/art/p.php?id=180](http://www.mywebsite.com/art/p.php?id=180)的用户重定向到[http://www.mywebsite.com/art/180](http://www.mywebsite.com/art/180) ，那么您可以使用以下命令：-

```
RewriteEngine on    
RewriteBase /

RewriteCond %{QUERY_STRING}        ^id=(\d+)$ [NC]
RewriteRule ^art/p\.php$           /art/%1 [NC,L,R] 
```

说得通？

# excel - 如何使用 excel 宏将条件格式应用于多列

> ID：10292921
> 
> 赞同：2
> 
> 时间：2012-04-24T06:40:16.710
> 
> 标签：excel, vba

我创建了一个条件格式来根据一个单元格的值比较来更改颜色，但我不知道如何将这种格式应用于整个列甚至其他列？（我是否必须使用 for 循环来设置所有单元格的格式？）

```
'add conditionalFormating for one cell.
 Set rngCell = Cells(6, 7)
 Set objCF = rngCell.FormatConditions.Add _
            (Type:=xlExpression, _
            Formula1:="=" & rngCell.Address & " > " & rngCell.offset(, -3).Address)
'set formats for new CF

With objCF
    .Font.ColorIndex = 26
    .Interior.ColorIndex = 19
End With 
```

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T11:01:07.053

不幸的是，Excel 2007/2010 没有像早期版本那样广泛的宏记录功能

如果您在应用条件格式时引用了其他单元格，一个好方法是将其应用到一个单元格（您知道该怎么做），然后将格式复制到该列的其余部分；如果您正在填写一列，这不会导致您丢失您可能希望保留的其他单元格格式

所以我会开始你的代码

```
rngCell.FormatConditions.Delete 
```

然后，一旦添加了格式，您就可以简单地使用：

```
rngCell.Copy
rngOut.PasteSpecial xlPasteFormats 
```

，其中 rngOut 定义为以 rngCell 开始并填充到表中的最后一行

要应用于其他列，您可能需要不同的公式，因为存在不同的偏移量。为了尽量减少所需的代码，您始终可以手动将您想要的全套格式/条件格式添加到表格标题上方的隐藏行中。然后你可以使用表单的代码将所有这些复制到你的表中......

```
Range("A1:J1").Copy
Range("A3:J100").PasteSpecial xlPasteFormats 
```

...如果我们假设当您在第 1 行中添加格式化的行时您的标题被下推到第 2 行

尽管我在上面的示例中提到了单元格地址，但我始终建议参考范围名称并使用单元格表示法，例如 Range("A1") 是 Cells(1, 1)。在这个[Excel 专家视频](http://www.excel4business.com/videos/vba-ranges-rows-columns.php)中更详细地介绍了使用范围名称来定义表中的列。好处是巨大的...如果您的标题行是用范围名称定义的，您可以在表格上方插入一个新行，而无需重新编写任何代码

# vba - VB+水晶报告

> ID：10292922
> 
> 赞同：-1
> 
> 时间：2012-04-24T06:40:20.270
> 
> 标签：vba, crystal-reports

我在使用 vb 6.0 调用水晶报表 8.5 时遇到问题。我不知道如何使用 vb 调用该报告。这是我编写的代码示例

```
Private Sub Command1_Click()
    openConnection

    If Me.cmbMonth = "" And Me.cmbYear = "" Then
      MsgBox "Please select MONTH and YEAR"
      Exit Sub
      End If

    Set rs = New ADODB.Recordset
    With crp
        .ReportFileName App.Path & "\Report\VariableReport.rpt"
        .WindowTitle "Report"

    End With

End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T06:51:55.107

```
Dim tbl As CRAXDDRT.DatabaseTable
Dim cn As New ADODB.Connection
Dim rs As New ADODB.Recordset
Dim m_rpt As String

m_rpt = rs("Path") + "AnalysisCodeList2.rpt"

crystalrpt.reportfilename = m_rpt
crystalrpt.connect = rs("RptConnect")

crystalrpt.ParameterFields(0) = "PrintUser;" & m_curUser & ";true"
crystalrpt.ParameterFields(1) = "AnalysisCategory;" & CStr(Nz(cboAnalysisCategory.Value, "")) & ";true"

If Nz(cboAccountCodeTo.Value, "") <> "" And Nz(cboAccountCodeFm.Value, "") = "" Then
    crystalrpt.ParameterFields(2) = "AnalysisCodeRangeStart;" & CStr(Nz(cboAccountCodeFm.ItemData(0), "")) & ";true"
    crystalrpt.ParameterFields(3) = "AnalysisCodeRangeEnd;" & CStr(Nz(cboAccountCodeTo.Value, "")) & ";true"
Else
    crystalrpt.ParameterFields(2) = "AnalysisCodeRangeStart;" & CStr(Nz(cboAccountCodeFm.Value, "")) & ";true"
    crystalrpt.ParameterFields(3) = "AnalysisCodeRangeEnd;" & CStr(Nz(cboAccountCodeTo.Value, "")) & ";true"
End If

crystalrpt.ParameterFields(4) = "AnalysisCodeFilter;" & CStr(Replace(Nz(txtAccountCodeFilter.Value, ""), "*", "~")) & ";true"
crystalrpt.ParameterFields(5) = "MatchCase;" & CStr(Nz(txtMatchCase.Value, "")) & ";true"
crystalrpt.ParameterFields(6) = "Description;" & CStr(Nz(txtDescription.Value, "")) & ";true"

crystalrpt.Action = 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-16T11:09:28.747

导入 CrystalDecisions.CrystalReports.Engine Dim rpt 作为新的 ReportDocument rpt.Load(Application.StartupPath + "\Report\VariableReport.rpt") rpt.SetDataSource(rs)

# stata - 在 Stata 中，为什么 outreg 会覆盖其他文件？

> ID：10292923
> 
> 赞同：1
> 
> 时间：2012-04-24T06:40:33.057
> 
> 标签：stata

当我在 stata 中使用 outreg 命令导出到一个文件，然后使用它导出到另一个文件，然后返回向原始文件添加更多内容时，该命令就像只有一个文件一样。正如您在下面的代码中看到的，我已经清楚地区分了这两个文件：

```
 (...regression...)
    outreg using fileA, landscape title(Farm Level by ///
    Stratum w/Management) starlevels(10 5 1) ///
    ctitles("Variables","Strat 1 Log Rev") replace
    (...do some other stuff, export new stuff to new file...)
    outreg using fileB,stats(b) landscape ///
    title("Normalized Ricardian Model w/Management Variables"\ ///
    "Farm Level by Stratum") noautosumm ///
    ctitles("Variables","Strat 1 Log Rev (%)") replace
    (...then another regression which I want to export to the original file...)
    outreg using fileA,landscape title(Farm Level by ///
    Stratum w/Management) starlevels(10 5 1) ///
    ctitles("Variables","Strat 1 Log Cost") merge replace
    (...But it simply merges everything together as though fileA and fileB were one) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T12:38:06.067

尝试

```
...
outreg ...  , merge(tblnameA)
...
outreg ...  , merge(tblnameB) 
```

它包含在[http://www.stata-journal.com/article.html?article=sg97_4](http://www.stata-journal.com/article.html?article=sg97_4)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T14:20:54.017

你可能想调查一下`outreg2`。它是用户贡献的，还允许您指定附加和替换选项。安装类型

```
findit outreg2 
```

# asp.net-mvc - 有没有办法在不使用视图模型的情况下从 ActionResult 方法传递变量？

> ID：10292925
> 
> 赞同：2
> 
> 时间：2012-04-24T06:40:41.733
> 
> 标签：asp.net-mvc, asp.net-mvc-3, model-view-controller

假设我有这样的设置：

```
public ActionResult Create(int someUnrelatedNumber)
{
 ...
    return View();
}

[Post]
public ActionResult Create(SomeModel model, int someUnrelatedNumber)
{
 ...
} 
```

有没有办法在它们之间传递“someUnrelatedNumber”而不创建包含“SomeModel”和“someUnrelatedNumber”的视图模型？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T07:44:33.670

您可以使用 ViewBag（如果我了解您要做什么，甚至可能使用 TempData），但我倾向于尽可能使用强类型视图模型。

[http://rachelappel.com/when-to-use-viewbag-viewdata-or-tempdata-in-asp.net-mvc-3-applications](http://rachelappel.com/when-to-use-viewbag-viewdata-or-tempdata-in-asp.net-mvc-3-applications)

在模型绑定器方面，它通常会正确处理绑定，但您可能必须提供提示以使其绑定 SomeModel 和单独的 someUnrelatedNumber。视图中类似于以下内容。

```
<input type="hidden" name="someUnrelatedNumber" value="123" />
<input type="text" name="model.SomeRelatedNumber" value="123" /> 
```

ETC...

# html - 在没有服务器的情况下将 HTML 文件包含在另一个 HTML 文件中。那可能吗？

> ID：10292930
> 
> 赞同：3
> 
> 时间：2012-04-24T06:41:10.690
> 
> 标签：html, include, ssi

我有一个标题，它将在所有页面中保持一致。我想让它通用。所以我想在每个 HTML 页面中包含通用标题。

当我检查 HTML 包括时，我想出了需要服务器的 SSI。我的要求是我想在另一个没有服务器的情况下包含 HTML 文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T06:46:00.430

我从未听说过在另一个 html 文件中包含 html。我认为您可以尝试使用 iframe 来完成。

示例：header.html

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T12:58:20.133

我会这样做的方式是`div`用`.header`. 然后在`<p>`里面放一个`div`把`alt`文字放进去。然后在您的主 css 样式表中应用您的标题图像作为背景图像，并对文本进行负缩进。

```
Example
.hanger {background-image:url(header.png); text-indent:-1000px;} 
```

要调整标题的大小，您只需在`div.hanger`.

这有帮助吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-07T13:28:35.333

[如果您使用的是 firefox，则后面的问题](https://stackoverflow.com/questions/8988855/include-another-html-file-in-a-html-file)得到的答案适用于磁盘上的文件。

Chrome 出现跨站脚本错误

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-05-28T19:07:49.680

你可以有一个`<div>`标题，我会打电话给它`<div id="header">`。使用 jQuery，我们可以这样说：`$('#header').load(---html file---);`. 除了在所有页面中包含 JS 文件可能带来的痛苦之外，它还允许您在整个应用程序中全局更改标头。

# c++ - Boost asio::async_write 发送数千个小包

> ID：10292932
> 
> 赞同：1
> 
> 时间：2012-04-24T06:41:23.543
> 
> 标签：c++, performance, networking, boost, boost-asio

在我的应用程序中，每个连接我必须发送大约 10 kb/s。所有数据包都放在一个`std::deque`. 一个线程遍历双端队列并通过`asio::async_write`.

我的问题是我可以在一个线程中同时处理多少连接？我可以发送 20 Mbytes/s 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T07:46:43.680

Boost.Asio 作者 Kohlhoff 的[网站](http://think-async.com/)有一个[性能页面](http://think-async.com/Asio/LinuxPerformanceImprovements)。查看 Linux-perf-11 的图表，他在单个 CPU 上通过 1000 个连接获得了约 300 Mb/秒的吞吐量，这远高于每个连接 10kb/秒的目标。

# jquery - 具有 2 个值的 jQuery .find()

> ID：10292935
> 
> 赞同：-1
> 
> 时间：2012-04-24T06:41:46.103
> 
> 标签：jquery, jquery-xml

模型 xml：

```
<findkeyword id="1">
    <findinnertag>somevalue</findinnertag>
</findkeyword>
<findkeyword id="2">
    <findinnertag>somevalue</findinnertag>
</findkeyword>
<findkeyword id="3">
    <findinnertag>somevalue</findinnertag>
</findkeyword>
<findkeyword id="4">
    <findinnertag>somevalue</findinnertag>
</findkeyword>
<findkeyword id="5">
    <findinnertag>somevalue</findinnertag>
</findkeyword> 
```

如何使用 find 关键字 jquery xml 从上述 xml 中查找 2 到 4 之间的 id 值

在这种情况下，如何在 find 关键字里面写参数。

$(xml).find("findkeyword[id]")?

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T06:59:24.060

尝试这个：

```
$(xml).find('findkeyword').filter(function() { return this.id.match('[2-4]'); }); 
```

# php - 删除重复值功能

> ID：10292938
> 
> 赞同：0
> 
> 时间：2012-04-24T06:41:55.447
> 
> 标签：php

```
function remove_values($arr){
    $_a = array();
    while(list($key,$val) = each($arr)){
        $_a[$val] = 1;
    }
    return array_keys($_a);
} 
```

我不能很好地遵循上述功能。我不知道有什么效果 `$_a[$val] = 1;` 任何人都可以向我解释一下谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T06:44:46.660

出于功能的目的，为什么不直接使用[`array_unique($array)`](http://php.net/manual/en/function.array-unique.php)？

**像这样**

```
function remove_values($arr){
    return array_keys(array_unique($arr));
} 
```

* * *

### 更新：

好的，既然你正在努力学习。这是帖子中功能的解释

```
function remove_values($arr){
    $_a = array(); //Creates a temporary array to store matching
    while(list($key,$val) = each($arr)){ //till their is item is array, loop it 
        $_a[$val] = 1; //Store in the temporary array with array's values as index, thus eliminating the duplicates
           //^ Here storing with the value as index IS THE KEY
    }
    return array_keys($_a); //return only the keys, which in fact are the unique values
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T06:45:22.570

实际上非常好的功能。

```
$_a[$val] = 1; 
```

使每个元素都被签名一次，因此返回一次意味着删除重复项。比 array_keys($_a) 函数重建和排序数组。我喜欢它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T06:45:22.840

好吧，这一切就是将值插入到数组的键中。由于数组中的所有键都是唯一的，因此您将删除所有重复项。

`array_keys()`只需以普通形式返回该数组。

例子：

```
$arr = array('red', 'green', 'red');

$arr = remove_values($arr); 
```

给

```
array( 'red' => 1,
       'green' => 1); 
```

这导致

```
array('red', 'green'); 
```

因为“red”只能是一次键值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-24T07:16:26.653

它将值 1 分配给值部分。例如：

```
<?php

function remove_values($arr){
    $_a = array();

    while(list($key,$val) = each($arr)){
        $_a[$val] = 1;

    }
    print_r($_a);
    return array_keys($_a);
}

$arr = array('a' => 'apple', 'b' => 'banana', 'c' => 'cranberry');
$sed = remove_values($arr);
print_r($sed);
?> 
```

它返回两个数组值：

```
Array
(
    [apple] => 1
    [banana] => 1
    [cranberry] => 1
)
Array
(
    [0] => apple
    [1] => banana
    [2] => cranberry
) 
```

现在您很容易理解值“1”的影响。

# php - 同时写入同一个文件

> ID：10292940
> 
> 赞同：3
> 
> 时间：2012-04-24T06:42:05.057
> 
> 标签：php, filesystems, fopen, flock

好的，我知道这个网站上有关于这个问题的类似问题，但是这些问题和提供的答案都不是我所需要的。

我正在构建基于平面文件的 CMS。如果，例如：

1.  2, 3, 10..... fwrite 在附加模式请求同时到达同一个php文件“contact_form_messages_container.php”？

2.  2, 3, 10 ..... fwrite 在“w”模式请求来到同一个 php 文件，该文件包含特定页面访问的简单数字，再次同时？

我知道flock（）函数，但它可能会同时出现两个或多个flock（）请求......有谁知道这个问题的解决方案？我唯一想到的是使用 while 循环在一段时间内使用睡眠（）-ing 脚本，直到目标文件变得可用，但我不知道它是否有效，在哪里以及如何执行此操作？有没有人有这个问题的实际经验？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T08:49:57.190

该`flock()`函数旨在处理文件操作的多个并发读写器；默认情况下，`flock()`可以暂停一个进程，直到可以获得兼容的锁（即共享或独占）。一旦获得，稍后可以释放锁以允许其他进程对该文件进行操作；当文件关闭或进程结束时，锁会被隐式释放。

除非您的文件在 NFS 上，否则我非常怀疑您是否会遇到同时给出两个冲突锁的情况。

* * *

下面说明了使用的基本示例`flock()`：

```
// open the file (take care to not use "w" mode)
$f = fopen('file.txt', 'r+');
// obtain an exlusive lock (may suspend the process)
if (flock($f, LOCK_EX)) {
    // this process now holds the only exclusive lock

    // make changes to the file

    // release the lock
    flock($f, LOCK_UN);
}
// don't perform any write operation on $f here
fclose($f); 
```

将`LOCK_NB`标志与`LOCK_EX`或一起使用`LOCK_SH`会阻止进程暂停；如果调用返回`false`，则可以传递第三个参数来确定进程是否会被挂起（在 Windows 上不支持）。

```
if (false === flock($f, LOCK_EX | LOCK_NB, $wouldblock)) {
    if ($wouldblock) {
        // the lock could not be obtained without suspending the process
    } else {
        // the lock could not be obtained due to an error
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T06:57:50.773

分叉写入操作并将其放入带有睡眠的while循环中，而文件被锁定。只要您的应用程序不依赖于按时间顺序进行文件系统调用，它就应该可以工作。

但是，如果您的应用程序依赖于按顺序发生的写入操作，这对于竞争条件是开放的。

# jquery - 单击播放按钮时html5视频不会开始

> ID：10292941
> 
> 赞同：2
> 
> 时间：2012-04-24T06:42:16.507
> 
> 标签：jquery, dom, html5-video

我到处寻找类似的问题，但没有运气。

我有一个 html5 mp4 视频，单击播放按钮时无法播放。我知道点击是感应到的，因为点击时播放按钮会突出显示。其他默认控件是响应式的，视频不会播放。

我认为它与 DOM 的通信不正确。视频控件默认为 html5

与该`<video>`div`div`的类中的`.divWrapper`div 确实具有防止默认值以防止`HandleMouseDown`触发调用的函数，但这不应干扰播放按钮。特别是因为它对其他视频控件没有影响。

这是html

```
<div class="vidWrapper">  

   <video width="430" height="261" preload="metadata" controls>  

      <source src="vids/JB_COMMERCIAL_WEB.mp4" type='video/mp4; codecs="avc1.42E01E, mp4a.40.2"'>  
      <source src="vids/JB_COMMERCIAL_WEB.ogv" type='video/ogg; codecs="theora, vorbis"'>  
           <object width="640" height="384" type="application/x-shockwave-flash"  
            data="vids/JB_COMMERCIAL_WEB.swf?image=JB_COMMERCIAL_WEBplaceholder.jpg&file=vids/JB_COMMERCIAL_WEB.mp4">  
                <param name="movie" value="JB_COMMERCIAL_WEB.swf?image=JB_COMMERCIAL_WEBplaceholder.jpg&file=vids/JB_COMMERCIAL_WEB.mp4" />
           </object>
   </video>
</div> 
```

这是阻止默认代码段。

```
$("#" + section + "Copy").slideDown("normal", function()   
{ dropdownSection = section; document.onclick = HandleMouseDown;  
$(".vidWrapper").click(function(HandleMouseDown) {return false;});}); 
```

编辑：我能够通过插入 jquery 来强制播放视频来播放视频。现在我有一个不同的问题。视频播放但不会暂停。

我的问题是，如何修改代码以使视频在点击时暂停？

这是最新的代码：

```
$("#" + section + "Copy").slideDown("normal", function() { dropdownSection = section; document.onclick = HandleMouseDown; $(".vidWrapper").click(function(HandleMouseDown) {return false;});   
$(".vidWrapper").click(function() {$('video', this).get(0).play();});  
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T08:13:18.183

你的代码看起来不错

1.  检查视频是否直接在浏览器中播放（点击'n'拖放到浏览器中），以确定视频文件是否没有损坏

    2.  你能播放另一个mp4文件吗？如果没有，请查看我刚刚写的这篇文章并检查服务器 MIME 类型 ->[在网站上播放电影/DVD](https://stackoverflow.com/questions/9728977/playing-a-movie-dvd-on-a-website/9736361#9736361)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-02T14:43:53.523

对于仍然遇到这个问题的任何用户：这里的问题是元素`click`上的事件处理程序`.vidWrapper`以及它返回的事实，`false`这导致不仅在`.vidWrapper`元素上而且在视频本身上都阻止默认点击事件。

目前，该问题似乎只存在于 Firefox 中。

`e.preventDefault`使用代替时也会出现问题`return false`

这是另一个示例：[https](https://jsfiddle.net/qpusancf/) : //jsfiddle.net/qpusancf/（在 Firefox 53.0.3 上测试）

从事件处理程序中删除`return false;`语句应该可以解决问题。

或者，如果您需要阻止父元素上的默认事件，您可以检查事件目标是否具有父元素的类，并且仅在存在时才阻止默认事件。

使用 jQuery：

```
$(".vidWrapper").click(function(event) {    
    if($(event.target).hasClass('vidWrapper')) {
        event.preventDefault();
        // Additional event handling code ...
    }
}); 
```

OP 说其他视频控件不受影响是正确的。这种行为可能是 Firefox 中的一个错误，因为即使阻止了父级上的默认单击事件，播放按钮仍然可以在其他浏览器中使用。

# macos - Mac OS X 上的 Windows LOCALE_SABBREVLANGNAME

> ID：10292942
> 
> 赞同：0
> 
> 时间：2012-04-24T06:42:20.170
> 
> 标签：macos, iso, nslocale, lcid

我们的应用程序需要与服务器组件通信，该组件（愚蠢地）将 Windows 语言缩写 (SABBREVLANGNAME) 作为参数。在 Mac OS X 上，您可以很容易地从 NSLocale 获得 LCID，但我无法告诉您获得 SABBREVLANGNAME。所以，我猜我需要生成一个巨大的（我的意思是巨大的......）查找表。

除了查找表之外，有人知道这样做的好方法吗？如果没有，是否有人知道如何生成这样的查找表，而不是在 VC++ 中编写一个小工具来转储它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T14:49:00.250

从 Windows 2003 开始​​，只有少数例外情况是 SABBREVLANGNAME 与 ISO 代码不同。你可以在这里找到这些例外： [http ://www.siao2.com/2005/02/17/375235.aspx](http://www.siao2.com/2005/02/17/375235.aspx)

# c# - wkhtmltopdf 标题、图像和页码

> ID：10292944
> 
> 赞同：2
> 
> 时间：2012-04-24T06:42:36.113
> 
> 标签：c#, wkhtmltopdf

我想在我的 PDF 中添加一个标题：--header-center TEST

它工作正常，但如果我想插入空格：--header-center TEST test

它不会显示。我必须写一些东西而不是“”吗？

另一个问题是如何在页脚中插入页码。我找到了这个代码片段，但我是这个问题的新手，不知道如何实现它：

```
var pdfInfo = {}; 
  var x = document.location.search.substring(1).split('&'); 
  for (var i in x) { var z = x[i].split('=',2); pdfInfo[z[0]] = unescape(z[1]); } 
  function getPdfInfo() { 
    var page = pdfInfo.page || 1; 
    var pageCount = pdfInfo.topage || 1; 
    document.getElementById('pdfkit_page_current').textContent = page; 
    document.getElementById('pdfkit_page_count').textContent = pageCount; 
  } 
```

我的最后一个问题是如何使用 --header-html ~\image.html 将图像插入页脚。我插入了一个引用带有图片的简单 html 的链接，但它不会显示。

我知道……很多问题。这个问题对我来说非常棘手。

提前致谢！

LG FG

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T20:27:02.927

正如在我的评论中一样，如果将文本标题中的空格用引号括起来，则应该可以使用，例如`--header-center "TEST test"`

好的，所以我到处玩，发现如何让页码和图像工作。您的 header.html 应该类似于（注意图像 URL 是绝对路径）：

```
<html>
<head>
    <script type="text/javascript">
        var pdfInfo = {};
        var x = document.location.search.substring(1).split('&');
        for (var i in x) { var z = x[i].split('=',2); pdfInfo[z[0]] = unescape(z[1]); }
        function getPdfInfo() {
            var page = pdfInfo.page || 1;
            var pageCount = pdfInfo.topage || 1;
            document.getElementById('pdfkit_page_current').textContent = page;
            document.getElementById('pdfkit_page_count').textContent = pageCount;
        }
    </script>
</head>
<body onload="getPdfInfo()">
    <img src="/var/sites/mysite/htdocs/images/logo.jpg" />
    <br />Page <span id="pdfkit_page_current"></span> Of <span id="pdfkit_page_count"></span>
</body>
</html> 
```

然后用类似的东西生成`wkhtmltopdf --margin-top 40mm --header-html /var/sites/mysite/pdf/header.html content.html output.pdf`

您必须使用 --margin-top 来获得正确的间距。同样的过程也适用于页脚。

我的来源是[http://metaskills.net/2011/03/20/pdfkit-overview-and-advanced-usage/](http://metaskills.net/2011/03/20/pdfkit-overview-and-advanced-usage/)（PDFkit 是 wkhtmltopdf 的包装器）

# c# - 使用“execdll.exe”调用 C# DLL 中的方法？

> ID：10292945
> 
> 赞同：1
> 
> 时间：2012-04-24T06:42:36.587
> 
> 标签：c#, .net, dll

请我需要知道是否可以使用 ac#.net dll 使用**execdll.exe**执行方法。

我正在尝试执行一个简单的方法 Hello World，但我收到错误“无法浏览此文件的功能”。我不知道我是否做错了什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T09:29:52.593

我假设您的意思是 rundll32.exe 或至少 execdll.exe 是类似的东西。

.NET 类不能作为普通 DLL 公开。不过，它们可以作为 COM DLL 公开。因此，实现所需的唯一方法是将 .NET 类公开为 COM，然后编写一个常规 DLL（在 C++、Delphi 等中）来实例化您的 COM 对象并调用它。然后，您可以从 rundll32.exe 或您使用的任何工具调用您的 DLL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T07:03:05.187

检查方法是否公开，

.

**另一件事**：只有静态方法在您的上下文中才有意义

我赞成@Devils Child 方法：

从您的进程中运行 DLL...

如果可以，请在设计时引用它...

或在运行时使用反射...

如果它不是静态方法，请使用 Activator（根据需要）

此致。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T06:45:43.290

您可以为此使用程序集

```
Assembly.Load(byteArrayOfDll).EntryPoint.Invoke(null, null); 
```

# java - 模式匹配以识别字符串中的粗体字符

> ID：10292954
> 
> 赞同：0
> 
> 时间：2012-04-24T06:43:18.177
> 
> 标签：java, regex

我需要解析这个字符串并从中提取粗体数字。我没有合适的正则表达式 1\. useInput 可以是 ="0067711990999999* *1955* *05150709999999999999N9+01* *23* *1+99999999..";

```
Pattern pattern;
    String regex="\\s*-?\\d+(?:\\s*[-+/*]\\s*-?\\d+)+\\s*";
    pattern=Pattern.compile(regex);
    Matcher match = pattern.matcher(userInput); 
```

问题是我找不到任何正则表达式来匹配粗体字符串。

我在 Map-Reduce 程序中需要这个。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T06:57:33.900

以下代码

```
String myString = "0067711990999999*1955*0515070999999999999N9+01*23*1+99999999";
// matches all number series (one or more consecutive digits) 
// between * characters. * normally matches any character and 
// so has to be escaped using \, which in a string becomes \\,
// i.e the regular expression is actually \*([0-9])\*
Pattern pattern = Pattern.compile("\\*([0-9]+)\\*");
Matcher matcher = pattern.matcher(myString);
while (matcher.find()) {
    // the parantheses in the regex creates a capturing group, i.e.
    // a substring within the match that can later be extracted. 
    // the "1" here means we're picking up the value of the first 
    // (and in this case, only) capturing group, which is the 
    // actual numbers (i.e. not including the * characters)
    System.out.println(matcher.group(1));
} 
```

会打印

```
1955
23 
```

那是你要找的吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T08:55:29.307

如果您正在阅读 .odt 文件，也许[http://www.jopendocument.org/](http://www.jopendocument.org/)是要走的路？

# c# - 编辑后保存 EF 实体

> ID：10292955
> 
> 赞同：0
> 
> 时间：2012-04-24T06:43:22.073
> 
> 标签：c#, .net, entity-framework, data-binding

我使用工作单元检索并绑定到一些 UI 控件的 EF 实体

```
public RowItem MyItem { get; set; }
using ( var ctx = new MyContext() )
    MyItem = ctx.MyEntity.Single( x =>  /// parms };

at a later time, the updates are saved on some user action 
```

问题 - 我如何使用现有的实体 MyItem 并保持简单

```
using ( var ctx = new MyContext() )
       MyItem.UpdateUsingContext(ctx); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T07:55:54.210

嗯，在 EF 中保存一个对象很简单：

```
context.SaveChanges(); 
```

这会将所有更新/新/删除的对象保存在`context`.

如果您的对象不是在此特定实例中创建的，`context`则应在保存之前附加它们：

```
context.Attach(entity);
context.SaveChange(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T09:11:42.697

如果您需要创建一个新的数据上下文，您需要首先附加您的对象，例如；

```
using ( var ctx = new MyContext() )
{
   ctx.Attach(entity);
   ctx.SaveChanges();
} 
```

如果您正在使用相同的上下文，用于从数据库中获取实体，您可以简单地调用 savechanges。

# iphone - UIL标签拆分

> ID：10292956
> 
> 赞同：0
> 
> 时间：2012-04-24T06:43:22.153
> 
> 标签：iphone, ios, xcode, split, label

如果我有一个 UILabel: label1.text (maximum length 6 character) 在这个例子中，GARAGE 是其中的单词。

是否有可能拥有可以使

```
label1a: G
label1b: A
label1c: R
label1d: A
label1e: G
label1f: E 
```

我需要这个，所以我可以将一个单词中的每个字符与另一个单词中的每个字符进行比较。

这几天一直在为此苦苦挣扎：S

**编辑**

我有一个随机单词生成器，它生成长度为 6 的单词，例如“GARAGE”或“SAILOR”，它将它生成为一个标签，我们称之为标签：“randomword.text”

现在我们得到了一个输入标签，我们用自己制作的键盘输入的字符显示在其中。这个标签是'input.text'

现在我们可以将这两个标签与 if (randomword.text == input.text') { NSLog: @'these words are the same' };

我想要做的是在 random.text 中分离每个字母：所以 label1 说 G，label2 说 A，label3 说 R，label4 说 A，label5 说 G，label6 说 E。

如果我以与上面使用 random.text 相同的方式分隔我的 input.text，我会得到另外 6 个 UILabel，例如将这个分隔在 label7、8、9、10、11、12 中。现在我可以将标签 1 与标签 7、标签 2 与 8 等进行比较。这样，即使整个单词彼此不相等，我也可以查看字母是否在它们应该在的位置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T08:51:00.323

仍然对所有关于标签的东西感到困惑。我认为您的问题与标签无关，而是与比较字符串或其中的一部分有关。因此，如果您不想检查字符串是否相等使用

`[aString isEqualToString:anotherString];`（不是==）。

如果要从字符串中提取字母，请使用

`[aString characterAtIndex:i];`或`[aString substringWithRange:NSMakeRange(i, i+1)]`。

如果您想检查一个字母是否在字符串中的某个位置（比如 i），请使用：

```
NSString *aLetter;
[[aString substringWithRange:NSMakeRange(i, i+1)] isEqualToString:aLetter]; 
```

或者

```
unichar aLetter;
[aString characterAtIndex:i] == aLetter; 
```

如果您想获得 'what's shown on a `UILabel`' 作为`NSString`use `aLabel.text`。

希望有帮助。

# osgi - 从 Karaf 控制台查找不满足的捆绑约束

> ID：10292960
> 
> 赞同：1
> 
> 时间：2012-04-24T06:43:50.970
> 
> 标签：osgi, apache-karaf

如何找到不是从 Apache Karaf 控制台开始的捆绑包的不满意约束？即它相当于Equinox的`diag`命令是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T09:49:13.920

您使用的是哪个版本的 Karaf？以下内容应与 Karaf 2.x 相关

恼人的是 package:imports/package:exports 命令只适用于处于 STARTED 状态的包。

如果捆绑包仅是 INSTALLED ，您可以使用： `headers ${BUNDLE NUMBER}` 将以红色突出显示任何丢失的导入。

尝试启动捆绑软件时，还应将任何未解决的约束作为 LDAP 过滤器表达式打印到控制台。

# vba - 通用 Powerpoint 开发人员控制 VBA 中的价值节省

> ID：10292962
> 
> 赞同：2
> 
> 时间：2012-04-24T06:43:57.003
> 
> 标签：vba, controls, ms-office, powerpoint

我正在寻找使用 Powerpoint 创建一种测验，我想保存用户提供的输入。

例如：如果我问这个问题：你最喜欢什么颜色？当他们回答问题并单击下一步按钮时，我想保存文本框的值并将其附加到输出文件中。

我已经知道如何获取值并将值写入文件。

我想做的是一种循环。

这是伪代码：

```
foreach(Control c in CurrentSlide.Controls)
{
     File.Append(c.Value);
} 
```

这样，无论表单上有什么控件，我都想保存每个控件的值。

这在VBA中可能吗？如果没有，您有针对这种情况的通用解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T14:53:34.547

这是检查幻灯片上每个控件的更通用的方法，无需事先知道会有多少。这假定您保留了分配给控件形状的默认名称（TextBox1、CheckBox1 等）。如果您想更改这些，您需要确保每个 TextBox 的名称至少包含一个唯一的字符串，并相应地更改代码。Siddarth 已经提供了用于写入文件的代码，并且您说您可以控制它，所以我只是 Debug.Printing 此处的值以保持示例简单。

```
Sub TestIt()
    ' Run this to test the shapes on slide 1
    ProcessTheSlide ActivePresentation.Slides(1)
End Sub

Sub ProcessTheSlide(oSl As Slide)

    Dim oSh As Shape

    For Each oSh In oSl.Shapes
        ' Is it a control?
        If oSh.Type = 12 Then  ' msoOLEControlObject
            On Error Resume Next
            With oSh.OLEFormat.Object
                If InStr(.Name, "TextBox") > 0 Then
                    Debug.Print .Text
                End If
                If InStr(.Name, "CheckBox") > 0 Then
                    Debug.Print .Value
                End If

            End With
        End If
    Next

End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T07:09:39.740

> > > 这在VBA中可能吗？

是的 ：）

在您的演示文稿中，放置 1 个文本框和两个命令按钮。您的演示文稿应如下所示。

![在此处输入图像描述](../Images/6992b49c43c4ee84ad8628ed2d5e28da.png)

在 VBA 编辑器中粘贴此代码

```
Option Explicit

'~~> Save data to file
Private Sub CommandButton1_Click()
    Dim filesize As Integer
    Dim FlName As String

    '~~> text File where you want to save the data
    FlName = "C:\Sample.Txt"

    '~~> Get a free file handle
    filesize = FreeFile()

    '~~> Open your file
    Open FlName For Append As #filesize

    '~~> Export Text
    Print #filesize, TextBox1.Text
    Close #filesize

    TextBox1.Text = ""
End Sub

'~~> Exit Show
Private Sub CommandButton2_Click()
    SlideShowWindows(1).View.Exit
End Sub 
```

现在，当您运行它并单击“下一步”时，数据将自动保存在文本文件中。

![在此处输入图像描述](../Images/dcdca69f5fb5bc0b3aa1d84154b374a9.png)

这就是您的文本文件的外观...

![在此处输入图像描述](../Images/890e393c7192297ff9fcd234f11cdc73.png)

高温高压

# iphone - 被 ARC 弄糊涂了

> ID：10292966
> 
> 赞同：-1
> 
> 时间：2012-04-24T06:44:27.763
> 
> 标签：iphone, xcode, automatic-ref-counting

下面的代码我在 Xcode 3.2 上使用并且运行良好

```
@interface MoObject : UIViewController 
{

    NSMutableArray *categoryArray;     
}

@property (nonatomic, retain) NSMutableArray *categoryArray;

@end;

@implementation MyObject

@synthesize categoryArray;

- (void)viewDidLoad
{
     [super viewDidLoad];

    NSMutableArray *a = [[NSMutableArray alloc] init];

    categoryArray = a;
  [a  release]; //AAA:I can not release this, it does not report compiling error , but after some operation, it will cause exec bad error

}
- (void)dealloc {

    [category release];

    [super dealloc];
} 
```

我刚搬到 Xcode 4.3.1 iOS 5.1

相同的功能会导致很多 exec 错误。

即使我关闭了整个项目的 ARC。

问题依然存在，看来我无法在 AAA 点释放对象数组

欢迎任何评论

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T06:56:18.540

ARC 的重点是它为您处理保留/释放代码。由于您的数组“a”是在本地声明的，因此当该函数结束时，ARC 将插入代码为您释放它。与 dealloc 相同 - ARC 不需要它（实际上不能使用它）。

但是，如果您不喜欢或不想学习 ARC，则不必使用它。这是您创建新项目时的一个选项。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-24T07:24:00.493

您没有使用 ARC。如果你是，代码 using`-release`甚至不会编译。也不会调用`[super dealloc]`你的`-dealloc`方法。

你所拥有的只是一个普通的内存管理错误。您正在`a`直接分配给实例变量`categoryArray`。您没有使用为属性合成的设置器，它是执行正确内存管理的设置器。因此，`categoryArray`最终指向一个已释放的对象。如果你使用`self.categoryArray = a`or `[self setCategoryArray:a]`，它们是等效的语句，那么你的 bug 就会消失。

在 ARC 下，这个 bug 大部分是隐藏的。`categoryArray`实例变量默认为，因此`__strong`只要`categoryArray`指向它，数组就会被保留，并且不会`EXC_BAD_ACCESS`出错。但是，绕过设置器直接分配给它仍然是错误的，除了在初始化方法中。

# jquery - 第二次单击在 jQuery UI 上不起作用

> ID：10292967
> 
> 赞同：1
> 
> 时间：2012-04-24T06:44:34.380
> 
> 标签：jquery, popup

我有一个弹出窗口询问用户是否从他的贡献中删除项目。它在用户第一次单击按钮时起作用。弹出窗口使用 jquery ui 打开一个 aspx 文件作为弹出窗口。但是，如果用户第二次单击任何其他按钮，则会触发相同的弹出窗口，它会重定向到页面，而不是将其作为弹出窗口打开：这是我的代码：

```
<script type="text/javascript">

        $(function () {

            function handler(e) {
                var page = $(this).attr("href")

                var $dialog = $('<div id="silmeIframe"></div>')
            .html('<iframe  style="border: 0px; " src="' + page + '" width="50px" height="50px"></iframe>')
            .dialog({
                autoOpen: false,
                modal: true,
                height: 'auto',
                resizable: 'false',
                width: 'auto',
                title: "Silmeyi onaylıyor musunuz?",
                close: function (event, ui) {
                    __doPostBack('<%= btnRefresh.ClientID %>', '');
                }
            });

                $dialog.dialog('open');
                e.preventDefault();
            }
            $('a#popup').on('click', handler);
            $('a#popup2').on('click', handler);

        });
    </script> 
```

# c++ - C++：虚函数如何解决“this”指针范围问题？

> ID：10292973
> 
> 赞同：2
> 
> 时间：2012-04-24T06:44:48.677
> 
> 标签：c++, virtual-functions, mingw32

(C++,MinGW 4.4.0,Windows 操作系统)

代码中的所有注释，除了标签 <1> 和 <2>，都是我的猜测。如果您认为我在某处错了，请纠正我：

```
class A {
public:
   virtual void disp(); //not necessary to define as placeholder in vtable entry will be
                        //overwritten when derived class's vtable entry is prepared after
                        //invoking Base ctor (unless we do new A instead of new B in main() below)
};

class B :public A {
public:
   B() : x(100) {}
   void disp() {std::printf("%d",x);}
   int x;
};

int main() {
   A* aptr=new B;             //memory model and vtable of B (say vtbl_B) is assigned to aptr
   aptr->disp();              //<1> no error
   std::printf("%d",aptr->x); //<2> error -> A knows nothing about x
} 
```

<2> 是一个错误并且很明显。为什么 <1> 不是错误？我认为这个调用发生的是：参数是指向成员函数`aptr->disp(); --> (*aptr->*(vtbl_B + offset to disp))(aptr)` `aptr`的隐式指针。`this`在里面`disp()`我们会有`std::printf("%d",x); --> std::printf("%d",aptr->x); SAME AS std::printf("%d",this->x);`那么为什么 <1> 没有给出错误而 <2> 呢？

（我知道 vtables 是特定于实现的东西，但我仍然认为值得提出这个问题）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T07:02:29.543

`this``aptr`里面不一样`B::disp`。该`B::disp`实现采用`this`as `B*`，就像 的任何其他方法一样`B`。当您通过`A*`指针调用虚方法时，它会被转换为`B*`first （甚至可能会更改其值，因此在调用期间不一定等于`aptr`）。

即真正发生的事情是这样的

```
typedef void (A::*disp_fn_t)();
disp_fn_t methodPtr = aptr->vtable[index_of_disp]; // methodPtr == &B::disp

B* b = static_cast<B*>(aptr);
(b->*methodPtr)(); // same as b->disp() 
```

有关更复杂的示例，请查看此帖子[http://blogs.msdn.com/b/oldnewthing/archive/2004/02/06/68695.aspx](http://blogs.msdn.com/b/oldnewthing/archive/2004/02/06/68695.aspx)。在这里，如果有多个`A`基可以调用相同的`B::disp`，MSVC 会生成不同的入口点，每个入口点将`A*`指针移动不同的偏移量。当然，这是特定于实现的；例如，其他编译器可能会选择将偏移量存储在 vtable 中的某处。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-24T06:47:55.570

规则是：

> ***在 C++ 中，动态分派仅适用于成员函数函数，不适用于成员变量。***

对于成员变量，编译器仅在该特定类或其基类中查找符号名称。

在情况 1 中，要调用的适当方法是通过获取 、*获取*适当*方法*的地址然后*调用*适当的成员函数来决定的。因此，在静态绑定的情况下， 动态调度本质上是一种而不是正常的。`vpt` **`fetch-fetch-call``call`**

 **情况2：编译器只`x`在范围内查找，`this`显然找不到，报错。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-24T07:38:33.483

你很困惑，在我看来你来自更动态的语言。

在 C++ 中，编译和运行时显然是隔离的。必须首先编译程序然后才能运行（并且这些步骤中的任何一个都可能失败）。

* * *

所以，倒退：

`<2>`编译失败，因为编译是关于**静态**信息的。`aptr`是 type `A*`，因此 的所有方法和属性`A`都可以通过这个指针访问。既然你声明了`disp()`但没有`x`，那么调用`disp()`编译但没有`x`。

因此，`<2>`' 的失败与语义有关，并且在 C++ 标准中定义。

* * *

到达`<1>`，它可以工作，因为有in的*声明*。这保证了函数的存在（我想说你实际上躺在这里，因为你没有在 中*定义*它）。`disp()``A`*`A`*

 *运行时发生的事情由 C++ 标准在语义上定义，但该标准没有提供实现指南。大多数（如果不是全部）C++ 编译器将使用每个类的虚拟表 + 每个实例的虚拟指针策略，在这种情况下，您的描述看起来是正确的。

然而，这是纯粹的运行时实现，它运行的事实不会追溯影响程序编译的事实。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-24T06:57:21.340

```
virtual void disp(); //not necessary to define as placeholder in vtable entry will be
                     //overwritten when derived class's vtable entry is prepared after
                     //invoking Base ctor (unless we do new A instead of new B in main() below) 
```

您的评论并不完全正确。一个虚函数是*odr-used 的*，除非它是纯的（反过来不一定成立），这意味着你必须为它提供一个定义。如果您不想为其提供定义，则必须将其设为纯虚函数。

如果您进行这些修改之一，则`aptr->disp();`可以工作并调用派生类`disp()`，因为`disp()`在派生类中*会覆盖*基类函数。基类函数仍然必须存在，因为您通过指向基的指针调用它。`x`不是基类的成员，因此`aptr->x`不是有效的表达式。***

# version-control - 如何为 Web 应用程序的数据实施修订/版本控制

> ID：10292977
> 
> 赞同：2
> 
> 时间：2012-04-24T06:45:09.060
> 
> 标签：version-control

我相信 Wordpress 将多个帖子条目存储为“修订”，但我认为这对空间的使用效率非常低？

有没有更好的办法？我认为[gitit](http://gitit.net/)是一个使用 GIT 进行版本控制的 Wiki，但它是如何完成的呢？例如。我的应用程序是 PHP 的，我必须让它与 GIT 对话以提交和检索数据？

那么，什么是在 Web 应用程序中实现版本控制的好方法（例如，在博客中它可能是帖子内容）

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-14T20:02:48.003

我最近实现了这样一个系统——它使用了被取代记录的概念，以及以前和当前的链接。我对如何最好地实现这一点进行了大量研究——最终我得到的模型类似于 Wordpress（和其他系统）——将更改存储为新记录并使用它。

考虑到所有可用的选项，空间确实是诸如帖子之类的创作内容的最后一个问题——媒体文件占用了更多的空间，而且无论如何这些都不能存储为增量。

无论如何，Git 的工作方式实际上是相同的，因为它存储了每个修订版的全部内容，只是它最终会打包成 deltas（或者当你要求它时）。

![Git 存储对象图](../Images/2143c56414c0cfc7bfb95a222e5e8698.png)

回到 1990 年，我们使用的是 SCCS 或 RCS，有时只有 30mb 的可用磁盘空间，我们确实需要有效的版本控制来避免存储空间不足。

考虑到现代系统上的平均可用存储量，使用增量来节省空间并不值得所有相关的恶化。你可能会说这很浪费空间，但我认为从长远来看，以原始形式存储未压缩的东西会更有效率

*   它更快
*   更容易搜索旧版本
*   查看速度更快
*   无需处理大量增量即可更轻松地跳入一组更改的中间。
*   它更容易实现，因为您不必编写增量生成算法。

此外，标记的表现不如带有增量的纯文本，尤其是在使用所见即所得编辑器进行编辑时。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-14T16:40:46.813

与最新版本的例如文章保持一张表。

保存新版本时，将当前版本移到存档表中并在其上放置版本号，同时将最新版本保留在第一个表中。

存档表可以具有属性 ROW_FORMAT=COMPRESSED（MySQL InnoDb 示例）以占用更少的空间，并且它不会成为性能问题，因为它很少被访问。是的，不仅存储变更集有点开销，但是如果您进行一些数学运算，您可以在几乎没有空间的情况下保留大量修订，因为您的文章无论如何都是高度可压缩的文本。

例如，整个页面的源代码是 11Kb 压缩的。这在 1Mb 上为您提供了近 100 个版本。相比之下，普通文章要小得多，平均可以在 1Mb 上为您提供 500-1000 篇文章/版本。你可能负担得起。

# html - 在表格旁边浮动一个 div

> ID：10292978
> 
> 赞同：0
> 
> 时间：2012-04-24T06:45:09.550
> 
> 标签：html, css, html-table

我正在尝试有一个 div 来保存我的广告并浮动到页面的右侧。我希望主体中的表格和文本位于广告的左侧，然后在广告结束时一直延伸到页面的右侧。

问题是主体中有一个表格，它不会显示在 div 的左侧。它显示在它的下方。我该如何解决？

```
<p> 
    <div style="margin:5px; float:right;">
        <img src="ad.jpg" height="600" width="160">
    </div>         
    blah blah blah
    <table width="100%">
        <tr><td>dsf</td></tr>
    </table> 
    the table because of the 100% appears below the div 
    for the ad.jpg instead of to the left of it
</p> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-06-12T13:06:26.380

Add display:inline css for the table!

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T13:33:05.057

将表格包含在另一个 div 中，并在第一个 div 中使用 clear 属性

# javascript - 使用 JavaScript 创建 XML 数字签名

> ID：10292981
> 
> 赞同：4
> 
> 时间：2012-04-24T06:45:18.420
> 
> 标签：javascript, digital-signature

我需要在客户端创建[XML 数字签名](http://www.w3.org/TR/xmldsig-core/)。

我有插件可以通过它获得：

*   使用指定摘要方法的摘要值
*   使用客户端选择的证书的签名值
*   X509数据

但我无法使用指定的方法进行规范化和转换。

规范化：[xml-exc-c14n](http://www.w3.org/TR/xml-exc-c14n/)。

转换：[封装签名](http://www.w3.org/TR/2002/REC-xmldsig-core-20020212/xmldsig-core-schema.xsd#enveloped-signature)。

是否有任何 JavaScript 库可以对 XML 文档进行规范化和转换？

感谢您的回复！

# php - php中的mail（）问题

> ID：10292991
> 
> 赞同：0
> 
> 时间：2012-04-24T06:46:05.960
> 
> 标签：php, email

我正在使用以下代码发送带有两个附件的邮件，

我遇到的问题是，它只需要一个附件，我想通过邮件发送到附件，但我没有收到自动回复，

谁能帮帮我，这是我的代码

```
<?php session_start();

$redirect_url = '../thanks.html';
$your_email ='name@domain.com';// <<=== update to your email address

$attachment_enabled = 1;
$autoresponder_enabled = 1;

    $name = $_POST['name'];
    $visitor_email = $_POST['email'];

function get_form_data(){

    global $REQUEST_METHOD;

    global $_POST;

    global $_GET;

    $vars = ($REQUEST_METHOD == 'GET') ? $_GET : $_POST;

    //strip spaces from all fields

    foreach ($vars as $k=>$v) $vars[$k] = trim($v);

    return $vars;

}

function _build_fields($vars){

    $skip_fields = array(

        'name', 

        'email', 

         'subject',

        'submitbtn');

    // order by numeric begin, if it exists

    $is_ordered = 0;

    foreach ($vars as $k=>$v) 

        if (in_array($k, $skip_fields)) unset($vars[$k]);

    $new_vars = array();

    foreach ($vars as $k=>$v){

        // remove _num, _reqnum, _req from end of field names

        $k = preg_replace('/_(req|num|reqnum)$/', '', $k);

        // check if the fields is ordered

        //if (preg_match('/^\d+[ \:_-]/', $k)) $is_ordered++;

        //remove number from begin of fields

        $k = preg_replace('/^\d+[ \:_-]/', '', $k);

        $new_vars[$k] = $v;

    }

    $vars = $new_vars;

    $max_length = 10; // max length of key field 

    foreach ($vars as $k=>$v) {

        $klen = strlen($k);

        if (($klen > $max_length) && ($klen < 40))

            $max_length = $klen;

    }

    if ($is_ordered)

        ksort($vars);

    // make output text

    $out = "";

    foreach ($vars as $k=>$v){

        $k = str_replace('_', ' ', $k);

        $k = ucfirst($k);

        $len_diff = $max_length - strlen($k);

        if ($len_diff > 0) 

            $fill = str_repeat('.', $len_diff);

        else 

            $fill = '';

        $out .= $k."$fill...: $v\n\n";

    }

    return $out;

}

$vars=get_form_data();
$out=_build_fields($vars);
$body = "A user  $name submitted the form:\n\n".$out;
//Auto Responser Function To Send Auto Respond

$autoresponder_from = $your_email;

$subject = "Page Edit Request";

$autoresponder_subject = "%subject% (autoresponse)";

$autoresponder_message = <<<MSG

Hi %name%,

Thank you for submitting the form.

--

MSG;

function auto_respond($vars){

    global $autoresponder_from, $autoresponder_message, $autoresponder_subject;

    /// replace all vars in message

    $msg = $autoresponder_message;

    preg_match_all('/%(.+?)%/', $msg, $out);

    $s_vars = $out[1]; //field list to substitute

    foreach ($s_vars as $k)

        $msg = str_replace("%$k%", $vars[$k], $msg);

    /// replace all vars in subject

    $subj = $autoresponder_subject;

    preg_match_all('/%(.+?)%/', $subj, $out);

    $s_vars = $out[1]; //field list to substitute

    foreach ($s_vars as $k)

        $subj = str_replace("%$k%", $vars[$k], $subj);

    //

    $_send_to = "$vars[name] <".$vars[email_from].">";

    $_send_from = $autoresponder_from;

   mail($_send_to, $subj, $msg, "From: $_send_from");

}

if(empty($errors))
{
        //send the email
        $to = $your_email;
        $subject="Page Edit Request";
        $from = $visitor_email;
        $ip = isset($_SERVER['REMOTE_ADDR']) ? $_SERVER['REMOTE_ADDR'] : '';

        //Attach File if Attachment is done
        $files = array(); //files (field names) to attach in mail
        if (count($_FILES) && $attachment_enabled)
        {
            $files = array_keys($_FILES);
        }
        /*print_r($files);
        exit;*/
        if (count($files)){

        foreach ($files as $file){

            echo "hello";
            $file_name     = $_FILES[$file]['name'];

            $file_type     = $_FILES[$file]['type'];

            $file_tmp_name = $_FILES[$file]['tmp_name'];

            $file_cnt = "";

    if($file_name!='')
    {   
            $f=@fopen($file_tmp_name, "rb");

            if (!$f) 

                continue;

            while($f && !feof($f))

                $file_cnt .= fread($f, 4096);

            fclose($f);

            if (!strlen($file_type)) $file_type="applicaton/octet-stream";

            if ($file_type == 'application/x-msdownload')

                $file_type = "applicaton/octet-stream";

            $date_time = date('Y-m-d H:i:s');
            $mime_delimiter = md5(time());
            $mail = <<<EOF

This is a MIME-encapsulated message

--$mime_delimiter

$body

--------------------

REMOTE IP : $REMOTE_ADDR

DATE/TIME : $date_time

EOF;
            $data= chunk_split(base64_encode($file_cnt));
            $mail .= "\n--$mime_delimiter\n";

            $mail.="Content-Type: {\"application/octet-stream\"};\n" . " name=\"$file_name\"\n"."Content-Disposition: attachment;\n" . " filename=\"$file_name\"\n"."Content-Transfer-Encoding: base64\n\n" . $data . "\n\n"; 
          //  $mail .= "Content-type: $file_type\n";

           // $mail .= "Content-Disposition: attachment; filename=\"$file_name\"\n";

           // $mail .= "Content-Transfer-Encoding: base64\n\n";

           // $mail .= chunk_split(base64_encode($file_cnt));

        }
        else
        {
            $mail=$body;
        }

    }

    $mail .= "\n--$mime_delimiter--";

    }
    else
    {
        $mail=$body;
    }
        $headers = "Mime-Version: 1.0\r\nFrom: $from \r\nContent-Type: multipart/mixed;\n boundary=\"$mime_delimiter\"\r\nContent-Disposition: inline";
        $headers .= "Reply-To: $visitor_email \r\n";
        mail($to,'Page Edit Request', $mail,$headers);

        if ($autoresponder_enabled) 

        auto_respond($vars);

        header("Location: $redirect_url");
}

// Function to validate against any email injection attempts
function IsInjected($str)
{
  $injections = array('(\n+)',
              '(\r+)',
              '(\t+)',
              '(%0A+)',
              '(%0D+)',
              '(%08+)',
              '(%09+)'
              );
  $inject = join('|', $injections);
  $inject = "/$inject/i";
  if(preg_match($inject,$str))
    {
    return true;
  }
  else
    {
    return false;
  }
}
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T08:38:22.877

您的邮件撰写既非常丑陋又非常错误。我能给你的最好建议是停止重新发明轮子，只使用 Swift 邮件：[http ://swiftmailer.org/](http://swiftmailer.org/)

我已经用过他们的工具几次了，效果很好！

**编辑**不知道为什么这被否决了，但这是 Swift 的代码：

```
$message = Swift_Message::newInstance()
    ->setSubject('Page Edit Request')
    ->setFrom(array($visitor_email))
    ->setTo(array($your_email))
    ->setBody($body);

if ($_FILES) {
    foreach (array_keys($_FILES) as $file) {
        if (UPLOAD_ERR_OK != $_FILES[$file]['error'] || !is_readable($_FILES[$file]['tmp_name'])) {
            continue;
        }
        $message->attach(Swift_Attachment::fromPath($_FILES[$file]['tmp_name']));
    }
}

$transport = Swift_MailTransport::newInstance();
$mailer = Swift_Mailer::newInstance($transport);

$numSent = $mailer->send($message); 
```

# mysql - java.io.IOException：损坏的表单数据：提前结束

> ID：10292993
> 
> 赞同：1
> 
> 时间：2012-04-24T06:46:31.230
> 
> 标签：mysql, html, api, jsp

嗨，当我提交表单“java.io.IOException：损坏的表单数据：过早结束”时出现此错误，当我在现有 scriptlet 中添加此代码时发生此错误

```
String selectedValue=request.getParameter("sel1");
//out.println("Selected Value is: "+selectedValue);

String select1=request.getParameter("sel2");
//out.println("selected values is:"+select1);

String concat=selectedValue+"." +select1;
out.println(""+concat); 
```

我现有的脚本

```
<%@ page import="java.io.*,java.sql.*,java.util.zip.*,com.oreilly.servlet.*" %>
<%
try
 {    
   //if i include here,i can retrive the values but i cant upload the file into database,shows me "java.io.IOException: Corrupt form data: premature ending "
 String selectedValue=request.getParameter("sel1");
//out.println("Selected Value is: "+selectedValue);

String select1=request.getParameter("sel2");
//out.println("selected values is:"+select1);

String concat=selectedValue+"." +select1;
out.println(""+concat);

Connection connection = null;
String connectionURL = "jdbc:mysql://localhost:3306/ksa";
PreparedStatement psmnt = null;
    MultipartRequest request2=new MultipartRequest(request,"/home/adapco/Desktop/output",1024*1024*1024);
String filename=request2.getFilesystemName("file");

File f=request2.getFile("file");
out.println(f.exists()+"----------------"+f.getAbsolutePath());
out.print(filename);
Class.forName("com.mysql.jdbc.Driver").newInstance();
connection = DriverManager.getConnection(connectionURL, "root", "root");
psmnt = connection.prepareStatement("insert into file1(file_path) values(?)");
psmnt.setString(1, f.getPath());
int s = psmnt.executeUpdate();

 //if i include here it shows me null.null

String selectedValue=request.getParameter("sel1");
//out.println("Selected Value is: "+selectedValue);

String select1=request.getParameter("sel2");
//out.println("selected values is:"+select1);

String concat=selectedValue+"." +select1;
out.println(""+concat);

if(s>0)
{
 System.out.println("Uploaded successfully !");
}
else
{
 System.out.println("Error!");
}
}
catch(Exception e)
{
  out.print("-----------error--------------"+e);
}
%> 
```

如果我从现有代码中排除代码，它可以正常工作。有时如果我在 catch 之后或 try 块的末尾包含代码，它会显示为 null。我需要读取下拉列表的索引值并将它们连接起来带一个点。错误是“null.null”。实际结果应该是示例：1.1。这是我的html代码

```
<%@ page language="java" %>
<HTML>
   <FORM ENCTYPE="multipart/form-data" ACTION="uploadFile.jsp" METHOD=POST>
    <center>
   <table bgcolor=#38ACEC>
    <tr>
    <center><td colspan="2" align="center"><B>UPLOAD THE FILE</B><center></td>
     </tr>
    <tr><td colspan="2" align="center"> </td></tr>
    <tr><td><b>Choose the file To Upload:</b></td>
    <td><INPUT NAME="file" TYPE="file"></td>
    </tr>
    <tr><td><select name="sel1">
     <option value="1">Aerospace</option>
     <option value="2">Automotive</option>
     <option value="3">Energy</option>
     <option value="4">IC Engines</option>
     <option value="5">Wind</option>
       <option value="6">Turbo</option>
      <option value="7">IT</option>
      <option value="8">Training</option>
     </select>
     <br>
     <select name="sel2">
     <option value="1">Internal</option>
     <option value="2">Demos</option>
     <option value="3">Best Practice</option>
       <option value="4">Marketing</option>
     <option value="5">Papers & public</option>
     <option value="6">Validation</option>
     <option value="7">Training</option>
      </select></td></tr>
      <tr><td colspan="2" align="center"> </td></tr>
      <tr><td colspan="2" align="center"><input type="submit" value="Send File"> </td></tr>
     <table>
   </center>
    </FORM>
   </html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T06:57:36.887

这是您所拥有的非常古老的示例。Oreilly 多部分解析器`MultipartRequest`有一些错误。有关概述[损坏的表单数据：过早结束（已解决）](https://stackoverflow.com/questions/240163/corrupt-form-data-premature-ending) ，请参阅相关问题。而是使用[Apache Commons FileUpload](https://commons.apache.org/proper/commons-fileupload/)或仅使用新的 Servlet 3.0 内置`request.getPart()`方法。另请参阅[如何在 JSP/Servlet 中上传文件？](https://stackoverflow.com/questions/2422468/how-to-upload-files-to-server-using-jsp-servlet/2424824#2424824)

# jquery - 对 Django 服务器执行 ajax 请求时使用字符串而不是 JSON

> ID：10292994
> 
> 赞同：1
> 
> 时间：2012-04-24T06:46:57.593
> 
> 标签：jquery, ajax, django, json

视图.py：

```
def get_accounts( request ):
    if request.is_ajax():
        res = ["foo","bar"]
        json = simplejson.dumps(res)
        return HttpResponse(json, mimetype='application/json')
    return HttpResponseNotFound 
```

网址.py：

```
 ( r'^get_accounts/$', 'get_accounts'), 
```

客户端.html：

```
$.get('/django/backoffice/bopanel/get_accounts',{'acc':$('.nr').text().replace(/^\s+||\s+$/g,'')}, function(data) {
  alert(data[0]);      
  }); 
```

我很惊讶收到一个包含内容的警告框：

```
"[" 
```

什么意味着我得到了字符串而不是数组，这对我来说很奇怪，而且绝对不是我所期望的。

在萤火虫中，我看到两个后续的 GET 请求：

```
GET http://127.0.0.1:8000/django/backoffice/bopanel/...nts?acc=17114%2FF01055%2FTP%0A%09%09++++++++++++
301 MOVED PERMANENTLY
    24ms

GET http://127.0.0.1:8000/django/backoffice/bopanel/...ts/?acc=17114%2FF01055%2FTP%0A%09%09++++++++++++
200 OK
    16ms 
```

我不明白为什么我收到两个请求以及为什么第一个请求有 301 状态。我不明白这如何使 json 显示为字符串。有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T07:10:43.343

> 我不明白为什么我收到两个请求以及为什么第一个请求有 301 状态。

默认情况下，Django 会在任何没有斜杠的 URL 上附加一个斜杠（参见[common middleware](https://docs.djangoproject.com/en/1.4/ref/middleware/#module-django.middleware.common)）。

您想使用`content_type`而不是`mimetype`，即：

```
return http.HttpResponse(json.dumps(res), content_type='application/json') 
```

# c# - ObservableCollections 的异步修改

> ID：10292996
> 
> 赞同：3
> 
> 时间：2012-04-24T06:47:14.617
> 
> 标签：c#, .net, wpf, binding, task-parallel-library

我有问题，`ObservableCollection<T>`使用（任务并行库）更新绑定到任务线程中的 WPF ListView

我有一个小工具读取[编辑](https://de.wikipedia.org/wiki/EDIFACT)文件，并显示每个段的计数（一行的前三个字母）。

包含的段及其计数显示在列表框中。

Wenn 我最初加载文件一切正常，我看到 GUI 正在计算段数。我的程序允许切换到另一个文件，如果我这样做（使用完全相同的代码）它会失败并出现以下异常。

> 这种类型的 CollectionView 不支持从不同于 Dispatcher 线程的线程更改其 SourceCollection。

这是失败的代码

```
public class SegementLineCollection : ObservableCollection<SegmentLine>
  {
    public void IncrementCount(string Segment)
    {
      Segment = Segment.ToUpper();

      SegmentLine line;
      if (this.Select(x => x.SegmentName).Contains(Segment))
      {
        line = this.Where(x => x.SegmentName == Segment).FirstOrDefault();
      }
      else
      {
        line = new SegmentLine();
        line.SegmentName = Segment;

        this.Add(line); // <--- At this point comes the Exception
      }

      line.Count++;
    }
  } 
```

这是我使用的 TPL 调用：

```
private string _FileName;
    public string FileName
    {
      get
      {
        return _FileName;
      }
      set
      {
        _FileName = value;
        OnPropertyChanged("FileName");

        if (!String.IsNullOrEmpty(value)) 
          new Task(() => StartFile()).Start();
      }
    } 
```

有没有人对我有任何打击？

- - - - - - 编辑 - - - - - - - - -

使用 TaskScheduler.FromCurrentSynchronizationContext() 或 Dispatcher 提供的答案没有做到这一点！

加载新的绑定时更改绑定是否可以解决问题。

这是我使用的Binding，在ViewModel中切换了Reader Onject，并通过INotifyPropertyChanged实现通知了GUI

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T06:56:15.567

使用调度程序访问集合：

```
if (Dispatcher.CurrentDispatcher.CheckAccess())
  this.Add(...)
else
  Dispatcher.CurrentDispatcher.Invoke(() => this.Add(...)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T07:01:45.093

您需要在 GUI 线程上调用 IncrementCount。

使用 TPL，您可以`TaskScheduler.FromCurrentSynchroniztionContext()`在任务或延续中使用。

```
var task = new Task<string>(() => { return "segment"; })
var task2 = task.ContinueWith(t => IncrementCount(t.Result),
                              TaskScheduler.FromCurrentSynchroniztionContext());
task.Start(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T06:55:50.377

当您在不同的线程上操作时，您需要使用它`Dispatcher.BeginInvoke`来对绑定到的集合运行更新`UI`

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-04-24T09:41:51.707

我在以下博客中有解决此类问题的方法。

[http://bathinenivenkatesh.blogspot.co.uk/2011/07/wpf-build-more-responsive-ui.html](http://bathinenivenkatesh.blogspot.co.uk/2011/07/wpf-build-more-responsive-ui.html)

它有详细的解释和代码片段......

# android - 创建自定义样式

> ID：10292997
> 
> 赞同：0
> 
> 时间：2012-04-24T06:47:15.240
> 
> 标签：android

我正在研究如何为我开发和部署的应用程序赋予它自己的外观和感觉。所以我在 developer.android.com 上阅读了有关样式和主题的信息。在文本颜色、文本大小、背景颜色取得初步成功之后......我似乎陷入了更改按钮、切换按钮的困境......在我看来，要更改按钮的颜色，必须使用 .9.png 文件创建（可能用于不同的 dpi）。查看默认样式的图稿，我看到了大量这些 .9.png 文件。为了保持一致的风格，它们都应该更新。

说定义新样式涉及修改/重新创建 .9.png 文件是否正确？如果不是，应该如何修改这些基于 .9.png 的元素的样式？如果是这样，是否有任何工具可以帮助创建自定义样式？有没有可以下载/购买的样式包？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T07:12:59.130

我不确定为应用程序中的每个 UI 控件赋予新外观是否是个好主意，除非您是一位非常有经验的设计师。可能，我们无法在他们的手艺上击败谷歌设计师，最好遵循现有的风格，添加一些很酷的功能，而不是随意改变按钮颜色。

# combobox - 在表单中使用 ExtJs4 组合框

> ID：10292999
> 
> 赞同：0
> 
> 时间：2012-04-24T06:47:27.613
> 
> 标签：combobox, extjs4

我有产品编辑表单，带有组合框字段定义：

```
 xtype: 'combo',
 fieldLabel: _('Supplier'),
 hideTrigger: true,
 displayField: 'company',
 valueField: 'id',
 name: 'supplier',
 store: 'Supplier', 
```

当表单加载时，我使用标准功能：form.loadRecord(record)，在组合中我看到供应商 ID ??? 如果我做选择，有公司。那会发生什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T10:12:54.910

这很可能是时机。你什么时候加载你的`Supplier`商店？是自动的吗？然后很可能它是在你调用*之后*加载的`loadRecord`。