# StackOverflow 问答 10744000-10744999

# c# - 从 WPF 中的画布控件打印

> ID：10744003
> 
> 赞同：1
> 
> 时间：2012-05-24T19:24:22.747
> 
> 标签：c#, printing, printqueue

我的应用程序从画布（WPF、C#）打印，但应用程序需要分配一个默认打印机。默认打印机在 PC 上保存为 .ini 文件。这个概念是，工作人员可以点击我画布上的打印按钮，画布会生成一个布局，然后发送到打印机。

所以，我需要做的两件事是：

1.  根据文本文件中的字符串设置默认打印机
2.  装订后打印

单击打印按钮后，画布会更新为我想要的布局（通过数据绑定）并将作业发送到打印机（打印机检测到作业并显示在打印机队列中），但打印机从不打印文档。就好像我已经排队了一份工作，但从未说过“开始”。

然后我的佳能给了我一个错误（尽管这可能是红色的听力），即“另一台打印机正在使用该打印机。以下状态是该计算机的使用状态---”

这是我正在使用的两种主要方法。

```
internal void AutoPrint()
{
        string printerName = GetPrinterNameFromTextFile();
        PrintDialog dialog = new PrintDialog();
        getView(); //queries database, returns model and binds

        Print(dialog, config.PrinterName);
}

internal void Print(PrintDialog dialog, string printerName)                  
{                  
        Canvas canvas = new Canvas();
        canvas = this.PrintCanvas;

        PrintQueue queue = new LocalPrintServer().GetPrintQueue(printerName);
        dialog.PrintQueue = queue;
        Dispatcher.BeginInvoke(DispatcherPriority.Loaded, new Action(delegate()
            {
                dialog.PrintVisual(canvas, "");
            }));
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T12:26:57.957

好的，我在其他地方问了一个不同的问题，但在源代码中提供了答案： [C#printing with WPF](https://stackoverflow.com/questions/10902791/c-sharp-printing-with-wpf)

# c++ - 在 GTKmm 中启动外部编辑器

> ID：10744006
> 
> 赞同：1
> 
> 时间：2012-05-24T19:24:29.303
> 
> 标签：c++, gtk, gtkmm

我正在编写（使用 C++ 和 GTKmm）一个简单的照片浏览器，可以在 GitHub 上找到：

[https://github.com/jjkrol/ZPR](https://github.com/jjkrol/ZPR)

目前我正在创建一个按钮，它允许用户在外部编辑器（例如 GIMP）中打开当前显示的照片。因此，我有两个问题：

*   有没有使用 Gtk::AppChooserDialog 类的例子？我找不到任何东西，没有它们就很难开始选择编辑器。

*   最重要的问题 - 我正在考虑一种在命令行中启动带有照片的应用程序的方法。我想到的唯一解决方案是使用 system() 调用来做这样的事情： system("gimp /path/to/current/photo.jpg"); ，但这可能不是最好的方法。有人知道更好的方法吗？我想有一天将我的应用程序移植到 Windows，并且更便携的方式会很棒。

非常感谢您提前。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T06:02:56.603

您可能想要使用[Glib::spawn_command_line_async](http://developer.gnome.org/glibmm/stable/group__Spawn.html)而不是系统。如果您需要，还有其他类似的功能可以提供更多控制。

例如，您可能想查看[glom](http://git.gnome.org/browse/glom/tree/)之类的应用程序的源代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T16:56:19.250

非常感谢您的回答，gpoo 和 ergosys！最后我决定使用它，`Gio::Appinfo`因为它看起来更像 OOP。如果有人会面临同样的问题 - 这就是我最终的结果：

```
Glib::RefPtr<Gio::AppInfo> editor = Gio::AppInfo::create_from_commandline("gimp", 
                                    "GIMP", Gio::APP_INFO_CREATE_SUPPORTS_URIS);
Glib::RefPtr<Gio::File> photo = Gio::File::create_for_path(
                                (*currentPhoto)->getPath().string());  
editor->launch(photo); 
```

当然，选择编辑器`Gtk::AppChooserDialog`尚未实现。

# vb.net - 通过 LDAP 访问当前用户信息

> ID：10744009
> 
> 赞同：0
> 
> 时间：2012-05-24T19:24:32.127
> 
> 标签：vb.net, active-directory, ldap, .net-2.0

如何通过 LDAP 和 VB.Net 2.0* 访问当前用户信息？

我找到了一个有效的 vbscript，但我宁愿在 .net 中完成它

```
Dim objSysInfo = CreateObject("ADSystemInfo")
Dim strUser = objSysInfo.UserName 'returns current user account
Dim objUser = GetObject("LDAP://" & strUser) 'queries active directory for user account 
```

有什么想法吗？因为 objUser.l 对我来说意义不大。

*我使用的是 2.0 框架，因为在我的 XP/Vista/7 World 中安装 2.0 比 3.5 或 4.0 更可能

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T19:30:17.393

看看[http://www.dreamincode.net/forums/topic/30894-working-with-the-active-directory-in-vbnet/](http://www.dreamincode.net/forums/topic/30894-working-with-the-active-directory-in-vbnet/)或[http://www.codeproject.com/Articles/19689/Working -with-Active-Directory-in-VB-NET](http://www.codeproject.com/Articles/19689/Working-with-Active-Directory-in-VB-NET)

# visual-studio-2010 - 如何在 Visual Studio 2010 中完全禁用剪贴板历史记录/循环？

> ID：10744011
> 
> 赞同：2
> 
> 时间：2012-05-24T19:24:45.527
> 
> 标签：visual-studio-2010, clipboard

我每天都会遇到剪贴板问题，只是进行简单的剪切、复制和粘贴操作。Visual Studio 中的剪贴板对我来说有一半的时间都失败了，这让我发疯了。

有什么方法可以完全关闭剪贴板历史记录/循环功能？我只想要简单可靠的复制和粘贴。

谢谢！

# c# - C# Google API 联系人.SetPhoto

> ID：10744019
> 
> 赞同：1
> 
> 时间：2012-05-24T19:25:39.273
> 
> 标签：c#, google-api

以下代码在尝试检索联系人时返回错误（403 Forbidden）。

```
Contact contact = cr.Retrieve<Contact>(contactURI); 
```

我将此代码基于 Google 的 Profiles API 页面。[https://developers.google.com/google-apps/profiles/](https://developers.google.com/google-apps/profiles/)。我会很感激任何反馈。

```
RequestSettings settings = new RequestSettings("Add Profile Photo", "consumerKey", "consumerSecret", username, domain);
ContactsRequest cr = new ContactsRequest(settings);

Uri contactURI = new Uri("http://www.google.com/m8/feeds/profiles/domain/" + domain + "/full/" + username);

Contact contact = cr.Retrieve<Contact>(contactURI);

Stream outStream = File.OpenRead("C:\\temp\\profilePic.jpg");

try
{
    cr.SetPhoto(contact, outStream);
}
catch (GDataVersionConflictException e)
{
    throw new Exception("Exception setting photo: " + e.Message);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T20:11:11.953

您必须将 RequestSettings 构造函数中的“consumerKey”和“consumerSecret”替换为应用程序的 OAuth Consumer Key 和 Secret。

Documents List API 的文档有很多关于身份验证的详细信息（和 C# 代码），改用 Contacts API 应该很容易适应。

此外，如果您想使用 OAuth 2.0（推荐），请查看库中包含的完整示例：[http ://code.google.com/p/google-gdata/source/browse/trunk/clients/cs/samples/ oauth2_sample/oauth2demo.cs](http://code.google.com/p/google-gdata/source/browse/trunk/clients/cs/samples/oauth2_sample/oauth2demo.cs)

# c# - 将应用程序部署到 IIS（MVC3、EF 4.3）后分页出现意外结果

> ID：10744024
> 
> 赞同：6
> 
> 时间：2012-05-24T19:26:08.680
> 
> 标签：c#, asp.net-mvc-3, entity-framework, windows-server-2008, iis-7.5

我目前部署在使用 Entity Framework 4.3 进行数据库访问的 MVC 3 网站上。

该应用程序在 Visual Studio 开发服务器中按预期工作，但一旦将其部署到远程服务器，查询就会意外反应

它应该显示一个排序列表和该排序数据的页面

我尝试重新启动 Web 服务器和物理服务器机器以确保缓存消失，甚至尝试在远程服务器上使用干净的 IIS 站点，结果相同。

[编辑]：我也完成了完全删除并重新发布到一个干净的站点

**在开发机上**

![开发机器](../Images/039a66dfc5d90cf68aa2402f0333ad41.png)

**在远程服务器上**

![在此处输入图像描述](../Images/873265a205f7e33e7671d002cfc31e2d.png)

**我用来生成表格的代码：**

*控制器*

```
 [HttpGet]
    public virtual ActionResult Index(string filter = "", int? page = null)
    {

        page = page ?? 1;
        filter = filter.Trim().ToLower();
        int pageSize = Properties.Settings.Default.DefaultSPPageSize;

        int skipNum = (page.Value - 1) * pageSize;

        IQueryable<SamplePoint> spList;
        var points = new HashSet<string>(Settings.Default.SamplePointFilter.Split(','));

        if (filter != "")
            spList = db.SamplePoints.Where(e=> 
                        points.Any(p=> e.Id.StartsWith(p))
                     && e.Id.ToLower().Trim().StartsWith(filter.ToLower()))
            .OrderBy(o => o.Id);

        else
            spList = db.SamplePoints.Where(e =>
                        points.Any(p => e.Id.StartsWith(p))
                     && e.Id.Trim().StartsWith(filter)).OrderBy(o => o.Id);

        List<SamplePoint> pageItems;
        if (page != 0)
        {
            pageItems = spList.Skip(skipNum).Take(pageSize).ToList();
        }
        else
        {
            pageItems = spList.OrderBy(o=> o.Id).ToList();
        }

        int _totPages = Convert.ToInt32(pageSize > 0 ? Math.Ceiling(((double)spList.Count() / (double)pageSize)) : 0);

        var vModel = new SamplePointListViewModel(pageItems, filter) { LocationList = FilterListItems, TotalPages = _totPages, CurrentPage = page.Value };

        return View(this.IsExcelRequest() ? MVC.Reports.Views.Excel.SamplePointList : MVC.Reports.Views.SamplePointList, vModel);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T06:51:40.990

```
spList = db.SamplePoints.Where(e=> 
                        points.Any(p=> e.Id.StartsWith(p))
                     && e.Id.ToLower().Trim().StartsWith(filter.ToLower()))
            .OrderBy(o => o.Id); 
```

从上面的代码中，

**e.ID**是您上图中的第一列吗？如果不是，**e.Id**是主键并且 IdentitySeed 设置为 true 吗？如果是这样，这是您的问题，因为它是自动生成的，所以此 ID 在生产数据库和开发数据库中会有所不同，从而导致显示不同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T12:44:57.557

确保两台机器 (dev/prod) 上的 ASP.NET MVC 版本相同。其他人因此而[遇到问题](http://www.hanselman.com/blog/ASPNETMVCBetaAndRCUpgradesConfirmYourExpectationsAndVersionNumbersInProductionEnvironments.aspx)。

基本上，生产服务器的 GAC 中有一个较新的版本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T04:03:19.140

两台服务器是否具有相同的区域设置？

您使用`string.ToLover`并且`StartsWith`将根据当前文化执行转换。

您应该将这些方法的重载版本与 Invariant 文化一起使用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-31T06:48:46.817

一个简单的解决方案是实现某种**日志记录**并将中间级别产生的输出写入日志文件。

如果您使用的是 VS 终极版，您可以使用[IntelliTrace 试一试](http://sdn.microsoft.com/en-us/magazine/ee336126.aspx)。（虽然我听说过这个工具，但我没有使用过）

# cakephp-1.3 - 从 app_controller，Cakephp1.3 访问控制器上的功能

> ID：10744030
> 
> 赞同：0
> 
> 时间：2012-05-24T19:26:29.027
> 
> 标签：cakephp-1.3

在 CakePHP 1.3 中：

orry 如果这个问题很愚蠢，但我真的不知道为什么我的代码不起作用，也许有人可以指出我正确的方向。我的问题/问题是：如何从 app_controller 访问控制器中的功能？

我有一个应用程序/控制器/items_controller.php：

```
class ItemsController extends AppController {
       ...
        function holaItem(){
            $i = 1;
            return $j = 2;
        }
        ...
} 
```

app_controller.php

```
class AppController extends Controller {
     var $uses = array('Item');

    function beforeFilter() {
        parent::beforeFilter();
        $result2 = $this->Item->holaItem();
    }
} 
```

为什么“$this->Item->holaItem()”不起作用？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T19:30:09.507

`$this->Item`参考`Item`模型。但是，该`holaItem()`方法存在于`Item`控制器中。

将其移至您的`Item`模型或将其`beforeFilter()`移至您的`Item`控制器。

我鼓励你阅读并理解[CakePHP 如何做 MVC](http://book.cakephp.org/1.3/view/890/Understanding-Model-View-Controller)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T22:51:48.143

尝试使用另一种方法。您正在尝试 MVC 模型。

您可以将组件用于逻辑功能。[创建组件](http://book.cakephp.org/1.3/en/view/996/Creating-Components)

# linq - linq 左外连接列表

> ID：10744031
> 
> 赞同：1
> 
> 时间：2012-05-24T19:26:30.460
> 
> 标签：linq

我有 3 份清单，一份给用户的付款清单，一份为同一笔付款支付的税款清单，一份为同一笔付款支付的州税清单。

问题是，每笔付款可能不存在税收或州税，因此我需要将每笔单独的付款与已支付的税款或州税相匹配，但如果其中一项或两项都不存在，则继续显示。这是有问题的特定查询，因为我现在拥有它

```
 var joinEverything = 
    from IP in IndividualPaymentsList
    join TD in TaxDetailsList.DefaultIfEmpty()
        on IP.UserId equals TD.UserId
        where IP.WeekEndDate == TD.WeekEndDate
    join ST in StateTaxDetailsList.DefaultIfEmpty()
        on IP.UserId equals ST.UserId
        where IP.WeekEndDate == ST.WeekEndDate
    select new 
    {
        IP.UserId,
        FedTax = TD.CheckAmount,
        StateTax = ST.CheckAmount,
        IP.CheckAmount,
    }; 
```

目前，如果在例如州税中不存在记录，我会收到“NullReferenceException：对象引用未设置为对象实例”。而不仅仅是接受 null 作为 ST.CheckAmount 中的值

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T19:58:59.423

您正在做的`DefaultIfEmpty()`事情很好，但是您正在尝试检索设置为此默认值的对象的属性，例如，这`TD.UserId`意味着您正在调用 null.UserId。

下面是我试图让它工作的尝试——但是，我真的没有数据来测试它，所以我可能在某处弄乱了语法，或者我可能会尝试访问一个超出范围的变量——试一试，让我知道您是否遇到问题：

```
var joinEverything = 
    from IP in IndividualPaymentsList
    join TD in TaxDetailsList
        on IP.UserId equals TD.UserId into group1
        from g1 in group1.DefaultIfEmpty()
        where g1 == null || (IP.WeekEndDate == g1.WeekEndDate)
    join ST in StateTaxDetailsList
        on IP.UserId equals ST.UserId into group2
        from g2 in group2.DefaultIfEmpty()
        where g2 == null || IP.WeekEndDate == g2.WeekEndDate
    select new 
    {
        IP.UserId,
        FedTax = (g1 != null ? g1.CheckAmount : String.Empty), // or your default value for the type
        StateTax = (g2 != null ? g2.CheckAmount : String.Empty),
        IP.CheckAmount,
    }; 
```

# symfony - Symfony2，如何为每个角色设置访问控制？

> ID：10744046
> 
> 赞同：0
> 
> 时间：2012-05-24T19:27:31.397
> 
> 标签：symfony, twig, access-control

假设一个场景如下：

```
Class User {}      // User has Admin Role 
Class Role {}     // Role Admin has Access to choose_date
Class Feature {} // Feature route is choose_date 
```

每个用户可以有一个角色。每个角色都可以访问许多功能。我已经为每个角色设计了保存和检索访问矩阵的部分。所以我知道哪个角色应该访问哪些功能，它保存在一个名为roles_features的表中。

我是否必须编写自己的函数来检查该角色是否允许手动路由。注意：我根本不想使用`secuirty.yml`文件；

```
// In my Twig File
{% if my_own_get_access_matrix(app.user.roles, 'choose_date') %}

    <a href="{{ path('choose_date') }}">
        Edit 
    </a>

{% endif %} 
```

我想知道是否存在任何`my_own_get_access_matrix`为每个角色和链接返回优化的访问控制方式的预定义，或者我必须实现我的；

正如我所写，我不想使用，`secuirity.yml`因为访问控制需要是动态的。因此，超级用户 (ADMIN) 应该能够定义角色及其对每个功能的访问权限，这是一个路由；

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T14:56:18.340

看起来您正在寻找[ACLs](http://symfony.com/doc/current/cookbook/security/acl.html)。

# ruby-on-rails - Rails 正在为每个资产请求重新解析 lib/ 中的 ruby 文件

> ID：10744047
> 
> 赞同：2
> 
> 时间：2012-05-24T19:27:31.443
> 
> 标签：ruby-on-rails, asset-pipeline

Rails 版本：3.1 Ruby 版本：1.9.2

在我当前的一个项目中，对于每个请求，我都会在日志中收到数十条“警告：已初始化常量”行。有问题的常量位于 lib 中定义的模块中。

我完全困惑为什么 Rails 每次请求都会解析这个文件多达 80 次，直到今天早上我碰巧在开发模式下打开缓存（为了测试其他东西）并注意到 Rails 报告每个请求之间的缓存未命中线。这是加载主页时约 80 个此类通知中的前 4 个：

```
/Users/evan/Development/Ruby/apps/thefriendex/lib/feeds_mixin.rb:2: warning: already initialized constant DEFAULT_LIMIT
cache: [GET /assets/application.css?body=1] miss
/Users/evan/Development/Ruby/apps/thefriendex/lib/feeds_mixin.rb:2: warning: already     initialized constant DEFAULT_LIMIT
cache: [GET /assets/_have_need_bar.css?body=1] miss
/Users/evan/Development/Ruby/apps/thefriendex/lib/feeds_mixin.rb:2: warning: already initialized constant DEFAULT_LIMIT
cache: [GET /assets/admin.css?body=1] miss
/Users/evan/Development/Ruby/apps/thefriendex/lib/feeds_mixin.rb:2: warning: already     initialized constant DEFAULT_LIMIT
cache: [GET /assets/blurb_ad.css?body=1] miss 
```

所以看起来它正在为每个资产请求重新解析 lib/feeds_mixin.rb 。我曾经有一个配置行将 lib/*.rb 添加到自动加载路径，但我已经删除了它没有效果。

有问题的模块只是一个简单的模块，具有一个常量和三个实例方法。它通过一个简单的包含混合到两个控制器中，如有必要，我可以添加该代码。

关于为什么每次请求资产时都会重新解析此文件的任何想法？

代码：mixin (lib/feeds_mixin.rb)

```
module FeedsMixin
  DEFAULT_LIMIT = 6

  def friends_feed_items(opts = {})
     # do stuff
  end

  def friends_of_friends_feed_items(opts = {})
     # do stuff
  end

  def community_feed_items(opts = {})
    # do stuff
  end

  def build_feed_hash(type, items, opts) 
    # do stuff
  end
end 
```

代码：包含在哪里（lib/controllers/dashboard_controller.rb）（另一个控制器与这个非常相似）

```
require 'feeds_mixin'
class DashboardController < ApplicationController

  extend ActiveSupport::Memoizable
  include FeedsMixin
  layout 'dashboard'
  before_filter :require_user, :set_feeds

  LIMIT = 6
  DEFAULT_DATE_THRESHHOLD = 14.days

  def index
  end

  def set_feeds
    @friends_feed = friends_feed_items(:since => since_date, :limit => LIMIT)
    @friends_of_friends_feed = friends_of_friends_feed_items(:since => since_date, :limit => LIMIT)
    @community_feed = community_feed_items(:since => since_date, :limit => LIMIT)
  end

  def since_date
    DEFAULT_DATE_THRESHHOLD.ago
  end
  memoize :since_date
end 
```

# desktop - 使用 starling/stage3d 的桌面 + 移动 Flash 游戏

> ID：10744050
> 
> 赞同：0
> 
> 时间：2012-05-24T19:27:48.150
> 
> 标签：desktop, stage3d, starling-server

大约 7 或 8 年以来，我们已经专门为网络开发了基于 Flash 浏览器的游戏，这已经是一个不错的运行。当然，随着移动设备的普及，情况发生了变化。客户开始要求，几乎是假设，游戏可以在浏览器中运行——在台式机和平板电脑上。

抛开关于使用 HTML5/JS 解决方案的整个讨论，我们将在下一个项目中坚持使用 Flash，并且需要找出让它在桌面浏览器**和**iPad 上运行的最佳方式，同时最大限度地利用代码-利用。

鉴于当今技术的现状，最佳路径是什么？该游戏将是一款带有一些物理特性的 2D 横向卷轴类型游戏，开发将主要使用位图图形（相对于矢量）和精灵表来完成。

以下是我理解的选择：

选项 1：开发针对 Web 的“标准”Flash 播放器（11 或更高版本）的游戏，然后移植到 iOS AIR 3.2 应用程序，进行适当的优化，如此处[概述](http://sierakowski.eu/list-of-tips/82-starting-with-air-for-android-and-ios-building-one-app-for-both-platforms.html)的优化。

选项 2：将 Starling/Stage3D 用于桌面，然后移植到 iPad 应用程序。只是想知道 Starling 是否准备好在黄金时段为移动 + 桌面制作高质量的游戏。Stage3D 在旧机器上的软件模式下是否仍能很好地工作？

选项 3：CS6 中允许我们发布到 HTML5 的新功能。这是否已经接近成熟到足以发布完整游戏？这个解决方案的好处是它可以在 iPad 上的浏览​​器中运行，而不是作为一个单独的应用程序。

非常感谢任何指导。我也想知道其中任何一个涉及的陷阱和优化技术。但似乎所有这一切的根本问题是我们是否应该使用 Starling/Stage3D？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T20:48:02.500

绝对是**选项 2**。

您可以使用选项 1，但如果没有 Stage3D 硬件渲染，移动设备的性能可能会受到影响。

如果您正在设计/移植带有基本动画的广告横幅，选项 3 是一个不错的选择，应该避免用于游戏开发。

更多信息： [Adobe 游戏 SDK](http://gaming.adobe.com/technologies/gamingsdk/)

# c++ - Qt隐藏控制台窗口停止写入日志文件

> ID：10744052
> 
> 赞同：0
> 
> 时间：2012-05-24T19:28:03.730
> 
> 标签：c++, windows, qt

我有一个 Qt 项目。如果我使用 Qt Creator 启动我的应用程序，我从来没有看到任何控制台窗口。（但 exe 将在任务管理器中看到）。

但是如果我直接运行应用程序 exe，控制台窗口也会弹出并关闭。

`CONFIG += console`我通过从**project.pro**文件中删除来隐藏控制台窗口。但这改变了影响`qDebug()`日志记录。即，不会将任何内容添加到日志文件（okb 文件）中。

开发环境：Qt 4.7.3/Windows

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T00:40:07.043

当没有控制台窗口时，所有调试输出[都](http://qt-project.org/doc/qt-4.8/debug.html)使用`OutputDebugString`. 即你可以从调试器中读取它（visual studio express - 使用调试器的“输出”窗口），但你不能通过运行类似的东西将它重定向到文件`app > 1.txt`（因为没有控制台的应用程序在技术上没有标准输出）。

[或者，您可以使用qInstallMsgHandler](http://qt-project.org/doc/qt-4.8/qtglobal.html#qInstallMsgHandler)安装自己的消息处理程序以调试消息，并根据需要编写自己的日志文件。

# java - 使用 apache HttpClient 连接到 Web 服务

> ID：10744053
> 
> 赞同：4
> 
> 时间：2012-05-24T19:28:04.377
> 
> 标签：java, rest

[Appache HTTP 组件](http://hc.apache.org/httpcomponents-client-ga/)库似乎可以很好地与常规网站通信，但无法连接到 Web 服务。

我正在构建要在 Java 桌面应用程序中运行的组件，该应用程序将使用 Jersey 框架与 Web Service-REST 进行通信。Web 服务正在运行，我可以与我的 Web 浏览器和 netbeans 中的 Test-Web-Service 功能进行通信。

如果我尝试从常规网页甚至是我机器上运行的 Glassfish Web 服务器的默认页面读取，客户端代码工作正常。为什么当我尝试使用我的客户端程序（下面的代码）访问 Web 服务时，我会从 Web 服务器收到 404 Not Found 错误？

```
import java.io.*;
import org.apache.http.*;
import org.apache.http.client.*;
import org.apache.http.impl.client.DefaultHttpClient;
import org.apache.http.client.methods.*;  //HttpHead, HttpPut, HttpGet, etc...
import org.apache.http.util.EntityUtils;

public class ApacheClientDemo {

  public static void demo() throws IOException {           
     String uri = "http://localhost:8080/Proctorest/resources/helloWorld";
     HttpClient httpclient = new DefaultHttpClient();
     HttpGet httpget = new HttpGet(uri);
     HttpResponse response = httpclient.execute(httpget);
     System.out.println(response.getStatusLine().toString());
     HttpEntity entity = response.getEntity();
     System.out.println();
     System.out.println(EntityUtils.toString(entity));       
  }

  public static void main(String[] args) {
    try {
        demo();
    }
    catch(IOException ioe) {
        System.out.println(ioe);
    }
  }
} 
```

当访问在线的常规网站或本地托管的非 Web 服务站点时，输出为

```
 HTTP/1.1 200 OK 
```

其次是网页的内容。

上面的代码给了我

```
 HTTP/1.1 404 Not Found 
```

* * *

编辑：下面是 Web 服务的代码。Web 服务代码是从 Netbeans 示例项目生成的。 ![Netbeans 示例 Web 服务项目](../Images/0e32663d5c756dcc46906910bc0b81d2.png)

```
/*
* DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS HEADER.
*
* Copyright 1997-2010 Oracle and/or its affiliates. All rights reserved.
*
* Oracle and Java are registered trademarks of Oracle and/or its affiliates.
* Other names may be trademarks of their respective owners.
*
* The contents of this file are subject to the terms of either the GNU
* General Public License Version 2 only ("GPL") or the Common
* Development and Distribution License("CDDL") (collectively, the
* "License"). You may not use this file except in compliance with the
* License. You can obtain a copy of the License at
* http://www.netbeans.org/cddl-gplv2.html
* or nbbuild/licenses/CDDL-GPL-2-CP. See the License for the
* specific language governing permissions and limitations under the
* License.  When distributing the software, include this License Header
* Notice in each file and include the License file at
* nbbuild/licenses/CDDL-GPL-2-CP.  Oracle designates this
* particular file as subject to the "Classpath" exception as provided
* by Oracle in the GPL Version 2 section of the License file that
* accompanied this code. If applicable, add the following below the
* License Header, with the fields enclosed by brackets [] replaced by
* your own identifying information:
* "Portions Copyrighted [year] [name of copyright owner]"
* 
* Contributor(s):
* 
* The Original Software is NetBeans. The Initial Developer of the Original
* Software is Sun Microsystems, Inc. Portions Copyright 1997-2007 Sun
* Microsystems, Inc. All Rights Reserved.
* 
* If you wish your version of this file to be governed by only the CDDL
* or only the GPL Version 2, indicate your decision by adding
* "[Contributor] elects to include this software in this distribution
* under the [CDDL or GPL Version 2] license." If you do not indicate a
* single choice of license, a recipient has the option to distribute
* your version of this file under either the CDDL, the GPL Version 2 or
* to extend the choice of license to its licensees as provided above.
* However, if you add GPL Version 2 code and therefore, elected the GPL
* Version 2 license, then the option applies only if the new code is
* made subject to such option by the copyright holder.
*/

package helloworld;

import javax.ejb.EJB;
import javax.ejb.Stateless;

import javax.ws.rs.Path;
import javax.ws.rs.GET;
import javax.ws.rs.PUT;
import javax.ws.rs.Produces;
import javax.ws.rs.Consumes;

/**
* REST Web Service
*
* @author mkuchtiak
*/

@Stateless
@Path("/helloWorld")
public class HelloWorldResource {

    @EJB
    private NameStorageBean nameStorage;
    /**
    * Retrieves representation of an instance of helloworld.HelloWorldResource
    * @return an instance of java.lang.String
    */
    @GET
    @Produces("text/html")
    public String getXml() {
        return "<html><body><h1>Hello "+nameStorage.getName()+"!</h1></body></html>";
    }

    /**
    * PUT method for updating an instance of HelloWorldResource
    * @param content representation for the resource
    * @return an HTTP response with content of the updated or created resource.
    */
    @PUT
    @Consumes("text/plain")
    public void putXml(String content) {
        nameStorage.setName(content);
    }
}

/////////// NameStorageBean .java

import javax.ejb.Singleton;

/** Singleton session bean used to store the name parameter for "/helloWorld" resource
*
* @author mkuchtiak
*/
@Singleton
public class NameStorageBean {

    // name field
    private String name = "World";

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T22:04:51.400

I can not see how you deploy the service.

try change (camel case is unusual for a service)

```
String uri = "http://localhost:8080/Proctorest/resources/helloWorld"; 
```

to lowercase "helloworld"

```
String uri = "http://localhost:8080/Proctorest/resources/helloworld"; 
```

or try

```
String uri = "http://localhost:8080/helloworld"; 
```

**HOW TO GET ROUTE**

**U:...\HelloWorld1\HelloWorld1\web\WEB-INF\sun-web.xml**

```
<sun-web-app error-url="">
  <context-root>/HW</context-root>
  <class-loader delegate="true"/>
  <jsp-config>
    <property name="keepgenerated" value="true">
      <description>Keep a copy of the generated servlet class' java code.</description>
    </property>
  </jsp-config>
</sun-web-app> 
```

a) //localhost:8080/**HW** from `<context-root>/HW</context-root>`

**U:...\HelloWorld1\HelloWorld1\web\WEB-INF\web.xml**

```
<web-app version="3.0" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd">
    <servlet>
        <servlet-name>ServletAdaptor</servlet-name>
        <servlet-class>com.sun.jersey.spi.container.servlet.ServletContainer</servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>
    <servlet-mapping>
        <servlet-name>ServletAdaptor</servlet-name>
        <url-pattern>/hw/*</url-pattern>
    </servlet-mapping>
    <session-config>
        <session-timeout>
            30
        </session-timeout>
    </session-config>
    <welcome-file-list>
        <welcome-file>index.jsp</welcome-file>
    </welcome-file-list>
</web-app> 
```

b) //localhost:8080/HW/**hw** from `<url-pattern>/hw/*</url-pattern>`

**U:....\HelloWorld1\HelloWorld1\src\java\helloworld\HelloWorldResource.java**

```
.....
/**
 * REST Web Service
 *
 * @author mkuchtiak
 */

@Stateless
@Path("/helloworld")
public class HelloWorldResource {
.... 
```

c) //localhost:8080/HW/hw/**helloworld** from `@Path("/helloworld")`

put a)b)c) parts from your 3 files together.

**Notice: the url Netbeans shows is wrong, only /HW is correct**

```
...
    Incrementally deploying HelloWorld1
    Completed incremental distribution of HelloWorld1
    run-deploy:
    Browsing: http://localhost:8080/HW/resources/helloWorld
... 
```

* * *

```
....
public static void demo() throws IOException {           
     String uri = "http://localhost:8080/HW/hw/helloworld";
     HttpClient httpclient = new DefaultHttpClient();
     HttpGet httpget = new HttpGet(uri);
     HttpResponse response = httpclient.execute(httpget);
     System.out.println(response.getStatusLine().toString());
     HttpEntity entity = response.getEntity();
     System.out.println();
     System.out.println(EntityUtils.toString(entity));       
  }
.... 
```

OUTPUT

```
debug:
HTTP/1.1 200 OK

<html><body><h1>Hello World!</h1></body></html> 
```

# jsf-2 - 如何防止 JSF2 注入隐藏的 javax.faces.ViewState

> ID：10744054
> 
> 赞同：1
> 
> 时间：2012-05-24T19:28:13.190
> 
> 标签：jsf-2, primefaces, viewstate, mojarra

如何禁止 Mojarra，将 javax.faces.ViewState 注入隐藏到我`<form>`的 s 中？我有一个搜索`<form method='GET'>`，它在我的页面第一次加载时有效（因为我的视图范围 bean 已正确重新初始化）。但是在页面中（通过 PrimeFaces 网格）进行 AJAX 分页之后，Mojarra（或 PrimeFaces？）将隐藏的 javax.faces.ViewState 注入到我的表单中。现在，当我提交表单时，由于 javax.faces.ViewState 输入，它不会重新启动我的视图范围 bean。

这里的问题是：我希望我的搜索 bean 初始化并向用户显示结果，但是由于 ViewScope 参数被传递，这个 bean 既没有被初始化，也没有显示相关页面。它只保留在上一页上。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T19:37:49.343

这样做的不是 Mojarra，而是 PrimeFaces 这样做。尝试调用`<h:commandButton>`with `<f:ajax>`，您会发现它只会更新按钮最初所在的表单的视图状态。

您可能想向PrimeFaces人员报告一个[问题](http://code.google.com/p/primefaces/issues/)`<form>`，即他们在 ajax 更新期间不应触及任何具有`method="get"`和/或不具有`<input type="hidden" name="formId" value="formId">`.

在他们修复之前，最好的办法是在提交纯 HTML 表单时删除该元素。

```
<form onsubmit="form.removeChild(document.getElementById('javax.faces.ViewState'))"> 
```

# ruby - Rails 中添加状态的最佳实践

> ID：10744059
> 
> 赞同：2
> 
> 时间：2012-05-24T19:28:34.127
> 
> 标签：ruby, ruby-on-rails-3, model

我需要为对象添加状态，并且需要有关 Rails 方式的提示来执行此操作。我在某个地方看到状态被添加到模型中，但已经丢失了它的位置。

状态，我的意思是跟踪项目状态的东西。喜欢`{0: :ORDERED, 1: :CHANGED, 2: :SHIPPED, 3: :ARCHIVED}`在商店订购。看起来它需要存储在数据库中的 id、我可以在代码中使用的常量或符号而不是整数 id，以及一两个人类可读的 UI 消息

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-24T20:57:06.383

有几种简单的方法可以做到这一点。如果状态名称很短，我基本上会按照 Samy 的建议进行操作，并将它们直接存储在模型中。所以，在你的迁移中，你会做

```
add_column :orders, :status, :string 
```

然后，在您的模型中，您可以使用该`status`方法来检索状态。您需要确保只存储有效状态，因此您的`:inclusion`验证器如下所示：

```
class Order
  validates :status, inclusion: { in: %w(ordered changed shipped archived) },
                     presence: true
end 
```

如果状态较长，您可以执行与上述非常相似的操作，为每个状态添加一个短名称，然后添加一个额外的方法来为您提供完整的状态消息

```
class Order

  STATUSES = { 'ordered' => 'Order placed',
               'changed' => 'A change has been made to the order',
               'shipped' => 'The order has been shipped',
               'archived' => 'The order has been archived' }

  def self.valid_statuses
    STATUSES.keys
  end

  validates :status, inclusion: { in: valid_statuses },
                     presence: true

  def extended_status
    STATUSES[status]
  end
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T19:54:40.407

[MagicFieldNames](http://www.enjoyrails.com/wikis/MagicFieldNames)可能是您正在寻找的，它有一个鉴别*器类型*列，您可以将其用于[Single Table Inheritance](http://api.rubyonrails.org/classes/ActiveRecord/Base.html)。

如果你想要更简单，你可以使用一个*状态*列，它的值可以等于*ordered*、*changed*或*shipping*。你甚至不需要在 Rails 或类似的东西中创建常量。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-24T20:11:48.553

如果问题有一些复杂性（fe：很多状态，对象在更改其状态时会更改其行为......），您可以使用 gem [StateMachine](https://github.com/pluginaweek/state_machine)。

# ruby-on-rails - IE8/9 中视图的主要样式问题：在 Chrome/FF 中看起来不错。RoR 3.0 电子商务应用

> ID：10744065
> 
> 赞同：0
> 
> 时间：2012-05-24T19:28:52.420
> 
> 标签：ruby-on-rails, internet-explorer-8, internet-explorer-9

所以是的，我是一个 n00b，我没有在 IE8 或 9 中进行测试。我在 Mac 上工作。Buddy 刚刚在 IE9 中将其拉起，看起来很奇怪。没有在 ie8 中看到它，但无法想象它看起来更好。刚刚安装了 VirtualBox，但是解决这种情况的最有效/可接受/合法的方法是什么？

任何意见是极大的赞赏。不知道该怎么办，因为这是我的第一个半大型应用程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T19:40:32.600

不确定合法的东西，但这可能是在 OS X 上使用 VirtualBox 启动和运行 IE 的最简单方法：http: [//osxdaily.com/2011/09/04/internet-explorer-for-mac-ie7- ie8-ie-9-免费/](http://osxdaily.com/2011/09/04/internet-explorer-for-mac-ie7-ie8-ie-9-free/)

# objective-c - 如何在 iOS 上运行单独的进程

> ID：10744068
> 
> 赞同：3
> 
> 时间：2012-05-24T19:29:04.703
> 
> 标签：objective-c, cocoa-touch, ios5, nstask

如何在 iOS 上运行单独的进程（可执行文件将在主包中）？NSTask 似乎不见了……

顺便说一句，我不在乎这是否会被 Apple 拒绝，因为它永远不会被提交。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-24T19:39:08.770

除了从 xcode 或主屏幕启动可以在后台运行的进程之外，没有其他方法可以运行单独的进程。

如果您希望流程 1 启动流程 2，那么您就不走运了。

但是，如果您希望进程 1 在后台运行，然后进程 2 稍后启动并与进程 1 通信（通过内存映射文件或网络），那么您可以这样做，因为 xcode 将允许您在其上运行多个应用程序一次模拟器。

或者，您可以通过线程模拟进程，但这取决于您想要做什么。

# algorithm - 绘制用户定义的树

> ID：10744069
> 
> 赞同：1
> 
> 时间：2012-05-24T19:29:06.087
> 
> 标签：algorithm, tree, drawing, metalanguage

我正在制作一个非常抽象的树绘图系统，但是我在将它应该具有的所有绘图功能形式化时遇到了很多麻烦。如果有人能指出我要阅读的关于这个主题的东西，我将非常感激，因为不幸的是我的搜索是徒劳的。

我正在寻找/尝试制作一种用于显示树木的元语言。在这些树中，每个节点都是具有用户定义图形表示的用户定义对象的一个​​实例。

每个对象都与一个名称、一个图形表示相关联，并且具有有限数量的子代 (0+)，这些子代仅知道是对象本身。不允许对象递归。每个对象可能具有用户定义的选项，用于触发将改变其图形表示的条件（以用户定义的方式）。一些选项是自动应用的，其他选项可能需要用户交互（“您希望这个对象是 A 还是 B？”），从而解释了为什么需要实例化对象树。

```
Object
    Name                // The Object Name
    Childs              // List of Object Childs
        ContextName         // The Name of the Child within this context
        Types               // List of Objects' names. This child may be only one of them. Decided by the user during instancing.
        Options             // List of Options assigned to this child. Some of them may require user interaction, and apply other Options to the Child's childs.
        *Priority           // This is an integer which is used to decide the order in which childs are drawn.
    Symbol Name         // The Graphical representation of the Object 
```

一旦对象树被实例化，就必须在没有任何成瘾的用户输入的情况下绘制它，这就是我遇到麻烦的地方。对象树的实例化为每个对象分配了一个特定的图形表示（我们称之为符号）。然而，该分配在实例化之前是未知的。不同的对象也可能具有相同的符号，根据对象的选项可能会以不同的方式绘制。

正因为如此，符号必须与对象分开定义，并且必须具有一系列抽象机制，以便能够按照用户指定的规则正确地绘制自己（和他们分配的孩子）。

每个符号由一个图像（或没有图像）加上有限数量的附件表示。附件是符号坐标的相对位置，它告诉绘图代码在哪里绘制对象子项的符号。它们中的每一个都可能具有特定的使用条件（例如，此附件只能由具有特定选项的符号使用，或者如果已经绘制了 N 个符号，则与已绘制的符号没有冲突等）。

该算法必须按照其优先级指定的顺序为每个对象的孩子找到一个免费的附件。如果无法找到子项的附件，则用户可以预先指定允许某些自动重试的规则，但如果它们也失败了，那么整个树的绘制就会失败。其中一些规则允许添加上瘾的子符号和/或将子符号分配给其他孩子（使他们成为 grandChildren）等。

```
Symbol
    Name
    Main Image      // Image Path, Height, Width
    Attachments     // List of the attachments, their position, requirements and addictional infos
    Fail Rules      // List of actions to do if it is not possible to successfully assign each Child to an Attachment 
```

我的主要问题是 Symbol 应该能够访问的变量数量非常多。我将再次提醒的每个符号应该使用这种元语言定义，应该能够访问其子符号的信息（而不是其他符号，以避免死锁和循环引用）：例如，用户可能想要高度和宽度一个符号等于所有子符号的高度和宽度之和，或者使用相同的图片，等等。这也是由于用户独立于最终结构编写符号规则的事实造成的。

同时，由于必须从上到下绘制树，因此其中一些信息可能从一开始就无法获得，并且可能需要大量的回溯。

此外，由于所有这些都必须在我必须能够形式化和解析的元语言中定义，我必须定义元语言需要哪些功能以允许语言的最大自由度 -编写用户而不是过于复杂（这是一个模糊的限制，但本质上我不想让 Tikz 作为我的元语言的子集）。然而，我在识别它们时遇到了很多麻烦。

正如我之前所说，我正在寻找有关此类主题和/或完成此类项目的方法的信息。一旦我能够完全完成元语言，我认为我不会有太多麻烦来实现代码来完成所有这些，我的问题大部分是理论上的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T19:46:14.757

我已经用分层数据做了一些类似的项目。我指出我开始的地方：

Joe Celko 是树数据之王。我建议你从他的书开始。它是逻辑和业务案例的混合体。Smarties 的 SQL 中的树和层次结构甚至有一个新版本。那里也有一种描述层次结构的语言。

我使用 Oracle 来存储我的层次结构，它有一个非常有效的系统来提取和存储树数据。在文档或书中查找“连接方式”：Mishra 和 Beaulieu 的 Mastering Oracle SQL。

您可以使用指针从服务器中提取图像，这样您就不会将它们存储在数据库中。我已经构建了几个使用图形对象分层显示数据的系统，它通过这种方式降低了开销。DevExpress 和 Telerik 都有很好的查看器来显示树，我让我的动态构建下一个级别。在深入研究之前，它不知道下一个级别将是多少或什么。尝试这些示例并阅读文档，您将能够很快将它们组合在一起。

对于 Telerik，此链接将向您显示多个按需加载视图： [http ://demos.telerik.com/aspnet-ajax/treeview/examples/programming/loadondemandmodes/defaultcs.aspx](http://demos.telerik.com/aspnet-ajax/treeview/examples/programming/loadondemandmodes/defaultcs.aspx)

对于 Devexpress： [http ://demos.devexpress.com/ASPxTreeListDemos/Data/VirtualMode.aspx](http://demos.devexpress.com/ASPxTreeListDemos/Data/VirtualMode.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T20:18:40.840

在 HTML/DOM 中思考。

当我发现我正在使用的**大纲文件 NoteCase 的文件格式是纯 HTML 时，我感到很惊讶。**NoteCase 可以在这里找到：http: [//notecase.sourceforge.net/index1.html](http://notecase.sourceforge.net/index1.html)

*如果你不熟悉，*outliner*是一种应用类型，你可以在层次树中主要组织文本节点。也有任务大纲。当大纲具有图形表示时，它被称为**思维导图**。无论如何，文件系统的目录结构也是一个大纲。有很多针对不同领域的大纲。有关更多详细信息，请参阅维基百科。*

Notecase 使用 DL/DT/DD：DL 是列表，DT 是项目，DD 是项目的描述。当然，它们可以嵌套。

1.  如果格式是 HTML，您只需要一个 CSS 就可以在浏览器中显示它，以便于人眼易于阅读。

2.  如果你有额外的属性，你可以定义额外的标签或属性，浏览器不会显示，但你的渲染器可以。

3.  您应该编写一个转换器，它将您的源 HTML 文件格式转换为更详细的 HTML 格式，其中包含*计算*字段（例如，来自子节点的值的总和，或者用继承的子节点中的“继承”标记替换来自父节点的值），一些额外的格式，或者您可以将属性转换为 HTML 节点：

    `<node type="x" size="y" />`

    至

    `<div class="node">`
      `<div class="param"> type: x </div>`
      `<div class="param"> size: y </div>`
    `</div>`

4.  您的数据表示是一种 DOM，您应该以类似的方式处理它。首先，从文件中解析和读取值。然后，您应该运行一些额外的回合（遍历树）以使用默认值填充缺失值，计算继承值和汇总值等。

    我认为，您不能使用标准 DOM 解析器，因为您提到了根据参数对内容进行自定义*排序*，哪个 DOM modell 并不真正支持。

5.  不要害怕遍历对象树，就像要在其上执行的操作一样多**。**您可以更改通行证的顺序，启用和禁用通行证......随着您拥有越来越多的功能，它将被表述为新的处理通行证。

    您可能有 pass，必须运行多次，例如，如果一个 pass 不能计算一个值（因为它的源应该首先计算），它可能会返回一个“我还没有完成”的标志，它应该在树上再次运行，直到结果“没有更改，我已经完成”。

我希望我已经推动了你一点。

# c# - linq orderby 问题（按自定义规则排序字符串）

> ID：10744074
> 
> 赞同：0
> 
> 时间：2012-05-24T19:29:21.880
> 
> 标签：c#, linq, linq-to-sql, sql-order-by

我有一个 linq 查询，它没有按照我想要的方式排序。

查询：

```
return (from obj in context.table_orders
    orderby obj.order_no
    select obj.order_no.ToString() + '-' + obj.order_description).ToList<string>(); 
```

会发生什么情况是我的记录按字母顺序排序，是否有我可以使用的 Linq 关键字，以便我的记录正确排序（所以订单 30 在订单 100 之前）？

我希望结果是一个字符串列表，因为它用于填充 ComboBox。

数据库中的一些“order_no”也像“2.10”和“9.1.1”。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T19:36:05.333

> 会发生什么情况是我的记录按字母顺序排序，是否有我可以使用的 Linq 关键字，以便我的记录正确排序（所以订单 #30 在订单 #100 之前）？

如果每次有人问这个我都能得到一分钱，我会很富有。

是的，有 - 简单的答案：订购数字而不是字符串。

> 所以订单#30在订单#100之前）

但是 #30 出现在 #100 之后，原因很简单，因为它们是按字母顺序排序的，因为它们是字符串。

解析字符串，将数字转换为 - 好吧 - 一个数字，然后按它排序。

谁想到 order_no 应该是一个没有固定长度的字符串（如 00030）应该 - 好 - ;) 接受数据库建模的基础教育。我真的很喜欢发票号码之类的东西是字符串（它们不是数字），但将它们保持在（a）一个可定义的模式和（b）校验和（以便很容易发现数据输入错误）应该是基础；）

初级人员定义数据库和数据模型而不考虑后果时，就会遇到这种问题。

你有一些痛苦 - 解析字符串，通过解析结果排序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T19:37:46.473

如果`obj.order_no`是字符串，则将其转换为数字进行排序

```
orderby Int32.Parse(obj.order_no) 
```

或者

```
orderby Decimal.Parse(obj.order_no) 
```

当然，这仅在字符串表示有效数字时才有效。

* * *

如果`order_no`不是有效数字（例如`"17.7-8A"`），则编写一个函数，将其格式化为包含右对齐的数字，`"00017.007-0008A"`使用此函数进行排序和排序

```
orderby FormatOrderNo(obj.order_no) 
```

* * *

**更新**

由于您使用的是 EF，因此您不能在查询的 EF 部分调用此函数。将 EF 结果转换为 an`IEnumerable<T>`并使用 LINQ-To-Objects 执行排序

```
return (from obj in context.table_orders select ...)
    .AsEnumerable()
    .OrderBy(obj => FormatOrderNo(obj.order_no))
    .ToList(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T20:14:30.893

根据你所说的 - 这些数字不是真正的数字，而是自定义序列标识符（即你甚至不知道你得到的深度级别）我建议实现一个自定义比较器。

如果你这样做，你可以定义你想要的东西——这就是我相信这些方面的东西：

*   拆分字符串`.`
*   比较序列直到并包括较短序列的array.length
*   如果有一个较短的序列并且现在有一个平局，请在较长的之前选择较短的（即`2.1`before `2.1.1`）
*   如果两个序列的长度相同，那么在比较结束时，您应该知道哪个序列“更大”
*   解决了。

如果您需要`IComparer`执行以下示例的灵感：http:
[//zootfroot.blogspot.co.uk/2009/09/natural-sort-compare-with-linq-orderby.html](http://zootfroot.blogspot.co.uk/2009/09/natural-sort-compare-with-linq-orderby.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-24T20:21:50.100

如果可能的话，我要么更改数据类型，要么将其添加为另一个文件（如果适用）。如果这是不行的，您可以查看其他人在这个问题中提到的解决方案，但要注意 - 如果您从小表中提取所有内容但习惯它最终会给您一个 .ToList() 选项非常适合小表痛苦的世界。从长远来看，您不想得到所有东西，要么使用 Where 要么使用顶级标准。

其他解决方案很好，但对我来说完成任务的口味很复杂。

你可以直接通过 LinqToSql 来拍摄 sql。[http://msdn.microsoft.com/en-us/library/bb399403.aspx](http://msdn.microsoft.com/en-us/library/bb399403.aspx)

在 sql 中，您可以随意转换和排序。有些人认为这是一个好主意，有些人会告诉你它不好。你失去了强大的打字能力并获得了性能。你必须知道为什么你会做出这样的决定，这是最重要的事情。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-24T20:39:59.507

由于没有人想出可转换为 SQL 的自定义 orderby 函数，因此我使用了 IComparer 函数，如下所示：

```
 public class OrderComparer<T> : IComparer<string>
    {
        #region IComparer<string> Members

        public int Compare(string x, string y)
        {
            return GetOrderableValue(x.Split('-').First()).CompareTo(GetOrderableValue(y.Split('-').First()));
        }
        #endregion

        private int GetOrderableValue(string value)
        {
            string[] splitValue = value.Split('.');
            int orderableValue = 0;
            if (splitValue.Length.Equals(1))
                orderableValue = int.Parse(splitValue[0]) * 1000;
            else if (splitValue.Length.Equals(2))
                orderableValue = int.Parse(splitValue[0]) * 1000 + int.Parse(splitValue[1]) * 100;
            else if (splitValue.Length.Equals(3))
                orderableValue = int.Parse(splitValue[0]) * 1000 + int.Parse(splitValue[1]) * 100 + int.Parse(splitValue[2]) * 10;
            else
                orderableValue = int.Parse(splitValue[0]) * 1000 + int.Parse(splitValue[1]) * 100 + int.Parse(splitValue[2]) * 10 + int.Parse(splitValue[3]);

            return orderableValue;
        }
    } 
```

这些值最多有 4 个级别。有人有推荐吗？

# c++ - TCP 库正在捆绑消息？

> ID：10744076
> 
> 赞同：2
> 
> 时间：2012-05-24T19:29:24.953
> 
> 标签：c++, api, tcp

我正在使用带有名为 Lacewing [http://lacewing-project.org/的服务器和客户端类的 TCP 库](http://lacewing-project.org/)

我注意到，当我向客户端发送多个单独的消息时，它有时会将它们捆绑在一起，而我可以将它们分开的唯一方法是再次解析它们。发送二进制数据时，虽然很难解析。

有谁知道它为什么会这样做？我在客户端和服务器上都尝试了 DisableNagling() 但它仍然可以。

这是我可能发送的示例：

```
void ServerCore::loginRequestC( const std::string& userName, const std::string& password )
{
    std::cout << "Got request" << std::endl;
    ServerPlayer* player = (ServerPlayer*)getServerClient()->Tag;
    player->setUsername(userName);

    for (size_t i = 0; i < m_players.size(); ++i)
    {
        if(m_players[i] != player)
        {
            std::cout << "Telling new about " << m_players[i]->getUsername() << std::endl;
            m_enc.playerJoinedS(m_players[i]->getUsername());
            player->getClient()->Send(m_enc.getLastMessage().c_str());
        }
    }

    m_enc.loginResultS(true,"");

    player->getClient()->Send(m_enc.getLastMessage().c_str());

    m_enc.playerJoinedS(userName);
    for (size_t i = 0; i < m_players.size(); ++i)
    {
        if(m_players[i] != player)
        m_players[i]->getClient()->Send(m_enc.getLastMessage().c_str());
    }

} 
```

因此，如果我打算拥有：

```
MSG_A
MSG_B
MSG_C 
```

它可能会发送：

```
MSG_A
MSG_BMSG_C 
```

消息被随机捆绑在一起。问题不是我的代码。我检查过。

尽管捆绑消息很有用，但我想控制它何时发生，而不是库。

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-24T19:34:54.767

这不是库，而是正在执行此操作的 TCP 协议本身。TCP 套接字是一个双向*字节流*。一次写入可能会导致另一侧的多次读取，反之亦然。

您必须设计*应用程序级协议*，以便轻松将该流拆分为消息。常见的方法是使用长度前缀或消息分隔符。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-24T19:34:21.900

TCP 是面向流的协议，因此它没有内置消息边界。您需要自己将流拆分为消息。

相反的UDP是数据报协议，每个数据包都有一个单独的消息。缺点是不可靠。

# php - 使用 facebook sharer.php 显示货币符号

> ID：10744078
> 
> 赞同：0
> 
> 时间：2012-05-24T19:29:30.343
> 
> 标签：php, facebook, currency, symbols

我`sharer.php`在 facebook 页面选项卡应用程序上运行了以下 facebook 脚本。在我尝试使用添加货币符号之前，共享效果很好

```
htmlentities(money_format("%10.2n", $numrows[price])) 
```

有趣的是，这个分享选项和货币符号一样在页面上，并且货币符号显示正确

这是完整的代码。

```
<?php
    $title=urlencode(''.$numrows['title'].' | '. htmlentities(money_format("%10.2n", $numrows[price])).' '.$currency_code.'');
    $url=urlencode(''.$token.'');
    $summary=urlencode(''.$numrows['description'].'');
    $image=urlencode(''.$numrows['img1'].'');
?>
<a id="button" onClick="window.open('http://www.facebook.com/sharer.php?s=100&amp;p[title]=<?php echo $title;?>&amp;p[summary]=<?php echo $summary;?>&amp;p[url]=<?php echo $url; ?>&amp;&p[images][0]=<?php echo $image;?>', 'sharer', 'toolbar=0,status=0,width=550,height=400');" target="_parent" href="javascript: void(0)">
<input type='submit' class='btn' title='Share This Item With Friends' value='Share On Facebook'></form>  
</a> 
```

在此先感谢，这已经让我发疯了好几天了

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T21:43:49.850

显示符号是一回事，但将其添加到查询字符串中则完全不同。我不确定调用的结果是什么，`htmlentities(money_format(...))`因为我不是 php 程序员，但我的猜测是您需要对其进行 url 编码才能将其添加到查询字符串中，就像使用 '=', '?' 和 '＆'。

话虽如此，您应该知道 facebook 共享已被弃用且不再受支持，您可以在文档中阅读：

> Share 按钮已被弃用，取而代之的是 Like 按钮，并且将不再受支持。请尽可能使用“赞”按钮为您的应用带来最大流量。

（参考：http: [//developers.facebook.com/docs/share/](http://developers.facebook.com/docs/share/)）

和：

> **旧的“分享”按钮怎么了？**
> 
> 当我们启动“赞”按钮时，我们弃用了“分享”按钮，因为“赞”按钮允许用户一键连接，并允许他们查看他们的哪些朋友已经连接，从而提高了点击率。

（参考：http: [//developers.facebook.com/docs/reference/plugins/like/](http://developers.facebook.com/docs/reference/plugins/like/)）

您应该切换点赞按钮，但您也需要对内容进行 url 编码。

# asp.net - 如何将当前用户的 AD sAMAccountName 输出到文本框

> ID：10744079
> 
> 赞同：1
> 
> 时间：2012-05-24T19:29:32.620
> 
> 标签：asp.net

我正在设计一个将信息提交到 CSV 的 eform。我需要在两个文本字段中显示当前用户的`sAMAccountName`和。`Datetime.Today`

知道如何做到这一点吗？

我一直在尝试：c#

```
public string UserName { get { return Session["UserName"]; } } 
```

到：

```
 <asp:TextBox ID="UserName" runat="server" Width="44px" ReadOnly="true"></asp:TextBox> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T19:43:45.133

您可以在事件中预先填充表单中的输入值`Page_Load`：

```
protected void Page_Load(object sender, EventArgs e) {
    UserName.Text = "my value";
    TxtCurrentDate.Text = DateTime.Today.ToString();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T18:50:47.547

只是用另一点信息快速增加这一点，我最初将 Page_Load cmds 添加到代码隐藏的 Page_load 事件中，确保所有文本框的预填充都在 .aspx 页面上处理。

全部包含在 .aspx 中

> ```
> protected void Page_Load(object sender, EventArgs e)
> {
>     txtDate.Text = DateTime.Now.ToString();
> } 
> ```

```
<td><asp:TextBox ID="txtDate" runat="server" Width="181px" ReadOnly="true"></asp:TextBox></td> 
```

再次感谢您的帮助回复 mellamokb

# c# - 如何提交表单然后在完成时调用 jquery 函数而不重定向 MVC/C#/Jquery

> ID：10744084
> 
> 赞同：2
> 
> 时间：2012-05-24T19:29:51.717
> 
> 标签：c#, jquery, asp.net-mvc, jquery-plugins

我有一个问题，我试图在提交表单后在同一页面上显示一条消息，但我的结果总是错误的，因为我在控制器中的操作被调用了两次，当我点击提交按钮时，第一次我的动作被称为数据通过正确的信息传递给动作并保存到数据库中，第二次每个参数都为空，因此返回假。

我想要一种只提交一次并在同一页面中返回适当的 Json 结果而不重定向的方法，我希望有人可以帮助我，这是我的代码：

我试过了：

```
function PdfHeaderAndFooterManager() {
 $('#submitPdf').ajaxSubmit(function (e) {
        $.ajax({
            url: "/Dashboard/PdfHeaderAndFooterManager",
            dataType: "json",
            type:"POST",
            data: {headerImage: headerImage, footerImage: footerImage},
            success: function (data) {
                if (data.success) {
                    alert(data.message);
                    $('#resultMessage').text(data.message).css("color", "RED");
                }
                else {
                    alert(data.message);
                    $('#resultMessage').text(data.message).css("color", "RED");
                }
            }

        });
       e.preventDefault();
    });
} 
```

我的观点为简单起见删除了一些代码

```
@using (Html.BeginForm("PdfHeaderAndFooterManager", "Dashboard", FormMethod.Post, new { enctype = "multipart/form-data", id = "formPdfImages" }))
 div id="resultMessage"></div>
}

public ActionResult PdfHeaderAndFooterManager(HttpPostedFileBase headerImage, HttpPostedFileBase footerImage)
    {

       //some code to declare variables

        if (headerImage != null)
        {
            if (!String.IsNullOrEmpty(headerImage.ContentType))
            {
                headerImageContentType = imageHelper.IsValidImageType(headerImage.ContentType);

                if (headerImageContentType)
                {
                    resizedHeaderImage = imageHelper.ResizeImage(headerImage.InputStream);
                }
                else
                {
                    return Json(new { success = false, message = "Please Upload an image* file less than 2GB." });
                }
            }
        }
        if (footerImage != null)
        {
            if (!String.IsNullOrEmpty(footerImage.ContentType))
            {
                footerImageContentType = imageHelper.IsValidImageType(footerImage.ContentType);
                if (footerImageContentType)
                {   
                    resizedFooterImage = imageHelper.ResizeImage(footerImage.InputStream);
                }
                else
                {

                    return Json(new { success = false, message = "Please Upload an image* file less than 2GB." });
                }
            }
        }
        if (P24DataPrincipal.CurrentIdentity != null)
        {
            if (resizedHeaderImage != null || resizedFooterImage != null)
            {
              //add to DB code
                return Json(new { success = true, message = "Image(s) Uploaded Successfully." });

            }
            else
            {
                return Json(new {success = false, message = "Upload atleast 1 image file." });

            }

        }

        return Json("someview");

    } 
```

以上是我的操作，最重要的部分是“返回”关键字我只想看到，在我看来，即使结果为真，不仅结果为假，而且这个操作应该只调用一次而不是重定向。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T20:33:14.287

你有`<input type="submit" />`吗？如果是这样，请将其更改为一个按钮并将其连接到您的 jQuery`ready`中，以便它达到您的功能：

```
$.ready(function(){
    $("#submitButtonId").click(function() {
        //put your ajax stuff here
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T20:36:53.963

您的第一个函数实际上看起来接近正确。一些小的调整如下所示。

下面的工作吗？

```
$(function() {
    $('#formPdfImages').submit(function(event) {
        event.preventDefault();
        event.stopPropagation();

        $.post("@(Url.Action("PdfHeaderAndFooterManager", "Dashboard"))", $(this).serialize(), function(data) {
            if (data.success) {
                $("#resultMessage").text(data.success);
            } else {
                $("resultMessage").text(data.success);
            }

        });
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T06:21:24.043

您正在使用`@using (Html.BeginForm())`并且不能使用**提交**来进行 Ajax 调用，

对于 ajax 调用，您将不得不使用：`@using (Ajax.BeginForm())`，

但是你需要上传一张图片，所以你必须使用：

```
@using (Html.BeginForm("PdfHeaderAndFooterManager", "Dashboard", FormMethod.Post, new { enctype = "multipart/form-data", id = "formPdfImages" })) 
```

所以，Ajax 调用是不可能的。要在同一页面上显示消息，请使用另一种选择，可能是：

```
public ActionResult PdfHeaderAndFooterManager(HttpPostedFileBase headerImage, HttpPostedFileBase footerImage)
    {

   //some code to declare variables

    if (headerImage != null)
    {
        if (!String.IsNullOrEmpty(headerImage.ContentType))
        {
            headerImageContentType = imageHelper.IsValidImageType(headerImage.ContentType);

            if (headerImageContentType)
            {
                resizedHeaderImage = imageHelper.ResizeImage(headerImage.InputStream);
            }
            else
            {
                ViewBag.ReturnMessage="<span style='color:red'> Please Upload an image* file less than 2GB.</span>";
                return View();
            }
        }
    }
    if (footerImage != null)
    {
        if (!String.IsNullOrEmpty(footerImage.ContentType))
        {
            footerImageContentType = imageHelper.IsValidImageType(footerImage.ContentType);
            if (footerImageContentType)
            {   
                resizedFooterImage = imageHelper.ResizeImage(footerImage.InputStream);
            }
            else
            {
                ViewBag.ReturnMessage="<span style='color:red'>Please Upload an image* file less than 2GB.</span>";
                return View();
            }
        }
    }
    if (P24DataPrincipal.CurrentIdentity != null)
    {
        if (resizedHeaderImage != null || resizedFooterImage != null)
        {
          //add to DB code
                ViewBag.ReturnMessage="<span style='color:green'>Image(s) Uploaded Successfully.</span>";
                return View();
        }
        else
        {
            ViewBag.ReturnMessage="<span style='color:red'>Upload atleast 1 image file.</span>";
            return View();
        }

    } 
```

在视图中：

```
@using (Html.BeginForm("PdfHeaderAndFooterManager", "Dashboard", FormMethod.Post, new { enctype = "multipart/form-data", id = "formPdfImages" })){
 <div id="resultMessage">
    @ViewBag.ReturnMessage
</div>
    } 
```

# php - 如何使用 JavaScript 和/或 PHP 将 HTML 表格转换为电子表格？

> ID：10744087
> 
> 赞同：0
> 
> 时间：2012-05-24T19:30:12.000
> 
> 标签：php, javascript, jquery, html

> **可能重复：**
> [如何将表格从网页导出为 excel](https://stackoverflow.com/questions/5524143/how-can-i-export-tables-to-excel-from-a-webpage)

编辑：澄清一下，它不一定是 Excel 文件，但它必须是能够在 Excel 中打开/编辑的电子表格文件。所以最容易做到这一点的就是我寻求的答案 :)

我需要将 HTML 表格转换为某种可下载的电子表格（最好用于 Office Excel）。我可以在 jQuery 中做到这一点，但更愿意在纯 JavaScript 中做到这一点。我四处搜索并找到了很多关于反向操作的信息（电子表格-> html），但我需要创建一个动态构建表格的可下载电子表格文件。任何关于我如何做到这一点的观点将不胜感激！:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T19:34:13.073

不要在 JavaScript 中这样做。您需要使用像 PHP 这样的服务器端脚本语言来执行此操作。

准备数据以导入电子表格的最简单方法是创建 CSV 文件。这是一个示例 CSV 文件，可以在 Excel 中正常打开：

```
column_a,column_b
1,2
5,7
8.988,abcdef 
```

CSV 文件只是纯文本，字段用逗号分隔，因此很容易创建。如果您的字段中的数据需要包含逗号、双引号、换行符或其他一些特殊情况，那么事情就会变得更加棘手。

如果您真的想创建 Excel 格式的电子表格，这非常困难，您将需要图书馆的帮助。以下是我如何找到 PHP Excel 库： http: [//google.com/search ?q=php+create+excel+spreadsheet](http://google.com/search?q=php+create+excel+spreadsheet)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T19:33:22.913

您无法使用 JavaScript 执行此操作，因为它无法创建可下载文件。

您必须在服务器上执行此操作。如果您在流式传输 HTML 文件之前发送[正确的 MIME 标头](https://stackoverflow.com/questions/974079/setting-mime-type-for-excel-document)，则任何作为表格的 HTML 页面都将通过 EXCEL ITSELF 自动转换。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T19:35:10.097

你不能用 Javascript 来做这一切。您可以编写一个 jQuery 函数来将表格转换为 CSV 格式，但您无法告诉浏览器让用户下载它。您必须将其发布到服务器，然后该服务器可以返回文件。

有关详细信息，请参阅此[问题](https://stackoverflow.com/questions/609530/download-textarea-contents-as-a-file-using-only-javascript-no-server-side)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-24T19:44:49.377

我可能弄错了，但可能使用[`data:`URI 方案](http://en.wikipedia.org/wiki/Data_URI_scheme)

```
<a href="data:text/csv;charset=utf8;base64,...encoded_data...">
  download as Excel
</a> 
```

它不是跨浏览器，但可以提供帮助。

# c++ - 存储分配何时在 C++ 中进行？

> ID：10744091
> 
> 赞同：0
> 
> 时间：2012-05-24T19:30:25.263
> 
> 标签：c++, oop, constructor, storage

```
class A
{
public:
A() {}
};

A b;     //global variable

void fun(void)
{
A a;
}

int main()
{
fun();
} 
```

在这段代码中，我有 2 个问题（已更新）

1.  何时分配对象的存储，何时在 main() 中调用 fun()，即在运行时或编译时？

2.  对于全局变量 b，何时为其分配存储空间以及何时调用其构造函数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T19:32:33.997

`a`是在 的主体中分配的局部变量`fun()`。An`A`每次调用时都会被实例化`fun()`，然后当对象超出范围时（在这种情况下是`fun()`返回时），它会被取消实例化（销毁，调用析构函数）。

`A`的构造函数在对象被实例化时被调用。

这些都不会在编译时发生。

# image - Galleriffic：获取当前和绝对图像编号

> ID：10744096
> 
> 赞同：1
> 
> 时间：2012-05-24T19:30:58.383
> 
> 标签：image, gallery, image-gallery

我尝试这样的事情：`var test = gallery.currentImage.index;`
但没有任何效果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T19:29:41.713

我发现了这种显示当前和绝对图像编号的简单方法。你可以按照这个例子。

[http://www.twospy.com/galleriffic/example-5.html](http://www.twospy.com/galleriffic/example-5.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-09T04:03:08.247

我一直在使用 nextIndex，我认为它是一个从 0 开始的数组。例如，您可以使用“onSlideChange”触发某些内容，如下所示：

```
onSlideChange: function(prevIndex, nextIndex) {
var idx = nextIndex + 1;
if(idx==2)
alert('hello world!);
} 
```

# c# - 反应式扩展测试调度程序模拟时间流逝

> ID：10744100
> 
> 赞同：2
> 
> 时间：2012-05-24T19:31:07.113
> 
> 标签：c#, unit-testing, system.reactive

我正在使用 .Schedule(DateTimeOffset, Action>) 东西处理 RX 调度程序类。基本上我有一个预定的动作，可以再次安排自己。

代码：

```
public SomeObject(IScheduler sch, Action variableAmountofTime)
{
    this.sch = sch;
    sch.Schedule(GetNextTime(), (Action<DateTimeOffset> runAgain =>
    {
        //Something that takes an unknown variable amount of time.
        variableAmountofTime();

        runAgain(GetNextTime());
    });
}

public DateTimeOffset GetNextTime()
{
    //Return some time offset based on scheduler's 
    //current time which is irregular based on other inputs that i have left out.
    return this.sch.now.AddMinutes(1);
} 
```

我的问题是关于模拟 variableAmountofTime 可能花费的时间量并测试我的代码是否按预期运行并且只触发按预期调用它。

我已经尝试在委托内推进测试调度程序的时间，但这不起作用。我编写的代码示例不起作用。假设 GetNextTime() 只是安排一分钟。

```
[Test]
public void TestCallsAppropriateNumberOfTimes()
{
    var sch = new TestScheduler();

    var timesCalled = 0;

    var variableAmountOfTime = () => 
        { 
            sch.AdvanceBy(TimeSpan.FromMinutes(3).Ticks); 
            timescalled++; 
        };

    var someObject = new SomeObject(sch, variableAmountOfTime);

    sch.AdvanceTo(TimeSpan.FromMinutes(3).Ticks);

    Assert.That(timescalled, Is.EqualTo(1));
} 
```

由于我想在未来 3 分钟内执行，但执行需要 3 分钟，我希望看到这只触发 1 次......而不是触发 3 次。

如何使用测试调度程序模拟执行过程中需要时间的东西。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-28T09:07:26.130

好问题。不幸的是，目前Rx v1.x 和 Rx v2.0 Beta**不支持此功能（****但请继续阅读**）。让我向您解释嵌套 Advance* 调用的复杂性。

基本上，Advance* 意味着启动调度程序以运行工作直到指定的点。这涉及在表示虚拟调度程序中时间流的单个逻辑线程上按顺序运行工作。允许嵌套 Advance* 调用会引发一些问题。

首先，嵌套的 Advance* 调用是否应该导致嵌套的工作循环运行？如果是这种情况，我们将不再模拟单个逻辑执行线程，因为当前工作项将被中断以支持运行内部循环。事实上，Advance* 会导致隐式让步，即在处理完所有嵌套工作之前，不允许运行 Advance* 调用之后的其余工作（现在到期）。这导致未来的工作不能依赖（或等待）过去的工作来完成其执行的情况。一种出路是引入真正的物理并发，它从一开始就打败了虚拟时间和历史调度器的各种设计点。

或者，如果嵌套的 Advance* 调用以某种方式与最顶层的工作循环调度调用（Advance* 或 Start）通信，它可能需要延长其到期时间，因为嵌套调用已要求前进到超出原始到期时间的点。现在各种事情都变得奇怪了。时钟不会反映从 Advance* 返回后的更改，并且最顶部的呼叫不再在可预测的时间结束。

对于**Rx v2.0 RC**（下个月推出），我们查看了这种情况并决定 Advance* 不是模拟“时间滑移”的正确方法，因为它需要一个重载的含义，具体取决于调用它的上下文. 取而代之的是，我们引入了一种**Sleep 方法**，该方法可用于从任何上下文中向前滑动时间，而不会产生运行工作的副作用。将其视为设置 Clock 属性的一种方式，但可以防止时间倒流。这个名字也清楚地反映了意图。

除了上述之外，为了减少嵌套 Advance* 调用无效的意外因素，我们让它检测到这种情况并在嵌套上下文中抛出**InvalidOperationException 。**另一方面，睡眠可以从任何地方调用。

最后一点。事实证明，在处理时间方面，我们需要与在 Rx v2.0 RC 中所做的工作完全相同的功能。一些测试需要一种确定性的方法来模拟时间滑移，因为用户代码的执行可能需要任意长的时间（想想 OnNext 处理程序，例如 Observable.Interval）。

希望这会有所帮助……请继续关注我们在接下来的几周内发布的 Rx v2.0 RC 版本！

-巴特（Rx 团队）

# sql-server-2008 - 在 CTE 查询中使用聚合函数

> ID：10744103
> 
> 赞同：3
> 
> 时间：2012-05-24T19:31:37.980
> 
> 标签：sql-server-2008, tsql

以下查询在没有',MAX(Row)' 的情况下工作正常

```
WITH QResult AS 
(SELECT 
    ROW_NUMBER() OVER (ORDER BY Ad_Date DESC) AS Row,
    * 
 FROM [vw_ads]
) 
SELECT *, MAX(Row) 
FROM QResult 
```

添加时`MAX(Row)`，SQL Server 2008 抛出以下错误：

> 列“QResult.Row”在选择列表中无效，因为它既不包含在聚合函数中，也不包含在`GROUP BY`子句中。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-24T19:38:20.430

当使用`SUM`,`COUNT`或之类的聚合函数`MAX`并且您还想从数据中选择其他列时，您需要按查询中使用的其他列对数据进行分组。

因此，您需要编写如下内容：

```
WITH QResult AS 
(SELECT 
    ROW_NUMBER() OVER (ORDER BY Ad_Date DESC) AS Row,
    * 
 FROM [vw_ads]
) 
SELECT Co1l, Col2, MAX(Row) 
FROM QResult
GROUP BY Col1, Col2 
```

这也意味着您需要明确地拼出您想要的列 - 无论如何都是一个好主意。您不能`*`在`GROUP BY`子句中使用。

**更新：**根据您的评论，我猜您真正想要的是这样的：（
请*参阅更新 #2 - Martin Smith 的建议甚至比我最初的想法更好*）

```
WITH QResult AS 
(SELECT 
    ROW_NUMBER() OVER (ORDER BY Ad_Date DESC) AS Row,
    * 
 FROM [vw_ads]
) 
SELECT 
    Co1l, Col2, 
    MaxRow = (SELECT MAX(Row) FROM QResult)
FROM QResult 
```

`Row`这将为您的结果集的每一行提供 CTE的最大值，即相同的值。

**更新#2：**马丁史密斯的建议是这样的：

```
WITH QResult AS 
(SELECT 
    ROW_NUMBER() OVER (ORDER BY Ad_Date DESC) AS Row,
    * 
 FROM [vw_ads]
) 
SELECT 
    Co1l, Col2, 
    MAX(Row) OVER()
FROM QResult 
```

当然，这也有效 - 甚至比我的解决方案更有效。谢谢，马丁！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T19:40:38.030

您需要决定为什么要获得 MAX(Row)。它是 Ad_Date 的最大行吗？最大行是整体吗？

如果您将其更改为：

```
WITH QResult AS (SELECT ROW_NUMBER() OVER (ORDER BY Ad_Date DESC) AS Row,* FROM [vw_ads]) 
SELECT Ad_Date, MAX(Row) from QResult
GROUP BY Ad_Date 
```

...这将通过 Ad_Date 返回您的最大行，这就是我假设您正在寻找的内容。

# javascript - appendChild 出错：无法在层次结构中的指定点插入节点

> ID：10744110
> 
> 赞同：13
> 
> 时间：2012-05-24T19:32:10.660
> 
> 标签：javascript, appendchild

函数有错误`appendChild`：`Node cannot be inserted at the specified point in the hierarchy`

JS：

```
var abc=document.createElement("div");
abc.style.position="absolute";
abc.style.width="10px";
abc.style.height="10px";
abc.style.left="10px";
abc.style.top="10px";
abc.style.backgroundColor="black";
abc.innerHTML="abc";
document.appendChild(abc); 
```

[http://jsfiddle.net/T7ZMX/](http://jsfiddle.net/T7ZMX/)

你能帮我么？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-05-24T19:33:24.120

您需要附加到`document.body`，而不仅仅是`document`.

要解释为什么`document.appendChild`不起作用，请考虑下图：

[![DOM 树](../Images/adb8c2c4334a17395e354f2b2d03ac32.png)](https://i.stack.imgur.com/AWVa6.jpg)

如果允许这样做，那将不是很有用，因为它将是`HTML`根元素的兄弟，这使它完全在内容之外。

更多信息：[使用 W3C DOM Level 1 Core](https://developer.mozilla.org/en-US/docs/Web/API/Document_object_model/Using_the_W3C_DOM_Level_1_Core)

# jquery - JQuery 提交按钮不会触发

> ID：10744112
> 
> 赞同：0
> 
> 时间：2012-05-24T19:32:23.027
> 
> 标签：jquery, asp.net

我有以下代码，但是当我单击保存按钮时它不会触发或不显示任何错误。你能告诉我可能是什么问题吗？谢谢你。

```
<script type="text/javascript">
$(document).ready(function () {
  $('input[id*=btnSave]').click(function () {
    var txtFirstName = $('input[id*=txtFirstName]').val();
    var txtLastName = $('input[id*=txtLastName]').val();
    var errMsg = '';
    var errMsg = "<ul>";
    if (txtFirstName == '') {
      errMsg = errMsg + "<li>First Name is required</li>";
      return false;
    }
    if (txtLastName == '') {
      errMsg = errMsg + "<li>Last Name is required</li>";
      return false;
    }
    errMsg = errMsg + "</ul>";
  });
});
</script>

<telerik:RadTextBox ID="txtLastName" runat="server" />
<telerik:RadTextBox ID="txtFirstName" runat="server"/>
<asp:Button ID="btnSave" runat="server" Text="Save" OnClick="btnSave_Click"></asp:Button> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T19:39:18.910

我认为您的选择器行需要在 id 值周围加上引号：

```
$('input[id*="btnSave"]').click(function () { 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T19:39:56.070

我认为

```
$('input#btnSave').click(function() {

}); 
```

足够的。

不需要使用

```
$('input[id*=btnSave]') 
```

`btnSave_Click`你的功能在哪里

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T19:38:48.703

尝试这个：

```
<script type="text/javascript">
           $(document).ready(function () {
                $('#btnSave').click(function () {

                    var txtFirstName = $('#txtFirstName').val();
                    var txtLastName = $('#txtLastName').val();
                    var errMsg = '';
                    var errMsg = "<ul>";
                    if (txtFirstName == '') {
                        errMsg = errMsg + "<li>First Name is required</li>";
                        return false;
                    }
                    if (txtLastName == '') {
                        errMsg = errMsg + "<li>Last Name is required</li>";
                        return false;
                    }
                errMsg = errMsg + "</ul>";
                });
            });
    </script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-24T20:03:52.107

它在我使用时有效

```
$('#<%= btnSave.ClientID %>').click(function () 
```

# vba - Access 和 VBA 读取每行超过 255 个字符的文本文件

> ID：10744113
> 
> 赞同：0
> 
> 时间：2012-05-24T19:32:28.070
> 
> 标签：vba, ms-access-2007

我正在尝试使用 VBA 在 Access 中读取文本文件。代码如下：

```
Open "C:\Test\test.txt" For Input As #1
Dim MyString as String
Dim x as integer
x = 0 
For x = 0 to 100
  Input #1, MyString
  MsgBox MyString
Next x 
```

所以这段代码的目的是遍历一个文本文件，逐行读取并打印出来。但是存在文本行超过 255 个字符的概率。有没有办法读取超过 255 个字符的行并将它们存储在 VBA 中？谢谢你。

编辑：文本文件示例

```
1110;        TESTING     ; 1111;        TESTING2    ; 5;       999990981; 10-30-2011;               12-01-2011;                 133370001;  133370001;  133370001;  133370001;  133370001;  133370001;  133370001;  133370001;  133370001;  133370001;  133370001;  133370001; F;         13371; 1;       TEST1                          ;  000000000;    133370001;  0;      TEST         ; TESTTES                             ; TEST        ; 501;     10001;     0;       00001;    
 1112;        TESTING     ; 1113;        TESTING2    ; 3;       999990982; 10-02-2011;                10-30-2011;                 133370002;  133370002;  133370002;  133370002;  133370002;  133370002;  133370002;  133370002;  133370002;  133370002;  133370002;  133370002; F;         13372; 2;       TEST2                          ;  000000000;    133370002;  0;      TEST1        ; TESTTESTT                           ; TES         ; 502;     10002;     0;       00002;    
 1113;        TESTING     ; 1114;        TESTING2    ; 21;      999990983; 03-01-2011;                10-02-2011;                 133370003;  133370003;  133370003;  133370003;  133370003;  133370003;  133370003;  133370003;  133370003;  133370003;  133370003;  133370003; F;         13373; 3;       TEST3                          ;  000000000;    133370003;  0;      TTESTTESTT   ; TESTTESTTES                         ; TESTTES     ; 503;     10003;     0;       00003; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T21:07:23.323

```
Sub ReadLines()

    Dim sInput As String
    Dim i As Long

    Open "C:\Users\dick\test.txt" For Input As #1

    Do While Not EOF(1)
        Input #1, sInput
        Debug.Print Len(sInput), sInput
    Loop

End Sub 
```

我明白了

```
468          1110; ...
469          1112; ...
469          1113; ... 
```

所以我没有看到这个限制

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-21T17:27:03.837

我认为问题与 MsgBox 的大小限制有关。Debug.Print 将打印到即时窗口（可通过 Ctrl+G 访问）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T15:33:57.477

`Input #`使用让我很难过似乎很奇怪。我没有收到错误，而是收到了一半的字符串。我试图查看文本的每一行以查看是否有异常，但我找不到任何异常。最后，我尝试了@Matt Donnan 使用 TextStream 的方法，并且成功了。谢谢大家，很抱歉占用您的时间。

# c# - 以编程方式设置 aspnet:MaxHttpCollectionKeys

> ID：10744116
> 
> 赞同：6
> 
> 时间：2012-05-24T19:32:43.540
> 
> 标签：c#, asp.net, asp.net-mvc, asp.net-mvc-3

在特定站点的一些管理功能中，我正在做一个特别可怕的帖子，需要发布*大量*数据。[为了实现这一点，我必须添加 Web.config appSetting](https://stackoverflow.com/questions/8832470/operation-is-not-valid-due-to-the-current-state-of-the-object-error-during-pos)：

```
<add key="aspnet:MaxHttpCollectionKeys" value="2000" /> 
```

但是，我只希望在特定情况下可以发布这篇大文章。有没有办法以编程方式设置这个值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T19:38:46.087

您可以通过将 appSetting 放置在 web.config 中的位置标记下来进行特定于位置的设置。

[http://msdn.microsoft.com/en-us/library/b6x6shw7.aspx](http://msdn.microsoft.com/en-us/library/b6x6shw7.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T15:36:40.253

看起来这是不可能的，根据这个答案：

[https://stackoverflow.com/a/10753846/570190](https://stackoverflow.com/a/10753846/570190)

“您不能覆盖它，因为设置和默认值的读取是在内部类中完成的。”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T11:49:12.383

您可以使用自己的 web.config 将表单隔离在虚拟文件夹中的单独网站中。当然，如果您需要共享状态，那么这可能会变得非常复杂（但并非不可能）。因此，也许通过将其视为一个恰好能够处理 2000 个项目的单独“Web 服务”可能会解决问题。

# java - 检查 URL 是否存在（该方法不适用于“http://”字符串）

> ID：10744118
> 
> 赞同：1
> 
> 时间：2012-05-24T19:32:56.257
> 
> 标签：java, network-programming

在 Java 中，我试图验证 URL 是否存在。为此，我创建了一个 URL 对象，然后调用 URL.openConnection，然后调用 URLConnection.connect()，然后调用 URL.openStream()。这些都没有抛出这个 URL 的异常：“http://”，这是没有意义的。

我需要该方法独立于协议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T01:37:25.550

获取响应码：

```
URL url = new URL("http://");
HttpURLConnection   conn = (HttpURLConnection)url.openConnection();
int rc = conn.getResponseCode();
conn.disconnect(); 
```

如果它没有抛出异常，则 URL 存在。这个扔了

```
Exception in thread "main" java.lang.RuntimeException: java.lang.IllegalArgumentException: protocol = http host = null 
```

为了我。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T19:39:56.877

如果您尝试检查 url 是否有效，然后执行请求，您可以使用公共验证器 ( [http://commons.apache.org/validator/](http://commons.apache.org/validator/) )，这样您就可以执行 openConnection() 以防万一 url 真的有效.

此处的文档和示例：http: [//commons.apache.org/validator/apidocs/org/apache/commons/validator/UrlValidator.html](http://commons.apache.org/validator/apidocs/org/apache/commons/validator/UrlValidator.html)

# iphone - 在 iOS 上，如果视图控制器还没有视图，为什么 NSLog(@"self.view is %p", self.view) 会崩溃？

> ID：10744119
> 
> 赞同：2
> 
> 时间：2012-05-24T19:32:57.157
> 
> 标签：iphone, ios, uiview, uiviewcontroller

如果在 Xcode 4.3.2 中使用 Empty App 模板创建新的 iOS 项目，并且在`AppDelegate.m`：

```
self.window.rootViewController = [[FooViewController alloc] init]; 
```

在`FooViewController`'s`viewDidLoad`中，如下：

```
NSLog(@"self.view is %p", self.view);
NSLog(@"self.view is %@", self.view); 
```

将打印出视图，因此看起来默认`loadView`会实例化一个视图并将其分配给`self.view`.

因此，如果我`loadView`用一个全空的方法覆盖，并注释掉`NSLog`上面的第二个语句，我希望第一个`NSLog`语句打印出来`0x0`，但是由于该`NSLog`行的内存访问权限错误，应用程序崩溃了。为什么会这样？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-24T19:58:08.013

好的，在一个下意识的和明显错误的答案之后，我尝试了这个。Empty App 模板没有 rootViewController，所以我使用了单个屏幕模板。运行后，我看到您遇到了堆栈溢出。在尝试访问 self.view 时，您正在调用超类上的 view 属性，然后它会尝试加载视图以返回它，这正在调用 viewDidLoad 等，据我所知。另一个 NSLog 语句也是如此。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-24T20:08:41.767

各州[`view`财产`UIViewController`](https://developer.apple.com/library/ios/documentation/uikit/reference/UIViewController_Class/Reference/Reference.html#//apple_ref/occ/instp/UIViewController/view)的文件：

> 因为访问该属性会导致视图被自动加载，所以可以使用该`isViewLoaded`方法来判断视图当前是否在内存中。

它还有一个指向[View Controller Life Cycle](https://developer.apple.com/library/ios/featuredarticles/ViewControllerPGforiPhoneOS/ViewLoadingandUnloading/ViewLoadingandUnloading.html#//apple_ref/doc/uid/TP40007457-CH10-SW2)的链接，其中指出：

> 在加载周期中发生的步骤如下：
> 
> 1.  当`view`访问视图控制器的属性并且视图当前不在内存中时，将触发加载循环。
>     
>     
> 2.  视图控制器调用它的`loadView`方法。该`loadView`方法的默认实现执行以下两件事之一：
>     
>     
>     *   如果视图控制器与情节提要相关联，它会从情节提要中加载视图。
>         
>         
>     *   如果视图控制器未与情节提要相关联，`UIView`则会创建一个空对象并将其分配给该`view`属性。
>         
>         
> 3.  视图控制器调用它的`viewDidLoad`方法来允许你的子类执行任何额外的加载时任务。

所以当你说：

> 所以如果我`loadView`用一个全空的方法覆盖

您故意破坏生命周期，因为当您的覆盖版本`loadView`完成时，它应该已经加载了一个视图。因为它没有，所以你会崩溃。

# c# - 任务后台工作者 c#

> ID：10744122
> 
> 赞同：6
> 
> 时间：2012-05-24T19:33:03.780
> 
> 标签：c#, multithreading, backgroundworker, task

多个后台工作人员在 5 秒运行的进程上执行比任务更好的任何变化吗？我记得在一本书中读到任务是为短期运行的进程设计的。

我问的原因是这样的：

我有一个流程需要 5 秒才能完成，有 4000 个流程要完成。起初我是这样做的：

```
for (int i=0; i<4000; i++) {
    Task.Factory.StartNewTask(action);
} 
```

这性能很差（第一分钟后，完成了 3-4 个任务，控制台应用程序有 35 个线程）。也许这很愚蠢，但我认为线程池会处理这种情况（它将所有动作放在一个队列中，当一个线程空闲时，它会采取一个动作并执行它）。

现在的第二步是手动执行 Environment.ProcessorCount 后台工作人员，并将所有操作放在 ConcurentQueue 中。所以代码看起来像这样：

```
var workers = new List<BackgroundWorker>();
//initialize workers

workers.ForEach((bk) =>
{
    bk.DoWork += (s, e) =>
    {
        while (toDoActions.Count > 0)
        {
            Action a;
            if (toDoActions.TryDequeue(out a))
            {
                a();
            }
        } 
    }

    bk.RunWorkerAsync();
}); 
```

这表现得更好。即使我有 30 个后台工作人员（与第一种情况一样多的任务），它的性能也比任务好得多。

乐：

我像这样开始任务：

```
 public static Task IndexFile(string file)
    {
        Action<object> indexAction = new Action<object>((f) =>
        {
            Index((string)f);
        });

        return Task.Factory.StartNew(indexAction, file);
    } 
```

Index 方法是这样的：

```
 private static void Index(string file)
    {
        AudioDetectionServiceReference.AudioDetectionServiceClient client = new AudioDetectionServiceReference.AudioDetectionServiceClient();

        client.IndexCompleted += (s, e) =>
            {
                if (e.Error != null)
                {
                    if (FileError != null)
                    {
                        FileError(client, 
                            new FileIndexErrorEventArgs((string)e.UserState, e.Error));
                    }
                }
                else
                {
                    if (FileIndexed != null)
                    {
                        FileIndexed(client, new FileIndexedEventArgs((string)e.UserState));
                    }
                }
            };

        using (IAudio proxy = new BassProxy())
        {
            List<int> max = new List<int>();
            if (proxy.ReadFFTData(file, out max))
            {
                while (max.Count > 0 && max.First() == 0)
                {
                    max.RemoveAt(0);
                }
                while (max.Count > 0 && max.Last() == 0)
                {
                    max.RemoveAt(max.Count - 1);
                }

                client.IndexAsync(max.ToArray(), file, file);
            }
            else
            {
                throw new CouldNotIndexException(file, "The audio proxy did not return any data for this file.");
            }
        }
    } 
```

此方法使用 Bass.net 库从 mp3 文件中读取一些数据。然后使用异步方法将该数据发送到 WCF 服务。创建任务的 IndexFile(string file) 方法在 for 循环中被调用了 4000 次。这两个事件 FileIndexed 和 FileError 没有被处理，所以它们永远不会被抛出。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-13T13:15:39.473

鉴于您有严格定义的待办事项列表，我会使用`Parallel`该类（`For`或者`ForEach`取决于更适合您的内容）。此外，您可以将配置参数传递给这些方法中的任何一个，以控制实际同时执行的任务数量：

```
 System.Threading.Tasks.Parallel.For(0, 20000, new ParallelOptions() { MaxDegreeOfParallelism = 5 }, i =>
        {
            //do something
        }); 
```

上面的代码将执行 20000 次操作，但不会同时执行超过 5 次操作。

我怀疑后台工作人员对您做得更好的原因是因为您在开始时创建并实例化了它们，而在您的示例`Task`代码中，您似乎正在`Task`为每个操作创建一个新对象。

或者，您是否考虑过在开始时使用固定数量的`Task`实例化对象，然后`ConcurrentQueue`像使用后台工作人员一样执行类似的操作？这也应该被证明是非常有效的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-13T13:27:12.910

Tasks 的性能如此差的原因是因为你挂载了太多的小任务（4000）。请记住，CPU 也需要调度任务，因此挂载大量短期任务会给 CPU 带来额外的工作负载。更多信息可以在[TPL](http://msdn.microsoft.com/en-us/library/dd460717%28v=vs.110%29.aspx)的第二段中找到：

> 从 .NET Framework 4 开始，TPL 是编写多线程和并行代码的首选方式。然而，并不是所有的代码都适合并行化；例如，如果循环在每次迭代中只执行少量工作，或者它没有运行多次迭代，那么并行化的开销会导致代码运行更慢。

当您使用后台工作者时，您将可能的活动线程数限制为**ProcessCount**。这减少了很多调度开销。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T14:13:18.020

您是否考虑过使用线程池？

[http://msdn.microsoft.com/en-us/library/system.threading.threadpool.aspx](http://msdn.microsoft.com/en-us/library/system.threading.threadpool.aspx)

如果您在使用线程时性能较慢，那只能是由于线程开销（分配和销毁单个线程）造成的。

# google-app-engine - GAE dev_appserver“没有名为 lxml 的模块”

> ID：10744123
> 
> 赞同：3
> 
> 时间：2012-05-24T19:33:13.257
> 
> 标签：google-app-engine, python-2.7, lxml

似乎 lxml 在 dev_appserver 中对我不可用。我的测试项目是`import lxml`用 windows python sdk 1.6.6 构建的。“没有名为 lxml 的模块”。我假设安装了 python 版本，但我有 Python 2.7。

```
import webapp2
import lxml

class MainHandler(webapp2.RequestHandler):
    def get(self):
        self.response.out.write('Hello world!')

app = webapp2.WSGIApplication([('/', MainHandler)],
                              debug=True) 
```

===

```
application: teslxml
version: 1
runtime: python27
api_version: 1
threadsafe: yes

handlers:
- url: /favicon\.ico
  static_files: favicon.ico
  upload: favicon\.ico

- url: .*
  script: main.app

libraries:
- name: webapp2
  version: "2.5.1"
- name: lxml
  version: latest 
```

==

```
dev_appserver.py teslxml 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-24T19:36:33.867

更新：这不再是真的，lxml 现在是开箱即用的。 [https://cloud.google.com/appengine/docs/standard/python/tools/built-in-libraries-27](https://cloud.google.com/appengine/docs/standard/python/tools/built-in-libraries-27)

* * *

lxml 不是随 Google App Engine 开箱即用的，您需要[安装它](http://lxml.de/installation.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-12T09:09:03.903

我不断收到“没有名为 lxml 的模块”错误，但无法单独安装该模块，我通过告诉 pip 使用特定版本号安装解决了这个问题，就像这样；

> pip install lxml==[版本号]

# javascript - Javascript。| & 和 toString

> ID：10744130
> 
> 赞同：1
> 
> 时间：2012-05-24T19:33:58.740
> 
> 标签：javascript, operators

```
var ddd = Math.random() * 16;    
console.log((ddd & 3 | 8).toString(16)); 
```

请帮帮我。我不明白这个运算符（| 和 &）是如何工作的，为什么这个代码返回 af 符号？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-24T19:37:51.840

该表达式`ddd & 2 | 8`通过对 8 的按位 OR 运算和`ddd`与 2 的按位 AND 运算进行按位运算。如果您不了解按位运算，您应该查阅[这篇文章](http://en.wikipedia.org/wiki/Bitwise_operation)来解释它们是什么。

代码可以返回 af 范围内的字符，因为您将 radix 参数传递`16`给[`Number.toString`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Number/toString)原型方法，这意味着它将以十六进制显示数字。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-24T19:48:27.603

这会选择一个从 0 到 15 的随机实数：

```
var ddd = Math.random() * 16; 
```

例如，您可能会得到 11.114714370026688。

```
ddd & 3 
```

这是结果与数字 3 的按位与。首先要做的就是从中获取数字`ddd`并将其转换为整数，因为没有为浮点数定义按位运算符。所以在我的例子中，它被视为`ddd`整数 11。

它要做的下一件事是对两个数字的二进制表示进行 AND 运算。二进制中的 11 is`1011`和 3 is `0011`。当你将它们和在一起时，你会得到一个全为零的二进制数，除非*两个*数字中都有一个 1。只有最后两位数字在两个数字中都有 1，所以结果是`0011`，它再次等于十进制 3。

```
| 8 
```

到目前为止，这对结果 (3) 与数字 8 进行了按位或。OR 类似于 AND，但无论任何一个数字中有 1，结果都为*1*。因为三仍然`0011`是二进制而八是`1000`，所以结果是`1011`- 回到十进制十一。

一般来说，上述计算将 8 位（右起第三位）设置为 1，将 4 位（右起第二个）设置为 0，而保留其他位。最终结果是获取原始随机数，范围在 0-15，并将其转换为仅有的四个数字之一：8、9、10 或 11。所以这是一种非常迂回的生成随机数的方式在 8 到 11 之间，包括在内。`Math.floor(8 + Math.random()*4)`会以更直接的方式做同样的事情。

然后它以十六进制（以 16 为底）打印结果，因此您得到`8`, `9`, `a`（以 16 为底的十）或`b`（十一）。

# ruby - 浏览器中的 SSH 终端

> ID：10744139
> 
> 赞同：-4
> 
> 时间：2012-05-24T19:34:41.067
> 
> 标签：ruby, ssh, terminal

我想在网络浏览器中实现 ssh 终端客户端。我需要为 ruby​​ 中的 ssh 连接实现服务器。有一个 net/ssh 库，但我不知道如何处理像 vim 或午夜指挥官这样的全屏程序。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T20:32:34.273

让我尝试重新解析您的问题：您正在尝试在 Web 浏览器上模拟 SSH 控制台会话。您似乎已经为大多数命令实现了简单的控制台输入/输出，但是当您尝试像“vim”或午夜指挥官这样的全屏命令时，似乎出现了垃圾。

您看到的问题与 UN*X 机器如何处理终端上的全屏控制台输出有关。全屏控制台应用程序参考 terminfo/termcap 库来确定清除屏幕、删除一行、插入一行、将光标放在特定点等所需的转义序列。你看到的是这些的原始输出默认终端类型出现的转义序列，很可能是基于 ANSI 的。

要解决您的问题，您必须：

1.  确定您的控制台应用程序模拟的终端类型 - 或者您可以将其强制为确定的。
2.  通过查询 termcap/terminfo 数据库来解码终端类型的转义序列。
3.  在您的 Web 浏览器应用程序上实现终端功能。

根据您用于实现浏览器应用程序的技术堆栈，您可能能够找到其他人可能为解决此问题而开发的库。

# jquery - 未达到 jQuery.getJSON 回调

> ID：10744140
> 
> 赞同：0
> 
> 时间：2012-05-24T19:34:45.107
> 
> 标签：jquery, .net, json, web-services, jsonp

我大部分时间都在努力解决这个问题，我只是被难住了。

我有一个.NET web 服务，它返回一个 JSON 序列化响应，并试图用一个可以访问更多数据进行序列化的新服务来切换它。就处理请求的逻辑而言，这两个服务看起来都是一样的。都将 ContentType 设置为 application/json 并写入流。

我在客户端使用 jQuery 1.7.1，我将带有 URL 的 getJSON 发送到工作端点。Firebug 显示返回的结果，充满数据，并在 JSONLint 和其他中验证。我设置了一个 .ajaxSetup() 来捕捉 onError 事件，我得到了这个：

```
textStatus: parsererror
Error Thrown: Error: jQuery17109478366139694514_1337880510219 was not called
jqXHR Response Text: undefined 
```

（我格式化了消息）

我正在查看的 JSON 是这样的：

```
[
    {
        "sourceType": "KML",
        "dataUrl": "http://firefly.geog.umd.edu/kml/download.php?file=kml_global_modis-hotspots.kml",
        "id": "https://example.com/KmlFeeds::KMLFeeds::FIRMS::World",
        "title": "FIRMS - World",
        "description": "MODIS hotspot / fire and burned area",
        "originator": "NASA LANCE",
        "spatialDomain": null
    },
    {
        "sourceType": "KML",
        "dataUrl": "http://firefly.geog.umd.edu/kml/download.php?file=Alaska_24h.kml",
        "id": "https://example.com/KmlFeeds::KMLFeeds::FIRMS::Alaska",
        "title": "FIRMS - Alaska",
        "description": "MODIS hotspot / fire and burned area",
        "originator": "NASA LANCE",
        "spatialDomain": null
    },
...
] 
```

（spatialDomain 有时有边界框坐标，字符串中只有逗号分隔的小数）

我的旧 Web 服务返回相同的内容，但有几个不同标签的键。使用新服务，我永远不会收到将所有这些数据发布到网站的回调。它肯定会回到我身边，无论如何我看起来都是有效的。

我想认为新服务有些问题 - 如果我只是将请求 URL 切换回旧的，我的客户就可以正常工作。但是响应作为有效的 JSON 返回，所以我无法弄清楚它是如何在进入成功回调时遇到问题的。想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T19:37:12.350

看起来 jQuery 期待[JSONP](http://en.wikipedia.org/wiki/JSONP) Web 服务，但服务器没有正确调用 JSONP 回调。

发布您的 getJSON 调用。此外，您能否发布调用 getJSON 和 Web 服务的页面的域（如有必要，将它们屏蔽掉），以便我们查看它是否是跨域的。

编辑：看起来它必须是跨域的，因为同一服务器上的不同端口被[认为是 cross-domain](https://stackoverflow.com/questions/1077218/are-different-ports-on-the-same-server-considered-cross-domain-ajax-wise)。所以这意味着你想使用 JSONP。问题似乎是您的新服务没有正确地服务 JSONP（可能它正在服务 JSON）。您应该查看新旧配置的差异。

# console - 使用开发人员工具启动 Internet Explorer 9

> ID：10744146
> 
> 赞同：2
> 
> 时间：2012-05-24T19:35:13.440
> 
> 标签：console, internet-explorer-9, developer-tools

我有一个在浏览器插件中运行的脚本。它使用控制台对象的日志功能，该功能仅在加载 F12 开发人员工具时可用。

虽然我可以禁用插件并再次启用它以查看要记录的早期消息，但我觉得它有点烦人。有没有办法用开发者工具加载 IE9？我希望可能有一个模糊的参数被传递给应用程序以启用它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-22T14:04:55.360

在 IE10 中，如果您将开发工具固定在浏览器窗口中，它将在您退出后下次打开 Internet Explorer 时加载。

请注意，如果取消固定，这将不起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T03:01:13.747

如果这是可能的，我会假设它会被映射到命令行选项，但是似乎没有任何这样的选项（尽管这将是浏览器的一个很好的补充）。可以在[Windows Internet Explorer 命令行选项](http://msdn.microsoft.com/en-us/library/hh826025%28v=vs.85%29.aspx)在线找到所有命令行选项的当前列表。

# c++ - 将 UTF-8 转换为 UTF-32，预先计算每个字符中的“字符”数

> ID：10744147
> 
> 赞同：2
> 
> 时间：2012-05-24T19:35:17.720
> 
> 标签：c++, utf-8, string-conversion, utf-32

我有一个将 UTF-8 字符串转换为 UTF-32 字符串的有效算法，但是，我必须提前为我的 UTF-32 字符串分配所有空间。有什么方法可以知道 UTF-8 字符串将占用多少个 UTF-32 字符。

例如，UTF-8 字符串“¥0”是 3 个字符，转换为 UTF-32 后是 2 个无符号整数。有什么方法可以知道在进行转换之前我需要多少 UTF-32 'chars'？还是我将不得不重新编写算法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-24T19:39:30.650

有两个基本选项：

1.  您可以通过 UTF-8 字符串进行两次传递，第一次计算需要生成的 UTF-32 字符数，第二次实际将它们写入缓冲区。

2.  分配您可能需要的最大 32 位字符数——即 UTF-8 字符串的长度。这会浪费内存，但意味着您可以一次性转换 utf8->utf32。

您也可以使用混合 - 例如，如果字符串短于某个阈值，则使用第二种方法，否则使用第一种。

对于第一种方法，第一遍看起来像这样：

```
size_t len=0;  // warning: untested code.
for(const char *p=src; *p; ++p) {
    // characters that begin with binary 10xxxxxx... are continuations; all other
    // characters should begin a new utf32 char (assuming valid utf8 input)
    if ((*p & 0xc0) != 0x80) ++len;
} 
```

# firefox - Firefox Sync 有独立的库吗？

> ID：10744148
> 
> 赞同：6
> 
> 时间：2012-05-24T19:35:19.130
> 
> 标签：firefox

例如，我想编写一个脚本来检索标题中包含单词“html5”的所有书签，并将标签“web-development”添加到这些书签中。

我知道有一个[客户端 API 规范](http://docs.services.mozilla.com/sync/index.html)，但它似乎是一个复杂的协议，我想肯定有人已经开发了一个库。**很难看出哪些文档和库是最新的**。Mozilla Wiki 上有[这个页面](https://wiki.mozilla.org/Labs/Weave/Developer#Libraries)，但它有这个消息：

> 警告：此页面上的大部分信息已过时。Weave 已更名为 Firefox Sync，现在是 Firefox 4 的一部分。此处记录的许多 API 已经发展。

当前使用的 Firefox Sync 协议版本是什么？

我[在 Android Sync](https://github.com/mozilla-services/android-sync/tree/develop/src/main/java/org/mozilla/gecko/sync)（一个月大）和[weaveclient-python](https://github.com/mozilla/weaveclient-python)（2 岁大）中找到了这段代码。我可以在自己的程序中使用任何独立的库吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-21T03:13:39.227

似乎没有可使用的独立库。您也可以查看 shaman 的项目页面 [https://github.com/emergentdotorg/shaman](https://github.com/emergentdotorg/shaman)

希望这能有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-20T18:33:35.133

有一个 FirefoxData-android 库可以帮助您将 Android 应用程序与 Firefox Sync [https://github.com/mozilla-mobile/FirefoxData-android集成](https://github.com/mozilla-mobile/FirefoxData-android)

# php - 尝试使用 Magento 的 API 时出现肥皂错误

> ID：10744150
> 
> 赞同：1
> 
> 时间：2012-05-24T19:35:34.813
> 
> 标签：php, magento, soap, wsdl

我正在寻求解决这个问题的帮助，我希望有人能给我帮助。错误如下：

> 致命错误：SOAP-ERROR：解析 WSDL：无法从“http://example.com/index.php/api/?wsdl”加载：无法加载外部实体“http://example.com/index.第 28 行 /var/www/presentacion/app/code/local/Pengo/Extension/Model/Something.php 中的 php/api/?wsdl"

我用来连接它的代码是这样的：

```
$this->_soap = new SoapClient(http://example.com/index.php/api/?wsdl); 
```

它说是错误的地方。

我一直在 Google、PHP 论坛、StackOverflow 和 Magento 本身进行搜索，但我在任何地方都找不到解决方案。

我所看到的是，WSDL 永远不会像错误所说的那样被解析或加载，并且没有任何功能。

我试过这样连接：

```
$options['location'] = http://example.com/index.php/api/?wsdl;
$options['uri'] = 'urn:Magento';
$this->_soap = new SoapClient(null, $options); 
```

像这样，它不会像其他那样调度任何错误，但没有要使用的函数，就像在另一种情况下它不会加载和解析 WSDL。

我有点沮丧，因为我已经开发了大约 1 个月，现在我正在做一些测试，它显示了这个消息，当它真的是空的和新的并且运行良好时，我已经测试了它。

所以任何帮助将不胜感激。

谢谢你。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-24T20:50:31.243

这个错误十分之九是 Magento 告诉您它无法加载 WSDL 文件。 **Magento**正在告诉你这一点。抱怨的**不是您的本地客户端代码。**

Magento 使用 PHP`SoapServer`对象来创建它的 SOAP API。该`SoapServer`对象也需要访问 WSDL。**尝试从服务器的**命令行运行以下命令

```
curl http://example.com/index.php/api/?wsdl 
```

如果我是对的，以上将超时/失败。

由于 DNS 中的一些怪癖，服务器无法通过其域名访问自己的情况令人惊讶地普遍。如果是这种情况，最快的解决方法是在服务器的主机文件中添加一个条目。（如果没有任何意义，请与您的服务器管理员交谈）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T16:45:49.667

Well after all the things that I test the only one that worked for me, I don't know why but it worked, was doing this in two separate machines. I tried that because I read that somewhere and I just do it and my Magento and Webservice now works perfectly. Whenever I try to do this local it dispatch the same error.

I hope this can help someone in the future and they don't have to knock their head on the wall because of this problem.

Thank you all for your answers and comments.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-18T10:40:49.787

Alan Storm 就在这里！

确保检查您的服务器主机文件，并且它包含域和 www.domain 的条目。如果您要进行服务器重写，这尤其重要。

# javascript - 由于溢出，div不会在滚动时消失：隐藏/自动

> ID：10744151
> 
> 赞同：0
> 
> 时间：2012-05-24T19:35:51.857
> 
> 标签：javascript, css, overflow, fade

我有这个 JavaScript

```
$(window).load(function(){
var $menu = $("header");
var opacity = $menu.css("opacity");
var scrollStopped;

var fadeInCallback = function () {
    if (typeof scrollStopped != 'undefined') {
        clearInterval(scrollStopped);
    }

    scrollStopped = setTimeout(function () {
        $menu.animate({ opacity: 1 }, "slow");
    }, 1400);
}

$(window).scroll(function () {
    if (!$menu.is(":animated") && opacity == 1) {
        $menu.animate({ opacity: 0 }, "200", fadeInCallback);
    } else {
        fadeInCallback.call(this);
    }
  });
}); 
```

它可以很好地隐藏滚动标题，但增加了一些高度：100%；到 html、body 和 'content div'，在 html 和 body 上隐藏溢出，在 'content div' 上自动显示此 javascript 不再有效。

知道为什么这个 javascript 不起作用吗？是否有修复或其他方法可以使标题在滚动时淡出？

提前致谢

编辑 - -

一个 JsFiddle - [http://jsfiddle.net/sturobson/AMJFG/](http://jsfiddle.net/sturobson/AMJFG/)

具有较少 CSS 的较新 Fiddle - [http://jsfiddle.net/sturobson/AMJFG/1/](http://jsfiddle.net/sturobson/AMJFG/1/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T20:26:33.007

你的脚本对我有用。

但是，如果您想尝试另一种方法，请根据您的方法尝试以下方法，但稍微简化：

```
$(document).ready(function(){
    headerFade();
});
function headerFade() {
    var $menu = $("header"),
        opacity = $menu.css("opacity"),
        scrollStopped,
        methods = {
            init: function(){               
                $(window).scroll(function () {
                    (!$menu.is(":animated") && opacity == 1) ? $menu.fadeOut(200, methods.fadeInCallback()) : methods.fadeInCallback();                 
                });             
            },
            fadeInCallback: function(){             
                clearInterval(scrollStopped);                               
                scrollStopped = setTimeout(function () {
                    $menu.fadeIn(600);
                }, 1400);
            }
        };  
    methods.init();
}; 
```

# c++ - 是否有一些用于模拟 Glib::Dispatcher 的 Boost 功能？

> ID：10744152
> 
> 赞同：3
> 
> 时间：2012-05-24T19:35:55.603
> 
> 标签：c++, multithreading, glib, boost-signals, boost-signals2

我目前正在重构一个中型软件项目。它包含一个由多个线程使用的中央内核类。目前，此类使用 a`Glib::Dispatcher`来处理由多个线程发出的信号。由于重构过程的一个目标是完全摆脱`glibmm`（因为`Qt`将用作新框架），我试图找出一种如何使用`Boost`. 我已经研究过`Boost.Signals`and `Boost.Signals2`，但是这些库似乎都没有提供调度程序的替代方案。

为了阐明调度员应该做什么，这里有一个来自[官方文档](http://developer.gnome.org/glibmm/unstable/classGlib_1_1Dispatcher.html)的简短描述：

> Glib::Dispatcher 的工作方式类似于 sigc::signal。但与普通信号不同的是，通知是通过管道异步发生的。这是在线程之间进行通信的一种简单而有效的方式，在具有单个 GUI 线程的线程模型中特别有用。
> 
> 除了操作系统的内部 I/O 锁定之外，不涉及互斥锁。这意味着一些使用规则：
> 
> *   只有一个线程可以连接到信号并接收通知，但即使没有锁定也允许多个发送者。
> *   GLib 主循环必须在接收线程中运行（这通常是 GUI 线程）。
> *   Dispatcher 对象必须由接收线程实例化。
> *   如果您想避免额外的锁定，则应在创建任何发送者线程之前实例化 Dispatcher 对象。
> *   Dispatcher 对象必须由接收线程删除。
> *   由同一接收线程实例化的所有 Dispatcher 对象必须使用相同的主上下文。

你能给我一些正确方向的指示吗？`Boost.Signals`这是我可以使用或实现的功能`Boost.Signals2`吗？

编辑：正如评论者正确指出的那样，使用`Qt`可能是一种选择。但是，我正在重构的类是非常低级的，我不想添加这个额外的依赖项。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T13:31:21.380

我现在选择了完全重写所讨论的课程。事实证明，我**不需要**以`Glib`. `boost::signals2`相反，使用正常信号以及来自*实际*图形交互`Qt`的一些信号就足够了。

 ** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T06:42:07.190

我认为没有简单的方法可以做到这一点，以 boost 的形式删除 Glib 并不能解决问题，这更像是一个架构问题。用 Boost 替换不会解决设计问题。您应该为自己的信号接口建模，并尝试适应每个库，首先包括 Glib，因为它已经在工作，为您的问题添加另一个间接级别将让您解决该问题。

如果您查看[boost::function](http://www.boost.org/doc/libs/1_49_0/doc/html/function.html) ，Boost 可以为您提供帮助。我不认为用 boost 替换 glib 是一个真正的进步，boost 不是一个图形库，在某些时候需要向图形引擎添加一个带有实现层的接口。*

# ruby-on-rails - Rails（set_no_cache 方法）无法在 Safari 和 Opera 中禁用浏览器缓存

> ID：10744169
> 
> 赞同：12
> 
> 时间：2012-05-24T19:37:41.127
> 
> 标签：ruby-on-rails, ruby, safari, opera, browser-cache

在使用 Devise 进行身份验证后，我发现其中存在一个安全漏洞，在用户注销后，会话变量被保留。这允许任何人按下后退按钮并访问已登录用户的上一个屏幕。

我看了这些帖子 [Num 1](https://stackoverflow.com/questions/711418/how-to-prevent-browser-page-caching-in-rails) [Num 2](https://stackoverflow.com/questions/4120289/how-to-clear-browser-cache-after-user-logout-to-prevent-access-to-private-info-v) [Num 3](https://www.owasp.org/index.php/Testing_for_Logout_and_Browser_Cache_Management_%28OWASP-AT-007%29)

我将这些行添加到我的 application_controller

```
before_filter :set_no_cache
def set_no_cache
response.headers["Cache-Control"] = "no-cache, no-store, max-age=0, must-revalidate"
response.headers["Pragma"] = "no-cache"
response.headers["Expires"] = "Fri, 01 Jan 1990 00:00:00 GMT"
end 
```

在 _form.html.erb 我在顶部添加了这个

```
<%if user_signed_in? %>
<%=link_to "Sign Out",  destroy_user_session_path, :method => :delete %><br/>
<%= form_for(@listing) do |f| %>
<% if @listing.errors.any? %>
........... 
```

然后我在 Firefox、Chrome 和 Safari 上测试了该应用程序。

Firefox 和 Chrome 很好，因为我注销并点击后退按钮并且看不到用户的前一个屏幕，但是在 Safari 和 Opera 中，不安全的行为仍然存在。此代码没有效果。

对于如何解决这个问题，有任何的建议吗？

谢谢

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-22T08:06:02.333

我遇到了同样的问题，找到了一个很好的解决方案，我把它写到

[http://www.fordevs.com/2011/10/how-to-prevent-browser-from-caching-a-page-in-rails.html](http://www.fordevs.com/2011/10/how-to-prevent-browser-from-caching-a-page-in-rails.html)

要添加“无缓存”，请在 application_controller.rb 文件中添加以下行

```
before_filter :set_no_cache 
```

和功能

```
def set_no_cache
    response.headers["Cache-Control"] = "no-cache, no-store, max-age=0, must-revalidate"
    response.headers["Pragma"] = "no-cache"
    response.headers["Expires"] = "Fri, 01 Jan 1990 00:00:00 GMT"
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T19:04:08.320

首先，对于缓存的任何问题，请使用 Mark Nottingham 的[HTTP 缓存指南](http://www.mnot.net/cache_docs/)

```
Cache-Control: no-cache, no-store, must-revalidate
Pragma: no-cache
Expires: 0 
```

尝试这个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-15T21:27:52.717

我发现在我的应用程序控制器中执行此操作非常适合开发。

```
after_filter  :expire_for_development

protected

def expire_for_development
  expires_now if Rails.env.development?
end 
```

# sql-server - 如何使用无 DSN 连接在访问中创建直通查询？

> ID：10744170
> 
> 赞同：14
> 
> 时间：2012-05-24T19:37:42.723
> 
> 标签：sql-server, sql-server-2008, ms-access, ms-access-2010, dsn

我在 Access 数据库中使用与我的 SQL Server 的无 DSN 连接。但是，每当我尝试编写“传递”查询并运行它时，都会弹出一个对话框，询问 DSN。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-05-24T19:41:23.597

在 SQL 视图中，选择直通查询后选择属性并插入 ODBC 连接字符串。例如：

```
ODBC;DRIVER=SQL Server;SERVER=Server\Instance;Trusted_Connection=Yes;DATABASE=Test 
```

另见： http: [//www.connectionstrings.com/sql-server-2008](http://www.connectionstrings.com/sql-server-2008)

# svg - Raphael js：用它的阴影动画路径

> ID：10744176
> 
> 赞同：0
> 
> 时间：2012-05-24T19:38:08.407
> 
> 标签：svg, raphael

我不确定如何淡入和淡出路径以及我为它创建的阴影：

```
 var p = "M10,10L810,10L810,190L10,190L10,10";
  var s = "M16,16L816,16L816,196L16,196L16,16";
var paper = Raphael(100, 100, 830, 210);
var shadow = paper.path(s);
shadow.attr({stroke: "none", fill: "#999999", opacity:0.1});
shadow.blur(4);

var c = paper.path(p);
c.attr({fill:"#ffffff", stroke:"none"}); 
```

我是否必须同时手动为 c 和 shadow 设置动画？有没有办法我可以告诉这张特殊的纸淡化它里面的所有东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T21:16:30.713

把你的路径和你的影子放在一个集合中。将您的动画应用到集合中，它会影响两者。

[这是](http://jsfiddle.net/amadanNM/Y396M/)一个非常糟糕的例子，我同时移动两者。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T23:55:15.683

也许动画阴影路径以匹配另一条路径的规范？ [http://www.irunmywebsite.com/raphael/additionalhelp.php?q=fadingdropshadow](http://www.irunmywebsite.com/raphael/additionalhelp.php?q=fadingdropshadow)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T10:56:56.443

阿马丹的答案不正确。请丢弃它。如果将元素放入集合中，发光将成为集合的一部分，但集合只是逻辑上的。这意味着如果您为该设置设置动画，您的阴影动画将看起来很奇怪。

例如，仅使用 set 来引用事件的逻辑分区。最好是为其他对象的 // 中的阴影设置动画。

# java - Java-EE6：带有静态编织的 FetchType.LAZY 抛出奇怪的异常

> ID：10744179
> 
> 赞同：3
> 
> 时间：2012-05-24T19:38:19.433
> 
> 标签：java, jakarta-ee, jpa, lazy-loading, eclipselink

我的解决方案包含 3 个不同的项目：

*   EJB 项目使用 Netbeans 自动生成的 Facades 来管理实体类和 persistence.xml

*   类库，包含所有 @Entity 注释和静态编织的数据库类以及外观 ejb 的远程接口（在 EJB 和独立客户端之间共享）

*   主要由 Swing GUI 类组成的独立客户端

我使用 Glassfish 3.1.2、Eclipselink 2.3 作为 JPA 提供程序、Netbeans 7.1.1 和 MySQL 数据库。我配置了一个 Ant 任务，它在persistence.xml 的基础上静态编织我的实体类。

我在用 fetch=FetchType.LAZY 装饰的实体之间有几个 @OneToOne、@ManyToOne 和 @ManyToMany 注释关系。

现在我得到了以下错误：

```
Exception in thread "Mainframe Loader" Local Exception Stack: 
Exception [EclipseLink-7242] (Eclipse Persistence Services - 2.3.2.v20111125-r10461):     org.eclipse.persistence.exceptions.ValidationException
Exception Description: An attempt was made to traverse a relationship using indirection that had a null Session.  This often occurs when an entity with an uninstantiated LAZY relationship is serialized and that lazy relationship is traversed after serialization.  To avoid this issue, instantiate the LAZY relationship prior to serialization.
 at org.eclipse.persistence.exceptions.ValidationException.instantiatingValueholderWithNullSession(ValidationException.java:998)
 at org.eclipse.persistence.internal.indirection.UnitOfWorkValueHolder.instantiate(UnitOfWorkValueHolder.java:220)
 at org.eclipse.persistence.internal.indirection.DatabaseValueHolder.getValue(DatabaseValueHolder.java:88)
 at org.eclipse.persistence.indirection.IndirectList.buildDelegate(IndirectList.java:244)
 at org.eclipse.persistence.indirection.IndirectList.getDelegate(IndirectList.java:414)
 at org.eclipse.persistence.indirection.IndirectList.size(IndirectList.java:752)
 at ch.lawsuite.gui.mail.PosteingangUI.updateDokumentTable(PosteingangUI.java:47)
 at ch.lawsuite.gui.mail.MailboxUI.updateDokumentTables(MailboxUI.java:81)
 at ch.lawsuite.gui.mail.MailboxUI.initMailboxes(MailboxUI.java:37)
 at ch.lawsuite.gui.mail.MailboxUI.<init>(MailboxUI.java:23)
 at ch.lawsuite.gui.MainframeUI.initModules(MainframeUI.java:191)
 at ch.lawsuite.gui.login.LoginUI$MainframeLoader.run(LoginUI.java:131) 
```

非常感谢任何帮助。我在这个问题上完全陷入僵局一个多星期了:-(

提前谢谢了！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T20:17:58.563

一旦将实体传递给远程客户端 - 您就无法加载未加载的惰性属性。您需要确保它们已加载（触摸它们或其他东西）在远程传递它们的外观中。静态编织与此无关。（嗯，自动过程与静态/动态/无编织不同 - 但从概念上讲，对于我们作为开发人员来说没有区别）

# eclipse - 为什么导入项目时 FDT 5.5 挂起？

> ID：10744184
> 
> 赞同：0
> 
> 时间：2012-05-24T19:38:45.550
> 
> 标签：eclipse, import, fdt

将 FDT 5.0 项目导入 FDT 5.5 时，主对话框中的进度条在快结束时停止。主工作区窗口（右下角）上的进度指示器卡在“正在刷新工作区”或“正在导入 core.prefs”上。

到底是怎么回事？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T19:38:45.707

这是 FDT 5.5.0 中的一个已知错误，并且即将发布修补程序。[您可以在此处](http://bugs.powerflasher.com/jira/browse/FDT-2741)关注 JIRA 的进度。当更新可用时，FDT 会通知您。您还可以关注[FDT 的 twitter 帐户](https://twitter.com/#!/fdt5)或[FDT 的博客](http://fdt.powerflasher.com/blog/)。

问题是由于在读取项目首选项时出现[死锁。](https://stackoverflow.com/questions/34512/what-is-a-deadlock)这就是它被挂起的原因。

# asp.net - ASP.NET / VB.NET：生成插入命令

> ID：10744200
> 
> 赞同：0
> 
> 时间：2012-05-24T19:39:58.027
> 
> 标签：asp.net, sql, database

我的代码隐藏中有所有表单变量，它们都是使用“Request.Form”检索的。

据我所知..如果我使用 SQLDataSource 来执行此操作，我必须使用 ASP.NET Controlls（我不想要）。

```
INSERT INTO Orders(FirstName, LastName, Email, PhoneNumber, Address, City, State, ZipCode, PaymentMethod, PromoCode, OrderStatus, Tracking, PPEmail, SubmissionDate) VALUES (@FirstName, @LastName, @Email, @Phone, @Address, @City, @State, 11111, @PaymentMethod', '0', 'New Order - Pending', '0', @PPEMAIL, @Date) 
```

代码隐藏

```
 Dim fPrice As String = CType(Session.Item("Qprice"), String)
    Dim DeviceMake As String = CType(Session.Item("Make"), String)
    Dim PaymentMethod As String = Request.Form("Payment Type")
    Dim DeviceModel As String = CType(Session.Item("Model"), String)
    Dim DeviceCondition As String = CType(Session.Item("Condition"), String)
    Dim SubmissionDate As String = Date.Now.ToString
    Dim FirstName = Request.Form("First")
    Dim LastName = Request.Form("Last")
    Dim City = Request.Form("City")
    Dim Phone = Request.Form("Phone")
    Dim Address = Request.Form("Address")
    Dim State = Request.Form("State")
    Dim Zip = Request.Form("Zip")
    Dim Email = Request.Form("EMail") 
```

有没有一种方法可以将我的变量附加到 SQLDatasource 生成的插入语句，而无需手动编码参数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T19:49:16.603

你可以使用[`FormParameter`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.formparameter%28v=vs.80%29.aspx). 到目前为止，我知道这不需要任何 ASP.NET 控件。

```
 <asp:sqldatasource
    id="SqlDataSource1"
    runat="server"
    connectionstring="<%$ ConnectionStrings:MyNorthwind %>"
    selectcommand="SELECT CompanyName,ShipperID FROM Shippers"
    insertcommand="INSERT INTO Shippers (CompanyName,Phone) VALUES (@CoName,@Phone)">
      <insertparameters>
        <asp:formparameter name="CoName" formfield="CompanyNameBox" />
        <asp:formparameter name="Phone"  formfield="PhoneBox" />
      </insertparameters>
  </asp:sqldatasource> 
```

请特别注意与此机制相关的 Microsoft 警告

> FormParameter 不会以任何方式验证表单元素传递的值；它使用原始值。在大多数情况下，您可以在数据源控件使用 FormParameter 之前通过处理一个事件来验证它的值，例如您正在使用的数据源控件公开的 Selecting、Updating、Inserting 或 Deleting 事件。如果参数的值未通过验证测试，您可以通过将关联的 CancelEventArgs 类的 Cancel 属性设置为 true 来取消数据操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T19:45:42.840

强行附加参数可能更好。当您从 Form 和 Session (ick) 中获取值时，参数化 SQL 将为您提供一些保护措施。

您可能想探索代码生成（A-la [T4](http://msdn.microsoft.com/en-us/library/bb126445.aspx)），这样您可以将 codegen 指向 proc/table，它将生成 vb 代码来调用它，附加参数并执行语句。

# user-interface - 在 AWS SWF 上，发布用户界面（html css js）的好方法是什么？

> ID：10744202
> 
> 赞同：1
> 
> 时间：2012-05-24T19:40:01.680
> 
> 标签：user-interface, amazon-web-services, amazon-swf

首先，请抱歉，我刚开始在 AWS 上开发应用程序，我有一些问题对你来说可能很容易，但对我来说不是真的……但无法找到任何关于 SWF 上 Java 网站的 Web 集成的回复。 ..

我也是spring框架的新用户，我需要做一些关于它的教程（或者不是？SWF文档就足够了吗？）。但我的问题是针对那些已经在这方面花费时间并且可以说出对我来说最好的方法的人的问题。（为什么？）

*   UI 设计中有什么好的方法可以让基于 Web 的应用程序具有 ui 动态变化？（如内容幻灯片、菜单等……最具扩展性的选择）

将视图（例如在 Elastic Beanstalk 上运行的 GWT Web 界面，或使用良好 MVC PHP 框架的 CloudFront PHP 界面？）与在 SWF 上运行的模型分离？全部由 API 链接。

或者让我的完整 Web 应用程序使用 Flow FrameWork 和 GWT？（或其他技术？现在我选择了这个，即使我也必须学习教程，但为什么不使用新的 Dart Google 的解决方案呢？）

*   有效地做到这一点的最简单方法是什么？

我了解 SWF 逻辑方法，并且我的所有项目架构（即可扩展的 SWF 模型）都在我的脑海中，但很明显，如果我想在我的项目中添加一个新服务，并且该服务想要获取现有的列表对象（例如存储在 DynamoDB 中），我想轻松地显示这些信息，因为我已经为这个对象做了。

因此，通过 PHP 界面上的模型副本，我想我可以关联方法来显示这个对象，从而集中 PHP 项目来显示我的对象并使用 PHP 启动工作流（搜索和只读？），并且SWF 有一个很好的工作模型来启动那些 WF。这是一个好方法吗？有没有真正适合这样做的 PHP 框架？相反，我在非 swf java UI 应用程序上执行此操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T22:01:51.850

最后我找到了我正在寻找的东西。要连接 UI 界面，我们只需要使用好的 SDK 类：

[http://docs.amazonwebservices.com/AWSSDKforPHP/latest/index.html#i=AmazonSWF](http://docs.amazonwebservices.com/AWSSDKforPHP/latest/index.html#i=AmazonSWF)

[http://docs.amazonwebservices.com/AWSJavaSDK/latest/javadoc/index.html](http://docs.amazonwebservices.com/AWSJavaSDK/latest/javadoc/index.html)

我的问题很简单，但我无法理解整个 SWF 架构。

因此解决方案是使用 SWF Flow FrameWork 实现应用程序的 MODEL-CONTROLER，然后，我们可以将 VIEW 与任何 SDK 连接以启动工作流。我们还可以使用良好的 SDK 轻松连接 Android 或 iPhone 应用程序。

# asp.net-mvc - 数据注释自定义属性 [DateTime]

> ID：10744203
> 
> 赞同：0
> 
> 时间：2012-05-24T19:40:03.570
> 
> 标签：asp.net-mvc, data-annotations

我正在尝试将数据验证添加到我的 DateTime 属性中，我想强制用户选择介于`DateTime.Now`和小于一年之后的日期`DateTime.now.addyears(+1)` 这是我的代码：

```
 public class DateDebut : ValidationAttribute
        {
            public override bool IsValid(object value)
            {
                if (value == null) return false;
                DateTime enteredDate = (DateTime)value;

                if ( (enteredDate >= DateTime.Now) && (enteredDate <= DateTime.Now.AddYears(+1)))
                    return true;
                else
                    return false;
            }
        }
        [Required]
        [Display(Name = "De : ")]
        [DataType(DataType.Date)]
        [DateDebut(ErrorMessage="Date invalide")]
        public DateTime dd { get; set; } 
```

此自定义验证不起作用，验证未执行，我认为我错过了一些非常简单的事情吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T20:09:40.933

我完全同意丹尼尔，

但是我发现当我需要比较模型中的属性时，我使用 IValidatableObject

[http://msdn.microsoft.com/en-us/library/system.componentmodel.dataannotations.ivalidatableobject.aspx](http://msdn.microsoft.com/en-us/library/system.componentmodel.dataannotations.ivalidatableobject.aspx)

我发现对于大多数小类型的比较来说它更快更容易，你会有一些看起来像这样

```
public class myModel : IvalidatableObject
{
 string debut = DateTime.Now.ToShortDateString();
 string fin = DateTime.Now.AddYears(+1).ToShortDateString(); 
 [Required]
 [Display(Name = "De : ")]
 [DataType(DataType.Date)]
 public DateTime dd { get; set; }

  public IEnumerable<ValidationResult> Validate()
  {
    if(this.debut > this.fin)
    {
      yield return new ValidationResult("debut cannot be greated then fin");
    }
  }
} 
```

阅读并查看最适合您的内容

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T19:41:46.733

属性本质上是静态的。您是否考虑过编写自己的属性进行验证？网络上有几个示例可以帮助您入门。

您还可以根据需要继承`RangeAttribute`并注入它。

# ajax - ajax控制工具包文件上传

> ID：10744207
> 
> 赞同：0
> 
> 时间：2012-05-24T19:40:21.577
> 
> 标签：ajax, file-upload

我正在使用 ajax 文件上传来上传视频。但是，它不允许大于 5 mb 的文件。是否可以更改限制，或者您是否知道任何其他上传者可用于视频上传。感谢您的回答。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T12:12:32.380

更改 web.config 中的 maxRequestLength 属性

# java - 我需要关闭 ScheduledExecutorService，但需要在需要时启动它

> ID：10744208
> 
> 赞同：0
> 
> 时间：2012-05-24T19:40:29.283
> 
> 标签：java, multithreading, shutdown, executorservice

我为这个游戏制作了一个甜蜜的系统更新功能，我在这里制作的是代码：

```
public static final ScheduledExecutorService scheduler = Executors.newSingleThreadScheduledExecutor();
private static CountDownThread countDownThread;
public static boolean running = false;

private static short updateSeconds;

public static void start() {
    System.out.println("starting");
    running = true;
    countDownThread = new CountDownThread();
    scheduler.scheduleWithFixedDelay(countDownThread, 0, 1000, TimeUnit.MILLISECONDS);
}

public static void stop() {
    System.out.println("Stoping");
    scheduler.shutdown();
    running = false;
    updateSeconds = 0;
    System.out.println("Stopped");
}

public static void refresh() {
    for (Player p : Static.world.players){ 
        if (p.ready()) {
            if (updateSeconds > 0) {
                ActionSender.sendSystemUpdate(p, updateSeconds+1);
            } else {
                ActionSender.sendSystemUpdate(p, updateSeconds);
            }
        }
    }
}

public static short getUpdateSeconds() {
    return updateSeconds;
}

public static void setUpdateSeconds(short updateSeconds) {
    SystemUpdateHandler.updateSeconds = (short) (updateSeconds);
}

public static class CountDownThread implements Runnable {

    @Override
    public void run() {
        System.out.println(updateSeconds);
        updateSeconds--;
        if (updateSeconds <= 0) {
            Static.server.restart();
            scheduler.shutdown();
            running = false;
        }
    }

} 
```

}

就是这样，当系统更新计数器达到 0 时，服务器将重新启动它自己。它工作正常，但问题从这里开始

```
 case "update":
        if (Short.parseShort(txtSystemUpdate.getText()) != 0) {
            SystemUpdateHandler.setUpdateSeconds(Short.parseShort(txtSystemUpdate.getText()));
            SystemUpdateHandler.refresh();
            if (!SystemUpdateHandler.running) {
                SystemUpdateHandler.start();
            }
        } else {
            SystemUpdateHandler.stop();
            for (Player p : Static.world.players){ 
                if (p.ready()) {
                    ActionSender.sendSystemUpdate(p, 0);
                }
            }
        }
        break; 
```

这就是我所说的，基本上如果我输入一个大于 0 的数字，程序就可以正常工作。但我想要它，所以如果我输入数字 0，调度程序将停止运行（以节省内存），因为除非我发送系统更新，否则不需要它。基本上，当我输入 0 时如何停止调度程序运行，但是当我输入一个数字 > 然后是 0（多次）时能够重新启动它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T19:54:50.260

一旦关闭， ExecutorService 就无法再次启动，因此从变量声明中移动它的创建（并删除 final）并在 start 方法中执行此操作：

```
//not static and not final, normal instance variable instead:
public ScheduledExecutorService scheduler;
...

//and create it in the start method isntead:
public static void start() {
    System.out.println("starting");
    scheduler = Executors.newSingleThreadScheduledExecutor();
    ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T19:46:39.493

关闭时，您将获得提交给调度程序的任务列表，您可以使用此列表创建新任务。调度程序一旦停止就无法启动 - 因为线程池已死，所有工作线程也已死。

# objective-c - 如何在程序启动时取消链接框架

> ID：10744214
> 
> 赞同：1
> 
> 时间：2012-05-24T19:41:09.487
> 
> 标签：objective-c, ios, frameworks, linker, dropbox

我正在为 iPhone OS 3.1.3 开发，我需要使用 Dropbox API。

问题是 Dropbox API 至少需要 iOS 4.2。行。

我决定保留在 3.1.3 下使用该程序的可能性，但如果是 4.2 及更高版本，就会有 Dropbox 功能。

要使用 Dropbox 框架，我需要链接其他框架：

*   安全框架
*   QuartzCore.framework

我已经做到了。

当我将 Dropbox.framework 链接到我的项目时，该程序在 iPhone 模拟器上运行良好，但无法在我的 iPhone 3.1.3 上启动。输出中有错误：

* * *

dyld：找不到符号：_kSecAttrAccessible 引用自：/var/mobile/Applications/C1FC10E5-0A36-4DEB-BD27-5028C205C89D/Bus Time.app/Bus Time Expected in：/System/Library/Frameworks/Security.framework/Security in /var/mobile/Applications/C1FC10E5-0A36-4DEB-BD27-5028C205C89D/Bus Time.app/Bus Time

* * *

所以问题是：

我可以在程序启动时检测 iOS 版本并取消链接框架吗？或者您能否提供另一种使用 3.1.3 的保管箱的方法？

谢谢您的回答。我很感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T23:27:36.097

1.  在文件列表中选择安全框架。
2.  展开右侧边栏（视图 > 实用程序 > 显示实用程序）。
3.  在“目标会员”下，将“必需”更改为“可选”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-24T23:32:25.570

您不能在运行时以编程方式取消链接框架。

您可以在运行时以编程方式*链接*框架，例如通过使用 NSBundle API、dlopen 或各种其他方式。如果这样做，则必须手动加载所需的 ObjC 对象和/或 C 符号。

或者，您可以弱链接框架，这使得运行时为您完成大部分工作。如果它在那里，它将在启动时加载，并且它的所有 ObjC 对象和 C 符号都可供您使用。否则，它的所有 ObjC 对象和 C 符号都将为空。因此，您所要做的就是检查 null 以决定是否运行需要该框架的代码。

# c - 阅读 Gnome Shell 通知

> ID：10744220
> 
> 赞同：1
> 
> 时间：2012-05-24T19:41:48.873
> 
> 标签：c, fedora, gnome-3, gnome-shell

我需要阅读 gnome-shell 通知以在事件 X 发生时发送电子邮件（例如成功下载 torrent）。是否有我可以在 C 代码中读取/设置的文件或回调？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T19:52:13.583

一个非常简单的选择是`notify-send`从您的代码中调用该工具。它是这样使用的：

```
notify-send [OPTION...] <SUMMARY> [BODY] - create a notification 
```

有关详细信息，请参阅随附的手册页。

编辑：我第一次读错了这个问题，并认为你想*发送*通知。为了对通知*做出反应*，我建议编写一个`gnome-shell`扩展。已经有[一个示例扩展](https://github.com/hackedbellini/Gnome-Shell-Notifications-Alert)显示如何对*所有*通知做出反应。

我不知道您自己的代码有任何回调，抱歉。但是您可能可以通过`DBUS`. 有关详细信息，请参阅[DBUS 主页。](http://www.freedesktop.org/wiki/Software/dbus)简而言之，您的 shell 扩展可以生成适当的`DBUS`消息，然后您的程序可以对此做出反应。

对不起我的阅读错误:)

# sql - 在 T-SQL 中设置和查询版本化记录的最佳实践

> ID：10744221
> 
> 赞同：1
> 
> 时间：2012-05-24T19:41:50.873
> 
> 标签：sql, tsql

我正在尝试优化我的 SQL 查询，我总是回到这个问题，我希望能深入了解如何最好地优化它。

为简洁起见，假设我有一个简单的员工表：

**tbl_employees**

```
Id     HiredDateTime
------------------
1      ...        
2      ... 
```

这在另一个表中为每个员工提供了版本信息：

**tbl_emplyees_versioned**

```
Id     Version   Name     HourlyWage
-------------------------------
1      1         Bob      10
1      2         Bob      20
1      3         Bob      30
2      1         Dan      10
2      2         Dan      20 
```

这就是在视图中检索最新版本记录的方式：

```
Select tbl_employees.Id, employees_LatestVersion.Name, employees_LatestVersion.HourlyWage, employees_LatestVersion.Version
From tbl_employees
Inner Join tbl_employees_versioned
 ON tbl_employees.Id = tbl_employees_versioned.Id
CROSS APPLY 
   (SELECT Id, Max(Version) AS Version
    FROM tbl_employees_versioned AS employees_LatestVersion
    WHERE Id = tbl_employees_versioned.Id
    GROUP BY Id) AS employees_LatestVersion 
```

要得到这样的回应：

```
Id     Version   Name     HourlyWage
-------------------------------
1      3         Bob      30
2      2         Dan      20 
```

当提取一个包含超过 500 条员工记录且每个都有几个版本的查询时，此查询开始阻塞并需要几秒钟才能运行。

马上就有几次罢工，但我不知道如何克服它们。

1.  显然，交叉应用增加了一些性能损失。在处理这样的版本信息时是否有最佳实践？有没有更好的方法来获得最高版本的记录？

2.  版本化表没有聚集索引，因为 Id 或 Version 都不是唯一的。将它们连接在一起，但它不会那样工作。相反，Id 有一个非聚集索引，Version 有另一个索引。有没有更好的方法来索引这个表以获得任何性能提升？索引视图在这里真的有帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T19:59:28.387

我认为构建数据的最佳方式是使用开始日期和结束日期。因此，原始表的数据结构如下所示：

```
create table tbl_EmployeesHistory (
    EmployeeHistoryId int,
    EffDate date not null,
    EndDate date,
    -- Fields that describe the employee during this time
) 
```

然后，您可以使用视图查看当前版本：

```
create view vw_Employees as
    select *
    from tbl_EmployeesHistory
    where EndDate is NULL 
```

在某些情况下，如果允许未来的结束日期，where 子句将是：

```
where coalesce(EndDate, getdate()) >= getdate() 
```

或者，在这种情况下，您可以将 EndDate 默认为某个遥远的未来日期，例如“01-o1-9999”。您可以在 create table 语句中将其添加为默认值，使列不为空，然后您始终可以使用该语句：

```
where getdate() between EffDate and EndDate 
```

正如 Martin 在他的评论中指出的那样，coalesce() 可能会阻碍索引的使用（它在 SQL Server 中如此），而这没有这个问题。

这被称为缓慢变化的维度。Ralph Kimball 在他关于数据仓库的书中详细讨论了这个概念。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T19:47:05.157

您可以通过以下方式查看每位员工的最新版本：

```
Select Id, Name, HourlyWage, Version
FROM (
  Select E.Id, V.Name, V.HourlyWage, V.Version,
   row_number() OVER (PARTITION BY V.ID ORDER BY V.Version DESC) as nRow
  From tbl_employees E
  Inner Join tbl_employees_versioned V ON E.Id = V.Id
) A
WHERE A.nRow = 1 
```

我怀疑这将比您以前的解决方案执行得更好。tbl_employees_versioned 中跨 Id 和 Version 的一个索引很可能也有帮助。

另外，请注意，如果您选择的字段不在 tbl_employees_versioned 中，则只需加入 tbl_employees。

# python - Redis 中的键值对

> ID：10744226
> 
> 赞同：0
> 
> 时间：2012-05-24T19:42:10.033
> 
> 标签：python, nosql, redis, key-value, key-value-store

我打算使用 Redis 来存储与一组关键字相关联的图像链接列表，以便快速检索。

但是，我对在这里定义我的键有点困惑。

我想要一组关键字，可能是 3 或 4 个作为我的键。所以，如果我搜索任何关键字组合，我会得到返回的图像列表。

如何定义我的键来存储多个单词？我知道使用可变关键字是不可取的，但我*不想*以后对键进行更改。进一步解释：

（“杰克”，“多西”，“推特”）：[链接/到/image1.jpg，链接/到/image2.jpg，链接/到/image3.jpg]

('jack', 'dorsey', 'square') : [link/to/image1.jpg, link/to/image2.jpg, link/to/image3.jpg]

即使我可以在键中创建二元组或三元组，这也会有所帮助。

1.  这可能吗？
2.  有替代方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T19:51:47.400

我不认为它直接可以这样做，但你可以简单地做

```
import redis
import json
r = redis.Redis()
r.rpush(json.dumps(("jack", "dorsey", "twitter"), image) 
```

然后，当您想根据密钥或其他内容检查某些内容时，只需使用`json.dumps`您的数据结构

# c++ - C++ 复制构造函数

> ID：10744227
> 
> 赞同：3
> 
> 时间：2012-05-24T19:42:20.843
> 
> 标签：c++, constructor

我对这个关于初始化的语法有疑问。

引自[http://en.wikipedia.org/wiki/Copy_constructor](http://en.wikipedia.org/wiki/Copy_constructor)

```
X a = X();
// valid given X(const X& copy_from_me) but not valid given X(X& copy_from_me)               
// because the second wants a non-const X&               
// to create a, the compiler first creates a temporary by invoking the default constructor               
// of X, then uses the copy constructor to initialize a as a copy of that temporary.                
// However, for some compilers both the first and the second actually work. 
```

* * *

```
#include <iostream>

class Foo
{
public:
    Foo()
    {
        std::cout << "Default Constructor called" << std::endl;
    }

    Foo(const Foo& other)
    {
        std::cout << "Copy constructor called" << std::endl;
    }

    Foo& operator=(const Foo& rhs)
    {
        std::cout << "Assignment operator called" << std::endl;
    }
};

int main()
{
    Foo b = Foo(); //case 1:default 
    Foo c = Foo(a); //case 2: copy constructor
} 
```

案例 1：
在复制构造函数中将参数从 const 更改为非 const 时，案例 1 不会按维基百科的预期编译。但是，当使用正确的复制构造函数运行时，它只调用默认构造函数。为什么它也不调用复制构造函数？这是在编译时完成的优化吗？

案例 2：
案例 1 的答案可能会为我回答案例 2，但是为什么这只会调用一次复制构造函数呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-24T19:45:44.047

```
Foo b = Foo(); 
```

这种形式需要一个有效的匹配副本构造函数存在，但副本可能会被优化掉。它可以被优化掉的事实并没有放松构造函数存在的要求。

通过使您的复制构造函数采用非常量引用，它不再匹配，因为`Foo()`会生成一个临时对象，并且临时对象不能绑定到非常量引用。当您制作参数 const 引用（或废弃您的副本 c-tor 并使用编译器生成的副本 c-tor）时，它会起作用，因为临时对象可以绑定到 const 引用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T19:46:36.777

`X()`是一个临时的，所以你不能将它绑定到一个非`const`引用（尽管 MSVS 有一个允许它的扩展）。

1）是的，这是一个编译器优化

2) 非法，因为`a`不存在。但原则上，再次，是的，编译器优化。

# c# - UpdateCommand的CommandText如何使用存储过程？

> ID：10744230
> 
> 赞同：0
> 
> 时间：2012-05-24T19:42:41.170
> 
> 标签：c#, ado.net

我有一个用于编辑表格的 DataGridView。以下代码用于更新表。

```
using (SqlConnection con = new SqlConnection("...."))
{
    con.Open();

    SqlDataAdapter da = new SqlDataAdapter("select * from T", con);
    SqlCommandBuilder cb = new SqlCommandBuilder(da);
    cb.ConflictOption = ConflictOption.OverwriteChanges;

    da.UpdateCommand = cb.GetUpdateCommand();
    // da.UpdateCommand.CommandText = "exec sp1 @p1, @p2, @p3...";
    da.InsertCommand = cb.GetInsertCommand();
    da.DeleteCommand = cb.GetDeleteCommand();
    da.Update(datatable.GetChanges());
} 
```

我发现`da.Update(datatable.GetChanges())`根据修改后的列巧妙地生成了最小集合子句。

```
update T set c1 = @p1 where K = @p2 -- If only c1 is changed in the grid 
update T set c1 = @p1, c2 = @p2 where K = @p3 -- if both c1 and c2 is changed
update T set c4 = @p1 where K = @p2 -- if only c4 is changed
...... 
```

如何编写存储过程`CommandText`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-24T20:00:40.483

您将希望在接收参数的服务器上创建一个存储过程。您使用的方法是生成 SQL 并且不使用存储过程，它通过连接发送 SQL 到服务器。如果我将存储过程命名为 UpdateSomeUserTable：

```
oleDbCommand1.CommandText = "UpdateSomeUserTable";
oleDbCommand1.CommandType = System.Data.CommandType.StoredProcedure;

oleDbCommand1.Parameters["us_id"].Value = "668987";
oleDbCommand1.Parameters["us_lname"].Value = "White";
oleDbCommand1.Parameters["us_fname"].Value = "Johnson";

oleDbConnection1.Open();
oleDbCommand1.ExecuteNonQuery();
oleDbConnection1.Close(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-04-18T18:24:09.273

这是一个代码气味，我不建议使用，但它有效。

```
dataAdapter.RowUpdating +=  (sender, e) =>
{
    if (e.Command != null && !string.IsNullOrEmpty(e.Command.CommandText))
    {
       e.Command.CommandText = $"";                                
    }
}; 
```

# ios - 模拟器在哪里保存文件（Xcode 不更新文件）？

> ID：10744231
> 
> 赞同：4
> 
> 时间：2012-05-24T19:42:48.057
> 
> 标签：ios, xcode, ios-simulator, xcode4.2

我在 Xcode 不更新我已更新的文件（例如数据库、jpg 等）时遇到了一些问题，即使我已经小心地删除了旧文件并删除了引用。这个问题从 Xcode > 4.2 开始。

除了派生的数据文件夹和

```
~/Library/Application Support/iPhone Simulator/[OS version]/Applications/[appGUID]/ 
```

提前谢谢了

PS：是的，我一般清理项目，删除派生数据，删除上面目录下的所有模拟器文件，删除项目并重启mac。而且似乎仍然有对旧数据（如 jpg、数据库等）的引用，即使我在文件系统上找不到它......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-24T20:04:14.973

转到产品>>清理构建文件夹。或者，从 iOS 模拟器菜单重置模拟器。这样，您的应用程序将在模拟器中呈现新的，并在完全刷新并与您的项目文件链接后使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T20:01:01.397

在模拟器中卸载应用程序。这样你就可以摆脱一切。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-04-04T21:29:20.443

有时，您忘记删除的 didFinishLaunchingWithOptions 中有冲突的代码。确保该函数只有您想要的语句。

例如，下面的代码将背景设置为白色。无论您在情节提要中添加什么内容，您仍然会看到全白。

```
 - (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:       (NSDictionary *)launchOptions
    {
      self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
      // Override point for customization after application launch.
      self.window.backgroundColor = [UIColor whiteColor];
      [self.window makeKeyAndVisible];
      return YES;
    } 
```

将其更改为：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    return YES;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-30T20:47:55.163

在模拟器中卸载应用程序，然后转到产品>>清洁。这对我有用。

# ms-access - 访问报告提示查询两次

> ID：10744234
> 
> 赞同：1
> 
> 时间：2012-05-24T19:43:01.413
> 
> 标签：ms-access, querying

我正在开发一个包含文本部分和图形部分的报告。报告的两个部分都是使用相同的查询创建的。不幸的是，我在运行报告时被提示两次，如果我想打印它，第三次被提示。当查询运行时，它使用条件 [输入 ID 号：] 作为字段之一。

如何将报告更改为只提示一次？如果需要，我很乐意提供更多信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T19:48:43.967

在大多数情况下，最好使用小表单来为报表提供参数。您可以更好地控制并提示用户，参数只需输入一次。

# java - Logback 在 OSGi 容器中包含片段

> ID：10744235
> 
> 赞同：0
> 
> 时间：2012-05-24T19:43:02.287
> 
> 标签：java, osgi, logback, equinox, pax-runner

我有一个`a-conf`带有`src/main/resources/logback/conf/a/CommonAppenders.xml`文件的项目：

```
<included>
    <appender name="FILE" class="FileAppender" />
</included> 
```

我还有另一个`a-runable`带有`logback.xml`配置的项目导入`CommonAppenders.xml`：

```
<configuration>
    <!-- this is classpath import -->
    <include resource="logback/conf/a/CommonAppenders.xml" />
    ...
</configuration> 
```

我可以`a-runable`在包含所有依赖项（是其中之一）的独立 jar中编译，也可以`a-conf`作为 OSGi 包编译。当我运行独立应用程序时，一切正常 - 日志文件显示为`CommonAppenders.xml`. 但是当我运行 OSGi 容器时，不会创建任何日志文件。我认为 logback 不能包含来自类路径的资源，因为 OSGi 容器中的每个包都有自己的类加载器（logback 用于`ClassLoader.getResource()`包含文件）。

我已经签`Export-Package: logback.conf.a`入`a-conf.jar/META-INF/MANIFEST.MF`（这是由 maven bundlor 插件完成的） - 没关系。添加`Import-Package: logback.conf.a`到`a-runable`没有效果。

我不知道我能做什么（没有要更改的代码，只是配置）。欢迎任何帮助。

PS我在[这里](https://stackoverflow.com/questions/4031731/logback-in-spring-osgi-with-pax-runner)发现了类似的问题，但`logback.xml`已经在类路径中并且它自己的附加程序工作正常。`FileNotFoundException`此外，我在现有日志中没有任何s。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T01:10:28.000

默认情况下，如果您不配置侦听器，我相信 Logback 的启动错误会被简单地删除（但我可能记错了）。关键可能是 a-conf 需要是包含 logback.jar 的 bundle 的 Fragment。这就是我为包含一些自制附加程序的捆绑包所做的。

如果您想查看预先配置 Logback 以将其启动错误输出到 OSGi 容器的设置，请查看 Pax-Logger 1.7 - [https://github.com/ops4j/org.ops4j.pax.logging/树/master/pax-logging-logback](https://github.com/ops4j/org.ops4j.pax.logging/tree/master/pax-logging-logback)

# c# - C# 公共静态方法 - 在用户之间共享信息

> ID：10744236
> 
> 赞同：1
> 
> 时间：2012-05-24T19:43:12.747
> 
> 标签：c#, static

我有一个 asp.net 网站和一个类库作为项目参考。在类库中，我有公共类几个静态方法。当用户登录他们的帐户时，我会调用其中一种静态方法来加载与用户相关的信息。我有一些例子，当我以用户 A 身份登录时，我能够看到与用户 B 相关的信息。这是因为静态方法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-24T19:44:58.883

不，这是因为静态*变量*。这些是由整体共享的`AppDomain`——在这种情况下，这几乎意味着“那台机器上的整个网站”。

如果没有更多信息，很难确切知道您应该做什么，但我强烈怀疑您只是将用户信息存储在静态变量中，这*永远不会*是正确的方法。

管理用户会话的方式完全取决于您，毫无疑问，已经为此编写了大量文本 - 但使用静态变量将导致您所看到的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T19:51:22.707

那可能是，我必须查看您的代码才能确定，信息是否也存储为静态数据？那么它是正确的，因为静态是在实例之间共享的

# asp.net-mvc-3 - 将模型数据绑定到淘汰视图模型？

> ID：10744239
> 
> 赞同：1
> 
> 时间：2012-05-24T19:43:18.260
> 
> 标签：asp.net-mvc-3, knockout.js

是否可以将模型中的数据绑定到淘汰视图模型。这是一个例子：

```
public ActionResult Edit(int id)
{
    Product product = _db.Products.FirstOrDefault(x=>x.ItemId == id);
    return View(product);
} 
```

然后在视图中，我传统上会这样做：

```
@model myApp.Models.Product

@using(Html.BeginForm())
{
    @Html.EditorFor(x=>x.ItemName)
    @Html.ValidationMessageFor(x=>x.ItemName)

    <input type="submit" value="Update" />
} 
```

但是使用 Knockout 我会创建一个`EditProductViewModel`我会做类似的事情的地方：

```
var EditProductViewModel = {
    ItemName = ko.observable('')
};

EditProductViewModel.Edit = function() {
    $.ajax({
        url: "Home/Edit",
        data: ko.ToJson(this),
        success: function() {
            // do something
        }
    });  
};

$(function() {
    ko.applyBindings(EditProductViewModel);
}); 
```

而不是使用 Html Helpers 在我看来，我会做类似的事情：

```
<form data-bind="submit: Edit">
    <input type="text" data-bind="value: ItemName" />
    <input type="submit" value="Update" />
</form> 
```

那么如何使用从控制器返回的数据来填充它呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T20:35:23.583

使用淘汰赛时，您有两种方法可以做到这一点。1\. 在一个视图中加载您的文本框等。在第一次加载该视图时，在初始加载时将您的模型转换为 JSON 以供淘汰赛使用。

所有额外的调用都通过 JSON 进行。

您可以在视图中使用： `@Html.Raw(Json.Encode(yourModel))`

1.  在您的视图中加载您的文本框（即它们是您的视图的一部分）触发 document.ready() 您的 ajax 调用以从您的控制器获取您的数据，转换为 JSON 即`return Json(yourModel, JsonRequestBehavior.AllowGet)`并大致绑定这些结果，就像您已经在上面所做的那样

注意 - 这种方法的缺点是验证。如果你有所有客户端验证，那么这没关系，因为 data-* 的属性将由 MVC 写出到你的文本框等。如果你有任何服务器端验证，这里没有内置的“平滑”集成与淘汰赛。

这里有一篇不错的文章：http: [//www.codeproject.com/Articles/305308/MVC-Techniques-with-JQuery-JSON-Knockout-and-Cshar](http://www.codeproject.com/Articles/305308/MVC-Techniques-with-JQuery-JSON-Knockout-and-Cshar) 但仍然缺少服务器端验证提及。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T20:01:15.477

我没有任何淘汰赛的经验，但在我看来，您不再希望从控制器返回视图怎么样

```
return JSON(product) 
```

这样，您将在您的 javascript 成功函数上获得产品的 json 元素，您需要收集 json 元素

```
$.ajax({
    url: "Home/Edit",
    data: ko.ToJson(this),
    success: function(data) {
        // map to knockout view model
    }
}); 
```

然后从这里你会调用地图绑定。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T09:00:43.073

您可以将数据序列化到您的页面，然后使用来自服务器的值初始化淘汰视图模型。

```
ItemName = ko.observable(serializedModel.ItemName); 
```

# java - 从 Prefuse 图中删除节点

> ID：10744240
> 
> 赞同：1
> 
> 时间：2012-05-24T19:43:19.500
> 
> 标签：java, graph, prefuse

我正在尝试创建一个动态更新的 Prefuse 图，其中定期添加和删除节点。我已经能够很好地添加节点和边，然后删除它们，但是当我尝试将边添加到下一组节点时出现异常。有谁知道从 Prefuse 图中删除节点的任何陷阱？或者，有谁知道动态与 Prefuse 图交互的更好方法？

（请注意，显示更新正常；显示似乎始终与图形的内容匹配。这不是[Prefuse Toolkit 的欺骗：动态添加节点和边](https://stackoverflow.com/questions/502763/prefuse-toolkit-dynamically-adding-nodes-and-edges)）

代码摘录：

```
// Set up edge and node tables
Schema node_schema = new Schema();
Schema edge_schema = new Schema();
node_schema.addColumn("node_info", NodeInfo.class);
edge_schema.addColumn("source", int.class, 0);
edge_schema.addColumn("target", int.class, 0);
edge_schema.addColumn("edge_info", EdgeInfo.class);
graph_nodes = node_schema.instantiate();
graph_edges = edge_schema.instantiate();

...

// Set up visualization
graph = new Graph(graph_nodes, graph_edges, false);
vis_panel = new MyVisPanel(graph);

...

// Add nodes & edges
int new_node_1 = graph_nodes.addRow();
graph_nodes.set(new_node_1, "node_info", new NodeInfo());
int new_node_2 = graph_nodes.addRow();
graph_nodes.set(new_node_2, "node_info", new NodeInfo());
int new_edge = graph_edges.addRow();
graph_edges.set(new_edge, "target", new_node_1);
graph_edges.set(new_edge, "source", new_node_2);

... 

// Remove nodes
TupleSet nodes = graph.getNodes();
Iterator iter = nodes.tuples(my_predicate);
while(iter.hasNext())
{
    int row_to_delete = ((Tuple) iter.next()).getRow();
    if(graph.removeNode(row_to_delete))
    {
        System.out.println("Removed row " + row_to_delete);
    }
}

...

// Add nodes & edges again
int new_node_1 = graph_nodes.addRow();
graph_nodes.set(new_node_1, "node_info", new NodeInfo());
int new_node_2 = graph_nodes.addRow();
graph_nodes.set(new_node_2, "node_info", new NodeInfo());
int new_edge = graph_edges.addRow(); // <<-- Exception is thrown here
graph_edges.set(new_edge, "target", new_node_1);
graph_edges.set(new_edge, "source", new_node_2); 
```

我得到的例外是：

```
java.lang.IllegalArgumentException: Row index out of bounds: -1
    at prefuse.data.column.IntColumn.getInt(Unknown Source)
    at prefuse.data.Table.getInt(Unknown Source)
    at prefuse.data.Graph.updateDegrees(Unknown Source)
    at prefuse.data.Graph.updateDegrees(Unknown Source)
    at prefuse.data.Graph$Listener.tableChanged(Unknown Source)
    at prefuse.data.Table.fireTableEvent(Unknown Source)
    at prefuse.data.Table.addRow(Unknown Source)
    at my_pkg.addSomeNodesFunction(my_code.java:99) 
```

我没有使用标准的 Graph.addNode() 和 addEdge() 方法，因为这样设置边缘信息似乎更难。（如果有更好的方法，请告诉我！）删除成功，在那个 graph.getNodeCount() 和 graph.getEdgeCount() 删除节点后返回较小的数字。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T13:05:31.953

经过更多调查，这似乎是 prefuse 中的一个小错误。对 addEdge 的调用首先将源和目标节点编号初始化为 0，然后图尝试更新其度数，如果节点 0 不存在，则更新失败。有关详细信息，请参阅其 SF 页面上的错误报告[3529747 。](https://sourceforge.net/tracker/?func=detail&aid=3529747&group_id=98962&atid=622645)

# jquery - jQuery 事件：通知新创建的元素过去的事件

> ID：10744242
> 
> 赞同：0
> 
> 时间：2012-05-24T19:43:24.753
> 
> 标签：jquery, event-handling

代码示例：

```
var Events = $({});

Events.on('myCustomEvent', function(){ console.log('myCustomEvent 1') })

Events.trigger('myCustomEvent'); // I want notify the previous binds and all binds in future

$.ajax({...}).success(function(res){
    Events.on('myCustomEvent', function(){ console.log('myCustomEvent 2') })
});

// when ajax or other long process will be finished 'myCustomEvent' must be fired 
```

'myCustomEvent 1' 将被打印，因为它在触发器之前绑定将被调用并且 'myCustomEvent 2' 也必须被触发

jQuery中有什么解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T16:46:14.223

我认为解决方案是 $.Callbacks

```
Callbacks.highlight = $.Callbacks('memory')

// ComponentB
$(window).hashchange(function(){

    $.ajax({ /* load items of #ListB */ }).success(function(data){

        /* append items to dom */

        if (/listA=123/.test(location.hash))
            Callbacks.highlight.fire();
    })

    $('#ListB').on('click', 'a', function(){ /* highlight the same in #ListA by alg2 */ })
})

// ComponentA
$(window).hashchange(function(){

    $.ajax({ /* load items of #ListA */ }).success(function(data){

        /* append items to dom */
        Callbacks.highlight.add( /* highlight item */ )
    })

    $('#ListA').on('click', 'a', function(){ /* highlight the same in #ListB by alg1 */ })
}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T20:50:47.427

看起来你想要的不是很多事件，而是一个发布/订阅系统，或者实现观察者模式的代码。这些实现中的大多数都没有能力在消息发布后追溯呼叫订阅者。我已经做到了，但是您需要小心，使用该系统的任何人都知道一条消息可能会被多次发布。不幸的是，我无法分享代码，因为它归我的雇主所有。

只需搜索“JavaScript 中的观察者模式”或“JavaScript 中的 pubsub”即可获得一个很好的库。通常，这些使用“主题”的散列到发布该主题时调用的函数数组。诀窍是还保留调用发布时间的历史记录。当有人订阅已经发布的主题时，重新发布该主题。

希望这足以让你开始。

# c# - 存储过程中 EXISTS 子句的参数

> ID：10744245
> 
> 赞同：1
> 
> 时间：2012-05-24T19:43:30.043
> 
> 标签：c#, sql-server, stored-procedures

我有一张桌子`DEPT`，里面有 2 列 - `ID, NAME`。

搜索表单显示了`DEPT`表格中的 ID，用户可以选择任意数量的 ID 并提交表单，以获取相关的`NAMEs`.

澄清/输入：

*   我不想构建动态查询 - 它不可管理。
*   我更喜欢使用表值参数的存储过程

还有其他解决方案吗？

注意：
这个例子很简单，只有 1 个表 - 在现实生活中，我必须处理 6 个以上的表！

感谢您的任何建议

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-24T20:21:52.363

```
CREATE TYPE dbo.DeptList
AS TABLE
(
  ID INT
);
GO

CREATE PROCEDURE dbo.RetrieveDepartments
  @dept_list AS dbo.DeptList READONLY
AS
BEGIN
  SET NOCOUNT ON;

  SELECT Name FROM dbo.table1 WHERE ID IN (SELECT ID FROM @dept)
  UNION ALL 
  SELECT Name FROM dbo.table2 WHERE ID IN (SELECT ID FROM @dept)
  -- ...
END
GO 
```

现在在您的 C# 代码中，创建一个 DataTable，用 ID 填充它，并将其传递给存储过程。假设您已经有一个名为 tempList 的列表，并且 ID 存储在 id 中：

```
DataTable tvp = new DataTable();
tvp.Columns.Add(new DataColumn("ID"));

foreach(var item in tempList)
{ 
    tvp.Rows.Add(item.id); 
}

using (connObject)
{
    SqlCommand cmd = new SqlCommand("StoredProcedure", connObject);
    cmd.CommandType = CommandType.StoredProcedure;
    SqlParameter tvparam = cmd.Parameters.AddWithValue("@dept_list", tvp);
    tvparam.SqlDbType = SqlDbType.Structured;
    ...
} 
```

您还可以使用拆分功能。许多存在，如果你能保证输入是安全的（没有<，>，&等），这是我喜欢的一个：

```
CREATE FUNCTION dbo.SplitInts_XML
(
   @List       VARCHAR(MAX),
   @Delimiter  CHAR(1)
)
RETURNS TABLE
AS
   RETURN 
   (  
      SELECT Item = y.i.value('(./text())[1]', 'int')
      FROM 
      ( 
        SELECT x = CONVERT(XML, '<i>' 
        + REPLACE(@List, @Delimiter, '</i><i>') + '</i>').query('.')
      ) AS a 
      CROSS APPLY x.nodes('i') AS y(i)
   );
GO 
```

现在您的程序可以是：

```
CREATE PROCEDURE dbo.RetrieveDepartments
  @dept_list VARCHAR(MAX)
AS
BEGIN
  SET NOCOUNT ON;

  ;WITH d AS (SELECT ID = Item FROM dbo.SplitInts(@dept_list, ','))
  SELECT Name FROM dbo.table1 WHERE ID IN (SELECT ID FROM d)
  UNION ALL
  SELECT Name FROM dbo.table2 WHERE ID IN (SELECT ID FROM d)
  -- ...
END
GO 
```

# c - 在 Cygwin 上创建核心转储

> ID：10744246
> 
> 赞同：7
> 
> 时间：2012-05-24T19:43:31.053
> 
> 标签：c, debugging, cygwin, coredump

我需要在 cygwin 中启用核心转储。我用过`ulimit -c unlimited`，但是当我要调试的程序崩溃时，目录中仍然没有coredump。这实际上是启用核心转储的正确方法吗？那么我在哪里可以找到转储？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-05-25T18:25:21.497

这应该有效。你用的是什么外壳？

不要忘记转储没有命名为“核心”......而是在带有 Cygwin 的 Windows 机器上，它可能会被命名为“mybadprog.exe.stackdump”

# php - PHP获取中间时间间隔

> ID：10744248
> 
> 赞同：1
> 
> 时间：2012-05-24T19:43:45.890
> 
> 标签：php, date, time

我开发了一个函数来在用户生成的时间范围内获得相等的时间间隔。

```
$start         = strtotime("12:00");    //start at...
$end           = strtotime("18:00");    //end at...
$timeframe     = $end - $start;         //time-frame    
$intervals     = 3;                     //number of intervals within time-frame
$interval_time = $timeframe/$intervals; //time of each interval

for($i = 0, $start; 
    $i < $intervals; 
    $i++, $start = strtotime("+$interval_time seconds", $start)) //increment time
    { 
        $new_time = date('H:i:s a', $start); 
        echo "$new_time \n"; 
    } 
```

上面的代码输出

```
 12:00:00 pm 14:00:00 pm 16:00:00 pm 
```

我可以合并什么代码来划分每个间隔并获得中间？例如从上面的代码中获取

```
13:00:00 pm 15:00:00 pm 17:00:00 pm 
```

请多多指教：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T20:59:48.340

将`for`循环替换为：

```
$half_interval = $interval_time / 2;
$mid = $start + $half_interval;
for ( $i = 1; $i < $intervals; $i ++) {
    echo date('H:i:s a', $mid) . " \n";
    $mid += $interval_time;
}
echo date('H:i:s a', $mid) . " \n"; 
```

诚然，一种简单的方法。我确信改进是可能的，但把它们留给读者练习吧！;-)

# php - 如何解决基于 IP 的投票？

> ID：10744249
> 
> 赞同：0
> 
> 时间：2012-05-24T19:44:03.160
> 
> 标签：php

我有基于 IP 的投票代码，但问题是当我从我的计算机（使用同一网络连接到互联网）投票时，我不能！

这是代码：

```
global $wpdb;
$post_ID = $_POST['id'];
$ip = $_SERVER['REMOTE_ADDR'];
$irt_textOnclick = get_option('irt_textOnclick');
$recommend = get_post_meta($post_ID, '_recommended', true);

if($post_ID != '') {
    $voteStatusByIp = $wpdb->get_var("SELECT COUNT(*) FROM ".$wpdb->prefix."irecommendthis_votes WHERE post_id = '$post_ID' AND ip = '$ip'");

    if (!isset($_COOKIE['recommended-'.$post_ID]) && $voteStatusByIp == 0) {
        $recommendNew = $recommend + 1;
        update_post_meta($post_ID, '_recommended', $recommendNew);

        setcookie('recommended-'.$post_ID, time(), time()+3600*24*365, '/');
        $wpdb->query("INSERT INTO ".$wpdb->prefix."irecommendthis_votes VALUES ('', NOW(), '$post_ID', '$ip')");

        $return_text = $recommendNew . ' ' . $irt_textOnclick;
        echo $return_text; //$recommendNew; // 
    }
    else {
        $return_text = $recommend . ' ' . $irt_textOnclick;
        echo $return_text; //$recommendNew; //  
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T04:51:51.610

如果您同时使用 cookie 和 IP 检查来防止多次投票，则不能对共享同一 IP 地址的计算机进行多次投票。这将阻止同一网络中的其他用户进行投票，因为您将被视为拥有一个 IP 地址。

# java - 确定用户的首选语言

> ID：10744250
> 
> 赞同：0
> 
> 时间：2012-05-24T19:44:17.410
> 
> 标签：java, servlets

我有一个网站，用户应该可以使用英语和瑞典语。我的问题是：我如何决定向用户显示什么语言（以及什么数字格式等）。

该接口`javax.servlet.ServletRequest`定义了该方法`getLocale()`，并表示它将根据`Accept-language`HTTP 请求中的标头返回语言环境。但这意味着，如果使用德语浏览器的人访问我的网站，则该`Locale`对象将是德国人。而且由于我的网站不支持德语，因此请求中的语言环境与我的任何语言文件都不匹配。

有没有办法配置它，还是我需要覆盖该`getLocale()`方法的功能才能做到这一点？

用于确定向用户显示哪种语言的正确方法是`getLocale()`正确的方法，还是应该用于其他目的的方法？

需要明确的是，我想要的是：如果我的网站支持浏览器提供的语言环境，则使用该语言环境。否则，为我的网站使用默认的（英文）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T20:24:46.550

该`getLocale()`方法是正确的，但没有必要扩展它。Java 的正常[国际化支持](http://java.sun.com/developer/technicalArticles/J2SE/locale/)已经以一种更简单、更简洁的方式为您提供了您想要的行为。

例如，假设您提供以下语言文件：

*   MyStrings.properties
*   MyStrings_sv_SE.properties

第一个文件有您的英文文本，第二个文件有您的瑞典语文本。如果语言环境是瑞典，将使用瑞典语文件；否则将使用没有语言扩展名的文件。

要检索您的文本，您可以执行以下操作：

```
ResourceBundle strings = ResourceBundle.getBundle("MyStrings");
String hello = strings.getString("HELLO_USER"); 
```

# ios - 如何通过 iOS 处理捐款？

> ID：10744252
> 
> 赞同：21
> 
> 时间：2012-05-24T19:44:25.267
> 
> 标签：ios, donations

我和我的团队将为一个组织编写一个应用程序，用户可以向该组织捐款。应用程序本身不是问题，但我们真的不知道如何处理这个问题。

我们的第一个想法是，我们可以像您在游戏中用真钱购买物品一样进行捐赠。但是有2个问题：

1.  只有固定金额，如 99c 等
2.  苹果得到 30%，我们希望用户知道谁得到了多少。开发人员：10%，组织 90%。但是，如果苹果公司获得了所有资金的 30%，而人们看到了这一点，他们可能不会因此而捐款。我也不会。

我们的第二个想法是，我们在我们的应用程序中实现了一个 webthingy（不知道元素如何被称为 atm），它就像 Safari 一样简单地工作，我们将它们引导到捐赠页面或其他东西，但是组织如何知道捐赠那么来自我们的应用程序吗？

我们还有其他方法可以处理吗？我认为人们将能够通过信用卡和 PayPal 捐款。

编辑，我发现了这个：

> 21.1 可以向公认的慈善组织捐款的应用程序必须是免费的
> 
> 21.2 募捐必须通过 Safari 中的网站或短信进行

该应用程序将是免费的，如果它必须通过 SMS 或 Safari 进行也可以，但该组织如何知道收到的捐款来自该应用程序？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-25T06:39:00.560

更新：

[美国非营利组织可以通过 Apple Pay 接受捐款](https://developer.apple.com/support/apple-pay-nonprofits/)：

> 从 2016 年 11 月 14 日开始，美国的非营利组织可以使用 Apple Pay 提供一种简单而安全的方式来接受来自其应用程序和网站的捐款。与使用 Apple Pay 购买商品和服务类似，用户无需输入账单、运费或联系方式即可捐款。

[App Store 指南](https://developer.apple.com/app-store/review/guidelines/)继续说：

> 可接受
> 
> ...
> 
> 经批准的非营利组织可以直接在他们自己的应用程序或第三方应用程序中筹款，前提是这些筹款活动遵守所有应用审查指南并提供 Apple Pay 支持。这些应用程序必须披露资金的使用方式，遵守所有必要的地方和联邦法律，并确保捐赠者可以获得适当的税收收据。应根据要求向 App Review 提供附加信息。将捐赠者与其他非营利组织联系起来的非营利平台必须确保应用程序中列出的每个非营利组织也都经过了非营利组织的批准程序。详细了解如何成为经批准的非营利组织。
> 
> 不可接受
> 
> ...
> 
> 除非您是经批准的非营利组织或上述第 3.2.1 (vi) 节另有允许，否则在应用程序内为慈善机构和筹款活动筹集资金。为此类原因寻求筹集资金的应用程序必须在 App Store 上免费，并且只能在应用程序之外筹集资金，例如通过 Safari 或 SMS。

下面我的旧答案早于慈善捐赠政策的修订。

* * *

正如您所注意到的，[App Store Review Guidelines](https://developer.apple.com/app-store/review/guidelines/)第 21 节说：

> 21.慈善和捐款
> 
> 21.1 可以向公认的慈善组织捐款的应用程序必须是免费的
> 
> 21.2 募捐必须通过 Safari 中的网站或短信进行

你问你如何知道它们是否来自你的应用程序：对于 Safari，使用唯一的 URL 或包含一个 HTTP 参数，当你调用 Safari 时附加到 URL 中，它们的 Web 服务器代码将捕获这些参数。正如其他人所建议的那样，您可能也希望出于自己的对账目的记录事务的启动。对于 SMS，我假设您有一个专用的 SMS 号码用于应用程序捐赠。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-24T20:24:53.937

> 但是该组织如何知道来自应用程序的捐款？

1.  在组织的网站上创建一个新页面，该页面的 URL 未链接到任何地方，并且搜索引擎 (robots.txt) 无法对其进行索引。
2.  在您的应用程序中，将 UIWebView 设置为您自己的服务器上的 URL，该 URL 将重定向到您在步骤 1 中创建的页面。您还应该使此 URL 不可索引。

在那个页面

1.  检查推荐人是否是您的页面
2.  检查用户代理是否是 UIWebView 发送的任何内容
3.  让页面记录某处发生的任何事情（日期/时间、捐赠金额等）——以与他们的数据核对
4.  成功捐赠后，它应该记录它来自此页面（因此，您的应用程序）

有人*可以*通过提出适当的请求来假装他们使用了您的应用程序，但他们为什么会这样做。即使他们这样做了，你也应该得到这笔捐款的功劳。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-24T20:36:40.793

据我所知，您不能将 IAP 用于任何未在应用程序中消费的虚拟商品，如果您尝试，Apple 将拒绝您的应用程序。（但我似乎有一些例外）

试试 www.stripe.com，他们有我目前看来最好的支付界面。

有人甚至制作了一个 iOS SDK 来帮助您实现[https://github.com/briancollins/stripe-ios](https://github.com/briancollins/stripe-ios)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-24T20:07:48.280

我不相信 Apple 会允许您使用应用内购买来接受捐款。Marco 用他的 Instapaper 应用程序对此进行了调查，但无法做到（现在他对服务器搜索收费）。你实际上必须为钱提供一些东西。最好的办法是开发一个使用私有 api 来处理捐赠的网络应用程序。这样您就可以确定捐款的来源。

啊，没关系，您可以在免费应用程序上接受捐赠。错过了。不过，在 Web 应用程序中使用私有 api 可能是您最好的选择。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-04-20T07:36:14.627

从 2020 年 4 月起，您将无法在应用内捐款。Apple 团队表示，如果您是非营利组织，则不能在 IOS 应用程序内捐款。您必须将用户重定向到 Safari 或在您的网站上进行捐赠或使用 SMS 进行捐赠。

否则，如果您是盈利组织，您可以像在 App Purchase 中一样使用 Apple Pay 进行捐赠

soo 如果您是非营利组织并且想捐款，请按照以下步骤操作。我正在使用 Flutterwave SKD 进行捐赠。您可以随意使用 Stripe 和 PayPal 等。

1：我正在使用 Flutterwave Php SDK 进行捐赠。只需从支付网关 DOC 下载支付网关的 PHP SDK。

2：在您的网页端创建一个支付网页，并从您的应用程序打开该网页进入Safari，并通过URL参数传递用户ID，以便您记录哪个用户向我们捐赠以及捐赠了多少。喜欢 (PageWebUrl/userID) ( [https://www.mywebPageLink.com/donation/userId=20](https://www.mywebPageLink.com/donation/userId=20) )

3：当用户成功捐赠时，将数据保存到该用户 ID 并将用户重定向到您的应用程序。

4：调用 API 为您的应用检索捐赠数据。

酷酷的完成...

# java - 私有和公共 Java 访问修饰符基础知识

> ID：10744256
> 
> 赞同：2
> 
> 时间：2012-05-24T19:44:50.010
> 
> 标签：java

我对 java 比较陌生，我读过一些关于私有和公共访问修饰符的文章。我想一劳永逸地消除这个话题中的任何混淆，因为我觉得我对它没有最好的把握。

**变量中的访问修饰符**

如果我错了，请纠正我，一个变量默认是公共的。如果访问修饰符设置为 public 或根本没有设置，那么来自同一项目的其他类可以访问整数和/或修改它。如果它是私有的，那么它对外部是不可见的，并且不能被创建它的类之外的类访问。

**类中的访问修饰符**

类中的访问修饰符，我似乎并不完全理解。据我了解，如果我从不在同一个类中的方法调用私有方法，那么它将不起作用。如果它是公开的，它会吗？

有什么我遗漏或不正确理解的吗？

我感谢在这方面的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T19:48:14.590

> 如果我错了，请纠正我，一个变量默认是公共的。

你错了。假设您的意思是字段，默认情况下，它们具有“包”访问权限，无法明确表达。*局部*变量没有访问控制的概念——它们只存在于方法的上下文中，因此不能从其他任何地方引用。

> 如果访问修饰符设置为 public 或根本没有设置，那么来自同一项目的其他类可以访问整数和/或修改它。

如果它被设置为公开，那么*任何*代码都可以访问它。

如果它是默认（包）访问，则同一包中的任何代码都可以访问它。

> 类中的访问修饰符，我似乎并不完全理解。据我了解，如果我从不在同一个类中的方法调用私有方法，那么它将不起作用。如果它是公开的，它会吗？

这是非常正确的，是的。

我建议您阅读[有关所有这些的 Java 教程](http://docs.oracle.com/javase/tutorial/java/javaOO/accesscontrol.html)，并查阅[语言规范第 6.6 节](http://docs.oracle.com/javase/specs/jls/se7/html/jls-6.html#jls-6.6)了解更多详细信息。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-24T19:50:57.640

[这是](http://docs.oracle.com/javase/tutorial/java/javaOO/accesscontrol.html)关于这个主题的一个很好的文档。

有四个访问级别：

1.  private：只有那个类（甚至没有后代）可以访问。
2.  protected：只有该类及其后代和同一个包中的类可以访问。
3.  包私有（无说明符）——只有同一个包中的类可以访问——即使不在同一个包中的子类也不能。
4.  public：一切都可以访问。

对于类成员变量和方法，默认访问是包私有。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-24T19:50:14.420

您可以在 Oracles 网站上找到有关 4 个修饰符的[信息。](http://docs.oracle.com/javase/tutorial/java/javaOO/accesscontrol.html)

如果不指定修饰符，则称为默认，这意味着只有同一个包中的任何代码都可以访问它。

如果它被设置为公开，那么任何包中的任何代码都可以访问它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-24T19:50:25.443

实际上在 Java 中有四种不同的访问修饰符，私有的、公共的、受保护的和特定于包的。“如果我错了，请纠正我，默认情况下变量是公共的” - 你错了，如果没有以不同方式声明的变量具有与包相关的访问权限。如果它设置为公共，那么即使在原始包之外，它也可以被其他类修改。这个网站 - [http://javapapers.com/core-java/access-modifiers-in-java-explain/](http://javapapers.com/core-java/access-modifiers-in-java-explain/) - 可以为您提供有用的提示。实际上，一旦您阅读更多有关 OO 概念（例如封装）的内容，这将非常容易。然后您将了解访问修饰符的用途（以确保数据完整性）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-04-21T05:49:36.057

Java 提供了许多访问修饰符来设置类、变量、方法和构造函数的访问级别。四个访问级别是：

默认值：对包可见。不需要修饰符。

Private ：仅对班级可见。

公开：对世界可见。所有类和包。

Protected ：对包和所有子类可见。

如果程序员没有指定访问修饰符，则使用默认访问修饰符。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-04-21T05:15:33.840

**访问修饰符：**

*   公开 - {可以访问项目中的任何位置}

    Private - {只能在班级内访问}

    受保护 - {可以在包和子类中访问}

    默认 - {可以在包内访问}

**非访问修饰符：**

*   静态 - {用于创建类变量和方法}

    Final - {用于创建最终的类、变量和方法}

    Abstract - {用于创建抽象方法和类}

    同步 - {用于线程}

要了解更多信息，请点击此[链接](http://vhariprasath.blogspot.in/2014/04/modifiers-in-java.html)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-08-17T10:49:41.723

**私有和公共 java 访问说明符**。*在 java 中*，私有访问说明符指定访问。

> private 就像自己的家庭财产，只能使用属于哪个家庭。这意味着在类内部，方法和变量可以使用

.

> 公共就像政府财产，这意味着每个人都可以访问这些财产而无需任何代币

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-08-17T10:08:28.127

私有和公共java访问说明符。在java中，私有访问说明符指定访问。私有就像自己的家庭财产，只能使用属于哪个家庭。这意味着在类内部，方法和变量可以使用。公共就像政府财产，这意味着每个人都可以访问这些财产而无需任何代币

# ios - UIPopover 如何使用这样的按钮制作弹出框？

> ID：10744260
> 
> 赞同：19
> 
> 时间：2012-05-24T19:45:24.780
> 
> 标签：ios, ipad, uipopovercontroller, uiactionsheet, uialertcontroller

![在此处输入图像描述](../Images/bcab442148a6943b6992eb7d9777e478.png)

我想知道如何使用这样的按钮创建一个弹出框。

回答：

```
UIActionSheet * actionSheet = [[UIActionSheet alloc] initWithTitle: nil 
                                                          delegate: self
                                                 cancelButtonTitle: nil 
                                            destructiveButtonTitle: nil 
                                                 otherButtonTitles: @"Take Photo",
                                                                    @"Choose Existing Photo", nil];

[actionSheet showFromRect: button.frame inView: button.superview animated: YES]; 
```

在您的委托对象类中的其他地方......

```
-(void)actionSheet:(UIActionSheet *)actionSheet clickedButtonAtIndex:(NSInteger)buttonIndex {
    if (buttonIndex == 0) {
         // take photo...
    } 
    else if (buttonIndex == 1) {
         // choose existing photo...
    }
} 
```

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-05-24T19:56:13.307

这是一个`UIActionSheet`. 在 iPhone 上，它从底部动画。在 iPad 上，它出现在弹出窗口中。

假设您在按下按钮时执行此操作：

```
UIActionSheet * actionSheet = [[UIActionSheet alloc] initWithTitle: nil 
                                                          delegate: self
                                                 cancelButtonTitle: nil 
                                            destructiveButtonTitle: nil 
                                                 otherButtonTitles: @"Take Photo",
                                                                    @"Choose Existing Photo", nil];

[actionSheet showFromRect: button.frame inView: button.superview animated: YES]; 
```

* * *

在 iOS8+ 中，您应该使用新`UIAlertController`类：

```
UIAlertController * alertController = [UIAlertController alertControllerWithTitle: nil
                                                                          message: nil
                                                                   preferredStyle: UIAlertControllerStyleActionSheet];
[alertController addAction: [UIAlertAction actionWithTitle: @"Take Photo" style: UIAlertActionStyleDefault handler:^(UIAlertAction *action) {
    // Handle Take Photo here
}]];
[alertController addAction: [UIAlertAction actionWithTitle: @"Choose Existing Photo" style: UIAlertActionStyleDefault handler:^(UIAlertAction *action) {
    // Handle Choose Existing Photo here
}]];

alertController.modalPresentationStyle = UIModalPresentationPopover;

UIPopoverPresentationController * popover = alertController.popoverPresentationController;
popover.permittedArrowDirections = UIPopoverArrowDirectionUp;
popover.sourceView = sender;
popover.sourceRect = sender.bounds;

[self presentViewController: alertController animated: YES completion: nil]; 
```

* * *

*或在斯威夫特*

```
let alertController = UIAlertController(title: nil, message: nil, preferredStyle: .ActionSheet)
alertController.addAction(UIAlertAction(title: "Take Photo", style: .Default, handler: { alertAction in
    // Handle Take Photo here
    }))
alertController.addAction(UIAlertAction(title: "Choose Existing Photo", style: .Default, handler: { alertAction in
    // Handle Choose Existing Photo
    }))
alertController.modalPresentationStyle = .Popover

let popover = alertController.popoverPresentationController!
popover.permittedArrowDirections = .Up
popover.sourceView = sender
popover.sourceRect = sender.bounds

presentViewController(alertController, animated: true, completion: nil) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T07:00:56.590

与其他响应类似，但相比之下这很容易实现。

让您的班级使用**UIActionSheetDelegate。**

例子：

```
@interface ExampleViewController : UIViewController <UIActionSheetDelegate> 
```

然后添加到您的 ExampleViewController.mm/m

```
- (void)actionSheet:(UIActionSheet *)actionSheet clickedButtonAtIndex:(NSInteger)buttonIndex  { //Get the name of the current pressed button 
NSString *buttonTitle = [actionSheet buttonTitleAtIndex:buttonIndex]; 
if  ([buttonTitle isEqualToString:@"Remove"]) {
    NSLog(@"Remove this actionSheet"); } 
if ([buttonTitle isEqualToString:@"Button 1"]) {
    NSLog(@"Button 1 pressed"); } 
if ([buttonTitle isEqualToString:@"Button 2"]) {
    NSLog(@"Button 2 pressed"); }
if ([buttonTitle isEqualToString:@"Button 3"]) {
    NSLog(@"Button 3 pressed"); } 
if ([buttonTitle isEqualToString:@"Cancel"]) {
    NSLog(@"Cancel clicked (anywhere away from it)"); } } 
```

现在在按钮按下事件或您希望弹出的位置/时间调用以下命令：

```
 - (IBAction)aButtonPressed:(id)sender {
     NSString *actionSheetTitle = @"Action Sheet"; // Title 
     NSString *destroyTitle = @"Destroy"; // Button titles
     NSString *button1 = @"Button 1"; 
     NSString *button2 = @"Button 2";
     NSString *button3 = @"Button 3";
     NSString *cancelTitle = @"Cancel"; 
    UIActionSheet *actionSheet = [[UIActionSheet alloc]
                                  initWithTitle:actionSheetTitle
                                   delegate:self
                                   cancelButtonTitle:cancelTitle
                                   destructiveButtonTitle:destroyTitle
                                   otherButtonTitles:button1, button2, button3, nil]; [actionSheet showInView:self.view];
} 
```

以及有关此@的更多信息：http: **[//developer.apple.com/library/ios/#documentation/uikit/reference/UIActionSheet_Class/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIActionSheet_Class/Reference/Reference.html)**

# for-loop - for循环内的for循环？

> ID：10744261
> 
> 赞同：0
> 
> 时间：2012-05-24T19:45:26.777
> 
> 标签：for-loop, octave

我希望编写一个代码，它会给我一个 [5x5] 矩阵，其中包含每个步骤的“ec”值。但是在这里我只能返回它的最后一个值。请你帮助我好吗？

感谢您的关注

```
R = [0.13, 0.131, 0.132, 0.133, 0.134];
k = [1, 1.5, 2, 2.5, 3];
a = 3*60*6/1000;
for i=R
ec = 30 * (i*a + i*a*k/100)
endfor 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T20:11:13.633

看起来你想要类似的东西

```
ec = zeros(5);
R = [0.13, 0.131, 0.132, 0.133, 0.134];
k = [1, 1.5, 2, 2.5, 3];
a = 3*60*6/1000;
for i_=1:length(R)
    for j_=1:length(k)
        ec(i_,j_) = 30 * (R(i_)*a + R(i_)*a*k(j_)/100);
    end
end 
```

除非我对你的问题有误解。这应该返回一个 5x5 矩阵`ec`。

关于 for 循环的注意事项：您应该避免`i`用作计数器，因为它被预定义为等于 sqrt(-1)，如果您重新分配它，可能会出现问题。添加下划线可以避免这个问题。

# html - xslt 将 xml 转换为输出 html 的问题

> ID：10744262
> 
> 赞同：0
> 
> 时间：2012-05-24T19:45:37.723
> 
> 标签：html, xml, xslt, nodes

我正在尝试使用 XSLT 对 XML 进行简单的转换以生成 HTML，但我遇到了困难，我似乎无法弄清楚问题所在。这是我正在使用的 XML 示例：

```
<?xml version="1.0" encoding="UTF-8"?>
<?xml-stylesheet type="text/xsl" href="C:\Users\cgubata\Documents\Digital Measures\jcamp_fac_ex_xslt.xsl"?>
<Data xmlns="http://www.digitalmeasures.com/schema/data" xmlns:dmd="http://www.digitalmeasures.com/schema/data-metadata" dmd:date="2012-02-27">
<Record userId="310106" username="jcamp" termId="453" dmd:surveyId="1154523">
    <dmd:IndexEntry indexKey="COLLEGE" entryKey="School of Business" text="School of Business"/>
    <dmd:IndexEntry indexKey="DEPARTMENT" entryKey="Accountancy" text="Accountancy"/>
    <dmd:IndexEntry indexKey="DEPARTMENT" entryKey="MBA" text="MBA"/>
    <PCI id="11454808064" dmd:lastModified="2012-02-08T13:17:39">
        <PREFIX>Dr.</PREFIX>
        <FNAME>Julia</FNAME>
        <PFNAME/>
        <MNAME>M.</MNAME>
        <LNAME>Camp</LNAME>
        <SUFFIX/>
        <ALT_NAME>Julia M. Brennan</ALT_NAME>
        <ENDPOS/> 
```

我想要做的就是让一些节点的值以 HTML 显示。因此，例如，我可能希望 PREFIC、FNAME、LNAME 节点显示为“Dr. Julia Camp”（没有引号 - 我稍后会做样式）。这是我正在使用的 XSL：

```
<?xml version="1.0" encoding="utf-8"?><!-- DWXMLSource="jcamp_fac_ex.xml" -->
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:dmd="http://www.digitalmeasures.com/schema/data-metadata"> 
<xsl:output method="html" encoding="utf-8"/>
<xsl:template match="/">

<xsl:value-of select="/Data/Record/PCI/PREFIX"/>

</xsl:template>
</xsl:stylesheet> 
```

根据我的研究，这应该显示该 PREFIX 字段的值。但相反，它从所有节点输出所有值（因此，如果有 4000 个具有文本值的节点，我将在 HTML 中返回 4000 个值）。我的目标是从某些节点中提取值，我可能会将它们排列在一个表中。

如何从特定节点中提取值？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T22:46:13.683

恐怕您已经掉入了 XSLT 初学者的头号陷阱：我们在这个论坛上每天至少看到一次这个问题。您的元素位于命名空间中，并且您的样式表试图匹配没有命名空间中的节点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T20:51:18.780

好吧，我无法重现你的症状。当我测试您发布的内容时，它根本不会产生任何输出。这看起来是正确的，因为您的 xpath 正在测试错误的名称空间。您需要在 xslt 中为命名空间添加命名空间前缀映射`http://www.digitalmeasures.com/schema/data`，然后在`value-of`xpath 中使用它。像这样：

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet version="1.0" 
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform" 
  xmlns:dmd="http://www.digitalmeasures.com/schema/data-metadata"
  xmlns:dm="http://www.digitalmeasures.com/schema/data">
    <xsl:output method="html" encoding="utf-8"/>
    <xsl:template match="/">
        <xsl:value-of select="/dm:Data/dm:Record/dm:PCI/dm:PREFIX"/>
    </xsl:template>
</xsl:stylesheet> 
```

# java - 休眠会话在向导中过期

> ID：10744265
> 
> 赞同：0
> 
> 时间：2012-05-24T19:45:48.690
> 
> 标签：java, hibernate

我正在使用休眠构建一个向导。我想在向导开始时初始化会话并在向导结束时提交它。该向导由几页组成，我想继​​续从一页到下一页构建对象。我的对象很复杂，由许多连接组成。

到目前为止，我尝试的一切都失败了，在我准备好提交之前，我不想获得真实的身份。有人知道怎么做这个吗。如果是这样，您能否提供代码示例。

# c# - 为什么我的 UIPickerView 在选择时崩溃

> ID：10744267
> 
> 赞同：2
> 
> 时间：2012-05-24T19:45:52.090
> 
> 标签：c#, xamarin.ios, uipickerview, uiactionsheet

我在 github [Github 链接上创建了一个示例](https://github.com/Nytrm/TextfieldUIPickerView)

当单击一行或尝试在 UIPickerView 中滚动时，它会崩溃，我想知道为什么。

```
// create a ActionSheet
var actionPickerSheet = new UIActionSheet("Select a Category");
actionPickerSheet.Style = UIActionSheetStyle.BlackTranslucent;
// Create UIpickerView
var catPicker = new UIPickerView(){
    Model = new catPickerModel(),
    AutosizesSubviews = true,
    Hidden = false,
    ShowSelectionIndicator = true
};
// show inside view and add the catPicker as subView
actionPickerSheet.ShowInView(View);
actionPickerSheet.AddSubview(catPicker);
// resize both views so it fits smoothly
actionPickerSheet.Frame = new RectangleF(0,100,320,500);
catPicker.Frame = new RectangleF(actionPickerSheet.Frame.X,actionPickerSheet.Frame.Y-25,actionPickerSheet.Frame.Width, 216); 
```

和模型

```
private class catPickerModel : UIPickerViewModel
{
    public string[] protocolNames = new string[]
    {
        "Web", "Phone Call", "Google Maps", "SMS", "Email"
    };

    public override int GetComponentCount(UIPickerView uipv)
    {
        return 1;
    }

    public override int GetRowsInComponent( UIPickerView uipv, int comp)
    {
        //each component has its own count.
        int rows = protocolNames.Length;
        return(rows);
    }

    public override string GetTitle(UIPickerView uipv, int row, int comp)
    {  
        //each component would get its own title.
        return protocolNames[row];
    }

    public override void Selected(UIPickerView uipv, int row, int comp)
    {
        Console.WriteLine("selected:" + row);
    }

    public override float GetComponentWidth(UIPickerView uipv, int comp)
    {
        return 300f;
    }
} 
```

我不知道为什么它会一直崩溃，是模型中缺少某种方法还是我试图以错误的方式做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T20:26:04.683

尝试使您`catPicker`成为该类的私有变量：

```
namespace TextfieldUIPickerView
{
    public partial class TextfieldUIPickerViewViewController : UIViewController
    {
        private UIPickerView catPicker;
 ... 
```

看起来 GC 已经收集了你的 catPicker 并处理了它。

# codeigniter - Codeigniter：获取记录和总和

> ID：10744268
> 
> 赞同：4
> 
> 时间：2012-05-24T19:45:53.367
> 
> 标签：codeigniter, codeigniter-2

我有下表，我正在尝试显示`p_total`表中所有其他记录的总和。我设法显示了总金额，但如果我显示它，只会显示表格第一行的值。尽管 p_total 的总和正确显示为 600 。

您能否告诉我下面代码中的问题出在哪里：

提前致谢 ：）

我的数据库表：

```
 p_id   p_name    p_quantity    p_rate   p_total       user_id
  1     Pepsi        12           30       360            1
  2     Hot Breads   12           20       240            1 
```

我的模型中有以下代码

```
$this->db->select('*,SUM(temporary_table.p_total AS Total');
$this->db->from('temporary_table');
$this->db->where('user_id',$user_id);                                   
$getData = $this->db->get('');

if($getData->num_rows() > 0) {
   return $getData->result_array();
}

else { 
   return null;
} 
```

这是我的控制器：

```
$this->load->model('mod_sales');
$data['records']= $this->mod_sales->add_to_temporary_table($user_id); 
```

我的观点：

```
 foreach ($records as $row)
 {   
   <td><?php echo $row['p_name'];?></td>
   <td><?php echo $row['p_quantity'];?></td>
   <td><?php echo $row['p_rate'];?></td>
   <td><?php echo $row['p_total'];?></td>
 }

<?php echo $row['Total'];?> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-08-11T14:04:37.473

您有一个完整的单独列表。

```
$this->db->select_sum('total_price');
$this->db->from('order');
$this->db->where('dates BETWEEN DATE_ADD(NOW(), INTERVAL -7 DAY) AND NOW() ');
$query=$this->db->get();
$data['total']=$query->row()->total_price;

$this->db->select('*');
$this->db->from('order');
$this->db->where('dates BETWEEN DATE_ADD(NOW(), INTERVAL -7 DAY) AND NOW()');
$query=$this->db->get();
$data['count']=$query->num_rows(); 
```

输出：

```
 Array ( 

 [total] => 2759 

 [count] => 5 

) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-02T18:40:59.047

在您看来：

```
$total_sum=0;

foreach ($records as $row){

 <td><?php echo $row['p_name'];?></td>
 <td><?php echo $row['p_quantity'];?></td>
 <td><?php echo $row['p_rate'];?></td>
 <td><?php echo $row['p_total'];?></td>

 $total_sum+=$row['p_total'];
}

<?php echo $total_sum;?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-24T19:54:22.600

你缺少`GROUP BY`条款。

据我了解，你想要这个：

```
SELECT *, SUM(p_total) FROM temporary_table WHERE user_id = ... GROUP BY p_id 
```

不熟悉 CodeIgniter，但猜测您在“where”之后需要这一行：

```
$this->db->group_by('p_id'); 
```

# spotify - 如何恢复一首歌？

> ID：10744269
> 
> 赞同：1
> 
> 时间：2012-05-24T19:46:09.103
> 
> 标签：spotify, resume

> **可能重复：**
> [有没有办法暂停使用 spotify api？](https://stackoverflow.com/questions/8850346/is-there-a-way-to-pause-with-the-spotify-api)

我正在开发 Spotify 应用内应用程序。

我喜欢实现播放、暂停和恢复功能。

我可以按照[https://developer.spotify.com/technologies/apps/docs/beta/f19ff300f8.html上的说明使用](https://developer.spotify.com/technologies/apps/docs/beta/f19ff300f8.html)**play(false)** setter停止歌曲

**我可以使用play()**方法播放歌曲。

我找不到暂停然后恢复的方法。

有没有方法或黑客或解决方法？！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T20:01:21.983

`m.player.playing = false;`停顿。

`m.player.playing = true;`简历。

# c# - 从自定义按钮而不是工具栏打印 ReportViewer

> ID：10744271
> 
> 赞同：0
> 
> 时间：2012-05-24T19:46:23.477
> 
> 标签：c#, javascript, asp.net, printing, reportviewer

好的，我花了几个小时（确切地说是 4 小时）寻找解决方案。我找到了几个结果，但到目前为止都没有。:(

问题：我在用户控件中有一个报告查看器，我隐藏了工具栏并创建了自己的工具栏。现在我添加了一个应该打印的按钮，但似乎无法让它工作。我会为大家提供任何解决方案。但它必须是一个按钮，而不是报告附带的默认栏。

这是我的代码：

```
<rsweb:reportviewer 
ID="rvReports" 
runat="server" 
Height="600px"
Width="600px"
ShowToolBar="False"
SizeToReportContent="True" AsyncRendering="false" />

<asp:ImageButton ID="btnprint" runat="server" ImageUrl="../img/print.png" 
     OnClientClick="PrintReport();" /> 
```

Javascript：

```
<script type="text/javascript">
function PrintReport() {
    var viewerReference = $find("rvReports");
    var reportArea = viewerReference.get_reportAreaContentType();
        if (reportArea == Microsoft.Reporting.WebFormsClient.ReportAreaContent.ReportPage) {
            $find("rvReports").invokePrintDialog();
        }

 } 
</script> 
```

我得到的错误是：

```
Uncaught TypeError: Cannot call method 'get_reportAreaContentType' of null 
```

以防万一我添加了一个 Jquery 库，因为我认为就是这样，但什么也没做。顺便说一句，我从[这里](http://blogs.msdn.com/b/selvar/archive/2011/04/09/invoking-the-print-dialog-for-report-viewer-2010-control-using-the-javascript-api.aspx)得到了那个 javascript，因为它是另一个 stackoverflow 问题的答案之一。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T21:13:35.620

我最终为此使用了 ITextSharp，这非常简单。添加一个隐藏的 iframe 并在代码隐藏中：

```
Warning[] warnings;
        string[] streamids;
        string mimeType;
        string encoding;
        string extension;

        byte[] bytes = rvReports.LocalReport.Render("PDF", null, out mimeType,
                       out encoding, out extension, out streamids, out warnings);

        FileStream fs = new FileStream(HttpContext.Current.Server.MapPath("output.pdf"), FileMode.Create);
        fs.Write(bytes, 0, bytes.Length);
        fs.Close();

        //Open exsisting pdf
        Document document = new Document(PageSize.LETTER_LANDSCAPE, 0, 0, 0, 0);
        PdfReader reader = new PdfReader(HttpContext.Current.Server.MapPath("output.pdf"));
        //Getting a instance of new pdf wrtiter
        PdfWriter writer = PdfWriter.GetInstance(document, new FileStream(
           HttpContext.Current.Server.MapPath("Print.pdf"), FileMode.Create));
        document.Open();
        PdfContentByte cb = writer.DirectContent;

        int i = 0;
        int p = 0;
        int n = reader.NumberOfPages;
        Rectangle psize = reader.GetPageSize(1);

        //float width = psize.Width;
        //float height = psize.Height;

        //Add Page to new document
        while (i < n)
        {
            document.NewPage();
            p++;
            i++;

            PdfImportedPage page1 = writer.GetImportedPage(reader, i);
            cb.AddTemplate(page1, 0, 0);
        }

        //Attach javascript to the document
        PdfAction jAction = PdfAction.JavaScript("this.print(true);\r", writer);
        writer.AddJavaScript(jAction);
        document.Close();

        //Attach pdf to the iframe
        frmPrint.Attributes["src"] = "Print.pdf"; 
```

就这样，猜猜只需要继续在谷歌内部挖掘..lol

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T15:46:22.163

在 $find 函数中使用 clientId 而不是 serverId：

```
$find(<%=rvReports.ClientID%>) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T22:32:02.160

从错误看起来`$find("rvReports")`返回没有控件的集合，结果 get_reportAreaContentType 报告错误。检查脚本调试器`$find("rvReports")`调用的结果是什么，并查看视图中是否存在您期望的元素。

注意我认为选择器应该是“#rvReports”...

# template-engine - 如何将 ICanHaz 用于 mustache javascript 模板引擎？

> ID：10744272
> 
> 赞同：4
> 
> 时间：2012-05-24T19:46:24.810
> 
> 标签：template-engine, icanhaz.js

我有一个 JSON 字符串：

```
{
  "items": [
      {"name": "red" },
      {"name": "blue" }
  ],
  "test" : {
        "items" :[
             { "name" : "Hello" },
             { "name" : "World" }
         ]
  }
} 
```

我如何打印出来

```
<li>Hello</li>
<li>World</li> 
```

我尝试使用下面的模板，但它不起作用。它改为打印“红色和蓝色”。我无权更改 JSON 字符串，我只能操作模板。

```
{{#test}}
  {{#items}}
     <li>{{name}}</li>
  {{/items}}
{{/test}} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T14:01:28.023

出于某种原因，以下代码：

```
<head>
<script src="https://github.com/andyet/ICanHaz.js/raw/master/ICanHaz.js"></script>

<script>
function clicked()
{
       ich.addTemplate("user", "{{#test}} {{#items}} <li>{{name}}</li>\n {{/items}} {{/test}}");
       document.getElementById("result").innerHTML = ich.user(userData);
}

var userData = {
  "items": [
      {"name": "red" },
      {"name": "blue" }
  ],
  "test" : {
        "items" :[
             { "name" : "Hello" },
             { "name" : "World" }
         ]
  }
};

</script>

</head>
<body>
    <button onclick="clicked()">CLICK</button>
    <ul id="result"><li>Result</li></div>
</body> 
```

确切地给了我：

*   你好
*   世界

所以，你的模板应该是正确的。

# java - Java泛型编译错误涉及Class

> ID：10744274
> 
> 赞同：4
> 
> 时间：2012-05-24T19:46:30.153
> 
> 标签：java, generics

该程序无法编译：

```
public class xx {
    static class Class1<C> {
        void method1(C p) {
        }
    }
    static class Class2<T> extends Class1<Class<? extends T>> {
        T object;
        void method2() {
            this.method1(this.object.getClass());
        }
    }
} 
```

错误是：

```
xx.java:10: method1(java.lang.Class<? extends T>) in xx.Class1<java.lang.Class<? extends T>>
cannot be applied to (java.lang.Class<capture#215 of ? extends java.lang.Object>)
        this.method1(this.object.getClass()); 
```

为什么会这样？为什么编译器似乎相信`object.getClass()`return`Class<? extends Object>`而不是`Class<? extends T>`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-24T19:56:14.103

`T`您的代码中没有设置上限，因此`? extends T`实际上相当于`? extends Object`. 就在昨天，我玩了一个类似的例子并遇到了这个障碍。我有

```
static <T> T newInstance(T o) throws Exception {
  final Class<? extends T> c = o.getClass();
  return c.newInstance();
} 
```

它抱怨同样的错误。`Object.getClass()`考虑一下： is的返回类型，`Class<?>`编译器将希望将其捕获`?`为具体类型。但是相反，我们不想捕获`?`，而是“捕获上限” `T`——Java 的泛型中没有这样的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T21:32:50.883

`Object.getClass()`定义为返回 a `Class<? extends |T|>`，其中`T`是接收者的静态已知类型（对象`getClass()`被调用）。特别注意竖线，[擦除操作符](http://docs.oracle.com/javase/specs/jls/se7/html/jls-4.html#jls-4.6)。类型变量的擦除是其最左边界的擦除。在你的情况下，这是隐含的 bound `Object`。所以你得到一个`Class<? extends Object>`，而不是一个`Class<? extends T>`。

这是为什么？

想象一下，您可以在**没有未经检查的警告**`T = List<Integer>`的情况下突然执行以下操作：

 **```
List<String> myStrings = new ArrayList<>();
List<Integer> myInts = new ArrayList<>();
List<Integer> myIntyStrings = myInts.getClass().cast(myStrings);
myIntyStrings.add(-1);
String myString = myStrings.get(0); // BANG! 
```

但幸运的是，我们确实收到了警告.. ;)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T21:21:10.977

根据 getClass() 上的文档，返回的对象具有 type `Class< ? extends |X| >`，其中`|X|`是调用该方法的实例的类型的擦除。

`T`因此，在返回类型的对象上调用 getClass() `Class< ? extends Object >`。我们没有关于`T`此 API 的绑定信息。

通常，在泛型类上使用反射的 API 要求客户端将类型的附加参数传递`Class< T >`给相关的构造函数或泛型方法。**

# iphone - UITableViewCell 的动态高度

> ID：10744277
> 
> 赞同：2
> 
> 时间：2012-05-24T19:46:40.520
> 
> 标签：iphone, objective-c, ios, xcode, uitableview

好的..所以在将其标记为重复问题之前，请阅读它。我已经实现了 CIMGF 给出的代码，用于动态调整`UITableViewCell`. 它第一次起作用，但现在似乎不起作用。奇怪，对吧？无论如何，这里是代码片段：

```
- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath;
{
    NSString *text = [[buzzList objectAtIndex:[indexPath row]] objectForKey:@"description"];
    CGSize constraint = CGSizeMake(260, 20000.0f);
    CGSize size = [text sizeWithFont:[UIFont systemFontOfSize:FONT_SIZE] constrainedToSize:constraint lineBreakMode:UILineBreakModeWordWrap];
    CGFloat height = size.height;

    return height +25 +(CELL_CONTENT_MARGIN * 2);
} 
```

对应的代码`cellForRowAtIndexPath`是：

```
[cell.descriptionLabel setLineBreakMode:UILineBreakModeWordWrap];
[cell.descriptionLabel setMinimumFontSize:FONT_SIZE];
[cell.descriptionLabel setNumberOfLines:0];
[cell.descriptionLabel setFont:[UIFont systemFontOfSize:FONT_SIZE]];

CGSize constraint = CGSizeMake(CELL_CONTENT_WIDTH - (CELL_CONTENT_MARGIN * 2), 20000.0f);

CGSize size = [[[buzzList objectAtIndex:indexPath.row] objectForKey:@"description"] sizeWithFont:[UIFont systemFontOfSize:FONT_SIZE] constrainedToSize:constraint lineBreakMode:UILineBreakModeWordWrap];
cell.descriptionLabel.text=[[buzzList objectAtIndex:indexPath.row] objectForKey:@"description"];
CGRect rect=CGRectMake(45, 20, 260, size.height);
[cell.descriptionLabel setFrame:rect]; 
```

我设置了值 45,20,260 以获得单元格中文本起点的确切位置及其宽度。这些值是正确的，不需要修改。但是，当我执行代码时，我得到了单元格的正确高度（根据文本动态调整）`BUT`，`descriptionLabel`最多显示 2 行文本。之后它会截断文本。:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T20:03:47.423

您对描述标签的约束包含两个常量`CELL_CONTENT_WIDTH`和`CELL_CONTENT_MARGIN`，而`CGRect`您正在创建的 包含一个数字 (260)。如果`CELL_CONTENT_WIDTH - (CELL_CONTENT_MARGIN * 2)`> 260 那么这应该是你的问题。

# orchardcms - 如何将导航菜单添加到 Orchard 的页脚区域？

> ID：10744279
> 
> 赞同：0
> 
> 时间：2012-05-24T19:46:48.063
> 
> 标签：orchardcms

我想让我的导航菜单既显示在通常的位置，也显示在页脚中。我尝试了以下方法：

```
WorkContext.Layout.Footer.Add(New.Menu(), "5"); 
```

这会在我期望的位置呈现`<nav>`and`<ul>`元素，但实际菜单项没有`<li>`元素；它只是呈现一个空菜单。显然我做的不对。这应该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T00:07:20.760

Go to widgets and add menu to the footer zone too ( It is already there in the navigation zone)

# php - 在 codeigniter 中生成图像拇指

> ID：10744280
> 
> 赞同：0
> 
> 时间：2012-05-24T19:46:50.437
> 
> 标签：php, codeigniter

我对 codeigniter 很陌生，只是用它构建了我的第一个应用程序，但是在从图像生成缩略图时我有点难过。

图像正确上传，但拇指未生成，我没有收到任何错误:(

我希望有人能帮帮我，我可能只是一个山雀，而且它真的很简单，比如错误拼写 var。

这是我的图像模型的代码：

```
<?php

class Image_model extends CI_Model {

        var $image_path;

        function Image_model(){

            parent::__construct();

            $this->image_path = realpath(APPPATH.'../'.$this->config->item('dir_dynamic_images'));

        }

        function do_upload(){

            $config = array(
                    'allowed_types' => "jpeg|gif|jpg|png",
                    'upload_path' => $this->image_path,
                    'max_size' => 2000
            );

            $this->load->library('upload', $config);

            $this->upload->do_upload();
            $image_data = $this->upload->data();

            $config = array(
                'source_image' => $image_data['full_path'],
                'new_image' => $this->image_path . '/thumbs',
                'maintain_ratio' => true,
                'width' => 200,
                'height' => 200
            );

            echo $config['new_image'];

            $this->load->library('image_lib', $config);
            $this->image_lib->resize();

        }               

    }
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T20:04:20.553

我认为您需要将 create_thumb 参数设置为 true 并指定图像库-

```
 $config = array(
                'image_library' => 'gd2',
                'source_image' => $image_data['full_path'],
                'create_thumb' => true,
                'new_image' => $this->image_path . '/thumbs',
                'maintain_ratio' => true,
                'width' => 200,
                'height' => 200
            ); 
```

尝试使用 - 查找错误

```
if(!$this->image_lib->resize()) 
{ 
   echo $this->image_lib->display_errors(); 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T15:38:28.773

这段代码对我有用。希望它对你有用。您还可以在 codeigniter 中检查图像处理助手。不要忘记初始化配置。

```
 $config['image_library'] = 'imagemagick';
    $config['library_path'] = '/usr/X11R6/bin/';
    $config['source_image'] = '/path/to/image/mypic.jpg';
    $config['x_axis'] = '100';
    $config['y_axis'] = '60';

    $this->image_lib->initialize($config);

    if ( ! $this->image_lib->crop())
    {
        echo $this->image_lib->display_errors();
    } 
```

# javascript - 如何在 Rails 中格式化电话号码？

> ID：10744283
> 
> 赞同：4
> 
> 时间：2012-05-24T19:46:59.573
> 
> 标签：javascript, ruby-on-rails

我有`text_field_tag`一个用户输入电话号码的地方。在用户输入电话号码后，我需要重新格式化电话号码，例如：`(XXX) XXX XXXX`. 我创建了一个 java 脚本，它将为我完成它，但我怎样才能将它添加到这个 ruby​​ 行代码中？

javascript方法 ------> formatNumber(number)

```
<%= text_field_tag :mobile_number, '', :class => 'email-address' %> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-24T19:58:15.867

如果您使用的是 Rails，则使用内置的[#number_to_phone](http://api.rubyonrails.org/classes/ActionView/Helpers/NumberHelper.html#method-i-number_to_phone)助手而不是自定义 Javascript 会更容易。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T00:51:19.883

在 javascript 中有两种使用 ruby​​ 变量和方法的方法。1）在 .js.erb 中使用它（通常用于渲染 ajax 方法） 2）可能是你的情况，有点难看，但你可以在你的 html.erb 视图中内联你的 javascript

# javascript - 使用 .replace() 将句点更改为下划线

> ID：10744287
> 
> 赞同：2
> 
> 时间：2012-05-24T19:47:30.800
> 
> 标签：javascript, jquery, asp.net-mvc-3

我正在尝试使用 javascript`.replace()`函数将字符串中的句点替换为下划线。例如，如果字符串是`Project.Build`，我希望它变成`Project_Build`。不幸的是，该方法目前没有这样做。期间继续保持期间。

这行代码正在删除字符串中的所有空白。它也用下划线替换所有空格。这部分目前正在工作。

```
var rowID = $.trim(new String(status.teamCityProject).toLowerCase().replace(/ /g, "_").replace(/\./g, '_')) + status.id;

$("tr#" + rowID + " td.status").html(status.status).css({ 'color': statusColor, 'font-weight': 'bolder' }) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-24T20:00:13.950

您应该将修改后的字符串分配或更新给 var 并使用它。`.replace`不会更新原始文本。（也删除了新字符串）

```
var rowID = $.trim(status.teamCityProject.toLowerCase().replace(/ /g, "_").replace(/\./g, '_')) + status.id;

$("tr#" + rowID + " td.status").html(status.status).css({ 'color': statusColor, 'font-weight': 'bolder' }) 
```

[**演示**](http://jsfiddle.net/Ex3Vr/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T19:51:12.837

你有什么[作品](http://jsfiddle.net/BDZWK/)。

但是，您可以将其压缩为一个`replace()`并避免`String`使用以下内容。另请注意，您的原始帖子缺少`)`.`trim()`

```
$.trim((status.teamCityProject).toLowerCase().replace(/[ .]/g, "_") + status.id); 
```

看到它[在行动](http://jsfiddle.net/ELyAD/2/)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-24T19:55:53.700

JavaScript 字符串是不可变的。 `.replace()`返回一个你必须处理的新字符串。

```
var newStatus = $.trim(status.teamCityProject
    .toLowerCase()
    .replace(/ /g, "_")
    .replace(/\./g, '_')) + status.id;
// do something with newStatus 
```

# c# - 搜索正确的 linq to sql 查询

> ID：10744290
> 
> 赞同：1
> 
> 时间：2012-05-24T19:47:42.400
> 
> 标签：c#, database, linq-to-sql, code-first

我正在使用 C# 在 Visual Studio 11 中为库创建一个简单的应用程序。

简而言之，它与数据库（SQL Server）交互以在数据库中注册一本新书。

系统会提示用户输入书名、作者、语言、年份、图书出版商和图书 ID。所有这些都是名为 的表中的列`BookInformation`。还有另一个表称为`Categories`。现在这个表根本不重要，因为这个表的功能还没有实现。

我们总是在谈论书籍，而不是杂志（例如）。

我想问你如何进行正确的查询以在一行中显示存储在数据库中的每本书的所有信息。

到目前为止我所做的是：

```
var allBooks = from p in db.BookInformation
               where p.CategoryId == "BOOKS"
               orderby p.BookName
               select p;

        Console.WriteLine("All books in database:");
        foreach (var item in allBooks)
        {
            Console.WriteLine(" - {0}, {1}, {2}, {3}, {4}", item.BookName, item.Author, item.Year, item.Language, item.BookId);
        } 
```

它给出了非常奇怪的结果，而且很明显它是错误的。我该怎么办，有什么想法吗？

谢谢

**编辑 - 这是它产生的 sql**

```
SELECT 
    [Extent1].[BookId] AS [BookId], 
    [Extent1].[BookName] AS [BookName], 
    [Extent1].[Author] AS [Author], 
    [Extent1].[Publisher] AS [Publisher], 
    [Extent1].[Year] AS [Year], 
    [Extent1].[Language] AS [Language], 
    [Extent1].[CategoryId] AS [CategoryId], 
    [Extent1].[TimeOfRegistrating] AS [TimeOfRegistrating] 
FROM 
    [dbo].[BookInfoes] AS [Extent1] 
WHERE 
    N'BOOKS' = [Extent1].[CategoryId] 
ORDER BY 
    [Extent1].[BookName] ASC 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T19:55:55.573

[加载Sql Profiler](http://msdn.microsoft.com/en-us/library/ms181091.aspx)的实例，开始分析，运行 C# LINQ 代码，并捕获它生成的 sql。

然后，确定它生成的 sql 为什么没有产生正确的结果。那个 linq 查询就这么简单。也许您的数据不是您所期望的。

对于那些没有探查器的人，这里有其他选择... [http://www.thereforesystems.com/view-query-generate-by-linq-to-sql/](http://www.thereforesystems.com/view-query-generate-by-linq-to-sql/)

**更新**

根据您的 sql，以及您的循环和 writeline，您应该在控制台中看到与以下 sql 大致相同的内容，这与您的 sql 相同，除了删除了您未输出到控制台的字段：

```
SELECT 
    [Extent1].[BookName] AS [BookName], 
    [Extent1].[Author] AS [Author], 
    [Extent1].[Year] AS [Year], 
    [Extent1].[Language] AS [Language], 
    [Extent1].[BookId] AS [BookId]
FROM 
    [dbo].[BookInfoes] AS [Extent1] 
WHERE 
    N'BOOKS' = [Extent1].[CategoryId] 
ORDER BY 
    [Extent1].[BookName] ASC 
```

如果您不是，那么我们缺少一些关于原因的信息，因为到目前为止您所说的一切都表明两者的输出大致相同。

另请注意，`allBooks.Count()`应返回与从 sql 返回的行数相同的数字。

# machine-learning - weka 中的分类失败，是由标称值的大小写敏感引起的吗？

> ID：10744296
> 
> 赞同：0
> 
> 时间：2012-05-24T19:48:22.603
> 
> 标签：machine-learning, data-mining, classification, weka

我制作了一个分类器，将搜索查询分类为以下类别之一：{艺术家、演员、政治家、运动员、设施、地理、定义、质量保证}。我有两个 csv 文件：一个用于训练分类器（包含 300 个查询），另一个用于测试分类器（目前包含大约 200 个查询）。当我使用训练集和测试集通过 weka 知识流训练/评估分类器时，大多数类都达到了相当不错的准确性。Weka知识流训练/测试场景设置：

![Weka 训练/测试设置](../Images/7b14f40589bdd193ebfe33ac95f56899.png)

训练后，我将知识流中的 MultiLayer Perceptron 分类器保存到 classifier.model 中，我在 java 代码中使用它来对查询进行分类。

当我在 java 代码中反序列化此模型并使用它来分类知识流中测试集 CSV 文件的所有查询（使用反序列化分类器上的 distributionForInstance() 方法）时，它将所有“地理”查询分类为“设施”查询和所有“QA”查询作为“定义”查询。这让我有点吃惊，因为 ClassifierPerformanceEvaluator 向我展示了一个混淆矩阵，其中“Geo”和“QA”查询得分非常好，并且测试查询相同（使用了相同的 CSV 文件）。使用 distributionForInstance() 方法的所有其他查询分类似乎工作正常，因此显示了查看知识流中的混淆矩阵时可以预期的行为。

我能想到的一件事如下： testing-CSV 文件在其他属性中包含许多全大写形式的标称值属性。当我在 java 代码中打印出分类之前实例的所有属性的值时，这些值似乎被转换为小写字母（似乎 DataSource.getDataSet() 方法的行为是这样的）。难道这些属性的大小写是我的测试CSV文件的某些实例被分类不同的原因吗？我在 Weka 规范中读到，标称值属性区分大小写。不过，我在 java 文件中将这些值更改为大写，因为 weka 然后抛出一个异常，即这些值不是为名义属性预定义的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T17:13:57.180

Weka 可能在知识流中使用与您的 weka 代码中相同的类来解释 csv。这就是为什么它`Instances`无需调整即可工作（生成匹配的数据集 - 对象 - ）并且在您更改内容时失败：项目不再匹配。这就是说 weka 会一致地处理输入字符串的大小写，并且不需要您更改它。

检查您是否正在查看知识流输出中的`Error on Test Data`值而不是`Error on Training Data`值，因为鉴于您使用这些精确示例构建模型，第二个值将人为地高。您的分类器可能在两个地方都执行相同的操作，但您正在查看不同的统计数据。

# c++ - 这些 C++ 术语是否正确？

> ID：10744297
> 
> 赞同：5
> 
> 时间：2012-05-24T19:48:24.997
> 
> 标签：c++

我正在读一本书，C++ 入门指南。

我想我已经掌握了它的窍门，我只是想澄清一些事情。

1.  它说 a`class`就像一个数据类型（A 数据类型是`int`, `char`, ect ..）并且`Object`/Instance 就像一个变量。这是真的？

2.  什么是数据表格？

3.  声明的哪一部分是声明？是`data type`+ `the variable`，`=`是作业吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-24T19:58:37.857

不完全的。

从某种意义上说，类“就像一种数据类型”，它是用于创建对象的模板，但它本身并不是您可以使用的对象。

当您使用该模板创建对象的实例时，您可以使用该对象。您可以根据需要创建任意数量的实例 - 您可以将这些实例视为变量。

例如：

```
class Person
{
    public:
        Person() : name("Joe Bloggs") {}

        std::string getName() { return name; } 

        void setName(std::string n) { name = n; }

    private:
        std::string name;    
}; 
```

这是 Person 的类定义。它不是一个变量。您不能对其调用 setName ，因为它尚不存在。但是当你这样做时：

```
int main()
{
    Person p, q;
    p.setName("Jill Bloggs");
    q.setName("Bob King");
    std::cout << p.getName() << " " << q.getName() << std::endl;
} 
```

您创建了两个可以分配、更改和使用的人员实例——它们是称为实例的变量。

我不知道“数据形式”是什么意思，忽略它。

至于声明 - 声明声明将存在某事的实例。例如，如果您正在创建一个类，并且您的头文件具有：

```
class foo
{
    public:

        foo(int value);

        void bar();

    private:
        int x;
}; 
```

您声明您有一个名为 bar 的函数，该函数返回 void，并且您有一个名为 x 的整数。

没有为变量 x 分配内存，也没有提供定义或 bar，所以它们只是声明。您的源文件可能会为 bar 提供定义，例如：

```
void foo::bar()
{
    //some code
} 
```

以及 foo 的构造函数定义，它将用一个值初始化 x 并控制它的创建方式（使用初始化列表）：

```
foo::foo(int value) : x(value)
{
    //some code
} 
```

# oracle - 使用分析函数删除查询

> ID：10744298
> 
> 赞同：1
> 
> 时间：2012-05-24T19:48:26.697
> 
> 标签：oracle, oracle10g, sql-delete, analytic-functions

删除记录最少的记录，我有 2 个表 person (id, otherID) otherID 是其他 person.id 和电影 (id, country, personID) 的引用，其中 personID 是 person.id 的外键

我想删除电影表中与 personID 和 country 相关的记录最少的所有记录。例如：

```
Person(1, 2)
Person(2, 2)
Person(3, 2)
Film(1, fr, 1)
Film(2, uk, 1)
Film(3, fr, 2)
Film(4, fr, 3)
Film(5, usa, 1)
Film(6, fr, 1) 
```

我必须删除 Film(3, fr, 2) Person(1, 2 )->因为国家 fr, 2 中的人 1 的计数高于同一国家/地区的其他人 2 （otherID 列）的计数' fr',1.

Person(2, 2) 没有可删除的内容

Person(3, 2) 删除了 Film(3, fr, 2) 或 Film(4, fr, 3) 记录之一，因为两者都以 fr 作为国家并且 count = 1 但作为记录 Film(3, fr, 2)之前被删除，因此必须保留 Film(4, fr, 3)。

其中 count = select count(*) over (partition by film.personID, film.country) from film

并保持

```
Film(1, fr, 1)
Film(2, uk, 1)
Film(4, fr, 3)
Film(5, usa, 1)
Film(6, fr, 1) 
```

实际上，对于 person 表中的每条记录，我们将查找：

a = select count(*) over (partition person.id,film.country)

b = select count(*) over (partition person.otherID,film.country)

a 和 b 相同的 film.country 然后删除具有 min(a,b) 的记录

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T08:29:34.197

如果您可以编写一个查询来标识要删除的行*或*标识不被删除的行，并且理想情况下返回一组 ROWID，那么您可以简单地：

```
Delete from my table where rowid in ( ...); 
```

或者

```
Delete from my table where rowid not in ( ...); 
```

# javascript - Scroll back to the top of scrollable div

> ID：10744299
> 
> 赞同：171
> 
> 时间：2012-05-24T19:48:26.947
> 
> 标签：javascript, html, scroll

```
<div id="containerDiv"></div> 
```

```
#containerDiv {
  position: absolute;
  top: 0px;
  width: 400px;
  height: 100%;
  padding: 5px;
  font-size: .875em;
  overflow-y: scroll;
} 
```

```
document.getElementById("containerDiv").innerHTML = variableLongText; 
```

How to reset the scroll position back to top of container div the next time?

* * *

## 回答 #1

> 赞同：255
> 
> 时间：2012-05-24T19:50:31.437

```
var myDiv = document.getElementById('containerDiv');
myDiv.innerHTML = variableLongText;
myDiv.scrollTop = 0; 
```

*See the [`scrollTop`](https://developer.mozilla.org/en/DOM/element.scrollTop) attribute.*

* * *

## 回答 #2

> 赞同：70
> 
> 时间：2013-11-17T14:02:20.500

Another way to do it with a smooth animation is like this

```
$("#containerDiv").animate({ scrollTop: 0 }, "fast"); 
```

* * *

## 回答 #3

> 赞同：30
> 
> 时间：2014-12-18T22:17:26.003

I tried the existing answers to this question, and none of them worked on Chrome for me. What did work was slightly different:

```
$('body, html, #containerDiv').scrollTop(0); 
```

* * *

## 回答 #4

> 赞同：27
> 
> 时间：2018-02-20T10:15:42.720

This worked for me :

```
document.getElementById('yourDivID').scrollIntoView(); 
```

* * *

## 回答 #5

> 赞同：17
> 
> 时间：2017-04-10T21:50:43.230

**scrollTo**

```
window.scrollTo(0, 0); 
```

is the ultimate solution for scrolling the windows to the top - the best part is that it does not require any id selector and even if we use the IFRAME structure it will work extremely well.

> The scrollTo() method scrolls the document to the specified coordinates.
> window.scrollTo(xpos, ypos);
> xpos Number Required. The coordinate to scroll to, along the x-axis (horizontal), in pixels
> ypos Number Required. The coordinate to scroll to, along the y-axis (vertical), in pixels

**jQuery**

Another option to do the same is using jQuery and it will give a smoother look for the same

```
$('html,body').animate({scrollTop: 0}, 100); 
```

where 0 after the scrollTop specifies the vertical scrollbar position in the pixel and second parameter is an optional parameter which shows the time in microseconds to complete the task.

* * *

## 回答 #6

> 赞同：13
> 
> 时间：2017-06-12T18:46:39.530

For those who still can't make this work, make sure that **the overflowed element is displayed before using the jQuery function**.

Example:

```
$('#elem').show();
$('#elem').scrollTop(0); 
```

* * *

## 回答 #7

> 赞同：9
> 
> 时间：2020-09-10T06:00:41.807

## 2020 UPDATE

You can use `.scroll()` to easily scroll elements or window. It has a **built-in smooth scroll** effect so basically the code couldn't be simpler.

**Standard properties:**

```
var options = {
    top:       0,        // Number of pixels along the Y axis to scroll the window or element
    left:      0,        // Number of pixels along the X axis to scroll the window or element.
    behavior:  'smooth'  // ('smooth'|'auto') - animate smoothly, or move in a single jump
} 
```

**DOCS:** [https://developer.mozilla.org/en-US/docs/Web/API/Window/scroll](https://developer.mozilla.org/en-US/docs/Web/API/Window/scroll)

**SEE ALSO:** `.scrollIntoView()` [https://developer.mozilla.org/en-US/docs/Web/API/Element/scrollIntoView](https://developer.mozilla.org/en-US/docs/Web/API/Element/scrollIntoView)

* * *

### DEMO:

```
document.getElementById('btn').addEventListener('click',function(){

  document.getElementById('container').scroll({top:0,behavior:'smooth'});

});
```

```
/*DEMO*/
#container{
  width:300px;
  max-height:300px;
  padding:1rem;
  margin-left:auto;
  margin-right:auto;
  background-color:#222;
  color:#ccc;
  text-align:justify;
  overflow-y:auto;
}
#btn{
  width:100%;
  margin-top:1rem;
}
```

```
<div id="container">
  <div>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum. Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum. Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum. Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum. Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</div>
  <button id="btn">Scroll to top</button>
</div>
```

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2018-02-23T06:29:18.297

If you want to scroll with a smooth transition, you could use this!

(Vanilla JS)

```
const tabScroll = document.getElementById("tabScroll");
window.scrollTo({
  'behavior': 'smooth',
  'left': 0,
  'top': tabScroll.offsetTop - 80
}); 
```

> If your target users are **Chrome** and **Firefox**, then this is good! But unfortunately this method isn’t supported well enough on all browsers. [**Check Here**](https://caniuse.com/#feat=css-scroll-behavior)

Hope this helps!!

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2019-07-24T17:04:49.373

When getting element by class name, don't forget the return value is an array; Hence this code:

```
document.getElementByClassName("dropdown-menu").scrollTop = 0 
```

Would not work. Use code below instead.

```
document.getElementByClassName("dropdown-menu")[0].scrollTop = 0 
```

I figured other people might encounter a similar problem as I did; so this should do the trick.

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2016-11-24T13:38:50.013

For me the scrollTop way did not work, but I found other:

```
element.style.display = 'none';
setTimeout(function() { element.style.display = 'block' }, 100); 
```

Did not check the minimum time for reliable css rendering though, 100ms might be overkill.

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2018-11-09T12:59:26.480

As per François Noël's answer "For those who still can't make this work, make sure that the overflowed element is displayed before using the jQuery function."

I had been working in a bootstrap modal that I repeatedly bring up with account permissions in a div that overflows on the y dimension. My problem was, I was trying to use the jquery .scrollTop(0) function and it would not work no matter how I tried to do it. I had to setup an event for the modal that didn't reset the scrollbar until the modal had stopped animating. The code that finally worked for me is here:

```
 $('#add-modal').on('shown.bs.modal', function (e) {
        $('div.border').scrollTop(0);
    }); 
```

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2019-05-29T20:46:11.963

This is the only way it worked for me, with smooth scrolling transition:

```
 $('html, body').animate({
    scrollTop: $('#containerDiv').offset().top,
  }, 250); 
```

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2020-05-22T06:01:11.453

The ID Should have the id of the corresponding div that has the overflow css property.

`document.querySelector('#YOUR_OVERFLOWED_DIV').scrollTop = 0;`

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2017-07-19T14:43:29.010

If the html content overflow a single viewport, this worked for me using only javascript:

```
document.getElementsByTagName('body')[0].scrollTop = 0; 
```

Regards,

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2018-12-22T05:37:04.973

these two codes worked for me like a charm this first will take to scroll to the top of the page but if you want to scroll to some specific div use the second one with your div id.

```
$('body, html, #containerDiv').scrollTop(0);
document.getElementById('yourDivID').scrollIntoView(); 
```

If you want to scroll to by a class name use the below code

```
var $container = $("html,body");
var $scrollTo = $('.main-content');

$container.animate({scrollTop: $scrollTo.offset().top - $container.offset().top + $container.scrollTop(), scrollLeft: 0},300); 
```

# java - 连接到 sql server 2008 企业版时出错

> ID：10744302
> 
> 赞同：0
> 
> 时间：2012-05-24T19:48:49.650
> 
> 标签：java, sql-server-2008

我正在尝试使用 java 连接字符串与 sql server 2008 连接，但出现以下错误

jdbc:sqlserver://127.0.0.1:1434;DatabaseNameconnect?autoReconnect=true com.microsoft.sqlserver.jdbc.SQLServerException: 不支持服务器版本。目标服务器必须是 SQL Server 2000 或更高版本。com.microsoft.sqlserver.jdbc.SQLServerException：不支持服务器版本。目标服务器必须是 SQL Server 2000 或更高版本。com.microsoft.sqlserver.jdbc.SQLServerException.makeFromDriverError(Unknown Source) at com.microsoft.sqlserver.jdbc.DBComms.Prelogin(Unknown Source) at com.microsoft.sqlserver.jdbc.DBComms.(Unknown Source) at com. microsoft.sqlserver.jdbc.SQLServerConnection.connect(Unknown Source) at com.microsoft.sqlserver.jdbc.SQLServerDriver.connect(Unknown Source) at java.sql.DriverManager.getConnection(DriverManager.java:582) at java.sql.DriverManager .getConnection(DriverManager.java:

我正在使用以下 jar 进行连接

sqljdbc-2005-1.0.jar

请帮忙

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-24T19:53:46.427

您正在使用 SQL Server 2005 JDBC 驱动程序，但正在与 SQL Server 2008 通信。虽然我*预计*这会起作用，但我怀疑最好的方法可能是更新您的 JDBC 驱动程序：

*   [最新 MS JDBC 驱动程序的下载页面](http://www.microsoft.com/en-us/download/details.aspx?displaylang=en&id=11774)

# git - 如何创建 .gitignore 文件

> ID：10744305
> 
> 赞同：1306
> 
> 时间：2012-05-24T19:48:54.610
> 
> 标签：git, xcode4.3, gitignore

我需要在我的`.gitignore`文件中添加一些规则。但是，我在我的项目文件夹中找不到它。它不是由 Xcode 自动创建的吗？如果没有，什么命令允许我创建一个？

* * *

## 回答 #1

> 赞同：1763
> 
> 时间：2012-09-06T10:59:06.367

如果您使用的是 Windows，它不会让您在 Windows 资源管理器中创建没有文件名的文件。如果您尝试将文本文件重命名为**.gitignore**，则会出现错误“*您必须键入文件名”*

 **![在此处输入图像描述](../Images/3758d344039f10b66dc6fe0504f16dd1.png)

为了解决这个问题，我使用了以下步骤

1.  创建文本文件 gitignore.txt
2.  在文本编辑器中打开它并添加您的规则，然后保存并关闭
3.  按住 SHIFT，右键单击您所在的文件夹，然后选择**在此处打开命令窗口**
4.  然后在命令行中重命名文件，使用`ren gitignore.txt .gitignore`

或者[@HenningCash](https://stackoverflow.com/users/1526257/henningcash)在评论中建议

> 您可以通过在不带扩展名的文件名后附加一个点来解决此 Windows 资源管理器错误：.gitignore。将自动更改为 .gitignore

* * *

## 回答 #2

> 赞同：590
> 
> 时间：2013-02-20T11:55:24.970

事情可以（有时）尽可能简单：只需将以下内容添加到您首选的命令行界面（GNU Bash、Git Bash 等）

```
touch .gitignore 
```

正如@Wardy 在评论中指出的那样`touch`，只要您提供完整路径，它就可以在 Windows 上运行。这也可以解释为什么它不适用于*Windows*上的某些用户：默认情况下，该`touch`命令似乎不在某些 Windows 版本中。`$PATH`

```
C:\> "c:\program files (x86)\git\bin\touch.exe" .gitignore 
```

*注意：路径可能会有所不同，具体取决于您的设置和安装路径。*

* * *

## 回答 #3

> 赞同：324
> 
> 时间：2013-07-24T14:31:52.807

在 Windows 资源管理器中创建 .gitignore 文件的最简单方法是创建一个名为 .gitignore 的新文件`.gitignore.`。这将跳过具有文件扩展名的验证，因为它实际上有一个空文件扩展名。

* * *

## 回答 #4

> 赞同：208
> 
> 时间：2012-05-24T19:51:50.833

默认情况下，.gitignore 文件不会添加到存储库中。使用 vi 或您喜欢的文本编辑器创建 .gitignore 文件，然后发出 a`git add .gitignore`后跟`git commit -m "message" .gitignore`. 以下命令将处理它。

```
> .gitignore
git add .gitignore
git commit -m "message" .gitignore 
```

* * *

## 回答 #5

> 赞同：145
> 
> 时间：2014-05-31T13:53:19.887

# ========== 在 Windows 中 ==========

1.  打开[记事本](http://en.wikipedia.org/wiki/Notepad_%28software%29)。
2.  添加 gitignore 文件的内容。
3.  单击“另存为”并选择“所有文件”。
4.  另存为`.gitignore`

**======== 轻松愉快！无需命令行！========**

* * *

## 回答 #6

> 赞同：58
> 
> 时间：2016-05-17T01:05:07.250

在 Windows 上，您可以使用 cmd `echo "" >.gitignore`

或者使用 Git Bash cmd `touch .gitignore`，这对 Linux 和 Mac 系统很有用

* * *

## 回答 #7

> 赞同：57
> 
> 时间：2016-09-23T05:34:55.437

# MacOS/Linux 单线

获得默认 git 忽略而不搞乱创建/复制/粘贴的一种简单方法是使用`curl`终端中的命令。首先`cd`进入您的项目根目录，然后通过替换`MY_API_NAME`为以下两个来源之一的 API 名称来运行命令：

## [gitignore.io](https://www.gitignore.io/)

```
curl -o .gitignore https://www.gitignore.io/api/MY_API_NAME 
```

[您可以通过从此处](https://www.gitignore.io/)的列表中搜索并单击生成来找到您的 API 名称。

*Java 示例：*

```
curl -o .gitignore https://www.gitignore.io/api/java 
```

## [GitHub](https://github.com/github/gitignore)

或者，您可以使用 GitHub 上的那些。[在此处](https://github.com/github/gitignore)查找您的 API 的文件名。

```
curl -o .gitignore https://raw.githubusercontent.com/github/gitignore/master/MY_API_NAME.gitignore 
```

*Java 示例：*

```
curl -o .gitignore https://raw.githubusercontent.com/github/gitignore/master/Java.gitignore 
```

# 视窗

以下是 Windows 的一些类似替代方案。

*   [如何在 Windows 上安装/设置和使用 cURL？](https://stackoverflow.com/questions/9507353/how-do-i-install-set-up-and-use-curl-on-a-windows)
*   [Windows 原生的 Wget/cURL 替代方案？](https://superuser.com/questions/299754/wget-curl-alternative-native-to-windows)

但老实说，设置它看起来更麻烦，它是值得的。如果我有 Windows，那么我只需`.gitignore`在项目的根文件夹中创建一个名为的空文件，然后从 gitignore.io 或 GitHub 复制并粘贴默认文本。

* * *

## 回答 #8

> 赞同：48
> 
> 时间：2017-06-02T12:29:23.450

我也想要我的贡献。这一次，动画一个:)

VIM（迷你教程）：

```
i   - start editing
ESC - get back to normal mode
:w  - save 
:q  - quit 
```

[![在此处输入图像描述](../Images/aa87632716761494ddc67205f4e1cf42.png)](https://i.stack.imgur.com/d9OdS.gif)

* * *

## 回答 #9

> 赞同：41
> 
> 时间：2016-05-17T00:45:42.460

使用 Git Bash 控制台。

- 导航到您的项目 - 键入“touch .gitignore”

.gitignore 文件将为您创建。

[![在此处输入图像描述](../Images/10128442bf84a517175d163d213c1ee9.png)](https://i.stack.imgur.com/JJp4x.jpg)

* * *

## 回答 #10

> 赞同：34
> 
> 时间：2014-07-16T17:45:06.677

*我的贡献是针对那些在 Mac 上的，它不仅可以应用于那些在 iOS 项目上工作的人（正如提到 Xcode 的问题所暗示的那样），而且可以应用于任何类型的项目。*

* * *

我这样做的简单方法是进入终端并运行`vim .gitignore`然后添加文件。通常，您可以从 GitHub 上的模板之一复制您需要的内容，网址为[https://github.com/github/gitignore](https://github.com/github/gitignore)。

**步骤 1**
在您的项目中，键入以下命令

```
vim .gitignore 
```

![在此处输入图像描述](../Images/8d8aa5c0a2253f2143daa2fa15944471.png)

**第 2 步**
您现在可以使用[Vim](http://www.vim.org/about.php)打开文件。

![在此处输入图像描述](../Images/f3a90cdfe895c16eadf759943c5ea8a1.png)

按`i`插入文本。当您在底部看到**--INSERT--**时，您将看到文件已准备就绪。

![在此处输入图像描述](../Images/ce80c795ee370c8e1f4f06a3b1bf6f30.png)

**第 3 步（选项 1）对于 Objective-C 项目，您可以从**[https://raw.githubusercontent.com/github/gitignore/master/Objective-C.gitignore](https://raw.githubusercontent.com/github/gitignore/master/Objective-C.gitignore)
复制并将其粘贴到您的文件中：`.gitignore`

![在此处输入图像描述](../Images/6853ca41d8a5986b2579186dfdeb2159.png)

按`Esc`，输入`:wq`，然后按`Return`。哪个保存文件。

**第 3 步（选项 2）**
添加适用于您的项目的任何文件。

如果您不确定要添加什么，在搜索引擎中使用的最佳关键字是包含您的项目类型和文本编辑器。例如，如果你使用[Sublime Text](http://en.wikipedia.org/wiki/Sublime_Text)，你会想要添加

```
*.sublime-workspace 
```

如果您在[Dreamweaver中使用](http://en.wikipedia.org/wiki/Adobe_Dreamweaver)[Cordova](https://en.wikipedia.org/wiki/Apache_Cordova)项目，您可能需要添加

```
_notes
dwsync.xml 
```

* * *

## 回答 #11

> 赞同：32
> 
> 时间：2014-10-21T10:36:14.100

这是 Windows 下的一个不错的提示：

*   在 Windows 资源管理器中右键单击，新建 > 文本文档
*   将其命名为 .gitignore。（带有一个尾随点 - 那是小费）
*   你最终得到一个 .gitignore 文件:)

在 Windows 7 和 8 下测试。

本技巧假定您的 Windows 资源管理器显示文件扩展名。

![Windows 资源管理器 .gitignore](../Images/851a1a16b622c8ce789202b39af29caf.png)

* * *

## 回答 #12

> 赞同：18
> 
> 时间：2013-10-28T01:33:10.493

在包含您不想提交的所有文件和目录中创建一个 .gitignore 文件。

例子：

```
#################
## Eclipse
#################

*.pydevproject
.project
.metadata
.gradle
bin/
tmp/
target/
*.tmp
*.bak
*.swp
*~.nib
local.properties
.classpath
.settings/
.loadpath

# External tool builders
.externalToolBuilders/

# Locally stored "Eclipse launch configurations"
*.launch

# CDT-specific
.cproject

# PDT-specific
.buildpath

#################
## Visual Studio
#################

## Ignore Visual Studio temporary files, build results, and
## files generated by popular Visual Studio add-ons.

# User-specific files
*.suo
*.user
*.sln.docstates

# Build results

[Dd]ebug/
[Rr]elease/
x64/
build/
[Bb]in/
[Oo]bj/

# MSTest test Results
[Tt]est[Rr]esult*/
[Bb]uild[Ll]og.*

*_i.c
*_p.c
*.ilk
*.meta
*.obj
*.pch
*.pdb
*.pgc
*.pgd
*.rsp
*.sbr
*.tlb
*.tli
*.tlh
*.tmp
*.tmp_proj
*.log
*.vspscc
*.vssscc
.builds
*.pidb
*.log
*.scc

# Visual C++ cache files
ipch/
*.aps
*.ncb
*.opensdf
*.sdf
*.cachefile

# Visual Studio profiler
*.psess
*.vsp
*.vspx

# Guidance Automation Toolkit
*.gpState

# ReSharper is a .NET coding add-in
_ReSharper*/
*.[Rr]e[Ss]harper

# TeamCity is a build add-in
_TeamCity*

# DotCover is a Code Coverage Tool
*.dotCover

# NCrunch
*.ncrunch*
.*crunch*.local.xml

# Installshield output folder
[Ee]xpress/

# DocProject is a documentation generator add-in
DocProject/buildhelp/
DocProject/Help/*.HxT
DocProject/Help/*.HxC
DocProject/Help/*.hhc
DocProject/Help/*.hhk
DocProject/Help/*.hhp
DocProject/Help/Html2
DocProject/Help/html

# Click-Once directory
publish/

# Publish Web Output
*.Publish.xml
*.pubxml

# NuGet Packages Directory
## TODO: If you have NuGet Package Restore enabled, uncomment the next line
#packages/

# Windows Azure Build Output
csx
*.build.csdef

# Windows Store app package directory
AppPackages/

# Others
sql/
*.Cache
ClientBin/
[Ss]tyle[Cc]op.*
~$*
*~
*.dbmdl
*.[Pp]ublish.xml
*.pfx
*.publishsettings 
```

* * *

## 回答 #13

> 赞同：15
> 
> 时间：2013-10-18T13:50:55.170

**[http://gitignore.io](http://gitignore.io)**是一个开源实用程序，可以帮助您为项目创建有用的 .gitignore 文件。还有一个命令行 API，您可以通过`gi`命令访问：http: [//gitignore.io/cli](http://gitignore.io/cli)

1.  **OS X**的安装`gi`命令：

     **`$ echo "function gi() { curl http://gitignore.io/api/\$@ ;}" >> ~/.bash_profile && source ~/.bash_profile`** 
***   查看 .gitignore 文件内容（输出：[http://gitignore.io/api/xcode,osx](http://gitignore.io/api/xcode,osx)）：

    `$ gi xcode,osx`

    *   如果要将结果附加到新的 .gitignore 文件，您应该会在终端上看到输出。

    `$ gi xcode,osx >> .gitignore`** 

 *** * *

## 回答 #14

> 赞同：15
> 
> 时间：2016-08-23T04:57:28.613

我有另一个简单的想法
让我们在 cmd 中使用 echo 命令，

`echo ./idea > .gitignore`

这将创建具有文本内容“./idea”的 .gitignore 文件，
您现在可以使用文本编辑器手动更改文件中的数据。

或者干脆

安慰 ：

> 回声 .gitignore notepad.exe

立即编辑 gitignore。

如果您不知道应该为您的 IDE 或操作系统 gitignored 哪些文件，只需转到 www.gitignore.io

> [gitignore.io - 在这里它将为您生成 gitignore 命令或文本，只需说出您的 api 或 os 就是它！只需复制并粘贴到您的文件中。简单的！](http://gitignore.io)

* * *

## 回答 #15

> 赞同：14
> 
> 时间：2012-05-24T19:53:45.803

这是我个人最喜欢的，[http://help.github.com/ignore-files/](http://help.github.com/ignore-files/)

另外，如果您想忽略 Xcode 文件，请参阅[*对 Xcode 项目的 Git 忽略文件*](https://stackoverflow.com/questions/49478/git-ignore-file-for-xcode-projects/49488#49488)[的回答](https://stackoverflow.com/questions/49478/git-ignore-file-for-xcode-projects/49488#49488)*。*

 ** * *

## 回答 #16

> 赞同：12
> 
> 时间：2013-11-26T07:16:01.187

在 windows 中，打开一个 dos prompt(cmd) windows，使用命令行：

```
type > .gitignore 
```

* * *

## 回答 #17

> 赞同：11
> 
> 时间：2020-07-14T14:08:49.787

你可以去[https://www.toptal.com/developers/gitignore](https://www.toptal.com/developers/gitignore)

选择 IDE、操作系统或编程语言。它会自动为您生成。 [![在此处输入图像描述](../Images/dbc03188c5dec90d7f9f6b08bb6baa62.png)](https://i.stack.imgur.com/i70fC.png)

* * *

## 回答 #18

> 赞同：10
> 
> 时间：2014-02-01T21:07:51.997

以下适用于 PowerShell 和命令提示符 (CMD)：

```
echo '*.ignore_me' > .gitignore 
```

我遇到了一个奇怪的问题，Git 实际上不会读取 .gitignore 文件。然后我删除了 .gitignore 文件并使用 Vim 创建了一个，它运行良好。

要添加其他要忽略的文件，只需调用以下命令：

```
echo 'another_file_to_ignore' >> .gitignore 
```

它会将更多文件附加到现有的 .gitignore 文件中。

* * *

## 回答 #19

> 赞同：10
> 
> 时间：2015-04-28T15:04:50.317

# **使用 cmd 创建 .gitignore 的几种方法：**

*   **使用`copy con`命令：**

    1.  打开**cmd**并`cd`告诉你的 git 存储库
    2.  说`copy con .gitignore`并按**Ctrl+Z**。

![在此处输入图像描述](../Images/865cb664969dd5a90823ba3aa4b70def.png)

*   **使用`start notepad .gitignore`命令：**

    1.  打开**cmd**并`cd`告诉你的 git 存储库
    2.  在打开的记事本对话框中说`start notepad .gitignore`并按**是按钮。**

![在此处输入图像描述](../Images/606ac0bbcc85fdb3294cfcfb8ce2db9c.png)

*   **使用`edit .gitignore`命令（仅限 Windows x86）：**

    1.  打开**cmd**并`cd`告诉你的 git 存储库
    2.  说`edit .gitignore`并关闭打开的编辑编辑器。

* * *

## 回答 #20

> 赞同：10
> 
> 时间：2019-01-16T17:45:36.897

**视窗** [![在此处输入图像描述](../Images/2ed68a57eb739dd7a2fc0666e3852b4d.png)](https://i.stack.imgur.com/9v72S.png)

> 文件名：“.gitignore”，另存为类型：所有文件

* * *

## 回答 #21

> 赞同：9
> 
> 时间：2012-05-24T23:58:52.373

If you don't want to have your .gitignore interfere with anyone else's repository, you can also use `.git/info/exclude`. (See [http://help.github.com/ignore-files/](http://help.github.com/ignore-files/))

* * *

## 回答 #22

> 赞同：9
> 
> 时间：2018-11-03T10:39:42.407

您可以直接创建空`.gitignore`文件，`cmd`在您需要添加此文件的位置打开并输入此命令

```
copy con .gitignore 
```

按`ENTER` 您现在处于新创建文件的编辑模式，但我们现在不需要添加任何内容，只需按`F6`然后按`ENTER` 现在您有一个空`.gitignore`文件，在您拥有的任何编辑器中编辑您的文件

* * *

## 回答 #23

> 赞同：8
> 
> 时间：2015-02-20T11:05:33.293

```
1\. Open git terminal
2\. go to git repository of the project
3\. create a .gitignore file by **touch .gitignore** command
4\. **git add .gitignore** command to add ignore file
5\. set ignore rules in the ignore file
6\. run the command **cat .gitignore** 
```

通过在步骤 3 中运行命令，您将在项目目录中获得 .gitignore 文件。谢谢。

* * *

## 回答 #24

> 赞同：8
> 
> 时间：2015-02-17T14:12:04.157

1）创建一个 .gitignore 文件，为此，您只需创建一个 .txt 文件并更改扩展名，如下所示： ![在此处输入图像描述](../Images/72d99d6251c0211f41d55100033730fc.png)

那么您必须在 cmd 上写入以下行来更改名称：

```
 rename git.txt .gitignore 
```

其中 git.txt 是您刚刚创建的文件的名称。

然后您可以打开该文件并将所有您不想添加到存储库中的文件写入。例如我的看起来像这样：

```
#OS junk files
[Tt]humbs.db
*.DS_Store

#Visual Studio files
*.[Oo]bj
*.user
*.aps
*.pch
*.vspscc
*.vssscc
*_i.c
*_p.c
*.ncb
*.suo
*.tlb
*.tlh
*.bak
*.[Cc]ache
*.ilk
*.log
*.lib
*.sbr
*.sdf
*.pyc
*.xml
ipch/
obj/
[Bb]in
[Dd]ebug*/
[Rr]elease*/
Ankh.NoLoad

#Tooling
_ReSharper*/
*.resharper
[Tt]est[Rr]esult*

#Project files
[Bb]uild/

#Subversion files
.svn

# Office Temp Files
~$* 
```

一旦你有了这个，你需要将它添加到你的 git 存储库中。您必须将文件保存在存储库所在的位置。

然后在您的 git bash 中，您必须编写以下行：

![在此处输入图像描述](../Images/7c62fe7284e27b99843988a7f0114073.png)

如果存储库已经存在，那么您必须执行以下操作：

1） git rm -r --cached 。2) 混帐添加。3) git commit -m ".gitignore 正在工作"

如果第 2 步不起作用，那么您应该编写要添加的文件的孔路径。

希望能帮助到你！

* * *

## 回答 #25

> 赞同：8
> 
> 时间：2018-10-31T22:53:59.507

windows：在命令行中：

```
.>.gitignore 
```

这将显示一个错误，但会工作

* * *

## 回答 #26

> 赞同：8
> 
> 时间：2020-04-12T10:24:29.810

要将`.gitignore`文件添加到您的非应用程序，您可以使用

```
> npx add-gitignore 
```

现在您可以键入`"node"`并使用用户空格键来选择它并回车。这会将节点添加`.gitignore`到项目中。

[![在此处输入图像描述](../Images/0b5359bfbfb1eb653c80bf2128c959cb.png)](https://i.stack.imgur.com/AnFUr.png)

* * *

## 回答 #27

> 赞同：6
> 
> 时间：2015-12-12T08:28:13.503

不使用命令行

1.  打开文本编辑器并添加您的规则。
2.  单击文件->另存为
3.  将其保存为“.gitignore”（包括引号）

* * *

## 回答 #28

> 赞同：5
> 
> 时间：2016-01-25T15:08:44.317

```
To force Finder to display hidden files and folders via Terminal:

    Open Terminal
    For OS X 10.9 Mavericks, run this command (lower-case finder):
    defaults write com.apple.finder AppleShowAllFiles TRUE
    For OS X 10.8 Mountain Lion, 10.7, or 10.6, run this command (upper-case Finder):
    defaults write com.apple.Finder AppleShowAllFiles true
    notice the setting for true
    Then run this command: killall Finder
    Then exit Terminal
    To revert back to Finder’s default setting (hide hidden files and folders), 
run the opposite command but with the false setting. 
```

然后运行 ​​killall Finder 并退出终端。

* * *

## 回答 #29

> 赞同：4
> 
> 时间：2012-10-01T21:26:48.777

在工作中，我们使用的是 Windows XP，在文件名末尾键入句点不起作用。创建 .gitignore 文件而不会出现“您必须键入文件名”错误的快速简便方法是：

1.  打开一个 cmd 窗口并输入“edit .gitignore”。
2.  键入“Alt（选择文件菜单），F，S。现在，无论您的 cmd 提示指向何处，您都有一个空的 .gitignore 文件。

您现在可以使用自己喜欢的文本编辑器填充它

* * *

## 回答 #30

> 赞同：4
> 
> 时间：2014-06-10T23:48:39.170

如果您使用[Sublime Text](http://en.wikipedia.org/wiki/Sublime_Text)作为您的 IDE，您可以创建一个新文件并将其保存为 .gitignore。只需使用`Ctrl`+`N`作为新文件，使用`Ctrl`+`S`保存为“.gitignore”。

* * *

## 回答 #31

> 赞同：4
> 
> 时间：2014-03-05T13:32:42.280

要在 Xcode 中添加任何文件，请转到菜单并导航到菜单*File* → *New* → *File* ...

对于 .gitignore 文件，选择*Other* → *Empty*并单击*Next*。*在Save As*字段中输入名称 (.gitignore) ，然后单击*Create*。

对于以点（“.”）开头的文件，将弹出一条警告消息，告诉您该文件将被隐藏。只需点击*使用“。”* 继续...

就这样。

要填写您的全新 .gitignore，您可以在此处找到忽略 Xcode 文件的示例：*[Git ignore file for Xcode projects](https://stackoverflow.com/questions/49478/git-ignore-file-for-xcode-projects/12021580#12021580)*

* * *

## 回答 #32

> 赞同：4
> 
> 时间：2015-09-20T15:07:41.397

您可以输入`new-item .gitignore`Windows Powershell。

* * *

## 回答 #33

> 赞同：3
> 
> 时间：2016-05-06T05:51:34.417

在 mac - 你可以创建一个新的文本文件。[使用https://www.gitignore.io/](https://www.gitignore.io/)添加内容

将文件格式另存为 - 带有附件的富文本文档。将文件名更改为 .gitingore 并`use"."`在弹出窗口时选择附件图像。

注意：因为它是一个隐藏文件，所以您将无法在目录中看到它。但它会被创建。

[![看图片](../Images/c4da1193b939c50544320bf02ddc6fbb.png)](https://i.stack.imgur.com/dLSiC.png)

* * *

## 回答 #34

> 赞同：2
> 
> 时间：2014-12-04T21:05:01.077

我使用记事本++。新文件 > 另存为 > .gitignore （另存为类型 -> 所有类型（*。*））

* * *

## 回答 #35

> 赞同：2
> 
> 时间：2018-07-12T13:41:27.623

有一种非常简单的方法可以创建一个 .gitignore 文件。这个是在 github 中创建的，我很确定大多数源控件都提供了在其中创建文件的功能。逐个图像教程附加图像以供参考。

1.[![在此处输入图像描述](../Images/72d3a18512339ec4333e1688988ac963.png)](https://i.stack.imgur.com/VyuU6.png)

2.[![在此处输入图像描述](../Images/37f0d34c684b4acc71cf812f571e87b5.png)](https://i.stack.imgur.com/2s7jq.png)

3.[![在此处输入图像描述](../Images/aa1c97e8f719077b270de70c262b3d15.png)](https://i.stack.imgur.com/jPyCi.png)

4.[![在此处输入图像描述](../Images/d7c6590f56a02ab0eef31744f115e073.png)](https://i.stack.imgur.com/uNeeP.png)

* * *

## 回答 #36

> 赞同：2
> 
> 时间：2020-03-31T16:00:31.797

我意识到这个问题的重点是如何“创建” gitignore 文件，但如果有人对在文件创建后快速添加内容的方法感兴趣，这是我对那些试图“忽略”文件的人的回答出现在他们的更改列表中。

1.  对您的代码进行更改，这会在您的存储库中生成不需要的更改。
2.  转到 GitHub Desktop 和您的存储库。
3.  选择所有更改并右键单击它们。
4.  将您的更改添加到 gitignore 文件。

[![在此处输入图像描述](../Images/d8e0d718f4b5c70ca39192d269fa05c2.png)](https://i.stack.imgur.com/YW1N1.png)

* * *

## 回答 #37

> 赞同：1
> 
> 时间：2014-11-17T21:36:26.243

是的，Windows 资源管理器不允许您创建此文件名。解决这个问题的另一种简单方法是在目录中创建一个虚拟文件，例如 NewFile.txt ，而不是简单地在 git bash 中重命名它，如下所示：

```
mv NewFile.txt .gitignore 
```

* * *

## 回答 #38

> 赞同：1
> 
> 时间：2014-08-05T16:18:09.407

这正是我的盟友——不过，我仍在试图弄清楚一些`.dll`s 是如何进入的：

[http://www.gitignore.io/](http://www.gitignore.io/) [http://www.diaryofaninja.com/blog/2011/06/01/how-to-easily-create-a-gitignore-file-inside-windows-explorer](http://www.diaryofaninja.com/blog/2011/06/01/how-to-easily-create-a-gitignore-file-inside-windows-explorer)

希望这可以帮助！

* * *

## 回答 #39

> 赞同：0
> 
> 时间：2014-10-10T02:19:55.693

我还没有看到提到的一件事是，当你开始一个新项目时，你实际上可以让 Xcode 自动生成它。为了做到这一点，你必须自己开始做一些无害的黑客攻击......

开始之前：备份“项目模板”，正如我预测的那样，一旦你发现它，你会想要做的不仅仅是我刚才提到的。

现在，转到 /Developer/Library/Xcode/Project Templates/Application/Cocoa Application/ 在此处添加您的 .gitignore 文件。

就这样。当您创建一个新的“Cocoa 应用程序”项目时，.gitignore 文件会自动从您的项目模板中复制。

*如果您想自己编辑模板，请注意。为此使用**nano**；不要使用 Xcode 或 TextEdit，它们会弄乱 unicode 字符！- 好吧，Xcode 也把其他一切都搞砸了。*

注意：还有一个“文件模板”，您还应该在开始修改它们之前对其进行备份。再次：使用**nano**进行编辑；不是 Xcode，也不是 TextEdit。

这是我自己的 .gitignore 文件之一，您可以从中获得灵感：

```
.DS_Store
Icon\15
Icon\r
Icon\n
/*.xcodeproj/*.mode*
/*.xcodeproj/*.pbxuser
/*.xcodeproj/TemplateIcon.icns
/*.xcodeproj/.LSOverride
!/*.xcodeproj/default.*
/*.pbproj/*.mode*
/*.pbproj/*.pbxuser
/*.pbproj/*.perspective*
/build/
*.moved-aside
*~.nib
*~.xib 
```

注意：我使用 Xcode 2.5 和 Xcode 3.1.4（更喜欢 3.1，但它不断向我的控制台发送垃圾邮件）

* * *

## 回答 #40

> 赞同：0
> 
> 时间：2019-07-12T00:32:55.680

在 Mac 上：

*   打开终端并在`defaults write com.apple.finder AppleShowAllFiles YES` 任何地方运行。

*   重新启动查找器，以便您可以看到隐藏文件：`command + option + escape`--->`Relaunch`

然后创建一个文本文件，您将能够将文件扩展名更改为`.gitignore`

* * *

## 回答 #41

> 赞同：-1
> 
> 时间：2019-04-18T02:27:46.247

这是 Windows 中 linux“触摸”的单线版本

```
c:\<folder>\break > .gitignore 
```

这将创建一个空白的 .gitignore 文件，您可以在其中编辑和添加要忽略的项目

```
C:\Users\test>dir .gitignore
 Volume in drive C is Windows
 Volume Serial Number is 9223-E93F

 Directory of C:\Users\test

18/04/2019  02:23 PM                 0 .gitignore
               1 File(s)              0 bytes
               0 Dir(s)  353,009,770,496 bytes free

C:\Users\test> 
```*****

# php - 取消链接失败，文件名中有空格

> ID：10744308
> 
> 赞同：2
> 
> 时间：2012-05-24T19:49:17.360
> 
> 标签：php, html

我正在尝试取消链接已勾选复选框的文件，但我收到此错误，文件名包含“无标题文档”之类的空格（它读取为“无标题”）：

```
Warning: unlink(../pdf_files/Untitled) [function.unlink]: No such file
or directory in C:\xampp\htdocs 
```

我正在使用以下方法传递值：

```
<input type="checkbox" name="file[]" value = ' . $num . ' />'; 
```

该数组似乎`file[]`存储了包含空格的文件名的第一个单词。请问我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-24T19:51:27.797

您需要将`value`属性用引号引起来。否则会显示如下：

```
<input type="checkbox" name="file[]" value=Untitled Document /> 
```

所以浏览器只会看到`Untitled`，`value`然后有一个`Document`什么都不做的流浪属性。尝试以下操作：

```
echo '<input type="checkbox" name="file[]" value="' . $num . '" />'; 
```

# java - 从模板在java中创建动态控制文件

> ID：10744310
> 
> 赞同：0
> 
> 时间：2012-05-24T19:49:21.403
> 
> 标签：java, xml, template-engine

我需要根据一些变量（文件名、错误文件名、要加载的表等）创建一个控制文件（用于 SQLLoader）。

现在我在java中有一个方法可以创建文件并且工作正常。当我必须修改该控制文件的结构时，我的问题就出现了。我需要在 java 源代码中更改它，编译，取消部署以前的应用程序，部署新的应用程序，只是为了更改该控件的文件结构。

我想知道是否有一种方法可以制作模板，我只传递变量（如上所述）但在 java 之外，让我们说某种 xml 或其他东西，所以我只是更改那个“模板”，然后我的应用程序只需填写变量。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T19:57:19.193

在我们的一个应用程序中，我们从代码生成控制文件（在我们的例子中是 C#，但这没关系）从模板（在您的应用程序外部）创建文件，填写变量并让您的应用程序将其复制到SQLLoader 期望它的地方。您只需要让您的 java 应用程序有权写入该目录。

如果是 Java Web 应用程序，这有点棘手，因为从 Web 应用程序写入文件可能会带来安全风险

# .net - 如何检索 DateTimePicker 的下拉状态？

> ID：10744311
> 
> 赞同：5
> 
> 时间：2012-05-24T19:49:21.777
> 
> 标签：.net, vb.net, winforms, datetimepicker

我需要确定日历下拉列表当前是否显示在 WinForms DateTimePicker 中。我有一个继承自 DateTimePicker 的自定义控件，我正在处理 KeyDown 事件以使用导航键执行操作，但如果日历下拉菜单打开，我想绕过该代码，以便用户可以在那里使用他们的导航键。

使用 ComboBox 控件，很容易使用该`.DroppedDown`属性来检查它是否打开，但 DateTimePicker 没有这样的属性。

我目前正在执行以下操作：

```
Private _isDroppedDown As Boolean = False

Private Sub MyDateTimePicker_CloseUp(sender As Object, e As EventArgs) Handles Me.CloseUp
    _isDroppedDown = False
End Sub

Private Sub MyDateTimePicker_DropDown(sender As Object, e As EventArgs) Handles Me.DropDown
    _isDroppedDown = True
End Sub 
```

但是，我想知道是否有比使用变量手动跟踪控件更好的方法来获取控件的 DroppedDown 状态？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T11:42:45.147

您所做的对于一次性实例来说很好，但是如果您的表单/类包含多个控件，*那么*使用变量跟踪它们可能会变得笨拙且难以遵循。

一种简单的替代方法是使用控件的`.Tag`属性来记录变量状态并对其进行测试。但是，更好的方法是创建您自己的类来继承控件并添加您想要的属性，几乎使用您已经拥有的相同代码。因此，在您的情况下，您将使用以下代码添加一个名为“MyDateTimePicker”的类：

```
Public Class MyDateTimePicker
    Inherits DateTimePicker

    Dim _isDroppedDown As Boolean = False

    Public Property IsDroppedDown() As Boolean
        Get
            IsDroppedDown = _isDroppedDown
        End Get
        Set(value As Boolean)
            _isDroppedDown = value
        End Set
    End Property

    Private Sub MyDateTimePicker_CloseUp(sender As Object, e As System.EventArgs) Handles Me.CloseUp
        _isDroppedDown = False
    End Sub

    Private Sub MyDateTimePicker_DropDown(sender As Object, e As System.EventArgs) Handles Me.DropDown
        _isDroppedDown = True
    End Sub

End Class 
```

在下一次构建之后，新的 MyDateTimePicker 类应该出现在项目的“组件”选项卡下的工具箱中。它将具有与 DateTimePickers 相关的所有常见事件、方法和属性，以及您的新`.IsDroppedDown`属性。

哦，如果它是你经常使用的东西，你可以将它创建为一个新的类库，并简单地将它构建的 DLL 包含在你的项目中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T18:37:56.960

似乎没有更好的方法来实现这一点。当前的代码很好。

（只是发布这个答案来结束这个问题。我已经不再尝试建立在 DTP 类上。）

# c# - 如何检测鼠标是否在上下文菜单上

> ID：10744313
> 
> 赞同：2
> 
> 时间：2012-05-24T19:49:33.383
> 
> 标签：c#, .net, wpf

我有一些机制可以在应用程序工作时隐藏鼠标。

但是现在我为主窗口窗体添加了一个上下文菜单。因此，当鼠标位于上下文菜单下时，它总是隐藏鼠标。

**如何检测鼠标是否在上下文菜单上？**

谢谢你的任何线索！

附言

此代码在应用程序工作时隐藏鼠标

```
 void CursorTimer_Tick(object sender, EventArgs e)
        {
            TimeSpan delta = DateTime.Now.Subtract(this.CursorLastMoveTime);
            if (delta.TotalSeconds > 3)
            {
                CursorTimer.Stop();
                Mouse.OverrideCursor = System.Windows.Input.Cursors.None;
            }
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T19:59:31.920

只是一个想法，但为什么不停止你的计时器并在上下文菜单打开时显示你的鼠标。然后启动计时器并在上下文菜单关闭时隐藏鼠标

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-24T20:03:09.997

ContextMenu[控件](http://msdn.microsoft.com/en-us/library/system.windows.controls.contextmenu.aspx)具有一个属性[`IsMouseOver`](http://msdn.microsoft.com/en-us/library/system.windows.uielement.ismouseover.aspx)（与所有其他 UI 控件一样）。您可以使用它来检测鼠标何时悬停在菜单上。

# ios - NSFileManager 创建目录错误 518 NSFileWriteUnsupportedSchemeError

> ID：10744316
> 
> 赞同：16
> 
> 时间：2012-05-24T19:50:01.203
> 
> 标签：ios, objective-c, iphone, nsfilemanager

我试图创建一个目录

```
NSError*error=nil;

NSString* BIDirectory=[[NSSearchPathForDirectoriesInDomains(NSCachesDirectory,NSUserDomainMask,YES) objectAtIndex:0] stringByAppendingPathComponent:@"BI"];
BOOL isDir,flag=YES;
    //if the directory doesn't exist create it.
if(!([[NSFileManager defaultManager] fileExistsAtPath:BIDirectory isDirectory:&isDir]&& isDir))     
    flag=[[NSFileManager defaultManager] createDirectoryAtURL:[NSURL URLWithString:BIDirectory] withIntermediateDirectories:YES attributes:nil error:&error]; 
```

我收到以下错误

```
enter code hereError Domain=NSCocoaErrorDomain Code=518 "The operation couldn’t be completed. (Cocoa error 518.)" UserInfo=0x197190 {NSURL=/var/mobile/Applications/55793654-6CDB-4B07-8FBF-553DC37D583D/Library/Caches/BI} 
```

也许网址是错误的？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-05-24T21:20:57.513

代替

```
 [NSURL URLWithString:BIDirectory] 
```

请用

```
 [NSURL fileURLWithPath:BIDirectory] 
```

在本地文件上使用 URLWithString:BIDirectory 是错误的

# java - BigInteger 中的乘法时间

> ID：10744318
> 
> 赞同：23
> 
> 时间：2012-05-24T19:50:13.313
> 
> 标签：java, benchmarking, biginteger

我的迷你基准：

```
import java.math.*;
import java.util.*;
import java.io.*;
public class c
{
    static Random rnd = new Random();
    public static String addDigits(String a, int n)
    {
        if(a==null) return null;
        if(n<=0) return a;
        for(int i=0; i<n; i++)
            a+=rnd.nextInt(10);
        return a;
    }
    public static void main(String[] args) throws IOException
    {
        int n = 10000; \\number of iterations
        int k = 10;    \\number of digits added at each iteration

        BigInteger a;
        BigInteger b;

        String as = "";
        String bs = "";
        as += rnd.nextInt(9)+1;
        bs += rnd.nextInt(9)+1;
        a = new BigInteger(as);
        b = new BigInteger(bs);
        FileWriter fw = new FileWriter("c.txt");
        long t1 = System.nanoTime();
        a.multiply(b);
        long t2 = System.nanoTime();
        //fw.write("1,"+(t2-t1)+"\n");
        if(k>0) {
            as = addDigits(as, k-1);
            bs = addDigits(as, k-1);
        }
        for(int i=0; i<n; i++)
        {
            a = new BigInteger(as);
            b = new BigInteger(bs);
            t1 = System.nanoTime();
            a.multiply(b);
            t2 = System.nanoTime();
            fw.write(((i+1)*k)+","+(t2-t1)+"\n");
            if(i < n-1)
            {
                as = addDigits(as, k);
                bs = addDigits(as, k);
            }
            System.out.println((i+1)*k);
        }       

        fw.close();
    }
} 
```

它测量 n 位 BigInteger 的乘法时间

结果： ![在此处输入图像描述](../Images/f58985e930712311221e7e095e4a16b3.png)

你可以很容易地看到趋势，但为什么在 50000 位以上会有这么大的噪音？这是因为垃圾收集器还是有其他影响我的结果的东西？执行测试时，没有其他应用程序在运行。

测试结果只有奇数。测试更短（n=1000，k=100）

![在此处输入图像描述](../Images/4a8c03bad73bfc3e82c52d4e12f6c8ac.png)

奇数位 (n=10000, k=10) ![在此处输入图像描述](../Images/f68a1d097d91f785cae3635cc00bac8b.png)

如您所见，在 65000 和 70000 之间有很大的噪音。我想知道为什么...

奇数位 (n=10000, k=10)，`System.gc()`每 1000 次迭代 ![在此处输入图像描述](../Images/e86c1d25570b955e45042444208e9ce3.png) 导致 50000-70000 之间的噪声

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-24T23:25:44.103

我也怀疑这是 JVM 预热效应。不是涉及类加载或 JIT 编译器的预热，而是堆的预热。

在整个基准测试中放置一个（java）循环，并运行多次。（如果这为您提供与以前相同的图表......您将有**证据**表明这不是热身效应。目前您没有任何经验证据。）

* * *

另一种可能性是噪音是由您的基准测试与操作系统和/或机器上运行的其他东西的交互引起的。

*   您正在将计时数据写入无缓冲流。这意味着大量的系统调用，以及（可能）大量细粒度的磁盘写入。
*   您正在对 进行大量调用`nanoTime()`，这*可能会*引入噪音。
*   如果您的机器上正在运行其他东西（例如，您正在浏览网页），这会降低您的基准测试速度并引入噪音。
*   物理内存可能存在竞争……如果您的机器上运行的内存过多，则无法获得内存。

* * *

最后，一定量的噪音是不可避免的，因为这些`multiply`调用中的每一个都会产生垃圾，而垃圾收集器将需要工作来处理它。

* * *

最后，如果您手动运行垃圾收集器（或增加堆大小）以“平滑”数据点，那么您实际上所做的是隐藏`multiply`调用成本之一。生成的图表看起来不错，但它具有误导性：

*   噪音反映了现实生活中会发生什么。
*   真正的成本`multiply`实际上包括运行 GC 以处理调用产生的垃圾的摊销成本。

要获得反映`BigInteger`现实生活中行为方式的测量结果，您需要多次运行测试，计算平均时间并将曲线拟合到平均数据点。

请记住，游戏的真正目的是获得科学有效的结果……而不是平滑的曲线。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-24T22:19:02.110

如果做微基准，必须先“预热”JVM，让JIT优化代码，然后才能衡量性能。否则，您正在衡量 JIT 完成的工作，这可能会改变每次运行的结果。

“噪音”的发生可能是因为超出了 CPU 的缓存并且性能开始下降。

# c# - 如何在 Dropdownlist selectedIndexChanged 中获取行索引？

> ID：10744321
> 
> 赞同：7
> 
> 时间：2012-05-24T19:50:19.360
> 
> 标签：c#, asp.net

我正在使用gridview 和sqldatasource。

我的 gridview 中有一个下拉列表，其中包含 2 个值：是和否。

```
protected void DropDownList1_SelectedIndexChanged(object sender, EventArgs e)
{
    GridViewRow row = GridView1.Rows[e.RowIndex];
    DropDownList ddl = ((DropDownList)row.FindControl("DropdownList1"));
    if(ddl.selectedvalue == "1")
        //etc..
} 
```

我需要获取行索引，因为这`GridViewRow row = GridView1.Rows[e.RowIndex];`在当前事件中不可用。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-05-24T19:57:11.783

正如@mellamokb 已经提到的那样，您始终可以通过 sender 参数获得引发事件的控件，您只需相应地对其进行转换。

```
DropDownList ddl = (DropDownList)sender; 
```

如果您还需要获取`GridViewRow`对`DropDownList`（或 GridView 的 TemplateField 中的任何其他控件）的引用，则可以使用该[`NamingContainer`](http://msdn.microsoft.com/en-us/library/system.web.ui.control.namingcontainer.aspx)属性。

```
GridViewRow row = (GridViewRow)ddl.NamingContainer; 
```

> 但我需要获取行索引以从不是下拉列表的模板字段中获取值是文本框

`GridViewRow`通过使用`row.FindControl("ID")`(TemplateField) 或`row.Cells[index].Controls[0]`(BoundField)获得参考后，您可以获得任何控件 。

例如（假设`TextBox`在另一列中有一个）：

```
TextBox txtName = (TextBox)row.FindControl("TxtName"); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-24T19:52:04.863

如果您要查找的只是下拉列表的值，则以以下形式传入`sender`：

```
DropDownList ddl = sender as DropDownList;
if (ddl.SelectedValue == "1")
   // do something... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-18T07:13:28.530

```
Protected Sub ddlneedlocationcmf_SelectedIndexChanged(ByVal sender As Object, ByVal e As System.EventArgs)
    Dim gvrow As GridViewRow = CType(sender, DropDownList).NamingContainer
    Dim rowindex As Integer = CType(gvrow, GridViewRow).RowIndex

End Sub 
```

# ajax - JQuery-Ajax 标头问题

> ID：10744326
> 
> 赞同：1
> 
> 时间：2012-05-24T19:50:46.837
> 
> 标签：ajax, json, jquery, http-headers

当我尝试使用 JSON 进行 POST 请求时，标题出现问题
这是代码：

```
$.ajax({
                type: "POST",
                url: url,
                data: jsonData,
                dataType: 'json',
                beforeSend: function(xhrObj){
                    xhrObj.setRequestHeader("Content-Type","application/json");
                    xhrObj.setRequestHeader("Accept","application/json");
                },
                error: function(){
                    alert("Fail");
                },
                success: function(){
                    alert("Success");
                }
            }); 
```

这是 Firebug 显示的请求标头。

```
OPTIONS /path HTTP/1.1
Host: 192.168.15.109:8080
User-Agent: Mozilla/5.0 (Windows NT 6.1; rv:12.0) Gecko/20100101 Firefox/12.0 FirePHP/0.7.1
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
Accept-Language: en-us,en;q=0.5
Accept-Encoding: gzip, deflate
DNT: 1
Connection: keep-alive
Origin: http://localhost
Access-Control-Request-Method: POST
Access-Control-Request-Headers: content-type
x-insight: activate
Pragma: no-cache
Cache-Control: no-cache 
```

和响应标头：

```
HTTP/1.1 204 No Content
Date: Thu, 24 May 2012 19:17:01 GMT
Allow: OPTIONS,POST 
```

如您所见，标题与我指定的标题不匹配，但是当我使用 CURL 时，标题是这些标题：

```
POST /path HTTP/1.1
User-Agent: curl/7.25.0 (i386-pc-win32) libcurl/7.25.0 OpenSSL/0.9.8u zlib/1.2

Host: localhost:8080
Accept: */*
Content-Type: application/json
Content-Length: 5 
```

对此有任何想法或解决方案吗？

我还修改了 JQuery Source 以将 Ajax 发送的标头的默认值设置为 JSON，但是没有用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T15:15:41.230

实际上，这是一个跨域问题，我将我的 URL 定义为 IP，因此浏览器将其解释为跨域请求。

感谢一切！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T20:14:52.200

似乎是*同源政策*问题。使用`dataType='jsonp'`应该可以，但这可能需要进行其他更改。

有关深入解释，请参阅[https://developer.mozilla.org/en/http_access_control 。](https://developer.mozilla.org/en/http_access_control)

# coldfusion - 具有空值的查询列上的 ArrayMin

> ID：10744327
> 
> 赞同：1
> 
> 时间：2012-05-24T19:50:48.303
> 
> 标签：coldfusion

CF8

我正在使用这一行来获取查询列的 MIN 值。我刚刚注意到记录集中的空值会导致错误。有没有一种简单的方法来告诉 ArrayMin 跳过空值而不必循环列并加载包含所有非空值的数组？

```
<cfset temp_data_min = #round(ArrayMin(query_x["some_field"]))#> 
```

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-24T21:18:13.283

根据 Al 所说的使用查询的查询，只需将 Min() 调用添加到查询中即可。

```
<cfquery name="query_x_fixed" dbtype="query">
SELECT Min(some_field) as some_field
FROM query_x
WHERE some_field IS NOT NULL
</cfquery>

<cfset temp_data_min = round(query_x_fixed.some_field)> 
```

经测试可在 CF9 中工作

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T10:56:57.120

您可以通过将列转换为列表然后转换为数组来将解决方案保留在一行。 `ListToArray`默认忽略空列表项，这就是空值。

```
<cfset temp_data_min = Round(ArrayMin(ListToArray(ValueList(query_x.some_field, Chr(7)), Chr(7))))> 
```

这应该比任何其他提议的解决方案都快，并且代码更少。

我已经为使用逗号作为数字中的小数分隔符的语言环境指定了分隔符。如果您在美国或其他使用“.”的地区 然后您可以删除分隔符参数。

使用的附加功能：

*   [ListToArray](http://livedocs.adobe.com/coldfusion/8/htmldocs/help.html?content=functions_l_21.html)
*   [价值清单](http://livedocs.adobe.com/coldfusion/8/htmldocs/help.html?content=functions_t-z_13.html)
*   [铬](http://livedocs.adobe.com/coldfusion/8/htmldocs/help.html?content=functions_c-d_04.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-24T20:01:11.053

最简单的方法可能是只使用该列进行查询并删除空值。

```
<cfquery name="query_x_fixed" dbtype="query">
SELECT some_field
FROM query_x
WHERE some_field IS NOT NULL
</cfquery>

<cfset temp_data_min= round(ArrayMin(query_x_fixed["some_field"]))> 
```

（未测试）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-24T20:05:21.000

您可以遍历您的数组并创建一个不包含任何空值的新数组。然后将 ArrayMin 函数应用于新数组。

```
<cfset newArray = []>
<cfloop index="x" array="#query_x["some_field"]#">
  <cfif x NEQ 'null'>
      <cfset arrayAppend(newArray, x)>
  </cfif>
</cfloop>
<cfset temp_data_min = round(ArrayMin(newArray))> 
```

未测试

# xml - 解析 XML 问题（单个对象与多个对象）

> ID：10744329
> 
> 赞同：1
> 
> 时间：2012-05-24T19:50:56.097
> 
> 标签：xml, apache-flex, parsing, actionscript

我正在构建一个弹性（移动）项目。当我想解析 Web 服务的结果时，我遇到了（一些令人沮丧且可能很愚蠢）的问题。当我取回一个对象时，我需要使用一种解析方法，而当我从 web 服务接收到多个对象（ArrayCollection）时，我需要使用另一种非常烦人的解析方法。我已经包含了一个强调问题的代码示例。此外，我还提供了一个可能的解决方案，在我看来这很糟糕。您还可以找到 XML 大纲和一些输出数据。感谢您的任何反馈。

## 代码：

```
public function saveData(event):void{
            locationDAO = new LocationDAO();
            parameterDAO = new ParameterDAO();

            for each (var datObj:Object in event.result.Envelope.Body.pollResponse.locs)
            {
                var data:Data = new Data();
                            if (obj.locParams.length > 1){
                data.loc_id = locationDAO.getID(datObj.loc);

                for each (var p:Object in event.result.Envelope.Body.pollResponse.locs.locParams.params){
                    data.par_id = parameterDAO.getID(p.abbr);
                    if (p.measures.measure != null){
                        data.date = StringFormat.StringToDate(p.measures.measure.ctDate);
                        data.trend =  p.measures.measure.trend;
                        data.value = p.measures.measure.val;
                    }else{
                        //prediction
                        data.date = StringFormat.StringToDate(p.measures.prediction.ctDate);
                        data.trend = "/";
                        data.value = p.measures.prediction.val;
                    }
                    if (!dataDAO.exist(data)){
                        dataDAO.insert(data);
                    }else
                        dataDAO.update(data);
                }
            }
            locationDAO = null;
            parameterDAO = null;
        } 
```

## XML:

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
   <soapenv:Body>
      <pollResponse xmlns="an-url">
         <locs>
            <locParams>
               <loc>dummyLoc1</loc>
               <params>
                  <param>
                     <abbr>abbr1</abbr>
                     <measures>
                        <measure>
                           <ctDate>date1</ctDate>
                           <calc>false</calc>
                           <val>-178.901692</val>
                        </measure>
                     </measures>
                  </param>
               </params>
            </locParams>
            <locParams>
               <loc>dummyLoc2</loc>
               <params>
                  <param>
                     <abbr>abbr2</abbr>
                     <measures>
                        <prediction>
                           <ctDate>date2</ctDate>
                           <val>115.0</val>
                        </prediction>
                     </measures>
                  </param>
                  <param>
                     <abbr>abbr3</abbr>
                     <measures>
                        <prediction>
                           <ctDate>date3</ctDate>
                           <val>11.0</val>
                        </prediction>
                     </measures>
                  </param>
               </params>
            </locParams>
         </locs>
         <msgs/>
      </pollResponse>
   </soapenv:Body>
</soapenv:Envelope> 
```

## 对象测试数据的打印输出：（使问题更清楚。）

```
//With one item -> I get one object, with multiple items I get an ArrayCollection.
This brings up an difference in parsing because the level is different.

    ---------------------------------------------------------

        event.result.Envelope.Body.pollResponse.locs

    ---------------------------------------------------------

    //////// 1 Row
(Object)#0
  locParams = (Object)#1
    loc = "VSHI"
    params = (Object)#2
      param = (Object)#3
        abbr = "XQU"
        measures = (Object)#4
          prediction = (Object)#5
            ctDate = "date1"
            pdtDate = "date2"
            val = 115

    //////// Multiple rows
(Object)#0
  locParams = (mx.collections::ArrayCollection)#1
    filterFunction = (null)
    length = 2
    list = (mx.collections::ArrayList)#2
      length = 2
      source = (Array)#3
        [0] (Object)#4
          loc = "MIL"
          params = (Object)#5
            param = (Object)#6
              abbr = "XX1"
              measures = (Object)#7
                measure = (Object)#8
                  calc = false
                  ctDate = "date1"
                  trend = "S"
                  val = 19
        [1] (Object)#9
          loc = "VSI1"
          params = (Object)#10
            param = (Object)#11
              abbr = "KSI"
              measures = (Object)#12
                prediction = (Object)#13
                  ctDate = "date1"
                  pdtDate = "date3"
                  val = 115
      uid = "SELKFDS03302309303930209"
    sort = (null)
    source = (Array)#3

    ---------------------------------------------------------

      event.result.Envelope.Body.pollResponse.locs.locParams

    ---------------------------------------------------------

    //////// 1 Row
(Object)#0
  locParams = (Object)#1
    loc = "VSI1"
    params = (Object)#2
      param = (Object)#3
        abbr = "HO3"
        measures = (Object)#4
          prediction = (Object)#5
            ctDate = "date1"
            pdtDate = "date2"
            val = 115

    //////// Multiple Rows
(mx.collections::ArrayCollection)#0
  filterFunction = (null)
  length = 2
  list = (mx.collections::ArrayList)#1
    length = 2
    source = (Array)#2
      [0] (Object)#3
        loc = "DPS2"
        params = (Object)#4
          param = (Object)#5
            abbr = "WI2"
            measures = (Object)#6
              measure = (Object)#7
                calc = false
                ctDate = "date1"
                trend = "S"
                val = 14.356693
      [1] (Object)#8
        loc = "VSH1"
        params = (Object)#9
          param = (Object)#10
            abbr = "SO2"
            measures = (Object)#11
              prediction = (Object)#12
                ctDate = "date1"
                pdtDate = "date2"
                val = 115
    uid = "XXLSKS0OID0I0I30J3LJ"
  sort = (null)
  source = (Array)#2 
```

## 一个糟糕的解决方案：

```
for each (var obj:Object in ArrayUtil.toArray(event.result.Envelope.Body.pollResponse.locs))
            {
                var data:Data = new Data();
                if (obj.locParams.length > 1){
                    trace("array of objects")
                    for each (var arrObj:Object in obj.locParams){
                        data = new Data();
                        data.loc_id = locationDAO.getID(arrObj.loc);    

                        if (arrObj.params.param.length > 1){
                            //multiple params
                            for each (var arrParam:Object in obj.locParams.params.param ){
                                if (arrParam.measures.measure != null){
                                    //measure
                                    data.date  = StringFormat.StringToDate(arrParam.measures.measure.ctDate);
                                    data.trend =  arrParam.measures.measure.trend;
                                    data.value = arrParam.measures.measure.val;
                                    //NOTE: this can go further: there can be multiple measures
                                }else{
                                    //prediction
                                    data.date = StringFormat.StringToDate(arrParam.measures.prediction.ctDate);
                                    data.trend = "/";
                                    data.value = arrParam.measures.prediction.val;
                                    //NOTE: this can go further: there can be multiple predictions
                                }
                            }
                        }else{
                            //1 param 
                            var par:Object = arrObj.params.param;
                            if (par.measures.measure != null){
                                //measure
                                data.date  = StringFormat.StringToDate(par.measures.measure.ctDate);
                                data.trend =  par.measures.measure.trend;
                                data.value = par.measures.measure.val;
                                //NOTE: this can go further: there can be multiple measures
                            }else{
                                //prediction
                                data.date = StringFormat.StringToDate(par.measures.prediction.ctDate);
                                data.trend = "/";
                                data.value = par.measures.prediction.val;
                                //NOTE: this can go further: there can be multiple predictions
                            }

                        }
                    }
                }else{
                    trace("1 object, no array");
                    data.loc_id = locationDAO.getID(obj.locParams.loc);

                    if (obj.locParams.params.param.length > 1){
                        //multiple params
                        for each (var arrParam:Object in obj.locParams.params.param ){
                            if (arrParam.measures.measure != null){
                                //measure
                                data.datum  = StringFormat.StringToDate(arrParam.measures.measure.ctDate);
                                data.trend =  arrParam.measures.measure.trend;
                                data.waarde = arrParam.measures.measure.val;
                                //NOTE: this can go further: there can be multiple measures
                            }else{
                                //prediction
                                data.datum = StringFormat.StringToDate(arrParam.measures.prediction.ctDate);
                                data.trend = "/";
                                data.waarde = arrParam.measures.prediction.val;
                                //NOTE: this can go further: there can be multiple predictions
                            }
                        }
                    }else{
                        //1 param 
                        var par:Object = obj.locParams.params.param;
                        if (par.measures.measure != null){
                            //measure
                            data.date  = StringFormat.StringToDate(par.measures.measure.ctDate);
                            data.trend =  par.measures.measure.trend;
                            data.value = par.measures.measure.val;
                            //NOTE: this can go further: there can be multiple measures
                        }else{
                            //prediction
                            data.date = StringFormat.StringToDate(par.measures.prediction.ctDate);
                            data.trend = "/";
                            data.value = par.measures.prediction.val;
                            //NOTE: this can go further: there can be multiple predictions
                        }
                    }
                }
            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T23:36:14.733

一种方法是在开始解析例程之前检查对象的类型，如果它不是类型，则`ArrayCollection`创建一个新`ArrayCollection`对象并将对象添加到其中：

```
var collection:ArrayCollection;

var result_1:Object = {};
var result_2:ArrayCollection = new ArrayCollection([{}, {}]);

trace("result 1", convertToArrayCollection(result_1));
trace("result 2", convertToArrayCollection(result_2));

// result 1 [object Object]
// result 2 [object Object],[object Object]

function convertToArrayCollection(obj:*):ArrayCollection
{   
    // If obj is an ArrayCollection return it. If obj is  
    // not an ArrayCollection, create a new ArrayCollection
    // and add obj as the only element.
    return (obj is ArrayCollection)
        ? ArrayCollection(obj)
        : new ArrayCollection([obj]);
} 
```

# java - 在给定 HttpServletRequest 的情况下，为网页提供服务的好模式是什么？

> ID：10744343
> 
> 赞同：0
> 
> 时间：2012-05-24T19:51:28.607
> 
> 标签：java, velocity, dynamic-pages

我创建了一个抽象基类`Page`，它弄清楚如何构建动态网页。我正在尝试想出一个好方法来`Page`根据`GET`作为`HttpServletRequest`. 例如...

```
public class RootServlet extends HttpServlet {

    @Override
    public void doGet(HttpServletRequest request, HttpServletResponse response) {

        Page page = Page.generatePage(request);

        // do stuff with page and write back response
    }
} 
```

在该`generatePage()`方法中，我必须以某种方式找出正在请求的页面，构建正确的页面，然后返回它的实例。但我不确定如何做好这件事......例如，我需要处理这些类型的 URL：

```
http://example.com/       : build the default home page
http://example.com/ab123  : build the page corresponding to the given token "ab123"
http://example.com/about/ : build the "about" page
http://help.example.com/  : build the "help" page 
```

这些“页面”中的每一个都扩展了抽象基类`Page`，因此它们知道如何构建自己，但我不确定如何确定`AboutPage`需要构建的，或者`HelpPage`与默认相反的`HomePage`.

我使用[Apache Velocity](http://velocity.apache.org/)作为模板引擎，所以这些`Page`对象实际上只包含生成该页面所需的重要信息，例如要使用的样式和脚本，以及要在页面上显示的相关内容。

我认为有更好的方法来做到这一点，而不是查看 URL 的末尾并查看“about”是否是构建的子字符串`AboutPage`，例如。有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T20:02:52.247

有几十个现成的工具框架可以为您做到这一点。至少我建议 Spring MVC 可以使用速度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T20:03:15.323

Spring MVC 有一种很好的方法来处理这类事情，使用带有注释方法的控制器来处理您想要的特定模式。

他们在这里有一个很好的示例应用程序：

[https://github.com/SpringSource/spring-mvc-showcase](https://github.com/SpringSource/spring-mvc-showcase)

无论如何，使用 Java 代码构建页面并不是一个好习惯。

# node.js - node.js expressjs模式匹配不相等

> ID：10744351
> 
> 赞同：1
> 
> 时间：2012-05-24T19:51:54.660
> 
> 标签：node.js, express

我正在使用带有节点的 expressjs 并同时运行 https 和 http。

我想要求所有路由都`/secure/*`使用 https。这个完成了：

```
app.all("/secure/*", function(req, res, next) {
    if (!req.connection.encrypted) {
        res.redirect("https://" + req.headers["host"].replace(new RegExp(config.http_port, "g"), config.https_port) + req.url); 
    } else {
        return next();
    };
}); 
```

但是，我还想要求所有未使用`/secure/*`并尝试访问 https 的路由都使用相同的方法重定向到 http。

我试过这样做：

```
app.all("*", function(req, res, next) {
    console.log(req);
    if (req.connection.encrypted) {
        res.redirect("http://" + req.headers["host"].replace(new RegExp(config.https_port, "g"), config.http_port) + req.url); 
    } else {
        return next();
    };
}); 
```

但是在访问 https 页面时，我最终陷入了重定向循环。有没有办法指定所有路线，除了那些`/secure/*`？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-24T20:02:51.333

您的问题的一个简单解决方案是：

```
app.all("*", function(req, res, next) {
    if (req.connection.encrypted && !/^\/secure/.test(req.url)) {
        res.redirect("http://" + req.headers["host"].replace(new RegExp(config.https_port, "g"), config.http_port) + req.url); 
    } else {
        return next();
    };
}); 
```

仅当 URL 不以 . 开头时才进行重定向`/secure`。

但是，我建议不要在 URL 中使用多余的“安全”标签，而是将某些路径标记为`requireHTTP`或`requireHTTPS`。您知道您可以将多个方法传递给`app.get`其他此类路由器方法，对吗？假设您定义`requireHTTP`and `requireHTTPS`（这将与您的原始函数相同），您只需执行以下操作：

```
app.get("/path/to/keep/encrypted", requireHTTPS, function(req, res) {
    // Rest of controller
});

app.get("/path/to/keep/public", requireHTTP, function(req, res) {
    // Rest of controller
});

app.get("/path/you/dont/care/about/encryption/status", function(req, res) {
    // Rest of controller
}); 
```

那应该这样做。

# php - PHP, OOP, 静态

> ID：10744357
> 
> 赞同：4
> 
> 时间：2012-05-24T19:52:44.067
> 
> 标签：php, oop, static

我正在学习 PHP，OOP，我在静态，在这个[php.net/static](http://php.net/manual/en/language.oop5.static.php)我不明白这句话

```
Calling non-static methods statically generates an E_STRICT level warning. 
```

我确实通过上面的句子理解它仅对方法有效（不适用于属性），但实际上我没有成功理解它，我很高兴如果有什么可以告诉我解释上面句子的代码，祝你愉快星期。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-24T19:57:39.940

这是他们对您所询问的句子的含义的示例。

考虑以下具有一种方法的类（它不是静态的）。

```
class Test
{
    function method()
    {
        echo "Hello from method";
    }
}

Test::method();  // attempt to statically call a non-static method 
```

这是输出：

> **严格标准**：非静态方法 Test::method() 不应在第 12 行的 /obj.php 中静态调用
> Hello from method

如您所见，尽管它不是静态方法，但它在调用静态时*确实执行了该方法，但是显示了严格的错误消息。*

如果方法`method()`引用了关键字`$this`，那么您将遇到致命错误，因为`$this`在静态方法调用的上下文中不存在。因此，虽然在技术上可以静态调用非静态类方法，但不应该这样做。

编辑：

甚至允许您静态调用非静态类成员的原因是因为在类方法的上下文中 PHP4 中不存在 static 关键字，因此如果您在 PHP4 中设计静态类或方法，则没有关键字可以指示它，您只需以静态方式调用它。现在，如果方法被静态调用但声明中没有 static 关键字，PHP5 会发出警告。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-24T19:59:40.020

```
class Foo
{
    public static $my_static = 'foo';
    public $my_non_static = 'bar';

    public function staticValue() {
        return self::$my_static;
    }

    public function nonStaticValue() {
        return self::$my_non_static;
    }
}

print Foo::$my_static . "\n"; // OK
print Foo::staticValue(). "\n"; // E_STRICT

print Foo::$my_non_static . "\n"; // Fatal
print Foo::nonStaticValue(). "\n"; // Fatal 
```

`print Foo::$my_static . "\n";`没问题 - 静态访问的静态属性。

`print Foo::staticValue(). "\n";`给出 E_STRICT - 静态访问的非静态方法，但不是致命错误，因为此方法不访问非静态属性。

其他两个给出致命错误，因为不能静态访问非静态字段。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-24T19:58:22.840

这是因为即使您可以静态调用非静态方法，也不应该这样做，并且它会被记录下来。

```
class Foo {
    function bar(){
        print "you should not do that";
    }
} 
```

`Foo::bar();`实际上会起作用，但您会收到**E_STRICT**警告，因为您**可以**这样做，但您不应该这样**做**。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-24T19:57:52.917

如果一个方法是非静态的，则意味着它属于一个类的一个实例。例如，如果我们有一个类`Car`调用了一个方法`getDamage()`（它计算汽车的损坏程度），那么您不应该以静态方式调用此方法。

您应该只创建`Car`该类的一个实例并调用`getDamage()`该实例。这是有道理的，因为一辆特定的汽车可能会损坏 25%，而另一辆车可能会损坏 70%。

但是以静态方式调用`getDamage()`是没有意义的：静态方法不属于类的特定实例，而是属于类本身。并且一个`Car`类没有给出结果的有用方法`getDamage()`。您仍然可以计算一个值（也许`0`），但它没有意义。

# eclipse - 通过 testng.xml 创建一个 TestNG 套件以在 Eclipse (Windows) 中运行

> ID：10744358
> 
> 赞同：1
> 
> 时间：2012-05-24T19:52:57.327
> 
> 标签：eclipse, selenium-rc, testng

我对自动化有点陌生。我不知道任何正式的编程语言，但通过研究和决心已经能够做到。但是，因此，我的术语很差，如果我没有说清楚，请原谅我：D

我已经成功地用 java 编写了几十个 Selenium 测试脚本，但是这种 .xml 格式是一个新领域，我似乎无法为像我这样的菜鸟找到任何像样的文档。

这是我的问题：

我目前正在通过 Eclipse 部署我的 Selenium (RC) TestNG 测试类。我知道我必须编写自己的自定义 testng.xml 文件来部署套件。也就是说，我对这个文件的上下文感到困惑。它看起来很简单，但我似乎无法让它执行我在这里折腾的任何类。

```
<!DOCTYPE suite SYSTEM "http://testng.org/testng-1.0.dtd" >

<suite name="Suite" verbose="1" >
  <test name="NameofMyTest" >
      <classes>
       <class name="O13TestNG" />
       <class name="U13PITestNg2" />
  </classes>
  </test>
</suite> 
```

但是，我调用的这些类位于不同的包中。通过 testng.xml 将其作为 TestNG 套件运行时，它们是否必须在同一个包中？当作为 JUnit 套件运行时，我只需导入套件类中的类并在 Ecplipse 中将其作为 Junit 测试运行，但似乎 TestNG 提供的所有花哨的报告都没有随 JUnit 一起提供。或者是吗？如果是这样，我如何/在哪里找到它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T22:45:58.383

您可能应该将包名称与类一起指定。例如：

```
<class name="com.company.project.YourTest" /> 
```

至于报告：众所周知，TestNG 的报告能力优于 JUnit。TestNG 的功能也比较丰富，所以我一定会坚持下去。

# mysql - MySQL查询中的用户定义变量

> ID：10744359
> 
> 赞同：0
> 
> 时间：2012-05-24T19:52:58.080
> 
> 标签：mysql, variables, procedure

我正在尝试在 SQL 中创建一个数据抽象，我可以在其中选择要查看员工信息的季度。现在我使用命名系统 Q1_P1_N 来表示“Quarter 1 Project 1 name”，而 Q1_P1_W 是“...project 1 weight”。员工可以从事多个项目。到目前为止，我所拥有的是：

```
CREATE PROCEDURE effort_lookup4(IN proj_name VARCHAR(20), IN quarter INT(1))
BEGIN
SET @Qx_P1_N = CONCAT('Q', quarter, '_P1_N');
SET @Qx_P2_N = CONCAT('Q', quarter, '_P2_N');
SET @Qx_P1_W = CONCAT('Q', quarter, '_P1_W');
SET @Qx_P2_W = CONCAT('Q', quarter, '_P2_W');
SET @var1 = (SELECT sum(@Qx_P1_W) FROM table_test WHERE @Qx_P1_N = proj_name);
SET @var2 = (SELECT sum(@Qx_P2_W) FROM table_test WHERE @Qx_P2_N = proj_name); 
```

我的问题是，每当我使用@Qx_P1_N 或@Qx_P1_W 调用查询时，我实际上并没有传递正确的查询，而且我无法弄清楚我做错了什么。这应该很容易我只是使用 SQL 的新手。

这是表格的示例，除了它在 Q2_P1_N 等各个季度中继续存在：

```
+------+---------+---------+---------+---------+
| EMPID| Q1_P1_N | Q1_P2_N | Q1_P1_W | Q1_P2_W |
+------+---------+---------+---------+---------+
| 1000 | ProjA   | ProjB   |    0.50 |    0.50 |
| 1001 | ProjA   | NULL    |    1.00 |    NULL |
| 1010 | ProjB   | NULL    |    1.00 |    NULL |
| 1011 | ProjA   | ProjB   |    0.50 |    0.50 |
+------+---------+---------+---------+---------+ 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T20:28:22.810

要使用现有数据结构做你想做的事情，需要使用[准备好的语句](http://dev.mysql.com/doc/en/sql-syntax-prepared-statements.html)（你将所需的语句构建为你 then和`SELECT`的字符串）。`PREPARE``EXECUTE`

但是，您可能会发现更改数据结构更容易：

```
+--------+---------+---------+--------+
| EMPID| 季度 | 项目 | 重量 |
+--------+---------+---------+--------+
| 1000 | 1 | 一个 | 0.50 |
| 1000 | 1 | 乙| 0.50 |
| 1001 | 1 | 一个 | 1.00 |
| 1010 | 1 | 乙| 1.00 |
| 1011 | 1 | 一个 | 0.50 |
| 1011 | 1 | 乙| 0.50 |
+--------+---------+---------+--------+

```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T20:05:58.943

在您的选择语句中，字段中有一个变量，该变量应该是表中的列名。您需要将 @Qx_P1_W 切换为 Q1_P1_W。

# asp.net - 回发到同一页面时出现无效的视图状态错误

> ID：10744362
> 
> 赞同：1
> 
> 时间：2012-05-24T19:53:31.213
> 
> 标签：asp.net, viewstate, server.transfer

我遇到了*Invalid Viewstate*错误的一些问题，我可以理解它为什么会发生，但我不知道如何解决它。

我有一个与此类似的页面，`/story/?id=123`但我使用的是`Server.Transfer`与此页面不同的页面。

所以我已经设置并且它工作正常，直到页面回发给自己`/info`。`Server.TransferRequest("/story/?id=123")`

我们在这个页面上有一个登录表单，它只是重新加载页面，但是当它重新加载页面时，它似乎添加`/?id=123`到 URL 的末尾，所以它以这样的方式结束，`/info/?id=123`从而导致*Invalid Viewstate*错误。

我已经尝试添加`EnableViewStateMac="false"`- 这修复了错误，但它没有按预期登录用户，因此它没有给出所需的结果。

所以我的问题是：

1.  有没有更好的方法来重定向到我的页面，`Server.TransferRequest`但仍然保留漂亮的 URL？`Response.Redirect`-如果我能避免它，我不想这样做。

2.  如果没有，是否有一种简单的方法来修复这个不需要我添加的错误`EnableViewStateMac="false"`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T21:50:41.230

[http://support.microsoft.com/kb/316920](http://support.microsoft.com/kb/316920)

我相信那篇文章将解释您遇到问题的原因，并提供解决方案。

我知道您不想使用 Response.Redirect，但我认为这也可以解决问题。

> # PRB：使用 Server.Transfer 时出现“视图状态无效”错误消息
> 
> 本文之前发布于Q316920
> 
> ## 已停用的 KB 内容免责声明
> 
> 本文是关于 Microsoft 不再提供支持的产品。因此，本文按“原样”提供，不再更新。
> 
> ## 症状
> 
> 使用 时`HttpServerUtility.Transfer("page name", true)`，您会收到以下错误消息：
> 
> > 此页面的视图状态无效，可能已损坏
> 
> ## 原因
> 
> 出现此问题的原因是元素的`EnableViewStateMac`属性 默认设置为。当此属性设置为 true 时，ASP.NET 在从客户端回发页面时对页面的视图状态运行消息身份验证检查 (MAC)。此检查确定页面的视图状态是否在客户端上被修改。出于安全目的，建议您将此属性设置为。`<pages>``true``true`
> 
> 当您调用该`Server.Transfer`方法并将第二个参数设置为 时`true`，您将保留`QueryString`和`Form` 集合。表单域之一是隐藏的 __VIEWSTATE 表单域，它保存页面的视图状态。视图状态消息验证检查失败，因为消息验证检查只检查每个页面。因此，调用页面的视图状态`Server.Transfer`在目标页面上无效。
> 
> 视图状态是页面范围的，仅对该页面有效。视图状态不应跨页面传输。
> 
> ## 解析度
> 
> 若要解决此问题，请使用下列方法之一。
> 
> ### 决议 1
> 
> 在页面之间传输值以将您的服务器控制值传递给其他页面。有关详细信息，请参阅以下 MSDN 文档： [在页面之间传递服务器控件值](http://msdn2.microsoft.com/en-us/library/6c3yckfw(vs.71).aspx) 这要求您为要从目标页面访问的控件的每个属性创建公共属性。
> 
> 如果您有许多控件，并且想要从另一个页面访问这些控件的属性，您也可以将这些控件声明为公共变量。例如：
> 
> **第1页.aspx**
> 
> ```
> Public Class Page1
>     Public WithEvents TextBox1 As System.Web.UI.WebControls.TextBox
> 
>     'Insert your code here.
> End Class 
> ```
> 
> **Page2.aspx**
> 
> ```
> Dim sourcePage As Page1
> sourcePage = CType(Context.Handler, WebForm1)
> Response.Write(sourcePage.TextBox1.Text) 
> ```
> 
> ### 决议 2
> 
> 调用时不要传递第二个参数（`false`默认情况下）`Server.Transfer`。例如：
> 
> ```
> Server.Transfer("<page name>") 
> ```
> 
> 此代码不会将`QueryString`和`Form`字段发送到被调用的页面。当没有数据传输时，ASP.NET 不会运行消息身份验证检查。
> 
> ## 更多信息
> 
> ### 重现行为的步骤
> 
> 1.  创建一个名为 WebForm1.aspx 的 .aspx 页面，将执行转移到另一个页面。将以下代码添加到 WebForm1.aspx：
>     
>     
>     
>     ```
>     <%@ Page language="vb" AutoEventWireup="true" %>
>     
>     <html>  
>       <body>  
>         <form id="WebForm1" method="post" runat="server">
>           <asp:TextBox id="txtName" runat="server">Your Name</asp:TextBox><br>
>           <asp:Button id="Button1" runat="server" Text="Submit" OnClick="Button1_Click"></asp:Button>
>         </form>   
>       </body>
>     </html>
>     
>     <script runat=server>
>     Sub Button1_Click(sender As Object, e As System.EventArgs)
>       Server.Transfer("WebForm2.aspx",true)
>     End Sub
>     
>     </script> 
>     ```
>     
>     
> 2.  创建另一个名为 WebForm2.aspx 的 .aspx 页，然后添加以下代码：
>     
>     
>     
>     ```
>     <%@ Page language="vb" AutoEventWireup="true" %>
>     
>     <html>
>       <body>  
>         <form id="WebForm2" method="post" runat="server">
>           <asp:Label id="lblName" runat="server" >Web Form 2</asp:Label>
>         </form>
>     
>       </body>
>     </html>
>     
>     <script runat=server>
>     Sub Page_Load(sender As Object, e As EventArgs)
>     
>     Dim thisPage As System.Web.UI.Page
>     Dim nameTextBox As TextBox
>     
>       thisPage = CType(Context.Handler, System.Web.UI.Page)
>       nameTextBox =  CType(thisPage.FindControl("txtName"), System.Web.UI.Control)
>     
>       lblName.Text = "Your name is '" & nameTextBox.Text & "'."   
>     
>     End Sub
>     
>     </script> 
>     ```
>     
>     
> 3.  在浏览器中打开 WebForm1.aspx，然后单击**提交**。

# shell - 如何将一个巨大的字符串写入文件

> ID：10744371
> 
> 赞同：0
> 
> 时间：2012-05-24T19:54:40.173
> 
> 标签：shell, large-data

我在复制/粘贴上有一大串文本，将其写入文件的最佳方法是什么。它使我拥有的任何 GUI 文本编辑器崩溃，当我尝试使用 vi / nano 时，它需要永远。

我在 Macbook Pro i5 上运行 OSX

我试过的文本编辑器是 textedit、textmate、vi 和 nano

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-16T13:06:25.057

这是一种方式：

```
xclip -o > file 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T20:01:06.293

这可能有用： [pbcopy](http://developer.apple.com/library/mac/#documentation/Darwin/Reference/ManPages/man1/pbcopy.1.html)

这个现有的帖子也与您的问题有关： [管道到/从剪贴板](https://stackoverflow.com/questions/749544/pipe-to-from-clipboard)

# javascript - 附加来自多个页面的查询字符串

> ID：10744376
> 
> 赞同：1
> 
> 时间：2012-05-24T19:55:12.300
> 
> 标签：javascript

我目前对此感到困惑。我已经窥探了一会儿，没有找到任何**仅使用 JS**来执行此操作的具体答案，所以我的问题是这样的。如果我正在浏览多个页面并希望在附加到 url 之前保留查询字符串，那么最简单的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T20:01:57.090

我不认为有一个简单的方法。每次编写 URL 或创建表单时，您都必须考虑当前的查询参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T20:10:29.110

你要这个吗？

```
var url1 = "...", url2 = "...";

var query1 = url1.split("#")[0].split("?").slice(1).join("?");
if (!query1)
    return url2;
var parts2 = url2.split("#");
parts2[0] +=  (parts2[0].indexOf("?")>-1 ? "&" : "?" ) + query1;
return parts2.join("#"); 
```

这将从 中提取查询字符串`url1`并将其附加到 的查询字符串中`url2`，返回新的`url2`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T20:14:25.290

如果用户“导航”的方式是使用页面内的链接，您可以这样做。

1.  在给定的 html 页面中，页面内运行的 Javascript 可以通过该`window.search`属性查看 url 的查询参数。[Mozilla 文档。](https://developer.mozilla.org/en/DOM/window.location)

2.  然后使用 JS 修改页面的所有锚元素的 href 链接，以将已经存在的查询参数添加到链接中。

结果：单击页面中的链接将导致新页面同时具有现有查询参数和新查询参数。

# xml - 带有 XML 响应的 Backbone.js - 在解析错误之前未调用解析函数

> ID：10744377
> 
> 赞同：2
> 
> 时间：2012-05-24T19:55:12.467
> 
> 标签：xml, ajax, parsing, backbone.js

我正在使用 Backbone.js 构建一个通常通过 JSON 与 Web 服务通信的应用程序。

一项 Web 服务将在成功时返回 JSON 或在错误时返回 XML（聪明，是吗？）。我需要解析这个 XML 响应来确定错误，但是 Backbone 以 JSON 为中心的思维给我带来了问题。

我有一个包含解析函数的集合。当服务返回 JSON 时，总是调用 parse 函数，在这种情况下，我只是返回响应对象。`arguments[1]`但是，当服务返回 XML 时，我的 fetch 调用的错误回调函数被调用，并传递了一个带有of的错误对象`parseerror`。进一步挖掘显示有一个意想不到的`<`角色。

为什么在抛出 parseerror 之前没有调用我的 parse 函数来解析 XML？此外 - 为什么在成功的 JSON 调用中，它传递了一个 JavaScript 对象（表明 JSON 字符串已经被解析）？解析函数不应该进行解析吗？

下面的相关代码，任何建议都非常感谢。

```
var myCollection = Backbone.Collection.extend({

initialize : function() {
    ...
},

fetch: function(options) {

    var options = {data: {...}, error: this.onFetchError};

    Backbone.Collection.prototype.fetch.call(this, options);
},

onFetchError: function(arg1, arg2, arg3) {

    debugger
},

parse: function(response) {

    debugger
    if(typeof response === 'object') {
        return response;
    }
}
});

return myCollection; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-10T16:12:39.357

文档对此含糊不清。 `Model.fetch([options])`使用`Backbone.sync`. [同步文档](http://backbonejs.org/#Sync)说您可以使用“所有其他 jQuery 请求选项”，这意味着 jQuery.ajax 支持的任何[内容](http://api.jquery.com/jQuery.ajax/)。

因此，要将响应作为原始文本获取，您可以执行以下操作：

`this.fetch({ dataType: 'text' });`

然后在您的`parse`函数中，您可以根据需要处理响应。

旁注：我在尝试获取模型以获取 XML 并使用该数据类型进行测试时发现了这一点。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-24T21:43:27.800

如果您查看默认提取：

```
fetch: function(options) {
  options = options ? _.clone(options) : {};
  var model = this;
  var success = options.success;
  options.success = function(resp, status, xhr) {

    //-->parse only invoked on success     
    if (!model.set(model.parse(resp, xhr), options)) return false;
    if (success) success(model, resp);
  };

  //-->parse not invoked on error
  options.error = Backbone.wrapError(options.error, model, options);
  return (this.sync || Backbone.sync).call(this, 'read', this, options);
} 
```

您会看到 parse 永远不会在错误条件下被调用。但是，wrapError（如下所示）将为您提供原始响应：

```
Backbone.wrapError = function(onError, originalModel, options) {
  return function(model, resp) {
    resp = model === originalModel ? resp : model;
    if (onError) {
      onError(originalModel, resp, options);
    } else {
      originalModel.trigger('error', originalModel, resp, options);
    }
  };
}; 
```

所以你的 arg2 会有响应，并且可以想象，你可以将它传递给你的 parse 函数。

# javascript - 保持本地 UIWebView 值

> ID：10744379
> 
> 赞同：1
> 
> 时间：2012-05-24T19:55:28.763
> 
> 标签：javascript, objective-c, ios, uiwebview

****编辑**** 我做了更多的研究，看起来饼干也可能是答案。我想我会在嵌入的 html 内的表单中添加一个按钮，该按钮调用一个函数来为这些值创建一个 cookie。然后我可以使用 stringByEvaluatingJavaScriptFromString 方法通过 obj-c 访问这个 cookie。当然，您会遇到过期问题，不允许表单的多个副本等。所以这是功能的权衡。我将坚持使用 window.location 路由，因为我可以将其存储在数据库中，然后用户可以创建相同表单的另一个实例 ****编辑****

我做了一些研究，我对如何完成这个有一个模糊的想法，但我很好奇是否有更好的方法。

我正在开发的这个 iPad 应用程序的 UIWebView 中加载了一个 html 表单的本地副本。表单通过 xml 在服务器端提交并在那里解析以用于数据库存储，但不幸的是它们非常冗长。所以我想让用户将表单保存在当前状态（也许他们只填写了一半），然后再返回。

我在想的是，我将不得不编写一些 javascript 来解析表单中的单选按钮和复选框，然后通过 window.location 技巧将这些数据传递给 obj-c 代码。但这很长，在 JS 和 Obj-C 之间来回传递的字符串会很长。有没有其他方法可以获取这些复选框/单选按钮的值并将它们传递给 obj-c 端以便稍后重新填充？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T20:17:16.490

如何通过文件？将设置/数据保存到 JS 中的文件并在 Objective-C 中访问该文件。但我想你已经想到了这一点。

但归根结底，无论您如何操作，数据都必须来回传递。通过 window.location 技巧将是最快的，并且如果操作系统本身没有施加任何限制，是否有任何理由不这样做？

您可以将数据编码成一个 blob 以使其更容易传递。

但是另一方面，如果您希望在您的应用程序终止时保留设置，则通过文件路由执行此操作可能会很有用。

此外，您实际上可以提交表单数据，但在使用 NSURLProtocol 派生类发送之前在 Objective-C 中拦截它。如果 NSURLProtocol 类知道数据是完整的，它可以允许提交继续进行。但如果 window.location 没有大小限制，我认为这样做没有任何意义。

# nuget - 有没有办法在使用 NuGet 安装包后更改路径和文件名？

> ID：10744380
> 
> 赞同：2
> 
> 时间：2012-05-24T19:55:29.953
> 
> 标签：nuget, nuget-package

我正在使用`NuGet`下载引导程序较少的版本。不幸的是，它将`LESS`文件安装在`/Content/Less`. 我希望它安装到`Content/Style/Bootstrap`.

我可以在我的解决方案中手动进行这些更改，但是随着包的更新，自动执行这些更改会很好。`NuGet`如有必要，我不介意创建一个新包。我读过关于`.transform`和`.pp`文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-12T22:46:38.217

我现在这是一个过时的问题，但你可以解压缩包。将较少的文件移动到所需的文件夹中，如有必要，更新 nuspec 文件，然后再次重新打包文件。使用 powershell 和 .net 4.5 中的新 ZipArchive/ZipFile 类，这可以在几分钟内完成。

# c - 如何在 Cygwin 中获得有用的回溯？

> ID：10744381
> 
> 赞同：3
> 
> 时间：2012-05-24T19:55:38.937
> 
> 标签：c, debugging, gdb, cygwin, backtrace

虽然我已经用 编译了我的 C 程序`-g -O0`，但我从 gdb 获得的回溯是无用的：

```
(gdb) bt
#0  0x6113759d in wordfree () from /cygdrive/c/cygwin/bin/cygwin1.dll
#1  0x75141375 in OutputDebugStringA () from /cygdrive/c/Windows/system32/KERNELBASE.dll
#2  0x40010006 in ?? ()
#3  0x00000000 in ?? () 
```

有什么方法可以在 Cygwin 中获得有用的回溯？

我的 gdb 版本是`7.3.50.20111026-cvs (cygwin-special)`， gcc 是`4.5.3`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T22:02:33.717

确保您选择了正确的线程。尝试`info threads`然后`thread <num>`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T21:22:25.833

“bt full”应该会给你更好的结果。

# javascript - 一起使用 beforeunload 和 unload？

> ID：10744385
> 
> 赞同：2
> 
> 时间：2012-05-24T19:55:50.723
> 
> 标签：javascript, jquery

我听说 Opera 不支持 beforeunload。还有一些早期版本的 IE。那么我怎样才能将它们一起使用呢？如果我在下面使用，它会在 Firefox 中运行 2 次（它们都可以工作）。

```
$(window).bind('beforeunload', function () {

});

$(window).unload(function () {

}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T20:08:26.043

```
function unloadHandler(m){
    alert(m);
}
if ($(window).unload) {
    $(window).unload(function() {
       unloadHandler("unload");
    });
} else if ($(window).beforeunload) {
    $(window).bind('beforeunload', function() {
        unloadHandler("beforeunload");
    });
}​ 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-24T19:59:10.953

您需要使用某种标志，或者您可以使用类似[http://documentcloud.github.com/underscore/#once](http://documentcloud.github.com/underscore/#once)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-24T20:11:59.693

有几种方法可以做到这一点。以下示例使用全局标志非常简单。

```
var hasUnloadBeenHandled = false;

function onUnload() {
  if (hasUnloadBeenHandled) {
    return;
  }

  //Whatever you want to be handled on unload OR on beforeunload

  hasUnloadBeenHandled = true;
}

$(window).bind('beforeunload', function () {
  onUnload();
});

$(window).unload(function () {
  onUnload();
}); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-24T20:01:37.283

我不是 Javascript/JQuery 人，但你不能只使用全局变量来跟踪该方法是否应该运行吗？

就像是

```
var runme = true;
$(window).bind('beforeunload', function () {
    if(runme){

        runme=false;
    }

});

$(window).unload(function () {
    if(runme){

        runme=false;
    }
}); 
```

# jquery - 如何通过单击创建动态的列表视图中的项目来获取数据？

> ID：10744393
> 
> 赞同：1
> 
> 时间：2012-05-24T19:56:38.247
> 
> 标签：jquery

我创建了一个动态列表视图，我想从我单击的列表视图中的行中获取数据（数据显示在列表视图上，因此“附加”工作完美），当我单击时我得到“未定义”并且尝试将数据输入“x”，我不明白为什么！

我的代码：

```
for (var i = 0; i < json_parsed.Categories.length; i++){
        var cars= json_parsed.Categories[i];

        $('#categoryList').append($('<li   data-categoryId = cars.car_name>').html(' <a href="#"  onclick = "temp()" >'+cars.car_name+</a>'));
}

function temp () {
   var x = $(this).data('categoryId');  
   alert (x);   
}; 
```

谢谢提前

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T20:10:00.777

由于您使用的是 jQuery，因此您可以绑定`onclick`如下事件。

```
$('#categoryList').on('click', 'li', function () {
    var x = $(this).data('categoryId');
    alert(x);
}); 
```

**完整代码：（**修复了 for 循环中的一些内容）

```
var cars;
for (var i = 0; i < json_parsed.Categories.length; i++){
   cars = json_parsed.Categories[i];
   $('#categoryList').append('<li data-categoryId="' + cars.car_name + '"><a href="javascript:void(0)" >' +cars.car_name + '</a>');
}    

$('#categoryList').on('click', 'li', function () {
    var x = $(this).data('categoryId');
    alert(x);
}); 
```

* * *

**编辑：**

> 谢谢，但它不起作用......我[在这里](http://jsfiddle.net/mici123/7aMke/13/)添加我的代码！谢谢提前！

您错过了提及您使用的是 jQuery 版本 1.6.4。

无论如何更改如下点击处理程序，

```
$('#categoryList').delegate('li', 'click', function() {
    var x = $(this).data('categoryid');
    alert(x);
}); 
```

[**演示**](http://jsfiddle.net/7aMke/15/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T20:08:30.230

Live 一直是处理绑定动态内容的传统方式。但是，jQuery 建议对 jQuery 1.7+ 使用 on()。[http://api.jquery.com/live/](http://api.jquery.com/live/)

例子：

```
$('element').on('click', function(){//Do something}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T20:03:04.547

您需要使用实时事件，即一个 eventHandler，它将绑定到页面加载时未创建的元素，但稍后会创建，即。即将到来。

```
// delegate to #categoryList if it already in DOM in page load

$('#categoryList').on('click', 'li', function() {
   var x = $(this).data('categoryId');  
   alert(x);
}); 
```

# c# - 我可以避免在以下情况下覆盖方法吗？

> ID：10744395
> 
> 赞同：1
> 
> 时间：2012-05-24T19:56:57.060
> 
> 标签：c#, interface

假设有 5 家汽车租赁公司，当一个人在网上租车时，带有汽车租赁详细信息的 XML 会被发送到租赁公司，在那里它会被一些软件解析并输入到他们的系统中。

现在，如果有一个标准的方式来发送汽车租赁的 XML，那么这很容易，但是让我们假设每个代理都与一个不同的接口来发送汽车租赁，并且每个接口都以不同的格式发送 XML，所以当它需要解析，不能只有一种标准方法，需要能够重写方法来处理多个接口。例如，您可能有以下 2 个：

```
<Rental>
<FirstName>John</FirstName>
<LastName>Doe</LastName>
<Pickup time="13:00"/>
<Date>06/06/12</Date>
</Rental> 
```

VS

```
<Rental>
<Name>
<First>John</First>
<Last>Doe</Last>
</Name>
<Pickup time="13:00" date="06/06/12"/>
</Rental> 
```

如果每个汽车代理使用不同的接口来处理租赁，是否唯一的方法是覆盖一个方法 5 次，并且对于每个新代理，它必须再次增长，还是有更简单的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T20:06:49.003

这听起来像是使用[装饰器模式](http://en.wikipedia.org/wiki/Decorator_pattern)的好案例。假设您正在执行 OOP，您可以拥有一个为汽车租赁提供数据的基础对象，然后用另一个正确格式化数据的对象包装（或装饰）它。您需要为各个汽车租赁公司制作单独的装饰器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T20:14:14.977

如果您为新机构做的唯一事情是将数据解析为内部数据表示，那么无论如何都做得很好;)。为什么要为看起来非常适合在业务上分开的事情烦恼呢？

我想你可以通过多种方式解决它，但如果你真的想要的话。我会尝试创建一个 ai 或 ann 来匹配输入以实现最佳匹配。但任何解决方案都可能比仅仅实现独特的“parseCustomersData”函数更昂贵。

# java - 用于绘画程序的 Java 2D 库

> ID：10744398
> 
> 赞同：0
> 
> 时间：2012-05-24T19:57:05.260
> 
> 标签：java, graphics, file-io, 2d, libraries

我很难找到基于 Java 2D 的库来开发绘画程序。

我发现的所有图书馆似乎都适用于：

*   动画
*   绘图
*   游戏

对于绘画程序，这些都对我没有用。（这个特定项目主要用于网络漫画和印刷漫画书。）

我最感兴趣的是为实际上太大而无法加载到 BufferedImage 对象中的图像抽象文件 IO 的东西。

例如，Adobe 的工具可能不会将整个 10MB（压缩）图像文件加载到内存中——一旦解压缩，这就是用于缓存图像的太多物理内存（特别是如果你一次打开十几个），所以必须成为这些应用程序中的一个框架，用于管理磁盘上的文件并仅缓冲内存中当前相关的区域。

*   我想它至少会有一个 Image 子类，它的工作方式与 BufferedImage 相同，同时抽象出图像来自文件而不是内存的事实。
*   允许我放大矩形区域或缩小并缓冲缩放的可见部分（用于显示）的附加包装器会特别好。
*   具有混合模式的分层系统会非常棒，尽管我希望我必须自己构建它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T20:00:30.610

你试过看 StdDraw 吗？它有一些基本的绘图。[StdDraw 可以在这里下载](http://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=4&sqi=2&ved=0CFsQFjAD&url=http://www.cs.princeton.edu/~rs/talks/LLRB/Java/StdDraw.java&ei=95K-T66BFISGsALF49kl&usg=AFQjCNFmkcZgB9CvKkUKGSVVgr060zmptg&sig2=G7JJMRhBA6pXvmNBdqt6JQ)

# c++ - C++ for 循环/字符指针“hack”

> ID：10744403
> 
> 赞同：1
> 
> 时间：2012-05-24T19:57:35.150
> 
> 标签：c++

我有一小段代码做了一些有趣的事情，但我不知道它是如何做到的。

```
int main(int argc, const char * argv[])
{
    char text[] = "object";
    for(char *ptr = &text[0]; *ptr != '\0'; ptr+=2) 
    {   
        cout << ptr << endl;
        ptr--;
    }
    return 0;
} 
```

发生的事情是它每次都从 [1]、[2]、[3] 等到字符串的末尾，打印出内容。我无法理解它是如何做到的，因为指针永远不会被取消引用，但正确的字母似乎会被打印出来。我会假设不是字符串的字母，而是指针值将打印为奇怪的字符，但事实并非如此。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T20:01:15.547

这是**未定义的行为**。第一次迭代，`ptr`指向`"object"`。一切都好，打印出来，但你这样做`ptr--`。所以现在，`ptr`指向你不再拥有的记忆。只要您不对它取消引用或对其进行指针运算，就可以了。但是当你在循环中增加它时你会这样做 - `ptr+=2`.

### 为什么会这样：

在第一次迭代中，`ptr`指向`"object"`，所以它打印出来。`cout::operator << (const char*)`打印一个以 null 结尾的字符串。不需要`char`取消引用。

在第二次迭代中，`ptr`递减，然后增加`2`，指向`"bject"`。等等...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-24T20:00:23.107

你是对的，通常地址会被打印出来。除了 有一个特殊的重载`char *`，它将其视为 C 字符串并输出所有字符，从 开始`ptr`，直到找到零 ( `\0`)。

...或者如果您的代码正确，就会发生这种情况，因为就像现在一样，它通过`ptr`在第一次迭代时递减（`ptr`超出范围）然后立即将其递增 2 来调用 UB。

* * *

如果要显示指针的*地址*`void *`，请将其转换为：

```
cout << static_cast<void *>(ptr) << endl; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-24T20:01:00.243

这里没有什么真正的hacky。有一个`ostream::operator<<(const char *p)`打印字符串。指针沿着字符串走，程序从不同的位置开始打印它。唯一奇怪的是疯狂的 +2, -1 指针递增。

# delphi - copy delphi/freepascal collection to grid efficiently

> ID：10744405
> 
> 赞同：1
> 
> 时间：2012-05-24T19:57:42.407
> 
> 标签：delphi, collections, grid, rtti

I am trying to find the most efficient way of updating a grid (StringGrid or KGrid) from a Delphi/Lazarus FreePascal collection.

One of my collections is as listed below:

```
{ TEntretien }
TEntretien = class(TCollectionItem)
private
  { private declarations }
  FPrenom: string;
  FSexe: string;
  FSigneDistinctif: string;
  FPays: string;
  FTotale: integer;
  FColumns: integer;
public
  { public declarations }
published
  { published declarations }
  property Prenom: string read FPrenom write FPrenom;
  property Sexe: string read FSexe write FSexe;
  property SigneDistinctif: string read FSigneDistinctif write FSigneDistinctif;
  property Pays: string read FPays write FPays;
property Totale: integer read FTotale write FTotale;
end;

{ TEntretiens }
TEntretiens = class(TCollection)
private
  { private declarations }
  function GetItem(AIndex: integer): TEntretien;
public
  { public declarations }
  constructor Create;
  function Add: TEntretien;
  property Items[AIndex: integer]: TEntretien read GetItem; default;
end; 
```

I have the following code snippet that I use for updating one of my grids:

```
// Fill the grid with the results of the query
for intGridRow := 0 to intNumberOfRows - 1 do
begin
  for intGridCol := 0 to intNumberOfColumns - 1 do
  begin
    // Write the rest of the retrieved data into the grid proper   USE RTTI HERE??
    if intGridCol = 0 then
      kgGridName.Cells[intGridCol + kgGridName.FixedCols, intGridRow + kgGridName.FixedRows] := 
         AEntretiens[intGridRow].Prenom
    else if intGridCol = 1 then
       kgGridName.Cells[intGridCol + kgGridName.FixedCols, intGridRow + kgGridName.FixedRows] :=
         AEntretiens[intGridRow].Sexe
    else if intGridCol = 2 then
       kgGridName.Cells[intGridCol + kgGridName.FixedCols, intGridRow + kgGridName.FixedRows] :=
         AEntretiens[intGridRow].SigneDistinctif
    else if intGridCol = 3 then
       kgGridName.Cells[intGridCol + kgGridName.FixedCols, intGridRow + kgGridName.FixedRows] :=
         AEntretiens[intGridRow].Pays
    else if intGridCol = 4 then
       kgGridName.Cells[intGridCol + kgGridName.FixedCols, intGridRow + kgGridName.FixedRows] := IntToStr(AEntretiens[intGridRow].Totale)
    end;
end; 
```

This is fine for collections with a small number of fields/properties but I also have collections with up to 40 fields and so the method I use above is too cumbersome.

Is there a more efficient way of doing this? Someone suggested RTTI but I don't know how to use it.

Thanks a lot,

JDaniel

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T22:17:58.190

Here is a Delphi Enhanced RTTI implementation. This is valid from Delphi-2010.

It will search for all readable published properties (in the declared order) and fill the grid with values.

If you have more than integer and strings as properties, add more in the case statement.

```
uses
  System.Classes,System.RTTI,System.TypInfo, System.SysUtils;

procedure Test;
// Fill the grid with the results of the query
Var
  AnItem     : TEntretien;
  fixedCols  : integer;
  fixedRows  : integer;
  ARow,ACol  : integer;
  intGridRow : integer;
  context    : TRttiContext;
  rType      : TRttiType;
  prop       : TRttiProperty;
  value      : TValue;
  s          : String;
begin
  context := TRttiContext.Create;
  rType := context.GetType(TEntretien);
  fixedCols := kgGridName.FixedCols;
  fixedRows := kgGridName.FixedRows;
  for intGridRow := 0 to intNumberOfRows - 1 do
  begin
    AnItem := AEntretiens[intGridRow];
    ARow := intGridRow + fixedRows;
    ACol := fixedCols;
    for prop in rType.GetProperties do
    begin
      if prop.IsReadable then
      begin
        s := '';
        value := prop.GetValue(AnItem);
        case prop.PropertyType.TypeKind of
          tkInteger : s := IntToStr(value.AsInteger);
          tkString : s := value.AsString;
        end;
        kgGridName.Cells[ACol, ARow] := s;
        Inc(ACol);
      end;
    end;
  end;
end; 
```

As mentioned in the comments by Ken, Enhanced RTTI is not implemented in Lazarus/FreePascal.

A generic solution for all platforms would then be to add a collection item base class with the possibilities to get the property values.

```
Type
  TBaseItemClass = class(TCollectionItem)
    private
      function GetPropertyCount : integer; virtual; abstract;  
      function GetPropertyString( index : integer) : string; virtual; abstract;
    public
      property PropertyCount : integer read GetPropertyCount;
      property PropertyString[index : integer] : string read GetPropertyString;
  end; 
```

Then your declaration and implementation would look like this :

```
{ TEntretien }
TEntretien = class(TBaseItemClass)
private
  { private declarations }
  FPrenom: string;
  FSexe: string;
  FSigneDistinctif: string;
  FPays: string;
  FTotale: integer;
  FColumns: integer;
  function GetPropertyCount : integer; override;
  function GetPropertyString( index : integer) : string; override;
public
  { public declarations }
published
  { published declarations }
  property Prenom: string read FPrenom write FPrenom;
  property Sexe: string read FSexe write FSexe;
  property SigneDistinctif: string read FSigneDistinctif write FSigneDistinctif;
  property Pays: string read FPays write FPays;
  property Totale: integer read FTotale write FTotale;
end;

function TEntretien.GetPropertyCount : integer;
begin
  Result := 5;
end;

function TEntretien.GetPropertyString(index : integer) : string;
begin
  Result := '';
  case index of
    0 : Result := Prenom;
    1 : Result := Sexe;
    2 : Result := SigneDistinctif;
    3 : Result := Pays;
    4 : Result := IntToStr(Totale);
  end;
end;

procedure Test1;
// Fill the grid with the results of the query
Var
  AnItem    : TEntretien;
  intGridRow,intNumberOfRows : Integer;
  fixedCols : integer;
  fixedRows : integer;
  ARow      : integer;
  i         : integer;
begin
  fixedCols := kgGridName.FixedCols;
  fixedRows := kgGridName.FixedRows;
  for intGridRow := 0 to intNumberOfRows - 1 do
  begin
    AnItem := AEntretiens[intGridRow];
    ARow := intGridRow + FixedRows;
    for i := 0 to AnItem.PropertyCount - 1 do
    begin
      kgGridName.Cells[i + FixedCols, ARow] := AnItem.PropertyString[i];
    end;
  end;
end; 
```

Just fill in the GetPropertyCount and GetPropertyString implementation part in your TEntretien class.

This way of doing it may seem as inefficient as your example by having to code all property values by hand. But doing as my example is conforming to two basic principles in programming :

*   Don't repeat yourself. If you have many grids to fill, the code would have to be repeated in many places. Now it's declared once and for all within the Collection item. Should you redesign the item, just update the two functions.
*   Keep the scope limited. The GUI part of your program should know as little as possible about the collection item class.

# android - Android中的视频流

> ID：10744411
> 
> 赞同：0
> 
> 时间：2012-05-24T19:58:05.693
> 
> 标签：android, http, video-streaming, android-videoview, android-mediaplayer

我正在开发一个尝试显示在网络服务器上流式传输的视频的应用程序。我有视频流的 HTTP 链接。为了连接到网络服务器，我连接到一个特定的 WIFI，它使我能够访问视频。

我已经处理了WIFI连接。当我尝试使用 VideoView 在我的应用上显示视频时遇到问题。我使用了一个工具，它显示我正在从服务器接收数据。所以我的应用程序正在接收视频的数据包，但无法显示它。

代码是这样的：

```
 private VideoView videoView;
    videoView = (VideoView)findViewById(R.id.VideoView_videoOnly);
    ....
    ....
    //connect to the router
    String ip = "http://192.168.2.250";
    URL url = null;
    try {
        url = new URL(ip);
    } catch (MalformedURLException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    URLConnection connection = null;
    try {
        connection = url.openConnection();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    String vidLink = "http://XXXX:XXXX@192.168.2.250/axis-cgi/mjpg/video.cgi";
    //set up video streaming
    MediaController mc = new MediaController(this);
    mc.setAnchorView(videoView);
    mc.setMediaPlayer(videoView);
    Uri video = Uri.parse(vidLink);
    videoView.setMediaController(mc);
    videoView.setVideoURI(video);
    videoView.start();

} 
```

}

XXXX：XXXX是访问视频流的用户名和密码

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T20:26:39.153

根据您使用的 URL，可以猜到，您正在接收 MJPEG 格式的流。Android 本身不支持 MJPEG。您必须将流分解为 jpeg，然后从每个 jpeg 创建一个位图，然后一张一张地显示位图。

# c++ - 在宏中使用“else”

> ID：10744418
> 
> 赞同：6
> 
> 时间：2012-05-24T19:58:40.727
> 
> 标签：c++, macros

我看过以下代码：

```
#define QL_REQUIRE(condition,message) \
if (!(condition)) { \
    std::ostringstream _ql_msg_stream; \
    _ql_msg_stream << message; \
    throw QuantLib::Error(__FILE__,__LINE__, \
                          BOOST_CURRENT_FUNCTION,_ql_msg_stream.str()); \
 } else 
```

这就是我们假设使用它的方式。

```
void testingMacros1 (){
   double x =0.0;
   QL_REQUIRE (x!=0 ," Zero number !");
} 
```

我认为`else`最终有一些特殊用途。

Question>`else`这个宏定义末尾的 appended 有什么用？

谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-24T20:01:14.110

宏检查条件。它需要条件是`true`，否则它会抛出异常。如果它是真的，你会像正常的`if`陈述一样在后面加上大括号。

你会这样使用它：

```
QL_REQUIRE (x != 0, "x must not be 0")
{
    y = 100 / x; //dividing by 0 is bad
} 
```

宏 subs 在条件中，如果失败，它将打印给定的消息。如果它没有失败，您的大括号或单行代码将形成 else 语句。从整体来看，逻辑有点颠倒。使用它时，它就像一个`if`，但是当将它放入时，`if`和 之`else`类的角色会颠倒过来。

这有点像这样说：

```
assert (x != 0 && "x must not be 0");
y = 100 / x; //dividing by 0 is bad 
```

# haskell - 如何使用用 Cabal 创建的目标文件？

> ID：10744419
> 
> 赞同：1
> 
> 时间：2012-05-24T19:58:45.437
> 
> 标签：haskell, ghci

我有一个只能用 Cabal 编译的源文件。它是测试代码，过去（在我将 Haskell 环境复杂化之前）我会从 ghci 中运行函数。我知道 ghci 可以使用目标文件来加载代码，但是当我尝试这样做时，会出现以下错误。那么我错过了什么？

[mlitchard@Boris Boris_Test]$ ghci /home/mlitchard/Boris_Test/dist/build/Boris_Test/Boris_Test-tmp/Main.o

```
GHCi, version 7.4.1: http://www.haskell.org/ghc/  :? for help
Loading package ghc-prim ... linking ... done.
Loading package integer-gmp ... linking ... done.
Loading package base ... linking ... done.
Loading object (static) /home/mlitchard/Boris_Test/dist/build/Boris_Test/Boris_Test-tmp/Main.o ... done
final link ... ghc: /home/mlitchard/Boris_Test/dist/build/Boris_Test/Boris_Test-tmp/Main.o: unknown symbol 
```

`monadzmcontrolzm0zi3zi1zi3_ControlziMonadziTransziControl_zdfMonadBaseControlIOIO_closure' linking extra libraries/objects failed`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T20:09:47.767

当您手动指定目标文件时，GHCi 无法判断目标文件依赖于什么，它可以对`.hs`文件执行哪些操作，因为它可以访问`import ...`这种情况下的行。

因此，您需要手动添加所有相关依赖项的目标文件，在这种情况下`-package monad-control`，在调用 GHCi 时添加 ,。

# javascript - 更新 facebook 评论插件链接而不重新加载页面

> ID：10744420
> 
> 赞同：2
> 
> 时间：2012-05-24T19:58:50.133
> 
> 标签：javascript, jquery, facebook-comments

这将显示来自该**http://domain.com/some/abc的评论**

```
<fb:comments href="http://domain.com/some/abc" num_posts="20" width="500"></fb:comments>
<div id="fb-root"></div>
<script type="text/javascript">
(function(d, s, id) {
var js, fjs = d.getElementsByTagName(s)[0];
if (d.getElementById(id)) {return;}
js = d.createElement(s); js.id = id;
js.src = "//connect.facebook.net/en_US/all.js#xfbml=1&appId=1234567890";
fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));
</script> 
```

如果用户将表单中的值从 abc 更改为 xyz，我需要评论插件来显示来自**http://domain.com/some/xyz**的评论，而无需重新加载页面。

```
<form id="name">
    <select>
        <option value="abc" selected>abc</option>
        <option value="xyz">xyz</option>
    </select>
</form> 
```

可行吗？（在 fb 开发页面上没有找到任何信息。）我正在使用 jQuery。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-24T21:43:15.543

是的，这是可行的；我相信我设法在[这里](http://jsfiddle.net/Daedalus/94KMR/)复制了您想要的结果；

以防 jsfiddle 死亡的片段：

```
(function loadfb(d, s, id) {
    var js, fjs = d.getElementsByTagName(s)[0];
    if (d.getElementById(id)) {
        return;
    }
    js = d.createElement(s);
    js.id = id;
    js.src = "//connect.facebook.net/en_US/all.js#xfbml=1&appId=1234567890";
    fjs.parentNode.insertBefore(js, fjs);
})(document, 'script', 'facebook-jssdk');

function changeDomain(value) {
    var newVal = '<fb:comments href="http://example.com/some/' + value + '" num_posts="20" width="500"></fb:comments><div id="fb-root"></div>';
    $('#comments').html(newVal);
    FB.XFBML.parse($('#comments').get(0),function(){
        $(".FB_Loader").remove();
    });
}
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<form id="name">
  <select onChange="changeDomain(this.value);">
    <option value="abc" selected>abc</option>
    <option value="xyz">xyz</option>
  </select>
</form>
<div id="comments">
  <fb:comments href="http://example.com/some/abc" num_posts="20" width="500"></fb:comments>
  <div id="fb-root"></div>
</div>
```

我首先替换了评论 div 的 innerHTML（我创建它是为了容纳 fb:comments 标签），然后调用[`FB.XFBML.parse();`](http://developers.facebook.com/docs/reference/javascript/FB.XFBML.parse/)相同的评论 div。归功于[这篇文章](https://stackoverflow.com/questions/4872766/reload-fbcomments-widget)，它提醒了我这种方法。

# android - Android 应用程序看不到库中的所有类

> ID：10744421
> 
> 赞同：1
> 
> 时间：2012-05-24T19:58:52.670
> 
> 标签：android, eclipse, shared-libraries

全部，

我正在 Eclipse 上创建一个 Android 应用程序。我有一个外部库，其中包含我想调用的方法。我已经创建了适当的“libs”目录，将我的 jar 文件复制到其中并通过 Properties > Java Build Path > Add Jars 添加了该库...

奇怪的是，我可以很好地引用该 jar 文件中的一个类，但该类不能引用同一个 jar 中的其他类。我还有其他几个使用相同 jar 文件的应用程序，它们都可以正常工作。

有任何想法吗？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T20:04:52.217

尝试将其添加为外部库...

# c++ - 非托管函数中的托管类参数？

> ID：10744423
> 
> 赞同：0
> 
> 时间：2012-05-24T19:59:01.357
> 
> 标签：c++, c++-cli

我正在尝试在托管 C++ 中重写我的 C# 库，在某种程度上与我的 C++ 实现合并。

我有一个托管基类，我也需要在非托管类中使用它。

我有一个非托管类（包含在#pragma unmanaged 中），它有一个将我的基类作为参数的函数。然后将其添加到稍后引用的向量中。

由于某种原因，它没有被识别`gcroot`为关键字。我假设因为它在#pragma 非托管代码中。

我怎样才能做到这一点？

谢谢，

亚历克斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T20:16:47.687

你是对的。#pragma unmanaged 中的任何内容都必须是“常规”C++（不能包含 C++/clr 代码）。如果您希望本机类使用 gcroot，请不要将代码放在 #pragma unmanaged 中（因为它*确实*包含托管代码）。

为什么你需要它在#pragma unmanaged 中？

# jsf - 我可以在客户端浏览器中存储哪些 JSF 数据

> ID：10744431
> 
> 赞同：2
> 
> 时间：2012-05-24T19:59:36.317
> 
> 标签：jsf, jsf-2

我有兴趣可以存储到客户端，例如大型哈希图或列表吗？我需要像临时缓存这样的东西来存储用户会话数据。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T20:23:46.497

理论上，您可以在 JavaScript 中使用[HTML5 客户端存储。](https://www.google.com/search?q=html5%20client%20side%20storage)到目前为止，不存在可以透明地完成这项工作的 JSF 组件。您需要自己编写所有必要的 JS 代码或获取[jQuery](https://www.google.com/search?q=jquery%20html5%20client%20side%20storage)。

JSF 作为 HTML 代码生成器可以为您做的就是在 JSON 库（如[Google Gson](http://code.google.com/p/google-gson/) ）的帮助下以 JSON 格式打印 Java 对象作为 JavaScript 变量赋值。

```
<h:outputScript>var data = #{bean.dataAsJSON};</h:outputScript> 
```

应该只返回一个已经转换的`getDataAsJSON()`JSON 字符串。

# symfony - 使用连接表更新学说

> ID：10744432
> 
> 赞同：1
> 
> 时间：2012-05-24T19:59:37.520
> 
> 标签：symfony, doctrine-orm

我正在尝试更新 Note Entity 中的字段“note”，该字段与“ElementModule”和“Inscription”具有 ManyToOne（双向）关系，实体“Inscription”与“Etudiant”实体具有 ManyToOne 关系

我试过这个 DQL 查询：

```
$query = $this->_em->createQuery('update UaePortailBundle:Note u JOIN u.inscription i JOIN u.elementmodule e join i.etudiant et set u.note = ?3
                                                where et.id = ?1 and e.id = ?2 ');
    $query->setParameter(1, $etudiant);
    $query->setParameter(2, $element);
    $query->setParameter(3, $note);
    $resultat = $query->execute(); 
```

我得到这个错误

```
[Syntax Error] line 0, col 50: Error: Expected Doctrine\ORM\Query\Lexer::T_EQUALS, got 'i' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T20:43:25.787

LEFT JOIN，或特别是 JOIN 仅在 MySQL 的 UPDATE 语句中受支持。DQL 抽象了普通 ansi sql 的一个子集，所以这是不可能的。尝试使用子选择或 IDENTITY（您必须使用最新版本的 Doctrine 2.2.2）：

```
createQuery('update UaePortailBundle:Note u set u.note = ?3
             where IDNETITY(u.inscription) = ?1 and IDENTITY(u.elementmodule) = ?2 '); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T09:26:00.657

在搜索并尝试使用教义 dql 找到解决方案后，我找不到它，所以我使用直接 sql 查询来更新数据库。

```
 $stmt = $this->getEntityManager()
               ->getConnection()
               ->prepare("update note set note = :note where `etudiant_id` like :etudiant_id and `elementmodule_id` like :elementmodule_id");
                $stmt->bindValue('etudiant_id',$etudiant);
                $stmt->bindValue('elementmodule_id' ,$element );
                $stmt->bindValue('note', $note);
                $stmt->execute(); 
```

# php - 运行多个 MYSQL 存储过程时调用 SPCommands 时出错

> ID：10744434
> 
> 赞同：-1
> 
> 时间：2012-05-24T19:59:42.640
> 
> 标签：php, mysql

我是php新手，但不是程序员...

当我在一个页面中多次调用一个过程时，我很难调用和显示内容。我正在尝试显示来自 MYSQL 的两个不同 SP 调用的两个单独的记录集。我可以显示第一个电话，但第二个电话失败。我不确定我做错了什么，但也许有人可以帮忙？

当我调用第二个程序时，我不断收到错误消息：

错误调用 SPCommands 不同步；你现在不能运行这个命令

顺便说一句，我在 Windows 上运行

下面的代码... PHP

```
// First call to SP
$page = 2;
$section = 1;

include("DatabaseConnection.php"); //general connection - works fine

$sql = 'CALL GetPageContent("'.$page.'", "'.$section.'")';

$result = mysqli_query($conn, $sql) or die('Error calling SP' .mysqli_error($conn));

while($row=mysqli_fetch_assoc($result))
{
   // DO STUFF< REMOVED TO MAKE READING CLEARER
}

mysqli_free_result($result);

//SECOND CALL BELOW

$section = 2; // change parameter for different results

$sql = 'CALL GetPageContent("'.$page.'", "'.$section.'")';

$result = mysqli_query($conn, $sql) or die('Error calling SP' .mysqli_error($conn));

while($row=mysql_fetch_assoc($result))
{
   // DO STUFF< REMOVED TO MAKE READING CLEARER
}

mysqli_free_result($result); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T20:05:15.133

问题是你的 SP 给了你多个结果。

使用 mysqli_multi_query，见[http://us2.php.net/mysqli_multi_query](http://us2.php.net/mysqli_multi_query)

# android - 带有 AsyncTask 的 Android 应用程序：NullPointerException？

> ID：10744436
> 
> 赞同：0
> 
> 时间：2012-05-24T19:59:45.797
> 
> 标签：android, rss, nullpointerexception, android-asynctask

在我决定做一些改变之前，我不得不说它工作得很好。但是，我所做的更改导致了很多错误，因此我尝试一一撤消所有更改。我已尽力将它恢复到以前的版本，但它仍然在 readRSS() 或 displayRSS() 中给我“NullPointerException”，这是从 AsyncTask 调用的。以前的版本根本不会发生这种情况！我已经调试了好几个小时，但仍然没有任何线索。任何帮助将不胜感激！

我的代码如下：

```
package com.android.rss;

import java.io.IOException;
import java.io.InputStream;
import java.net.HttpURLConnection;
import java.net.MalformedURLException;
import java.net.URL;
import java.util.ArrayList;

import org.xmlpull.v1.XmlPullParser;
import org.xmlpull.v1.XmlPullParserException;
import org.xmlpull.v1.XmlPullParserFactory;

import android.app.ListActivity;
import android.app.ProgressDialog;
import android.os.AsyncTask;
import android.os.Bundle;
import android.widget.ArrayAdapter;
import android.widget.TextView;
import android.widget.Toast;

public class RSSProActivity extends ListActivity {
    ProgressDialog progDialog;
    String url ="";

    ArrayList<RSSItem> feed;
    ArrayList<String> links;
    ArrayList<String> titles;
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        Bundle bundle = this.getIntent().getExtras();
        super.onCreate(savedInstanceState);
        setContentView(R.layout.rss);
        url = bundle.getString("add");
        startLoadRSS(url);
    }

    private void startLoadRSS(String url){
        new RSS_Load().execute(url);
    }

    //
    private void preReadRSS()
    {
    //  Toast.makeText(this, "Reading RSS, Please wait.", Toast.LENGTH_LONG).show();
        progDialog = new ProgressDialog(this);
        progDialog.setProgressStyle(ProgressDialog.STYLE_HORIZONTAL);
        progDialog.setTitle("Loading RSS");
        progDialog.setMessage("Please wait...");
        progDialog.show();
    }

        private ArrayList<String> readRSS(String url)
        {
            String title ="";
            String link ="";
            String date ="";
            titles = new ArrayList<String>();
            titles.add("KNS");
            // Initializing instance variables
            //feed = new ArrayList<RSSItem>();
            try{
            URL linkUrl = new URL(url);

            XmlPullParserFactory factory = XmlPullParserFactory.newInstance();
                factory.setNamespaceAware(false);
                XmlPullParser xpp = factory.newPullParser();

                    // We will get the XML from an input stream
                xpp.setInput(getInputStream(linkUrl), "UTF_8");

                    /* We will parse the XML content looking for the "<title>" tag which appears inside the "<item>" tag.
                     * However, we should take in consideration that the rss feed name also is enclosed in a "<title>" tag.
                     * As we know, every feed begins with these lines: "<channel><title>Feed_Name</title>...."
                     * so we should skip the "<title>" tag which is a child of "<channel>" tag,
                     * and take in consideration only "<title>" tag which is a child of "<item>"
                     *
                     * In order to achieve this, we will make use of a boolean variable.
                     */
                boolean insideItem = false;

                    // Returns the type of current event: START_TAG, END_TAG, etc..
                int eventType = xpp.getEventType();
                while (eventType != XmlPullParser.END_DOCUMENT) {
                    if (eventType == XmlPullParser.START_TAG) {

                        if (xpp.getName().equalsIgnoreCase("item")) {
                            insideItem = true;
                        } else if (xpp.getName().equalsIgnoreCase("title")) {
                            if (insideItem)
                                titles.add(xpp.nextText()); //extract the headline
                        } else if (xpp.getName().equalsIgnoreCase("link")) {
                            if (insideItem)
                                links.add(xpp.nextText()); //extract the link of article
                        }
                    }else if(eventType==XmlPullParser.END_TAG && xpp.getName().equalsIgnoreCase("item")){
                        insideItem=false;
                    }
                    eventType = xpp.next(); //move to next element
                }

            } catch (MalformedURLException e) {
                e.printStackTrace();
            } catch (XmlPullParserException e) {
                e.printStackTrace();
            } catch (IOException e) {
                e.printStackTrace();
            }
                return titles;
            }

         private InputStream getInputStream(URL url)
         {
            try {
                return url.openConnection().getInputStream();
            } catch (IOException e) {
                return null;
            }
         }

        private void displayRSS()
        {
            progDialog.dismiss();

          //  String str [] = (String []) headlines.toArray (new String [headlines.size()]);
            TextView textView = new TextView(this);
    //        int num = titles.size();
    //        String n = Integer.toString(num);
        //  textView.setText(n + "items found.");

            // Data binding
            try{
            ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,android.R.layout.simple_list_item_1, titles);
            setListAdapter(adapter);
            }catch(NullPointerException e)
            {
                e.printStackTrace();
            }
            Toast.makeText(this, url, Toast.LENGTH_LONG).show();
        }
    /**    
        @Override
        protected void onListItemClick(ListView l, View v, int position, long id) {
          Intent browserIntent = new Intent(Intent.ACTION_VIEW, Uri.parse(links.get(position)));
          startActivity(browserIntent);

        }

        **/
        //Asynchronous Task for downloading the RSS Feed.
        public class RSS_Load extends AsyncTask<String, Void, Void>{
           @Override
           protected void onPreExecute() {
              super.onPreExecute();
              preReadRSS();
           }

           @Override
           protected Void doInBackground(String... url) {
             readRSS(url[0]);
               return null;
           }

           @Override
           protected void onProgressUpdate(Void... progress) {
            //  progDialog.setProgress();

           }

           @Override
           protected void onPostExecute(Void result) {
              super.onPostExecute(result);
            displayRSS();

           }

           //display progress bar here.
           public void displayProgressBar(String status){
             //todo
     }

 }
} 
```

日志文件：

```
 05-25 06:07:13.406: D/dalvikvm(331): GC_EXTERNAL_ALLOC freed 49K, 53% free 2550K/5379K, external 1625K/2137K, paused 43ms
05-25 06:07:13.586: D/dalvikvm(331): GC_EXTERNAL_ALLOC freed 1K, 53% free 2549K/5379K, external 2563K/3200K, paused 40ms
05-25 06:07:29.416: W/dalvikvm(331): threadid=9: thread exiting with uncaught exception (group=0x40015560)
05-25 06:07:29.456: E/AndroidRuntime(331): FATAL EXCEPTION: AsyncTask #1
05-25 06:07:29.456: E/AndroidRuntime(331): java.lang.RuntimeException: An error occured while executing doInBackground()
05-25 06:07:29.456: E/AndroidRuntime(331):  at android.os.AsyncTask$3.done(AsyncTask.java:200)
05-25 06:07:29.456: E/AndroidRuntime(331):  at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:274)
05-25 06:07:29.456: E/AndroidRuntime(331):  at java.util.concurrent.FutureTask.setException(FutureTask.java:125)
05-25 06:07:29.456: E/AndroidRuntime(331):  at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:308)
05-25 06:07:29.456: E/AndroidRuntime(331):  at java.util.concurrent.FutureTask.run(FutureTask.java:138)
05-25 06:07:29.456: E/AndroidRuntime(331):  at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1088)
05-25 06:07:29.456: E/AndroidRuntime(331):  at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:581)
05-25 06:07:29.456: E/AndroidRuntime(331):  at java.lang.Thread.run(Thread.java:1019)
05-25 06:07:29.456: E/AndroidRuntime(331): Caused by: java.lang.NullPointerException
05-25 06:07:29.456: E/AndroidRuntime(331):  at com.android.rss.RSSProActivity.readRSS(RSSProActivity.java:88)
05-25 06:07:29.456: E/AndroidRuntime(331):  at com.android.rss.RSSProActivity.access$1(RSSProActivity.java:54)
05-25 06:07:29.456: E/AndroidRuntime(331):  at com.android.rss.RSSProActivity$RSS_Load.doInBackground(RSSProActivity.java:154)
05-25 06:07:29.456: E/AndroidRuntime(331):  at com.android.rss.RSSProActivity$RSS_Load.doInBackground(RSSProActivity.java:1)
05-25 06:07:29.456: E/AndroidRuntime(331):  at android.os.AsyncTask$2.call(AsyncTask.java:185)
05-25 06:07:29.456: E/AndroidRuntime(331):  at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:306)
05-25 06:07:29.456: E/AndroidRuntime(331):  ... 4 more
05-25 06:07:31.809: E/WindowManager(331): Activity com.android.rss.RSSProActivity has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@40526cd0 that was originally added here
05-25 06:07:31.809: E/WindowManager(331): android.view.WindowLeaked: Activity com.android.rss.RSSProActivity has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@40526cd0 that was originally added here
05-25 06:07:31.809: E/WindowManager(331):   at android.view.ViewRoot.<init>(ViewRoot.java:258)
05-25 06:07:31.809: E/WindowManager(331):   at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:148)
05-25 06:07:31.809: E/WindowManager(331):   at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:91)
05-25 06:07:31.809: E/WindowManager(331):   at android.view.Window$LocalWindowManager.addView(Window.java:424)
05-25 06:07:31.809: E/WindowManager(331):   at android.app.Dialog.show(Dialog.java:241)
05-25 06:07:31.809: E/WindowManager(331):   at com.android.rss.RSSProActivity.preReadRSS(RSSProActivity.java:51)
05-25 06:07:31.809: E/WindowManager(331):   at com.android.rss.RSSProActivity.access$0(RSSProActivity.java:44)
05-25 06:07:31.809: E/WindowManager(331):   at com.android.rss.RSSProActivity$RSS_Load.onPreExecute(RSSProActivity.java:149)
05-25 06:07:31.809: E/WindowManager(331):   at android.os.AsyncTask.execute(AsyncTask.java:391)
05-25 06:07:31.809: E/WindowManager(331):   at com.android.rss.RSSProActivity.startLoadRSS(RSSProActivity.java:40)
05-25 06:07:31.809: E/WindowManager(331):   at com.android.rss.RSSProActivity.onCreate(RSSProActivity.java:36)
05-25 06:07:31.809: E/WindowManager(331):   at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
05-25 06:07:31.809: E/WindowManager(331):   at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
05-25 06:07:31.809: E/WindowManager(331):   at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
05-25 06:07:31.809: E/WindowManager(331):   at android.app.ActivityThread.access$1500(ActivityThread.java:117)
05-25 06:07:31.809: E/WindowManager(331):   at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
05-25 06:07:31.809: E/WindowManager(331):   at android.os.Handler.dispatchMessage(Handler.java:99)
05-25 06:07:31.809: E/WindowManager(331):   at android.os.Looper.loop(Looper.java:123)
05-25 06:07:31.809: E/WindowManager(331):   at android.app.ActivityThread.main(ActivityThread.java:3683)
05-25 06:07:31.809: E/WindowManager(331):   at java.lang.reflect.Method.invokeNative(Native Method)
05-25 06:07:31.809: E/WindowManager(331):   at java.lang.reflect.Method.invoke(Method.java:507)
05-25 06:07:31.809: E/WindowManager(331):   at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
05-25 06:07:31.809: E/WindowManager(331):   at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
05-25 06:07:31.809: E/WindowManager(331):   at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T20:07:16.503

您看到的错误`NetworkOnMainThreadException`基本上意味着它所说的，您正在尝试在主线程上进行一些网络活动。

从[文档](http://developer.android.com/reference/android/os/NetworkOnMainThreadException.html)中：

> 当应用程序尝试在其主线程上执行网络操作时引发的异常。
> 
> 这仅针对面向 Honeycomb SDK 或更高版本的应用程序抛出。允许以早期 SDK 版本为目标的应用程序在其主事件循环线程上进行网络连接，但非常不鼓励这样做。请参阅文档设计响应性。
> 
> 另请参阅严格模式。

我建议将该`readRss()`方法移到异步任务中。

# php - 将逗号应用于 MySQL 中的数字字段

> ID：10744437
> 
> 赞同：5
> 
> 时间：2012-05-24T19:59:46.957
> 
> 标签：php, mysql, numbers, comma

我有一列包含数字。是否可以使用功能使数字在服务器端以逗号显示？或者我需要在客户端使用 php 脚本吗？我更喜欢服务器端。

提前致谢。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-24T20:00:52.183

只需使用 MySQL 的[`FORMAT()`](http://dev.mysql.com/doc/refman/5.5/en/string-functions.html#function_format)功能

```
mysql> SELECT FORMAT(12332.123456, 4);
        -> '12,332.1235'
mysql> SELECT FORMAT(12332.1,4);
        -> '12,332.1000'
mysql> SELECT FORMAT(12332.2,0);
        -> '12,332'
mysql> SELECT FORMAT(12332.2,2,'de_DE');
        -> '12.332,20' 
```

或者 PHP 的[`number_format()`](http://us3.php.net/manual/en/function.number-format.php)

```
<?php

$number = 1234.56;

// english notation (default)
$english_format_number = number_format($number);
// 1,235

// French notation
$nombre_format_francais = number_format($number, 2, ',', ' ');
// 1 234,56

$number = 1234.5678;

// english notation without thousands separator
$english_format_number = number_format($number, 2, '.', '');
// 1234.57

?> 
```

# html - html5 视频可在除 IE9 之外的所有浏览器上播放

> ID：10744438
> 
> 赞同：1
> 
> 时间：2012-05-24T19:59:50.110
> 
> 标签：html, internet-explorer-9, html5-video

我想发布这个问题和答案，因为我无法在任何地方找到它。

因此，如果您`<video>`在不同的浏览器上使用 HTML5 播放，请确保您的 HTML 的其余部分是有效的，这样您的视频才能在 IE9 上播放。

以下代码适用于 Chrome 19、Firefox 12、Opera11 以及 iOS5 但**不适**用于IE9：

```
<video controls="controls">
   <source src="video.mp4" type="video/mp4" />
   <source src="video.ogg" type="video/ogg" />
   Your browser does not support the video tag.
</video> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T19:59:50.263

要让它在 IE9 上播放，

你需要这个完整的标记：

```
<!DOCTYPE html>
<html lang="en">
<head></head>
<body>
<video controls="controls">
   <source src="video.mp4" type="video/mp4" />
   <source src="video.ogg" type="video/ogg" />
   Your browser does not support the video tag.
</video>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-24T20:03:33.860

首先检查您的浏览器是否支持 HTML 5 Video

[检查浏览器是否支持视频](http://html5test.com/)

# actionscript-3 - flex datagrid 锁定列

> ID：10744440
> 
> 赞同：0
> 
> 时间：2012-05-24T19:59:58.497
> 
> 标签：actionscript-3, apache-flex, flash-builder

我想创建一个带有锁列的数据网格。为此，我尝试了两种方法，但任何人都可以正常工作。

首先，我尝试：

```
 <mx:DataGrid lockedColumnCount="3" id="dgSuiviClini"
                                         horizontalScrollPolicy="on"
                                         dataProvider="{xmlCollSuivi}"
                                         editable="true"
                                         verticalLockedSeparatorSkin=""
                                         width="100%" height="{bgSuivi.height-90-90}" >
                                <mx:columns>
                                    <mx:DataGridColumn dataField="prescription"  headerText="P." editable="false" resizable="false" width="20"/>
                                    <mx:DataGridColumn dataField="grDateDeb" headerText="Date" editable="false" resizable="false" fontStyle="italic"

                                                       />
                                    <mx:DataGridColumn dataField="code" headerText="Type" editable="false" resizable="false" fontStyle="italic"
                                                       />
                                    <mx:DataGridColumn dataField="scRub2" headerText="R1" editable="true" wordWrap="true"/>
                                    <mx:DataGridColumn dataField="scRub3" headerText="R1" wordWrap="true"/>
                                    <mx:DataGridColumn dataField="scRub4" headerText="R1" wordWrap="true"/>
                                    <mx:DataGridColumn dataField="scRub5" headerText="R1" wordWrap="true"/>
                                    <mx:DataGridColumn dataField="scRub6" headerText="R1" wordWrap="true"/>
                                    <mx:DataGridColumn dataField="scRub7" headerText="R1" wordWrap="true"/>
                                    <mx:DataGridColumn dataField="scRub8" headerText="R1" wordWrap="true"/>
                                </mx:columns>

                            </mx:DataGrid> 
```

但在这种情况下，所有数据网格都会出现水平滚动条。我希望它只出现在没有锁定的列上。

第二种方法，我将两个数据网格放在同一个容器中，一个关闭滚动策略，另一个打开。

在这种情况下，只有第一个数据网格被锁定。但是作为使用 wordWrap="true" heigt 行在左侧和右侧部分是不同的。

所以我试图找到一个解决方案来拥有这样的东西：

谢谢![在此处输入图像描述](../Images/8a9804310384415b12aec41539a17695.png)

# c++ - 'fabs' : 使用模板时对重载函数的模糊调用

> ID：10744451
> 
> 赞同：0
> 
> 时间：2012-05-24T20:00:47.357
> 
> 标签：c++

我有以下功能：

```
T* tContainer_t<T, R>::Remove( T item )
{    
    typename R::const_iterator it = std::find_if(Container.begin(), Container.end(),  [item](const T* v) { return std::fabs(*v - item) < DBL_EPSILON; });
    if (it != Container.end())
    {
        ...
    }
    else
        return NULL;
} 
```

`T`可以是`int`, `double`, `float`, 等等....

编译器给了我`'fabs' : ambiguous call to overloaded function when using templates`

有什么问题，如何解决？

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-24T20:10:36.780

> `T`可以是`int`, double `float`, 等

`std::fabs`在 C++ 中`float`，有`double`、 和的三个重载`long double`。

如果您尝试`std::fabs`使用 type 的参数进行调用`int`，则会由于重载歧义而导致编译错误。一个`int`参数同样匹配所有三个可用的重载。

您可以将参数强制转换为已知类型（例如`double`or `long double`），这将解决歧义，或者您可以将调用包装到`fabs`对整数类型参数执行消歧的模板中。

或者，C++ has `std::abs`，它对整数和浮点类型（在`<cmath>`and中声明`<cstdlib>`）都进行了重载。此外，如果您最近有一个实现 C++11 的标准库实现，则`std::fabs`使用整数类型参数的调用将自动将参数转换为 type `double`，因此没有歧义。

# ioctl - 从用户模式查询 NDIS OID

> ID：10744452
> 
> 赞同：0
> 
> 时间：2012-05-24T20:00:47.543
> 
> 标签：ioctl, ndis

为 WinXPe 编写 NDIS 5.1 驱动程序。除了正常的 NDIS 发送/接收功能外，驱动程序还需要为用户进程提供一些离散的 IO 值，大概是通过一组自定义 OID。网络上的信息表明 IOCTL_NDISUIO_OPEN_DEVICE 然后 IOCTL_NDISUIO_QUERY_OID_VALUE 将是完美的，但这些功能似乎仅限于 Windows CE 而不是 WinXPe。CreateFile 到“\\.\\NdisUio”成功，但 IOCTL_NDISUIO_OPEN_DEVICE 失败，代码 (50)“不支持请求”。此外，我不得不作弊只是为了让 nuiouser.h 进入我的项目，因为它不适用于常规 SDK。WMI 似乎没有帮助，因为 WMI 似乎只支持“标准”参数，而不支持自定义参数。

如有必要，我相信我可以在我的 NDIS 驱动程序中实现 IoCreateDevice 和 IoCreateSymbolicLink，然后使自定义 IOCTL 可用于用户进程。但如果可能的话，我宁愿走 OID 路线。

WinXPe 用户进程能否执行 NDIS OID 查询？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T07:44:30.590

与驱动程序 SYS 集成的 MOF 文件允许链接到 WMI 系统，从而访问 OID 数据。

# python - Python MySQL插入NULL（无）值错误

> ID：10744469
> 
> 赞同：3
> 
> 时间：2012-05-24T20:01:25.453
> 
> 标签：python, mysql, null

我正在尝试使用 python 脚本将 NULL 值插入 MySQL db int 字段。NOT NULL 在该字段上处于关闭状态，因此不是那样。我已经手动将一个 NULL 值插入到数据库中，并且工作正常，如果我将文字值代替 None，我的代码工作正常。

我看过几个人的例子，说明如何做到这一点，据我所知，语法没有错。

代码：

```
length2 = None

cursor.execute("INSERT INTO tableName(Length) VALUES(%s)", length2) 
```

错误：

```
Error 1064: You have an error in your SQL syntax; check the manual that 
corresponds to your MySQL server version for the right syntax to use near 
'%s)' at line 1 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-24T20:54:19.847

的第二个参数`execute()`应该是一个元组（或列表）。
请将您的代码更改为：

```
cursor.execute("INSERT INTO tableName (Length) VALUES (%s);", (length2,)) 
```

# yii - Yii：如何用另一个模型数据填充 Select 输入？

> ID：10744479
> 
> 赞同：2
> 
> 时间：2012-05-24T20:02:13.720
> 
> 标签：yii, relational-database

我正在玩一个小应用程序来学习使用 Yii。

我创建了一个带有 2 个模型/表的小型 webapp：项目和任务。（一对多关系，在模型类中正确配置）。

我现在正在尝试自定义任务/创建视图，将文本输入字段替换为提出可用项目列表的选择框。

我打开了表单视图并尝试了这个：

```
<div class="row">
    <?php echo $form->labelEx($model,'project_id'); ?>
    <?php echo $form->textField($model,'project_id'); ?>
    <?php 
// my hack starts here
    $projects = Project::model()->findAll();
    $list = CHtml::listData($projects, 'id', 'name');
    echo $form->listBox($model,'project_id','', $list); ?>

// my hack ends here
    <?php echo $form->error($model,'project_id'); ?>
</div> 
```

但它不断抛出警告或错误（例如`Invalid argument supplied for foreach()`，并且绝对不起作用。我无法理解我做错了什么。你能帮忙吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-24T21:04:21.687

您的论点不正确（应该如此）：

```
$frameworks = Framework::model()->findAll();
$list = CHtml::listData($frameworks, 'id', 'name');
echo $form->listBox($model,'framework_id', $list,array()); 
```

检查[文档](http://www.yiiframework.com/doc/api/1.1/CActiveForm#listBox-detail)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-24T21:06:38.853

好的，我找到了，感谢[Larry Ullman 出色的教程](http://www.larryullman.com/2009/11/12/basic-view-edits-in-yii/#more-680)。

这里是：

```
<?php echo $form->dropDownList($model,'project_id', CHtml::listData(Project::model()->findAll(), 'id', 'name')); ?> 
```

# c# - 在pictureBox中找不到Image的路径，Image = new Bitmap(path)

> ID：10744481
> 
> 赞同：1
> 
> 时间：2012-05-24T20:02:43.137
> 
> 标签：c#, winforms, image, picturebox

我需要将图片加载到 WindowsCE 6.0 中的图片框。当我在手机中运行程序时，它告诉我它找不到路径。这是我的代码：

```
this.pictureBox1.Image = new Bitmap(@" Data Source = \Program Files\Data\Image20120523_1.jpeg "); 
```

我已经尝试过使用此路径，但它不起作用：

> 路径1：@“\Program Files\Data\Image20120523_1.jpeg” 路径2
> ：“\Program Files\Data\Image20120523_1.jpeg”

我有一个位于同一路径中的数据库，当我使用它建立连接时它可以正常工作，为什么它无法加载图像？

**解决方案** 这条路径工作正常：

```
this.pictureBox1.Image = new Bitmap(@"\Program Files\Data\Image20120523_1.jpeg"); 
```

感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T21:15:05.203

您需要在此处使用图像文件的简单路径。像这样：

```
this.pictureBox1.Image = new Bitmap(@"E:\temp\photo\IMG_1461.JPG"); 
```

# android - 未创建 Android ActionBar

> ID：10744486
> 
> 赞同：1
> 
> 时间：2012-05-24T20:02:58.133
> 
> 标签：android, android-actionbar

我目前正在开发 Android 上的 mp3 库。问题是，有 4 个选项卡，分别代表歌曲、专辑、艺术家和播放列表。我的主要活动为每个选项卡创建一个选项卡规范并将它们添加到选项卡主机。问题是，我不能使用 ActionBar。我尝试了来自 Android Developpers 的教程，它运行良好，但是当我尝试将它应用于我的项目时它不起作用。我看不到操作栏，如果我在我的活动中尝试 getActionBar()，它会返回 null。

与教程中一样，我将此代码放入活动中：

```
@Override    
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.actionbar_menu, menu);
    return true;
} 
```

我创建了这个菜单：

```
<?xml version="1.0" encoding="utf-8"?>

<menu xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:id="@+id/menu_save"
          android:title="Hello !"
          android:showAsAction="ifRoom" />
</menu> 
```

我想为了显示操作栏还有更多的事情要做，但是从现在起我在网上找不到准确的...这与我的主要活动中的 xml 有关吗？

感谢您的关注

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-03-08T22:48:44.560

对我来说，我将此添加到我的清单中：

```
android:theme="@android:style/Theme.Holo.Light.DarkActionBar" > 
```

希望这可以节省一些时间来查找它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-24T20:31:45.110

操作栏仅适用于 Android 3.0 及以上版本，您需要将应用程序主题设置为 Holo。

除了设置 sdk 版本，例如：

```
<uses-sdk android:minSdkVersion="11" android:targetSdkVersion="15"/> 
```

您还必须使应用程序主题使用*Holo*。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-06T19:40:04.943

让它`android:minSdkVersion="14"`对我有用。

# debugging - 通过 JPDA 连接到 weblogic 集群

> ID：10744487
> 
> 赞同：0
> 
> 时间：2012-05-24T20:02:59.040
> 
> 标签：debugging, weblogic, remote-debugging, jpda

我在暂存环境中的两台机器上设置了一个 weblogic 集群。我想在至少一个 weblogic 实例上设置 JPDA，以便可以远程调试。通常我使用 wlst.sh 和 jython 脚本通过以下方式启动集群：

```
startNodeManager(...)
nmConnect(...)
nmStart(MyAdminServer)
connect(...) #connect to the admin server
start(...) #start the cluster 
```

我应该把`-Xdebug Xrunjdwp:transport...`咒语放在哪里，以便我可以附加到 weblogic 实例之一？我通过我的域在单个实例上设置它没有问题`startWebLogic.sh`，但它似乎不适用于集群。

从这里开始：[https](https://forums.oracle.com/forums/thread.jspa?threadID=2233816) ://forums.oracle.com/forums/thread.jspa?threadID=2233816看起来我想将调试字符串放入其中，`startManagedWeblogic.sh`但这似乎也不适用于我的 jython 脚本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T20:34:55.560

[从http://docs.oracle.com/cd/E13222_01/wls/docs90/server_start/nodemgr.html#1081870](http://docs.oracle.com/cd/E13222_01/wls/docs90/server_start/nodemgr.html#1081870)弄清楚了：

```
 4\. The Administration Server obtains the domain configuration from its config directory 
```

我检查了我域下的 config 目录，其中有一个名为`config.xml`. 此文件中包含 weblogic 节点的配置以及您想要放置 JDPA 配置的位置：

```
<server>
  <name>my-target-machine</name>
  ...
  <server-start>
    ...
    <arguments>(your other config stuff) -Xrunjdwp:transport=dt_socket,address=4000,server=y,suspend=n</arguments> 
```

# function - Matlab从一个函数调用一个函数

> ID：10744491
> 
> 赞同：0
> 
> 时间：2012-05-24T20:03:11.677
> 
> 标签：function, matlab

我有两个功能：

```
function [] = func_one()
     S.pb = uicontrol('style','push','unit','pix','posit',[20 20 260 30],
                      'string','Print Choices','callback',{@func_two,S}); 
```

我有第二个功能：

```
 function [a] = func_two(varargin)
       a = 'alon';
   end 
```

我想`func_one`返回 的变量`a`。`func_two`请问我该怎么做？

我试过了：

```
 function [a] = func_one() 
```

但我想我必须对“回调”做点什么，{@func_two,S})

谢谢你们！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T21:15:19.230

如果，如您所说，您想`func_one`返回值`a`，`func_two`那么不使用回调的最简单方法是：

```
function [a] = func_one()
     S.pb = uicontrol('style','push','unit','pix','posit',[20 20 260 30],
                      'string','Print Choices');

     a = func_two() 
```

以上将允许您说 run`a=func_one`并将`a`成为 string `'alon'`。

如果你真的想`func_two()`成为你的按钮的回调，并且你想`a='alon'`被分配到`func_one`（调用的函数`func_two`）的工作区中，那么把它放在`func_two`

```
assignin('caller','a',a) 
```

如果两者都不是您想要的，那么也许您可以说明为什么要`func_one`返回返回的内容`func_two`- 例如您希望与 GUI 进行的确切交互以及它与您实际体验的不同之处。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-25T01:30:51.870

If you are designing a GUI programmatically, I suggest you use nested functions to [share data](http://www.mathworks.com/help/techdoc/matlab_prog/f0-38068.html#f0-50984). Example:

```
function IncrementExample()
    x = 0;
    uicontrol('Style','pushbutton', 'String','(0)', ...
        'Callback',@callback);

    function callback(o,e)
        %# you can access the variable x in here
        x = x + 1;

        %# update button text
        set(o, 'String',sprintf('(%d)',x))
        drawnow
    end
end 
```

![enter image description here](../Images/fa268ab73d5c38ea8da07f46598246b9.png)

# c# - 具有多个项目的 Visual Studio 解决方案：参考路径

> ID：10744499
> 
> 赞同：1
> 
> 时间：2012-05-24T20:03:40.537
> 
> 标签：c#, visual-studio-2010

我有一个包含三个项目的 Visual Studio 2010 解决方案：

*   一个 Windows 服务，它将从 SQLite 数据库中读取数据以执行操作
*   一个 Winforms 应用程序，它将提供一种配置服务行为的方法（通过更新 SQLite 数据库）
*   一个类库项目，用于将所有数据库访问从服务和配置应用程序中抽象出来（使将来更容易更新与数据库有关的任何内容，而无需在其他两个项目中查找查询）

所有这些项目都在同一个解决方案中，并且我已将 Winforms 应用程序和服务的引用添加到类库中。在这两个项目中，我都能够看到类库中的类并与它们进行交互，但我遇到了问题。我已经在我的类库项目的 /Resources/ 目录中创建了数据库（因为对我来说“公共”项目是存储公共数据库的唯一明智的地方），但是每当我尝试在 Winforms 应用程序中访问数据库时，它没有返回我知道的数据。由于 System.Data.SQLite 具有在未找到文件时创建空数据库文件的默认行为（我认为这是一个奇怪的选择），因此我什至无法返回并判断数据库是否存在。

这让我怀疑我没有正确理解一个项目中的文件是如何在另一个项目中引用的。这是我的项目的样子：

![VS 中解决方案管理器的屏幕截图](../Images/f9e00f57f8af969d6bb0a76a26019e07.png)

WorkModeCommon 包含类 SQLiteDatabase 和 ScheduleManager，其中 ScheduleManager 有一个 SQLiteDatabase() 并且 SQLiteDatabase 与 Resources/WorkModeSchedules.s3db 交互

WorkModeConfigApp 和 WorkModeService 都有一个 WorkModeCommon.ScheduleManager()，理论上它应该负责所有的数据库交互。

我的设计是否存在重大缺陷，或者有人可以向我指出可以帮助我解决我遇到的问题的资源吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T20:17:44.763

当您开始调试 WorkModeConfigApp 时，应用程序从其 bin\debug 目录运行，无法访问类库的资源目录。简单地引用类库并不意味着 VS 将类库的资源目录复制到 Config 应用的 bin/debug 中。如果为类库设置 Copy Local = true ，VS 将在 WorkModeConfigApp 的 bin\debug 中复制已编译的 DLL，但不会复制资源目录的内容

另一方面，您可以`copy to the output directory`为 .s3db 文件设置属性，这样文件及其目录将被复制到 WorkModeConfigApp 的 bin\debug 中。但这将是其他问题的根源，因为在调试期间，您的测试数据库有可能被来自类库的数据库覆盖。

我认为您最好的选择是将服务和配置应用程序的配置文件保存在该文件的位置，并且不要弄乱上述属性。

我们正在谈论一个数据库，所以可能在应用程序和服务的配置文件中，您需要添加一个连接字符串。您可以将所需的节点添加到您的 App.config，请参见下面的示例：

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
    <configSections>
    </configSections>
    <connectionStrings>
        <add name="WindowsFormsApplication1.Properties.Settings.MyDatabaseConnection"
            connectionString="Data Source=C:\ProgramData\MyAppName\/WorkModeSchedules.s3db;Version=3;Pooling=True;Max Pool Size=100;"/>
    </connectionStrings>
</configuration> 
```

然后，您可以使用以下方法之一访问此值：

```
string cnnString1 = ConfigurationManager.ConnectionStrings["MyDatabaseConnection"];
string cnnString2 = Properties.Settings.Default.MyDatabaseConnection; 
```

（ConfigurationManager 方法需要引用 System.Configuration 程序集）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T20:09:34.170

我认为这就是正在发生的事情。
当您引用公共类库时，它只是使用 .dll 输出作为引用，因为它是唯一的输出。
但是，如果您右键单击 .s3db 文件并转到其属性，则可以将其`Copy to Output Directory`设置为`Copy if newer`，这样数据库文件本身就在输出目录中，因此 .dll 文件可以看到它。
现在，当您的表单或服务从公共类库项目的输出目录访问 .dll 文件时，它也会引用 .s3db 文件，因此它们都会看到相同的数据。

这是否是一个好的设计取决于您的需求。
如果表单和服务同时查看相同的数据，那么您必须确保它们至少查看的是同一个文件，而不是它们自己的 .s3db 文件副本。
如果只是表单或服务访问数据库，我可以接受，但由于多个进程（表单和服务）正在访问它，因此通用数据库服务器是一个不错的选择。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-24T20:13:21.957

编译的类对引用它们的外部程序集是可见的，只要它们的可见性是公共的（有一些例外）。非编译文件是另一回事。您可以将构建操作指定为“嵌入式资源”，这将允许您从引用程序集访问文件，尽管是以只读方式。另一个选项（可能是您想要的）是将“复制到输出目录”指定为“始终复制”或“如果更新则复制”。这将在构建时将文件复制到输出目录。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-24T18:59:51.103

好的，伙计们，我已经解决了我的问题。我所做的是在每个项目中包含数据库文件的副本，并将除一个实例（“通用”项目）之外的所有实例（“通用”项目）上的“复制到输出目录”属性设置为“不复制”。之后，我将所有三个项目的输出目录更改为同一个目录（更具体地说，我创建了集中的 Debug 和 Release 目录，并将正确的构建配置指向正确的目录）。我现在能够使用单个 DB 文件和集中式类库成功测试！

# maxima - 将值列表分配给变量列表

> ID：10744501
> 
> 赞同：3
> 
> 时间：2012-05-24T20:03:42.563
> 
> 标签：maxima

Maxima 中有没有办法将值分配给变量列表？假设我有两个列表：

变种：[a，b，c]；val : [1, 2, 3];

...并且我想将 1 分配给 a，将 2 分配给 b 等等。当然，通过以某种方式迭代列表，而不是“手动”，即 a : 1; 乙：2 ...

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T21:39:31.673

使用 :: 运算符。

```
(%i4) x : '[a, b, c];
(%o4)                       [a, b, c]
(%i5) x :: [11, 22, 33];
(%o5)                     [11, 22, 33]
(%i6) a;
(%o6)                          11
(%i7) b;
(%o7)                          22
(%i8) c;
(%o8)                          33 
```

# c# - Windows 窗体窗口内的 WPF 窗体

> ID：10744502
> 
> 赞同：1
> 
> 时间：2012-05-24T20:03:46.990
> 
> 标签：c#, wpf, winforms, rss, integration

我想让这个位于我的 Windows 表单应用程序中的 Info.xaml 文件加载到我当前的表单中，但是通过单击按钮来完全填充它。

这是我的代码：

```
<Window x:Class="RssDemo.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="RSS Demo" mc:Ignorable="d" xmlns:d="http://schemas.microsoft.com/expression/blend/2008" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" Height="576" Width="521">
    <Window.Background>
        <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
            <GradientStop Color="#FFE2E2E2" Offset="0" />
            <GradientStop Color="White" Offset="1" />
        </LinearGradientBrush>
    </Window.Background>

    <Window.Resources>
        <XmlDataProvider x:Key="rssData" XPath="//item" Source="***********" />
    </Window.Resources>

    <Grid Margin="3">
        <Grid.RowDefinitions>
            <RowDefinition Height="177*" />
            <RowDefinition Height="55*" />
            <RowDefinition Height="122*" />
            <RowDefinition Height="177*" />
        </Grid.RowDefinitions>

        <ListBox x:Name="lstItems" Margin="3,6,3,0" ItemsSource="{Binding Source={StaticResource rssData}}"
                 SelectedIndex="0">
            <ListBox.ItemTemplate>
                <DataTemplate>
                    <StackPanel Orientation="Horizontal">
                        <Image Width="20" Margin="3" Source="{Binding XPath=enclosure/@url}" />
                        <TextBlock Margin="3" VerticalAlignment="Center" Text="{Binding XPath=title}" FontWeight="Bold" />
                    </StackPanel>
                </DataTemplate>
            </ListBox.ItemTemplate>
        </ListBox>

        <StackPanel Grid.Row="1" Orientation="Vertical" DataContext="{Binding ElementName=lstItems, Path=SelectedItem}" Margin="0,0,0,5">
            <TextBlock Margin="3" FontSize="13" FontWeight="Bold" Text="{Binding XPath=title, Path=InnerText}" />
            <TextBlock Margin="3" Opacity="0.72" Text="{Binding XPath=pubDate}" />
        </StackPanel>
        <ScrollViewer Grid.Row="2" HorizontalScrollBarVisibility="Disabled" VerticalScrollBarVisibility="Auto" DataContext="{Binding ElementName=lstItems, Path=SelectedItem}" Margin="0,1,0,0" Grid.RowSpan="2">
            <TextBlock ScrollViewer.CanContentScroll="True" ScrollViewer.HorizontalScrollBarVisibility="Disabled" ScrollViewer.VerticalScrollBarVisibility="Auto" Margin="3"
                       FontStyle="Italic" Text="{Binding XPath=description, Path=InnerText}" TextWrapping="Wrap" TextAlignment="Justify" Width="489" AllowDrop="False"
                       Foreground="#FF0000E7" FontFamily="Lucida Sans Unicode" Height="352" />
        </ScrollViewer>

    </Grid>
</Window> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T20:07:34.577

**您可以使用 * *ElementHost****，如此处所述**

[http://blogs.msdn.com/b/calvin_hsia/archive/2007/12/11/6740119.aspx](http://blogs.msdn.com/b/calvin_hsia/archive/2007/12/11/6740119.aspx)

**或者，您也可以在这里查看 [如果您可以将其转换为用户控件]**

[http://msdn.microsoft.com/en-us/library/ms745781.aspx](http://msdn.microsoft.com/en-us/library/ms745781.aspx)

**如果您特别希望 Windows 窗体打开 WPF 窗口，请在此处阅读**- [http://msdn.microsoft.com/en-us/library/system.windows.forms.integration.elementhost.enablemodelesskeyboardinterop.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.integration.elementhost.enablemodelesskeyboardinterop.aspx)

更多信息在这里 - [http://social.msdn.microsoft.com/Forums/en-US/wpf/thread/442782b1-00a1-4e2e-9cc6-ae99b6699126/](http://social.msdn.microsoft.com/Forums/en-US/wpf/thread/442782b1-00a1-4e2e-9cc6-ae99b6699126/)

# delphi - Delphi TImageList 位图更改

> ID：10744505
> 
> 赞同：15
> 
> 时间：2012-05-24T20:04:00.100
> 
> 标签：delphi, version-control, delphi-xe2, timagelist

我正在使用 Delphi XE2 Update 3。Update 4 与我们的一些 3rd 方组件不兼容，所以我们还没有更新。

我在我的应用程序中使用 TImageList。我注意到很多次当它从源视图切换到表单视图（F12）时，突然之前未修改的单元将被修改。如果我保存按 F12 引起的更改，我可以查看源代码管理并看到 TImageList.Bitmap 属性的几个字节已更改。这是在 TortoiseHg Workbench 中看到的一个示例：

```
@@ -830,7 +830,7 @@
     Left = 760
     Top = 480
     Bitmap = {
-      494C01010200E402E40210001000FFFFFFFFFF10FFFFFFFFFFFFFFFF424D3600
+      494C01010200E802E80210001000FFFFFFFFFF10FFFFFFFFFFFFFFFF424D3600
                   ^^  ^^  <-- two bytes changed 
```

有时还有其他微小的变化，但它总是仅限于 TImageList.Bitmap 数据中的几个孤立点。当我没有进行任何有意的更改时，不断地将这些微不足道的更改推送到源代码控制中是一件非常痛苦的事情。

有谁知道为什么 Delphi 在源视图和表单视图之间切换时会更改 TImageList.Bitmap 数据？有没有办法解决这个限制？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-29T11:53:14.253

这是一个非常烦人的 IDE 错误，有时已经在 Embarcadero Quality Central 中报告过，尤其是在[QC 92769](http://qc.embarcadero.com/wc/qcmain.aspx?d=92769)中，但不幸的是它还没有修复。:-(

# c++ - 更改此协议以使用 TCP 流

> ID：10744513
> 
> 赞同：0
> 
> 时间：2012-05-24T20:04:39.850
> 
> 标签：c++, tcp

我为我的游戏制定了一个简单的协议：

```
b = bool
i = int
sINT: = string whose length is INT followed by a : then the string
m = int message id. 
```

例子：

```
m133s11:Hello Worldi-57989b0b1b0 
```

这将是：

```
Message ID 133
String 'Hello World' length 11
int -57989
bool false
bool true
bool false 
```

但是我不知道 TCP 可能只发送消息的一部分。我不确定如何修改它以便可以执行以下操作：

```
on receive data from client:
use client's chunk parser
process data
if has partial message then try to find matching END
if no partial messages then try to read a whole message

for each complete message in queue, dispatch it 
```

我可以通过在消息的开头添加 B 并在末尾添加 E 来做到这一点，然后解析第一个字符为 B，最后一个字符为 E。

唯一的问题是，如果我在中间收到一些不符合协议的愚蠢的东西怎么办。或者，如果我应该只收到不是消息而只是字符串的东西怎么办。因此，如果我打算以某种方式接收字符串 HelloB，那么我会将其解析为 hello 和消息的开头，但我永远不会收到该消息，因为它不是消息。

我如何修改我的协议来解决这些潜在问题？尽管我预计只会收到格式正确的消息，但如果一个消息编码不良并且一切都乱七八糟，那将是一场噩梦。

谢谢

我决定在开头添加长度并跟踪我是否正在处理消息：所以：

```
p32m133s11:Hello Worldi-57989b0b1b0 
```

然后我有 3 个状态，读取以查找“p”，读取以查找“p”之后的长度或读取字节直到读取长度字节。

你怎么看？

它似乎工作得很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T22:21:12.213

你正在做的是相当老派的磁带东西。好的。

您可能遇到的问题是，如果收到部分消息，则无法判断您是否正在通过令牌。

例如，如果您收到：

```
m12 
```

这是消息 12，还是消息 122 的第一部分？

如果您收到：

```
i-12 
```

这是整数 -12 还是整数 -124354 的第一部分？

所以我认为你需要改变它，使消息编号是固定宽度（例如四位），字符串长度是固定的（例如 6 位），整数宽度固定为 10 位。

所以你的例子是：

```
m_133s____11:Hello Worldi____-57989b0b1b0 
```

这样，如果您获得消息的第一部分，您可以存储它并等待其余部分在您处理之前收到。

您还可以考虑使用控制字符来分隔消息部分。有经常用于此目的的 ascii 控制代码，RS、FS、GS 和 US。所以一条消息可能是

```
[RS]FieldName[US]FieldValue[RS]fieldName[US]FieldValue[GS]. 
```

您知道什么时候有完整的消息，因为 [GS] 标志着结束。然后，您可以使用 [RS] 作为分隔符将其划分为多个字段，并使用 [US] 将每个字段拆分为名称/值。

有关简要信息，请参阅[http://en.wikipedia.org/wiki/C0_and_C1_control_codes 。](http://en.wikipedia.org/wiki/C0_and_C1_control_codes)

# objective-c - 如何以编程方式从 iOS Safari 中删除 cookie？

> ID：10744521
> 
> 赞同：0
> 
> 时间：2012-05-24T20:04:59.647
> 
> 标签：objective-c, cocoa-touch, ios5, cookies, mobile-safari

是否可以以编程方式从 iOS 设备中删除 Safari cookie？

我不在乎这是否会让我被踢出 AppStore，因为它永远不会被提交。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-24T20:33:01.557

我在这里为你找到了一些东西：

```
[[NSHTTPCookieStorage sharedHTTPCookieStorage] deleteCookie:]; 
```

你也可以[在这里](http://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSHTTPCookieStorage_Class/Reference/Reference.html)看到一些关于它的东西。

# c# - 创建一个对象集合并查询它

> ID：10744526
> 
> 赞同：0
> 
> 时间：2012-05-24T20:05:18.883
> 
> 标签：c#, oop

一个愚蠢的问题。我有三个班。DataTableManager 类是一种全局类。

```
public  class DataTableManager
{
    public DataTable dt1 { get; set; }
    public List<object> SchoolInfo { get; set; }
    public string ApplicationName {get;set;}
    public int number;
} 
```

在公共类 DataCreate 中，我想向对象添加不同类型的变量，然后我们可以在另一个公共类摘要中获取它们。我的问题是我不熟悉不同类型变量的对象集合。

例如，在

```
public class DataCreate 
{

   public string FirstName { get; set; }
   public string LastName { get; set; }
   public int ID { get; set; }
   public GradeLevel Year;
} 
```

我想将它们添加到 SchoolInfo。假设它们来自文本框。不知道该怎么做？

以及如何在我的第三课摘要中检索它？

谢谢。

> 更新：

DataTableManager 对象是一个包含所有表单信息的全局对象。在每个表格中我们要设置对象并由DataTableManager 对象持有。然后最后我想以最后一种形式获得它们。我想要的是每个表单都有一个对象来保存所有变量，尽管它们有不同的类型。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T20:09:40.130

要创建一个新`DataCreate`对象并将其添加到`DataTableManager`对象`SchoolInfo`列表中，您需要执行以下操作：

```
DataTableManager manager = new DataTableManager();
DataCreate data = new DataCreate();
data.LastName = TextBox1.Text;
data.ID = TextBox2.Text;
manager.SchoolInfo.Add(data); 
```

但是，我应该指出，将其声明`SchoolInfo`为一种`List<Object>`属性是一种不好的做法。将其声明为`List<DataCreate>`.

要将 DataCreate 对象从 DataCreate 对象本身添加到列表中，您需要执行以下操作：

```
manager.SchoolInfo.Add(this); 
```

DataTableManager 不是一个对象，它是一种类型。您必须实例化它才能创建一个对象（就像我调用 时所做的那样`new DataTableManager`）。或者，您可以将其设为静态类，这样就没有需要实例化的对象，并且您可以通过其类型名称（例如`DataTableManager.SchoolInfo.Add(...)`）直接访问它的成员，但这不是您当前定义它的方式。

但是，我完全不建议按照您的方式做事。拥有全局变量从来都不是一个好主意。相反，如果表单需要访问 DataTableManager 对象，它应该请求它（通过将一个传递给表单上的构造函数的参数，或者通过在表单上设置公共属性，或者通过调用某种窗体上的公共初始化方法）。您必须在某处显示这些 DataCreate 表单的代码。正是该代码所在的类应该实例化管理器并将其提供给表单。

但是，通常您不希望存储对所有表单的引用。通常，您只想存储输入的数据。为此，您需要创建一个没有功能的新类，只是数据的公共属性。然后让表单返回其中一个对象，然后让中心类显示表单，获取返回的数据并将其添加到管理器。

例如：

```
public class DataManager
{
    public List<StudentData> Students { get; set; }
    // etc.
}

public class StudentData
{
    public string FirstName { get; set; }
    public string LastName { get; set; }
    // etc.
}

public class StudentEntryDialog : Form
{
    public StudentData StudentData { get; set; }

    // ... code to call storeData method when user chooses to do so ...

    private void storeData()
    {
        StudentData = new StudentData();
        StudentData.FirstName = TextBox1.Text;
        StudentData.LastName = TextBox2.Text;
        // etc.
    }
}

public class CentralCodeOfSomeSort
{
    private DataManager manager = new DataManager();

    private showStudentEntry()
    {
        StudentEntryDialog dialog = new StudentEntryDialog();
        dialog.ShowDialog();
        if (dialog.StudentData != null)
            manager.Students.Add(dialog.StudentData);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T20:18:54.737

我不确定你想要什么。只是猜测。为学生创建一个班级

```
public class Student
{
    public string FirstName { get; set; }
    public string LastName { get; set; }
    public int ID { get; set; }
    ...
} 
```

并将您的列表定义为

```
public List<Student> SchoolInfo { get; set; } 
```

现在您可以将学生添加到列表中

```
 var manager = new DataTableManager(); 
 var student = new Student {
     FirstName = firstNameTextBox.Text;
     LastName = lastNameTextBox.Text;
     ID = Int32.Parse(IdTextBox.Text);
 };
 manager.SchoolInfo.Add(student); 
```

您可以使用（例如）查询列表

```
var query = manager.SchoolInfo
    .Where(s => s.LastName.StartsWith("A")
    .OrderBy(s => s.LastName)
    .ThenBy(s => s.FirstName) 
```

# windows - 在 Windows Mobile 应用程序上显示子项的文本名称而不是父项

> ID：10744528
> 
> 赞同：0
> 
> 时间：2012-05-24T20:05:38.483
> 
> 标签：windows, vb.net, mobile, showdialog

我有一个使用 ShowDialog() 打开子屏幕的 vb.net 应用程序。

长话短说，如果我在程序顶部打开 IE 而不最小化程序，我会遇到集中控制的问题。一旦我重新激活我的程序并关闭一个子窗口，IE 将再次显示而不是我的程序。我通过设置表单的所有者来解决这个问题。

现在我有另一个问题。设置所有者后，当子屏幕打开而不是父名称时，我的表单的父（文本）名称现在显示在应用程序的顶部。当子屏幕打开时，如何解决此问题以仅显示孩子的文本表单名称？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T13:56:18.210

我尝试了几件事，例如尝试设置父文本属性的名称。

我可以让它工作的唯一方法是删除我设置子控件所有者的行，然后在 showDialog 之后，将父焦点设置为 true：

```
form.ShowDialog()
Me.Visible = True 
```

# c - 使用调试宏而不是简单函数有什么好处？

> ID：10744534
> 
> 赞同：3
> 
> 时间：2012-05-24T20:06:14.420
> 
> 标签：c, debugging

似乎对于`printf`- 风格的调试，人们总是使用预处理器宏。与此类似的解决方案有什么问题吗？

```
void debug(char *msg) {
#ifdef DEBUG
printf("%s", msg);
#endif
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-24T20:10:53.133

通常这样他们就可以做这样的事情：

```
#define DEBUG(MSG) printf("[%s:%i] %s\n", __FILE__, __LINE__, (MSG)) 
```

由于在日志中有调试消息的确切来源非常有用，因此这是一种非常常见的模式。但是如果你使用了一个函数，像这样：

```
void DEBUG(const char *MSG) {
    printf("[%s:%i] %s\n", __FILE__, __LINE__, (MSG));
} 
```

然后，您将只能看到与`printf()`in 调用对应的文件名和行号`DEBUG()`，而永远不会看到调用`DEBUG()`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-24T20:20:27.290

如果使用`DEBUG`宏，则更改单个#define 语句或编译选项并重新编译可以使所有调试代码从可执行文件中消失。相比之下，如果一个人使用一个`DEBUG()`函数，那么每次调用都会生成调用该函数的代码，而不管该函数本身是否做任何事情。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-24T20:08:03.327

`msg`1）如果是这样的话，你的代码会中断`%d`，因为 printf 需要一个格式字符串。 `printf("%s", msg);`更好。

2）不是真的。除非您进行微优化（例如代码大小），否则宏会被过度使用。函数更容易调试，因为您可以在调试器中执行类似的操作`stop in debug`。宏还有很多其他棘手的事情。请参阅[http://www.brainbell.com/tutors/c/Advice_and_Warnings_for_C/Macros_and_Miscellaneous_Pitfalls.html](http://www.brainbell.com/tutors/c/Advice_and_Warnings_for_C/Macros_and_Miscellaneous_Pitfalls.html)

3）正如@Jonathan Grynspan 指出的那样 - 宏形式更容易与**FILE**，**LINE**一起使用。在我看来，开发人员喜欢在打字时采取捷径，这会使他们的代码以后更难为他人维护，讽刺的是，以后更难调试自己。最佳实践 IMO：键入额外内容，使您的代码易于调试并易于在调试器中运行，并使用带有签名的函数`debug(const char* msg, const char* FILE_LOC, unsigned LINE_NUMBER)`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-24T21:36:43.130

除了使用`__FILE__`,`__LINE__`之外，您还应该比较以下内容：

```
#ifdef NDEBUG
    #define DEBUG_PRINT(...) ((void)0)
#else
    #define DEBUG_PRINT(...) printf(__VA_ARGS__)
#endif 
```

反对你的功能：

```
void debug(const char* msg) {
    #ifndef NDEBUG
        printf("%s", msg);
    #endif
} 
```

使用宏，我可以写：

```
DEBUG_PRINT("Expected %d, got %d\n", correct_value, result); 
```

使用该函数，我必须努力使用我的整数构造一个或多个字符串，并调用该函数一次或多次。在发布模式下，该函数什么都不做，因此该字符串未被使用。优化器*可能会*设法消除构建它的代码，或者可能不会。毫无疑问，有了宏。

也就是说，您可以编写`debug`函数来使用可变参数做正确的事情。但是你写的函数最终会遇到这个问题，你必须添加一个`debugf`.

# javascript - Javascript - 如何检查 3 个数字是否连续并返回起点？

> ID：10744537
> 
> 赞同：7
> 
> 时间：2012-05-24T20:06:24.540
> 
> 标签：javascript, arrays, sequences

如果我有一个数组`[1, 2, 3, 5, 10, 9, 8, 9, 10, 11, 7]`并且想要找到 3 个连续数字的每个案例（无论是升序还是降序），我该怎么做？

第二部分是用这些序列中的每一个的索引来提醒一个数组。

例如。前一个数组将返回`[0,4,6,7]`.

到目前为止，我有这个......这是一个艰难的开始

```
var arr = [1, 2, 3, 5, 10, 9, 8, 9, 10, 11, 7];
var results = [];

for (var i = 1; i < arr.length; i++) {
    if ((arr[i] - arr[i-1] != 1) && (arr[i] - arr[i+1] != 1)) {
        results.push(arr[i]);
    }

}
alert(results); 
```

谢谢您的帮助！

感谢 math.abs 指针。这就是我最终做的事情：

```
var array = [1, 2, 3, 5, 10, 9, 8, 9, 10, 11, 7];
var indexes = [];

for(var i=0; i < array.length; i++) {
    var diff = array[i+1] - array[i];
    if(Math.abs(diff)==1 && array[i+1]+diff == array[i+2]) {
        indexes.push(i);
    }
}
alert(indexes); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-24T20:36:57.567

知道这个任务的上下文也会很有趣......无论如何，这是我的解决方案：

```
var arr     = [1, 2, 3, 5, 10, 9, 8, 9, 10, 11, 7];
var results = [];
var limit   = arr.length - 1; 

var sequence = 0;
for (var i = 0; i < limit; ++i) {
  var diff = arr[i+1] - arr[i];
  if (sequence && sequence === diff) {
    results.push(i-1);
    continue;
  }
  sequence = (diff === 1 || diff === -1) // or ... Math.abs(diff) === 1
           ? diff
           : 0;
}
console.log(results); 
```

这个想法很简单：我们不需要两次比较两个邻居。) 如果此比较开始一个序列，则升高一种序列标志就足够了，如果没有序列则降低它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-24T20:24:34.957

这是对您的问题的一种非常直接的方法-我只检查了转发数字，但是添加反向几乎可以以相同的方式完成

```
var arr = [1, 2, 3, 4, 10, 9, 8, 9, 10, 11, 7];
var results = [];

for (var i = 0; i < arr.length; i++) {

    // if next element is one more, and one after is two more
    if (arr[i+1] == arr[i]+1 && arr[i+2] == arr[i]+2){

        // store the index of matches
        results.push(i);

        // loop through next numbers, to prevent repeating longer sequences
        while(arr[i]+1 == arr[i+1])
            i++;
    }

}
console.log(results); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-24T20:22:06.637

您需要仔细查看 if 语句中的表达式。

它目前说：

*   如果当前元素与前一个元素的差**不**为1，*并且*
*   如果当前元素和下一个元素的差**不是**1

那么这是一个结果。

所以，从表面上看，这是一个不正确的逻辑语句来确定当前元素是否在三个连续集合的中间。

此外，这也不考虑上升或下降的三个集合。

试着用语言弄清楚情况会是什么样子，然后从那里开始。

一些需要考虑的事情

*   我建议你从`i = 2`
*   研究`Math.abs`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-24T21:18:29.800

这是我认为更简单的方法。首先检查左右数的平均值是否等于中间，然后检查任一邻居的绝对值是否为1。

```
var arr = [1, 2, 3, 5, 10, 9, 8, 9, 10, 11, 7];
var indexes = [];

for(var i=1; i < arr.length; i++) {
    if((arr[i-1]+arr[i+1]) / 2 == arr[i] && Math.abs(arr[i]-arr[i-1]) == 1) {
        indexes.push(i-1);
    }
}
alert(indexes); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-24T20:23:09.490

```
var arr = [1, 2, 3, 5, 10, 9, 8, 9, 10, 11, 7];
var results = [];

for (var i = 0; i < arr.length - 2; i++) {
    if ((arr[i+1] - arr[i] === 1) && (arr[i+2] - arr[i+1] === 1)) {
        results.push({
            i:i,
            mode:'up',
            arr:[arr[i],arr[i+1],arr[i+2]
        });
    }
    if ((arr[i+1] - arr[i] === -1) && (arr[i+2] - arr[i+1] === -1)) {
        results.push({
            i:i,
            mode:'down',
            arr:[arr[i],arr[i+1],arr[i+2]
        });
    }

}
alert(results); 
```

# jsf - Primefaces数据表单元内编辑以使用ajax rowEdit事件处理更新同一数据表中的其他行

> ID：10744538
> 
> 赞同：2
> 
> 时间：2012-05-24T20:06:30.487
> 
> 标签：jsf, primefaces

`datatable`当使用`primeface`datatable in-cell edit ajax更新一行时，我无法更新同一行中的其他行`rowEdit`。
但未能使用 ajax 调用更新其他行。ajax 响应仅返回已更新的相同行数据。

代码如下：

```
<h:form id="testForm">
    <p:dataTable id="testDT" var="d" rowIndexVar="rowIndex"
        value="#{testBean.lists}" editable="true">
        <p:column>
            <f:facet name="header">No</f:facet>
            <h:outputText value="#{rowIndex}" />
        </p:column>
        <p:column headerText="Value">
            <p:cellEditor>
                <f:facet name="output">
                    <h:outputText value="#{d.value}" />
                </f:facet>
                <f:facet name="input">
                    <p:inputText value="#{d.value}" size="5" />
                </f:facet>
            </p:cellEditor>
        </p:column>
        <p:column headerText="Edit" style="width:50px">
            <p:outputPanel rendered="#{d.editable}">
                <p:rowEditor>
                </p:rowEditor>
            </p:outputPanel>
        </p:column>
        <p:ajax event="rowEdit" update=":testForm:testDT"
            listener="#{testBean.onRowUpdate}" />
    </p:dataTable>
    </h:form> 
```

我的测试豆：

```
package web.bean.test;

  import java.util.ArrayList;
  import java.util.List;

  import javax.annotation.PostConstruct;
  import javax.faces.bean.ManagedBean;
  import javax.faces.bean.ViewScoped;

  import org.primefaces.event.RowEditEvent;

  @ManagedBean(name="testBean")
  @ViewScoped
  public class TestBean {
private List<TestData> lists = new ArrayList<>();

@PostConstruct
    protected void init() {
    TestData d = new TestData("Row1Data", 1d, true);
        lists.add(d);
    d = new TestData("Row1Data", 11.11d, false);
    lists.add(d);
}

public void onRowUpdate(RowEditEvent event) {
    Object o = event.getObject();
    if (o != null) {
        TestData d = (TestData)o;
        TestData d1 = lists.get(1);
        d1.setValue(d1.getValue() + d.getValue());
    }
}

public List<TestData> getLists() {
    return lists;
}

public void setLists(List<TestData> lists) {
    this.lists = lists;
}
 }

 package web.bean.test;

 public class TestData {
private String name;
private double value;
private boolean editable;

public TestData(String name, double value, boolean editable) {
    super();
    this.name = name;
    this.value = value;
    this.editable = editable;
}
public TestData() {
}
public String getName() {
    return name;
}
public void setName(String name) {
    this.name = name;
}
public double getValue() {
    return value;
}
public void setValue(double value) {
    this.value = value;
}
public boolean isEditable() {
    return editable;
}
public void setEditable(boolean editable) {
    this.editable = editable;
}

 } 
```

ajax 响应正文：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><link type="text/css" rel="stylesheet" href="/Octopus-G/javax.faces.resource/theme.css.xhtml?ln=primefaces-bluesky" /><link type="text/css" rel="stylesheet" href="/Octopus-G/javax.faces.resource/primefaces.css.xhtml?ln=primefaces&amp;v=3.2" /><script type="text/javascript" src="/Octopus-G/javax.faces.resource/jquery/jquery.js.xhtml?ln=primefaces&amp;v=3.2"></script><script type="text/javascript" src="/Octopus-G/javax.faces.resource/primefaces.js.xhtml?ln=primefaces&amp;v=3.2"></script></head><body>
<form id="testForm" name="testForm" method="post" action="/Octopus-G/test.xhtml" enctype="application/x-www-form-urlencoded">
<input type="hidden" name="testForm" value="testForm" />
<div id="testForm:testDT" class="ui-datatable ui-widget"><table role="grid"><thead><tr role="row"><th id="testForm:testDT:j_idt5" class="ui-state-default" role="columnheader"><div class="ui-dt-c"><span>No</span></div></th><th id="testForm:testDT:j_idt8" class="ui-state-default" role="columnheader"><div class="ui-dt-c"><span>Value</span></div></th><th id="testForm:testDT:j_idt12" class="ui-state-default" role="columnheader" style="width:50px"><div class="ui-dt-c"><span>Edit</span></div></th></tr></thead><tfoot></tfoot><tbody id="testForm:testDT_data" class="ui-datatable-data ui-widget-content"><tr data-ri="0" class="ui-widget-content ui-datatable-even" role="row"><td role="gridcell"><div class="ui-dt-c">0</div></td><td role="gridcell" class="ui-editable-column"><div class="ui-dt-c"><span id="testForm:testDT:0:j_idt9" class="ui-cell-editor"><span class="ui-cell-editor-output">1.0</span><span class="ui-cell-editor-input"><input id="testForm:testDT:0:j_idt11" name="testForm:testDT:0:j_idt11" type="text" value="1.0" size="5" class="ui-inputfield ui-inputtext ui-widget ui-state-default ui-corner-all" /><script id="testForm:testDT:0:j_idt11_s" type="text/javascript">PrimeFaces.cw('InputText','widget_testForm_testDT_0_j_idt11',{id:'testForm:testDT:0:j_idt11'});</script></span></span></div></td><td role="gridcell" style="width:50px"><div class="ui-dt-c"><span id="testForm:testDT:0:j_idt13"><span id="testForm:testDT:0:j_idt14" class="ui-row-editor"><span class="ui-icon ui-icon-pencil"></span><span class="ui-icon ui-icon-check" style="display:none"></span><span class="ui-icon ui-icon-close" style="display:none"></span></span></span></div></td></tr><tr data-ri="1" class="ui-widget-content ui-datatable-odd" role="row"><td role="gridcell"><div class="ui-dt-c">1</div></td><td role="gridcell" class="ui-editable-column"><div class="ui-dt-c"><span id="testForm:testDT:1:j_idt9" class="ui-cell-editor"><span class="ui-cell-editor-output">11.11</span><span class="ui-cell-editor-input"><input id="testForm:testDT:1:j_idt11" name="testForm:testDT:1:j_idt11" type="text" value="11.11" size="5" class="ui-inputfield ui-inputtext ui-widget ui-state-default ui-corner-all" /><script id="testForm:testDT:1:j_idt11_s" type="text/javascript">PrimeFaces.cw('InputText','widget_testForm_testDT_1_j_idt11',{id:'testForm:testDT:1:j_idt11'});</script></span></span></div></td><td role="gridcell" style="width:50px"><div class="ui-dt-c"></div></td></tr></tbody></table></div><script id="testForm:testDT_s" type="text/javascript">$(function() {PrimeFaces.cw('DataTable','widget_testForm_testDT',{id:'testForm:testDT',editable:true,behaviors:{rowEdit:function(event) {PrimeFaces.ab({source:'testForm:testDT',process:'testForm:testDT',update:'testForm:testDT',event:'rowEdit'}, arguments[1]);}}});});</script><input type="hidden" name="javax.faces.ViewState" id="javax.faces.ViewState" value="-8223787210091934199:-360328890338571623" autocomplete="off" />
</form></body>
</html> 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-10-18T15:50:38.293

将 ajax 事件调度程序放在 rowEditor 旁边并使用 @all 引用。

```
<p:rowEditor>
  <p:ajaxStatus update="@all" listener="#{testBean.onRowUpdate}"/>
</p:rowEditor> 
```

# c# - 关于c#中的返回语法

> ID：10744539
> 
> 赞同：0
> 
> 时间：2012-05-24T20:06:37.820
> 
> 标签：c#

我想知道为什么我需要在下面的代码中两次输入返回语法，

```
public string test(){
 bool a = true;
 if(a){
   string result = "A is true";
 }else{
   string result = "A is not true";
 }

  return result;
} 
```

它会出错，说 The name 'result' does not exist in the current context。

但无论哪种方式，都有结果变量。唔..

所以我改变了这样的代码，

```
public string test(){
 bool a = true;
 if(a){
   string result = "A is true";
   return result;
 }else{
   string result = "A is not true";
   return result;
 }
} 
```

然后它工作。像这样使用正确吗？

请给我建议，

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-24T20:08:30.923

你只是错过了`result`代码块中的声明..我个人无论如何都会建议第二个代码块（更正后）但是在这里......

```
public string test(){
 bool a = true;
 string result = string.Empty;
 if(a){
   result = "A is true";
 }else{
   result = "A is not true";
 }

  return result;
} 
```

如果您打算使用第二个块，您可以将其简化为：

```
public string test(){
 bool a = true;
 if(a){
   return "A is true";
 }else{
   return "A is not true";
 }
} 
```

或进一步：

```
public string test(){
 bool a = true;

 return a ? "A is true" : "A is not true";
} 
```

以及类似代码的其他几个迭代（字符串格式等）。

# visual-c++ - 向量 - 缺少类型说明符

> ID：10744540
> 
> 赞同：3
> 
> 时间：2012-05-24T20:06:48.733
> 
> 标签：visual-c++, vector, c++-cli

这是我在 Visual C++ Express 2010 中处理的一个类的标题：

```
/* custom class header to communicate with LynxMotion robot arm */

#include <vector>
using namespace System;
using namespace System::IO::Ports;

public ref class LynxRobotArm
{
public:
    LynxRobotArm();
    ~LynxRobotArm();
    void connectToSerialPort(String^ portName, int baudRate);
    void disconnectFromSerialPort();
    void setCurrentPosition(int channel, int position);
    int getCurrentPosition(int channel);
    void moveToPosition(int channel, int position);

private:
    void initConnection();
    SerialPort^ serialPort;
    array<String^> ^serialPortNames;
    String^ portName;
    int baudRate;
    vector<int> currentPosition;
}; 
```

一切正常，直到我将最后一行更改`int currentPosition`为`vector<int> currentPosition`. 如果我现在尝试编译/调试，我会收到以下错误消息：

```
error C2143: syntax error : missing ';' before '<'
error C4430: missing type specifier - int assumed. Note: C++ does not support default-int
error C2238: unexpected token(s) preceding ';' 
```

我检查了 MSDN 以获取有关这些错误代码的更多信息，但我无法弄清楚代码有什么问题。有任何想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-24T20:12:39.893

`vector`是在命名空间中定义的模板`std`，因此您应该编写`std::vector<int>`而不是`vector<int>`.

`using namespace std;`或者，您可以在此文件的开头编写，但请注意，这被认为是**不好的做法**，因为它可能导致您的某些类的名称变得模棱两可。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-03T17:34:09.297

您正在使用矢量。Vector包含在命名空间std中。命名空间封装了变量/类的正常范围。如果不以某种方式解析范围，您将无法访问命名空间中的元素。有 3 种主要方法可以解决此问题：

```
#include <vector>
using namespace std; 
```

您通常不想使用这个，它会产生问题，因为它允许您查看命名空间 std 中包含的任何函数/类。这势必会引起命名冲突。

下一个方法是：

```
#include <vector>
using std::vector; 
```

这种方式稍微好一点。它使矢量对文件中的任何内容或包含所述文件的任何文件都可见。它在 .cpp 文件中可能是完全无害的，因为无论如何您都不应该包含 .cpp 文件。你应该知道你是什么符号。在 .h/.hpp 文件的场景中，您可能仍然不想使用它。任何包含您的 .hpp 文件的文件都将其源代码视为类向量作为名称定义。这可能对您的代码的用户不利，因为他们可能不希望定义该符号。对于 hpp 文件，您应该始终使用以下内容：

```
#include <vector>

class myClass{
private:
      std::vector myVector;
}; 
```

以这种方式使用命名空间可以保证它只在使用符号的确切位置可见，而在其他任何地方都不可见。这是我在 .hpp 文件中使用它的唯一方法。

# javascript - 禁用任何形式的浏览器窗口滚动？

> ID：10744542
> 
> 赞同：6
> 
> 时间：2012-05-24T20:07:13.610
> 
> 标签：javascript, html, css, gwt

有没有办法禁用滚动？不仅仅是滚动条​​，还有浏览器窗口的全部功能？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-05-29T09:40:11.140

根据您对 Keit 的回答，当您打开灯箱时，您不想滚动是否处于活动状态？如果是这种情况，您可以在使用以下 css 打开灯箱的同时向正文添加一个类

这个解决方案的好处是它保持滚动“空间”，所以网站不会跳转，更像是禁用它。希望这可以帮助

```
body.noscroll
{
    position: fixed; 
    overflow-y: scroll;
    width: 100%;
}

$('body').addClass('noscroll');
$('body').removeClass('noscroll'); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-05-24T20:09:18.420

CSS

```
body
{
overflow: hidden;
} 
```

javascript

```
document.body.style.overflow = "hidden"; 
```

jQuery

```
$("body").css('overflow', 'hidden'); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-29T09:34:41.673

如果您的 GWT 应用程序单独存在于您的网页中，您可以使用：

```
import com.google.gwt.user.client.Window;
// ...

Window.enableScrolling(false); 
```

例如在你的`onModuleLoad`函数中。

# php - Mysql截断表，自动增量不起作用

> ID：10744547
> 
> 赞同：2
> 
> 时间：2012-05-24T20:07:27.017
> 
> 标签：php, mysql

所以我只是截断了我的表，但现在我的主键不会自动递增。每次我向表中添加第二个项目时，它都会返回 1062: Duplicate entry '0' for key 'PRIMARY'

我认为当你截断一个表时，它只会将自动增量重置回 1。

我四处寻找我能做什么，但我遇到很多人说只是截断。

我做了什么

```
"TRUNCATE TABLE mytable;" 
```

我一定做错了什么。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-24T20:16:40.257

此错误不会影响 Mysql 5.0，并且在 6.0 和 5.1.23 和 5.1BK 上是可重复的。

[请参阅此链接以获取证据](http://bugs.mysql.com/bug.php?id=37531)

以下是现成的有效解决方法是在表被截断后更改 autoinc 值。

截断后立即重新初始化 autoinc 值

`alter table tablename AUTO_INCREMENT = n;`/* 根据需要设置 n */

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-24T07:13:59.840

从 MySQL 5.0.13 开始，AUTO_INCREMENT 计数器被 TRUNCATE TABLE 重置为零，无论是否存在外键约束。

您需要做的就是：

设置 FOREIGN_KEY_CHECKS=0；

截断您的表格并将其更改回

设置 FOREIGN_KEY_CHECKS=1;

一旦 TRUNCATE 被触发，表处理程序就不会记住上次使用的 AUTO_INCREMENT 值，而是从头开始计数。即使对于通常不重用序列值的 MyISAM 和 InnoDB 也是如此。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-05T11:05:11.523

使用此查询它将起作用。

ALTER TABLE `table_name`CHANGE `table_id` `table_id`INT(11) NOT NULL AUTO_INCREMENT

# wcf - 使用 TransportWithMessageCredential 时 CredentialCache.DefaultNetworkCredentials 为空

> ID：10744548
> 
> 赞同：4
> 
> 时间：2012-05-24T20:07:26.963
> 
> 标签：wcf, wcf-binding, wcf-security

我目前正在尝试在我的 wcf 项目中使用 TransportWithMessageCredentials 和 https。我设置了客户端和服务器安全模式="TransportWithMessageCredential" 和clientCredentialType="Windows"。

当我从 CredentialCache.DefaultNetworkCredentials 获取凭据时，用户名、密码和域都是空的。

有什么理由为什么这些会是空的？如果它们始终为空，我将在哪里获得要通过的凭据？

如何在不提示他们登录的情况下将登录的用户凭据传递给服务？

客户端绑定

```
<basicHttpBinding>
    <binding name="ClientHttpEndpoint" closeTimeout="00:01:00"
    openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:02:00"
    allowCookies="false" bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard"
    maxBufferSize="4194304" maxBufferPoolSize="524288" maxReceivedMessageSize="4194304"
    messageEncoding="Text" textEncoding="utf-8" transferMode="Buffered"
    useDefaultWebProxy="true">
        <security mode="TransportWithMessageCredential">
            <transport clientCredentialType="Windows" proxyCredentialType="None" realm="" />
            <message clientCredentialType="UserName" algorithmSuite="Default" />
        </security>
    </binding>
</basicHttpBinding> 
```

服务器绑定

```
<basicHttpBinding>
    <binding name="WindowsTransportCredentialBinding" maxBufferSize="524288"maxReceivedMessageSize="524288">
        <readerQuotas maxDepth="128" maxStringContentLength="1048576" />
        <security mode="TransportWithMessageCredential">
            <transport clientCredentialType="Windows" />
        </security>
    </binding>
</basicHttpBinding>

...

<service name="Test.DiagnosticService">
    <endpoint binding="basicHttpBinding" bindingConfiguration="WindowsTransportCredentialBinding" name="ClientDiagnosticEndpoint" contract="Test.IDiagnostic" />
</service> 
```

设置用户名和密码的代码

```
ChannelFactory<IDiagnostic> test = new ChannelFactory<IDiagnostic>(DIAGNOSTIC_ENDPOINT_NAME);
test.Credentials.UserName.UserName = "TestUser";
test.Credentials.UserName.Password = "User";
return test.CreateChannel(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-04T12:22:57.977

DefaultCredentials 返回的 ICredentials 实例不能用于查看当前安全上下文的用户名、密码或域。

[http://msdn.microsoft.com/en-us/library/system.net.credentialcache.defaultcredentials%28v=vs.90%29.aspx](http://msdn.microsoft.com/en-us/library/system.net.credentialcache.defaultcredentials%28v=vs.90%29.aspx)

# java - 为数组中的对象赋值

> ID：10744550
> 
> 赞同：0
> 
> 时间：2012-05-24T20:07:33.700
> 
> 标签：java, arrays, bufferedreader

```
 package macroreader;

    import java.io.BufferedReader;
    import java.io.FileReader;
    import java.io.IOException;

    public class MacroReader {

        public static Macro[] macroArray = new Macro[20];

        public static int macroID;

        public static BufferedReader br;

        public static void main(String[] args) throws IOException {
            br = new BufferedReader(new FileReader("Macros.txt"));
            String currentLine;
            while((currentLine = br.readLine()) != null) {
                if(currentLine.equalsIgnoreCase("#newmacro")) {
                    br.mark(1000);
                    createMacro();
                    br.reset();
                }
            }
            if (br != null) {
                br.close();
            }
        }

    public static void createMacro() throws IOException {
        String currentLine;
        macroID = getEmptyMacro();
        while((currentLine = br.readLine()) != null && !currentLine.equalsIgnoreCase("#newmacro")) {
            macroArray[macroID].readMacro(currentLine);
        }
        macroArray[macroID].inUse = true;
        macroArray[macroID].printData();
    }

    public static int getEmptyMacro() {
        for(int i = 0; i < macroArray.length; i++) {
            if(!macroArray[i].inUse) {
                return i;
            }
        }
        return 0;
    }

} 
```

而不是将从文件读取器读取的值分配给数组中的指定对象，在本例中为“macroID”，而是将值分配给数组中的所有对象

现在刚刚在整个文件中进行了编辑，但问题在于 createMacro() void

这是我的宏课

```
package macroreader;

public class Macro {

    public static String key;
    public static String[] commands = new String[20];
    public static boolean inUse;

    public static void readMacro(String input) {
        if (!input.equals("")) {
            if (input.startsWith("key = ")) {
                key = input.substring(6);
                System.out.println("Key Value for Macro set to " + key);
            } else {
                for (int i = 0; i < commands.length; i++) {
                    if (commands[i] == null) {
                        commands[i] = input;
                        System.out.println("Command [" + input + "] assigned");
                        break;
                    }
                }
            }
        }
    }

    public static void printData() {
        System.out.println("Macro Key: " + key);
        for(int i = 0; i < commands.length; i++) {
            if(commands[i] != null) {
                System.out.println(commands[i]);
            }
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T20:29:43.927

正如我所怀疑的 - 你`inUse`是静态的，所以对于类的所有实例来说它总是相同的。和你的其他班级成员一样。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-24T20:12:29.140

“更改数组中的所有内容”的典型原因是您实际上已将*相同的对象*分配给数组中的每个元素。我们无法判断您是否正在这样做，因为您没有向我们展示 的初始化`macroArray`，但它可能是这样的：

```
Macro m = new Macro();
for (int i = 0; i < macroArray.length; i++) {
  macroArray[i] = m;
} 
```

这将导致您描述的结果。要修复它，请为数组的每个元素创建一个单独的对象：

```
for (int i = 0; i < macroArray.length; i++) {
  macroArray[i] = new Macro();
} 
```

# javascript - 扩展现有的单例

> ID：10744552
> 
> 赞同：3
> 
> 时间：2012-05-24T20:07:34.933
> 
> 标签：javascript, jquery

我喜欢这里提到的使用 Singleton 的想法[http://www.adobe.com/devnet/html5/articles/javascript-design-patterns-pt1-singleton-composite-facade.html](http://www.adobe.com/devnet/html5/articles/javascript-design-patterns-pt1-singleton-composite-facade.html)：

```
 var Namespace = {
    Util: {
        util_method1: function() {…},
        util_method2: function() {…}
    },
    Ajax: {
        ajax_method: function() {…}
    },
    some_method: function() {…}
}; 
```

假设我稍后也必须添加一些方法和新命名空间（Namespace.Util2），如何在不修改上述代码的情况下添加方法

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-24T20:09:02.460

很简单：

```
Namespace.Util.newUtilMethod = function () { }; 
```

要添加新的命名空间，

```
Namespace.Util2 = { /* definitions */ }; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-24T20:12:31.233

```
namespace.util.newFunc = function () { }; 
```

或者，如果您正在使用 jquery 并想一次添加一堆：

```
var newStuff = {
    newThing1: function () {...},
    newThing2: function () {...},
    newThing3: function () {...}
};

$.extend(namespace.util, newStuff); 
```

# ios - Restkit 在第一次失败响应后失败

> ID：10744554
> 
> 赞同：0
> 
> 时间：2012-05-24T20:07:43.010
> 
> 标签：ios, restkit

使用 RestKit，如果我传入一个好的 URL，一切正常。如果我第一次传入一个错误的 URL，那么即使我有正确的 URL，所有后续调用都会失败。

我认为某些东西正在被缓存或带有 RestKit（例如 RKObjectManager）的东西正在被重用。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T22:54:49.343

知道了。共享的 RKClient 是由 objectManager 设置的，但再次调用并设置新的 objectManager 或使用现有的共享 RKClient 不会更新其 baseURL。

所以我手动执行此操作。

[[RKClient sharedClient] setBaseURL:url];

# android - 在android上显示隐藏的用户拍摄图片

> ID：10744556
> 
> 赞同：0
> 
> 时间：2012-05-24T20:07:50.567
> 
> 标签：android

我正在开发一种相机应用程序，我需要它将每张图片保存在我的 android 设备上的特定文件夹中：

图片 1 将进入 Project/1/Image.jpg

图片 2 将进入 Project/2/Image.jpg

等等……

这是保存图像的方法：

```
 private void SavePicture( byte[] imageData ) 
    {
        File path = new File( Environment.getExternalStoragePublicDirectory ( Environment.DIRECTORY_PICTURES ) + "/Project" );
        boolean success = true;
        if( !path.exists() ) 
        {
            success = path.mkdir();
        }

        if( success ) 
        {
            int iterator = 0;
            do 
            {
                ++iterator;
                path = new File( path + "/"+Integer.toString(iterator) );
            }while( path.exists() );
            success = path.mkdir();
        }

        if(!success) 
        {
            Log.d("ACTIVITY", "failed at creating directory!");
        }

        String filename = "Image.jpg";
        try 
        {
            Uri uriTarget = Uri.fromFile( new File( path, filename ) );
            OutputStream output = getContentResolver().openOutputStream( uriTarget );
            output.write( imageData );
            output.flush();
            output.close();
        }
        catch( FileNotFoundException e ) 
        {
            Log.d( "ACTIVITY", "Save image failed due to FileNotFoundException: " + e );
        }
        catch( IOException e ) 
        {
            Log.d( "ACTIVITY", "Save image failed due to IOException: " + e );
        }
    } 
```

在这段代码中，我从一个循环开始查找我所在的号码，所以如果我有文件夹 1、2、3、4，我将创建文件夹 5。

我的问题如下：当它通过该循环时 do{...}while(path.exists()); 找到我之前创建的每个文件夹。但是当我查看我的画廊时，我看不到任何图片或文件夹。我还从计算机的文件系统中查看了 android 设备，但找不到任何文件夹。

我的猜测是该文件夹是隐藏的（这只是一个假设......）

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T21:03:04.653

您应该已经设置了在清单中写入的权限：

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" /> 
```

# c++ - C++ 头文件 - 语法问题

> ID：10744558
> 
> 赞同：0
> 
> 时间：2012-05-24T20:07:53.640
> 
> 标签：c++, file, syntax, header

我的头文件中有一些错误，我不知道如何修复，因为我对 C++ 还很陌生。

下面是头文件的代码：

```
#pragma once

typedef unsigned int uint;

class DCEncryption
{
public:
    static char* manageData(char*, char*, uint);

private:
    static int max(int, int);
    static uint leftRotate(uint, int);
}; 
```

以下是错误：

```
 - dcencryption.h(12): error C2062: type 'int' unexpected
 - dcencryption.h(12): error C2334: unexpected token(s) preceding ':'; skipping apparent function body
 - dcencryption.h(12): error C2760: syntax error : expected '{' not ';'
 - dcencryption.h(13): error C2144: syntax error : 'uint' should be preceded by '}'
 - dcencryption.h(13): error C2143: syntax error : missing ')' before ';'
 - dcencryption.h(13): error C2059: syntax error : ')'
 - dcencryption.h(13): error C2143: syntax error : missing ';' before ')'
 - dcencryption.h(13): error C2238: unexpected token(s) preceding ';' 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-24T20:14:44.217

您可能在 Windows 上，并且在包含显示的文件之前，您已经从主文件中`windef.h`直接或间接（`windows.h`可能通过 ）包含。`.cpp`

碰巧的`max`是，在您的上下文中定义的宏`windef.h`不能很好地扩展。

这也很容易在其他一些平台上发生。

# xml - 如何快速打印 groovy.util.slurpersupport.Node？

> ID：10744562
> 
> 赞同：0
> 
> 时间：2012-05-24T20:08:09.100
> 
> 标签：xml, groovy, markupbuilder

有没有一种简单的方法可以将 a 转换`groovy.util.slurpersupport.Node`为 a `groovy.util.Node`？

我正在尝试在`XmlNodePrinter`来自 的节点上使用`XmlSlurper`，以进行一些快速调试。这是我的代码（可能不是最优雅的）：

```
def xml = new XmlSlurper().parse( new File( path + pomFile ) )
def services = xml.build.plugins.plugin.configuration.services
services.children().findAll{ it.artifactId.text() == serviceName }.each { config ->

    // begin section to dump "config" for debugging
    def stringWriter = new StringWriter()
    new XmlNodePrinter(new PrintWriter(stringWriter)).print(config[0])
    println stringWriter.toString()
    // end section to dump "config" for debugging

    // do some other processing on the config node
} 
```

这会引发以下内容`config[0]`：

```
org.codehaus.groovy.runtime.typehandling.GroovyCastException: Cannot cast object 'groovy.util.slurpersupport.Node@14712c3' with class 'groovy.util.slurpersupport.Node' to class 'groovy.util.Node' 
```

如何快速打印出 xml 表示`config`？

我仅限于 Groovy 1.7.0。

-

**编辑**：我也尝试了以下但收到错误：

```
services.children().findAll{ it.artifactId.text() == serviceName }.each { config ->
     println XmlUtil.serialize(config) 
```

这是打印的内容：

```
[Fatal Error] :1:1: Content is not allowed in prolog.
ERROR:  'Content is not allowed in prolog.'
<?xml version="1.0" encoding="UTF-8"?> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-25T21:27:11.637

对于一些快速调试，最简单的方法是使用 XmlUtil

```
import groovy.xml.*

def xml="""
<a><b>b</b><c/></a>
"""

def a=new XmlSlurper().parseText(xml)

println XmlUtil.serialize(a) 
```

# oracle - 带有批量插入保存异常的更具体的错误消息

> ID：10744569
> 
> 赞同：2
> 
> 时间：2012-05-24T20:08:40.817
> 
> 标签：oracle, exception-handling, bulkinsert, oracle11gr2

```
 declare
      e_forall_error exception;
      pragma exception_init(e_forall_error,-24381)
          ;
      type t_numbers is table of emp.empno%type;
      l_numbers t_numbers := t_numbers(null,2,3,4,5,6,7,8,9,10)
          ;
    begin
      forall i in 1..l_numbers.count save exceptions
  --note:empno is primary key     
      insert into emp
       ( empno      , ename
       )
       values
       ( l_numbers(i)
       , 'Name' || to_char(l_numbers(i))
       )
         ;
   exception
   when e_forall_error then
     for i in 1..sql%bulk_exceptions.count
     loop
       dbms_output.put_line('SQLCODE: ' || sql%bulk_exceptions(i).error_code);
       dbms_output.put_line('SQLERRM: ' || sqlerrm(-sql%bulk_exceptions(i).error_code));
       dbms_output.new_line;
     end loop;
   end;
   / 
```

大家好，我有一个现有程序，如上所示，将 empno 和 empname 的值插入到 emp 表中，但问题是该程序提到的错误是

```
SQLCODE: 1400
SQLERRM: ORA-01400: cannot insert NULL into () 
```

我想要一个更具体的错误，它通常会抛出什么

```
SQLERRM: ORA-01400: cannot insert NULL into empno column 
```

这怎么可能在批量插入中实现？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T20:26:34.037

```
CREATE OR REPLACE TABLE logs (logcode NUMBER, logmsg VARCHAR2(1024));
/

CREATE OR REPLACE PROCEDURE logme(I_logcode IN NUMBER, I_logmsg IN VARCHAR2) IS
    PRAGMA AUTONOMOUS_TRANSACTION;
BEGIN
    insert into logs (logcode, logmsg) values (I_logcode , I_logmsg);
    commit;
END;
/

CREATE OR REPLACE PROCEDURE insertmyrow(I_prm1 IN VARCHAR2, I_prm2 IN VARCHAR2, ...) IS
BEGIN
    insert into emp  (empno, ename, ...) values (I_prm1, I_prm2, ...);
EXCEPTION WHEN OTHERS THEN                
    logme(sqlcode, sqlerrm);
    RAISE;
END;
/

forall i in 1..l_numbers.count save exceptions
    insertmyrow(l_numbers(i), ...); 
```

这是主要思想，我想可能有点沉重，但为什么不呢？

# symfony - Symfony2，如何在树枝文件中转换数据类型？

> ID：10744574
> 
> 赞同：0
> 
> 时间：2012-05-24T20:08:59.020
> 
> 标签：symfony, twig

我有一些像下面这样的场景：

```
/**
 * @ORM\Entity
 * @ORM\Table(name="role")
 */
class Role
{
    /**
     * @ORM\OneToMany(targetEntity="RolesFeatures", mappedBy="role", cascade={"all"})
     **/
    private $rolesFeatures;
} 
```

在我的索引文件中，我想得到它们：

```
{{ role.rolesFeatures.getId() }} 
```

我明白了：

```
 An exception has been thrown during the rendering of a template ("Catchable Fatal
 Error: Object of class Doctrine\ORM\PersistentCollection could not be converted to string
 in C:\wamp\www\PMI_sf2\app\cache\dev\twig\63\81\679fca1c2da64d0ebbcd5661bc6d.php line 99")
 in PMIHomePagesBundle:HomePages:mainHome.html.twig at line 49. 
```

如何将 Doctrine\ORM\PersistentCollection 转换为真实对象类？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-24T20:13:25.143

rolesFeatures 是一个数组，因此您需要对其进行迭代。就像是：

```
{% for roleFeature in role.rolesFeatures %}
    {{ roleFeature.id }}
{% endfor %} 
```

# backbone.js - Backbone.js DELETE 请求未触发

> ID：10744579
> 
> 赞同：12
> 
> 时间：2012-05-24T20:09:28.913
> 
> 标签：backbone.js, sync

我正在尝试触发backbone.js DELETE 请求，但在我的控制台中看不到任何请求。

我有这样的集合模型：

```
var Model = Backbone.Model.extend(
{
    urlRoot: '/test',
    defaults:{}
});

var TableList = Backbone.Collection.extend(
{
    url: '/test',
    model: Model
}); 
```

在我看来，我正在运行这个：

```
this.model.destroy(); 
```

一切似乎都运行良好，我可以看到来自调用破坏的删除函数的输出，所以我知道它正在到达那里，而且它还成功运行了我拥有的取消渲染方法。但是看不到对服务器的任何请求？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-25T03:23:34.053

如果我没记错的话，您的模型上必须有一个 id 属性，以确保它访问正确的 url。IE 如果你的模型是...

```
var Model = Backbone.Model.extend({
    url: '/some/url'
});

var model = new Model({
    id: 1 
});
model.destroy(); // I THINK it will now try and DELETE to /some/url/1 
```

没有 id 它不知道如何正确构建 url，通常你会获取模型，或者创建一个新模型并保存它，然后你就会有一个 Url...

看看有没有帮助！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-25T17:09:20.777

我发现了我的问题，但还没有解决方案。我不确定这是否是主干的错误，但我正在使用`ajaxSetup`and `ajaxPrefilter`。我试着把它评论出来，它奏效了。我将其缩小到 ajaxSetup 方法和具体使用`data`参数来预设一些值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-24T21:50:02.000

您是否尝试过使用成功和错误回调？

```
this.model.destroy({
    success : _.bind(function(model, response) {
                  ...some code
              }, this),
    error : _.bind(function(model, response) {
                  ...some code
              }, this);
}); 
```

如果您没有看到 DELETE 请求，可能会有指导意义。

# java - 指挥整合

> ID：10744582
> 
> 赞同：0
> 
> 时间：2012-05-24T20:09:36.383
> 
> 标签：java, shell, scripting

我不知道用什么来标记它，但我需要帮助将两个命令组合成一个命令。我已经用 ant 尝试过这个，但它没有按要求执行（长话短说）。基本上我需要

```
javac *.java
java org.junit.runner.JUnitCore filename 
```

合并为一个命令。最好是类似的东西

```
ant 
```

使用外部 build.xml 文件，但是在摆弄 Ant 几个小时后，我已经让它工作但不是按要求工作（我需要在运行时连续输出到标准输出）。我对 shell 脚本、聪明的 java 技巧以及任何东西都很好。在这一点上，我会尽我所能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T20:37:50.840

编写一个 shell 脚本真的是一件小事：只需将这两行复制粘贴到一个文件中（比如说你称之为`myscript.sh`），你就完成了。然后你可以用`sh myscript.sh`. 为方便起见，添加第一行`#!/bin/sh`（所谓的“hash-bang”咒语），发出 a `chmod u+x myscript.sh`，然后您可以像任何其他命令一样运行它：`./myscript.sh`.

顺便说一句，这变成了一个与 Java 无关的问题，您可以使用与 shell 脚本相关的标记重新标记它。

# android - 无法在单声道 android 中加载 html 资源

> ID：10744587
> 
> 赞同：0
> 
> 时间：2012-05-24T20:09:52.210
> 
> 标签：android, visual-studio-2010, xamarin.android

当我在visual studio 2010（mono android）中访问Assets文件夹中的html文件时出现错误

```
invalid resource directory name : assets 
```

在单声道安卓中

我已经尝试过这些代码组合但无济于事

```
 //webView.LoadUrl("file:///android_asset/mapapp/index.html");
        //webView.LoadUrl("file:///AndroidAsset/mapapp/index.html");
        //webView.LoadUrl("file:///android_asset/mapapp/index.html");
        //webView.LoadDataWithBaseURL("file:///android_asset/mapapp", "index.html", "text/html", "UTF-8", null);
        webView.LoadUrl("file:///AndroidAsset/TextFile1.html"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T07:12:27.190

我有几个图标和图像被 mono android 视为 AndroidResource，将它们更改为 AndroidAsset 消除了错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T04:02:31.413

检查这个，

```
import android.app.Activity;
import android.os.Bundle;
import android.os.Handler;
import android.webkit.WebView;

public class StackOverFlowActivity extends Activity {

    private Handler mHandler = new Handler();

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        WebView view=(WebView)findViewById(R.id.webView1);
        view.getSettings().setJavaScriptEnabled(true);
        view.loadUrl("file:///android_asset/index.html");
        view.addJavascriptInterface(new MyJavaScriptInterface(), "Android");
    }

    final class MyJavaScriptInterface
    {
        public void ProcessJavaScript(final String scriptname, final String args)
            {             
                mHandler.post(new Runnable()
                    {
                        public void run()
                            {
                                //do anything here...
                            }
                    });
            }
    }
} 
```

如果您的 html 文件位于 assets 文件夹中，请尝试上述操作。

![在此处输入图像描述](../Images/a076b47ab226ad77e0fc18aa12902a97.png)

如果它放在任何文件夹中，请给出类似

```
view.loadUrl("file:///android_asset/image/index.html"); 
```

![在此处输入图像描述](../Images/eb429cfd7c52208486f3c0ff4d54c292.png)

# php - 如何按匹配的关键字数量的顺序显示结果？

> ID：10744588
> 
> 赞同：3
> 
> 时间：2012-05-24T20:09:56.130
> 
> 标签：php, mysql, sql, database

感谢 youtube 上的精彩视频，如果您愿意，可以[在这里](http://www.youtube.com/watch?v=PdM2ZIG9yR0)访问，我能够创建一个 php 搜索引擎。下面是代码：

```
<?php

//connected to DB

      foreach (array('questioncontent') as $varname) {
        $questioncontent = (isset($_GET[$varname])) ? $_GET[$varname] : '';
      }

?>

<form action="previousquestions.php" method="get">
      <p>Search: <input type="text" name="questioncontent" value="<?php echo $questioncontent; ?>" /></p>
      <p><input id="searchquestion" name="searchQuestion" type="submit" value="Search" /></p>
      </form>

<?php 

if (isset($_GET['searchQuestion'])) {

$searchquestion = $questioncontent;
$terms = explode(" ", $searchquestion);

              $questionquery = "SELECT * FROM Question WHERE ";

              foreach ($terms as $each){
               $i++;   

               if ($i == 1){
               $questionquery .= "QuestionContent LIKE '%$each%' ";
          } else{
               $questionquery .= "OR QuestionContent LIKE '%$each%' ";

              }

          }

      $questionnum = mysql_num_rows($questionresult = mysql_query($questionquery));

        else if($questionnum !=0){

      $output = "";
$output .= "
    <table border='1'>
      <tr>
      <th>Question</th>
      </tr>
";
        while ($questionrow = mysql_fetch_array($questionresult)) {
$output .= "
      <tr>
      <td>{$questionrow['QuestionContent']}</td>
      </tr>";
        }
        $output .= "        </table>";

        echo $output;

  }

}

  mysql_close();

?> 
```

现在我有一个问题，如果可能的话，如何对搜索结果进行排序。假设在数据库中我有这 3 个语句：

```
My name
My name is Mayur Patel
My name is Patel 
```

现在假设我在搜索框中输入“姓名 Mayur Patel”，我希望对结果进行排序，以便它首先显示包含所有这些关键词的任何行，然后在显示所有这些行之后再显示这些行其中包含这些关键字的部分数量（一个一个地敲掉一个关键字），因此搜索结果将按以下顺序显示：

```
My name is Mayur Patel (all keywords match in this phrase)
My name is Patel (2 keywords match this phrase which are 'name' and 'Patel')
My name (1 keyword match this phrase which is 'name') 
```

我想知道是否可以根据数据库中短语中匹配的关键字数量对搜索结果进行排序？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-24T20:14:11.810

目前，您的内置代码查询在完成后看起来像这样：

```
SELECT * FROM Question WHERE
QuestionContent LIKE '%name%'
OR QuestionContent LIKE '%Mayur%'
OR QuestionContent LIKE '%Patel%' 
```

要获得您正在寻找的结果，您可以添加如下排序子句，该子句将以类似的方式从关键字列表中生成：

```
ORDER BY
IF(QuestionContent LIKE '%name%',1,0)+
IF(QuestionContent LIKE '%Mayur%',1,0)+
IF(QuestionContent LIKE '%Patel%',1,0) DESC 
```

基本上，它通过说是否匹配来计算有多少关键字匹配，为关键字计数贡献一个，否则贡献 0。所以最后，这将产生 3、2、1 作为计数，并按降序排序`DESC`因此，匹配关键字最多的条目首先出现。

演示：[http ://www.sqlfiddle.com/#!2/eaabc/2](http://www.sqlfiddle.com/#!2/eaabc/2)

* * *

**编辑：**正如所承诺的，这是一种在 PHP 代码中实现的方法：

```
$questionquery = "SELECT * FROM Question WHERE ";
foreach ($terms as $each) {
    $i++;   

    if ($i == 1){
        $questionquery .= "QuestionContent LIKE '%$each%' ";
    } else {
        $questionquery .= "OR QuestionContent LIKE '%$each%' ";
    }
}

$questionquery .= " ORDER BY ";
$i = 0;
foreach ($terms as $each) {
    $i++;

    if ($i != 1)
        $questionquery .= "+";
    $questionquery .= "IF(QuestionContent LIKE '%$each%',1,0)";
}
$questionquery .= " DESC"; 
```

# javascript - Node js + Mongo 数据库设计

> ID：10744592
> 
> 赞同：1
> 
> 时间：2012-05-24T20:10:12.507
> 
> 标签：javascript, node.js, mongodb

我正在开发一个 node.js + mongoose webapp，我对数据库的创建有一个疑问。数据库是这样定义的：

```
var user = new Schema({
 id : ObjectId,
 name : String,
 password : String,
 email : String,
 created : Date
});
var comment = new Schema({
 id : ObjectId,
 userId: ObjectId,
 content : String,
 created : Date
}) 
```

我想将每条评论与其用户联系起来......那么......这是最好的方法？我想将这两个中的一个添加到评论架构中......但我不知道它是否是正确的答案，或者是否还有另一个更好的答案：

```
userId: ObjectId, 
```

或者：

```
userObject: user 
```

谢谢！

希望你能帮我！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T20:52:06.333

这得看情况。你的问题没有明确的答案。通常，我建议您不要使用本机 MongoDB 字段引用，这会带来轻微的大小开销。

对于我所有的项目，我肯定会选择第一个解决方案，它通常更灵活，并且可以节省一些磁盘空间。以不得不自己再做一个请求为代价。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T03:35:42.877

这种情况下的简单数据结构是使用 mongoose 所称的[嵌入文档](http://mongoosejs.com/docs/embedded-documents.html)。

正如 Brandon Tilley 提到的，您可能还想看看类似 DBRef 的行为并[填充](http://mongoosejs.com/docs/populate.html)mongoose 的功能。这将允许您将您的评论实体作为一个单独的、独立的实体来处理。不利的一面是，如果您有评论的实例并想要访问用户的属性，则必须先填充对用户的引用。

最后，这取决于您的用例以及您希望如何浏览信息。我说不要想太多，试试看。如果您稍后决定另一种结构效果最好，只需更改它。幸运的是，对于 MongoDB 和 NoSQL，这通常非常简单。

# c# - MVP 模式属性设置或获取

> ID：10744594
> 
> 赞同：0
> 
> 时间：2012-05-24T20:10:22.740
> 
> 标签：c#, asp.net, mvp

我正在 asp.net 中实现 MVP 模式，并且对网络上的许多示例感到困惑。

我看到 IEnumerable 实现为 get；和一些设定的时间；同样在其他情况下，我看到一个方法 void SetCategories(IEnumerable categories);

我的问题是关于 view (ex:IView) 的合同，它显示了 Categories IEnumerable 类别的列表

1）我应该什么时候实施`void SetCategories(IEnumerable<Category> categories);`

* * *

2）我应该什么时候实施`IEnumerable<Category> Categories { get; set; }`

* * *

3）我应该什么时候实施`IEnumerable<Category> Categories { set; }`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T00:12:56.007

1 和 3 非常相似，它们提供对类别的只写访问。如果您的演示者**不需要**阅读 Categories 集合，那么您应该使用 1 或 3。

哪一个？此[代码分析规则](http://msdn.microsoft.com/en-us/library/ms182327)可能适用于此。

> 如果替换集合是一个目标，那么首选的设计模式是包含一个从集合中删除所有元素的方法和一个重新填充集合的方法。

但是，在 MVP 中，使用属性而不是方法更为常见（这可能就是您看到所有三种场景示例的原因。）所以这确实是一个首选风格的问题。

选项 2 提供上述所有内容以及对该属性的读取访问权限。如果演示者必须查看集合并从中读取一个值（或所有值），您需要这个。我认为这里的首选模式是使整个集合处于只读状态或选定类别的属性，即。一个`Category`.

*   如果您需要读写权限，选项 2 将起作用，但它会冒犯 fxCop。

*   如果您只需要写权限，选项 1 将请 fxCop

# api - LinkedIn API - 我不明白他们希望如何格式化网址

> ID：10744595
> 
> 赞同：3
> 
> 时间：2012-05-24T20:10:23.077
> 
> 标签：api, rest, linkedin

我正在查看 LinkedIn API 的文档页面：https://developer.linkedin.com/documents/profile-api

他们有一个例子：[https ://developer.linkedin.com/documents/profile-api](https://developer.linkedin.com/documents/profile-api)

我正在尝试向他们发送这样的网址：

```
/people/id=297823:(connections) 
```

因为他们似乎建议在“选择返回的详细信息量”部分下，但它给出了这个错误：

```
LinkedIn::Errors::NotFoundError: (404): Not Found 
```

知道我在 URL 上做错了什么吗？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-24T20:29:45.267

它返回 NOT FOUND 因为`297823`不是有效的配置文件 ID。尝试使用有效的身份证件，

例如

`nbqwYraDfd`是我的linkedin个人资料的链接ID，所以下面的代码对我有用。

```
https://api.linkedin.com/v1/people/id=nbqwYraDfd:(connections) 
```

*ps 请注意，您需要进行身份验证才能完成这项工作。*

**编辑：（**评论后）

要知道您的 id，请执行此操作，

```
https://api.linkedin.com/v1/people/~:(id) 
```

用[它](https://developer.linkedin.com/rest-console/)来玩linkedin api，

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-24T20:12:50.077

您从 url 的开头缺少 v1：

```
http://api.linkedin.com/v1/people/id=abcdefg 
```

这假设您正在尝试获取特定成员的公开个人资料。

> **选择公共或标准配置文件**
> 
> 检索标准配置文件和公共配置文件的 URL 相同。要返回公共配置文件，只需将 :public 添加到配置文件的末尾。没有它，调用将返回标准配置文件。

```
http://api.linkedin.com/v1/people/url={public-profile-url}:public 
```

您需要进行身份验证才能获得*标准*配置文件，即*不带*:public 的 url。使用 :public，您无需进行身份验证。

另外，不要忘记转义个人资料 URL！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-30T16:48:29.353

API 的用户 ID 是一个加密字符串，对您的应用程序来说是唯一的。LinkedIn API 不打算与来自网站的信息一起使用（因为它鼓励数据抓取）。您需要使用 API 进行搜索（或通过其他方式查找成员，例如当前用户的连接），然后使用从该请求返回的 ID 用于后续的配置文件请求。

要记住的事情：

*   成员的 ID 是您的应用程序密钥唯一的字符串
*   通过网站检索到的会员 ID 无效
*   通过其他应用程序检索到的成员 ID 将不起作用

# android - 活动始终活跃

> ID：10744597
> 
> 赞同：0
> 
> 时间：2012-05-24T20:10:34.607
> 
> 标签：android, android-activity

我正在用谷歌地图制作一个安卓应用程序。当您在地图中的路线之外定位时，此应用程序必须提醒您。但是，当手机处于待机状态时，应用程序正在休眠。如何在路线期间创建活动处于活动状态的应用程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T20:19:17.700

您应该使用在后台运行的服务。 [http://developer.android.com/reference/android/app/Service.html](http://developer.android.com/reference/android/app/Service.html)

# unit-testing - Grails 测试中的模拟配置

> ID：10744599
> 
> 赞同：6
> 
> 时间：2012-05-24T20:10:46.413
> 
> 标签：unit-testing, grails, groovy, mocking

在 Grails 2.0.X 之前，可以使用`mockConfig`由测试扩展的基类提供的方法来模拟配置。但是，在 Grails 2.0.X 中，建议测试类使用`@TestFor`mixin 而不是扩展基类。

这个 mixin 似乎没有提供任何与`mockConfig`方法等效的东西，所以我不知道如何在`Config.groovy`.

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-12-30T10:19:27.010

您可以访问 grailsApplication.config，因此您可以根据需要修改这些值，因此您可以这样做

```
grailsApplication.config.some.config.setting = 'foo' 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-15T03:16:12.170

我正在这样做（在我测试服务的情况下）：

```
service.grailsApplication.config.mysetting = 'my value'
def result = service.myMethod()
// check results 
```

不需要其他嘲笑。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-03T09:47:29.587

似乎`config`在新的 Grails 2.x 测试中已经有一个对象在范围内。所以说就够了

```
config.some.config.setting = 'foo' 
```

然后可以从`@TestFor`被测对象访问。

如果您需要手动创建对象，那么测试范围内还有一个`grailsApplication`对象 - 该`config`对象属于该对象。所以这应该工作 -

```
config.some.config.setting = 'foo'
def myService = new MyService(grailsApplication:grailsApplication) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-25T14:15:17.983

看起来 mockConfig() 在 Grails 2.x 中不再存在。这个怎么样：

```
 def mockConfig = new ConfigObject()
    mockConfig.some.config.setting = "foo"

    def myService = new MyService()
    myService.grailsApplication = [config: mockConfig] 
```

# python - 使用 CherryPy 加载静态内容

> ID：10744606
> 
> 赞同：3
> 
> 时间：2012-05-24T20:11:16.320
> 
> 标签：python, cherrypy

我现在尝试了很多东西，我用谷歌搜索了几个小时，但我无法解决我的问题。

配置文件：

```
[/] 
tools.staticdir.root = "/Users/phil/Dropbox/Projects/AppName" 

[/main.css] 
tools.staticfile.on = True 
tools.staticfile.filename = "/Users/phil/Dropbox/Projects/AppName/css/main.css" 

[/images] 
tools.staticdir.on = True 
tools.staticdir.dir = "images" 
```

CherryPy 代码：

```
import cherrypy, os
class AppName(object):
def index(self):
    return "<img src='images/logo.jpeg'>"
index.exposed = True

cherrypy.config.update('/Users/phil/Dropbox/Projects/AppName/conf/AppName.config')
cherrypy.quickstart(AppName()) 
```

我的问题是它不起作用，我尝试了所有组合路径等方法，但是当我执行诸如 return '" 之类的操作时，图像和 css 不会加载

这是我在加载我的应用程序时遇到的错误：

```
127.0.0.1 - - [24/May/2012:22:28:47] "GET /images/logo.jpeg HTTP/1.1" 404 1268 "http://localhost:8080/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_7_4) AppleWebKit/536.5 (KHTML, like Gecko) Chrome/19.0.1084.46 Safari/536.5" 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-29T08:58:26.223

不确定问题是什么，但这有效：

```
[/]
tools.staticdir.root = "/Users/phil/Dropbox/Projects/AppName"

[/images]
tools.staticdir.on = True
tools.staticdir.dir = "images" 
```

启动应用程序：

```
cherrypy.quickstart(AppName(), '/', 'AppName.config') 
```

CherryPy 代码：

```
def index(self):
    return "<img src='/images/logo.jpeg'>"
index.exposed = True 
```

我认为图像之前的 / 也很重要。谢谢大家

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-24T20:56:22.673

查看 Cherrypy 手册的[Serving Static Content](http://docs.cherrypy.org/stable/progguide/files/static.html#forming-urls)部分，看看是否可以帮助您。

或者，这就是我以前用来传递静态内容的东西——. 文件中的字典`main()`。

```
conf = {
        '/':
        {'tools.staticdir.root': os.path.dirname(os.path.abspath(__file__))},
          '/css': {
          'tools.staticfile.on': True,
          'tools.staticfile.filename': os.path.join(os.path.dirname(os.path.abspath(__file__)), 'css/')
        }
      }
cherrypy.quickstart(AppName(), config=conf) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-25T15:07:13.467

将此添加到您的配置文件中：

```
[/]
tools.staticdir.debug: True
log.screen: True 
```

您应该能够立即缩小问题范围。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-03-28T15:46:31.627

我花了一段时间让它在 Windows 上运行，所以我希望分享（当前）工作的内容会有所帮助。我`cherrypy.quickstart(website(), '/', "server.conf")`用来启动服务器。

我确实发现我必须`js`手动指定子文件夹。

```
## Server Configuration
[global]
server.socket_port = 3030
#engine.autoreload.on = False  #Might as well turn off when working on HTML
log.error_file = "H:\\My Documents BACKED UP\GitProjects\website\logfile"

[/]
tools.staticdir.debug = True
log.screen = True
tools.sessions.on = True

[/js]
tools.staticdir.on = True
tools.staticdir.dir = "H:\\My Documents BACKED UP\GitProjects\website\js"

[/js/vendor]
tools.staticdir.on = True
tools.staticdir.dir = "H:\\My Documents BACKED UP\GitProjects\website\js\\vendor"

[/img]
tools.staticdir.on = True
tools.staticdir.dir = "H:\\My Documents BACKED UP\GitProjects\website\img"

[/css]
tools.staticdir.on = True
tools.staticdir.dir = "H:\\My Documents BACKED UP\GitProjects\website\css" 
```

# android - 将图表添加到视图并呈现它

> ID：10744608
> 
> 赞同：0
> 
> 时间：2012-05-24T20:11:31.453
> 
> 标签：android, achartengine

如果我将图表设置为内容视图一切正常：

```
GraphicalView mChartView = ChartFactory.getLineChartView(context,dataset,renderer);
setContentView(mChartView); 
```

但是，如果我将其添加`GraphicalView`到视图中，则不会呈现图表：

```
GraphicalView mChartView = ChartFactory.getLineChartView(context,dataset,renderer);
ScrollView sView = (ScrollView)findViewById(R.id.sview);
sView.add(mChartView); 
```

有没有办法让图表呈现，即使它不是内容视图？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T13:47:59.253

也许你需要在你的中创建一个布局并像这样`ScrollView`添加它`mChartView`

```
 layout.addView(mChartView, new LayoutParams(LayoutParams.FILL_PARENT,
      LayoutParams.FILL_PARENT)); 
```

它对我来说很好，所以......

# android - 如何在从 appwidgetprovider 的 Pending Intent 调用的活动中检测 appWidgetId

> ID：10744610
> 
> 赞同：0
> 
> 时间：2012-05-24T20:11:40.407
> 
> 标签：android, android-widget, android-pendingintent

我有 appwidgetprovider 类如下，它调用一个活动来打开

```
for (int widgetId : allWidgetIds) {

        remoteViewParent = new RemoteViews(context.getPackageName(),R.layout.widget_initial_layout);

        try{
            Intent clickIntent = new Intent(context,Activity.class);//same class name is passed to give the call to itself
            clickIntent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);

                            //PASSING ID HERE
            clickIntent.putExtra("checkintent", ""+widgetId);

            PendingIntent pendingIntent = PendingIntent.getActivity(context, 0, clickIntent,PendingIntent.FLAG_UPDATE_CURRENT);
            remoteViewParent.setOnClickPendingIntent(R.id.widget_img_logo, pendingIntent);

            appWidgetManager.updateAppWidget(widgetId, remoteViewParent);

        }catch (Exception e) {
        }

    } 
```

我希望活动在我的活动类中接收widgetId，所以我通过它传递它`putExtra()` 在此之后我一个一个添加`3`小部件，当我单击主屏幕上的任何小部件时，我只得到最后添加的小部件的ID（通过我的意图）

有没有办法区分对添加的特定小部件的点击，任何解决方法？

很久以来就陷入了这个困境。

我想要这个用于android`2.2`及更高版本。欢迎任何建议

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T01:40:18.913

比较 PedingIntent 时不考虑 Extras，因此即使您更改了 extras，您也会得到相同的意图。`FLAG_UPDATE_CURRENT`表示当前的 PendingIntent 得到更新，因此您只获得最后一个 ID。如果要可靠地传递 ID，则必须将其放入 Intent 的数据中，然后您将能够为不同的 ID 获得不同的 PendingIntent。像这样的东西：

```
Uri data = Uri.withAppendedPath (Uri.parse("mywidget://mywidget/widgetId/#"),
                String.valueOf(widgetId));
intent.setData(data); 
```

然后从 Intent 的数据中提取 ID 以区分小部件。

# ruby-on-rails - 序列化与关联

> ID：10744611
> 
> 赞同：1
> 
> 时间：2012-05-24T20:11:45.697
> 
> 标签：ruby-on-rails

序列化是以下设置的适当解决方案吗？

我有一个客户模型，并希望跟踪每个客户的一组日期。

```
class Client < ActiveRecord::Base
  attr_accessible :name, :contact_dates, :recertification_dates
  serialize :contact_dates
  serialize :recertification_dates
end 
```

使用在每条记录中只包含一个日期的子模型似乎有点矫枉过正，所以这似乎是合适的。

但是，我担心的是将来我想报告这些数据时对性能的影响。反序列化是否会使运行报告永远耗时？我预计不会有超过几千个客户和大约。每个序列化字段 20 个日期。

谢谢！

# html - 增加悬停大小属性

> ID：10744617
> 
> 赞同：0
> 
> 时间：2012-05-24T20:12:03.887
> 
> 标签：html, css

我一直在为我的雇主建立这个网站，除了 IE，这个问题不会在任何浏览器中发生。将鼠标悬停在“服务”按钮上时，右侧会出现两个按钮。将鼠标悬停在两个选项上时，按钮会在按钮的 5px 内消失。我想避免将两个按钮与导航栏齐平，因为它看起来很奇怪。关于如何增加悬停大小的任何想法？

HTML：

```
<div id="menu">
<ul>
    <li>
        <a href="index.htm">
            <img src="comps/PillarHP/ButtonLinks/Home.jpg" border="0" />
        </a>
    </li>
    <br />
    <br />
    <br />
    <li>
        <a href="TTUgalleries.html">
            <img src="comps/PillarHP/ButtonLinks/TTUgalbutton.jpg" border="0" />
        </a>
    </li>
    <br />
    <br />
    <br />
    <li>
        <a href="STATEgalleries.html">
            <img src="comps/PillarHP/ButtonLinks/Landgalbutton.jpg" border="0" />
        </a>
    </li>
    <br />
    <br />
    <br />
    <li>
        <a nohref="">
            <img src="comps/PillarHP/ButtonLinks/Services.jpg" border="0" hspace="50" />
        </a>
                <ul class="sub-menu">
                    <li>
                        <a href="classes.html" id="demargpadLink"><img src="comps/PillarHP/ButtonLinks/classes.jpg" border="0" /></a>
                    </li>
                    <li>
                        <a href="mats.html"><img src="comps/PillarHP/ButtonLinks/Mats.jpg" border="0" /></a>
                    </li>
                    </ul>
    </li>
    <br />
    <br />
    <br />
    <li>
        <a href="newsletter.html">
            <img src="comps/PillarHP/ButtonLinks/Newsletter.jpg" border="0" />
        </a>
                <ul class="sub-menu">
                    <li></li>   
                </ul>
    </li>
    <br />
    <br />
    <br />
    <li>
        <a href="artiststatement.html">
            <img src="comps/PillarHP/ButtonLinks/ArtStatement.jpg" border="0" />
        </a>
    </li>
    <br />
    <br />
    <br />
    <li>
        <a href="contact.html">
            <img src="comps/PillarHP/ButtonLinks/Contact Us.jpg" border="0" />
        </a>
</li>
</ul> 
```

CSS：

```
 #menu {
    position: absolute;
    margin-left: 179px;
    margin-top: 200px;
    z-index:15;
    padding-bottom: 0px;

}
a {
    text-decoration: none;
    color: #838383;

}
a:hover {
    color: black;

}
#menu a {
    display: block;
    width: 140px;

}
#menu ul {
    list-style-type: none;
    padding-top: 10px;

}
#menu li {
    float: left;
    position: relative;
    margin-left: 1px;
    margin-right: 1px;
    text-align: center;

}
#menu ul.sub-menu {
    display: none;
    position: absolute;
    top: -14px;
    left: 139px;
    padding: 10px;
    z-index: 90;

}
#menu ul.sub-menu li {
    text-align: left;

}
#menu li:hover ul.sub-menu {
    display: block;

}
#menu li:hover ul.sub-menu a {
    margin-top: 4px;
    margin-bottom: 0;
    padding: 0;

} 
```

包含 div CSS：

```
#menu {
    position: absolute;
    margin-left: 179px;
    margin-top: 200px;
    z-index:15;
    padding-bottom: 0px;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T21:26:55.340

[http://jsfiddle.net/Vqw75/1/](http://jsfiddle.net/Vqw75/1/) - 可能会为您提供一些进一步的改进:)

首先废弃 br 标签，然后在 css 中将 'li's' 设置为 'display:block'，这将为您提供所需的结果。

您的 img 标签不需要边框属性，因为这可以在 css 中设置，并且我添加了标记验证所需的 alt 标签。

此外，子菜单 ul 应该有足够的填充，以便元素相互对接，同时为您提供与主菜单的所需距离。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T21:03:14.580

[http://jsfiddle.net/Vqw75/](http://jsfiddle.net/Vqw75/) - 你在找我吗！莱昂内尔·里奇的爱

# wordpress - Wordpress 动作挂钩优先级

> ID：10744627
> 
> 赞同：0
> 
> 时间：2012-05-24T20:12:42.023
> 
> 标签：wordpress, hook

我尝试将动作与

```
add_action('lost_password', 'new_lost_password', 1); 
```

但默认操作比我的更早执行。如何使我的操作的优先级高于默认值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T20:38:06.850

决定是挂钩“retrieve_password”操作。

# javascript - jquery mobile长按按钮导致UIWebView上的javascript崩溃

> ID：10744631
> 
> 赞同：0
> 
> 时间：2012-05-24T20:13:10.790
> 
> 标签：javascript, objective-c, ios, ajax, xcode

我正在使用一个 uiwebview 来处理本机和 javascript html 文件之间的数据。问题是有时（似乎随机）在从 xml 获取参数的最后一行崩溃。警报在崩溃时显示正确的值，在不崩溃时也显示！谢谢你。

```
 var rutaXmlSocial=t+".xml";
    alert(rutaXmlSocial);
    $.get(rutaXmlSocial, function (xml2){
    //myCodeHere
}); 
```

好的，找到了问题的根源但似乎很烦人......当jqmobile touchEnd按钮事件时，调用了这个函数。但是，当长按按钮时，会导致其崩溃！其他时间正常工作！奇怪的问题

# c# - MVC 中的模型绑定字符串字段

> ID：10744632
> 
> 赞同：1
> 
> 时间：2012-05-24T20:13:18.393
> 
> 标签：c#, asp.net-mvc-3, model-binding

好的，我遇到了 MVC 问题，我将控制器/视图附加到多个模型，这些模型包含字符串的受保护内部集。创建这些对象时，我需要能够设置字符串。话虽如此，我在理解 ModelBinding 来实现这一点时遇到了问题。我为 ModelBinder 附加了一个非常基本的设置，但不知道从哪里开始：

```
/// <summary>
/// Handles binding for the string variables
/// </summary>
public class ActionResultModelBinder : DefaultModelBinder, IModelBinder, ITypedModelBinder
{
    #region Properties

    /// <summary>
    /// Gets the type that this model binder's associated with
    /// </summary>
    /// <value>
    /// The type that this model binder's associated with.
    /// </value>
    public Type AssociatedType
    {
        get
        {
           return typeof(string);
        }
    }

    #endregion Properties

    #region Methods

    /// <summary>
    /// Binds the model by using the specified controller context and binding context.
    /// </summary>
    /// <param name="controllerContext">The context within which the controller operates. The context information includes the controller, HTTP content, request context, and route data.</param>
    /// <param name="bindingContext">The context within which the model is bound. The context includes information such as the model object, model name, model type, property filter, and value provider.</param>
    /// <returns>
    /// The bound object.
    /// </returns>
    /// <exception cref="T:System.ArgumentNullException">The <paramref name="bindingContext "/>parameter is null.</exception>
    public override object BindModel(ControllerContext controllerContext, ModelBindingContext bindingContext)
    {
        var boundValue = base.BindModel(controllerContext, bindingContext);
        return bindingContext.ModelType == typeof(string);
    }

    /// <summary>
    /// Sets the specified property by using the specified controller context, binding context, and property value.
    /// </summary>
    /// <param name="controllerContext">The context within which the controller operates. The context information includes the controller, HTTP content, request context, and route data.</param>
    /// <param name="bindingContext">The context within which the model is bound. The context includes information such as the model object, model name, model type, property filter, and value provider.</param>
    /// <param name="propertyDescriptor">Describes a property to be set. The descriptor provides information such as the component type, property type, and property value. It also provides methods to get or set the property value.</param>
    /// <param name="value">The value to set for the property.</param>
    protected override void SetProperty(ControllerContext controllerContext, ModelBindingContext bindingContext, PropertyDescriptor propertyDescriptor, object value)
    {
        if (propertyDescriptor.PropertyType == typeof(string))
        {
            var stringVal = value as string;
        }

        base.SetProperty(controllerContext, bindingContext, propertyDescriptor, value);
    }

    #endregion Methods
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T22:39:19.410

好的，让我解释一下。

你想绑定一个模型，所以首先你需要返回那个模型

```
public override object BindModel(ControllerContext controllerContext, ModelBindingContext bindingContext) 
```

这是一个自定义绑定器的示例，用于绑定名为 FacebookGroupViewModel 的模型：

```
public class FacebookGroupViewModelBinder : IModelBinder
    {
        public object BindModel(ControllerContext controllerContext, ModelBindingContext bindingContext)
        {
            var model = new FacebookGroupViewModel();
            if(controllerContext.HttpContext.Request.Form.AllKeys.Contains("Friends"))
            {
                var friends = controllerContext.HttpContext.Request.Form["Friends"].Split(',');
                foreach (var friend in friends)
                {
                    model.FacebookFriendIds.Add(friend);
                }

 }
            return model;
        }
    } 
```

在这里，您可以看到我从表单中获取了一个值：

```
controllerContext.HttpContext.Request.Form["Friends"] 
```

但是您可以从 QueryString 或任何您想要的值中获取值，因为这里有 HttpContext。调试并查看您必须了解的所有属性。

最后，您需要通过这种方式设置此绑定器并将其与 global.asax 中的模型相关联。

```
ModelBinders.Binders.Add(typeof(FacebookGroupViewModel),new FacebookGroupViewModelBinder()); 
```

在应用程序启动方法中。

然后只需使用想象一下，我的控制器就是这样的。

```
[HttpPost]
public ActionResult PostFriend(FacebookGroupViewModel model)
{
//here your model is binded by your custom model ready to use.
} 
```

工作完成，如果您对此有更多疑问，请告诉我。

**您并不真正需要的更多信息**：

```
 protected override void SetProperty(ControllerContext controllerContext, ModelBindingContext bindingContext, PropertyDescriptor propertyDescriptor, object value) 
```

允许您使用默认绑定器行为并覆盖某些属性，就像您只使用字符串一样，但为此您需要使用原始的 bindModel 方法。（例如 base.BindModel）

# replace - 如何通过命令行“翻译”Grep 查找/替换使用 TextWrangler 的命令

> ID：10744637
> 
> 赞同：3
> 
> 时间：2012-05-24T20:13:42.917
> 
> 标签：replace, grep, textwrangler

我有一些在**TextWrangler下运行良好的****Grep**查找/替换命令，如下所示：

 **查找：(\"\d+.\d{3})+(\d{3}+[\s]+)

替换：\1s

例如，此查找/替换将替换：

*TXTXTXT"123.123456 TTXTXXT* by *TXTXTXT"123.123sTXTXTXT*

现在我想通过使用 egrep 在命令行中做同样的事情，但它不起作用：

```
egrep -e 's/(\"\d+\.\d{3})+(\d{3}+[\s]+)/\1s' -f m.txt > n.txt 
```

egrep：正则表达式太大

任何的想法？先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T21:13:47.663

您当前的问题是 -f 选项从文件中读取*正则表达式*。摆脱它。并在您使用时丢失 -e。只需使用：

```
egrep [regexp] [file] > [another file] 
```

然而，这会给您留下另一个问题：grep 只打印匹配项，它不进行替换。您可能应该使用 sed 代替。**

# python - 如何限制对 django 中特定行的访问

> ID：10744638
> 
> 赞同：1
> 
> 时间：2012-05-24T20:14:07.090
> 
> 标签：python, django, django-admin, django-admin-tools

我正在使用 Django 管理工具，我有非常简单的模型。我想限制对特定用户或特定组的特定密码的访问。如何为访问“是/否/从不”设置 3 个条件，当用户获得“是”+他的组“否”时，他可以访问，但是当“是”+“从不”时则没有。以及如何使其与 django-admin-tools 权限系统一起使用。

```
from django.db import models
from passwords.objects.labels.models import Label

class Password(models.Model):
    class Meta:
        db_table = 'passwords'

    name = models.CharField(max_length=32)
    username = models.CharField(max_length=32)
    password = models.CharField(max_length=32)
    labels = models.ManyToManyField(Label)

    def __unicode__(self):
        return self.name 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T20:25:46.560

开箱即用，django 仅支持类级别的权限（换句话说，对*table*的权限）。

支持对象级（行级）权限，但 django 并没有提供开箱即用的实现：

> 对象级权限
> 
> 添加了在每个对象级别指定权限的基础。虽然核心中没有实现，但自定义身份验证后端可以提供此实现，并将由 django.contrib.auth.models.User 使用。有关更多信息，请参阅身份验证文档。

[因此，有像django-guardian](https://github.com/lukaszb/django-guardian)这样的第三方应用程序可以启用此功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T20:41:15.410

由于您正在与管理员合作，因此您可以覆盖`has_add_permission`,`has_change_permission`和. 但是，如果不知道您的“是/否/从不”权限是如何附加到用户/组的，我真的无法进一步帮助您。`has_delete_permission``ModelAdmin`

**更新**

如果您想保持简单，最好的方法是简单地创建一个组，例如“PasswordAccess”。然后，将您想要的任何用户分配给该组，并且只为该组分配默认的添加、更改和删除权限`Password`。

没有其他要求。添加到该组的任何用户都将自动继承 的权限`Password`，任何其他用户都不会拥有这些权限，因此甚至不会在管理员中看到它。

# apache - Apache Tomcat SSL 配置

> ID：10744642
> 
> 赞同：1
> 
> 时间：2012-05-24T20:14:20.823
> 
> 标签：apache, tomcat, ssl

我正在尝试配置在 Unix 上运行的 SSL onn apache Tomcat Java Servlet 应用程序，但尽管进行了多次尝试并试图在网络上找到答案，但还是没有运气。任何人都可以帮忙吗？我做了以下动作：

生成 Java 密钥库和密钥对

```
 /usr/lib/jvm/java-6-sun-1.6.0.26/bin/keytool -genkey -v -keyalg RSA -alias tomcat
-keypass changeit -storepass changeit -keystore /mykeystore/keystore.jks -keysize 2048 
```

生成证书签名请求

```
/usr/lib/jvm/java-6-sun-1.6.0.26/bin/keytool -certreq -keyalg RSA -alias tomcat -file
/mykeystore/tomcat.csr -storepass changeit -keystore /mykeystore/keystore.jks 
```

导入根证书和中间 CA 证书

```
vi /mykeystore/root.crt

/usr/lib/jvm/java-6-sun-1.6.0.26/bin/keytool -import -alias root  -trustcacerts -file
/mykeystore/root.crt -keystore /mykeystore/keystore.jks

vi /mykeystore/tomcat.crt

/usr/lib/jvm/java-6-sun-1.6.0.26/bin/keytool -import -alias tomcat -file /mykeystore
/tomcat.crt -keystore /mykeystore/keystore.jks 
```

更新 server.xml

```
<-- Define a SSL Coyote HTTP/1.1 Connector on port 8443 -->
<!--
<Connector port="8443" protocol="org.apache.coyote.http11.Http11Protocol"
       maxThreads="200"
       scheme="https" secure="true" SSLEnabled="true"
       keystoreFile="/mykeystore/keystore.jks" keystorePass="changeit"
       clientAuth="false" sslProtocol="TLS"/> 
```

重启Tomcat

```
service apache2 restart 
```

我得到错误：

在地址监听传输 dt_socket：8000 24-May-2012 20:54:10 org.apache.catalina.core.AprLifecycleListener init INFO：在 java 上找不到基于 APR 的 Apache Tomcat Native 库，该库允许在生产环境中实现最佳性能.library.path:/usr/lib/jvm/java-6-sun-1.6.0.26/jre/lib/i386/server:/usr/lib/jvm/java-6-sun-1.6.0.26/jre/lib /i386:/usr/lib/jvm/java-6-sun-1.6.0.26/jre/../lib/i386:/usr/java/packages/lib/i386:/lib:/usr/lib 5 月 24 日-2012 20:54:11 org.apache.coyote.http11.Http11Protocol init 信息：在 http-8080 上初始化 Coyote HTTP/1.1 2012 年 5 月 24 日 20:54:12 org.apache.coyote.http11.Http11Protocol init

```
SEVERE: Error initializing endpoint
java.io.IOException: jsse.invalid_ssl_conf

at org.apache.tomcat.util.net.jsse.JSSESocketFactory.checkConfig(JSSESocketFactory.java:846)
at org.apache.tomcat.util.net.jsse.JSSESocketFactory.init(JSSESocketFactory.java:522)
at org.apache.tomcat.util.net.jsse.JSSESocketFactory.createSocket(JSSESocketFactory.java:156)
at org.apache.tomcat.util.net.JIoEndpoint.init(JIoEndpoint.java:538)
at org.apache.coyote.http11.Http11Protocol.init(Http11Protocol.java:176)
at org.apache.catalina.connector.Connector.initialize(Connector.java:1022)
at org.apache.catalina.core.StandardService.initialize(StandardService.java:703)
at org.apache.catalina.core.StandardServer.initialize(StandardServer.java:838)
at org.apache.catalina.startup.Catalina.load(Catalina.java:538)
at org.apache.catalina.startup.Catalina.load(Catalina.java:562)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at org.apache.catalina.startup.Bootstrap.load(Bootstrap.java:261)
at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:413)

Caused by: javax.net.ssl.SSLException: No available certificate or key corresponds to the SSL
cipher suites which are enabled.

at com.sun.net.ssl.internal.ssl.SSLServerSocketImpl.checkEnabledSuites(SSLServerSocketImpl.java:310)
at com.sun.net.ssl.internal.ssl.SSLServerSocketImpl.accept(SSLServerSocketImpl.java:255)
at org.apache.tomcat.util.net.jsse.JSSESocketFactory.checkConfig(JSSESocketFactory.java:842)
... 15 more 
```

2012 年 5 月 24 日 20:54:12 org.apache.catalina.core.StandardService 初始化

请帮忙。非常感谢。

# javascript - 在Javascript中检测触摸板与鼠标

> ID：10744645
> 
> 赞同：30
> 
> 时间：2012-05-24T20:14:25.420
> 
> 标签：javascript, mouse, touchpad, trackpad

有什么方法可以检测客户端使用的是触摸板还是带有 Javascript 的鼠标？

或者至少对使用触摸板而不是鼠标的用户数量进行合理估计？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2015-07-02T17:44:46.507

这个话题可能已经解决了，但答案是没有办法检测到它。好吧，我需要找到解决方案，这非常重要。所以我为这个问题找到了一个可以接受的解决方案：

```
var scrolling = false;
var oldTime = 0;
var newTime = 0;
var isTouchPad;
var eventCount = 0;
var eventCountStart;

var mouseHandle = function (evt) {
    var isTouchPadDefined = isTouchPad || typeof isTouchPad !== "undefined";
    console.log(isTouchPadDefined);
    if (!isTouchPadDefined) {
        if (eventCount === 0) {
            eventCountStart = new Date().getTime();
        }

        eventCount++;

        if (new Date().getTime() - eventCountStart > 100) {
                if (eventCount > 10) {
                    isTouchPad = true;
                } else {
                    isTouchPad = false;
                }
            isTouchPadDefined = true;
        }
    }

    if (isTouchPadDefined) {
        // here you can do what you want
        // i just wanted the direction, for swiping, so i have to prevent
        // the multiple event calls to trigger multiple unwanted actions (trackpad)
        if (!evt) evt = event;
        var direction = (evt.detail<0 || evt.wheelDelta>0) ? 1 : -1;

        if (isTouchPad) {
            newTime = new Date().getTime();

            if (!scrolling && newTime-oldTime > 550 ) {
                scrolling = true;
                if (direction < 0) {
                    // swipe down
                } else {
                    // swipe up
                }
                setTimeout(function() {oldTime = new Date().getTime();scrolling = false}, 500);
            }
        } else {
            if (direction < 0) {
                // swipe down
            } else {
                // swipe up
            }
        }
    }
} 
```

并注册事件：

```
document.addEventListener("mousewheel", mouseHandle, false);
document.addEventListener("DOMMouseScroll", mouseHandle, false); 
```

它可能需要一些优化并且可能不够完美，但它确实有效！至少它可以检测到macbook触控板。但是由于设计的原因，我想说它应该可以在垫引入大量事件调用的任何地方工作。

下面是它的工作原理：

当用户第一次滚动时，它会检测并检查在 50 毫秒内触发的事件不超过 5 个，这对于普通鼠标来说是非常不寻常的，但对于触控板来说则不然。

然后是 else 部分，这不是为了检测的重要性，而是当用户滑动时调用一次函数的技巧。如果我不够清楚，请来找我，让这个工作非常棘手，当然这不是一个理想的解决方法。

**编辑：**我现在尽可能地优化了代码。它第二次检测到鼠标滚动并立即在触控板上滑动。还删除了很多重复和不必要的代码。

**编辑 2**我将时间检查的数字和调用的事件数分别从 50 更改为 100 和从 5 更改为 10。这应该产生更准确的检测。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2019-07-09T08:06:45.230

比较 e.wheelDeltaY 和 e.deltaY（或 Firefox 中的 e.deltaMode）来检测触摸板鼠标设备

```
function handler(e) {
    var isTouchPad = e.wheelDeltaY ? e.wheelDeltaY === -3 * e.deltaY : e.deltaMode === 0
    // your code
    document.body.textContent = isTouchPad ? "isTouchPad" : "isMouse"
}
document.addEventListener("mousewheel", handler, false);
document.addEventListener("DOMMouseScroll", handler, false);
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2020-06-16T19:00:54.830

Lauri 上面的答案似乎有效，但我花了一段时间才明白它*为什么*有效。所以在这里我将提供一个更易于阅读的版本，以及一个概念性的解释。首先，以人类可读的方式写出相同的代码：

```
function detectTrackPad(e) {
  var isTrackpad = false;
  if (e.wheelDeltaY) {
    if (e.wheelDeltaY === (e.deltaY * -3)) {
      isTrackpad = true;
    }
  }
  else if (e.deltaMode === 0) {
    isTrackpad = true;
  }
  console.log(isTrackpad ? "Trackpad detected" : "Mousewheel detected");
}

document.addEventListener("mousewheel", detectTrackPad, false);
document.addEventListener("DOMMouseScroll", detectTrackPad, false); 
```

这是因为 wheelDeltaY 测量实际硬件鼠标滚轮已经行进的物理距离，而 deltaY 测量屏幕上产生的滚动量。传统鼠标的“滚动分辨率”通常比触控板低得多。也就是说，使用触控板，您可以做出微小的动作并在屏幕上进行微小的滚动。传统的鼠标在更粗的、低分辨率的点击中滚动。要完成鼠标滚轮的完整旋转，可能需要单击 10 次。没有半点击或四分之一点击之类的东西。

对于传统鼠标，单次滚轮单击报告为 120 个 wheelDeltaY“单位”，并导致*大约 100*像素的滚动。物理 wheelDeltaY 单位是一个完全任意的数字，它不是测量英寸或度数或类似的东西。选择120这个数字[只是因为它有很多有用的因素](https://devblogs.microsoft.com/oldnewthing/20130123-00/?p=5473)。屏幕上的滚动量由 deltaY 表示，它[因浏览器而异](https://github.com/facebookarchive/fixed-data-table/blob/master/src/vendor_upstream/dom/normalizeWheel.js)。（旁注，deltaY 通常以“线”而不是像素来衡量，尽管它很复杂，请参阅上一个链接）。

[![鼠标剖面图](../Images/028ea885d22e63c63bb499aa046bcbf5.png)](https://i.stack.imgur.com/wHj6c.png)

与触控板交互有两种不同的方式。首先，您可以获得比 120 小得多的 wheelDeltaY 值，因为可以检测到非常细微的手指手势。其次，wheelDeltaY 正好是 deltaY 值的 3 倍（至少在我设法测试的每个浏览器中）。因此，例如，如果您做出相当于 12 个单击单位的物理手指手势，通常会导致 4 个像素的滚动。Lauri 的代码使用第二个属性 (Y1 = Y2 * 3) 来检测触控板的存在，但您也可以通过检查 abs(wheelDeltaY) 是否等于 120 来成功

我没有对此进行测试，但我认为它也可以工作：

```
function detectTrackPad(e) {
  var isTrackpad = false;
  if (e.wheelDeltaY) {
    if (Math.abs(e.wheelDeltaY) !== 120) {
      isTrackpad = true;
    }
  }
  else if (e.deltaMode === 0) {
    isTrackpad = true;
  }
  console.log(isTrackpad ? "Trackpad detected" : "Mousewheel detected");
}

document.addEventListener("mousewheel", detectTrackPad, false);
document.addEventListener("DOMMouseScroll", detectTrackPad, false); 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-05-24T20:17:56.473

您可以检测到 JS 事件。

`touchstart`除了鼠标事件之外，触摸设备还会触发触摸事件。

非触摸设备只会触发鼠标事件。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2012-05-25T04:46:53.000

在一般情况下，没有办法做你想做的事。ActiveX*可能*允许您查看和检查 USB 设备，但在最好的情况下，即使这是可能的，也将您限制为 IE 用户。除此之外，没有办法知道。

您可能能够辨别触摸板用户移动光标的方式（或频率）与鼠标用户移动光标的方式。以这种方式区分物理输入设备是一个非常困难的前景，并且可能完全不可能，因此我将其包含在此处只是为了完整起见。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2019-02-25T08:01:05.060

触摸板触发的滚轮事件会产生更小的 event.deltaY,1 或 2，但鼠标滚轮触发会产生 100,200。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-09-04T03:23:52.413

从测试插入鼠标到带有触摸板的 Mac 和带有触摸板的 Windows 机器，我可以总结一下我是如何做到这一点的。

1.  检测导航器用户代理是否包含“Mobile”或“Mac OS”如果其中任何一个为真，则可能是基于触摸的系统，但要努力消除这种情况。将布尔 hasTouchPad 设置为 true

2.  如果上述情况属实，则检测“鼠标”事件并运行测试，如高数、非整数频率或卡尔曼滤波。

3.  将这些保留在队列中，如果该队列的总和超过阈值，则禁用 hasTouchpad 变量并断开事件。

```
let isMouseCounts: Array<number> = []

if (Client.hasTouchpad) {
    document.addEventListener('wheel', detectMouseType);
}

function detectMouseType(e:WheelEvent) {
    if (!Client.hasTouchpad) return

    let isMouse = e.deltaX === 0 && !Number.isInteger(e.deltaY)

    isMouseCounts.push(isMouse ? 1 : 0)
    if (isMouseCounts.length > 5) isMouseCounts.shift()

    let sum = isMouseCounts.reduce(function(a, b) { return a + b; });

    if (sum > 3 && e.type === "wheel") {
        console.log("Touchpad disabled")
        document.removeEventListener('wheel', detectMouseType);
        Client.hasTouchpad = false;
    }
} 
```

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2017-07-28T17:53:45.297

您可以检查安装到本地软件包中的设备驱动程序软件是否正常运行。就像在 windows synaptics、elan 硬件中一样，对于 UNIX（Linux），您可以只检查在基本安装过程中安装的软件包。许多包在不同版本的 Linux 和类似 Linux 的系统中以不同的格式出现（完全不是 linux），但它们使用相同的包名称。刚知道拉它的代码。仍在努力。

# windows - 如何检测我的应用程序是否在兼容模式下运行？

> ID：10744651
> 
> 赞同：2
> 
> 时间：2012-05-24T20:14:46.757
> 
> 标签：windows, delphi

> **可能重复：**
> [如何检测真正的 Windows 版本](https://stackoverflow.com/questions/57124/how-to-detect-true-windows-version)

我有一个应用程序使用第三方库（dll - 无源代码）来保护（加密）一些客户数据，这个 dll 必须使用不同的参数初始化，具体取决于当前的 Windows 版本。如果我的应用程序在 Windows 7 下以 XP 兼容模式执行，则 dll 加密方法失败。所以我需要一种方法来检测我的应用程序何时在兼容模式下运行以防止此问题。所以`How I can detect if my application is running under compatibility mode?`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-24T20:21:51.993

您可以将函数返回的值与WMI 类[`GetVersionEx`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724451%28v=vs.85%29.aspx)的 Version 属性进行比较。[`Win32_OperatingSystem`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa394239%28v=vs.85%29.aspx)

试试这个样本

```
{$APPTYPE CONSOLE}

{$R *.res}

uses
  Windows,
  SysUtils,
  ActiveX,
  ComObj,
  Variants;

function WMI_OSVersion:string;
var
  FSWbemLocator : OLEVariant;
  FWMIService   : OLEVariant;
  FWbemObjectSet: OLEVariant;
  rgvar         : OLEVariant;
  LEnum         : IEnumVARIANT;
  pceltFetched  : LongWord;
begin
  FSWbemLocator := CreateOleObject('WbemScripting.SWbemLocator');
  FWMIService   := FSWbemLocator.ConnectServer('localhost', 'root\CIMV2', '', '');
  FWbemObjectSet:= FWMIService.ExecQuery('SELECT Version FROM Win32_OperatingSystem','WQL', $00000020);
  LEnum         := IUnknown(FWbemObjectSet._NewEnum) as IEnumVariant;
  if LEnum.Next(1, rgvar, pceltFetched) = S_OK  then
   Result:=String(rgvar.Version);
end;

function WinApi_OsVersion:string;
var
  lpVersionInformation: TOSVersionInfo;
begin
  ZeroMemory(@lpVersionInformation, SizeOf(lpVersionInformation));
  lpVersionInformation.dwOSVersionInfoSize:=SizeOf(lpVersionInformation);
  GetVersionEx(lpVersionInformation);
  Result:=Format('%d.%d.%d',[lpVersionInformation.dwMajorVersion, lpVersionInformation.dwMinorVersion, lpVersionInformation.dwBuildNumber]);
end;

function RunningCompatibilityMode : Boolean;
begin
   Result:=WMI_OSVersion<>WinApi_OsVersion;
end;

begin
 try
    CoInitialize(nil);
    try
      Writeln('Running in Compatibility Mode - '+ BoolToStr(RunningCompatibilityMode, True));
    finally
      CoUninitialize;
    end;
 except
    on E:EOleException do
        Writeln(Format('EOleException %s %x', [E.Message,E.ErrorCode]));
    on E:Exception do
        Writeln(E.Classname, ':', E.Message);
 end;
 Writeln('Press Enter to exit');
 Readln;
end. 
```

# jquery - jquery 验证器 addmethod 动态消息

> ID：10744653
> 
> 赞同：4
> 
> 时间：2012-05-24T20:14:50.647
> 
> 标签：jquery, jquery-validate

我有一个与 jquery 验证器一起使用的自定义验证方法。我试图让错误消息动态生成。

我用谷歌搜索过，我最常看到的答案显示在[这个 stackoverflow 帖子](https://stackoverflow.com/questions/1636530/jquery-validator-custom-method)中。

但是，当我尝试自己实现它时，它不起作用。它只是忽略我更新的消息，只显示原始消息。

这是我的代码，位于 jquery.ready() 函数内。我究竟做错了什么？

*注意：“g$”是我们对 jquery 的简写。*

```
 var jsBlackoutDateMessage = "Tournaments cannot be scheduled on blackout dates.";
    var jsBlackoutDateMessageFunction = function () {
        return jsBlackoutDateMessage;
    };
    g$.validator.addMethod(
    "notBlackoutDate",
    function (value, element) {

        var notBlackoutDate = true;

        if (g$.inArray(value, jsBlackoutDates) != -1) {
            notBlackoutDate = false;
        }

        if (notBlackoutDate == false) {

            // year
            var year = new Date(g$.trim(g$('#txtDate').val())).getFullYear();

            var blackoutDatesForYear = jsBlackoutDates.filter(function (item) {
                return endsWith(item, year.toString());
            })[0];

            var blackoutDatesForYearMessage = [];
            blackoutDatesForYearMessage.push("Tournaments cannot be scheduled on blackout dates.");
            blackoutDatesForYearMessage.push("<ul>");

            g$.each(blackoutDatesForYear, function (key, value) {
                blackoutDatesForYearMessage.push("<li>");
                blackoutDatesForYearMessage.push(new Date(value).toLocaleDateString());
                blackoutDatesForYearMessage.push("</li>");
            });

            blackoutDatesForYearMessage.push("</ul>");

            jsBlackoutDateMessage = blackoutDatesForYearMessage.join("");
        }

        return this.optional(element) || notBlackoutDate;
    },
    jsBlackoutDateMessageFunction
); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-29T18:25:49.960

我冒昧地猜测这与过滤器有关，或者每个功能都无法正常运行。我尝试将您的代码简化为最简单的组件并想出了这个（这在我的最终工作正常）：

```
var message = "Original Message";
var messageFunc = function () { return message; };

$.validator.addMethod("messageTest", function (value, element) {
        var newMessage = [];

        newMessage.push("Original Message");
        newMessage.push(" - Plus new message");

        message = newMessage.join("");

        // We will always return false, so that
        // the message always shows
        return this.optional(element) || false;
    }, messageFunc);

$("#testId").rules("add", { messageTest: true }); 
```

在您的代码上，尝试替换：

```
jsBlackoutDateMessage = blackoutDatesForYearMessage.join(""); 
```

和

```
$("#someDivID").html( blackoutDatesForYearMessage.join("") ); 
```

其中 someDivID 是表单上可见的 div。通过这种方式，您可以使用 FireBug 来检查正在写下的实际 HTML。可能是它包含初始`<ul></ul>`标签，但由于它是空的，因此不可见。这将帮助您确定代码中断的位置。

另一个注意事项（对于不能只使用调试器的语言尤其如此）：通常，最好先为您正在编码的任何内容创建一个简单的版本。这使您可以进行迭代开发，并使跟踪代码中断的位置变得更加容易。试试我帖子顶部的示例代码，看看你是否能让它正常运行。

# java - DefaultHandler 中的空 uri 和 localName

> ID：10744660
> 
> 赞同：0
> 
> 时间：2012-05-24T20:15:28.830
> 
> 标签：java, rss, rss-reader

我正在开发一个 RSS 阅读器。运行此代码时，localName 和 uri 为空。我正在解析一个 RSS 提要。我正在运行以下代码。相同的代码在另一个 android 项目中运行良好。

```
@Override
public void endElement(String uri, String localName, String qName)
        throws SAXException {

    String name;
    if (localName == "" ){
        name = qName;
    }
    else{
        name = localName;
    }

    if (name.equalsIgnoreCase("title")) {
        currentPost.setTitle(chars.toString());
    }
    if (name.equalsIgnoreCase("link")) {
        currentPost.setLink(chars.toString());
    }
    if (name.equalsIgnoreCase("content")
            && currentPost.getContent() == null) {
        currentPost.setContent(chars.toString());
    }
    if (name.equalsIgnoreCase("item")) {
        currentPost.setFeed(feed);
        Posts.Instance().add(currentPost);
        currentPost = new Post();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T20:24:37.103

根据 API

> 参数：
> 
> uri - 命名空间 URI，*如果元素没有命名空间 URI 或未执行命名空间处理，则为空字符串。*
> 
> localName - 本地名称（不带前缀），*如果未执行命名空间处理，则为空字符串。*
> 
> ...

和

> characters 方法可以在标签内被多次调用，尤其是当元素值包含空格时。

在 characters() 文档中

> Parser 将调用此方法来报告每个字符数据块。SAX 解析器可以在单个块中返回所有连续的字符数据，也可以将其拆分为多个块；但是，任何单个事件中的所有角色都必须来自同一个外部实体，以便定位器提供有用的信息。

所以，

> 当我编写 SAX 解析器时，我使用 StringBuilder 来附加所有传递给 characters() 的内容：

```
public void characters (char ch[], int start, int length) {
    if (buf!=null) {
        for (int i=start; i<start+length; i++) {
            buf.append(ch[i]);
        }
    }
}

Then in endElement(), I take the contents of the StringBuilder and do something with it. That way, if the parser calls characters() several times, I don't miss anything. 
```

信用：[https](https://stackoverflow.com/a/7182648/643500) ://stackoverflow.com/a/7182648/643500和[https://stackoverflow.com/a/2838338/643500](https://stackoverflow.com/a/2838338/643500)

**编辑：：**

阅读[http://sujitpal.blogspot.com/2008/07/rss-feed-client-in-java.html](http://sujitpal.blogspot.com/2008/07/rss-feed-client-in-java.html)

# javascript - 坚持使用 JSON 对象

> ID：10744661
> 
> 赞同：0
> 
> 时间：2012-05-24T20:15:29.757
> 
> 标签：javascript, jquery, foreach

我有一个看起来类似于的 JSON 对象

```
{
   "mydata":[
            "one",
            "two",
            "three"
            ],
   "outside":[
               {
                 "vals":["four", "five", "six"],
                 "soso":{"seven", "eight", "nine"]               
               },
               {
                 "vals":["four", "five", "six"],
                 "soso":{"seven", "eight", "nine"]               
               },
               {
                 "vals":["four", "five", "six"],
                 "soso":{"seven", "eight", "nine"]               
               },
              ]
   "inside":[] 
```

我正在尝试使用 jquery 在“外部”运行 $.each，这样我就可以从“外部”获取每个 vals 值集，而我什么也没得到，但我失败了，我放弃了希望有人能提供帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T20:22:36.130

`outside`对象内`soso`应如下所示

`"soso":["seven", "eight", "nine"]`进而

```
$.each(json.outside, function() {
    this.vals.each(function(index, val) {
       console.log(val); // output: "four", "five", "six"
    });

   this.soso.each(function(index, val) {
       console.log(val); // output: "seven", "eight", "nine
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T20:18:44.547

使用 jQuery：

```
$.each(jsonObj.outside, function () {
    var i = this; // The current item
}); 
```

# sql - 使用单个 INSERT 语句将多行插入到表中

> ID：10744662
> 
> 赞同：1
> 
> 时间：2012-05-24T20:15:38.197
> 
> 标签：sql, netezza, squirrel-sql

我不知道为什么我不能使用这种语法将值插入到我的表中。我可以插入一行，但我不能插入多行。

```
CREATE TABLE T1 (
             ID BIGINT NULL,
             CAT VARCHAR(255) NULL,
             M_ID BIGINT NULL,
             T_CAT  VARCHAR(255) NULL,
             NUM BIGINT NULL) 

    INSERT INTO T1
    VALUES
    (32,'Math',945,'Red',2),
    (6,'English',232,'Blue',2) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-24T20:23:18.670

你的语法是正确的。但是，插入多行是 SQL-92 功能。好像你的数据库不支持它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T20:16:38.847

尝试明确定义要插入的列：

```
INSERT INTO T1 (ID, CAT, M_ID, T_CAT, NUM)
VALUES
(32,'Math',945,'Red',2),
(6,'English',232,'Blue',2) 
```

请参阅[此工作示例](http://sqlfiddle.com/#!3/efd07/2)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-03T12:59:44.613

此特定错误是因为您没有使用分号终止 CREATE TABLE 语句。Netezza 要求终止语句，它不会智能地解析多语句查询。

```
CREATE TABLE T1 (
         ID BIGINT NULL,
         CAT VARCHAR(255) NULL,
         M_ID BIGINT NULL,
         T_CAT  VARCHAR(255) NULL,
         NUM BIGINT NULL); 

INSERT INTO T1
VALUES
(32,'Math',945,'Red',2),
(6,'English',232,'Blue',2); 
```

您遇到的下一个错误也很可能是 Gordon 的响应，因为 NZ 并不真正支持任何高级 VALUES 子句选项。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-24T20:28:21.453

我不认为所有数据库都支持使用 VALUES 语句插入多行。您可以使用单独的插入语句：

```
INSERT INTO T1 VALUES  (32,'Math',945,'Red',2);
INSERT INTO T1 VALUES  (6,'English',232,'Blue',2); 
```

或者，您可以改用 SELECT 语法：

```
INSERT INTO T1
    select 32,'Math',945,'Red',2 union all
    select 6,'English',232,'Blue',2 
```

（注意：我使用 SQL Server 语法来获取常量。您可能需要添加类似“from dual”的内容。）

最后，我完全同意其他发帖者的观点，即将列列表放在表名之后是一种很好的做法，您应该自动执行此操作。好吧，另一个好的做法是有一个自动递增的 id 列，如果你有其中一个，你需要列的列表。

但是，没有列表不应该导致您的问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-02-28T23:27:08.477

Netezza 支持在 SQL 中批量上传。非标准的 EXTERNAL TABLE 将常规表替换为 CSV 平面文件。这可以在 INSERT...SELECT... 语句中使用。

请注意，**USING**子句没有逗号分隔术语（我对此有所了解）。另外，因为我使用 pyODBC，所以设置了 PIPE 分隔符和**ODBC 。****JAVA**是另一个**远程源**。skiprows **1**项丢弃标题。

```
INSERT INTO NetezzaTable
SELECT *
FROM EXTERNAL 'C:\\temp\\Your.csv'
USING (
delimiter '|'
REMOTESOURCE 'ODBC'
LOGDIR 'C:\\temp'
skiprows 1
maxerrors 0
fillrecord); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-09-19T09:47:37.797

由于上述大多数答案都正确解释了 Netezza 不支持 VALUES 子句，因为它属于 NZ 不熟悉的 SQL-92 类，您也可以使用 Netezza 客户端附带的 nzload 工具一次性加载您的数据.

将 CSV 文件中的数据加载到 NZ 表中的命令是：

```
nzload -host <host> -u <username> -pw <password> -db <db_name> -t <table_name> -delim ',' -df <data_file> 
```

# ruby-on-rails-3 - Ajaxified 布尔字段在页面加载和刷新时切换

> ID：10744663
> 
> 赞同：1
> 
> 时间：2012-05-24T20:15:42.763
> 
> 标签：ruby-on-rails-3, jquery

我有一个 link_to 在单击时切换一个布尔字段。问题是它会在页面刷新和/或加载时切换。这是代码：

故事/show.html.erb

```
<div id="story">
  <%= render @story %>
</div> 
```

_story.html.erb

```
<div id="storyShow">
    <% if story.user == current_user %> 
       <%= render 'stories/published', { :story => story } %>
    <% end %>
</div> 
```

故事控制器.rb

```
 def toggle_published
    @story = Story.find(params[:id])
    @story.toggle!(:published)
  end 
```

application_helper.rb

```
 def published_link_text(publishable)
    publishable.published? ? 'Published' : 'Un-Published'
  end 
```

_published.html.erb

```
<% if story.published? %>
  <span id="publishedSwitchGreen" class="greenText">
    <%= link_to published_link_text(story), 
      toggle_published_story_path(story), :remote => true, :id => "story_publish#{story.id}" %>
  </span>

<% else %>

  <span id="publishedSwitchRed" class="redText">
    <%= link_to published_link_text(story), 
      toggle_published_story_path(story), :remote => true, :id => "story_publish#{story.id}" %>
  </span>
<% end %> 
```

toggle_published.js.erb

```
$("#story_publish<%= @story.id %>").text("<%= published_link_text(@story) %>"); 
```

路线.rb

```
 resources :stories do
    get 'toggle_published', :on => :member
  end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T21:04:58.993

我不小心将我的切换调用粘贴到了控制器的 Show 动作中，所以每次故事显示时，它都会切换。

# jquery - asp.net mvc3 razor 和 jquery 提交

> ID：10744665
> 
> 赞同：2
> 
> 时间：2012-05-24T20:16:06.090
> 
> 标签：jquery, asp.net-mvc-3, forms, razor

我在提交之前有带有提交按钮的表单，我需要在获取哈希后面调用 c# 代码，然后更改隐藏输入的值。

后面的代码正在调用，但问题是，当我从 c# 代码表单提交结果时，我如何先获取结果然后提交表单？

查询：

```
$('#pay_form').submit(function(){
       GetHash();
    });

 function GetHash()
    {
        var amount = $('#txtInAmount').val();
        $.ajax({
            url: '/Transactions/GetOrderCodeHah',
            type: 'POST',
            dataType: 'json',
            data: { Amount: amount },
            success: function (result){
                $('#txtOrderCode').val('231321321321321321');
                $('#txtCheck').val(result.hash);
            },
            error: function(){
                return false;
            }
        });
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T20:18:06.750

您需要`return false;`从`submit()`处理程序中，然后显式地`submit()`在 AJAX 回调中的表单。

# iphone - 谁调整了我的视图大小？（在 iOS 上）

> ID：10744669
> 
> 赞同：3
> 
> 时间：2012-05-24T20:16:18.387
> 
> 标签：iphone, ios, ipad, uiview, uiviewcontroller

使用 Xcode 4.3.2 上的 Empty App 模板创建了一个项目，因此不涉及 NIB。

在`FooViewController.m`：

```
-(void) loadView {
    UIView *view = [[UIView alloc] init];
    view.backgroundColor = [UIColor yellowColor];
    self.view = view;                     
} 
```

因此，视图被实例化并分配给`self.view`. 两种方法：

```
- (void)viewDidLoad {
    [super viewDidLoad];

    NSLog(@"self.view is %@", self.view);
}

-(void) viewDidAppear:(BOOL)animated {
    NSLog(@"self.view is %@", self.view);
} 
```

第一种方法会打印出来

```
self.view is <UIView: 0x18e4d0; frame = (0 0; 0 0); layer = <CALayer: 0x182a00>> 
```

而第二个打印出来

```
self.view is <UIView: 0x18e4d0; frame = (0 20; 768 1004); layer = <CALayer: 0x182a00>> 
```

所以在`viewDidLoad`和之间`viewDidAppear`，视图被调整大小。调整大小的机制是什么？我们真的可以指望它吗？因为即使是备受推崇的 Programming iOS, 2nd Ed 一书的作者 Matt Neuburg 也是这样做的（见第 508 页）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T20:42:04.810

你必须了解 ViewController 的生命周期。在 viewDidLoad 中，将创建视图，但不会设置边界/尺寸。这将在接下来的步骤中发生。您可以使用 viewWillAppear 来设置尺寸（大多数人都会这样做）。ViewDidAppear 最后发生，您已经有了最终外观并且动画已经开始。

所以是的，在 viewDidLoad 和 viewDidAppear 之间，视图获得了它的维度和边界，它是完全可靠的，并且在 ViewController 文档中也有记录。

另请注意，每次需要创建视图时都会调用 viewDidLoad（例如第一次和在内存不足警告之后 - 通常在需要内存时释放视图），并且每次视图控制器位于顶部时都会调用 viewWillAppear堆栈及其视图即将被渲染。

查看与视图外观相关的文档：http: [//developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/RespondingtoDisplay-Notifications/RespondingtoDisplay-Notifications.html#//apple_ref/doc/uid/TP40007457- CH12](http://developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/RespondingtoDisplay-Notifications/RespondingtoDisplay-Notifications.html#//apple_ref/doc/uid/TP40007457-CH12)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T20:21:09.023

默认情况下，该[`autoresizesSubviews`](http://developer.apple.com/library/ios/documentation/uikit/reference/uiview_class/uiview/uiview.html#//apple_ref/occ/instp/UIView/autoresizesSubviews)属性将导致视图在显示时调整其子视图的大小。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-26T10:13:24.113

**当您将此****设为****of**时，看起来**'**`viewController` s`view`已调整大小。否则你必须手动设置它的框架。**`viewController``rootViewController``application``window`**

我试过这段代码：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    self.window.backgroundColor = [UIColor whiteColor];

    FooViewController *viewController = [[FooViewController alloc] init];

    self.window.rootViewController = viewController; 
    [self.window makeKeyAndVisible];

    FooViewController *viewController2 = [[FooViewController alloc] init];
    [viewController.view addSubview: [viewController2 view]];

    return YES;
} 
```

`viewController`已调整大小，`viewController2`但没有。

另外：对于`viewController`所有这些方法都被调用：

```
viewDidLoad
viewWillLayoutSubviews
viewDidLayoutSubviews
viewDidAppear 
```

`viewController2`只为`viewDidLoad`和`viewDidAppear`被调用。

也很有趣：`viewController`在它`viewWillLayoutSubviews`被调用之前被调整了大小。

编辑：

我认为这值得进一步测试。使用以下代码：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    self.window.backgroundColor = [UIColor whiteColor];

    FooViewController *viewController = [[FooViewController alloc] init];
    NSLog(@"after init: self.view is %@", viewController.view);
    self.window.rootViewController = viewController; 
    NSLog(@"after setting to rootViewController: self.view is %@", viewController.view);
    [self.window makeKeyAndVisible];
    NSLog(@"after makeKeyAndVisible: self.view is %@", viewController.view);

    return YES;
} 
```

结果是：

```
viewDidLoad:                         frame = (0 0; 0 0)
after init:                          frame = (0 0; 0 0)
after setting to rootViewController: frame = (0 0; 0 0)
after makeKeyAndVisible:             frame = (0 20; 320 460)
viewWillLayoutSubviews:              frame = (0 20; 320 460)
viewDidLayoutSubviews:               frame = (0 20; 320 460)
viewDidAppear:                       frame = (0 20; 320 460) 
```

**`[self.window makeKeyAndVisible];`**罪魁祸首也是如此。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-24T20:39:55.757

self.view 直到它显示在屏幕上才真正创建。它是延迟加载的。调用后`viewWillAppear`，将设置框架。是的，您可以信任这些值，因为它们是根据手机的屏幕和方向设置的。

self.view 是一个比较特殊的视图，我经常不直接使用它，我通常只是添加一个容器子视图并将其作为主视图。由于调整大小，最好不要将 self.view 视为静态实体。确保正确设置子视图的自动调整大小掩码，以便在 self.view 更改时正确显示它们。

为了进一步回答您的问题，UIKit 专门设置视图的框架以考虑屏幕的大小、方向、导航栏、状态栏、工具栏等。您不能保证在`viewWillAppear`调用之前设置的框架将是相同。事实上，如果导航栏、方向或其他因素发生变化，self.view 会发生更大的变化。因此，即使`viewWillDisplay`您不能保证 self.view 的静态大小并且如果您更改它，它也会被适当地重置以反映设备的该状态。

UIKit 为我们处理了这个实现细节，这是一种奢侈，因为这样我们就不必考虑特定于设备的更改，只需确保正确设置了子视图的自动调整大小，而 UIKit 会处理其余的事情。

# opencv - 从两个 2D 点重建一个 3D 点？

> ID：10744671
> 
> 赞同：7
> 
> 时间：2012-05-24T20:16:22.840
> 
> 标签：opencv, 3d-reconstruction

OpenCV 包含很多对立体相机 3D 重建的支持。就我而言，我有两个相机，我想知道某个点的 3D 坐标。

我有的：

1.  两幅图像上点的像素坐标
2.  已知的内在和外在相机参数

我想得到什么：在 3D 中坐标这个点

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T08:01:36.393

[我在另一篇文章](https://stackoverflow.com/a/10750648/744859)中回答了同样的问题。

如果你有外部参数，那么你就有了相机姿势。使用相机姿势和 2D 点，您可以预测 3D 点（如果您的 2D 点和外在参数正确，则每个相机的结果应该相同）。您只需要将姿势转换为单应性。我在我链接的帖子中解释了它。

祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T22:18:06.567

我不知道 opencv 是否有这个结构。但是我知道您可以使用正弦定律的角度-侧角来构建与相机水平平行的线性距离，使用点->相机->其他相机的内角作为参考点。

然后，一旦获得距离，就可以使用相同的构造计算垂直定位：从死点到点上方或下方多远的角度是相对于任一相机而言的，到第一个找到的对象的距离步骤，您可以使用 90 度作为该假想点（与相机水平的物体上方）和物体之间的角度。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-15T22:17:33.290

当您没有从两个角度进行三角剖分的经验时，您应该阅读[Hartley 的书和​​ Zisserman 的书](http://www.robots.ox.ac.uk/~vgg/hzbook/)。在本书中，描述了一种线性三角测量方法，该方法非常容易实现，具有二维点对应、相机位姿和相机校准。

[此处](http://www.morethantechnical.com/2012/01/04/simple-triangulation-with-opencv-from-harley-zisserman-w-code/)给出了此方法的示例代码。它是基于上面提到的书。

然而，必须满足一些非常重要的条件。首先，测量点的对应关系必须相对于极线约束是正确的`x*E*x' = 0`。其次，射线之间的角度应该大于几度，例如2度。

# java - JPA - 休眠多对多关系保存

> ID：10744672
> 
> 赞同：0
> 
> 时间：2012-05-24T20:16:27.473
> 
> 标签：java, spring, hibernate, jpa

嘿，我一直在互联网上搜索以下问题，但没有成功...

嗯...我正在测试 Hibernate 和 JPA 注释，我已经开发了一个常见的用户案例 ManyToMany 关系。我尝试使用现有组保存新用户，并且测试用例引发异常，请参阅下面的测试代码和异常*：

PD。查看查询在这种情况下的奇怪行为是，它假定此测试中的逻辑路径第一种方法查找持久组，并且由于它们退出已经将新用户记录保存在其表中并将新记录插入链接表中..但就像Hibernate假设组是新记录并尝试将它们插入组表中，当然这会引发重复异常......但我还没有弄清楚......

我能做些什么？我在这里做错了什么？

提前致谢。

```
@Test
    public void guardarUsuario(){
        assertThat(servicio, is(notNullValue()));
        Usuario u = new Usuario();
        u.setNombre("Elsy");
        u.setApellido("Cadenas");
        u.setCedula("4375792");     

        List<Grupo> grupos = servicio.buscarGrupos();

        u.getGrupos().addAll(grupos);

        servicio.guardarUsuario(u);

    }

Hibernate: select grupo0_.nombre as nombre1_, grupo0_.descripcion as descripc2_1_ from public.grupo grupo0_
Hibernate: select usuarios0_.idgrupo as idgrupo1_1_, usuarios0_.idusuario as idusuario1_, usuario1_.cedula as cedula0_0_, usuario1_.apellido as apellido0_0_, usuario1_.nombre as nombre0_0_, usuario1_.version as version0_0_ from usuario_grupo usuarios0_ inner join public.usuario usuario1_ on usuarios0_.idusuario=usuario1_.cedula where usuarios0_.idgrupo=?
Hibernate: select usuarios0_.idgrupo as idgrupo1_1_, usuarios0_.idusuario as idusuario1_, usuario1_.cedula as cedula0_0_, usuario1_.apellido as apellido0_0_, usuario1_.nombre as nombre0_0_, usuario1_.version as version0_0_ from usuario_grupo usuarios0_ inner join public.usuario usuario1_ on usuarios0_.idusuario=usuario1_.cedula where usuarios0_.idgrupo=?
Hibernate: select usuario0_.cedula as cedula0_0_, usuario0_.apellido as apellido0_0_, usuario0_.nombre as nombre0_0_, usuario0_.version as version0_0_ from public.usuario usuario0_ where usuario0_.cedula=?
Hibernate: insert into public.usuario (apellido, nombre, version, cedula) values (?, ?, ?, ?)
Hibernate: insert into public.grupo (descripcion, nombre) values (?, ?)
Hibernate: insert into public.grupo (descripcion, nombre) values (?, ?)
2469 [main] WARN  org.hibernate.util.JDBCExceptionReporter  - SQL Error: 0, SQLState: 23505
2469 [main] ERROR org.hibernate.util.JDBCExceptionReporter  - Batch entry 0 insert into public.grupo (descripcion, nombre) values ('usuarios', 'USUARIO') was aborted.  Call getNextException to see the cause.
2469 [main] WARN  org.hibernate.util.JDBCExceptionReporter  - SQL Error: 0, SQLState: 23505
2469 [main] ERROR org.hibernate.util.JDBCExceptionReporter  - ERROR: duplicate key value violates unique constraint "pk_grupo" 
```

用户类

```
@Entity()
@Table(name = "usuario", schema = "public")
@NamedQuery(name = "Usuario.findByCedula", query = "select u from Usuario u where u.cedula = :cedula")
public class Usuario implements Serializable {

    /**
     * 
     */
    private static final long serialVersionUID = 1L;
    private String nombre;
    private String apellido;
    @Id
    @Column(length = 8)
    private String cedula;
    @Version
    private Integer version;
    @JoinTable(name = "usuario_grupo", joinColumns = { @JoinColumn(name = "idusuario", referencedColumnName = "cedula") }, inverseJoinColumns = { @JoinColumn(name = "idgrupo", referencedColumnName = "nombre") })
    @ManyToMany(cascade =  { CascadeType.PERSIST }, fetch = FetchType.LAZY)
    private Set<Grupo> grupos = new HashSet<Grupo>();

    Constructors... Getters and setters...

    @Override
    public int hashCode() {
        final int prime = 31;
        int result = 1;
        result = prime * result + ((cedula == null) ? 0 : cedula.hashCode());
        return result;
    }

    @Override
    public boolean equals(Object obj) {
        if (this == obj)
            return true;
        if (obj == null)
            return false;
        if (getClass() != obj.getClass())
            return false;
        Usuario other = (Usuario) obj;
        if (cedula == null) {
            if (other.cedula != null)
                return false;
        } else if (!cedula.equals(other.cedula))
            return false;
        return true;
    }

    public void addGrupo(Grupo g) {
        if (!getGrupos().contains(g)) {
            getGrupos().add(g);
        }
        if (!g.getUsuarios().contains(this)) {
            g.getUsuarios().add(this);
        }
    } 
```

组类

```
@Entity
@Table(name="grupo", schema="public")
public class Grupo implements Serializable{

    private static final long serialVersionUID = 1L;
    @Id
    private String nombre;
    private String descripcion;
    @JoinTable(name="usuario_grupo", joinColumns={@JoinColumn(name="idgrupo")}, inverseJoinColumns=@JoinColumn(name="idusuario"))
    @ManyToMany(cascade={CascadeType.PERSIST}, fetch=FetchType.EAGER)
    private Set<Usuario> usuarios = new HashSet<Usuario>(); 

    Constructors... Getters and Setters...

    @Override
    public int hashCode() {
        final int prime = 31;
        int result = 1;
        result = prime * result
                + ((descripcion == null) ? 0 : descripcion.hashCode());
        result = prime * result + ((nombre == null) ? 0 : nombre.hashCode());
        return result;
    }

    @Override
    public boolean equals(Object obj) {
        if (this == obj)
            return true;
        if (obj == null)
            return false;
        if (getClass() != obj.getClass())
            return false;
        Grupo other = (Grupo) obj;
        if (descripcion == null) {
            if (other.descripcion != null)
                return false;
        } else if (!descripcion.equals(other.descripcion))
            return false;
        if (nombre == null) {
            if (other.nombre != null)
                return false;
        } else if (!nombre.equals(other.nombre))
            return false;
        return true;
    }
} 
```

SQL：

```
USER Table

-- Table: usuario

-- DROP TABLE usuario;

CREATE TABLE usuario
(
  nombre character varying(50),
  apellido character varying(50),
  cedula character varying(8) NOT NULL,
  "version" integer,
  CONSTRAINT pk_usuario PRIMARY KEY (cedula)
)
WITH (
  OIDS=FALSE
);
ALTER TABLE usuario OWNER TO postgres; 
```

组表

```
-- Table: grupo

-- DROP TABLE grupo;

CREATE TABLE grupo
(
  nombre character varying(20) NOT NULL,
  descripcion character varying(50),
  CONSTRAINT pk_grupo PRIMARY KEY (nombre)
)
WITH (
  OIDS=FALSE
);
ALTER TABLE grupo OWNER TO postgres; 
```

链接表

```
-- Table: usuario_grupo

-- DROP TABLE usuario_grupo;

CREATE TABLE usuario_grupo
(
  idusuario character varying(8) NOT NULL,
  idgrupo character varying(20) NOT NULL,
  CONSTRAINT pk_id_grupo PRIMARY KEY (idusuario, idgrupo),
  CONSTRAINT fk_miembro_grupo FOREIGN KEY (idgrupo)
      REFERENCES grupo (nombre) MATCH SIMPLE
      ON UPDATE NO ACTION ON DELETE NO ACTION,
  CONSTRAINT fk_miembro_usuario FOREIGN KEY (idusuario)
      REFERENCES usuario (cedula) MATCH SIMPLE
      ON UPDATE NO ACTION ON DELETE NO ACTION
)
WITH (
  OIDS=FALSE
);
ALTER TABLE usuario_grupo OWNER TO postgres; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T20:53:13.010

我认为您在 Usuario 和 Grupo 之间的多对多关系可能是已经在 Grupo 表上持久存在的值。当它说它的 PK 的唯一约束被打破时，这个例外是非常自我描述的。

不要级联持久化操作，你应该没问题。

# java - 从 JSP Scriptlet 迁移到 Servlet

> ID：10744680
> 
> 赞同：0
> 
> 时间：2012-05-24T20:16:53.423
> 
> 标签：java, mysql, database, jsp, servlets

所以我正在尝试用数据库和图表做一些基本的事情。我已经让我的 JSP 代码工作了，但我想将它移到 servlet/其他资源，因为我听说在 jsp 中做所有事情是一个非常糟糕的主意。我对 servlet 进行了一些研究，但我对它们如何工作/与 jsps 和其他文件链接感到非常困惑。

我知道我想要将 d3.js 代码保留在 .jsp 中（可能），但我主要关心数据库连接代码。

这是我的 JSP：

```
 <%@ page language="java" import="java.sql.*, java.util.*"%>

<html>
    <head>
        <title>D3 Test</title>
        <script type="text/javascript" src="d3/d3.v2.js"></script>
        <style type="text/css">
        </style>
    </head>
    <body>

    <%
    Class.forName("com.mysql.jdbc.Driver");

Connection con=null;
ResultSet rst=null;
Statement stmt=null;
try{
String url="jdbc:mysql://localhost:3306/testdb?user=root&password=password";

int i=1;
con=DriverManager.getConnection(url);
stmt=con.createStatement();
rst=stmt.executeQuery("select * from test ");

%>
        <script type="text/javascript">

            var dataset = [ 
    <% while (rst !=null && rst.next()) { %>
       <%=rst.getInt("ID")%>, 
    <% }%>
    ]; 

            var w = 500;
            var h = 340;
            var barPadding = 1;
            /*var xScale = d3.scale.linear()
                                 .domain([0, d3.max(dataset, function(d) { return d[0]; })])
                                 .range([padding, w - padding * 2]);

            var yScale = d3.scale.linear()
                                 .domain([0, d3.max(dataset, function(d) { return d[1]; })])
                                 .range([h - padding, padding]);*/
            var svg = d3.select("body")
                        .append("svg")
                        .attr("width", w)
                        .attr("height", h);
            svg.selectAll("rect")
                .data(dataset)
                .enter()
                .append("rect")
                .attr("id", "rect1")
                .attr("x", function(d, i) {
                        return i * (w / dataset.length);
                    })
                .attr("y", function(d) {
                    return h - d*4;
                })
                .attr("width", w/ dataset.length - barPadding)
                .attr("height", function(d) {
                    return d * 4;
                })
                .attr("fill", function(d) {
                    return "rgb(0, 0, " + (d * 10) + ")";
                });

            svg.selectAll("text")
                .data(dataset)
                .enter()
                .append("text")
                .text(function(d) { 
                    return d;
                })
                .attr("x", function(d, i) {
                    return i * (w / dataset.length)+ (75 / dataset.length);
                })
                .attr("y", function(d) { 
                    return h - (d * 4) + 15;
                })
                .attr("font-family", "sans-serif")
                .attr("font-size", "11px")
                .attr("fill", "white");
                <%   
    } finally {
        if (stmt != null) { stmt.close(); }
    }%>
        </script>

    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T20:28:56.080

绝对使用多层来构建一个 Web 应用程序有很大的好处。以下响应将非常有用：

*   [如何避免 JSP 文件中的 Java 代码？](https://stackoverflow.com/a/3180202/870248)
*   [使用 MVC 和 JDBC 的 JSP](https://stackoverflow.com/a/5003701/870248)
*   [设计模式基于 Web 的应用程序](https://stackoverflow.com/a/3542297/870248)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T20:39:45.840

JSP 如何与 servlet 通信？当然，通过发出 HTTP`<form>`请求或 AJAX 调用。

您的直觉是好的：JSP 中的 scriptlet 代码是一个非常糟糕的主意。

您无需直接跳入框架泥潭。在没有框架的情况下忍受痛苦甚至可能是有价值的。下次你会再欣赏一个。

找出您需要传递给 servlet 以执行查询的内容。通过 POST`<form>`到 servlet URL 来做到这一点。servlet 将获取请求参数名称/值对，将它们绑定到查询，将 ResultSet 映射到对象或集合，并将其添加到页面、请求或会话范围以进行呈现。它还会说明要显示的下一页应该是什么。

十分简单。祝你好运。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T20:40:06.487

我在这里有一个简单的例子：[在 JSP MVC 设计中是否可以在页面加载时自动调用命令？](https://stackoverflow.com/questions/10049019/in-a-jsp-mvc-design-is-it-possible-to-automatically-invoke-a-command-upon-page-l/10050526#10050526)

看待它的方法是将 JSP 文件简单地视为页面外观的模板。无论您在哪里有动态的东西，从页面视图到页面视图的变化，您都可以放置占位符。然后，在您的 servlet 中填充这些占位符。一旦它们被填充，您将转发到 JSP，JSP 接受这些值并将它们放在页面中的适当位置。

阅读 JSTL 和 JSP 表达式语言。

# spotify - 是否可以将新曲目添加到 Spotify 中的播放列表中？

> ID：10744682
> 
> 赞同：0
> 
> 时间：2012-05-24T20:16:57.713
> 
> 标签：spotify

我试图尽可能多地了解 libspotify 示例的功能。但我不知道曲目/播放列表是如何同步的。

我使用“点唱机”示例播放包含 5 首曲目的播放列表。同时，我使用“spshell”示例将新曲目添加到播放列表中，其索引与当前播放曲目不同。“spshell”表示曲目添加成功。但是“点唱机”即使在重新启动后也不会播放新曲目。我错过了什么？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T20:55:35.587

有时可能需要一段时间才能将播放列表同步到后端。调试此问题的一个好方法是在您使用 spshell 的同时在 Spotify 客户端中打开播放列表 - 您可以使用相同帐户从任意多个位置登录 Spotify - 仅播放仅限于一个应用程序一次。

如果 spshell 在下次启动时没有在播放列表中拾取新曲目，请在查看/播放曲目之前等待一段时间以与播放列表服务同步。

播放列表同步通常非常快，但有时播放列表系统会承受重负载，可能需要一段时间。

# python - fr-ca、es-us 的 Django 国际化问题

> ID：10744684
> 
> 赞同：2
> 
> 时间：2012-05-24T20:17:06.140
> 
> 标签：python, django, internationalization

致力于国际化，*主要是现在的 url*，一个网站和一切似乎都在工作，除了加拿大法语 (fr-ca) 和美国西班牙语 (es-us)。

我正在使用 Django 1.4

`settings.py`已`django.middleware.locale.LocaleMiddleware`作为已安装的中间件

我的语言列表是：

```
ugettext = lambda s: s
LANGUAGES = (
    ('en',    ugettext('English')),
    ('en-gb', ugettext('English United Kingdom')),
    ('es',    ugettext('Spanish')),
    ('es-us', ugettext('Spanish United States')),
    ('fr',    ugettext('French')),
    ('fr-ca', ugettext('French Canada')),
) 
```

网址.py：

```
from django.conf.urls.defaults import patterns, include
from django.conf.urls.i18n import i18n_patterns

urlpatterns = patterns('myapp',
    (r'^example/?$',            'main.views.example'),
    (r'^$',                     'main.views.index'),

    (r'',                       include('myapp.main.urls')),
)

urlpatterns += i18n_patterns('myapp.main.views',  
    (r'^example/?$',            'example'),
    (r'^example_1/?$',          'example1'),
    (r'^example_2/?$',          'example2'),
    (r'^$',                     'index'),
) 
```

我跑了

```
# django-admin.py makemessages -l en
# django-admin.py makemessages -l en-GB
# django-admin.py makemessages -l fr
# django-admin.py makemessages -l fr_CA
# django-admin.py makemessages -l es
# django-admin.py makemessages -l es_US
#
# django-admin.py compilemessages 
```

这就是我得到的：

```
|  Accept-Language Header              | Response Language  | Expected Language  |
|--------------------------------------|--------------------|--------------------|
|  fr-ca;q=0.9, fr;q=0.8               |       fr           |       fr-ca        |
|  fr-ca;q=0.9                         |       fr           |       fr-ca        |
|                                      |                    |                    |
|  es-us;q=0.9, es-mx;q=0.8, es;q=0.7  |       es           |       es-us        |
|  es-us;q=0.9                         |       es           |       es-us        |
|                                      |                    |                    |
|  en-gb;q=0.8, en-us;q=0.7, en;q=0.6  |       en-gb        |       en-gb        |
|  en-us;q=0.9                         |       en           |       en           |
|                                      |                    |                    |
|  fr-ca;q=0.8, en-gb;q=0.7            |       fr           |       fr-ca        |
|  fr-ca;q=0.7, en-gb;q=0.8            |       en-gb        |       en-gb        |
|--------------------------------------|--------------------|--------------------| 
```

如果我将语言环境代码放在 URL 中，那么我会得到正确的语言环境响应：

```
http://localhost:8000/fr-ca/       I get fr-ca text back
http://localhost:8000/fr/          I get fr text back
http://localhost:8000/en/          I get en text back
http://localhost:8000/en-gb/       I get en-gb text back
http://localhost:8000/es-us/       I get es-us text back
http://localhost:8000/es/          I get es text back
http://localhost:8000/             I get en text back _(Default in settings.py)_ 
```

en-gb 按预期工作，并在最后一个请求中返回，而不是更高优先级的 fr-ca。

我只是错过了什么，还是 fr-ca/es-us 不能与 Django 一起工作？

* * *

(** 我还发送了默认`django_language`cookie，一切都按预期工作，所以看起来我只是在使用`Accept-Language`标头时遇到问题。**)

* * *

**更新**- *@ilvar 已经提供了简短而甜蜜的答案*

好吧，我终于深入研究了 Django 源代码*（因为它非常开源，而且全部）*

该文件`[django/utils/translation/trans_real.py][1]`是我找到并验证答案的地方。

这是函数的片段`get_language_from_request`，第 350 行：

```
...
for path in all_locale_paths():
    if os.path.exists(os.path.join(path, dirname, 'LC_MESSAGES', 'django.mo')):
        _accepted[normalized] = lang
        return lang  
... 
```

`path`设置为`conf/locale`Django 安装的目录（*在站点包中）*，`dirname`在我的例子中是请求中的语言环境名称`fr-ca`。因此，如果 Django 安装不包含请求中的语言环境（它`fr-ca`没有`fr`.

如果您使用 i18n 路由，则首先在 URL 中检查语言，然后在语言 cookie 中检查语言。如果它存在于任何一个中，则立即返回该语言代码，因此该语言是否在 Django 安装中不存在无关紧要。

对 2/3 场景进行不同的处理是让我失望的原因，但这是有道理的，因为浏览器可以发送任何内容，但是如果您设置了 cookie|url，那么此时就是您的问题了。

感谢@ilvar 的回答，尽管我对此提出了质疑；）
**我所做的只是在 Django 的语言环境中复制`fr`to `fr_CA`，然后瞧……**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-25T05:48:41.613

Django[仅完全支持](https://docs.djangoproject.com/en/1.4/topics/i18n/translation/#localization-how-to-create-language-files)它[附带的](https://github.com/django/django/tree/master/django/conf/locale)语言环境。但是您可以在 Django 的库路径中手动添加必要的语言环境（例如，从`es`或复制它们）。`fr`

# jquery - 将 jqGrid 行数据从视图提交到控制器 - 什么方法？

> ID：10744694
> 
> 赞同：4
> 
> 时间：2012-05-24T20:18:30.900
> 
> 标签：jquery, asp.net-mvc, json, jqgrid, asp.net-mvc-4

我一直在使用[这个问题的一般想法和](https://stackoverflow.com/questions/3356805/how-do-i-submit-jqgrid-values-as-formfields)[jqGrid Wiki](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:methods)上的评论中的一些代码，将jqGrid 中的所有行提交到一个操作方法。本质上，在提交时，我希望所有行数据都返回到控制器，以便我可以持久保存它。我尝试使用隐藏字段来存储所有行数据，但控制器似乎从来没有得到所有东西，只有网格中最后一个编辑的单元格。所以我改用 ajax 方法，但无论我尝试了什么，我都无法让 ajax`POST`以 JSON 的形式出现。这是我现在拥有的：

```
$("#submitButton").click(function () {
    $("#awesomeGrid").jqGrid('resetSelection');
    var gridRows = $("#awesomeGrid").jqGrid('getRowData');
    var rowData = new Array();
    for (var i = 0; i < gridRows.length; i++) {
        var row = gridRows[i];
        rowData.push($.param(row));
    }
    var dataToSend = JSON.stringify(rowData);
    $.ajax({
        url: '@Url.Action("UpdateAwesomeGridData")',
        type: 'POST',
        data: { gridData: dataToSend },
        dataType: 'json',
        success: function (result) {
            alert('success');
        }
    });
    return true;
}); 
```

我的控制器方法签名：

```
[HttpPost]
public ActionResult UpdateAwesomeGridData(string gridData) 
```

我尝试将`gridData`参数从`string`to`string[]`更改`object[]`为各种东西，但似乎没有任何效果。如果我将其保留为`string`，我会得到数据，但格式很古怪，就像这样（替换了列名）：

`gridData=["Id=1&Field1=1945&Field2=0&Field3=0&Field4=1&Field5=Some+string+value&Field6=&Field7=&Field8=&Field9s=","Id=2&Field1=1945&Field2=0&Field3=0&Field4=2&Field5=Another+string+value&Field6=&Field7=&Field8=&Field9s=","Id=3&Field1=1945&Field2=0&Field3=0&Field4=3&Field5=Yet+another+string&Field6=&Field7=&Field8=&Field9s=","Id=4&Field1=1945&Field2=0&Field3=0&Field4=4&Field5=Final+string&Field6=&Field7=&Field8=&Field9s="]`

我从 Fiddler 那里得到了这个，为了记录，当我摆弄它时，JSON 选项卡没有显示任何请求。有没有办法可以 JSON 化这个数组并在一次调用中发送它？我的操作方法上的参数是什么类型？

**编辑 - 解决方案**

对于其他像我一样愚蠢的人，这是我如何让它工作的：

首先，根据 Oleg 的建议，我添加`loadonce: true`了 jqGrid 定义。然后，将我的提交按钮功能更改如下：

```
$("#submitButton").click(function () {
    var griddata = $("#awesomeGrid").jqGrid('getGridParam', 'data');
    var dataToSend = JSON.stringify(griddata);
    $.ajax({
        url: '@Url.Action("UpdateAwesomeGridData")',
        type: 'POST',
        contentType: 'application/json; charset=utf-8',
        data: dataToSend,
        dataType: 'json',
        success: function (result) {
            alert('success: ' + result.result);
        }
    });
    return true;
}); 
```

然后，更改了我的控制器方法签名：

```
public ActionResult UpdateAwesomeGridData(IEnumerable<GridBoundViewModel> gridData) 
```

希望这对将来的某人有所帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-24T21:03:54.387

我看到你有很多问题。

第一个问题是您使用编码（???!!!）数据`$.param(row)`填充数组。`rowData`我认为正确的代码应该包含从`getRowData`:返回的数据的直接发布`data: { gridData: gridRows }`。在服务器端，您可以使用`UpdateAwesomeGridData(string gridData)`然后转换`gridData`为`List<List<string>>`例如

```
JavaScriptSerializer serializer = new JavaScriptSerializer();
var myListOfData = serializer.Deserialize<List<List<string>>>(gridData); 
```

我想退一步问一个问题：为什么需要将数据发送到它已经拥有的服务器？如果出于某种目的需要网格中的所有数据，您可以使用生成数据的控制器的相同操作，因此您将在服务器上拥有**相同的数据。**

仅在一种情况下需要将数据发送到服务器：您在*本地*`loadonce: true`使用、修改了数据，并且在修改结束时您需要将所有更改的数据发送到服务器。在这种情况下，使用不是最好的选择，因为它只*从当前页面*获取数据。要获得所有数据，您最好使用.*`getRowData`*`getGridParam("data")`**

 *** * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-11T16:52:22.517

我看到奥列格已经回答了你的问题，我无意覆盖它，但我想在这里分享我的想法。我认为将数据作为对象传递给 MVC 控制器比字符串更有意义，然后你可以将该对象传递给你的 DAO 类。

这是我的 jQuery 代码（显然感谢 Oleg 的代码）。

```
 var ruledetail = new Array();
        var grid = $('#RuleCriteria')[0], rows = grid.rows,
                    cRows = rows.length, iRow, iCol;

        var fromvalue;

        for (iRow = 0; iRow < cRows; iRow++) {
            row = rows[iRow]; // row.id is the rowid
            if ($(row).hasClass("jqgrow")) {
                cellsOfRow = row.cells;

                //build rule detail data
                ruledetail.push({
                    ColumnName: jQuery('#RuleCriteria').jqGrid('getCell', row.id, 'ColumnName'), 
                    ColumnOperator: jQuery('#RuleCriteria').jqGrid('getCell', row.id, 'ColumnOperator'),
                    FromValue: fromvalue,
                    ToValue: $(cellsOfRow[4]).text(),
                    Connector: jQuery('#RuleCriteria').jqGrid('getCell', row.id, 'Connector')
                });

            }
        }

        var ruledata = JSON.stringify({ 'detaildata': ruledetail });

        $.ajax({
            url: "@Url.Action("CreateRules", "Admin")",
            data: ruledata,
            type: "POST",
            dataType: "json",
            contentType: "application/json; charset=utf-8",
            success: function () {
                $(".Message").displayMessage("@Msg.Success");
                setTimeout(function () { location.href = "@Url.Action("Rule", AppType)"; }, 1000);
                },
            error: function () {
                $(".Message").displayError("@Msg.GeneralError");
                }
        }); 
```

这是我的 MVC 代码。

```
 [HttpPost]
    public ActionResult CreateRules(List<RuleData> detaildata)
    {

       RuleManager _savedata = new RuleManager();
       _savedata.Save(detaildata);
        var jsonData = "success";
        return Json(jsonData, JsonRequestBehavior.AllowGet);

    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-03T13:03:31.647

从 Jsp 页面发送的代码：

```
 $.ajax({
                    type: "POST",
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    url: "LoadDataservice.asmx/SaveData",
                    async: true,
                    data: '{"formData":"' + $('#check-user').serialize() + '"}',  // working
                    dataType: "json",
                    success: function (msg) {
                        $('#details').empty();
                        jsonArray = $.parseJSON(msg.d);
                        var $ul = $('<ul id="details">');
                        for (i = 0; i < jsonArray.length; i++) {
                            $("#details").append('<li id="' + i + '" name="head" >' + jsonArray[i].name + '</li>');
                        }
                        $('#details').listview('refresh');
                    },
                    error: function (msg) {
                        alert("Error");
                    }
                }); 
```

动作类：

```
 public string SaveData(string formData)
        {

            string s = formData;
            var keyValuePairs = from array in
                                    (from kvpString in s.Split('&')
                                     select kvpString.Split('='))
                                select new KeyValuePair<string, string>(array[0].Trim(), array[1].Trim());
            var dictionary = keyValuePairs.ToDictionary(kvp => kvp.Key, kvp => kvp.Value);
            var username = dictionary["username"];
            var password = dictionary["password"];

            string details = "testing";

            return details;
        }
    } 
```**

# grails - 在 Intellij 中设置 grails 项目

> ID：10744703
> 
> 赞同：10
> 
> 时间：2012-05-24T20:19:18.527
> 
> 标签：grails, intellij-idea

我正在尝试将现有的 grails 项目导入 Intellij，但它无法识别 SDK。

我已经在我的主目录 /.bash_profile 中设置了我的路径，这就是我要去的地方。

```
export GRAILS_HOME=/Applications/grails-2.0.4
export PATH=$PATH:$GRAILS_HOME/bin 
```

现在，当我启动 Intellij 并执行文件 > 新项目 > 从现有源创建项目时，我命名我的项目，然后当我进入 SDK 时，没有 grails SDK。我假设当我在 .bash_profile 中设置路径时，它会识别到 grails SDK 的路径。

对此的任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-25T03:34:54.123

检查是否安装了 Grails 插件。

转到项目，右键单击您的**项目名称 > Grails > 配置 Grails SDK**。

从那里创建 SDK ...

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-20T05:44:22.957

如果您使用**Intellij 的 Ultimate 或 Community 版本，**我在这里没有看到的问题是？因为不可能让 Grails 在 Intellij 的社区版本中运行 - 该插件仅在 Ultimate 版本中可用......

除此之外，我自己也遇到了问题，当我想选择 SDK（在 Intellij Ultimate 12.0 版本中）时，我找不到可供选择的 Grails SDK，但它就在那里，它只是很好地隐藏了自己；） *在您可以选择您的 SDK 的页面上，您必须选择`Groovy` *AND* `Spring`并且瞧：您会看到您的SDK 已准备好被选择（如果您已安装它，`Grails`甚至是一个SDK）。*`Griffon`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T22:52:49.907

加载项目后，在事件日志中，您应该会看到一条消息：

未找到 Grails SDK。：模块“moduleNameHere”没有 Grails SDK。配置 SDK

单击配置 SDK 会打开一个对话框。如果没有可用选项，请单击创建，然后导航到设置 Grails 的位置（我自己的位置是 /opt/grails-2.2.0）。在那里导航似乎足以满足 SDK 要求。我选择了那个文件夹，其余的由 IJ 完成。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-25T16:02:08.260

intellij 不会选择 grails 的路径设置。您需要在 intellij 中指定它。这使您可以选择为不同或相同的项目使用不同版本的 grails。

打开项目设置，有一个添加新 SDK 的选项，选择 Grails 安装的主路径，它将自动配置为全局库，并且该库将作为依赖项添加到您的模块中。

这也应该有帮助 [IntelliJ 11 - 未配置 Grails SDK](https://stackoverflow.com/questions/8887932/intellij-11-grails-sdk-is-not-configured)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-01-04T02:30:20.660

这将是使用 Homebrew 安装时 Grails SDK 的常用路径。用你机器里的东西改变 and

/Users//.sdkman/candidates/grails/

例如：- /Users/tom/.sdkman/candidates/grails/2.4.3

# scala - Play 2.0 Framework (scala) 中的异步结果

> ID：10744705
> 
> 赞同：3
> 
> 时间：2012-05-24T20:19:19.157
> 
> 标签：scala, asynchronous, playframework, playframework-2.0

阅读文档 Play 声明：

[http://www.playframework.org/documentation/2.0/ScalaAsync](http://www.playframework.org/documentation/2.0/ScalaAsync)

“由于 Play 2.0 的工作方式，动作代码必须尽可能快（即非阻塞）。”

然后继续展示如何编写异步结果。有人可以扩展为什么“动作代码必须尽可能快”吗？更改为异步结果如何影响在较低级别处理请求的方式？除了抽象之外，还有什么好处？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-24T21:17:13.870

实际上，将异步用于可能很长或本质上异步的调用（调用其他远程 api，如 twitter、db、...）只有客户端会等待，而不是服务器（Play 2.0 的工作方式）

这不会影响它自己的请求将如何被处理，但是整个操作将被执行，因为结果将被承诺为进一步的结果，使用 akka 演员。

最后一点是关键，akka 将尽可能多地重用可用线程，而不是让它们保持休眠状态。

谈论我如何使用异步是在使用 Neo4J REST API 处理持久对象时，因为数据库的这种使用取决于网络、带宽、查询性能……拥有 HA 解决方案可能很麻烦，因为大部分请求等待。在云环境中。将导致您添加流程/实例并最终花费您很多;-)

# javascript - 样式选择框的问题

> ID：10744708
> 
> 赞同：-1
> 
> 时间：2012-05-24T20:19:42.730
> 
> 标签：javascript, css, styling, drop-down-menu

我在这里看到了很多关于这个问题的帖子，但我不能很快把它弄好。

我正在尝试使用自定义图像设置选择框的样式。我设置它的方式是设置`opacity:0;`选择框，在其后面设置一个带有背景图像的 div，并使用 javascript 在 div 中设置当前选定的值。我让它在 Firefox、Chrome 和 Safari 中运行，但在 IE 中没有运气。

示例 1：不透明度 = 0，div 没有背景图像。事件触发，但什么都看不到。

示例 2：不透明度 = 0，div 有我的背景图片。在 Firefox、Chrome 和 Safari 中完美运行，但在 IE 中无法运行。

示例 3：不透明度 = 1，div 没有背景图像。事件不会触发，并且似乎不存在正常的选择行为。

示例 4：不透明度 = 1，div 有我的背景图片。事件不会触发，并且似乎不存在正常的选择行为。

注意：我从示例 3 和 4 中删除了 opacity:1 并且仍然得到相同的行为。我还在选择框上使用 50 的 z-index 并在 div 上使用 0 的 z-index 以确保它们显示在选择的后面。然而，相反的似乎并没有提供不同的行为。

作为记录，我尝试了 .click、.change、.live("click") .live("change") .live("click change")、.on("click")、.on("change" ) .on("click change") 在我的示例 #2 中，就在 4 个浏览器中进行测试而言。我的最终问题是为什么示例 2 在 ie 中不起作用。次要问题是不透明度及其对选择框的影响是什么？我假设一些外观：没有我在那里，但我仍然不明白为什么不透明度对它很重要。如果您需要我发布我可以的实际代码。但是你应该可以通过我提供的测试页面看到 javascript 和 css。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T22:07:54.327

您应该嵌套类似于

```
<div class="styled-dropdown-container">
     <select>...</select>
</div> 
```

然后，您可以`click`在`.styled-dropdown-container`. 事件将从下拉列表中正确传播（冒泡），并且当用户手动关注您的输入时也会模拟（即通过切换到它）

# perl - Perl - 代码增强

> ID：10744711
> 
> 赞同：7
> 
> 时间：2012-05-24T20:19:47.613
> 
> 标签：perl

我刚刚开始使用 Perl 进行编码，我只是想看看下面的代码是否可以变得更有效率或者可以用更少的行来完成。

我已经对[`Win32::OLE`](https://metacpan.org/module/Win32%3a%3aOLE)模块和[`Text::CSV`](https://metacpan.org/module/Text%3a%3aCSV)模块进行了一些研究，但这似乎是我目前所读内容的方式。

这个问题基本上是一个新手问一个长辈：“嘿，我如何成为一个更好的 Perl 程序员？”

该代码的目的是从 Excel 工作簿的指定工作表中的指定范围获取数据，并将这些范围的内容写入 CSV 文件。

另外，我知道我需要执行一般检查，例如确保在将 my`$cellValue`添加到数组之前定义它等，但我正在寻找更多的整体结构。就像有没有办法通过一次将所有整行放入一个数组，或者一个数组或引用中的整个范围，或者类似的东西来使循环变平？

谢谢

```
use strict;
use warnings;
use Spreadsheet::XLSX;

my $excel = Spreadsheet::XLSX -> new ('C:\scott.xlsm',);
my @sheets = qw(Fund_Data GL_Data);

foreach my $sheet (@sheets) {

    my $worksheet = $excel->Worksheet($sheet);
    my $cell = $worksheet->get_cell(25,0);

    if ($cell) { # make sure cell value isn't blank
        my $myFile = "C:/$sheet.csv";
        open NEWFILE, ">$myFile" or die $!;

        # write all cells from Range("A25:[MaxColumn][MaxRow]") to a csv file
        my $maxCol = $worksheet->{MaxCol};
        my $maxRow = $worksheet->{MaxRow};
        my @arrRows;
        my $rowString;

        # loop through each row and column in defined range and string together each row and write to file
        foreach my $row (24 .. $maxRow) {

            foreach my $col (0 .. $maxCol) {

                my $cellValue = $worksheet->{Cells} [$row] [$col]->Value();

                if ($rowString) {
                    $rowString = $rowString . "," . $cellValue;
                } else {
                    $rowString = $cellValue;
                }
            }

            print NEWFILE "$rowString\n";
            undef $rowString;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-24T20:33:27.233

没有理由有那个内部循环：

```
print NEWFILE join(",", map { $worksheet->{Cells}[$row][$_] } 0 .. $maxCol), "\n"; 
```

另外，请确保您的索引正确。我对 Spreadsheet::XLSX 不熟悉，因此请确保 max col & row 与其他代码一样从零开始。如果不是，那么您将需要遍历`0 .. $maxCol-1`.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-24T20:40:30.473

马克的建议是一个很好的建议。另一个小的改进是将“做一堆嵌套逻辑”替换为`if $cell`“不做任何事情`unless $cell`- 这样你的代码可读性更高（删除 1 个额外的缩进/嵌套块；并且不必担心如果$cell 为空。

```
# OLD
foreach my $sheet (@sheets) {
    my $worksheet = $excel->Worksheet($sheet);
    my $cell = $worksheet->get_cell(25,0);

    if ($cell) { # make sure cell value isn't blank
        # All your logic in the if
    }
}

# NEW
foreach my $sheet (@sheets) {
    my $worksheet = $excel->Worksheet($sheet);
    next unless $worksheet->get_cell(25,0); # You don't use $cell, so dropped

    # All your logic that used to be in the if
} 
```

* * *

正如您所指出的，`Text::CSV`这将是一件好事，这取决于您的数据是否需要根据 CSV 标准进行引用（例如，包含空格、逗号、引号等......）。如果可能需要引用，不要重新发明轮子，`Text::CSV`而是用于打印。未经测试的示例将是这样的：

```
# At the start of the script:
use Text::CSV;
my $csv = Text::CSV->new ( { } ); # Add error handler!

    # In the loop, when the file handle $fh is opened
    foreach my $row (24 .. $maxRow) {
        my $cols = [ map { $worksheet->{Cells}[$row][$_] } 0 .. $maxCol) ];
        my $status = $csv->print ($fh, $cols);
        # Error handling
    } 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-24T21:07:57.457

我建议不要对文件名进行硬编码……尤其是在像这样的小型项目中，养成在 via 中传递文件名的习惯`GetOpt::Long`。如果你对所有的小项目都习惯性地这样做，那么当它依赖于一个更大的项目时，更容易记住正确地做这件事。

您的代码结构良好且可读性强，并且您预见到了循环语句的问题，您使用了警告和严格，并且您通常以正确的方式使用库。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-05-25T03:21:31.043

正如其他人所说，您的代码清晰且结构良好。但我认为它可以通过更多的 Perlishness 来改进。

想到以下几点

*   `open`使用词法文件句柄和( `open my $newfile, '>', $myFile`)的三参数形式

*   迭代哈希或数组值（或它们的*切片*）而不是它们的键或索引，除非你真的需要循环体的键

*   如果这是循环的焦点，则提取指向循环内数据子结构的指针 ( `my $rows = $worksheet->{Cells}`)

*   找出您使用循环将一个列表转换为另一个列表的位置，然后`map`改用

`Text::CSV`我希望我没有像您建议的那样使用 using 编写解决方案。幸运的是，这对你很有启发性。

```
use strict;
use warnings;

use Spreadsheet::XLSX;
use Text::CSV;

my $csv = Text::CSV->new;

my $excel = Spreadsheet::XLSX->new('C:\scott.xlsm',);

foreach my $sheet (qw/ Fund_Data  GL_Data /) {

  my $worksheet = $excel->Worksheet($sheet);
  next unless $worksheet->get_cell(25,0);

  my $myFile = "C:\\$sheet.csv";
  open my $newfile, '>', $myFile or die $!;

  my $rows = $worksheet->{Cells};

  # Write all cells from row 25 onwards to the CSV file

  foreach my $row (@{$rows}[24..$#{$rows}]) {
    my @values = map $_ ? $_->Value : '', @$row;
    $csv->print($newfile, \@values);
    print $newfile "\n";
  }
} 
```

# java - 如何使用 org.apache.commons.codec.binary.base64 对 Java 对象进行 Base64 编码？

> ID：10744715
> 
> 赞同：15
> 
> 时间：2012-05-24T20:20:09.733
> 
> 标签：java, serialization, encoding, binary, base64

我一直在尝试进行对象序列化，并对结果进行 Base64 编码。它适用于 Sun 的库：

```
Bean01 bean01 = new Bean01();
bean01.setDefaultValues();
ByteArrayOutputStream baos = new ByteArrayOutputStream();
new ObjectOutputStream( baos ).writeObject( bean01 );
System.out.println(Base64.encode(baos.toByteArray())); 
```

这工作正常。但是，我想使用 org.apache.commons.codec.binary.base64 做同样的事情，但这不会返回相同的字符串：

`System.out.println(org.apache.commons.codec.binary.Base64.encodeBase64(baos.toByteArray()));`

使用 Apache 的编码器实现 byteArray 的正确 Base64 编码的正确方法是什么？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-05-25T01:11:20.287

实际上，`commons-codec`您使用的版本和特定的 Sun 内部版本**确实**给出了相同的结果。我认为您认为他们提供了不同的版本，因为您`toString()`在执行此操作时会隐式调用数组：

```
System.out.println(org.apache.commons.codec.binary.Base64.encodeBase64(baos.toByteArray())); 
```

这绝对不会打印出数组内容。相反，这只会打印出数组引用的地址。

我编写了以下程序来测试编码器。您将从下面的输出中看到给出相同的结果：

```
import java.util.Random;

public class Base64Stuff
{
    public static void main(String[] args) {
        Random random = new Random();
        byte[] randomBytes = new byte[32];
        random.nextBytes(randomBytes);

        String internalVersion = com.sun.org.apache.xerces.internal.impl.dv.util.Base64.encode(randomBytes);
        byte[] apacheBytes =  org.apache.commons.codec.binary.Base64.encodeBase64(randomBytes);
        String fromApacheBytes = new String(apacheBytes);

        System.out.println("Internal length = " + internalVersion.length());
        System.out.println("Apache bytes len= " + fromApacheBytes.length());
        System.out.println("Internal version = |" + internalVersion + "|");
        System.out.println("Apache bytes     = |" + fromApacheBytes + "|");
        System.out.println("internal equal apache bytes?: " + internalVersion.equals(fromApacheBytes));
    }
} 
```

这是运行它的输出：

```
Internal length = 44
Apache bytes len= 44
Internal version = |Kf0JBpbxCfXutxjveYs8CXMsFpQYgkllcHHzJJsz9+g=|
Apache bytes     = |Kf0JBpbxCfXutxjveYs8CXMsFpQYgkllcHHzJJsz9+g=|
internal equal apache bytes?: true 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-24T20:38:15.100

从[commons-codec 主页](http://commons.apache.org/codec/)：

> Codec 的成立是为了将开发工作集中在 Base64 编码器的一个最终实现上。在 Codec 提出提案时，大约有 34 个不同的 Java 类处理 Base64 编码，分布在 Foundation 的 CVS 存储库中。Jakarta Tomcat 项目的开发人员实现了 Base64 编解码器的原始版本，该版本已被 Commons HttpClient 和 Apache XML 项目的 XML-RPC 子项目复制。近一年后，Base64 的两个分叉版本之间出现了明显的分歧。XML-RPC 应用了许多未应用于 Commons HttpClient Base64 的修复和补丁。不同的子项目在符合 RFC 2045 的不同级别上具有不同的实现。

我认为您的问题是合规性的“不同程度”。

我的建议：选择一个 base64 编码器/解码器并坚持下去

# c# - 计算打印的最大字符串长度

> ID：10744720
> 
> 赞同：0
> 
> 时间：2012-05-24T20:20:34.050
> 
> 标签：c#, visual-studio-2010, printing, fonts

我正在尝试计算要打印的字符串的最大长度。我已经通过使用等距字体来做到这一点，但是这些在页面上占据了太多的水平空间。我真的需要每行打印更多字符而不将字体大小减小到几乎不可见的水平，所以我想改用无衬线字体。这是我当前的打印功能：

```
 public static void printPage(ref PrintPageEventArgs e, List<ReportLine> CompanyLetterhead, Queue<ReportLine> reportData)
    {
        int xPosition = e.MarginBounds.X;
        int yPosition = e.MarginBounds.Y;

        int maxCharacters = 0;

        foreach (ReportLine line in CompanyLetterhead)
        {
            maxCharacters = e.MarginBounds.Width / (int)line.selectedFont.Size;

            int position = 0;

            while (line.text.Length - position > maxCharacters)
            {
                e.Graphics.DrawString(line.text.Substring(position, position + maxCharacters), line.selectedFont, Brushes.Black, xPosition, yPosition);
                yPosition += line.selectedFont.Height;
                position += maxCharacters;
            }
            if (line.text.Length - position > 0)
            {
                e.Graphics.DrawString(line.text.Substring(position), line.selectedFont, Brushes.Black, xPosition, yPosition);
                yPosition += line.selectedFont.Height;
            }
        }

        while (reportData.Count > 0 && checkLine(yPosition, e.MarginBounds.Bottom, reportData.Peek().selectedFont.Height))
        {
            ReportLine currentLine = reportData.Peek();

            maxCharacters = e.MarginBounds.Width / (int)currentLine.selectedFont.Size;

            if (currentLine.text.Length > maxCharacters)
            {
                string[] words = currentLine.text.Split(new char[] { ' ' , '\t' });
                string printString = "";

                bool endsInSpace = true;

                foreach (string word in words)
                {
                    if (word.Length + printString.Length < maxCharacters)
                    {
                        if (printString.Length > 0)
                        {
                            printString += " ";
                        }
                        printString += word;
                    }
                    else if (printString.Length == 0)
                    {
                        printString += word.Substring(0, maxCharacters);
                        endsInSpace = false;
                    }
                    else
                    {
                        break;
                    }
                }

                e.Graphics.DrawString(printString, currentLine.selectedFont, Brushes.Black, xPosition, yPosition);
                yPosition += currentLine.selectedFont.Height;
                if (endsInSpace)
                {
                    currentLine.text = currentLine.text.Remove(0, printString.Length + 1);
                }
                else
                {
                    currentLine.text = currentLine.text.Remove(0, printString.Length);
                }
            }
            else
            {
                e.Graphics.DrawString(currentLine.text, currentLine.selectedFont, Brushes.Black, xPosition, yPosition);
                yPosition += currentLine.selectedFont.Height;
                reportData.Dequeue();
            }
        }

        e.HasMorePages = reportData.Count > 0;
    } 
```

该函数使用 ReportLine 类对象，定义如下：

```
public class ReportLine
{
    public string text;
    public Font selectedFont;

    public ReportLine()
    {
        text = "";
        selectedFont = null;
    }

    public ReportLine(string txt, Font font)
    {
        text = txt;
        selectedFont = font;
    }
} 
```

现在，我如何才能使用针对不同字符具有不同宽度的字体进行这项工作？我知道有一个名为 Graphics.MeasureString 的函数，但这只会告诉我所选字体的字符串的总宽度，所以这意味着如果它确实超出了页面的边缘，它只会告诉我如何它会跑多远，而不是跑过多少个字符。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T20:25:54.860

也许您正在寻找[Graphics.MeasureCharacterRanges](http://msdn.microsoft.com/en-us/library/system.drawing.graphics.measurecharacterranges%28v=vs.90%29.aspx)。您可以通过将字符串拆分为单词来确定要传递给该方法的范围。这样你就可以知道每个单词有多宽，可以随意包装。

# sql - 按时间选择前 n 组

> ID：10744726
> 
> 赞同：0
> 
> 时间：2012-05-24T20:21:11.787
> 
> 标签：sql, sql-server-2000

我有这个结果集片段，

```
DateAndTime         Date        Hr  Min Tag Val
11/15/2011 0:00:29  11/15/2011  0   0   47  0.084000006318092
11/15/2011 0:00:59  11/15/2011  0   0   47  0.086000002920628
11/15/2011 0:00:13  11/15/2011  0   0   47  0.084000006318092
11/15/2011 0:00:44  11/15/2011  0   0   47  0.087000004947186
11/15/2011 0:05:06  11/15/2011  0   5   47  0.088500000536442
11/15/2011 0:05:21  11/15/2011  0   5   47  0.084500007331371
11/15/2011 0:05:51  11/15/2011  0   5   47  0.086000002920628
11/15/2011 0:05:36  11/15/2011  0   5   47  0.088000006973743
11/15/2011 0:10:41  11/15/2011  0   10  47  0.086000002920628
11/15/2011 0:10:56  11/15/2011  0   10  47  0.089500002563000
11/15/2011 0:10:09  11/15/2011  0   10  47  0.086500003933907
11/15/2011 0:10:25  11/15/2011  0   10  47  0.089000001549721
11/15/2011 0:15:45  11/15/2011  0   15  47  0.089000001549721
11/15/2011 0:15:14  11/15/2011  0   15  47  0.087500005960465
11/15/2011 0:15:29  11/15/2011  0   15  47  0.089500002563000
11/15/2011 0:20:48  11/15/2011  0   20  47  0.106000006198883
11/15/2011 0:20:03  11/15/2011  0   20  47  0.109500005841255
11/15/2011 0:20:18  11/15/2011  0   20  47  0.104500003159046
11/15/2011 0:20:33  11/15/2011  0   20  47  0.109000004827976 
```

我只想为第 0 分钟、第 5 分钟、第 10 分钟等返回一行

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T20:29:17.950

```
DECLARE @Minutes VARCHAR(1000) 
;WITH MyRecords AS
(
   SELECT TOP 3 Distinct Min FROM TableName
)

SELECT @Minutes = COALESCE(@Minutes + ', ', '') + MINFROM MyRecords 

PRINT @Minutes 
```

结果：0、5、10

如果您需要添加分钟，您可以在@Minutes 之前轻松添加 :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T20:34:53.057

```
SELECT *, 
       id = IDENTITY(INT, 1, 1) 
INTO   #temp 
FROM   MyTable 
ORDER  BY [min] 

SELECT o.* 
FROM   #temp o 
WHERE  o.id = (SELECT Min(id) 
               FROM   #temp t 
               WHERE  t.[Min] = o.[Min]) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T20:36:32.473

在这种情况下，您需要窗口函数，但它们在 SQL Server 2000 中不可用。

这是一个替代方案：

```
select t.*
from t join
     (select date, hour, min, min(datetime) as mindatetime
      from t
      group by date, hour, min
     ) tsum
     on t.datetime = tsum.mindatetime 
```

这假定日期时间字段是唯一的。否则，如果您在列中有 id，则可以使用它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-24T20:44:40.440

我相信以下内容应该适用于所有 RDBMS（但是，我目前无法对其进行测试）：

```
SELECT actual.DateAndTime, actual.Tag, actual.Val
FROM ResultTable actual
LEFT JOIN ResultTable exclude
ON exclude.Date = actual.Date
AND exclude.Hr = actual.Hr
AND exclude.Min = actual.Min
AND exclude.DateAndTime > actual.DateAndTime
WHERE exclude.DateAndTime IS NULL 
```

...这应该让您每分钟获得“最新”行。

# html - 列中的多个 div 框，垂直排序

> ID：10744727
> 
> 赞同：1
> 
> 时间：2012-05-24T20:21:35.433
> 
> 标签：html, css

我改变了 div（元素）的数量并在页面上对它们进行了如下排序：

1 2 3

4 5 6

7 8 9

经过测试，它会更好地使用电话簿样式，如下所示：

1 4 7

2 5 8

3 6 9

有什么简单的/css方法可以做到这一点吗？提前 Tnx

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T20:30:46.863

鉴于您正在寻找 CSS3 解决方案，为什么不简单地使用`column-count`：

```
body {
    -webkit-column-count: 3;
    -o-column-count: 3;
    -moz-column-count: 3;
    -ms-column-count: 3;
    column-count: 3;
}
.box {
    width: 4em;
    height: 4em;
    line-height: 4em;
    counter-increment: box;
} 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/sD9js/)。

参考：

*   [`column-count`](http://www.w3.org/TR/css3-multicol/#cc).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T20:28:04.673

您可以尝试使用 jquery columnizer 插件。我已经多次成功使用 jquery.columnizer：[http ://welcome.totheinter.net/columnizer-jquery-plugin/](http://welcome.totheinter.net/columnizer-jquery-plugin/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T20:26:37.603

您可以在 css 中使用网格布局对它们进行排序，并让它们浮动，使用类似其中的一种来生成它[http://www.webdesignbooth.com/15-extremely-useful-css-grid-layout-generator-为网页设计师/](http://www.webdesignbooth.com/15-extremely-useful-css-grid-layout-generator-for-web-designers/)。或者你可以修复他们所有的位置，这将是一种更暴力的方式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-24T20:39:10.683

你可以尝试做这样的事情 - [http://jsfiddle.net/HKxUf/](http://jsfiddle.net/HKxUf/)

创建由具有 col 类的 div 组成的三列。在这些地方放置适当的 div。

# dapper - Dapper MultiMap 不适用于具有 NULL 值的 splitOn

> ID：10744728
> 
> 赞同：20
> 
> 时间：2012-05-24T20:21:49.633
> 
> 标签：dapper

我在 dapper 中尝试拆分包含`NULL`. Dapper 似乎没有实例化对象，我的映射函数接收`null`而不是对象。

这是我的新测试：

```
 class Product
    {
        public int Id { get; set; }
        public string Name { get; set; }
        public Category Category { get; set; }
    }
    class Category
    {
        public int Id { get; set; }
        public string Name { get; set; }
        public string Description { get; set; }
    }
    public void TestMultiMapWithSplitWithNullValue()
    {
        var sql = @"select 1 as id, 'abc' as name, NULL as description, 'def' as name";
        var product = connection.Query<Product, Category, Product>(sql, (prod, cat) =>
        {
            prod.Category = cat;
            return prod;
        }, splitOn: "description").First();
        // assertions
        product.Id.IsEqualTo(1);
        product.Name.IsEqualTo("abc");
        product.Category.IsNotNull();
        product.Category.Id.IsEqualTo(0);
        product.Category.Name.IsEqualTo("def");
        product.Category.Description.IsNull();
    } 
```

**失败的行是由于传递给映射函数`product.Category.IsNotNull();`的事实是.`cat``null`**

我还在 Assert 类中添加了这个方法：

```
public static void IsNotNull(this object obj)
{
    if (obj == null)
    {
        throw new ApplicationException("Expected not null");
    }
} 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-05-29T00:04:04.737

这是“设计使然”，尽管我可以重新审视它。

特别是这种行为有助于左连接。以此为例：

```
cnn.Query<Car,Driver>("select * from Cars c left join Drivers on c.Id = CarId",
   (c,d) => {c.Driver = d; return c;}) 
```

麻烦的是，如果我们允许“一揽子”创建一个`Driver`对象，那么每个对象都会`Car`有一个`Driver`偶数连接失败的对象。

为了解决这个问题，我们可以扫描整个被拆分的段，并确保所有值都`NULL`在映射`NULL`对象之前。这将对多映射器产生非常小的性能影响。

要解决您的情况，您可以插入一个代理列：

```
var sql = @"select 1 as id, 'abc' as name, '' as split, 
            NULL as description, 'def' as name";
    var product = connection.Query<Product, Category, Product>(sql, (prod, cat) =>
    {
        prod.Category = cat;
        return prod;
    }, splitOn: "split").First(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-02-12T10:45:52.297

对于所有想要可视化的人：

Dapper 按最后一个相等的列名拆分：

[![在此处输入图像描述](../Images/ccc9b33e5788865672a1e5bd4e937fc6.png)](https://i.stack.imgur.com/rn8qt.jpg)

让我们交换列的位置：

[![在此处输入图像描述](../Images/f7abb341f7d124d1bfc6f0bd5382979a.png)](https://i.stack.imgur.com/2tPyH.jpg)

空问题：

[![在此处输入图像描述](../Images/bfb0f5d50135f6bfd40bc5cd883a3df0.png)](https://i.stack.imgur.com/SsWwG.jpg)

交换列 null ：

[![在此处输入图像描述](../Images/31391f095163f4fbeb7f52637eb2dade.png)](https://i.stack.imgur.com/veJCv.jpg)

斯普利顿救援：

[![在此处输入图像描述](../Images/c7ee4b9dcc92a950be5df12e0548c3e2.png)](https://i.stack.imgur.com/rOiQl.jpg)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-09-11T15:53:12.457

我有同样的问题，我不得不选择一个假的“拆分”列来让 Dapper 填充我的对象，而不是仅仅为空它；

我的解决方法：

```
 string req = @"
SELECT
    T1.a as PropA,
    T1.b as PropB,

    1 as Split,
    T2.a as PropA,
    T2.b as PropB,

    1 as Split,
    ...
FROM
    xxx T1,
    yyy T2,
    ...";
    using (var db = new OracleConnection(...))
    {
        return db.Query(
            req,
            (T1, T2) => {
                ...
            },
            splitOn:'Split,Split,...');
    } 
```

Dapper 应该有一个选项来避免`splitOn:'Split,Split,...'`

# python - 正则表达式中的条件匹配

> ID：10744733
> 
> 赞同：4
> 
> 时间：2012-05-24T20:21:57.527
> 
> 标签：python, regex

我正在尝试从下面给定的字符串中提取一些信息

```
>>> st = '''
... <!-- info mp3 here -->
...                             192 kbps<br />2:41<br />3.71 mb  </div>
... <!-- info mp3 here -->
...                             3.49 mb  </div>
... <!-- info mp3 here -->
...                             128 kbps<br />3:31<br />3.3 mb   </div>
... '''
>>> 
```

现在，当我使用下面的正则表达式时，我的输出是

```
>>> p = re.findall(r'<!-- info mp3 here -->\s+(.*?)<br />(.*?)<br />(.*?)\s+</div>',st)
>>> p
[('192 kbps', '2:41', '3.71 mb'), ('128 kbps', '3:31', '3.3 mb')] 
```

但我需要的输出是

```
[('192 kbps', '2:41', '3.71 mb'),(None,None,'3.49mb'), ('128 kbps', '3:31', '3.3 mb')] 
```

所以，我的问题是如何更改上面的内容`regex`以匹配所有条件。我相信我当前的正则表达式严格依赖于`<br />`标签，所以我如何让它以此为条件。

我知道我不应该使用正则表达式来解析 html，但目前这对我来说是最合适的方式。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-24T20:33:56.140

以下将起作用，但我想知道是否没有更优雅的解决方案。您当然可以将列表推导合并为一行，但我认为这会使代码整体不太清晰。至少通过这种方式，您将能够在三个月后遵循您所做的事情......

```
st = '''
<!-- info mp3 here -->
                            192 kbps<br />2:41<br />3.71 mb  </div>
<!-- info mp3 here -->
                            3.49 mb  </div>
<!-- info mp3 here -->
                            128 kbps<br />3:31<br />3.3 mb   </div>
'''

p = re.findall(r'<!-- info mp3 here -->\s+(.*?)\s+</div>',st)
p2 = [row.split('<br />') for row in p]
p3 = [[None]*(3 - len(row)) + row for row in p2]

>>> p3
[['192 kbps', '2:41', '3.71 mb'], [None, None, '3.49 mb'], ['128 kbps', '3:31', '3.3 mb']] 
```

而且，根据字符串中的可变性，您可能希望编写一个更通用的清理函数，将其剥离、案例等，并将其映射到您拉出的每个项目。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-24T20:48:05.773

这是一个更具体的正则表达式解决方案。我不确定这是否比[Karmel](https://stackoverflow.com/a/10744878/577088)的回答更可取，但我想我会按要求回答这个问题。前两个可选组没有返回，而是`None`返回空字符串`''`，我认为这可能足够接近。

注意嵌套组结构。前两个外部组是可选的，但`<br />`它们需要标记才能匹配。这样，如果标签少于两个`<br />`，最后一项直到最后才会匹配：

```
rx = r'''<!--\ info\ mp3\ here\ -->\s+   # verbose mode; escape literal spaces
         (?:                             # outer non-capturing group  
            ([^<>]*)                     # inner capturing group without <>
            (?:<br\ />)                  # inner non-capturing group matching br
         )?                              # whole outer group is optional
         (?:                             
            ([^<>]*)                     # all same as above
            (?:<br\ />)                
         )?
         (?:                             # outer non-capturing group
            (.*?)                        # non-greedy wildcard match
            (?:\s+</div>)                # inner non-capturing group matching div
         )'''                            # final group is not optional 
```

测试：

```
>>> re.findall(rx, st, re.VERBOSE)
[('192 kbps', '2:41', '3.71 mb'), 
 ('', '', '3.49 mb'), 
 ('128 kbps', '3:31', '3.3 mb')] 
```

请注意该`re.VERBOSE`标志，除非您删除上面的所有空格和注释，否则这是必需的。

# facebook - 用户和朋友权限未显示在身份验证对话框中

> ID：10744735
> 
> 赞同：2
> 
> 时间：2012-05-24T20:22:04.343
> 
> 标签：facebook, user-permissions

我对 Facebook Connect 功能非常陌生。我不知道它是否适合提出问题。我用 facebook 制作了一个应用程序，并请求了以下权限 user_about_me、user_birthday 和 user_hometown

当我单击“应用程序中的***预览当前对话框***” ->“***测试应用程序”->“身份验证对话框***”时，我只能看到“此应用程序将收到”“您的基本信息”。当我通过 facebook 登录我的应用程序时也是这种情况。但是当我点击“Preview Refferal Dialog”时，我在那里正确地看到了它。那么这两个对话框预览链接有什么区别呢？我应该怎么做才能让 Facebook 向我返回额外的数据？

顺便说一句，我正在使用 Facebook Javascript SDK。

谢谢并恭祝安康。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T17:46:24.073

我有同样的问题。当我将“沙盒模式”设置为禁用时，我终于得到了显示正确权限设置的弹出窗口，并且我还通过`http://apps.facebook.com/myapp`.

出于某种原因，当我直接访问我的应用程序的 URL 时，我仍然无法获得正确的权限。

# sql - 在 T-SQL 中启用统计时间的实际查询执行时间是多少？

> ID：10744736
> 
> 赞同：2
> 
> 时间：2012-05-24T20:22:06.003
> 
> 标签：sql, sql-server, performance, tsql, query-optimization

在 SQL Server Management Studio 的 SQL Sever 选项中启用统计时间时，我得到以下信息。

> SQL Server 解析和编译时间：CPU 时间 = 15 毫秒，运行时间 = 47 毫秒。
> 
> （1745 行受影响）
> 
> SQL Server 执行时间：CPU 时间 = 31 毫秒，经过时间 = 99 毫秒。SQL Server 解析和编译时间：CPU 时间 = 0 毫秒，运行时间 = 0 毫秒。

以毫秒为单位有四次。现在，运行查询的实际时间是哪一个？他们似乎不是亲戚。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T19:49:45.417

这取决于您所说的“运行查询所花费的时间”是什么意思

Parse Time 是通过语法检查和创建高度规范化的任务列表来准备查询所需的时间。

复制时间是通过 Algerbrizer 运行查询所需的时间（这是将对象名称转换为对象 ID 等的组件，然后为查询选择或创建执行计划。

这两个阶段所花费的时间一起记录为 Parse 和 Compile Time。

执行时间是实际执行或运行编译计划所花费的时间。因此，如果您的意思是执行查询需要多长时间，那么这就是 SQL Server 执行时间下的经过时间。

但是，如果您的意思是从我点击执行的那一刻起查询完成需要多长时间，那么这是解析和编译时间部分以及 SQL Server 执行时间部分中经过时间的总和。

CPU 时间（解析和编译部分以及执行时间部分）是处理器在此部分上花费的时间。因此，对于计算持续时间，可以忽略 CPU 时间。

# ios - 如何将 CGContextRef 保存为 .PNG 文件？

> ID：10744738
> 
> 赞同：1
> 
> 时间：2012-05-24T20:22:16.170
> 
> 标签：ios, cocoa-touch, cgcontextref

我创建了一个绘图 iOS 应用程序，我想在其中创建一个“保存图像”方法。绘图发生在 touchesMoved: 方法中。

```
- (void) touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event {
    UITouch *touch = [touches anyObject];
    [self drawToCache:touch];
    [self setNeedsDisplay];
}

- (void) drawToCache:(UITouch*)touch {
    hue += 0.005;
    if(hue > 1.0) hue = 0.0;
    UIColor *color = [UIColor colorWithHue:hue saturation:0.7 brightness:1.0 alpha:1.0];

    CGContextSetStrokeColorWithColor(cacheContext, [color CGColor]);
    CGContextSetLineCap(cacheContext, kCGLineCapRound);
    CGContextSetLineWidth(cacheContext, 15);

    CGPoint lastPoint = [touch previousLocationInView:self];
    CGPoint newPoint = [touch locationInView:self];

    CGContextMoveToPoint(cacheContext, lastPoint.x, lastPoint.y);
    CGContextAddLineToPoint(cacheContext, newPoint.x, newPoint.y);
    CGContextStrokePath(cacheContext);

    CGRect dirtyPoint1 = CGRectMake(lastPoint.x-10, lastPoint.y-10, 20, 20);
    CGRect dirtyPoint2 = CGRectMake(newPoint.x-10, newPoint.y-10, 20, 20);
    [self setNeedsDisplayInRect:CGRectUnion(dirtyPoint1, dirtyPoint2)];
} 
```

我想将我绘制的内容保存到 .PNG 文件中。

有解决办法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T20:30:03.110

[解决方案](https://stackoverflow.com/questions/2568421/how-do-i-save-what-i-have-drawn-in-a-cgcontext)非常简单：

```
UIImage *image = UIGraphicsGetImageFromCurrentImageContext(); 
NSData *imageData = UIImagePNGRepresentation(image);
[imageData writeToFile:@"myImage.png"]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-24T21:02:53.993

您需要实际设置路径位置。扩展 CrimsonDiego 的代码，这会将图像放在应用程序的 /Documents 目录中。

```
NSString *docsDirectory = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,    NSUserDomainMask, YES) objectAtIndex:0];
NSString *path = [docsDirectory stringByAppendingPathComponent:@"myImage.png"];

UIImage *image = UIGraphicsGetImageFromCurrentImageContext(); 
NSData *imageData = UIImagePNGRepresentation(image);
[imageData writeToFile:path atomically:YES]; 
```

# php - 如何查询随机行并跟踪查询的内容（这是重要部分）

> ID：10744739
> 
> 赞同：1
> 
> 时间：2012-05-24T20:22:20.210
> 
> 标签：php, mysql

我已经知道如何进行随机 mysql/php 查询，但是如何跟踪已经查询过的内容不会再次被拉出。用例：一个有 10 个问题的测验。这些问题需要按随机顺序排列。如何跟踪问题（行）2、5、6、8、9 已经回答，但问题 1、3、4、7、10 仍然存在。这是我到目前为止所拥有的：

```
$current_test = $_SESSION['testid'];
// v v v query for this TEST
$tests = mysql_query("SELECT * FROM the_tests WHERE the_tests.testid=$current_test");
$test = mysql_fetch_array($tests);
// ^ ^ ^ query for this TEST

// v v v query for the QUESTIONS from this Test
// Generate
if ($test['randomize']==1){
    $offset_result = mysql_query("SELECT FLOOR(RAND() * COUNT(*)) AS offset FROM the_questions WHERE the_questions.test_id_q=$current_test");//SELECT FLOOR(RAND() * COUNT(*)) AS offset FROM the_questions WHERE `qid` NOT IN (1,5,6) AND the_questions.test_id_q=1
    $offset_row = mysql_fetch_object($offset_result);
    $offset = $offset_row->offset;
    $questions = mysql_query("SELECT * FROM the_questions WHERE the_questions.test_id_q=$current_test LIMIT $offset, 1 " );
}else{
    $questions = mysql_query("SELECT * FROM the_questions WHERE the_questions.test_id_q=$current_test");
}
$totalQuestions = mysql_query("SELECT * FROM the_questions WHERE the_questions.test_id_q=$current_test");
$totalQs = mysql_num_rows($totalQuestions);
$testQ = mysql_fetch_array($questions); 
```

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T20:33:17.667

您正在寻找补充该 SQL WHERE 子句`NOT IN (5,23,45);`

所以基本上保留一个包含每个随机项目 ID 值的数组并将其提供给您的 SQL 子句。

```
mysql_query("SELECT FLOOR(RAND() * COUNT(*)) AS offset FROM the_questions WHERE the_questions.test_id_q=$current_test AND the_questions.id NOT IN (".implode(',',$excluded).")"); 
```

现在，这提出了另一个问题：$excluded 数组。它应该是暂时的排除还是应该是永久的？如果它不应该是永久性的，则将其存储在会话中（例如： $_SESSION['excluded'] ）如果用户在 3 天后来，他可能能够重新回答该问题。

如果这必须是永久性的，那么将已回答该问题的事实存储在专用于该问题的列中，或者，只需检查是否有答案？

```
mysql_query("SELECT FLOOR(RAND() * COUNT(*)) AS offset FROM the_questions WHERE the_questions.test_id_q=$current_test AND the_questions.answer ==''"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-27T01:51:13.757

这是我想出的：

假设 $_SESSION['qList'] 是一个如下所示的数组：

```
$_SESSION['qList'] = array(1,2,3,4,5,6,7,8,9,10); 
```

当用户提交问题时，会有一个 <input type="hidden" value="5"...> ，其中的值是当前问题的 ID。**$eliminateQ**下面是这个问题的 ID：

```
$_SESSION['qList'] = array_diff($_SESSION['qList'],array($eliminateQ));
$_SESSION['qList'] = array_values($_SESSION['qList']);
$questions = mysql_query("SELECT * FROM tan_questions WHERE test_id_q=$current_test AND qid IN (".implode(',',$_SESSION[qList]).") ORDER BY RAND() LIMIT 1"); 
```

这导致更新的 qList 数组没有 ID 号 5：

```
$_SESSION['qList'] = array(1,2,3,4,6,7,8,9,10); 
```

整个事情一直持续到没有问题为止。该实例中有一个 if() 语句将用户转发到结果页面。中提琴！

谢谢@pixeline，您的洞察力。我拿走了您的**NOT IN**并将其反转为**IN**。:)

# c# - 如何在我的“Metro Style”应用程序中的 WPF 中进行拖放？

> ID：10744741
> 
> 赞同：5
> 
> 时间：2012-05-24T20:22:41.457
> 
> 标签：c#, .net, wpf, xaml, drag-and-drop

我正在尝试创建一些对 Windows Metro 风格应用程序的原始模仿。到目前为止，我所做的是将新瓷砖添加到 中的窗口`ObservableCollection`，我可以更改它们的颜色并使用 删除它们`ContextMenu`。现在我想通过实际预览拖动来进行拖放（使用半透明瓷砖）。我尝试自己使用许多描述 WPF 中 DragDrop 类的教程来完成它，但我不得不承认我无法理解它，我需要帮助。我试图遵循：[本教程](http://www.wpftutorial.net/DragAndDrop.html)。这是我的应用程序的[屏幕截图](http://imageshack.us/photo/my-images/849/screengy.png/)：![截屏](../Images/cdde8261ee5dbf4f4368e0657473814b.png) 以及我的代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Data;
using System.Windows.Documents;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Imaging;
using System.Windows.Navigation;
using System.Windows.Shapes;
using System.Collections.ObjectModel;

namespace Metro_Pawel_Michna
{
    /// <summary>
    /// Interaction logic for MainWindow.xaml
    /// </summary>
    public partial class MainWindow : Window
    {
        private ObservableCollection<myButton> _tiles = new ObservableCollection<myButton>();
        Random r = new Random();
        private int index = -1;
        private List<Color> myColors = new List<Color>();
        public MainWindow()
        {
            InitializeComponent();
            this.DataContext = _tiles;
            webBrowser.Visibility = Visibility.Collapsed;
            btnClose.Visibility = Visibility.Collapsed;
            myColors.Add(Colors.DarkCyan);
            myColors.Add(Colors.Black);
            myColors.Add(Colors.DarkGoldenrod);
            myColors.Add(Colors.DarkBlue);
            myColors.Add(Colors.DarkGray);
            myColors.Add(Colors.DarkKhaki);
        }

        private void btnAdd_Click(object sender, RoutedEventArgs e)
        {
            myButton b = new myButton();
            b.Content = txtUrl.Text;
            b.MouseDoubleClick += new MouseButtonEventHandler(tileDbl_Click);
            b.MouseRightButtonUp += new MouseButtonEventHandler(b_MouseRightButtonUp);

            Color random = new Color();
            int losuj = r.Next(6);
            b.colorIndex = losuj;

            random = myColors.ElementAt(losuj);

            LinearGradientBrush lgb = new LinearGradientBrush(Colors.White, random, 45);
            lgb.StartPoint = new Point(-0.5,-0.5);
            lgb.EndPoint = new Point(1, 1);
            b.Background = lgb;
            _tiles.Add(b);
        }

        private void tileDbl_Click(object sender, RoutedEventArgs e)
        {
            const string http = "http://";
            const string https = "https://";
            string address = (sender as Button).Content.ToString();

            if (String.Compare(http, 0, address, 0, 6) == 0 && address.Length > 7) webBrowser.Navigate(address);
            else if (String.Compare(https, 0, address, 0, 7) == 0 && address.Length > 8) webBrowser.Navigate(address);
            else webBrowser.Navigate("http://www.google.com/search?q=" + address);

            tilesBox.Visibility = Visibility.Collapsed;
            btnClose.Visibility = Visibility.Visible;
            txtUrl.Visibility = Visibility.Collapsed;
            btnAdd.Visibility = Visibility.Collapsed;
            toolbar.HorizontalAlignment = HorizontalAlignment.Right;
            webBrowser.Visibility = Visibility.Visible;
        }

        private void btnClose_Click(object sender, RoutedEventArgs e)
        {
            tilesBox.Visibility = Visibility.Visible;
            btnClose.Visibility = Visibility.Collapsed;
            txtUrl.Visibility = Visibility.Visible;
            btnAdd.Visibility = Visibility.Visible;
            toolbar.HorizontalAlignment = HorizontalAlignment.Left;
            webBrowser.Visibility = Visibility.Collapsed;
        }

        private void Remove_Click(object sender, RoutedEventArgs e)
        {
            _tiles.RemoveAt(index);
        }

        private void b_MouseRightButtonUp(object sender, RoutedEventArgs e)
        {
            index = _tiles.IndexOf(sender as myButton);
        }

        private void ChangeColor_Click(object sender, RoutedEventArgs e)
        {
            myButton b = _tiles.ElementAt(index);
            LinearGradientBrush lgb;
            if (b.colorIndex != myColors.Count - 1)
                lgb = new LinearGradientBrush(Colors.White, myColors.ElementAt(++b.colorIndex), 45);
            else
            {
                lgb = new LinearGradientBrush(Colors.White, myColors.ElementAt(0), 45);
                b.colorIndex = 0;
            }
            lgb.StartPoint = new Point(-0.5, -0.5);
            lgb.EndPoint = new Point(1, 1);
            b.Background = lgb;
        }
    }
} 
```

XAML：

```
<Window x:Class="Metro_Pawel_Michna.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:Metro_Pawel_Michna="clr-namespace:Metro_Pawel_Michna"
        Title="MainWindow" Height="350" Width="525" MinWidth="180" MinHeight="200">
    <DockPanel LastChildFill="True">
        <ToolBarTray Name="toolbar" DockPanel.Dock="Top">
            <ToolBar>
                <TextBox Name="txtUrl">Type an URL</TextBox>
                <Button Name="btnAdd" Click="btnAdd_Click">Add</Button>
                <Button Name="btnClose" Click="btnClose_Click">Close</Button>
            </ToolBar>
        </ToolBarTray>
        <WebBrowser Height="auto" Name="webBrowser" Width="auto" />
        <ScrollViewer>
            <ItemsControl Name="tilesBox" ItemsSource="{Binding}">
                <ItemsControl.ContextMenu>
                    <ContextMenu Name="contextMenu">
                        <MenuItem Header="Remove" Click="Remove_Click"/>
                        <MenuItem Header="Change color" Click="ChangeColor_Click"/>
                    </ContextMenu>
                </ItemsControl.ContextMenu>
                <ItemsControl.Resources>
                    <Style TargetType="{x:Type Metro_Pawel_Michna:myButton}">
                        <Setter Property="Width" Value="120"/>
                        <Setter Property="Height" Value="120"/>
                        <Setter Property="Margin" Value="10"/>
                        <Setter Property="Foreground" Value="White" />
                        <Setter Property="Template">
                            <Setter.Value>
                                <ControlTemplate>
                                    <Grid>
                                        <Rectangle Fill="{TemplateBinding Background}" />
                                        <ContentPresenter Content="{Binding Path=Content, RelativeSource={RelativeSource TemplatedParent}}" VerticalAlignment="Center" HorizontalAlignment="Center" />
                                    </Grid>
                                </ControlTemplate>
                            </Setter.Value>
                        </Setter>
                    </Style>
                </ItemsControl.Resources>

                <ItemsControl.ItemsPanel>
                    <ItemsPanelTemplate>
                        <WrapPanel />
                    </ItemsPanelTemplate>
                </ItemsControl.ItemsPanel>
            </ItemsControl>
        </ScrollViewer>

    </DockPanel>

</Window> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-28T08:30:39.693

您可以尝试使用一些拖放框架来实现此功能，例如 gon-wpf-dragdrop -

> GongSolutions.Wpf.DragDrop 库是 WPF 的拖放框架。它具有以下特点：
> 
> *   与 MVVM 一起使用：拖放的逻辑可以放在 ViewModel 中。无需将代码放置在代码隐藏中，而是使用附加属性绑定到 ViewModel 中的拖动处理程序/拖放处理程序。
> *   适用于多项选择。
> *   ***可以在同一个控件内拖动数据重新排序，或者在控件之间拖动***。
> 
> [http://code.google.com/p/gong-wpf-dragdrop/](http://code.google.com/p/gong-wpf-dragdrop/)

重新排序是您正在寻找的...

如果您不想使用任何框架，那么我建议您阅读这些文章 -

[如何在数据绑定的 ItemsControls 之间拖放项目？](http://bea.stollnitz.com/blog/?p=53) || [回程链接](https://web.archive.org/web/20120620222921/http://bea.stollnitz.com/blog/?p=53)

[http://www.codeproject.com/Articles/37161/WPF-Drag-and-Drop-Smorgasbord](http://www.codeproject.com/Articles/37161/WPF-Drag-and-Drop-Smorgasbord)

并浏览一些实现拖放的控件的源代码 -

[拖放控件](http://draganddrop.codeplex.com/SourceControl/list/changesets)

# asp.net - 连接到 OD 的继承的 ASP.NET 代码在连接到 AD 时不起作用

> ID：10744743
> 
> 赞同：0
> 
> 时间：2012-05-24T20:22:57.080
> 
> 标签：asp.net, active-directory, ldap

我继承了一个连接到我们的 Open Directory 以提供 Web 身份验证的软件。当连接到 OD 时，它就像一个魅力，但我们希望过渡到使用 Active Directory 作为我们的主要身份验证提供程序。

显然，两者之间的 LDAP 方案存在差异，我在过去的 6 个小时里一直在谷歌搜索和阅读，但我仍然有点不知所措。当您尝试登录到[Web 界面](http://cl.ly/Grgo)时，这是显示的错误（这是 Web 界面的样子[http://cl.ly/Grgo](http://cl.ly/Grgo)）；

异常详情：

> System.DirectoryServices.DirectoryServicesCOMException：发生操作错误。
> [DirectoryServicesCOMException (0x80072020): 发生操作错误。]
> C:\Program Files\CruiseControl.NET\server\users.lbox.com\WorkingDirectory\LDAPMembershipProvider\LDAPMembershipProvider 中的 LBOX.Membership.LDAPMembershipProvider.ValidateUser(String username, String password)
> c:\Program Files\CruiseControl.NET\server\users.lbox.com\WorkingDirectory\LBUserService\Login.aspx.cs:21
> System.Web 中的.cs:59 LBUserService.Login.loginButton_Click(Object sender, EventArgs e)。 UI.WebControls.Button.OnClick(EventArgs e) +115
> System.Web.UI.WebControls.Button.RaisePostBackEvent(String eventArgument) +140
> System.Web.UI.Page.RaisePostBackEvent（IPostBackEventHandler sourceControl，字符串 eventArgument）+29
> System.Web.UI.Page.ProcessRequestMain（布尔 includeStagesBeforeAsyncPoint，布尔 includeStagesAfterAsyncPoint）+2981

这显然与第 59 行`LDAPMembershipProvider.cs`和我的`web.config`文件有关。

`web.config`来自 CruiseControl.net的文件

```
<membership defaultProvider="LDAP">
  <providers>
    <add name="LDAP" 
         type="LBOX.Membership.LDAPMembershipProvider" 
         LDAPRoot="LDAP://10.0.1.19:389/cn=administrator,cn=users,dc=office,dc=lbox,dc=com" />
  </providers>
</membership> 
```

第 59 行从`LDAPMembershipProvider.cs`

```
// Attempt to log into the LDAP server as this user
DirectoryEntry root2 = new DirectoryEntry(LDAPRoot, distinctName, password, AuthenticationTypes.ServerBind);
DirectorySearcher searcher2 = new DirectorySearcher(root2);
searcher2.SearchScope = SearchScope.Subtree;
searcher2.Filter = String.Format("cn={0}", username); 
```

我几乎可以肯定这与我`LDAP://`尝试使用我连接到 AD 的方式有关，但我无法连接。即使只是猜测，任何帮助都将不胜感激。想法是允许AD在不受约束的情况下验证用户名和密码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T20:39:54.740

你的那条`LDAPRoot`路径`web.config`对我来说有点可疑 - 它似乎表示实际**用户**：

```
LDAPRoot="LDAP://10.0.1.19:389/cn=administrator,cn=users,dc=office,dc=lbox,dc=com"
                               ****************
                               User "administrator" 
```

但那不应该是某种**容器**吗？在对用户进行身份验证时，我假设 LDAP 成员资格提供者必须查找在 LDAP 容器内敲击您的数字门的用户，以查看他/她是否有效（或无效）。

您正在基于该 LDAP 根目录创建目录搜索器 -*在用户*中搜索通常不会返回任何结果....

我会尝试使用

```
LDAPRoot="LDAP://10.0.1.19:389/cn=users,dc=office,dc=lbox,dc=com" 
```

这只会在`cn=users`容器内搜索，并承诺更多的结果机会，我希望！

# android - Android 将冲动从服务发送到活动

> ID：10744746
> 
> 赞同：0
> 
> 时间：2012-05-24T20:23:05.903
> 
> 标签：android, service, android-activity, broadcast

在服务中，我准备了一些数据，然后将这些数据存储在静态成员变量中，通过广播向主 UI 活动发送没有数据的意图，以便活动知道数据已准备好并准备好访问。

这很好用，但是由于我需要每秒执行大约 10 次，我认为通过广播发送脉冲（根本不包含数据）有点过分，我已经测试过在那里浪费了很多时间。

有没有更好的解决方案来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T20:28:47.827

您应该[将您绑定`Service`到您的`Activity`](http://developer.android.com/guide/topics/fundamentals/services.html#CreatingBoundService)并使用简单的回调或`Message`and`Handler`工具来发送您的数据。从您所说的内容来看，一个简单的回调可能会很好地满足您的需求。

# java - ASM 转换以找到具体的类类型

> ID：10744748
> 
> 赞同：1
> 
> 时间：2012-05-24T20:23:12.087
> 
> 标签：java, interface, bytecode, java-bytecode-asm

我正在开发一个项目，该项目将跟踪从包中的类到任何其他类的方法调用。重要的是我可以识别具体类型，并且我希望有一个最小的跟踪开销。触发探针的时间没有限制；它可以在调用方法之前或之后。

目前使用 ASM，但对它没有要求。该系统正在从 AspectJ 迁移，以允许动态连接，所以它已经过时了。

下面是目前的情况。'Tracer' 枚举/单例接收 probe(int) 并处理调用。找到从具体类型到引用类型的调用就足够了。

```
@Override
void visitMethodInsn(final int opcode, final String owner, final String name, final String desc) {
    Integer probeID = Tracer.INSTANCE.probes.createProbeIDAt(new Call(owner, name, desc))

    super.visitFieldInsn(GETSTATIC, "org/flightofstairs/honours/capture/agent/Tracer", "INSTANCE", "Lorg/flightofstairs/honours/capture/agent/Tracer;");
    super.visitLdcInsn(probeID)
    super.visitMethodInsn(INVOKEVIRTUAL, "org/flightofstairs/honours/capture/agent/Tracer", "probe", "(Ljava/lang/Integer;)V")

    super.visitMethodInsn(opcode, owner, name, desc);
} 
```

我更进一步的想法是以某种方式获取对被调用类的引用并调用 getClass() 来检索具体类型。如果堆栈包含 INVOKEINTERFACE 顶部的对象引用，这将是微不足道的，但被调用方法的任何参数都放在它上面。

考虑到参数的数量是已知的，计算对象引用的堆栈位置不会有问题，但是 java 无法从堆栈中的较低位置复制引用。

有什么建议吗？

干杯。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T00:38:56.570

一种解决方案是在遍历期间记录 INVOKEINTERFACE。最后，ASM 分析器可用于查找将 objectref 推入堆栈的指令，并从那里轻松添加 getClass() 和跟踪代码。

这里显示了一个解决方案。[https://gist.github.com/2795738](https://gist.github.com/2795738)

# mamp - 每次重新启动 Apache 时，如何阻止 MAMP PRO 在我的所有主机中创建 index.php 和 MAMP-PRO-Logo.gif 文件？

> ID：10744751
> 
> 赞同：0
> 
> 时间：2012-05-24T20:23:29.133
> 
> 标签：mamp

这没什么大不了的，但很烦人。有没有办法禁用它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T20:35:40.527

如果您创建或引用包含现有内容的目录，MAMP Pro 不会使用占位符覆盖这些文件。

占位符内容可以在以下位置找到：`/Applications/MAMP\ PRO/MAMP\ PRO.app/Contents/Resources/placeholder/`

您可以尝试从占位符目录中删除这些文件，看看是否适合您。

# php - 使用带有多个 WHERE 子句的 ORDER BY RAND() mysql

> ID：10744753
> 
> 赞同：3
> 
> 时间：2012-05-24T20:23:33.350
> 
> 标签：php, mysql, random, sql-order-by

我知道按 rand() 排序并不是从数据库中提取随机值的最快方法，但我的数据库很小，而且在这一点上；我只是想让它工作！哈哈。这是我的代码：

```
include('includes/dbc.php');
$top_query = "SELECT * FROM top WHERE 'occasion_id =" . $occasion . "' AND 'temperature_id = " . $temperature . "' AND 'user_id = " . $user_id . "'ORDER BY RAND() LIMIT 1";
$top_result = mysqli_query($dbc, $top_query) or die (' The top SELECT query is broken.');
mysqli_close ($dbc);

while($row= mysqli_fetch_array($top_result)) {
    echo 'This top has an id of:' . $row['top_id']  . '<br> ';
    echo 'Does this top require pants?' . $row['needs_pants']  . '<br>';
    echo 'What\'s the colour id of this top?' . $row['colour_id'] . '<br>';
    echo  $row['value'];
} 
```

出于某种原因，这不起作用，当我尝试运行我的数组时，我只会显示空白。在我按“rand() limit 1”位输入顺序之前它起作用了，但显然我得到了每个值而不是一个随机值。

谁能看到我哪里出错了？非常感谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-24T20:26:19.997

您的查询格式不正确。它没有*死*，只是没有返回结果。

注意错误的单引号：

```
$top_query = "SELECT * FROM top WHERE 'occasion_id =" . $occasion . "' AND 'temperature_id = " . $temperature . "' AND 'user_id = " . $user_id . "'ORDER BY RAND() LIMIT 1"; 
```

您可以通过输出查询然后直接在 MySQL 中运行它来证明这一点（例如通过 PHPMyAdmin）：

```
echo $top_query; 
```

还具有类似[`mysqli_error()`](http://php.net/manual/en/mysqli.error.php)和[`mysqli_num_rows()`](http://php.net/mysqli_num_rows)帮助确定查询结果的功能。

为了让您继续前进，SQL 应该看起来更像：

```
$top_query = "SELECT * FROM top WHERE occasion_id = '" . $occasion . "' AND temperature_id = '" . $temperature . "' AND user_id = '" . $user_id . "' ORDER BY RAND() LIMIT 1"; 
```

一些附加说明：

*   阅读[SQL 注入](http://php.net/manual/en/security.database.sql-injection.php)。
*   熟悉何时需要在 MySQL中引用[文字值。](http://dev.mysql.com/doc/refman/5.0/en/literals.html)在您的情况下，这些都是 ID 列（理论上是整数），因此不需要引用。
*   请注意不要过早关闭 MySQL 连接。PHP 实际上会在脚本结束时自动执行此操作。
*   正如**webbiedave**所评论的，还要查看[Prepared Statements](http://php.net/manual/en/mysqli.prepare.php)。

# html - 是否有使用类似 API 的 flash 的 canvas html5 框架？

> ID：10744754
> 
> 赞同：0
> 
> 时间：2012-05-24T20:23:43.580
> 
> 标签：html, canvas, flashdevelop, kineticjs, easeljs

我正在开发一个画布应用程序，我需要能够创建位图、线条、组并管理点击事件。

我试过了：

1.  动力学-v3.9.6.js
2.  easeljs-0.4.2.min.js

这些是非常好的工具，但它们无法获得一组位图和线条的宽度。想象一下：

```
//init a image
var b = new Bitmap(...);
b.x ...
b.src ...

var l = Line(...);
l.x ...
l.y ...

//init group or layer or something like that
var g = Group(...);
g.add(b);
g.add(l);

var w = g.width; 
```

这行不通。

现在我正在考虑破解*easeljs-0.4.2.min.js*来实现这一点，因为它是移植as3/as2 简单代码的一个很好的起点，但我不确定这是否是个好主意。

我真的很喜欢 Flash 实现显示对象的方式，所以如果你知道一些工具，请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T20:43:55.573

您可以/应该将 SVG 用于您所描述的内容。

## 演示：http: [//jsfiddle.net/mNAd3/](http://jsfiddle.net/mNAd3/)

```
var svgNS = 'http://www.w3.org/2000/svg',
    svg   = document.body.appendChild(document.createElementNS(svgNS,'svg'));

var l = document.createElementNS(svgNS,'line');
line.setAttribute('x1',10); line.setAttribute('y1',50);
line.setAttribute('x2',30); line.setAttribute('y2',150);

var g = svg.appendChild(document.createElementNS(svgNS,'g'));
g.appendChild(l);

var bbox = g.getBBox();
console.log(bbox);
// SVGRect:
//   height: 100
//   width: 20
//   x: 10
//   y: 50

var w = bbox.width; 
```

请注意，您需要确保您的元素在屏幕上可见（将 SVG 添加到文档，将组添加到 SVG）来计算边界框。

*我故意没有包含创建图像的示例，因为对于异步加载的资源，您需要设置一个`load`处理程序来等待图像加载，我不想让这些细节使演示复杂化。*

因为 SVG 是一种*保留模式的图形 API*，它具有对象大小的概念，并允许它们跟踪和处理鼠标事件。这不适用于 HTML5 画布（因为它是*即时模式图形 API*。）

# processing - 乒乓运动不顺畅

> ID：10744756
> 
> 赞同：0
> 
> 时间：2012-05-24T20:23:47.107
> 
> 标签：processing, pong

我想在处理中制作一个乒乓球游戏。但是球的运动不是很顺畅。我尝试改变帧速率并降低球的速度，但移动速度似乎不是恒定的。这可能是性能问题吗？我做错了什么，或者处理可能不是正确的事情，即使对于简单的游戏也是如此？（我的目标是尝试 processing.js 并制作一个无需插件即可运行的游戏）。这是我的代码：

```
// Colorset
color scrBG;
color bastards;

// Border for the Paddle
int border;

// The Paddle
int padWid;
int padHei;
float padX;
float padY;

// The Ball
float ballX;
float ballY;
int ballRad;

int speed;
float velX;
float velY;

boolean playing = false;

void setup()
{
  border = 5;

  scrBG = #EEEEEE;
  bastards = #FFF0EB;

  padWid = 80;
  padHei = 10;
  ballRad = 15;
  speed = 5;
  velX = velY = speed;

  size(800, 600);
  background(scrBG);
  noStroke();
  noCursor();
  //frameRate(100);
  smooth();
}

void draw()
{

  background(bastards);drawPaddle();
  drawBall();
}

void drawBall()
{

  if(!playing)
  {
    ballX = padX+padWid/2;
    ballY = height-border-padHei-ballRad/2-2;
  }
  else
  {
if(ballY > height)
{
  ballOut();
}

if(ballY > padY && ballX < padX + padWid && ballX > padX)
{
  velY = -velY;
  ballY = padY-ballRad-1;
}
if(ballX < ballRad)
{
  velX = -velX;
  ballX = ballRad+1;
}
if(ballX > width-ballRad)
{
  velX = -velX;
  ballX = width-ballRad-1;
}
if(ballY < ballRad)
{
  velY = -velY;
  ballY = ballRad+1;
}

ballY += velY;
ballX += velX;   
  }

  fill(0);
  ellipse(ballX, ballY, ballRad*2, ballRad*2);

}

void drawPaddle()
{
  padX = constrain(mouseX, border, width-padWid-border);
  padY = height-padHei-border;

  fill(0);
  rect(padX, padY, padWid, padHei);
}

void startLevel()
{
  playing = true;
}

void resetLevel()
{
  playing = false;
}

void ballOut()
{
  playing = false;
}

void mouseClicked()
{
  if(playing)
  {
    resetLevel();
  }
  else
  {
    startLevel();
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T16:15:45.553

你的 frameRate 对我来说似乎很高。对于像 Processing 和 Flash 这样的平滑动画来说，30 帧通常是一个不错的速度。我还将我所有的整数更改为浮点数，因为浮点数更适合平滑动画。

我接下来要看的是添加一些缓动，这可能会使它变得平滑。在 processing.org 上查看此信息：

[www.processing.org/learning/basics/easing.html](http://processing.org/learning/basics/easing.html)

玩一玩。

# html - 用于打开 URL 的 Google Apps 脚本

> ID：10744760
> 
> 赞同：34
> 
> 时间：2012-05-24T20:24:26.673
> 
> 标签：html, redirect, google-apps-script, hyperlink

有没有办法编写谷歌应用程序脚本，以便在运行时打开第二个浏览器窗口到 www.google.com（或我选择的其他网站）？

我正在尝试解决我之前的问题： [我可以在 Google Apps 电子表格的消息框中添加超链接吗](https://stackoverflow.com/questions/10622521/can-i-add-a-hyperlink-inside-a-message-box-of-a-google-apps-spreadsheet)

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2017-11-03T14:49:36.543

**此函数无需额外的用户交互即可**打开 URL 。

```
/**
 * Open a URL in a new tab.
 */
function openUrl( url ){
  var html = HtmlService.createHtmlOutput('<html><script>'
  +'window.close = function(){window.setTimeout(function(){google.script.host.close()},9)};'
  +'var a = document.createElement("a"); a.href="'+url+'"; a.target="_blank";'
  +'if(document.createEvent){'
  +'  var event=document.createEvent("MouseEvents");'
  +'  if(navigator.userAgent.toLowerCase().indexOf("firefox")>-1){window.document.body.append(a)}'                          
  +'  event.initEvent("click",true,true); a.dispatchEvent(event);'
  +'}else{ a.click() }'
  +'close();'
  +'</script>'
  // Offer URL as clickable link in case above code fails.
  +'<body style="word-break:break-word;font-family:sans-serif;">Failed to open automatically. <a href="'+url+'" target="_blank" onclick="window.close()">Click here to proceed</a>.</body>'
  +'<script>google.script.host.setHeight(40);google.script.host.setWidth(410)</script>'
  +'</html>')
  .setWidth( 90 ).setHeight( 1 );
  SpreadsheetApp.getUi().showModalDialog( html, "Opening ..." );
} 
```

此方法通过创建一个临时对话框起作用，因此它不适用于无法访问 UI 服务的上下文，例如脚本编辑器或自定义 G 表格公式。

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2012-05-24T21:15:54.917

你可以构建一个小的 UI 来完成这样的工作：

```
function test(){
showURL("http://www.google.com")
}
//
function showURL(href){
  var app = UiApp.createApplication().setHeight(50).setWidth(200);
  app.setTitle("Show URL");
  var link = app.createAnchor('open ', href).setId("link");
  app.add(link);  
  var doc = SpreadsheetApp.getActive();
  doc.show(app);
  } 
```

如果要“显示” URL，只需像这样更改此行：

```
 var link = app.createAnchor(href, href).setId("link"); 
```

编辑：链接到*只读*[的演示电子表格](https://docs.google.com/spreadsheet/ccc?key=0AnqSFd3iikE3dEhNZlA0NTFOWVZIb25iNk5Wa1VaalE)，因为太多人一直在上面写不需要的东西（只需复制一份以代替使用）。

 ***编辑：Google 于 2014 年 12 月 11 日弃用了 UiApp，此方法可能随时中断，需要更新以改用 HTML 服务！**

编辑：下面是使用 html 服务的实现。

```
function testNew(){
  showAnchor('Stackoverflow','http://stackoverflow.com/questions/tagged/google-apps-script');
}

function showAnchor(name,url) {
  var html = '<html><body><a href="'+url+'" target="blank" onclick="google.script.host.close()">'+name+'</a></body></html>';
  var ui = HtmlService.createHtmlOutput(html)
  SpreadsheetApp.getUi().showModelessDialog(ui,"demo");
} 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2019-02-13T16:31:20.737

确实不需要按照赏金答案中的建议创建自定义点击事件，也不需要按照已接受答案中的建议显示 url。

`window.open(url)`[¹](https://developer.mozilla.org/en-US/docs/Web/API/Window/open)确实会在没有用户交互的情况下自动打开网页，前提是禁用弹出窗口阻止程序（就像斯蒂芬的[回答](https://stackoverflow.com/a/47098533)一样）

### openUrl.html

```
<!DOCTYPE html>
<html>
  <head>
   <base target="_blank">
    <script>
     var url1 ='https://stackoverflow.com/a/54675103';
     var winRef = window.open(url1);
     winRef ? google.script.host.close() : window.alert('Allow popup to redirect you to '+url1) ;
     window.onload=function(){document.getElementById('url').href = url1;}
    </script>
  </head>
  <body>
    Kindly allow pop ups</br>
    Or <a id='url'>Click here </a>to continue!!!
  </body>
</html> 
```

### 代码.gs：

```
function modalUrl(){
  SpreadsheetApp.getUi()
   .showModalDialog(
     HtmlService.createHtmlOutputFromFile('openUrl').setHeight(50),
     'Opening StackOverflow'
   )
} 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-04-27T22:17:35.247

Google Apps 脚本不会自动打开网页，但它可用于显示带有链接、按钮的消息，用户可以单击它们以打开所需的网页，甚至可以使用[Window 对象](https://developer.mozilla.org/en-US/docs/Web/API/Window)和[addEventListener()](https://developer.mozilla.org/en-US/docs/Web/API/EventTarget/addEventListener)等方法打开网址。

值得注意的是，UiApp 现在已被弃用。来自[UiApp 类 - Google Apps 脚本 - Google Developers](https://developers.google.com/apps-script/reference/ui/ui-app)

> 已弃用。UI 服务已于[2014 年 12 月 11 日弃用](http://googleappsdeveloper.blogspot.com/2014/12/speeding-up-htmlservice.html)。要创建用户界面，请改用[HTML 服务](https://developers.google.com/apps-script/guides/html)。

HTML 服务链接页面中的示例非常简单，

代码.gs

```
// Use this code for Google Docs, Forms, or new Sheets.
function onOpen() {
  SpreadsheetApp.getUi() // Or DocumentApp or FormApp.
      .createMenu('Dialog')
      .addItem('Open', 'openDialog')
      .addToUi();
}

function openDialog() {
  var html = HtmlService.createHtmlOutputFromFile('index')
      .setSandboxMode(HtmlService.SandboxMode.IFRAME);
  SpreadsheetApp.getUi() // Or DocumentApp or FormApp.
      .showModalDialog(html, 'Dialog title');
} 
```

index.html 的自定义版本，用于显示两个超链接

```
<a href='http://stackoverflow.com' target='_blank'>Stack Overflow</a>
<br/>
<a href='http://meta.stackoverflow.com/' target='_blank'>Meta Stack Overflow</a> 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2018-10-09T21:03:02.597

基于前面的例子，我认为有一种更清洁的方式来做到这一点。在您的项目中创建一个`index.html`文件并使用上面的斯蒂芬代码，只需将其转换为 HTML 文档。

```
<!DOCTYPE html>
<html>
  <base target="_top">
  <script>
    function onSuccess(url) {
      var a = document.createElement("a"); 
      a.href = url;
      a.target = "_blank";
      window.close = function () {
        window.setTimeout(function() {
          google.script.host.close();
        }, 9);
      };
      if (document.createEvent) {
        var event = document.createEvent("MouseEvents");
        if (navigator.userAgent.toLowerCase().indexOf("firefox") > -1) {
          window.document.body.append(a);
        }                        
        event.initEvent("click", true, true); 
        a.dispatchEvent(event);
      } else {
        a.click();
      }
      close();
    }

    function onFailure(url) {
      var div = document.getElementById('failureContent');
      var link = '<a href="' + url + '" target="_blank">Process</a>';
      div.innerHtml = "Failure to open automatically: " + link;
    }

    google.script.run.withSuccessHandler(onSuccess).withFailureHandler(onFailure).getUrl();
  </script>
  <body>
    <div id="failureContent"></div>
  </body>
  <script>
    google.script.host.setHeight(40);
    google.script.host.setWidth(410);
  </script>
</html> 
```

然后，在您的`Code.gs`脚本中，您可以使用以下内容，

```
function getUrl() {
  return 'http://whatever.com';
}

function openUrl() {
  var html = HtmlService.createHtmlOutputFromFile("index");
  html.setWidth(90).setHeight(1);
  var ui = SpreadsheetApp.getUi().showModalDialog(html, "Opening ..." );
} 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2021-09-01T13:55:56.670

我喜欢@Stephen M. Harris 的回答，直到最近才对我有用。我不确定它为什么[停止工作](https://stackoverflow.com/questions/10744760/google-apps-script-to-open-a-url/47098533#comment121863283_47098533)。

## 2021-09-01 现在对我有用的方法：

```
function openUrl( url ){
  Logger.log('openUrl. url: ' + url);
  const html = `<html>
<a id='url' href="${url}">Click here</a>
  <script>
     var winRef = window.open("${url}");
     winRef ? google.script.host.close() : window.alert('Configure browser to allow popup to redirect you to ${url}') ;
     </script>
</html>`; 
  Logger.log('openUrl. html: ' + html);
  var htmlOutput = HtmlService.createHtmlOutput(html).setWidth( 250 ).setHeight( 300 );
  Logger.log('openUrl. htmlOutput: ' + htmlOutput);
  SpreadsheetApp.getUi().showModalDialog( htmlOutput, `openUrl function in generic.gs is now opening a URL...` ); // https://developers.google.com/apps-script/reference/base/ui#showModalDialog(Object,String)  Requires authorization with this scope: https://www.googleapis.com/auth/script.container.ui  See https://developers.google.com/apps-script/concepts/scopes#setting_explicit_scopes
} 
```

[https://developers.google.com/apps-script/reference/base/ui#showModalDialog(Object,String)](https://developers.google.com/apps-script/reference/base/ui#showModalDialog(Object,String)) 需要在此范围内进行授权：[https](https://www.googleapis.com/auth/script.container.ui) ://www.googleapis.com/auth/script.container.ui 请参阅[https://developers.google.com/apps-script/concepts/scopes#setting_explicit_scopes](https://developers.google.com/apps-script/concepts/scopes#setting_explicit_scopes)*

# javascript - 不使用 eval/new 函数的 JavaScript 模板库

> ID：10744764
> 
> 赞同：13
> 
> 时间：2012-05-24T20:24:43.873
> 
> 标签：javascript, templates, google-chrome-extension, eval

谷歌浏览器扩展使用`manifest_version: 2`被限制使用`eval`或`new Function`。我检查的所有 JavaScript 模板库（mustachejs、underscorejs、jQuery 模板、hoganjs 等）都使用`new Function`. 有没有相当成熟和支持但不使用的？

[有关安全限制的信息](http://code.google.com/p/chromium/issues/detail?id=107538)。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-24T21:15:02.160

事实证明，mustachejs`new Function`最近添加并使用[标签 0.4.2](https://github.com/janl/mustache.js/tree/0.4.2)没有它。它的 API 与`Mustache.to_html`而不是稍有不同，`Mustache.render`并且可能会降低一些性能。

我[打开了一个问题](https://github.com/janl/mustache.js/issues/207)，可能会`new Function`在未来的版本中被删除。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-24T20:30:44.737

[Pure](http://beebole.com/pure/)似乎没有使用`eval`或`new Function`。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-11T20:55:24.903

这里的答案已经过时，所以我发布了更新。

自 9 月以来，Google 更改了他们的政策并允许`unsafe-eval`在清单 2 中扩展。请参阅[此线程](https://groups.google.com/a/chromium.org/forum/?fromgroups=#!topic/chromium-extensions/Wyer5m3Y4tQ)和[此页面](http://developer.chrome.com/trunk/extensions/contentSecurityPolicy.html#relaxing-eval)。

因此，如果为您的扩展打开了，则可以使用 using`eval()`等库`new Function()`。`unsafe-eval`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-25T01:00:02.210

[Closure Templates](https://developers.google.com/closure/templates/)是一个模板库，它不使用`eval`. 模板会提前编译为 JavaScript，因此您的应用程序中包含的内容是一个纯 .js 文件，不应遇到 CSP 问题。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-11-11T21:16:05.117

这真的取决于你所说的“模板库”是什么意思。如果您只想要字符串插值，则不需要`eval`or `new Function`，当您开始需要嵌入式循环结构时，事情会变得更加复杂。

几个月前，我编写了一个[`String.prototype.tmpl.js`脚本](https://github.com/zzzzBov/jsoop/blob/master/String.prototype.tmpl.js)，在我不介意覆盖`String.prototype`. 作为静态函数，您可以使用：

[tmpl.js：]

```
function tmpl(tmpl, o) {
    return tmpl.replace(/<%=(?:"([^"]*)"|(.*?))%>/g, function (item, qparam, param) {
        return o[qparam] || o[param];
    });
} 
```

[一个示例模板：]

```
<div id="bar"></div>
<script type="text/x-tmpl" id="foo">
    <h1><%=title%></h1>
    <p><%=body%></p>
</script>
<script>
    (function () {
        var foo,
            bar;
        foo = document.getElementById('foo');
        bar = document.getElementById('bar');
        bar.innerHTML = tmpl(foo.innerHTML, {
            title: 'foo bar baz',
            body: 'lorem ipsum dolor sit amet'
        });
    }());
</script> 
```

当然可以修改基本`tmpl`脚本以利用文档片段来实际构建 DOM 元素，但我不确定它是否算作“模板库”。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-07-11T05:33:12.757

[远端](http://code.google.com/p/distal)模板不使用 eval。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-07-18T23:22:14.917

此问题的最佳解决方案是在部署扩展之前预编译模板。[handlebarsjs](http://handlebarsjs.com/)和[eco](https://github.com/sstephenson/eco/)都提供预编译功能。我实际上写了一篇更深入的[博客文章。](http://matthewrobertson.org/blog/2012/07/10/javascript-templates-and-chromes-content-security-policy/)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-04-02T02:10:48.223

[https://developer.chrome.com/extensions/sandboxingEval](https://developer.chrome.com/extensions/sandboxingEval)

不确定何时添加，但您现在可以在 Chrome 中进行 Firefox 风格的沙盒。我正在移植我的 Firefox 扩展，所以我需要这个（因为我没有 evalInSandbox :P）

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-05-28T04:32:41.910

也许你可以写一个函数 eval1：

```
function eval1(blah) {
    var s = document.createElement("script");
    s.src = blah;
    document.head.appendChild(s);
    document.head.removeChild(s);
} 
```

并在您想要的库中查找/替换，但那是作弊，对吧？

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-07-14T20:42:50.457

我最近遇到了同样的问题。更新清单版本后，我的扩展程序停止工作。我尝试了 Mustache，但它无法呈现数组的索引和对象属性的名称。所以我必须创建自己的简单但有效的模板库[Ashe](https://github.com/dfsq/Ashe)，它没有`eval`和`new Function`. 希望它会帮助某人。

# c - 在 C 中作为参数引用

> ID：10744766
> 
> 赞同：1
> 
> 时间：2012-05-24T20:24:49.680
> 
> 标签：c, struct

这似乎是一个简单的问题，但我没有任何运气来寻找任何答案，所以就这样吧。我有一个 char* 名称和 int 年龄的结构 Person。我有以下方法：

```
void Person_messup(struct Person &who) {
    who.name="asdfasdf";
    who.age = 9001;
} 
```

编译此代码给我以下错误：

```
error: expected ; , or ) before & token 
```

我可以使用指针甚至传递对象结构来很好地实现上述内容，但是我在这个特定的实现中遇到了麻烦。谢谢您的帮助！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-24T20:27:12.977

c 中没有引用 - 将结构作为指针传递。

```
void Person_messup(Person *who) {
    who->name="asdfasdf"; // or really strcpy!
    who->age = 9001;
} 
```

（或使用 c++ ！）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T20:28:37.243

尝试传递'struct Person * who'。

# facebook - Facebook 应用邀请请求

> ID：10744775
> 
> 赞同：0
> 
> 时间：2012-05-24T20:25:50.970
> 
> 标签：facebook, facebook-graph-api, facebook-fql, json, facebook-app-requests

我想将 App req 发送给 5 个人，我已经设法获得了 5 个人的 UserID，但它总是相同的 5 个人，有没有办法随机化`USERID's`我从 Facebook 获得的？

```
<script>
var profilePicsDiv = document.getElementById('profile_pics');

FB.getLoginStatus(function(response) {

  FB.api({ method: 'friends.get' }, function(result) {
    Log.info('friends.get response', result);
   var user_ids="" ;
    var numFriends = result ? Math.min(5, result.length) : 0;
    if (numFriends > 0) {
      for (var i=0; i<numFriends; i++) {
        user_ids+= (

                          ',' + result[i] 

        );
      }
    }
    profilePicsDiv.innerHTML = user_ids;
alert(user_ids);

  });
});

 function sendRequestToRecipients() {
        var user_ids = document.getElementsByName("user_ids")[0].value;
        FB.ui({method: 'apprequests',
          message: 'My Great Request',
          to: user_ids,                        ///  How to Fill the ID's HERE ?
        }, requestCallback);
      }

</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T21:27:00.950

我还没有测试，但这应该工作，

```
FB.getLoginStatus(function(response) {
 FB.api({ method: 'friends.get' }, function(result) {
   Log.info('friends.get response', result);
   var user_ids="" ;
   var totalFriends = result.length;
   var numFriends = result ? Math.min(5, result.length) : 0;
   if (numFriends > 0) {
      for (var i=0; i<numFriends; i++) {
        var randNo = Math.floor(Math.random() * totalFriends)
        user_ids+= (',' + result[randNo]);
      }
    }
    profilePicsDiv.innerHTML = user_ids;
alert(user_ids);

  });
}); 
```

在这里，在循环中，我生成一个从 0 到的随机数`result.length`（即当前响应中的好友总数），然后我使用该随机数从给定列表中获取随机 id。

**编辑：（**在OP询问非重复随机数之后），

根据您的要求，这应该可以...

```
 FB.getLoginStatus(function(response) {
     FB.api({ method: 'friends.get' }, function(result) {
       Log.info('friends.get response', result);
       var user_ids="" ;
       var totalFriends = result.length;
       var randNo = Math.floor(Math.random() * totalFriends);
       var numFriends = result ? Math.min(5,totalFriends) : 0;
       if (numFriends > 0) {
          for (var i=0; i<numFriends; i++) { 
            user_ids+= (',' + result[randNo]);
            randNo ++;
            if(randNo >= totalFriends){
                randNo = 0;
            } 
          }
        }
        profilePicsDiv.innerHTML = user_ids;
    alert(user_ids);

      });
    }); 
```

在这里，我不是每次都生成随机数，而是生成一个随机数，然后递增它。如果随机数超过好友总数，那么我从 0 开始。

这每次都会给随机的朋友:)

代码未经测试，如有错误，我深表歉意（但代码肯定会给你一个思考的方向）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T20:29:45.180

您现在总是从结果中获取朋友 0、1、2、3 和 4。如果结果更长，那么您将永远无法获得这些朋友 ID。您应该计算 5 个介于 0 和 length - 1（含）之间的随机整数，然后取而代之（例如，`result[3]`、`result[84]`等）。然后，您应该向这些朋友发送邀请。

要计算 和 之间的随机数`0`，`result.length - 1`请参阅这个 StackOverflow 问题：[在 JavaScript 中生成特定范围内的随机整数？](https://stackoverflow.com/questions/1527803/generating-random-numbers-in-javascript-in-a-specific-range).

我对这个`FB.ui`函数不太熟悉，但你应该检查你是否按照它期望的方式给出数字。它是否像现在一样希望它们以逗号分隔？或者你必须调用它五次，每次应用请求一次？那是你应该查的东西。如果是后者，那么您必须遍历 user_ids 并`FB.ui`使用每个用户 ID 进行调用。

# mysql - 再次使用Mysql，分组并显示其余行

> ID：10744778
> 
> 赞同：0
> 
> 时间：2012-05-24T20:26:06.070
> 
> 标签：mysql, group-by, group-concat

我有表：

id, day, user, value, active

现在我从 ppl GROUP BY 用户那里得到 SELECT day

但！我想把所有的日子都排成一排，而不仅仅是一个

例如

日：1,2,3,4,5,6,7,8,9... 用户：myusername

可能吗？

是的，

```
SELECT
     user,
     GROUP_CONCAT(day) day
 FROM ppl
 GROUP BY 1; 
```

是我问题的答案，但我有下一个，最后一个

这是查询的结果 [http://screenshooter.net/0562655/24_05_2012__22_37_09](http://screenshooter.net/0562655/24_05_2012__22_37_09)

如何改变

```
row 3 from 8,9,10 to 8-10
row 5 from 21,22,23,24,28,29,30 to 21-24,28-30
row 6 from 17,21,22,23,24,25 to 17,21-25 
```

?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T20:28:09.160

```
 SELECT
     user,
     GROUP_CONCAT(day) day
 FROM ppl
 GROUP BY 1; 
```

# jquery - 在不知道标签名称的情况下获取 XML 文件的所有节点

> ID：10744780
> 
> 赞同：0
> 
> 时间：2012-05-24T20:26:21.533
> 
> 标签：jquery

我正在尝试将 xml 文件的 url 加载到我的页面中，然后使用 jQuery 或 ajax 将 xml 中的“文本”加载到字符串中。我不知道属性。到目前为止，我一直在尝试，但没有成功：

```
$(document).read(function){
                    $.get(infile, function(xml){
                    string = $(xml).text());
                    }
                }); 

                document.getElementById("input").innerHTML = string; 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T20:31:13.020

您的脚本有很多错误。试试这个：

```
$(document).ready(function(){
                $.get(infile, function(xml){
                  $("#input").text(xml);
                });
            }); 
```

# session - 如何在 Everyauth 的 .findOrCreateUser 上获取 Express sessionID？

> ID：10744785
> 
> 赞同：1
> 
> 时间：2012-05-24T20:26:43.363
> 
> 标签：session, node.js, express, socket.io, everyauth

我尝试在 Everyauth 的 .findOrCreateUser 上获取*Express sessionID 。*

**这个问题的背景：**

基本上，我尝试整合 Socket.IO 和 Express，并阅读[socket.io 和 Express。将这一切捆绑在一起，](http://www.danielbaulig.de/socket-ioexpress/)

我可以从 socket.IO 范围获取*Express sessionID ，这对我的项目设计很重要。*

```
io.sockets.on('connection', function (socket) {
    console.log('A socket with sessionID ' + socket.handshake.sessionID 
        + ' connected!');
}); 
```

到目前为止一切顺利......然后，**我还需要在 Everyauth 的 .findOrCreateUser 上获取*Express sessionID 。***

虽然我是 Everyauth 的初学者，但在配置如下everyauth 进程后，我设法获得了 facebook/google/twitter 用户 ID 等，例如everyauth.facebook：

```
everyauth.facebook
    .entryPath('/auth-facebook')
    .appId(conf.fb.appId)
    .appSecret(conf.fb.appSecret)
    .findOrCreateUser(function (session, accessToken, accessTokenExtra, fbUserMetadata)
    {
        console.log("@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@");
        console.log(session); //  <-- if this session object includes sessionID, everything works for me..
        console.log(fbUserMetadata);
        return usersByFbId[fbUserMetadata.id] ||
            (usersByFbId[fbUserMetadata.id] = addUser('facebook', fbUserMetadata));
    })
    .redirectPath('/public/authdone.html'); 
```

node.js console.log 如下：

```
2012-05-24T18:59:31+00:00 app[web.1]: @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
2012-05-24T18:59:31+00:00 app[web.1]: { lastAccess: 1337885971024,
2012-05-24T18:59:31+00:00 app[web.1]:   cookie: 
2012-05-24T18:59:31+00:00 app[web.1]:    { path: '/',
2012-05-24T18:59:31+00:00 app[web.1]:      httpOnly: true,
2012-05-24T18:59:31+00:00 app[web.1]:      _expires: Thu, 24 May 2012 22:59:30 GMT,
2012-05-24T18:59:31+00:00 app[web.1]:      originalMaxAge: 14400000 },
2012-05-24T18:59:31+00:00 app[web.1]:   auth: 
2012-05-24T18:59:31+00:00 app[web.1]:    { twitter: 
2012-05-24T18:59:31+00:00 app[web.1]:       { token: 'w0HH4lrzMfeqCLOwd4ncHoPndlyHHqMvyXZM5mGhx8',
2012-05-24T18:59:31+00:00 app[web.1]:         tokenSecret: 'Pzfooy4UVRZpwXvPMJRDFXUX1LdMN59hZwz4ZkBIOc' },
2012-05-24T18:59:31+00:00 app[web.1]:      facebook: 
2012-05-24T18:59:31+00:00 app[web.1]:       { user: [Object],
2012-05-24T18:59:31+00:00 app[web.1]:         accessToken: 'AAACrg6U8ThcBAG4QVDvIM5Qjd2gsjc3jYnHBas7g0w5QcdUJ0cgXXYBBCnmNaz8exdiFLtgXvruoErZCCXX9yitSZB3SIoAB0cKSPguAZDZD' },
2012-05-24T18:59:31+00:00 app[web.1]:      loggedIn: true,
2012-05-24T18:59:31+00:00 app[web.1]:      userId: 1,
2012-05-24T18:59:31+00:00 app[web.1]:      google: 
2012-05-24T18:59:31+00:00 app[web.1]:       { user: [Object],
2012-05-24T18:59:31+00:00 app[web.1]:         accessToken: 'ya29.AHES6ZRq_AFBJNLG92rSuqApI7dmE0fSq12AifJ14nxNNwlJ6OsFo58' } } } 
```

显然，twitter、facebook 和 google 身份验证信息是通过 express 会话适当收集的，但是，

**.findOrCreateUser(function (session...** 不包括*Express sessionID*

如何适当地在 Everyauth 的 .findOrCreateUser 上获取 Express sessionID？谢谢。

* * *

编辑

在这篇文章之后，我尝试实施

```
everyauth.facebook
    .entryPath('/auth-facebook')
    .appId(conf.fb.appId)
    .appSecret(conf.fb.appSecret)
    .findOrCreateUser(function (session, accessToken, accessTokenExtra, fbUserMetadata)
    {
        console.log("@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@");
        console.log(session);
        console.log(fbUserMetadata);
        return usersByFbId[fbUserMetadata.id] ||
            (usersByFbId[fbUserMetadata.id] = addUser('facebook', fbUserMetadata));
    })
    .findUserById(function (req, userId, callback)
    {
        console.log("######################################");
        console.log(req.sessionID);
    })
    .redirectPath('/public/authdone.html'); 
```

但是， .findUserById(function (req, userId, callback) 从未被解雇...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T02:22:00.317

好的，

我应该做的

```
console.log(session.id); 
```

但是，我认为当我执行 console.log(session); 时会出现整个对象内容。

# c++ - 运算符 << 必须只接受一个参数

> ID：10744787
> 
> 赞同：100
> 
> 时间：2012-05-24T20:26:46.710
> 
> 标签：c++, operator-overloading, iostream

啊

```
#include "logic.h"
...

class A
{
friend ostream& operator<<(ostream&, A&);
...
}; 
```

逻辑.cpp

```
#include "a.h"
...
ostream& logic::operator<<(ostream& os, A& a)
{
...
}
... 
```

当我编译时，它说：

> std::ostream& logic::operator<<(std::ostream&, A&)' 必须只取一个参数。

问题是什么？

* * *

## 回答 #1

> 赞同：143
> 
> 时间：2012-05-24T20:28:53.573

问题是你在类中定义它，它

a) 表示第二个参数是隐含的 ( `this`) 并且

b）它不会做你想做的事，即 extend `std::ostream`。

您必须将其定义为自由函数：

```
class A { /* ... */ };
std::ostream& operator<<(std::ostream&, const A& a); 
```

* * *

## 回答 #2

> 赞同：52
> 
> 时间：2012-05-24T21:13:52.957

友元函数不是成员函数，所以问题是您声明`operator<<`为 的友元`A`：

```
 friend ostream& operator<<(ostream&, A&); 
```

然后尝试将其定义为类的成员函数`logic`

```
 ostream& logic::operator<<(ostream& os, A& a)
          ^^^^^^^ 
```

您是否对`logic`是类还是命名空间感到困惑？

该错误是因为您尝试定义一个带有`operator<<`两个参数的成员，这意味着它需要三个参数，包括隐式`this`参数。运算符只能接受两个参数，因此当您编写`a << b`两个参数时是`a`和`b`。

您想定义`ostream& operator<<(ostream&, const A&)`为非成员函数，绝对**不是**成员，`logic`因为它与该类无关！

```
std::ostream& operator<<(std::ostream& os, const A& a)
{
  return os << a.number;
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-06-23T02:27:18.030

我遇到了模板类的这个问题。这是我必须使用的更通用的解决方案：

```
template class <T>
class myClass
{
    int myField;

    // Helper function accessing my fields
    void toString(std::ostream&) const;

    // Friend means operator<< can use private variables
    // It needs to be declared as a template, but T is taken
    template <class U>
    friend std::ostream& operator<<(std::ostream&, const myClass<U> &);
}

// Operator is a non-member and global, so it's not myClass<U>::operator<<()
// Because of how C++ implements templates the function must be
// fully declared in the header for the linker to resolve it :(
template <class U>
std::ostream& operator<<(std::ostream& os, const myClass<U> & obj)
{
  obj.toString(os);
  return os;
} 
```

现在： * 我的 toString() 函数如果要隐藏在 cpp 中，则不能内联。* 你在标题中遇到了一些代码，我无法摆脱它。* 运算符将调用 toString() 方法，它不是内联的。

operator<< 的主体可以在friend 子句中或在类外声明。两种选择都很丑。:(

也许我误解或遗漏了一些东西，但只是前向声明操作员模板不会链接到 gcc。

这也有效：

```
template class <T>
class myClass
{
    int myField;

    // Helper function accessing my fields
    void toString(std::ostream&) const;

    // For some reason this requires using T, and not U as above
    friend std::ostream& operator<<(std::ostream&, const myClass<T> &)
    {
        obj.toString(os);
        return os;
    }
} 
```

如果您使用未模板化的父类来实现 operator<<，并使用虚拟 toString() 方法，我认为您还可以避免强制在标头中声明的模板问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-09-26T19:37:24.617

如果您定义`operator<<`为成员函数，它将具有与使用非成员不同的分解语法`operator<<`。非成员`operator<<`是二元运算符，其中成员`operator<<`是一元运算符。

```
// Declarations
struct MyObj;
std::ostream& operator<<(std::ostream& os, const MyObj& myObj);

struct MyObj
{
    // This is a member unary-operator, hence one argument
    MyObj& operator<<(std::ostream& os) { os << *this; return *this; }

    int value = 8;
};

// This is a non-member binary-operator, 2 arguments
std::ostream& operator<<(std::ostream& os, const MyObj& myObj)
{
    return os << myObj.value;
} 
```

所以....你怎么称呼他们？运算符在某些方面很奇怪，我会挑战你`operator<<(...)`在头脑中编写语法以使事情有意义。

```
MyObj mo;

// Calling the unary operator
mo << std::cout;

// which decomposes to...
mo.operator<<(std::cout); 
```

或者您可以尝试调用非成员二元运算符：

```
MyObj mo;

// Calling the binary operator
std::cout << mo;

// which decomposes to...
operator<<(std::cout, mo); 
```

当你把这些运算符变成成员函数时，你没有义务让它们表现得直观，如果你愿意，你可以定义`operator<<(int)`左移一些成员变量，理解人们可能有点措手不及，不管你有多少评论写。

几乎最后，有时操作员呼叫的两种分解都有效，您可能会在这里遇到麻烦，我们将推迟该对话。

最后，请注意编写一个看起来像二元运算符的一元成员运算符可能是多么奇怪（因为您可以使成员运算符虚拟......也试图不下放并沿着这条路径运行...... )

```
struct MyObj
{
    // Note that we now return the ostream
    std::ostream& operator<<(std::ostream& os) { os << *this; return os; }

    int value = 8;
}; 
```

这种语法现在会激怒许多编码人员......

```
MyObj mo;

mo << std::cout << "Words words words";

// this decomposes to...
mo.operator<<(std::cout) << "Words words words";

// ... or even further ...
operator<<(mo.operator<<(std::cout), "Words words words"); 
```

请注意`cout`这里链中的第二个参数是如何......奇怪的吧？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-03-25T14:59:09.313

运算符重载包括成员函数重载和非成员函数重载，不能混用。[https://condor.depaul.edu/ntomuro/courses/262/notes/lecture3.html](https://condor.depaul.edu/ntomuro/courses/262/notes/lecture3.html)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-10-21T14:00:53.893

关键点是定义为友元函数的`logic::`前面。`operator<<`

`logic::`仅在成员函数之前添加。我理解这类似于告诉编译器这个函数是一个成员函数并授予它相应的权限（例如访问私有函数）。

换句话说，正如@asaelr 和@Morteza 所提到的，“在定义友元函数时，您不要使用类的名称来限定友元函数的名称”。

因此，我们应该删除`logic::`before `operator<<`。

# c++ - 每台显示器显示不同的图像 directX 10

> ID：10744788
> 
> 赞同：6
> 
> 时间：2012-05-24T20:26:50.947
> 
> 标签：c++, directx, multiple-monitors

我对 DirectX 10 编程相当陌生，我一直在尝试用我有限的技能来做以下事情（尽管我对 OpenGL 有很强的背景）

我正在尝试显示 2 个不同的纹理四边形，每台显示器 1 个。为此，我知道我需要一个 D3D10 设备、多个 (2) 交换链和单个 VertexBuffer

虽然我认为我能够创建所有这些，但我仍然不确定如何处理所有这些。我需要多个 ID3D10RenderTargetView(s) 吗？我应该如何以及在哪里使用 OMSetRenderTargets(...) ？

除了 MSDN，这些概念的文档或解释相当有限，因此非常欢迎任何帮助。这是我的一些代码：

这是渲染代码

```
for(int i = 0; i < screenNumber; i++){
    //clear scene
    pD3DDevice->ClearRenderTargetView( pRenderTargetView, D3DXCOLOR(0,1,0,0) );

    //fill vertex buffer with vertices
    UINT numVertices = 4;   
    vertex* v = NULL;   

    //lock vertex buffer for CPU use
    pVertexBuffer->Map(D3D10_MAP_WRITE_DISCARD, 0, (void**) &v );

    v[0] = vertex( D3DXVECTOR3(-1,-1,0), D3DXVECTOR4(1,0,0,1), D3DXVECTOR2(0.0f, 1.0f) );
    v[1] = vertex( D3DXVECTOR3(-1,1,0), D3DXVECTOR4(0,1,0,1), D3DXVECTOR2(0.0f, 0.0f) );
    v[2] = vertex( D3DXVECTOR3(1,-1,0), D3DXVECTOR4(0,0,1,1), D3DXVECTOR2(1.0f, 1.0f) );
    v[3] = vertex( D3DXVECTOR3(1,1,0), D3DXVECTOR4(1,1,0,1), D3DXVECTOR2(1.0f, 0.0f) ); 

    pVertexBuffer->Unmap();

    // Set primitive topology 
    pD3DDevice->IASetPrimitiveTopology( D3D10_PRIMITIVE_TOPOLOGY_TRIANGLESTRIP );

    //set texture
    pTextureSR->SetResource( textureSRV[textureIndex] );

    //get technique desc
    D3D10_TECHNIQUE_DESC techDesc;
    pBasicTechnique->GetDesc( &techDesc );

    // This is where you actually use the shader code
    for( UINT p = 0; p < techDesc.Passes; ++p )
    {
        //apply technique
        pBasicTechnique->GetPassByIndex( p )->Apply( 0 );

        //draw
        pD3DDevice->Draw( numVertices, 0 );
    }

    //flip buffers
    pSwapChain[i]->Present(0,0);
} 
```

这是创建渲染目标的代码，我不确定它是否好

```
for(int i = 0; i < screenNumber; ++i){

    //try to get the back buffer
    ID3D10Texture2D* pBackBuffer;   
    if ( FAILED( pSwapChain[1]->GetBuffer(0, __uuidof(ID3D10Texture2D), (LPVOID*) &pBackBuffer) ) ) return fatalError("Could not get back buffer");

    //try to create render target view
    if ( FAILED( pD3DDevice->CreateRenderTargetView(pBackBuffer, NULL, &pRenderTargetView) ) ) return fatalError("Could not create render target view");

    pBackBuffer->Release();
    pD3DDevice->OMSetRenderTargets(1, &pRenderTargetView, NULL);
}

return true; 
```

}

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-05-25T03:28:02.307

I hope I got the gist of what you wish to do - render different content on two different monitors while using a single graphics card (graphics adapter) which maps its output to those monitors. For that, you're going to need one device (for the single graphics card/adapter) and enumerate just how many outputs there are at the user's machine.

So, in total - that means one device, two outputs, two windows and therefore - two swap chains.

Here's a quick result of my little experiment:

![The result](../Images/c316e2e07509282f3fa2056a7b25895f.png)

## A little introduction

With DirectX 10+, this falls into the DXGI (DirectX Graphics Infrastructure) which manages the common low-level logistics involved with DirectX 10+ development which, as you probably know, dumped the old requirement of enumerating feature sets and the like - requiring every DX10+ capable card to share in on all of the features defined by the API. The only thing that varies is the extent and capability of the card (in other words, lousy performance is preferable to the app crashing and burning). This was all within DirectX 9 in the past, but people at Microsoft decided to pull it out and call it DXGI. Now, we can use DXGI functionality to set up our multi monitor environment.

> Do I need multiple ID3D10RenderTargetView(s) ?

Yes, you do need multiple render target views, count depends (like the swap chains and windows) on the number of monitors you have. But, to save you from spewing words, let's write it out as simple as possible and additional information where it's needed:

*   Enumerate all adapters available on the system.
*   For each adapter, enumerate all outputs available (and active) and create a device to accompany it.
*   With the enumerated data stored in a suitable structure (think arrays which can quickly relinquish size information), use it to create n windows, swap chains, render target views, depth/stencil textures and their respective views where n is equal to the number of outputs.
*   With everything created, for each window you are rendering into, you can define special routines which will use the available geometry (and other) data to output your results - which resolves to what each monitor gets in fullscreen (don't forget to adjust the viewport for every window accordingly).
*   Present your data by iterating over every swap chain which is linked to its respective window and swap buffers with Present()

Now, while this is rich in word count, some code is worth a lot more. This is designed to give you a coarse idea of what goes into implementing a simple multimonitor application. So, assumptions are that there is only one adapter ( a rather bold statement nowadays ) and multiple outputs - and no failsafes. I'll leave the fun part to you. **Answer to the second question is downstairs...**

*Do note there's no memory management involved. We assume everything magically gets cleaned up when it is not needed for illustration purposes. Be a good memory citizen.*

**Getting the adapter**

```
IDXGIAdapter* adapter = NULL;
void GetAdapter() // applicable for multiple ones with little effort
{
    // remember, we assume there's only one adapter (example purposes)
    for( int i = 0; DXGI_ERROR_NOT_FOUND != factory->EnumAdapters( i, &adapter ); ++i )
    {

        // get the description of the adapter, assuming no failure
        DXGI_ADAPTER_DESC adapterDesc;
        HRESULT hr = adapter->GetDesc( &adapterDesc );

        // Getting the outputs active on our adapter
        EnumOutputsOnAdapter();

} 
```

**Acquiring the outputs on our adapter**

```
std::vector<IDXGIOutput*> outputArray; // contains outputs per adapter
void EnumOutputsOnAdapter()
{
    IDXGIOutput* output = NULL;
    for(int i = 0; DXGI_ERROR_NOT_FOUND != adapter->EnumOutputs(i, &output); ++i)
    {

        // get the description
        DXGI_OUTPUT_DESC outputDesc;
        HRESULT hr = output->GetDesc( &outputDesc );

        outputArray.push_back( output );
    }

} 
```

Now, I must assume that you're at least aware of the Win32 API considerations, creating window classes, registering with the system, creating windows, etc... Therefore, I will not qualify its creation, only elaborate how it pertains to multiple windows. Also, I will only consider the fullscreen case here, but creating it in windowed mode is more than possible and rather trivial.

**Creating the actual windows for our outputs**

Since we assume existence of just one adapter, we only consider the enumerated outputs linked to that particular adapter. It would be preferable to organize all window data in neat little structures, but for the purposes of this answer, we'll just shove them into a simple struct and then into yet another std::vector object, and by them I mean handles to respective windows (HWND) and their size (although for our case it's constant).

But still, we have to address the fact that we have one swap chain, one render target view, one depth/stencil view per window. So, why not feed all of that in that little struct which describes each of our windows? Makes sense, right?

```
struct WindowDataContainer
{
    //Direct3D 10 stuff per window data
    IDXGISwapChain* swapChain;
    ID3D10RenderTargetView* renderTargetView;
    ID3D10DepthStencilView* depthStencilView;

    // window goodies
    HWND hWnd;
    int width;
    int height;
} 
```

Nice. Well, not really. But still... Moving on! Now to create the windows for outputs:

```
std::vector<WindowDataContainer*> windowsArray;
void CreateWindowsForOutputs()
{
    for( int i = 0; i < outputArray.size(); ++i )
    {

        IDXGIOutput* output = outputArray.at(i);
        DXGI_OUTPUT_DESC outputDesc;
        p_Output->GetDesc( &outputDesc );
        int x = outputDesc.DesktopCoordinates.left;
        int y = outputDesc.DesktopCoordinates.top;
        int width = outputDesc.DesktopCoordinates.right - x;
        int height = outputDesc.DesktopCoordinates.bottom - y;

        // Don't forget to clean this up. And all D3D COM objects.
        WindowDataContainer* window = new WindowDataContainer;

        window->hWnd = CreateWindow( windowClassName,
                                        windowName,
                                        WS_POPUP,
                                        x,
                                        y,
                                        width,
                                        height,
                                        NULL,
                                        0,
                                        instance,
                                        NULL );

        // show the window
        ShowWindow( window->hWnd, SW_SHOWDEFAULT );

        // set width and height
        window->width = width;
        window->height = height;

        // shove it in the std::vector
        windowsArray.push_back( window );

        //if first window, associate it with DXGI so it can jump in
        // when there is something of interest in the message queue
        // think fullscreen mode switches etc. MSDN for more info.
        if(i == 0)
            factory->MakeWindowAssociation( window->hWnd, 0 );

    }
} 
```

Cute, now that's done. Since we only have one adapter and therefore only one device to accompany it, create it as usual. In my case, it's simply a global interface pointer which can be accessed all over the place. We are not going for code of the year here, so why the hell not, eh?

**Creating the swap chains, views and the depth/stencil 2D texture**

Now, our friendly swap chains... You might be used to actually creating them by invoking the "naked" function `D3D10CreateDeviceAndSwapChain(...)`, but as you know, we've already made our device. We only want one. And multiple swap chains. Well, that's a pickle. Luckily, our DXGIFactory interface has swap chains on its production line which we can receive for free with complementary kegs of rum. Onto the swap chains then, create for every window one:

```
void CreateSwapChainsAndViews()
{
    for( int i = 0; i < windowsArray.size(); i++ )
    {
        WindowDataContainer* window = windowsArray.at(i);

        // get the dxgi device
        IDXGIDevice* DXGIDevice = NULL;
        device->QueryInterface( IID_IDXGIDevice, ( void** )&DXGIDevice ); // COM stuff, hopefully you are familiar

        // create a swap chain
        DXGI_SWAP_CHAIN_DESC swapChainDesc;

        // fill it in

        HRESULT hr = factory->CreateSwapChain( DXGIDevice, &swapChainDesc, &p_Window->swapChain );
        DXGIDevice->Release();
        DXGIDevice = NULL;

         // get the backbuffer
        ID3D10Texture2D* backBuffer = NULL;
        hr = window->swapChain->GetBuffer( 0, IID_ID3D10Texture2D, ( void** )&backBuffer );

        // get the backbuffer desc
        D3D10_TEXTURE2D_DESC backBufferDesc;
        backBuffer->GetDesc( &backBufferDesc );

        // create the render target view
        D3D10_RENDER_TARGET_VIEW_DESC RTVDesc;

        // fill it in

        device->CreateRenderTargetView( backBuffer, &RTVDesc, &window->renderTargetView );
        backBuffer->Release();
        backBuffer = NULL;

        // Create depth stencil texture
        ID3D10Texture2D* depthStencil = NULL;
        D3D10_TEXTURE2D_DESC descDepth;

        // fill it in

        device->CreateTexture2D( &descDepth, NULL, &depthStencil );

        // Create the depth stencil view
        D3D10_DEPTH_STENCIL_VIEW_DESC descDSV;

        // fill it in

        device->CreateDepthStencilView( depthStencil, &descDSV, &window->depthStencilView );

    }

} 
```

We now have everything we need. All that you need to do is define a function which iterates over all windows and draws different stuff appropriately.

> How and where should I Use OMSetRenderTargets(...) ?

In the just mentioned function which iterates over all windows and uses the appropriate render target (courtesy of our per-window data container):

```
void MultiRender( )
{
    // Clear them all
    for( int i = 0; i < windowsArray.size(); i++ )
    {
        WindowDataContainer* window = windowsArray.at(i);

        // There is the answer to your second question:
        device->OMSetRenderTargets( 1, &window->renderTargetView, window->depthStencilView );

        // Don't forget to adjust the viewport, in fullscreen it's not important...
        D3D10_VIEWPORT Viewport;
        Viewport.TopLeftX = 0;
        Viewport.TopLeftY = 0;
        Viewport.Width = window->width;
        Viewport.Height = window->height;
        Viewport.MinDepth = 0.0f;
        Viewport.MaxDepth = 1.0f;
        device->RSSetViewports( 1, &Viewport );

        // TO DO: AMAZING STUFF PER WINDOW
    }
} 
```

Of course, don't forget to run through all the swap chains and swap buffers per window basis. The code here is just for the purposes of this answer, it requires a bit more work, error checking (failsafes) and contemplation to get it working just the way you like it - in other words - it should give you a simplified overview, not a production solution.

Good luck and happy coding! Sheesh, this is huge.

# javascript - Javascript：event.which 和 charCodeAt 一起工作

> ID：10744793
> 
> 赞同：7
> 
> 时间：2012-05-24T20:27:07.867
> 
> 标签：javascript, jquery, keypress

我获取用户在按键上使用 event.which 键入的内容，并使用 String.fromCharCode 输出。

用户类型： **a**
event.which：**67**
输出： **A**

对于我可以处理的数字和字母，但在谈论特殊字符时，我会得到完全不同的输出。

用户类型： **-**
event.which：**189**
输出： **½**

经过研究，我遇到了函数**charCodeAt**，使用这个函数，输出非常完美，甚至是特殊字符。

不幸的是，我不能使用 charCodeAt，因为用户直接从 $(document) 输入，而不是从字段输入。

所以，问题是，有没有办法从 keyPress event.which 中获取正确的 charCode？

如果仍然无法弄清楚我的疑问，我给你做了一个[小提琴](http://jsfiddle.net/QCHt7/)=）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-24T20:38:00.803

使用`keypress`事件而不是`keyup`. 它报告字符代码而不是键代码，并且在键入实际字符时触发，而不是在释放键时触发，因此它也处理重复字符。

```
$('#field').focus().keypress(function(e){
  var key = e.which;
  $("#key").val(String.fromCharCode(key));
}); 
```

[http://jsfiddle.net/Guffa/QCHt7/1/](http://jsfiddle.net/Guffa/QCHt7/1/)

### 编辑：

如果您想在任何地方捕获按键，您必须在文档上以及任何消耗按键的元素上连接事件。例如，一个文本框将处理按键并且不会让它冒泡到父元素。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-24T21:03:25.750

您正在使用 keyup，该事件报告按下了哪个键，而不是输入了哪个字符。您应该改用 keypress ，如下所示：

```
$(document).keyup(function(e){
    console.log(String.fromCharCode(e.which));
}); 
```

来自[keypress 上的 jquery 文档](http://api.jquery.com/keypress/)：

> 请注意，keydown 和 keyup 提供了指示按下哪个键的代码，而 keypress 指示输入了哪个字符。例如，小写的“a”将被 keydown 和 keyup 报告为 65，但被 keypress 报告为 97。所有事件都将大写“A”报告为 65。由于这种区别，当捕获特殊按键（如箭头键）时，.keydown() 或 .keyup() 是更好的选择。

# vb.net - 更新以编程方式添加的控件

> ID：10744795
> 
> 赞同：1
> 
> 时间：2012-05-24T20:27:16.060
> 
> 标签：vb.net, winforms

我有一个自定义控件，我在 flowlayoutpanel 中添加了一些控件：

```
Dim drive As New WindowsControlLibrary1.UserControl1()
drive.FileSystemlable = reader.GetString(2)
drive.AbalableSpaceLable = Convert.ToInt32(reader.GetString(4) / 1024)
drive.TotalSpaceLable = Convert.ToInt32(reader.GetString(5) / 1024)
drive.SetVolumeLable = reader.GetString(3)
Dim usedspace As Integer = Convert.ToInt32(reader.GetString(5)) - Convert.ToInt32(reader.GetString(4))
drive.BarValue = usedspace / 1024

Form1.FlowLayoutPanel1.Controls.Add(drive) 
```

我现在如何更新这些控件而不是清除它们并再次重新添加它们？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T20:32:01.833

尝试为您的控件提供唯一的名称：

```
Dim drive As New WindowsControlLibrary1.UserControl1()
drive.Name = "drive1" 
```

那么您可以在面板的控件集合中按名称引用它们：

```
With DirectCast(Form1.FlowLayoutPanel1.Controls("drive1"), WindowsControlLibrary1.UserControl1)
  .BarValue = 50
End With 
```

# c - 无法链接到共享对象中的 ncurses

> ID：10744796
> 
> 赞同：2
> 
> 时间：2012-05-24T20:27:22.593
> 
> 标签：c, shared, ncurses, shared-libraries, object-files

出于某种原因，我在编译使用 ncurses 的共享对象时遇到问题。即使我包含和链接 -lncurses，编译 .so 文件也会失败。请指教。

```
#include <string.h>
#include "../include/mod_curse.h" /* Includes ncurses.h and friends */

int OnConsoleCmd(McapiS *API, ArgS *CmdArgs)    /* Just ignore these, they're included in mod_curse.h */
{
    if(!strcmp(CmdArgs->Data, "help"))
    {
        API->BPrintf(STD, "\n-- mod_curse.so --\n");

        return 0;
    }
}

int OnLoad(McapiS *API, va_list Args)
{
    initscr();  /* These are the problems */
}

/* Time to clean up and unload the module */
int OnDeload(McapiS *API, va_list Args)
{
    endwin();
} 
```

这是生成文件：

```
CC = clang
CFLAGS = -Wall -fPIC

# Object Files
OBJ =   mod_curse.o
# Header Files
INCLUDE =   include/mod_curse.h

# Main Module
mod_setup.so: $(OBJ) $(INCLUDE)
    $(CC) -shared -Wl,-soname,mod_curse.so,--no-undefined -o ../../mod_curse.so -lncurses $(OBJ)

# Source Files
mod_curse.o: src/mod_curse.c $(INCLUDE)
    $(CC) $(CFLAGS) -c src/mod_curse.c

clean:
    rm $(OBJ) 
```

以下是错误：

```
3 warnings generated.
clang -shared -Wl,-soname,mod_curse.so,--no-undefined -o ../../mod_curse.so -lncurses mod_curse.o 
mod_curse.o: In function `OnLoad':
src/mod_curse.c:(.text+0x81): undefined reference to `initscr'
mod_curse.o: In function `OnDeload':
src/mod_curse.c:(.text+0xb1): undefined reference to `endwin'
clang: error: linker command failed with exit code 1 (use -v to see invocation)
make: *** [mod_setup.so] Error 1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T17:31:47.957

我需要更改我的 make 命令以使 -lncurses 出现在 $(OBJ) 之后。

# mysql - 2个独特的列mysql

> ID：10744797
> 
> 赞同：0
> 
> 时间：2012-05-24T20:27:31.600
> 
> 标签：mysql, unique

我如何做到这一点，所以 2 列不能有相同的数据。我的表由 3 个字段组成。

```
studentid    id_project     level_of_want
1            2                high
1            3                low
1            4                high
1            2                low 
```

我想要的是，一列可以具有相同的数据（例如 1 in `studentid`），但`studentid`and`id_project`不能多次具有相同的数据（上面的实体 1 和 4）。`studentid`可以是 1 也`id_project`可以是 1，但这只能发生一次。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T20:29:34.977

您需要添加一个“唯一”索引。

阅读[http://dev.mysql.com/doc/refman/5.0/en/create-index.html](http://dev.mysql.com/doc/refman/5.0/en/create-index.html)

```
create unique index my_index on my_table (studentid, id_project); 
```

# java - 在 JMapViewer 中的两个地理点之间画线

> ID：10744798
> 
> 赞同：4
> 
> 时间：2012-05-24T20:27:49.440
> 
> 标签：java, swing, openstreetmap, jmapviewer

我正在使用 JMap Viwer [http://wiki.openstreetmap.org/wiki/JMapViewer](http://wiki.openstreetmap.org/wiki/JMapViewer)在 Java 中使用 OpenStreet Maps我可以加载地图，一切正常，但我不知道如何在纬度的两点之间画一条线和经度。

任何人都知道绘制这种线条的功能吗？

谢谢你。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-25T02:36:44.377

为此工作的`addMapPolygon()`方法`JMapViewer`，但`paintPolygon()`默默地拒绝具有少于三个顶点的多边形。对于两点之间的线，只需重复最后一个`Coordinate`。

```
Coordinate one = new Coordinate(...);
Coordinate two = new Coordinate(...);
List<Coordinate> route = new ArrayList<Coordinate>(Arrays.asList(one, two, two));
map.addMapPolygon(new MapPolygonImpl(route)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T22:06:29.023

我也在开发这个软件并使用 JMapviewer.jar。然而，我似乎没有 addMapPolygon 或 MapPolygonImpl ...是否有我应该使用的特定版本？（我在这里下载了我的版本：在此处[输入链接描述](http://svn.openstreetmap.org/applications/viewer/jmapviewer/releases/2011-02-19/)

# google-apps-script - FormEmailer 脚本错误消息

> ID：10744807
> 
> 赞同：0
> 
> 时间：2012-05-24T20:28:29.163
> 
> 标签：google-apps-script

我一直在使用 Henrique Abreu 编写的 FormEmailer 脚本。这是一个了不起的程序，我很高兴找到它。我有一个问题让我感到困惑。当我手动处理这些行时，它工作得很好，但是，当我想使用表单提交触发器时，我收到一条错误消息并且它不起作用。这是消息：onEdit TypeError：无法调用未定义的方法“getSheetByName”。（第 198 行）formSubmit 我很难过，任何帮助或建议将不胜感激！在此先感谢，迈克尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T01:26:13.207

您如何为“表单提交”设置/运行它？根据您的描述，您似乎正在尝试直接从代码编辑器运行它，是吗？如果不是，那么您收到的此错误消息就在您的电子邮件中，对吗？

无论如何，调用正确的函数来运行`timeDriven`。您应该打开脚本编辑器，单击“资源”菜单并设置触发器以运行它。当我写这个版本时，没有[并发支持](http://code.google.com/p/google-apps-script-issues/issues/detail?id=202)，或者无论如何都无法[获取提交的表单行](http://code.google.com/p/google-apps-script-issues/issues/detail?id=128)。因此，我们唯一安全的解决方案是使用时间驱动触发器，这是我建议您使用的。但是，如果您的表单使用率较低，即两个或更多用户几乎不可能同时提交数据，那么您可以使用*表单提交*触发器。

顺便说一句，我不确定 Stackoverflow 是否是提出与[FormEmailer](http://sites.google.com/site/formemailer)相关问题的最佳场所，因为它实际上[仅用于编程](https://stackoverflow.com/faq#questions)疑问。嗯...除非你修改它的代码。FormEmailer 相关问题应发布在其[Google Group](https://sites.google.com/site/formemailer/group)中。

# ruby-on-rails - 在关联表上有一个没有属于的关联

> ID：10744808
> 
> 赞同：1
> 
> 时间：2012-05-24T20:28:33.427
> 
> 标签：ruby-on-rails

我想当模特

```
Dogs
has_one :cat 
```

并在狗表中有一个 cat_id ......然后我想打电话`Dog.first.cat`

这似乎对我不起作用。我错过了什么吗

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T20:34:45.170

您正在使用`has_one`，所以它实际上`cats`是应该有`dog_id`.

在您的情况下，您将`belongs_to :cat`在`Dog`模型中使用。

看看文档：[http ://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html#label-Is+it+a+belongs_to+or+has_one+association%3F](http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html#label-Is+it+a+belongs_to+or+has_one+association%3F)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T20:36:32.730

`Dog belongs_to :cat` `Cat has_one :dog`

# java - BoxLayout 对 strut 的误解

> ID：10744809
> 
> 赞同：4
> 
> 时间：2012-05-24T20:28:37.257
> 
> 标签：java, swing, boxlayout

我正在用 Swing 编写一个简单的输入图。我使用 boxLayout 创建一个简单的用户输入 GUI。问题是在所有标签的 JPanel 和 JTextFields 的 JPanel 之间创建水平支柱会导致整个面板向下移动（奇怪）这是整个面板：

```
private JPanel secondCard() {

    //main panel. set the boxlayout
    secondCard = new JPanel();
    secondCard.setLayout(new BoxLayout(secondCard,BoxLayout.Y_AXIS));

    // create vertical strut for looks
    secondCard.add(Box.createVerticalStrut(20));

    // create title. center it.
    JLabel title = new JLabel("Configure main network parameters "); 
    title.setAlignmentX(CENTER_ALIGNMENT);
    secondCard.add(title);

    // create vertical strut for looks
    secondCard.add(Box.createVerticalStrut(20));

    // create panel for the description labels
    JPanel labelPanel = new JPanel();
    labelPanel.setLayout(new BoxLayout(labelPanel,BoxLayout.Y_AXIS));
    labelPanel.setAlignmentX(LEFT_ALIGNMENT);

    JLabel inPut =new JLabel("number of inputs");
    inPut.setAlignmentX(LEFT_ALIGNMENT);
    labelPanel.add(inPut);

    inPut =new JLabel("number of outputs");
    inPut.setAlignmentX(LEFT_ALIGNMENT);
    labelPanel.add(inPut);

    inPut =new JLabel("number of layers");
    inPut.setAlignmentX(LEFT_ALIGNMENT);
    labelPanel.add(inPut);

    JPanel textFieldPanel = new JPanel();
    textFieldPanel.setLayout(new BoxLayout(textFieldPanel,BoxLayout.Y_AXIS));
    textFieldPanel.setAlignmentX(LEFT_ALIGNMENT);

    JTextField inputTextField = new JTextField();
    inputTextField.setAlignmentX(LEFT_ALIGNMENT);
    textFieldPanel.add(inputTextField);
    inputTextField.setMinimumSize(new Dimension(0,0));

    inputTextField = new JTextField();
    inputTextField.setAlignmentX(LEFT_ALIGNMENT);
    textFieldPanel.add(inputTextField);
    inputTextField.setMinimumSize(new Dimension(0,0));

    inputTextField = new JTextField();
    inputTextField.setAlignmentX(LEFT_ALIGNMENT);
    textFieldPanel.add(inputTextField);
    inputTextField.setMinimumSize(new Dimension(0,0));

    textFieldPanel.setMaximumSize(new Dimension(50, labelPanel.getMaximumSize().height));

    JPanel inputPanel = new JPanel();
    inputPanel.setLayout(new BoxLayout(inputPanel,BoxLayout.X_AXIS));
    inputPanel.setAlignmentX(CENTER_ALIGNMENT);

    inputPanel.add(labelPanel);

    //this is the problem strut!! it causes inputPanel to shift downwards 
    inputPanel.add(Box.createHorizontalStrut(20));

    inputPanel.add(textFieldPanel);

    secondCard.add(inputPanel);

    return secondCard;
} 
```

没有支柱它看起来像： ![在此处输入图像描述](../Images/3cc4482713610ef4e6a89f43b33f7127.png)

使用支柱它看起来像（我知道我在图片编辑方面很烂）：

![在此处输入图像描述](../Images/9369f4dc3d56373706a1d5e5813779ed.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-24T21:35:11.043

您正在`Box`向`BoxLayout`.

正如[javadoc](http://docs.oracle.com/javase/6/docs/api/javax/swing/Box.html#createHorizontalStrut%28int%29)所说，`createHorizontalStrut(int width)`：

> 创建一个不可见的、固定宽度的组件。在水平框中，您通常使用此方法在两个组件之间强制留出一定的空间。在垂直框中，您可以使用此方法强制框至少为指定宽度。除非有多余的空间可用，否则不可见组件没有高度，在这种情况下，它会占用可用空间的份额，就像任何其他没有最大高度的组件一样。

因此，它填充了您的标题`JLabel`和`JPanel`.

您可能要考虑`Box.createRigidArea(new Dimension(20, height))`改用，其中可以指定高度或将高度设置为`labelPanel`.

或者，您可以重新考虑布局`JPanel`- 看看[视觉指南](http://docs.oracle.com/javase/tutorial/uiswing/layout/visual.html)​​。

为了将来参考，如果您无法理解 Swing 布局，请尝试在您不确定的 s`LineBorder`中添加颜色。`JComponent`在这种情况下，`Box`struts 不是`JComponent`s 而是`Component`s，因此您必须将它们放入 a`JPanel`中，但这至少可以向您展示每个组件在顶层 . 中占用的空间`JPanel`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-24T21:18:23.397

*   将[Cardlayout](http://docs.oracle.com/javase/tutorial/uiswing/layout/card.html)用于向导逻辑

*   把[JLabel(Configure ...., JLabel.CENTER)](http://docs.oracle.com/javase/tutorial/uiswing/components/label.html)放到`BorderLayout.NORTH`

*   将带有[JButtons的](http://docs.oracle.com/javase/tutorial/uiswing/components/button.html#jbutton)[JPanel](http://docs.oracle.com/javase/tutorial/uiswing/components/panel.html)放到BorderLayout.SOUTH

*   [将带有SpringLayout](http://docs.oracle.com/javase/tutorial/uiswing/layout/spring.html)、[GridLayout](http://docs.oracle.com/javase/tutorial/uiswing/layout/grid.html)或[GridBagLayout](http://docs.oracle.com/javase/tutorial/uiswing/layout/gridbag.html)的JPanel放到`BorderLayout.CENTER`

*   [Top-Level Container](http://docs.oracle.com/javase/tutorial/uiswing/components/toplevel.html)默认实现了[BorderLayout](http://docs.oracle.com/javase/tutorial/uiswing/layout/border.html)，没有理由重新定义`BorderLayout`

*   上述步骤称为`NestedLayout`

*   替代品全部`JComponents`使用`GridBagLayout`，`SpringLayout`或今天`MigLayout`使用`JPanel`，但为什么要打扰

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-24T21:35:37.353

嵌套布局示例，使用 BorderLayout、FlowLayout（JPanel 的默认设置）和 GridBagLayout：

```
import java.awt.BorderLayout;
import java.awt.GridBagConstraints;
import java.awt.GridBagLayout;
import java.awt.Insets;
import java.util.HashMap;
import java.util.Map;

import javax.swing.*;

public class LayoutFoo {
   private static final String TITLE = "Configure Main Foobar Parameters";
   private static final String[] LABEL_TEXTS = {
      "Number of Spams", "Number of Frapzats", "Number of Zignuts"
   };
   private static final int TEXTFIELD_SIZE = 10;
   private static final Insets WEST_INSETS = new Insets(5, 5, 5, 10);
   private static final Insets EAST_INSETS = new Insets(5, 10, 5, 5);
   private static final int EB_GAP = 5;
   private Map<String, JTextField> textFieldMap = new HashMap<String, JTextField>();

   public JPanel getConfigFooPanel() {
      JPanel textFieldPanel = new JPanel(new GridBagLayout());
      for (int i = 0; i < LABEL_TEXTS.length; i++) {
         addTextAndField(textFieldPanel, LABEL_TEXTS[i], i);
      }

      int blVertGap = 20;
      JPanel borderLayoutPanel = new JPanel(new BorderLayout(0, blVertGap));
      borderLayoutPanel.setBorder(BorderFactory.createEmptyBorder(EB_GAP, EB_GAP,
            EB_GAP, EB_GAP));
      JLabel titleLabel = new JLabel(TITLE, JLabel.CENTER);
      borderLayoutPanel.add(titleLabel, BorderLayout.PAGE_START);
      borderLayoutPanel.add(textFieldPanel, BorderLayout.CENTER);

      JPanel outerWrapperFlowPanel = new JPanel();
      outerWrapperFlowPanel.add(borderLayoutPanel);

      return outerWrapperFlowPanel;      
   }

   public String getFieldText(String labelText) {
      JTextField field = textFieldMap.get(labelText);
      if (field == null) {
         return ""; // ?? throw exception
      } else {
         return field.getText();
      }
   }

   private void addTextAndField(JPanel panel, String text, int i) {
      JLabel label = new JLabel(text, JLabel.LEFT);
      JTextField textField = new JTextField(TEXTFIELD_SIZE);
      textFieldMap.put(text, textField);
      GridBagConstraints gbc = new GridBagConstraints();
      gbc.gridx = 0;
      gbc.gridy = i;
      gbc.gridwidth = 1;
      gbc.gridheight = 1;
      gbc.weightx = 1.0;
      gbc.weighty = 1.0;
      gbc.fill = GridBagConstraints.HORIZONTAL;
      gbc.anchor = GridBagConstraints.WEST;
      gbc.insets = WEST_INSETS;
      panel.add(label, gbc);

      gbc.gridx = 1;
      gbc.anchor = GridBagConstraints.EAST;
      gbc.insets = EAST_INSETS;
      panel.add(textField, gbc);
   }

   private static void createAndShowGui() {
      JFrame frame = new JFrame("LayoutFoo");
      frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
      frame.getContentPane().add(new LayoutFoo().getConfigFooPanel());
      frame.pack();
      frame.setLocationRelativeTo(null);
      frame.setVisible(true);
   }

   public static void main(String[] args) {
      SwingUtilities.invokeLater(new Runnable() {
         public void run() {
            createAndShowGui();
         }
      });
   }
} 
```

# nuget - 安装 Nuget 包时操作失败

> ID：10744812
> 
> 赞同：0
> 
> 时间：2012-05-24T20:28:45.820
> 
> 标签：nuget

我有一台带有 VS2010 SP 1 和 Nuget 1.8 的“新”windows xp sp3 机器

每次尝试添加 Nuget 包时都会收到以下错误：

此平台不支持指定的加密算法。

有谁知道那是什么意思？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T22:39:35.727

NuGet 1.8 存在一个已知问题：[NuGet issue#2240](http://nuget.codeplex.com/workitem/2240)。Nuget 团队将很快（交叉手指）发布一个热修复。

同时，我建议安装 NuGet 1.7。

编辑：NuGet 发布了修补程序 (1.8.30524.9000)

# graphics - Ogre material lod：我该如何设置？

> ID：10744819
> 
> 赞同：1
> 
> 时间：2012-05-24T20:29:31.943
> 
> 标签：graphics, ogre3d, ogre, mipmaps, level-of-detail

我有一个 Ogre 材质，因为我对 GPU 过滤不满意，所以我想做一个手动 mipmapping，即我创建所有纹理，然后我设置一个基于 lod 的策略来加载正确的纹理。

问题是：我使用哪种策略都没有关系，lod_value 也不重要，我的材质不会改变纹理。我应该怎么办？我正在阅读[手册](http://www.ogre3d.org/docs/manual/manual_15.html#SEC35)，但它确实没有帮助。

这是我的代码：

```
material shader/content
 {
    lod_values 100.0

    technique t1
    {
        lod_index 0
        pass
        {
          scene_blend alpha_blend
          depth_write off

          texture_unit
          {
            filtering none
            texture menu_image.png
          }
        }
    }

    technique t2
    {
        lod_index 1
        pass
        {
          scene_blend alpha_blend
          depth_write off

          texture_unit
          {
            filtering none
            texture menutest.png
          }
        }
    }   
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T15:11:41.577

您发布的内容似乎是正确的。

哪张图显示？我假设 menu_image.png。

要尝试的事情：

*   您确定 menutest.png 与您的其他食人魔资产一起加载吗？
*   你的食人魔日志中是否有任何相关消息？
*   你用的是什么版本的食人魔？尝试 lod_distances 而不是 lod_values
*   是否有代码在运行时修改材料/技术？

# c# - RavenDB 仍然包括往返以加载包含的数据

> ID：10744822
> 
> 赞同：2
> 
> 时间：2012-05-24T20:29:40.983
> 
> 标签：c#, ravendb

我在 ProductFamily（父）和下属列表（SaleItem）之间有父/子关系。我在本地运行 Ravendb 服务器，并将服务器作为控制台应用程序启动。当我查询 Family 数据时，我试图在会话中包含 SaleItems 列表，以避免额外访问服务器。然而，在控制台上，当我逐步执行 foreach 循环时，我看到后续调用为每个家庭加载单独的 saleitem 列表。我想我做错了什么，对它可能是什么感到困惑。我在使用 RavenDB 的第 2 天，因此感谢您的支持。

课程：

```
public class Family
    {
        public string Id { get { return string.Format(@"Families/{0}", this.FamilyID); } }
        public int FamilyID { get; set; }
        public string FamilyNumber { get; set; }
        public string Description { get; set; }
        public string[] SaleitemIds { get; set; }
        public override string ToString()
        {
            return string.Format("Number:{0}  -  {1}", FamilyNumber, Description);
        }
        [JsonIgnore]
        public List<SaleItem> SaleItems { get; set; }
    }
    public class SaleItem
    {
        public string Id { get { return string.Format(@"SaleItems/{0}", this.SaleItemID); } }
        public int SaleItemID { get; set; }
        public string Description { get; set; }
        public override string ToString()
        {
            return string.Format("Number:{0}  -  {1}", SaleItemID.ToString(), Description);
        }
    } 
```

和代码：

```
List<SearchTerm> searchterms = new List<SearchTerm>(){ new SearchTerm(){term="1009110922"}
            ,new SearchTerm(){term="1009112439"}
            ,new SearchTerm(){term="1009122680"}
            ,new SearchTerm(){term="1009124177"}
            ,new SearchTerm(){term="1009133928"}
            ,new SearchTerm(){term="1009135435"}
            ,new SearchTerm(){term="1009148000"}};
        using (IDocumentSession session = documentStore.OpenSession())
        {
            var results = session.Query<Family>().Customize(o => o.Include<SaleItem>(s => s.Id)).Where(x => x.FamilyNumber.In(searchterms.Select(t => t.term).ToList()));

            foreach (Family fam in results)
            {
                Console.WriteLine(fam.ToString());

                fam.SaleItems = session.Load<SaleItem>(fam.SaleitemIds).ToList();
                foreach (SaleItem si in fam.SaleItems)
                {
                    Console.WriteLine("     " + si.ToString());
                }
            }
        } 
```

当我单步执行代码时，我看到了对 Get the saleitems list 的调用：

```
fam.SaleItems = session.Load<SaleItem>(fam.SaleitemIds).ToList(); 
```

我相信我已经错误地实现了一些东西，但是我对这个平台足够新，可以接受我可能只是误解了行为会是什么。在某些情况下，我不希望将 Saleitem 文档嵌入到 Family 文档中，因此在这种情况下，这并不是一个真正的选择。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T11:46:14.243

Doug_w，看看你包括什么：

```
 o.Include<SaleItem>(s => s.Id) 
```

您可能希望它是：

```
 o.Include<SaleItem>(s => s.SaleitemIds ) 
```

# c# - 如何在 C# 中更改 NetworkAdapter 的名称？

> ID：10744827
> 
> 赞同：2
> 
> 时间：2012-05-24T20:29:59.147
> 
> 标签：c#, networking, adapter

人们声称以下 VB 脚本可用于更改网络适配器名称。但是，我很难将其转换为可以做同样事情的 ac# 应用程序。我似乎面临的问题是对 的调用`NetworkInterface.Name`是只读的。

```
Option Explicit

Const NETWORK_CONNECTIONS = &H31&

Dim sOldName= WScript.Arguments(0)
Dim sNewName= WScript.Arguments(1)

Dim objShell, objFolder, colItems, objItem 

Set objShell = CreateObject("Shell.Application")
Set objFolder = objShell.Namespace(NETWORK_CONNECTIONS)

Set colItems = objFolder.Items
For Each objItem in colItems
    If objItem.Name = sOldName Then
        objItem.Name =sNewName 
    End If
Next 
```

我发现这可以解释更多：http: [//blogs.technet.com/b/heyscriptingguy/archive/2005/05/11/how-can-i-rename-a-local-area-connection.aspx](http://blogs.technet.com/b/heyscriptingguy/archive/2005/05/11/how-can-i-rename-a-local-area-connection.aspx)。

好的，所以有一些特殊的文件夹存储了 NIC 名称，您可以通过 SHELL 绑定到这些文件夹来访问这些文件夹。那么你如何在 c# 中做这样的事情呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T18:40:28.530

如果您知道注册表结构的工作原理，您可以通过注册表轻松更改 NIC 的名称。

您将需要 NetworkAdapters GUID 才能找到要打开的路径。要获取网络适配器 GUID，我建议首先查询 WMI“Win32_NetworkAdapter”类。有一个 GUID 属性以及标识特定适配器所需的所有其他属性。

您会在注册表路径中注意到此 GUID：{4D36E972-E325-11CE-BFC1-08002BE10318}
访问链接以获取相关信息： [http://technet.microsoft.com/en-us/library/cc780532(v=ws. 10).aspx](http://technet.microsoft.com/en-us/library/cc780532(v=ws.10).aspx)

```
string fRegistryKey = string.Format(@"SYSTEM\CurrentControlSet\Control\Network\{4D36E972-E325-11CE-BFC1-08002BE10318}\{0}\Connection", NIC_GUID);

RegistryKey RegistryKey = RegistryKey.OpenRemoteBaseKey(RegistryHive.LocalMachine, @"\\" + Server.Name);

RegistryKey = RegistryKey.OpenSubKey(fRegistryKey, true); //true is for WriteAble.

RegistryKey.SetValue("Name", "<DesiredAdapterName>"); 
```

按照设计，Windows UI 不允许重复的 NIC 名称。但是，您可以通过注册表强制重复 NIC 名称。我们已经进行了测试，似乎没有受到重名的严重影响。Windows 似乎仍然可以正常工作。如果您不包含防重复名称逻辑，您只想对针对 NIC 名称的脚本保持警惕。

要创建唯一性，您可以使用与 WMI 查询关联的适配器索引属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T21:12:29.957

您可以使用[System.Management](http://msdn.microsoft.com/en-us/library/system.management.managementclass.aspx)程序集并使用[此类](http://msdn.microsoft.com/en-us/library/windows/desktop/aa394216%28v=vs.85%29.aspx)。

按照此处的示例 - [http://social.msdn.microsoft.com/Forums/en-US/csharplanguage/thread/727c8766-8189-4ad6-956d-958e52b97c05/](http://social.msdn.microsoft.com/Forums/en-US/csharplanguage/thread/727c8766-8189-4ad6-956d-958e52b97c05/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T21:31:49.467

您还可以创建具有您需要和引用的功能的 VB.NET dll，并从您的 C# 代码中调用它。

这是一个演示代码的控制台应用程序（我测试过并且可以工作:)

```
Option Explicit On
Module Module1
    Sub Main()

        Const NETWORK_CONNECTIONS = &H31&

        Dim sOldName = "Local Area Connection"
        Dim sNewName = "Network"

        Dim objShell, objFolder, colItems, objItem
        objShell = CreateObject("Shell.Application")
        objFolder = objShell.Namespace(NETWORK_CONNECTIONS)

        colItems = objFolder.Items
        For Each objItem In colItems
            Console.WriteLine(objItem.Name)
            If objItem.Name = sOldName Then
                objItem.Name = sNewName
            End If
            Console.WriteLine(objItem.Name)
        Next
    End Sub

End Module 
```

它打印出来：

本地连接

网络

# ios - iOS 单例对象存储

> ID：10744831
> 
> 赞同：1
> 
> 时间：2012-05-24T20:30:06.220
> 
> 标签：ios, singleton

当我第一次创建我的应用程序时，我将所有运行时自定义对象和属性存储在我的应用程序委托中，以便我可以跨视图共享它们。我从不喜欢这个并且一直想改变它，所以我今天做了一些阅读并将我所有的运行时属性和对象移动到一个单例对象，如下所示：

```
@synthesize gblStr;

+(AppDataSingleton *)singleObj
{
    static AppDataSingleton * single=nil;

    @synchronized(self)
    {
        if(!single)
        {
            single = [[AppDataSingleton alloc] init];
        }  
    }    
    return single;
} 
```

可以说 gblStr 可以从任何具有单例的视图控制器访问。

这很好用，我现在将所有对象都存储在这里而不是我的应用程序委托中。

在每个视图控制器中，我添加了属性：

```
AppDataSingleton *globalSingleton; 
```

在 viewDidLoad 中，我将其实例化：

```
globalSingleton = [AppDataSingleton singleObj]; 
```

**我的问题是：** 是否会出现用户返回应用程序并且单例已被销毁的情况？我需要检查这个吗？

或者，如果它被破坏了，它会从头开始重新启动应用程序吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T20:37:20.357

如果应用程序崩溃或停止运行，单例将被销毁。除非您将对象写入持久存储（CoreData、.plist、SQLite 等...），否则您还必须重新创建对象...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T20:37:55.037

在我看来，单例应该在程序运行的整个生命周期（即整个会话）中持续存在。如果您没有主动清除它，那么只要应用程序从非活动状态返回，该数据就应该在那里。在任何情况下，您都在检查对象是否为 nil，如果是则重新实例化，因此应该重新水化数据。

如果您担心数据不存在，您应该积极地将其持久化到 CoreData 或沙箱中。

# apache - mod_security 仅阻止 Internet Explorer

> ID：10744832
> 
> 赞同：3
> 
> 时间：2012-05-24T20:30:10.420
> 
> 标签：apache, mod-security2

我用 apache 服务器安装了 mod_security，现在它只阻止了 ie7/8/9 浏览器。（我可以用 firefox/chromium/etc 浏览网页）

日志说：

```
Message: String match within "Proxy-Connection Lock-Token Content-Range Translate via if" at REQUEST_HEADERS_NAMES:Connection. [file "/etc/apache2/mod_security/modsecurity_crs_30_http_policy.conf"] [line "99"] [id "960038"] [msg "HTTP header is restricted by policy"] [data "Connection"] [severity "WARNING"] [tag "POLICY/HEADER_RESTRICTED"] [tag "POLICY/FILES_NOT_ALLOWED"] [tag "WASCTC/WASC-21"] [tag "OWASP_TOP_10/A7"] [tag "PCI/12.1"] [tag "WASCTC/WASC-15"] [tag "OWASP_TOP_10/A7"] [tag "PCI/12.1"]
Message: Access denied with code 403 (phase 2). [file "/etc/apache2/mod_security/modsecurity_crs_49_enforcement.conf"] [line "25"] [msg "Anomaly Score Exceeded (score 20): Common SPAM/Email Harvester crawler"]
Action: Intercepted (phase 2)
Stopwatch: 1337888078594451 2694 (918 2353 -)
Producer: ModSecurity for Apache/2.5.12 (http://www.modsecurity.org/); core ruleset/2.0.6.
Server: Apache 
```

规则 id "960038" 是：

```
SecRule REQUEST_HEADERS_NAMES "@within %{tx.restricted_headers}""phase:2,t:none,pass,nolog,auditlog,msg:'HTTP header is restricted by policy',id:'960038',tag:'POLICY/HEADER_RESTRICTED',tag:'POLICY/FILES_NOT_ALLOWED',tag:'WASCTC/WASC-21',tag:'OWASP_TOP_10/A7',tag:'PCI/12.1',tag:'WASCTC/WASC-15',tag:'OWASP_TOP_10/A7',tag:'PCI/12.1',severity:'4',logdata:'%{matched_var}',setvar:'tx.msg=%{rule.msg}',setvar:tx.anomaly_score=+%{tx.warning_anomaly_score},setvar:tx.policy_score=+%{tx.warning_anomaly_score},setvar:tx.%{rule.id}-POLICY/HEADERS_RESTRICTED-%{matched_var_name}=%{matched_var}" 
```

我有一个主要问题，另外两个来自第一个问题：

*   我怎么知道这条规则是什么？
    *   忽略此规则是否安全？
    *   有什么方法可以修改规则以允许浏览网页？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T11:38:05.373

1.  回答您的第一个问题 Mod-Security 为我们提供了有关其规则语言语法的非常详细的文档，以下是其文档的链接。[ModSecurity 规则语言](http://www.modsecurity.org/documentation/)

2.  TX 用于用户定义的变量**tx.restricted_headers**它定义了您的 HTTP 策略，例如

    SecAction "phase:1,t:none,nolog,pass,setvar:'tx.restricted_headers=/Proxy-Connection/ /Lock-Token/ /Content-Range/ /Translate/ /via/ /if/'" 更详细信息请参阅此[HTTP 政策](http://mod-security.svn.sourceforge.net/viewvc/mod-security/crs/trunk/modsecurity_crs_10_setup.conf.example)

3.  您上面提到的规则不是阻塞的，而是增加了一个针对可疑标头名称维护的数值，如我上面解释的 HTTP 策略中所述。

4.  从提到的日志中可以看到阻止 IE 的规则

    **消息：使用代码 403（第 2 阶段）拒绝访问。[file "/etc/apache2/mod_security/modsecurity_crs_49_enforcement.conf"] [line "25"] [msg "Anomaly Score Exceeded (score 20): Common SPAM/Email Harvester crawler"]**

您可以修改异常分数阈值，也可以更改您的 HTTP 策略。您提到的规则是正确的，不需要评论。希望您明白我的意思

# javascript - javascript 需要从一组复选框中选中一个复选框

> ID：10744834
> 
> 赞同：0
> 
> 时间：2012-05-24T20:30:11.347
> 
> 标签：javascript, checkbox

我试图弄清楚如何使用javascript为一组复选框（php数组）创建一个必填字段。

```
 <?php 
    $hobbiesIndex=0;
    foreach ($hobbies_checkbox as $option => $options){?>
   <input type='checkbox' id='hobbies' name='hobbies[<?php echo $hobbiesIndex; ?>]' value='<?php echo $option;?>'
   <?php if(!empty($hobbies[$hobbiesIndex])){ echo "checked='checked'";} ?> /><label for='hobbies<?php echo $hobbiesIndex ; ?>'><?php echo $options;?></label><br />

  <?php $hobbiesIndex++; }?> 
```

html 代码浏览器看到的内容；p

```
 <input type='checkbox' id='hobbies0' name='hobbies[0]' value='1'/><label for='hobbies0'>football</label><br />

      <input type='checkbox' id='hobbies1' name='hobbies[1]' value='2'/><label for='hobbies1'>soccer</label><br />

      <input type='checkbox' id='hobbies2' name='hobbies[2]' value='3'/><label for='hobbies2'>baseball</label><br />

     <input type='checkbox' id='hobbies3' name='hobbies[3]' value='4'/><label for='hobbies3'>tennis</label><br /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T05:39:53.990

```
if($('input:checkbox[name="hobbies[]"]:checked').length === 0){
$("#multichk").after('<span class="error">Please choose at least one.</span>');
hasError = true;
} 
```

# regex - 正则表达式匹配因为 .* 而一起流动

> ID：10744842
> 
> 赞同：2
> 
> 时间：2012-05-24T20:31:08.573
> 
> 标签：regex

我正在尝试将主机与此文件分开，但我的正则表达式同时选择了两个主机：

```
timestamps|||scan_start|Tue May  1 23:00:29 2012|timestamps||foo.com|host_start|Tue May  1     23:16:51 2012|results|-0017\ntimestamps||foo.com|host_end|Tue May  1 23:19:17     2012|timestamps||bar.com|host_start|Tue May  1 23:24:31 2012|results|general/tcp|Sendmail 8.13.8\n\n\ntimestamps||bar.com|host_end|Tue May  1 23:29:11 2012|timestamps|||scan_end|Wed May  2 00:19:40 2012| 
```

正则表达式：

```
timestamps\|\|[\w,\.]*\|host_start.*host_end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T20:33:29.497

让星星变得懒惰：

```
timestamps\|\|[\w,.]*\|host_start.*?host_end 
```

`.*`是“贪婪的”，尽可能匹配。`.*?`是“懒惰的”并且尽可能少地匹配以实现匹配。因此，它只会匹配到最接近的`host_end`，而不是最后一个。

此外，无需转义字符类中的点。你真的想在字符类中允许逗号，还是你的意思`[\w.]*`？

# objective-c - 从任何其他语言生成 Objective-C 代码

> ID：10744844
> 
> 赞同：2
> 
> 时间：2012-05-24T20:31:11.973
> 
> 标签：objective-c

*是否有用于从任何其他语言*生成 iOS 代码的框架/生成器？

首选动态语言，如 JavaScript、ruby 或 Python。谷歌搜索 iOS 代码生成器基本上没有结果。

像 PhoneGap 这样的系统的问题在于它们的输出是一个成熟的应用程序。我需要生成的是其他 Objective-C 开发人员可以在他们的项目中重用的库（最终是 .a 和 .h 文件）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T03:16:15.600

[RubyMotion](http://www.rubymotion.com/)可能会也可能不会做你想做的事。我还没有看到太多关于它的实用性，但我在想，因为它是静态编译的，所以它可以生成可以简单地链接到 Objective-C 项目的库。可能需要另一种工具来生成头文件。

当然，这都是猜测。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T20:50:44.923

我认为您正在寻找的最佳解决方案是[Titanium](http://www.appcelerator.com/platform/titanium-sdk)。它有自己的 sdk（在 JavaScript 中）、一个完整的 IDE，并允许您拥有一个适用于所有主要平台（包括 iOS、Android）的代码库。真正令人敬畏的是它实际上生成了本机代码（一个有效的 XCode 项目或适用于 Android 的 Java 项目）。它也是免费和开源的。绝对值得一看。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T20:36:01.203

我从未见过代码生成器，但实际上有各种各样的“恶搞”。

[http://xamarin.com/monotouch](http://xamarin.com/monotouch) - C# 上的 iOS

[http://phonegap.com/](http://phonegap.com/) - HTML、CSS、Javascript 上的 iOS

[http://ipodtoucher55.blogspot.com/2010/06/how-to-create-iphone-apps-in-flash-cs5.html](http://ipodtoucher55.blogspot.com/2010/06/how-to-create-iphone-apps-in-flash-cs5.html) - iOS 上 Flash 的几个教程之一

我已经看到了指向 python 库的链接，我也认为是 java。

归根结底，它们都是变通方法，而不是直接开发。

# .net - ItemsControl 绑定当前对象？

> ID：10744846
> 
> 赞同：2
> 
> 时间：2012-05-24T20:31:19.370
> 
> 标签：.net, wpf, data-binding

我刚刚开始学习 WPF，并尝试学习正确的做事方式。我正在使用 ItemsControl 绑定到由点组成的可观察集合。每个点代表一个椭圆的中心。但是我不确定如何绑定到当前项目，到椭圆几何的中心属性。

```
<EllipseGeometry Center="{Binding Path=????}" RadiusX="10" RadiusY="10"/> 
```

但是我知道它或多或少是有效的，因为这给了我预期的输出。我只是不知道如何说当前的对象。

```
<EllipseGeometry Center="10,10" RadiusX="{Binding Path=X}" RadiusY="{Binding Path=Y}"/> 
```

C#代码：

```
public class ViewModel
{
    public ObservableCollection<Point> PointList { get; private set; }

    public ViewModel()
    {
        PointList = new ObservableCollection<Point>();
        AddPoint(new Point(10, 10));
        AddPoint(new Point(200, 200));
        AddPoint(new Point(500, 500));
    }

    public void AddPoint(Point p)
    {
        PointList.Add(p);
    }

} 
```

XAML 代码：

```
<ItemsControl Grid.Row="0" ItemsSource="{Binding Path=PointList}">
    <ItemsControl.ItemsPanel>
    <ItemsPanelTemplate>
        <Canvas />
    </ItemsPanelTemplate>
    </ItemsControl.ItemsPanel>
    <ItemsControl.ItemTemplate>
    <DataTemplate>
        <Path Fill="Gold" Stroke="Black" StrokeThickness="1" Tag="Hi" >
        <Path.Data>
            <EllipseGeometry Center="{Binding Path=????}" RadiusX="10" RadiusY="10"/>
        </Path.Data>
        </Path>
        <!--<Rectangle Fill="Red" Width="25" Height="25"/>-->
    </DataTemplate>
    </ItemsControl.ItemTemplate>
    <ItemsControl.ItemContainerStyle>
    <Style>
        <!--<Setter Property="Canvas.Left" Value="{Binding Path=X}"/>
        <Setter Property="Canvas.Top" Value="{Binding Path=Y}"/>-->
    </Style>
    </ItemsControl.ItemContainerStyle>
</ItemsControl> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-24T20:45:23.997

如果您完全省略路径，则它指的是当前对象。或者，您可以指定一个时间段。因此，所有这些都是等价的：

```
Center="{Binding}"
Center="{Binding .}"
Center="{Binding Path=.}" 
```

# php - 为什么从 php exec 运行时 sass --update 不快？

> ID：10744847
> 
> 赞同：1
> 
> 时间：2012-05-24T20:31:27.280
> 
> 标签：php, sass

我在基于 php 的应用程序中使用 sass，并尝试使用 --update 选项，以便每次浏览器请求相应的 css 文件时都不会重新编译 sass 代码。当我在命令行上运行 sass 命令时，它按预期工作（更改 sass 文件后的编译时间更长，如果没有，则编译时间短）。当我使用 exec 从 php 运行它时，它似乎需要足够长的时间，以至于每次都必须重新编译。任何想法为什么以及如何解决它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T19:50:40.413

看起来这是作为 Web 服务器运行时默认缓存位置的问题。使用 --cache-location 选项指定缓存目录似乎可以解决问题并使其运行得更快。

# c# - 从更新面板中刷新整个页面

> ID：10744849
> 
> 赞同：0
> 
> 时间：2012-05-24T20:31:44.913
> 
> 标签：c#, asp.net

这是我的情况。我有一个 Web 表单页面，每次单击控件时整个页面滚动到顶部时会变得很烦人，因此我正在尝试将更新面板应用于我的页面。

根据各个更新面板的内容是否处于正确状态，提交按钮可能会或可能不会被点击。

单击提交按钮时，它可能会影响页面上的任何控件。

我知道我可以使用`<triggers>`更新面板的标记元素来完成其中的一些操作，但我不想将页面上的所有内容都放入带有自己触发器的更新面板中，我宁愿提交按钮只是重新加载整个页面。

为了简单起见，我整理了一个示例项目来代表我的页面。它有一个“reset”按钮，代表“submit”按钮。

主页面：

```
<%@ Master Language="C#" AutoEventWireup="true" CodeBehind="Site.master.cs" Inherits="WebApplication1.SiteMaster" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head runat="server">
    <title></title>
    <link href="~/Styles/Site.css" rel="stylesheet" type="text/css" />
    <asp:ContentPlaceHolder ID="HeadContent" runat="server">
    </asp:ContentPlaceHolder>
</head>
<body>
    <form runat="server">
    <asp:ScriptManager ID="ScriptManager" runat="server" EnablePartialRendering="true"  />

    <div class="page">
        <div class="header">
            <div class="title">
                <h1>
                    My ASP.NET Application
                </h1>
            </div>
            <div class="loginDisplay">
                <asp:LoginView ID="HeadLoginView" runat="server" EnableViewState="false">
                    <AnonymousTemplate>
                        [ <a href="~/Account/Login.aspx" ID="HeadLoginStatus" runat="server">Log In</a> ]
                    </AnonymousTemplate>
                    <LoggedInTemplate>
                        Welcome <span class="bold"><asp:LoginName ID="HeadLoginName" runat="server" /></span>!
                        [ <asp:LoginStatus ID="HeadLoginStatus" runat="server" LogoutAction="Redirect" LogoutText="Log Out" LogoutPageUrl="~/"/> ]
                    </LoggedInTemplate>
                </asp:LoginView>
            </div>
            <div class="clear hideSkiplink">
                <asp:Menu ID="NavigationMenu" runat="server" CssClass="menu" EnableViewState="false" IncludeStyleBlock="false" Orientation="Horizontal">
                    <Items>
                        <asp:MenuItem NavigateUrl="~/Default.aspx" Text="Home"/>
                        <asp:MenuItem NavigateUrl="~/About.aspx" Text="About"/>
                    </Items>
                </asp:Menu>
            </div>
        </div>
        <div class="main">
            <asp:ContentPlaceHolder ID="MainContent" runat="server"/>
        </div>
        <div class="clear">
        </div>
    </div>
    <div class="footer">

    </div>
    </form>
</body>
</html> 
```

默认页面：

```
<%@ Page Title="Home Page" Language="C#" MasterPageFile="~/Site.master" AutoEventWireup="true"
    CodeBehind="Default.aspx.cs" Inherits="WebApplication1._Default" %>

<asp:Content ID="HeaderContent" runat="server" ContentPlaceHolderID="HeadContent">

</asp:Content>
<asp:Content ID="BodyContent" runat="server" ContentPlaceHolderID="MainContent">

    <asp:Label runat=server Text="This lable represents things not in update panels" ID="label1"></asp:Label>

    <asp:UpdatePanel ID="UpdatePanel1" runat=server>
        <ContentTemplate>
            <table>
                <tr>
                    <td><asp:Button ID="button1" runat="server" OnClick="Button1_click" Text="Button 1" /></td>
                    <td><asp:TextBox ID="textBox1" runat="server" Text="StartText" Enabled="false" /></td>
                </tr>
            </table>
        </ContentTemplate>
    </asp:UpdatePanel>

    <asp:UpdatePanel ID="UpdatePanel2" runat=server>
        <ContentTemplate>
            <table>
                <tr>
                    <td><asp:Button ID="button2" runat="server" OnClick="Button2_click" Text="Button 2" /></td>
                    <td><asp:TextBox ID="textBox2" runat="server" Text="StartText" Enabled="false" /></td>
                </tr>
            </table>
        </ContentTemplate>
    </asp:UpdatePanel>

    <asp:UpdatePanel ID="UpdatePanelReset" runat=server>
        <ContentTemplate>
            <asp:Button ID="reset" runat="server" OnClick="Reset_click" Text="reset" />
        </ContentTemplate>
        <Triggers>
            <asp:AsyncPostBackTrigger ControlID="button1" EventName="click" />
            <asp:AsyncPostBackTrigger ControlID="button2" EventName="click" />
        </Triggers>
    </asp:UpdatePanel>

</asp:Content> 
```

背后的代码

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Xml.Linq;

namespace WebApplication1
{
    public partial class _Default : System.Web.UI.Page
    {
        protected void Page_Load(object sender, EventArgs e)
        {

        }

        protected void Button1_click(object sender, EventArgs e)
        {
            textBox1.Enabled = !textBox1.Enabled;
            reset.Enabled = !textBox1.Enabled && !textBox2.Enabled;
        }

        protected void Button2_click(object sender, EventArgs e)
        {
            textBox2.Enabled = !textBox2.Enabled;
            reset.Enabled = !textBox1.Enabled && !textBox2.Enabled;
        }

        protected void Reset_click(object sender, EventArgs e)
        {
            textBox1.Text = "StartText";
            textBox2.Text = "StartText";
            label1.Text = "reset button clicked";
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T20:47:19.173

只需将 PostBackTrigger 添加到最后一个 UpdatePanel。

```
<asp:PostBackTrigger ControlID="reset" /> 
```

# javascript - 适用于 Firefox 而不是 IE 的 Javascript...为什么？

> ID：10744854
> 
> 赞同：0
> 
> 时间：2012-05-24T20:32:29.863
> 
> 标签：javascript, internet-explorer, firefox

我已经到处搜索试图弄清楚这一点，但似乎无法解决。我的 javascript 代码适用于 Firefox，但不适用于 IE8。任何想法为什么？

文档类型：

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
```

Javascript：

```
<script language="javascript">
function toggle() {
    document.getElementById('togglefield').style.display = "table-row";
    var offertype = document.getElementById('offertype1fsa').value;
    if (offertype === "SIF" || offertype === "") {
        document.getElementById('togglefield').style.display = "table-row";
    }
    else {
        document.getElementById('togglefield').style.display = "none";
    }
}
</script> 
```

HTML：

```
<table>
    <tr>
        <td class="label" align="right">
            Offer Type
        </td>
        <td class="field" align="left">
      <select name="offertype1fsa" class="select" id="offertype1fsa" onchange="toggle();" >
        <option value=""></option>
        <option value="PIF">PIF</option>
        <option value="SIF">SIF</option>
      </select>               
        </td>
    </tr>

    <tr id="togglefield">
        <td class="label" align="right">
            Amount (if SIF)
        </td>
        <td class="field" align="left">
           <input type="text" name="sifamt1fsa" id="sifamt1fsa" />  
        </td>
    </tr>
</table> 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T20:36:49.750

[http://www.w3schools.com/cssref/pr_class_display.asp](http://www.w3schools.com/cssref/pr_class_display.asp)

> 注意：值“inline-table”、“table”、“table-caption”、“table-cell”、“table-column”、“table-column-group”、“table-row”、“table-row” -group”和“inherit”在 IE7 及更早版本中不受支持。IE8 需要一个!DOCTYPE。IE9 支持这些值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T20:37:40.060

试试这个[DEMO](http://jsfiddle.net/Z3Pne/)；

```
<script language="javascript">
function toggle(elem) {
    var offertype = elem.value;
    document.getElementById('togglefield').style.display =
        (offertype === "SIF" || offertype === "")? "":"none";
}
</script>
.
.
.

      <select name="offertype1fsa" class="select" id="offertype1fsa" onchange="toggle(this);" > 
```

# javascript - 获取用作边框区域的 ExtJS 面板的高度

> ID：10744857
> 
> 赞同：0
> 
> 时间：2012-05-24T20:32:36.933
> 
> 标签：javascript, dom, extjs, extjs4

我正在努力获得 ExtJS 面板的高度，我认为它有任何不同的唯一原因是它是定义为边界区域的面板，因为否则我没有遇到这个问题（也许我需要报告一个对他们的错误）。我将从一些代码开始，这些代码演示了我如何尝试获取高度，结果演示了高度的真正含义，ExtJS 所说的高度，以及使用不同布局的面板如何不是问题（其中之一边界区域内的面板）：

```
 'cmBuildTab #cmProductExplorer': {
        afterrender: function(productExplorer) {
            var domNode = Ext.getDom(productExplorer.el),
                savedSearchesPanel = productExplorer.down('#savedSearchesPanel');

            console.log('productExplorer.getHeight(): ' + productExplorer.getHeight());   
            console.log(productExplorer.componentLayout);
            console.log(productExplorer.componentLayout.lastComponentSize);
            console.log(domNode);
            console.log('domNode.style.height: ' + domNode.style.height);
            console.log('savedSearchesPanel.getHeight(): ' + savedSearchesPanel.getHeight());
        }
    }, 
```

我最初受到鼓舞，我可能有几种替代方法来获取高度，通过 dom 节点或通过 componentLayout.lastComponentSize 但这些都不能被 Javascript 代码访问，只有 chrome 控制台。我最后的尝试是解析返回的 dom 字符串，但这是一个可怕的 hack。建议表示赞赏；console.log 结果下方是我的视图配置的相关部分。

console.log 结果：

```
productExplorer.getHeight(): 2

Ext.Class.newClass
autoSized: Object
borders: Object
calculateDockBoxes_running: false
childrenChanged: true
frameSize: Object
id: "dock-1155"
info: Object
initialized: true
initializedBorders: true
lastComponentSize: Object
height: 787
width: 254
__proto__: Object
layoutBusy: false
layoutCancelled: false
onLayout_running: false
owner: Ext.Class.newClass
previousComponentSize: undefined
targetInfo: Object
__proto__: Class.registerPreprocessor.prototype

undefined

<div id=​"panel-1049" class=​"x-panel x-box-item x-panel-default" role=​"presentation" aria-labelledby=​"component-1198" style=​"margin:​ 0px;​ width:​ 254px;​ height:​ 787px;​ left:​ 0px;​ top:​ 0px;​ ">​…​&lt;/div>​

domNode.style.height:  

savedSearchesPanel.getHeight(): 151 
```

查看配置（部分）：

```
 },{
        region: 'west',
        collapsible: true,
        title: 'Product Explorer',
        itemId: 'cmProductExplorer',
        split: true,
        width: '20%',
        minWidth: 100,
        layout: {
        type: 'vbox',
        pack  : 'start',
        },
        items: [{
        collapsible: true,
        width: '100%',
        border: false,
        title: 'Search',
        itemId: 'savedSearchesPanel',
        items: [{
            border: false,
            xtype: 'cmSearchTermAccordionPanel'
        },{
            border: false,
            margin: '5 20 0 20',
            html: 'Saved Searches:<hr>'    
        }]
        },{ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T02:00:56.140

`afterrender`不是您要用来确定组件高度的事件，它在元素被渲染而不是在调整大小之后触发。如果您使用的是 4.1，则可以使用`boxready`仅在容器初始大小后触发的事件[http://docs.sencha.com/ext-js/4-1/#!/api/Ext.AbstractComponent-event-boxready](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.AbstractComponent-event-boxready) . 如果不是，您可以使用该`afterlayout`事件来确定大小，但该事件会触发每个布局。

另外，作为百分比的宽度也没有记录为 4.0 支持，我已经看到它们工作并且我已经看到它们失败了。

这是我从 Viewport 示例中劫持的一些代码，这要归功于法院的裁决，这是可以的。
4.1

```
 Ext.create('Ext.container.Viewport', {
    layout: 'border',
    items: [{
        region: 'north',
        html: '<h1 class="x-panel-header">Page Title</h1>',
        border: false,
        margins: '0 0 5 0'
    }, {
        region: 'west',
        collapsible: true,
        title: 'Navigation',
        width: 150,
        //ADD LISTENERS
        listeners: {
            afterrender:function(){console.log( 'afterrender ' +this.getHeight())},
            boxready:function(){console.log( 'boxready ' +this.getHeight())}
        }
        // could use a TreePanel or AccordionLayout for navigational items
    }, {
        region: 'south',
        title: 'South Panel',
        collapsible: true,
        html: 'Information goes here',
        split: true,
        height: 100,
        minHeight: 100
    }, {
        region: 'east',
        title: 'East Panel',
        collapsible: true,
        split: true,
        width: 150
    }, {
        region: 'center',
        xtype: 'tabpanel', // TabPanel itself has no title
        activeTab: 0,      // First tab active by default
        items: {
            title: 'Default Tab',
            html: 'The first tab\'s content. Others may be added dynamically'
        }
    }]
}); 
```

输出 ：

```
afterrender 2
boxready 276 
```

# jquery - 有没有办法检查所有表单元素，然后使用 jQuery 过滤特定的选择元素？

> ID：10744859
> 
> 赞同：2
> 
> 时间：2012-05-24T20:32:48.257
> 
> 标签：jquery, jsp

我一直在尝试修改一些我以前在 jsp 中使用 jQuery 1.6.4 的代码。最初的任务是从 jsp 代码中过滤掉所有选择元素，所以我使用了这个：

```
$(':input:not("select")').change(function(){    
// Do something here.
... 
```

然后我被告知需要包含一些选择，所以我想我会添加这样的类：

```
(':input:not("select")' || $(!'.dontIgnoreSelect')).change(function(){
// Do something here.
... 
```

但是这里的逻辑是错误的，因为短路检查了第一个条件然后继续。

我想像以前一样捕获所有其他表单元素，但只过滤掉没有分配给它们的类或使用一些类似机制的选择。我选择了一个类，因为它将与多个 jsps 一起使用。

我意识到原始代码不起作用，但我该怎么做呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T20:36:20.287

```
$(':input:not("select"), .dontIgnoreSelect'); 
```

I'm surprised the first part of the expression works, but whatever.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T20:34:57.527

我认为以下将完成您的工作

```
$(':input:not("select"), select.dontIgnoreSelect').change(function() {

}); 
```

# powershell - 使用带有 powershell 的 newtonsoft json.net 的奇怪之处

> ID：10744860
> 
> 赞同：7
> 
> 时间：2012-05-24T20:32:48.947
> 
> 标签：powershell, json.net

我有

```
function Foo($a, $b)
{
    $o = @{}
    $o.A = $a
    $o.B = $b
    $post = @{}
    $post.X="x"
    $post.entity =$o
    $newton::SerializeObject($post)
} 
```

然后做

```
foo "a" "b" 
```

我明白了

```
Exception calling "SerializeObject" with "1" argument(s): "Self referencing loop detected for property 'Value' with type 'System.Management.Automation.PSParameterizedProperty'. Path 'entity.Members[0]'." 
```

然而

```
function Foo2($o)
{
    $post = @{}
    $post.X="x"
    $post.entity =$o
    $newton::SerializeObject($post)
}

foo2 @{a="a"; b="b"} 
```

工作正常。还

```
function foo3($a, $b)
{
   $o = @{}
   $o.A = $a
   $o.B = $b
   $newton::SerializeObject($o)
}

foo3 "a" "b" 
```

有效，但

```
foo3 "a" 1 
```

失败

后者可以通过做来工作

```
 $o.B= [Int32]::Parse($b.Tostring()) 
```

这一切看起来都很奇怪

Windows 7 上的 powershell v2，json.net 4.4.5

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-07T08:19:39.650

来自 .NET 框架的`JavaScriptSerializer`PowerShell 哈希序列化也有类似的问题。我怀疑它在 PowerShell 类型系统中有些奇怪。您可以完全跳过 Json.Net 并自行开发。

下面是一些让你开始的东西。它可能不如 PowerShell 3 的内置`ConvertTo-Json`cmdlet 强大，但我认为它基本上是完整的。

这是您的*所有*示例，按工作顺序排列。

```
# See below for ConvertTo-Json.psm1
Import-Module ConvertTo-Json

function Foo($a, $b)
{
    $o = @{}
    $o.A = $a
    $o.B = $b
    $post = @{}
    $post.X="x"
    $post.entity =$o
    ConvertTo-Json $post
}

function Foo2($o)
{
    $post = @{}
    $post.X="x"
    $post.entity =$o
    ConvertTo-Json $post
}

function foo3($a, $b)
{
   $o = @{}
   $o.A = $a
   $o.B = $b
   ConvertTo-Json $o
}

PS> foo "a" "b"
{"entity":{"A":"a","B":"b"},"X":"x"}

PS> foo2 @{a="a"; b="b"}
{"entity":{"a":"a","b":"b"},"X":"x"}

PS> foo3 "a" "b"
{"A":"a","B":"b"}

PS> foo3 "a" 1
{"A":"a","B":1} 
```

这是实现`ConvertTo-Json`.

```
# Save these contents to Modules\ConvertTo-Json\ConvertTo-Json.psm1 in your
# PowerShell documents folder, and load them in your $profile using the
# "Import-Module ConvertTo-Json" cmdlet. This will make the ConvertTo-Json cmdlet
# available for use.

Set-StrictMode -Version Latest

function convertToJsonNull($InputObject) {
    "null"
}

function convertToJsonArray($InputObject) {
    $value = ($InputObject | %{ convertToJson $_ }) -join ','
    "[$value]"
}

function convertToJsonHash($InputObject) {
    $value = ($InputObject.Keys | %{
        $name = $_ | asJsonString
        $itemValue = convertToJson ($InputObject[$_])
        '"{0}":{1}' -f $name, $itemValue
    }) -join ','
    "{$value}"
}

function convertToJsonObject($InputObject) {
    $value = ($InputObject | get-member -membertype *property | %{
        $name = $_.Name
        $value = convertToJson ($InputObject.($name))
        '"{0}":{1}' -f ($name | asJsonString), $value
    }) -join ','
    "{$value}"
}

function convertToJsonString($InputObject) {
    '"{0}"' -f ($InputObject | asJsonString)
}

function convertToJsonBool($InputObject) {
    $InputObject.ToString().ToLower()
}

function convertToJsonNumeric($InputObject) {
    "$InputObject"
}

function convertToJsonDate($InputObject) {
    $epoch = [datetime]"1970-01-01T00:00:00Z"
    $elapsed = [long]($InputObject - $epoch).TotalMilliseconds
    '"\/Date({0})\/"' -f $elapsed
}

filter isNumeric() {
    $_ -is [byte]  -or $_ -is [int16]  -or $_ -is [int32]  -or $_ -is [int64]  -or
    $_ -is [sbyte] -or $_ -is [uint16] -or $_ -is [uint32] -or $_ -is [uint64] -or
    $_ -is [float] -or $_ -is [double] -or $_ -is [decimal]
}

filter asJsonString {
    ($_ -replace '\\', '\\') -replace '"', '\"'
}

function convertToJson($InputObject) {
    if     ($InputObject -eq $null)       { convertToJsonNull    $InputObject }
    elseif ($InputObject -is [array])     { convertToJsonArray   $InputObject }
    elseif ($InputObject -is [hashtable]) { convertToJsonHash    $InputObject }
    elseif ($InputObject -is [datetime])  { convertToJsonDate    $InputObject }
    elseif ($InputObject -is [string])    { convertToJsonString  $InputObject }
    elseif ($InputObject -is [char])      { convertToJsonString  $InputObject }
    elseif ($InputObject -is [bool])      { convertToJsonBool    $InputObject }
    elseif ($InputObject | isNumeric)     { convertToJsonNumeric $InputObject }
    else                                  { convertToJsonObject  $InputObject }
}

function ConvertTo-Json {
    [CmdletBinding()]
    param(
        [Parameter(
            ValueFromPipeline = $true,
            ValueFromPipelineByPropertyName = $true
        )]
        $InputObject
    )
    convertToJson $InputObject
}

Export-ModuleMember -Function ConvertTo-Json 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-07T15:23:07.790

自引用循环问题似乎与....您分配事物的顺序有关。以下示例有效：

```
function Foo($a, $b)
{
    $o = @{}
    $post = @{}

    $post.entity =$o

    $o.A = $a
    $o.B = $b   

    $post.X="x"

    [Newtonsoft.Json.JsonConvert]::SerializeObject($post)
}

Foo "a" "b"

{"entity":{"A":"a","B":"b"},"X":"x"} 
```

如果您在传入之前转换类型，那么它将保持您的 foo3 函数通用：

```
function foo3($a, $b)
{
   $o = @{}
   $o.A = $a
   $o.B = $b
   [Newtonsoft.Json.JsonConvert]::SerializeObject($o)
}

$var2 = [Int32]::Parse((1).Tostring())

Foo3 "a" $var2

{"A":"a","B":1} 
```

# android - 在 Android 地图中的 geo:-url 处显示标记

> ID：10744863
> 
> 赞同：8
> 
> 时间：2012-05-24T20:32:56.423
> 
> 标签：android, android-intent, url-scheme

是否不仅可以让 Android 上的 Google 地图在地图应用程序中显示给定坐标，而且还可以在该位置设置标记（或图钉）？

我阅读了[https://developer.android.com/guide/appendix/g-app-intents.html](https://developer.android.com/guide/appendix/g-app-intents.html)上的文档，但它只能让我设置缩放级别。

现在，我使用以下代码在 Android 上的 Google 地图中显示一个地点：

```
Double lat = 53.3;
Double lng = 13.4;
final String uriString = "geo:" + lat + ',' + lng + "?z=15";
Intent showOnMapIntent = new Intent(Intent.ACTION_VIEW, Uri.parse(uriString));
startActivity(showOnMapIntent); 
```

那里可以有一个标记还是我需要使用 MapActivity？在哪里可以找到有关地图应用程序理解的 url 参数的完整文档？

我可以使用不同的网址前缀吗？例如“ [https://maps.google.de/maps](https://maps.google.de/maps)？”？Maps 有一个与此方案/主机/路径前缀匹配的意图过滤器。我在哪里可以找到有关此 url 实际支持哪些参数的文档？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2014-05-31T01:23:25.353

德克，你试过`geo:0,0?q=lat,lng`吗？

它在我的 nexus 5 上显示一个标记。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-05-27T01:45:29.080

它适用于以下网址：

```
final String uriString = "http://maps.google.com/maps?q=" + lat + ',' + lng + "("+ label +")&z=15"; 
```

显示反向地理编码地址。

[我在这里](http://querystring.org/google-maps-query-string-parameters/)找到了支持参数的文档。这不是 Androids Google Maps 的文档，而是我尝试过的工作。

注意：应该注意，最初的问题是关于 geo: URI 来启动 Google Maps 应用程序（请参阅[Android Developer Reference Intents List](https://developer.android.com/guide/appendix/g-app-intents.html)，而这个答案可能会根据什么应用程序启动 Google Maps 网站的 web 视图用户为此 Intent 选择。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-27T22:56:47.683

试试这个：

[http://maps.google.com/?saddr=34.052222,-118.243611](http://maps.google.com/?saddr=34.052222,-118.243611)

并获得两点之间的完整路线：

[http://maps.google.com/?saddr=34.052222,-118.243611&daddr=37.322778,-122.031944](http://maps.google.com/?saddr=34.052222,-118.243611&daddr=37.322778,-122.031944)

# c# - 将表单的方法保留在表单类中，还是放在唯一的类中？

> ID：10744867
> 
> 赞同：0
> 
> 时间：2012-05-24T20:33:11.353
> 
> 标签：c#, winforms, forms, class, controls

我有一个带有 3 个选项卡控件的表单，每个选项卡控件都有十几个文本字段。现在我有我所有的方法来修改 Form1.cs 中的文本字段，它正在工作，但是是一个非常长的类。我很好奇将调用表单控件的方法保留在该表单类中是否是正确的方法，或者您是否应该将它们划分为其他类？我读了这个帖子，我可能会感到困惑，但听起来选择的答案是说你不应该尝试从其他类访问表单控件？ [如何从 C# 中的类访问表单方法和控件？](https://stackoverflow.com/questions/217389/how-to-access-form-methods-and-controls-from-a-class-in-c)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T20:39:57.453

在这种情况下，最好的封装方法是创建包含每个选项卡的文本字段的用户控件。然后，每个选项卡上只有一个用户控件，所有特定于这些字段的逻辑都封装在它自己的控件中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T20:37:03.120

*如果您可以*将访问 UI 数据的代码保留在 中`Form`，但将对该数据进行操作/执行计算的代码保留在另一个类中。通过这种方式，您将能够创建一个类或一组类，它们可用于（例如）UnitTesting。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T20:43:19.297

这很容易完成，您只需将对表单的引用传递给另一个类，但随后它们变得紧密耦合，因此很脆弱。

更好的选择是定义一个接口并让表单实现它，但这可能会变得混乱。

其他选项是将选项卡上的控件移动到用户控件，甚至只是另一个表单，然后将它们托管在主表单的选项卡中。然后您可以隔离每个选项卡的数据和操作。再次定义和实现一两个接口将帮助您解耦。

这样想，你将 UI 分离到选项卡中，从 UI 的角度来看，这背后有一些底层逻辑，所以它遵循，在分离选项卡上的控件执行的功能方面应该有一些逻辑。我已经看到了例外情况，但这通常是因为选项卡中的分隔根本没有逻辑。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-24T20:49:32.433

组织应用程序有不同的方法。将 GUI（表单）与其他应用程序逻辑分开通常是一件事情。只在表单中显示逻辑。为您的数据创建数据类（也称为模型）。您可能希望有`Customer`,`Order`等类`Address`。这些类包含“业务逻辑”，例如 Order 类知道如何计算税款，而不是订单。

通过使用数据绑定将业务对象绑定到表单，您可以节省大量精力。[有关使用数据绑定](https://stackoverflow.com/a/8731643/880990)的信息，请参阅我的 SO 答案。

通过使用 MVC 模式将逻辑分成三个部分，您可以走得更远。我不打算在这里详细解释它。正是这一点，MVC 代表模型视图控制器。Model 是业务类，View 是表单，Controller 是管理模型和表单，加载和存储模型等的类。

# swt - SWT 使用浮点位置进行变换和绘制

> ID：10744869
> 
> 赞同：2
> 
> 时间：2012-05-24T20:33:16.243
> 
> 标签：swt, 2d, eclipse-rcp

我想在 SWT 中实现图表，我想使用 GC.transform 将坐标转换为标准化形式（原点位于画布中心，X 和 Y 方向的边界为 -1 和 1）。稍后，我乘以一个因子以使画布本身成为图形区域，以在其上绘制值而无需额外的转换。

我现在的问题是，我找不到用浮点坐标在 SWT 中绘制到 cancas 的方法......

SWT 中是否有使用浮点坐标和变换进行绘制的功能？我在 Swing 中考虑类似 Graphics2D 的东西。SWT中有类似的东西吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T11:51:54.100

我没有找到任何解决方案。我开始编写自己的转换工具来正确绘制所有内容。

# python - ctypes：通过引用传递字符串

> ID：10744875
> 
> 赞同：2
> 
> 时间：2012-05-24T20:33:44.687
> 
> 标签：python, ctypes

关于 Python 2.5，我希望在 python 中实现以下 C 代码：

C代码：

```
#include <wtypes.h>

__declspec(dllexport) X_ERROR __stdcall GetAdmSize(INT* piAdmSize, CHAR** chBuf, INT iBufSize);

int iProgSize = 0;
char szProgSize[50];
char* pszProgSize = szProgSize;
error = GetAdmSize(&iProgSize, &pszProgSize, 49); 
```

Python代码：

```
from ctypes import *
c_bool = c_int

x = windll.LoadLibrary("x.dll")
iProgSize = c_int()
szProgSize = create_string_buffer(50)
getAdmSize = x.AdkGetAdmSize
getAdmSize.argtypes = [POINTER(c_int), POINTER(c_char_p), c_int]
status = getAdmSize(byref(iProgSize), byref(szProgSize), 49) 
```

但我得到以下异常：

```
Traceback (most recent call last):
    status = getAdmSize(byref(iProgSize), (szProgSize), 49)
ArgumentError: argument 2: <type 'exceptions.TypeError'>: expected LP_c_char_p instance instead of c_char_Array_50 
```

我究竟做错了什么？

**更新：**

我试过了：

```
pointerToStringBuffer = cast(szProgSize, c_char_p)
status = getAdmSize(byref(iProgSize), byref(pointerToStringBuffer), 49) 
```

但这给了我：

```
Traceback (most recent call last):
    status = getAdmSize(byref(iProgSize), byref(pointerToStringBuffer), 49)
WindowsError: exception: access violation reading 0x00000031 
```

有趣的是，如果我这样称呼，我会在 C 中遇到同样的错误：

```
error = AdkGetAdmSize((int*)0, (char**)49, 0); 
```

似乎我的论点可能没有正确对齐

有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-26T01:12:51.660

您的 C 代码的直接翻译更像是：

```
from ctypes import *
x = windll.LoadLibrary("x.dll")
iProgSize = c_int(0)
szProgSize = create_string_buffer(50)
pszProgSize = c_char_p(addressof(szProgSize))
getAdmSize = x.GetAdmSize
getAdmSize.argtypes = [POINTER(c_int), POINTER(c_char_p), c_int]
status = getAdmSize(byref(iProgSize), byref(pszProgSize), 49) 
```

我测试过的假 DLL：

```
typedef int X_ERROR;
typedef int INT;
typedef char CHAR;

#include <string.h>

__declspec(dllexport) X_ERROR __stdcall GetAdmSize(INT* piAdmSize, CHAR** chBuf, INT iBufSize)
{
    *piAdmSize = 5;
    strcpy_s(*chBuf,iBufSize,"abcd");
    return 1;
} 
```

结果：

```
>>> x.iProgSize
c_long(5)
>>> x.pszProgSize
c_char_p('abcd')
>>> x.szProgSize.value
'abcd' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T22:35:04.187

想通了，我想。我还必须指定返回类型：

```
getAdmSize.restype = X_ERROR 
```

# iphone - For循环目标C

> ID：10744876
> 
> 赞同：4
> 
> 时间：2012-05-24T20:33:48.380
> 
> 标签：iphone, objective-c, ios, cocoa-touch, ios5

为什么我会得到这个代码的结果？

**代码**

```
ids = 0;
for (NSString *s in golferThreeIconCounter) {
    ids++;
    NSLog(@"%i", ids);
} 
```

**结果**

```
2012-05-24 16:30:35.194 Dot Golf Scoring[673:f803] 4
2012-05-24 16:30:35.196 Dot Golf Scoring[673:f803] 8
2012-05-24 16:30:35.196 Dot Golf Scoring[673:f803] 12
2012-05-24 16:30:35.197 Dot Golf Scoring[673:f803] 16
2012-05-24 16:30:35.197 Dot Golf Scoring[673:f803] 20
2012-05-24 16:30:35.198 Dot Golf Scoring[673:f803] 24
2012-05-24 16:30:35.199 Dot Golf Scoring[673:f803] 28
2012-05-24 16:30:35.199 Dot Golf Scoring[673:f803] 32
2012-05-24 16:30:35.200 Dot Golf Scoring[673:f803] 36
2012-05-24 16:30:35.200 Dot Golf Scoring[673:f803] 40
2012-05-24 16:30:35.201 Dot Golf Scoring[673:f803] 44
2012-05-24 16:30:35.201 Dot Golf Scoring[673:f803] 48
2012-05-24 16:30:35.202 Dot Golf Scoring[673:f803] 52
2012-05-24 16:30:35.202 Dot Golf Scoring[673:f803] 56
2012-05-24 16:30:35.203 Dot Golf Scoring[673:f803] 60 
```

为什么 ids 上升 4 次而不是只上升一次，这对我来说完全没有意义......

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-24T20:37:49.827

声明 int 时，不要添加`*`: 它不是`<id>`类型。你所拥有的是一个*指向*`int`; 在 32 位平台上，它以 4 递增。

```
int ids = 0; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T20:38:25.783

您正在打印数组中引用的指针的“位置”计数。

所以让我试着澄清一下。

一个指针是四个字节。在这种情况下，您有一个指针数组。因此，当您循环时，您正在打印指针索引的 int 值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T20:37:51.010

您需要使用增加：`*ids++`因为您已将其声明为参考。否则，您需要将其声明为原始变量：`int ids = 0;`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-24T20:39:29.840

```
int ids = 0;
for (NSString *s in golferThreeIconCounter) {
    ids++;
    NSLog(@"%i", ids);
} 
```

尝试这个。您从未声明过变量的类型`ids`。

# jquery - jQuery Masked Input (digitalBush) 不适用于 Chrome 19 输入 type="number"

> ID：10744879
> 
> 赞同：1
> 
> 时间：2012-05-24T20:34:15.217
> 
> 标签：jquery, html, google-chrome, maskedinput

我正在尝试使用 jQuery Masked Input（来自 digitalBush）但没有成功。我的 HTML 代码是：

```
<input class="numeric float optional" id="ocorrencia_altura" min="0" name="ocorrencia[altura]" step="any" type="number"> 
```

我的 Javascript 代码是：

```
$("#ocorrencia_altura").mask("9,99"); 
```

它在 Firefox 12（没有旋转的字段（HTML5 输入类型=数字））中运行良好，但不适用于输入有旋转的 Chrome 19。我什至不能在 Chrome 中插入一个数字（在文本字段中它可以工作）。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-08T18:50:23.623

尝试添加 ? 在掩码说明符的开头：

```
$("#ocorrencia_altura").mask("?9,99"); 
```

# android - 无法在内部类中启动服务 - 它是我的 Android 清单吗？

> ID：10744881
> 
> 赞同：2
> 
> 时间：2012-05-24T20:34:24.160
> 
> 标签：android, service

请帮忙！我在这里绝望了！！！！

我无法启动我的服务。我将它移到了我的 Activity 中的一个内部类，但我无法启动它！

我不知道我是否必须更改清单中的某些内容或以不同的方式称呼它。

我尝试使用“Intent intent = new Intent(HW07.this, PrimeService.class);”来调用它 我收到以下错误：

05-24 13:15:22.662: W/ActivityManager(80): 无法启动服务 Intent { cmp=jschuler.cs211d.hw07/.HW07$PrimeService (has extras) }: 未找到

当我在没有 HW07 的情况下调用它时，我得到了同样的错误。

有任何想法吗？这是我的代码：

```
package jschuler.cs211d.hw07;

import android.app.Activity;
import android.os.Bundle;
import android.view.*;
import android.widget.*;
import android.os.Handler;
import android.content.Intent;
import android.os.Message;
import android.util.Log;
import android.app.Service;
import android.os.IBinder;

public class HW07 extends Activity implements View.OnKeyListener
{
    String howMany, upper, lower, values;
    TextView tv_howMany, tvUpper, tvLower, test;
    EditText howManyInput, upperInput, lowerInput;
    //Handler h = new Handler();

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        tv_howMany = (TextView) findViewById(R.id.how_many);
        tv_howMany.setText("How many primes would you like to generate?");

        howManyInput = (EditText) findViewById(R.id.input1);
        howManyInput.setOnKeyListener(this);        

        tvUpper = (TextView) findViewById(R.id.upper);
        tvUpper.setText("Upper limit:");

        upperInput = (EditText) findViewById(R.id.input2);
        upperInput.setOnKeyListener(this);        

        tvLower = (TextView) findViewById(R.id.lower);
        tvLower.setText("Lower limit:");

        lowerInput = (EditText) findViewById(R.id.input3);
        lowerInput.setOnKeyListener(this);        

        test = (TextView) findViewById(R.id.test);
    }

    Handler handler = new Handler()
    {
        @Override
        public void handleMessage(Message msg)
        {
            Log.d("handleMessage","message handled!");
            Toast.makeText(getApplicationContext(), "in handleMessage", Toast.LENGTH_LONG).show();
            String primes = msg.obj.toString();
            Log.d("handleMessage!","Here are the primes: " + primes);
            super.handleMessage(msg);

        }
    };

    public boolean onKey(View v, int keyCode, KeyEvent ke)
    {
        if( (ke.getAction() == KeyEvent.ACTION_DOWN) &&
            (keyCode == KeyEvent.KEYCODE_ENTER) )
        {
            values = howManyInput.getText().toString() + "," +
                upperInput.getText().toString() + "," +
                lowerInput.getText().toString();
            test.setText(values);

            //handler.sendMessage(handler.obtainMessage(null, values));

            Intent intent = new Intent(this, PrimeService.class);
            intent.putExtra("parameters",values);
            startService(intent);

            return true;
        }
        return false;
    }

    public class PrimeService extends Service
    {
        @Override
        public IBinder onBind(Intent args)
        {
            return null;
        }

        @Override
        public int onStartCommand(Intent i, int flags, int startId)
        {
            Toast.makeText(this, "Service Started", Toast.LENGTH_SHORT).show();

            String parameters = i.getExtras().getString("parameters");
            Log.d("onStartCommand","parameters: " + parameters);
            //Handler serviceHandler = new Handler();

            String result = generatePrimes("Primes");
            //serviceHandler.sendMessage(serviceHandler.obtainMessage(0, result));    

            handler.sendMessage(handler.obtainMessage(0, result));  

            /* Thread t = new Thread( new Runnable() 
            {
                public void run() 
                {
                    String result = generatePrimes("Primes");

                    handler.sendMessage(handler.obtainMessage(0, result));  
                }

            });
            t.start();
     */
            return START_STICKY;
        }    

    /*     Handler serviceHandler = new Handler()
        {
            @Override
            public void handleMessage(Message msg)
            {
                Message primeMsg = serviceHandler.obtainMessage();
                String primes = primeMsg.obj.toString();

                //serviceHandler.sendMessage(serviceHandler.obtainMessage(0, result));    

                Log.d("handleMessage","primes: "+primes);

                super.handleMessage(msg);
            }
        }; */

        public String generatePrimes(String p)
        {
            return p;    
        }

        @Override
        public void onDestroy()
        {
            super.onDestroy();
            Toast.makeText(this,"Service Destroyed",Toast.LENGTH_LONG).show();
        }
    }
} 
```

这是我的 Android 清单：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
      package="jschuler.cs211d.hw07"
      android:versionCode="1"
      android:versionName="1.0">
    <application android:label="@string/app_name" android:icon="@drawable/ic_launcher">
        <activity android:name="HW07"
                  android:label="@string/app_name">
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <service android:name=".PrimeService">
            <intent-filter>
                <action android:name="jschuler.cs211d.hw07"/>
            </intent-filter>
        </service>
    </application>
</manifest> 
```

我在 PrimeService 中更改了一些代码......现在我只是想从线程中获取我的字符串（在同一个类中）。我以前让它工作，但这次它不工作。

这是我的新代码：

```
package jschuler.cs211d.hw07;

import android.app.Service;
import android.content.Intent;
import android.os.IBinder;
import android.widget.Toast;
import java.net.*;
import android.os.Handler;
import android.os.Message;
import android.util.Log;

public class PrimeService extends Service
{
    String str;

    @Override
    public IBinder onBind(Intent args)
    {
        return null;
    }

    @Override
    public int onStartCommand(Intent i, int flags, int startId)
    {
        Toast.makeText(this, "Service Started", Toast.LENGTH_SHORT).show();

        String parameters = i.getExtras().getString("parameters");
        Log.d("onStartCommand","parameters: " + parameters);
        //Handler serviceHandler = new Handler();

        String result = generatePrimes("Primes");
        Log.d("result","result: "+result);
        Message primeMessage = receiveHandler.obtainMessage(0, result);
        receiveHandler.sendMessage(primeMessage);

        /* Handler sendHandler = new Handler()
        {
            @Override
            public void handleMessage(Message msg)
            {
                Log.d("sendHandler","handleMessage called");
                String result = generatePrimes("Primes");
                Message primeMessage = receiveHandler.obtainMessage();
                primeMessage.obj = result;
                receiveHandler.sendMessage(primeMessage);
                super.handleMessage(msg);
            }
        }; */

        // IF I GET THE ABOVE CODE TO WORK, I WILL PUT IT IN THIS THREAD!!!

        /* Thread t = new Thread( new Runnable() 
        {
            public void run() 
            {
                receiveHandler.sendMessage(receiveHandler.obtainMessage(0, generatePrimes("prime numbers")));    

                //String result = generatePrimes("Primes");
                //serviceHandler.sendMessage(serviceHandler.obtainMessage(0, result));  
            }

        });
        t.start(); */

        return START_STICKY;
    }        

    Handler receiveHandler = new Handler()
    {
        @Override
        public void handleMessage(Message msg)
        {
            //serviceHandler.sendMessage(serviceHandler.obtainMessage(0, generatePrimes("prime numbers")));    

            Message primeMsg = Message.obtain();
            //Message primeMsg = receiveHandler.obtainMessage();
            String primes = (String)primeMsg.obj;

            Log.d("handleMessage","here are the primes: "+primes);

            super.handleMessage(msg);
        }
    };

    public String generatePrimes(String p)
    {
        return p;    
    }

    @Override
    public void onDestroy()
    {
        super.onDestroy();
        Toast.makeText(this,"Service Destroyed",Toast.LENGTH_LONG).show();
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-24T20:37:34.727

你`Service`必须是一个静态类。然后一旦在你的清单中，你就需要这样显示它

```
<service android:name="HW07$PrimeService"/> 
```

你可以做这样的事情（伪）

```
class HM07 extends Activity {

    public static Handler mHandler;
    // ...

    @Override public void onCreate(Bundle icicle) {
        super.onCreate(icicle);
        // ...

        mHandler = new Handler();
    }
}

class PrimeService extends Service {
    @Override public void onStartCommand() {
        Handler handler = HM07.mHandler;
        handler.sendMessage(/* Message */);
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-11-09T12:58:43.980

```
class outclass extends Activity {
   // ...
   @Override
   public void onCreate(Bundle icicle) {
       super.onCreate(icicle);
       // ...
   }

   public static class innerService extends Service {
       @Override
       public void onStartCommand() {
           //....
       }
   }
} 
```

并且您需要在下面向您的 Androidmanifest.xml 声明

```
<service android:name=".outclass$innerService"/> 
```

注意美元符号！

# javascript - FB.logout() - 没有访问令牌 - “以不同用户身份登录”

> ID：10744892
> 
> 赞同：2
> 
> 时间：2012-05-24T20:35:17.603
> 
> 标签：javascript, facebook, facebook-javascript-sdk

这个问题与这个问题有关： [FB.logout() called without an access token](https://stackoverflow.com/questions/8430474/fb-logout-called-without-an-access-token/10739999)

我有一个问题希望有人能帮忙。

我在上面的链接中得到了所有内容，但是当有人使用公共计算机并意外让自己登录到 FB 时，您如何处理？然后一个新用户尝试登录一个应用程序，但不是他们。我想要一个按钮让他们完全退出 FB 以“以不同的用户身份登录”。

在他们授权应用程序之前，我不能这样做，对吗？所以他们需要在别人的帐户下授权应用程序然后注销？必须有另一种方式。

任何反馈都会很棒 - 尝试搜索一段时间，但无济于事。我可能想多了，但是应该有某种方法可以“以其他用户身份登录”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T09:14:38.003

将您的注销修改为以下内容：-

```
 function logout(response){
        console.log("From logout" + response);
        if(!response.authResponse){
            window.location = "/web/login/";
            return;
        }

           FB.logout(function(response){
               FB.Auth.setAuthResponse(null,'unknown');  
                 logout();
           });
        } 
```

即继续向 Facebook 发送注销请求，直到实际注销发生。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T21:38:08.120

您可以执行以下操作：

```
FB.getLoginStatus(function(response) {
    if (response.status === "connected") {
        FB.api("me", function(response2) {
            //  notify the user he is logged in as response2.name, and if it's not him call FB.logout
        }
    }
    else {
        // prompt the user to login
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T09:20:18.550

尝试使用 Session 并将用户的 ID 保存在该会话中。您可以控制该会话的到期时间（如果用户在页面上没有任何活动，则默认为 20 分钟）然后在每个页面加载甚至检查该季节是否对该用户仍然有效。

页面加载事件：

```
if(Session["LoggedIn"]==null)
{
Response.Redirect("~/Login.aspx");
} 
```

如果会话过期，上面的代码会将用户重定向到您网站的登录页面。

# android - 即使我做了人们在 stackoverflow 上推荐的一切，getDrawingCache 总是返回 null

> ID：10744895
> 
> 赞同：2
> 
> 时间：2012-05-24T20:35:34.970
> 
> 标签：android, bitmap, compression

我觉得我已经尝试了一切。想到最后一件事：我需要 root 才能执行 getDrawingCache 吗？我认为我不应该这样做，因为当我玩它并在 onClick 的不同活动中尝试它时，这对我有用（即使它只保存了按钮背景）。GraphView 是我的班级将图表绘制到 Canvas 中。我没有忘记添加

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/> 
```

我尝试只使用 bm.compress(Bitmap.CompressFormat.PNG, 100, fOut); 没有尝试和捕获，它会给出空异常。

这是代码：

```
 GraphView graphView = new GraphView(this, y, "Dive Planner", horlabels, verlabels, GraphView.LINE, x, Pspotreba, pocetBodu, varovani);
    setContentView(graphView);

        graphView.measure(MeasureSpec.makeMeasureSpec(0, MeasureSpec.UNSPECIFIED), MeasureSpec.makeMeasureSpec(0, MeasureSpec.UNSPECIFIED));
        graphView.layout(0, 0, graphView.getMeasuredWidth(), graphView.getMeasuredHeight());

        graphView.setDrawingCacheEnabled(true);
        graphView.buildDrawingCache();
        Bitmap bm=Bitmap.createBitmap(graphView.getDrawingCache(true));
        //I have also tried Bitmap bm=graphView.getDrawingCache(true); and all the combinations (using/not using the code above)

        FileOutputStream fOut = null;

        try {   
                File f = new File(Environment.getExternalStorageDirectory().getAbsolutePath()+ File.separator + "DivePlanner" + File.separator);
                if(!f.exists()) f.mkdirs();
                File dive = new File(f, "Dive.png");

                fOut = new FileOutputStream(dive);
           }
        catch (Exception e) {
                Toast.makeText(this, "Error2", Toast.LENGTH_SHORT).show();
           }

        try {
                bm.compress(Bitmap.CompressFormat.PNG, 100, fOut);
                fOut.flush();
                fOut.close();
                Toast.makeText(this, "Ponor uložen", Toast.LENGTH_SHORT).show();
            } 
        catch (Exception e) 
            {
                Toast.makeText(this, "Error", Toast.LENGTH_SHORT).show();
            } 
```

很抱歉发布了类似的问题（我之前已经发布过类似的问题，但问题仍未得到解答，也许我解释得不够多，所以这是一个新的尝试）。这是我在学士论文中需要完成的最后一件事。我需要在下周二之前把它准备好。除了这个之外，其他一切在我的代码中都可以正常工作。提前谢谢，如果你能帮忙。

# sql - T-SQL - 必须在 group by 或聚合函数中有术语才能选择

> ID：10744899
> 
> 赞同：4
> 
> 时间：2012-05-24T20:35:49.523
> 
> 标签：sql, sql-server, database, sql-server-2008, tsql

给定以下选择语句：

```
Select t.name,  SUM(st.row_count) as row_count
From sys.dm_db_partition_stats st  
join sys.tables t on t.object_id = st.object_id
join ClientUpdateConfig c on t.name = c.TableName
Where  (index_id < 2)  and  schema_id = schema_id('dbo') 
and t.type ='U'
group by t.name 
```

我还想选择 c.RowID 作为附加字段。查询按原样工作，但如果我将 1 更改为：

```
Select t.name,  SUM(st.row_count) as row_count, c.RowID as current_row 
```

我得到错误：

> 消息 8120，级别 16，状态 1，第 1 行列“ClientUpdateConfig.RowID”在选择列表中无效，因为它既不包含在聚合函数中，也不包含在 GROUP BY 子句中。

有人可以解释为什么我需要在聚合函数（我假设 SUM）或 group by 中选择它来选择它吗？我不明白这个限制 - 如果我能理解为什么会发生这种情况，也许我可以调整我的查询设计。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-24T20:39:10.537

因为它不知道选择哪个 RowId。

您需要：

```
. . .
group by t.name, RowId 
```

或者：

```
select . . ., min(RowId) -- or max(RowId) 
```

即使您知道每个名称只有一个 RowId，数据库也不知道这一点，因此您必须在查询中明确说明您想要做什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T20:41:45.677

查询结果基于多个 ROWS 的聚合。您获取许多具有相同值以及`t.name`它们许多不同`st.row_count`值的行并创建一行（`t.name`对于每个聚合行和所有`t.row_count`值的总和都是相同的）。对于这样的聚合，没有合理的价值`c.Row_ID`。您分组的每一行都有不同的值，无法确定应该使用什么值。如果`RowID`是数字，您可以平均或求和，或者取所有 ID 中的最小（min）或最大（max）。并不是说它*有任何意义*。像这样的值只会存在于聚合中。

# android - Android 从同一个 IP Adr 接收 UDP 数据包

> ID：10744901
> 
> 赞同：0
> 
> 时间：2012-05-24T20:36:00.900
> 
> 标签：android, udp, packet

我的 Android 应用程序在 s.receive(p) 处停止，因为它没有收到任何数据包。

我让 X-Plane 将数据包发送到与我想要接收这些数据包的 Android 平板电脑相同的 IP 地址中的随机端口 49059。这是因为它们正在运行相同的连接。X-Plane 使用端口 49000 发送数据包，使用端口 49001 接收数据包。

我无法弄清楚出了什么问题。我无法在 Android 平板电脑上使用 3G，这是我可以测试的唯一互联网连接。此外，清单中启用了所有互联网和 wifi 权限。有任何想法吗？这是代码：

```
byte[] bar = new byte[1024];
DatagramPacket p = new DatagramPacket(bar, bar.length);
DatagramSocket s = new DatagramSocket(49059);
s.setSoTimeout(30000);
s.receive(p); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T21:11:57.123

如果您有wireshark，请尝试检查数据包是否由X-Plane 发送。

此外，您说您的“应用程序冻结”并不一定意味着没有收到数据包。我不知道您要做什么，但也许您正在 UI 线程上执行接收/发送操作，这会导致应用程序冻结。

尝试在`s.receive(p)`下面的类似之后放置一个日志，并检查它是否出现在 LogCat 中。 `Log.d("MYACT","Packet received");`

# windows - 无法在远程计算机上使用 Get-Service –ComputerName

> ID：10744903
> 
> 赞同：6
> 
> 时间：2012-05-24T20:36:18.450
> 
> 标签：windows, powershell, powershell-2.0, virtualbox

我有一个带有虚拟框的 Windows 2003 框设置，我无法使用 powershell 来使用它。

我在我的 Windows 7 机器上试试这个

```
Get-Service –ComputerName myserver 
```

我回来

```
Get-Service : Cannot open Service Control Manager on computer 'myserver'. This operation might require other privileges.
At Script1.ps1:2 char:4
+ gsv <<<<  -cn myserver
    + CategoryInfo          : NotSpecified: (:) [Get-Service], InvalidOperationException
    + FullyQualifiedErrorId : System.InvalidOperationException,Microsoft.PowerShell.Commands.GetServiceCommand 
```

在四处搜索时，我发现我应该尝试使用`Enable-PSRemoting`.

我这样做了，现在当我尝试使用它时，我得到了

> WinRM 已设置为在此计算机上接收请求。WinRM 已经设置为在这台机器上进行远程管理。

但是我仍然遇到同样的错误。这是因为我使用的是虚拟机吗？我将虚拟操作系统设置在我的域上，我什至可以使用我的 AD 帐户凭据登录。

我可以从中获取其他信息。

所以这并不是我不能用 powershell 连接到它。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-25T05:20:04.890

使用 PowerShell V2，您有两种远程命令方法。

**带有内置远程处理的命令：**

PowerShell v2 中的一小部分命令有一个`-ComputerName`参数，允许您指定要访问的目标机器。

```
Get-Process
Get-Service
Set-Service

Clear-EventLog
Get-Counter
Get-EventLog
Show-EventLog
Limit-EventLog
New-EventLog
Remove-EventLog
Write-EventLog

Restart-Computer
Stop-Computer

Get-HotFix 
```

这些命令自己进行远程处理，或者是因为底层基础设施已经支持远程处理，或者它们解决了对系统管理特别重要的场景。它们建立在 DCOM 的顶部，从访问的角度来看，当您可以使用类似`NET.exe`或之类的命令与远程计算机建立会话时，您可以使用它们`PSExec.exe`。

您正在尝试使用其中一个，但凭证（`-cred`参数）有问题，因为您的令牌凭证不能用于建立与远程计算机的管理会话。

**PowerShell 远程处理子系统：**

在您可以使用 PowerShell 远程访问远程计算机之前，必须明确启用该计算机上的远程服务。您可以使用`Enable-PSRemoting`cmdlet 执行此操作。如果您在工作组中工作，您还需要启用服务器以使用此命令在您的客户端计算机上输入（在您的客户端计算机上以管理员身份）：

```
Set-Item WSMan:\localhost\Client\TrustedHosts * 
```

然后，您将使用`New-PSSession`Cmdlet（带有`-computername`和`-credentials`）来创建会话对象。然后`Invoke-Command`（使用`-session`and `-scriptblock`）cmdlet 允许您远程调用另一台计算机上的脚本块。这是远程处理中大多数功能的基本元素。您还可以使用 Enter-PSSession 与服务器建立交互式（类似于 SSL）的 PowerShell 命令行。

有用的链接：[Layman 的 PowerShell 2.0 远程处理指南](http://www.ravichaganti.com/blog/?p=1305)

* * *

测试这个：

```
$sess = New-PSSession -ComputerName myServer-Credential (Get-Credential)
Invoke-Command -Session $sess -ScriptBlock {get-service}
...
Remove-PSSession -Session $sess 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-08-24T13:13:51.733

如果它仍然很重要，这是我的解决方法：

我有一个名为“usser”的非特权用户，他希望将 powershell(v2) 从客户端 A 远程处理到服务器 B。

脚步：

1.  *以管理员身份在 Targetserver B 上*启用-psremoting**
**   *Set-PSSessionConfiguration -Name Microsoft.PowerShell -ShowSecurityDescriptorUI*在 Targetserver B 上作为管理员*   添加具有完全权限的“用户”*

 *现在是激动人心的部分：

4.  *以管理员身份在 Targetserver B 上的*sc sdshow scmanager**

**   复制 SDDL 输出

    *   sc sdset scmanager (fe:)"D:(A;;CC;;;AU)(A;;CCLCRPRC;;;IU)(A;;CCLCRPRC;;;SU)(A;;CCLCRPWPRC;;;SY) (A;;KA;;;BA)S:(AU;FA;KA;;;WD)(AU;OIIOFA;GA;;;WD)" ，在输出中，您必须在此部分之后填写***(A;; CCLCRPWPRC;;;SY)***这 = (A;;KA;;; *SID* )

    *   *SID*当然代表非​​特权“用户”用户的 SID

    *   当一切正常时，它会看起来像这样：

    D:(A;;CC;;;AU)(A;;CCLCRPRC;;;IU)(A;;CCLCRPRC;;;SU)(A;;CCLCRPWPRC;;;SY)(A;;KA;;; S-1-5-21-4233383628-1788409597-1873130553-1161)(A;;KA;;;BA)S:(AU;FA;KA;;;WD)(AU;OIIOFA;GA;;;WD)* 

 *希望您会喜欢这种小而复杂的解决方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-01T21:54:30.987

查看和操作服务需要目标机器的管理权限。

我能够通过尝试以`Get-Service -ComputerName MyServer`对相关服务器没有管理权限的用户帐户登录时运行来复制您的错误消息。

您可以通过授予目标服务器上的工作站用户帐户管理权限或通过在服务器上创建本地组并向该组的成员授予调用权限来解决此问题。如果你想做后者，请参阅下面的文章。

[msgoodies：在没有管理权限的情况下使用 PS 会话](http://msgoodies.blogspot.com/2009/09/using-ps-session-without-having.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-04-17T22:26:33.003

以@scusi marcus 的精彩回答为基础：

假设我有一个名为“user1”的非特权/受限用户，他希望将 powershell(v2+) 从客户端机器 A 远程处理到目标服务器 B。

脚步：

1.  从目标服务器 B 上提升的 powershell 提示符，运行`enable-psremoting`. 接受几个 Y/N 对话框确认或使用`-force`switch 运行。
2.  在与步骤 1 相同的提升提示中，*Set-PSSessionConfiguration -Name Microsoft.PowerShell -ShowSecurityDescriptorUI*
3.  在出现的对话框中，添加“user1”。*除非您计划远程操作服务，否则读取*权限应该足够了，在这种情况下，您将需要*Full Control*。
4.  在目标服务器 B 上，从提升的（非 powershell）提示符或以管理员身份运行`sc sdshow scmanager`. 复制 SDDL 输出。可能看起来像这样：`D:(A;;CC;;;AU)(A;;CCLCRPRC;;;IU)(A;;CCLCRPRC;;;SU)(A;;CCLCRPWPRC;;;SY)(A;;KA;;;BA)S:(AU;FA;KA;;;WD)(AU;OIIOFA;GA;;;WD)`

> 更新：如果我们将受限用户添加到目标计算机的远程管理用户组，我们可以添加`(A;;LCRPWPDTLO;;;RM)`到`D:`上述 SDDL 字符串的部分，并跳过下面的步骤 5 和 6。

5.  确定低权限用户帐户的 SID（在我们的示例中为“user1”）。（提示：试试`wmic useraccount where name='user1' get sid`）
6.  将以下文本插入到我们在第 5 步中复制的输出中：其中 *SID* 是在第 5 步中确定的用户的 SID。将其插入到第 4 步中检索到的 SDDL 字符串部分`(A;;KA;;;*SID*)`之前的某个位置。所以现在您应该`S:`有一个看起来像这样的字符串：`D:(A;;CC;;;AU)(A;;CCLCRPRC;;;IU)(A;;CCLCRPRC;;;SU)(A;;CCLCRPWPRC;;;SY)(A;;KA;;;S-1-5-21-4233383628-1788409597-1873130553-1161)(A;;KA;;;BA)S:(AU;FA;KA;;;WD)(AU;OIIOFA;GA;;;WD)`
7.  在目标服务器 B 上，运行`sc sdset scmanager`我们新修改的 SDDL 字符串。所以整个命令看起来像这样： `sc sdset scmanager D:(A;;CC;;;AU)(A;;CCLCRPRC;;;IU)(A;;CCLCRPRC;;;SU)(A;;CCLCRPWPRC;;;SY)(A;;KA;;;S-1-5-21-4233383628-1788409597-1873130553-1161)(A;;KA;;;BA)S:(AU;FA;KA;;;WD)(AU;OIIOFA;GA;;;WD)`

您现在应该能够在以“user1”身份登录到客户端计算机 A 时远程访问远程服务器上的服务控制管理器。

在客户端机器 A 上，您可能会发现运行时`Get-Service –ComputerName remoteserver`并未列出所有服务。您可能需要对需要远程访问但未`Get-Service`在客户端计算机 A 上的输出中列出的特定服务重复上述过程（从步骤 4 开始）。例如，如果未列出*sqlserveragent*服务（但您知道它存在于目标服务器上），您将再次登录到目标服务器 B 并执行`sc sdshow`，但这次不是针对*scmanager*而是针对*sqlserveragent*服务，所以`sc sdshow sqlserveragent`. 您将再次收到一些需要按上述操作的 SDDL 输出。在这一点上，可能值得进一步了解 SDDL（谷歌它 - 这个[链接](https://blogs.msmvps.com/erikr/2007/09/26/set-permissions-on-a-specific-service-windows/)对我有帮助），主要*注意事项*是注意 SDDL 字符串的`D:`和`S:`部分，并确保您没有弄乱该`S:`部分。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-11-10T23:45:37.093

我知道这不是这个问题的理想答案，但我在尝试使用 PowerShell 与 Windows 7 机器对话时遇到了类似的问题。事实证明，WMI 没有安装在 Win7 附带的本机 PSv2 中。

一旦我将 v3 作为 WMI 3.0 包的一部分安装，问题就自行解决了。我建议确保所有相关的 WMI 服务都在您的服务器上运行。除非您有冲突，否则我还建议升级到 WMI 3.0。**

# php - Codeigniter phpActiveRecord 创建错误

> ID：10744905
> 
> 赞同：1
> 
> 时间：2012-05-24T20:36:24.287
> 
> 标签：php, codeigniter, phpactiverecord

```
class User extends ActiveRecord\Model
{
pubic static $primary_key = 'userId';
private function isUserLoggedIn() {}

} 
```

我得到的错误：

> 遇到 PHP 错误
> 
> 严重性：通知
> 
> 消息：试图获取非对象的属性
> 
> 文件名：lib/Model.php
> 
> 行号：830

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T19:42:06.127

这已经晚了几个月，但我自己刚刚进入 php-activerecord。

您的问题可能是您输入了“public”而不是“public”，而 php 默认情况下不支持任何公共变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T20:41:33.260

您的问题将出现在您的用户模型中。可能你没有扩展 CI_Model，你没有在用户构造函数中调用 parent::construct()，或者那里有其他错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-13T06:46:15.763

这是由于表中缺少**自动增量**字段造成的。请添加**自动增量**字段。

我也遇到过同样的问题。

# jquery - jQuery 在 IE 中不起作用

> ID：10744915
> 
> 赞同：0
> 
> 时间：2012-05-24T20:36:58.783
> 
> 标签：jquery, internet-explorer

我正在努力让用户可以实时加载他们的内容。jQuery 在 Chrome 和 Firefox 中完美运行，但在任何版本的 IE 中都无法运行。有什么建议么？

```
$(function () {
    var refreshContent = 0;
    $('#userDiv') .mouseover (function () {
        refreshContent = setInterval(function () {
            $.get("../pages/content/myContent.php", function(results) {
                $('#myContent') .html (results);
            });
            clearInterval(refreshContent);
        }, 1000);
    });
    $('#userDiv') .mouseout (function () {
        clearInterval(refreshContent);
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T20:49:33.067

你为什么要使用 setinterval() 呢？这对我来说没有意义。摆脱 mouseout 事件和 refreshContent 变量。改用 setTimeout() ，它应该可以正常工作。

我的猜测是它在 IE 中不起作用，因为在 $.get() 甚至触发之前调用了 clearInterval()。

# android - andengine中的上下触摸事件

> ID：10744917
> 
> 赞同：0
> 
> 时间：2012-05-24T20:37:05.907
> 
> 标签：android, button, andengine, effects

我添加了一个 srpite 图像。我将它用作按钮。当我按下它时，它的效果应该像下面的代码一样。它只有在我写 touch.event.action_down 时才有效。但我想当我的手指向上时，按钮应该像下面的代码一样返回状态。但它不起作用。

```
 Sprite spriteMusicPicture1 = new Sprite(726.0f, 350.0f, mFaceTextureRegion7){
                @Override
                public boolean onAreaTouched(final TouchEvent pAreaTouchEvent, final float pTouchAreaLocalX, final float pTouchAreaLocalY) {
                    switch(pAreaTouchEvent.getAction()) {
                        case TouchEvent.ACTION_DOWN:                    
                            this.setScale(1.25f);
                            this.setAlpha(0.5f);

                        case TouchEvent.ACTION_UP:  
                            this.setScale(1.0f);
                            this.setAlpha(1.0f);

                            }
                            return true;
                }
            }; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-24T20:53:54.657

每次之后，`case`您都必须**休息一下；** 否则它不会停止并继续执行所有行

# jasper-reports - 避免将文本字段拆分为多个页面

> ID：10744920
> 
> 赞同：5
> 
> 时间：2012-05-24T20:37:20.343
> 
> 标签：jasper-reports

我有一个主报告，在主报告中有一个子报告，称为：

```
<detail>
    <band height="50">
        <subreport>
            <reportElement x="0" y="1" width="802" height="49" isPrintInFirstWholeBand="true" isPrintWhenDetailOverflows="true"/>
            <subreportParameter name="project_id">
                <subreportParameterExpression><![CDATA[$P{project_id}]]></subreportParameterExpression>
            </subreportParameter>
            <connectionExpression><![CDATA[$P{REPORT_CONNECTION}]]></connectionExpression>
            <subreportExpression><![CDATA["subs/Project_planned.jasper"]]></subreportExpression>
        </subreport>
    </band>
</detail> 
```

子报表中存在问题，因为详细信息带中的文本字段被拆分在多个页面上，看起来不太好。使用该属性时是否有防止文本字段拆分为多个页面的选项`isStretchWithOverflow`

文本字段的当前代码

```
 <textField isStretchWithOverflow="true" isBlankWhenNull="true">
                <reportElement stretchType="RelativeToBandHeight" x="555" y="0" width="99" height="21" isPrintInFirstWholeBand="true" forecolor="#000000"/>
                <box leftPadding="2">
                    <topPen lineWidth="1.0" lineColor="#000000"/>
                    <leftPen lineWidth="1.0" lineColor="#000000"/>
                    <bottomPen lineWidth="1.0" lineColor="#000000"/>
                    <rightPen lineWidth="1.0" lineColor="#000000"/>
                </box>
                <textElement verticalAlignment="Middle">
                    <paragraph lineSpacing="Single"/>
                </textElement>
                <textFieldExpression><![CDATA[$F{logic}]]></textFieldExpression>
            </textField> 
```

外观示例（抱歉缺少数据）：

![避免在多个页面上拆分文本字段](../Images/d8162f3834a82168e240a35fd483d19c.png)

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-24T21:40:28.073

是的，但不在文本字段上。对于文本字段所在的波段，您可以将拆分类型设置为`Prevent`。如果您在 Detail Band 上设置，并且该行需要溢出到下一页，它会将整行移动到下一页。

# android - 从后台应用程序启动活动

> ID：10744923
> 
> 赞同：4
> 
> 时间：2012-05-24T20:37:42.387
> 
> 标签：android, android-intent, android-activity, launching-application

我的应用程序在后台运行，并且我希望在运行以下代码时应用程序显示在 android 手机的顶部（启动）。（我知道代码肯定会运行）

这似乎是一件简单的事情，但我在这个网站上花了几个小时，每个人似乎都在建议这样的事情：

```
Intent intent = new Intent(myActivity.this, myActivity.class);
startActivity(intent); 
```

但是，它并没有将应用程序带到最前面并启动它。

我通过通知启动的 PendingIntent 让它工作。我通过下面的代码完成了。但我希望应用程序自行启动，而无需用户点击通知。

```
Intent intent = new Intent(myActivity.this, myActivity.class);
PendingIntent contentIntent = PendingIntent.getActivity(this, REQUEST_CODE, intent, 0);
notification.setLatestEventInfo(this, "title", "msg", contentIntent); 
```

我也试过：

```
Intent intent = new Intent("android.intent.action.MAIN");
startActivity(intent); 
```

并标记意图：

```
intent.setFlags(Intent.FLAG_FROM_BACKGROUND);
intent.setFlags(Intent.FLAG_ACTIVITY_BROUGHT_TO_FRONT);
intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK); 
```

但似乎没有做任何事情，任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-24T21:00:00.303

您应该能够像这样调用自己的应用程序：

```
Intent intent = new Intent("android.intent.category.LAUNCHER");
intent.setClassName("com.your.package", "com.your.package.MainActivity");
intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
startActivity(intent); 
```

**编辑：**忘记添加 intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T21:02:35.870

据我了解，您想要一个在后台和某个事件中运行的**服务，您希望您的应用程序的活动出现在前面，即无论他在做什么，都在用户当前屏幕上。**不建议让后台服务在没有用户操作的情况下启动应用程序。android开发者网站说

> 状态栏通知应该用于后台服务需要提醒用户需要响应的事件的任何情况。**后台服务不应该为了接收用户交互而自行启动活动。**该服务应该创建一个状态栏通知，**在用户选择时启动该活动。**

因此，不要试图让它自行启动。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T21:06:10.857

我不在我的笔记本电脑自动取款机后面，所以我不确定，但我认为你必须通过上下文对象手然后执行 context.startactivity(intent);

对不起，我在手机自动取款机上

希望能帮助到你

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-24T21:09:58.363

我在这里抓着稻草，但你写道：

> MyActivity 首先启动，然后我要么导航到另一个应用程序，要么直接点击主屏幕让我的应用程序在后台运行。

所以情况是你原来的 Activity 没有在后台运行，当你按下 HOME 时，它很可能已经停止并被销毁。您的后台任务仍然是孤立的，并且**MyActivity.this 此时**为**空**。

尝试测试**Log.i(TAG,MyActivity.this);** 打印到 LogCat。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-31T22:54:03.827

我最终使用了一个未决的意图，而不是直接尝试使用一个意图。像这样的东西：似乎要简单得多。

`Intent.send(this, 0, intent);`

谢谢。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-03-06T16:24:16.023

此外，我已经看到自 compileSdkVersion 29 以来这是不可能的，除非有一些限制：

*   活动最近才开始。
*   该应用程序`finish()`最近调用了。
*   通过 PendingIntent，但仅在发送通知几秒钟后。
*   该应用已被用户授予 SYSTEM_ALERT_WINDOW 权限。...

[https://developer.android.com/guide/components/activities/background-starts](https://developer.android.com/guide/components/activities/background-starts)

# eclipse - Eclipse tomcat启动失败

> ID：10744928
> 
> 赞同：2
> 
> 时间：2012-05-24T20:37:52.550
> 
> 标签：eclipse, tomcat

我在 Windows 7（x64 位）上运行 Eclipse Indigo（3.7），当我使用 Mongrel（用于在 Eclipse 中运行 Tomcat 的 Eclipse 插件）启动 Tomcat 7.0.12 时，我得到：

```
May 24, 2012 7:56:17 PM org.apache.catalina.startup.Bootstrap initClassLoaders
SEVERE: Class loader creation threw exception
java.lang.NoSuchMethodError: org.apache.catalina.startup.ClassLoaderFactory.createClassLoader(Ljava/util/List;Ljava/lang/ClassLoader;)Ljava/lang/ClassLoader;
    at org.apache.catalina.startup.Bootstrap.createClassLoader(Bootstrap.java:150)
    at org.apache.catalina.startup.Bootstrap.initClassLoaders(Bootstrap.java:91)
    at org.apache.catalina.startup.Bootstrap.init(Bootstrap.java:227)
    at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:425) 
```

我的电脑上有 jdk1.7.0_04。

我尝试过的事情：

-另一个版本的Tomcat

- 删除和重新添加 Tomcat 服务器

- 确保系统 java 和 Eclipse java 都是 jdk1.7.0_04

- 现在用谷歌搜索 2 天的可能解决方案。

这些都没有运气。有什么想法吗 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-03-05T21:18:15.977

也许有点晚了；但对于其他可能有这个问题的人；原来我在我的 CATALINA_HOME 环境变量的末尾放了一个反斜杠 \ （我使用的是 Windows）。当我删除它时，我可以开始使用 catalina run 命令。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T14:26:43.807

对于来这里寻求帮助的人。我发现这个论坛条目对解决我的 Tomcat 启动问题很有用：http: [//www.coderanch.com/t/458931/Tomcat/running-tomcat](http://www.coderanch.com/t/458931/Tomcat/running-tomcat)
即使他们在讨论 Tomcat 5，它也帮助我获得了 Tomcat 实例7运行。

# javascript - YUI 压缩器错误 - jQuery Autotype

> ID：10744930
> 
> 赞同：1
> 
> 时间：2012-05-24T20:37:56.947
> 
> 标签：javascript, jquery, yui, minify

我正在尝试使用 YUI Compressor 将我所有的 javascripts 缩小并放入一个文件中。

我正在使用这个 javascript 文件：[https ://github.com/mmonteleone/jquery.autotype/blob/master/jquery.autotype.js](https://github.com/mmonteleone/jquery.autotype/blob/master/jquery.autotype.js)

我显然有一个本地副本。但是当我通过 YUI Compressor 运行该特定文件时，我收到以下错误：

```
[INFO] Using charset UTF-8
[ERROR] 20:32:missing formal parameter
[ERROR] 21:32:missing formal parameter
[ERROR] 21:71:syntax error
[ERROR] 22:30:syntax error
[ERROR] 25:13:syntax error
[ERROR] 26:22:syntax error
[ERROR] 27:36:identifier is a reserved word
[ERROR] 28:13:syntax error
[ERROR] 29:21:syntax error
[ERROR] 53:29:invalid property id
[ERROR] 53:30:syntax error
[ERROR] 54:30:syntax error
[ERROR] 55:22:syntax error
[ERROR] 62:29:invalid property id
[ERROR] 62:30:syntax error
[ERROR] 63:30:syntax error
[ERROR] 64:22:syntax error
[ERROR] 106:33:invalid property id
[ERROR] 106:34:syntax error
[ERROR] 107:34:syntax error
[ERROR] 108:44:syntax error
[ERROR] 109:26:syntax error
[ERROR] 151:29:invalid property id
[ERROR] 151:30:syntax error
[ERROR] 152:30:syntax error
[ERROR] 160:34:missing name after . operator
[ERROR] 163:33:missing name after . operator
[ERROR] 165:13:syntax error
[ERROR] 167:9:syntax error
[ERROR] 168:29:syntax error
[ERROR] 209:54:missing name after . operator
[ERROR] 218:9:syntax error
[ERROR] 219:30:syntax error
[ERROR] 220:27:missing ; before statement
[ERROR] 221:24:syntax error
[ERROR] 230:13:syntax error
[ERROR] 231:19:syntax error
[ERROR] 233:17:syntax error
[ERROR] 235:13:syntax error
[ERROR] 283:1:syntax error
[ERROR] 1:0:Compilation produced 40 syntax errors.
org.mozilla.javascript.EvaluatorException: Compilation produced 40 syntax errors.
at com.yahoo.platform.yui.compressor.YUICompressor$1.runtimeError(YUICompressor.java:154)
at org.mozilla.javascript.Parser.parse(Parser.java:392)
at org.mozilla.javascript.Parser.parse(Parser.java:337)
at com.yahoo.platform.yui.compressor.JavaScriptCompressor.parse(JavaScriptCompressor.java:312)
at com.yahoo.platform.yui.compressor.JavaScriptCompressor.<init>(JavaScriptCompressor.java:533)
at com.yahoo.platform.yui.compressor.YUICompressor.main(YUICompressor.java:131)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at com.yahoo.platform.yui.compressor.Bootstrap.main(Bootstrap.java:21) 
```

我已经浏览了他们的代码，无法弄清楚为什么会出现这个错误。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-24T21:19:42.810

我想到了。我使用了[http://closure-compiler.appspot.com/home](http://closure-compiler.appspot.com/home)，它是一个基于 Web 的 Google Closure 工具，据我所见，它基本上与 YUI 做同样的事情，只是他们的 Web 工具给出了比 YUI 更详细的错误错误日志，我能够确定它失败了，因为脚本的作者经常使用 char 的保留变量名。将我的本地版本的每个 char 实例修改为 'chara' （我知道是蹩脚的）它工作得很好。

# java - 如何为 play 框架项目编写 Maven POM 文件？

> ID：10744933
> 
> 赞同：4
> 
> 时间：2012-05-24T20:38:05.640
> 
> 标签：java, maven, maven-2, playframework, playframework-2.0

> **可能的重复：**
> [有没有一个好方法可以让一个戏剧变得更加精彩！框架应用？](https://stackoverflow.com/questions/7366904/is-there-a-good-way-to-mavenify-a-play-framework-application)

我刚开始为我的新项目玩游戏框架。我不熟悉 scala，也不知道 sbt 构建和部署工具。我正在使用 java 用 play 框架编写我的应用程序。

我在播放[文档中读到了这个](http://www.playframework.org/documentation/2.0/SBTDependencies)

“也可以编写一个 Maven POM 文件或 Ivy 配置文件来外部配置您的依赖项，并让 sbt 使用这些外部配置文件。”

我需要在我的本地 nexus 存储库中构建和存储我的应用程序。但是我无法找到如何为我的应用程序生成默认 POM 并使用它来管理依赖项并在构建到我的本地 nexus 存储库后将其部署。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T18:42:38.213

只是为了繁荣，看看这里的答案：[有没有什么好方法可以让一个戏剧变得更加精彩！框架应用？](https://stackoverflow.com/questions/7366904/is-there-a-good-way-to-mavenify-a-play-framework-application)

# bash - 对话框显示带有文件输入的菜单

> ID：10744935
> 
> 赞同：3
> 
> 时间：2012-05-24T20:38:12.353
> 
> 标签：bash, dialog

在我的脚本中，我创建了一个文件，我想将其用作对话框程序的输入源，以填充菜单对话框。

在文件中，每一行都包含一个数字和一个菜单标题。

```
INPUT=""
rm result
while read LINE
do
        case $LINE in
            '/ >'*|---*|'/ > '*)
                  continue;;
            esac
#       echo "1 $LINE "
                echo -n " 1  \"$LINE\"" >>result
done < tmpfile
#printf "%s " $INPUT
DIALOG  --menu "Latest news " 20 50 30 `cat result` 
```

DIALOG 是一个函数，这是源代码：

```
DIALOG () {
        dialog --backtitle "$TITLE" "$@"
        return $?
} 
```

对话框的每个菜单项都需要一个标识符（在我的示例中是数字）和一个标签（在双引号之间，如果它超过一个单词）。

问题是即使文件内容具有正确的格式：

```
1 "item number 1" 2 "item number 2" ... 
```

对话框命令不将 \" 识别为标签分隔符，但它认为它是字符串的一部分，导致菜单混乱，每个单词都有一个菜单声音。

但是如果我尝试将相同的文件内容直接复制并粘贴到 shell 命令中（不使用脚本），菜单就会正确显示。

任何的想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-24T22:50:34.733

您可以使用数组来保留结果，然后使用正确的引用将其发送到`dialog`：

```
ar=()
while read n s ; do
    ar+=($n "$s")
done < result
dialog  --menu "Latest news " 20 50 30 "${ar[@]}" 
```

您可能根本不需要创建临时文件，您可以直接填充数组。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-04-27T12:48:28.700

问题是空间。设置 IFS=$'\n' 并将结果文件中的值保留在上面建议的单独行中。

# mysql - codeigniter 活动记录建议

> ID：10744945
> 
> 赞同：1
> 
> 时间：2012-05-24T20:38:55.810
> 
> 标签：mysql, codeigniter

在mysql中我可以查询如下：

```
select studentname,'student' as profession from students 
```

它返回如下内容：

```
studentname | profession  
------------+-----------
name1       | student  
name2       | student  
... 
```

但是如何在使用活动记录的 codeigniter 中做到这一点？我是 CI 的新手，非常感谢您的帮助。

注意：为了澄清我的问题，学生表中没有名为`student`or的列。是我希望与我的结果集一起使用的固定文本。`profession``student`

如果我查询类似：

```
$this->db->select("studentname, student as profession")->from('students') 
```

然后它在尝试查找学生列时给出错误，而它只是一个静态值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T21:32:17.280

select 有第二个选项。将其设置为 false 并尝试 -

```
$this->db->select('studentname, "student" as profession', false)->from('students') 
```

# jsf - JSF 2 -- 永久重定向 (301)

> ID：10744949
> 
> 赞同：4
> 
> 时间：2012-05-24T20:39:12.393
> 
> 标签：jsf, redirect, jsf-2, http-status-code-301

我正在尝试从 JSF 中实现 301 重定向，但是当我触发它时，我总是看到 302 正在执行。有人能告诉我如何改变下面的方法来完成301吗？

```
/**
 * Redirect to specified destination url
 *
 * @param destination
 */
public static void permanentRedirect(String destination) {
    final ExternalContext externalContext = FacesContext.getCurrentInstance().getExternalContext();

    try {
        HttpServletResponse response = (HttpServletResponse) FacesContext.getCurrentInstance().getExternalContext().getResponse();
        response.setStatus(HttpServletResponse.SC_MOVED_PERMANENTLY);

        if (!response.isCommitted()) {
            externalContext.redirect(destination);
        }
    } catch (IOException e) {
        LOGGER.debug("Could not redirect to " + destination);
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-24T20:47:05.300

你不应该调用`externalContext.redirect(destination)`. 它会将状态*覆盖*为 302。您应该手动[设置`Location`标头](http://docs.oracle.com/javaee/6/api/javax/faces/context/ExternalContext.html#setResponseHeader%28java.lang.String,%20java.lang.String%29)并[完成响应](http://docs.oracle.com/javaee/6/api/javax/faces/context/FacesContext.html#responseComplete%28%29)。

```
externalContext.setResponseStatus(HttpServletResponse.SC_MOVED_PERMANENTLY);
externalContext.setResponseHeader("Location", destination);
facesContext.responseComplete(); 
```

# python - 如何查看 Python 字典的所有元素，仅获取元组键中元素之一的一个值

> ID：10744954
> 
> 赞同：1
> 
> 时间：2012-05-24T20:39:30.403
> 
> 标签：python, dictionary, key, tuples, multidimensional-array

对于具有元组键的 Python 字典，如何只显示字典中元组元素之一设置为单个值的部分。然后还希望删除这些元素。

例如，字典

```
testTrak = {(0,1): '+', (0,2): '-', (1,1): '34.0', (1,2): 'test'} 
```

我只想列出第一个数字的元素`tuple = 1`；也就是说，我只想列出`(1,*)`星号代表通配符的位置；因此，只有 `(1,1): '34.0'`和`(1,2): 'test'`将被列出。

似乎某种切片应该起作用，但看不到。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T20:41:03.243

对不起，我看错了你的问题。这是几乎任何 Python 版本所需的解决方案：

```
>>> testTrak = {(0,1): '+', (0,2): '-', (1,1): '34.0', (1,2): 'test'}
>>> dict([(key, value) for key, value in testTrak.items() if key[0] == 1])
{(1, 2): 'test', (1, 1): '34.0'} 
```

在 Python 2.7+ 中，您可以编写不太冗长的版本：

```
>>> testTrak = {(0,1): '+', (0,2): '-', (1,1): '34.0', (1,2): 'test'}
>>> {key:value for key, value in testTrak.items() if key[0] == 1}
{(1, 2): 'test', (1, 1): '34.0'} 
```

排除项目只是否定 if 子句的问题，如果这是您在评论中提出的问题：

```
>>> testTrak = {(0,1): '+', (0,2): '-', (1,1): '34.0', (1,2): 'test'}
>>> {key:value for key, value in testTrak.items() if key[0] != 1}
{(0, 1): '+', (0, 2): '-'} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T20:41:29.483

你想要的是一个前缀树，字典没有给你内置的。你有几个选择：

1.  您可以使用 过滤字典键`iterkeys()`，它具有线性时间复杂度，如果字典很大，效率会非常低；

2.  如果内存不是问题 - 创建 2 个字典，一个按元组，一个按第一个成员映射到列表。它会很快但内存很重。

3.  理想的方法是使用前缀树数据结构。我不知道有什么好的 python 模块可以做到这一点（我已经为我的工作编写了一个，但它不是开源的），但我确信有。

# ruby-on-rails-3 - 更改 Rails 模型中的错误消息

> ID：10744959
> 
> 赞同：0
> 
> 时间：2012-05-24T20:39:56.423
> 
> 标签：ruby-on-rails-3, paperclip, paperclip-validation

我有一个带有模型验证的 Rails (3.1) 应用程序，该应用程序在触发时将模型和字段名称放在消息之前，例如：

> 个人资料图片 个人资料图片内容类型 个人资料图片只允许使用 jpeg、gif 和 png 文件

有没有办法避免这种情况，所以它写道：

> 个人资料图片只允许使用 jpeg、gif 和 png 文件

model.rb 验证：

```
validates_attachment_content_type :profile_image,
  :content_type => ['image/jpeg', 'image/png', 'image/gif'],
  :message      => "Only jpeg, gif and png files are allowed for profile pictures" 
```

该错误在我的布局中作为此代码的一部分出现：

```
<% if object.errors.any? %>
  <div class="alert alert-message error" data-alert="alert">
    <a class="close" data-dismiss="alert">×</a>
    <ul>
      <% object.errors.full_messages.each do |msg| %>
        <li><%= msg %></li>
      <% end %>
    </ul>
  </div>
<% end %> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T21:02:52.577

我的直觉是这`msg`实际上不是消息，而是整个错误哈希，因此调用`<%= msg %>`实际上将整个哈希转换为字符串，包括键。您可以使用 来确认这一点`<%= msg.class %>`。

假设您发布的视图代码是部分的，那么查看包含该部分的视图会很有帮助。如果它不是部分的，那么查看周围的代码会很有用。

# sql-server - 引用表变量时如何解决“必须声明标量变量”错误？

> ID：10744961
> 
> 赞同：32
> 
> 时间：2012-05-24T20:39:59.007
> 
> 标签：sql-server, tsql, table-variable

我不知道为什么（或者也许你不能这样做）我得到了超出范围的错误

> 必须声明标量变量“@CompanyGroupSites_Master.

那么是不是我不能在我的光标内以这种方式访问​​我的表变量，或者我一定错过了一些简单的事情，当从光标体内引用时，该表变量超出了范围？

```
DECLARE @TotalCompaniesToProcess int 
SET @TotalCompaniesToProcess = (select distinct Count(BusinessLine) from vwBuisinessUnit)

IF(@TotalCompaniesToProcess > 0)
BEGIN

    ---------------- ############# SETUP ############# ----------------

    DECLARE @Companies TABLE (Company varchar(30))        
    Insert Into @Companies select distinct Company from Companies

    DECLARE @CompanyGroups_Added TABLE(
                                        CompanyGroupDesc varchar(50),
                                        size varchar(50)
                                      )

    DECLARE @CompanyGroupSites_Added TABLE (
                                              CompanyGroupID int,
                                              CompanyID varchar(12)                                    
                                           )

    DECLARE @CompanyGroupSites_Master TABLE (
                                              CompanyGroupID int,
                                              CompanyID varchar(12)
                                           )
    Insert into @CompanyGroupSites_Master select CompanyGroupID, CompanyID from Sec.CompanyGroupSites                        

    DECLARE @CompanyGroupID int                         
    DECLARE @Company int

    ----------------  END SETUP ----------------

    ---------------- UPDATE THE COMPANIES ----------------

    DECLARE Companies_Cursor CURSOR FOR (select distinct BusinessLine from vwBuisinessUnit)  
    --select distinct BU, BusinessLine from vwBusinessUnit

    Open Companies_Cursor

    Fetch NEXT FROM Companies_Cursor into @Company

    WHILE @@FETCH_STATUS = 0
    BEGIN

        -- is there an existing CompanyGroup for this Organization?  If not create it
        SET @CompanyGroupID = ( select CompanyGroupID from Sec.CompanyGroup 
                                where size = 'Business'
                                and CompanyGroupDesc = @Company)

        IF(@CompanyGroupID < 1) 
        BEGIN
            INSERT INTO @CompanyGroups_Added ([CompanyGroupDesc], [Size])
            VALUES (@Company, 'Business')

            SET @CompanyGroupID = @@IDENTITY

            select @CompanyGroupID as CompanyGroupID_Added -- testing
        END

        Select ToDelete.* from (
            select CompanyGroupID, Company 
            from @CompanyGroupSites_Master 
            where @CompanyGroupSites_Master.CompanyGroupID = @CompanyGroupID) as ToDelete

        delete from @CompanyGroupSites_Master where @CompanyGroupSites_Master.CompanyGroupID = @CompanyGroupID

        Fetch NEXT FROM Companies_Cursor into @Company
    END

    CLOSE Companies_Cursor
    DEALLOCATE Companies_Cursor

END 
```

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2012-05-24T21:01:49.907

这是一个[长期存在的解析器问题](http://connect.microsoft.com/SQLServer/feedback/details/329692/table-variable-inconsistent-brackets-required-or-not)。您需要去掉表格前缀或将其括在方括号中。

IE

```
delete from @CompanyGroupSites_Master 
where CompanyGroupID = @CompanyGroupID 
```

或者

```
delete from @CompanyGroupSites_Master 
where [@CompanyGroupSites_Master].CompanyGroupID = @CompanyGroupID 
```

**不是**

```
delete from @CompanyGroupSites_Master 
where @CompanyGroupSites_Master.CompanyGroupID = @CompanyGroupID 
```

# mysql - 将触发器从一个表移动到另一个语法问题

> ID：10744970
> 
> 赞同：0
> 
> 时间：2012-05-24T20:40:30.503
> 
> 标签：mysql, triggers

我必须从该表的备份版本中恢复该表。然后我去重新创建触发器。我无法重新创建一个。我已经看过一些例子，说明这种触发器应该如何看起来没有任何东西在盯着我看。当我单击旧触发器上的“更改”以保存它时，我从 phpmyadmin 中显示的代码中复制了它。我以为那是万无一失的！

1064 - 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 5 行的 '' 附近使用正确的语法

```
CREATE TRIGGER `trig_parts_price_AfterUpdate` AFTER UPDATE ON `parts`
    FOR EACH ROW BEGIN
       IF (NEW.cost <> OLD.cost || NEW.price <> OLD.price || NEW.QtyInStock <> OLD.QtyInStock) THEN
          INSERT INTO `inv_hist_simple` (sku, cost, price, QtyInStock, change_date) 
          VALUES(OLD.sku_m, NEW.cost, NEW.price, NEW.QtyInStock, NOW());
    END IF;
END; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T22:02:09.950

将此行放在您的代码上方：

```
DELIMITER $$ 
```

并将代码的最后一行更改为

```
END $$ 
```

然后在最后添加这一行：

```
DELIMITER ; 
```

否则会`;`告诉服务器，触发器的代码在您的插入语句之后完成，这会导致语法错误。

所以它基本上应该是这样的：

```
DELIMITER $$
CREATE TRIGGER `trig_parts_price_AfterUpdate` AFTER UPDATE ON `parts`
    FOR EACH ROW BEGIN
       IF (NEW.cost <> OLD.cost || NEW.price <> OLD.price || NEW.QtyInStock <> OLD.QtyInStock) THEN
          INSERT INTO `inv_hist_simple` (sku, cost, price, QtyInStock, change_date) 
          VALUES(OLD.sku_m, NEW.cost, NEW.price, NEW.QtyInStock, NOW());
    END IF;
END $$
DELIMITER ; 
```

# linux-kernel - 使用 fsync 最小化磁盘访问

> ID：10744972
> 
> 赞同：0
> 
> 时间：2012-05-24T20:40:38.220
> 
> 标签：linux-kernel, disk, fsync

> 有一种情况是，每当发生写入时，fsync 都会与该写入一起使用。那么，如何最小化磁盘访问呢？内核如何做到这一点？

fsync() 将文件描述符 fd 引用的文件的所有修改的内核数据（即修改的缓冲区高速缓存页）传输（“刷新”）到磁盘设备（或其他永久存储设备）。

我认为内核可以在一段时间后定期将所有修改缓冲区的数据传输到硬盘。这样就可以最大限度地减少磁盘访问。

请提供一些建议/提示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T21:02:03.420

一般来说，尽量避免过度思考。不要调用 fsync，让内核决定何时进行物理写入。

以下是 ext4 的内核选项，您可以使用它来调整内核的行为以满足您的需求 - 但这将是一个服务器调整练习，而不是您可以从您的应用程序中实现的东西：http: [//kernel.org/doc/Documentation/文件系统/ext4.txt](http://kernel.org/doc/Documentation/filesystems/ext4.txt)

这可能是一个有趣的问题：“ max_batch_time=usec ext4 等待其他文件系统操作与同步写入操作一起批处理的最长时间。”

# c# - 在 C# 中排除以特定三位数字开头的数字

> ID：10744981
> 
> 赞同：3
> 
> 时间：2012-05-24T20:41:53.057
> 
> 标签：c#

我目前正在构建一个 C# 应用程序，它会生成一个随机的 9 位数字，每个数字都会运行。我正在寻找一种方法来排除以“666”开头的数字。我将如何编写一份声明以排除以某些数字开头的数字。

这是代码片段，以防万一。

```
Random SSN = new Random();
string temp = "";
int num = SSN.Next(100000000, 999999999);
temp = num.ToString(); 
```

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-24T20:43:59.190

好吧，你*可以*写：

```
int num;
do {
   num = SSN.Next(100000000, 999999999);
} while (num >= 666000000 && num < 667000000); 
```

（我最初也使用了字符串比较，但由于我们总是准确地得到 9 位数字，我们可以轻松地进行数字比较。）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-24T20:45:12.867

简单的方法是：

```
Random SSN = new Random();
string temp = "";
do
{
    int num = SSN.Next(100000000, 999999999);
    temp = num.ToString();
} while (temp.StartsWith("666")); 
```

如果您真的很注重效率并想不惜一切代价避免字符串比较和无界循环，您可以使用：

```
Random SSN = new Random();
int num = SSN.Next(100000000, 998999999);
if (num >= 666000000)
    num += 1000000; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-24T20:50:57.253

```
Random SSN = new Random();
string temp = "";
double d = 0.6; // This will help on of choosing one half

int n1 = SSN.Next(100000000, 666000000);
int n2 = SSN.Next(667000000, 999999999);

int num = SSN.NextDouble() > d ? n1 : n2; 

temp = num.ToString(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-24T20:44:25.753

```
Random SSN = new Random();
string temp = "";
do
{
    int num = SSN.Next(100000000, 999999999);
    temp = num.ToString();
} while(num.IndexOf("666") == 0); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-24T20:48:46.030

这具有 O(1) 的复杂性。

```
 string temp = "";
                if (SSN.Next(0,999999999) < 588339221)
                {
                    temp = SSN.Next(100000000, 666000000).ToString();
                }
                else
                {
                    temp = SSN.Next(667000000, 1000000000).ToString();
                } 
```

# vim - 从 vimrc 设置语法文件夹

> ID：10744985
> 
> 赞同：1
> 
> 时间：2012-05-24T20:42:26.283
> 
> 标签：vim

有没有办法将我在 vim 中的语法目录设置为与 $VIMRUNTIME/.vim/syntax 不同的文件夹？我目前正在尝试从工作中使用不同的 python 语法文件，但我无法将它安装到常规目录，而是想从我自己的用户文件夹安装（在这种情况下，它将是 ~/.vim/syntax）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T20:44:28.203

我认为该`~/.vim`目录应该默认工作。您是否尝试过创建它并查看它是否选择了您的语法文件？

尝试将您的语法文件放入`~/.vim/after/syntax/`. 我应该在它找到的任何其他语法文件之后运行该语法文件。这也适用于其他文件夹，例如`~/.vim/after/ftplugin`.

**注意：**`after`如果文件夹不存在，您可能必须创建该文件夹。

# mysql - 我如何使用双引号在 mysql 列表中搜索特定文本

> ID：10744986
> 
> 赞同：1
> 
> 时间：2012-05-24T20:42:41.017
> 
> 标签：mysql, search

我想在表格列中搜索此文本：`"value": ""` 该列的类型是**longtext**。无论我尝试什么都没有返回结果。请帮我！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T20:46:01.243

您可以使用转义引号：\"。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T20:49:35.600

```
Select * from SomeTable Where SomeColumn Like '%"value": ""%' 
```

应该可以工作，如果它在双引号上跳动，那么像这样转义引号：

```
Select * from SomeTable Where SomeColumn Like "%\"value\": \"\"%" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T20:47:15.897

```
select * from table Where yourcol = '"value": ""' 
```

# objective-c - 是否可以阻止用户在 iOS 上使用 Safari？

> ID：10744987
> 
> 赞同：1
> 
> 时间：2012-05-24T20:42:42.203
> 
> 标签：objective-c, cocoa-touch, ios5, mobile-safari

我需要删除或至少使用户无法在 iPad 上运行 Safari。

相反，用户应该使用我们将提供的更受限制的浏览器。

这可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T20:43:58.223

有越狱的可能，没有越狱，没有。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-24T21:34:29.863

其实你可以。前往“设置”>“通用”>“限制”，启用它们，然后关闭 Safari。[您可以在 Apple网站](http://support.apple.com/kb/ht4213)上找到更多信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-25T09:37:08.273

如果您打算通过使用自己的 webview 而不是打开 safari 在您的应用程序中打开 url，您可以使用 UIWebViewDelegate 协议注册您的类并实现该方法 - webView:shouldStartLoadWithRequest:navigationType: 在此方法中，您可以处理 url 和返回 NO，这样 safari 就不会被打开。

# android - Android：如何在不使用 MapView 的情况下获取 GPS 数据？

> ID：10744988
> 
> 赞同：0
> 
> 时间：2012-05-24T20:42:46.320
> 
> 标签：android, gps, location

我试图在不使用地图视图的情况下获取 GPS 数据。我下面的代码来自 O'Rielly 的 Programming Android 书，应该可以工作但不是。我使用的是 Android 2.2.1 手机，应用程序在启动后立即关闭。

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    tvLattitude = (TextView) findViewById(R.id.tvLattitude);
    tvLongitude = (TextView) findViewById(R.id.tvLongitude);

    lm = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
    Location loc = lm.getLastKnownLocation(LocationManager.GPS_PROVIDER);

    tvLattitude.setText(Double.toString(loc.getLatitude()));
    tvLongitude.setText(Double.toString(loc.getLongitude()));

    locListenD = new DispLocListener();
    lm.requestLocationUpdates("gps", 30000L, 10.0f, locListenD);}

private class DispLocListener implements LocationListener {
    @Override
    public void onLocationChanged(Location location) {
        // TODO Auto-generated method stub
        tvLattitude.setText(Double.toString(location.getLatitude()));
        tvLongitude.setText(Double.toString(location.getLongitude()));}
    @Override
    public void onProviderDisabled(String arg0) {
        // TODO Auto-generated method stub
}
    @Override
    public void onProviderEnabled(String arg0) {
        // TODO Auto-generated method stub
    }
    @Override
    public void onStatusChanged(String arg0, int arg1, Bundle arg2) {
        // TODO Auto-generated method stub
        }}
@Override
protected void onPause() {
    // TODO Auto-generated method stub
    super.onPause();
    lm.removeUpdates(locListenD);}

@Override
protected void onResume() {
    // TODO Auto-generated method stub
    super.onResume();
    lm.requestLocationUpdates("gps", 30000L, 10.0f, locListenD);} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T20:49:19.127

```
 private LocationListener locationListener = new LocationListener() {
    public void onLocationChanged(Location location) {
        updateNearestLocation(location);
}

private boolean updateNearestLocation(Location lastKnownLocation) {

    String locationProvider = LocationManager.NETWORK_PROVIDER;
    LocationManager m_locationManager = (LocationManager) ctx.getSystemService(Context.LOCATION_SERVICE);
    try {
        m_locationManager.requestLocationUpdates(
                LocationManager.NETWORK_PROVIDER, 0, 0, locationListener);
    } catch (IllegalArgumentException iae) {
        Log.i(TAG, "Could not find a location provider");
        return false;
    }
    if (lastKnownLocation == null) {

        lastKnownLocation = m_locationManager
                .getLastKnownLocation(locationProvider);
    } else {

        m_locationManager.removeUpdates(locationListener);
    }

    if (lastKnownLocation != null) {
        lastKnownLocation.getLatitude();
    lastKnownLocation.getLongitude();

    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T20:50:52.170

也许您需要添加权限

```
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" /> 
```

到你的清单？

好吧，我建立了一个类似的项目，发现您的代码存在问题：在 onCreate 中，您立即尝试从以前的位置设置位置（在第一次运行时显然不可用）。我删除了这些行，代码似乎运行良好

```
@Override
public void onCreate(Bundle savedInstanceState) {
  super.onCreate(savedInstanceState);
  setContentView(R.layout.main);

  tvLattitude = (TextView) findViewById(R.id.tvLattitude);
  tvLongitude = (TextView) findViewById(R.id.tvLongitude);

  lm = (LocationManager) getSystemService(Context.LOCATION_SERVICE);

  locListenD = new DispLocListener();
  lm.requestLocationUpdates("gps", 30000L, 10.0f, locListenD);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T20:58:33.080

也许您需要在手机设置中打开位置：

设置 --> 位置和安全 --> 我的位置

此外，如果您使用的是模拟器，请记住它不会生成位置数据，除非您通过 DDMS 手动执行。

# php - 如何构造生成html的php

> ID：10744990
> 
> 赞同：2
> 
> 时间：2012-05-24T20:42:54.713
> 
> 标签：php, html, code-organization, html-generation

我有一个 php 文件和一堆 HTML 元素，其中包括：

1.  标题
2.  css
3.  重复使用的“间隔”元素，静态
4.  一堆模板，它们从 PHP 代码中获取参数来插入什么

基本上，我想知道将所有这些文件放入其中的正确方法是什么。我猜我的文件夹中应该有一个 file.css，php 会吞入内存并放入标题信息。间隔元素是否应该保存为“spacer.html”，并且 PHP 会将它的一个副本吞入一个字符串并在必要时将其放入 HTML 中？或者所有这些都应该作为字符串常量存在于 PHP 中吗？

动态“模板”元素有点棘手，因为我不确定如何分隔 HTML 并让它具有参数被放入的标记。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T20:44:44.480

你应该看看**MVC**。现在流行的一个是[CodeIgniter](http://www.codeigniter.com)。这个想法是您使用那些 HTML“模板”并创建 (V) 视图。PHP 使用 (C) 控制器来引导用户并调用 (M) 模型来获取数据，然后将适当的变量发送到浏览器的 (V) 视图。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-24T20:57:40.677

我注意到其他一些回答者（SP）提到了 MVC。MVC 非常重要，因为它允许您将业务逻辑与“视图”显示/UI 层分离，并将数据库逻辑与业务逻辑分离。

就像 AlienWebguy 一样，我推荐 Code Igniter，但还有许多其他优秀的 PHP 框架。

就您所问的问题而言，您应该如何构建视图层和业务逻辑。如果我有一些常见的东西，比如页眉和页脚，我会把它们放进去

`view/include/header.php` 和 `view/include/footer.php`

头文件通常包含`<html>`标签、样式表链接、任何常见的 javascript 脚本文件和一个常见的头文件（如徽标和导航）。页脚文件通常包含版权信息、任何页脚链接和`</body></html>`.

一般来说，在有效地创建视图时，您应该做的是让它们处理模型对象以显示 HTML，并且在控制器层中绝对不生成 HTML。例如

```
<table>
<?php
foreach ($users as $user) {
    printf('<tr><td>%s</td><td>%s</td></tr>', $user->id, $user->user_name);
}
?>
</table> 
```

这样做可以避免在错误的“层”上散布关注点，从而使事情变得更清晰。

如果您对在视图中直接编写 PHP 不感兴趣，您可以做的另一件事是使用模板引擎。代码点火器包括对（但您不必使用）模板引擎的支持。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-24T20:48:26.107

我通常建议使用一些好的 ol' php 包含来解决这个问题。

明智的文件结构，我可能有一个`index.php`文件——它（对#4 中的模板了解不多）会概述页面。您可以在`header.html`页面中调用或将标题放在`index.php`文件中。

css 文件最好命名为：（`style.css`这是非常标准的），您可以从头文件中调用它。

不确定您是否了解这一点，但您可以在`.php`文件中包含 HTML。您只需将文件命名为：`index.php`然后您的代码可以是：

```
<p>This is HTML.</p>

<?php echo("This is PHP."); ?> 
```

并将它们混合在一起。